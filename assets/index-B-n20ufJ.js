var oD=Object.defineProperty;var lD=(e,t,r)=>t in e?oD(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;var iy=(e,t,r)=>lD(e,typeof t!="symbol"?t+"":t,r);function cD(e,t){for(var r=0;r<t.length;r++){const n=t[r];if(typeof n!="string"&&!Array.isArray(n)){for(const s in n)if(s!=="default"&&!(s in e)){const a=Object.getOwnPropertyDescriptor(n,s);a&&Object.defineProperty(e,s,a.get?a:{enumerable:!0,get:()=>n[s]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const a of s)if(a.type==="childList")for(const l of a.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&n(l)}).observe(document,{childList:!0,subtree:!0});function r(s){const a={};return s.integrity&&(a.integrity=s.integrity),s.referrerPolicy&&(a.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?a.credentials="include":s.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function n(s){if(s.ep)return;s.ep=!0;const a=r(s);fetch(s.href,a)}})();function pa(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function uD(e){if(Object.prototype.hasOwnProperty.call(e,"__esModule"))return e;var t=e.default;if(typeof t=="function"){var r=function n(){return this instanceof n?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};r.prototype=t.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(e).forEach(function(n){var s=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(r,n,s.get?s:{enumerable:!0,get:function(){return e[n]}})}),r}var ay={exports:{}},Gu={},oy={exports:{}},er={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Uj;function dD(){if(Uj)return er;Uj=1;var e=Symbol.for("react.element"),t=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),a=Symbol.for("react.provider"),l=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),m=Symbol.for("react.memo"),f=Symbol.for("react.lazy"),p=Symbol.iterator;function x(M){return M===null||typeof M!="object"?null:(M=p&&M[p]||M["@@iterator"],typeof M=="function"?M:null)}var v={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},b=Object.assign,w={};function j(M,Z,fe){this.props=M,this.context=Z,this.refs=w,this.updater=fe||v}j.prototype.isReactComponent={},j.prototype.setState=function(M,Z){if(typeof M!="object"&&typeof M!="function"&&M!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,M,Z,"setState")},j.prototype.forceUpdate=function(M){this.updater.enqueueForceUpdate(this,M,"forceUpdate")};function _(){}_.prototype=j.prototype;function E(M,Z,fe){this.props=M,this.context=Z,this.refs=w,this.updater=fe||v}var C=E.prototype=new _;C.constructor=E,b(C,j.prototype),C.isPureReactComponent=!0;var I=Array.isArray,A=Object.prototype.hasOwnProperty,$={current:null},B={key:!0,ref:!0,__self:!0,__source:!0};function T(M,Z,fe){var ye,Le={},je=null,Me=null;if(Z!=null)for(ye in Z.ref!==void 0&&(Me=Z.ref),Z.key!==void 0&&(je=""+Z.key),Z)A.call(Z,ye)&&!B.hasOwnProperty(ye)&&(Le[ye]=Z[ye]);var Se=arguments.length-2;if(Se===1)Le.children=fe;else if(1<Se){for(var z=Array(Se),ue=0;ue<Se;ue++)z[ue]=arguments[ue+2];Le.children=z}if(M&&M.defaultProps)for(ye in Se=M.defaultProps,Se)Le[ye]===void 0&&(Le[ye]=Se[ye]);return{$$typeof:e,type:M,key:je,ref:Me,props:Le,_owner:$.current}}function K(M,Z){return{$$typeof:e,type:M.type,key:Z,ref:M.ref,props:M.props,_owner:M._owner}}function Q(M){return typeof M=="object"&&M!==null&&M.$$typeof===e}function se(M){var Z={"=":"=0",":":"=2"};return"$"+M.replace(/[=:]/g,function(fe){return Z[fe]})}var G=/\/+/g;function le(M,Z){return typeof M=="object"&&M!==null&&M.key!=null?se(""+M.key):Z.toString(36)}function F(M,Z,fe,ye,Le){var je=typeof M;(je==="undefined"||je==="boolean")&&(M=null);var Me=!1;if(M===null)Me=!0;else switch(je){case"string":case"number":Me=!0;break;case"object":switch(M.$$typeof){case e:case t:Me=!0}}if(Me)return Me=M,Le=Le(Me),M=ye===""?"."+le(Me,0):ye,I(Le)?(fe="",M!=null&&(fe=M.replace(G,"$&/")+"/"),F(Le,Z,fe,"",function(ue){return ue})):Le!=null&&(Q(Le)&&(Le=K(Le,fe+(!Le.key||Me&&Me.key===Le.key?"":(""+Le.key).replace(G,"$&/")+"/")+M)),Z.push(Le)),1;if(Me=0,ye=ye===""?".":ye+":",I(M))for(var Se=0;Se<M.length;Se++){je=M[Se];var z=ye+le(je,Se);Me+=F(je,Z,fe,z,Le)}else if(z=x(M),typeof z=="function")for(M=z.call(M),Se=0;!(je=M.next()).done;)je=je.value,z=ye+le(je,Se++),Me+=F(je,Z,fe,z,Le);else if(je==="object")throw Z=String(M),Error("Objects are not valid as a React child (found: "+(Z==="[object Object]"?"object with keys {"+Object.keys(M).join(", ")+"}":Z)+"). If you meant to render a collection of children, use an array instead.");return Me}function Y(M,Z,fe){if(M==null)return M;var ye=[],Le=0;return F(M,ye,"","",function(je){return Z.call(fe,je,Le++)}),ye}function J(M){if(M._status===-1){var Z=M._result;Z=Z(),Z.then(function(fe){(M._status===0||M._status===-1)&&(M._status=1,M._result=fe)},function(fe){(M._status===0||M._status===-1)&&(M._status=2,M._result=fe)}),M._status===-1&&(M._status=0,M._result=Z)}if(M._status===1)return M._result.default;throw M._result}var V={current:null},H={transition:null},re={ReactCurrentDispatcher:V,ReactCurrentBatchConfig:H,ReactCurrentOwner:$};function ie(){throw Error("act(...) is not supported in production builds of React.")}return er.Children={map:Y,forEach:function(M,Z,fe){Y(M,function(){Z.apply(this,arguments)},fe)},count:function(M){var Z=0;return Y(M,function(){Z++}),Z},toArray:function(M){return Y(M,function(Z){return Z})||[]},only:function(M){if(!Q(M))throw Error("React.Children.only expected to receive a single React element child.");return M}},er.Component=j,er.Fragment=r,er.Profiler=s,er.PureComponent=E,er.StrictMode=n,er.Suspense=d,er.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=re,er.act=ie,er.cloneElement=function(M,Z,fe){if(M==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+M+".");var ye=b({},M.props),Le=M.key,je=M.ref,Me=M._owner;if(Z!=null){if(Z.ref!==void 0&&(je=Z.ref,Me=$.current),Z.key!==void 0&&(Le=""+Z.key),M.type&&M.type.defaultProps)var Se=M.type.defaultProps;for(z in Z)A.call(Z,z)&&!B.hasOwnProperty(z)&&(ye[z]=Z[z]===void 0&&Se!==void 0?Se[z]:Z[z])}var z=arguments.length-2;if(z===1)ye.children=fe;else if(1<z){Se=Array(z);for(var ue=0;ue<z;ue++)Se[ue]=arguments[ue+2];ye.children=Se}return{$$typeof:e,type:M.type,key:Le,ref:je,props:ye,_owner:Me}},er.createContext=function(M){return M={$$typeof:l,_currentValue:M,_currentValue2:M,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},M.Provider={$$typeof:a,_context:M},M.Consumer=M},er.createElement=T,er.createFactory=function(M){var Z=T.bind(null,M);return Z.type=M,Z},er.createRef=function(){return{current:null}},er.forwardRef=function(M){return{$$typeof:u,render:M}},er.isValidElement=Q,er.lazy=function(M){return{$$typeof:f,_payload:{_status:-1,_result:M},_init:J}},er.memo=function(M,Z){return{$$typeof:m,type:M,compare:Z===void 0?null:Z}},er.startTransition=function(M){var Z=H.transition;H.transition={};try{M()}finally{H.transition=Z}},er.unstable_act=ie,er.useCallback=function(M,Z){return V.current.useCallback(M,Z)},er.useContext=function(M){return V.current.useContext(M)},er.useDebugValue=function(){},er.useDeferredValue=function(M){return V.current.useDeferredValue(M)},er.useEffect=function(M,Z){return V.current.useEffect(M,Z)},er.useId=function(){return V.current.useId()},er.useImperativeHandle=function(M,Z,fe){return V.current.useImperativeHandle(M,Z,fe)},er.useInsertionEffect=function(M,Z){return V.current.useInsertionEffect(M,Z)},er.useLayoutEffect=function(M,Z){return V.current.useLayoutEffect(M,Z)},er.useMemo=function(M,Z){return V.current.useMemo(M,Z)},er.useReducer=function(M,Z,fe){return V.current.useReducer(M,Z,fe)},er.useRef=function(M){return V.current.useRef(M)},er.useState=function(M){return V.current.useState(M)},er.useSyncExternalStore=function(M,Z,fe){return V.current.useSyncExternalStore(M,Z,fe)},er.useTransition=function(){return V.current.useTransition()},er.version="18.3.1",er}var Bj;function iu(){return Bj||(Bj=1,oy.exports=dD()),oy.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Wj;function fD(){if(Wj)return Gu;Wj=1;var e=iu(),t=Symbol.for("react.element"),r=Symbol.for("react.fragment"),n=Object.prototype.hasOwnProperty,s=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,a={key:!0,ref:!0,__self:!0,__source:!0};function l(u,d,m){var f,p={},x=null,v=null;m!==void 0&&(x=""+m),d.key!==void 0&&(x=""+d.key),d.ref!==void 0&&(v=d.ref);for(f in d)n.call(d,f)&&!a.hasOwnProperty(f)&&(p[f]=d[f]);if(u&&u.defaultProps)for(f in d=u.defaultProps,d)p[f]===void 0&&(p[f]=d[f]);return{$$typeof:t,type:u,key:x,ref:v,props:p,_owner:s.current}}return Gu.Fragment=r,Gu.jsx=l,Gu.jsxs=l,Gu}var Vj;function hD(){return Vj||(Vj=1,ay.exports=fD()),ay.exports}var i=hD(),g=iu();const kt=pa(g),mD=cD({__proto__:null,default:kt},[g]);var rh={},ly={exports:{}},Js={},cy={exports:{}},uy={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var qj;function pD(){return qj||(qj=1,(function(e){function t(H,re){var ie=H.length;H.push(re);e:for(;0<ie;){var M=ie-1>>>1,Z=H[M];if(0<s(Z,re))H[M]=re,H[ie]=Z,ie=M;else break e}}function r(H){return H.length===0?null:H[0]}function n(H){if(H.length===0)return null;var re=H[0],ie=H.pop();if(ie!==re){H[0]=ie;e:for(var M=0,Z=H.length,fe=Z>>>1;M<fe;){var ye=2*(M+1)-1,Le=H[ye],je=ye+1,Me=H[je];if(0>s(Le,ie))je<Z&&0>s(Me,Le)?(H[M]=Me,H[je]=ie,M=je):(H[M]=Le,H[ye]=ie,M=ye);else if(je<Z&&0>s(Me,ie))H[M]=Me,H[je]=ie,M=je;else break e}}return re}function s(H,re){var ie=H.sortIndex-re.sortIndex;return ie!==0?ie:H.id-re.id}if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;e.unstable_now=function(){return a.now()}}else{var l=Date,u=l.now();e.unstable_now=function(){return l.now()-u}}var d=[],m=[],f=1,p=null,x=3,v=!1,b=!1,w=!1,j=typeof setTimeout=="function"?setTimeout:null,_=typeof clearTimeout=="function"?clearTimeout:null,E=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function C(H){for(var re=r(m);re!==null;){if(re.callback===null)n(m);else if(re.startTime<=H)n(m),re.sortIndex=re.expirationTime,t(d,re);else break;re=r(m)}}function I(H){if(w=!1,C(H),!b)if(r(d)!==null)b=!0,J(A);else{var re=r(m);re!==null&&V(I,re.startTime-H)}}function A(H,re){b=!1,w&&(w=!1,_(T),T=-1),v=!0;var ie=x;try{for(C(re),p=r(d);p!==null&&(!(p.expirationTime>re)||H&&!se());){var M=p.callback;if(typeof M=="function"){p.callback=null,x=p.priorityLevel;var Z=M(p.expirationTime<=re);re=e.unstable_now(),typeof Z=="function"?p.callback=Z:p===r(d)&&n(d),C(re)}else n(d);p=r(d)}if(p!==null)var fe=!0;else{var ye=r(m);ye!==null&&V(I,ye.startTime-re),fe=!1}return fe}finally{p=null,x=ie,v=!1}}var $=!1,B=null,T=-1,K=5,Q=-1;function se(){return!(e.unstable_now()-Q<K)}function G(){if(B!==null){var H=e.unstable_now();Q=H;var re=!0;try{re=B(!0,H)}finally{re?le():($=!1,B=null)}}else $=!1}var le;if(typeof E=="function")le=function(){E(G)};else if(typeof MessageChannel<"u"){var F=new MessageChannel,Y=F.port2;F.port1.onmessage=G,le=function(){Y.postMessage(null)}}else le=function(){j(G,0)};function J(H){B=H,$||($=!0,le())}function V(H,re){T=j(function(){H(e.unstable_now())},re)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(H){H.callback=null},e.unstable_continueExecution=function(){b||v||(b=!0,J(A))},e.unstable_forceFrameRate=function(H){0>H||125<H?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):K=0<H?Math.floor(1e3/H):5},e.unstable_getCurrentPriorityLevel=function(){return x},e.unstable_getFirstCallbackNode=function(){return r(d)},e.unstable_next=function(H){switch(x){case 1:case 2:case 3:var re=3;break;default:re=x}var ie=x;x=re;try{return H()}finally{x=ie}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(H,re){switch(H){case 1:case 2:case 3:case 4:case 5:break;default:H=3}var ie=x;x=H;try{return re()}finally{x=ie}},e.unstable_scheduleCallback=function(H,re,ie){var M=e.unstable_now();switch(typeof ie=="object"&&ie!==null?(ie=ie.delay,ie=typeof ie=="number"&&0<ie?M+ie:M):ie=M,H){case 1:var Z=-1;break;case 2:Z=250;break;case 5:Z=1073741823;break;case 4:Z=1e4;break;default:Z=5e3}return Z=ie+Z,H={id:f++,callback:re,priorityLevel:H,startTime:ie,expirationTime:Z,sortIndex:-1},ie>M?(H.sortIndex=ie,t(m,H),r(d)===null&&H===r(m)&&(w?(_(T),T=-1):w=!0,V(I,ie-M))):(H.sortIndex=Z,t(d,H),b||v||(b=!0,J(A))),H},e.unstable_shouldYield=se,e.unstable_wrapCallback=function(H){var re=x;return function(){var ie=x;x=re;try{return H.apply(this,arguments)}finally{x=ie}}}})(uy)),uy}var Hj;function gD(){return Hj||(Hj=1,cy.exports=pD()),cy.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Kj;function yD(){if(Kj)return Js;Kj=1;var e=iu(),t=gD();function r(o){for(var c="https://reactjs.org/docs/error-decoder.html?invariant="+o,h=1;h<arguments.length;h++)c+="&args[]="+encodeURIComponent(arguments[h]);return"Minified React error #"+o+"; visit "+c+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var n=new Set,s={};function a(o,c){l(o,c),l(o+"Capture",c)}function l(o,c){for(s[o]=c,o=0;o<c.length;o++)n.add(c[o])}var u=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),d=Object.prototype.hasOwnProperty,m=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,f={},p={};function x(o){return d.call(p,o)?!0:d.call(f,o)?!1:m.test(o)?p[o]=!0:(f[o]=!0,!1)}function v(o,c,h,y){if(h!==null&&h.type===0)return!1;switch(typeof c){case"function":case"symbol":return!0;case"boolean":return y?!1:h!==null?!h.acceptsBooleans:(o=o.toLowerCase().slice(0,5),o!=="data-"&&o!=="aria-");default:return!1}}function b(o,c,h,y){if(c===null||typeof c>"u"||v(o,c,h,y))return!0;if(y)return!1;if(h!==null)switch(h.type){case 3:return!c;case 4:return c===!1;case 5:return isNaN(c);case 6:return isNaN(c)||1>c}return!1}function w(o,c,h,y,S,N,O){this.acceptsBooleans=c===2||c===3||c===4,this.attributeName=y,this.attributeNamespace=S,this.mustUseProperty=h,this.propertyName=o,this.type=c,this.sanitizeURL=N,this.removeEmptyString=O}var j={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(o){j[o]=new w(o,0,!1,o,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(o){var c=o[0];j[c]=new w(c,1,!1,o[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(o){j[o]=new w(o,2,!1,o.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(o){j[o]=new w(o,2,!1,o,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(o){j[o]=new w(o,3,!1,o.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(o){j[o]=new w(o,3,!0,o,null,!1,!1)}),["capture","download"].forEach(function(o){j[o]=new w(o,4,!1,o,null,!1,!1)}),["cols","rows","size","span"].forEach(function(o){j[o]=new w(o,6,!1,o,null,!1,!1)}),["rowSpan","start"].forEach(function(o){j[o]=new w(o,5,!1,o.toLowerCase(),null,!1,!1)});var _=/[\-:]([a-z])/g;function E(o){return o[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(o){var c=o.replace(_,E);j[c]=new w(c,1,!1,o,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(o){var c=o.replace(_,E);j[c]=new w(c,1,!1,o,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(o){var c=o.replace(_,E);j[c]=new w(c,1,!1,o,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(o){j[o]=new w(o,1,!1,o.toLowerCase(),null,!1,!1)}),j.xlinkHref=new w("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(o){j[o]=new w(o,1,!1,o.toLowerCase(),null,!0,!0)});function C(o,c,h,y){var S=j.hasOwnProperty(c)?j[c]:null;(S!==null?S.type!==0:y||!(2<c.length)||c[0]!=="o"&&c[0]!=="O"||c[1]!=="n"&&c[1]!=="N")&&(b(c,h,S,y)&&(h=null),y||S===null?x(c)&&(h===null?o.removeAttribute(c):o.setAttribute(c,""+h)):S.mustUseProperty?o[S.propertyName]=h===null?S.type===3?!1:"":h:(c=S.attributeName,y=S.attributeNamespace,h===null?o.removeAttribute(c):(S=S.type,h=S===3||S===4&&h===!0?"":""+h,y?o.setAttributeNS(y,c,h):o.setAttribute(c,h))))}var I=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,A=Symbol.for("react.element"),$=Symbol.for("react.portal"),B=Symbol.for("react.fragment"),T=Symbol.for("react.strict_mode"),K=Symbol.for("react.profiler"),Q=Symbol.for("react.provider"),se=Symbol.for("react.context"),G=Symbol.for("react.forward_ref"),le=Symbol.for("react.suspense"),F=Symbol.for("react.suspense_list"),Y=Symbol.for("react.memo"),J=Symbol.for("react.lazy"),V=Symbol.for("react.offscreen"),H=Symbol.iterator;function re(o){return o===null||typeof o!="object"?null:(o=H&&o[H]||o["@@iterator"],typeof o=="function"?o:null)}var ie=Object.assign,M;function Z(o){if(M===void 0)try{throw Error()}catch(h){var c=h.stack.trim().match(/\n( *(at )?)/);M=c&&c[1]||""}return`
`+M+o}var fe=!1;function ye(o,c){if(!o||fe)return"";fe=!0;var h=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(c)if(c=function(){throw Error()},Object.defineProperty(c.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(c,[])}catch(we){var y=we}Reflect.construct(o,[],c)}else{try{c.call()}catch(we){y=we}o.call(c.prototype)}else{try{throw Error()}catch(we){y=we}o()}}catch(we){if(we&&y&&typeof we.stack=="string"){for(var S=we.stack.split(`
`),N=y.stack.split(`
`),O=S.length-1,W=N.length-1;1<=O&&0<=W&&S[O]!==N[W];)W--;for(;1<=O&&0<=W;O--,W--)if(S[O]!==N[W]){if(O!==1||W!==1)do if(O--,W--,0>W||S[O]!==N[W]){var te=`
`+S[O].replace(" at new "," at ");return o.displayName&&te.includes("<anonymous>")&&(te=te.replace("<anonymous>",o.displayName)),te}while(1<=O&&0<=W);break}}}finally{fe=!1,Error.prepareStackTrace=h}return(o=o?o.displayName||o.name:"")?Z(o):""}function Le(o){switch(o.tag){case 5:return Z(o.type);case 16:return Z("Lazy");case 13:return Z("Suspense");case 19:return Z("SuspenseList");case 0:case 2:case 15:return o=ye(o.type,!1),o;case 11:return o=ye(o.type.render,!1),o;case 1:return o=ye(o.type,!0),o;default:return""}}function je(o){if(o==null)return null;if(typeof o=="function")return o.displayName||o.name||null;if(typeof o=="string")return o;switch(o){case B:return"Fragment";case $:return"Portal";case K:return"Profiler";case T:return"StrictMode";case le:return"Suspense";case F:return"SuspenseList"}if(typeof o=="object")switch(o.$$typeof){case se:return(o.displayName||"Context")+".Consumer";case Q:return(o._context.displayName||"Context")+".Provider";case G:var c=o.render;return o=o.displayName,o||(o=c.displayName||c.name||"",o=o!==""?"ForwardRef("+o+")":"ForwardRef"),o;case Y:return c=o.displayName||null,c!==null?c:je(o.type)||"Memo";case J:c=o._payload,o=o._init;try{return je(o(c))}catch{}}return null}function Me(o){var c=o.type;switch(o.tag){case 24:return"Cache";case 9:return(c.displayName||"Context")+".Consumer";case 10:return(c._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return o=c.render,o=o.displayName||o.name||"",c.displayName||(o!==""?"ForwardRef("+o+")":"ForwardRef");case 7:return"Fragment";case 5:return c;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return je(c);case 8:return c===T?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof c=="function")return c.displayName||c.name||null;if(typeof c=="string")return c}return null}function Se(o){switch(typeof o){case"boolean":case"number":case"string":case"undefined":return o;case"object":return o;default:return""}}function z(o){var c=o.type;return(o=o.nodeName)&&o.toLowerCase()==="input"&&(c==="checkbox"||c==="radio")}function ue(o){var c=z(o)?"checked":"value",h=Object.getOwnPropertyDescriptor(o.constructor.prototype,c),y=""+o[c];if(!o.hasOwnProperty(c)&&typeof h<"u"&&typeof h.get=="function"&&typeof h.set=="function"){var S=h.get,N=h.set;return Object.defineProperty(o,c,{configurable:!0,get:function(){return S.call(this)},set:function(O){y=""+O,N.call(this,O)}}),Object.defineProperty(o,c,{enumerable:h.enumerable}),{getValue:function(){return y},setValue:function(O){y=""+O},stopTracking:function(){o._valueTracker=null,delete o[c]}}}}function de(o){o._valueTracker||(o._valueTracker=ue(o))}function ee(o){if(!o)return!1;var c=o._valueTracker;if(!c)return!0;var h=c.getValue(),y="";return o&&(y=z(o)?o.checked?"true":"false":o.value),o=y,o!==h?(c.setValue(o),!0):!1}function Ye(o){if(o=o||(typeof document<"u"?document:void 0),typeof o>"u")return null;try{return o.activeElement||o.body}catch{return o.body}}function Oe(o,c){var h=c.checked;return ie({},c,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:h??o._wrapperState.initialChecked})}function rt(o,c){var h=c.defaultValue==null?"":c.defaultValue,y=c.checked!=null?c.checked:c.defaultChecked;h=Se(c.value!=null?c.value:h),o._wrapperState={initialChecked:y,initialValue:h,controlled:c.type==="checkbox"||c.type==="radio"?c.checked!=null:c.value!=null}}function Nt(o,c){c=c.checked,c!=null&&C(o,"checked",c,!1)}function vt(o,c){Nt(o,c);var h=Se(c.value),y=c.type;if(h!=null)y==="number"?(h===0&&o.value===""||o.value!=h)&&(o.value=""+h):o.value!==""+h&&(o.value=""+h);else if(y==="submit"||y==="reset"){o.removeAttribute("value");return}c.hasOwnProperty("value")?rr(o,c.type,h):c.hasOwnProperty("defaultValue")&&rr(o,c.type,Se(c.defaultValue)),c.checked==null&&c.defaultChecked!=null&&(o.defaultChecked=!!c.defaultChecked)}function ot(o,c,h){if(c.hasOwnProperty("value")||c.hasOwnProperty("defaultValue")){var y=c.type;if(!(y!=="submit"&&y!=="reset"||c.value!==void 0&&c.value!==null))return;c=""+o._wrapperState.initialValue,h||c===o.value||(o.value=c),o.defaultValue=c}h=o.name,h!==""&&(o.name=""),o.defaultChecked=!!o._wrapperState.initialChecked,h!==""&&(o.name=h)}function rr(o,c,h){(c!=="number"||Ye(o.ownerDocument)!==o)&&(h==null?o.defaultValue=""+o._wrapperState.initialValue:o.defaultValue!==""+h&&(o.defaultValue=""+h))}var U=Array.isArray;function q(o,c,h,y){if(o=o.options,c){c={};for(var S=0;S<h.length;S++)c["$"+h[S]]=!0;for(h=0;h<o.length;h++)S=c.hasOwnProperty("$"+o[h].value),o[h].selected!==S&&(o[h].selected=S),S&&y&&(o[h].defaultSelected=!0)}else{for(h=""+Se(h),c=null,S=0;S<o.length;S++){if(o[S].value===h){o[S].selected=!0,y&&(o[S].defaultSelected=!0);return}c!==null||o[S].disabled||(c=o[S])}c!==null&&(c.selected=!0)}}function ne(o,c){if(c.dangerouslySetInnerHTML!=null)throw Error(r(91));return ie({},c,{value:void 0,defaultValue:void 0,children:""+o._wrapperState.initialValue})}function Ne(o,c){var h=c.value;if(h==null){if(h=c.children,c=c.defaultValue,h!=null){if(c!=null)throw Error(r(92));if(U(h)){if(1<h.length)throw Error(r(93));h=h[0]}c=h}c==null&&(c=""),h=c}o._wrapperState={initialValue:Se(h)}}function Ie(o,c){var h=Se(c.value),y=Se(c.defaultValue);h!=null&&(h=""+h,h!==o.value&&(o.value=h),c.defaultValue==null&&o.defaultValue!==h&&(o.defaultValue=h)),y!=null&&(o.defaultValue=""+y)}function Ce(o){var c=o.textContent;c===o._wrapperState.initialValue&&c!==""&&c!==null&&(o.value=c)}function Te(o){switch(o){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function dt(o,c){return o==null||o==="http://www.w3.org/1999/xhtml"?Te(c):o==="http://www.w3.org/2000/svg"&&c==="foreignObject"?"http://www.w3.org/1999/xhtml":o}var Mt,qe=(function(o){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(c,h,y,S){MSApp.execUnsafeLocalFunction(function(){return o(c,h,y,S)})}:o})(function(o,c){if(o.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in o)o.innerHTML=c;else{for(Mt=Mt||document.createElement("div"),Mt.innerHTML="<svg>"+c.valueOf().toString()+"</svg>",c=Mt.firstChild;o.firstChild;)o.removeChild(o.firstChild);for(;c.firstChild;)o.appendChild(c.firstChild)}});function bt(o,c){if(c){var h=o.firstChild;if(h&&h===o.lastChild&&h.nodeType===3){h.nodeValue=c;return}}o.textContent=c}var jt={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Be=["Webkit","ms","Moz","O"];Object.keys(jt).forEach(function(o){Be.forEach(function(c){c=c+o.charAt(0).toUpperCase()+o.substring(1),jt[c]=jt[o]})});function He(o,c,h){return c==null||typeof c=="boolean"||c===""?"":h||typeof c!="number"||c===0||jt.hasOwnProperty(o)&&jt[o]?(""+c).trim():c+"px"}function Ze(o,c){o=o.style;for(var h in c)if(c.hasOwnProperty(h)){var y=h.indexOf("--")===0,S=He(h,c[h],y);h==="float"&&(h="cssFloat"),y?o.setProperty(h,S):o[h]=S}}var ft=ie({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function nt(o,c){if(c){if(ft[o]&&(c.children!=null||c.dangerouslySetInnerHTML!=null))throw Error(r(137,o));if(c.dangerouslySetInnerHTML!=null){if(c.children!=null)throw Error(r(60));if(typeof c.dangerouslySetInnerHTML!="object"||!("__html"in c.dangerouslySetInnerHTML))throw Error(r(61))}if(c.style!=null&&typeof c.style!="object")throw Error(r(62))}}function Kt(o,c){if(o.indexOf("-")===-1)return typeof c.is=="string";switch(o){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var dr=null;function Pr(o){return o=o.target||o.srcElement||window,o.correspondingUseElement&&(o=o.correspondingUseElement),o.nodeType===3?o.parentNode:o}var tt=null,Bt=null,qt=null;function Wt(o){if(o=Tu(o)){if(typeof tt!="function")throw Error(r(280));var c=o.stateNode;c&&(c=yf(c),tt(o.stateNode,o.type,c))}}function Qt(o){Bt?qt?qt.push(o):qt=[o]:Bt=o}function sr(){if(Bt){var o=Bt,c=qt;if(qt=Bt=null,Wt(o),c)for(o=0;o<c.length;o++)Wt(c[o])}}function Mr(o,c){return o(c)}function Zt(){}var lr=!1;function mr(o,c,h){if(lr)return o(c,h);lr=!0;try{return Mr(o,c,h)}finally{lr=!1,(Bt!==null||qt!==null)&&(Zt(),sr())}}function ir(o,c){var h=o.stateNode;if(h===null)return null;var y=yf(h);if(y===null)return null;h=y[c];e:switch(c){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(y=!y.disabled)||(o=o.type,y=!(o==="button"||o==="input"||o==="select"||o==="textarea")),o=!y;break e;default:o=!1}if(o)return null;if(h&&typeof h!="function")throw Error(r(231,c,typeof h));return h}var qn=!1;if(u)try{var Vt={};Object.defineProperty(Vt,"passive",{get:function(){qn=!0}}),window.addEventListener("test",Vt,Vt),window.removeEventListener("test",Vt,Vt)}catch{qn=!1}function ls(o,c,h,y,S,N,O,W,te){var we=Array.prototype.slice.call(arguments,3);try{c.apply(h,we)}catch(We){this.onError(We)}}var qr=!1,vr=null,cr=!1,Hr=null,Kr={onError:function(o){qr=!0,vr=o}};function Hn(o,c,h,y,S,N,O,W,te){qr=!1,vr=null,ls.apply(Kr,arguments)}function jr(o,c,h,y,S,N,O,W,te){if(Hn.apply(this,arguments),qr){if(qr){var we=vr;qr=!1,vr=null}else throw Error(r(198));cr||(cr=!0,Hr=we)}}function Ir(o){var c=o,h=o;if(o.alternate)for(;c.return;)c=c.return;else{o=c;do c=o,(c.flags&4098)!==0&&(h=c.return),o=c.return;while(o)}return c.tag===3?h:null}function In(o){if(o.tag===13){var c=o.memoizedState;if(c===null&&(o=o.alternate,o!==null&&(c=o.memoizedState)),c!==null)return c.dehydrated}return null}function Kn(o){if(Ir(o)!==o)throw Error(r(188))}function Vi(o){var c=o.alternate;if(!c){if(c=Ir(o),c===null)throw Error(r(188));return c!==o?null:o}for(var h=o,y=c;;){var S=h.return;if(S===null)break;var N=S.alternate;if(N===null){if(y=S.return,y!==null){h=y;continue}break}if(S.child===N.child){for(N=S.child;N;){if(N===h)return Kn(S),o;if(N===y)return Kn(S),c;N=N.sibling}throw Error(r(188))}if(h.return!==y.return)h=S,y=N;else{for(var O=!1,W=S.child;W;){if(W===h){O=!0,h=S,y=N;break}if(W===y){O=!0,y=S,h=N;break}W=W.sibling}if(!O){for(W=N.child;W;){if(W===h){O=!0,h=N,y=S;break}if(W===y){O=!0,y=N,h=S;break}W=W.sibling}if(!O)throw Error(r(189))}}if(h.alternate!==y)throw Error(r(190))}if(h.tag!==3)throw Error(r(188));return h.stateNode.current===h?o:c}function sn(o){return o=Vi(o),o!==null?bs(o):null}function bs(o){if(o.tag===5||o.tag===6)return o;for(o=o.child;o!==null;){var c=bs(o);if(c!==null)return c;o=o.sibling}return null}var Us=t.unstable_scheduleCallback,_r=t.unstable_cancelCallback,fn=t.unstable_shouldYield,Cr=t.unstable_requestPaint,nr=t.unstable_now,ur=t.unstable_getCurrentPriorityLevel,Gr=t.unstable_ImmediatePriority,ws=t.unstable_UserBlockingPriority,Tn=t.unstable_NormalPriority,ae=t.unstable_LowPriority,_e=t.unstable_IdlePriority,$e=null,ze=null;function Xe(o){if(ze&&typeof ze.onCommitFiberRoot=="function")try{ze.onCommitFiberRoot($e,o,void 0,(o.current.flags&128)===128)}catch{}}var Fe=Math.clz32?Math.clz32:$t,Yt=Math.log,Dt=Math.LN2;function $t(o){return o>>>=0,o===0?32:31-(Yt(o)/Dt|0)|0}var Ee=64,Je=4194304;function Jt(o){switch(o&-o){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return o&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return o}}function Xt(o,c){var h=o.pendingLanes;if(h===0)return 0;var y=0,S=o.suspendedLanes,N=o.pingedLanes,O=h&268435455;if(O!==0){var W=O&~S;W!==0?y=Jt(W):(N&=O,N!==0&&(y=Jt(N)))}else O=h&~S,O!==0?y=Jt(O):N!==0&&(y=Jt(N));if(y===0)return 0;if(c!==0&&c!==y&&(c&S)===0&&(S=y&-y,N=c&-c,S>=N||S===16&&(N&4194240)!==0))return c;if((y&4)!==0&&(y|=h&16),c=o.entangledLanes,c!==0)for(o=o.entanglements,c&=y;0<c;)h=31-Fe(c),S=1<<h,y|=o[h],c&=~S;return y}function yt(o,c){switch(o){case 1:case 2:case 4:return c+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return c+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function br(o,c){for(var h=o.suspendedLanes,y=o.pingedLanes,S=o.expirationTimes,N=o.pendingLanes;0<N;){var O=31-Fe(N),W=1<<O,te=S[O];te===-1?((W&h)===0||(W&y)!==0)&&(S[O]=yt(W,c)):te<=c&&(o.expiredLanes|=W),N&=~W}}function an(o){return o=o.pendingLanes&-1073741825,o!==0?o:o&1073741824?1073741824:0}function cs(){var o=Ee;return Ee<<=1,(Ee&4194240)===0&&(Ee=64),o}function ar(o){for(var c=[],h=0;31>h;h++)c.push(o);return c}function en(o,c,h){o.pendingLanes|=c,c!==536870912&&(o.suspendedLanes=0,o.pingedLanes=0),o=o.eventTimes,c=31-Fe(c),o[c]=h}function xr(o,c){var h=o.pendingLanes&~c;o.pendingLanes=c,o.suspendedLanes=0,o.pingedLanes=0,o.expiredLanes&=c,o.mutableReadLanes&=c,o.entangledLanes&=c,c=o.entanglements;var y=o.eventTimes;for(o=o.expirationTimes;0<h;){var S=31-Fe(h),N=1<<S;c[S]=0,y[S]=-1,o[S]=-1,h&=~N}}function qi(o,c){var h=o.entangledLanes|=c;for(o=o.entanglements;h;){var y=31-Fe(h),S=1<<y;S&c|o[y]&c&&(o[y]|=c),h&=~S}}var Ft=0;function Bs(o){return o&=-o,1<o?4<o?(o&268435455)!==0?16:536870912:4:1}var si,hn,Hi,Ki,js,ii=!1,Gn=[],tn=null,us=null,Ss=null,Fr=new Map,mn=new Map,on=[],Gi="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Ps(o,c){switch(o){case"focusin":case"focusout":tn=null;break;case"dragenter":case"dragleave":us=null;break;case"mouseover":case"mouseout":Ss=null;break;case"pointerover":case"pointerout":Fr.delete(c.pointerId);break;case"gotpointercapture":case"lostpointercapture":mn.delete(c.pointerId)}}function Os(o,c,h,y,S,N){return o===null||o.nativeEvent!==N?(o={blockedOn:c,domEventName:h,eventSystemFlags:y,nativeEvent:N,targetContainers:[S]},c!==null&&(c=Tu(c),c!==null&&hn(c)),o):(o.eventSystemFlags|=y,c=o.targetContainers,S!==null&&c.indexOf(S)===-1&&c.push(S),o)}function Yi(o,c,h,y,S){switch(c){case"focusin":return tn=Os(tn,o,c,h,y,S),!0;case"dragenter":return us=Os(us,o,c,h,y,S),!0;case"mouseover":return Ss=Os(Ss,o,c,h,y,S),!0;case"pointerover":var N=S.pointerId;return Fr.set(N,Os(Fr.get(N)||null,o,c,h,y,S)),!0;case"gotpointercapture":return N=S.pointerId,mn.set(N,Os(mn.get(N)||null,o,c,h,y,S)),!0}return!1}function wo(o){var c=ol(o.target);if(c!==null){var h=Ir(c);if(h!==null){if(c=h.tag,c===13){if(c=In(h),c!==null){o.blockedOn=c,js(o.priority,function(){Hi(h)});return}}else if(c===3&&h.stateNode.current.memoizedState.isDehydrated){o.blockedOn=h.tag===3?h.stateNode.containerInfo:null;return}}}o.blockedOn=null}function Is(o){if(o.blockedOn!==null)return!1;for(var c=o.targetContainers;0<c.length;){var h=pn(o.domEventName,o.eventSystemFlags,c[0],o.nativeEvent);if(h===null){h=o.nativeEvent;var y=new h.constructor(h.type,h);dr=y,h.target.dispatchEvent(y),dr=null}else return c=Tu(h),c!==null&&hn(c),o.blockedOn=h,!1;c.shift()}return!0}function Ra(o,c,h){Is(o)&&h.delete(c)}function il(){ii=!1,tn!==null&&Is(tn)&&(tn=null),us!==null&&Is(us)&&(us=null),Ss!==null&&Is(Ss)&&(Ss=null),Fr.forEach(Ra),mn.forEach(Ra)}function ln(o,c){o.blockedOn===c&&(o.blockedOn=null,ii||(ii=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,il)))}function Ws(o){function c(S){return ln(S,o)}if(0<Gn.length){ln(Gn[0],o);for(var h=1;h<Gn.length;h++){var y=Gn[h];y.blockedOn===o&&(y.blockedOn=null)}}for(tn!==null&&ln(tn,o),us!==null&&ln(us,o),Ss!==null&&ln(Ss,o),Fr.forEach(c),mn.forEach(c),h=0;h<on.length;h++)y=on[h],y.blockedOn===o&&(y.blockedOn=null);for(;0<on.length&&(h=on[0],h.blockedOn===null);)wo(h),h.blockedOn===null&&on.shift()}var Ts=I.ReactCurrentBatchConfig,ki=!0;function jo(o,c,h,y){var S=Ft,N=Ts.transition;Ts.transition=null;try{Ft=1,Ma(o,c,h,y)}finally{Ft=S,Ts.transition=N}}function al(o,c,h,y){var S=Ft,N=Ts.transition;Ts.transition=null;try{Ft=4,Ma(o,c,h,y)}finally{Ft=S,Ts.transition=N}}function Ma(o,c,h,y){if(ki){var S=pn(o,c,h,y);if(S===null)Yp(o,c,y,Ji,h),Ps(o,y);else if(Yi(S,o,c,h,y))y.stopPropagation();else if(Ps(o,y),c&4&&-1<Gi.indexOf(o)){for(;S!==null;){var N=Tu(S);if(N!==null&&si(N),N=pn(o,c,h,y),N===null&&Yp(o,c,y,Ji,h),N===S)break;S=N}S!==null&&y.stopPropagation()}else Yp(o,c,y,null,h)}}var Ji=null;function pn(o,c,h,y){if(Ji=null,o=Pr(y),o=ol(o),o!==null)if(c=Ir(o),c===null)o=null;else if(h=c.tag,h===13){if(o=In(c),o!==null)return o;o=null}else if(h===3){if(c.stateNode.current.memoizedState.isDehydrated)return c.tag===3?c.stateNode.containerInfo:null;o=null}else c!==o&&(o=null);return Ji=o,null}function ds(o){switch(o){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(ur()){case Gr:return 1;case ws:return 4;case Tn:case ae:return 16;case _e:return 536870912;default:return 16}default:return 16}}var wr=null,Xi=null,Yn=null;function Ni(){if(Yn)return Yn;var o,c=Xi,h=c.length,y,S="value"in wr?wr.value:wr.textContent,N=S.length;for(o=0;o<h&&c[o]===S[o];o++);var O=h-o;for(y=1;y<=O&&c[h-y]===S[N-y];y++);return Yn=S.slice(o,1<y?1-y:void 0)}function _i(o){var c=o.keyCode;return"charCode"in o?(o=o.charCode,o===0&&c===13&&(o=13)):o=c,o===10&&(o=13),32<=o||o===13?o:0}function L(){return!0}function k(){return!1}function R(o){function c(h,y,S,N,O){this._reactName=h,this._targetInst=S,this.type=y,this.nativeEvent=N,this.target=O,this.currentTarget=null;for(var W in o)o.hasOwnProperty(W)&&(h=o[W],this[W]=h?h(N):N[W]);return this.isDefaultPrevented=(N.defaultPrevented!=null?N.defaultPrevented:N.returnValue===!1)?L:k,this.isPropagationStopped=k,this}return ie(c.prototype,{preventDefault:function(){this.defaultPrevented=!0;var h=this.nativeEvent;h&&(h.preventDefault?h.preventDefault():typeof h.returnValue!="unknown"&&(h.returnValue=!1),this.isDefaultPrevented=L)},stopPropagation:function(){var h=this.nativeEvent;h&&(h.stopPropagation?h.stopPropagation():typeof h.cancelBubble!="unknown"&&(h.cancelBubble=!0),this.isPropagationStopped=L)},persist:function(){},isPersistent:L}),c}var he={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(o){return o.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},me=R(he),ve=ie({},he,{view:0,detail:0}),P=R(ve),D,X,ce,Re=ie({},ve,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:wt,button:0,buttons:0,relatedTarget:function(o){return o.relatedTarget===void 0?o.fromElement===o.srcElement?o.toElement:o.fromElement:o.relatedTarget},movementX:function(o){return"movementX"in o?o.movementX:(o!==ce&&(ce&&o.type==="mousemove"?(D=o.screenX-ce.screenX,X=o.screenY-ce.screenY):X=D=0,ce=o),D)},movementY:function(o){return"movementY"in o?o.movementY:X}}),Ae=R(Re),ge=ie({},Re,{dataTransfer:0}),be=R(ge),mt=ie({},ve,{relatedTarget:0}),It=R(mt),lt=ie({},he,{animationName:0,elapsedTime:0,pseudoElement:0}),Lt=R(lt),Ct=ie({},he,{clipboardData:function(o){return"clipboardData"in o?o.clipboardData:window.clipboardData}}),De=R(Ct),St=ie({},he,{data:0}),Ge=R(St),ct={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},zt={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},st={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Rt(o){var c=this.nativeEvent;return c.getModifierState?c.getModifierState(o):(o=st[o])?!!c[o]:!1}function wt(){return Rt}var tr=ie({},ve,{key:function(o){if(o.key){var c=ct[o.key]||o.key;if(c!=="Unidentified")return c}return o.type==="keypress"?(o=_i(o),o===13?"Enter":String.fromCharCode(o)):o.type==="keydown"||o.type==="keyup"?zt[o.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:wt,charCode:function(o){return o.type==="keypress"?_i(o):0},keyCode:function(o){return o.type==="keydown"||o.type==="keyup"?o.keyCode:0},which:function(o){return o.type==="keypress"?_i(o):o.type==="keydown"||o.type==="keyup"?o.keyCode:0}}),Yr=R(tr),gn=ie({},Re,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Vs=R(gn),ks=ie({},ve,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:wt}),Rp=R(ks),Mp=ie({},he,{propertyName:0,elapsedTime:0,pseudoElement:0}),Fp=R(Mp),eT=ie({},Re,{deltaX:function(o){return"deltaX"in o?o.deltaX:"wheelDeltaX"in o?-o.wheelDeltaX:0},deltaY:function(o){return"deltaY"in o?o.deltaY:"wheelDeltaY"in o?-o.wheelDeltaY:"wheelDelta"in o?-o.wheelDelta:0},deltaZ:0,deltaMode:0}),tT=R(eT),rT=[9,13,27,32],Lp=u&&"CompositionEvent"in window,ku=null;u&&"documentMode"in document&&(ku=document.documentMode);var nT=u&&"TextEvent"in window&&!ku,Tw=u&&(!Lp||ku&&8<ku&&11>=ku),Dw=" ",$w=!1;function Rw(o,c){switch(o){case"keyup":return rT.indexOf(c.keyCode)!==-1;case"keydown":return c.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Mw(o){return o=o.detail,typeof o=="object"&&"data"in o?o.data:null}var ec=!1;function sT(o,c){switch(o){case"compositionend":return Mw(c);case"keypress":return c.which!==32?null:($w=!0,Dw);case"textInput":return o=c.data,o===Dw&&$w?null:o;default:return null}}function iT(o,c){if(ec)return o==="compositionend"||!Lp&&Rw(o,c)?(o=Ni(),Yn=Xi=wr=null,ec=!1,o):null;switch(o){case"paste":return null;case"keypress":if(!(c.ctrlKey||c.altKey||c.metaKey)||c.ctrlKey&&c.altKey){if(c.char&&1<c.char.length)return c.char;if(c.which)return String.fromCharCode(c.which)}return null;case"compositionend":return Tw&&c.locale!=="ko"?null:c.data;default:return null}}var aT={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Fw(o){var c=o&&o.nodeName&&o.nodeName.toLowerCase();return c==="input"?!!aT[o.type]:c==="textarea"}function Lw(o,c,h,y){Qt(y),c=mf(c,"onChange"),0<c.length&&(h=new me("onChange","change",null,h,y),o.push({event:h,listeners:c}))}var Nu=null,_u=null;function oT(o){n1(o,0)}function uf(o){var c=ic(o);if(ee(c))return o}function lT(o,c){if(o==="change")return c}var zw=!1;if(u){var zp;if(u){var Up="oninput"in document;if(!Up){var Uw=document.createElement("div");Uw.setAttribute("oninput","return;"),Up=typeof Uw.oninput=="function"}zp=Up}else zp=!1;zw=zp&&(!document.documentMode||9<document.documentMode)}function Bw(){Nu&&(Nu.detachEvent("onpropertychange",Ww),_u=Nu=null)}function Ww(o){if(o.propertyName==="value"&&uf(_u)){var c=[];Lw(c,_u,o,Pr(o)),mr(oT,c)}}function cT(o,c,h){o==="focusin"?(Bw(),Nu=c,_u=h,Nu.attachEvent("onpropertychange",Ww)):o==="focusout"&&Bw()}function uT(o){if(o==="selectionchange"||o==="keyup"||o==="keydown")return uf(_u)}function dT(o,c){if(o==="click")return uf(c)}function fT(o,c){if(o==="input"||o==="change")return uf(c)}function hT(o,c){return o===c&&(o!==0||1/o===1/c)||o!==o&&c!==c}var Qi=typeof Object.is=="function"?Object.is:hT;function Cu(o,c){if(Qi(o,c))return!0;if(typeof o!="object"||o===null||typeof c!="object"||c===null)return!1;var h=Object.keys(o),y=Object.keys(c);if(h.length!==y.length)return!1;for(y=0;y<h.length;y++){var S=h[y];if(!d.call(c,S)||!Qi(o[S],c[S]))return!1}return!0}function Vw(o){for(;o&&o.firstChild;)o=o.firstChild;return o}function qw(o,c){var h=Vw(o);o=0;for(var y;h;){if(h.nodeType===3){if(y=o+h.textContent.length,o<=c&&y>=c)return{node:h,offset:c-o};o=y}e:{for(;h;){if(h.nextSibling){h=h.nextSibling;break e}h=h.parentNode}h=void 0}h=Vw(h)}}function Hw(o,c){return o&&c?o===c?!0:o&&o.nodeType===3?!1:c&&c.nodeType===3?Hw(o,c.parentNode):"contains"in o?o.contains(c):o.compareDocumentPosition?!!(o.compareDocumentPosition(c)&16):!1:!1}function Kw(){for(var o=window,c=Ye();c instanceof o.HTMLIFrameElement;){try{var h=typeof c.contentWindow.location.href=="string"}catch{h=!1}if(h)o=c.contentWindow;else break;c=Ye(o.document)}return c}function Bp(o){var c=o&&o.nodeName&&o.nodeName.toLowerCase();return c&&(c==="input"&&(o.type==="text"||o.type==="search"||o.type==="tel"||o.type==="url"||o.type==="password")||c==="textarea"||o.contentEditable==="true")}function mT(o){var c=Kw(),h=o.focusedElem,y=o.selectionRange;if(c!==h&&h&&h.ownerDocument&&Hw(h.ownerDocument.documentElement,h)){if(y!==null&&Bp(h)){if(c=y.start,o=y.end,o===void 0&&(o=c),"selectionStart"in h)h.selectionStart=c,h.selectionEnd=Math.min(o,h.value.length);else if(o=(c=h.ownerDocument||document)&&c.defaultView||window,o.getSelection){o=o.getSelection();var S=h.textContent.length,N=Math.min(y.start,S);y=y.end===void 0?N:Math.min(y.end,S),!o.extend&&N>y&&(S=y,y=N,N=S),S=qw(h,N);var O=qw(h,y);S&&O&&(o.rangeCount!==1||o.anchorNode!==S.node||o.anchorOffset!==S.offset||o.focusNode!==O.node||o.focusOffset!==O.offset)&&(c=c.createRange(),c.setStart(S.node,S.offset),o.removeAllRanges(),N>y?(o.addRange(c),o.extend(O.node,O.offset)):(c.setEnd(O.node,O.offset),o.addRange(c)))}}for(c=[],o=h;o=o.parentNode;)o.nodeType===1&&c.push({element:o,left:o.scrollLeft,top:o.scrollTop});for(typeof h.focus=="function"&&h.focus(),h=0;h<c.length;h++)o=c[h],o.element.scrollLeft=o.left,o.element.scrollTop=o.top}}var pT=u&&"documentMode"in document&&11>=document.documentMode,tc=null,Wp=null,Eu=null,Vp=!1;function Gw(o,c,h){var y=h.window===h?h.document:h.nodeType===9?h:h.ownerDocument;Vp||tc==null||tc!==Ye(y)||(y=tc,"selectionStart"in y&&Bp(y)?y={start:y.selectionStart,end:y.selectionEnd}:(y=(y.ownerDocument&&y.ownerDocument.defaultView||window).getSelection(),y={anchorNode:y.anchorNode,anchorOffset:y.anchorOffset,focusNode:y.focusNode,focusOffset:y.focusOffset}),Eu&&Cu(Eu,y)||(Eu=y,y=mf(Wp,"onSelect"),0<y.length&&(c=new me("onSelect","select",null,c,h),o.push({event:c,listeners:y}),c.target=tc)))}function df(o,c){var h={};return h[o.toLowerCase()]=c.toLowerCase(),h["Webkit"+o]="webkit"+c,h["Moz"+o]="moz"+c,h}var rc={animationend:df("Animation","AnimationEnd"),animationiteration:df("Animation","AnimationIteration"),animationstart:df("Animation","AnimationStart"),transitionend:df("Transition","TransitionEnd")},qp={},Yw={};u&&(Yw=document.createElement("div").style,"AnimationEvent"in window||(delete rc.animationend.animation,delete rc.animationiteration.animation,delete rc.animationstart.animation),"TransitionEvent"in window||delete rc.transitionend.transition);function ff(o){if(qp[o])return qp[o];if(!rc[o])return o;var c=rc[o],h;for(h in c)if(c.hasOwnProperty(h)&&h in Yw)return qp[o]=c[h];return o}var Jw=ff("animationend"),Xw=ff("animationiteration"),Qw=ff("animationstart"),Zw=ff("transitionend"),e1=new Map,t1="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function So(o,c){e1.set(o,c),a(c,[o])}for(var Hp=0;Hp<t1.length;Hp++){var Kp=t1[Hp],gT=Kp.toLowerCase(),yT=Kp[0].toUpperCase()+Kp.slice(1);So(gT,"on"+yT)}So(Jw,"onAnimationEnd"),So(Xw,"onAnimationIteration"),So(Qw,"onAnimationStart"),So("dblclick","onDoubleClick"),So("focusin","onFocus"),So("focusout","onBlur"),So(Zw,"onTransitionEnd"),l("onMouseEnter",["mouseout","mouseover"]),l("onMouseLeave",["mouseout","mouseover"]),l("onPointerEnter",["pointerout","pointerover"]),l("onPointerLeave",["pointerout","pointerover"]),a("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),a("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),a("onBeforeInput",["compositionend","keypress","textInput","paste"]),a("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),a("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),a("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Au="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),xT=new Set("cancel close invalid load scroll toggle".split(" ").concat(Au));function r1(o,c,h){var y=o.type||"unknown-event";o.currentTarget=h,jr(y,c,void 0,o),o.currentTarget=null}function n1(o,c){c=(c&4)!==0;for(var h=0;h<o.length;h++){var y=o[h],S=y.event;y=y.listeners;e:{var N=void 0;if(c)for(var O=y.length-1;0<=O;O--){var W=y[O],te=W.instance,we=W.currentTarget;if(W=W.listener,te!==N&&S.isPropagationStopped())break e;r1(S,W,we),N=te}else for(O=0;O<y.length;O++){if(W=y[O],te=W.instance,we=W.currentTarget,W=W.listener,te!==N&&S.isPropagationStopped())break e;r1(S,W,we),N=te}}}if(cr)throw o=Hr,cr=!1,Hr=null,o}function Lr(o,c){var h=c[tg];h===void 0&&(h=c[tg]=new Set);var y=o+"__bubble";h.has(y)||(s1(c,o,2,!1),h.add(y))}function Gp(o,c,h){var y=0;c&&(y|=4),s1(h,o,y,c)}var hf="_reactListening"+Math.random().toString(36).slice(2);function Pu(o){if(!o[hf]){o[hf]=!0,n.forEach(function(h){h!=="selectionchange"&&(xT.has(h)||Gp(h,!1,o),Gp(h,!0,o))});var c=o.nodeType===9?o:o.ownerDocument;c===null||c[hf]||(c[hf]=!0,Gp("selectionchange",!1,c))}}function s1(o,c,h,y){switch(ds(c)){case 1:var S=jo;break;case 4:S=al;break;default:S=Ma}h=S.bind(null,c,h,o),S=void 0,!qn||c!=="touchstart"&&c!=="touchmove"&&c!=="wheel"||(S=!0),y?S!==void 0?o.addEventListener(c,h,{capture:!0,passive:S}):o.addEventListener(c,h,!0):S!==void 0?o.addEventListener(c,h,{passive:S}):o.addEventListener(c,h,!1)}function Yp(o,c,h,y,S){var N=y;if((c&1)===0&&(c&2)===0&&y!==null)e:for(;;){if(y===null)return;var O=y.tag;if(O===3||O===4){var W=y.stateNode.containerInfo;if(W===S||W.nodeType===8&&W.parentNode===S)break;if(O===4)for(O=y.return;O!==null;){var te=O.tag;if((te===3||te===4)&&(te=O.stateNode.containerInfo,te===S||te.nodeType===8&&te.parentNode===S))return;O=O.return}for(;W!==null;){if(O=ol(W),O===null)return;if(te=O.tag,te===5||te===6){y=N=O;continue e}W=W.parentNode}}y=y.return}mr(function(){var we=N,We=Pr(h),Ve=[];e:{var Ue=e1.get(o);if(Ue!==void 0){var et=me,ut=o;switch(o){case"keypress":if(_i(h)===0)break e;case"keydown":case"keyup":et=Yr;break;case"focusin":ut="focus",et=It;break;case"focusout":ut="blur",et=It;break;case"beforeblur":case"afterblur":et=It;break;case"click":if(h.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":et=Ae;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":et=be;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":et=Rp;break;case Jw:case Xw:case Qw:et=Lt;break;case Zw:et=Fp;break;case"scroll":et=P;break;case"wheel":et=tT;break;case"copy":case"cut":case"paste":et=De;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":et=Vs}var ht=(c&4)!==0,yn=!ht&&o==="scroll",pe=ht?Ue!==null?Ue+"Capture":null:Ue;ht=[];for(var oe=we,xe;oe!==null;){xe=oe;var Ke=xe.stateNode;if(xe.tag===5&&Ke!==null&&(xe=Ke,pe!==null&&(Ke=ir(oe,pe),Ke!=null&&ht.push(Ou(oe,Ke,xe)))),yn)break;oe=oe.return}0<ht.length&&(Ue=new et(Ue,ut,null,h,We),Ve.push({event:Ue,listeners:ht}))}}if((c&7)===0){e:{if(Ue=o==="mouseover"||o==="pointerover",et=o==="mouseout"||o==="pointerout",Ue&&h!==dr&&(ut=h.relatedTarget||h.fromElement)&&(ol(ut)||ut[Fa]))break e;if((et||Ue)&&(Ue=We.window===We?We:(Ue=We.ownerDocument)?Ue.defaultView||Ue.parentWindow:window,et?(ut=h.relatedTarget||h.toElement,et=we,ut=ut?ol(ut):null,ut!==null&&(yn=Ir(ut),ut!==yn||ut.tag!==5&&ut.tag!==6)&&(ut=null)):(et=null,ut=we),et!==ut)){if(ht=Ae,Ke="onMouseLeave",pe="onMouseEnter",oe="mouse",(o==="pointerout"||o==="pointerover")&&(ht=Vs,Ke="onPointerLeave",pe="onPointerEnter",oe="pointer"),yn=et==null?Ue:ic(et),xe=ut==null?Ue:ic(ut),Ue=new ht(Ke,oe+"leave",et,h,We),Ue.target=yn,Ue.relatedTarget=xe,Ke=null,ol(We)===we&&(ht=new ht(pe,oe+"enter",ut,h,We),ht.target=xe,ht.relatedTarget=yn,Ke=ht),yn=Ke,et&&ut)t:{for(ht=et,pe=ut,oe=0,xe=ht;xe;xe=nc(xe))oe++;for(xe=0,Ke=pe;Ke;Ke=nc(Ke))xe++;for(;0<oe-xe;)ht=nc(ht),oe--;for(;0<xe-oe;)pe=nc(pe),xe--;for(;oe--;){if(ht===pe||pe!==null&&ht===pe.alternate)break t;ht=nc(ht),pe=nc(pe)}ht=null}else ht=null;et!==null&&i1(Ve,Ue,et,ht,!1),ut!==null&&yn!==null&&i1(Ve,yn,ut,ht,!0)}}e:{if(Ue=we?ic(we):window,et=Ue.nodeName&&Ue.nodeName.toLowerCase(),et==="select"||et==="input"&&Ue.type==="file")var pt=lT;else if(Fw(Ue))if(zw)pt=fT;else{pt=uT;var Et=cT}else(et=Ue.nodeName)&&et.toLowerCase()==="input"&&(Ue.type==="checkbox"||Ue.type==="radio")&&(pt=dT);if(pt&&(pt=pt(o,we))){Lw(Ve,pt,h,We);break e}Et&&Et(o,Ue,we),o==="focusout"&&(Et=Ue._wrapperState)&&Et.controlled&&Ue.type==="number"&&rr(Ue,"number",Ue.value)}switch(Et=we?ic(we):window,o){case"focusin":(Fw(Et)||Et.contentEditable==="true")&&(tc=Et,Wp=we,Eu=null);break;case"focusout":Eu=Wp=tc=null;break;case"mousedown":Vp=!0;break;case"contextmenu":case"mouseup":case"dragend":Vp=!1,Gw(Ve,h,We);break;case"selectionchange":if(pT)break;case"keydown":case"keyup":Gw(Ve,h,We)}var At;if(Lp)e:{switch(o){case"compositionstart":var Ut="onCompositionStart";break e;case"compositionend":Ut="onCompositionEnd";break e;case"compositionupdate":Ut="onCompositionUpdate";break e}Ut=void 0}else ec?Rw(o,h)&&(Ut="onCompositionEnd"):o==="keydown"&&h.keyCode===229&&(Ut="onCompositionStart");Ut&&(Tw&&h.locale!=="ko"&&(ec||Ut!=="onCompositionStart"?Ut==="onCompositionEnd"&&ec&&(At=Ni()):(wr=We,Xi="value"in wr?wr.value:wr.textContent,ec=!0)),Et=mf(we,Ut),0<Et.length&&(Ut=new Ge(Ut,o,null,h,We),Ve.push({event:Ut,listeners:Et}),At?Ut.data=At:(At=Mw(h),At!==null&&(Ut.data=At)))),(At=nT?sT(o,h):iT(o,h))&&(we=mf(we,"onBeforeInput"),0<we.length&&(We=new Ge("onBeforeInput","beforeinput",null,h,We),Ve.push({event:We,listeners:we}),We.data=At))}n1(Ve,c)})}function Ou(o,c,h){return{instance:o,listener:c,currentTarget:h}}function mf(o,c){for(var h=c+"Capture",y=[];o!==null;){var S=o,N=S.stateNode;S.tag===5&&N!==null&&(S=N,N=ir(o,h),N!=null&&y.unshift(Ou(o,N,S)),N=ir(o,c),N!=null&&y.push(Ou(o,N,S))),o=o.return}return y}function nc(o){if(o===null)return null;do o=o.return;while(o&&o.tag!==5);return o||null}function i1(o,c,h,y,S){for(var N=c._reactName,O=[];h!==null&&h!==y;){var W=h,te=W.alternate,we=W.stateNode;if(te!==null&&te===y)break;W.tag===5&&we!==null&&(W=we,S?(te=ir(h,N),te!=null&&O.unshift(Ou(h,te,W))):S||(te=ir(h,N),te!=null&&O.push(Ou(h,te,W)))),h=h.return}O.length!==0&&o.push({event:c,listeners:O})}var vT=/\r\n?/g,bT=/\u0000|\uFFFD/g;function a1(o){return(typeof o=="string"?o:""+o).replace(vT,`
`).replace(bT,"")}function pf(o,c,h){if(c=a1(c),a1(o)!==c&&h)throw Error(r(425))}function gf(){}var Jp=null,Xp=null;function Qp(o,c){return o==="textarea"||o==="noscript"||typeof c.children=="string"||typeof c.children=="number"||typeof c.dangerouslySetInnerHTML=="object"&&c.dangerouslySetInnerHTML!==null&&c.dangerouslySetInnerHTML.__html!=null}var Zp=typeof setTimeout=="function"?setTimeout:void 0,wT=typeof clearTimeout=="function"?clearTimeout:void 0,o1=typeof Promise=="function"?Promise:void 0,jT=typeof queueMicrotask=="function"?queueMicrotask:typeof o1<"u"?function(o){return o1.resolve(null).then(o).catch(ST)}:Zp;function ST(o){setTimeout(function(){throw o})}function eg(o,c){var h=c,y=0;do{var S=h.nextSibling;if(o.removeChild(h),S&&S.nodeType===8)if(h=S.data,h==="/$"){if(y===0){o.removeChild(S),Ws(c);return}y--}else h!=="$"&&h!=="$?"&&h!=="$!"||y++;h=S}while(h);Ws(c)}function ko(o){for(;o!=null;o=o.nextSibling){var c=o.nodeType;if(c===1||c===3)break;if(c===8){if(c=o.data,c==="$"||c==="$!"||c==="$?")break;if(c==="/$")return null}}return o}function l1(o){o=o.previousSibling;for(var c=0;o;){if(o.nodeType===8){var h=o.data;if(h==="$"||h==="$!"||h==="$?"){if(c===0)return o;c--}else h==="/$"&&c++}o=o.previousSibling}return null}var sc=Math.random().toString(36).slice(2),xa="__reactFiber$"+sc,Iu="__reactProps$"+sc,Fa="__reactContainer$"+sc,tg="__reactEvents$"+sc,kT="__reactListeners$"+sc,NT="__reactHandles$"+sc;function ol(o){var c=o[xa];if(c)return c;for(var h=o.parentNode;h;){if(c=h[Fa]||h[xa]){if(h=c.alternate,c.child!==null||h!==null&&h.child!==null)for(o=l1(o);o!==null;){if(h=o[xa])return h;o=l1(o)}return c}o=h,h=o.parentNode}return null}function Tu(o){return o=o[xa]||o[Fa],!o||o.tag!==5&&o.tag!==6&&o.tag!==13&&o.tag!==3?null:o}function ic(o){if(o.tag===5||o.tag===6)return o.stateNode;throw Error(r(33))}function yf(o){return o[Iu]||null}var rg=[],ac=-1;function No(o){return{current:o}}function zr(o){0>ac||(o.current=rg[ac],rg[ac]=null,ac--)}function Tr(o,c){ac++,rg[ac]=o.current,o.current=c}var _o={},Ns=No(_o),qs=No(!1),ll=_o;function oc(o,c){var h=o.type.contextTypes;if(!h)return _o;var y=o.stateNode;if(y&&y.__reactInternalMemoizedUnmaskedChildContext===c)return y.__reactInternalMemoizedMaskedChildContext;var S={},N;for(N in h)S[N]=c[N];return y&&(o=o.stateNode,o.__reactInternalMemoizedUnmaskedChildContext=c,o.__reactInternalMemoizedMaskedChildContext=S),S}function Hs(o){return o=o.childContextTypes,o!=null}function xf(){zr(qs),zr(Ns)}function c1(o,c,h){if(Ns.current!==_o)throw Error(r(168));Tr(Ns,c),Tr(qs,h)}function u1(o,c,h){var y=o.stateNode;if(c=c.childContextTypes,typeof y.getChildContext!="function")return h;y=y.getChildContext();for(var S in y)if(!(S in c))throw Error(r(108,Me(o)||"Unknown",S));return ie({},h,y)}function vf(o){return o=(o=o.stateNode)&&o.__reactInternalMemoizedMergedChildContext||_o,ll=Ns.current,Tr(Ns,o),Tr(qs,qs.current),!0}function d1(o,c,h){var y=o.stateNode;if(!y)throw Error(r(169));h?(o=u1(o,c,ll),y.__reactInternalMemoizedMergedChildContext=o,zr(qs),zr(Ns),Tr(Ns,o)):zr(qs),Tr(qs,h)}var La=null,bf=!1,ng=!1;function f1(o){La===null?La=[o]:La.push(o)}function _T(o){bf=!0,f1(o)}function Co(){if(!ng&&La!==null){ng=!0;var o=0,c=Ft;try{var h=La;for(Ft=1;o<h.length;o++){var y=h[o];do y=y(!0);while(y!==null)}La=null,bf=!1}catch(S){throw La!==null&&(La=La.slice(o+1)),Us(Gr,Co),S}finally{Ft=c,ng=!1}}return null}var lc=[],cc=0,wf=null,jf=0,Ci=[],Ei=0,cl=null,za=1,Ua="";function ul(o,c){lc[cc++]=jf,lc[cc++]=wf,wf=o,jf=c}function h1(o,c,h){Ci[Ei++]=za,Ci[Ei++]=Ua,Ci[Ei++]=cl,cl=o;var y=za;o=Ua;var S=32-Fe(y)-1;y&=~(1<<S),h+=1;var N=32-Fe(c)+S;if(30<N){var O=S-S%5;N=(y&(1<<O)-1).toString(32),y>>=O,S-=O,za=1<<32-Fe(c)+S|h<<S|y,Ua=N+o}else za=1<<N|h<<S|y,Ua=o}function sg(o){o.return!==null&&(ul(o,1),h1(o,1,0))}function ig(o){for(;o===wf;)wf=lc[--cc],lc[cc]=null,jf=lc[--cc],lc[cc]=null;for(;o===cl;)cl=Ci[--Ei],Ci[Ei]=null,Ua=Ci[--Ei],Ci[Ei]=null,za=Ci[--Ei],Ci[Ei]=null}var ai=null,oi=null,Jr=!1,Zi=null;function m1(o,c){var h=Ii(5,null,null,0);h.elementType="DELETED",h.stateNode=c,h.return=o,c=o.deletions,c===null?(o.deletions=[h],o.flags|=16):c.push(h)}function p1(o,c){switch(o.tag){case 5:var h=o.type;return c=c.nodeType!==1||h.toLowerCase()!==c.nodeName.toLowerCase()?null:c,c!==null?(o.stateNode=c,ai=o,oi=ko(c.firstChild),!0):!1;case 6:return c=o.pendingProps===""||c.nodeType!==3?null:c,c!==null?(o.stateNode=c,ai=o,oi=null,!0):!1;case 13:return c=c.nodeType!==8?null:c,c!==null?(h=cl!==null?{id:za,overflow:Ua}:null,o.memoizedState={dehydrated:c,treeContext:h,retryLane:1073741824},h=Ii(18,null,null,0),h.stateNode=c,h.return=o,o.child=h,ai=o,oi=null,!0):!1;default:return!1}}function ag(o){return(o.mode&1)!==0&&(o.flags&128)===0}function og(o){if(Jr){var c=oi;if(c){var h=c;if(!p1(o,c)){if(ag(o))throw Error(r(418));c=ko(h.nextSibling);var y=ai;c&&p1(o,c)?m1(y,h):(o.flags=o.flags&-4097|2,Jr=!1,ai=o)}}else{if(ag(o))throw Error(r(418));o.flags=o.flags&-4097|2,Jr=!1,ai=o}}}function g1(o){for(o=o.return;o!==null&&o.tag!==5&&o.tag!==3&&o.tag!==13;)o=o.return;ai=o}function Sf(o){if(o!==ai)return!1;if(!Jr)return g1(o),Jr=!0,!1;var c;if((c=o.tag!==3)&&!(c=o.tag!==5)&&(c=o.type,c=c!=="head"&&c!=="body"&&!Qp(o.type,o.memoizedProps)),c&&(c=oi)){if(ag(o))throw y1(),Error(r(418));for(;c;)m1(o,c),c=ko(c.nextSibling)}if(g1(o),o.tag===13){if(o=o.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(r(317));e:{for(o=o.nextSibling,c=0;o;){if(o.nodeType===8){var h=o.data;if(h==="/$"){if(c===0){oi=ko(o.nextSibling);break e}c--}else h!=="$"&&h!=="$!"&&h!=="$?"||c++}o=o.nextSibling}oi=null}}else oi=ai?ko(o.stateNode.nextSibling):null;return!0}function y1(){for(var o=oi;o;)o=ko(o.nextSibling)}function uc(){oi=ai=null,Jr=!1}function lg(o){Zi===null?Zi=[o]:Zi.push(o)}var CT=I.ReactCurrentBatchConfig;function Du(o,c,h){if(o=h.ref,o!==null&&typeof o!="function"&&typeof o!="object"){if(h._owner){if(h=h._owner,h){if(h.tag!==1)throw Error(r(309));var y=h.stateNode}if(!y)throw Error(r(147,o));var S=y,N=""+o;return c!==null&&c.ref!==null&&typeof c.ref=="function"&&c.ref._stringRef===N?c.ref:(c=function(O){var W=S.refs;O===null?delete W[N]:W[N]=O},c._stringRef=N,c)}if(typeof o!="string")throw Error(r(284));if(!h._owner)throw Error(r(290,o))}return o}function kf(o,c){throw o=Object.prototype.toString.call(c),Error(r(31,o==="[object Object]"?"object with keys {"+Object.keys(c).join(", ")+"}":o))}function x1(o){var c=o._init;return c(o._payload)}function v1(o){function c(pe,oe){if(o){var xe=pe.deletions;xe===null?(pe.deletions=[oe],pe.flags|=16):xe.push(oe)}}function h(pe,oe){if(!o)return null;for(;oe!==null;)c(pe,oe),oe=oe.sibling;return null}function y(pe,oe){for(pe=new Map;oe!==null;)oe.key!==null?pe.set(oe.key,oe):pe.set(oe.index,oe),oe=oe.sibling;return pe}function S(pe,oe){return pe=$o(pe,oe),pe.index=0,pe.sibling=null,pe}function N(pe,oe,xe){return pe.index=xe,o?(xe=pe.alternate,xe!==null?(xe=xe.index,xe<oe?(pe.flags|=2,oe):xe):(pe.flags|=2,oe)):(pe.flags|=1048576,oe)}function O(pe){return o&&pe.alternate===null&&(pe.flags|=2),pe}function W(pe,oe,xe,Ke){return oe===null||oe.tag!==6?(oe=Zg(xe,pe.mode,Ke),oe.return=pe,oe):(oe=S(oe,xe),oe.return=pe,oe)}function te(pe,oe,xe,Ke){var pt=xe.type;return pt===B?We(pe,oe,xe.props.children,Ke,xe.key):oe!==null&&(oe.elementType===pt||typeof pt=="object"&&pt!==null&&pt.$$typeof===J&&x1(pt)===oe.type)?(Ke=S(oe,xe.props),Ke.ref=Du(pe,oe,xe),Ke.return=pe,Ke):(Ke=Gf(xe.type,xe.key,xe.props,null,pe.mode,Ke),Ke.ref=Du(pe,oe,xe),Ke.return=pe,Ke)}function we(pe,oe,xe,Ke){return oe===null||oe.tag!==4||oe.stateNode.containerInfo!==xe.containerInfo||oe.stateNode.implementation!==xe.implementation?(oe=ey(xe,pe.mode,Ke),oe.return=pe,oe):(oe=S(oe,xe.children||[]),oe.return=pe,oe)}function We(pe,oe,xe,Ke,pt){return oe===null||oe.tag!==7?(oe=xl(xe,pe.mode,Ke,pt),oe.return=pe,oe):(oe=S(oe,xe),oe.return=pe,oe)}function Ve(pe,oe,xe){if(typeof oe=="string"&&oe!==""||typeof oe=="number")return oe=Zg(""+oe,pe.mode,xe),oe.return=pe,oe;if(typeof oe=="object"&&oe!==null){switch(oe.$$typeof){case A:return xe=Gf(oe.type,oe.key,oe.props,null,pe.mode,xe),xe.ref=Du(pe,null,oe),xe.return=pe,xe;case $:return oe=ey(oe,pe.mode,xe),oe.return=pe,oe;case J:var Ke=oe._init;return Ve(pe,Ke(oe._payload),xe)}if(U(oe)||re(oe))return oe=xl(oe,pe.mode,xe,null),oe.return=pe,oe;kf(pe,oe)}return null}function Ue(pe,oe,xe,Ke){var pt=oe!==null?oe.key:null;if(typeof xe=="string"&&xe!==""||typeof xe=="number")return pt!==null?null:W(pe,oe,""+xe,Ke);if(typeof xe=="object"&&xe!==null){switch(xe.$$typeof){case A:return xe.key===pt?te(pe,oe,xe,Ke):null;case $:return xe.key===pt?we(pe,oe,xe,Ke):null;case J:return pt=xe._init,Ue(pe,oe,pt(xe._payload),Ke)}if(U(xe)||re(xe))return pt!==null?null:We(pe,oe,xe,Ke,null);kf(pe,xe)}return null}function et(pe,oe,xe,Ke,pt){if(typeof Ke=="string"&&Ke!==""||typeof Ke=="number")return pe=pe.get(xe)||null,W(oe,pe,""+Ke,pt);if(typeof Ke=="object"&&Ke!==null){switch(Ke.$$typeof){case A:return pe=pe.get(Ke.key===null?xe:Ke.key)||null,te(oe,pe,Ke,pt);case $:return pe=pe.get(Ke.key===null?xe:Ke.key)||null,we(oe,pe,Ke,pt);case J:var Et=Ke._init;return et(pe,oe,xe,Et(Ke._payload),pt)}if(U(Ke)||re(Ke))return pe=pe.get(xe)||null,We(oe,pe,Ke,pt,null);kf(oe,Ke)}return null}function ut(pe,oe,xe,Ke){for(var pt=null,Et=null,At=oe,Ut=oe=0,Qn=null;At!==null&&Ut<xe.length;Ut++){At.index>Ut?(Qn=At,At=null):Qn=At.sibling;var pr=Ue(pe,At,xe[Ut],Ke);if(pr===null){At===null&&(At=Qn);break}o&&At&&pr.alternate===null&&c(pe,At),oe=N(pr,oe,Ut),Et===null?pt=pr:Et.sibling=pr,Et=pr,At=Qn}if(Ut===xe.length)return h(pe,At),Jr&&ul(pe,Ut),pt;if(At===null){for(;Ut<xe.length;Ut++)At=Ve(pe,xe[Ut],Ke),At!==null&&(oe=N(At,oe,Ut),Et===null?pt=At:Et.sibling=At,Et=At);return Jr&&ul(pe,Ut),pt}for(At=y(pe,At);Ut<xe.length;Ut++)Qn=et(At,pe,Ut,xe[Ut],Ke),Qn!==null&&(o&&Qn.alternate!==null&&At.delete(Qn.key===null?Ut:Qn.key),oe=N(Qn,oe,Ut),Et===null?pt=Qn:Et.sibling=Qn,Et=Qn);return o&&At.forEach(function(Ro){return c(pe,Ro)}),Jr&&ul(pe,Ut),pt}function ht(pe,oe,xe,Ke){var pt=re(xe);if(typeof pt!="function")throw Error(r(150));if(xe=pt.call(xe),xe==null)throw Error(r(151));for(var Et=pt=null,At=oe,Ut=oe=0,Qn=null,pr=xe.next();At!==null&&!pr.done;Ut++,pr=xe.next()){At.index>Ut?(Qn=At,At=null):Qn=At.sibling;var Ro=Ue(pe,At,pr.value,Ke);if(Ro===null){At===null&&(At=Qn);break}o&&At&&Ro.alternate===null&&c(pe,At),oe=N(Ro,oe,Ut),Et===null?pt=Ro:Et.sibling=Ro,Et=Ro,At=Qn}if(pr.done)return h(pe,At),Jr&&ul(pe,Ut),pt;if(At===null){for(;!pr.done;Ut++,pr=xe.next())pr=Ve(pe,pr.value,Ke),pr!==null&&(oe=N(pr,oe,Ut),Et===null?pt=pr:Et.sibling=pr,Et=pr);return Jr&&ul(pe,Ut),pt}for(At=y(pe,At);!pr.done;Ut++,pr=xe.next())pr=et(At,pe,Ut,pr.value,Ke),pr!==null&&(o&&pr.alternate!==null&&At.delete(pr.key===null?Ut:pr.key),oe=N(pr,oe,Ut),Et===null?pt=pr:Et.sibling=pr,Et=pr);return o&&At.forEach(function(aD){return c(pe,aD)}),Jr&&ul(pe,Ut),pt}function yn(pe,oe,xe,Ke){if(typeof xe=="object"&&xe!==null&&xe.type===B&&xe.key===null&&(xe=xe.props.children),typeof xe=="object"&&xe!==null){switch(xe.$$typeof){case A:e:{for(var pt=xe.key,Et=oe;Et!==null;){if(Et.key===pt){if(pt=xe.type,pt===B){if(Et.tag===7){h(pe,Et.sibling),oe=S(Et,xe.props.children),oe.return=pe,pe=oe;break e}}else if(Et.elementType===pt||typeof pt=="object"&&pt!==null&&pt.$$typeof===J&&x1(pt)===Et.type){h(pe,Et.sibling),oe=S(Et,xe.props),oe.ref=Du(pe,Et,xe),oe.return=pe,pe=oe;break e}h(pe,Et);break}else c(pe,Et);Et=Et.sibling}xe.type===B?(oe=xl(xe.props.children,pe.mode,Ke,xe.key),oe.return=pe,pe=oe):(Ke=Gf(xe.type,xe.key,xe.props,null,pe.mode,Ke),Ke.ref=Du(pe,oe,xe),Ke.return=pe,pe=Ke)}return O(pe);case $:e:{for(Et=xe.key;oe!==null;){if(oe.key===Et)if(oe.tag===4&&oe.stateNode.containerInfo===xe.containerInfo&&oe.stateNode.implementation===xe.implementation){h(pe,oe.sibling),oe=S(oe,xe.children||[]),oe.return=pe,pe=oe;break e}else{h(pe,oe);break}else c(pe,oe);oe=oe.sibling}oe=ey(xe,pe.mode,Ke),oe.return=pe,pe=oe}return O(pe);case J:return Et=xe._init,yn(pe,oe,Et(xe._payload),Ke)}if(U(xe))return ut(pe,oe,xe,Ke);if(re(xe))return ht(pe,oe,xe,Ke);kf(pe,xe)}return typeof xe=="string"&&xe!==""||typeof xe=="number"?(xe=""+xe,oe!==null&&oe.tag===6?(h(pe,oe.sibling),oe=S(oe,xe),oe.return=pe,pe=oe):(h(pe,oe),oe=Zg(xe,pe.mode,Ke),oe.return=pe,pe=oe),O(pe)):h(pe,oe)}return yn}var dc=v1(!0),b1=v1(!1),Nf=No(null),_f=null,fc=null,cg=null;function ug(){cg=fc=_f=null}function dg(o){var c=Nf.current;zr(Nf),o._currentValue=c}function fg(o,c,h){for(;o!==null;){var y=o.alternate;if((o.childLanes&c)!==c?(o.childLanes|=c,y!==null&&(y.childLanes|=c)):y!==null&&(y.childLanes&c)!==c&&(y.childLanes|=c),o===h)break;o=o.return}}function hc(o,c){_f=o,cg=fc=null,o=o.dependencies,o!==null&&o.firstContext!==null&&((o.lanes&c)!==0&&(Ks=!0),o.firstContext=null)}function Ai(o){var c=o._currentValue;if(cg!==o)if(o={context:o,memoizedValue:c,next:null},fc===null){if(_f===null)throw Error(r(308));fc=o,_f.dependencies={lanes:0,firstContext:o}}else fc=fc.next=o;return c}var dl=null;function hg(o){dl===null?dl=[o]:dl.push(o)}function w1(o,c,h,y){var S=c.interleaved;return S===null?(h.next=h,hg(c)):(h.next=S.next,S.next=h),c.interleaved=h,Ba(o,y)}function Ba(o,c){o.lanes|=c;var h=o.alternate;for(h!==null&&(h.lanes|=c),h=o,o=o.return;o!==null;)o.childLanes|=c,h=o.alternate,h!==null&&(h.childLanes|=c),h=o,o=o.return;return h.tag===3?h.stateNode:null}var Eo=!1;function mg(o){o.updateQueue={baseState:o.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function j1(o,c){o=o.updateQueue,c.updateQueue===o&&(c.updateQueue={baseState:o.baseState,firstBaseUpdate:o.firstBaseUpdate,lastBaseUpdate:o.lastBaseUpdate,shared:o.shared,effects:o.effects})}function Wa(o,c){return{eventTime:o,lane:c,tag:0,payload:null,callback:null,next:null}}function Ao(o,c,h){var y=o.updateQueue;if(y===null)return null;if(y=y.shared,(fr&2)!==0){var S=y.pending;return S===null?c.next=c:(c.next=S.next,S.next=c),y.pending=c,Ba(o,h)}return S=y.interleaved,S===null?(c.next=c,hg(y)):(c.next=S.next,S.next=c),y.interleaved=c,Ba(o,h)}function Cf(o,c,h){if(c=c.updateQueue,c!==null&&(c=c.shared,(h&4194240)!==0)){var y=c.lanes;y&=o.pendingLanes,h|=y,c.lanes=h,qi(o,h)}}function S1(o,c){var h=o.updateQueue,y=o.alternate;if(y!==null&&(y=y.updateQueue,h===y)){var S=null,N=null;if(h=h.firstBaseUpdate,h!==null){do{var O={eventTime:h.eventTime,lane:h.lane,tag:h.tag,payload:h.payload,callback:h.callback,next:null};N===null?S=N=O:N=N.next=O,h=h.next}while(h!==null);N===null?S=N=c:N=N.next=c}else S=N=c;h={baseState:y.baseState,firstBaseUpdate:S,lastBaseUpdate:N,shared:y.shared,effects:y.effects},o.updateQueue=h;return}o=h.lastBaseUpdate,o===null?h.firstBaseUpdate=c:o.next=c,h.lastBaseUpdate=c}function Ef(o,c,h,y){var S=o.updateQueue;Eo=!1;var N=S.firstBaseUpdate,O=S.lastBaseUpdate,W=S.shared.pending;if(W!==null){S.shared.pending=null;var te=W,we=te.next;te.next=null,O===null?N=we:O.next=we,O=te;var We=o.alternate;We!==null&&(We=We.updateQueue,W=We.lastBaseUpdate,W!==O&&(W===null?We.firstBaseUpdate=we:W.next=we,We.lastBaseUpdate=te))}if(N!==null){var Ve=S.baseState;O=0,We=we=te=null,W=N;do{var Ue=W.lane,et=W.eventTime;if((y&Ue)===Ue){We!==null&&(We=We.next={eventTime:et,lane:0,tag:W.tag,payload:W.payload,callback:W.callback,next:null});e:{var ut=o,ht=W;switch(Ue=c,et=h,ht.tag){case 1:if(ut=ht.payload,typeof ut=="function"){Ve=ut.call(et,Ve,Ue);break e}Ve=ut;break e;case 3:ut.flags=ut.flags&-65537|128;case 0:if(ut=ht.payload,Ue=typeof ut=="function"?ut.call(et,Ve,Ue):ut,Ue==null)break e;Ve=ie({},Ve,Ue);break e;case 2:Eo=!0}}W.callback!==null&&W.lane!==0&&(o.flags|=64,Ue=S.effects,Ue===null?S.effects=[W]:Ue.push(W))}else et={eventTime:et,lane:Ue,tag:W.tag,payload:W.payload,callback:W.callback,next:null},We===null?(we=We=et,te=Ve):We=We.next=et,O|=Ue;if(W=W.next,W===null){if(W=S.shared.pending,W===null)break;Ue=W,W=Ue.next,Ue.next=null,S.lastBaseUpdate=Ue,S.shared.pending=null}}while(!0);if(We===null&&(te=Ve),S.baseState=te,S.firstBaseUpdate=we,S.lastBaseUpdate=We,c=S.shared.interleaved,c!==null){S=c;do O|=S.lane,S=S.next;while(S!==c)}else N===null&&(S.shared.lanes=0);ml|=O,o.lanes=O,o.memoizedState=Ve}}function k1(o,c,h){if(o=c.effects,c.effects=null,o!==null)for(c=0;c<o.length;c++){var y=o[c],S=y.callback;if(S!==null){if(y.callback=null,y=h,typeof S!="function")throw Error(r(191,S));S.call(y)}}}var $u={},va=No($u),Ru=No($u),Mu=No($u);function fl(o){if(o===$u)throw Error(r(174));return o}function pg(o,c){switch(Tr(Mu,c),Tr(Ru,o),Tr(va,$u),o=c.nodeType,o){case 9:case 11:c=(c=c.documentElement)?c.namespaceURI:dt(null,"");break;default:o=o===8?c.parentNode:c,c=o.namespaceURI||null,o=o.tagName,c=dt(c,o)}zr(va),Tr(va,c)}function mc(){zr(va),zr(Ru),zr(Mu)}function N1(o){fl(Mu.current);var c=fl(va.current),h=dt(c,o.type);c!==h&&(Tr(Ru,o),Tr(va,h))}function gg(o){Ru.current===o&&(zr(va),zr(Ru))}var rn=No(0);function Af(o){for(var c=o;c!==null;){if(c.tag===13){var h=c.memoizedState;if(h!==null&&(h=h.dehydrated,h===null||h.data==="$?"||h.data==="$!"))return c}else if(c.tag===19&&c.memoizedProps.revealOrder!==void 0){if((c.flags&128)!==0)return c}else if(c.child!==null){c.child.return=c,c=c.child;continue}if(c===o)break;for(;c.sibling===null;){if(c.return===null||c.return===o)return null;c=c.return}c.sibling.return=c.return,c=c.sibling}return null}var yg=[];function xg(){for(var o=0;o<yg.length;o++)yg[o]._workInProgressVersionPrimary=null;yg.length=0}var Pf=I.ReactCurrentDispatcher,vg=I.ReactCurrentBatchConfig,hl=0,nn=null,Dn=null,Jn=null,Of=!1,Fu=!1,Lu=0,ET=0;function _s(){throw Error(r(321))}function bg(o,c){if(c===null)return!1;for(var h=0;h<c.length&&h<o.length;h++)if(!Qi(o[h],c[h]))return!1;return!0}function wg(o,c,h,y,S,N){if(hl=N,nn=c,c.memoizedState=null,c.updateQueue=null,c.lanes=0,Pf.current=o===null||o.memoizedState===null?IT:TT,o=h(y,S),Fu){N=0;do{if(Fu=!1,Lu=0,25<=N)throw Error(r(301));N+=1,Jn=Dn=null,c.updateQueue=null,Pf.current=DT,o=h(y,S)}while(Fu)}if(Pf.current=Df,c=Dn!==null&&Dn.next!==null,hl=0,Jn=Dn=nn=null,Of=!1,c)throw Error(r(300));return o}function jg(){var o=Lu!==0;return Lu=0,o}function ba(){var o={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Jn===null?nn.memoizedState=Jn=o:Jn=Jn.next=o,Jn}function Pi(){if(Dn===null){var o=nn.alternate;o=o!==null?o.memoizedState:null}else o=Dn.next;var c=Jn===null?nn.memoizedState:Jn.next;if(c!==null)Jn=c,Dn=o;else{if(o===null)throw Error(r(310));Dn=o,o={memoizedState:Dn.memoizedState,baseState:Dn.baseState,baseQueue:Dn.baseQueue,queue:Dn.queue,next:null},Jn===null?nn.memoizedState=Jn=o:Jn=Jn.next=o}return Jn}function zu(o,c){return typeof c=="function"?c(o):c}function Sg(o){var c=Pi(),h=c.queue;if(h===null)throw Error(r(311));h.lastRenderedReducer=o;var y=Dn,S=y.baseQueue,N=h.pending;if(N!==null){if(S!==null){var O=S.next;S.next=N.next,N.next=O}y.baseQueue=S=N,h.pending=null}if(S!==null){N=S.next,y=y.baseState;var W=O=null,te=null,we=N;do{var We=we.lane;if((hl&We)===We)te!==null&&(te=te.next={lane:0,action:we.action,hasEagerState:we.hasEagerState,eagerState:we.eagerState,next:null}),y=we.hasEagerState?we.eagerState:o(y,we.action);else{var Ve={lane:We,action:we.action,hasEagerState:we.hasEagerState,eagerState:we.eagerState,next:null};te===null?(W=te=Ve,O=y):te=te.next=Ve,nn.lanes|=We,ml|=We}we=we.next}while(we!==null&&we!==N);te===null?O=y:te.next=W,Qi(y,c.memoizedState)||(Ks=!0),c.memoizedState=y,c.baseState=O,c.baseQueue=te,h.lastRenderedState=y}if(o=h.interleaved,o!==null){S=o;do N=S.lane,nn.lanes|=N,ml|=N,S=S.next;while(S!==o)}else S===null&&(h.lanes=0);return[c.memoizedState,h.dispatch]}function kg(o){var c=Pi(),h=c.queue;if(h===null)throw Error(r(311));h.lastRenderedReducer=o;var y=h.dispatch,S=h.pending,N=c.memoizedState;if(S!==null){h.pending=null;var O=S=S.next;do N=o(N,O.action),O=O.next;while(O!==S);Qi(N,c.memoizedState)||(Ks=!0),c.memoizedState=N,c.baseQueue===null&&(c.baseState=N),h.lastRenderedState=N}return[N,y]}function _1(){}function C1(o,c){var h=nn,y=Pi(),S=c(),N=!Qi(y.memoizedState,S);if(N&&(y.memoizedState=S,Ks=!0),y=y.queue,Ng(P1.bind(null,h,y,o),[o]),y.getSnapshot!==c||N||Jn!==null&&Jn.memoizedState.tag&1){if(h.flags|=2048,Uu(9,A1.bind(null,h,y,S,c),void 0,null),Xn===null)throw Error(r(349));(hl&30)!==0||E1(h,c,S)}return S}function E1(o,c,h){o.flags|=16384,o={getSnapshot:c,value:h},c=nn.updateQueue,c===null?(c={lastEffect:null,stores:null},nn.updateQueue=c,c.stores=[o]):(h=c.stores,h===null?c.stores=[o]:h.push(o))}function A1(o,c,h,y){c.value=h,c.getSnapshot=y,O1(c)&&I1(o)}function P1(o,c,h){return h(function(){O1(c)&&I1(o)})}function O1(o){var c=o.getSnapshot;o=o.value;try{var h=c();return!Qi(o,h)}catch{return!0}}function I1(o){var c=Ba(o,1);c!==null&&na(c,o,1,-1)}function T1(o){var c=ba();return typeof o=="function"&&(o=o()),c.memoizedState=c.baseState=o,o={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:zu,lastRenderedState:o},c.queue=o,o=o.dispatch=OT.bind(null,nn,o),[c.memoizedState,o]}function Uu(o,c,h,y){return o={tag:o,create:c,destroy:h,deps:y,next:null},c=nn.updateQueue,c===null?(c={lastEffect:null,stores:null},nn.updateQueue=c,c.lastEffect=o.next=o):(h=c.lastEffect,h===null?c.lastEffect=o.next=o:(y=h.next,h.next=o,o.next=y,c.lastEffect=o)),o}function D1(){return Pi().memoizedState}function If(o,c,h,y){var S=ba();nn.flags|=o,S.memoizedState=Uu(1|c,h,void 0,y===void 0?null:y)}function Tf(o,c,h,y){var S=Pi();y=y===void 0?null:y;var N=void 0;if(Dn!==null){var O=Dn.memoizedState;if(N=O.destroy,y!==null&&bg(y,O.deps)){S.memoizedState=Uu(c,h,N,y);return}}nn.flags|=o,S.memoizedState=Uu(1|c,h,N,y)}function $1(o,c){return If(8390656,8,o,c)}function Ng(o,c){return Tf(2048,8,o,c)}function R1(o,c){return Tf(4,2,o,c)}function M1(o,c){return Tf(4,4,o,c)}function F1(o,c){if(typeof c=="function")return o=o(),c(o),function(){c(null)};if(c!=null)return o=o(),c.current=o,function(){c.current=null}}function L1(o,c,h){return h=h!=null?h.concat([o]):null,Tf(4,4,F1.bind(null,c,o),h)}function _g(){}function z1(o,c){var h=Pi();c=c===void 0?null:c;var y=h.memoizedState;return y!==null&&c!==null&&bg(c,y[1])?y[0]:(h.memoizedState=[o,c],o)}function U1(o,c){var h=Pi();c=c===void 0?null:c;var y=h.memoizedState;return y!==null&&c!==null&&bg(c,y[1])?y[0]:(o=o(),h.memoizedState=[o,c],o)}function B1(o,c,h){return(hl&21)===0?(o.baseState&&(o.baseState=!1,Ks=!0),o.memoizedState=h):(Qi(h,c)||(h=cs(),nn.lanes|=h,ml|=h,o.baseState=!0),c)}function AT(o,c){var h=Ft;Ft=h!==0&&4>h?h:4,o(!0);var y=vg.transition;vg.transition={};try{o(!1),c()}finally{Ft=h,vg.transition=y}}function W1(){return Pi().memoizedState}function PT(o,c,h){var y=To(o);if(h={lane:y,action:h,hasEagerState:!1,eagerState:null,next:null},V1(o))q1(c,h);else if(h=w1(o,c,h,y),h!==null){var S=$s();na(h,o,y,S),H1(h,c,y)}}function OT(o,c,h){var y=To(o),S={lane:y,action:h,hasEagerState:!1,eagerState:null,next:null};if(V1(o))q1(c,S);else{var N=o.alternate;if(o.lanes===0&&(N===null||N.lanes===0)&&(N=c.lastRenderedReducer,N!==null))try{var O=c.lastRenderedState,W=N(O,h);if(S.hasEagerState=!0,S.eagerState=W,Qi(W,O)){var te=c.interleaved;te===null?(S.next=S,hg(c)):(S.next=te.next,te.next=S),c.interleaved=S;return}}catch{}finally{}h=w1(o,c,S,y),h!==null&&(S=$s(),na(h,o,y,S),H1(h,c,y))}}function V1(o){var c=o.alternate;return o===nn||c!==null&&c===nn}function q1(o,c){Fu=Of=!0;var h=o.pending;h===null?c.next=c:(c.next=h.next,h.next=c),o.pending=c}function H1(o,c,h){if((h&4194240)!==0){var y=c.lanes;y&=o.pendingLanes,h|=y,c.lanes=h,qi(o,h)}}var Df={readContext:Ai,useCallback:_s,useContext:_s,useEffect:_s,useImperativeHandle:_s,useInsertionEffect:_s,useLayoutEffect:_s,useMemo:_s,useReducer:_s,useRef:_s,useState:_s,useDebugValue:_s,useDeferredValue:_s,useTransition:_s,useMutableSource:_s,useSyncExternalStore:_s,useId:_s,unstable_isNewReconciler:!1},IT={readContext:Ai,useCallback:function(o,c){return ba().memoizedState=[o,c===void 0?null:c],o},useContext:Ai,useEffect:$1,useImperativeHandle:function(o,c,h){return h=h!=null?h.concat([o]):null,If(4194308,4,F1.bind(null,c,o),h)},useLayoutEffect:function(o,c){return If(4194308,4,o,c)},useInsertionEffect:function(o,c){return If(4,2,o,c)},useMemo:function(o,c){var h=ba();return c=c===void 0?null:c,o=o(),h.memoizedState=[o,c],o},useReducer:function(o,c,h){var y=ba();return c=h!==void 0?h(c):c,y.memoizedState=y.baseState=c,o={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:o,lastRenderedState:c},y.queue=o,o=o.dispatch=PT.bind(null,nn,o),[y.memoizedState,o]},useRef:function(o){var c=ba();return o={current:o},c.memoizedState=o},useState:T1,useDebugValue:_g,useDeferredValue:function(o){return ba().memoizedState=o},useTransition:function(){var o=T1(!1),c=o[0];return o=AT.bind(null,o[1]),ba().memoizedState=o,[c,o]},useMutableSource:function(){},useSyncExternalStore:function(o,c,h){var y=nn,S=ba();if(Jr){if(h===void 0)throw Error(r(407));h=h()}else{if(h=c(),Xn===null)throw Error(r(349));(hl&30)!==0||E1(y,c,h)}S.memoizedState=h;var N={value:h,getSnapshot:c};return S.queue=N,$1(P1.bind(null,y,N,o),[o]),y.flags|=2048,Uu(9,A1.bind(null,y,N,h,c),void 0,null),h},useId:function(){var o=ba(),c=Xn.identifierPrefix;if(Jr){var h=Ua,y=za;h=(y&~(1<<32-Fe(y)-1)).toString(32)+h,c=":"+c+"R"+h,h=Lu++,0<h&&(c+="H"+h.toString(32)),c+=":"}else h=ET++,c=":"+c+"r"+h.toString(32)+":";return o.memoizedState=c},unstable_isNewReconciler:!1},TT={readContext:Ai,useCallback:z1,useContext:Ai,useEffect:Ng,useImperativeHandle:L1,useInsertionEffect:R1,useLayoutEffect:M1,useMemo:U1,useReducer:Sg,useRef:D1,useState:function(){return Sg(zu)},useDebugValue:_g,useDeferredValue:function(o){var c=Pi();return B1(c,Dn.memoizedState,o)},useTransition:function(){var o=Sg(zu)[0],c=Pi().memoizedState;return[o,c]},useMutableSource:_1,useSyncExternalStore:C1,useId:W1,unstable_isNewReconciler:!1},DT={readContext:Ai,useCallback:z1,useContext:Ai,useEffect:Ng,useImperativeHandle:L1,useInsertionEffect:R1,useLayoutEffect:M1,useMemo:U1,useReducer:kg,useRef:D1,useState:function(){return kg(zu)},useDebugValue:_g,useDeferredValue:function(o){var c=Pi();return Dn===null?c.memoizedState=o:B1(c,Dn.memoizedState,o)},useTransition:function(){var o=kg(zu)[0],c=Pi().memoizedState;return[o,c]},useMutableSource:_1,useSyncExternalStore:C1,useId:W1,unstable_isNewReconciler:!1};function ea(o,c){if(o&&o.defaultProps){c=ie({},c),o=o.defaultProps;for(var h in o)c[h]===void 0&&(c[h]=o[h]);return c}return c}function Cg(o,c,h,y){c=o.memoizedState,h=h(y,c),h=h==null?c:ie({},c,h),o.memoizedState=h,o.lanes===0&&(o.updateQueue.baseState=h)}var $f={isMounted:function(o){return(o=o._reactInternals)?Ir(o)===o:!1},enqueueSetState:function(o,c,h){o=o._reactInternals;var y=$s(),S=To(o),N=Wa(y,S);N.payload=c,h!=null&&(N.callback=h),c=Ao(o,N,S),c!==null&&(na(c,o,S,y),Cf(c,o,S))},enqueueReplaceState:function(o,c,h){o=o._reactInternals;var y=$s(),S=To(o),N=Wa(y,S);N.tag=1,N.payload=c,h!=null&&(N.callback=h),c=Ao(o,N,S),c!==null&&(na(c,o,S,y),Cf(c,o,S))},enqueueForceUpdate:function(o,c){o=o._reactInternals;var h=$s(),y=To(o),S=Wa(h,y);S.tag=2,c!=null&&(S.callback=c),c=Ao(o,S,y),c!==null&&(na(c,o,y,h),Cf(c,o,y))}};function K1(o,c,h,y,S,N,O){return o=o.stateNode,typeof o.shouldComponentUpdate=="function"?o.shouldComponentUpdate(y,N,O):c.prototype&&c.prototype.isPureReactComponent?!Cu(h,y)||!Cu(S,N):!0}function G1(o,c,h){var y=!1,S=_o,N=c.contextType;return typeof N=="object"&&N!==null?N=Ai(N):(S=Hs(c)?ll:Ns.current,y=c.contextTypes,N=(y=y!=null)?oc(o,S):_o),c=new c(h,N),o.memoizedState=c.state!==null&&c.state!==void 0?c.state:null,c.updater=$f,o.stateNode=c,c._reactInternals=o,y&&(o=o.stateNode,o.__reactInternalMemoizedUnmaskedChildContext=S,o.__reactInternalMemoizedMaskedChildContext=N),c}function Y1(o,c,h,y){o=c.state,typeof c.componentWillReceiveProps=="function"&&c.componentWillReceiveProps(h,y),typeof c.UNSAFE_componentWillReceiveProps=="function"&&c.UNSAFE_componentWillReceiveProps(h,y),c.state!==o&&$f.enqueueReplaceState(c,c.state,null)}function Eg(o,c,h,y){var S=o.stateNode;S.props=h,S.state=o.memoizedState,S.refs={},mg(o);var N=c.contextType;typeof N=="object"&&N!==null?S.context=Ai(N):(N=Hs(c)?ll:Ns.current,S.context=oc(o,N)),S.state=o.memoizedState,N=c.getDerivedStateFromProps,typeof N=="function"&&(Cg(o,c,N,h),S.state=o.memoizedState),typeof c.getDerivedStateFromProps=="function"||typeof S.getSnapshotBeforeUpdate=="function"||typeof S.UNSAFE_componentWillMount!="function"&&typeof S.componentWillMount!="function"||(c=S.state,typeof S.componentWillMount=="function"&&S.componentWillMount(),typeof S.UNSAFE_componentWillMount=="function"&&S.UNSAFE_componentWillMount(),c!==S.state&&$f.enqueueReplaceState(S,S.state,null),Ef(o,h,S,y),S.state=o.memoizedState),typeof S.componentDidMount=="function"&&(o.flags|=4194308)}function pc(o,c){try{var h="",y=c;do h+=Le(y),y=y.return;while(y);var S=h}catch(N){S=`
Error generating stack: `+N.message+`
`+N.stack}return{value:o,source:c,stack:S,digest:null}}function Ag(o,c,h){return{value:o,source:null,stack:h??null,digest:c??null}}function Pg(o,c){try{console.error(c.value)}catch(h){setTimeout(function(){throw h})}}var $T=typeof WeakMap=="function"?WeakMap:Map;function J1(o,c,h){h=Wa(-1,h),h.tag=3,h.payload={element:null};var y=c.value;return h.callback=function(){Bf||(Bf=!0,qg=y),Pg(o,c)},h}function X1(o,c,h){h=Wa(-1,h),h.tag=3;var y=o.type.getDerivedStateFromError;if(typeof y=="function"){var S=c.value;h.payload=function(){return y(S)},h.callback=function(){Pg(o,c)}}var N=o.stateNode;return N!==null&&typeof N.componentDidCatch=="function"&&(h.callback=function(){Pg(o,c),typeof y!="function"&&(Oo===null?Oo=new Set([this]):Oo.add(this));var O=c.stack;this.componentDidCatch(c.value,{componentStack:O!==null?O:""})}),h}function Q1(o,c,h){var y=o.pingCache;if(y===null){y=o.pingCache=new $T;var S=new Set;y.set(c,S)}else S=y.get(c),S===void 0&&(S=new Set,y.set(c,S));S.has(h)||(S.add(h),o=YT.bind(null,o,c,h),c.then(o,o))}function Z1(o){do{var c;if((c=o.tag===13)&&(c=o.memoizedState,c=c!==null?c.dehydrated!==null:!0),c)return o;o=o.return}while(o!==null);return null}function ej(o,c,h,y,S){return(o.mode&1)===0?(o===c?o.flags|=65536:(o.flags|=128,h.flags|=131072,h.flags&=-52805,h.tag===1&&(h.alternate===null?h.tag=17:(c=Wa(-1,1),c.tag=2,Ao(h,c,1))),h.lanes|=1),o):(o.flags|=65536,o.lanes=S,o)}var RT=I.ReactCurrentOwner,Ks=!1;function Ds(o,c,h,y){c.child=o===null?b1(c,null,h,y):dc(c,o.child,h,y)}function tj(o,c,h,y,S){h=h.render;var N=c.ref;return hc(c,S),y=wg(o,c,h,y,N,S),h=jg(),o!==null&&!Ks?(c.updateQueue=o.updateQueue,c.flags&=-2053,o.lanes&=~S,Va(o,c,S)):(Jr&&h&&sg(c),c.flags|=1,Ds(o,c,y,S),c.child)}function rj(o,c,h,y,S){if(o===null){var N=h.type;return typeof N=="function"&&!Qg(N)&&N.defaultProps===void 0&&h.compare===null&&h.defaultProps===void 0?(c.tag=15,c.type=N,nj(o,c,N,y,S)):(o=Gf(h.type,null,y,c,c.mode,S),o.ref=c.ref,o.return=c,c.child=o)}if(N=o.child,(o.lanes&S)===0){var O=N.memoizedProps;if(h=h.compare,h=h!==null?h:Cu,h(O,y)&&o.ref===c.ref)return Va(o,c,S)}return c.flags|=1,o=$o(N,y),o.ref=c.ref,o.return=c,c.child=o}function nj(o,c,h,y,S){if(o!==null){var N=o.memoizedProps;if(Cu(N,y)&&o.ref===c.ref)if(Ks=!1,c.pendingProps=y=N,(o.lanes&S)!==0)(o.flags&131072)!==0&&(Ks=!0);else return c.lanes=o.lanes,Va(o,c,S)}return Og(o,c,h,y,S)}function sj(o,c,h){var y=c.pendingProps,S=y.children,N=o!==null?o.memoizedState:null;if(y.mode==="hidden")if((c.mode&1)===0)c.memoizedState={baseLanes:0,cachePool:null,transitions:null},Tr(yc,li),li|=h;else{if((h&1073741824)===0)return o=N!==null?N.baseLanes|h:h,c.lanes=c.childLanes=1073741824,c.memoizedState={baseLanes:o,cachePool:null,transitions:null},c.updateQueue=null,Tr(yc,li),li|=o,null;c.memoizedState={baseLanes:0,cachePool:null,transitions:null},y=N!==null?N.baseLanes:h,Tr(yc,li),li|=y}else N!==null?(y=N.baseLanes|h,c.memoizedState=null):y=h,Tr(yc,li),li|=y;return Ds(o,c,S,h),c.child}function ij(o,c){var h=c.ref;(o===null&&h!==null||o!==null&&o.ref!==h)&&(c.flags|=512,c.flags|=2097152)}function Og(o,c,h,y,S){var N=Hs(h)?ll:Ns.current;return N=oc(c,N),hc(c,S),h=wg(o,c,h,y,N,S),y=jg(),o!==null&&!Ks?(c.updateQueue=o.updateQueue,c.flags&=-2053,o.lanes&=~S,Va(o,c,S)):(Jr&&y&&sg(c),c.flags|=1,Ds(o,c,h,S),c.child)}function aj(o,c,h,y,S){if(Hs(h)){var N=!0;vf(c)}else N=!1;if(hc(c,S),c.stateNode===null)Mf(o,c),G1(c,h,y),Eg(c,h,y,S),y=!0;else if(o===null){var O=c.stateNode,W=c.memoizedProps;O.props=W;var te=O.context,we=h.contextType;typeof we=="object"&&we!==null?we=Ai(we):(we=Hs(h)?ll:Ns.current,we=oc(c,we));var We=h.getDerivedStateFromProps,Ve=typeof We=="function"||typeof O.getSnapshotBeforeUpdate=="function";Ve||typeof O.UNSAFE_componentWillReceiveProps!="function"&&typeof O.componentWillReceiveProps!="function"||(W!==y||te!==we)&&Y1(c,O,y,we),Eo=!1;var Ue=c.memoizedState;O.state=Ue,Ef(c,y,O,S),te=c.memoizedState,W!==y||Ue!==te||qs.current||Eo?(typeof We=="function"&&(Cg(c,h,We,y),te=c.memoizedState),(W=Eo||K1(c,h,W,y,Ue,te,we))?(Ve||typeof O.UNSAFE_componentWillMount!="function"&&typeof O.componentWillMount!="function"||(typeof O.componentWillMount=="function"&&O.componentWillMount(),typeof O.UNSAFE_componentWillMount=="function"&&O.UNSAFE_componentWillMount()),typeof O.componentDidMount=="function"&&(c.flags|=4194308)):(typeof O.componentDidMount=="function"&&(c.flags|=4194308),c.memoizedProps=y,c.memoizedState=te),O.props=y,O.state=te,O.context=we,y=W):(typeof O.componentDidMount=="function"&&(c.flags|=4194308),y=!1)}else{O=c.stateNode,j1(o,c),W=c.memoizedProps,we=c.type===c.elementType?W:ea(c.type,W),O.props=we,Ve=c.pendingProps,Ue=O.context,te=h.contextType,typeof te=="object"&&te!==null?te=Ai(te):(te=Hs(h)?ll:Ns.current,te=oc(c,te));var et=h.getDerivedStateFromProps;(We=typeof et=="function"||typeof O.getSnapshotBeforeUpdate=="function")||typeof O.UNSAFE_componentWillReceiveProps!="function"&&typeof O.componentWillReceiveProps!="function"||(W!==Ve||Ue!==te)&&Y1(c,O,y,te),Eo=!1,Ue=c.memoizedState,O.state=Ue,Ef(c,y,O,S);var ut=c.memoizedState;W!==Ve||Ue!==ut||qs.current||Eo?(typeof et=="function"&&(Cg(c,h,et,y),ut=c.memoizedState),(we=Eo||K1(c,h,we,y,Ue,ut,te)||!1)?(We||typeof O.UNSAFE_componentWillUpdate!="function"&&typeof O.componentWillUpdate!="function"||(typeof O.componentWillUpdate=="function"&&O.componentWillUpdate(y,ut,te),typeof O.UNSAFE_componentWillUpdate=="function"&&O.UNSAFE_componentWillUpdate(y,ut,te)),typeof O.componentDidUpdate=="function"&&(c.flags|=4),typeof O.getSnapshotBeforeUpdate=="function"&&(c.flags|=1024)):(typeof O.componentDidUpdate!="function"||W===o.memoizedProps&&Ue===o.memoizedState||(c.flags|=4),typeof O.getSnapshotBeforeUpdate!="function"||W===o.memoizedProps&&Ue===o.memoizedState||(c.flags|=1024),c.memoizedProps=y,c.memoizedState=ut),O.props=y,O.state=ut,O.context=te,y=we):(typeof O.componentDidUpdate!="function"||W===o.memoizedProps&&Ue===o.memoizedState||(c.flags|=4),typeof O.getSnapshotBeforeUpdate!="function"||W===o.memoizedProps&&Ue===o.memoizedState||(c.flags|=1024),y=!1)}return Ig(o,c,h,y,N,S)}function Ig(o,c,h,y,S,N){ij(o,c);var O=(c.flags&128)!==0;if(!y&&!O)return S&&d1(c,h,!1),Va(o,c,N);y=c.stateNode,RT.current=c;var W=O&&typeof h.getDerivedStateFromError!="function"?null:y.render();return c.flags|=1,o!==null&&O?(c.child=dc(c,o.child,null,N),c.child=dc(c,null,W,N)):Ds(o,c,W,N),c.memoizedState=y.state,S&&d1(c,h,!0),c.child}function oj(o){var c=o.stateNode;c.pendingContext?c1(o,c.pendingContext,c.pendingContext!==c.context):c.context&&c1(o,c.context,!1),pg(o,c.containerInfo)}function lj(o,c,h,y,S){return uc(),lg(S),c.flags|=256,Ds(o,c,h,y),c.child}var Tg={dehydrated:null,treeContext:null,retryLane:0};function Dg(o){return{baseLanes:o,cachePool:null,transitions:null}}function cj(o,c,h){var y=c.pendingProps,S=rn.current,N=!1,O=(c.flags&128)!==0,W;if((W=O)||(W=o!==null&&o.memoizedState===null?!1:(S&2)!==0),W?(N=!0,c.flags&=-129):(o===null||o.memoizedState!==null)&&(S|=1),Tr(rn,S&1),o===null)return og(c),o=c.memoizedState,o!==null&&(o=o.dehydrated,o!==null)?((c.mode&1)===0?c.lanes=1:o.data==="$!"?c.lanes=8:c.lanes=1073741824,null):(O=y.children,o=y.fallback,N?(y=c.mode,N=c.child,O={mode:"hidden",children:O},(y&1)===0&&N!==null?(N.childLanes=0,N.pendingProps=O):N=Yf(O,y,0,null),o=xl(o,y,h,null),N.return=c,o.return=c,N.sibling=o,c.child=N,c.child.memoizedState=Dg(h),c.memoizedState=Tg,o):$g(c,O));if(S=o.memoizedState,S!==null&&(W=S.dehydrated,W!==null))return MT(o,c,O,y,W,S,h);if(N){N=y.fallback,O=c.mode,S=o.child,W=S.sibling;var te={mode:"hidden",children:y.children};return(O&1)===0&&c.child!==S?(y=c.child,y.childLanes=0,y.pendingProps=te,c.deletions=null):(y=$o(S,te),y.subtreeFlags=S.subtreeFlags&14680064),W!==null?N=$o(W,N):(N=xl(N,O,h,null),N.flags|=2),N.return=c,y.return=c,y.sibling=N,c.child=y,y=N,N=c.child,O=o.child.memoizedState,O=O===null?Dg(h):{baseLanes:O.baseLanes|h,cachePool:null,transitions:O.transitions},N.memoizedState=O,N.childLanes=o.childLanes&~h,c.memoizedState=Tg,y}return N=o.child,o=N.sibling,y=$o(N,{mode:"visible",children:y.children}),(c.mode&1)===0&&(y.lanes=h),y.return=c,y.sibling=null,o!==null&&(h=c.deletions,h===null?(c.deletions=[o],c.flags|=16):h.push(o)),c.child=y,c.memoizedState=null,y}function $g(o,c){return c=Yf({mode:"visible",children:c},o.mode,0,null),c.return=o,o.child=c}function Rf(o,c,h,y){return y!==null&&lg(y),dc(c,o.child,null,h),o=$g(c,c.pendingProps.children),o.flags|=2,c.memoizedState=null,o}function MT(o,c,h,y,S,N,O){if(h)return c.flags&256?(c.flags&=-257,y=Ag(Error(r(422))),Rf(o,c,O,y)):c.memoizedState!==null?(c.child=o.child,c.flags|=128,null):(N=y.fallback,S=c.mode,y=Yf({mode:"visible",children:y.children},S,0,null),N=xl(N,S,O,null),N.flags|=2,y.return=c,N.return=c,y.sibling=N,c.child=y,(c.mode&1)!==0&&dc(c,o.child,null,O),c.child.memoizedState=Dg(O),c.memoizedState=Tg,N);if((c.mode&1)===0)return Rf(o,c,O,null);if(S.data==="$!"){if(y=S.nextSibling&&S.nextSibling.dataset,y)var W=y.dgst;return y=W,N=Error(r(419)),y=Ag(N,y,void 0),Rf(o,c,O,y)}if(W=(O&o.childLanes)!==0,Ks||W){if(y=Xn,y!==null){switch(O&-O){case 4:S=2;break;case 16:S=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:S=32;break;case 536870912:S=268435456;break;default:S=0}S=(S&(y.suspendedLanes|O))!==0?0:S,S!==0&&S!==N.retryLane&&(N.retryLane=S,Ba(o,S),na(y,o,S,-1))}return Xg(),y=Ag(Error(r(421))),Rf(o,c,O,y)}return S.data==="$?"?(c.flags|=128,c.child=o.child,c=JT.bind(null,o),S._reactRetry=c,null):(o=N.treeContext,oi=ko(S.nextSibling),ai=c,Jr=!0,Zi=null,o!==null&&(Ci[Ei++]=za,Ci[Ei++]=Ua,Ci[Ei++]=cl,za=o.id,Ua=o.overflow,cl=c),c=$g(c,y.children),c.flags|=4096,c)}function uj(o,c,h){o.lanes|=c;var y=o.alternate;y!==null&&(y.lanes|=c),fg(o.return,c,h)}function Rg(o,c,h,y,S){var N=o.memoizedState;N===null?o.memoizedState={isBackwards:c,rendering:null,renderingStartTime:0,last:y,tail:h,tailMode:S}:(N.isBackwards=c,N.rendering=null,N.renderingStartTime=0,N.last=y,N.tail=h,N.tailMode=S)}function dj(o,c,h){var y=c.pendingProps,S=y.revealOrder,N=y.tail;if(Ds(o,c,y.children,h),y=rn.current,(y&2)!==0)y=y&1|2,c.flags|=128;else{if(o!==null&&(o.flags&128)!==0)e:for(o=c.child;o!==null;){if(o.tag===13)o.memoizedState!==null&&uj(o,h,c);else if(o.tag===19)uj(o,h,c);else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===c)break e;for(;o.sibling===null;){if(o.return===null||o.return===c)break e;o=o.return}o.sibling.return=o.return,o=o.sibling}y&=1}if(Tr(rn,y),(c.mode&1)===0)c.memoizedState=null;else switch(S){case"forwards":for(h=c.child,S=null;h!==null;)o=h.alternate,o!==null&&Af(o)===null&&(S=h),h=h.sibling;h=S,h===null?(S=c.child,c.child=null):(S=h.sibling,h.sibling=null),Rg(c,!1,S,h,N);break;case"backwards":for(h=null,S=c.child,c.child=null;S!==null;){if(o=S.alternate,o!==null&&Af(o)===null){c.child=S;break}o=S.sibling,S.sibling=h,h=S,S=o}Rg(c,!0,h,null,N);break;case"together":Rg(c,!1,null,null,void 0);break;default:c.memoizedState=null}return c.child}function Mf(o,c){(c.mode&1)===0&&o!==null&&(o.alternate=null,c.alternate=null,c.flags|=2)}function Va(o,c,h){if(o!==null&&(c.dependencies=o.dependencies),ml|=c.lanes,(h&c.childLanes)===0)return null;if(o!==null&&c.child!==o.child)throw Error(r(153));if(c.child!==null){for(o=c.child,h=$o(o,o.pendingProps),c.child=h,h.return=c;o.sibling!==null;)o=o.sibling,h=h.sibling=$o(o,o.pendingProps),h.return=c;h.sibling=null}return c.child}function FT(o,c,h){switch(c.tag){case 3:oj(c),uc();break;case 5:N1(c);break;case 1:Hs(c.type)&&vf(c);break;case 4:pg(c,c.stateNode.containerInfo);break;case 10:var y=c.type._context,S=c.memoizedProps.value;Tr(Nf,y._currentValue),y._currentValue=S;break;case 13:if(y=c.memoizedState,y!==null)return y.dehydrated!==null?(Tr(rn,rn.current&1),c.flags|=128,null):(h&c.child.childLanes)!==0?cj(o,c,h):(Tr(rn,rn.current&1),o=Va(o,c,h),o!==null?o.sibling:null);Tr(rn,rn.current&1);break;case 19:if(y=(h&c.childLanes)!==0,(o.flags&128)!==0){if(y)return dj(o,c,h);c.flags|=128}if(S=c.memoizedState,S!==null&&(S.rendering=null,S.tail=null,S.lastEffect=null),Tr(rn,rn.current),y)break;return null;case 22:case 23:return c.lanes=0,sj(o,c,h)}return Va(o,c,h)}var fj,Mg,hj,mj;fj=function(o,c){for(var h=c.child;h!==null;){if(h.tag===5||h.tag===6)o.appendChild(h.stateNode);else if(h.tag!==4&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===c)break;for(;h.sibling===null;){if(h.return===null||h.return===c)return;h=h.return}h.sibling.return=h.return,h=h.sibling}},Mg=function(){},hj=function(o,c,h,y){var S=o.memoizedProps;if(S!==y){o=c.stateNode,fl(va.current);var N=null;switch(h){case"input":S=Oe(o,S),y=Oe(o,y),N=[];break;case"select":S=ie({},S,{value:void 0}),y=ie({},y,{value:void 0}),N=[];break;case"textarea":S=ne(o,S),y=ne(o,y),N=[];break;default:typeof S.onClick!="function"&&typeof y.onClick=="function"&&(o.onclick=gf)}nt(h,y);var O;h=null;for(we in S)if(!y.hasOwnProperty(we)&&S.hasOwnProperty(we)&&S[we]!=null)if(we==="style"){var W=S[we];for(O in W)W.hasOwnProperty(O)&&(h||(h={}),h[O]="")}else we!=="dangerouslySetInnerHTML"&&we!=="children"&&we!=="suppressContentEditableWarning"&&we!=="suppressHydrationWarning"&&we!=="autoFocus"&&(s.hasOwnProperty(we)?N||(N=[]):(N=N||[]).push(we,null));for(we in y){var te=y[we];if(W=S!=null?S[we]:void 0,y.hasOwnProperty(we)&&te!==W&&(te!=null||W!=null))if(we==="style")if(W){for(O in W)!W.hasOwnProperty(O)||te&&te.hasOwnProperty(O)||(h||(h={}),h[O]="");for(O in te)te.hasOwnProperty(O)&&W[O]!==te[O]&&(h||(h={}),h[O]=te[O])}else h||(N||(N=[]),N.push(we,h)),h=te;else we==="dangerouslySetInnerHTML"?(te=te?te.__html:void 0,W=W?W.__html:void 0,te!=null&&W!==te&&(N=N||[]).push(we,te)):we==="children"?typeof te!="string"&&typeof te!="number"||(N=N||[]).push(we,""+te):we!=="suppressContentEditableWarning"&&we!=="suppressHydrationWarning"&&(s.hasOwnProperty(we)?(te!=null&&we==="onScroll"&&Lr("scroll",o),N||W===te||(N=[])):(N=N||[]).push(we,te))}h&&(N=N||[]).push("style",h);var we=N;(c.updateQueue=we)&&(c.flags|=4)}},mj=function(o,c,h,y){h!==y&&(c.flags|=4)};function Bu(o,c){if(!Jr)switch(o.tailMode){case"hidden":c=o.tail;for(var h=null;c!==null;)c.alternate!==null&&(h=c),c=c.sibling;h===null?o.tail=null:h.sibling=null;break;case"collapsed":h=o.tail;for(var y=null;h!==null;)h.alternate!==null&&(y=h),h=h.sibling;y===null?c||o.tail===null?o.tail=null:o.tail.sibling=null:y.sibling=null}}function Cs(o){var c=o.alternate!==null&&o.alternate.child===o.child,h=0,y=0;if(c)for(var S=o.child;S!==null;)h|=S.lanes|S.childLanes,y|=S.subtreeFlags&14680064,y|=S.flags&14680064,S.return=o,S=S.sibling;else for(S=o.child;S!==null;)h|=S.lanes|S.childLanes,y|=S.subtreeFlags,y|=S.flags,S.return=o,S=S.sibling;return o.subtreeFlags|=y,o.childLanes=h,c}function LT(o,c,h){var y=c.pendingProps;switch(ig(c),c.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Cs(c),null;case 1:return Hs(c.type)&&xf(),Cs(c),null;case 3:return y=c.stateNode,mc(),zr(qs),zr(Ns),xg(),y.pendingContext&&(y.context=y.pendingContext,y.pendingContext=null),(o===null||o.child===null)&&(Sf(c)?c.flags|=4:o===null||o.memoizedState.isDehydrated&&(c.flags&256)===0||(c.flags|=1024,Zi!==null&&(Gg(Zi),Zi=null))),Mg(o,c),Cs(c),null;case 5:gg(c);var S=fl(Mu.current);if(h=c.type,o!==null&&c.stateNode!=null)hj(o,c,h,y,S),o.ref!==c.ref&&(c.flags|=512,c.flags|=2097152);else{if(!y){if(c.stateNode===null)throw Error(r(166));return Cs(c),null}if(o=fl(va.current),Sf(c)){y=c.stateNode,h=c.type;var N=c.memoizedProps;switch(y[xa]=c,y[Iu]=N,o=(c.mode&1)!==0,h){case"dialog":Lr("cancel",y),Lr("close",y);break;case"iframe":case"object":case"embed":Lr("load",y);break;case"video":case"audio":for(S=0;S<Au.length;S++)Lr(Au[S],y);break;case"source":Lr("error",y);break;case"img":case"image":case"link":Lr("error",y),Lr("load",y);break;case"details":Lr("toggle",y);break;case"input":rt(y,N),Lr("invalid",y);break;case"select":y._wrapperState={wasMultiple:!!N.multiple},Lr("invalid",y);break;case"textarea":Ne(y,N),Lr("invalid",y)}nt(h,N),S=null;for(var O in N)if(N.hasOwnProperty(O)){var W=N[O];O==="children"?typeof W=="string"?y.textContent!==W&&(N.suppressHydrationWarning!==!0&&pf(y.textContent,W,o),S=["children",W]):typeof W=="number"&&y.textContent!==""+W&&(N.suppressHydrationWarning!==!0&&pf(y.textContent,W,o),S=["children",""+W]):s.hasOwnProperty(O)&&W!=null&&O==="onScroll"&&Lr("scroll",y)}switch(h){case"input":de(y),ot(y,N,!0);break;case"textarea":de(y),Ce(y);break;case"select":case"option":break;default:typeof N.onClick=="function"&&(y.onclick=gf)}y=S,c.updateQueue=y,y!==null&&(c.flags|=4)}else{O=S.nodeType===9?S:S.ownerDocument,o==="http://www.w3.org/1999/xhtml"&&(o=Te(h)),o==="http://www.w3.org/1999/xhtml"?h==="script"?(o=O.createElement("div"),o.innerHTML="<script><\/script>",o=o.removeChild(o.firstChild)):typeof y.is=="string"?o=O.createElement(h,{is:y.is}):(o=O.createElement(h),h==="select"&&(O=o,y.multiple?O.multiple=!0:y.size&&(O.size=y.size))):o=O.createElementNS(o,h),o[xa]=c,o[Iu]=y,fj(o,c,!1,!1),c.stateNode=o;e:{switch(O=Kt(h,y),h){case"dialog":Lr("cancel",o),Lr("close",o),S=y;break;case"iframe":case"object":case"embed":Lr("load",o),S=y;break;case"video":case"audio":for(S=0;S<Au.length;S++)Lr(Au[S],o);S=y;break;case"source":Lr("error",o),S=y;break;case"img":case"image":case"link":Lr("error",o),Lr("load",o),S=y;break;case"details":Lr("toggle",o),S=y;break;case"input":rt(o,y),S=Oe(o,y),Lr("invalid",o);break;case"option":S=y;break;case"select":o._wrapperState={wasMultiple:!!y.multiple},S=ie({},y,{value:void 0}),Lr("invalid",o);break;case"textarea":Ne(o,y),S=ne(o,y),Lr("invalid",o);break;default:S=y}nt(h,S),W=S;for(N in W)if(W.hasOwnProperty(N)){var te=W[N];N==="style"?Ze(o,te):N==="dangerouslySetInnerHTML"?(te=te?te.__html:void 0,te!=null&&qe(o,te)):N==="children"?typeof te=="string"?(h!=="textarea"||te!=="")&&bt(o,te):typeof te=="number"&&bt(o,""+te):N!=="suppressContentEditableWarning"&&N!=="suppressHydrationWarning"&&N!=="autoFocus"&&(s.hasOwnProperty(N)?te!=null&&N==="onScroll"&&Lr("scroll",o):te!=null&&C(o,N,te,O))}switch(h){case"input":de(o),ot(o,y,!1);break;case"textarea":de(o),Ce(o);break;case"option":y.value!=null&&o.setAttribute("value",""+Se(y.value));break;case"select":o.multiple=!!y.multiple,N=y.value,N!=null?q(o,!!y.multiple,N,!1):y.defaultValue!=null&&q(o,!!y.multiple,y.defaultValue,!0);break;default:typeof S.onClick=="function"&&(o.onclick=gf)}switch(h){case"button":case"input":case"select":case"textarea":y=!!y.autoFocus;break e;case"img":y=!0;break e;default:y=!1}}y&&(c.flags|=4)}c.ref!==null&&(c.flags|=512,c.flags|=2097152)}return Cs(c),null;case 6:if(o&&c.stateNode!=null)mj(o,c,o.memoizedProps,y);else{if(typeof y!="string"&&c.stateNode===null)throw Error(r(166));if(h=fl(Mu.current),fl(va.current),Sf(c)){if(y=c.stateNode,h=c.memoizedProps,y[xa]=c,(N=y.nodeValue!==h)&&(o=ai,o!==null))switch(o.tag){case 3:pf(y.nodeValue,h,(o.mode&1)!==0);break;case 5:o.memoizedProps.suppressHydrationWarning!==!0&&pf(y.nodeValue,h,(o.mode&1)!==0)}N&&(c.flags|=4)}else y=(h.nodeType===9?h:h.ownerDocument).createTextNode(y),y[xa]=c,c.stateNode=y}return Cs(c),null;case 13:if(zr(rn),y=c.memoizedState,o===null||o.memoizedState!==null&&o.memoizedState.dehydrated!==null){if(Jr&&oi!==null&&(c.mode&1)!==0&&(c.flags&128)===0)y1(),uc(),c.flags|=98560,N=!1;else if(N=Sf(c),y!==null&&y.dehydrated!==null){if(o===null){if(!N)throw Error(r(318));if(N=c.memoizedState,N=N!==null?N.dehydrated:null,!N)throw Error(r(317));N[xa]=c}else uc(),(c.flags&128)===0&&(c.memoizedState=null),c.flags|=4;Cs(c),N=!1}else Zi!==null&&(Gg(Zi),Zi=null),N=!0;if(!N)return c.flags&65536?c:null}return(c.flags&128)!==0?(c.lanes=h,c):(y=y!==null,y!==(o!==null&&o.memoizedState!==null)&&y&&(c.child.flags|=8192,(c.mode&1)!==0&&(o===null||(rn.current&1)!==0?$n===0&&($n=3):Xg())),c.updateQueue!==null&&(c.flags|=4),Cs(c),null);case 4:return mc(),Mg(o,c),o===null&&Pu(c.stateNode.containerInfo),Cs(c),null;case 10:return dg(c.type._context),Cs(c),null;case 17:return Hs(c.type)&&xf(),Cs(c),null;case 19:if(zr(rn),N=c.memoizedState,N===null)return Cs(c),null;if(y=(c.flags&128)!==0,O=N.rendering,O===null)if(y)Bu(N,!1);else{if($n!==0||o!==null&&(o.flags&128)!==0)for(o=c.child;o!==null;){if(O=Af(o),O!==null){for(c.flags|=128,Bu(N,!1),y=O.updateQueue,y!==null&&(c.updateQueue=y,c.flags|=4),c.subtreeFlags=0,y=h,h=c.child;h!==null;)N=h,o=y,N.flags&=14680066,O=N.alternate,O===null?(N.childLanes=0,N.lanes=o,N.child=null,N.subtreeFlags=0,N.memoizedProps=null,N.memoizedState=null,N.updateQueue=null,N.dependencies=null,N.stateNode=null):(N.childLanes=O.childLanes,N.lanes=O.lanes,N.child=O.child,N.subtreeFlags=0,N.deletions=null,N.memoizedProps=O.memoizedProps,N.memoizedState=O.memoizedState,N.updateQueue=O.updateQueue,N.type=O.type,o=O.dependencies,N.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext}),h=h.sibling;return Tr(rn,rn.current&1|2),c.child}o=o.sibling}N.tail!==null&&nr()>xc&&(c.flags|=128,y=!0,Bu(N,!1),c.lanes=4194304)}else{if(!y)if(o=Af(O),o!==null){if(c.flags|=128,y=!0,h=o.updateQueue,h!==null&&(c.updateQueue=h,c.flags|=4),Bu(N,!0),N.tail===null&&N.tailMode==="hidden"&&!O.alternate&&!Jr)return Cs(c),null}else 2*nr()-N.renderingStartTime>xc&&h!==1073741824&&(c.flags|=128,y=!0,Bu(N,!1),c.lanes=4194304);N.isBackwards?(O.sibling=c.child,c.child=O):(h=N.last,h!==null?h.sibling=O:c.child=O,N.last=O)}return N.tail!==null?(c=N.tail,N.rendering=c,N.tail=c.sibling,N.renderingStartTime=nr(),c.sibling=null,h=rn.current,Tr(rn,y?h&1|2:h&1),c):(Cs(c),null);case 22:case 23:return Jg(),y=c.memoizedState!==null,o!==null&&o.memoizedState!==null!==y&&(c.flags|=8192),y&&(c.mode&1)!==0?(li&1073741824)!==0&&(Cs(c),c.subtreeFlags&6&&(c.flags|=8192)):Cs(c),null;case 24:return null;case 25:return null}throw Error(r(156,c.tag))}function zT(o,c){switch(ig(c),c.tag){case 1:return Hs(c.type)&&xf(),o=c.flags,o&65536?(c.flags=o&-65537|128,c):null;case 3:return mc(),zr(qs),zr(Ns),xg(),o=c.flags,(o&65536)!==0&&(o&128)===0?(c.flags=o&-65537|128,c):null;case 5:return gg(c),null;case 13:if(zr(rn),o=c.memoizedState,o!==null&&o.dehydrated!==null){if(c.alternate===null)throw Error(r(340));uc()}return o=c.flags,o&65536?(c.flags=o&-65537|128,c):null;case 19:return zr(rn),null;case 4:return mc(),null;case 10:return dg(c.type._context),null;case 22:case 23:return Jg(),null;case 24:return null;default:return null}}var Ff=!1,Es=!1,UT=typeof WeakSet=="function"?WeakSet:Set,it=null;function gc(o,c){var h=o.ref;if(h!==null)if(typeof h=="function")try{h(null)}catch(y){cn(o,c,y)}else h.current=null}function Fg(o,c,h){try{h()}catch(y){cn(o,c,y)}}var pj=!1;function BT(o,c){if(Jp=ki,o=Kw(),Bp(o)){if("selectionStart"in o)var h={start:o.selectionStart,end:o.selectionEnd};else e:{h=(h=o.ownerDocument)&&h.defaultView||window;var y=h.getSelection&&h.getSelection();if(y&&y.rangeCount!==0){h=y.anchorNode;var S=y.anchorOffset,N=y.focusNode;y=y.focusOffset;try{h.nodeType,N.nodeType}catch{h=null;break e}var O=0,W=-1,te=-1,we=0,We=0,Ve=o,Ue=null;t:for(;;){for(var et;Ve!==h||S!==0&&Ve.nodeType!==3||(W=O+S),Ve!==N||y!==0&&Ve.nodeType!==3||(te=O+y),Ve.nodeType===3&&(O+=Ve.nodeValue.length),(et=Ve.firstChild)!==null;)Ue=Ve,Ve=et;for(;;){if(Ve===o)break t;if(Ue===h&&++we===S&&(W=O),Ue===N&&++We===y&&(te=O),(et=Ve.nextSibling)!==null)break;Ve=Ue,Ue=Ve.parentNode}Ve=et}h=W===-1||te===-1?null:{start:W,end:te}}else h=null}h=h||{start:0,end:0}}else h=null;for(Xp={focusedElem:o,selectionRange:h},ki=!1,it=c;it!==null;)if(c=it,o=c.child,(c.subtreeFlags&1028)!==0&&o!==null)o.return=c,it=o;else for(;it!==null;){c=it;try{var ut=c.alternate;if((c.flags&1024)!==0)switch(c.tag){case 0:case 11:case 15:break;case 1:if(ut!==null){var ht=ut.memoizedProps,yn=ut.memoizedState,pe=c.stateNode,oe=pe.getSnapshotBeforeUpdate(c.elementType===c.type?ht:ea(c.type,ht),yn);pe.__reactInternalSnapshotBeforeUpdate=oe}break;case 3:var xe=c.stateNode.containerInfo;xe.nodeType===1?xe.textContent="":xe.nodeType===9&&xe.documentElement&&xe.removeChild(xe.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(r(163))}}catch(Ke){cn(c,c.return,Ke)}if(o=c.sibling,o!==null){o.return=c.return,it=o;break}it=c.return}return ut=pj,pj=!1,ut}function Wu(o,c,h){var y=c.updateQueue;if(y=y!==null?y.lastEffect:null,y!==null){var S=y=y.next;do{if((S.tag&o)===o){var N=S.destroy;S.destroy=void 0,N!==void 0&&Fg(c,h,N)}S=S.next}while(S!==y)}}function Lf(o,c){if(c=c.updateQueue,c=c!==null?c.lastEffect:null,c!==null){var h=c=c.next;do{if((h.tag&o)===o){var y=h.create;h.destroy=y()}h=h.next}while(h!==c)}}function Lg(o){var c=o.ref;if(c!==null){var h=o.stateNode;switch(o.tag){case 5:o=h;break;default:o=h}typeof c=="function"?c(o):c.current=o}}function gj(o){var c=o.alternate;c!==null&&(o.alternate=null,gj(c)),o.child=null,o.deletions=null,o.sibling=null,o.tag===5&&(c=o.stateNode,c!==null&&(delete c[xa],delete c[Iu],delete c[tg],delete c[kT],delete c[NT])),o.stateNode=null,o.return=null,o.dependencies=null,o.memoizedProps=null,o.memoizedState=null,o.pendingProps=null,o.stateNode=null,o.updateQueue=null}function yj(o){return o.tag===5||o.tag===3||o.tag===4}function xj(o){e:for(;;){for(;o.sibling===null;){if(o.return===null||yj(o.return))return null;o=o.return}for(o.sibling.return=o.return,o=o.sibling;o.tag!==5&&o.tag!==6&&o.tag!==18;){if(o.flags&2||o.child===null||o.tag===4)continue e;o.child.return=o,o=o.child}if(!(o.flags&2))return o.stateNode}}function zg(o,c,h){var y=o.tag;if(y===5||y===6)o=o.stateNode,c?h.nodeType===8?h.parentNode.insertBefore(o,c):h.insertBefore(o,c):(h.nodeType===8?(c=h.parentNode,c.insertBefore(o,h)):(c=h,c.appendChild(o)),h=h._reactRootContainer,h!=null||c.onclick!==null||(c.onclick=gf));else if(y!==4&&(o=o.child,o!==null))for(zg(o,c,h),o=o.sibling;o!==null;)zg(o,c,h),o=o.sibling}function Ug(o,c,h){var y=o.tag;if(y===5||y===6)o=o.stateNode,c?h.insertBefore(o,c):h.appendChild(o);else if(y!==4&&(o=o.child,o!==null))for(Ug(o,c,h),o=o.sibling;o!==null;)Ug(o,c,h),o=o.sibling}var fs=null,ta=!1;function Po(o,c,h){for(h=h.child;h!==null;)vj(o,c,h),h=h.sibling}function vj(o,c,h){if(ze&&typeof ze.onCommitFiberUnmount=="function")try{ze.onCommitFiberUnmount($e,h)}catch{}switch(h.tag){case 5:Es||gc(h,c);case 6:var y=fs,S=ta;fs=null,Po(o,c,h),fs=y,ta=S,fs!==null&&(ta?(o=fs,h=h.stateNode,o.nodeType===8?o.parentNode.removeChild(h):o.removeChild(h)):fs.removeChild(h.stateNode));break;case 18:fs!==null&&(ta?(o=fs,h=h.stateNode,o.nodeType===8?eg(o.parentNode,h):o.nodeType===1&&eg(o,h),Ws(o)):eg(fs,h.stateNode));break;case 4:y=fs,S=ta,fs=h.stateNode.containerInfo,ta=!0,Po(o,c,h),fs=y,ta=S;break;case 0:case 11:case 14:case 15:if(!Es&&(y=h.updateQueue,y!==null&&(y=y.lastEffect,y!==null))){S=y=y.next;do{var N=S,O=N.destroy;N=N.tag,O!==void 0&&((N&2)!==0||(N&4)!==0)&&Fg(h,c,O),S=S.next}while(S!==y)}Po(o,c,h);break;case 1:if(!Es&&(gc(h,c),y=h.stateNode,typeof y.componentWillUnmount=="function"))try{y.props=h.memoizedProps,y.state=h.memoizedState,y.componentWillUnmount()}catch(W){cn(h,c,W)}Po(o,c,h);break;case 21:Po(o,c,h);break;case 22:h.mode&1?(Es=(y=Es)||h.memoizedState!==null,Po(o,c,h),Es=y):Po(o,c,h);break;default:Po(o,c,h)}}function bj(o){var c=o.updateQueue;if(c!==null){o.updateQueue=null;var h=o.stateNode;h===null&&(h=o.stateNode=new UT),c.forEach(function(y){var S=XT.bind(null,o,y);h.has(y)||(h.add(y),y.then(S,S))})}}function ra(o,c){var h=c.deletions;if(h!==null)for(var y=0;y<h.length;y++){var S=h[y];try{var N=o,O=c,W=O;e:for(;W!==null;){switch(W.tag){case 5:fs=W.stateNode,ta=!1;break e;case 3:fs=W.stateNode.containerInfo,ta=!0;break e;case 4:fs=W.stateNode.containerInfo,ta=!0;break e}W=W.return}if(fs===null)throw Error(r(160));vj(N,O,S),fs=null,ta=!1;var te=S.alternate;te!==null&&(te.return=null),S.return=null}catch(we){cn(S,c,we)}}if(c.subtreeFlags&12854)for(c=c.child;c!==null;)wj(c,o),c=c.sibling}function wj(o,c){var h=o.alternate,y=o.flags;switch(o.tag){case 0:case 11:case 14:case 15:if(ra(c,o),wa(o),y&4){try{Wu(3,o,o.return),Lf(3,o)}catch(ht){cn(o,o.return,ht)}try{Wu(5,o,o.return)}catch(ht){cn(o,o.return,ht)}}break;case 1:ra(c,o),wa(o),y&512&&h!==null&&gc(h,h.return);break;case 5:if(ra(c,o),wa(o),y&512&&h!==null&&gc(h,h.return),o.flags&32){var S=o.stateNode;try{bt(S,"")}catch(ht){cn(o,o.return,ht)}}if(y&4&&(S=o.stateNode,S!=null)){var N=o.memoizedProps,O=h!==null?h.memoizedProps:N,W=o.type,te=o.updateQueue;if(o.updateQueue=null,te!==null)try{W==="input"&&N.type==="radio"&&N.name!=null&&Nt(S,N),Kt(W,O);var we=Kt(W,N);for(O=0;O<te.length;O+=2){var We=te[O],Ve=te[O+1];We==="style"?Ze(S,Ve):We==="dangerouslySetInnerHTML"?qe(S,Ve):We==="children"?bt(S,Ve):C(S,We,Ve,we)}switch(W){case"input":vt(S,N);break;case"textarea":Ie(S,N);break;case"select":var Ue=S._wrapperState.wasMultiple;S._wrapperState.wasMultiple=!!N.multiple;var et=N.value;et!=null?q(S,!!N.multiple,et,!1):Ue!==!!N.multiple&&(N.defaultValue!=null?q(S,!!N.multiple,N.defaultValue,!0):q(S,!!N.multiple,N.multiple?[]:"",!1))}S[Iu]=N}catch(ht){cn(o,o.return,ht)}}break;case 6:if(ra(c,o),wa(o),y&4){if(o.stateNode===null)throw Error(r(162));S=o.stateNode,N=o.memoizedProps;try{S.nodeValue=N}catch(ht){cn(o,o.return,ht)}}break;case 3:if(ra(c,o),wa(o),y&4&&h!==null&&h.memoizedState.isDehydrated)try{Ws(c.containerInfo)}catch(ht){cn(o,o.return,ht)}break;case 4:ra(c,o),wa(o);break;case 13:ra(c,o),wa(o),S=o.child,S.flags&8192&&(N=S.memoizedState!==null,S.stateNode.isHidden=N,!N||S.alternate!==null&&S.alternate.memoizedState!==null||(Vg=nr())),y&4&&bj(o);break;case 22:if(We=h!==null&&h.memoizedState!==null,o.mode&1?(Es=(we=Es)||We,ra(c,o),Es=we):ra(c,o),wa(o),y&8192){if(we=o.memoizedState!==null,(o.stateNode.isHidden=we)&&!We&&(o.mode&1)!==0)for(it=o,We=o.child;We!==null;){for(Ve=it=We;it!==null;){switch(Ue=it,et=Ue.child,Ue.tag){case 0:case 11:case 14:case 15:Wu(4,Ue,Ue.return);break;case 1:gc(Ue,Ue.return);var ut=Ue.stateNode;if(typeof ut.componentWillUnmount=="function"){y=Ue,h=Ue.return;try{c=y,ut.props=c.memoizedProps,ut.state=c.memoizedState,ut.componentWillUnmount()}catch(ht){cn(y,h,ht)}}break;case 5:gc(Ue,Ue.return);break;case 22:if(Ue.memoizedState!==null){kj(Ve);continue}}et!==null?(et.return=Ue,it=et):kj(Ve)}We=We.sibling}e:for(We=null,Ve=o;;){if(Ve.tag===5){if(We===null){We=Ve;try{S=Ve.stateNode,we?(N=S.style,typeof N.setProperty=="function"?N.setProperty("display","none","important"):N.display="none"):(W=Ve.stateNode,te=Ve.memoizedProps.style,O=te!=null&&te.hasOwnProperty("display")?te.display:null,W.style.display=He("display",O))}catch(ht){cn(o,o.return,ht)}}}else if(Ve.tag===6){if(We===null)try{Ve.stateNode.nodeValue=we?"":Ve.memoizedProps}catch(ht){cn(o,o.return,ht)}}else if((Ve.tag!==22&&Ve.tag!==23||Ve.memoizedState===null||Ve===o)&&Ve.child!==null){Ve.child.return=Ve,Ve=Ve.child;continue}if(Ve===o)break e;for(;Ve.sibling===null;){if(Ve.return===null||Ve.return===o)break e;We===Ve&&(We=null),Ve=Ve.return}We===Ve&&(We=null),Ve.sibling.return=Ve.return,Ve=Ve.sibling}}break;case 19:ra(c,o),wa(o),y&4&&bj(o);break;case 21:break;default:ra(c,o),wa(o)}}function wa(o){var c=o.flags;if(c&2){try{e:{for(var h=o.return;h!==null;){if(yj(h)){var y=h;break e}h=h.return}throw Error(r(160))}switch(y.tag){case 5:var S=y.stateNode;y.flags&32&&(bt(S,""),y.flags&=-33);var N=xj(o);Ug(o,N,S);break;case 3:case 4:var O=y.stateNode.containerInfo,W=xj(o);zg(o,W,O);break;default:throw Error(r(161))}}catch(te){cn(o,o.return,te)}o.flags&=-3}c&4096&&(o.flags&=-4097)}function WT(o,c,h){it=o,jj(o)}function jj(o,c,h){for(var y=(o.mode&1)!==0;it!==null;){var S=it,N=S.child;if(S.tag===22&&y){var O=S.memoizedState!==null||Ff;if(!O){var W=S.alternate,te=W!==null&&W.memoizedState!==null||Es;W=Ff;var we=Es;if(Ff=O,(Es=te)&&!we)for(it=S;it!==null;)O=it,te=O.child,O.tag===22&&O.memoizedState!==null?Nj(S):te!==null?(te.return=O,it=te):Nj(S);for(;N!==null;)it=N,jj(N),N=N.sibling;it=S,Ff=W,Es=we}Sj(o)}else(S.subtreeFlags&8772)!==0&&N!==null?(N.return=S,it=N):Sj(o)}}function Sj(o){for(;it!==null;){var c=it;if((c.flags&8772)!==0){var h=c.alternate;try{if((c.flags&8772)!==0)switch(c.tag){case 0:case 11:case 15:Es||Lf(5,c);break;case 1:var y=c.stateNode;if(c.flags&4&&!Es)if(h===null)y.componentDidMount();else{var S=c.elementType===c.type?h.memoizedProps:ea(c.type,h.memoizedProps);y.componentDidUpdate(S,h.memoizedState,y.__reactInternalSnapshotBeforeUpdate)}var N=c.updateQueue;N!==null&&k1(c,N,y);break;case 3:var O=c.updateQueue;if(O!==null){if(h=null,c.child!==null)switch(c.child.tag){case 5:h=c.child.stateNode;break;case 1:h=c.child.stateNode}k1(c,O,h)}break;case 5:var W=c.stateNode;if(h===null&&c.flags&4){h=W;var te=c.memoizedProps;switch(c.type){case"button":case"input":case"select":case"textarea":te.autoFocus&&h.focus();break;case"img":te.src&&(h.src=te.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(c.memoizedState===null){var we=c.alternate;if(we!==null){var We=we.memoizedState;if(We!==null){var Ve=We.dehydrated;Ve!==null&&Ws(Ve)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(r(163))}Es||c.flags&512&&Lg(c)}catch(Ue){cn(c,c.return,Ue)}}if(c===o){it=null;break}if(h=c.sibling,h!==null){h.return=c.return,it=h;break}it=c.return}}function kj(o){for(;it!==null;){var c=it;if(c===o){it=null;break}var h=c.sibling;if(h!==null){h.return=c.return,it=h;break}it=c.return}}function Nj(o){for(;it!==null;){var c=it;try{switch(c.tag){case 0:case 11:case 15:var h=c.return;try{Lf(4,c)}catch(te){cn(c,h,te)}break;case 1:var y=c.stateNode;if(typeof y.componentDidMount=="function"){var S=c.return;try{y.componentDidMount()}catch(te){cn(c,S,te)}}var N=c.return;try{Lg(c)}catch(te){cn(c,N,te)}break;case 5:var O=c.return;try{Lg(c)}catch(te){cn(c,O,te)}}}catch(te){cn(c,c.return,te)}if(c===o){it=null;break}var W=c.sibling;if(W!==null){W.return=c.return,it=W;break}it=c.return}}var VT=Math.ceil,zf=I.ReactCurrentDispatcher,Bg=I.ReactCurrentOwner,Oi=I.ReactCurrentBatchConfig,fr=0,Xn=null,kn=null,hs=0,li=0,yc=No(0),$n=0,Vu=null,ml=0,Uf=0,Wg=0,qu=null,Gs=null,Vg=0,xc=1/0,qa=null,Bf=!1,qg=null,Oo=null,Wf=!1,Io=null,Vf=0,Hu=0,Hg=null,qf=-1,Hf=0;function $s(){return(fr&6)!==0?nr():qf!==-1?qf:qf=nr()}function To(o){return(o.mode&1)===0?1:(fr&2)!==0&&hs!==0?hs&-hs:CT.transition!==null?(Hf===0&&(Hf=cs()),Hf):(o=Ft,o!==0||(o=window.event,o=o===void 0?16:ds(o.type)),o)}function na(o,c,h,y){if(50<Hu)throw Hu=0,Hg=null,Error(r(185));en(o,h,y),((fr&2)===0||o!==Xn)&&(o===Xn&&((fr&2)===0&&(Uf|=h),$n===4&&Do(o,hs)),Ys(o,y),h===1&&fr===0&&(c.mode&1)===0&&(xc=nr()+500,bf&&Co()))}function Ys(o,c){var h=o.callbackNode;br(o,c);var y=Xt(o,o===Xn?hs:0);if(y===0)h!==null&&_r(h),o.callbackNode=null,o.callbackPriority=0;else if(c=y&-y,o.callbackPriority!==c){if(h!=null&&_r(h),c===1)o.tag===0?_T(Cj.bind(null,o)):f1(Cj.bind(null,o)),jT(function(){(fr&6)===0&&Co()}),h=null;else{switch(Bs(y)){case 1:h=Gr;break;case 4:h=ws;break;case 16:h=Tn;break;case 536870912:h=_e;break;default:h=Tn}h=$j(h,_j.bind(null,o))}o.callbackPriority=c,o.callbackNode=h}}function _j(o,c){if(qf=-1,Hf=0,(fr&6)!==0)throw Error(r(327));var h=o.callbackNode;if(vc()&&o.callbackNode!==h)return null;var y=Xt(o,o===Xn?hs:0);if(y===0)return null;if((y&30)!==0||(y&o.expiredLanes)!==0||c)c=Kf(o,y);else{c=y;var S=fr;fr|=2;var N=Aj();(Xn!==o||hs!==c)&&(qa=null,xc=nr()+500,gl(o,c));do try{KT();break}catch(W){Ej(o,W)}while(!0);ug(),zf.current=N,fr=S,kn!==null?c=0:(Xn=null,hs=0,c=$n)}if(c!==0){if(c===2&&(S=an(o),S!==0&&(y=S,c=Kg(o,S))),c===1)throw h=Vu,gl(o,0),Do(o,y),Ys(o,nr()),h;if(c===6)Do(o,y);else{if(S=o.current.alternate,(y&30)===0&&!qT(S)&&(c=Kf(o,y),c===2&&(N=an(o),N!==0&&(y=N,c=Kg(o,N))),c===1))throw h=Vu,gl(o,0),Do(o,y),Ys(o,nr()),h;switch(o.finishedWork=S,o.finishedLanes=y,c){case 0:case 1:throw Error(r(345));case 2:yl(o,Gs,qa);break;case 3:if(Do(o,y),(y&130023424)===y&&(c=Vg+500-nr(),10<c)){if(Xt(o,0)!==0)break;if(S=o.suspendedLanes,(S&y)!==y){$s(),o.pingedLanes|=o.suspendedLanes&S;break}o.timeoutHandle=Zp(yl.bind(null,o,Gs,qa),c);break}yl(o,Gs,qa);break;case 4:if(Do(o,y),(y&4194240)===y)break;for(c=o.eventTimes,S=-1;0<y;){var O=31-Fe(y);N=1<<O,O=c[O],O>S&&(S=O),y&=~N}if(y=S,y=nr()-y,y=(120>y?120:480>y?480:1080>y?1080:1920>y?1920:3e3>y?3e3:4320>y?4320:1960*VT(y/1960))-y,10<y){o.timeoutHandle=Zp(yl.bind(null,o,Gs,qa),y);break}yl(o,Gs,qa);break;case 5:yl(o,Gs,qa);break;default:throw Error(r(329))}}}return Ys(o,nr()),o.callbackNode===h?_j.bind(null,o):null}function Kg(o,c){var h=qu;return o.current.memoizedState.isDehydrated&&(gl(o,c).flags|=256),o=Kf(o,c),o!==2&&(c=Gs,Gs=h,c!==null&&Gg(c)),o}function Gg(o){Gs===null?Gs=o:Gs.push.apply(Gs,o)}function qT(o){for(var c=o;;){if(c.flags&16384){var h=c.updateQueue;if(h!==null&&(h=h.stores,h!==null))for(var y=0;y<h.length;y++){var S=h[y],N=S.getSnapshot;S=S.value;try{if(!Qi(N(),S))return!1}catch{return!1}}}if(h=c.child,c.subtreeFlags&16384&&h!==null)h.return=c,c=h;else{if(c===o)break;for(;c.sibling===null;){if(c.return===null||c.return===o)return!0;c=c.return}c.sibling.return=c.return,c=c.sibling}}return!0}function Do(o,c){for(c&=~Wg,c&=~Uf,o.suspendedLanes|=c,o.pingedLanes&=~c,o=o.expirationTimes;0<c;){var h=31-Fe(c),y=1<<h;o[h]=-1,c&=~y}}function Cj(o){if((fr&6)!==0)throw Error(r(327));vc();var c=Xt(o,0);if((c&1)===0)return Ys(o,nr()),null;var h=Kf(o,c);if(o.tag!==0&&h===2){var y=an(o);y!==0&&(c=y,h=Kg(o,y))}if(h===1)throw h=Vu,gl(o,0),Do(o,c),Ys(o,nr()),h;if(h===6)throw Error(r(345));return o.finishedWork=o.current.alternate,o.finishedLanes=c,yl(o,Gs,qa),Ys(o,nr()),null}function Yg(o,c){var h=fr;fr|=1;try{return o(c)}finally{fr=h,fr===0&&(xc=nr()+500,bf&&Co())}}function pl(o){Io!==null&&Io.tag===0&&(fr&6)===0&&vc();var c=fr;fr|=1;var h=Oi.transition,y=Ft;try{if(Oi.transition=null,Ft=1,o)return o()}finally{Ft=y,Oi.transition=h,fr=c,(fr&6)===0&&Co()}}function Jg(){li=yc.current,zr(yc)}function gl(o,c){o.finishedWork=null,o.finishedLanes=0;var h=o.timeoutHandle;if(h!==-1&&(o.timeoutHandle=-1,wT(h)),kn!==null)for(h=kn.return;h!==null;){var y=h;switch(ig(y),y.tag){case 1:y=y.type.childContextTypes,y!=null&&xf();break;case 3:mc(),zr(qs),zr(Ns),xg();break;case 5:gg(y);break;case 4:mc();break;case 13:zr(rn);break;case 19:zr(rn);break;case 10:dg(y.type._context);break;case 22:case 23:Jg()}h=h.return}if(Xn=o,kn=o=$o(o.current,null),hs=li=c,$n=0,Vu=null,Wg=Uf=ml=0,Gs=qu=null,dl!==null){for(c=0;c<dl.length;c++)if(h=dl[c],y=h.interleaved,y!==null){h.interleaved=null;var S=y.next,N=h.pending;if(N!==null){var O=N.next;N.next=S,y.next=O}h.pending=y}dl=null}return o}function Ej(o,c){do{var h=kn;try{if(ug(),Pf.current=Df,Of){for(var y=nn.memoizedState;y!==null;){var S=y.queue;S!==null&&(S.pending=null),y=y.next}Of=!1}if(hl=0,Jn=Dn=nn=null,Fu=!1,Lu=0,Bg.current=null,h===null||h.return===null){$n=1,Vu=c,kn=null;break}e:{var N=o,O=h.return,W=h,te=c;if(c=hs,W.flags|=32768,te!==null&&typeof te=="object"&&typeof te.then=="function"){var we=te,We=W,Ve=We.tag;if((We.mode&1)===0&&(Ve===0||Ve===11||Ve===15)){var Ue=We.alternate;Ue?(We.updateQueue=Ue.updateQueue,We.memoizedState=Ue.memoizedState,We.lanes=Ue.lanes):(We.updateQueue=null,We.memoizedState=null)}var et=Z1(O);if(et!==null){et.flags&=-257,ej(et,O,W,N,c),et.mode&1&&Q1(N,we,c),c=et,te=we;var ut=c.updateQueue;if(ut===null){var ht=new Set;ht.add(te),c.updateQueue=ht}else ut.add(te);break e}else{if((c&1)===0){Q1(N,we,c),Xg();break e}te=Error(r(426))}}else if(Jr&&W.mode&1){var yn=Z1(O);if(yn!==null){(yn.flags&65536)===0&&(yn.flags|=256),ej(yn,O,W,N,c),lg(pc(te,W));break e}}N=te=pc(te,W),$n!==4&&($n=2),qu===null?qu=[N]:qu.push(N),N=O;do{switch(N.tag){case 3:N.flags|=65536,c&=-c,N.lanes|=c;var pe=J1(N,te,c);S1(N,pe);break e;case 1:W=te;var oe=N.type,xe=N.stateNode;if((N.flags&128)===0&&(typeof oe.getDerivedStateFromError=="function"||xe!==null&&typeof xe.componentDidCatch=="function"&&(Oo===null||!Oo.has(xe)))){N.flags|=65536,c&=-c,N.lanes|=c;var Ke=X1(N,W,c);S1(N,Ke);break e}}N=N.return}while(N!==null)}Oj(h)}catch(pt){c=pt,kn===h&&h!==null&&(kn=h=h.return);continue}break}while(!0)}function Aj(){var o=zf.current;return zf.current=Df,o===null?Df:o}function Xg(){($n===0||$n===3||$n===2)&&($n=4),Xn===null||(ml&268435455)===0&&(Uf&268435455)===0||Do(Xn,hs)}function Kf(o,c){var h=fr;fr|=2;var y=Aj();(Xn!==o||hs!==c)&&(qa=null,gl(o,c));do try{HT();break}catch(S){Ej(o,S)}while(!0);if(ug(),fr=h,zf.current=y,kn!==null)throw Error(r(261));return Xn=null,hs=0,$n}function HT(){for(;kn!==null;)Pj(kn)}function KT(){for(;kn!==null&&!fn();)Pj(kn)}function Pj(o){var c=Dj(o.alternate,o,li);o.memoizedProps=o.pendingProps,c===null?Oj(o):kn=c,Bg.current=null}function Oj(o){var c=o;do{var h=c.alternate;if(o=c.return,(c.flags&32768)===0){if(h=LT(h,c,li),h!==null){kn=h;return}}else{if(h=zT(h,c),h!==null){h.flags&=32767,kn=h;return}if(o!==null)o.flags|=32768,o.subtreeFlags=0,o.deletions=null;else{$n=6,kn=null;return}}if(c=c.sibling,c!==null){kn=c;return}kn=c=o}while(c!==null);$n===0&&($n=5)}function yl(o,c,h){var y=Ft,S=Oi.transition;try{Oi.transition=null,Ft=1,GT(o,c,h,y)}finally{Oi.transition=S,Ft=y}return null}function GT(o,c,h,y){do vc();while(Io!==null);if((fr&6)!==0)throw Error(r(327));h=o.finishedWork;var S=o.finishedLanes;if(h===null)return null;if(o.finishedWork=null,o.finishedLanes=0,h===o.current)throw Error(r(177));o.callbackNode=null,o.callbackPriority=0;var N=h.lanes|h.childLanes;if(xr(o,N),o===Xn&&(kn=Xn=null,hs=0),(h.subtreeFlags&2064)===0&&(h.flags&2064)===0||Wf||(Wf=!0,$j(Tn,function(){return vc(),null})),N=(h.flags&15990)!==0,(h.subtreeFlags&15990)!==0||N){N=Oi.transition,Oi.transition=null;var O=Ft;Ft=1;var W=fr;fr|=4,Bg.current=null,BT(o,h),wj(h,o),mT(Xp),ki=!!Jp,Xp=Jp=null,o.current=h,WT(h),Cr(),fr=W,Ft=O,Oi.transition=N}else o.current=h;if(Wf&&(Wf=!1,Io=o,Vf=S),N=o.pendingLanes,N===0&&(Oo=null),Xe(h.stateNode),Ys(o,nr()),c!==null)for(y=o.onRecoverableError,h=0;h<c.length;h++)S=c[h],y(S.value,{componentStack:S.stack,digest:S.digest});if(Bf)throw Bf=!1,o=qg,qg=null,o;return(Vf&1)!==0&&o.tag!==0&&vc(),N=o.pendingLanes,(N&1)!==0?o===Hg?Hu++:(Hu=0,Hg=o):Hu=0,Co(),null}function vc(){if(Io!==null){var o=Bs(Vf),c=Oi.transition,h=Ft;try{if(Oi.transition=null,Ft=16>o?16:o,Io===null)var y=!1;else{if(o=Io,Io=null,Vf=0,(fr&6)!==0)throw Error(r(331));var S=fr;for(fr|=4,it=o.current;it!==null;){var N=it,O=N.child;if((it.flags&16)!==0){var W=N.deletions;if(W!==null){for(var te=0;te<W.length;te++){var we=W[te];for(it=we;it!==null;){var We=it;switch(We.tag){case 0:case 11:case 15:Wu(8,We,N)}var Ve=We.child;if(Ve!==null)Ve.return=We,it=Ve;else for(;it!==null;){We=it;var Ue=We.sibling,et=We.return;if(gj(We),We===we){it=null;break}if(Ue!==null){Ue.return=et,it=Ue;break}it=et}}}var ut=N.alternate;if(ut!==null){var ht=ut.child;if(ht!==null){ut.child=null;do{var yn=ht.sibling;ht.sibling=null,ht=yn}while(ht!==null)}}it=N}}if((N.subtreeFlags&2064)!==0&&O!==null)O.return=N,it=O;else e:for(;it!==null;){if(N=it,(N.flags&2048)!==0)switch(N.tag){case 0:case 11:case 15:Wu(9,N,N.return)}var pe=N.sibling;if(pe!==null){pe.return=N.return,it=pe;break e}it=N.return}}var oe=o.current;for(it=oe;it!==null;){O=it;var xe=O.child;if((O.subtreeFlags&2064)!==0&&xe!==null)xe.return=O,it=xe;else e:for(O=oe;it!==null;){if(W=it,(W.flags&2048)!==0)try{switch(W.tag){case 0:case 11:case 15:Lf(9,W)}}catch(pt){cn(W,W.return,pt)}if(W===O){it=null;break e}var Ke=W.sibling;if(Ke!==null){Ke.return=W.return,it=Ke;break e}it=W.return}}if(fr=S,Co(),ze&&typeof ze.onPostCommitFiberRoot=="function")try{ze.onPostCommitFiberRoot($e,o)}catch{}y=!0}return y}finally{Ft=h,Oi.transition=c}}return!1}function Ij(o,c,h){c=pc(h,c),c=J1(o,c,1),o=Ao(o,c,1),c=$s(),o!==null&&(en(o,1,c),Ys(o,c))}function cn(o,c,h){if(o.tag===3)Ij(o,o,h);else for(;c!==null;){if(c.tag===3){Ij(c,o,h);break}else if(c.tag===1){var y=c.stateNode;if(typeof c.type.getDerivedStateFromError=="function"||typeof y.componentDidCatch=="function"&&(Oo===null||!Oo.has(y))){o=pc(h,o),o=X1(c,o,1),c=Ao(c,o,1),o=$s(),c!==null&&(en(c,1,o),Ys(c,o));break}}c=c.return}}function YT(o,c,h){var y=o.pingCache;y!==null&&y.delete(c),c=$s(),o.pingedLanes|=o.suspendedLanes&h,Xn===o&&(hs&h)===h&&($n===4||$n===3&&(hs&130023424)===hs&&500>nr()-Vg?gl(o,0):Wg|=h),Ys(o,c)}function Tj(o,c){c===0&&((o.mode&1)===0?c=1:(c=Je,Je<<=1,(Je&130023424)===0&&(Je=4194304)));var h=$s();o=Ba(o,c),o!==null&&(en(o,c,h),Ys(o,h))}function JT(o){var c=o.memoizedState,h=0;c!==null&&(h=c.retryLane),Tj(o,h)}function XT(o,c){var h=0;switch(o.tag){case 13:var y=o.stateNode,S=o.memoizedState;S!==null&&(h=S.retryLane);break;case 19:y=o.stateNode;break;default:throw Error(r(314))}y!==null&&y.delete(c),Tj(o,h)}var Dj;Dj=function(o,c,h){if(o!==null)if(o.memoizedProps!==c.pendingProps||qs.current)Ks=!0;else{if((o.lanes&h)===0&&(c.flags&128)===0)return Ks=!1,FT(o,c,h);Ks=(o.flags&131072)!==0}else Ks=!1,Jr&&(c.flags&1048576)!==0&&h1(c,jf,c.index);switch(c.lanes=0,c.tag){case 2:var y=c.type;Mf(o,c),o=c.pendingProps;var S=oc(c,Ns.current);hc(c,h),S=wg(null,c,y,o,S,h);var N=jg();return c.flags|=1,typeof S=="object"&&S!==null&&typeof S.render=="function"&&S.$$typeof===void 0?(c.tag=1,c.memoizedState=null,c.updateQueue=null,Hs(y)?(N=!0,vf(c)):N=!1,c.memoizedState=S.state!==null&&S.state!==void 0?S.state:null,mg(c),S.updater=$f,c.stateNode=S,S._reactInternals=c,Eg(c,y,o,h),c=Ig(null,c,y,!0,N,h)):(c.tag=0,Jr&&N&&sg(c),Ds(null,c,S,h),c=c.child),c;case 16:y=c.elementType;e:{switch(Mf(o,c),o=c.pendingProps,S=y._init,y=S(y._payload),c.type=y,S=c.tag=ZT(y),o=ea(y,o),S){case 0:c=Og(null,c,y,o,h);break e;case 1:c=aj(null,c,y,o,h);break e;case 11:c=tj(null,c,y,o,h);break e;case 14:c=rj(null,c,y,ea(y.type,o),h);break e}throw Error(r(306,y,""))}return c;case 0:return y=c.type,S=c.pendingProps,S=c.elementType===y?S:ea(y,S),Og(o,c,y,S,h);case 1:return y=c.type,S=c.pendingProps,S=c.elementType===y?S:ea(y,S),aj(o,c,y,S,h);case 3:e:{if(oj(c),o===null)throw Error(r(387));y=c.pendingProps,N=c.memoizedState,S=N.element,j1(o,c),Ef(c,y,null,h);var O=c.memoizedState;if(y=O.element,N.isDehydrated)if(N={element:y,isDehydrated:!1,cache:O.cache,pendingSuspenseBoundaries:O.pendingSuspenseBoundaries,transitions:O.transitions},c.updateQueue.baseState=N,c.memoizedState=N,c.flags&256){S=pc(Error(r(423)),c),c=lj(o,c,y,h,S);break e}else if(y!==S){S=pc(Error(r(424)),c),c=lj(o,c,y,h,S);break e}else for(oi=ko(c.stateNode.containerInfo.firstChild),ai=c,Jr=!0,Zi=null,h=b1(c,null,y,h),c.child=h;h;)h.flags=h.flags&-3|4096,h=h.sibling;else{if(uc(),y===S){c=Va(o,c,h);break e}Ds(o,c,y,h)}c=c.child}return c;case 5:return N1(c),o===null&&og(c),y=c.type,S=c.pendingProps,N=o!==null?o.memoizedProps:null,O=S.children,Qp(y,S)?O=null:N!==null&&Qp(y,N)&&(c.flags|=32),ij(o,c),Ds(o,c,O,h),c.child;case 6:return o===null&&og(c),null;case 13:return cj(o,c,h);case 4:return pg(c,c.stateNode.containerInfo),y=c.pendingProps,o===null?c.child=dc(c,null,y,h):Ds(o,c,y,h),c.child;case 11:return y=c.type,S=c.pendingProps,S=c.elementType===y?S:ea(y,S),tj(o,c,y,S,h);case 7:return Ds(o,c,c.pendingProps,h),c.child;case 8:return Ds(o,c,c.pendingProps.children,h),c.child;case 12:return Ds(o,c,c.pendingProps.children,h),c.child;case 10:e:{if(y=c.type._context,S=c.pendingProps,N=c.memoizedProps,O=S.value,Tr(Nf,y._currentValue),y._currentValue=O,N!==null)if(Qi(N.value,O)){if(N.children===S.children&&!qs.current){c=Va(o,c,h);break e}}else for(N=c.child,N!==null&&(N.return=c);N!==null;){var W=N.dependencies;if(W!==null){O=N.child;for(var te=W.firstContext;te!==null;){if(te.context===y){if(N.tag===1){te=Wa(-1,h&-h),te.tag=2;var we=N.updateQueue;if(we!==null){we=we.shared;var We=we.pending;We===null?te.next=te:(te.next=We.next,We.next=te),we.pending=te}}N.lanes|=h,te=N.alternate,te!==null&&(te.lanes|=h),fg(N.return,h,c),W.lanes|=h;break}te=te.next}}else if(N.tag===10)O=N.type===c.type?null:N.child;else if(N.tag===18){if(O=N.return,O===null)throw Error(r(341));O.lanes|=h,W=O.alternate,W!==null&&(W.lanes|=h),fg(O,h,c),O=N.sibling}else O=N.child;if(O!==null)O.return=N;else for(O=N;O!==null;){if(O===c){O=null;break}if(N=O.sibling,N!==null){N.return=O.return,O=N;break}O=O.return}N=O}Ds(o,c,S.children,h),c=c.child}return c;case 9:return S=c.type,y=c.pendingProps.children,hc(c,h),S=Ai(S),y=y(S),c.flags|=1,Ds(o,c,y,h),c.child;case 14:return y=c.type,S=ea(y,c.pendingProps),S=ea(y.type,S),rj(o,c,y,S,h);case 15:return nj(o,c,c.type,c.pendingProps,h);case 17:return y=c.type,S=c.pendingProps,S=c.elementType===y?S:ea(y,S),Mf(o,c),c.tag=1,Hs(y)?(o=!0,vf(c)):o=!1,hc(c,h),G1(c,y,S),Eg(c,y,S,h),Ig(null,c,y,!0,o,h);case 19:return dj(o,c,h);case 22:return sj(o,c,h)}throw Error(r(156,c.tag))};function $j(o,c){return Us(o,c)}function QT(o,c,h,y){this.tag=o,this.key=h,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=c,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=y,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ii(o,c,h,y){return new QT(o,c,h,y)}function Qg(o){return o=o.prototype,!(!o||!o.isReactComponent)}function ZT(o){if(typeof o=="function")return Qg(o)?1:0;if(o!=null){if(o=o.$$typeof,o===G)return 11;if(o===Y)return 14}return 2}function $o(o,c){var h=o.alternate;return h===null?(h=Ii(o.tag,c,o.key,o.mode),h.elementType=o.elementType,h.type=o.type,h.stateNode=o.stateNode,h.alternate=o,o.alternate=h):(h.pendingProps=c,h.type=o.type,h.flags=0,h.subtreeFlags=0,h.deletions=null),h.flags=o.flags&14680064,h.childLanes=o.childLanes,h.lanes=o.lanes,h.child=o.child,h.memoizedProps=o.memoizedProps,h.memoizedState=o.memoizedState,h.updateQueue=o.updateQueue,c=o.dependencies,h.dependencies=c===null?null:{lanes:c.lanes,firstContext:c.firstContext},h.sibling=o.sibling,h.index=o.index,h.ref=o.ref,h}function Gf(o,c,h,y,S,N){var O=2;if(y=o,typeof o=="function")Qg(o)&&(O=1);else if(typeof o=="string")O=5;else e:switch(o){case B:return xl(h.children,S,N,c);case T:O=8,S|=8;break;case K:return o=Ii(12,h,c,S|2),o.elementType=K,o.lanes=N,o;case le:return o=Ii(13,h,c,S),o.elementType=le,o.lanes=N,o;case F:return o=Ii(19,h,c,S),o.elementType=F,o.lanes=N,o;case V:return Yf(h,S,N,c);default:if(typeof o=="object"&&o!==null)switch(o.$$typeof){case Q:O=10;break e;case se:O=9;break e;case G:O=11;break e;case Y:O=14;break e;case J:O=16,y=null;break e}throw Error(r(130,o==null?o:typeof o,""))}return c=Ii(O,h,c,S),c.elementType=o,c.type=y,c.lanes=N,c}function xl(o,c,h,y){return o=Ii(7,o,y,c),o.lanes=h,o}function Yf(o,c,h,y){return o=Ii(22,o,y,c),o.elementType=V,o.lanes=h,o.stateNode={isHidden:!1},o}function Zg(o,c,h){return o=Ii(6,o,null,c),o.lanes=h,o}function ey(o,c,h){return c=Ii(4,o.children!==null?o.children:[],o.key,c),c.lanes=h,c.stateNode={containerInfo:o.containerInfo,pendingChildren:null,implementation:o.implementation},c}function eD(o,c,h,y,S){this.tag=c,this.containerInfo=o,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=ar(0),this.expirationTimes=ar(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ar(0),this.identifierPrefix=y,this.onRecoverableError=S,this.mutableSourceEagerHydrationData=null}function ty(o,c,h,y,S,N,O,W,te){return o=new eD(o,c,h,W,te),c===1?(c=1,N===!0&&(c|=8)):c=0,N=Ii(3,null,null,c),o.current=N,N.stateNode=o,N.memoizedState={element:y,isDehydrated:h,cache:null,transitions:null,pendingSuspenseBoundaries:null},mg(N),o}function tD(o,c,h){var y=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:$,key:y==null?null:""+y,children:o,containerInfo:c,implementation:h}}function Rj(o){if(!o)return _o;o=o._reactInternals;e:{if(Ir(o)!==o||o.tag!==1)throw Error(r(170));var c=o;do{switch(c.tag){case 3:c=c.stateNode.context;break e;case 1:if(Hs(c.type)){c=c.stateNode.__reactInternalMemoizedMergedChildContext;break e}}c=c.return}while(c!==null);throw Error(r(171))}if(o.tag===1){var h=o.type;if(Hs(h))return u1(o,h,c)}return c}function Mj(o,c,h,y,S,N,O,W,te){return o=ty(h,y,!0,o,S,N,O,W,te),o.context=Rj(null),h=o.current,y=$s(),S=To(h),N=Wa(y,S),N.callback=c??null,Ao(h,N,S),o.current.lanes=S,en(o,S,y),Ys(o,y),o}function Jf(o,c,h,y){var S=c.current,N=$s(),O=To(S);return h=Rj(h),c.context===null?c.context=h:c.pendingContext=h,c=Wa(N,O),c.payload={element:o},y=y===void 0?null:y,y!==null&&(c.callback=y),o=Ao(S,c,O),o!==null&&(na(o,S,O,N),Cf(o,S,O)),O}function Xf(o){if(o=o.current,!o.child)return null;switch(o.child.tag){case 5:return o.child.stateNode;default:return o.child.stateNode}}function Fj(o,c){if(o=o.memoizedState,o!==null&&o.dehydrated!==null){var h=o.retryLane;o.retryLane=h!==0&&h<c?h:c}}function ry(o,c){Fj(o,c),(o=o.alternate)&&Fj(o,c)}function rD(){return null}var Lj=typeof reportError=="function"?reportError:function(o){console.error(o)};function ny(o){this._internalRoot=o}Qf.prototype.render=ny.prototype.render=function(o){var c=this._internalRoot;if(c===null)throw Error(r(409));Jf(o,c,null,null)},Qf.prototype.unmount=ny.prototype.unmount=function(){var o=this._internalRoot;if(o!==null){this._internalRoot=null;var c=o.containerInfo;pl(function(){Jf(null,o,null,null)}),c[Fa]=null}};function Qf(o){this._internalRoot=o}Qf.prototype.unstable_scheduleHydration=function(o){if(o){var c=Ki();o={blockedOn:null,target:o,priority:c};for(var h=0;h<on.length&&c!==0&&c<on[h].priority;h++);on.splice(h,0,o),h===0&&wo(o)}};function sy(o){return!(!o||o.nodeType!==1&&o.nodeType!==9&&o.nodeType!==11)}function Zf(o){return!(!o||o.nodeType!==1&&o.nodeType!==9&&o.nodeType!==11&&(o.nodeType!==8||o.nodeValue!==" react-mount-point-unstable "))}function zj(){}function nD(o,c,h,y,S){if(S){if(typeof y=="function"){var N=y;y=function(){var we=Xf(O);N.call(we)}}var O=Mj(c,y,o,0,null,!1,!1,"",zj);return o._reactRootContainer=O,o[Fa]=O.current,Pu(o.nodeType===8?o.parentNode:o),pl(),O}for(;S=o.lastChild;)o.removeChild(S);if(typeof y=="function"){var W=y;y=function(){var we=Xf(te);W.call(we)}}var te=ty(o,0,!1,null,null,!1,!1,"",zj);return o._reactRootContainer=te,o[Fa]=te.current,Pu(o.nodeType===8?o.parentNode:o),pl(function(){Jf(c,te,h,y)}),te}function eh(o,c,h,y,S){var N=h._reactRootContainer;if(N){var O=N;if(typeof S=="function"){var W=S;S=function(){var te=Xf(O);W.call(te)}}Jf(c,O,o,S)}else O=nD(h,c,o,S,y);return Xf(O)}si=function(o){switch(o.tag){case 3:var c=o.stateNode;if(c.current.memoizedState.isDehydrated){var h=Jt(c.pendingLanes);h!==0&&(qi(c,h|1),Ys(c,nr()),(fr&6)===0&&(xc=nr()+500,Co()))}break;case 13:pl(function(){var y=Ba(o,1);if(y!==null){var S=$s();na(y,o,1,S)}}),ry(o,1)}},hn=function(o){if(o.tag===13){var c=Ba(o,134217728);if(c!==null){var h=$s();na(c,o,134217728,h)}ry(o,134217728)}},Hi=function(o){if(o.tag===13){var c=To(o),h=Ba(o,c);if(h!==null){var y=$s();na(h,o,c,y)}ry(o,c)}},Ki=function(){return Ft},js=function(o,c){var h=Ft;try{return Ft=o,c()}finally{Ft=h}},tt=function(o,c,h){switch(c){case"input":if(vt(o,h),c=h.name,h.type==="radio"&&c!=null){for(h=o;h.parentNode;)h=h.parentNode;for(h=h.querySelectorAll("input[name="+JSON.stringify(""+c)+'][type="radio"]'),c=0;c<h.length;c++){var y=h[c];if(y!==o&&y.form===o.form){var S=yf(y);if(!S)throw Error(r(90));ee(y),vt(y,S)}}}break;case"textarea":Ie(o,h);break;case"select":c=h.value,c!=null&&q(o,!!h.multiple,c,!1)}},Mr=Yg,Zt=pl;var sD={usingClientEntryPoint:!1,Events:[Tu,ic,yf,Qt,sr,Yg]},Ku={findFiberByHostInstance:ol,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},iD={bundleType:Ku.bundleType,version:Ku.version,rendererPackageName:Ku.rendererPackageName,rendererConfig:Ku.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:I.ReactCurrentDispatcher,findHostInstanceByFiber:function(o){return o=sn(o),o===null?null:o.stateNode},findFiberByHostInstance:Ku.findFiberByHostInstance||rD,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var th=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!th.isDisabled&&th.supportsFiber)try{$e=th.inject(iD),ze=th}catch{}}return Js.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=sD,Js.createPortal=function(o,c){var h=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!sy(c))throw Error(r(200));return tD(o,c,null,h)},Js.createRoot=function(o,c){if(!sy(o))throw Error(r(299));var h=!1,y="",S=Lj;return c!=null&&(c.unstable_strictMode===!0&&(h=!0),c.identifierPrefix!==void 0&&(y=c.identifierPrefix),c.onRecoverableError!==void 0&&(S=c.onRecoverableError)),c=ty(o,1,!1,null,null,h,!1,y,S),o[Fa]=c.current,Pu(o.nodeType===8?o.parentNode:o),new ny(c)},Js.findDOMNode=function(o){if(o==null)return null;if(o.nodeType===1)return o;var c=o._reactInternals;if(c===void 0)throw typeof o.render=="function"?Error(r(188)):(o=Object.keys(o).join(","),Error(r(268,o)));return o=sn(c),o=o===null?null:o.stateNode,o},Js.flushSync=function(o){return pl(o)},Js.hydrate=function(o,c,h){if(!Zf(c))throw Error(r(200));return eh(null,o,c,!0,h)},Js.hydrateRoot=function(o,c,h){if(!sy(o))throw Error(r(405));var y=h!=null&&h.hydratedSources||null,S=!1,N="",O=Lj;if(h!=null&&(h.unstable_strictMode===!0&&(S=!0),h.identifierPrefix!==void 0&&(N=h.identifierPrefix),h.onRecoverableError!==void 0&&(O=h.onRecoverableError)),c=Mj(c,null,o,1,h??null,S,!1,N,O),o[Fa]=c.current,Pu(o),y)for(o=0;o<y.length;o++)h=y[o],S=h._getVersion,S=S(h._source),c.mutableSourceEagerHydrationData==null?c.mutableSourceEagerHydrationData=[h,S]:c.mutableSourceEagerHydrationData.push(h,S);return new Qf(c)},Js.render=function(o,c,h){if(!Zf(c))throw Error(r(200));return eh(null,o,c,!1,h)},Js.unmountComponentAtNode=function(o){if(!Zf(o))throw Error(r(40));return o._reactRootContainer?(pl(function(){eh(null,null,o,!1,function(){o._reactRootContainer=null,o[Fa]=null})}),!0):!1},Js.unstable_batchedUpdates=Yg,Js.unstable_renderSubtreeIntoContainer=function(o,c,h,y){if(!Zf(h))throw Error(r(200));if(o==null||o._reactInternals===void 0)throw Error(r(38));return eh(o,c,h,!1,y)},Js.version="18.3.1-next-f1338f8080-20240426",Js}var Gj;function BC(){if(Gj)return ly.exports;Gj=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),ly.exports=yD(),ly.exports}var Yj;function xD(){if(Yj)return rh;Yj=1;var e=BC();return rh.createRoot=e.createRoot,rh.hydrateRoot=e.hydrateRoot,rh}var vD=xD();const bD=pa(vD);/**
 * react-router v7.9.4
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var Jj="popstate";function wD(e={}){function t(n,s){let{pathname:a,search:l,hash:u}=n.location;return ax("",{pathname:a,search:l,hash:u},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function r(n,s){return typeof s=="string"?s:kd(s)}return SD(t,r,null,e)}function Zr(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function Mi(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function jD(){return Math.random().toString(36).substring(2,10)}function Xj(e,t){return{usr:e.state,key:e.key,idx:t}}function ax(e,t,r=null,n){return{pathname:typeof e=="string"?e:e.pathname,search:"",hash:"",...typeof t=="string"?au(t):t,state:r,key:t&&t.key||n||jD()}}function kd({pathname:e="/",search:t="",hash:r=""}){return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function au(e){let t={};if(e){let r=e.indexOf("#");r>=0&&(t.hash=e.substring(r),e=e.substring(0,r));let n=e.indexOf("?");n>=0&&(t.search=e.substring(n),e=e.substring(0,n)),e&&(t.pathname=e)}return t}function SD(e,t,r,n={}){let{window:s=document.defaultView,v5Compat:a=!1}=n,l=s.history,u="POP",d=null,m=f();m==null&&(m=0,l.replaceState({...l.state,idx:m},""));function f(){return(l.state||{idx:null}).idx}function p(){u="POP";let j=f(),_=j==null?null:j-m;m=j,d&&d({action:u,location:w.location,delta:_})}function x(j,_){u="PUSH";let E=ax(w.location,j,_);m=f()+1;let C=Xj(E,m),I=w.createHref(E);try{l.pushState(C,"",I)}catch(A){if(A instanceof DOMException&&A.name==="DataCloneError")throw A;s.location.assign(I)}a&&d&&d({action:u,location:w.location,delta:1})}function v(j,_){u="REPLACE";let E=ax(w.location,j,_);m=f();let C=Xj(E,m),I=w.createHref(E);l.replaceState(C,"",I),a&&d&&d({action:u,location:w.location,delta:0})}function b(j){return kD(j)}let w={get action(){return u},get location(){return e(s,l)},listen(j){if(d)throw new Error("A history only accepts one active listener");return s.addEventListener(Jj,p),d=j,()=>{s.removeEventListener(Jj,p),d=null}},createHref(j){return t(s,j)},createURL:b,encodeLocation(j){let _=b(j);return{pathname:_.pathname,search:_.search,hash:_.hash}},push:x,replace:v,go(j){return l.go(j)}};return w}function kD(e,t=!1){let r="http://localhost";typeof window<"u"&&(r=window.location.origin!=="null"?window.location.origin:window.location.href),Zr(r,"No window.location.(origin|href) available to create URL");let n=typeof e=="string"?e:kd(e);return n=n.replace(/ $/,"%20"),!t&&n.startsWith("//")&&(n=r+n),new URL(n,r)}function WC(e,t,r="/"){return ND(e,t,r,!1)}function ND(e,t,r,n){let s=typeof t=="string"?au(t):t,a=no(s.pathname||"/",r);if(a==null)return null;let l=VC(e);_D(l);let u=null;for(let d=0;u==null&&d<l.length;++d){let m=MD(a);u=$D(l[d],m,n)}return u}function VC(e,t=[],r=[],n="",s=!1){let a=(l,u,d=s,m)=>{let f={relativePath:m===void 0?l.path||"":m,caseSensitive:l.caseSensitive===!0,childrenIndex:u,route:l};if(f.relativePath.startsWith("/")){if(!f.relativePath.startsWith(n)&&d)return;Zr(f.relativePath.startsWith(n),`Absolute route path "${f.relativePath}" nested under path "${n}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),f.relativePath=f.relativePath.slice(n.length)}let p=Za([n,f.relativePath]),x=r.concat(f);l.children&&l.children.length>0&&(Zr(l.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${p}".`),VC(l.children,t,x,p,d)),!(l.path==null&&!l.index)&&t.push({path:p,score:TD(p,l.index),routesMeta:x})};return e.forEach((l,u)=>{var d;if(l.path===""||!((d=l.path)!=null&&d.includes("?")))a(l,u);else for(let m of qC(l.path))a(l,u,!0,m)}),t}function qC(e){let t=e.split("/");if(t.length===0)return[];let[r,...n]=t,s=r.endsWith("?"),a=r.replace(/\?$/,"");if(n.length===0)return s?[a,""]:[a];let l=qC(n.join("/")),u=[];return u.push(...l.map(d=>d===""?a:[a,d].join("/"))),s&&u.push(...l),u.map(d=>e.startsWith("/")&&d===""?"/":d)}function _D(e){e.sort((t,r)=>t.score!==r.score?r.score-t.score:DD(t.routesMeta.map(n=>n.childrenIndex),r.routesMeta.map(n=>n.childrenIndex)))}var CD=/^:[\w-]+$/,ED=3,AD=2,PD=1,OD=10,ID=-2,Qj=e=>e==="*";function TD(e,t){let r=e.split("/"),n=r.length;return r.some(Qj)&&(n+=ID),t&&(n+=AD),r.filter(s=>!Qj(s)).reduce((s,a)=>s+(CD.test(a)?ED:a===""?PD:OD),n)}function DD(e,t){return e.length===t.length&&e.slice(0,-1).every((n,s)=>n===t[s])?e[e.length-1]-t[t.length-1]:0}function $D(e,t,r=!1){let{routesMeta:n}=e,s={},a="/",l=[];for(let u=0;u<n.length;++u){let d=n[u],m=u===n.length-1,f=a==="/"?t:t.slice(a.length)||"/",p=Mh({path:d.relativePath,caseSensitive:d.caseSensitive,end:m},f),x=d.route;if(!p&&m&&r&&!n[n.length-1].route.index&&(p=Mh({path:d.relativePath,caseSensitive:d.caseSensitive,end:!1},f)),!p)return null;Object.assign(s,p.params),l.push({params:s,pathname:Za([a,p.pathname]),pathnameBase:UD(Za([a,p.pathnameBase])),route:x}),p.pathnameBase!=="/"&&(a=Za([a,p.pathnameBase]))}return l}function Mh(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[r,n]=RD(e.path,e.caseSensitive,e.end),s=t.match(r);if(!s)return null;let a=s[0],l=a.replace(/(.)\/+$/,"$1"),u=s.slice(1);return{params:n.reduce((m,{paramName:f,isOptional:p},x)=>{if(f==="*"){let b=u[x]||"";l=a.slice(0,a.length-b.length).replace(/(.)\/+$/,"$1")}const v=u[x];return p&&!v?m[f]=void 0:m[f]=(v||"").replace(/%2F/g,"/"),m},{}),pathname:a,pathnameBase:l,pattern:e}}function RD(e,t=!1,r=!0){Mi(e==="*"||!e.endsWith("*")||e.endsWith("/*"),`Route path "${e}" will be treated as if it were "${e.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${e.replace(/\*$/,"/*")}".`);let n=[],s="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(l,u,d)=>(n.push({paramName:u,isOptional:d!=null}),d?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return e.endsWith("*")?(n.push({paramName:"*"}),s+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?s+="\\/*$":e!==""&&e!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,t?void 0:"i"),n]}function MD(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return Mi(!1,`The URL path "${e}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${t}).`),e}}function no(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let r=t.endsWith("/")?t.length-1:t.length,n=e.charAt(r);return n&&n!=="/"?null:e.slice(r)||"/"}function FD(e,t="/"){let{pathname:r,search:n="",hash:s=""}=typeof e=="string"?au(e):e;return{pathname:r?r.startsWith("/")?r:LD(r,t):t,search:BD(n),hash:WD(s)}}function LD(e,t){let r=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(s=>{s===".."?r.length>1&&r.pop():s!=="."&&r.push(s)}),r.length>1?r.join("/"):"/"}function dy(e,t,r,n){return`Cannot include a '${e}' character in a manually specified \`to.${t}\` field [${JSON.stringify(n)}].  Please separate it out to the \`to.${r}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function zD(e){return e.filter((t,r)=>r===0||t.route.path&&t.route.path.length>0)}function Pv(e){let t=zD(e);return t.map((r,n)=>n===t.length-1?r.pathname:r.pathnameBase)}function Ov(e,t,r,n=!1){let s;typeof e=="string"?s=au(e):(s={...e},Zr(!s.pathname||!s.pathname.includes("?"),dy("?","pathname","search",s)),Zr(!s.pathname||!s.pathname.includes("#"),dy("#","pathname","hash",s)),Zr(!s.search||!s.search.includes("#"),dy("#","search","hash",s)));let a=e===""||s.pathname==="",l=a?"/":s.pathname,u;if(l==null)u=r;else{let p=t.length-1;if(!n&&l.startsWith("..")){let x=l.split("/");for(;x[0]==="..";)x.shift(),p-=1;s.pathname=x.join("/")}u=p>=0?t[p]:"/"}let d=FD(s,u),m=l&&l!=="/"&&l.endsWith("/"),f=(a||l===".")&&r.endsWith("/");return!d.pathname.endsWith("/")&&(m||f)&&(d.pathname+="/"),d}var Za=e=>e.join("/").replace(/\/\/+/g,"/"),UD=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),BD=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,WD=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function VD(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}var HC=["POST","PUT","PATCH","DELETE"];new Set(HC);var qD=["GET",...HC];new Set(qD);var ou=g.createContext(null);ou.displayName="DataRouter";var Um=g.createContext(null);Um.displayName="DataRouterState";g.createContext(!1);var KC=g.createContext({isTransitioning:!1});KC.displayName="ViewTransition";var HD=g.createContext(new Map);HD.displayName="Fetchers";var KD=g.createContext(null);KD.displayName="Await";var ga=g.createContext(null);ga.displayName="Navigation";var Ud=g.createContext(null);Ud.displayName="Location";var Ia=g.createContext({outlet:null,matches:[],isDataRoute:!1});Ia.displayName="Route";var Iv=g.createContext(null);Iv.displayName="RouteError";function GD(e,{relative:t}={}){Zr(lu(),"useHref() may be used only in the context of a <Router> component.");let{basename:r,navigator:n}=g.useContext(ga),{hash:s,pathname:a,search:l}=Bd(e,{relative:t}),u=a;return r!=="/"&&(u=a==="/"?r:Za([r,a])),n.createHref({pathname:u,search:l,hash:s})}function lu(){return g.useContext(Ud)!=null}function mo(){return Zr(lu(),"useLocation() may be used only in the context of a <Router> component."),g.useContext(Ud).location}var GC="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function YC(e){g.useContext(ga).static||g.useLayoutEffect(e)}function ri(){let{isDataRoute:e}=g.useContext(Ia);return e?o5():YD()}function YD(){Zr(lu(),"useNavigate() may be used only in the context of a <Router> component.");let e=g.useContext(ou),{basename:t,navigator:r}=g.useContext(ga),{matches:n}=g.useContext(Ia),{pathname:s}=mo(),a=JSON.stringify(Pv(n)),l=g.useRef(!1);return YC(()=>{l.current=!0}),g.useCallback((d,m={})=>{if(Mi(l.current,GC),!l.current)return;if(typeof d=="number"){r.go(d);return}let f=Ov(d,JSON.parse(a),s,m.relative==="path");e==null&&t!=="/"&&(f.pathname=f.pathname==="/"?t:Za([t,f.pathname])),(m.replace?r.replace:r.push)(f,m.state,m)},[t,r,a,s,e])}g.createContext(null);function Bd(e,{relative:t}={}){let{matches:r}=g.useContext(Ia),{pathname:n}=mo(),s=JSON.stringify(Pv(r));return g.useMemo(()=>Ov(e,JSON.parse(s),n,t==="path"),[e,s,n,t])}function JD(e,t){return JC(e,t)}function JC(e,t,r,n,s){var E;Zr(lu(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:a}=g.useContext(ga),{matches:l}=g.useContext(Ia),u=l[l.length-1],d=u?u.params:{},m=u?u.pathname:"/",f=u?u.pathnameBase:"/",p=u&&u.route;{let C=p&&p.path||"";XC(m,!p||C.endsWith("*")||C.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${m}" (under <Route path="${C}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${C}"> to <Route path="${C==="/"?"*":`${C}/*`}">.`)}let x=mo(),v;if(t){let C=typeof t=="string"?au(t):t;Zr(f==="/"||((E=C.pathname)==null?void 0:E.startsWith(f)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${f}" but pathname "${C.pathname}" was given in the \`location\` prop.`),v=C}else v=x;let b=v.pathname||"/",w=b;if(f!=="/"){let C=f.replace(/^\//,"").split("/");w="/"+b.replace(/^\//,"").split("/").slice(C.length).join("/")}let j=WC(e,{pathname:w});Mi(p||j!=null,`No routes matched location "${v.pathname}${v.search}${v.hash}" `),Mi(j==null||j[j.length-1].route.element!==void 0||j[j.length-1].route.Component!==void 0||j[j.length-1].route.lazy!==void 0,`Matched leaf route at location "${v.pathname}${v.search}${v.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let _=t5(j&&j.map(C=>Object.assign({},C,{params:Object.assign({},d,C.params),pathname:Za([f,a.encodeLocation?a.encodeLocation(C.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:C.pathname]),pathnameBase:C.pathnameBase==="/"?f:Za([f,a.encodeLocation?a.encodeLocation(C.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:C.pathnameBase])})),l,r,n,s);return t&&_?g.createElement(Ud.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...v},navigationType:"POP"}},_):_}function XD(){let e=a5(),t=VD(e)?`${e.status} ${e.statusText}`:e instanceof Error?e.message:JSON.stringify(e),r=e instanceof Error?e.stack:null,n="rgba(200,200,200, 0.5)",s={padding:"0.5rem",backgroundColor:n},a={padding:"2px 4px",backgroundColor:n},l=null;return console.error("Error handled by React Router default ErrorBoundary:",e),l=g.createElement(g.Fragment,null,g.createElement("p",null," Hey developer "),g.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",g.createElement("code",{style:a},"ErrorBoundary")," or"," ",g.createElement("code",{style:a},"errorElement")," prop on your route.")),g.createElement(g.Fragment,null,g.createElement("h2",null,"Unexpected Application Error!"),g.createElement("h3",{style:{fontStyle:"italic"}},t),r?g.createElement("pre",{style:s},r):null,l)}var QD=g.createElement(XD,null),ZD=class extends g.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){this.props.unstable_onError?this.props.unstable_onError(e,t):console.error("React Router caught the following error during render",e)}render(){return this.state.error!==void 0?g.createElement(Ia.Provider,{value:this.props.routeContext},g.createElement(Iv.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function e5({routeContext:e,match:t,children:r}){let n=g.useContext(ou);return n&&n.static&&n.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(n.staticContext._deepestRenderedBoundaryId=t.route.id),g.createElement(Ia.Provider,{value:e},r)}function t5(e,t=[],r=null,n=null,s=null){if(e==null){if(!r)return null;if(r.errors)e=r.matches;else if(t.length===0&&!r.initialized&&r.matches.length>0)e=r.matches;else return null}let a=e,l=r==null?void 0:r.errors;if(l!=null){let m=a.findIndex(f=>f.route.id&&(l==null?void 0:l[f.route.id])!==void 0);Zr(m>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(l).join(",")}`),a=a.slice(0,Math.min(a.length,m+1))}let u=!1,d=-1;if(r)for(let m=0;m<a.length;m++){let f=a[m];if((f.route.HydrateFallback||f.route.hydrateFallbackElement)&&(d=m),f.route.id){let{loaderData:p,errors:x}=r,v=f.route.loader&&!p.hasOwnProperty(f.route.id)&&(!x||x[f.route.id]===void 0);if(f.route.lazy||v){u=!0,d>=0?a=a.slice(0,d+1):a=[a[0]];break}}}return a.reduceRight((m,f,p)=>{let x,v=!1,b=null,w=null;r&&(x=l&&f.route.id?l[f.route.id]:void 0,b=f.route.errorElement||QD,u&&(d<0&&p===0?(XC("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),v=!0,w=null):d===p&&(v=!0,w=f.route.hydrateFallbackElement||null)));let j=t.concat(a.slice(0,p+1)),_=()=>{let E;return x?E=b:v?E=w:f.route.Component?E=g.createElement(f.route.Component,null):f.route.element?E=f.route.element:E=m,g.createElement(e5,{match:f,routeContext:{outlet:m,matches:j,isDataRoute:r!=null},children:E})};return r&&(f.route.ErrorBoundary||f.route.errorElement||p===0)?g.createElement(ZD,{location:r.location,revalidation:r.revalidation,component:b,error:x,children:_(),routeContext:{outlet:null,matches:j,isDataRoute:!0},unstable_onError:n}):_()},null)}function Tv(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function r5(e){let t=g.useContext(ou);return Zr(t,Tv(e)),t}function n5(e){let t=g.useContext(Um);return Zr(t,Tv(e)),t}function s5(e){let t=g.useContext(Ia);return Zr(t,Tv(e)),t}function Dv(e){let t=s5(e),r=t.matches[t.matches.length-1];return Zr(r.route.id,`${e} can only be used on routes that contain a unique "id"`),r.route.id}function i5(){return Dv("useRouteId")}function a5(){var n;let e=g.useContext(Iv),t=n5("useRouteError"),r=Dv("useRouteError");return e!==void 0?e:(n=t.errors)==null?void 0:n[r]}function o5(){let{router:e}=r5("useNavigate"),t=Dv("useNavigate"),r=g.useRef(!1);return YC(()=>{r.current=!0}),g.useCallback(async(s,a={})=>{Mi(r.current,GC),r.current&&(typeof s=="number"?e.navigate(s):await e.navigate(s,{fromRouteId:t,...a}))},[e,t])}var Zj={};function XC(e,t,r){!t&&!Zj[e]&&(Zj[e]=!0,Mi(!1,r))}g.memo(l5);function l5({routes:e,future:t,state:r,unstable_onError:n}){return JC(e,void 0,r,n,t)}function c5({to:e,replace:t,state:r,relative:n}){Zr(lu(),"<Navigate> may be used only in the context of a <Router> component.");let{static:s}=g.useContext(ga);Mi(!s,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:a}=g.useContext(Ia),{pathname:l}=mo(),u=ri(),d=Ov(e,Pv(a),l,n==="path"),m=JSON.stringify(d);return g.useEffect(()=>{u(JSON.parse(m),{replace:t,state:r,relative:n})},[u,m,n,t,r]),null}function ci(e){Zr(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function u5({basename:e="/",children:t=null,location:r,navigationType:n="POP",navigator:s,static:a=!1}){Zr(!lu(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let l=e.replace(/^\/*/,"/"),u=g.useMemo(()=>({basename:l,navigator:s,static:a,future:{}}),[l,s,a]);typeof r=="string"&&(r=au(r));let{pathname:d="/",search:m="",hash:f="",state:p=null,key:x="default"}=r,v=g.useMemo(()=>{let b=no(d,l);return b==null?null:{location:{pathname:b,search:m,hash:f,state:p,key:x},navigationType:n}},[l,d,m,f,p,x,n]);return Mi(v!=null,`<Router basename="${l}"> is not able to match the URL "${d}${m}${f}" because it does not start with the basename, so the <Router> won't render anything.`),v==null?null:g.createElement(ga.Provider,{value:u},g.createElement(Ud.Provider,{children:t,value:v}))}function d5({children:e,location:t}){return JD(ox(e),t)}function ox(e,t=[]){let r=[];return g.Children.forEach(e,(n,s)=>{if(!g.isValidElement(n))return;let a=[...t,s];if(n.type===g.Fragment){r.push.apply(r,ox(n.props.children,a));return}Zr(n.type===ci,`[${typeof n.type=="string"?n.type:n.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Zr(!n.props.index||!n.props.children,"An index route cannot have child routes.");let l={id:n.props.id||a.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,middleware:n.props.middleware,loader:n.props.loader,action:n.props.action,hydrateFallbackElement:n.props.hydrateFallbackElement,HydrateFallback:n.props.HydrateFallback,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.hasErrorBoundary===!0||n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(l.children=ox(n.props.children,a)),r.push(l)}),r}var _h="get",Ch="application/x-www-form-urlencoded";function Bm(e){return e!=null&&typeof e.tagName=="string"}function f5(e){return Bm(e)&&e.tagName.toLowerCase()==="button"}function h5(e){return Bm(e)&&e.tagName.toLowerCase()==="form"}function m5(e){return Bm(e)&&e.tagName.toLowerCase()==="input"}function p5(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function g5(e,t){return e.button===0&&(!t||t==="_self")&&!p5(e)}function lx(e=""){return new URLSearchParams(typeof e=="string"||Array.isArray(e)||e instanceof URLSearchParams?e:Object.keys(e).reduce((t,r)=>{let n=e[r];return t.concat(Array.isArray(n)?n.map(s=>[r,s]):[[r,n]])},[]))}function y5(e,t){let r=lx(e);return t&&t.forEach((n,s)=>{r.has(s)||t.getAll(s).forEach(a=>{r.append(s,a)})}),r}var nh=null;function x5(){if(nh===null)try{new FormData(document.createElement("form"),0),nh=!1}catch{nh=!0}return nh}var v5=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function fy(e){return e!=null&&!v5.has(e)?(Mi(!1,`"${e}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Ch}"`),null):e}function b5(e,t){let r,n,s,a,l;if(h5(e)){let u=e.getAttribute("action");n=u?no(u,t):null,r=e.getAttribute("method")||_h,s=fy(e.getAttribute("enctype"))||Ch,a=new FormData(e)}else if(f5(e)||m5(e)&&(e.type==="submit"||e.type==="image")){let u=e.form;if(u==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let d=e.getAttribute("formaction")||u.getAttribute("action");if(n=d?no(d,t):null,r=e.getAttribute("formmethod")||u.getAttribute("method")||_h,s=fy(e.getAttribute("formenctype"))||fy(u.getAttribute("enctype"))||Ch,a=new FormData(u,e),!x5()){let{name:m,type:f,value:p}=e;if(f==="image"){let x=m?`${m}.`:"";a.append(`${x}x`,"0"),a.append(`${x}y`,"0")}else m&&a.append(m,p)}}else{if(Bm(e))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');r=_h,n=null,s=Ch,l=e}return a&&s==="text/plain"&&(l=a,a=void 0),{action:n,method:r.toLowerCase(),encType:s,formData:a,body:l}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function $v(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function w5(e,t,r){let n=typeof e=="string"?new URL(e,typeof window>"u"?"server://singlefetch/":window.location.origin):e;return n.pathname==="/"?n.pathname=`_root.${r}`:t&&no(n.pathname,t)==="/"?n.pathname=`${t.replace(/\/$/,"")}/_root.${r}`:n.pathname=`${n.pathname.replace(/\/$/,"")}.${r}`,n}async function j5(e,t){if(e.id in t)return t[e.id];try{let r=await import(e.module);return t[e.id]=r,r}catch(r){return console.error(`Error loading route module \`${e.module}\`, reloading page...`),console.error(r),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function S5(e){return e==null?!1:e.href==null?e.rel==="preload"&&typeof e.imageSrcSet=="string"&&typeof e.imageSizes=="string":typeof e.rel=="string"&&typeof e.href=="string"}async function k5(e,t,r){let n=await Promise.all(e.map(async s=>{let a=t.routes[s.route.id];if(a){let l=await j5(a,r);return l.links?l.links():[]}return[]}));return E5(n.flat(1).filter(S5).filter(s=>s.rel==="stylesheet"||s.rel==="preload").map(s=>s.rel==="stylesheet"?{...s,rel:"prefetch",as:"style"}:{...s,rel:"prefetch"}))}function eS(e,t,r,n,s,a){let l=(d,m)=>r[m]?d.route.id!==r[m].route.id:!0,u=(d,m)=>{var f;return r[m].pathname!==d.pathname||((f=r[m].route.path)==null?void 0:f.endsWith("*"))&&r[m].params["*"]!==d.params["*"]};return a==="assets"?t.filter((d,m)=>l(d,m)||u(d,m)):a==="data"?t.filter((d,m)=>{var p;let f=n.routes[d.route.id];if(!f||!f.hasLoader)return!1;if(l(d,m)||u(d,m))return!0;if(d.route.shouldRevalidate){let x=d.route.shouldRevalidate({currentUrl:new URL(s.pathname+s.search+s.hash,window.origin),currentParams:((p=r[0])==null?void 0:p.params)||{},nextUrl:new URL(e,window.origin),nextParams:d.params,defaultShouldRevalidate:!0});if(typeof x=="boolean")return x}return!0}):[]}function N5(e,t,{includeHydrateFallback:r}={}){return _5(e.map(n=>{let s=t.routes[n.route.id];if(!s)return[];let a=[s.module];return s.clientActionModule&&(a=a.concat(s.clientActionModule)),s.clientLoaderModule&&(a=a.concat(s.clientLoaderModule)),r&&s.hydrateFallbackModule&&(a=a.concat(s.hydrateFallbackModule)),s.imports&&(a=a.concat(s.imports)),a}).flat(1))}function _5(e){return[...new Set(e)]}function C5(e){let t={},r=Object.keys(e).sort();for(let n of r)t[n]=e[n];return t}function E5(e,t){let r=new Set;return new Set(t),e.reduce((n,s)=>{let a=JSON.stringify(C5(s));return r.has(a)||(r.add(a),n.push({key:a,link:s})),n},[])}function QC(){let e=g.useContext(ou);return $v(e,"You must render this element inside a <DataRouterContext.Provider> element"),e}function A5(){let e=g.useContext(Um);return $v(e,"You must render this element inside a <DataRouterStateContext.Provider> element"),e}var Rv=g.createContext(void 0);Rv.displayName="FrameworkContext";function ZC(){let e=g.useContext(Rv);return $v(e,"You must render this element inside a <HydratedRouter> element"),e}function P5(e,t){let r=g.useContext(Rv),[n,s]=g.useState(!1),[a,l]=g.useState(!1),{onFocus:u,onBlur:d,onMouseEnter:m,onMouseLeave:f,onTouchStart:p}=t,x=g.useRef(null);g.useEffect(()=>{if(e==="render"&&l(!0),e==="viewport"){let w=_=>{_.forEach(E=>{l(E.isIntersecting)})},j=new IntersectionObserver(w,{threshold:.5});return x.current&&j.observe(x.current),()=>{j.disconnect()}}},[e]),g.useEffect(()=>{if(n){let w=setTimeout(()=>{l(!0)},100);return()=>{clearTimeout(w)}}},[n]);let v=()=>{s(!0)},b=()=>{s(!1),l(!1)};return r?e!=="intent"?[a,x,{}]:[a,x,{onFocus:Yu(u,v),onBlur:Yu(d,b),onMouseEnter:Yu(m,v),onMouseLeave:Yu(f,b),onTouchStart:Yu(p,v)}]:[!1,x,{}]}function Yu(e,t){return r=>{e&&e(r),r.defaultPrevented||t(r)}}function O5({page:e,...t}){let{router:r}=QC(),n=g.useMemo(()=>WC(r.routes,e,r.basename),[r.routes,e,r.basename]);return n?g.createElement(T5,{page:e,matches:n,...t}):null}function I5(e){let{manifest:t,routeModules:r}=ZC(),[n,s]=g.useState([]);return g.useEffect(()=>{let a=!1;return k5(e,t,r).then(l=>{a||s(l)}),()=>{a=!0}},[e,t,r]),n}function T5({page:e,matches:t,...r}){let n=mo(),{manifest:s,routeModules:a}=ZC(),{basename:l}=QC(),{loaderData:u,matches:d}=A5(),m=g.useMemo(()=>eS(e,t,d,s,n,"data"),[e,t,d,s,n]),f=g.useMemo(()=>eS(e,t,d,s,n,"assets"),[e,t,d,s,n]),p=g.useMemo(()=>{if(e===n.pathname+n.search+n.hash)return[];let b=new Set,w=!1;if(t.forEach(_=>{var C;let E=s.routes[_.route.id];!E||!E.hasLoader||(!m.some(I=>I.route.id===_.route.id)&&_.route.id in u&&((C=a[_.route.id])!=null&&C.shouldRevalidate)||E.hasClientLoader?w=!0:b.add(_.route.id))}),b.size===0)return[];let j=w5(e,l,"data");return w&&b.size>0&&j.searchParams.set("_routes",t.filter(_=>b.has(_.route.id)).map(_=>_.route.id).join(",")),[j.pathname+j.search]},[l,u,n,s,m,t,e,a]),x=g.useMemo(()=>N5(f,s),[f,s]),v=I5(f);return g.createElement(g.Fragment,null,p.map(b=>g.createElement("link",{key:b,rel:"prefetch",as:"fetch",href:b,...r})),x.map(b=>g.createElement("link",{key:b,rel:"modulepreload",href:b,...r})),v.map(({key:b,link:w})=>g.createElement("link",{key:b,nonce:r.nonce,...w})))}function D5(...e){return t=>{e.forEach(r=>{typeof r=="function"?r(t):r!=null&&(r.current=t)})}}var eE=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{eE&&(window.__reactRouterVersion="7.9.4")}catch{}function $5({basename:e,children:t,window:r}){let n=g.useRef();n.current==null&&(n.current=wD({window:r,v5Compat:!0}));let s=n.current,[a,l]=g.useState({action:s.action,location:s.location}),u=g.useCallback(d=>{g.startTransition(()=>l(d))},[l]);return g.useLayoutEffect(()=>s.listen(u),[s,u]),g.createElement(u5,{basename:e,children:t,location:a.location,navigationType:a.action,navigator:s})}var tE=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,rE=g.forwardRef(function({onClick:t,discover:r="render",prefetch:n="none",relative:s,reloadDocument:a,replace:l,state:u,target:d,to:m,preventScrollReset:f,viewTransition:p,...x},v){let{basename:b}=g.useContext(ga),w=typeof m=="string"&&tE.test(m),j,_=!1;if(typeof m=="string"&&w&&(j=m,eE))try{let K=new URL(window.location.href),Q=m.startsWith("//")?new URL(K.protocol+m):new URL(m),se=no(Q.pathname,b);Q.origin===K.origin&&se!=null?m=se+Q.search+Q.hash:_=!0}catch{Mi(!1,`<Link to="${m}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let E=GD(m,{relative:s}),[C,I,A]=P5(n,x),$=L5(m,{replace:l,state:u,target:d,preventScrollReset:f,relative:s,viewTransition:p});function B(K){t&&t(K),K.defaultPrevented||$(K)}let T=g.createElement("a",{...x,...A,href:j||E,onClick:_||a?t:B,ref:D5(v,I),target:d,"data-discover":!w&&r==="render"?"true":void 0});return C&&!w?g.createElement(g.Fragment,null,T,g.createElement(O5,{page:E})):T});rE.displayName="Link";var R5=g.forwardRef(function({"aria-current":t="page",caseSensitive:r=!1,className:n="",end:s=!1,style:a,to:l,viewTransition:u,children:d,...m},f){let p=Bd(l,{relative:m.relative}),x=mo(),v=g.useContext(Um),{navigator:b,basename:w}=g.useContext(ga),j=v!=null&&V5(p)&&u===!0,_=b.encodeLocation?b.encodeLocation(p).pathname:p.pathname,E=x.pathname,C=v&&v.navigation&&v.navigation.location?v.navigation.location.pathname:null;r||(E=E.toLowerCase(),C=C?C.toLowerCase():null,_=_.toLowerCase()),C&&w&&(C=no(C,w)||C);const I=_!=="/"&&_.endsWith("/")?_.length-1:_.length;let A=E===_||!s&&E.startsWith(_)&&E.charAt(I)==="/",$=C!=null&&(C===_||!s&&C.startsWith(_)&&C.charAt(_.length)==="/"),B={isActive:A,isPending:$,isTransitioning:j},T=A?t:void 0,K;typeof n=="function"?K=n(B):K=[n,A?"active":null,$?"pending":null,j?"transitioning":null].filter(Boolean).join(" ");let Q=typeof a=="function"?a(B):a;return g.createElement(rE,{...m,"aria-current":T,className:K,ref:f,style:Q,to:l,viewTransition:u},typeof d=="function"?d(B):d)});R5.displayName="NavLink";var M5=g.forwardRef(({discover:e="render",fetcherKey:t,navigate:r,reloadDocument:n,replace:s,state:a,method:l=_h,action:u,onSubmit:d,relative:m,preventScrollReset:f,viewTransition:p,...x},v)=>{let b=B5(),w=W5(u,{relative:m}),j=l.toLowerCase()==="get"?"get":"post",_=typeof u=="string"&&tE.test(u),E=C=>{if(d&&d(C),C.defaultPrevented)return;C.preventDefault();let I=C.nativeEvent.submitter,A=(I==null?void 0:I.getAttribute("formmethod"))||l;b(I||C.currentTarget,{fetcherKey:t,method:A,navigate:r,replace:s,state:a,relative:m,preventScrollReset:f,viewTransition:p})};return g.createElement("form",{ref:v,method:j,action:w,onSubmit:n?d:E,...x,"data-discover":!_&&e==="render"?"true":void 0})});M5.displayName="Form";function F5(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function nE(e){let t=g.useContext(ou);return Zr(t,F5(e)),t}function L5(e,{target:t,replace:r,state:n,preventScrollReset:s,relative:a,viewTransition:l}={}){let u=ri(),d=mo(),m=Bd(e,{relative:a});return g.useCallback(f=>{if(g5(f,t)){f.preventDefault();let p=r!==void 0?r:kd(d)===kd(m);u(e,{replace:p,state:n,preventScrollReset:s,relative:a,viewTransition:l})}},[d,u,m,r,n,t,e,s,a,l])}function Mv(e){Mi(typeof URLSearchParams<"u","You cannot use the `useSearchParams` hook in a browser that does not support the URLSearchParams API. If you need to support Internet Explorer 11, we recommend you load a polyfill such as https://github.com/ungap/url-search-params.");let t=g.useRef(lx(e)),r=g.useRef(!1),n=mo(),s=g.useMemo(()=>y5(n.search,r.current?null:t.current),[n.search]),a=ri(),l=g.useCallback((u,d)=>{const m=lx(typeof u=="function"?u(new URLSearchParams(s)):u);r.current=!0,a("?"+m,d)},[a,s]);return[s,l]}var z5=0,U5=()=>`__${String(++z5)}__`;function B5(){let{router:e}=nE("useSubmit"),{basename:t}=g.useContext(ga),r=i5();return g.useCallback(async(n,s={})=>{let{action:a,method:l,encType:u,formData:d,body:m}=b5(n,t);if(s.navigate===!1){let f=s.fetcherKey||U5();await e.fetch(f,r,s.action||a,{preventScrollReset:s.preventScrollReset,formData:d,body:m,formMethod:s.method||l,formEncType:s.encType||u,flushSync:s.flushSync})}else await e.navigate(s.action||a,{preventScrollReset:s.preventScrollReset,formData:d,body:m,formMethod:s.method||l,formEncType:s.encType||u,replace:s.replace,state:s.state,fromRouteId:r,flushSync:s.flushSync,viewTransition:s.viewTransition})},[e,t,r])}function W5(e,{relative:t}={}){let{basename:r}=g.useContext(ga),n=g.useContext(Ia);Zr(n,"useFormAction must be used inside a RouteContext");let[s]=n.matches.slice(-1),a={...Bd(e||".",{relative:t})},l=mo();if(e==null){a.search=l.search;let u=new URLSearchParams(a.search),d=u.getAll("index");if(d.some(f=>f==="")){u.delete("index"),d.filter(p=>p).forEach(p=>u.append("index",p));let f=u.toString();a.search=f?`?${f}`:""}}return(!e||e===".")&&s.route.index&&(a.search=a.search?a.search.replace(/^\?/,"?index&"):"?index"),r!=="/"&&(a.pathname=a.pathname==="/"?r:Za([r,a.pathname])),kd(a)}function V5(e,{relative:t}={}){let r=g.useContext(KC);Zr(r!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:n}=nE("useViewTransitionState"),s=Bd(e,{relative:t});if(!r.isTransitioning)return!1;let a=no(r.currentLocation.pathname,n)||r.currentLocation.pathname,l=no(r.nextLocation.pathname,n)||r.nextLocation.pathname;return Mh(s.pathname,l)!=null||Mh(s.pathname,a)!=null}var Fv=BC();const q5="modulepreload",H5=function(e){return"/feature-voting-app/"+e},tS={},Wd=function(t,r,n){let s=Promise.resolve();if(r&&r.length>0){let l=function(m){return Promise.all(m.map(f=>Promise.resolve(f).then(p=>({status:"fulfilled",value:p}),p=>({status:"rejected",reason:p}))))};document.getElementsByTagName("link");const u=document.querySelector("meta[property=csp-nonce]"),d=(u==null?void 0:u.nonce)||(u==null?void 0:u.getAttribute("nonce"));s=l(r.map(m=>{if(m=H5(m),m in tS)return;tS[m]=!0;const f=m.endsWith(".css"),p=f?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${m}"]${p}`))return;const x=document.createElement("link");if(x.rel=f?"stylesheet":q5,f||(x.as="script"),x.crossOrigin="",x.href=m,d&&x.setAttribute("nonce",d),document.head.appendChild(x),f)return new Promise((v,b)=>{x.addEventListener("load",v),x.addEventListener("error",()=>b(new Error(`Unable to preload CSS for ${m}`)))})}))}function a(l){const u=new Event("vite:preloadError",{cancelable:!0});if(u.payload=l,window.dispatchEvent(u),!u.defaultPrevented)throw l}return s.then(l=>{for(const u of l||[])u.status==="rejected"&&a(u.reason);return t().catch(a)})},K5=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...r)=>Wd(async()=>{const{default:n}=await Promise.resolve().then(()=>cu);return{default:n}},[]).then(({default:n})=>n(...r)):t=fetch,(...r)=>t(...r)};class Lv extends Error{constructor(t,r="FunctionsError",n){super(t),this.name=r,this.context=n}}class rS extends Lv{constructor(t){super("Failed to send a request to the Edge Function","FunctionsFetchError",t)}}class nS extends Lv{constructor(t){super("Relay Error invoking the Edge Function","FunctionsRelayError",t)}}class sS extends Lv{constructor(t){super("Edge Function returned a non-2xx status code","FunctionsHttpError",t)}}var cx;(function(e){e.Any="any",e.ApNortheast1="ap-northeast-1",e.ApNortheast2="ap-northeast-2",e.ApSouth1="ap-south-1",e.ApSoutheast1="ap-southeast-1",e.ApSoutheast2="ap-southeast-2",e.CaCentral1="ca-central-1",e.EuCentral1="eu-central-1",e.EuWest1="eu-west-1",e.EuWest2="eu-west-2",e.EuWest3="eu-west-3",e.SaEast1="sa-east-1",e.UsEast1="us-east-1",e.UsWest1="us-west-1",e.UsWest2="us-west-2"})(cx||(cx={}));var G5=function(e,t,r,n){function s(a){return a instanceof r?a:new r(function(l){l(a)})}return new(r||(r=Promise))(function(a,l){function u(f){try{m(n.next(f))}catch(p){l(p)}}function d(f){try{m(n.throw(f))}catch(p){l(p)}}function m(f){f.done?a(f.value):s(f.value).then(u,d)}m((n=n.apply(e,t||[])).next())})};class Y5{constructor(t,{headers:r={},customFetch:n,region:s=cx.Any}={}){this.url=t,this.headers=r,this.region=s,this.fetch=K5(n)}setAuth(t){this.headers.Authorization=`Bearer ${t}`}invoke(t){return G5(this,arguments,void 0,function*(r,n={}){var s;try{const{headers:a,method:l,body:u,signal:d}=n;let m={},{region:f}=n;f||(f=this.region);const p=new URL(`${this.url}/${r}`);f&&f!=="any"&&(m["x-region"]=f,p.searchParams.set("forceFunctionRegion",f));let x;u&&(a&&!Object.prototype.hasOwnProperty.call(a,"Content-Type")||!a)&&(typeof Blob<"u"&&u instanceof Blob||u instanceof ArrayBuffer?(m["Content-Type"]="application/octet-stream",x=u):typeof u=="string"?(m["Content-Type"]="text/plain",x=u):typeof FormData<"u"&&u instanceof FormData?x=u:(m["Content-Type"]="application/json",x=JSON.stringify(u)));const v=yield this.fetch(p.toString(),{method:l||"POST",headers:Object.assign(Object.assign(Object.assign({},m),this.headers),a),body:x,signal:d}).catch(_=>{throw _.name==="AbortError"?_:new rS(_)}),b=v.headers.get("x-relay-error");if(b&&b==="true")throw new nS(v);if(!v.ok)throw new sS(v);let w=((s=v.headers.get("Content-Type"))!==null&&s!==void 0?s:"text/plain").split(";")[0].trim(),j;return w==="application/json"?j=yield v.json():w==="application/octet-stream"?j=yield v.blob():w==="text/event-stream"?j=v:w==="multipart/form-data"?j=yield v.formData():j=yield v.text(),{data:j,error:null,response:v}}catch(a){return a instanceof Error&&a.name==="AbortError"?{data:null,error:new rS(a)}:{data:null,error:a,response:a instanceof sS||a instanceof nS?a.context:void 0}}})}}var Zn={},bc={},wc={},jc={},Sc={},kc={},J5=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},Gc=J5();const X5=Gc.fetch,sE=Gc.fetch.bind(Gc),iE=Gc.Headers,Q5=Gc.Request,Z5=Gc.Response,cu=Object.freeze(Object.defineProperty({__proto__:null,Headers:iE,Request:Q5,Response:Z5,default:sE,fetch:X5},Symbol.toStringTag,{value:"Module"})),e3=uD(cu);var sh={},iS;function aE(){if(iS)return sh;iS=1,Object.defineProperty(sh,"__esModule",{value:!0});class e extends Error{constructor(r){super(r.message),this.name="PostgrestError",this.details=r.details,this.hint=r.hint,this.code=r.code}}return sh.default=e,sh}var aS;function oE(){if(aS)return kc;aS=1;var e=kc&&kc.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(kc,"__esModule",{value:!0});const t=e(e3),r=e(aE());class n{constructor(a){var l,u;this.shouldThrowOnError=!1,this.method=a.method,this.url=a.url,this.headers=new Headers(a.headers),this.schema=a.schema,this.body=a.body,this.shouldThrowOnError=(l=a.shouldThrowOnError)!==null&&l!==void 0?l:!1,this.signal=a.signal,this.isMaybeSingle=(u=a.isMaybeSingle)!==null&&u!==void 0?u:!1,a.fetch?this.fetch=a.fetch:typeof fetch>"u"?this.fetch=t.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(a,l){return this.headers=new Headers(this.headers),this.headers.set(a,l),this}then(a,l){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const u=this.fetch;let d=u(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async m=>{var f,p,x,v;let b=null,w=null,j=null,_=m.status,E=m.statusText;if(m.ok){if(this.method!=="HEAD"){const $=await m.text();$===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((f=this.headers.get("Accept"))===null||f===void 0)&&f.includes("application/vnd.pgrst.plan+text"))?w=$:w=JSON.parse($))}const I=(p=this.headers.get("Prefer"))===null||p===void 0?void 0:p.match(/count=(exact|planned|estimated)/),A=(x=m.headers.get("content-range"))===null||x===void 0?void 0:x.split("/");I&&A&&A.length>1&&(j=parseInt(A[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(w)&&(w.length>1?(b={code:"PGRST116",details:`Results contain ${w.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},w=null,j=null,_=406,E="Not Acceptable"):w.length===1?w=w[0]:w=null)}else{const I=await m.text();try{b=JSON.parse(I),Array.isArray(b)&&m.status===404&&(w=[],b=null,_=200,E="OK")}catch{m.status===404&&I===""?(_=204,E="No Content"):b={message:I}}if(b&&this.isMaybeSingle&&(!((v=b==null?void 0:b.details)===null||v===void 0)&&v.includes("0 rows"))&&(b=null,_=200,E="OK"),b&&this.shouldThrowOnError)throw new r.default(b)}return{error:b,data:w,count:j,status:_,statusText:E}});return this.shouldThrowOnError||(d=d.catch(m=>{var f,p,x;return{error:{message:`${(f=m==null?void 0:m.name)!==null&&f!==void 0?f:"FetchError"}: ${m==null?void 0:m.message}`,details:`${(p=m==null?void 0:m.stack)!==null&&p!==void 0?p:""}`,hint:"",code:`${(x=m==null?void 0:m.code)!==null&&x!==void 0?x:""}`},data:null,count:null,status:0,statusText:""}})),d.then(a,l)}returns(){return this}overrideTypes(){return this}}return kc.default=n,kc}var oS;function lE(){if(oS)return Sc;oS=1;var e=Sc&&Sc.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(Sc,"__esModule",{value:!0});const t=e(oE());class r extends t.default{select(s){let a=!1;const l=(s??"*").split("").map(u=>/\s/.test(u)&&!a?"":(u==='"'&&(a=!a),u)).join("");return this.url.searchParams.set("select",l),this.headers.append("Prefer","return=representation"),this}order(s,{ascending:a=!0,nullsFirst:l,foreignTable:u,referencedTable:d=u}={}){const m=d?`${d}.order`:"order",f=this.url.searchParams.get(m);return this.url.searchParams.set(m,`${f?`${f},`:""}${s}.${a?"asc":"desc"}${l===void 0?"":l?".nullsfirst":".nullslast"}`),this}limit(s,{foreignTable:a,referencedTable:l=a}={}){const u=typeof l>"u"?"limit":`${l}.limit`;return this.url.searchParams.set(u,`${s}`),this}range(s,a,{foreignTable:l,referencedTable:u=l}={}){const d=typeof u>"u"?"offset":`${u}.offset`,m=typeof u>"u"?"limit":`${u}.limit`;return this.url.searchParams.set(d,`${s}`),this.url.searchParams.set(m,`${a-s+1}`),this}abortSignal(s){return this.signal=s,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:s=!1,verbose:a=!1,settings:l=!1,buffers:u=!1,wal:d=!1,format:m="text"}={}){var f;const p=[s?"analyze":null,a?"verbose":null,l?"settings":null,u?"buffers":null,d?"wal":null].filter(Boolean).join("|"),x=(f=this.headers.get("Accept"))!==null&&f!==void 0?f:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${m}; for="${x}"; options=${p};`),m==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(s){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${s}`),this}}return Sc.default=r,Sc}var lS;function zv(){if(lS)return jc;lS=1;var e=jc&&jc.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(jc,"__esModule",{value:!0});const t=e(lE());class r extends t.default{eq(s,a){return this.url.searchParams.append(s,`eq.${a}`),this}neq(s,a){return this.url.searchParams.append(s,`neq.${a}`),this}gt(s,a){return this.url.searchParams.append(s,`gt.${a}`),this}gte(s,a){return this.url.searchParams.append(s,`gte.${a}`),this}lt(s,a){return this.url.searchParams.append(s,`lt.${a}`),this}lte(s,a){return this.url.searchParams.append(s,`lte.${a}`),this}like(s,a){return this.url.searchParams.append(s,`like.${a}`),this}likeAllOf(s,a){return this.url.searchParams.append(s,`like(all).{${a.join(",")}}`),this}likeAnyOf(s,a){return this.url.searchParams.append(s,`like(any).{${a.join(",")}}`),this}ilike(s,a){return this.url.searchParams.append(s,`ilike.${a}`),this}ilikeAllOf(s,a){return this.url.searchParams.append(s,`ilike(all).{${a.join(",")}}`),this}ilikeAnyOf(s,a){return this.url.searchParams.append(s,`ilike(any).{${a.join(",")}}`),this}is(s,a){return this.url.searchParams.append(s,`is.${a}`),this}in(s,a){const l=Array.from(new Set(a)).map(u=>typeof u=="string"&&new RegExp("[,()]").test(u)?`"${u}"`:`${u}`).join(",");return this.url.searchParams.append(s,`in.(${l})`),this}contains(s,a){return typeof a=="string"?this.url.searchParams.append(s,`cs.${a}`):Array.isArray(a)?this.url.searchParams.append(s,`cs.{${a.join(",")}}`):this.url.searchParams.append(s,`cs.${JSON.stringify(a)}`),this}containedBy(s,a){return typeof a=="string"?this.url.searchParams.append(s,`cd.${a}`):Array.isArray(a)?this.url.searchParams.append(s,`cd.{${a.join(",")}}`):this.url.searchParams.append(s,`cd.${JSON.stringify(a)}`),this}rangeGt(s,a){return this.url.searchParams.append(s,`sr.${a}`),this}rangeGte(s,a){return this.url.searchParams.append(s,`nxl.${a}`),this}rangeLt(s,a){return this.url.searchParams.append(s,`sl.${a}`),this}rangeLte(s,a){return this.url.searchParams.append(s,`nxr.${a}`),this}rangeAdjacent(s,a){return this.url.searchParams.append(s,`adj.${a}`),this}overlaps(s,a){return typeof a=="string"?this.url.searchParams.append(s,`ov.${a}`):this.url.searchParams.append(s,`ov.{${a.join(",")}}`),this}textSearch(s,a,{config:l,type:u}={}){let d="";u==="plain"?d="pl":u==="phrase"?d="ph":u==="websearch"&&(d="w");const m=l===void 0?"":`(${l})`;return this.url.searchParams.append(s,`${d}fts${m}.${a}`),this}match(s){return Object.entries(s).forEach(([a,l])=>{this.url.searchParams.append(a,`eq.${l}`)}),this}not(s,a,l){return this.url.searchParams.append(s,`not.${a}.${l}`),this}or(s,{foreignTable:a,referencedTable:l=a}={}){const u=l?`${l}.or`:"or";return this.url.searchParams.append(u,`(${s})`),this}filter(s,a,l){return this.url.searchParams.append(s,`${a}.${l}`),this}}return jc.default=r,jc}var cS;function cE(){if(cS)return wc;cS=1;var e=wc&&wc.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(wc,"__esModule",{value:!0});const t=e(zv());class r{constructor(s,{headers:a={},schema:l,fetch:u}){this.url=s,this.headers=new Headers(a),this.schema=l,this.fetch=u}select(s,a){const{head:l=!1,count:u}=a??{},d=l?"HEAD":"GET";let m=!1;const f=(s??"*").split("").map(p=>/\s/.test(p)&&!m?"":(p==='"'&&(m=!m),p)).join("");return this.url.searchParams.set("select",f),u&&this.headers.append("Prefer",`count=${u}`),new t.default({method:d,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(s,{count:a,defaultToNull:l=!0}={}){var u;const d="POST";if(a&&this.headers.append("Prefer",`count=${a}`),l||this.headers.append("Prefer","missing=default"),Array.isArray(s)){const m=s.reduce((f,p)=>f.concat(Object.keys(p)),[]);if(m.length>0){const f=[...new Set(m)].map(p=>`"${p}"`);this.url.searchParams.set("columns",f.join(","))}}return new t.default({method:d,url:this.url,headers:this.headers,schema:this.schema,body:s,fetch:(u=this.fetch)!==null&&u!==void 0?u:fetch})}upsert(s,{onConflict:a,ignoreDuplicates:l=!1,count:u,defaultToNull:d=!0}={}){var m;const f="POST";if(this.headers.append("Prefer",`resolution=${l?"ignore":"merge"}-duplicates`),a!==void 0&&this.url.searchParams.set("on_conflict",a),u&&this.headers.append("Prefer",`count=${u}`),d||this.headers.append("Prefer","missing=default"),Array.isArray(s)){const p=s.reduce((x,v)=>x.concat(Object.keys(v)),[]);if(p.length>0){const x=[...new Set(p)].map(v=>`"${v}"`);this.url.searchParams.set("columns",x.join(","))}}return new t.default({method:f,url:this.url,headers:this.headers,schema:this.schema,body:s,fetch:(m=this.fetch)!==null&&m!==void 0?m:fetch})}update(s,{count:a}={}){var l;const u="PATCH";return a&&this.headers.append("Prefer",`count=${a}`),new t.default({method:u,url:this.url,headers:this.headers,schema:this.schema,body:s,fetch:(l=this.fetch)!==null&&l!==void 0?l:fetch})}delete({count:s}={}){var a;const l="DELETE";return s&&this.headers.append("Prefer",`count=${s}`),new t.default({method:l,url:this.url,headers:this.headers,schema:this.schema,fetch:(a=this.fetch)!==null&&a!==void 0?a:fetch})}}return wc.default=r,wc}var uS;function t3(){if(uS)return bc;uS=1;var e=bc&&bc.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(bc,"__esModule",{value:!0});const t=e(cE()),r=e(zv());class n{constructor(a,{headers:l={},schema:u,fetch:d}={}){this.url=a,this.headers=new Headers(l),this.schemaName=u,this.fetch=d}from(a){const l=new URL(`${this.url}/${a}`);return new t.default(l,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(a){return new n(this.url,{headers:this.headers,schema:a,fetch:this.fetch})}rpc(a,l={},{head:u=!1,get:d=!1,count:m}={}){var f;let p;const x=new URL(`${this.url}/rpc/${a}`);let v;u||d?(p=u?"HEAD":"GET",Object.entries(l).filter(([w,j])=>j!==void 0).map(([w,j])=>[w,Array.isArray(j)?`{${j.join(",")}}`:`${j}`]).forEach(([w,j])=>{x.searchParams.append(w,j)})):(p="POST",v=l);const b=new Headers(this.headers);return m&&b.set("Prefer",`count=${m}`),new r.default({method:p,url:x,headers:b,schema:this.schemaName,body:v,fetch:(f=this.fetch)!==null&&f!==void 0?f:fetch})}}return bc.default=n,bc}var dS;function r3(){if(dS)return Zn;dS=1;var e=Zn&&Zn.__importDefault||function(u){return u&&u.__esModule?u:{default:u}};Object.defineProperty(Zn,"__esModule",{value:!0}),Zn.PostgrestError=Zn.PostgrestBuilder=Zn.PostgrestTransformBuilder=Zn.PostgrestFilterBuilder=Zn.PostgrestQueryBuilder=Zn.PostgrestClient=void 0;const t=e(t3());Zn.PostgrestClient=t.default;const r=e(cE());Zn.PostgrestQueryBuilder=r.default;const n=e(zv());Zn.PostgrestFilterBuilder=n.default;const s=e(lE());Zn.PostgrestTransformBuilder=s.default;const a=e(oE());Zn.PostgrestBuilder=a.default;const l=e(aE());return Zn.PostgrestError=l.default,Zn.default={PostgrestClient:t.default,PostgrestQueryBuilder:r.default,PostgrestFilterBuilder:n.default,PostgrestTransformBuilder:s.default,PostgrestBuilder:a.default,PostgrestError:l.default},Zn}var n3=r3();const s3=pa(n3),{PostgrestClient:i3,PostgrestQueryBuilder:pee,PostgrestFilterBuilder:gee,PostgrestTransformBuilder:yee,PostgrestBuilder:xee,PostgrestError:vee}=s3;class a3{static detectEnvironment(){var t;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((t=navigator.userAgent)===null||t===void 0)&&t.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const r=process.versions;if(r&&r.node){const n=r.node,s=parseInt(n.replace(/^v/,"").split(".")[0]);return s>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${s} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${s} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const t=this.detectEnvironment();if(t.constructor)return t.constructor;let r=t.error||"WebSocket not supported in this environment.";throw t.workaround&&(r+=`

Suggested solution: ${t.workaround}`),new Error(r)}static createWebSocket(t,r){const n=this.getWebSocketConstructor();return new n(t,r)}static isWebSocketSupported(){try{const t=this.detectEnvironment();return t.type==="native"||t.type==="ws"}catch{return!1}}}const o3="2.74.0",l3=`realtime-js/${o3}`,c3="1.0.0",ux=1e4,u3=1e3,d3=100;var yd;(function(e){e[e.connecting=0]="connecting",e[e.open=1]="open",e[e.closing=2]="closing",e[e.closed=3]="closed"})(yd||(yd={}));var Rn;(function(e){e.closed="closed",e.errored="errored",e.joined="joined",e.joining="joining",e.leaving="leaving"})(Rn||(Rn={}));var ia;(function(e){e.close="phx_close",e.error="phx_error",e.join="phx_join",e.reply="phx_reply",e.leave="phx_leave",e.access_token="access_token"})(ia||(ia={}));var dx;(function(e){e.websocket="websocket"})(dx||(dx={}));var _l;(function(e){e.Connecting="connecting",e.Open="open",e.Closing="closing",e.Closed="closed"})(_l||(_l={}));class f3{constructor(){this.HEADER_LENGTH=1}decode(t,r){return t.constructor===ArrayBuffer?r(this._binaryDecode(t)):r(typeof t=="string"?JSON.parse(t):{})}_binaryDecode(t){const r=new DataView(t),n=new TextDecoder;return this._decodeBroadcast(t,r,n)}_decodeBroadcast(t,r,n){const s=r.getUint8(1),a=r.getUint8(2);let l=this.HEADER_LENGTH+2;const u=n.decode(t.slice(l,l+s));l=l+s;const d=n.decode(t.slice(l,l+a));l=l+a;const m=JSON.parse(n.decode(t.slice(l,t.byteLength)));return{ref:null,topic:u,event:d,payload:m}}}class uE{constructor(t,r){this.callback=t,this.timerCalc=r,this.timer=void 0,this.tries=0,this.callback=t,this.timerCalc=r}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var Dr;(function(e){e.abstime="abstime",e.bool="bool",e.date="date",e.daterange="daterange",e.float4="float4",e.float8="float8",e.int2="int2",e.int4="int4",e.int4range="int4range",e.int8="int8",e.int8range="int8range",e.json="json",e.jsonb="jsonb",e.money="money",e.numeric="numeric",e.oid="oid",e.reltime="reltime",e.text="text",e.time="time",e.timestamp="timestamp",e.timestamptz="timestamptz",e.timetz="timetz",e.tsrange="tsrange",e.tstzrange="tstzrange"})(Dr||(Dr={}));const fS=(e,t,r={})=>{var n;const s=(n=r.skipTypes)!==null&&n!==void 0?n:[];return t?Object.keys(t).reduce((a,l)=>(a[l]=h3(l,e,t,s),a),{}):{}},h3=(e,t,r,n)=>{const s=t.find(u=>u.name===e),a=s==null?void 0:s.type,l=r[e];return a&&!n.includes(a)?dE(a,l):fx(l)},dE=(e,t)=>{if(e.charAt(0)==="_"){const r=e.slice(1,e.length);return y3(t,r)}switch(e){case Dr.bool:return m3(t);case Dr.float4:case Dr.float8:case Dr.int2:case Dr.int4:case Dr.int8:case Dr.numeric:case Dr.oid:return p3(t);case Dr.json:case Dr.jsonb:return g3(t);case Dr.timestamp:return x3(t);case Dr.abstime:case Dr.date:case Dr.daterange:case Dr.int4range:case Dr.int8range:case Dr.money:case Dr.reltime:case Dr.text:case Dr.time:case Dr.timestamptz:case Dr.timetz:case Dr.tsrange:case Dr.tstzrange:return fx(t);default:return fx(t)}},fx=e=>e,m3=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},p3=e=>{if(typeof e=="string"){const t=parseFloat(e);if(!Number.isNaN(t))return t}return e},g3=e=>{if(typeof e=="string")try{return JSON.parse(e)}catch(t){return console.log(`JSON parse error: ${t}`),e}return e},y3=(e,t)=>{if(typeof e!="string")return e;const r=e.length-1,n=e[r];if(e[0]==="{"&&n==="}"){let a;const l=e.slice(1,r);try{a=JSON.parse("["+l+"]")}catch{a=l?l.split(","):[]}return a.map(u=>dE(t,u))}return e},x3=e=>typeof e=="string"?e.replace(" ","T"):e,fE=e=>{let t=e;return t=t.replace(/^ws/i,"http"),t=t.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),t.replace(/\/+$/,"")+"/api/broadcast"};class hy{constructor(t,r,n={},s=ux){this.channel=t,this.event=r,this.payload=n,this.timeout=s,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(t){this.timeout=t,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(t){this.payload=Object.assign(Object.assign({},this.payload),t)}receive(t,r){var n;return this._hasReceived(t)&&r((n=this.receivedResp)===null||n===void 0?void 0:n.response),this.recHooks.push({status:t,callback:r}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const t=r=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=r,this._matchReceive(r)};this.channel._on(this.refEvent,{},t),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(t,r){this.refEvent&&this.channel._trigger(this.refEvent,{status:t,response:r})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:t,response:r}){this.recHooks.filter(n=>n.status===t).forEach(n=>n.callback(r))}_hasReceived(t){return this.receivedResp&&this.receivedResp.status===t}}var hS;(function(e){e.SYNC="sync",e.JOIN="join",e.LEAVE="leave"})(hS||(hS={}));class xd{constructor(t,r){this.channel=t,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const n=(r==null?void 0:r.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(n.state,{},s=>{const{onJoin:a,onLeave:l,onSync:u}=this.caller;this.joinRef=this.channel._joinRef(),this.state=xd.syncState(this.state,s,a,l),this.pendingDiffs.forEach(d=>{this.state=xd.syncDiff(this.state,d,a,l)}),this.pendingDiffs=[],u()}),this.channel._on(n.diff,{},s=>{const{onJoin:a,onLeave:l,onSync:u}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(s):(this.state=xd.syncDiff(this.state,s,a,l),u())}),this.onJoin((s,a,l)=>{this.channel._trigger("presence",{event:"join",key:s,currentPresences:a,newPresences:l})}),this.onLeave((s,a,l)=>{this.channel._trigger("presence",{event:"leave",key:s,currentPresences:a,leftPresences:l})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(t,r,n,s){const a=this.cloneDeep(t),l=this.transformState(r),u={},d={};return this.map(a,(m,f)=>{l[m]||(d[m]=f)}),this.map(l,(m,f)=>{const p=a[m];if(p){const x=f.map(j=>j.presence_ref),v=p.map(j=>j.presence_ref),b=f.filter(j=>v.indexOf(j.presence_ref)<0),w=p.filter(j=>x.indexOf(j.presence_ref)<0);b.length>0&&(u[m]=b),w.length>0&&(d[m]=w)}else u[m]=f}),this.syncDiff(a,{joins:u,leaves:d},n,s)}static syncDiff(t,r,n,s){const{joins:a,leaves:l}={joins:this.transformState(r.joins),leaves:this.transformState(r.leaves)};return n||(n=()=>{}),s||(s=()=>{}),this.map(a,(u,d)=>{var m;const f=(m=t[u])!==null&&m!==void 0?m:[];if(t[u]=this.cloneDeep(d),f.length>0){const p=t[u].map(v=>v.presence_ref),x=f.filter(v=>p.indexOf(v.presence_ref)<0);t[u].unshift(...x)}n(u,f,d)}),this.map(l,(u,d)=>{let m=t[u];if(!m)return;const f=d.map(p=>p.presence_ref);m=m.filter(p=>f.indexOf(p.presence_ref)<0),t[u]=m,s(u,m,d),m.length===0&&delete t[u]}),t}static map(t,r){return Object.getOwnPropertyNames(t).map(n=>r(n,t[n]))}static transformState(t){return t=this.cloneDeep(t),Object.getOwnPropertyNames(t).reduce((r,n)=>{const s=t[n];return"metas"in s?r[n]=s.metas.map(a=>(a.presence_ref=a.phx_ref,delete a.phx_ref,delete a.phx_ref_prev,a)):r[n]=s,r},{})}static cloneDeep(t){return JSON.parse(JSON.stringify(t))}onJoin(t){this.caller.onJoin=t}onLeave(t){this.caller.onLeave=t}onSync(t){this.caller.onSync=t}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var mS;(function(e){e.ALL="*",e.INSERT="INSERT",e.UPDATE="UPDATE",e.DELETE="DELETE"})(mS||(mS={}));var vd;(function(e){e.BROADCAST="broadcast",e.PRESENCE="presence",e.POSTGRES_CHANGES="postgres_changes",e.SYSTEM="system"})(vd||(vd={}));var Ka;(function(e){e.SUBSCRIBED="SUBSCRIBED",e.TIMED_OUT="TIMED_OUT",e.CLOSED="CLOSED",e.CHANNEL_ERROR="CHANNEL_ERROR"})(Ka||(Ka={}));class Uv{constructor(t,r={config:{}},n){var s,a;if(this.topic=t,this.params=r,this.socket=n,this.bindings={},this.state=Rn.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=t.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},r.config),this.timeout=this.socket.timeout,this.joinPush=new hy(this,ia.join,this.params,this.timeout),this.rejoinTimer=new uE(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Rn.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(l=>l.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Rn.closed,this.socket._remove(this)}),this._onError(l=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,l),this.state=Rn.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Rn.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",l=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,l),this.state=Rn.errored,this.rejoinTimer.scheduleTimeout())}),this._on(ia.reply,{},(l,u)=>{this._trigger(this._replyEventName(u),l)}),this.presence=new xd(this),this.broadcastEndpointURL=fE(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((a=(s=this.params.config)===null||s===void 0?void 0:s.broadcast)===null||a===void 0)&&a.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(t,r=this.timeout){var n,s,a;if(this.socket.isConnected()||this.socket.connect(),this.state==Rn.closed){const{config:{broadcast:l,presence:u,private:d}}=this.params,m=(s=(n=this.bindings.postgres_changes)===null||n===void 0?void 0:n.map(v=>v.filter))!==null&&s!==void 0?s:[],f=!!this.bindings[vd.PRESENCE]&&this.bindings[vd.PRESENCE].length>0||((a=this.params.config.presence)===null||a===void 0?void 0:a.enabled)===!0,p={},x={broadcast:l,presence:Object.assign(Object.assign({},u),{enabled:f}),postgres_changes:m,private:d};this.socket.accessTokenValue&&(p.access_token=this.socket.accessTokenValue),this._onError(v=>t==null?void 0:t(Ka.CHANNEL_ERROR,v)),this._onClose(()=>t==null?void 0:t(Ka.CLOSED)),this.updateJoinPayload(Object.assign({config:x},p)),this.joinedOnce=!0,this._rejoin(r),this.joinPush.receive("ok",async({postgres_changes:v})=>{var b;if(this.socket.setAuth(),v===void 0){t==null||t(Ka.SUBSCRIBED);return}else{const w=this.bindings.postgres_changes,j=(b=w==null?void 0:w.length)!==null&&b!==void 0?b:0,_=[];for(let E=0;E<j;E++){const C=w[E],{filter:{event:I,schema:A,table:$,filter:B}}=C,T=v&&v[E];if(T&&T.event===I&&T.schema===A&&T.table===$&&T.filter===B)_.push(Object.assign(Object.assign({},C),{id:T.id}));else{this.unsubscribe(),this.state=Rn.errored,t==null||t(Ka.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=_,t&&t(Ka.SUBSCRIBED);return}}).receive("error",v=>{this.state=Rn.errored,t==null||t(Ka.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(v).join(", ")||"error")))}).receive("timeout",()=>{t==null||t(Ka.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(t,r={}){return await this.send({type:"presence",event:"track",payload:t},r.timeout||this.timeout)}async untrack(t={}){return await this.send({type:"presence",event:"untrack"},t)}on(t,r,n){return this.state===Rn.joined&&t===vd.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(t,r,n)}async send(t,r={}){var n,s;if(!this._canPush()&&t.type==="broadcast"){const{event:a,payload:l}=t,d={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:a,payload:l,private:this.private}]})};try{const m=await this._fetchWithTimeout(this.broadcastEndpointURL,d,(n=r.timeout)!==null&&n!==void 0?n:this.timeout);return await((s=m.body)===null||s===void 0?void 0:s.cancel()),m.ok?"ok":"error"}catch(m){return m.name==="AbortError"?"timed out":"error"}}else return new Promise(a=>{var l,u,d;const m=this._push(t.type,t,r.timeout||this.timeout);t.type==="broadcast"&&!(!((d=(u=(l=this.params)===null||l===void 0?void 0:l.config)===null||u===void 0?void 0:u.broadcast)===null||d===void 0)&&d.ack)&&a("ok"),m.receive("ok",()=>a("ok")),m.receive("error",()=>a("error")),m.receive("timeout",()=>a("timed out"))})}updateJoinPayload(t){this.joinPush.updatePayload(t)}unsubscribe(t=this.timeout){this.state=Rn.leaving;const r=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(ia.close,"leave",this._joinRef())};this.joinPush.destroy();let n=null;return new Promise(s=>{n=new hy(this,ia.leave,{},t),n.receive("ok",()=>{r(),s("ok")}).receive("timeout",()=>{r(),s("timed out")}).receive("error",()=>{s("error")}),n.send(),this._canPush()||n.trigger("ok",{})}).finally(()=>{n==null||n.destroy()})}teardown(){this.pushBuffer.forEach(t=>t.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=Rn.closed,this.bindings={}}async _fetchWithTimeout(t,r,n){const s=new AbortController,a=setTimeout(()=>s.abort(),n),l=await this.socket.fetch(t,Object.assign(Object.assign({},r),{signal:s.signal}));return clearTimeout(a),l}_push(t,r,n=this.timeout){if(!this.joinedOnce)throw`tried to push '${t}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let s=new hy(this,t,r,n);return this._canPush()?s.send():this._addToPushBuffer(s),s}_addToPushBuffer(t){if(t.startTimeout(),this.pushBuffer.push(t),this.pushBuffer.length>d3){const r=this.pushBuffer.shift();r&&(r.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${r.event}`,r.payload))}}_onMessage(t,r,n){return r}_isMember(t){return this.topic===t}_joinRef(){return this.joinPush.ref}_trigger(t,r,n){var s,a;const l=t.toLocaleLowerCase(),{close:u,error:d,leave:m,join:f}=ia;if(n&&[u,d,m,f].indexOf(l)>=0&&n!==this._joinRef())return;let x=this._onMessage(l,r,n);if(r&&!x)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(l)?(s=this.bindings.postgres_changes)===null||s===void 0||s.filter(v=>{var b,w,j;return((b=v.filter)===null||b===void 0?void 0:b.event)==="*"||((j=(w=v.filter)===null||w===void 0?void 0:w.event)===null||j===void 0?void 0:j.toLocaleLowerCase())===l}).map(v=>v.callback(x,n)):(a=this.bindings[l])===null||a===void 0||a.filter(v=>{var b,w,j,_,E,C;if(["broadcast","presence","postgres_changes"].includes(l))if("id"in v){const I=v.id,A=(b=v.filter)===null||b===void 0?void 0:b.event;return I&&((w=r.ids)===null||w===void 0?void 0:w.includes(I))&&(A==="*"||(A==null?void 0:A.toLocaleLowerCase())===((j=r.data)===null||j===void 0?void 0:j.type.toLocaleLowerCase()))}else{const I=(E=(_=v==null?void 0:v.filter)===null||_===void 0?void 0:_.event)===null||E===void 0?void 0:E.toLocaleLowerCase();return I==="*"||I===((C=r==null?void 0:r.event)===null||C===void 0?void 0:C.toLocaleLowerCase())}else return v.type.toLocaleLowerCase()===l}).map(v=>{if(typeof x=="object"&&"ids"in x){const b=x.data,{schema:w,table:j,commit_timestamp:_,type:E,errors:C}=b;x=Object.assign(Object.assign({},{schema:w,table:j,commit_timestamp:_,eventType:E,new:{},old:{},errors:C}),this._getPayloadRecords(b))}v.callback(x,n)})}_isClosed(){return this.state===Rn.closed}_isJoined(){return this.state===Rn.joined}_isJoining(){return this.state===Rn.joining}_isLeaving(){return this.state===Rn.leaving}_replyEventName(t){return`chan_reply_${t}`}_on(t,r,n){const s=t.toLocaleLowerCase(),a={type:s,filter:r,callback:n};return this.bindings[s]?this.bindings[s].push(a):this.bindings[s]=[a],this}_off(t,r){const n=t.toLocaleLowerCase();return this.bindings[n]&&(this.bindings[n]=this.bindings[n].filter(s=>{var a;return!(((a=s.type)===null||a===void 0?void 0:a.toLocaleLowerCase())===n&&Uv.isEqual(s.filter,r))})),this}static isEqual(t,r){if(Object.keys(t).length!==Object.keys(r).length)return!1;for(const n in t)if(t[n]!==r[n])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(t){this._on(ia.close,{},t)}_onError(t){this._on(ia.error,{},r=>t(r))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(t=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Rn.joining,this.joinPush.resend(t))}_getPayloadRecords(t){const r={new:{},old:{}};return(t.type==="INSERT"||t.type==="UPDATE")&&(r.new=fS(t.columns,t.record)),(t.type==="UPDATE"||t.type==="DELETE")&&(r.old=fS(t.columns,t.old_record)),r}}const my=()=>{},ih={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},v3=[1e3,2e3,5e3,1e4],b3=1e4,w3=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class j3{constructor(t,r){var n;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=ux,this.transport=null,this.heartbeatIntervalMs=ih.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=my,this.ref=0,this.reconnectTimer=null,this.logger=my,this.conn=null,this.sendBuffer=[],this.serializer=new f3,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=s=>{let a;return s?a=s:typeof fetch>"u"?a=(...l)=>Wd(async()=>{const{default:u}=await Promise.resolve().then(()=>cu);return{default:u}},void 0).then(({default:u})=>u(...l)).catch(u=>{throw new Error(`Failed to load @supabase/node-fetch: ${u.message}. This is required for HTTP requests in Node.js environments without native fetch.`)}):a=fetch,(...l)=>a(...l)},!(!((n=r==null?void 0:r.params)===null||n===void 0)&&n.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=r.params.apikey,this.endPoint=`${t}/${dx.websocket}`,this.httpEndpoint=fE(t),this._initializeOptions(r),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(r==null?void 0:r.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=a3.createWebSocket(this.endpointURL())}catch(t){this._setConnectionState("disconnected");const r=t.message;throw r.includes("Node.js")?new Error(`${r}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${r}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:c3}))}disconnect(t,r){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const n=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(n),this._setConnectionState("disconnected")},t?this.conn.close(t,r??""):this.conn.close(),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(t){const r=await t.unsubscribe();return this.channels.length===0&&this.disconnect(),r}async removeAllChannels(){const t=await Promise.all(this.channels.map(r=>r.unsubscribe()));return this.channels=[],this.disconnect(),t}log(t,r,n){this.logger(t,r,n)}connectionState(){switch(this.conn&&this.conn.readyState){case yd.connecting:return _l.Connecting;case yd.open:return _l.Open;case yd.closing:return _l.Closing;default:return _l.Closed}}isConnected(){return this.connectionState()===_l.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(t,r={config:{}}){const n=`realtime:${t}`,s=this.getChannels().find(a=>a.topic===n);if(s)return s;{const a=new Uv(`realtime:${t}`,r,this);return this.channels.push(a),a}}push(t){const{topic:r,event:n,payload:s,ref:a}=t,l=()=>{this.encode(t,u=>{var d;(d=this.conn)===null||d===void 0||d.send(u)})};this.log("push",`${r} ${n} (${a})`,s),this.isConnected()?l():this.sendBuffer.push(l)}async setAuth(t=null){this._authPromise=this._performAuth(t);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var t;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(r){this.log("error","error in heartbeat callback",r)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(r){this.log("error","error in heartbeat callback",r)}this._wasManualDisconnect=!1,(t=this.conn)===null||t===void 0||t.close(u3,"heartbeat timeout"),setTimeout(()=>{var r;this.isConnected()||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout()},ih.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(r){this.log("error","error in heartbeat callback",r)}this._setAuthSafely("heartbeat")}onHeartbeat(t){this.heartbeatCallback=t}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(t=>t()),this.sendBuffer=[])}_makeRef(){let t=this.ref+1;return t===this.ref?this.ref=0:this.ref=t,this.ref.toString()}_leaveOpenTopic(t){let r=this.channels.find(n=>n.topic===t&&(n._isJoined()||n._isJoining()));r&&(this.log("transport",`leaving duplicate topic "${t}"`),r.unsubscribe())}_remove(t){this.channels=this.channels.filter(r=>r.topic!==t.topic)}_onConnMessage(t){this.decode(t.data,r=>{if(r.topic==="phoenix"&&r.event==="phx_reply")try{this.heartbeatCallback(r.payload.status==="ok"?"ok":"error")}catch(m){this.log("error","error in heartbeat callback",m)}r.ref&&r.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:n,event:s,payload:a,ref:l}=r,u=l?`(${l})`:"",d=a.status||"";this.log("receive",`${d} ${n} ${s} ${u}`.trim(),a),this.channels.filter(m=>m._isMember(n)).forEach(m=>m._trigger(s,a,l)),this._triggerStateCallbacks("message",r)})}_clearTimer(t){var r;t==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):t==="reconnect"&&((r=this.reconnectTimer)===null||r===void 0||r.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=t=>this._onConnError(t),this.conn.onmessage=t=>this._onConnMessage(t),this.conn.onclose=t=>this._onConnClose(t))}_teardownConnection(){this.conn&&(this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null),this._clearAllTimers(),this.channels.forEach(t=>t.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const t=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(t),this.workerRef.onerror=r=>{this.log("worker","worker error",r.message),this.workerRef.terminate()},this.workerRef.onmessage=r=>{r.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(t){var r;this._setConnectionState("disconnected"),this.log("transport","close",t),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout(),this._triggerStateCallbacks("close",t)}_onConnError(t){this._setConnectionState("disconnected"),this.log("transport",`${t}`),this._triggerChanError(),this._triggerStateCallbacks("error",t)}_triggerChanError(){this.channels.forEach(t=>t._trigger(ia.error))}_appendParams(t,r){if(Object.keys(r).length===0)return t;const n=t.match(/\?/)?"&":"?",s=new URLSearchParams(r);return`${t}${n}${s}`}_workerObjectUrl(t){let r;if(t)r=t;else{const n=new Blob([w3],{type:"application/javascript"});r=URL.createObjectURL(n)}return r}_setConnectionState(t,r=!1){this._connectionState=t,t==="connecting"?this._wasManualDisconnect=!1:t==="disconnecting"&&(this._wasManualDisconnect=r)}async _performAuth(t=null){let r;t?r=t:this.accessToken?r=await this.accessToken():r=this.accessTokenValue,this.accessTokenValue!=r&&(this.accessTokenValue=r,this.channels.forEach(n=>{const s={access_token:r,version:l3};r&&n.updateJoinPayload(s),n.joinedOnce&&n._isJoined()&&n._push(ia.access_token,{access_token:r})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(t="general"){this.setAuth().catch(r=>{this.log("error",`error setting auth in ${t}`,r)})}_triggerStateCallbacks(t,r){try{this.stateChangeCallbacks[t].forEach(n=>{try{n(r)}catch(s){this.log("error",`error in ${t} callback`,s)}})}catch(n){this.log("error",`error triggering ${t} callbacks`,n)}}_setupReconnectionTimer(){this.reconnectTimer=new uE(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},ih.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(t){var r,n,s,a,l,u,d,m,f;if(this.transport=(r=t==null?void 0:t.transport)!==null&&r!==void 0?r:null,this.timeout=(n=t==null?void 0:t.timeout)!==null&&n!==void 0?n:ux,this.heartbeatIntervalMs=(s=t==null?void 0:t.heartbeatIntervalMs)!==null&&s!==void 0?s:ih.HEARTBEAT_INTERVAL,this.worker=(a=t==null?void 0:t.worker)!==null&&a!==void 0?a:!1,this.accessToken=(l=t==null?void 0:t.accessToken)!==null&&l!==void 0?l:null,this.heartbeatCallback=(u=t==null?void 0:t.heartbeatCallback)!==null&&u!==void 0?u:my,t!=null&&t.params&&(this.params=t.params),t!=null&&t.logger&&(this.logger=t.logger),(t!=null&&t.logLevel||t!=null&&t.log_level)&&(this.logLevel=t.logLevel||t.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(d=t==null?void 0:t.reconnectAfterMs)!==null&&d!==void 0?d:(p=>v3[p-1]||b3),this.encode=(m=t==null?void 0:t.encode)!==null&&m!==void 0?m:((p,x)=>x(JSON.stringify(p))),this.decode=(f=t==null?void 0:t.decode)!==null&&f!==void 0?f:this.serializer.decode.bind(this.serializer),this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=t==null?void 0:t.workerUrl}}}class Bv extends Error{constructor(t){super(t),this.__isStorageError=!0,this.name="StorageError"}}function Cn(e){return typeof e=="object"&&e!==null&&"__isStorageError"in e}class S3 extends Bv{constructor(t,r,n){super(t),this.name="StorageApiError",this.status=r,this.statusCode=n}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class hx extends Bv{constructor(t,r){super(t),this.name="StorageUnknownError",this.originalError=r}}var k3=function(e,t,r,n){function s(a){return a instanceof r?a:new r(function(l){l(a)})}return new(r||(r=Promise))(function(a,l){function u(f){try{m(n.next(f))}catch(p){l(p)}}function d(f){try{m(n.throw(f))}catch(p){l(p)}}function m(f){f.done?a(f.value):s(f.value).then(u,d)}m((n=n.apply(e,t||[])).next())})};const hE=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...r)=>Wd(async()=>{const{default:n}=await Promise.resolve().then(()=>cu);return{default:n}},void 0).then(({default:n})=>n(...r)):t=fetch,(...r)=>t(...r)},N3=()=>k3(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield Wd(()=>Promise.resolve().then(()=>cu),void 0)).Response:Response}),mx=e=>{if(Array.isArray(e))return e.map(r=>mx(r));if(typeof e=="function"||e!==Object(e))return e;const t={};return Object.entries(e).forEach(([r,n])=>{const s=r.replace(/([-_][a-z])/gi,a=>a.toUpperCase().replace(/[-_]/g,""));t[s]=mx(n)}),t},_3=e=>{if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)};var Yl=function(e,t,r,n){function s(a){return a instanceof r?a:new r(function(l){l(a)})}return new(r||(r=Promise))(function(a,l){function u(f){try{m(n.next(f))}catch(p){l(p)}}function d(f){try{m(n.throw(f))}catch(p){l(p)}}function m(f){f.done?a(f.value):s(f.value).then(u,d)}m((n=n.apply(e,t||[])).next())})};const py=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),C3=(e,t,r)=>Yl(void 0,void 0,void 0,function*(){const n=yield N3();e instanceof n&&!(r!=null&&r.noResolveJson)?e.json().then(s=>{const a=e.status||500,l=(s==null?void 0:s.statusCode)||a+"";t(new S3(py(s),a,l))}).catch(s=>{t(new hx(py(s),s))}):t(new hx(py(e),e))}),E3=(e,t,r,n)=>{const s={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"||!n?s:(_3(n)?(s.headers=Object.assign({"Content-Type":"application/json"},t==null?void 0:t.headers),s.body=JSON.stringify(n)):s.body=n,t!=null&&t.duplex&&(s.duplex=t.duplex),Object.assign(Object.assign({},s),r))};function Vd(e,t,r,n,s,a){return Yl(this,void 0,void 0,function*(){return new Promise((l,u)=>{e(r,E3(t,n,s,a)).then(d=>{if(!d.ok)throw d;return n!=null&&n.noResolveJson?d:d.json()}).then(d=>l(d)).catch(d=>C3(d,u,n))})})}function Fh(e,t,r,n){return Yl(this,void 0,void 0,function*(){return Vd(e,"GET",t,r,n)})}function ka(e,t,r,n,s){return Yl(this,void 0,void 0,function*(){return Vd(e,"POST",t,n,s,r)})}function px(e,t,r,n,s){return Yl(this,void 0,void 0,function*(){return Vd(e,"PUT",t,n,s,r)})}function A3(e,t,r,n){return Yl(this,void 0,void 0,function*(){return Vd(e,"HEAD",t,Object.assign(Object.assign({},r),{noResolveJson:!0}),n)})}function mE(e,t,r,n,s){return Yl(this,void 0,void 0,function*(){return Vd(e,"DELETE",t,n,s,r)})}var P3=function(e,t,r,n){function s(a){return a instanceof r?a:new r(function(l){l(a)})}return new(r||(r=Promise))(function(a,l){function u(f){try{m(n.next(f))}catch(p){l(p)}}function d(f){try{m(n.throw(f))}catch(p){l(p)}}function m(f){f.done?a(f.value):s(f.value).then(u,d)}m((n=n.apply(e,t||[])).next())})};class O3{constructor(t,r){this.downloadFn=t,this.shouldThrowOnError=r}then(t,r){return this.execute().then(t,r)}execute(){return P3(this,void 0,void 0,function*(){try{return{data:(yield this.downloadFn()).body,error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Cn(t))return{data:null,error:t};throw t}})}}var I3=function(e,t,r,n){function s(a){return a instanceof r?a:new r(function(l){l(a)})}return new(r||(r=Promise))(function(a,l){function u(f){try{m(n.next(f))}catch(p){l(p)}}function d(f){try{m(n.throw(f))}catch(p){l(p)}}function m(f){f.done?a(f.value):s(f.value).then(u,d)}m((n=n.apply(e,t||[])).next())})};class T3{constructor(t,r){this.downloadFn=t,this.shouldThrowOnError=r}asStream(){return new O3(this.downloadFn,this.shouldThrowOnError)}then(t,r){return this.execute().then(t,r)}execute(){return I3(this,void 0,void 0,function*(){try{return{data:yield(yield this.downloadFn()).blob(),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Cn(t))return{data:null,error:t};throw t}})}}var Xs=function(e,t,r,n){function s(a){return a instanceof r?a:new r(function(l){l(a)})}return new(r||(r=Promise))(function(a,l){function u(f){try{m(n.next(f))}catch(p){l(p)}}function d(f){try{m(n.throw(f))}catch(p){l(p)}}function m(f){f.done?a(f.value):s(f.value).then(u,d)}m((n=n.apply(e,t||[])).next())})};const D3={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},pS={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class $3{constructor(t,r={},n,s){this.shouldThrowOnError=!1,this.url=t,this.headers=r,this.bucketId=n,this.fetch=hE(s)}throwOnError(){return this.shouldThrowOnError=!0,this}uploadOrUpdate(t,r,n,s){return Xs(this,void 0,void 0,function*(){try{let a;const l=Object.assign(Object.assign({},pS),s);let u=Object.assign(Object.assign({},this.headers),t==="POST"&&{"x-upsert":String(l.upsert)});const d=l.metadata;typeof Blob<"u"&&n instanceof Blob?(a=new FormData,a.append("cacheControl",l.cacheControl),d&&a.append("metadata",this.encodeMetadata(d)),a.append("",n)):typeof FormData<"u"&&n instanceof FormData?(a=n,a.append("cacheControl",l.cacheControl),d&&a.append("metadata",this.encodeMetadata(d))):(a=n,u["cache-control"]=`max-age=${l.cacheControl}`,u["content-type"]=l.contentType,d&&(u["x-metadata"]=this.toBase64(this.encodeMetadata(d)))),s!=null&&s.headers&&(u=Object.assign(Object.assign({},u),s.headers));const m=this._removeEmptyFolders(r),f=this._getFinalPath(m),p=yield(t=="PUT"?px:ka)(this.fetch,`${this.url}/object/${f}`,a,Object.assign({headers:u},l!=null&&l.duplex?{duplex:l.duplex}:{}));return{data:{path:m,id:p.Id,fullPath:p.Key},error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(Cn(a))return{data:null,error:a};throw a}})}upload(t,r,n){return Xs(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",t,r,n)})}uploadToSignedUrl(t,r,n,s){return Xs(this,void 0,void 0,function*(){const a=this._removeEmptyFolders(t),l=this._getFinalPath(a),u=new URL(this.url+`/object/upload/sign/${l}`);u.searchParams.set("token",r);try{let d;const m=Object.assign({upsert:pS.upsert},s),f=Object.assign(Object.assign({},this.headers),{"x-upsert":String(m.upsert)});typeof Blob<"u"&&n instanceof Blob?(d=new FormData,d.append("cacheControl",m.cacheControl),d.append("",n)):typeof FormData<"u"&&n instanceof FormData?(d=n,d.append("cacheControl",m.cacheControl)):(d=n,f["cache-control"]=`max-age=${m.cacheControl}`,f["content-type"]=m.contentType);const p=yield px(this.fetch,u.toString(),d,{headers:f});return{data:{path:a,fullPath:p.Key},error:null}}catch(d){if(this.shouldThrowOnError)throw d;if(Cn(d))return{data:null,error:d};throw d}})}createSignedUploadUrl(t,r){return Xs(this,void 0,void 0,function*(){try{let n=this._getFinalPath(t);const s=Object.assign({},this.headers);r!=null&&r.upsert&&(s["x-upsert"]="true");const a=yield ka(this.fetch,`${this.url}/object/upload/sign/${n}`,{},{headers:s}),l=new URL(this.url+a.url),u=l.searchParams.get("token");if(!u)throw new Bv("No token returned by API");return{data:{signedUrl:l.toString(),path:t,token:u},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Cn(n))return{data:null,error:n};throw n}})}update(t,r,n){return Xs(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",t,r,n)})}move(t,r,n){return Xs(this,void 0,void 0,function*(){try{return{data:yield ka(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:t,destinationKey:r,destinationBucket:n==null?void 0:n.destinationBucket},{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Cn(s))return{data:null,error:s};throw s}})}copy(t,r,n){return Xs(this,void 0,void 0,function*(){try{return{data:{path:(yield ka(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:t,destinationKey:r,destinationBucket:n==null?void 0:n.destinationBucket},{headers:this.headers})).Key},error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Cn(s))return{data:null,error:s};throw s}})}createSignedUrl(t,r,n){return Xs(this,void 0,void 0,function*(){try{let s=this._getFinalPath(t),a=yield ka(this.fetch,`${this.url}/object/sign/${s}`,Object.assign({expiresIn:r},n!=null&&n.transform?{transform:n.transform}:{}),{headers:this.headers});const l=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return a={signedUrl:encodeURI(`${this.url}${a.signedURL}${l}`)},{data:a,error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Cn(s))return{data:null,error:s};throw s}})}createSignedUrls(t,r,n){return Xs(this,void 0,void 0,function*(){try{const s=yield ka(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:r,paths:t},{headers:this.headers}),a=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return{data:s.map(l=>Object.assign(Object.assign({},l),{signedUrl:l.signedURL?encodeURI(`${this.url}${l.signedURL}${a}`):null})),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Cn(s))return{data:null,error:s};throw s}})}download(t,r){const s=typeof(r==null?void 0:r.transform)<"u"?"render/image/authenticated":"object",a=this.transformOptsToQueryString((r==null?void 0:r.transform)||{}),l=a?`?${a}`:"",u=this._getFinalPath(t),d=()=>Fh(this.fetch,`${this.url}/${s}/${u}${l}`,{headers:this.headers,noResolveJson:!0});return new T3(d,this.shouldThrowOnError)}info(t){return Xs(this,void 0,void 0,function*(){const r=this._getFinalPath(t);try{const n=yield Fh(this.fetch,`${this.url}/object/info/${r}`,{headers:this.headers});return{data:mx(n),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Cn(n))return{data:null,error:n};throw n}})}exists(t){return Xs(this,void 0,void 0,function*(){const r=this._getFinalPath(t);try{return yield A3(this.fetch,`${this.url}/object/${r}`,{headers:this.headers}),{data:!0,error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Cn(n)&&n instanceof hx){const s=n.originalError;if([400,404].includes(s==null?void 0:s.status))return{data:!1,error:n}}throw n}})}getPublicUrl(t,r){const n=this._getFinalPath(t),s=[],a=r!=null&&r.download?`download=${r.download===!0?"":r.download}`:"";a!==""&&s.push(a);const u=typeof(r==null?void 0:r.transform)<"u"?"render/image":"object",d=this.transformOptsToQueryString((r==null?void 0:r.transform)||{});d!==""&&s.push(d);let m=s.join("&");return m!==""&&(m=`?${m}`),{data:{publicUrl:encodeURI(`${this.url}/${u}/public/${n}${m}`)}}}remove(t){return Xs(this,void 0,void 0,function*(){try{return{data:yield mE(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:t},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Cn(r))return{data:null,error:r};throw r}})}list(t,r,n){return Xs(this,void 0,void 0,function*(){try{const s=Object.assign(Object.assign(Object.assign({},D3),r),{prefix:t||""});return{data:yield ka(this.fetch,`${this.url}/object/list/${this.bucketId}`,s,{headers:this.headers},n),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Cn(s))return{data:null,error:s};throw s}})}listV2(t,r){return Xs(this,void 0,void 0,function*(){try{const n=Object.assign({},t);return{data:yield ka(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,n,{headers:this.headers},r),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Cn(n))return{data:null,error:n};throw n}})}encodeMetadata(t){return JSON.stringify(t)}toBase64(t){return typeof Buffer<"u"?Buffer.from(t).toString("base64"):btoa(t)}_getFinalPath(t){return`${this.bucketId}/${t.replace(/^\/+/,"")}`}_removeEmptyFolders(t){return t.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(t){const r=[];return t.width&&r.push(`width=${t.width}`),t.height&&r.push(`height=${t.height}`),t.resize&&r.push(`resize=${t.resize}`),t.format&&r.push(`format=${t.format}`),t.quality&&r.push(`quality=${t.quality}`),r.join("&")}}const R3="2.74.0",M3={"X-Client-Info":`storage-js/${R3}`};var Nc=function(e,t,r,n){function s(a){return a instanceof r?a:new r(function(l){l(a)})}return new(r||(r=Promise))(function(a,l){function u(f){try{m(n.next(f))}catch(p){l(p)}}function d(f){try{m(n.throw(f))}catch(p){l(p)}}function m(f){f.done?a(f.value):s(f.value).then(u,d)}m((n=n.apply(e,t||[])).next())})};class F3{constructor(t,r={},n,s){this.shouldThrowOnError=!1;const a=new URL(t);s!=null&&s.useNewHostname&&/supabase\.(co|in|red)$/.test(a.hostname)&&!a.hostname.includes("storage.supabase.")&&(a.hostname=a.hostname.replace("supabase.","storage.supabase.")),this.url=a.href.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},M3),r),this.fetch=hE(n)}throwOnError(){return this.shouldThrowOnError=!0,this}listBuckets(){return Nc(this,void 0,void 0,function*(){try{return{data:yield Fh(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Cn(t))return{data:null,error:t};throw t}})}getBucket(t){return Nc(this,void 0,void 0,function*(){try{return{data:yield Fh(this.fetch,`${this.url}/bucket/${t}`,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Cn(r))return{data:null,error:r};throw r}})}createBucket(t){return Nc(this,arguments,void 0,function*(r,n={public:!1}){try{return{data:yield ka(this.fetch,`${this.url}/bucket`,{id:r,name:r,type:n.type,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Cn(s))return{data:null,error:s};throw s}})}updateBucket(t,r){return Nc(this,void 0,void 0,function*(){try{return{data:yield px(this.fetch,`${this.url}/bucket/${t}`,{id:t,name:t,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Cn(n))return{data:null,error:n};throw n}})}emptyBucket(t){return Nc(this,void 0,void 0,function*(){try{return{data:yield ka(this.fetch,`${this.url}/bucket/${t}/empty`,{},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Cn(r))return{data:null,error:r};throw r}})}deleteBucket(t){return Nc(this,void 0,void 0,function*(){try{return{data:yield mE(this.fetch,`${this.url}/bucket/${t}`,{},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Cn(r))return{data:null,error:r};throw r}})}}class L3 extends F3{constructor(t,r={},n,s){super(t,r,n,s)}from(t){return new $3(this.url,this.headers,t,this.fetch)}}const z3="2.74.0";let cd="";typeof Deno<"u"?cd="deno":typeof document<"u"?cd="web":typeof navigator<"u"&&navigator.product==="ReactNative"?cd="react-native":cd="node";const U3={"X-Client-Info":`supabase-js-${cd}/${z3}`},B3={headers:U3},W3={schema:"public"},V3={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},q3={};var H3=function(e,t,r,n){function s(a){return a instanceof r?a:new r(function(l){l(a)})}return new(r||(r=Promise))(function(a,l){function u(f){try{m(n.next(f))}catch(p){l(p)}}function d(f){try{m(n.throw(f))}catch(p){l(p)}}function m(f){f.done?a(f.value):s(f.value).then(u,d)}m((n=n.apply(e,t||[])).next())})};const K3=e=>{let t;return e?t=e:typeof fetch>"u"?t=sE:t=fetch,(...r)=>t(...r)},G3=()=>typeof Headers>"u"?iE:Headers,Y3=(e,t,r)=>{const n=K3(r),s=G3();return(a,l)=>H3(void 0,void 0,void 0,function*(){var u;const d=(u=yield t())!==null&&u!==void 0?u:e;let m=new s(l==null?void 0:l.headers);return m.has("apikey")||m.set("apikey",e),m.has("Authorization")||m.set("Authorization",`Bearer ${d}`),n(a,Object.assign(Object.assign({},l),{headers:m}))})};var J3=function(e,t,r,n){function s(a){return a instanceof r?a:new r(function(l){l(a)})}return new(r||(r=Promise))(function(a,l){function u(f){try{m(n.next(f))}catch(p){l(p)}}function d(f){try{m(n.throw(f))}catch(p){l(p)}}function m(f){f.done?a(f.value):s(f.value).then(u,d)}m((n=n.apply(e,t||[])).next())})};function X3(e){return e.endsWith("/")?e:e+"/"}function Q3(e,t){var r,n;const{db:s,auth:a,realtime:l,global:u}=e,{db:d,auth:m,realtime:f,global:p}=t,x={db:Object.assign(Object.assign({},d),s),auth:Object.assign(Object.assign({},m),a),realtime:Object.assign(Object.assign({},f),l),storage:{},global:Object.assign(Object.assign(Object.assign({},p),u),{headers:Object.assign(Object.assign({},(r=p==null?void 0:p.headers)!==null&&r!==void 0?r:{}),(n=u==null?void 0:u.headers)!==null&&n!==void 0?n:{})}),accessToken:()=>J3(this,void 0,void 0,function*(){return""})};return e.accessToken?x.accessToken=e.accessToken:delete x.accessToken,x}function Z3(e){const t=e==null?void 0:e.trim();if(!t)throw new Error("supabaseUrl is required.");if(!t.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(X3(t))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}const pE="2.74.0",Mc=30*1e3,gx=3,gy=gx*Mc,e6="http://localhost:9999",t6="supabase.auth.token",r6={"X-Client-Info":`gotrue-js/${pE}`},yx="X-Supabase-Api-Version",gE={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},n6=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,s6=600*1e3;class Nd extends Error{constructor(t,r,n){super(t),this.__isAuthError=!0,this.name="AuthError",this.status=r,this.code=n}}function Pt(e){return typeof e=="object"&&e!==null&&"__isAuthError"in e}class i6 extends Nd{constructor(t,r,n){super(t,r,n),this.name="AuthApiError",this.status=r,this.code=n}}function a6(e){return Pt(e)&&e.name==="AuthApiError"}class Cl extends Nd{constructor(t,r){super(t),this.name="AuthUnknownError",this.originalError=r}}class Zo extends Nd{constructor(t,r,n,s){super(t,n,s),this.name=r,this.status=n}}class Fo extends Zo{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function o6(e){return Pt(e)&&e.name==="AuthSessionMissingError"}class _c extends Zo{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class ah extends Zo{constructor(t){super(t,"AuthInvalidCredentialsError",400,void 0)}}class oh extends Zo{constructor(t,r=null){super(t,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function l6(e){return Pt(e)&&e.name==="AuthImplicitGrantRedirectError"}class gS extends Zo{constructor(t,r=null){super(t,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class xx extends Zo{constructor(t,r){super(t,"AuthRetryableFetchError",r,void 0)}}function yy(e){return Pt(e)&&e.name==="AuthRetryableFetchError"}class yS extends Zo{constructor(t,r,n){super(t,"AuthWeakPasswordError",r,"weak_password"),this.reasons=n}}class vx extends Zo{constructor(t){super(t,"AuthInvalidJwtError",400,"invalid_jwt")}}const Lh="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),xS=` 	
\r=`.split(""),c6=(()=>{const e=new Array(128);for(let t=0;t<e.length;t+=1)e[t]=-1;for(let t=0;t<xS.length;t+=1)e[xS[t].charCodeAt(0)]=-2;for(let t=0;t<Lh.length;t+=1)e[Lh[t].charCodeAt(0)]=t;return e})();function vS(e,t,r){if(e!==null)for(t.queue=t.queue<<8|e,t.queuedBits+=8;t.queuedBits>=6;){const n=t.queue>>t.queuedBits-6&63;r(Lh[n]),t.queuedBits-=6}else if(t.queuedBits>0)for(t.queue=t.queue<<6-t.queuedBits,t.queuedBits=6;t.queuedBits>=6;){const n=t.queue>>t.queuedBits-6&63;r(Lh[n]),t.queuedBits-=6}}function yE(e,t,r){const n=c6[e];if(n>-1)for(t.queue=t.queue<<6|n,t.queuedBits+=6;t.queuedBits>=8;)r(t.queue>>t.queuedBits-8&255),t.queuedBits-=8;else{if(n===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(e)}"`)}}function bS(e){const t=[],r=l=>{t.push(String.fromCodePoint(l))},n={utf8seq:0,codepoint:0},s={queue:0,queuedBits:0},a=l=>{f6(l,n,r)};for(let l=0;l<e.length;l+=1)yE(e.charCodeAt(l),s,a);return t.join("")}function u6(e,t){if(e<=127){t(e);return}else if(e<=2047){t(192|e>>6),t(128|e&63);return}else if(e<=65535){t(224|e>>12),t(128|e>>6&63),t(128|e&63);return}else if(e<=1114111){t(240|e>>18),t(128|e>>12&63),t(128|e>>6&63),t(128|e&63);return}throw new Error(`Unrecognized Unicode codepoint: ${e.toString(16)}`)}function d6(e,t){for(let r=0;r<e.length;r+=1){let n=e.charCodeAt(r);if(n>55295&&n<=56319){const s=(n-55296)*1024&65535;n=(e.charCodeAt(r+1)-56320&65535|s)+65536,r+=1}u6(n,t)}}function f6(e,t,r){if(t.utf8seq===0){if(e<=127){r(e);return}for(let n=1;n<6;n+=1)if((e>>7-n&1)===0){t.utf8seq=n;break}if(t.utf8seq===2)t.codepoint=e&31;else if(t.utf8seq===3)t.codepoint=e&15;else if(t.utf8seq===4)t.codepoint=e&7;else throw new Error("Invalid UTF-8 sequence");t.utf8seq-=1}else if(t.utf8seq>0){if(e<=127)throw new Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|e&63,t.utf8seq-=1,t.utf8seq===0&&r(t.codepoint)}}function Vc(e){const t=[],r={queue:0,queuedBits:0},n=s=>{t.push(s)};for(let s=0;s<e.length;s+=1)yE(e.charCodeAt(s),r,n);return new Uint8Array(t)}function h6(e){const t=[];return d6(e,r=>t.push(r)),new Uint8Array(t)}function Al(e){const t=[],r={queue:0,queuedBits:0},n=s=>{t.push(s)};return e.forEach(s=>vS(s,r,n)),vS(null,r,n),t.join("")}function m6(e){return Math.round(Date.now()/1e3)+e}function p6(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){const t=Math.random()*16|0;return(e=="x"?t:t&3|8).toString(16)})}const ui=()=>typeof window<"u"&&typeof document<"u",vl={tested:!1,writable:!1},xE=()=>{if(!ui())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(vl.tested)return vl.writable;const e=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),vl.tested=!0,vl.writable=!0}catch{vl.tested=!0,vl.writable=!1}return vl.writable};function g6(e){const t={},r=new URL(e);if(r.hash&&r.hash[0]==="#")try{new URLSearchParams(r.hash.substring(1)).forEach((s,a)=>{t[a]=s})}catch{}return r.searchParams.forEach((n,s)=>{t[s]=n}),t}const vE=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...r)=>Wd(async()=>{const{default:n}=await Promise.resolve().then(()=>cu);return{default:n}},void 0).then(({default:n})=>n(...r)):t=fetch,(...r)=>t(...r)},y6=e=>typeof e=="object"&&e!==null&&"status"in e&&"ok"in e&&"json"in e&&typeof e.json=="function",Fc=async(e,t,r)=>{await e.setItem(t,JSON.stringify(r))},bl=async(e,t)=>{const r=await e.getItem(t);if(!r)return null;try{return JSON.parse(r)}catch{return r}},Mo=async(e,t)=>{await e.removeItem(t)};class Wm{constructor(){this.promise=new Wm.promiseConstructor((t,r)=>{this.resolve=t,this.reject=r})}}Wm.promiseConstructor=Promise;function xy(e){const t=e.split(".");if(t.length!==3)throw new vx("Invalid JWT structure");for(let n=0;n<t.length;n++)if(!n6.test(t[n]))throw new vx("JWT not in base64url format");return{header:JSON.parse(bS(t[0])),payload:JSON.parse(bS(t[1])),signature:Vc(t[2]),raw:{header:t[0],payload:t[1]}}}async function x6(e){return await new Promise(t=>{setTimeout(()=>t(null),e)})}function v6(e,t){return new Promise((n,s)=>{(async()=>{for(let a=0;a<1/0;a++)try{const l=await e(a);if(!t(a,null,l)){n(l);return}}catch(l){if(!t(a,l)){s(l);return}}})()})}function b6(e){return("0"+e.toString(16)).substr(-2)}function w6(){const t=new Uint32Array(56);if(typeof crypto>"u"){const r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",n=r.length;let s="";for(let a=0;a<56;a++)s+=r.charAt(Math.floor(Math.random()*n));return s}return crypto.getRandomValues(t),Array.from(t,b6).join("")}async function j6(e){const r=new TextEncoder().encode(e),n=await crypto.subtle.digest("SHA-256",r),s=new Uint8Array(n);return Array.from(s).map(a=>String.fromCharCode(a)).join("")}async function S6(e){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),e;const r=await j6(e);return btoa(r).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Cc(e,t,r=!1){const n=w6();let s=n;r&&(s+="/PASSWORD_RECOVERY"),await Fc(e,`${t}-code-verifier`,s);const a=await S6(n);return[a,n===a?"plain":"s256"]}const k6=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function N6(e){const t=e.headers.get(yx);if(!t||!t.match(k6))return null;try{return new Date(`${t}T00:00:00.0Z`)}catch{return null}}function _6(e){if(!e)throw new Error("Missing exp claim");const t=Math.floor(Date.now()/1e3);if(e<=t)throw new Error("JWT has expired")}function C6(e){switch(e){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const E6=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Ec(e){if(!E6.test(e))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function vy(){const e={};return new Proxy(e,{get:(t,r)=>{if(r==="__isUserNotAvailableProxy")return!0;if(typeof r=="symbol"){const n=r.toString();if(n==="Symbol(Symbol.toPrimitive)"||n==="Symbol(Symbol.toStringTag)"||n==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${r}" property of the session object is not supported. Please use getUser() instead.`)},set:(t,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(t,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function wS(e){return JSON.parse(JSON.stringify(e))}var A6=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(e);s<n.length;s++)t.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(e,n[s])&&(r[n[s]]=e[n[s]]);return r};const jl=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),P6=[502,503,504];async function jS(e){var t;if(!y6(e))throw new xx(jl(e),0);if(P6.includes(e.status))throw new xx(jl(e),e.status);let r;try{r=await e.json()}catch(a){throw new Cl(jl(a),a)}let n;const s=N6(e);if(s&&s.getTime()>=gE["2024-01-01"].timestamp&&typeof r=="object"&&r&&typeof r.code=="string"?n=r.code:typeof r=="object"&&r&&typeof r.error_code=="string"&&(n=r.error_code),n){if(n==="weak_password")throw new yS(jl(r),e.status,((t=r.weak_password)===null||t===void 0?void 0:t.reasons)||[]);if(n==="session_not_found")throw new Fo}else if(typeof r=="object"&&r&&typeof r.weak_password=="object"&&r.weak_password&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.reasons.reduce((a,l)=>a&&typeof l=="string",!0))throw new yS(jl(r),e.status,r.weak_password.reasons);throw new i6(jl(r),e.status||500,n)}const O6=(e,t,r,n)=>{const s={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"?s:(s.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},t==null?void 0:t.headers),s.body=JSON.stringify(n),Object.assign(Object.assign({},s),r))};async function Ht(e,t,r,n){var s;const a=Object.assign({},n==null?void 0:n.headers);a[yx]||(a[yx]=gE["2024-01-01"].name),n!=null&&n.jwt&&(a.Authorization=`Bearer ${n.jwt}`);const l=(s=n==null?void 0:n.query)!==null&&s!==void 0?s:{};n!=null&&n.redirectTo&&(l.redirect_to=n.redirectTo);const u=Object.keys(l).length?"?"+new URLSearchParams(l).toString():"",d=await I6(e,t,r+u,{headers:a,noResolveJson:n==null?void 0:n.noResolveJson},{},n==null?void 0:n.body);return n!=null&&n.xform?n==null?void 0:n.xform(d):{data:Object.assign({},d),error:null}}async function I6(e,t,r,n,s,a){const l=O6(t,n,s,a);let u;try{u=await e(r,Object.assign({},l))}catch(d){throw console.error(d),new xx(jl(d),0)}if(u.ok||await jS(u),n!=null&&n.noResolveJson)return u;try{return await u.json()}catch(d){await jS(d)}}function sa(e){var t;let r=null;$6(e)&&(r=Object.assign({},e),e.expires_at||(r.expires_at=m6(e.expires_in)));const n=(t=e.user)!==null&&t!==void 0?t:e;return{data:{session:r,user:n},error:null}}function SS(e){const t=sa(e);return!t.error&&e.weak_password&&typeof e.weak_password=="object"&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.message&&typeof e.weak_password.message=="string"&&e.weak_password.reasons.reduce((r,n)=>r&&typeof n=="string",!0)&&(t.data.weak_password=e.weak_password),t}function Wo(e){var t;return{data:{user:(t=e.user)!==null&&t!==void 0?t:e},error:null}}function T6(e){return{data:e,error:null}}function D6(e){const{action_link:t,email_otp:r,hashed_token:n,redirect_to:s,verification_type:a}=e,l=A6(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),u={action_link:t,email_otp:r,hashed_token:n,redirect_to:s,verification_type:a},d=Object.assign({},l);return{data:{properties:u,user:d},error:null}}function kS(e){return e}function $6(e){return e.access_token&&e.refresh_token&&e.expires_in}const by=["global","local","others"];var R6=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(e);s<n.length;s++)t.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(e,n[s])&&(r[n[s]]=e[n[s]]);return r};class M6{constructor({url:t="",headers:r={},fetch:n}){this.url=t,this.headers=r,this.fetch=vE(n),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(t,r=by[0]){if(by.indexOf(r)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${by.join(", ")}`);try{return await Ht(this.fetch,"POST",`${this.url}/logout?scope=${r}`,{headers:this.headers,jwt:t,noResolveJson:!0}),{data:null,error:null}}catch(n){if(Pt(n))return{data:null,error:n};throw n}}async inviteUserByEmail(t,r={}){try{return await Ht(this.fetch,"POST",`${this.url}/invite`,{body:{email:t,data:r.data},headers:this.headers,redirectTo:r.redirectTo,xform:Wo})}catch(n){if(Pt(n))return{data:{user:null},error:n};throw n}}async generateLink(t){try{const{options:r}=t,n=R6(t,["options"]),s=Object.assign(Object.assign({},n),r);return"newEmail"in n&&(s.new_email=n==null?void 0:n.newEmail,delete s.newEmail),await Ht(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:s,headers:this.headers,xform:D6,redirectTo:r==null?void 0:r.redirectTo})}catch(r){if(Pt(r))return{data:{properties:null,user:null},error:r};throw r}}async createUser(t){try{return await Ht(this.fetch,"POST",`${this.url}/admin/users`,{body:t,headers:this.headers,xform:Wo})}catch(r){if(Pt(r))return{data:{user:null},error:r};throw r}}async listUsers(t){var r,n,s,a,l,u,d;try{const m={nextPage:null,lastPage:0,total:0},f=await Ht(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(r=t==null?void 0:t.page)===null||r===void 0?void 0:r.toString())!==null&&n!==void 0?n:"",per_page:(a=(s=t==null?void 0:t.perPage)===null||s===void 0?void 0:s.toString())!==null&&a!==void 0?a:""},xform:kS});if(f.error)throw f.error;const p=await f.json(),x=(l=f.headers.get("x-total-count"))!==null&&l!==void 0?l:0,v=(d=(u=f.headers.get("link"))===null||u===void 0?void 0:u.split(","))!==null&&d!==void 0?d:[];return v.length>0&&(v.forEach(b=>{const w=parseInt(b.split(";")[0].split("=")[1].substring(0,1)),j=JSON.parse(b.split(";")[1].split("=")[1]);m[`${j}Page`]=w}),m.total=parseInt(x)),{data:Object.assign(Object.assign({},p),m),error:null}}catch(m){if(Pt(m))return{data:{users:[]},error:m};throw m}}async getUserById(t){Ec(t);try{return await Ht(this.fetch,"GET",`${this.url}/admin/users/${t}`,{headers:this.headers,xform:Wo})}catch(r){if(Pt(r))return{data:{user:null},error:r};throw r}}async updateUserById(t,r){Ec(t);try{return await Ht(this.fetch,"PUT",`${this.url}/admin/users/${t}`,{body:r,headers:this.headers,xform:Wo})}catch(n){if(Pt(n))return{data:{user:null},error:n};throw n}}async deleteUser(t,r=!1){Ec(t);try{return await Ht(this.fetch,"DELETE",`${this.url}/admin/users/${t}`,{headers:this.headers,body:{should_soft_delete:r},xform:Wo})}catch(n){if(Pt(n))return{data:{user:null},error:n};throw n}}async _listFactors(t){Ec(t.userId);try{const{data:r,error:n}=await Ht(this.fetch,"GET",`${this.url}/admin/users/${t.userId}/factors`,{headers:this.headers,xform:s=>({data:{factors:s},error:null})});return{data:r,error:n}}catch(r){if(Pt(r))return{data:null,error:r};throw r}}async _deleteFactor(t){Ec(t.userId),Ec(t.id);try{return{data:await Ht(this.fetch,"DELETE",`${this.url}/admin/users/${t.userId}/factors/${t.id}`,{headers:this.headers}),error:null}}catch(r){if(Pt(r))return{data:null,error:r};throw r}}async _listOAuthClients(t){var r,n,s,a,l,u,d;try{const m={nextPage:null,lastPage:0,total:0},f=await Ht(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(r=t==null?void 0:t.page)===null||r===void 0?void 0:r.toString())!==null&&n!==void 0?n:"",per_page:(a=(s=t==null?void 0:t.perPage)===null||s===void 0?void 0:s.toString())!==null&&a!==void 0?a:""},xform:kS});if(f.error)throw f.error;const p=await f.json(),x=(l=f.headers.get("x-total-count"))!==null&&l!==void 0?l:0,v=(d=(u=f.headers.get("link"))===null||u===void 0?void 0:u.split(","))!==null&&d!==void 0?d:[];return v.length>0&&(v.forEach(b=>{const w=parseInt(b.split(";")[0].split("=")[1].substring(0,1)),j=JSON.parse(b.split(";")[1].split("=")[1]);m[`${j}Page`]=w}),m.total=parseInt(x)),{data:Object.assign(Object.assign({},p),m),error:null}}catch(m){if(Pt(m))return{data:{clients:[]},error:m};throw m}}async _createOAuthClient(t){try{return await Ht(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:t,headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(Pt(r))return{data:null,error:r};throw r}}async _getOAuthClient(t){try{return await Ht(this.fetch,"GET",`${this.url}/admin/oauth/clients/${t}`,{headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(Pt(r))return{data:null,error:r};throw r}}async _deleteOAuthClient(t){try{return await Ht(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${t}`,{headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(Pt(r))return{data:null,error:r};throw r}}async _regenerateOAuthClientSecret(t){try{return await Ht(this.fetch,"POST",`${this.url}/admin/oauth/clients/${t}/regenerate_secret`,{headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(Pt(r))return{data:null,error:r};throw r}}}function NS(e={}){return{getItem:t=>e[t]||null,setItem:(t,r)=>{e[t]=r},removeItem:t=>{delete e[t]}}}const Ac={debug:!!(globalThis&&xE()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class bE extends Error{constructor(t){super(t),this.isAcquireTimeout=!0}}class F6 extends bE{}async function L6(e,t,r){Ac.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",e,t);const n=new globalThis.AbortController;return t>0&&setTimeout(()=>{n.abort(),Ac.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",e)},t),await Promise.resolve().then(()=>globalThis.navigator.locks.request(e,t===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:n.signal},async s=>{if(s){Ac.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",e,s.name);try{return await r()}finally{Ac.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",e,s.name)}}else{if(t===0)throw Ac.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",e),new F6(`Acquiring an exclusive Navigator LockManager lock "${e}" immediately failed`);if(Ac.debug)try{const a=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(a,null,"  "))}catch(a){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",a)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await r()}}))}function z6(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function wE(e){if(!/^0x[a-fA-F0-9]{40}$/.test(e))throw new Error(`@supabase/auth-js: Address "${e}" is invalid.`);return e.toLowerCase()}function U6(e){return parseInt(e,16)}function B6(e){const t=new TextEncoder().encode(e);return"0x"+Array.from(t,n=>n.toString(16).padStart(2,"0")).join("")}function W6(e){var t;const{chainId:r,domain:n,expirationTime:s,issuedAt:a=new Date,nonce:l,notBefore:u,requestId:d,resources:m,scheme:f,uri:p,version:x}=e;{if(!Number.isInteger(r))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${r}`);if(!n)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(l&&l.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${l}`);if(!p)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(x!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${x}`);if(!((t=e.statement)===null||t===void 0)&&t.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${e.statement}`)}const v=wE(e.address),b=f?`${f}://${n}`:n,w=e.statement?`${e.statement}
`:"",j=`${b} wants you to sign in with your Ethereum account:
${v}

${w}`;let _=`URI: ${p}
Version: ${x}
Chain ID: ${r}${l?`
Nonce: ${l}`:""}
Issued At: ${a.toISOString()}`;if(s&&(_+=`
Expiration Time: ${s.toISOString()}`),u&&(_+=`
Not Before: ${u.toISOString()}`),d&&(_+=`
Request ID: ${d}`),m){let E=`
Resources:`;for(const C of m){if(!C||typeof C!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${C}`);E+=`
- ${C}`}_+=E}return`${j}
${_}`}class _n extends Error{constructor({message:t,code:r,cause:n,name:s}){var a;super(t,{cause:n}),this.__isWebAuthnError=!0,this.name=(a=s??(n instanceof Error?n.name:void 0))!==null&&a!==void 0?a:"Unknown Error",this.code=r}}class zh extends _n{constructor(t,r){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:r,message:t}),this.name="WebAuthnUnknownError",this.originalError=r}}function V6({error:e,options:t}){var r,n,s;const{publicKey:a}=t;if(!a)throw Error("options was missing required publicKey property");if(e.name==="AbortError"){if(t.signal instanceof AbortSignal)return new _n({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:e})}else if(e.name==="ConstraintError"){if(((r=a.authenticatorSelection)===null||r===void 0?void 0:r.requireResidentKey)===!0)return new _n({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:e});if(t.mediation==="conditional"&&((n=a.authenticatorSelection)===null||n===void 0?void 0:n.userVerification)==="required")return new _n({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:e});if(((s=a.authenticatorSelection)===null||s===void 0?void 0:s.userVerification)==="required")return new _n({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:e})}else{if(e.name==="InvalidStateError")return new _n({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:e});if(e.name==="NotAllowedError")return new _n({message:e.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e});if(e.name==="NotSupportedError")return a.pubKeyCredParams.filter(u=>u.type==="public-key").length===0?new _n({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:e}):new _n({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:e});if(e.name==="SecurityError"){const l=window.location.hostname;if(SE(l)){if(a.rp.id!==l)return new _n({message:`The RP ID "${a.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:e})}else return new _n({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:e})}else if(e.name==="TypeError"){if(a.user.id.byteLength<1||a.user.id.byteLength>64)return new _n({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:e})}else if(e.name==="UnknownError")return new _n({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:e})}return new _n({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e})}function q6({error:e,options:t}){const{publicKey:r}=t;if(!r)throw Error("options was missing required publicKey property");if(e.name==="AbortError"){if(t.signal instanceof AbortSignal)return new _n({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:e})}else{if(e.name==="NotAllowedError")return new _n({message:e.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e});if(e.name==="SecurityError"){const n=window.location.hostname;if(SE(n)){if(r.rpId!==n)return new _n({message:`The RP ID "${r.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:e})}else return new _n({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:e})}else if(e.name==="UnknownError")return new _n({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:e})}return new _n({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e})}var jE=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(e);s<n.length;s++)t.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(e,n[s])&&(r[n[s]]=e[n[s]]);return r};class H6{createNewAbortSignal(){if(this.controller){const r=new Error("Cancelling existing WebAuthn API call for new one");r.name="AbortError",this.controller.abort(r)}const t=new AbortController;return this.controller=t,t.signal}cancelCeremony(){if(this.controller){const t=new Error("Manually cancelling existing WebAuthn API call");t.name="AbortError",this.controller.abort(t),this.controller=void 0}}}const K6=new H6;function G6(e){if(!e)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(e);const{challenge:t,user:r,excludeCredentials:n}=e,s=jE(e,["challenge","user","excludeCredentials"]),a=Vc(t).buffer,l=Object.assign(Object.assign({},r),{id:Vc(r.id).buffer}),u=Object.assign(Object.assign({},s),{challenge:a,user:l});if(n&&n.length>0){u.excludeCredentials=new Array(n.length);for(let d=0;d<n.length;d++){const m=n[d];u.excludeCredentials[d]=Object.assign(Object.assign({},m),{id:Vc(m.id).buffer,type:m.type||"public-key",transports:m.transports})}}return u}function Y6(e){if(!e)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(e);const{challenge:t,allowCredentials:r}=e,n=jE(e,["challenge","allowCredentials"]),s=Vc(t).buffer,a=Object.assign(Object.assign({},n),{challenge:s});if(r&&r.length>0){a.allowCredentials=new Array(r.length);for(let l=0;l<r.length;l++){const u=r[l];a.allowCredentials[l]=Object.assign(Object.assign({},u),{id:Vc(u.id).buffer,type:u.type||"public-key",transports:u.transports})}}return a}function J6(e){var t;if("toJSON"in e&&typeof e.toJSON=="function")return e.toJSON();const r=e;return{id:e.id,rawId:e.id,response:{attestationObject:Al(new Uint8Array(e.response.attestationObject)),clientDataJSON:Al(new Uint8Array(e.response.clientDataJSON))},type:"public-key",clientExtensionResults:e.getClientExtensionResults(),authenticatorAttachment:(t=r.authenticatorAttachment)!==null&&t!==void 0?t:void 0}}function X6(e){var t;if("toJSON"in e&&typeof e.toJSON=="function")return e.toJSON();const r=e,n=e.getClientExtensionResults(),s=e.response;return{id:e.id,rawId:e.id,response:{authenticatorData:Al(new Uint8Array(s.authenticatorData)),clientDataJSON:Al(new Uint8Array(s.clientDataJSON)),signature:Al(new Uint8Array(s.signature)),userHandle:s.userHandle?Al(new Uint8Array(s.userHandle)):void 0},type:"public-key",clientExtensionResults:n,authenticatorAttachment:(t=r.authenticatorAttachment)!==null&&t!==void 0?t:void 0}}function SE(e){return e==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(e)}function _S(){var e,t;return!!(ui()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((e=navigator==null?void 0:navigator.credentials)===null||e===void 0?void 0:e.create)=="function"&&typeof((t=navigator==null?void 0:navigator.credentials)===null||t===void 0?void 0:t.get)=="function")}async function Q6(e){try{const t=await navigator.credentials.create(e);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new zh("Browser returned unexpected credential type",t)}:{data:null,error:new zh("Empty credential response",t)}}catch(t){return{data:null,error:V6({error:t,options:e})}}}async function Z6(e){try{const t=await navigator.credentials.get(e);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new zh("Browser returned unexpected credential type",t)}:{data:null,error:new zh("Empty credential response",t)}}catch(t){return{data:null,error:q6({error:t,options:e})}}}const e$={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"none"},t$={userVerification:"preferred",hints:["security-key"]};function Uh(...e){const t=s=>s!==null&&typeof s=="object"&&!Array.isArray(s),r=s=>s instanceof ArrayBuffer||ArrayBuffer.isView(s),n={};for(const s of e)if(s)for(const a in s){const l=s[a];if(l!==void 0)if(Array.isArray(l))n[a]=l;else if(r(l))n[a]=l;else if(t(l)){const u=n[a];t(u)?n[a]=Uh(u,l):n[a]=Uh(l)}else n[a]=l}return n}function r$(e,t){return Uh(e$,e,t||{})}function n$(e,t){return Uh(t$,e,t||{})}class s${constructor(t){this.client=t,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(t){return this.client.mfa.enroll(Object.assign(Object.assign({},t),{factorType:"webauthn"}))}async _challenge({factorId:t,webauthn:r,friendlyName:n,signal:s},a){try{const{data:l,error:u}=await this.client.mfa.challenge({factorId:t,webauthn:r});if(!l)return{data:null,error:u};const d=s??K6.createNewAbortSignal();if(l.webauthn.type==="create"){const{user:m}=l.webauthn.credential_options.publicKey;m.name||(m.name=`${m.id}:${n}`),m.displayName||(m.displayName=m.name)}switch(l.webauthn.type){case"create":{const m=r$(l.webauthn.credential_options.publicKey,a==null?void 0:a.create),{data:f,error:p}=await Q6({publicKey:m,signal:d});return f?{data:{factorId:t,challengeId:l.id,webauthn:{type:l.webauthn.type,credential_response:f}},error:null}:{data:null,error:p}}case"request":{const m=n$(l.webauthn.credential_options.publicKey,a==null?void 0:a.request),{data:f,error:p}=await Z6(Object.assign(Object.assign({},l.webauthn.credential_options),{publicKey:m,signal:d}));return f?{data:{factorId:t,challengeId:l.id,webauthn:{type:l.webauthn.type,credential_response:f}},error:null}:{data:null,error:p}}}}catch(l){return Pt(l)?{data:null,error:l}:{data:null,error:new Cl("Unexpected error in challenge",l)}}}async _verify({challengeId:t,factorId:r,webauthn:n}){return this.client.mfa.verify({factorId:r,challengeId:t,webauthn:n})}async _authenticate({factorId:t,webauthn:{rpId:r=typeof window<"u"?window.location.hostname:void 0,rpOrigins:n=typeof window<"u"?[window.location.origin]:void 0,signal:s}},a){if(!r)return{data:null,error:new Nd("rpId is required for WebAuthn authentication")};try{if(!_S())return{data:null,error:new Cl("Browser does not support WebAuthn",null)};const{data:l,error:u}=await this.challenge({factorId:t,webauthn:{rpId:r,rpOrigins:n},signal:s},{request:a});if(!l)return{data:null,error:u};const{webauthn:d}=l;return this._verify({factorId:t,challengeId:l.challengeId,webauthn:{type:d.type,rpId:r,rpOrigins:n,credential_response:d.credential_response}})}catch(l){return Pt(l)?{data:null,error:l}:{data:null,error:new Cl("Unexpected error in authenticate",l)}}}async _register({friendlyName:t,rpId:r=typeof window<"u"?window.location.hostname:void 0,rpOrigins:n=typeof window<"u"?[window.location.origin]:void 0,signal:s},a){if(!r)return{data:null,error:new Nd("rpId is required for WebAuthn registration")};try{if(!_S())return{data:null,error:new Cl("Browser does not support WebAuthn",null)};const{data:l,error:u}=await this._enroll({friendlyName:t});if(!l)return await this.client.mfa.listFactors().then(f=>{var p;return(p=f.data)===null||p===void 0?void 0:p.all.find(x=>x.factor_type==="webauthn"&&x.friendly_name===t&&x.status!=="unverified")}).then(f=>f?this.client.mfa.unenroll({factorId:f==null?void 0:f.id}):void 0),{data:null,error:u};const{data:d,error:m}=await this._challenge({factorId:l.id,friendlyName:l.friendly_name,webauthn:{rpId:r,rpOrigins:n},signal:s},{create:a});return d?this._verify({factorId:l.id,challengeId:d.challengeId,webauthn:{rpId:r,rpOrigins:n,type:d.webauthn.type,credential_response:d.webauthn.credential_response}}):{data:null,error:m}}catch(l){return Pt(l)?{data:null,error:l}:{data:null,error:new Cl("Unexpected error in register",l)}}}}z6();const i$={url:e6,storageKey:t6,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:r6,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function CS(e,t,r){return await r()}const Pc={};class _d{get jwks(){var t,r;return(r=(t=Pc[this.storageKey])===null||t===void 0?void 0:t.jwks)!==null&&r!==void 0?r:{keys:[]}}set jwks(t){Pc[this.storageKey]=Object.assign(Object.assign({},Pc[this.storageKey]),{jwks:t})}get jwks_cached_at(){var t,r;return(r=(t=Pc[this.storageKey])===null||t===void 0?void 0:t.cachedAt)!==null&&r!==void 0?r:Number.MIN_SAFE_INTEGER}set jwks_cached_at(t){Pc[this.storageKey]=Object.assign(Object.assign({},Pc[this.storageKey]),{cachedAt:t})}constructor(t){var r,n;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=_d.nextInstanceID,_d.nextInstanceID+=1,this.instanceID>0&&ui()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const s=Object.assign(Object.assign({},i$),t);if(this.logDebugMessages=!!s.debug,typeof s.debug=="function"&&(this.logger=s.debug),this.persistSession=s.persistSession,this.storageKey=s.storageKey,this.autoRefreshToken=s.autoRefreshToken,this.admin=new M6({url:s.url,headers:s.headers,fetch:s.fetch}),this.url=s.url,this.headers=s.headers,this.fetch=vE(s.fetch),this.lock=s.lock||CS,this.detectSessionInUrl=s.detectSessionInUrl,this.flowType=s.flowType,this.hasCustomAuthorizationHeader=s.hasCustomAuthorizationHeader,s.lock?this.lock=s.lock:ui()&&(!((r=globalThis==null?void 0:globalThis.navigator)===null||r===void 0)&&r.locks)?this.lock=L6:this.lock=CS,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new s$(this)},this.persistSession?(s.storage?this.storage=s.storage:xE()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=NS(this.memoryStorage)),s.userStorage&&(this.userStorage=s.userStorage)):(this.memoryStorage={},this.storage=NS(this.memoryStorage)),ui()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(a){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",a)}(n=this.broadcastChannel)===null||n===void 0||n.addEventListener("message",async a=>{this._debug("received broadcast notification from other tab or client",a),await this._notifyAllSubscribers(a.data.event,a.data.session,!1)})}this.initialize()}_debug(...t){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${pE}) ${new Date().toISOString()}`,...t),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var t;try{const r=g6(window.location.href);let n="none";if(this._isImplicitGrantCallback(r)?n="implicit":await this._isPKCECallback(r)&&(n="pkce"),ui()&&this.detectSessionInUrl&&n!=="none"){const{data:s,error:a}=await this._getSessionFromURL(r,n);if(a){if(this._debug("#_initialize()","error detecting session from URL",a),l6(a)){const d=(t=a.details)===null||t===void 0?void 0:t.code;if(d==="identity_already_exists"||d==="identity_not_found"||d==="single_identity_not_deletable")return{error:a}}return await this._removeSession(),{error:a}}const{session:l,redirectType:u}=s;return this._debug("#_initialize()","detected session in URL",l,"redirect type",u),await this._saveSession(l),setTimeout(async()=>{u==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",l):await this._notifyAllSubscribers("SIGNED_IN",l)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(r){return Pt(r)?{error:r}:{error:new Cl("Unexpected error during initialization",r)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(t){var r,n,s;try{const a=await Ht(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(n=(r=t==null?void 0:t.options)===null||r===void 0?void 0:r.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:(s=t==null?void 0:t.options)===null||s===void 0?void 0:s.captchaToken}},xform:sa}),{data:l,error:u}=a;if(u||!l)return{data:{user:null,session:null},error:u};const d=l.session,m=l.user;return l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",d)),{data:{user:m,session:d},error:null}}catch(a){if(Pt(a))return{data:{user:null,session:null},error:a};throw a}}async signUp(t){var r,n,s;try{let a;if("email"in t){const{email:f,password:p,options:x}=t;let v=null,b=null;this.flowType==="pkce"&&([v,b]=await Cc(this.storage,this.storageKey)),a=await Ht(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:x==null?void 0:x.emailRedirectTo,body:{email:f,password:p,data:(r=x==null?void 0:x.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:x==null?void 0:x.captchaToken},code_challenge:v,code_challenge_method:b},xform:sa})}else if("phone"in t){const{phone:f,password:p,options:x}=t;a=await Ht(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:f,password:p,data:(n=x==null?void 0:x.data)!==null&&n!==void 0?n:{},channel:(s=x==null?void 0:x.channel)!==null&&s!==void 0?s:"sms",gotrue_meta_security:{captcha_token:x==null?void 0:x.captchaToken}},xform:sa})}else throw new ah("You must provide either an email or phone number and a password");const{data:l,error:u}=a;if(u||!l)return{data:{user:null,session:null},error:u};const d=l.session,m=l.user;return l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",d)),{data:{user:m,session:d},error:null}}catch(a){if(Pt(a))return{data:{user:null,session:null},error:a};throw a}}async signInWithPassword(t){try{let r;if("email"in t){const{email:a,password:l,options:u}=t;r=await Ht(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:a,password:l,gotrue_meta_security:{captcha_token:u==null?void 0:u.captchaToken}},xform:SS})}else if("phone"in t){const{phone:a,password:l,options:u}=t;r=await Ht(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:a,password:l,gotrue_meta_security:{captcha_token:u==null?void 0:u.captchaToken}},xform:SS})}else throw new ah("You must provide either an email or phone number and a password");const{data:n,error:s}=r;return s?{data:{user:null,session:null},error:s}:!n||!n.session||!n.user?{data:{user:null,session:null},error:new _c}:(n.session&&(await this._saveSession(n.session),await this._notifyAllSubscribers("SIGNED_IN",n.session)),{data:Object.assign({user:n.user,session:n.session},n.weak_password?{weakPassword:n.weak_password}:null),error:s})}catch(r){if(Pt(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithOAuth(t){var r,n,s,a;return await this._handleProviderSignIn(t.provider,{redirectTo:(r=t.options)===null||r===void 0?void 0:r.redirectTo,scopes:(n=t.options)===null||n===void 0?void 0:n.scopes,queryParams:(s=t.options)===null||s===void 0?void 0:s.queryParams,skipBrowserRedirect:(a=t.options)===null||a===void 0?void 0:a.skipBrowserRedirect})}async exchangeCodeForSession(t){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(t))}async signInWithWeb3(t){const{chain:r}=t;switch(r){case"ethereum":return await this.signInWithEthereum(t);case"solana":return await this.signInWithSolana(t);default:throw new Error(`@supabase/auth-js: Unsupported chain "${r}"`)}}async signInWithEthereum(t){var r,n,s,a,l,u,d,m,f,p,x;let v,b;if("message"in t)v=t.message,b=t.signature;else{const{chain:w,wallet:j,statement:_,options:E}=t;let C;if(ui())if(typeof j=="object")C=j;else{const K=window;if("ethereum"in K&&typeof K.ethereum=="object"&&"request"in K.ethereum&&typeof K.ethereum.request=="function")C=K.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof j!="object"||!(E!=null&&E.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");C=j}const I=new URL((r=E==null?void 0:E.url)!==null&&r!==void 0?r:window.location.href),A=await C.request({method:"eth_requestAccounts"}).then(K=>K).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!A||A.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const $=wE(A[0]);let B=(n=E==null?void 0:E.signInWithEthereum)===null||n===void 0?void 0:n.chainId;if(!B){const K=await C.request({method:"eth_chainId"});B=U6(K)}const T={domain:I.host,address:$,statement:_,uri:I.href,version:"1",chainId:B,nonce:(s=E==null?void 0:E.signInWithEthereum)===null||s===void 0?void 0:s.nonce,issuedAt:(l=(a=E==null?void 0:E.signInWithEthereum)===null||a===void 0?void 0:a.issuedAt)!==null&&l!==void 0?l:new Date,expirationTime:(u=E==null?void 0:E.signInWithEthereum)===null||u===void 0?void 0:u.expirationTime,notBefore:(d=E==null?void 0:E.signInWithEthereum)===null||d===void 0?void 0:d.notBefore,requestId:(m=E==null?void 0:E.signInWithEthereum)===null||m===void 0?void 0:m.requestId,resources:(f=E==null?void 0:E.signInWithEthereum)===null||f===void 0?void 0:f.resources};v=W6(T),b=await C.request({method:"personal_sign",params:[B6(v),$]})}try{const{data:w,error:j}=await Ht(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:v,signature:b},!((p=t.options)===null||p===void 0)&&p.captchaToken?{gotrue_meta_security:{captcha_token:(x=t.options)===null||x===void 0?void 0:x.captchaToken}}:null),xform:sa});if(j)throw j;return!w||!w.session||!w.user?{data:{user:null,session:null},error:new _c}:(w.session&&(await this._saveSession(w.session),await this._notifyAllSubscribers("SIGNED_IN",w.session)),{data:Object.assign({},w),error:j})}catch(w){if(Pt(w))return{data:{user:null,session:null},error:w};throw w}}async signInWithSolana(t){var r,n,s,a,l,u,d,m,f,p,x,v;let b,w;if("message"in t)b=t.message,w=t.signature;else{const{chain:j,wallet:_,statement:E,options:C}=t;let I;if(ui())if(typeof _=="object")I=_;else{const $=window;if("solana"in $&&typeof $.solana=="object"&&("signIn"in $.solana&&typeof $.solana.signIn=="function"||"signMessage"in $.solana&&typeof $.solana.signMessage=="function"))I=$.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof _!="object"||!(C!=null&&C.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");I=_}const A=new URL((r=C==null?void 0:C.url)!==null&&r!==void 0?r:window.location.href);if("signIn"in I&&I.signIn){const $=await I.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},C==null?void 0:C.signInWithSolana),{version:"1",domain:A.host,uri:A.href}),E?{statement:E}:null));let B;if(Array.isArray($)&&$[0]&&typeof $[0]=="object")B=$[0];else if($&&typeof $=="object"&&"signedMessage"in $&&"signature"in $)B=$;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in B&&"signature"in B&&(typeof B.signedMessage=="string"||B.signedMessage instanceof Uint8Array)&&B.signature instanceof Uint8Array)b=typeof B.signedMessage=="string"?B.signedMessage:new TextDecoder().decode(B.signedMessage),w=B.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in I)||typeof I.signMessage!="function"||!("publicKey"in I)||typeof I!="object"||!I.publicKey||!("toBase58"in I.publicKey)||typeof I.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");b=[`${A.host} wants you to sign in with your Solana account:`,I.publicKey.toBase58(),...E?["",E,""]:[""],"Version: 1",`URI: ${A.href}`,`Issued At: ${(s=(n=C==null?void 0:C.signInWithSolana)===null||n===void 0?void 0:n.issuedAt)!==null&&s!==void 0?s:new Date().toISOString()}`,...!((a=C==null?void 0:C.signInWithSolana)===null||a===void 0)&&a.notBefore?[`Not Before: ${C.signInWithSolana.notBefore}`]:[],...!((l=C==null?void 0:C.signInWithSolana)===null||l===void 0)&&l.expirationTime?[`Expiration Time: ${C.signInWithSolana.expirationTime}`]:[],...!((u=C==null?void 0:C.signInWithSolana)===null||u===void 0)&&u.chainId?[`Chain ID: ${C.signInWithSolana.chainId}`]:[],...!((d=C==null?void 0:C.signInWithSolana)===null||d===void 0)&&d.nonce?[`Nonce: ${C.signInWithSolana.nonce}`]:[],...!((m=C==null?void 0:C.signInWithSolana)===null||m===void 0)&&m.requestId?[`Request ID: ${C.signInWithSolana.requestId}`]:[],...!((p=(f=C==null?void 0:C.signInWithSolana)===null||f===void 0?void 0:f.resources)===null||p===void 0)&&p.length?["Resources",...C.signInWithSolana.resources.map(B=>`- ${B}`)]:[]].join(`
`);const $=await I.signMessage(new TextEncoder().encode(b),"utf8");if(!$||!($ instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");w=$}}try{const{data:j,error:_}=await Ht(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:b,signature:Al(w)},!((x=t.options)===null||x===void 0)&&x.captchaToken?{gotrue_meta_security:{captcha_token:(v=t.options)===null||v===void 0?void 0:v.captchaToken}}:null),xform:sa});if(_)throw _;return!j||!j.session||!j.user?{data:{user:null,session:null},error:new _c}:(j.session&&(await this._saveSession(j.session),await this._notifyAllSubscribers("SIGNED_IN",j.session)),{data:Object.assign({},j),error:_})}catch(j){if(Pt(j))return{data:{user:null,session:null},error:j};throw j}}async _exchangeCodeForSession(t){const r=await bl(this.storage,`${this.storageKey}-code-verifier`),[n,s]=(r??"").split("/");try{const{data:a,error:l}=await Ht(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:t,code_verifier:n},xform:sa});if(await Mo(this.storage,`${this.storageKey}-code-verifier`),l)throw l;return!a||!a.session||!a.user?{data:{user:null,session:null,redirectType:null},error:new _c}:(a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",a.session)),{data:Object.assign(Object.assign({},a),{redirectType:s??null}),error:l})}catch(a){if(Pt(a))return{data:{user:null,session:null,redirectType:null},error:a};throw a}}async signInWithIdToken(t){try{const{options:r,provider:n,token:s,access_token:a,nonce:l}=t,u=await Ht(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:n,id_token:s,access_token:a,nonce:l,gotrue_meta_security:{captcha_token:r==null?void 0:r.captchaToken}},xform:sa}),{data:d,error:m}=u;return m?{data:{user:null,session:null},error:m}:!d||!d.session||!d.user?{data:{user:null,session:null},error:new _c}:(d.session&&(await this._saveSession(d.session),await this._notifyAllSubscribers("SIGNED_IN",d.session)),{data:d,error:m})}catch(r){if(Pt(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithOtp(t){var r,n,s,a,l;try{if("email"in t){const{email:u,options:d}=t;let m=null,f=null;this.flowType==="pkce"&&([m,f]=await Cc(this.storage,this.storageKey));const{error:p}=await Ht(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:u,data:(r=d==null?void 0:d.data)!==null&&r!==void 0?r:{},create_user:(n=d==null?void 0:d.shouldCreateUser)!==null&&n!==void 0?n:!0,gotrue_meta_security:{captcha_token:d==null?void 0:d.captchaToken},code_challenge:m,code_challenge_method:f},redirectTo:d==null?void 0:d.emailRedirectTo});return{data:{user:null,session:null},error:p}}if("phone"in t){const{phone:u,options:d}=t,{data:m,error:f}=await Ht(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:u,data:(s=d==null?void 0:d.data)!==null&&s!==void 0?s:{},create_user:(a=d==null?void 0:d.shouldCreateUser)!==null&&a!==void 0?a:!0,gotrue_meta_security:{captcha_token:d==null?void 0:d.captchaToken},channel:(l=d==null?void 0:d.channel)!==null&&l!==void 0?l:"sms"}});return{data:{user:null,session:null,messageId:m==null?void 0:m.message_id},error:f}}throw new ah("You must provide either an email or phone number.")}catch(u){if(Pt(u))return{data:{user:null,session:null},error:u};throw u}}async verifyOtp(t){var r,n;try{let s,a;"options"in t&&(s=(r=t.options)===null||r===void 0?void 0:r.redirectTo,a=(n=t.options)===null||n===void 0?void 0:n.captchaToken);const{data:l,error:u}=await Ht(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},t),{gotrue_meta_security:{captcha_token:a}}),redirectTo:s,xform:sa});if(u)throw u;if(!l)throw new Error("An error occurred on token verification.");const d=l.session,m=l.user;return d!=null&&d.access_token&&(await this._saveSession(d),await this._notifyAllSubscribers(t.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",d)),{data:{user:m,session:d},error:null}}catch(s){if(Pt(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithSSO(t){var r,n,s;try{let a=null,l=null;return this.flowType==="pkce"&&([a,l]=await Cc(this.storage,this.storageKey)),await Ht(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in t?{provider_id:t.providerId}:null),"domain"in t?{domain:t.domain}:null),{redirect_to:(n=(r=t.options)===null||r===void 0?void 0:r.redirectTo)!==null&&n!==void 0?n:void 0}),!((s=t==null?void 0:t.options)===null||s===void 0)&&s.captchaToken?{gotrue_meta_security:{captcha_token:t.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:a,code_challenge_method:l}),headers:this.headers,xform:T6})}catch(a){if(Pt(a))return{data:null,error:a};throw a}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async t=>{const{data:{session:r},error:n}=t;if(n)throw n;if(!r)throw new Fo;const{error:s}=await Ht(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:r.access_token});return{data:{user:null,session:null},error:s}})}catch(t){if(Pt(t))return{data:{user:null,session:null},error:t};throw t}}async resend(t){try{const r=`${this.url}/resend`;if("email"in t){const{email:n,type:s,options:a}=t,{error:l}=await Ht(this.fetch,"POST",r,{headers:this.headers,body:{email:n,type:s,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},redirectTo:a==null?void 0:a.emailRedirectTo});return{data:{user:null,session:null},error:l}}else if("phone"in t){const{phone:n,type:s,options:a}=t,{data:l,error:u}=await Ht(this.fetch,"POST",r,{headers:this.headers,body:{phone:n,type:s,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}}});return{data:{user:null,session:null,messageId:l==null?void 0:l.message_id},error:u}}throw new ah("You must provide either an email or phone number and a type")}catch(r){if(Pt(r))return{data:{user:null,session:null},error:r};throw r}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async r=>r))}async _acquireLock(t,r){this._debug("#_acquireLock","begin",t);try{if(this.lockAcquired){const n=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),s=(async()=>(await n,await r()))();return this.pendingInLock.push((async()=>{try{await s}catch{}})()),s}return await this.lock(`lock:${this.storageKey}`,t,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const n=r();for(this.pendingInLock.push((async()=>{try{await n}catch{}})()),await n;this.pendingInLock.length;){const s=[...this.pendingInLock];await Promise.all(s),this.pendingInLock.splice(0,s.length)}return await n}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(t){this._debug("#_useSession","begin");try{const r=await this.__loadSession();return await t(r)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let t=null;const r=await bl(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",r),r!==null&&(this._isValidSession(r)?t=r:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!t)return{data:{session:null},error:null};const n=t.expires_at?t.expires_at*1e3-Date.now()<gy:!1;if(this._debug("#__loadSession()",`session has${n?"":" not"} expired`,"expires_at",t.expires_at),!n){if(this.userStorage){const l=await bl(this.userStorage,this.storageKey+"-user");l!=null&&l.user?t.user=l.user:t.user=vy()}if(this.storage.isServer&&t.user){let l=this.suppressGetSessionWarning;t=new Proxy(t,{get:(d,m,f)=>(!l&&m==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),l=!0,this.suppressGetSessionWarning=!0),Reflect.get(d,m,f))})}return{data:{session:t},error:null}}const{data:s,error:a}=await this._callRefreshToken(t.refresh_token);return a?{data:{session:null},error:a}:{data:{session:s},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(t){return t?await this._getUser(t):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(t){try{return t?await Ht(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:t,xform:Wo}):await this._useSession(async r=>{var n,s,a;const{data:l,error:u}=r;if(u)throw u;return!(!((n=l.session)===null||n===void 0)&&n.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Fo}:await Ht(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(a=(s=l.session)===null||s===void 0?void 0:s.access_token)!==null&&a!==void 0?a:void 0,xform:Wo})})}catch(r){if(Pt(r))return o6(r)&&(await this._removeSession(),await Mo(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:r};throw r}}async updateUser(t,r={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(t,r))}async _updateUser(t,r={}){try{return await this._useSession(async n=>{const{data:s,error:a}=n;if(a)throw a;if(!s.session)throw new Fo;const l=s.session;let u=null,d=null;this.flowType==="pkce"&&t.email!=null&&([u,d]=await Cc(this.storage,this.storageKey));const{data:m,error:f}=await Ht(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:r==null?void 0:r.emailRedirectTo,body:Object.assign(Object.assign({},t),{code_challenge:u,code_challenge_method:d}),jwt:l.access_token,xform:Wo});if(f)throw f;return l.user=m.user,await this._saveSession(l),await this._notifyAllSubscribers("USER_UPDATED",l),{data:{user:l.user},error:null}})}catch(n){if(Pt(n))return{data:{user:null},error:n};throw n}}async setSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(t))}async _setSession(t){try{if(!t.access_token||!t.refresh_token)throw new Fo;const r=Date.now()/1e3;let n=r,s=!0,a=null;const{payload:l}=xy(t.access_token);if(l.exp&&(n=l.exp,s=n<=r),s){const{data:u,error:d}=await this._callRefreshToken(t.refresh_token);if(d)return{data:{user:null,session:null},error:d};if(!u)return{data:{user:null,session:null},error:null};a=u}else{const{data:u,error:d}=await this._getUser(t.access_token);if(d)throw d;a={access_token:t.access_token,refresh_token:t.refresh_token,user:u.user,token_type:"bearer",expires_in:n-r,expires_at:n},await this._saveSession(a),await this._notifyAllSubscribers("SIGNED_IN",a)}return{data:{user:a.user,session:a},error:null}}catch(r){if(Pt(r))return{data:{session:null,user:null},error:r};throw r}}async refreshSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(t))}async _refreshSession(t){try{return await this._useSession(async r=>{var n;if(!t){const{data:l,error:u}=r;if(u)throw u;t=(n=l.session)!==null&&n!==void 0?n:void 0}if(!(t!=null&&t.refresh_token))throw new Fo;const{data:s,error:a}=await this._callRefreshToken(t.refresh_token);return a?{data:{user:null,session:null},error:a}:s?{data:{user:s.user,session:s},error:null}:{data:{user:null,session:null},error:null}})}catch(r){if(Pt(r))return{data:{user:null,session:null},error:r};throw r}}async _getSessionFromURL(t,r){try{if(!ui())throw new oh("No browser detected.");if(t.error||t.error_description||t.error_code)throw new oh(t.error_description||"Error in URL with unspecified error_description",{error:t.error||"unspecified_error",code:t.error_code||"unspecified_code"});switch(r){case"implicit":if(this.flowType==="pkce")throw new gS("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new oh("Not a valid implicit grant flow url.");break;default:}if(r==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!t.code)throw new gS("No code detected.");const{data:E,error:C}=await this._exchangeCodeForSession(t.code);if(C)throw C;const I=new URL(window.location.href);return I.searchParams.delete("code"),window.history.replaceState(window.history.state,"",I.toString()),{data:{session:E.session,redirectType:null},error:null}}const{provider_token:n,provider_refresh_token:s,access_token:a,refresh_token:l,expires_in:u,expires_at:d,token_type:m}=t;if(!a||!u||!l||!m)throw new oh("No session defined in URL");const f=Math.round(Date.now()/1e3),p=parseInt(u);let x=f+p;d&&(x=parseInt(d));const v=x-f;v*1e3<=Mc&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${v}s, should have been closer to ${p}s`);const b=x-p;f-b>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",b,x,f):f-b<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",b,x,f);const{data:w,error:j}=await this._getUser(a);if(j)throw j;const _={provider_token:n,provider_refresh_token:s,access_token:a,expires_in:p,expires_at:x,refresh_token:l,token_type:m,user:w.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:_,redirectType:t.type},error:null}}catch(n){if(Pt(n))return{data:{session:null,redirectType:null},error:n};throw n}}_isImplicitGrantCallback(t){return!!(t.access_token||t.error_description)}async _isPKCECallback(t){const r=await bl(this.storage,`${this.storageKey}-code-verifier`);return!!(t.code&&r)}async signOut(t={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(t))}async _signOut({scope:t}={scope:"global"}){return await this._useSession(async r=>{var n;const{data:s,error:a}=r;if(a)return{error:a};const l=(n=s.session)===null||n===void 0?void 0:n.access_token;if(l){const{error:u}=await this.admin.signOut(l,t);if(u&&!(a6(u)&&(u.status===404||u.status===401||u.status===403)))return{error:u}}return t!=="others"&&(await this._removeSession(),await Mo(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(t){const r=p6(),n={id:r,callback:t,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",r),this.stateChangeEmitters.delete(r)}};return this._debug("#onAuthStateChange()","registered callback with id",r),this.stateChangeEmitters.set(r,n),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(r)})))(),{data:{subscription:n}}}async _emitInitialSession(t){return await this._useSession(async r=>{var n,s;try{const{data:{session:a},error:l}=r;if(l)throw l;await((n=this.stateChangeEmitters.get(t))===null||n===void 0?void 0:n.callback("INITIAL_SESSION",a)),this._debug("INITIAL_SESSION","callback id",t,"session",a)}catch(a){await((s=this.stateChangeEmitters.get(t))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",t,"error",a),console.error(a)}})}async resetPasswordForEmail(t,r={}){let n=null,s=null;this.flowType==="pkce"&&([n,s]=await Cc(this.storage,this.storageKey,!0));try{return await Ht(this.fetch,"POST",`${this.url}/recover`,{body:{email:t,code_challenge:n,code_challenge_method:s,gotrue_meta_security:{captcha_token:r.captchaToken}},headers:this.headers,redirectTo:r.redirectTo})}catch(a){if(Pt(a))return{data:null,error:a};throw a}}async getUserIdentities(){var t;try{const{data:r,error:n}=await this.getUser();if(n)throw n;return{data:{identities:(t=r.user.identities)!==null&&t!==void 0?t:[]},error:null}}catch(r){if(Pt(r))return{data:null,error:r};throw r}}async linkIdentity(t){return"token"in t?this.linkIdentityIdToken(t):this.linkIdentityOAuth(t)}async linkIdentityOAuth(t){var r;try{const{data:n,error:s}=await this._useSession(async a=>{var l,u,d,m,f;const{data:p,error:x}=a;if(x)throw x;const v=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,t.provider,{redirectTo:(l=t.options)===null||l===void 0?void 0:l.redirectTo,scopes:(u=t.options)===null||u===void 0?void 0:u.scopes,queryParams:(d=t.options)===null||d===void 0?void 0:d.queryParams,skipBrowserRedirect:!0});return await Ht(this.fetch,"GET",v,{headers:this.headers,jwt:(f=(m=p.session)===null||m===void 0?void 0:m.access_token)!==null&&f!==void 0?f:void 0})});if(s)throw s;return ui()&&!(!((r=t.options)===null||r===void 0)&&r.skipBrowserRedirect)&&window.location.assign(n==null?void 0:n.url),{data:{provider:t.provider,url:n==null?void 0:n.url},error:null}}catch(n){if(Pt(n))return{data:{provider:t.provider,url:null},error:n};throw n}}async linkIdentityIdToken(t){return await this._useSession(async r=>{var n;try{const{error:s,data:{session:a}}=r;if(s)throw s;const{options:l,provider:u,token:d,access_token:m,nonce:f}=t,p=await Ht(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(n=a==null?void 0:a.access_token)!==null&&n!==void 0?n:void 0,body:{provider:u,id_token:d,access_token:m,nonce:f,link_identity:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:sa}),{data:x,error:v}=p;return v?{data:{user:null,session:null},error:v}:!x||!x.session||!x.user?{data:{user:null,session:null},error:new _c}:(x.session&&(await this._saveSession(x.session),await this._notifyAllSubscribers("USER_UPDATED",x.session)),{data:x,error:v})}catch(s){if(Pt(s))return{data:{user:null,session:null},error:s};throw s}})}async unlinkIdentity(t){try{return await this._useSession(async r=>{var n,s;const{data:a,error:l}=r;if(l)throw l;return await Ht(this.fetch,"DELETE",`${this.url}/user/identities/${t.identity_id}`,{headers:this.headers,jwt:(s=(n=a.session)===null||n===void 0?void 0:n.access_token)!==null&&s!==void 0?s:void 0})})}catch(r){if(Pt(r))return{data:null,error:r};throw r}}async _refreshAccessToken(t){const r=`#_refreshAccessToken(${t.substring(0,5)}...)`;this._debug(r,"begin");try{const n=Date.now();return await v6(async s=>(s>0&&await x6(200*Math.pow(2,s-1)),this._debug(r,"refreshing attempt",s),await Ht(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:t},headers:this.headers,xform:sa})),(s,a)=>{const l=200*Math.pow(2,s);return a&&yy(a)&&Date.now()+l-n<Mc})}catch(n){if(this._debug(r,"error",n),Pt(n))return{data:{session:null,user:null},error:n};throw n}finally{this._debug(r,"end")}}_isValidSession(t){return typeof t=="object"&&t!==null&&"access_token"in t&&"refresh_token"in t&&"expires_at"in t}async _handleProviderSignIn(t,r){const n=await this._getUrlForProvider(`${this.url}/authorize`,t,{redirectTo:r.redirectTo,scopes:r.scopes,queryParams:r.queryParams});return this._debug("#_handleProviderSignIn()","provider",t,"options",r,"url",n),ui()&&!r.skipBrowserRedirect&&window.location.assign(n),{data:{provider:t,url:n},error:null}}async _recoverAndRefresh(){var t,r;const n="#_recoverAndRefresh()";this._debug(n,"begin");try{const s=await bl(this.storage,this.storageKey);if(s&&this.userStorage){let l=await bl(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!l&&(l={user:s.user},await Fc(this.userStorage,this.storageKey+"-user",l)),s.user=(t=l==null?void 0:l.user)!==null&&t!==void 0?t:vy()}else if(s&&!s.user&&!s.user){const l=await bl(this.storage,this.storageKey+"-user");l&&(l!=null&&l.user)?(s.user=l.user,await Mo(this.storage,this.storageKey+"-user"),await Fc(this.storage,this.storageKey,s)):s.user=vy()}if(this._debug(n,"session from storage",s),!this._isValidSession(s)){this._debug(n,"session is not valid"),s!==null&&await this._removeSession();return}const a=((r=s.expires_at)!==null&&r!==void 0?r:1/0)*1e3-Date.now()<gy;if(this._debug(n,`session has${a?"":" not"} expired with margin of ${gy}s`),a){if(this.autoRefreshToken&&s.refresh_token){const{error:l}=await this._callRefreshToken(s.refresh_token);l&&(console.error(l),yy(l)||(this._debug(n,"refresh failed with a non-retryable error, removing the session",l),await this._removeSession()))}}else if(s.user&&s.user.__isUserNotAvailableProxy===!0)try{const{data:l,error:u}=await this._getUser(s.access_token);!u&&(l!=null&&l.user)?(s.user=l.user,await this._saveSession(s),await this._notifyAllSubscribers("SIGNED_IN",s)):this._debug(n,"could not get user data, skipping SIGNED_IN notification")}catch(l){console.error("Error getting user data:",l),this._debug(n,"error getting user data, skipping SIGNED_IN notification",l)}else await this._notifyAllSubscribers("SIGNED_IN",s)}catch(s){this._debug(n,"error",s),console.error(s);return}finally{this._debug(n,"end")}}async _callRefreshToken(t){var r,n;if(!t)throw new Fo;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const s=`#_callRefreshToken(${t.substring(0,5)}...)`;this._debug(s,"begin");try{this.refreshingDeferred=new Wm;const{data:a,error:l}=await this._refreshAccessToken(t);if(l)throw l;if(!a.session)throw new Fo;await this._saveSession(a.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",a.session);const u={data:a.session,error:null};return this.refreshingDeferred.resolve(u),u}catch(a){if(this._debug(s,"error",a),Pt(a)){const l={data:null,error:a};return yy(a)||await this._removeSession(),(r=this.refreshingDeferred)===null||r===void 0||r.resolve(l),l}throw(n=this.refreshingDeferred)===null||n===void 0||n.reject(a),a}finally{this.refreshingDeferred=null,this._debug(s,"end")}}async _notifyAllSubscribers(t,r,n=!0){const s=`#_notifyAllSubscribers(${t})`;this._debug(s,"begin",r,`broadcast = ${n}`);try{this.broadcastChannel&&n&&this.broadcastChannel.postMessage({event:t,session:r});const a=[],l=Array.from(this.stateChangeEmitters.values()).map(async u=>{try{await u.callback(t,r)}catch(d){a.push(d)}});if(await Promise.all(l),a.length>0){for(let u=0;u<a.length;u+=1)console.error(a[u]);throw a[0]}}finally{this._debug(s,"end")}}async _saveSession(t){this._debug("#_saveSession()",t),this.suppressGetSessionWarning=!0;const r=Object.assign({},t),n=r.user&&r.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!n&&r.user&&await Fc(this.userStorage,this.storageKey+"-user",{user:r.user});const s=Object.assign({},r);delete s.user;const a=wS(s);await Fc(this.storage,this.storageKey,a)}else{const s=wS(r);await Fc(this.storage,this.storageKey,s)}}async _removeSession(){this._debug("#_removeSession()"),await Mo(this.storage,this.storageKey),await Mo(this.storage,this.storageKey+"-code-verifier"),await Mo(this.storage,this.storageKey+"-user"),this.userStorage&&await Mo(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const t=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{t&&ui()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",t)}catch(r){console.error("removing visibilitychange callback failed",r)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const t=setInterval(()=>this._autoRefreshTokenTick(),Mc);this.autoRefreshTicker=t,t&&typeof t=="object"&&typeof t.unref=="function"?t.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(t),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const t=this.autoRefreshTicker;this.autoRefreshTicker=null,t&&clearInterval(t)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const t=Date.now();try{return await this._useSession(async r=>{const{data:{session:n}}=r;if(!n||!n.refresh_token||!n.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const s=Math.floor((n.expires_at*1e3-t)/Mc);this._debug("#_autoRefreshTokenTick()",`access token expires in ${s} ticks, a tick lasts ${Mc}ms, refresh threshold is ${gx} ticks`),s<=gx&&await this._callRefreshToken(n.refresh_token)})}catch(r){console.error("Auto refresh tick failed with error. This is likely a transient error.",r)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(t){if(t.isAcquireTimeout||t instanceof bE)this._debug("auto refresh token tick lock not available");else throw t}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!ui()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(t){console.error("_handleVisibilityChange",t)}}async _onVisibilityChanged(t){const r=`#_onVisibilityChanged(${t})`;this._debug(r,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),t||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(r,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(t,r,n){const s=[`provider=${encodeURIComponent(r)}`];if(n!=null&&n.redirectTo&&s.push(`redirect_to=${encodeURIComponent(n.redirectTo)}`),n!=null&&n.scopes&&s.push(`scopes=${encodeURIComponent(n.scopes)}`),this.flowType==="pkce"){const[a,l]=await Cc(this.storage,this.storageKey),u=new URLSearchParams({code_challenge:`${encodeURIComponent(a)}`,code_challenge_method:`${encodeURIComponent(l)}`});s.push(u.toString())}if(n!=null&&n.queryParams){const a=new URLSearchParams(n.queryParams);s.push(a.toString())}return n!=null&&n.skipBrowserRedirect&&s.push(`skip_http_redirect=${n.skipBrowserRedirect}`),`${t}?${s.join("&")}`}async _unenroll(t){try{return await this._useSession(async r=>{var n;const{data:s,error:a}=r;return a?{data:null,error:a}:await Ht(this.fetch,"DELETE",`${this.url}/factors/${t.factorId}`,{headers:this.headers,jwt:(n=s==null?void 0:s.session)===null||n===void 0?void 0:n.access_token})})}catch(r){if(Pt(r))return{data:null,error:r};throw r}}async _enroll(t){try{return await this._useSession(async r=>{var n,s;const{data:a,error:l}=r;if(l)return{data:null,error:l};const u=Object.assign({friendly_name:t.friendlyName,factor_type:t.factorType},t.factorType==="phone"?{phone:t.phone}:t.factorType==="totp"?{issuer:t.issuer}:{}),{data:d,error:m}=await Ht(this.fetch,"POST",`${this.url}/factors`,{body:u,headers:this.headers,jwt:(n=a==null?void 0:a.session)===null||n===void 0?void 0:n.access_token});return m?{data:null,error:m}:(t.factorType==="totp"&&d.type==="totp"&&(!((s=d==null?void 0:d.totp)===null||s===void 0)&&s.qr_code)&&(d.totp.qr_code=`data:image/svg+xml;utf-8,${d.totp.qr_code}`),{data:d,error:null})})}catch(r){if(Pt(r))return{data:null,error:r};throw r}}async _verify(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var n;const{data:s,error:a}=r;if(a)return{data:null,error:a};const l=Object.assign({challenge_id:t.challengeId},"webauthn"in t?{webauthn:Object.assign(Object.assign({},t.webauthn),{credential_response:t.webauthn.type==="create"?J6(t.webauthn.credential_response):X6(t.webauthn.credential_response)})}:{code:t.code}),{data:u,error:d}=await Ht(this.fetch,"POST",`${this.url}/factors/${t.factorId}/verify`,{body:l,headers:this.headers,jwt:(n=s==null?void 0:s.session)===null||n===void 0?void 0:n.access_token});return d?{data:null,error:d}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+u.expires_in},u)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",u),{data:u,error:d})})}catch(r){if(Pt(r))return{data:null,error:r};throw r}})}async _challenge(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var n;const{data:s,error:a}=r;if(a)return{data:null,error:a};const l=await Ht(this.fetch,"POST",`${this.url}/factors/${t.factorId}/challenge`,{body:t,headers:this.headers,jwt:(n=s==null?void 0:s.session)===null||n===void 0?void 0:n.access_token});if(l.error)return l;const{data:u}=l;if(u.type!=="webauthn")return{data:u,error:null};switch(u.webauthn.type){case"create":return{data:Object.assign(Object.assign({},u),{webauthn:Object.assign(Object.assign({},u.webauthn),{credential_options:Object.assign(Object.assign({},u.webauthn.credential_options),{publicKey:G6(u.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},u),{webauthn:Object.assign(Object.assign({},u.webauthn),{credential_options:Object.assign(Object.assign({},u.webauthn.credential_options),{publicKey:Y6(u.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(r){if(Pt(r))return{data:null,error:r};throw r}})}async _challengeAndVerify(t){const{data:r,error:n}=await this._challenge({factorId:t.factorId});return n?{data:null,error:n}:await this._verify({factorId:t.factorId,challengeId:r.id,code:t.code})}async _listFactors(){var t;const{data:{user:r},error:n}=await this.getUser();if(n)return{data:null,error:n};const s={all:[],phone:[],totp:[],webauthn:[]};for(const a of(t=r==null?void 0:r.factors)!==null&&t!==void 0?t:[])s.all.push(a),a.status==="verified"&&s[a.factor_type].push(a);return{data:s,error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async t=>{var r,n;const{data:{session:s},error:a}=t;if(a)return{data:null,error:a};if(!s)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:l}=xy(s.access_token);let u=null;l.aal&&(u=l.aal);let d=u;((n=(r=s.user.factors)===null||r===void 0?void 0:r.filter(p=>p.status==="verified"))!==null&&n!==void 0?n:[]).length>0&&(d="aal2");const f=l.amr||[];return{data:{currentLevel:u,nextLevel:d,currentAuthenticationMethods:f},error:null}}))}async fetchJwk(t,r={keys:[]}){let n=r.keys.find(u=>u.kid===t);if(n)return n;const s=Date.now();if(n=this.jwks.keys.find(u=>u.kid===t),n&&this.jwks_cached_at+s6>s)return n;const{data:a,error:l}=await Ht(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(l)throw l;return!a.keys||a.keys.length===0||(this.jwks=a,this.jwks_cached_at=s,n=a.keys.find(u=>u.kid===t),!n)?null:n}async getClaims(t,r={}){try{let n=t;if(!n){const{data:v,error:b}=await this.getSession();if(b||!v.session)return{data:null,error:b};n=v.session.access_token}const{header:s,payload:a,signature:l,raw:{header:u,payload:d}}=xy(n);r!=null&&r.allowExpired||_6(a.exp);const m=!s.alg||s.alg.startsWith("HS")||!s.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(s.kid,r!=null&&r.keys?{keys:r.keys}:r==null?void 0:r.jwks);if(!m){const{error:v}=await this.getUser(n);if(v)throw v;return{data:{claims:a,header:s,signature:l},error:null}}const f=C6(s.alg),p=await crypto.subtle.importKey("jwk",m,f,!0,["verify"]);if(!await crypto.subtle.verify(f,p,l,h6(`${u}.${d}`)))throw new vx("Invalid JWT signature");return{data:{claims:a,header:s,signature:l},error:null}}catch(n){if(Pt(n))return{data:null,error:n};throw n}}}_d.nextInstanceID=0;const a$=_d;class o$ extends a${constructor(t){super(t)}}var l$=function(e,t,r,n){function s(a){return a instanceof r?a:new r(function(l){l(a)})}return new(r||(r=Promise))(function(a,l){function u(f){try{m(n.next(f))}catch(p){l(p)}}function d(f){try{m(n.throw(f))}catch(p){l(p)}}function m(f){f.done?a(f.value):s(f.value).then(u,d)}m((n=n.apply(e,t||[])).next())})};class c${constructor(t,r,n){var s,a,l;this.supabaseUrl=t,this.supabaseKey=r;const u=Z3(t);if(!r)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",u),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",u),this.storageUrl=new URL("storage/v1",u),this.functionsUrl=new URL("functions/v1",u);const d=`sb-${u.hostname.split(".")[0]}-auth-token`,m={db:W3,realtime:q3,auth:Object.assign(Object.assign({},V3),{storageKey:d}),global:B3},f=Q3(n??{},m);this.storageKey=(s=f.auth.storageKey)!==null&&s!==void 0?s:"",this.headers=(a=f.global.headers)!==null&&a!==void 0?a:{},f.accessToken?(this.accessToken=f.accessToken,this.auth=new Proxy({},{get:(p,x)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(x)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((l=f.auth)!==null&&l!==void 0?l:{},this.headers,f.global.fetch),this.fetch=Y3(r,this._getAccessToken.bind(this),f.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},f.realtime)),this.rest=new i3(new URL("rest/v1",u).href,{headers:this.headers,schema:f.db.schema,fetch:this.fetch}),this.storage=new L3(this.storageUrl.href,this.headers,this.fetch,n==null?void 0:n.storage),f.accessToken||this._listenForAuthEvents()}get functions(){return new Y5(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(t){return this.rest.from(t)}schema(t){return this.rest.schema(t)}rpc(t,r={},n={}){return this.rest.rpc(t,r,n)}channel(t,r={config:{}}){return this.realtime.channel(t,r)}getChannels(){return this.realtime.getChannels()}removeChannel(t){return this.realtime.removeChannel(t)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){return l$(this,void 0,void 0,function*(){var t,r;if(this.accessToken)return yield this.accessToken();const{data:n}=yield this.auth.getSession();return(r=(t=n.session)===null||t===void 0?void 0:t.access_token)!==null&&r!==void 0?r:this.supabaseKey})}_initSupabaseAuthClient({autoRefreshToken:t,persistSession:r,detectSessionInUrl:n,storage:s,userStorage:a,storageKey:l,flowType:u,lock:d,debug:m},f,p){const x={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new o$({url:this.authUrl.href,headers:Object.assign(Object.assign({},x),f),storageKey:l,autoRefreshToken:t,persistSession:r,detectSessionInUrl:n,storage:s,userStorage:a,flowType:u,lock:d,debug:m,fetch:p,hasCustomAuthorizationHeader:Object.keys(this.headers).some(v=>v.toLowerCase()==="authorization")})}_initRealtimeClient(t){return new j3(this.realtimeUrl.href,Object.assign(Object.assign({},t),{params:Object.assign({apikey:this.supabaseKey},t==null?void 0:t.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((r,n)=>{this._handleTokenChanged(r,"CLIENT",n==null?void 0:n.access_token)})}_handleTokenChanged(t,r,n){(t==="TOKEN_REFRESHED"||t==="SIGNED_IN")&&this.changedAccessToken!==n?(this.changedAccessToken=n,this.realtime.setAuth(n)):t==="SIGNED_OUT"&&(this.realtime.setAuth(),r=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const u$=(e,t,r)=>new c$(e,t,r);function d$(){if(typeof window<"u"||typeof process>"u")return!1;const e=process.version;if(e==null)return!1;const t=e.match(/^v(\d+)\./);return t?parseInt(t[1],10)<=18:!1}d$()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const f$="https://okdzllfpsvltjqryslnn.supabase.co",h$="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im9rZHpsbGZwc3ZsdGpxcnlzbG5uIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTk3NTcxMTgsImV4cCI6MjA3NTMzMzExOH0.uLhMzo49-OMEp4ghFAFI31IpiDs1tjbyY2jZlk-vgUo",Pe=u$(f$,h$,{db:{schema:"public"},auth:{persistSession:!0,autoRefreshToken:!0}}),so="__FEATURE_SUGGESTION__",Wv="__feature_suggestion__",m$="__feature_future_session__";function Vm(e){let t={};if(e!=null&&e.description)try{t=JSON.parse(e.description)}catch(s){console.warn("[databaseService] Unable to parse suggestion payload",s),t={}}const n=(Array.isArray(e==null?void 0:e.tags)?e.tags:[]).includes(m$)?"future":"pending";return{id:e.id,session_id:e.session_id,title:e.title,summary:t.summary??null,whatWouldItDo:t.whatWouldItDo??null,howWouldItWork:t.howWouldItWork??null,status:n,requester_id:t.requesterId??null,requester_name:t.requesterName??null,requester_email:t.requesterEmail??null,attachment_urls:t.attachmentUrls??null,created_at:e.created_at}}async function kE(e){try{if(!Pe||typeof Pe.from!="function")throw new Error("Supabase client is not properly initialized");const t=`${Pe.supabaseUrl}/rest/v1/users?email=eq.${encodeURIComponent(e)}&select=*&limit=1`,r={apikey:Pe.supabaseKey,Authorization:`Bearer ${Pe.supabaseKey}`,"Content-Type":"application/json",Prefer:"return=representation"},n=fetch(t,{method:"GET",headers:r}).then(async f=>{if(!f.ok){const x=await f.text();throw console.error("[databaseService] Direct fetch error:",x),new Error(`API error: ${f.status} - ${x}`)}const p=await f.json();return{data:p.length>0?p[0]:null,error:null}}).catch(f=>{throw console.error("[databaseService] Direct fetch exception:",f),f}),s=Promise.race([n,new Promise((f,p)=>{setTimeout(()=>p(new Error("Direct fetch timeout after 5 seconds")),5e3)})]);try{const f=await s;if(f.data)return f.data}catch{}const a=Pe.from("users").select("*").eq("email",e).single(),u=await Promise.race([a,new Promise((f,p)=>{setTimeout(()=>{console.error("[databaseService]  TIMEOUT: Query did not complete after 10 seconds"),p(new Error("Query timeout after 10 seconds"))},1e4)})]),{data:d,error:m}=u;if(m){if(m.code==="PGRST116")return null;throw m}return d}catch(t){throw console.error("[databaseService] getUserByEmail error:",t),t}}async function p$(e){const t="5e5482eb-82f0-4e76-8a6b-c6d74b01cd3a",{data:r,error:n}=await Pe.from("users").insert([{email:e.email,name:e.name,tenant_id:e.tenant_id||t}]).select().single();if(n)throw console.error("[databaseService] createUser error:",n),n;return r}async function Pl(e,t){try{let r=await kE(e);return r||(r=await p$({email:e,name:t})),r}catch(r){throw console.error("[databaseService] Error in getOrCreateUser:",r),r}}async function bx(){const{data:e,error:t}=await Pe.from("users").select("*").order("created_at",{ascending:!1});if(t)throw t;return e||[]}async function g$(e){var l,u;const[t,r,n]=await Promise.all([Ui(e),Pe.from("session_admins").select("session_id").eq("user_id",e),Pe.from("users").select("email").eq("id",e).single()]),s=((l=r.data)==null?void 0:l.length)||0;let a=0;if((u=n.data)!=null&&u.email){const{data:d}=await Pe.from("session_stakeholders").select("session_id").eq("user_email",n.data.email);a=(d==null?void 0:d.length)||0}return{userId:e,isSystemAdmin:t,sessionAdminCount:s,stakeholderSessionCount:a}}const uu="PRODUCTS_TABLE_MISSING";function eo(e){return typeof e=="object"&&e!==null&&e.code===uu}async function Bh(){const{data:e,error:t}=await Pe.from("products").select("*").order("name",{ascending:!0});if(t){if((t==null?void 0:t.code)==="PGRST205"){const r=new Error("Products table is missing");throw r.code=uu,r}throw t}return e||[]}async function Ga(e){const{data:t,error:r}=await Pe.from("products").select("*").eq("tenant_id",e).order("name",{ascending:!0});if(r){if((r==null?void 0:r.code)==="PGRST205"){const n=new Error("Products table is missing");throw n.code=uu,n}throw r}return t||[]}async function NE(e,t){if(!e)throw new Error("Product ID is required");const r={};if(t.name!==void 0){const a=t.name.trim();if(!a)throw new Error("Product name cannot be empty");r.name=a}if(t.color_hex!==void 0&&(r.color_hex=t.color_hex),Object.keys(r).length===0)throw new Error("No updates provided");const{data:n,error:s}=await Pe.from("products").update(r).eq("id",e).select().single();if(s){if((s==null?void 0:s.code)==="PGRST205"){const a=new Error("Products table is missing");throw a.code=uu,a}throw s}return n}async function wx(e,t,r){const n=t.trim();if(!n)throw new Error("Product name is required");const{data:s,error:a}=await Pe.from("products").insert([{name:n,tenant_id:e,color_hex:r||null}]).select().single();if(a){if((a==null?void 0:a.code)==="PGRST205"){const l=new Error("Products table is missing");throw l.code=uu,l}if((a==null?void 0:a.code)==="23505"){const{data:l,error:u}=await Pe.from("products").select("*").eq("tenant_id",e).eq("name",n).maybeSingle();if(u)throw u;if(l)return l}throw a}return s}async function _E(e){const{error:t}=await Pe.from("products").delete().eq("id",e);if(t){if((t==null?void 0:t.code)==="PGRST205"){const r=new Error("Products table is missing");throw r.code=uu,r}throw t}}const du="*, product:products(name)";function qm(e){if(!e)throw new Error("Unexpected empty session row");const{product:t,...r}=e,n=r.product_name??(t==null?void 0:t.name)??null;return{...r,product_name:n}}function Vv(e){return!e||e.length===0?[]:e.map(t=>qm(t))}async function Go(){try{const e=`${Pe.supabaseUrl}/rest/v1/voting_sessions?select=${encodeURIComponent(du)}&order=created_at.desc`,t={apikey:Pe.supabaseKey,Authorization:`Bearer ${Pe.supabaseKey}`,"Content-Type":"application/json"},r=await fetch(e,{method:"GET",headers:t});if(!r.ok){const s=await r.text();throw console.error("[databaseService] getAllSessions API error:",r.status,s),new Error(`API error: ${r.status} - ${s}`)}const n=await r.json();return Vv(n)}catch(e){throw console.error("[databaseService] Exception in getAllSessions:",e),e}}async function qv(e){const{data:t,error:r}=await Pe.from("voting_sessions").select(du).eq("id",e).single();if(r){if(r.code==="PGRST116")return null;throw r}return t?qm(t):null}async function y$(e){const{data:t,error:r}=await Pe.from("voting_sessions").select(du).eq("session_code",e).single();if(r){if(r.code==="PGRST116")return null;throw r}return t?qm(t):null}async function ES(e){try{const t=`${Pe.supabaseUrl}/rest/v1/voting_sessions?product_id=eq.${e}&select=${encodeURIComponent(du)}&order=created_at.desc`,r={apikey:Pe.supabaseKey,Authorization:`Bearer ${Pe.supabaseKey}`,"Content-Type":"application/json"},n=await fetch(t,{method:"GET",headers:r});if(!n.ok){const a=await n.text();throw console.error("[databaseService] getSessionsByProduct API error:",n.status,a),new Error(`API error: ${n.status} - ${a}`)}const s=await n.json();return Vv(s)}catch(t){throw console.error("[databaseService] Exception in getSessionsByProduct:",t),t}}async function CE(e){var t;try{if(await Ui(e))return Go();const n=`${Pe.supabaseUrl}/rest/v1/session_admins?user_id=eq.${e}&select=session_id`,s=await fetch(n,{method:"GET",headers:{apikey:Pe.supabaseKey,Authorization:`Bearer ${Pe.supabaseKey}`,"Content-Type":"application/json"}});if(!s.ok){const C=await s.text();throw console.error("[databaseService] Error loading session admins:",s.status,C),new Error(`API error: ${s.status} - ${C}`)}const a=await s.json(),l=(a==null?void 0:a.map(C=>C.session_id))||[],u=`${Pe.supabaseUrl}/rest/v1/users?id=eq.${e}&select=email&limit=1`,d=await fetch(u,{method:"GET",headers:{apikey:Pe.supabaseKey,Authorization:`Bearer ${Pe.supabaseKey}`,"Content-Type":"application/json"}});if(!d.ok){const C=await d.text();throw console.error("[databaseService] Error getting user email:",d.status,C),new Error(`API error: ${d.status} - ${C}`)}const m=await d.json(),f=(t=m==null?void 0:m[0])==null?void 0:t.email;if(!f)throw console.error("[databaseService] User email not found"),new Error("User email not found");const p=`${Pe.supabaseUrl}/rest/v1/session_stakeholders?user_email=eq.${encodeURIComponent(f)}&select=session_id`,x=await fetch(p,{method:"GET",headers:{apikey:Pe.supabaseKey,Authorization:`Bearer ${Pe.supabaseKey}`,"Content-Type":"application/json"}});if(!x.ok){const C=await x.text();throw console.error("[databaseService] Error loading session stakeholders:",x.status,C),new Error(`API error: ${x.status} - ${C}`)}const v=await x.json(),b=(v==null?void 0:v.map(C=>C.session_id))||[],w=[...new Set([...l,...b])];if(w.length===0)return[];const j=`${Pe.supabaseUrl}/rest/v1/voting_sessions?select=${encodeURIComponent(du)}&id=in.(${w.join(",")})&order=created_at.desc`,_=await fetch(j,{method:"GET",headers:{apikey:Pe.supabaseKey,Authorization:`Bearer ${Pe.supabaseKey}`,"Content-Type":"application/json"}});if(!_.ok){const C=await _.text();throw console.error("[databaseService] Error loading voting sessions:",_.status,C),new Error(`API error: ${_.status} - ${C}`)}const E=await _.json();return Vv(E)}catch(r){throw console.error("[databaseService] Error in getSessionsForUser:",r),r}}async function EE(e){if(!e)return null;const{data:t,error:r}=await Pe.from("voting_sessions").select(du).eq("product_id",e).eq("is_active",!0).maybeSingle();if(r){if(r.code==="PGRST116")return null;throw r}return t?qm(t):null}async function jx(e){const{data:t,error:r}=await Pe.from("voting_sessions").insert([e]).select().single();if(r)throw r;return t}async function AE(e,t){const{data:r,error:n}=await Pe.from("voting_sessions").update(t).eq("id",e).select().single();if(n)throw n;return r}async function x$(e){const{error:t}=await Pe.from("voting_sessions").delete().eq("id",e);if(t)throw t}async function v$(e,t){const{error:r}=await Pe.from("votes").delete().eq("session_id",e).eq("feature_id",t);if(r)throw r}async function qd(e){const{data:t,error:r}=await Pe.from("session_admins").select(`
      *,
      users (*)
    `).eq("session_id",e);if(r)throw r;return(t||[]).map(n=>({id:n.id,session_id:n.session_id,user_id:n.user_id,created_at:n.created_at,user:n.users}))}async function PE(e){const{data:t,error:r}=await Pe.from("voting_sessions").select("id").eq("product_id",e);if(r)throw r;if(!t||t.length===0)return[];const n=t.map(u=>u.id),{data:s,error:a}=await Pe.from("session_admins").select(`
      *,
      users (*)
    `).in("session_id",n);if(a)throw a;const l=new Map;return(s||[]).forEach(u=>{const d={id:u.id,session_id:u.session_id,user_id:u.user_id,created_at:u.created_at,user:u.users};if(d.user&&d.user.email){const m=d.user.email.toLowerCase();l.has(m)||l.set(m,d)}}),Array.from(l.values())}async function Dl(e,t){const{data:r,error:n}=await Pe.from("session_admins").insert([{session_id:e,user_id:t}]).select().single();if(n)throw n;return r}async function b$(e,t,r){const n=await Pl(t,r);return Dl(e,n.id)}async function Sx(e,t){const{error:r}=await Pe.from("session_admins").delete().eq("session_id",e).eq("user_id",t);if(r)throw r}async function Hm(e,t){try{if(await Ui(t))return!0;const n=`${Pe.supabaseUrl}/rest/v1/session_admins?session_id=eq.${e}&user_id=eq.${t}&select=id&limit=1`,s={apikey:Pe.supabaseKey,Authorization:`Bearer ${Pe.supabaseKey}`,"Content-Type":"application/json"},a=await fetch(n,{method:"GET",headers:s});if(!a.ok)return console.error("Error checking admin status:",a.status),!1;const l=await a.json();return Array.isArray(l)&&l.length>0}catch(r){return console.error("Caught exception checking admin:",r),!1}}async function Wh(e){const{data:t,error:r}=await Pe.from("session_stakeholders").select("*").eq("session_id",e).order("user_name",{ascending:!0});if(r)throw r;return t||[]}async function OE(e){const{data:t,error:r}=await Pe.from("session_stakeholders").insert([e]).select().single();if(r)throw r;return t}async function AS(e,t,r){return OE({session_id:e,user_email:t,user_name:r,votes_allocated:0,has_voted:!1})}function IE(e,t,r){const n=typeof window<"u"&&window.location.pathname.startsWith("/feature-voting-app")?"/feature-voting-app":"",s=`${window.location.origin}${n}/login?session=${e.session_code??""}`,a=encodeURIComponent(`You're invited to vote: ${e.title}`),l=encodeURIComponent(`Hi,

You've been invited to participate in a feature voting session.

Session: ${e.title}
Goal: ${e.goal}

To get started, copy and paste this link into your browser:

${s}

Voting Period: ${e.start_date?PS(e.start_date):""} - ${e.end_date?PS(e.end_date):""}

Best regards,
${r}`);return`mailto:${encodeURIComponent(t)}?subject=${a}&body=${l}`}function PS(e){return new Date(e).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})}async function kx(e,t){const{error:r}=await Pe.from("session_stakeholders").delete().eq("session_id",e).eq("user_email",t);if(r)throw r}async function Hv(e,t){try{const r=`${Pe.supabaseUrl}/rest/v1/session_stakeholders?session_id=eq.${e}&user_email=eq.${encodeURIComponent(t)}&select=id&limit=1`,n={apikey:Pe.supabaseKey,Authorization:`Bearer ${Pe.supabaseKey}`,"Content-Type":"application/json"},s=await fetch(r,{method:"GET",headers:n});if(!s.ok)return console.error("Error checking stakeholder status:",s.status),!1;const a=await s.json();return Array.isArray(a)&&a.length>0}catch(r){return console.error("Caught exception checking stakeholder:",r),!1}}async function w$(e,t){const{data:r,error:n}=await Pe.from("session_stakeholders").select("id").eq("session_id",e).eq("user_email",t.toLowerCase()).maybeSingle();return n?(console.error("Error checking stakeholder status:",n),!1):!!r}async function OS(e,t){const{error:r}=await Pe.from("session_stakeholders").delete().eq("session_id",e).eq("user_email",t.toLowerCase());if(r)throw r}async function ja(e){const t=`${Pe.supabaseUrl}/rest/v1/features?session_id=eq.${e}&select=*&order=created_at.desc`,r={apikey:Pe.supabaseKey,Authorization:`Bearer ${Pe.supabaseKey}`,"Content-Type":"application/json"},n=await fetch(t,{method:"GET",headers:r});if(!n.ok){const a=await n.text();throw new Error(`API error: ${n.status} - ${a}`)}return(await n.json()||[]).filter(a=>{const l=a.state===so,u=Array.isArray(a.tags)&&a.tags.includes(Wv);return!l&&!u}).map(a=>({...a,workItemType:a.work_item_type||a.workItemType||null,epic:a.epic||null,epicId:a.epic_id||a.epicId||null,areaPath:a.area_path||a.areaPath||null,azureDevOpsId:a.azure_devops_id||a.azureDevOpsId||null,azureDevOpsUrl:a.azure_devops_url||a.azureDevOpsUrl||null,azure_devops_id:a.azure_devops_id||a.azureDevOpsId||null}))}async function lh(e){const{data:t,error:r}=await Pe.from("features").insert([{session_id:e.session_id,title:e.title,description:e.description,epic:e.epic,epic_id:e.epicId,state:e.state,area_path:e.areaPath,tags:e.tags,azure_devops_id:e.azure_devops_id,azure_devops_url:e.azure_devops_url,work_item_type:e.workItemType}]).select().single();if(r)throw r;return{...t,workItemType:t.work_item_type||t.workItemType||null,epic:t.epic||null,epicId:t.epic_id||t.epicId||null,areaPath:t.area_path||t.areaPath||null,azureDevOpsId:t.azure_devops_id||t.azureDevOpsId||null,azureDevOpsUrl:t.azure_devops_url||t.azureDevOpsUrl||null,azure_devops_id:t.azure_devops_id||t.azureDevOpsId||null}}async function Ju(e,t){const r={};t.title!==void 0&&(r.title=t.title),t.description!==void 0&&(r.description=t.description),t.epic!==void 0&&(r.epic=t.epic),t.epicId!==void 0&&(r.epic_id=t.epicId),t.state!==void 0&&(r.state=t.state),t.areaPath!==void 0&&(r.area_path=t.areaPath),t.tags!==void 0&&(r.tags=t.tags),t.azure_devops_id!==void 0&&(r.azure_devops_id=t.azure_devops_id),t.azure_devops_url!==void 0&&(r.azure_devops_url=t.azure_devops_url),t.workItemType!==void 0&&(r.work_item_type=t.workItemType);const{data:n,error:s}=await Pe.from("features").update(r).eq("id",e).select().single();if(s)throw s;return{...n,workItemType:n.work_item_type||n.workItemType||null,epic:n.epic||null,epicId:n.epic_id||n.epicId||null,areaPath:n.area_path||n.areaPath||null,azureDevOpsId:n.azure_devops_id||n.azureDevOpsId||null,azureDevOpsUrl:n.azure_devops_url||n.azureDevOpsUrl||null,azure_devops_id:n.azure_devops_id||n.azureDevOpsId||null}}async function IS(e){const{error:t}=await Pe.from("features").delete().eq("id",e);if(t)throw t}function TE(e){return{id:e.id,sessionId:e.session_id,type:e.type,reason:e.reason,details:e.details??null,actorName:e.actor_name??"Admin",actorId:e.actor_id??null,createdAt:e.created_at}}async function j$(e){try{const{data:t,error:r}=await Pe.from("session_status_notes").select("*").eq("session_id",e).order("created_at",{ascending:!1});if(r)throw r;return(t||[]).map(TE)}catch(t){if((t==null?void 0:t.code)==="42P01")return console.warn("[databaseService] session_status_notes table not found; status notes will not persist.",t),[];throw t}}async function S$(e){try{const{data:t,error:r}=await Pe.from("session_status_notes").insert([{session_id:e.session_id,type:e.type,reason:e.reason,details:e.details??null,actor_id:e.actor_id??null,actor_name:e.actor_name}]).select("*").single();if(r)throw r;return TE(t)}catch(t){if((t==null?void 0:t.code)==="42P01")return console.warn("[databaseService] session_status_notes table not found; status notes will not persist.",t),{id:`temp-${Date.now()}`,sessionId:e.session_id,type:e.type,reason:e.reason,details:e.details??null,actorName:e.actor_name,actorId:e.actor_id??null,createdAt:new Date().toISOString()};throw t}}async function Lo(e){const t=`${Pe.supabaseUrl}/rest/v1/votes?session_id=eq.${e}&select=*`,r={apikey:Pe.supabaseKey,Authorization:`Bearer ${Pe.supabaseKey}`,"Content-Type":"application/json"},n=await fetch(t,{method:"GET",headers:r});if(!n.ok){const a=await n.text();throw new Error(`API error: ${n.status} - ${a}`)}return await n.json()||[]}async function k$(e){const{data:t}=await Pe.from("votes").select("*").eq("session_id",e.session_id).eq("feature_id",e.feature_id).eq("user_id",e.user_id).single();if(t){const{data:r,error:n}=await Pe.from("votes").update({vote_count:e.vote_count}).eq("session_id",e.session_id).eq("feature_id",e.feature_id).eq("user_id",e.user_id).select().single();if(n)throw n;return r}else{const{data:r,error:n}=await Pe.from("votes").insert([e]).select().single();if(n)throw n;return r}}async function N$(e,t){const{error:r}=await Pe.from("votes").delete().eq("session_id",e).eq("user_id",t);if(r)throw console.error("Error deleting user votes:",r),r}async function _$(e){const{error:t}=await Pe.from("votes").delete().eq("session_id",e);if(t)throw t}async function C$(e){try{const{data:t,error:r}=await Pe.from("azure_devops_config").select("*").eq("session_id",e).maybeSingle();if(r){if(r.code==="PGRST116")return null;throw r}return t}catch(t){return console.error("Error getting Azure DevOps config:",t),null}}async function wl(e,t){try{const r={session_id:e,organization:t.organization,project:t.project,enabled:t.enabled,work_item_type:t.workItemType};t.accessToken!==void 0&&(r.access_token=t.accessToken),t.refreshToken!==void 0&&(r.refresh_token=t.refreshToken),t.tokenExpiresAt!==void 0&&(r.token_expires_at=t.tokenExpiresAt),t.tenantId!==void 0&&(r.tenant_id=t.tenantId),t.clientId!==void 0&&(r.client_id=t.clientId),t.query!==void 0&&(r.query=t.query),t.lastSyncTime!==void 0&&(r.last_sync_time=t.lastSyncTime),t.states!==void 0&&(r.states=t.states),t.areaPath!==void 0&&(r.area_path=t.areaPath),t.tags!==void 0&&(r.tags=t.tags);const{data:n,error:s}=await Pe.from("azure_devops_config").update(r).eq("session_id",e).select();if(!s&&n&&n.length>0)return n[0];const{data:a,error:l}=await Pe.from("azure_devops_config").upsert([r]).select().single();if(!l)return a;if((l==null?void 0:l.code)==="23505"){const{data:u,error:d}=await Pe.from("azure_devops_config").select("*").eq("session_id",e).maybeSingle();if(d)throw d;return u}throw l||s}catch(r){throw console.error("Error saving Azure DevOps config:",r),r}}async function E$(){return(await Go())[0]||null}async function A$(e){const t=await E$();if(!t)throw new Error("No session found");return AE(t.id,e)}async function TS(e,t){return AE(e,t)}async function P$(e){const{data:t,error:r}=await Pe.from("info_requests").insert([{session_id:e.session_id,feature_id:e.feature_id,feature_title:e.feature_title,requester_id:e.requester_id,requester_name:e.requester_name,requester_email:e.requester_email,created_at:e.created_at}]).select().single();if(r)throw r;return t}async function O$(e){const t={summary:e.description??null,whatWouldItDo:e.whatWouldItDo??null,howWouldItWork:e.howWouldItWork??null,requesterId:e.requester_id??null,requesterName:e.requester_name??null,requesterEmail:e.requester_email??null,attachmentUrls:e.attachment_urls??null},{data:r,error:n}=await Pe.from("features").insert([{session_id:e.session_id,title:e.title,description:JSON.stringify(t),epic:null,state:so,area_path:null,tags:[Wv],azure_devops_id:null,azure_devops_url:null}]).select("id, session_id, title, description, created_at").single();if(n)throw n;return Vm(r)}async function I$(e,t){const{data:r,error:n}=await Pe.from("features").select("id, title, description, session_id, created_at").eq("id",e).eq("state",so).single();if(n)throw n;let s={};if(r!=null&&r.description)try{s=JSON.parse(r.description)}catch(d){console.warn("[databaseService] Unable to parse suggestion payload during update",d)}const a={summary:t.summary??s.summary??null,whatWouldItDo:t.whatWouldItDo??s.whatWouldItDo??null,howWouldItWork:t.howWouldItWork??s.howWouldItWork??null,requesterId:s.requesterId??null,requesterName:t.requester_name??s.requesterName??null,requesterEmail:t.requester_email??s.requesterEmail??null,attachmentUrls:t.attachment_urls!==void 0?t.attachment_urls:s.attachmentUrls??null},{data:l,error:u}=await Pe.from("features").update({title:t.title??r.title,description:JSON.stringify(a)}).eq("id",e).eq("state",so).select("id, session_id, title, description, created_at").single();if(u)throw u;return Vm(l)}async function T$(e){const{error:t}=await Pe.from("features").delete().eq("id",e).eq("state",so);if(t)throw t}async function D$(e,t){const{data:r,error:n}=await Pe.from("features").update({session_id:t}).eq("id",e).eq("state",so).select("id, session_id, title, description, created_at").single();if(n)throw n;return Vm(r)}async function $$(e){const{data:t,error:r}=await Pe.from("features").select("*").eq("id",e).eq("state",so).single();if(r)throw r;let n={};if(t!=null&&t.description)try{n=JSON.parse(t.description)}catch(d){console.warn("[databaseService] Unable to parse suggestion payload during promotion",d)}const s=[];n.summary&&s.push(n.summary),n.whatWouldItDo&&s.push(`What would it do?
${n.whatWouldItDo}`),n.howWouldItWork&&s.push(`How would it work?
${n.howWouldItWork}`);const a=Array.isArray(t.tags)?t.tags.filter(d=>d!==Wv):[],{data:l,error:u}=await Pe.from("features").update({description:s.join(`

`)||t.title,state:null,tags:a}).eq("id",e).eq("state",so).select("*").single();if(u)throw u;return l}async function DS(e){const{data:t,error:r}=await Pe.from("features").select("id, session_id, title, description, created_at, state, tags").eq("session_id",e).eq("state",so).order("created_at",{ascending:!1});if(r)throw r;return(t||[]).map(Vm)}async function Nx(){const{data:e,error:t}=await Pe.from("system_admins").select(`
      *,
      users (*)
    `).order("created_at",{ascending:!1});if(t)throw t;return(e||[]).map(r=>({id:r.id,user_id:r.user_id,created_at:r.created_at,user:r.users}))}async function Vh(e){const{data:t,error:r}=await Pe.from("system_admins").insert([{user_id:e}]).select().single();if(r)throw r;return t}async function _x(e){const{error:t}=await Pe.from("system_admins").delete().eq("user_id",e);if(t)throw t}async function Ui(e){try{const t=`${Pe.supabaseUrl}/rest/v1/system_admins?user_id=eq.${e}&select=id&limit=1`,r={apikey:Pe.supabaseKey,Authorization:`Bearer ${Pe.supabaseKey}`,"Content-Type":"application/json"},n=await fetch(t,{method:"GET",headers:r});if(!n.ok)return console.error("Error checking system admin status:",n.status),!1;const s=await n.json();return Array.isArray(s)&&s.length>0}catch(t){return console.error("Caught exception checking system admin:",t),!1}}const R$=["dave.hoffman@newmill.com"],M$="".split(",").map(e=>e.trim().toLowerCase()).filter(Boolean),F$=Array.from(new Set([...R$,...M$]));function Cx(e){return e?F$.includes(e.toLowerCase()):!1}const DE=g.createContext(void 0);function L$({children:e}){const[t,r]=g.useState(null),[n,s]=g.useState([]),[a,l]=g.useState(null),[u,d]=g.useState(!1),[m,f]=g.useState(!1),[p,x]=g.useState(!1),[v,b]=g.useState(!0),[w,j]=g.useState(!1),[_,E]=g.useState(!1),C=g.useRef(!1),I=g.useCallback(async T=>{if(_)return;const K=T||a;if(!K){s([]),r(Q=>{if(Q)try{localStorage.removeItem("voting_system_current_session")}catch{}return null});return}E(!0);try{const Q=Cx(K.email);let se;Q?se=await Go():se=await CE(K.id),s(se),r(G=>{if(!G)return G;const le=se.find(F=>F.id===G.id);if(!le){try{localStorage.removeItem("voting_system_current_session")}catch{}return null}if(le.id!==G.id)return G;if(le!==G){try{localStorage.setItem("voting_system_current_session",le.id)}catch{}return le}return G})}catch(Q){console.error("Error loading sessions:",Q),s([])}finally{E(!1)}},[a,_]);g.useEffect(()=>{if(C.current)return;C.current=!0;const T=setTimeout(()=>{b(!1)},5e3);(async()=>{var se,G;try{if(window.location.search.includes("code=")||window.location.hash.includes("access_token")||window.location.search.includes("error=")){setTimeout(async()=>{var Y,J;try{const{data:{session:V}}=await Pe.auth.getSession();if(V!=null&&V.user){const H=V.user.email;if(H){const re=((Y=V.user.user_metadata)==null?void 0:Y.full_name)||((J=V.user.user_metadata)==null?void 0:J.name)||H.split("@")[0]||"User";try{const ie=await Pl(H.toLowerCase(),re);l(ie),await I(ie),setTimeout(()=>{if(window.location.hash){const M=window.location.pathname+window.location.search;window.history.replaceState(null,"",M)}},200)}catch(ie){console.error("Error getting/creating user:",ie)}}}}catch(V){console.error("Error in OAuth callback handler:",V)}finally{b(!1),clearTimeout(T)}},1e3);return}const{data:{session:F}}=await Pe.auth.getSession();if(F!=null&&F.user){const Y=F.user.email;if(Y){const J=((se=F.user.user_metadata)==null?void 0:se.full_name)||((G=F.user.user_metadata)==null?void 0:G.name)||Y.split("@")[0]||"User";try{const V=await Pl(Y.toLowerCase(),J);l(V),await I(V)}catch(V){console.error("Error getting/creating user:",V)}}}else{const Y=localStorage.getItem("voting_system_user");if(Y)try{const J=JSON.parse(Y);l(J);try{await I(J)}catch(V){console.error("Error refreshing sessions:",V)}}catch(J){console.error("Error loading stored user:",J),localStorage.removeItem("voting_system_user")}}}catch(le){console.error("Error checking Supabase auth:",le);const F=localStorage.getItem("voting_system_user");if(F)try{const Y=JSON.parse(F);l(Y)}catch(Y){console.error("Error loading stored user:",Y),localStorage.removeItem("voting_system_user")}}finally{window.location.search.includes("code=")||window.location.hash.includes("access_token")||window.location.search.includes("error=")||(b(!1),clearTimeout(T))}})();const{data:{subscription:Q}}=Pe.auth.onAuthStateChange(async(se,G)=>{var le,F,Y,J;if(se==="SIGNED_IN"&&(G!=null&&G.user)){const V=G.user.email;if(V){const H=((le=G.user.user_metadata)==null?void 0:le.full_name)||((F=G.user.user_metadata)==null?void 0:F.name)||V.split("@")[0]||"User",re=await Pl(V.toLowerCase(),H);l(re),await I(re),b(!1),setTimeout(()=>{if(window.location.hash){const ie=window.location.pathname+window.location.search;window.history.replaceState(null,"",ie)}},100)}}else if(se==="SIGNED_OUT")l(null),s([]),r(null),localStorage.removeItem("voting_system_user"),localStorage.removeItem("voting_system_current_session"),b(!1);else if(se==="TOKEN_REFRESHED"&&(G!=null&&G.user)){if(!a&&G.user.email){const V=G.user.email,H=((Y=G.user.user_metadata)==null?void 0:Y.full_name)||((J=G.user.user_metadata)==null?void 0:J.name)||V.split("@")[0]||"User",re=await Pl(V.toLowerCase(),H);l(re),await I(re)}b(!1)}});return()=>{Q.unsubscribe(),clearTimeout(T)}},[]),g.useEffect(()=>{(async()=>{if(!t||!a){d(!1),f(!1),j(!1);return}if(!w)try{const[K,Q]=await Promise.all([Hm(t.id,a.id),Hv(t.id,a.email)]);d(K),f(Q),j(!1)}catch(K){console.error("Error checking user roles:",K),d(!1),f(!1),j(!0)}})()},[t,a,w]),g.useEffect(()=>{(async()=>{if(!a){x(!1);return}if(Cx(a.email)){x(!0);return}try{const Q=await Ui(a.id);x(Q)}catch(Q){console.error("Error checking system admin status:",Q),x(!1)}})()},[a]);const A=g.useCallback(async T=>{l(T),j(!1),T?(localStorage.setItem("voting_system_user",JSON.stringify(T)),await I(T)):(localStorage.removeItem("voting_system_user"),s([]),r(null),x(!1))},[I]),$=g.useCallback(T=>{r(T),j(!1),T?localStorage.setItem("voting_system_current_session",T.id):localStorage.removeItem("voting_system_current_session")},[]);g.useEffect(()=>{(async()=>{if(!a||n.length===0)return;const K=localStorage.getItem("voting_system_current_session");if(K){const Q=n.find(se=>se.id===K);Q&&r(Q)}})()},[a,n]),g.useEffect(()=>{const T=()=>{const se=window.location.hash;if(se==="#"||se===""){const G=window.location.pathname+window.location.search;window.history.replaceState(null,"",G)}};T();const K=()=>{T()},Q=setInterval(T,500);return window.addEventListener("hashchange",K),()=>{clearInterval(Q),window.removeEventListener("hashchange",K)}},[]);const B={currentSession:t,sessions:n,currentUser:a,isAdmin:u,isStakeholder:m,isSystemAdmin:p,isLoading:v,setCurrentSession:$,refreshSessions:I,setCurrentUser:A};return v?i.jsx("div",{className:"min-h-screen w-full bg-gray-50 flex items-center justify-center",children:i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-[#2d4660] mx-auto mb-4"}),i.jsx("p",{className:"text-gray-600",children:"Loading..."})]})}):i.jsx(DE.Provider,{value:B,children:e})}function Ta(){const e=g.useContext(DE);if(e===void 0)throw new Error("useSession must be used within a SessionProvider");return e}function Kv(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function"){var s=0;for(n=Object.getOwnPropertySymbols(e);s<n.length;s++)t.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(e,n[s])&&(r[n[s]]=e[n[s]])}return r}function el(e,t,r,n){return new(r||(r=Promise))((function(s,a){function l(m){try{d(n.next(m))}catch(f){a(f)}}function u(m){try{d(n.throw(m))}catch(f){a(f)}}function d(m){var f;m.done?s(m.value):(f=m.value,f instanceof r?f:new r((function(p){p(f)}))).then(l,u)}d((n=n.apply(e,[])).next())}))}var $S,RS,MS,qh,FS,LS,zS,Ex,US,BS;function z$(e){return(e==null?void 0:e.errorCode)!==void 0}(function(e){e.Inline="inline",e.Desktop="desktop",e.Web="web"})($S||($S={})),(function(e){e.M365Content="m365content"})(RS||(RS={})),(function(e){e.DriveId="driveId",e.GroupId="groupId",e.SiteId="siteId",e.UserId="userId"})(MS||(MS={})),(function(e){e[e.NOT_SUPPORTED_ON_PLATFORM=100]="NOT_SUPPORTED_ON_PLATFORM",e[e.INTERNAL_ERROR=500]="INTERNAL_ERROR",e[e.NOT_SUPPORTED_IN_CURRENT_CONTEXT=501]="NOT_SUPPORTED_IN_CURRENT_CONTEXT",e[e.PERMISSION_DENIED=1e3]="PERMISSION_DENIED",e[e.NETWORK_ERROR=2e3]="NETWORK_ERROR",e[e.NO_HW_SUPPORT=3e3]="NO_HW_SUPPORT",e[e.INVALID_ARGUMENTS=4e3]="INVALID_ARGUMENTS",e[e.UNAUTHORIZED_USER_OPERATION=5e3]="UNAUTHORIZED_USER_OPERATION",e[e.INSUFFICIENT_RESOURCES=6e3]="INSUFFICIENT_RESOURCES",e[e.THROTTLE=7e3]="THROTTLE",e[e.USER_ABORT=8e3]="USER_ABORT",e[e.OPERATION_TIMED_OUT=8001]="OPERATION_TIMED_OUT",e[e.OLD_PLATFORM=9e3]="OLD_PLATFORM",e[e.FILE_NOT_FOUND=404]="FILE_NOT_FOUND",e[e.SIZE_EXCEEDED=1e4]="SIZE_EXCEEDED"})(qh||(qh={})),(function(e){e.GeoLocation="geolocation",e.Media="media"})(FS||(FS={})),(function(e){e.BCAIS="bcais",e.BCWAF="bcwaf",e.BCWBF="bcwbf"})(LS||(LS={})),(function(e){e.Faculty="faculty",e.Student="student",e.Other="other"})(zS||(zS={})),(function(e){e.Adult="adult",e.MinorNoParentalConsentRequired="minorNoParentalConsentRequired",e.MinorWithoutParentalConsent="minorWithoutParentalConsent",e.MinorWithParentalConsent="minorWithParentalConsent",e.NotAdult="notAdult",e.NonAdult="notAdult"})(Ex||(Ex={})),(function(e){e.HigherEducation="higherEducation",e.K12="k12",e.Other="other"})(US||(US={})),(function(e){e.TextPlain="text/plain",e.TextHtml="text/html",e.ImagePNG="image/png",e.ImageJPEG="image/jpeg"})(BS||(BS={}));var hr,Ax,Px,WS,VS,qS,HS,KS;(function(e){e.desktop="desktop",e.web="web",e.android="android",e.ios="ios",e.ipados="ipados",e.macos="macos",e.visionOS="visionOS",e.rigel="rigel",e.surfaceHub="surfaceHub",e.teamsRoomsWindows="teamsRoomsWindows",e.teamsRoomsAndroid="teamsRoomsAndroid",e.teamsPhones="teamsPhones",e.teamsDisplays="teamsDisplays"})(hr||(hr={})),(function(e){e.office="Office",e.outlook="Outlook",e.outlookWin32="OutlookWin32",e.orange="Orange",e.places="Places",e.teams="Teams",e.teamsModern="TeamsModern"})(Ax||(Ax={})),(function(e){e.settings="settings",e.content="content",e.authentication="authentication",e.remove="remove",e.task="task",e.sidePanel="sidePanel",e.stage="stage",e.meetingStage="meetingStage"})(Px||(Px={})),(function(e){e.copilotSidePanel="copilotSidePanel",e.copilotMainPane="copilotMainPane",e.copilotFullScreen="copilotFullScreen"})(WS||(WS={})),(function(e){e[e.Standard=0]="Standard",e[e.Edu=1]="Edu",e[e.Class=2]="Class",e[e.Plc=3]="Plc",e[e.Staff=4]="Staff"})(VS||(VS={})),(function(e){e[e.Admin=0]="Admin",e[e.User=1]="User",e[e.Guest=2]="Guest"})(qS||(qS={})),(function(e){e.Large="large",e.Medium="medium",e.Small="small"})(HS||(HS={})),(function(e){e.Regular="Regular",e.Private="Private",e.Shared="Shared"})(KS||(KS={}));const U$={errorCode:qh.NOT_SUPPORTED_ON_PLATFORM},B$={adaptiveCardSchemaVersion:{majorVersion:1,minorVersion:5}};var GS={randomUUID:typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};let ch;const W$=new Uint8Array(16);function V$(){if(!ch&&(ch=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!ch))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return ch(W$)}const ms=[];for(let e=0;e<256;++e)ms.push((e+256).toString(16).slice(1));function q$(e,t=0){return ms[e[t+0]]+ms[e[t+1]]+ms[e[t+2]]+ms[e[t+3]]+"-"+ms[e[t+4]]+ms[e[t+5]]+"-"+ms[e[t+6]]+ms[e[t+7]]+"-"+ms[e[t+8]]+ms[e[t+9]]+"-"+ms[e[t+10]]+ms[e[t+11]]+ms[e[t+12]]+ms[e[t+13]]+ms[e[t+14]]+ms[e[t+15]]}function H$(e,t,r){if(GS.randomUUID&&!e)return GS.randomUUID();const n=(e=e||{}).random||(e.rng||V$)();return n[6]=15&n[6]|64,n[8]=63&n[8]|128,q$(n)}var K$=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function G$(e){return typeof e=="string"&&K$.test(e)}function $E(e,t){if(typeof e!="string"||typeof t!="string")return NaN;const r=e.split("."),n=t.split(".");function s(a){return/^\d+$/.test(a)}if(!r.every(s)||!n.every(s))return NaN;for(;r.length<n.length;)r.push("0");for(;n.length<r.length;)n.push("0");for(let a=0;a<r.length;++a)if(Number(r[a])!=Number(n[a]))return Number(r[a])>Number(n[a])?1:-1;return 0}function Y$(){return H$()}function RE(e){return Object.keys(e).forEach((t=>{e[t]!==null&&e[t]!==void 0&&typeof e[t]=="object"&&RE(e[t])})),Object.freeze(e)}function J$(e,t,r){return new Promise(((n,s)=>{const a=setTimeout(s,t,r);e().then((l=>{clearTimeout(a),n(l)})).catch((l=>{clearTimeout(a),s(l)}))}))}function X$(e){return e.protocol==="https:"}function Q$(){if(Km())throw new Error("window object undefined at SSR check");return window}function Km(){return typeof window>"u"}function Z$(e){return new RegExp(`${/<script[^>]*>|&lt;script[^&]*&gt;|%3Cscript[^%]*%3E/gi.source}|${/<\/script[^>]*>|&lt;\/script[^&]*&gt;|%3C\/script[^%]*%3E/gi.source}`,"gi").test(e)}function eR(e){if(!e)throw new Error("id must not be empty");if(G$(e)===!1)throw new Error("id must be a valid UUID")}const tR=!!performance&&"now"in performance;function Gv(){return tR?performance.now()+performance.timeOrigin:void 0}function YS(e){var t,r;if(!(!((r=(t=e.hostVersionsInfo)===null||t===void 0?void 0:t.appEligibilityInformation)===null||r===void 0)&&r.ageGroup))return e;const n=e.hostVersionsInfo.appEligibilityInformation.ageGroup;return(n==null?void 0:n.toLowerCase())!=="nonadult"?e:Object.assign(Object.assign({},e),{hostVersionsInfo:Object.assign(Object.assign({},e.hostVersionsInfo),{appEligibilityInformation:Object.assign(Object.assign({},e.hostVersionsInfo.appEligibilityInformation),{ageGroup:Ex.NotAdult})})})}let Hd=class{constructor(t=Y$()){this.uuid=t,eR(t)}toString(){return this.uuid}serialize(){return this.toString()}};const ME=e=>{const{uuid:t}=e,r=Kv(e,["uuid"]),n=t==null?void 0:t.toString();return Object.assign(Object.assign({},r),{uuidAsString:n})},rR=e=>{const{uuidAsString:t}=e,r=Kv(e,["uuidAsString"]);return Object.assign(Object.assign({},r),{uuid:t?new Hd(t):void 0})};var Ox={exports:{}},JS,XS;function nR(){if(XS)return JS;XS=1;var e=1e3,t=60*e,r=60*t,n=24*r,s=7*n,a=365.25*n;function l(u,d,m,f){var p=d>=1.5*m;return Math.round(u/m)+" "+f+(p?"s":"")}return JS=function(u,d){d=d||{};var m=typeof u;if(m==="string"&&u.length>0)return(function(f){if(!((f=String(f)).length>100)){var p=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(f);if(p){var x=parseFloat(p[1]);switch((p[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return x*a;case"weeks":case"week":case"w":return x*s;case"days":case"day":case"d":return x*n;case"hours":case"hour":case"hrs":case"hr":case"h":return x*r;case"minutes":case"minute":case"mins":case"min":case"m":return x*t;case"seconds":case"second":case"secs":case"sec":case"s":return x*e;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return x;default:return}}}})(u);if(m==="number"&&isFinite(u))return d.long?(function(f){var p=Math.abs(f);return p>=n?l(f,p,n,"day"):p>=r?l(f,p,r,"hour"):p>=t?l(f,p,t,"minute"):p>=e?l(f,p,e,"second"):f+" ms"})(u):(function(f){var p=Math.abs(f);return p>=n?Math.round(f/n)+"d":p>=r?Math.round(f/r)+"h":p>=t?Math.round(f/t)+"m":p>=e?Math.round(f/e)+"s":f+"ms"})(u);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(u))}}var sR=function(e){function t(s){let a,l,u,d=null;function m(...f){if(!m.enabled)return;const p=m,x=Number(new Date),v=x-(a||x);p.diff=v,p.prev=a,p.curr=x,a=x,f[0]=t.coerce(f[0]),typeof f[0]!="string"&&f.unshift("%O");let b=0;f[0]=f[0].replace(/%([a-zA-Z%])/g,((w,j)=>{if(w==="%%")return"%";b++;const _=t.formatters[j];if(typeof _=="function"){const E=f[b];w=_.call(p,E),f.splice(b,1),b--}return w})),t.formatArgs.call(p,f),(p.log||t.log).apply(p,f)}return m.namespace=s,m.useColors=t.useColors(),m.color=t.selectColor(s),m.extend=r,m.destroy=t.destroy,Object.defineProperty(m,"enabled",{enumerable:!0,configurable:!1,get:()=>d!==null?d:(l!==t.namespaces&&(l=t.namespaces,u=t.enabled(s)),u),set:f=>{d=f}}),typeof t.init=="function"&&t.init(m),m}function r(s,a){const l=t(this.namespace+(a===void 0?":":a)+s);return l.log=this.log,l}function n(s){return s.toString().substring(2,s.toString().length-2).replace(/\.\*\?$/,"*")}return t.debug=t,t.default=t,t.coerce=function(s){return s instanceof Error?s.stack||s.message:s},t.disable=function(){const s=[...t.names.map(n),...t.skips.map(n).map((a=>"-"+a))].join(",");return t.enable(""),s},t.enable=function(s){let a;t.save(s),t.namespaces=s,t.names=[],t.skips=[];const l=(typeof s=="string"?s:"").split(/[\s,]+/),u=l.length;for(a=0;a<u;a++)l[a]&&((s=l[a].replace(/\*/g,".*?"))[0]==="-"?t.skips.push(new RegExp("^"+s.slice(1)+"$")):t.names.push(new RegExp("^"+s+"$")))},t.enabled=function(s){if(s[s.length-1]==="*")return!0;let a,l;for(a=0,l=t.skips.length;a<l;a++)if(t.skips[a].test(s))return!1;for(a=0,l=t.names.length;a<l;a++)if(t.names[a].test(s))return!0;return!1},t.humanize=nR(),t.destroy=function(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")},Object.keys(e).forEach((s=>{t[s]=e[s]})),t.names=[],t.skips=[],t.formatters={},t.selectColor=function(s){let a=0;for(let l=0;l<s.length;l++)a=(a<<5)-a+s.charCodeAt(l),a|=0;return t.colors[Math.abs(a)%t.colors.length]},t.enable(t.load()),t},iR={};(function(e,t){t.formatArgs=function(n){if(n[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+n[0]+(this.useColors?"%c ":" ")+"+"+e.exports.humanize(this.diff),!this.useColors)return;const s="color: "+this.color;n.splice(1,0,s,"color: inherit");let a=0,l=0;n[0].replace(/%[a-zA-Z%]/g,(u=>{u!=="%%"&&(a++,u==="%c"&&(l=a))})),n.splice(l,0,s)},t.save=function(n){try{n?t.storage.setItem("debug",n):t.storage.removeItem("debug")}catch{}},t.load=function(){let n;try{n=t.storage.getItem("debug")}catch{}return!n&&typeof process<"u"&&"env"in process&&(n=iR.DEBUG),n},t.useColors=function(){return typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs)?!0:typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/)?!1:typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)},t.storage=(function(){try{return localStorage}catch{}})(),t.destroy=(()=>{let n=!1;return()=>{n||(n=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),t.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],t.log=console.debug||console.log||(()=>{}),e.exports=sR(t);const{formatters:r}=e.exports;r.j=function(n){try{return JSON.stringify(n)}catch(s){return"[UnexpectedJSONParseError]: "+s.message}}})(Ox,Ox.exports);var Yv=Ox.exports;const aR=new Hd,oR=Yv.debug.formatArgs;Yv.debug.formatArgs=function(e){e[0]=`(${new Date().toISOString()}): ${e[0]} [${aR.toString()}]`,oR.call(this,e)};const lR=Yv.debug("teamsJs");function Da(e){return lR.extend(e)}function wn(e,t){return`${e}_${t}`}function FE(e){return/^v\d+_[\w.]+$/.test(e)}function Ho(e){return e.uuidAsString!==void 0?`${e.uuidAsString} (legacy id: ${e.id})`:e.uuid!==void 0?`${e.uuid.toString()} (legacy id: ${e.id})`:`legacy id: ${e.id} (no uuid)`}const cR=Da("flushMessageQueue");function LE(e,t,r,n){if(e&&t&&r.length!==0)for(;r.length>0;){const s=r.shift();if(s){const a=ME(s);cR("Flushing message %s from %s message queue via postMessage.",Ho(a),n),e.postMessage(a,t)}}}var uR=["teams.microsoft.com","teams.microsoft.us","gov.teams.microsoft.us","dod.teams.microsoft.us","int.teams.microsoft.com","outlook.office.com","outlook-sdf.office.com","outlook.office365.com","outlook-sdf.office365.com","outlook.office365.us","outlook-dod.office365.us","webmail.apps.mil","outlook.live.com","outlook-sdf.live.com","teams.live.com","local.teams.live.com","local.teams.live.com:8080","local.teams.office.com","local.teams.office.com:8080","devspaces.skype.com","*.www.office.com","www.office.com","word.office.com","excel.office.com","powerpoint.office.com","www.officeppe.com","*.www.microsoft365.com","www.microsoft365.com","bing.com","edgeservices.bing.com","work.bing.com","www.bing.com","www.staging-bing-int.com","*.cloud.microsoft","*.m365.cloud.microsoft","*.outlook.cloud.microsoft","chatuxmanager.svc.cloud.microsoft","copilot.microsoft.com","windows.msn.com","fa000000125.resources.office.net","fa000000129.resources.office.net","fa000000124.resources.office.net","fa000000128.resources.office.net","fa000000136.resources.office.net","fa000000125.officeapps.live.com","fa000000129.officeapps.live.com","fa000000124.officeapps.live.com","fa000000128.officeapps.live.com"];const QS="2.0.1",Eh=uR,ZS=1500,dR=new URL("https://res.cdn.office.net/teams-js/validDomains/json/validDomains.json"),fR=/^https:\/\//,Cd="The library has not yet been initialized",hR="The runtime has not yet been initialized",mR="The runtime version is not supported";let Gt=class{};Gt.initializeCalled=!1,Gt.initializeCompleted=!1,Gt.additionalValidOrigins=[],Gt.initializePromise=void 0,Gt.isFramelessWindow=!1,Gt.frameContext=void 0,Gt.hostClientType=void 0,Gt.printCapabilityEnabled=!1,Gt.teamsJsInstanceId=new Hd().toString();const zE=Da("runtime"),Gm=4;function UE(e){return e.apiVersion===Gm}function pR(e){if(UE(e))return!0;throw e.apiVersion===-1?new Error(hR):new Error(mR)}let Ca={apiVersion:-1,supports:{}};const gR={supports:{appInstallDialog:{},appEntity:{},call:{},chat:{},conversations:{},dialog:{card:{bot:{}},url:{bot:{},parentCommunication:{}},update:{}},interactive:{},logs:{},meetingRoom:{},menus:{},monetization:{},notifications:{},pages:{config:{},backStack:{},fullTrust:{}},remoteCamera:{},teams:{fullTrust:{}},teamsCore:{},video:{sharedFrame:{}}}},BE=[hr.desktop,hr.web,hr.rigel,hr.surfaceHub,hr.teamsRoomsWindows,hr.teamsRoomsAndroid,hr.teamsPhones,hr.teamsDisplays],yR=[hr.android,hr.ios,hr.ipados,hr.visionOS],ek=[...BE,...yR];function xR(e){let t=e;if(t.apiVersion<Gm&&vR.forEach((r=>{t.apiVersion===r.versionToUpgradeFrom&&(t=r.upgradeToNextVersion(t))})),UE(t))return t;throw new Error("Received a runtime that could not be upgraded to the latest version")}const vR=[{versionToUpgradeFrom:1,upgradeToNextVersion:e=>{var t;return{apiVersion:2,hostVersionsInfo:void 0,isLegacyTeams:e.isLegacyTeams,supports:Object.assign(Object.assign({},e.supports),{dialog:e.supports.dialog?{card:void 0,url:e.supports.dialog,update:(t=e.supports.dialog)===null||t===void 0?void 0:t.update}:void 0})}}},{versionToUpgradeFrom:2,upgradeToNextVersion:e=>{const t=e.supports,r=Kv(t,["appNotification"]);return Object.assign(Object.assign({},e),{apiVersion:3,supports:r})}},{versionToUpgradeFrom:3,upgradeToNextVersion:e=>{var t,r,n,s,a;return{apiVersion:4,hostVersionsInfo:e.hostVersionsInfo,isNAAChannelRecommended:e.isNAAChannelRecommended,isLegacyTeams:e.isLegacyTeams,supports:Object.assign(Object.assign({},e.supports),{dialog:e.supports.dialog?{card:(t=e.supports.dialog)===null||t===void 0?void 0:t.card,url:{bot:(n=(r=e.supports.dialog)===null||r===void 0?void 0:r.url)===null||n===void 0?void 0:n.bot,parentCommunication:!((s=e.supports.dialog)===null||s===void 0)&&s.url?{}:void 0},update:(a=e.supports.dialog)===null||a===void 0?void 0:a.update}:void 0})}}}],bR={"1.0.0":[{capability:{pages:{appButton:{},tabs:{}},stageView:{}},hostClientTypes:BE}],"1.9.0":[{capability:{location:{}},hostClientTypes:ek}],"2.0.0":[{capability:{people:{}},hostClientTypes:ek},{capability:{sharing:{}},hostClientTypes:[hr.desktop,hr.web]}],"2.0.1":[{capability:{teams:{fullTrust:{joinedTeams:{}}}},hostClientTypes:[hr.android,hr.desktop,hr.ios,hr.teamsRoomsAndroid,hr.teamsPhones,hr.teamsDisplays,hr.web]},{capability:{webStorage:{}},hostClientTypes:[hr.desktop]}],"2.0.5":[{capability:{webStorage:{}},hostClientTypes:[hr.android,hr.ios]}],"2.0.8":[{capability:{sharing:{}},hostClientTypes:[hr.android,hr.ios]}],"2.1.1":[{capability:{nestedAppAuth:{}},hostClientTypes:[hr.android,hr.ios,hr.ipados,hr.visionOS]}],"2.1.2":[]},wy=zE.extend("generateBackCompatRuntimeConfig");function WE(e,t){const r=Object.assign({},e);for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&(typeof t[n]!="object"||Array.isArray(t[n])?n in e||(r[n]=t[n]):r[n]=WE(e[n]||{},t[n]));return r}function wR(e,t,r){wy("generating back compat runtime config for %s",e);let n=Object.assign({},t.supports);wy("Supported capabilities in config before updating based on highestSupportedVersion: %o",n),Object.keys(r).forEach((a=>{$E(e,a)>=0&&r[a].forEach((l=>{Gt.hostClientType!==void 0&&l.hostClientTypes.includes(Gt.hostClientType)&&(n=WE(n,l.capability))}))}));const s={apiVersion:Gm,hostVersionsInfo:B$,isLegacyTeams:!0,supports:n};return wy("Runtime config after updating based on highestSupportedVersion: %o",s),s}const jy=zE.extend("applyRuntimeConfig");function Sy(e){typeof e.apiVersion=="string"&&(jy("Trying to apply runtime with string apiVersion, processing as v1: %o",e),e=Object.assign(Object.assign({},e),{apiVersion:1})),jy("Fast-forwarding runtime %o",e);const t=xR(e);jy("Applying runtime %o",t),Ca=RE(t)}function jR(e){return e!=null&&e.serialize!==void 0&&typeof e.serialize=="function"}const Hh="2.46.0";let Kh=class Lc{static storeCallbackInformation(t,r){Lc.callbackInformation.set(t,r)}static clearMessages(){Lc.callbackInformation.clear()}static deleteMessageInformation(t){Lc.callbackInformation.delete(t)}static handleOneWayPerformanceMetrics(t,r,n){const s=t.monotonicTimestamp;s&&n?hk({actionName:t.func,messageDelay:n-s,requestStartedAt:s}):r("Unable to send performance metrics for event %s",t.func)}static handlePerformanceMetrics(t,r,n,s){const a=Lc.callbackInformation.get(t);a&&r.monotonicTimestamp&&s?(hk({actionName:a.name,messageDelay:s-r.monotonicTimestamp,requestStartedAt:a.calledAt}),Lc.deleteMessageInformation(t)):n("Unable to send performance metrics for callback %s with arguments %o",t.toString(),r.args)}};Kh.callbackInformation=new Map;const VE=Da("nestedAppAuthUtils"),SR=VE.extend("tryPolyfillWithNestedAppAuthBridge"),kR="v2";function NR(e,t,r){var n;const s=SR;if(Gt.isFramelessWindow)return void s("Cannot polyfill nestedAppAuthBridge as current window is frameless");if(!t)return void s("Cannot polyfill nestedAppAuthBridge as current window does not exist");if(t.parent!==t.top)return void s("Default NAA bridge injection not supported in nested iframe. Use standalone NAA bridge instead.");const a=(()=>{try{return JSON.parse(e)}catch{return null}})();if(!a||!(!((n=a.supports)===null||n===void 0)&&n.nestedAppAuth))return void s("Cannot polyfill nestedAppAuthBridge as current hub does not support nested app auth");const l=t;if(l.nestedAppAuthBridge)return void s("nestedAppAuthBridge already exists on current window, skipping polyfill");const u=(function(d,m){const f=_R;if(!d)return f("nestedAppAuthBridge cannot be created as current window does not exist"),null;const{onMessage:p,sendPostMessage:x}=m,v=b=>w=>p(w,b);return{addEventListener:(b,w)=>{b==="message"?d.addEventListener(b,v(w)):f(`Event ${b} is not supported by nestedAppAuthBridge`)},postMessage:b=>{const w=(()=>{try{return JSON.parse(b)}catch{return null}})();if(!w||typeof w!="object"||w.messageType!=="NestedAppAuthRequest")return void f("Unrecognized data format received by app, message being ignored. Message: %o",b);const j=wn(kR,"nestedAppAuth.execute");x(b,j)},removeEventListener:(b,w)=>{d.removeEventListener(b,v(w))}}})(l,r);u&&(l.nestedAppAuthBridge=u)}const _R=VE.extend("createNestedAppAuthBridge");let zo=[];const Vo=Da("validateOrigin");let ud;function CR(){return el(this,void 0,void 0,(function*(){ud||(yield HE())}))}function qE(){return zo.length===0}function HE(e=!1){return el(this,void 0,void 0,(function*(){if(!qE()&&!e)return zo;if(ud)return ud;if(Km())return zo=Eh,Eh;{Vo("Initiating fetch call to acquire valid origins list from CDN");const t=new AbortController,r=setTimeout((()=>t.abort()),ZS);return ud=fetch(dR,{signal:t.signal}).then((n=>{if(clearTimeout(r),!n.ok)throw new Error("Invalid Response from Fetch Call");return Vo("Fetch call completed and retrieved valid origins list from CDN"),n.json().then((s=>{if((function(a){let l=JSON.parse(a);try{l=JSON.parse(a)}catch{return!1}if(!l.validOrigins)return!1;for(const u of l.validOrigins)try{new URL("https://"+u)}catch{return Vo("isValidOriginsFromCDN call failed to validate origin: %s",u),!1}return!0})(JSON.stringify(s)))return zo=s.validOrigins,zo;throw new Error("Valid origins list retrieved from CDN is invalid")}))})).catch((n=>(n.name==="AbortError"?Vo(`validOrigins fetch call to CDN failed due to Timeout of ${ZS} ms. Defaulting to fallback list`):Vo("validOrigins fetch call to CDN failed with error: %s. Defaulting to fallback list",n),zo=Eh,zo))),ud}}))}function tk(e,t){if(e.substring(0,2)==="*."){const r=e.substring(1);if(t.length>r.length&&t.split(".").length===r.split(".").length&&t.substring(t.length-r.length)===r)return!0}else if(e===t)return!0;return!1}function ER(e,t){const r=qE()?Eh:zo;return rk(e,r)?Promise.resolve(!0):(Vo("Origin %s is not in the local valid origins list, fetching from CDN",e),HE(t).then((n=>rk(e,n))))}function rk(e,t){if(!X$(e))return Vo("Origin %s is invalid because it is not using https protocol. Protocol being used: %s",e,e.protocol),!1;const r=e.host;if(t.some((n=>tk(n,r))))return!0;for(const n of Gt.additionalValidOrigins)if(tk(n.substring(0,8)==="https://"?n.substring(8):n,r))return!0;return Vo(`Origin %s is invalid because it is not an origin approved by this library or included in the call to app.initialize.
Origins approved by this library: %o
Origins included in app.initialize: %o`,e,t,Gt.additionalValidOrigins),!1}CR();const Jl=Da("communication");let xt=class{},gr=class{};function AR(e,t){if(gr.messageListener=r=>(function(n){return el(this,void 0,void 0,(function*(){if(!n||!n.data||typeof n.data!="object")return void nk("Unrecognized message format received by app, message being ignored. Message: %o",n);const s=n.source||n.originalEvent&&n.originalEvent.source,a=n.origin||n.originalEvent&&n.originalEvent.origin;return YE(s,a).then((l=>{l?((function(u,d){Gt.isFramelessWindow||xt.parentWindow&&!xt.parentWindow.closed&&u!==xt.parentWindow||(xt.parentWindow=u,xt.parentOrigin=d),xt.parentWindow&&xt.parentWindow.closed&&(xt.parentWindow=null,xt.parentOrigin=null),LE(xt.parentWindow,xt.parentOrigin,gr.parentMessageQueue,"parent")})(s,a),s!==xt.parentWindow?IM():ik(n)):nk("Message being ignored by app because it is either coming from the current window or a different window with an invalid origin, message: %o, source: %o, origin: %o",n,s,a)}))}))})(r),xt.currentWindow=xt.currentWindow||Q$(),xt.parentWindow=xt.currentWindow.parent!==xt.currentWindow.self?xt.currentWindow.parent:xt.currentWindow.opener,xt.topWindow=xt.currentWindow.top,(xt.parentWindow||e)&&xt.currentWindow.addEventListener("message",gr.messageListener,!1),!xt.parentWindow){const r=xt.currentWindow;if(!r.nativeInterface)return Promise.reject(new Error("Initialization Failed. No Parent window found."));Gt.isFramelessWindow=!0,r.onNativeMessage=ik}try{return xt.parentOrigin="*",Ym(t,"initialize",[Hh,Gm,e]).then((([r,n,s,a])=>(NR(a,xt.currentWindow,{onMessage:LR,sendPostMessage:$R}),{context:r,clientType:n,runtimeConfig:s,clientSupportedSDKVersion:a})))}finally{xt.parentOrigin=null}}function PR(e,t,...r){return Ym(e,t,r).then((([n])=>n))}function OR(e,t,r,...n){return Ym(e,t,n).then((([s,a])=>{if(!s)throw new Error(a||r)}))}function Ym(e,t,r=void 0){if(!FE(e))throw Error(`apiVersionTag: ${e} passed in doesn't follow the pattern starting with 'v' followed by digits, then underscore with words, please check.`);return new Promise((n=>{const s=GE(e,t,r);var a;n((a=s.uuid,new Promise((l=>{gr.promiseCallbacks.set(a,l)}))))}))}function IR(e){return e.map((t=>jR(t)?t.serialize():t))}function TR(e,t,r,n,s){var a;return el(this,void 0,void 0,(function*(){const l=IR(t),[u]=yield Ym(n,e,l);if(z$(u))throw new Error(`${u.errorCode}, message: ${(a=u.message)!==null&&a!==void 0?a:"None"}`);if(r.validate(u))return r.deserialize(u);throw new Error(`${qh.INTERNAL_ERROR}, message: Invalid response from host - ${JSON.stringify(u)}`)}))}function fa(e,t,r,n){let s;if(r instanceof Function?n=r:r instanceof Array&&(s=r),!FE(e))throw Error(`apiVersionTag: ${e} passed in doesn't follow the pattern starting with 'v' followed by digits, then underscore with words, please check.`);const a=GE(e,t,s);n&&gr.callbacks.set(a.uuid,n)}gr.parentMessageQueue=[],gr.topMessageQueue=[],gr.nextMessageId=0,gr.callbacks=new Map,gr.promiseCallbacks=new Map,gr.portCallbacks=new Map,gr.legacyMessageIdsToUuidMap={};const DR=Jl.extend("sendNestedAuthRequestToTopWindow");function $R(e,t){const r=DR,n=xt.topWindow,s=(function(a,l){const u=gr.nextMessageId++,d=new Hd;return gr.legacyMessageIdsToUuidMap[u]=d,{id:u,uuid:d,func:"nestedAppAuth.execute",timestamp:Date.now(),monotonicTimestamp:Gv(),apiVersionTag:l,args:[],data:a}})(e,t);return r("Message %s information: %o",Ho(s),{actionName:s.func}),KE(n,s)}const RR=Jl.extend("sendRequestToTargetWindowHelper");function KE(e,t){const r=RR,n=(function(a){return a===xt.topWindow&&Ix()?"top":a===xt.parentWindow?"parent":null})(e),s=ME(t);if(Gt.isFramelessWindow)xt.currentWindow&&xt.currentWindow.nativeInterface&&(r("Sending message %s to %s via framelessPostMessage interface",Ho(s),n),xt.currentWindow.nativeInterface.framelessPostMessage(JSON.stringify(s)));else{const a=(function(l){return l===xt.topWindow&&Ix()?xt.topOrigin:l===xt.parentWindow?xt.parentOrigin:null})(e);e&&a?(r("Sending message %s to %s via postMessage",Ho(s),n),e.postMessage(s,a)):(r("Adding message %s to %s message queue",Ho(s),n),zR(e).push(t))}return t}const MR=Jl.extend("sendMessageToParentHelper");function GE(e,t,r,n,s){const a=MR,l=xt.parentWindow,u=(function(d,m,f,p,x){const v=gr.nextMessageId++,b=new Hd;gr.legacyMessageIdsToUuidMap[v]=b;const w=Gt.teamsJsInstanceId;return{id:v,uuid:b,func:m,timestamp:Date.now(),monotonicTimestamp:Gv(),args:f||[],apiVersionTag:d,isProxiedFromChild:p!=null,teamsJsInstanceId:w}})(e,t,r,n);return Kh.storeCallbackInformation(u.uuid,{name:t,calledAt:u.timestamp}),a("Message %s information: %o",Ho(u),{actionName:t,args:r}),KE(l,u)}const nk=Jl.extend("processIncomingMessage"),FR=Jl.extend("processAuthBridgeMessage");function LR(e,t){var r,n;const s=FR;if(!e||!e.data||typeof e.data!="object")return void s("Unrecognized message format received by app, message being ignored. Message: %o",e);const{args:a}=e.data,[,l]=a??[],u=(()=>{try{return JSON.parse(l)}catch{return null}})();if(!u||typeof u!="object"||u.messageType!=="NestedAppAuthResponse")return void s("Unrecognized data format received by app, message being ignored. Message: %o",e);const d=e.source||((r=e==null?void 0:e.originalEvent)===null||r===void 0?void 0:r.source),m=e.origin||((n=e==null?void 0:e.originalEvent)===null||n===void 0?void 0:n.origin);d?YE(d,m)?(xt.topWindow&&!xt.topWindow.closed&&d!==xt.topWindow||(xt.topWindow=d,xt.topOrigin=m),xt.topWindow&&xt.topWindow.closed&&(xt.topWindow=null,xt.topOrigin=null),LE(xt.topWindow,xt.topOrigin,gr.topMessageQueue,"top"),t(l)):s("Message being ignored by app because it is either coming from the current window or a different window with an invalid origin"):s("Message being ignored by app because it is coming for a target that is null")}const ky=Jl.extend("shouldProcessIncomingMessage");function YE(e,t){return el(this,void 0,void 0,(function*(){if(xt.currentWindow&&e===xt.currentWindow)return ky("Should not process message because it is coming from the current window"),!1;if(xt.currentWindow&&xt.currentWindow.location&&t&&t===xt.currentWindow.location.origin)return!0;{let r;try{r=new URL(t)}catch{return ky("Message has an invalid origin of %s",t),!1}const n=yield ER(r);return n||ky("Message has an invalid origin of %s",t),n}}))}const sk=Jl.extend("handleIncomingMessageFromParent");function Ah(e,t){if(t){const r=[...e].find((([n,s])=>n.toString()===t.toString()));if(r)return r[0]}}function Ny(e,t){const r=Ah(t,e.uuid);r&&t.delete(r),e.uuid?gr.legacyMessageIdsToUuidMap={}:delete gr.legacyMessageIdsToUuidMap[e.id]}function ik(e){const t=sk,r=Gv();if("id"in e.data&&typeof e.data.id=="number"){const n=e.data,s=rR(n),a=(function(l){const u=sk;if(!l.uuid)return gr.legacyMessageIdsToUuidMap[l.id];{const d=l.uuid,m=Ah(gr.callbacks,d);if(m)return m;const f=Ah(gr.promiseCallbacks,d);if(f)return f;const p=Ah(gr.portCallbacks,d);if(p)return p}u("Received message %s that failed to produce a callbackId",Ho(l))})(s);if(a){const l=gr.callbacks.get(a);t("Received a response from parent for message %s",a.toString()),Kh.handlePerformanceMetrics(a,s,t,r),l&&(t("Invoking the registered callback for message %s with arguments %o",a.toString(),s.args),l.apply(null,[...s.args,s.isPartialResponse]),(function(m){return m.data.isPartialResponse===!0})(e)||(t("Removing registered callback for message %s",a.toString()),Ny(s,gr.callbacks)));const u=gr.promiseCallbacks.get(a);u&&(t("Invoking the registered promise callback for message %s with arguments %o",a.toString(),s.args),u(s.args),t("Removing registered promise callback for message %s",a.toString()),Ny(s,gr.promiseCallbacks));const d=gr.portCallbacks.get(a);if(d){let m;t("Invoking the registered port callback for message %s with arguments %o",a.toString(),s.args),e.ports&&e.ports[0]instanceof MessagePort&&(m=e.ports[0]),d(m,s.args),t("Removing registered port callback for message %s",a.toString()),Ny(s,gr.portCallbacks)}s.uuid&&(gr.legacyMessageIdsToUuidMap={})}}else if("func"in e.data&&typeof e.data.func=="string"){const n=e.data;Kh.handleOneWayPerformanceMetrics(n,t,r),t('Received a message from parent %s, action: "%s"',Ho(n),n.func),NM(n.func,n.args)}else t("Received an unknown message: %O",e)}function Ix(){return xt.topWindow!==xt.parentWindow}function zR(e){return e===xt.topWindow&&Ix()?gr.topMessageQueue:e===xt.parentWindow?gr.parentMessageQueue:[]}const JE=Da("internal"),UR=JE.extend("ensureInitializeCalled"),BR=JE.extend("ensureInitialized");function XE(){if(!Gt.initializeCalled)throw UR(Cd),new Error(Cd)}function fu(e,...t){if(!Gt.initializeCompleted)throw BR("%s. initializeCalled: %s",Cd,Gt.initializeCalled.toString()),new Error(Cd);if(t&&t.length>0){let r=!1;for(let n=0;n<t.length;n++)if(t[n]===Gt.frameContext){r=!0;break}if(!r)throw new Error(`This call is only allowed in following contexts: ${JSON.stringify(t)}. Current context: "${Gt.frameContext}".`)}return pR(e)}function WR(e){let t=Gt.additionalValidOrigins.concat(e.filter((n=>typeof n=="string"&&fR.test(n))));const r={};t=t.filter((n=>!r[n]&&(r[n]=!0,!0))),Gt.additionalValidOrigins=t}function VR(e){if(!HR(e))throw new Error(`Potential app id (${e}) is invalid; its length ${e.length} is not within the length limits (${QE}-${ZE}).`)}function qR(e){if(Z$(e))throw new Error(`Potential app id (${e}) is invalid; it contains script tags.`);if(KR(e))throw new Error(`Potential app id (${e}) is invalid; it contains non-printable characters.`)}const QE=4,ZE=256;function HR(e){return e.length<ZE&&e.length>QE}function KR(e){return[...e].some((t=>{const r=t.charCodeAt(0);return r<32||r>126}))}let GR=class{constructor(t){this.idAsString=t,qR(t)}serialize(){return this.toString()}toString(){return this.idAsString}},YR=class extends GR{constructor(t){super(t),VR(t)}toJSON(){return{appIdAsString:this.toString()}}};function eA(e){return e==null}const Jm="v2",_y=Da("app"),ak={Success:"appInitialization.success"};var ok,lk;function JR(e){return pM(wn(Jm,"app.initialize"),e)}function XR(){return new Promise((e=>{XE(),e(PR(wn(Jm,"app.getContext"),"getContext"))})).then((e=>(function(t){var r;return{actionInfo:t.actionInfo,app:{locale:t.locale,sessionId:t.appSessionId?t.appSessionId:"",theme:t.theme?t.theme:"default",iconPositionVertical:t.appIconPosition,osLocaleInfo:t.osLocaleInfo,messageId:t.messageId,parentMessageId:t.parentMessageId,userClickTime:t.userClickTime,userClickTimeV2:t.userClickTimeV2,userFileOpenPreference:t.userFileOpenPreference,host:{name:t.hostName?t.hostName:Ax.teams,clientType:t.hostClientType?t.hostClientType:hr.web,sessionId:t.sessionId?t.sessionId:"",ringId:t.ringId},appLaunchId:t.appLaunchId,appId:t.appId?new YR(t.appId):void 0,manifestVersion:t.manifestVersion},page:{id:t.entityId,frameContext:t.frameContext?t.frameContext:Gt.frameContext,renderingSurface:t.renderingSurface?t.renderingSurface:void 0,subPageId:t.subEntityId,isFullScreen:t.isFullScreen,isMultiWindow:t.isMultiWindow,isBackgroundLoad:t.isBackgroundLoad,sourceOrigin:t.sourceOrigin},user:{id:(r=t.userObjectId)!==null&&r!==void 0?r:"",displayName:t.userDisplayName,isCallingAllowed:t.isCallingAllowed,isPSTNCallingAllowed:t.isPSTNCallingAllowed,licenseType:t.userLicenseType,loginHint:t.loginHint,userPrincipalName:t.userPrincipalName,tenant:t.tid?{id:t.tid,teamsSku:t.tenantSKU}:void 0},channel:t.channelId?{id:t.channelId,displayName:t.channelName,relativeUrl:t.channelRelativeUrl,membershipType:t.channelType,defaultOneNoteSectionId:t.defaultOneNoteSectionId,ownerGroupId:t.hostTeamGroupId,ownerTenantId:t.hostTeamTenantId}:void 0,chat:t.chatId?{id:t.chatId}:void 0,meeting:t.meetingId?{id:t.meetingId}:void 0,sharepoint:t.sharepoint,team:t.teamId?{internalId:t.teamId,displayName:t.teamName,type:t.teamType,groupId:t.groupId,templateId:t.teamTemplateId,isArchived:t.isTeamArchived,userRole:t.userTeamRole}:void 0,sharePointSite:t.teamSiteUrl||t.teamSiteDomain||t.teamSitePath||t.mySitePath||t.mySiteDomain?{teamSiteUrl:t.teamSiteUrl,teamSiteDomain:t.teamSiteDomain,teamSitePath:t.teamSitePath,teamSiteId:t.teamSiteId,mySitePath:t.mySitePath,mySiteDomain:t.mySiteDomain}:void 0,dialogParameters:t.dialogParameters||{}}})(e)))}function QR(){return gM(wn(Jm,"app.notifySuccess"))}function ZR(e){yM(wn(Jm,"app.registerOnThemeChangeHandler"),e)}(function(e){e.AuthFailed="AuthFailed",e.Timeout="Timeout",e.Other="Other"})(ok||(ok={})),(function(e){e.PermissionError="PermissionError",e.NotFound="NotFound",e.Throttling="Throttling",e.Offline="Offline",e.Other="Other"})(lk||(lk={})),_y("teamsjs instance is version %s, starting at %s UTC (%s local)",Hh,new Date().toISOString(),new Date().toLocaleString()),(function(){if(Km())return;const e=document.getElementsByTagName("script"),t=e&&e[e.length-1]&&e[e.length-1].src,r="Today, teamsjs can only be used from a single script or you may see undefined behavior. This log line is used to help detect cases where teamsjs is loaded multiple times -- it is always written. The presence of the log itself does not indicate a multi-load situation, but multiples of these log lines will. If you would like to use teamjs from more than one script at the same time, please open an issue at https://github.com/OfficeDev/microsoft-teams-library-js/issues";t&&t.length!==0?_y("teamsjs is being used from %s. %s",t,r):_y("teamsjs is being used from a script tag embedded directly in your html. %s",r)})();const eM="v2",tM=[];function rM(e){Gt.frameContext&&(Gt.frameContext===Px.task?tM.push(e):_M("messageForChild"))}function nM(){$l(wn(eM,"dialog.registerMessageForChildHandler"),"messageForChild",rM,!1)}const qc="v2";var ck,uk;(function(e){e[e.ifRoom=0]="ifRoom",e[e.overflowOnly=1]="overflowOnly"})(ck||(ck={}));function sM(){$l(wn(qc,"menus.registerNavBarMenuItemPressHandler"),"navBarMenuItemPress",aM,!1),$l(wn(qc,"menus.registerActionMenuItemPressHandler"),"actionMenuItemPress",oM,!1),$l(wn(qc,"menus.registerSetModuleViewHandler"),"setModuleView",iM,!1)}function iM(e){fu(Ca),fa(wn(qc,"menus.handleViewConfigItemPress"),"viewConfigItemPress",[e])}function aM(e){fu(Ca),fa(wn(qc,"menus.handleNavBarMenuItemPress"),"handleNavBarMenuItemPress",[e])}function oM(e){fu(Ca),fa(wn(qc,"menus.handleActionMenuItemPress"),"handleActionMenuItemPress",[e])}(function(e){e.dropDown="dropDown",e.popOver="popOver"})(uk||(uk={}));class lM{}let cM=class extends lM{validate(t){return!0}deserialize(t){return t}};function uM(){$l(wn(Ul,"pages.config.registerSettingsSaveHandler"),"settings.save",dM,!1),$l(wn(Ul,"pages.config.registerSettingsRemoveHandler"),"settings.remove",hM,!1)}function dM(e){new fM(e).notifySuccess()}let fM=class{constructor(t){this.notified=!1,this.result=t||{}}notifySuccess(){this.ensureNotNotified(),fa(wn(Ul,"pages.saveEvent.notifySuccess"),"settings.save.success"),this.notified=!0}notifyFailure(t){this.ensureNotNotified(),fa(wn(Ul,"pages.saveEvent.notifyFailure"),"settings.save.failure",[t]),this.notified=!0}ensureNotNotified(){if(this.notified)throw new Error("The SaveEvent may only notify success or failure once.")}};function hM(){new mM().notifySuccess()}let mM=class{constructor(){this.notified=!1}notifySuccess(){this.ensureNotNotified(),fa(wn(Ul,"pages.removeEvent.notifySuccess"),"settings.remove.success"),this.notified=!0}notifyFailure(t){this.ensureNotNotified(),fa(wn(Ul,"pages.removeEvent.notifyFailure"),"settings.remove.failure",[t]),this.notified=!0}ensureNotNotified(){if(this.notified)throw new Error("The removeEventType may only notify success or failure once.")}};const tA=Da("app");function pM(e,t){return Km()?(tA.extend("initialize")("window object undefined at initialization"),Promise.resolve()):J$((()=>(function(r,n){return new Promise((s=>{Gt.initializeCalled||(Gt.initializeCalled=!0,kM(),Gt.initializePromise=AR(n,r).then((({context:a,clientType:l,runtimeConfig:u,clientSupportedSDKVersion:d=QS})=>{Gt.frameContext=a,Gt.hostClientType=l,Gt.clientSupportedSDKVersion=d;try{Xu("Parsing %s",u);let m=JSON.parse(u);if(Xu("Checking if %o is a valid runtime object",m??"null"),!m||!m.apiVersion)throw new Error("Received runtime config is invalid");m=YS(m),u&&Sy(m)}catch(m){if(!(m instanceof SyntaxError))throw m;try{Xu("Attempting to parse %s as an SDK version",u),isNaN($E(u,QS))||(Gt.clientSupportedSDKVersion=u);let f=JSON.parse(d);if(Xu("givenRuntimeConfig parsed to %o",f??"null"),!f)throw new Error("givenRuntimeConfig string was successfully parsed. However, it parsed to value of null");f=YS(f),Sy(f)}catch(f){if(!(f instanceof SyntaxError))throw f;Sy(wR(Gt.clientSupportedSDKVersion,gR,bR))}}Gt.initializeCompleted=!0})),sM(),uM(),nM()),Array.isArray(n)&&WR(n),Gt.initializePromise!==void 0?s(Gt.initializePromise):Xu("GlobalVars.initializePromise is unexpectedly undefined")}))})(e,t)),6e4,new Error("SDK initialization timed out."))}function gM(e){return el(this,void 0,void 0,(function*(){if(Gt.initializeCompleted)return dk(e);if(!Gt.initializePromise)throw new Error(Cd);return Gt.initializePromise.then((()=>dk(e)))}))}function dk(e){return el(this,void 0,void 0,(function*(){return fu(Ca)&&(!((t=Ca.supports.app)===null||t===void 0)&&t.notifySuccessResponse)?TR(ak.Success,[Hh],new cM,e).then((()=>({hasFinishedSuccessfully:!0}))):(fa(e,ak.Success,[Hh]),{hasFinishedSuccessfully:"unknown"});var t}))}const Xu=tA.extend("initializeHelper");function yM(e,t){!eA(t)&&XE(),CM(e,t)}function xM(){return bM(wn(Ul,"pages.backStack.navigateBack"))}function vM(){return!(!fu(Ca)||!Ca.supports.pages)&&!!Ca.supports.pages.backStack}const Ul="v2";function bM(e){return new Promise((t=>{if(fu(Ca),!vM())throw U$;t(OR(e,"navigateBack","Back navigation is not supported in the current client or context."))}))}function wM(){$l(wn("v2","pages.backStack.registerBackButtonPressHandler"),"backButtonPress",jM,!1)}function jM(){xM()}const SM=Da("handlers");let Wr=class Sa{static initializeHandlers(){Sa.handlers.themeChange=EM,Sa.handlers.load=AM,Sa.handlers.beforeUnload=PM,wM()}static uninitializeHandlers(){Sa.handlers={},Sa.themeChangeHandler=null,Sa.loadHandler=null,Sa.beforeUnloadHandler=null,Sa.beforeSuspendOrTerminateHandler=null,Sa.resumeHandler=null}};function kM(){Wr.initializeHandlers()}Wr.handlers={},Wr.themeChangeHandler=null,Wr.loadHandler=null,Wr.beforeUnloadHandler=null,Wr.beforeSuspendOrTerminateHandler=null,Wr.resumeHandler=null,Wr.hostToAppPerformanceMetricsHandler=null;const fk=SM.extend("callHandler");function NM(e,t){const r=Wr.handlers[e];return r?(fk("Invoking the registered handler for message %s with arguments %o",e,t),[!0,r.apply(this,t)]):(fk("Handler for action message %s not found.",e),[!1,void 0])}function $l(e,t,r,n=!0,s=[]){r?(Wr.handlers[t]=r,n&&fa(e,"registerHandler",[t,...s])):delete Wr.handlers[t]}function _M(e){delete Wr.handlers[e]}function CM(e,t){Wr.themeChangeHandler=t,!eA(t)&&fa(e,"registerHandler",["themeChange"])}function EM(e){Wr.themeChangeHandler&&Wr.themeChangeHandler(e)}function hk(e){Wr.hostToAppPerformanceMetricsHandler&&Wr.hostToAppPerformanceMetricsHandler(e)}function AM(e){const t={entityId:(r=e).entityId,contentUrl:new URL(r.contentUrl)};var r;Wr.resumeHandler?(Wr.resumeHandler(t),mk()):Wr.loadHandler&&(Wr.loadHandler(e),mk())}function PM(){return el(this,void 0,void 0,(function*(){const e=()=>{fa(wn("v2","handleBeforeUnload"),"readyToUnload",[])};Wr.beforeSuspendOrTerminateHandler?(yield Wr.beforeSuspendOrTerminateHandler(),e()):Wr.beforeUnloadHandler&&Wr.beforeUnloadHandler(e)||e()}))}const OM=Da("childProxyingCommunication");function mk(){return!1}function IM(e,t){return!1}OM.extend("handleIncomingMessageFromChild");const TM=g.createContext({inTeams:!1,teamsContext:null,isInitialized:!1,teamsTheme:null}),DM=({children:e})=>{const[t,r]=g.useState(!1),[n,s]=g.useState(null),[a,l]=g.useState(!1),[u,d]=g.useState(null);return g.useEffect(()=>{(async()=>{try{if(new URLSearchParams(window.location.search).get("inTeams")==="true"||window.parent!==window){console.log(" Initializing Teams SDK..."),await JR();const x=await XR();console.log(" Teams context:",x),r(!0),s(x),d(x.app.theme),ZR(v=>{d(v)}),QR()}}catch(f){console.error(" Teams initialization error:",f),r(!1)}finally{l(!0)}})()},[]),i.jsx(TM.Provider,{value:{inTeams:t,teamsContext:n,isInitialized:a,teamsTheme:u},children:e})},$M="service_idsx5cg",RM="template_4owif48",MM="OXfL2jaTJuDR5IThS";async function Yo(e){var t;try{const r=await fetch("https://api.emailjs.com/api/v1.0/email/send",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({service_id:$M,template_id:RM,user_id:MM,template_params:{email:e.to,to_email:e.to,to_name:e.to.split("@")[0],subject:e.subject,message_html:e.html||e.text||"",message_text:e.text||((t=e.html)==null?void 0:t.replace(/<[^>]*>/g,""))||""}})});if(!r.ok){const s=await r.text();console.error("EmailJS API error:",r.status,s);let a=`EmailJS API error: ${r.status}`;try{const l=JSON.parse(s);l.text?a=l.text:l.message?a=l.message:l.error&&(a=l.error)}catch{a=s||a}throw new Error(a)}let n;try{const s=await r.text();if(s==="OK"||s.trim()==="OK"){console.log("Email sent successfully via EmailJS");return}n=JSON.parse(s),console.log("Email sent successfully via EmailJS:",n)}catch(s){if(r.ok){console.log("Email sent successfully via EmailJS (non-JSON response)");return}throw s}return}catch(r){throw console.error("sendInvitationEmail error:",r),r.message?r:new Error(`Failed to send email: ${r.toString()}`)}}/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FM=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),LM=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(t,r,n)=>n?n.toUpperCase():r.toLowerCase()),pk=e=>{const t=LM(e);return t.charAt(0).toUpperCase()+t.slice(1)},rA=(...e)=>e.filter((t,r,n)=>!!t&&t.trim()!==""&&n.indexOf(t)===r).join(" ").trim(),zM=e=>{for(const t in e)if(t.startsWith("aria-")||t==="role"||t==="title")return!0};/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var UM={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BM=g.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:r=2,absoluteStrokeWidth:n,className:s="",children:a,iconNode:l,...u},d)=>g.createElement("svg",{ref:d,...UM,width:t,height:t,stroke:e,strokeWidth:n?Number(r)*24/Number(t):r,className:rA("lucide",s),...!a&&!zM(u)&&{"aria-hidden":"true"},...u},[...l.map(([m,f])=>g.createElement(m,f)),...Array.isArray(a)?a:[a]]));/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ot=(e,t)=>{const r=g.forwardRef(({className:n,...s},a)=>g.createElement(BM,{ref:a,iconNode:t,className:rA(`lucide-${FM(pk(e))}`,`lucide-${e}`,n),...s}));return r.displayName=pk(e),r};/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WM=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],gk=Ot("arrow-left",WM);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VM=[["path",{d:"m16 3 4 4-4 4",key:"1x1c3m"}],["path",{d:"M20 7H4",key:"zbl0bi"}],["path",{d:"m8 21-4-4 4-4",key:"h9nckh"}],["path",{d:"M4 17h16",key:"g4d7ey"}]],qM=Ot("arrow-right-left",VM);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HM=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],KM=Ot("arrow-right",HM);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GM=[["path",{d:"M3.85 8.62a4 4 0 0 1 4.78-4.77 4 4 0 0 1 6.74 0 4 4 0 0 1 4.78 4.78 4 4 0 0 1 0 6.74 4 4 0 0 1-4.77 4.78 4 4 0 0 1-6.75 0 4 4 0 0 1-4.78-4.77 4 4 0 0 1 0-6.76Z",key:"3c2336"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],Tx=Ot("badge-check",GM);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YM=[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]],JM=Ot("book-open",YM);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XM=[["path",{d:"M12 20v-9",key:"1qisl0"}],["path",{d:"M14 7a4 4 0 0 1 4 4v3a6 6 0 0 1-12 0v-3a4 4 0 0 1 4-4z",key:"uouzyp"}],["path",{d:"M14.12 3.88 16 2",key:"qol33r"}],["path",{d:"M21 21a4 4 0 0 0-3.81-4",key:"1b0z45"}],["path",{d:"M21 5a4 4 0 0 1-3.55 3.97",key:"5cxbf6"}],["path",{d:"M22 13h-4",key:"1jl80f"}],["path",{d:"M3 21a4 4 0 0 1 3.81-4",key:"1fjd4g"}],["path",{d:"M3 5a4 4 0 0 0 3.55 3.97",key:"1d7oge"}],["path",{d:"M6 13H2",key:"82j7cp"}],["path",{d:"m8 2 1.88 1.88",key:"fmnt4t"}],["path",{d:"M9 7.13V6a3 3 0 1 1 6 0v1.13",key:"1vgav8"}]],QM=Ot("bug",XM);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZM=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],un=Ot("calendar",ZM);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eF=[["path",{d:"M5 21v-6",key:"1hz6c0"}],["path",{d:"M12 21V3",key:"1lcnhd"}],["path",{d:"M19 21V9",key:"unv183"}]],Ph=Ot("chart-no-axes-column",eF);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tF=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],rs=Ot("chevron-down",tF);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rF=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],Xm=Ot("chevron-left",rF);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nF=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],sF=Ot("chevron-up",nF);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iF=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],or=Ot("circle-alert",iF);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aF=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],kr=Ot("circle-check-big",aF);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oF=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],Qm=Ot("clock",oF);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lF=[["path",{d:"M11.562 3.266a.5.5 0 0 1 .876 0L15.39 8.87a1 1 0 0 0 1.516.294L21.183 5.5a.5.5 0 0 1 .798.519l-2.834 10.246a1 1 0 0 1-.956.734H5.81a1 1 0 0 1-.957-.734L2.02 6.02a.5.5 0 0 1 .798-.519l4.276 3.664a1 1 0 0 0 1.516-.294z",key:"1vdc57"}],["path",{d:"M5 21h14",key:"11awu3"}]],En=Ot("crown",lF);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cF=[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]],uF=Ot("database",cF);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dF=[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]],yk=Ot("ellipsis-vertical",dF);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fF=[["path",{d:"M14 2v6a2 2 0 0 0 .245.96l5.51 10.08A2 2 0 0 1 18 22H6a2 2 0 0 1-1.755-2.96l5.51-10.08A2 2 0 0 0 10 8V2",key:"18mbvz"}],["path",{d:"M6.453 15h11.094",key:"3shlmq"}],["path",{d:"M8.5 2h7",key:"csnxdl"}]],hF=Ot("flask-conical",fF);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mF=[["path",{d:"M12.531 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14v6a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341l.427-.473",key:"ol2ft2"}],["path",{d:"m16.5 3.5 5 5",key:"15e6fa"}],["path",{d:"m21.5 3.5-5 5",key:"m0lwru"}]],pF=Ot("funnel-x",mF);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gF=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]],yF=Ot("funnel",gF);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xF=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],dd=Ot("info",xF);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vF=[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]],Zm=Ot("lightbulb",vF);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bF=[["path",{d:"M3 5h.01",key:"18ugdj"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 19h.01",key:"noohij"}],["path",{d:"M8 5h13",key:"1pao27"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 19h13",key:"m83p4d"}]],pi=Ot("list",bF);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wF=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],jF=Ot("lock",wF);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SF=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],ss=Ot("log-out",SF);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kF=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],hu=Ot("mail",kF);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NF=[["path",{d:"M5 12h14",key:"1ays0h"}]],Uc=Ot("minus",NF);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _F=[["path",{d:"m16 6-8.414 8.586a2 2 0 0 0 2.829 2.829l8.414-8.586a4 4 0 1 0-5.657-5.657l-8.379 8.551a6 6 0 1 0 8.485 8.485l8.379-8.551",key:"1miecu"}]],El=Ot("paperclip",_F);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CF=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]],Gh=Ot("pencil",CF);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EF=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],vn=Ot("plus",EF);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AF=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],Jo=Ot("refresh-cw",AF);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PF=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],xk=Ot("search",PF);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OF=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],ns=Ot("settings",OF);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IF=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],vk=Ot("shield-check",IF);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TF=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],Xr=Ot("shield",TF);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DF=[["path",{d:"m18 14 4 4-4 4",key:"10pe0f"}],["path",{d:"m18 2 4 4-4 4",key:"pucp1d"}],["path",{d:"M2 18h1.973a4 4 0 0 0 3.3-1.7l5.454-8.6a4 4 0 0 1 3.3-1.7H22",key:"1ailkh"}],["path",{d:"M2 6h1.972a4 4 0 0 1 3.6 2.2",key:"km57vx"}],["path",{d:"M22 18h-6.041a4 4 0 0 1-3.3-1.8l-.359-.45",key:"os18l9"}]],$F=Ot("shuffle",DF);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RF=[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]],Oc=Ot("sparkles",RF);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MF=[["path",{d:"M21 10.656V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h12.344",key:"2acyp4"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],Yc=Ot("square-check-big",MF);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FF=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],bd=Ot("square-pen",FF);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LF=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]],Ed=Ot("square",LF);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zF=[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]],Ic=Ot("star",zF);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UF=[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]],bk=Ot("tag",UF);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BF=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],ha=Ot("trash-2",BF);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WF=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],VF=Ot("triangle-alert",WF);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qF=[["path",{d:"M10 14.66v1.626a2 2 0 0 1-.976 1.696A5 5 0 0 0 7 21.978",key:"1n3hpd"}],["path",{d:"M14 14.66v1.626a2 2 0 0 0 .976 1.696A5 5 0 0 1 17 21.978",key:"rfe1zi"}],["path",{d:"M18 9h1.5a1 1 0 0 0 0-5H18",key:"7xy6bh"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M6 9a6 6 0 0 0 12 0V3a1 1 0 0 0-1-1H7a1 1 0 0 0-1 1z",key:"1mhfuq"}],["path",{d:"M6 9H4.5a1 1 0 0 1 0-5H6",key:"tex48p"}]],Jv=Ot("trophy",qF);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HF=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]],Rl=Ot("user-plus",HF);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KF=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"17",x2:"22",y1:"8",y2:"13",key:"3nzzx3"}],["line",{x1:"22",x2:"17",y1:"8",y2:"13",key:"1swrse"}]],Qu=Ot("user-x",KF);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GF=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],ps=Ot("user",GF);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YF=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],Ln=Ot("users",YF);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JF=[["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}],["path",{d:"M5 7c0-1.1.9-2 2-2h10a2 2 0 0 1 2 2v12H5V7Z",key:"1ezoue"}],["path",{d:"M22 19H2",key:"nuriw5"}]],es=Ot("vote",JF);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XF=[["rect",{width:"8",height:"8",x:"3",y:"3",rx:"2",key:"by2w9f"}],["path",{d:"M7 11v4a2 2 0 0 0 2 2h4",key:"xkn7yn"}],["rect",{width:"8",height:"8",x:"13",y:"13",rx:"2",key:"1cgmvn"}]],QF=Ot("workflow",XF);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZF=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],xs=Ot("x",ZF),ji="/feature-voting-app/assets/New-Millennium-color-logo-C0dd35-E.svg",eL="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='UTF-8'?%3e%3csvg%20id='Layer_1'%20xmlns='http://www.w3.org/2000/svg'%20version='1.1'%20viewBox='0%200%2019%2019'%3e%3c!--%20Generator:%20Adobe%20Illustrator%2029.8.3,%20SVG%20Export%20Plug-In%20.%20SVG%20Version:%202.1.1%20Build%203)%20--%3e%3cdefs%3e%3cstyle%3e%20.st0%20{%20fill:%20%23f25022;%20}%20.st1%20{%20fill:%20%23ffb900;%20}%20.st2%20{%20fill:%20%237fba00;%20}%20.st3%20{%20fill:%20%2300a4ef;%20}%20%3c/style%3e%3c/defs%3e%3crect%20class='st0'%20width='9'%20height='9'/%3e%3crect%20class='st3'%20y='10'%20width='9'%20height='9'/%3e%3crect%20class='st2'%20x='10'%20width='9'%20height='9'/%3e%3crect%20class='st1'%20x='10'%20y='10'%20width='9'%20height='9'/%3e%3c/svg%3e";var Kd=e=>e.type==="checkbox",Ol=e=>e instanceof Date,Zs=e=>e==null;const nA=e=>typeof e=="object";var Pn=e=>!Zs(e)&&!Array.isArray(e)&&nA(e)&&!Ol(e),sA=e=>Pn(e)&&e.target?Kd(e.target)?e.target.checked:e.target.value:e,tL=e=>e.substring(0,e.search(/\.\d+(\.|$)/))||e,iA=(e,t)=>e.has(tL(t)),rL=e=>{const t=e.constructor&&e.constructor.prototype;return Pn(t)&&t.hasOwnProperty("isPrototypeOf")},Xv=typeof window<"u"&&typeof window.HTMLElement<"u"&&typeof document<"u";function Mn(e){let t;const r=Array.isArray(e),n=typeof FileList<"u"?e instanceof FileList:!1;if(e instanceof Date)t=new Date(e);else if(!(Xv&&(e instanceof Blob||n))&&(r||Pn(e)))if(t=r?[]:Object.create(Object.getPrototypeOf(e)),!r&&!rL(e))t=e;else for(const s in e)e.hasOwnProperty(s)&&(t[s]=Mn(e[s]));else return e;return t}var ep=e=>/^\w*$/.test(e),dn=e=>e===void 0,Qv=e=>Array.isArray(e)?e.filter(Boolean):[],Zv=e=>Qv(e.replace(/["|']|\]/g,"").split(/\.|\[/)),Qe=(e,t,r)=>{if(!t||!Pn(e))return r;const n=(ep(t)?[t]:Zv(t)).reduce((s,a)=>Zs(s)?s:s[a],e);return dn(n)||n===e?dn(e[t])?r:e[t]:n},hi=e=>typeof e=="boolean",$r=(e,t,r)=>{let n=-1;const s=ep(t)?[t]:Zv(t),a=s.length,l=a-1;for(;++n<a;){const u=s[n];let d=r;if(n!==l){const m=e[u];d=Pn(m)||Array.isArray(m)?m:isNaN(+s[n+1])?{}:[]}if(u==="__proto__"||u==="constructor"||u==="prototype")return;e[u]=d,e=e[u]}};const Yh={BLUR:"blur",FOCUS_OUT:"focusout",CHANGE:"change"},oa={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},Ha={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"},aA=kt.createContext(null);aA.displayName="HookFormContext";const eb=()=>kt.useContext(aA);var oA=(e,t,r,n=!0)=>{const s={defaultValues:t._defaultValues};for(const a in e)Object.defineProperty(s,a,{get:()=>{const l=a;return t._proxyFormState[l]!==oa.all&&(t._proxyFormState[l]=!n||oa.all),r&&(r[l]=!0),e[l]}});return s};const tb=typeof window<"u"?kt.useLayoutEffect:kt.useEffect;function nL(e){const t=eb(),{control:r=t.control,disabled:n,name:s,exact:a}=e||{},[l,u]=kt.useState(r._formState),d=kt.useRef({isDirty:!1,isLoading:!1,dirtyFields:!1,touchedFields:!1,validatingFields:!1,isValidating:!1,isValid:!1,errors:!1});return tb(()=>r._subscribe({name:s,formState:d.current,exact:a,callback:m=>{!n&&u({...r._formState,...m})}}),[s,n,a]),kt.useEffect(()=>{d.current.isValid&&r._setValid(!0)},[r]),kt.useMemo(()=>oA(l,r,d.current,!1),[l,r])}var gi=e=>typeof e=="string",Dx=(e,t,r,n,s)=>gi(e)?(n&&t.watch.add(e),Qe(r,e,s)):Array.isArray(e)?e.map(a=>(n&&t.watch.add(a),Qe(r,a))):(n&&(t.watchAll=!0),r),$x=e=>Zs(e)||!nA(e);function la(e,t,r=new WeakSet){if($x(e)||$x(t))return e===t;if(Ol(e)&&Ol(t))return e.getTime()===t.getTime();const n=Object.keys(e),s=Object.keys(t);if(n.length!==s.length)return!1;if(r.has(e)||r.has(t))return!0;r.add(e),r.add(t);for(const a of n){const l=e[a];if(!s.includes(a))return!1;if(a!=="ref"){const u=t[a];if(Ol(l)&&Ol(u)||Pn(l)&&Pn(u)||Array.isArray(l)&&Array.isArray(u)?!la(l,u,r):l!==u)return!1}}return!0}function sL(e){const t=eb(),{control:r=t.control,name:n,defaultValue:s,disabled:a,exact:l,compute:u}=e||{},d=kt.useRef(s),m=kt.useRef(u),f=kt.useRef(void 0),p=kt.useRef(r),x=kt.useRef(n);m.current=u;const[v,b]=kt.useState(()=>{const I=r._getWatch(n,d.current);return m.current?m.current(I):I}),w=kt.useCallback(I=>{const A=Dx(n,r._names,I||r._formValues,!1,d.current);return m.current?m.current(A):A},[r._formValues,r._names,n]),j=kt.useCallback(I=>{if(!a){const A=Dx(n,r._names,I||r._formValues,!1,d.current);if(m.current){const $=m.current(A);la($,f.current)||(b($),f.current=$)}else b(A)}},[r._formValues,r._names,a,n]);tb(()=>((p.current!==r||!la(x.current,n))&&(p.current=r,x.current=n,j()),r._subscribe({name:n,formState:{values:!0},exact:l,callback:I=>{j(I.values)}})),[r,l,n,j]),kt.useEffect(()=>r._removeUnmounted());const _=p.current!==r,E=x.current,C=kt.useMemo(()=>{if(a)return null;const I=!_&&!la(E,n);return _||I?w():null},[a,_,n,E,w]);return C!==null?C:v}function iL(e){const t=eb(),{name:r,disabled:n,control:s=t.control,shouldUnregister:a,defaultValue:l}=e,u=iA(s._names.array,r),d=kt.useMemo(()=>Qe(s._formValues,r,Qe(s._defaultValues,r,l)),[s,r,l]),m=sL({control:s,name:r,defaultValue:d,exact:!0}),f=nL({control:s,name:r,exact:!0}),p=kt.useRef(e),x=kt.useRef(void 0),v=kt.useRef(s.register(r,{...e.rules,value:m,...hi(e.disabled)?{disabled:e.disabled}:{}}));p.current=e;const b=kt.useMemo(()=>Object.defineProperties({},{invalid:{enumerable:!0,get:()=>!!Qe(f.errors,r)},isDirty:{enumerable:!0,get:()=>!!Qe(f.dirtyFields,r)},isTouched:{enumerable:!0,get:()=>!!Qe(f.touchedFields,r)},isValidating:{enumerable:!0,get:()=>!!Qe(f.validatingFields,r)},error:{enumerable:!0,get:()=>Qe(f.errors,r)}}),[f,r]),w=kt.useCallback(C=>v.current.onChange({target:{value:sA(C),name:r},type:Yh.CHANGE}),[r]),j=kt.useCallback(()=>v.current.onBlur({target:{value:Qe(s._formValues,r),name:r},type:Yh.BLUR}),[r,s._formValues]),_=kt.useCallback(C=>{const I=Qe(s._fields,r);I&&C&&(I._f.ref={focus:()=>C.focus&&C.focus(),select:()=>C.select&&C.select(),setCustomValidity:A=>C.setCustomValidity(A),reportValidity:()=>C.reportValidity()})},[s._fields,r]),E=kt.useMemo(()=>({name:r,value:m,...hi(n)||f.disabled?{disabled:f.disabled||n}:{},onChange:w,onBlur:j,ref:_}),[r,n,f.disabled,w,j,_,m]);return kt.useEffect(()=>{const C=s._options.shouldUnregister||a,I=x.current;I&&I!==r&&!u&&s.unregister(I),s.register(r,{...p.current.rules,...hi(p.current.disabled)?{disabled:p.current.disabled}:{}});const A=($,B)=>{const T=Qe(s._fields,$);T&&T._f&&(T._f.mount=B)};if(A(r,!0),C){const $=Mn(Qe(s._options.defaultValues,r,p.current.defaultValue));$r(s._defaultValues,r,$),dn(Qe(s._formValues,r))&&$r(s._formValues,r,$)}return!u&&s.register(r),x.current=r,()=>{(u?C&&!s._state.action:C)?s.unregister(r):A(r,!1)}},[r,s,u,a]),kt.useEffect(()=>{s._setDisabledField({disabled:n,name:r})},[n,r,s]),kt.useMemo(()=>({field:E,formState:f,fieldState:b}),[E,f,b])}const fd=e=>e.render(iL(e));var aL=(e,t,r,n,s)=>t?{...r[e],types:{...r[e]&&r[e].types?r[e].types:{},[n]:s||!0}}:{},wd=e=>Array.isArray(e)?e:[e],wk=()=>{let e=[];return{get observers(){return e},next:s=>{for(const a of e)a.next&&a.next(s)},subscribe:s=>(e.push(s),{unsubscribe:()=>{e=e.filter(a=>a!==s)}}),unsubscribe:()=>{e=[]}}};function lA(e,t){const r={};for(const n in e)if(e.hasOwnProperty(n)){const s=e[n],a=t[n];if(s&&Pn(s)&&a){const l=lA(s,a);Pn(l)&&(r[n]=l)}else e[n]&&(r[n]=a)}return r}var Rs=e=>Pn(e)&&!Object.keys(e).length,rb=e=>e.type==="file",ca=e=>typeof e=="function",Jh=e=>{if(!Xv)return!1;const t=e?e.ownerDocument:0;return e instanceof(t&&t.defaultView?t.defaultView.HTMLElement:HTMLElement)},cA=e=>e.type==="select-multiple",nb=e=>e.type==="radio",oL=e=>nb(e)||Kd(e),Cy=e=>Jh(e)&&e.isConnected;function lL(e,t){const r=t.slice(0,-1).length;let n=0;for(;n<r;)e=dn(e)?n++:e[t[n++]];return e}function cL(e){for(const t in e)if(e.hasOwnProperty(t)&&!dn(e[t]))return!1;return!0}function Nn(e,t){const r=Array.isArray(t)?t:ep(t)?[t]:Zv(t),n=r.length===1?e:lL(e,r),s=r.length-1,a=r[s];return n&&delete n[a],s!==0&&(Pn(n)&&Rs(n)||Array.isArray(n)&&cL(n))&&Nn(e,r.slice(0,-1)),e}var uL=e=>{for(const t in e)if(ca(e[t]))return!0;return!1};function uA(e){return Array.isArray(e)||Pn(e)&&!uL(e)}function Rx(e,t={}){for(const r in e)uA(e[r])?(t[r]=Array.isArray(e[r])?[]:{},Rx(e[r],t[r])):dn(e[r])||(t[r]=!0);return t}function zc(e,t,r){r||(r=Rx(t));for(const n in e)uA(e[n])?dn(t)||$x(r[n])?r[n]=Rx(e[n],Array.isArray(e[n])?[]:{}):zc(e[n],Zs(t)?{}:t[n],r[n]):r[n]=!la(e[n],t[n]);return r}const jk={value:!1,isValid:!1},Sk={value:!0,isValid:!0};var dA=e=>{if(Array.isArray(e)){if(e.length>1){const t=e.filter(r=>r&&r.checked&&!r.disabled).map(r=>r.value);return{value:t,isValid:!!t.length}}return e[0].checked&&!e[0].disabled?e[0].attributes&&!dn(e[0].attributes.value)?dn(e[0].value)||e[0].value===""?Sk:{value:e[0].value,isValid:!0}:Sk:jk}return jk},fA=(e,{valueAsNumber:t,valueAsDate:r,setValueAs:n})=>dn(e)?e:t?e===""?NaN:e&&+e:r&&gi(e)?new Date(e):n?n(e):e;const kk={isValid:!1,value:null};var hA=e=>Array.isArray(e)?e.reduce((t,r)=>r&&r.checked&&!r.disabled?{isValid:!0,value:r.value}:t,kk):kk;function Nk(e){const t=e.ref;return rb(t)?t.files:nb(t)?hA(e.refs).value:cA(t)?[...t.selectedOptions].map(({value:r})=>r):Kd(t)?dA(e.refs).value:fA(dn(t.value)?e.ref.value:t.value,e)}var dL=(e,t,r,n)=>{const s={};for(const a of e){const l=Qe(t,a);l&&$r(s,a,l._f)}return{criteriaMode:r,names:[...e],fields:s,shouldUseNativeValidation:n}},Xh=e=>e instanceof RegExp,Zu=e=>dn(e)?e:Xh(e)?e.source:Pn(e)?Xh(e.value)?e.value.source:e.value:e,_k=e=>({isOnSubmit:!e||e===oa.onSubmit,isOnBlur:e===oa.onBlur,isOnChange:e===oa.onChange,isOnAll:e===oa.all,isOnTouch:e===oa.onTouched});const Ck="AsyncFunction";var fL=e=>!!e&&!!e.validate&&!!(ca(e.validate)&&e.validate.constructor.name===Ck||Pn(e.validate)&&Object.values(e.validate).find(t=>t.constructor.name===Ck)),hL=e=>e.mount&&(e.required||e.min||e.max||e.maxLength||e.minLength||e.pattern||e.validate),Ek=(e,t,r)=>!r&&(t.watchAll||t.watch.has(e)||[...t.watch].some(n=>e.startsWith(n)&&/^\.\w+/.test(e.slice(n.length))));const jd=(e,t,r,n)=>{for(const s of r||Object.keys(e)){const a=Qe(e,s);if(a){const{_f:l,...u}=a;if(l){if(l.refs&&l.refs[0]&&t(l.refs[0],s)&&!n)return!0;if(l.ref&&t(l.ref,l.name)&&!n)return!0;if(jd(u,t))break}else if(Pn(u)&&jd(u,t))break}}};function Ak(e,t,r){const n=Qe(e,r);if(n||ep(r))return{error:n,name:r};const s=r.split(".");for(;s.length;){const a=s.join("."),l=Qe(t,a),u=Qe(e,a);if(l&&!Array.isArray(l)&&r!==a)return{name:r};if(u&&u.type)return{name:a,error:u};if(u&&u.root&&u.root.type)return{name:`${a}.root`,error:u.root};s.pop()}return{name:r}}var mL=(e,t,r,n)=>{r(e);const{name:s,...a}=e;return Rs(a)||Object.keys(a).length>=Object.keys(t).length||Object.keys(a).find(l=>t[l]===(!n||oa.all))},pL=(e,t,r)=>!e||!t||e===t||wd(e).some(n=>n&&(r?n===t:n.startsWith(t)||t.startsWith(n))),gL=(e,t,r,n,s)=>s.isOnAll?!1:!r&&s.isOnTouch?!(t||e):(r?n.isOnBlur:s.isOnBlur)?!e:(r?n.isOnChange:s.isOnChange)?e:!0,yL=(e,t)=>!Qv(Qe(e,t)).length&&Nn(e,t),xL=(e,t,r)=>{const n=wd(Qe(e,r));return $r(n,"root",t[r]),$r(e,r,n),e};function Pk(e,t,r="validate"){if(gi(e)||Array.isArray(e)&&e.every(gi)||hi(e)&&!e)return{type:r,message:gi(e)?e:"",ref:t}}var Tc=e=>Pn(e)&&!Xh(e)?e:{value:e,message:""},Ok=async(e,t,r,n,s,a)=>{const{ref:l,refs:u,required:d,maxLength:m,minLength:f,min:p,max:x,pattern:v,validate:b,name:w,valueAsNumber:j,mount:_}=e._f,E=Qe(r,w);if(!_||t.has(w))return{};const C=u?u[0]:l,I=G=>{s&&C.reportValidity&&(C.setCustomValidity(hi(G)?"":G||""),C.reportValidity())},A={},$=nb(l),B=Kd(l),T=$||B,K=(j||rb(l))&&dn(l.value)&&dn(E)||Jh(l)&&l.value===""||E===""||Array.isArray(E)&&!E.length,Q=aL.bind(null,w,n,A),se=(G,le,F,Y=Ha.maxLength,J=Ha.minLength)=>{const V=G?le:F;A[w]={type:G?Y:J,message:V,ref:l,...Q(G?Y:J,V)}};if(a?!Array.isArray(E)||!E.length:d&&(!T&&(K||Zs(E))||hi(E)&&!E||B&&!dA(u).isValid||$&&!hA(u).isValid)){const{value:G,message:le}=gi(d)?{value:!!d,message:d}:Tc(d);if(G&&(A[w]={type:Ha.required,message:le,ref:C,...Q(Ha.required,le)},!n))return I(le),A}if(!K&&(!Zs(p)||!Zs(x))){let G,le;const F=Tc(x),Y=Tc(p);if(!Zs(E)&&!isNaN(E)){const J=l.valueAsNumber||E&&+E;Zs(F.value)||(G=J>F.value),Zs(Y.value)||(le=J<Y.value)}else{const J=l.valueAsDate||new Date(E),V=ie=>new Date(new Date().toDateString()+" "+ie),H=l.type=="time",re=l.type=="week";gi(F.value)&&E&&(G=H?V(E)>V(F.value):re?E>F.value:J>new Date(F.value)),gi(Y.value)&&E&&(le=H?V(E)<V(Y.value):re?E<Y.value:J<new Date(Y.value))}if((G||le)&&(se(!!G,F.message,Y.message,Ha.max,Ha.min),!n))return I(A[w].message),A}if((m||f)&&!K&&(gi(E)||a&&Array.isArray(E))){const G=Tc(m),le=Tc(f),F=!Zs(G.value)&&E.length>+G.value,Y=!Zs(le.value)&&E.length<+le.value;if((F||Y)&&(se(F,G.message,le.message),!n))return I(A[w].message),A}if(v&&!K&&gi(E)){const{value:G,message:le}=Tc(v);if(Xh(G)&&!E.match(G)&&(A[w]={type:Ha.pattern,message:le,ref:l,...Q(Ha.pattern,le)},!n))return I(le),A}if(b){if(ca(b)){const G=await b(E,r),le=Pk(G,C);if(le&&(A[w]={...le,...Q(Ha.validate,le.message)},!n))return I(le.message),A}else if(Pn(b)){let G={};for(const le in b){if(!Rs(G)&&!n)break;const F=Pk(await b[le](E,r),C,le);F&&(G={...F,...Q(le,F.message)},I(F.message),n&&(A[w]=G))}if(!Rs(G)&&(A[w]={ref:C,...G},!n))return A}}return I(!0),A};const vL={mode:oa.onSubmit,reValidateMode:oa.onChange,shouldFocusError:!0};function bL(e={}){let t={...vL,...e},r={submitCount:0,isDirty:!1,isReady:!1,isLoading:ca(t.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},validatingFields:{},errors:t.errors||{},disabled:t.disabled||!1},n={},s=Pn(t.defaultValues)||Pn(t.values)?Mn(t.defaultValues||t.values)||{}:{},a=t.shouldUnregister?{}:Mn(s),l={action:!1,mount:!1,watch:!1},u={mount:new Set,disabled:new Set,unMount:new Set,array:new Set,watch:new Set},d,m=0;const f={isDirty:!1,dirtyFields:!1,validatingFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1};let p={...f};const x={array:wk(),state:wk()},v=t.criteriaMode===oa.all,b=U=>q=>{clearTimeout(m),m=setTimeout(U,q)},w=async U=>{if(!t.disabled&&(f.isValid||p.isValid||U)){const q=t.resolver?Rs((await B()).errors):await K(n,!0);q!==r.isValid&&x.state.next({isValid:q})}},j=(U,q)=>{!t.disabled&&(f.isValidating||f.validatingFields||p.isValidating||p.validatingFields)&&((U||Array.from(u.mount)).forEach(ne=>{ne&&(q?$r(r.validatingFields,ne,q):Nn(r.validatingFields,ne))}),x.state.next({validatingFields:r.validatingFields,isValidating:!Rs(r.validatingFields)}))},_=(U,q=[],ne,Ne,Ie=!0,Ce=!0)=>{if(Ne&&ne&&!t.disabled){if(l.action=!0,Ce&&Array.isArray(Qe(n,U))){const Te=ne(Qe(n,U),Ne.argA,Ne.argB);Ie&&$r(n,U,Te)}if(Ce&&Array.isArray(Qe(r.errors,U))){const Te=ne(Qe(r.errors,U),Ne.argA,Ne.argB);Ie&&$r(r.errors,U,Te),yL(r.errors,U)}if((f.touchedFields||p.touchedFields)&&Ce&&Array.isArray(Qe(r.touchedFields,U))){const Te=ne(Qe(r.touchedFields,U),Ne.argA,Ne.argB);Ie&&$r(r.touchedFields,U,Te)}(f.dirtyFields||p.dirtyFields)&&(r.dirtyFields=zc(s,a)),x.state.next({name:U,isDirty:se(U,q),dirtyFields:r.dirtyFields,errors:r.errors,isValid:r.isValid})}else $r(a,U,q)},E=(U,q)=>{$r(r.errors,U,q),x.state.next({errors:r.errors})},C=U=>{r.errors=U,x.state.next({errors:r.errors,isValid:!1})},I=(U,q,ne,Ne)=>{const Ie=Qe(n,U);if(Ie){const Ce=Qe(a,U,dn(ne)?Qe(s,U):ne);dn(Ce)||Ne&&Ne.defaultChecked||q?$r(a,U,q?Ce:Nk(Ie._f)):F(U,Ce),l.mount&&w()}},A=(U,q,ne,Ne,Ie)=>{let Ce=!1,Te=!1;const dt={name:U};if(!t.disabled){if(!ne||Ne){(f.isDirty||p.isDirty)&&(Te=r.isDirty,r.isDirty=dt.isDirty=se(),Ce=Te!==dt.isDirty);const Mt=la(Qe(s,U),q);Te=!!Qe(r.dirtyFields,U),Mt?Nn(r.dirtyFields,U):$r(r.dirtyFields,U,!0),dt.dirtyFields=r.dirtyFields,Ce=Ce||(f.dirtyFields||p.dirtyFields)&&Te!==!Mt}if(ne){const Mt=Qe(r.touchedFields,U);Mt||($r(r.touchedFields,U,ne),dt.touchedFields=r.touchedFields,Ce=Ce||(f.touchedFields||p.touchedFields)&&Mt!==ne)}Ce&&Ie&&x.state.next(dt)}return Ce?dt:{}},$=(U,q,ne,Ne)=>{const Ie=Qe(r.errors,U),Ce=(f.isValid||p.isValid)&&hi(q)&&r.isValid!==q;if(t.delayError&&ne?(d=b(()=>E(U,ne)),d(t.delayError)):(clearTimeout(m),d=null,ne?$r(r.errors,U,ne):Nn(r.errors,U)),(ne?!la(Ie,ne):Ie)||!Rs(Ne)||Ce){const Te={...Ne,...Ce&&hi(q)?{isValid:q}:{},errors:r.errors,name:U};r={...r,...Te},x.state.next(Te)}},B=async U=>{j(U,!0);const q=await t.resolver(a,t.context,dL(U||u.mount,n,t.criteriaMode,t.shouldUseNativeValidation));return j(U),q},T=async U=>{const{errors:q}=await B(U);if(U)for(const ne of U){const Ne=Qe(q,ne);Ne?$r(r.errors,ne,Ne):Nn(r.errors,ne)}else r.errors=q;return q},K=async(U,q,ne={valid:!0})=>{for(const Ne in U){const Ie=U[Ne];if(Ie){const{_f:Ce,...Te}=Ie;if(Ce){const dt=u.array.has(Ce.name),Mt=Ie._f&&fL(Ie._f);Mt&&f.validatingFields&&j([Ce.name],!0);const qe=await Ok(Ie,u.disabled,a,v,t.shouldUseNativeValidation&&!q,dt);if(Mt&&f.validatingFields&&j([Ce.name]),qe[Ce.name]&&(ne.valid=!1,q))break;!q&&(Qe(qe,Ce.name)?dt?xL(r.errors,qe,Ce.name):$r(r.errors,Ce.name,qe[Ce.name]):Nn(r.errors,Ce.name))}!Rs(Te)&&await K(Te,q,ne)}}return ne.valid},Q=()=>{for(const U of u.unMount){const q=Qe(n,U);q&&(q._f.refs?q._f.refs.every(ne=>!Cy(ne)):!Cy(q._f.ref))&&Me(U)}u.unMount=new Set},se=(U,q)=>!t.disabled&&(U&&q&&$r(a,U,q),!la(ie(),s)),G=(U,q,ne)=>Dx(U,u,{...l.mount?a:dn(q)?s:gi(U)?{[U]:q}:q},ne,q),le=U=>Qv(Qe(l.mount?a:s,U,t.shouldUnregister?Qe(s,U,[]):[])),F=(U,q,ne={})=>{const Ne=Qe(n,U);let Ie=q;if(Ne){const Ce=Ne._f;Ce&&(!Ce.disabled&&$r(a,U,fA(q,Ce)),Ie=Jh(Ce.ref)&&Zs(q)?"":q,cA(Ce.ref)?[...Ce.ref.options].forEach(Te=>Te.selected=Ie.includes(Te.value)):Ce.refs?Kd(Ce.ref)?Ce.refs.forEach(Te=>{(!Te.defaultChecked||!Te.disabled)&&(Array.isArray(Ie)?Te.checked=!!Ie.find(dt=>dt===Te.value):Te.checked=Ie===Te.value||!!Ie)}):Ce.refs.forEach(Te=>Te.checked=Te.value===Ie):rb(Ce.ref)?Ce.ref.value="":(Ce.ref.value=Ie,Ce.ref.type||x.state.next({name:U,values:Mn(a)})))}(ne.shouldDirty||ne.shouldTouch)&&A(U,Ie,ne.shouldTouch,ne.shouldDirty,!0),ne.shouldValidate&&re(U)},Y=(U,q,ne)=>{for(const Ne in q){if(!q.hasOwnProperty(Ne))return;const Ie=q[Ne],Ce=U+"."+Ne,Te=Qe(n,Ce);(u.array.has(U)||Pn(Ie)||Te&&!Te._f)&&!Ol(Ie)?Y(Ce,Ie,ne):F(Ce,Ie,ne)}},J=(U,q,ne={})=>{const Ne=Qe(n,U),Ie=u.array.has(U),Ce=Mn(q);$r(a,U,Ce),Ie?(x.array.next({name:U,values:Mn(a)}),(f.isDirty||f.dirtyFields||p.isDirty||p.dirtyFields)&&ne.shouldDirty&&x.state.next({name:U,dirtyFields:zc(s,a),isDirty:se(U,Ce)})):Ne&&!Ne._f&&!Zs(Ce)?Y(U,Ce,ne):F(U,Ce,ne),Ek(U,u)&&x.state.next({...r,name:U}),x.state.next({name:l.mount?U:void 0,values:Mn(a)})},V=async U=>{l.mount=!0;const q=U.target;let ne=q.name,Ne=!0;const Ie=Qe(n,ne),Ce=Mt=>{Ne=Number.isNaN(Mt)||Ol(Mt)&&isNaN(Mt.getTime())||la(Mt,Qe(a,ne,Mt))},Te=_k(t.mode),dt=_k(t.reValidateMode);if(Ie){let Mt,qe;const bt=q.type?Nk(Ie._f):sA(U),jt=U.type===Yh.BLUR||U.type===Yh.FOCUS_OUT,Be=!hL(Ie._f)&&!t.resolver&&!Qe(r.errors,ne)&&!Ie._f.deps||gL(jt,Qe(r.touchedFields,ne),r.isSubmitted,dt,Te),He=Ek(ne,u,jt);$r(a,ne,bt),jt?(!q||!q.readOnly)&&(Ie._f.onBlur&&Ie._f.onBlur(U),d&&d(0)):Ie._f.onChange&&Ie._f.onChange(U);const Ze=A(ne,bt,jt),ft=!Rs(Ze)||He;if(!jt&&x.state.next({name:ne,type:U.type,values:Mn(a)}),Be)return(f.isValid||p.isValid)&&(t.mode==="onBlur"?jt&&w():jt||w()),ft&&x.state.next({name:ne,...He?{}:Ze});if(!jt&&He&&x.state.next({...r}),t.resolver){const{errors:nt}=await B([ne]);if(Ce(bt),Ne){const Kt=Ak(r.errors,n,ne),dr=Ak(nt,n,Kt.name||ne);Mt=dr.error,ne=dr.name,qe=Rs(nt)}}else j([ne],!0),Mt=(await Ok(Ie,u.disabled,a,v,t.shouldUseNativeValidation))[ne],j([ne]),Ce(bt),Ne&&(Mt?qe=!1:(f.isValid||p.isValid)&&(qe=await K(n,!0)));Ne&&(Ie._f.deps&&(!Array.isArray(Ie._f.deps)||Ie._f.deps.length>0)&&re(Ie._f.deps),$(ne,qe,Mt,Ze))}},H=(U,q)=>{if(Qe(r.errors,q)&&U.focus)return U.focus(),1},re=async(U,q={})=>{let ne,Ne;const Ie=wd(U);if(t.resolver){const Ce=await T(dn(U)?U:Ie);ne=Rs(Ce),Ne=U?!Ie.some(Te=>Qe(Ce,Te)):ne}else U?(Ne=(await Promise.all(Ie.map(async Ce=>{const Te=Qe(n,Ce);return await K(Te&&Te._f?{[Ce]:Te}:Te)}))).every(Boolean),!(!Ne&&!r.isValid)&&w()):Ne=ne=await K(n);return x.state.next({...!gi(U)||(f.isValid||p.isValid)&&ne!==r.isValid?{}:{name:U},...t.resolver||!U?{isValid:ne}:{},errors:r.errors}),q.shouldFocus&&!Ne&&jd(n,H,U?Ie:u.mount),Ne},ie=(U,q)=>{let ne={...l.mount?a:s};return q&&(ne=lA(q.dirtyFields?r.dirtyFields:r.touchedFields,ne)),dn(U)?ne:gi(U)?Qe(ne,U):U.map(Ne=>Qe(ne,Ne))},M=(U,q)=>({invalid:!!Qe((q||r).errors,U),isDirty:!!Qe((q||r).dirtyFields,U),error:Qe((q||r).errors,U),isValidating:!!Qe(r.validatingFields,U),isTouched:!!Qe((q||r).touchedFields,U)}),Z=U=>{U&&wd(U).forEach(q=>Nn(r.errors,q)),x.state.next({errors:U?r.errors:{}})},fe=(U,q,ne)=>{const Ne=(Qe(n,U,{_f:{}})._f||{}).ref,Ie=Qe(r.errors,U)||{},{ref:Ce,message:Te,type:dt,...Mt}=Ie;$r(r.errors,U,{...Mt,...q,ref:Ne}),x.state.next({name:U,errors:r.errors,isValid:!1}),ne&&ne.shouldFocus&&Ne&&Ne.focus&&Ne.focus()},ye=(U,q)=>ca(U)?x.state.subscribe({next:ne=>"values"in ne&&U(G(void 0,q),ne)}):G(U,q,!0),Le=U=>x.state.subscribe({next:q=>{pL(U.name,q.name,U.exact)&&mL(q,U.formState||f,vt,U.reRenderRoot)&&U.callback({values:{...a},...r,...q,defaultValues:s})}}).unsubscribe,je=U=>(l.mount=!0,p={...p,...U.formState},Le({...U,formState:p})),Me=(U,q={})=>{for(const ne of U?wd(U):u.mount)u.mount.delete(ne),u.array.delete(ne),q.keepValue||(Nn(n,ne),Nn(a,ne)),!q.keepError&&Nn(r.errors,ne),!q.keepDirty&&Nn(r.dirtyFields,ne),!q.keepTouched&&Nn(r.touchedFields,ne),!q.keepIsValidating&&Nn(r.validatingFields,ne),!t.shouldUnregister&&!q.keepDefaultValue&&Nn(s,ne);x.state.next({values:Mn(a)}),x.state.next({...r,...q.keepDirty?{isDirty:se()}:{}}),!q.keepIsValid&&w()},Se=({disabled:U,name:q})=>{(hi(U)&&l.mount||U||u.disabled.has(q))&&(U?u.disabled.add(q):u.disabled.delete(q))},z=(U,q={})=>{let ne=Qe(n,U);const Ne=hi(q.disabled)||hi(t.disabled);return $r(n,U,{...ne||{},_f:{...ne&&ne._f?ne._f:{ref:{name:U}},name:U,mount:!0,...q}}),u.mount.add(U),ne?Se({disabled:hi(q.disabled)?q.disabled:t.disabled,name:U}):I(U,!0,q.value),{...Ne?{disabled:q.disabled||t.disabled}:{},...t.progressive?{required:!!q.required,min:Zu(q.min),max:Zu(q.max),minLength:Zu(q.minLength),maxLength:Zu(q.maxLength),pattern:Zu(q.pattern)}:{},name:U,onChange:V,onBlur:V,ref:Ie=>{if(Ie){z(U,q),ne=Qe(n,U);const Ce=dn(Ie.value)&&Ie.querySelectorAll&&Ie.querySelectorAll("input,select,textarea")[0]||Ie,Te=oL(Ce),dt=ne._f.refs||[];if(Te?dt.find(Mt=>Mt===Ce):Ce===ne._f.ref)return;$r(n,U,{_f:{...ne._f,...Te?{refs:[...dt.filter(Cy),Ce,...Array.isArray(Qe(s,U))?[{}]:[]],ref:{type:Ce.type,name:U}}:{ref:Ce}}}),I(U,!1,void 0,Ce)}else ne=Qe(n,U,{}),ne._f&&(ne._f.mount=!1),(t.shouldUnregister||q.shouldUnregister)&&!(iA(u.array,U)&&l.action)&&u.unMount.add(U)}}},ue=()=>t.shouldFocusError&&jd(n,H,u.mount),de=U=>{hi(U)&&(x.state.next({disabled:U}),jd(n,(q,ne)=>{const Ne=Qe(n,ne);Ne&&(q.disabled=Ne._f.disabled||U,Array.isArray(Ne._f.refs)&&Ne._f.refs.forEach(Ie=>{Ie.disabled=Ne._f.disabled||U}))},0,!1))},ee=(U,q)=>async ne=>{let Ne;ne&&(ne.preventDefault&&ne.preventDefault(),ne.persist&&ne.persist());let Ie=Mn(a);if(x.state.next({isSubmitting:!0}),t.resolver){const{errors:Ce,values:Te}=await B();r.errors=Ce,Ie=Mn(Te)}else await K(n);if(u.disabled.size)for(const Ce of u.disabled)Nn(Ie,Ce);if(Nn(r.errors,"root"),Rs(r.errors)){x.state.next({errors:{}});try{await U(Ie,ne)}catch(Ce){Ne=Ce}}else q&&await q({...r.errors},ne),ue(),setTimeout(ue);if(x.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:Rs(r.errors)&&!Ne,submitCount:r.submitCount+1,errors:r.errors}),Ne)throw Ne},Ye=(U,q={})=>{Qe(n,U)&&(dn(q.defaultValue)?J(U,Mn(Qe(s,U))):(J(U,q.defaultValue),$r(s,U,Mn(q.defaultValue))),q.keepTouched||Nn(r.touchedFields,U),q.keepDirty||(Nn(r.dirtyFields,U),r.isDirty=q.defaultValue?se(U,Mn(Qe(s,U))):se()),q.keepError||(Nn(r.errors,U),f.isValid&&w()),x.state.next({...r}))},Oe=(U,q={})=>{const ne=U?Mn(U):s,Ne=Mn(ne),Ie=Rs(U),Ce=Ie?s:Ne;if(q.keepDefaultValues||(s=ne),!q.keepValues){if(q.keepDirtyValues){const Te=new Set([...u.mount,...Object.keys(zc(s,a))]);for(const dt of Array.from(Te))Qe(r.dirtyFields,dt)?$r(Ce,dt,Qe(a,dt)):J(dt,Qe(Ce,dt))}else{if(Xv&&dn(U))for(const Te of u.mount){const dt=Qe(n,Te);if(dt&&dt._f){const Mt=Array.isArray(dt._f.refs)?dt._f.refs[0]:dt._f.ref;if(Jh(Mt)){const qe=Mt.closest("form");if(qe){qe.reset();break}}}}if(q.keepFieldsRef)for(const Te of u.mount)J(Te,Qe(Ce,Te));else n={}}a=t.shouldUnregister?q.keepDefaultValues?Mn(s):{}:Mn(Ce),x.array.next({values:{...Ce}}),x.state.next({values:{...Ce}})}u={mount:q.keepDirtyValues?u.mount:new Set,unMount:new Set,array:new Set,disabled:new Set,watch:new Set,watchAll:!1,focus:""},l.mount=!f.isValid||!!q.keepIsValid||!!q.keepDirtyValues||!t.shouldUnregister&&!Rs(Ce),l.watch=!!t.shouldUnregister,x.state.next({submitCount:q.keepSubmitCount?r.submitCount:0,isDirty:Ie?!1:q.keepDirty?r.isDirty:!!(q.keepDefaultValues&&!la(U,s)),isSubmitted:q.keepIsSubmitted?r.isSubmitted:!1,dirtyFields:Ie?{}:q.keepDirtyValues?q.keepDefaultValues&&a?zc(s,a):r.dirtyFields:q.keepDefaultValues&&U?zc(s,U):q.keepDirty?r.dirtyFields:{},touchedFields:q.keepTouched?r.touchedFields:{},errors:q.keepErrors?r.errors:{},isSubmitSuccessful:q.keepIsSubmitSuccessful?r.isSubmitSuccessful:!1,isSubmitting:!1,defaultValues:s})},rt=(U,q)=>Oe(ca(U)?U(a):U,q),Nt=(U,q={})=>{const ne=Qe(n,U),Ne=ne&&ne._f;if(Ne){const Ie=Ne.refs?Ne.refs[0]:Ne.ref;Ie.focus&&(Ie.focus(),q.shouldSelect&&ca(Ie.select)&&Ie.select())}},vt=U=>{r={...r,...U}},rr={control:{register:z,unregister:Me,getFieldState:M,handleSubmit:ee,setError:fe,_subscribe:Le,_runSchema:B,_focusError:ue,_getWatch:G,_getDirty:se,_setValid:w,_setFieldArray:_,_setDisabledField:Se,_setErrors:C,_getFieldArray:le,_reset:Oe,_resetDefaultValues:()=>ca(t.defaultValues)&&t.defaultValues().then(U=>{rt(U,t.resetOptions),x.state.next({isLoading:!1})}),_removeUnmounted:Q,_disableForm:de,_subjects:x,_proxyFormState:f,get _fields(){return n},get _formValues(){return a},get _state(){return l},set _state(U){l=U},get _defaultValues(){return s},get _names(){return u},set _names(U){u=U},get _formState(){return r},get _options(){return t},set _options(U){t={...t,...U}}},subscribe:je,trigger:re,register:z,handleSubmit:ee,watch:ye,setValue:J,getValues:ie,reset:rt,resetField:Ye,clearErrors:Z,unregister:Me,setError:fe,setFocus:Nt,getFieldState:M};return{...rr,formControl:rr}}function Ad(e={}){const t=kt.useRef(void 0),r=kt.useRef(void 0),[n,s]=kt.useState({isDirty:!1,isValidating:!1,isLoading:ca(e.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},validatingFields:{},errors:e.errors||{},disabled:e.disabled||!1,isReady:!1,defaultValues:ca(e.defaultValues)?void 0:e.defaultValues});if(!t.current)if(e.formControl)t.current={...e.formControl,formState:n},e.defaultValues&&!ca(e.defaultValues)&&e.formControl.reset(e.defaultValues,e.resetOptions);else{const{formControl:l,...u}=bL(e);t.current={...u,formState:n}}const a=t.current.control;return a._options=e,tb(()=>{const l=a._subscribe({formState:a._proxyFormState,callback:()=>s({...a._formState}),reRenderRoot:!0});return s(u=>({...u,isReady:!0})),a._formState.isReady=!0,l},[a]),kt.useEffect(()=>a._disableForm(e.disabled),[a,e.disabled]),kt.useEffect(()=>{e.mode&&(a._options.mode=e.mode),e.reValidateMode&&(a._options.reValidateMode=e.reValidateMode)},[a,e.mode,e.reValidateMode]),kt.useEffect(()=>{e.errors&&(a._setErrors(e.errors),a._focusError())},[a,e.errors]),kt.useEffect(()=>{e.shouldUnregister&&a._subjects.state.next({values:a._getWatch()})},[a,e.shouldUnregister]),kt.useEffect(()=>{if(a._proxyFormState.isDirty){const l=a._getDirty();l!==n.isDirty&&a._subjects.state.next({isDirty:l})}},[a,n.isDirty]),kt.useEffect(()=>{e.values&&!la(e.values,r.current)?(a._reset(e.values,{keepFieldsRef:!0,...a._options.resetOptions}),r.current=e.values,s(l=>({...l}))):a._resetDefaultValues()},[a,e.values]),kt.useEffect(()=>{a._state.mount||(a._setValid(),a._state.mount=!0),a._state.watch&&(a._state.watch=!1,a._subjects.state.next({...a._formState})),a._removeUnmounted()}),t.current.formState=oA(n,a),t.current}function mA(e){var t,r,n="";if(typeof e=="string"||typeof e=="number")n+=e;else if(typeof e=="object")if(Array.isArray(e)){var s=e.length;for(t=0;t<s;t++)e[t]&&(r=mA(e[t]))&&(n&&(n+=" "),n+=r)}else for(r in e)e[r]&&(n&&(n+=" "),n+=r);return n}function Vr(){for(var e,t,r=0,n="",s=arguments.length;r<s;r++)(e=arguments[r])&&(t=mA(e))&&(n&&(n+=" "),n+=t);return n}var wL=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"];function sb(e){if(typeof e!="string")return!1;var t=wL;return t.includes(e)}var jL=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"];function pA(e){if(typeof e!="string")return!1;var t=jL;return t.includes(e)}function gA(e){return typeof e=="string"&&e.startsWith("data-")}function Xo(e){var t=Object.entries(e).filter(r=>{var[n]=r;return pA(n)||gA(n)});return Object.fromEntries(t)}function ib(e){if(e==null)return null;if(g.isValidElement(e)&&typeof e.props=="object"&&e.props!==null){var t=e.props;return Xo(t)}return typeof e=="object"&&!Array.isArray(e)?Xo(e):null}function Fi(e){var t=Object.entries(e).filter(r=>{var[n]=r;return pA(n)||gA(n)||sb(n)});return Object.fromEntries(t)}var SL=["children","width","height","viewBox","className","style","title","desc"];function Mx(){return Mx=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Mx.apply(null,arguments)}function kL(e,t){if(e==null)return{};var r,n,s=NL(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function NL(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var yA=g.forwardRef((e,t)=>{var{children:r,width:n,height:s,viewBox:a,className:l,style:u,title:d,desc:m}=e,f=kL(e,SL),p=a||{width:n,height:s,x:0,y:0},x=Vr("recharts-surface",l);return g.createElement("svg",Mx({},Fi(f),{className:x,width:n,height:s,style:u,viewBox:"".concat(p.x," ").concat(p.y," ").concat(p.width," ").concat(p.height),ref:t}),g.createElement("title",null,d),g.createElement("desc",null,m),r)}),_L=["children","className"];function Fx(){return Fx=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Fx.apply(null,arguments)}function CL(e,t){if(e==null)return{};var r,n,s=EL(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function EL(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var io=g.forwardRef((e,t)=>{var{children:r,className:n}=e,s=CL(e,_L),a=Vr("recharts-layer",n);return g.createElement("g",Fx({className:a},Fi(s),{ref:t}),r)}),AL=g.createContext(null);function Rr(e){return function(){return e}}const xA=Math.cos,Qh=Math.sin,ya=Math.sqrt,Zh=Math.PI,tp=2*Zh,Lx=Math.PI,zx=2*Lx,Sl=1e-6,PL=zx-Sl;function vA(e){this._+=e[0];for(let t=1,r=e.length;t<r;++t)this._+=arguments[t]+e[t]}function OL(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return vA;const r=10**t;return function(n){this._+=n[0];for(let s=1,a=n.length;s<a;++s)this._+=Math.round(arguments[s]*r)/r+n[s]}}class IL{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?vA:OL(t)}moveTo(t,r){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+r}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,r){this._append`L${this._x1=+t},${this._y1=+r}`}quadraticCurveTo(t,r,n,s){this._append`Q${+t},${+r},${this._x1=+n},${this._y1=+s}`}bezierCurveTo(t,r,n,s,a,l){this._append`C${+t},${+r},${+n},${+s},${this._x1=+a},${this._y1=+l}`}arcTo(t,r,n,s,a){if(t=+t,r=+r,n=+n,s=+s,a=+a,a<0)throw new Error(`negative radius: ${a}`);let l=this._x1,u=this._y1,d=n-t,m=s-r,f=l-t,p=u-r,x=f*f+p*p;if(this._x1===null)this._append`M${this._x1=t},${this._y1=r}`;else if(x>Sl)if(!(Math.abs(p*d-m*f)>Sl)||!a)this._append`L${this._x1=t},${this._y1=r}`;else{let v=n-l,b=s-u,w=d*d+m*m,j=v*v+b*b,_=Math.sqrt(w),E=Math.sqrt(x),C=a*Math.tan((Lx-Math.acos((w+x-j)/(2*_*E)))/2),I=C/E,A=C/_;Math.abs(I-1)>Sl&&this._append`L${t+I*f},${r+I*p}`,this._append`A${a},${a},0,0,${+(p*v>f*b)},${this._x1=t+A*d},${this._y1=r+A*m}`}}arc(t,r,n,s,a,l){if(t=+t,r=+r,n=+n,l=!!l,n<0)throw new Error(`negative radius: ${n}`);let u=n*Math.cos(s),d=n*Math.sin(s),m=t+u,f=r+d,p=1^l,x=l?s-a:a-s;this._x1===null?this._append`M${m},${f}`:(Math.abs(this._x1-m)>Sl||Math.abs(this._y1-f)>Sl)&&this._append`L${m},${f}`,n&&(x<0&&(x=x%zx+zx),x>PL?this._append`A${n},${n},0,1,${p},${t-u},${r-d}A${n},${n},0,1,${p},${this._x1=m},${this._y1=f}`:x>Sl&&this._append`A${n},${n},0,${+(x>=Lx)},${p},${this._x1=t+n*Math.cos(a)},${this._y1=r+n*Math.sin(a)}`)}rect(t,r,n,s){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+r}h${n=+n}v${+s}h${-n}Z`}toString(){return this._}}function ab(e){let t=3;return e.digits=function(r){if(!arguments.length)return t;if(r==null)t=null;else{const n=Math.floor(r);if(!(n>=0))throw new RangeError(`invalid digits: ${r}`);t=n}return e},()=>new IL(t)}function ob(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function bA(e){this._context=e}bA.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function rp(e){return new bA(e)}function wA(e){return e[0]}function jA(e){return e[1]}function SA(e,t){var r=Rr(!0),n=null,s=rp,a=null,l=ab(u);e=typeof e=="function"?e:e===void 0?wA:Rr(e),t=typeof t=="function"?t:t===void 0?jA:Rr(t);function u(d){var m,f=(d=ob(d)).length,p,x=!1,v;for(n==null&&(a=s(v=l())),m=0;m<=f;++m)!(m<f&&r(p=d[m],m,d))===x&&((x=!x)?a.lineStart():a.lineEnd()),x&&a.point(+e(p,m,d),+t(p,m,d));if(v)return a=null,v+""||null}return u.x=function(d){return arguments.length?(e=typeof d=="function"?d:Rr(+d),u):e},u.y=function(d){return arguments.length?(t=typeof d=="function"?d:Rr(+d),u):t},u.defined=function(d){return arguments.length?(r=typeof d=="function"?d:Rr(!!d),u):r},u.curve=function(d){return arguments.length?(s=d,n!=null&&(a=s(n)),u):s},u.context=function(d){return arguments.length?(d==null?n=a=null:a=s(n=d),u):n},u}function uh(e,t,r){var n=null,s=Rr(!0),a=null,l=rp,u=null,d=ab(m);e=typeof e=="function"?e:e===void 0?wA:Rr(+e),t=typeof t=="function"?t:Rr(t===void 0?0:+t),r=typeof r=="function"?r:r===void 0?jA:Rr(+r);function m(p){var x,v,b,w=(p=ob(p)).length,j,_=!1,E,C=new Array(w),I=new Array(w);for(a==null&&(u=l(E=d())),x=0;x<=w;++x){if(!(x<w&&s(j=p[x],x,p))===_)if(_=!_)v=x,u.areaStart(),u.lineStart();else{for(u.lineEnd(),u.lineStart(),b=x-1;b>=v;--b)u.point(C[b],I[b]);u.lineEnd(),u.areaEnd()}_&&(C[x]=+e(j,x,p),I[x]=+t(j,x,p),u.point(n?+n(j,x,p):C[x],r?+r(j,x,p):I[x]))}if(E)return u=null,E+""||null}function f(){return SA().defined(s).curve(l).context(a)}return m.x=function(p){return arguments.length?(e=typeof p=="function"?p:Rr(+p),n=null,m):e},m.x0=function(p){return arguments.length?(e=typeof p=="function"?p:Rr(+p),m):e},m.x1=function(p){return arguments.length?(n=p==null?null:typeof p=="function"?p:Rr(+p),m):n},m.y=function(p){return arguments.length?(t=typeof p=="function"?p:Rr(+p),r=null,m):t},m.y0=function(p){return arguments.length?(t=typeof p=="function"?p:Rr(+p),m):t},m.y1=function(p){return arguments.length?(r=p==null?null:typeof p=="function"?p:Rr(+p),m):r},m.lineX0=m.lineY0=function(){return f().x(e).y(t)},m.lineY1=function(){return f().x(e).y(r)},m.lineX1=function(){return f().x(n).y(t)},m.defined=function(p){return arguments.length?(s=typeof p=="function"?p:Rr(!!p),m):s},m.curve=function(p){return arguments.length?(l=p,a!=null&&(u=l(a)),m):l},m.context=function(p){return arguments.length?(p==null?a=u=null:u=l(a=p),m):a},m}class kA{constructor(t,r){this._context=t,this._x=r}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(t,r){switch(t=+t,r=+r,this._point){case 0:{this._point=1,this._line?this._context.lineTo(t,r):this._context.moveTo(t,r);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+t)/2,this._y0,this._x0,r,t,r):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+r)/2,t,this._y0,t,r);break}}this._x0=t,this._y0=r}}function TL(e){return new kA(e,!0)}function DL(e){return new kA(e,!1)}const lb={draw(e,t){const r=ya(t/Zh);e.moveTo(r,0),e.arc(0,0,r,0,tp)}},$L={draw(e,t){const r=ya(t/5)/2;e.moveTo(-3*r,-r),e.lineTo(-r,-r),e.lineTo(-r,-3*r),e.lineTo(r,-3*r),e.lineTo(r,-r),e.lineTo(3*r,-r),e.lineTo(3*r,r),e.lineTo(r,r),e.lineTo(r,3*r),e.lineTo(-r,3*r),e.lineTo(-r,r),e.lineTo(-3*r,r),e.closePath()}},NA=ya(1/3),RL=NA*2,ML={draw(e,t){const r=ya(t/RL),n=r*NA;e.moveTo(0,-r),e.lineTo(n,0),e.lineTo(0,r),e.lineTo(-n,0),e.closePath()}},FL={draw(e,t){const r=ya(t),n=-r/2;e.rect(n,n,r,r)}},LL=.8908130915292852,_A=Qh(Zh/10)/Qh(7*Zh/10),zL=Qh(tp/10)*_A,UL=-xA(tp/10)*_A,BL={draw(e,t){const r=ya(t*LL),n=zL*r,s=UL*r;e.moveTo(0,-r),e.lineTo(n,s);for(let a=1;a<5;++a){const l=tp*a/5,u=xA(l),d=Qh(l);e.lineTo(d*r,-u*r),e.lineTo(u*n-d*s,d*n+u*s)}e.closePath()}},Ey=ya(3),WL={draw(e,t){const r=-ya(t/(Ey*3));e.moveTo(0,r*2),e.lineTo(-Ey*r,-r),e.lineTo(Ey*r,-r),e.closePath()}},Ti=-.5,Di=ya(3)/2,Ux=1/ya(12),VL=(Ux/2+1)*3,qL={draw(e,t){const r=ya(t/VL),n=r/2,s=r*Ux,a=n,l=r*Ux+r,u=-a,d=l;e.moveTo(n,s),e.lineTo(a,l),e.lineTo(u,d),e.lineTo(Ti*n-Di*s,Di*n+Ti*s),e.lineTo(Ti*a-Di*l,Di*a+Ti*l),e.lineTo(Ti*u-Di*d,Di*u+Ti*d),e.lineTo(Ti*n+Di*s,Ti*s-Di*n),e.lineTo(Ti*a+Di*l,Ti*l-Di*a),e.lineTo(Ti*u+Di*d,Ti*d-Di*u),e.closePath()}};function HL(e,t){let r=null,n=ab(s);e=typeof e=="function"?e:Rr(e||lb),t=typeof t=="function"?t:Rr(t===void 0?64:+t);function s(){let a;if(r||(r=a=n()),e.apply(this,arguments).draw(r,+t.apply(this,arguments)),a)return r=null,a+""||null}return s.type=function(a){return arguments.length?(e=typeof a=="function"?a:Rr(a),s):e},s.size=function(a){return arguments.length?(t=typeof a=="function"?a:Rr(+a),s):t},s.context=function(a){return arguments.length?(r=a??null,s):r},s}function em(){}function tm(e,t,r){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+r)/6)}function CA(e){this._context=e}CA.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:tm(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:tm(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function KL(e){return new CA(e)}function EA(e){this._context=e}EA.prototype={areaStart:em,areaEnd:em,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:tm(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function GL(e){return new EA(e)}function AA(e){this._context=e}AA.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var r=(this._x0+4*this._x1+e)/6,n=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(r,n):this._context.moveTo(r,n);break;case 3:this._point=4;default:tm(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function YL(e){return new AA(e)}function PA(e){this._context=e}PA.prototype={areaStart:em,areaEnd:em,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}};function JL(e){return new PA(e)}function Ik(e){return e<0?-1:1}function Tk(e,t,r){var n=e._x1-e._x0,s=t-e._x1,a=(e._y1-e._y0)/(n||s<0&&-0),l=(r-e._y1)/(s||n<0&&-0),u=(a*s+l*n)/(n+s);return(Ik(a)+Ik(l))*Math.min(Math.abs(a),Math.abs(l),.5*Math.abs(u))||0}function Dk(e,t){var r=e._x1-e._x0;return r?(3*(e._y1-e._y0)/r-t)/2:t}function Ay(e,t,r){var n=e._x0,s=e._y0,a=e._x1,l=e._y1,u=(a-n)/3;e._context.bezierCurveTo(n+u,s+u*t,a-u,l-u*r,a,l)}function rm(e){this._context=e}rm.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:Ay(this,this._t0,Dk(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var r=NaN;if(e=+e,t=+t,!(e===this._x1&&t===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,Ay(this,Dk(this,r=Tk(this,e,t)),r);break;default:Ay(this,this._t0,r=Tk(this,e,t));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=r}}};function OA(e){this._context=new IA(e)}(OA.prototype=Object.create(rm.prototype)).point=function(e,t){rm.prototype.point.call(this,t,e)};function IA(e){this._context=e}IA.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,r,n,s,a){this._context.bezierCurveTo(t,e,n,r,a,s)}};function XL(e){return new rm(e)}function QL(e){return new OA(e)}function TA(e){this._context=e}TA.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,r=e.length;if(r)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),r===2)this._context.lineTo(e[1],t[1]);else for(var n=$k(e),s=$k(t),a=0,l=1;l<r;++a,++l)this._context.bezierCurveTo(n[0][a],s[0][a],n[1][a],s[1][a],e[l],t[l]);(this._line||this._line!==0&&r===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}};function $k(e){var t,r=e.length-1,n,s=new Array(r),a=new Array(r),l=new Array(r);for(s[0]=0,a[0]=2,l[0]=e[0]+2*e[1],t=1;t<r-1;++t)s[t]=1,a[t]=4,l[t]=4*e[t]+2*e[t+1];for(s[r-1]=2,a[r-1]=7,l[r-1]=8*e[r-1]+e[r],t=1;t<r;++t)n=s[t]/a[t-1],a[t]-=n,l[t]-=n*l[t-1];for(s[r-1]=l[r-1]/a[r-1],t=r-2;t>=0;--t)s[t]=(l[t]-s[t+1])/a[t];for(a[r-1]=(e[r]+s[r-1])/2,t=0;t<r-1;++t)a[t]=2*e[t+1]-s[t+1];return[s,a]}function ZL(e){return new TA(e)}function np(e,t){this._context=e,this._t=t}np.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var r=this._x*(1-this._t)+e*this._t;this._context.lineTo(r,this._y),this._context.lineTo(r,t)}break}}this._x=e,this._y=t}};function ez(e){return new np(e,.5)}function tz(e){return new np(e,0)}function rz(e){return new np(e,1)}function Jc(e,t){if((l=e.length)>1)for(var r=1,n,s,a=e[t[0]],l,u=a.length;r<l;++r)for(s=a,a=e[t[r]],n=0;n<u;++n)a[n][1]+=a[n][0]=isNaN(s[n][1])?s[n][0]:s[n][1]}function Bx(e){for(var t=e.length,r=new Array(t);--t>=0;)r[t]=t;return r}function nz(e,t){return e[t]}function sz(e){const t=[];return t.key=e,t}function iz(){var e=Rr([]),t=Bx,r=Jc,n=nz;function s(a){var l=Array.from(e.apply(this,arguments),sz),u,d=l.length,m=-1,f;for(const p of a)for(u=0,++m;u<d;++u)(l[u][m]=[0,+n(p,l[u].key,m,a)]).data=p;for(u=0,f=ob(t(l));u<d;++u)l[f[u]].index=u;return r(l,f),l}return s.keys=function(a){return arguments.length?(e=typeof a=="function"?a:Rr(Array.from(a)),s):e},s.value=function(a){return arguments.length?(n=typeof a=="function"?a:Rr(+a),s):n},s.order=function(a){return arguments.length?(t=a==null?Bx:typeof a=="function"?a:Rr(Array.from(a)),s):t},s.offset=function(a){return arguments.length?(r=a??Jc,s):r},s}function az(e,t){if((n=e.length)>0){for(var r,n,s=0,a=e[0].length,l;s<a;++s){for(l=r=0;r<n;++r)l+=e[r][s][1]||0;if(l)for(r=0;r<n;++r)e[r][s][1]/=l}Jc(e,t)}}function oz(e,t){if((s=e.length)>0){for(var r=0,n=e[t[0]],s,a=n.length;r<a;++r){for(var l=0,u=0;l<s;++l)u+=e[l][r][1]||0;n[r][1]+=n[r][0]=-u/2}Jc(e,t)}}function lz(e,t){if(!(!((l=e.length)>0)||!((a=(s=e[t[0]]).length)>0))){for(var r=0,n=1,s,a,l;n<a;++n){for(var u=0,d=0,m=0;u<l;++u){for(var f=e[t[u]],p=f[n][1]||0,x=f[n-1][1]||0,v=(p-x)/2,b=0;b<u;++b){var w=e[t[b]],j=w[n][1]||0,_=w[n-1][1]||0;v+=j-_}d+=p,m+=v*p}s[n-1][1]+=s[n-1][0]=r,d&&(r-=m/d)}s[n-1][1]+=s[n-1][0]=r,Jc(e,t)}}var Py={},Oy={},Rk;function cz(){return Rk||(Rk=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r==="__proto__"}e.isUnsafeProperty=t})(Oy)),Oy}var Iy={},Mk;function DA(){return Mk||(Mk=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){switch(typeof r){case"number":case"symbol":return!1;case"string":return r.includes(".")||r.includes("[")||r.includes("]")}}e.isDeepKey=t})(Iy)),Iy}var Ty={},Fk;function cb(){return Fk||(Fk=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){var n;return typeof r=="string"||typeof r=="symbol"?r:Object.is((n=r==null?void 0:r.valueOf)==null?void 0:n.call(r),-0)?"-0":String(r)}e.toKey=t})(Ty)),Ty}var Dy={},$y={},Lk;function uz(){return Lk||(Lk=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){if(r==null)return"";if(typeof r=="string")return r;if(Array.isArray(r))return r.map(t).join(",");const n=String(r);return n==="0"&&Object.is(Number(r),-0)?"-0":n}e.toString=t})($y)),$y}var zk;function ub(){return zk||(zk=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=uz(),r=cb();function n(s){if(Array.isArray(s))return s.map(r.toKey);if(typeof s=="symbol")return[s];s=t.toString(s);const a=[],l=s.length;if(l===0)return a;let u=0,d="",m="",f=!1;for(s.charCodeAt(0)===46&&(a.push(""),u++);u<l;){const p=s[u];m?p==="\\"&&u+1<l?(u++,d+=s[u]):p===m?m="":d+=p:f?p==='"'||p==="'"?m=p:p==="]"?(f=!1,a.push(d),d=""):d+=p:p==="["?(f=!0,d&&(a.push(d),d="")):p==="."?d&&(a.push(d),d=""):d+=p,u++}return d&&a.push(d),a}e.toPath=n})(Dy)),Dy}var Uk;function db(){return Uk||(Uk=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=cz(),r=DA(),n=cb(),s=ub();function a(u,d,m){if(u==null)return m;switch(typeof d){case"string":{if(t.isUnsafeProperty(d))return m;const f=u[d];return f===void 0?r.isDeepKey(d)?a(u,s.toPath(d),m):m:f}case"number":case"symbol":{typeof d=="number"&&(d=n.toKey(d));const f=u[d];return f===void 0?m:f}default:{if(Array.isArray(d))return l(u,d,m);if(Object.is(d==null?void 0:d.valueOf(),-0)?d="-0":d=String(d),t.isUnsafeProperty(d))return m;const f=u[d];return f===void 0?m:f}}}function l(u,d,m){if(d.length===0)return m;let f=u;for(let p=0;p<d.length;p++){if(f==null||t.isUnsafeProperty(d[p]))return m;f=f[d[p]]}return f===void 0?m:f}e.get=a})(Py)),Py}var Ry,Bk;function dz(){return Bk||(Bk=1,Ry=db().get),Ry}var fz=dz();const Xc=pa(fz);var xi=e=>e===0?0:e>0?1:-1,Aa=e=>typeof e=="number"&&e!=+e,ao=e=>typeof e=="string"&&e.indexOf("%")===e.length-1,Tt=e=>(typeof e=="number"||e instanceof Number)&&!Aa(e),Pa=e=>Tt(e)||typeof e=="string",hz=0,Pd=e=>{var t=++hz;return"".concat(e||"").concat(t)},ma=function(t,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!Tt(t)&&typeof t!="string")return n;var a;if(ao(t)){if(r==null)return n;var l=t.indexOf("%");a=r*parseFloat(t.slice(0,l))/100}else a=+t;return Aa(a)&&(a=n),s&&r!=null&&a>r&&(a=r),a},$A=e=>{if(!Array.isArray(e))return!1;for(var t=e.length,r={},n=0;n<t;n++)if(!r[e[n]])r[e[n]]=!0;else return!0;return!1};function ys(e,t,r){return Tt(e)&&Tt(t)?e+r*(t-e):t}function mz(e,t,r){if(!(!e||!e.length))return e.find(n=>n&&(typeof t=="function"?t(n):Xc(n,t))===r)}var is=e=>e===null||typeof e>"u",Gd=e=>is(e)?e:"".concat(e.charAt(0).toUpperCase()).concat(e.slice(1));function pz(e){return e!=null}function mu(){}var gz=["type","size","sizeType"];function Wx(){return Wx=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Wx.apply(null,arguments)}function Wk(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Vk(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Wk(Object(r),!0).forEach(function(n){yz(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Wk(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function yz(e,t,r){return(t=xz(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function xz(e){var t=vz(e,"string");return typeof t=="symbol"?t:t+""}function vz(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function bz(e,t){if(e==null)return{};var r,n,s=wz(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function wz(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var RA={symbolCircle:lb,symbolCross:$L,symbolDiamond:ML,symbolSquare:FL,symbolStar:BL,symbolTriangle:WL,symbolWye:qL},jz=Math.PI/180,Sz=e=>{var t="symbol".concat(Gd(e));return RA[t]||lb},kz=(e,t,r)=>{if(t==="area")return e;switch(r){case"cross":return 5*e*e/9;case"diamond":return .5*e*e/Math.sqrt(3);case"square":return e*e;case"star":{var n=18*jz;return 1.25*e*e*(Math.tan(n)-Math.tan(n*2)*Math.tan(n)**2)}case"triangle":return Math.sqrt(3)*e*e/4;case"wye":return(21-10*Math.sqrt(3))*e*e/8;default:return Math.PI*e*e/4}},Nz=(e,t)=>{RA["symbol".concat(Gd(e))]=t},MA=e=>{var{type:t="circle",size:r=64,sizeType:n="area"}=e,s=bz(e,gz),a=Vk(Vk({},s),{},{type:t,size:r,sizeType:n}),l="circle";typeof t=="string"&&(l=t);var u=()=>{var x=Sz(l),v=HL().type(x).size(kz(r,n,l)),b=v();if(b!==null)return b},{className:d,cx:m,cy:f}=a,p=Fi(a);return Tt(m)&&Tt(f)&&Tt(r)?g.createElement("path",Wx({},p,{className:Vr("recharts-symbols",d),transform:"translate(".concat(m,", ").concat(f,")"),d:u()})):null};MA.registerSymbol=Nz;var FA=e=>"radius"in e&&"startAngle"in e&&"endAngle"in e,_z=(e,t)=>{if(!e||typeof e=="function"||typeof e=="boolean")return null;var r=e;if(g.isValidElement(e)&&(r=e.props),typeof r!="object"&&typeof r!="function")return null;var n={};return Object.keys(r).forEach(s=>{sb(s)&&(n[s]=(a=>r[s](r,a)))}),n},Cz=(e,t,r)=>n=>(e(t,r,n),null),fb=(e,t,r)=>{if(e===null||typeof e!="object"&&typeof e!="function")return null;var n=null;return Object.keys(e).forEach(s=>{var a=e[s];sb(s)&&typeof a=="function"&&(n||(n={}),n[s]=Cz(a,t,r))}),n};function qk(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Ez(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?qk(Object(r),!0).forEach(function(n){Az(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):qk(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Az(e,t,r){return(t=Pz(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Pz(e){var t=Oz(e,"string");return typeof t=="symbol"?t:t+""}function Oz(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Bi(e,t){var r=Ez({},e),n=t,s=Object.keys(t),a=s.reduce((l,u)=>(l[u]===void 0&&n[u]!==void 0&&(l[u]=n[u]),l),r);return a}var My={},Fy={},Hk;function Iz(){return Hk||(Hk=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r,n){const s=new Map;for(let a=0;a<r.length;a++){const l=r[a],u=n(l);s.has(u)||s.set(u,l)}return Array.from(s.values())}e.uniqBy=t})(Fy)),Fy}var Ly={},Kk;function LA(){return Kk||(Kk=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r}e.identity=t})(Ly)),Ly}var zy={},Uy={},By={},Gk;function Tz(){return Gk||(Gk=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return Number.isSafeInteger(r)&&r>=0}e.isLength=t})(By)),By}var Yk;function hb(){return Yk||(Yk=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Tz();function r(n){return n!=null&&typeof n!="function"&&t.isLength(n.length)}e.isArrayLike=r})(Uy)),Uy}var Wy={},Jk;function Dz(){return Jk||(Jk=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return typeof r=="object"&&r!==null}e.isObjectLike=t})(Wy)),Wy}var Xk;function $z(){return Xk||(Xk=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=hb(),r=Dz();function n(s){return r.isObjectLike(s)&&t.isArrayLike(s)}e.isArrayLikeObject=n})(zy)),zy}var Vy={},qy={},Qk;function Rz(){return Qk||(Qk=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=db();function r(n){return function(s){return t.get(s,n)}}e.property=r})(qy)),qy}var Hy={},Ky={},Gy={},Yy={},Zk;function zA(){return Zk||(Zk=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r!==null&&(typeof r=="object"||typeof r=="function")}e.isObject=t})(Yy)),Yy}var Jy={},eN;function UA(){return eN||(eN=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r==null||typeof r!="object"&&typeof r!="function"}e.isPrimitive=t})(Jy)),Jy}var Xy={},tN;function BA(){return tN||(tN=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r,n){return r===n||Number.isNaN(r)&&Number.isNaN(n)}e.eq=t})(Xy)),Xy}var rN;function Mz(){return rN||(rN=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=zA(),r=UA(),n=BA();function s(f,p,x){return typeof x!="function"?s(f,p,()=>{}):a(f,p,function v(b,w,j,_,E,C){const I=x(b,w,j,_,E,C);return I!==void 0?!!I:a(b,w,v,C)},new Map)}function a(f,p,x,v){if(p===f)return!0;switch(typeof p){case"object":return l(f,p,x,v);case"function":return Object.keys(p).length>0?a(f,{...p},x,v):n.eq(f,p);default:return t.isObject(f)?typeof p=="string"?p==="":!0:n.eq(f,p)}}function l(f,p,x,v){if(p==null)return!0;if(Array.isArray(p))return d(f,p,x,v);if(p instanceof Map)return u(f,p,x,v);if(p instanceof Set)return m(f,p,x,v);const b=Object.keys(p);if(f==null)return b.length===0;if(b.length===0)return!0;if(v!=null&&v.has(p))return v.get(p)===f;v==null||v.set(p,f);try{for(let w=0;w<b.length;w++){const j=b[w];if(!r.isPrimitive(f)&&!(j in f)||p[j]===void 0&&f[j]!==void 0||p[j]===null&&f[j]!==null||!x(f[j],p[j],j,f,p,v))return!1}return!0}finally{v==null||v.delete(p)}}function u(f,p,x,v){if(p.size===0)return!0;if(!(f instanceof Map))return!1;for(const[b,w]of p.entries()){const j=f.get(b);if(x(j,w,b,f,p,v)===!1)return!1}return!0}function d(f,p,x,v){if(p.length===0)return!0;if(!Array.isArray(f))return!1;const b=new Set;for(let w=0;w<p.length;w++){const j=p[w];let _=!1;for(let E=0;E<f.length;E++){if(b.has(E))continue;const C=f[E];let I=!1;if(x(C,j,w,f,p,v)&&(I=!0),I){b.add(E),_=!0;break}}if(!_)return!1}return!0}function m(f,p,x,v){return p.size===0?!0:f instanceof Set?d([...f],[...p],x,v):!1}e.isMatchWith=s,e.isSetMatch=m})(Gy)),Gy}var nN;function WA(){return nN||(nN=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Mz();function r(n,s){return t.isMatchWith(n,s,()=>{})}e.isMatch=r})(Ky)),Ky}var Qy={},Zy={},e0={},sN;function Fz(){return sN||(sN=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return Object.getOwnPropertySymbols(r).filter(n=>Object.prototype.propertyIsEnumerable.call(r,n))}e.getSymbols=t})(e0)),e0}var t0={},iN;function VA(){return iN||(iN=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r==null?r===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(r)}e.getTag=t})(t0)),t0}var r0={},aN;function qA(){return aN||(aN=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t="[object RegExp]",r="[object String]",n="[object Number]",s="[object Boolean]",a="[object Arguments]",l="[object Symbol]",u="[object Date]",d="[object Map]",m="[object Set]",f="[object Array]",p="[object Function]",x="[object ArrayBuffer]",v="[object Object]",b="[object Error]",w="[object DataView]",j="[object Uint8Array]",_="[object Uint8ClampedArray]",E="[object Uint16Array]",C="[object Uint32Array]",I="[object BigUint64Array]",A="[object Int8Array]",$="[object Int16Array]",B="[object Int32Array]",T="[object BigInt64Array]",K="[object Float32Array]",Q="[object Float64Array]";e.argumentsTag=a,e.arrayBufferTag=x,e.arrayTag=f,e.bigInt64ArrayTag=T,e.bigUint64ArrayTag=I,e.booleanTag=s,e.dataViewTag=w,e.dateTag=u,e.errorTag=b,e.float32ArrayTag=K,e.float64ArrayTag=Q,e.functionTag=p,e.int16ArrayTag=$,e.int32ArrayTag=B,e.int8ArrayTag=A,e.mapTag=d,e.numberTag=n,e.objectTag=v,e.regexpTag=t,e.setTag=m,e.stringTag=r,e.symbolTag=l,e.uint16ArrayTag=E,e.uint32ArrayTag=C,e.uint8ArrayTag=j,e.uint8ClampedArrayTag=_})(r0)),r0}var n0={},oN;function Lz(){return oN||(oN=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return ArrayBuffer.isView(r)&&!(r instanceof DataView)}e.isTypedArray=t})(n0)),n0}var lN;function HA(){return lN||(lN=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Fz(),r=VA(),n=qA(),s=UA(),a=Lz();function l(f,p){return u(f,void 0,f,new Map,p)}function u(f,p,x,v=new Map,b=void 0){const w=b==null?void 0:b(f,p,x,v);if(w!==void 0)return w;if(s.isPrimitive(f))return f;if(v.has(f))return v.get(f);if(Array.isArray(f)){const j=new Array(f.length);v.set(f,j);for(let _=0;_<f.length;_++)j[_]=u(f[_],_,x,v,b);return Object.hasOwn(f,"index")&&(j.index=f.index),Object.hasOwn(f,"input")&&(j.input=f.input),j}if(f instanceof Date)return new Date(f.getTime());if(f instanceof RegExp){const j=new RegExp(f.source,f.flags);return j.lastIndex=f.lastIndex,j}if(f instanceof Map){const j=new Map;v.set(f,j);for(const[_,E]of f)j.set(_,u(E,_,x,v,b));return j}if(f instanceof Set){const j=new Set;v.set(f,j);for(const _ of f)j.add(u(_,void 0,x,v,b));return j}if(typeof Buffer<"u"&&Buffer.isBuffer(f))return f.subarray();if(a.isTypedArray(f)){const j=new(Object.getPrototypeOf(f)).constructor(f.length);v.set(f,j);for(let _=0;_<f.length;_++)j[_]=u(f[_],_,x,v,b);return j}if(f instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&f instanceof SharedArrayBuffer)return f.slice(0);if(f instanceof DataView){const j=new DataView(f.buffer.slice(0),f.byteOffset,f.byteLength);return v.set(f,j),d(j,f,x,v,b),j}if(typeof File<"u"&&f instanceof File){const j=new File([f],f.name,{type:f.type});return v.set(f,j),d(j,f,x,v,b),j}if(typeof Blob<"u"&&f instanceof Blob){const j=new Blob([f],{type:f.type});return v.set(f,j),d(j,f,x,v,b),j}if(f instanceof Error){const j=new f.constructor;return v.set(f,j),j.message=f.message,j.name=f.name,j.stack=f.stack,j.cause=f.cause,d(j,f,x,v,b),j}if(f instanceof Boolean){const j=new Boolean(f.valueOf());return v.set(f,j),d(j,f,x,v,b),j}if(f instanceof Number){const j=new Number(f.valueOf());return v.set(f,j),d(j,f,x,v,b),j}if(f instanceof String){const j=new String(f.valueOf());return v.set(f,j),d(j,f,x,v,b),j}if(typeof f=="object"&&m(f)){const j=Object.create(Object.getPrototypeOf(f));return v.set(f,j),d(j,f,x,v,b),j}return f}function d(f,p,x=f,v,b){const w=[...Object.keys(p),...t.getSymbols(p)];for(let j=0;j<w.length;j++){const _=w[j],E=Object.getOwnPropertyDescriptor(f,_);(E==null||E.writable)&&(f[_]=u(p[_],_,x,v,b))}}function m(f){switch(r.getTag(f)){case n.argumentsTag:case n.arrayTag:case n.arrayBufferTag:case n.dataViewTag:case n.booleanTag:case n.dateTag:case n.float32ArrayTag:case n.float64ArrayTag:case n.int8ArrayTag:case n.int16ArrayTag:case n.int32ArrayTag:case n.mapTag:case n.numberTag:case n.objectTag:case n.regexpTag:case n.setTag:case n.stringTag:case n.symbolTag:case n.uint8ArrayTag:case n.uint8ClampedArrayTag:case n.uint16ArrayTag:case n.uint32ArrayTag:return!0;default:return!1}}e.cloneDeepWith=l,e.cloneDeepWithImpl=u,e.copyProperties=d})(Zy)),Zy}var cN;function zz(){return cN||(cN=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=HA();function r(n){return t.cloneDeepWithImpl(n,void 0,n,new Map,void 0)}e.cloneDeep=r})(Qy)),Qy}var uN;function Uz(){return uN||(uN=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=WA(),r=zz();function n(s){return s=r.cloneDeep(s),a=>t.isMatch(a,s)}e.matches=n})(Hy)),Hy}var s0={},i0={},a0={},dN;function Bz(){return dN||(dN=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=HA(),r=qA();function n(s,a){return t.cloneDeepWith(s,(l,u,d,m)=>{const f=a==null?void 0:a(l,u,d,m);if(f!==void 0)return f;if(typeof s=="object")switch(Object.prototype.toString.call(s)){case r.numberTag:case r.stringTag:case r.booleanTag:{const p=new s.constructor(s==null?void 0:s.valueOf());return t.copyProperties(p,s),p}case r.argumentsTag:{const p={};return t.copyProperties(p,s),p.length=s.length,p[Symbol.iterator]=s[Symbol.iterator],p}default:return}})}e.cloneDeepWith=n})(a0)),a0}var fN;function Wz(){return fN||(fN=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Bz();function r(n){return t.cloneDeepWith(n)}e.cloneDeep=r})(i0)),i0}var o0={},l0={},hN;function KA(){return hN||(hN=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=/^(?:0|[1-9]\d*)$/;function r(n,s=Number.MAX_SAFE_INTEGER){switch(typeof n){case"number":return Number.isInteger(n)&&n>=0&&n<s;case"symbol":return!1;case"string":return t.test(n)}}e.isIndex=r})(l0)),l0}var c0={},mN;function Vz(){return mN||(mN=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=VA();function r(n){return n!==null&&typeof n=="object"&&t.getTag(n)==="[object Arguments]"}e.isArguments=r})(c0)),c0}var pN;function qz(){return pN||(pN=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=DA(),r=KA(),n=Vz(),s=ub();function a(l,u){let d;if(Array.isArray(u)?d=u:typeof u=="string"&&t.isDeepKey(u)&&(l==null?void 0:l[u])==null?d=s.toPath(u):d=[u],d.length===0)return!1;let m=l;for(let f=0;f<d.length;f++){const p=d[f];if((m==null||!Object.hasOwn(m,p))&&!((Array.isArray(m)||n.isArguments(m))&&r.isIndex(p)&&p<m.length))return!1;m=m[p]}return!0}e.has=a})(o0)),o0}var gN;function Hz(){return gN||(gN=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=WA(),r=cb(),n=Wz(),s=db(),a=qz();function l(u,d){switch(typeof u){case"object":{Object.is(u==null?void 0:u.valueOf(),-0)&&(u="-0");break}case"number":{u=r.toKey(u);break}}return d=n.cloneDeep(d),function(m){const f=s.get(m,u);return f===void 0?a.has(m,u):d===void 0?f===void 0:t.isMatch(f,d)}}e.matchesProperty=l})(s0)),s0}var yN;function Kz(){return yN||(yN=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=LA(),r=Rz(),n=Uz(),s=Hz();function a(l){if(l==null)return t.identity;switch(typeof l){case"function":return l;case"object":return Array.isArray(l)&&l.length===2?s.matchesProperty(l[0],l[1]):n.matches(l);case"string":case"symbol":case"number":return r.property(l)}}e.iteratee=a})(Vy)),Vy}var xN;function Gz(){return xN||(xN=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Iz(),r=LA(),n=$z(),s=Kz();function a(l,u=r.identity){return n.isArrayLikeObject(l)?t.uniqBy(Array.from(l),s.iteratee(u)):[]}e.uniqBy=a})(My)),My}var u0,vN;function Yz(){return vN||(vN=1,u0=Gz().uniqBy),u0}var Jz=Yz();const bN=pa(Jz);function Xz(e,t,r){return t===!0?bN(e,r):typeof t=="function"?bN(e,t):e}var d0={exports:{}},f0={},h0={exports:{}},m0={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var wN;function Qz(){if(wN)return m0;wN=1;var e=iu();function t(p,x){return p===x&&(p!==0||1/p===1/x)||p!==p&&x!==x}var r=typeof Object.is=="function"?Object.is:t,n=e.useState,s=e.useEffect,a=e.useLayoutEffect,l=e.useDebugValue;function u(p,x){var v=x(),b=n({inst:{value:v,getSnapshot:x}}),w=b[0].inst,j=b[1];return a(function(){w.value=v,w.getSnapshot=x,d(w)&&j({inst:w})},[p,v,x]),s(function(){return d(w)&&j({inst:w}),p(function(){d(w)&&j({inst:w})})},[p]),l(v),v}function d(p){var x=p.getSnapshot;p=p.value;try{var v=x();return!r(p,v)}catch{return!0}}function m(p,x){return x()}var f=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?m:u;return m0.useSyncExternalStore=e.useSyncExternalStore!==void 0?e.useSyncExternalStore:f,m0}var jN;function Zz(){return jN||(jN=1,h0.exports=Qz()),h0.exports}/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var SN;function e8(){if(SN)return f0;SN=1;var e=iu(),t=Zz();function r(m,f){return m===f&&(m!==0||1/m===1/f)||m!==m&&f!==f}var n=typeof Object.is=="function"?Object.is:r,s=t.useSyncExternalStore,a=e.useRef,l=e.useEffect,u=e.useMemo,d=e.useDebugValue;return f0.useSyncExternalStoreWithSelector=function(m,f,p,x,v){var b=a(null);if(b.current===null){var w={hasValue:!1,value:null};b.current=w}else w=b.current;b=u(function(){function _($){if(!E){if(E=!0,C=$,$=x($),v!==void 0&&w.hasValue){var B=w.value;if(v(B,$))return I=B}return I=$}if(B=I,n(C,$))return B;var T=x($);return v!==void 0&&v(B,T)?(C=$,B):(C=$,I=T)}var E=!1,C,I,A=p===void 0?null:p;return[function(){return _(f())},A===null?void 0:function(){return _(A())}]},[f,p,x,v]);var j=s(m,b[0],b[1]);return l(function(){w.hasValue=!0,w.value=j},[j]),d(j),j},f0}var kN;function t8(){return kN||(kN=1,d0.exports=e8()),d0.exports}var r8=t8(),mb=g.createContext(null),n8=e=>e,Sn=()=>{var e=g.useContext(mb);return e?e.store.dispatch:n8},Oh=()=>{},s8=()=>Oh,i8=(e,t)=>e===t;function _t(e){var t=g.useContext(mb);return r8.useSyncExternalStoreWithSelector(t?t.subscription.addNestedSub:s8,t?t.store.getState:Oh,t?t.store.getState:Oh,t?e:Oh,i8)}function a8(e,t=`expected a function, instead received ${typeof e}`){if(typeof e!="function")throw new TypeError(t)}function o8(e,t=`expected an object, instead received ${typeof e}`){if(typeof e!="object")throw new TypeError(t)}function l8(e,t="expected all items to be functions, instead received the following types: "){if(!e.every(r=>typeof r=="function")){const r=e.map(n=>typeof n=="function"?`function ${n.name||"unnamed"}()`:typeof n).join(", ");throw new TypeError(`${t}[${r}]`)}}var NN=e=>Array.isArray(e)?e:[e];function c8(e){const t=Array.isArray(e[0])?e[0]:e;return l8(t,"createSelector expects all input-selectors to be functions, but received the following types: "),t}function u8(e,t){const r=[],{length:n}=e;for(let s=0;s<n;s++)r.push(e[s].apply(null,t));return r}var d8=class{constructor(e){this.value=e}deref(){return this.value}},f8=typeof WeakRef<"u"?WeakRef:d8,h8=0,_N=1;function dh(){return{s:h8,v:void 0,o:null,p:null}}function GA(e,t={}){let r=dh();const{resultEqualityCheck:n}=t;let s,a=0;function l(){var p;let u=r;const{length:d}=arguments;for(let x=0,v=d;x<v;x++){const b=arguments[x];if(typeof b=="function"||typeof b=="object"&&b!==null){let w=u.o;w===null&&(u.o=w=new WeakMap);const j=w.get(b);j===void 0?(u=dh(),w.set(b,u)):u=j}else{let w=u.p;w===null&&(u.p=w=new Map);const j=w.get(b);j===void 0?(u=dh(),w.set(b,u)):u=j}}const m=u;let f;if(u.s===_N)f=u.v;else if(f=e.apply(null,arguments),a++,n){const x=((p=s==null?void 0:s.deref)==null?void 0:p.call(s))??s;x!=null&&n(x,f)&&(f=x,a!==0&&a--),s=typeof f=="object"&&f!==null||typeof f=="function"?new f8(f):f}return m.s=_N,m.v=f,f}return l.clearCache=()=>{r=dh(),l.resetResultsCount()},l.resultsCount=()=>a,l.resetResultsCount=()=>{a=0},l}function m8(e,...t){const r=typeof e=="function"?{memoize:e,memoizeOptions:t}:e,n=(...s)=>{let a=0,l=0,u,d={},m=s.pop();typeof m=="object"&&(d=m,m=s.pop()),a8(m,`createSelector expects an output function after the inputs, but received: [${typeof m}]`);const f={...r,...d},{memoize:p,memoizeOptions:x=[],argsMemoize:v=GA,argsMemoizeOptions:b=[]}=f,w=NN(x),j=NN(b),_=c8(s),E=p(function(){return a++,m.apply(null,arguments)},...w),C=v(function(){l++;const A=u8(_,arguments);return u=E.apply(null,A),u},...j);return Object.assign(C,{resultFunc:m,memoizedResultFunc:E,dependencies:_,dependencyRecomputations:()=>l,resetDependencyRecomputations:()=>{l=0},lastResult:()=>u,recomputations:()=>a,resetRecomputations:()=>{a=0},memoize:p,argsMemoize:v})};return Object.assign(n,{withTypes:()=>n}),n}var ke=m8(GA),p8=Object.assign((e,t=ke)=>{o8(e,`createStructuredSelector expects first argument to be an object where each property is a selector, instead received a ${typeof e}`);const r=Object.keys(e),n=r.map(a=>e[a]);return t(n,(...a)=>a.reduce((l,u,d)=>(l[r[d]]=u,l),{}))},{withTypes:()=>p8}),p0={},g0={},y0={},CN;function g8(){return CN||(CN=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return typeof n=="symbol"?1:n===null?2:n===void 0?3:n!==n?4:0}const r=(n,s,a)=>{if(n!==s){const l=t(n),u=t(s);if(l===u&&l===0){if(n<s)return a==="desc"?1:-1;if(n>s)return a==="desc"?-1:1}return a==="desc"?u-l:l-u}return 0};e.compareValues=r})(y0)),y0}var x0={},v0={},EN;function YA(){return EN||(EN=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return typeof r=="symbol"||r instanceof Symbol}e.isSymbol=t})(v0)),v0}var AN;function y8(){return AN||(AN=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=YA(),r=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,n=/^\w*$/;function s(a,l){return Array.isArray(a)?!1:typeof a=="number"||typeof a=="boolean"||a==null||t.isSymbol(a)?!0:typeof a=="string"&&(n.test(a)||!r.test(a))||l!=null&&Object.hasOwn(l,a)}e.isKey=s})(x0)),x0}var PN;function x8(){return PN||(PN=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=g8(),r=y8(),n=ub();function s(a,l,u,d){if(a==null)return[];u=d?void 0:u,Array.isArray(a)||(a=Object.values(a)),Array.isArray(l)||(l=l==null?[null]:[l]),l.length===0&&(l=[null]),Array.isArray(u)||(u=u==null?[]:[u]),u=u.map(v=>String(v));const m=(v,b)=>{let w=v;for(let j=0;j<b.length&&w!=null;++j)w=w[b[j]];return w},f=(v,b)=>b==null||v==null?b:typeof v=="object"&&"key"in v?Object.hasOwn(b,v.key)?b[v.key]:m(b,v.path):typeof v=="function"?v(b):Array.isArray(v)?m(b,v):typeof b=="object"?b[v]:b,p=l.map(v=>(Array.isArray(v)&&v.length===1&&(v=v[0]),v==null||typeof v=="function"||Array.isArray(v)||r.isKey(v)?v:{key:v,path:n.toPath(v)}));return a.map(v=>({original:v,criteria:p.map(b=>f(b,v))})).slice().sort((v,b)=>{for(let w=0;w<p.length;w++){const j=t.compareValues(v.criteria[w],b.criteria[w],u[w]);if(j!==0)return j}return 0}).map(v=>v.original)}e.orderBy=s})(g0)),g0}var b0={},ON;function v8(){return ON||(ON=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r,n=1){const s=[],a=Math.floor(n),l=(u,d)=>{for(let m=0;m<u.length;m++){const f=u[m];Array.isArray(f)&&d<a?l(f,d+1):s.push(f)}};return l(r,0),s}e.flatten=t})(b0)),b0}var w0={},IN;function JA(){return IN||(IN=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=KA(),r=hb(),n=zA(),s=BA();function a(l,u,d){return n.isObject(d)&&(typeof u=="number"&&r.isArrayLike(d)&&t.isIndex(u)&&u<d.length||typeof u=="string"&&u in d)?s.eq(d[u],l):!1}e.isIterateeCall=a})(w0)),w0}var TN;function b8(){return TN||(TN=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=x8(),r=v8(),n=JA();function s(a,...l){const u=l.length;return u>1&&n.isIterateeCall(a,l[0],l[1])?l=[]:u>2&&n.isIterateeCall(l[0],l[1],l[2])&&(l=[l[0]]),t.orderBy(a,r.flatten(l),["asc"])}e.sortBy=s})(p0)),p0}var j0,DN;function w8(){return DN||(DN=1,j0=b8().sortBy),j0}var j8=w8();const sp=pa(j8);var XA=e=>e.legend.settings,S8=e=>e.legend.size,k8=e=>e.legend.payload;ke([k8,XA],(e,t)=>{var{itemSorter:r}=t,n=e.flat(1);return r?sp(n,r):n});var fh=1;function N8(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],[t,r]=g.useState({height:0,left:0,top:0,width:0}),n=g.useCallback(s=>{if(s!=null){var a=s.getBoundingClientRect(),l={height:a.height,left:a.left,top:a.top,width:a.width};(Math.abs(l.height-t.height)>fh||Math.abs(l.left-t.left)>fh||Math.abs(l.top-t.top)>fh||Math.abs(l.width-t.width)>fh)&&r({height:l.height,left:l.left,top:l.top,width:l.width})}},[t.width,t.height,t.top,t.left,...e]);return[t,n]}function gs(e){return`Minified Redux error #${e}; visit https://redux.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var _8=typeof Symbol=="function"&&Symbol.observable||"@@observable",$N=_8,S0=()=>Math.random().toString(36).substring(7).split("").join("."),C8={INIT:`@@redux/INIT${S0()}`,REPLACE:`@@redux/REPLACE${S0()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${S0()}`},nm=C8;function pb(e){if(typeof e!="object"||e===null)return!1;let t=e;for(;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t||Object.getPrototypeOf(e)===null}function QA(e,t,r){if(typeof e!="function")throw new Error(gs(2));if(typeof t=="function"&&typeof r=="function"||typeof r=="function"&&typeof arguments[3]=="function")throw new Error(gs(0));if(typeof t=="function"&&typeof r>"u"&&(r=t,t=void 0),typeof r<"u"){if(typeof r!="function")throw new Error(gs(1));return r(QA)(e,t)}let n=e,s=t,a=new Map,l=a,u=0,d=!1;function m(){l===a&&(l=new Map,a.forEach((j,_)=>{l.set(_,j)}))}function f(){if(d)throw new Error(gs(3));return s}function p(j){if(typeof j!="function")throw new Error(gs(4));if(d)throw new Error(gs(5));let _=!0;m();const E=u++;return l.set(E,j),function(){if(_){if(d)throw new Error(gs(6));_=!1,m(),l.delete(E),a=null}}}function x(j){if(!pb(j))throw new Error(gs(7));if(typeof j.type>"u")throw new Error(gs(8));if(typeof j.type!="string")throw new Error(gs(17));if(d)throw new Error(gs(9));try{d=!0,s=n(s,j)}finally{d=!1}return(a=l).forEach(E=>{E()}),j}function v(j){if(typeof j!="function")throw new Error(gs(10));n=j,x({type:nm.REPLACE})}function b(){const j=p;return{subscribe(_){if(typeof _!="object"||_===null)throw new Error(gs(11));function E(){const I=_;I.next&&I.next(f())}return E(),{unsubscribe:j(E)}},[$N](){return this}}}return x({type:nm.INIT}),{dispatch:x,subscribe:p,getState:f,replaceReducer:v,[$N]:b}}function E8(e){Object.keys(e).forEach(t=>{const r=e[t];if(typeof r(void 0,{type:nm.INIT})>"u")throw new Error(gs(12));if(typeof r(void 0,{type:nm.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(gs(13))})}function ZA(e){const t=Object.keys(e),r={};for(let a=0;a<t.length;a++){const l=t[a];typeof e[l]=="function"&&(r[l]=e[l])}const n=Object.keys(r);let s;try{E8(r)}catch(a){s=a}return function(l={},u){if(s)throw s;let d=!1;const m={};for(let f=0;f<n.length;f++){const p=n[f],x=r[p],v=l[p],b=x(v,u);if(typeof b>"u")throw u&&u.type,new Error(gs(14));m[p]=b,d=d||b!==v}return d=d||n.length!==Object.keys(l).length,d?m:l}}function sm(...e){return e.length===0?t=>t:e.length===1?e[0]:e.reduce((t,r)=>(...n)=>t(r(...n)))}function A8(...e){return t=>(r,n)=>{const s=t(r,n);let a=()=>{throw new Error(gs(15))};const l={getState:s.getState,dispatch:(d,...m)=>a(d,...m)},u=e.map(d=>d(l));return a=sm(...u)(s.dispatch),{...s,dispatch:a}}}function eP(e){return pb(e)&&"type"in e&&typeof e.type=="string"}var tP=Symbol.for("immer-nothing"),RN=Symbol.for("immer-draftable"),wi=Symbol.for("immer-state");function ua(e,...t){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var Od=Object.getPrototypeOf;function Bl(e){return!!e&&!!e[wi]}function oo(e){var t;return e?rP(e)||Array.isArray(e)||!!e[RN]||!!((t=e.constructor)!=null&&t[RN])||Yd(e)||ap(e):!1}var P8=Object.prototype.constructor.toString(),MN=new WeakMap;function rP(e){if(!e||typeof e!="object")return!1;const t=Object.getPrototypeOf(e);if(t===null||t===Object.prototype)return!0;const r=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;if(r===Object)return!0;if(typeof r!="function")return!1;let n=MN.get(r);return n===void 0&&(n=Function.toString.call(r),MN.set(r,n)),n===P8}function im(e,t,r=!0){ip(e)===0?(r?Reflect.ownKeys(e):Object.keys(e)).forEach(s=>{t(s,e[s],e)}):e.forEach((n,s)=>t(s,n,e))}function ip(e){const t=e[wi];return t?t.type_:Array.isArray(e)?1:Yd(e)?2:ap(e)?3:0}function Vx(e,t){return ip(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function nP(e,t,r){const n=ip(e);n===2?e.set(t,r):n===3?e.add(r):e[t]=r}function O8(e,t){return e===t?e!==0||1/e===1/t:e!==e&&t!==t}function Yd(e){return e instanceof Map}function ap(e){return e instanceof Set}function kl(e){return e.copy_||e.base_}function qx(e,t){if(Yd(e))return new Map(e);if(ap(e))return new Set(e);if(Array.isArray(e))return Array.prototype.slice.call(e);const r=rP(e);if(t===!0||t==="class_only"&&!r){const n=Object.getOwnPropertyDescriptors(e);delete n[wi];let s=Reflect.ownKeys(n);for(let a=0;a<s.length;a++){const l=s[a],u=n[l];u.writable===!1&&(u.writable=!0,u.configurable=!0),(u.get||u.set)&&(n[l]={configurable:!0,writable:!0,enumerable:u.enumerable,value:e[l]})}return Object.create(Od(e),n)}else{const n=Od(e);if(n!==null&&r)return{...e};const s=Object.create(n);return Object.assign(s,e)}}function gb(e,t=!1){return op(e)||Bl(e)||!oo(e)||(ip(e)>1&&Object.defineProperties(e,{set:hh,add:hh,clear:hh,delete:hh}),Object.freeze(e),t&&Object.values(e).forEach(r=>gb(r,!0))),e}function I8(){ua(2)}var hh={value:I8};function op(e){return e===null||typeof e!="object"?!0:Object.isFrozen(e)}var T8={};function Wl(e){const t=T8[e];return t||ua(0,e),t}var Id;function sP(){return Id}function D8(e,t){return{drafts_:[],parent_:e,immer_:t,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function FN(e,t){t&&(Wl("Patches"),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function Hx(e){Kx(e),e.drafts_.forEach($8),e.drafts_=null}function Kx(e){e===Id&&(Id=e.parent_)}function LN(e){return Id=D8(Id,e)}function $8(e){const t=e[wi];t.type_===0||t.type_===1?t.revoke_():t.revoked_=!0}function zN(e,t){t.unfinalizedDrafts_=t.drafts_.length;const r=t.drafts_[0];return e!==void 0&&e!==r?(r[wi].modified_&&(Hx(t),ua(4)),oo(e)&&(e=am(t,e),t.parent_||om(t,e)),t.patches_&&Wl("Patches").generateReplacementPatches_(r[wi].base_,e,t.patches_,t.inversePatches_)):e=am(t,r,[]),Hx(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==tP?e:void 0}function am(e,t,r){if(op(t))return t;const n=e.immer_.shouldUseStrictIteration(),s=t[wi];if(!s)return im(t,(a,l)=>UN(e,s,t,a,l,r),n),t;if(s.scope_!==e)return t;if(!s.modified_)return om(e,s.base_,!0),s.base_;if(!s.finalized_){s.finalized_=!0,s.scope_.unfinalizedDrafts_--;const a=s.copy_;let l=a,u=!1;s.type_===3&&(l=new Set(a),a.clear(),u=!0),im(l,(d,m)=>UN(e,s,a,d,m,r,u),n),om(e,a,!1),r&&e.patches_&&Wl("Patches").generatePatches_(s,r,e.patches_,e.inversePatches_)}return s.copy_}function UN(e,t,r,n,s,a,l){if(s==null||typeof s!="object"&&!l)return;const u=op(s);if(!(u&&!l)){if(Bl(s)){const d=a&&t&&t.type_!==3&&!Vx(t.assigned_,n)?a.concat(n):void 0,m=am(e,s,d);if(nP(r,n,m),Bl(m))e.canAutoFreeze_=!1;else return}else l&&r.add(s);if(oo(s)&&!u){if(!e.immer_.autoFreeze_&&e.unfinalizedDrafts_<1||t&&t.base_&&t.base_[n]===s&&u)return;am(e,s),(!t||!t.scope_.parent_)&&typeof n!="symbol"&&(Yd(r)?r.has(n):Object.prototype.propertyIsEnumerable.call(r,n))&&om(e,s)}}}function om(e,t,r=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&gb(t,r)}function R8(e,t){const r=Array.isArray(e),n={type_:r?1:0,scope_:t?t.scope_:sP(),modified_:!1,finalized_:!1,assigned_:{},parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1};let s=n,a=yb;r&&(s=[n],a=Td);const{revoke:l,proxy:u}=Proxy.revocable(s,a);return n.draft_=u,n.revoke_=l,u}var yb={get(e,t){if(t===wi)return e;const r=kl(e);if(!Vx(r,t))return M8(e,r,t);const n=r[t];return e.finalized_||!oo(n)?n:n===k0(e.base_,t)?(N0(e),e.copy_[t]=Yx(n,e)):n},has(e,t){return t in kl(e)},ownKeys(e){return Reflect.ownKeys(kl(e))},set(e,t,r){const n=iP(kl(e),t);if(n!=null&&n.set)return n.set.call(e.draft_,r),!0;if(!e.modified_){const s=k0(kl(e),t),a=s==null?void 0:s[wi];if(a&&a.base_===r)return e.copy_[t]=r,e.assigned_[t]=!1,!0;if(O8(r,s)&&(r!==void 0||Vx(e.base_,t)))return!0;N0(e),Gx(e)}return e.copy_[t]===r&&(r!==void 0||t in e.copy_)||Number.isNaN(r)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=r,e.assigned_[t]=!0),!0},deleteProperty(e,t){return k0(e.base_,t)!==void 0||t in e.base_?(e.assigned_[t]=!1,N0(e),Gx(e)):delete e.assigned_[t],e.copy_&&delete e.copy_[t],!0},getOwnPropertyDescriptor(e,t){const r=kl(e),n=Reflect.getOwnPropertyDescriptor(r,t);return n&&{writable:!0,configurable:e.type_!==1||t!=="length",enumerable:n.enumerable,value:r[t]}},defineProperty(){ua(11)},getPrototypeOf(e){return Od(e.base_)},setPrototypeOf(){ua(12)}},Td={};im(yb,(e,t)=>{Td[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}});Td.deleteProperty=function(e,t){return Td.set.call(this,e,t,void 0)};Td.set=function(e,t,r){return yb.set.call(this,e[0],t,r,e[0])};function k0(e,t){const r=e[wi];return(r?kl(r):e)[t]}function M8(e,t,r){var s;const n=iP(t,r);return n?"value"in n?n.value:(s=n.get)==null?void 0:s.call(e.draft_):void 0}function iP(e,t){if(!(t in e))return;let r=Od(e);for(;r;){const n=Object.getOwnPropertyDescriptor(r,t);if(n)return n;r=Od(r)}}function Gx(e){e.modified_||(e.modified_=!0,e.parent_&&Gx(e.parent_))}function N0(e){e.copy_||(e.copy_=qx(e.base_,e.scope_.immer_.useStrictShallowCopy_))}var F8=class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.useStrictIteration_=!0,this.produce=(t,r,n)=>{if(typeof t=="function"&&typeof r!="function"){const a=r;r=t;const l=this;return function(d=a,...m){return l.produce(d,f=>r.call(this,f,...m))}}typeof r!="function"&&ua(6),n!==void 0&&typeof n!="function"&&ua(7);let s;if(oo(t)){const a=LN(this),l=Yx(t,void 0);let u=!0;try{s=r(l),u=!1}finally{u?Hx(a):Kx(a)}return FN(a,n),zN(s,a)}else if(!t||typeof t!="object"){if(s=r(t),s===void 0&&(s=t),s===tP&&(s=void 0),this.autoFreeze_&&gb(s,!0),n){const a=[],l=[];Wl("Patches").generateReplacementPatches_(t,s,a,l),n(a,l)}return s}else ua(1,t)},this.produceWithPatches=(t,r)=>{if(typeof t=="function")return(l,...u)=>this.produceWithPatches(l,d=>t(d,...u));let n,s;return[this.produce(t,r,(l,u)=>{n=l,s=u}),n,s]},typeof(e==null?void 0:e.autoFreeze)=="boolean"&&this.setAutoFreeze(e.autoFreeze),typeof(e==null?void 0:e.useStrictShallowCopy)=="boolean"&&this.setUseStrictShallowCopy(e.useStrictShallowCopy),typeof(e==null?void 0:e.useStrictIteration)=="boolean"&&this.setUseStrictIteration(e.useStrictIteration)}createDraft(e){oo(e)||ua(8),Bl(e)&&(e=to(e));const t=LN(this),r=Yx(e,void 0);return r[wi].isManual_=!0,Kx(t),r}finishDraft(e,t){const r=e&&e[wi];(!r||!r.isManual_)&&ua(9);const{scope_:n}=r;return FN(n,t),zN(void 0,n)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}setUseStrictIteration(e){this.useStrictIteration_=e}shouldUseStrictIteration(){return this.useStrictIteration_}applyPatches(e,t){let r;for(r=t.length-1;r>=0;r--){const s=t[r];if(s.path.length===0&&s.op==="replace"){e=s.value;break}}r>-1&&(t=t.slice(r+1));const n=Wl("Patches").applyPatches_;return Bl(e)?n(e,t):this.produce(e,s=>n(s,t))}};function Yx(e,t){const r=Yd(e)?Wl("MapSet").proxyMap_(e,t):ap(e)?Wl("MapSet").proxySet_(e,t):R8(e,t);return(t?t.scope_:sP()).drafts_.push(r),r}function to(e){return Bl(e)||ua(10,e),aP(e)}function aP(e){if(!oo(e)||op(e))return e;const t=e[wi];let r,n=!0;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,r=qx(e,t.scope_.immer_.useStrictShallowCopy_),n=t.scope_.immer_.shouldUseStrictIteration()}else r=qx(e,!0);return im(r,(s,a)=>{nP(r,s,aP(a))},n),t&&(t.finalized_=!1),r}var Jx=new F8,oP=Jx.produce,L8=Jx.setUseStrictIteration.bind(Jx);function lP(e){return({dispatch:r,getState:n})=>s=>a=>typeof a=="function"?a(r,n,e):s(a)}var z8=lP(),U8=lP,B8=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?sm:sm.apply(null,arguments)};function Li(e,t){function r(...n){if(t){let s=t(...n);if(!s)throw new Error(bi(0));return{type:e,payload:s.payload,..."meta"in s&&{meta:s.meta},..."error"in s&&{error:s.error}}}return{type:e,payload:n[0]}}return r.toString=()=>`${e}`,r.type=e,r.match=n=>eP(n)&&n.type===e,r}var cP=class hd extends Array{constructor(...t){super(...t),Object.setPrototypeOf(this,hd.prototype)}static get[Symbol.species](){return hd}concat(...t){return super.concat.apply(this,t)}prepend(...t){return t.length===1&&Array.isArray(t[0])?new hd(...t[0].concat(this)):new hd(...t.concat(this))}};function BN(e){return oo(e)?oP(e,()=>{}):e}function mh(e,t,r){return e.has(t)?e.get(t):e.set(t,r(t)).get(t)}function W8(e){return typeof e=="boolean"}var V8=()=>function(t){const{thunk:r=!0,immutableCheck:n=!0,serializableCheck:s=!0,actionCreatorCheck:a=!0}=t??{};let l=new cP;return r&&(W8(r)?l.push(z8):l.push(U8(r.extraArgument))),l},uP="RTK_autoBatch",zn=()=>e=>({payload:e,meta:{[uP]:!0}}),WN=e=>t=>{setTimeout(t,e)},dP=(e={type:"raf"})=>t=>(...r)=>{const n=t(...r);let s=!0,a=!1,l=!1;const u=new Set,d=e.type==="tick"?queueMicrotask:e.type==="raf"?typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:WN(10):e.type==="callback"?e.queueNotification:WN(e.timeout),m=()=>{l=!1,a&&(a=!1,u.forEach(f=>f()))};return Object.assign({},n,{subscribe(f){const p=()=>s&&f(),x=n.subscribe(p);return u.add(f),()=>{x(),u.delete(f)}},dispatch(f){var p;try{return s=!((p=f==null?void 0:f.meta)!=null&&p[uP]),a=!s,a&&(l||(l=!0,d(m))),n.dispatch(f)}finally{s=!0}}})},q8=e=>function(r){const{autoBatch:n=!0}=r??{};let s=new cP(e);return n&&s.push(dP(typeof n=="object"?n:void 0)),s};function H8(e){const t=V8(),{reducer:r=void 0,middleware:n,devTools:s=!0,preloadedState:a=void 0,enhancers:l=void 0}=e||{};let u;if(typeof r=="function")u=r;else if(pb(r))u=ZA(r);else throw new Error(bi(1));let d;typeof n=="function"?d=n(t):d=t();let m=sm;s&&(m=B8({trace:!1,...typeof s=="object"&&s}));const f=A8(...d),p=q8(f);let x=typeof l=="function"?l(p):p();const v=m(...x);return QA(u,a,v)}function fP(e){const t={},r=[];let n;const s={addCase(a,l){const u=typeof a=="string"?a:a.type;if(!u)throw new Error(bi(28));if(u in t)throw new Error(bi(29));return t[u]=l,s},addAsyncThunk(a,l){return l.pending&&(t[a.pending.type]=l.pending),l.rejected&&(t[a.rejected.type]=l.rejected),l.fulfilled&&(t[a.fulfilled.type]=l.fulfilled),l.settled&&r.push({matcher:a.settled,reducer:l.settled}),s},addMatcher(a,l){return r.push({matcher:a,reducer:l}),s},addDefaultCase(a){return n=a,s}};return e(s),[t,r,n]}L8(!1);function K8(e){return typeof e=="function"}function G8(e,t){let[r,n,s]=fP(t),a;if(K8(e))a=()=>BN(e());else{const u=BN(e);a=()=>u}function l(u=a(),d){let m=[r[d.type],...n.filter(({matcher:f})=>f(d)).map(({reducer:f})=>f)];return m.filter(f=>!!f).length===0&&(m=[s]),m.reduce((f,p)=>{if(p)if(Bl(f)){const v=p(f,d);return v===void 0?f:v}else{if(oo(f))return oP(f,x=>p(x,d));{const x=p(f,d);if(x===void 0){if(f===null)return f;throw Error("A case reducer on a non-draftable value must not return undefined")}return x}}return f},u)}return l.getInitialState=a,l}var Y8="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",J8=(e=21)=>{let t="",r=e;for(;r--;)t+=Y8[Math.random()*64|0];return t},X8=Symbol.for("rtk-slice-createasyncthunk");function Q8(e,t){return`${e}/${t}`}function Z8({creators:e}={}){var r;const t=(r=e==null?void 0:e.asyncThunk)==null?void 0:r[X8];return function(s){const{name:a,reducerPath:l=a}=s;if(!a)throw new Error(bi(11));const u=(typeof s.reducers=="function"?s.reducers(tU()):s.reducers)||{},d=Object.keys(u),m={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},f={addCase(I,A){const $=typeof I=="string"?I:I.type;if(!$)throw new Error(bi(12));if($ in m.sliceCaseReducersByType)throw new Error(bi(13));return m.sliceCaseReducersByType[$]=A,f},addMatcher(I,A){return m.sliceMatchers.push({matcher:I,reducer:A}),f},exposeAction(I,A){return m.actionCreators[I]=A,f},exposeCaseReducer(I,A){return m.sliceCaseReducersByName[I]=A,f}};d.forEach(I=>{const A=u[I],$={reducerName:I,type:Q8(a,I),createNotation:typeof s.reducers=="function"};nU(A)?iU($,A,f,t):rU($,A,f)});function p(){const[I={},A=[],$=void 0]=typeof s.extraReducers=="function"?fP(s.extraReducers):[s.extraReducers],B={...I,...m.sliceCaseReducersByType};return G8(s.initialState,T=>{for(let K in B)T.addCase(K,B[K]);for(let K of m.sliceMatchers)T.addMatcher(K.matcher,K.reducer);for(let K of A)T.addMatcher(K.matcher,K.reducer);$&&T.addDefaultCase($)})}const x=I=>I,v=new Map,b=new WeakMap;let w;function j(I,A){return w||(w=p()),w(I,A)}function _(){return w||(w=p()),w.getInitialState()}function E(I,A=!1){function $(T){let K=T[I];return typeof K>"u"&&A&&(K=mh(b,$,_)),K}function B(T=x){const K=mh(v,A,()=>new WeakMap);return mh(K,T,()=>{const Q={};for(const[se,G]of Object.entries(s.selectors??{}))Q[se]=eU(G,T,()=>mh(b,T,_),A);return Q})}return{reducerPath:I,getSelectors:B,get selectors(){return B($)},selectSlice:$}}const C={name:a,reducer:j,actions:m.actionCreators,caseReducers:m.sliceCaseReducersByName,getInitialState:_,...E(l),injectInto(I,{reducerPath:A,...$}={}){const B=A??l;return I.inject({reducerPath:B,reducer:j},$),{...C,...E(B,!0)}}};return C}}function eU(e,t,r,n){function s(a,...l){let u=t(a);return typeof u>"u"&&n&&(u=r()),e(u,...l)}return s.unwrapped=e,s}var ni=Z8();function tU(){function e(t,r){return{_reducerDefinitionType:"asyncThunk",payloadCreator:t,...r}}return e.withTypes=()=>e,{reducer(t){return Object.assign({[t.name](...r){return t(...r)}}[t.name],{_reducerDefinitionType:"reducer"})},preparedReducer(t,r){return{_reducerDefinitionType:"reducerWithPrepare",prepare:t,reducer:r}},asyncThunk:e}}function rU({type:e,reducerName:t,createNotation:r},n,s){let a,l;if("reducer"in n){if(r&&!sU(n))throw new Error(bi(17));a=n.reducer,l=n.prepare}else a=n;s.addCase(e,a).exposeCaseReducer(t,a).exposeAction(t,l?Li(e,l):Li(e))}function nU(e){return e._reducerDefinitionType==="asyncThunk"}function sU(e){return e._reducerDefinitionType==="reducerWithPrepare"}function iU({type:e,reducerName:t},r,n,s){if(!s)throw new Error(bi(18));const{payloadCreator:a,fulfilled:l,pending:u,rejected:d,settled:m,options:f}=r,p=s(e,a,f);n.exposeAction(t,p),l&&n.addCase(p.fulfilled,l),u&&n.addCase(p.pending,u),d&&n.addCase(p.rejected,d),m&&n.addMatcher(p.settled,m),n.exposeCaseReducer(t,{fulfilled:l||ph,pending:u||ph,rejected:d||ph,settled:m||ph})}function ph(){}var aU="task",hP="listener",mP="completed",xb="cancelled",oU=`task-${xb}`,lU=`task-${mP}`,Xx=`${hP}-${xb}`,cU=`${hP}-${mP}`,lp=class{constructor(e){iy(this,"name","TaskAbortError");iy(this,"message");this.code=e,this.message=`${aU} ${xb} (reason: ${e})`}},vb=(e,t)=>{if(typeof e!="function")throw new TypeError(bi(32))},lm=()=>{},pP=(e,t=lm)=>(e.catch(t),e),gP=(e,t)=>(e.addEventListener("abort",t,{once:!0}),()=>e.removeEventListener("abort",t)),Ml=(e,t)=>{const r=e.signal;r.aborted||("reason"in r||Object.defineProperty(r,"reason",{enumerable:!0,value:t,configurable:!0,writable:!0}),e.abort(t))},Fl=e=>{if(e.aborted){const{reason:t}=e;throw new lp(t)}};function yP(e,t){let r=lm;return new Promise((n,s)=>{const a=()=>s(new lp(e.reason));if(e.aborted){a();return}r=gP(e,a),t.finally(()=>r()).then(n,s)}).finally(()=>{r=lm})}var uU=async(e,t)=>{try{return await Promise.resolve(),{status:"ok",value:await e()}}catch(r){return{status:r instanceof lp?"cancelled":"rejected",error:r}}finally{t==null||t()}},cm=e=>t=>pP(yP(e,t).then(r=>(Fl(e),r))),xP=e=>{const t=cm(e);return r=>t(new Promise(n=>setTimeout(n,r)))},{assign:Hc}=Object,VN={},cp="listenerMiddleware",dU=(e,t)=>{const r=n=>gP(e,()=>Ml(n,e.reason));return(n,s)=>{vb(n);const a=new AbortController;r(a);const l=uU(async()=>{Fl(e),Fl(a.signal);const u=await n({pause:cm(a.signal),delay:xP(a.signal),signal:a.signal});return Fl(a.signal),u},()=>Ml(a,lU));return s!=null&&s.autoJoin&&t.push(l.catch(lm)),{result:cm(e)(l),cancel(){Ml(a,oU)}}}},fU=(e,t)=>{const r=async(n,s)=>{Fl(t);let a=()=>{};const u=[new Promise((d,m)=>{let f=e({predicate:n,effect:(p,x)=>{x.unsubscribe(),d([p,x.getState(),x.getOriginalState()])}});a=()=>{f(),m()}})];s!=null&&u.push(new Promise(d=>setTimeout(d,s,null)));try{const d=await yP(t,Promise.race(u));return Fl(t),d}finally{a()}};return(n,s)=>pP(r(n,s))},vP=e=>{let{type:t,actionCreator:r,matcher:n,predicate:s,effect:a}=e;if(t)s=Li(t).match;else if(r)t=r.type,s=r.match;else if(n)s=n;else if(!s)throw new Error(bi(21));return vb(a),{predicate:s,type:t,effect:a}},bP=Hc(e=>{const{type:t,predicate:r,effect:n}=vP(e);return{id:J8(),effect:n,type:t,predicate:r,pending:new Set,unsubscribe:()=>{throw new Error(bi(22))}}},{withTypes:()=>bP}),qN=(e,t)=>{const{type:r,effect:n,predicate:s}=vP(t);return Array.from(e.values()).find(a=>(typeof r=="string"?a.type===r:a.predicate===s)&&a.effect===n)},Qx=e=>{e.pending.forEach(t=>{Ml(t,Xx)})},hU=(e,t)=>()=>{for(const r of t.keys())Qx(r);e.clear()},HN=(e,t,r)=>{try{e(t,r)}catch(n){setTimeout(()=>{throw n},0)}},wP=Hc(Li(`${cp}/add`),{withTypes:()=>wP}),mU=Li(`${cp}/removeAll`),jP=Hc(Li(`${cp}/remove`),{withTypes:()=>jP}),pU=(...e)=>{console.error(`${cp}/error`,...e)},Jd=(e={})=>{const t=new Map,r=new Map,n=v=>{const b=r.get(v)??0;r.set(v,b+1)},s=v=>{const b=r.get(v)??1;b===1?r.delete(v):r.set(v,b-1)},{extra:a,onError:l=pU}=e;vb(l);const u=v=>(v.unsubscribe=()=>t.delete(v.id),t.set(v.id,v),b=>{v.unsubscribe(),b!=null&&b.cancelActive&&Qx(v)}),d=v=>{const b=qN(t,v)??bP(v);return u(b)};Hc(d,{withTypes:()=>d});const m=v=>{const b=qN(t,v);return b&&(b.unsubscribe(),v.cancelActive&&Qx(b)),!!b};Hc(m,{withTypes:()=>m});const f=async(v,b,w,j)=>{const _=new AbortController,E=fU(d,_.signal),C=[];try{v.pending.add(_),n(v),await Promise.resolve(v.effect(b,Hc({},w,{getOriginalState:j,condition:(I,A)=>E(I,A).then(Boolean),take:E,delay:xP(_.signal),pause:cm(_.signal),extra:a,signal:_.signal,fork:dU(_.signal,C),unsubscribe:v.unsubscribe,subscribe:()=>{t.set(v.id,v)},cancelActiveListeners:()=>{v.pending.forEach((I,A,$)=>{I!==_&&(Ml(I,Xx),$.delete(I))})},cancel:()=>{Ml(_,Xx),v.pending.delete(_)},throwIfCancelled:()=>{Fl(_.signal)}})))}catch(I){I instanceof lp||HN(l,I,{raisedBy:"effect"})}finally{await Promise.all(C),Ml(_,cU),s(v),v.pending.delete(_)}},p=hU(t,r);return{middleware:v=>b=>w=>{if(!eP(w))return b(w);if(wP.match(w))return d(w.payload);if(mU.match(w)){p();return}if(jP.match(w))return m(w.payload);let j=v.getState();const _=()=>{if(j===VN)throw new Error(bi(23));return j};let E;try{if(E=b(w),t.size>0){const C=v.getState(),I=Array.from(t.values());for(const A of I){let $=!1;try{$=A.predicate(w,C,j)}catch(B){$=!1,HN(l,B,{raisedBy:"predicate"})}$&&f(A,w,v,_)}}}finally{j=VN}return E},startListening:d,stopListening:m,clearListeners:p}};function bi(e){return`Minified Redux Toolkit error #${e}; visit https://redux-toolkit.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var gU={layoutType:"horizontal",width:0,height:0,margin:{top:5,right:5,bottom:5,left:5},scale:1},SP=ni({name:"chartLayout",initialState:gU,reducers:{setLayout(e,t){e.layoutType=t.payload},setChartSize(e,t){e.width=t.payload.width,e.height=t.payload.height},setMargin(e,t){var r,n,s,a;e.margin.top=(r=t.payload.top)!==null&&r!==void 0?r:0,e.margin.right=(n=t.payload.right)!==null&&n!==void 0?n:0,e.margin.bottom=(s=t.payload.bottom)!==null&&s!==void 0?s:0,e.margin.left=(a=t.payload.left)!==null&&a!==void 0?a:0},setScale(e,t){e.scale=t.payload}}}),{setMargin:yU,setLayout:xU,setChartSize:vU,setScale:bU}=SP.actions,wU=SP.reducer;function kP(e,t,r){return Array.isArray(e)&&e&&t+r!==0?e.slice(t,r+1):e}function KN(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Bc(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?KN(Object(r),!0).forEach(function(n){jU(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):KN(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function jU(e,t,r){return(t=SU(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function SU(e){var t=kU(e,"string");return typeof t=="symbol"?t:t+""}function kU(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Ls(e,t,r){return is(e)||is(t)?r:Pa(t)?Xc(e,t,r):typeof t=="function"?t(e):r}var NU=(e,t,r)=>{if(t&&r){var{width:n,height:s}=r,{align:a,verticalAlign:l,layout:u}=t;if((u==="vertical"||u==="horizontal"&&l==="middle")&&a!=="center"&&Tt(e[a]))return Bc(Bc({},e),{},{[a]:e[a]+(n||0)});if((u==="horizontal"||u==="vertical"&&a==="center")&&l!=="middle"&&Tt(e[l]))return Bc(Bc({},e),{},{[l]:e[l]+(s||0)})}return e},Xl=(e,t)=>e==="horizontal"&&t==="xAxis"||e==="vertical"&&t==="yAxis"||e==="centric"&&t==="angleAxis"||e==="radial"&&t==="radiusAxis",GN=1e-4,_U=e=>{var t=e.domain();if(!(!t||t.length<=2)){var r=t.length,n=e.range(),s=Math.min(n[0],n[1])-GN,a=Math.max(n[0],n[1])+GN,l=e(t[0]),u=e(t[r-1]);(l<s||l>a||u<s||u>a)&&e.domain([t[0],t[r-1]])}},CU=(e,t)=>{if(!t||t.length!==2||!Tt(t[0])||!Tt(t[1]))return e;var r=Math.min(t[0],t[1]),n=Math.max(t[0],t[1]),s=[e[0],e[1]];return(!Tt(e[0])||e[0]<r)&&(s[0]=r),(!Tt(e[1])||e[1]>n)&&(s[1]=n),s[0]>n&&(s[0]=n),s[1]<r&&(s[1]=r),s},EU=e=>{var t=e.length;if(!(t<=0))for(var r=0,n=e[0].length;r<n;++r)for(var s=0,a=0,l=0;l<t;++l){var u=Aa(e[l][r][1])?e[l][r][0]:e[l][r][1];u>=0?(e[l][r][0]=s,e[l][r][1]=s+u,s=e[l][r][1]):(e[l][r][0]=a,e[l][r][1]=a+u,a=e[l][r][1])}},AU=e=>{var t=e.length;if(!(t<=0))for(var r=0,n=e[0].length;r<n;++r)for(var s=0,a=0;a<t;++a){var l=Aa(e[a][r][1])?e[a][r][0]:e[a][r][1];l>=0?(e[a][r][0]=s,e[a][r][1]=s+l,s=e[a][r][1]):(e[a][r][0]=0,e[a][r][1]=0)}},PU={sign:EU,expand:az,none:Jc,silhouette:oz,wiggle:lz,positive:AU},OU=(e,t,r)=>{var n=PU[r],s=iz().keys(t).value((a,l)=>Number(Ls(a,l,0))).order(Bx).offset(n);return s(e)};function IU(e){return e==null?void 0:String(e)}var YN=e=>{var{axis:t,ticks:r,offset:n,bandSize:s,entry:a,index:l}=e;if(t.type==="category")return r[l]?r[l].coordinate+n:null;var u=Ls(a,t.dataKey,t.scale.domain()[l]);return is(u)?null:t.scale(u)-s/2+n},TU=e=>{var{numericAxis:t}=e,r=t.scale.domain();if(t.type==="number"){var n=Math.min(r[0],r[1]),s=Math.max(r[0],r[1]);return n<=0&&s>=0?0:s<0?s:n}return r[0]},DU=e=>{var t=e.flat(2).filter(Tt);return[Math.min(...t),Math.max(...t)]},$U=e=>[e[0]===1/0?0:e[0],e[1]===-1/0?0:e[1]],RU=(e,t,r)=>{if(e!=null)return $U(Object.keys(e).reduce((n,s)=>{var a=e[s],{stackedData:l}=a,u=l.reduce((d,m)=>{var f=kP(m,t,r),p=DU(f);return[Math.min(d[0],p[0]),Math.max(d[1],p[1])]},[1/0,-1/0]);return[Math.min(u[0],n[0]),Math.max(u[1],n[1])]},[1/0,-1/0]))},JN=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,XN=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,um=(e,t,r)=>{if(e&&e.scale&&e.scale.bandwidth){var n=e.scale.bandwidth();if(!r||n>0)return n}if(e&&t&&t.length>=2){for(var s=sp(t,f=>f.coordinate),a=1/0,l=1,u=s.length;l<u;l++){var d=s[l],m=s[l-1];a=Math.min((d.coordinate||0)-(m.coordinate||0),a)}return a===1/0?0:a}return r?void 0:0};function QN(e){var{tooltipEntrySettings:t,dataKey:r,payload:n,value:s,name:a}=e;return Bc(Bc({},t),{},{dataKey:r,payload:n,value:s,name:a})}function NP(e,t){if(e)return String(e);if(typeof t=="string")return t}var MU=(e,t)=>{if(t==="horizontal")return e.chartX;if(t==="vertical")return e.chartY},FU=(e,t)=>t==="centric"?e.angle:e.radius,po=e=>e.layout.width,go=e=>e.layout.height,LU=e=>e.layout.scale,_P=e=>e.layout.margin,up=ke(e=>e.cartesianAxis.xAxis,e=>Object.values(e)),dp=ke(e=>e.cartesianAxis.yAxis,e=>Object.values(e)),zU="data-recharts-item-index",UU="data-recharts-item-data-key",Xd=60;function ZN(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function gh(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?ZN(Object(r),!0).forEach(function(n){BU(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ZN(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function BU(e,t,r){return(t=WU(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function WU(e){var t=VU(e,"string");return typeof t=="symbol"?t:t+""}function VU(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var qU=e=>e.brush.height;function HU(e){var t=dp(e);return t.reduce((r,n)=>{if(n.orientation==="left"&&!n.mirror&&!n.hide){var s=typeof n.width=="number"?n.width:Xd;return r+s}return r},0)}function KU(e){var t=dp(e);return t.reduce((r,n)=>{if(n.orientation==="right"&&!n.mirror&&!n.hide){var s=typeof n.width=="number"?n.width:Xd;return r+s}return r},0)}function GU(e){var t=up(e);return t.reduce((r,n)=>n.orientation==="top"&&!n.mirror&&!n.hide?r+n.height:r,0)}function YU(e){var t=up(e);return t.reduce((r,n)=>n.orientation==="bottom"&&!n.mirror&&!n.hide?r+n.height:r,0)}var as=ke([po,go,_P,qU,HU,KU,GU,YU,XA,S8],(e,t,r,n,s,a,l,u,d,m)=>{var f={left:(r.left||0)+s,right:(r.right||0)+a},p={top:(r.top||0)+l,bottom:(r.bottom||0)+u},x=gh(gh({},p),f),v=x.bottom;x.bottom+=n,x=NU(x,d,m);var b=e-x.left-x.right,w=t-x.top-x.bottom;return gh(gh({brushBottom:v},x),{},{width:Math.max(b,0),height:Math.max(w,0)})}),JU=ke(as,e=>({x:e.left,y:e.top,width:e.width,height:e.height})),bb=ke(po,go,(e,t)=>({x:0,y:0,width:e,height:t})),XU=g.createContext(null),Si=()=>g.useContext(XU)!=null,fp=e=>e.brush,hp=ke([fp,as,_P],(e,t,r)=>({height:e.height,x:Tt(e.x)?e.x:t.left,y:Tt(e.y)?e.y:t.top+t.height+t.brushBottom-((r==null?void 0:r.bottom)||0),width:Tt(e.width)?e.width:t.width})),_0={},C0={},E0={},e2;function QU(){return e2||(e2=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r,n,{signal:s,edges:a}={}){let l,u=null;const d=a!=null&&a.includes("leading"),m=a==null||a.includes("trailing"),f=()=>{u!==null&&(r.apply(l,u),l=void 0,u=null)},p=()=>{m&&f(),w()};let x=null;const v=()=>{x!=null&&clearTimeout(x),x=setTimeout(()=>{x=null,p()},n)},b=()=>{x!==null&&(clearTimeout(x),x=null)},w=()=>{b(),l=void 0,u=null},j=()=>{f()},_=function(...E){if(s!=null&&s.aborted)return;l=this,u=E;const C=x==null;v(),d&&C&&f()};return _.schedule=v,_.cancel=w,_.flush=j,s==null||s.addEventListener("abort",w,{once:!0}),_}e.debounce=t})(E0)),E0}var t2;function ZU(){return t2||(t2=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=QU();function r(n,s=0,a={}){typeof a!="object"&&(a={});const{leading:l=!1,trailing:u=!0,maxWait:d}=a,m=Array(2);l&&(m[0]="leading"),u&&(m[1]="trailing");let f,p=null;const x=t.debounce(function(...w){f=n.apply(this,w),p=null},s,{edges:m}),v=function(...w){return d!=null&&(p===null&&(p=Date.now()),Date.now()-p>=d)?(f=n.apply(this,w),p=Date.now(),x.cancel(),x.schedule(),f):(x.apply(this,w),f)},b=()=>(x.flush(),f);return v.cancel=x.cancel,v.flush=b,v}e.debounce=r})(C0)),C0}var r2;function eB(){return r2||(r2=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=ZU();function r(n,s=0,a={}){const{leading:l=!0,trailing:u=!0}=a;return t.debounce(n,s,{leading:l,maxWait:s,trailing:u})}e.throttle=r})(_0)),_0}var A0,n2;function tB(){return n2||(n2=1,A0=eB().throttle),A0}var rB=tB();const nB=pa(rB);var s2=function(t,r){for(var n=arguments.length,s=new Array(n>2?n-2:0),a=2;a<n;a++)s[a-2]=arguments[a]},CP=(e,t,r)=>{var{width:n="100%",height:s="100%",aspect:a,maxHeight:l}=r,u=ao(n)?e:Number(n),d=ao(s)?t:Number(s);return a&&a>0&&(u?d=u/a:d&&(u=d*a),l&&d!=null&&d>l&&(d=l)),{calculatedWidth:u,calculatedHeight:d}},sB={width:0,height:0,overflow:"visible"},iB={width:0,overflowX:"visible"},aB={height:0,overflowY:"visible"},oB={},lB=e=>{var{width:t,height:r}=e,n=ao(t),s=ao(r);return n&&s?sB:n?iB:s?aB:oB};function cB(e){var{width:t,height:r,aspect:n}=e,s=t,a=r;return s===void 0&&a===void 0?(s="100%",a="100%"):s===void 0?s=n&&n>0?void 0:"100%":a===void 0&&(a=n&&n>0?void 0:"100%"),{width:s,height:a}}function jn(e){return Number.isFinite(e)}function Qo(e){return typeof e=="number"&&e>0&&Number.isFinite(e)}function Zx(){return Zx=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Zx.apply(null,arguments)}function i2(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function a2(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?i2(Object(r),!0).forEach(function(n){uB(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):i2(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function uB(e,t,r){return(t=dB(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function dB(e){var t=fB(e,"string");return typeof t=="symbol"?t:t+""}function fB(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var EP=g.createContext({width:-1,height:-1});function hB(e){return Qo(e.width)&&Qo(e.height)}function AP(e){var{children:t,width:r,height:n}=e,s=g.useMemo(()=>({width:r,height:n}),[r,n]);return hB(s)?g.createElement(EP.Provider,{value:s},t):null}var wb=()=>g.useContext(EP),mB=g.forwardRef((e,t)=>{var{aspect:r,initialDimension:n={width:-1,height:-1},width:s,height:a,minWidth:l=0,minHeight:u,maxHeight:d,children:m,debounce:f=0,id:p,className:x,onResize:v,style:b={}}=e,w=g.useRef(null),j=g.useRef();j.current=v,g.useImperativeHandle(t,()=>w.current);var[_,E]=g.useState({containerWidth:n.width,containerHeight:n.height}),C=g.useCallback((T,K)=>{E(Q=>{var se=Math.round(T),G=Math.round(K);return Q.containerWidth===se&&Q.containerHeight===G?Q:{containerWidth:se,containerHeight:G}})},[]);g.useEffect(()=>{if(w.current==null||typeof ResizeObserver>"u")return mu;var T=G=>{var le,{width:F,height:Y}=G[0].contentRect;C(F,Y),(le=j.current)===null||le===void 0||le.call(j,F,Y)};f>0&&(T=nB(T,f,{trailing:!0,leading:!1}));var K=new ResizeObserver(T),{width:Q,height:se}=w.current.getBoundingClientRect();return C(Q,se),K.observe(w.current),()=>{K.disconnect()}},[C,f]);var{containerWidth:I,containerHeight:A}=_;s2(!r||r>0,"The aspect(%s) must be greater than zero.",r);var{calculatedWidth:$,calculatedHeight:B}=CP(I,A,{width:s,height:a,aspect:r,maxHeight:d});return s2($!=null&&$>0||B!=null&&B>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,$,B,s,a,l,u,r),g.createElement("div",{id:p?"".concat(p):void 0,className:Vr("recharts-responsive-container",x),style:a2(a2({},b),{},{width:s,height:a,minWidth:l,minHeight:u,maxHeight:d}),ref:w},g.createElement("div",{style:lB({width:s,height:a})},g.createElement(AP,{width:$,height:B},m)))}),pB=g.forwardRef((e,t)=>{var r=wb();if(Qo(r.width)&&Qo(r.height))return e.children;var{width:n,height:s}=cB({width:e.width,height:e.height,aspect:e.aspect}),{calculatedWidth:a,calculatedHeight:l}=CP(void 0,void 0,{width:n,height:s,aspect:e.aspect,maxHeight:e.maxHeight});return Tt(a)&&Tt(l)?g.createElement(AP,{width:a,height:l},e.children):g.createElement(mB,Zx({},e,{width:n,height:s,ref:t}))});function PP(e){if(e)return{x:e.x,y:e.y,upperWidth:"upperWidth"in e?e.upperWidth:e.width,lowerWidth:"lowerWidth"in e?e.lowerWidth:e.width,width:e.width,height:e.height}}var mp=()=>{var e,t=Si(),r=_t(JU),n=_t(hp),s=(e=_t(fp))===null||e===void 0?void 0:e.padding;return!t||!n||!s?r:{width:n.width-s.left-s.right,height:n.height-s.top-s.bottom,x:s.left,y:s.top}},gB={top:0,bottom:0,left:0,right:0,width:0,height:0,brushBottom:0},yB=()=>{var e;return(e=_t(as))!==null&&e!==void 0?e:gB},xB=()=>_t(po),vB=()=>_t(go),Nr=e=>e.layout.layoutType,pp=()=>_t(Nr),bB=()=>{var e=pp();return e!==void 0},gp=e=>{var t=Sn(),r=Si(),{width:n,height:s}=e,a=wb(),l=n,u=s;return a&&(l=a.width>0?a.width:n,u=a.height>0?a.height:s),g.useEffect(()=>{!r&&Qo(l)&&Qo(u)&&t(vU({width:l,height:u}))},[t,r,l,u]),null},wB={settings:{layout:"horizontal",align:"center",verticalAlign:"middle",itemSorter:"value"},size:{width:0,height:0},payload:[]},OP=ni({name:"legend",initialState:wB,reducers:{setLegendSize(e,t){e.size.width=t.payload.width,e.size.height=t.payload.height},setLegendSettings(e,t){e.settings.align=t.payload.align,e.settings.layout=t.payload.layout,e.settings.verticalAlign=t.payload.verticalAlign,e.settings.itemSorter=t.payload.itemSorter},addLegendPayload:{reducer(e,t){e.payload.push(t.payload)},prepare:zn()},removeLegendPayload:{reducer(e,t){var r=to(e).payload.indexOf(t.payload);r>-1&&e.payload.splice(r,1)},prepare:zn()}}}),{setLegendSize:Aee,setLegendSettings:Pee,addLegendPayload:jB,removeLegendPayload:SB}=OP.actions,kB=OP.reducer;function ev(){return ev=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},ev.apply(null,arguments)}function o2(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function P0(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?o2(Object(r),!0).forEach(function(n){NB(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):o2(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function NB(e,t,r){return(t=_B(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function _B(e){var t=CB(e,"string");return typeof t=="symbol"?t:t+""}function CB(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function EB(e){return Array.isArray(e)&&Pa(e[0])&&Pa(e[1])?e.join(" ~ "):e}var AB=e=>{var{separator:t=" : ",contentStyle:r={},itemStyle:n={},labelStyle:s={},payload:a,formatter:l,itemSorter:u,wrapperClassName:d,labelClassName:m,label:f,labelFormatter:p,accessibilityLayer:x=!1}=e,v=()=>{if(a&&a.length){var A={padding:0,margin:0},$=(u?sp(a,u):a).map((B,T)=>{if(B.type==="none")return null;var K=B.formatter||l||EB,{value:Q,name:se}=B,G=Q,le=se;if(K){var F=K(Q,se,B,T,a);if(Array.isArray(F))[G,le]=F;else if(F!=null)G=F;else return null}var Y=P0({display:"block",paddingTop:4,paddingBottom:4,color:B.color||"#000"},n);return g.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(T),style:Y},Pa(le)?g.createElement("span",{className:"recharts-tooltip-item-name"},le):null,Pa(le)?g.createElement("span",{className:"recharts-tooltip-item-separator"},t):null,g.createElement("span",{className:"recharts-tooltip-item-value"},G),g.createElement("span",{className:"recharts-tooltip-item-unit"},B.unit||""))});return g.createElement("ul",{className:"recharts-tooltip-item-list",style:A},$)}return null},b=P0({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},r),w=P0({margin:0},s),j=!is(f),_=j?f:"",E=Vr("recharts-default-tooltip",d),C=Vr("recharts-tooltip-label",m);j&&p&&a!==void 0&&a!==null&&(_=p(f,a));var I=x?{role:"status","aria-live":"assertive"}:{};return g.createElement("div",ev({className:E,style:b},I),g.createElement("p",{className:C,style:w},g.isValidElement(_)?_:"".concat(_)),v())},ed="recharts-tooltip-wrapper",PB={visibility:"hidden"};function OB(e){var{coordinate:t,translateX:r,translateY:n}=e;return Vr(ed,{["".concat(ed,"-right")]:Tt(r)&&t&&Tt(t.x)&&r>=t.x,["".concat(ed,"-left")]:Tt(r)&&t&&Tt(t.x)&&r<t.x,["".concat(ed,"-bottom")]:Tt(n)&&t&&Tt(t.y)&&n>=t.y,["".concat(ed,"-top")]:Tt(n)&&t&&Tt(t.y)&&n<t.y})}function l2(e){var{allowEscapeViewBox:t,coordinate:r,key:n,offsetTopLeft:s,position:a,reverseDirection:l,tooltipDimension:u,viewBox:d,viewBoxDimension:m}=e;if(a&&Tt(a[n]))return a[n];var f=r[n]-u-(s>0?s:0),p=r[n]+s;if(t[n])return l[n]?f:p;var x=d[n];if(x==null)return 0;if(l[n]){var v=f,b=x;return v<b?Math.max(p,x):Math.max(f,x)}if(m==null)return 0;var w=p+u,j=x+m;return w>j?Math.max(f,x):Math.max(p,x)}function IB(e){var{translateX:t,translateY:r,useTranslate3d:n}=e;return{transform:n?"translate3d(".concat(t,"px, ").concat(r,"px, 0)"):"translate(".concat(t,"px, ").concat(r,"px)")}}function TB(e){var{allowEscapeViewBox:t,coordinate:r,offsetTopLeft:n,position:s,reverseDirection:a,tooltipBox:l,useTranslate3d:u,viewBox:d}=e,m,f,p;return l.height>0&&l.width>0&&r?(f=l2({allowEscapeViewBox:t,coordinate:r,key:"x",offsetTopLeft:n,position:s,reverseDirection:a,tooltipDimension:l.width,viewBox:d,viewBoxDimension:d.width}),p=l2({allowEscapeViewBox:t,coordinate:r,key:"y",offsetTopLeft:n,position:s,reverseDirection:a,tooltipDimension:l.height,viewBox:d,viewBoxDimension:d.height}),m=IB({translateX:f,translateY:p,useTranslate3d:u})):m=PB,{cssProperties:m,cssClasses:OB({translateX:f,translateY:p,coordinate:r})}}function c2(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function yh(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?c2(Object(r),!0).forEach(function(n){tv(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):c2(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function tv(e,t,r){return(t=DB(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function DB(e){var t=$B(e,"string");return typeof t=="symbol"?t:t+""}function $B(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class RB extends g.PureComponent{constructor(){super(...arguments),tv(this,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0}}),tv(this,"handleKeyDown",t=>{if(t.key==="Escape"){var r,n,s,a;this.setState({dismissed:!0,dismissedAtCoordinate:{x:(r=(n=this.props.coordinate)===null||n===void 0?void 0:n.x)!==null&&r!==void 0?r:0,y:(s=(a=this.props.coordinate)===null||a===void 0?void 0:a.y)!==null&&s!==void 0?s:0}})}})}componentDidMount(){document.addEventListener("keydown",this.handleKeyDown)}componentWillUnmount(){document.removeEventListener("keydown",this.handleKeyDown)}componentDidUpdate(){var t,r;this.state.dismissed&&(((t=this.props.coordinate)===null||t===void 0?void 0:t.x)!==this.state.dismissedAtCoordinate.x||((r=this.props.coordinate)===null||r===void 0?void 0:r.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}render(){var{active:t,allowEscapeViewBox:r,animationDuration:n,animationEasing:s,children:a,coordinate:l,hasPayload:u,isAnimationActive:d,offset:m,position:f,reverseDirection:p,useTranslate3d:x,viewBox:v,wrapperStyle:b,lastBoundingBox:w,innerRef:j,hasPortalFromProps:_}=this.props,{cssClasses:E,cssProperties:C}=TB({allowEscapeViewBox:r,coordinate:l,offsetTopLeft:m,position:f,reverseDirection:p,tooltipBox:{height:w.height,width:w.width},useTranslate3d:x,viewBox:v}),I=_?{}:yh(yh({transition:d&&t?"transform ".concat(n,"ms ").concat(s):void 0},C),{},{pointerEvents:"none",visibility:!this.state.dismissed&&t&&u?"visible":"hidden",position:"absolute",top:0,left:0}),A=yh(yh({},I),{},{visibility:!this.state.dismissed&&t&&u?"visible":"hidden"},b);return g.createElement("div",{xmlns:"http://www.w3.org/1999/xhtml",tabIndex:-1,className:E,style:A,ref:j},a)}}var MB=()=>!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout),pu={devToolsEnabled:!1,isSsr:MB()},IP=()=>{var e;return(e=_t(t=>t.rootProps.accessibilityLayer))!==null&&e!==void 0?e:!0};function rv(){return rv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},rv.apply(null,arguments)}function u2(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function d2(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?u2(Object(r),!0).forEach(function(n){FB(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):u2(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function FB(e,t,r){return(t=LB(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function LB(e){var t=zB(e,"string");return typeof t=="symbol"?t:t+""}function zB(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var f2={curveBasisClosed:GL,curveBasisOpen:YL,curveBasis:KL,curveBumpX:TL,curveBumpY:DL,curveLinearClosed:JL,curveLinear:rp,curveMonotoneX:XL,curveMonotoneY:QL,curveNatural:ZL,curveStep:ez,curveStepAfter:rz,curveStepBefore:tz},dm=e=>jn(e.x)&&jn(e.y),h2=e=>e.base!=null&&dm(e.base)&&dm(e),td=e=>e.x,rd=e=>e.y,UB=(e,t)=>{if(typeof e=="function")return e;var r="curve".concat(Gd(e));return(r==="curveMonotone"||r==="curveBump")&&t?f2["".concat(r).concat(t==="vertical"?"Y":"X")]:f2[r]||rp},BB=e=>{var{type:t="linear",points:r=[],baseLine:n,layout:s,connectNulls:a=!1}=e,l=UB(t,s),u=a?r.filter(dm):r,d;if(Array.isArray(n)){var m=r.map((v,b)=>d2(d2({},v),{},{base:n[b]}));s==="vertical"?d=uh().y(rd).x1(td).x0(v=>v.base.x):d=uh().x(td).y1(rd).y0(v=>v.base.y);var f=d.defined(h2).curve(l),p=a?m.filter(h2):m;return f(p)}s==="vertical"&&Tt(n)?d=uh().y(rd).x1(td).x0(n):Tt(n)?d=uh().x(td).y1(rd).y0(n):d=SA().x(td).y(rd);var x=d.defined(dm).curve(l);return x(u)},TP=e=>{var{className:t,points:r,path:n,pathRef:s}=e;if((!r||!r.length)&&!n)return null;var a=r&&r.length?BB(e):n;return g.createElement("path",rv({},Xo(e),_z(e),{className:Vr("recharts-curve",t),d:a===null?void 0:a,ref:s}))},WB=["x","y","top","left","width","height","className"];function nv(){return nv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},nv.apply(null,arguments)}function m2(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function VB(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?m2(Object(r),!0).forEach(function(n){qB(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):m2(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function qB(e,t,r){return(t=HB(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function HB(e){var t=KB(e,"string");return typeof t=="symbol"?t:t+""}function KB(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function GB(e,t){if(e==null)return{};var r,n,s=YB(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function YB(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var JB=(e,t,r,n,s,a)=>"M".concat(e,",").concat(s,"v").concat(n,"M").concat(a,",").concat(t,"h").concat(r),XB=e=>{var{x:t=0,y:r=0,top:n=0,left:s=0,width:a=0,height:l=0,className:u}=e,d=GB(e,WB),m=VB({x:t,y:r,top:n,left:s,width:a,height:l},d);return!Tt(t)||!Tt(r)||!Tt(a)||!Tt(l)||!Tt(n)||!Tt(s)?null:g.createElement("path",nv({},Fi(m),{className:Vr("recharts-cross",u),d:JB(t,r,a,l,n,s)}))};function QB(e,t,r,n){var s=n/2;return{stroke:"none",fill:"#ccc",x:e==="horizontal"?t.x-s:r.left+.5,y:e==="horizontal"?r.top+.5:t.y-s,width:e==="horizontal"?n:r.width-1,height:e==="horizontal"?r.height-1:n}}function p2(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function g2(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?p2(Object(r),!0).forEach(function(n){ZB(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):p2(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function ZB(e,t,r){return(t=e7(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function e7(e){var t=t7(e,"string");return typeof t=="symbol"?t:t+""}function t7(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var r7=e=>e.replace(/([A-Z])/g,t=>"-".concat(t.toLowerCase())),DP=(e,t,r)=>e.map(n=>"".concat(r7(n)," ").concat(t,"ms ").concat(r)).join(","),n7=(e,t)=>[Object.keys(e),Object.keys(t)].reduce((r,n)=>r.filter(s=>n.includes(s))),Dd=(e,t)=>Object.keys(t).reduce((r,n)=>g2(g2({},r),{},{[n]:e(n,t[n])}),{});function y2(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Fn(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?y2(Object(r),!0).forEach(function(n){s7(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):y2(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function s7(e,t,r){return(t=i7(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function i7(e){var t=a7(e,"string");return typeof t=="symbol"?t:t+""}function a7(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var fm=(e,t,r)=>e+(t-e)*r,sv=e=>{var{from:t,to:r}=e;return t!==r},$P=(e,t,r)=>{var n=Dd((s,a)=>{if(sv(a)){var[l,u]=e(a.from,a.to,a.velocity);return Fn(Fn({},a),{},{from:l,velocity:u})}return a},t);return r<1?Dd((s,a)=>sv(a)?Fn(Fn({},a),{},{velocity:fm(a.velocity,n[s].velocity,r),from:fm(a.from,n[s].from,r)}):a,t):$P(e,n,r-1)};function o7(e,t,r,n,s,a){var l,u=n.reduce((x,v)=>Fn(Fn({},x),{},{[v]:{from:e[v],velocity:0,to:t[v]}}),{}),d=()=>Dd((x,v)=>v.from,u),m=()=>!Object.values(u).filter(sv).length,f=null,p=x=>{l||(l=x);var v=x-l,b=v/r.dt;u=$P(r,u,b),s(Fn(Fn(Fn({},e),t),d())),l=x,m()||(f=a.setTimeout(p))};return()=>(f=a.setTimeout(p),()=>{var x;(x=f)===null||x===void 0||x()})}function l7(e,t,r,n,s,a,l){var u=null,d=s.reduce((p,x)=>Fn(Fn({},p),{},{[x]:[e[x],t[x]]}),{}),m,f=p=>{m||(m=p);var x=(p-m)/n,v=Dd((w,j)=>fm(...j,r(x)),d);if(a(Fn(Fn(Fn({},e),t),v)),x<1)u=l.setTimeout(f);else{var b=Dd((w,j)=>fm(...j,r(1)),d);a(Fn(Fn(Fn({},e),t),b))}};return()=>(u=l.setTimeout(f),()=>{var p;(p=u)===null||p===void 0||p()})}const c7=(e,t,r,n,s,a)=>{var l=n7(e,t);return r==null?()=>(s(Fn(Fn({},e),t)),()=>{}):r.isStepper===!0?o7(e,t,r,l,s,a):l7(e,t,r,n,l,s,a)};var hm=1e-4,RP=(e,t)=>[0,3*e,3*t-6*e,3*e-3*t+1],MP=(e,t)=>e.map((r,n)=>r*t**n).reduce((r,n)=>r+n),x2=(e,t)=>r=>{var n=RP(e,t);return MP(n,r)},u7=(e,t)=>r=>{var n=RP(e,t),s=[...n.map((a,l)=>a*l).slice(1),0];return MP(s,r)},d7=function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];if(r.length===1)switch(r[0]){case"linear":return[0,0,1,1];case"ease":return[.25,.1,.25,1];case"ease-in":return[.42,0,1,1];case"ease-out":return[.42,0,.58,1];case"ease-in-out":return[0,0,.58,1];default:{var s,a=r[0].split("(");if(a[0]==="cubic-bezier"&&((s=a[1])===null||s===void 0?void 0:s.split(")")[0].split(",").length)===4){var l=a[1].split(")")[0].split(",").map(u=>parseFloat(u));return[l[0],l[1],l[2],l[3]]}}}return r.length===4?r:[0,0,1,1]},f7=(e,t,r,n)=>{var s=x2(e,r),a=x2(t,n),l=u7(e,r),u=m=>m>1?1:m<0?0:m,d=m=>{for(var f=m>1?1:m,p=f,x=0;x<8;++x){var v=s(p)-f,b=l(p);if(Math.abs(v-f)<hm||b<hm)return a(p);p=u(p-v/b)}return a(p)};return d.isStepper=!1,d},v2=function(){return f7(...d7(...arguments))},h7=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},{stiff:r=100,damping:n=8,dt:s=17}=t,a=(l,u,d)=>{var m=-(l-u)*r,f=d*n,p=d+(m-f)*s/1e3,x=d*s/1e3+l;return Math.abs(x-u)<hm&&Math.abs(p)<hm?[u,0]:[x,p]};return a.isStepper=!0,a.dt=s,a},m7=e=>{if(typeof e=="string")switch(e){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return v2(e);case"spring":return h7();default:if(e.split("(")[0]==="cubic-bezier")return v2(e)}return typeof e=="function"?e:null};function p7(e){var t,r=()=>null,n=!1,s=null,a=l=>{if(!n){if(Array.isArray(l)){if(!l.length)return;var u=l,[d,...m]=u;if(typeof d=="number"){s=e.setTimeout(a.bind(null,m),d);return}a(d),s=e.setTimeout(a.bind(null,m));return}typeof l=="string"&&(t=l,r(t)),typeof l=="object"&&(t=l,r(t)),typeof l=="function"&&l()}};return{stop:()=>{n=!0},start:l=>{n=!1,s&&(s(),s=null),a(l)},subscribe:l=>(r=l,()=>{r=()=>null}),getTimeoutController:()=>e}}class g7{setTimeout(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=performance.now(),s=null,a=l=>{l-n>=r?t(l):typeof requestAnimationFrame=="function"&&(s=requestAnimationFrame(a))};return s=requestAnimationFrame(a),()=>{s!=null&&cancelAnimationFrame(s)}}}function y7(){return p7(new g7)}var x7=g.createContext(y7);function v7(e,t){var r=g.useContext(x7);return g.useMemo(()=>t??r(e),[e,t,r])}var b7={begin:0,duration:1e3,easing:"ease",isActive:!0,canBegin:!0,onAnimationEnd:()=>{},onAnimationStart:()=>{}},b2={t:0},O0={t:1};function jb(e){var t=Bi(e,b7),{isActive:r,canBegin:n,duration:s,easing:a,begin:l,onAnimationEnd:u,onAnimationStart:d,children:m}=t,f=v7(t.animationId,t.animationManager),[p,x]=g.useState(r?b2:O0),v=g.useRef(null);return g.useEffect(()=>{r||x(O0)},[r]),g.useEffect(()=>{if(!r||!n)return mu;var b=c7(b2,O0,m7(a),s,x,f.getTimeoutController()),w=()=>{v.current=b()};return f.start([d,l,w,s,u]),()=>{f.stop(),v.current&&v.current(),u()}},[r,n,s,a,l,d,u,f]),m(p.t)}function Sb(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"animation-",r=g.useRef(Pd(t)),n=g.useRef(e);return n.current!==e&&(r.current=Pd(t),n.current=e),r.current}var w7=["radius"],j7=["radius"];function w2(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function j2(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?w2(Object(r),!0).forEach(function(n){S7(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):w2(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function S7(e,t,r){return(t=k7(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function k7(e){var t=N7(e,"string");return typeof t=="symbol"?t:t+""}function N7(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function mm(){return mm=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},mm.apply(null,arguments)}function S2(e,t){if(e==null)return{};var r,n,s=_7(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function _7(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var k2=(e,t,r,n,s)=>{var a=Math.min(Math.abs(r)/2,Math.abs(n)/2),l=n>=0?1:-1,u=r>=0?1:-1,d=n>=0&&r>=0||n<0&&r<0?1:0,m;if(a>0&&s instanceof Array){for(var f=[0,0,0,0],p=0,x=4;p<x;p++)f[p]=s[p]>a?a:s[p];m="M".concat(e,",").concat(t+l*f[0]),f[0]>0&&(m+="A ".concat(f[0],",").concat(f[0],",0,0,").concat(d,",").concat(e+u*f[0],",").concat(t)),m+="L ".concat(e+r-u*f[1],",").concat(t),f[1]>0&&(m+="A ".concat(f[1],",").concat(f[1],",0,0,").concat(d,`,
        `).concat(e+r,",").concat(t+l*f[1])),m+="L ".concat(e+r,",").concat(t+n-l*f[2]),f[2]>0&&(m+="A ".concat(f[2],",").concat(f[2],",0,0,").concat(d,`,
        `).concat(e+r-u*f[2],",").concat(t+n)),m+="L ".concat(e+u*f[3],",").concat(t+n),f[3]>0&&(m+="A ".concat(f[3],",").concat(f[3],",0,0,").concat(d,`,
        `).concat(e,",").concat(t+n-l*f[3])),m+="Z"}else if(a>0&&s===+s&&s>0){var v=Math.min(a,s);m="M ".concat(e,",").concat(t+l*v,`
            A `).concat(v,",").concat(v,",0,0,").concat(d,",").concat(e+u*v,",").concat(t,`
            L `).concat(e+r-u*v,",").concat(t,`
            A `).concat(v,",").concat(v,",0,0,").concat(d,",").concat(e+r,",").concat(t+l*v,`
            L `).concat(e+r,",").concat(t+n-l*v,`
            A `).concat(v,",").concat(v,",0,0,").concat(d,",").concat(e+r-u*v,",").concat(t+n,`
            L `).concat(e+u*v,",").concat(t+n,`
            A `).concat(v,",").concat(v,",0,0,").concat(d,",").concat(e,",").concat(t+n-l*v," Z")}else m="M ".concat(e,",").concat(t," h ").concat(r," v ").concat(n," h ").concat(-r," Z");return m},N2={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},FP=e=>{var t=Bi(e,N2),r=g.useRef(null),[n,s]=g.useState(-1);g.useEffect(()=>{if(r.current&&r.current.getTotalLength)try{var V=r.current.getTotalLength();V&&s(V)}catch{}},[]);var{x:a,y:l,width:u,height:d,radius:m,className:f}=t,{animationEasing:p,animationDuration:x,animationBegin:v,isAnimationActive:b,isUpdateAnimationActive:w}=t,j=g.useRef(u),_=g.useRef(d),E=g.useRef(a),C=g.useRef(l),I=g.useMemo(()=>({x:a,y:l,width:u,height:d,radius:m}),[a,l,u,d,m]),A=Sb(I,"rectangle-");if(a!==+a||l!==+l||u!==+u||d!==+d||u===0||d===0)return null;var $=Vr("recharts-rectangle",f);if(!w){var B=Fi(t),{radius:T}=B,K=S2(B,w7);return g.createElement("path",mm({},K,{radius:typeof m=="number"?m:void 0,className:$,d:k2(a,l,u,d,m)}))}var Q=j.current,se=_.current,G=E.current,le=C.current,F="0px ".concat(n===-1?1:n,"px"),Y="".concat(n,"px 0px"),J=DP(["strokeDasharray"],x,typeof p=="string"?p:N2.animationEasing);return g.createElement(jb,{animationId:A,key:A,canBegin:n>0,duration:x,easing:p,isActive:w,begin:v},V=>{var H=ys(Q,u,V),re=ys(se,d,V),ie=ys(G,a,V),M=ys(le,l,V);r.current&&(j.current=H,_.current=re,E.current=ie,C.current=M);var Z;b?V>0?Z={transition:J,strokeDasharray:Y}:Z={strokeDasharray:F}:Z={strokeDasharray:Y};var fe=Fi(t),{radius:ye}=fe,Le=S2(fe,j7);return g.createElement("path",mm({},Le,{radius:typeof m=="number"?m:void 0,className:$,d:k2(ie,M,H,re,m),ref:r,style:j2(j2({},Z),t.style)}))})};function _2(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function C2(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?_2(Object(r),!0).forEach(function(n){C7(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):_2(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function C7(e,t,r){return(t=E7(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function E7(e){var t=A7(e,"string");return typeof t=="symbol"?t:t+""}function A7(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var pm=Math.PI/180,P7=e=>e*180/Math.PI,vs=(e,t,r,n)=>({x:e+Math.cos(-pm*n)*r,y:t+Math.sin(-pm*n)*r}),O7=function(t,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{top:0,right:0,bottom:0,left:0};return Math.min(Math.abs(t-(n.left||0)-(n.right||0)),Math.abs(r-(n.top||0)-(n.bottom||0)))/2},I7=(e,t)=>{var{x:r,y:n}=e,{x:s,y:a}=t;return Math.sqrt((r-s)**2+(n-a)**2)},T7=(e,t)=>{var{x:r,y:n}=e,{cx:s,cy:a}=t,l=I7({x:r,y:n},{x:s,y:a});if(l<=0)return{radius:l,angle:0};var u=(r-s)/l,d=Math.acos(u);return n>a&&(d=2*Math.PI-d),{radius:l,angle:P7(d),angleInRadian:d}},D7=e=>{var{startAngle:t,endAngle:r}=e,n=Math.floor(t/360),s=Math.floor(r/360),a=Math.min(n,s);return{startAngle:t-a*360,endAngle:r-a*360}},$7=(e,t)=>{var{startAngle:r,endAngle:n}=t,s=Math.floor(r/360),a=Math.floor(n/360),l=Math.min(s,a);return e+l*360},R7=(e,t)=>{var{chartX:r,chartY:n}=e,{radius:s,angle:a}=T7({x:r,y:n},t),{innerRadius:l,outerRadius:u}=t;if(s<l||s>u||s===0)return null;var{startAngle:d,endAngle:m}=D7(t),f=a,p;if(d<=m){for(;f>m;)f-=360;for(;f<d;)f+=360;p=f>=d&&f<=m}else{for(;f>d;)f-=360;for(;f<m;)f+=360;p=f>=m&&f<=d}return p?C2(C2({},t),{},{radius:s,angle:$7(f,t)}):null};function LP(e){var{cx:t,cy:r,radius:n,startAngle:s,endAngle:a}=e,l=vs(t,r,n,s),u=vs(t,r,n,a);return{points:[l,u],cx:t,cy:r,radius:n,startAngle:s,endAngle:a}}function iv(){return iv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},iv.apply(null,arguments)}var M7=(e,t)=>{var r=xi(t-e),n=Math.min(Math.abs(t-e),359.999);return r*n},xh=e=>{var{cx:t,cy:r,radius:n,angle:s,sign:a,isExternal:l,cornerRadius:u,cornerIsExternal:d}=e,m=u*(l?1:-1)+n,f=Math.asin(u/m)/pm,p=d?s:s+a*f,x=vs(t,r,m,p),v=vs(t,r,n,p),b=d?s-a*f:s,w=vs(t,r,m*Math.cos(f*pm),b);return{center:x,circleTangency:v,lineTangency:w,theta:f}},zP=e=>{var{cx:t,cy:r,innerRadius:n,outerRadius:s,startAngle:a,endAngle:l}=e,u=M7(a,l),d=a+u,m=vs(t,r,s,a),f=vs(t,r,s,d),p="M ".concat(m.x,",").concat(m.y,`
    A `).concat(s,",").concat(s,`,0,
    `).concat(+(Math.abs(u)>180),",").concat(+(a>d),`,
    `).concat(f.x,",").concat(f.y,`
  `);if(n>0){var x=vs(t,r,n,a),v=vs(t,r,n,d);p+="L ".concat(v.x,",").concat(v.y,`
            A `).concat(n,",").concat(n,`,0,
            `).concat(+(Math.abs(u)>180),",").concat(+(a<=d),`,
            `).concat(x.x,",").concat(x.y," Z")}else p+="L ".concat(t,",").concat(r," Z");return p},F7=e=>{var{cx:t,cy:r,innerRadius:n,outerRadius:s,cornerRadius:a,forceCornerRadius:l,cornerIsExternal:u,startAngle:d,endAngle:m}=e,f=xi(m-d),{circleTangency:p,lineTangency:x,theta:v}=xh({cx:t,cy:r,radius:s,angle:d,sign:f,cornerRadius:a,cornerIsExternal:u}),{circleTangency:b,lineTangency:w,theta:j}=xh({cx:t,cy:r,radius:s,angle:m,sign:-f,cornerRadius:a,cornerIsExternal:u}),_=u?Math.abs(d-m):Math.abs(d-m)-v-j;if(_<0)return l?"M ".concat(x.x,",").concat(x.y,`
        a`).concat(a,",").concat(a,",0,0,1,").concat(a*2,`,0
        a`).concat(a,",").concat(a,",0,0,1,").concat(-a*2,`,0
      `):zP({cx:t,cy:r,innerRadius:n,outerRadius:s,startAngle:d,endAngle:m});var E="M ".concat(x.x,",").concat(x.y,`
    A`).concat(a,",").concat(a,",0,0,").concat(+(f<0),",").concat(p.x,",").concat(p.y,`
    A`).concat(s,",").concat(s,",0,").concat(+(_>180),",").concat(+(f<0),",").concat(b.x,",").concat(b.y,`
    A`).concat(a,",").concat(a,",0,0,").concat(+(f<0),",").concat(w.x,",").concat(w.y,`
  `);if(n>0){var{circleTangency:C,lineTangency:I,theta:A}=xh({cx:t,cy:r,radius:n,angle:d,sign:f,isExternal:!0,cornerRadius:a,cornerIsExternal:u}),{circleTangency:$,lineTangency:B,theta:T}=xh({cx:t,cy:r,radius:n,angle:m,sign:-f,isExternal:!0,cornerRadius:a,cornerIsExternal:u}),K=u?Math.abs(d-m):Math.abs(d-m)-A-T;if(K<0&&a===0)return"".concat(E,"L").concat(t,",").concat(r,"Z");E+="L".concat(B.x,",").concat(B.y,`
      A`).concat(a,",").concat(a,",0,0,").concat(+(f<0),",").concat($.x,",").concat($.y,`
      A`).concat(n,",").concat(n,",0,").concat(+(K>180),",").concat(+(f>0),",").concat(C.x,",").concat(C.y,`
      A`).concat(a,",").concat(a,",0,0,").concat(+(f<0),",").concat(I.x,",").concat(I.y,"Z")}else E+="L".concat(t,",").concat(r,"Z");return E},L7={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},UP=e=>{var t=Bi(e,L7),{cx:r,cy:n,innerRadius:s,outerRadius:a,cornerRadius:l,forceCornerRadius:u,cornerIsExternal:d,startAngle:m,endAngle:f,className:p}=t;if(a<s||m===f)return null;var x=Vr("recharts-sector",p),v=a-s,b=ma(l,v,0,!0),w;return b>0&&Math.abs(m-f)<360?w=F7({cx:r,cy:n,innerRadius:s,outerRadius:a,cornerRadius:Math.min(b,v/2),forceCornerRadius:u,cornerIsExternal:d,startAngle:m,endAngle:f}):w=zP({cx:r,cy:n,innerRadius:s,outerRadius:a,startAngle:m,endAngle:f}),g.createElement("path",iv({},Fi(t),{className:x,d:w}))};function z7(e,t,r){if(e==="horizontal")return[{x:t.x,y:r.top},{x:t.x,y:r.top+r.height}];if(e==="vertical")return[{x:r.left,y:t.y},{x:r.left+r.width,y:t.y}];if(FA(t)){if(e==="centric"){var{cx:n,cy:s,innerRadius:a,outerRadius:l,angle:u}=t,d=vs(n,s,a,u),m=vs(n,s,l,u);return[{x:d.x,y:d.y},{x:m.x,y:m.y}]}return LP(t)}}var I0={},T0={},D0={},E2;function U7(){return E2||(E2=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=YA();function r(n){return t.isSymbol(n)?NaN:Number(n)}e.toNumber=r})(D0)),D0}var A2;function B7(){return A2||(A2=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=U7();function r(n){return n?(n=t.toNumber(n),n===1/0||n===-1/0?(n<0?-1:1)*Number.MAX_VALUE:n===n?n:0):n===0?n:0}e.toFinite=r})(T0)),T0}var P2;function W7(){return P2||(P2=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=JA(),r=B7();function n(s,a,l){l&&typeof l!="number"&&t.isIterateeCall(s,a,l)&&(a=l=void 0),s=r.toFinite(s),a===void 0?(a=s,s=0):a=r.toFinite(a),l=l===void 0?s<a?1:-1:r.toFinite(l);const u=Math.max(Math.ceil((a-s)/(l||1)),0),d=new Array(u);for(let m=0;m<u;m++)d[m]=s,s+=l;return d}e.range=n})(I0)),I0}var $0,O2;function V7(){return O2||(O2=1,$0=W7().range),$0}var q7=V7();const BP=pa(q7);function Ko(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function H7(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function kb(e){let t,r,n;e.length!==2?(t=Ko,r=(u,d)=>Ko(e(u),d),n=(u,d)=>e(u)-d):(t=e===Ko||e===H7?e:K7,r=e,n=e);function s(u,d,m=0,f=u.length){if(m<f){if(t(d,d)!==0)return f;do{const p=m+f>>>1;r(u[p],d)<0?m=p+1:f=p}while(m<f)}return m}function a(u,d,m=0,f=u.length){if(m<f){if(t(d,d)!==0)return f;do{const p=m+f>>>1;r(u[p],d)<=0?m=p+1:f=p}while(m<f)}return m}function l(u,d,m=0,f=u.length){const p=s(u,d,m,f-1);return p>m&&n(u[p-1],d)>-n(u[p],d)?p-1:p}return{left:s,center:l,right:a}}function K7(){return 0}function WP(e){return e===null?NaN:+e}function*G7(e,t){for(let r of e)r!=null&&(r=+r)>=r&&(yield r)}const Y7=kb(Ko),Qd=Y7.right;kb(WP).center;class I2 extends Map{constructor(t,r=Q7){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:r}}),t!=null)for(const[n,s]of t)this.set(n,s)}get(t){return super.get(T2(this,t))}has(t){return super.has(T2(this,t))}set(t,r){return super.set(J7(this,t),r)}delete(t){return super.delete(X7(this,t))}}function T2({_intern:e,_key:t},r){const n=t(r);return e.has(n)?e.get(n):r}function J7({_intern:e,_key:t},r){const n=t(r);return e.has(n)?e.get(n):(e.set(n,r),r)}function X7({_intern:e,_key:t},r){const n=t(r);return e.has(n)&&(r=e.get(n),e.delete(n)),r}function Q7(e){return e!==null&&typeof e=="object"?e.valueOf():e}function Z7(e=Ko){if(e===Ko)return VP;if(typeof e!="function")throw new TypeError("compare is not a function");return(t,r)=>{const n=e(t,r);return n||n===0?n:(e(r,r)===0)-(e(t,t)===0)}}function VP(e,t){return(e==null||!(e>=e))-(t==null||!(t>=t))||(e<t?-1:e>t?1:0)}const e9=Math.sqrt(50),t9=Math.sqrt(10),r9=Math.sqrt(2);function gm(e,t,r){const n=(t-e)/Math.max(0,r),s=Math.floor(Math.log10(n)),a=n/Math.pow(10,s),l=a>=e9?10:a>=t9?5:a>=r9?2:1;let u,d,m;return s<0?(m=Math.pow(10,-s)/l,u=Math.round(e*m),d=Math.round(t*m),u/m<e&&++u,d/m>t&&--d,m=-m):(m=Math.pow(10,s)*l,u=Math.round(e/m),d=Math.round(t/m),u*m<e&&++u,d*m>t&&--d),d<u&&.5<=r&&r<2?gm(e,t,r*2):[u,d,m]}function av(e,t,r){if(t=+t,e=+e,r=+r,!(r>0))return[];if(e===t)return[e];const n=t<e,[s,a,l]=n?gm(t,e,r):gm(e,t,r);if(!(a>=s))return[];const u=a-s+1,d=new Array(u);if(n)if(l<0)for(let m=0;m<u;++m)d[m]=(a-m)/-l;else for(let m=0;m<u;++m)d[m]=(a-m)*l;else if(l<0)for(let m=0;m<u;++m)d[m]=(s+m)/-l;else for(let m=0;m<u;++m)d[m]=(s+m)*l;return d}function ov(e,t,r){return t=+t,e=+e,r=+r,gm(e,t,r)[2]}function lv(e,t,r){t=+t,e=+e,r=+r;const n=t<e,s=n?ov(t,e,r):ov(e,t,r);return(n?-1:1)*(s<0?1/-s:s)}function D2(e,t){let r;for(const n of e)n!=null&&(r<n||r===void 0&&n>=n)&&(r=n);return r}function $2(e,t){let r;for(const n of e)n!=null&&(r>n||r===void 0&&n>=n)&&(r=n);return r}function qP(e,t,r=0,n=1/0,s){if(t=Math.floor(t),r=Math.floor(Math.max(0,r)),n=Math.floor(Math.min(e.length-1,n)),!(r<=t&&t<=n))return e;for(s=s===void 0?VP:Z7(s);n>r;){if(n-r>600){const d=n-r+1,m=t-r+1,f=Math.log(d),p=.5*Math.exp(2*f/3),x=.5*Math.sqrt(f*p*(d-p)/d)*(m-d/2<0?-1:1),v=Math.max(r,Math.floor(t-m*p/d+x)),b=Math.min(n,Math.floor(t+(d-m)*p/d+x));qP(e,t,v,b,s)}const a=e[t];let l=r,u=n;for(nd(e,r,t),s(e[n],a)>0&&nd(e,r,n);l<u;){for(nd(e,l,u),++l,--u;s(e[l],a)<0;)++l;for(;s(e[u],a)>0;)--u}s(e[r],a)===0?nd(e,r,u):(++u,nd(e,u,n)),u<=t&&(r=u+1),t<=u&&(n=u-1)}return e}function nd(e,t,r){const n=e[t];e[t]=e[r],e[r]=n}function n9(e,t,r){if(e=Float64Array.from(G7(e)),!(!(n=e.length)||isNaN(t=+t))){if(t<=0||n<2)return $2(e);if(t>=1)return D2(e);var n,s=(n-1)*t,a=Math.floor(s),l=D2(qP(e,a).subarray(0,a+1)),u=$2(e.subarray(a+1));return l+(u-l)*(s-a)}}function s9(e,t,r=WP){if(!(!(n=e.length)||isNaN(t=+t))){if(t<=0||n<2)return+r(e[0],0,e);if(t>=1)return+r(e[n-1],n-1,e);var n,s=(n-1)*t,a=Math.floor(s),l=+r(e[a],a,e),u=+r(e[a+1],a+1,e);return l+(u-l)*(s-a)}}function i9(e,t,r){e=+e,t=+t,r=(s=arguments.length)<2?(t=e,e=0,1):s<3?1:+r;for(var n=-1,s=Math.max(0,Math.ceil((t-e)/r))|0,a=new Array(s);++n<s;)a[n]=e+n*r;return a}function Wi(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}function yo(e,t){switch(arguments.length){case 0:break;case 1:{typeof e=="function"?this.interpolator(e):this.range(e);break}default:{this.domain(e),typeof t=="function"?this.interpolator(t):this.range(t);break}}return this}const cv=Symbol("implicit");function Nb(){var e=new I2,t=[],r=[],n=cv;function s(a){let l=e.get(a);if(l===void 0){if(n!==cv)return n;e.set(a,l=t.push(a)-1)}return r[l%r.length]}return s.domain=function(a){if(!arguments.length)return t.slice();t=[],e=new I2;for(const l of a)e.has(l)||e.set(l,t.push(l)-1);return s},s.range=function(a){return arguments.length?(r=Array.from(a),s):r.slice()},s.unknown=function(a){return arguments.length?(n=a,s):n},s.copy=function(){return Nb(t,r).unknown(n)},Wi.apply(s,arguments),s}function _b(){var e=Nb().unknown(void 0),t=e.domain,r=e.range,n=0,s=1,a,l,u=!1,d=0,m=0,f=.5;delete e.unknown;function p(){var x=t().length,v=s<n,b=v?s:n,w=v?n:s;a=(w-b)/Math.max(1,x-d+m*2),u&&(a=Math.floor(a)),b+=(w-b-a*(x-d))*f,l=a*(1-d),u&&(b=Math.round(b),l=Math.round(l));var j=i9(x).map(function(_){return b+a*_});return r(v?j.reverse():j)}return e.domain=function(x){return arguments.length?(t(x),p()):t()},e.range=function(x){return arguments.length?([n,s]=x,n=+n,s=+s,p()):[n,s]},e.rangeRound=function(x){return[n,s]=x,n=+n,s=+s,u=!0,p()},e.bandwidth=function(){return l},e.step=function(){return a},e.round=function(x){return arguments.length?(u=!!x,p()):u},e.padding=function(x){return arguments.length?(d=Math.min(1,m=+x),p()):d},e.paddingInner=function(x){return arguments.length?(d=Math.min(1,x),p()):d},e.paddingOuter=function(x){return arguments.length?(m=+x,p()):m},e.align=function(x){return arguments.length?(f=Math.max(0,Math.min(1,x)),p()):f},e.copy=function(){return _b(t(),[n,s]).round(u).paddingInner(d).paddingOuter(m).align(f)},Wi.apply(p(),arguments)}function HP(e){var t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,delete e.paddingOuter,e.copy=function(){return HP(t())},e}function a9(){return HP(_b.apply(null,arguments).paddingInner(1))}function Cb(e,t,r){e.prototype=t.prototype=r,r.constructor=e}function KP(e,t){var r=Object.create(e.prototype);for(var n in t)r[n]=t[n];return r}function Zd(){}var $d=.7,ym=1/$d,Kc="\\s*([+-]?\\d+)\\s*",Rd="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Ea="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",o9=/^#([0-9a-f]{3,8})$/,l9=new RegExp(`^rgb\\(${Kc},${Kc},${Kc}\\)$`),c9=new RegExp(`^rgb\\(${Ea},${Ea},${Ea}\\)$`),u9=new RegExp(`^rgba\\(${Kc},${Kc},${Kc},${Rd}\\)$`),d9=new RegExp(`^rgba\\(${Ea},${Ea},${Ea},${Rd}\\)$`),f9=new RegExp(`^hsl\\(${Rd},${Ea},${Ea}\\)$`),h9=new RegExp(`^hsla\\(${Rd},${Ea},${Ea},${Rd}\\)$`),R2={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Cb(Zd,Md,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:M2,formatHex:M2,formatHex8:m9,formatHsl:p9,formatRgb:F2,toString:F2});function M2(){return this.rgb().formatHex()}function m9(){return this.rgb().formatHex8()}function p9(){return GP(this).formatHsl()}function F2(){return this.rgb().formatRgb()}function Md(e){var t,r;return e=(e+"").trim().toLowerCase(),(t=o9.exec(e))?(r=t[1].length,t=parseInt(t[1],16),r===6?L2(t):r===3?new ei(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):r===8?vh(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):r===4?vh(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=l9.exec(e))?new ei(t[1],t[2],t[3],1):(t=c9.exec(e))?new ei(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=u9.exec(e))?vh(t[1],t[2],t[3],t[4]):(t=d9.exec(e))?vh(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=f9.exec(e))?B2(t[1],t[2]/100,t[3]/100,1):(t=h9.exec(e))?B2(t[1],t[2]/100,t[3]/100,t[4]):R2.hasOwnProperty(e)?L2(R2[e]):e==="transparent"?new ei(NaN,NaN,NaN,0):null}function L2(e){return new ei(e>>16&255,e>>8&255,e&255,1)}function vh(e,t,r,n){return n<=0&&(e=t=r=NaN),new ei(e,t,r,n)}function g9(e){return e instanceof Zd||(e=Md(e)),e?(e=e.rgb(),new ei(e.r,e.g,e.b,e.opacity)):new ei}function uv(e,t,r,n){return arguments.length===1?g9(e):new ei(e,t,r,n??1)}function ei(e,t,r,n){this.r=+e,this.g=+t,this.b=+r,this.opacity=+n}Cb(ei,uv,KP(Zd,{brighter(e){return e=e==null?ym:Math.pow(ym,e),new ei(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?$d:Math.pow($d,e),new ei(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new ei(Ll(this.r),Ll(this.g),Ll(this.b),xm(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:z2,formatHex:z2,formatHex8:y9,formatRgb:U2,toString:U2}));function z2(){return`#${Il(this.r)}${Il(this.g)}${Il(this.b)}`}function y9(){return`#${Il(this.r)}${Il(this.g)}${Il(this.b)}${Il((isNaN(this.opacity)?1:this.opacity)*255)}`}function U2(){const e=xm(this.opacity);return`${e===1?"rgb(":"rgba("}${Ll(this.r)}, ${Ll(this.g)}, ${Ll(this.b)}${e===1?")":`, ${e})`}`}function xm(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function Ll(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function Il(e){return e=Ll(e),(e<16?"0":"")+e.toString(16)}function B2(e,t,r,n){return n<=0?e=t=r=NaN:r<=0||r>=1?e=t=NaN:t<=0&&(e=NaN),new da(e,t,r,n)}function GP(e){if(e instanceof da)return new da(e.h,e.s,e.l,e.opacity);if(e instanceof Zd||(e=Md(e)),!e)return new da;if(e instanceof da)return e;e=e.rgb();var t=e.r/255,r=e.g/255,n=e.b/255,s=Math.min(t,r,n),a=Math.max(t,r,n),l=NaN,u=a-s,d=(a+s)/2;return u?(t===a?l=(r-n)/u+(r<n)*6:r===a?l=(n-t)/u+2:l=(t-r)/u+4,u/=d<.5?a+s:2-a-s,l*=60):u=d>0&&d<1?0:l,new da(l,u,d,e.opacity)}function x9(e,t,r,n){return arguments.length===1?GP(e):new da(e,t,r,n??1)}function da(e,t,r,n){this.h=+e,this.s=+t,this.l=+r,this.opacity=+n}Cb(da,x9,KP(Zd,{brighter(e){return e=e==null?ym:Math.pow(ym,e),new da(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?$d:Math.pow($d,e),new da(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,r=this.l,n=r+(r<.5?r:1-r)*t,s=2*r-n;return new ei(R0(e>=240?e-240:e+120,s,n),R0(e,s,n),R0(e<120?e+240:e-120,s,n),this.opacity)},clamp(){return new da(W2(this.h),bh(this.s),bh(this.l),xm(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=xm(this.opacity);return`${e===1?"hsl(":"hsla("}${W2(this.h)}, ${bh(this.s)*100}%, ${bh(this.l)*100}%${e===1?")":`, ${e})`}`}}));function W2(e){return e=(e||0)%360,e<0?e+360:e}function bh(e){return Math.max(0,Math.min(1,e||0))}function R0(e,t,r){return(e<60?t+(r-t)*e/60:e<180?r:e<240?t+(r-t)*(240-e)/60:t)*255}const Eb=e=>()=>e;function v9(e,t){return function(r){return e+r*t}}function b9(e,t,r){return e=Math.pow(e,r),t=Math.pow(t,r)-e,r=1/r,function(n){return Math.pow(e+n*t,r)}}function w9(e){return(e=+e)==1?YP:function(t,r){return r-t?b9(t,r,e):Eb(isNaN(t)?r:t)}}function YP(e,t){var r=t-e;return r?v9(e,r):Eb(isNaN(e)?t:e)}const V2=(function e(t){var r=w9(t);function n(s,a){var l=r((s=uv(s)).r,(a=uv(a)).r),u=r(s.g,a.g),d=r(s.b,a.b),m=YP(s.opacity,a.opacity);return function(f){return s.r=l(f),s.g=u(f),s.b=d(f),s.opacity=m(f),s+""}}return n.gamma=e,n})(1);function j9(e,t){t||(t=[]);var r=e?Math.min(t.length,e.length):0,n=t.slice(),s;return function(a){for(s=0;s<r;++s)n[s]=e[s]*(1-a)+t[s]*a;return n}}function S9(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function k9(e,t){var r=t?t.length:0,n=e?Math.min(r,e.length):0,s=new Array(n),a=new Array(r),l;for(l=0;l<n;++l)s[l]=gu(e[l],t[l]);for(;l<r;++l)a[l]=t[l];return function(u){for(l=0;l<n;++l)a[l]=s[l](u);return a}}function N9(e,t){var r=new Date;return e=+e,t=+t,function(n){return r.setTime(e*(1-n)+t*n),r}}function vm(e,t){return e=+e,t=+t,function(r){return e*(1-r)+t*r}}function _9(e,t){var r={},n={},s;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(s in t)s in e?r[s]=gu(e[s],t[s]):n[s]=t[s];return function(a){for(s in r)n[s]=r[s](a);return n}}var dv=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,M0=new RegExp(dv.source,"g");function C9(e){return function(){return e}}function E9(e){return function(t){return e(t)+""}}function A9(e,t){var r=dv.lastIndex=M0.lastIndex=0,n,s,a,l=-1,u=[],d=[];for(e=e+"",t=t+"";(n=dv.exec(e))&&(s=M0.exec(t));)(a=s.index)>r&&(a=t.slice(r,a),u[l]?u[l]+=a:u[++l]=a),(n=n[0])===(s=s[0])?u[l]?u[l]+=s:u[++l]=s:(u[++l]=null,d.push({i:l,x:vm(n,s)})),r=M0.lastIndex;return r<t.length&&(a=t.slice(r),u[l]?u[l]+=a:u[++l]=a),u.length<2?d[0]?E9(d[0].x):C9(t):(t=d.length,function(m){for(var f=0,p;f<t;++f)u[(p=d[f]).i]=p.x(m);return u.join("")})}function gu(e,t){var r=typeof t,n;return t==null||r==="boolean"?Eb(t):(r==="number"?vm:r==="string"?(n=Md(t))?(t=n,V2):A9:t instanceof Md?V2:t instanceof Date?N9:S9(t)?j9:Array.isArray(t)?k9:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?_9:vm)(e,t)}function Ab(e,t){return e=+e,t=+t,function(r){return Math.round(e*(1-r)+t*r)}}function P9(e,t){t===void 0&&(t=e,e=gu);for(var r=0,n=t.length-1,s=t[0],a=new Array(n<0?0:n);r<n;)a[r]=e(s,s=t[++r]);return function(l){var u=Math.max(0,Math.min(n-1,Math.floor(l*=n)));return a[u](l-u)}}function O9(e){return function(){return e}}function bm(e){return+e}var q2=[0,1];function Fs(e){return e}function fv(e,t){return(t-=e=+e)?function(r){return(r-e)/t}:O9(isNaN(t)?NaN:.5)}function I9(e,t){var r;return e>t&&(r=e,e=t,t=r),function(n){return Math.max(e,Math.min(t,n))}}function T9(e,t,r){var n=e[0],s=e[1],a=t[0],l=t[1];return s<n?(n=fv(s,n),a=r(l,a)):(n=fv(n,s),a=r(a,l)),function(u){return a(n(u))}}function D9(e,t,r){var n=Math.min(e.length,t.length)-1,s=new Array(n),a=new Array(n),l=-1;for(e[n]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++l<n;)s[l]=fv(e[l],e[l+1]),a[l]=r(t[l],t[l+1]);return function(u){var d=Qd(e,u,1,n)-1;return a[d](s[d](u))}}function ef(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function yp(){var e=q2,t=q2,r=gu,n,s,a,l=Fs,u,d,m;function f(){var x=Math.min(e.length,t.length);return l!==Fs&&(l=I9(e[0],e[x-1])),u=x>2?D9:T9,d=m=null,p}function p(x){return x==null||isNaN(x=+x)?a:(d||(d=u(e.map(n),t,r)))(n(l(x)))}return p.invert=function(x){return l(s((m||(m=u(t,e.map(n),vm)))(x)))},p.domain=function(x){return arguments.length?(e=Array.from(x,bm),f()):e.slice()},p.range=function(x){return arguments.length?(t=Array.from(x),f()):t.slice()},p.rangeRound=function(x){return t=Array.from(x),r=Ab,f()},p.clamp=function(x){return arguments.length?(l=x?!0:Fs,f()):l!==Fs},p.interpolate=function(x){return arguments.length?(r=x,f()):r},p.unknown=function(x){return arguments.length?(a=x,p):a},function(x,v){return n=x,s=v,f()}}function Pb(){return yp()(Fs,Fs)}function $9(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function wm(e,t){if((r=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var r,n=e.slice(0,r);return[n.length>1?n[0]+n.slice(2):n,+e.slice(r+1)]}function Qc(e){return e=wm(Math.abs(e)),e?e[1]:NaN}function R9(e,t){return function(r,n){for(var s=r.length,a=[],l=0,u=e[0],d=0;s>0&&u>0&&(d+u+1>n&&(u=Math.max(1,n-d)),a.push(r.substring(s-=u,s+u)),!((d+=u+1)>n));)u=e[l=(l+1)%e.length];return a.reverse().join(t)}}function M9(e){return function(t){return t.replace(/[0-9]/g,function(r){return e[+r]})}}var F9=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Fd(e){if(!(t=F9.exec(e)))throw new Error("invalid format: "+e);var t;return new Ob({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}Fd.prototype=Ob.prototype;function Ob(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}Ob.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function L9(e){e:for(var t=e.length,r=1,n=-1,s;r<t;++r)switch(e[r]){case".":n=s=r;break;case"0":n===0&&(n=r),s=r;break;default:if(!+e[r])break e;n>0&&(n=0);break}return n>0?e.slice(0,n)+e.slice(s+1):e}var JP;function z9(e,t){var r=wm(e,t);if(!r)return e+"";var n=r[0],s=r[1],a=s-(JP=Math.max(-8,Math.min(8,Math.floor(s/3)))*3)+1,l=n.length;return a===l?n:a>l?n+new Array(a-l+1).join("0"):a>0?n.slice(0,a)+"."+n.slice(a):"0."+new Array(1-a).join("0")+wm(e,Math.max(0,t+a-1))[0]}function H2(e,t){var r=wm(e,t);if(!r)return e+"";var n=r[0],s=r[1];return s<0?"0."+new Array(-s).join("0")+n:n.length>s+1?n.slice(0,s+1)+"."+n.slice(s+1):n+new Array(s-n.length+2).join("0")}const K2={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:$9,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>H2(e*100,t),r:H2,s:z9,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function G2(e){return e}var Y2=Array.prototype.map,J2=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function U9(e){var t=e.grouping===void 0||e.thousands===void 0?G2:R9(Y2.call(e.grouping,Number),e.thousands+""),r=e.currency===void 0?"":e.currency[0]+"",n=e.currency===void 0?"":e.currency[1]+"",s=e.decimal===void 0?".":e.decimal+"",a=e.numerals===void 0?G2:M9(Y2.call(e.numerals,String)),l=e.percent===void 0?"%":e.percent+"",u=e.minus===void 0?"":e.minus+"",d=e.nan===void 0?"NaN":e.nan+"";function m(p){p=Fd(p);var x=p.fill,v=p.align,b=p.sign,w=p.symbol,j=p.zero,_=p.width,E=p.comma,C=p.precision,I=p.trim,A=p.type;A==="n"?(E=!0,A="g"):K2[A]||(C===void 0&&(C=12),I=!0,A="g"),(j||x==="0"&&v==="=")&&(j=!0,x="0",v="=");var $=w==="$"?r:w==="#"&&/[boxX]/.test(A)?"0"+A.toLowerCase():"",B=w==="$"?n:/[%p]/.test(A)?l:"",T=K2[A],K=/[defgprs%]/.test(A);C=C===void 0?6:/[gprs]/.test(A)?Math.max(1,Math.min(21,C)):Math.max(0,Math.min(20,C));function Q(se){var G=$,le=B,F,Y,J;if(A==="c")le=T(se)+le,se="";else{se=+se;var V=se<0||1/se<0;if(se=isNaN(se)?d:T(Math.abs(se),C),I&&(se=L9(se)),V&&+se==0&&b!=="+"&&(V=!1),G=(V?b==="("?b:u:b==="-"||b==="("?"":b)+G,le=(A==="s"?J2[8+JP/3]:"")+le+(V&&b==="("?")":""),K){for(F=-1,Y=se.length;++F<Y;)if(J=se.charCodeAt(F),48>J||J>57){le=(J===46?s+se.slice(F+1):se.slice(F))+le,se=se.slice(0,F);break}}}E&&!j&&(se=t(se,1/0));var H=G.length+se.length+le.length,re=H<_?new Array(_-H+1).join(x):"";switch(E&&j&&(se=t(re+se,re.length?_-le.length:1/0),re=""),v){case"<":se=G+se+le+re;break;case"=":se=G+re+se+le;break;case"^":se=re.slice(0,H=re.length>>1)+G+se+le+re.slice(H);break;default:se=re+G+se+le;break}return a(se)}return Q.toString=function(){return p+""},Q}function f(p,x){var v=m((p=Fd(p),p.type="f",p)),b=Math.max(-8,Math.min(8,Math.floor(Qc(x)/3)))*3,w=Math.pow(10,-b),j=J2[8+b/3];return function(_){return v(w*_)+j}}return{format:m,formatPrefix:f}}var wh,Ib,XP;B9({thousands:",",grouping:[3],currency:["$",""]});function B9(e){return wh=U9(e),Ib=wh.format,XP=wh.formatPrefix,wh}function W9(e){return Math.max(0,-Qc(Math.abs(e)))}function V9(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(Qc(t)/3)))*3-Qc(Math.abs(e)))}function q9(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,Qc(t)-Qc(e))+1}function QP(e,t,r,n){var s=lv(e,t,r),a;switch(n=Fd(n??",f"),n.type){case"s":{var l=Math.max(Math.abs(e),Math.abs(t));return n.precision==null&&!isNaN(a=V9(s,l))&&(n.precision=a),XP(n,l)}case"":case"e":case"g":case"p":case"r":{n.precision==null&&!isNaN(a=q9(s,Math.max(Math.abs(e),Math.abs(t))))&&(n.precision=a-(n.type==="e"));break}case"f":case"%":{n.precision==null&&!isNaN(a=W9(s))&&(n.precision=a-(n.type==="%")*2);break}}return Ib(n)}function tl(e){var t=e.domain;return e.ticks=function(r){var n=t();return av(n[0],n[n.length-1],r??10)},e.tickFormat=function(r,n){var s=t();return QP(s[0],s[s.length-1],r??10,n)},e.nice=function(r){r==null&&(r=10);var n=t(),s=0,a=n.length-1,l=n[s],u=n[a],d,m,f=10;for(u<l&&(m=l,l=u,u=m,m=s,s=a,a=m);f-- >0;){if(m=ov(l,u,r),m===d)return n[s]=l,n[a]=u,t(n);if(m>0)l=Math.floor(l/m)*m,u=Math.ceil(u/m)*m;else if(m<0)l=Math.ceil(l*m)/m,u=Math.floor(u*m)/m;else break;d=m}return e},e}function ZP(){var e=Pb();return e.copy=function(){return ef(e,ZP())},Wi.apply(e,arguments),tl(e)}function e4(e){var t;function r(n){return n==null||isNaN(n=+n)?t:n}return r.invert=r,r.domain=r.range=function(n){return arguments.length?(e=Array.from(n,bm),r):e.slice()},r.unknown=function(n){return arguments.length?(t=n,r):t},r.copy=function(){return e4(e).unknown(t)},e=arguments.length?Array.from(e,bm):[0,1],tl(r)}function t4(e,t){e=e.slice();var r=0,n=e.length-1,s=e[r],a=e[n],l;return a<s&&(l=r,r=n,n=l,l=s,s=a,a=l),e[r]=t.floor(s),e[n]=t.ceil(a),e}function X2(e){return Math.log(e)}function Q2(e){return Math.exp(e)}function H9(e){return-Math.log(-e)}function K9(e){return-Math.exp(-e)}function G9(e){return isFinite(e)?+("1e"+e):e<0?0:e}function Y9(e){return e===10?G9:e===Math.E?Math.exp:t=>Math.pow(e,t)}function J9(e){return e===Math.E?Math.log:e===10&&Math.log10||e===2&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}function Z2(e){return(t,r)=>-e(-t,r)}function Tb(e){const t=e(X2,Q2),r=t.domain;let n=10,s,a;function l(){return s=J9(n),a=Y9(n),r()[0]<0?(s=Z2(s),a=Z2(a),e(H9,K9)):e(X2,Q2),t}return t.base=function(u){return arguments.length?(n=+u,l()):n},t.domain=function(u){return arguments.length?(r(u),l()):r()},t.ticks=u=>{const d=r();let m=d[0],f=d[d.length-1];const p=f<m;p&&([m,f]=[f,m]);let x=s(m),v=s(f),b,w;const j=u==null?10:+u;let _=[];if(!(n%1)&&v-x<j){if(x=Math.floor(x),v=Math.ceil(v),m>0){for(;x<=v;++x)for(b=1;b<n;++b)if(w=x<0?b/a(-x):b*a(x),!(w<m)){if(w>f)break;_.push(w)}}else for(;x<=v;++x)for(b=n-1;b>=1;--b)if(w=x>0?b/a(-x):b*a(x),!(w<m)){if(w>f)break;_.push(w)}_.length*2<j&&(_=av(m,f,j))}else _=av(x,v,Math.min(v-x,j)).map(a);return p?_.reverse():_},t.tickFormat=(u,d)=>{if(u==null&&(u=10),d==null&&(d=n===10?"s":","),typeof d!="function"&&(!(n%1)&&(d=Fd(d)).precision==null&&(d.trim=!0),d=Ib(d)),u===1/0)return d;const m=Math.max(1,n*u/t.ticks().length);return f=>{let p=f/a(Math.round(s(f)));return p*n<n-.5&&(p*=n),p<=m?d(f):""}},t.nice=()=>r(t4(r(),{floor:u=>a(Math.floor(s(u))),ceil:u=>a(Math.ceil(s(u)))})),t}function r4(){const e=Tb(yp()).domain([1,10]);return e.copy=()=>ef(e,r4()).base(e.base()),Wi.apply(e,arguments),e}function e_(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function t_(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function Db(e){var t=1,r=e(e_(t),t_(t));return r.constant=function(n){return arguments.length?e(e_(t=+n),t_(t)):t},tl(r)}function n4(){var e=Db(yp());return e.copy=function(){return ef(e,n4()).constant(e.constant())},Wi.apply(e,arguments)}function r_(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function X9(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function Q9(e){return e<0?-e*e:e*e}function $b(e){var t=e(Fs,Fs),r=1;function n(){return r===1?e(Fs,Fs):r===.5?e(X9,Q9):e(r_(r),r_(1/r))}return t.exponent=function(s){return arguments.length?(r=+s,n()):r},tl(t)}function Rb(){var e=$b(yp());return e.copy=function(){return ef(e,Rb()).exponent(e.exponent())},Wi.apply(e,arguments),e}function Z9(){return Rb.apply(null,arguments).exponent(.5)}function n_(e){return Math.sign(e)*e*e}function eW(e){return Math.sign(e)*Math.sqrt(Math.abs(e))}function s4(){var e=Pb(),t=[0,1],r=!1,n;function s(a){var l=eW(e(a));return isNaN(l)?n:r?Math.round(l):l}return s.invert=function(a){return e.invert(n_(a))},s.domain=function(a){return arguments.length?(e.domain(a),s):e.domain()},s.range=function(a){return arguments.length?(e.range((t=Array.from(a,bm)).map(n_)),s):t.slice()},s.rangeRound=function(a){return s.range(a).round(!0)},s.round=function(a){return arguments.length?(r=!!a,s):r},s.clamp=function(a){return arguments.length?(e.clamp(a),s):e.clamp()},s.unknown=function(a){return arguments.length?(n=a,s):n},s.copy=function(){return s4(e.domain(),t).round(r).clamp(e.clamp()).unknown(n)},Wi.apply(s,arguments),tl(s)}function i4(){var e=[],t=[],r=[],n;function s(){var l=0,u=Math.max(1,t.length);for(r=new Array(u-1);++l<u;)r[l-1]=s9(e,l/u);return a}function a(l){return l==null||isNaN(l=+l)?n:t[Qd(r,l)]}return a.invertExtent=function(l){var u=t.indexOf(l);return u<0?[NaN,NaN]:[u>0?r[u-1]:e[0],u<r.length?r[u]:e[e.length-1]]},a.domain=function(l){if(!arguments.length)return e.slice();e=[];for(let u of l)u!=null&&!isNaN(u=+u)&&e.push(u);return e.sort(Ko),s()},a.range=function(l){return arguments.length?(t=Array.from(l),s()):t.slice()},a.unknown=function(l){return arguments.length?(n=l,a):n},a.quantiles=function(){return r.slice()},a.copy=function(){return i4().domain(e).range(t).unknown(n)},Wi.apply(a,arguments)}function a4(){var e=0,t=1,r=1,n=[.5],s=[0,1],a;function l(d){return d!=null&&d<=d?s[Qd(n,d,0,r)]:a}function u(){var d=-1;for(n=new Array(r);++d<r;)n[d]=((d+1)*t-(d-r)*e)/(r+1);return l}return l.domain=function(d){return arguments.length?([e,t]=d,e=+e,t=+t,u()):[e,t]},l.range=function(d){return arguments.length?(r=(s=Array.from(d)).length-1,u()):s.slice()},l.invertExtent=function(d){var m=s.indexOf(d);return m<0?[NaN,NaN]:m<1?[e,n[0]]:m>=r?[n[r-1],t]:[n[m-1],n[m]]},l.unknown=function(d){return arguments.length&&(a=d),l},l.thresholds=function(){return n.slice()},l.copy=function(){return a4().domain([e,t]).range(s).unknown(a)},Wi.apply(tl(l),arguments)}function o4(){var e=[.5],t=[0,1],r,n=1;function s(a){return a!=null&&a<=a?t[Qd(e,a,0,n)]:r}return s.domain=function(a){return arguments.length?(e=Array.from(a),n=Math.min(e.length,t.length-1),s):e.slice()},s.range=function(a){return arguments.length?(t=Array.from(a),n=Math.min(e.length,t.length-1),s):t.slice()},s.invertExtent=function(a){var l=t.indexOf(a);return[e[l-1],e[l]]},s.unknown=function(a){return arguments.length?(r=a,s):r},s.copy=function(){return o4().domain(e).range(t).unknown(r)},Wi.apply(s,arguments)}const F0=new Date,L0=new Date;function Un(e,t,r,n){function s(a){return e(a=arguments.length===0?new Date:new Date(+a)),a}return s.floor=a=>(e(a=new Date(+a)),a),s.ceil=a=>(e(a=new Date(a-1)),t(a,1),e(a),a),s.round=a=>{const l=s(a),u=s.ceil(a);return a-l<u-a?l:u},s.offset=(a,l)=>(t(a=new Date(+a),l==null?1:Math.floor(l)),a),s.range=(a,l,u)=>{const d=[];if(a=s.ceil(a),u=u==null?1:Math.floor(u),!(a<l)||!(u>0))return d;let m;do d.push(m=new Date(+a)),t(a,u),e(a);while(m<a&&a<l);return d},s.filter=a=>Un(l=>{if(l>=l)for(;e(l),!a(l);)l.setTime(l-1)},(l,u)=>{if(l>=l)if(u<0)for(;++u<=0;)for(;t(l,-1),!a(l););else for(;--u>=0;)for(;t(l,1),!a(l););}),r&&(s.count=(a,l)=>(F0.setTime(+a),L0.setTime(+l),e(F0),e(L0),Math.floor(r(F0,L0))),s.every=a=>(a=Math.floor(a),!isFinite(a)||!(a>0)?null:a>1?s.filter(n?l=>n(l)%a===0:l=>s.count(0,l)%a===0):s)),s}const jm=Un(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);jm.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?Un(t=>{t.setTime(Math.floor(t/e)*e)},(t,r)=>{t.setTime(+t+r*e)},(t,r)=>(r-t)/e):jm);jm.range;const Xa=1e3,Ri=Xa*60,Qa=Ri*60,lo=Qa*24,Mb=lo*7,s_=lo*30,z0=lo*365,Tl=Un(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*Xa)},(e,t)=>(t-e)/Xa,e=>e.getUTCSeconds());Tl.range;const Fb=Un(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*Xa)},(e,t)=>{e.setTime(+e+t*Ri)},(e,t)=>(t-e)/Ri,e=>e.getMinutes());Fb.range;const Lb=Un(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*Ri)},(e,t)=>(t-e)/Ri,e=>e.getUTCMinutes());Lb.range;const zb=Un(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*Xa-e.getMinutes()*Ri)},(e,t)=>{e.setTime(+e+t*Qa)},(e,t)=>(t-e)/Qa,e=>e.getHours());zb.range;const Ub=Un(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*Qa)},(e,t)=>(t-e)/Qa,e=>e.getUTCHours());Ub.range;const tf=Un(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*Ri)/lo,e=>e.getDate()-1);tf.range;const xp=Un(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/lo,e=>e.getUTCDate()-1);xp.range;const l4=Un(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/lo,e=>Math.floor(e/lo));l4.range;function Ql(e){return Un(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(t,r)=>{t.setDate(t.getDate()+r*7)},(t,r)=>(r-t-(r.getTimezoneOffset()-t.getTimezoneOffset())*Ri)/Mb)}const vp=Ql(0),Sm=Ql(1),tW=Ql(2),rW=Ql(3),Zc=Ql(4),nW=Ql(5),sW=Ql(6);vp.range;Sm.range;tW.range;rW.range;Zc.range;nW.range;sW.range;function Zl(e){return Un(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(t,r)=>{t.setUTCDate(t.getUTCDate()+r*7)},(t,r)=>(r-t)/Mb)}const bp=Zl(0),km=Zl(1),iW=Zl(2),aW=Zl(3),eu=Zl(4),oW=Zl(5),lW=Zl(6);bp.range;km.range;iW.range;aW.range;eu.range;oW.range;lW.range;const Bb=Un(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12,e=>e.getMonth());Bb.range;const Wb=Un(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth());Wb.range;const co=Un(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());co.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:Un(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,r)=>{t.setFullYear(t.getFullYear()+r*e)});co.range;const uo=Un(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());uo.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:Un(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,r)=>{t.setUTCFullYear(t.getUTCFullYear()+r*e)});uo.range;function c4(e,t,r,n,s,a){const l=[[Tl,1,Xa],[Tl,5,5*Xa],[Tl,15,15*Xa],[Tl,30,30*Xa],[a,1,Ri],[a,5,5*Ri],[a,15,15*Ri],[a,30,30*Ri],[s,1,Qa],[s,3,3*Qa],[s,6,6*Qa],[s,12,12*Qa],[n,1,lo],[n,2,2*lo],[r,1,Mb],[t,1,s_],[t,3,3*s_],[e,1,z0]];function u(m,f,p){const x=f<m;x&&([m,f]=[f,m]);const v=p&&typeof p.range=="function"?p:d(m,f,p),b=v?v.range(m,+f+1):[];return x?b.reverse():b}function d(m,f,p){const x=Math.abs(f-m)/p,v=kb(([,,j])=>j).right(l,x);if(v===l.length)return e.every(lv(m/z0,f/z0,p));if(v===0)return jm.every(Math.max(lv(m,f,p),1));const[b,w]=l[x/l[v-1][2]<l[v][2]/x?v-1:v];return b.every(w)}return[u,d]}const[cW,uW]=c4(uo,Wb,bp,l4,Ub,Lb),[dW,fW]=c4(co,Bb,vp,tf,zb,Fb);function U0(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function B0(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function sd(e,t,r){return{y:e,m:t,d:r,H:0,M:0,S:0,L:0}}function hW(e){var t=e.dateTime,r=e.date,n=e.time,s=e.periods,a=e.days,l=e.shortDays,u=e.months,d=e.shortMonths,m=id(s),f=ad(s),p=id(a),x=ad(a),v=id(l),b=ad(l),w=id(u),j=ad(u),_=id(d),E=ad(d),C={a:V,A:H,b:re,B:ie,c:null,d:u_,e:u_,f:RW,g:HW,G:GW,H:TW,I:DW,j:$W,L:u4,m:MW,M:FW,p:M,q:Z,Q:h_,s:m_,S:LW,u:zW,U:UW,V:BW,w:WW,W:VW,x:null,X:null,y:qW,Y:KW,Z:YW,"%":f_},I={a:fe,A:ye,b:Le,B:je,c:null,d:d_,e:d_,f:ZW,g:cV,G:dV,H:JW,I:XW,j:QW,L:f4,m:eV,M:tV,p:Me,q:Se,Q:h_,s:m_,S:rV,u:nV,U:sV,V:iV,w:aV,W:oV,x:null,X:null,y:lV,Y:uV,Z:fV,"%":f_},A={a:Q,A:se,b:G,B:le,c:F,d:l_,e:l_,f:AW,g:o_,G:a_,H:c_,I:c_,j:NW,L:EW,m:kW,M:_W,p:K,q:SW,Q:OW,s:IW,S:CW,u:xW,U:vW,V:bW,w:yW,W:wW,x:Y,X:J,y:o_,Y:a_,Z:jW,"%":PW};C.x=$(r,C),C.X=$(n,C),C.c=$(t,C),I.x=$(r,I),I.X=$(n,I),I.c=$(t,I);function $(z,ue){return function(de){var ee=[],Ye=-1,Oe=0,rt=z.length,Nt,vt,ot;for(de instanceof Date||(de=new Date(+de));++Ye<rt;)z.charCodeAt(Ye)===37&&(ee.push(z.slice(Oe,Ye)),(vt=i_[Nt=z.charAt(++Ye)])!=null?Nt=z.charAt(++Ye):vt=Nt==="e"?" ":"0",(ot=ue[Nt])&&(Nt=ot(de,vt)),ee.push(Nt),Oe=Ye+1);return ee.push(z.slice(Oe,Ye)),ee.join("")}}function B(z,ue){return function(de){var ee=sd(1900,void 0,1),Ye=T(ee,z,de+="",0),Oe,rt;if(Ye!=de.length)return null;if("Q"in ee)return new Date(ee.Q);if("s"in ee)return new Date(ee.s*1e3+("L"in ee?ee.L:0));if(ue&&!("Z"in ee)&&(ee.Z=0),"p"in ee&&(ee.H=ee.H%12+ee.p*12),ee.m===void 0&&(ee.m="q"in ee?ee.q:0),"V"in ee){if(ee.V<1||ee.V>53)return null;"w"in ee||(ee.w=1),"Z"in ee?(Oe=B0(sd(ee.y,0,1)),rt=Oe.getUTCDay(),Oe=rt>4||rt===0?km.ceil(Oe):km(Oe),Oe=xp.offset(Oe,(ee.V-1)*7),ee.y=Oe.getUTCFullYear(),ee.m=Oe.getUTCMonth(),ee.d=Oe.getUTCDate()+(ee.w+6)%7):(Oe=U0(sd(ee.y,0,1)),rt=Oe.getDay(),Oe=rt>4||rt===0?Sm.ceil(Oe):Sm(Oe),Oe=tf.offset(Oe,(ee.V-1)*7),ee.y=Oe.getFullYear(),ee.m=Oe.getMonth(),ee.d=Oe.getDate()+(ee.w+6)%7)}else("W"in ee||"U"in ee)&&("w"in ee||(ee.w="u"in ee?ee.u%7:"W"in ee?1:0),rt="Z"in ee?B0(sd(ee.y,0,1)).getUTCDay():U0(sd(ee.y,0,1)).getDay(),ee.m=0,ee.d="W"in ee?(ee.w+6)%7+ee.W*7-(rt+5)%7:ee.w+ee.U*7-(rt+6)%7);return"Z"in ee?(ee.H+=ee.Z/100|0,ee.M+=ee.Z%100,B0(ee)):U0(ee)}}function T(z,ue,de,ee){for(var Ye=0,Oe=ue.length,rt=de.length,Nt,vt;Ye<Oe;){if(ee>=rt)return-1;if(Nt=ue.charCodeAt(Ye++),Nt===37){if(Nt=ue.charAt(Ye++),vt=A[Nt in i_?ue.charAt(Ye++):Nt],!vt||(ee=vt(z,de,ee))<0)return-1}else if(Nt!=de.charCodeAt(ee++))return-1}return ee}function K(z,ue,de){var ee=m.exec(ue.slice(de));return ee?(z.p=f.get(ee[0].toLowerCase()),de+ee[0].length):-1}function Q(z,ue,de){var ee=v.exec(ue.slice(de));return ee?(z.w=b.get(ee[0].toLowerCase()),de+ee[0].length):-1}function se(z,ue,de){var ee=p.exec(ue.slice(de));return ee?(z.w=x.get(ee[0].toLowerCase()),de+ee[0].length):-1}function G(z,ue,de){var ee=_.exec(ue.slice(de));return ee?(z.m=E.get(ee[0].toLowerCase()),de+ee[0].length):-1}function le(z,ue,de){var ee=w.exec(ue.slice(de));return ee?(z.m=j.get(ee[0].toLowerCase()),de+ee[0].length):-1}function F(z,ue,de){return T(z,t,ue,de)}function Y(z,ue,de){return T(z,r,ue,de)}function J(z,ue,de){return T(z,n,ue,de)}function V(z){return l[z.getDay()]}function H(z){return a[z.getDay()]}function re(z){return d[z.getMonth()]}function ie(z){return u[z.getMonth()]}function M(z){return s[+(z.getHours()>=12)]}function Z(z){return 1+~~(z.getMonth()/3)}function fe(z){return l[z.getUTCDay()]}function ye(z){return a[z.getUTCDay()]}function Le(z){return d[z.getUTCMonth()]}function je(z){return u[z.getUTCMonth()]}function Me(z){return s[+(z.getUTCHours()>=12)]}function Se(z){return 1+~~(z.getUTCMonth()/3)}return{format:function(z){var ue=$(z+="",C);return ue.toString=function(){return z},ue},parse:function(z){var ue=B(z+="",!1);return ue.toString=function(){return z},ue},utcFormat:function(z){var ue=$(z+="",I);return ue.toString=function(){return z},ue},utcParse:function(z){var ue=B(z+="",!0);return ue.toString=function(){return z},ue}}}var i_={"-":"",_:" ",0:"0"},os=/^\s*\d+/,mW=/^%/,pW=/[\\^$*+?|[\]().{}]/g;function yr(e,t,r){var n=e<0?"-":"",s=(n?-e:e)+"",a=s.length;return n+(a<r?new Array(r-a+1).join(t)+s:s)}function gW(e){return e.replace(pW,"\\$&")}function id(e){return new RegExp("^(?:"+e.map(gW).join("|")+")","i")}function ad(e){return new Map(e.map((t,r)=>[t.toLowerCase(),r]))}function yW(e,t,r){var n=os.exec(t.slice(r,r+1));return n?(e.w=+n[0],r+n[0].length):-1}function xW(e,t,r){var n=os.exec(t.slice(r,r+1));return n?(e.u=+n[0],r+n[0].length):-1}function vW(e,t,r){var n=os.exec(t.slice(r,r+2));return n?(e.U=+n[0],r+n[0].length):-1}function bW(e,t,r){var n=os.exec(t.slice(r,r+2));return n?(e.V=+n[0],r+n[0].length):-1}function wW(e,t,r){var n=os.exec(t.slice(r,r+2));return n?(e.W=+n[0],r+n[0].length):-1}function a_(e,t,r){var n=os.exec(t.slice(r,r+4));return n?(e.y=+n[0],r+n[0].length):-1}function o_(e,t,r){var n=os.exec(t.slice(r,r+2));return n?(e.y=+n[0]+(+n[0]>68?1900:2e3),r+n[0].length):-1}function jW(e,t,r){var n=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(r,r+6));return n?(e.Z=n[1]?0:-(n[2]+(n[3]||"00")),r+n[0].length):-1}function SW(e,t,r){var n=os.exec(t.slice(r,r+1));return n?(e.q=n[0]*3-3,r+n[0].length):-1}function kW(e,t,r){var n=os.exec(t.slice(r,r+2));return n?(e.m=n[0]-1,r+n[0].length):-1}function l_(e,t,r){var n=os.exec(t.slice(r,r+2));return n?(e.d=+n[0],r+n[0].length):-1}function NW(e,t,r){var n=os.exec(t.slice(r,r+3));return n?(e.m=0,e.d=+n[0],r+n[0].length):-1}function c_(e,t,r){var n=os.exec(t.slice(r,r+2));return n?(e.H=+n[0],r+n[0].length):-1}function _W(e,t,r){var n=os.exec(t.slice(r,r+2));return n?(e.M=+n[0],r+n[0].length):-1}function CW(e,t,r){var n=os.exec(t.slice(r,r+2));return n?(e.S=+n[0],r+n[0].length):-1}function EW(e,t,r){var n=os.exec(t.slice(r,r+3));return n?(e.L=+n[0],r+n[0].length):-1}function AW(e,t,r){var n=os.exec(t.slice(r,r+6));return n?(e.L=Math.floor(n[0]/1e3),r+n[0].length):-1}function PW(e,t,r){var n=mW.exec(t.slice(r,r+1));return n?r+n[0].length:-1}function OW(e,t,r){var n=os.exec(t.slice(r));return n?(e.Q=+n[0],r+n[0].length):-1}function IW(e,t,r){var n=os.exec(t.slice(r));return n?(e.s=+n[0],r+n[0].length):-1}function u_(e,t){return yr(e.getDate(),t,2)}function TW(e,t){return yr(e.getHours(),t,2)}function DW(e,t){return yr(e.getHours()%12||12,t,2)}function $W(e,t){return yr(1+tf.count(co(e),e),t,3)}function u4(e,t){return yr(e.getMilliseconds(),t,3)}function RW(e,t){return u4(e,t)+"000"}function MW(e,t){return yr(e.getMonth()+1,t,2)}function FW(e,t){return yr(e.getMinutes(),t,2)}function LW(e,t){return yr(e.getSeconds(),t,2)}function zW(e){var t=e.getDay();return t===0?7:t}function UW(e,t){return yr(vp.count(co(e)-1,e),t,2)}function d4(e){var t=e.getDay();return t>=4||t===0?Zc(e):Zc.ceil(e)}function BW(e,t){return e=d4(e),yr(Zc.count(co(e),e)+(co(e).getDay()===4),t,2)}function WW(e){return e.getDay()}function VW(e,t){return yr(Sm.count(co(e)-1,e),t,2)}function qW(e,t){return yr(e.getFullYear()%100,t,2)}function HW(e,t){return e=d4(e),yr(e.getFullYear()%100,t,2)}function KW(e,t){return yr(e.getFullYear()%1e4,t,4)}function GW(e,t){var r=e.getDay();return e=r>=4||r===0?Zc(e):Zc.ceil(e),yr(e.getFullYear()%1e4,t,4)}function YW(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+yr(t/60|0,"0",2)+yr(t%60,"0",2)}function d_(e,t){return yr(e.getUTCDate(),t,2)}function JW(e,t){return yr(e.getUTCHours(),t,2)}function XW(e,t){return yr(e.getUTCHours()%12||12,t,2)}function QW(e,t){return yr(1+xp.count(uo(e),e),t,3)}function f4(e,t){return yr(e.getUTCMilliseconds(),t,3)}function ZW(e,t){return f4(e,t)+"000"}function eV(e,t){return yr(e.getUTCMonth()+1,t,2)}function tV(e,t){return yr(e.getUTCMinutes(),t,2)}function rV(e,t){return yr(e.getUTCSeconds(),t,2)}function nV(e){var t=e.getUTCDay();return t===0?7:t}function sV(e,t){return yr(bp.count(uo(e)-1,e),t,2)}function h4(e){var t=e.getUTCDay();return t>=4||t===0?eu(e):eu.ceil(e)}function iV(e,t){return e=h4(e),yr(eu.count(uo(e),e)+(uo(e).getUTCDay()===4),t,2)}function aV(e){return e.getUTCDay()}function oV(e,t){return yr(km.count(uo(e)-1,e),t,2)}function lV(e,t){return yr(e.getUTCFullYear()%100,t,2)}function cV(e,t){return e=h4(e),yr(e.getUTCFullYear()%100,t,2)}function uV(e,t){return yr(e.getUTCFullYear()%1e4,t,4)}function dV(e,t){var r=e.getUTCDay();return e=r>=4||r===0?eu(e):eu.ceil(e),yr(e.getUTCFullYear()%1e4,t,4)}function fV(){return"+0000"}function f_(){return"%"}function h_(e){return+e}function m_(e){return Math.floor(+e/1e3)}var Dc,m4,p4;hV({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function hV(e){return Dc=hW(e),m4=Dc.format,Dc.parse,p4=Dc.utcFormat,Dc.utcParse,Dc}function mV(e){return new Date(e)}function pV(e){return e instanceof Date?+e:+new Date(+e)}function Vb(e,t,r,n,s,a,l,u,d,m){var f=Pb(),p=f.invert,x=f.domain,v=m(".%L"),b=m(":%S"),w=m("%I:%M"),j=m("%I %p"),_=m("%a %d"),E=m("%b %d"),C=m("%B"),I=m("%Y");function A($){return(d($)<$?v:u($)<$?b:l($)<$?w:a($)<$?j:n($)<$?s($)<$?_:E:r($)<$?C:I)($)}return f.invert=function($){return new Date(p($))},f.domain=function($){return arguments.length?x(Array.from($,pV)):x().map(mV)},f.ticks=function($){var B=x();return e(B[0],B[B.length-1],$??10)},f.tickFormat=function($,B){return B==null?A:m(B)},f.nice=function($){var B=x();return(!$||typeof $.range!="function")&&($=t(B[0],B[B.length-1],$??10)),$?x(t4(B,$)):f},f.copy=function(){return ef(f,Vb(e,t,r,n,s,a,l,u,d,m))},f}function gV(){return Wi.apply(Vb(dW,fW,co,Bb,vp,tf,zb,Fb,Tl,m4).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function yV(){return Wi.apply(Vb(cW,uW,uo,Wb,bp,xp,Ub,Lb,Tl,p4).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function wp(){var e=0,t=1,r,n,s,a,l=Fs,u=!1,d;function m(p){return p==null||isNaN(p=+p)?d:l(s===0?.5:(p=(a(p)-r)*s,u?Math.max(0,Math.min(1,p)):p))}m.domain=function(p){return arguments.length?([e,t]=p,r=a(e=+e),n=a(t=+t),s=r===n?0:1/(n-r),m):[e,t]},m.clamp=function(p){return arguments.length?(u=!!p,m):u},m.interpolator=function(p){return arguments.length?(l=p,m):l};function f(p){return function(x){var v,b;return arguments.length?([v,b]=x,l=p(v,b),m):[l(0),l(1)]}}return m.range=f(gu),m.rangeRound=f(Ab),m.unknown=function(p){return arguments.length?(d=p,m):d},function(p){return a=p,r=p(e),n=p(t),s=r===n?0:1/(n-r),m}}function rl(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function g4(){var e=tl(wp()(Fs));return e.copy=function(){return rl(e,g4())},yo.apply(e,arguments)}function y4(){var e=Tb(wp()).domain([1,10]);return e.copy=function(){return rl(e,y4()).base(e.base())},yo.apply(e,arguments)}function x4(){var e=Db(wp());return e.copy=function(){return rl(e,x4()).constant(e.constant())},yo.apply(e,arguments)}function qb(){var e=$b(wp());return e.copy=function(){return rl(e,qb()).exponent(e.exponent())},yo.apply(e,arguments)}function xV(){return qb.apply(null,arguments).exponent(.5)}function v4(){var e=[],t=Fs;function r(n){if(n!=null&&!isNaN(n=+n))return t((Qd(e,n,1)-1)/(e.length-1))}return r.domain=function(n){if(!arguments.length)return e.slice();e=[];for(let s of n)s!=null&&!isNaN(s=+s)&&e.push(s);return e.sort(Ko),r},r.interpolator=function(n){return arguments.length?(t=n,r):t},r.range=function(){return e.map((n,s)=>t(s/(e.length-1)))},r.quantiles=function(n){return Array.from({length:n+1},(s,a)=>n9(e,a/n))},r.copy=function(){return v4(t).domain(e)},yo.apply(r,arguments)}function jp(){var e=0,t=.5,r=1,n=1,s,a,l,u,d,m=Fs,f,p=!1,x;function v(w){return isNaN(w=+w)?x:(w=.5+((w=+f(w))-a)*(n*w<n*a?u:d),m(p?Math.max(0,Math.min(1,w)):w))}v.domain=function(w){return arguments.length?([e,t,r]=w,s=f(e=+e),a=f(t=+t),l=f(r=+r),u=s===a?0:.5/(a-s),d=a===l?0:.5/(l-a),n=a<s?-1:1,v):[e,t,r]},v.clamp=function(w){return arguments.length?(p=!!w,v):p},v.interpolator=function(w){return arguments.length?(m=w,v):m};function b(w){return function(j){var _,E,C;return arguments.length?([_,E,C]=j,m=P9(w,[_,E,C]),v):[m(0),m(.5),m(1)]}}return v.range=b(gu),v.rangeRound=b(Ab),v.unknown=function(w){return arguments.length?(x=w,v):x},function(w){return f=w,s=w(e),a=w(t),l=w(r),u=s===a?0:.5/(a-s),d=a===l?0:.5/(l-a),n=a<s?-1:1,v}}function b4(){var e=tl(jp()(Fs));return e.copy=function(){return rl(e,b4())},yo.apply(e,arguments)}function w4(){var e=Tb(jp()).domain([.1,1,10]);return e.copy=function(){return rl(e,w4()).base(e.base())},yo.apply(e,arguments)}function j4(){var e=Db(jp());return e.copy=function(){return rl(e,j4()).constant(e.constant())},yo.apply(e,arguments)}function Hb(){var e=$b(jp());return e.copy=function(){return rl(e,Hb()).exponent(e.exponent())},yo.apply(e,arguments)}function vV(){return Hb.apply(null,arguments).exponent(.5)}const md=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:_b,scaleDiverging:b4,scaleDivergingLog:w4,scaleDivergingPow:Hb,scaleDivergingSqrt:vV,scaleDivergingSymlog:j4,scaleIdentity:e4,scaleImplicit:cv,scaleLinear:ZP,scaleLog:r4,scaleOrdinal:Nb,scalePoint:a9,scalePow:Rb,scaleQuantile:i4,scaleQuantize:a4,scaleRadial:s4,scaleSequential:g4,scaleSequentialLog:y4,scaleSequentialPow:qb,scaleSequentialQuantile:v4,scaleSequentialSqrt:xV,scaleSequentialSymlog:x4,scaleSqrt:Z9,scaleSymlog:n4,scaleThreshold:o4,scaleTime:gV,scaleUtc:yV,tickFormat:QP},Symbol.toStringTag,{value:"Module"}));var nl=e=>e.chartData,bV=ke([nl],e=>{var t=e.chartData!=null?e.chartData.length-1:0;return{chartData:e.chartData,computedData:e.computedData,dataEndIndex:t,dataStartIndex:0}}),Kb=(e,t,r,n)=>n?bV(e):nl(e);function Vl(e){if(Array.isArray(e)&&e.length===2){var[t,r]=e;if(jn(t)&&jn(r))return!0}return!1}function p_(e,t,r){return r?e:[Math.min(e[0],t[0]),Math.max(e[1],t[1])]}function S4(e,t){if(t&&typeof e!="function"&&Array.isArray(e)&&e.length===2){var[r,n]=e,s,a;if(jn(r))s=r;else if(typeof r=="function")return;if(jn(n))a=n;else if(typeof n=="function")return;var l=[s,a];if(Vl(l))return l}}function wV(e,t,r){if(!(!r&&t==null)){if(typeof e=="function"&&t!=null)try{var n=e(t,r);if(Vl(n))return p_(n,t,r)}catch{}if(Array.isArray(e)&&e.length===2){var[s,a]=e,l,u;if(s==="auto")t!=null&&(l=Math.min(...t));else if(Tt(s))l=s;else if(typeof s=="function")try{t!=null&&(l=s(t==null?void 0:t[0]))}catch{}else if(typeof s=="string"&&JN.test(s)){var d=JN.exec(s);if(d==null||t==null)l=void 0;else{var m=+d[1];l=t[0]-m}}else l=t==null?void 0:t[0];if(a==="auto")t!=null&&(u=Math.max(...t));else if(Tt(a))u=a;else if(typeof a=="function")try{t!=null&&(u=a(t==null?void 0:t[1]))}catch{}else if(typeof a=="string"&&XN.test(a)){var f=XN.exec(a);if(f==null||t==null)u=void 0;else{var p=+f[1];u=t[1]+p}}else u=t==null?void 0:t[1];var x=[l,u];if(Vl(x))return t==null?x:p_(x,t,r)}}}var yu=1e9,jV={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},Yb,Qr=!0,zi="[DecimalError] ",zl=zi+"Invalid argument: ",Gb=zi+"Exponent out of range: ",xu=Math.floor,Nl=Math.pow,SV=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,yi,ts=1e7,Br=7,k4=9007199254740991,Nm=xu(k4/Br),at={};at.absoluteValue=at.abs=function(){var e=new this.constructor(this);return e.s&&(e.s=1),e};at.comparedTo=at.cmp=function(e){var t,r,n,s,a=this;if(e=new a.constructor(e),a.s!==e.s)return a.s||-e.s;if(a.e!==e.e)return a.e>e.e^a.s<0?1:-1;for(n=a.d.length,s=e.d.length,t=0,r=n<s?n:s;t<r;++t)if(a.d[t]!==e.d[t])return a.d[t]>e.d[t]^a.s<0?1:-1;return n===s?0:n>s^a.s<0?1:-1};at.decimalPlaces=at.dp=function(){var e=this,t=e.d.length-1,r=(t-e.e)*Br;if(t=e.d[t],t)for(;t%10==0;t/=10)r--;return r<0?0:r};at.dividedBy=at.div=function(e){return ro(this,new this.constructor(e))};at.dividedToIntegerBy=at.idiv=function(e){var t=this,r=t.constructor;return Or(ro(t,new r(e),0,1),r.precision)};at.equals=at.eq=function(e){return!this.cmp(e)};at.exponent=function(){return On(this)};at.greaterThan=at.gt=function(e){return this.cmp(e)>0};at.greaterThanOrEqualTo=at.gte=function(e){return this.cmp(e)>=0};at.isInteger=at.isint=function(){return this.e>this.d.length-2};at.isNegative=at.isneg=function(){return this.s<0};at.isPositive=at.ispos=function(){return this.s>0};at.isZero=function(){return this.s===0};at.lessThan=at.lt=function(e){return this.cmp(e)<0};at.lessThanOrEqualTo=at.lte=function(e){return this.cmp(e)<1};at.logarithm=at.log=function(e){var t,r=this,n=r.constructor,s=n.precision,a=s+5;if(e===void 0)e=new n(10);else if(e=new n(e),e.s<1||e.eq(yi))throw Error(zi+"NaN");if(r.s<1)throw Error(zi+(r.s?"NaN":"-Infinity"));return r.eq(yi)?new n(0):(Qr=!1,t=ro(Ld(r,a),Ld(e,a),a),Qr=!0,Or(t,s))};at.minus=at.sub=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?C4(t,e):N4(t,(e.s=-e.s,e))};at.modulo=at.mod=function(e){var t,r=this,n=r.constructor,s=n.precision;if(e=new n(e),!e.s)throw Error(zi+"NaN");return r.s?(Qr=!1,t=ro(r,e,0,1).times(e),Qr=!0,r.minus(t)):Or(new n(r),s)};at.naturalExponential=at.exp=function(){return _4(this)};at.naturalLogarithm=at.ln=function(){return Ld(this)};at.negated=at.neg=function(){var e=new this.constructor(this);return e.s=-e.s||0,e};at.plus=at.add=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?N4(t,e):C4(t,(e.s=-e.s,e))};at.precision=at.sd=function(e){var t,r,n,s=this;if(e!==void 0&&e!==!!e&&e!==1&&e!==0)throw Error(zl+e);if(t=On(s)+1,n=s.d.length-1,r=n*Br+1,n=s.d[n],n){for(;n%10==0;n/=10)r--;for(n=s.d[0];n>=10;n/=10)r++}return e&&t>r?t:r};at.squareRoot=at.sqrt=function(){var e,t,r,n,s,a,l,u=this,d=u.constructor;if(u.s<1){if(!u.s)return new d(0);throw Error(zi+"NaN")}for(e=On(u),Qr=!1,s=Math.sqrt(+u),s==0||s==1/0?(t=_a(u.d),(t.length+e)%2==0&&(t+="0"),s=Math.sqrt(t),e=xu((e+1)/2)-(e<0||e%2),s==1/0?t="5e"+e:(t=s.toExponential(),t=t.slice(0,t.indexOf("e")+1)+e),n=new d(t)):n=new d(s.toString()),r=d.precision,s=l=r+3;;)if(a=n,n=a.plus(ro(u,a,l+2)).times(.5),_a(a.d).slice(0,l)===(t=_a(n.d)).slice(0,l)){if(t=t.slice(l-3,l+1),s==l&&t=="4999"){if(Or(a,r+1,0),a.times(a).eq(u)){n=a;break}}else if(t!="9999")break;l+=4}return Qr=!0,Or(n,r)};at.times=at.mul=function(e){var t,r,n,s,a,l,u,d,m,f=this,p=f.constructor,x=f.d,v=(e=new p(e)).d;if(!f.s||!e.s)return new p(0);for(e.s*=f.s,r=f.e+e.e,d=x.length,m=v.length,d<m&&(a=x,x=v,v=a,l=d,d=m,m=l),a=[],l=d+m,n=l;n--;)a.push(0);for(n=m;--n>=0;){for(t=0,s=d+n;s>n;)u=a[s]+v[n]*x[s-n-1]+t,a[s--]=u%ts|0,t=u/ts|0;a[s]=(a[s]+t)%ts|0}for(;!a[--l];)a.pop();return t?++r:a.shift(),e.d=a,e.e=r,Qr?Or(e,p.precision):e};at.toDecimalPlaces=at.todp=function(e,t){var r=this,n=r.constructor;return r=new n(r),e===void 0?r:(Oa(e,0,yu),t===void 0?t=n.rounding:Oa(t,0,8),Or(r,e+On(r)+1,t))};at.toExponential=function(e,t){var r,n=this,s=n.constructor;return e===void 0?r=ql(n,!0):(Oa(e,0,yu),t===void 0?t=s.rounding:Oa(t,0,8),n=Or(new s(n),e+1,t),r=ql(n,!0,e+1)),r};at.toFixed=function(e,t){var r,n,s=this,a=s.constructor;return e===void 0?ql(s):(Oa(e,0,yu),t===void 0?t=a.rounding:Oa(t,0,8),n=Or(new a(s),e+On(s)+1,t),r=ql(n.abs(),!1,e+On(n)+1),s.isneg()&&!s.isZero()?"-"+r:r)};at.toInteger=at.toint=function(){var e=this,t=e.constructor;return Or(new t(e),On(e)+1,t.rounding)};at.toNumber=function(){return+this};at.toPower=at.pow=function(e){var t,r,n,s,a,l,u=this,d=u.constructor,m=12,f=+(e=new d(e));if(!e.s)return new d(yi);if(u=new d(u),!u.s){if(e.s<1)throw Error(zi+"Infinity");return u}if(u.eq(yi))return u;if(n=d.precision,e.eq(yi))return Or(u,n);if(t=e.e,r=e.d.length-1,l=t>=r,a=u.s,l){if((r=f<0?-f:f)<=k4){for(s=new d(yi),t=Math.ceil(n/Br+4),Qr=!1;r%2&&(s=s.times(u),y_(s.d,t)),r=xu(r/2),r!==0;)u=u.times(u),y_(u.d,t);return Qr=!0,e.s<0?new d(yi).div(s):Or(s,n)}}else if(a<0)throw Error(zi+"NaN");return a=a<0&&e.d[Math.max(t,r)]&1?-1:1,u.s=1,Qr=!1,s=e.times(Ld(u,n+m)),Qr=!0,s=_4(s),s.s=a,s};at.toPrecision=function(e,t){var r,n,s=this,a=s.constructor;return e===void 0?(r=On(s),n=ql(s,r<=a.toExpNeg||r>=a.toExpPos)):(Oa(e,1,yu),t===void 0?t=a.rounding:Oa(t,0,8),s=Or(new a(s),e,t),r=On(s),n=ql(s,e<=r||r<=a.toExpNeg,e)),n};at.toSignificantDigits=at.tosd=function(e,t){var r=this,n=r.constructor;return e===void 0?(e=n.precision,t=n.rounding):(Oa(e,1,yu),t===void 0?t=n.rounding:Oa(t,0,8)),Or(new n(r),e,t)};at.toString=at.valueOf=at.val=at.toJSON=at[Symbol.for("nodejs.util.inspect.custom")]=function(){var e=this,t=On(e),r=e.constructor;return ql(e,t<=r.toExpNeg||t>=r.toExpPos)};function N4(e,t){var r,n,s,a,l,u,d,m,f=e.constructor,p=f.precision;if(!e.s||!t.s)return t.s||(t=new f(e)),Qr?Or(t,p):t;if(d=e.d,m=t.d,l=e.e,s=t.e,d=d.slice(),a=l-s,a){for(a<0?(n=d,a=-a,u=m.length):(n=m,s=l,u=d.length),l=Math.ceil(p/Br),u=l>u?l+1:u+1,a>u&&(a=u,n.length=1),n.reverse();a--;)n.push(0);n.reverse()}for(u=d.length,a=m.length,u-a<0&&(a=u,n=m,m=d,d=n),r=0;a;)r=(d[--a]=d[a]+m[a]+r)/ts|0,d[a]%=ts;for(r&&(d.unshift(r),++s),u=d.length;d[--u]==0;)d.pop();return t.d=d,t.e=s,Qr?Or(t,p):t}function Oa(e,t,r){if(e!==~~e||e<t||e>r)throw Error(zl+e)}function _a(e){var t,r,n,s=e.length-1,a="",l=e[0];if(s>0){for(a+=l,t=1;t<s;t++)n=e[t]+"",r=Br-n.length,r&&(a+=Uo(r)),a+=n;l=e[t],n=l+"",r=Br-n.length,r&&(a+=Uo(r))}else if(l===0)return"0";for(;l%10===0;)l/=10;return a+l}var ro=(function(){function e(n,s){var a,l=0,u=n.length;for(n=n.slice();u--;)a=n[u]*s+l,n[u]=a%ts|0,l=a/ts|0;return l&&n.unshift(l),n}function t(n,s,a,l){var u,d;if(a!=l)d=a>l?1:-1;else for(u=d=0;u<a;u++)if(n[u]!=s[u]){d=n[u]>s[u]?1:-1;break}return d}function r(n,s,a){for(var l=0;a--;)n[a]-=l,l=n[a]<s[a]?1:0,n[a]=l*ts+n[a]-s[a];for(;!n[0]&&n.length>1;)n.shift()}return function(n,s,a,l){var u,d,m,f,p,x,v,b,w,j,_,E,C,I,A,$,B,T,K=n.constructor,Q=n.s==s.s?1:-1,se=n.d,G=s.d;if(!n.s)return new K(n);if(!s.s)throw Error(zi+"Division by zero");for(d=n.e-s.e,B=G.length,A=se.length,v=new K(Q),b=v.d=[],m=0;G[m]==(se[m]||0);)++m;if(G[m]>(se[m]||0)&&--d,a==null?E=a=K.precision:l?E=a+(On(n)-On(s))+1:E=a,E<0)return new K(0);if(E=E/Br+2|0,m=0,B==1)for(f=0,G=G[0],E++;(m<A||f)&&E--;m++)C=f*ts+(se[m]||0),b[m]=C/G|0,f=C%G|0;else{for(f=ts/(G[0]+1)|0,f>1&&(G=e(G,f),se=e(se,f),B=G.length,A=se.length),I=B,w=se.slice(0,B),j=w.length;j<B;)w[j++]=0;T=G.slice(),T.unshift(0),$=G[0],G[1]>=ts/2&&++$;do f=0,u=t(G,w,B,j),u<0?(_=w[0],B!=j&&(_=_*ts+(w[1]||0)),f=_/$|0,f>1?(f>=ts&&(f=ts-1),p=e(G,f),x=p.length,j=w.length,u=t(p,w,x,j),u==1&&(f--,r(p,B<x?T:G,x))):(f==0&&(u=f=1),p=G.slice()),x=p.length,x<j&&p.unshift(0),r(w,p,j),u==-1&&(j=w.length,u=t(G,w,B,j),u<1&&(f++,r(w,B<j?T:G,j))),j=w.length):u===0&&(f++,w=[0]),b[m++]=f,u&&w[0]?w[j++]=se[I]||0:(w=[se[I]],j=1);while((I++<A||w[0]!==void 0)&&E--)}return b[0]||b.shift(),v.e=d,Or(v,l?a+On(v)+1:a)}})();function _4(e,t){var r,n,s,a,l,u,d=0,m=0,f=e.constructor,p=f.precision;if(On(e)>16)throw Error(Gb+On(e));if(!e.s)return new f(yi);for(Qr=!1,u=p,l=new f(.03125);e.abs().gte(.1);)e=e.times(l),m+=5;for(n=Math.log(Nl(2,m))/Math.LN10*2+5|0,u+=n,r=s=a=new f(yi),f.precision=u;;){if(s=Or(s.times(e),u),r=r.times(++d),l=a.plus(ro(s,r,u)),_a(l.d).slice(0,u)===_a(a.d).slice(0,u)){for(;m--;)a=Or(a.times(a),u);return f.precision=p,t==null?(Qr=!0,Or(a,p)):a}a=l}}function On(e){for(var t=e.e*Br,r=e.d[0];r>=10;r/=10)t++;return t}function W0(e,t,r){if(t>e.LN10.sd())throw Qr=!0,r&&(e.precision=r),Error(zi+"LN10 precision limit exceeded");return Or(new e(e.LN10),t)}function Uo(e){for(var t="";e--;)t+="0";return t}function Ld(e,t){var r,n,s,a,l,u,d,m,f,p=1,x=10,v=e,b=v.d,w=v.constructor,j=w.precision;if(v.s<1)throw Error(zi+(v.s?"NaN":"-Infinity"));if(v.eq(yi))return new w(0);if(t==null?(Qr=!1,m=j):m=t,v.eq(10))return t==null&&(Qr=!0),W0(w,m);if(m+=x,w.precision=m,r=_a(b),n=r.charAt(0),a=On(v),Math.abs(a)<15e14){for(;n<7&&n!=1||n==1&&r.charAt(1)>3;)v=v.times(e),r=_a(v.d),n=r.charAt(0),p++;a=On(v),n>1?(v=new w("0."+r),a++):v=new w(n+"."+r.slice(1))}else return d=W0(w,m+2,j).times(a+""),v=Ld(new w(n+"."+r.slice(1)),m-x).plus(d),w.precision=j,t==null?(Qr=!0,Or(v,j)):v;for(u=l=v=ro(v.minus(yi),v.plus(yi),m),f=Or(v.times(v),m),s=3;;){if(l=Or(l.times(f),m),d=u.plus(ro(l,new w(s),m)),_a(d.d).slice(0,m)===_a(u.d).slice(0,m))return u=u.times(2),a!==0&&(u=u.plus(W0(w,m+2,j).times(a+""))),u=ro(u,new w(p),m),w.precision=j,t==null?(Qr=!0,Or(u,j)):u;u=d,s+=2}}function g_(e,t){var r,n,s;for((r=t.indexOf("."))>-1&&(t=t.replace(".","")),(n=t.search(/e/i))>0?(r<0&&(r=n),r+=+t.slice(n+1),t=t.substring(0,n)):r<0&&(r=t.length),n=0;t.charCodeAt(n)===48;)++n;for(s=t.length;t.charCodeAt(s-1)===48;)--s;if(t=t.slice(n,s),t){if(s-=n,r=r-n-1,e.e=xu(r/Br),e.d=[],n=(r+1)%Br,r<0&&(n+=Br),n<s){for(n&&e.d.push(+t.slice(0,n)),s-=Br;n<s;)e.d.push(+t.slice(n,n+=Br));t=t.slice(n),n=Br-t.length}else n-=s;for(;n--;)t+="0";if(e.d.push(+t),Qr&&(e.e>Nm||e.e<-Nm))throw Error(Gb+r)}else e.s=0,e.e=0,e.d=[0];return e}function Or(e,t,r){var n,s,a,l,u,d,m,f,p=e.d;for(l=1,a=p[0];a>=10;a/=10)l++;if(n=t-l,n<0)n+=Br,s=t,m=p[f=0];else{if(f=Math.ceil((n+1)/Br),a=p.length,f>=a)return e;for(m=a=p[f],l=1;a>=10;a/=10)l++;n%=Br,s=n-Br+l}if(r!==void 0&&(a=Nl(10,l-s-1),u=m/a%10|0,d=t<0||p[f+1]!==void 0||m%a,d=r<4?(u||d)&&(r==0||r==(e.s<0?3:2)):u>5||u==5&&(r==4||d||r==6&&(n>0?s>0?m/Nl(10,l-s):0:p[f-1])%10&1||r==(e.s<0?8:7))),t<1||!p[0])return d?(a=On(e),p.length=1,t=t-a-1,p[0]=Nl(10,(Br-t%Br)%Br),e.e=xu(-t/Br)||0):(p.length=1,p[0]=e.e=e.s=0),e;if(n==0?(p.length=f,a=1,f--):(p.length=f+1,a=Nl(10,Br-n),p[f]=s>0?(m/Nl(10,l-s)%Nl(10,s)|0)*a:0),d)for(;;)if(f==0){(p[0]+=a)==ts&&(p[0]=1,++e.e);break}else{if(p[f]+=a,p[f]!=ts)break;p[f--]=0,a=1}for(n=p.length;p[--n]===0;)p.pop();if(Qr&&(e.e>Nm||e.e<-Nm))throw Error(Gb+On(e));return e}function C4(e,t){var r,n,s,a,l,u,d,m,f,p,x=e.constructor,v=x.precision;if(!e.s||!t.s)return t.s?t.s=-t.s:t=new x(e),Qr?Or(t,v):t;if(d=e.d,p=t.d,n=t.e,m=e.e,d=d.slice(),l=m-n,l){for(f=l<0,f?(r=d,l=-l,u=p.length):(r=p,n=m,u=d.length),s=Math.max(Math.ceil(v/Br),u)+2,l>s&&(l=s,r.length=1),r.reverse(),s=l;s--;)r.push(0);r.reverse()}else{for(s=d.length,u=p.length,f=s<u,f&&(u=s),s=0;s<u;s++)if(d[s]!=p[s]){f=d[s]<p[s];break}l=0}for(f&&(r=d,d=p,p=r,t.s=-t.s),u=d.length,s=p.length-u;s>0;--s)d[u++]=0;for(s=p.length;s>l;){if(d[--s]<p[s]){for(a=s;a&&d[--a]===0;)d[a]=ts-1;--d[a],d[s]+=ts}d[s]-=p[s]}for(;d[--u]===0;)d.pop();for(;d[0]===0;d.shift())--n;return d[0]?(t.d=d,t.e=n,Qr?Or(t,v):t):new x(0)}function ql(e,t,r){var n,s=On(e),a=_a(e.d),l=a.length;return t?(r&&(n=r-l)>0?a=a.charAt(0)+"."+a.slice(1)+Uo(n):l>1&&(a=a.charAt(0)+"."+a.slice(1)),a=a+(s<0?"e":"e+")+s):s<0?(a="0."+Uo(-s-1)+a,r&&(n=r-l)>0&&(a+=Uo(n))):s>=l?(a+=Uo(s+1-l),r&&(n=r-s-1)>0&&(a=a+"."+Uo(n))):((n=s+1)<l&&(a=a.slice(0,n)+"."+a.slice(n)),r&&(n=r-l)>0&&(s+1===l&&(a+="."),a+=Uo(n))),e.s<0?"-"+a:a}function y_(e,t){if(e.length>t)return e.length=t,!0}function E4(e){var t,r,n;function s(a){var l=this;if(!(l instanceof s))return new s(a);if(l.constructor=s,a instanceof s){l.s=a.s,l.e=a.e,l.d=(a=a.d)?a.slice():a;return}if(typeof a=="number"){if(a*0!==0)throw Error(zl+a);if(a>0)l.s=1;else if(a<0)a=-a,l.s=-1;else{l.s=0,l.e=0,l.d=[0];return}if(a===~~a&&a<1e7){l.e=0,l.d=[a];return}return g_(l,a.toString())}else if(typeof a!="string")throw Error(zl+a);if(a.charCodeAt(0)===45?(a=a.slice(1),l.s=-1):l.s=1,SV.test(a))g_(l,a);else throw Error(zl+a)}if(s.prototype=at,s.ROUND_UP=0,s.ROUND_DOWN=1,s.ROUND_CEIL=2,s.ROUND_FLOOR=3,s.ROUND_HALF_UP=4,s.ROUND_HALF_DOWN=5,s.ROUND_HALF_EVEN=6,s.ROUND_HALF_CEIL=7,s.ROUND_HALF_FLOOR=8,s.clone=E4,s.config=s.set=kV,e===void 0&&(e={}),e)for(n=["precision","rounding","toExpNeg","toExpPos","LN10"],t=0;t<n.length;)e.hasOwnProperty(r=n[t++])||(e[r]=this[r]);return s.config(e),s}function kV(e){if(!e||typeof e!="object")throw Error(zi+"Object expected");var t,r,n,s=["precision",1,yu,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(t=0;t<s.length;t+=3)if((n=e[r=s[t]])!==void 0)if(xu(n)===n&&n>=s[t+1]&&n<=s[t+2])this[r]=n;else throw Error(zl+r+": "+n);if((n=e[r="LN10"])!==void 0)if(n==Math.LN10)this[r]=new this(n);else throw Error(zl+r+": "+n);return this}var Yb=E4(jV);yi=new Yb(1);const Sr=Yb;var NV=e=>e,A4={},P4=e=>e===A4,x_=e=>function t(){return arguments.length===0||arguments.length===1&&P4(arguments.length<=0?void 0:arguments[0])?t:e(...arguments)},O4=(e,t)=>e===1?t:x_(function(){for(var r=arguments.length,n=new Array(r),s=0;s<r;s++)n[s]=arguments[s];var a=n.filter(l=>l!==A4).length;return a>=e?t(...n):O4(e-a,x_(function(){for(var l=arguments.length,u=new Array(l),d=0;d<l;d++)u[d]=arguments[d];var m=n.map(f=>P4(f)?u.shift():f);return t(...m,...u)}))}),Sp=e=>O4(e.length,e),hv=(e,t)=>{for(var r=[],n=e;n<t;++n)r[n-e]=n;return r},_V=Sp((e,t)=>Array.isArray(t)?t.map(e):Object.keys(t).map(r=>t[r]).map(e)),CV=function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];if(!r.length)return NV;var s=r.reverse(),a=s[0],l=s.slice(1);return function(){return l.reduce((u,d)=>d(u),a(...arguments))}},mv=e=>Array.isArray(e)?e.reverse():e.split("").reverse().join(""),I4=e=>{var t=null,r=null;return function(){for(var n=arguments.length,s=new Array(n),a=0;a<n;a++)s[a]=arguments[a];return t&&s.every((l,u)=>{var d;return l===((d=t)===null||d===void 0?void 0:d[u])})||(t=s,r=e(...s)),r}};function T4(e){var t;return e===0?t=1:t=Math.floor(new Sr(e).abs().log(10).toNumber())+1,t}function D4(e,t,r){for(var n=new Sr(e),s=0,a=[];n.lt(t)&&s<1e5;)a.push(n.toNumber()),n=n.add(r),s++;return a}Sp((e,t,r)=>{var n=+e,s=+t;return n+r*(s-n)});Sp((e,t,r)=>{var n=t-+e;return n=n||1/0,(r-e)/n});Sp((e,t,r)=>{var n=t-+e;return n=n||1/0,Math.max(0,Math.min(1,(r-e)/n))});var $4=e=>{var[t,r]=e,[n,s]=[t,r];return t>r&&([n,s]=[r,t]),[n,s]},R4=(e,t,r)=>{if(e.lte(0))return new Sr(0);var n=T4(e.toNumber()),s=new Sr(10).pow(n),a=e.div(s),l=n!==1?.05:.1,u=new Sr(Math.ceil(a.div(l).toNumber())).add(r).mul(l),d=u.mul(s);return t?new Sr(d.toNumber()):new Sr(Math.ceil(d.toNumber()))},EV=(e,t,r)=>{var n=new Sr(1),s=new Sr(e);if(!s.isint()&&r){var a=Math.abs(e);a<1?(n=new Sr(10).pow(T4(e)-1),s=new Sr(Math.floor(s.div(n).toNumber())).mul(n)):a>1&&(s=new Sr(Math.floor(e)))}else e===0?s=new Sr(Math.floor((t-1)/2)):r||(s=new Sr(Math.floor(e)));var l=Math.floor((t-1)/2),u=CV(_V(d=>s.add(new Sr(d-l).mul(n)).toNumber()),hv);return u(0,t)},M4=function(t,r,n,s){var a=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((r-t)/(n-1)))return{step:new Sr(0),tickMin:new Sr(0),tickMax:new Sr(0)};var l=R4(new Sr(r).sub(t).div(n-1),s,a),u;t<=0&&r>=0?u=new Sr(0):(u=new Sr(t).add(r).div(2),u=u.sub(new Sr(u).mod(l)));var d=Math.ceil(u.sub(t).div(l).toNumber()),m=Math.ceil(new Sr(r).sub(u).div(l).toNumber()),f=d+m+1;return f>n?M4(t,r,n,s,a+1):(f<n&&(m=r>0?m+(n-f):m,d=r>0?d:d+(n-f)),{step:l,tickMin:u.sub(new Sr(d).mul(l)),tickMax:u.add(new Sr(m).mul(l))})};function AV(e){var[t,r]=e,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,a=Math.max(n,2),[l,u]=$4([t,r]);if(l===-1/0||u===1/0){var d=u===1/0?[l,...hv(0,n-1).map(()=>1/0)]:[...hv(0,n-1).map(()=>-1/0),u];return t>r?mv(d):d}if(l===u)return EV(l,n,s);var{step:m,tickMin:f,tickMax:p}=M4(l,u,a,s,0),x=D4(f,p.add(new Sr(.1).mul(m)),m);return t>r?mv(x):x}function PV(e,t){var[r,n]=e,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,[a,l]=$4([r,n]);if(a===-1/0||l===1/0)return[r,n];if(a===l)return[a];var u=Math.max(t,2),d=R4(new Sr(l).sub(a).div(u-1),s,0),m=[...D4(new Sr(a),new Sr(l),d),l];return s===!1&&(m=m.map(f=>Math.round(f))),r>n?mv(m):m}var OV=I4(AV),IV=I4(PV),F4=e=>e.rootProps.maxBarSize,TV=e=>e.rootProps.barGap,L4=e=>e.rootProps.barCategoryGap,DV=e=>e.rootProps.barSize,kp=e=>e.rootProps.stackOffset,Jb=e=>e.options.chartName,Xb=e=>e.rootProps.syncId,z4=e=>e.rootProps.syncMethod,Qb=e=>e.options.eventEmitter,ti={grid:-100,barBackground:-50,area:100,cursorRectangle:200,bar:300,line:400,axis:500,scatter:600,activeBar:1e3,cursorLine:1100,activeDot:1200,label:2e3},Ya={allowDuplicatedCategory:!0,angleAxisId:0,reversed:!1,scale:"auto",tick:!0,type:"category"},mi={allowDataOverflow:!1,allowDuplicatedCategory:!0,radiusAxisId:0,scale:"auto",tick:!0,tickCount:5,type:"number"},Np=(e,t)=>{if(!(!e||!t))return e!=null&&e.reversed?[t[1],t[0]]:t},$V={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:!1,dataKey:void 0,domain:void 0,id:Ya.angleAxisId,includeHidden:!1,name:void 0,reversed:Ya.reversed,scale:Ya.scale,tick:Ya.tick,tickCount:void 0,ticks:void 0,type:Ya.type,unit:void 0},RV={allowDataOverflow:mi.allowDataOverflow,allowDecimals:!1,allowDuplicatedCategory:mi.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:mi.radiusAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:mi.scale,tick:mi.tick,tickCount:mi.tickCount,ticks:void 0,type:mi.type,unit:void 0},MV={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:Ya.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:Ya.angleAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:Ya.scale,tick:Ya.tick,tickCount:void 0,ticks:void 0,type:"number",unit:void 0},FV={allowDataOverflow:mi.allowDataOverflow,allowDecimals:!1,allowDuplicatedCategory:mi.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:mi.radiusAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:mi.scale,tick:mi.tick,tickCount:mi.tickCount,ticks:void 0,type:"category",unit:void 0},Zb=(e,t)=>e.polarAxis.angleAxis[t]!=null?e.polarAxis.angleAxis[t]:e.layout.layoutType==="radial"?MV:$V,ew=(e,t)=>e.polarAxis.radiusAxis[t]!=null?e.polarAxis.radiusAxis[t]:e.layout.layoutType==="radial"?FV:RV,_p=e=>e.polarOptions,tw=ke([po,go,as],O7),U4=ke([_p,tw],(e,t)=>{if(e!=null)return ma(e.innerRadius,t,0)}),B4=ke([_p,tw],(e,t)=>{if(e!=null)return ma(e.outerRadius,t,t*.8)}),LV=e=>{if(e==null)return[0,0];var{startAngle:t,endAngle:r}=e;return[t,r]},W4=ke([_p],LV);ke([Zb,W4],Np);var V4=ke([tw,U4,B4],(e,t,r)=>{if(!(e==null||t==null||r==null))return[t,r]});ke([ew,V4],Np);var q4=ke([Nr,_p,U4,B4,po,go],(e,t,r,n,s,a)=>{if(!(e!=="centric"&&e!=="radial"||t==null||r==null||n==null)){var{cx:l,cy:u,startAngle:d,endAngle:m}=t;return{cx:ma(l,s,s/2),cy:ma(u,a,a/2),innerRadius:r,outerRadius:n,startAngle:d,endAngle:m,clockWise:!1}}}),Bn=(e,t)=>t,Cp=(e,t,r)=>r;function rw(e){return e==null?void 0:e.id}function H4(e,t,r){var{chartData:n=[]}=t,{allowDuplicatedCategory:s,dataKey:a}=r,l=new Map;return e.forEach(u=>{var d,m=(d=u.data)!==null&&d!==void 0?d:n;if(!(m==null||m.length===0)){var f=rw(u);m.forEach((p,x)=>{var v=a==null||s?x:String(Ls(p,a,null)),b=Ls(p,u.dataKey,0),w;l.has(v)?w=l.get(v):w={},Object.assign(w,{[f]:b}),l.set(v,w)})}}),Array.from(l.values())}function Ep(e){return e.stackId!=null&&e.dataKey!=null}var Ap=(e,t)=>e===t?!0:e==null||t==null?!1:e[0]===t[0]&&e[1]===t[1];function Pp(e,t){return Array.isArray(e)&&Array.isArray(t)&&e.length===0&&t.length===0?!0:e===t}function zV(e,t){if(e.length===t.length){for(var r=0;r<e.length;r++)if(e[r]!==t[r])return!1;return!0}return!1}var Wn=e=>{var t=Nr(e);return t==="horizontal"?"xAxis":t==="vertical"?"yAxis":t==="centric"?"angleAxis":"radiusAxis"},vu=e=>e.tooltip.settings.axisId;function v_(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function _m(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?v_(Object(r),!0).forEach(function(n){UV(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):v_(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function UV(e,t,r){return(t=BV(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function BV(e){var t=WV(e,"string");return typeof t=="symbol"?t:t+""}function WV(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var pv=[0,"auto"],di={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:void 0,height:30,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"bottom",padding:{left:0,right:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"category",unit:void 0},K4=(e,t)=>e.cartesianAxis.xAxis[t],xo=(e,t)=>{var r=K4(e,t);return r??di},fi={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:pv,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"left",padding:{top:0,bottom:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"number",unit:void 0,width:Xd},G4=(e,t)=>e.cartesianAxis.yAxis[t],vo=(e,t)=>{var r=G4(e,t);return r??fi},VV={domain:[0,"auto"],includeHidden:!1,reversed:!1,allowDataOverflow:!1,allowDuplicatedCategory:!1,dataKey:void 0,id:0,name:"",range:[64,64],scale:"auto",type:"number",unit:""},nw=(e,t)=>{var r=e.cartesianAxis.zAxis[t];return r??VV},zs=(e,t,r)=>{switch(t){case"xAxis":return xo(e,r);case"yAxis":return vo(e,r);case"zAxis":return nw(e,r);case"angleAxis":return Zb(e,r);case"radiusAxis":return ew(e,r);default:throw new Error("Unexpected axis type: ".concat(t))}},qV=(e,t,r)=>{switch(t){case"xAxis":return xo(e,r);case"yAxis":return vo(e,r);default:throw new Error("Unexpected axis type: ".concat(t))}},rf=(e,t,r)=>{switch(t){case"xAxis":return xo(e,r);case"yAxis":return vo(e,r);case"angleAxis":return Zb(e,r);case"radiusAxis":return ew(e,r);default:throw new Error("Unexpected axis type: ".concat(t))}},Y4=e=>e.graphicalItems.cartesianItems.some(t=>t.type==="bar")||e.graphicalItems.polarItems.some(t=>t.type==="radialBar");function J4(e,t){return r=>{switch(e){case"xAxis":return"xAxisId"in r&&r.xAxisId===t;case"yAxis":return"yAxisId"in r&&r.yAxisId===t;case"zAxis":return"zAxisId"in r&&r.zAxisId===t;case"angleAxis":return"angleAxisId"in r&&r.angleAxisId===t;case"radiusAxis":return"radiusAxisId"in r&&r.radiusAxisId===t;default:return!1}}}var sw=e=>e.graphicalItems.cartesianItems,HV=ke([Bn,Cp],J4),X4=(e,t,r)=>e.filter(r).filter(n=>(t==null?void 0:t.includeHidden)===!0?!0:!n.hide),nf=ke([sw,zs,HV],X4,{memoizeOptions:{resultEqualityCheck:Pp}}),Q4=ke([nf],e=>e.filter(t=>t.type==="area"||t.type==="bar").filter(Ep)),Z4=e=>e.filter(t=>!("stackId"in t)||t.stackId===void 0),KV=ke([nf],Z4),eO=e=>e.map(t=>t.data).filter(Boolean).flat(1),GV=ke([nf],eO,{memoizeOptions:{resultEqualityCheck:Pp}}),tO=(e,t)=>{var{chartData:r=[],dataStartIndex:n,dataEndIndex:s}=t;return e.length>0?e:r.slice(n,s+1)},iw=ke([GV,Kb],tO),rO=(e,t,r)=>(t==null?void 0:t.dataKey)!=null?e.map(n=>({value:Ls(n,t.dataKey)})):r.length>0?r.map(n=>n.dataKey).flatMap(n=>e.map(s=>({value:Ls(s,n)}))):e.map(n=>({value:n})),Op=ke([iw,zs,nf],rO);function nO(e,t){switch(e){case"xAxis":return t.direction==="x";case"yAxis":return t.direction==="y";default:return!1}}function Ih(e){if(Pa(e)||e instanceof Date){var t=Number(e);if(jn(t))return t}}function b_(e){if(Array.isArray(e)){var t=[Ih(e[0]),Ih(e[1])];return Vl(t)?t:void 0}var r=Ih(e);if(r!=null)return[r,r]}function fo(e){return e.map(Ih).filter(pz)}function YV(e,t,r){return!r||typeof t!="number"||Aa(t)?[]:r.length?fo(r.flatMap(n=>{var s=Ls(e,n.dataKey),a,l;if(Array.isArray(s)?[a,l]=s:a=l=s,!(!jn(a)||!jn(l)))return[t-a,t+l]})):[]}var Vn=e=>{var t=Wn(e),r=vu(e);return rf(e,t,r)},sO=ke([Vn],e=>e==null?void 0:e.dataKey),JV=ke([Q4,Kb,Vn],H4),iO=(e,t,r)=>{var n={},s=t.reduce((a,l)=>(l.stackId==null||(a[l.stackId]==null&&(a[l.stackId]=[]),a[l.stackId].push(l)),a),n);return Object.fromEntries(Object.entries(s).map(a=>{var[l,u]=a,d=u.map(rw);return[l,{stackedData:OU(e,d,r),graphicalItems:u}]}))},gv=ke([JV,Q4,kp],iO),aO=(e,t,r,n)=>{var{dataStartIndex:s,dataEndIndex:a}=t;if(n==null&&r!=="zAxis"){var l=RU(e,s,a);if(!(l!=null&&l[0]===0&&l[1]===0))return l}},XV=ke([zs],e=>e.allowDataOverflow),aw=e=>{var t;if(e==null||!("domain"in e))return pv;if(e.domain!=null)return e.domain;if(e.ticks!=null){if(e.type==="number"){var r=fo(e.ticks);return[Math.min(...r),Math.max(...r)]}if(e.type==="category")return e.ticks.map(String)}return(t=e==null?void 0:e.domain)!==null&&t!==void 0?t:pv},oO=ke([zs],aw),lO=ke([oO,XV],S4),QV=ke([gv,nl,Bn,lO],aO,{memoizeOptions:{resultEqualityCheck:Ap}}),ow=e=>e.errorBars,ZV=(e,t,r)=>e.flatMap(n=>t[n.id]).filter(Boolean).filter(n=>nO(r,n)),Cm=function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];var s=r.filter(Boolean);if(s.length!==0){var a=s.flat(),l=Math.min(...a),u=Math.max(...a);return[l,u]}},cO=(e,t,r,n,s)=>{var a,l;if(r.length>0&&e.forEach(u=>{r.forEach(d=>{var m,f,p=(m=n[d.id])===null||m===void 0?void 0:m.filter(_=>nO(s,_)),x=Ls(u,(f=t.dataKey)!==null&&f!==void 0?f:d.dataKey),v=YV(u,x,p);if(v.length>=2){var b=Math.min(...v),w=Math.max(...v);(a==null||b<a)&&(a=b),(l==null||w>l)&&(l=w)}var j=b_(x);j!=null&&(a=a==null?j[0]:Math.min(a,j[0]),l=l==null?j[1]:Math.max(l,j[1]))})}),(t==null?void 0:t.dataKey)!=null&&e.forEach(u=>{var d=b_(Ls(u,t.dataKey));d!=null&&(a=a==null?d[0]:Math.min(a,d[0]),l=l==null?d[1]:Math.max(l,d[1]))}),jn(a)&&jn(l))return[a,l]},eq=ke([iw,zs,KV,ow,Bn],cO,{memoizeOptions:{resultEqualityCheck:Ap}});function tq(e){var{value:t}=e;if(Pa(t)||t instanceof Date)return t}var rq=(e,t,r)=>{var n=e.map(tq).filter(s=>s!=null);return r&&(t.dataKey==null||t.allowDuplicatedCategory&&$A(n))?BP(0,e.length):t.allowDuplicatedCategory?n:Array.from(new Set(n))},uO=e=>e.referenceElements.dots,bu=(e,t,r)=>e.filter(n=>n.ifOverflow==="extendDomain").filter(n=>t==="xAxis"?n.xAxisId===r:n.yAxisId===r),nq=ke([uO,Bn,Cp],bu),dO=e=>e.referenceElements.areas,sq=ke([dO,Bn,Cp],bu),fO=e=>e.referenceElements.lines,iq=ke([fO,Bn,Cp],bu),hO=(e,t)=>{var r=fo(e.map(n=>t==="xAxis"?n.x:n.y));if(r.length!==0)return[Math.min(...r),Math.max(...r)]},aq=ke(nq,Bn,hO),mO=(e,t)=>{var r=fo(e.flatMap(n=>[t==="xAxis"?n.x1:n.y1,t==="xAxis"?n.x2:n.y2]));if(r.length!==0)return[Math.min(...r),Math.max(...r)]},oq=ke([sq,Bn],mO);function lq(e){var t;if(e.x!=null)return fo([e.x]);var r=(t=e.segment)===null||t===void 0?void 0:t.map(n=>n.x);return r==null||r.length===0?[]:fo(r)}function cq(e){var t;if(e.y!=null)return fo([e.y]);var r=(t=e.segment)===null||t===void 0?void 0:t.map(n=>n.y);return r==null||r.length===0?[]:fo(r)}var pO=(e,t)=>{var r=e.flatMap(n=>t==="xAxis"?lq(n):cq(n));if(r.length!==0)return[Math.min(...r),Math.max(...r)]},uq=ke([iq,Bn],pO),dq=ke(aq,uq,oq,(e,t,r)=>Cm(e,r,t)),gO=(e,t,r,n,s,a,l,u)=>{if(r!=null)return r;var d=l==="vertical"&&u==="xAxis"||l==="horizontal"&&u==="yAxis",m=d?Cm(n,a,s):Cm(a,s);return wV(t,m,e.allowDataOverflow)},fq=ke([zs,oO,lO,QV,eq,dq,Nr,Bn],gO,{memoizeOptions:{resultEqualityCheck:Ap}}),hq=[0,1],yO=(e,t,r,n,s,a,l)=>{if(!((e==null||r==null||r.length===0)&&l===void 0)){var{dataKey:u,type:d}=e,m=Xl(t,a);if(m&&u==null){var f;return BP(0,(f=r==null?void 0:r.length)!==null&&f!==void 0?f:0)}return d==="category"?rq(n,e,m):s==="expand"?hq:l}},lw=ke([zs,Nr,iw,Op,kp,Bn,fq],yO),xO=(e,t,r,n,s)=>{if(e!=null){var{scale:a,type:l}=e;if(a==="auto")return t==="radial"&&s==="radiusAxis"?"band":t==="radial"&&s==="angleAxis"?"linear":l==="category"&&n&&(n.indexOf("LineChart")>=0||n.indexOf("AreaChart")>=0||n.indexOf("ComposedChart")>=0&&!r)?"point":l==="category"?"band":"linear";if(typeof a=="string"){var u="scale".concat(Gd(a));return u in md?u:"point"}}},sf=ke([zs,Nr,Y4,Jb,Bn],xO);function mq(e){if(e!=null){if(e in md)return md[e]();var t="scale".concat(Gd(e));if(t in md)return md[t]()}}function cw(e,t,r,n){if(!(r==null||n==null)){if(typeof e.scale=="function")return e.scale.copy().domain(r).range(n);var s=mq(t);if(s!=null){var a=s.domain(r).range(n);return _U(a),a}}}var vO=(e,t,r)=>{var n=aw(t);if(!(r!=="auto"&&r!=="linear")){if(t!=null&&t.tickCount&&Array.isArray(n)&&(n[0]==="auto"||n[1]==="auto")&&Vl(e))return OV(e,t.tickCount,t.allowDecimals);if(t!=null&&t.tickCount&&t.type==="number"&&Vl(e))return IV(e,t.tickCount,t.allowDecimals)}},uw=ke([lw,rf,sf],vO),bO=(e,t,r,n)=>{if(n!=="angleAxis"&&(e==null?void 0:e.type)==="number"&&Vl(t)&&Array.isArray(r)&&r.length>0){var s=t[0],a=r[0],l=t[1],u=r[r.length-1];return[Math.min(s,a),Math.max(l,u)]}return t},pq=ke([zs,lw,uw,Bn],bO),gq=ke(Op,zs,(e,t)=>{if(!(!t||t.type!=="number")){var r=1/0,n=Array.from(fo(e.map(u=>u.value))).sort((u,d)=>u-d);if(n.length<2)return 1/0;var s=n[n.length-1]-n[0];if(s===0)return 1/0;for(var a=0;a<n.length-1;a++){var l=n[a+1]-n[a];r=Math.min(r,l)}return r/s}}),wO=ke(gq,Nr,L4,as,(e,t,r,n)=>n,(e,t,r,n,s)=>{if(!jn(e))return 0;var a=t==="vertical"?n.height:n.width;if(s==="gap")return e*a/2;if(s==="no-gap"){var l=ma(r,e*a),u=e*a/2;return u-l-(u-l)/a*l}return 0}),yq=(e,t)=>{var r=xo(e,t);return r==null||typeof r.padding!="string"?0:wO(e,"xAxis",t,r.padding)},xq=(e,t)=>{var r=vo(e,t);return r==null||typeof r.padding!="string"?0:wO(e,"yAxis",t,r.padding)},vq=ke(xo,yq,(e,t)=>{var r,n;if(e==null)return{left:0,right:0};var{padding:s}=e;return typeof s=="string"?{left:t,right:t}:{left:((r=s.left)!==null&&r!==void 0?r:0)+t,right:((n=s.right)!==null&&n!==void 0?n:0)+t}}),bq=ke(vo,xq,(e,t)=>{var r,n;if(e==null)return{top:0,bottom:0};var{padding:s}=e;return typeof s=="string"?{top:t,bottom:t}:{top:((r=s.top)!==null&&r!==void 0?r:0)+t,bottom:((n=s.bottom)!==null&&n!==void 0?n:0)+t}}),wq=ke([as,vq,hp,fp,(e,t,r)=>r],(e,t,r,n,s)=>{var{padding:a}=n;return s?[a.left,r.width-a.right]:[e.left+t.left,e.left+e.width-t.right]}),jq=ke([as,Nr,bq,hp,fp,(e,t,r)=>r],(e,t,r,n,s,a)=>{var{padding:l}=s;return a?[n.height-l.bottom,l.top]:t==="horizontal"?[e.top+e.height-r.bottom,e.top+r.top]:[e.top+r.top,e.top+e.height-r.bottom]}),af=(e,t,r,n)=>{var s;switch(t){case"xAxis":return wq(e,r,n);case"yAxis":return jq(e,r,n);case"zAxis":return(s=nw(e,r))===null||s===void 0?void 0:s.range;case"angleAxis":return W4(e);case"radiusAxis":return V4(e,r);default:return}},jO=ke([zs,af],Np),wu=ke([zs,sf,pq,jO],cw);ke([nf,ow,Bn],ZV);function SO(e,t){return e.id<t.id?-1:e.id>t.id?1:0}var Ip=(e,t)=>t,Tp=(e,t,r)=>r,Sq=ke(up,Ip,Tp,(e,t,r)=>e.filter(n=>n.orientation===t).filter(n=>n.mirror===r).sort(SO)),kq=ke(dp,Ip,Tp,(e,t,r)=>e.filter(n=>n.orientation===t).filter(n=>n.mirror===r).sort(SO)),kO=(e,t)=>({width:e.width,height:t.height}),Nq=(e,t)=>{var r=typeof t.width=="number"?t.width:Xd;return{width:r,height:e.height}},NO=ke(as,xo,kO),_q=(e,t,r)=>{switch(t){case"top":return e.top;case"bottom":return r-e.bottom;default:return 0}},Cq=(e,t,r)=>{switch(t){case"left":return e.left;case"right":return r-e.right;default:return 0}},Eq=ke(go,as,Sq,Ip,Tp,(e,t,r,n,s)=>{var a={},l;return r.forEach(u=>{var d=kO(t,u);l==null&&(l=_q(t,n,e));var m=n==="top"&&!s||n==="bottom"&&s;a[u.id]=l-Number(m)*d.height,l+=(m?-1:1)*d.height}),a}),Aq=ke(po,as,kq,Ip,Tp,(e,t,r,n,s)=>{var a={},l;return r.forEach(u=>{var d=Nq(t,u);l==null&&(l=Cq(t,n,e));var m=n==="left"&&!s||n==="right"&&s;a[u.id]=l-Number(m)*d.width,l+=(m?-1:1)*d.width}),a}),Pq=(e,t)=>{var r=xo(e,t);if(r!=null)return Eq(e,r.orientation,r.mirror)},Oq=ke([as,xo,Pq,(e,t)=>t],(e,t,r,n)=>{if(t!=null){var s=r==null?void 0:r[n];return s==null?{x:e.left,y:0}:{x:e.left,y:s}}}),Iq=(e,t)=>{var r=vo(e,t);if(r!=null)return Aq(e,r.orientation,r.mirror)},Tq=ke([as,vo,Iq,(e,t)=>t],(e,t,r,n)=>{if(t!=null){var s=r==null?void 0:r[n];return s==null?{x:0,y:e.top}:{x:s,y:e.top}}}),_O=ke(as,vo,(e,t)=>{var r=typeof t.width=="number"?t.width:Xd;return{width:r,height:e.height}}),w_=(e,t,r)=>{switch(t){case"xAxis":return NO(e,r).width;case"yAxis":return _O(e,r).height;default:return}},CO=(e,t,r,n)=>{if(r!=null){var{allowDuplicatedCategory:s,type:a,dataKey:l}=r,u=Xl(e,n),d=t.map(m=>m.value);if(l&&u&&a==="category"&&s&&$A(d))return d}},dw=ke([Nr,Op,zs,Bn],CO),EO=(e,t,r,n)=>{if(!(r==null||r.dataKey==null)){var{type:s,scale:a}=r,l=Xl(e,n);if(l&&(s==="number"||a!=="auto"))return t.map(u=>u.value)}},fw=ke([Nr,Op,rf,Bn],EO);ke([Nr,qV,sf,wu,dw,fw,af,uw,Bn],(e,t,r,n,s,a,l,u,d)=>{if(t!=null){var m=Xl(e,d);return{angle:t.angle,interval:t.interval,minTickGap:t.minTickGap,orientation:t.orientation,tick:t.tick,tickCount:t.tickCount,tickFormatter:t.tickFormatter,ticks:t.ticks,type:t.type,unit:t.unit,axisType:d,categoricalDomain:a,duplicateDomain:s,isCategorical:m,niceTicks:u,range:l,realScaleType:r,scale:n}}});var Dq=(e,t,r,n,s,a,l,u,d)=>{if(!(t==null||n==null)){var m=Xl(e,d),{type:f,ticks:p,tickCount:x}=t,v=r==="scaleBand"&&typeof n.bandwidth=="function"?n.bandwidth()/2:2,b=f==="category"&&n.bandwidth?n.bandwidth()/v:0;b=d==="angleAxis"&&a!=null&&a.length>=2?xi(a[0]-a[1])*2*b:b;var w=p||s;if(w){var j=w.map((_,E)=>{var C=l?l.indexOf(_):_;return{index:E,coordinate:n(C)+b,value:_,offset:b}});return j.filter(_=>jn(_.coordinate))}return m&&u?u.map((_,E)=>({coordinate:n(_)+b,value:_,index:E,offset:b})).filter(_=>jn(_.coordinate)):n.ticks?n.ticks(x).map(_=>({coordinate:n(_)+b,value:_,offset:b})):n.domain().map((_,E)=>({coordinate:n(_)+b,value:l?l[_]:_,index:E,offset:b}))}},AO=ke([Nr,rf,sf,wu,uw,af,dw,fw,Bn],Dq),$q=(e,t,r,n,s,a,l)=>{if(!(t==null||r==null||n==null||n[0]===n[1])){var u=Xl(e,l),{tickCount:d}=t,m=0;return m=l==="angleAxis"&&(n==null?void 0:n.length)>=2?xi(n[0]-n[1])*2*m:m,u&&a?a.map((f,p)=>({coordinate:r(f)+m,value:f,index:p,offset:m})):r.ticks?r.ticks(d).map(f=>({coordinate:r(f)+m,value:f,offset:m})):r.domain().map((f,p)=>({coordinate:r(f)+m,value:s?s[f]:f,index:p,offset:m}))}},tu=ke([Nr,rf,wu,af,dw,fw,Bn],$q),ru=ke(zs,wu,(e,t)=>{if(!(e==null||t==null))return _m(_m({},e),{},{scale:t})}),Rq=ke([zs,sf,lw,jO],cw);ke((e,t,r)=>nw(e,r),Rq,(e,t)=>{if(!(e==null||t==null))return _m(_m({},e),{},{scale:t})});var Mq=ke([Nr,up,dp],(e,t,r)=>{switch(e){case"horizontal":return t.some(n=>n.reversed)?"right-to-left":"left-to-right";case"vertical":return r.some(n=>n.reversed)?"bottom-to-top":"top-to-bottom";case"centric":case"radial":return"left-to-right";default:return}}),PO=e=>e.options.defaultTooltipEventType,OO=e=>e.options.validateTooltipEventTypes;function IO(e,t,r){if(e==null)return t;var n=e?"axis":"item";return r==null?t:r.includes(n)?n:t}function hw(e,t){var r=PO(e),n=OO(e);return IO(t,r,n)}function Fq(e){return _t(t=>hw(t,e))}var TO=(e,t)=>{var r,n=Number(t);if(!(Aa(n)||t==null))return n>=0?e==null||(r=e[n])===null||r===void 0?void 0:r.value:void 0},Lq=e=>e.tooltip.settings,qo={active:!1,index:null,dataKey:void 0,coordinate:void 0},zq={itemInteraction:{click:qo,hover:qo},axisInteraction:{click:qo,hover:qo},keyboardInteraction:qo,syncInteraction:{active:!1,index:null,dataKey:void 0,label:void 0,coordinate:void 0,sourceViewBox:void 0},tooltipItemPayloads:[],settings:{shared:void 0,trigger:"hover",axisId:0,active:!1,defaultIndex:void 0}},DO=ni({name:"tooltip",initialState:zq,reducers:{addTooltipEntrySettings:{reducer(e,t){e.tooltipItemPayloads.push(t.payload)},prepare:zn()},removeTooltipEntrySettings:{reducer(e,t){var r=to(e).tooltipItemPayloads.indexOf(t.payload);r>-1&&e.tooltipItemPayloads.splice(r,1)},prepare:zn()},setTooltipSettingsState(e,t){e.settings=t.payload},setActiveMouseOverItemIndex(e,t){e.syncInteraction.active=!1,e.keyboardInteraction.active=!1,e.itemInteraction.hover.active=!0,e.itemInteraction.hover.index=t.payload.activeIndex,e.itemInteraction.hover.dataKey=t.payload.activeDataKey,e.itemInteraction.hover.coordinate=t.payload.activeCoordinate},mouseLeaveChart(e){e.itemInteraction.hover.active=!1,e.axisInteraction.hover.active=!1},mouseLeaveItem(e){e.itemInteraction.hover.active=!1},setActiveClickItemIndex(e,t){e.syncInteraction.active=!1,e.itemInteraction.click.active=!0,e.keyboardInteraction.active=!1,e.itemInteraction.click.index=t.payload.activeIndex,e.itemInteraction.click.dataKey=t.payload.activeDataKey,e.itemInteraction.click.coordinate=t.payload.activeCoordinate},setMouseOverAxisIndex(e,t){e.syncInteraction.active=!1,e.axisInteraction.hover.active=!0,e.keyboardInteraction.active=!1,e.axisInteraction.hover.index=t.payload.activeIndex,e.axisInteraction.hover.dataKey=t.payload.activeDataKey,e.axisInteraction.hover.coordinate=t.payload.activeCoordinate},setMouseClickAxisIndex(e,t){e.syncInteraction.active=!1,e.keyboardInteraction.active=!1,e.axisInteraction.click.active=!0,e.axisInteraction.click.index=t.payload.activeIndex,e.axisInteraction.click.dataKey=t.payload.activeDataKey,e.axisInteraction.click.coordinate=t.payload.activeCoordinate},setSyncInteraction(e,t){e.syncInteraction=t.payload},setKeyboardInteraction(e,t){e.keyboardInteraction.active=t.payload.active,e.keyboardInteraction.index=t.payload.activeIndex,e.keyboardInteraction.coordinate=t.payload.activeCoordinate,e.keyboardInteraction.dataKey=t.payload.activeDataKey}}}),{addTooltipEntrySettings:Uq,removeTooltipEntrySettings:Bq,setTooltipSettingsState:Wq,setActiveMouseOverItemIndex:$O,mouseLeaveItem:Vq,mouseLeaveChart:RO,setActiveClickItemIndex:qq,setMouseOverAxisIndex:MO,setMouseClickAxisIndex:Hq,setSyncInteraction:yv,setKeyboardInteraction:xv}=DO.actions,Kq=DO.reducer;function j_(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function jh(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?j_(Object(r),!0).forEach(function(n){Gq(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):j_(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Gq(e,t,r){return(t=Yq(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Yq(e){var t=Jq(e,"string");return typeof t=="symbol"?t:t+""}function Jq(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Xq(e,t,r){return t==="axis"?r==="click"?e.axisInteraction.click:e.axisInteraction.hover:r==="click"?e.itemInteraction.click:e.itemInteraction.hover}function Qq(e){return e.index!=null}var FO=(e,t,r,n)=>{if(t==null)return qo;var s=Xq(e,t,r);if(s==null)return qo;if(s.active)return s;if(e.keyboardInteraction.active)return e.keyboardInteraction;if(e.syncInteraction.active&&e.syncInteraction.index!=null)return e.syncInteraction;var a=e.settings.active===!0;if(Qq(s)){if(a)return jh(jh({},s),{},{active:!0})}else if(n!=null)return{active:!0,coordinate:void 0,dataKey:void 0,index:n};return jh(jh({},qo),{},{coordinate:s.coordinate})},mw=(e,t)=>{var r=e==null?void 0:e.index;if(r==null)return null;var n=Number(r);if(!jn(n))return r;var s=0,a=1/0;return t.length>0&&(a=t.length-1),String(Math.max(s,Math.min(n,a)))},LO=(e,t,r,n,s,a,l,u)=>{if(!(a==null||u==null)){var d=l[0],m=d==null?void 0:u(d.positions,a);if(m!=null)return m;var f=s==null?void 0:s[Number(a)];if(f)switch(r){case"horizontal":return{x:f.coordinate,y:(n.top+t)/2};default:return{x:(n.left+e)/2,y:f.coordinate}}}},zO=(e,t,r,n)=>{if(t==="axis")return e.tooltipItemPayloads;if(e.tooltipItemPayloads.length===0)return[];var s;return r==="hover"?s=e.itemInteraction.hover.dataKey:s=e.itemInteraction.click.dataKey,s==null&&n!=null?[e.tooltipItemPayloads[0]]:e.tooltipItemPayloads.filter(a=>{var l;return((l=a.settings)===null||l===void 0?void 0:l.dataKey)===s})},of=e=>e.options.tooltipPayloadSearcher,ju=e=>e.tooltip;function S_(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function k_(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?S_(Object(r),!0).forEach(function(n){Zq(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):S_(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Zq(e,t,r){return(t=eH(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function eH(e){var t=tH(e,"string");return typeof t=="symbol"?t:t+""}function tH(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function rH(e,t){return e??t}var UO=(e,t,r,n,s,a,l)=>{if(!(t==null||a==null)){var{chartData:u,computedData:d,dataStartIndex:m,dataEndIndex:f}=r,p=[];return e.reduce((x,v)=>{var b,{dataDefinedOnItem:w,settings:j}=v,_=rH(w,u),E=Array.isArray(_)?kP(_,m,f):_,C=(b=j==null?void 0:j.dataKey)!==null&&b!==void 0?b:n,I=j==null?void 0:j.nameKey,A;if(n&&Array.isArray(E)&&!Array.isArray(E[0])&&l==="axis"?A=mz(E,n,s):A=a(E,t,d,I),Array.isArray(A))A.forEach(B=>{var T=k_(k_({},j),{},{name:B.name,unit:B.unit,color:void 0,fill:void 0});x.push(QN({tooltipEntrySettings:T,dataKey:B.dataKey,payload:B.payload,value:Ls(B.payload,B.dataKey),name:B.name}))});else{var $;x.push(QN({tooltipEntrySettings:j,dataKey:C,payload:A,value:Ls(A,C),name:($=Ls(A,I))!==null&&$!==void 0?$:j==null?void 0:j.name}))}return x},p)}},pw=ke([Vn,Nr,Y4,Jb,Wn],xO),nH=ke([e=>e.graphicalItems.cartesianItems,e=>e.graphicalItems.polarItems],(e,t)=>[...e,...t]),sH=ke([Wn,vu],J4),lf=ke([nH,Vn,sH],X4,{memoizeOptions:{resultEqualityCheck:Pp}}),iH=ke([lf],e=>e.filter(Ep)),aH=ke([lf],eO,{memoizeOptions:{resultEqualityCheck:Pp}}),Su=ke([aH,nl],tO),oH=ke([iH,nl,Vn],H4),gw=ke([Su,Vn,lf],rO),BO=ke([Vn],aw),lH=ke([Vn],e=>e.allowDataOverflow),WO=ke([BO,lH],S4),cH=ke([lf],e=>e.filter(Ep)),uH=ke([oH,cH,kp],iO),dH=ke([uH,nl,Wn,WO],aO),fH=ke([lf],Z4),hH=ke([Su,Vn,fH,ow,Wn],cO,{memoizeOptions:{resultEqualityCheck:Ap}}),mH=ke([uO,Wn,vu],bu),pH=ke([mH,Wn],hO),gH=ke([dO,Wn,vu],bu),yH=ke([gH,Wn],mO),xH=ke([fO,Wn,vu],bu),vH=ke([xH,Wn],pO),bH=ke([pH,vH,yH],Cm),wH=ke([Vn,BO,WO,dH,hH,bH,Nr,Wn],gO),VO=ke([Vn,Nr,Su,gw,kp,Wn,wH],yO),jH=ke([VO,Vn,pw],vO),SH=ke([Vn,VO,jH,Wn],bO),qO=e=>{var t=Wn(e),r=vu(e),n=!1;return af(e,t,r,n)},HO=ke([Vn,qO],Np),KO=ke([Vn,pw,SH,HO],cw),kH=ke([Nr,gw,Vn,Wn],CO),NH=ke([Nr,gw,Vn,Wn],EO),_H=(e,t,r,n,s,a,l,u)=>{if(t){var{type:d}=t,m=Xl(e,u);if(n){var f=r==="scaleBand"&&n.bandwidth?n.bandwidth()/2:2,p=d==="category"&&n.bandwidth?n.bandwidth()/f:0;return p=u==="angleAxis"&&s!=null&&(s==null?void 0:s.length)>=2?xi(s[0]-s[1])*2*p:p,m&&l?l.map((x,v)=>({coordinate:n(x)+p,value:x,index:v,offset:p})):n.domain().map((x,v)=>({coordinate:n(x)+p,value:a?a[x]:x,index:v,offset:p}))}}},bo=ke([Nr,Vn,pw,KO,qO,kH,NH,Wn],_H),yw=ke([PO,OO,Lq],(e,t,r)=>IO(r.shared,e,t)),GO=e=>e.tooltip.settings.trigger,xw=e=>e.tooltip.settings.defaultIndex,Dp=ke([ju,yw,GO,xw],FO),nu=ke([Dp,Su],mw),YO=ke([bo,nu],TO),JO=ke([Dp],e=>{if(e)return e.dataKey}),XO=ke([ju,yw,GO,xw],zO),CH=ke([po,go,Nr,as,bo,xw,XO,of],LO),EH=ke([Dp,CH],(e,t)=>e!=null&&e.coordinate?e.coordinate:t),AH=ke([Dp],e=>e.active),PH=ke([XO,nu,nl,sO,YO,of,yw],UO);ke([PH],e=>{if(e!=null){var t=e.map(r=>r.payload).filter(r=>r!=null);return Array.from(new Set(t))}});function N_(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function __(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?N_(Object(r),!0).forEach(function(n){OH(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):N_(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function OH(e,t,r){return(t=IH(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function IH(e){var t=TH(e,"string");return typeof t=="symbol"?t:t+""}function TH(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var DH=()=>_t(Vn),$H=()=>{var e=DH(),t=_t(bo),r=_t(KO);return um(!e||!r?void 0:__(__({},e),{},{scale:r}),t)};function C_(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function $c(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?C_(Object(r),!0).forEach(function(n){RH(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):C_(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function RH(e,t,r){return(t=MH(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function MH(e){var t=FH(e,"string");return typeof t=="symbol"?t:t+""}function FH(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var LH=(e,t,r,n)=>{var s=t.find(a=>a&&a.index===r);if(s){if(e==="horizontal")return{x:s.coordinate,y:n.chartY};if(e==="vertical")return{x:n.chartX,y:s.coordinate}}return{x:0,y:0}},zH=(e,t,r,n)=>{var s=t.find(m=>m&&m.index===r);if(s){if(e==="centric"){var a=s.coordinate,{radius:l}=n;return $c($c($c({},n),vs(n.cx,n.cy,l,a)),{},{angle:a,radius:l})}var u=s.coordinate,{angle:d}=n;return $c($c($c({},n),vs(n.cx,n.cy,u,d)),{},{angle:d,radius:u})}return{angle:0,clockWise:!1,cx:0,cy:0,endAngle:0,innerRadius:0,outerRadius:0,radius:0,startAngle:0,x:0,y:0}};function UH(e,t){var{chartX:r,chartY:n}=e;return r>=t.left&&r<=t.left+t.width&&n>=t.top&&n<=t.top+t.height}var QO=(e,t,r,n,s)=>{var a,l=-1,u=(a=t==null?void 0:t.length)!==null&&a!==void 0?a:0;if(u<=1||e==null)return 0;if(n==="angleAxis"&&s!=null&&Math.abs(Math.abs(s[1]-s[0])-360)<=1e-6)for(var d=0;d<u;d++){var m=d>0?r[d-1].coordinate:r[u-1].coordinate,f=r[d].coordinate,p=d>=u-1?r[0].coordinate:r[d+1].coordinate,x=void 0;if(xi(f-m)!==xi(p-f)){var v=[];if(xi(p-f)===xi(s[1]-s[0])){x=p;var b=f+s[1]-s[0];v[0]=Math.min(b,(b+m)/2),v[1]=Math.max(b,(b+m)/2)}else{x=m;var w=p+s[1]-s[0];v[0]=Math.min(f,(w+f)/2),v[1]=Math.max(f,(w+f)/2)}var j=[Math.min(f,(x+f)/2),Math.max(f,(x+f)/2)];if(e>j[0]&&e<=j[1]||e>=v[0]&&e<=v[1]){({index:l}=r[d]);break}}else{var _=Math.min(m,p),E=Math.max(m,p);if(e>(_+f)/2&&e<=(E+f)/2){({index:l}=r[d]);break}}}else if(t){for(var C=0;C<u;C++)if(C===0&&e<=(t[C].coordinate+t[C+1].coordinate)/2||C>0&&C<u-1&&e>(t[C].coordinate+t[C-1].coordinate)/2&&e<=(t[C].coordinate+t[C+1].coordinate)/2||C===u-1&&e>(t[C].coordinate+t[C-1].coordinate)/2){({index:l}=t[C]);break}}return l},BH=()=>_t(Jb),vw=(e,t)=>t,ZO=(e,t,r)=>r,bw=(e,t,r,n)=>n,WH=ke(bo,e=>sp(e,t=>t.coordinate)),ww=ke([ju,vw,ZO,bw],FO),eI=ke([ww,Su],mw),VH=(e,t,r)=>{if(t!=null){var n=ju(e);return t==="axis"?r==="hover"?n.axisInteraction.hover.dataKey:n.axisInteraction.click.dataKey:r==="hover"?n.itemInteraction.hover.dataKey:n.itemInteraction.click.dataKey}},tI=ke([ju,vw,ZO,bw],zO),Em=ke([po,go,Nr,as,bo,bw,tI,of],LO),qH=ke([ww,Em],(e,t)=>{var r;return(r=e.coordinate)!==null&&r!==void 0?r:t}),rI=ke([bo,eI],TO),HH=ke([tI,eI,nl,sO,rI,of,vw],UO),KH=ke([ww],e=>({isActive:e.active,activeIndex:e.index})),GH=(e,t,r,n,s,a,l)=>{if(!(!e||!r||!n||!s)&&UH(e,l)){var u=MU(e,t),d=QO(u,a,s,r,n),m=LH(t,s,d,e);return{activeIndex:String(d),activeCoordinate:m}}},YH=(e,t,r,n,s,a,l)=>{if(!(!e||!n||!s||!a||!r)){var u=R7(e,r);if(u){var d=FU(u,t),m=QO(d,l,a,n,s),f=zH(t,a,m,u);return{activeIndex:String(m),activeCoordinate:f}}}},JH=(e,t,r,n,s,a,l,u)=>{if(!(!e||!t||!n||!s||!a))return t==="horizontal"||t==="vertical"?GH(e,t,n,s,a,l,u):YH(e,t,r,n,s,a,l)},XH=ke(e=>e.zIndex.zIndexMap,(e,t)=>t,(e,t,r)=>r,(e,t,r)=>{if(t!=null){var n=e[t];if(n!=null)return r?n.panoramaElementId:n.elementId}}),QH=ke(e=>e.zIndex.zIndexMap,e=>{var t=Object.keys(e).map(n=>parseInt(n,10)).concat(Object.values(ti)),r=Array.from(new Set(t));return r.sort((n,s)=>n-s)},{memoizeOptions:{resultEqualityCheck:zV}});function E_(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function A_(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?E_(Object(r),!0).forEach(function(n){ZH(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):E_(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function ZH(e,t,r){return(t=eK(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function eK(e){var t=tK(e,"string");return typeof t=="symbol"?t:t+""}function tK(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var rK={},nK={zIndexMap:Object.values(ti).reduce((e,t)=>A_(A_({},e),{},{[t]:{elementId:void 0,panoramaElementId:void 0,consumers:0}}),rK)},sK=new Set(Object.values(ti));function iK(e){return sK.has(e)}var nI=ni({name:"zIndex",initialState:nK,reducers:{registerZIndexPortal:{reducer:(e,t)=>{var{zIndex:r}=t.payload;e.zIndexMap[r]?e.zIndexMap[r].consumers+=1:e.zIndexMap[r]={consumers:1,elementId:void 0,panoramaElementId:void 0}},prepare:zn()},unregisterZIndexPortal:{reducer:(e,t)=>{var{zIndex:r}=t.payload;e.zIndexMap[r]&&(e.zIndexMap[r].consumers-=1,e.zIndexMap[r].consumers<=0&&!iK(r)&&delete e.zIndexMap[r])},prepare:zn()},registerZIndexPortalId:{reducer:(e,t)=>{var{zIndex:r,elementId:n,isPanorama:s}=t.payload;e.zIndexMap[r]?s?e.zIndexMap[r].panoramaElementId=n:e.zIndexMap[r].elementId=n:e.zIndexMap[r]={consumers:0,elementId:s?void 0:n,panoramaElementId:s?n:void 0}},prepare:zn()},unregisterZIndexPortalId:{reducer:(e,t)=>{var{zIndex:r}=t.payload;e.zIndexMap[r]&&(t.payload.isPanorama?e.zIndexMap[r].panoramaElementId=void 0:e.zIndexMap[r].elementId=void 0)},prepare:zn()}}}),{registerZIndexPortal:aK,unregisterZIndexPortal:oK,registerZIndexPortalId:lK,unregisterZIndexPortalId:cK}=nI.actions,uK=nI.reducer;function sl(e){var{zIndex:t,children:r}=e,n=bB(),s=n&&t!==void 0&&t!==0,a=Si(),l=Sn();g.useLayoutEffect(()=>s?(l(aK({zIndex:t})),()=>{l(oK({zIndex:t}))}):mu,[l,t,s]);var u=_t(m=>XH(m,t,a));if(!s)return r;if(!u)return null;var d=document.getElementById(u);return d?Fv.createPortal(r,d):null}function vv(){return vv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},vv.apply(null,arguments)}function P_(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Sh(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?P_(Object(r),!0).forEach(function(n){dK(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):P_(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function dK(e,t,r){return(t=fK(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function fK(e){var t=hK(e,"string");return typeof t=="symbol"?t:t+""}function hK(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function mK(e){var{cursor:t,cursorComp:r,cursorProps:n}=e;return g.isValidElement(t)?g.cloneElement(t,n):g.createElement(r,n)}function pK(e){var t,{coordinate:r,payload:n,index:s,offset:a,tooltipAxisBandSize:l,layout:u,cursor:d,tooltipEventType:m,chartName:f}=e,p=r,x=n,v=s;if(!d||!p||f!=="ScatterChart"&&m!=="axis")return null;var b,w,j;if(f==="ScatterChart")b=p,w=XB,j=ti.cursorLine;else if(f==="BarChart")b=QB(u,p,a,l),w=FP,j=ti.cursorRectangle;else if(u==="radial"&&FA(p)){var{cx:_,cy:E,radius:C,startAngle:I,endAngle:A}=LP(p);b={cx:_,cy:E,startAngle:I,endAngle:A,innerRadius:C,outerRadius:C},w=UP,j=ti.cursorLine}else b={points:z7(u,p,a)},w=TP,j=ti.cursorLine;var $=typeof d=="object"&&"className"in d?d.className:void 0,B=Sh(Sh(Sh(Sh({stroke:"#ccc",pointerEvents:"none"},a),b),ib(d)),{},{payload:x,payloadIndex:v,className:Vr("recharts-tooltip-cursor",$)});return g.createElement(sl,{zIndex:(t=e.zIndex)!==null&&t!==void 0?t:j},g.createElement(mK,{cursor:d,cursorComp:w,cursorProps:B}))}function gK(e){var t=$H(),r=yB(),n=pp(),s=BH();return t==null||r==null||n==null||s==null?null:g.createElement(pK,vv({},e,{offset:r,layout:n,tooltipAxisBandSize:t,chartName:s}))}var sI=g.createContext(null),yK=()=>g.useContext(sI),V0={exports:{}},O_;function xK(){return O_||(O_=1,(function(e){var t=Object.prototype.hasOwnProperty,r="~";function n(){}Object.create&&(n.prototype=Object.create(null),new n().__proto__||(r=!1));function s(d,m,f){this.fn=d,this.context=m,this.once=f||!1}function a(d,m,f,p,x){if(typeof f!="function")throw new TypeError("The listener must be a function");var v=new s(f,p||d,x),b=r?r+m:m;return d._events[b]?d._events[b].fn?d._events[b]=[d._events[b],v]:d._events[b].push(v):(d._events[b]=v,d._eventsCount++),d}function l(d,m){--d._eventsCount===0?d._events=new n:delete d._events[m]}function u(){this._events=new n,this._eventsCount=0}u.prototype.eventNames=function(){var m=[],f,p;if(this._eventsCount===0)return m;for(p in f=this._events)t.call(f,p)&&m.push(r?p.slice(1):p);return Object.getOwnPropertySymbols?m.concat(Object.getOwnPropertySymbols(f)):m},u.prototype.listeners=function(m){var f=r?r+m:m,p=this._events[f];if(!p)return[];if(p.fn)return[p.fn];for(var x=0,v=p.length,b=new Array(v);x<v;x++)b[x]=p[x].fn;return b},u.prototype.listenerCount=function(m){var f=r?r+m:m,p=this._events[f];return p?p.fn?1:p.length:0},u.prototype.emit=function(m,f,p,x,v,b){var w=r?r+m:m;if(!this._events[w])return!1;var j=this._events[w],_=arguments.length,E,C;if(j.fn){switch(j.once&&this.removeListener(m,j.fn,void 0,!0),_){case 1:return j.fn.call(j.context),!0;case 2:return j.fn.call(j.context,f),!0;case 3:return j.fn.call(j.context,f,p),!0;case 4:return j.fn.call(j.context,f,p,x),!0;case 5:return j.fn.call(j.context,f,p,x,v),!0;case 6:return j.fn.call(j.context,f,p,x,v,b),!0}for(C=1,E=new Array(_-1);C<_;C++)E[C-1]=arguments[C];j.fn.apply(j.context,E)}else{var I=j.length,A;for(C=0;C<I;C++)switch(j[C].once&&this.removeListener(m,j[C].fn,void 0,!0),_){case 1:j[C].fn.call(j[C].context);break;case 2:j[C].fn.call(j[C].context,f);break;case 3:j[C].fn.call(j[C].context,f,p);break;case 4:j[C].fn.call(j[C].context,f,p,x);break;default:if(!E)for(A=1,E=new Array(_-1);A<_;A++)E[A-1]=arguments[A];j[C].fn.apply(j[C].context,E)}}return!0},u.prototype.on=function(m,f,p){return a(this,m,f,p,!1)},u.prototype.once=function(m,f,p){return a(this,m,f,p,!0)},u.prototype.removeListener=function(m,f,p,x){var v=r?r+m:m;if(!this._events[v])return this;if(!f)return l(this,v),this;var b=this._events[v];if(b.fn)b.fn===f&&(!x||b.once)&&(!p||b.context===p)&&l(this,v);else{for(var w=0,j=[],_=b.length;w<_;w++)(b[w].fn!==f||x&&!b[w].once||p&&b[w].context!==p)&&j.push(b[w]);j.length?this._events[v]=j.length===1?j[0]:j:l(this,v)}return this},u.prototype.removeAllListeners=function(m){var f;return m?(f=r?r+m:m,this._events[f]&&l(this,f)):(this._events=new n,this._eventsCount=0),this},u.prototype.off=u.prototype.removeListener,u.prototype.addListener=u.prototype.on,u.prefixed=r,u.EventEmitter=u,e.exports=u})(V0)),V0.exports}var vK=xK();const bK=pa(vK);var zd=new bK,bv="recharts.syncEvent.tooltip",I_="recharts.syncEvent.brush";function wK(e,t){if(t){var r=Number.parseInt(t,10);if(!Aa(r))return e==null?void 0:e[r]}}var jK={chartName:"",tooltipPayloadSearcher:void 0,eventEmitter:void 0,defaultTooltipEventType:"axis"},iI=ni({name:"options",initialState:jK,reducers:{createEventEmitter:e=>{e.eventEmitter==null&&(e.eventEmitter=Symbol("rechartsEventEmitter"))}}}),SK=iI.reducer,{createEventEmitter:kK}=iI.actions;function NK(e){return e.tooltip.syncInteraction}var _K={chartData:void 0,computedData:void 0,dataStartIndex:0,dataEndIndex:0},aI=ni({name:"chartData",initialState:_K,reducers:{setChartData(e,t){if(e.chartData=t.payload,t.payload==null){e.dataStartIndex=0,e.dataEndIndex=0;return}t.payload.length>0&&e.dataEndIndex!==t.payload.length-1&&(e.dataEndIndex=t.payload.length-1)},setComputedData(e,t){e.computedData=t.payload},setDataStartEndIndexes(e,t){var{startIndex:r,endIndex:n}=t.payload;r!=null&&(e.dataStartIndex=r),n!=null&&(e.dataEndIndex=n)}}}),{setChartData:T_,setDataStartEndIndexes:CK,setComputedData:Oee}=aI.actions,EK=aI.reducer,AK=["x","y"];function D_(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Rc(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?D_(Object(r),!0).forEach(function(n){PK(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):D_(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function PK(e,t,r){return(t=OK(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function OK(e){var t=IK(e,"string");return typeof t=="symbol"?t:t+""}function IK(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function TK(e,t){if(e==null)return{};var r,n,s=DK(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function DK(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function $K(){var e=_t(Xb),t=_t(Qb),r=Sn(),n=_t(z4),s=_t(bo),a=pp(),l=mp(),u=_t(d=>d.rootProps.className);g.useEffect(()=>{if(e==null)return mu;var d=(m,f,p)=>{if(t!==p&&e===m){if(n==="index"){var x;if(l&&f!==null&&f!==void 0&&(x=f.payload)!==null&&x!==void 0&&x.coordinate&&f.payload.sourceViewBox){var v=f.payload.coordinate,{x:b,y:w}=v,j=TK(v,AK),{x:_,y:E,width:C,height:I}=f.payload.sourceViewBox,A=Rc(Rc({},j),{},{x:l.x+(C?(b-_)/C:0)*l.width,y:l.y+(I?(w-E)/I:0)*l.height});r(Rc(Rc({},f),{},{payload:Rc(Rc({},f.payload),{},{coordinate:A})}))}else r(f);return}if(s!=null){var $;if(typeof n=="function"){var B={activeTooltipIndex:f.payload.index==null?void 0:Number(f.payload.index),isTooltipActive:f.payload.active,activeIndex:f.payload.index==null?void 0:Number(f.payload.index),activeLabel:f.payload.label,activeDataKey:f.payload.dataKey,activeCoordinate:f.payload.coordinate},T=n(s,B);$=s[T]}else n==="value"&&($=s.find(J=>String(J.value)===f.payload.label));var{coordinate:K}=f.payload;if($==null||f.payload.active===!1||K==null||l==null){r(yv({active:!1,coordinate:void 0,dataKey:void 0,index:null,label:void 0,sourceViewBox:void 0}));return}var{x:Q,y:se}=K,G=Math.min(Q,l.x+l.width),le=Math.min(se,l.y+l.height),F={x:a==="horizontal"?$.coordinate:G,y:a==="horizontal"?le:$.coordinate},Y=yv({active:f.payload.active,coordinate:F,dataKey:f.payload.dataKey,index:String($.index),label:f.payload.label,sourceViewBox:f.payload.sourceViewBox});r(Y)}}};return zd.on(bv,d),()=>{zd.off(bv,d)}},[u,r,t,e,n,s,a,l])}function RK(){var e=_t(Xb),t=_t(Qb),r=Sn();g.useEffect(()=>{if(e==null)return mu;var n=(s,a,l)=>{t!==l&&e===s&&r(CK(a))};return zd.on(I_,n),()=>{zd.off(I_,n)}},[r,t,e])}function MK(){var e=Sn();g.useEffect(()=>{e(kK())},[e]),$K(),RK()}function FK(e,t,r,n,s,a){var l=_t(v=>VH(v,e,t)),u=_t(Qb),d=_t(Xb),m=_t(z4),f=_t(NK),p=f==null?void 0:f.active,x=mp();g.useEffect(()=>{if(!p&&d!=null&&u!=null){var v=yv({active:a,coordinate:r,dataKey:l,index:s,label:typeof n=="number"?String(n):n,sourceViewBox:x});zd.emit(bv,d,v,u)}},[p,r,l,s,n,u,d,m,a,x])}function $_(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function R_(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?$_(Object(r),!0).forEach(function(n){LK(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):$_(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function LK(e,t,r){return(t=zK(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function zK(e){var t=UK(e,"string");return typeof t=="symbol"?t:t+""}function UK(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function BK(e){return e.dataKey}function WK(e,t){return g.isValidElement(e)?g.cloneElement(e,t):typeof e=="function"?g.createElement(e,t):g.createElement(AB,t)}var M_=[],VK={allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",axisId:0,contentStyle:{},cursor:!0,filterNull:!0,isAnimationActive:!pu.isSsr,itemSorter:"name",itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,wrapperStyle:{}};function qK(e){var t,r,n=Bi(e,VK),{active:s,allowEscapeViewBox:a,animationDuration:l,animationEasing:u,content:d,filterNull:m,isAnimationActive:f,offset:p,payloadUniqBy:x,position:v,reverseDirection:b,useTranslate3d:w,wrapperStyle:j,cursor:_,shared:E,trigger:C,defaultIndex:I,portal:A,axisId:$}=n,B=Sn(),T=typeof I=="number"?String(I):I;g.useEffect(()=>{B(Wq({shared:E,trigger:C,axisId:$,active:s,defaultIndex:T}))},[B,E,C,$,s,T]);var K=mp(),Q=IP(),se=Fq(E),{activeIndex:G,isActive:le}=(t=_t(Me=>KH(Me,se,C,T)))!==null&&t!==void 0?t:{},F=_t(Me=>HH(Me,se,C,T)),Y=_t(Me=>rI(Me,se,C,T)),J=_t(Me=>qH(Me,se,C,T)),V=F,H=yK(),re=(r=s??le)!==null&&r!==void 0?r:!1,[ie,M]=N8([V,re]),Z=se==="axis"?Y:void 0;FK(se,C,J,Z,G,re);var fe=A??H;if(fe==null||K==null||se==null)return null;var ye=V??M_;re||(ye=M_),m&&ye.length&&(ye=Xz(ye.filter(Me=>Me.value!=null&&(Me.hide!==!0||n.includeHidden)),x,BK));var Le=ye.length>0,je=g.createElement(RB,{allowEscapeViewBox:a,animationDuration:l,animationEasing:u,isAnimationActive:f,active:re,coordinate:J,hasPayload:Le,offset:p,position:v,reverseDirection:b,useTranslate3d:w,viewBox:K,wrapperStyle:j,lastBoundingBox:ie,innerRef:M,hasPortalFromProps:!!A},WK(d,R_(R_({},n),{},{payload:ye,label:Z,active:re,activeIndex:G,coordinate:J,accessibilityLayer:Q})));return g.createElement(g.Fragment,null,Fv.createPortal(je,fe),re&&g.createElement(gK,{cursor:_,tooltipEventType:se,coordinate:J,payload:ye,index:G}))}var jw=e=>null;jw.displayName="Cell";function HK(e,t,r){return(t=KK(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function KK(e){var t=GK(e,"string");return typeof t=="symbol"?t:t+""}function GK(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class YK{constructor(t){HK(this,"cache",new Map),this.maxSize=t}get(t){var r=this.cache.get(t);return r!==void 0&&(this.cache.delete(t),this.cache.set(t,r)),r}set(t,r){if(this.cache.has(t))this.cache.delete(t);else if(this.cache.size>=this.maxSize){var n=this.cache.keys().next().value;this.cache.delete(n)}this.cache.set(t,r)}clear(){this.cache.clear()}size(){return this.cache.size}}function F_(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function JK(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?F_(Object(r),!0).forEach(function(n){XK(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):F_(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function XK(e,t,r){return(t=QK(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function QK(e){var t=ZK(e,"string");return typeof t=="symbol"?t:t+""}function ZK(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var eG={cacheSize:2e3,enableCache:!0},oI=JK({},eG),L_=new YK(oI.cacheSize),tG={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},z_="recharts_measurement_span";function rG(e,t){var r=t.fontSize||"",n=t.fontFamily||"",s=t.fontWeight||"",a=t.fontStyle||"",l=t.letterSpacing||"",u=t.textTransform||"";return"".concat(e,"|").concat(r,"|").concat(n,"|").concat(s,"|").concat(a,"|").concat(l,"|").concat(u)}var U_=(e,t)=>{try{var r=document.getElementById(z_);r||(r=document.createElement("span"),r.setAttribute("id",z_),r.setAttribute("aria-hidden","true"),document.body.appendChild(r)),Object.assign(r.style,tG,t),r.textContent="".concat(e);var n=r.getBoundingClientRect();return{width:n.width,height:n.height}}catch{return{width:0,height:0}}},Sd=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(t==null||pu.isSsr)return{width:0,height:0};if(!oI.enableCache)return U_(t,r);var n=rG(t,r),s=L_.get(n);if(s)return s;var a=U_(t,r);return L_.set(n,a),a},B_=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,W_=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,nG=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,sG=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,lI={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},iG=Object.keys(lI),Wc="NaN";function aG(e,t){return e*lI[t]}class Qs{static parse(t){var r,[,n,s]=(r=sG.exec(t))!==null&&r!==void 0?r:[];return new Qs(parseFloat(n),s??"")}constructor(t,r){this.num=t,this.unit=r,this.num=t,this.unit=r,Aa(t)&&(this.unit=""),r!==""&&!nG.test(r)&&(this.num=NaN,this.unit=""),iG.includes(r)&&(this.num=aG(t,r),this.unit="px")}add(t){return this.unit!==t.unit?new Qs(NaN,""):new Qs(this.num+t.num,this.unit)}subtract(t){return this.unit!==t.unit?new Qs(NaN,""):new Qs(this.num-t.num,this.unit)}multiply(t){return this.unit!==""&&t.unit!==""&&this.unit!==t.unit?new Qs(NaN,""):new Qs(this.num*t.num,this.unit||t.unit)}divide(t){return this.unit!==""&&t.unit!==""&&this.unit!==t.unit?new Qs(NaN,""):new Qs(this.num/t.num,this.unit||t.unit)}toString(){return"".concat(this.num).concat(this.unit)}isNaN(){return Aa(this.num)}}function cI(e){if(e.includes(Wc))return Wc;for(var t=e;t.includes("*")||t.includes("/");){var r,[,n,s,a]=(r=B_.exec(t))!==null&&r!==void 0?r:[],l=Qs.parse(n??""),u=Qs.parse(a??""),d=s==="*"?l.multiply(u):l.divide(u);if(d.isNaN())return Wc;t=t.replace(B_,d.toString())}for(;t.includes("+")||/.-\d+(?:\.\d+)?/.test(t);){var m,[,f,p,x]=(m=W_.exec(t))!==null&&m!==void 0?m:[],v=Qs.parse(f??""),b=Qs.parse(x??""),w=p==="+"?v.add(b):v.subtract(b);if(w.isNaN())return Wc;t=t.replace(W_,w.toString())}return t}var V_=/\(([^()]*)\)/;function oG(e){for(var t=e,r;(r=V_.exec(t))!=null;){var[,n]=r;t=t.replace(V_,cI(n))}return t}function lG(e){var t=e.replace(/\s+/g,"");return t=oG(t),t=cI(t),t}function cG(e){try{return lG(e)}catch{return Wc}}function q0(e){var t=cG(e.slice(5,-1));return t===Wc?"":t}var uG=["x","y","lineHeight","capHeight","fill","scaleToFit","textAnchor","verticalAnchor"],dG=["dx","dy","angle","className","breakAll"];function wv(){return wv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},wv.apply(null,arguments)}function q_(e,t){if(e==null)return{};var r,n,s=fG(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function fG(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var uI=/[ \f\n\r\t\v\u2028\u2029]+/,dI=e=>{var{children:t,breakAll:r,style:n}=e;try{var s=[];is(t)||(r?s=t.toString().split(""):s=t.toString().split(uI));var a=s.map(u=>({word:u,width:Sd(u,n).width})),l=r?0:Sd("",n).width;return{wordsWithComputedWidth:a,spaceWidth:l}}catch{return null}};function hG(e){return e==="start"||e==="middle"||e==="end"||e==="inherit"}var fI=(e,t,r,n)=>e.reduce((s,a)=>{var{word:l,width:u}=a,d=s[s.length-1];if(d&&u!=null&&(t==null||n||d.width+u+r<Number(t)))d.words.push(l),d.width+=u+r;else{var m={words:[l],width:u};s.push(m)}return s},[]),hI=e=>e.reduce((t,r)=>t.width>r.width?t:r),mG="",H_=(e,t,r,n,s,a,l,u)=>{var d=e.slice(0,t),m=dI({breakAll:r,style:n,children:d+mG});if(!m)return[!1,[]];var f=fI(m.wordsWithComputedWidth,a,l,u),p=f.length>s||hI(f).width>Number(a);return[p,f]},pG=(e,t,r,n,s)=>{var{maxLines:a,children:l,style:u,breakAll:d}=e,m=Tt(a),f=String(l),p=fI(t,n,r,s);if(!m||s)return p;var x=p.length>a||hI(p).width>Number(n);if(!x)return p;for(var v=0,b=f.length-1,w=0,j;v<=b&&w<=f.length-1;){var _=Math.floor((v+b)/2),E=_-1,[C,I]=H_(f,E,d,u,a,n,r,s),[A]=H_(f,_,d,u,a,n,r,s);if(!C&&!A&&(v=_+1),C&&A&&(b=_-1),!C&&A){j=I;break}w++}return j||p},K_=e=>{var t=is(e)?[]:e.toString().split(uI);return[{words:t,width:void 0}]},gG=e=>{var{width:t,scaleToFit:r,children:n,style:s,breakAll:a,maxLines:l}=e;if((t||r)&&!pu.isSsr){var u,d,m=dI({breakAll:a,children:n,style:s});if(m){var{wordsWithComputedWidth:f,spaceWidth:p}=m;u=f,d=p}else return K_(n);return pG({breakAll:a,children:n,maxLines:l,style:s},u,d,t,!!r)}return K_(n)},mI="#808080",yG={breakAll:!1,capHeight:"0.71em",fill:mI,lineHeight:"1em",scaleToFit:!1,textAnchor:"start",verticalAnchor:"end",x:0,y:0},Sw=g.forwardRef((e,t)=>{var r=Bi(e,yG),{x:n,y:s,lineHeight:a,capHeight:l,fill:u,scaleToFit:d,textAnchor:m,verticalAnchor:f}=r,p=q_(r,uG),x=g.useMemo(()=>gG({breakAll:p.breakAll,children:p.children,maxLines:p.maxLines,scaleToFit:d,style:p.style,width:p.width}),[p.breakAll,p.children,p.maxLines,d,p.style,p.width]),{dx:v,dy:b,angle:w,className:j,breakAll:_}=p,E=q_(p,dG);if(!Pa(n)||!Pa(s)||x.length===0)return null;var C=Number(n)+(Tt(v)?v:0),I=Number(s)+(Tt(b)?b:0);if(!jn(C)||!jn(I))return null;var A;switch(f){case"start":A=q0("calc(".concat(l,")"));break;case"middle":A=q0("calc(".concat((x.length-1)/2," * -").concat(a," + (").concat(l," / 2))"));break;default:A=q0("calc(".concat(x.length-1," * -").concat(a,")"));break}var $=[];if(d){var B=x[0].width,{width:T}=p;$.push("scale(".concat(Tt(T)&&Tt(B)?T/B:1,")"))}return w&&$.push("rotate(".concat(w,", ").concat(C,", ").concat(I,")")),$.length&&(E.transform=$.join(" ")),g.createElement("text",wv({},Fi(E),{ref:t,x:C,y:I,className:Vr("recharts-text",j),textAnchor:m,fill:u.includes("url")?mI:u}),x.map((K,Q)=>{var se=K.words.join(_?"":" ");return g.createElement("tspan",{x:C,dy:Q===0?A:a,key:"".concat(se,"-").concat(Q)},se)}))});Sw.displayName="Text";var xG=["labelRef"];function vG(e,t){if(e==null)return{};var r,n,s=bG(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function bG(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function G_(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function xn(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?G_(Object(r),!0).forEach(function(n){wG(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):G_(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function wG(e,t,r){return(t=jG(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function jG(e){var t=SG(e,"string");return typeof t=="symbol"?t:t+""}function SG(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Ja(){return Ja=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Ja.apply(null,arguments)}var pI=g.createContext(null),kG=e=>{var{x:t,y:r,upperWidth:n,lowerWidth:s,width:a,height:l,children:u}=e,d=g.useMemo(()=>({x:t,y:r,upperWidth:n,lowerWidth:s,width:a,height:l}),[t,r,n,s,a,l]);return g.createElement(pI.Provider,{value:d},u)},gI=()=>{var e=g.useContext(pI),t=mp();return e||PP(t)},NG=g.createContext(null),_G=()=>{var e=g.useContext(NG),t=_t(q4);return e||t},CG=e=>{var{value:t,formatter:r}=e,n=is(e.children)?t:e.children;return typeof r=="function"?r(n):n},kw=e=>e!=null&&typeof e=="function",EG=(e,t)=>{var r=xi(t-e),n=Math.min(Math.abs(t-e),360);return r*n},AG=(e,t,r,n,s)=>{var{offset:a,className:l}=e,{cx:u,cy:d,innerRadius:m,outerRadius:f,startAngle:p,endAngle:x,clockWise:v}=s,b=(m+f)/2,w=EG(p,x),j=w>=0?1:-1,_,E;switch(t){case"insideStart":_=p+j*a,E=v;break;case"insideEnd":_=x-j*a,E=!v;break;case"end":_=x+j*a,E=v;break;default:throw new Error("Unsupported position ".concat(t))}E=w<=0?E:!E;var C=vs(u,d,b,_),I=vs(u,d,b,_+(E?1:-1)*359),A="M".concat(C.x,",").concat(C.y,`
    A`).concat(b,",").concat(b,",0,1,").concat(E?0:1,`,
    `).concat(I.x,",").concat(I.y),$=is(e.id)?Pd("recharts-radial-line-"):e.id;return g.createElement("text",Ja({},n,{dominantBaseline:"central",className:Vr("recharts-radial-bar-label",l)}),g.createElement("defs",null,g.createElement("path",{id:$,d:A})),g.createElement("textPath",{xlinkHref:"#".concat($)},r))},PG=(e,t,r)=>{var{cx:n,cy:s,innerRadius:a,outerRadius:l,startAngle:u,endAngle:d}=e,m=(u+d)/2;if(r==="outside"){var{x:f,y:p}=vs(n,s,l+t,m);return{x:f,y:p,textAnchor:f>=n?"start":"end",verticalAnchor:"middle"}}if(r==="center")return{x:n,y:s,textAnchor:"middle",verticalAnchor:"middle"};if(r==="centerTop")return{x:n,y:s,textAnchor:"middle",verticalAnchor:"start"};if(r==="centerBottom")return{x:n,y:s,textAnchor:"middle",verticalAnchor:"end"};var x=(a+l)/2,{x:v,y:b}=vs(n,s,x,m);return{x:v,y:b,textAnchor:"middle",verticalAnchor:"middle"}},jv=e=>"cx"in e&&Tt(e.cx),OG=(e,t)=>{var{parentViewBox:r,offset:n,position:s}=e,a;r!=null&&!jv(r)&&(a=r);var{x:l,y:u,upperWidth:d,lowerWidth:m,height:f}=t,p=l,x=l+(d-m)/2,v=(p+x)/2,b=(d+m)/2,w=p+d/2,j=f>=0?1:-1,_=j*n,E=j>0?"end":"start",C=j>0?"start":"end",I=d>=0?1:-1,A=I*n,$=I>0?"end":"start",B=I>0?"start":"end";if(s==="top"){var T={x:p+d/2,y:u-_,textAnchor:"middle",verticalAnchor:E};return xn(xn({},T),a?{height:Math.max(u-a.y,0),width:d}:{})}if(s==="bottom"){var K={x:x+m/2,y:u+f+_,textAnchor:"middle",verticalAnchor:C};return xn(xn({},K),a?{height:Math.max(a.y+a.height-(u+f),0),width:m}:{})}if(s==="left"){var Q={x:v-A,y:u+f/2,textAnchor:$,verticalAnchor:"middle"};return xn(xn({},Q),a?{width:Math.max(Q.x-a.x,0),height:f}:{})}if(s==="right"){var se={x:v+b+A,y:u+f/2,textAnchor:B,verticalAnchor:"middle"};return xn(xn({},se),a?{width:Math.max(a.x+a.width-se.x,0),height:f}:{})}var G=a?{width:b,height:f}:{};return s==="insideLeft"?xn({x:v+A,y:u+f/2,textAnchor:B,verticalAnchor:"middle"},G):s==="insideRight"?xn({x:v+b-A,y:u+f/2,textAnchor:$,verticalAnchor:"middle"},G):s==="insideTop"?xn({x:p+d/2,y:u+_,textAnchor:"middle",verticalAnchor:C},G):s==="insideBottom"?xn({x:x+m/2,y:u+f-_,textAnchor:"middle",verticalAnchor:E},G):s==="insideTopLeft"?xn({x:p+A,y:u+_,textAnchor:B,verticalAnchor:C},G):s==="insideTopRight"?xn({x:p+d-A,y:u+_,textAnchor:$,verticalAnchor:C},G):s==="insideBottomLeft"?xn({x:x+A,y:u+f-_,textAnchor:B,verticalAnchor:E},G):s==="insideBottomRight"?xn({x:x+m-A,y:u+f-_,textAnchor:$,verticalAnchor:E},G):s&&typeof s=="object"&&(Tt(s.x)||ao(s.x))&&(Tt(s.y)||ao(s.y))?xn({x:l+ma(s.x,b),y:u+ma(s.y,f),textAnchor:"end",verticalAnchor:"end"},G):xn({x:w,y:u+f/2,textAnchor:"middle",verticalAnchor:"middle"},G)},IG={offset:5,zIndex:ti.label};function Bo(e){var t=Bi(e,IG),{viewBox:r,position:n,value:s,children:a,content:l,className:u="",textBreakAll:d,labelRef:m}=t,f=_G(),p=gI(),x=n==="center"?p:f??p,v,b,w;if(r==null?v=x:jv(r)?v=r:v=PP(r),!v||is(s)&&is(a)&&!g.isValidElement(l)&&typeof l!="function")return null;var j=xn(xn({},t),{},{viewBox:v});if(g.isValidElement(l)){var{labelRef:_}=j,E=vG(j,xG);return g.cloneElement(l,E)}if(typeof l=="function"){if(b=g.createElement(l,j),g.isValidElement(b))return b}else b=CG(t);var C=Fi(t);if(jv(v)){if(n==="insideStart"||n==="insideEnd"||n==="end")return AG(t,n,b,C,v);w=PG(v,t.offset,t.position)}else w=OG(t,v);return g.createElement(sl,{zIndex:t.zIndex},g.createElement(Sw,Ja({ref:m,className:Vr("recharts-label",u)},C,w,{textAnchor:hG(C.textAnchor)?C.textAnchor:w.textAnchor,breakAll:d}),b))}Bo.displayName="Label";var TG=(e,t,r)=>{if(!e)return null;var n={viewBox:t,labelRef:r};return e===!0?g.createElement(Bo,Ja({key:"label-implicit"},n)):Pa(e)?g.createElement(Bo,Ja({key:"label-implicit",value:e},n)):g.isValidElement(e)?e.type===Bo?g.cloneElement(e,xn({key:"label-implicit"},n)):g.createElement(Bo,Ja({key:"label-implicit",content:e},n)):kw(e)?g.createElement(Bo,Ja({key:"label-implicit",content:e},n)):e&&typeof e=="object"?g.createElement(Bo,Ja({},e,{key:"label-implicit"},n)):null};function DG(e){var{label:t,labelRef:r}=e,n=gI();return TG(t,n,r)||null}var H0={},K0={},Y_;function $G(){return Y_||(Y_=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r[r.length-1]}e.last=t})(K0)),K0}var G0={},J_;function RG(){return J_||(J_=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return Array.isArray(r)?r:Array.from(r)}e.toArray=t})(G0)),G0}var X_;function MG(){return X_||(X_=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=$G(),r=RG(),n=hb();function s(a){if(n.isArrayLike(a))return t.last(r.toArray(a))}e.last=s})(H0)),H0}var Y0,Q_;function FG(){return Q_||(Q_=1,Y0=MG().last),Y0}var LG=FG();const zG=pa(LG);var UG=["valueAccessor"],BG=["dataKey","clockWise","id","textBreakAll","zIndex"];function Am(){return Am=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Am.apply(null,arguments)}function Z_(e,t){if(e==null)return{};var r,n,s=WG(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function WG(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var VG=e=>Array.isArray(e.value)?zG(e.value):e.value,yI=g.createContext(void 0),qG=yI.Provider,xI=g.createContext(void 0);xI.Provider;function HG(){return g.useContext(yI)}function KG(){return g.useContext(xI)}function Th(e){var{valueAccessor:t=VG}=e,r=Z_(e,UG),{dataKey:n,clockWise:s,id:a,textBreakAll:l,zIndex:u}=r,d=Z_(r,BG),m=HG(),f=KG(),p=m||f;return!p||!p.length?null:g.createElement(sl,{zIndex:u??ti.label},g.createElement(io,{className:"recharts-label-list"},p.map((x,v)=>{var b,w=is(n)?t(x,v):Ls(x&&x.payload,n),j=is(a)?{}:{id:"".concat(a,"-").concat(v)};return g.createElement(Bo,Am({key:"label-".concat(v)},Fi(x),d,j,{fill:(b=r.fill)!==null&&b!==void 0?b:x.fill,parentViewBox:x.parentViewBox,value:w,textBreakAll:l,viewBox:x.viewBox,index:v,zIndex:0}))})))}Th.displayName="LabelList";function GG(e){var{label:t}=e;return t?t===!0?g.createElement(Th,{key:"labelList-implicit"}):g.isValidElement(t)||kw(t)?g.createElement(Th,{key:"labelList-implicit",content:t}):typeof t=="object"?g.createElement(Th,Am({key:"labelList-implicit"},t,{type:String(t.type)})):null:null}var YG={radiusAxis:{},angleAxis:{}},vI=ni({name:"polarAxis",initialState:YG,reducers:{addRadiusAxis(e,t){e.radiusAxis[t.payload.id]=t.payload},removeRadiusAxis(e,t){delete e.radiusAxis[t.payload.id]},addAngleAxis(e,t){e.angleAxis[t.payload.id]=t.payload},removeAngleAxis(e,t){delete e.angleAxis[t.payload.id]}}}),{addRadiusAxis:Iee,removeRadiusAxis:Tee,addAngleAxis:Dee,removeAngleAxis:$ee}=vI.actions,JG=vI.reducer,J0={exports:{}},Er={};/**
 * @license React
 * react-is.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var eC;function XG(){if(eC)return Er;eC=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),a=Symbol.for("react.consumer"),l=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),m=Symbol.for("react.suspense_list"),f=Symbol.for("react.memo"),p=Symbol.for("react.lazy"),x=Symbol.for("react.view_transition"),v=Symbol.for("react.client.reference");function b(w){if(typeof w=="object"&&w!==null){var j=w.$$typeof;switch(j){case e:switch(w=w.type,w){case r:case s:case n:case d:case m:case x:return w;default:switch(w=w&&w.$$typeof,w){case l:case u:case p:case f:return w;case a:return w;default:return j}}case t:return j}}}return Er.ContextConsumer=a,Er.ContextProvider=l,Er.Element=e,Er.ForwardRef=u,Er.Fragment=r,Er.Lazy=p,Er.Memo=f,Er.Portal=t,Er.Profiler=s,Er.StrictMode=n,Er.Suspense=d,Er.SuspenseList=m,Er.isContextConsumer=function(w){return b(w)===a},Er.isContextProvider=function(w){return b(w)===l},Er.isElement=function(w){return typeof w=="object"&&w!==null&&w.$$typeof===e},Er.isForwardRef=function(w){return b(w)===u},Er.isFragment=function(w){return b(w)===r},Er.isLazy=function(w){return b(w)===p},Er.isMemo=function(w){return b(w)===f},Er.isPortal=function(w){return b(w)===t},Er.isProfiler=function(w){return b(w)===s},Er.isStrictMode=function(w){return b(w)===n},Er.isSuspense=function(w){return b(w)===d},Er.isSuspenseList=function(w){return b(w)===m},Er.isValidElementType=function(w){return typeof w=="string"||typeof w=="function"||w===r||w===s||w===n||w===d||w===m||typeof w=="object"&&w!==null&&(w.$$typeof===p||w.$$typeof===f||w.$$typeof===l||w.$$typeof===a||w.$$typeof===u||w.$$typeof===v||w.getModuleId!==void 0)},Er.typeOf=b,Er}var tC;function QG(){return tC||(tC=1,J0.exports=XG()),J0.exports}var ZG=QG(),rC=e=>typeof e=="string"?e:e?e.displayName||e.name||"Component":"",nC=null,X0=null,bI=e=>{if(e===nC&&Array.isArray(X0))return X0;var t=[];return g.Children.forEach(e,r=>{is(r)||(ZG.isFragment(r)?t=t.concat(bI(r.props.children)):t.push(r))}),X0=t,nC=e,t};function eY(e,t){var r=[],n=[];return Array.isArray(t)?n=t.map(s=>rC(s)):n=[rC(t)],bI(e).forEach(s=>{var a=Xc(s,"type.displayName")||Xc(s,"type.name");a&&n.indexOf(a)!==-1&&r.push(s)}),r}var Q0={},sC;function tY(){return sC||(sC=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){var s;if(typeof r!="object"||r==null)return!1;if(Object.getPrototypeOf(r)===null)return!0;if(Object.prototype.toString.call(r)!=="[object Object]"){const a=r[Symbol.toStringTag];return a==null||!((s=Object.getOwnPropertyDescriptor(r,Symbol.toStringTag))!=null&&s.writable)?!1:r.toString()===`[object ${a}]`}let n=r;for(;Object.getPrototypeOf(n)!==null;)n=Object.getPrototypeOf(n);return Object.getPrototypeOf(r)===n}e.isPlainObject=t})(Q0)),Q0}var Z0,iC;function rY(){return iC||(iC=1,Z0=tY().isPlainObject),Z0}var nY=rY();const sY=pa(nY);function aC(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function oC(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?aC(Object(r),!0).forEach(function(n){iY(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):aC(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function iY(e,t,r){return(t=aY(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function aY(e){var t=oY(e,"string");return typeof t=="symbol"?t:t+""}function oY(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Pm(){return Pm=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Pm.apply(null,arguments)}var lC=(e,t,r,n,s)=>{var a=r-n,l;return l="M ".concat(e,",").concat(t),l+="L ".concat(e+r,",").concat(t),l+="L ".concat(e+r-a/2,",").concat(t+s),l+="L ".concat(e+r-a/2-n,",").concat(t+s),l+="L ".concat(e,",").concat(t," Z"),l},lY={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},cY=e=>{var t=Bi(e,lY),{x:r,y:n,upperWidth:s,lowerWidth:a,height:l,className:u}=t,{animationEasing:d,animationDuration:m,animationBegin:f,isUpdateAnimationActive:p}=t,x=g.useRef(null),[v,b]=g.useState(-1),w=g.useRef(s),j=g.useRef(a),_=g.useRef(l),E=g.useRef(r),C=g.useRef(n),I=Sb(e,"trapezoid-");if(g.useEffect(()=>{if(x.current&&x.current.getTotalLength)try{var F=x.current.getTotalLength();F&&b(F)}catch{}},[]),r!==+r||n!==+n||s!==+s||a!==+a||l!==+l||s===0&&a===0||l===0)return null;var A=Vr("recharts-trapezoid",u);if(!p)return g.createElement("g",null,g.createElement("path",Pm({},Fi(t),{className:A,d:lC(r,n,s,a,l)})));var $=w.current,B=j.current,T=_.current,K=E.current,Q=C.current,se="0px ".concat(v===-1?1:v,"px"),G="".concat(v,"px 0px"),le=DP(["strokeDasharray"],m,d);return g.createElement(jb,{animationId:I,key:I,canBegin:v>0,duration:m,easing:d,isActive:p,begin:f},F=>{var Y=ys($,s,F),J=ys(B,a,F),V=ys(T,l,F),H=ys(K,r,F),re=ys(Q,n,F);x.current&&(w.current=Y,j.current=J,_.current=V,E.current=H,C.current=re);var ie=F>0?{transition:le,strokeDasharray:G}:{strokeDasharray:se};return g.createElement("path",Pm({},Fi(t),{className:A,d:lC(H,re,Y,J,V),ref:x,style:oC(oC({},ie),t.style)}))})},uY=["option","shapeType","propTransformer","activeClassName","isActive"];function dY(e,t){if(e==null)return{};var r,n,s=fY(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function fY(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function cC(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Om(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?cC(Object(r),!0).forEach(function(n){hY(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):cC(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function hY(e,t,r){return(t=mY(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function mY(e){var t=pY(e,"string");return typeof t=="symbol"?t:t+""}function pY(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function gY(e,t){return Om(Om({},t),e)}function yY(e,t){return e==="symbols"}function uC(e){var{shapeType:t,elementProps:r}=e;switch(t){case"rectangle":return g.createElement(FP,r);case"trapezoid":return g.createElement(cY,r);case"sector":return g.createElement(UP,r);case"symbols":if(yY(t))return g.createElement(MA,r);break;case"curve":return g.createElement(TP,r);default:return null}}function xY(e){return g.isValidElement(e)?e.props:e}function vY(e){var{option:t,shapeType:r,propTransformer:n=gY,activeClassName:s="recharts-active-shape",isActive:a}=e,l=dY(e,uY),u;if(g.isValidElement(t))u=g.cloneElement(t,Om(Om({},l),xY(t)));else if(typeof t=="function")u=t(l);else if(sY(t)&&typeof t!="boolean"){var d=n(t,l);u=g.createElement(uC,{shapeType:r,elementProps:d})}else{var m=l;u=g.createElement(uC,{shapeType:r,elementProps:m})}return a?g.createElement(io,{className:s},u):u}var wI=(e,t)=>{var r=Sn();return(n,s)=>a=>{e==null||e(n,s,a),r($O({activeIndex:String(s),activeDataKey:t,activeCoordinate:n.tooltipPosition}))}},jI=e=>{var t=Sn();return(r,n)=>s=>{e==null||e(r,n,s),t(Vq())}},SI=(e,t)=>{var r=Sn();return(n,s)=>a=>{e==null||e(n,s,a),r(qq({activeIndex:String(s),activeDataKey:t,activeCoordinate:n.tooltipPosition}))}};function bY(e){var{fn:t,args:r}=e,n=Sn(),s=Si();return g.useLayoutEffect(()=>{if(!s){var a=t(r);return n(Uq(a)),()=>{n(Bq(a))}}},[t,r,n,s]),null}function wY(e){var{legendPayload:t}=e,r=Sn(),n=Si();return g.useLayoutEffect(()=>n?mu:(r(jB(t)),()=>{r(SB(t))}),[r,n,t]),null}var ex,jY=()=>{var[e]=g.useState(()=>Pd("uid-"));return e},SY=(ex=mD.useId)!==null&&ex!==void 0?ex:jY;function kI(e,t){var r=SY();return t||(e?"".concat(e,"-").concat(r):r)}var kY=g.createContext(void 0),NY=e=>{var{id:t,type:r,children:n}=e,s=kI("recharts-".concat(r),t);return g.createElement(kY.Provider,{value:s},n(s))},_Y={cartesianItems:[],polarItems:[]},NI=ni({name:"graphicalItems",initialState:_Y,reducers:{addCartesianGraphicalItem:{reducer(e,t){e.cartesianItems.push(t.payload)},prepare:zn()},replaceCartesianGraphicalItem:{reducer(e,t){var{prev:r,next:n}=t.payload,s=to(e).cartesianItems.indexOf(r);s>-1&&(e.cartesianItems[s]=n)},prepare:zn()},removeCartesianGraphicalItem:{reducer(e,t){var r=to(e).cartesianItems.indexOf(t.payload);r>-1&&e.cartesianItems.splice(r,1)},prepare:zn()},addPolarGraphicalItem:{reducer(e,t){e.polarItems.push(t.payload)},prepare:zn()},removePolarGraphicalItem:{reducer(e,t){var r=to(e).polarItems.indexOf(t.payload);r>-1&&e.polarItems.splice(r,1)},prepare:zn()}}}),{addCartesianGraphicalItem:CY,replaceCartesianGraphicalItem:EY,removeCartesianGraphicalItem:AY,addPolarGraphicalItem:Ree,removePolarGraphicalItem:Mee}=NI.actions,PY=NI.reducer;function OY(e){var t=Sn(),r=g.useRef(null);return g.useLayoutEffect(()=>{r.current===null?t(CY(e)):r.current!==e&&t(EY({prev:r.current,next:e})),r.current=e},[t,e]),g.useLayoutEffect(()=>()=>{r.current&&(t(AY(r.current)),r.current=null)},[t]),null}function dC(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function fC(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?dC(Object(r),!0).forEach(function(n){IY(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):dC(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function IY(e,t,r){return(t=TY(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function TY(e){var t=DY(e,"string");return typeof t=="symbol"?t:t+""}function DY(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var $Y={xAxis:{},yAxis:{},zAxis:{}},_I=ni({name:"cartesianAxis",initialState:$Y,reducers:{addXAxis:{reducer(e,t){e.xAxis[t.payload.id]=t.payload},prepare:zn()},removeXAxis:{reducer(e,t){delete e.xAxis[t.payload.id]},prepare:zn()},addYAxis:{reducer(e,t){e.yAxis[t.payload.id]=t.payload},prepare:zn()},removeYAxis:{reducer(e,t){delete e.yAxis[t.payload.id]},prepare:zn()},addZAxis:{reducer(e,t){e.zAxis[t.payload.id]=t.payload},prepare:zn()},removeZAxis:{reducer(e,t){delete e.zAxis[t.payload.id]},prepare:zn()},updateYAxisWidth(e,t){var{id:r,width:n}=t.payload,s=e.yAxis[r];if(s){var a=s.widthHistory||[];if(a.length===3&&a[0]===a[2]&&n===a[1]&&n!==s.width&&Math.abs(n-a[0])<=1)return;var l=[...a,n].slice(-3);e.yAxis[r]=fC(fC({},e.yAxis[r]),{},{width:n,widthHistory:l})}}}}),{addXAxis:RY,removeXAxis:MY,addYAxis:FY,removeYAxis:LY,addZAxis:Fee,removeZAxis:Lee,updateYAxisWidth:zY}=_I.actions,UY=_I.reducer,BY=ke([as],e=>({top:e.top,bottom:e.bottom,left:e.left,right:e.right})),WY=ke([BY,po,go],(e,t,r)=>{if(!(!e||t==null||r==null))return{x:e.left,y:e.top,width:Math.max(0,t-e.left-e.right),height:Math.max(0,r-e.top-e.bottom)}}),CI=()=>_t(WY),VY="Invariant failed";function qY(e,t){throw new Error(VY)}var HY=["x","y"];function Sv(){return Sv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Sv.apply(null,arguments)}function hC(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function od(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?hC(Object(r),!0).forEach(function(n){KY(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):hC(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function KY(e,t,r){return(t=GY(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function GY(e){var t=YY(e,"string");return typeof t=="symbol"?t:t+""}function YY(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function JY(e,t){if(e==null)return{};var r,n,s=XY(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function XY(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function QY(e,t){var{x:r,y:n}=e,s=JY(e,HY),a="".concat(r),l=parseInt(a,10),u="".concat(n),d=parseInt(u,10),m="".concat(t.height||s.height),f=parseInt(m,10),p="".concat(t.width||s.width),x=parseInt(p,10);return od(od(od(od(od({},t),s),l?{x:l}:{}),d?{y:d}:{}),{},{height:f,width:x,name:t.name,radius:t.radius})}function Im(e){return g.createElement(vY,Sv({shapeType:"rectangle",propTransformer:QY,activeClassName:"recharts-active-bar"},e))}var ZY=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return(n,s)=>{if(Tt(t))return t;var a=Tt(n)||is(n);return a?t(n,s):(a||qY(),r)}},eJ={},EI=ni({name:"errorBars",initialState:eJ,reducers:{addErrorBar:(e,t)=>{var{itemId:r,errorBar:n}=t.payload;e[r]||(e[r]=[]),e[r].push(n)},replaceErrorBar:(e,t)=>{var{itemId:r,prev:n,next:s}=t.payload;e[r]&&(e[r]=e[r].map(a=>a.dataKey===n.dataKey&&a.direction===n.direction?s:a))},removeErrorBar:(e,t)=>{var{itemId:r,errorBar:n}=t.payload;e[r]&&(e[r]=e[r].filter(s=>s.dataKey!==n.dataKey||s.direction!==n.direction))}}}),{addErrorBar:zee,replaceErrorBar:Uee,removeErrorBar:Bee}=EI.actions,tJ=EI.reducer,rJ=["children"];function nJ(e,t){if(e==null)return{};var r,n,s=sJ(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function sJ(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var iJ={data:[],xAxisId:"xAxis-0",yAxisId:"yAxis-0",dataPointFormatter:()=>({x:0,y:0,value:0}),errorBarOffset:0},aJ=g.createContext(iJ);function oJ(e){var{children:t}=e,r=nJ(e,rJ);return g.createElement(aJ.Provider,{value:r},t)}function AI(e,t){var r,n,s=_t(m=>xo(m,e)),a=_t(m=>vo(m,t)),l=(r=s==null?void 0:s.allowDataOverflow)!==null&&r!==void 0?r:di.allowDataOverflow,u=(n=a==null?void 0:a.allowDataOverflow)!==null&&n!==void 0?n:fi.allowDataOverflow,d=l||u;return{needClip:d,needClipX:l,needClipY:u}}function lJ(e){var{xAxisId:t,yAxisId:r,clipPathId:n}=e,s=CI(),{needClipX:a,needClipY:l,needClip:u}=AI(t,r);if(!u||!s)return null;var{x:d,y:m,width:f,height:p}=s;return g.createElement("clipPath",{id:"clipPath-".concat(n)},g.createElement("rect",{x:a?d:d-f/2,y:l?m:m-p/2,width:a?f:f*2,height:l?p:p*2}))}function cJ(e,t){return e&&typeof e=="object"&&"zIndex"in e&&typeof e.zIndex=="number"&&jn(e.zIndex)?e.zIndex:t}var uJ=["onMouseEnter","onMouseLeave","onClick"],dJ=["value","background","tooltipPosition"],fJ=["id"],hJ=["onMouseEnter","onClick","onMouseLeave"];function ho(){return ho=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},ho.apply(null,arguments)}function mC(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Ms(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?mC(Object(r),!0).forEach(function(n){mJ(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):mC(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function mJ(e,t,r){return(t=pJ(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function pJ(e){var t=gJ(e,"string");return typeof t=="symbol"?t:t+""}function gJ(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Tm(e,t){if(e==null)return{};var r,n,s=yJ(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function yJ(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var xJ=e=>{var{dataKey:t,name:r,fill:n,legendType:s,hide:a}=e;return[{inactive:a,dataKey:t,type:s,color:n,value:NP(r,t),payload:e}]};function vJ(e){var{dataKey:t,stroke:r,strokeWidth:n,fill:s,name:a,hide:l,unit:u}=e;return{dataDefinedOnItem:void 0,positions:void 0,settings:{stroke:r,strokeWidth:n,fill:s,dataKey:t,nameKey:void 0,name:NP(a,t),hide:l,type:e.tooltipType,color:e.fill,unit:u}}}function bJ(e){var t=_t(nu),{data:r,dataKey:n,background:s,allOtherBarProps:a}=e,{onMouseEnter:l,onMouseLeave:u,onClick:d}=a,m=Tm(a,uJ),f=wI(l,n),p=jI(u),x=SI(d,n);if(!s||r==null)return null;var v=ib(s);return g.createElement(sl,{zIndex:cJ(s,ti.barBackground)},r.map((b,w)=>{var{value:j,background:_,tooltipPosition:E}=b,C=Tm(b,dJ);if(!_)return null;var I=f(b,w),A=p(b,w),$=x(b,w),B=Ms(Ms(Ms(Ms(Ms({option:s,isActive:String(w)===t},C),{},{fill:"#eee"},_),v),fb(m,b,w)),{},{onMouseEnter:I,onMouseLeave:A,onClick:$,dataKey:n,index:w,className:"recharts-bar-background-rectangle"});return g.createElement(Im,ho({key:"background-bar-".concat(w)},B))}))}function wJ(e){var{showLabels:t,children:r,rects:n}=e,s=n==null?void 0:n.map(a=>{var l={x:a.x,y:a.y,width:a.width,lowerWidth:a.width,upperWidth:a.width,height:a.height};return Ms(Ms({},l),{},{value:a.value,payload:a.payload,parentViewBox:a.parentViewBox,viewBox:l,fill:a.fill})});return g.createElement(qG,{value:t?s:void 0},r)}function jJ(e){var{shape:t,activeBar:r,baseProps:n,entry:s,index:a,dataKey:l}=e,u=_t(nu),d=_t(JO),m=r&&String(a)===u&&(d==null||l===d),f=m?r:t;return m?g.createElement(sl,{zIndex:ti.activeBar},g.createElement(Im,ho({},n,{name:String(n.name)},s,{isActive:m,option:f,index:a,dataKey:l}))):g.createElement(Im,ho({},n,{name:String(n.name)},s,{isActive:m,option:f,index:a,dataKey:l}))}function SJ(e){var{shape:t,baseProps:r,entry:n,index:s,dataKey:a}=e;return g.createElement(Im,ho({},r,{name:String(r.name)},n,{isActive:!1,option:t,index:s,dataKey:a}))}function kJ(e){var t,{data:r,props:n}=e,s=(t=Xo(n))!==null&&t!==void 0?t:{},{id:a}=s,l=Tm(s,fJ),{shape:u,dataKey:d,activeBar:m}=n,{onMouseEnter:f,onClick:p,onMouseLeave:x}=n,v=Tm(n,hJ),b=wI(f,d),w=jI(x),j=SI(p,d);return r?g.createElement(g.Fragment,null,r.map((_,E)=>g.createElement(io,ho({key:"rectangle-".concat(_==null?void 0:_.x,"-").concat(_==null?void 0:_.y,"-").concat(_==null?void 0:_.value,"-").concat(E),className:"recharts-bar-rectangle"},fb(v,_,E),{onMouseEnter:b(_,E),onMouseLeave:w(_,E),onClick:j(_,E)}),m?g.createElement(jJ,{shape:u,activeBar:m,baseProps:l,entry:_,index:E,dataKey:d}):g.createElement(SJ,{shape:u,baseProps:l,entry:_,index:E,dataKey:d})))):null}function NJ(e){var{props:t,previousRectanglesRef:r}=e,{data:n,layout:s,isAnimationActive:a,animationBegin:l,animationDuration:u,animationEasing:d,onAnimationEnd:m,onAnimationStart:f}=t,p=r.current,x=Sb(t,"recharts-bar-"),[v,b]=g.useState(!1),w=!v,j=g.useCallback(()=>{typeof m=="function"&&m(),b(!1)},[m]),_=g.useCallback(()=>{typeof f=="function"&&f(),b(!0)},[f]);return g.createElement(wJ,{showLabels:w,rects:n},g.createElement(jb,{animationId:x,begin:l,duration:u,isActive:a,easing:d,onAnimationEnd:j,onAnimationStart:_,key:x},E=>{var C=E===1?n:n==null?void 0:n.map((I,A)=>{var $=p&&p[A];if($)return Ms(Ms({},I),{},{x:ys($.x,I.x,E),y:ys($.y,I.y,E),width:ys($.width,I.width,E),height:ys($.height,I.height,E)});if(s==="horizontal"){var B=ys(0,I.height,E),T=ys(I.stackedBarStart,I.y,E);return Ms(Ms({},I),{},{y:T,height:B})}var K=ys(0,I.width,E),Q=ys(I.stackedBarStart,I.x,E);return Ms(Ms({},I),{},{width:K,x:Q})});return E>0&&(r.current=C??null),C==null?null:g.createElement(io,null,g.createElement(kJ,{props:t,data:C}))}),g.createElement(GG,{label:t.label}),t.children)}function _J(e){var t=g.useRef(null);return g.createElement(NJ,{previousRectanglesRef:t,props:e})}var PI=0,CJ=(e,t)=>{var r=Array.isArray(e.value)?e.value[1]:e.value;return{x:e.x,y:e.y,value:r,errorVal:Ls(e,t)}};class EJ extends g.PureComponent{render(){var{hide:t,data:r,dataKey:n,className:s,xAxisId:a,yAxisId:l,needClip:u,background:d,id:m}=this.props;if(t||r==null)return null;var f=Vr("recharts-bar",s),p=m;return g.createElement(io,{className:f,id:m},u&&g.createElement("defs",null,g.createElement(lJ,{clipPathId:p,xAxisId:a,yAxisId:l})),g.createElement(io,{className:"recharts-bar-rectangles",clipPath:u?"url(#clipPath-".concat(p,")"):void 0},g.createElement(bJ,{data:r,dataKey:n,background:d,allOtherBarProps:this.props}),g.createElement(_J,this.props)))}}var AJ={activeBar:!1,animationBegin:0,animationDuration:400,animationEasing:"ease",hide:!1,isAnimationActive:!pu.isSsr,legendType:"rect",minPointSize:PI,xAxisId:0,yAxisId:0,zIndex:ti.bar};function PJ(e){var{xAxisId:t,yAxisId:r,hide:n,legendType:s,minPointSize:a,activeBar:l,animationBegin:u,animationDuration:d,animationEasing:m,isAnimationActive:f}=e,{needClip:p}=AI(t,r),x=pp(),v=Si(),b=eY(e.children,jw),w=_t(E=>sX(E,t,r,v,e.id,b));if(x!=="vertical"&&x!=="horizontal")return null;var j,_=w==null?void 0:w[0];return _==null||_.height==null||_.width==null?j=0:j=x==="vertical"?_.height/2:_.width/2,g.createElement(oJ,{xAxisId:t,yAxisId:r,data:w,dataPointFormatter:CJ,errorBarOffset:j},g.createElement(EJ,ho({},e,{layout:x,needClip:p,data:w,xAxisId:t,yAxisId:r,hide:n,legendType:s,minPointSize:a,activeBar:l,animationBegin:u,animationDuration:d,animationEasing:m,isAnimationActive:f})))}function OJ(e){var{layout:t,barSettings:{dataKey:r,minPointSize:n},pos:s,bandSize:a,xAxis:l,yAxis:u,xAxisTicks:d,yAxisTicks:m,stackedData:f,displayedData:p,offset:x,cells:v,parentViewBox:b,dataStartIndex:w}=e,j=t==="horizontal"?u:l,_=f?j.scale.domain():null,E=TU({numericAxis:j}),C=j.scale(E);return p.map((I,A)=>{var $,B,T,K,Q,se;f?$=CU(f[A+w],_):($=Ls(I,r),Array.isArray($)||($=[E,$]));var G=ZY(n,PI)($[1],A);if(t==="horizontal"){var le,[F,Y]=[u.scale($[0]),u.scale($[1])];B=YN({axis:l,ticks:d,bandSize:a,offset:s.offset,entry:I,index:A}),T=(le=Y??F)!==null&&le!==void 0?le:void 0,K=s.size;var J=F-Y;if(Q=Aa(J)?0:J,se={x:B,y:x.top,width:K,height:x.height},Math.abs(G)>0&&Math.abs(Q)<Math.abs(G)){var V=xi(Q||G)*(Math.abs(G)-Math.abs(Q));T-=V,Q+=V}}else{var[H,re]=[l.scale($[0]),l.scale($[1])];if(B=H,T=YN({axis:u,ticks:m,bandSize:a,offset:s.offset,entry:I,index:A}),K=re-H,Q=s.size,se={x:x.left,y:T,width:x.width,height:Q},Math.abs(G)>0&&Math.abs(K)<Math.abs(G)){var ie=xi(K||G)*(Math.abs(G)-Math.abs(K));K+=ie}}if(B==null||T==null||K==null||Q==null)return null;var M=Ms(Ms({},I),{},{stackedBarStart:C,x:B,y:T,width:K,height:Q,value:f?$:$[1],payload:I,background:se,tooltipPosition:{x:B+K/2,y:T+Q/2},parentViewBox:b},v&&v[A]&&v[A].props);return M}).filter(Boolean)}function IJ(e){var t=Bi(e,AJ),r=Si();return g.createElement(NY,{id:t.id,type:"bar"},n=>g.createElement(g.Fragment,null,g.createElement(wY,{legendPayload:xJ(t)}),g.createElement(bY,{fn:vJ,args:t}),g.createElement(OY,{type:"bar",id:n,data:void 0,xAxisId:t.xAxisId,yAxisId:t.yAxisId,zAxisId:0,dataKey:t.dataKey,stackId:IU(t.stackId),hide:t.hide,barSize:t.barSize,minPointSize:t.minPointSize,maxBarSize:t.maxBarSize,isPanorama:r}),g.createElement(sl,{zIndex:t.zIndex},g.createElement(PJ,ho({},t,{id:n})))))}var OI=g.memo(IJ);OI.displayName="Bar";function pC(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function kh(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?pC(Object(r),!0).forEach(function(n){TJ(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):pC(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function TJ(e,t,r){return(t=DJ(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function DJ(e){var t=$J(e,"string");return typeof t=="symbol"?t:t+""}function $J(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var RJ=(e,t)=>t,MJ=(e,t,r)=>r,FJ=(e,t,r,n)=>n,LJ=(e,t,r,n,s)=>s,cf=ke([sw,LJ],(e,t)=>e.filter(r=>r.type==="bar").find(r=>r.id===t)),zJ=ke([cf],e=>e==null?void 0:e.maxBarSize),UJ=(e,t,r,n,s,a)=>a,gC=(e,t,r)=>{var n=r??e;if(!is(n))return ma(n,t,0)},BJ=ke([Nr,sw,RJ,MJ,FJ],(e,t,r,n,s)=>t.filter(a=>e==="horizontal"?a.xAxisId===r:a.yAxisId===n).filter(a=>a.isPanorama===s).filter(a=>a.hide===!1).filter(a=>a.type==="bar")),WJ=(e,t,r,n)=>{var s=Nr(e);return s==="horizontal"?gv(e,"yAxis",r,n):gv(e,"xAxis",t,n)},VJ=(e,t,r)=>{var n=Nr(e);return n==="horizontal"?w_(e,"xAxis",t):w_(e,"yAxis",r)},qJ=(e,t,r)=>{var n={},s=e.filter(Ep),a=e.filter(m=>m.stackId==null),l=s.reduce((m,f)=>(m[f.stackId]||(m[f.stackId]=[]),m[f.stackId].push(f),m),n),u=Object.entries(l).map(m=>{var[f,p]=m,x=p.map(b=>b.dataKey),v=gC(t,r,p[0].barSize);return{stackId:f,dataKeys:x,barSize:v}}),d=a.map(m=>{var f=[m.dataKey].filter(x=>x!=null),p=gC(t,r,m.barSize);return{stackId:void 0,dataKeys:f,barSize:p}});return[...u,...d]},HJ=ke([BJ,DV,VJ],qJ),KJ=(e,t,r,n,s)=>{var a,l,u=cf(e,t,r,n,s);if(u!=null){var d=Nr(e),m=F4(e),{maxBarSize:f}=u,p=is(f)?m:f,x,v;return d==="horizontal"?(x=ru(e,"xAxis",t,n),v=tu(e,"xAxis",t,n)):(x=ru(e,"yAxis",r,n),v=tu(e,"yAxis",r,n)),(a=(l=um(x,v,!0))!==null&&l!==void 0?l:p)!==null&&a!==void 0?a:0}},II=(e,t,r,n)=>{var s=Nr(e),a,l;return s==="horizontal"?(a=ru(e,"xAxis",t,n),l=tu(e,"xAxis",t,n)):(a=ru(e,"yAxis",r,n),l=tu(e,"yAxis",r,n)),um(a,l)};function GJ(e,t,r,n,s){var a=n.length;if(!(a<1)){var l=ma(e,r,0,!0),u,d=[];if(jn(n[0].barSize)){var m=!1,f=r/a,p=n.reduce((_,E)=>_+(E.barSize||0),0);p+=(a-1)*l,p>=r&&(p-=(a-1)*l,l=0),p>=r&&f>0&&(m=!0,f*=.9,p=a*f);var x=(r-p)/2>>0,v={offset:x-l,size:0};u=n.reduce((_,E)=>{var C,I={stackId:E.stackId,dataKeys:E.dataKeys,position:{offset:v.offset+v.size+l,size:m?f:(C=E.barSize)!==null&&C!==void 0?C:0}},A=[..._,I];return v=A[A.length-1].position,A},d)}else{var b=ma(t,r,0,!0);r-2*b-(a-1)*l<=0&&(l=0);var w=(r-2*b-(a-1)*l)/a;w>1&&(w>>=0);var j=jn(s)?Math.min(w,s):w;u=n.reduce((_,E,C)=>[..._,{stackId:E.stackId,dataKeys:E.dataKeys,position:{offset:b+(w+l)*C+(w-j)/2,size:j}}],d)}return u}}var YJ=(e,t,r,n,s,a,l)=>{var u=is(l)?t:l,d=GJ(r,n,s!==a?s:a,e,u);return s!==a&&d!=null&&(d=d.map(m=>kh(kh({},m),{},{position:kh(kh({},m.position),{},{offset:m.position.offset-s/2})}))),d},JJ=ke([HJ,F4,TV,L4,KJ,II,zJ],YJ),XJ=(e,t,r,n)=>ru(e,"xAxis",t,n),QJ=(e,t,r,n)=>ru(e,"yAxis",r,n),ZJ=(e,t,r,n)=>tu(e,"xAxis",t,n),eX=(e,t,r,n)=>tu(e,"yAxis",r,n),tX=ke([JJ,cf],(e,t)=>{if(!(e==null||t==null)){var r=e.find(n=>n.stackId===t.stackId&&t.dataKey!=null&&n.dataKeys.includes(t.dataKey));if(r!=null)return r.position}}),rX=(e,t)=>{var r=rw(t);if(!(!e||r==null||t==null)){var{stackId:n}=t;if(n!=null){var s=e[n];if(s){var{stackedData:a}=s;if(a)return a.find(l=>l.key===r)}}}},nX=ke([WJ,cf],rX),sX=ke([as,bb,XJ,QJ,ZJ,eX,tX,Nr,Kb,II,nX,cf,UJ],(e,t,r,n,s,a,l,u,d,m,f,p,x)=>{var{chartData:v,dataStartIndex:b,dataEndIndex:w}=d;if(!(p==null||l==null||t==null||u!=="horizontal"&&u!=="vertical"||r==null||n==null||s==null||a==null||m==null)){var{data:j}=p,_;if(j!=null&&j.length>0?_=j:_=v==null?void 0:v.slice(b,w+1),_!=null)return OJ({layout:u,barSettings:p,pos:l,parentViewBox:t,bandSize:m,xAxis:r,yAxis:n,xAxisTicks:s,yAxisTicks:a,stackedData:f,displayedData:_,offset:e,cells:x,dataStartIndex:b})}}),iX=e=>{var{chartData:t}=e,r=Sn(),n=Si();return g.useEffect(()=>n?()=>{}:(r(T_(t)),()=>{r(T_(void 0))}),[t,r,n]),null},yC={x:0,y:0,width:0,height:0,padding:{top:0,right:0,bottom:0,left:0}},TI=ni({name:"brush",initialState:yC,reducers:{setBrushSettings(e,t){return t.payload==null?yC:t.payload}}}),{setBrushSettings:Wee}=TI.actions,aX=TI.reducer;function oX(e,t,r){return(t=lX(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function lX(e){var t=cX(e,"string");return typeof t=="symbol"?t:t+""}function cX(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class Nw{static create(t){return new Nw(t)}constructor(t){this.scale=t}get domain(){return this.scale.domain}get range(){return this.scale.range}get rangeMin(){return this.range()[0]}get rangeMax(){return this.range()[1]}get bandwidth(){return this.scale.bandwidth}apply(t){var{bandAware:r,position:n}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(t!==void 0){if(n)switch(n){case"start":return this.scale(t);case"middle":{var s=this.bandwidth?this.bandwidth()/2:0;return this.scale(t)+s}case"end":{var a=this.bandwidth?this.bandwidth():0;return this.scale(t)+a}default:return this.scale(t)}if(r){var l=this.bandwidth?this.bandwidth()/2:0;return this.scale(t)+l}return this.scale(t)}}isInRange(t){var r=this.range(),n=r[0],s=r[r.length-1];return n<=s?t>=n&&t<=s:t>=s&&t<=n}}oX(Nw,"EPS",1e-4);function uX(e){return(e%180+180)%180}var dX=function(t){var{width:r,height:n}=t,s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,a=uX(s),l=a*Math.PI/180,u=Math.atan(n/r),d=l>u&&l<Math.PI-u?n/Math.sin(l):r/Math.cos(l);return Math.abs(d)},fX={dots:[],areas:[],lines:[]},DI=ni({name:"referenceElements",initialState:fX,reducers:{addDot:(e,t)=>{e.dots.push(t.payload)},removeDot:(e,t)=>{var r=to(e).dots.findIndex(n=>n===t.payload);r!==-1&&e.dots.splice(r,1)},addArea:(e,t)=>{e.areas.push(t.payload)},removeArea:(e,t)=>{var r=to(e).areas.findIndex(n=>n===t.payload);r!==-1&&e.areas.splice(r,1)},addLine:(e,t)=>{e.lines.push(t.payload)},removeLine:(e,t)=>{var r=to(e).lines.findIndex(n=>n===t.payload);r!==-1&&e.lines.splice(r,1)}}}),{addDot:Vee,removeDot:qee,addArea:Hee,removeArea:Kee,addLine:Gee,removeLine:Yee}=DI.actions,hX=DI.reducer,mX=g.createContext(void 0),pX=e=>{var{children:t}=e,[r]=g.useState("".concat(Pd("recharts"),"-clip")),n=CI();if(n==null)return null;var{x:s,y:a,width:l,height:u}=n;return g.createElement(mX.Provider,{value:r},g.createElement("defs",null,g.createElement("clipPath",{id:r},g.createElement("rect",{x:s,y:a,height:u,width:l}))),t)};function su(e,t){for(var r in e)if({}.hasOwnProperty.call(e,r)&&(!{}.hasOwnProperty.call(t,r)||e[r]!==t[r]))return!1;for(var n in t)if({}.hasOwnProperty.call(t,n)&&!{}.hasOwnProperty.call(e,n))return!1;return!0}function $I(e,t){if(t<1)return[];if(t===1)return e;for(var r=[],n=0;n<e.length;n+=t)r.push(e[n]);return r}function gX(e,t,r){var n={width:e.width+t.width,height:e.height+t.height};return dX(n,r)}function yX(e,t,r){var n=r==="width",{x:s,y:a,width:l,height:u}=e;return t===1?{start:n?s:a,end:n?s+l:a+u}:{start:n?s+l:a+u,end:n?s:a}}function Dm(e,t,r,n,s){if(e*t<e*n||e*t>e*s)return!1;var a=r();return e*(t-e*a/2-n)>=0&&e*(t+e*a/2-s)<=0}function xX(e,t){return $I(e,t+1)}function vX(e,t,r,n,s){for(var a=(n||[]).slice(),{start:l,end:u}=t,d=0,m=1,f=l,p=function(){var b=n==null?void 0:n[d];if(b===void 0)return{v:$I(n,m)};var w=d,j,_=()=>(j===void 0&&(j=r(b,w)),j),E=b.coordinate,C=d===0||Dm(e,E,_,f,u);C||(d=0,f=l,m+=1),C&&(f=E+e*(_()/2+s),d+=m)},x;m<=a.length;)if(x=p(),x)return x.v;return[]}function xC(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function As(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?xC(Object(r),!0).forEach(function(n){bX(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):xC(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function bX(e,t,r){return(t=wX(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function wX(e){var t=jX(e,"string");return typeof t=="symbol"?t:t+""}function jX(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function SX(e,t,r,n,s){for(var a=(n||[]).slice(),l=a.length,{start:u}=t,{end:d}=t,m=function(x){var v=a[x],b,w=()=>(b===void 0&&(b=r(v,x)),b);if(x===l-1){var j=e*(v.coordinate+e*w()/2-d);a[x]=v=As(As({},v),{},{tickCoord:j>0?v.coordinate-j*e:v.coordinate})}else a[x]=v=As(As({},v),{},{tickCoord:v.coordinate});if(v.tickCoord!=null){var _=Dm(e,v.tickCoord,w,u,d);_&&(d=v.tickCoord-e*(w()/2+s),a[x]=As(As({},v),{},{isShow:!0}))}},f=l-1;f>=0;f--)m(f);return a}function kX(e,t,r,n,s,a){var l=(n||[]).slice(),u=l.length,{start:d,end:m}=t;if(a){var f=n[u-1],p=r(f,u-1),x=e*(f.coordinate+e*p/2-m);if(l[u-1]=f=As(As({},f),{},{tickCoord:x>0?f.coordinate-x*e:f.coordinate}),f.tickCoord!=null){var v=Dm(e,f.tickCoord,()=>p,d,m);v&&(m=f.tickCoord-e*(p/2+s),l[u-1]=As(As({},f),{},{isShow:!0}))}}for(var b=a?u-1:u,w=function(E){var C=l[E],I,A=()=>(I===void 0&&(I=r(C,E)),I);if(E===0){var $=e*(C.coordinate-e*A()/2-d);l[E]=C=As(As({},C),{},{tickCoord:$<0?C.coordinate-$*e:C.coordinate})}else l[E]=C=As(As({},C),{},{tickCoord:C.coordinate});if(C.tickCoord!=null){var B=Dm(e,C.tickCoord,A,d,m);B&&(d=C.tickCoord+e*(A()/2+s),l[E]=As(As({},C),{},{isShow:!0}))}},j=0;j<b;j++)w(j);return l}function NX(e,t,r){var{tick:n,ticks:s,viewBox:a,minTickGap:l,orientation:u,interval:d,tickFormatter:m,unit:f,angle:p}=e;if(!s||!s.length||!n)return[];if(Tt(d)||pu.isSsr){var x;return(x=xX(s,Tt(d)?d:0))!==null&&x!==void 0?x:[]}var v=[],b=u==="top"||u==="bottom"?"width":"height",w=f&&b==="width"?Sd(f,{fontSize:t,letterSpacing:r}):{width:0,height:0},j=(C,I)=>{var A=typeof m=="function"?m(C.value,I):C.value;return b==="width"?gX(Sd(A,{fontSize:t,letterSpacing:r}),w,p):Sd(A,{fontSize:t,letterSpacing:r})[b]},_=s.length>=2?xi(s[1].coordinate-s[0].coordinate):1,E=yX(a,_,b);return d==="equidistantPreserveStart"?vX(_,E,j,s,l):(d==="preserveStart"||d==="preserveStartEnd"?v=kX(_,E,j,s,l,d==="preserveStartEnd"):v=SX(_,E,j,s,l),v.filter(C=>C.isShow))}var _X=e=>{var{ticks:t,label:r,labelGapWithTick:n=5,tickSize:s=0,tickMargin:a=0}=e,l=0;if(t){Array.from(t).forEach(f=>{if(f){var p=f.getBoundingClientRect();p.width>l&&(l=p.width)}});var u=r?r.getBoundingClientRect().width:0,d=s+a,m=l+d+u+(r?n:0);return Math.round(m)}return 0},CX=["axisLine","width","height","className","hide","ticks","axisType"],EX=["viewBox"],AX=["viewBox"];function kv(e,t){if(e==null)return{};var r,n,s=PX(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function PX(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function Hl(){return Hl=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Hl.apply(null,arguments)}function vC(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function An(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?vC(Object(r),!0).forEach(function(n){OX(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):vC(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function OX(e,t,r){return(t=IX(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function IX(e){var t=TX(e,"string");return typeof t=="symbol"?t:t+""}function TX(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var DX={x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd",zIndex:ti.axis};function $X(e){var{x:t,y:r,width:n,height:s,orientation:a,mirror:l,axisLine:u,otherSvgProps:d}=e;if(!u)return null;var m=An(An(An({},d),Xo(u)),{},{fill:"none"});if(a==="top"||a==="bottom"){var f=+(a==="top"&&!l||a==="bottom"&&l);m=An(An({},m),{},{x1:t,y1:r+f*s,x2:t+n,y2:r+f*s})}else{var p=+(a==="left"&&!l||a==="right"&&l);m=An(An({},m),{},{x1:t+p*n,y1:r,x2:t+p*n,y2:r+s})}return g.createElement("line",Hl({},m,{className:Vr("recharts-cartesian-axis-line",Xc(u,"className"))}))}function RX(e,t,r,n,s,a,l,u,d){var m,f,p,x,v,b,w=u?-1:1,j=e.tickSize||l,_=Tt(e.tickCoord)?e.tickCoord:e.coordinate;switch(a){case"top":m=f=e.coordinate,x=r+ +!u*s,p=x-w*j,b=p-w*d,v=_;break;case"left":p=x=e.coordinate,f=t+ +!u*n,m=f-w*j,v=m-w*d,b=_;break;case"right":p=x=e.coordinate,f=t+ +u*n,m=f+w*j,v=m+w*d,b=_;break;default:m=f=e.coordinate,x=r+ +u*s,p=x+w*j,b=p+w*d,v=_;break}return{line:{x1:m,y1:p,x2:f,y2:x},tick:{x:v,y:b}}}function MX(e,t){switch(e){case"left":return t?"start":"end";case"right":return t?"end":"start";default:return"middle"}}function FX(e,t){switch(e){case"left":case"right":return"middle";case"top":return t?"start":"end";default:return t?"end":"start"}}function LX(e){var{option:t,tickProps:r,value:n}=e,s,a=Vr(r.className,"recharts-cartesian-axis-tick-value");if(g.isValidElement(t))s=g.cloneElement(t,An(An({},r),{},{className:a}));else if(typeof t=="function")s=t(An(An({},r),{},{className:a}));else{var l="recharts-cartesian-axis-tick-value";typeof t!="boolean"&&(l=Vr(l,t==null?void 0:t.className)),s=g.createElement(Sw,Hl({},r,{className:l}),n)}return s}var zX=g.forwardRef((e,t)=>{var{ticks:r=[],tick:n,tickLine:s,stroke:a,tickFormatter:l,unit:u,padding:d,tickTextProps:m,orientation:f,mirror:p,x,y:v,width:b,height:w,tickSize:j,tickMargin:_,fontSize:E,letterSpacing:C,getTicksConfig:I,events:A,axisType:$}=e,B=NX(An(An({},I),{},{ticks:r}),E,C),T=MX(f,p),K=FX(f,p),Q=Xo(I),se=ib(n),G={};typeof s=="object"&&(G=s);var le=An(An({},Q),{},{fill:"none"},G),F=B.map(V=>An({entry:V},RX(V,x,v,b,w,f,j,p,_))),Y=F.map(V=>{var{entry:H,line:re}=V;return g.createElement(io,{className:"recharts-cartesian-axis-tick",key:"tick-".concat(H.value,"-").concat(H.coordinate,"-").concat(H.tickCoord)},s&&g.createElement("line",Hl({},le,re,{className:Vr("recharts-cartesian-axis-tick-line",Xc(s,"className"))})))}),J=F.map((V,H)=>{var{entry:re,tick:ie}=V,M=An(An(An(An({textAnchor:T,verticalAnchor:K},Q),{},{stroke:"none",fill:a},se),ie),{},{index:H,payload:re,visibleTicksCount:B.length,tickFormatter:l,padding:d},m);return g.createElement(io,Hl({className:"recharts-cartesian-axis-tick-label",key:"tick-label-".concat(re.value,"-").concat(re.coordinate,"-").concat(re.tickCoord)},fb(A,re,H)),n&&g.createElement(LX,{option:n,tickProps:M,value:"".concat(typeof l=="function"?l(re.value,H):re.value).concat(u||"")}))});return g.createElement("g",{className:"recharts-cartesian-axis-ticks recharts-".concat($,"-ticks")},J.length>0&&g.createElement(sl,{zIndex:ti.label},g.createElement("g",{className:"recharts-cartesian-axis-tick-labels recharts-".concat($,"-tick-labels"),ref:t},J)),Y.length>0&&g.createElement("g",{className:"recharts-cartesian-axis-tick-lines recharts-".concat($,"-tick-lines")},Y))}),UX=g.forwardRef((e,t)=>{var{axisLine:r,width:n,height:s,className:a,hide:l,ticks:u,axisType:d}=e,m=kv(e,CX),[f,p]=g.useState(""),[x,v]=g.useState(""),b=g.useRef(null);g.useImperativeHandle(t,()=>({getCalculatedWidth:()=>{var j;return _X({ticks:b.current,label:(j=e.labelRef)===null||j===void 0?void 0:j.current,labelGapWithTick:5,tickSize:e.tickSize,tickMargin:e.tickMargin})}}));var w=g.useCallback(j=>{if(j){var _=j.getElementsByClassName("recharts-cartesian-axis-tick-value");b.current=_;var E=_[0];if(E){var C=window.getComputedStyle(E),I=C.fontSize,A=C.letterSpacing;(I!==f||A!==x)&&(p(I),v(A))}}},[f,x]);return l||n!=null&&n<=0||s!=null&&s<=0?null:g.createElement(sl,{zIndex:e.zIndex},g.createElement(io,{className:Vr("recharts-cartesian-axis",a)},g.createElement($X,{x:e.x,y:e.y,width:n,height:s,orientation:e.orientation,mirror:e.mirror,axisLine:r,otherSvgProps:Xo(e)}),g.createElement(zX,{ref:w,axisType:d,events:m,fontSize:f,getTicksConfig:e,height:e.height,letterSpacing:x,mirror:e.mirror,orientation:e.orientation,padding:e.padding,stroke:e.stroke,tick:e.tick,tickFormatter:e.tickFormatter,tickLine:e.tickLine,tickMargin:e.tickMargin,tickSize:e.tickSize,tickTextProps:e.tickTextProps,ticks:u,unit:e.unit,width:e.width,x:e.x,y:e.y}),g.createElement(kG,{x:e.x,y:e.y,width:e.width,height:e.height,lowerWidth:e.width,upperWidth:e.width},g.createElement(DG,{label:e.label,labelRef:e.labelRef}),e.children)))}),BX=g.memo(UX,(e,t)=>{var{viewBox:r}=e,n=kv(e,EX),{viewBox:s}=t,a=kv(t,AX);return su(r,s)&&su(n,a)}),_w=g.forwardRef((e,t)=>{var r=Bi(e,DX);return g.createElement(BX,Hl({},r,{ref:t}))});_w.displayName="CartesianAxis";var WX=["dangerouslySetInnerHTML","ticks"],VX=["id"],qX=["domain"],HX=["domain"];function Nv(){return Nv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Nv.apply(null,arguments)}function $m(e,t){if(e==null)return{};var r,n,s=KX(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function KX(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function GX(e){var t=Sn();return g.useLayoutEffect(()=>(t(RY(e)),()=>{t(MY(e))}),[e,t]),null}var YX=e=>{var{xAxisId:t,className:r}=e,n=_t(bb),s=Si(),a="xAxis",l=_t(j=>wu(j,a,t,s)),u=_t(j=>AO(j,a,t,s)),d=_t(j=>NO(j,t)),m=_t(j=>Oq(j,t)),f=_t(j=>K4(j,t));if(d==null||m==null||f==null)return null;var{dangerouslySetInnerHTML:p,ticks:x}=e,v=$m(e,WX),{id:b}=f,w=$m(f,VX);return g.createElement(_w,Nv({},v,w,{scale:l,x:m.x,y:m.y,width:d.width,height:d.height,className:Vr("recharts-".concat(a," ").concat(a),r),viewBox:n,ticks:u,axisType:a}))},JX={allowDataOverflow:di.allowDataOverflow,allowDecimals:di.allowDecimals,allowDuplicatedCategory:di.allowDuplicatedCategory,height:di.height,hide:!1,mirror:di.mirror,orientation:di.orientation,padding:di.padding,reversed:di.reversed,scale:di.scale,tickCount:di.tickCount,type:di.type,xAxisId:0},XX=e=>{var t,r,n,s,a,l=Bi(e,JX);return g.createElement(g.Fragment,null,g.createElement(GX,{interval:(t=l.interval)!==null&&t!==void 0?t:"preserveEnd",id:l.xAxisId,scale:l.scale,type:l.type,padding:l.padding,allowDataOverflow:l.allowDataOverflow,domain:l.domain,dataKey:l.dataKey,allowDuplicatedCategory:l.allowDuplicatedCategory,allowDecimals:l.allowDecimals,tickCount:l.tickCount,includeHidden:(r=l.includeHidden)!==null&&r!==void 0?r:!1,reversed:l.reversed,ticks:l.ticks,height:l.height,orientation:l.orientation,mirror:l.mirror,hide:l.hide,unit:l.unit,name:l.name,angle:(n=l.angle)!==null&&n!==void 0?n:0,minTickGap:(s=l.minTickGap)!==null&&s!==void 0?s:5,tick:(a=l.tick)!==null&&a!==void 0?a:!0,tickFormatter:l.tickFormatter}),g.createElement(YX,l))},QX=(e,t)=>{var{domain:r}=e,n=$m(e,qX),{domain:s}=t,a=$m(t,HX);return su(n,a)?Array.isArray(r)&&r.length===2&&Array.isArray(s)&&s.length===2?r[0]===s[0]&&r[1]===s[1]:su({domain:r},{domain:s}):!1},RI=g.memo(XX,QX);RI.displayName="XAxis";var ZX=["dangerouslySetInnerHTML","ticks"],eQ=["id"],tQ=["domain"],rQ=["domain"];function _v(){return _v=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},_v.apply(null,arguments)}function Rm(e,t){if(e==null)return{};var r,n,s=nQ(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function nQ(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function sQ(e){var t=Sn();return g.useLayoutEffect(()=>(t(FY(e)),()=>{t(LY(e))}),[e,t]),null}var iQ=e=>{var{yAxisId:t,className:r,width:n,label:s}=e,a=g.useRef(null),l=g.useRef(null),u=_t(bb),d=Si(),m=Sn(),f="yAxis",p=_t(A=>wu(A,f,t,d)),x=_t(A=>_O(A,t)),v=_t(A=>Tq(A,t)),b=_t(A=>AO(A,f,t,d)),w=_t(A=>G4(A,t));if(g.useLayoutEffect(()=>{if(!(n!=="auto"||!x||kw(s)||g.isValidElement(s)||w==null)){var A=a.current;if(A){var $=A.getCalculatedWidth();Math.round(x.width)!==Math.round($)&&m(zY({id:t,width:$}))}}},[b,x,m,s,t,n,w]),x==null||v==null||w==null)return null;var{dangerouslySetInnerHTML:j,ticks:_}=e,E=Rm(e,ZX),{id:C}=w,I=Rm(w,eQ);return g.createElement(_w,_v({},E,I,{ref:a,labelRef:l,scale:p,x:v.x,y:v.y,tickTextProps:n==="auto"?{width:void 0}:{width:n},width:x.width,height:x.height,className:Vr("recharts-".concat(f," ").concat(f),r),viewBox:u,ticks:b,axisType:f}))},aQ={allowDataOverflow:fi.allowDataOverflow,allowDecimals:fi.allowDecimals,allowDuplicatedCategory:fi.allowDuplicatedCategory,hide:!1,mirror:fi.mirror,orientation:fi.orientation,padding:fi.padding,reversed:fi.reversed,scale:fi.scale,tickCount:fi.tickCount,type:fi.type,width:fi.width,yAxisId:0},oQ=e=>{var t,r,n,s,a,l=Bi(e,aQ);return g.createElement(g.Fragment,null,g.createElement(sQ,{interval:(t=l.interval)!==null&&t!==void 0?t:"preserveEnd",id:l.yAxisId,scale:l.scale,type:l.type,domain:l.domain,allowDataOverflow:l.allowDataOverflow,dataKey:l.dataKey,allowDuplicatedCategory:l.allowDuplicatedCategory,allowDecimals:l.allowDecimals,tickCount:l.tickCount,padding:l.padding,includeHidden:(r=l.includeHidden)!==null&&r!==void 0?r:!1,reversed:l.reversed,ticks:l.ticks,width:l.width,orientation:l.orientation,mirror:l.mirror,hide:l.hide,unit:l.unit,name:l.name,angle:(n=l.angle)!==null&&n!==void 0?n:0,minTickGap:(s=l.minTickGap)!==null&&s!==void 0?s:5,tick:(a=l.tick)!==null&&a!==void 0?a:!0,tickFormatter:l.tickFormatter}),g.createElement(iQ,l))},lQ=(e,t)=>{var{domain:r}=e,n=Rm(e,tQ),{domain:s}=t,a=Rm(t,rQ);return su(n,a)?Array.isArray(r)&&r.length===2&&Array.isArray(s)&&s.length===2?r[0]===s[0]&&r[1]===s[1]:su({domain:r},{domain:s}):!1},MI=g.memo(oQ,lQ);MI.displayName="YAxis";var tx={exports:{}},rx={};/**
 * @license React
 * use-sync-external-store-with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var bC;function cQ(){if(bC)return rx;bC=1;var e=iu();function t(d,m){return d===m&&(d!==0||1/d===1/m)||d!==d&&m!==m}var r=typeof Object.is=="function"?Object.is:t,n=e.useSyncExternalStore,s=e.useRef,a=e.useEffect,l=e.useMemo,u=e.useDebugValue;return rx.useSyncExternalStoreWithSelector=function(d,m,f,p,x){var v=s(null);if(v.current===null){var b={hasValue:!1,value:null};v.current=b}else b=v.current;v=l(function(){function j(A){if(!_){if(_=!0,E=A,A=p(A),x!==void 0&&b.hasValue){var $=b.value;if(x($,A))return C=$}return C=A}if($=C,r(E,A))return $;var B=p(A);return x!==void 0&&x($,B)?(E=A,$):(E=A,C=B)}var _=!1,E,C,I=f===void 0?null:f;return[function(){return j(m())},I===null?void 0:function(){return j(I())}]},[m,f,p,x]);var w=n(d,v[0],v[1]);return a(function(){b.hasValue=!0,b.value=w},[w]),u(w),w},rx}var wC;function uQ(){return wC||(wC=1,tx.exports=cQ()),tx.exports}uQ();function dQ(e){e()}function fQ(){let e=null,t=null;return{clear(){e=null,t=null},notify(){dQ(()=>{let r=e;for(;r;)r.callback(),r=r.next})},get(){const r=[];let n=e;for(;n;)r.push(n),n=n.next;return r},subscribe(r){let n=!0;const s=t={callback:r,next:null,prev:t};return s.prev?s.prev.next=s:e=s,function(){!n||e===null||(n=!1,s.next?s.next.prev=s.prev:t=s.prev,s.prev?s.prev.next=s.next:e=s.next)}}}}var jC={notify(){},get:()=>[]};function hQ(e,t){let r,n=jC,s=0,a=!1;function l(w){f();const j=n.subscribe(w);let _=!1;return()=>{_||(_=!0,j(),p())}}function u(){n.notify()}function d(){b.onStateChange&&b.onStateChange()}function m(){return a}function f(){s++,r||(r=e.subscribe(d),n=fQ())}function p(){s--,r&&s===0&&(r(),r=void 0,n.clear(),n=jC)}function x(){a||(a=!0,f())}function v(){a&&(a=!1,p())}const b={addNestedSub:l,notifyNestedSubs:u,handleChangeWrapper:d,isSubscribed:m,trySubscribe:x,tryUnsubscribe:v,getListeners:()=>n};return b}var mQ=()=>typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",pQ=mQ(),gQ=()=>typeof navigator<"u"&&navigator.product==="ReactNative",yQ=gQ(),xQ=()=>pQ||yQ?g.useLayoutEffect:g.useEffect,vQ=xQ(),nx=Symbol.for("react-redux-context"),sx=typeof globalThis<"u"?globalThis:{};function bQ(){if(!g.createContext)return{};const e=sx[nx]??(sx[nx]=new Map);let t=e.get(g.createContext);return t||(t=g.createContext(null),e.set(g.createContext,t)),t}var wQ=bQ();function jQ(e){const{children:t,context:r,serverState:n,store:s}=e,a=g.useMemo(()=>{const d=hQ(s);return{store:s,subscription:d,getServerState:n?()=>n:void 0}},[s,n]),l=g.useMemo(()=>s.getState(),[s]);vQ(()=>{const{subscription:d}=a;return d.onStateChange=d.notifyNestedSubs,d.trySubscribe(),l!==s.getState()&&d.notifyNestedSubs(),()=>{d.tryUnsubscribe(),d.onStateChange=void 0}},[a,l]);const u=r||wQ;return g.createElement(u.Provider,{value:a},t)}var SQ=jQ,kQ=(e,t)=>t,Cw=ke([kQ,Nr,q4,Wn,HO,bo,WH,as],JH),Ew=e=>{var t=e.currentTarget.getBoundingClientRect(),r=t.width/e.currentTarget.offsetWidth,n=t.height/e.currentTarget.offsetHeight;return{chartX:Math.round((e.clientX-t.left)/r),chartY:Math.round((e.clientY-t.top)/n)}},FI=Li("mouseClick"),LI=Jd();LI.startListening({actionCreator:FI,effect:(e,t)=>{var r=e.payload,n=Cw(t.getState(),Ew(r));(n==null?void 0:n.activeIndex)!=null&&t.dispatch(Hq({activeIndex:n.activeIndex,activeDataKey:void 0,activeCoordinate:n.activeCoordinate}))}});var Cv=Li("mouseMove"),zI=Jd();zI.startListening({actionCreator:Cv,effect:(e,t)=>{var r=e.payload,n=t.getState(),s=hw(n,n.tooltip.settings.shared),a=Cw(n,Ew(r));s==="axis"&&((a==null?void 0:a.activeIndex)!=null?t.dispatch(MO({activeIndex:a.activeIndex,activeDataKey:void 0,activeCoordinate:a.activeCoordinate})):t.dispatch(RO()))}});var SC={accessibilityLayer:!0,barCategoryGap:"10%",barGap:4,barSize:void 0,className:void 0,maxBarSize:void 0,stackOffset:"none",syncId:void 0,syncMethod:"index",baseValue:void 0},UI=ni({name:"rootProps",initialState:SC,reducers:{updateOptions:(e,t)=>{var r;e.accessibilityLayer=t.payload.accessibilityLayer,e.barCategoryGap=t.payload.barCategoryGap,e.barGap=(r=t.payload.barGap)!==null&&r!==void 0?r:SC.barGap,e.barSize=t.payload.barSize,e.maxBarSize=t.payload.maxBarSize,e.stackOffset=t.payload.stackOffset,e.syncId=t.payload.syncId,e.syncMethod=t.payload.syncMethod,e.className=t.payload.className,e.baseValue=t.payload.baseValue}}}),NQ=UI.reducer,{updateOptions:_Q}=UI.actions,BI=ni({name:"polarOptions",initialState:null,reducers:{updatePolarOptions:(e,t)=>t.payload}}),{updatePolarOptions:Jee}=BI.actions,CQ=BI.reducer,WI=Li("keyDown"),VI=Li("focus"),Aw=Jd();Aw.startListening({actionCreator:WI,effect:(e,t)=>{var r=t.getState(),n=r.rootProps.accessibilityLayer!==!1;if(n){var{keyboardInteraction:s}=r.tooltip,a=e.payload;if(!(a!=="ArrowRight"&&a!=="ArrowLeft"&&a!=="Enter")){var l=Number(mw(s,Su(r))),u=bo(r);if(a==="Enter"){var d=Em(r,"axis","hover",String(s.index));t.dispatch(xv({active:!s.active,activeIndex:s.index,activeDataKey:s.dataKey,activeCoordinate:d}));return}var m=Mq(r),f=m==="left-to-right"?1:-1,p=a==="ArrowRight"?1:-1,x=l+p*f;if(!(u==null||x>=u.length||x<0)){var v=Em(r,"axis","hover",String(x));t.dispatch(xv({active:!0,activeIndex:x.toString(),activeDataKey:void 0,activeCoordinate:v}))}}}}});Aw.startListening({actionCreator:VI,effect:(e,t)=>{var r=t.getState(),n=r.rootProps.accessibilityLayer!==!1;if(n){var{keyboardInteraction:s}=r.tooltip;if(!s.active&&s.index==null){var a="0",l=Em(r,"axis","hover",String(a));t.dispatch(xv({activeDataKey:void 0,active:!0,activeIndex:a,activeCoordinate:l}))}}}});var $i=Li("externalEvent"),qI=Jd();qI.startListening({actionCreator:$i,effect:(e,t)=>{if(e.payload.handler!=null){var r=t.getState(),n={activeCoordinate:EH(r),activeDataKey:JO(r),activeIndex:nu(r),activeLabel:YO(r),activeTooltipIndex:nu(r),isTooltipActive:AH(r)};e.payload.handler(n,e.payload.reactEvent)}}});var EQ=ke([ju],e=>e.tooltipItemPayloads),AQ=ke([EQ,of,(e,t,r)=>t,(e,t,r)=>r],(e,t,r,n)=>{var s=e.find(u=>u.settings.dataKey===n);if(s!=null){var{positions:a}=s;if(a!=null){var l=t(a,r);return l}}}),HI=Li("touchMove"),KI=Jd();KI.startListening({actionCreator:HI,effect:(e,t)=>{var r=e.payload;if(!(r.touches==null||r.touches.length===0)){var n=t.getState(),s=hw(n,n.tooltip.settings.shared);if(s==="axis"){var a=Cw(n,Ew({clientX:r.touches[0].clientX,clientY:r.touches[0].clientY,currentTarget:r.currentTarget}));(a==null?void 0:a.activeIndex)!=null&&t.dispatch(MO({activeIndex:a.activeIndex,activeDataKey:void 0,activeCoordinate:a.activeCoordinate}))}else if(s==="item"){var l,u=r.touches[0];if(document.elementFromPoint==null)return;var d=document.elementFromPoint(u.clientX,u.clientY);if(!d||!d.getAttribute)return;var m=d.getAttribute(zU),f=(l=d.getAttribute(UU))!==null&&l!==void 0?l:void 0,p=AQ(t.getState(),m,f);t.dispatch($O({activeDataKey:f,activeIndex:m,activeCoordinate:p}))}}}});var PQ=ZA({brush:aX,cartesianAxis:UY,chartData:EK,errorBars:tJ,graphicalItems:PY,layout:wU,legend:kB,options:SK,polarAxis:JG,polarOptions:CQ,referenceElements:hX,rootProps:NQ,tooltip:Kq,zIndex:uK}),OQ=function(t){return H8({reducer:PQ,preloadedState:t,middleware:r=>r({serializableCheck:!1}).concat([LI.middleware,zI.middleware,Aw.middleware,qI.middleware,KI.middleware]),enhancers:r=>{var n=r;return typeof r=="function"&&(n=r()),n.concat(dP({type:"raf"}))},devTools:pu.devToolsEnabled})};function IQ(e){var{preloadedState:t,children:r,reduxStoreName:n}=e,s=Si(),a=g.useRef(null);if(s)return r;a.current==null&&(a.current=OQ(t));var l=mb;return g.createElement(SQ,{context:l,store:a.current},r)}function TQ(e){var{layout:t,margin:r}=e,n=Sn(),s=Si();return g.useEffect(()=>{s||(n(xU(t)),n(yU(r)))},[n,s,t,r]),null}function DQ(e){var t=Sn();return g.useEffect(()=>{t(_Q(e))},[t,e]),null}function kC(e){var{zIndex:t,isPanorama:r}=e,n=r?"recharts-zindex-panorama-":"recharts-zindex-",s=kI("".concat(n).concat(t)),a=Sn();return g.useLayoutEffect(()=>(a(lK({zIndex:t,elementId:s,isPanorama:r})),()=>{a(cK({zIndex:t,isPanorama:r}))}),[a,t,s,r]),g.createElement("g",{id:s})}function NC(e){var{children:t,isPanorama:r}=e,n=_t(QH);if(!n||n.length===0)return t;var s=n.filter(l=>l<0),a=n.filter(l=>l>0);return g.createElement(g.Fragment,null,s.map(l=>g.createElement(kC,{key:l,zIndex:l,isPanorama:r})),t,a.map(l=>g.createElement(kC,{key:l,zIndex:l,isPanorama:r})))}var $Q=["children"];function RQ(e,t){if(e==null)return{};var r,n,s=MQ(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function MQ(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function Mm(){return Mm=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Mm.apply(null,arguments)}var FQ={width:"100%",height:"100%",display:"block"},LQ=g.forwardRef((e,t)=>{var r=xB(),n=vB(),s=IP();if(!Qo(r)||!Qo(n))return null;var{children:a,otherAttributes:l,title:u,desc:d}=e,m,f;return l!=null&&(typeof l.tabIndex=="number"?m=l.tabIndex:m=s?0:void 0,typeof l.role=="string"?f=l.role:f=s?"application":void 0),g.createElement(yA,Mm({},l,{title:u,desc:d,role:f,tabIndex:m,width:r,height:n,style:FQ,ref:t}),a)}),zQ=e=>{var{children:t}=e,r=_t(hp);if(!r)return null;var{width:n,height:s,y:a,x:l}=r;return g.createElement(yA,{width:n,height:s,x:l,y:a},t)},_C=g.forwardRef((e,t)=>{var{children:r}=e,n=RQ(e,$Q),s=Si();return s?g.createElement(zQ,null,g.createElement(NC,{isPanorama:!0},r)):g.createElement(LQ,Mm({ref:t},n),g.createElement(NC,{isPanorama:!1},r))});function UQ(){var e=Sn(),[t,r]=g.useState(null),n=_t(LU);return g.useEffect(()=>{if(t!=null){var s=t.getBoundingClientRect(),a=s.width/t.offsetWidth;jn(a)&&a!==n&&e(bU(a))}},[t,e,n]),r}function CC(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function BQ(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?CC(Object(r),!0).forEach(function(n){WQ(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):CC(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function WQ(e,t,r){return(t=VQ(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function VQ(e){var t=qQ(e,"string");return typeof t=="symbol"?t:t+""}function qQ(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Kl(){return Kl=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Kl.apply(null,arguments)}var HQ=()=>(MK(),null);function Fm(e){if(typeof e=="number")return e;if(typeof e=="string"){var t=parseFloat(e);if(!Number.isNaN(t))return t}return 0}var KQ=g.forwardRef((e,t)=>{var r,n,s=g.useRef(null),[a,l]=g.useState({containerWidth:Fm((r=e.style)===null||r===void 0?void 0:r.width),containerHeight:Fm((n=e.style)===null||n===void 0?void 0:n.height)}),u=g.useCallback((m,f)=>{l(p=>{var x=Math.round(m),v=Math.round(f);return p.containerWidth===x&&p.containerHeight===v?p:{containerWidth:x,containerHeight:v}})},[]),d=g.useCallback(m=>{if(typeof t=="function"&&t(m),m!=null&&typeof ResizeObserver<"u"){var{width:f,height:p}=m.getBoundingClientRect();u(f,p);var x=b=>{var{width:w,height:j}=b[0].contentRect;u(w,j)},v=new ResizeObserver(x);v.observe(m),s.current=v}},[t,u]);return g.useEffect(()=>()=>{var m=s.current;m!=null&&m.disconnect()},[u]),g.createElement(g.Fragment,null,g.createElement(gp,{width:a.containerWidth,height:a.containerHeight}),g.createElement("div",Kl({ref:d},e)))}),GQ=g.forwardRef((e,t)=>{var{width:r,height:n}=e,[s,a]=g.useState({containerWidth:Fm(r),containerHeight:Fm(n)}),l=g.useCallback((d,m)=>{a(f=>{var p=Math.round(d),x=Math.round(m);return f.containerWidth===p&&f.containerHeight===x?f:{containerWidth:p,containerHeight:x}})},[]),u=g.useCallback(d=>{if(typeof t=="function"&&t(d),d!=null){var{width:m,height:f}=d.getBoundingClientRect();l(m,f)}},[t,l]);return g.createElement(g.Fragment,null,g.createElement(gp,{width:s.containerWidth,height:s.containerHeight}),g.createElement("div",Kl({ref:u},e)))}),YQ=g.forwardRef((e,t)=>{var{width:r,height:n}=e;return g.createElement(g.Fragment,null,g.createElement(gp,{width:r,height:n}),g.createElement("div",Kl({ref:t},e)))}),JQ=g.forwardRef((e,t)=>{var{width:r,height:n}=e;return ao(r)||ao(n)?g.createElement(GQ,Kl({},e,{ref:t})):g.createElement(YQ,Kl({},e,{ref:t}))});function XQ(e){return e===!0?KQ:JQ}var QQ=g.forwardRef((e,t)=>{var{children:r,className:n,height:s,onClick:a,onContextMenu:l,onDoubleClick:u,onMouseDown:d,onMouseEnter:m,onMouseLeave:f,onMouseMove:p,onMouseUp:x,onTouchEnd:v,onTouchMove:b,onTouchStart:w,style:j,width:_,responsive:E,dispatchTouchEvents:C=!0}=e,I=g.useRef(null),A=Sn(),[$,B]=g.useState(null),[T,K]=g.useState(null),Q=UQ(),se=wb(),G=(se==null?void 0:se.width)>0?se.width:_,le=(se==null?void 0:se.height)>0?se.height:s,F=g.useCallback(z=>{Q(z),typeof t=="function"&&t(z),B(z),K(z),z!=null&&(I.current=z)},[Q,t,B,K]),Y=g.useCallback(z=>{A(FI(z)),A($i({handler:a,reactEvent:z}))},[A,a]),J=g.useCallback(z=>{A(Cv(z)),A($i({handler:m,reactEvent:z}))},[A,m]),V=g.useCallback(z=>{A(RO()),A($i({handler:f,reactEvent:z}))},[A,f]),H=g.useCallback(z=>{A(Cv(z)),A($i({handler:p,reactEvent:z}))},[A,p]),re=g.useCallback(()=>{A(VI())},[A]),ie=g.useCallback(z=>{A(WI(z.key))},[A]),M=g.useCallback(z=>{A($i({handler:l,reactEvent:z}))},[A,l]),Z=g.useCallback(z=>{A($i({handler:u,reactEvent:z}))},[A,u]),fe=g.useCallback(z=>{A($i({handler:d,reactEvent:z}))},[A,d]),ye=g.useCallback(z=>{A($i({handler:x,reactEvent:z}))},[A,x]),Le=g.useCallback(z=>{A($i({handler:w,reactEvent:z}))},[A,w]),je=g.useCallback(z=>{C&&A(HI(z)),A($i({handler:b,reactEvent:z}))},[A,C,b]),Me=g.useCallback(z=>{A($i({handler:v,reactEvent:z}))},[A,v]),Se=XQ(E);return g.createElement(sI.Provider,{value:$},g.createElement(AL.Provider,{value:T},g.createElement(Se,{width:G??(j==null?void 0:j.width),height:le??(j==null?void 0:j.height),className:Vr("recharts-wrapper",n),style:BQ({position:"relative",cursor:"default",width:G,height:le},j),onClick:Y,onContextMenu:M,onDoubleClick:Z,onFocus:re,onKeyDown:ie,onMouseDown:fe,onMouseEnter:J,onMouseLeave:V,onMouseMove:H,onMouseUp:ye,onTouchEnd:Me,onTouchMove:je,onTouchStart:Le,ref:F},g.createElement(HQ,null),r)))}),ZQ=["width","height","responsive","children","className","style","compact","title","desc"];function eZ(e,t){if(e==null)return{};var r,n,s=tZ(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function tZ(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var rZ=g.forwardRef((e,t)=>{var{width:r,height:n,responsive:s,children:a,className:l,style:u,compact:d,title:m,desc:f}=e,p=eZ(e,ZQ),x=Xo(p);return d?g.createElement(g.Fragment,null,g.createElement(gp,{width:r,height:n}),g.createElement(_C,{otherAttributes:x,title:m,desc:f},a)):g.createElement(QQ,{className:l,style:u,width:r,height:n,responsive:s??!1,onClick:e.onClick,onMouseLeave:e.onMouseLeave,onMouseEnter:e.onMouseEnter,onMouseMove:e.onMouseMove,onMouseDown:e.onMouseDown,onMouseUp:e.onMouseUp,onContextMenu:e.onContextMenu,onDoubleClick:e.onDoubleClick,onTouchStart:e.onTouchStart,onTouchMove:e.onTouchMove,onTouchEnd:e.onTouchEnd},g.createElement(_C,{otherAttributes:x,title:m,desc:f,ref:t},g.createElement(pX,null,a)))});function Ev(){return Ev=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Ev.apply(null,arguments)}var nZ={top:5,right:5,bottom:5,left:5},sZ={accessibilityLayer:!0,layout:"horizontal",stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:nZ,reverseStackOrder:!1,syncMethod:"index",responsive:!1},iZ=g.forwardRef(function(t,r){var n,s=Bi(t.categoricalChartProps,sZ),{chartName:a,defaultTooltipEventType:l,validateTooltipEventTypes:u,tooltipPayloadSearcher:d,categoricalChartProps:m}=t,f={chartName:a,defaultTooltipEventType:l,validateTooltipEventTypes:u,tooltipPayloadSearcher:d,eventEmitter:void 0};return g.createElement(IQ,{preloadedState:{options:f},reduxStoreName:(n=m.id)!==null&&n!==void 0?n:a},g.createElement(iX,{chartData:m.data}),g.createElement(TQ,{layout:s.layout,margin:s.margin}),g.createElement(DQ,{baseValue:s.baseValue,accessibilityLayer:s.accessibilityLayer,barCategoryGap:s.barCategoryGap,maxBarSize:s.maxBarSize,stackOffset:s.stackOffset,barGap:s.barGap,barSize:s.barSize,syncId:s.syncId,syncMethod:s.syncMethod,className:s.className}),g.createElement(rZ,Ev({},s,{ref:r})))}),aZ=["axis","item"],oZ=g.forwardRef((e,t)=>g.createElement(iZ,{chartName:"BarChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:aZ,tooltipPayloadSearcher:wK,categoricalChartProps:e,ref:t}));const $a="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='UTF-8'?%3e%3csvg%20id='icons'%20xmlns='http://www.w3.org/2000/svg'%20version='1.1'%20viewBox='0%200%20288%20288'%3e%3c!--%20Generator:%20Adobe%20Illustrator%2029.8.3,%20SVG%20Export%20Plug-In%20.%20SVG%20Version:%202.1.1%20Build%203)%20--%3e%3cdefs%3e%3cstyle%3e%20.st0%20{%20fill:%20%23c89211;%20}%20.st1%20{%20fill:%20%232e4760;%20}%20%3c/style%3e%3c/defs%3e%3crect%20class='st1'%20x='-.18'%20y='.13'%20width='288'%20height='287.75'%20rx='29.77'%20ry='29.77'/%3e%3cg%3e%3cpath%20class='st0'%20d='M255.27,97.14c-1.15-2.2-2.46-4.34-3.89-6.42-9.61-13.92-24.44-23.22-38.72-24.23-9.72-.86-15.97,1.42-30.41,10.99l-69.64,46.23-.72.49-27.78,32.23.56.79,5.22,7.56.54.8.73-.5,67.68-44.93c13.39-8.89,18.9-11.26,25.65-11.06,10.45.25,23.48,8.33,31.01,19.24,1.09,1.57,2.08,3.22,2.96,4.92,3.7,7.05,5.56,14.86,5.4,21.79l-61.49,40.82-.72.48-27.77,32.24.56.78,5.22,7.56.54.8.73-.48,69.63-46.23c7.75-5.15,12.63-8.93,15.92-12.75l27.76-32.24c-.11.12-.25.25-.35.37,3.04-3.42,4.8-6.83,6.16-11.25,3.68-11.38,1.81-25.42-4.79-38.01Z'/%3e%3cpath%20class='st0'%20d='M32.37,187.15c1.15,2.2,2.45,4.34,3.89,6.43,9.61,13.92,24.45,23.21,38.71,24.23,9.72.87,15.97-1.42,30.41-11l69.63-46.23.73-.49,27.77-32.24-.57-.78-5.22-7.57-.53-.8-.73.5-67.68,44.93c-13.39,8.89-18.9,11.26-25.65,11.06-10.44-.24-23.48-8.33-31-19.23-1.08-1.58-2.08-3.22-2.96-4.92-3.71-7.05-5.57-14.86-5.41-21.79l61.49-40.82.72-.48,27.77-32.24-.56-.79-5.21-7.56-.54-.79-.74.48-69.62,46.23c-7.75,5.14-12.63,8.93-15.92,12.75l-27.76,32.24c.11-.12.26-.25.36-.37-3.04,3.42-4.81,6.83-6.16,11.25-3.68,11.37-1.82,25.42,4.79,38Z'/%3e%3c/g%3e%3c/svg%3e",GI=["Bug","Change Request","Data Correction","Epic","Feature","Group","Issue","Other","Spike","Task","Test Case","User Story"];function lZ(){const e=window.location.origin,t=window.location.pathname,r=t.includes("/admin")?t.substring(0,t.indexOf("/admin")):t.includes("/voter")?t.substring(0,t.indexOf("/voter")):t;return`${e}${r}/admin`}const vi={clientId:"a6283b6c-2210-4d6c-bade-651acfdb6703",tenantId:"3bb4e039-9a0f-4671-9733-a9ae03d39395",get redirectUri(){return lZ()},scopes:["https://app.vssps.visualstudio.com/user_impersonation","offline_access"]};function cZ(){const e=new Uint8Array(32);return crypto.getRandomValues(e),YI(e)}async function uZ(e){const r=new TextEncoder().encode(e),n=await crypto.subtle.digest("SHA-256",r);return YI(new Uint8Array(n))}function YI(e){return btoa(String.fromCharCode(...e)).replace(/\+/g,"-").replace(/\//g,"_").replace(/=/g,"")}async function dZ(e){const t=cZ(),r=await uZ(t);sessionStorage.setItem("pkce_verifier",t);const n=new URLSearchParams({client_id:vi.clientId,response_type:"code",redirect_uri:vi.redirectUri,response_mode:"query",scope:vi.scopes.join(" "),state:e,code_challenge:r,code_challenge_method:"S256"});return`https://login.microsoftonline.com/${vi.tenantId}/oauth2/v2.0/authorize?${n}`}async function fZ(e){const t=`https://login.microsoftonline.com/${vi.tenantId}/oauth2/v2.0/token`,r=sessionStorage.getItem("pkce_verifier");if(!r)throw new Error("Code verifier not found - PKCE flow incomplete");const n=new URLSearchParams({client_id:vi.clientId,scope:vi.scopes.join(" "),code:e,redirect_uri:vi.redirectUri,grant_type:"authorization_code",code_verifier:r}),s=await fetch(t,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:n.toString()});if(!s.ok){const l=await s.json();throw console.error("Token exchange error:",l),new Error(`Failed to exchange code for tokens: ${l.error_description||l.error}`)}const a=await s.json();return sessionStorage.removeItem("pkce_verifier"),{accessToken:a.access_token,refreshToken:a.refresh_token,expiresIn:a.expires_in}}async function hZ(e){const t=`https://login.microsoftonline.com/${vi.tenantId}/oauth2/v2.0/token`,r=new URLSearchParams({client_id:vi.clientId,scope:vi.scopes.join(" "),refresh_token:e,grant_type:"refresh_token"}),n=await fetch(t,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:r.toString()});if(!n.ok){const a=await n.json();throw console.error("Token refresh error:",a),new Error(`Failed to refresh access token: ${a.error_description||a.error}`)}const s=await n.json();return{accessToken:s.access_token,expiresIn:s.expires_in}}async function JI(e,t){if(!e.accessToken||!e.organization||!e.project)throw new Error("Missing required configuration");const r=t||e.workItemType;if(!r)throw new Error("Missing work item type for state fetch");const n=encodeURIComponent(r),s=`https://dev.azure.com/${e.organization}/${e.project}/_apis/wit/workitemtypes/${n}?api-version=7.1`,a=await fetch(s,{headers:{Authorization:`Bearer ${e.accessToken}`,"Content-Type":"application/json"}});if(!a.ok)throw new Error(`Failed to fetch states: ${a.statusText}`);const l=await a.json();return l.states&&Array.isArray(l.states)?l.states.map(u=>u.name):[]}async function EC(e){const t=new Set;for(const r of GI)try{(await JI({...e,workItemType:r},r)).forEach(s=>{s&&t.add(s)})}catch(n){console.warn(`Failed to fetch states for type ${r}:`,n)}return Array.from(t).sort((r,n)=>r.localeCompare(n))}async function Av(e){if(!e.accessToken||!e.organization||!e.project)throw new Error("Missing required configuration");const t=`https://dev.azure.com/${e.organization}/${e.project}/_apis/wit/classificationnodes/areas?$depth=10&api-version=7.1`,r=await fetch(t,{headers:{Authorization:`Bearer ${e.accessToken}`,"Content-Type":"application/json"}});if(!r.ok)throw new Error(`Failed to fetch area paths: ${r.statusText}`);const n=await r.json(),s=(a,l="")=>{const u=l?`${l}\\${a.name}`:a.name;let d=[u];return a.children&&a.children.length>0&&a.children.forEach(m=>{d=d.concat(s(m,u))}),d};return s(n)}async function mZ(e,t,r=[]){var n;if(!e.accessToken||!e.organization||!e.project)throw new Error("Missing required configuration");if(!t)return Av(e);try{const s=[`[System.WorkItemType] = '${t}'`];if(r&&r.length>0)if(r.length===1)s.push(`[System.State] = '${r[0]}'`);else{const w=r.map(j=>`'${j}'`).join(", ");s.push(`[System.State] IN (${w})`)}const a=`SELECT [System.Id] FROM WorkItems WHERE ${s.join(" AND ")} ORDER BY [System.ChangedDate] DESC`,l=`https://dev.azure.com/${e.organization}/${e.project}/_apis/wit/wiql?api-version=7.1`,u=await fetch(l,{method:"POST",headers:{Authorization:`Bearer ${e.accessToken}`,"Content-Type":"application/json"},body:JSON.stringify({query:a})});if(!u.ok)return console.warn("Failed to fetch area paths by type/state, returning empty list"),[];const d=await u.json();if(!d.workItems||d.workItems.length===0)return[];const m=d.workItems.map(w=>w.id).slice(0,200);if(m.length===0)return[];const f=`https://dev.azure.com/${e.organization}/${e.project}/_apis/wit/workitems?ids=${m.join(",")}&fields=System.AreaPath,System.TeamProject&api-version=7.1`,p=await fetch(f,{headers:{Authorization:`Bearer ${e.accessToken}`,"Content-Type":"application/json"}});if(!p.ok)return console.warn("Failed to fetch work item area paths for filtered request"),[];const x=await p.json(),v=new Set,b=((n=e.project)==null?void 0:n.toLowerCase())||"";return x.value&&Array.isArray(x.value)&&x.value.forEach(w=>{var E,C,I;if((((C=(E=w.fields)==null?void 0:E["System.TeamProject"])==null?void 0:C.toLowerCase())||"")!==b)return;const _=(I=w.fields)==null?void 0:I["System.AreaPath"];_&&v.add(_)}),Array.from(v).sort()}catch(s){return console.error("Error fetching area paths for type/state:",s),[]}}async function pZ(e,t){var r;if(!e.accessToken||!e.organization||!e.project)throw new Error("Missing required configuration");if(!t||t.length===0)return{types:[],areaPaths:[],tags:[]};try{const s=`SELECT [System.Id], [System.WorkItemType], [System.AreaPath] FROM WorkItems WHERE ${t.length===1?`[System.State] = '${t[0]}'`:`[System.State] IN (${t.map(j=>`'${j}'`).join(", ")})`} ORDER BY [System.ChangedDate] DESC`,a=`https://dev.azure.com/${e.organization}/${e.project}/_apis/wit/wiql?api-version=7.1`,l=await fetch(a,{method:"POST",headers:{Authorization:`Bearer ${e.accessToken}`,"Content-Type":"application/json"},body:JSON.stringify({query:s})});if(!l.ok)throw new Error(`Failed to fetch work items by state: ${l.statusText}`);const u=await l.json();if(!u.workItems||u.workItems.length===0)return{types:[],areaPaths:[],tags:[]};const d=u.workItems.map(j=>j.id).slice(0,200);if(d.length===0)return{types:[],areaPaths:[],tags:[]};const m=`https://dev.azure.com/${e.organization}/${e.project}/_apis/wit/workitems?ids=${d.join(",")}&fields=System.WorkItemType,System.AreaPath,System.Tags,System.TeamProject&api-version=7.1`,f=await fetch(m,{headers:{Authorization:`Bearer ${e.accessToken}`,"Content-Type":"application/json"}});if(!f.ok)return console.warn("Failed to fetch work item details for states filter"),{types:[],areaPaths:[],tags:[]};const p=await f.json(),x=new Set,v=new Set,b=new Set,w=((r=e.project)==null?void 0:r.toLowerCase())||"";return p.value&&Array.isArray(p.value)&&p.value.forEach(j=>{var A,$,B,T,K;if(((($=(A=j.fields)==null?void 0:A["System.TeamProject"])==null?void 0:$.toLowerCase())||"")!==w)return;const E=(B=j.fields)==null?void 0:B["System.WorkItemType"],C=(T=j.fields)==null?void 0:T["System.AreaPath"],I=(K=j.fields)==null?void 0:K["System.Tags"];E&&x.add(E),C&&v.add(C),I&&I.split(";").map(Q=>Q.trim()).forEach(Q=>{Q&&b.add(Q)})}),{types:Array.from(x).sort((j,_)=>j.localeCompare(_)),areaPaths:Array.from(v).sort((j,_)=>j.localeCompare(_)),tags:Array.from(b).sort((j,_)=>j.localeCompare(_))}}catch(n){return console.error("Error fetching types and area paths for states:",n),{types:[],areaPaths:[],tags:[]}}}async function gZ(e){if(!e.accessToken||!e.organization)throw new Error("Missing required configuration");const t=`https://dev.azure.com/${e.organization}/_apis/projects?stateFilter=All&api-version=7.1`,r=await fetch(t,{headers:{Authorization:`Bearer ${e.accessToken}`,"Content-Type":"application/json"}});if(!r.ok)throw new Error(`Failed to fetch projects: ${r.statusText}`);const n=await r.json();return!(n!=null&&n.value)||!Array.isArray(n.value)?[]:n.value.map(s=>s==null?void 0:s.name).filter(s=>typeof s=="string"&&s.trim().length>0).map(s=>s.trim()).sort((s,a)=>s.localeCompare(a))}async function yZ(e,t){var r;if(!e.accessToken||!e.organization||!e.project)throw new Error("Missing required configuration");try{const s=`SELECT [System.Id], [System.WorkItemType], [System.State] FROM WorkItems WHERE (${t.map(w=>`[System.AreaPath] UNDER '${w}'`).join(" OR ")}) ORDER BY [System.ChangedDate] DESC`,a=`https://dev.azure.com/${e.organization}/${e.project}/_apis/wit/wiql?api-version=7.1`,l=await fetch(a,{method:"POST",headers:{Authorization:`Bearer ${e.accessToken}`,"Content-Type":"application/json"},body:JSON.stringify({query:s})});if(!l.ok)throw new Error(`Failed to fetch work items: ${l.statusText}`);const u=await l.json();if(!u.workItems||u.workItems.length===0)return{types:[],states:[]};const d=u.workItems.map(w=>w.id).slice(0,200),m=`https://dev.azure.com/${e.organization}/${e.project}/_apis/wit/workitems?ids=${d.join(",")}&fields=System.WorkItemType,System.State,System.TeamProject&api-version=7.1`,f=await fetch(m,{headers:{Authorization:`Bearer ${e.accessToken}`,"Content-Type":"application/json"}});if(!f.ok)return console.warn("Failed to fetch work item details"),{types:[],states:[]};const p=await f.json(),x=new Set,v=new Set,b=((r=e.project)==null?void 0:r.toLowerCase())||"";return p.value&&Array.isArray(p.value)&&p.value.forEach(w=>{var j;if(w.fields){if((((j=w.fields["System.TeamProject"])==null?void 0:j.toLowerCase())||"")!==b)return;w.fields["System.WorkItemType"]&&x.add(w.fields["System.WorkItemType"]),w.fields["System.State"]&&v.add(w.fields["System.State"])}}),{types:Array.from(x).sort(),states:Array.from(v).sort()}}catch(n){return console.error("Error fetching types and states for area path:",n),{types:[],states:[]}}}async function xZ(e,t){var r;if(!e.accessToken||!e.organization||!e.project)throw new Error("Missing required configuration");try{const s=`SELECT [System.Id], [System.WorkItemType], [System.State] FROM WorkItems WHERE (${t.map(j=>`[System.Tags] CONTAINS '${j}'`).join(" OR ")}) ORDER BY [System.ChangedDate] DESC`,a=`https://dev.azure.com/${e.organization}/${e.project}/_apis/wit/wiql?api-version=7.1`,l=await fetch(a,{method:"POST",headers:{Authorization:`Bearer ${e.accessToken}`,"Content-Type":"application/json"},body:JSON.stringify({query:s})});if(!l.ok)throw new Error(`Failed to fetch work items: ${l.statusText}`);const u=await l.json();if(!u.workItems||u.workItems.length===0)return{types:[],states:[],areaPaths:[]};const d=u.workItems.map(j=>j.id).slice(0,200),m=`https://dev.azure.com/${e.organization}/${e.project}/_apis/wit/workitems?ids=${d.join(",")}&fields=System.WorkItemType,System.State,System.AreaPath,System.TeamProject&api-version=7.1`,f=await fetch(m,{headers:{Authorization:`Bearer ${e.accessToken}`,"Content-Type":"application/json"}});if(!f.ok)return console.warn("Failed to fetch work item details"),{types:[],states:[],areaPaths:[]};const p=await f.json(),x=new Set,v=new Set,b=new Set,w=((r=e.project)==null?void 0:r.toLowerCase())||"";return p.value&&Array.isArray(p.value)&&p.value.forEach(j=>{var _;if(j.fields){if((((_=j.fields["System.TeamProject"])==null?void 0:_.toLowerCase())||"")!==w)return;j.fields["System.WorkItemType"]&&x.add(j.fields["System.WorkItemType"]),j.fields["System.State"]&&v.add(j.fields["System.State"]),j.fields["System.AreaPath"]&&b.add(j.fields["System.AreaPath"])}}),{types:Array.from(x).sort(),states:Array.from(v).sort(),areaPaths:Array.from(b).sort()}}catch(n){return console.error("Error fetching types and states for tags:",n),{types:[],states:[],areaPaths:[]}}}async function vZ(e,t,r,n){if(!e.accessToken||!e.organization||!e.project)throw new Error("Missing required configuration");try{const s=[];if(s.push(`[System.WorkItemType] = '${t}'`),r&&r.length>0)if(r.length===1)s.push(`[System.State] = '${r[0]}'`);else{const b=r.map(w=>`'${w}'`).join(", ");s.push(`[System.State] IN (${b})`)}if(n&&n.length>0)if(n.length===1)s.push(`[System.AreaPath] UNDER '${n[0]}'`);else{const b=n.map(w=>`[System.AreaPath] UNDER '${w}'`);s.push(`(${b.join(" OR ")})`)}const a=`SELECT [System.Id] FROM WorkItems WHERE ${s.join(" AND ")} ORDER BY [System.ChangedDate] DESC`,l=`https://dev.azure.com/${e.organization}/${e.project}/_apis/wit/wiql?api-version=7.1`,u=await fetch(l,{method:"POST",headers:{Authorization:`Bearer ${e.accessToken}`,"Content-Type":"application/json"},body:JSON.stringify({query:a})});if(!u.ok)return console.warn("Failed to fetch tags, returning empty array"),[];const d=await u.json();if(!d.workItems||d.workItems.length===0)return[];const m=d.workItems.map(b=>b.id).slice(0,200),f=`https://dev.azure.com/${e.organization}/${e.project}/_apis/wit/workitems?ids=${m.join(",")}&fields=System.Tags&api-version=7.1`,p=await fetch(f,{headers:{Authorization:`Bearer ${e.accessToken}`,"Content-Type":"application/json"}});if(!p.ok)return console.warn("Failed to fetch work item details for tags"),[];const x=await p.json(),v=new Set;return x.value&&Array.isArray(x.value)&&x.value.forEach(b=>{b.fields&&b.fields["System.Tags"]&&b.fields["System.Tags"].split(";").map(j=>j.trim()).forEach(j=>{j&&v.add(j)})}),Array.from(v).sort()}catch(s){return console.warn("Error fetching tags, returning empty array:",s),[]}}async function AC(e){if(!e.accessToken||!e.organization||!e.project)throw new Error("Missing required configuration");const t=new Set;try{const r=[];let n=null;do{let s=`https://dev.azure.com/${e.organization}/${e.project}/_apis/wit/tags?api-version=7.1`;n&&(s+=`&continuationToken=${encodeURIComponent(n)}`);const a=await fetch(s,{headers:{Authorization:`Bearer ${e.accessToken}`,"Content-Type":"application/json"}});if(!a.ok){console.warn("Failed to fetch tags page, aborting remaining pages");break}const l=await a.json();l.value&&Array.isArray(l.value)&&l.value.forEach(u=>{u&&u.name&&r.push(u.name)}),n=a.headers.get("x-ms-continuationtoken")}while(n);r.forEach(s=>t.add(s))}catch(r){console.warn("Error fetching tags, returning empty array:",r)}try{(await bZ(e)).forEach(n=>t.add(n))}catch(r){console.warn("Error fetching tags via WIQL fallback:",r)}return Array.from(t).sort((r,n)=>r.localeCompare(n))}async function bZ(e){const t={query:"SELECT [System.Id] FROM WorkItems WHERE [System.TeamProject] = @project ORDER BY [System.ChangedDate] DESC"},r=`https://dev.azure.com/${e.organization}/${e.project}/_apis/wit/wiql?api-version=7.1`,n=await fetch(r,{method:"POST",headers:{Authorization:`Bearer ${e.accessToken}`,"Content-Type":"application/json"},body:JSON.stringify(t)});if(!n.ok)throw new Error(`Failed to fetch tags via WIQL: ${n.status}`);const s=await n.json();if(!s.workItems||s.workItems.length===0)return[];const a=s.workItems.map(f=>f.id).slice(0,200);if(a.length===0)return[];const l=`https://dev.azure.com/${e.organization}/${e.project}/_apis/wit/workitems?ids=${a.join(",")}&fields=System.Tags&api-version=7.1`,u=await fetch(l,{headers:{Authorization:`Bearer ${e.accessToken}`,"Content-Type":"application/json"}});if(!u.ok)throw new Error(`Failed to fetch work item details for tags via WIQL fallback: ${u.status}`);const d=await u.json(),m=new Set;return d.value&&Array.isArray(d.value)&&d.value.forEach(f=>{f.fields&&f.fields["System.Tags"]&&f.fields["System.Tags"].split(";").map(x=>x.trim()).forEach(x=>{x&&m.add(x)})}),Array.from(m)}function wZ(e){const t=new Date(e).getTime(),r=Date.now(),n=300*1e3;return t-r<n}async function jZ(){const e=new URLSearchParams(window.location.search),t=e.get("code"),r=e.get("state");if(!t)return null;const n=sessionStorage.getItem("oauth_state");if(r!==n)throw new Error("State mismatch - possible CSRF attack");const s=await fZ(t);return sessionStorage.removeItem("oauth_state"),s}async function SZ(){const e=Math.random().toString(36).substring(7);sessionStorage.setItem("oauth_state",e);const t=sessionStorage.getItem("currentSession");t&&sessionStorage.setItem("oauth_session_backup",t);const r=await dZ(e);window.location.href=r}async function PC(e){const{organization:t,project:r,workItemType:n,query:s,accessToken:a}=e;if(!a)throw new Error("Not authenticated with Azure DevOps");try{let l;s?l=`SELECT [System.Id] FROM WorkItems WHERE ${s}`:l=`SELECT [System.Id] FROM WorkItems WHERE [System.WorkItemType] = '${n}' AND [System.State] = 'Active'`;const u=`https://dev.azure.com/${t}/${r}/_apis/wit/wiql?api-version=7.0`,d=await fetch(u,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${a}`},body:JSON.stringify({query:l})});if(!d.ok)throw new Error(`Azure DevOps query failed: ${d.status} ${d.statusText}`);const f=(await d.json()).workItems.map(T=>T.id);if(f.length===0)return[];const p=["System.Id","System.Title","System.Description","System.Tags","System.WorkItemType","System.State","Microsoft.VSTS.Common.Priority","System.AreaPath","System.IterationPath"].join(","),x=200,v=[];for(let T=0;T<f.length;T+=x){const Q=f.slice(T,T+x).join(","),se=`https://dev.azure.com/${t}/${r}/_apis/wit/workitems?ids=${Q}&fields=${p}&api-version=7.0`,G=await fetch(se,{headers:{Authorization:`Bearer ${a}`}});if(!G.ok)throw new Error(`Failed to fetch work items: ${G.status} ${G.statusText}`);const le=await G.json();le.value&&Array.isArray(le.value)&&v.push(...le.value)}if(v.length===0)return[];const b=new Map,w=new Map,j=new Map,_=new Map,E=10;for(let T=0;T<v.length;T+=E){const K=v.slice(T,T+E);await Promise.all(K.map(async Q=>{try{const se=`https://dev.azure.com/${t}/${r}/_apis/wit/workitems/${Q.id}?$expand=relations&api-version=7.0`,G=await fetch(se,{headers:{Authorization:`Bearer ${a}`}});if(G.ok){const le=await G.json(),F=Q.fields["System.WorkItemType"]||"",Y=F&&F.toLowerCase()==="epic";if(le.relations){for(const J of le.relations)if(J.rel==="System.LinkTypes.Hierarchy-Forward"){const V=J.url.match(/\/work[iI]tems\/(\d+)(?:\?|$|\/)/i);if(V){const H=parseInt(V[1],10);Y?b.has(H)||(b.set(H,Q.id),console.log(`[Epic Detection] Epic ${Q.id} "${Q.fields["System.Title"]}" has child ${H}, storing as parent of ${H}`)):b.has(Q.id)?console.log(`[Epic Detection] Work item ${Q.id} already has parent ${b.get(Q.id)}, ignoring additional parent ${H}`):(b.set(Q.id,H),console.log(`[Epic Detection] Work item ${Q.id} "${Q.fields["System.Title"]}" (type: ${F}) has parent ${H}`))}}else if(J.rel==="System.LinkTypes.Hierarchy-Reverse"){const V=J.url.match(/\/work[iI]tems\/(\d+)(?:\?|$|\/)/i);if(V){const H=parseInt(V[1],10);b.has(H)||(b.set(H,Q.id),console.log(`[Epic Detection] Work item ${Q.id} "${Q.fields["System.Title"]}" (type: ${F}) has child ${H}, storing as parent of ${H}`))}}}}}catch(se){console.error(`Error fetching relations for work item ${Q.id}:`,se)}}))}const C=Array.from(new Set(b.values()));if(C.length>0)for(let K=0;K<C.length;K+=200){const se=C.slice(K,K+200).join(","),G=["System.Id","System.Title","System.WorkItemType"].join(","),le=`https://dev.azure.com/${t}/${r}/_apis/wit/workitems?ids=${se}&fields=${G}&api-version=7.0`;try{const F=await fetch(le,{headers:{Authorization:`Bearer ${a}`}});if(F.ok){const Y=await F.json(),J=[];for(const V of Y.value){const H=V.fields["System.Title"]||"",re=V.fields["System.WorkItemType"]||"";j.set(V.id,H),_.set(V.id,re),console.log(`[Epic Detection] Fetched parent ${V.id}: type="${re}", title="${H}"`),re&&re.toLowerCase()==="epic"?(w.set(V.id,H),console.log(`[Epic Detection]  Found Epic ${V.id}: "${H}"`)):(console.log(`[Epic Detection] Parent ${V.id} is type "${re}", not an Epic - will check for grandparent`),J.push(V.id))}J.length>0&&await Promise.all(J.map(async V=>{try{const H=`https://dev.azure.com/${t}/${r}/_apis/wit/workitems/${V}?$expand=relations&api-version=7.0`,re=await fetch(H,{headers:{Authorization:`Bearer ${a}`}});if(re.ok){const ie=await re.json();if(ie.relations){for(const M of ie.relations)if(M.rel==="System.LinkTypes.Hierarchy-Forward"){const Z=M.url.match(/\/work[iI]tems\/(\d+)(?:\?|$|\/)/i);if(Z){const fe=parseInt(Z[1],10);b.has(V)||(b.set(V,fe),console.log(`[Epic Detection] Parent ${V} has grandparent ${fe}`))}}}}}catch(H){console.error(`Error fetching relations for parent ${V}:`,H)}}))}}catch(F){console.error("Error fetching parent work items:",F)}}let I=Array.from(new Set(b.values())).filter(T=>!j.has(T)),A=new Set,$=5,B=0;for(j.forEach((T,K)=>A.add(K));I.length>0&&B<$;){B++,console.log(`[Epic Detection] Fetching ancestor level ${B}, ${I.length} ancestors to fetch`);const T=200;for(let K=0;K<I.length;K+=T){const se=I.slice(K,K+T).join(","),G=["System.Id","System.Title","System.WorkItemType"].join(","),le=`https://dev.azure.com/${t}/${r}/_apis/wit/workitems?ids=${se}&fields=${G}&api-version=7.0`;try{const F=await fetch(le,{headers:{Authorization:`Bearer ${a}`}});if(F.ok){const Y=await F.json(),J=[];for(const V of Y.value){if(A.has(V.id))continue;A.add(V.id);const H=V.fields["System.Title"]||"",re=V.fields["System.WorkItemType"]||"";j.set(V.id,H),_.set(V.id,re),console.log(`[Epic Detection] Fetched ancestor ${V.id}: type="${re}", title="${H}"`),re&&re.toLowerCase()==="epic"?(w.set(V.id,H),console.log(`[Epic Detection]  Found Epic ancestor ${V.id}: "${H}"`)):console.log(`[Epic Detection] Ancestor ${V.id} is type "${re}", checking for its parent...`)}await Promise.all(Y.value.map(async V=>{if(A.has(V.id))return;const H=V.fields["System.WorkItemType"]||"";if(H&&H.toLowerCase()!=="epic")try{const re=`https://dev.azure.com/${t}/${r}/_apis/wit/workitems/${V.id}?$expand=relations&api-version=7.0`,ie=await fetch(re,{headers:{Authorization:`Bearer ${a}`}});if(ie.ok){const M=await ie.json();if(M.relations){for(const Z of M.relations)if(Z.rel==="System.LinkTypes.Hierarchy-Forward"){const fe=Z.url.match(/\/work[iI]tems\/(\d+)(?:\?|$|\/)/i);if(fe){const ye=parseInt(fe[1],10);A.has(ye)||(b.set(V.id,ye),J.push(ye),console.log(`[Epic Detection] Ancestor ${V.id} has parent ${ye}`))}}}}}catch(re){console.error(`Error fetching relations for ancestor ${V.id}:`,re)}})),I=J}}catch(F){console.error("Error fetching ancestor work items:",F)}}}return v.map(T=>{let K=null,Q=null;const se=T.fields["System.WorkItemType"]||"",G=se&&se.toLowerCase()==="epic";if(G){const F=b.get(T.id);F&&(console.warn(`[Epic Detection]  Work item ${T.id} "${T.fields["System.Title"]}" is an Epic but has a parent ${F} stored. This is likely incorrect - Epics are at the top of the hierarchy.`),b.delete(T.id)),console.log(`[Epic Detection] Work item ${T.id} "${T.fields["System.Title"]}" is itself an Epic (type: ${se}), skipping Epic parent lookup`)}else{let F=b.get(T.id),Y=[];for(;F&&!Y.includes(F);){if(Y.push(F),console.log(`[Epic Detection] Work item ${T.id} "${T.fields["System.Title"]}" (type: ${se}) checking parent ${F}`),K=w.get(F)||null,K){Q=F,console.log(`[Epic Detection]  Work item ${T.id} "${T.fields["System.Title"]}" has Epic parent ${F}: "${K}"`);break}const J=j.get(F),V=_.get(F);if(V)if(V.toLowerCase()==="epic"){K=J||null,Q=F,K&&w.set(F,K),console.log(`[Epic Detection]  Work item ${T.id} "${T.fields["System.Title"]}" has Epic parent ${F}: "${K}"`);break}else console.log(`[Epic Detection] Parent ${F} "${J}" is type "${V}", traversing up to find Epic...`),F=b.get(F);else{console.warn(`[Epic Detection]  Work item ${T.id} "${T.fields["System.Title"]}" has parent ${F} but parent wasn't fetched`);break}}}if(!K&&!G){const F=b.get(T.id);if(F){const Y=j.get(F),J=_.get(F)||"Unknown";Y?console.log(`[Epic Detection]  Work item ${T.id} "${T.fields["System.Title"]}" has parent ${F} "${Y}" (type: "${J}") but no Epic found in hierarchy`):console.warn(`[Epic Detection]  Work item ${T.id} "${T.fields["System.Title"]}" has parent ${F} but parent wasn't fetched`)}else console.log(`[Epic Detection] Work item ${T.id} "${T.fields["System.Title"]}" has no parent`)}if(!K&&T.fields){const Y=["System.Epic","Epic","Microsoft.VSTS.Common.Epic","Custom.Epic","EpicLink","EpicName",...Object.keys(T.fields).filter(J=>J.toLowerCase().includes("epic")&&!["System.Epic","Epic","Microsoft.VSTS.Common.Epic","Custom.Epic","EpicLink","EpicName"].includes(J))];for(const J of Y){const V=T.fields[J];if(V!=null){if(typeof V=="string"&&V.trim()!==""){const H=parseInt(V.trim());if(!isNaN(H)&&H>0){if(K=w.get(H)||null,K){Q=H;break}}else{K=V.trim();break}}else if(typeof V=="number"&&(K=w.get(V)||null,K)){Q=V;break}}}}if(!K){const F=b.get(T.id);console.log(F?`[Epic Detection] Work item ${T.id} "${T.fields["System.Title"]}" has parent ${F} but no Epic title found`:`[Epic Detection] Work item ${T.id} "${T.fields["System.Title"]}" has no Epic found (no parent)`)}const le={id:T.id,fields:{"System.Title":T.fields["System.Title"],"System.Description":T.fields["System.Description"],"System.Tags":T.fields["System.Tags"],"System.WorkItemType":T.fields["System.WorkItemType"],"System.State":T.fields["System.State"],"Microsoft.VSTS.Common.Priority":T.fields["Microsoft.VSTS.Common.Priority"],"System.AreaPath":T.fields["System.AreaPath"],"System.IterationPath":T.fields["System.IterationPath"],Epic:K||void 0,EpicId:Q?Q.toString():void 0},url:`https://dev.azure.com/${t}/${r}/_workitems/edit/${T.id}`};return console.log(`[Map] Work item ${T.id} "${T.fields["System.Title"]}" mapped with Epic: "${K||"none"}", EpicId: "${Q||"none"}"`),le})}catch(l){throw console.error("Error fetching from Azure DevOps:",l),l}}function OC(e){return e.map(t=>{let r,n;const s=t.fields.Epic,a=t.fields.EpicId,l=t.fields["System.WorkItemType"];if(console.log(`[Convert] Work item ${t.id} "${t.fields["System.Title"]}": epicField="${s}", epicIdField="${a}", workItemType="${l}"`),s&&typeof s=="string"&&s.trim()!==""){const f=s.trim();f!==l&&f!=="Epic"&&f.toLowerCase()!=="epic"?(r=f,console.log(`[Convert] Work item ${t.id} converted - Epic: "${r}"`)):console.warn(`[Convert] Work item ${t.id} has epic field "${f}" which matches work item type "${l}" - ignoring`)}a&&typeof a=="string"&&a.trim()!==""&&(n=a.trim(),console.log(`[Convert] Work item ${t.id} - Epic ID: "${n}"`)),!r&&l!=="Epic"&&console.log(`[Convert] Work item ${t.id} "${t.fields["System.Title"]}" has no Epic assigned`);const d=(t.fields["System.Description"]||"").replace(/<[^>]*>/g,"").trim(),m=t.fields["System.Title"]||"Untitled";return r&&m===r&&console.warn(`Work item ${t.id}: Title "${m}" matches Epic name "${r}" - this may indicate a data issue`),{id:`ado-${t.id}`,title:m,description:d,votes:0,voters:[],epic:r||void 0,epicId:n||void 0,state:t.fields["System.State"]||void 0,areaPath:t.fields["System.AreaPath"]||void 0,tags:t.fields["System.Tags"]?t.fields["System.Tags"].split(";").map(f=>f.trim()).filter(f=>f):[],azureDevOpsId:t.id.toString(),azureDevOpsUrl:t.url,workItemType:l||void 0}})}function IC(){return"Product".split(",").map(t=>t.trim()).filter(t=>t.length>0)}const aa=e=>{const r=e.split("T")[0].split(" ")[0].split("-");if(r.length!==3)return new Date(e).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"});const n=parseInt(r[0],10),s=parseInt(r[1],10)-1,a=parseInt(r[2],10);return new Date(n,s,a).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})},Na=e=>new Date(e)<new Date,XI="/feature-voting-app/assets/colorpicker-CmB9zXJh.png",TC=[{bg:"#2D4660",text:"#FFFFFF",border:"#1D3144"},{bg:"#1E5461",text:"#FFFFFF",border:"#133742"},{bg:"#C89212",text:"#FFFFFF",border:"#A67810"},{bg:"#173B65",text:"#FFFFFF",border:"#0F2844"},{bg:"#2E5A8F",text:"#FFFFFF",border:"#1F4468"},{bg:"#4A6A8F",text:"#FFFFFF",border:"#3D5A7D"},{bg:"#5479A1",text:"#FFFFFF",border:"#4A6A8F"},{bg:"#6B8FBF",text:"#FFFFFF",border:"#5479A1"},{bg:"#3D7BAD",text:"#FFFFFF",border:"#2E5A8F"},{bg:"#258799",text:"#FFFFFF",border:"#145668"},{bg:"#36849B",text:"#FFFFFF",border:"#2A7489"},{bg:"#4098B3",text:"#FFFFFF",border:"#36849B"},{bg:"#2B9BAD",text:"#FFFFFF",border:"#1E7A89"},{bg:"#1FA3B5",text:"#FFFFFF",border:"#178290"},{bg:"#2D7A4E",text:"#FFFFFF",border:"#1E5A38"},{bg:"#3A9B5C",text:"#FFFFFF",border:"#2D7A4E"},{bg:"#52B876",text:"#FFFFFF",border:"#3A9B5C"},{bg:"#6FD492",text:"#FFFFFF",border:"#52B876"},{bg:"#4CAF7A",text:"#FFFFFF",border:"#3A9B5C"},{bg:"#7CB342",text:"#FFFFFF",border:"#689F38"},{bg:"#9CCC65",text:"#111827",border:"#7CB342"},{bg:"#E0A925",text:"#111827",border:"#C89212"},{bg:"#F4B729",text:"#111827",border:"#E0A925"},{bg:"#FFC940",text:"#111827",border:"#F4B729"},{bg:"#D4A017",text:"#FFFFFF",border:"#B8890F"},{bg:"#D87A35",text:"#FFFFFF",border:"#C4681F"},{bg:"#E88F3A",text:"#FFFFFF",border:"#D87A35"},{bg:"#FF9F4A",text:"#FFFFFF",border:"#E88F3A"},{bg:"#FF8C42",text:"#FFFFFF",border:"#E88F3A"},{bg:"#B83A2F",text:"#FFFFFF",border:"#9F2A21"},{bg:"#D44638",text:"#FFFFFF",border:"#B83A2F"},{bg:"#E85240",text:"#FFFFFF",border:"#D44638"},{bg:"#591D0F",text:"#FFFFFF",border:"#3C130A"},{bg:"#8A3420",text:"#FFFFFF",border:"#6F2818"},{bg:"#6B4C9A",text:"#FFFFFF",border:"#573A7F"},{bg:"#8E6BB5",text:"#FFFFFF",border:"#7556A1"},{bg:"#9B7AC7",text:"#FFFFFF",border:"#8E6BB5"},{bg:"#5D3F7A",text:"#FFFFFF",border:"#4A2F61"},{bg:"#492434",text:"#FFFFFF",border:"#311823"},{bg:"#5D2F43",text:"#FFFFFF",border:"#492434"},{bg:"#8B3A62",text:"#FFFFFF",border:"#6F2A4D"},{bg:"#A14A76",text:"#FFFFFF",border:"#8B3A62"},{bg:"#6A4234",text:"#FFFFFF",border:"#4B2D23"},{bg:"#8B5A3C",text:"#FFFFFF",border:"#6A4234"},{bg:"#A0694B",text:"#FFFFFF",border:"#8B5A3C"},{bg:"#7D5A3A",text:"#FFFFFF",border:"#6A4234"},{bg:"#3A3638",text:"#FFFFFF",border:"#2A2628"},{bg:"#4A4548",text:"#FFFFFF",border:"#3A3638"},{bg:"#5C5A5D",text:"#FFFFFF",border:"#4A4548"},{bg:"#7A8590",text:"#FFFFFF",border:"#5F6A74"},{bg:"#8F959B",text:"#111827",border:"#72777C"}],kZ=e=>e?e.trim().toLowerCase():"",NZ=e=>{let t=0;for(let r=0;r<e.length;r+=1)t=t*31+e.charCodeAt(r)>>>0;return t},Dh=(e,t,r)=>Math.min(Math.max(e,t),r),_Z=e=>{if(!e)return null;let t=e.trim();return!t||(t.startsWith("#")||(t=`#${t}`),t.length===4&&(t=`#${t[1]}${t[1]}${t[2]}${t[2]}${t[3]}${t[3]}`),t.length!==7)?null:t.toUpperCase()},Pw=e=>{const t=e.replace("#",""),r=parseInt(t,16);return{r:r>>16&255,g:r>>8&255,b:r&255}},CZ=({r:e,g:t,b:r})=>{const n=[e,t,r].map(s=>{const a=s/255;return a<=.03928?a/12.92:Math.pow((a+.055)/1.055,2.4)});return .2126*n[0]+.7152*n[1]+.0722*n[2]},EZ=e=>CZ(Pw(e))>.6?"#111827":"#FFFFFF",DC=(e,t)=>{const{r,g:n,b:s}=Pw(e),a=1+t/100,l=Dh(Math.round(r*a),0,255),u=Dh(Math.round(n*a),0,255),d=Dh(Math.round(s*a),0,255);return`#${l.toString(16).padStart(2,"0")}${u.toString(16).padStart(2,"0")}${d.toString(16).padStart(2,"0")}`.toUpperCase()},AZ=(e,t)=>{const{r,g:n,b:s}=Pw(e);return`rgba(${r}, ${n}, ${s}, ${Dh(t,0,1)})`},Ur=(e,t)=>{const r=_Z(t);if(r){const l=EZ(r);return{background:r,text:l,border:DC(r,-20),badgeBackground:AZ(r,.15),badgeText:l,hoverBackground:DC(r,-5),hoverText:l}}const n=kZ(e),s=n?NZ(n)%TC.length:0,a=TC[s];return{background:a.bg,text:a.text,border:a.border,badgeBackground:`${a.bg}1A`,badgeText:a.text,hoverBackground:a.bg,hoverText:a.text}};function PZ({label:e="Product",products:t,value:r,onChange:n,fallbackName:s=null,isLoading:a=!1,error:l=null,disabled:u=!1,placeholder:d="Select a product",helperText:m,className:f="",allowAdd:p=!1,newProductName:x="",onNewProductNameChange:v,newProductColor:b,onNewProductColorChange:w,onCreateProduct:j,isCreatingProduct:_=!1,addHelperText:E,addButtonLabel:C="Add Product",addInputPlaceholder:I="e.g., Catalyst Cloud",allowDelete:A=!1,onRequestDeleteProduct:$}){const[B,T]=g.useState(!1),K=g.useRef(null),Q=g.useRef(null),[se,G]=g.useState(!1),[le,F]=g.useState(!1),Y=g.useMemo(()=>t.find(je=>je.id===r)??null,[t,r]),J=(Y==null?void 0:Y.name)??s??"",V=J?Ur(J,(Y==null?void 0:Y.color_hex)??null):null,H=u||a||t.length===0;g.useEffect(()=>{if(!B)return;function je(Se){K.current&&!K.current.contains(Se.target)&&T(!1)}function Me(Se){Se.key==="Escape"&&T(!1)}return document.addEventListener("mousedown",je),document.addEventListener("keydown",Me),()=>{document.removeEventListener("mousedown",je),document.removeEventListener("keydown",Me)}},[B]);const re=je=>{n(je),T(!1)},ie=!!(p&&v&&j),M=ie&&se,Z=!!w,fe=b??"#2D4660",ye=!!(e&&e.trim().length>0),Le=ye||ie;return i.jsxs("div",{className:`space-y-3 ${f}`,children:[i.jsx("style",{children:`
        .product-picker__menu {
          box-shadow: 0px 12px 28px rgba(45, 70, 96, 0.18);
          width: 100%;
          background-color: #ffffff;
          overflow: hidden;
        }

        .product-picker__item {
          display: flex;
          width: 100%;
          align-items: center;
          justify-content: flex-start;
          gap: 0.75rem;
          padding: 0.65rem 0.75rem;
          font-size: 0.875rem;
          background: #ffffff;
          border: none;
          border-top: 1px solid rgba(203, 213, 225, 0.4);
          cursor: pointer;
          color: var(--product-color, #2D4660);
          transition: color 0.3s ease;
          text-align: left;
        }

        .product-picker__item:first-child {
          border-top: none;
        }

        .product-picker__item:hover,
        .product-picker__item:focus-visible {
          background-color: var(--product-light-bg, rgba(45, 70, 96, 0.1));
          outline: none;
        }

        .product-color-badge {
          width: 1.5rem;
          height: 1.5rem;
          border-radius: 0.35rem;
          flex-shrink: 0;
          background-color: var(--product-color, #2D4660);
          border: 1px solid var(--product-border-color, rgba(0,0,0,0.12));
          box-shadow: inset 0 0 0 1px rgba(255,255,255,0.35);
        }
      `}),i.jsxs("div",{className:"relative",ref:K,style:Le?void 0:{marginTop:"-12px"},children:[Le&&i.jsxs("div",{className:"flex items-center justify-between mb-1 gap-3",children:[ye&&i.jsx("label",{className:"block text-sm font-medium text-gray-700",children:e}),ie&&i.jsx("div",{className:"flex-1 flex items-center justify-end gap-2",children:M?i.jsxs("div",{className:"flex items-center gap-2 transition-all duration-300",children:[i.jsx("input",{type:"text",value:x,onChange:je=>{F(!1),v==null||v(je.target.value)},placeholder:"Product name",className:"flex-1 h-10 px-3 border rounded-md text-sm focus:outline-none focus:ring-0",style:{borderColor:b&&x.trim().length>0?b:"#D1D5DB"}}),Z&&x.trim().length>0&&i.jsxs(i.Fragment,{children:[i.jsx("button",{type:"button",onClick:()=>{var je;return(je=Q.current)==null?void 0:je.click()},className:`relative h-10 w-10 rounded-md border shadow-sm flex items-center justify-center focus:outline-none focus:ring-2 focus:ring-offset-1 focus:ring-[#2d4660] ${b?"":"border-gray-300 bg-white"}`,style:b?{backgroundColor:b,borderColor:b}:void 0,"aria-label":"Choose product color",children:!b&&i.jsx("img",{src:"https://icon-library.com/images/color-wheel-icon-png/color-wheel-icon-png-25.jpg",alt:"",className:"h-7 w-7 object-contain pointer-events-none"})}),i.jsx("input",{ref:Q,type:"color",value:fe,onChange:je=>{F(!1),w==null||w(je.target.value)},className:"sr-only"}),x.trim().length>0&&i.jsx("button",{type:"button",onClick:()=>F(!0),className:`h-10 px-3 rounded-md text-sm font-medium border transition-colors ${le?"bg-green-50 border-green-500 text-green-700":"bg-white border-gray-300 text-gray-700 hover:bg-gray-50"}`,children:"Looks Great"})]}),x.trim().length>0&&b&&le&&i.jsx("button",{type:"button",onClick:j,className:"h-10 px-4 bg-[#C89212] text-white rounded-md text-sm font-semibold hover:bg-[#A67810] transition-colors",children:_?"Creating":"Create New Product"})]}):i.jsx("button",{type:"button",onClick:()=>G(!0),className:"text-sm font-medium text-blue-600 hover:text-blue-700 whitespace-nowrap",children:"+ Create New Product"})})]}),i.jsxs("button",{type:"button",onClick:()=>!H&&T(je=>!je),className:`relative flex w-full items-center justify-between rounded-md border px-3 py-2 text-left text-sm ${H?"cursor-not-allowed bg-gray-100 text-gray-400 border-gray-200":"bg-white text-gray-900 border-gray-300 hover:border-[#2D4660]"}`,style:!H&&V?{borderColor:V.border}:void 0,"aria-expanded":B,"aria-haspopup":"listbox",children:[i.jsxs("div",{className:"flex items-center gap-2 truncate",children:[V&&i.jsx("span",{className:"inline-flex h-3.5 w-3.5 rounded-sm border border-white/60 shadow-inner",style:{backgroundColor:V.background,borderColor:V.border},"aria-hidden":"true"}),i.jsx("span",{className:`truncate ${J?"":"text-gray-400"}`,style:V?{color:V.background}:void 0,children:J||(t.length===0?"No products available":d)})]}),i.jsx(rs,{className:`ml-2 h-4 w-4 transition-transform ${B?"rotate-180":""} ${H?"text-gray-300":"text-gray-500"}`})]}),B&&!H&&i.jsx("div",{className:"product-picker__menu absolute left-0 z-50 mt-2 w-full overflow-hidden rounded-md border border-gray-200 bg-white",style:{marginTop:"-10px"},role:"listbox",children:i.jsx("div",{className:"max-h-60 overflow-y-auto py-1",children:t.map(je=>{const Me=Ur(je.name,je.color_hex??null),Se=r===je.id;return i.jsxs("div",{className:"product-picker__item",style:{"--product-color":Me.background,"--product-light-bg":Me.badgeBackground,"--product-border-color":Me.border},children:[i.jsxs("button",{type:"button",className:"flex flex-1 items-center gap-3 text-left",onClick:()=>re(je.id),"aria-selected":Se,children:[i.jsx("span",{className:"product-color-badge","aria-hidden":"true"}),i.jsx("span",{className:"flex-1 truncate font-medium",children:je.name}),Se&&i.jsx(kr,{className:"h-4 w-4 text-gray-400"})]}),A&&$&&i.jsx("button",{type:"button",onClick:z=>{z.stopPropagation(),T(!1),$(je)},className:"ml-2 text-gray-400 hover:text-[#B83A2F]","aria-label":`Delete ${je.name}`,title:"Delete product",children:i.jsx(ha,{className:"h-4 w-4"})})]},je.id)})})}),a&&i.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"Loading products"}),l&&i.jsx("p",{className:"mt-1 text-xs text-[#591D0F]",children:l}),!a&&!l&&m&&i.jsx("p",{className:"mt-1 text-xs text-gray-500",children:m})]}),ie&&E&&M&&i.jsx("p",{className:"text-xs text-gray-500",children:E})]})}const $C=["OpsVision Portal","MillTrack Insight","Quality Compass","Supply Sync","Roadmap Nexus","Fabricator Hub","Blueprint Studio","Velocity Forge","Navigator Suite","Catalyst Cloud"],RC=e=>{if(!e)return null;const t=e.trim();return t.length===0?null:t},OZ=e=>{let t=0;for(let r=0;r<e.length;r+=1)t=t*31+e.charCodeAt(r)>>>0;return $C[t%$C.length]};function Ar(e,t){const r=e.product_id??e.productId??null;if(r&&t){const a=RC(t[r]);if(a)return a}const n=RC(e.product_name??e.productName);if(n)return n;const s=r||e.id||e.title||"default-product";return OZ(s)}const IZ=["Stakeholders need more time","New backlog items require votes","Clarify previous results","Technical issue resolved","Other"],MC="https://cdn.iconscout.com/icon/free/png-512/azure-devops-3628645-3029870.png";function TZ({options:e,value:t,onChange:r,placeholder:n="Select...",label:s,disabled:a=!1,variant:l="default"}){const[u,d]=g.useState(!1),m=g.useRef(null);g.useEffect(()=>{function j(_){m.current&&!m.current.contains(_.target)&&d(!1)}return document.addEventListener("mousedown",j),()=>document.removeEventListener("mousedown",j)},[]);const f=j=>{r(j),d(!1)},p=t||n,x=l==="green"?"border-green-600":"border-gray-300",v=l==="green"?"text-green-600":"text-gray-400",b=l==="green"?"bg-green-50":"bg-blue-50",w=l==="green"?"text-green-600":"text-[#1E5461]";return i.jsxs("div",{ref:m,className:"relative",children:[s&&i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:s}),i.jsxs("div",{onClick:()=>!a&&d(!u),className:`w-full px-3 py-2 border ${x} rounded-md min-h-[38px] flex items-center justify-between ${a?"bg-gray-100 cursor-not-allowed":"bg-white cursor-pointer"}`,children:[i.jsx("span",{className:`text-sm ${t?"text-gray-900":"text-gray-400"}`,children:p}),i.jsx(rs,{className:`h-4 w-4 ${v} transition-transform ${u?"transform rotate-180":""}`})]}),u&&!a&&i.jsx("div",{className:"absolute z-50 w-full mt-1 bg-white border border-gray-300 rounded-md shadow-lg max-h-60 overflow-y-auto",children:e.map(j=>i.jsxs("div",{onClick:()=>f(j),className:`px-3 py-2 cursor-pointer hover:bg-gray-50 flex items-center justify-between ${t===j?b:""}`,children:[i.jsx("span",{className:"text-sm text-gray-900",children:j}),t===j&&i.jsx(kr,{className:`h-4 w-4 ${w}`})]},j))})]})}function QI(e){if(!e)return null;const t=e.toLowerCase();return t==="epic"?{icon:En,color:"rgb(51, 153, 71)"}:t==="feature"?{icon:Jv,color:"#773b93"}:t==="user story"||t==="story"?{icon:JM,color:"#007acc"}:t==="bug"?{icon:QM,color:"#cc293d"}:t==="task"?{icon:Yc,color:"#007acc"}:t==="change request"?{icon:qM,color:"#ff8c00"}:t==="test case"||t==="test"?{icon:hF,color:"#007acc"}:t==="issue"?{icon:or,color:"#cc293d"}:null}function pd({options:e,value:t,onChange:r,placeholder:n="Select...",label:s,searchable:a=!1,disabled:l=!1}){const[u,d]=g.useState(!1),[m,f]=g.useState(""),p=g.useRef(null),x=g.useRef(null);g.useEffect(()=>{function _(E){p.current&&!p.current.contains(E.target)&&(d(!1),f(""))}return document.addEventListener("mousedown",_),()=>document.removeEventListener("mousedown",_)},[]),g.useEffect(()=>{u&&a&&x.current&&x.current.focus()},[u,a]);const v=_=>{t.includes(_)?r(t.filter(E=>E!==_)):r([...t,_])},b=(_,E)=>{E.stopPropagation(),r(t.filter(C=>C!==_))},w=_=>{_.stopPropagation(),r([])},j=a&&m?e.filter(_=>_.toLowerCase().includes(m.toLowerCase())):e;return i.jsxs("div",{ref:p,className:"relative",children:[s&&i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:s}),i.jsxs("div",{onClick:()=>!l&&d(!u),className:`w-full px-3 py-2 border border-gray-300 rounded-md min-h-[38px] flex items-center justify-between ${l?"bg-gray-100 cursor-not-allowed":"bg-white cursor-pointer"}`,children:[i.jsx("div",{className:"flex-1 flex flex-wrap gap-1",children:t.length===0?i.jsx("span",{className:"text-sm text-gray-400",children:n}):t.map(_=>i.jsxs("span",{className:"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-[#2D4660]/10 text-[#2D4660]",children:[_,!l&&i.jsx("button",{type:"button",onClick:E=>b(_,E),className:"ml-1 hover:text-[#173B65]",children:i.jsx(xs,{className:"h-3 w-3"})})]},_))}),i.jsxs("div",{className:"flex items-center gap-1 ml-2",children:[t.length>0&&!l&&i.jsx("button",{type:"button",onClick:w,className:"text-gray-400 hover:text-gray-600",children:i.jsx(xs,{className:"h-4 w-4"})}),i.jsx(rs,{className:`h-4 w-4 text-gray-400 transition-transform ${u?"transform rotate-180":""}`})]})]}),u&&!l&&i.jsxs("div",{className:"absolute z-50 w-full mt-1 bg-white border border-gray-300 rounded-md shadow-lg max-h-60 overflow-hidden flex flex-col",children:[a&&i.jsx("div",{className:"p-2 border-b border-gray-200",children:i.jsx("input",{ref:x,type:"text",value:m,onChange:_=>f(_.target.value),onClick:_=>_.stopPropagation(),placeholder:"Type to search...",className:"w-full px-3 py-1.5 text-sm border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[#2D4660]"})}),i.jsx("div",{className:"overflow-y-auto",children:j.length>0?j.map(_=>i.jsxs("div",{onClick:()=>v(_),className:`px-3 py-2 cursor-pointer hover:bg-gray-50 flex items-center justify-between ${t.includes(_)?"bg-[#2D4660]/5":""}`,children:[i.jsx("span",{className:"text-sm",children:_}),t.includes(_)&&i.jsx(kr,{className:"h-4 w-4 text-[#1E5461]"})]},_)):i.jsx("div",{className:"px-3 py-2 text-sm text-gray-500 text-center",children:"No matches found"})})]})]})}function DZ({isOpen:e,onClose:t,previewFeatures:r,onConfirmSync:n,onReplaceAll:s,isFetching:a=!1,config:l}){const[u,d]=g.useState(new Set);g.useEffect(()=>{if(e&&r&&r.length>0){const b=r.map(w=>w.id).filter(w=>w);console.log("PreviewFeaturesModal: Selecting all features by default",b.length,"features"),console.log("PreviewFeaturesModal: Feature IDs:",b),b.length>0&&d(new Set(b))}else e||d(new Set)},[e,r]);const m=b=>{d(w=>{const j=new Set(w);return j.has(b)?j.delete(b):j.add(b),j})},f=()=>{r&&(u.size===r.length?d(new Set):d(new Set(r.map(b=>b.id))))},p=async()=>{if(!r||r.length===0){console.warn("handleAddSelected: No preview features available");return}if(u.size===0){console.log("handleAddSelected: No features selected, selecting all by default");const w=r.map(j=>j.id).filter(j=>j);d(new Set(w)),setTimeout(()=>{p()},100);return}console.log("handleAddSelected: Preview features count:",r.length),console.log("handleAddSelected: Selected features count:",u.size),console.log("handleAddSelected: Selected feature IDs:",Array.from(u)),console.log("handleAddSelected: Preview feature IDs:",r.map(w=>w.id));const b=r.filter(w=>{const j=w.id&&u.has(w.id);return j||console.warn("handleAddSelected: Feature not selected:",w.id,w.title),j});if(b.length===0){if(console.warn("handleAddSelected: No features selected after filtering"),console.warn("handleAddSelected: Preview features:",r),console.warn("handleAddSelected: Selected set:",u),r.map(j=>j.id).filter(j=>j).length>0){console.log("handleAddSelected: Fallback - selecting all features");const j=r.filter(_=>_.id);if(j.length>0)try{await n(j),console.log("handleAddSelected: Sync completed with all features, closing modal"),t()}catch(_){console.error("handleAddSelected: Error during sync",_)}}return}console.log("handleAddSelected: Adding",b.length,"features");try{await n(b),console.log("handleAddSelected: Sync completed, closing modal"),t()}catch(w){console.error("handleAddSelected: Error during sync",w)}},x=async()=>{!r||!s||(await s(),t())},v=u.size;return i.jsx(bn,{isOpen:e,onClose:t,title:"Preview Azure DevOps Features",maxWidth:"max-w-6xl",children:i.jsx("div",{className:"space-y-4",children:r&&r.length>0?i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"bg-[#1E5461]/5 border border-[#1E5461]/20 rounded-lg p-4",children:i.jsx("p",{className:"text-[#1E5461] font-medium",children:"Select the work items you want to add to your voting session."})}),i.jsx("div",{className:"border border-gray-200 rounded-lg overflow-hidden",children:i.jsx("div",{className:"max-h-96 overflow-y-auto",children:i.jsxs("table",{className:"w-full",children:[i.jsx("thead",{className:"bg-gray-50 sticky top-0",children:i.jsxs("tr",{children:[i.jsx("th",{className:"px-4 py-3 text-left",children:i.jsx("button",{type:"button",onClick:b=>{b.stopPropagation(),f()},className:"flex items-center justify-center w-5 h-5",children:r.length>0&&u.size===r.length?i.jsx(Yc,{className:"w-5 h-5 text-green-600"}):i.jsx(Ed,{className:"w-5 h-5 text-gray-400"})})}),i.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-gray-700 uppercase",children:"Title"}),i.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-gray-700 uppercase",children:"Type"}),i.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-gray-700 uppercase",children:"State"}),i.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-gray-700 uppercase",children:"Epic"}),i.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-gray-700 uppercase",children:"Area Path"})]})}),i.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:r.map(b=>{const w=u.has(b.id);return console.log(`[PreviewModal] Rendering feature ${b.id} "${b.title}": epic="${b.epic}", epicId="${b.epicId}"`),i.jsxs("tr",{className:`hover:bg-gray-50 cursor-pointer ${w?"bg-blue-50":""}`,onClick:()=>m(b.id),children:[i.jsx("td",{className:"px-4 py-3",children:i.jsx("button",{type:"button",onClick:j=>{j.stopPropagation(),m(b.id)},className:"flex items-center justify-center w-5 h-5",children:w?i.jsx(Yc,{className:"w-5 h-5 text-green-600"}):i.jsx(Ed,{className:"w-5 h-5 text-gray-400"})})}),i.jsx("td",{className:"px-4 py-3",children:i.jsx("div",{className:"flex items-start gap-2",children:i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsx("div",{className:"text-sm font-medium text-gray-900",children:b.title}),b.description&&b.description.trim()&&i.jsxs("div",{className:"text-xs text-gray-500 mt-1 line-clamp-2",children:[b.description.replace(/<[^>]*>/g,"").substring(0,100),b.description.replace(/<[^>]*>/g,"").length>100?"...":""]}),b.tags&&b.tags.length>0&&i.jsxs("div",{className:"flex flex-wrap gap-1 mt-1",children:[b.tags.slice(0,3).map((j,_)=>i.jsx("span",{className:"px-1.5 py-0.5 text-xs bg-gray-100 text-gray-600 rounded",children:j},_)),b.tags.length>3&&i.jsxs("span",{className:"px-1.5 py-0.5 text-xs text-gray-500",children:["+",b.tags.length-3]})]})]})})}),i.jsx("td",{className:"px-4 py-3 align-middle",children:i.jsx("div",{className:"flex items-center gap-2",children:(()=>{const j=QI(b.workItemType);if(j&&b.azureDevOpsId){const _=j.icon,C=($=>{const B=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec($);return B?{r:parseInt(B[1],16),g:parseInt(B[2],16),b:parseInt(B[3],16)}:null})(j.color),I=C?`rgba(${C.r}, ${C.g}, ${C.b}, 0.1)`:`${j.color}20`,A=C?`rgba(${C.r}, ${C.g}, ${C.b}, 0.2)`:`${j.color}40`;return i.jsxs("a",{href:b.azureDevOpsUrl||"",target:"_blank",rel:"noopener noreferrer",onClick:$=>$.stopPropagation(),className:"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium cursor-pointer border",style:{backgroundColor:I,color:j.color,borderColor:j.color},onMouseEnter:$=>{$.currentTarget.style.backgroundColor=A},onMouseLeave:$=>{$.currentTarget.style.backgroundColor=I},title:"View in Azure DevOps",children:[i.jsx(_,{className:"h-3 w-3 mr-1",style:{color:j.color}}),b.azureDevOpsId.replace(/^ado-/,"#")]})}else{if(b.workItemType&&b.azureDevOpsId)return i.jsxs("a",{href:b.azureDevOpsUrl||"",target:"_blank",rel:"noopener noreferrer",onClick:_=>_.stopPropagation(),className:"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-[#492434]/10 text-[#492434] hover:bg-[#492434]/20 cursor-pointer border border-[#492434]/30",title:"View in Azure DevOps",children:[i.jsx("span",{className:"mr-1 text-xs",children:b.workItemType}),b.azureDevOpsId.replace(/^ado-/,"#")]});if(j){const _=j.icon;return i.jsx(_,{className:"w-5 h-5",style:{color:j.color}})}else if(b.workItemType)return i.jsx("span",{className:"px-2 py-1 text-xs font-medium bg-[#492434]/10 text-[#492434] rounded",children:b.workItemType})}return null})()})}),i.jsx("td",{className:"px-4 py-3 align-middle",children:b.state&&i.jsx("span",{className:"px-2 py-1 text-xs font-medium bg-[#1E5461]/10 text-[#1E5461] rounded",children:b.state})}),i.jsx("td",{className:`px-4 py-3 align-middle ${b.epic||b.workItemType&&b.workItemType.toLowerCase()==="epic"?"w-64":"w-32"}`,children:b.workItemType&&b.workItemType.toLowerCase()==="epic"?i.jsx("span",{className:"text-xs text-gray-600 italic",children:"This Work Item is an Epic"}):b.epic?b.epicId?i.jsx("a",{href:`https://dev.azure.com/${l.organization}/${l.project}/_workitems/edit/${b.epicId}`,target:"_blank",rel:"noopener noreferrer",onClick:j=>j.stopPropagation(),className:"inline-block w-full",children:i.jsx(Gl,{name:b.epic,epicId:b.epicId,description:b.description,className:"hover:opacity-80"})}):i.jsx(Gl,{name:b.epic,description:b.description}):i.jsx("span",{className:"text-xs text-gray-400 italic",children:"no Epic assigned"})}),i.jsx("td",{className:"px-4 py-3 align-middle",children:b.areaPath?i.jsx("div",{className:"text-xs text-gray-700 max-w-xs truncate",title:b.areaPath,children:b.areaPath}):i.jsx("span",{className:"text-xs text-gray-400",children:""})})]},b.id)})})]})})}),i.jsxs("div",{className:"flex justify-between items-center pt-4 border-t",children:[i.jsxs("div",{className:"text-sm text-gray-600",children:[v," of ",r.length," selected"]}),i.jsxs("div",{className:"flex space-x-2",children:[i.jsx(gt,{variant:"primary",onClick:p,disabled:v===0||a,className:"flex items-center",children:a?i.jsxs(i.Fragment,{children:[i.jsx(Jo,{className:"h-4 w-4 mr-2 animate-spin"}),"Adding..."]}):i.jsxs(i.Fragment,{children:[i.jsx(vn,{className:"h-4 w-4 mr-2"}),"Add ",v," Feature",v!==1?"s":""]})}),s&&i.jsxs(gt,{variant:"danger",onClick:x,className:"flex items-center",children:[i.jsx(Jo,{className:"h-4 w-4 mr-2"}),"Replace All Features"]})]})]})]}):i.jsxs("div",{className:"text-center py-8",children:[i.jsx(or,{className:"h-12 w-12 text-gray-400 mx-auto mb-3"}),i.jsx("p",{className:"text-gray-600",children:"No features found to sync"})]})})})}function $Z({config:e,onUpdateConfig:t,onPreview:r,isFetching:n,availableStates:s,availableAreaPaths:a,availableTags:l,previewFeatures:u,showPreviewModal:d,onFetchStatesForType:m,onFetchAreaPathsForTypeAndState:f,onFetchTagsForTypeStateAndAreaPath:p,onFetchTypesAndStatesForAreaPath:x,onFetchTypesAndStatesForTags:v,onFetchTypesAndAreaPathsForStates:b,resetSignal:w}){const j=GI,[_,E]=g.useState(!1),[C,I]=g.useState(null),[A,$]=g.useState(!1),[B,T]=g.useState(!1),[K,Q]=g.useState(!1),[se,G]=g.useState(0),le=g.useRef(null),F=g.useRef(!1),Y=g.useRef(!1),J=g.useRef(null),V=g.useRef(e),H=g.useRef(null),re=g.useRef(!1),ie=g.useRef(!1),M=g.useRef(!1),Z=g.useRef(null),fe=g.useRef(!1),ye=g.useRef(!1),Le=g.useRef([]),je=g.useRef([]),Me=g.useRef([]),Se=g.useRef(null),z=g.useRef(null),ue=g.useRef([]),de=g.useRef([]),ee=g.useRef([]),Ye={workItemTypes:[],states:[],areaPaths:[],tags:[],query:""},{register:Oe,handleSubmit:rt,watch:Nt,control:vt,setValue:ot,reset:rr}=Ad({defaultValues:Ye}),U=g.useCallback(()=>{ye.current=!0,rr({...Ye}),E(!1),re.current=!1,ie.current=!1,M.current=!1,fe.current=!1,Y.current=!1,J.current=null,Z.current!==null&&(clearTimeout(Z.current),Z.current=null),Se.current!==null&&(clearTimeout(Se.current),Se.current=null),z.current=null,ue.current=[],de.current=[],ee.current=[],setTimeout(()=>{ye.current=!1},500)},[rr]);g.useEffect(()=>{U()},[w,U]);const q=Nt("workItemTypes"),ne=Nt("states"),Ne=Nt("areaPaths"),Ie=Nt("tags");g.useEffect(()=>{if(ie.current||fe.current||re.current||M.current||ye.current){Le.current=q||[],je.current=ne||[],Me.current=Ne||[];return}const qe=q.length<Le.current.length,bt=ne.length<je.current.length,jt=Ne.length<Me.current.length;if(qe||bt||jt){z.current=Date.now(),Le.current=q||[],je.current=ne||[],Me.current=Ne||[],ye.current=!0,Se.current!==null&&clearTimeout(Se.current);const Be=async()=>{qe&&(ue.current=[]),bt&&(de.current=[]),jt&&(ee.current=[]),q&&q.length>0?(m&&await m(q[0]),f&&await f(q[0],ne||[]),p&&await p(q[0],ne||[],Ne||[])):ne&&ne.length>0&&b?await b(ne):Ne&&Ne.length>0&&x&&await x(Ne),setTimeout(()=>{Se.current=null,setTimeout(()=>{ye.current=!1,setTimeout(()=>{z.current=null},2e3)},1e3)},500)};Se.current=window.setTimeout(()=>{Be()},100)}else Le.current=q||[],je.current=ne||[],Me.current=Ne||[]},[q,ne,Ne,Ie,m,f,p,b,x]);const Ce=Nt("query"),Te=g.useCallback((qe,bt,jt,Be,He,Ze)=>{const ft=[];if(qe&&qe.length>0)if(qe.length===1)ft.push(`[System.WorkItemType] = '${qe[0]}'`);else{const nt=qe.map(Kt=>`'${Kt}'`).join(", ");ft.push(`[System.WorkItemType] IN (${nt})`)}if(bt&&bt.length>0)if(bt.length===1)ft.push(`[System.State] = '${bt[0]}'`);else{const nt=bt.map(Kt=>`'${Kt}'`).join(", ");ft.push(`[System.State] IN (${nt})`)}if(jt&&jt.length>0)if(jt.length===1)ft.push(`[System.AreaPath] UNDER '${jt[0]}'`);else{const nt=jt.map(Kt=>`[System.AreaPath] UNDER '${Kt}'`);ft.push(`(${nt.join(" OR ")})`)}if(Be&&Be.length>0){const nt=Be.map(Kt=>`[System.Tags] CONTAINS '${Kt}'`);ft.push(`(${nt.join(" OR ")})`)}return Ze&&He&&ft.push(`(${He})`),ft.length>0?ft.join(" AND "):void 0},[]);g.useEffect(()=>{if(!(re.current||ie.current||M.current||fe.current||Z.current!==null)&&m){if(!q||q.length===0){m(void 0);return}m(q[0])}},[q,m]),g.useEffect(()=>{if(re.current||ie.current||fe.current||!f)return;(async()=>{T(!0);try{await f(q&&q.length>0?q[0]:void 0,ne||[])}finally{T(!1)}})()},[q,ne,f]),g.useEffect(()=>{if(ie.current||re.current||M.current||Z.current!==null||fe.current||!p||!q||q.length===0)return;const qe=async()=>{Q(!0);try{await p(q[0],ne||[],Ne||[])}finally{Q(!1)}},bt=setTimeout(()=>{qe()},100);return()=>{clearTimeout(bt),Q(!1)}},[q,ne,Ne,p]),g.useEffect(()=>{var He,Ze;if(!x||ye.current||Se.current!==null||ie.current||fe.current||!Ne||Ne.length===0)return;if(z.current!==null){if(Date.now()-z.current<5e3)return;z.current=null}const qe=q&&q.length>0,bt=ne&&ne.length>0;if(qe&&bt)return;const jt=((q==null?void 0:q.length)||0)<(((He=Le.current)==null?void 0:He.length)||0),Be=((ne==null?void 0:ne.length)||0)<(((Ze=je.current)==null?void 0:Ze.length)||0);if(jt||Be){Le.current=q||[],je.current=ne||[],z.current=Date.now();return}re.current=!0,x(Ne).then(({types:ft,states:nt})=>{ft.length>0&&!qe&&(ot("workItemTypes",ft,{shouldDirty:!1}),Le.current=ft),nt.length>0&&!bt&&(ot("states",nt,{shouldDirty:!1}),je.current=nt)}).finally(()=>{setTimeout(()=>{re.current=!1},300)})},[Ne,q,ne,x,ot]),g.useEffect(()=>{var Bt,qt,Wt;if(!v||ye.current||Se.current!==null||re.current||M.current)return;if(z.current!==null){if(Date.now()-z.current<5e3)return;z.current=null}const qe=((q==null?void 0:q.length)||0)<(((Bt=Le.current)==null?void 0:Bt.length)||0),bt=((ne==null?void 0:ne.length)||0)<(((qt=je.current)==null?void 0:qt.length)||0),jt=((Ne==null?void 0:Ne.length)||0)<(((Wt=Me.current)==null?void 0:Wt.length)||0),Be=q||[],He=ne||[],Ze=Ne||[],ft=ue.current||[],nt=de.current||[],Kt=ee.current||[],dr=ft.length>0&&Be.length<ft.length&&Be.every(Qt=>ft.includes(Qt)),Pr=nt.length>0&&He.length<nt.length&&He.every(Qt=>nt.includes(Qt)),tt=Kt.length>0&&Ze.length<Kt.length&&Ze.every(Qt=>Kt.includes(Qt));if(qe||bt||jt||dr||Pr||tt){Le.current=q||[],je.current=ne||[],Me.current=Ne||[],z.current=Date.now();return}if(!Ie||Ie.length===0){Z.current!==null&&(clearTimeout(Z.current),Z.current=null),fe.current=!1,J.current=null,Y.current=!1,z.current=null,ue.current=[],de.current=[],ee.current=[];return}ie.current=!0,fe.current=!0,J.current=Date.now(),Z.current!==null&&clearTimeout(Z.current),Z.current=window.setTimeout(()=>{Z.current=null,setTimeout(()=>{fe.current=!1,J.current=null,Y.current=!0,G(Qt=>Qt+1)},500)},1500),v(Ie).then(({types:Qt,states:sr,areaPaths:Mr})=>{Qt.length>0,sr.length>0,Mr.length>0,Qt.length>0&&(ot("workItemTypes",Qt,{shouldDirty:!1}),Le.current=Qt,ue.current=Qt),sr.length>0&&(ot("states",sr,{shouldDirty:!1}),je.current=sr,de.current=sr),Mr.length>0&&(ot("areaPaths",Mr,{shouldDirty:!1}),Me.current=Mr,ee.current=Mr),Qt.length>0&&(Y.current=!0,setTimeout(()=>{const Zt=V.current,lr=H.current;!fe.current&&!ie.current&&Z.current===null&&Zt.enabled&&Zt.accessToken&&lr?(le.current!==null&&(window.clearTimeout(le.current),le.current=null),lr(),Y.current=!1):G(ir=>ir+1)},2100))}).finally(()=>{setTimeout(()=>{ie.current=!1},500)})},[Ie,v,ot]),g.useEffect(()=>{!b||re.current||ie.current||!ne||ne.length===0||q&&q.length>0||(M.current=!0,b(ne).then(({types:bt})=>{bt.length>0&&ot("workItemTypes",bt,{shouldDirty:!1})}).finally(()=>{setTimeout(()=>{M.current=!1},300)}))},[ne,q,b,ot]),g.useEffect(()=>{if(ne&&ne.length>0&&s.length>0){const qe=ne.filter(bt=>s.includes(bt));qe.length!==ne.length&&ot("states",qe)}},[s,ne,ot]),g.useEffect(()=>{if(Ne&&Ne.length>0&&a.length>0){const qe=Ne.filter(bt=>a.includes(bt));qe.length!==Ne.length&&(ot("areaPaths",qe),qe.length===0&&ot("tags",[]))}},[a,Ne,ot]),g.useEffect(()=>{if(Ie&&Ie.length>0&&l.length>0){const qe=Ie.filter(bt=>l.includes(bt));qe.length!==Ie.length&&ot("tags",qe)}},[l,Ie,ot]);const dt=g.useCallback(async()=>{if(!e.enabled||!e.accessToken||!q||q.length===0){I(null);return}try{$(!0);const qe=q[0],bt=Te(q||[],ne||[],Ne||[],Ie||[],Ce||"",_);let jt="";bt?jt=`SELECT [System.Id] FROM WorkItems WHERE ${bt}`:jt=`SELECT [System.Id] FROM WorkItems WHERE [System.WorkItemType] = '${qe}' AND [System.State] = 'Active'`;const Be=`https://dev.azure.com/${e.organization}/${e.project}/_apis/wit/wiql?api-version=7.0`,He=await fetch(Be,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${e.accessToken}`},body:JSON.stringify({query:jt})});if(!He.ok)throw new Error(`Azure DevOps query failed: ${He.status} ${He.statusText}`);const Ze=await He.json(),ft=Ze.workItems?Ze.workItems.length:0;I(ft)}catch(qe){console.error("[FilterForm] Error fetching feature count:",qe),I(null)}finally{$(!1)}},[e,q,ne,Ne,Ie,Ce,_,Te]);g.useEffect(()=>{V.current=e,H.current=dt},[e,dt]),g.useEffect(()=>{if(le.current!==null&&(window.clearTimeout(le.current),le.current=null),!q||q.length===0){I(null);return}if(Y.current&&q&&q.length>0){const qe=!fe.current&&!ie.current&&Z.current===null,bt=J.current===null||Date.now()-J.current>=2100;if(qe||bt){Y.current=!1;const jt=V.current,Be=H.current;jt.enabled&&jt.accessToken&&Be&&Be();return}return}if(fe.current||ie.current||Z.current!==null){Y.current=!0;return}return e.enabled&&e.accessToken?le.current=window.setTimeout(()=>{dt()},300):I(null),()=>{le.current!==null&&(window.clearTimeout(le.current),le.current=null)}},[q,ne,Ne,Ie,Ce,_,e.enabled,e.accessToken,dt,se]),g.useEffect(()=>{if(d&&!F.current&&u){const qe=u.length;I(qe)}F.current=d||!1},[d,u]),g.useEffect(()=>{u&&u.length>0?I(u.length):u&&u.length===0&&I(0)},[u]),g.useEffect(()=>{const qe=Te(q||[],ne||[],Ne||[],Ie||[],Ce||"",_),bt={...e,workItemType:q&&q.length>0?q[0]:e.workItemType||"Feature",query:qe,states:ne&&ne.length>0?ne:void 0,areaPath:Ne&&Ne.length>0?Ne[0]:void 0,tags:Ie&&Ie.length>0?Ie:void 0},jt=window.setTimeout(()=>{t(bt)},100);return()=>{window.clearTimeout(jt)}},[q,ne,Ne,Ie,Ce,_,Te,t]);const Mt=async qe=>{await r()};return i.jsxs("form",{onSubmit:rt(Mt),className:"bg-gray-50 p-4 rounded-lg border border-gray-200",children:[i.jsxs("div",{className:"flex items-center justify-between mb-4",children:[i.jsxs("h3",{className:"text-lg font-medium text-[#2D4660] flex items-center",children:[i.jsx(yF,{className:"h-5 w-5 mr-2"}),"Filter Work Items"]}),i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("button",{type:"button",onClick:U,className:"text-xs text-[#576C71] hover:text-[#2D4660] font-medium border border-transparent hover:border-[#576C71] rounded-full px-2 py-0.5 transition",children:"Clear All Filters"}),i.jsx("button",{type:"button",onClick:()=>E(!_),className:"text-xs text-[#1E5461] hover:text-[#2D4660] font-medium",children:_?" Hide Advanced WIQL":"Show Advanced WIQL "})]})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-4",children:[i.jsxs("div",{children:[i.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[i.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Work Item Type"}),i.jsx("span",{className:"px-2 py-0.5 rounded-full text-xs font-semibold text-white bg-[#2D4660]",children:j.length})]}),i.jsx(fd,{name:"workItemTypes",control:vt,render:({field:qe})=>i.jsx(pd,{options:j,value:qe.value,onChange:qe.onChange,placeholder:"Select types..."})}),i.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"Click to select multiple types"})]}),i.jsxs("div",{children:[i.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[i.jsx("span",{className:"text-sm font-medium text-gray-700",children:"State (Optional)"}),i.jsx("span",{className:"px-2 py-0.5 rounded-full text-xs font-semibold text-white bg-[#1E5461]",children:(s==null?void 0:s.length)||0})]}),i.jsx(fd,{name:"states",control:vt,render:({field:qe})=>i.jsx(pd,{options:s,value:qe.value,onChange:qe.onChange,placeholder:"Select states...",disabled:s.length===0})}),i.jsx("p",{className:"mt-1 text-xs text-gray-500",children:s.length===0?"Loading states...":"Filtered by work item type"})]}),i.jsxs("div",{children:[i.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[i.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Area Path (Optional)"}),i.jsx("span",{className:"px-2 py-0.5 rounded-full text-xs font-semibold text-white bg-[#576C71]",children:(a==null?void 0:a.length)||0})]}),i.jsx(fd,{name:"areaPaths",control:vt,render:({field:qe})=>i.jsx(pd,{options:a,value:qe.value,onChange:qe.onChange,placeholder:"Select area paths...",searchable:!0,disabled:a.length===0})}),i.jsx("p",{className:"mt-1 text-xs text-gray-500",children:B?"Loading area paths...":a.length===0?"No area paths found for current filters":"Filtered by type & state"})]}),i.jsxs("div",{children:[i.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[i.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Tags (Optional)"}),i.jsx("span",{className:"px-2 py-0.5 rounded-full text-xs font-semibold text-white bg-[#C89212]",children:(l==null?void 0:l.length)||0})]}),i.jsx(fd,{name:"tags",control:vt,render:({field:qe})=>i.jsx(pd,{options:l,value:qe.value,onChange:qe.onChange,placeholder:"Select tags...",searchable:!0,disabled:l.length===0&&!K})}),i.jsx("p",{className:"mt-1 text-xs text-gray-500",children:!q||q.length===0?"Select work item type to see tags":K?"Loading tags...":l.length===0?"No tags found for current filters":"Filtered by type, state & area"})]})]}),_&&i.jsxs("div",{className:"mb-4",children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Advanced WIQL Query (Optional)"}),i.jsx("input",{...Oe("query"),placeholder:"e.g., [System.Priority] = 1",className:"w-full px-3 py-2 border border-gray-300 rounded-md text-sm"}),i.jsxs("p",{className:"mt-1 text-xs text-gray-500",children:["Will be combined with above filters using AND."," ",i.jsx("a",{href:"https://learn.microsoft.com/en-us/azure/devops/boards/queries/wiql-syntax",target:"_blank",rel:"noopener noreferrer",className:"text-[#1E5461] hover:text-[#2D4660]",children:"WIQL syntax reference "})]})]}),i.jsx("div",{className:"flex justify-end",children:i.jsxs(gt,{variant:"gold",type:"submit",disabled:(()=>{const qe=((q==null?void 0:q.length)??0)>0,bt=((ne==null?void 0:ne.length)??0)>0,jt=((Ne==null?void 0:Ne.length)??0)>0,Be=((Ie==null?void 0:Ie.length)??0)>0,He=Ce&&Ce.trim().length>0;return n||A||!(qe||bt||jt||Be||He)})(),className:"flex items-center",children:[n&&i.jsx(Jo,{className:"animate-spin h-4 w-4 mr-2"}),n?"Loading...":(()=>{const qe=C!==null?C:(u==null?void 0:u.length)??null;return qe!==null?`Preview ${qe} Feature${qe!==1?"s":""}`:"Preview Features"})()]})})]})}function RZ({session:e,featureCount:t,onSubmit:r,onCancel:n,onRequestDeleteSession:s,isDeletingSession:a,productName:l,products:u,isLoadingProducts:d,productError:m,onRequestDeleteProduct:f,onProductColorUpdated:p}){const[x,v]=g.useState(null),[b,w]=g.useState(!1),[j,_]=g.useState("#2D4660"),[E,C]=g.useState(null),[I,A]=g.useState(!1);g.useRef(null);const $="2099-12-31",B=de=>de?de.split("T")[0]===$:!1,T=de=>{if(!de||typeof de!="string")return new Date;const Ye=de.split("T")[0].split(" ")[0].split("-");if(Ye.length!==3)return new Date;const Oe=parseInt(Ye[0],10),rt=parseInt(Ye[1],10),Nt=parseInt(Ye[2],10);if(isNaN(Oe)||isNaN(rt)||isNaN(Nt))return new Date;const vt=new Date(Oe,rt-1,Nt,0,0,0,0);return isNaN(vt.getTime())?new Date:vt},K=de=>{if(!de||isNaN(de.getTime()))return new Date().toISOString().split("T")[0];const ee=de.getFullYear(),Ye=String(de.getMonth()+1).padStart(2,"0"),Oe=String(de.getDate()).padStart(2,"0");return`${ee}-${Ye}-${Oe}`},Q=(de,ee)=>{const Ye=de.getFullYear(),Oe=de.getMonth(),rt=de.getDate();return new Date(Ye,Oe,rt+ee,0,0,0,0)},se=g.useMemo(()=>{const de={};return u.forEach(ee=>{ee.id&&ee.name&&(de[ee.id]=ee.name)}),de},[u]),{register:G,handleSubmit:le,watch:F,reset:Y,control:J,setValue:V,formState:{errors:H}}=Ad({defaultValues:{productId:e.productId??e.product_id??"",title:e.title,goal:e.goal,startDate:B(e.startDate)?"":e.startDate.split("T")[0],endDate:B(e.endDate)?"":e.endDate.split("T")[0],useAutoVotes:e.useAutoVotes||!1,votesPerUser:e.votesPerUser}});g.useEffect(()=>{const de=B(e.startDate)?"":e.startDate.split("T")[0],ee=B(e.endDate)?"":e.endDate.split("T")[0];Y({productId:e.productId??e.product_id??"",title:e.title,goal:e.goal,startDate:de,endDate:ee,useAutoVotes:e.useAutoVotes||!1,votesPerUser:e.votesPerUser}),Le.current=de},[e,Y]);const re=e.productName??e.product_name??l??"",ie=e.productId??e.product_id??"";g.useEffect(()=>{if(!u.length)return;if(ie){u.some(Ye=>Ye.id===ie)&&V("productId",ie,{shouldDirty:!1,shouldTouch:!1});return}if(!re)return;const de=u.find(ee=>ee.name.toLowerCase()===re.toLowerCase());de&&V("productId",de.id,{shouldDirty:!1,shouldTouch:!1})},[u,ie,re,V]);const M=F("useAutoVotes"),Z=F("productId"),fe=F("startDate"),ye=F("endDate"),Le=g.useRef(""),je=g.useCallback(async de=>{const ee=fe,Ye=ye;if(de==="startDate"&&!ee){let Oe;if(Z)try{const vt=(await ES(Z)).filter(ot=>ot.id!==e.id);if(vt.length>0){let ot=null;vt.forEach(rr=>{const U=rr.end_date||rr.endDate;if(U&&!B(U)){const q=T(U);(!ot||q>ot)&&(ot=q)}}),ot?Oe=Q(ot,1):Oe=new Date}else Oe=new Date}catch(Nt){console.error("Error calculating dates for product:",Nt),Oe=new Date}else Oe=new Date;const rt=Q(Oe,14);V("startDate",K(Oe),{shouldDirty:!0}),Ye||V("endDate",K(rt),{shouldDirty:!0})}else if(de==="endDate"&&!Ye){let Oe;if(ee)Oe=T(ee);else{if(Z)try{const vt=(await ES(Z)).filter(ot=>ot.id!==e.id);if(vt.length>0){let ot=null;vt.forEach(rr=>{const U=rr.end_date||rr.endDate;if(U&&!B(U)){const q=T(U);(!ot||q>ot)&&(ot=q)}}),ot?Oe=Q(ot,1):Oe=new Date}else Oe=new Date}catch(Nt){console.error("Error calculating dates for product:",Nt),Oe=new Date}else Oe=new Date;V("startDate",K(Oe),{shouldDirty:!0})}const rt=Q(Oe,14);V("endDate",K(rt),{shouldDirty:!0})}},[fe,ye,Z,V]);g.useEffect(()=>{if(fe&&fe!==Le.current&&ye){Le.current=fe;const de=T(fe),ee=Q(de,14);V("endDate",K(ee),{shouldDirty:!0})}},[fe,ye,V]);const Me=g.useMemo(()=>!E||!Z?u:u.map(de=>de.id===Z?{...de,color_hex:E}:de),[u,E,Z]);g.useEffect(()=>{if(!Z)return;u.some(ee=>ee.id===Z)||V("productId","",{shouldDirty:!0,shouldTouch:!0})},[Z,u,V]),g.useEffect(()=>{if(Z&&u.length>0){const de=u.find(ee=>ee.id===Z);if(de){const ee=de.color_hex??null;v(ee),_(ee||"#2D4660"),C(null),w(!1)}}else Z||(v(null),_("#2D4660"),C(null),w(!1))},[Z,u]);const Se=M?Math.max(1,Math.floor(t/2)):F("votesPerUser"),z=async(de,ee=!1)=>{try{r({...de,isDraft:ee})}catch(Ye){throw console.error("ERROR in handleFormSubmit:",Ye),Ye}},ue=async()=>{const de=F();await z(de,!0)};return i.jsxs("form",{onSubmit:le(de=>z(de),de=>{}),children:[i.jsxs("div",{className:"mb-4",children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Product"}),i.jsx("div",{className:"flex items-center gap-2",children:(()=>{const de=Me.find(vt=>vt.id===Z)??null,ee=Z?se[Z]??null:null,Ye=(de==null?void 0:de.name)??ee??re??"No Product",Oe=(de==null?void 0:de.color_hex)||null,rt=de?Ur(de.name,Oe??null):null,Nt=(rt==null?void 0:rt.background)||null;return i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"w-4 h-4 rounded-sm flex-shrink-0",style:{backgroundColor:Nt||"#2D4660"}}),i.jsx("span",{className:"text-gray-900",children:Ye})]})})()})]}),i.jsxs("div",{className:"mb-4",children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Session Title"}),i.jsx("input",{...G("title",{required:"Title is required"}),className:"w-full px-3 py-2 border border-gray-300 rounded-md"}),H.title&&i.jsx("p",{className:"mt-1 text-sm text-red-600",children:H.title.message})]}),i.jsxs("div",{className:"mb-4",children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Goal"}),i.jsx("textarea",{...G("goal",{required:"Goal is required"}),rows:2,className:"w-full px-3 py-2 border border-gray-300 rounded-md"}),H.goal&&i.jsx("p",{className:"mt-1 text-sm text-red-600",children:H.goal.message})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Start Date"}),i.jsx("input",{type:"date",...G("startDate",{required:!B(e.startDate)&&!B(e.endDate)?"Start date is required":!1}),value:F("startDate")||"",onFocus:de=>{F("startDate")||je("startDate")},autoComplete:"off",className:`w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-0 focus:border-[#2d4660] [&::-webkit-calendar-picker-indicator]:cursor-pointer ${H.startDate?"border-red-500":"border-gray-300"}`,style:F("startDate")?{}:{color:"transparent"},onBlur:de=>{de.target.value?de.target.style.color="":de.target.style.color="transparent"}}),H.startDate&&i.jsx("p",{className:"mt-1 text-sm text-red-600",children:H.startDate.message})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"End Date"}),i.jsx("input",{type:"date",...G("endDate",{required:!B(e.startDate)&&!B(e.endDate)?"End date is required":!1}),value:F("endDate")||"",onFocus:de=>{F("endDate")||je("endDate")},autoComplete:"off",className:`w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-0 focus:border-[#2d4660] [&::-webkit-calendar-picker-indicator]:cursor-pointer ${H.endDate?"border-red-500":"border-gray-300"}`,style:F("endDate")?{}:{color:"transparent",position:"relative"},onBlur:de=>{de.target.value?de.target.style.color="":de.target.style.color="transparent"}}),H.endDate&&i.jsx("p",{className:"mt-1 text-sm text-red-600",children:H.endDate.message})]})]}),i.jsxs("div",{className:"mb-4 bg-[#1E5461]/5 border border-[#1E5461]/20 rounded-lg p-4",children:[i.jsxs("div",{className:"flex items-start",children:[i.jsx("input",{type:"checkbox",...G("useAutoVotes"),className:"hidden"}),i.jsx("button",{type:"button",onClick:()=>V("useAutoVotes",!M,{shouldDirty:!0}),className:"flex-shrink-0 cursor-pointer mt-0.5 w-5 h-5 flex items-center justify-center",children:M?i.jsx(Yc,{className:"w-5 h-5 text-green-600"}):i.jsx(Ed,{className:"w-5 h-5 text-gray-400"})}),i.jsxs("div",{className:"ml-3",children:[i.jsx("label",{onClick:()=>V("useAutoVotes",!M,{shouldDirty:!0}),className:"text-sm font-medium text-gray-700 cursor-pointer",children:"Automatically calculate votes per user"}),i.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:["Each user gets half the number of features (minimum 1 vote). Currently: ",Se," votes"]})]})]}),!M&&i.jsxs("div",{className:"mt-3",children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Votes Per User"}),i.jsx("input",{type:"number",min:"1",...G("votesPerUser",{required:M?!1:"Votes per user is required",min:{value:1,message:"Must be at least 1"}}),className:"w-full px-3 py-2 border border-gray-300 rounded-md"}),H.votesPerUser&&i.jsx("p",{className:"mt-1 text-sm text-red-600",children:H.votesPerUser.message})]})]}),i.jsxs("div",{className:"mt-6 flex flex-col gap-3 border-t border-gray-200 pt-4 sm:flex-row sm:items-center sm:justify-between",children:[i.jsxs(gt,{variant:"danger",type:"button",onClick:()=>s(),disabled:a,className:"flex items-center gap-2",children:[i.jsx(ha,{className:"h-4 w-4"}),a?"Deleting...":"Delete Session"]}),i.jsxs("div",{className:"flex w-full justify-end gap-2 sm:w-auto",children:[i.jsx(gt,{variant:"secondary",type:"button",onClick:ue,children:"Save Draft"}),i.jsx(gt,{variant:"primary",type:"button",onClick:async de=>{de.preventDefault(),de.stopPropagation(),F(),await le(ee=>z(ee,!1),ee=>{alert("Please fix form errors: "+JSON.stringify(ee))})()},children:"Save Changes"})]})]}),b&&Z&&(()=>{const de=Me.find(ee=>ee.id===Z);return de?i.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",onClick:()=>{w(!1),v(de.color_hex??null),_(de.color_hex??"#2D4660"),C(null)},children:i.jsx("div",{className:"bg-white rounded-lg shadow-xl px-3 py-2 w-auto mx-4",onClick:ee=>ee.stopPropagation(),children:i.jsxs("div",{className:"flex gap-3 items-stretch",children:[i.jsxs("div",{className:"flex-shrink-0",style:{width:"240px",height:"260px"},children:[i.jsx("input",{id:"native-color-input",type:"color",value:j,onChange:ee=>{_(ee.target.value),v(ee.target.value)},ref:ee=>{ee&&b&&setTimeout(()=>ee.click(),50)},className:"opacity-0 absolute",style:{width:"1px",height:"1px"}}),i.jsx("div",{className:"w-full h-full"})]}),i.jsx("button",{type:"button",onClick:()=>{if(!Z||!j)return;const ee=Me.find(Oe=>Oe.id===Z);if(!ee)return;if((ee.color_hex||null)===j){w(!1);return}C(j),v(j),w(!1)},disabled:I,className:"px-6 rounded-lg text-white font-bold shadow-lg hover:shadow-xl transition-all flex flex-col items-center justify-center gap-3 text-lg flex-shrink-0 disabled:opacity-50 disabled:cursor-not-allowed",style:{backgroundColor:j,height:"260px",minWidth:"100px"},children:I?i.jsx(Jo,{className:"h-8 w-8 animate-spin"}):i.jsxs(i.Fragment,{children:[i.jsx(kr,{className:"h-8 w-8"}),i.jsxs("div",{className:"text-center leading-tight",children:[i.jsx("div",{children:"Looks"}),i.jsx("div",{children:"Good"})]})]})})]})})}):null})()]})}function MZ({features:e,onAddFeature:t,onUpdateFeature:r,onDeleteFeature:n,onShowResults:s,onRequestDeleteSession:a,isDeletingSession:l,showAddForm:u,setShowAddForm:d,editingFeature:m,setEditingFeature:f,onLogout:p,onShowVoterView:x,votingSession:v,azureDevOpsConfig:b,onUpdateAzureDevOpsConfig:w,onPreviewAzureDevOpsFeatures:j,onDisconnectAzureDevOps:_,isFetchingAzureDevOps:E,azureFetchError:C,onInitiateOAuth:I,availableStates:A,availableAreaPaths:$,availableTags:B,previewFeatures:T,showPreviewModal:K,setShowPreviewModal:Q,onConfirmSync:se,onReplaceAll:G,onUpdateVotingSession:le,onFetchStatesForType:F,onFetchAreaPathsForTypeAndState:Y,onFetchTagsForTypeStateAndAreaPath:J,onFetchTypesAndStatesForAreaPath:V,onFetchTypesAndStatesForTags:H,onFetchTypesAndAreaPathsForStates:re,suggestedFeatures:ie,otherSessions:M,onPromoteSuggestion:Z,onMoveSuggestion:fe,onEditSuggestion:ye,onDeleteSuggestion:Le,adminPerspective:je="session",projectOptions:Me}){const Se=ri(),{currentUser:z,currentSession:ue,setCurrentSession:de}=Ta(),[ee,Ye]=g.useState(()=>b.project?[b.project]:Me[0]?[Me[0]]:[]),[Oe,rt]=g.useState(0);g.useEffect(()=>{b.project?Ye([b.project]):Me.length>0?Ye([Me[0]]):Ye([])},[b.project,Me]);const[Nt,vt]=g.useState(!1),[ot,rr]=g.useState(!1),[U,q]=g.useState(!1),[ne,Ne]=g.useState(!1),Ie=g.useRef(null),[Ce,Te]=g.useState(!1),[dt,Mt]=g.useState(!1),[qe,bt]=g.useState(!1),[jt,Be]=g.useState(0),[He,Ze]=g.useState(0),ft=g.useRef(null),[nt,Kt]=g.useState(null),[dr,Pr]=g.useState(!1),[tt,Bt]=g.useState(null),[qt,Wt]=g.useState(null),[Qt,sr]=g.useState(""),[Mr,Zt]=g.useState(null),[lr,mr]=g.useState(!1),[ir,qn]=g.useState(null),[Vt,ls]=g.useState({title:"",summary:"",whatWouldItDo:"",howWouldItWork:""}),[qr,vr]=g.useState([]),[cr,Hr]=g.useState(null),[Kr,Hn]=g.useState(!1),[jr,Ir]=g.useState(null),[In,Kn]=g.useState(!1),[Vi,sn]=g.useState(null),[bs,Us]=g.useState(!1),[_r,fn]=g.useState([]),[Cr,nr]=g.useState(!1),[ur,Gr]=g.useState([]),[ws,Tn]=g.useState(!1),[ae,_e]=g.useState(null),[$e,ze]=g.useState(null),[Xe,Fe]=g.useState(null),[Yt,Dt]=g.useState(""),[$t,Ee]=g.useState(null),[Je,Jt]=g.useState(!1),[Xt,yt]=g.useState(!1),[br,an]=g.useState("#2D4660"),[cs,ar]=g.useState(!1),[en,xr]=g.useState(!1),qi=g.useMemo(()=>{const L={};return ur.forEach(k=>{k.id&&k.name&&(L[k.id]=k.name)}),L},[ur]),Ft=g.useMemo(()=>{const L={};return ur.forEach(k=>{k.id&&k.color_hex&&(L[k.id]=k.color_hex)}),L},[ur]),Bs=g.useMemo(()=>Ar({...v,product_id:v.product_id??(ue==null?void 0:ue.product_id)??v.productId??null,product_name:null},qi),[v,ue,qi]),si=g.useMemo(()=>{const L=v.product_id??v.productId??null;return L?Ft[L]??null:null},[v,Ft]),hn=g.useMemo(()=>Ur(Bs,si),[Bs,si]),Hi=g.useRef(null);g.useEffect(()=>{(async()=>{if(!z)return;const k=await Ui(z.id);Mt(k);const{data:R}=await Pe.from("session_admins").select("session_id").eq("user_id",z.id).limit(1);bt(R&&R.length>0)})()},[z]);const Ki=g.useCallback(async()=>{const L=(ue==null?void 0:ue.id)||(v==null?void 0:v.id);if(!L){Be(0),Ze(0);return}try{const[k,R]=await Promise.all([qd(L).catch(he=>(console.error("[AdminDashboard] Error loading admins:",he),[])),Wh(L).catch(he=>(console.error("[AdminDashboard] Error loading stakeholders:",he),[]))]);Be(k.length),Ze(R.length)}catch(k){console.error("[AdminDashboard] Error loading admin/stakeholder counts:",k),Be(0),Ze(0)}},[ue==null?void 0:ue.id,v]);g.useEffect(()=>{Ki()},[Ki]),g.useEffect(()=>{const L=()=>{Ki()};return window.addEventListener("focus",L),()=>window.removeEventListener("focus",L)},[Ki]),g.useEffect(()=>{const L=(z==null?void 0:z.tenant_id)??(z==null?void 0:z.tenantId)??null;if(!L){Hi.current=null,Gr([]),_e(null);return}if(Hi.current===L)return;let k=!1;return(async()=>{Tn(!0),_e(null);try{const he=await Ga(L);if(k)return;Gr(he),Hi.current=L}catch(he){if(k)return;console.error("Error loading products for admin dashboard:",he),eo!=null&&eo(he)?_e("Products are not configured yet. Please create the `products` table in Supabase."):_e("Unable to load products. Please try again."),Gr([]),Hi.current=null}finally{k||Tn(!1)}})(),()=>{k=!0}},[z==null?void 0:z.tenant_id,z==null?void 0:z.tenantId]);const js=g.useCallback(async()=>{if($e){ar(!0);try{await _E($e.id),Gr(L=>L.filter(k=>k.id!==$e.id)),ze(null)}catch(L){console.error("Error deleting product from admin dashboard:",L),_e("Failed to delete product. Please try again.")}finally{ar(!1)}}},[$e]),ii=g.useCallback(L=>{const k=L.filter(R=>R==null?void 0:R.trim()).map(R=>R.trim());if(Ye(k),k.length>0&&k[0]!==(b.project||"")){const R={...b,project:k[0]};w(R)}rt(R=>R+1)},[b,w]),{register:Gn,handleSubmit:tn,reset:us}=Ad({defaultValues:{reason:"",details:""}}),{control:Ss,handleSubmit:Fr,reset:mn,register:on,formState:{errors:Gi}}=Ad({defaultValues:{reason:"",details:""}}),Ps="2099-12-31",Os=L=>L?L.split("T")[0]===Ps:!1,Yi=L=>{if(!L.is_active){const k=!L.title||L.title==="Untitled Session"||L.title.trim()==="",R=!L.goal||L.goal.trim()==="";return k||R}return!1},Is=(L=>{if(Yi(L))return{text:"Draft",color:"text-yellow-900 bg-yellow-200",icon:Gh};const k=new Date,R=L.startDate||L.start_date,he=L.endDate||L.end_date,me=new Date(R),ve=new Date(he);return k<me?{text:"Upcoming",color:"text-yellow-600 bg-yellow-50",icon:Qm}:k>ve?{text:"Closed",color:"text-gray-600 bg-gray-100",icon:or}:{text:"Active",color:"text-[#1E6154] bg-[#1E6154]/10",icon:kr}})(v),Ra=Is.icon,il=i.jsxs("span",{className:`inline-flex items-center ${Is.text==="Active"?"px-3 py-1 text-sm":"px-2 py-0.5 text-xs"} rounded-full font-medium ${Is.color}`,children:[i.jsx(Ra,{className:`${Is.text==="Active"?"h-4 w-4":"h-3 w-3"} mr-1`}),Is.text]}),ln=g.useMemo(()=>{const L=R=>{const he=R.type==="reopen",me=R.createdAt||null,ve=R.actorName||"Admin",P=me?` ${aa(me)}`:"";return{id:R.id,type:R.type,reason:R.reason,details:R.details??null,title:he?`Reopened${P} by ${ve}`:`Ended early${P} by ${ve}`,description:`${R.reason}${R.details?": "+R.details:""}`,iconBgClass:he?"bg-[#1E5461]/10":"bg-[#C89212]/10",iconBorderClass:he?"border-[#1E5461]/20":"border-[#C89212]/20",iconColorClass:he?"text-[#1E5461]":"text-[#C89212]",textColorClass:he?"text-[#1E5461]":"text-[#6A4234]"}};if(_r.length>0)return _r.map(R=>L(R));const k=[];return v.reopenReason&&k.push({id:"fallback-reopen",sessionId:(ue==null?void 0:ue.id)||"",type:"reopen",reason:v.reopenReason,details:v.reopenDetails??null,actorName:v.reopenedBy||"Admin",actorId:null,createdAt:v.reopenedAt||v.endDate}),v.endedEarlyReason&&k.push({id:"fallback-ended-early",sessionId:(ue==null?void 0:ue.id)||"",type:"ended-early",reason:v.endedEarlyReason,details:v.endedEarlyDetails??null,actorName:v.endedEarlyBy||"Admin",actorId:null,createdAt:v.originalEndDate||v.endDate}),k.map(R=>L(R))},[_r,v.reopenReason,v.reopenDetails,v.reopenedAt,v.reopenedBy,v.endedEarlyReason,v.endedEarlyDetails,v.originalEndDate,v.endDate,v.endedEarlyBy,ue==null?void 0:ue.id]);g.useEffect(()=>{ln.length<=2&&nr(!1)},[ln.length]);const Ws=g.useCallback(async()=>{if(!(ue!=null&&ue.id)){fn([]);return}try{const L=await j$(ue.id);fn(L)}catch(L){console.error("Error loading session status notes:",L)}},[ue==null?void 0:ue.id]);g.useEffect(()=>{Ws()},[Ws]);const Ts=g.useCallback(L=>{L.stopPropagation(),ue&&de(ue),Se("/manage-admins")},[ue,de,Se]),ki=g.useCallback(L=>{L.stopPropagation(),ue&&de(ue),Se("/manage-stakeholders")},[ue,de,Se]),jo=g.useCallback(async L=>{if(ue!=null&&ue.id)try{const k=await S$({session_id:ue.id,type:L.type,reason:L.reason,details:L.details??null,actor_id:L.actorId??null,actor_name:L.actorName||"Admin"});fn(R=>{const he=R.findIndex(me=>me.id===k.id);if(he!==-1){const me=[...R];return me[he]=k,me}return[k,...R]})}catch(k){console.error("Error logging session status note:",k)}},[ue==null?void 0:ue.id]);g.useEffect(()=>{ir&&(ls({title:ir.title,summary:ir.summary??"",whatWouldItDo:ir.whatWouldItDo??"",howWouldItWork:ir.howWouldItWork??""}),vr(ir.attachment_urls?[...ir.attachment_urls]:[]),Hr(null))},[ir]),g.useEffect(()=>{qt&&M.length>0?sr(M[0].id):sr(""),Zt(null)},[qt,M]);const al=L=>{const k=L.isDraft||!1,R="2099-12-31",he=L.startDate&&L.startDate.trim()?L.startDate:R,me=L.endDate&&L.endDate.trim()?L.endDate:R,ve=L.productId&&L.productId.trim()!==""?L.productId:null,P=ve&&ur.find(X=>X.id===ve)||null,D={...v,title:L.title.trim()||"Untitled Session",goal:L.goal.trim()||"",votesPerUser:L.useAutoVotes?Math.max(1,Math.floor(e.length/2)):Number(L.votesPerUser),useAutoVotes:L.useAutoVotes,startDate:new Date(he).toISOString(),endDate:new Date(me+"T23:59:59").toISOString(),isActive:k?!1:v.isActive,product_id:(P==null?void 0:P.id)??null,product_name:null};le(D),vt(!1)},Ma=L=>{var he,me;const k=new Date().toISOString(),R={...v,originalEndDate:v.endDate,endDate:k,isActive:!1,endedEarlyBy:(z==null?void 0:z.name)||"Admin",endedEarlyReason:L.reason,endedEarlyDetails:(he=L.details)!=null&&he.trim()?L.details.trim():null,reopenReason:null,reopenDetails:null,reopenedBy:null,reopenedAt:null};le(R),jo({type:"ended-early",reason:L.reason,details:(me=L.details)!=null&&me.trim()?L.details.trim():null,actorName:(z==null?void 0:z.name)||"Admin",actorId:(z==null?void 0:z.id)??null}),rr(!1),us()},Ji=L=>{var he,me;const k=new Date;k.setDate(k.getDate()+7);const R={...v,endDate:k.toISOString(),isActive:!0,originalEndDate:null,endedEarlyBy:null,endedEarlyReason:null,endedEarlyDetails:null,reopenReason:L.reason,reopenDetails:(he=L.details)!=null&&he.trim()?L.details.trim():null,reopenedBy:(z==null?void 0:z.name)||"Admin",reopenedAt:new Date().toISOString()};le(R),jo({type:"reopen",reason:L.reason,details:(me=L.details)!=null&&me.trim()?L.details.trim():null,actorName:(z==null?void 0:z.name)||"Admin",actorId:(z==null?void 0:z.id)??null}),q(!1),mn()},pn=async(L,k)=>{const R={...b,organization:L,project:k};w(R),I()},ds=L=>{qn(L)},wr=async()=>{if(!ir)return;const L=Vt.title.trim();if(!L){Hr("Title is required.");return}Hn(!0),Hr(null);try{await ye(ir.id,{title:L,summary:Vt.summary.trim()?Vt.summary.trim():null,whatWouldItDo:Vt.whatWouldItDo.trim()?Vt.whatWouldItDo.trim():null,howWouldItWork:Vt.howWouldItWork.trim()?Vt.howWouldItWork.trim():null,attachment_urls:qr.length>0?qr:null}),qn(null),vr([])}catch(k){console.error("Error updating suggestion:",k),Hr("Failed to update the suggestion. Please try again.")}finally{Hn(!1)}},Xi=async()=>{if(qt){if(!Qt){Zt("Please select a session.");return}try{if(!await qv(Qt)){Zt("The selected session no longer exists. Please refresh and try again.");return}}catch{Zt("The selected session no longer exists. Please refresh and try again.");return}mr(!0),Zt(null);try{await fe(qt.id,Qt),Wt(null)}catch(L){console.error("Error moving suggestion:",L),Zt("Failed to move the suggestion. Please try again.")}finally{mr(!1)}}},Yn=async()=>{if(nt){Pr(!0),Bt(null);try{await Z(nt.id),Kt(null)}catch(L){console.error("Error promoting suggestion:",L),Bt("Failed to move the suggestion into the current session.")}finally{Pr(!1)}}},Ni=async()=>{if(jr){Kn(!0),sn(null);try{await Le(jr.id),Ir(null)}catch(L){console.error("Error deleting suggestion:",L),sn("Failed to delete the suggestion. Please try again.")}finally{Kn(!1)}}},_i=g.useCallback(()=>{vt(!1),a()},[a]);return g.useEffect(()=>{if(!ne)return;const L=k=>{Ie.current&&!Ie.current.contains(k.target)&&Ne(!1)};return document.addEventListener("mousedown",L),document.addEventListener("touchstart",L,{passive:!0}),()=>{document.removeEventListener("mousedown",L),document.removeEventListener("touchstart",L)}},[ne]),g.useEffect(()=>{if(!Ce)return;const L=k=>{ft.current&&!ft.current.contains(k.target)&&Te(!1)};return document.addEventListener("mousedown",L),document.addEventListener("touchstart",L,{passive:!0}),()=>{document.removeEventListener("mousedown",L),document.removeEventListener("touchstart",L)}},[Ce]),i.jsxs("div",{className:"container mx-auto p-4 max-w-6xl min-h-screen pb-8",children:[i.jsx("div",{className:"hidden md:flex md:justify-center mb-2",children:i.jsx("img",{src:ji,alt:"New Millennium Building Systems Logo",className:"-mt-4 cursor-pointer hover:opacity-80 transition-opacity",style:{height:"96px",width:"auto"},onClick:()=>Se("/sessions")})}),i.jsxs("div",{className:"flex justify-between items-center mb-6",children:[i.jsxs("div",{className:"flex items-center",children:[i.jsx($p,{src:$a,alt:"New Millennium Building Systems Logo",className:"mr-4 md:hidden",style:{width:"40px",height:"40px",objectFit:"contain"}}),i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsx("h1",{className:"text-2xl font-bold text-[#2D4660] md:text-3xl",children:"Admin Dashboard"}),z&&i.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:[z.name,dt&&i.jsxs("span",{className:"ml-2 inline-flex items-center px-2.5 py-1 rounded text-xs font-medium bg-[#C89212] text-white",children:[i.jsx(En,{className:"h-3.5 w-3.5 mr-1"}),"System Admin"]}),!dt&&qe&&i.jsxs("span",{className:"ml-2 inline-flex items-center px-2.5 py-1 rounded text-xs font-medium bg-[#576C71] text-white",children:[i.jsx(Xr,{className:"h-3.5 w-3.5 mr-1"}),"Session Admin"]})]})]})]}),i.jsxs("div",{ref:Ie,className:"relative z-40",children:[i.jsxs("div",{className:"hidden md:flex space-x-2",children:[v.isActive&&i.jsxs("button",{onClick:x,className:"flex items-center px-4 py-2 bg-[#576C71] text-white rounded-lg hover:bg-[#1E5461] transition-colors",children:[i.jsx(es,{className:"mr-2 h-[26px] w-[26px]"}),"Vote!"]}),i.jsxs("button",{onClick:()=>Se(je==="system"||qe?"/users":"/users?filter=stakeholder"),className:"flex items-center px-4 py-2 bg-[#2D4660] text-white rounded-lg hover:bg-[#173B65] transition-colors",children:[je==="system"||qe?i.jsx(Xr,{className:"mr-2 h-4 w-4"}):i.jsx(Ln,{className:"mr-2 h-4 w-4"}),je==="system"||qe?"User Management":"Stakeholders"]}),i.jsxs("button",{onClick:()=>Se("/sessions"),className:"flex items-center px-4 py-2 bg-[#4f6d8e] text-white rounded-lg hover:bg-[#3d5670] transition-colors",children:[i.jsx(Ln,{className:"mr-2 h-4 w-4"}),"All Sessions"]}),i.jsxs("button",{onClick:p,className:"flex items-center px-4 py-2 bg-[#576C71] text-white rounded-lg hover:bg-[#1E5461] transition-colors",children:[i.jsx(ss,{className:"mr-2 h-4 w-4"}),"Logout"]})]}),i.jsx("div",{className:"flex md:hidden",children:i.jsx("button",{onClick:()=>Ne(!ne),className:"p-2 rounded-md border border-gray-200 bg-white shadow-sm","aria-label":"Open menu",children:i.jsx(pi,{className:"h-5 w-5 text-gray-700"})})}),ne&&i.jsx("div",{className:"absolute right-0 mt-2 w-56 bg-white border border-gray-200 rounded-lg shadow-lg md:hidden z-50",children:i.jsxs("div",{className:"py-1",children:[v.isActive&&i.jsxs("button",{onClick:()=>{Ne(!1),x()},className:"w-full px-3 py-2 flex items-center text-left hover:bg-gray-50",children:[i.jsx(es,{className:"h-[26px] w-[26px] mr-2 text-gray-700"}),"Vote!"]}),i.jsxs("button",{onClick:()=>{Ne(!1),Se(je==="system"||qe?"/users":"/users?filter=stakeholder")},className:"w-full px-3 py-2 flex items-center text-left hover:bg-gray-50",children:[je==="system"||qe?i.jsx(Xr,{className:"h-4 w-4 mr-2 text-gray-700"}):i.jsx(Ln,{className:"h-4 w-4 mr-2 text-gray-700"}),je==="system"||qe?"User Management":"Stakeholders"]}),i.jsxs("button",{onClick:()=>{Ne(!1),Se("/sessions")},className:"w-full px-3 py-2 flex items-center text-left hover:bg-gray-50",children:[i.jsx(Ln,{className:"h-4 w-4 mr-2 text-gray-700"}),"All Sessions"]}),!(v.isActive===!1&&!Na(v.endDate))&&i.jsxs("button",{onClick:()=>{Ne(!1),s()},className:"w-full px-3 py-2 flex items-center text-left hover:bg-gray-50",children:[i.jsx(Ph,{className:"h-4 w-4 mr-2 text-gray-700"}),Na(v.endDate)?"Final Results":"Current Results"]}),i.jsxs("button",{onClick:()=>{Ne(!1),vt(!0)},className:"w-full px-3 py-2 flex items-center text-left hover:bg-gray-50",children:[i.jsx(ns,{className:"h-4 w-4 mr-2 text-gray-700"}),"Edit Session"]}),i.jsxs("button",{onClick:()=>{Ne(!1),p()},className:"w-full px-3 py-2 flex items-center text-left hover:bg-gray-50",children:[i.jsx(ss,{className:"h-4 w-4 mr-2 text-gray-700"}),"Logout"]})]})})]})]}),i.jsxs("div",{className:"relative bg-white rounded-lg shadow-md p-4 mb-6",style:{marginTop:Bs?"3.5rem":"0"},children:[Bs&&i.jsxs("div",{className:"absolute left-0 px-4 py-1 pr-8 rounded-t-md border-b-0 text-sm font-semibold shadow-sm z-20 flex items-center gap-2 whitespace-nowrap group cursor-pointer",style:{top:"0",left:"-1px",transform:"translateY(-100%)",backgroundColor:hn.background,color:hn.text,borderColor:hn.border,borderWidth:"1px",borderBottomWidth:"0",boxShadow:"0 4px 8px rgba(16,24,40,0.06)",borderTopLeftRadius:"0.9rem",borderTopRightRadius:"0.9rem",overflow:"visible"},onMouseEnter:()=>{(v.product_id||v.productId)&&xr(!0)},onMouseLeave:()=>xr(!1),onClick:L=>{const k=v.product_id||v.productId;if(!k)return;L.stopPropagation(),L.preventDefault();const R=ur.find(he=>he.id===k);R&&(Fe(R),Dt(R.name||""),Ee(R.color_hex||null),an(R.color_hex||"#2D4660"))},children:[i.jsx(Tx,{className:"h-4 w-4 flex-shrink-0"}),i.jsx("span",{className:"overflow-hidden text-ellipsis flex-1 min-w-0",children:Bs}),(v.product_id||v.productId)&&en&&i.jsx("div",{className:"absolute right-2 flex-shrink-0 opacity-80",children:i.jsx(Gh,{className:"h-4 w-4",style:{color:hn.text}})})]}),i.jsxs("div",{className:"pt-1",children:[i.jsxs("div",{className:"flex items-center justify-between mb-4",children:[i.jsxs("h2",{className:"text-xl font-semibold text-[#2D4660]",children:["Current Session: ",i.jsx("span",{className:"text-[#1E5461]",children:v.title})]}),i.jsxs("div",{ref:ft,className:"relative z-40",children:[i.jsxs("div",{className:"hidden md:flex space-x-2",children:[i.jsxs("button",{onClick:Ts,className:"relative inline-flex items-center px-4 py-2 rounded-lg text-sm font-medium transition-colors bg-[#576C71] text-white hover:bg-[#1E5461]",children:[i.jsx(Xr,{className:"h-4 w-4 mr-2"}),"Admins",i.jsx("span",{className:"absolute -top-1 -right-1 bg-red-500 text-white text-[10px] font-bold rounded-full min-w-[18px] h-[18px] flex items-center justify-center px-1 z-10",children:jt})]}),i.jsxs("button",{onClick:ki,className:"relative inline-flex items-center px-4 py-2 rounded-lg text-sm font-medium transition-colors bg-[#1E5461] text-white hover:bg-[#576C71]",children:[i.jsx(Ln,{className:"h-4 w-4 mr-2"}),"Stakeholders",i.jsx("span",{className:"absolute -top-1 -right-1 bg-red-500 text-white text-[10px] font-bold rounded-full min-w-[18px] h-[18px] flex items-center justify-center px-1 z-10",children:He})]}),!(v.isActive===!1&&!Na(v.endDate))&&i.jsxs(gt,{variant:"gold",onClick:s,className:"flex items-center",children:[i.jsx(Ph,{className:"h-4 w-4 mr-2"}),Na(v.endDate)?"Final Results":"Current Results"]}),i.jsxs(gt,{variant:"primary",onClick:()=>vt(!0),className:"flex items-center",children:[i.jsx(ns,{className:"h-4 w-4 mr-2"}),"Edit Session"]})]}),i.jsx("div",{className:"flex md:hidden",children:i.jsx("button",{onClick:()=>Te(!Ce),className:"p-2 rounded-md border border-gray-200 bg-white shadow-sm","aria-label":"Open session actions menu",children:i.jsx(pi,{className:"h-5 w-5 text-gray-700"})})}),Ce&&i.jsx("div",{className:"absolute right-0 mt-2 w-56 bg-white border border-gray-200 rounded-lg shadow-lg md:hidden z-50",children:i.jsxs("div",{className:"py-1",children:[i.jsxs("button",{onClick:L=>{Te(!1),Ts(L)},className:"relative w-full px-3 py-2 flex items-center text-left hover:bg-gray-50",children:[i.jsx(Xr,{className:"h-4 w-4 mr-2 text-gray-700"}),"Admins",i.jsx("span",{className:"absolute right-3 top-1/2 -translate-y-1/2 bg-red-500 text-white text-[10px] font-bold rounded-full min-w-[18px] h-[18px] flex items-center justify-center px-1 z-10",children:jt})]}),i.jsxs("button",{onClick:L=>{Te(!1),ki(L)},className:"relative w-full px-3 py-2 flex items-center text-left hover:bg-gray-50",children:[i.jsx(Ln,{className:"h-4 w-4 mr-2 text-gray-700"}),"Stakeholders",i.jsx("span",{className:"absolute right-3 top-1/2 -translate-y-1/2 bg-red-500 text-white text-[10px] font-bold rounded-full min-w-[18px] h-[18px] flex items-center justify-center px-1 z-10",children:He})]}),!(v.isActive===!1&&!Na(v.endDate))&&i.jsxs("button",{onClick:()=>{Te(!1),s()},className:"w-full px-3 py-2 flex items-center text-left hover:bg-gray-50",children:[i.jsx(Ph,{className:"h-4 w-4 mr-2 text-gray-700"}),Na(v.endDate)?"Final Results":"Current Results"]}),i.jsxs("button",{onClick:()=>{Te(!1),vt(!0)},className:"w-full px-3 py-2 flex items-center text-left hover:bg-gray-50",children:[i.jsx(ns,{className:"h-4 w-4 mr-2 text-gray-700"}),"Edit Session"]})]})})]})]}),ws&&i.jsx("p",{className:"text-xs text-gray-500 mb-4",children:"Loading products"}),ae&&i.jsx("p",{className:"text-xs text-[#591D0F] mb-4",children:ae}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4",children:[i.jsxs("div",{children:[i.jsx("h3",{className:"text-sm font-medium text-gray-700 mb-1",children:"Voting Period"}),Os(v.startDate)||Os(v.endDate)?i.jsx("p",{className:"text-gray-400 italic",children:"Dates not set"}):i.jsxs("p",{className:`text-[#2D4660] font-medium ${v.originalEndDate?"line-through text-gray-400":""}`,children:[aa(v.startDate)," - ",aa(v.originalEndDate||v.endDate)]}),v.originalEndDate&&v.endedEarlyBy&&i.jsxs("div",{className:"flex items-center mt-1 text-xs text-[#591D0F]",children:[i.jsxs("span",{children:["Ended Early by ",v.endedEarlyBy]}),v.endedEarlyReason&&i.jsxs("div",{className:"group relative ml-1",children:[i.jsx(or,{className:"h-3 w-3 cursor-help"}),i.jsxs("div",{className:"absolute bottom-full left-1/2 -translate-x-1/2 mb-2 px-3 py-2 bg-gray-900 text-white text-xs rounded-lg opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-200 whitespace-nowrap z-10 pointer-events-none max-w-xs",children:[i.jsxs("div",{className:"font-semibold mb-1",children:["Reason: ",v.endedEarlyReason]}),v.endedEarlyDetails&&i.jsx("div",{className:"whitespace-normal",children:v.endedEarlyDetails}),i.jsx("div",{className:"absolute top-full left-1/2 -translate-x-1/2 -mt-1 border-4 border-transparent border-t-gray-900"})]})]})]})]}),i.jsxs("div",{children:[i.jsx("h3",{className:"text-sm font-medium text-gray-700 mb-1",children:"Votes Per User"}),i.jsx("p",{className:"text-[#2D4660] font-medium",children:v.useAutoVotes?`${Math.max(1,Math.floor(e.length/2))} (Auto: ${e.length} features  2)`:v.votesPerUser})]}),i.jsxs("div",{children:[i.jsx("h3",{className:"text-sm font-medium text-gray-700 mb-1",children:"Status"}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("div",{className:"flex items-center",children:il}),(v.isActive||Na(v.endDate))&&i.jsx(gt,{variant:v.isActive?"danger":"primary",onClick:()=>{v.isActive?rr(!0):(mn(),q(!0))},className:"text-xs px-2 py-1 ml-2",children:v.isActive?"End Early":"Reopen"})]})]})]}),v.goal&&v.goal.trim()||ln.length>0?i.jsx("div",{className:"pt-3",children:i.jsxs("div",{className:"flex flex-col md:flex-row md:items-start gap-4",children:[v.goal&&v.goal.trim()&&i.jsxs("div",{className:"flex-[2] relative overflow-hidden rounded-2xl border border-[#C89212]/30 bg-gradient-to-r from-[#FFF6E3] via-[#FFF9ED] to-white shadow-sm p-5 md:p-6",children:[i.jsx("span",{className:"pointer-events-none absolute -top-10 left-4 h-32 w-32 rounded-full bg-[#C89212]/25 blur-3xl"}),i.jsx("span",{className:"pointer-events-none absolute -bottom-16 right-6 h-40 w-40 rounded-full bg-[#F4C66C]/20 blur-3xl"}),i.jsx("span",{className:"pointer-events-none absolute top-6 right-10 text-[#F4B400] text-xl animate-ping",children:""}),i.jsx("span",{className:"pointer-events-none absolute bottom-8 left-10 text-[#C89212] text-lg animate-pulse",children:""}),i.jsxs("div",{className:"relative flex items-start gap-5",children:[i.jsxs("div",{className:"relative",children:[i.jsx("div",{className:"h-16 w-16 md:h-20 md:w-20 rounded-full bg-white shadow-lg shadow-[#C89212]/30 border border-[#C89212]/40 flex items-center justify-center text-[#C89212]",children:i.jsx(Jv,{className:"h-8 w-8 md:h-10 md:w-10"})}),i.jsx("span",{className:"pointer-events-none absolute -top-3 -left-2 text-[#C89212] text-base animate-ping",children:""}),i.jsx("span",{className:"pointer-events-none absolute bottom-0 -right-3 text-[#F5D79E] text-xl animate-pulse",children:""})]}),i.jsxs("div",{children:[i.jsx("p",{className:"text-xs font-semibold uppercase tracking-[0.2em] text-[#C89212]/80 mb-1",children:"Session Goal"}),i.jsx("h3",{className:"text-lg md:text-xl font-semibold text-[#2D4660] leading-relaxed",children:v.goal})]})]})]}),ln.length>0&&i.jsxs("div",{className:"flex-[1] rounded-xl border border-white/70 bg-white/80 backdrop-blur-sm shadow-inner p-4",children:[(ln.length===1||ln.length>2)&&i.jsxs("div",{className:"flex items-center justify-between mb-3",children:[ln.length===1&&i.jsx("h3",{className:"text-sm font-semibold text-[#2D4660]",children:"Status Notes"}),ln.length>2&&i.jsxs("span",{className:"inline-flex items-center justify-between text-xs text-[#1E5461] w-[90px] ml-auto",children:[i.jsx("span",{className:"flex items-center justify-center w-4 h-4 border border-current rounded",children:Cr?i.jsx(Uc,{className:"h-2.5 w-2.5"}):i.jsx(vn,{className:"h-2.5 w-2.5"})}),i.jsx("button",{type:"button",onClick:()=>nr(L=>!L),className:"ml-1 hover:text-[#173B65] transition-colors text-left flex-1",children:Cr?"Show Less":"Show More"})]})]}),i.jsx("div",{className:"space-y-3",children:ln.slice(0,Cr?ln.length:2).map(L=>{const k=L.type==="reopen"?Jo:or;return i.jsxs("div",{className:`flex items-start gap-3 text-sm ${L.textColorClass}`,children:[i.jsx("div",{className:`mt-0.5 flex items-center justify-center w-8 h-8 ${L.iconBgClass} ${L.iconBorderClass} border rounded-lg`,children:i.jsx(k,{className:`h-3.5 w-3.5 ${L.iconColorClass}`})}),i.jsxs("div",{children:[i.jsx("p",{className:"font-semibold text-gray-800",children:L.title}),i.jsx("p",{className:"text-xs text-gray-600 leading-relaxed",children:L.description})]})]},L.id)})}),ln.length>2&&!Cr&&i.jsx("p",{className:"text-xs text-gray-500 mt-3",children:'Showing newest notes. Select "Show More" to view all updates.'})]})]})}):null]})]}),i.jsxs("div",{className:"relative bg-white rounded-lg shadow-md p-4 mb-6",children:[i.jsxs("div",{className:"flex items-center justify-between mb-0",children:[i.jsxs("div",{className:"flex items-center pb-[20px]",children:[i.jsx("img",{src:MC,alt:"Azure DevOps logo",className:"h-5 w-5 mr-2"}),i.jsx("h2",{className:"text-xl font-semibold text-[#2D4660]",children:"Azure DevOps Integration"})]}),b.enabled&&i.jsxs("button",{onClick:_,className:"text-sm text-[#591D0F] hover:text-[#6A4234] font-medium flex items-center flex-shrink-0 pr-[10px] mb-[-15px]",children:[i.jsx(xs,{className:"h-4 w-4 mr-1"}),"Disconnect"]})]}),b.enabled?i.jsxs("div",{className:"space-y-4",children:[i.jsx("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4",children:i.jsxs("div",{className:"flex flex-col",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(kr,{className:"h-5 w-5 text-green-600 flex-shrink-0"}),i.jsx("span",{className:"font-medium text-green-900",children:"Connected to Azure DevOps"}),i.jsx("span",{className:"text-green-500",children:""}),i.jsxs("span",{className:"text-sm text-green-700 whitespace-nowrap",children:[i.jsx("span",{className:"font-medium",children:"Organization:"})," ",b.organization]}),i.jsx("span",{className:"text-green-500",children:""}),i.jsx("span",{className:"text-sm text-green-700 font-medium whitespace-nowrap",children:"Project:"}),i.jsx("div",{className:"min-w-[150px]",children:i.jsx(pd,{options:Me,value:ee,onChange:ii,placeholder:"Select projects..."})})]}),i.jsxs("div",{className:"flex items-start mt-1",children:[b.lastSyncTime&&i.jsxs("div",{className:"text-sm text-green-700 ml-7 mt-[-5px]",children:[i.jsx("span",{className:"font-medium",children:"Last Sync:"})," ",aa(b.lastSyncTime)]}),i.jsx("div",{className:"text-xs text-green-700 ml-[300px]",children:"Switching projects will clear the filters below."})]})]})}),i.jsx($Z,{config:b,onUpdateConfig:w,onPreview:j,isFetching:E,availableStates:A,availableAreaPaths:$,availableTags:B,previewFeatures:T,showPreviewModal:K,onFetchStatesForType:F,onFetchAreaPathsForTypeAndState:Y,onFetchTagsForTypeStateAndAreaPath:J,onFetchTypesAndStatesForAreaPath:V,onFetchTypesAndStatesForTags:H,onFetchTypesAndAreaPathsForStates:re,resetSignal:Oe})]}):i.jsxs("div",{className:"bg-gray-50 rounded-lg p-6 text-center border border-dashed border-gray-300",children:[i.jsx("img",{src:MC,alt:"Azure DevOps logo",className:"h-10 w-10 mx-auto mb-3 opacity-80"}),i.jsx("h3",{className:"text-lg font-medium text-gray-700 mb-2",children:"Not Connected"}),i.jsx("p",{className:"text-gray-600 mb-4",children:"Connect to Azure DevOps to import work items as features for voting."}),i.jsx(gt,{variant:"primary",onClick:()=>pn("newmill",ee[0]||Me[0]||"Product"),className:"inline-flex items-center",disabled:E,children:E?i.jsxs(i.Fragment,{children:[i.jsx(Jo,{className:"h-4 w-4 mr-2 animate-spin"}),"Connecting..."]}):i.jsxs(i.Fragment,{children:[i.jsx(ns,{className:"h-4 w-4 mr-2"}),"Connect to Azure DevOps"]})}),C&&i.jsx("p",{className:"mt-3 text-sm text-[#591D0F]",children:C})]})]}),i.jsxs("div",{className:"relative bg-white rounded-lg shadow-md p-4 mb-6",children:[i.jsxs("div",{className:"flex flex-wrap justify-between items-center gap-2 mb-4",children:[i.jsxs("div",{children:[i.jsx("h2",{className:"text-xl font-semibold text-[#2D4660]",children:"Suggested Features"}),i.jsx("p",{className:"text-sm text-gray-600",children:"Ideas submitted from the voting experience for future consideration."})]}),i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsxs("span",{className:"inline-flex items-center px-3 py-1 rounded-full bg-[#1E5461]/10 text-[#1E5461] text-sm font-medium",children:[ie.length," ",ie.length===1?"suggestion":"suggestions"]}),ie.length>1&&i.jsx(gt,{variant:"gold",onClick:()=>Us(!bs),className:"text-xs px-3 py-1 flex items-center gap-1",children:bs?i.jsxs(i.Fragment,{children:[i.jsx(Uc,{className:"h-3.5 w-3.5"}),"Show Less"]}):i.jsxs(i.Fragment,{children:[i.jsx(vn,{className:"h-3.5 w-3.5"}),"Show All"]})})]})]}),ie.length===0?i.jsx("div",{className:"bg-gray-50 border border-dashed border-gray-200 rounded-lg p-6 text-center text-gray-500 text-sm",children:'No feature suggestions have been submitted yet. Encourage voters to use the "Suggest a Feature" button in the voting experience.'}):i.jsx("div",{className:`space-y-4 pr-1 ${bs?"":"max-h-[360px] overflow-y-auto"}`,children:ie.map(L=>{const k=L.requester_name||L.requester_email||"Anonymous";return i.jsx("div",{className:"border border-gray-200 rounded-lg p-4 hover:border-[#1E5461]/40 transition-colors",children:i.jsxs("div",{className:"flex flex-col gap-4",children:[i.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4",children:[i.jsxs("div",{className:"md:flex-1",children:[i.jsx("h3",{className:"text-lg font-semibold text-[#2D4660]",children:L.title}),i.jsxs("p",{className:"text-xs text-gray-500 mt-[14px]",children:["Submitted by ",i.jsx("span",{className:"font-medium text-[#1E5461]",children:k}),L.requester_email&&i.jsxs(i.Fragment,{children:[" ","(",i.jsx("a",{href:`mailto:${L.requester_email}`,className:"text-[#1E5461] hover:underline",children:L.requester_email}),")"]})," on ",aa(L.created_at)]})]}),i.jsxs("div",{className:"flex flex-col items-end gap-2 self-start md:min-w-[360px]",children:[i.jsxs("div",{className:"flex flex-wrap justify-end gap-2",children:[i.jsxs(gt,{variant:"primary",onClick:()=>{Bt(null),Kt(L)},className:"text-xs px-3 py-1 flex items-center",children:[i.jsx(KM,{className:"h-3.5 w-3.5 mr-2"}),"Move to Current Session"]}),i.jsxs(gt,{variant:"secondary",onClick:()=>{M.length>0&&Wt(L)},disabled:M.length===0,className:"text-xs px-3 py-1 flex items-center",children:[i.jsx(un,{className:"h-3.5 w-3.5 mr-2"}),"Move to Future Session"]}),i.jsxs(gt,{variant:"secondary",onClick:()=>ds(L),className:"text-xs px-3 py-1 flex items-center",children:[i.jsx(bd,{className:"h-3.5 w-3.5 mr-2"}),"Edit"]}),i.jsxs(gt,{variant:"danger",onClick:()=>{sn(null),Ir(L)},className:"text-xs px-3 py-1 flex items-center",children:[i.jsx(ha,{className:"h-3.5 w-3.5 mr-2"}),"Delete"]})]}),M.length===0&&i.jsx("p",{className:"text-xs text-gray-500 text-right",children:"No upcoming sessions are available yet. Create a future session to enable this action."})]})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3",children:[i.jsxs("div",{className:"border border-gray-200 rounded-lg p-3 bg-gray-50 max-h-48 overflow-y-auto",children:[i.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[i.jsx(or,{className:"h-4 w-4 text-[#2D4660]"}),i.jsx("p",{className:"text-sm font-semibold text-[#2D4660]",children:"Problem it solves"})]}),i.jsx("p",{className:"text-sm text-gray-700 whitespace-pre-line",children:L.summary&&L.summary.length>0?L.summary:"No summary provided."})]}),i.jsxs("div",{className:"border border-gray-200 rounded-lg p-3 bg-gray-50 max-h-48 overflow-y-auto",children:[i.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[i.jsx(Zm,{className:"h-4 w-4 text-[#2D4660]"}),i.jsx("p",{className:"text-sm font-semibold text-[#2D4660]",children:"What would it do?"})]}),i.jsx("p",{className:"text-sm text-gray-700 whitespace-pre-line",children:L.whatWouldItDo&&L.whatWouldItDo.length>0?L.whatWouldItDo:"No details provided."})]}),i.jsxs("div",{className:"border border-gray-200 rounded-lg p-3 bg-gray-50 max-h-48 overflow-y-auto",children:[i.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[i.jsx(QF,{className:"h-4 w-4 text-[#2D4660]"}),i.jsx("p",{className:"text-sm font-semibold text-[#2D4660]",children:"How would it work?"})]}),i.jsx("p",{className:"text-sm text-gray-700 whitespace-pre-line",children:L.howWouldItWork&&L.howWouldItWork.length>0?L.howWouldItWork:"No implementation details provided."})]})]}),L.attachment_urls&&L.attachment_urls.length>0&&i.jsxs("div",{className:"border-t border-gray-200 pt-4",children:[i.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[i.jsx(El,{className:"h-4 w-4 text-[#2D4660]"}),i.jsxs("p",{className:"text-sm font-semibold text-[#2D4660]",children:["Attachments (",L.attachment_urls.length,")"]})]}),i.jsx("div",{className:"flex flex-wrap gap-3",children:L.attachment_urls.map((R,he)=>{const me=R.match(/\.(jpg|jpeg|png|gif|webp)$/i),ve=R.match(/\.pdf$/i),P=R.split("/").pop()||`attachment-${he+1}`;return i.jsxs("div",{className:"relative group border border-gray-300 rounded-md overflow-hidden",style:{width:"120px",height:"120px"},children:[me?i.jsx("a",{href:R,target:"_blank",rel:"noopener noreferrer",className:"block w-full h-full",children:i.jsx("img",{src:R,alt:P,className:"w-full h-full object-cover"})}):ve?i.jsx("a",{href:R,target:"_blank",rel:"noopener noreferrer",className:"block w-full h-full flex items-center justify-center bg-red-50 hover:bg-red-100 transition-colors",children:i.jsx(El,{className:"h-10 w-10 text-red-600"})}):i.jsx("a",{href:R,target:"_blank",rel:"noopener noreferrer",className:"block w-full h-full flex items-center justify-center bg-gray-100 hover:bg-gray-200 transition-colors",children:i.jsx(El,{className:"h-8 w-8 text-gray-600"})}),i.jsx("div",{className:"absolute bottom-0 left-0 right-0 bg-black bg-opacity-70 text-white text-xs p-1.5 truncate",children:P.length>18?`${P.substring(0,18)}...`:P})]},he)})})]})]})},L.id)})})]}),i.jsxs("div",{className:"relative bg-white rounded-lg shadow-md p-4 mb-6",children:[i.jsxs("div",{className:"flex justify-between items-center mb-4",children:[i.jsx("h2",{className:"text-xl font-semibold text-[#2D4660]",children:"Feature Management"}),i.jsxs(gt,{variant:"gold",onClick:()=>d(!0),className:"flex items-center w-44",children:[i.jsx(vn,{className:"mr-2 h-4 w-4"}),"Add Feature"]})]}),i.jsx("div",{className:"w-full overflow-x-auto max-h-[600px] overflow-y-auto",children:i.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[i.jsx("thead",{className:"bg-gray-50",children:i.jsxs("tr",{children:[i.jsx("th",{scope:"col",className:"sticky left-0 top-0 bg-gray-50 px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider z-30",children:"Title"}),i.jsx("th",{scope:"col",className:"sticky top-0 bg-gray-50 hidden md:table-cell px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider z-20",children:"Type"}),i.jsx("th",{scope:"col",className:"sticky top-0 bg-gray-50 hidden md:table-cell px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider z-20",children:"Epic"}),i.jsx("th",{scope:"col",className:"sticky top-0 bg-gray-50 hidden md:table-cell px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider z-20",children:"State"}),i.jsx("th",{scope:"col",className:"sticky top-0 bg-gray-50 hidden lg:table-cell px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider z-20",children:"Area Path"}),i.jsx("th",{scope:"col",className:"sticky top-0 bg-gray-50 px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider z-20",children:"Votes"}),i.jsx("th",{scope:"col",className:"sticky top-0 bg-gray-50 px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider z-20",children:"Actions"})]})}),i.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:e.map(L=>i.jsxs("tr",{className:"align-top group hover:bg-gray-50 bg-white",children:[i.jsx("td",{className:"sticky left-0 bg-white group-hover:bg-gray-50 px-4 py-3 z-10",children:i.jsx("div",{className:"flex items-start gap-2",children:i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsx("div",{className:"text-sm font-medium text-gray-900",children:L.title}),L.description&&L.description.trim()&&i.jsxs("div",{className:"text-xs text-gray-500 mt-1 line-clamp-2",children:[L.description.replace(/<[^>]*>/g,"").substring(0,100),L.description.replace(/<[^>]*>/g,"").length>100?"...":""]}),L.tags&&L.tags.length>0&&i.jsxs("div",{className:"flex flex-wrap gap-1 mt-1 items-center",children:[L.tags.slice(0,3).map((k,R)=>i.jsxs("span",{className:"inline-flex items-center px-1.5 py-0.5 text-xs bg-[#C89212]/10 text-[#C89212] rounded border border-[#C89212]/30",children:[i.jsx(bk,{className:"h-3 w-3 mr-1"}),k]},R)),L.tags.length>3&&i.jsxs("span",{className:"inline-flex items-center px-1.5 py-0.5 text-xs bg-[#C89212]/10 text-[#C89212] rounded border border-[#C89212]/30",children:[i.jsx(bk,{className:"h-3 w-3 mr-1"}),"+",L.tags.length-3]})]})]})})}),i.jsx("td",{className:"hidden md:table-cell px-4 py-3 align-middle",children:(()=>{const k=L.workItemType||L.work_item_type,R=QI(k);if(R&&L.azureDevOpsId){const he=R.icon,ve=(X=>{const ce=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(X);return ce?{r:parseInt(ce[1],16),g:parseInt(ce[2],16),b:parseInt(ce[3],16)}:null})(R.color),P=ve?`rgba(${ve.r}, ${ve.g}, ${ve.b}, 0.1)`:`${R.color}20`,D=ve?`rgba(${ve.r}, ${ve.g}, ${ve.b}, 0.2)`:`${R.color}40`;return i.jsxs("a",{href:L.azureDevOpsUrl||"",target:"_blank",rel:"noopener noreferrer",onClick:X=>X.stopPropagation(),className:"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium cursor-pointer border",style:{backgroundColor:P,color:R.color,borderColor:R.color},onMouseEnter:X=>{X.currentTarget.style.backgroundColor=D},onMouseLeave:X=>{X.currentTarget.style.backgroundColor=P},title:"View in Azure DevOps",children:[i.jsx(he,{className:"h-3 w-3 mr-1",style:{color:R.color}}),L.azureDevOpsId.replace(/^ado-/,"#")]})}else{if(k&&L.azureDevOpsId)return i.jsxs("a",{href:L.azureDevOpsUrl||"",target:"_blank",rel:"noopener noreferrer",onClick:he=>he.stopPropagation(),className:"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-[#492434]/10 text-[#492434] hover:bg-[#492434]/20 cursor-pointer border border-[#492434]/30",title:"View in Azure DevOps",children:[i.jsx("span",{className:"mr-1 text-xs",children:k}),L.azureDevOpsId.replace(/^ado-/,"#")]});if(R){const he=R.icon;return i.jsxs("div",{className:"flex items-center gap-1",children:[i.jsx(he,{className:"w-4 h-4",style:{color:R.color}}),L.azureDevOpsId&&i.jsx("span",{className:"text-xs text-gray-600",children:L.azureDevOpsId.replace(/^ado-/,"#")})]})}else if(k)return i.jsx("span",{className:"px-2 py-1 text-xs font-medium bg-[#492434]/10 text-[#492434] rounded",children:k})}return i.jsx("span",{className:"text-gray-400 text-xs",children:"-"})})()}),i.jsx("td",{className:`hidden md:table-cell px-4 py-3 align-middle ${L.epic||L.workItemType&&L.workItemType.toLowerCase()==="epic"?"w-64":"w-32"}`,onMouseEnter:k=>k.stopPropagation(),onMouseLeave:k=>k.stopPropagation(),children:L.workItemType&&L.workItemType.toLowerCase()==="epic"?i.jsx("span",{className:"text-xs text-gray-600 italic",children:"This Work Item is an Epic"}):L.epic?L.epicId?i.jsx("a",{href:`https://dev.azure.com/${b.organization}/${b.project}/_workitems/edit/${L.epicId}`,target:"_blank",rel:"noopener noreferrer",onClick:k=>k.stopPropagation(),className:"inline-block w-full",children:i.jsx(Gl,{name:L.epic,epicId:String(L.epicId),description:L.description,className:"hover:opacity-80"})}):i.jsx(Gl,{name:L.epic,description:L.description}):i.jsx("span",{className:"text-xs text-gray-400 italic",children:"no Epic assigned"})}),i.jsx("td",{className:"hidden md:table-cell px-4 py-3 align-middle",children:L.state&&i.jsx("span",{className:"px-2 py-1 text-xs font-medium bg-[#1E5461]/10 text-[#1E5461] rounded",children:L.state})}),i.jsx("td",{className:"hidden lg:table-cell px-4 py-3 text-sm",children:i.jsx("div",{className:"text-gray-600",children:L.areaPath&&typeof L.areaPath=="string"&&L.areaPath.trim()!==""?i.jsx("div",{className:"max-w-xs break-words text-xs",children:L.areaPath}):i.jsx("span",{className:"text-gray-400 text-xs",children:"-"})})}),i.jsx("td",{className:"px-4 py-3 whitespace-nowrap text-sm",children:L.votes}),i.jsxs("td",{className:"px-4 py-3 whitespace-nowrap text-sm text-gray-500 space-x-3 md:opacity-0 md:group-hover:opacity-100 transition-opacity",children:[i.jsx("button",{onClick:()=>f(L),className:"text-[#2D4660] hover:text-[#C89212] inline-block cursor-pointer",title:"Edit Feature",children:i.jsx(bd,{className:"h-5 w-5"})}),i.jsx("button",{onClick:()=>n(L.id),className:"text-[#2D4660] hover:text-[#591D0F] inline-block cursor-pointer",title:"Delete Feature",children:i.jsx(ha,{className:"h-5 w-5"})})]})]},L.id))})]})})]}),i.jsx(bn,{isOpen:nt!==null,onClose:()=>{dr||(Kt(null),Bt(null))},title:"Move Suggestion to Current Session",children:i.jsxs("div",{className:"space-y-4",children:[i.jsxs("p",{className:"text-sm text-gray-700",children:["Move ",i.jsx("span",{className:"font-semibold text-[#2D4660]",children:nt==null?void 0:nt.title})," into the current session so it can be managed and voted on."]}),tt&&i.jsx("div",{className:"bg-[#591D0F]/5 border border-[#591D0F]/20 text-[#591D0F] text-sm rounded-md px-3 py-2",children:tt}),i.jsxs("div",{className:"flex justify-end gap-2",children:[i.jsx(gt,{variant:"secondary",onClick:()=>{dr||(Kt(null),Bt(null))},disabled:dr,children:"Cancel"}),i.jsx(gt,{variant:"primary",onClick:Yn,disabled:dr,children:dr?"Moving...":"Move to Current Session"})]})]})}),i.jsx(bn,{isOpen:qt!==null,onClose:()=>{lr||(Wt(null),Zt(null))},title:"Move to Future Session",children:i.jsxs("div",{className:"space-y-4",children:[i.jsxs("p",{className:"text-sm text-gray-700",children:["Choose the upcoming session where you would like to queue ",i.jsx("span",{className:"font-semibold text-[#2D4660]",children:qt==null?void 0:qt.title}),"."]}),M.length>0?i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Destination Session"}),i.jsx("select",{value:Qt,onChange:L=>sr(L.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md text-sm bg-white",disabled:lr,children:M.map(L=>i.jsxs("option",{value:L.id,children:[L.title," (Starts ",aa(L.startDate),")"]},L.id))})]}):i.jsx("div",{className:"bg-[#1E5461]/5 border border-[#1E5461]/20 text-[#1E5461] text-sm rounded-md px-3 py-2",children:"No future sessions are available yet. Create a new session to enable this action."}),Mr&&i.jsx("div",{className:"bg-[#591D0F]/5 border border-[#591D0F]/20 text-[#591D0F] text-sm rounded-md px-3 py-2",children:Mr}),i.jsxs("div",{className:"flex justify-end gap-2",children:[i.jsx(gt,{variant:"secondary",onClick:()=>{lr||(Wt(null),Zt(null))},disabled:lr,children:"Cancel"}),i.jsx(gt,{variant:"primary",onClick:Xi,disabled:lr||M.length===0,children:lr?"Moving...":"Move to Session"})]})]})}),i.jsx(bn,{isOpen:ir!==null,onClose:()=>{Kr||(qn(null),Hr(null))},title:"Edit Suggested Feature",children:i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Title"}),i.jsx("input",{type:"text",value:Vt.title,onChange:L=>ls(k=>({...k,title:L.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md",disabled:Kr})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Problem it solves"}),i.jsx("textarea",{value:Vt.summary,onChange:L=>ls(k=>({...k,summary:L.target.value})),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-md",disabled:Kr})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"What would it do?"}),i.jsx("textarea",{value:Vt.whatWouldItDo,onChange:L=>ls(k=>({...k,whatWouldItDo:L.target.value})),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-md",disabled:Kr})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"How would it work?"}),i.jsx("textarea",{value:Vt.howWouldItWork,onChange:L=>ls(k=>({...k,howWouldItWork:L.target.value})),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-md",disabled:Kr})]}),qr.length>0&&i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Attachments"}),i.jsx("div",{className:"flex flex-wrap gap-3",children:qr.map((L,k)=>{const R=L.match(/\.(jpg|jpeg|png|gif|webp)$/i),he=L.match(/\.pdf$/i),me=L.split("/").pop()||`attachment-${k+1}`;return i.jsxs("div",{className:"relative group border border-gray-300 rounded-md overflow-hidden",style:{width:"120px",height:"120px"},children:[R?i.jsx("a",{href:L,target:"_blank",rel:"noopener noreferrer",className:"block w-full h-full",children:i.jsx("img",{src:L,alt:me,className:"w-full h-full object-cover"})}):he?i.jsx("a",{href:L,target:"_blank",rel:"noopener noreferrer",className:"block w-full h-full flex items-center justify-center bg-red-50 hover:bg-red-100 transition-colors",children:i.jsx(El,{className:"h-10 w-10 text-red-600"})}):i.jsx("a",{href:L,target:"_blank",rel:"noopener noreferrer",className:"block w-full h-full flex items-center justify-center bg-gray-100 hover:bg-gray-200 transition-colors",children:i.jsx(El,{className:"h-8 w-8 text-gray-600"})}),i.jsx("button",{type:"button",onClick:()=>{vr(ve=>ve.filter((P,D)=>D!==k))},className:"absolute top-1 right-1 bg-red-500 text-white rounded-full p-1 opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center",style:{width:"20px",height:"20px"},disabled:Kr,"aria-label":`Remove ${me}`,children:i.jsx(xs,{className:"h-3 w-3"})}),i.jsx("div",{className:"absolute bottom-0 left-0 right-0 bg-black bg-opacity-70 text-white text-xs p-1.5 truncate",children:me.length>18?`${me.substring(0,18)}...`:me})]},k)})}),i.jsx("p",{className:"mt-2 text-xs text-gray-500",children:"Click the X icon on hover to remove attachments"})]}),cr&&i.jsx("div",{className:"bg-[#591D0F]/5 border border-[#591D0F]/20 text-[#591D0F] text-sm rounded-md px-3 py-2",children:cr}),i.jsx("div",{className:"flex justify-end gap-2",children:i.jsx(gt,{variant:"primary",onClick:wr,disabled:Kr,children:Kr?"Saving...":"Save Changes"})})]})}),i.jsx(bn,{isOpen:jr!==null,onClose:()=>{In||(Ir(null),sn(null))},title:"Delete Suggested Feature",children:i.jsxs("div",{className:"space-y-4",children:[i.jsxs("p",{className:"text-sm text-gray-700",children:["Are you sure you want to delete ",i.jsx("span",{className:"font-semibold text-[#591D0F]",children:jr==null?void 0:jr.title}),"? This action cannot be undone."]}),Vi&&i.jsx("div",{className:"bg-[#591D0F]/5 border border-[#591D0F]/20 text-[#591D0F] text-sm rounded-md px-3 py-2",children:Vi}),i.jsxs("div",{className:"flex justify-end gap-2",children:[i.jsx(gt,{variant:"secondary",onClick:()=>{In||(Ir(null),sn(null))},disabled:In,children:"Cancel"}),i.jsx(gt,{variant:"danger",onClick:Ni,disabled:In,children:In?"Deleting...":"Delete"})]})]})}),i.jsx(bn,{isOpen:u,onClose:()=>d(!1),title:"Add New Feature",children:i.jsx(LC,{onSubmit:L=>{t(L),d(!1)},onCancel:()=>d(!1)})}),i.jsx(bn,{isOpen:m!==null,onClose:()=>f(null),title:"Edit Feature",children:m&&i.jsx(LC,{feature:m,onSubmit:L=>{r({...m,...L}),f(null)},onCancel:()=>f(null)})}),i.jsx(bn,{isOpen:Nt,onClose:()=>vt(!1),title:"Edit Session Settings",children:i.jsx(RZ,{session:v,featureCount:e.length,onSubmit:al,onCancel:()=>vt(!1),onRequestDeleteSession:_i,isDeletingSession:l,productName:Bs,products:ur,isLoadingProducts:ws,productError:ae,onRequestDeleteProduct:L=>ze(L),onProductColorUpdated:async()=>{const L=(z==null?void 0:z.tenant_id)??(z==null?void 0:z.tenantId)??null;if(L)try{const k=await Ga(L);Gr(k)}catch(k){console.error("Error refreshing products after color update:",k)}}})}),$e&&i.jsxs(bn,{isOpen:!0,onClose:()=>ze(null),title:"Delete Product",children:[i.jsxs("p",{className:"text-sm text-gray-700 mb-4",children:["Are you sure you want to delete ",i.jsx("span",{className:"font-semibold",children:$e.name}),"? This will remove it for everyone in your tenant."]}),i.jsxs("div",{className:"flex justify-end gap-3",children:[i.jsx(gt,{variant:"secondary",onClick:()=>ze(null),disabled:cs,children:"Cancel"}),i.jsx(gt,{variant:"danger",onClick:js,disabled:cs,children:cs?"Deleting...":"Delete"})]})]}),i.jsx(DZ,{isOpen:K,onClose:()=>Q(!1),previewFeatures:T,onConfirmSync:se,onReplaceAll:G,isFetching:E,config:b}),i.jsx(bn,{isOpen:U,onClose:()=>{q(!1),mn()},title:"Reopen Session",children:i.jsxs("form",{onSubmit:Fr(Ji),className:"space-y-4",children:[i.jsx("p",{className:"text-gray-600",children:"Capture a brief note so other admins understand why this session is being reopened."}),i.jsx(fd,{control:Ss,name:"reason",rules:{required:"Please select a reason"},render:({field:L})=>i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Reason *"}),i.jsx(TZ,{options:IZ,value:L.value,onChange:L.onChange,placeholder:"Select a reason..."}),Gi.reason&&i.jsx("p",{className:"mt-1 text-sm text-[#591D0F]",children:Gi.reason.message})]})}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Additional Details (Optional)"}),i.jsx("textarea",{...on("details"),rows:3,placeholder:"Add any context you'd like to share with other admins...",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-[#2D4660] focus:border-transparent"})]}),i.jsx("div",{className:"bg-[#1E5461]/5 border border-[#1E5461]/20 rounded-lg p-3 text-sm text-[#1E5461]",children:"This information will appear in the Current Session summary so every admin sees why voting resumed."}),i.jsxs("div",{className:"flex justify-end space-x-2 pt-4",children:[i.jsx(gt,{variant:"secondary",type:"button",onClick:()=>{q(!1),mn()},children:"Cancel"}),i.jsx(gt,{variant:"primary",type:"submit",children:"Save & Reopen"})]})]})}),i.jsx(bn,{isOpen:ot,onClose:()=>{rr(!1),us()},title:"End Session Early",children:i.jsxs("form",{onSubmit:tn(Ma),className:"space-y-4",children:[i.jsx("p",{className:"text-gray-600",children:"You are about to end this voting session early. Please select a reason:"}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Reason *"}),i.jsxs("select",{...Gn("reason",{required:"Please select a reason"}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-[#2D4660] focus:border-transparent",children:[i.jsx("option",{value:"",children:"Select a reason..."}),i.jsx("option",{value:"Sufficient Responses",children:"Sufficient responses received"}),i.jsx("option",{value:"Project Cancelled",children:"Project or initiative cancelled"}),i.jsx("option",{value:"Timeline Changed",children:"Timeline or priorities changed"}),i.jsx("option",{value:"Technical Issues",children:"Technical issues or data concerns"}),i.jsx("option",{value:"Stakeholder Request",children:"Stakeholder request"}),i.jsx("option",{value:"Low Participation",children:"Low participation rate"}),i.jsx("option",{value:"Other",children:"Other"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Additional Details (Optional)"}),i.jsx("textarea",{...Gn("details"),rows:3,placeholder:"Add any additional context or notes...",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-[#2D4660] focus:border-transparent"})]}),i.jsxs("div",{className:"bg-[#C89212]/5 border border-[#C89212]/20 rounded-lg p-3 text-sm text-[#6A4234]",children:[i.jsx("p",{className:"font-medium mb-1",children:"Note:"}),i.jsx("p",{children:"Ending the session will close voting immediately. This action will be logged and visible to all admins."})]}),i.jsxs("div",{className:"flex justify-end space-x-2 pt-4",children:[i.jsx(gt,{variant:"secondary",type:"button",onClick:()=>{rr(!1),us()},children:"Cancel"}),i.jsx(gt,{variant:"danger",type:"submit",children:"End Session Now"})]})]})}),Xe&&i.jsx(bn,{isOpen:!0,onClose:()=>{Fe(null),Dt(""),Ee(null),yt(!1)},title:"Edit Product",children:i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Product Name *"}),i.jsx("input",{type:"text",value:Yt,onChange:L=>Dt(L.target.value),placeholder:"Enter product name",className:"w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-0 focus:border-[#2D4660]"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Product Color"}),i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("button",{type:"button",onClick:()=>{an($t||"#2D4660"),yt(!0)},className:"block w-12 h-12 rounded-md border-2 border-gray-300 hover:border-gray-400 transition-all flex items-center justify-center overflow-hidden",style:$t?{backgroundColor:$t}:{backgroundColor:"#ffffff"},children:!$t&&i.jsx("img",{src:XI,alt:"Color Picker",className:"w-8 h-8 object-contain"})}),i.jsx("span",{className:"text-sm text-gray-600",children:$t||"No color selected"})]})]}),i.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t",children:[i.jsx(gt,{variant:"secondary",onClick:()=>{Fe(null),Dt(""),Ee(null),yt(!1)},disabled:Je,children:"Cancel"}),i.jsx(gt,{variant:"primary",onClick:async()=>{if(!(!(Xe!=null&&Xe.id)||!Yt.trim())){Jt(!0);try{await NE(Xe.id,{name:Yt.trim(),color_hex:$t});const L=(z==null?void 0:z.tenant_id)??(z==null?void 0:z.tenantId);if(L){const k=await Ga(L);Gr(k.sort((R,he)=>R.name.localeCompare(he.name)))}Fe(null),Dt(""),Ee(null),yt(!1),onProductColorUpdated&&onProductColorUpdated()}catch(L){console.error("Error updating product:",L),alert("Failed to update product. Please try again.")}finally{Jt(!1)}}},disabled:Je||!Yt.trim(),children:Je?"Updating...":"Update Product"})]})]})}),Xt&&i.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",onClick:()=>yt(!1),children:i.jsx("div",{className:"bg-white rounded-lg shadow-xl px-3 py-2 w-auto mx-4",onClick:L=>L.stopPropagation(),children:i.jsxs("div",{className:"flex gap-3 items-stretch",children:[i.jsxs("div",{className:"flex-shrink-0",style:{width:"240px",height:"260px"},children:[i.jsx("input",{id:"edit-native-color-input",type:"color",value:br,onChange:L=>an(L.target.value),ref:L=>{L&&Xt&&setTimeout(()=>L.click(),50)},className:"opacity-0 absolute",style:{width:"1px",height:"1px"}}),i.jsx("div",{className:"w-full h-full"})]}),i.jsxs("button",{type:"button",onClick:()=>{Ee(br),yt(!1)},className:"px-6 rounded-lg text-white font-bold shadow-lg hover:shadow-xl transition-all flex flex-col items-center justify-center gap-3 text-lg flex-shrink-0",style:{backgroundColor:br,height:"260px",minWidth:"100px"},children:[i.jsx(kr,{className:"h-8 w-8"}),i.jsxs("div",{className:"text-center leading-tight",children:[i.jsx("div",{children:"Looks"}),i.jsx("div",{children:"Good"})]})]})]})})})]})}const FC=["User Experience","Vendor Management","Analytics & Reporting","Operational Efficiency","Compliance & Risk","Mobile Access","Integration","Sustainability","Budget Management"],FZ={title:"Q2 Product Roadmap",goal:"Prioritize features for the Purchasing Dashboard redesign",votesPerUser:10,useAutoVotes:!0,startDate:new Date().toISOString(),endDate:new Date(Date.now()+10080*60*1e3).toISOString(),isActive:!0,originalEndDate:null,endedEarlyBy:null,endedEarlyReason:null,endedEarlyDetails:null,reopenReason:null,reopenDetails:null,reopenedBy:null,reopenedAt:null,productId:null,productName:null,product_id:null,product_name:null},LZ={organization:"newmill",project:"Product",enabled:!1,workItemType:"Feature"},zZ=[{id:"u1",name:"John Doe",email:"john@example.com",totalVotes:10,usedVotes:0,votesPerFeature:{}},{id:"u2",name:"Jane Smith",email:"jane@example.com",totalVotes:10,usedVotes:0,votesPerFeature:{}},{id:"u3",name:"Robert Johnson",email:"robert@example.com",totalVotes:10,usedVotes:0,votesPerFeature:{}}],Ow=(e,t,r)=>e?{label:"System Admin",className:"bg-[#C89212] text-white",icon:i.jsx(En,{className:"h-3.5 w-3.5 mr-1"})}:t?{label:"Session Admin",className:"bg-[#576C71] text-white",icon:i.jsx(Xr,{className:"h-3.5 w-3.5 mr-1"})}:r?{label:"Stakeholder",className:"bg-[#8B5A4A] text-white",icon:i.jsx(ps,{className:"h-3.5 w-3.5 mr-1"})}:null,Lm=e=>{const t=new Date(e),r=new Date;t.setHours(0,0,0,0),r.setHours(0,0,0,0);const n=t.getTime()-r.getTime();return Math.ceil(n/(1e3*60*60*24))},zm=e=>e<=0?"text-[#591D0F]":e<=2?"text-[#6A4234]":e<=4?"text-[#C89212]":"text-[#1E5461]",Iw=e=>e<=0?"bg-[#591D0F]/10":e<=2?"bg-[#6A4234]/10":e<=4?"bg-[#C89212]/10":"bg-[#1E5461]/10",UZ=e=>e<=0?"bg-[#EEE8E7]":e<=2?"bg-[#F0ECEB]":e<=4?"bg-[#FAF4E7]":"bg-[#E9EEEF]",BZ=(e,t)=>{const r=new Date(e),n=new Date(t),s=new Date;return r<=s&&s<=n},WZ=e=>{const t=[...e];for(let r=t.length-1;r>0;r--){const n=Math.floor(Math.random()*(r+1));[t[r],t[n]]=[t[n],t[r]]}return t},gd=(e,t)=>e?e.length>t?`${e.substring(0,t-3)}...`:e:"",Nh=e=>{if(!e)return"";const t=document.createElement("div");t.innerHTML=e;let r=t.textContent||t.innerText||"";return r=r.replace(/\s+/g," ").trim(),r},VZ=e=>{const t=e.split("");for(let r=0;r<3;r++){const n=Math.floor(Math.random()*t.length),s=Math.floor(Math.random()*t.length);n!==s&&([t[n],t[s]]=[t[s],t[n]])}return t.join("")};function $p({src:e,alt:t,style:r,className:n,...s}){const[a,l]=g.useState(!1);return a?i.jsx("div",{className:`inline-block bg-gray-100 text-center align-middle ${n??""}`,style:r,children:i.jsx("div",{className:"flex items-center justify-center w-full h-full",children:i.jsx("img",{src:"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iODgiIGhlaWdodD0iODgiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgc3Ryb2tlPSIjMDAwIiBzdHJva2UtbGluZWpvaW49InJvdW5kIiBvcGFjaXR5PSIuMyIgZmlsbD0ibm9uZSIgc3Ryb2tlLXdpZHRoPSIzLjciPjxyZWN0IHg9IjE2IiB5PSIxNiIgd2lkdGg9IjU2IiBoZWlnaHQ9IjU2IiByeD0iNiIvPjxwYXRoIGQ9Im0xNiA1OCAxNi0xOCAzMiAzMiIvPjxjaXJjbGUgY3g9IjUzIiBjeT0iMzUiIHI9IjciLz48L3N2Zz4KCg==",alt:"Error loading image",...s,"data-original-url":e})})}):i.jsx("img",{src:e,alt:t,className:n,style:r,...s,onError:()=>l(!0)})}const gt=kt.memo(function({children:t,onClick:r,variant:n="primary",disabled:s=!1,className:a="",...l}){const u="py-2 px-4 rounded-lg flex items-center transition-colors cursor-pointer",d={primary:"bg-[#2d4660] text-white hover:bg-[#173B65]",secondary:"border border-gray-300 text-gray-700 hover:bg-gray-50",danger:"bg-[#591D0F] text-white hover:bg-[#492434]",gold:"bg-[#C89212] text-white hover:bg-[#E0A814]",blue:"bg-[#173B65] text-white hover:bg-[#1D2C49]",gray:"bg-[#576C71] text-white hover:bg-[#1E5461]"};return i.jsx("button",{onClick:r,disabled:s,className:`${u} ${d[n]} ${s?"opacity-60 cursor-not-allowed":""} ${a}`,...l,children:t})}),bn=({isOpen:e,onClose:t,title:r,children:n,maxWidth:s="max-w-2xl",hideCloseButton:a=!1,hideHeader:l=!1})=>(g.useEffect(()=>{if(e){const u=window.scrollY;return document.body.style.position="fixed",document.body.style.top=`-${u}px`,document.body.style.width="100%",document.body.style.overflow="hidden",()=>{document.body.style.position="",document.body.style.top="",document.body.style.width="",document.body.style.overflow="",window.scrollTo(0,u)}}},[e]),e?i.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:i.jsxs("div",{className:"flex items-start justify-center min-h-screen p-4 text-center pt-8 sm:pt-16",children:[i.jsx("div",{className:"fixed inset-0 transition-opacity bg-black/50",onClick:a?void 0:t,"aria-hidden":"true"}),i.jsxs("div",{className:`inline-block w-full ${s} p-6 mb-8 overflow-visible text-left align-middle transition-all transform bg-white shadow-xl rounded-lg relative z-10`,children:[l?!a&&i.jsx("div",{className:"flex justify-end -mt-2 -mr-2",children:i.jsx("button",{onClick:t,className:"text-gray-400 hover:text-gray-500 focus:outline-none",children:i.jsx(xs,{className:"h-5 w-5"})})}):i.jsxs("div",{className:"flex items-start justify-between mb-5",children:[i.jsxs("div",{className:"flex items-center gap-3 bg-[#FFF7E2] border border-[#C89212]/40 rounded-xl px-6 py-3 shadow-sm w-full mr-4",children:[i.jsx("div",{className:"flex items-center justify-center h-10 w-10 rounded-full bg-[#C89212]/15 text-[#C89212]",children:i.jsx(Zm,{className:"h-6 w-6"})}),i.jsxs("div",{children:[i.jsx("h3",{className:"text-lg font-semibold text-[#2d4660] tracking-tight",children:r}),i.jsx("p",{className:"text-xs text-[#8A6D3B] font-medium mt-1 uppercase tracking-widest",children:"Spark the roadmap with your ideas"})]})]}),!a&&i.jsx("button",{onClick:t,className:"ml-3 text-gray-400 hover:text-gray-500 focus:outline-none",children:i.jsx(xs,{className:"h-5 w-5"})})]}),i.jsx("div",{className:l?"-mt-4":"mt-2 overflow-visible",children:n})]})]})}):null),Gl=kt.memo(function({name:t,epicId:r,description:n,truncateAt:s=null,className:a}){if(!t)return null;const l=s===null?t:gd(t,s),u=["flex flex-col text-xs text-[#2d4660]",a].filter(Boolean).join(" "),d=n;return i.jsxs("div",{className:`${u} relative group/epic`,children:[i.jsxs("div",{className:"flex flex-col min-w-0",children:[r&&i.jsxs("div",{className:"flex items-center gap-1 mb-1",children:[i.jsx(En,{className:"h-4 w-4",style:{color:"rgb(51, 153, 71)"}}),i.jsxs("span",{className:"text-xs font-medium text-gray-600",children:["#",r]})]}),i.jsx("span",{className:"font-medium leading-tight break-words min-w-0",children:l})]}),d&&i.jsxs("div",{className:"absolute left-0 bottom-full mb-2 opacity-0 group-hover/epic:opacity-100 transition-opacity z-50 w-64 p-3 bg-gray-900 text-white text-xs rounded-lg shadow-lg pointer-events-none",children:[i.jsx("div",{className:"font-semibold mb-1",children:t}),n&&i.jsx("div",{className:"text-gray-300 mt-2 line-clamp-4",children:n.replace(/<[^>]*>/g,"").trim()}),i.jsx("div",{className:"absolute top-full left-4 w-0 h-0 border-l-4 border-r-4 border-t-4 border-transparent border-t-gray-900"})]})]})}),qZ=kt.memo(function({id:t,url:r}){return t?i.jsxs("a",{href:r,target:"_blank",rel:"noreferrer",className:"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-blue-100 text-blue-800 hover:bg-blue-200 cursor-pointer",title:"View in Azure DevOps",children:[i.jsx(uF,{className:"h-3 w-3 mr-1"}),"#",t]}):null});kt.memo(function({endDate:t}){const r=Lm(t),n=zm(r),s=Iw(r);return i.jsx("div",{className:`${s} rounded-md p-3 border ${r<=2?"border-[#6A4234]/20":r<=4?"border-[#C89212]/20":"border-[#1E5461]/20"}`,children:i.jsxs("div",{className:"flex items-center",children:[i.jsx(un,{className:`h-5 w-5 mr-2 ${n}`}),i.jsxs("div",{children:[i.jsxs("span",{className:`font-medium ${n}`,children:["Voting ends: ",aa(t)]}),i.jsx("div",{className:"text-sm mt-1",children:r<=0?i.jsx("span",{className:"text-red-600 font-medium",children:"Voting ends today!"}):i.jsxs("span",{className:`${n}`,children:[r," ",r===1?"day":"days"," remaining"]})})]})]})})});function HZ({isShuffling:e,onShuffle:t}){const[r,n]=g.useState("Shuffle Features"),s=g.useRef(null);return g.useEffect(()=>(e?s.current=window.setInterval(()=>{n(VZ("Shuffle Features"))},100):s.current!==null&&(window.clearInterval(s.current),n("Shuffle Features")),()=>{s.current!==null&&window.clearInterval(s.current)}),[e]),i.jsxs("button",{onClick:t,className:`py-2 px-4 rounded-lg flex items-center justify-center transition-all duration-300 w-full md:w-auto ${e?"bg-[#C89212] text-white scale-95":"bg-[#C89212] hover:bg-[#A67810] text-white hover:scale-105"}`,disabled:e,children:[i.jsx("span",{className:`transition-transform duration-500 ${e?"mr-2 animate-spin":"mr-2"}`,children:i.jsx($F,{className:"h-4 w-4"})}),i.jsx("span",{className:"font-medium tracking-wide whitespace-nowrap",children:r})]})}const $h=kt.memo(function({show:t,title:r,message:n,onConfirm:s,onCancel:a,confirmText:l="Confirm",cancelText:u="Cancel",type:d="delete"}){if(!t)return null;const m=d==="delete"?"bg-[#591D0F]/10":"bg-[#C89212]/10",f=d==="delete"?"text-[#591D0F]":"text-[#C89212]",p=d==="delete"?"bg-[#591D0F] hover:bg-[#492434]":"bg-[#C89212] hover:bg-[#A67810]";return i.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:i.jsxs("div",{className:"relative z-10 bg-white rounded-lg shadow-xl max-w-md w-full mx-auto overflow-hidden",children:[i.jsxs("div",{className:`${m} p-4 flex items-start space-x-4`,children:[i.jsx("div",{className:f,children:d==="delete"?i.jsx(ha,{className:"h-5 w-5"}):i.jsx(or,{className:"h-5 w-5"})}),i.jsxs("div",{children:[i.jsx("h3",{className:"text-lg font-medium text-gray-900",children:r}),i.jsx("p",{className:"mt-1 text-sm text-gray-500",children:n})]})]}),i.jsx("div",{className:"p-4 bg-white space-y-4",children:i.jsxs("div",{className:"flex items-center justify-end space-x-3",children:[i.jsx("button",{type:"button",onClick:a,className:"px-4 py-2 border border-gray-300 rounded-md text-sm font-medium text-gray-700 hover:bg-gray-50 cursor-pointer",children:u}),i.jsx("button",{type:"button",onClick:()=>{s(),a()},className:`px-4 py-2 rounded-md text-sm font-medium text-white ${p} cursor-pointer`,children:l})]})})]})})}),KZ=kt.memo(function({feature:t,userVoteCount:r=0,remainingVotes:n=0,votingIsActive:s=!1,onVote:a,isShuffling:l=!1,shuffleStage:u="idle",currentUser:d,onRequestInfo:m}){const[f,p]=g.useState(!1),[x,v]=g.useState(!1),b=async()=>{if(!(!m||x)){v(!0);try{await m(t.id),p(!0)}catch(j){console.error("Error requesting info:",j)}finally{v(!1)}}},w=()=>{switch(u){case"fadeOut":return"opacity-0 scale-95 blur-sm";case"rearranging":return"opacity-0 scale-90";case"fadeIn":return"opacity-100 scale-100 blur-0";default:return"opacity-100 scale-100 blur-0"}};return i.jsx("div",{className:`relative z-10 bg-white rounded-lg shadow-md overflow-hidden transition-all duration-400 ease-in-out ${r>0?"border-2 border-[#1E5461]":""} ${w()}`,children:i.jsxs("div",{className:"p-6 flex flex-col h-full",children:[i.jsx("h3",{className:"text-lg font-semibold mb-2 text-[#2d4660]",children:t.title}),t.azureDevOpsId&&i.jsx("div",{className:"flex justify-end mb-4",children:i.jsx(qZ,{id:t.azureDevOpsId,url:t.azureDevOpsUrl||""})}),t.description?i.jsx("p",{className:"text-gray-600 mb-4 flex-grow",children:t.description}):i.jsxs("div",{className:"mb-4 flex-grow",children:[i.jsx("p",{className:"text-gray-400 italic mb-3",children:"No description provided"}),d&&m&&i.jsx("div",{className:"transition-all duration-300",children:f?i.jsxs("div",{className:"text-sm px-3 py-2 bg-green-50 text-green-700 rounded-md font-medium flex items-center animate-fadeIn",children:[i.jsx(kr,{className:"h-4 w-4 mr-2 flex-shrink-0"}),i.jsx("span",{children:"Thank you! Your request has been sent."})]}):i.jsxs("button",{onClick:b,disabled:x,className:"text-sm px-3 py-2 bg-blue-50 hover:bg-blue-100 text-[#2d4660] rounded-md font-medium flex items-center transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:[i.jsx(or,{className:"h-4 w-4 mr-2 flex-shrink-0"}),i.jsx("span",{children:x?"Sending...":"Ask Product Owner for more info"})]})})]}),a&&i.jsx("div",{className:"mt-auto pt-3",children:i.jsxs("div",{className:`flex items-center mb-3 ${t.epic?"justify-between":"justify-end"}`,children:[t.epic&&i.jsx(Gl,{name:t.epic,truncateAt:null,className:"text-sm bg-[#1E5461]/10 px-2 py-1 rounded-md"}),i.jsx("div",{className:"flex items-center space-x-2",children:r===0?i.jsx("button",{onClick:()=>a(t.id,!0),className:`px-6 py-2.5 rounded-lg text-base font-semibold cursor-pointer transition-colors ${s&&n>0?"bg-[#2d4660] text-white hover:bg-[#C89212]":"bg-gray-300 text-gray-600 cursor-not-allowed"}`,disabled:!s||n<=0,children:"Vote"}):i.jsxs(i.Fragment,{children:[i.jsx("button",{onClick:()=>a(t.id,!1),className:"p-2 rounded-full bg-gray-100 hover:bg-gray-200 text-gray-700 cursor-pointer transition-colors","aria-label":"Remove vote",disabled:!s,children:i.jsx(rs,{className:"h-6 w-6"})}),i.jsx("span",{className:"px-4 py-2 bg-[#1E5461]/10 text-[#1E5461] rounded-full font-semibold text-base min-w-[3rem] text-center",children:r}),i.jsx("button",{onClick:()=>a(t.id,!0),className:`p-2 rounded-full cursor-pointer transition-colors ${s&&n>0?"bg-[#2d4660]/10 hover:bg-[#C89212]/30 text-[#2d4660]":"bg-gray-100 text-gray-400 cursor-not-allowed"}`,disabled:!s||n<=0,"aria-label":"Add vote",children:i.jsx(sF,{className:"h-6 w-6"})})]})})]})})]})})});function GZ({feature:e,onClose:t}){return g.useEffect(()=>{const r=window.scrollY;return document.body.style.position="fixed",document.body.style.top=`-${r}px`,document.body.style.width="100%",document.body.style.overflow="hidden",()=>{document.body.style.position="",document.body.style.top="",document.body.style.width="",document.body.style.overflow="",window.scrollTo(0,r)}},[]),i.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:i.jsxs("div",{className:"relative z-10 bg-white rounded-lg p-6 max-w-md w-full max-h-[80vh] overflow-y-auto",children:[i.jsxs("div",{className:"flex justify-between items-center mb-4",children:[i.jsxs("h3",{className:"text-lg font-medium text-[#2d4660]",children:['Voters for "',e.title,'"']}),i.jsx("button",{onClick:t,className:"text-gray-500 hover:text-gray-700 cursor-pointer",children:i.jsx(xs,{className:"h-5 w-5"})})]}),e.voters.length===0?i.jsx("p",{className:"text-gray-500",children:"No votes yet"}):i.jsx("ul",{className:"divide-y divide-gray-200",children:e.voters.map(r=>i.jsxs("li",{className:"py-3 flex justify-between items-center",children:[i.jsxs("div",{children:[i.jsx("p",{className:"font-medium",children:r.name}),i.jsx("p",{className:"text-sm text-gray-500",children:r.email})]}),i.jsxs("div",{className:"bg-[#2d4660]/10 text-[#2d4660] rounded-full px-3 py-1",children:[r.voteCount," ",r.voteCount===1?"vote":"votes"]})]},r.userId))})]})})}function YZ({features:e,onResetVotes:t,onResetAllVotes:r,onBack:n,showVotersList:s,setShowVotersList:a,votingSession:l,effectiveVotesPerUser:u,onLogout:d,currentUser:m,isSystemAdmin:f,isSessionAdmin:p,isStakeholder:x}){const v=ri(),[b,w]=g.useState(!1),j=g.useRef(null);g.useEffect(()=>{if(!b)return;const A=$=>{j.current&&!j.current.contains($.target)&&w(!1)};return document.addEventListener("mousedown",A),document.addEventListener("touchstart",A,{passive:!0}),()=>{document.removeEventListener("mousedown",A),document.removeEventListener("touchstart",A)}},[b]);const _=g.useMemo(()=>[...e].sort((A,$)=>$.votes-A.votes),[e]),E=g.useMemo(()=>_.slice(0,10).map(A=>({name:A.title,votes:A.votes,id:A.id})),[_]),C=Lm(l.endDate),I=zm(C);return i.jsxs("div",{className:"container mx-auto p-4 max-w-6xl pb-8",children:[i.jsx("div",{className:"hidden md:flex md:justify-center mb-2",children:i.jsx("img",{src:ji,alt:"New Millennium Building Systems Logo",className:"-mt-4 cursor-pointer hover:opacity-80 transition-opacity",style:{height:"96px",width:"auto"},onClick:()=>v("/sessions")})}),i.jsxs("div",{className:"flex justify-between items-center mb-6",children:[i.jsxs("div",{className:"flex items-center",children:[i.jsx($p,{src:$a,alt:"New Millennium Building Systems Logo",className:"mr-4 md:hidden cursor-pointer hover:opacity-80 transition-opacity",style:{width:"40px",height:"40px",objectFit:"contain"},onClick:()=>v("/sessions")}),i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsx("h1",{className:"text-2xl font-bold text-[#2d4660] md:text-3xl",children:Na(l.endDate)?"Final Voting Results":"Current Voting Results"}),m&&i.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:[m.name,(()=>{const A=Ow(f,p,x);return A&&i.jsxs("span",{className:`ml-2 inline-flex items-center px-2.5 py-1 rounded text-xs font-medium ${A.className}`,children:[A.icon,A.label]})})()]})]})]}),i.jsxs("div",{ref:j,className:"relative z-40",children:[i.jsxs("div",{className:"hidden md:flex space-x-2",children:[i.jsxs(gt,{variant:"primary",onClick:n,className:"flex items-center",children:[i.jsx(ns,{className:"mr-2 h-4 w-4"}),"Admin Dashboard"]}),i.jsx(gt,{variant:"danger",onClick:r,children:"Reset All Votes"}),i.jsxs(gt,{variant:"gray",onClick:d,className:"flex items-center",children:[i.jsx(ss,{className:"mr-2 h-4 w-4"}),"Logout"]})]}),i.jsx("div",{className:"flex md:hidden",children:i.jsx("button",{onClick:()=>w(!b),className:"p-2 rounded-md border border-gray-200 bg-white shadow-sm","aria-label":"Open menu",children:i.jsx(pi,{className:"h-5 w-5 text-gray-700"})})}),b&&i.jsx("div",{className:"absolute right-0 mt-2 w-56 bg-white border border-gray-200 rounded-lg shadow-lg md:hidden z-50",children:i.jsxs("div",{className:"py-1",children:[i.jsxs("button",{onClick:()=>{w(!1),n()},className:"w-full px-3 py-2 flex items-center text-left hover:bg-gray-50",children:[i.jsx(ns,{className:"h-4 w-4 mr-2 text-gray-700"}),"Admin Dashboard"]}),i.jsxs("button",{onClick:()=>{w(!1),r()},className:"w-full px-3 py-2 flex items-center text-left hover:bg-gray-50 text-red-600",children:[i.jsx(ha,{className:"h-4 w-4 mr-2"}),"Reset All Votes"]}),i.jsxs("button",{onClick:()=>{w(!1),d()},className:"w-full px-3 py-2 flex items-center text-left hover:bg-gray-50",children:[i.jsx(ss,{className:"h-4 w-4 mr-2 text-gray-700"}),"Logout"]})]})})]})]}),i.jsxs("div",{className:"relative z-10 mb-6",children:[i.jsxs("div",{className:"flex items-center justify-between mb-4",children:[i.jsxs("h2",{className:"text-xl font-semibold text-[#2D4660]",children:["Current Session: ",i.jsx("span",{className:"text-[#1E5461]",children:l.title})]}),l.isActive&&i.jsx("div",{className:`${Iw(C)} relative z-10 rounded-md p-3 inline-block border ${C<=2?"border-[#6A4234]/20":C<=4?"border-[#C89212]/20":"border-[#1E5461]/20"}`,children:i.jsxs("div",{className:"flex items-center justify-between gap-4",children:[i.jsxs("div",{className:"flex items-center",children:[i.jsx(un,{className:`h-4 w-4 mr-2 ${I}`}),i.jsx("span",{className:`${I} font-medium`,children:C<=0?"Voting ends today!":`${C} ${C===1?"day":"days"} remaining until ${aa(l.endDate)}`})]}),i.jsx("span",{className:`${I} font-medium`,children:"Voting Active"})]})})]}),i.jsx("div",{className:"text-sm text-gray-600 mb-4",children:i.jsxs("span",{children:["Votes per user: ",u]})}),i.jsx("div",{className:"h-72",children:i.jsx(pB,{width:"100%",height:"100%",children:i.jsxs(oZ,{data:E,margin:{top:20,right:30,left:20,bottom:60},children:[i.jsx(RI,{dataKey:"name",angle:-45,textAnchor:"end",height:80,tick:{fontSize:12}}),i.jsx(MI,{}),i.jsx(qK,{}),i.jsx(OI,{dataKey:"votes",fill:"#3B82F6",children:E.map((A,$)=>i.jsx(jw,{fill:$%2===0?"#2d4660":"#4f6d8e"},`cell-${$}`))})]})})})]}),i.jsxs("div",{className:"relative z-10 bg-white rounded-lg shadow-md p-4",children:[i.jsx("h2",{className:"text-xl font-semibold mb-4 text-[#2d4660]",children:"Feature Details"}),i.jsx("div",{className:"w-full overflow-x-auto",children:i.jsxs("table",{className:"min-w-full divide-y divide-gray-200 table-fixed",children:[i.jsx("thead",{className:"bg-gray-50",children:i.jsxs("tr",{children:[i.jsx("th",{scope:"col",className:"w-12 px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Rank"}),i.jsx("th",{scope:"col",className:"w-1/2 px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Title"}),i.jsx("th",{scope:"col",className:"hidden sm:table-cell px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Epic"}),i.jsx("th",{scope:"col",className:"w-14 px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Votes"}),i.jsx("th",{scope:"col",className:"hidden md:table-cell w-20 px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Voters"}),i.jsx("th",{scope:"col",className:"w-20 px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),i.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:_.map((A,$)=>i.jsxs("tr",{className:"align-top group",children:[i.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm font-medium",children:$+1}),i.jsx("td",{className:"px-4 py-4 whitespace-normal break-words text-sm font-medium",children:A.title}),i.jsx("td",{className:`hidden sm:table-cell px-4 py-4 text-sm ${A.epic||A.workItemType&&A.workItemType.toLowerCase()==="epic"?"w-64":"w-32"}`,children:A.workItemType&&A.workItemType.toLowerCase()==="epic"?i.jsx("span",{className:"text-xs text-gray-600 italic",children:"This Work Item is an Epic"}):A.epic?i.jsx(Gl,{name:A.epic,epicId:A.epicId,description:A.description}):null}),i.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm",children:A.votes}),i.jsx("td",{className:"hidden md:table-cell px-4 py-4 whitespace-nowrap text-sm",children:i.jsxs("button",{onClick:()=>a(A.id),className:"text-[#2d4660] hover:text-[#C89212] flex items-center cursor-pointer",disabled:A.voters.length===0,children:[i.jsx(Ln,{className:"h-4 w-4 mr-1"}),A.voters.length," ",A.voters.length===1?"user":"users"]})}),i.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm md:opacity-0 md:group-hover:opacity-100 transition-opacity",children:i.jsx("button",{onClick:()=>t(A.id),className:"text-[#591D0F] hover:text-[#492434] cursor-pointer",disabled:A.votes===0,children:"Reset Votes"})})]},A.id))})]})})]}),s&&i.jsx(GZ,{feature:e.find(A=>A.id===s),onClose:()=>a(null)})]})}function JZ({navigate:e,votingSession:t}){return i.jsx("div",{className:"relative z-10 flex flex-col items-center justify-center min-h-[80vh] p-6",children:i.jsxs("div",{className:"relative z-10 w-full max-w-md bg-white rounded-lg shadow-lg p-8 text-center",children:[i.jsx("img",{src:ji,alt:"New Millennium Building Systems Logo",className:"mx-auto mb-6",style:{maxWidth:"200px",height:"auto"}}),i.jsx("div",{className:"w-20 h-20 bg-[#1E5461]/10 rounded-full flex items-center justify-center mx-auto mb-6",children:i.jsx(kr,{className:"h-12 w-12 text-[#1E5461]"})}),i.jsx("h1",{className:"text-3xl font-bold text-[#1E5461] mb-4",children:"Thank You!"}),i.jsxs("p",{className:"text-gray-700 text-lg mb-6",children:["Your votes for ",i.jsx("span",{className:"font-semibold",children:t.title})," have been submitted successfully."]}),i.jsx("p",{className:"text-gray-600 mb-8",children:"We appreciate your input in helping prioritize features for our product roadmap."}),i.jsx(gt,{variant:"primary",onClick:()=>e("/sessions"),className:"mx-auto",children:"View All Voting Sessions"})]})})}function ZI({currentRole:e="stakeholder",onSelectStakeholder:t,onSelectSessionAdmin:r,onSelectSystemAdmin:n,showRoleToggle:s=!0}){const a=new Date().getFullYear(),l=[];l.push({key:"stakeholder",label:"Stakeholder View",icon:i.jsx(Ln,{className:"h-4 w-4 inline mr-2"}),onClick:t}),(r||e==="session-admin")&&l.push({key:"session-admin",label:"Session Admin",icon:i.jsx(Xr,{className:"h-4 w-4 inline mr-2"}),onClick:r}),(n||e==="system-admin")&&l.push({key:"system-admin",label:"System Admin",icon:i.jsx(En,{className:"h-4 w-4 inline mr-2"}),onClick:n});const u=["stakeholder","session-admin","system-admin"];l.sort((m,f)=>{const p=u.indexOf(m.key),x=u.indexOf(f.key);return p-x});const d=s&&l.length>0;return i.jsx("footer",{className:"mt-auto bg-gray-50 border-t border-gray-200",children:i.jsxs("div",{className:"container mx-auto px-4 py-6 max-w-6xl",children:[d&&i.jsx("div",{className:"flex justify-center mb-6",children:i.jsx("div",{className:"inline-flex items-center bg-gray-100 rounded-lg p-1",children:l.map(({key:m,label:f,icon:p,onClick:x})=>{const v=e===m,b=!x;return i.jsxs("button",{onClick:x,disabled:b,className:`px-4 py-2 rounded-md text-sm font-medium transition-colors flex items-center ${v?"bg-white text-[#2d4660] shadow-sm":"text-gray-600 hover:text-gray-900"} ${b&&!v?"opacity-60 cursor-not-allowed":""}`,children:[p,i.jsx("span",{children:f})]},m)})})}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 text-sm text-gray-600",children:[i.jsxs("div",{children:[i.jsx("h3",{className:"font-semibold text-gray-900 mb-2",children:"New Millennium Building Systems"}),i.jsxs("p",{className:"text-xs leading-relaxed",children:["A Steel Dynamics Company",i.jsx("br",{}),"Innovation in structural steel manufacturing"]})]}),i.jsxs("div",{children:[i.jsx("h3",{className:"font-semibold text-gray-900 mb-2",children:"Quick Links"}),i.jsxs("ul",{className:"space-y-1 text-xs",children:[i.jsx("li",{children:i.jsx("a",{href:"https://www.steeldynamics.com",target:"_blank",rel:"noopener noreferrer",className:"hover:text-[#2d4660] transition-colors",children:"Steel Dynamics Inc."})}),i.jsx("li",{children:i.jsx("a",{href:"https://www.newmill.com",target:"_blank",rel:"noopener noreferrer",className:"hover:text-[#2d4660] transition-colors",children:"New Millennium"})})]})]}),i.jsxs("div",{children:[i.jsx("h3",{className:"font-semibold text-gray-900 mb-2",children:"Need Help?"}),i.jsx("p",{className:"text-xs",children:"Contact your Product Owner or session administrator for assistance with voting."})]})]}),i.jsx("div",{className:"mt-6 pt-6 border-t border-gray-200 text-center text-xs text-gray-500",children:i.jsxs("p",{children:[" ",a," New Millennium Building Systems, LLC. All rights reserved."]})})]})})}function LC({feature:e,onSubmit:t,onCancel:r}){const{register:n,handleSubmit:s,formState:{errors:a}}=Ad({defaultValues:e?{title:e.title,description:e.description,epic:e.epic}:{epic:FC[0]}});return i.jsxs("form",{onSubmit:s(t),children:[i.jsxs("div",{className:"mb-4",children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Title"}),i.jsx("input",{...n("title",{required:"Title is required"}),className:"w-full px-3 py-2 border border-gray-300 rounded-md"}),a.title&&i.jsx("p",{className:"mt-1 text-sm text-red-600",children:a.title.message})]}),i.jsxs("div",{className:"mb-4",children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),i.jsx("textarea",{...n("description",{required:"Description is required"}),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-md"}),a.description&&i.jsx("p",{className:"mt-1 text-sm text-red-600",children:a.description.message})]}),i.jsxs("div",{className:"mb-4",children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Epic"}),i.jsx("select",{...n("epic",{required:"Epic is required"}),className:"w-full px-3 py-2 border border-gray-300 rounded-md bg-white",children:FC.map(l=>i.jsx("option",{value:l,children:l},l))}),a.epic&&i.jsx("p",{className:"mt-1 text-sm text-red-600",children:a.epic.message})]}),i.jsxs("div",{className:"flex justify-end space-x-2 mt-6",children:[i.jsx(gt,{variant:"secondary",type:"button",onClick:r,children:"Cancel"}),i.jsxs(gt,{variant:"primary",type:"submit",children:[e?"Update":"Add"," Feature"]})]})]})}function XZ({currentUser:e,votingSession:t,onChangeVotes:r,onToggleAdmin:n,isAdmin:s,navigate:a,userVotes:l,features:u,isSystemAdmin:d,isSessionAdmin:m,isStakeholder:f}){const[p,x]=g.useState(!1),v=Object.values(l).reduce((j,_)=>j+_,0),b=u.filter(j=>l[j.id]>0),w=Ow(d,m,f);return i.jsxs("div",{className:"container mx-auto p-4 max-w-6xl min-h-screen pb-8",children:[i.jsx("div",{className:"hidden md:flex md:justify-center mb-2",children:i.jsx("img",{src:ji,alt:"New Millennium Building Systems Logo",className:"-mt-4 cursor-pointer hover:opacity-80 transition-opacity",style:{height:"96px",width:"auto"},onClick:()=>a("/sessions")})}),i.jsxs("div",{className:"flex flex-col md:flex-row md:justify-between md:items-center mb-6",children:[i.jsxs("div",{className:"flex items-start md:items-center",children:[i.jsx($p,{src:$a,alt:"New Millennium Building Systems Logo",className:"mr-4 md:hidden",style:{width:"40px",height:"40px",objectFit:"contain"}}),i.jsxs("div",{children:[i.jsx("h1",{className:"text-2xl font-bold text-[#2d4660] md:text-3xl",children:"Feature Voting"}),i.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:["Welcome, ",e==null?void 0:e.name,(e==null?void 0:e.email)&&i.jsxs("a",{href:`mailto:${e.email}`,className:"ml-2 text-[#2D4660] hover:underline",children:["(",e.email,")"]}),w&&i.jsxs("span",{className:`ml-2 inline-flex items-center px-2.5 py-1 rounded text-xs font-medium ${w.className}`,children:[w.icon,w.label]})]})]})]}),i.jsxs("div",{className:"relative z-10 flex items-center space-x-2 mt-3 md:mt-0 md:justify-end",children:[s&&i.jsxs(gt,{variant:"primary",onClick:n,className:"flex items-center",children:[i.jsx(ns,{className:"mr-2 h-4 w-4"}),i.jsx("span",{className:"hidden md:inline",children:"Admin Dashboard"}),i.jsx("span",{className:"md:hidden",children:"Admin"})]}),i.jsxs(gt,{variant:"gray",onClick:()=>a("/sessions"),className:"flex items-center",children:[i.jsx(ss,{className:"mr-2 h-4 w-4"}),i.jsx("span",{className:"hidden md:inline",children:"All Sessions"}),i.jsx("span",{className:"md:hidden",children:"Sessions"})]})]})]}),i.jsx("div",{className:"max-w-3xl mx-auto",children:i.jsxs("div",{className:"relative z-10 bg-white rounded-lg shadow-lg p-8 text-center",children:[i.jsx("div",{className:"w-20 h-20 bg-[#1E5461]/10 rounded-full flex items-center justify-center mx-auto mb-6",children:i.jsx(kr,{className:"h-12 w-12 text-[#1E5461]"})}),i.jsx("h2",{className:"text-3xl font-bold text-[#1E5461] mb-4",children:"Votes Already Submitted"}),i.jsxs("p",{className:"text-gray-700 text-lg mb-2",children:["Welcome back, ",i.jsx("span",{className:"font-semibold",children:e.name}),"!"]}),i.jsxs("p",{className:"text-gray-600 mb-6",children:["You have already submitted your votes for ",i.jsx("span",{className:"font-semibold",children:t.title}),"."]}),i.jsxs("div",{className:"bg-gray-50 rounded-lg p-6 mb-6",children:[i.jsx("h3",{className:"text-lg font-semibold text-[#2d4660] mb-4",children:"Your Current Votes"}),i.jsxs("div",{className:"space-y-3",children:[b.map(j=>i.jsxs("div",{className:"flex justify-between items-start gap-4",children:[i.jsxs("div",{children:[i.jsx("span",{className:"block text-gray-700 font-medium",children:j.title}),j.epic&&i.jsx("div",{className:"mt-1",children:i.jsx(Gl,{name:j.epic,truncateAt:null,className:"text-xs bg-[#1E5461]/10 px-2 py-0.5 rounded"})})]}),i.jsxs("span",{className:"bg-[#1E5461]/10 text-[#1E5461] rounded-full px-3 py-1 font-medium self-center",children:[l[j.id]," ",l[j.id]===1?"vote":"votes"]})]},j.id)),i.jsx("div",{className:"border-t border-gray-200 pt-3 mt-3",children:i.jsxs("div",{className:"flex justify-between items-center font-semibold",children:[i.jsx("span",{className:"text-[#2d4660]",children:"Total Votes"}),i.jsx("span",{className:"text-[#2d4660]",children:v})]})})]})]}),i.jsx("div",{className:"bg-[#C89212]/10 border border-[#C89212]/20 rounded-lg p-4 mb-6",children:i.jsxs("div",{className:"flex items-start text-left",children:[i.jsx(VF,{className:"h-5 w-5 text-[#C89212] mr-3 mt-0.5 flex-shrink-0"}),i.jsx("div",{children:i.jsxs("p",{className:"text-sm text-gray-700",children:["If you'd like to change your votes, you can do so below. However, please note that this will",i.jsx("span",{className:"font-semibold",children:" permanently remove your previous votes"})," and allow you to vote again. This action cannot be undone."]})})]})}),i.jsxs(gt,{variant:"gold",onClick:()=>x(!0),className:"mx-auto text-lg py-3 px-8",children:[i.jsx(Jo,{className:"mr-2 h-5 w-5"}),"Change My Votes"]})]})}),i.jsx($h,{show:p,title:"Change Your Votes?",message:"This will permanently remove all your previous votes for this session and allow you to vote again. This action cannot be undone. Are you sure you want to continue?",onConfirm:r,onCancel:()=>x(!1),confirmText:"Yes, Change My Votes",cancelText:"Cancel",type:"reset"})]})}const zC=kt.memo(function({features:t,currentUser:r,pendingVotes:n,pendingUsedVotes:s,onVote:a,onSubmitVotes:l,onToggleAdmin:u,isAdmin:d,votingSession:m,navigate:f,effectiveVotesPerUser:p,sessionId:x,onLogout:v,onSuggestionSubmitted:b,isSystemAdmin:w,isSessionAdmin:j,isStakeholder:_}){const[E,C]=g.useState([...t]),[I,A]=g.useState(!1),[$,B]=g.useState("idle"),[T,K]=g.useState(!1),[Q,se]=g.useState({}),[G,le]=g.useState(!0),[F,Y]=g.useState(!1),[J,V]=g.useState(!1),[H,re]=g.useState(""),[ie,M]=g.useState(""),[Z,fe]=g.useState(""),[ye,Le]=g.useState(""),[je,Me]=g.useState(!1),[Se,z]=g.useState(null),[ue,de]=g.useState(!1),[ee,Ye]=g.useState(!1),[Oe,rt]=g.useState([]),[Nt,vt]=g.useState([]),ot=g.useRef(null),rr=g.useRef(null),U=Ow(w,j,_);g.useEffect(()=>{if(!F)return;const Be=He=>{rr.current&&!rr.current.contains(He.target)&&Y(!1)};return document.addEventListener("mousedown",Be),document.addEventListener("touchstart",Be,{passive:!0}),()=>{document.removeEventListener("mousedown",Be),document.removeEventListener("touchstart",Be)}},[F]),g.useEffect(()=>{C([...t])},[t]),g.useEffect(()=>{async function Be(){if(!r||!x){le(!1);return}try{const Ze=(await Lo(x)).filter(ft=>ft.user_id===r.id);if(Ze.length>0){const ft={};Ze.forEach(nt=>{ft[nt.feature_id]=nt.vote_count}),se(ft),K(!0)}else K(!1),se({})}catch(He){console.error("Error checking existing votes:",He),K(!1)}finally{le(!1)}}Be()},[r,x]);const q=g.useCallback(async()=>{if(!(!r||!x))try{await N$(x,r.id),K(!1),se({})}catch(Be){console.error("Error changing votes:",Be),alert("Failed to reset votes. Please try again.")}},[r,x]),ne=g.useCallback(()=>{I||(A(!0),B("fadeOut"),setTimeout(()=>{B("rearranging"),setTimeout(()=>{C(WZ(t)),B("fadeIn"),setTimeout(()=>{B("idle"),A(!1)},400)},200)},400))},[t,I]),Ne=g.useCallback(async Be=>{const He=t.find(Ze=>Ze.id===Be);if(!(!He||!r))try{await P$({session_id:x,feature_id:Be,feature_title:He.title,requester_id:r.id,requester_name:r.name,requester_email:r.email,created_at:new Date().toISOString()})}catch(Ze){throw console.error("Error submitting info request:",Ze),alert("Failed to submit request. Please try again."),Ze}},[t,r,x]),Ie=g.useCallback(()=>{z(null),de(!1),V(!0)},[]),Ce=g.useCallback(()=>{je||(Nt.forEach(Be=>{Be&&URL.revokeObjectURL(Be)}),V(!1),z(null),de(!1),re(""),M(""),fe(""),Le(""),rt([]),vt([]),ot.current&&(ot.current.value=""))},[je,Nt]),Te=g.useCallback(Be=>{const He=Array.from(Be.target.files||[]),Ze=[],ft=[],nt=["image/jpeg","image/jpg","image/png","image/gif","image/webp","application/pdf"];He.forEach(tt=>{nt.includes(tt.type)&&(Ze.push(tt),tt.type.startsWith("image/")?ft.push(URL.createObjectURL(tt)):ft.push(""))});const Kt=3-Oe.length,dr=Ze.slice(0,Kt),Pr=ft.slice(0,Kt);rt(tt=>[...tt,...dr]),vt(tt=>[...tt,...Pr]),ot.current&&(ot.current.value="")},[Oe]),dt=g.useCallback(Be=>{rt(He=>{const Ze=He[Be];return Ze&&Ze.type.startsWith("image/")?vt(ft=>{const nt=ft[Be];return nt&&URL.revokeObjectURL(nt),ft.filter((Kt,dr)=>dr!==Be)}):vt(ft=>ft.filter((nt,Kt)=>Kt!==Be)),He.filter((ft,nt)=>nt!==Be)})},[]);g.useEffect(()=>()=>{Nt.forEach(Be=>{Be&&URL.revokeObjectURL(Be)})},[Nt]);const Mt=g.useCallback(async Be=>{var Kt,dr;Be.preventDefault();const He=H.trim(),Ze=ie.trim(),ft=Z.trim(),nt=ye.trim();if(!He){z("Please provide a brief title for your suggestion.");return}if(!x){z("Unable to link this suggestion to the current session.");return}try{Me(!0),z(null);const Pr=[];if(Oe.length>0)for(let Bt=0;Bt<Oe.length;Bt++){const qt=Oe[Bt],Wt=qt.name.split(".").pop(),Qt=`${Date.now()}-${Bt}.${Wt}`,sr=`suggestions/${x}/${Qt}`;try{const{data:Mr,error:Zt}=await Pe.storage.from("feature-attachments").upload(sr,qt,{cacheControl:"3600",upsert:!1});if(Zt)console.error("Error uploading file:",Zt),((Kt=Zt.message)!=null&&Kt.includes("Bucket not found")||(dr=Zt.message)!=null&&dr.includes("not found"))&&console.warn('Storage bucket "feature-attachments" not found. Please create it in Supabase Storage.');else{const{data:{publicUrl:lr}}=Pe.storage.from("feature-attachments").getPublicUrl(sr);Pr.push(lr)}}catch(Mr){console.error("Error uploading file:",Mr)}}const tt=await O$({session_id:x,title:He,description:Ze||null,requester_id:(r==null?void 0:r.id)??null,requester_name:(r==null?void 0:r.name)??null,requester_email:(r==null?void 0:r.email)??null,whatWouldItDo:ft||null,howWouldItWork:nt||null,attachment_urls:Pr.length>0?Pr:null});try{const qt=(await qd(x)).map(Wt=>{var Qt;return(Qt=Wt.user)==null?void 0:Qt.email}).filter(Wt=>!!Wt);if(qt.length>0){const Wt=(m==null?void 0:m.title)||"this session",Qt=(r==null?void 0:r.name)||"A user",sr=(r==null?void 0:r.email)||"",Mr="https://dcchoffman.github.io/feature-voting-app/New-Millennium-color-logo1.png",Zt=window.location.pathname.startsWith("/feature-voting-app")?"/feature-voting-app":"",lr=`${window.location.origin}${Zt}/admin`,mr=Vt=>Vt.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;"),ir=Vt=>mr(Vt).replace(/\n/g,"<br />"),qn=`
<table width="100%" cellpadding="0" cellspacing="0" border="0" style="background-color: #f9fafb; font-family: Arial, sans-serif;">
  <tr>
    <td align="center" style="padding: 48px 20px;">
      <table width="600" cellpadding="0" cellspacing="0" border="0" style="background-color: #ffffff; border-radius: 8px; box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);">
        <!-- Logo Header -->
        <tr>
          <td style="background-color: #ffffff; padding: 32px 40px 24px 40px; text-align: center;">
            <img src="${Mr}" alt="New Millennium Building Systems" width="300" height="96" style="height: 96px; width: auto; max-width: 300px; display: block; margin: 0 auto; border: 0;" />
            <div style="font-size: 20px; font-weight: bold; color: #2d4660; margin-top: 16px;">Feature Voting System</div>
            <div style="font-size: 11px; color: #6b7280; margin-top: 4px;">has a</div>
            <div style="font-size: 25px; font-weight: bold; color: #2d4660; margin-top: 4px;">New Feature Suggestion</div>
            <div style="font-size: 11px; color: #6b7280; margin-top: 4px;">for the</div>
            <div style="font-size: 30px; font-weight: bold; color: #2d4660; margin-top: 4px;">${mr(Wt)}</div>
          </td>
        </tr>
        
        <!-- Main Content -->
        <tr>
          <td style="background-color: #ffffff; padding: 40px;">
            <p style="margin: 0 0 16px 0; font-size: 16px; color: #333; line-height: 1.6;">
              <strong style="color: #2d4660;">${mr(Qt)}</strong>${sr?` (${mr(sr)})`:""} has submitted a new feature suggestion.
            </p>
            
            <!-- Suggestion Details Box -->
            <div style="background-color: #f3f4f6; padding: 20px; border-radius: 6px; margin: 24px 0; border-left: 4px solid #C89212;">
              <h3 style="color: #2d4660; margin: 0 0 16px 0; font-size: 18px; font-weight: bold;">${mr(He)}</h3>
              
              ${Ze?`
              <p style="margin: 0 0 12px 0; font-size: 14px; color: #111827; line-height: 1.6;">
                <strong style="color: #2d4660;">Problem it solves:</strong><br />
                <span style="color: #374151;">${ir(Ze)}</span>
              </p>
              `:""}
              
              ${ft?`
              <p style="margin: 0 0 12px 0; font-size: 14px; color: #111827; line-height: 1.6;">
                <strong style="color: #2d4660;">What it would do:</strong><br />
                <span style="color: #374151;">${ir(ft)}</span>
              </p>
              `:""}
              
              ${nt?`
              <p style="margin: 0 0 12px 0; font-size: 14px; color: #111827; line-height: 1.6;">
                <strong style="color: #2d4660;">How it would work:</strong><br />
                <span style="color: #374151;">${ir(nt)}</span>
              </p>
              `:""}
              
              ${Pr.length>0?`
              <p style="margin: 12px 0 0 0; font-size: 14px; color: #111827; line-height: 1.6;">
                <strong style="color: #2d4660;">Attachments:</strong> ${Pr.length} file(s) - View on admin page
              </p>
              `:""}
            </div>
            
            <!-- Go to Admin Dashboard Button -->
            <table width="100%" cellpadding="0" cellspacing="0" border="0" style="margin: 32px 0;">
              <tr>
                <td align="center">
                  <a href="${lr}" style="display: inline-block; padding: 12px 24px; background-color: #C89212; color: white; text-decoration: none; border-radius: 6px; font-weight: 600; font-size: 16px; box-shadow: 0 1px 2px 0 rgba(0, 0, 0, 0.05);">Go to Admin Dashboard</a>
                </td>
              </tr>
            </table>
            
            <p style="margin: 24px 0 0 0; font-size: 14px; color: #6b7280; line-height: 1.6;">
              You can review and manage this suggestion from the admin dashboard.
            </p>
          </td>
        </tr>
        
        <!-- Footer -->
        <tr>
          <td style="background-color: #f9fafb; padding: 20px; text-align: center; border-top: 1px solid #e5e7eb; font-size: 12px; color: #6b7280;">
            <p style="margin: 0 0 8px 0;">This is an automated message from the Feature Voting System.</p>
            <p style="margin: 0; color: #9ca3af;"> ${new Date().getFullYear()} New Millennium Building Systems</p>
          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>`;await Promise.all(qt.map(Vt=>Yo({to:Vt,subject:`New Feature Suggestion: ${He}`,html:qn}).catch(ls=>{console.error(`Failed to send email to ${Vt}:`,ls)})))}}catch(Bt){console.error("Error sending admin emails:",Bt)}b==null||b(tt),V(!1),re(""),M(""),fe(""),Le(""),rt([]),vt([]),ot.current&&(ot.current.value=""),Ye(!0)}catch(Pr){console.error("Error submitting feature suggestion:",Pr),z("We were unable to submit your suggestion. Please try again in a moment.")}finally{Me(!1)}},[ie,H,Z,ye,Oe,r,x,m,b]);if(!r)return null;if(G)return i.jsx("div",{className:"container mx-auto p-4 max-w-6xl min-h-screen flex items-center justify-center",children:i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-[#2d4660] mx-auto mb-4"}),i.jsx("p",{className:"text-gray-600",children:"Loading your voting status..."})]})});if(T)return i.jsx(XZ,{currentUser:r,votingSession:m,onChangeVotes:q,onToggleAdmin:u,isAdmin:d,navigate:f,userVotes:Q,features:t,isSystemAdmin:w,isSessionAdmin:j,isStakeholder:_});const qe=p-s,bt=qe===0,jt=m.isActive;return i.jsxs("div",{className:"container mx-auto p-4 max-w-6xl pb-8",children:[i.jsx("div",{className:"hidden md:flex md:justify-center mb-2",children:i.jsx("img",{src:ji,alt:"New Millennium Building Systems Logo",className:"-mt-4 cursor-pointer hover:opacity-80 transition-opacity",style:{height:"96px",width:"auto"},onClick:()=>f("/sessions")})}),i.jsxs("div",{className:"flex justify-between items-start md:items-center mb-6",children:[i.jsxs("div",{className:"flex items-start md:items-center",children:[i.jsx($p,{src:$a,alt:"New Millennium Building Systems Logo",className:"mr-4 md:hidden",style:{width:"40px",height:"40px",objectFit:"contain"}}),i.jsxs("div",{children:[i.jsx("h1",{className:"text-2xl font-bold text-[#2d4660] md:text-3xl",children:"Feature Voting"}),i.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:["Welcome, ",r==null?void 0:r.name,(r==null?void 0:r.email)&&i.jsxs("a",{href:`mailto:${r.email}`,className:"ml-2 text-[#2D4660] hover:underline",children:["(",r.email,")"]}),U&&i.jsxs("span",{className:`ml-2 inline-flex items-center px-2.5 py-1 rounded text-xs font-medium ${U.className}`,children:[U.icon,U.label]})]})]})]}),i.jsxs("div",{ref:rr,className:"relative z-40 flex items-start md:items-center",children:[i.jsxs("div",{className:"hidden md:flex items-center space-x-2",children:[d&&i.jsxs(gt,{variant:"primary",onClick:u,className:"flex items-center",children:[i.jsx(ns,{className:"mr-2 h-4 w-4"}),"Admin Dashboard"]}),i.jsx(gt,{variant:"gray",onClick:()=>f("/sessions"),className:"flex items-center",children:"All Sessions"}),i.jsxs(gt,{variant:"gray",onClick:v,className:"flex items-center",children:[i.jsx(ss,{className:"mr-2 h-4 w-4"}),"Logout"]})]}),i.jsx("div",{className:"flex md:hidden",children:i.jsx("button",{onClick:()=>Y(!F),className:"p-2 rounded-md border border-gray-200 bg-white shadow-sm","aria-label":"Open menu",children:i.jsx(pi,{className:"h-5 w-5 text-gray-700"})})}),F&&i.jsx("div",{className:"absolute right-0 mt-2 w-56 bg-white border border-gray-200 rounded-lg shadow-lg md:hidden z-50",children:i.jsxs("div",{className:"py-1",children:[d&&i.jsxs("button",{onClick:()=>{Y(!1),u()},className:"w-full px-3 py-2 flex items-center text-left hover:bg-gray-50",children:[i.jsx(ns,{className:"h-4 w-4 mr-2 text-gray-700"}),"Admin Dashboard"]}),i.jsx("button",{onClick:()=>{Y(!1),f("/sessions")},className:"w-full px-3 py-2 flex items-center text-left hover:bg-gray-50",children:"All Sessions"}),i.jsxs("button",{onClick:()=>{Y(!1),v()},className:"w-full px-3 py-2 flex items-center text-left hover:bg-gray-50",children:[i.jsx(ss,{className:"h-4 w-4 mr-2 text-gray-700"}),"Logout"]})]})})]})]}),i.jsxs("div",{className:"relative z-10 mb-6",children:[i.jsx("div",{className:"flex items-center justify-between mb-4",children:i.jsxs("h2",{className:"text-xl font-semibold text-[#2D4660]",children:["Current Session: ",i.jsx("span",{className:"text-[#1E5461]",children:m.title})]})}),m.goal&&m.goal.trim()&&i.jsx("div",{className:"pt-3 border-t border-gray-200 mb-4",children:i.jsxs("div",{className:"relative overflow-hidden rounded-2xl border border-[#C89212]/30 bg-gradient-to-r from-[#FFF6E3] via-[#FFF9ED] to-white shadow-sm p-5 md:p-6",children:[i.jsx("span",{className:"pointer-events-none absolute -top-10 left-4 h-32 w-32 rounded-full bg-[#C89212]/25 blur-3xl"}),i.jsx("span",{className:"pointer-events-none absolute -bottom-16 right-6 h-40 w-40 rounded-full bg-[#F4C66C]/20 blur-3xl"}),i.jsx("span",{className:"pointer-events-none absolute top-6 right-10 text-[#F4B400] text-xl animate-ping",children:""}),i.jsx("span",{className:"pointer-events-none absolute bottom-8 left-10 text-[#C89212] text-lg animate-pulse",children:""}),i.jsx("div",{className:"relative flex flex-col gap-6 md:flex-row md:items-start md:justify-between",children:i.jsxs("div",{className:"flex items-start gap-5 md:pr-8 lg:pr-12",children:[i.jsxs("div",{className:"relative",children:[i.jsx("div",{className:"h-16 w-16 md:h-20 md:w-20 rounded-full bg-white shadow-lg shadow-[#C89212]/30 border border-[#C89212]/40 flex items-center justify-center text-[#C89212]",children:i.jsx(Jv,{className:"h-8 w-8 md:h-10 md:w-10"})}),i.jsx("span",{className:"pointer-events-none absolute -top-3 -left-2 text-[#C89212] text-base animate-ping",children:""}),i.jsx("span",{className:"pointer-events-none absolute bottom-0 -right-3 text-[#F5D79E] text-xl animate-pulse",children:""})]}),i.jsxs("div",{children:[i.jsx("p",{className:"text-xs font-semibold uppercase tracking-[0.2em] text-[#C89212]/80 mb-1",children:"Session Goal"}),i.jsx("h3",{className:"text-lg md:text-xl font-semibold text-[#2D4660] leading-relaxed",children:m.goal})]})]})})]})}),(()=>{const Be=Lm(m.endDate),He=zm(Be),Ze=Iw(Be);return i.jsx("div",{className:`${Ze} rounded-md p-3 md:p-4 border ${Be<=2?"border-[#6A4234]/20":Be<=4?"border-[#C89212]/20":"border-[#1E5461]/20"}`,children:i.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-3 md:gap-4",children:[i.jsxs("div",{className:"flex items-center flex-shrink-0",children:[i.jsx(un,{className:`h-5 w-5 mr-2 ${He}`}),i.jsxs("div",{className:"leading-tight",children:[i.jsxs("span",{className:`font-medium ${He}`,children:["Voting ends: ",aa(m.endDate)]}),i.jsx("div",{className:"text-sm -mt-0.5",children:Be<=0?i.jsx("span",{className:"text-red-600 font-medium",children:"Voting ends today!"}):i.jsxs("span",{className:`${He}`,children:[i.jsx("span",{className:"font-semibold text-lg",children:Be})," ",Be===1?"day":"days"," remaining"]})})]})]}),i.jsx("div",{className:"flex items-center justify-center md:justify-end flex-1 min-w-0",children:i.jsx("div",{className:"leading-tight",children:i.jsxs("div",{className:"flex items-center justify-center md:justify-start",children:[i.jsx(es,{className:`h-[30px] w-[30px] mr-2 ${He}`}),i.jsxs("div",{className:"text-sm -mt-0.5 leading-none",children:[i.jsxs("div",{className:"flex items-baseline justify-center md:justify-start",children:[i.jsx("span",{className:`${He} mr-1`,style:{fontSize:"14px"},children:"You have"}),i.jsx("span",{className:`${He} font-semibold text-2xl`,children:qe}),i.jsxs("span",{className:`${He} font-semibold text-lg ml-1`,children:["/ ",p]})]}),i.jsx("span",{className:`${He} block -mt-0.5 text-center`,style:{fontSize:"14px"},children:"votes remaining"})]})]})})})]})})})()]}),!jt&&i.jsx("div",{className:"mb-6 bg-[#C89212]/10 p-4 rounded-lg border border-[#C89212]/20",children:i.jsxs("div",{className:"flex items-center text-[#6A4234]",children:[i.jsx(Qm,{className:"h-5 w-5 mr-2"}),i.jsxs("span",{className:"font-medium",children:["Voting is currently ",Na(m.endDate)?"closed":"not yet open",".",Na(m.endDate)?` Voting ended on ${aa(m.endDate)}.`:` Voting will open on ${aa(m.startDate)}.`]})]})}),i.jsxs("div",{className:"flex flex-col md:flex-row md:justify-between md:items-center mb-4 gap-3",children:[i.jsx("h2",{className:"text-xl font-semibold text-[#2d4660]",children:"Available Features"}),i.jsxs("div",{className:"flex flex-col md:flex-row items-stretch md:items-center gap-3",children:[i.jsxs(gt,{variant:"gold",onClick:Ie,className:"flex items-center justify-center w-full md:w-auto",children:[i.jsx(Zm,{className:"h-4 w-4 mr-2"}),"Suggest a Feature"]}),t.length>6&&i.jsx(HZ,{isShuffling:I,onShuffle:ne})]})]}),i.jsx("div",{className:`grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 ${s>0?"mb-32":""}`,children:E.map(Be=>{const He=n[Be.id]||0;return i.jsx(KZ,{feature:Be,userVoteCount:He,remainingVotes:qe,votingIsActive:jt,onVote:a,isShuffling:I,shuffleStage:$,currentUser:r,onRequestInfo:Ne},Be.id)})}),s>0&&(()=>{const Be=Lm(m.endDate),He=zm(Be),Ze=UZ(Be);return i.jsx("div",{className:`fixed bottom-0 left-0 right-0 ${Ze} rounded-t-md border-t ${Be<=2?"border-[#6A4234]/20":Be<=4?"border-[#C89212]/20":"border-[#1E5461]/20"} p-3 md:p-4 z-50`,children:i.jsxs("div",{className:"container mx-auto max-w-6xl flex items-center justify-center",children:[i.jsx("div",{className:"flex items-center flex-1 min-w-0 justify-center",style:{paddingLeft:"60px",width:"100px"},children:i.jsx("div",{className:"leading-tight w-full",style:{width:"120px"},children:i.jsxs("div",{className:"flex items-center",children:[i.jsx(es,{className:`h-[30px] w-[30px] mr-2 ${He}`,style:{marginLeft:"-88px"}}),i.jsxs("div",{className:"text-sm -mt-0.5 leading-none flex-1",children:[i.jsxs("div",{className:"flex items-baseline justify-center",style:{marginLeft:"-12px"},children:[i.jsx("span",{className:`${He} mr-1`,style:{fontSize:"14px",marginLeft:"-48px"},children:"You have"}),i.jsx("span",{className:`${He} font-semibold text-2xl`,children:qe}),i.jsxs("span",{className:`${He} font-semibold text-lg ml-1`,children:["/ ",p]})]}),i.jsx("span",{className:`${He} block -mt-0.5 text-center`,style:{fontSize:"14px"},children:"votes remaining"})]})]})})}),i.jsx("button",{onClick:l,className:`py-3 px-6 rounded-lg font-medium cursor-pointer ${bt?"bg-[#1E5461] hover:bg-[#173B65] text-white":"bg-gray-300 text-gray-600 cursor-not-allowed"}`,disabled:!bt,children:"Submit Votes"})]})})})(),i.jsx(bn,{isOpen:J,onClose:Ce,title:"Suggest a Feature",maxWidth:"max-w-lg",children:i.jsxs("form",{onSubmit:Mt,className:"space-y-4",children:[i.jsxs("div",{className:"bg-[#1E5461]/10 border border-[#1E5461]/30 text-sm text-[#1E5461] rounded-md px-3 py-2",children:["All suggested features will be reviewed for ",i.jsx("strong",{children:"future sessions"}),".",i.jsx("br",{}),"Suggestions will not be added to the current session."]}),Se&&i.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 text-sm rounded-md px-3 py-2",children:Se}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Feature title"}),i.jsx("input",{type:"text",value:H,onChange:Be=>re(Be.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md",placeholder:"Give your feature a name",disabled:je})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"What problem would this solve? (optional)"}),i.jsx("textarea",{value:ie,onChange:Be=>M(Be.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md",rows:4,placeholder:"Share a few details so we understand the request.",disabled:je})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"What would it do? (optional)"}),i.jsx("textarea",{value:Z,onChange:Be=>fe(Be.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md",rows:3,placeholder:"Describe the functionality or outcome users would experience.",disabled:je})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"How would it work? (optional)"}),i.jsx("textarea",{value:ye,onChange:Be=>Le(Be.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md",rows:3,placeholder:"Share any ideas on workflow, technical approach, or integration.",disabled:je})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Attach Images or PDFs (optional, up to 3)"}),i.jsx("input",{ref:ot,type:"file",accept:"image/*,.pdf",multiple:!0,onChange:Te,disabled:je||Oe.length>=3,className:"hidden",id:"suggestion-file-input"}),i.jsxs("label",{htmlFor:"suggestion-file-input",className:`inline-flex items-center px-4 py-2 border border-gray-300 rounded-md cursor-pointer ${je||Oe.length>=3?"bg-gray-100 text-gray-400 cursor-not-allowed":"bg-white text-gray-700 hover:bg-gray-50"}`,children:[i.jsx(El,{className:"h-4 w-4 mr-2"}),Oe.length>=3?"Maximum 3 files":"Attach Files"]}),Oe.length>0&&i.jsx("div",{className:"mt-3 flex flex-wrap gap-3",children:Oe.map((Be,He)=>{const Ze=Be.type.startsWith("image/"),ft=Be.type==="application/pdf",nt=Nt[He]||null;return i.jsxs("div",{className:"relative group border border-gray-300 rounded-md overflow-hidden",style:{width:"100px",height:"100px"},children:[Ze&&nt?i.jsx("img",{src:nt,alt:Be.name,className:"w-full h-full object-cover"}):ft?i.jsx("div",{className:"w-full h-full flex items-center justify-center bg-red-50",children:i.jsx(El,{className:"h-8 w-8 text-red-600"})}):null,i.jsx("button",{type:"button",onClick:()=>dt(He),className:"absolute top-1 right-1 bg-red-500 text-white rounded-full p-1 opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center",style:{width:"20px",height:"20px"},"aria-label":`Remove ${Be.name}`,children:i.jsx(xs,{className:"h-3 w-3"})}),i.jsx("div",{className:"absolute bottom-0 left-0 right-0 bg-black bg-opacity-50 text-white text-xs p-1 truncate",children:Be.name.length>15?`${Be.name.substring(0,15)}...`:Be.name})]},He)})})]}),i.jsxs("div",{className:"flex justify-end gap-2",children:[i.jsx(gt,{type:"button",variant:"secondary",onClick:Ce,disabled:je,children:"Close"}),i.jsxs(gt,{type:"submit",variant:"primary",disabled:je,className:"flex items-center",children:[je&&i.jsx(Jo,{className:"h-4 w-4 animate-spin mr-2"}),"Submit Suggestion"]})]})]})}),i.jsx(bn,{isOpen:ee,onClose:()=>Ye(!1),title:"",maxWidth:"max-w-md",hideHeader:!0,children:i.jsxs("div",{className:"text-center py-6",children:[i.jsx("div",{className:"mx-auto flex items-center justify-center h-16 w-16 rounded-full bg-green-100 mb-4",children:i.jsx(kr,{className:"h-10 w-10 text-green-600"})}),i.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Thank You!"}),i.jsx("p",{className:"text-gray-600 mb-1",children:"Your feature suggestion has been submitted successfully."}),i.jsx("p",{className:"text-sm text-gray-500",children:"The session admins have been notified and will review your suggestion."})]})})]})});function ix({defaultVotesPerUser:e=10,adminMode:t=!1,resultsMode:r=!1}){const{currentSession:n,currentUser:s,setCurrentUser:a,setCurrentSession:l,refreshSessions:u,isSystemAdmin:d,isAdmin:m,isStakeholder:f}=Ta(),p=ri(),x=async()=>{try{await Pe.auth.signOut()}catch{}try{l(null)}catch{}a(null);try{localStorage.removeItem("voting_system_current_session"),localStorage.removeItem("azureDevOpsAuthInProgress"),sessionStorage.removeItem("oauth_return_path"),sessionStorage.removeItem("oauth_action")}catch{}p("/login",{replace:!0})};g.useEffect(()=>{const ae=new URLSearchParams(window.location.search),_e=ae.has("code")||ae.has("error"),$e=localStorage.getItem("voting_system_current_session");!n&&!_e&&!$e&&p("/sessions")},[n,p]);const v=g.useMemo(()=>{const ae=new URLSearchParams(window.location.search);return ae.has("code")||ae.has("error")},[]),[b,w]=g.useState([]),[j,_]=g.useState(!0),[E,C]=g.useState(zZ),[I,A]=g.useState(r?"results":t||v?"admin":"voting"),[$,B]=g.useState(t||v||r),[T,K]=g.useState(null),[Q,se]=g.useState(!1),[G,le]=g.useState(null),[F,Y]=g.useState({...FZ,votesPerUser:e}),[J,V]=g.useState(LZ),[H,re]=g.useState(IC()),[ie,M]=g.useState([]),[Z,fe]=g.useState([]),[ye,Le]=g.useState([]),[je,Me]=g.useState(!1),[Se,z]=g.useState(null),[ue,de]=g.useState(null),[ee,Ye]=g.useState(!1),[Oe,rt]=g.useState([]),[Nt,vt]=g.useState([]),[ot,rr]=g.useState(d?"system":"session"),[U,q]=g.useState({}),[ne,Ne]=g.useState(0),[Ie,Ce]=g.useState({showReset:!1,showResetAll:!1,showDeleteSession:!1,targetId:null}),[Te,dt]=g.useState(!1),Mt=g.useRef(!1),qe=g.useRef(!1),bt=g.useRef(null),jt=g.useMemo(()=>F.useAutoVotes?Math.max(1,Math.floor(b.length/2)):F.votesPerUser,[F.useAutoVotes,F.votesPerUser,b.length]),Be=g.useRef(!1);g.useEffect(()=>{if(Be.current){console.log("OAuth processing already in progress, skipping...");return}(async()=>{const _e=new URLSearchParams(window.location.search),$e=_e.has("code")||_e.has("error");if($e&&!n){console.log("OAuth callback detected, waiting for session to load..."),localStorage.getItem("voting_system_current_session")&&console.log("Found stored session ID, waiting for SessionContext to restore it...");return}if(localStorage.getItem("azureDevOpsAuthInProgress")&&localStorage.removeItem("azureDevOpsAuthInProgress"),!(!$e||Mt.current)){if(!n){console.log("No session available yet, waiting...");return}Be.current=!0,Mt.current=!0,console.log("Processing OAuth callback with session:",n.id);try{const Xe=await jZ();if(Xe){const Fe=new Date(Date.now()+Xe.expiresIn*1e3).toISOString(),Yt={...J,accessToken:Xe.accessToken,refreshToken:Xe.refreshToken,tokenExpiresAt:Fe,enabled:!0,clientId:vi.clientId,tenantId:vi.tenantId};await wl(n.id,Yt),V(Yt);const Dt=sessionStorage.getItem("oauth_return_path")||"/admin";sessionStorage.removeItem("oauth_return_path"),console.log("OAuth successful, navigating to:",Dt),p(Dt,{replace:!0})}}catch(Xe){console.error("OAuth callback error:",Xe),z("Failed to authenticate with Azure DevOps");const Fe="/admin";sessionStorage.removeItem("oauth_return_path"),p(Fe,{replace:!0})}finally{Be.current=!1}}})()},[n,p,J]),g.useEffect(()=>{r&&I!=="results"?A("results"):t&&I!=="admin"?A("admin"):!t&&!r&&I==="admin"&&A("voting")},[t,r,I]);const He=g.useCallback(ae=>{localStorage.setItem("azureDevOpsAuthInProgress","true"),ae&&sessionStorage.setItem("oauth_action",ae),sessionStorage.getItem("oauth_return_path")||sessionStorage.setItem("oauth_return_path","/admin"),SZ()},[]),Ze=g.useCallback(async ae=>{if(!ae.accessToken||!ae.refreshToken||!ae.tokenExpiresAt)throw new Error("Not authenticated");if(wZ(ae.tokenExpiresAt)){const _e=await hZ(ae.refreshToken),$e=new Date(Date.now()+_e.expiresIn*1e3).toISOString(),ze={...ae,accessToken:_e.accessToken,tokenExpiresAt:$e};return n&&(await wl(n.id,ze),V(ze)),_e.accessToken}return ae.accessToken},[n]),ft=g.useCallback(async()=>{if(!n)return[];const[ae,_e]=await Promise.all([ja(n.id),Lo(n.id)]);return ae.map($e=>{const Xe=_e.filter(Yt=>Yt.feature_id===$e.id).map(Yt=>({userId:Yt.user_id,name:Yt.user_name,email:Yt.user_email,voteCount:Yt.vote_count})),Fe=Xe.reduce((Yt,Dt)=>Yt+Dt.voteCount,0);return{id:$e.id,title:$e.title,description:$e.description,epic:$e.epic,epicId:$e.epic_id||$e.epicId,state:$e.state,areaPath:$e.area_path,tags:$e.tags||[],azureDevOpsId:$e.azure_devops_id,azureDevOpsUrl:$e.azure_devops_url,workItemType:$e.workItemType||$e.work_item_type,votes:Fe,voters:Xe}})},[n]),nt=g.useCallback(async()=>{if(n)try{const ae=await DS(n.id);rt(ae)}catch(ae){console.error("Error loading feature suggestions:",ae)}},[n]),Kt=g.useCallback(async()=>{if(n)try{const ae=await Go(),_e=new Date,$e=[];for(const ze of ae)if(!(ze.id===n.id||new Date(ze.start_date)<=_e))try{await qv(ze.id)&&$e.push({id:ze.id,title:ze.title,startDate:ze.start_date})}catch{console.warn(`Session ${ze.id} no longer exists, skipping from future sessions list`)}vt($e)}catch(ae){console.error("Error loading future sessions:",ae),vt([])}},[n]),dr=g.useCallback(ae=>{rt(_e=>[ae,..._e]),nt(),Kt()},[nt,Kt]),Pr=g.useCallback(async(ae,_e)=>{await I$(ae,_e),await nt()},[nt]),tt=g.useCallback(async ae=>{await T$(ae),await nt()},[nt]),Bt=g.useCallback(async(ae,_e)=>{await D$(ae,_e),await nt()},[nt]),qt=g.useCallback(async ae=>{await $$(ae);const _e=await ft();w(_e),await nt()},[ft,nt]);g.useEffect(()=>{async function ae(){if(n&&!(qe.current&&bt.current===n.id)){bt.current=n.id,qe.current=!0;try{_(!0);const[_e,$e]=await Promise.all([ja(n.id),Lo(n.id)]),ze=_e.map(Fe=>{const Dt=$e.filter(Ee=>Ee.feature_id===Fe.id).map(Ee=>({userId:Ee.user_id,name:Ee.user_name,email:Ee.user_email,voteCount:Ee.vote_count})),$t=Dt.reduce((Ee,Je)=>Ee+Je.voteCount,0);return{id:Fe.id,title:Fe.title,description:Fe.description,epic:Fe.epic,epicId:Fe.epic_id||Fe.epicId,state:Fe.state,areaPath:Fe.area_path||Fe.areaPath,tags:Fe.tags||[],azureDevOpsId:Fe.azure_devops_id||Fe.azureDevOpsId,azureDevOpsUrl:Fe.azure_devops_url||Fe.azureDevOpsUrl,workItemType:Fe.workItemType||Fe.work_item_type,votes:$t,voters:Dt}});w(ze),Y({title:n.title,goal:n.goal,votesPerUser:n.votes_per_user,useAutoVotes:n.use_auto_votes||!1,startDate:n.start_date,endDate:n.end_date,isActive:n.is_active,originalEndDate:n.original_end_date??void 0,endedEarlyBy:n.ended_early_by??void 0,endedEarlyReason:n.ended_early_reason??void 0,endedEarlyDetails:n.ended_early_details??void 0,reopenReason:n.reopen_reason??void 0,reopenDetails:n.reopen_details??void 0,reopenedBy:n.reopened_by??void 0,reopenedAt:n.reopened_at??void 0,productId:n.product_id??null,productName:n.product_name??null,product_id:n.product_id??null,product_name:n.product_name??null});const Xe=await C$(n.id);V(Xe?{organization:Xe.organization||"newmill",project:Xe.project||"Product",accessToken:Xe.access_token,refreshToken:Xe.refresh_token,tokenExpiresAt:Xe.token_expires_at,tenantId:Xe.tenant_id,clientId:Xe.client_id,enabled:Xe.enabled,workItemType:Xe.work_item_type||"Feature",query:Xe.query,lastSyncTime:Xe.last_sync_time}:{organization:"newmill",project:"Product",enabled:!1,workItemType:"Feature"});try{const Fe=await DS(n.id);rt(Fe)}catch(Fe){console.error("Error loading feature suggestions:",Fe)}}catch(_e){console.error("Error loading data:",_e),w([])}finally{_(!1),qe.current=!1}}}ae()},[n==null?void 0:n.id]),g.useEffect(()=>{async function ae(){const _e=IC(),$e=J.project;if(re(_e),M([]),fe([]),Le([]),J.enabled&&J.accessToken&&$e)try{const ze=await Ze(J),Xe={...J,accessToken:ze,project:$e},[Fe,Yt,Dt,$t]=await Promise.all([gZ(Xe).catch(Ee=>(console.error("Error loading Azure DevOps projects:",Ee),_e)),EC(Xe),Av(Xe),AC(Xe)]);J.project===$e&&(re(Fe.length>0?Fe:_e),M(Yt),fe(Dt),Le($t))}catch(ze){console.error("Error loading filter options:",ze),J.project===$e&&re(_e)}}ae()},[J.enabled,J.accessToken,J.project,Ze]);const Wt=g.useCallback(async(ae,_e)=>{if(!(!J.enabled||!J.accessToken))try{const $e=await Ze(J),ze={...J,accessToken:$e},Xe=ae?await JI(ze,ae):await EC(ze);M(Xe)}catch($e){console.error("Error loading states for work item type:",$e)}},[J,Ze]),Qt=g.useCallback(async ae=>{if(!J.enabled||!J.accessToken)return{types:[],states:[]};try{const _e=await Ze(J),$e={...J,accessToken:_e};return await yZ($e,ae)}catch(_e){return console.error("Error fetching types and states for area path:",_e),{types:[],states:[]}}},[J,Ze]),sr=g.useCallback(async ae=>{if(!J.enabled||!J.accessToken)return{types:[],areaPaths:[]};try{const _e=await Ze(J),$e={...J,accessToken:_e},ze=await pZ($e,ae);return ze.areaPaths.length>0&&fe(ze.areaPaths),ze}catch(_e){return console.error("Error fetching types and area paths for states:",_e),{types:[],areaPaths:[]}}},[J,Ze]),Mr=g.useCallback(async ae=>{if(!J.enabled||!J.accessToken)return{types:[],states:[],areaPaths:[]};try{const _e=await Ze(J),$e={...J,accessToken:_e},ze=await xZ($e,ae);return ze.states.length>0&&M(ze.states),ze.areaPaths.length>0&&fe(ze.areaPaths),ze}catch(_e){return console.error("Error fetching types, states, and area paths for tags:",_e),{types:[],states:[],areaPaths:[]}}},[J,Ze]),Zt=g.useCallback(async(ae,_e=[],$e=[])=>{if(!(!J.enabled||!J.accessToken))try{const ze=await Ze(J),Xe={...J,accessToken:ze},Fe=ae?await vZ(Xe,ae,_e,$e):await AC(Xe);Le(Fe)}catch(ze){console.error("Error loading tags for type, state, and area path:",ze)}},[J,Ze]),lr=g.useCallback(async(ae,_e=[])=>{if(!(!J.enabled||!J.accessToken))try{const $e=await Ze(J),ze={...J,accessToken:$e},Xe=ae?await mZ(ze,ae,_e):await Av(ze);fe(Xe)}catch($e){console.error("Error loading area paths for type and state:",$e)}},[J,Ze]);g.useEffect(()=>{const ae=async()=>{const $e=BZ(F.startDate,F.endDate);if(F.isActive!==$e){const ze={...F,isActive:$e};Y(ze);try{n!=null&&n.id&&await TS(n.id,{title:ze.title,goal:ze.goal,votes_per_user:ze.votesPerUser,start_date:ze.startDate,end_date:ze.endDate,is_active:ze.isActive})}catch(Xe){console.error("Error updating voting session status:",Xe)}}};ae();const _e=setInterval(ae,6e5);return()=>clearInterval(_e)},[F,n==null?void 0:n.id]),g.useEffect(()=>{document.body.style.overflow="",document.body.style.position="",document.body.style.width="",I==="admin"&&(nt(),Kt())},[I,nt,Kt]),g.useEffect(()=>(document.body.style.overflow="",()=>{document.body.style.overflow=""}),[]);const mr=g.useCallback(async(ae=J)=>{if(!ae.organization||!ae.project||!n){z("Organization and project name are required");return}try{Me(!0),z(null);const _e=await Ze(ae),$e={...ae,accessToken:_e},ze=await PC($e),Xe=OC(ze);for(const Ee of Xe){const Jt=(await ja(n.id)).find(br=>br.azure_devops_id===Ee.azureDevOpsId),Xt=Nh(Ee.description),yt=gd(Xt,300);Jt?await Ju(Jt.id,{title:Ee.title,description:yt,epic:Ee.epic||null,epicId:Ee.epicId||null,state:Ee.state,areaPath:Ee.areaPath,tags:Ee.tags,azure_devops_id:Ee.azureDevOpsId,azure_devops_url:Ee.azureDevOpsUrl,workItemType:Ee.workItemType||null}):await lh({session_id:n.id,title:Ee.title,description:yt,epic:Ee.epic||null,epicId:Ee.epicId||null,state:Ee.state,areaPath:Ee.areaPath,tags:Ee.tags,azure_devops_id:Ee.azureDevOpsId,azure_devops_url:Ee.azureDevOpsUrl,workItemType:Ee.workItemType||null})}const Fe=await ja(n.id),Yt=await Lo(n.id),Dt=Fe.map(Ee=>{const Jt=Yt.filter(yt=>yt.feature_id===Ee.id).map(yt=>({userId:yt.user_id,name:yt.user_name,email:yt.user_email,voteCount:yt.vote_count})),Xt=Jt.reduce((yt,br)=>yt+br.voteCount,0);return{id:Ee.id,title:Ee.title,description:Ee.description,epic:Ee.epic,epicId:Ee.epic_id||Ee.epicId,state:Ee.state,areaPath:Ee.area_path||Ee.areaPath,tags:Ee.tags||[],azureDevOpsId:Ee.azure_devops_id||Ee.azureDevOpsId,azureDevOpsUrl:Ee.azure_devops_url||Ee.azureDevOpsUrl,workItemType:Ee.workItemType||Ee.work_item_type,votes:Xt,voters:Jt}});w(Dt);const $t={...$e,lastSyncTime:new Date().toISOString()};await wl(n.id,$t),V($t)}catch(_e){console.error("Azure DevOps sync error:",_e),_e instanceof Error&&_e.message==="Not authenticated"?(z("Please authenticate with Azure DevOps"),He()):z("Failed to fetch features from Azure DevOps. Please try reconnecting.")}finally{Me(!1)}},[J,n,Ze,He]),ir=g.useCallback(async()=>{if(!J.organization||!J.project){z("Organization and project name are required");return}try{Me(!0),z(null);const ae=await Ze(J),_e={...J,accessToken:ae},$e=await PC(_e),Xe=OC($e).map(Fe=>(console.log(`[Preview] Feature ${Fe.id} "${Fe.title}": epic="${Fe.epic}", epicId="${Fe.epicId}"`),{...Fe,description:gd(Nh(Fe.description),300)}));console.log(`[Preview] Setting ${Xe.length} preview features`),de(Xe),Ye(!0)}catch(ae){console.error("Azure DevOps preview error:",ae),ae instanceof Error&&ae.message==="Not authenticated"?(z("Please authenticate with Azure DevOps"),He()):z("Failed to fetch features from Azure DevOps. Please try reconnecting.")}finally{Me(!1)}},[J,Ze,He]),qn=g.useCallback(async()=>{if(!(!ue||!n))try{Me(!0);const ae=await ja(n.id);for(const Fe of ae)await IS(Fe.id);for(const Fe of ue){const Yt=Nh(Fe.description),Dt=gd(Yt,300);await lh({session_id:n.id,title:Fe.title,description:Dt,epic:Fe.epic||null,state:Fe.state,areaPath:Fe.areaPath,tags:Fe.tags,azure_devops_id:Fe.azureDevOpsId,azure_devops_url:Fe.azureDevOpsUrl})}const _e=await ja(n.id),$e=await Lo(n.id),ze=_e.map(Fe=>{const Dt=$e.filter(Ee=>Ee.feature_id===Fe.id).map(Ee=>({userId:Ee.user_id,name:Ee.user_name,email:Ee.user_email,voteCount:Ee.vote_count})),$t=Dt.reduce((Ee,Je)=>Ee+Je.voteCount,0);return{id:Fe.id,title:Fe.title,description:Fe.description,epic:Fe.epic,epicId:Fe.epic_id||Fe.epicId,state:Fe.state,areaPath:Fe.area_path||Fe.areaPath,tags:Fe.tags||[],azureDevOpsId:Fe.azure_devops_id||Fe.azureDevOpsId,azureDevOpsUrl:Fe.azure_devops_url||Fe.azureDevOpsUrl,workItemType:Fe.workItemType||Fe.work_item_type,votes:$t,voters:Dt}});w(ze);const Xe={...J,lastSyncTime:new Date().toISOString()};await wl(n.id,Xe),V(Xe)}catch(ae){console.error("Azure DevOps replace all error:",ae),z("Failed to replace all features from Azure DevOps.")}finally{Me(!1),de(null)}},[ue,n,J]),[Vt,ls]=g.useState({isOpen:!1,feature:null,existingFeature:null,onResolve:()=>{}}),qr=g.useCallback(async ae=>{if(!ae||ae.length===0||!n){console.error("handleConfirmSync: Invalid input",{selectedFeatures:ae,currentSession:n});return}try{Me(!0),console.log("handleConfirmSync: Starting sync for",ae.length,"features");const _e=await ja(n.id),$e=[];let ze=!1,Xe=!1;for(let Ee=0;Ee<ae.length;Ee++){const Je=ae[Ee];try{const Jt=_e.find(br=>{const an=br.azureDevOpsId||br.azure_devops_id,cs=Je.azureDevOpsId;return an&&cs&&an.toString()===cs.toString()}),Xt=Nh(Je.description),yt=gd(Xt,300);if(Jt){if(Xe){console.log("handleConfirmSync: Auto-replacing existing feature (replace-all)",Jt.id,Je.title),await Ju(Jt.id,{title:Je.title,description:yt,epic:Je.epic||null,epicId:Je.epicId||null,state:Je.state,areaPath:Je.areaPath,tags:Je.tags,azure_devops_id:Je.azureDevOpsId,azure_devops_url:Je.azureDevOpsUrl,workItemType:Je.workItemType||null}),$e.push(Je);continue}const br=await new Promise(an=>{ls({isOpen:!0,feature:Je,existingFeature:Jt,onResolve:cs=>{ls({isOpen:!1,feature:null,existingFeature:null,onResolve:()=>{}}),an(cs)}})});if(br==="cancel"){ze=!0;break}else if(br==="skip"){console.log("handleConfirmSync: Skipping existing feature",Jt.id,Je.title);continue}else br==="replace-all"?(Xe=!0,console.log("handleConfirmSync: Replace-all selected, replacing current and all future conflicts"),await Ju(Jt.id,{title:Je.title,description:yt,epic:Je.epic||null,epicId:Je.epicId||null,state:Je.state,areaPath:Je.areaPath,tags:Je.tags,azure_devops_id:Je.azureDevOpsId,azure_devops_url:Je.azureDevOpsUrl,workItemType:Je.workItemType||null}),$e.push(Je)):br==="replace"&&(console.log("handleConfirmSync: Replacing existing feature",Jt.id,Je.title),await Ju(Jt.id,{title:Je.title,description:yt,epic:Je.epic||null,epicId:Je.epicId||null,state:Je.state,areaPath:Je.areaPath,tags:Je.tags,azure_devops_id:Je.azureDevOpsId,azure_devops_url:Je.azureDevOpsUrl,workItemType:Je.workItemType||null}),$e.push(Je))}else{console.log("handleConfirmSync: Creating new feature",Je.title,Je.azureDevOpsId);const br=await lh({session_id:n.id,title:Je.title,description:yt,epic:Je.epic||null,epicId:Je.epicId||null,state:Je.state,areaPath:Je.areaPath,tags:Je.tags,azure_devops_id:Je.azureDevOpsId,azure_devops_url:Je.azureDevOpsUrl,workItemType:Je.workItemType||null});console.log("handleConfirmSync: Created feature",br),$e.push(Je)}}catch(Jt){throw console.error("handleConfirmSync: Error processing feature",Je.title,Jt),Jt}}if(ze){console.log("handleConfirmSync: Sync cancelled by user");return}console.log("handleConfirmSync: Fetching all features after sync"),await new Promise(Ee=>setTimeout(Ee,200));const Fe=await ja(n.id);console.log("handleConfirmSync: Retrieved",Fe.length,"features from database"),console.log("handleConfirmSync: Feature IDs:",Fe.map(Ee=>({id:Ee.id,title:Ee.title,azureId:Ee.azure_devops_id||Ee.azureDevOpsId})));const Yt=await Lo(n.id),Dt=Fe.map(Ee=>{const Jt=Yt.filter(yt=>yt.feature_id===Ee.id).map(yt=>({userId:yt.user_id,name:yt.user_name,email:yt.user_email,voteCount:yt.vote_count})),Xt=Jt.reduce((yt,br)=>yt+br.voteCount,0);return{id:Ee.id,title:Ee.title,description:Ee.description,epic:Ee.epic,epicId:Ee.epic_id||Ee.epicId,state:Ee.state,areaPath:Ee.area_path||Ee.areaPath,tags:Ee.tags||[],azureDevOpsId:Ee.azure_devops_id||Ee.azureDevOpsId,azureDevOpsUrl:Ee.azure_devops_url||Ee.azureDevOpsUrl,workItemType:Ee.workItemType||Ee.work_item_type,votes:Xt,voters:Jt}});console.log("handleConfirmSync: Setting features with votes",Dt.length),w(()=>Dt),await new Promise(Ee=>setTimeout(Ee,200));const $t={...J,lastSyncTime:new Date().toISOString()};await wl(n.id,$t),V($t),console.log("handleConfirmSync: Sync completed successfully")}catch(_e){throw console.error("Azure DevOps sync error:",_e),z("Failed to sync features from Azure DevOps."),_e}finally{Me(!1),de(null)}},[n,J]),vr=g.useCallback(async()=>{if(n)try{const ae={organization:J.organization||"newmill",project:J.project||"Product",workItemType:J.workItemType||"Feature",query:J.query,accessToken:void 0,refreshToken:void 0,tokenExpiresAt:void 0,enabled:!1};await wl(n.id,ae),V(ae),z(null)}catch(ae){console.error("Error disconnecting Azure DevOps:",ae),z("Failed to disconnect from Azure DevOps")}},[J,n]);g.useEffect(()=>{(async()=>{const _e=sessionStorage.getItem("oauth_action");if(_e&&!(!J.enabled||!J.accessToken))try{_e==="preview"?await ir():_e==="sync"&&await mr()}finally{sessionStorage.removeItem("oauth_action")}})()},[J.enabled,J.accessToken,ir,mr]);const cr=g.useCallback(()=>{p("/admin")},[p]),Hr=g.useCallback(()=>{if(t){p("/vote");return}B(!1),rr(d?"system":"session"),A("voting")},[d,t,p]),Kr=g.useCallback(()=>{B(!0),rr("session"),t?I!=="admin"&&A("admin"):I!=="voting"&&A("voting")},[t,I]),Hn=g.useCallback(()=>{d&&(B(!0),rr("system"),t?I!=="admin"&&A("admin"):I!=="voting"&&A("voting"))},[I,d,t]),jr=g.useCallback(async ae=>{if(n)try{const _e=await lh({session_id:n.id,title:ae.title,description:ae.description,epic:ae.epic});w($e=>[...$e,{id:_e.id,title:_e.title,description:_e.description,epic:_e.epic,votes:0,voters:[]}]),se(!1)}catch(_e){console.error("Error adding feature:",_e),alert("Failed to add feature")}},[n]),Ir=g.useCallback(async ae=>{try{await Ju(ae.id,{title:ae.title,description:ae.description,epic:ae.epic,epicId:ae.epicId||null}),w(_e=>_e.map($e=>$e.id===ae.id?ae:$e)),K(null)}catch(_e){console.error("Error updating feature:",_e),alert("Failed to update feature")}},[]),In=g.useCallback(async ae=>{try{await IS(ae),w(_e=>_e.filter($e=>$e.id!==ae))}catch(_e){console.error("Error deleting feature:",_e),alert("Failed to delete feature")}},[]),Kn=g.useCallback(ae=>{Ce(_e=>({..._e,showReset:!0,showResetAll:!1,showDeleteSession:!1,targetId:ae}))},[]),Vi=g.useCallback(async()=>{const ae=Ie.targetId;if(!(!ae||!n))try{await v$(n.id,ae);const _e=await ft();w(_e)}catch(_e){console.error("Error resetting votes:",_e),alert("Failed to reset votes")}},[Ie.targetId,n,ft]),sn=g.useCallback(()=>{Ce(ae=>({...ae,showReset:!1,showResetAll:!0,showDeleteSession:!1,targetId:null}))},[]),bs=g.useCallback(()=>{Ce(ae=>({...ae,showReset:!1,showResetAll:!1,showDeleteSession:!0,targetId:null}))},[]),Us=g.useCallback(async()=>{if(n){dt(!0);try{await x$(n.id),l(null);try{localStorage.removeItem("voting_system_current_session")}catch{}await u(),p("/sessions",{replace:!0})}catch(ae){console.error("Error deleting session:",ae),alert("Failed to delete session. Please try again.")}finally{dt(!1),Ce(ae=>({...ae,showDeleteSession:!1}))}}},[n,p,l,u]),_r=g.useCallback(async()=>{if(n)try{await _$(n.id);const ae=await ft();w(ae)}catch(ae){console.error("Error resetting all votes:",ae),alert("Failed to reset all votes")}},[n,ft]),fn=g.useCallback((ae,_e)=>{if(!s||!F.isActive)return;const $e=U[ae]||0;let ze=$e;if(_e)if(ne<jt)ze=$e+1;else return;else if($e>0)ze=$e-1;else return;q(Xe=>{const Fe={...Xe};return ze===0?delete Fe[ae]:Fe[ae]=ze,Fe}),Ne(Xe=>_e?Xe+1:Xe-1)},[s,U,ne,F.isActive,jt]),Cr=g.useCallback(async()=>{if(!(!s||!F.isActive||!n)&&!(ne<jt))try{for(const[ze,Xe]of Object.entries(U))Xe>0&&await k$({session_id:n.id,feature_id:ze,user_id:s.id,user_name:s.name,user_email:s.email,vote_count:Xe});const ae=await ja(n.id),_e=await Lo(n.id),$e=ae.map(ze=>{const Fe=_e.filter(Dt=>Dt.feature_id===ze.id).map(Dt=>({userId:Dt.user_id,name:Dt.user_name,email:Dt.user_email,voteCount:Dt.vote_count})),Yt=Fe.reduce((Dt,$t)=>Dt+$t.voteCount,0);return{id:ze.id,title:ze.title,description:ze.description,epic:ze.epic,state:ze.state,areaPath:ze.area_path,tags:ze.tags||[],azureDevOpsId:ze.azure_devops_id,azureDevOpsUrl:ze.azure_devops_url,votes:Yt,voters:Fe}});w($e),A("thankyou")}catch(ae){console.error("Error submitting votes:",ae),alert("Failed to submit votes. Please try again.")}},[s,n,ne,U,F.isActive,jt]),nr=g.useCallback(async ae=>{var Yt,Dt;const _e={title:ae.title,goal:ae.goal,votes_per_user:ae.votesPerUser,start_date:ae.startDate,end_date:ae.endDate,is_active:ae.isActive,use_auto_votes:ae.useAutoVotes,product_id:ae.product_id??null,product_name:null},$e={},ze=($t,Ee)=>{$t!==void 0&&($e[Ee]=$t)};ze(ae.originalEndDate,"original_end_date"),ze(ae.endedEarlyBy,"ended_early_by"),ze(ae.endedEarlyReason,"ended_early_reason"),ze(ae.endedEarlyDetails,"ended_early_details"),ze(ae.reopenReason,"reopen_reason"),ze(ae.reopenDetails,"reopen_details"),ze(ae.reopenedBy,"reopened_by"),ze(ae.reopenedAt,"reopened_at");const Xe={..._e,...$e},Fe=async $t=>{n!=null&&n.id?await TS(n.id,$t):await A$($t)};try{await Fe(Xe),Y(ae),n!=null&&n.id&&l({...n,title:_e.title??n.title,goal:_e.goal??n.goal,votes_per_user:_e.votes_per_user??n.votes_per_user,use_auto_votes:_e.use_auto_votes??n.use_auto_votes,start_date:_e.start_date??n.start_date,end_date:_e.end_date??n.end_date,is_active:_e.is_active??n.is_active,product_id:_e.product_id!==void 0?_e.product_id??null:ae.product_id??n.product_id??null,product_name:null,original_end_date:$e.original_end_date??n.original_end_date??null,ended_early_by:$e.ended_early_by??n.ended_early_by??null,ended_early_reason:$e.ended_early_reason??n.ended_early_reason??null,ended_early_details:$e.ended_early_details??n.ended_early_details??null,reopen_reason:$e.reopen_reason??n.reopen_reason??null,reopen_details:$e.reopen_details??n.reopen_details??null,reopened_by:$e.reopened_by??n.reopened_by??null,reopened_at:$e.reopened_at??n.reopened_at??null})}catch($t){const Ee=((Dt=(Yt=$t==null?void 0:$t.message)==null?void 0:Yt.toLowerCase)==null?void 0:Dt.call(Yt))??"",Je=Ee.includes("column")&&(Ee.includes("reopen_reason")||Ee.includes("reopen_details")||Ee.includes("reopened_by")||Ee.includes("reopened_at")||Ee.includes("original_end_date")||Ee.includes("ended_early_by")||Ee.includes("ended_early_reason")||Ee.includes("ended_early_details")),Jt=Ee.includes("product_name")||Ee.includes('"product_name"'),Xt=Ee.includes("product_id")||Ee.includes('"product_id"');if(Je||Jt||Xt){console.warn("[FeatureVoting] Voting session metadata/product columns missing, falling back to basic update.",$t);try{const yt={..._e};Jt&&delete yt.product_name,Xt&&delete yt.product_id,await Fe(yt),Y(ae),n!=null&&n.id&&l({...n,title:yt.title??n.title,goal:yt.goal??n.goal,votes_per_user:yt.votes_per_user??n.votes_per_user,use_auto_votes:yt.use_auto_votes??n.use_auto_votes,start_date:yt.start_date??n.start_date,end_date:yt.end_date??n.end_date,is_active:yt.is_active??n.is_active,product_id:yt.product_id!==void 0?yt.product_id??null:ae.productId??n.product_id??null,product_name:null,original_end_date:ae.originalEndDate??n.original_end_date??null,ended_early_by:ae.endedEarlyBy??n.ended_early_by??null,ended_early_reason:ae.endedEarlyReason??n.ended_early_reason??null,ended_early_details:ae.endedEarlyDetails??n.ended_early_details??null,reopen_reason:ae.reopenReason??n.reopen_reason??null,reopen_details:ae.reopenDetails??n.reopen_details??null,reopened_by:ae.reopenedBy??n.reopened_by??null,reopened_at:ae.reopenedAt??n.reopened_at??null})}catch(yt){console.error("Error updating voting session (fallback):",yt),alert("Failed to update voting session settings")}}else console.error("Error updating voting session:",$t),alert("Failed to update voting session settings")}},[n,l]),ur=g.useCallback(async ae=>{if(n){V(ae);try{await wl(n.id,{organization:ae.organization,project:ae.project,accessToken:ae.accessToken,refreshToken:ae.refreshToken,tokenExpiresAt:ae.tokenExpiresAt,tenantId:ae.tenantId,clientId:ae.clientId,enabled:ae.enabled,workItemType:ae.workItemType,query:ae.query,lastSyncTime:ae.lastSyncTime})}catch(_e){console.error("Error saving config:",_e)}}},[n]),Gr=g.useCallback(()=>{t||n?p("/results"):A("results")},[t,n,p]),ws=g.useMemo(()=>{if(t)return i.jsx(MZ,{features:b,onAddFeature:jr,onUpdateFeature:Ir,onDeleteFeature:In,onShowResults:Gr,onRequestDeleteSession:bs,isDeletingSession:Te,showAddForm:Q,setShowAddForm:se,editingFeature:T,setEditingFeature:K,onLogout:x,onShowVoterView:Hr,votingSession:F,azureDevOpsConfig:J,onUpdateAzureDevOpsConfig:ur,onPreviewAzureDevOpsFeatures:ir,onDisconnectAzureDevOps:vr,isFetchingAzureDevOps:je,azureFetchError:Se,onInitiateOAuth:He,availableStates:ie,availableAreaPaths:Z,availableTags:ye,previewFeatures:ue,showPreviewModal:ee,setShowPreviewModal:Ye,onConfirmSync:qr,onReplaceAll:qn,onUpdateVotingSession:nr,onFetchStatesForType:Wt,onFetchAreaPathsForTypeAndState:lr,onFetchTagsForTypeStateAndAreaPath:Zt,onFetchTypesAndStatesForAreaPath:Qt,onFetchTypesAndStatesForTags:Mr,onFetchTypesAndAreaPathsForStates:sr,suggestedFeatures:Oe,otherSessions:Nt,onPromoteSuggestion:qt,onMoveSuggestion:Bt,onEditSuggestion:Pr,onDeleteSuggestion:tt,adminPerspective:ot,projectOptions:H});switch(I==="admin"&&!t?"voting":I){case"voting":return i.jsx(zC,{features:b,currentUser:s,pendingVotes:U,pendingUsedVotes:ne,onVote:fn,onSubmitVotes:Cr,onToggleAdmin:cr,isAdmin:$,votingSession:F,navigate:p,effectiveVotesPerUser:jt,sessionId:(n==null?void 0:n.id)||"",onLogout:x,onSuggestionSubmitted:dr,isSystemAdmin:d,isSessionAdmin:m,isStakeholder:f});case"results":return i.jsx(YZ,{features:b,onResetVotes:Kn,onResetAllVotes:sn,onBack:r?()=>p("../admin"):()=>A("admin"),showVotersList:G,setShowVotersList:le,votingSession:F,effectiveVotesPerUser:jt,onLogout:x,currentUser:s,isSystemAdmin:d,isSessionAdmin:m,isStakeholder:f});case"thankyou":return i.jsx(JZ,{navigate:p,votingSession:F});default:return i.jsx(zC,{features:b,currentUser:s,pendingVotes:U,pendingUsedVotes:ne,onVote:fn,onSubmitVotes:Cr,onToggleAdmin:cr,isAdmin:$,votingSession:F,navigate:p,effectiveVotesPerUser:jt,sessionId:(n==null?void 0:n.id)||"",onLogout:x,onSuggestionSubmitted:dr,isSystemAdmin:d,isSessionAdmin:m,isStakeholder:f})}},[I,b,s,U,ne,fn,Cr,cr,$,F,Kn,sn,G,le,jr,Ir,In,Q,se,T,K,J,ur,mr,ir,vr,je,Se,He,ue,ee,Ye,qr,p,jt,t,ie,Z,ye,Wt,n,Hr,dr,Oe,Nt,qt,Bt,Pr,tt,ot,H,Gr]),Tn=()=>{const{feature:ae,existingFeature:_e}=Vt;return g.useEffect(()=>{if(Vt.isOpen){const $e=window.scrollY;return document.body.style.position="fixed",document.body.style.top=`-${$e}px`,document.body.style.width="100%",document.body.style.overflow="hidden",()=>{document.body.style.position="",document.body.style.top="",document.body.style.width="",document.body.style.overflow="",window.scrollTo(0,$e)}}},[Vt.isOpen]),!Vt.isOpen||!ae||!_e?null:i.jsx("div",{className:"fixed inset-0 z-[60] overflow-y-auto",children:i.jsxs("div",{className:"flex items-start justify-center min-h-screen p-4 text-center pt-8 sm:pt-16",children:[i.jsx("div",{className:"fixed inset-0 transition-opacity bg-black/50",onClick:()=>Vt.onResolve("cancel"),"aria-hidden":"true"}),i.jsxs("div",{className:"inline-block w-full max-w-2xl mb-8 overflow-visible text-left align-middle transition-all transform bg-white shadow-xl rounded-lg relative z-10",children:[i.jsxs("div",{className:"flex items-start justify-between mb-5 p-6 pb-0",children:[i.jsxs("div",{className:"flex items-center gap-3 bg-[#FFF7E2] border border-[#C89212]/40 rounded-xl px-6 py-3 shadow-sm w-full mr-4",children:[i.jsx("div",{className:"flex items-center justify-center h-10 w-10 rounded-full bg-[#C89212]/15 text-[#C89212]",children:i.jsx(Zm,{className:"h-6 w-6"})}),i.jsxs("div",{children:[i.jsx("h3",{className:"text-lg font-semibold text-[#2d4660] tracking-tight",children:"Work Item Already Exists"}),i.jsx("p",{className:"text-xs text-[#8A6D3B] font-medium mt-1 uppercase tracking-widest",children:"Spark the roadmap with your ideas"})]})]}),i.jsx("button",{onClick:()=>Vt.onResolve("cancel"),className:"ml-3 text-gray-400 hover:text-gray-500 focus:outline-none",children:i.jsx(xs,{className:"h-5 w-5"})})]}),i.jsx("div",{className:"p-6",children:i.jsxs("div",{className:"space-y-4",children:[i.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:i.jsx("p",{className:"text-sm text-yellow-800 mb-2",children:"This work item already exists in your voting session. What would you like to do?"})}),i.jsxs("div",{className:"space-y-3",children:[i.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[i.jsx("h4",{className:"font-semibold text-gray-900 mb-2",children:"Existing Work Item:"}),i.jsx("p",{className:"text-sm text-gray-700",children:_e.title}),_e.azureDevOpsId&&i.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Azure DevOps ID: ",_e.azureDevOpsId]})]}),i.jsxs("div",{className:"border border-blue-200 rounded-lg p-4 bg-blue-50",children:[i.jsx("h4",{className:"font-semibold text-blue-900 mb-2",children:"New Work Item:"}),i.jsx("p",{className:"text-sm text-blue-700",children:ae.title}),ae.azureDevOpsId&&i.jsxs("p",{className:"text-xs text-blue-600 mt-1",children:["Azure DevOps ID: ",ae.azureDevOpsId]})]})]}),i.jsxs("div",{className:"flex justify-between items-center pt-4 border-t",children:[i.jsx(gt,{variant:"primary",onClick:()=>Vt.onResolve("replace-all"),children:"Replace All Selected"}),i.jsxs("div",{className:"flex gap-3",children:[i.jsx(gt,{variant:"secondary",onClick:()=>Vt.onResolve("cancel"),children:"Cancel"}),i.jsx(gt,{variant:"secondary",onClick:()=>Vt.onResolve("skip"),children:"Skip"}),i.jsx(gt,{variant:"primary",onClick:()=>Vt.onResolve("replace"),children:"Replace"})]})]})]})})]})]})})};return n?j?i.jsx("div",{className:"min-h-screen w-full bg-gray-50 flex items-center justify-center",children:i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-[#2d4660] mx-auto mb-4"}),i.jsx("p",{className:"text-gray-600",children:"Loading..."})]})}):!$&&I!=="voting"&&I!=="thankyou"?i.jsx("div",{className:"min-h-screen w-full bg-gray-50 flex items-center justify-center",children:i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-[#2d4660] mx-auto mb-4"}),i.jsx("p",{className:"text-gray-600",children:"Loading voting experience..."})]})}):i.jsxs(i.Fragment,{children:[i.jsx(Tn,{}),i.jsxs("div",{className:"w-full bg-gray-50 text-gray-900 font-sans min-h-screen flex flex-col",children:[i.jsx("div",{className:"flex-grow",children:ws}),i.jsx(ZI,{currentRole:$?ot==="system"?"system-admin":"session-admin":"stakeholder",onSelectStakeholder:Hr,onSelectSessionAdmin:$||d?Kr:void 0,onSelectSystemAdmin:d?Hn:void 0,showRoleToggle:!0}),i.jsx($h,{show:Ie.showReset,title:"Reset Votes",message:"Are you sure you want to reset all votes for this feature? This will remove all voting data for this feature.",onConfirm:Vi,onCancel:()=>Ce(ae=>({...ae,showReset:!1})),confirmText:"Reset",type:"reset"}),i.jsx($h,{show:Ie.showResetAll,title:"Reset All Votes",message:"Are you sure you want to reset all votes for all features? This will remove all voting data and cannot be undone.",onConfirm:_r,onCancel:()=>Ce(ae=>({...ae,showResetAll:!1})),confirmText:"Reset All",type:"reset"}),i.jsx($h,{show:Ie.showDeleteSession,title:"Delete Voting Session",message:"This will permanently delete the current voting session for all admins and stakeholders. Votes, notes, and settings for this session will be removed. This action cannot be undone.",onConfirm:Us,onCancel:()=>Ce(ae=>({...ae,showDeleteSession:!1})),confirmText:Te?"Deleting":"Delete Session",type:"delete"})]})]}):i.jsxs(i.Fragment,{children:[i.jsx(Tn,{}),i.jsx("div",{className:"min-h-screen w-full bg-gray-50 flex items-center justify-center",children:i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-[#2d4660] mx-auto mb-4"}),i.jsx("p",{className:"text-gray-600",children:"Loading session..."})]})})]})}async function UC(e,t,r){const s=`${e}:${t}:${r}:default-secret-change-in-production`,l=new TextEncoder().encode(s),u=await crypto.subtle.digest("SHA-256",l);return Array.from(new Uint8Array(u)).map(f=>f.toString(16).padStart(2,"0")).join("").substring(0,32)}function QZ(){const[e,t]=g.useState(!1),[r,n]=g.useState(!1),[s,a]=g.useState(""),[l,u]=g.useState(!1),[d,m]=g.useState(null),[f,p]=g.useState(""),[x,v]=g.useState(""),{currentUser:b,setCurrentUser:w,setCurrentSession:j}=Ta(),_=ri(),[E]=Mv(),C=async A=>{A.preventDefault(),a(""),t(!0);try{const $=await Pl(f.toLowerCase(),x);console.log("[LoginScreen] User created/retrieved:",$),w($);const B=E.get("session");if(B){console.log("[LoginScreen] Session code found, loading session...");const T=await y$(B);if(T){j(T),console.log("[LoginScreen] Checking user roles...");const[K,Q,se]=await Promise.all([Ui($.id),Hm(T.id,$.id),Hv(T.id,$.email)]);if(K||Q)_("/admin");else if(se)_("/vote");else{a("You are not authorized to access this voting session."),t(!1);return}}else{a("Invalid session code."),t(!1);return}}else console.log("[LoginScreen] No session code, navigating to /sessions"),_("/sessions")}catch($){console.error("[LoginScreen] Login error:",$),a(`Failed to log in: ${$ instanceof Error?$.message:"Unknown error"}. Please try again.`),t(!1)}};g.useEffect(()=>{const A=sessionStorage.getItem("oauth_error");A&&(a(A),sessionStorage.removeItem("oauth_error"));const $=E.get("error"),B=E.get("error_description"),T=E.get("error_code");if($){const K=B?decodeURIComponent(B):"An authentication error occurred.";$==="invalid_request"&&K.includes("AADSTS9002325")?a('Azure AD authentication requires PKCE. Please ensure your Azure AD app is configured correctly. The redirect URI must be registered under the "Web" platform in Azure AD.'):T==="unexpected_failure"&&K.includes("email")?a("Azure AD did not return your email address. Please ensure your Azure AD app has the correct API permissions (User.Read or email) and that your account has an email address."):a(`Authentication failed: ${K}`),_("/login",{replace:!0})}},[E,_]),g.useEffect(()=>{const A=E.get("token"),$=E.get("action"),B=E.get("email"),T=E.get("product");A&&$&&B&&T&&($==="grant-admin"||$==="grant-stakeholder")&&(async()=>{var Q,se;try{t(!0),a("");const le=`${Pe.supabaseUrl}/functions/v1/grant-access`;let F;try{F=await fetch(le,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${Pe.supabaseKey}`},body:JSON.stringify({token:A,action:$,email:B,productId:T})})}catch(ue){throw(Q=ue.message)!=null&&Q.includes("CORS")||(se=ue.message)!=null&&se.includes("Failed to fetch")?new Error("The grant access function is not available. Please ensure the Edge Function is deployed. Error: "+ue.message):ue}if(!F.ok){let ue="Failed to grant access";try{ue=(await F.json()).error||ue}catch{ue=`Server returned ${F.status}: ${F.statusText}`}throw new Error(ue)}const Y=await F.json(),J=B.split("@")[0].replace(/\./g," "),V=Y.productName||"the product",H=$==="grant-admin"?"Session Admin":"Stakeholder";let re=J;try{const ue=await kE(B);ue&&(re=ue.name)}catch{}const ie=window.location.pathname.startsWith("/feature-voting-app")?"/feature-voting-app":"",M=`${window.location.origin}${ie}/login`,Z="https://dcchoffman.github.io/feature-voting-app/New-Millennium-color-logo1.png",ye=`
<table width="100%" cellpadding="0" cellspacing="0" border="0" style="background-color: #f9fafb; font-family: Arial, sans-serif;">
  <tr>
    <td align="center" style="padding: 48px 20px;">
      <div style="position: relative; display: inline-block;">
        <div style="position: absolute; bottom: 0; left: 0; width: 300px; height: 200px; background-image: url('https://dcchoffman.github.io/feature-voting-app/bottom-left-curve.png'); background-position: bottom left; background-repeat: no-repeat; background-size: contain; opacity: 0.2; z-index: 0; pointer-events: none;"></div>
        <table width="600" cellpadding="0" cellspacing="0" border="0" style="background-color: #ffffff; border-radius: 8px; box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05); position: relative; z-index: 1;">
        <!-- Logo Header -->
        <tr>
          <td style="background-color: #ffffff; padding: 32px 40px 24px 40px; text-align: center;">
            <img src="${Z}" alt="New Millennium Building Systems" width="300" height="96" style="height: 96px; width: auto; max-width: 300px; display: block; margin: 0 auto; border: 0;" />
            <div style="font-size: 24px; font-weight: bold; color: #2d4660; margin-top: 16px;">Access Granted</div>
          </td>
        </tr>
        
        <!-- Main Content -->
        <tr>
          <td style="background-color: #ffffff; padding: 40px;">
            <p style="margin: 0 0 16px 0; font-size: 16px; color: #333;">Hello ${re},</p>
            <p style="margin: 0 0 24px 0; font-size: 16px; color: #333; line-height: 1.6;">Your access request has been approved! You have been granted <strong style="color: #2d4660;">${H}</strong> access to all voting sessions for <strong style="color: #2d4660;">${V}</strong>.</p>
            
            <p style="margin: 24px 0; font-size: 16px; color: #333; line-height: 1.6;">You can now log in to the Feature Voting System to access your sessions.</p>
            
            <!-- Login Button -->
            <table width="100%" cellpadding="0" cellspacing="0" border="0" style="margin: 32px 0;">
              <tr>
                <td align="center">
                  <a href="${M}" style="display: inline-block; padding: 12px 24px; background-color: #2d4660; color: white; text-decoration: none; border-radius: 6px; font-weight: 500; font-size: 14px; box-shadow: 0 1px 2px 0 rgba(0, 0, 0, 0.05);">Log In to Feature Voting System</a>
                </td>
              </tr>
            </table>
          </td>
        </tr>
        
        <!-- Footer -->
        <tr>
          <td style="background-color: #f9fafb; padding: 20px; text-align: center; border-top: 1px solid #e5e7eb; font-size: 12px; color: #6b7280; position: relative;">
            <p style="margin: 0 0 8px 0;">This is an automated message from the Feature Voting System.</p>
            <p style="margin: 0; color: #9ca3af;"> ${new Date().getFullYear()} New Millennium Building Systems</p>
          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>`,Le=`
Access Granted - Feature Voting System

Hello ${re},

Your access request has been approved! You have been granted ${H} access to all voting sessions for ${V}.

You can now log in to the Feature Voting System to access your sessions.

Login: ${M}

This is an automated message from the Feature Voting System.
          `;let je=[];try{const ue=await PE(T);je=Array.from(new Set(ue.map(de=>{var ee;return(ee=de.user)==null?void 0:ee.email}).filter(de=>!!de).map(de=>de.toLowerCase())))}catch(ue){console.error("Error getting session admins for product:",ue),b!=null&&b.email&&(je=[b.email.toLowerCase()])}const Me=je.length>0?`
<table width="100%" cellpadding="0" cellspacing="0" border="0" style="background-color: #f9fafb; font-family: Arial, sans-serif;">
  <tr>
    <td align="center" style="padding: 48px 20px;">
      <table width="600" cellpadding="0" cellspacing="0" border="0" style="background-color: #ffffff; border-radius: 8px; box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);">
        <!-- Logo Header -->
        <tr>
          <td style="background-color: #ffffff; padding: 32px 40px 24px 40px; text-align: center;">
            <img src="${Z}" alt="New Millennium Building Systems" width="300" height="96" style="height: 96px; width: auto; max-width: 300px; display: block; margin: 0 auto; border: 0;" />
            <div style="font-size: 24px; font-weight: bold; color: #2d4660; margin-top: 16px;">Access Granted Confirmation</div>
          </td>
        </tr>
        
        <!-- Main Content -->
        <tr>
          <td style="background-color: #ffffff; padding: 40px;">
            <p style="margin: 0 0 16px 0; font-size: 16px; color: #333;">Hello,</p>
            <p style="margin: 0 0 24px 0; font-size: 16px; color: #333; line-height: 1.6;">You have successfully granted <strong style="color: #2d4660;">${H}</strong> access to <strong style="color: #2d4660;">${re}</strong> (${B}) for all sessions in <strong style="color: #2d4660;">${V}</strong>.</p>
            
            <!-- Status Box -->
            <table width="100%" cellpadding="0" cellspacing="0" border="0" style="background-color: #f0fdf4; border-left: 4px solid #22c55e; border-radius: 4px; margin: 20px 0;">
              <tr>
                <td style="padding: 20px;">
                  <div style="margin: 10px 0;">
                    <strong style="color: #166534; font-size: 14px;"> Access Granted</strong>
                  </div>
                  <div style="margin: 10px 0; color: #166534; font-size: 13px;">
                    Role: <strong>${H}</strong>
                  </div>
                  <div style="margin: 10px 0; color: #166534; font-size: 13px;">
                    User: <strong>${re}</strong> (${B})
                  </div>
                  <div style="margin: 10px 0; color: #166534; font-size: 13px;">
                    Product: <strong>${V}</strong>
                  </div>
                  <div style="margin: 10px 0; color: #166534; font-size: 13px;">
                    Status: <strong>Email notification sent to requester</strong>
                  </div>
                </td>
              </tr>
            </table>

            <p style="margin: 24px 0; font-size: 16px; color: #333; line-height: 1.6;">The requester has been notified and can now access all voting sessions for this product.</p>
            
            <!-- Go to System Button -->
            <table width="100%" cellpadding="0" cellspacing="0" border="0" style="margin: 32px 0;">
              <tr>
                <td align="center">
                  <a href="${M}" style="display: inline-block; padding: 12px 24px; background-color: #2d4660; color: white; text-decoration: none; border-radius: 6px; font-weight: 500; font-size: 14px; box-shadow: 0 1px 2px 0 rgba(0, 0, 0, 0.05);">Go to Feature Voting System</a>
                </td>
              </tr>
            </table>
          </td>
        </tr>
        
        <!-- Footer -->
        <tr>
          <td style="background-color: #f9fafb; padding: 20px; text-align: center; border-top: 1px solid #e5e7eb; font-size: 12px; color: #6b7280;">
            <p style="margin: 0 0 8px 0;">This is an automated message from the Feature Voting System.</p>
            <p style="margin: 0; color: #9ca3af;"> ${new Date().getFullYear()} New Millennium Building Systems</p>
          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>`:null,Se=je.length>0?`
Access Granted Confirmation - Feature Voting System

Hello,

You have successfully granted ${H} access to ${re} (${B}) for all sessions in ${V}.

Status: Access Granted
Role: ${H}
User: ${re} (${B})
Product: ${V}
Email notification sent to requester: Yes

The requester has been notified and can now access all voting sessions for this product.

Login: ${M}

This is an automated message from the Feature Voting System.
          `:null,z=[Yo({to:B,subject:`Access Granted - ${V} - Feature Voting System`,text:Le,html:ye})];je.length>0&&Me&&Se&&je.forEach(ue=>{z.push(Yo({to:ue,subject:`Access Granted: ${re} - ${V} - Feature Voting System`,text:Se,html:Me}))});try{await Promise.all(z)}catch(ue){console.error("Error sending emails:",ue)}m({roleName:H,productName:V,requesterName:re,requesterEmail:B}),_("/login",{replace:!0})}catch(G){console.error("Error granting access:",G),a(G.message||"Failed to grant access. Please try again."),_("/login",{replace:!0})}finally{t(!1)}})()},[E,_]);const I=async()=>{a(""),n(!0);try{const A=window.location.pathname.startsWith("/feature-voting-app")?"/feature-voting-app":"",$=`${window.location.origin}${A}/sessions`,{error:B}=await Pe.auth.signInWithOAuth({provider:"azure",options:{redirectTo:$,scopes:"email openid profile User.ReadBasic.All",queryParams:{redirect_to:$}}});B&&(a("Failed to sign in with Azure AD. Please try again."),n(!1))}catch(A){console.error("Azure login error:",A),a("Failed to sign in with Azure AD. Please try again."),n(!1)}};return i.jsxs("div",{className:"min-h-screen bg-gray-50 flex flex-col justify-center py-12 sm:px-6 lg:px-8",children:[i.jsx("div",{className:"sm:mx-auto sm:w-full sm:max-w-md",children:i.jsxs("div",{className:"bg-white shadow-lg sm:rounded-lg overflow-hidden relative z-10",children:[i.jsxs("div",{className:"relative",children:[i.jsx("div",{className:"px-10 pt-8 pb-6 text-center",children:i.jsx("img",{src:ji,alt:"New Millennium Building Systems Logo",className:"mx-auto h-24 w-auto"})}),i.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-12 pointer-events-none",style:{background:"linear-gradient(to bottom, transparent, rgba(255, 255, 255, 0.8), rgba(255, 255, 255, 1))"}})]}),i.jsxs("div",{className:"px-4 sm:px-10 pb-8",children:[i.jsxs("div",{className:"text-center mb-6",children:[i.jsx("h2",{className:"text-3xl font-bold text-[#2d4660]",children:"Feature Voting System"}),i.jsx("p",{className:"mt-2 text-sm text-gray-600",children:"Sign in to access your voting sessions"})]}),i.jsxs("form",{onSubmit:C,className:"space-y-6",children:[i.jsxs("div",{children:[i.jsx("label",{htmlFor:"login-name",className:"block text-sm font-medium text-gray-700",children:"Full Name"}),i.jsx("div",{className:"mt-1",children:i.jsx("input",{id:"login-name",name:"name",type:"text",autoComplete:"name",required:!0,value:x,onChange:A=>v(A.target.value),className:"appearance-none block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-[#2d4660] focus:border-[#2d4660]",placeholder:"John Doe"})})]}),i.jsxs("div",{children:[i.jsx("label",{htmlFor:"login-email",className:"block text-sm font-medium text-gray-700",children:"Email Address"}),i.jsx("div",{className:"mt-1",children:i.jsx("input",{id:"login-email",name:"email",type:"email",autoComplete:"email",required:!0,value:f,onChange:A=>p(A.target.value),className:"appearance-none block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-[#2d4660] focus:border-[#2d4660]",placeholder:"your.email@company.com"})})]}),i.jsx("div",{children:i.jsx("button",{type:"submit",disabled:e,className:"w-full flex justify-center items-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-[#2d4660] hover:bg-[#1d3a53] focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-[#2d4660] disabled:opacity-50 disabled:cursor-not-allowed",children:e?i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Signing in..."]}):i.jsxs(i.Fragment,{children:[i.jsx("svg",{className:"h-6 w-6 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M11 16l-4-4m0 0l4-4m-4 4h14m-5 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h7a3 3 0 013 3v1"})}),"Sign In"]})})})]}),s&&i.jsx("div",{className:"rounded-md bg-red-50 p-4 mt-6",children:i.jsx("div",{className:"flex",children:i.jsx("div",{className:"ml-3",children:i.jsx("h3",{className:"text-sm font-medium text-red-800",children:s})})})}),i.jsx("div",{className:"mt-4",children:i.jsx("button",{type:"button",onClick:I,disabled:r,className:"microsoft-signin-button",style:{width:"100%",height:"41px",display:"flex",alignItems:"center",justifyContent:"center",paddingLeft:"12px",paddingRight:"12px",cursor:r?"not-allowed":"pointer",opacity:r?.5:1},onMouseEnter:A=>{r||(A.currentTarget.style.backgroundColor="#F5F5F5")},onMouseLeave:A=>{r||(A.currentTarget.style.backgroundColor="#FFFFFF")},children:r?i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2",style:{borderColor:"#5E5E5E",marginRight:"12px"}}),i.jsx("span",{style:{color:"#5E5E5E"},children:"Signing in..."})]}):i.jsxs(i.Fragment,{children:[i.jsx("img",{src:eL,alt:"Microsoft",style:{width:"21px",height:"21px",marginRight:"12px",flexShrink:0}}),i.jsx("span",{style:{color:"#5E5E5E",fontFamily:'"Segoe UI", system-ui, -apple-system, BlinkMacSystemFont, "Roboto", "Helvetica Neue", Arial, sans-serif',fontSize:"15px",fontWeight:600},children:"Sign in with Microsoft"})]})})}),i.jsxs("div",{className:"mt-6",children:[i.jsxs("div",{className:"relative",children:[i.jsx("div",{className:"absolute inset-0 flex items-center",children:i.jsx("div",{className:"w-full border-t border-gray-300"})}),i.jsx("div",{className:"relative flex justify-center text-sm",children:i.jsx("span",{className:"px-2 bg-white text-gray-500",children:"No registration required"})})]}),i.jsxs("div",{className:"mt-6 text-center text-xs text-gray-500",children:[i.jsx("p",{children:"Simply enter your name and email to access"}),i.jsx("p",{children:"voting sessions you've been invited to"})]}),i.jsx("div",{className:"mt-4",children:i.jsx("button",{type:"button",onClick:()=>u(!0),className:"w-full text-sm text-[#2d4660] hover:text-[#1d3a53] underline",children:"Request Access"})})]})]})]})}),i.jsx(ZZ,{isOpen:l,onClose:kt.useCallback(()=>u(!1),[])}),d&&i.jsx(bn,{isOpen:!0,onClose:()=>m(null),title:"",maxWidth:"max-w-md",hideHeader:!0,hideCloseButton:!1,children:i.jsxs("div",{className:"text-center pb-6",children:[i.jsx(kr,{className:"h-16 w-16 text-green-600 mx-auto mb-4"}),i.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Access Granted Successfully!"}),i.jsxs("p",{className:"text-sm text-gray-600 mb-1",children:["Successfully granted ",i.jsx("span",{className:"font-semibold text-green-700",children:d.roleName})," access to"]}),i.jsx("p",{className:"text-base font-semibold text-gray-900 mb-1",children:d.requesterName}),i.jsx("p",{className:"text-xs text-gray-500 mb-3",children:d.requesterEmail}),i.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"for all sessions in"}),i.jsx("p",{className:"text-lg font-semibold text-green-700 mb-4",children:d.productName}),i.jsx("p",{className:"text-sm text-gray-600",children:"Emails have been sent to both the requester and admin."})]})})]})}const ZZ=kt.memo(function({isOpen:t,onClose:r}){const[n,s]=g.useState(""),[a,l]=g.useState(""),[u,d]=g.useState(""),[m,f]=g.useState([]),[p,x]=g.useState(!1),[v,b]=g.useState(!1),[w,j]=g.useState(!1),[_,E]=g.useState(""),[C,I]=g.useState(!1),A=kt.useRef(null),$=kt.useRef(!1),B=kt.useRef(null),T=kt.useRef(null);g.useEffect(()=>{t&&!$.current?(async()=>{x(!0);try{const Y=await Bh();f(Y),$.current=!0}catch(Y){console.error("Error loading products:",Y),E("Failed to load products. Please try again.")}finally{x(!1)}})():t||(s(""),l(""),d(""),j(!1),E(""),$.current=!1)},[t]),g.useEffect(()=>{function F(Y){A.current&&!A.current.contains(Y.target)&&I(!1)}return document.addEventListener("mousedown",F),()=>document.removeEventListener("mousedown",F)},[]);const K=kt.useCallback(F=>{s(F.target.value)},[]),Q=kt.useCallback(F=>{l(F.target.value)},[]),se=async F=>{if(F.preventDefault(),E(""),!n.trim()){E("Name is required");return}if(!a.trim()){E("Email is required");return}if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(a)){E("Please enter a valid email address");return}if(!u){E("Please select a product");return}b(!0);try{const Y=await PE(u);if(Y.length===0){E("No administrators found for this product. Please contact your system administrator."),b(!1);return}const J=m.find(je=>je.id===u),V=(J==null?void 0:J.name)||"the selected product",H=Array.from(new Set(Y.map(je=>{var Me;return(Me=je.user)==null?void 0:Me.email}).filter(Boolean))),re=window.location.pathname.startsWith("/feature-voting-app")?"/feature-voting-app":"",ie=`${window.location.origin}${re}/login`,M=await UC(a,u,"grant-admin"),Z=await UC(a,u,"grant-stakeholder"),ye=`
<table width="100%" cellpadding="0" cellspacing="0" border="0" style="background-color: #f9fafb; font-family: Arial, sans-serif;">
  <tr>
    <td align="center" style="padding: 48px 20px;">
      <table width="600" cellpadding="0" cellspacing="0" border="0" style="background-color: #ffffff; border-radius: 8px; box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);">
        <!-- Logo Header - Matching Login Page -->
        <tr>
          <td style="background-color: #ffffff; padding: 32px 40px 24px 40px; text-align: center;">
            <img src="https://dcchoffman.github.io/feature-voting-app/New-Millennium-color-logo1.png" alt="New Millennium Building Systems" width="300" height="96" style="height: 96px; width: auto; max-width: 300px; display: block; margin: 0 auto; border: 0;" />
            <div style="font-size: 20px; font-weight: bold; color: #2d4660; margin-top: 16px; margin-bottom: 4px;">Feature Voting System</div>
            <div style="font-size: 11px; color: #6b7280; margin-bottom: 2px;">has a</div>
            <div style="font-size: 25px; font-weight: bold; color: #2d4660; margin-bottom: 2px;">Access Request Notification</div>
            <div style="font-size: 11px; color: #6b7280; margin-bottom: 2px;">for the</div>
            <div style="font-size: 30px; font-weight: bold; color: #2d4660; margin-bottom: 8px;">${V}</div>
          </td>
        </tr>
        
        <!-- Main Content -->
        <tr>
          <td style="background-color: #ffffff; padding: 40px;">
            <p style="margin: 0 0 16px 0; font-size: 16px; color: #333;">Hello,</p>
            <p style="margin: 0 0 24px 0; font-size: 16px; color: #333;">A new access request has been submitted for <strong style="color: #2d4660;">${V}</strong>.</p>
            
            <!-- User Details - Labels less prominent, values emphasized -->
            <table width="100%" cellpadding="0" cellspacing="0" border="0" style="background-color: white; border-left: 4px solid #2d4660; border-radius: 4px; margin: 20px 0;">
              <tr>
                <td style="padding: 20px;">
                  <div style="margin: 10px 0;">
                    <span style="font-weight: normal; color: #6b7280; font-size: 13px;">Requester Name:</span> <span style="color: #1f2937; font-weight: 600; font-size: 15px;">${n}</span>
                  </div>
                  <div style="margin: 10px 0;">
                    <span style="font-weight: normal; color: #6b7280; font-size: 13px;">Requester Email:</span> <span style="color: #1f2937; font-weight: 600; font-size: 15px;">${a}</span>
                  </div>
                  <div style="margin: 10px 0;">
                    <span style="font-weight: normal; color: #6b7280; font-size: 13px;">Product:</span> <span style="color: #1f2937; font-weight: 600; font-size: 15px;">${V}</span>
                  </div>
                </td>
              </tr>
            </table>

            <p style="margin: 24px 0; font-size: 16px; color: #333; line-height: 1.6;">To grant access, click one of the buttons below.<br />Access will be granted <b>immediately</b> to all sessions for this product,<br /><b>and an email notification will be sent to the requester.</b></p>
            
            <!-- Action Buttons - Gold buttons for granting access (same size) -->
            <table width="100%" cellpadding="0" cellspacing="0" border="0" style="margin: 32px 0;">
              <tr>
                <td width="50%" align="left" valign="top" style="padding-right: 10px;">
                  <a href="${ie}?token=${M}&action=grant-admin&email=${encodeURIComponent(a)}&product=${encodeURIComponent(u)}" style="display: inline-block; padding: 12px 20px; background-color: #C89212; color: white; text-decoration: none; border-radius: 6px; font-weight: 600; font-size: 13px; box-shadow: 0 1px 2px 0 rgba(0, 0, 0, 0.05); text-align: center; line-height: 1.5; width: 100%; max-width: 240px; min-width: 240px;">
                    Grant Access as<br /><span style="font-size: 18px; font-weight: 700;">Session Admin</span>
                  </a>
                </td>
                <td width="50%" align="right" valign="top" style="padding-left: 10px;">
                  <a href="${ie}?token=${Z}&action=grant-stakeholder&email=${encodeURIComponent(a)}&product=${encodeURIComponent(u)}" style="display: inline-block; padding: 12px 20px; background-color: #C89212; color: white; text-decoration: none; border-radius: 6px; font-weight: 600; font-size: 13px; box-shadow: 0 1px 2px 0 rgba(0, 0, 0, 0.05); text-align: center; line-height: 1.5; width: 100%; max-width: 240px; min-width: 240px;">
                    Grant Access as<br /><span style="font-size: 18px; font-weight: 700;">Stakeholder</span>
                  </a>
                </td>
              </tr>
            </table>
            
            <!-- Helpful Text -->
            <p style="margin: 24px 0 16px 0; font-size: 14px; color: #6b7280; line-height: 1.6; text-align: center;">
              Click either button above to quickly grant access,<br />or use the link below to manage sessions and users in the system.
            </p>
            
            <!-- Go to System Button -->
            <table width="100%" cellpadding="0" cellspacing="0" border="0" style="margin: 24px 0;">
              <tr>
                <td align="center">
                  <a href="${ie}" style="display: inline-block; padding: 12px 24px; background-color: #2d4660; color: white; text-decoration: none; border-radius: 6px; font-weight: 500; font-size: 14px; box-shadow: 0 1px 2px 0 rgba(0, 0, 0, 0.05);">Go to Feature Voting System</a>
                </td>
              </tr>
            </table>
          </td>
        </tr>
        
        <!-- Footer -->
        <tr>
          <td style="background-color: #f9fafb; padding: 20px; text-align: center; border-top: 1px solid #e5e7eb; font-size: 12px; color: #6b7280;">
            <p style="margin: 0 0 8px 0;">This is an automated message from the Feature Voting System.</p>
            <p style="margin: 0; color: #9ca3af;"> ${new Date().getFullYear()} New Millennium Building Systems</p>
          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>`,Le=`
Access Request - Feature Voting System

Hello,

A new access request has been submitted for ${V}.

Requester Name: ${n}
Requester Email: ${a}
Product: ${V}

To grant access, please add this user as a stakeholder or admin to the relevant voting sessions for this product.

Login: ${ie}

This is an automated message from the Feature Voting System.
      `;try{const je=H.map(Me=>Yo({to:Me,subject:`Access Request for ${V} - Feature Voting System`,text:Le,html:ye}));await Promise.all(je),j(!0)}catch(je){console.error("Email service failed:",je);let Me="Failed to send email through the system.";je instanceof Error||je!=null&&je.message?Me=je.message:typeof je=="string"&&(Me=je),(Me.includes("validation_error")||Me.includes("403"))&&(Me="Domain verification required. Please verify your domain in Resend and update FROM_EMAIL in Supabase secrets."),E(`Failed to send access request: ${Me}. Please check the Supabase Edge Function logs for details.`),b(!1);return}}catch(Y){console.error("Error sending access request:",Y),E("Failed to send access request. Please try again or contact your administrator.")}finally{b(!1)}},G=m.find(F=>F.id===u),le=G?Ur(G.name,G.color_hex??null):null;return i.jsx(bn,{isOpen:t,onClose:r,title:w?"":"Request Access",maxWidth:"max-w-lg",hideHeader:w,children:w?i.jsxs("div",{className:"text-center pb-6",children:[i.jsx(kr,{className:"h-16 w-16 text-green-600 mx-auto mb-3"}),i.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-3",children:"Thank You!"}),i.jsx("p",{className:"text-sm text-gray-600 mb-2",children:"Your access request has been sent to the administrators for"}),i.jsx("p",{className:"text-xl font-semibold text-[#2d4660] mb-4",children:G==null?void 0:G.name}),i.jsx("p",{className:"text-sm text-gray-600",children:"You will be notified once your access has been granted."})]}):i.jsxs("form",{onSubmit:se,className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{htmlFor:"requestName",className:"block text-sm font-medium text-gray-700 mb-1",children:"Full Name *"}),i.jsx("input",{ref:B,id:"requestName",type:"text",required:!0,autoComplete:"off","data-lpignore":"true","data-form-type":"other",value:n,onChange:K,className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-[#2d4660] focus:border-[#2d4660]",placeholder:"John Doe"})]}),i.jsxs("div",{children:[i.jsx("label",{htmlFor:"requestEmail",className:"block text-sm font-medium text-gray-700 mb-1",children:"Email Address *"}),i.jsx("input",{ref:T,id:"requestEmail",type:"email",required:!0,autoComplete:"off","data-lpignore":"true","data-form-type":"other",value:a,onChange:Q,className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-[#2d4660] focus:border-[#2d4660]",placeholder:"your.email@company.com"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Product *"}),i.jsxs("div",{ref:A,className:"relative",children:[i.jsxs("button",{type:"button",onClick:()=>I(!C),className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm bg-white text-left flex items-center justify-between hover:border-gray-400 focus:outline-none focus:ring-[#2d4660] focus:border-[#2d4660]",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[G&&le&&i.jsx("div",{className:"w-4 h-4 rounded flex-shrink-0",style:{backgroundColor:le.background}}),i.jsx("span",{className:G?"text-gray-900":"text-gray-400",children:G?G.name:"Select a product..."})]}),i.jsx(rs,{className:`h-4 w-4 text-gray-400 transition-transform ${C?"transform rotate-180":""}`})]}),C&&i.jsx("div",{className:"absolute z-[100] w-full mt-1 bg-white border border-gray-300 rounded-md shadow-lg max-h-96 overflow-y-auto",children:p?i.jsx("div",{className:"px-3 py-2 text-sm text-gray-500 text-center",children:"Loading products..."}):m.length===0?i.jsx("div",{className:"px-3 py-2 text-sm text-gray-500 text-center",children:"No products available"}):m.map(F=>{const Y=Ur(F.name,F.color_hex??null),J=u===F.id;return i.jsxs("div",{onClick:()=>{d(F.id),I(!1)},className:`px-3 py-2 cursor-pointer hover:bg-gray-50 flex items-center gap-2 ${J?"bg-[#2d4660]/5":""}`,children:[Y&&i.jsx("div",{className:"w-4 h-4 rounded flex-shrink-0",style:{backgroundColor:Y.background}}),i.jsx("span",{className:"text-sm text-gray-900",children:F.name})]},F.id)})})]})]}),_&&i.jsx("div",{className:"rounded-md bg-red-50 p-4",children:i.jsx("div",{className:"flex",children:i.jsx("div",{className:"ml-3",children:i.jsx("h3",{className:"text-sm font-medium text-red-800",children:_})})})}),i.jsxs("div",{className:"flex justify-end space-x-2 pt-4 border-t",children:[i.jsx(gt,{variant:"secondary",onClick:r,disabled:v,children:"Cancel"}),i.jsx(gt,{variant:"primary",type:"submit",disabled:v,className:"flex items-center",children:v?i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Sending..."]}):i.jsxs(i.Fragment,{children:[i.jsx(hu,{className:"h-4 w-4 mr-2"}),"Send Request"]})})]})]})})});function eee(){const{currentUser:e,setCurrentSession:t,refreshSessions:r,setCurrentUser:n,isLoading:s}=Ta(),a=ri(),[l]=Mv(),[u,d]=g.useState(!0),[m,f]=g.useState(!1),p=g.useRef(!1),[x,v]=g.useState([]),[b,w]=g.useState({}),[j,_]=g.useState({}),[E,C]=g.useState({}),[I,A]=g.useState({}),[$,B]=g.useState({}),[T,K]=g.useState(!1),[Q,se]=g.useState("admin"),[G,le]=g.useState(!1),F=g.useRef(null),[Y,J]=g.useState({}),[V,H]=g.useState({}),[re,ie]=g.useState(!1),[M,Z]=g.useState(!0),[fe,ye]=g.useState({title:"",goal:"",votesPerUser:10,useAutoVotes:!0,startDate:"",endDate:""}),[Le,je]=g.useState({}),[Me,Se]=g.useState(!1),[z,ue]=g.useState([]),[de,ee]=g.useState(""),[Ye,Oe]=g.useState(""),[rt,Nt]=g.useState(null),[vt,ot]=g.useState(null),[rr,U]=g.useState(!1),[q,ne]=g.useState(!1),[Ne,Ie]=g.useState(!1),[Ce,Te]=g.useState(null),[dt,Mt]=g.useState(!1),[qe,bt]=g.useState(!1),[jt,Be]=g.useState(!1),[He,Ze]=g.useState(null),[ft,nt]=g.useState(!1),[Kt,dr]=g.useState("#2D4660"),Pr=g.useRef(null),[tt,Bt]=g.useState(new Set),[qt,Wt]=g.useState(null),[Qt,sr]=g.useState(null),[Mr,Zt]=g.useState(!1),[lr,mr]=g.useState(!1),[ir,qn]=g.useState(null),[Vt,ls]=g.useState(null),[qr,vr]=g.useState(null),[cr,Hr]=g.useState(null),[Kr,Hn]=g.useState(""),[jr,Ir]=g.useState(null),[In,Kn]=g.useState(!1),[Vi,sn]=g.useState(!1),[bs,Us]=g.useState("#2D4660"),[_r,fn]=g.useState(!1),[Cr,nr]=g.useState([]),[ur,Gr]=g.useState([]),[ws,Tn]=g.useState(""),[ae,_e]=g.useState(""),[$e,ze]=g.useState(""),[Xe,Fe]=g.useState(!1),[Yt,Dt]=g.useState(""),[$t,Ee]=g.useState(null),[Je,Jt]=g.useState(!1),[Xt,yt]=g.useState(null),br=()=>yt(null),an=Cr.map(P=>P.user_email.toLowerCase()),cs=an.length>0&&an.every(P=>ur.includes(P));g.useEffect(()=>{const P=l.get("error"),D=l.get("error_description"),X=l.get("error_code");if(P){let ce="Authentication failed.";X==="unexpected_failure"&&(D!=null&&D.includes("email"))?ce="Azure AD did not return your email address. Please ensure your Azure AD app has the correct API permissions (User.Read or email) and that your account has an email address.":D&&(ce=decodeURIComponent(D)),sessionStorage.setItem("oauth_error",ce),a("/login",{replace:!0})}},[l,a]),g.useEffect(()=>{(async()=>{if(!re||!e)return;const D=e.tenant_id??e.tenantId??null;if(!D){ue([]),ee(""),Te("No tenant assigned. Products cannot be loaded.");return}ne(!0),Te(null);try{const ce=await Ga(D);ue(ce),ee(Re=>{if(Mr&&Re&&ce.some(ge=>ge.id===Re))return Re;if(qt){const Ae=ce.find(ge=>{var be;return((be=ge.name)==null?void 0:be.toLowerCase().trim())===qt.toLowerCase().trim()});if(Ae!=null&&Ae.id)return Wt(null),Ae.id}return Mr&&Re||""}),J(Re=>{const Ae={...Re};return ce.forEach(ge=>{ge.id&&ge.name&&(Ae[ge.id]=ge.name)}),Ae}),H(Re=>{const Ae={...Re};return ce.forEach(ge=>{ge.id&&ge.color_hex&&(Ae[ge.id]=ge.color_hex)}),Ae})}catch(X){console.error("Error loading products for modal:",X),eo!=null&&eo(X)?Te("Products are not configured yet. Please create the `products` table in Supabase."):Te("Unable to load products. You can still create a session without a product tag."),ue([]),ee("")}finally{ne(!1)}})()},[re,e]);const ar=P=>{if(!P||typeof P!="string")return console.error("[parseLocalDate] Invalid date string:",P),new Date;const X=P.split("T")[0].split(" ")[0].split("-");if(X.length!==3)return console.error("[parseLocalDate] Invalid date format:",P),new Date;const ce=parseInt(X[0],10),Re=parseInt(X[1],10),Ae=parseInt(X[2],10);if(isNaN(ce)||isNaN(Re)||isNaN(Ae))return console.error("[parseLocalDate] Invalid date components:",{year:ce,month:Re,day:Ae}),new Date;const ge=new Date(ce,Re-1,Ae,0,0,0,0);return isNaN(ge.getTime())?(console.error("[parseLocalDate] Invalid date created:",{year:ce,month:Re,day:Ae,dateString:P}),new Date):ge},en=P=>{if(!P||isNaN(P.getTime()))return console.error("[formatDateToISO] Invalid date:",P),new Date().toISOString().split("T")[0];const D=P.getFullYear(),X=String(P.getMonth()+1).padStart(2,"0"),ce=String(P.getDate()).padStart(2,"0");return`${D}-${X}-${ce}`},xr=(P,D)=>{const X=P.getFullYear(),ce=P.getMonth(),Re=P.getDate();return new Date(X,ce,Re+D,0,0,0,0)},qi=()=>{const P="ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";let D="";for(let X=0;X<8;X++)D+=P.charAt(Math.floor(Math.random()*P.length));return D},Ft=()=>{ye({title:"",goal:"",votesPerUser:10,useAutoVotes:!0,startDate:"",endDate:""}),je({}),Oe(""),Nt(null),Te(null),Mt(!1),bt(!1),Be(!1),Ze(null),nt(!1),dr("#2D4660"),Wt(null),Z(!0),Zt(!1),mr(!1)},Bs=(P=!1)=>{const D={};if(P||(fe.title.trim()||(D.title="Session title is required"),fe.goal.trim()||(D.goal="Session goal is required")),fe.useAutoVotes||(fe.votesPerUser<1&&(D.votesPerUser="Votes per user must be at least 1"),fe.votesPerUser>100&&(D.votesPerUser="Votes per user cannot exceed 100")),P){if(fe.startDate&&fe.endDate){const X=ar(fe.startDate);ar(fe.endDate)<=X&&(D.endDate="End date must be after start date")}}else if((!fe.startDate||!fe.startDate.trim())&&(D.startDate="Start date is required"),(!fe.endDate||!fe.endDate.trim())&&(D.endDate="End date is required"),fe.startDate&&fe.endDate&&fe.startDate.trim()&&fe.endDate.trim()){const X=ar(fe.startDate);ar(fe.endDate)<=X&&(D.endDate="End date must be after start date")}if(!P){const X=Ye.trim().length>0;!Ce&&z.length>0&&!de&&!He&&!dt&&!X&&(D.product="Please select a product or enter a new product name"),dt&&!X&&(D.product="Please enter a product name or select an existing product")}return je(D),Object.keys(D).length===0},si=P=>{const{name:D,value:X}=P.target;ye(ce=>{const Re={...ce,[D]:D==="votesPerUser"?parseInt(X)||0:X};if(D==="startDate"&&X){const Ae=ar(X),ge=xr(Ae,14);Re.endDate=en(ge)}return Re}),Le[D]&&je(ce=>{const Re={...ce};return delete Re[D],Re})},hn=async P=>{if(P==="startDate"&&!fe.startDate){let D;if(de)try{const Ae=x.filter(ge=>ge.product_id===de);if(Ae.length>0){let ge=ar(Ae[0].end_date);Ae.forEach(be=>{const mt=ar(be.end_date);mt>ge&&(ge=mt)}),D=xr(ge,1)}else D=new Date}catch(Ae){console.error("Error calculating dates for product:",Ae),D=new Date}else D=new Date;const X=en(D),ce=ar(X),Re=xr(ce,14);ye(Ae=>({...Ae,startDate:X,endDate:Ae.endDate||en(Re)}))}else if(P==="endDate"&&!fe.endDate){let D;if(fe.startDate)D=ar(fe.startDate);else if(de)try{const ce=x.filter(Re=>Re.product_id===de);if(ce.length>0){let Re=ar(ce[0].end_date);ce.forEach(Ae=>{const ge=ar(Ae.end_date);ge>Re&&(Re=ge)}),D=xr(Re,1)}else D=new Date}catch(ce){console.error("Error calculating dates for product:",ce),D=new Date}else D=new Date;const X=xr(D,14);ye(ce=>({...ce,endDate:en(X),startDate:ce.startDate||en(D)}))}},Hi=async()=>{if(!(!vt||!e)){U(!0);try{await _E(vt.id),ue(P=>P.filter(D=>D.id!==vt.id)),J(P=>{const D={...P};return delete D[vt.id],D}),H(P=>{const D={...P};return delete D[vt.id],D}),de===vt.id&&ee("")}catch(P){console.error("Error deleting product:",P),alert("Failed to delete product. Please try again.")}finally{U(!1),ot(null)}}},Ki=async()=>{if(e&&Bs(!0)){Se(!0);try{const P=qi(),D=e.tenant_id??e.tenantId??null;let X=de&&de.trim()!==""?de:null;const ce=Ye.trim(),Re=ce.length>0;let Ae=null,ge=null;if(He?(Ae=He.name,ge=He.color):Re&&(Ae=ce,ge=rt),Ae&&D)try{const Ct=z.find(De=>De.name.toLowerCase().trim()===Ae.toLowerCase().trim());if(Ct)X=Ct.id;else{const De=await wx(D,Ae,ge||void 0);X=De.id,ue(St=>[...St,De].sort((Ge,ct)=>Ge.name.localeCompare(ct.name))),J(St=>({...St,[De.id]:De.name})),H(St=>{const Ge={...St};return De.color_hex&&(Ge[De.id]=De.color_hex),Ge})}}catch(Ct){console.error("Error creating product during draft save:",Ct)}const be=fe.startDate&&fe.startDate.trim()?fe.startDate:mn,mt=fe.endDate&&fe.endDate.trim()?fe.endDate:mn,It=`${be}T00:00:00`,lt=`${mt}T23:59:59`,Lt=await jx({title:fe.title.trim()||"Untitled Session",goal:fe.goal.trim()||"",votes_per_user:fe.votesPerUser||10,use_auto_votes:fe.useAutoVotes,start_date:It,end_date:lt,is_active:!1,session_code:P,access_type:"invite-only",product_id:X??null,product_name:null});try{await Dl(Lt.id,e.id)}catch(Ct){console.error("Error adding session admin for draft:",Ct)}await r(),p.current=!1,await ii(),pn()}catch(P){console.error("Error saving draft:",P),je(D=>({...D,submit:P.message||"Failed to save draft. Please try again."}))}finally{Se(!1)}}},js=async P=>{if(P.preventDefault(),!!e&&Bs(!1)){Se(!0);try{const D=qi(),X=e.tenant_id??e.tenantId??null;let ce=de&&de.trim()!==""?de:null;const Re=Ye.trim(),Ae=Re.length>0,ge=de&&de.trim()!=="";let be=null,mt=null;if(He?(be=He.name,mt=He.color):Ae&&(be=Re,mt=rt),be){const St=z.find(Ge=>Ge.name.toLowerCase().trim()===be.toLowerCase().trim());if(St)ce=St.id;else if(X)try{const Ge=await wx(X,be,mt||void 0);ce=Ge.id,ue(ct=>[...ct,Ge].sort((zt,st)=>zt.name.localeCompare(st.name))),J(ct=>({...ct,[Ge.id]:Ge.name})),H(ct=>{const zt={...ct};return Ge.color_hex&&(zt[Ge.id]=Ge.color_hex),zt})}catch(Ge){console.error("Error creating product during session creation:",Ge),je(ct=>({...ct,submit:"Failed to create product. Please try again."})),Se(!1);return}else{console.error("No tenantId available to create product"),je(Ge=>({...Ge,submit:"Unable to create product: No tenant assigned."})),Se(!1);return}}if(ce&&fe.startDate&&fe.endDate&&fe.startDate.trim()&&fe.endDate.trim()){const St=x.filter(Rt=>Rt.product_id===ce),Ge=fe.startDate.split("T")[0],ct=fe.endDate.split("T")[0];if(St.find(Rt=>{const wt=Rt.start_date.split("T")[0],tr=Rt.end_date.split("T")[0];return wt===Ge&&tr===ct})){const Rt=Y[ce]||"this product";je(wt=>({...wt,submit:`A session with the same dates (${Fr(fe.startDate)} - ${Fr(fe.endDate)}) already exists for ${Rt}. Please choose different dates.`})),Se(!1);return}const st=await EE(ce);if(st){const Rt=ar(st.end_date);if(ar(fe.startDate)<=Rt){const tr=Y[ce]||"this product";je(Yr=>({...Yr,submit:`There is already an active session for ${tr}. The new session must start after ${Fr(st.end_date)}.`})),Se(!1);return}}}const It=`${fe.startDate}T00:00:00`,lt=`${fe.endDate}T23:59:59`,Lt=await jx({title:fe.title,goal:fe.goal,votes_per_user:fe.votesPerUser,use_auto_votes:fe.useAutoVotes,start_date:It,end_date:lt,is_active:!0,session_code:D,access_type:"invite-only",product_id:ce??null,product_name:null});try{await Dl(Lt.id,e.id)}catch(St){console.error("Error adding session admin (session was created successfully):",St),(St==null?void 0:St.code)==="42501"&&(console.warn("RLS policy violation when adding session admin. The session was created but admin assignment failed."),console.warn("This may require updating RLS policies for the session_admins table."))}const De=await qv(Lt.id)||Lt;if(De.product_id&&X)try{const Ge=(await Ga(X)).find(ct=>ct.id===De.product_id);Ge&&(J(ct=>({...ct,[Ge.id]:Ge.name})),Ge.color_hex&&Ge.color_hex.trim()!==""&&H(ct=>({...ct,[Ge.id]:Ge.color_hex})))}catch(St){console.error("Error loading product for lookup:",St)}t(De),await r(),await ii(),ie(!1),Ft(),setTimeout(()=>{a("/admin")},100)}catch(D){console.error("Error creating session from modal:",D),je(X=>({...X,submit:"Failed to create session. Please try again."}))}finally{Se(!1)}}};g.useEffect(()=>{if(!G)return;const P=D=>{F.current&&!F.current.contains(D.target)&&le(!1)};return document.addEventListener("mousedown",P),document.addEventListener("touchstart",P,{passive:!0}),()=>{document.removeEventListener("mousedown",P),document.removeEventListener("touchstart",P)}},[G]);const ii=g.useCallback(async()=>{var P;if(!e){console.log("[SessionSelectionScreen] No current user, skipping loadUserSessions");return}if(p.current){console.log("[SessionSelectionScreen] Sessions already loading, skipping duplicate call");return}p.current=!0,d(!0);try{const X=Cx(e.email)||await Ui(e.id);K(X);let ce;X?ce=await Go():ce=await CE(e.id);const Re=(e==null?void 0:e.tenant_id)??(e==null?void 0:e.tenantId)??null;let Ae={},ge={};if(Re)try{const Ct=await Ga(Re);Ae=Ct.reduce((De,St)=>(St.id&&St.name&&(De[St.id]=St.name),De),{}),ge=Ct.reduce((De,St)=>(St.id&&St.color_hex&&(De[St.id]=St.color_hex),De),{})}catch(Ct){console.error("Error loading products for session selection:",Ct)}const be={},mt={},It={},lt={},Lt={};for(let Ct=0;Ct<ce.length;Ct++){const De=ce[Ct];try{const[St,Ge,ct,zt,st,Rt]=await Promise.all([X?Promise.resolve(!0):Hm(De.id,e.id),Hv(De.id,e.email),ja(De.id),Lo(De.id).catch(tr=>(console.warn(`Failed to load votes for session ${De.id}:`,tr),[])),qd(De.id).catch(()=>[]),Wh(De.id).catch(()=>[])]);be[De.id]={isAdmin:St,isStakeholder:Ge},mt[De.id]=ct.length,lt[De.id]=st.length,Lt[De.id]=Rt.length;const wt=zt.some(tr=>tr.user_id===e.id);It[De.id]=wt}catch(St){console.warn(`Error loading data for session ${De.id}:`,St),be[De.id]={isAdmin:!1,isStakeholder:!1},mt[De.id]=0,lt[De.id]=0,Lt[De.id]=0,It[De.id]=!1}}await r(),v(ce),w(be),_(mt),C(It),A(lt),B(Lt),J(Ae),H(ge)}catch(D){console.error("Error loading sessions:",D),(P=D==null?void 0:D.message)!=null&&P.includes("Failed to fetch")||(D==null?void 0:D.code)==="ERR_FAILED"?(console.warn("Network error loading sessions - will retry. This is usually temporary."),v([]),w({}),_({}),C({})):(v([]),w({}),_({}),C({})),p.current=!1}finally{d(!1)}},[e,r]);g.useEffect(()=>{if(s)return;if((window.location.search.includes("code=")||window.location.hash.includes("access_token")||window.location.search.includes("error="))&&!e&&!m){f(!0);const D=setTimeout(()=>{f(!1),e||a("/login",{replace:!0})},3e3);return()=>clearTimeout(D)}if(m&&e&&f(!1),!m){if(!e&&!s){a("/login",{replace:!0});return}e&&!s&&!p.current&&ii()}},[e,s,a,m]);const Gn=P=>{const D=j[P.id]||0;if(P.use_auto_votes){const X=Math.max(1,Math.floor(D/2));return{votes:X,displayText:`${X} votes/user`,isAuto:!0,formula:`Auto: ${D} ${D===1?"feature":"features"}  2 = ${X}`}}else return{votes:P.votes_per_user,displayText:`${P.votes_per_user} votes/user`,isAuto:!1,formula:""}},tn=P=>{t(P);const D=b[P.id];Q==="stakeholder"?a("/vote"):D!=null&&D.isAdmin?a("/admin"):a("/vote")},us=P=>{t(P),a("/vote")},Ss=async()=>{try{await Pe.auth.signOut()}catch{}try{t(null)}catch{}n(null);try{localStorage.removeItem("voting_system_current_session"),localStorage.removeItem("azureDevOpsAuthInProgress"),sessionStorage.removeItem("oauth_return_path"),sessionStorage.removeItem("oauth_action")}catch{}le(!1),a("/login",{replace:!0})},Fr=P=>{const X=P.split("T")[0].split(" ")[0].split("-");if(X.length!==3)return new Date(P).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}).replace(/\b(\d{4})\b/g,lt=>`'${lt.slice(-2)}`);const ce=parseInt(X[0],10),Re=parseInt(X[1],10)-1,Ae=parseInt(X[2],10);return new Date(ce,Re,Ae).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}).replace(/\b(\d{4})\b/g,mt=>`'${mt.slice(-2)}`)},mn="2099-12-31",on=P=>P?P.split("T")[0]===mn:!1,Gi=P=>{if(!P.is_active){const D=!P.title||P.title==="Untitled Session"||P.title.trim()==="",X=!P.goal||P.goal.trim()==="";return D||X}return!1},Ps=P=>{if(Gi(P))return{text:"Draft",color:"text-yellow-900 bg-yellow-200",icon:Gh};const D=new Date,X=new Date(P.start_date),ce=new Date(P.end_date);return D<X?{text:"Upcoming",color:"text-yellow-600 bg-yellow-50",icon:Qm}:D>ce?{text:"Closed",color:"text-gray-600 bg-gray-100",icon:or}:{text:"Active",color:"text-[#1E6154] bg-[#1E6154]/10",icon:kr}},Os=P=>[...P].sort((D,X)=>{const ce=D!=null&&D.end_date?Date.parse(D.end_date):0;return(X!=null&&X.end_date?Date.parse(X.end_date):0)-ce}),Yi=P=>P.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;"),wo=P=>Yi(P).replace(/\n/g,"<br />"),Is=P=>{const D=Ar(P,Y);return D?`${D}  ${P.title}`:`You're invited to vote: ${P.title}`},Ra=(P,D)=>{const X=Ar(P,Y);return`Hello,

You're invited to participate in the "${X?`${X}  ${P.title}`:P.title}" feature voting session.

`+(P.goal?`Goal: ${P.goal}

`:"")+`Voting Period: ${on(P.start_date)||on(P.end_date)?"Dates not set":`${Fr(P.start_date)} - ${Fr(P.end_date)}`}

Click the "Go Vote!" button below to sign in and cast your votes.

Need help? Reach out to the session admin team.

Thanks,
${(e==null?void 0:e.name)||"Feature Voting System"}`},il=(P,D)=>{const X="https://dcchoffman.github.io/feature-voting-app/New-Millennium-color-logo1.png";window.location.pathname.startsWith("/feature-voting-app");const ce=Ar(P,Y),Re=ce?`${ce}  ${P.title}`:P.title;return`
<table width="100%" cellpadding="0" cellspacing="0" border="0" style="background-color: #f9fafb; font-family: Arial, sans-serif;">
  <tr>
    <td align="center" style="padding: 48px 20px;">
      <table width="600" cellpadding="0" cellspacing="0" border="0" style="background-color: #ffffff; border-radius: 8px; box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);">
        <!-- Logo Header -->
        <tr>
          <td style="background-color: #ffffff; padding: 32px 40px 24px 40px; text-align: center;">
            <img src="${X}" alt="New Millennium Building Systems" width="300" height="96" style="height: 96px; width: auto; max-width: 300px; display: block; margin: 0 auto; border: 0;" />
            <div style="font-size: 24px; font-weight: bold; color: #2d4660; margin-top: 16px;">You're Invited to Vote</div>
          </td>
        </tr>
        
        <!-- Main Content -->
        <tr>
          <td style="background-color: #ffffff; padding: 40px;">
            <p style="margin: 0 0 16px 0; font-size: 16px; color: #333;">Hello,</p>
            <p style="margin: 0 0 24px 0; font-size: 16px; color: #333; line-height: 1.6;">You're invited to participate in the <strong style="color: #2d4660;">"${Re}"</strong> feature voting session.</p>
            
            ${P.goal?`<p style="margin: 0 0 24px 0; font-size: 16px; color: #333; line-height: 1.6;"><strong style="color: #2d4660;">Goal:</strong> ${Yi(P.goal)}</p>`:""}
            
            <p style="margin: 0 0 24px 0; font-size: 16px; color: #333; line-height: 1.6;"><strong style="color: #2d4660;">Voting Period:</strong> ${on(P.start_date)||on(P.end_date)?"Dates not set":`${Fr(P.start_date)} - ${Fr(P.end_date)}`}</p>
            
            <p style="margin: 24px 0; font-size: 16px; color: #333; line-height: 1.6;">Click the button below to sign in and cast your votes.</p>
            
            <!-- Go Vote Button - Gold styling like admin email -->
            <table width="100%" cellpadding="0" cellspacing="0" border="0" style="margin: 32px 0;">
              <tr>
                <td align="center">
                  <a href="${D}" style="display: inline-block; padding: 12px 24px; background-color: #C89212; color: white; text-decoration: none; border-radius: 6px; font-weight: 600; font-size: 16px; box-shadow: 0 1px 2px 0 rgba(0, 0, 0, 0.05);">Go Vote!</a>
                </td>
              </tr>
            </table>
            
            <p style="margin: 24px 0 0 0; font-size: 14px; color: #6b7280; line-height: 1.6;">Need help? Reach out to the session admin team.</p>
            
            <p style="margin: 24px 0 0 0; font-size: 16px; color: #333; line-height: 1.6;">Thanks,<br />${(e==null?void 0:e.name)||"Feature Voting System"}</p>
          </td>
        </tr>
        
        <!-- Footer -->
        <tr>
          <td style="background-color: #f9fafb; padding: 20px; text-align: center; border-top: 1px solid #e5e7eb; font-size: 12px; color: #6b7280;">
            <p style="margin: 0 0 8px 0;">This is an automated message from the Feature Voting System.</p>
            <p style="margin: 0; color: #9ca3af;"> ${new Date().getFullYear()} New Millennium Building Systems</p>
          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>`},ln=async(P,D)=>{P.stopPropagation();const X=window.location.pathname.startsWith("/feature-voting-app")?"/feature-voting-app":"",ce=`${window.location.origin}${X}/login?session=${D.session_code}`;Dt(""),Ee(D),ze(ce),Tn(Is(D)),_e(Ra(D)),fn(!0),Fe(!0),nr([]),Gr([]);try{const Ae=(await Wh(D.id)).filter(It=>!!It.user_email),ge=await bx(),be=new Set(ge.map(It=>It.email.toLowerCase())),mt=Ae.filter(It=>be.has(It.user_email.toLowerCase()));nr(mt),Gr(mt.map(It=>It.user_email.toLowerCase())),mt.length===0&&(Ae.length>0?Dt("No active stakeholders found for this session. Some stakeholders may have been deleted. Add stakeholders first, then send invites."):Dt("No stakeholders found for this session. Add stakeholders first, then send invites."))}catch(Re){console.error("Error loading stakeholders:",Re),Dt(Re.message||"Failed to load stakeholders for this session.")}finally{Fe(!1)}},Ws=(P,D)=>{P.stopPropagation(),t(D),a("/results")},Ts=()=>{fn(!1),nr([]),Gr([]),Ee(null),Dt("")},ki=P=>{Gr(D=>{const X=P.toLowerCase();return D.includes(X)?D.filter(ce=>ce!==X):[...D,X]})},jo=()=>{Gr(cs?[]:an)},al=async()=>{if(!$t)return;if(ur.length===0){Dt("Select at least one stakeholder to email.");return}Dt(""),Jt(!0);const P=ur.length,D=$t.title,X=ae||Ra($t),ce=ws||Is($t),Re=`
      <table width="100%" cellpadding="0" cellspacing="0" border="0" style="margin: 24px 0;">
        <tr>
          <td align="center">
            <a href="${$e}" style="display: inline-block; padding: 12px 24px; background-color: #C89212; color: white; text-decoration: none; border-radius: 6px; font-weight: 600; font-size: 16px; box-shadow: 0 1px 2px 0 rgba(0, 0, 0, 0.05);">Go Vote!</a>
          </td>
        </tr>
      </table>
    `;let Ae;if(ae){const ge="https://dcchoffman.github.io/feature-voting-app/New-Millennium-color-logo1.png";let be=wo(X);$e&&be.includes(Yi($e))&&(be=be.replace(new RegExp(Yi($e),"g"),"")),be=be+Re,Ae=`
<table width="100%" cellpadding="0" cellspacing="0" border="0" style="background-color: #f9fafb; font-family: Arial, sans-serif;">
  <tr>
    <td align="center" style="padding: 48px 20px;">
      <table width="600" cellpadding="0" cellspacing="0" border="0" style="background-color: #ffffff; border-radius: 8px; box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);">
        <!-- Logo Header -->
        <tr>
          <td style="background-color: #ffffff; padding: 32px 40px 24px 40px; text-align: center;">
            <img src="${ge}" alt="New Millennium Building Systems" width="300" height="96" style="height: 96px; width: auto; max-width: 300px; display: block; margin: 0 auto; border: 0;" />
            <div style="font-size: 24px; font-weight: bold; color: #2d4660; margin-top: 16px;">You're Invited to Vote</div>
          </td>
        </tr>
        
        <!-- Main Content -->
        <tr>
          <td style="background-color: #ffffff; padding: 40px;">
            <div style="font-family: Arial, sans-serif; font-size: 14px; color: #111827; line-height: 1.6;">${be}</div>
          </td>
        </tr>
        
        <!-- Footer -->
        <tr>
          <td style="background-color: #f9fafb; padding: 20px; text-align: center; border-top: 1px solid #e5e7eb; font-size: 12px; color: #6b7280;">
            <p style="margin: 0 0 8px 0;">This is an automated message from the Feature Voting System.</p>
            <p style="margin: 0; color: #9ca3af;"> ${new Date().getFullYear()} New Millennium Building Systems</p>
          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>`}else Ae=il($t,$e);try{await Promise.all(ur.map(be=>Yo({to:be,subject:ce,text:X,html:Ae})));const ge=Cr.filter(be=>ur.includes(be.user_email.toLowerCase())).map(be=>({name:be.user_name||"Unnamed Stakeholder",email:be.user_email}));Ts(),yt({sessionTitle:D,count:P,stakeholders:ge})}catch(ge){console.error("Error sending stakeholder invites:",ge),Dt(ge.message||"Failed to send invites. Please try again.")}finally{Jt(!1)}},Ma=(P,D)=>{P.stopPropagation(),t(D);const X=D.product_id||D.productId||"",ce=X?`/users?filter=session-admin&product=${X}`:"/users?filter=session-admin";a(ce)},Ji=(P,D)=>{P.stopPropagation(),t(D);const X=D.product_id||D.productId||"",ce=X?`/users?filter=stakeholder&product=${X}`:"/users?filter=stakeholder";a(ce)},pn=()=>{ie(!1),Zt(!1),mr(!1),Ft(),ee("")};if(u)return i.jsx("div",{className:"min-h-screen w-full bg-gray-50 flex items-center justify-center",children:i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-[#2D4660] mx-auto mb-4"}),i.jsx("p",{className:"text-gray-600",children:"Loading sessions..."})]})});const ds=Os(x),wr=T?ds:ds.filter(P=>{var D;return(D=b[P.id])==null?void 0:D.isAdmin}),Xi=T?[]:ds.filter(P=>{var D,X;return((D=b[P.id])==null?void 0:D.isStakeholder)&&!((X=b[P.id])!=null&&X.isAdmin)}),Yn=T||wr.length>0,Ni=T&&Q==="system-admin",_i=Q==="stakeholder"?ds.filter(P=>Ps(P).text==="Active"):[],L=Q==="admin"||Q==="system-admin"?wr:[],k=Q==="admin"?Xi:[],R=(P,D)=>{const X={};return P.forEach(ce=>{const Re=Ar(ce,D);if(!Re||Re==="No Product"||Re.trim()==="")return;const Ae=Re.toLowerCase().trim();X[Ae]||(X[Ae]=[]),X[Ae].push(ce)}),X},he=P=>{Bt(D=>{const X=new Set(D);return X.has(P)?X.delete(P):X.add(P),X})},me=(P,D,X,ce)=>{const Re=ce||X||P,Ae=async ge=>{if(!X)return;ge.stopPropagation();let be=z.find(mt=>mt.id===X);if(!be){const mt=(e==null?void 0:e.tenant_id)??(e==null?void 0:e.tenantId);if(mt)try{be=(await Ga(mt)).find(lt=>lt.id===X),be&&ue(lt=>lt.find(Ct=>Ct.id===X)?lt:[...lt,be].sort((Ct,De)=>Ct.name.localeCompare(De.name)))}catch(It){console.error("Error loading product for edit:",It)}}be&&(Hr(be),Hn(be.name||""),Ir(be.color_hex||null),Us(be.color_hex||"#2D4660"))};return i.jsxs("div",{className:"absolute left-0 px-4 py-1 pr-8 rounded-t-md border-b-0 text-sm font-semibold shadow-sm z-20 flex items-center gap-2 whitespace-nowrap group cursor-pointer",style:{top:"0",left:"-1px",transform:"translateY(-100%)",backgroundColor:D.background,color:D.text,borderColor:D.border,borderWidth:"1px",borderBottomWidth:"0",boxShadow:"0 4px 8px rgba(16,24,40,0.06)",borderTopLeftRadius:"0.9rem",borderTopRightRadius:"0.9rem",overflow:"visible"},onMouseEnter:()=>{X&&Q!=="stakeholder"&&Yn&&ls(Re)},onMouseLeave:()=>ls(null),onClick:Q!=="stakeholder"&&Yn?Ae:void 0,children:[i.jsx(Tx,{className:"h-4 w-4 flex-shrink-0"}),i.jsx("span",{className:"overflow-hidden text-ellipsis flex-1 min-w-0",children:P}),X&&Vt===Re&&Q!=="stakeholder"&&Yn&&i.jsx("div",{className:"absolute right-2 flex-shrink-0 opacity-80",children:i.jsx(Gh,{className:"h-4 w-4",style:{color:D.text}})})]})},ve=(P,D,X,ce,Re,Ae,ge,be=!0,mt)=>i.jsxs(i.Fragment,{children:[be&&me(D,X,mt),i.jsxs("div",{className:"flex flex-col h-full",children:[i.jsx("div",{className:"w-full px-6 py-2 rounded-t-md border-b border-gray-200",style:{backgroundColor:X.background,color:X.text},children:i.jsx("h3",{className:"text-lg font-semibold",children:P.title})}),i.jsxs("div",{className:"flex flex-col flex-1",style:{padding:"15px"},children:[(()=>{const It=Ct=>{if(!Ct||on(Ct))return 0;const De=new Date(Ct),St=new Date;St.setHours(0,0,0,0),De.setHours(0,0,0,0);const Ge=De.getTime()-St.getTime();return Math.ceil(Ge/(1e3*60*60*24))};let lt="Cast your Votes",Lt=!1;if(ce.text==="Upcoming"){const Ct=It(P.start_date);lt=`Cast your Vote in ${Ct} ${Ct===1?"day":"days"}`,Lt=!0}else ce.text==="Closed"||ce.text==="Draft"?(lt="Voting Session Closed",Lt=!0):ce.text==="Active"?(lt="Cast your Votes",Lt=!1):(lt="Voting Session Closed",Lt=!0);return i.jsxs("button",{onClick:Ct=>{Ct.stopPropagation(),Lt||us(P)},disabled:Lt,className:`w-full flex items-center justify-center px-3 py-2 rounded-md transition-colors mb-4 ${Lt?"bg-gray-200 text-gray-500 cursor-not-allowed":"bg-[#1E6154]/10 hover:bg-[#1E6154]/20 text-[#1E6154]"}`,style:Lt?{cursor:"not-allowed"}:{},children:[i.jsx(es,{className:`h-4 w-4 mr-2 ${Lt?"text-gray-500":"text-[#1E6154]"}`}),i.jsx("span",{className:`text-sm font-medium ${Lt?"text-gray-500":"text-[#1E6154]"}`,children:lt})]})})(),i.jsx("p",{className:"text-sm text-gray-600 mb-4 line-clamp-2",children:P.goal}),i.jsx("div",{className:"flex-1"}),i.jsxs("div",{className:"space-y-2 text-sm text-gray-500",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center",children:[i.jsx(un,{className:"h-4 w-4 mr-2"}),on(P.start_date)||on(P.end_date)?i.jsx("span",{className:"text-gray-400 italic",children:"Dates not set"}):i.jsxs("span",{children:[Fr(P.start_date)," - ",Fr(P.end_date)]})]}),i.jsxs("span",{className:`inline-flex items-center ${ce.text==="Active"?"px-3 py-1 text-sm":"px-2 py-0.5 text-xs"} rounded-full font-medium ${ce.color}`,children:[i.jsx(Re,{className:`${ce.text==="Active"?"h-4 w-4":"h-3 w-3"} mr-1`}),ce.text]})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center",children:[i.jsx(pi,{className:"h-4 w-4 mr-2"}),i.jsxs("span",{children:[j[P.id]||0," ",j[P.id]===1?"feature":"features"]})]}),i.jsx("span",{className:"text-sm font-medium text-[#2D4660]",children:D})]}),i.jsxs("div",{className:"flex items-start",children:[i.jsx(es,{className:"h-4 w-4 mr-2 mt-0.5 flex-shrink-0"}),i.jsxs("div",{className:"flex-1 flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center",children:[i.jsx("span",{className:"break-words",children:Ae.displayText}),Ae.isAuto&&i.jsxs("div",{className:"group relative ml-1 mt-0.5",children:[i.jsx(dd,{className:"h-4 w-4 text-blue-500 cursor-help"}),i.jsxs("div",{className:"absolute bottom-full left-1/2 -translate-x-1/2 mb-2 px-3 py-2 bg-gray-900 text-white text-xs rounded-lg opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-200 whitespace-nowrap z-10 pointer-events-none",children:[Ae.formula,i.jsx("div",{className:"absolute top-full left-1/2 -translate-x-1/2 -mt-1 border-4 border-transparent border-t-gray-900"})]})]})]}),ce.text!=="Upcoming"&&ce.text!=="Draft"&&i.jsxs("button",{onClick:It=>Ws(It,P),className:"ml-4 inline-flex items-center px-3 py-1 rounded-full text-xs font-medium bg-[#C89212] text-white hover:bg-[#E0A814] transition-colors cursor-pointer flex-shrink-0",children:[i.jsx(Ph,{className:"h-3 w-3 mr-1"}),ce.text==="Closed"?"Final Results":"Current Results"]})]})]}),Q!=="stakeholder"&&i.jsxs("div",{className:"flex items-center justify-center min-h-[48px] border-t border-gray-200 text-sm text-gray-600",children:[i.jsxs("button",{onClick:It=>{It.stopPropagation(),Ma(It,P)},className:"flex items-center mr-3 text-[#2D4660] hover:text-[#1D3144] hover:underline cursor-pointer",children:[i.jsx(Xr,{className:"h-4 w-4 mr-1.5"}),I[P.id]!==void 0?I[P.id]:0," Session Admin",I[P.id]!==1?"s":""]}),i.jsx("span",{className:"text-gray-400",children:""}),i.jsxs("button",{onClick:It=>{It.stopPropagation(),Ji(It,P)},className:"flex items-center ml-3 text-[#1E5461] hover:text-[#576C71] hover:underline cursor-pointer",children:[i.jsx(Ln,{className:"h-4 w-4 mr-1.5"}),$[P.id]!==void 0?$[P.id]:0," Stakeholder",$[P.id]!==1?"s":""]})]})]}),i.jsx("div",{className:"pt-4 border-t border-gray-200",children:(()=>{const It=Gi(P),lt=ge||It;return i.jsxs("div",{className:`relative inline-block w-full ${lt?"group":""}`,children:[i.jsxs("button",{onClick:Lt=>ln(Lt,P),disabled:lt,className:`w-full flex items-center justify-center px-3 py-2 rounded-md transition-colors ${lt?"bg-gray-200 text-gray-500":"bg-blue-50 hover:bg-blue-100"}`,style:lt?{cursor:"not-allowed"}:{},children:[i.jsx(hu,{className:`h-4 w-4 mr-2 ${lt?"text-gray-500":"text-blue-600"}`}),i.jsx("span",{className:`text-sm font-medium ${lt?"text-gray-500":"text-blue-600"}`,children:"Email Invite to Stakeholders"})]}),lt&&i.jsxs("div",{className:"absolute top-full left-1/2 -translate-x-1/2 mt-2 px-2 py-1 bg-gray-100 text-gray-800 text-xs rounded shadow-sm opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-200 whitespace-nowrap z-10 pointer-events-none",children:[It?"Draft Session":"Session Closed",i.jsx("div",{className:"absolute -top-1 left-1/2 -translate-x-1/2 w-2 h-2 bg-gray-100 rotate-45 transform"})]})]})})()})]})]})]});return s||m||u&&!e?i.jsx("div",{className:"min-h-screen w-full bg-gray-50 flex items-center justify-center",children:i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-[#2d4660] mx-auto mb-4"}),i.jsx("p",{className:"text-gray-600",children:"Signing you in..."})]})}):i.jsxs("div",{className:"container mx-auto p-4 max-w-6xl min-h-screen pb-8",children:[i.jsx("div",{className:"hidden md:flex md:justify-center mb-2",children:i.jsx("img",{src:ji,alt:"New Millennium Building Systems Logo",className:"-mt-4 cursor-pointer hover:opacity-80 transition-opacity",style:{height:"96px",width:"auto"},onClick:()=>a("/sessions")})}),i.jsxs("div",{className:"flex justify-between items-center mb-6",children:[i.jsxs("div",{className:"flex items-center",children:[i.jsx("img",{src:$a,alt:"New Millennium Building Systems Logo",className:"mr-4 md:hidden cursor-pointer hover:opacity-80 transition-opacity",style:{width:"40px",height:"40px",objectFit:"contain"},onClick:()=>a("/sessions")}),i.jsxs("div",{children:[i.jsx("h1",{className:"text-2xl font-bold text-[#2D4660] md:text-3xl",children:"My Voting Sessions"}),i.jsxs("p",{className:"text-sm text-gray-600",children:["Welcome, ",e==null?void 0:e.name,T&&i.jsxs("span",{className:"ml-2 inline-flex items-center px-2.5 py-1 rounded text-xs font-medium bg-[#C89212] text-white",children:[i.jsx(En,{className:"h-3.5 w-3.5 mr-1"}),"System Admin"]}),!T&&wr.length>0&&i.jsxs("span",{className:"ml-2 inline-flex items-center px-2.5 py-1 rounded text-xs font-medium bg-[#576C71] text-white",children:[i.jsx(Xr,{className:"h-3.5 w-3.5 mr-1"}),"Session Admin"]}),!T&&wr.length===0&&Xi.length>0&&i.jsxs("span",{className:"ml-2 inline-flex items-center px-2.5 py-1 rounded text-xs font-medium bg-[#8B5A4A] text-white",children:[i.jsx(ps,{className:"h-3.5 w-3.5 mr-1"}),"Stakeholder"]})]})]})]}),i.jsxs("div",{ref:F,className:"relative z-40 md:justify-end",children:[i.jsxs("div",{className:"hidden md:flex space-x-2",children:[T&&(Q==="admin"||Q==="system-admin")&&i.jsx(i.Fragment,{children:i.jsxs("button",{onClick:()=>a("/users"),className:"flex items-center px-4 py-2 bg-[#2D4660] text-white rounded-lg hover:bg-[#173B65] transition-colors",children:[i.jsx(Ln,{className:"h-4 w-4 mr-2"}),"User Management"]})}),(T||wr.length>0)&&(Q==="admin"||Q==="system-admin")&&i.jsx(i.Fragment,{children:i.jsxs("button",{onClick:()=>{Ft(),Zt(!1),Z(!0),ee(""),ie(!0)},className:"flex items-center px-4 py-2 bg-[#C89212] text-white rounded-lg hover:bg-[#6A4234] transition-colors",children:[i.jsx(vn,{className:"h-4 w-4 mr-2"}),i.jsx("span",{className:"hidden sm:inline",children:"Create Session"}),i.jsx("span",{className:"sm:hidden",children:"Create"})]})}),i.jsxs("button",{onClick:Ss,className:"flex items-center px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-colors",children:[i.jsx(ss,{className:"h-4 w-4 mr-2"}),i.jsx("span",{className:"hidden sm:inline",children:"Logout"})]})]}),i.jsx("div",{className:"flex md:hidden justify-end",children:i.jsx("button",{onClick:()=>le(!G),className:"p-2 rounded-md border border-gray-200 bg-white shadow-sm","aria-label":"Open menu",children:i.jsx(pi,{className:"h-5 w-5 text-gray-700"})})}),G&&i.jsx("div",{className:"absolute right-0 mt-2 w-56 bg-white border border-gray-200 rounded-lg shadow-lg md:hidden z-50",children:i.jsxs("div",{className:"py-1",children:[T&&(Q==="admin"||Q==="system-admin")&&i.jsx(i.Fragment,{children:i.jsxs("button",{onClick:()=>{le(!1),a("/users")},className:"w-full px-3 py-2 flex items-center text-left hover:bg-gray-50",children:[i.jsx(Ln,{className:"h-4 w-4 mr-2 text-gray-700"}),"User Management"]})}),(T||wr.length>0)&&(Q==="admin"||Q==="system-admin")&&i.jsx(i.Fragment,{children:i.jsxs("button",{onClick:()=>{Ft(),le(!1),Z(!0),ie(!0)},className:"w-full px-3 py-2 flex items-center text-left hover:bg-gray-50",children:[i.jsx(vn,{className:"h-4 w-4 mr-2 text-gray-700"}),"Create Session"]})}),i.jsxs("button",{onClick:()=>{le(!1),Ss()},className:"w-full px-3 py-2 flex items-center text-left hover:bg-gray-50",children:[i.jsx(ss,{className:"h-4 w-4 mr-2 text-gray-700"}),"Logout"]})]})})]})]}),x.length===0?i.jsxs("div",{className:"bg-white rounded-lg shadow-md p-12 text-center",children:[i.jsx(es,{className:"mx-auto h-12 w-12 text-gray-400 mb-4"}),i.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No voting sessions"}),i.jsx("p",{className:"text-sm text-gray-500 mb-6",children:"You are not part of any voting sessions yet."}),T&&i.jsxs("button",{onClick:()=>{Ft(),Z(!0),ie(!0)},className:"inline-flex items-center px-4 py-2 bg-[#2D4660] text-white rounded-lg hover:bg-[#173B65] transition-colors",children:[i.jsx(vn,{className:"h-5 w-5 mr-2"}),"Create Your First Session"]})]}):i.jsxs("div",{className:"space-y-8",children:[Q==="stakeholder"&&i.jsxs("div",{children:[i.jsxs("h2",{className:"text-xl font-semibold text-[#2D4660] mb-4 flex items-center",children:[i.jsx(es,{className:"h-5 w-5 mr-2"}),"All Your Voting Sessions"]}),(()=>{const P=_i.filter(ge=>{const be=Ar(ge,Y);return be&&be!=="No Product"&&be.trim()!==""}),D=_i.filter(ge=>{const be=Ar(ge,Y);return!be||be==="No Product"||be.trim()===""}),X=R(P,Y),ce=[],Re=[],Ae=[];return Object.entries(X).forEach(([ge,be])=>{be.length>=2?ce.push({key:ge,sessions:be}):be.length===1?Re.push({key:ge,sessions:be}):Ae.push(...be)}),i.jsxs("div",{className:"space-y-8",children:[ce.map(({key:ge,sessions:be})=>{var ct,zt;const mt=tt.has(ge),It=mt?be:be.slice(0,3),lt=be.length>3?be.length-3:0,Lt=Ar(be[0],Y),Ct=(ct=be[0])!=null&&ct.product_id?V[be[0].product_id]:void 0,De=Ur(Lt,Ct),St=(st,Rt)=>{const wt=st.replace("#",""),tr=parseInt(wt.substring(0,2),16),Yr=parseInt(wt.substring(2,4),16),gn=parseInt(wt.substring(4,6),16);return`rgba(${tr}, ${Yr}, ${gn}, ${Rt})`},Ge=De.background?St(De.background,.1):"#F9FAFB";return i.jsx("div",{className:"relative",style:{marginTop:"50px"},children:i.jsxs("div",{className:"rounded-lg rounded-tl-none border border-gray-200 relative overflow-visible",style:{backgroundColor:Ge,borderColor:De.border||"#E5E7EB",padding:"24px",marginTop:Q==="stakeholder"?"25px":void 0},children:[me(Lt,De,(zt=be[0])==null?void 0:zt.product_id,ge),lt>0&&i.jsx("div",{className:"absolute right-0 z-20 hidden md:block",style:{top:"0",transform:"translateY(calc(-100% - 3px))"},children:i.jsx("button",{onClick:()=>he(ge),className:"flex items-center gap-1 text-sm text-[#2D4660] hover:text-[#173B65] transition-colors cursor-pointer",children:mt?i.jsxs(i.Fragment,{children:["Show Less",i.jsx(rs,{className:"h-4 w-4 rotate-180"})]}):i.jsxs(i.Fragment,{children:["Show More (",lt,")",i.jsx(rs,{className:"h-4 w-4"})]})})}),Yn&&Q!=="stakeholder"&&i.jsx("div",{className:"absolute z-20 bottom-[-20px] left-1/2 -translate-x-1/2 md:bottom-auto md:left-auto md:translate-x-0 md:right-[-20px] md:top-1/2 md:-translate-y-1/2",children:i.jsx("button",{onClick:st=>{var gn;st.stopPropagation();const Rt=(gn=be[0])==null?void 0:gn.product_id,wt=Ar(be[0],Y);Rt&&ee(Rt),wt&&wt!=="No Product"&&Wt(wt);let tr=be.length>0?ar(be[0].end_date):new Date;be.forEach(Vs=>{const ks=ar(Vs.end_date);ks>tr&&(tr=ks)});const Yr=xr(tr,1);xr(Yr,14),Ft(),ee(Rt),Zt(!0),Z(!1),mr(!0),ie(!0)},onMouseEnter:()=>sr(ge),onMouseLeave:()=>sr(null),className:"flex items-center justify-center w-10 h-10 rounded-full shadow-md",style:{backgroundColor:De.background||"#C89212",color:De.text||"#FFFFFF"},title:`Create new session for ${Lt}`,children:i.jsx(vn,{className:"h-5 w-5"})})}),i.jsx("div",{className:"grid grid-cols-1 gap-6 sm:grid-cols-2 lg:grid-cols-3",children:It.map((st,Rt)=>{const wt=Ps(st),tr=wt.text==="Closed",Yr=wt.icon,gn=Gn(st),Vs=E[st.id],ks=Ar(st,Y),Rp=st.product_id?V[st.product_id]:void 0,Mp=Ur(ks,Rp);return i.jsx("div",{className:"relative z-10 bg-white overflow-visible shadow-md rounded-lg hover:shadow-lg transition-shadow cursor-pointer border",style:{borderColor:Mp.border,borderWidth:"1px",opacity:tr&&qr!==st.id?.75:1},onMouseEnter:()=>vr(st.id),onMouseLeave:()=>vr(null),onClick:()=>tn(st),children:i.jsxs("div",{className:"flex flex-col h-full",style:{padding:"15px"},children:[i.jsx("div",{className:"flex justify-end items-start mb-4",children:Vs?i.jsxs("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-xs font-medium bg-green-100 text-green-800",children:[i.jsx(kr,{className:"h-3 w-3 mr-1"}),"Voted"]}):wt.text==="Active"?i.jsxs("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:[i.jsx(or,{className:"h-3 w-3 mr-1"}),"Needs Your Vote"]}):null}),i.jsx("h3",{className:"text-lg font-semibold text-[#2D4660] mb-2",children:st.title}),i.jsx("p",{className:"text-sm text-gray-600 mb-4 line-clamp-2",children:st.goal}),i.jsx("div",{className:"flex-1"}),i.jsxs("div",{className:"space-y-2 text-sm text-gray-500",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center",children:[i.jsx(un,{className:"h-4 w-4 mr-2"}),i.jsxs("span",{children:[Fr(st.start_date)," - ",Fr(st.end_date)]})]}),i.jsxs("span",{className:`inline-flex items-center ${wt.text==="Active"?"px-3 py-1 text-sm":"px-2 py-0.5 text-xs"} rounded-full font-medium ${wt.color}`,children:[i.jsx(Yr,{className:`${wt.text==="Active"?"h-4 w-4":"h-3 w-3"} mr-1`}),wt.text]})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center",children:[i.jsx(pi,{className:"h-4 w-4 mr-2"}),i.jsxs("span",{children:[j[st.id]||0," ",j[st.id]===1?"feature":"features"," to vote on"]})]}),i.jsx("span",{className:"text-sm font-medium text-[#2D4660]",children:ks})]}),i.jsxs("div",{className:"flex items-center",children:[i.jsx(es,{className:"h-4 w-4 mr-2"}),i.jsx("span",{children:gn.displayText}),gn.isAuto&&i.jsxs("div",{className:"group relative ml-1",children:[i.jsx(dd,{className:"h-4 w-4 text-blue-500 cursor-help"}),i.jsxs("div",{className:"absolute bottom-full left-1/2 -translate-x-1/2 mb-2 px-3 py-2 bg-gray-900 text-white text-xs rounded-lg opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-200 whitespace-nowrap z-10 pointer-events-none",children:[gn.formula,i.jsx("div",{className:"absolute top-full left-1/2 -translate-x-1/2 -mt-1 border-4 border-transparent border-t-gray-900"})]})]})]})]}),i.jsx("div",{className:"mt-4 pt-4 border-t border-gray-200",children:i.jsxs("button",{onClick:Fp=>{Fp.stopPropagation(),tr||tn(st)},disabled:tr,className:`w-full flex items-center justify-center px-4 py-2 rounded-lg transition-colors font-medium ${tr?"bg-gray-100 text-gray-500 cursor-not-allowed":Vs?"bg-gray-100 text-gray-700 hover:bg-gray-200":"bg-[#2D4660] text-white hover:bg-[#173B65]"}`,style:tr?{cursor:"not-allowed"}:{},children:[i.jsx(es,{className:"h-4 w-4 mr-2"}),Vs?"View or Change Votes":"Cast Your Votes"]})})]})},st.id)})}),lt>0&&i.jsx("div",{className:"mt-4 md:hidden",children:i.jsx("button",{onClick:()=>he(ge),className:"w-full flex items-center justify-center gap-1 px-4 py-2 text-sm font-medium text-[#2D4660] bg-white hover:bg-gray-50 rounded-md border border-gray-300 transition-colors",children:mt?i.jsxs(i.Fragment,{children:["Show Less",i.jsx(rs,{className:"h-4 w-4 rotate-180"})]}):i.jsxs(i.Fragment,{children:["Show More (",lt,")",i.jsx(rs,{className:"h-4 w-4"})]})})})]})},ge)}),Re.length>0&&i.jsx("div",{className:"grid grid-cols-1 gap-6 sm:grid-cols-2 lg:grid-cols-3",style:{marginTop:Q==="stakeholder"?"30px":"50px"},children:Re.map(({key:ge,sessions:be})=>{var De,St;const mt=Ar(be[0],Y),It=(De=be[0])!=null&&De.product_id?V[be[0].product_id]:void 0,lt=Ur(mt,It),Lt=(Ge,ct)=>{const zt=Ge.replace("#",""),st=parseInt(zt.substring(0,2),16),Rt=parseInt(zt.substring(2,4),16),wt=parseInt(zt.substring(4,6),16);return`rgba(${st}, ${Rt}, ${wt}, ${ct})`},Ct=lt.background?Lt(lt.background,.1):"#F9FAFB";return i.jsx("div",{className:"relative",children:i.jsxs("div",{className:"rounded-lg rounded-tl-none border border-gray-200 relative overflow-visible",style:{backgroundColor:Ct,borderColor:lt.border||"#E5E7EB",padding:"24px",marginTop:Q==="stakeholder"?"25px":void 0},children:[me(mt,lt,(St=be[0])==null?void 0:St.product_id,ge),Yn&&Q!=="stakeholder"&&i.jsx("div",{className:"absolute z-20 bottom-[-20px] left-1/2 -translate-x-1/2 md:bottom-auto md:left-auto md:translate-x-0 md:right-[-20px] md:top-1/2 md:-translate-y-1/2",children:i.jsx("button",{onClick:Ge=>{var wt;Ge.stopPropagation();const ct=(wt=be[0])==null?void 0:wt.product_id,zt=Ar(be[0],Y);ct&&ee(ct),zt&&zt!=="No Product"&&Wt(zt);let st=ar(be[0].end_date);const Rt=xr(st,1);xr(Rt,14),Ft(),ee(ct),Zt(!0),Z(!1),mr(!0),ie(!0)},onMouseEnter:()=>sr(ge),onMouseLeave:()=>sr(null),className:"flex items-center justify-center w-10 h-10 rounded-full shadow-md",style:{backgroundColor:lt.background||"#C89212",color:lt.text||"#FFFFFF"},title:`Create new session for ${mt}`,children:i.jsx(vn,{className:"h-5 w-5"})})}),be.map(Ge=>{const ct=Ps(Ge),zt=ct.text==="Closed",st=ct.icon,Rt=Gn(Ge);E[Ge.id];const wt=Ar(Ge,Y),tr=Ge.product_id?V[Ge.product_id]:void 0,Yr=Ur(wt,tr);return i.jsx("div",{className:"relative z-10 bg-white overflow-visible shadow-md rounded-lg hover:shadow-lg transition-shadow cursor-pointer border",style:{borderColor:Yr.border,borderWidth:"1px",opacity:zt&&qr!==Ge.id?.75:1},onMouseEnter:()=>vr(Ge.id),onMouseLeave:()=>vr(null),onClick:()=>tn(Ge),children:ve(Ge,wt,Yr,ct,st,Rt,zt,!1,Ge.product_id)},Ge.id)})]})},ge)})}),(Ae.length>0||D.length>0)&&i.jsx("div",{className:"grid grid-cols-1 gap-0 sm:gap-6 sm:grid-cols-2 lg:grid-cols-3",children:[...Ae,...D].map(ge=>{const be=Ps(ge),mt=be.text==="Closed",It=be.icon,lt=Gn(ge),Lt=E[ge.id],Ct=Ar(ge,Y),De=ge.product_id?V[ge.product_id]:void 0,St=Ur(Ct,De),Ge=Ae.includes(ge);return i.jsxs("div",{className:"relative z-10 bg-white overflow-visible shadow-md rounded-lg rounded-tl-none hover:shadow-lg transition-shadow cursor-pointer mt-6 border",style:{borderColor:St.border,borderWidth:"1px",opacity:mt&&qr!==ge.id?.75:1},onMouseEnter:()=>vr(ge.id),onMouseLeave:()=>vr(null),onClick:()=>tn(ge),children:[me(Ct,St,ge.product_id),Ge&&Yn&&Q!=="stakeholder"&&i.jsx("div",{className:"absolute z-20 bottom-[-20px] left-1/2 -translate-x-1/2 md:bottom-auto md:left-auto md:translate-x-0 md:right-[-20px] md:top-1/2 md:-translate-y-1/2",children:i.jsx("button",{onClick:ct=>{ct.stopPropagation();const zt=ge.product_id,st=Ar(ge,Y);zt&&ee(zt),st&&st!=="No Product"&&Wt(st);const Rt=ar(ge.end_date),wt=xr(Rt,1);xr(wt,14),Ft(),ee(zt),Zt(!0),Z(!1),mr(!0),ie(!0)},className:"flex items-center justify-center w-10 h-10 rounded-full transition-colors shadow-md hover:shadow-lg",style:{backgroundColor:St.background||"#C89212",color:St.text||"#FFFFFF"},onMouseEnter:ct=>{const zt=St.background||"#C89212";ct.currentTarget.style.backgroundColor=zt,ct.currentTarget.style.filter="brightness(0.8)"},onMouseLeave:ct=>{ct.currentTarget.style.backgroundColor=St.background||"#C89212",ct.currentTarget.style.filter="brightness(1)"},title:`Create new session for ${Ct}`,children:i.jsx(vn,{className:"h-5 w-5"})})}),i.jsxs("div",{className:"flex flex-col h-full",style:{padding:"15px"},children:[i.jsx("div",{className:"flex justify-end items-start mb-4",children:Lt?i.jsxs("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-xs font-medium bg-green-100 text-green-800",children:[i.jsx(kr,{className:"h-3 w-3 mr-1"}),"Voted"]}):be.text==="Active"?i.jsxs("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:[i.jsx(or,{className:"h-3 w-3 mr-1"}),"Needs Your Vote"]}):null}),i.jsx("h3",{className:"text-lg font-semibold text-[#2D4660] mb-2",children:ge.title}),i.jsx("p",{className:"text-sm text-gray-600 mb-4 line-clamp-2",children:ge.goal}),i.jsx("div",{className:"flex-1"}),i.jsxs("div",{className:"space-y-2 text-sm text-gray-500",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center",children:[i.jsx(un,{className:"h-4 w-4 mr-2"}),i.jsxs("span",{children:[Fr(ge.start_date)," - ",Fr(ge.end_date)]})]}),i.jsxs("span",{className:`inline-flex items-center ${be.text==="Active"?"px-3 py-1 text-sm":"px-2 py-0.5 text-xs"} rounded-full font-medium ${be.color}`,children:[i.jsx(It,{className:`${be.text==="Active"?"h-4 w-4":"h-3 w-3"} mr-1`}),be.text]})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center",children:[i.jsx(pi,{className:"h-4 w-4 mr-2"}),i.jsxs("span",{children:[j[ge.id]||0," ",j[ge.id]===1?"feature":"features"," to vote on"]})]}),i.jsx("span",{className:"text-sm font-medium text-[#2D4660]",children:Ct})]}),i.jsxs("div",{className:"flex items-center",children:[i.jsx(es,{className:"h-4 w-4 mr-2"}),i.jsx("span",{children:lt.displayText}),lt.isAuto&&i.jsxs("div",{className:"group relative ml-1",children:[i.jsx(dd,{className:"h-4 w-4 text-blue-500 cursor-help"}),i.jsxs("div",{className:"absolute bottom-full left-1/2 -translate-x-1/2 mb-2 px-3 py-2 bg-gray-900 text-white text-xs rounded-lg opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-200 whitespace-nowrap z-10 pointer-events-none",children:[lt.formula,i.jsx("div",{className:"absolute top-full left-1/2 -translate-x-1/2 -mt-1 border-4 border-transparent border-t-gray-900"})]})]})]})]}),i.jsx("div",{className:"mt-4 pt-4 border-t border-gray-200",children:i.jsxs("button",{onClick:ct=>{ct.stopPropagation(),mt||tn(ge)},disabled:mt,className:`w-full flex items-center justify-center px-4 py-2 rounded-lg transition-colors font-medium ${mt?"bg-gray-100 text-gray-500 cursor-not-allowed":Lt?"bg-gray-100 text-gray-700 hover:bg-gray-200":"bg-[#2D4660] text-white hover:bg-[#173B65]"}`,style:mt?{cursor:"not-allowed"}:{},children:[i.jsx(es,{className:"h-4 w-4 mr-2"}),Lt?"View or Change Votes":"Cast Your Votes"]})})]})]},ge.id)})})]})})()]}),(Q==="admin"||Q==="system-admin")&&i.jsxs(i.Fragment,{children:[Q==="admin"&&k.length>0&&i.jsxs("div",{children:[i.jsxs("h2",{className:"text-xl font-semibold text-[#2D4660] mb-4 flex items-center",children:[i.jsx(es,{className:"h-5 w-5 mr-2"}),"Your Voting Sessions"]}),i.jsx("div",{className:"grid grid-cols-1 gap-6 sm:grid-cols-2 lg:grid-cols-3",children:k.map(P=>{const D=Ps(P),X=D.text==="Closed",ce=D.icon,Re=Gn(P),Ae=E[P.id],ge=Ar(P,Y),be=P.product_id?V[P.product_id]:void 0,mt=Ur(ge,be);return i.jsxs("div",{className:"relative z-10 bg-white overflow-visible shadow-md rounded-lg rounded-tl-none hover:shadow-lg transition-shadow cursor-pointer mt-6 border",style:{borderColor:mt.border,borderWidth:"1px",opacity:X&&qr!==P.id?.75:1},onMouseEnter:()=>vr(P.id),onMouseLeave:()=>vr(null),onClick:()=>tn(P),children:[i.jsxs("div",{className:"absolute left-0 px-4 py-1 rounded-t-md border-b-0 text-sm font-semibold shadow-sm z-20 flex items-center gap-2 whitespace-nowrap overflow-hidden",style:{top:"0",left:"-1px",transform:"translateY(-100%)",backgroundColor:mt.background,color:mt.text,borderColor:mt.border,borderWidth:"1px",borderBottomWidth:"0",boxShadow:"0 4px 8px rgba(16,24,40,0.06)",borderTopLeftRadius:"0.9rem",borderTopRightRadius:"0.9rem"},children:[i.jsx(Tx,{className:"h-4 w-4 flex-shrink-0"}),i.jsx("span",{className:"overflow-hidden text-ellipsis",children:ge})]}),i.jsxs("div",{className:"flex flex-col h-full",style:{padding:"15px"},children:[i.jsx("div",{className:"flex justify-end items-start mb-4",children:Ae?i.jsxs("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-xs font-medium bg-green-100 text-green-800",children:[i.jsx(kr,{className:"h-3 w-3 mr-1"}),"Voted"]}):D.text==="Active"?i.jsxs("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:[i.jsx(or,{className:"h-3 w-3 mr-1"}),"Needs Your Vote"]}):null}),i.jsx("h3",{className:"text-lg font-semibold text-[#2D4660] mb-2",children:P.title}),i.jsx("p",{className:"text-sm text-gray-600 mb-4 line-clamp-2",children:P.goal}),i.jsx("div",{className:"flex-1"}),i.jsxs("div",{className:"space-y-2 text-sm text-gray-500",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center",children:[i.jsx(un,{className:"h-4 w-4 mr-2"}),i.jsxs("span",{children:[Fr(P.start_date)," - ",Fr(P.end_date)]})]}),i.jsxs("span",{className:`inline-flex items-center ${D.text==="Active"?"px-3 py-1 text-sm":"px-2 py-0.5 text-xs"} rounded-full font-medium ${D.color}`,children:[i.jsx(ce,{className:`${D.text==="Active"?"h-4 w-4":"h-3 w-3"} mr-1`}),D.text]})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center",children:[i.jsx(pi,{className:"h-4 w-4 mr-2"}),i.jsxs("span",{children:[j[P.id]||0," ",j[P.id]===1?"feature":"features"," to vote on"]})]}),i.jsx("span",{className:"text-sm font-medium text-[#2D4660]",children:ge})]}),i.jsxs("div",{className:"flex items-center",children:[i.jsx(es,{className:"h-4 w-4 mr-2"}),i.jsx("span",{children:Re.displayText}),Re.isAuto&&i.jsxs("div",{className:"group relative ml-1",children:[i.jsx(dd,{className:"h-4 w-4 text-blue-500 cursor-help"}),i.jsxs("div",{className:"absolute bottom-full left-1/2 -translate-x-1/2 mb-2 px-3 py-2 bg-gray-900 text-white text-xs rounded-lg opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-200 whitespace-nowrap z-10 pointer-events-none",children:[Re.formula,i.jsx("div",{className:"absolute top-full left-1/2 -translate-x-1/2 -mt-1 border-4 border-transparent border-t-gray-900"})]})]})]})]}),i.jsx("div",{className:"mt-4 pt-4 border-t border-gray-200",children:i.jsxs("button",{onClick:It=>{It.stopPropagation(),X||tn(P)},disabled:X,className:`w-full flex items-center justify-center px-4 py-2 rounded-lg transition-colors font-medium ${X?"bg-gray-100 text-gray-500 cursor-not-allowed":Ae?"bg-gray-100 text-gray-700 hover:bg-gray-200":"bg-[#2D4660] text-white hover:bg-[#173B65]"}`,style:X?{cursor:"not-allowed"}:{},children:[i.jsx(es,{className:"h-4 w-4 mr-2"}),Ae?"View or Change Votes":"Cast Your Votes"]})})]})]},P.id)})})]}),L.length>0&&i.jsxs("div",{children:[i.jsxs("div",{className:"flex flex-col gap-3 sm:flex-row sm:items-center sm:justify-between mb-4",children:[i.jsxs("h2",{className:"text-xl font-semibold text-[#2D4660] flex items-center",children:[i.jsx(ns,{className:"h-5 w-5 mr-2"}),Ni?"All Sessions (System Admin)":"Sessions You Manage"]}),Ni&&i.jsxs("p",{className:"text-sm text-gray-600",children:["Showing ",L.length," total sessions across the organization."]})]}),(()=>{const P=L.filter(ge=>{const be=Ar(ge,Y);return be&&be!=="No Product"&&be.trim()!==""}),D=L.filter(ge=>{const be=Ar(ge,Y);return!be||be==="No Product"||be.trim()===""}),X=R(P,Y),ce=[],Re=[],Ae=[];return Object.entries(X).forEach(([ge,be])=>{be.length>=2?ce.push({key:ge,sessions:be}):be.length===1?Re.push({key:ge,sessions:be}):Ae.push(...be)}),i.jsxs("div",{className:"space-y-8",children:[ce.map(({key:ge,sessions:be})=>{var ct,zt;const mt=tt.has(ge),It=mt?be:be.slice(0,3),lt=be.length>3?be.length-3:0,Lt=Ar(be[0],Y),Ct=(ct=be[0])!=null&&ct.product_id?V[be[0].product_id]:void 0,De=Ur(Lt,Ct),St=(st,Rt)=>{const wt=st.replace("#",""),tr=parseInt(wt.substring(0,2),16),Yr=parseInt(wt.substring(2,4),16),gn=parseInt(wt.substring(4,6),16);return`rgba(${tr}, ${Yr}, ${gn}, ${Rt})`},Ge=De.background?St(De.background,.1):"#F9FAFB";return i.jsx("div",{className:"relative",style:{marginTop:"50px"},children:i.jsxs("div",{className:"rounded-lg rounded-tl-none border border-gray-200 relative overflow-visible",style:{backgroundColor:Ge,borderColor:De.border||"#E5E7EB",padding:"24px"},children:[me(Lt,De,(zt=be[0])==null?void 0:zt.product_id,ge),lt>0&&i.jsx("div",{className:"absolute right-0 z-20 hidden md:block",style:{top:"0",transform:"translateY(calc(-100% - 3px))"},children:i.jsx("button",{onClick:()=>he(ge),className:"flex items-center gap-1 text-sm text-[#2D4660] hover:text-[#173B65] transition-colors cursor-pointer",children:mt?i.jsxs(i.Fragment,{children:["Show Less",i.jsx(rs,{className:"h-4 w-4 rotate-180"})]}):i.jsxs(i.Fragment,{children:["Show More (",lt,")",i.jsx(rs,{className:"h-4 w-4"})]})})}),(T||Q==="admin"||Q==="system-admin")&&i.jsx("div",{className:"absolute z-20 bottom-[-20px] left-1/2 -translate-x-1/2 md:bottom-auto md:left-auto md:translate-x-0 md:right-[-20px] md:top-1/2 md:-translate-y-1/2",children:i.jsx("button",{onClick:st=>{var gn;st.stopPropagation();const Rt=(gn=be[0])==null?void 0:gn.product_id,wt=Ar(be[0],Y);Rt&&ee(Rt),wt&&wt!=="No Product"&&Wt(wt);let tr=be.length>0?ar(be[0].end_date):new Date;be.forEach(Vs=>{const ks=ar(Vs.end_date);ks>tr&&(tr=ks)});const Yr=xr(tr,1);xr(Yr,14),Ft(),ee(Rt),Zt(!0),Z(!1),mr(!0),ie(!0)},onMouseEnter:()=>sr(ge),onMouseLeave:()=>sr(null),className:"flex items-center justify-center w-10 h-10 rounded-full shadow-md",style:{backgroundColor:De.background||"#C89212",color:De.text||"#FFFFFF"},title:`Create new session for ${Lt}`,children:i.jsx(vn,{className:"h-5 w-5"})})}),i.jsxs("div",{className:"grid grid-cols-1 gap-6 sm:grid-cols-2 lg:grid-cols-3",children:[It.map(st=>{const Rt=Ps(st),wt=Rt.icon,tr=Gn(st),Yr=Rt.text==="Closed",gn=Ar(st,Y),Vs=st.product_id?V[st.product_id]:void 0,ks=Ur(gn,Vs);return i.jsx("div",{className:"relative z-10 bg-white overflow-visible shadow-md rounded-lg hover:shadow-lg transition-shadow cursor-pointer border",style:{borderColor:ks.border,borderWidth:"1px",opacity:Yr&&qr!==st.id?.75:1},onMouseEnter:()=>vr(st.id),onMouseLeave:()=>vr(null),onClick:()=>tn(st),children:ve(st,gn,ks,Rt,wt,tr,Yr,!1,st.product_id)},st.id)}),be.length===2&&i.jsxs(i.Fragment,{children:[i.jsx("style",{children:`
                                        @keyframes growFromCenter {
                                          from {
                                            opacity: 0;
                                            transform: scale(0.3);
                                          }
                                          to {
                                            opacity: 1;
                                            transform: scale(1);
                                          }
                                        }
                                        @keyframes sparkle {
                                          0%, 100% {
                                            opacity: 0.1;
                                            transform: scale(0.7) rotate(0deg);
                                          }
                                          50% {
                                            opacity: 0.25;
                                            transform: scale(1.3) rotate(180deg);
                                          }
                                        }
                                        @keyframes sparkleSlow {
                                          0%, 100% {
                                            opacity: 0.08;
                                            transform: scale(0.6);
                                          }
                                          50% {
                                            opacity: 0.2;
                                            transform: scale(1.4);
                                          }
                                        }
                                        @keyframes starTwinkle {
                                          0%, 100% {
                                            opacity: 0.12;
                                            transform: scale(0.8) rotate(0deg);
                                          }
                                          25% {
                                            opacity: 0.22;
                                            transform: scale(1.1) rotate(90deg);
                                          }
                                          50% {
                                            opacity: 0.18;
                                            transform: scale(1.3) rotate(180deg);
                                          }
                                          75% {
                                            opacity: 0.22;
                                            transform: scale(1.1) rotate(270deg);
                                          }
                                        }
                                      `}),i.jsx("div",{className:"hidden lg:block relative z-10 overflow-hidden shadow-md rounded-lg mt-6 border cursor-pointer transition-all",style:{borderColor:De.border||"#E5E7EB",borderWidth:"1px",backgroundColor:"rgba(255, 255, 255, 0.7)"},onMouseEnter:()=>qn(ge),onMouseLeave:()=>qn(null),onClick:st=>{var gn;st.stopPropagation();const Rt=(gn=be[0])==null?void 0:gn.product_id,wt=Ar(be[0],Y);Rt&&ee(Rt),wt&&wt!=="No Product"&&Wt(wt);let tr=be.length>0?ar(be[0].end_date):new Date;be.forEach(Vs=>{const ks=ar(Vs.end_date);ks>tr&&(tr=ks)});const Yr=xr(tr,1);xr(Yr,14),Ft(),ee(Rt),Zt(!0),Z(!1),mr(!0),ie(!0)},children:i.jsxs("div",{className:"flex flex-col h-full items-center justify-center relative rounded-lg transition-all duration-300",style:{padding:"15px",backgroundColor:"transparent",backgroundImage:Qt===ge||ir===ge?`radial-gradient(circle at center, ${De.badgeBackground||"rgba(200, 146, 18, 0.15)"}, transparent 70%)`:"none"},children:[(Qt===ge||ir===ge)&&i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"absolute top-3 left-3 w-1.5 h-1.5 rounded-full",style:{backgroundColor:De.background||"#C89212",animation:"sparkle 1.8s ease-in-out infinite",animationDelay:"0ms",opacity:.12}}),i.jsx("div",{className:"absolute top-5 left-8 w-1 h-1 rounded-full",style:{backgroundColor:De.background||"#C89212",animation:"sparkleSlow 2.5s ease-in-out infinite",animationDelay:"200ms",opacity:.1}}),i.jsx("div",{className:"absolute top-8 left-5 w-2 h-2 rounded-full",style:{backgroundColor:De.background||"#C89212",animation:"sparkle 2.2s ease-in-out infinite",animationDelay:"400ms",opacity:.15}}),i.jsx("div",{className:"absolute top-4 right-6 w-1 h-1 rounded-full",style:{backgroundColor:De.background||"#C89212",animation:"sparkleSlow 2.8s ease-in-out infinite",animationDelay:"600ms",opacity:.1}}),i.jsx("div",{className:"absolute top-7 right-4 w-1.5 h-1.5 rounded-full",style:{backgroundColor:De.background||"#C89212",animation:"sparkle 2s ease-in-out infinite",animationDelay:"800ms",opacity:.12}}),i.jsx("div",{className:"absolute top-10 right-9 w-1 h-1 rounded-full",style:{backgroundColor:De.background||"#C89212",animation:"sparkleSlow 2.3s ease-in-out infinite",animationDelay:"1000ms",opacity:.1}}),i.jsx("div",{className:"absolute bottom-5 left-4 w-2 h-2 rounded-full",style:{backgroundColor:De.background||"#C89212",animation:"sparkle 2.1s ease-in-out infinite",animationDelay:"1200ms",opacity:.15}}),i.jsx("div",{className:"absolute bottom-7 left-9 w-1 h-1 rounded-full",style:{backgroundColor:De.background||"#C89212",animation:"sparkleSlow 2.6s ease-in-out infinite",animationDelay:"1400ms",opacity:.1}}),i.jsx("div",{className:"absolute bottom-4 left-12 w-1.5 h-1.5 rounded-full",style:{backgroundColor:De.background||"#C89212",animation:"sparkle 1.9s ease-in-out infinite",animationDelay:"1600ms",opacity:.12}}),i.jsx("div",{className:"absolute bottom-8 right-5 w-1 h-1 rounded-full",style:{backgroundColor:De.background||"#C89212",animation:"sparkleSlow 2.4s ease-in-out infinite",animationDelay:"1800ms",opacity:.1}}),i.jsx("div",{className:"absolute bottom-6 right-10 w-1.5 h-1.5 rounded-full",style:{backgroundColor:De.background||"#C89212",animation:"sparkle 2.2s ease-in-out infinite",animationDelay:"2000ms",opacity:.12}}),i.jsx("div",{className:"absolute bottom-3 right-7 w-1 h-1 rounded-full",style:{backgroundColor:De.background||"#C89212",animation:"sparkleSlow 2.7s ease-in-out infinite",animationDelay:"2200ms",opacity:.1}}),i.jsx(Ic,{className:"absolute top-6 left-12",size:8,style:{color:De.background||"#C89212",animation:"starTwinkle 3s ease-in-out infinite",animationDelay:"300ms",opacity:.15}}),i.jsx(Ic,{className:"absolute top-9 right-12",size:6,style:{color:De.background||"#C89212",animation:"starTwinkle 3.5s ease-in-out infinite",animationDelay:"700ms",opacity:.12}}),i.jsx(Ic,{className:"absolute bottom-9 left-6",size:7,style:{color:De.background||"#C89212",animation:"starTwinkle 2.8s ease-in-out infinite",animationDelay:"1100ms",opacity:.13}}),i.jsx(Ic,{className:"absolute bottom-5 right-12",size:5,style:{color:De.background||"#C89212",animation:"starTwinkle 3.2s ease-in-out infinite",animationDelay:"1500ms",opacity:.1}}),i.jsx(Ic,{className:"absolute top-12 left-1/2 -translate-x-1/2",size:6,style:{color:De.background||"#C89212",animation:"starTwinkle 2.9s ease-in-out infinite",animationDelay:"500ms",opacity:.12}}),i.jsx(Ic,{className:"absolute bottom-12 left-1/2 -translate-x-1/2",size:7,style:{color:De.background||"#C89212",animation:"starTwinkle 3.3s ease-in-out infinite",animationDelay:"1300ms",opacity:.13}}),i.jsx(Oc,{className:"absolute top-2 left-6",size:6,style:{color:De.background||"#C89212",animation:"sparkle 2.1s ease-in-out infinite",animationDelay:"250ms",opacity:.12}}),i.jsx(Oc,{className:"absolute top-11 right-6",size:5,style:{color:De.background||"#C89212",animation:"sparkleSlow 2.7s ease-in-out infinite",animationDelay:"750ms",opacity:.1}}),i.jsx(Oc,{className:"absolute bottom-10 left-10",size:7,style:{color:De.background||"#C89212",animation:"sparkle 2.4s ease-in-out infinite",animationDelay:"1150ms",opacity:.13}}),i.jsx(Oc,{className:"absolute bottom-2 right-8",size:6,style:{color:De.background||"#C89212",animation:"sparkleSlow 2.9s ease-in-out infinite",animationDelay:"1550ms",opacity:.11}}),i.jsx(Oc,{className:"absolute top-1/2 left-2",size:5,style:{color:De.background||"#C89212",animation:"sparkle 2.6s ease-in-out infinite",animationDelay:"450ms",opacity:.1}}),i.jsx(Oc,{className:"absolute top-1/2 right-2",size:6,style:{color:De.background||"#C89212",animation:"sparkleSlow 2.8s ease-in-out infinite",animationDelay:"950ms",opacity:.12}}),i.jsx("div",{className:"absolute top-1/4 left-1/4 w-1 h-1 rounded-full",style:{backgroundColor:De.background||"#C89212",animation:"sparkleSlow 2.2s ease-in-out infinite",animationDelay:"300ms",opacity:.1}}),i.jsx("div",{className:"absolute top-1/3 right-1/4 w-1.5 h-1.5 rounded-full",style:{backgroundColor:De.background||"#C89212",animation:"sparkle 2.3s ease-in-out infinite",animationDelay:"900ms",opacity:.12}}),i.jsx("div",{className:"absolute bottom-1/4 left-1/3 w-1 h-1 rounded-full",style:{backgroundColor:De.background||"#C89212",animation:"sparkleSlow 2.5s ease-in-out infinite",animationDelay:"1500ms",opacity:.1}}),i.jsx("div",{className:"absolute bottom-1/3 right-1/3 w-1.5 h-1.5 rounded-full",style:{backgroundColor:De.background||"#C89212",animation:"sparkle 2.1s ease-in-out infinite",animationDelay:"600ms",opacity:.12}})]}),i.jsxs("div",{className:"flex flex-col items-center justify-center gap-2 z-10",style:{opacity:Qt===ge||ir===ge?1:0,transformOrigin:"center center",animation:Qt===ge||ir===ge?"growFromCenter 0.3s ease-out forwards":"none"},children:[i.jsx(vn,{className:"h-8 w-8",style:{color:De.background||"#C89212"}}),i.jsxs("div",{className:"flex flex-col items-center justify-center text-base font-semibold",style:{color:De.background||"#C89212"},children:[i.jsx("span",{children:"Create"}),i.jsx("span",{children:"New Session"})]})]})]})})]})]}),lt>0&&i.jsx("div",{className:"mt-4 md:hidden",children:i.jsx("button",{onClick:()=>he(ge),className:"w-full flex items-center justify-center gap-1 px-4 py-2 text-sm font-medium text-[#2D4660] bg-white hover:bg-gray-50 rounded-md border border-gray-300 transition-colors",children:mt?i.jsxs(i.Fragment,{children:["Show Less",i.jsx(rs,{className:"h-4 w-4 rotate-180"})]}):i.jsxs(i.Fragment,{children:["Show More (",lt,")",i.jsx(rs,{className:"h-4 w-4"})]})})})]})},ge)}),Re.length>0&&i.jsx("div",{className:"grid grid-cols-1 gap-6 sm:grid-cols-2 lg:grid-cols-3",style:{marginTop:"50px"},children:Re.map(({key:ge,sessions:be})=>{var De,St;const mt=Ar(be[0],Y),It=(De=be[0])!=null&&De.product_id?V[be[0].product_id]:void 0,lt=Ur(mt,It),Lt=(Ge,ct)=>{const zt=Ge.replace("#",""),st=parseInt(zt.substring(0,2),16),Rt=parseInt(zt.substring(2,4),16),wt=parseInt(zt.substring(4,6),16);return`rgba(${st}, ${Rt}, ${wt}, ${ct})`},Ct=lt.background?Lt(lt.background,.1):"#F9FAFB";return i.jsx("div",{className:"relative",children:i.jsxs("div",{className:"rounded-lg rounded-tl-none border border-gray-200 relative overflow-visible",style:{backgroundColor:Ct,borderColor:lt.border||"#E5E7EB",padding:"24px"},children:[me(mt,lt,(St=be[0])==null?void 0:St.product_id,ge),(T||Q==="admin"||Q==="system-admin")&&i.jsx("div",{className:"absolute z-20 bottom-[-20px] left-1/2 -translate-x-1/2 md:bottom-auto md:left-auto md:translate-x-0 md:right-[-20px] md:top-1/2 md:-translate-y-1/2",children:i.jsx("button",{onClick:Ge=>{var wt;Ge.stopPropagation();const ct=(wt=be[0])==null?void 0:wt.product_id,zt=Ar(be[0],Y);ct&&ee(ct),zt&&zt!=="No Product"&&Wt(zt);let st=ar(be[0].end_date);const Rt=xr(st,1);xr(Rt,14),Ft(),ee(ct),Zt(!0),Z(!1),mr(!0),ie(!0)},onMouseEnter:()=>sr(ge),onMouseLeave:()=>sr(null),className:"flex items-center justify-center w-10 h-10 rounded-full shadow-md",style:{backgroundColor:lt.background||"#C89212",color:lt.text||"#FFFFFF"},title:`Create new session for ${mt}`,children:i.jsx(vn,{className:"h-5 w-5"})})}),be.map(Ge=>{const ct=Ps(Ge),zt=ct.text==="Closed",st=ct.icon,Rt=Gn(Ge);E[Ge.id];const wt=Ar(Ge,Y),tr=Ge.product_id?V[Ge.product_id]:void 0,Yr=Ur(wt,tr);return i.jsx("div",{className:"relative z-10 bg-white overflow-visible shadow-md rounded-lg hover:shadow-lg transition-shadow cursor-pointer border",style:{borderColor:Yr.border,borderWidth:"1px",opacity:zt&&qr!==Ge.id?.75:1},onMouseEnter:()=>vr(Ge.id),onMouseLeave:()=>vr(null),onClick:()=>tn(Ge),children:ve(Ge,wt,Yr,ct,st,Rt,zt,!1,Ge.product_id)},Ge.id)})]})},ge)})}),(Ae.length>0||D.length>0)&&i.jsxs("div",{className:"grid grid-cols-1 gap-6 sm:grid-cols-2 lg:grid-cols-3",children:[[...Ae,...D].map(ge=>{const be=Ps(ge),mt=be.icon,It=Gn(ge),lt=be.text==="Closed",Lt=Ar(ge,Y),Ct=ge.product_id?V[ge.product_id]:void 0,De=Ur(Lt,Ct),St=Ae.includes(ge);return i.jsxs("div",{className:"relative z-10 bg-white overflow-visible shadow-md rounded-lg rounded-tl-none hover:shadow-lg transition-shadow cursor-pointer border",style:{borderColor:De.border,borderWidth:"1px",opacity:lt&&qr!==ge.id?.75:1},onMouseEnter:()=>vr(ge.id),onMouseLeave:()=>vr(null),onClick:()=>tn(ge),children:[St&&(T||Q==="admin"||Q==="system-admin")&&i.jsx("div",{className:"absolute z-20 bottom-[-20px] left-1/2 -translate-x-1/2 md:bottom-auto md:left-auto md:translate-x-0 md:right-[-20px] md:top-1/2 md:-translate-y-1/2",children:i.jsx("button",{onClick:Ge=>{Ge.stopPropagation();const ct=ge.product_id,zt=Ar(ge,Y);ct&&ee(ct),zt&&zt!=="No Product"&&Wt(zt);const st=ar(ge.end_date),Rt=xr(st,1);xr(Rt,14),Ft(),ee(ct),Zt(!0),Z(!1),mr(!0),ie(!0)},className:"flex items-center justify-center w-10 h-10 rounded-full transition-colors shadow-md hover:shadow-lg",style:{backgroundColor:De.background||"#C89212",color:De.text||"#FFFFFF"},onMouseEnter:Ge=>{const ct=De.background||"#C89212";Ge.currentTarget.style.backgroundColor=ct,Ge.currentTarget.style.filter="brightness(0.8)"},onMouseLeave:Ge=>{Ge.currentTarget.style.backgroundColor=De.background||"#C89212",Ge.currentTarget.style.filter="brightness(1)"},title:`Create new session for ${Lt}`,children:i.jsx(vn,{className:"h-5 w-5"})})}),ve(ge,Lt,De,be,mt,It,lt,!0,ge.product_id)]},ge.id)}),L.length===2&&Ae.length+D.length>0&&i.jsx("div",{className:"hidden lg:block relative z-10 bg-white overflow-visible shadow-md rounded-lg hover:shadow-lg transition-shadow border border-gray-200",children:i.jsx("div",{className:"flex flex-col h-full items-end justify-center",style:{padding:"15px"},children:i.jsxs("button",{onClick:()=>{Z(!0),ie(!0)},className:"flex items-center px-6 py-3 bg-[#C89212] text-white rounded-lg hover:bg-[#6A4234] transition-colors font-semibold",children:[i.jsx(vn,{className:"h-5 w-5 mr-2"}),"Create Session"]})})})]})]})})()]})]})]}),i.jsx(bn,{isOpen:re,onClose:pn,title:"Create Voting Session",maxWidth:"max-w-3xl",children:i.jsxs("form",{onSubmit:js,className:"space-y-6",children:[i.jsxs("div",{className:"space-y-1",children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Product *"}),!dt&&!He?Mr&&de?i.jsx("div",{className:"flex items-center gap-3 px-4 py-2 border border-gray-300 rounded-md bg-gray-50",children:(()=>{const P=z.find(Re=>Re.id===de),D=(P==null?void 0:P.name)||Y[de]||"Unknown Product",X=(P==null?void 0:P.color_hex)||V[de],ce=Ur(D,X);return i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"w-6 h-6 rounded-md border flex-shrink-0",style:{backgroundColor:ce.background||"#2D4660",borderColor:ce.border||"#2D4660"}}),i.jsx("span",{className:"font-medium text-gray-900 flex-1",children:D})]})})()}):i.jsx("div",{className:"space-y-3",style:{marginTop:0},children:i.jsxs("div",{className:"flex flex-col gap-3 sm:flex-row sm:items-end",style:{marginTop:0},children:[i.jsx("div",{className:"flex-1 w-full",children:i.jsx(PZ,{label:"",products:z,value:de,onChange:async P=>{if(ee(P),P){Oe("");try{const D=x.filter(X=>X.product_id===P);if(D.length>0){let X=ar(D[0].end_date);D.forEach(Ae=>{const ge=ar(Ae.end_date);ge>X&&(X=ge)});const ce=xr(X,1),Re=xr(ce,14);ye(Ae=>({...Ae,startDate:en(ce),endDate:en(Re)}))}else{const X=new Date,ce=xr(X,14);ye(Re=>({...Re,startDate:en(X),endDate:en(ce)}))}}catch(D){console.error("Error calculating dates for selected product:",D);const X=new Date,ce=xr(X,14);ye(Re=>({...Re,startDate:en(X),endDate:en(ce)}))}}Le.product&&je(D=>{const X={...D};return delete X.product,X})},isLoading:q,error:Ce,disabled:q||z.length===0||lr,placeholder:"Select a product",helperText:!q&&z.length===0&&!Ce&&M?"No products found yet. Enter a product name below to create one.":void 0,allowDelete:M,onRequestDeleteProduct:M?(P=>{ot(P)}):void 0,className:"w-full"})}),M&&i.jsxs("div",{className:"flex items-center gap-2 sm:flex-none",children:[i.jsx("span",{className:"text-gray-500 font-medium px-2",children:"or"}),i.jsxs("button",{type:"button",onClick:()=>Mt(!0),disabled:q,className:"px-4 py-2 bg-[#1E5461] text-white rounded-md hover:bg-[#576C71] transition-colors font-medium whitespace-nowrap disabled:opacity-50 disabled:cursor-not-allowed",children:[i.jsx(vn,{className:"h-4 w-4 inline mr-2"}),"Create New Product"]})]})]})}):He?i.jsxs("div",{className:"flex items-center gap-3 px-4 py-2 border border-gray-300 rounded-md cursor-pointer hover:border-[#2D4660] transition-colors animate-in fade-in duration-300",onClick:()=>{Ze(null),Oe(He.name),Nt(He.color),Mt(!0),bt(!0),Be(!1)},children:[i.jsx("div",{className:"w-6 h-6 rounded-md border flex-shrink-0",style:{backgroundColor:He.color||"#2D4660",borderColor:He.color||"#2D4660"}}),i.jsx("span",{className:"font-medium text-gray-900 flex-1",children:He.name}),i.jsx("span",{className:"text-xs text-gray-500",children:"Click to edit"})]}):M&&dt?i.jsx("div",{className:"space-y-3",children:i.jsxs("div",{className:"flex gap-3 items-center",children:[i.jsxs("div",{className:"flex-1",style:{animation:"dramaticSlideIn 1.2s cubic-bezier(0.34, 1.56, 0.64, 1) forwards"},children:[i.jsx("style",{children:`
                      @keyframes dramaticSlideIn {
                        from {
                          opacity: 0;
                          transform: translateX(150px) scale(0.9);
                        }
                        to {
                          opacity: 1;
                          transform: translateX(0) scale(1);
                        }
                      }
                    `}),i.jsx("input",{type:"text",value:Ye,onChange:P=>{Oe(P.target.value),P.target.value.trim()&&!qe&&setTimeout(()=>bt(!0),200),Ce&&Te(null)},placeholder:"Enter product name...",autoFocus:!0,className:"w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-0 focus:border-[#2D4660]"})]}),qe&&i.jsxs("div",{className:"flex items-center gap-2 overflow-hidden",style:{animation:"slideInFromRight 1s ease-out forwards"},children:[i.jsx("style",{children:`
                        @keyframes slideInFromRight {
                          from {
                            opacity: 0;
                            transform: translateX(100px);
                          }
                          to {
                            opacity: 1;
                            transform: translateX(0);
                          }
                        }
                      `}),i.jsx("label",{className:"text-sm font-medium text-gray-700 whitespace-nowrap",children:"Product Color"}),i.jsx("button",{type:"button",onClick:()=>{dr(rt||"#2D4660"),nt(!0),setTimeout(()=>{var P;(P=document.getElementById("native-color-input"))==null||P.click()},100)},className:"block w-10 h-10 rounded-md border-2 border-gray-300 hover:border-gray-400 transition-all flex items-center justify-center overflow-hidden",style:rt?{backgroundColor:rt}:{backgroundColor:"#ffffff"},children:!rt&&i.jsx("img",{src:XI,alt:"Color Picker",className:"w-8 h-8 object-contain"})})]})]})}):null,Le.product&&i.jsxs("p",{className:"text-sm text-red-600 flex items-center",children:[i.jsx(or,{className:"h-4 w-4 mr-1"}),Le.product]}),Ce&&(dt||!!He)&&i.jsxs("p",{className:"text-sm text-red-600 flex items-center",children:[i.jsx(or,{className:"h-4 w-4 mr-1"}),Ce]})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Session Title *"}),i.jsx("input",{ref:Pr,type:"text",name:"title",value:fe.title,onChange:si,placeholder:"e.g., Q3 Product Priorities, Sprint 5, Sprint 5: Mobile Updates",className:`w-full px-4 py-2 border rounded-md focus:outline-none focus:ring-0 focus:border-[#2d4660] ${Le.title?"border-red-500":"border-gray-300"}`}),Le.title&&i.jsxs("p",{className:"mt-1 text-sm text-red-600 flex items-center",children:[i.jsx(or,{className:"h-4 w-4 mr-1"}),Le.title]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Session Goal *"}),i.jsx("textarea",{name:"goal",value:fe.goal,onChange:si,rows:2,placeholder:"Describe the purpose of this voting session...",className:`w-full px-4 py-2 border rounded-md focus:outline-none focus:ring-0 focus:border-[#2d4660] ${Le.goal?"border-red-500":"border-gray-300"}`}),Le.goal&&i.jsxs("p",{className:"mt-1 text-sm text-red-600 flex items-center",children:[i.jsx(or,{className:"h-4 w-4 mr-1"}),Le.goal]})]})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Votes Per User *"}),i.jsxs("div",{className:"flex items-center mb-3",children:[i.jsx("button",{type:"button",onClick:()=>ye(P=>({...P,useAutoVotes:!P.useAutoVotes})),className:"flex-shrink-0 cursor-pointer w-5 h-5 flex items-center justify-center",children:fe.useAutoVotes?i.jsx(Yc,{className:"w-5 h-5 text-green-600"}):i.jsx(Ed,{className:"w-5 h-5 text-gray-400"})}),i.jsxs("label",{onClick:()=>ye(P=>({...P,useAutoVotes:!P.useAutoVotes})),className:"ml-2 text-sm text-gray-700 cursor-pointer",children:["Auto-calculate votes",i.jsx("br",{}),"(half of feature count, minimum 1)"]})]}),!fe.useAutoVotes&&i.jsxs(i.Fragment,{children:[i.jsx("input",{type:"number",name:"votesPerUser",value:fe.votesPerUser,onChange:si,min:"1",max:"100",className:`w-full px-4 py-2 border rounded-md focus:outline-none focus:ring-0 focus:border-[#2d4660] ${Le.votesPerUser?"border-red-500":"border-gray-300"}`}),Le.votesPerUser&&i.jsxs("p",{className:"mt-1 text-sm text-red-600 flex items-center",children:[i.jsx(or,{className:"h-4 w-4 mr-1"}),Le.votesPerUser]})]}),i.jsx("p",{className:"mt-2 text-xs text-gray-500",children:fe.useAutoVotes?"Votes will automatically be set to half the number of features (minimum 1).":"Each stakeholder receives this many votes."})]}),i.jsxs("div",{children:[i.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Start Date *"}),i.jsx("input",{type:"date",name:"startDate",value:fe.startDate||"",onChange:si,onFocus:P=>{fe.startDate||hn("startDate")},autoComplete:"off",className:`w-full px-4 py-2 border rounded-md focus:outline-none focus:ring-0 focus:border-[#2d4660] [&::-webkit-calendar-picker-indicator]:cursor-pointer ${Le.startDate?"border-red-500":"border-gray-300"}`,style:fe.startDate?{}:{color:"transparent"},onBlur:P=>{P.target.value?P.target.style.color="":P.target.style.color="transparent"}}),Le.startDate&&i.jsxs("p",{className:"mt-1 text-sm text-red-600 flex items-center",children:[i.jsx(or,{className:"h-4 w-4 mr-1"}),Le.startDate]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"End Date *"}),i.jsx("input",{type:"date",name:"endDate",value:fe.endDate||"",onChange:si,onFocus:P=>{fe.endDate||hn("endDate")},autoComplete:"off",className:`w-full px-4 py-2 border rounded-md focus:outline-none focus:ring-0 focus:border-[#2d4660] [&::-webkit-calendar-picker-indicator]:cursor-pointer ${Le.endDate?"border-red-500":"border-gray-300"}`,style:fe.endDate?{}:{color:"transparent",position:"relative"},onBlur:P=>{P.target.value?P.target.style.color="":P.target.style.color="transparent"}}),Le.endDate&&i.jsxs("p",{className:"mt-1 text-sm text-red-600 flex items-center",children:[i.jsx(or,{className:"h-4 w-4 mr-1"}),Le.endDate]})]})]}),(fe.startDate||fe.endDate)&&i.jsxs("div",{className:"mt-1 grid grid-cols-1 sm:grid-cols-2 gap-3",children:[i.jsx("div",{}),i.jsx("div",{className:"flex justify-end",children:i.jsx("button",{type:"button",onClick:()=>{ye(P=>({...P,startDate:"",endDate:""}))},className:"text-sm text-[#2D4660] hover:text-[#173B65] underline",children:"Clear Dates"})})]})]})]}),Le.submit&&i.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-3 text-sm text-red-700 flex items-center",children:[i.jsx(or,{className:"h-4 w-4 mr-2"}),Le.submit]}),i.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t",children:[i.jsx(gt,{type:"button",variant:"secondary",onClick:Ki,disabled:Me||!lr&&!de&&!(dt&&Ye.trim()&&rt)&&!He,children:Me?"Saving...":"Save Draft"}),i.jsx(gt,{type:"submit",variant:dt&&Ye.trim()&&rt?"gold":"primary",disabled:Me||!lr&&!de&&!(dt&&Ye.trim()&&rt)&&!He,className:`transition-all duration-500 ease-in-out ${dt&&Ye.trim()&&rt?"relative overflow-hidden":""}`,children:Me?"Creating...":dt&&Ye.trim()&&rt?i.jsxs(i.Fragment,{children:[i.jsxs("span",{className:"relative z-10 flex items-center",children:[i.jsx(vn,{className:"h-4 w-4 mr-2"}),"Create New Product and Session"]}),i.jsx("span",{className:"absolute top-1 left-1/4 w-1 h-1 bg-white rounded-full animate-ping opacity-75",style:{animationDelay:"0ms",animationDuration:"1.5s"}}),i.jsx("span",{className:"absolute top-2 right-1/3 w-1 h-1 bg-white rounded-full animate-ping opacity-75",style:{animationDelay:"300ms",animationDuration:"1.5s"}}),i.jsx("span",{className:"absolute bottom-2 left-1/3 w-1 h-1 bg-white rounded-full animate-ping opacity-75",style:{animationDelay:"600ms",animationDuration:"1.5s"}}),i.jsx("span",{className:"absolute bottom-1 right-1/4 w-1 h-1 bg-white rounded-full animate-ping opacity-75",style:{animationDelay:"900ms",animationDuration:"1.5s"}})]}):"Create Session"})]})]})}),ft&&i.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",onClick:()=>nt(!1),children:i.jsx("div",{className:"bg-white rounded-lg shadow-xl px-3 py-2 w-auto mx-4",onClick:P=>P.stopPropagation(),children:i.jsxs("div",{className:"flex gap-3 items-stretch",children:[i.jsxs("div",{className:"flex-shrink-0",style:{width:"240px",height:"260px"},children:[i.jsx("input",{id:"native-color-input",type:"color",value:Kt,onChange:P=>dr(P.target.value),ref:P=>{P&&ft&&setTimeout(()=>P.click(),50)},className:"opacity-0 absolute",style:{width:"1px",height:"1px"}}),i.jsx("div",{className:"w-full h-full"})]}),i.jsxs("button",{type:"button",onClick:()=>{Nt(Kt),nt(!1),setTimeout(()=>{var P;(P=Pr.current)==null||P.focus()},100)},className:"px-6 rounded-lg text-white font-bold shadow-lg hover:shadow-xl transition-all flex flex-col items-center justify-center gap-3 text-lg flex-shrink-0",style:{backgroundColor:Kt,height:"260px",minWidth:"100px"},children:[i.jsx(kr,{className:"h-8 w-8"}),i.jsxs("div",{className:"text-center leading-tight",children:[i.jsx("div",{children:"Looks"}),i.jsx("div",{children:"Good"})]})]})]})})}),Q==="stakeholder"&&x.length>0&&i.jsx("div",{className:"relative z-10 mt-8 bg-blue-50 border border-blue-200 rounded-lg p-4",children:i.jsxs("div",{className:"flex items-start",children:[i.jsx(es,{className:"h-5 w-5 text-blue-600 mr-3 mt-0.5"}),i.jsxs("div",{className:"text-sm text-blue-800",children:[i.jsx("p",{className:"font-medium mb-1",children:"About Voting Sessions:"}),i.jsx("p",{children:"Click on any session card to cast your votes. You can change your votes at any time before the voting period ends."})]})]})}),Q==="admin"&&k.length>0&&L.length===0&&i.jsx("div",{className:"relative z-10 mt-8 bg-blue-50 border border-blue-200 rounded-lg p-4",children:i.jsxs("div",{className:"flex items-start",children:[i.jsx(es,{className:"h-5 w-5 text-blue-600 mr-3 mt-0.5"}),i.jsxs("div",{className:"text-sm text-blue-800",children:[i.jsx("p",{className:"font-medium mb-1",children:"About Voting Sessions:"}),i.jsx("p",{children:"Click on any session card to cast your votes. You can change your votes at any time before the voting period ends."})]})]})}),Q==="admin"&&L.length>0&&i.jsx("div",{className:"relative z-10 mt-8 bg-blue-50 border border-blue-200 rounded-lg p-4",children:i.jsxs("div",{className:"flex items-start",children:[i.jsx(Ln,{className:"h-5 w-5 text-blue-600 mr-3 mt-0.5"}),i.jsxs("div",{className:"text-sm text-blue-800",children:[i.jsx("p",{className:"font-medium mb-1",children:"Managing Sessions:"}),i.jsx("p",{children:'Click "Email Invite to Stakeholders" on any session card to send invitation links. Use the Admins and Stakeholders buttons to manage access.'})]})]})}),Q==="system-admin"&&i.jsx("div",{className:"relative z-10 mt-8 bg-purple-50 border border-purple-200 rounded-lg p-4",children:i.jsxs("div",{className:"flex items-start",children:[i.jsx(Xr,{className:"h-5 w-5 text-purple-600 mr-3 mt-0.5"}),i.jsxs("div",{className:"text-sm text-purple-900",children:[i.jsx("p",{className:"font-medium mb-1",children:"System Admin Tips:"}),i.jsxs("ul",{className:"list-disc list-inside space-y-1",children:[i.jsx("li",{children:"Use this view to audit every session across the tenant without switching teams."}),i.jsx("li",{children:"Jump into any card to open the admin dashboard and assist local admins."}),i.jsx("li",{children:"Need a quick rollout? Click Create Session above to spin up a new voting round for any product."})]})]})]})}),i.jsx(ZI,{currentRole:T&&Q==="system-admin"?"system-admin":Q==="admin"?"session-admin":"stakeholder",onSelectStakeholder:()=>se("stakeholder"),onSelectSessionAdmin:()=>se("admin"),onSelectSystemAdmin:T?()=>se("system-admin"):void 0,showRoleToggle:Yn||T}),i.jsxs(bn,{isOpen:_r,onClose:()=>{Je||Ts()},title:$t?(()=>{const P=Ar($t,Y);return P?`${P}  ${$t.title}`:`Email Stakeholders  ${$t.title}`})():"Email Stakeholders",maxWidth:"max-w-3xl",children:[i.jsxs("div",{className:"space-y-6",children:[Yt&&i.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 text-sm rounded-lg p-3",children:Yt}),Xe?i.jsxs("div",{className:"py-12 flex flex-col items-center justify-center text-gray-600",children:[i.jsx("div",{className:"animate-spin rounded-full h-10 w-10 border-b-2 border-[#2D4660] mb-3"}),"Loading stakeholders..."]}):i.jsxs(i.Fragment,{children:[i.jsxs("div",{children:[i.jsxs("div",{className:"flex items-center justify-between mb-2",children:[i.jsxs("h4",{className:"text-sm font-semibold text-gray-900",children:["Stakeholders (",Cr.length,")"]}),Cr.length>0&&i.jsx("button",{type:"button",onClick:jo,className:"text-sm font-medium text-blue-600 hover:text-blue-700",children:cs?"Deselect All":"Select All"})]}),i.jsx("div",{className:"border border-gray-200 rounded-lg max-h-64 overflow-y-auto divide-y divide-gray-100",children:Cr.length===0?i.jsx("div",{className:"p-4 text-sm text-gray-500 text-center",children:"No stakeholders are assigned to this session yet."}):Cr.map(P=>{const D=P.user_email.toLowerCase(),X=ur.includes(D);return i.jsxs("div",{className:"flex items-center justify-between px-4 py-3 hover:bg-gray-50",children:[i.jsxs("div",{className:"flex-1 cursor-pointer",onClick:()=>ki(P.user_email),children:[i.jsx("p",{className:"text-sm font-medium text-gray-900",children:P.user_name||"Unnamed Stakeholder"}),i.jsx("p",{className:"text-xs text-gray-500",children:P.user_email})]}),i.jsx("button",{type:"button",onClick:ce=>{ce.stopPropagation(),ki(P.user_email)},className:"flex-shrink-0 ml-4 w-5 h-5 flex items-center justify-center",children:X?i.jsx(Yc,{className:"w-5 h-5 text-green-600"}):i.jsx(Ed,{className:"w-5 h-5 text-gray-400"})})]},P.id)})})]}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Subject"}),i.jsx("input",{type:"text",value:ws,onChange:P=>Tn(P.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-1 focus:ring-[#2D4660]",placeholder:"Email subject"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email Body"}),i.jsx("textarea",{value:ae,onChange:P=>_e(P.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-1 focus:ring-[#2D4660]",rows:10,placeholder:"Enter your custom message here. A 'Go Vote!' button will be automatically added below your message."}),i.jsx("div",{className:"mt-2 p-3 bg-blue-50 border border-blue-200 rounded-md",children:i.jsxs("p",{className:"text-xs text-blue-800",children:[i.jsx("strong",{children:"Note:"}),` A gold "Go Vote!" button will be automatically added to the email below your message. You don't need to include the link in your text.`]})})]})]})]})]}),i.jsxs("div",{className:"flex justify-end gap-3 pt-6 border-t mt-6",children:[i.jsx(gt,{variant:"secondary",onClick:Ts,disabled:Je,children:"Cancel"}),i.jsx(gt,{variant:"primary",onClick:al,disabled:Je||Cr.length===0||ur.length===0,children:Je?"Sending...":`Send to ${ur.length} Stakeholder${ur.length===1?"":"s"}`})]})]}),i.jsx(bn,{isOpen:!!Xt,onClose:br,title:"",hideHeader:!0,maxWidth:"max-w-md",hideCloseButton:!1,children:i.jsxs("div",{className:"py-6 px-4",children:[i.jsxs("div",{className:"text-center mb-6",children:[i.jsx("div",{className:"mx-auto h-16 w-16 rounded-full bg-green-100 flex items-center justify-center mb-4",children:i.jsx(kr,{className:"h-10 w-10 text-green-600"})}),i.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-1",children:"Invites Sent!"}),i.jsxs("p",{className:"text-sm text-gray-600",children:["Successfully emailed ",(Xt==null?void 0:Xt.count)??0," stakeholder",(Xt==null?void 0:Xt.count)===1?"":"s"," for"," ",i.jsx("span",{className:"font-semibold text-gray-900",children:Xt==null?void 0:Xt.sessionTitle}),"."]})]}),(Xt==null?void 0:Xt.stakeholders)&&Xt.stakeholders.length>0&&i.jsxs("div",{className:"mt-6 border-t border-gray-200 pt-6",children:[i.jsx("h4",{className:"text-sm font-semibold text-gray-900 mb-3",children:"Recipients:"}),i.jsx("div",{className:"max-h-64 overflow-y-auto space-y-2",children:Xt.stakeholders.map((P,D)=>i.jsxs("div",{className:"flex items-start py-2 px-3 bg-gray-50 rounded-md",children:[i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsx("p",{className:"text-sm font-medium text-gray-900 truncate",children:P.name}),i.jsx("p",{className:"text-xs text-gray-500 truncate",children:P.email})]}),i.jsx(kr,{className:"h-4 w-4 text-green-600 flex-shrink-0 ml-2 mt-1"})]},D))})]})]})}),vt&&i.jsxs(bn,{isOpen:!0,onClose:()=>ot(null),title:"Delete Product",children:[i.jsxs("p",{className:"text-sm text-gray-700 mb-4",children:["Are you sure you want to delete ",i.jsx("span",{className:"font-semibold",children:vt.name}),"? This will remove it for everyone in your tenant."]}),i.jsxs("div",{className:"flex justify-end gap-3",children:[i.jsx(gt,{variant:"secondary",onClick:()=>ot(null),disabled:rr,children:"Cancel"}),i.jsx(gt,{variant:"danger",onClick:Hi,disabled:rr,children:rr?"Deleting":"Delete"})]})]}),cr&&i.jsx(bn,{isOpen:!0,onClose:()=>{Hr(null),Hn(""),Ir(null),sn(!1)},title:"Edit Product",children:i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Product Name *"}),i.jsx("input",{type:"text",value:Kr,onChange:P=>Hn(P.target.value),placeholder:"Enter product name",className:"w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-0 focus:border-[#2D4660]"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Product Color"}),i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("button",{type:"button",onClick:()=>{Us(jr||"#2D4660"),sn(!0)},className:"block w-12 h-12 rounded-md border-2 border-gray-300 hover:border-gray-400 transition-all flex items-center justify-center overflow-hidden",style:jr?{backgroundColor:jr}:{backgroundColor:"#ffffff"},children:!jr&&i.jsx("img",{src:"/colorpicker.png",alt:"Color Picker",className:"w-8 h-8 object-contain"})}),i.jsx("span",{className:"text-sm text-gray-600",children:jr||"No color selected"})]})]}),i.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t",children:[i.jsx(gt,{variant:"secondary",onClick:()=>{Hr(null),Hn(""),Ir(null),sn(!1)},disabled:In,children:"Cancel"}),i.jsx(gt,{variant:"primary",onClick:async()=>{if(!(!(cr!=null&&cr.id)||!Kr.trim())){Kn(!0);try{await NE(cr.id,{name:Kr.trim(),color_hex:jr});const P=(e==null?void 0:e.tenant_id)??(e==null?void 0:e.tenantId);if(P){const D=await Ga(P);ue(D.sort((Re,Ae)=>Re.name.localeCompare(Ae.name)));const X={},ce={};D.forEach(Re=>{X[Re.id]=Re.name||"",Re.color_hex&&(ce[Re.id]=Re.color_hex)}),J(X),H(ce)}Hr(null),Hn(""),Ir(null),sn(!1),await r(),await ii()}catch(P){console.error("Error updating product:",P),alert("Failed to update product. Please try again.")}finally{Kn(!1)}}},disabled:In||!Kr.trim(),children:In?"Updating...":"Update Product"})]})]})}),Vi&&i.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",onClick:()=>sn(!1),children:i.jsx("div",{className:"bg-white rounded-lg shadow-xl px-3 py-2 w-auto mx-4",onClick:P=>P.stopPropagation(),children:i.jsxs("div",{className:"flex gap-3 items-stretch",children:[i.jsxs("div",{className:"flex-shrink-0",style:{width:"240px",height:"260px"},children:[i.jsx("input",{id:"edit-native-color-input",type:"color",value:bs,onChange:P=>Us(P.target.value),ref:P=>{P&&Vi&&setTimeout(()=>P.click(),50)},className:"opacity-0 absolute",style:{width:"1px",height:"1px"}}),i.jsx("div",{className:"w-full h-full"})]}),i.jsxs("button",{type:"button",onClick:()=>{Ir(bs),sn(!1)},className:"px-6 rounded-lg text-white font-bold shadow-lg hover:shadow-xl transition-all flex flex-col items-center justify-center gap-3 text-lg flex-shrink-0",style:{backgroundColor:bs,height:"260px",minWidth:"100px"},children:[i.jsx(kr,{className:"h-8 w-8"}),i.jsxs("div",{className:"text-center leading-tight",children:[i.jsx("div",{children:"Looks"}),i.jsx("div",{children:"Good"})]})]})]})})})]})}function tee(){const{currentUser:e,setCurrentSession:t,refreshSessions:r,setCurrentUser:n}=Ta(),s=ri(),a=async()=>{try{await Pe.auth.signOut()}catch{}try{t(null)}catch{}n(null);try{localStorage.removeItem("voting_system_current_session"),localStorage.removeItem("azureDevOpsAuthInProgress"),sessionStorage.removeItem("oauth_return_path"),sessionStorage.removeItem("oauth_action")}catch{}s("/login",{replace:!0})},[l,u]=g.useState({title:"",goal:"",votesPerUser:10,useAutoVotes:!0,startDate:new Date().toISOString().split("T")[0],endDate:new Date(Date.now()+10080*60*1e3).toISOString().split("T")[0]}),[d,m]=g.useState({}),[f,p]=g.useState(!1),[x,v]=g.useState(!1),[b,w]=g.useState([]),[j,_]=g.useState(""),[E,C]=g.useState(""),[I,A]=g.useState(!1),[$,B]=g.useState(!1),[T,K]=g.useState(null),[Q,se]=g.useState(!1),[G,le]=g.useState(!1);g.useEffect(()=>{(async()=>{if(!e)return;const ie=await Ui(e.id);se(ie);const{data:M}=await Pe.from("session_admins").select("session_id").eq("user_id",e.id).limit(1);le(M&&M.length>0)})()},[e]),g.useEffect(()=>{(async()=>{var M;if(!e){w([]),_("");return}const ie=e.tenant_id??e.tenantId??null;if(!ie){w([]),_(""),K("No tenant assigned. Products cannot be loaded.");return}A(!0),K(null);try{const Z=await Ga(ie);w(Z),_(((M=Z[0])==null?void 0:M.id)??"")}catch(Z){console.error("Error loading products for create session:",Z),eo!=null&&eo(Z)?K("Products are not configured yet. Please create the `products` table in Supabase."):K("Unable to load products. You can still create a session without a product tag."),w([]),_("")}finally{A(!1)}})()},[e]);const F=()=>{const re="ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";let ie="";for(let M=0;M<8;M++)ie+=re.charAt(Math.floor(Math.random()*re.length));return ie},Y=()=>{const re={};l.title.trim()||(re.title="Session title is required"),l.goal.trim()||(re.goal="Session goal is required"),l.useAutoVotes||(l.votesPerUser<1&&(re.votesPerUser="Votes per user must be at least 1"),l.votesPerUser>100&&(re.votesPerUser="Votes per user cannot exceed 100"));const ie=new Date(l.startDate);return new Date(l.endDate)<=ie&&(re.endDate="End date must be after start date"),!T&&b.length>0&&!j&&(re.product="Please select a product for this session"),m(re),Object.keys(re).length===0},J=async re=>{if(re.preventDefault(),!(!Y()||!e)){p(!0);try{const ie=F(),M=b.find(fe=>fe.id===j)||null;if(M!=null&&M.id&&await EE(M.id)){m({submit:`There is already an active session for ${M.name}. Each product can only have one active session at a time.`}),p(!1);return}const Z=await jx({title:l.title,goal:l.goal,votes_per_user:l.votesPerUser,use_auto_votes:l.useAutoVotes,start_date:l.startDate,end_date:l.endDate,is_active:!0,session_code:ie,product_id:(M==null?void 0:M.id)??null,product_name:null});await Dl(Z.id,e.id),await r(),v(!0),setTimeout(()=>{t(Z),s("/admin")},3e3)}catch(ie){console.error("Error creating session:",ie),m({submit:"Failed to create session. Please try again."})}finally{p(!1)}}},V=async()=>{if(!e)return;const re=e.tenant_id??e.tenantId??null;if(!re){K("Cannot create products because no tenant is associated with your account.");return}const ie=E.trim();if(!ie){K("Product name is required.");return}B(!0),K(null);try{const M=await wx(re,ie);w(Z=>[...Z,M].sort((ye,Le)=>ye.name.localeCompare(Le.name))),_(M.id),C("")}catch(M){console.error("Error creating product:",M),K(M instanceof Error?M.message:"Unable to create product. Please try again.")}finally{B(!1)}},H=re=>{const{name:ie,value:M}=re.target;u(Z=>({...Z,[ie]:ie==="votesPerUser"?parseInt(M)||0:M})),d[ie]&&m(Z=>{const fe={...Z};return delete fe[ie],fe})};return x?i.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center p-4",children:i.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-8 max-w-md w-full text-center",children:[i.jsx("div",{className:"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4",children:i.jsx(kr,{className:"h-10 w-10 text-green-600"})}),i.jsx("h2",{className:"text-2xl font-bold text-[#2d4660] mb-2",children:"Session Created!"}),i.jsx("p",{className:"text-gray-600 mb-6",children:"Your voting session has been created successfully."}),i.jsxs("div",{className:"bg-blue-50 border-2 border-blue-200 rounded-lg p-4 mb-6",children:[i.jsx("p",{className:"text-sm text-gray-600 mb-2",children:"Success!"}),i.jsx("p",{className:"text-base text-[#2d4660] font-medium",children:"Your session has been created."}),i.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"You can now invite stakeholders from your session dashboard."})]}),i.jsx("p",{className:"text-sm text-gray-500",children:"Redirecting to admin dashboard..."})]})}):i.jsxs("div",{className:"container mx-auto p-4 max-w-6xl min-h-screen pb-8",children:[i.jsx("div",{className:"hidden md:flex md:justify-center mb-2",children:i.jsx("img",{src:ji,alt:"New Millennium Building Systems Logo",className:"-mt-4 cursor-pointer hover:opacity-80 transition-opacity",style:{height:"96px",width:"auto"},onClick:()=>s("/sessions")})}),i.jsxs("div",{className:"flex justify-between items-center mb-6",children:[i.jsxs("div",{className:"flex items-center",children:[i.jsx("img",{src:$a,alt:"New Millennium Building Systems Logo",className:"mr-4 md:hidden",style:{width:"40px",height:"40px",objectFit:"contain"}}),i.jsx("button",{onClick:()=>s("/sessions"),className:"mr-2 p-1 rounded-full hover:bg-gray-200 cursor-pointer",children:i.jsx(Xm,{className:"h-6 w-6"})}),i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsx("h1",{className:"text-2xl font-bold text-[#2d4660] md:text-3xl",children:"Create Voting Session"}),e&&i.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:[e.name,Q&&i.jsx("span",{className:"ml-2 inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium bg-[#C89212] text-white",children:"System Admin"}),!Q&&G&&i.jsx("span",{className:"ml-2 inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium bg-[#576C71] text-white",children:"Session Admin"})]})]})]}),i.jsxs("button",{onClick:a,className:"flex items-center px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-colors",children:[i.jsx(ss,{className:"h-4 w-4 mr-2"}),i.jsx("span",{className:"hidden sm:inline",children:"Logout"})]})]}),i.jsx("div",{className:"relative z-10 bg-white rounded-lg shadow-md p-6",children:i.jsxs("form",{onSubmit:J,className:"space-y-6",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Session Title *"}),i.jsx("input",{type:"text",name:"title",value:l.title,onChange:H,placeholder:"e.g., Q2 2025 Product Roadmap",className:`w-full px-4 py-2 border rounded-md focus:ring-2 focus:ring-[#2d4660] focus:border-transparent ${d.title?"border-red-500":"border-gray-300"}`}),d.title&&i.jsxs("p",{className:"mt-1 text-sm text-red-600 flex items-center",children:[i.jsx(or,{className:"h-4 w-4 mr-1"}),d.title]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Session Goal *"}),i.jsx("textarea",{name:"goal",value:l.goal,onChange:H,rows:3,placeholder:"Describe the purpose of this voting session...",className:`w-full px-4 py-2 border rounded-md focus:ring-2 focus:ring-[#2d4660] focus:border-transparent ${d.goal?"border-red-500":"border-gray-300"}`}),d.goal&&i.jsxs("p",{className:"mt-1 text-sm text-red-600 flex items-center",children:[i.jsx(or,{className:"h-4 w-4 mr-1"}),d.goal]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Product *"}),I?i.jsx("p",{className:"text-sm text-gray-500",children:"Loading products..."}):b.length>0?i.jsxs("select",{value:j,onChange:re=>{_(re.target.value),d.product&&m(ie=>{const M={...ie};return delete M.product,M})},className:`w-full px-4 py-2 border rounded-md focus:ring-2 focus:ring-[#2d4660] focus:border-transparent ${d.product?"border-red-500":"border-gray-300"}`,children:[i.jsx("option",{value:"",children:"Select a product"}),b.map(re=>i.jsx("option",{value:re.id,children:re.name},re.id))]}):i.jsx("p",{className:"text-sm text-gray-500",children:T??"No products found. Add a product below to associate this session."}),d.product&&i.jsxs("p",{className:"mt-1 text-sm text-red-600 flex items-center",children:[i.jsx(or,{className:"h-4 w-4 mr-1"}),d.product]}),T&&b.length>0&&i.jsx("p",{className:"mt-1 text-sm text-red-600",children:T}),i.jsxs("div",{className:"mt-4",children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Add a new product"}),i.jsxs("div",{className:"flex flex-col sm:flex-row gap-2",children:[i.jsx("input",{type:"text",value:E,onChange:re=>{C(re.target.value),T&&K(null)},placeholder:"e.g., Catalyst Cloud",className:"w-full px-4 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-[#2d4660] focus:border-transparent"}),i.jsx("button",{type:"button",onClick:V,disabled:$,className:"px-4 py-2 bg-[#2d4660] text-white rounded-md hover:bg-[#1d3a53] transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:$?"Adding...":"Add Product"})]}),i.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"New products become available immediately for all session admins in your tenant."})]})]}),i.jsxs("div",{children:[i.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[i.jsx(es,{className:"h-4 w-4 inline mr-1"}),"Votes Per User *"]}),i.jsxs("div",{className:"flex items-center mb-3",children:[i.jsx("input",{type:"checkbox",id:"useAutoVotes",checked:l.useAutoVotes,onChange:re=>u(ie=>({...ie,useAutoVotes:re.target.checked})),className:"h-4 w-4 cursor-pointer rounded border-gray-300 accent-[#3A9B5C] focus:outline-none focus:ring-0"}),i.jsx("label",{htmlFor:"useAutoVotes",className:"ml-2 text-sm text-gray-700 cursor-pointer",children:"Auto-calculate votes (half of feature count, minimum 1)"})]}),!l.useAutoVotes&&i.jsxs(i.Fragment,{children:[i.jsx("input",{type:"number",name:"votesPerUser",value:l.votesPerUser,onChange:H,min:"1",max:"100",className:`w-full px-4 py-2 border rounded-md focus:ring-2 focus:ring-[#2d4660] focus:border-transparent ${d.votesPerUser?"border-red-500":"border-gray-300"}`}),d.votesPerUser&&i.jsxs("p",{className:"mt-1 text-sm text-red-600 flex items-center",children:[i.jsx(or,{className:"h-4 w-4 mr-1"}),d.votesPerUser]})]}),i.jsx("p",{className:"mt-2 text-sm text-gray-500",children:l.useAutoVotes?"Votes will automatically be set to half the number of features (1 feature = 1 vote, 2 features = 1 vote, 4 features = 2 votes, etc.)":"Each stakeholder will have this many votes to distribute across features"})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[i.jsx(un,{className:"h-4 w-4 inline mr-1"}),"Start Date *"]}),i.jsx("input",{type:"date",name:"startDate",value:l.startDate,onChange:H,className:"w-full px-4 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-[#2d4660] focus:border-transparent"})]}),i.jsxs("div",{children:[i.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[i.jsx(un,{className:"h-4 w-4 inline mr-1"}),"End Date *"]}),i.jsx("input",{type:"date",name:"endDate",value:l.endDate,onChange:H,className:`w-full px-4 py-2 border rounded-md focus:ring-2 focus:ring-[#2d4660] focus:border-transparent ${d.endDate?"border-red-500":"border-gray-300"}`}),d.endDate&&i.jsxs("p",{className:"mt-1 text-sm text-red-600 flex items-center",children:[i.jsx(or,{className:"h-4 w-4 mr-1"}),d.endDate]})]})]}),i.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:i.jsxs("div",{className:"flex items-start",children:[i.jsx(Ln,{className:"h-5 w-5 text-blue-600 mr-3 mt-0.5"}),i.jsxs("div",{className:"text-sm text-blue-800",children:[i.jsx("p",{className:"font-medium mb-1",children:"Next Steps:"}),i.jsxs("ul",{className:"list-disc list-inside space-y-1",children:[i.jsx("li",{children:"After creating the session, you'll be assigned as the admin"}),i.jsx("li",{children:"You can add stakeholders and other admins from the admin dashboard"}),i.jsx("li",{children:'Use the "Email Invite" button to send stakeholders a link to join'})]})]})]})}),d.submit&&i.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:i.jsxs("p",{className:"text-sm text-red-800 flex items-center",children:[i.jsx(or,{className:"h-4 w-4 mr-2"}),d.submit]})}),i.jsxs("div",{className:"flex justify-end space-x-3 pt-4 border-t",children:[i.jsx("button",{type:"button",onClick:()=>s("/sessions"),className:"px-6 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50 transition-colors",disabled:f,children:"Cancel"}),i.jsx("button",{type:"submit",className:"px-6 py-2 bg-[#2d4660] text-white rounded-md hover:bg-[#1d3a53] transition-colors disabled:opacity-50 disabled:cursor-not-allowed",disabled:f,children:f?"Creating...":"Create Session"})]})]})})]})}function ree({products:e,value:t,onChange:r,label:n,error:s}){const[a,l]=g.useState(!1),u=g.useRef(null);g.useEffect(()=>{function f(p){u.current&&!u.current.contains(p.target)&&l(!1)}return document.addEventListener("mousedown",f),()=>document.removeEventListener("mousedown",f)},[]);const d=e.find(f=>f.id===t),m=d?Ur(d.name,d.color_hex??null):null;return i.jsxs("div",{ref:u,className:"relative",children:[n&&i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:n}),i.jsxs("div",{onClick:()=>l(!a),className:`w-full px-3 py-2 border rounded-md bg-white cursor-pointer flex items-center justify-between hover:border-gray-400 ${s?"border-red-500":"border-gray-300"}`,children:[i.jsxs("div",{className:"flex items-center gap-2 flex-1 min-w-0",children:[d&&m&&i.jsx("div",{className:"w-4 h-4 rounded flex-shrink-0",style:{backgroundColor:m.background}}),i.jsx("span",{className:`text-sm truncate ${t?"text-gray-900":"text-gray-400"}`,children:d?d.name:"Select a Product"})]}),i.jsx(rs,{className:`h-4 w-4 text-gray-400 transition-transform flex-shrink-0 ${a?"transform rotate-180":""}`})]}),a&&i.jsx("div",{className:"absolute z-50 w-full mt-1 bg-white border border-gray-300 rounded-md shadow-lg max-h-60 overflow-y-auto",children:e.length===0?i.jsx("div",{className:"px-3 py-2 text-sm text-gray-500 text-center",children:"No products available"}):e.map(f=>{const p=Ur(f.name,f.color_hex??null),x=t===f.id;return i.jsxs("div",{onClick:()=>{r(f.id),l(!1)},className:`px-3 py-2 cursor-pointer hover:bg-gray-50 flex items-center gap-2 ${x?"bg-gray-50":""}`,children:[i.jsx("div",{className:"w-4 h-4 rounded flex-shrink-0",style:{backgroundColor:p.background}}),i.jsx("span",{className:"text-sm text-gray-900 flex-1",children:f.name}),x&&i.jsx(kr,{className:"h-4 w-4 text-gray-400 flex-shrink-0"})]},f.id)})})]})}function nee(){const{currentSession:e,currentUser:t,setCurrentUser:r,setCurrentSession:n}=Ta(),s=ri(),a=async()=>{try{await Pe.auth.signOut()}catch{}try{n(null)}catch{}r(null);try{localStorage.removeItem("voting_system_current_session"),localStorage.removeItem("azureDevOpsAuthInProgress"),sessionStorage.removeItem("oauth_return_path"),sessionStorage.removeItem("oauth_action")}catch{}C(!1),s("/login",{replace:!0})},[l,u]=g.useState([]),[d,m]=g.useState(!0),[f,p]=g.useState(!1),[x,v]=g.useState({name:"",email:""}),[b,w]=g.useState({}),[j,_]=g.useState(!1),[E,C]=g.useState(!1),I=g.useRef(null),[A,$]=g.useState([]),[B,T]=g.useState(""),[K,Q]=g.useState([]),[se,G]=g.useState([]),[le,F]=g.useState({}),[Y,J]=g.useState(!1),[V,H]=g.useState(!1);g.useEffect(()=>{if(!E)return;const Se=z=>{I.current&&!I.current.contains(z.target)&&C(!1)};return document.addEventListener("mousedown",Se),document.addEventListener("touchstart",Se,{passive:!0}),()=>{document.removeEventListener("mousedown",Se),document.removeEventListener("touchstart",Se)}},[E]),g.useEffect(()=>{if(!e){s("/sessions");return}M(),re()},[e,s]),g.useEffect(()=>{(async()=>{if(!t)return;const z=await Ui(t.id);J(z);const{data:ue}=await Pe.from("session_admins").select("session_id").eq("user_id",t.id).limit(1);H(ue&&ue.length>0)})()},[t]);const re=async()=>{try{const Se=await Bh(),z=await Go(),ue=new Date,de=Se.filter(Ye=>z.some(Oe=>Oe.product_id!==Ye.id?!1:new Date(Oe.end_date)>=ue));$(de);const ee={};de.forEach(Ye=>{ee[Ye.id]=Ye.name}),F(ee)}catch(Se){console.error("Error loading products:",Se)}},ie=async Se=>{try{const z=await Go(),ue=new Date,de=z.filter(ee=>ee.product_id!==Se?!1:new Date(ee.end_date)>=ue);Q(de)}catch(z){console.error("Error loading sessions:",z),Q([])}};g.useEffect(()=>{B?(ie(B),G([])):(Q([]),G([]))},[B]);const M=async()=>{if(e){m(!0);try{const Se=await Wh(e.id);u(Se)}catch(Se){console.error("Error loading stakeholders:",Se)}finally{m(!1)}}},Z=Se=>/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(Se),fe=Se=>{const z=new Date,ue=new Date(Se.start_date),de=new Date(Se.end_date);return Se.is_active&&z>=ue&&z<=de?{text:"Active",color:"text-green-600"}:z<ue?{text:"Upcoming",color:"text-blue-600"}:{text:"Ended",color:"text-gray-500"}},ye=Se=>{const z=new Date(Se.start_date),ue=new Date(Se.end_date),de=z.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}),ee=ue.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"});return`${de} - ${ee}`},Le=async Se=>{Se.preventDefault();const z={};if(x.name.trim()||(z.name="Name is required"),x.email.trim()?Z(x.email)||(z.email="Invalid email address"):z.email="Email is required",B||(z.product="Please select a product"),se.length===0&&(z.sessions="Please select at least one session"),w(z),!(Object.keys(z).length>0)){_(!0);try{for(const ue of se)await OE({session_id:ue,user_name:x.name,user_email:x.email,has_voted:!1});for(const ue of se){const de=K.find(ee=>ee.id===ue);if(de)try{const ee=window.location.pathname.startsWith("/feature-voting-app")?"/feature-voting-app":"",Ye=`${window.location.origin}${ee}/login?session=${de.session_code}`;await Yo({to:x.email,subject:`You're invited to vote: ${de.title}`,text:`Hi,

You've been invited to vote in "${de.title}".

Open: ${Ye}

Best regards,
${(t==null?void 0:t.name)||""}`,html:`<p>Hi,</p><p>You've been invited to vote in <strong>${de.title}</strong>.</p><p><a href="${Ye}">Open the Feature Voting System</a></p><p>Best regards,<br/>${(t==null?void 0:t.name)||""}</p>`})}catch{try{const ee=IE(de,x.email,(t==null?void 0:t.name)||"");window.location.href=ee}catch{}}}await M(),v({name:"",email:""}),T(""),G([]),p(!1),w({})}catch(ue){console.error("Error adding stakeholder:",ue),w({submit:"Failed to add stakeholder. Please try again."})}finally{_(!1)}}},je=async Se=>{if(e&&confirm("Are you sure you want to remove this stakeholder?"))try{await kx(e.id,Se),await M()}catch(z){console.error("Error removing stakeholder:",z),alert("Failed to remove stakeholder")}},Me=Se=>{const ue=Se.split("T")[0].split(" ")[0].split("-");let de;if(ue.length===3){const ee=parseInt(ue[0],10),Ye=parseInt(ue[1],10)-1,Oe=parseInt(ue[2],10);de=new Date(ee,Ye,Oe);const rt=Se.match(/T(\d{2}):(\d{2}):(\d{2})/);rt&&de.setHours(parseInt(rt[1],10),parseInt(rt[2],10),parseInt(rt[3],10))}else de=new Date(Se);return de.toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})};return e?d?i.jsx("div",{className:"min-h-screen w-full bg-gray-50 flex items-center justify-center",children:i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-[#2d4660] mx-auto mb-4"}),i.jsx("p",{className:"text-gray-600",children:"Loading stakeholders..."})]})}):i.jsxs("div",{className:"container mx-auto p-4 max-w-6xl min-h-screen pb-8",children:[i.jsx("div",{className:"hidden md:flex md:justify-center mb-2",children:i.jsx("img",{src:ji,alt:"New Millennium Building Systems Logo",className:"-mt-4 cursor-pointer hover:opacity-80 transition-opacity",style:{height:"96px",width:"auto"},onClick:()=>s("/sessions")})}),i.jsxs("div",{className:"flex justify-between items-center mb-6",children:[i.jsxs("div",{className:"flex items-center",children:[i.jsx("img",{src:$a,alt:"New Millennium Building Systems Logo",className:"mr-4 md:hidden",style:{width:"40px",height:"40px",objectFit:"contain"}}),i.jsx("button",{onClick:()=>s("/admin"),className:"mr-2 p-1 rounded-full hover:bg-gray-200 cursor-pointer",children:i.jsx(Xm,{className:"h-6 w-6"})}),i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsx("h1",{className:"text-2xl font-bold text-[#2d4660] md:text-3xl",children:"Manage Stakeholders"}),t&&i.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:[t.name,Y&&i.jsx("span",{className:"ml-2 inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium bg-[#C89212] text-white",children:"System Admin"}),!Y&&V&&i.jsx("span",{className:"ml-2 inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium bg-[#576C71] text-white",children:"Session Admin"})]})]})]}),i.jsxs("div",{ref:I,className:"relative z-40",children:[i.jsxs("div",{className:"hidden md:flex space-x-2",children:[i.jsxs("button",{onClick:()=>s("/admin"),className:"flex items-center px-4 py-2 bg-[#4f6d8e] text-white rounded-lg hover:bg-[#3d5670] transition-colors",children:[i.jsx(ns,{className:"h-4 w-4 mr-2"}),"Admin Dashboard"]}),i.jsxs("button",{onClick:()=>p(!0),className:"flex items-center px-4 py-2 bg-[#c59f2d] text-white rounded-lg hover:bg-[#a88a26] transition-colors",children:[i.jsx(Rl,{className:"h-4 w-4 mr-2"}),"Add Stakeholder"]}),i.jsxs("button",{onClick:a,className:"flex items-center px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-colors",children:[i.jsx(ss,{className:"h-4 w-4 mr-2"}),"Logout"]})]}),i.jsx("div",{className:"flex md:hidden",children:i.jsx("button",{onClick:()=>C(!E),className:"p-2 rounded-md border border-gray-200 bg-white shadow-sm","aria-label":"Open menu",children:i.jsx(pi,{className:"h-5 w-5 text-gray-700"})})}),E&&i.jsx("div",{className:"absolute right-0 mt-2 w-56 bg-white border border-gray-200 rounded-lg shadow-lg md:hidden z-50",children:i.jsxs("div",{className:"py-1",children:[i.jsxs("button",{onClick:()=>{C(!1),s("/admin")},className:"w-full px-3 py-2 flex items-center text-left hover:bg-gray-50",children:[i.jsx(ns,{className:"h-4 w-4 mr-2 text-gray-700"}),"Admin Dashboard"]}),i.jsxs("button",{onClick:()=>{C(!1),p(!0)},className:"w-full px-3 py-2 flex items-center text-left hover:bg-gray-50",children:[i.jsx(Rl,{className:"h-4 w-4 mr-2 text-gray-700"}),"Add Stakeholder"]}),i.jsxs("button",{onClick:()=>{C(!1),a()},className:"w-full px-3 py-2 flex items-center text-left hover:bg-gray-50",children:[i.jsx(ss,{className:"h-4 w-4 mr-2 text-gray-700"}),"Logout"]})]})})]})]}),i.jsx("div",{className:"relative z-10 bg-white rounded-lg shadow-md p-4 mb-6",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("h2",{className:"text-lg font-semibold text-[#2d4660]",children:"Current Session"}),i.jsx("p",{className:"text-gray-600 mt-1",children:e.title})]}),i.jsxs("div",{className:"text-right",children:[i.jsx("p",{className:"text-sm text-gray-600",children:"Total Stakeholders"}),i.jsx("p",{className:"text-2xl font-bold text-[#2d4660]",children:l.length})]})]})}),i.jsxs("div",{className:"relative z-10 bg-white rounded-lg shadow-md overflow-hidden",children:[i.jsxs("div",{className:"p-6 border-b border-gray-200",children:[i.jsxs("h2",{className:"text-lg font-semibold text-[#2d4660]",children:["Stakeholders (",l.length,")"]}),i.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Manage who can vote in this session"})]}),l.length===0?i.jsxs("div",{className:"p-12 text-center",children:[i.jsx(ps,{className:"mx-auto h-12 w-12 text-gray-400"}),i.jsx("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"No stakeholders"}),i.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Get started by adding stakeholders to this voting session."}),i.jsx("div",{className:"mt-6",children:i.jsxs("button",{onClick:()=>p(!0),className:"inline-flex items-center px-4 py-2 bg-[#2d4660] text-white rounded-md hover:bg-[#1d3a53] transition-colors",children:[i.jsx(Rl,{className:"h-5 w-5 mr-2"}),"Add First Stakeholder"]})})]}):i.jsx("div",{className:"overflow-x-auto",children:i.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[i.jsx("thead",{className:"bg-gray-50",children:i.jsxs("tr",{children:[i.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Name"}),i.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Email"}),i.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Voting Status"}),i.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Added"}),i.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),i.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:l.map(Se=>i.jsxs("tr",{className:"hover:bg-gray-50",children:[i.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:i.jsxs("div",{className:"flex items-center",children:[i.jsx(ps,{className:"h-5 w-5 text-gray-400 mr-2"}),i.jsx("span",{className:"text-sm font-medium text-gray-900",children:Se.user_name})]})}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:i.jsxs("div",{className:"flex items-center text-sm text-gray-500",children:[i.jsx(hu,{className:"h-4 w-4 mr-2"}),Se.user_email]})}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:Se.has_voted?i.jsxs("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800",children:[i.jsx(kr,{className:"h-3 w-3 mr-1"}),"Voted"]}):i.jsxs("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-gray-100 text-gray-800",children:[i.jsx(Qm,{className:"h-3 w-3 mr-1"}),"Pending"]})}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:Me(Se.created_at)}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:i.jsx("button",{onClick:()=>je(Se.user_email),className:"text-red-600 hover:text-red-900",children:i.jsx(ha,{className:"h-5 w-5"})})})]},Se.id))})]})})]}),f&&i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:i.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-md w-full max-h-[90vh] overflow-y-auto",children:[i.jsxs("div",{className:"flex justify-between items-center mb-4",children:[i.jsx("h3",{className:"text-lg font-medium text-[#2d4660]",children:"Add Stakeholder"}),i.jsx("button",{onClick:()=>{p(!1),v({name:"",email:""}),T(""),G([]),w({})},className:"text-gray-400 hover:text-gray-500",children:i.jsx(xs,{className:"h-5 w-5"})})]}),i.jsxs("form",{onSubmit:Le,className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Name *"}),i.jsx("input",{type:"text",value:x.name,onChange:Se=>v(z=>({...z,name:Se.target.value})),className:`w-full px-3 py-2 border rounded-md focus:ring-2 focus:ring-[#2d4660] focus:border-transparent ${b.name?"border-red-500":"border-gray-300"}`,placeholder:"John Doe"}),b.name&&i.jsxs("p",{className:"mt-1 text-sm text-red-600 flex items-center",children:[i.jsx(or,{className:"h-4 w-4 mr-1"}),b.name]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email *"}),i.jsx("input",{type:"email",value:x.email,onChange:Se=>v(z=>({...z,email:Se.target.value})),className:`w-full px-3 py-2 border rounded-md focus:ring-2 focus:ring-[#2d4660] focus:border-transparent ${b.email?"border-red-500":"border-gray-300"}`,placeholder:"john@example.com"}),b.email&&i.jsxs("p",{className:"mt-1 text-sm text-red-600 flex items-center",children:[i.jsx(or,{className:"h-4 w-4 mr-1"}),b.email]})]}),i.jsxs("div",{children:[i.jsx(ree,{products:A,value:B,onChange:T,label:"Product *",error:!!b.product}),b.product&&i.jsxs("p",{className:"mt-1 text-sm text-red-600 flex items-center",children:[i.jsx(or,{className:"h-4 w-4 mr-1"}),b.product]})]}),B&&i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Sessions * (Current and Future)"}),K.length===0?i.jsx("p",{className:"text-sm text-gray-500",children:"No current or future sessions found for this product."}):i.jsx("div",{className:"max-h-48 overflow-y-auto border border-gray-300 rounded-md p-2",children:K.map(Se=>i.jsxs("label",{className:"flex items-start px-3 py-2 hover:bg-gray-50 cursor-pointer border-b border-gray-100 last:border-b-0",children:[i.jsx("input",{type:"checkbox",checked:se.includes(Se.id),onChange:z=>{z.target.checked?G(ue=>[...ue,Se.id]):G(ue=>ue.filter(de=>de!==Se.id))},className:"w-4 h-4 border-gray-300 rounded focus:ring-[#2D4660] accent-green-600 mt-1",style:{accentColor:"#16a34a"}}),i.jsxs("div",{className:"ml-3 flex-1",children:[i.jsx("div",{className:"text-sm font-medium text-gray-900",children:Se.title}),i.jsx("div",{className:"text-xs text-gray-500 mt-0.5",children:ye(Se)}),i.jsx("div",{className:"text-xs mt-0.5",children:i.jsx("span",{className:`font-medium ${fe(Se).color}`,children:fe(Se).text})})]})]},Se.id))}),b.sessions&&i.jsxs("p",{className:"mt-1 text-sm text-red-600 flex items-center",children:[i.jsx(or,{className:"h-4 w-4 mr-1"}),b.sessions]})]}),b.submit&&i.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-3",children:i.jsxs("p",{className:"text-sm text-red-800 flex items-center",children:[i.jsx(or,{className:"h-4 w-4 mr-2"}),b.submit]})}),i.jsxs("div",{className:"flex justify-end space-x-2 pt-4",children:[i.jsx("button",{type:"button",onClick:()=>{p(!1),v({name:"",email:""}),T(""),G([]),w({})},className:"px-4 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50",disabled:j,children:"Cancel"}),i.jsx("button",{type:"submit",className:"px-4 py-2 bg-[#2d4660] text-white rounded-md hover:bg-[#1d3a53] disabled:opacity-50",disabled:j,children:j?"Adding...":"Add Stakeholder"})]})]})]})})]}):null}function see(){const{currentSession:e,currentUser:t,setCurrentUser:r,setCurrentSession:n}=Ta(),s=ri(),a=async()=>{try{await Pe.auth.signOut()}catch{}try{n(null)}catch{}r(null);try{localStorage.removeItem("voting_system_current_session"),localStorage.removeItem("azureDevOpsAuthInProgress"),sessionStorage.removeItem("oauth_return_path"),sessionStorage.removeItem("oauth_action")}catch{}C(!1),s("/login",{replace:!0})},[l,u]=g.useState([]),[d,m]=g.useState(!0),[f,p]=g.useState(!1),[x,v]=g.useState({email:""}),[b,w]=g.useState({}),[j,_]=g.useState(!1),[E,C]=g.useState(!1),I=g.useRef(null),[A,$]=g.useState(!1),[B,T]=g.useState(!1);g.useEffect(()=>{if(!E)return;const F=Y=>{I.current&&!I.current.contains(Y.target)&&C(!1)};return document.addEventListener("mousedown",F),document.addEventListener("touchstart",F,{passive:!0}),()=>{document.removeEventListener("mousedown",F),document.removeEventListener("touchstart",F)}},[E]),g.useEffect(()=>{if(!e){s("/sessions");return}K()},[e,s]),g.useEffect(()=>{(async()=>{if(!t)return;const Y=await Ui(t.id);$(Y);const{data:J}=await Pe.from("session_admins").select("session_id").eq("user_id",t.id).limit(1);T(J&&J.length>0)})()},[t]);const K=async()=>{if(e){m(!0);try{const F=await qd(e.id);u(F)}catch(F){console.error("Error loading admins:",F)}finally{m(!1)}}},Q=F=>/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(F),se=async F=>{F.preventDefault();const Y={};if(x.email.trim()?Q(x.email)||(Y.email="Invalid email address"):Y.email="Email is required",l.some(J=>J.user.email.toLowerCase()===x.email.toLowerCase())&&(Y.email="This user is already an admin"),w(Y),!(Object.keys(Y).length>0)&&e){_(!0);try{const J=x.email.split("@")[0].replace(/\./g," ");await b$(e.id,x.email,J);try{const V=window.location.pathname.startsWith("/feature-voting-app")?"/feature-voting-app":"",H=`${window.location.origin}${V}/login?session=${e.session_code}`;await Yo({to:x.email,subject:`You're invited to administer: ${e.title}`,text:`Hi,

You've been added as an admin for "${e.title}".

Open: ${H}

Best regards,
${(t==null?void 0:t.name)||""}`,html:`<p>Hi,</p><p>You've been added as an admin for <strong>${e.title}</strong>.</p><p><a href="${H}">Open the Feature Voting System</a></p><p>Best regards,<br/>${(t==null?void 0:t.name)||""}</p>`})}catch{try{const V=IE(e,x.email,(t==null?void 0:t.name)||"");window.location.href=V}catch{}}await K(),v({email:""}),p(!1)}catch(J){console.error("Error adding admin:",J),w({submit:"Failed to add admin. Please try again."})}finally{_(!1)}}},G=async F=>{if(e){if(l.length===1){alert("Cannot remove the last admin. Sessions must have at least one admin.");return}if(F===(t==null?void 0:t.id)){alert("You cannot remove yourself as an admin.");return}if(confirm("Are you sure you want to remove this admin?"))try{await Sx(e.id,F),await K()}catch(Y){console.error("Error removing admin:",Y),alert("Failed to remove admin")}}},le=F=>{const J=F.split("T")[0].split(" ")[0].split("-");let V;if(J.length===3){const H=parseInt(J[0],10),re=parseInt(J[1],10)-1,ie=parseInt(J[2],10);V=new Date(H,re,ie);const M=F.match(/T(\d{2}):(\d{2}):(\d{2})/);M&&V.setHours(parseInt(M[1],10),parseInt(M[2],10),parseInt(M[3],10))}else V=new Date(F);return V.toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})};return e?d?i.jsx("div",{className:"min-h-screen w-full bg-gray-50 flex items-center justify-center",children:i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-[#2d4660] mx-auto mb-4"}),i.jsx("p",{className:"text-gray-600",children:"Loading admins..."})]})}):i.jsxs("div",{className:"container mx-auto p-4 max-w-6xl min-h-screen pb-8",children:[i.jsx("div",{className:"hidden md:flex md:justify-center mb-2",children:i.jsx("img",{src:ji,alt:"New Millennium Building Systems Logo",className:"-mt-4 cursor-pointer hover:opacity-80 transition-opacity",style:{height:"96px",width:"auto"},onClick:()=>s("/sessions")})}),i.jsxs("div",{className:"flex justify-between items-center mb-6",children:[i.jsxs("div",{className:"flex items-center",children:[i.jsx("img",{src:$a,alt:"New Millennium Building Systems Logo",className:"mr-4 md:hidden",style:{width:"40px",height:"40px",objectFit:"contain"}}),i.jsx("button",{onClick:()=>s("/admin"),className:"mr-2 p-1 rounded-full hover:bg-gray-200 cursor-pointer",children:i.jsx(Xm,{className:"h-6 w-6"})}),i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsx("h1",{className:"text-2xl font-bold text-[#2d4660] md:text-3xl",children:"Session Admins"}),t&&i.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:[t.name,A&&i.jsx("span",{className:"ml-2 inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium bg-[#C89212] text-white",children:"System Admin"}),!A&&B&&i.jsx("span",{className:"ml-2 inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium bg-[#576C71] text-white",children:"Session Admin"})]})]})]}),i.jsxs("div",{ref:I,className:"relative z-40",children:[i.jsxs("div",{className:"hidden md:flex space-x-2",children:[i.jsxs("button",{onClick:()=>s("/admin"),className:"flex items-center px-4 py-2 bg-[#4f6d8e] text-white rounded-lg hover:bg-[#3d5670] transition-colors",children:[i.jsx(ns,{className:"h-4 w-4 mr-2"}),"Admin Dashboard"]}),i.jsxs("button",{onClick:()=>p(!0),className:"flex items-center px-4 py-2 bg-[#c59f2d] text-white rounded-lg hover:bg-[#a88a26] transition-colors",children:[i.jsx(Rl,{className:"h-4 w-4 mr-2"}),"Add Admin"]}),i.jsxs("button",{onClick:a,className:"flex items-center px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-colors",children:[i.jsx(ss,{className:"h-4 w-4 mr-2"}),"Logout"]})]}),i.jsx("div",{className:"flex md:hidden",children:i.jsx("button",{onClick:()=>C(!E),className:"p-2 rounded-md border border-gray-200 bg-white shadow-sm","aria-label":"Open menu",children:i.jsx(pi,{className:"h-5 w-5 text-gray-700"})})}),E&&i.jsx("div",{className:"absolute right-0 mt-2 w-56 bg-white border border-gray-200 rounded-lg shadow-lg md:hidden z-50",children:i.jsxs("div",{className:"py-1",children:[i.jsxs("button",{onClick:()=>{C(!1),s("/admin")},className:"w-full px-3 py-2 flex items-center text-left hover:bg-gray-50",children:[i.jsx(ns,{className:"h-4 w-4 mr-2 text-gray-700"}),"Admin Dashboard"]}),i.jsxs("button",{onClick:()=>{C(!1),p(!0)},className:"w-full px-3 py-2 flex items-center text-left hover:bg-gray-50",children:[i.jsx(Rl,{className:"h-4 w-4 mr-2 text-gray-700"}),"Add Admin"]}),i.jsxs("button",{onClick:()=>{C(!1),a()},className:"w-full px-3 py-2 flex items-center text-left hover:bg-gray-50",children:[i.jsx(ss,{className:"h-4 w-4 mr-2 text-gray-700"}),"Logout"]})]})})]})]}),i.jsx("div",{className:"relative z-10 bg-white rounded-lg shadow-md p-4 mb-6",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("h2",{className:"text-lg font-semibold text-[#2d4660]",children:"Current Session"}),i.jsx("p",{className:"text-gray-600 mt-1",children:e.title})]}),i.jsxs("div",{className:"text-right",children:[i.jsx("p",{className:"text-sm text-gray-600",children:"Total Admins"}),i.jsx("p",{className:"text-2xl font-bold text-[#2d4660]",children:l.length})]})]})}),i.jsxs("div",{className:"relative z-10 bg-white rounded-lg shadow-md overflow-hidden",children:[i.jsxs("div",{className:"p-6 border-b border-gray-200",children:[i.jsxs("h2",{className:"text-lg font-semibold text-[#2d4660]",children:["Session Admins (",l.length,")"]}),i.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Manage who can administer this voting session"})]}),i.jsx("div",{className:"overflow-x-auto",children:i.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[i.jsx("thead",{className:"bg-gray-50",children:i.jsxs("tr",{children:[i.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Name"}),i.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Email"}),i.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Added"}),i.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),i.jsx("tbody",{className:"relative z-10 bg-white divide-y divide-gray-200",children:l.map(F=>i.jsxs("tr",{className:"hover:bg-gray-50",children:[i.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:i.jsxs("div",{className:"flex items-center",children:[i.jsx(Xr,{className:"h-5 w-5 text-blue-500 mr-2"}),i.jsxs("span",{className:"text-sm font-medium text-gray-900",children:[F.user.name,F.user.id===(t==null?void 0:t.id)&&i.jsx("span",{className:"ml-2 text-xs text-gray-500",children:"(You)"})]})]})}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:i.jsxs("div",{className:"flex items-center text-sm text-gray-500",children:[i.jsx(hu,{className:"h-4 w-4 mr-2"}),F.user.email]})}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:le(F.created_at)}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:i.jsx("button",{onClick:()=>G(F.user_id),className:`text-red-600 hover:text-red-900 ${F.user.id===(t==null?void 0:t.id)||l.length===1?"opacity-50 cursor-not-allowed":""}`,disabled:F.user.id===(t==null?void 0:t.id)||l.length===1,title:F.user.id===(t==null?void 0:t.id)?"You cannot remove yourself":l.length===1?"Cannot remove the last admin":"Remove admin",children:i.jsx(ha,{className:"h-5 w-5"})})})]},F.id))})]})})]}),i.jsx("div",{className:"relative z-10 mt-6 bg-blue-50 border border-blue-200 rounded-lg p-4",children:i.jsxs("div",{className:"flex items-start",children:[i.jsx(Xr,{className:"h-5 w-5 text-blue-600 mr-3 mt-0.5"}),i.jsxs("div",{className:"text-sm text-blue-800",children:[i.jsx("p",{className:"font-medium mb-1",children:"Session Admin Permissions:"}),i.jsxs("ul",{className:"list-disc list-inside space-y-1",children:[i.jsx("li",{children:"Manage features and voting settings for this session"}),i.jsx("li",{children:"Add and remove stakeholders for this session"}),i.jsx("li",{children:"View voting results and analytics for this session"}),i.jsx("li",{children:"Add and remove other session admins"})]}),i.jsx("p",{className:"mt-2 text-xs italic",children:"Note: System Admins have full admin access to all sessions in the system."})]})]})}),f&&i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:i.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-md w-full",children:[i.jsxs("div",{className:"flex justify-between items-center mb-4",children:[i.jsx("h3",{className:"text-lg font-medium text-[#2d4660]",children:"Add Session Admin"}),i.jsx("button",{onClick:()=>{p(!1),v({email:""}),w({})},className:"text-gray-400 hover:text-gray-500",children:i.jsx(xs,{className:"h-5 w-5"})})]}),i.jsxs("form",{onSubmit:se,className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email Address *"}),i.jsx("input",{type:"email",value:x.email,onChange:F=>v(Y=>({...Y,email:F.target.value})),className:`w-full px-3 py-2 border rounded-md focus:ring-2 focus:ring-[#2d4660] focus:border-transparent ${b.email?"border-red-500":"border-gray-300"}`,placeholder:"admin@example.com"}),b.email&&i.jsxs("p",{className:"mt-1 text-sm text-red-600 flex items-center",children:[i.jsx(or,{className:"h-4 w-4 mr-1"}),b.email]})]}),b.submit&&i.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-3",children:i.jsxs("p",{className:"text-sm text-red-800 flex items-center",children:[i.jsx(or,{className:"h-4 w-4 mr-2"}),b.submit]})}),i.jsxs("div",{className:"flex justify-end space-x-2 pt-4",children:[i.jsx("button",{type:"button",onClick:()=>{p(!1),v({email:""}),w({})},className:"px-4 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50",disabled:j,children:"Cancel"}),i.jsx("button",{type:"submit",className:"px-4 py-2 bg-[#2d4660] text-white rounded-md hover:bg-[#1d3a53] disabled:opacity-50",disabled:j,children:j?"Adding...":"Add Admin"})]})]})]})})]}):null}function iee(){const{currentUser:e,sessions:t}=Ta(),r=ri(),[n,s]=g.useState([]),[a,l]=g.useState(!0),[u,d]=g.useState(!1);g.useEffect(()=>{m()},[t]);const m=async()=>{l(!0);try{const x=new Set;for(const v of t)(await qd(v.id)).forEach(w=>{w.user&&w.user.email&&x.add(w.user.email)});s(Array.from(x))}catch(x){console.error("Error loading admin emails:",x)}finally{l(!1)}},f=()=>{const x=encodeURIComponent(" Request: Add me to Feature Voting System"),v=encodeURIComponent(`Hi Team,

I tried to access the Feature Voting System but don't have admin permissions yet.

Could you please add me to the system so I can participate in voting?

My details:
Name: ${(e==null?void 0:e.name)||"Unknown"}
Email: ${(e==null?void 0:e.email)||"Unknown"}

Thanks!
${(e==null?void 0:e.name)||"A hopeful voter"} `),b=n.length>0?`mailto:${n.join(",")}?subject=${x}&body=${v}`:`mailto:?subject=${x}&body=${v}`;window.location.href=b,d(!0)},p=()=>{r("/login")};return a?i.jsx("div",{className:"min-h-screen w-full bg-gray-50 flex items-center justify-center",children:i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-[#2d4660] mx-auto mb-4"}),i.jsx("p",{className:"text-gray-600",children:"Loading..."})]})}):i.jsx("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 to-gray-100 flex items-center justify-center p-4",children:i.jsxs("div",{className:"max-w-md w-full",children:[i.jsx("div",{className:"text-center mb-8",children:i.jsx("img",{src:ji,alt:"New Millennium Building Systems Logo",className:"mx-auto cursor-pointer hover:opacity-80 transition-opacity",style:{height:"80px",width:"auto"},onClick:()=>r("/sessions")})}),i.jsxs("div",{className:"relative z-10 bg-white rounded-xl shadow-lg overflow-hidden",children:[i.jsxs("div",{className:"bg-gradient-to-r from-[#2d4660] to-[#1d3a53] p-6 text-center",children:[i.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-white/10 rounded-full mb-4",children:i.jsx(jF,{className:"h-8 w-8 text-white"})}),i.jsx("h1",{className:"text-2xl font-bold text-white mb-2",children:"Whoa There, Speedracer! "}),i.jsx("p",{className:"text-blue-100 text-sm",children:"You need access to the Feature Voting System"})]}),i.jsx("div",{className:"p-6",children:u?i.jsx(i.Fragment,{children:i.jsxs("div",{className:"text-center py-4",children:[i.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-green-100 rounded-full mb-4",children:i.jsx(kr,{className:"h-8 w-8 text-green-600"})}),i.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-2",children:"Email Sent! "}),i.jsx("p",{className:"text-gray-600 mb-6",children:"Your access request has been sent to the admin team. They'll get you set up soon!"}),i.jsxs("button",{onClick:p,className:"inline-flex items-center px-4 py-2 bg-[#2d4660] text-white rounded-lg hover:bg-[#1d3a53] transition-colors",children:[i.jsx(gk,{className:"h-4 w-4 mr-2"}),"Back to Login"]})]})}):i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"mb-6",children:[i.jsx("p",{className:"text-gray-600 mb-4",children:"Looks like you're trying to access the Feature Voting System, but you haven't been added yet."}),i.jsx("p",{className:"text-gray-600 mb-4",children:"No worries! Click the button below to send a quick message to the admins asking to be added."}),i.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:i.jsxs("div",{className:"flex items-start",children:[i.jsx(Ln,{className:"h-5 w-5 text-blue-600 mr-2 mt-0.5 flex-shrink-0"}),i.jsx("div",{className:"text-sm text-blue-800",children:n.length>0?i.jsxs(i.Fragment,{children:[i.jsx("p",{className:"font-medium mb-1",children:"Your message will be sent to:"}),i.jsx("p",{className:"text-xs",children:n.join(", ")})]}):i.jsx("p",{children:"Your message will help the admin team get you set up!"})})]})})]}),i.jsxs("div",{className:"space-y-3",children:[i.jsxs("button",{onClick:f,className:"w-full flex items-center justify-center px-4 py-3 bg-[#c59f2d] text-white rounded-lg hover:bg-[#a88a26] transition-colors font-medium",children:[i.jsx(hu,{className:"h-5 w-5 mr-2"}),"Request Access from Admins"]}),i.jsxs("button",{onClick:p,className:"w-full flex items-center justify-center px-4 py-3 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-colors",children:[i.jsx(gk,{className:"h-4 w-4 mr-2"}),"Back to Login"]})]})]})})]}),i.jsx("div",{className:"mt-6 text-center",children:i.jsx("p",{className:"text-sm text-gray-500",children:"Once you're added to the system, you'll be able to participate in voting sessions."})})]})})}function aee(){const{currentUser:e,setCurrentUser:t,setCurrentSession:r}=Ta(),n=ri(),s=async()=>{try{await Pe.auth.signOut()}catch{}try{r(null)}catch{}t(null);try{localStorage.removeItem("voting_system_current_session"),localStorage.removeItem("azureDevOpsAuthInProgress"),sessionStorage.removeItem("oauth_return_path"),sessionStorage.removeItem("oauth_action")}catch{}E(!1),n("/login",{replace:!0})},[a,l]=g.useState([]),[u,d]=g.useState(!0),[m,f]=g.useState(!1),[p,x]=g.useState({email:""}),[v,b]=g.useState({}),[w,j]=g.useState(!1),[_,E]=g.useState(!1),C=g.useRef(null),[I,A]=g.useState(!1),[$,B]=g.useState(!1);g.useEffect(()=>{if(!_)return;const le=F=>{C.current&&!C.current.contains(F.target)&&E(!1)};return document.addEventListener("mousedown",le),document.addEventListener("touchstart",le,{passive:!0}),()=>{document.removeEventListener("mousedown",le),document.removeEventListener("touchstart",le)}},[_]),g.useEffect(()=>{T()},[]),g.useEffect(()=>{(async()=>{if(!e)return;const F=await Ui(e.id);A(F);const{data:Y}=await Pe.from("session_admins").select("session_id").eq("user_id",e.id).limit(1);B(Y&&Y.length>0)})()},[e]);const T=async()=>{d(!0);try{let le=await Nx();le.length===0&&e&&(console.log("No system admins found. Adding current user as first system admin..."),await Vh(e.id),le=await Nx()),l(le)}catch(le){console.error("Error loading system admins:",le)}finally{d(!1)}},K=le=>/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(le),Q=async le=>{le.preventDefault();const F={};if(p.email.trim()?K(p.email)||(F.email="Invalid email address"):F.email="Email is required",a.some(Y=>Y.user.email.toLowerCase()===p.email.toLowerCase())&&(F.email="This user is already a system admin"),b(F),!(Object.keys(F).length>0)){j(!0);try{const Y=p.email.split("@")[0].replace(/\./g," "),J=await Pl(p.email,Y);await Vh(J.id);try{const V=window.location.pathname.startsWith("/feature-voting-app")?"/feature-voting-app":"",H=`${window.location.origin}${V}/login`;await Yo({to:p.email,subject:"You're a System Admin: Feature Voting System",text:`Hi,

You've been granted System Admin access to the Feature Voting System.

Login: ${H}

Best regards,
System`,html:`<p>Hi,</p><p>You've been granted <strong>System Admin</strong> access to the Feature Voting System.</p><p><a href="${H}">Login</a></p><p>Best regards,<br/>System</p>`})}catch{try{const V=window.location.pathname.startsWith("/feature-voting-app")?"/feature-voting-app":"",H=`${window.location.origin}${V}/login`,re=encodeURIComponent("You're a System Admin: Feature Voting System"),ie=encodeURIComponent(`Hi,

You've been granted System Admin access to the Feature Voting System.

To sign in, use this link:

${H}

Best regards,
System`);window.location.href=`mailto:${encodeURIComponent(p.email)}?subject=${re}&body=${ie}`}catch{}}await T(),x({email:""}),f(!1)}catch(Y){console.error("Error adding system admin:",Y),b({submit:"Failed to add system admin. Please try again."})}finally{j(!1)}}},se=async le=>{const F=a.reduce((Y,J)=>new Date(J.created_at)<new Date(Y.created_at)?J:Y);if(le===F.user_id){alert("Cannot remove the original system admin. This protects against accidentally locking everyone out of the system.");return}if(a.length===1){alert("Cannot remove the last system admin. The system must have at least one admin.");return}if(le===(e==null?void 0:e.id)){alert("You cannot remove yourself as a system admin.");return}if(confirm("Are you sure you want to remove this system admin?"))try{await _x(le),await T()}catch(Y){console.error("Error removing system admin:",Y),alert("Failed to remove system admin")}},G=le=>{const Y=le.split("T")[0].split(" ")[0].split("-");let J;if(Y.length===3){const V=parseInt(Y[0],10),H=parseInt(Y[1],10)-1,re=parseInt(Y[2],10);J=new Date(V,H,re);const ie=le.match(/T(\d{2}):(\d{2}):(\d{2})/);ie&&J.setHours(parseInt(ie[1],10),parseInt(ie[2],10),parseInt(ie[3],10))}else J=new Date(le);return J.toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})};return u?i.jsx("div",{className:"min-h-screen w-full bg-gray-50 flex items-center justify-center",children:i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-[#2d4660] mx-auto mb-4"}),i.jsx("p",{className:"text-gray-600",children:"Loading system admins..."})]})}):i.jsxs("div",{className:"container mx-auto p-4 max-w-6xl min-h-screen pb-8",children:[i.jsx("div",{className:"hidden md:flex md:justify-center mb-2",children:i.jsx("img",{src:ji,alt:"New Millennium Building Systems Logo",className:"-mt-4 cursor-pointer hover:opacity-80 transition-opacity",style:{height:"96px",width:"auto"},onClick:()=>n("/sessions")})}),i.jsxs("div",{className:"flex justify-between items-center mb-6",children:[i.jsxs("div",{className:"flex items-center",children:[i.jsx("img",{src:$a,alt:"New Millennium Building Systems Logo",className:"mr-4 md:hidden",style:{width:"40px",height:"40px",objectFit:"contain"}}),i.jsx("button",{onClick:()=>n("/sessions"),className:"mr-2 p-1 rounded-full hover:bg-gray-200 cursor-pointer",children:i.jsx(Xm,{className:"h-6 w-6"})}),i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsx("h1",{className:"text-2xl font-bold text-[#2d4660] md:text-3xl",children:"System Admins"}),e&&i.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:[e.name,I&&i.jsx("span",{className:"ml-2 inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium bg-[#C89212] text-white",children:"System Admin"}),!I&&$&&i.jsx("span",{className:"ml-2 inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium bg-[#576C71] text-white",children:"Session Admin"})]})]})]}),i.jsxs("div",{ref:C,className:"relative z-40",children:[i.jsxs("div",{className:"hidden md:flex space-x-2",children:[i.jsxs("button",{onClick:()=>n("/sessions"),className:"flex items-center px-4 py-2 bg-[#4f6d8e] text-white rounded-lg hover:bg-[#3d5670] transition-colors",children:[i.jsx(ns,{className:"h-4 w-4 mr-2"}),"My Sessions"]}),i.jsxs("button",{onClick:()=>f(!0),className:"flex items-center px-4 py-2 bg-[#c59f2d] text-white rounded-lg hover:bg-[#a88a26] transition-colors",children:[i.jsx(Rl,{className:"h-4 w-4 mr-2"}),"Add System Admin"]}),i.jsxs("button",{onClick:s,className:"flex items-center px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-colors",children:[i.jsx(ss,{className:"h-4 w-4 mr-2"}),"Logout"]})]}),i.jsx("div",{className:"flex md:hidden",children:i.jsx("button",{onClick:()=>E(!_),className:"p-2 rounded-md border border-gray-200 bg-white shadow-sm","aria-label":"Open menu",children:i.jsx(pi,{className:"h-5 w-5 text-gray-700"})})}),_&&i.jsx("div",{className:"absolute right-0 mt-2 w-56 bg-white border border-gray-200 rounded-lg shadow-lg md:hidden z-50",children:i.jsxs("div",{className:"py-1",children:[i.jsxs("button",{onClick:()=>{E(!1),n("/sessions")},className:"w-full px-3 py-2 flex items-center text-left hover:bg-gray-50",children:[i.jsx(ns,{className:"h-4 w-4 mr-2 text-gray-700"}),"My Sessions"]}),i.jsxs("button",{onClick:()=>{E(!1),f(!0)},className:"w-full px-3 py-2 flex items-center text-left hover:bg-gray-50",children:[i.jsx(Rl,{className:"h-4 w-4 mr-2 text-gray-700"}),"Add System Admin"]}),i.jsxs("button",{onClick:()=>{E(!1),s()},className:"w-full px-3 py-2 flex items-center text-left hover:bg-gray-50",children:[i.jsx(ss,{className:"h-4 w-4 mr-2 text-gray-700"}),"Logout"]})]})})]})]}),i.jsx("div",{className:"relative z-10 bg-gradient-to-r from-[#2d4660] to-[#1d3a53] rounded-lg shadow-md p-6 mb-6 text-white",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center",children:[i.jsx(En,{className:"h-8 w-8 mr-3"}),i.jsxs("div",{children:[i.jsx("h2",{className:"text-xl font-semibold",children:"Feature Voting System"}),i.jsx("p",{className:"text-blue-100 mt-1",children:"Global administrator management"})]})]}),i.jsxs("div",{className:"text-right",children:[i.jsx("p",{className:"text-sm text-blue-100",children:"Total System Admins"}),i.jsx("p",{className:"text-3xl font-bold",children:a.length})]})]})}),i.jsxs("div",{className:"relative z-10 bg-white rounded-lg shadow-md overflow-hidden",children:[i.jsxs("div",{className:"p-6 border-b border-gray-200",children:[i.jsxs("h2",{className:"text-lg font-semibold text-[#2d4660]",children:["System Administrators (",a.length,")"]}),i.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Manage who has full access to the Feature Voting System"})]}),i.jsx("div",{className:"overflow-x-auto",children:i.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[i.jsx("thead",{className:"bg-gray-50",children:i.jsxs("tr",{children:[i.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Name"}),i.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Email"}),i.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Added"}),i.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),i.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:(()=>{const le=a.reduce((F,Y)=>new Date(Y.created_at)<new Date(F.created_at)?Y:F);return a.map(F=>{const Y=F.user_id===le.user_id;return i.jsxs("tr",{className:"hover:bg-gray-50",children:[i.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:i.jsxs("div",{className:"flex items-center",children:[i.jsx(En,{className:"h-5 w-5 text-[#c59f2d] mr-2"}),i.jsxs("span",{className:"text-sm font-medium text-gray-900",children:[F.user.name,F.user.id===(e==null?void 0:e.id)&&i.jsx("span",{className:"ml-2 text-xs text-gray-500",children:"(You)"}),Y&&i.jsx("span",{className:"ml-2 text-xs text-[#c59f2d] font-semibold",children:"(Original Admin)"})]})]})}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:i.jsxs("div",{className:"flex items-center text-sm text-gray-500",children:[i.jsx(hu,{className:"h-4 w-4 mr-2"}),F.user.email]})}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:G(F.created_at)}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:i.jsx("button",{onClick:()=>se(F.user_id),className:`text-red-600 hover:text-red-900 ${F.user.id===(e==null?void 0:e.id)||a.length===1||Y?"opacity-50 cursor-not-allowed":""}`,disabled:F.user.id===(e==null?void 0:e.id)||a.length===1||Y,title:Y?"Cannot remove the original system admin":F.user.id===(e==null?void 0:e.id)?"You cannot remove yourself":a.length===1?"Cannot remove the last system admin":"Remove system admin",children:i.jsx(ha,{className:"h-5 w-5"})})})]},F.id)})})()})]})})]}),i.jsx("div",{className:"relative z-10 mt-6 bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:i.jsxs("div",{className:"flex items-start",children:[i.jsx(En,{className:"h-5 w-5 text-yellow-600 mr-3 mt-0.5"}),i.jsxs("div",{className:"text-sm text-yellow-800",children:[i.jsx("p",{className:"font-medium mb-1",children:"System Admin Permissions:"}),i.jsxs("ul",{className:"list-disc list-inside space-y-1",children:[i.jsx("li",{children:"Full access to all voting sessions across the system"}),i.jsx("li",{children:"Create and manage any voting session"}),i.jsx("li",{children:"Add and remove other system administrators"}),i.jsx("li",{children:"Manage session admins and stakeholders for any session"}),i.jsx("li",{children:"View all results and analytics system-wide"})]}),i.jsx("p",{className:"mt-3 text-xs font-medium",children:"Note: The original system admin (first person to access this page) cannot be removed to prevent system lockout."})]})]})}),m&&i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:i.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-md w-full",children:[i.jsxs("div",{className:"flex justify-between items-center mb-4",children:[i.jsx("h3",{className:"text-lg font-medium text-[#2d4660]",children:"Add System Admin"}),i.jsx("button",{onClick:()=>{f(!1),x({email:""}),b({})},className:"text-gray-400 hover:text-gray-500",children:i.jsx(xs,{className:"h-5 w-5"})})]}),i.jsxs("form",{onSubmit:Q,className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email Address *"}),i.jsx("input",{type:"email",value:p.email,onChange:le=>x(F=>({...F,email:le.target.value})),className:`w-full px-3 py-2 border rounded-md focus:ring-2 focus:ring-[#2d4660] focus:border-transparent ${v.email?"border-red-500":"border-gray-300"}`,placeholder:"admin@example.com"}),v.email&&i.jsxs("p",{className:"mt-1 text-sm text-red-600 flex items-center",children:[i.jsx(or,{className:"h-4 w-4 mr-1"}),v.email]})]}),v.submit&&i.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-3",children:i.jsxs("p",{className:"text-sm text-red-800 flex items-center",children:[i.jsx(or,{className:"h-4 w-4 mr-2"}),v.submit]})}),i.jsxs("div",{className:"flex justify-end space-x-2 pt-4",children:[i.jsx("button",{type:"button",onClick:()=>{f(!1),x({email:""}),b({})},className:"px-4 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50",disabled:w,children:"Cancel"}),i.jsx("button",{type:"submit",className:"px-4 py-2 bg-[#2d4660] text-white rounded-md hover:bg-[#1d3a53] disabled:opacity-50",disabled:w,children:w?"Adding...":"Add System Admin"})]})]})]})})]})}async function oee(e){var t,r,n,s;if(!e||e.trim().length<2)return[];try{const{data:{session:a},error:l}=await Pe.auth.getSession();if(l)throw console.error("Error getting session:",l),new Error("Unable to access your session. Please sign in again.");if(!a)throw console.warn("No session available for Azure AD search"),new Error("You must be signed in to search company users.");if(!(((r=(t=a.user)==null?void 0:t.app_metadata)==null?void 0:r.provider)==="azure"||((s=(n=a.user)==null?void 0:n.identities)==null?void 0:s.some(w=>w.provider==="azure"))))throw console.warn("User not signed in with Azure AD"),new Error("You must sign in with Microsoft to search company users.");const d=a.provider_token||a.access_token;if(!d)throw console.warn("No provider token available for Azure AD search"),new Error("Unable to access Microsoft Graph. Please sign out and sign in again with Microsoft.");const m=e.trim(),f=`startswith(displayName,'${m}') or startswith(mail,'${m}') or startswith(userPrincipalName,'${m}') or startswith(givenName,'${m}') or startswith(surname,'${m}')`,p=`https://graph.microsoft.com/v1.0/users?$filter=${encodeURIComponent(f)}&$select=id,displayName,mail,userPrincipalName,givenName,surname,jobTitle,department&$top=20`,x=await fetch(p,{headers:{Authorization:`Bearer ${d}`,"Content-Type":"application/json"}});if(!x.ok){const w=await x.text();let j="";throw x.status===401?(j="Authentication failed. Please sign out and sign in again with Microsoft.",console.warn("Azure AD search 401:",w)):x.status===403?(j='Your Azure AD app needs "User.ReadBasic.All" or "User.Read.All" permission to search users. An administrator must grant this permission in Azure Portal.',console.warn("Azure AD search 403 - Insufficient permissions:",w)):x.status===400?(j="Invalid search query. Please try a different search term.",console.warn("Azure AD search 400:",w)):(j=`Unable to search users (${x.status}). Please try again.`,console.error("Azure AD search error:",x.status,w)),new Error(j)}return((await x.json()).value||[]).map(w=>({id:w.id,displayName:w.displayName||"",mail:w.mail||w.userPrincipalName||"",userPrincipalName:w.userPrincipalName||"",givenName:w.givenName,surname:w.surname,jobTitle:w.jobTitle,department:w.department})).sort((w,j)=>{const _=w.displayName.toLowerCase(),E=j.displayName.toLowerCase();return _.localeCompare(E)})}catch(a){throw console.error("Error searching Azure AD users:",a),a}}const ld=()=>({searchTerm:"",results:[],isSearching:!1,showResults:!1,error:""});function Rh({products:e,value:t,onChange:r,label:n,error:s,onProductChange:a}){const[l,u]=g.useState(!1),d=g.useRef(null);g.useEffect(()=>{function p(x){d.current&&!d.current.contains(x.target)&&u(!1)}return document.addEventListener("mousedown",p),()=>document.removeEventListener("mousedown",p)},[]);const m=e.find(p=>p.id===t),f=m?Ur(m.name,m.color_hex??null):null;return i.jsxs("div",{ref:d,className:"relative overflow-visible",children:[n&&i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:n}),i.jsxs("div",{onClick:()=>u(!l),className:`w-full px-3 py-2 border rounded-md bg-white cursor-pointer flex items-center justify-between hover:border-gray-400 ${s?"border-red-500":"border-gray-300"}`,children:[i.jsxs("div",{className:"flex items-center gap-2 flex-1 min-w-0",children:[m&&f&&i.jsx("div",{className:"w-4 h-4 rounded flex-shrink-0",style:{backgroundColor:f.background}}),i.jsx("span",{className:`text-sm truncate ${t?"text-gray-900":"text-gray-400"}`,children:m?m.name:"Select a Product"})]}),i.jsx(rs,{className:`h-4 w-4 text-gray-400 transition-transform flex-shrink-0 ${l?"transform rotate-180":""}`})]}),l&&i.jsx("div",{className:"absolute z-[100] w-full mt-1 bg-white border border-gray-300 rounded-md shadow-lg max-h-60 overflow-y-auto",children:e.length===0?i.jsx("div",{className:"px-3 py-2 text-sm text-gray-500 text-center",children:"No products available"}):e.map(p=>{const x=Ur(p.name,p.color_hex??null),v=t===p.id;return i.jsxs("div",{onClick:()=>{r(p.id),u(!1),a&&a()},className:`px-3 py-2 cursor-pointer hover:bg-gray-50 flex items-center gap-2 ${v?"bg-gray-50":""}`,children:[i.jsx("div",{className:"w-4 h-4 rounded flex-shrink-0",style:{backgroundColor:x.background}}),i.jsx("span",{className:"text-sm text-gray-900 flex-1",children:p.name}),v&&i.jsx(kr,{className:"h-4 w-4 text-gray-400 flex-shrink-0"})]},p.id)})})]})}function lee({products:e,value:t,onChange:r}){const[n,s]=g.useState(!1),a=g.useRef(null),l=g.useRef(null),[u,d]=g.useState({top:0,left:0,width:0});g.useEffect(()=>{function p(x){a.current&&!a.current.contains(x.target)&&l.current&&!l.current.contains(x.target)&&s(!1)}return n&&(document.addEventListener("mousedown",p),l.current&&requestAnimationFrame(()=>{if(l.current){const x=l.current.getBoundingClientRect();d({top:x.bottom+window.scrollY+4,left:x.left+window.scrollX,width:x.width})}})),()=>document.removeEventListener("mousedown",p)},[n]);const m=e.find(p=>p.id===t),f=n?i.jsxs("div",{ref:a,className:"fixed bg-white border border-gray-300 rounded-lg shadow-xl max-h-60 overflow-y-auto",style:{top:`${u.top}px`,left:`${u.left}px`,width:"300px",zIndex:99999},children:[i.jsxs("div",{onClick:()=>{r(""),s(!1)},className:`px-4 py-2.5 cursor-pointer hover:bg-gray-50 flex items-center gap-2 border-b border-gray-100 ${t?"":"bg-gray-50"}`,children:[i.jsx("span",{className:"text-base text-gray-900",children:"All Products"}),!t&&i.jsx(kr,{className:"h-4 w-4 text-gray-400 flex-shrink-0"})]}),e.length===0?i.jsx("div",{className:"px-4 py-2.5 text-base text-gray-500 text-center",children:"Loading products..."}):e.map(p=>{const x=Ur(p.name,p.color_hex??null),v=t===p.id;return i.jsxs("div",{onClick:()=>{r(p.id),s(!1)},className:`px-4 py-2.5 cursor-pointer hover:bg-gray-50 flex items-center gap-2 ${v?"bg-blue-50":""}`,children:[i.jsx("span",{className:"inline-block w-3 h-3 rounded-sm flex-shrink-0",style:{backgroundColor:x.background}}),i.jsx("span",{className:"text-base text-gray-900 flex-1",children:p.name}),v&&i.jsx(kr,{className:"h-4 w-4 text-blue-600 flex-shrink-0"})]},p.id)})]}):null;return i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"relative min-w-[200px]",children:i.jsxs("div",{ref:l,onClick:()=>s(!n),className:"px-4 py-2.5 md:py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#2d4660] focus:border-transparent text-base bg-white cursor-pointer flex items-center justify-between hover:bg-gray-50",children:[i.jsx("span",{className:`text-base truncate ${t?"text-gray-900":"text-gray-500"}`,children:m?m.name:"All Products"}),i.jsx(rs,{className:"h-4 w-4 text-gray-400 flex-shrink-0"})]})}),n&&Fv.createPortal(f,document.body)]})}function cee({products:e,sessions:t,selectedProductId:r,onProductChange:n,useAllSessions:s,onToggleAllSessions:a,selectedSessionIds:l,onSessionToggle:u,getSessionStatus:d,formatSessionDateRange:m,filterSessions:f}){const p=r?f(t,r):[];return i.jsxs("div",{className:"space-y-3 overflow-visible",children:[i.jsx("div",{className:"overflow-visible",children:i.jsx(Rh,{products:e,value:r,onChange:x=>{n(x),a(!0)},label:"Product *"})}),r&&i.jsxs("div",{className:"space-y-3",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Session Selection *"}),i.jsxs("div",{className:"inline-flex items-center bg-gray-100 rounded-lg p-1",children:[i.jsx("button",{type:"button",onClick:()=>a(!1),className:`px-4 py-2 rounded-md text-sm font-medium transition-colors flex items-center ${s?"text-gray-600 hover:text-gray-900":"bg-white text-[#2d4660] shadow-sm"}`,children:"Select Sessions"}),i.jsx("button",{type:"button",onClick:()=>{a(!0)},className:`px-4 py-2 rounded-md text-sm font-medium transition-colors flex items-center ${s?"bg-white text-[#2d4660] shadow-sm":"text-gray-600 hover:text-gray-900"}`,children:"All Sessions"})]}),s&&i.jsx("p",{className:"mt-2 text-xs text-gray-500",children:"User will be added to all current and future sessions for this product"})]}),!s&&i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Sessions * (Current and Future)"}),p.length===0?i.jsx("p",{className:"text-sm text-gray-500",children:"No current or future sessions found for this product."}):i.jsx("div",{className:"max-h-48 overflow-y-auto border border-gray-300 rounded-md p-2",children:p.map(x=>i.jsxs("label",{className:"flex items-start px-3 py-2 hover:bg-gray-50 cursor-pointer border-b border-gray-100 last:border-b-0",children:[i.jsx("input",{type:"checkbox",checked:l.includes(x.id),onChange:()=>u(x.id),className:"w-4 h-4 border-gray-300 rounded focus:ring-[#2D4660] accent-green-600 mt-1",style:{accentColor:"#16a34a"}}),i.jsxs("div",{className:"ml-3 flex-1",children:[i.jsx("div",{className:"text-sm font-medium text-gray-900",children:x.title||"Unnamed Session"}),i.jsx("div",{className:"text-xs text-gray-500 mt-0.5",children:m(x)}),i.jsx("div",{className:"text-xs mt-0.5",children:i.jsx("span",{className:`font-medium ${d(x).color}`,children:d(x).text})})]})]},x.id))})]})]})]})}function uee(){var _i,L;const{currentUser:e,setCurrentUser:t,setCurrentSession:r,currentSession:n}=Ta(),s=ri(),[a]=Mv(),[l,u]=g.useState([]),[d,m]=g.useState([]),[f,p]=g.useState(!0),[x,v]=g.useState(""),[b,w]=g.useState("all"),[j,_]=g.useState(!1),[E,C]=g.useState(null),[I,A]=g.useState({}),[$,B]=g.useState(null),[T,K]=g.useState(null),[Q,se]=g.useState(null),G=k=>{const R=new Date,he=k.filter(me=>{const ve=me.start_date?new Date(me.start_date):null,P=me.end_date?new Date(me.end_date):null;return ve&&R<ve||P&&R>P?!1:!!(ve&&R>=ve&&(!P||R<=P))});return he.length===0?null:he.sort((me,ve)=>{const P=me.start_date?new Date(me.start_date).getTime():0;return(ve.start_date?new Date(ve.start_date).getTime():0)-P})[0]},le=new Set(["spencer.faull@newmill.com","chris.rodes@newmill.com","dave.hoffman@newmill.com"]),F=g.useRef(null),Y=g.useRef({}),J=g.useRef(null),V=g.useRef(!1),[H,re]=g.useState(!1),[ie,M]=g.useState(!1),[Z,fe]=g.useState([]),[ye,Le]=g.useState("system-admin"),[je,Me]=g.useState(!0),[Se,z]=g.useState(!1),[ue,de]=g.useState(null),[ee,Ye]=g.useState(null),[Oe,rt]=g.useState([]),[Nt,vt]=g.useState({adminSessions:[],stakeholderSessions:[]}),[ot,rr]=g.useState(""),[U,q]=g.useState(!0),[ne,Ne]=g.useState([]),[Ie,Ce]=g.useState(!1),[Te,dt]=g.useState(null),[Mt,qe]=g.useState(!1),[bt,jt]=g.useState(null),[Be,He]=g.useState(new Set),[Ze,ft]=g.useState(new Map),[nt,Kt]=g.useState(!1),[dr,Pr]=g.useState(!1),[tt,Bt]=g.useState({name:"",email:"",isSystemAdmin:!1,sessionAdminIds:[],stakeholderSessionIds:[]}),[qt,Wt]=g.useState(ld()),[Qt,sr]=g.useState(!0),[Mr,Zt]=g.useState(null),[lr,mr]=g.useState({sessionAdmin:!1,stakeholder:!1}),[ir,qn]=g.useState("User Management"),[Vt,ls]=g.useState([]),[qr,vr]=g.useState([]),[cr,Hr]=g.useState(""),[Kr,Hn]=g.useState([]),[jr,Ir]=g.useState(""),[In,Kn]=g.useState([]),[Vi,sn]=g.useState(!1),[bs,Us]=g.useState(null),[_r,fn]=g.useState(!0),[Cr,nr]=g.useState(!0),[ur,Gr]=g.useState(""),ws=!!jr&&(Cr||tt.sessionAdminIds.length>0),Tn=!!cr&&(_r||tt.stakeholderSessionIds.length>0),ae=((_i=Vt.find(k=>k.id===jr))==null?void 0:_i.name)||"",_e=((L=Vt.find(k=>k.id===cr))==null?void 0:L.name)||"",$e=k=>{const R=k.map(me=>Oe.find(ve=>ve.id===me)).filter(me=>!!me);return R.length===0?"":R.map(me=>me.title||"Unnamed Session").join(", ")},ze=ws?`${ae||"Selected Product"}  ${Cr?"All Sessions":$e(tt.sessionAdminIds)||"Sessions selected"}`:"",Xe=Tn?`${_e||"Selected Product"}  ${_r?"All Sessions":$e(tt.stakeholderSessionIds)||"Sessions selected"}`:"",Fe=(()=>{const k=[];return tt.isSystemAdmin&&k.push("System Admin"),ws&&k.push("Session Admin"),Tn&&k.push("Stakeholder"),k})(),Yt=k=>{if(Fe.length===0)return k?"Creating User...":"Create User";const R=Fe.join(" & ");return k?`Adding ${R}...`:`Add ${R}`},[Dt,$t]=g.useState(!1),[Ee,Je]=g.useState(null),[Jt,Xt]=g.useState(""),[yt,br]=g.useState(""),[an,cs]=g.useState(!1),ar=async k=>{k&&(k.preventDefault(),k.stopPropagation());try{await Pe.auth.signOut()}catch(R){console.error("Error signing out:",R)}try{r(null)}catch(R){console.error("Error clearing session:",R)}t(null);try{localStorage.removeItem("voting_system_current_session"),localStorage.removeItem("voting_system_user"),localStorage.removeItem("azureDevOpsAuthInProgress"),sessionStorage.removeItem("oauth_return_path"),sessionStorage.removeItem("oauth_action"),sessionStorage.removeItem("oauth_error")}catch(R){console.error("Error clearing storage:",R)}_(!1),s("/login",{replace:!0})};g.useEffect(()=>{if(!j)return;const k=R=>{F.current&&!F.current.contains(R.target)&&_(!1)};return document.addEventListener("mousedown",k),document.addEventListener("touchstart",k,{passive:!0}),()=>{document.removeEventListener("mousedown",k),document.removeEventListener("touchstart",k)}},[j]),g.useEffect(()=>{if(!E){A({});return}const R=setTimeout(()=>{const he=Y.current[E];he&&requestAnimationFrame(()=>{const me=he.getBoundingClientRect();window.innerWidth<768?A({[E]:{top:`${me.bottom+4}px`,right:`${window.innerWidth-me.right+4}px`,left:"auto"}}):A({[E]:{}})})},0);return()=>clearTimeout(R)},[E]),g.useEffect(()=>{if(!E)return;const k=R=>{const he=Y.current[E];he&&!he.contains(R.target)&&C(null)};return document.addEventListener("mousedown",k),document.addEventListener("touchstart",k,{passive:!0}),()=>{document.removeEventListener("mousedown",k),document.removeEventListener("touchstart",k)}},[E]);const en=g.useCallback(async()=>{try{const k=await Bh();vr(k);const R=new Date,he=k.filter(me=>Oe.some(ve=>ve.product_id!==me.id?!1:new Date(ve.end_date)>=R));ls(he)}catch(k){console.error("Error loading products:",k)}},[Oe]),xr=g.useCallback(async()=>{try{const k=await Bh();console.log("Loaded products:",k),vr(k)}catch(k){console.error("Error loading all products:",k),vr([])}},[]),qi=()=>{Ir(""),Kn([]),Bt(k=>({...k,sessionAdminIds:[]})),nr(!0),mr(k=>({...k,sessionAdmin:!1}))},Ft=()=>{Hr(""),Bt(k=>({...k,stakeholderSessionIds:[]})),fn(!0),mr(k=>({...k,stakeholder:!1}))},Bs=k=>{if(!k){Hn([]);return}const R=new Date,he=Oe.filter(me=>me.product_id!==k?!1:new Date(me.end_date)>=R);Hn(he)};g.useEffect(()=>{cr?Bs(cr):Hn([])},[cr,Oe]);const si=k=>{if(!k){Kn([]);return}const R=new Date,he=Oe.filter(me=>me.product_id!==k?!1:new Date(me.end_date)>=R);Kn(he)};g.useEffect(()=>{jr?si(jr):Kn([])},[jr,Oe]),g.useEffect(()=>{const k=a.get("filter");k==="session-admin"?(qn("Session Admin Management"),w("session-admin")):k==="stakeholder"?(qn("Stakeholder Management"),w("stakeholder")):qn("User Management")},[a]);const hn=async k=>{p(!0);try{const[R,he,me]=await Promise.all([bx(),Pe.from("session_admins").select("user_id, session_id, created_at").then(({data:Ae,error:ge})=>ge?(console.error("Error fetching all admin relations:",ge),[]):Ae||[]),Pe.from("session_stakeholders").select("user_email, session_id, created_at").then(({data:Ae,error:ge})=>ge?(console.error("Error fetching all stakeholder relations:",ge),[]):Ae||[])]),ve=new Map;he.forEach(Ae=>{ve.has(Ae.user_id)||ve.set(Ae.user_id,[]),ve.get(Ae.user_id).push({session_id:Ae.session_id,created_at:Ae.created_at})});const P=new Map;me.forEach(Ae=>{var be;const ge=((be=Ae.user_email)==null?void 0:be.toLowerCase())||"";ge&&(P.has(ge)||P.set(ge,[]),P.get(ge).push({session_id:Ae.session_id,created_at:Ae.created_at}))});const D=new Map(k.map(Ae=>[Ae.id,Ae])),X=await Promise.all(R.map(async Ae=>{const ge=await g$(Ae.id),be=[],mt=[];(ve.get(Ae.id)||[]).forEach(Ct=>{const De=D.get(Ct.session_id);De&&be.push({...De,assignedAt:Ct.created_at,assignedBy:"System",assignedByName:"System"})});const lt=Ae.email.toLowerCase();return(P.get(lt)||[]).forEach(Ct=>{const De=D.get(Ct.session_id);De&&mt.push({...De,assignedAt:Ct.created_at,assignedBy:"System",assignedByName:"System"})}),{...Ae,roles:ge,adminInSessions:be,stakeholderInSessions:mt}}));u(X);const ce=new Map;X.forEach(Ae=>{const ge=Ae.email.toLowerCase().trim();ce.has(ge)||ce.set(ge,[]),ce.get(ge).push(Ae.id)});const Re=new Map;ce.forEach((Ae,ge)=>{Ae.length>1&&Re.set(ge,Ae)}),ft(Re)}catch(R){console.error("Error loading users:",R)}finally{p(!1)}},Hi=async()=>{if(e){Me(!0);try{const k=await Go(),[R,he]=await Promise.all([Ui(e.id),Pe.from("session_admins").select("session_id").eq("user_id",e.id).then(({data:ve,error:P})=>P?(console.error("Error fetching admin sessions:",P),[]):(ve||[]).map(D=>D.session_id))]);re(R);const me=he;if(R)rt(k),await Promise.all([Ki(),hn(k)]);else{const ve=me.length>0;if(M(ve),fe(me),!ve){s("/sessions");return}const P=k.filter(D=>me.includes(D.id));rt(P),Le("session-admin"),await hn(P)}await en()}catch(k){console.error("Error checking access:",k),s("/sessions")}finally{Me(!1)}}},Ki=async()=>{try{const k=["chris.rodes@newmill.com","spencer.faull@newmill.com"],R=new Set,he=await Nx();if(he.length>0){const ve=he.reduce((P,D)=>new Date(D.created_at)<new Date(P.created_at)?D:P);jt(ve.user_id),R.add(ve.user_id)}(await bx()).forEach(ve=>{k.includes(ve.email.toLowerCase())&&R.add(ve.id)}),He(R)}catch(k){console.error("Error loading protected accounts:",k)}},js=k=>{if(k.id===bt)return"Original Admin";const R=k.email.toLowerCase();return R==="chris.rodes@newmill.com"?"Manager":R==="spencer.faull@newmill.com"?"Portfolio Owner":null},ii=k=>{const R=k.email.toLowerCase().trim(),he=Ze.get(R);return he?he.length>1:!1},Gn=k=>{const R=k.email.toLowerCase().trim(),he=Ze.get(R);return he?he.length:1},tn=()=>{let k=[...l];if(ye==="session-admin"&&Oe.length>0){const R=new Set(Oe.map(he=>he.id));k=k.filter(he=>{var P,D;if(he.id===(e==null?void 0:e.id))return!0;const me=(P=he.adminInSessions)==null?void 0:P.some(X=>X&&R.has(X.id)),ve=(D=he.stakeholderInSessions)==null?void 0:D.some(X=>X&&R.has(X.id));return!!me||!!ve})}if(x.trim()){const R=x.toLowerCase();k=k.filter(he=>he.name.toLowerCase().includes(R)||he.email.toLowerCase().includes(R))}(b!=="all"||ur)&&(k=k.filter(R=>{const he=[...R.adminInSessions||[],...R.stakeholderInSessions||[]];let me=he;if(ur&&(me=he.filter(ve=>(ve.product_id||ve.productId)===ur)),ur&&me.length===0)return!1;if(b!=="all")switch(b){case"system-admin":return R.roles.isSystemAdmin;case"session-admin":return ur?me.some(ve=>{var P;return(P=R.adminInSessions)==null?void 0:P.some(D=>D.id===ve.id)}):R.roles.sessionAdminCount>0;case"stakeholder":return ur?me.some(ve=>{var P;return(P=R.stakeholderInSessions)==null?void 0:P.some(D=>D.id===ve.id)}):R.roles.stakeholderSessionCount>0;case"none":return!R.roles.isSystemAdmin&&R.roles.sessionAdminCount===0&&R.roles.stakeholderSessionCount===0;default:return!0}return!0})),m(k)},us=k=>{const R=[...k.adminInSessions||[],...k.stakeholderInSessions||[]],he=new Set;return R.forEach(me=>{const ve=me.product_id||me.productId;ve&&he.add(ve)}),qr.filter(me=>he.has(me.id))};g.useEffect(()=>{e&&xr()},[e,xr]),g.useEffect(()=>{if(!e){s("/login");return}if(!V.current)return V.current=!0,Hi(),()=>{}},[e]),g.useEffect(()=>{const k=a.get("filter");k&&["system-admin","session-admin","stakeholder","none"].includes(k)&&w(k);const R=a.get("product");R&&Gr(R)},[a]),g.useEffect(()=>{a.get("filter")||(ye==="session-admin"?(b==="system-admin"||b==="session-admin"||b==="all")&&w("stakeholder"):ye==="system-admin"&&(a.get("filter")||w("all")))},[ye,a,b]);const Ss=g.useCallback(()=>{tn()},[l,x,b,ur,ye,Oe,e]);g.useEffect(()=>{Ss()},[Ss]),g.useEffect(()=>{function k(R){J.current&&!J.current.contains(R.target)&&Wt(he=>({...he,showResults:!1}))}return document.addEventListener("mousedown",k),()=>document.removeEventListener("mousedown",k)},[]);const Fr=async k=>{try{const R=[],he=[];for(const me of Oe)await Hm(k,me.id)&&R.push(me.id),await w$(k,me.id)&&he.push(me.id);vt({adminSessions:R,stakeholderSessions:he})}catch(R){console.error("Error loading user session memberships:",R)}},mn=async(k,R)=>{Ye(k),de(R),rr(""),q(!0),Ne([]),z(!0),C(null),Vt.length===0&&await en(),await Fr(k.id)},on=()=>{z(!1),de(null),Ye(null),rr(""),q(!0),Ne([]),vt({adminSessions:[],stakeholderSessions:[]})},Gi=(k,R)=>{if(!R)return[];const he=new Date;return k.filter(me=>me.product_id!==R?!1:new Date(me.end_date)>=he)},Ps=async()=>{if(!ee||!ue)return;if(!ot){alert("Please select a product first.");return}let k=[];if(U)k=Gi(Yn(ue),ot).map(he=>he.id);else{if(ne.length===0){alert("Please select at least one session.");return}k=ne}if(k.length===0){alert("No sessions available for this product.");return}try{for(const R of k)ue==="session-admin"?await Dl(R,ee.id):ue==="stakeholder"?await AS(R,ee.email,ee.name):ue==="remove-stakeholder"&&await kx(R,ee.email);on(),await hn(Oe)}catch(R){console.error("Error modifying user session role:",R);const he=(R==null?void 0:R.message)||(R==null?void 0:R.toString())||"Unknown error";console.error("Full error details:",R),alert(`Failed to ${ue==="remove-stakeholder"?"remove stakeholder from":"add user to"} session(s).

Error: ${he}

Please check the console for more details.`)}},Os=async(k,R)=>{if(C(null),!!confirm(`Are you sure you want to ${R?"remove":"grant"} system admin access for this user?`))try{R?await _x(k):await Vh(k),await hn(Oe)}catch(he){console.error("Error toggling system admin:",he),alert("Failed to update system admin status. Please try again.")}},Yi=async(k,R)=>{C(null);const he=ye==="session-admin"?`Are you sure you want to remove ${R} from all sessions you manage? This will remove them as a stakeholder or session admin from your sessions only.`:`Are you sure you want to remove all roles from ${R}? This will remove them from all sessions and revoke system admin access.`;if(confirm(he))try{if(ye==="system-admin"&&await _x(k),ye==="session-admin"){for(const me of Z)try{await Sx(me,k)}catch(ve){console.error(`Error removing session admin from ${me}:`,ve)}for(const me of Z)try{await OS(me,k)}catch(ve){console.error(`Error removing stakeholder from ${me}:`,ve)}}else for(const me of Oe)try{await Sx(me.id,k),await OS(me.id,k)}catch{}await hn(Oe)}catch(me){console.error("Error removing roles:",me),alert("Failed to remove roles. Please try again.")}},wo=async(k,R)=>{const he=l.find(me=>me.id===k);if(he){if(ye==="session-admin"){if(he.roles.stakeholderSessionCount===0){alert("This user is not a stakeholder in any sessions.");return}const me=`Are you sure you want to remove ${R} as a stakeholder from all sessions you manage?`;if(!confirm(me))return;try{let ve=0;for(const P of Oe)try{await kx(P.id,he.email),ve++}catch(D){console.error(`Error removing stakeholder from session ${P.id}:`,D)}await hn(Oe),ve>0?alert(`${R} has been removed as a stakeholder from ${ve} session(s) you manage.`):alert(`${R} was not a stakeholder in any of the sessions you manage.`)}catch(ve){console.error("Error removing stakeholder:",ve),alert("Failed to remove stakeholder. Please try again.")}return}dt(he),Ce(!0)}},Is=async()=>{var k;if(Te){if(Be.has(Te.id)){const R=js(Te);alert(`Cannot delete this protected account${R?` (${R})`:""}. This protects against accidentally locking important users out of the system.`),Ce(!1),dt(null);return}qe(!0);try{if(!e)throw new Error("You must be logged in to delete users");const he=`${Pe.supabaseUrl}/functions/v1/delete-user`,me=await fetch(he,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${Pe.supabaseKey}`},body:JSON.stringify({userId:Te.id,currentUserId:e.id})});if(!me.ok){let D="Failed to delete user";try{D=(await me.json()).error||D}catch{D=`Server returned ${me.status}: ${me.statusText}`}throw new Error(D)}const ve=await me.json();u(D=>D.filter(X=>X.id!==Te.id)),Ce(!1);const P=Te.id;dt(null);try{await hn(Oe)}catch(D){console.error("Error reloading users after deletion:",D)}}catch(R){console.error("Error deleting user:",R);const he=(R==null?void 0:R.message)||((k=R==null?void 0:R.error)==null?void 0:k.message)||"Unknown error";u(me=>!me.find(P=>P.id===(Te==null?void 0:Te.id))&&Te?[...me,Te].sort((P,D)=>(P.name||P.email).localeCompare(D.name||D.email)):me),alert(`Failed to delete user: ${he}

If this persists, the deletion may be blocked by database security policies. Please check the console for details.`);try{await hn(Oe)}catch(me){console.error("Error reloading users after failed deletion:",me)}}finally{qe(!1)}}},Ra=()=>{Ce(!1),dt(null)},il=async()=>{if(!Ee)return;if(!Jt.trim()){alert("Name is required");return}if(!yt.trim()){alert("Email is required");return}if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(yt.trim())){alert("Please enter a valid email address");return}cs(!0);try{const{error:R}=await Pe.from("users").update({name:Jt.trim(),email:yt.trim().toLowerCase()}).eq("id",Ee.id);if(R)throw R;u(he=>he.map(me=>me.id===Ee.id?{...me,name:Jt.trim(),email:yt.trim().toLowerCase()}:me)),$t(!1),Je(null),Xt(""),br("")}catch(R){console.error("Error updating user:",R),alert("Failed to update user. Please try again.")}finally{cs(!1)}},ln=()=>{_(!1),Kt(!0),Bt({name:"",email:"",isSystemAdmin:!1,sessionAdminIds:[],stakeholderSessionIds:[]}),Wt(ld()),Hr(""),Hn([]),Ir(""),Kn([]),en(),sr(!0)},Ws=()=>{Kt(!1),Bt({name:"",email:"",isSystemAdmin:!1,sessionAdminIds:[],stakeholderSessionIds:[]}),Wt(ld()),Hr(""),Hn([]),Ir(""),Kn([]),fn(!0),nr(!0),mr({sessionAdmin:!1,stakeholder:!1}),sr(!0)};g.useEffect(()=>{(async()=>{var he,me,ve,P;try{const{data:{session:D}}=await Pe.auth.getSession();if(D){const X=((me=(he=D.user)==null?void 0:he.app_metadata)==null?void 0:me.provider)==="azure"||((P=(ve=D.user)==null?void 0:ve.identities)==null?void 0:P.some(ce=>ce.provider==="azure"));Zt(X||!1)}else Zt(!1)}catch(D){console.error("Error checking Azure sign-in status:",D),Zt(!1)}})();const{data:{subscription:R}}=Pe.auth.onAuthStateChange((he,me)=>{var ve,P,D,X;if(me){const ce=((P=(ve=me.user)==null?void 0:ve.app_metadata)==null?void 0:P.provider)==="azure"||((X=(D=me.user)==null?void 0:D.identities)==null?void 0:X.some(Re=>Re.provider==="azure"));Zt(ce||!1)}else Zt(!1)});return()=>{R.unsubscribe()}},[]);const Ts=async()=>{try{const k=window.location.pathname.startsWith("/feature-voting-app")?"/feature-voting-app":"",{error:R}=await Pe.auth.signInWithOAuth({provider:"azure",options:{redirectTo:`${window.location.origin}${k}/users`,scopes:"email openid profile User.ReadBasic.All"}});R&&(console.error("Azure sign-in error:",R),Wt(he=>({...he,error:"Failed to sign in with Microsoft. Please try again."})))}catch(k){console.error("Azure sign-in error:",k),Wt(R=>({...R,error:"Failed to sign in with Microsoft. Please try again."}))}},ki=async k=>{if(Wt(R=>({...R,searchTerm:k,isSearching:!0,showResults:!1,error:""})),!k||k.trim().length<2){Wt(R=>({...R,results:[],isSearching:!1,error:""}));return}try{const R=await oee(k);Wt(he=>({...he,results:R,isSearching:!1,showResults:R.length>0,error:""}))}catch(R){console.error("Error searching Azure AD users:",R);const he=(R==null?void 0:R.message)||"Failed to search company users. Please try again.";Wt(me=>({...me,results:[],isSearching:!1,showResults:!1,error:he}))}},jo=k=>{let R="";if(k.givenName&&k.surname)R=`${k.givenName} ${k.surname}`;else if(k.displayName){const he=k.displayName.trim();if(he.includes(",")){const me=he.split(",").map(ve=>ve.trim());me.length===2?R=`${me[1]} ${me[0]}`:R=he}else R=he}else R=k.mail||k.userPrincipalName||"";Bt({...tt,name:R,email:k.mail||k.userPrincipalName}),Wt(ld()),sr(!1)},al=async()=>{if(!tt.name.trim()||!tt.email.trim()){alert("Please fill in all required fields (Name, Email)");return}Pr(!0);try{const{data:k,error:R}=await Pe.from("users").insert({name:tt.name.trim(),email:tt.email.trim().toLowerCase(),created_by:e==null?void 0:e.id,created_by_name:e==null?void 0:e.name}).select().single();if(R)throw R;if(!k)throw new Error("User creation failed");const he=k.id;if(ye==="system-admin"&&tt.isSystemAdmin&&await Vh(he),ye==="system-admin"&&lr.sessionAdmin&&jr)if(Cr)for(const P of In)try{await Dl(P.id,he)}catch(D){console.error(`Error adding session admin role to session ${P.id}:`,D)}else for(const P of tt.sessionAdminIds)try{await Dl(P,he)}catch(D){console.error("Error adding session admin role:",D)}console.log("Adding stakeholder to sessions:",tt.stakeholderSessionIds),console.log("View mode:",ye),console.log("User admin sessions:",Z),console.log("All sessions:",Oe.map(P=>({id:P.id,title:P.title})));let me=[];if(ye==="session-admin"?cr&&_r?me=Kr.map(P=>P.id):cr&&!_r&&(me=tt.stakeholderSessionIds):ye==="system-admin"&&lr.stakeholder&&cr&&(_r?me=Kr.map(P=>P.id):me=tt.stakeholderSessionIds),me.length===0)console.log("No stakeholder sessions to add");else{for(const P of me){if(ye==="session-admin"&&!Oe.some(X=>X.id===P)){console.warn(`Skipping session ${P} - not in managed sessions`);continue}try{console.log(`Adding ${tt.email} as stakeholder to session ${P}`);const D=await AS(P,tt.email,tt.name);console.log(`Successfully added stakeholder to session ${P}:`,D)}catch(D){console.error(`Error adding stakeholder role to session ${P}:`,D);const X=(D==null?void 0:D.message)||(D==null?void 0:D.toString())||"Unknown error";alert(`Warning: Failed to add ${tt.email} to session ${P}.

Error: ${X}`)}}console.log("Finished adding stakeholder roles")}let ve="User";tt.isSystemAdmin?ve="System Admin":lr.sessionAdmin&&jr&&(Cr||tt.sessionAdminIds.length>0)?ve="Session Admin":(ye==="session-admin"&&cr&&(_r||tt.stakeholderSessionIds.length>0)||ye==="system-admin"&&lr.stakeholder&&cr&&(_r||tt.stakeholderSessionIds.length>0))&&(ve="Stakeholder"),Ws(),await hn(Oe),Us({email:tt.email,userType:ve}),sn(!0)}catch(k){console.error("Error creating user:",k),alert(`Failed to create user: ${k.message||"Unknown error"}`)}finally{Pr(!1)}},Ma=k=>{Bt(R=>({...R,sessionAdminIds:R.sessionAdminIds.includes(k)?R.sessionAdminIds.filter(he=>he!==k):[...R.sessionAdminIds,k]}))},Ji=k=>{Bt(R=>({...R,stakeholderSessionIds:R.stakeholderSessionIds.includes(k)?R.stakeholderSessionIds.filter(he=>he!==k):[...R.stakeholderSessionIds,k]}))},pn=k=>{const he=k.split("T")[0].split(" ")[0].split("-");if(he.length!==3)return new Date(k).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"});const me=parseInt(he[0],10),ve=parseInt(he[1],10)-1,P=parseInt(he[2],10);return new Date(me,ve,P).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})},ds=k=>{const R=new Date,he=new Date(k.start_date),me=new Date(k.end_date);return k.is_active&&R>=he&&R<=me?{text:"Active",color:"text-green-600"}:R<he?{text:"Upcoming",color:"text-blue-600"}:{text:"Ended",color:"text-gray-500"}},wr=k=>{const R=new Date(k.start_date),he=new Date(k.end_date),me=R.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}),ve=he.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"});return`${me} - ${ve}`},Xi=k=>k.roles.isSystemAdmin?i.jsxs("span",{className:"inline-flex items-center px-2.5 py-1 rounded text-xs font-medium bg-[#C89212] text-white",children:[i.jsx(En,{className:"h-3.5 w-3.5 mr-1"}),"System Admin"]}):k.roles.sessionAdminCount>0?i.jsxs("span",{className:"inline-flex items-center px-2.5 py-1 rounded text-xs font-medium bg-[#576C71] text-white",children:[i.jsx(Xr,{className:"h-3.5 w-3.5 mr-1"}),"Session Admin (",k.roles.sessionAdminCount,")"]}):k.roles.stakeholderSessionCount>0?i.jsxs("span",{className:"inline-flex items-center px-2.5 py-1 rounded text-xs font-medium bg-[#8B5A4A] text-white",children:[i.jsx(ps,{className:"h-3.5 w-3.5 mr-1"}),"Stakeholder (",k.roles.stakeholderSessionCount,")"]}):i.jsx("span",{className:"inline-flex items-center px-2.5 py-1 rounded text-xs font-medium bg-gray-100 text-gray-600",children:"No Role"}),Yn=k=>k?k==="session-admin"?Oe.filter(R=>!Nt.adminSessions.includes(R.id)):k==="remove-stakeholder"?Oe.filter(R=>Nt.stakeholderSessions.includes(R.id)&&(ye==="system-admin"||Z.includes(R.id))):Oe.filter(R=>!Nt.stakeholderSessions.includes(R.id)):[],Ni=(k,R)=>R?R==="session-admin"?k.roles.sessionAdminCount<Oe.length:k.roles.stakeholderSessionCount<Oe.length:!1;return je||f?i.jsx("div",{className:"min-h-screen w-full bg-gray-50 flex items-center justify-center",children:i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-[#2d4660] mx-auto mb-4"}),i.jsx("p",{className:"text-gray-600",children:je?"Checking access...":"Loading users..."})]})}):H?i.jsxs("div",{className:"min-h-screen bg-gray-50 pb-20",children:[i.jsxs("div",{className:"container mx-auto p-4 max-w-6xl",children:[i.jsx("div",{className:"hidden md:flex md:justify-center mb-2",children:i.jsx("img",{src:ji,alt:"New Millennium Building Systems Logo",className:"-mt-4 cursor-pointer hover:opacity-80 transition-opacity",style:{height:"96px",width:"auto"},onClick:()=>s("/sessions")})}),i.jsxs("div",{className:"flex justify-between items-center mb-4 md:mb-6",children:[i.jsxs("div",{className:"flex items-center flex-1 min-w-0",children:[i.jsx("img",{src:$a,alt:"New Millennium Building Systems Logo",className:"mr-3 md:hidden flex-shrink-0 cursor-pointer hover:opacity-80 transition-opacity",style:{width:"36px",height:"36px",objectFit:"contain"},onClick:()=>s("/sessions")}),i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsx("h1",{className:"text-xl md:text-3xl font-bold text-[#2d4660] truncate",children:ir}),i.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:[e==null?void 0:e.name,H&&i.jsxs("span",{className:"ml-2 inline-flex items-center px-2.5 py-1 rounded text-xs font-medium bg-[#C89212] text-white",children:[i.jsx(En,{className:"h-3.5 w-3.5 mr-1"}),"System Admin"]}),!H&&ie&&i.jsxs("span",{className:"ml-2 inline-flex items-center px-2.5 py-1 rounded text-xs font-medium bg-[#576C71] text-white",children:[i.jsx(Xr,{className:"h-3.5 w-3.5 mr-1"}),"Session Admin"]})]})]})]}),i.jsxs("div",{ref:F,className:"relative z-40 flex-shrink-0 ml-2",children:[i.jsxs("div",{className:"hidden md:flex space-x-2",children:[(H||ie)&&i.jsxs("button",{onClick:ln,className:"flex items-center px-4 py-2 bg-[#2D4660] text-white rounded-lg hover:bg-[#173B65] transition-colors",children:[i.jsx(Ln,{className:"h-4 w-4 mr-2"}),ye==="session-admin"?"Add Stakeholder":"Add User"]}),(H||ie)&&n&&i.jsxs("button",{onClick:()=>s("/admin"),className:"flex items-center px-4 py-2 bg-[#1E5461] text-white rounded-lg hover:bg-[#145668] transition-colors",children:[i.jsx(Xr,{className:"h-4 w-4 mr-2"}),"Admin Dashboard"]}),i.jsxs("button",{onClick:()=>s("/sessions"),className:"flex items-center px-4 py-2 bg-[#4f6d8e] text-white rounded-lg hover:bg-[#3d5670] transition-colors",children:[i.jsx(ns,{className:"h-4 w-4 mr-2"}),"My Sessions"]}),i.jsxs("button",{onClick:k=>{k.preventDefault(),k.stopPropagation(),ar(k)},className:"flex items-center px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-colors",children:[i.jsx(ss,{className:"h-4 w-4 mr-2"}),"Logout"]})]}),i.jsx("div",{className:"flex md:hidden",children:i.jsx("button",{onClick:()=>_(!j),className:"p-2 rounded-md border border-gray-200 bg-white shadow-sm","aria-label":"Open menu",children:i.jsx(pi,{className:"h-5 w-5 text-gray-700"})})}),j&&i.jsx("div",{className:"absolute right-0 mt-2 w-56 bg-white border border-gray-200 rounded-lg shadow-lg md:hidden z-50",children:i.jsxs("div",{className:"py-1",children:[(H||ie)&&i.jsxs("button",{onClick:()=>{_(!1),ln()},className:"w-full px-4 py-3 flex items-center text-left hover:bg-gray-50",children:[i.jsx(Ln,{className:"h-5 w-5 mr-3 text-green-600"}),i.jsx("span",{className:"text-base",children:ye==="session-admin"?"Add Stakeholder":"Add User"})]}),(H||ie)&&n&&i.jsxs("button",{onClick:()=>{_(!1),s("/admin")},className:"w-full px-4 py-3 flex items-center text-left hover:bg-gray-50",children:[i.jsx(Xr,{className:"h-5 w-5 mr-3 text-[#1E5461]"}),i.jsx("span",{className:"text-base",children:"Admin Dashboard"})]}),i.jsxs("button",{onClick:()=>{_(!1),s("/sessions")},className:"w-full px-4 py-3 flex items-center text-left hover:bg-gray-50",children:[i.jsx(ns,{className:"h-5 w-5 mr-3 text-gray-700"}),i.jsx("span",{className:"text-base",children:"My Sessions"})]}),i.jsxs("button",{onClick:k=>{k.preventDefault(),k.stopPropagation(),_(!1),ar(k)},className:"w-full px-4 py-3 flex items-center text-left hover:bg-gray-50",children:[i.jsx(ss,{className:"h-5 w-5 mr-3 text-gray-700"}),i.jsx("span",{className:"text-base",children:"Logout"})]})]})})]})]}),i.jsx("div",{className:"relative z-10 bg-white rounded-lg shadow-md p-3 md:p-4 mb-4 md:mb-6",style:{overflow:"visible",position:"relative"},children:i.jsxs("div",{className:"flex flex-col gap-3 md:flex-row md:gap-4",style:{position:"relative"},children:[i.jsxs("div",{className:"flex-1 relative",children:[i.jsx(xk,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"}),i.jsx("input",{type:"text",placeholder:"Search by name or email...",value:x,onChange:k=>v(k.target.value),className:"w-full pl-10 pr-10 py-2.5 md:py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#2d4660] focus:border-transparent text-base"}),x&&i.jsx("button",{onClick:()=>v(""),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600",children:i.jsx(xs,{className:"h-5 w-5"})})]}),i.jsx(lee,{products:qr,value:ur,onChange:Gr}),i.jsxs("select",{value:b==="system-admin"&&ye==="session-admin"?"session-admin":b,onChange:k=>w(k.target.value),className:"px-4 py-2.5 md:py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#2d4660] focus:border-transparent text-base",children:[ye!=="session-admin"&&i.jsx("option",{value:"all",children:"All Roles"}),ye!=="session-admin"&&i.jsx("option",{value:"system-admin",children:"System Admin"}),ye!=="session-admin"&&i.jsx("option",{value:"session-admin",children:"Session Admin"}),i.jsx("option",{value:"stakeholder",children:"Stakeholder"}),i.jsx("option",{value:"none",children:"No Role"})]}),i.jsx("button",{onClick:()=>{v(""),Gr(""),w("all")},disabled:!x&&!ur&&b==="all",className:"inline-flex items-center justify-center px-3 py-2.5 md:py-2 border border-gray-300 rounded-lg bg-white text-gray-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed hover:bg-gray-50 disabled:hover:bg-white",title:"Clear all filters",children:i.jsx(pF,{className:"h-5 w-5"})})]})}),i.jsx("div",{className:"md:hidden space-y-3 relative z-10 overflow-visible",children:d.length===0?i.jsx("div",{className:"bg-white rounded-lg shadow-md p-8 text-center text-gray-500",children:x||b!=="all"||ur?"No users found matching your filters.":"No users found."}):d.map(k=>{var R,he;return i.jsxs("div",{className:"bg-white rounded-lg shadow-md overflow-visible",children:[i.jsxs("div",{className:"p-4 border-b border-gray-100",children:[i.jsxs("div",{className:"flex justify-between items-start mb-2",children:[i.jsxs("div",{className:"flex-1 min-w-0 pr-2",children:[i.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[i.jsx("h3",{className:"text-base font-semibold text-gray-900 truncate",children:k.name||k.email}),k.id===(e==null?void 0:e.id)&&i.jsx("span",{className:"text-xs text-[#c59f2d] font-semibold",children:"(You)"}),k.roles.isSystemAdmin&&i.jsx("span",{className:"inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium bg-[#C89212] text-white",children:"System Admin"}),k.roles.sessionAdminCount>0&&i.jsxs("span",{className:"inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-700",children:["Session Admin (",k.roles.sessionAdminCount,")"]}),k.roles.stakeholderSessionCount>0&&i.jsxs("span",{className:"inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-700",children:["Stakeholder (",k.roles.stakeholderSessionCount,")"]}),js(k)&&i.jsxs("span",{className:"text-xs text-[#c59f2d] font-semibold",children:["(",js(k),")"]}),ii(k)&&i.jsxs("span",{className:"px-2 py-0.5 bg-red-100 text-red-700 text-xs font-medium rounded",children:["Duplicate (",Gn(k),")"]})]}),i.jsx("p",{className:"text-sm text-gray-500 truncate mt-1",children:k.email}),(()=>{const me=us(k);return me.length>0?i.jsxs("div",{className:"text-sm text-gray-600 mt-1",children:[i.jsx("span",{className:"font-medium",children:me.length===1?"Product:":"Products:"}),i.jsx("ul",{className:"list-none mt-1 space-y-0.5",children:me.map(ve=>{const P=Ur(ve.name,ve.color_hex??null);return i.jsxs("li",{className:"text-gray-600 flex items-center gap-2",children:[i.jsx("span",{className:"inline-block w-3 h-3 rounded-sm flex-shrink-0",style:{backgroundColor:P.background}}),ve.name]},ve.id)})})]}):null})()]}),i.jsx("div",{className:"flex items-center gap-2 flex-shrink-0",children:i.jsxs("div",{className:"relative",ref:me=>{Y.current[k.id]=me},children:[i.jsx("button",{onClick:()=>C(E===k.id?null:k.id),className:`p-2 rounded-md hover:bg-gray-100 transition-colors ${k.id===(e==null?void 0:e.id)?"opacity-50 cursor-not-allowed":""}`,disabled:k.id===(e==null?void 0:e.id),title:k.id===(e==null?void 0:e.id)?"Cannot modify your own permissions":"Change user role",children:i.jsx(yk,{className:"h-5 w-5 text-gray-600"})}),E===k.id&&k.id!==(e==null?void 0:e.id)&&i.jsx("div",{className:"fixed md:absolute md:right-0 md:mt-1 w-64 bg-white border border-gray-200 rounded-lg shadow-lg z-[9999]",style:I[k.id]||{},children:i.jsxs("div",{className:"py-1",children:[i.jsx("div",{className:"px-3 py-2 text-xs font-semibold text-gray-500 uppercase border-b border-gray-200",children:"Change User Role"}),ye==="system-admin"&&i.jsxs(i.Fragment,{children:[k.roles.isSystemAdmin?i.jsxs("button",{onClick:()=>Os(k.id,!0),className:"w-full px-4 py-3 text-left flex items-center hover:bg-red-50 text-red-700",children:[i.jsx(En,{className:"h-5 w-5 mr-3 flex-shrink-0"}),i.jsxs("div",{children:[i.jsx("div",{className:"font-medium text-base",children:"Remove System Admin"}),i.jsx("div",{className:"text-xs text-gray-500",children:"Revoke global admin access"})]})]}):i.jsxs("button",{onClick:()=>Os(k.id,!1),className:"w-full px-4 py-3 text-left flex items-center hover:bg-[#C89212]/10 text-[#C89212]",children:[i.jsx(En,{className:"h-5 w-5 mr-3 flex-shrink-0"}),i.jsxs("div",{children:[i.jsx("div",{className:"font-medium text-base",children:"Make System Admin"}),i.jsx("div",{className:"text-xs text-gray-500",children:"Grant global admin access"})]})]}),Ni(k,"session-admin")&&i.jsxs("button",{onClick:()=>mn(k,"session-admin"),className:"w-full px-4 py-3 text-left flex items-center hover:bg-[#576C71]/10 text-[#576C71] border-t border-gray-200",children:[i.jsx(Xr,{className:"h-5 w-5 mr-3 flex-shrink-0"}),i.jsxs("div",{children:[i.jsx("div",{className:"font-medium text-base",children:"Make Session Admin"}),i.jsx("div",{className:"text-xs text-gray-500",children:"Add to a session as admin"})]})]})]}),Ni(k,"stakeholder")&&i.jsxs("button",{onClick:()=>mn(k,"stakeholder"),className:"w-full px-4 py-3 text-left flex items-center hover:bg-[#8B5A4A]/10 text-[#8B5A4A] border-t border-gray-200",children:[i.jsx(ps,{className:"h-5 w-5 mr-3 flex-shrink-0"}),i.jsxs("div",{children:[i.jsx("div",{className:"font-medium text-base",children:"Make Stakeholder"}),i.jsx("div",{className:"text-xs text-gray-500",children:"Add to a session as stakeholder"})]})]}),ye==="session-admin"&&k.stakeholderInSessions&&k.stakeholderInSessions.length>0&&k.stakeholderInSessions.some(me=>Z.includes(me.id))&&i.jsxs("button",{onClick:()=>mn(k,"remove-stakeholder"),className:"w-full px-4 py-3 text-left flex items-center hover:bg-red-50 text-red-700 border-t border-gray-200",children:[i.jsx(Qu,{className:"h-5 w-5 mr-3 flex-shrink-0"}),i.jsxs("div",{children:[i.jsx("div",{className:"font-medium text-base",children:"Remove Stakeholder"}),i.jsx("div",{className:"text-xs text-gray-500",children:"Remove from a session you manage"})]})]}),(k.roles.isSystemAdmin||k.roles.sessionAdminCount>0||k.roles.stakeholderSessionCount>0)&&i.jsxs("button",{onClick:()=>Yi(k.id,k.name),className:"w-full px-4 py-3 text-left flex items-center hover:bg-gray-50 text-gray-700 border-t border-gray-200",children:[i.jsx(Qu,{className:"h-5 w-5 mr-3 flex-shrink-0"}),i.jsxs("div",{children:[i.jsx("div",{className:"font-medium text-base",children:"Remove All Roles"}),i.jsx("div",{className:"text-xs text-gray-500",children:"Remove from all sessions"})]})]}),(ye==="system-admin"||ye==="session-admin"&&k.roles.stakeholderSessionCount>0&&((R=k.stakeholderInSessions)==null?void 0:R.some(me=>Oe.some(ve=>ve.id===me.id)))&&!le.has(k.email))&&i.jsx("div",{className:"px-3 py-2 text-xs font-semibold text-gray-500 uppercase border-t border-gray-200",children:"User Functions"}),ye==="system-admin"&&i.jsxs("button",{onClick:()=>{Je(k),Xt(k.name),br(k.email),$t(!0),C(null)},className:"w-full px-4 py-3 text-left flex items-center hover:bg-[#1E5461]/10 text-[#1E5461] border-t border-gray-200",children:[i.jsx(bd,{className:"h-5 w-5 mr-3 flex-shrink-0"}),i.jsxs("div",{children:[i.jsx("div",{className:"font-medium text-base",children:"Edit User Profile"}),i.jsx("div",{className:"text-xs text-gray-500",children:"Update name and email"})]})]}),(ye==="system-admin"||ye==="session-admin"&&k.roles.stakeholderSessionCount>0&&((he=k.stakeholderInSessions)==null?void 0:he.some(me=>Oe.some(ve=>ve.id===me.id))))&&!le.has(k.email)&&i.jsxs("button",{onClick:()=>{C(null),wo(k.id,k.name)},className:`w-full px-4 py-3 text-left flex items-center hover:bg-[#8B5A4A]/10 text-[#8B5A4A] border-t border-gray-200 ${k.id===(e==null?void 0:e.id)||ye==="system-admin"&&Be.has(k.id)?"opacity-50 cursor-not-allowed":""}`,disabled:k.id===(e==null?void 0:e.id)||ye==="system-admin"&&Be.has(k.id),children:[i.jsx(ha,{className:"h-5 w-5 mr-3 flex-shrink-0"}),i.jsxs("div",{children:[i.jsx("div",{className:"font-medium text-base",children:ye==="session-admin"?"Remove Stakeholder":"Delete User"}),i.jsx("div",{className:"text-xs text-gray-500",children:ye==="session-admin"?"Remove from all your sessions":k.id===(e==null?void 0:e.id)?"Cannot delete your own account":Be.has(k.id)?`Cannot delete protected account${js(k)?` (${js(k)})`:""}`:"Permanently delete this user"})]})]})]})})]})})]}),i.jsx("div",{className:"mt-2",children:Xi(k)})]}),i.jsxs("div",{className:"p-4 space-y-3",children:[i.jsxs("div",{children:[i.jsx("div",{className:"text-xs font-semibold text-gray-500 uppercase mb-1",children:"Sessions"}),i.jsxs("div",{className:"space-y-1",children:[k.roles.sessionAdminCount>0&&i.jsxs("div",{className:"space-y-1",children:[i.jsxs("div",{className:"inline-flex items-center gap-1.5 px-2.5 py-1 rounded border text-xs font-medium",style:{borderColor:"#576C71",color:"#576C71"},children:[i.jsx(vk,{className:"h-3.5 w-3.5 flex-shrink-0",style:{fill:"#576C71",color:"#576C71"}}),i.jsxs("span",{children:[k.roles.sessionAdminCount," as Session Admin"]})]}),k.adminInSessions&&k.adminInSessions.length>0&&i.jsx(i.Fragment,{children:(()=>{const ve=G(k.adminInSessions)||k.adminInSessions[0],P=k.adminInSessions.length>1,D=(T==null?void 0:T.userId)===k.id&&(T==null?void 0:T.role)==="admin";return i.jsxs(i.Fragment,{children:[ve&&i.jsxs("button",{onClick:async X=>{X.stopPropagation(),await r(ve),s("/admin")},className:"ml-6 text-left text-sm text-gray-700 hover:text-gray-900 hover:underline",children:[i.jsx("div",{children:ve.title||"Unnamed Session"}),i.jsx("div",{className:"text-xs text-gray-500 mt-0.5",children:wr(ve)})]}),P&&i.jsxs("button",{onClick:X=>{X.stopPropagation(),K(D?null:{userId:k.id,role:"admin"})},className:"ml-6 text-xs text-gray-500 hover:text-gray-700 hover:underline mt-1 block flex items-center gap-1.5",style:{minWidth:"70px"},children:[i.jsx("span",{className:"inline-flex items-center justify-center w-4 h-4 border border-gray-400 rounded text-gray-600",children:D?i.jsx(Uc,{className:"h-2.5 w-2.5"}):i.jsx(vn,{className:"h-2.5 w-2.5"})}),D?"Hide":"Show"]}),D&&i.jsx("div",{className:"ml-6 mt-1 space-y-1",children:k.adminInSessions.filter(X=>X.id!==(ve==null?void 0:ve.id)).map(X=>i.jsxs("button",{onClick:async ce=>{ce.stopPropagation(),await r(X),s("/admin")},className:"block text-sm text-left text-gray-700 hover:text-gray-900 hover:underline w-full",children:[i.jsx("div",{children:X.title||"Unnamed Session"}),i.jsx("div",{className:"text-xs text-gray-500 mt-0.5",children:wr(X)})]},X.id))})]})})()})]}),k.roles.stakeholderSessionCount>0&&i.jsxs("div",{className:"space-y-1",children:[i.jsxs("div",{className:"inline-flex items-center gap-1.5 px-2.5 py-1 rounded border text-xs font-medium",style:{borderColor:"#8B5A4A",color:"#8B5A4A"},children:[i.jsx(ps,{className:"h-3.5 w-3.5 flex-shrink-0",style:{fill:"#8B5A4A",color:"#8B5A4A"}}),i.jsxs("span",{children:[k.roles.stakeholderSessionCount," as Stakeholder"]})]}),k.stakeholderInSessions&&k.stakeholderInSessions.length>0&&i.jsx(i.Fragment,{children:(()=>{const ve=G(k.stakeholderInSessions)||k.stakeholderInSessions[0],P=k.stakeholderInSessions.length>1,D=(T==null?void 0:T.userId)===k.id&&(T==null?void 0:T.role)==="stakeholder";return i.jsxs(i.Fragment,{children:[ve&&i.jsxs("button",{onClick:async X=>{X.stopPropagation(),await r(ve),s("/admin")},className:"ml-6 text-left text-sm text-gray-700 hover:text-gray-900 hover:underline",children:[i.jsx("div",{children:ve.title||"Unnamed Session"}),i.jsx("div",{className:"text-xs text-gray-500 mt-0.5",children:wr(ve)})]}),P&&i.jsxs("button",{onClick:X=>{X.stopPropagation(),K(D?null:{userId:k.id,role:"stakeholder"})},className:"ml-6 text-xs text-gray-500 hover:text-gray-700 hover:underline mt-1 block flex items-center gap-1.5",style:{minWidth:"70px"},children:[i.jsx("span",{className:"inline-flex items-center justify-center w-4 h-4 border border-gray-400 rounded text-gray-600",children:D?i.jsx(Uc,{className:"h-2.5 w-2.5"}):i.jsx(vn,{className:"h-2.5 w-2.5"})}),D?"Hide":"Show"]}),D&&i.jsx("div",{className:"ml-6 mt-1 space-y-1",children:k.stakeholderInSessions.filter(X=>X.id!==(ve==null?void 0:ve.id)).map(X=>i.jsxs("button",{onClick:async ce=>{ce.stopPropagation(),await r(X),s("/admin")},className:"block text-sm text-left text-gray-700 hover:text-gray-900 hover:underline w-full",children:[i.jsx("div",{children:X.title||"Unnamed Session"}),i.jsx("div",{className:"text-xs text-gray-500 mt-0.5",children:wr(X)})]},X.id))})]})})()})]}),k.roles.sessionAdminCount===0&&k.roles.stakeholderSessionCount===0&&i.jsx("span",{className:"text-sm text-gray-400",children:"No session roles"})]})]}),i.jsxs("div",{children:[i.jsx("div",{className:"text-xs font-semibold text-gray-500 uppercase mb-1",children:"Assigned"}),i.jsxs("div",{className:"space-y-2",children:[k.roles.sessionAdminCount===0&&k.roles.stakeholderSessionCount===0&&i.jsxs("div",{className:"flex items-center text-sm text-gray-700",children:[i.jsx(un,{className:"h-4 w-4 mr-2 text-gray-400 flex-shrink-0"}),i.jsx("span",{children:k.created_at?pn(k.created_at):"N/A"}),i.jsxs("span",{className:"text-gray-500 text-xs ml-2",children:["by ",k.created_by_name||"System"]})]}),k.adminInSessions&&k.adminInSessions.length>0&&i.jsx("div",{className:"space-y-3",children:(()=>{const ve=G(k.adminInSessions)||k.adminInSessions[0];k.adminInSessions.length>1;const P=(T==null?void 0:T.userId)===k.id&&(T==null?void 0:T.role)==="admin";return i.jsxs(i.Fragment,{children:[ve&&i.jsxs("div",{className:"ml-5 space-y-1",children:[i.jsxs("div",{className:"flex items-center text-xs text-gray-700 whitespace-nowrap",children:[i.jsx(un,{className:"h-3 w-3 mr-1.5 text-gray-400 flex-shrink-0"}),i.jsx("span",{children:ve.assignedAt?pn(ve.assignedAt):"N/A"})]}),i.jsxs("div",{className:"text-xs text-gray-500 ml-5",children:["by ",ve.assignedByName||"System"]})]}),P&&i.jsx("div",{className:"ml-5 mt-2 space-y-3",children:k.adminInSessions.filter(D=>D.id!==(ve==null?void 0:ve.id)).map(D=>i.jsxs("div",{className:"space-y-1",children:[i.jsxs("div",{className:"flex items-center text-xs text-gray-700 whitespace-nowrap",children:[i.jsx(un,{className:"h-3 w-3 mr-1.5 text-gray-400 flex-shrink-0"}),i.jsx("span",{children:D.assignedAt?pn(D.assignedAt):"N/A"})]}),i.jsxs("div",{className:"text-xs text-gray-500 ml-5",children:["by ",D.assignedByName||"System"]})]},D.id))})]})})()}),k.stakeholderInSessions&&k.stakeholderInSessions.length>0&&i.jsx("div",{className:k.adminInSessions&&k.adminInSessions.length>0?"pt-4 border-t border-gray-100 mt-4":"",children:i.jsx("div",{className:"space-y-3",children:(()=>{const ve=G(k.stakeholderInSessions)||k.stakeholderInSessions[0];k.stakeholderInSessions.length>1;const P=(T==null?void 0:T.userId)===k.id&&(T==null?void 0:T.role)==="stakeholder";return i.jsxs(i.Fragment,{children:[ve&&i.jsxs("div",{className:"ml-5 space-y-1",children:[i.jsxs("div",{className:"flex items-center text-xs text-gray-700 whitespace-nowrap",children:[i.jsx(un,{className:"h-3 w-3 mr-1.5 text-gray-400 flex-shrink-0"}),i.jsx("span",{children:ve.assignedAt?pn(ve.assignedAt):"N/A"})]}),i.jsxs("div",{className:"text-xs text-gray-500 ml-5",children:["by ",ve.assignedByName||"System"]})]}),P&&i.jsx("div",{className:"ml-5 mt-2 space-y-3",children:k.stakeholderInSessions.filter(D=>D.id!==(ve==null?void 0:ve.id)).map(D=>i.jsxs("div",{className:"space-y-1",children:[i.jsxs("div",{className:"flex items-center text-xs text-gray-700 whitespace-nowrap",children:[i.jsx(un,{className:"h-3 w-3 mr-1.5 text-gray-400 flex-shrink-0"}),i.jsx("span",{children:D.assignedAt?pn(D.assignedAt):"N/A"})]}),i.jsxs("div",{className:"text-xs text-gray-500 ml-5",children:["by ",D.assignedByName||"System"]})]},D.id))})]})})()})})]})]})]})]},k.id)})}),i.jsxs("div",{className:"hidden md:block relative z-10 bg-white rounded-lg shadow-md overflow-visible",children:[i.jsxs("table",{className:"min-w-full divide-y divide-gray-200 rounded-t-lg",children:[i.jsx("thead",{className:"bg-gray-50",children:i.jsxs("tr",{children:[i.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"User"}),i.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Role"}),i.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Sessions"}),i.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider w-48",children:"Created"}),i.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),i.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:d.length===0?i.jsx("tr",{children:i.jsx("td",{colSpan:5,className:"px-6 py-8 text-center text-gray-500",children:x||b!=="all"||ur?"No users found matching your filters.":"No users found."})}):d.map(k=>{var R,he,me,ve;return i.jsxs("tr",{className:"hover:bg-gray-50 relative",onMouseEnter:()=>B(k.id),onMouseLeave:()=>B(null),children:[i.jsx("td",{className:"px-6 py-4 whitespace-nowrap align-top",children:i.jsxs("div",{children:[i.jsxs("div",{className:"text-sm font-medium text-gray-900",children:[k.name,k.id===(e==null?void 0:e.id)&&i.jsx("span",{className:"ml-2 text-xs text-[#c59f2d] font-semibold",children:"(You)"}),js(k)&&i.jsxs("span",{className:"ml-2 text-xs text-[#c59f2d] font-semibold",children:["(",js(k),")"]}),ii(k)&&i.jsxs("span",{className:"ml-2 px-2 py-0.5 bg-red-100 text-red-700 text-xs font-medium rounded",children:["Duplicate (",Gn(k),")"]})]}),i.jsx("div",{className:"text-sm text-gray-500",children:k.email}),(()=>{const P=us(k);return P.length>0?i.jsxs("div",{className:"text-sm text-gray-600 mt-1",children:[i.jsx("span",{className:"font-medium",children:P.length===1?"Product:":"Products:"}),i.jsx("ul",{className:"list-none mt-1 space-y-0.5",children:P.map(D=>{const X=Ur(D.name,D.color_hex??null);return i.jsxs("li",{className:"text-gray-600 flex items-center gap-2",children:[i.jsx("span",{className:"inline-block w-3 h-3 rounded-sm flex-shrink-0",style:{backgroundColor:X.background}}),D.name]},D.id)})})]}):null})()]})}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap align-top",children:Xi(k)}),i.jsx("td",{className:"px-6 py-4 text-sm text-gray-500 align-top relative overflow-visible",children:i.jsxs("div",{className:"space-y-2",children:[k.roles.sessionAdminCount===0&&k.roles.stakeholderSessionCount===0&&i.jsx("span",{className:"text-gray-400",children:"None"}),k.adminInSessions&&k.adminInSessions.length>0&&i.jsxs("div",{children:[i.jsx("div",{className:"mb-2",children:(()=>{var Re;const P=((Re=k.adminInSessions)==null?void 0:Re.length)||0,D=P>1,X=(T==null?void 0:T.userId)===k.id&&(T==null?void 0:T.role)==="admin",ce=()=>i.jsxs("div",{className:"inline-flex items-center gap-1.5 px-2.5 py-1 rounded border text-xs font-medium group",style:{borderColor:"#576C71",color:"#576C71"},children:[i.jsx(vk,{className:"h-3.5 w-3.5 flex-shrink-0",style:{fill:"#576C71",color:"#576C71"}}),i.jsxs("span",{children:["Session Admin in ",P," session",P!==1?"s":""]}),D&&i.jsxs("span",{className:"inline-flex items-baseline gap-0.5",style:{color:"#576C71"},children:[X?i.jsx(Uc,{className:"h-2.5 w-2.5 transition-all group-hover:brightness-150 mt-[3px]",style:{color:"#576C71"}}):i.jsx(vn,{className:"h-2.5 w-2.5 transition-all group-hover:brightness-150 mt-[3px]",style:{color:"#576C71"}}),i.jsx("span",{className:"text-[10px] transition-all group-hover:brightness-150",children:X?"Hide":"Show"})]})]});return D?i.jsx("button",{onClick:Ae=>{Ae.stopPropagation(),K(X?null:{userId:k.id,role:"admin"})},className:"text-left",children:i.jsx(ce,{})}):i.jsx(ce,{})})()}),(()=>{const D=G(k.adminInSessions)||k.adminInSessions[0],X=(T==null?void 0:T.userId)===k.id&&(T==null?void 0:T.role)==="admin";return i.jsxs(i.Fragment,{children:[D&&i.jsxs("div",{className:"relative cursor-pointer",style:{marginLeft:"1.25rem",marginTop:"0.75rem"},onMouseEnter:()=>se(`${k.id}-${D.id}`),onMouseLeave:()=>se(null),onClick:async ce=>{ce.stopPropagation(),await r(D),s("/admin")},children:[Q===`${k.id}-${D.id}`&&i.jsx("div",{className:"absolute bg-blue-50 pointer-events-none z-0 rounded",style:{left:"-0.5rem",right:"-13rem",top:"-0.375rem",bottom:"-0.375rem",boxShadow:"0 0 0 1px rgb(191 219 254)",outline:"none"}}),i.jsxs("div",{className:"text-left text-sm text-gray-700 hover:text-gray-900 block relative z-10",style:{padding:0,margin:0,lineHeight:"1.25rem"},children:[i.jsx("div",{style:{height:"20px",lineHeight:"20px"},children:D.title||"Unnamed Session"}),i.jsx("div",{className:"text-xs text-gray-500",style:{height:"16px",lineHeight:"16px",marginTop:"2px"},children:wr(D)})]})]}),X&&i.jsx("div",{style:{marginTop:"0.5rem"},children:k.adminInSessions.filter(ce=>ce.id!==(D==null?void 0:D.id)).map((ce,Re)=>i.jsxs("div",{className:"relative cursor-pointer",style:{marginTop:"0.75rem",marginLeft:"1.25rem"},onMouseEnter:()=>se(`${k.id}-${ce.id}`),onMouseLeave:()=>se(null),onClick:async Ae=>{Ae.stopPropagation(),await r(ce),s("/admin")},children:[Q===`${k.id}-${ce.id}`&&i.jsx("div",{className:"absolute bg-blue-50 pointer-events-none z-0 rounded",style:{left:"-0.5rem",right:"-13rem",top:"-0.375rem",bottom:"-0.375rem",boxShadow:"0 0 0 1px rgb(191 219 254)",outline:"none"}}),i.jsxs("div",{className:"block text-sm text-left text-gray-700 hover:text-gray-900 relative z-10",style:{padding:0,margin:0,lineHeight:"1.25rem"},children:[i.jsx("div",{style:{height:"20px",lineHeight:"20px"},children:ce.title||"Unnamed Session"}),i.jsx("div",{className:"text-xs text-gray-500",style:{height:"16px",lineHeight:"16px",marginTop:"2px"},children:wr(ce)})]})]},ce.id))})]})})()]}),k.stakeholderInSessions&&k.stakeholderInSessions.length>0&&i.jsx("div",{className:k.adminInSessions&&k.adminInSessions.length>0?"pt-4 border-t border-gray-100 mt-4":"",children:i.jsxs("div",{children:[i.jsx("div",{className:"mb-2",children:(()=>{var Re;const P=((Re=k.stakeholderInSessions)==null?void 0:Re.length)||0,D=P>1,X=(T==null?void 0:T.userId)===k.id&&(T==null?void 0:T.role)==="stakeholder",ce=()=>i.jsxs("div",{className:"inline-flex items-center gap-1.5 px-2.5 py-1 rounded border text-xs font-medium group",style:{borderColor:"#8B5A4A",color:"#8B5A4A"},children:[i.jsx(ps,{className:"h-3.5 w-3.5 flex-shrink-0",style:{fill:"#8B5A4A",color:"#8B5A4A"}}),i.jsxs("span",{children:["Stakeholder in ",P," session",P!==1?"s":""]}),D&&i.jsxs("span",{className:"inline-flex items-baseline gap-0.5",style:{color:"#8B5A4A"},children:[X?i.jsx(Uc,{className:"h-2.5 w-2.5 transition-all group-hover:brightness-150 mt-[3px]",style:{color:"#8B5A4A"}}):i.jsx(vn,{className:"h-2.5 w-2.5 transition-all group-hover:brightness-150 mt-[3px]",style:{color:"#8B5A4A"}}),i.jsx("span",{className:"text-[10px] transition-all group-hover:brightness-150",children:X?"Hide":"Show"})]})]});return D?i.jsx("button",{onClick:Ae=>{Ae.stopPropagation(),K(X?null:{userId:k.id,role:"stakeholder"})},className:"text-left",children:i.jsx(ce,{})}):i.jsx(ce,{})})()}),(()=>{const D=G(k.stakeholderInSessions)||k.stakeholderInSessions[0],X=(T==null?void 0:T.userId)===k.id&&(T==null?void 0:T.role)==="stakeholder";return i.jsxs(i.Fragment,{children:[D&&i.jsxs("div",{className:"relative cursor-pointer",style:{marginLeft:"1.25rem",marginTop:"0.75rem"},onMouseEnter:()=>se(`${k.id}-${D.id}`),onMouseLeave:()=>se(null),onClick:async ce=>{ce.stopPropagation(),await r(D),s("/admin")},children:[Q===`${k.id}-${D.id}`&&i.jsx("div",{className:"absolute bg-blue-50 pointer-events-none z-0 rounded",style:{left:"-0.5rem",right:"-13rem",top:"-0.25rem",bottom:"-0.25rem",boxShadow:"0 0 0 1px rgb(191 219 254)",outline:"none"}}),i.jsxs("div",{className:"text-left text-sm text-gray-700 hover:text-gray-900 hover:underline block relative z-10",style:{padding:0,margin:0,lineHeight:"1.25rem"},children:[i.jsx("div",{style:{height:"20px",lineHeight:"20px"},children:D.title||"Unnamed Session"}),i.jsx("div",{className:"text-xs text-gray-500",style:{height:"16px",lineHeight:"16px",marginTop:"2px"},children:wr(D)})]})]}),X&&i.jsx("div",{style:{marginTop:"0.5rem"},children:k.stakeholderInSessions.filter(ce=>ce.id!==(D==null?void 0:D.id)).map((ce,Re)=>i.jsxs("div",{className:"relative cursor-pointer",style:{marginTop:"0.75rem",marginLeft:"1.25rem"},onMouseEnter:()=>se(`${k.id}-${ce.id}`),onMouseLeave:()=>se(null),onClick:async Ae=>{Ae.stopPropagation(),await r(ce),s("/admin")},children:[Q===`${k.id}-${ce.id}`&&i.jsx("div",{className:"absolute bg-blue-50 pointer-events-none z-0 rounded",style:{left:"-0.5rem",right:"-13rem",top:"-0.25rem",bottom:"-0.25rem",boxShadow:"0 0 0 1px rgb(191 219 254)",outline:"none"}}),i.jsxs("div",{className:"block text-sm text-left text-gray-700 hover:text-gray-900 hover:underline relative z-10",style:{padding:0,margin:0,lineHeight:"1.25rem"},children:[i.jsx("div",{style:{height:"20px",lineHeight:"20px"},children:ce.title||"Unnamed Session"}),i.jsx("div",{className:"text-xs text-gray-500",style:{height:"16px",lineHeight:"16px",marginTop:"2px"},children:wr(ce)})]})]},ce.id))})]})})()]})})]})}),i.jsx("td",{className:"px-6 py-4 text-sm text-gray-500 align-top w-48 relative overflow-visible",children:i.jsxs("div",{className:"space-y-2",children:[k.roles.sessionAdminCount===0&&k.roles.stakeholderSessionCount===0&&i.jsxs("div",{className:"flex items-center text-gray-700 whitespace-nowrap",children:[i.jsx(un,{className:"h-4 w-4 mr-1.5 text-gray-400 flex-shrink-0"}),i.jsx("span",{children:k.created_at?pn(k.created_at):"N/A"}),i.jsxs("span",{className:"text-gray-500 text-xs ml-2",children:["by ",k.created_by_name||"System"]})]}),k.adminInSessions&&k.adminInSessions.length>0&&i.jsxs("div",{children:[i.jsxs("div",{className:"flex items-center text-gray-700 whitespace-nowrap",style:{marginBottom:"0.5rem",height:"30px"},children:[i.jsx(un,{className:"h-4 w-4 mr-1.5 text-gray-400 flex-shrink-0"}),i.jsx("span",{children:k.created_at?pn(k.created_at):"N/A"}),i.jsxs("span",{className:"text-gray-500 text-xs ml-2",children:["by ",k.created_by_name||"System"]})]}),(()=>{const D=G(k.adminInSessions)||k.adminInSessions[0];k.adminInSessions.length>1;const X=(T==null?void 0:T.userId)===k.id&&(T==null?void 0:T.role)==="admin";return i.jsxs(i.Fragment,{children:[D&&i.jsx("div",{className:"relative cursor-pointer",style:{marginLeft:"1.25rem",marginTop:"0.5rem",marginBottom:"0.25rem"},onMouseEnter:()=>se(`${k.id}-${D.id}`),onMouseLeave:()=>se(null),onClick:async ce=>{ce.stopPropagation(),await r(D),s("/admin")},children:i.jsxs("div",{className:"relative z-10",style:{padding:0,margin:0,lineHeight:"1.25rem"},children:[i.jsxs("div",{className:"flex items-center",style:{height:"20px",lineHeight:"20px"},children:[i.jsx(un,{className:"h-3 w-3 mr-1.5 text-gray-400 flex-shrink-0"}),i.jsx("span",{className:"text-xs text-gray-700 whitespace-nowrap",children:D.assignedAt?pn(D.assignedAt):"N/A"})]}),i.jsxs("div",{className:"text-xs text-gray-500",style:{height:"16px",lineHeight:"16px",marginTop:"2px",marginLeft:"18px"},children:["by ",D.assignedByName||"System"]})]})}),X&&i.jsx("div",{style:{marginTop:"0.5rem"},children:k.adminInSessions.filter(ce=>ce.id!==(D==null?void 0:D.id)).map((ce,Re)=>i.jsx("div",{className:"relative cursor-pointer",style:{marginTop:"0.75rem",marginLeft:"1.25rem",marginBottom:"0.25rem"},onMouseEnter:()=>se(`${k.id}-${ce.id}`),onMouseLeave:()=>se(null),onClick:async Ae=>{Ae.stopPropagation(),await r(ce),s("/admin")},children:i.jsxs("div",{className:"relative z-10",style:{padding:0,margin:0,lineHeight:"1.25rem"},children:[i.jsxs("div",{className:"flex items-center",style:{height:"20px",lineHeight:"20px"},children:[i.jsx(un,{className:"h-3 w-3 mr-1.5 text-gray-400 flex-shrink-0"}),i.jsx("span",{className:"text-xs text-gray-700 whitespace-nowrap",children:ce.assignedAt?pn(ce.assignedAt):"N/A"})]}),i.jsxs("div",{className:"text-xs text-gray-500",style:{height:"16px",lineHeight:"16px",marginTop:"2px",marginLeft:"18px"},children:["by ",ce.assignedByName||"System"]})]})},ce.id))})]})})()]}),k.stakeholderInSessions&&k.stakeholderInSessions.length>0&&i.jsx("div",{className:k.adminInSessions&&k.adminInSessions.length>0?"pt-4 border-t border-gray-100 mt-4":"",children:i.jsxs("div",{children:[(!k.adminInSessions||k.adminInSessions.length===0)&&i.jsxs("div",{className:"flex items-center text-gray-700 whitespace-nowrap",style:{marginBottom:"0.5rem",height:"30px"},children:[i.jsx(un,{className:"h-4 w-4 mr-1.5 text-gray-400 flex-shrink-0"}),i.jsx("span",{children:k.created_at?pn(k.created_at):"N/A"}),i.jsxs("span",{className:"text-gray-500 text-xs ml-2",children:["by ",k.created_by_name||"System"]})]}),k.adminInSessions&&k.adminInSessions.length>0&&i.jsx("div",{style:{height:"26px",marginBottom:"0.5rem",visibility:"hidden"},children:i.jsxs("div",{className:"inline-flex items-center gap-1.5 px-2.5 py-1 rounded border text-xs font-medium",children:[i.jsx(ps,{className:"h-3.5 w-3.5"}),i.jsx("span",{children:"Stakeholder"})]})}),(()=>{const D=G(k.stakeholderInSessions)||k.stakeholderInSessions[0];k.stakeholderInSessions.length>1;const X=(T==null?void 0:T.userId)===k.id&&(T==null?void 0:T.role)==="stakeholder";return i.jsxs(i.Fragment,{children:[D&&i.jsx("div",{className:"relative cursor-pointer",style:{marginLeft:"1.25rem",marginTop:"0.5rem",marginBottom:"0.25rem"},onMouseEnter:()=>se(`${k.id}-${D.id}`),onMouseLeave:()=>se(null),onClick:async ce=>{ce.stopPropagation(),await r(D),s("/admin")},children:i.jsxs("div",{className:"relative z-10",style:{padding:0,margin:0,lineHeight:"1.25rem"},children:[i.jsxs("div",{className:"flex items-center",style:{height:"20px",lineHeight:"20px"},children:[i.jsx(un,{className:"h-3 w-3 mr-1.5 text-gray-400 flex-shrink-0"}),i.jsx("span",{className:"text-xs text-gray-700 whitespace-nowrap",children:D.assignedAt?pn(D.assignedAt):"N/A"})]}),i.jsxs("div",{className:"text-xs text-gray-500",style:{height:"16px",lineHeight:"16px",marginTop:"2px",marginLeft:"18px"},children:["by ",D.assignedByName||"System"]})]})}),X&&i.jsx("div",{style:{marginTop:"0.5rem"},children:k.stakeholderInSessions.filter(ce=>ce.id!==(D==null?void 0:D.id)).map((ce,Re)=>i.jsx("div",{className:"relative cursor-pointer",style:{marginTop:"0.75rem",marginLeft:"1.25rem",marginBottom:"0.25rem"},onMouseEnter:()=>se(`${k.id}-${ce.id}`),onMouseLeave:()=>se(null),onClick:async Ae=>{Ae.stopPropagation(),await r(ce),s("/admin")},children:i.jsxs("div",{className:"relative z-10",style:{padding:0,margin:0,lineHeight:"1.25rem"},children:[i.jsxs("div",{className:"flex items-center",style:{height:"20px",lineHeight:"20px"},children:[i.jsx(un,{className:"h-3 w-3 mr-1.5 text-gray-400 flex-shrink-0"}),i.jsx("span",{className:"text-xs text-gray-700 whitespace-nowrap",children:ce.assignedAt?pn(ce.assignedAt):"N/A"})]}),i.jsxs("div",{className:"text-xs text-gray-500",style:{height:"16px",lineHeight:"16px",marginTop:"2px"},children:["by ",ce.assignedByName||"System"]})]})},ce.id))})]})})()]})})]})}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium align-top",children:i.jsx("div",{className:"flex items-center justify-end gap-2",children:i.jsxs("div",{className:`relative inline-block transition-all md:transition-opacity ${$===k.id?k.id===(e==null?void 0:e.id)?"opacity-50 visible":"opacity-100 visible":"md:opacity-0 md:invisible opacity-100 visible"}`,ref:P=>{Y.current[k.id]=P},children:[i.jsx("button",{onClick:()=>C(E===k.id?null:k.id),className:"p-2 rounded-md hover:bg-gray-100 transition-colors",disabled:k.id===(e==null?void 0:e.id),title:k.id===(e==null?void 0:e.id)?"Cannot modify your own permissions":"Change user role",children:i.jsx(yk,{className:"h-5 w-5 text-gray-600"})}),E===k.id&&k.id!==(e==null?void 0:e.id)&&i.jsx("div",{className:"fixed mt-1 w-64 bg-white border border-gray-200 rounded-lg shadow-lg z-[100]",style:{top:((R=Y.current[k.id])==null?void 0:R.getBoundingClientRect().bottom)??0,right:window.innerWidth-(((he=Y.current[k.id])==null?void 0:he.getBoundingClientRect().right)??0)},children:i.jsxs("div",{className:"py-1",children:[i.jsx("div",{className:"px-3 py-2 text-xs font-semibold text-gray-500 uppercase border-b border-gray-200",children:"Change User Role"}),ye==="system-admin"&&i.jsxs(i.Fragment,{children:[k.roles.isSystemAdmin?i.jsxs("button",{onClick:()=>Os(k.id,!0),className:"w-full px-4 py-2 text-left flex items-center hover:bg-red-50 text-red-700",children:[i.jsx(En,{className:"h-4 w-4 mr-3"}),i.jsxs("div",{children:[i.jsx("div",{className:"font-medium",children:"Remove System Admin"}),i.jsx("div",{className:"text-xs text-gray-500",children:"Revoke global admin access"})]})]}):i.jsxs("button",{onClick:()=>Os(k.id,!1),className:"w-full px-4 py-2 text-left flex items-center hover:bg-[#C89212]/10 text-[#C89212]",children:[i.jsx(En,{className:"h-4 w-4 mr-3"}),i.jsxs("div",{children:[i.jsx("div",{className:"font-medium",children:"Make System Admin"}),i.jsx("div",{className:"text-xs text-gray-500",children:"Grant global admin access"})]})]}),Ni(k,"session-admin")&&i.jsxs("button",{onClick:()=>mn(k,"session-admin"),className:"w-full px-4 py-2 text-left flex items-center hover:bg-[#576C71]/10 text-[#576C71] border-t border-gray-200",children:[i.jsx(Xr,{className:"h-4 w-4 mr-3"}),i.jsxs("div",{children:[i.jsx("div",{className:"font-medium",children:"Make Session Admin"}),i.jsx("div",{className:"text-xs text-gray-500",children:"Add to a session as admin"})]})]})]}),Ni(k,"stakeholder")&&i.jsxs("button",{onClick:()=>mn(k,"stakeholder"),className:"w-full px-4 py-2 text-left flex items-center hover:bg-[#8B5A4A]/10 text-[#8B5A4A] border-t border-gray-200",children:[i.jsx(ps,{className:"h-4 w-4 mr-3"}),i.jsxs("div",{children:[i.jsx("div",{className:"font-medium",children:"Make Stakeholder"}),i.jsx("div",{className:"text-xs text-gray-500",children:"Add to a session as stakeholder"})]})]}),ye==="session-admin"&&k.stakeholderInSessions&&k.stakeholderInSessions.length>0&&k.stakeholderInSessions.some(P=>Z.includes(P.id))&&i.jsxs("button",{onClick:()=>mn(k,"remove-stakeholder"),className:"w-full px-4 py-2 text-left flex items-center hover:bg-red-50 text-red-700 border-t border-gray-200",children:[i.jsx(Qu,{className:"h-4 w-4 mr-3"}),i.jsxs("div",{children:[i.jsx("div",{className:"font-medium",children:"Remove Stakeholder"}),i.jsx("div",{className:"text-xs text-gray-500",children:"Remove from a session you manage"})]})]}),(k.roles.isSystemAdmin||k.roles.sessionAdminCount>0||k.roles.stakeholderSessionCount>0)&&i.jsxs("button",{onClick:()=>Yi(k.id,k.name),className:"w-full px-4 py-2 text-left flex items-center hover:bg-gray-50 text-gray-700 border-t border-gray-200",children:[i.jsx(Qu,{className:"h-4 w-4 mr-3"}),i.jsxs("div",{children:[i.jsx("div",{className:"font-medium",children:"Remove All Roles"}),i.jsx("div",{className:"text-xs text-gray-500",children:"Remove from all sessions"})]})]}),(ye==="system-admin"||ye==="session-admin"&&k.roles.stakeholderSessionCount>0&&((me=k.stakeholderInSessions)==null?void 0:me.some(P=>Oe.some(D=>D.id===P.id)))&&!le.has(k.email))&&i.jsx("div",{className:"px-3 py-2 text-xs font-semibold text-gray-500 uppercase border-t border-gray-200",children:"User Functions"}),ye==="system-admin"&&i.jsxs("button",{onClick:()=>{Je(k),Xt(k.name),br(k.email),$t(!0),C(null)},className:"w-full px-4 py-2 text-left flex items-center hover:bg-[#1E5461]/10 text-[#1E5461] border-t border-gray-200",children:[i.jsx(bd,{className:"h-4 w-4 mr-3"}),i.jsxs("div",{children:[i.jsx("div",{className:"font-medium",children:"Edit User Profile"}),i.jsx("div",{className:"text-xs text-gray-500",children:"Update name and email"})]})]}),(ye==="system-admin"||ye==="session-admin"&&k.roles.stakeholderSessionCount>0&&((ve=k.stakeholderInSessions)==null?void 0:ve.some(P=>Oe.some(D=>D.id===P.id))))&&!le.has(k.email)&&i.jsxs("button",{onClick:()=>{C(null),wo(k.id,k.name)},className:`w-full px-4 py-2 text-left flex items-center hover:bg-[#8B5A4A]/10 text-[#8B5A4A] border-t border-gray-200 ${k.id===(e==null?void 0:e.id)||ye==="system-admin"&&Be.has(k.id)?"opacity-50 cursor-not-allowed":""}`,disabled:k.id===(e==null?void 0:e.id)||ye==="system-admin"&&Be.has(k.id),children:[i.jsx(ha,{className:"h-4 w-4 mr-3"}),i.jsxs("div",{children:[i.jsx("div",{className:"font-medium",children:ye==="session-admin"?"Remove Stakeholder":"Delete User"}),i.jsx("div",{className:"text-xs text-gray-500",children:ye==="session-admin"?"Remove from all your sessions":k.id===(e==null?void 0:e.id)?"Cannot delete your own account":Be.has(k.id)?`Cannot delete protected account${js(k)?` (${js(k)})`:""}`:"Permanently delete this user"})]})]})]})})]})})})]},k.id)})})]}),i.jsx("div",{className:"bg-gray-50 px-6 py-4 border-t border-gray-200",children:i.jsxs("div",{className:"flex flex-wrap gap-4 text-sm",children:[i.jsxs("div",{className:"flex items-center",children:[i.jsx(Ln,{className:"h-4 w-4 mr-2 text-gray-500"}),i.jsxs("span",{className:"text-gray-600",children:["Total Users: ",i.jsx("strong",{children:l.length})]})]}),i.jsxs("div",{className:"flex items-center",children:[i.jsx(En,{className:"h-4 w-4 mr-2 text-[#C89212]"}),i.jsxs("span",{className:"text-gray-600",children:["System Admins: ",i.jsx("strong",{children:l.filter(k=>k.roles.isSystemAdmin).length})]})]}),i.jsxs("div",{className:"flex items-center",children:[i.jsx(Xr,{className:"h-4 w-4 mr-2 text-[#576C71]"}),i.jsxs("span",{className:"text-gray-600",children:["Session Admins: ",i.jsx("strong",{children:l.filter(k=>k.roles.sessionAdminCount>0).length})]})]}),i.jsxs("div",{className:"flex items-center",children:[i.jsx(ps,{className:"h-4 w-4 mr-2 text-[#8B5A4A]"}),i.jsxs("span",{className:"text-gray-600",children:["Stakeholders: ",i.jsx("strong",{children:l.filter(k=>k.roles.stakeholderSessionCount>0).length})]})]})]})})]}),i.jsx("div",{className:"md:hidden mt-4 bg-white rounded-lg shadow-md p-4",children:i.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[i.jsxs("div",{className:"flex items-center",children:[i.jsx(Ln,{className:"h-5 w-5 mr-2 text-gray-500 flex-shrink-0"}),i.jsxs("div",{children:[i.jsx("div",{className:"text-xs text-gray-500",children:"Total"}),i.jsx("div",{className:"text-lg font-bold text-gray-900",children:l.length})]})]}),i.jsxs("div",{className:"flex items-center",children:[i.jsx(En,{className:"h-5 w-5 mr-2 text-[#C89212] flex-shrink-0"}),i.jsxs("div",{children:[i.jsx("div",{className:"text-xs text-gray-500",children:"Sys Admins"}),i.jsx("div",{className:"text-lg font-bold text-gray-900",children:l.filter(k=>k.roles.isSystemAdmin).length})]})]}),i.jsxs("div",{className:"flex items-center",children:[i.jsx(Xr,{className:"h-5 w-5 mr-2 text-[#576C71] flex-shrink-0"}),i.jsxs("div",{children:[i.jsx("div",{className:"text-xs text-gray-500",children:"Session Admins"}),i.jsx("div",{className:"text-lg font-bold text-gray-900",children:l.filter(k=>k.roles.sessionAdminCount>0).length})]})]}),i.jsxs("div",{className:"flex items-center",children:[i.jsx(ps,{className:"h-5 w-5 mr-2 text-[#8B5A4A] flex-shrink-0"}),i.jsxs("div",{children:[i.jsx("div",{className:"text-xs text-gray-500",children:"Stakeholders"}),i.jsx("div",{className:"text-lg font-bold text-gray-900",children:l.filter(k=>k.roles.stakeholderSessionCount>0).length})]})]})]})}),(H||ie)&&i.jsx("div",{className:"mt-8 flex justify-center",children:i.jsxs("div",{className:"inline-flex items-center bg-gray-100 rounded-lg p-1",children:[i.jsxs("button",{onClick:()=>{(ie||H)&&Le("session-admin")},className:`px-4 py-2 rounded-md text-sm font-medium transition-colors flex items-center ${ye==="session-admin"?"bg-white text-[#2d4660] shadow-sm":"text-gray-600 hover:text-gray-900"}`,title:"Session Admin View",children:[i.jsx(Xr,{className:"h-4 w-4 inline mr-2"}),"Session Admin"]}),i.jsxs("button",{onClick:()=>{H&&Le("system-admin")},className:`px-4 py-2 rounded-md text-sm font-medium transition-colors flex items-center ${ye==="system-admin"?"bg-white text-[#2d4660] shadow-sm":"text-gray-600 hover:text-gray-900"}`,disabled:!H,title:H?"System Admin View":"Only available for System Admins",children:[i.jsx(En,{className:"h-4 w-4 inline mr-2"}),"System Admin"]})]})})]}),i.jsx("footer",{className:"mt-12 bg-gray-50 border-t border-gray-200",children:i.jsxs("div",{className:"container mx-auto px-4 py-6 max-w-6xl",children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 text-sm text-gray-600",children:[i.jsxs("div",{children:[i.jsx("h3",{className:"font-semibold text-gray-900 mb-2",children:"New Millennium Building Systems"}),i.jsxs("p",{className:"text-xs leading-relaxed",children:["A Steel Dynamics Company",i.jsx("br",{}),"Innovation in structural steel manufacturing"]})]}),i.jsxs("div",{children:[i.jsx("h3",{className:"font-semibold text-gray-900 mb-2",children:"Quick Links"}),i.jsxs("ul",{className:"space-y-1 text-xs",children:[i.jsx("li",{children:i.jsx("a",{href:"https://www.steeldynamics.com",target:"_blank",rel:"noopener noreferrer",className:"hover:text-[#2d4660] transition-colors",children:"Steel Dynamics Inc."})}),i.jsx("li",{children:i.jsx("a",{href:"https://www.newmill.com",target:"_blank",rel:"noopener noreferrer",className:"hover:text-[#2d4660] transition-colors",children:"New Millennium"})})]})]}),i.jsxs("div",{children:[i.jsx("h3",{className:"font-semibold text-gray-900 mb-2",children:"Need Help?"}),i.jsx("p",{className:"text-xs",children:"Contact your Product Owner or IT administrator for assistance with user management."})]})]}),i.jsx("div",{className:"mt-6 pt-6 border-t border-gray-200 text-center text-xs text-gray-500",children:i.jsx("p",{children:" 2025 New Millennium Building Systems, LLC. All rights reserved."})})]})}),Se&&ee&&ue&&i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4 overflow-y-auto",onClick:on,children:i.jsx("div",{className:"bg-white rounded-lg shadow-xl max-w-xl w-full my-8",onClick:k=>k.stopPropagation(),children:i.jsxs("div",{className:"p-6 overflow-visible",children:[i.jsxs("div",{className:"flex items-start justify-between mb-2",children:[i.jsxs("div",{className:"flex-1",children:[i.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-2",children:ue==="session-admin"?"Add Session Admin":ue==="remove-stakeholder"?"Remove Stakeholder":"Add Stakeholder"}),i.jsx("p",{className:"text-sm text-gray-600",children:ue==="remove-stakeholder"?i.jsxs(i.Fragment,{children:["Select sessions to remove ",i.jsx("strong",{children:ee.name})," as a stakeholder."]}):i.jsxs(i.Fragment,{children:["Select sessions to add ",i.jsx("strong",{children:ee.name})," as ",ue==="session-admin"?"an admin":"a stakeholder","."]})})]}),i.jsx("button",{onClick:on,className:"ml-4 p-1 rounded-md text-gray-400 hover:text-gray-600 hover:bg-gray-100 transition-colors flex-shrink-0","aria-label":"Close modal",children:i.jsx(xs,{className:"h-5 w-5"})})]}),i.jsx("div",{className:"mb-6",children:i.jsx(cee,{products:Vt,sessions:Yn(ue),selectedProductId:ot,onProductChange:k=>{rr(k),Ne([]),q(!0)},useAllSessions:U,onToggleAllSessions:k=>{q(k),k&&Ne([])},selectedSessionIds:ne,onSessionToggle:k=>{ne.includes(k)?Ne(ne.filter(R=>R!==k)):Ne([...ne,k])},getSessionStatus:ds,formatSessionDateRange:wr,filterSessions:Gi})}),i.jsx("div",{className:"flex justify-end mt-6",children:i.jsx("button",{onClick:Ps,disabled:!ot||!U&&ne.length===0,className:`px-6 py-2.5 rounded-lg transition-colors ${ot&&(U||ne.length>0)?ue==="remove-stakeholder"?"bg-red-600 text-white hover:bg-red-700":"bg-[#4f6d8e] text-white hover:bg-[#3d5670]":"bg-gray-300 text-gray-500 cursor-not-allowed"}`,children:(()=>{const R=(U?Gi(Yn(ue),ot||"").length:ne.length)>1;return ue==="remove-stakeholder"?`Remove from Session${R?"s":""}`:ue==="session-admin"?`Add to Session${R?"s":""} as Session Admin`:`Add to Session${R?"s":""} as a Stakeholder`})()})})]})})}),Ie&&Te&&i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:i.jsx("div",{className:"bg-white rounded-lg shadow-xl max-w-xl w-full max-h-[90vh] overflow-y-auto",children:i.jsxs("div",{className:"p-6",children:[i.jsxs("div",{className:"flex items-start mb-4",children:[i.jsx("div",{className:"flex-shrink-0 w-12 h-12 rounded-full bg-red-100 flex items-center justify-center",children:i.jsx(Qu,{className:"h-6 w-6 text-red-600"})}),i.jsxs("div",{className:"ml-4 flex-1",children:[i.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-1",children:"Delete User Account"}),i.jsx("p",{className:"text-sm text-gray-600",children:"This action cannot be undone. Please review the details below."})]})]}),i.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 mb-4",children:[i.jsxs("div",{className:"flex items-center mb-3",children:[i.jsx(ps,{className:"h-5 w-5 text-gray-400 mr-2"}),i.jsxs("div",{children:[i.jsx("div",{className:"font-medium text-gray-900",children:Te.name}),i.jsx("div",{className:"text-sm text-gray-500",children:Te.email})]})]}),i.jsxs("div",{className:"space-y-2 border-t border-gray-200 pt-3",children:[i.jsx("div",{className:"text-xs font-semibold text-gray-500 uppercase",children:"Current Roles"}),Te.roles.isSystemAdmin&&i.jsxs("div",{className:"flex items-center text-sm",children:[i.jsx(En,{className:"h-4 w-4 mr-2 text-[#C89212]"}),i.jsx("span",{className:"text-gray-700",children:"System Admin"})]}),Te.roles.sessionAdminCount>0&&i.jsxs("div",{className:"flex items-center text-sm",children:[i.jsx(Xr,{className:"h-4 w-4 mr-2 text-[#576C71]"}),i.jsxs("span",{className:"text-gray-700",children:["Session Admin in ",Te.roles.sessionAdminCount," session",Te.roles.sessionAdminCount!==1?"s":""]})]}),Te.roles.stakeholderSessionCount>0&&i.jsxs("div",{className:"flex items-center text-sm",children:[i.jsx(ps,{className:"h-4 w-4 mr-2 text-[#8B5A4A]"}),i.jsxs("span",{className:"text-gray-700",children:["Stakeholder in ",Te.roles.stakeholderSessionCount," session",Te.roles.stakeholderSessionCount!==1?"s":""]})]}),!Te.roles.isSystemAdmin&&Te.roles.sessionAdminCount===0&&Te.roles.stakeholderSessionCount===0&&i.jsx("div",{className:"text-sm text-gray-500",children:"No roles assigned"})]})]}),Te.adminInSessions&&Te.adminInSessions.length>0||Te.stakeholderInSessions&&Te.stakeholderInSessions.length>0?i.jsxs("div",{className:"mb-4",children:[i.jsx("div",{className:"text-sm font-semibold text-gray-700 mb-2",children:"User will be removed from these sessions:"}),i.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-3 max-h-48 overflow-y-auto",children:[Te.adminInSessions&&Te.adminInSessions.length>0&&i.jsxs("div",{className:"mb-3",children:[i.jsxs("div",{className:"text-xs font-semibold text-gray-600 mb-1.5 flex items-center",children:[i.jsx(Xr,{className:"h-3.5 w-3.5 mr-1.5 text-[#576C71]"}),"Admin Sessions (",Te.adminInSessions.length,")"]}),i.jsx("div",{className:"space-y-1 ml-5",children:Te.adminInSessions.map(k=>i.jsxs("div",{className:"text-sm text-gray-700",children:[" ",k.title||"Unnamed Session"]},k.id))})]}),Te.stakeholderInSessions&&Te.stakeholderInSessions.length>0&&i.jsxs("div",{children:[i.jsxs("div",{className:"text-xs font-semibold text-gray-600 mb-1.5 flex items-center",children:[i.jsx(ps,{className:"h-3.5 w-3.5 mr-1.5 text-[#8B5A4A]"}),"Stakeholder Sessions (",Te.stakeholderInSessions.length,")"]}),i.jsx("div",{className:"space-y-1 ml-5",children:Te.stakeholderInSessions.map(k=>i.jsxs("div",{className:"text-sm text-gray-700",children:[" ",k.title||"Unnamed Session"]},k.id))})]})]})]}):null,i.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-3 mb-4",children:i.jsxs("div",{className:"flex",children:[i.jsx("div",{className:"flex-shrink-0",children:i.jsx("svg",{className:"h-5 w-5 text-yellow-600",fill:"currentColor",viewBox:"0 0 20 20",children:i.jsx("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})})}),i.jsxs("div",{className:"ml-3",children:[i.jsx("h3",{className:"text-sm font-medium text-yellow-800",children:"Warning: This action is permanent"}),i.jsx("div",{className:"mt-1 text-sm text-yellow-700",children:i.jsxs("ul",{className:"list-disc pl-5 space-y-1",children:[i.jsx("li",{children:"User account will be permanently deleted"}),i.jsx("li",{children:"All authentication access will be revoked"}),i.jsx("li",{children:"User will be removed from all sessions"}),i.jsx("li",{children:"This action cannot be undone"})]})})]})]})}),i.jsxs("div",{className:"flex gap-3",children:[i.jsx("button",{onClick:Ra,disabled:Mt,className:"flex-1 px-4 py-2.5 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:"Cancel"}),i.jsx("button",{onClick:Is,disabled:Mt,className:"flex-1 px-4 py-2.5 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center",children:Mt?i.jsxs(i.Fragment,{children:[i.jsxs("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",fill:"none",viewBox:"0 0 24 24",children:[i.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),i.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Deleting..."]}):"Delete User Permanently"})]})]})})}),nt&&i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4 overflow-y-auto",onClick:Ws,children:i.jsx("div",{className:"bg-white rounded-lg shadow-xl max-w-3xl w-full my-8 max-h-[90vh] overflow-y-auto",onClick:k=>k.stopPropagation(),children:i.jsxs("div",{className:"p-6",children:[i.jsxs("div",{className:"flex items-start mb-6",children:[i.jsx("div",{className:"flex-shrink-0 w-12 h-12 rounded-full bg-[#8B5A4A]/10 flex items-center justify-center",children:i.jsx(Ln,{className:"h-6 w-6 text-[#8B5A4A]"})}),i.jsxs("div",{className:"ml-4 flex-1",children:[i.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-1",children:ye==="session-admin"?"Add New Stakeholder":"Add New User"}),i.jsx("p",{className:"text-sm text-gray-600",children:ye==="session-admin"?"Create a new user account and add as stakeholder to your sessions":"Create a new user account and assign roles"})]}),i.jsx("button",{onClick:Ws,disabled:dr,className:"flex-shrink-0 ml-4 p-1 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed","aria-label":"Close modal",children:i.jsx(xs,{className:"h-5 w-5"})})]}),i.jsxs("div",{className:"space-y-4",children:[Qt?i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Search Company Users (Optional)"}),Mr===!1?i.jsx("div",{className:"border border-gray-300 rounded-lg p-4 bg-blue-50",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex-1",children:[i.jsx("p",{className:"text-sm font-medium text-gray-900 mb-1",children:"Sign in with Microsoft to search company users"}),i.jsx("p",{className:"text-xs text-gray-600",children:"You need to sign in with your Microsoft account to use the company user search feature."})]}),i.jsxs("button",{type:"button",onClick:Ts,className:"ml-4 flex items-center px-4 py-2 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors shadow-sm",children:[i.jsx("img",{src:"/microsoft.svg",alt:"Microsoft",style:{width:"21px",height:"21px",marginRight:"8px"}}),i.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Sign in"})]})]})}):i.jsx(i.Fragment,{children:i.jsxs("div",{className:"relative",ref:J,children:[i.jsx("div",{className:"flex gap-2",children:i.jsxs("div",{className:"flex-1 relative",children:[i.jsx(xk,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),i.jsx("input",{type:"text",value:qt.searchTerm,onChange:k=>{const R=k.target.value;Wt(he=>({...he,searchTerm:R})),ki(R)},onFocus:()=>{qt.results.length>0&&Wt(k=>({...k,showResults:!0}))},className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#2D4660] focus:border-transparent",placeholder:"Search by name or email (min 2 characters)..."}),qt.isSearching&&i.jsx("div",{className:"absolute right-3 top-1/2 transform -translate-y-1/2",children:i.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-[#2D4660]"})})]})}),qt.showResults&&qt.results.length>0&&i.jsx("div",{className:"absolute z-10 w-full mt-1 bg-white border border-gray-300 rounded-lg shadow-lg max-h-60 overflow-y-auto",children:qt.results.map(k=>i.jsxs("button",{type:"button",onClick:()=>jo(k),className:"w-full px-4 py-3 text-left hover:bg-gray-50 border-b border-gray-100 last:border-b-0 transition-colors",children:[i.jsx("div",{className:"font-medium text-gray-900",children:k.displayName}),i.jsx("div",{className:"text-sm text-gray-500",children:k.mail||k.userPrincipalName}),k.jobTitle&&i.jsx("div",{className:"text-xs text-gray-400 mt-0.5",children:k.jobTitle})]},k.id))}),qt.error&&i.jsxs("div",{className:"absolute z-10 w-full mt-1 bg-red-50 border border-red-200 rounded-lg shadow-lg p-4 text-sm text-red-700",children:[i.jsx("div",{className:"font-medium mb-1",children:"Search Error"}),i.jsx("div",{className:"mb-2",children:qt.error}),qt.error.includes("User.ReadBasic.All")&&i.jsxs("div",{className:"mt-2 p-2 bg-red-100 rounded text-xs text-red-800",children:[i.jsx("div",{className:"font-medium mb-1",children:"To fix this:"}),i.jsxs("ol",{className:"list-decimal list-inside space-y-1 ml-2",children:[i.jsx("li",{children:"Go to Azure Portal  App registrations  Your app"}),i.jsx("li",{children:"API permissions  Add permission  Microsoft Graph  Delegated permissions"}),i.jsx("li",{children:'Add "User.ReadBasic.All" or "User.Read.All"'}),i.jsx("li",{children:'Click "Grant admin consent" (requires admin)'})]})]}),i.jsx("div",{className:"mt-2 text-xs text-red-600",children:"You can still enter the email manually below."})]}),qt.searchTerm.length>=2&&!qt.isSearching&&qt.results.length===0&&!qt.error&&i.jsx("div",{className:"absolute z-10 w-full mt-1 bg-white border border-gray-300 rounded-lg shadow-lg p-4 text-sm text-gray-500 text-center",children:"No users found. You can still enter the email manually below."})]})}),i.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"Search for users in your organization by name or email, or enter manually below"})]}):i.jsx("div",{children:i.jsx("button",{type:"button",className:"text-sm font-semibold text-[#2D4660] hover:underline focus:outline-none",onClick:()=>{sr(!0),Wt(ld())},children:"Search Company Users again"})}),i.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[i.jsxs("div",{children:[i.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Full Name ",i.jsx("span",{className:"text-red-500",children:"*"})]}),i.jsx("input",{type:"text",value:tt.name,onChange:k=>Bt({...tt,name:k.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#2D4660] focus:border-transparent",placeholder:"John Doe"})]}),i.jsxs("div",{children:[i.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Email Address ",i.jsx("span",{className:"text-red-500",children:"*"})]}),i.jsx("input",{type:"email",value:tt.email,onChange:k=>Bt({...tt,email:k.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#2D4660] focus:border-transparent",placeholder:"john.doe@newmill.com"})]})]}),ye==="system-admin"&&i.jsx("div",{className:"border-t border-gray-200 pt-4",children:i.jsxs("label",{className:"flex items-center gap-3 cursor-pointer",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("span",{className:"flex-shrink-0 w-6 h-6 flex items-center justify-center",children:i.jsx(En,{className:"h-4 w-4 text-[#C89212] transition-transform",style:{transform:tt.isSystemAdmin?"scale(2)":"scale(1)",transformOrigin:"center"}})}),i.jsx("span",{className:"text-sm font-medium text-gray-700",children:"System Administrator"})]}),i.jsx("input",{id:"systemAdminCheckbox",type:"checkbox",checked:tt.isSystemAdmin,onChange:k=>Bt({...tt,isSystemAdmin:k.target.checked}),className:"sr-only"}),i.jsx("span",{className:"flex items-center justify-center w-6 h-6 border rounded-md transition-colors",style:{borderColor:"#C89212",backgroundColor:tt.isSystemAdmin?"#C89212":"#ffffff"},children:tt.isSystemAdmin&&i.jsx("svg",{viewBox:"0 0 24 24",className:"w-4 h-4",stroke:"#ffffff",strokeWidth:"3",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",children:i.jsx("polyline",{points:"4 12 10 18 20 6"})})})]})}),ye==="system-admin"&&i.jsxs("div",{className:"border-t border-gray-200 pt-4",children:[i.jsxs("div",{className:"w-full flex items-center gap-2 py-2 hover:bg-gray-50 rounded-lg px-2 -ml-2 transition-colors",children:[i.jsxs("button",{type:"button",className:"flex items-center gap-2 text-sm font-medium text-gray-700 flex-1 text-left",onClick:()=>mr(k=>({sessionAdmin:!k.sessionAdmin,stakeholder:!1})),children:[i.jsx("span",{className:"flex items-center justify-center",style:{transform:ws?"scale(1.2)":"scale(1)"},children:i.jsx(Xr,{className:"h-4 w-4 text-[#576C71]"})}),i.jsx("span",{children:"Session Admin"}),ws&&ze&&i.jsx("span",{className:"ml-2 text-xs text-gray-500",children:ze})]}),ws&&i.jsx("button",{type:"button",onClick:qi,className:"px-3 py-1 rounded-full border text-xs font-semibold transition-colors hover:bg-[#576C71]/10",style:{borderColor:"#576C71",color:"#576C71",backgroundColor:"#f6fbfb"},children:"Reset"}),i.jsx(rs,{className:`h-4 w-4 text-gray-500 transition-transform ${lr.sessionAdmin?"rotate-180":""}`})]}),lr.sessionAdmin&&i.jsxs("div",{className:"mt-3 ml-6 space-y-3",children:[i.jsx("div",{children:i.jsx(Rh,{products:Vt,value:jr,onChange:k=>{Ir(k),Bt(R=>({...R,sessionAdminIds:[]})),nr(!0)},label:"Product *"})}),jr&&i.jsxs("div",{className:"space-y-3",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Session Selection *"}),i.jsxs("div",{className:"inline-flex items-center bg-gray-100 rounded-lg p-1",children:[i.jsx("button",{type:"button",onClick:()=>nr(!1),className:`px-4 py-2 rounded-md text-sm font-medium transition-colors flex items-center ${Cr?"text-gray-600 hover:text-gray-900":"bg-white text-[#2d4660] shadow-sm"}`,children:"Select Sessions"}),i.jsx("button",{type:"button",onClick:()=>{nr(!0),Bt(k=>({...k,sessionAdminIds:[]}))},className:`px-4 py-2 rounded-md text-sm font-medium transition-colors flex items-center ${Cr?"bg-white text-[#2d4660] shadow-sm":"text-gray-600 hover:text-gray-900"}`,children:"All Sessions"})]}),Cr&&i.jsx("p",{className:"mt-2 text-xs text-gray-500",children:"User will be added to all current and future sessions for this product"})]}),!Cr&&i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Sessions * (Current and Future)"}),In.length===0?i.jsx("p",{className:"text-sm text-gray-500",children:"No current or future sessions found for this product."}):i.jsx("div",{className:"max-h-48 overflow-y-auto border border-gray-300 rounded-md p-2",children:In.map(k=>i.jsxs("label",{className:"flex items-start px-3 py-2 hover:bg-gray-50 cursor-pointer border-b border-gray-100 last:border-b-0",children:[i.jsx("input",{type:"checkbox",checked:tt.sessionAdminIds.includes(k.id),onChange:()=>Ma(k.id),className:"w-4 h-4 border-gray-300 rounded focus:ring-[#2D4660] accent-green-600 mt-1",style:{accentColor:"#16a34a"}}),i.jsxs("div",{className:"ml-3 flex-1",children:[i.jsxs("div",{className:"flex items-start justify-between gap-2",children:[i.jsx("div",{className:"text-sm font-medium text-gray-900",children:k.title||"Unnamed Session"}),i.jsx("span",{className:`text-xs font-medium ${ds(k).color}`,children:ds(k).text})]}),i.jsx("div",{className:"text-xs text-gray-500 mt-0.5",children:wr(k)})]})]},k.id))})]})]})]})]}),ye==="session-admin"?i.jsxs("div",{className:"border-t border-gray-200 pt-4",children:[i.jsxs("div",{className:"flex items-center mb-3",children:[i.jsx(ps,{className:"h-4 w-4 mr-2 text-[#8B5A4A]"}),i.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Add as Stakeholder"}),tt.stakeholderSessionIds.length>0&&i.jsx("span",{className:"ml-2 px-2 py-0.5 bg-[#8B5A4A]/10 text-[#8B5A4A] text-xs rounded-full",children:tt.stakeholderSessionIds.length})]}),i.jsxs("div",{className:"space-y-3",children:[i.jsx("div",{children:i.jsx(Rh,{products:Vt,value:cr,onChange:k=>{Hr(k),Bt(R=>({...R,stakeholderSessionIds:[]})),fn(!0)},label:"Product *"})}),cr&&i.jsxs("div",{className:"space-y-3",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Session Selection *"}),i.jsxs("div",{className:"inline-flex items-center bg-gray-100 rounded-lg p-1",children:[i.jsx("button",{type:"button",onClick:()=>{fn(!1)},className:`px-4 py-2 rounded-md text-sm font-medium transition-colors flex items-center ${_r?"text-gray-600 hover:text-gray-900":"bg-white text-[#2d4660] shadow-sm"}`,children:"Select Sessions"}),i.jsx("button",{type:"button",onClick:()=>{fn(!0),Bt(k=>({...k,stakeholderSessionIds:[]}))},className:`px-4 py-2 rounded-md text-sm font-medium transition-colors flex items-center ${_r?"bg-white text-[#2d4660] shadow-sm":"text-gray-600 hover:text-gray-900"}`,children:"All Sessions"})]}),_r&&i.jsx("p",{className:"mt-2 text-xs text-gray-500",children:"User will be added to all current and future sessions for this product"})]}),!_r&&i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Sessions * (Current and Future)"}),Kr.length===0?i.jsx("p",{className:"text-sm text-gray-500",children:"No current or future sessions found for this product."}):i.jsx("div",{className:"max-h-48 overflow-y-auto border border-gray-300 rounded-md p-2",children:Kr.map(k=>i.jsxs("label",{className:"flex items-start px-3 py-2 hover:bg-gray-50 cursor-pointer border-b border-gray-100 last:border-b-0",children:[i.jsx("input",{type:"checkbox",checked:tt.stakeholderSessionIds.includes(k.id),onChange:()=>Ji(k.id),className:"w-4 h-4 border-gray-300 rounded focus:ring-[#2D4660] accent-green-600 mt-1",style:{accentColor:"#16a34a"}}),i.jsxs("div",{className:"ml-3 flex-1",children:[i.jsx("div",{className:"text-sm font-medium text-gray-900",children:k.title||"Unnamed Session"}),i.jsx("div",{className:"text-xs text-gray-500 mt-0.5",children:wr(k)}),i.jsx("div",{className:"text-xs mt-0.5",children:i.jsx("span",{className:`font-medium ${ds(k).color}`,children:ds(k).text})})]})]},k.id))})]})]})]})]}):i.jsxs("div",{className:"border-t border-gray-200 pt-4",children:[i.jsxs("div",{className:"w-full flex items-center gap-2 py-2 hover:bg-gray-50 rounded-lg px-2 -ml-2 transition-colors",children:[i.jsxs("button",{type:"button",className:"flex items-center gap-2 text-sm font-medium text-gray-700 flex-1 text-left",onClick:()=>mr(k=>({stakeholder:!k.stakeholder,sessionAdmin:!1})),children:[i.jsx("span",{className:"flex items-center justify-center",style:{transform:Tn?"scale(1.2)":"scale(1)"},children:i.jsx(ps,{className:"h-4 w-4 text-[#8B5A4A]"})}),i.jsx("span",{children:"Stakeholder"}),Tn&&Xe&&i.jsx("span",{className:"ml-2 text-xs text-gray-500",children:Xe})]}),Tn&&i.jsx("button",{type:"button",onClick:Ft,className:"px-3 py-1 rounded-full border text-xs font-semibold transition-colors hover:bg-[#8B5A4A]/10",style:{borderColor:"#8B5A4A",color:"#8B5A4A",backgroundColor:"#fcf8f4"},children:"Reset"}),i.jsx(rs,{className:`h-4 w-4 text-gray-500 transition-transform ${lr.stakeholder?"rotate-180":""}`})]}),lr.stakeholder&&i.jsxs("div",{className:"mt-3 ml-6 space-y-3",children:[i.jsx("div",{children:i.jsx(Rh,{products:Vt,value:cr,onChange:k=>{Hr(k),Bt(R=>({...R,stakeholderSessionIds:[]})),fn(!0)},label:"Product *"})}),cr&&i.jsxs("div",{className:"space-y-3",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Session Selection *"}),i.jsxs("div",{className:"inline-flex items-center bg-gray-100 rounded-lg p-1",children:[i.jsx("button",{type:"button",onClick:()=>{fn(!1)},className:`px-4 py-2 rounded-md text-sm font-medium transition-colors flex items-center ${_r?"text-gray-600 hover:text-gray-900":"bg-white text-[#2d4660] shadow-sm"}`,children:"Select Sessions"}),i.jsx("button",{type:"button",onClick:()=>{fn(!0),Bt(k=>({...k,stakeholderSessionIds:[]}))},className:`px-4 py-2 rounded-md text-sm font-medium transition-colors flex items-center ${_r?"bg-white text-[#2d4660] shadow-sm":"text-gray-600 hover:text-gray-900"}`,children:"All Sessions"})]}),_r&&i.jsx("p",{className:"mt-2 text-xs text-gray-500",children:"User will be added to all current and future sessions for this product"})]}),!_r&&i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Sessions * (Current and Future)"}),Kr.length===0?i.jsx("p",{className:"text-sm text-gray-500",children:"No current or future sessions found for this product."}):i.jsx("div",{className:"max-h-48 overflow-y-auto border border-gray-300 rounded-md p-2",children:Kr.map(k=>i.jsxs("label",{className:"flex items-start px-3 py-2 hover:bg-gray-50 cursor-pointer border-b border-gray-100 last:border-b-0",children:[i.jsx("input",{type:"checkbox",checked:tt.stakeholderSessionIds.includes(k.id),onChange:()=>Ji(k.id),className:"w-4 h-4 border-gray-300 rounded focus:ring-[#2D4660] accent-green-600 mt-1",style:{accentColor:"#16a34a"}}),i.jsxs("div",{className:"ml-3 flex-1",children:[i.jsxs("div",{className:"flex items-start justify-between gap-2",children:[i.jsx("div",{className:"text-sm font-medium text-gray-900",children:k.title||"Unnamed Session"}),i.jsx("span",{className:`text-xs font-medium ${ds(k).color}`,children:ds(k).text})]}),i.jsx("div",{className:"text-xs text-gray-500 mt-0.5",children:wr(k)})]})]},k.id))})]})]})]})]})]}),i.jsx("div",{className:"mt-6 pt-6 border-t border-gray-200 flex justify-end",children:i.jsx("button",{onClick:al,disabled:!!(dr||!tt.name.trim()||!tt.email.trim()||ye==="session-admin"&&(!cr||!_r&&tt.stakeholderSessionIds.length===0)||ye==="system-admin"&&lr.sessionAdmin&&jr&&!Cr&&tt.sessionAdminIds.length===0||ye==="system-admin"&&lr.stakeholder&&cr&&!_r&&tt.stakeholderSessionIds.length===0),className:"px-4 py-2.5 bg-[#2D4660] text-white rounded-lg hover:bg-[#173B65] transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center",children:dr?i.jsxs(i.Fragment,{children:[i.jsxs("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",fill:"none",viewBox:"0 0 24 24",children:[i.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),i.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),Yt(!0)]}):Yt(!1)})})]})})}),Dt&&Ee&&i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:i.jsx("div",{className:"bg-white rounded-lg shadow-xl max-w-lg w-full max-h-[90vh] overflow-y-auto",children:i.jsxs("div",{className:"p-6",children:[i.jsxs("div",{className:"flex items-start mb-4",children:[i.jsx("div",{className:"flex-shrink-0 w-12 h-12 rounded-full bg-blue-100 flex items-center justify-center",children:i.jsx(bd,{className:"h-6 w-6 text-blue-600"})}),i.jsxs("div",{className:"ml-4 flex-1",children:[i.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-1",children:"Edit User"}),i.jsx("p",{className:"text-sm text-gray-600",children:"Update user name and email address"})]}),i.jsx("button",{onClick:()=>{$t(!1),Je(null),Xt(""),br("")},className:"flex-shrink-0 ml-4 p-1 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-lg transition-colors","aria-label":"Close modal",children:i.jsx(xs,{className:"h-5 w-5"})})]}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Full Name ",i.jsx("span",{className:"text-red-500",children:"*"})]}),i.jsx("input",{type:"text",value:Jt,onChange:k=>Xt(k.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#2D4660] focus:border-transparent",placeholder:"John Doe",disabled:an})]}),i.jsxs("div",{children:[i.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Email Address ",i.jsx("span",{className:"text-red-500",children:"*"})]}),i.jsx("input",{type:"email",value:yt,onChange:k=>br(k.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#2D4660] focus:border-transparent",placeholder:"john.doe@newmill.com",disabled:an})]})]}),i.jsxs("div",{className:"flex justify-end gap-3 mt-6",children:[i.jsx("button",{onClick:()=>{$t(!1),Je(null),Xt(""),br("")},className:"px-4 py-2.5 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",disabled:an,children:"Cancel"}),i.jsx("button",{onClick:il,disabled:an||!Jt.trim()||!yt.trim(),className:"px-4 py-2.5 bg-[#2D4660] text-white rounded-lg hover:bg-[#173B65] transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:an?"Updating...":"Update User"})]})]})})}),Vi&&bs&&i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:i.jsx("div",{className:"bg-white rounded-lg shadow-xl max-w-lg w-full max-h-[90vh] overflow-y-auto",children:i.jsxs("div",{className:"p-6",children:[i.jsxs("div",{className:"flex items-start mb-4",children:[i.jsx("div",{className:"flex-shrink-0 w-12 h-12 rounded-full bg-green-100 flex items-center justify-center",children:i.jsx(kr,{className:"h-6 w-6 text-green-600"})}),i.jsxs("div",{className:"ml-4 flex-1",children:[i.jsxs("h2",{className:"text-xl font-bold text-gray-900 mb-1",children:[bs.userType," Created Successfully!"]}),i.jsx("p",{className:"text-sm text-gray-600",children:"The user account has been created and roles have been assigned."})]}),i.jsx("button",{onClick:()=>{sn(!1),Us(null)},className:"flex-shrink-0 ml-4 p-1 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-lg transition-colors","aria-label":"Close modal",children:i.jsx(xs,{className:"h-5 w-5"})})]}),i.jsx("div",{className:"bg-gray-50 rounded-lg p-4 mb-4",children:i.jsx("div",{className:"space-y-3",children:i.jsxs("div",{children:[i.jsx("div",{className:"text-xs font-semibold text-gray-500 uppercase mb-1",children:"Email Address"}),i.jsx("div",{className:"text-sm font-medium text-gray-900",children:bs.email})]})})}),i.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-3 mb-4",children:i.jsxs("div",{className:"flex",children:[i.jsx(dd,{className:"h-5 w-5 text-blue-600 flex-shrink-0 mt-0.5"}),i.jsxs("div",{className:"ml-2",children:[i.jsx("div",{className:"text-sm font-semibold text-blue-800 mb-1",children:"User Authentication"}),i.jsx("div",{className:"text-xs text-blue-700",children:"The user will sign in using their company Azure AD credentials. No password is needed."})]})]})}),i.jsx("div",{className:"flex justify-end",children:i.jsx("button",{onClick:()=>{sn(!1),Us(null)},className:"px-4 py-2.5 bg-[#2D4660] text-white rounded-lg hover:bg-[#173B65] transition-colors",children:"Done"})})]})})})]}):null}const dee="/feature-voting-app/assets/bottom-left-curve-T4fflHT3.png",fee=()=>i.jsx("div",{className:"fixed bottom-0 left-0 pointer-events-none z-0",children:i.jsx("img",{src:dee,alt:"",style:{maxWidth:"600px",height:"auto",opacity:.2}})});function hee(){return i.jsx(DM,{children:i.jsxs(L$,{children:[i.jsx(fee,{}),i.jsx($5,{basename:"/feature-voting-app",children:i.jsxs(d5,{children:[i.jsx(ci,{path:"/",element:i.jsx(c5,{to:"/login",replace:!0})}),i.jsx(ci,{path:"/login",element:i.jsx(QZ,{})}),i.jsx(ci,{path:"/sessions",element:i.jsx(eee,{})}),i.jsx(ci,{path:"/create-session",element:i.jsx(tee,{})}),i.jsx(ci,{path:"/manage-stakeholders",element:i.jsx(nee,{})}),i.jsx(ci,{path:"/manage-admins",element:i.jsx(see,{})}),i.jsx(ci,{path:"/vote",element:i.jsx(ix,{adminMode:!1})}),i.jsx(ci,{path:"/admin",element:i.jsx(ix,{adminMode:!0})}),i.jsx(ci,{path:"/results",element:i.jsx(ix,{resultsMode:!0})}),i.jsx(ci,{path:"/unauthorized",element:i.jsx(iee,{})}),i.jsx(ci,{path:"/system-admins",element:i.jsx(aee,{})}),i.jsx(ci,{path:"/users",element:i.jsx(uee,{})})]})})]})})}if(typeof window<"u"){const e=console.error;console.error=(...t)=>{var n;const r=((n=t[0])==null?void 0:n.toString())||"";r.includes("runtime.lastError")||r.includes("message channel closed")||e.apply(console,t)}}bD.createRoot(document.getElementById("root")).render(i.jsx(hee,{}));
