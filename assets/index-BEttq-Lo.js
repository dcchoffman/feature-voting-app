var aD=Object.defineProperty;var oD=(e,t,r)=>t in e?aD(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;var ny=(e,t,r)=>oD(e,typeof t!="symbol"?t+"":t,r);function lD(e,t){for(var r=0;r<t.length;r++){const n=t[r];if(typeof n!="string"&&!Array.isArray(n)){for(const s in n)if(s!=="default"&&!(s in e)){const i=Object.getOwnPropertyDescriptor(n,s);i&&Object.defineProperty(e,s,i.get?i:{enumerable:!0,get:()=>n[s]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const l of i.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&n(l)}).observe(document,{childList:!0,subtree:!0});function r(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(s){if(s.ep)return;s.ep=!0;const i=r(s);fetch(s.href,i)}})();function ca(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function cD(e){if(Object.prototype.hasOwnProperty.call(e,"__esModule"))return e;var t=e.default;if(typeof t=="function"){var r=function n(){return this instanceof n?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};r.prototype=t.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(e).forEach(function(n){var s=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(r,n,s.get?s:{enumerable:!0,get:function(){return e[n]}})}),r}var sy={exports:{}},qu={},iy={exports:{}},tr={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var $j;function uD(){if($j)return tr;$j=1;var e=Symbol.for("react.element"),t=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),i=Symbol.for("react.provider"),l=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),m=Symbol.for("react.memo"),f=Symbol.for("react.lazy"),p=Symbol.iterator;function v(U){return U===null||typeof U!="object"?null:(U=p&&U[p]||U["@@iterator"],typeof U=="function"?U:null)}var x={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},b=Object.assign,S={};function j(U,re,pe){this.props=U,this.context=re,this.refs=S,this.updater=pe||x}j.prototype.isReactComponent={},j.prototype.setState=function(U,re){if(typeof U!="object"&&typeof U!="function"&&U!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,U,re,"setState")},j.prototype.forceUpdate=function(U){this.updater.enqueueForceUpdate(this,U,"forceUpdate")};function N(){}N.prototype=j.prototype;function E(U,re,pe){this.props=U,this.context=re,this.refs=S,this.updater=pe||x}var C=E.prototype=new N;C.constructor=E,b(C,j.prototype),C.isPureReactComponent=!0;var I=Array.isArray,T=Object.prototype.hasOwnProperty,O={current:null},V={key:!0,ref:!0,__self:!0,__source:!0};function F(U,re,pe){var $e,de={},ke=null,Te=null;if(re!=null)for($e in re.ref!==void 0&&(Te=re.ref),re.key!==void 0&&(ke=""+re.key),re)T.call(re,$e)&&!V.hasOwnProperty($e)&&(de[$e]=re[$e]);var Ve=arguments.length-2;if(Ve===1)de.children=pe;else if(1<Ve){for(var J=Array(Ve),je=0;je<Ve;je++)J[je]=arguments[je+2];de.children=J}if(U&&U.defaultProps)for($e in Ve=U.defaultProps,Ve)de[$e]===void 0&&(de[$e]=Ve[$e]);return{$$typeof:e,type:U,key:ke,ref:Te,props:de,_owner:O.current}}function L(U,re){return{$$typeof:e,type:U.type,key:re,ref:U.ref,props:U.props,_owner:U._owner}}function H(U){return typeof U=="object"&&U!==null&&U.$$typeof===e}function le(U){var re={"=":"=0",":":"=2"};return"$"+U.replace(/[=:]/g,function(pe){return re[pe]})}var K=/\/+/g;function ie(U,re){return typeof U=="object"&&U!==null&&U.key!=null?le(""+U.key):re.toString(36)}function q(U,re,pe,$e,de){var ke=typeof U;(ke==="undefined"||ke==="boolean")&&(U=null);var Te=!1;if(U===null)Te=!0;else switch(ke){case"string":case"number":Te=!0;break;case"object":switch(U.$$typeof){case e:case t:Te=!0}}if(Te)return Te=U,de=de(Te),U=$e===""?"."+ie(Te,0):$e,I(de)?(pe="",U!=null&&(pe=U.replace(K,"$&/")+"/"),q(de,re,pe,"",function(je){return je})):de!=null&&(H(de)&&(de=L(de,pe+(!de.key||Te&&Te.key===de.key?"":(""+de.key).replace(K,"$&/")+"/")+U)),re.push(de)),1;if(Te=0,$e=$e===""?".":$e+":",I(U))for(var Ve=0;Ve<U.length;Ve++){ke=U[Ve];var J=$e+ie(ke,Ve);Te+=q(ke,re,pe,J,de)}else if(J=v(U),typeof J=="function")for(U=J.call(U),Ve=0;!(ke=U.next()).done;)ke=ke.value,J=$e+ie(ke,Ve++),Te+=q(ke,re,pe,J,de);else if(ke==="object")throw re=String(U),Error("Objects are not valid as a React child (found: "+(re==="[object Object]"?"object with keys {"+Object.keys(U).join(", ")+"}":re)+"). If you meant to render a collection of children, use an array instead.");return Te}function G(U,re,pe){if(U==null)return U;var $e=[],de=0;return q(U,$e,"","",function(ke){return re.call(pe,ke,de++)}),$e}function ve(U){if(U._status===-1){var re=U._result;re=re(),re.then(function(pe){(U._status===0||U._status===-1)&&(U._status=1,U._result=pe)},function(pe){(U._status===0||U._status===-1)&&(U._status=2,U._result=pe)}),U._status===-1&&(U._status=0,U._result=re)}if(U._status===1)return U._result.default;throw U._result}var M={current:null},Y={transition:null},ce={ReactCurrentDispatcher:M,ReactCurrentBatchConfig:Y,ReactCurrentOwner:O};function he(){throw Error("act(...) is not supported in production builds of React.")}return tr.Children={map:G,forEach:function(U,re,pe){G(U,function(){re.apply(this,arguments)},pe)},count:function(U){var re=0;return G(U,function(){re++}),re},toArray:function(U){return G(U,function(re){return re})||[]},only:function(U){if(!H(U))throw Error("React.Children.only expected to receive a single React element child.");return U}},tr.Component=j,tr.Fragment=r,tr.Profiler=s,tr.PureComponent=E,tr.StrictMode=n,tr.Suspense=d,tr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ce,tr.act=he,tr.cloneElement=function(U,re,pe){if(U==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+U+".");var $e=b({},U.props),de=U.key,ke=U.ref,Te=U._owner;if(re!=null){if(re.ref!==void 0&&(ke=re.ref,Te=O.current),re.key!==void 0&&(de=""+re.key),U.type&&U.type.defaultProps)var Ve=U.type.defaultProps;for(J in re)T.call(re,J)&&!V.hasOwnProperty(J)&&($e[J]=re[J]===void 0&&Ve!==void 0?Ve[J]:re[J])}var J=arguments.length-2;if(J===1)$e.children=pe;else if(1<J){Ve=Array(J);for(var je=0;je<J;je++)Ve[je]=arguments[je+2];$e.children=Ve}return{$$typeof:e,type:U.type,key:de,ref:ke,props:$e,_owner:Te}},tr.createContext=function(U){return U={$$typeof:l,_currentValue:U,_currentValue2:U,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},U.Provider={$$typeof:i,_context:U},U.Consumer=U},tr.createElement=F,tr.createFactory=function(U){var re=F.bind(null,U);return re.type=U,re},tr.createRef=function(){return{current:null}},tr.forwardRef=function(U){return{$$typeof:u,render:U}},tr.isValidElement=H,tr.lazy=function(U){return{$$typeof:f,_payload:{_status:-1,_result:U},_init:ve}},tr.memo=function(U,re){return{$$typeof:m,type:U,compare:re===void 0?null:re}},tr.startTransition=function(U){var re=Y.transition;Y.transition={};try{U()}finally{Y.transition=re}},tr.unstable_act=he,tr.useCallback=function(U,re){return M.current.useCallback(U,re)},tr.useContext=function(U){return M.current.useContext(U)},tr.useDebugValue=function(){},tr.useDeferredValue=function(U){return M.current.useDeferredValue(U)},tr.useEffect=function(U,re){return M.current.useEffect(U,re)},tr.useId=function(){return M.current.useId()},tr.useImperativeHandle=function(U,re,pe){return M.current.useImperativeHandle(U,re,pe)},tr.useInsertionEffect=function(U,re){return M.current.useInsertionEffect(U,re)},tr.useLayoutEffect=function(U,re){return M.current.useLayoutEffect(U,re)},tr.useMemo=function(U,re){return M.current.useMemo(U,re)},tr.useReducer=function(U,re,pe){return M.current.useReducer(U,re,pe)},tr.useRef=function(U){return M.current.useRef(U)},tr.useState=function(U){return M.current.useState(U)},tr.useSyncExternalStore=function(U,re,pe){return M.current.useSyncExternalStore(U,re,pe)},tr.useTransition=function(){return M.current.useTransition()},tr.version="18.3.1",tr}var Rj;function nu(){return Rj||(Rj=1,iy.exports=uD()),iy.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Mj;function dD(){if(Mj)return qu;Mj=1;var e=nu(),t=Symbol.for("react.element"),r=Symbol.for("react.fragment"),n=Object.prototype.hasOwnProperty,s=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,i={key:!0,ref:!0,__self:!0,__source:!0};function l(u,d,m){var f,p={},v=null,x=null;m!==void 0&&(v=""+m),d.key!==void 0&&(v=""+d.key),d.ref!==void 0&&(x=d.ref);for(f in d)n.call(d,f)&&!i.hasOwnProperty(f)&&(p[f]=d[f]);if(u&&u.defaultProps)for(f in d=u.defaultProps,d)p[f]===void 0&&(p[f]=d[f]);return{$$typeof:t,type:u,key:v,ref:x,props:p,_owner:s.current}}return qu.Fragment=r,qu.jsx=l,qu.jsxs=l,qu}var Fj;function fD(){return Fj||(Fj=1,sy.exports=dD()),sy.exports}var a=fD(),y=nu();const Nt=ca(y),hD=lD({__proto__:null,default:Nt},[y]);var Zf={},ay={exports:{}},Ws={},oy={exports:{}},ly={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Lj;function mD(){return Lj||(Lj=1,(function(e){function t(Y,ce){var he=Y.length;Y.push(ce);e:for(;0<he;){var U=he-1>>>1,re=Y[U];if(0<s(re,ce))Y[U]=ce,Y[he]=re,he=U;else break e}}function r(Y){return Y.length===0?null:Y[0]}function n(Y){if(Y.length===0)return null;var ce=Y[0],he=Y.pop();if(he!==ce){Y[0]=he;e:for(var U=0,re=Y.length,pe=re>>>1;U<pe;){var $e=2*(U+1)-1,de=Y[$e],ke=$e+1,Te=Y[ke];if(0>s(de,he))ke<re&&0>s(Te,de)?(Y[U]=Te,Y[ke]=he,U=ke):(Y[U]=de,Y[$e]=he,U=$e);else if(ke<re&&0>s(Te,he))Y[U]=Te,Y[ke]=he,U=ke;else break e}}return ce}function s(Y,ce){var he=Y.sortIndex-ce.sortIndex;return he!==0?he:Y.id-ce.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;e.unstable_now=function(){return i.now()}}else{var l=Date,u=l.now();e.unstable_now=function(){return l.now()-u}}var d=[],m=[],f=1,p=null,v=3,x=!1,b=!1,S=!1,j=typeof setTimeout=="function"?setTimeout:null,N=typeof clearTimeout=="function"?clearTimeout:null,E=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function C(Y){for(var ce=r(m);ce!==null;){if(ce.callback===null)n(m);else if(ce.startTime<=Y)n(m),ce.sortIndex=ce.expirationTime,t(d,ce);else break;ce=r(m)}}function I(Y){if(S=!1,C(Y),!b)if(r(d)!==null)b=!0,ve(T);else{var ce=r(m);ce!==null&&M(I,ce.startTime-Y)}}function T(Y,ce){b=!1,S&&(S=!1,N(F),F=-1),x=!0;var he=v;try{for(C(ce),p=r(d);p!==null&&(!(p.expirationTime>ce)||Y&&!le());){var U=p.callback;if(typeof U=="function"){p.callback=null,v=p.priorityLevel;var re=U(p.expirationTime<=ce);ce=e.unstable_now(),typeof re=="function"?p.callback=re:p===r(d)&&n(d),C(ce)}else n(d);p=r(d)}if(p!==null)var pe=!0;else{var $e=r(m);$e!==null&&M(I,$e.startTime-ce),pe=!1}return pe}finally{p=null,v=he,x=!1}}var O=!1,V=null,F=-1,L=5,H=-1;function le(){return!(e.unstable_now()-H<L)}function K(){if(V!==null){var Y=e.unstable_now();H=Y;var ce=!0;try{ce=V(!0,Y)}finally{ce?ie():(O=!1,V=null)}}else O=!1}var ie;if(typeof E=="function")ie=function(){E(K)};else if(typeof MessageChannel<"u"){var q=new MessageChannel,G=q.port2;q.port1.onmessage=K,ie=function(){G.postMessage(null)}}else ie=function(){j(K,0)};function ve(Y){V=Y,O||(O=!0,ie())}function M(Y,ce){F=j(function(){Y(e.unstable_now())},ce)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(Y){Y.callback=null},e.unstable_continueExecution=function(){b||x||(b=!0,ve(T))},e.unstable_forceFrameRate=function(Y){0>Y||125<Y?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):L=0<Y?Math.floor(1e3/Y):5},e.unstable_getCurrentPriorityLevel=function(){return v},e.unstable_getFirstCallbackNode=function(){return r(d)},e.unstable_next=function(Y){switch(v){case 1:case 2:case 3:var ce=3;break;default:ce=v}var he=v;v=ce;try{return Y()}finally{v=he}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(Y,ce){switch(Y){case 1:case 2:case 3:case 4:case 5:break;default:Y=3}var he=v;v=Y;try{return ce()}finally{v=he}},e.unstable_scheduleCallback=function(Y,ce,he){var U=e.unstable_now();switch(typeof he=="object"&&he!==null?(he=he.delay,he=typeof he=="number"&&0<he?U+he:U):he=U,Y){case 1:var re=-1;break;case 2:re=250;break;case 5:re=1073741823;break;case 4:re=1e4;break;default:re=5e3}return re=he+re,Y={id:f++,callback:ce,priorityLevel:Y,startTime:he,expirationTime:re,sortIndex:-1},he>U?(Y.sortIndex=he,t(m,Y),r(d)===null&&Y===r(m)&&(S?(N(F),F=-1):S=!0,M(I,he-U))):(Y.sortIndex=re,t(d,Y),b||x||(b=!0,ve(T))),Y},e.unstable_shouldYield=le,e.unstable_wrapCallback=function(Y){var ce=v;return function(){var he=v;v=ce;try{return Y.apply(this,arguments)}finally{v=he}}}})(ly)),ly}var zj;function pD(){return zj||(zj=1,oy.exports=mD()),oy.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Uj;function gD(){if(Uj)return Ws;Uj=1;var e=nu(),t=pD();function r(o){for(var c="https://reactjs.org/docs/error-decoder.html?invariant="+o,h=1;h<arguments.length;h++)c+="&args[]="+encodeURIComponent(arguments[h]);return"Minified React error #"+o+"; visit "+c+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var n=new Set,s={};function i(o,c){l(o,c),l(o+"Capture",c)}function l(o,c){for(s[o]=c,o=0;o<c.length;o++)n.add(c[o])}var u=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),d=Object.prototype.hasOwnProperty,m=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,f={},p={};function v(o){return d.call(p,o)?!0:d.call(f,o)?!1:m.test(o)?p[o]=!0:(f[o]=!0,!1)}function x(o,c,h,g){if(h!==null&&h.type===0)return!1;switch(typeof c){case"function":case"symbol":return!0;case"boolean":return g?!1:h!==null?!h.acceptsBooleans:(o=o.toLowerCase().slice(0,5),o!=="data-"&&o!=="aria-");default:return!1}}function b(o,c,h,g){if(c===null||typeof c>"u"||x(o,c,h,g))return!0;if(g)return!1;if(h!==null)switch(h.type){case 3:return!c;case 4:return c===!1;case 5:return isNaN(c);case 6:return isNaN(c)||1>c}return!1}function S(o,c,h,g,k,_,P){this.acceptsBooleans=c===2||c===3||c===4,this.attributeName=g,this.attributeNamespace=k,this.mustUseProperty=h,this.propertyName=o,this.type=c,this.sanitizeURL=_,this.removeEmptyString=P}var j={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(o){j[o]=new S(o,0,!1,o,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(o){var c=o[0];j[c]=new S(c,1,!1,o[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(o){j[o]=new S(o,2,!1,o.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(o){j[o]=new S(o,2,!1,o,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(o){j[o]=new S(o,3,!1,o.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(o){j[o]=new S(o,3,!0,o,null,!1,!1)}),["capture","download"].forEach(function(o){j[o]=new S(o,4,!1,o,null,!1,!1)}),["cols","rows","size","span"].forEach(function(o){j[o]=new S(o,6,!1,o,null,!1,!1)}),["rowSpan","start"].forEach(function(o){j[o]=new S(o,5,!1,o.toLowerCase(),null,!1,!1)});var N=/[\-:]([a-z])/g;function E(o){return o[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(o){var c=o.replace(N,E);j[c]=new S(c,1,!1,o,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(o){var c=o.replace(N,E);j[c]=new S(c,1,!1,o,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(o){var c=o.replace(N,E);j[c]=new S(c,1,!1,o,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(o){j[o]=new S(o,1,!1,o.toLowerCase(),null,!1,!1)}),j.xlinkHref=new S("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(o){j[o]=new S(o,1,!1,o.toLowerCase(),null,!0,!0)});function C(o,c,h,g){var k=j.hasOwnProperty(c)?j[c]:null;(k!==null?k.type!==0:g||!(2<c.length)||c[0]!=="o"&&c[0]!=="O"||c[1]!=="n"&&c[1]!=="N")&&(b(c,h,k,g)&&(h=null),g||k===null?v(c)&&(h===null?o.removeAttribute(c):o.setAttribute(c,""+h)):k.mustUseProperty?o[k.propertyName]=h===null?k.type===3?!1:"":h:(c=k.attributeName,g=k.attributeNamespace,h===null?o.removeAttribute(c):(k=k.type,h=k===3||k===4&&h===!0?"":""+h,g?o.setAttributeNS(g,c,h):o.setAttribute(c,h))))}var I=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,T=Symbol.for("react.element"),O=Symbol.for("react.portal"),V=Symbol.for("react.fragment"),F=Symbol.for("react.strict_mode"),L=Symbol.for("react.profiler"),H=Symbol.for("react.provider"),le=Symbol.for("react.context"),K=Symbol.for("react.forward_ref"),ie=Symbol.for("react.suspense"),q=Symbol.for("react.suspense_list"),G=Symbol.for("react.memo"),ve=Symbol.for("react.lazy"),M=Symbol.for("react.offscreen"),Y=Symbol.iterator;function ce(o){return o===null||typeof o!="object"?null:(o=Y&&o[Y]||o["@@iterator"],typeof o=="function"?o:null)}var he=Object.assign,U;function re(o){if(U===void 0)try{throw Error()}catch(h){var c=h.stack.trim().match(/\n( *(at )?)/);U=c&&c[1]||""}return`
`+U+o}var pe=!1;function $e(o,c){if(!o||pe)return"";pe=!0;var h=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(c)if(c=function(){throw Error()},Object.defineProperty(c.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(c,[])}catch(xe){var g=xe}Reflect.construct(o,[],c)}else{try{c.call()}catch(xe){g=xe}o.call(c.prototype)}else{try{throw Error()}catch(xe){g=xe}o()}}catch(xe){if(xe&&g&&typeof xe.stack=="string"){for(var k=xe.stack.split(`
`),_=g.stack.split(`
`),P=k.length-1,B=_.length-1;1<=P&&0<=B&&k[P]!==_[B];)B--;for(;1<=P&&0<=B;P--,B--)if(k[P]!==_[B]){if(P!==1||B!==1)do if(P--,B--,0>B||k[P]!==_[B]){var Q=`
`+k[P].replace(" at new "," at ");return o.displayName&&Q.includes("<anonymous>")&&(Q=Q.replace("<anonymous>",o.displayName)),Q}while(1<=P&&0<=B);break}}}finally{pe=!1,Error.prepareStackTrace=h}return(o=o?o.displayName||o.name:"")?re(o):""}function de(o){switch(o.tag){case 5:return re(o.type);case 16:return re("Lazy");case 13:return re("Suspense");case 19:return re("SuspenseList");case 0:case 2:case 15:return o=$e(o.type,!1),o;case 11:return o=$e(o.type.render,!1),o;case 1:return o=$e(o.type,!0),o;default:return""}}function ke(o){if(o==null)return null;if(typeof o=="function")return o.displayName||o.name||null;if(typeof o=="string")return o;switch(o){case V:return"Fragment";case O:return"Portal";case L:return"Profiler";case F:return"StrictMode";case ie:return"Suspense";case q:return"SuspenseList"}if(typeof o=="object")switch(o.$$typeof){case le:return(o.displayName||"Context")+".Consumer";case H:return(o._context.displayName||"Context")+".Provider";case K:var c=o.render;return o=o.displayName,o||(o=c.displayName||c.name||"",o=o!==""?"ForwardRef("+o+")":"ForwardRef"),o;case G:return c=o.displayName||null,c!==null?c:ke(o.type)||"Memo";case ve:c=o._payload,o=o._init;try{return ke(o(c))}catch{}}return null}function Te(o){var c=o.type;switch(o.tag){case 24:return"Cache";case 9:return(c.displayName||"Context")+".Consumer";case 10:return(c._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return o=c.render,o=o.displayName||o.name||"",c.displayName||(o!==""?"ForwardRef("+o+")":"ForwardRef");case 7:return"Fragment";case 5:return c;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return ke(c);case 8:return c===F?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof c=="function")return c.displayName||c.name||null;if(typeof c=="string")return c}return null}function Ve(o){switch(typeof o){case"boolean":case"number":case"string":case"undefined":return o;case"object":return o;default:return""}}function J(o){var c=o.type;return(o=o.nodeName)&&o.toLowerCase()==="input"&&(c==="checkbox"||c==="radio")}function je(o){var c=J(o)?"checked":"value",h=Object.getOwnPropertyDescriptor(o.constructor.prototype,c),g=""+o[c];if(!o.hasOwnProperty(c)&&typeof h<"u"&&typeof h.get=="function"&&typeof h.set=="function"){var k=h.get,_=h.set;return Object.defineProperty(o,c,{configurable:!0,get:function(){return k.call(this)},set:function(P){g=""+P,_.call(this,P)}}),Object.defineProperty(o,c,{enumerable:h.enumerable}),{getValue:function(){return g},setValue:function(P){g=""+P},stopTracking:function(){o._valueTracker=null,delete o[c]}}}}function fe(o){o._valueTracker||(o._valueTracker=je(o))}function se(o){if(!o)return!1;var c=o._valueTracker;if(!c)return!0;var h=c.getValue(),g="";return o&&(g=J(o)?o.checked?"true":"false":o.value),o=g,o!==h?(c.setValue(o),!0):!1}function Ze(o){if(o=o||(typeof document<"u"?document:void 0),typeof o>"u")return null;try{return o.activeElement||o.body}catch{return o.body}}function Ge(o,c){var h=c.checked;return he({},c,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:h??o._wrapperState.initialChecked})}function Ue(o,c){var h=c.defaultValue==null?"":c.defaultValue,g=c.checked!=null?c.checked:c.defaultChecked;h=Ve(c.value!=null?c.value:h),o._wrapperState={initialChecked:g,initialValue:h,controlled:c.type==="checkbox"||c.type==="radio"?c.checked!=null:c.value!=null}}function At(o,c){c=c.checked,c!=null&&C(o,"checked",c,!1)}function gt(o,c){At(o,c);var h=Ve(c.value),g=c.type;if(h!=null)g==="number"?(h===0&&o.value===""||o.value!=h)&&(o.value=""+h):o.value!==""+h&&(o.value=""+h);else if(g==="submit"||g==="reset"){o.removeAttribute("value");return}c.hasOwnProperty("value")?Yt(o,c.type,h):c.hasOwnProperty("defaultValue")&&Yt(o,c.type,Ve(c.defaultValue)),c.checked==null&&c.defaultChecked!=null&&(o.defaultChecked=!!c.defaultChecked)}function wt(o,c,h){if(c.hasOwnProperty("value")||c.hasOwnProperty("defaultValue")){var g=c.type;if(!(g!=="submit"&&g!=="reset"||c.value!==void 0&&c.value!==null))return;c=""+o._wrapperState.initialValue,h||c===o.value||(o.value=c),o.defaultValue=c}h=o.name,h!==""&&(o.name=""),o.defaultChecked=!!o._wrapperState.initialChecked,h!==""&&(o.name=h)}function Yt(o,c,h){(c!=="number"||Ze(o.ownerDocument)!==o)&&(h==null?o.defaultValue=""+o._wrapperState.initialValue:o.defaultValue!==""+h&&(o.defaultValue=""+h))}var z=Array.isArray;function W(o,c,h,g){if(o=o.options,c){c={};for(var k=0;k<h.length;k++)c["$"+h[k]]=!0;for(h=0;h<o.length;h++)k=c.hasOwnProperty("$"+o[h].value),o[h].selected!==k&&(o[h].selected=k),k&&g&&(o[h].defaultSelected=!0)}else{for(h=""+Ve(h),c=null,k=0;k<o.length;k++){if(o[k].value===h){o[k].selected=!0,g&&(o[k].defaultSelected=!0);return}c!==null||o[k].disabled||(c=o[k])}c!==null&&(c.selected=!0)}}function ee(o,c){if(c.dangerouslySetInnerHTML!=null)throw Error(r(91));return he({},c,{value:void 0,defaultValue:void 0,children:""+o._wrapperState.initialValue})}function Se(o,c){var h=c.value;if(h==null){if(h=c.children,c=c.defaultValue,h!=null){if(c!=null)throw Error(r(92));if(z(h)){if(1<h.length)throw Error(r(93));h=h[0]}c=h}c==null&&(c=""),h=c}o._wrapperState={initialValue:Ve(h)}}function Ne(o,c){var h=Ve(c.value),g=Ve(c.defaultValue);h!=null&&(h=""+h,h!==o.value&&(o.value=h),c.defaultValue==null&&o.defaultValue!==h&&(o.defaultValue=h)),g!=null&&(o.defaultValue=""+g)}function Ee(o){var c=o.textContent;c===o._wrapperState.initialValue&&c!==""&&c!==null&&(o.value=c)}function qe(o){switch(o){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Fe(o,c){return o==null||o==="http://www.w3.org/1999/xhtml"?qe(c):o==="http://www.w3.org/2000/svg"&&c==="foreignObject"?"http://www.w3.org/1999/xhtml":o}var Mt,We=(function(o){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(c,h,g,k){MSApp.execUnsafeLocalFunction(function(){return o(c,h,g,k)})}:o})(function(o,c){if(o.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in o)o.innerHTML=c;else{for(Mt=Mt||document.createElement("div"),Mt.innerHTML="<svg>"+c.valueOf().toString()+"</svg>",c=Mt.firstChild;o.firstChild;)o.removeChild(o.firstChild);for(;c.firstChild;)o.appendChild(c.firstChild)}});function yt(o,c){if(c){var h=o.firstChild;if(h&&h===o.lastChild&&h.nodeType===3){h.nodeValue=c;return}}o.textContent=c}var kt={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},ze=["Webkit","ms","Moz","O"];Object.keys(kt).forEach(function(o){ze.forEach(function(c){c=c+o.charAt(0).toUpperCase()+o.substring(1),kt[c]=kt[o]})});function Le(o,c,h){return c==null||typeof c=="boolean"||c===""?"":h||typeof c!="number"||c===0||kt.hasOwnProperty(o)&&kt[o]?(""+c).trim():c+"px"}function ct(o,c){o=o.style;for(var h in c)if(c.hasOwnProperty(h)){var g=h.indexOf("--")===0,k=Le(h,c[h],g);h==="float"&&(h="cssFloat"),g?o.setProperty(h,k):o[h]=k}}var at=he({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Je(o,c){if(c){if(at[o]&&(c.children!=null||c.dangerouslySetInnerHTML!=null))throw Error(r(137,o));if(c.dangerouslySetInnerHTML!=null){if(c.children!=null)throw Error(r(60));if(typeof c.dangerouslySetInnerHTML!="object"||!("__html"in c.dangerouslySetInnerHTML))throw Error(r(61))}if(c.style!=null&&typeof c.style!="object")throw Error(r(62))}}function Ct(o,c){if(o.indexOf("-")===-1)return typeof c.is=="string";switch(o){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Wt=null;function rr(o){return o=o.target||o.srcElement||window,o.correspondingUseElement&&(o=o.correspondingUseElement),o.nodeType===3?o.parentNode:o}var sr=null,rt=null,Ht=null;function Ft(o){if(o=Pu(o)){if(typeof sr!="function")throw Error(r(280));var c=o.stateNode;c&&(c=mf(c),sr(o.stateNode,o.type,c))}}function vt(o){rt?Ht?Ht.push(o):Ht=[o]:rt=o}function ir(){if(rt){var o=rt,c=Ht;if(Ht=rt=null,Ft(o),c)for(o=0;o<c.length;o++)Ft(c[o])}}function yr(o,c){return o(c)}function hr(){}var Fr=!1;function Jt(o,c,h){if(Fr)return o(c,h);Fr=!0;try{return yr(o,c,h)}finally{Fr=!1,(rt!==null||Ht!==null)&&(hr(),ir())}}function mr(o,c){var h=o.stateNode;if(h===null)return null;var g=mf(h);if(g===null)return null;h=g[c];e:switch(c){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(g=!g.disabled)||(o=o.type,g=!(o==="button"||o==="input"||o==="select"||o==="textarea")),o=!g;break e;default:o=!1}if(o)return null;if(h&&typeof h!="function")throw Error(r(231,c,typeof h));return h}var rs=!1;if(u)try{var nr={};Object.defineProperty(nr,"passive",{get:function(){rs=!0}}),window.addEventListener("test",nr,nr),window.removeEventListener("test",nr,nr)}catch{rs=!1}function bn(o,c,h,g,k,_,P,B,Q){var xe=Array.prototype.slice.call(arguments,3);try{c.apply(h,xe)}catch(Me){this.onError(Me)}}var Qt=!1,pr=null,ln=!1,lr=null,In={onError:function(o){Qt=!0,pr=o}};function Hr(o,c,h,g,k,_,P,B,Q){Qt=!1,pr=null,bn.apply(In,arguments)}function Lr(o,c,h,g,k,_,P,B,Q){if(Hr.apply(this,arguments),Qt){if(Qt){var xe=pr;Qt=!1,pr=null}else throw Error(r(198));ln||(ln=!0,lr=xe)}}function vr(o){var c=o,h=o;if(o.alternate)for(;c.return;)c=c.return;else{o=c;do c=o,(c.flags&4098)!==0&&(h=c.return),o=c.return;while(o)}return c.tag===3?h:null}function hn(o){if(o.tag===13){var c=o.memoizedState;if(c===null&&(o=o.alternate,o!==null&&(c=o.memoizedState)),c!==null)return c.dehydrated}return null}function ns(o){if(vr(o)!==o)throw Error(r(188))}function jn(o){var c=o.alternate;if(!c){if(c=vr(o),c===null)throw Error(r(188));return c!==o?null:o}for(var h=o,g=c;;){var k=h.return;if(k===null)break;var _=k.alternate;if(_===null){if(g=k.return,g!==null){h=g;continue}break}if(k.child===_.child){for(_=k.child;_;){if(_===h)return ns(k),o;if(_===g)return ns(k),c;_=_.sibling}throw Error(r(188))}if(h.return!==g.return)h=k,g=_;else{for(var P=!1,B=k.child;B;){if(B===h){P=!0,h=k,g=_;break}if(B===g){P=!0,g=k,h=_;break}B=B.sibling}if(!P){for(B=_.child;B;){if(B===h){P=!0,h=_,g=k;break}if(B===g){P=!0,g=_,h=k;break}B=B.sibling}if(!P)throw Error(r(189))}}if(h.alternate!==g)throw Error(r(190))}if(h.tag!==3)throw Error(r(188));return h.stateNode.current===h?o:c}function ss(o){return o=jn(o),o!==null?_s(o):null}function _s(o){if(o.tag===5||o.tag===6)return o;for(o=o.child;o!==null;){var c=_s(o);if(c!==null)return c;o=o.sibling}return null}var Dn=t.unstable_scheduleCallback,$s=t.unstable_cancelCallback,Cr=t.unstable_shouldYield,Kr=t.unstable_requestPaint,Kt=t.unstable_now,Er=t.unstable_getCurrentPriorityLevel,_r=t.unstable_ImmediatePriority,Sn=t.unstable_UserBlockingPriority,en=t.unstable_NormalPriority,ps=t.unstable_LowPriority,Xs=t.unstable_IdlePriority,X=null,be=null;function Pe(o){if(be&&typeof be.onCommitFiberRoot=="function")try{be.onCommitFiberRoot(X,o,void 0,(o.current.flags&128)===128)}catch{}}var Oe=Math.clz32?Math.clz32:Lt,Xe=Math.log,Ie=Math.LN2;function Lt(o){return o>>>=0,o===0?32:31-(Xe(o)/Ie|0)|0}var Dt=64,zt=4194304;function _e(o){switch(o&-o){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return o&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return o}}function He(o,c){var h=o.pendingLanes;if(h===0)return 0;var g=0,k=o.suspendedLanes,_=o.pingedLanes,P=h&268435455;if(P!==0){var B=P&~k;B!==0?g=_e(B):(_&=P,_!==0&&(g=_e(_)))}else P=h&~k,P!==0?g=_e(P):_!==0&&(g=_e(_));if(g===0)return 0;if(c!==0&&c!==g&&(c&k)===0&&(k=g&-g,_=c&-c,k>=_||k===16&&(_&4194240)!==0))return c;if((g&4)!==0&&(g|=h&16),c=o.entangledLanes,c!==0)for(o=o.entanglements,c&=g;0<c;)h=31-Oe(c),k=1<<h,g|=o[h],c&=~k;return g}function Zt(o,c){switch(o){case 1:case 2:case 4:return c+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return c+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Gr(o,c){for(var h=o.suspendedLanes,g=o.pingedLanes,k=o.expirationTimes,_=o.pendingLanes;0<_;){var P=31-Oe(_),B=1<<P,Q=k[P];Q===-1?((B&h)===0||(B&g)!==0)&&(k[P]=Zt(B,c)):Q<=c&&(o.expiredLanes|=B),_&=~B}}function dt(o){return o=o.pendingLanes&-1073741825,o!==0?o:o&1073741824?1073741824:0}function gr(){var o=Dt;return Dt<<=1,(Dt&4194240)===0&&(Dt=64),o}function Xt(o){for(var c=[],h=0;31>h;h++)c.push(o);return c}function xr(o,c,h){o.pendingLanes|=c,c!==536870912&&(o.suspendedLanes=0,o.pingedLanes=0),o=o.eventTimes,c=31-Oe(c),o[c]=h}function cr(o,c){var h=o.pendingLanes&~c;o.pendingLanes=c,o.suspendedLanes=0,o.pingedLanes=0,o.expiredLanes&=c,o.mutableReadLanes&=c,o.entangledLanes&=c,c=o.entanglements;var g=o.eventTimes;for(o=o.expirationTimes;0<h;){var k=31-Oe(h),_=1<<k;c[k]=0,g[k]=-1,o[k]=-1,h&=~_}}function Fi(o,c){var h=o.entangledLanes|=c;for(o=o.entanglements;h;){var g=31-Oe(h),k=1<<g;k&c|o[g]&c&&(o[g]|=c),h&=~k}}var Ut=0;function ha(o){return o&=-o,1<o?4<o?(o&268435455)!==0?16:536870912:4:1}var Qs,Ns,is,Li,zi,tn=!1,as=[],Yr=null,gs=null,ys=null,jr=new Map,Zs=new Map,Ar=[],ei="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function os(o,c){switch(o){case"focusin":case"focusout":Yr=null;break;case"dragenter":case"dragleave":gs=null;break;case"mouseover":case"mouseout":ys=null;break;case"pointerover":case"pointerout":jr.delete(c.pointerId);break;case"gotpointercapture":case"lostpointercapture":Zs.delete(c.pointerId)}}function vi(o,c,h,g,k,_){return o===null||o.nativeEvent!==_?(o={blockedOn:c,domEventName:h,eventSystemFlags:g,nativeEvent:_,targetContainers:[k]},c!==null&&(c=Pu(c),c!==null&&Ns(c)),o):(o.eventSystemFlags|=g,c=o.targetContainers,k!==null&&c.indexOf(k)===-1&&c.push(k),o)}function ti(o,c,h,g,k){switch(c){case"focusin":return Yr=vi(Yr,o,c,h,g,k),!0;case"dragenter":return gs=vi(gs,o,c,h,g,k),!0;case"mouseover":return ys=vi(ys,o,c,h,g,k),!0;case"pointerover":var _=k.pointerId;return jr.set(_,vi(jr.get(_)||null,o,c,h,g,k)),!0;case"gotpointercapture":return _=k.pointerId,Zs.set(_,vi(Zs.get(_)||null,o,c,h,g,k)),!0}return!1}function ma(o){var c=rl(o.target);if(c!==null){var h=vr(c);if(h!==null){if(c=h.tag,c===13){if(c=hn(h),c!==null){o.blockedOn=c,zi(o.priority,function(){is(h)});return}}else if(c===3&&h.stateNode.current.memoizedState.isDehydrated){o.blockedOn=h.tag===3?h.stateNode.containerInfo:null;return}}}o.blockedOn=null}function xi(o){if(o.blockedOn!==null)return!1;for(var c=o.targetContainers;0<c.length;){var h=Wi(o.domEventName,o.eventSystemFlags,c[0],o.nativeEvent);if(h===null){h=o.nativeEvent;var g=new h.constructor(h.type,h);Wt=g,h.target.dispatchEvent(g),Wt=null}else return c=Pu(h),c!==null&&Ns(c),o.blockedOn=h,!1;c.shift()}return!0}function vo(o,c,h){xi(o)&&h.delete(c)}function Ui(){tn=!1,Yr!==null&&xi(Yr)&&(Yr=null),gs!==null&&xi(gs)&&(gs=null),ys!==null&&xi(ys)&&(ys=null),jr.forEach(vo),Zs.forEach(vo)}function Bi(o,c){o.blockedOn===c&&(o.blockedOn=null,tn||(tn=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,Ui)))}function wi(o){function c(k){return Bi(k,o)}if(0<as.length){Bi(as[0],o);for(var h=1;h<as.length;h++){var g=as[h];g.blockedOn===o&&(g.blockedOn=null)}}for(Yr!==null&&Bi(Yr,o),gs!==null&&Bi(gs,o),ys!==null&&Bi(ys,o),jr.forEach(c),Zs.forEach(c),h=0;h<Ar.length;h++)g=Ar[h],g.blockedOn===o&&(g.blockedOn=null);for(;0<Ar.length&&(h=Ar[0],h.blockedOn===null);)ma(h),h.blockedOn===null&&Ar.shift()}var Pr=I.ReactCurrentBatchConfig,bi=!0;function xo(o,c,h,g){var k=Ut,_=Pr.transition;Pr.transition=null;try{Ut=1,pa(o,c,h,g)}finally{Ut=k,Pr.transition=_}}function wo(o,c,h,g){var k=Ut,_=Pr.transition;Pr.transition=null;try{Ut=4,pa(o,c,h,g)}finally{Ut=k,Pr.transition=_}}function pa(o,c,h,g){if(bi){var k=Wi(o,c,h,g);if(k===null)Kp(o,c,g,ga,h),os(o,g);else if(ti(k,o,c,h,g))g.stopPropagation();else if(os(o,g),c&4&&-1<ei.indexOf(o)){for(;k!==null;){var _=Pu(k);if(_!==null&&Qs(_),_=Wi(o,c,h,g),_===null&&Kp(o,c,g,ga,h),_===k)break;k=_}k!==null&&g.stopPropagation()}else Kp(o,c,g,null,h)}}var ga=null;function Wi(o,c,h,g){if(ga=null,o=rr(g),o=rl(o),o!==null)if(c=vr(o),c===null)o=null;else if(h=c.tag,h===13){if(o=hn(c),o!==null)return o;o=null}else if(h===3){if(c.stateNode.current.memoizedState.isDehydrated)return c.tag===3?c.stateNode.containerInfo:null;o=null}else c!==o&&(o=null);return ga=o,null}function cn(o){switch(o){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Er()){case _r:return 1;case Sn:return 4;case en:case ps:return 16;case Xs:return 536870912;default:return 16}default:return 16}}var Jr=null,kn=null,Hn=null;function Vi(){if(Hn)return Hn;var o,c=kn,h=c.length,g,k="value"in Jr?Jr.value:Jr.textContent,_=k.length;for(o=0;o<h&&c[o]===k[o];o++);var P=h-o;for(g=1;g<=P&&c[h-g]===k[_-g];g++);return Hn=k.slice(o,1<g?1-g:void 0)}function Rs(o){var c=o.keyCode;return"charCode"in o?(o=o.charCode,o===0&&c===13&&(o=13)):o=c,o===10&&(o=13),32<=o||o===13?o:0}function ls(){return!0}function qi(){return!1}function w(o){function c(h,g,k,_,P){this._reactName=h,this._targetInst=k,this.type=g,this.nativeEvent=_,this.target=P,this.currentTarget=null;for(var B in o)o.hasOwnProperty(B)&&(h=o[B],this[B]=h?h(_):_[B]);return this.isDefaultPrevented=(_.defaultPrevented!=null?_.defaultPrevented:_.returnValue===!1)?ls:qi,this.isPropagationStopped=qi,this}return he(c.prototype,{preventDefault:function(){this.defaultPrevented=!0;var h=this.nativeEvent;h&&(h.preventDefault?h.preventDefault():typeof h.returnValue!="unknown"&&(h.returnValue=!1),this.isDefaultPrevented=ls)},stopPropagation:function(){var h=this.nativeEvent;h&&(h.stopPropagation?h.stopPropagation():typeof h.cancelBubble!="unknown"&&(h.cancelBubble=!0),this.isPropagationStopped=ls)},persist:function(){},isPersistent:ls}),c}var D={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(o){return o.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Z=w(D),ae=he({},D,{view:0,detail:0}),A=w(ae),$,R,ne,ge=he({},ae,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ft,button:0,buttons:0,relatedTarget:function(o){return o.relatedTarget===void 0?o.fromElement===o.srcElement?o.toElement:o.fromElement:o.relatedTarget},movementX:function(o){return"movementX"in o?o.movementX:(o!==ne&&(ne&&o.type==="mousemove"?($=o.screenX-ne.screenX,R=o.screenY-ne.screenY):R=$=0,ne=o),$)},movementY:function(o){return"movementY"in o?o.movementY:R}}),Re=w(ge),oe=he({},ge,{dataTransfer:0}),ue=w(oe),Ye=he({},ae,{relatedTarget:0}),bt=w(Ye),nt=he({},D,{animationName:0,elapsedTime:0,pseudoElement:0}),mt=w(nt),_t=he({},D,{clipboardData:function(o){return"clipboardData"in o?o.clipboardData:window.clipboardData}}),Ae=w(_t),Et=he({},D,{data:0}),Qe=w(Et),et={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},St={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},it={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Vt(o){var c=this.nativeEvent;return c.getModifierState?c.getModifierState(o):(o=it[o])?!!c[o]:!1}function ft(){return Vt}var er=he({},ae,{key:function(o){if(o.key){var c=et[o.key]||o.key;if(c!=="Unidentified")return c}return o.type==="keypress"?(o=Rs(o),o===13?"Enter":String.fromCharCode(o)):o.type==="keydown"||o.type==="keyup"?St[o.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ft,charCode:function(o){return o.type==="keypress"?Rs(o):0},keyCode:function(o){return o.type==="keydown"||o.type==="keyup"?o.keyCode:0},which:function(o){return o.type==="keypress"?Rs(o):o.type==="keydown"||o.type==="keyup"?o.keyCode:0}}),Tr=w(er),rn=he({},ge,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Ms=w(rn),vs=he({},ae,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ft}),Dp=w(vs),$p=he({},D,{propertyName:0,elapsedTime:0,pseudoElement:0}),Rp=w($p),ZI=he({},ge,{deltaX:function(o){return"deltaX"in o?o.deltaX:"wheelDeltaX"in o?-o.wheelDeltaX:0},deltaY:function(o){return"deltaY"in o?o.deltaY:"wheelDeltaY"in o?-o.wheelDeltaY:"wheelDelta"in o?-o.wheelDelta:0},deltaZ:0,deltaMode:0}),e4=w(ZI),t4=[9,13,27,32],Mp=u&&"CompositionEvent"in window,bu=null;u&&"documentMode"in document&&(bu=document.documentMode);var r4=u&&"TextEvent"in window&&!bu,Cb=u&&(!Mp||bu&&8<bu&&11>=bu),Eb=" ",Ab=!1;function Pb(o,c){switch(o){case"keyup":return t4.indexOf(c.keyCode)!==-1;case"keydown":return c.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Tb(o){return o=o.detail,typeof o=="object"&&"data"in o?o.data:null}var Xl=!1;function n4(o,c){switch(o){case"compositionend":return Tb(c);case"keypress":return c.which!==32?null:(Ab=!0,Eb);case"textInput":return o=c.data,o===Eb&&Ab?null:o;default:return null}}function s4(o,c){if(Xl)return o==="compositionend"||!Mp&&Pb(o,c)?(o=Vi(),Hn=kn=Jr=null,Xl=!1,o):null;switch(o){case"paste":return null;case"keypress":if(!(c.ctrlKey||c.altKey||c.metaKey)||c.ctrlKey&&c.altKey){if(c.char&&1<c.char.length)return c.char;if(c.which)return String.fromCharCode(c.which)}return null;case"compositionend":return Cb&&c.locale!=="ko"?null:c.data;default:return null}}var i4={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Ob(o){var c=o&&o.nodeName&&o.nodeName.toLowerCase();return c==="input"?!!i4[o.type]:c==="textarea"}function Ib(o,c,h,g){vt(g),c=df(c,"onChange"),0<c.length&&(h=new Z("onChange","change",null,h,g),o.push({event:h,listeners:c}))}var ju=null,Su=null;function a4(o){Xb(o,0)}function of(o){var c=rc(o);if(se(c))return o}function o4(o,c){if(o==="change")return c}var Db=!1;if(u){var Fp;if(u){var Lp="oninput"in document;if(!Lp){var $b=document.createElement("div");$b.setAttribute("oninput","return;"),Lp=typeof $b.oninput=="function"}Fp=Lp}else Fp=!1;Db=Fp&&(!document.documentMode||9<document.documentMode)}function Rb(){ju&&(ju.detachEvent("onpropertychange",Mb),Su=ju=null)}function Mb(o){if(o.propertyName==="value"&&of(Su)){var c=[];Ib(c,Su,o,rr(o)),Jt(a4,c)}}function l4(o,c,h){o==="focusin"?(Rb(),ju=c,Su=h,ju.attachEvent("onpropertychange",Mb)):o==="focusout"&&Rb()}function c4(o){if(o==="selectionchange"||o==="keyup"||o==="keydown")return of(Su)}function u4(o,c){if(o==="click")return of(c)}function d4(o,c){if(o==="input"||o==="change")return of(c)}function f4(o,c){return o===c&&(o!==0||1/o===1/c)||o!==o&&c!==c}var Hi=typeof Object.is=="function"?Object.is:f4;function ku(o,c){if(Hi(o,c))return!0;if(typeof o!="object"||o===null||typeof c!="object"||c===null)return!1;var h=Object.keys(o),g=Object.keys(c);if(h.length!==g.length)return!1;for(g=0;g<h.length;g++){var k=h[g];if(!d.call(c,k)||!Hi(o[k],c[k]))return!1}return!0}function Fb(o){for(;o&&o.firstChild;)o=o.firstChild;return o}function Lb(o,c){var h=Fb(o);o=0;for(var g;h;){if(h.nodeType===3){if(g=o+h.textContent.length,o<=c&&g>=c)return{node:h,offset:c-o};o=g}e:{for(;h;){if(h.nextSibling){h=h.nextSibling;break e}h=h.parentNode}h=void 0}h=Fb(h)}}function zb(o,c){return o&&c?o===c?!0:o&&o.nodeType===3?!1:c&&c.nodeType===3?zb(o,c.parentNode):"contains"in o?o.contains(c):o.compareDocumentPosition?!!(o.compareDocumentPosition(c)&16):!1:!1}function Ub(){for(var o=window,c=Ze();c instanceof o.HTMLIFrameElement;){try{var h=typeof c.contentWindow.location.href=="string"}catch{h=!1}if(h)o=c.contentWindow;else break;c=Ze(o.document)}return c}function zp(o){var c=o&&o.nodeName&&o.nodeName.toLowerCase();return c&&(c==="input"&&(o.type==="text"||o.type==="search"||o.type==="tel"||o.type==="url"||o.type==="password")||c==="textarea"||o.contentEditable==="true")}function h4(o){var c=Ub(),h=o.focusedElem,g=o.selectionRange;if(c!==h&&h&&h.ownerDocument&&zb(h.ownerDocument.documentElement,h)){if(g!==null&&zp(h)){if(c=g.start,o=g.end,o===void 0&&(o=c),"selectionStart"in h)h.selectionStart=c,h.selectionEnd=Math.min(o,h.value.length);else if(o=(c=h.ownerDocument||document)&&c.defaultView||window,o.getSelection){o=o.getSelection();var k=h.textContent.length,_=Math.min(g.start,k);g=g.end===void 0?_:Math.min(g.end,k),!o.extend&&_>g&&(k=g,g=_,_=k),k=Lb(h,_);var P=Lb(h,g);k&&P&&(o.rangeCount!==1||o.anchorNode!==k.node||o.anchorOffset!==k.offset||o.focusNode!==P.node||o.focusOffset!==P.offset)&&(c=c.createRange(),c.setStart(k.node,k.offset),o.removeAllRanges(),_>g?(o.addRange(c),o.extend(P.node,P.offset)):(c.setEnd(P.node,P.offset),o.addRange(c)))}}for(c=[],o=h;o=o.parentNode;)o.nodeType===1&&c.push({element:o,left:o.scrollLeft,top:o.scrollTop});for(typeof h.focus=="function"&&h.focus(),h=0;h<c.length;h++)o=c[h],o.element.scrollLeft=o.left,o.element.scrollTop=o.top}}var m4=u&&"documentMode"in document&&11>=document.documentMode,Ql=null,Up=null,_u=null,Bp=!1;function Bb(o,c,h){var g=h.window===h?h.document:h.nodeType===9?h:h.ownerDocument;Bp||Ql==null||Ql!==Ze(g)||(g=Ql,"selectionStart"in g&&zp(g)?g={start:g.selectionStart,end:g.selectionEnd}:(g=(g.ownerDocument&&g.ownerDocument.defaultView||window).getSelection(),g={anchorNode:g.anchorNode,anchorOffset:g.anchorOffset,focusNode:g.focusNode,focusOffset:g.focusOffset}),_u&&ku(_u,g)||(_u=g,g=df(Up,"onSelect"),0<g.length&&(c=new Z("onSelect","select",null,c,h),o.push({event:c,listeners:g}),c.target=Ql)))}function lf(o,c){var h={};return h[o.toLowerCase()]=c.toLowerCase(),h["Webkit"+o]="webkit"+c,h["Moz"+o]="moz"+c,h}var Zl={animationend:lf("Animation","AnimationEnd"),animationiteration:lf("Animation","AnimationIteration"),animationstart:lf("Animation","AnimationStart"),transitionend:lf("Transition","TransitionEnd")},Wp={},Wb={};u&&(Wb=document.createElement("div").style,"AnimationEvent"in window||(delete Zl.animationend.animation,delete Zl.animationiteration.animation,delete Zl.animationstart.animation),"TransitionEvent"in window||delete Zl.transitionend.transition);function cf(o){if(Wp[o])return Wp[o];if(!Zl[o])return o;var c=Zl[o],h;for(h in c)if(c.hasOwnProperty(h)&&h in Wb)return Wp[o]=c[h];return o}var Vb=cf("animationend"),qb=cf("animationiteration"),Hb=cf("animationstart"),Kb=cf("transitionend"),Gb=new Map,Yb="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function bo(o,c){Gb.set(o,c),i(c,[o])}for(var Vp=0;Vp<Yb.length;Vp++){var qp=Yb[Vp],p4=qp.toLowerCase(),g4=qp[0].toUpperCase()+qp.slice(1);bo(p4,"on"+g4)}bo(Vb,"onAnimationEnd"),bo(qb,"onAnimationIteration"),bo(Hb,"onAnimationStart"),bo("dblclick","onDoubleClick"),bo("focusin","onFocus"),bo("focusout","onBlur"),bo(Kb,"onTransitionEnd"),l("onMouseEnter",["mouseout","mouseover"]),l("onMouseLeave",["mouseout","mouseover"]),l("onPointerEnter",["pointerout","pointerover"]),l("onPointerLeave",["pointerout","pointerover"]),i("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),i("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),i("onBeforeInput",["compositionend","keypress","textInput","paste"]),i("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),i("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),i("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Nu="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),y4=new Set("cancel close invalid load scroll toggle".split(" ").concat(Nu));function Jb(o,c,h){var g=o.type||"unknown-event";o.currentTarget=h,Lr(g,c,void 0,o),o.currentTarget=null}function Xb(o,c){c=(c&4)!==0;for(var h=0;h<o.length;h++){var g=o[h],k=g.event;g=g.listeners;e:{var _=void 0;if(c)for(var P=g.length-1;0<=P;P--){var B=g[P],Q=B.instance,xe=B.currentTarget;if(B=B.listener,Q!==_&&k.isPropagationStopped())break e;Jb(k,B,xe),_=Q}else for(P=0;P<g.length;P++){if(B=g[P],Q=B.instance,xe=B.currentTarget,B=B.listener,Q!==_&&k.isPropagationStopped())break e;Jb(k,B,xe),_=Q}}}if(ln)throw o=lr,ln=!1,lr=null,o}function zr(o,c){var h=c[Zp];h===void 0&&(h=c[Zp]=new Set);var g=o+"__bubble";h.has(g)||(Qb(c,o,2,!1),h.add(g))}function Hp(o,c,h){var g=0;c&&(g|=4),Qb(h,o,g,c)}var uf="_reactListening"+Math.random().toString(36).slice(2);function Cu(o){if(!o[uf]){o[uf]=!0,n.forEach(function(h){h!=="selectionchange"&&(y4.has(h)||Hp(h,!1,o),Hp(h,!0,o))});var c=o.nodeType===9?o:o.ownerDocument;c===null||c[uf]||(c[uf]=!0,Hp("selectionchange",!1,c))}}function Qb(o,c,h,g){switch(cn(c)){case 1:var k=xo;break;case 4:k=wo;break;default:k=pa}h=k.bind(null,c,h,o),k=void 0,!rs||c!=="touchstart"&&c!=="touchmove"&&c!=="wheel"||(k=!0),g?k!==void 0?o.addEventListener(c,h,{capture:!0,passive:k}):o.addEventListener(c,h,!0):k!==void 0?o.addEventListener(c,h,{passive:k}):o.addEventListener(c,h,!1)}function Kp(o,c,h,g,k){var _=g;if((c&1)===0&&(c&2)===0&&g!==null)e:for(;;){if(g===null)return;var P=g.tag;if(P===3||P===4){var B=g.stateNode.containerInfo;if(B===k||B.nodeType===8&&B.parentNode===k)break;if(P===4)for(P=g.return;P!==null;){var Q=P.tag;if((Q===3||Q===4)&&(Q=P.stateNode.containerInfo,Q===k||Q.nodeType===8&&Q.parentNode===k))return;P=P.return}for(;B!==null;){if(P=rl(B),P===null)return;if(Q=P.tag,Q===5||Q===6){g=_=P;continue e}B=B.parentNode}}g=g.return}Jt(function(){var xe=_,Me=rr(h),Be=[];e:{var De=Gb.get(o);if(De!==void 0){var st=Z,ut=o;switch(o){case"keypress":if(Rs(h)===0)break e;case"keydown":case"keyup":st=Tr;break;case"focusin":ut="focus",st=bt;break;case"focusout":ut="blur",st=bt;break;case"beforeblur":case"afterblur":st=bt;break;case"click":if(h.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":st=Re;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":st=ue;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":st=Dp;break;case Vb:case qb:case Hb:st=mt;break;case Kb:st=Rp;break;case"scroll":st=A;break;case"wheel":st=e4;break;case"copy":case"cut":case"paste":st=Ae;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":st=Ms}var ht=(c&4)!==0,mn=!ht&&o==="scroll",me=ht?De!==null?De+"Capture":null:De;ht=[];for(var te=xe,ye;te!==null;){ye=te;var Ke=ye.stateNode;if(ye.tag===5&&Ke!==null&&(ye=Ke,me!==null&&(Ke=mr(te,me),Ke!=null&&ht.push(Eu(te,Ke,ye)))),mn)break;te=te.return}0<ht.length&&(De=new st(De,ut,null,h,Me),Be.push({event:De,listeners:ht}))}}if((c&7)===0){e:{if(De=o==="mouseover"||o==="pointerover",st=o==="mouseout"||o==="pointerout",De&&h!==Wt&&(ut=h.relatedTarget||h.fromElement)&&(rl(ut)||ut[Ra]))break e;if((st||De)&&(De=Me.window===Me?Me:(De=Me.ownerDocument)?De.defaultView||De.parentWindow:window,st?(ut=h.relatedTarget||h.toElement,st=xe,ut=ut?rl(ut):null,ut!==null&&(mn=vr(ut),ut!==mn||ut.tag!==5&&ut.tag!==6)&&(ut=null)):(st=null,ut=xe),st!==ut)){if(ht=Re,Ke="onMouseLeave",me="onMouseEnter",te="mouse",(o==="pointerout"||o==="pointerover")&&(ht=Ms,Ke="onPointerLeave",me="onPointerEnter",te="pointer"),mn=st==null?De:rc(st),ye=ut==null?De:rc(ut),De=new ht(Ke,te+"leave",st,h,Me),De.target=mn,De.relatedTarget=ye,Ke=null,rl(Me)===xe&&(ht=new ht(me,te+"enter",ut,h,Me),ht.target=ye,ht.relatedTarget=mn,Ke=ht),mn=Ke,st&&ut)t:{for(ht=st,me=ut,te=0,ye=ht;ye;ye=ec(ye))te++;for(ye=0,Ke=me;Ke;Ke=ec(Ke))ye++;for(;0<te-ye;)ht=ec(ht),te--;for(;0<ye-te;)me=ec(me),ye--;for(;te--;){if(ht===me||me!==null&&ht===me.alternate)break t;ht=ec(ht),me=ec(me)}ht=null}else ht=null;st!==null&&Zb(Be,De,st,ht,!1),ut!==null&&mn!==null&&Zb(Be,mn,ut,ht,!0)}}e:{if(De=xe?rc(xe):window,st=De.nodeName&&De.nodeName.toLowerCase(),st==="select"||st==="input"&&De.type==="file")var pt=o4;else if(Ob(De))if(Db)pt=d4;else{pt=c4;var Tt=l4}else(st=De.nodeName)&&st.toLowerCase()==="input"&&(De.type==="checkbox"||De.type==="radio")&&(pt=u4);if(pt&&(pt=pt(o,xe))){Ib(Be,pt,h,Me);break e}Tt&&Tt(o,De,xe),o==="focusout"&&(Tt=De._wrapperState)&&Tt.controlled&&De.type==="number"&&Yt(De,"number",De.value)}switch(Tt=xe?rc(xe):window,o){case"focusin":(Ob(Tt)||Tt.contentEditable==="true")&&(Ql=Tt,Up=xe,_u=null);break;case"focusout":_u=Up=Ql=null;break;case"mousedown":Bp=!0;break;case"contextmenu":case"mouseup":case"dragend":Bp=!1,Bb(Be,h,Me);break;case"selectionchange":if(m4)break;case"keydown":case"keyup":Bb(Be,h,Me)}var Ot;if(Mp)e:{switch(o){case"compositionstart":var Bt="onCompositionStart";break e;case"compositionend":Bt="onCompositionEnd";break e;case"compositionupdate":Bt="onCompositionUpdate";break e}Bt=void 0}else Xl?Pb(o,h)&&(Bt="onCompositionEnd"):o==="keydown"&&h.keyCode===229&&(Bt="onCompositionStart");Bt&&(Cb&&h.locale!=="ko"&&(Xl||Bt!=="onCompositionStart"?Bt==="onCompositionEnd"&&Xl&&(Ot=Vi()):(Jr=Me,kn="value"in Jr?Jr.value:Jr.textContent,Xl=!0)),Tt=df(xe,Bt),0<Tt.length&&(Bt=new Qe(Bt,o,null,h,Me),Be.push({event:Bt,listeners:Tt}),Ot?Bt.data=Ot:(Ot=Tb(h),Ot!==null&&(Bt.data=Ot)))),(Ot=r4?n4(o,h):s4(o,h))&&(xe=df(xe,"onBeforeInput"),0<xe.length&&(Me=new Qe("onBeforeInput","beforeinput",null,h,Me),Be.push({event:Me,listeners:xe}),Me.data=Ot))}Xb(Be,c)})}function Eu(o,c,h){return{instance:o,listener:c,currentTarget:h}}function df(o,c){for(var h=c+"Capture",g=[];o!==null;){var k=o,_=k.stateNode;k.tag===5&&_!==null&&(k=_,_=mr(o,h),_!=null&&g.unshift(Eu(o,_,k)),_=mr(o,c),_!=null&&g.push(Eu(o,_,k))),o=o.return}return g}function ec(o){if(o===null)return null;do o=o.return;while(o&&o.tag!==5);return o||null}function Zb(o,c,h,g,k){for(var _=c._reactName,P=[];h!==null&&h!==g;){var B=h,Q=B.alternate,xe=B.stateNode;if(Q!==null&&Q===g)break;B.tag===5&&xe!==null&&(B=xe,k?(Q=mr(h,_),Q!=null&&P.unshift(Eu(h,Q,B))):k||(Q=mr(h,_),Q!=null&&P.push(Eu(h,Q,B)))),h=h.return}P.length!==0&&o.push({event:c,listeners:P})}var v4=/\r\n?/g,x4=/\u0000|\uFFFD/g;function e1(o){return(typeof o=="string"?o:""+o).replace(v4,`
`).replace(x4,"")}function ff(o,c,h){if(c=e1(c),e1(o)!==c&&h)throw Error(r(425))}function hf(){}var Gp=null,Yp=null;function Jp(o,c){return o==="textarea"||o==="noscript"||typeof c.children=="string"||typeof c.children=="number"||typeof c.dangerouslySetInnerHTML=="object"&&c.dangerouslySetInnerHTML!==null&&c.dangerouslySetInnerHTML.__html!=null}var Xp=typeof setTimeout=="function"?setTimeout:void 0,w4=typeof clearTimeout=="function"?clearTimeout:void 0,t1=typeof Promise=="function"?Promise:void 0,b4=typeof queueMicrotask=="function"?queueMicrotask:typeof t1<"u"?function(o){return t1.resolve(null).then(o).catch(j4)}:Xp;function j4(o){setTimeout(function(){throw o})}function Qp(o,c){var h=c,g=0;do{var k=h.nextSibling;if(o.removeChild(h),k&&k.nodeType===8)if(h=k.data,h==="/$"){if(g===0){o.removeChild(k),wi(c);return}g--}else h!=="$"&&h!=="$?"&&h!=="$!"||g++;h=k}while(h);wi(c)}function jo(o){for(;o!=null;o=o.nextSibling){var c=o.nodeType;if(c===1||c===3)break;if(c===8){if(c=o.data,c==="$"||c==="$!"||c==="$?")break;if(c==="/$")return null}}return o}function r1(o){o=o.previousSibling;for(var c=0;o;){if(o.nodeType===8){var h=o.data;if(h==="$"||h==="$!"||h==="$?"){if(c===0)return o;c--}else h==="/$"&&c++}o=o.previousSibling}return null}var tc=Math.random().toString(36).slice(2),ya="__reactFiber$"+tc,Au="__reactProps$"+tc,Ra="__reactContainer$"+tc,Zp="__reactEvents$"+tc,S4="__reactListeners$"+tc,k4="__reactHandles$"+tc;function rl(o){var c=o[ya];if(c)return c;for(var h=o.parentNode;h;){if(c=h[Ra]||h[ya]){if(h=c.alternate,c.child!==null||h!==null&&h.child!==null)for(o=r1(o);o!==null;){if(h=o[ya])return h;o=r1(o)}return c}o=h,h=o.parentNode}return null}function Pu(o){return o=o[ya]||o[Ra],!o||o.tag!==5&&o.tag!==6&&o.tag!==13&&o.tag!==3?null:o}function rc(o){if(o.tag===5||o.tag===6)return o.stateNode;throw Error(r(33))}function mf(o){return o[Au]||null}var eg=[],nc=-1;function So(o){return{current:o}}function Ur(o){0>nc||(o.current=eg[nc],eg[nc]=null,nc--)}function Or(o,c){nc++,eg[nc]=o.current,o.current=c}var ko={},xs=So(ko),Fs=So(!1),nl=ko;function sc(o,c){var h=o.type.contextTypes;if(!h)return ko;var g=o.stateNode;if(g&&g.__reactInternalMemoizedUnmaskedChildContext===c)return g.__reactInternalMemoizedMaskedChildContext;var k={},_;for(_ in h)k[_]=c[_];return g&&(o=o.stateNode,o.__reactInternalMemoizedUnmaskedChildContext=c,o.__reactInternalMemoizedMaskedChildContext=k),k}function Ls(o){return o=o.childContextTypes,o!=null}function pf(){Ur(Fs),Ur(xs)}function n1(o,c,h){if(xs.current!==ko)throw Error(r(168));Or(xs,c),Or(Fs,h)}function s1(o,c,h){var g=o.stateNode;if(c=c.childContextTypes,typeof g.getChildContext!="function")return h;g=g.getChildContext();for(var k in g)if(!(k in c))throw Error(r(108,Te(o)||"Unknown",k));return he({},h,g)}function gf(o){return o=(o=o.stateNode)&&o.__reactInternalMemoizedMergedChildContext||ko,nl=xs.current,Or(xs,o),Or(Fs,Fs.current),!0}function i1(o,c,h){var g=o.stateNode;if(!g)throw Error(r(169));h?(o=s1(o,c,nl),g.__reactInternalMemoizedMergedChildContext=o,Ur(Fs),Ur(xs),Or(xs,o)):Ur(Fs),Or(Fs,h)}var Ma=null,yf=!1,tg=!1;function a1(o){Ma===null?Ma=[o]:Ma.push(o)}function _4(o){yf=!0,a1(o)}function _o(){if(!tg&&Ma!==null){tg=!0;var o=0,c=Ut;try{var h=Ma;for(Ut=1;o<h.length;o++){var g=h[o];do g=g(!0);while(g!==null)}Ma=null,yf=!1}catch(k){throw Ma!==null&&(Ma=Ma.slice(o+1)),Dn(_r,_o),k}finally{Ut=c,tg=!1}}return null}var ic=[],ac=0,vf=null,xf=0,ji=[],Si=0,sl=null,Fa=1,La="";function il(o,c){ic[ac++]=xf,ic[ac++]=vf,vf=o,xf=c}function o1(o,c,h){ji[Si++]=Fa,ji[Si++]=La,ji[Si++]=sl,sl=o;var g=Fa;o=La;var k=32-Oe(g)-1;g&=~(1<<k),h+=1;var _=32-Oe(c)+k;if(30<_){var P=k-k%5;_=(g&(1<<P)-1).toString(32),g>>=P,k-=P,Fa=1<<32-Oe(c)+k|h<<k|g,La=_+o}else Fa=1<<_|h<<k|g,La=o}function rg(o){o.return!==null&&(il(o,1),o1(o,1,0))}function ng(o){for(;o===vf;)vf=ic[--ac],ic[ac]=null,xf=ic[--ac],ic[ac]=null;for(;o===sl;)sl=ji[--Si],ji[Si]=null,La=ji[--Si],ji[Si]=null,Fa=ji[--Si],ji[Si]=null}var ri=null,ni=null,Xr=!1,Ki=null;function l1(o,c){var h=Ci(5,null,null,0);h.elementType="DELETED",h.stateNode=c,h.return=o,c=o.deletions,c===null?(o.deletions=[h],o.flags|=16):c.push(h)}function c1(o,c){switch(o.tag){case 5:var h=o.type;return c=c.nodeType!==1||h.toLowerCase()!==c.nodeName.toLowerCase()?null:c,c!==null?(o.stateNode=c,ri=o,ni=jo(c.firstChild),!0):!1;case 6:return c=o.pendingProps===""||c.nodeType!==3?null:c,c!==null?(o.stateNode=c,ri=o,ni=null,!0):!1;case 13:return c=c.nodeType!==8?null:c,c!==null?(h=sl!==null?{id:Fa,overflow:La}:null,o.memoizedState={dehydrated:c,treeContext:h,retryLane:1073741824},h=Ci(18,null,null,0),h.stateNode=c,h.return=o,o.child=h,ri=o,ni=null,!0):!1;default:return!1}}function sg(o){return(o.mode&1)!==0&&(o.flags&128)===0}function ig(o){if(Xr){var c=ni;if(c){var h=c;if(!c1(o,c)){if(sg(o))throw Error(r(418));c=jo(h.nextSibling);var g=ri;c&&c1(o,c)?l1(g,h):(o.flags=o.flags&-4097|2,Xr=!1,ri=o)}}else{if(sg(o))throw Error(r(418));o.flags=o.flags&-4097|2,Xr=!1,ri=o}}}function u1(o){for(o=o.return;o!==null&&o.tag!==5&&o.tag!==3&&o.tag!==13;)o=o.return;ri=o}function wf(o){if(o!==ri)return!1;if(!Xr)return u1(o),Xr=!0,!1;var c;if((c=o.tag!==3)&&!(c=o.tag!==5)&&(c=o.type,c=c!=="head"&&c!=="body"&&!Jp(o.type,o.memoizedProps)),c&&(c=ni)){if(sg(o))throw d1(),Error(r(418));for(;c;)l1(o,c),c=jo(c.nextSibling)}if(u1(o),o.tag===13){if(o=o.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(r(317));e:{for(o=o.nextSibling,c=0;o;){if(o.nodeType===8){var h=o.data;if(h==="/$"){if(c===0){ni=jo(o.nextSibling);break e}c--}else h!=="$"&&h!=="$!"&&h!=="$?"||c++}o=o.nextSibling}ni=null}}else ni=ri?jo(o.stateNode.nextSibling):null;return!0}function d1(){for(var o=ni;o;)o=jo(o.nextSibling)}function oc(){ni=ri=null,Xr=!1}function ag(o){Ki===null?Ki=[o]:Ki.push(o)}var N4=I.ReactCurrentBatchConfig;function Tu(o,c,h){if(o=h.ref,o!==null&&typeof o!="function"&&typeof o!="object"){if(h._owner){if(h=h._owner,h){if(h.tag!==1)throw Error(r(309));var g=h.stateNode}if(!g)throw Error(r(147,o));var k=g,_=""+o;return c!==null&&c.ref!==null&&typeof c.ref=="function"&&c.ref._stringRef===_?c.ref:(c=function(P){var B=k.refs;P===null?delete B[_]:B[_]=P},c._stringRef=_,c)}if(typeof o!="string")throw Error(r(284));if(!h._owner)throw Error(r(290,o))}return o}function bf(o,c){throw o=Object.prototype.toString.call(c),Error(r(31,o==="[object Object]"?"object with keys {"+Object.keys(c).join(", ")+"}":o))}function f1(o){var c=o._init;return c(o._payload)}function h1(o){function c(me,te){if(o){var ye=me.deletions;ye===null?(me.deletions=[te],me.flags|=16):ye.push(te)}}function h(me,te){if(!o)return null;for(;te!==null;)c(me,te),te=te.sibling;return null}function g(me,te){for(me=new Map;te!==null;)te.key!==null?me.set(te.key,te):me.set(te.index,te),te=te.sibling;return me}function k(me,te){return me=Io(me,te),me.index=0,me.sibling=null,me}function _(me,te,ye){return me.index=ye,o?(ye=me.alternate,ye!==null?(ye=ye.index,ye<te?(me.flags|=2,te):ye):(me.flags|=2,te)):(me.flags|=1048576,te)}function P(me){return o&&me.alternate===null&&(me.flags|=2),me}function B(me,te,ye,Ke){return te===null||te.tag!==6?(te=Xg(ye,me.mode,Ke),te.return=me,te):(te=k(te,ye),te.return=me,te)}function Q(me,te,ye,Ke){var pt=ye.type;return pt===V?Me(me,te,ye.props.children,Ke,ye.key):te!==null&&(te.elementType===pt||typeof pt=="object"&&pt!==null&&pt.$$typeof===ve&&f1(pt)===te.type)?(Ke=k(te,ye.props),Ke.ref=Tu(me,te,ye),Ke.return=me,Ke):(Ke=qf(ye.type,ye.key,ye.props,null,me.mode,Ke),Ke.ref=Tu(me,te,ye),Ke.return=me,Ke)}function xe(me,te,ye,Ke){return te===null||te.tag!==4||te.stateNode.containerInfo!==ye.containerInfo||te.stateNode.implementation!==ye.implementation?(te=Qg(ye,me.mode,Ke),te.return=me,te):(te=k(te,ye.children||[]),te.return=me,te)}function Me(me,te,ye,Ke,pt){return te===null||te.tag!==7?(te=hl(ye,me.mode,Ke,pt),te.return=me,te):(te=k(te,ye),te.return=me,te)}function Be(me,te,ye){if(typeof te=="string"&&te!==""||typeof te=="number")return te=Xg(""+te,me.mode,ye),te.return=me,te;if(typeof te=="object"&&te!==null){switch(te.$$typeof){case T:return ye=qf(te.type,te.key,te.props,null,me.mode,ye),ye.ref=Tu(me,null,te),ye.return=me,ye;case O:return te=Qg(te,me.mode,ye),te.return=me,te;case ve:var Ke=te._init;return Be(me,Ke(te._payload),ye)}if(z(te)||ce(te))return te=hl(te,me.mode,ye,null),te.return=me,te;bf(me,te)}return null}function De(me,te,ye,Ke){var pt=te!==null?te.key:null;if(typeof ye=="string"&&ye!==""||typeof ye=="number")return pt!==null?null:B(me,te,""+ye,Ke);if(typeof ye=="object"&&ye!==null){switch(ye.$$typeof){case T:return ye.key===pt?Q(me,te,ye,Ke):null;case O:return ye.key===pt?xe(me,te,ye,Ke):null;case ve:return pt=ye._init,De(me,te,pt(ye._payload),Ke)}if(z(ye)||ce(ye))return pt!==null?null:Me(me,te,ye,Ke,null);bf(me,ye)}return null}function st(me,te,ye,Ke,pt){if(typeof Ke=="string"&&Ke!==""||typeof Ke=="number")return me=me.get(ye)||null,B(te,me,""+Ke,pt);if(typeof Ke=="object"&&Ke!==null){switch(Ke.$$typeof){case T:return me=me.get(Ke.key===null?ye:Ke.key)||null,Q(te,me,Ke,pt);case O:return me=me.get(Ke.key===null?ye:Ke.key)||null,xe(te,me,Ke,pt);case ve:var Tt=Ke._init;return st(me,te,ye,Tt(Ke._payload),pt)}if(z(Ke)||ce(Ke))return me=me.get(ye)||null,Me(te,me,Ke,pt,null);bf(te,Ke)}return null}function ut(me,te,ye,Ke){for(var pt=null,Tt=null,Ot=te,Bt=te=0,Yn=null;Ot!==null&&Bt<ye.length;Bt++){Ot.index>Bt?(Yn=Ot,Ot=null):Yn=Ot.sibling;var ur=De(me,Ot,ye[Bt],Ke);if(ur===null){Ot===null&&(Ot=Yn);break}o&&Ot&&ur.alternate===null&&c(me,Ot),te=_(ur,te,Bt),Tt===null?pt=ur:Tt.sibling=ur,Tt=ur,Ot=Yn}if(Bt===ye.length)return h(me,Ot),Xr&&il(me,Bt),pt;if(Ot===null){for(;Bt<ye.length;Bt++)Ot=Be(me,ye[Bt],Ke),Ot!==null&&(te=_(Ot,te,Bt),Tt===null?pt=Ot:Tt.sibling=Ot,Tt=Ot);return Xr&&il(me,Bt),pt}for(Ot=g(me,Ot);Bt<ye.length;Bt++)Yn=st(Ot,me,Bt,ye[Bt],Ke),Yn!==null&&(o&&Yn.alternate!==null&&Ot.delete(Yn.key===null?Bt:Yn.key),te=_(Yn,te,Bt),Tt===null?pt=Yn:Tt.sibling=Yn,Tt=Yn);return o&&Ot.forEach(function(Do){return c(me,Do)}),Xr&&il(me,Bt),pt}function ht(me,te,ye,Ke){var pt=ce(ye);if(typeof pt!="function")throw Error(r(150));if(ye=pt.call(ye),ye==null)throw Error(r(151));for(var Tt=pt=null,Ot=te,Bt=te=0,Yn=null,ur=ye.next();Ot!==null&&!ur.done;Bt++,ur=ye.next()){Ot.index>Bt?(Yn=Ot,Ot=null):Yn=Ot.sibling;var Do=De(me,Ot,ur.value,Ke);if(Do===null){Ot===null&&(Ot=Yn);break}o&&Ot&&Do.alternate===null&&c(me,Ot),te=_(Do,te,Bt),Tt===null?pt=Do:Tt.sibling=Do,Tt=Do,Ot=Yn}if(ur.done)return h(me,Ot),Xr&&il(me,Bt),pt;if(Ot===null){for(;!ur.done;Bt++,ur=ye.next())ur=Be(me,ur.value,Ke),ur!==null&&(te=_(ur,te,Bt),Tt===null?pt=ur:Tt.sibling=ur,Tt=ur);return Xr&&il(me,Bt),pt}for(Ot=g(me,Ot);!ur.done;Bt++,ur=ye.next())ur=st(Ot,me,Bt,ur.value,Ke),ur!==null&&(o&&ur.alternate!==null&&Ot.delete(ur.key===null?Bt:ur.key),te=_(ur,te,Bt),Tt===null?pt=ur:Tt.sibling=ur,Tt=ur);return o&&Ot.forEach(function(iD){return c(me,iD)}),Xr&&il(me,Bt),pt}function mn(me,te,ye,Ke){if(typeof ye=="object"&&ye!==null&&ye.type===V&&ye.key===null&&(ye=ye.props.children),typeof ye=="object"&&ye!==null){switch(ye.$$typeof){case T:e:{for(var pt=ye.key,Tt=te;Tt!==null;){if(Tt.key===pt){if(pt=ye.type,pt===V){if(Tt.tag===7){h(me,Tt.sibling),te=k(Tt,ye.props.children),te.return=me,me=te;break e}}else if(Tt.elementType===pt||typeof pt=="object"&&pt!==null&&pt.$$typeof===ve&&f1(pt)===Tt.type){h(me,Tt.sibling),te=k(Tt,ye.props),te.ref=Tu(me,Tt,ye),te.return=me,me=te;break e}h(me,Tt);break}else c(me,Tt);Tt=Tt.sibling}ye.type===V?(te=hl(ye.props.children,me.mode,Ke,ye.key),te.return=me,me=te):(Ke=qf(ye.type,ye.key,ye.props,null,me.mode,Ke),Ke.ref=Tu(me,te,ye),Ke.return=me,me=Ke)}return P(me);case O:e:{for(Tt=ye.key;te!==null;){if(te.key===Tt)if(te.tag===4&&te.stateNode.containerInfo===ye.containerInfo&&te.stateNode.implementation===ye.implementation){h(me,te.sibling),te=k(te,ye.children||[]),te.return=me,me=te;break e}else{h(me,te);break}else c(me,te);te=te.sibling}te=Qg(ye,me.mode,Ke),te.return=me,me=te}return P(me);case ve:return Tt=ye._init,mn(me,te,Tt(ye._payload),Ke)}if(z(ye))return ut(me,te,ye,Ke);if(ce(ye))return ht(me,te,ye,Ke);bf(me,ye)}return typeof ye=="string"&&ye!==""||typeof ye=="number"?(ye=""+ye,te!==null&&te.tag===6?(h(me,te.sibling),te=k(te,ye),te.return=me,me=te):(h(me,te),te=Xg(ye,me.mode,Ke),te.return=me,me=te),P(me)):h(me,te)}return mn}var lc=h1(!0),m1=h1(!1),jf=So(null),Sf=null,cc=null,og=null;function lg(){og=cc=Sf=null}function cg(o){var c=jf.current;Ur(jf),o._currentValue=c}function ug(o,c,h){for(;o!==null;){var g=o.alternate;if((o.childLanes&c)!==c?(o.childLanes|=c,g!==null&&(g.childLanes|=c)):g!==null&&(g.childLanes&c)!==c&&(g.childLanes|=c),o===h)break;o=o.return}}function uc(o,c){Sf=o,og=cc=null,o=o.dependencies,o!==null&&o.firstContext!==null&&((o.lanes&c)!==0&&(zs=!0),o.firstContext=null)}function ki(o){var c=o._currentValue;if(og!==o)if(o={context:o,memoizedValue:c,next:null},cc===null){if(Sf===null)throw Error(r(308));cc=o,Sf.dependencies={lanes:0,firstContext:o}}else cc=cc.next=o;return c}var al=null;function dg(o){al===null?al=[o]:al.push(o)}function p1(o,c,h,g){var k=c.interleaved;return k===null?(h.next=h,dg(c)):(h.next=k.next,k.next=h),c.interleaved=h,za(o,g)}function za(o,c){o.lanes|=c;var h=o.alternate;for(h!==null&&(h.lanes|=c),h=o,o=o.return;o!==null;)o.childLanes|=c,h=o.alternate,h!==null&&(h.childLanes|=c),h=o,o=o.return;return h.tag===3?h.stateNode:null}var No=!1;function fg(o){o.updateQueue={baseState:o.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function g1(o,c){o=o.updateQueue,c.updateQueue===o&&(c.updateQueue={baseState:o.baseState,firstBaseUpdate:o.firstBaseUpdate,lastBaseUpdate:o.lastBaseUpdate,shared:o.shared,effects:o.effects})}function Ua(o,c){return{eventTime:o,lane:c,tag:0,payload:null,callback:null,next:null}}function Co(o,c,h){var g=o.updateQueue;if(g===null)return null;if(g=g.shared,(ar&2)!==0){var k=g.pending;return k===null?c.next=c:(c.next=k.next,k.next=c),g.pending=c,za(o,h)}return k=g.interleaved,k===null?(c.next=c,dg(g)):(c.next=k.next,k.next=c),g.interleaved=c,za(o,h)}function kf(o,c,h){if(c=c.updateQueue,c!==null&&(c=c.shared,(h&4194240)!==0)){var g=c.lanes;g&=o.pendingLanes,h|=g,c.lanes=h,Fi(o,h)}}function y1(o,c){var h=o.updateQueue,g=o.alternate;if(g!==null&&(g=g.updateQueue,h===g)){var k=null,_=null;if(h=h.firstBaseUpdate,h!==null){do{var P={eventTime:h.eventTime,lane:h.lane,tag:h.tag,payload:h.payload,callback:h.callback,next:null};_===null?k=_=P:_=_.next=P,h=h.next}while(h!==null);_===null?k=_=c:_=_.next=c}else k=_=c;h={baseState:g.baseState,firstBaseUpdate:k,lastBaseUpdate:_,shared:g.shared,effects:g.effects},o.updateQueue=h;return}o=h.lastBaseUpdate,o===null?h.firstBaseUpdate=c:o.next=c,h.lastBaseUpdate=c}function _f(o,c,h,g){var k=o.updateQueue;No=!1;var _=k.firstBaseUpdate,P=k.lastBaseUpdate,B=k.shared.pending;if(B!==null){k.shared.pending=null;var Q=B,xe=Q.next;Q.next=null,P===null?_=xe:P.next=xe,P=Q;var Me=o.alternate;Me!==null&&(Me=Me.updateQueue,B=Me.lastBaseUpdate,B!==P&&(B===null?Me.firstBaseUpdate=xe:B.next=xe,Me.lastBaseUpdate=Q))}if(_!==null){var Be=k.baseState;P=0,Me=xe=Q=null,B=_;do{var De=B.lane,st=B.eventTime;if((g&De)===De){Me!==null&&(Me=Me.next={eventTime:st,lane:0,tag:B.tag,payload:B.payload,callback:B.callback,next:null});e:{var ut=o,ht=B;switch(De=c,st=h,ht.tag){case 1:if(ut=ht.payload,typeof ut=="function"){Be=ut.call(st,Be,De);break e}Be=ut;break e;case 3:ut.flags=ut.flags&-65537|128;case 0:if(ut=ht.payload,De=typeof ut=="function"?ut.call(st,Be,De):ut,De==null)break e;Be=he({},Be,De);break e;case 2:No=!0}}B.callback!==null&&B.lane!==0&&(o.flags|=64,De=k.effects,De===null?k.effects=[B]:De.push(B))}else st={eventTime:st,lane:De,tag:B.tag,payload:B.payload,callback:B.callback,next:null},Me===null?(xe=Me=st,Q=Be):Me=Me.next=st,P|=De;if(B=B.next,B===null){if(B=k.shared.pending,B===null)break;De=B,B=De.next,De.next=null,k.lastBaseUpdate=De,k.shared.pending=null}}while(!0);if(Me===null&&(Q=Be),k.baseState=Q,k.firstBaseUpdate=xe,k.lastBaseUpdate=Me,c=k.shared.interleaved,c!==null){k=c;do P|=k.lane,k=k.next;while(k!==c)}else _===null&&(k.shared.lanes=0);cl|=P,o.lanes=P,o.memoizedState=Be}}function v1(o,c,h){if(o=c.effects,c.effects=null,o!==null)for(c=0;c<o.length;c++){var g=o[c],k=g.callback;if(k!==null){if(g.callback=null,g=h,typeof k!="function")throw Error(r(191,k));k.call(g)}}}var Ou={},va=So(Ou),Iu=So(Ou),Du=So(Ou);function ol(o){if(o===Ou)throw Error(r(174));return o}function hg(o,c){switch(Or(Du,c),Or(Iu,o),Or(va,Ou),o=c.nodeType,o){case 9:case 11:c=(c=c.documentElement)?c.namespaceURI:Fe(null,"");break;default:o=o===8?c.parentNode:c,c=o.namespaceURI||null,o=o.tagName,c=Fe(c,o)}Ur(va),Or(va,c)}function dc(){Ur(va),Ur(Iu),Ur(Du)}function x1(o){ol(Du.current);var c=ol(va.current),h=Fe(c,o.type);c!==h&&(Or(Iu,o),Or(va,h))}function mg(o){Iu.current===o&&(Ur(va),Ur(Iu))}var nn=So(0);function Nf(o){for(var c=o;c!==null;){if(c.tag===13){var h=c.memoizedState;if(h!==null&&(h=h.dehydrated,h===null||h.data==="$?"||h.data==="$!"))return c}else if(c.tag===19&&c.memoizedProps.revealOrder!==void 0){if((c.flags&128)!==0)return c}else if(c.child!==null){c.child.return=c,c=c.child;continue}if(c===o)break;for(;c.sibling===null;){if(c.return===null||c.return===o)return null;c=c.return}c.sibling.return=c.return,c=c.sibling}return null}var pg=[];function gg(){for(var o=0;o<pg.length;o++)pg[o]._workInProgressVersionPrimary=null;pg.length=0}var Cf=I.ReactCurrentDispatcher,yg=I.ReactCurrentBatchConfig,ll=0,sn=null,$n=null,Kn=null,Ef=!1,$u=!1,Ru=0,C4=0;function ws(){throw Error(r(321))}function vg(o,c){if(c===null)return!1;for(var h=0;h<c.length&&h<o.length;h++)if(!Hi(o[h],c[h]))return!1;return!0}function xg(o,c,h,g,k,_){if(ll=_,sn=c,c.memoizedState=null,c.updateQueue=null,c.lanes=0,Cf.current=o===null||o.memoizedState===null?T4:O4,o=h(g,k),$u){_=0;do{if($u=!1,Ru=0,25<=_)throw Error(r(301));_+=1,Kn=$n=null,c.updateQueue=null,Cf.current=I4,o=h(g,k)}while($u)}if(Cf.current=Tf,c=$n!==null&&$n.next!==null,ll=0,Kn=$n=sn=null,Ef=!1,c)throw Error(r(300));return o}function wg(){var o=Ru!==0;return Ru=0,o}function xa(){var o={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Kn===null?sn.memoizedState=Kn=o:Kn=Kn.next=o,Kn}function _i(){if($n===null){var o=sn.alternate;o=o!==null?o.memoizedState:null}else o=$n.next;var c=Kn===null?sn.memoizedState:Kn.next;if(c!==null)Kn=c,$n=o;else{if(o===null)throw Error(r(310));$n=o,o={memoizedState:$n.memoizedState,baseState:$n.baseState,baseQueue:$n.baseQueue,queue:$n.queue,next:null},Kn===null?sn.memoizedState=Kn=o:Kn=Kn.next=o}return Kn}function Mu(o,c){return typeof c=="function"?c(o):c}function bg(o){var c=_i(),h=c.queue;if(h===null)throw Error(r(311));h.lastRenderedReducer=o;var g=$n,k=g.baseQueue,_=h.pending;if(_!==null){if(k!==null){var P=k.next;k.next=_.next,_.next=P}g.baseQueue=k=_,h.pending=null}if(k!==null){_=k.next,g=g.baseState;var B=P=null,Q=null,xe=_;do{var Me=xe.lane;if((ll&Me)===Me)Q!==null&&(Q=Q.next={lane:0,action:xe.action,hasEagerState:xe.hasEagerState,eagerState:xe.eagerState,next:null}),g=xe.hasEagerState?xe.eagerState:o(g,xe.action);else{var Be={lane:Me,action:xe.action,hasEagerState:xe.hasEagerState,eagerState:xe.eagerState,next:null};Q===null?(B=Q=Be,P=g):Q=Q.next=Be,sn.lanes|=Me,cl|=Me}xe=xe.next}while(xe!==null&&xe!==_);Q===null?P=g:Q.next=B,Hi(g,c.memoizedState)||(zs=!0),c.memoizedState=g,c.baseState=P,c.baseQueue=Q,h.lastRenderedState=g}if(o=h.interleaved,o!==null){k=o;do _=k.lane,sn.lanes|=_,cl|=_,k=k.next;while(k!==o)}else k===null&&(h.lanes=0);return[c.memoizedState,h.dispatch]}function jg(o){var c=_i(),h=c.queue;if(h===null)throw Error(r(311));h.lastRenderedReducer=o;var g=h.dispatch,k=h.pending,_=c.memoizedState;if(k!==null){h.pending=null;var P=k=k.next;do _=o(_,P.action),P=P.next;while(P!==k);Hi(_,c.memoizedState)||(zs=!0),c.memoizedState=_,c.baseQueue===null&&(c.baseState=_),h.lastRenderedState=_}return[_,g]}function w1(){}function b1(o,c){var h=sn,g=_i(),k=c(),_=!Hi(g.memoizedState,k);if(_&&(g.memoizedState=k,zs=!0),g=g.queue,Sg(k1.bind(null,h,g,o),[o]),g.getSnapshot!==c||_||Kn!==null&&Kn.memoizedState.tag&1){if(h.flags|=2048,Fu(9,S1.bind(null,h,g,k,c),void 0,null),Gn===null)throw Error(r(349));(ll&30)!==0||j1(h,c,k)}return k}function j1(o,c,h){o.flags|=16384,o={getSnapshot:c,value:h},c=sn.updateQueue,c===null?(c={lastEffect:null,stores:null},sn.updateQueue=c,c.stores=[o]):(h=c.stores,h===null?c.stores=[o]:h.push(o))}function S1(o,c,h,g){c.value=h,c.getSnapshot=g,_1(c)&&N1(o)}function k1(o,c,h){return h(function(){_1(c)&&N1(o)})}function _1(o){var c=o.getSnapshot;o=o.value;try{var h=c();return!Hi(o,h)}catch{return!0}}function N1(o){var c=za(o,1);c!==null&&Xi(c,o,1,-1)}function C1(o){var c=xa();return typeof o=="function"&&(o=o()),c.memoizedState=c.baseState=o,o={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Mu,lastRenderedState:o},c.queue=o,o=o.dispatch=P4.bind(null,sn,o),[c.memoizedState,o]}function Fu(o,c,h,g){return o={tag:o,create:c,destroy:h,deps:g,next:null},c=sn.updateQueue,c===null?(c={lastEffect:null,stores:null},sn.updateQueue=c,c.lastEffect=o.next=o):(h=c.lastEffect,h===null?c.lastEffect=o.next=o:(g=h.next,h.next=o,o.next=g,c.lastEffect=o)),o}function E1(){return _i().memoizedState}function Af(o,c,h,g){var k=xa();sn.flags|=o,k.memoizedState=Fu(1|c,h,void 0,g===void 0?null:g)}function Pf(o,c,h,g){var k=_i();g=g===void 0?null:g;var _=void 0;if($n!==null){var P=$n.memoizedState;if(_=P.destroy,g!==null&&vg(g,P.deps)){k.memoizedState=Fu(c,h,_,g);return}}sn.flags|=o,k.memoizedState=Fu(1|c,h,_,g)}function A1(o,c){return Af(8390656,8,o,c)}function Sg(o,c){return Pf(2048,8,o,c)}function P1(o,c){return Pf(4,2,o,c)}function T1(o,c){return Pf(4,4,o,c)}function O1(o,c){if(typeof c=="function")return o=o(),c(o),function(){c(null)};if(c!=null)return o=o(),c.current=o,function(){c.current=null}}function I1(o,c,h){return h=h!=null?h.concat([o]):null,Pf(4,4,O1.bind(null,c,o),h)}function kg(){}function D1(o,c){var h=_i();c=c===void 0?null:c;var g=h.memoizedState;return g!==null&&c!==null&&vg(c,g[1])?g[0]:(h.memoizedState=[o,c],o)}function $1(o,c){var h=_i();c=c===void 0?null:c;var g=h.memoizedState;return g!==null&&c!==null&&vg(c,g[1])?g[0]:(o=o(),h.memoizedState=[o,c],o)}function R1(o,c,h){return(ll&21)===0?(o.baseState&&(o.baseState=!1,zs=!0),o.memoizedState=h):(Hi(h,c)||(h=gr(),sn.lanes|=h,cl|=h,o.baseState=!0),c)}function E4(o,c){var h=Ut;Ut=h!==0&&4>h?h:4,o(!0);var g=yg.transition;yg.transition={};try{o(!1),c()}finally{Ut=h,yg.transition=g}}function M1(){return _i().memoizedState}function A4(o,c,h){var g=To(o);if(h={lane:g,action:h,hasEagerState:!1,eagerState:null,next:null},F1(o))L1(c,h);else if(h=p1(o,c,h,g),h!==null){var k=Es();Xi(h,o,g,k),z1(h,c,g)}}function P4(o,c,h){var g=To(o),k={lane:g,action:h,hasEagerState:!1,eagerState:null,next:null};if(F1(o))L1(c,k);else{var _=o.alternate;if(o.lanes===0&&(_===null||_.lanes===0)&&(_=c.lastRenderedReducer,_!==null))try{var P=c.lastRenderedState,B=_(P,h);if(k.hasEagerState=!0,k.eagerState=B,Hi(B,P)){var Q=c.interleaved;Q===null?(k.next=k,dg(c)):(k.next=Q.next,Q.next=k),c.interleaved=k;return}}catch{}finally{}h=p1(o,c,k,g),h!==null&&(k=Es(),Xi(h,o,g,k),z1(h,c,g))}}function F1(o){var c=o.alternate;return o===sn||c!==null&&c===sn}function L1(o,c){$u=Ef=!0;var h=o.pending;h===null?c.next=c:(c.next=h.next,h.next=c),o.pending=c}function z1(o,c,h){if((h&4194240)!==0){var g=c.lanes;g&=o.pendingLanes,h|=g,c.lanes=h,Fi(o,h)}}var Tf={readContext:ki,useCallback:ws,useContext:ws,useEffect:ws,useImperativeHandle:ws,useInsertionEffect:ws,useLayoutEffect:ws,useMemo:ws,useReducer:ws,useRef:ws,useState:ws,useDebugValue:ws,useDeferredValue:ws,useTransition:ws,useMutableSource:ws,useSyncExternalStore:ws,useId:ws,unstable_isNewReconciler:!1},T4={readContext:ki,useCallback:function(o,c){return xa().memoizedState=[o,c===void 0?null:c],o},useContext:ki,useEffect:A1,useImperativeHandle:function(o,c,h){return h=h!=null?h.concat([o]):null,Af(4194308,4,O1.bind(null,c,o),h)},useLayoutEffect:function(o,c){return Af(4194308,4,o,c)},useInsertionEffect:function(o,c){return Af(4,2,o,c)},useMemo:function(o,c){var h=xa();return c=c===void 0?null:c,o=o(),h.memoizedState=[o,c],o},useReducer:function(o,c,h){var g=xa();return c=h!==void 0?h(c):c,g.memoizedState=g.baseState=c,o={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:o,lastRenderedState:c},g.queue=o,o=o.dispatch=A4.bind(null,sn,o),[g.memoizedState,o]},useRef:function(o){var c=xa();return o={current:o},c.memoizedState=o},useState:C1,useDebugValue:kg,useDeferredValue:function(o){return xa().memoizedState=o},useTransition:function(){var o=C1(!1),c=o[0];return o=E4.bind(null,o[1]),xa().memoizedState=o,[c,o]},useMutableSource:function(){},useSyncExternalStore:function(o,c,h){var g=sn,k=xa();if(Xr){if(h===void 0)throw Error(r(407));h=h()}else{if(h=c(),Gn===null)throw Error(r(349));(ll&30)!==0||j1(g,c,h)}k.memoizedState=h;var _={value:h,getSnapshot:c};return k.queue=_,A1(k1.bind(null,g,_,o),[o]),g.flags|=2048,Fu(9,S1.bind(null,g,_,h,c),void 0,null),h},useId:function(){var o=xa(),c=Gn.identifierPrefix;if(Xr){var h=La,g=Fa;h=(g&~(1<<32-Oe(g)-1)).toString(32)+h,c=":"+c+"R"+h,h=Ru++,0<h&&(c+="H"+h.toString(32)),c+=":"}else h=C4++,c=":"+c+"r"+h.toString(32)+":";return o.memoizedState=c},unstable_isNewReconciler:!1},O4={readContext:ki,useCallback:D1,useContext:ki,useEffect:Sg,useImperativeHandle:I1,useInsertionEffect:P1,useLayoutEffect:T1,useMemo:$1,useReducer:bg,useRef:E1,useState:function(){return bg(Mu)},useDebugValue:kg,useDeferredValue:function(o){var c=_i();return R1(c,$n.memoizedState,o)},useTransition:function(){var o=bg(Mu)[0],c=_i().memoizedState;return[o,c]},useMutableSource:w1,useSyncExternalStore:b1,useId:M1,unstable_isNewReconciler:!1},I4={readContext:ki,useCallback:D1,useContext:ki,useEffect:Sg,useImperativeHandle:I1,useInsertionEffect:P1,useLayoutEffect:T1,useMemo:$1,useReducer:jg,useRef:E1,useState:function(){return jg(Mu)},useDebugValue:kg,useDeferredValue:function(o){var c=_i();return $n===null?c.memoizedState=o:R1(c,$n.memoizedState,o)},useTransition:function(){var o=jg(Mu)[0],c=_i().memoizedState;return[o,c]},useMutableSource:w1,useSyncExternalStore:b1,useId:M1,unstable_isNewReconciler:!1};function Gi(o,c){if(o&&o.defaultProps){c=he({},c),o=o.defaultProps;for(var h in o)c[h]===void 0&&(c[h]=o[h]);return c}return c}function _g(o,c,h,g){c=o.memoizedState,h=h(g,c),h=h==null?c:he({},c,h),o.memoizedState=h,o.lanes===0&&(o.updateQueue.baseState=h)}var Of={isMounted:function(o){return(o=o._reactInternals)?vr(o)===o:!1},enqueueSetState:function(o,c,h){o=o._reactInternals;var g=Es(),k=To(o),_=Ua(g,k);_.payload=c,h!=null&&(_.callback=h),c=Co(o,_,k),c!==null&&(Xi(c,o,k,g),kf(c,o,k))},enqueueReplaceState:function(o,c,h){o=o._reactInternals;var g=Es(),k=To(o),_=Ua(g,k);_.tag=1,_.payload=c,h!=null&&(_.callback=h),c=Co(o,_,k),c!==null&&(Xi(c,o,k,g),kf(c,o,k))},enqueueForceUpdate:function(o,c){o=o._reactInternals;var h=Es(),g=To(o),k=Ua(h,g);k.tag=2,c!=null&&(k.callback=c),c=Co(o,k,g),c!==null&&(Xi(c,o,g,h),kf(c,o,g))}};function U1(o,c,h,g,k,_,P){return o=o.stateNode,typeof o.shouldComponentUpdate=="function"?o.shouldComponentUpdate(g,_,P):c.prototype&&c.prototype.isPureReactComponent?!ku(h,g)||!ku(k,_):!0}function B1(o,c,h){var g=!1,k=ko,_=c.contextType;return typeof _=="object"&&_!==null?_=ki(_):(k=Ls(c)?nl:xs.current,g=c.contextTypes,_=(g=g!=null)?sc(o,k):ko),c=new c(h,_),o.memoizedState=c.state!==null&&c.state!==void 0?c.state:null,c.updater=Of,o.stateNode=c,c._reactInternals=o,g&&(o=o.stateNode,o.__reactInternalMemoizedUnmaskedChildContext=k,o.__reactInternalMemoizedMaskedChildContext=_),c}function W1(o,c,h,g){o=c.state,typeof c.componentWillReceiveProps=="function"&&c.componentWillReceiveProps(h,g),typeof c.UNSAFE_componentWillReceiveProps=="function"&&c.UNSAFE_componentWillReceiveProps(h,g),c.state!==o&&Of.enqueueReplaceState(c,c.state,null)}function Ng(o,c,h,g){var k=o.stateNode;k.props=h,k.state=o.memoizedState,k.refs={},fg(o);var _=c.contextType;typeof _=="object"&&_!==null?k.context=ki(_):(_=Ls(c)?nl:xs.current,k.context=sc(o,_)),k.state=o.memoizedState,_=c.getDerivedStateFromProps,typeof _=="function"&&(_g(o,c,_,h),k.state=o.memoizedState),typeof c.getDerivedStateFromProps=="function"||typeof k.getSnapshotBeforeUpdate=="function"||typeof k.UNSAFE_componentWillMount!="function"&&typeof k.componentWillMount!="function"||(c=k.state,typeof k.componentWillMount=="function"&&k.componentWillMount(),typeof k.UNSAFE_componentWillMount=="function"&&k.UNSAFE_componentWillMount(),c!==k.state&&Of.enqueueReplaceState(k,k.state,null),_f(o,h,k,g),k.state=o.memoizedState),typeof k.componentDidMount=="function"&&(o.flags|=4194308)}function fc(o,c){try{var h="",g=c;do h+=de(g),g=g.return;while(g);var k=h}catch(_){k=`
Error generating stack: `+_.message+`
`+_.stack}return{value:o,source:c,stack:k,digest:null}}function Cg(o,c,h){return{value:o,source:null,stack:h??null,digest:c??null}}function Eg(o,c){try{console.error(c.value)}catch(h){setTimeout(function(){throw h})}}var D4=typeof WeakMap=="function"?WeakMap:Map;function V1(o,c,h){h=Ua(-1,h),h.tag=3,h.payload={element:null};var g=c.value;return h.callback=function(){Lf||(Lf=!0,Wg=g),Eg(o,c)},h}function q1(o,c,h){h=Ua(-1,h),h.tag=3;var g=o.type.getDerivedStateFromError;if(typeof g=="function"){var k=c.value;h.payload=function(){return g(k)},h.callback=function(){Eg(o,c)}}var _=o.stateNode;return _!==null&&typeof _.componentDidCatch=="function"&&(h.callback=function(){Eg(o,c),typeof g!="function"&&(Ao===null?Ao=new Set([this]):Ao.add(this));var P=c.stack;this.componentDidCatch(c.value,{componentStack:P!==null?P:""})}),h}function H1(o,c,h){var g=o.pingCache;if(g===null){g=o.pingCache=new D4;var k=new Set;g.set(c,k)}else k=g.get(c),k===void 0&&(k=new Set,g.set(c,k));k.has(h)||(k.add(h),o=G4.bind(null,o,c,h),c.then(o,o))}function K1(o){do{var c;if((c=o.tag===13)&&(c=o.memoizedState,c=c!==null?c.dehydrated!==null:!0),c)return o;o=o.return}while(o!==null);return null}function G1(o,c,h,g,k){return(o.mode&1)===0?(o===c?o.flags|=65536:(o.flags|=128,h.flags|=131072,h.flags&=-52805,h.tag===1&&(h.alternate===null?h.tag=17:(c=Ua(-1,1),c.tag=2,Co(h,c,1))),h.lanes|=1),o):(o.flags|=65536,o.lanes=k,o)}var $4=I.ReactCurrentOwner,zs=!1;function Cs(o,c,h,g){c.child=o===null?m1(c,null,h,g):lc(c,o.child,h,g)}function Y1(o,c,h,g,k){h=h.render;var _=c.ref;return uc(c,k),g=xg(o,c,h,g,_,k),h=wg(),o!==null&&!zs?(c.updateQueue=o.updateQueue,c.flags&=-2053,o.lanes&=~k,Ba(o,c,k)):(Xr&&h&&rg(c),c.flags|=1,Cs(o,c,g,k),c.child)}function J1(o,c,h,g,k){if(o===null){var _=h.type;return typeof _=="function"&&!Jg(_)&&_.defaultProps===void 0&&h.compare===null&&h.defaultProps===void 0?(c.tag=15,c.type=_,X1(o,c,_,g,k)):(o=qf(h.type,null,g,c,c.mode,k),o.ref=c.ref,o.return=c,c.child=o)}if(_=o.child,(o.lanes&k)===0){var P=_.memoizedProps;if(h=h.compare,h=h!==null?h:ku,h(P,g)&&o.ref===c.ref)return Ba(o,c,k)}return c.flags|=1,o=Io(_,g),o.ref=c.ref,o.return=c,c.child=o}function X1(o,c,h,g,k){if(o!==null){var _=o.memoizedProps;if(ku(_,g)&&o.ref===c.ref)if(zs=!1,c.pendingProps=g=_,(o.lanes&k)!==0)(o.flags&131072)!==0&&(zs=!0);else return c.lanes=o.lanes,Ba(o,c,k)}return Ag(o,c,h,g,k)}function Q1(o,c,h){var g=c.pendingProps,k=g.children,_=o!==null?o.memoizedState:null;if(g.mode==="hidden")if((c.mode&1)===0)c.memoizedState={baseLanes:0,cachePool:null,transitions:null},Or(mc,si),si|=h;else{if((h&1073741824)===0)return o=_!==null?_.baseLanes|h:h,c.lanes=c.childLanes=1073741824,c.memoizedState={baseLanes:o,cachePool:null,transitions:null},c.updateQueue=null,Or(mc,si),si|=o,null;c.memoizedState={baseLanes:0,cachePool:null,transitions:null},g=_!==null?_.baseLanes:h,Or(mc,si),si|=g}else _!==null?(g=_.baseLanes|h,c.memoizedState=null):g=h,Or(mc,si),si|=g;return Cs(o,c,k,h),c.child}function Z1(o,c){var h=c.ref;(o===null&&h!==null||o!==null&&o.ref!==h)&&(c.flags|=512,c.flags|=2097152)}function Ag(o,c,h,g,k){var _=Ls(h)?nl:xs.current;return _=sc(c,_),uc(c,k),h=xg(o,c,h,g,_,k),g=wg(),o!==null&&!zs?(c.updateQueue=o.updateQueue,c.flags&=-2053,o.lanes&=~k,Ba(o,c,k)):(Xr&&g&&rg(c),c.flags|=1,Cs(o,c,h,k),c.child)}function ej(o,c,h,g,k){if(Ls(h)){var _=!0;gf(c)}else _=!1;if(uc(c,k),c.stateNode===null)Df(o,c),B1(c,h,g),Ng(c,h,g,k),g=!0;else if(o===null){var P=c.stateNode,B=c.memoizedProps;P.props=B;var Q=P.context,xe=h.contextType;typeof xe=="object"&&xe!==null?xe=ki(xe):(xe=Ls(h)?nl:xs.current,xe=sc(c,xe));var Me=h.getDerivedStateFromProps,Be=typeof Me=="function"||typeof P.getSnapshotBeforeUpdate=="function";Be||typeof P.UNSAFE_componentWillReceiveProps!="function"&&typeof P.componentWillReceiveProps!="function"||(B!==g||Q!==xe)&&W1(c,P,g,xe),No=!1;var De=c.memoizedState;P.state=De,_f(c,g,P,k),Q=c.memoizedState,B!==g||De!==Q||Fs.current||No?(typeof Me=="function"&&(_g(c,h,Me,g),Q=c.memoizedState),(B=No||U1(c,h,B,g,De,Q,xe))?(Be||typeof P.UNSAFE_componentWillMount!="function"&&typeof P.componentWillMount!="function"||(typeof P.componentWillMount=="function"&&P.componentWillMount(),typeof P.UNSAFE_componentWillMount=="function"&&P.UNSAFE_componentWillMount()),typeof P.componentDidMount=="function"&&(c.flags|=4194308)):(typeof P.componentDidMount=="function"&&(c.flags|=4194308),c.memoizedProps=g,c.memoizedState=Q),P.props=g,P.state=Q,P.context=xe,g=B):(typeof P.componentDidMount=="function"&&(c.flags|=4194308),g=!1)}else{P=c.stateNode,g1(o,c),B=c.memoizedProps,xe=c.type===c.elementType?B:Gi(c.type,B),P.props=xe,Be=c.pendingProps,De=P.context,Q=h.contextType,typeof Q=="object"&&Q!==null?Q=ki(Q):(Q=Ls(h)?nl:xs.current,Q=sc(c,Q));var st=h.getDerivedStateFromProps;(Me=typeof st=="function"||typeof P.getSnapshotBeforeUpdate=="function")||typeof P.UNSAFE_componentWillReceiveProps!="function"&&typeof P.componentWillReceiveProps!="function"||(B!==Be||De!==Q)&&W1(c,P,g,Q),No=!1,De=c.memoizedState,P.state=De,_f(c,g,P,k);var ut=c.memoizedState;B!==Be||De!==ut||Fs.current||No?(typeof st=="function"&&(_g(c,h,st,g),ut=c.memoizedState),(xe=No||U1(c,h,xe,g,De,ut,Q)||!1)?(Me||typeof P.UNSAFE_componentWillUpdate!="function"&&typeof P.componentWillUpdate!="function"||(typeof P.componentWillUpdate=="function"&&P.componentWillUpdate(g,ut,Q),typeof P.UNSAFE_componentWillUpdate=="function"&&P.UNSAFE_componentWillUpdate(g,ut,Q)),typeof P.componentDidUpdate=="function"&&(c.flags|=4),typeof P.getSnapshotBeforeUpdate=="function"&&(c.flags|=1024)):(typeof P.componentDidUpdate!="function"||B===o.memoizedProps&&De===o.memoizedState||(c.flags|=4),typeof P.getSnapshotBeforeUpdate!="function"||B===o.memoizedProps&&De===o.memoizedState||(c.flags|=1024),c.memoizedProps=g,c.memoizedState=ut),P.props=g,P.state=ut,P.context=Q,g=xe):(typeof P.componentDidUpdate!="function"||B===o.memoizedProps&&De===o.memoizedState||(c.flags|=4),typeof P.getSnapshotBeforeUpdate!="function"||B===o.memoizedProps&&De===o.memoizedState||(c.flags|=1024),g=!1)}return Pg(o,c,h,g,_,k)}function Pg(o,c,h,g,k,_){Z1(o,c);var P=(c.flags&128)!==0;if(!g&&!P)return k&&i1(c,h,!1),Ba(o,c,_);g=c.stateNode,$4.current=c;var B=P&&typeof h.getDerivedStateFromError!="function"?null:g.render();return c.flags|=1,o!==null&&P?(c.child=lc(c,o.child,null,_),c.child=lc(c,null,B,_)):Cs(o,c,B,_),c.memoizedState=g.state,k&&i1(c,h,!0),c.child}function tj(o){var c=o.stateNode;c.pendingContext?n1(o,c.pendingContext,c.pendingContext!==c.context):c.context&&n1(o,c.context,!1),hg(o,c.containerInfo)}function rj(o,c,h,g,k){return oc(),ag(k),c.flags|=256,Cs(o,c,h,g),c.child}var Tg={dehydrated:null,treeContext:null,retryLane:0};function Og(o){return{baseLanes:o,cachePool:null,transitions:null}}function nj(o,c,h){var g=c.pendingProps,k=nn.current,_=!1,P=(c.flags&128)!==0,B;if((B=P)||(B=o!==null&&o.memoizedState===null?!1:(k&2)!==0),B?(_=!0,c.flags&=-129):(o===null||o.memoizedState!==null)&&(k|=1),Or(nn,k&1),o===null)return ig(c),o=c.memoizedState,o!==null&&(o=o.dehydrated,o!==null)?((c.mode&1)===0?c.lanes=1:o.data==="$!"?c.lanes=8:c.lanes=1073741824,null):(P=g.children,o=g.fallback,_?(g=c.mode,_=c.child,P={mode:"hidden",children:P},(g&1)===0&&_!==null?(_.childLanes=0,_.pendingProps=P):_=Hf(P,g,0,null),o=hl(o,g,h,null),_.return=c,o.return=c,_.sibling=o,c.child=_,c.child.memoizedState=Og(h),c.memoizedState=Tg,o):Ig(c,P));if(k=o.memoizedState,k!==null&&(B=k.dehydrated,B!==null))return R4(o,c,P,g,B,k,h);if(_){_=g.fallback,P=c.mode,k=o.child,B=k.sibling;var Q={mode:"hidden",children:g.children};return(P&1)===0&&c.child!==k?(g=c.child,g.childLanes=0,g.pendingProps=Q,c.deletions=null):(g=Io(k,Q),g.subtreeFlags=k.subtreeFlags&14680064),B!==null?_=Io(B,_):(_=hl(_,P,h,null),_.flags|=2),_.return=c,g.return=c,g.sibling=_,c.child=g,g=_,_=c.child,P=o.child.memoizedState,P=P===null?Og(h):{baseLanes:P.baseLanes|h,cachePool:null,transitions:P.transitions},_.memoizedState=P,_.childLanes=o.childLanes&~h,c.memoizedState=Tg,g}return _=o.child,o=_.sibling,g=Io(_,{mode:"visible",children:g.children}),(c.mode&1)===0&&(g.lanes=h),g.return=c,g.sibling=null,o!==null&&(h=c.deletions,h===null?(c.deletions=[o],c.flags|=16):h.push(o)),c.child=g,c.memoizedState=null,g}function Ig(o,c){return c=Hf({mode:"visible",children:c},o.mode,0,null),c.return=o,o.child=c}function If(o,c,h,g){return g!==null&&ag(g),lc(c,o.child,null,h),o=Ig(c,c.pendingProps.children),o.flags|=2,c.memoizedState=null,o}function R4(o,c,h,g,k,_,P){if(h)return c.flags&256?(c.flags&=-257,g=Cg(Error(r(422))),If(o,c,P,g)):c.memoizedState!==null?(c.child=o.child,c.flags|=128,null):(_=g.fallback,k=c.mode,g=Hf({mode:"visible",children:g.children},k,0,null),_=hl(_,k,P,null),_.flags|=2,g.return=c,_.return=c,g.sibling=_,c.child=g,(c.mode&1)!==0&&lc(c,o.child,null,P),c.child.memoizedState=Og(P),c.memoizedState=Tg,_);if((c.mode&1)===0)return If(o,c,P,null);if(k.data==="$!"){if(g=k.nextSibling&&k.nextSibling.dataset,g)var B=g.dgst;return g=B,_=Error(r(419)),g=Cg(_,g,void 0),If(o,c,P,g)}if(B=(P&o.childLanes)!==0,zs||B){if(g=Gn,g!==null){switch(P&-P){case 4:k=2;break;case 16:k=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:k=32;break;case 536870912:k=268435456;break;default:k=0}k=(k&(g.suspendedLanes|P))!==0?0:k,k!==0&&k!==_.retryLane&&(_.retryLane=k,za(o,k),Xi(g,o,k,-1))}return Yg(),g=Cg(Error(r(421))),If(o,c,P,g)}return k.data==="$?"?(c.flags|=128,c.child=o.child,c=Y4.bind(null,o),k._reactRetry=c,null):(o=_.treeContext,ni=jo(k.nextSibling),ri=c,Xr=!0,Ki=null,o!==null&&(ji[Si++]=Fa,ji[Si++]=La,ji[Si++]=sl,Fa=o.id,La=o.overflow,sl=c),c=Ig(c,g.children),c.flags|=4096,c)}function sj(o,c,h){o.lanes|=c;var g=o.alternate;g!==null&&(g.lanes|=c),ug(o.return,c,h)}function Dg(o,c,h,g,k){var _=o.memoizedState;_===null?o.memoizedState={isBackwards:c,rendering:null,renderingStartTime:0,last:g,tail:h,tailMode:k}:(_.isBackwards=c,_.rendering=null,_.renderingStartTime=0,_.last=g,_.tail=h,_.tailMode=k)}function ij(o,c,h){var g=c.pendingProps,k=g.revealOrder,_=g.tail;if(Cs(o,c,g.children,h),g=nn.current,(g&2)!==0)g=g&1|2,c.flags|=128;else{if(o!==null&&(o.flags&128)!==0)e:for(o=c.child;o!==null;){if(o.tag===13)o.memoizedState!==null&&sj(o,h,c);else if(o.tag===19)sj(o,h,c);else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===c)break e;for(;o.sibling===null;){if(o.return===null||o.return===c)break e;o=o.return}o.sibling.return=o.return,o=o.sibling}g&=1}if(Or(nn,g),(c.mode&1)===0)c.memoizedState=null;else switch(k){case"forwards":for(h=c.child,k=null;h!==null;)o=h.alternate,o!==null&&Nf(o)===null&&(k=h),h=h.sibling;h=k,h===null?(k=c.child,c.child=null):(k=h.sibling,h.sibling=null),Dg(c,!1,k,h,_);break;case"backwards":for(h=null,k=c.child,c.child=null;k!==null;){if(o=k.alternate,o!==null&&Nf(o)===null){c.child=k;break}o=k.sibling,k.sibling=h,h=k,k=o}Dg(c,!0,h,null,_);break;case"together":Dg(c,!1,null,null,void 0);break;default:c.memoizedState=null}return c.child}function Df(o,c){(c.mode&1)===0&&o!==null&&(o.alternate=null,c.alternate=null,c.flags|=2)}function Ba(o,c,h){if(o!==null&&(c.dependencies=o.dependencies),cl|=c.lanes,(h&c.childLanes)===0)return null;if(o!==null&&c.child!==o.child)throw Error(r(153));if(c.child!==null){for(o=c.child,h=Io(o,o.pendingProps),c.child=h,h.return=c;o.sibling!==null;)o=o.sibling,h=h.sibling=Io(o,o.pendingProps),h.return=c;h.sibling=null}return c.child}function M4(o,c,h){switch(c.tag){case 3:tj(c),oc();break;case 5:x1(c);break;case 1:Ls(c.type)&&gf(c);break;case 4:hg(c,c.stateNode.containerInfo);break;case 10:var g=c.type._context,k=c.memoizedProps.value;Or(jf,g._currentValue),g._currentValue=k;break;case 13:if(g=c.memoizedState,g!==null)return g.dehydrated!==null?(Or(nn,nn.current&1),c.flags|=128,null):(h&c.child.childLanes)!==0?nj(o,c,h):(Or(nn,nn.current&1),o=Ba(o,c,h),o!==null?o.sibling:null);Or(nn,nn.current&1);break;case 19:if(g=(h&c.childLanes)!==0,(o.flags&128)!==0){if(g)return ij(o,c,h);c.flags|=128}if(k=c.memoizedState,k!==null&&(k.rendering=null,k.tail=null,k.lastEffect=null),Or(nn,nn.current),g)break;return null;case 22:case 23:return c.lanes=0,Q1(o,c,h)}return Ba(o,c,h)}var aj,$g,oj,lj;aj=function(o,c){for(var h=c.child;h!==null;){if(h.tag===5||h.tag===6)o.appendChild(h.stateNode);else if(h.tag!==4&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===c)break;for(;h.sibling===null;){if(h.return===null||h.return===c)return;h=h.return}h.sibling.return=h.return,h=h.sibling}},$g=function(){},oj=function(o,c,h,g){var k=o.memoizedProps;if(k!==g){o=c.stateNode,ol(va.current);var _=null;switch(h){case"input":k=Ge(o,k),g=Ge(o,g),_=[];break;case"select":k=he({},k,{value:void 0}),g=he({},g,{value:void 0}),_=[];break;case"textarea":k=ee(o,k),g=ee(o,g),_=[];break;default:typeof k.onClick!="function"&&typeof g.onClick=="function"&&(o.onclick=hf)}Je(h,g);var P;h=null;for(xe in k)if(!g.hasOwnProperty(xe)&&k.hasOwnProperty(xe)&&k[xe]!=null)if(xe==="style"){var B=k[xe];for(P in B)B.hasOwnProperty(P)&&(h||(h={}),h[P]="")}else xe!=="dangerouslySetInnerHTML"&&xe!=="children"&&xe!=="suppressContentEditableWarning"&&xe!=="suppressHydrationWarning"&&xe!=="autoFocus"&&(s.hasOwnProperty(xe)?_||(_=[]):(_=_||[]).push(xe,null));for(xe in g){var Q=g[xe];if(B=k!=null?k[xe]:void 0,g.hasOwnProperty(xe)&&Q!==B&&(Q!=null||B!=null))if(xe==="style")if(B){for(P in B)!B.hasOwnProperty(P)||Q&&Q.hasOwnProperty(P)||(h||(h={}),h[P]="");for(P in Q)Q.hasOwnProperty(P)&&B[P]!==Q[P]&&(h||(h={}),h[P]=Q[P])}else h||(_||(_=[]),_.push(xe,h)),h=Q;else xe==="dangerouslySetInnerHTML"?(Q=Q?Q.__html:void 0,B=B?B.__html:void 0,Q!=null&&B!==Q&&(_=_||[]).push(xe,Q)):xe==="children"?typeof Q!="string"&&typeof Q!="number"||(_=_||[]).push(xe,""+Q):xe!=="suppressContentEditableWarning"&&xe!=="suppressHydrationWarning"&&(s.hasOwnProperty(xe)?(Q!=null&&xe==="onScroll"&&zr("scroll",o),_||B===Q||(_=[])):(_=_||[]).push(xe,Q))}h&&(_=_||[]).push("style",h);var xe=_;(c.updateQueue=xe)&&(c.flags|=4)}},lj=function(o,c,h,g){h!==g&&(c.flags|=4)};function Lu(o,c){if(!Xr)switch(o.tailMode){case"hidden":c=o.tail;for(var h=null;c!==null;)c.alternate!==null&&(h=c),c=c.sibling;h===null?o.tail=null:h.sibling=null;break;case"collapsed":h=o.tail;for(var g=null;h!==null;)h.alternate!==null&&(g=h),h=h.sibling;g===null?c||o.tail===null?o.tail=null:o.tail.sibling=null:g.sibling=null}}function bs(o){var c=o.alternate!==null&&o.alternate.child===o.child,h=0,g=0;if(c)for(var k=o.child;k!==null;)h|=k.lanes|k.childLanes,g|=k.subtreeFlags&14680064,g|=k.flags&14680064,k.return=o,k=k.sibling;else for(k=o.child;k!==null;)h|=k.lanes|k.childLanes,g|=k.subtreeFlags,g|=k.flags,k.return=o,k=k.sibling;return o.subtreeFlags|=g,o.childLanes=h,c}function F4(o,c,h){var g=c.pendingProps;switch(ng(c),c.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return bs(c),null;case 1:return Ls(c.type)&&pf(),bs(c),null;case 3:return g=c.stateNode,dc(),Ur(Fs),Ur(xs),gg(),g.pendingContext&&(g.context=g.pendingContext,g.pendingContext=null),(o===null||o.child===null)&&(wf(c)?c.flags|=4:o===null||o.memoizedState.isDehydrated&&(c.flags&256)===0||(c.flags|=1024,Ki!==null&&(Hg(Ki),Ki=null))),$g(o,c),bs(c),null;case 5:mg(c);var k=ol(Du.current);if(h=c.type,o!==null&&c.stateNode!=null)oj(o,c,h,g,k),o.ref!==c.ref&&(c.flags|=512,c.flags|=2097152);else{if(!g){if(c.stateNode===null)throw Error(r(166));return bs(c),null}if(o=ol(va.current),wf(c)){g=c.stateNode,h=c.type;var _=c.memoizedProps;switch(g[ya]=c,g[Au]=_,o=(c.mode&1)!==0,h){case"dialog":zr("cancel",g),zr("close",g);break;case"iframe":case"object":case"embed":zr("load",g);break;case"video":case"audio":for(k=0;k<Nu.length;k++)zr(Nu[k],g);break;case"source":zr("error",g);break;case"img":case"image":case"link":zr("error",g),zr("load",g);break;case"details":zr("toggle",g);break;case"input":Ue(g,_),zr("invalid",g);break;case"select":g._wrapperState={wasMultiple:!!_.multiple},zr("invalid",g);break;case"textarea":Se(g,_),zr("invalid",g)}Je(h,_),k=null;for(var P in _)if(_.hasOwnProperty(P)){var B=_[P];P==="children"?typeof B=="string"?g.textContent!==B&&(_.suppressHydrationWarning!==!0&&ff(g.textContent,B,o),k=["children",B]):typeof B=="number"&&g.textContent!==""+B&&(_.suppressHydrationWarning!==!0&&ff(g.textContent,B,o),k=["children",""+B]):s.hasOwnProperty(P)&&B!=null&&P==="onScroll"&&zr("scroll",g)}switch(h){case"input":fe(g),wt(g,_,!0);break;case"textarea":fe(g),Ee(g);break;case"select":case"option":break;default:typeof _.onClick=="function"&&(g.onclick=hf)}g=k,c.updateQueue=g,g!==null&&(c.flags|=4)}else{P=k.nodeType===9?k:k.ownerDocument,o==="http://www.w3.org/1999/xhtml"&&(o=qe(h)),o==="http://www.w3.org/1999/xhtml"?h==="script"?(o=P.createElement("div"),o.innerHTML="<script><\/script>",o=o.removeChild(o.firstChild)):typeof g.is=="string"?o=P.createElement(h,{is:g.is}):(o=P.createElement(h),h==="select"&&(P=o,g.multiple?P.multiple=!0:g.size&&(P.size=g.size))):o=P.createElementNS(o,h),o[ya]=c,o[Au]=g,aj(o,c,!1,!1),c.stateNode=o;e:{switch(P=Ct(h,g),h){case"dialog":zr("cancel",o),zr("close",o),k=g;break;case"iframe":case"object":case"embed":zr("load",o),k=g;break;case"video":case"audio":for(k=0;k<Nu.length;k++)zr(Nu[k],o);k=g;break;case"source":zr("error",o),k=g;break;case"img":case"image":case"link":zr("error",o),zr("load",o),k=g;break;case"details":zr("toggle",o),k=g;break;case"input":Ue(o,g),k=Ge(o,g),zr("invalid",o);break;case"option":k=g;break;case"select":o._wrapperState={wasMultiple:!!g.multiple},k=he({},g,{value:void 0}),zr("invalid",o);break;case"textarea":Se(o,g),k=ee(o,g),zr("invalid",o);break;default:k=g}Je(h,k),B=k;for(_ in B)if(B.hasOwnProperty(_)){var Q=B[_];_==="style"?ct(o,Q):_==="dangerouslySetInnerHTML"?(Q=Q?Q.__html:void 0,Q!=null&&We(o,Q)):_==="children"?typeof Q=="string"?(h!=="textarea"||Q!=="")&&yt(o,Q):typeof Q=="number"&&yt(o,""+Q):_!=="suppressContentEditableWarning"&&_!=="suppressHydrationWarning"&&_!=="autoFocus"&&(s.hasOwnProperty(_)?Q!=null&&_==="onScroll"&&zr("scroll",o):Q!=null&&C(o,_,Q,P))}switch(h){case"input":fe(o),wt(o,g,!1);break;case"textarea":fe(o),Ee(o);break;case"option":g.value!=null&&o.setAttribute("value",""+Ve(g.value));break;case"select":o.multiple=!!g.multiple,_=g.value,_!=null?W(o,!!g.multiple,_,!1):g.defaultValue!=null&&W(o,!!g.multiple,g.defaultValue,!0);break;default:typeof k.onClick=="function"&&(o.onclick=hf)}switch(h){case"button":case"input":case"select":case"textarea":g=!!g.autoFocus;break e;case"img":g=!0;break e;default:g=!1}}g&&(c.flags|=4)}c.ref!==null&&(c.flags|=512,c.flags|=2097152)}return bs(c),null;case 6:if(o&&c.stateNode!=null)lj(o,c,o.memoizedProps,g);else{if(typeof g!="string"&&c.stateNode===null)throw Error(r(166));if(h=ol(Du.current),ol(va.current),wf(c)){if(g=c.stateNode,h=c.memoizedProps,g[ya]=c,(_=g.nodeValue!==h)&&(o=ri,o!==null))switch(o.tag){case 3:ff(g.nodeValue,h,(o.mode&1)!==0);break;case 5:o.memoizedProps.suppressHydrationWarning!==!0&&ff(g.nodeValue,h,(o.mode&1)!==0)}_&&(c.flags|=4)}else g=(h.nodeType===9?h:h.ownerDocument).createTextNode(g),g[ya]=c,c.stateNode=g}return bs(c),null;case 13:if(Ur(nn),g=c.memoizedState,o===null||o.memoizedState!==null&&o.memoizedState.dehydrated!==null){if(Xr&&ni!==null&&(c.mode&1)!==0&&(c.flags&128)===0)d1(),oc(),c.flags|=98560,_=!1;else if(_=wf(c),g!==null&&g.dehydrated!==null){if(o===null){if(!_)throw Error(r(318));if(_=c.memoizedState,_=_!==null?_.dehydrated:null,!_)throw Error(r(317));_[ya]=c}else oc(),(c.flags&128)===0&&(c.memoizedState=null),c.flags|=4;bs(c),_=!1}else Ki!==null&&(Hg(Ki),Ki=null),_=!0;if(!_)return c.flags&65536?c:null}return(c.flags&128)!==0?(c.lanes=h,c):(g=g!==null,g!==(o!==null&&o.memoizedState!==null)&&g&&(c.child.flags|=8192,(c.mode&1)!==0&&(o===null||(nn.current&1)!==0?Rn===0&&(Rn=3):Yg())),c.updateQueue!==null&&(c.flags|=4),bs(c),null);case 4:return dc(),$g(o,c),o===null&&Cu(c.stateNode.containerInfo),bs(c),null;case 10:return cg(c.type._context),bs(c),null;case 17:return Ls(c.type)&&pf(),bs(c),null;case 19:if(Ur(nn),_=c.memoizedState,_===null)return bs(c),null;if(g=(c.flags&128)!==0,P=_.rendering,P===null)if(g)Lu(_,!1);else{if(Rn!==0||o!==null&&(o.flags&128)!==0)for(o=c.child;o!==null;){if(P=Nf(o),P!==null){for(c.flags|=128,Lu(_,!1),g=P.updateQueue,g!==null&&(c.updateQueue=g,c.flags|=4),c.subtreeFlags=0,g=h,h=c.child;h!==null;)_=h,o=g,_.flags&=14680066,P=_.alternate,P===null?(_.childLanes=0,_.lanes=o,_.child=null,_.subtreeFlags=0,_.memoizedProps=null,_.memoizedState=null,_.updateQueue=null,_.dependencies=null,_.stateNode=null):(_.childLanes=P.childLanes,_.lanes=P.lanes,_.child=P.child,_.subtreeFlags=0,_.deletions=null,_.memoizedProps=P.memoizedProps,_.memoizedState=P.memoizedState,_.updateQueue=P.updateQueue,_.type=P.type,o=P.dependencies,_.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext}),h=h.sibling;return Or(nn,nn.current&1|2),c.child}o=o.sibling}_.tail!==null&&Kt()>pc&&(c.flags|=128,g=!0,Lu(_,!1),c.lanes=4194304)}else{if(!g)if(o=Nf(P),o!==null){if(c.flags|=128,g=!0,h=o.updateQueue,h!==null&&(c.updateQueue=h,c.flags|=4),Lu(_,!0),_.tail===null&&_.tailMode==="hidden"&&!P.alternate&&!Xr)return bs(c),null}else 2*Kt()-_.renderingStartTime>pc&&h!==1073741824&&(c.flags|=128,g=!0,Lu(_,!1),c.lanes=4194304);_.isBackwards?(P.sibling=c.child,c.child=P):(h=_.last,h!==null?h.sibling=P:c.child=P,_.last=P)}return _.tail!==null?(c=_.tail,_.rendering=c,_.tail=c.sibling,_.renderingStartTime=Kt(),c.sibling=null,h=nn.current,Or(nn,g?h&1|2:h&1),c):(bs(c),null);case 22:case 23:return Gg(),g=c.memoizedState!==null,o!==null&&o.memoizedState!==null!==g&&(c.flags|=8192),g&&(c.mode&1)!==0?(si&1073741824)!==0&&(bs(c),c.subtreeFlags&6&&(c.flags|=8192)):bs(c),null;case 24:return null;case 25:return null}throw Error(r(156,c.tag))}function L4(o,c){switch(ng(c),c.tag){case 1:return Ls(c.type)&&pf(),o=c.flags,o&65536?(c.flags=o&-65537|128,c):null;case 3:return dc(),Ur(Fs),Ur(xs),gg(),o=c.flags,(o&65536)!==0&&(o&128)===0?(c.flags=o&-65537|128,c):null;case 5:return mg(c),null;case 13:if(Ur(nn),o=c.memoizedState,o!==null&&o.dehydrated!==null){if(c.alternate===null)throw Error(r(340));oc()}return o=c.flags,o&65536?(c.flags=o&-65537|128,c):null;case 19:return Ur(nn),null;case 4:return dc(),null;case 10:return cg(c.type._context),null;case 22:case 23:return Gg(),null;case 24:return null;default:return null}}var $f=!1,js=!1,z4=typeof WeakSet=="function"?WeakSet:Set,ot=null;function hc(o,c){var h=o.ref;if(h!==null)if(typeof h=="function")try{h(null)}catch(g){un(o,c,g)}else h.current=null}function Rg(o,c,h){try{h()}catch(g){un(o,c,g)}}var cj=!1;function U4(o,c){if(Gp=bi,o=Ub(),zp(o)){if("selectionStart"in o)var h={start:o.selectionStart,end:o.selectionEnd};else e:{h=(h=o.ownerDocument)&&h.defaultView||window;var g=h.getSelection&&h.getSelection();if(g&&g.rangeCount!==0){h=g.anchorNode;var k=g.anchorOffset,_=g.focusNode;g=g.focusOffset;try{h.nodeType,_.nodeType}catch{h=null;break e}var P=0,B=-1,Q=-1,xe=0,Me=0,Be=o,De=null;t:for(;;){for(var st;Be!==h||k!==0&&Be.nodeType!==3||(B=P+k),Be!==_||g!==0&&Be.nodeType!==3||(Q=P+g),Be.nodeType===3&&(P+=Be.nodeValue.length),(st=Be.firstChild)!==null;)De=Be,Be=st;for(;;){if(Be===o)break t;if(De===h&&++xe===k&&(B=P),De===_&&++Me===g&&(Q=P),(st=Be.nextSibling)!==null)break;Be=De,De=Be.parentNode}Be=st}h=B===-1||Q===-1?null:{start:B,end:Q}}else h=null}h=h||{start:0,end:0}}else h=null;for(Yp={focusedElem:o,selectionRange:h},bi=!1,ot=c;ot!==null;)if(c=ot,o=c.child,(c.subtreeFlags&1028)!==0&&o!==null)o.return=c,ot=o;else for(;ot!==null;){c=ot;try{var ut=c.alternate;if((c.flags&1024)!==0)switch(c.tag){case 0:case 11:case 15:break;case 1:if(ut!==null){var ht=ut.memoizedProps,mn=ut.memoizedState,me=c.stateNode,te=me.getSnapshotBeforeUpdate(c.elementType===c.type?ht:Gi(c.type,ht),mn);me.__reactInternalSnapshotBeforeUpdate=te}break;case 3:var ye=c.stateNode.containerInfo;ye.nodeType===1?ye.textContent="":ye.nodeType===9&&ye.documentElement&&ye.removeChild(ye.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(r(163))}}catch(Ke){un(c,c.return,Ke)}if(o=c.sibling,o!==null){o.return=c.return,ot=o;break}ot=c.return}return ut=cj,cj=!1,ut}function zu(o,c,h){var g=c.updateQueue;if(g=g!==null?g.lastEffect:null,g!==null){var k=g=g.next;do{if((k.tag&o)===o){var _=k.destroy;k.destroy=void 0,_!==void 0&&Rg(c,h,_)}k=k.next}while(k!==g)}}function Rf(o,c){if(c=c.updateQueue,c=c!==null?c.lastEffect:null,c!==null){var h=c=c.next;do{if((h.tag&o)===o){var g=h.create;h.destroy=g()}h=h.next}while(h!==c)}}function Mg(o){var c=o.ref;if(c!==null){var h=o.stateNode;switch(o.tag){case 5:o=h;break;default:o=h}typeof c=="function"?c(o):c.current=o}}function uj(o){var c=o.alternate;c!==null&&(o.alternate=null,uj(c)),o.child=null,o.deletions=null,o.sibling=null,o.tag===5&&(c=o.stateNode,c!==null&&(delete c[ya],delete c[Au],delete c[Zp],delete c[S4],delete c[k4])),o.stateNode=null,o.return=null,o.dependencies=null,o.memoizedProps=null,o.memoizedState=null,o.pendingProps=null,o.stateNode=null,o.updateQueue=null}function dj(o){return o.tag===5||o.tag===3||o.tag===4}function fj(o){e:for(;;){for(;o.sibling===null;){if(o.return===null||dj(o.return))return null;o=o.return}for(o.sibling.return=o.return,o=o.sibling;o.tag!==5&&o.tag!==6&&o.tag!==18;){if(o.flags&2||o.child===null||o.tag===4)continue e;o.child.return=o,o=o.child}if(!(o.flags&2))return o.stateNode}}function Fg(o,c,h){var g=o.tag;if(g===5||g===6)o=o.stateNode,c?h.nodeType===8?h.parentNode.insertBefore(o,c):h.insertBefore(o,c):(h.nodeType===8?(c=h.parentNode,c.insertBefore(o,h)):(c=h,c.appendChild(o)),h=h._reactRootContainer,h!=null||c.onclick!==null||(c.onclick=hf));else if(g!==4&&(o=o.child,o!==null))for(Fg(o,c,h),o=o.sibling;o!==null;)Fg(o,c,h),o=o.sibling}function Lg(o,c,h){var g=o.tag;if(g===5||g===6)o=o.stateNode,c?h.insertBefore(o,c):h.appendChild(o);else if(g!==4&&(o=o.child,o!==null))for(Lg(o,c,h),o=o.sibling;o!==null;)Lg(o,c,h),o=o.sibling}var cs=null,Yi=!1;function Eo(o,c,h){for(h=h.child;h!==null;)hj(o,c,h),h=h.sibling}function hj(o,c,h){if(be&&typeof be.onCommitFiberUnmount=="function")try{be.onCommitFiberUnmount(X,h)}catch{}switch(h.tag){case 5:js||hc(h,c);case 6:var g=cs,k=Yi;cs=null,Eo(o,c,h),cs=g,Yi=k,cs!==null&&(Yi?(o=cs,h=h.stateNode,o.nodeType===8?o.parentNode.removeChild(h):o.removeChild(h)):cs.removeChild(h.stateNode));break;case 18:cs!==null&&(Yi?(o=cs,h=h.stateNode,o.nodeType===8?Qp(o.parentNode,h):o.nodeType===1&&Qp(o,h),wi(o)):Qp(cs,h.stateNode));break;case 4:g=cs,k=Yi,cs=h.stateNode.containerInfo,Yi=!0,Eo(o,c,h),cs=g,Yi=k;break;case 0:case 11:case 14:case 15:if(!js&&(g=h.updateQueue,g!==null&&(g=g.lastEffect,g!==null))){k=g=g.next;do{var _=k,P=_.destroy;_=_.tag,P!==void 0&&((_&2)!==0||(_&4)!==0)&&Rg(h,c,P),k=k.next}while(k!==g)}Eo(o,c,h);break;case 1:if(!js&&(hc(h,c),g=h.stateNode,typeof g.componentWillUnmount=="function"))try{g.props=h.memoizedProps,g.state=h.memoizedState,g.componentWillUnmount()}catch(B){un(h,c,B)}Eo(o,c,h);break;case 21:Eo(o,c,h);break;case 22:h.mode&1?(js=(g=js)||h.memoizedState!==null,Eo(o,c,h),js=g):Eo(o,c,h);break;default:Eo(o,c,h)}}function mj(o){var c=o.updateQueue;if(c!==null){o.updateQueue=null;var h=o.stateNode;h===null&&(h=o.stateNode=new z4),c.forEach(function(g){var k=J4.bind(null,o,g);h.has(g)||(h.add(g),g.then(k,k))})}}function Ji(o,c){var h=c.deletions;if(h!==null)for(var g=0;g<h.length;g++){var k=h[g];try{var _=o,P=c,B=P;e:for(;B!==null;){switch(B.tag){case 5:cs=B.stateNode,Yi=!1;break e;case 3:cs=B.stateNode.containerInfo,Yi=!0;break e;case 4:cs=B.stateNode.containerInfo,Yi=!0;break e}B=B.return}if(cs===null)throw Error(r(160));hj(_,P,k),cs=null,Yi=!1;var Q=k.alternate;Q!==null&&(Q.return=null),k.return=null}catch(xe){un(k,c,xe)}}if(c.subtreeFlags&12854)for(c=c.child;c!==null;)pj(c,o),c=c.sibling}function pj(o,c){var h=o.alternate,g=o.flags;switch(o.tag){case 0:case 11:case 14:case 15:if(Ji(c,o),wa(o),g&4){try{zu(3,o,o.return),Rf(3,o)}catch(ht){un(o,o.return,ht)}try{zu(5,o,o.return)}catch(ht){un(o,o.return,ht)}}break;case 1:Ji(c,o),wa(o),g&512&&h!==null&&hc(h,h.return);break;case 5:if(Ji(c,o),wa(o),g&512&&h!==null&&hc(h,h.return),o.flags&32){var k=o.stateNode;try{yt(k,"")}catch(ht){un(o,o.return,ht)}}if(g&4&&(k=o.stateNode,k!=null)){var _=o.memoizedProps,P=h!==null?h.memoizedProps:_,B=o.type,Q=o.updateQueue;if(o.updateQueue=null,Q!==null)try{B==="input"&&_.type==="radio"&&_.name!=null&&At(k,_),Ct(B,P);var xe=Ct(B,_);for(P=0;P<Q.length;P+=2){var Me=Q[P],Be=Q[P+1];Me==="style"?ct(k,Be):Me==="dangerouslySetInnerHTML"?We(k,Be):Me==="children"?yt(k,Be):C(k,Me,Be,xe)}switch(B){case"input":gt(k,_);break;case"textarea":Ne(k,_);break;case"select":var De=k._wrapperState.wasMultiple;k._wrapperState.wasMultiple=!!_.multiple;var st=_.value;st!=null?W(k,!!_.multiple,st,!1):De!==!!_.multiple&&(_.defaultValue!=null?W(k,!!_.multiple,_.defaultValue,!0):W(k,!!_.multiple,_.multiple?[]:"",!1))}k[Au]=_}catch(ht){un(o,o.return,ht)}}break;case 6:if(Ji(c,o),wa(o),g&4){if(o.stateNode===null)throw Error(r(162));k=o.stateNode,_=o.memoizedProps;try{k.nodeValue=_}catch(ht){un(o,o.return,ht)}}break;case 3:if(Ji(c,o),wa(o),g&4&&h!==null&&h.memoizedState.isDehydrated)try{wi(c.containerInfo)}catch(ht){un(o,o.return,ht)}break;case 4:Ji(c,o),wa(o);break;case 13:Ji(c,o),wa(o),k=o.child,k.flags&8192&&(_=k.memoizedState!==null,k.stateNode.isHidden=_,!_||k.alternate!==null&&k.alternate.memoizedState!==null||(Bg=Kt())),g&4&&mj(o);break;case 22:if(Me=h!==null&&h.memoizedState!==null,o.mode&1?(js=(xe=js)||Me,Ji(c,o),js=xe):Ji(c,o),wa(o),g&8192){if(xe=o.memoizedState!==null,(o.stateNode.isHidden=xe)&&!Me&&(o.mode&1)!==0)for(ot=o,Me=o.child;Me!==null;){for(Be=ot=Me;ot!==null;){switch(De=ot,st=De.child,De.tag){case 0:case 11:case 14:case 15:zu(4,De,De.return);break;case 1:hc(De,De.return);var ut=De.stateNode;if(typeof ut.componentWillUnmount=="function"){g=De,h=De.return;try{c=g,ut.props=c.memoizedProps,ut.state=c.memoizedState,ut.componentWillUnmount()}catch(ht){un(g,h,ht)}}break;case 5:hc(De,De.return);break;case 22:if(De.memoizedState!==null){vj(Be);continue}}st!==null?(st.return=De,ot=st):vj(Be)}Me=Me.sibling}e:for(Me=null,Be=o;;){if(Be.tag===5){if(Me===null){Me=Be;try{k=Be.stateNode,xe?(_=k.style,typeof _.setProperty=="function"?_.setProperty("display","none","important"):_.display="none"):(B=Be.stateNode,Q=Be.memoizedProps.style,P=Q!=null&&Q.hasOwnProperty("display")?Q.display:null,B.style.display=Le("display",P))}catch(ht){un(o,o.return,ht)}}}else if(Be.tag===6){if(Me===null)try{Be.stateNode.nodeValue=xe?"":Be.memoizedProps}catch(ht){un(o,o.return,ht)}}else if((Be.tag!==22&&Be.tag!==23||Be.memoizedState===null||Be===o)&&Be.child!==null){Be.child.return=Be,Be=Be.child;continue}if(Be===o)break e;for(;Be.sibling===null;){if(Be.return===null||Be.return===o)break e;Me===Be&&(Me=null),Be=Be.return}Me===Be&&(Me=null),Be.sibling.return=Be.return,Be=Be.sibling}}break;case 19:Ji(c,o),wa(o),g&4&&mj(o);break;case 21:break;default:Ji(c,o),wa(o)}}function wa(o){var c=o.flags;if(c&2){try{e:{for(var h=o.return;h!==null;){if(dj(h)){var g=h;break e}h=h.return}throw Error(r(160))}switch(g.tag){case 5:var k=g.stateNode;g.flags&32&&(yt(k,""),g.flags&=-33);var _=fj(o);Lg(o,_,k);break;case 3:case 4:var P=g.stateNode.containerInfo,B=fj(o);Fg(o,B,P);break;default:throw Error(r(161))}}catch(Q){un(o,o.return,Q)}o.flags&=-3}c&4096&&(o.flags&=-4097)}function B4(o,c,h){ot=o,gj(o)}function gj(o,c,h){for(var g=(o.mode&1)!==0;ot!==null;){var k=ot,_=k.child;if(k.tag===22&&g){var P=k.memoizedState!==null||$f;if(!P){var B=k.alternate,Q=B!==null&&B.memoizedState!==null||js;B=$f;var xe=js;if($f=P,(js=Q)&&!xe)for(ot=k;ot!==null;)P=ot,Q=P.child,P.tag===22&&P.memoizedState!==null?xj(k):Q!==null?(Q.return=P,ot=Q):xj(k);for(;_!==null;)ot=_,gj(_),_=_.sibling;ot=k,$f=B,js=xe}yj(o)}else(k.subtreeFlags&8772)!==0&&_!==null?(_.return=k,ot=_):yj(o)}}function yj(o){for(;ot!==null;){var c=ot;if((c.flags&8772)!==0){var h=c.alternate;try{if((c.flags&8772)!==0)switch(c.tag){case 0:case 11:case 15:js||Rf(5,c);break;case 1:var g=c.stateNode;if(c.flags&4&&!js)if(h===null)g.componentDidMount();else{var k=c.elementType===c.type?h.memoizedProps:Gi(c.type,h.memoizedProps);g.componentDidUpdate(k,h.memoizedState,g.__reactInternalSnapshotBeforeUpdate)}var _=c.updateQueue;_!==null&&v1(c,_,g);break;case 3:var P=c.updateQueue;if(P!==null){if(h=null,c.child!==null)switch(c.child.tag){case 5:h=c.child.stateNode;break;case 1:h=c.child.stateNode}v1(c,P,h)}break;case 5:var B=c.stateNode;if(h===null&&c.flags&4){h=B;var Q=c.memoizedProps;switch(c.type){case"button":case"input":case"select":case"textarea":Q.autoFocus&&h.focus();break;case"img":Q.src&&(h.src=Q.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(c.memoizedState===null){var xe=c.alternate;if(xe!==null){var Me=xe.memoizedState;if(Me!==null){var Be=Me.dehydrated;Be!==null&&wi(Be)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(r(163))}js||c.flags&512&&Mg(c)}catch(De){un(c,c.return,De)}}if(c===o){ot=null;break}if(h=c.sibling,h!==null){h.return=c.return,ot=h;break}ot=c.return}}function vj(o){for(;ot!==null;){var c=ot;if(c===o){ot=null;break}var h=c.sibling;if(h!==null){h.return=c.return,ot=h;break}ot=c.return}}function xj(o){for(;ot!==null;){var c=ot;try{switch(c.tag){case 0:case 11:case 15:var h=c.return;try{Rf(4,c)}catch(Q){un(c,h,Q)}break;case 1:var g=c.stateNode;if(typeof g.componentDidMount=="function"){var k=c.return;try{g.componentDidMount()}catch(Q){un(c,k,Q)}}var _=c.return;try{Mg(c)}catch(Q){un(c,_,Q)}break;case 5:var P=c.return;try{Mg(c)}catch(Q){un(c,P,Q)}}}catch(Q){un(c,c.return,Q)}if(c===o){ot=null;break}var B=c.sibling;if(B!==null){B.return=c.return,ot=B;break}ot=c.return}}var W4=Math.ceil,Mf=I.ReactCurrentDispatcher,zg=I.ReactCurrentOwner,Ni=I.ReactCurrentBatchConfig,ar=0,Gn=null,_n=null,us=0,si=0,mc=So(0),Rn=0,Uu=null,cl=0,Ff=0,Ug=0,Bu=null,Us=null,Bg=0,pc=1/0,Wa=null,Lf=!1,Wg=null,Ao=null,zf=!1,Po=null,Uf=0,Wu=0,Vg=null,Bf=-1,Wf=0;function Es(){return(ar&6)!==0?Kt():Bf!==-1?Bf:Bf=Kt()}function To(o){return(o.mode&1)===0?1:(ar&2)!==0&&us!==0?us&-us:N4.transition!==null?(Wf===0&&(Wf=gr()),Wf):(o=Ut,o!==0||(o=window.event,o=o===void 0?16:cn(o.type)),o)}function Xi(o,c,h,g){if(50<Wu)throw Wu=0,Vg=null,Error(r(185));xr(o,h,g),((ar&2)===0||o!==Gn)&&(o===Gn&&((ar&2)===0&&(Ff|=h),Rn===4&&Oo(o,us)),Bs(o,g),h===1&&ar===0&&(c.mode&1)===0&&(pc=Kt()+500,yf&&_o()))}function Bs(o,c){var h=o.callbackNode;Gr(o,c);var g=He(o,o===Gn?us:0);if(g===0)h!==null&&$s(h),o.callbackNode=null,o.callbackPriority=0;else if(c=g&-g,o.callbackPriority!==c){if(h!=null&&$s(h),c===1)o.tag===0?_4(bj.bind(null,o)):a1(bj.bind(null,o)),b4(function(){(ar&6)===0&&_o()}),h=null;else{switch(ha(g)){case 1:h=_r;break;case 4:h=Sn;break;case 16:h=en;break;case 536870912:h=Xs;break;default:h=en}h=Aj(h,wj.bind(null,o))}o.callbackPriority=c,o.callbackNode=h}}function wj(o,c){if(Bf=-1,Wf=0,(ar&6)!==0)throw Error(r(327));var h=o.callbackNode;if(gc()&&o.callbackNode!==h)return null;var g=He(o,o===Gn?us:0);if(g===0)return null;if((g&30)!==0||(g&o.expiredLanes)!==0||c)c=Vf(o,g);else{c=g;var k=ar;ar|=2;var _=Sj();(Gn!==o||us!==c)&&(Wa=null,pc=Kt()+500,dl(o,c));do try{H4();break}catch(B){jj(o,B)}while(!0);lg(),Mf.current=_,ar=k,_n!==null?c=0:(Gn=null,us=0,c=Rn)}if(c!==0){if(c===2&&(k=dt(o),k!==0&&(g=k,c=qg(o,k))),c===1)throw h=Uu,dl(o,0),Oo(o,g),Bs(o,Kt()),h;if(c===6)Oo(o,g);else{if(k=o.current.alternate,(g&30)===0&&!V4(k)&&(c=Vf(o,g),c===2&&(_=dt(o),_!==0&&(g=_,c=qg(o,_))),c===1))throw h=Uu,dl(o,0),Oo(o,g),Bs(o,Kt()),h;switch(o.finishedWork=k,o.finishedLanes=g,c){case 0:case 1:throw Error(r(345));case 2:fl(o,Us,Wa);break;case 3:if(Oo(o,g),(g&130023424)===g&&(c=Bg+500-Kt(),10<c)){if(He(o,0)!==0)break;if(k=o.suspendedLanes,(k&g)!==g){Es(),o.pingedLanes|=o.suspendedLanes&k;break}o.timeoutHandle=Xp(fl.bind(null,o,Us,Wa),c);break}fl(o,Us,Wa);break;case 4:if(Oo(o,g),(g&4194240)===g)break;for(c=o.eventTimes,k=-1;0<g;){var P=31-Oe(g);_=1<<P,P=c[P],P>k&&(k=P),g&=~_}if(g=k,g=Kt()-g,g=(120>g?120:480>g?480:1080>g?1080:1920>g?1920:3e3>g?3e3:4320>g?4320:1960*W4(g/1960))-g,10<g){o.timeoutHandle=Xp(fl.bind(null,o,Us,Wa),g);break}fl(o,Us,Wa);break;case 5:fl(o,Us,Wa);break;default:throw Error(r(329))}}}return Bs(o,Kt()),o.callbackNode===h?wj.bind(null,o):null}function qg(o,c){var h=Bu;return o.current.memoizedState.isDehydrated&&(dl(o,c).flags|=256),o=Vf(o,c),o!==2&&(c=Us,Us=h,c!==null&&Hg(c)),o}function Hg(o){Us===null?Us=o:Us.push.apply(Us,o)}function V4(o){for(var c=o;;){if(c.flags&16384){var h=c.updateQueue;if(h!==null&&(h=h.stores,h!==null))for(var g=0;g<h.length;g++){var k=h[g],_=k.getSnapshot;k=k.value;try{if(!Hi(_(),k))return!1}catch{return!1}}}if(h=c.child,c.subtreeFlags&16384&&h!==null)h.return=c,c=h;else{if(c===o)break;for(;c.sibling===null;){if(c.return===null||c.return===o)return!0;c=c.return}c.sibling.return=c.return,c=c.sibling}}return!0}function Oo(o,c){for(c&=~Ug,c&=~Ff,o.suspendedLanes|=c,o.pingedLanes&=~c,o=o.expirationTimes;0<c;){var h=31-Oe(c),g=1<<h;o[h]=-1,c&=~g}}function bj(o){if((ar&6)!==0)throw Error(r(327));gc();var c=He(o,0);if((c&1)===0)return Bs(o,Kt()),null;var h=Vf(o,c);if(o.tag!==0&&h===2){var g=dt(o);g!==0&&(c=g,h=qg(o,g))}if(h===1)throw h=Uu,dl(o,0),Oo(o,c),Bs(o,Kt()),h;if(h===6)throw Error(r(345));return o.finishedWork=o.current.alternate,o.finishedLanes=c,fl(o,Us,Wa),Bs(o,Kt()),null}function Kg(o,c){var h=ar;ar|=1;try{return o(c)}finally{ar=h,ar===0&&(pc=Kt()+500,yf&&_o())}}function ul(o){Po!==null&&Po.tag===0&&(ar&6)===0&&gc();var c=ar;ar|=1;var h=Ni.transition,g=Ut;try{if(Ni.transition=null,Ut=1,o)return o()}finally{Ut=g,Ni.transition=h,ar=c,(ar&6)===0&&_o()}}function Gg(){si=mc.current,Ur(mc)}function dl(o,c){o.finishedWork=null,o.finishedLanes=0;var h=o.timeoutHandle;if(h!==-1&&(o.timeoutHandle=-1,w4(h)),_n!==null)for(h=_n.return;h!==null;){var g=h;switch(ng(g),g.tag){case 1:g=g.type.childContextTypes,g!=null&&pf();break;case 3:dc(),Ur(Fs),Ur(xs),gg();break;case 5:mg(g);break;case 4:dc();break;case 13:Ur(nn);break;case 19:Ur(nn);break;case 10:cg(g.type._context);break;case 22:case 23:Gg()}h=h.return}if(Gn=o,_n=o=Io(o.current,null),us=si=c,Rn=0,Uu=null,Ug=Ff=cl=0,Us=Bu=null,al!==null){for(c=0;c<al.length;c++)if(h=al[c],g=h.interleaved,g!==null){h.interleaved=null;var k=g.next,_=h.pending;if(_!==null){var P=_.next;_.next=k,g.next=P}h.pending=g}al=null}return o}function jj(o,c){do{var h=_n;try{if(lg(),Cf.current=Tf,Ef){for(var g=sn.memoizedState;g!==null;){var k=g.queue;k!==null&&(k.pending=null),g=g.next}Ef=!1}if(ll=0,Kn=$n=sn=null,$u=!1,Ru=0,zg.current=null,h===null||h.return===null){Rn=1,Uu=c,_n=null;break}e:{var _=o,P=h.return,B=h,Q=c;if(c=us,B.flags|=32768,Q!==null&&typeof Q=="object"&&typeof Q.then=="function"){var xe=Q,Me=B,Be=Me.tag;if((Me.mode&1)===0&&(Be===0||Be===11||Be===15)){var De=Me.alternate;De?(Me.updateQueue=De.updateQueue,Me.memoizedState=De.memoizedState,Me.lanes=De.lanes):(Me.updateQueue=null,Me.memoizedState=null)}var st=K1(P);if(st!==null){st.flags&=-257,G1(st,P,B,_,c),st.mode&1&&H1(_,xe,c),c=st,Q=xe;var ut=c.updateQueue;if(ut===null){var ht=new Set;ht.add(Q),c.updateQueue=ht}else ut.add(Q);break e}else{if((c&1)===0){H1(_,xe,c),Yg();break e}Q=Error(r(426))}}else if(Xr&&B.mode&1){var mn=K1(P);if(mn!==null){(mn.flags&65536)===0&&(mn.flags|=256),G1(mn,P,B,_,c),ag(fc(Q,B));break e}}_=Q=fc(Q,B),Rn!==4&&(Rn=2),Bu===null?Bu=[_]:Bu.push(_),_=P;do{switch(_.tag){case 3:_.flags|=65536,c&=-c,_.lanes|=c;var me=V1(_,Q,c);y1(_,me);break e;case 1:B=Q;var te=_.type,ye=_.stateNode;if((_.flags&128)===0&&(typeof te.getDerivedStateFromError=="function"||ye!==null&&typeof ye.componentDidCatch=="function"&&(Ao===null||!Ao.has(ye)))){_.flags|=65536,c&=-c,_.lanes|=c;var Ke=q1(_,B,c);y1(_,Ke);break e}}_=_.return}while(_!==null)}_j(h)}catch(pt){c=pt,_n===h&&h!==null&&(_n=h=h.return);continue}break}while(!0)}function Sj(){var o=Mf.current;return Mf.current=Tf,o===null?Tf:o}function Yg(){(Rn===0||Rn===3||Rn===2)&&(Rn=4),Gn===null||(cl&268435455)===0&&(Ff&268435455)===0||Oo(Gn,us)}function Vf(o,c){var h=ar;ar|=2;var g=Sj();(Gn!==o||us!==c)&&(Wa=null,dl(o,c));do try{q4();break}catch(k){jj(o,k)}while(!0);if(lg(),ar=h,Mf.current=g,_n!==null)throw Error(r(261));return Gn=null,us=0,Rn}function q4(){for(;_n!==null;)kj(_n)}function H4(){for(;_n!==null&&!Cr();)kj(_n)}function kj(o){var c=Ej(o.alternate,o,si);o.memoizedProps=o.pendingProps,c===null?_j(o):_n=c,zg.current=null}function _j(o){var c=o;do{var h=c.alternate;if(o=c.return,(c.flags&32768)===0){if(h=F4(h,c,si),h!==null){_n=h;return}}else{if(h=L4(h,c),h!==null){h.flags&=32767,_n=h;return}if(o!==null)o.flags|=32768,o.subtreeFlags=0,o.deletions=null;else{Rn=6,_n=null;return}}if(c=c.sibling,c!==null){_n=c;return}_n=c=o}while(c!==null);Rn===0&&(Rn=5)}function fl(o,c,h){var g=Ut,k=Ni.transition;try{Ni.transition=null,Ut=1,K4(o,c,h,g)}finally{Ni.transition=k,Ut=g}return null}function K4(o,c,h,g){do gc();while(Po!==null);if((ar&6)!==0)throw Error(r(327));h=o.finishedWork;var k=o.finishedLanes;if(h===null)return null;if(o.finishedWork=null,o.finishedLanes=0,h===o.current)throw Error(r(177));o.callbackNode=null,o.callbackPriority=0;var _=h.lanes|h.childLanes;if(cr(o,_),o===Gn&&(_n=Gn=null,us=0),(h.subtreeFlags&2064)===0&&(h.flags&2064)===0||zf||(zf=!0,Aj(en,function(){return gc(),null})),_=(h.flags&15990)!==0,(h.subtreeFlags&15990)!==0||_){_=Ni.transition,Ni.transition=null;var P=Ut;Ut=1;var B=ar;ar|=4,zg.current=null,U4(o,h),pj(h,o),h4(Yp),bi=!!Gp,Yp=Gp=null,o.current=h,B4(h),Kr(),ar=B,Ut=P,Ni.transition=_}else o.current=h;if(zf&&(zf=!1,Po=o,Uf=k),_=o.pendingLanes,_===0&&(Ao=null),Pe(h.stateNode),Bs(o,Kt()),c!==null)for(g=o.onRecoverableError,h=0;h<c.length;h++)k=c[h],g(k.value,{componentStack:k.stack,digest:k.digest});if(Lf)throw Lf=!1,o=Wg,Wg=null,o;return(Uf&1)!==0&&o.tag!==0&&gc(),_=o.pendingLanes,(_&1)!==0?o===Vg?Wu++:(Wu=0,Vg=o):Wu=0,_o(),null}function gc(){if(Po!==null){var o=ha(Uf),c=Ni.transition,h=Ut;try{if(Ni.transition=null,Ut=16>o?16:o,Po===null)var g=!1;else{if(o=Po,Po=null,Uf=0,(ar&6)!==0)throw Error(r(331));var k=ar;for(ar|=4,ot=o.current;ot!==null;){var _=ot,P=_.child;if((ot.flags&16)!==0){var B=_.deletions;if(B!==null){for(var Q=0;Q<B.length;Q++){var xe=B[Q];for(ot=xe;ot!==null;){var Me=ot;switch(Me.tag){case 0:case 11:case 15:zu(8,Me,_)}var Be=Me.child;if(Be!==null)Be.return=Me,ot=Be;else for(;ot!==null;){Me=ot;var De=Me.sibling,st=Me.return;if(uj(Me),Me===xe){ot=null;break}if(De!==null){De.return=st,ot=De;break}ot=st}}}var ut=_.alternate;if(ut!==null){var ht=ut.child;if(ht!==null){ut.child=null;do{var mn=ht.sibling;ht.sibling=null,ht=mn}while(ht!==null)}}ot=_}}if((_.subtreeFlags&2064)!==0&&P!==null)P.return=_,ot=P;else e:for(;ot!==null;){if(_=ot,(_.flags&2048)!==0)switch(_.tag){case 0:case 11:case 15:zu(9,_,_.return)}var me=_.sibling;if(me!==null){me.return=_.return,ot=me;break e}ot=_.return}}var te=o.current;for(ot=te;ot!==null;){P=ot;var ye=P.child;if((P.subtreeFlags&2064)!==0&&ye!==null)ye.return=P,ot=ye;else e:for(P=te;ot!==null;){if(B=ot,(B.flags&2048)!==0)try{switch(B.tag){case 0:case 11:case 15:Rf(9,B)}}catch(pt){un(B,B.return,pt)}if(B===P){ot=null;break e}var Ke=B.sibling;if(Ke!==null){Ke.return=B.return,ot=Ke;break e}ot=B.return}}if(ar=k,_o(),be&&typeof be.onPostCommitFiberRoot=="function")try{be.onPostCommitFiberRoot(X,o)}catch{}g=!0}return g}finally{Ut=h,Ni.transition=c}}return!1}function Nj(o,c,h){c=fc(h,c),c=V1(o,c,1),o=Co(o,c,1),c=Es(),o!==null&&(xr(o,1,c),Bs(o,c))}function un(o,c,h){if(o.tag===3)Nj(o,o,h);else for(;c!==null;){if(c.tag===3){Nj(c,o,h);break}else if(c.tag===1){var g=c.stateNode;if(typeof c.type.getDerivedStateFromError=="function"||typeof g.componentDidCatch=="function"&&(Ao===null||!Ao.has(g))){o=fc(h,o),o=q1(c,o,1),c=Co(c,o,1),o=Es(),c!==null&&(xr(c,1,o),Bs(c,o));break}}c=c.return}}function G4(o,c,h){var g=o.pingCache;g!==null&&g.delete(c),c=Es(),o.pingedLanes|=o.suspendedLanes&h,Gn===o&&(us&h)===h&&(Rn===4||Rn===3&&(us&130023424)===us&&500>Kt()-Bg?dl(o,0):Ug|=h),Bs(o,c)}function Cj(o,c){c===0&&((o.mode&1)===0?c=1:(c=zt,zt<<=1,(zt&130023424)===0&&(zt=4194304)));var h=Es();o=za(o,c),o!==null&&(xr(o,c,h),Bs(o,h))}function Y4(o){var c=o.memoizedState,h=0;c!==null&&(h=c.retryLane),Cj(o,h)}function J4(o,c){var h=0;switch(o.tag){case 13:var g=o.stateNode,k=o.memoizedState;k!==null&&(h=k.retryLane);break;case 19:g=o.stateNode;break;default:throw Error(r(314))}g!==null&&g.delete(c),Cj(o,h)}var Ej;Ej=function(o,c,h){if(o!==null)if(o.memoizedProps!==c.pendingProps||Fs.current)zs=!0;else{if((o.lanes&h)===0&&(c.flags&128)===0)return zs=!1,M4(o,c,h);zs=(o.flags&131072)!==0}else zs=!1,Xr&&(c.flags&1048576)!==0&&o1(c,xf,c.index);switch(c.lanes=0,c.tag){case 2:var g=c.type;Df(o,c),o=c.pendingProps;var k=sc(c,xs.current);uc(c,h),k=xg(null,c,g,o,k,h);var _=wg();return c.flags|=1,typeof k=="object"&&k!==null&&typeof k.render=="function"&&k.$$typeof===void 0?(c.tag=1,c.memoizedState=null,c.updateQueue=null,Ls(g)?(_=!0,gf(c)):_=!1,c.memoizedState=k.state!==null&&k.state!==void 0?k.state:null,fg(c),k.updater=Of,c.stateNode=k,k._reactInternals=c,Ng(c,g,o,h),c=Pg(null,c,g,!0,_,h)):(c.tag=0,Xr&&_&&rg(c),Cs(null,c,k,h),c=c.child),c;case 16:g=c.elementType;e:{switch(Df(o,c),o=c.pendingProps,k=g._init,g=k(g._payload),c.type=g,k=c.tag=Q4(g),o=Gi(g,o),k){case 0:c=Ag(null,c,g,o,h);break e;case 1:c=ej(null,c,g,o,h);break e;case 11:c=Y1(null,c,g,o,h);break e;case 14:c=J1(null,c,g,Gi(g.type,o),h);break e}throw Error(r(306,g,""))}return c;case 0:return g=c.type,k=c.pendingProps,k=c.elementType===g?k:Gi(g,k),Ag(o,c,g,k,h);case 1:return g=c.type,k=c.pendingProps,k=c.elementType===g?k:Gi(g,k),ej(o,c,g,k,h);case 3:e:{if(tj(c),o===null)throw Error(r(387));g=c.pendingProps,_=c.memoizedState,k=_.element,g1(o,c),_f(c,g,null,h);var P=c.memoizedState;if(g=P.element,_.isDehydrated)if(_={element:g,isDehydrated:!1,cache:P.cache,pendingSuspenseBoundaries:P.pendingSuspenseBoundaries,transitions:P.transitions},c.updateQueue.baseState=_,c.memoizedState=_,c.flags&256){k=fc(Error(r(423)),c),c=rj(o,c,g,h,k);break e}else if(g!==k){k=fc(Error(r(424)),c),c=rj(o,c,g,h,k);break e}else for(ni=jo(c.stateNode.containerInfo.firstChild),ri=c,Xr=!0,Ki=null,h=m1(c,null,g,h),c.child=h;h;)h.flags=h.flags&-3|4096,h=h.sibling;else{if(oc(),g===k){c=Ba(o,c,h);break e}Cs(o,c,g,h)}c=c.child}return c;case 5:return x1(c),o===null&&ig(c),g=c.type,k=c.pendingProps,_=o!==null?o.memoizedProps:null,P=k.children,Jp(g,k)?P=null:_!==null&&Jp(g,_)&&(c.flags|=32),Z1(o,c),Cs(o,c,P,h),c.child;case 6:return o===null&&ig(c),null;case 13:return nj(o,c,h);case 4:return hg(c,c.stateNode.containerInfo),g=c.pendingProps,o===null?c.child=lc(c,null,g,h):Cs(o,c,g,h),c.child;case 11:return g=c.type,k=c.pendingProps,k=c.elementType===g?k:Gi(g,k),Y1(o,c,g,k,h);case 7:return Cs(o,c,c.pendingProps,h),c.child;case 8:return Cs(o,c,c.pendingProps.children,h),c.child;case 12:return Cs(o,c,c.pendingProps.children,h),c.child;case 10:e:{if(g=c.type._context,k=c.pendingProps,_=c.memoizedProps,P=k.value,Or(jf,g._currentValue),g._currentValue=P,_!==null)if(Hi(_.value,P)){if(_.children===k.children&&!Fs.current){c=Ba(o,c,h);break e}}else for(_=c.child,_!==null&&(_.return=c);_!==null;){var B=_.dependencies;if(B!==null){P=_.child;for(var Q=B.firstContext;Q!==null;){if(Q.context===g){if(_.tag===1){Q=Ua(-1,h&-h),Q.tag=2;var xe=_.updateQueue;if(xe!==null){xe=xe.shared;var Me=xe.pending;Me===null?Q.next=Q:(Q.next=Me.next,Me.next=Q),xe.pending=Q}}_.lanes|=h,Q=_.alternate,Q!==null&&(Q.lanes|=h),ug(_.return,h,c),B.lanes|=h;break}Q=Q.next}}else if(_.tag===10)P=_.type===c.type?null:_.child;else if(_.tag===18){if(P=_.return,P===null)throw Error(r(341));P.lanes|=h,B=P.alternate,B!==null&&(B.lanes|=h),ug(P,h,c),P=_.sibling}else P=_.child;if(P!==null)P.return=_;else for(P=_;P!==null;){if(P===c){P=null;break}if(_=P.sibling,_!==null){_.return=P.return,P=_;break}P=P.return}_=P}Cs(o,c,k.children,h),c=c.child}return c;case 9:return k=c.type,g=c.pendingProps.children,uc(c,h),k=ki(k),g=g(k),c.flags|=1,Cs(o,c,g,h),c.child;case 14:return g=c.type,k=Gi(g,c.pendingProps),k=Gi(g.type,k),J1(o,c,g,k,h);case 15:return X1(o,c,c.type,c.pendingProps,h);case 17:return g=c.type,k=c.pendingProps,k=c.elementType===g?k:Gi(g,k),Df(o,c),c.tag=1,Ls(g)?(o=!0,gf(c)):o=!1,uc(c,h),B1(c,g,k),Ng(c,g,k,h),Pg(null,c,g,!0,o,h);case 19:return ij(o,c,h);case 22:return Q1(o,c,h)}throw Error(r(156,c.tag))};function Aj(o,c){return Dn(o,c)}function X4(o,c,h,g){this.tag=o,this.key=h,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=c,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=g,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ci(o,c,h,g){return new X4(o,c,h,g)}function Jg(o){return o=o.prototype,!(!o||!o.isReactComponent)}function Q4(o){if(typeof o=="function")return Jg(o)?1:0;if(o!=null){if(o=o.$$typeof,o===K)return 11;if(o===G)return 14}return 2}function Io(o,c){var h=o.alternate;return h===null?(h=Ci(o.tag,c,o.key,o.mode),h.elementType=o.elementType,h.type=o.type,h.stateNode=o.stateNode,h.alternate=o,o.alternate=h):(h.pendingProps=c,h.type=o.type,h.flags=0,h.subtreeFlags=0,h.deletions=null),h.flags=o.flags&14680064,h.childLanes=o.childLanes,h.lanes=o.lanes,h.child=o.child,h.memoizedProps=o.memoizedProps,h.memoizedState=o.memoizedState,h.updateQueue=o.updateQueue,c=o.dependencies,h.dependencies=c===null?null:{lanes:c.lanes,firstContext:c.firstContext},h.sibling=o.sibling,h.index=o.index,h.ref=o.ref,h}function qf(o,c,h,g,k,_){var P=2;if(g=o,typeof o=="function")Jg(o)&&(P=1);else if(typeof o=="string")P=5;else e:switch(o){case V:return hl(h.children,k,_,c);case F:P=8,k|=8;break;case L:return o=Ci(12,h,c,k|2),o.elementType=L,o.lanes=_,o;case ie:return o=Ci(13,h,c,k),o.elementType=ie,o.lanes=_,o;case q:return o=Ci(19,h,c,k),o.elementType=q,o.lanes=_,o;case M:return Hf(h,k,_,c);default:if(typeof o=="object"&&o!==null)switch(o.$$typeof){case H:P=10;break e;case le:P=9;break e;case K:P=11;break e;case G:P=14;break e;case ve:P=16,g=null;break e}throw Error(r(130,o==null?o:typeof o,""))}return c=Ci(P,h,c,k),c.elementType=o,c.type=g,c.lanes=_,c}function hl(o,c,h,g){return o=Ci(7,o,g,c),o.lanes=h,o}function Hf(o,c,h,g){return o=Ci(22,o,g,c),o.elementType=M,o.lanes=h,o.stateNode={isHidden:!1},o}function Xg(o,c,h){return o=Ci(6,o,null,c),o.lanes=h,o}function Qg(o,c,h){return c=Ci(4,o.children!==null?o.children:[],o.key,c),c.lanes=h,c.stateNode={containerInfo:o.containerInfo,pendingChildren:null,implementation:o.implementation},c}function Z4(o,c,h,g,k){this.tag=c,this.containerInfo=o,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Xt(0),this.expirationTimes=Xt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Xt(0),this.identifierPrefix=g,this.onRecoverableError=k,this.mutableSourceEagerHydrationData=null}function Zg(o,c,h,g,k,_,P,B,Q){return o=new Z4(o,c,h,B,Q),c===1?(c=1,_===!0&&(c|=8)):c=0,_=Ci(3,null,null,c),o.current=_,_.stateNode=o,_.memoizedState={element:g,isDehydrated:h,cache:null,transitions:null,pendingSuspenseBoundaries:null},fg(_),o}function eD(o,c,h){var g=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:O,key:g==null?null:""+g,children:o,containerInfo:c,implementation:h}}function Pj(o){if(!o)return ko;o=o._reactInternals;e:{if(vr(o)!==o||o.tag!==1)throw Error(r(170));var c=o;do{switch(c.tag){case 3:c=c.stateNode.context;break e;case 1:if(Ls(c.type)){c=c.stateNode.__reactInternalMemoizedMergedChildContext;break e}}c=c.return}while(c!==null);throw Error(r(171))}if(o.tag===1){var h=o.type;if(Ls(h))return s1(o,h,c)}return c}function Tj(o,c,h,g,k,_,P,B,Q){return o=Zg(h,g,!0,o,k,_,P,B,Q),o.context=Pj(null),h=o.current,g=Es(),k=To(h),_=Ua(g,k),_.callback=c??null,Co(h,_,k),o.current.lanes=k,xr(o,k,g),Bs(o,g),o}function Kf(o,c,h,g){var k=c.current,_=Es(),P=To(k);return h=Pj(h),c.context===null?c.context=h:c.pendingContext=h,c=Ua(_,P),c.payload={element:o},g=g===void 0?null:g,g!==null&&(c.callback=g),o=Co(k,c,P),o!==null&&(Xi(o,k,P,_),kf(o,k,P)),P}function Gf(o){if(o=o.current,!o.child)return null;switch(o.child.tag){case 5:return o.child.stateNode;default:return o.child.stateNode}}function Oj(o,c){if(o=o.memoizedState,o!==null&&o.dehydrated!==null){var h=o.retryLane;o.retryLane=h!==0&&h<c?h:c}}function ey(o,c){Oj(o,c),(o=o.alternate)&&Oj(o,c)}function tD(){return null}var Ij=typeof reportError=="function"?reportError:function(o){console.error(o)};function ty(o){this._internalRoot=o}Yf.prototype.render=ty.prototype.render=function(o){var c=this._internalRoot;if(c===null)throw Error(r(409));Kf(o,c,null,null)},Yf.prototype.unmount=ty.prototype.unmount=function(){var o=this._internalRoot;if(o!==null){this._internalRoot=null;var c=o.containerInfo;ul(function(){Kf(null,o,null,null)}),c[Ra]=null}};function Yf(o){this._internalRoot=o}Yf.prototype.unstable_scheduleHydration=function(o){if(o){var c=Li();o={blockedOn:null,target:o,priority:c};for(var h=0;h<Ar.length&&c!==0&&c<Ar[h].priority;h++);Ar.splice(h,0,o),h===0&&ma(o)}};function ry(o){return!(!o||o.nodeType!==1&&o.nodeType!==9&&o.nodeType!==11)}function Jf(o){return!(!o||o.nodeType!==1&&o.nodeType!==9&&o.nodeType!==11&&(o.nodeType!==8||o.nodeValue!==" react-mount-point-unstable "))}function Dj(){}function rD(o,c,h,g,k){if(k){if(typeof g=="function"){var _=g;g=function(){var xe=Gf(P);_.call(xe)}}var P=Tj(c,g,o,0,null,!1,!1,"",Dj);return o._reactRootContainer=P,o[Ra]=P.current,Cu(o.nodeType===8?o.parentNode:o),ul(),P}for(;k=o.lastChild;)o.removeChild(k);if(typeof g=="function"){var B=g;g=function(){var xe=Gf(Q);B.call(xe)}}var Q=Zg(o,0,!1,null,null,!1,!1,"",Dj);return o._reactRootContainer=Q,o[Ra]=Q.current,Cu(o.nodeType===8?o.parentNode:o),ul(function(){Kf(c,Q,h,g)}),Q}function Xf(o,c,h,g,k){var _=h._reactRootContainer;if(_){var P=_;if(typeof k=="function"){var B=k;k=function(){var Q=Gf(P);B.call(Q)}}Kf(c,P,o,k)}else P=rD(h,c,o,k,g);return Gf(P)}Qs=function(o){switch(o.tag){case 3:var c=o.stateNode;if(c.current.memoizedState.isDehydrated){var h=_e(c.pendingLanes);h!==0&&(Fi(c,h|1),Bs(c,Kt()),(ar&6)===0&&(pc=Kt()+500,_o()))}break;case 13:ul(function(){var g=za(o,1);if(g!==null){var k=Es();Xi(g,o,1,k)}}),ey(o,1)}},Ns=function(o){if(o.tag===13){var c=za(o,134217728);if(c!==null){var h=Es();Xi(c,o,134217728,h)}ey(o,134217728)}},is=function(o){if(o.tag===13){var c=To(o),h=za(o,c);if(h!==null){var g=Es();Xi(h,o,c,g)}ey(o,c)}},Li=function(){return Ut},zi=function(o,c){var h=Ut;try{return Ut=o,c()}finally{Ut=h}},sr=function(o,c,h){switch(c){case"input":if(gt(o,h),c=h.name,h.type==="radio"&&c!=null){for(h=o;h.parentNode;)h=h.parentNode;for(h=h.querySelectorAll("input[name="+JSON.stringify(""+c)+'][type="radio"]'),c=0;c<h.length;c++){var g=h[c];if(g!==o&&g.form===o.form){var k=mf(g);if(!k)throw Error(r(90));se(g),gt(g,k)}}}break;case"textarea":Ne(o,h);break;case"select":c=h.value,c!=null&&W(o,!!h.multiple,c,!1)}},yr=Kg,hr=ul;var nD={usingClientEntryPoint:!1,Events:[Pu,rc,mf,vt,ir,Kg]},Vu={findFiberByHostInstance:rl,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},sD={bundleType:Vu.bundleType,version:Vu.version,rendererPackageName:Vu.rendererPackageName,rendererConfig:Vu.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:I.ReactCurrentDispatcher,findHostInstanceByFiber:function(o){return o=ss(o),o===null?null:o.stateNode},findFiberByHostInstance:Vu.findFiberByHostInstance||tD,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Qf=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Qf.isDisabled&&Qf.supportsFiber)try{X=Qf.inject(sD),be=Qf}catch{}}return Ws.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=nD,Ws.createPortal=function(o,c){var h=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!ry(c))throw Error(r(200));return eD(o,c,null,h)},Ws.createRoot=function(o,c){if(!ry(o))throw Error(r(299));var h=!1,g="",k=Ij;return c!=null&&(c.unstable_strictMode===!0&&(h=!0),c.identifierPrefix!==void 0&&(g=c.identifierPrefix),c.onRecoverableError!==void 0&&(k=c.onRecoverableError)),c=Zg(o,1,!1,null,null,h,!1,g,k),o[Ra]=c.current,Cu(o.nodeType===8?o.parentNode:o),new ty(c)},Ws.findDOMNode=function(o){if(o==null)return null;if(o.nodeType===1)return o;var c=o._reactInternals;if(c===void 0)throw typeof o.render=="function"?Error(r(188)):(o=Object.keys(o).join(","),Error(r(268,o)));return o=ss(c),o=o===null?null:o.stateNode,o},Ws.flushSync=function(o){return ul(o)},Ws.hydrate=function(o,c,h){if(!Jf(c))throw Error(r(200));return Xf(null,o,c,!0,h)},Ws.hydrateRoot=function(o,c,h){if(!ry(o))throw Error(r(405));var g=h!=null&&h.hydratedSources||null,k=!1,_="",P=Ij;if(h!=null&&(h.unstable_strictMode===!0&&(k=!0),h.identifierPrefix!==void 0&&(_=h.identifierPrefix),h.onRecoverableError!==void 0&&(P=h.onRecoverableError)),c=Tj(c,null,o,1,h??null,k,!1,_,P),o[Ra]=c.current,Cu(o),g)for(o=0;o<g.length;o++)h=g[o],k=h._getVersion,k=k(h._source),c.mutableSourceEagerHydrationData==null?c.mutableSourceEagerHydrationData=[h,k]:c.mutableSourceEagerHydrationData.push(h,k);return new Yf(c)},Ws.render=function(o,c,h){if(!Jf(c))throw Error(r(200));return Xf(null,o,c,!1,h)},Ws.unmountComponentAtNode=function(o){if(!Jf(o))throw Error(r(40));return o._reactRootContainer?(ul(function(){Xf(null,null,o,!1,function(){o._reactRootContainer=null,o[Ra]=null})}),!0):!1},Ws.unstable_batchedUpdates=Kg,Ws.unstable_renderSubtreeIntoContainer=function(o,c,h,g){if(!Jf(h))throw Error(r(200));if(o==null||o._reactInternals===void 0)throw Error(r(38));return Xf(o,c,h,!1,g)},Ws.version="18.3.1-next-f1338f8080-20240426",Ws}var Bj;function zC(){if(Bj)return ay.exports;Bj=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),ay.exports=gD(),ay.exports}var Wj;function yD(){if(Wj)return Zf;Wj=1;var e=zC();return Zf.createRoot=e.createRoot,Zf.hydrateRoot=e.hydrateRoot,Zf}var vD=yD();const xD=ca(vD);/**
 * react-router v7.9.4
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var Vj="popstate";function wD(e={}){function t(n,s){let{pathname:i,search:l,hash:u}=n.location;return sv("",{pathname:i,search:l,hash:u},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function r(n,s){return typeof s=="string"?s:jd(s)}return jD(t,r,null,e)}function Zr(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function Oi(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function bD(){return Math.random().toString(36).substring(2,10)}function qj(e,t){return{usr:e.state,key:e.key,idx:t}}function sv(e,t,r=null,n){return{pathname:typeof e=="string"?e:e.pathname,search:"",hash:"",...typeof t=="string"?su(t):t,state:r,key:t&&t.key||n||bD()}}function jd({pathname:e="/",search:t="",hash:r=""}){return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function su(e){let t={};if(e){let r=e.indexOf("#");r>=0&&(t.hash=e.substring(r),e=e.substring(0,r));let n=e.indexOf("?");n>=0&&(t.search=e.substring(n),e=e.substring(0,n)),e&&(t.pathname=e)}return t}function jD(e,t,r,n={}){let{window:s=document.defaultView,v5Compat:i=!1}=n,l=s.history,u="POP",d=null,m=f();m==null&&(m=0,l.replaceState({...l.state,idx:m},""));function f(){return(l.state||{idx:null}).idx}function p(){u="POP";let j=f(),N=j==null?null:j-m;m=j,d&&d({action:u,location:S.location,delta:N})}function v(j,N){u="PUSH";let E=sv(S.location,j,N);m=f()+1;let C=qj(E,m),I=S.createHref(E);try{l.pushState(C,"",I)}catch(T){if(T instanceof DOMException&&T.name==="DataCloneError")throw T;s.location.assign(I)}i&&d&&d({action:u,location:S.location,delta:1})}function x(j,N){u="REPLACE";let E=sv(S.location,j,N);m=f();let C=qj(E,m),I=S.createHref(E);l.replaceState(C,"",I),i&&d&&d({action:u,location:S.location,delta:0})}function b(j){return SD(j)}let S={get action(){return u},get location(){return e(s,l)},listen(j){if(d)throw new Error("A history only accepts one active listener");return s.addEventListener(Vj,p),d=j,()=>{s.removeEventListener(Vj,p),d=null}},createHref(j){return t(s,j)},createURL:b,encodeLocation(j){let N=b(j);return{pathname:N.pathname,search:N.search,hash:N.hash}},push:v,replace:x,go(j){return l.go(j)}};return S}function SD(e,t=!1){let r="http://localhost";typeof window<"u"&&(r=window.location.origin!=="null"?window.location.origin:window.location.href),Zr(r,"No window.location.(origin|href) available to create URL");let n=typeof e=="string"?e:jd(e);return n=n.replace(/ $/,"%20"),!t&&n.startsWith("//")&&(n=r+n),new URL(n,r)}function UC(e,t,r="/"){return kD(e,t,r,!1)}function kD(e,t,r,n){let s=typeof t=="string"?su(t):t,i=Za(s.pathname||"/",r);if(i==null)return null;let l=BC(e);_D(l);let u=null;for(let d=0;u==null&&d<l.length;++d){let m=RD(i);u=DD(l[d],m,n)}return u}function BC(e,t=[],r=[],n="",s=!1){let i=(l,u,d=s,m)=>{let f={relativePath:m===void 0?l.path||"":m,caseSensitive:l.caseSensitive===!0,childrenIndex:u,route:l};if(f.relativePath.startsWith("/")){if(!f.relativePath.startsWith(n)&&d)return;Zr(f.relativePath.startsWith(n),`Absolute route path "${f.relativePath}" nested under path "${n}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),f.relativePath=f.relativePath.slice(n.length)}let p=Ja([n,f.relativePath]),v=r.concat(f);l.children&&l.children.length>0&&(Zr(l.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${p}".`),BC(l.children,t,v,p,d)),!(l.path==null&&!l.index)&&t.push({path:p,score:OD(p,l.index),routesMeta:v})};return e.forEach((l,u)=>{var d;if(l.path===""||!((d=l.path)!=null&&d.includes("?")))i(l,u);else for(let m of WC(l.path))i(l,u,!0,m)}),t}function WC(e){let t=e.split("/");if(t.length===0)return[];let[r,...n]=t,s=r.endsWith("?"),i=r.replace(/\?$/,"");if(n.length===0)return s?[i,""]:[i];let l=WC(n.join("/")),u=[];return u.push(...l.map(d=>d===""?i:[i,d].join("/"))),s&&u.push(...l),u.map(d=>e.startsWith("/")&&d===""?"/":d)}function _D(e){e.sort((t,r)=>t.score!==r.score?r.score-t.score:ID(t.routesMeta.map(n=>n.childrenIndex),r.routesMeta.map(n=>n.childrenIndex)))}var ND=/^:[\w-]+$/,CD=3,ED=2,AD=1,PD=10,TD=-2,Hj=e=>e==="*";function OD(e,t){let r=e.split("/"),n=r.length;return r.some(Hj)&&(n+=TD),t&&(n+=ED),r.filter(s=>!Hj(s)).reduce((s,i)=>s+(ND.test(i)?CD:i===""?AD:PD),n)}function ID(e,t){return e.length===t.length&&e.slice(0,-1).every((n,s)=>n===t[s])?e[e.length-1]-t[t.length-1]:0}function DD(e,t,r=!1){let{routesMeta:n}=e,s={},i="/",l=[];for(let u=0;u<n.length;++u){let d=n[u],m=u===n.length-1,f=i==="/"?t:t.slice(i.length)||"/",p=Dh({path:d.relativePath,caseSensitive:d.caseSensitive,end:m},f),v=d.route;if(!p&&m&&r&&!n[n.length-1].route.index&&(p=Dh({path:d.relativePath,caseSensitive:d.caseSensitive,end:!1},f)),!p)return null;Object.assign(s,p.params),l.push({params:s,pathname:Ja([i,p.pathname]),pathnameBase:zD(Ja([i,p.pathnameBase])),route:v}),p.pathnameBase!=="/"&&(i=Ja([i,p.pathnameBase]))}return l}function Dh(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[r,n]=$D(e.path,e.caseSensitive,e.end),s=t.match(r);if(!s)return null;let i=s[0],l=i.replace(/(.)\/+$/,"$1"),u=s.slice(1);return{params:n.reduce((m,{paramName:f,isOptional:p},v)=>{if(f==="*"){let b=u[v]||"";l=i.slice(0,i.length-b.length).replace(/(.)\/+$/,"$1")}const x=u[v];return p&&!x?m[f]=void 0:m[f]=(x||"").replace(/%2F/g,"/"),m},{}),pathname:i,pathnameBase:l,pattern:e}}function $D(e,t=!1,r=!0){Oi(e==="*"||!e.endsWith("*")||e.endsWith("/*"),`Route path "${e}" will be treated as if it were "${e.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${e.replace(/\*$/,"/*")}".`);let n=[],s="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(l,u,d)=>(n.push({paramName:u,isOptional:d!=null}),d?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return e.endsWith("*")?(n.push({paramName:"*"}),s+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?s+="\\/*$":e!==""&&e!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,t?void 0:"i"),n]}function RD(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return Oi(!1,`The URL path "${e}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${t}).`),e}}function Za(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let r=t.endsWith("/")?t.length-1:t.length,n=e.charAt(r);return n&&n!=="/"?null:e.slice(r)||"/"}function MD(e,t="/"){let{pathname:r,search:n="",hash:s=""}=typeof e=="string"?su(e):e;return{pathname:r?r.startsWith("/")?r:FD(r,t):t,search:UD(n),hash:BD(s)}}function FD(e,t){let r=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(s=>{s===".."?r.length>1&&r.pop():s!=="."&&r.push(s)}),r.length>1?r.join("/"):"/"}function cy(e,t,r,n){return`Cannot include a '${e}' character in a manually specified \`to.${t}\` field [${JSON.stringify(n)}].  Please separate it out to the \`to.${r}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function LD(e){return e.filter((t,r)=>r===0||t.route.path&&t.route.path.length>0)}function _x(e){let t=LD(e);return t.map((r,n)=>n===t.length-1?r.pathname:r.pathnameBase)}function Nx(e,t,r,n=!1){let s;typeof e=="string"?s=su(e):(s={...e},Zr(!s.pathname||!s.pathname.includes("?"),cy("?","pathname","search",s)),Zr(!s.pathname||!s.pathname.includes("#"),cy("#","pathname","hash",s)),Zr(!s.search||!s.search.includes("#"),cy("#","search","hash",s)));let i=e===""||s.pathname==="",l=i?"/":s.pathname,u;if(l==null)u=r;else{let p=t.length-1;if(!n&&l.startsWith("..")){let v=l.split("/");for(;v[0]==="..";)v.shift(),p-=1;s.pathname=v.join("/")}u=p>=0?t[p]:"/"}let d=MD(s,u),m=l&&l!=="/"&&l.endsWith("/"),f=(i||l===".")&&r.endsWith("/");return!d.pathname.endsWith("/")&&(m||f)&&(d.pathname+="/"),d}var Ja=e=>e.join("/").replace(/\/\/+/g,"/"),zD=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),UD=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,BD=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function WD(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}var VC=["POST","PUT","PATCH","DELETE"];new Set(VC);var VD=["GET",...VC];new Set(VD);var iu=y.createContext(null);iu.displayName="DataRouter";var Mm=y.createContext(null);Mm.displayName="DataRouterState";y.createContext(!1);var qC=y.createContext({isTransitioning:!1});qC.displayName="ViewTransition";var qD=y.createContext(new Map);qD.displayName="Fetchers";var HD=y.createContext(null);HD.displayName="Await";var ua=y.createContext(null);ua.displayName="Navigation";var Ld=y.createContext(null);Ld.displayName="Location";var Ia=y.createContext({outlet:null,matches:[],isDataRoute:!1});Ia.displayName="Route";var Cx=y.createContext(null);Cx.displayName="RouteError";function KD(e,{relative:t}={}){Zr(au(),"useHref() may be used only in the context of a <Router> component.");let{basename:r,navigator:n}=y.useContext(ua),{hash:s,pathname:i,search:l}=zd(e,{relative:t}),u=i;return r!=="/"&&(u=i==="/"?r:Ja([r,i])),n.createHref({pathname:u,search:l,hash:s})}function au(){return y.useContext(Ld)!=null}function uo(){return Zr(au(),"useLocation() may be used only in the context of a <Router> component."),y.useContext(Ld).location}var HC="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function KC(e){y.useContext(ua).static||y.useLayoutEffect(e)}function da(){let{isDataRoute:e}=y.useContext(Ia);return e?a3():GD()}function GD(){Zr(au(),"useNavigate() may be used only in the context of a <Router> component.");let e=y.useContext(iu),{basename:t,navigator:r}=y.useContext(ua),{matches:n}=y.useContext(Ia),{pathname:s}=uo(),i=JSON.stringify(_x(n)),l=y.useRef(!1);return KC(()=>{l.current=!0}),y.useCallback((d,m={})=>{if(Oi(l.current,HC),!l.current)return;if(typeof d=="number"){r.go(d);return}let f=Nx(d,JSON.parse(i),s,m.relative==="path");e==null&&t!=="/"&&(f.pathname=f.pathname==="/"?t:Ja([t,f.pathname])),(m.replace?r.replace:r.push)(f,m.state,m)},[t,r,i,s,e])}y.createContext(null);function zd(e,{relative:t}={}){let{matches:r}=y.useContext(Ia),{pathname:n}=uo(),s=JSON.stringify(_x(r));return y.useMemo(()=>Nx(e,JSON.parse(s),n,t==="path"),[e,s,n,t])}function YD(e,t){return GC(e,t)}function GC(e,t,r,n,s){var E;Zr(au(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:i}=y.useContext(ua),{matches:l}=y.useContext(Ia),u=l[l.length-1],d=u?u.params:{},m=u?u.pathname:"/",f=u?u.pathnameBase:"/",p=u&&u.route;{let C=p&&p.path||"";YC(m,!p||C.endsWith("*")||C.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${m}" (under <Route path="${C}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${C}"> to <Route path="${C==="/"?"*":`${C}/*`}">.`)}let v=uo(),x;if(t){let C=typeof t=="string"?su(t):t;Zr(f==="/"||((E=C.pathname)==null?void 0:E.startsWith(f)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${f}" but pathname "${C.pathname}" was given in the \`location\` prop.`),x=C}else x=v;let b=x.pathname||"/",S=b;if(f!=="/"){let C=f.replace(/^\//,"").split("/");S="/"+b.replace(/^\//,"").split("/").slice(C.length).join("/")}let j=UC(e,{pathname:S});Oi(p||j!=null,`No routes matched location "${x.pathname}${x.search}${x.hash}" `),Oi(j==null||j[j.length-1].route.element!==void 0||j[j.length-1].route.Component!==void 0||j[j.length-1].route.lazy!==void 0,`Matched leaf route at location "${x.pathname}${x.search}${x.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let N=e3(j&&j.map(C=>Object.assign({},C,{params:Object.assign({},d,C.params),pathname:Ja([f,i.encodeLocation?i.encodeLocation(C.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:C.pathname]),pathnameBase:C.pathnameBase==="/"?f:Ja([f,i.encodeLocation?i.encodeLocation(C.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:C.pathnameBase])})),l,r,n,s);return t&&N?y.createElement(Ld.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...x},navigationType:"POP"}},N):N}function JD(){let e=i3(),t=WD(e)?`${e.status} ${e.statusText}`:e instanceof Error?e.message:JSON.stringify(e),r=e instanceof Error?e.stack:null,n="rgba(200,200,200, 0.5)",s={padding:"0.5rem",backgroundColor:n},i={padding:"2px 4px",backgroundColor:n},l=null;return console.error("Error handled by React Router default ErrorBoundary:",e),l=y.createElement(y.Fragment,null,y.createElement("p",null," Hey developer "),y.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",y.createElement("code",{style:i},"ErrorBoundary")," or"," ",y.createElement("code",{style:i},"errorElement")," prop on your route.")),y.createElement(y.Fragment,null,y.createElement("h2",null,"Unexpected Application Error!"),y.createElement("h3",{style:{fontStyle:"italic"}},t),r?y.createElement("pre",{style:s},r):null,l)}var XD=y.createElement(JD,null),QD=class extends y.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){this.props.unstable_onError?this.props.unstable_onError(e,t):console.error("React Router caught the following error during render",e)}render(){return this.state.error!==void 0?y.createElement(Ia.Provider,{value:this.props.routeContext},y.createElement(Cx.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function ZD({routeContext:e,match:t,children:r}){let n=y.useContext(iu);return n&&n.static&&n.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(n.staticContext._deepestRenderedBoundaryId=t.route.id),y.createElement(Ia.Provider,{value:e},r)}function e3(e,t=[],r=null,n=null,s=null){if(e==null){if(!r)return null;if(r.errors)e=r.matches;else if(t.length===0&&!r.initialized&&r.matches.length>0)e=r.matches;else return null}let i=e,l=r==null?void 0:r.errors;if(l!=null){let m=i.findIndex(f=>f.route.id&&(l==null?void 0:l[f.route.id])!==void 0);Zr(m>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(l).join(",")}`),i=i.slice(0,Math.min(i.length,m+1))}let u=!1,d=-1;if(r)for(let m=0;m<i.length;m++){let f=i[m];if((f.route.HydrateFallback||f.route.hydrateFallbackElement)&&(d=m),f.route.id){let{loaderData:p,errors:v}=r,x=f.route.loader&&!p.hasOwnProperty(f.route.id)&&(!v||v[f.route.id]===void 0);if(f.route.lazy||x){u=!0,d>=0?i=i.slice(0,d+1):i=[i[0]];break}}}return i.reduceRight((m,f,p)=>{let v,x=!1,b=null,S=null;r&&(v=l&&f.route.id?l[f.route.id]:void 0,b=f.route.errorElement||XD,u&&(d<0&&p===0?(YC("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),x=!0,S=null):d===p&&(x=!0,S=f.route.hydrateFallbackElement||null)));let j=t.concat(i.slice(0,p+1)),N=()=>{let E;return v?E=b:x?E=S:f.route.Component?E=y.createElement(f.route.Component,null):f.route.element?E=f.route.element:E=m,y.createElement(ZD,{match:f,routeContext:{outlet:m,matches:j,isDataRoute:r!=null},children:E})};return r&&(f.route.ErrorBoundary||f.route.errorElement||p===0)?y.createElement(QD,{location:r.location,revalidation:r.revalidation,component:b,error:v,children:N(),routeContext:{outlet:null,matches:j,isDataRoute:!0},unstable_onError:n}):N()},null)}function Ex(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function t3(e){let t=y.useContext(iu);return Zr(t,Ex(e)),t}function r3(e){let t=y.useContext(Mm);return Zr(t,Ex(e)),t}function n3(e){let t=y.useContext(Ia);return Zr(t,Ex(e)),t}function Ax(e){let t=n3(e),r=t.matches[t.matches.length-1];return Zr(r.route.id,`${e} can only be used on routes that contain a unique "id"`),r.route.id}function s3(){return Ax("useRouteId")}function i3(){var n;let e=y.useContext(Cx),t=r3("useRouteError"),r=Ax("useRouteError");return e!==void 0?e:(n=t.errors)==null?void 0:n[r]}function a3(){let{router:e}=t3("useNavigate"),t=Ax("useNavigate"),r=y.useRef(!1);return KC(()=>{r.current=!0}),y.useCallback(async(s,i={})=>{Oi(r.current,HC),r.current&&(typeof s=="number"?e.navigate(s):await e.navigate(s,{fromRouteId:t,...i}))},[e,t])}var Kj={};function YC(e,t,r){!t&&!Kj[e]&&(Kj[e]=!0,Oi(!1,r))}y.memo(o3);function o3({routes:e,future:t,state:r,unstable_onError:n}){return GC(e,void 0,r,n,t)}function l3({to:e,replace:t,state:r,relative:n}){Zr(au(),"<Navigate> may be used only in the context of a <Router> component.");let{static:s}=y.useContext(ua);Oi(!s,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:i}=y.useContext(Ia),{pathname:l}=uo(),u=da(),d=Nx(e,_x(i),l,n==="path"),m=JSON.stringify(d);return y.useEffect(()=>{u(JSON.parse(m),{replace:t,state:r,relative:n})},[u,m,n,t,r]),null}function ba(e){Zr(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function c3({basename:e="/",children:t=null,location:r,navigationType:n="POP",navigator:s,static:i=!1}){Zr(!au(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let l=e.replace(/^\/*/,"/"),u=y.useMemo(()=>({basename:l,navigator:s,static:i,future:{}}),[l,s,i]);typeof r=="string"&&(r=su(r));let{pathname:d="/",search:m="",hash:f="",state:p=null,key:v="default"}=r,x=y.useMemo(()=>{let b=Za(d,l);return b==null?null:{location:{pathname:b,search:m,hash:f,state:p,key:v},navigationType:n}},[l,d,m,f,p,v,n]);return Oi(x!=null,`<Router basename="${l}"> is not able to match the URL "${d}${m}${f}" because it does not start with the basename, so the <Router> won't render anything.`),x==null?null:y.createElement(ua.Provider,{value:u},y.createElement(Ld.Provider,{children:t,value:x}))}function u3({children:e,location:t}){return YD(iv(e),t)}function iv(e,t=[]){let r=[];return y.Children.forEach(e,(n,s)=>{if(!y.isValidElement(n))return;let i=[...t,s];if(n.type===y.Fragment){r.push.apply(r,iv(n.props.children,i));return}Zr(n.type===ba,`[${typeof n.type=="string"?n.type:n.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Zr(!n.props.index||!n.props.children,"An index route cannot have child routes.");let l={id:n.props.id||i.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,middleware:n.props.middleware,loader:n.props.loader,action:n.props.action,hydrateFallbackElement:n.props.hydrateFallbackElement,HydrateFallback:n.props.HydrateFallback,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.hasErrorBoundary===!0||n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(l.children=iv(n.props.children,i)),r.push(l)}),r}var Sh="get",kh="application/x-www-form-urlencoded";function Fm(e){return e!=null&&typeof e.tagName=="string"}function d3(e){return Fm(e)&&e.tagName.toLowerCase()==="button"}function f3(e){return Fm(e)&&e.tagName.toLowerCase()==="form"}function h3(e){return Fm(e)&&e.tagName.toLowerCase()==="input"}function m3(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function p3(e,t){return e.button===0&&(!t||t==="_self")&&!m3(e)}function av(e=""){return new URLSearchParams(typeof e=="string"||Array.isArray(e)||e instanceof URLSearchParams?e:Object.keys(e).reduce((t,r)=>{let n=e[r];return t.concat(Array.isArray(n)?n.map(s=>[r,s]):[[r,n]])},[]))}function g3(e,t){let r=av(e);return t&&t.forEach((n,s)=>{r.has(s)||t.getAll(s).forEach(i=>{r.append(s,i)})}),r}var eh=null;function y3(){if(eh===null)try{new FormData(document.createElement("form"),0),eh=!1}catch{eh=!0}return eh}var v3=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function uy(e){return e!=null&&!v3.has(e)?(Oi(!1,`"${e}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${kh}"`),null):e}function x3(e,t){let r,n,s,i,l;if(f3(e)){let u=e.getAttribute("action");n=u?Za(u,t):null,r=e.getAttribute("method")||Sh,s=uy(e.getAttribute("enctype"))||kh,i=new FormData(e)}else if(d3(e)||h3(e)&&(e.type==="submit"||e.type==="image")){let u=e.form;if(u==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let d=e.getAttribute("formaction")||u.getAttribute("action");if(n=d?Za(d,t):null,r=e.getAttribute("formmethod")||u.getAttribute("method")||Sh,s=uy(e.getAttribute("formenctype"))||uy(u.getAttribute("enctype"))||kh,i=new FormData(u,e),!y3()){let{name:m,type:f,value:p}=e;if(f==="image"){let v=m?`${m}.`:"";i.append(`${v}x`,"0"),i.append(`${v}y`,"0")}else m&&i.append(m,p)}}else{if(Fm(e))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');r=Sh,n=null,s=kh,l=e}return i&&s==="text/plain"&&(l=i,i=void 0),{action:n,method:r.toLowerCase(),encType:s,formData:i,body:l}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function Px(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function w3(e,t,r){let n=typeof e=="string"?new URL(e,typeof window>"u"?"server://singlefetch/":window.location.origin):e;return n.pathname==="/"?n.pathname=`_root.${r}`:t&&Za(n.pathname,t)==="/"?n.pathname=`${t.replace(/\/$/,"")}/_root.${r}`:n.pathname=`${n.pathname.replace(/\/$/,"")}.${r}`,n}async function b3(e,t){if(e.id in t)return t[e.id];try{let r=await import(e.module);return t[e.id]=r,r}catch(r){return console.error(`Error loading route module \`${e.module}\`, reloading page...`),console.error(r),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function j3(e){return e==null?!1:e.href==null?e.rel==="preload"&&typeof e.imageSrcSet=="string"&&typeof e.imageSizes=="string":typeof e.rel=="string"&&typeof e.href=="string"}async function S3(e,t,r){let n=await Promise.all(e.map(async s=>{let i=t.routes[s.route.id];if(i){let l=await b3(i,r);return l.links?l.links():[]}return[]}));return C3(n.flat(1).filter(j3).filter(s=>s.rel==="stylesheet"||s.rel==="preload").map(s=>s.rel==="stylesheet"?{...s,rel:"prefetch",as:"style"}:{...s,rel:"prefetch"}))}function Gj(e,t,r,n,s,i){let l=(d,m)=>r[m]?d.route.id!==r[m].route.id:!0,u=(d,m)=>{var f;return r[m].pathname!==d.pathname||((f=r[m].route.path)==null?void 0:f.endsWith("*"))&&r[m].params["*"]!==d.params["*"]};return i==="assets"?t.filter((d,m)=>l(d,m)||u(d,m)):i==="data"?t.filter((d,m)=>{var p;let f=n.routes[d.route.id];if(!f||!f.hasLoader)return!1;if(l(d,m)||u(d,m))return!0;if(d.route.shouldRevalidate){let v=d.route.shouldRevalidate({currentUrl:new URL(s.pathname+s.search+s.hash,window.origin),currentParams:((p=r[0])==null?void 0:p.params)||{},nextUrl:new URL(e,window.origin),nextParams:d.params,defaultShouldRevalidate:!0});if(typeof v=="boolean")return v}return!0}):[]}function k3(e,t,{includeHydrateFallback:r}={}){return _3(e.map(n=>{let s=t.routes[n.route.id];if(!s)return[];let i=[s.module];return s.clientActionModule&&(i=i.concat(s.clientActionModule)),s.clientLoaderModule&&(i=i.concat(s.clientLoaderModule)),r&&s.hydrateFallbackModule&&(i=i.concat(s.hydrateFallbackModule)),s.imports&&(i=i.concat(s.imports)),i}).flat(1))}function _3(e){return[...new Set(e)]}function N3(e){let t={},r=Object.keys(e).sort();for(let n of r)t[n]=e[n];return t}function C3(e,t){let r=new Set;return new Set(t),e.reduce((n,s)=>{let i=JSON.stringify(N3(s));return r.has(i)||(r.add(i),n.push({key:i,link:s})),n},[])}function JC(){let e=y.useContext(iu);return Px(e,"You must render this element inside a <DataRouterContext.Provider> element"),e}function E3(){let e=y.useContext(Mm);return Px(e,"You must render this element inside a <DataRouterStateContext.Provider> element"),e}var Tx=y.createContext(void 0);Tx.displayName="FrameworkContext";function XC(){let e=y.useContext(Tx);return Px(e,"You must render this element inside a <HydratedRouter> element"),e}function A3(e,t){let r=y.useContext(Tx),[n,s]=y.useState(!1),[i,l]=y.useState(!1),{onFocus:u,onBlur:d,onMouseEnter:m,onMouseLeave:f,onTouchStart:p}=t,v=y.useRef(null);y.useEffect(()=>{if(e==="render"&&l(!0),e==="viewport"){let S=N=>{N.forEach(E=>{l(E.isIntersecting)})},j=new IntersectionObserver(S,{threshold:.5});return v.current&&j.observe(v.current),()=>{j.disconnect()}}},[e]),y.useEffect(()=>{if(n){let S=setTimeout(()=>{l(!0)},100);return()=>{clearTimeout(S)}}},[n]);let x=()=>{s(!0)},b=()=>{s(!1),l(!1)};return r?e!=="intent"?[i,v,{}]:[i,v,{onFocus:Hu(u,x),onBlur:Hu(d,b),onMouseEnter:Hu(m,x),onMouseLeave:Hu(f,b),onTouchStart:Hu(p,x)}]:[!1,v,{}]}function Hu(e,t){return r=>{e&&e(r),r.defaultPrevented||t(r)}}function P3({page:e,...t}){let{router:r}=JC(),n=y.useMemo(()=>UC(r.routes,e,r.basename),[r.routes,e,r.basename]);return n?y.createElement(O3,{page:e,matches:n,...t}):null}function T3(e){let{manifest:t,routeModules:r}=XC(),[n,s]=y.useState([]);return y.useEffect(()=>{let i=!1;return S3(e,t,r).then(l=>{i||s(l)}),()=>{i=!0}},[e,t,r]),n}function O3({page:e,matches:t,...r}){let n=uo(),{manifest:s,routeModules:i}=XC(),{basename:l}=JC(),{loaderData:u,matches:d}=E3(),m=y.useMemo(()=>Gj(e,t,d,s,n,"data"),[e,t,d,s,n]),f=y.useMemo(()=>Gj(e,t,d,s,n,"assets"),[e,t,d,s,n]),p=y.useMemo(()=>{if(e===n.pathname+n.search+n.hash)return[];let b=new Set,S=!1;if(t.forEach(N=>{var C;let E=s.routes[N.route.id];!E||!E.hasLoader||(!m.some(I=>I.route.id===N.route.id)&&N.route.id in u&&((C=i[N.route.id])!=null&&C.shouldRevalidate)||E.hasClientLoader?S=!0:b.add(N.route.id))}),b.size===0)return[];let j=w3(e,l,"data");return S&&b.size>0&&j.searchParams.set("_routes",t.filter(N=>b.has(N.route.id)).map(N=>N.route.id).join(",")),[j.pathname+j.search]},[l,u,n,s,m,t,e,i]),v=y.useMemo(()=>k3(f,s),[f,s]),x=T3(f);return y.createElement(y.Fragment,null,p.map(b=>y.createElement("link",{key:b,rel:"prefetch",as:"fetch",href:b,...r})),v.map(b=>y.createElement("link",{key:b,rel:"modulepreload",href:b,...r})),x.map(({key:b,link:S})=>y.createElement("link",{key:b,nonce:r.nonce,...S})))}function I3(...e){return t=>{e.forEach(r=>{typeof r=="function"?r(t):r!=null&&(r.current=t)})}}var QC=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{QC&&(window.__reactRouterVersion="7.9.4")}catch{}function D3({basename:e,children:t,window:r}){let n=y.useRef();n.current==null&&(n.current=wD({window:r,v5Compat:!0}));let s=n.current,[i,l]=y.useState({action:s.action,location:s.location}),u=y.useCallback(d=>{y.startTransition(()=>l(d))},[l]);return y.useLayoutEffect(()=>s.listen(u),[s,u]),y.createElement(c3,{basename:e,children:t,location:i.location,navigationType:i.action,navigator:s})}var ZC=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,eE=y.forwardRef(function({onClick:t,discover:r="render",prefetch:n="none",relative:s,reloadDocument:i,replace:l,state:u,target:d,to:m,preventScrollReset:f,viewTransition:p,...v},x){let{basename:b}=y.useContext(ua),S=typeof m=="string"&&ZC.test(m),j,N=!1;if(typeof m=="string"&&S&&(j=m,QC))try{let L=new URL(window.location.href),H=m.startsWith("//")?new URL(L.protocol+m):new URL(m),le=Za(H.pathname,b);H.origin===L.origin&&le!=null?m=le+H.search+H.hash:N=!0}catch{Oi(!1,`<Link to="${m}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let E=KD(m,{relative:s}),[C,I,T]=A3(n,v),O=F3(m,{replace:l,state:u,target:d,preventScrollReset:f,relative:s,viewTransition:p});function V(L){t&&t(L),L.defaultPrevented||O(L)}let F=y.createElement("a",{...v,...T,href:j||E,onClick:N||i?t:V,ref:I3(x,I),target:d,"data-discover":!S&&r==="render"?"true":void 0});return C&&!S?y.createElement(y.Fragment,null,F,y.createElement(P3,{page:E})):F});eE.displayName="Link";var $3=y.forwardRef(function({"aria-current":t="page",caseSensitive:r=!1,className:n="",end:s=!1,style:i,to:l,viewTransition:u,children:d,...m},f){let p=zd(l,{relative:m.relative}),v=uo(),x=y.useContext(Mm),{navigator:b,basename:S}=y.useContext(ua),j=x!=null&&W3(p)&&u===!0,N=b.encodeLocation?b.encodeLocation(p).pathname:p.pathname,E=v.pathname,C=x&&x.navigation&&x.navigation.location?x.navigation.location.pathname:null;r||(E=E.toLowerCase(),C=C?C.toLowerCase():null,N=N.toLowerCase()),C&&S&&(C=Za(C,S)||C);const I=N!=="/"&&N.endsWith("/")?N.length-1:N.length;let T=E===N||!s&&E.startsWith(N)&&E.charAt(I)==="/",O=C!=null&&(C===N||!s&&C.startsWith(N)&&C.charAt(N.length)==="/"),V={isActive:T,isPending:O,isTransitioning:j},F=T?t:void 0,L;typeof n=="function"?L=n(V):L=[n,T?"active":null,O?"pending":null,j?"transitioning":null].filter(Boolean).join(" ");let H=typeof i=="function"?i(V):i;return y.createElement(eE,{...m,"aria-current":F,className:L,ref:f,style:H,to:l,viewTransition:u},typeof d=="function"?d(V):d)});$3.displayName="NavLink";var R3=y.forwardRef(({discover:e="render",fetcherKey:t,navigate:r,reloadDocument:n,replace:s,state:i,method:l=Sh,action:u,onSubmit:d,relative:m,preventScrollReset:f,viewTransition:p,...v},x)=>{let b=U3(),S=B3(u,{relative:m}),j=l.toLowerCase()==="get"?"get":"post",N=typeof u=="string"&&ZC.test(u),E=C=>{if(d&&d(C),C.defaultPrevented)return;C.preventDefault();let I=C.nativeEvent.submitter,T=(I==null?void 0:I.getAttribute("formmethod"))||l;b(I||C.currentTarget,{fetcherKey:t,method:T,navigate:r,replace:s,state:i,relative:m,preventScrollReset:f,viewTransition:p})};return y.createElement("form",{ref:x,method:j,action:S,onSubmit:n?d:E,...v,"data-discover":!N&&e==="render"?"true":void 0})});R3.displayName="Form";function M3(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function tE(e){let t=y.useContext(iu);return Zr(t,M3(e)),t}function F3(e,{target:t,replace:r,state:n,preventScrollReset:s,relative:i,viewTransition:l}={}){let u=da(),d=uo(),m=zd(e,{relative:i});return y.useCallback(f=>{if(p3(f,t)){f.preventDefault();let p=r!==void 0?r:jd(d)===jd(m);u(e,{replace:p,state:n,preventScrollReset:s,relative:i,viewTransition:l})}},[d,u,m,r,n,t,e,s,i,l])}function Lm(e){Oi(typeof URLSearchParams<"u","You cannot use the `useSearchParams` hook in a browser that does not support the URLSearchParams API. If you need to support Internet Explorer 11, we recommend you load a polyfill such as https://github.com/ungap/url-search-params.");let t=y.useRef(av(e)),r=y.useRef(!1),n=uo(),s=y.useMemo(()=>g3(n.search,r.current?null:t.current),[n.search]),i=da(),l=y.useCallback((u,d)=>{const m=av(typeof u=="function"?u(new URLSearchParams(s)):u);r.current=!0,i("?"+m,d)},[i,s]);return[s,l]}var L3=0,z3=()=>`__${String(++L3)}__`;function U3(){let{router:e}=tE("useSubmit"),{basename:t}=y.useContext(ua),r=s3();return y.useCallback(async(n,s={})=>{let{action:i,method:l,encType:u,formData:d,body:m}=x3(n,t);if(s.navigate===!1){let f=s.fetcherKey||z3();await e.fetch(f,r,s.action||i,{preventScrollReset:s.preventScrollReset,formData:d,body:m,formMethod:s.method||l,formEncType:s.encType||u,flushSync:s.flushSync})}else await e.navigate(s.action||i,{preventScrollReset:s.preventScrollReset,formData:d,body:m,formMethod:s.method||l,formEncType:s.encType||u,replace:s.replace,state:s.state,fromRouteId:r,flushSync:s.flushSync,viewTransition:s.viewTransition})},[e,t,r])}function B3(e,{relative:t}={}){let{basename:r}=y.useContext(ua),n=y.useContext(Ia);Zr(n,"useFormAction must be used inside a RouteContext");let[s]=n.matches.slice(-1),i={...zd(e||".",{relative:t})},l=uo();if(e==null){i.search=l.search;let u=new URLSearchParams(i.search),d=u.getAll("index");if(d.some(f=>f==="")){u.delete("index"),d.filter(p=>p).forEach(p=>u.append("index",p));let f=u.toString();i.search=f?`?${f}`:""}}return(!e||e===".")&&s.route.index&&(i.search=i.search?i.search.replace(/^\?/,"?index&"):"?index"),r!=="/"&&(i.pathname=i.pathname==="/"?r:Ja([r,i.pathname])),jd(i)}function W3(e,{relative:t}={}){let r=y.useContext(qC);Zr(r!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:n}=tE("useViewTransitionState"),s=zd(e,{relative:t});if(!r.isTransitioning)return!1;let i=Za(r.currentLocation.pathname,n)||r.currentLocation.pathname,l=Za(r.nextLocation.pathname,n)||r.nextLocation.pathname;return Dh(s.pathname,l)!=null||Dh(s.pathname,i)!=null}var Ox=zC();const V3="modulepreload",q3=function(e){return"/feature-voting-app/"+e},Yj={},Ud=function(t,r,n){let s=Promise.resolve();if(r&&r.length>0){let l=function(m){return Promise.all(m.map(f=>Promise.resolve(f).then(p=>({status:"fulfilled",value:p}),p=>({status:"rejected",reason:p}))))};document.getElementsByTagName("link");const u=document.querySelector("meta[property=csp-nonce]"),d=(u==null?void 0:u.nonce)||(u==null?void 0:u.getAttribute("nonce"));s=l(r.map(m=>{if(m=q3(m),m in Yj)return;Yj[m]=!0;const f=m.endsWith(".css"),p=f?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${m}"]${p}`))return;const v=document.createElement("link");if(v.rel=f?"stylesheet":V3,f||(v.as="script"),v.crossOrigin="",v.href=m,d&&v.setAttribute("nonce",d),document.head.appendChild(v),f)return new Promise((x,b)=>{v.addEventListener("load",x),v.addEventListener("error",()=>b(new Error(`Unable to preload CSS for ${m}`)))})}))}function i(l){const u=new Event("vite:preloadError",{cancelable:!0});if(u.payload=l,window.dispatchEvent(u),!u.defaultPrevented)throw l}return s.then(l=>{for(const u of l||[])u.status==="rejected"&&i(u.reason);return t().catch(i)})},H3=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...r)=>Ud(async()=>{const{default:n}=await Promise.resolve().then(()=>ou);return{default:n}},[]).then(({default:n})=>n(...r)):t=fetch,(...r)=>t(...r)};class Ix extends Error{constructor(t,r="FunctionsError",n){super(t),this.name=r,this.context=n}}class Jj extends Ix{constructor(t){super("Failed to send a request to the Edge Function","FunctionsFetchError",t)}}class Xj extends Ix{constructor(t){super("Relay Error invoking the Edge Function","FunctionsRelayError",t)}}class Qj extends Ix{constructor(t){super("Edge Function returned a non-2xx status code","FunctionsHttpError",t)}}var ov;(function(e){e.Any="any",e.ApNortheast1="ap-northeast-1",e.ApNortheast2="ap-northeast-2",e.ApSouth1="ap-south-1",e.ApSoutheast1="ap-southeast-1",e.ApSoutheast2="ap-southeast-2",e.CaCentral1="ca-central-1",e.EuCentral1="eu-central-1",e.EuWest1="eu-west-1",e.EuWest2="eu-west-2",e.EuWest3="eu-west-3",e.SaEast1="sa-east-1",e.UsEast1="us-east-1",e.UsWest1="us-west-1",e.UsWest2="us-west-2"})(ov||(ov={}));var K3=function(e,t,r,n){function s(i){return i instanceof r?i:new r(function(l){l(i)})}return new(r||(r=Promise))(function(i,l){function u(f){try{m(n.next(f))}catch(p){l(p)}}function d(f){try{m(n.throw(f))}catch(p){l(p)}}function m(f){f.done?i(f.value):s(f.value).then(u,d)}m((n=n.apply(e,t||[])).next())})};class G3{constructor(t,{headers:r={},customFetch:n,region:s=ov.Any}={}){this.url=t,this.headers=r,this.region=s,this.fetch=H3(n)}setAuth(t){this.headers.Authorization=`Bearer ${t}`}invoke(t){return K3(this,arguments,void 0,function*(r,n={}){var s;try{const{headers:i,method:l,body:u,signal:d}=n;let m={},{region:f}=n;f||(f=this.region);const p=new URL(`${this.url}/${r}`);f&&f!=="any"&&(m["x-region"]=f,p.searchParams.set("forceFunctionRegion",f));let v;u&&(i&&!Object.prototype.hasOwnProperty.call(i,"Content-Type")||!i)&&(typeof Blob<"u"&&u instanceof Blob||u instanceof ArrayBuffer?(m["Content-Type"]="application/octet-stream",v=u):typeof u=="string"?(m["Content-Type"]="text/plain",v=u):typeof FormData<"u"&&u instanceof FormData?v=u:(m["Content-Type"]="application/json",v=JSON.stringify(u)));const x=yield this.fetch(p.toString(),{method:l||"POST",headers:Object.assign(Object.assign(Object.assign({},m),this.headers),i),body:v,signal:d}).catch(N=>{throw N.name==="AbortError"?N:new Jj(N)}),b=x.headers.get("x-relay-error");if(b&&b==="true")throw new Xj(x);if(!x.ok)throw new Qj(x);let S=((s=x.headers.get("Content-Type"))!==null&&s!==void 0?s:"text/plain").split(";")[0].trim(),j;return S==="application/json"?j=yield x.json():S==="application/octet-stream"?j=yield x.blob():S==="text/event-stream"?j=x:S==="multipart/form-data"?j=yield x.formData():j=yield x.text(),{data:j,error:null,response:x}}catch(i){return i instanceof Error&&i.name==="AbortError"?{data:null,error:new Jj(i)}:{data:null,error:i,response:i instanceof Qj||i instanceof Xj?i.context:void 0}}})}}var Jn={},yc={},vc={},xc={},wc={},bc={},Y3=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},Hc=Y3();const J3=Hc.fetch,rE=Hc.fetch.bind(Hc),nE=Hc.Headers,X3=Hc.Request,Q3=Hc.Response,ou=Object.freeze(Object.defineProperty({__proto__:null,Headers:nE,Request:X3,Response:Q3,default:rE,fetch:J3},Symbol.toStringTag,{value:"Module"})),Z3=cD(ou);var th={},Zj;function sE(){if(Zj)return th;Zj=1,Object.defineProperty(th,"__esModule",{value:!0});class e extends Error{constructor(r){super(r.message),this.name="PostgrestError",this.details=r.details,this.hint=r.hint,this.code=r.code}}return th.default=e,th}var eS;function iE(){if(eS)return bc;eS=1;var e=bc&&bc.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(bc,"__esModule",{value:!0});const t=e(Z3),r=e(sE());class n{constructor(i){var l,u;this.shouldThrowOnError=!1,this.method=i.method,this.url=i.url,this.headers=new Headers(i.headers),this.schema=i.schema,this.body=i.body,this.shouldThrowOnError=(l=i.shouldThrowOnError)!==null&&l!==void 0?l:!1,this.signal=i.signal,this.isMaybeSingle=(u=i.isMaybeSingle)!==null&&u!==void 0?u:!1,i.fetch?this.fetch=i.fetch:typeof fetch>"u"?this.fetch=t.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(i,l){return this.headers=new Headers(this.headers),this.headers.set(i,l),this}then(i,l){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const u=this.fetch;let d=u(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async m=>{var f,p,v,x;let b=null,S=null,j=null,N=m.status,E=m.statusText;if(m.ok){if(this.method!=="HEAD"){const O=await m.text();O===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((f=this.headers.get("Accept"))===null||f===void 0)&&f.includes("application/vnd.pgrst.plan+text"))?S=O:S=JSON.parse(O))}const I=(p=this.headers.get("Prefer"))===null||p===void 0?void 0:p.match(/count=(exact|planned|estimated)/),T=(v=m.headers.get("content-range"))===null||v===void 0?void 0:v.split("/");I&&T&&T.length>1&&(j=parseInt(T[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(S)&&(S.length>1?(b={code:"PGRST116",details:`Results contain ${S.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},S=null,j=null,N=406,E="Not Acceptable"):S.length===1?S=S[0]:S=null)}else{const I=await m.text();try{b=JSON.parse(I),Array.isArray(b)&&m.status===404&&(S=[],b=null,N=200,E="OK")}catch{m.status===404&&I===""?(N=204,E="No Content"):b={message:I}}if(b&&this.isMaybeSingle&&(!((x=b==null?void 0:b.details)===null||x===void 0)&&x.includes("0 rows"))&&(b=null,N=200,E="OK"),b&&this.shouldThrowOnError)throw new r.default(b)}return{error:b,data:S,count:j,status:N,statusText:E}});return this.shouldThrowOnError||(d=d.catch(m=>{var f,p,v;return{error:{message:`${(f=m==null?void 0:m.name)!==null&&f!==void 0?f:"FetchError"}: ${m==null?void 0:m.message}`,details:`${(p=m==null?void 0:m.stack)!==null&&p!==void 0?p:""}`,hint:"",code:`${(v=m==null?void 0:m.code)!==null&&v!==void 0?v:""}`},data:null,count:null,status:0,statusText:""}})),d.then(i,l)}returns(){return this}overrideTypes(){return this}}return bc.default=n,bc}var tS;function aE(){if(tS)return wc;tS=1;var e=wc&&wc.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(wc,"__esModule",{value:!0});const t=e(iE());class r extends t.default{select(s){let i=!1;const l=(s??"*").split("").map(u=>/\s/.test(u)&&!i?"":(u==='"'&&(i=!i),u)).join("");return this.url.searchParams.set("select",l),this.headers.append("Prefer","return=representation"),this}order(s,{ascending:i=!0,nullsFirst:l,foreignTable:u,referencedTable:d=u}={}){const m=d?`${d}.order`:"order",f=this.url.searchParams.get(m);return this.url.searchParams.set(m,`${f?`${f},`:""}${s}.${i?"asc":"desc"}${l===void 0?"":l?".nullsfirst":".nullslast"}`),this}limit(s,{foreignTable:i,referencedTable:l=i}={}){const u=typeof l>"u"?"limit":`${l}.limit`;return this.url.searchParams.set(u,`${s}`),this}range(s,i,{foreignTable:l,referencedTable:u=l}={}){const d=typeof u>"u"?"offset":`${u}.offset`,m=typeof u>"u"?"limit":`${u}.limit`;return this.url.searchParams.set(d,`${s}`),this.url.searchParams.set(m,`${i-s+1}`),this}abortSignal(s){return this.signal=s,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:s=!1,verbose:i=!1,settings:l=!1,buffers:u=!1,wal:d=!1,format:m="text"}={}){var f;const p=[s?"analyze":null,i?"verbose":null,l?"settings":null,u?"buffers":null,d?"wal":null].filter(Boolean).join("|"),v=(f=this.headers.get("Accept"))!==null&&f!==void 0?f:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${m}; for="${v}"; options=${p};`),m==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(s){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${s}`),this}}return wc.default=r,wc}var rS;function Dx(){if(rS)return xc;rS=1;var e=xc&&xc.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(xc,"__esModule",{value:!0});const t=e(aE());class r extends t.default{eq(s,i){return this.url.searchParams.append(s,`eq.${i}`),this}neq(s,i){return this.url.searchParams.append(s,`neq.${i}`),this}gt(s,i){return this.url.searchParams.append(s,`gt.${i}`),this}gte(s,i){return this.url.searchParams.append(s,`gte.${i}`),this}lt(s,i){return this.url.searchParams.append(s,`lt.${i}`),this}lte(s,i){return this.url.searchParams.append(s,`lte.${i}`),this}like(s,i){return this.url.searchParams.append(s,`like.${i}`),this}likeAllOf(s,i){return this.url.searchParams.append(s,`like(all).{${i.join(",")}}`),this}likeAnyOf(s,i){return this.url.searchParams.append(s,`like(any).{${i.join(",")}}`),this}ilike(s,i){return this.url.searchParams.append(s,`ilike.${i}`),this}ilikeAllOf(s,i){return this.url.searchParams.append(s,`ilike(all).{${i.join(",")}}`),this}ilikeAnyOf(s,i){return this.url.searchParams.append(s,`ilike(any).{${i.join(",")}}`),this}is(s,i){return this.url.searchParams.append(s,`is.${i}`),this}in(s,i){const l=Array.from(new Set(i)).map(u=>typeof u=="string"&&new RegExp("[,()]").test(u)?`"${u}"`:`${u}`).join(",");return this.url.searchParams.append(s,`in.(${l})`),this}contains(s,i){return typeof i=="string"?this.url.searchParams.append(s,`cs.${i}`):Array.isArray(i)?this.url.searchParams.append(s,`cs.{${i.join(",")}}`):this.url.searchParams.append(s,`cs.${JSON.stringify(i)}`),this}containedBy(s,i){return typeof i=="string"?this.url.searchParams.append(s,`cd.${i}`):Array.isArray(i)?this.url.searchParams.append(s,`cd.{${i.join(",")}}`):this.url.searchParams.append(s,`cd.${JSON.stringify(i)}`),this}rangeGt(s,i){return this.url.searchParams.append(s,`sr.${i}`),this}rangeGte(s,i){return this.url.searchParams.append(s,`nxl.${i}`),this}rangeLt(s,i){return this.url.searchParams.append(s,`sl.${i}`),this}rangeLte(s,i){return this.url.searchParams.append(s,`nxr.${i}`),this}rangeAdjacent(s,i){return this.url.searchParams.append(s,`adj.${i}`),this}overlaps(s,i){return typeof i=="string"?this.url.searchParams.append(s,`ov.${i}`):this.url.searchParams.append(s,`ov.{${i.join(",")}}`),this}textSearch(s,i,{config:l,type:u}={}){let d="";u==="plain"?d="pl":u==="phrase"?d="ph":u==="websearch"&&(d="w");const m=l===void 0?"":`(${l})`;return this.url.searchParams.append(s,`${d}fts${m}.${i}`),this}match(s){return Object.entries(s).forEach(([i,l])=>{this.url.searchParams.append(i,`eq.${l}`)}),this}not(s,i,l){return this.url.searchParams.append(s,`not.${i}.${l}`),this}or(s,{foreignTable:i,referencedTable:l=i}={}){const u=l?`${l}.or`:"or";return this.url.searchParams.append(u,`(${s})`),this}filter(s,i,l){return this.url.searchParams.append(s,`${i}.${l}`),this}}return xc.default=r,xc}var nS;function oE(){if(nS)return vc;nS=1;var e=vc&&vc.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(vc,"__esModule",{value:!0});const t=e(Dx());class r{constructor(s,{headers:i={},schema:l,fetch:u}){this.url=s,this.headers=new Headers(i),this.schema=l,this.fetch=u}select(s,i){const{head:l=!1,count:u}=i??{},d=l?"HEAD":"GET";let m=!1;const f=(s??"*").split("").map(p=>/\s/.test(p)&&!m?"":(p==='"'&&(m=!m),p)).join("");return this.url.searchParams.set("select",f),u&&this.headers.append("Prefer",`count=${u}`),new t.default({method:d,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(s,{count:i,defaultToNull:l=!0}={}){var u;const d="POST";if(i&&this.headers.append("Prefer",`count=${i}`),l||this.headers.append("Prefer","missing=default"),Array.isArray(s)){const m=s.reduce((f,p)=>f.concat(Object.keys(p)),[]);if(m.length>0){const f=[...new Set(m)].map(p=>`"${p}"`);this.url.searchParams.set("columns",f.join(","))}}return new t.default({method:d,url:this.url,headers:this.headers,schema:this.schema,body:s,fetch:(u=this.fetch)!==null&&u!==void 0?u:fetch})}upsert(s,{onConflict:i,ignoreDuplicates:l=!1,count:u,defaultToNull:d=!0}={}){var m;const f="POST";if(this.headers.append("Prefer",`resolution=${l?"ignore":"merge"}-duplicates`),i!==void 0&&this.url.searchParams.set("on_conflict",i),u&&this.headers.append("Prefer",`count=${u}`),d||this.headers.append("Prefer","missing=default"),Array.isArray(s)){const p=s.reduce((v,x)=>v.concat(Object.keys(x)),[]);if(p.length>0){const v=[...new Set(p)].map(x=>`"${x}"`);this.url.searchParams.set("columns",v.join(","))}}return new t.default({method:f,url:this.url,headers:this.headers,schema:this.schema,body:s,fetch:(m=this.fetch)!==null&&m!==void 0?m:fetch})}update(s,{count:i}={}){var l;const u="PATCH";return i&&this.headers.append("Prefer",`count=${i}`),new t.default({method:u,url:this.url,headers:this.headers,schema:this.schema,body:s,fetch:(l=this.fetch)!==null&&l!==void 0?l:fetch})}delete({count:s}={}){var i;const l="DELETE";return s&&this.headers.append("Prefer",`count=${s}`),new t.default({method:l,url:this.url,headers:this.headers,schema:this.schema,fetch:(i=this.fetch)!==null&&i!==void 0?i:fetch})}}return vc.default=r,vc}var sS;function e5(){if(sS)return yc;sS=1;var e=yc&&yc.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(yc,"__esModule",{value:!0});const t=e(oE()),r=e(Dx());class n{constructor(i,{headers:l={},schema:u,fetch:d}={}){this.url=i,this.headers=new Headers(l),this.schemaName=u,this.fetch=d}from(i){const l=new URL(`${this.url}/${i}`);return new t.default(l,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(i){return new n(this.url,{headers:this.headers,schema:i,fetch:this.fetch})}rpc(i,l={},{head:u=!1,get:d=!1,count:m}={}){var f;let p;const v=new URL(`${this.url}/rpc/${i}`);let x;u||d?(p=u?"HEAD":"GET",Object.entries(l).filter(([S,j])=>j!==void 0).map(([S,j])=>[S,Array.isArray(j)?`{${j.join(",")}}`:`${j}`]).forEach(([S,j])=>{v.searchParams.append(S,j)})):(p="POST",x=l);const b=new Headers(this.headers);return m&&b.set("Prefer",`count=${m}`),new r.default({method:p,url:v,headers:b,schema:this.schemaName,body:x,fetch:(f=this.fetch)!==null&&f!==void 0?f:fetch})}}return yc.default=n,yc}var iS;function t5(){if(iS)return Jn;iS=1;var e=Jn&&Jn.__importDefault||function(u){return u&&u.__esModule?u:{default:u}};Object.defineProperty(Jn,"__esModule",{value:!0}),Jn.PostgrestError=Jn.PostgrestBuilder=Jn.PostgrestTransformBuilder=Jn.PostgrestFilterBuilder=Jn.PostgrestQueryBuilder=Jn.PostgrestClient=void 0;const t=e(e5());Jn.PostgrestClient=t.default;const r=e(oE());Jn.PostgrestQueryBuilder=r.default;const n=e(Dx());Jn.PostgrestFilterBuilder=n.default;const s=e(aE());Jn.PostgrestTransformBuilder=s.default;const i=e(iE());Jn.PostgrestBuilder=i.default;const l=e(sE());return Jn.PostgrestError=l.default,Jn.default={PostgrestClient:t.default,PostgrestQueryBuilder:r.default,PostgrestFilterBuilder:n.default,PostgrestTransformBuilder:s.default,PostgrestBuilder:i.default,PostgrestError:l.default},Jn}var r5=t5();const n5=ca(r5),{PostgrestClient:s5,PostgrestQueryBuilder:mee,PostgrestFilterBuilder:pee,PostgrestTransformBuilder:gee,PostgrestBuilder:yee,PostgrestError:vee}=n5;class i5{static detectEnvironment(){var t;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((t=navigator.userAgent)===null||t===void 0)&&t.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const r=process.versions;if(r&&r.node){const n=r.node,s=parseInt(n.replace(/^v/,"").split(".")[0]);return s>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${s} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${s} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const t=this.detectEnvironment();if(t.constructor)return t.constructor;let r=t.error||"WebSocket not supported in this environment.";throw t.workaround&&(r+=`

Suggested solution: ${t.workaround}`),new Error(r)}static createWebSocket(t,r){const n=this.getWebSocketConstructor();return new n(t,r)}static isWebSocketSupported(){try{const t=this.detectEnvironment();return t.type==="native"||t.type==="ws"}catch{return!1}}}const a5="2.74.0",o5=`realtime-js/${a5}`,l5="1.0.0",lv=1e4,c5=1e3,u5=100;var md;(function(e){e[e.connecting=0]="connecting",e[e.open=1]="open",e[e.closing=2]="closing",e[e.closed=3]="closed"})(md||(md={}));var Mn;(function(e){e.closed="closed",e.errored="errored",e.joined="joined",e.joining="joining",e.leaving="leaving"})(Mn||(Mn={}));var Zi;(function(e){e.close="phx_close",e.error="phx_error",e.join="phx_join",e.reply="phx_reply",e.leave="phx_leave",e.access_token="access_token"})(Zi||(Zi={}));var cv;(function(e){e.websocket="websocket"})(cv||(cv={}));var bl;(function(e){e.Connecting="connecting",e.Open="open",e.Closing="closing",e.Closed="closed"})(bl||(bl={}));class d5{constructor(){this.HEADER_LENGTH=1}decode(t,r){return t.constructor===ArrayBuffer?r(this._binaryDecode(t)):r(typeof t=="string"?JSON.parse(t):{})}_binaryDecode(t){const r=new DataView(t),n=new TextDecoder;return this._decodeBroadcast(t,r,n)}_decodeBroadcast(t,r,n){const s=r.getUint8(1),i=r.getUint8(2);let l=this.HEADER_LENGTH+2;const u=n.decode(t.slice(l,l+s));l=l+s;const d=n.decode(t.slice(l,l+i));l=l+i;const m=JSON.parse(n.decode(t.slice(l,t.byteLength)));return{ref:null,topic:u,event:d,payload:m}}}class lE{constructor(t,r){this.callback=t,this.timerCalc=r,this.timer=void 0,this.tries=0,this.callback=t,this.timerCalc=r}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var Ir;(function(e){e.abstime="abstime",e.bool="bool",e.date="date",e.daterange="daterange",e.float4="float4",e.float8="float8",e.int2="int2",e.int4="int4",e.int4range="int4range",e.int8="int8",e.int8range="int8range",e.json="json",e.jsonb="jsonb",e.money="money",e.numeric="numeric",e.oid="oid",e.reltime="reltime",e.text="text",e.time="time",e.timestamp="timestamp",e.timestamptz="timestamptz",e.timetz="timetz",e.tsrange="tsrange",e.tstzrange="tstzrange"})(Ir||(Ir={}));const aS=(e,t,r={})=>{var n;const s=(n=r.skipTypes)!==null&&n!==void 0?n:[];return t?Object.keys(t).reduce((i,l)=>(i[l]=f5(l,e,t,s),i),{}):{}},f5=(e,t,r,n)=>{const s=t.find(u=>u.name===e),i=s==null?void 0:s.type,l=r[e];return i&&!n.includes(i)?cE(i,l):uv(l)},cE=(e,t)=>{if(e.charAt(0)==="_"){const r=e.slice(1,e.length);return g5(t,r)}switch(e){case Ir.bool:return h5(t);case Ir.float4:case Ir.float8:case Ir.int2:case Ir.int4:case Ir.int8:case Ir.numeric:case Ir.oid:return m5(t);case Ir.json:case Ir.jsonb:return p5(t);case Ir.timestamp:return y5(t);case Ir.abstime:case Ir.date:case Ir.daterange:case Ir.int4range:case Ir.int8range:case Ir.money:case Ir.reltime:case Ir.text:case Ir.time:case Ir.timestamptz:case Ir.timetz:case Ir.tsrange:case Ir.tstzrange:return uv(t);default:return uv(t)}},uv=e=>e,h5=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},m5=e=>{if(typeof e=="string"){const t=parseFloat(e);if(!Number.isNaN(t))return t}return e},p5=e=>{if(typeof e=="string")try{return JSON.parse(e)}catch(t){return console.log(`JSON parse error: ${t}`),e}return e},g5=(e,t)=>{if(typeof e!="string")return e;const r=e.length-1,n=e[r];if(e[0]==="{"&&n==="}"){let i;const l=e.slice(1,r);try{i=JSON.parse("["+l+"]")}catch{i=l?l.split(","):[]}return i.map(u=>cE(t,u))}return e},y5=e=>typeof e=="string"?e.replace(" ","T"):e,uE=e=>{let t=e;return t=t.replace(/^ws/i,"http"),t=t.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),t.replace(/\/+$/,"")+"/api/broadcast"};class dy{constructor(t,r,n={},s=lv){this.channel=t,this.event=r,this.payload=n,this.timeout=s,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(t){this.timeout=t,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(t){this.payload=Object.assign(Object.assign({},this.payload),t)}receive(t,r){var n;return this._hasReceived(t)&&r((n=this.receivedResp)===null||n===void 0?void 0:n.response),this.recHooks.push({status:t,callback:r}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const t=r=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=r,this._matchReceive(r)};this.channel._on(this.refEvent,{},t),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(t,r){this.refEvent&&this.channel._trigger(this.refEvent,{status:t,response:r})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:t,response:r}){this.recHooks.filter(n=>n.status===t).forEach(n=>n.callback(r))}_hasReceived(t){return this.receivedResp&&this.receivedResp.status===t}}var oS;(function(e){e.SYNC="sync",e.JOIN="join",e.LEAVE="leave"})(oS||(oS={}));class pd{constructor(t,r){this.channel=t,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const n=(r==null?void 0:r.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(n.state,{},s=>{const{onJoin:i,onLeave:l,onSync:u}=this.caller;this.joinRef=this.channel._joinRef(),this.state=pd.syncState(this.state,s,i,l),this.pendingDiffs.forEach(d=>{this.state=pd.syncDiff(this.state,d,i,l)}),this.pendingDiffs=[],u()}),this.channel._on(n.diff,{},s=>{const{onJoin:i,onLeave:l,onSync:u}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(s):(this.state=pd.syncDiff(this.state,s,i,l),u())}),this.onJoin((s,i,l)=>{this.channel._trigger("presence",{event:"join",key:s,currentPresences:i,newPresences:l})}),this.onLeave((s,i,l)=>{this.channel._trigger("presence",{event:"leave",key:s,currentPresences:i,leftPresences:l})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(t,r,n,s){const i=this.cloneDeep(t),l=this.transformState(r),u={},d={};return this.map(i,(m,f)=>{l[m]||(d[m]=f)}),this.map(l,(m,f)=>{const p=i[m];if(p){const v=f.map(j=>j.presence_ref),x=p.map(j=>j.presence_ref),b=f.filter(j=>x.indexOf(j.presence_ref)<0),S=p.filter(j=>v.indexOf(j.presence_ref)<0);b.length>0&&(u[m]=b),S.length>0&&(d[m]=S)}else u[m]=f}),this.syncDiff(i,{joins:u,leaves:d},n,s)}static syncDiff(t,r,n,s){const{joins:i,leaves:l}={joins:this.transformState(r.joins),leaves:this.transformState(r.leaves)};return n||(n=()=>{}),s||(s=()=>{}),this.map(i,(u,d)=>{var m;const f=(m=t[u])!==null&&m!==void 0?m:[];if(t[u]=this.cloneDeep(d),f.length>0){const p=t[u].map(x=>x.presence_ref),v=f.filter(x=>p.indexOf(x.presence_ref)<0);t[u].unshift(...v)}n(u,f,d)}),this.map(l,(u,d)=>{let m=t[u];if(!m)return;const f=d.map(p=>p.presence_ref);m=m.filter(p=>f.indexOf(p.presence_ref)<0),t[u]=m,s(u,m,d),m.length===0&&delete t[u]}),t}static map(t,r){return Object.getOwnPropertyNames(t).map(n=>r(n,t[n]))}static transformState(t){return t=this.cloneDeep(t),Object.getOwnPropertyNames(t).reduce((r,n)=>{const s=t[n];return"metas"in s?r[n]=s.metas.map(i=>(i.presence_ref=i.phx_ref,delete i.phx_ref,delete i.phx_ref_prev,i)):r[n]=s,r},{})}static cloneDeep(t){return JSON.parse(JSON.stringify(t))}onJoin(t){this.caller.onJoin=t}onLeave(t){this.caller.onLeave=t}onSync(t){this.caller.onSync=t}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var lS;(function(e){e.ALL="*",e.INSERT="INSERT",e.UPDATE="UPDATE",e.DELETE="DELETE"})(lS||(lS={}));var gd;(function(e){e.BROADCAST="broadcast",e.PRESENCE="presence",e.POSTGRES_CHANGES="postgres_changes",e.SYSTEM="system"})(gd||(gd={}));var qa;(function(e){e.SUBSCRIBED="SUBSCRIBED",e.TIMED_OUT="TIMED_OUT",e.CLOSED="CLOSED",e.CHANNEL_ERROR="CHANNEL_ERROR"})(qa||(qa={}));class $x{constructor(t,r={config:{}},n){var s,i;if(this.topic=t,this.params=r,this.socket=n,this.bindings={},this.state=Mn.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=t.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},r.config),this.timeout=this.socket.timeout,this.joinPush=new dy(this,Zi.join,this.params,this.timeout),this.rejoinTimer=new lE(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Mn.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(l=>l.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Mn.closed,this.socket._remove(this)}),this._onError(l=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,l),this.state=Mn.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Mn.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",l=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,l),this.state=Mn.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Zi.reply,{},(l,u)=>{this._trigger(this._replyEventName(u),l)}),this.presence=new pd(this),this.broadcastEndpointURL=uE(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((i=(s=this.params.config)===null||s===void 0?void 0:s.broadcast)===null||i===void 0)&&i.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(t,r=this.timeout){var n,s,i;if(this.socket.isConnected()||this.socket.connect(),this.state==Mn.closed){const{config:{broadcast:l,presence:u,private:d}}=this.params,m=(s=(n=this.bindings.postgres_changes)===null||n===void 0?void 0:n.map(x=>x.filter))!==null&&s!==void 0?s:[],f=!!this.bindings[gd.PRESENCE]&&this.bindings[gd.PRESENCE].length>0||((i=this.params.config.presence)===null||i===void 0?void 0:i.enabled)===!0,p={},v={broadcast:l,presence:Object.assign(Object.assign({},u),{enabled:f}),postgres_changes:m,private:d};this.socket.accessTokenValue&&(p.access_token=this.socket.accessTokenValue),this._onError(x=>t==null?void 0:t(qa.CHANNEL_ERROR,x)),this._onClose(()=>t==null?void 0:t(qa.CLOSED)),this.updateJoinPayload(Object.assign({config:v},p)),this.joinedOnce=!0,this._rejoin(r),this.joinPush.receive("ok",async({postgres_changes:x})=>{var b;if(this.socket.setAuth(),x===void 0){t==null||t(qa.SUBSCRIBED);return}else{const S=this.bindings.postgres_changes,j=(b=S==null?void 0:S.length)!==null&&b!==void 0?b:0,N=[];for(let E=0;E<j;E++){const C=S[E],{filter:{event:I,schema:T,table:O,filter:V}}=C,F=x&&x[E];if(F&&F.event===I&&F.schema===T&&F.table===O&&F.filter===V)N.push(Object.assign(Object.assign({},C),{id:F.id}));else{this.unsubscribe(),this.state=Mn.errored,t==null||t(qa.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=N,t&&t(qa.SUBSCRIBED);return}}).receive("error",x=>{this.state=Mn.errored,t==null||t(qa.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(x).join(", ")||"error")))}).receive("timeout",()=>{t==null||t(qa.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(t,r={}){return await this.send({type:"presence",event:"track",payload:t},r.timeout||this.timeout)}async untrack(t={}){return await this.send({type:"presence",event:"untrack"},t)}on(t,r,n){return this.state===Mn.joined&&t===gd.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(t,r,n)}async send(t,r={}){var n,s;if(!this._canPush()&&t.type==="broadcast"){const{event:i,payload:l}=t,d={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:i,payload:l,private:this.private}]})};try{const m=await this._fetchWithTimeout(this.broadcastEndpointURL,d,(n=r.timeout)!==null&&n!==void 0?n:this.timeout);return await((s=m.body)===null||s===void 0?void 0:s.cancel()),m.ok?"ok":"error"}catch(m){return m.name==="AbortError"?"timed out":"error"}}else return new Promise(i=>{var l,u,d;const m=this._push(t.type,t,r.timeout||this.timeout);t.type==="broadcast"&&!(!((d=(u=(l=this.params)===null||l===void 0?void 0:l.config)===null||u===void 0?void 0:u.broadcast)===null||d===void 0)&&d.ack)&&i("ok"),m.receive("ok",()=>i("ok")),m.receive("error",()=>i("error")),m.receive("timeout",()=>i("timed out"))})}updateJoinPayload(t){this.joinPush.updatePayload(t)}unsubscribe(t=this.timeout){this.state=Mn.leaving;const r=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Zi.close,"leave",this._joinRef())};this.joinPush.destroy();let n=null;return new Promise(s=>{n=new dy(this,Zi.leave,{},t),n.receive("ok",()=>{r(),s("ok")}).receive("timeout",()=>{r(),s("timed out")}).receive("error",()=>{s("error")}),n.send(),this._canPush()||n.trigger("ok",{})}).finally(()=>{n==null||n.destroy()})}teardown(){this.pushBuffer.forEach(t=>t.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=Mn.closed,this.bindings={}}async _fetchWithTimeout(t,r,n){const s=new AbortController,i=setTimeout(()=>s.abort(),n),l=await this.socket.fetch(t,Object.assign(Object.assign({},r),{signal:s.signal}));return clearTimeout(i),l}_push(t,r,n=this.timeout){if(!this.joinedOnce)throw`tried to push '${t}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let s=new dy(this,t,r,n);return this._canPush()?s.send():this._addToPushBuffer(s),s}_addToPushBuffer(t){if(t.startTimeout(),this.pushBuffer.push(t),this.pushBuffer.length>u5){const r=this.pushBuffer.shift();r&&(r.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${r.event}`,r.payload))}}_onMessage(t,r,n){return r}_isMember(t){return this.topic===t}_joinRef(){return this.joinPush.ref}_trigger(t,r,n){var s,i;const l=t.toLocaleLowerCase(),{close:u,error:d,leave:m,join:f}=Zi;if(n&&[u,d,m,f].indexOf(l)>=0&&n!==this._joinRef())return;let v=this._onMessage(l,r,n);if(r&&!v)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(l)?(s=this.bindings.postgres_changes)===null||s===void 0||s.filter(x=>{var b,S,j;return((b=x.filter)===null||b===void 0?void 0:b.event)==="*"||((j=(S=x.filter)===null||S===void 0?void 0:S.event)===null||j===void 0?void 0:j.toLocaleLowerCase())===l}).map(x=>x.callback(v,n)):(i=this.bindings[l])===null||i===void 0||i.filter(x=>{var b,S,j,N,E,C;if(["broadcast","presence","postgres_changes"].includes(l))if("id"in x){const I=x.id,T=(b=x.filter)===null||b===void 0?void 0:b.event;return I&&((S=r.ids)===null||S===void 0?void 0:S.includes(I))&&(T==="*"||(T==null?void 0:T.toLocaleLowerCase())===((j=r.data)===null||j===void 0?void 0:j.type.toLocaleLowerCase()))}else{const I=(E=(N=x==null?void 0:x.filter)===null||N===void 0?void 0:N.event)===null||E===void 0?void 0:E.toLocaleLowerCase();return I==="*"||I===((C=r==null?void 0:r.event)===null||C===void 0?void 0:C.toLocaleLowerCase())}else return x.type.toLocaleLowerCase()===l}).map(x=>{if(typeof v=="object"&&"ids"in v){const b=v.data,{schema:S,table:j,commit_timestamp:N,type:E,errors:C}=b;v=Object.assign(Object.assign({},{schema:S,table:j,commit_timestamp:N,eventType:E,new:{},old:{},errors:C}),this._getPayloadRecords(b))}x.callback(v,n)})}_isClosed(){return this.state===Mn.closed}_isJoined(){return this.state===Mn.joined}_isJoining(){return this.state===Mn.joining}_isLeaving(){return this.state===Mn.leaving}_replyEventName(t){return`chan_reply_${t}`}_on(t,r,n){const s=t.toLocaleLowerCase(),i={type:s,filter:r,callback:n};return this.bindings[s]?this.bindings[s].push(i):this.bindings[s]=[i],this}_off(t,r){const n=t.toLocaleLowerCase();return this.bindings[n]&&(this.bindings[n]=this.bindings[n].filter(s=>{var i;return!(((i=s.type)===null||i===void 0?void 0:i.toLocaleLowerCase())===n&&$x.isEqual(s.filter,r))})),this}static isEqual(t,r){if(Object.keys(t).length!==Object.keys(r).length)return!1;for(const n in t)if(t[n]!==r[n])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(t){this._on(Zi.close,{},t)}_onError(t){this._on(Zi.error,{},r=>t(r))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(t=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Mn.joining,this.joinPush.resend(t))}_getPayloadRecords(t){const r={new:{},old:{}};return(t.type==="INSERT"||t.type==="UPDATE")&&(r.new=aS(t.columns,t.record)),(t.type==="UPDATE"||t.type==="DELETE")&&(r.old=aS(t.columns,t.old_record)),r}}const fy=()=>{},rh={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},v5=[1e3,2e3,5e3,1e4],x5=1e4,w5=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class b5{constructor(t,r){var n;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=lv,this.transport=null,this.heartbeatIntervalMs=rh.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=fy,this.ref=0,this.reconnectTimer=null,this.logger=fy,this.conn=null,this.sendBuffer=[],this.serializer=new d5,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=s=>{let i;return s?i=s:typeof fetch>"u"?i=(...l)=>Ud(async()=>{const{default:u}=await Promise.resolve().then(()=>ou);return{default:u}},void 0).then(({default:u})=>u(...l)).catch(u=>{throw new Error(`Failed to load @supabase/node-fetch: ${u.message}. This is required for HTTP requests in Node.js environments without native fetch.`)}):i=fetch,(...l)=>i(...l)},!(!((n=r==null?void 0:r.params)===null||n===void 0)&&n.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=r.params.apikey,this.endPoint=`${t}/${cv.websocket}`,this.httpEndpoint=uE(t),this._initializeOptions(r),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(r==null?void 0:r.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=i5.createWebSocket(this.endpointURL())}catch(t){this._setConnectionState("disconnected");const r=t.message;throw r.includes("Node.js")?new Error(`${r}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${r}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:l5}))}disconnect(t,r){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const n=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(n),this._setConnectionState("disconnected")},t?this.conn.close(t,r??""):this.conn.close(),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(t){const r=await t.unsubscribe();return this.channels.length===0&&this.disconnect(),r}async removeAllChannels(){const t=await Promise.all(this.channels.map(r=>r.unsubscribe()));return this.channels=[],this.disconnect(),t}log(t,r,n){this.logger(t,r,n)}connectionState(){switch(this.conn&&this.conn.readyState){case md.connecting:return bl.Connecting;case md.open:return bl.Open;case md.closing:return bl.Closing;default:return bl.Closed}}isConnected(){return this.connectionState()===bl.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(t,r={config:{}}){const n=`realtime:${t}`,s=this.getChannels().find(i=>i.topic===n);if(s)return s;{const i=new $x(`realtime:${t}`,r,this);return this.channels.push(i),i}}push(t){const{topic:r,event:n,payload:s,ref:i}=t,l=()=>{this.encode(t,u=>{var d;(d=this.conn)===null||d===void 0||d.send(u)})};this.log("push",`${r} ${n} (${i})`,s),this.isConnected()?l():this.sendBuffer.push(l)}async setAuth(t=null){this._authPromise=this._performAuth(t);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var t;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(r){this.log("error","error in heartbeat callback",r)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(r){this.log("error","error in heartbeat callback",r)}this._wasManualDisconnect=!1,(t=this.conn)===null||t===void 0||t.close(c5,"heartbeat timeout"),setTimeout(()=>{var r;this.isConnected()||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout()},rh.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(r){this.log("error","error in heartbeat callback",r)}this._setAuthSafely("heartbeat")}onHeartbeat(t){this.heartbeatCallback=t}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(t=>t()),this.sendBuffer=[])}_makeRef(){let t=this.ref+1;return t===this.ref?this.ref=0:this.ref=t,this.ref.toString()}_leaveOpenTopic(t){let r=this.channels.find(n=>n.topic===t&&(n._isJoined()||n._isJoining()));r&&(this.log("transport",`leaving duplicate topic "${t}"`),r.unsubscribe())}_remove(t){this.channels=this.channels.filter(r=>r.topic!==t.topic)}_onConnMessage(t){this.decode(t.data,r=>{if(r.topic==="phoenix"&&r.event==="phx_reply")try{this.heartbeatCallback(r.payload.status==="ok"?"ok":"error")}catch(m){this.log("error","error in heartbeat callback",m)}r.ref&&r.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:n,event:s,payload:i,ref:l}=r,u=l?`(${l})`:"",d=i.status||"";this.log("receive",`${d} ${n} ${s} ${u}`.trim(),i),this.channels.filter(m=>m._isMember(n)).forEach(m=>m._trigger(s,i,l)),this._triggerStateCallbacks("message",r)})}_clearTimer(t){var r;t==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):t==="reconnect"&&((r=this.reconnectTimer)===null||r===void 0||r.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=t=>this._onConnError(t),this.conn.onmessage=t=>this._onConnMessage(t),this.conn.onclose=t=>this._onConnClose(t))}_teardownConnection(){this.conn&&(this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null),this._clearAllTimers(),this.channels.forEach(t=>t.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const t=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(t),this.workerRef.onerror=r=>{this.log("worker","worker error",r.message),this.workerRef.terminate()},this.workerRef.onmessage=r=>{r.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(t){var r;this._setConnectionState("disconnected"),this.log("transport","close",t),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout(),this._triggerStateCallbacks("close",t)}_onConnError(t){this._setConnectionState("disconnected"),this.log("transport",`${t}`),this._triggerChanError(),this._triggerStateCallbacks("error",t)}_triggerChanError(){this.channels.forEach(t=>t._trigger(Zi.error))}_appendParams(t,r){if(Object.keys(r).length===0)return t;const n=t.match(/\?/)?"&":"?",s=new URLSearchParams(r);return`${t}${n}${s}`}_workerObjectUrl(t){let r;if(t)r=t;else{const n=new Blob([w5],{type:"application/javascript"});r=URL.createObjectURL(n)}return r}_setConnectionState(t,r=!1){this._connectionState=t,t==="connecting"?this._wasManualDisconnect=!1:t==="disconnecting"&&(this._wasManualDisconnect=r)}async _performAuth(t=null){let r;t?r=t:this.accessToken?r=await this.accessToken():r=this.accessTokenValue,this.accessTokenValue!=r&&(this.accessTokenValue=r,this.channels.forEach(n=>{const s={access_token:r,version:o5};r&&n.updateJoinPayload(s),n.joinedOnce&&n._isJoined()&&n._push(Zi.access_token,{access_token:r})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(t="general"){this.setAuth().catch(r=>{this.log("error",`error setting auth in ${t}`,r)})}_triggerStateCallbacks(t,r){try{this.stateChangeCallbacks[t].forEach(n=>{try{n(r)}catch(s){this.log("error",`error in ${t} callback`,s)}})}catch(n){this.log("error",`error triggering ${t} callbacks`,n)}}_setupReconnectionTimer(){this.reconnectTimer=new lE(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},rh.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(t){var r,n,s,i,l,u,d,m,f;if(this.transport=(r=t==null?void 0:t.transport)!==null&&r!==void 0?r:null,this.timeout=(n=t==null?void 0:t.timeout)!==null&&n!==void 0?n:lv,this.heartbeatIntervalMs=(s=t==null?void 0:t.heartbeatIntervalMs)!==null&&s!==void 0?s:rh.HEARTBEAT_INTERVAL,this.worker=(i=t==null?void 0:t.worker)!==null&&i!==void 0?i:!1,this.accessToken=(l=t==null?void 0:t.accessToken)!==null&&l!==void 0?l:null,this.heartbeatCallback=(u=t==null?void 0:t.heartbeatCallback)!==null&&u!==void 0?u:fy,t!=null&&t.params&&(this.params=t.params),t!=null&&t.logger&&(this.logger=t.logger),(t!=null&&t.logLevel||t!=null&&t.log_level)&&(this.logLevel=t.logLevel||t.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(d=t==null?void 0:t.reconnectAfterMs)!==null&&d!==void 0?d:(p=>v5[p-1]||x5),this.encode=(m=t==null?void 0:t.encode)!==null&&m!==void 0?m:((p,v)=>v(JSON.stringify(p))),this.decode=(f=t==null?void 0:t.decode)!==null&&f!==void 0?f:this.serializer.decode.bind(this.serializer),this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=t==null?void 0:t.workerUrl}}}class Rx extends Error{constructor(t){super(t),this.__isStorageError=!0,this.name="StorageError"}}function En(e){return typeof e=="object"&&e!==null&&"__isStorageError"in e}class j5 extends Rx{constructor(t,r,n){super(t),this.name="StorageApiError",this.status=r,this.statusCode=n}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class dv extends Rx{constructor(t,r){super(t),this.name="StorageUnknownError",this.originalError=r}}var S5=function(e,t,r,n){function s(i){return i instanceof r?i:new r(function(l){l(i)})}return new(r||(r=Promise))(function(i,l){function u(f){try{m(n.next(f))}catch(p){l(p)}}function d(f){try{m(n.throw(f))}catch(p){l(p)}}function m(f){f.done?i(f.value):s(f.value).then(u,d)}m((n=n.apply(e,t||[])).next())})};const dE=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...r)=>Ud(async()=>{const{default:n}=await Promise.resolve().then(()=>ou);return{default:n}},void 0).then(({default:n})=>n(...r)):t=fetch,(...r)=>t(...r)},k5=()=>S5(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield Ud(()=>Promise.resolve().then(()=>ou),void 0)).Response:Response}),fv=e=>{if(Array.isArray(e))return e.map(r=>fv(r));if(typeof e=="function"||e!==Object(e))return e;const t={};return Object.entries(e).forEach(([r,n])=>{const s=r.replace(/([-_][a-z])/gi,i=>i.toUpperCase().replace(/[-_]/g,""));t[s]=fv(n)}),t},_5=e=>{if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)};var Wl=function(e,t,r,n){function s(i){return i instanceof r?i:new r(function(l){l(i)})}return new(r||(r=Promise))(function(i,l){function u(f){try{m(n.next(f))}catch(p){l(p)}}function d(f){try{m(n.throw(f))}catch(p){l(p)}}function m(f){f.done?i(f.value):s(f.value).then(u,d)}m((n=n.apply(e,t||[])).next())})};const hy=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),N5=(e,t,r)=>Wl(void 0,void 0,void 0,function*(){const n=yield k5();e instanceof n&&!(r!=null&&r.noResolveJson)?e.json().then(s=>{const i=e.status||500,l=(s==null?void 0:s.statusCode)||i+"";t(new j5(hy(s),i,l))}).catch(s=>{t(new dv(hy(s),s))}):t(new dv(hy(e),e))}),C5=(e,t,r,n)=>{const s={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"||!n?s:(_5(n)?(s.headers=Object.assign({"Content-Type":"application/json"},t==null?void 0:t.headers),s.body=JSON.stringify(n)):s.body=n,t!=null&&t.duplex&&(s.duplex=t.duplex),Object.assign(Object.assign({},s),r))};function Bd(e,t,r,n,s,i){return Wl(this,void 0,void 0,function*(){return new Promise((l,u)=>{e(r,C5(t,n,s,i)).then(d=>{if(!d.ok)throw d;return n!=null&&n.noResolveJson?d:d.json()}).then(d=>l(d)).catch(d=>N5(d,u,n))})})}function $h(e,t,r,n){return Wl(this,void 0,void 0,function*(){return Bd(e,"GET",t,r,n)})}function ka(e,t,r,n,s){return Wl(this,void 0,void 0,function*(){return Bd(e,"POST",t,n,s,r)})}function hv(e,t,r,n,s){return Wl(this,void 0,void 0,function*(){return Bd(e,"PUT",t,n,s,r)})}function E5(e,t,r,n){return Wl(this,void 0,void 0,function*(){return Bd(e,"HEAD",t,Object.assign(Object.assign({},r),{noResolveJson:!0}),n)})}function fE(e,t,r,n,s){return Wl(this,void 0,void 0,function*(){return Bd(e,"DELETE",t,n,s,r)})}var A5=function(e,t,r,n){function s(i){return i instanceof r?i:new r(function(l){l(i)})}return new(r||(r=Promise))(function(i,l){function u(f){try{m(n.next(f))}catch(p){l(p)}}function d(f){try{m(n.throw(f))}catch(p){l(p)}}function m(f){f.done?i(f.value):s(f.value).then(u,d)}m((n=n.apply(e,t||[])).next())})};class P5{constructor(t,r){this.downloadFn=t,this.shouldThrowOnError=r}then(t,r){return this.execute().then(t,r)}execute(){return A5(this,void 0,void 0,function*(){try{return{data:(yield this.downloadFn()).body,error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(En(t))return{data:null,error:t};throw t}})}}var T5=function(e,t,r,n){function s(i){return i instanceof r?i:new r(function(l){l(i)})}return new(r||(r=Promise))(function(i,l){function u(f){try{m(n.next(f))}catch(p){l(p)}}function d(f){try{m(n.throw(f))}catch(p){l(p)}}function m(f){f.done?i(f.value):s(f.value).then(u,d)}m((n=n.apply(e,t||[])).next())})};class O5{constructor(t,r){this.downloadFn=t,this.shouldThrowOnError=r}asStream(){return new P5(this.downloadFn,this.shouldThrowOnError)}then(t,r){return this.execute().then(t,r)}execute(){return T5(this,void 0,void 0,function*(){try{return{data:yield(yield this.downloadFn()).blob(),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(En(t))return{data:null,error:t};throw t}})}}var Vs=function(e,t,r,n){function s(i){return i instanceof r?i:new r(function(l){l(i)})}return new(r||(r=Promise))(function(i,l){function u(f){try{m(n.next(f))}catch(p){l(p)}}function d(f){try{m(n.throw(f))}catch(p){l(p)}}function m(f){f.done?i(f.value):s(f.value).then(u,d)}m((n=n.apply(e,t||[])).next())})};const I5={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},cS={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class D5{constructor(t,r={},n,s){this.shouldThrowOnError=!1,this.url=t,this.headers=r,this.bucketId=n,this.fetch=dE(s)}throwOnError(){return this.shouldThrowOnError=!0,this}uploadOrUpdate(t,r,n,s){return Vs(this,void 0,void 0,function*(){try{let i;const l=Object.assign(Object.assign({},cS),s);let u=Object.assign(Object.assign({},this.headers),t==="POST"&&{"x-upsert":String(l.upsert)});const d=l.metadata;typeof Blob<"u"&&n instanceof Blob?(i=new FormData,i.append("cacheControl",l.cacheControl),d&&i.append("metadata",this.encodeMetadata(d)),i.append("",n)):typeof FormData<"u"&&n instanceof FormData?(i=n,i.append("cacheControl",l.cacheControl),d&&i.append("metadata",this.encodeMetadata(d))):(i=n,u["cache-control"]=`max-age=${l.cacheControl}`,u["content-type"]=l.contentType,d&&(u["x-metadata"]=this.toBase64(this.encodeMetadata(d)))),s!=null&&s.headers&&(u=Object.assign(Object.assign({},u),s.headers));const m=this._removeEmptyFolders(r),f=this._getFinalPath(m),p=yield(t=="PUT"?hv:ka)(this.fetch,`${this.url}/object/${f}`,i,Object.assign({headers:u},l!=null&&l.duplex?{duplex:l.duplex}:{}));return{data:{path:m,id:p.Id,fullPath:p.Key},error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(En(i))return{data:null,error:i};throw i}})}upload(t,r,n){return Vs(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",t,r,n)})}uploadToSignedUrl(t,r,n,s){return Vs(this,void 0,void 0,function*(){const i=this._removeEmptyFolders(t),l=this._getFinalPath(i),u=new URL(this.url+`/object/upload/sign/${l}`);u.searchParams.set("token",r);try{let d;const m=Object.assign({upsert:cS.upsert},s),f=Object.assign(Object.assign({},this.headers),{"x-upsert":String(m.upsert)});typeof Blob<"u"&&n instanceof Blob?(d=new FormData,d.append("cacheControl",m.cacheControl),d.append("",n)):typeof FormData<"u"&&n instanceof FormData?(d=n,d.append("cacheControl",m.cacheControl)):(d=n,f["cache-control"]=`max-age=${m.cacheControl}`,f["content-type"]=m.contentType);const p=yield hv(this.fetch,u.toString(),d,{headers:f});return{data:{path:i,fullPath:p.Key},error:null}}catch(d){if(this.shouldThrowOnError)throw d;if(En(d))return{data:null,error:d};throw d}})}createSignedUploadUrl(t,r){return Vs(this,void 0,void 0,function*(){try{let n=this._getFinalPath(t);const s=Object.assign({},this.headers);r!=null&&r.upsert&&(s["x-upsert"]="true");const i=yield ka(this.fetch,`${this.url}/object/upload/sign/${n}`,{},{headers:s}),l=new URL(this.url+i.url),u=l.searchParams.get("token");if(!u)throw new Rx("No token returned by API");return{data:{signedUrl:l.toString(),path:t,token:u},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(En(n))return{data:null,error:n};throw n}})}update(t,r,n){return Vs(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",t,r,n)})}move(t,r,n){return Vs(this,void 0,void 0,function*(){try{return{data:yield ka(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:t,destinationKey:r,destinationBucket:n==null?void 0:n.destinationBucket},{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(En(s))return{data:null,error:s};throw s}})}copy(t,r,n){return Vs(this,void 0,void 0,function*(){try{return{data:{path:(yield ka(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:t,destinationKey:r,destinationBucket:n==null?void 0:n.destinationBucket},{headers:this.headers})).Key},error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(En(s))return{data:null,error:s};throw s}})}createSignedUrl(t,r,n){return Vs(this,void 0,void 0,function*(){try{let s=this._getFinalPath(t),i=yield ka(this.fetch,`${this.url}/object/sign/${s}`,Object.assign({expiresIn:r},n!=null&&n.transform?{transform:n.transform}:{}),{headers:this.headers});const l=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return i={signedUrl:encodeURI(`${this.url}${i.signedURL}${l}`)},{data:i,error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(En(s))return{data:null,error:s};throw s}})}createSignedUrls(t,r,n){return Vs(this,void 0,void 0,function*(){try{const s=yield ka(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:r,paths:t},{headers:this.headers}),i=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return{data:s.map(l=>Object.assign(Object.assign({},l),{signedUrl:l.signedURL?encodeURI(`${this.url}${l.signedURL}${i}`):null})),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(En(s))return{data:null,error:s};throw s}})}download(t,r){const s=typeof(r==null?void 0:r.transform)<"u"?"render/image/authenticated":"object",i=this.transformOptsToQueryString((r==null?void 0:r.transform)||{}),l=i?`?${i}`:"",u=this._getFinalPath(t),d=()=>$h(this.fetch,`${this.url}/${s}/${u}${l}`,{headers:this.headers,noResolveJson:!0});return new O5(d,this.shouldThrowOnError)}info(t){return Vs(this,void 0,void 0,function*(){const r=this._getFinalPath(t);try{const n=yield $h(this.fetch,`${this.url}/object/info/${r}`,{headers:this.headers});return{data:fv(n),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(En(n))return{data:null,error:n};throw n}})}exists(t){return Vs(this,void 0,void 0,function*(){const r=this._getFinalPath(t);try{return yield E5(this.fetch,`${this.url}/object/${r}`,{headers:this.headers}),{data:!0,error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(En(n)&&n instanceof dv){const s=n.originalError;if([400,404].includes(s==null?void 0:s.status))return{data:!1,error:n}}throw n}})}getPublicUrl(t,r){const n=this._getFinalPath(t),s=[],i=r!=null&&r.download?`download=${r.download===!0?"":r.download}`:"";i!==""&&s.push(i);const u=typeof(r==null?void 0:r.transform)<"u"?"render/image":"object",d=this.transformOptsToQueryString((r==null?void 0:r.transform)||{});d!==""&&s.push(d);let m=s.join("&");return m!==""&&(m=`?${m}`),{data:{publicUrl:encodeURI(`${this.url}/${u}/public/${n}${m}`)}}}remove(t){return Vs(this,void 0,void 0,function*(){try{return{data:yield fE(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:t},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(En(r))return{data:null,error:r};throw r}})}list(t,r,n){return Vs(this,void 0,void 0,function*(){try{const s=Object.assign(Object.assign(Object.assign({},I5),r),{prefix:t||""});return{data:yield ka(this.fetch,`${this.url}/object/list/${this.bucketId}`,s,{headers:this.headers},n),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(En(s))return{data:null,error:s};throw s}})}listV2(t,r){return Vs(this,void 0,void 0,function*(){try{const n=Object.assign({},t);return{data:yield ka(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,n,{headers:this.headers},r),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(En(n))return{data:null,error:n};throw n}})}encodeMetadata(t){return JSON.stringify(t)}toBase64(t){return typeof Buffer<"u"?Buffer.from(t).toString("base64"):btoa(t)}_getFinalPath(t){return`${this.bucketId}/${t.replace(/^\/+/,"")}`}_removeEmptyFolders(t){return t.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(t){const r=[];return t.width&&r.push(`width=${t.width}`),t.height&&r.push(`height=${t.height}`),t.resize&&r.push(`resize=${t.resize}`),t.format&&r.push(`format=${t.format}`),t.quality&&r.push(`quality=${t.quality}`),r.join("&")}}const $5="2.74.0",R5={"X-Client-Info":`storage-js/${$5}`};var jc=function(e,t,r,n){function s(i){return i instanceof r?i:new r(function(l){l(i)})}return new(r||(r=Promise))(function(i,l){function u(f){try{m(n.next(f))}catch(p){l(p)}}function d(f){try{m(n.throw(f))}catch(p){l(p)}}function m(f){f.done?i(f.value):s(f.value).then(u,d)}m((n=n.apply(e,t||[])).next())})};class M5{constructor(t,r={},n,s){this.shouldThrowOnError=!1;const i=new URL(t);s!=null&&s.useNewHostname&&/supabase\.(co|in|red)$/.test(i.hostname)&&!i.hostname.includes("storage.supabase.")&&(i.hostname=i.hostname.replace("supabase.","storage.supabase.")),this.url=i.href.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},R5),r),this.fetch=dE(n)}throwOnError(){return this.shouldThrowOnError=!0,this}listBuckets(){return jc(this,void 0,void 0,function*(){try{return{data:yield $h(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(En(t))return{data:null,error:t};throw t}})}getBucket(t){return jc(this,void 0,void 0,function*(){try{return{data:yield $h(this.fetch,`${this.url}/bucket/${t}`,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(En(r))return{data:null,error:r};throw r}})}createBucket(t){return jc(this,arguments,void 0,function*(r,n={public:!1}){try{return{data:yield ka(this.fetch,`${this.url}/bucket`,{id:r,name:r,type:n.type,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(En(s))return{data:null,error:s};throw s}})}updateBucket(t,r){return jc(this,void 0,void 0,function*(){try{return{data:yield hv(this.fetch,`${this.url}/bucket/${t}`,{id:t,name:t,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(En(n))return{data:null,error:n};throw n}})}emptyBucket(t){return jc(this,void 0,void 0,function*(){try{return{data:yield ka(this.fetch,`${this.url}/bucket/${t}/empty`,{},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(En(r))return{data:null,error:r};throw r}})}deleteBucket(t){return jc(this,void 0,void 0,function*(){try{return{data:yield fE(this.fetch,`${this.url}/bucket/${t}`,{},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(En(r))return{data:null,error:r};throw r}})}}class F5 extends M5{constructor(t,r={},n,s){super(t,r,n,s)}from(t){return new D5(this.url,this.headers,t,this.fetch)}}const L5="2.74.0";let ad="";typeof Deno<"u"?ad="deno":typeof document<"u"?ad="web":typeof navigator<"u"&&navigator.product==="ReactNative"?ad="react-native":ad="node";const z5={"X-Client-Info":`supabase-js-${ad}/${L5}`},U5={headers:z5},B5={schema:"public"},W5={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},V5={};var q5=function(e,t,r,n){function s(i){return i instanceof r?i:new r(function(l){l(i)})}return new(r||(r=Promise))(function(i,l){function u(f){try{m(n.next(f))}catch(p){l(p)}}function d(f){try{m(n.throw(f))}catch(p){l(p)}}function m(f){f.done?i(f.value):s(f.value).then(u,d)}m((n=n.apply(e,t||[])).next())})};const H5=e=>{let t;return e?t=e:typeof fetch>"u"?t=rE:t=fetch,(...r)=>t(...r)},K5=()=>typeof Headers>"u"?nE:Headers,G5=(e,t,r)=>{const n=H5(r),s=K5();return(i,l)=>q5(void 0,void 0,void 0,function*(){var u;const d=(u=yield t())!==null&&u!==void 0?u:e;let m=new s(l==null?void 0:l.headers);return m.has("apikey")||m.set("apikey",e),m.has("Authorization")||m.set("Authorization",`Bearer ${d}`),n(i,Object.assign(Object.assign({},l),{headers:m}))})};var Y5=function(e,t,r,n){function s(i){return i instanceof r?i:new r(function(l){l(i)})}return new(r||(r=Promise))(function(i,l){function u(f){try{m(n.next(f))}catch(p){l(p)}}function d(f){try{m(n.throw(f))}catch(p){l(p)}}function m(f){f.done?i(f.value):s(f.value).then(u,d)}m((n=n.apply(e,t||[])).next())})};function J5(e){return e.endsWith("/")?e:e+"/"}function X5(e,t){var r,n;const{db:s,auth:i,realtime:l,global:u}=e,{db:d,auth:m,realtime:f,global:p}=t,v={db:Object.assign(Object.assign({},d),s),auth:Object.assign(Object.assign({},m),i),realtime:Object.assign(Object.assign({},f),l),storage:{},global:Object.assign(Object.assign(Object.assign({},p),u),{headers:Object.assign(Object.assign({},(r=p==null?void 0:p.headers)!==null&&r!==void 0?r:{}),(n=u==null?void 0:u.headers)!==null&&n!==void 0?n:{})}),accessToken:()=>Y5(this,void 0,void 0,function*(){return""})};return e.accessToken?v.accessToken=e.accessToken:delete v.accessToken,v}function Q5(e){const t=e==null?void 0:e.trim();if(!t)throw new Error("supabaseUrl is required.");if(!t.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(J5(t))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}const hE="2.74.0",Dc=30*1e3,mv=3,my=mv*Dc,Z5="http://localhost:9999",e$="supabase.auth.token",t$={"X-Client-Info":`gotrue-js/${hE}`},pv="X-Supabase-Api-Version",mE={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},r$=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,n$=600*1e3;class Sd extends Error{constructor(t,r,n){super(t),this.__isAuthError=!0,this.name="AuthError",this.status=r,this.code=n}}function It(e){return typeof e=="object"&&e!==null&&"__isAuthError"in e}class s$ extends Sd{constructor(t,r,n){super(t,r,n),this.name="AuthApiError",this.status=r,this.code=n}}function i$(e){return It(e)&&e.name==="AuthApiError"}class jl extends Sd{constructor(t,r){super(t),this.name="AuthUnknownError",this.originalError=r}}class Jo extends Sd{constructor(t,r,n,s){super(t,n,s),this.name=r,this.status=n}}class Ro extends Jo{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function a$(e){return It(e)&&e.name==="AuthSessionMissingError"}class Sc extends Jo{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class nh extends Jo{constructor(t){super(t,"AuthInvalidCredentialsError",400,void 0)}}class sh extends Jo{constructor(t,r=null){super(t,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function o$(e){return It(e)&&e.name==="AuthImplicitGrantRedirectError"}class uS extends Jo{constructor(t,r=null){super(t,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class gv extends Jo{constructor(t,r){super(t,"AuthRetryableFetchError",r,void 0)}}function py(e){return It(e)&&e.name==="AuthRetryableFetchError"}class dS extends Jo{constructor(t,r,n){super(t,"AuthWeakPasswordError",r,"weak_password"),this.reasons=n}}class yv extends Jo{constructor(t){super(t,"AuthInvalidJwtError",400,"invalid_jwt")}}const Rh="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),fS=` 	
\r=`.split(""),l$=(()=>{const e=new Array(128);for(let t=0;t<e.length;t+=1)e[t]=-1;for(let t=0;t<fS.length;t+=1)e[fS[t].charCodeAt(0)]=-2;for(let t=0;t<Rh.length;t+=1)e[Rh[t].charCodeAt(0)]=t;return e})();function hS(e,t,r){if(e!==null)for(t.queue=t.queue<<8|e,t.queuedBits+=8;t.queuedBits>=6;){const n=t.queue>>t.queuedBits-6&63;r(Rh[n]),t.queuedBits-=6}else if(t.queuedBits>0)for(t.queue=t.queue<<6-t.queuedBits,t.queuedBits=6;t.queuedBits>=6;){const n=t.queue>>t.queuedBits-6&63;r(Rh[n]),t.queuedBits-=6}}function pE(e,t,r){const n=l$[e];if(n>-1)for(t.queue=t.queue<<6|n,t.queuedBits+=6;t.queuedBits>=8;)r(t.queue>>t.queuedBits-8&255),t.queuedBits-=8;else{if(n===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(e)}"`)}}function mS(e){const t=[],r=l=>{t.push(String.fromCodePoint(l))},n={utf8seq:0,codepoint:0},s={queue:0,queuedBits:0},i=l=>{d$(l,n,r)};for(let l=0;l<e.length;l+=1)pE(e.charCodeAt(l),s,i);return t.join("")}function c$(e,t){if(e<=127){t(e);return}else if(e<=2047){t(192|e>>6),t(128|e&63);return}else if(e<=65535){t(224|e>>12),t(128|e>>6&63),t(128|e&63);return}else if(e<=1114111){t(240|e>>18),t(128|e>>12&63),t(128|e>>6&63),t(128|e&63);return}throw new Error(`Unrecognized Unicode codepoint: ${e.toString(16)}`)}function u$(e,t){for(let r=0;r<e.length;r+=1){let n=e.charCodeAt(r);if(n>55295&&n<=56319){const s=(n-55296)*1024&65535;n=(e.charCodeAt(r+1)-56320&65535|s)+65536,r+=1}c$(n,t)}}function d$(e,t,r){if(t.utf8seq===0){if(e<=127){r(e);return}for(let n=1;n<6;n+=1)if((e>>7-n&1)===0){t.utf8seq=n;break}if(t.utf8seq===2)t.codepoint=e&31;else if(t.utf8seq===3)t.codepoint=e&15;else if(t.utf8seq===4)t.codepoint=e&7;else throw new Error("Invalid UTF-8 sequence");t.utf8seq-=1}else if(t.utf8seq>0){if(e<=127)throw new Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|e&63,t.utf8seq-=1,t.utf8seq===0&&r(t.codepoint)}}function Uc(e){const t=[],r={queue:0,queuedBits:0},n=s=>{t.push(s)};for(let s=0;s<e.length;s+=1)pE(e.charCodeAt(s),r,n);return new Uint8Array(t)}function f$(e){const t=[];return u$(e,r=>t.push(r)),new Uint8Array(t)}function kl(e){const t=[],r={queue:0,queuedBits:0},n=s=>{t.push(s)};return e.forEach(s=>hS(s,r,n)),hS(null,r,n),t.join("")}function h$(e){return Math.round(Date.now()/1e3)+e}function m$(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){const t=Math.random()*16|0;return(e=="x"?t:t&3|8).toString(16)})}const ii=()=>typeof window<"u"&&typeof document<"u",ml={tested:!1,writable:!1},gE=()=>{if(!ii())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(ml.tested)return ml.writable;const e=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),ml.tested=!0,ml.writable=!0}catch{ml.tested=!0,ml.writable=!1}return ml.writable};function p$(e){const t={},r=new URL(e);if(r.hash&&r.hash[0]==="#")try{new URLSearchParams(r.hash.substring(1)).forEach((s,i)=>{t[i]=s})}catch{}return r.searchParams.forEach((n,s)=>{t[s]=n}),t}const yE=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...r)=>Ud(async()=>{const{default:n}=await Promise.resolve().then(()=>ou);return{default:n}},void 0).then(({default:n})=>n(...r)):t=fetch,(...r)=>t(...r)},g$=e=>typeof e=="object"&&e!==null&&"status"in e&&"ok"in e&&"json"in e&&typeof e.json=="function",$c=async(e,t,r)=>{await e.setItem(t,JSON.stringify(r))},pl=async(e,t)=>{const r=await e.getItem(t);if(!r)return null;try{return JSON.parse(r)}catch{return r}},$o=async(e,t)=>{await e.removeItem(t)};class zm{constructor(){this.promise=new zm.promiseConstructor((t,r)=>{this.resolve=t,this.reject=r})}}zm.promiseConstructor=Promise;function gy(e){const t=e.split(".");if(t.length!==3)throw new yv("Invalid JWT structure");for(let n=0;n<t.length;n++)if(!r$.test(t[n]))throw new yv("JWT not in base64url format");return{header:JSON.parse(mS(t[0])),payload:JSON.parse(mS(t[1])),signature:Uc(t[2]),raw:{header:t[0],payload:t[1]}}}async function y$(e){return await new Promise(t=>{setTimeout(()=>t(null),e)})}function v$(e,t){return new Promise((n,s)=>{(async()=>{for(let i=0;i<1/0;i++)try{const l=await e(i);if(!t(i,null,l)){n(l);return}}catch(l){if(!t(i,l)){s(l);return}}})()})}function x$(e){return("0"+e.toString(16)).substr(-2)}function w$(){const t=new Uint32Array(56);if(typeof crypto>"u"){const r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",n=r.length;let s="";for(let i=0;i<56;i++)s+=r.charAt(Math.floor(Math.random()*n));return s}return crypto.getRandomValues(t),Array.from(t,x$).join("")}async function b$(e){const r=new TextEncoder().encode(e),n=await crypto.subtle.digest("SHA-256",r),s=new Uint8Array(n);return Array.from(s).map(i=>String.fromCharCode(i)).join("")}async function j$(e){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),e;const r=await b$(e);return btoa(r).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function kc(e,t,r=!1){const n=w$();let s=n;r&&(s+="/PASSWORD_RECOVERY"),await $c(e,`${t}-code-verifier`,s);const i=await j$(n);return[i,n===i?"plain":"s256"]}const S$=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function k$(e){const t=e.headers.get(pv);if(!t||!t.match(S$))return null;try{return new Date(`${t}T00:00:00.0Z`)}catch{return null}}function _$(e){if(!e)throw new Error("Missing exp claim");const t=Math.floor(Date.now()/1e3);if(e<=t)throw new Error("JWT has expired")}function N$(e){switch(e){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const C$=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function _c(e){if(!C$.test(e))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function yy(){const e={};return new Proxy(e,{get:(t,r)=>{if(r==="__isUserNotAvailableProxy")return!0;if(typeof r=="symbol"){const n=r.toString();if(n==="Symbol(Symbol.toPrimitive)"||n==="Symbol(Symbol.toStringTag)"||n==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${r}" property of the session object is not supported. Please use getUser() instead.`)},set:(t,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(t,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function pS(e){return JSON.parse(JSON.stringify(e))}var E$=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(e);s<n.length;s++)t.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(e,n[s])&&(r[n[s]]=e[n[s]]);return r};const yl=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),A$=[502,503,504];async function gS(e){var t;if(!g$(e))throw new gv(yl(e),0);if(A$.includes(e.status))throw new gv(yl(e),e.status);let r;try{r=await e.json()}catch(i){throw new jl(yl(i),i)}let n;const s=k$(e);if(s&&s.getTime()>=mE["2024-01-01"].timestamp&&typeof r=="object"&&r&&typeof r.code=="string"?n=r.code:typeof r=="object"&&r&&typeof r.error_code=="string"&&(n=r.error_code),n){if(n==="weak_password")throw new dS(yl(r),e.status,((t=r.weak_password)===null||t===void 0?void 0:t.reasons)||[]);if(n==="session_not_found")throw new Ro}else if(typeof r=="object"&&r&&typeof r.weak_password=="object"&&r.weak_password&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.reasons.reduce((i,l)=>i&&typeof l=="string",!0))throw new dS(yl(r),e.status,r.weak_password.reasons);throw new s$(yl(r),e.status||500,n)}const P$=(e,t,r,n)=>{const s={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"?s:(s.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},t==null?void 0:t.headers),s.body=JSON.stringify(n),Object.assign(Object.assign({},s),r))};async function qt(e,t,r,n){var s;const i=Object.assign({},n==null?void 0:n.headers);i[pv]||(i[pv]=mE["2024-01-01"].name),n!=null&&n.jwt&&(i.Authorization=`Bearer ${n.jwt}`);const l=(s=n==null?void 0:n.query)!==null&&s!==void 0?s:{};n!=null&&n.redirectTo&&(l.redirect_to=n.redirectTo);const u=Object.keys(l).length?"?"+new URLSearchParams(l).toString():"",d=await T$(e,t,r+u,{headers:i,noResolveJson:n==null?void 0:n.noResolveJson},{},n==null?void 0:n.body);return n!=null&&n.xform?n==null?void 0:n.xform(d):{data:Object.assign({},d),error:null}}async function T$(e,t,r,n,s,i){const l=P$(t,n,s,i);let u;try{u=await e(r,Object.assign({},l))}catch(d){throw console.error(d),new gv(yl(d),0)}if(u.ok||await gS(u),n!=null&&n.noResolveJson)return u;try{return await u.json()}catch(d){await gS(d)}}function Qi(e){var t;let r=null;D$(e)&&(r=Object.assign({},e),e.expires_at||(r.expires_at=h$(e.expires_in)));const n=(t=e.user)!==null&&t!==void 0?t:e;return{data:{session:r,user:n},error:null}}function yS(e){const t=Qi(e);return!t.error&&e.weak_password&&typeof e.weak_password=="object"&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.message&&typeof e.weak_password.message=="string"&&e.weak_password.reasons.reduce((r,n)=>r&&typeof n=="string",!0)&&(t.data.weak_password=e.weak_password),t}function Uo(e){var t;return{data:{user:(t=e.user)!==null&&t!==void 0?t:e},error:null}}function O$(e){return{data:e,error:null}}function I$(e){const{action_link:t,email_otp:r,hashed_token:n,redirect_to:s,verification_type:i}=e,l=E$(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),u={action_link:t,email_otp:r,hashed_token:n,redirect_to:s,verification_type:i},d=Object.assign({},l);return{data:{properties:u,user:d},error:null}}function vS(e){return e}function D$(e){return e.access_token&&e.refresh_token&&e.expires_in}const vy=["global","local","others"];var $$=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(e);s<n.length;s++)t.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(e,n[s])&&(r[n[s]]=e[n[s]]);return r};class R${constructor({url:t="",headers:r={},fetch:n}){this.url=t,this.headers=r,this.fetch=yE(n),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(t,r=vy[0]){if(vy.indexOf(r)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${vy.join(", ")}`);try{return await qt(this.fetch,"POST",`${this.url}/logout?scope=${r}`,{headers:this.headers,jwt:t,noResolveJson:!0}),{data:null,error:null}}catch(n){if(It(n))return{data:null,error:n};throw n}}async inviteUserByEmail(t,r={}){try{return await qt(this.fetch,"POST",`${this.url}/invite`,{body:{email:t,data:r.data},headers:this.headers,redirectTo:r.redirectTo,xform:Uo})}catch(n){if(It(n))return{data:{user:null},error:n};throw n}}async generateLink(t){try{const{options:r}=t,n=$$(t,["options"]),s=Object.assign(Object.assign({},n),r);return"newEmail"in n&&(s.new_email=n==null?void 0:n.newEmail,delete s.newEmail),await qt(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:s,headers:this.headers,xform:I$,redirectTo:r==null?void 0:r.redirectTo})}catch(r){if(It(r))return{data:{properties:null,user:null},error:r};throw r}}async createUser(t){try{return await qt(this.fetch,"POST",`${this.url}/admin/users`,{body:t,headers:this.headers,xform:Uo})}catch(r){if(It(r))return{data:{user:null},error:r};throw r}}async listUsers(t){var r,n,s,i,l,u,d;try{const m={nextPage:null,lastPage:0,total:0},f=await qt(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(r=t==null?void 0:t.page)===null||r===void 0?void 0:r.toString())!==null&&n!==void 0?n:"",per_page:(i=(s=t==null?void 0:t.perPage)===null||s===void 0?void 0:s.toString())!==null&&i!==void 0?i:""},xform:vS});if(f.error)throw f.error;const p=await f.json(),v=(l=f.headers.get("x-total-count"))!==null&&l!==void 0?l:0,x=(d=(u=f.headers.get("link"))===null||u===void 0?void 0:u.split(","))!==null&&d!==void 0?d:[];return x.length>0&&(x.forEach(b=>{const S=parseInt(b.split(";")[0].split("=")[1].substring(0,1)),j=JSON.parse(b.split(";")[1].split("=")[1]);m[`${j}Page`]=S}),m.total=parseInt(v)),{data:Object.assign(Object.assign({},p),m),error:null}}catch(m){if(It(m))return{data:{users:[]},error:m};throw m}}async getUserById(t){_c(t);try{return await qt(this.fetch,"GET",`${this.url}/admin/users/${t}`,{headers:this.headers,xform:Uo})}catch(r){if(It(r))return{data:{user:null},error:r};throw r}}async updateUserById(t,r){_c(t);try{return await qt(this.fetch,"PUT",`${this.url}/admin/users/${t}`,{body:r,headers:this.headers,xform:Uo})}catch(n){if(It(n))return{data:{user:null},error:n};throw n}}async deleteUser(t,r=!1){_c(t);try{return await qt(this.fetch,"DELETE",`${this.url}/admin/users/${t}`,{headers:this.headers,body:{should_soft_delete:r},xform:Uo})}catch(n){if(It(n))return{data:{user:null},error:n};throw n}}async _listFactors(t){_c(t.userId);try{const{data:r,error:n}=await qt(this.fetch,"GET",`${this.url}/admin/users/${t.userId}/factors`,{headers:this.headers,xform:s=>({data:{factors:s},error:null})});return{data:r,error:n}}catch(r){if(It(r))return{data:null,error:r};throw r}}async _deleteFactor(t){_c(t.userId),_c(t.id);try{return{data:await qt(this.fetch,"DELETE",`${this.url}/admin/users/${t.userId}/factors/${t.id}`,{headers:this.headers}),error:null}}catch(r){if(It(r))return{data:null,error:r};throw r}}async _listOAuthClients(t){var r,n,s,i,l,u,d;try{const m={nextPage:null,lastPage:0,total:0},f=await qt(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(r=t==null?void 0:t.page)===null||r===void 0?void 0:r.toString())!==null&&n!==void 0?n:"",per_page:(i=(s=t==null?void 0:t.perPage)===null||s===void 0?void 0:s.toString())!==null&&i!==void 0?i:""},xform:vS});if(f.error)throw f.error;const p=await f.json(),v=(l=f.headers.get("x-total-count"))!==null&&l!==void 0?l:0,x=(d=(u=f.headers.get("link"))===null||u===void 0?void 0:u.split(","))!==null&&d!==void 0?d:[];return x.length>0&&(x.forEach(b=>{const S=parseInt(b.split(";")[0].split("=")[1].substring(0,1)),j=JSON.parse(b.split(";")[1].split("=")[1]);m[`${j}Page`]=S}),m.total=parseInt(v)),{data:Object.assign(Object.assign({},p),m),error:null}}catch(m){if(It(m))return{data:{clients:[]},error:m};throw m}}async _createOAuthClient(t){try{return await qt(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:t,headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(It(r))return{data:null,error:r};throw r}}async _getOAuthClient(t){try{return await qt(this.fetch,"GET",`${this.url}/admin/oauth/clients/${t}`,{headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(It(r))return{data:null,error:r};throw r}}async _deleteOAuthClient(t){try{return await qt(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${t}`,{headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(It(r))return{data:null,error:r};throw r}}async _regenerateOAuthClientSecret(t){try{return await qt(this.fetch,"POST",`${this.url}/admin/oauth/clients/${t}/regenerate_secret`,{headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(It(r))return{data:null,error:r};throw r}}}function xS(e={}){return{getItem:t=>e[t]||null,setItem:(t,r)=>{e[t]=r},removeItem:t=>{delete e[t]}}}const Nc={debug:!!(globalThis&&gE()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class vE extends Error{constructor(t){super(t),this.isAcquireTimeout=!0}}class M$ extends vE{}async function F$(e,t,r){Nc.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",e,t);const n=new globalThis.AbortController;return t>0&&setTimeout(()=>{n.abort(),Nc.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",e)},t),await Promise.resolve().then(()=>globalThis.navigator.locks.request(e,t===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:n.signal},async s=>{if(s){Nc.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",e,s.name);try{return await r()}finally{Nc.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",e,s.name)}}else{if(t===0)throw Nc.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",e),new M$(`Acquiring an exclusive Navigator LockManager lock "${e}" immediately failed`);if(Nc.debug)try{const i=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(i,null,"  "))}catch(i){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",i)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await r()}}))}function L$(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function xE(e){if(!/^0x[a-fA-F0-9]{40}$/.test(e))throw new Error(`@supabase/auth-js: Address "${e}" is invalid.`);return e.toLowerCase()}function z$(e){return parseInt(e,16)}function U$(e){const t=new TextEncoder().encode(e);return"0x"+Array.from(t,n=>n.toString(16).padStart(2,"0")).join("")}function B$(e){var t;const{chainId:r,domain:n,expirationTime:s,issuedAt:i=new Date,nonce:l,notBefore:u,requestId:d,resources:m,scheme:f,uri:p,version:v}=e;{if(!Number.isInteger(r))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${r}`);if(!n)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(l&&l.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${l}`);if(!p)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(v!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${v}`);if(!((t=e.statement)===null||t===void 0)&&t.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${e.statement}`)}const x=xE(e.address),b=f?`${f}://${n}`:n,S=e.statement?`${e.statement}
`:"",j=`${b} wants you to sign in with your Ethereum account:
${x}

${S}`;let N=`URI: ${p}
Version: ${v}
Chain ID: ${r}${l?`
Nonce: ${l}`:""}
Issued At: ${i.toISOString()}`;if(s&&(N+=`
Expiration Time: ${s.toISOString()}`),u&&(N+=`
Not Before: ${u.toISOString()}`),d&&(N+=`
Request ID: ${d}`),m){let E=`
Resources:`;for(const C of m){if(!C||typeof C!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${C}`);E+=`
- ${C}`}N+=E}return`${j}
${N}`}class Cn extends Error{constructor({message:t,code:r,cause:n,name:s}){var i;super(t,{cause:n}),this.__isWebAuthnError=!0,this.name=(i=s??(n instanceof Error?n.name:void 0))!==null&&i!==void 0?i:"Unknown Error",this.code=r}}class Mh extends Cn{constructor(t,r){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:r,message:t}),this.name="WebAuthnUnknownError",this.originalError=r}}function W$({error:e,options:t}){var r,n,s;const{publicKey:i}=t;if(!i)throw Error("options was missing required publicKey property");if(e.name==="AbortError"){if(t.signal instanceof AbortSignal)return new Cn({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:e})}else if(e.name==="ConstraintError"){if(((r=i.authenticatorSelection)===null||r===void 0?void 0:r.requireResidentKey)===!0)return new Cn({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:e});if(t.mediation==="conditional"&&((n=i.authenticatorSelection)===null||n===void 0?void 0:n.userVerification)==="required")return new Cn({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:e});if(((s=i.authenticatorSelection)===null||s===void 0?void 0:s.userVerification)==="required")return new Cn({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:e})}else{if(e.name==="InvalidStateError")return new Cn({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:e});if(e.name==="NotAllowedError")return new Cn({message:e.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e});if(e.name==="NotSupportedError")return i.pubKeyCredParams.filter(u=>u.type==="public-key").length===0?new Cn({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:e}):new Cn({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:e});if(e.name==="SecurityError"){const l=window.location.hostname;if(bE(l)){if(i.rp.id!==l)return new Cn({message:`The RP ID "${i.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:e})}else return new Cn({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:e})}else if(e.name==="TypeError"){if(i.user.id.byteLength<1||i.user.id.byteLength>64)return new Cn({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:e})}else if(e.name==="UnknownError")return new Cn({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:e})}return new Cn({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e})}function V$({error:e,options:t}){const{publicKey:r}=t;if(!r)throw Error("options was missing required publicKey property");if(e.name==="AbortError"){if(t.signal instanceof AbortSignal)return new Cn({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:e})}else{if(e.name==="NotAllowedError")return new Cn({message:e.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e});if(e.name==="SecurityError"){const n=window.location.hostname;if(bE(n)){if(r.rpId!==n)return new Cn({message:`The RP ID "${r.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:e})}else return new Cn({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:e})}else if(e.name==="UnknownError")return new Cn({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:e})}return new Cn({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e})}var wE=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(e);s<n.length;s++)t.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(e,n[s])&&(r[n[s]]=e[n[s]]);return r};class q${createNewAbortSignal(){if(this.controller){const r=new Error("Cancelling existing WebAuthn API call for new one");r.name="AbortError",this.controller.abort(r)}const t=new AbortController;return this.controller=t,t.signal}cancelCeremony(){if(this.controller){const t=new Error("Manually cancelling existing WebAuthn API call");t.name="AbortError",this.controller.abort(t),this.controller=void 0}}}const H$=new q$;function K$(e){if(!e)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(e);const{challenge:t,user:r,excludeCredentials:n}=e,s=wE(e,["challenge","user","excludeCredentials"]),i=Uc(t).buffer,l=Object.assign(Object.assign({},r),{id:Uc(r.id).buffer}),u=Object.assign(Object.assign({},s),{challenge:i,user:l});if(n&&n.length>0){u.excludeCredentials=new Array(n.length);for(let d=0;d<n.length;d++){const m=n[d];u.excludeCredentials[d]=Object.assign(Object.assign({},m),{id:Uc(m.id).buffer,type:m.type||"public-key",transports:m.transports})}}return u}function G$(e){if(!e)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(e);const{challenge:t,allowCredentials:r}=e,n=wE(e,["challenge","allowCredentials"]),s=Uc(t).buffer,i=Object.assign(Object.assign({},n),{challenge:s});if(r&&r.length>0){i.allowCredentials=new Array(r.length);for(let l=0;l<r.length;l++){const u=r[l];i.allowCredentials[l]=Object.assign(Object.assign({},u),{id:Uc(u.id).buffer,type:u.type||"public-key",transports:u.transports})}}return i}function Y$(e){var t;if("toJSON"in e&&typeof e.toJSON=="function")return e.toJSON();const r=e;return{id:e.id,rawId:e.id,response:{attestationObject:kl(new Uint8Array(e.response.attestationObject)),clientDataJSON:kl(new Uint8Array(e.response.clientDataJSON))},type:"public-key",clientExtensionResults:e.getClientExtensionResults(),authenticatorAttachment:(t=r.authenticatorAttachment)!==null&&t!==void 0?t:void 0}}function J$(e){var t;if("toJSON"in e&&typeof e.toJSON=="function")return e.toJSON();const r=e,n=e.getClientExtensionResults(),s=e.response;return{id:e.id,rawId:e.id,response:{authenticatorData:kl(new Uint8Array(s.authenticatorData)),clientDataJSON:kl(new Uint8Array(s.clientDataJSON)),signature:kl(new Uint8Array(s.signature)),userHandle:s.userHandle?kl(new Uint8Array(s.userHandle)):void 0},type:"public-key",clientExtensionResults:n,authenticatorAttachment:(t=r.authenticatorAttachment)!==null&&t!==void 0?t:void 0}}function bE(e){return e==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(e)}function wS(){var e,t;return!!(ii()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((e=navigator==null?void 0:navigator.credentials)===null||e===void 0?void 0:e.create)=="function"&&typeof((t=navigator==null?void 0:navigator.credentials)===null||t===void 0?void 0:t.get)=="function")}async function X$(e){try{const t=await navigator.credentials.create(e);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new Mh("Browser returned unexpected credential type",t)}:{data:null,error:new Mh("Empty credential response",t)}}catch(t){return{data:null,error:W$({error:t,options:e})}}}async function Q$(e){try{const t=await navigator.credentials.get(e);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new Mh("Browser returned unexpected credential type",t)}:{data:null,error:new Mh("Empty credential response",t)}}catch(t){return{data:null,error:V$({error:t,options:e})}}}const Z$={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"none"},e6={userVerification:"preferred",hints:["security-key"]};function Fh(...e){const t=s=>s!==null&&typeof s=="object"&&!Array.isArray(s),r=s=>s instanceof ArrayBuffer||ArrayBuffer.isView(s),n={};for(const s of e)if(s)for(const i in s){const l=s[i];if(l!==void 0)if(Array.isArray(l))n[i]=l;else if(r(l))n[i]=l;else if(t(l)){const u=n[i];t(u)?n[i]=Fh(u,l):n[i]=Fh(l)}else n[i]=l}return n}function t6(e,t){return Fh(Z$,e,t||{})}function r6(e,t){return Fh(e6,e,t||{})}class n6{constructor(t){this.client=t,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(t){return this.client.mfa.enroll(Object.assign(Object.assign({},t),{factorType:"webauthn"}))}async _challenge({factorId:t,webauthn:r,friendlyName:n,signal:s},i){try{const{data:l,error:u}=await this.client.mfa.challenge({factorId:t,webauthn:r});if(!l)return{data:null,error:u};const d=s??H$.createNewAbortSignal();if(l.webauthn.type==="create"){const{user:m}=l.webauthn.credential_options.publicKey;m.name||(m.name=`${m.id}:${n}`),m.displayName||(m.displayName=m.name)}switch(l.webauthn.type){case"create":{const m=t6(l.webauthn.credential_options.publicKey,i==null?void 0:i.create),{data:f,error:p}=await X$({publicKey:m,signal:d});return f?{data:{factorId:t,challengeId:l.id,webauthn:{type:l.webauthn.type,credential_response:f}},error:null}:{data:null,error:p}}case"request":{const m=r6(l.webauthn.credential_options.publicKey,i==null?void 0:i.request),{data:f,error:p}=await Q$(Object.assign(Object.assign({},l.webauthn.credential_options),{publicKey:m,signal:d}));return f?{data:{factorId:t,challengeId:l.id,webauthn:{type:l.webauthn.type,credential_response:f}},error:null}:{data:null,error:p}}}}catch(l){return It(l)?{data:null,error:l}:{data:null,error:new jl("Unexpected error in challenge",l)}}}async _verify({challengeId:t,factorId:r,webauthn:n}){return this.client.mfa.verify({factorId:r,challengeId:t,webauthn:n})}async _authenticate({factorId:t,webauthn:{rpId:r=typeof window<"u"?window.location.hostname:void 0,rpOrigins:n=typeof window<"u"?[window.location.origin]:void 0,signal:s}},i){if(!r)return{data:null,error:new Sd("rpId is required for WebAuthn authentication")};try{if(!wS())return{data:null,error:new jl("Browser does not support WebAuthn",null)};const{data:l,error:u}=await this.challenge({factorId:t,webauthn:{rpId:r,rpOrigins:n},signal:s},{request:i});if(!l)return{data:null,error:u};const{webauthn:d}=l;return this._verify({factorId:t,challengeId:l.challengeId,webauthn:{type:d.type,rpId:r,rpOrigins:n,credential_response:d.credential_response}})}catch(l){return It(l)?{data:null,error:l}:{data:null,error:new jl("Unexpected error in authenticate",l)}}}async _register({friendlyName:t,rpId:r=typeof window<"u"?window.location.hostname:void 0,rpOrigins:n=typeof window<"u"?[window.location.origin]:void 0,signal:s},i){if(!r)return{data:null,error:new Sd("rpId is required for WebAuthn registration")};try{if(!wS())return{data:null,error:new jl("Browser does not support WebAuthn",null)};const{data:l,error:u}=await this._enroll({friendlyName:t});if(!l)return await this.client.mfa.listFactors().then(f=>{var p;return(p=f.data)===null||p===void 0?void 0:p.all.find(v=>v.factor_type==="webauthn"&&v.friendly_name===t&&v.status!=="unverified")}).then(f=>f?this.client.mfa.unenroll({factorId:f==null?void 0:f.id}):void 0),{data:null,error:u};const{data:d,error:m}=await this._challenge({factorId:l.id,friendlyName:l.friendly_name,webauthn:{rpId:r,rpOrigins:n},signal:s},{create:i});return d?this._verify({factorId:l.id,challengeId:d.challengeId,webauthn:{rpId:r,rpOrigins:n,type:d.webauthn.type,credential_response:d.webauthn.credential_response}}):{data:null,error:m}}catch(l){return It(l)?{data:null,error:l}:{data:null,error:new jl("Unexpected error in register",l)}}}}L$();const s6={url:Z5,storageKey:e$,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:t$,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function bS(e,t,r){return await r()}const Cc={};class kd{get jwks(){var t,r;return(r=(t=Cc[this.storageKey])===null||t===void 0?void 0:t.jwks)!==null&&r!==void 0?r:{keys:[]}}set jwks(t){Cc[this.storageKey]=Object.assign(Object.assign({},Cc[this.storageKey]),{jwks:t})}get jwks_cached_at(){var t,r;return(r=(t=Cc[this.storageKey])===null||t===void 0?void 0:t.cachedAt)!==null&&r!==void 0?r:Number.MIN_SAFE_INTEGER}set jwks_cached_at(t){Cc[this.storageKey]=Object.assign(Object.assign({},Cc[this.storageKey]),{cachedAt:t})}constructor(t){var r,n;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=kd.nextInstanceID,kd.nextInstanceID+=1,this.instanceID>0&&ii()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const s=Object.assign(Object.assign({},s6),t);if(this.logDebugMessages=!!s.debug,typeof s.debug=="function"&&(this.logger=s.debug),this.persistSession=s.persistSession,this.storageKey=s.storageKey,this.autoRefreshToken=s.autoRefreshToken,this.admin=new R$({url:s.url,headers:s.headers,fetch:s.fetch}),this.url=s.url,this.headers=s.headers,this.fetch=yE(s.fetch),this.lock=s.lock||bS,this.detectSessionInUrl=s.detectSessionInUrl,this.flowType=s.flowType,this.hasCustomAuthorizationHeader=s.hasCustomAuthorizationHeader,s.lock?this.lock=s.lock:ii()&&(!((r=globalThis==null?void 0:globalThis.navigator)===null||r===void 0)&&r.locks)?this.lock=F$:this.lock=bS,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new n6(this)},this.persistSession?(s.storage?this.storage=s.storage:gE()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=xS(this.memoryStorage)),s.userStorage&&(this.userStorage=s.userStorage)):(this.memoryStorage={},this.storage=xS(this.memoryStorage)),ii()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(i){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",i)}(n=this.broadcastChannel)===null||n===void 0||n.addEventListener("message",async i=>{this._debug("received broadcast notification from other tab or client",i),await this._notifyAllSubscribers(i.data.event,i.data.session,!1)})}this.initialize()}_debug(...t){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${hE}) ${new Date().toISOString()}`,...t),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var t;try{const r=p$(window.location.href);let n="none";if(this._isImplicitGrantCallback(r)?n="implicit":await this._isPKCECallback(r)&&(n="pkce"),ii()&&this.detectSessionInUrl&&n!=="none"){const{data:s,error:i}=await this._getSessionFromURL(r,n);if(i){if(this._debug("#_initialize()","error detecting session from URL",i),o$(i)){const d=(t=i.details)===null||t===void 0?void 0:t.code;if(d==="identity_already_exists"||d==="identity_not_found"||d==="single_identity_not_deletable")return{error:i}}return await this._removeSession(),{error:i}}const{session:l,redirectType:u}=s;return this._debug("#_initialize()","detected session in URL",l,"redirect type",u),await this._saveSession(l),setTimeout(async()=>{u==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",l):await this._notifyAllSubscribers("SIGNED_IN",l)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(r){return It(r)?{error:r}:{error:new jl("Unexpected error during initialization",r)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(t){var r,n,s;try{const i=await qt(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(n=(r=t==null?void 0:t.options)===null||r===void 0?void 0:r.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:(s=t==null?void 0:t.options)===null||s===void 0?void 0:s.captchaToken}},xform:Qi}),{data:l,error:u}=i;if(u||!l)return{data:{user:null,session:null},error:u};const d=l.session,m=l.user;return l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",d)),{data:{user:m,session:d},error:null}}catch(i){if(It(i))return{data:{user:null,session:null},error:i};throw i}}async signUp(t){var r,n,s;try{let i;if("email"in t){const{email:f,password:p,options:v}=t;let x=null,b=null;this.flowType==="pkce"&&([x,b]=await kc(this.storage,this.storageKey)),i=await qt(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:v==null?void 0:v.emailRedirectTo,body:{email:f,password:p,data:(r=v==null?void 0:v.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:v==null?void 0:v.captchaToken},code_challenge:x,code_challenge_method:b},xform:Qi})}else if("phone"in t){const{phone:f,password:p,options:v}=t;i=await qt(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:f,password:p,data:(n=v==null?void 0:v.data)!==null&&n!==void 0?n:{},channel:(s=v==null?void 0:v.channel)!==null&&s!==void 0?s:"sms",gotrue_meta_security:{captcha_token:v==null?void 0:v.captchaToken}},xform:Qi})}else throw new nh("You must provide either an email or phone number and a password");const{data:l,error:u}=i;if(u||!l)return{data:{user:null,session:null},error:u};const d=l.session,m=l.user;return l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",d)),{data:{user:m,session:d},error:null}}catch(i){if(It(i))return{data:{user:null,session:null},error:i};throw i}}async signInWithPassword(t){try{let r;if("email"in t){const{email:i,password:l,options:u}=t;r=await qt(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:i,password:l,gotrue_meta_security:{captcha_token:u==null?void 0:u.captchaToken}},xform:yS})}else if("phone"in t){const{phone:i,password:l,options:u}=t;r=await qt(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:i,password:l,gotrue_meta_security:{captcha_token:u==null?void 0:u.captchaToken}},xform:yS})}else throw new nh("You must provide either an email or phone number and a password");const{data:n,error:s}=r;return s?{data:{user:null,session:null},error:s}:!n||!n.session||!n.user?{data:{user:null,session:null},error:new Sc}:(n.session&&(await this._saveSession(n.session),await this._notifyAllSubscribers("SIGNED_IN",n.session)),{data:Object.assign({user:n.user,session:n.session},n.weak_password?{weakPassword:n.weak_password}:null),error:s})}catch(r){if(It(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithOAuth(t){var r,n,s,i;return await this._handleProviderSignIn(t.provider,{redirectTo:(r=t.options)===null||r===void 0?void 0:r.redirectTo,scopes:(n=t.options)===null||n===void 0?void 0:n.scopes,queryParams:(s=t.options)===null||s===void 0?void 0:s.queryParams,skipBrowserRedirect:(i=t.options)===null||i===void 0?void 0:i.skipBrowserRedirect})}async exchangeCodeForSession(t){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(t))}async signInWithWeb3(t){const{chain:r}=t;switch(r){case"ethereum":return await this.signInWithEthereum(t);case"solana":return await this.signInWithSolana(t);default:throw new Error(`@supabase/auth-js: Unsupported chain "${r}"`)}}async signInWithEthereum(t){var r,n,s,i,l,u,d,m,f,p,v;let x,b;if("message"in t)x=t.message,b=t.signature;else{const{chain:S,wallet:j,statement:N,options:E}=t;let C;if(ii())if(typeof j=="object")C=j;else{const L=window;if("ethereum"in L&&typeof L.ethereum=="object"&&"request"in L.ethereum&&typeof L.ethereum.request=="function")C=L.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof j!="object"||!(E!=null&&E.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");C=j}const I=new URL((r=E==null?void 0:E.url)!==null&&r!==void 0?r:window.location.href),T=await C.request({method:"eth_requestAccounts"}).then(L=>L).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!T||T.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const O=xE(T[0]);let V=(n=E==null?void 0:E.signInWithEthereum)===null||n===void 0?void 0:n.chainId;if(!V){const L=await C.request({method:"eth_chainId"});V=z$(L)}const F={domain:I.host,address:O,statement:N,uri:I.href,version:"1",chainId:V,nonce:(s=E==null?void 0:E.signInWithEthereum)===null||s===void 0?void 0:s.nonce,issuedAt:(l=(i=E==null?void 0:E.signInWithEthereum)===null||i===void 0?void 0:i.issuedAt)!==null&&l!==void 0?l:new Date,expirationTime:(u=E==null?void 0:E.signInWithEthereum)===null||u===void 0?void 0:u.expirationTime,notBefore:(d=E==null?void 0:E.signInWithEthereum)===null||d===void 0?void 0:d.notBefore,requestId:(m=E==null?void 0:E.signInWithEthereum)===null||m===void 0?void 0:m.requestId,resources:(f=E==null?void 0:E.signInWithEthereum)===null||f===void 0?void 0:f.resources};x=B$(F),b=await C.request({method:"personal_sign",params:[U$(x),O]})}try{const{data:S,error:j}=await qt(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:x,signature:b},!((p=t.options)===null||p===void 0)&&p.captchaToken?{gotrue_meta_security:{captcha_token:(v=t.options)===null||v===void 0?void 0:v.captchaToken}}:null),xform:Qi});if(j)throw j;return!S||!S.session||!S.user?{data:{user:null,session:null},error:new Sc}:(S.session&&(await this._saveSession(S.session),await this._notifyAllSubscribers("SIGNED_IN",S.session)),{data:Object.assign({},S),error:j})}catch(S){if(It(S))return{data:{user:null,session:null},error:S};throw S}}async signInWithSolana(t){var r,n,s,i,l,u,d,m,f,p,v,x;let b,S;if("message"in t)b=t.message,S=t.signature;else{const{chain:j,wallet:N,statement:E,options:C}=t;let I;if(ii())if(typeof N=="object")I=N;else{const O=window;if("solana"in O&&typeof O.solana=="object"&&("signIn"in O.solana&&typeof O.solana.signIn=="function"||"signMessage"in O.solana&&typeof O.solana.signMessage=="function"))I=O.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof N!="object"||!(C!=null&&C.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");I=N}const T=new URL((r=C==null?void 0:C.url)!==null&&r!==void 0?r:window.location.href);if("signIn"in I&&I.signIn){const O=await I.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},C==null?void 0:C.signInWithSolana),{version:"1",domain:T.host,uri:T.href}),E?{statement:E}:null));let V;if(Array.isArray(O)&&O[0]&&typeof O[0]=="object")V=O[0];else if(O&&typeof O=="object"&&"signedMessage"in O&&"signature"in O)V=O;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in V&&"signature"in V&&(typeof V.signedMessage=="string"||V.signedMessage instanceof Uint8Array)&&V.signature instanceof Uint8Array)b=typeof V.signedMessage=="string"?V.signedMessage:new TextDecoder().decode(V.signedMessage),S=V.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in I)||typeof I.signMessage!="function"||!("publicKey"in I)||typeof I!="object"||!I.publicKey||!("toBase58"in I.publicKey)||typeof I.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");b=[`${T.host} wants you to sign in with your Solana account:`,I.publicKey.toBase58(),...E?["",E,""]:[""],"Version: 1",`URI: ${T.href}`,`Issued At: ${(s=(n=C==null?void 0:C.signInWithSolana)===null||n===void 0?void 0:n.issuedAt)!==null&&s!==void 0?s:new Date().toISOString()}`,...!((i=C==null?void 0:C.signInWithSolana)===null||i===void 0)&&i.notBefore?[`Not Before: ${C.signInWithSolana.notBefore}`]:[],...!((l=C==null?void 0:C.signInWithSolana)===null||l===void 0)&&l.expirationTime?[`Expiration Time: ${C.signInWithSolana.expirationTime}`]:[],...!((u=C==null?void 0:C.signInWithSolana)===null||u===void 0)&&u.chainId?[`Chain ID: ${C.signInWithSolana.chainId}`]:[],...!((d=C==null?void 0:C.signInWithSolana)===null||d===void 0)&&d.nonce?[`Nonce: ${C.signInWithSolana.nonce}`]:[],...!((m=C==null?void 0:C.signInWithSolana)===null||m===void 0)&&m.requestId?[`Request ID: ${C.signInWithSolana.requestId}`]:[],...!((p=(f=C==null?void 0:C.signInWithSolana)===null||f===void 0?void 0:f.resources)===null||p===void 0)&&p.length?["Resources",...C.signInWithSolana.resources.map(V=>`- ${V}`)]:[]].join(`
`);const O=await I.signMessage(new TextEncoder().encode(b),"utf8");if(!O||!(O instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");S=O}}try{const{data:j,error:N}=await qt(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:b,signature:kl(S)},!((v=t.options)===null||v===void 0)&&v.captchaToken?{gotrue_meta_security:{captcha_token:(x=t.options)===null||x===void 0?void 0:x.captchaToken}}:null),xform:Qi});if(N)throw N;return!j||!j.session||!j.user?{data:{user:null,session:null},error:new Sc}:(j.session&&(await this._saveSession(j.session),await this._notifyAllSubscribers("SIGNED_IN",j.session)),{data:Object.assign({},j),error:N})}catch(j){if(It(j))return{data:{user:null,session:null},error:j};throw j}}async _exchangeCodeForSession(t){const r=await pl(this.storage,`${this.storageKey}-code-verifier`),[n,s]=(r??"").split("/");try{const{data:i,error:l}=await qt(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:t,code_verifier:n},xform:Qi});if(await $o(this.storage,`${this.storageKey}-code-verifier`),l)throw l;return!i||!i.session||!i.user?{data:{user:null,session:null,redirectType:null},error:new Sc}:(i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),{data:Object.assign(Object.assign({},i),{redirectType:s??null}),error:l})}catch(i){if(It(i))return{data:{user:null,session:null,redirectType:null},error:i};throw i}}async signInWithIdToken(t){try{const{options:r,provider:n,token:s,access_token:i,nonce:l}=t,u=await qt(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:n,id_token:s,access_token:i,nonce:l,gotrue_meta_security:{captcha_token:r==null?void 0:r.captchaToken}},xform:Qi}),{data:d,error:m}=u;return m?{data:{user:null,session:null},error:m}:!d||!d.session||!d.user?{data:{user:null,session:null},error:new Sc}:(d.session&&(await this._saveSession(d.session),await this._notifyAllSubscribers("SIGNED_IN",d.session)),{data:d,error:m})}catch(r){if(It(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithOtp(t){var r,n,s,i,l;try{if("email"in t){const{email:u,options:d}=t;let m=null,f=null;this.flowType==="pkce"&&([m,f]=await kc(this.storage,this.storageKey));const{error:p}=await qt(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:u,data:(r=d==null?void 0:d.data)!==null&&r!==void 0?r:{},create_user:(n=d==null?void 0:d.shouldCreateUser)!==null&&n!==void 0?n:!0,gotrue_meta_security:{captcha_token:d==null?void 0:d.captchaToken},code_challenge:m,code_challenge_method:f},redirectTo:d==null?void 0:d.emailRedirectTo});return{data:{user:null,session:null},error:p}}if("phone"in t){const{phone:u,options:d}=t,{data:m,error:f}=await qt(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:u,data:(s=d==null?void 0:d.data)!==null&&s!==void 0?s:{},create_user:(i=d==null?void 0:d.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:d==null?void 0:d.captchaToken},channel:(l=d==null?void 0:d.channel)!==null&&l!==void 0?l:"sms"}});return{data:{user:null,session:null,messageId:m==null?void 0:m.message_id},error:f}}throw new nh("You must provide either an email or phone number.")}catch(u){if(It(u))return{data:{user:null,session:null},error:u};throw u}}async verifyOtp(t){var r,n;try{let s,i;"options"in t&&(s=(r=t.options)===null||r===void 0?void 0:r.redirectTo,i=(n=t.options)===null||n===void 0?void 0:n.captchaToken);const{data:l,error:u}=await qt(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},t),{gotrue_meta_security:{captcha_token:i}}),redirectTo:s,xform:Qi});if(u)throw u;if(!l)throw new Error("An error occurred on token verification.");const d=l.session,m=l.user;return d!=null&&d.access_token&&(await this._saveSession(d),await this._notifyAllSubscribers(t.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",d)),{data:{user:m,session:d},error:null}}catch(s){if(It(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithSSO(t){var r,n,s;try{let i=null,l=null;return this.flowType==="pkce"&&([i,l]=await kc(this.storage,this.storageKey)),await qt(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in t?{provider_id:t.providerId}:null),"domain"in t?{domain:t.domain}:null),{redirect_to:(n=(r=t.options)===null||r===void 0?void 0:r.redirectTo)!==null&&n!==void 0?n:void 0}),!((s=t==null?void 0:t.options)===null||s===void 0)&&s.captchaToken?{gotrue_meta_security:{captcha_token:t.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:i,code_challenge_method:l}),headers:this.headers,xform:O$})}catch(i){if(It(i))return{data:null,error:i};throw i}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async t=>{const{data:{session:r},error:n}=t;if(n)throw n;if(!r)throw new Ro;const{error:s}=await qt(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:r.access_token});return{data:{user:null,session:null},error:s}})}catch(t){if(It(t))return{data:{user:null,session:null},error:t};throw t}}async resend(t){try{const r=`${this.url}/resend`;if("email"in t){const{email:n,type:s,options:i}=t,{error:l}=await qt(this.fetch,"POST",r,{headers:this.headers,body:{email:n,type:s,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}},redirectTo:i==null?void 0:i.emailRedirectTo});return{data:{user:null,session:null},error:l}}else if("phone"in t){const{phone:n,type:s,options:i}=t,{data:l,error:u}=await qt(this.fetch,"POST",r,{headers:this.headers,body:{phone:n,type:s,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}}});return{data:{user:null,session:null,messageId:l==null?void 0:l.message_id},error:u}}throw new nh("You must provide either an email or phone number and a type")}catch(r){if(It(r))return{data:{user:null,session:null},error:r};throw r}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async r=>r))}async _acquireLock(t,r){this._debug("#_acquireLock","begin",t);try{if(this.lockAcquired){const n=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),s=(async()=>(await n,await r()))();return this.pendingInLock.push((async()=>{try{await s}catch{}})()),s}return await this.lock(`lock:${this.storageKey}`,t,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const n=r();for(this.pendingInLock.push((async()=>{try{await n}catch{}})()),await n;this.pendingInLock.length;){const s=[...this.pendingInLock];await Promise.all(s),this.pendingInLock.splice(0,s.length)}return await n}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(t){this._debug("#_useSession","begin");try{const r=await this.__loadSession();return await t(r)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let t=null;const r=await pl(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",r),r!==null&&(this._isValidSession(r)?t=r:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!t)return{data:{session:null},error:null};const n=t.expires_at?t.expires_at*1e3-Date.now()<my:!1;if(this._debug("#__loadSession()",`session has${n?"":" not"} expired`,"expires_at",t.expires_at),!n){if(this.userStorage){const l=await pl(this.userStorage,this.storageKey+"-user");l!=null&&l.user?t.user=l.user:t.user=yy()}if(this.storage.isServer&&t.user){let l=this.suppressGetSessionWarning;t=new Proxy(t,{get:(d,m,f)=>(!l&&m==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),l=!0,this.suppressGetSessionWarning=!0),Reflect.get(d,m,f))})}return{data:{session:t},error:null}}const{data:s,error:i}=await this._callRefreshToken(t.refresh_token);return i?{data:{session:null},error:i}:{data:{session:s},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(t){return t?await this._getUser(t):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(t){try{return t?await qt(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:t,xform:Uo}):await this._useSession(async r=>{var n,s,i;const{data:l,error:u}=r;if(u)throw u;return!(!((n=l.session)===null||n===void 0)&&n.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Ro}:await qt(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(i=(s=l.session)===null||s===void 0?void 0:s.access_token)!==null&&i!==void 0?i:void 0,xform:Uo})})}catch(r){if(It(r))return a$(r)&&(await this._removeSession(),await $o(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:r};throw r}}async updateUser(t,r={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(t,r))}async _updateUser(t,r={}){try{return await this._useSession(async n=>{const{data:s,error:i}=n;if(i)throw i;if(!s.session)throw new Ro;const l=s.session;let u=null,d=null;this.flowType==="pkce"&&t.email!=null&&([u,d]=await kc(this.storage,this.storageKey));const{data:m,error:f}=await qt(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:r==null?void 0:r.emailRedirectTo,body:Object.assign(Object.assign({},t),{code_challenge:u,code_challenge_method:d}),jwt:l.access_token,xform:Uo});if(f)throw f;return l.user=m.user,await this._saveSession(l),await this._notifyAllSubscribers("USER_UPDATED",l),{data:{user:l.user},error:null}})}catch(n){if(It(n))return{data:{user:null},error:n};throw n}}async setSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(t))}async _setSession(t){try{if(!t.access_token||!t.refresh_token)throw new Ro;const r=Date.now()/1e3;let n=r,s=!0,i=null;const{payload:l}=gy(t.access_token);if(l.exp&&(n=l.exp,s=n<=r),s){const{data:u,error:d}=await this._callRefreshToken(t.refresh_token);if(d)return{data:{user:null,session:null},error:d};if(!u)return{data:{user:null,session:null},error:null};i=u}else{const{data:u,error:d}=await this._getUser(t.access_token);if(d)throw d;i={access_token:t.access_token,refresh_token:t.refresh_token,user:u.user,token_type:"bearer",expires_in:n-r,expires_at:n},await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)}return{data:{user:i.user,session:i},error:null}}catch(r){if(It(r))return{data:{session:null,user:null},error:r};throw r}}async refreshSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(t))}async _refreshSession(t){try{return await this._useSession(async r=>{var n;if(!t){const{data:l,error:u}=r;if(u)throw u;t=(n=l.session)!==null&&n!==void 0?n:void 0}if(!(t!=null&&t.refresh_token))throw new Ro;const{data:s,error:i}=await this._callRefreshToken(t.refresh_token);return i?{data:{user:null,session:null},error:i}:s?{data:{user:s.user,session:s},error:null}:{data:{user:null,session:null},error:null}})}catch(r){if(It(r))return{data:{user:null,session:null},error:r};throw r}}async _getSessionFromURL(t,r){try{if(!ii())throw new sh("No browser detected.");if(t.error||t.error_description||t.error_code)throw new sh(t.error_description||"Error in URL with unspecified error_description",{error:t.error||"unspecified_error",code:t.error_code||"unspecified_code"});switch(r){case"implicit":if(this.flowType==="pkce")throw new uS("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new sh("Not a valid implicit grant flow url.");break;default:}if(r==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!t.code)throw new uS("No code detected.");const{data:E,error:C}=await this._exchangeCodeForSession(t.code);if(C)throw C;const I=new URL(window.location.href);return I.searchParams.delete("code"),window.history.replaceState(window.history.state,"",I.toString()),{data:{session:E.session,redirectType:null},error:null}}const{provider_token:n,provider_refresh_token:s,access_token:i,refresh_token:l,expires_in:u,expires_at:d,token_type:m}=t;if(!i||!u||!l||!m)throw new sh("No session defined in URL");const f=Math.round(Date.now()/1e3),p=parseInt(u);let v=f+p;d&&(v=parseInt(d));const x=v-f;x*1e3<=Dc&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${x}s, should have been closer to ${p}s`);const b=v-p;f-b>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",b,v,f):f-b<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",b,v,f);const{data:S,error:j}=await this._getUser(i);if(j)throw j;const N={provider_token:n,provider_refresh_token:s,access_token:i,expires_in:p,expires_at:v,refresh_token:l,token_type:m,user:S.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:N,redirectType:t.type},error:null}}catch(n){if(It(n))return{data:{session:null,redirectType:null},error:n};throw n}}_isImplicitGrantCallback(t){return!!(t.access_token||t.error_description)}async _isPKCECallback(t){const r=await pl(this.storage,`${this.storageKey}-code-verifier`);return!!(t.code&&r)}async signOut(t={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(t))}async _signOut({scope:t}={scope:"global"}){return await this._useSession(async r=>{var n;const{data:s,error:i}=r;if(i)return{error:i};const l=(n=s.session)===null||n===void 0?void 0:n.access_token;if(l){const{error:u}=await this.admin.signOut(l,t);if(u&&!(i$(u)&&(u.status===404||u.status===401||u.status===403)))return{error:u}}return t!=="others"&&(await this._removeSession(),await $o(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(t){const r=m$(),n={id:r,callback:t,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",r),this.stateChangeEmitters.delete(r)}};return this._debug("#onAuthStateChange()","registered callback with id",r),this.stateChangeEmitters.set(r,n),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(r)})))(),{data:{subscription:n}}}async _emitInitialSession(t){return await this._useSession(async r=>{var n,s;try{const{data:{session:i},error:l}=r;if(l)throw l;await((n=this.stateChangeEmitters.get(t))===null||n===void 0?void 0:n.callback("INITIAL_SESSION",i)),this._debug("INITIAL_SESSION","callback id",t,"session",i)}catch(i){await((s=this.stateChangeEmitters.get(t))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",t,"error",i),console.error(i)}})}async resetPasswordForEmail(t,r={}){let n=null,s=null;this.flowType==="pkce"&&([n,s]=await kc(this.storage,this.storageKey,!0));try{return await qt(this.fetch,"POST",`${this.url}/recover`,{body:{email:t,code_challenge:n,code_challenge_method:s,gotrue_meta_security:{captcha_token:r.captchaToken}},headers:this.headers,redirectTo:r.redirectTo})}catch(i){if(It(i))return{data:null,error:i};throw i}}async getUserIdentities(){var t;try{const{data:r,error:n}=await this.getUser();if(n)throw n;return{data:{identities:(t=r.user.identities)!==null&&t!==void 0?t:[]},error:null}}catch(r){if(It(r))return{data:null,error:r};throw r}}async linkIdentity(t){return"token"in t?this.linkIdentityIdToken(t):this.linkIdentityOAuth(t)}async linkIdentityOAuth(t){var r;try{const{data:n,error:s}=await this._useSession(async i=>{var l,u,d,m,f;const{data:p,error:v}=i;if(v)throw v;const x=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,t.provider,{redirectTo:(l=t.options)===null||l===void 0?void 0:l.redirectTo,scopes:(u=t.options)===null||u===void 0?void 0:u.scopes,queryParams:(d=t.options)===null||d===void 0?void 0:d.queryParams,skipBrowserRedirect:!0});return await qt(this.fetch,"GET",x,{headers:this.headers,jwt:(f=(m=p.session)===null||m===void 0?void 0:m.access_token)!==null&&f!==void 0?f:void 0})});if(s)throw s;return ii()&&!(!((r=t.options)===null||r===void 0)&&r.skipBrowserRedirect)&&window.location.assign(n==null?void 0:n.url),{data:{provider:t.provider,url:n==null?void 0:n.url},error:null}}catch(n){if(It(n))return{data:{provider:t.provider,url:null},error:n};throw n}}async linkIdentityIdToken(t){return await this._useSession(async r=>{var n;try{const{error:s,data:{session:i}}=r;if(s)throw s;const{options:l,provider:u,token:d,access_token:m,nonce:f}=t,p=await qt(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(n=i==null?void 0:i.access_token)!==null&&n!==void 0?n:void 0,body:{provider:u,id_token:d,access_token:m,nonce:f,link_identity:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:Qi}),{data:v,error:x}=p;return x?{data:{user:null,session:null},error:x}:!v||!v.session||!v.user?{data:{user:null,session:null},error:new Sc}:(v.session&&(await this._saveSession(v.session),await this._notifyAllSubscribers("USER_UPDATED",v.session)),{data:v,error:x})}catch(s){if(It(s))return{data:{user:null,session:null},error:s};throw s}})}async unlinkIdentity(t){try{return await this._useSession(async r=>{var n,s;const{data:i,error:l}=r;if(l)throw l;return await qt(this.fetch,"DELETE",`${this.url}/user/identities/${t.identity_id}`,{headers:this.headers,jwt:(s=(n=i.session)===null||n===void 0?void 0:n.access_token)!==null&&s!==void 0?s:void 0})})}catch(r){if(It(r))return{data:null,error:r};throw r}}async _refreshAccessToken(t){const r=`#_refreshAccessToken(${t.substring(0,5)}...)`;this._debug(r,"begin");try{const n=Date.now();return await v$(async s=>(s>0&&await y$(200*Math.pow(2,s-1)),this._debug(r,"refreshing attempt",s),await qt(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:t},headers:this.headers,xform:Qi})),(s,i)=>{const l=200*Math.pow(2,s);return i&&py(i)&&Date.now()+l-n<Dc})}catch(n){if(this._debug(r,"error",n),It(n))return{data:{session:null,user:null},error:n};throw n}finally{this._debug(r,"end")}}_isValidSession(t){return typeof t=="object"&&t!==null&&"access_token"in t&&"refresh_token"in t&&"expires_at"in t}async _handleProviderSignIn(t,r){const n=await this._getUrlForProvider(`${this.url}/authorize`,t,{redirectTo:r.redirectTo,scopes:r.scopes,queryParams:r.queryParams});return this._debug("#_handleProviderSignIn()","provider",t,"options",r,"url",n),ii()&&!r.skipBrowserRedirect&&window.location.assign(n),{data:{provider:t,url:n},error:null}}async _recoverAndRefresh(){var t,r;const n="#_recoverAndRefresh()";this._debug(n,"begin");try{const s=await pl(this.storage,this.storageKey);if(s&&this.userStorage){let l=await pl(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!l&&(l={user:s.user},await $c(this.userStorage,this.storageKey+"-user",l)),s.user=(t=l==null?void 0:l.user)!==null&&t!==void 0?t:yy()}else if(s&&!s.user&&!s.user){const l=await pl(this.storage,this.storageKey+"-user");l&&(l!=null&&l.user)?(s.user=l.user,await $o(this.storage,this.storageKey+"-user"),await $c(this.storage,this.storageKey,s)):s.user=yy()}if(this._debug(n,"session from storage",s),!this._isValidSession(s)){this._debug(n,"session is not valid"),s!==null&&await this._removeSession();return}const i=((r=s.expires_at)!==null&&r!==void 0?r:1/0)*1e3-Date.now()<my;if(this._debug(n,`session has${i?"":" not"} expired with margin of ${my}s`),i){if(this.autoRefreshToken&&s.refresh_token){const{error:l}=await this._callRefreshToken(s.refresh_token);l&&(console.error(l),py(l)||(this._debug(n,"refresh failed with a non-retryable error, removing the session",l),await this._removeSession()))}}else if(s.user&&s.user.__isUserNotAvailableProxy===!0)try{const{data:l,error:u}=await this._getUser(s.access_token);!u&&(l!=null&&l.user)?(s.user=l.user,await this._saveSession(s),await this._notifyAllSubscribers("SIGNED_IN",s)):this._debug(n,"could not get user data, skipping SIGNED_IN notification")}catch(l){console.error("Error getting user data:",l),this._debug(n,"error getting user data, skipping SIGNED_IN notification",l)}else await this._notifyAllSubscribers("SIGNED_IN",s)}catch(s){this._debug(n,"error",s),console.error(s);return}finally{this._debug(n,"end")}}async _callRefreshToken(t){var r,n;if(!t)throw new Ro;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const s=`#_callRefreshToken(${t.substring(0,5)}...)`;this._debug(s,"begin");try{this.refreshingDeferred=new zm;const{data:i,error:l}=await this._refreshAccessToken(t);if(l)throw l;if(!i.session)throw new Ro;await this._saveSession(i.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",i.session);const u={data:i.session,error:null};return this.refreshingDeferred.resolve(u),u}catch(i){if(this._debug(s,"error",i),It(i)){const l={data:null,error:i};return py(i)||await this._removeSession(),(r=this.refreshingDeferred)===null||r===void 0||r.resolve(l),l}throw(n=this.refreshingDeferred)===null||n===void 0||n.reject(i),i}finally{this.refreshingDeferred=null,this._debug(s,"end")}}async _notifyAllSubscribers(t,r,n=!0){const s=`#_notifyAllSubscribers(${t})`;this._debug(s,"begin",r,`broadcast = ${n}`);try{this.broadcastChannel&&n&&this.broadcastChannel.postMessage({event:t,session:r});const i=[],l=Array.from(this.stateChangeEmitters.values()).map(async u=>{try{await u.callback(t,r)}catch(d){i.push(d)}});if(await Promise.all(l),i.length>0){for(let u=0;u<i.length;u+=1)console.error(i[u]);throw i[0]}}finally{this._debug(s,"end")}}async _saveSession(t){this._debug("#_saveSession()",t),this.suppressGetSessionWarning=!0;const r=Object.assign({},t),n=r.user&&r.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!n&&r.user&&await $c(this.userStorage,this.storageKey+"-user",{user:r.user});const s=Object.assign({},r);delete s.user;const i=pS(s);await $c(this.storage,this.storageKey,i)}else{const s=pS(r);await $c(this.storage,this.storageKey,s)}}async _removeSession(){this._debug("#_removeSession()"),await $o(this.storage,this.storageKey),await $o(this.storage,this.storageKey+"-code-verifier"),await $o(this.storage,this.storageKey+"-user"),this.userStorage&&await $o(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const t=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{t&&ii()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",t)}catch(r){console.error("removing visibilitychange callback failed",r)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const t=setInterval(()=>this._autoRefreshTokenTick(),Dc);this.autoRefreshTicker=t,t&&typeof t=="object"&&typeof t.unref=="function"?t.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(t),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const t=this.autoRefreshTicker;this.autoRefreshTicker=null,t&&clearInterval(t)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const t=Date.now();try{return await this._useSession(async r=>{const{data:{session:n}}=r;if(!n||!n.refresh_token||!n.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const s=Math.floor((n.expires_at*1e3-t)/Dc);this._debug("#_autoRefreshTokenTick()",`access token expires in ${s} ticks, a tick lasts ${Dc}ms, refresh threshold is ${mv} ticks`),s<=mv&&await this._callRefreshToken(n.refresh_token)})}catch(r){console.error("Auto refresh tick failed with error. This is likely a transient error.",r)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(t){if(t.isAcquireTimeout||t instanceof vE)this._debug("auto refresh token tick lock not available");else throw t}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!ii()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(t){console.error("_handleVisibilityChange",t)}}async _onVisibilityChanged(t){const r=`#_onVisibilityChanged(${t})`;this._debug(r,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),t||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(r,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(t,r,n){const s=[`provider=${encodeURIComponent(r)}`];if(n!=null&&n.redirectTo&&s.push(`redirect_to=${encodeURIComponent(n.redirectTo)}`),n!=null&&n.scopes&&s.push(`scopes=${encodeURIComponent(n.scopes)}`),this.flowType==="pkce"){const[i,l]=await kc(this.storage,this.storageKey),u=new URLSearchParams({code_challenge:`${encodeURIComponent(i)}`,code_challenge_method:`${encodeURIComponent(l)}`});s.push(u.toString())}if(n!=null&&n.queryParams){const i=new URLSearchParams(n.queryParams);s.push(i.toString())}return n!=null&&n.skipBrowserRedirect&&s.push(`skip_http_redirect=${n.skipBrowserRedirect}`),`${t}?${s.join("&")}`}async _unenroll(t){try{return await this._useSession(async r=>{var n;const{data:s,error:i}=r;return i?{data:null,error:i}:await qt(this.fetch,"DELETE",`${this.url}/factors/${t.factorId}`,{headers:this.headers,jwt:(n=s==null?void 0:s.session)===null||n===void 0?void 0:n.access_token})})}catch(r){if(It(r))return{data:null,error:r};throw r}}async _enroll(t){try{return await this._useSession(async r=>{var n,s;const{data:i,error:l}=r;if(l)return{data:null,error:l};const u=Object.assign({friendly_name:t.friendlyName,factor_type:t.factorType},t.factorType==="phone"?{phone:t.phone}:t.factorType==="totp"?{issuer:t.issuer}:{}),{data:d,error:m}=await qt(this.fetch,"POST",`${this.url}/factors`,{body:u,headers:this.headers,jwt:(n=i==null?void 0:i.session)===null||n===void 0?void 0:n.access_token});return m?{data:null,error:m}:(t.factorType==="totp"&&d.type==="totp"&&(!((s=d==null?void 0:d.totp)===null||s===void 0)&&s.qr_code)&&(d.totp.qr_code=`data:image/svg+xml;utf-8,${d.totp.qr_code}`),{data:d,error:null})})}catch(r){if(It(r))return{data:null,error:r};throw r}}async _verify(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var n;const{data:s,error:i}=r;if(i)return{data:null,error:i};const l=Object.assign({challenge_id:t.challengeId},"webauthn"in t?{webauthn:Object.assign(Object.assign({},t.webauthn),{credential_response:t.webauthn.type==="create"?Y$(t.webauthn.credential_response):J$(t.webauthn.credential_response)})}:{code:t.code}),{data:u,error:d}=await qt(this.fetch,"POST",`${this.url}/factors/${t.factorId}/verify`,{body:l,headers:this.headers,jwt:(n=s==null?void 0:s.session)===null||n===void 0?void 0:n.access_token});return d?{data:null,error:d}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+u.expires_in},u)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",u),{data:u,error:d})})}catch(r){if(It(r))return{data:null,error:r};throw r}})}async _challenge(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var n;const{data:s,error:i}=r;if(i)return{data:null,error:i};const l=await qt(this.fetch,"POST",`${this.url}/factors/${t.factorId}/challenge`,{body:t,headers:this.headers,jwt:(n=s==null?void 0:s.session)===null||n===void 0?void 0:n.access_token});if(l.error)return l;const{data:u}=l;if(u.type!=="webauthn")return{data:u,error:null};switch(u.webauthn.type){case"create":return{data:Object.assign(Object.assign({},u),{webauthn:Object.assign(Object.assign({},u.webauthn),{credential_options:Object.assign(Object.assign({},u.webauthn.credential_options),{publicKey:K$(u.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},u),{webauthn:Object.assign(Object.assign({},u.webauthn),{credential_options:Object.assign(Object.assign({},u.webauthn.credential_options),{publicKey:G$(u.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(r){if(It(r))return{data:null,error:r};throw r}})}async _challengeAndVerify(t){const{data:r,error:n}=await this._challenge({factorId:t.factorId});return n?{data:null,error:n}:await this._verify({factorId:t.factorId,challengeId:r.id,code:t.code})}async _listFactors(){var t;const{data:{user:r},error:n}=await this.getUser();if(n)return{data:null,error:n};const s={all:[],phone:[],totp:[],webauthn:[]};for(const i of(t=r==null?void 0:r.factors)!==null&&t!==void 0?t:[])s.all.push(i),i.status==="verified"&&s[i.factor_type].push(i);return{data:s,error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async t=>{var r,n;const{data:{session:s},error:i}=t;if(i)return{data:null,error:i};if(!s)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:l}=gy(s.access_token);let u=null;l.aal&&(u=l.aal);let d=u;((n=(r=s.user.factors)===null||r===void 0?void 0:r.filter(p=>p.status==="verified"))!==null&&n!==void 0?n:[]).length>0&&(d="aal2");const f=l.amr||[];return{data:{currentLevel:u,nextLevel:d,currentAuthenticationMethods:f},error:null}}))}async fetchJwk(t,r={keys:[]}){let n=r.keys.find(u=>u.kid===t);if(n)return n;const s=Date.now();if(n=this.jwks.keys.find(u=>u.kid===t),n&&this.jwks_cached_at+n$>s)return n;const{data:i,error:l}=await qt(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(l)throw l;return!i.keys||i.keys.length===0||(this.jwks=i,this.jwks_cached_at=s,n=i.keys.find(u=>u.kid===t),!n)?null:n}async getClaims(t,r={}){try{let n=t;if(!n){const{data:x,error:b}=await this.getSession();if(b||!x.session)return{data:null,error:b};n=x.session.access_token}const{header:s,payload:i,signature:l,raw:{header:u,payload:d}}=gy(n);r!=null&&r.allowExpired||_$(i.exp);const m=!s.alg||s.alg.startsWith("HS")||!s.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(s.kid,r!=null&&r.keys?{keys:r.keys}:r==null?void 0:r.jwks);if(!m){const{error:x}=await this.getUser(n);if(x)throw x;return{data:{claims:i,header:s,signature:l},error:null}}const f=N$(s.alg),p=await crypto.subtle.importKey("jwk",m,f,!0,["verify"]);if(!await crypto.subtle.verify(f,p,l,f$(`${u}.${d}`)))throw new yv("Invalid JWT signature");return{data:{claims:i,header:s,signature:l},error:null}}catch(n){if(It(n))return{data:null,error:n};throw n}}}kd.nextInstanceID=0;const i6=kd;class a6 extends i6{constructor(t){super(t)}}var o6=function(e,t,r,n){function s(i){return i instanceof r?i:new r(function(l){l(i)})}return new(r||(r=Promise))(function(i,l){function u(f){try{m(n.next(f))}catch(p){l(p)}}function d(f){try{m(n.throw(f))}catch(p){l(p)}}function m(f){f.done?i(f.value):s(f.value).then(u,d)}m((n=n.apply(e,t||[])).next())})};class l6{constructor(t,r,n){var s,i,l;this.supabaseUrl=t,this.supabaseKey=r;const u=Q5(t);if(!r)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",u),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",u),this.storageUrl=new URL("storage/v1",u),this.functionsUrl=new URL("functions/v1",u);const d=`sb-${u.hostname.split(".")[0]}-auth-token`,m={db:B5,realtime:V5,auth:Object.assign(Object.assign({},W5),{storageKey:d}),global:U5},f=X5(n??{},m);this.storageKey=(s=f.auth.storageKey)!==null&&s!==void 0?s:"",this.headers=(i=f.global.headers)!==null&&i!==void 0?i:{},f.accessToken?(this.accessToken=f.accessToken,this.auth=new Proxy({},{get:(p,v)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(v)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((l=f.auth)!==null&&l!==void 0?l:{},this.headers,f.global.fetch),this.fetch=G5(r,this._getAccessToken.bind(this),f.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},f.realtime)),this.rest=new s5(new URL("rest/v1",u).href,{headers:this.headers,schema:f.db.schema,fetch:this.fetch}),this.storage=new F5(this.storageUrl.href,this.headers,this.fetch,n==null?void 0:n.storage),f.accessToken||this._listenForAuthEvents()}get functions(){return new G3(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(t){return this.rest.from(t)}schema(t){return this.rest.schema(t)}rpc(t,r={},n={}){return this.rest.rpc(t,r,n)}channel(t,r={config:{}}){return this.realtime.channel(t,r)}getChannels(){return this.realtime.getChannels()}removeChannel(t){return this.realtime.removeChannel(t)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){return o6(this,void 0,void 0,function*(){var t,r;if(this.accessToken)return yield this.accessToken();const{data:n}=yield this.auth.getSession();return(r=(t=n.session)===null||t===void 0?void 0:t.access_token)!==null&&r!==void 0?r:this.supabaseKey})}_initSupabaseAuthClient({autoRefreshToken:t,persistSession:r,detectSessionInUrl:n,storage:s,userStorage:i,storageKey:l,flowType:u,lock:d,debug:m},f,p){const v={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new a6({url:this.authUrl.href,headers:Object.assign(Object.assign({},v),f),storageKey:l,autoRefreshToken:t,persistSession:r,detectSessionInUrl:n,storage:s,userStorage:i,flowType:u,lock:d,debug:m,fetch:p,hasCustomAuthorizationHeader:Object.keys(this.headers).some(x=>x.toLowerCase()==="authorization")})}_initRealtimeClient(t){return new b5(this.realtimeUrl.href,Object.assign(Object.assign({},t),{params:Object.assign({apikey:this.supabaseKey},t==null?void 0:t.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((r,n)=>{this._handleTokenChanged(r,"CLIENT",n==null?void 0:n.access_token)})}_handleTokenChanged(t,r,n){(t==="TOKEN_REFRESHED"||t==="SIGNED_IN")&&this.changedAccessToken!==n?(this.changedAccessToken=n,this.realtime.setAuth(n)):t==="SIGNED_OUT"&&(this.realtime.setAuth(),r=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const c6=(e,t,r)=>new l6(e,t,r);function u6(){if(typeof window<"u"||typeof process>"u")return!1;const e=process.version;if(e==null)return!1;const t=e.match(/^v(\d+)\./);return t?parseInt(t[1],10)<=18:!1}u6()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const d6="https://okdzllfpsvltjqryslnn.supabase.co",f6="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im9rZHpsbGZwc3ZsdGpxcnlzbG5uIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTk3NTcxMTgsImV4cCI6MjA3NTMzMzExOH0.uLhMzo49-OMEp4ghFAFI31IpiDs1tjbyY2jZlk-vgUo",Ce=c6(d6,f6,{db:{schema:"public"},auth:{persistSession:!0,autoRefreshToken:!0}}),eo="__FEATURE_SUGGESTION__",Mx="__feature_suggestion__",h6="__feature_future_session__";function Um(e){let t={};if(e!=null&&e.description)try{t=JSON.parse(e.description)}catch(s){console.warn("[databaseService] Unable to parse suggestion payload",s),t={}}const n=(Array.isArray(e==null?void 0:e.tags)?e.tags:[]).includes(h6)?"future":"pending";return{id:e.id,session_id:e.session_id,title:e.title,summary:t.summary??null,whatWouldItDo:t.whatWouldItDo??null,howWouldItWork:t.howWouldItWork??null,status:n,requester_id:t.requesterId??null,requester_name:t.requesterName??null,requester_email:t.requesterEmail??null,attachment_urls:t.attachmentUrls??null,created_at:e.created_at}}async function jE(e){try{if(!Ce||typeof Ce.from!="function")throw new Error("Supabase client is not properly initialized");const t=`${Ce.supabaseUrl}/rest/v1/users?email=eq.${encodeURIComponent(e)}&select=*&limit=1`,r={apikey:Ce.supabaseKey,Authorization:`Bearer ${Ce.supabaseKey}`,"Content-Type":"application/json",Prefer:"return=representation"},n=fetch(t,{method:"GET",headers:r}).then(async f=>{if(!f.ok){const v=await f.text();throw console.error("[databaseService] Direct fetch error:",v),new Error(`API error: ${f.status} - ${v}`)}const p=await f.json();return{data:p.length>0?p[0]:null,error:null}}).catch(f=>{throw console.error("[databaseService] Direct fetch exception:",f),f}),s=Promise.race([n,new Promise((f,p)=>{setTimeout(()=>p(new Error("Direct fetch timeout after 5 seconds")),5e3)})]);try{const f=await s;if(f.data)return f.data}catch{}const i=Ce.from("users").select("*").eq("email",e).single(),u=await Promise.race([i,new Promise((f,p)=>{setTimeout(()=>{console.error("[databaseService]  TIMEOUT: Query did not complete after 10 seconds"),p(new Error("Query timeout after 10 seconds"))},1e4)})]),{data:d,error:m}=u;if(m){if(m.code==="PGRST116")return null;throw m}return d}catch(t){throw console.error("[databaseService] getUserByEmail error:",t),t}}async function m6(e){const t="5e5482eb-82f0-4e76-8a6b-c6d74b01cd3a",{data:r,error:n}=await Ce.from("users").insert([{email:e.email,name:e.name,tenant_id:e.tenant_id||t}]).select().single();if(n)throw console.error("[databaseService] createUser error:",n),n;return r}async function Fc(e,t){try{let r=await jE(e);return r||(r=await m6({email:e,name:t})),r}catch(r){throw console.error("[databaseService] Error in getOrCreateUser:",r),r}}async function vv(){const{data:e,error:t}=await Ce.from("users").select("*").order("created_at",{ascending:!1});if(t)throw t;return e||[]}async function p6(e){var l,u;const[t,r,n]=await Promise.all([Aa(e),Ce.from("session_admins").select("session_id").eq("user_id",e),Ce.from("users").select("email").eq("id",e).single()]),s=((l=r.data)==null?void 0:l.length)||0;let i=0;if((u=n.data)!=null&&u.email){const{data:d}=await Ce.from("session_stakeholders").select("session_id").eq("user_email",n.data.email);i=(d==null?void 0:d.length)||0}return{userId:e,isSystemAdmin:t,sessionAdminCount:s,stakeholderSessionCount:i}}const Vl="PRODUCTS_TABLE_MISSING";function Bc(e){return typeof e=="object"&&e!==null&&e.code===Vl}async function xv(){const{data:e,error:t}=await Ce.from("products").select("*").order("name",{ascending:!0});if(t){if((t==null?void 0:t.code)==="PGRST205"){const r=new Error("Products table is missing");throw r.code=Vl,r}throw t}return e||[]}async function Bo(e){const{data:t,error:r}=await Ce.from("products").select("*").eq("tenant_id",e).order("name",{ascending:!0});if(r){if((r==null?void 0:r.code)==="PGRST205"){const n=new Error("Products table is missing");throw n.code=Vl,n}throw r}return t||[]}async function g6(e){const{data:t,error:r}=await Ce.from("session_admins").select("session_id").eq("user_id",e);if(r)throw r;if(!t||t.length===0)return[];const n=t.map(m=>m.session_id),{data:s,error:i}=await Ce.from("voting_sessions").select("product_id").in("id",n).not("product_id","is",null);if(i)throw i;if(!s||s.length===0)return[];const l=[...new Set(s.map(m=>m.product_id).filter(Boolean))];if(l.length===0)return[];const{data:u,error:d}=await Ce.from("products").select("*").in("id",l).order("name",{ascending:!0});if(d){if((d==null?void 0:d.code)==="PGRST205"){const m=new Error("Products table is missing");throw m.code=Vl,m}throw d}return u||[]}async function SE(e,t){if(!e)throw new Error("Product ID is required");const r={};if(t.name!==void 0){const i=t.name.trim();if(!i)throw new Error("Product name cannot be empty");r.name=i}if(t.color_hex!==void 0&&(r.color_hex=t.color_hex),Object.keys(r).length===0)throw new Error("No updates provided");const{data:n,error:s}=await Ce.from("products").update(r).eq("id",e).select().single();if(s){if((s==null?void 0:s.code)==="PGRST205"){const i=new Error("Products table is missing");throw i.code=Vl,i}throw s}return n}async function jS(e,t,r){const n=t.trim();if(!n)throw new Error("Product name is required");const{data:s,error:i}=await Ce.from("products").insert([{name:n,tenant_id:e,color_hex:r||null}]).select().single();if(i){if((i==null?void 0:i.code)==="PGRST205"){const l=new Error("Products table is missing");throw l.code=Vl,l}if((i==null?void 0:i.code)==="23505"){const{data:l,error:u}=await Ce.from("products").select("*").eq("tenant_id",e).eq("name",n).maybeSingle();if(u)throw u;if(l)return l}throw i}return s}async function kE(e){const{error:t}=await Ce.from("products").delete().eq("id",e);if(t){if((t==null?void 0:t.code)==="PGRST205"){const r=new Error("Products table is missing");throw r.code=Vl,r}throw t}}const lu="*, product:products(name)";function Bm(e){if(!e)throw new Error("Unexpected empty session row");const{product:t,...r}=e,n=r.product_name??(t==null?void 0:t.name)??null;return{...r,product_name:n}}function Fx(e){return!e||e.length===0?[]:e.map(t=>Bm(t))}async function cu(){try{const e=`${Ce.supabaseUrl}/rest/v1/voting_sessions?select=${encodeURIComponent(lu)}&order=created_at.desc`,t={apikey:Ce.supabaseKey,Authorization:`Bearer ${Ce.supabaseKey}`,"Content-Type":"application/json"},r=await fetch(e,{method:"GET",headers:t});if(!r.ok){const s=await r.text();throw console.error("[databaseService] getAllSessions API error:",r.status,s),new Error(`API error: ${r.status} - ${s}`)}const n=await r.json();return Fx(n)}catch(e){throw console.error("[databaseService] Exception in getAllSessions:",e),e}}async function Lx(e){const{data:t,error:r}=await Ce.from("voting_sessions").select(lu).eq("id",e).single();if(r){if(r.code==="PGRST116")return null;throw r}return t?Bm(t):null}async function y6(e){const{data:t,error:r}=await Ce.from("voting_sessions").select(lu).eq("session_code",e).single();if(r){if(r.code==="PGRST116")return null;throw r}return t?Bm(t):null}async function SS(e){try{const t=`${Ce.supabaseUrl}/rest/v1/voting_sessions?product_id=eq.${e}&select=${encodeURIComponent(lu)}&order=created_at.desc`,r={apikey:Ce.supabaseKey,Authorization:`Bearer ${Ce.supabaseKey}`,"Content-Type":"application/json"},n=await fetch(t,{method:"GET",headers:r});if(!n.ok){const i=await n.text();throw console.error("[databaseService] getSessionsByProduct API error:",n.status,i),new Error(`API error: ${n.status} - ${i}`)}const s=await n.json();return Fx(s)}catch(t){throw console.error("[databaseService] Exception in getSessionsByProduct:",t),t}}async function _E(e){var t;try{if(await Aa(e))return cu();const n=`${Ce.supabaseUrl}/rest/v1/session_admins?user_id=eq.${e}&select=session_id`,s=await fetch(n,{method:"GET",headers:{apikey:Ce.supabaseKey,Authorization:`Bearer ${Ce.supabaseKey}`,"Content-Type":"application/json"}});if(!s.ok){const C=await s.text();throw console.error("[databaseService] Error loading session admins:",s.status,C),new Error(`API error: ${s.status} - ${C}`)}const i=await s.json(),l=(i==null?void 0:i.map(C=>C.session_id))||[],u=`${Ce.supabaseUrl}/rest/v1/users?id=eq.${e}&select=email&limit=1`,d=await fetch(u,{method:"GET",headers:{apikey:Ce.supabaseKey,Authorization:`Bearer ${Ce.supabaseKey}`,"Content-Type":"application/json"}});if(!d.ok){const C=await d.text();throw console.error("[databaseService] Error getting user email:",d.status,C),new Error(`API error: ${d.status} - ${C}`)}const m=await d.json(),f=(t=m==null?void 0:m[0])==null?void 0:t.email;if(!f)throw console.error("[databaseService] User email not found"),new Error("User email not found");const p=`${Ce.supabaseUrl}/rest/v1/session_stakeholders?user_email=eq.${encodeURIComponent(f)}&select=session_id`,v=await fetch(p,{method:"GET",headers:{apikey:Ce.supabaseKey,Authorization:`Bearer ${Ce.supabaseKey}`,"Content-Type":"application/json"}});if(!v.ok){const C=await v.text();throw console.error("[databaseService] Error loading session stakeholders:",v.status,C),new Error(`API error: ${v.status} - ${C}`)}const x=await v.json(),b=(x==null?void 0:x.map(C=>C.session_id))||[],S=[...new Set([...l,...b])];if(S.length===0)return[];const j=`${Ce.supabaseUrl}/rest/v1/voting_sessions?select=${encodeURIComponent(lu)}&id=in.(${S.join(",")})&order=created_at.desc`,N=await fetch(j,{method:"GET",headers:{apikey:Ce.supabaseKey,Authorization:`Bearer ${Ce.supabaseKey}`,"Content-Type":"application/json"}});if(!N.ok){const C=await N.text();throw console.error("[databaseService] Error loading voting sessions:",N.status,C),new Error(`API error: ${N.status} - ${C}`)}const E=await N.json();return Fx(E)}catch(r){throw console.error("[databaseService] Error in getSessionsForUser:",r),r}}async function v6(e){if(!e)return null;const{data:t,error:r}=await Ce.from("voting_sessions").select(lu).eq("product_id",e).eq("is_active",!0).maybeSingle();if(r){if(r.code==="PGRST116")return null;throw r}return t?Bm(t):null}async function kS(e){const{data:t,error:r}=await Ce.from("voting_sessions").insert([e]).select().single();if(r)throw r;return t}async function NE(e,t){const{data:r,error:n}=await Ce.from("voting_sessions").update(t).eq("id",e).select().single();if(n)throw n;return r}async function x6(e){const{error:t}=await Ce.from("voting_sessions").delete().eq("id",e);if(t)throw t}async function w6(e,t){const{error:r}=await Ce.from("votes").delete().eq("session_id",e).eq("feature_id",t);if(r)throw r}async function Wm(e){const{data:t,error:r}=await Ce.from("session_admins").select(`
      *,
      users (*)
    `).eq("session_id",e);if(r)throw r;return(t||[]).map(n=>({id:n.id,session_id:n.session_id,user_id:n.user_id,created_at:n.created_at,user:n.users}))}async function b6(e){const{data:t,error:r}=await Ce.from("voting_sessions").select("id").eq("product_id",e);if(r)throw r;if(!t||t.length===0)return[];const n=t.map(u=>u.id),{data:s,error:i}=await Ce.from("session_admins").select(`
      *,
      users (*)
    `).in("session_id",n);if(i)throw i;const l=new Map;return(s||[]).forEach(u=>{const d={id:u.id,session_id:u.session_id,user_id:u.user_id,created_at:u.created_at,user:u.users};if(d.user&&d.user.email){const m=d.user.email.toLowerCase();l.has(m)||l.set(m,d)}}),Array.from(l.values())}async function yd(e,t){const{data:r,error:n}=await Ce.from("session_admins").insert([{session_id:e,user_id:t}]).select().single();if(n)throw n;return r}async function _S(e,t){const{error:r}=await Ce.from("session_admins").delete().eq("session_id",e).eq("user_id",t);if(r)throw r}async function Vm(e,t){try{if(await Aa(t))return!0;const n=`${Ce.supabaseUrl}/rest/v1/session_admins?session_id=eq.${e}&user_id=eq.${t}&select=id&limit=1`,s={apikey:Ce.supabaseKey,Authorization:`Bearer ${Ce.supabaseKey}`,"Content-Type":"application/json"},i=await fetch(n,{method:"GET",headers:s});if(!i.ok)return console.error("Error checking admin status:",i.status),!1;const l=await i.json();return Array.isArray(l)&&l.length>0}catch(r){return console.error("Caught exception checking admin:",r),!1}}async function wv(e){const{data:t,error:r}=await Ce.from("session_stakeholders").select("*").eq("session_id",e).order("user_name",{ascending:!0});if(r)throw r;return t||[]}async function j6(e){const{data:t,error:r}=await Ce.from("session_stakeholders").insert([e]).select().single();if(r)throw r;return t}async function NS(e,t,r){return j6({session_id:e,user_email:t,user_name:r,votes_allocated:0,has_voted:!1})}async function CS(e,t){const{error:r}=await Ce.from("session_stakeholders").delete().eq("session_id",e).eq("user_email",t);if(r)throw r}async function zx(e,t){try{const r=`${Ce.supabaseUrl}/rest/v1/session_stakeholders?session_id=eq.${e}&user_email=eq.${encodeURIComponent(t)}&select=id&limit=1`,n={apikey:Ce.supabaseKey,Authorization:`Bearer ${Ce.supabaseKey}`,"Content-Type":"application/json"},s=await fetch(r,{method:"GET",headers:n});if(!s.ok)return console.error("Error checking stakeholder status:",s.status),!1;const i=await s.json();return Array.isArray(i)&&i.length>0}catch(r){return console.error("Caught exception checking stakeholder:",r),!1}}async function S6(e,t){const{data:r,error:n}=await Ce.from("session_stakeholders").select("id").eq("session_id",e).eq("user_email",t.toLowerCase()).maybeSingle();return n?(console.error("Error checking stakeholder status:",n),!1):!!r}async function ES(e,t){const{error:r}=await Ce.from("session_stakeholders").delete().eq("session_id",e).eq("user_email",t.toLowerCase());if(r)throw r}async function ja(e){const t=`${Ce.supabaseUrl}/rest/v1/features?session_id=eq.${e}&select=*&order=created_at.desc`,r={apikey:Ce.supabaseKey,Authorization:`Bearer ${Ce.supabaseKey}`,"Content-Type":"application/json"},n=await fetch(t,{method:"GET",headers:r});if(!n.ok){const i=await n.text();throw new Error(`API error: ${n.status} - ${i}`)}return(await n.json()||[]).filter(i=>{const l=i.state===eo,u=Array.isArray(i.tags)&&i.tags.includes(Mx);return!l&&!u}).map(i=>({...i,workItemType:i.work_item_type||i.workItemType||null,epic:i.epic||null,epicId:i.epic_id||i.epicId||null,areaPath:i.area_path||i.areaPath||null,azureDevOpsId:i.azure_devops_id||i.azureDevOpsId||null,azureDevOpsUrl:i.azure_devops_url||i.azureDevOpsUrl||null,azure_devops_id:i.azure_devops_id||i.azureDevOpsId||null}))}async function ih(e){const{data:t,error:r}=await Ce.from("features").insert([{session_id:e.session_id,title:e.title,description:e.description,epic:e.epic,epic_id:e.epicId,state:e.state,area_path:e.areaPath,tags:e.tags,azure_devops_id:e.azure_devops_id,azure_devops_url:e.azure_devops_url,work_item_type:e.workItemType}]).select().single();if(r)throw r;return{...t,workItemType:t.work_item_type||t.workItemType||null,epic:t.epic||null,epicId:t.epic_id||t.epicId||null,areaPath:t.area_path||t.areaPath||null,azureDevOpsId:t.azure_devops_id||t.azureDevOpsId||null,azureDevOpsUrl:t.azure_devops_url||t.azureDevOpsUrl||null,azure_devops_id:t.azure_devops_id||t.azureDevOpsId||null}}async function Ku(e,t){const r={};t.title!==void 0&&(r.title=t.title),t.description!==void 0&&(r.description=t.description),t.epic!==void 0&&(r.epic=t.epic),t.epicId!==void 0&&(r.epic_id=t.epicId),t.state!==void 0&&(r.state=t.state),t.areaPath!==void 0&&(r.area_path=t.areaPath),t.tags!==void 0&&(r.tags=t.tags),t.azure_devops_id!==void 0&&(r.azure_devops_id=t.azure_devops_id),t.azure_devops_url!==void 0&&(r.azure_devops_url=t.azure_devops_url),t.workItemType!==void 0&&(r.work_item_type=t.workItemType);const{data:n,error:s}=await Ce.from("features").update(r).eq("id",e).select().single();if(s)throw s;return{...n,workItemType:n.work_item_type||n.workItemType||null,epic:n.epic||null,epicId:n.epic_id||n.epicId||null,areaPath:n.area_path||n.areaPath||null,azureDevOpsId:n.azure_devops_id||n.azureDevOpsId||null,azureDevOpsUrl:n.azure_devops_url||n.azureDevOpsUrl||null,azure_devops_id:n.azure_devops_id||n.azureDevOpsId||null}}async function AS(e){const{error:t}=await Ce.from("features").delete().eq("id",e);if(t)throw t}function CE(e){return{id:e.id,sessionId:e.session_id,type:e.type,reason:e.reason,details:e.details??null,actorName:e.actor_name??"Admin",actorId:e.actor_id??null,createdAt:e.created_at}}async function k6(e){try{const{data:t,error:r}=await Ce.from("session_status_notes").select("*").eq("session_id",e).order("created_at",{ascending:!1});if(r)throw r;return(t||[]).map(CE)}catch(t){if((t==null?void 0:t.code)==="42P01")return console.warn("[databaseService] session_status_notes table not found; status notes will not persist.",t),[];throw t}}async function _6(e){try{const{data:t,error:r}=await Ce.from("session_status_notes").insert([{session_id:e.session_id,type:e.type,reason:e.reason,details:e.details??null,actor_id:e.actor_id??null,actor_name:e.actor_name}]).select("*").single();if(r)throw r;return CE(t)}catch(t){if((t==null?void 0:t.code)==="42P01")return console.warn("[databaseService] session_status_notes table not found; status notes will not persist.",t),{id:`temp-${Date.now()}`,sessionId:e.session_id,type:e.type,reason:e.reason,details:e.details??null,actorName:e.actor_name,actorId:e.actor_id??null,createdAt:new Date().toISOString()};throw t}}async function Mo(e){const t=`${Ce.supabaseUrl}/rest/v1/votes?session_id=eq.${e}&select=*`,r={apikey:Ce.supabaseKey,Authorization:`Bearer ${Ce.supabaseKey}`,"Content-Type":"application/json"},n=await fetch(t,{method:"GET",headers:r});if(!n.ok){const i=await n.text();throw new Error(`API error: ${n.status} - ${i}`)}return await n.json()||[]}async function N6(e){const{data:t}=await Ce.from("votes").select("*").eq("session_id",e.session_id).eq("feature_id",e.feature_id).eq("user_id",e.user_id).single();if(t){const{data:r,error:n}=await Ce.from("votes").update({vote_count:e.vote_count}).eq("session_id",e.session_id).eq("feature_id",e.feature_id).eq("user_id",e.user_id).select().single();if(n)throw n;return r}else{const{data:r,error:n}=await Ce.from("votes").insert([e]).select().single();if(n)throw n;return r}}async function C6(e,t){const{error:r}=await Ce.from("votes").delete().eq("session_id",e).eq("user_id",t);if(r)throw console.error("Error deleting user votes:",r),r}async function E6(e){const{error:t}=await Ce.from("votes").delete().eq("session_id",e);if(t)throw t}async function A6(e){try{const{data:t,error:r}=await Ce.from("azure_devops_config").select("*").eq("session_id",e).maybeSingle();if(r){if(r.code==="PGRST116")return null;throw r}return t}catch(t){return console.error("Error getting Azure DevOps config:",t),null}}async function gl(e,t){try{const r={session_id:e,organization:t.organization,project:t.project,enabled:t.enabled,work_item_type:t.workItemType};t.accessToken!==void 0&&(r.access_token=t.accessToken),t.refreshToken!==void 0&&(r.refresh_token=t.refreshToken),t.tokenExpiresAt!==void 0&&(r.token_expires_at=t.tokenExpiresAt),t.tenantId!==void 0&&(r.tenant_id=t.tenantId),t.clientId!==void 0&&(r.client_id=t.clientId),t.query!==void 0&&(r.query=t.query),t.lastSyncTime!==void 0&&(r.last_sync_time=t.lastSyncTime),t.states!==void 0&&(r.states=t.states),t.areaPath!==void 0&&(r.area_path=t.areaPath),t.tags!==void 0&&(r.tags=t.tags);const{data:n,error:s}=await Ce.from("azure_devops_config").update(r).eq("session_id",e).select();if(!s&&n&&n.length>0)return n[0];const{data:i,error:l}=await Ce.from("azure_devops_config").upsert([r]).select().single();if(!l)return i;if((l==null?void 0:l.code)==="23505"){const{data:u,error:d}=await Ce.from("azure_devops_config").select("*").eq("session_id",e).maybeSingle();if(d)throw d;return u}throw l||s}catch(r){throw console.error("Error saving Azure DevOps config:",r),r}}async function P6(){return(await cu())[0]||null}async function T6(e){const t=await P6();if(!t)throw new Error("No session found");return NE(t.id,e)}async function PS(e,t){return NE(e,t)}async function O6(e){const t={summary:e.description??null,whatWouldItDo:e.whatWouldItDo??null,howWouldItWork:e.howWouldItWork??null,requesterId:e.requester_id??null,requesterName:e.requester_name??null,requesterEmail:e.requester_email??null,attachmentUrls:e.attachment_urls??null},{data:r,error:n}=await Ce.from("features").insert([{session_id:e.session_id,title:e.title,description:JSON.stringify(t),epic:null,state:eo,area_path:null,tags:[Mx],azure_devops_id:null,azure_devops_url:null}]).select("id, session_id, title, description, created_at").single();if(n)throw n;return Um(r)}async function I6(e,t){const{data:r,error:n}=await Ce.from("features").select("id, title, description, session_id, created_at").eq("id",e).eq("state",eo).single();if(n)throw n;let s={};if(r!=null&&r.description)try{s=JSON.parse(r.description)}catch(d){console.warn("[databaseService] Unable to parse suggestion payload during update",d)}const i={summary:t.summary??s.summary??null,whatWouldItDo:t.whatWouldItDo??s.whatWouldItDo??null,howWouldItWork:t.howWouldItWork??s.howWouldItWork??null,requesterId:s.requesterId??null,requesterName:t.requester_name??s.requesterName??null,requesterEmail:t.requester_email??s.requesterEmail??null,attachmentUrls:t.attachment_urls!==void 0?t.attachment_urls:s.attachmentUrls??null},{data:l,error:u}=await Ce.from("features").update({title:t.title??r.title,description:JSON.stringify(i)}).eq("id",e).eq("state",eo).select("id, session_id, title, description, created_at").single();if(u)throw u;return Um(l)}async function D6(e){const{error:t}=await Ce.from("features").delete().eq("id",e).eq("state",eo);if(t)throw t}async function $6(e,t){const{data:r,error:n}=await Ce.from("features").update({session_id:t}).eq("id",e).eq("state",eo).select("id, session_id, title, description, created_at").single();if(n)throw n;return Um(r)}async function R6(e){const{data:t,error:r}=await Ce.from("features").select("*").eq("id",e).eq("state",eo).single();if(r)throw r;let n={};if(t!=null&&t.description)try{n=JSON.parse(t.description)}catch(d){console.warn("[databaseService] Unable to parse suggestion payload during promotion",d)}const s=[];n.summary&&s.push(n.summary),n.whatWouldItDo&&s.push(`What would it do?
${n.whatWouldItDo}`),n.howWouldItWork&&s.push(`How would it work?
${n.howWouldItWork}`);const i=Array.isArray(t.tags)?t.tags.filter(d=>d!==Mx):[],{data:l,error:u}=await Ce.from("features").update({description:s.join(`

`)||t.title,state:null,tags:i}).eq("id",e).eq("state",eo).select("*").single();if(u)throw u;return l}async function TS(e){const{data:t,error:r}=await Ce.from("features").select("id, session_id, title, description, created_at, state, tags").eq("session_id",e).eq("state",eo).order("created_at",{ascending:!1});if(r)throw r;return(t||[]).map(Um)}async function bv(){const{data:e,error:t}=await Ce.from("system_admins").select(`
      *,
      users (*)
    `).order("created_at",{ascending:!1});if(t)throw t;return(e||[]).map(r=>({id:r.id,user_id:r.user_id,created_at:r.created_at,user:r.users}))}async function Lh(e){const{data:t,error:r}=await Ce.from("system_admins").insert([{user_id:e}]).select().single();if(r)throw r;return t}async function jv(e){const{error:t}=await Ce.from("system_admins").delete().eq("user_id",e);if(t)throw t}async function Aa(e){try{const t=`${Ce.supabaseUrl}/rest/v1/system_admins?user_id=eq.${e}&select=id&limit=1`,r={apikey:Ce.supabaseKey,Authorization:`Bearer ${Ce.supabaseKey}`,"Content-Type":"application/json"},n=await fetch(t,{method:"GET",headers:r});if(!n.ok)return console.error("Error checking system admin status:",n.status),!1;const s=await n.json();return Array.isArray(s)&&s.length>0}catch(t){return console.error("Caught exception checking system admin:",t),!1}}const M6=["dave.hoffman@newmill.com"],F6="".split(",").map(e=>e.trim().toLowerCase()).filter(Boolean),L6=Array.from(new Set([...M6,...F6]));function zh(e){return e?L6.includes(e.toLowerCase()):!1}const EE=y.createContext(void 0);function z6({children:e}){const[t,r]=y.useState(null),[n,s]=y.useState([]),[i,l]=y.useState(null),[u,d]=y.useState(!1),[m,f]=y.useState(!1),[p,v]=y.useState(!1),[x,b]=y.useState(!0),[S,j]=y.useState(!1),[N,E]=y.useState(!1),C=y.useRef(!1),I=y.useCallback(async F=>{if(N)return;const L=F||i;if(!L){s([]),r(H=>{if(H)try{localStorage.removeItem("voting_system_current_session")}catch{}return null});return}E(!0);try{const H=zh(L.email);let le;H?le=await cu():le=await _E(L.id),s(le),r(K=>{if(!K)return K;const ie=le.find(q=>q.id===K.id);if(!ie){try{localStorage.removeItem("voting_system_current_session")}catch{}return null}if(ie.id!==K.id)return K;if(ie!==K){try{localStorage.setItem("voting_system_current_session",ie.id)}catch{}return ie}return K})}catch(H){console.error("Error loading sessions:",H),s([])}finally{E(!1)}},[i,N]);y.useEffect(()=>{if(C.current)return;C.current=!0;const F=setTimeout(()=>{b(!1)},5e3);(async()=>{var le,K;try{if(window.location.search.includes("code=")||window.location.hash.includes("access_token")||window.location.search.includes("error=")){setTimeout(async()=>{var G,ve;try{const{data:{session:M}}=await Ce.auth.getSession();if(M!=null&&M.user){const Y=M.user.email;if(Y){const ce=((G=M.user.user_metadata)==null?void 0:G.full_name)||((ve=M.user.user_metadata)==null?void 0:ve.name)||Y.split("@")[0]||"User";try{const he=await Fc(Y.toLowerCase(),ce);l(he),await I(he),setTimeout(()=>{if(window.location.hash){const U=window.location.pathname+window.location.search;window.history.replaceState(null,"",U)}},200)}catch(he){console.error("Error getting/creating user:",he)}}}}catch(M){console.error("Error in OAuth callback handler:",M)}finally{b(!1),clearTimeout(F)}},1e3);return}const{data:{session:q}}=await Ce.auth.getSession();if(q!=null&&q.user){const G=q.user.email;if(G){const ve=((le=q.user.user_metadata)==null?void 0:le.full_name)||((K=q.user.user_metadata)==null?void 0:K.name)||G.split("@")[0]||"User";try{const M=await Fc(G.toLowerCase(),ve);l(M),await I(M)}catch(M){console.error("Error getting/creating user:",M)}}}else{const G=localStorage.getItem("voting_system_user");if(G)try{const ve=JSON.parse(G);l(ve);try{await I(ve)}catch(M){console.error("Error refreshing sessions:",M)}}catch(ve){console.error("Error loading stored user:",ve),localStorage.removeItem("voting_system_user")}}}catch(ie){console.error("Error checking Supabase auth:",ie);const q=localStorage.getItem("voting_system_user");if(q)try{const G=JSON.parse(q);l(G)}catch(G){console.error("Error loading stored user:",G),localStorage.removeItem("voting_system_user")}}finally{window.location.search.includes("code=")||window.location.hash.includes("access_token")||window.location.search.includes("error=")||(b(!1),clearTimeout(F))}})();const{data:{subscription:H}}=Ce.auth.onAuthStateChange(async(le,K)=>{var ie,q,G,ve;if(le==="SIGNED_IN"&&(K!=null&&K.user)){const M=K.user.email;if(M){const Y=((ie=K.user.user_metadata)==null?void 0:ie.full_name)||((q=K.user.user_metadata)==null?void 0:q.name)||M.split("@")[0]||"User",ce=await Fc(M.toLowerCase(),Y);l(ce),await I(ce),b(!1),setTimeout(()=>{if(window.location.hash){const he=window.location.pathname+window.location.search;window.history.replaceState(null,"",he)}},100)}}else if(le==="SIGNED_OUT")l(null),s([]),r(null),localStorage.removeItem("voting_system_user"),localStorage.removeItem("voting_system_current_session"),b(!1);else if(le==="TOKEN_REFRESHED"&&(K!=null&&K.user)){if(!i&&K.user.email){const M=K.user.email,Y=((G=K.user.user_metadata)==null?void 0:G.full_name)||((ve=K.user.user_metadata)==null?void 0:ve.name)||M.split("@")[0]||"User",ce=await Fc(M.toLowerCase(),Y);l(ce),await I(ce)}b(!1)}});return()=>{H.unsubscribe(),clearTimeout(F)}},[]),y.useEffect(()=>{(async()=>{if(!t||!i){d(!1),f(!1),j(!1);return}if(!S)try{const[L,H]=await Promise.all([Vm(t.id,i.id),zx(t.id,i.email)]);d(L),f(H),j(!1)}catch(L){console.error("Error checking user roles:",L),d(!1),f(!1),j(!0)}})()},[t,i,S]),y.useEffect(()=>{(async()=>{if(!i){v(!1);return}if(zh(i.email)){v(!0);return}try{const H=await Aa(i.id);v(H)}catch(H){console.error("Error checking system admin status:",H),v(!1)}})()},[i]);const T=y.useCallback(async F=>{l(F),j(!1),F?(localStorage.setItem("voting_system_user",JSON.stringify(F)),await I(F)):(localStorage.removeItem("voting_system_user"),s([]),r(null),v(!1))},[I]),O=y.useCallback(F=>{r(F),j(!1),F?localStorage.setItem("voting_system_current_session",F.id):localStorage.removeItem("voting_system_current_session")},[]);y.useEffect(()=>{(async()=>{if(!i||n.length===0)return;const L=localStorage.getItem("voting_system_current_session");if(L){const H=n.find(le=>le.id===L);H&&r(H)}})()},[i,n]),y.useEffect(()=>{const F=()=>{const le=window.location.hash;if(le==="#"||le===""){const K=window.location.pathname+window.location.search;window.history.replaceState(null,"",K)}};F();const L=()=>{F()},H=setInterval(F,500);return window.addEventListener("hashchange",L),()=>{clearInterval(H),window.removeEventListener("hashchange",L)}},[]);const V={currentSession:t,sessions:n,currentUser:i,isAdmin:u,isStakeholder:m,isSystemAdmin:p,isLoading:x,setCurrentSession:O,refreshSessions:I,setCurrentUser:T};return x?a.jsx("div",{className:"min-h-screen w-full bg-gray-50 flex items-center justify-center",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-[#2d4660] mx-auto mb-4"}),a.jsx("p",{className:"text-gray-600",children:"Loading..."})]})}):a.jsx(EE.Provider,{value:V,children:e})}function ql(){const e=y.useContext(EE);if(e===void 0)throw new Error("useSession must be used within a SessionProvider");return e}function Ux(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function"){var s=0;for(n=Object.getOwnPropertySymbols(e);s<n.length;s++)t.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(e,n[s])&&(r[n[s]]=e[n[s]])}return r}function Xo(e,t,r,n){return new(r||(r=Promise))((function(s,i){function l(m){try{d(n.next(m))}catch(f){i(f)}}function u(m){try{d(n.throw(m))}catch(f){i(f)}}function d(m){var f;m.done?s(m.value):(f=m.value,f instanceof r?f:new r((function(p){p(f)}))).then(l,u)}d((n=n.apply(e,[])).next())}))}var OS,IS,DS,Uh,$S,RS,MS,Sv,FS,LS;function U6(e){return(e==null?void 0:e.errorCode)!==void 0}(function(e){e.Inline="inline",e.Desktop="desktop",e.Web="web"})(OS||(OS={})),(function(e){e.M365Content="m365content"})(IS||(IS={})),(function(e){e.DriveId="driveId",e.GroupId="groupId",e.SiteId="siteId",e.UserId="userId"})(DS||(DS={})),(function(e){e[e.NOT_SUPPORTED_ON_PLATFORM=100]="NOT_SUPPORTED_ON_PLATFORM",e[e.INTERNAL_ERROR=500]="INTERNAL_ERROR",e[e.NOT_SUPPORTED_IN_CURRENT_CONTEXT=501]="NOT_SUPPORTED_IN_CURRENT_CONTEXT",e[e.PERMISSION_DENIED=1e3]="PERMISSION_DENIED",e[e.NETWORK_ERROR=2e3]="NETWORK_ERROR",e[e.NO_HW_SUPPORT=3e3]="NO_HW_SUPPORT",e[e.INVALID_ARGUMENTS=4e3]="INVALID_ARGUMENTS",e[e.UNAUTHORIZED_USER_OPERATION=5e3]="UNAUTHORIZED_USER_OPERATION",e[e.INSUFFICIENT_RESOURCES=6e3]="INSUFFICIENT_RESOURCES",e[e.THROTTLE=7e3]="THROTTLE",e[e.USER_ABORT=8e3]="USER_ABORT",e[e.OPERATION_TIMED_OUT=8001]="OPERATION_TIMED_OUT",e[e.OLD_PLATFORM=9e3]="OLD_PLATFORM",e[e.FILE_NOT_FOUND=404]="FILE_NOT_FOUND",e[e.SIZE_EXCEEDED=1e4]="SIZE_EXCEEDED"})(Uh||(Uh={})),(function(e){e.GeoLocation="geolocation",e.Media="media"})($S||($S={})),(function(e){e.BCAIS="bcais",e.BCWAF="bcwaf",e.BCWBF="bcwbf"})(RS||(RS={})),(function(e){e.Faculty="faculty",e.Student="student",e.Other="other"})(MS||(MS={})),(function(e){e.Adult="adult",e.MinorNoParentalConsentRequired="minorNoParentalConsentRequired",e.MinorWithoutParentalConsent="minorWithoutParentalConsent",e.MinorWithParentalConsent="minorWithParentalConsent",e.NotAdult="notAdult",e.NonAdult="notAdult"})(Sv||(Sv={})),(function(e){e.HigherEducation="higherEducation",e.K12="k12",e.Other="other"})(FS||(FS={})),(function(e){e.TextPlain="text/plain",e.TextHtml="text/html",e.ImagePNG="image/png",e.ImageJPEG="image/jpeg"})(LS||(LS={}));var or,kv,_v,zS,US,BS,WS,VS;(function(e){e.desktop="desktop",e.web="web",e.android="android",e.ios="ios",e.ipados="ipados",e.macos="macos",e.visionOS="visionOS",e.rigel="rigel",e.surfaceHub="surfaceHub",e.teamsRoomsWindows="teamsRoomsWindows",e.teamsRoomsAndroid="teamsRoomsAndroid",e.teamsPhones="teamsPhones",e.teamsDisplays="teamsDisplays"})(or||(or={})),(function(e){e.office="Office",e.outlook="Outlook",e.outlookWin32="OutlookWin32",e.orange="Orange",e.places="Places",e.teams="Teams",e.teamsModern="TeamsModern"})(kv||(kv={})),(function(e){e.settings="settings",e.content="content",e.authentication="authentication",e.remove="remove",e.task="task",e.sidePanel="sidePanel",e.stage="stage",e.meetingStage="meetingStage"})(_v||(_v={})),(function(e){e.copilotSidePanel="copilotSidePanel",e.copilotMainPane="copilotMainPane",e.copilotFullScreen="copilotFullScreen"})(zS||(zS={})),(function(e){e[e.Standard=0]="Standard",e[e.Edu=1]="Edu",e[e.Class=2]="Class",e[e.Plc=3]="Plc",e[e.Staff=4]="Staff"})(US||(US={})),(function(e){e[e.Admin=0]="Admin",e[e.User=1]="User",e[e.Guest=2]="Guest"})(BS||(BS={})),(function(e){e.Large="large",e.Medium="medium",e.Small="small"})(WS||(WS={})),(function(e){e.Regular="Regular",e.Private="Private",e.Shared="Shared"})(VS||(VS={}));const B6={errorCode:Uh.NOT_SUPPORTED_ON_PLATFORM},W6={adaptiveCardSchemaVersion:{majorVersion:1,minorVersion:5}};var qS={randomUUID:typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};let ah;const V6=new Uint8Array(16);function q6(){if(!ah&&(ah=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!ah))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return ah(V6)}const ds=[];for(let e=0;e<256;++e)ds.push((e+256).toString(16).slice(1));function H6(e,t=0){return ds[e[t+0]]+ds[e[t+1]]+ds[e[t+2]]+ds[e[t+3]]+"-"+ds[e[t+4]]+ds[e[t+5]]+"-"+ds[e[t+6]]+ds[e[t+7]]+"-"+ds[e[t+8]]+ds[e[t+9]]+"-"+ds[e[t+10]]+ds[e[t+11]]+ds[e[t+12]]+ds[e[t+13]]+ds[e[t+14]]+ds[e[t+15]]}function K6(e,t,r){if(qS.randomUUID&&!e)return qS.randomUUID();const n=(e=e||{}).random||(e.rng||q6)();return n[6]=15&n[6]|64,n[8]=63&n[8]|128,H6(n)}var G6=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function Y6(e){return typeof e=="string"&&G6.test(e)}function AE(e,t){if(typeof e!="string"||typeof t!="string")return NaN;const r=e.split("."),n=t.split(".");function s(i){return/^\d+$/.test(i)}if(!r.every(s)||!n.every(s))return NaN;for(;r.length<n.length;)r.push("0");for(;n.length<r.length;)n.push("0");for(let i=0;i<r.length;++i)if(Number(r[i])!=Number(n[i]))return Number(r[i])>Number(n[i])?1:-1;return 0}function J6(){return K6()}function PE(e){return Object.keys(e).forEach((t=>{e[t]!==null&&e[t]!==void 0&&typeof e[t]=="object"&&PE(e[t])})),Object.freeze(e)}function X6(e,t,r){return new Promise(((n,s)=>{const i=setTimeout(s,t,r);e().then((l=>{clearTimeout(i),n(l)})).catch((l=>{clearTimeout(i),s(l)}))}))}function Q6(e){return e.protocol==="https:"}function Z6(){if(qm())throw new Error("window object undefined at SSR check");return window}function qm(){return typeof window>"u"}function eR(e){return new RegExp(`${/<script[^>]*>|&lt;script[^&]*&gt;|%3Cscript[^%]*%3E/gi.source}|${/<\/script[^>]*>|&lt;\/script[^&]*&gt;|%3C\/script[^%]*%3E/gi.source}`,"gi").test(e)}function tR(e){if(!e)throw new Error("id must not be empty");if(Y6(e)===!1)throw new Error("id must be a valid UUID")}const rR=!!performance&&"now"in performance;function Bx(){return rR?performance.now()+performance.timeOrigin:void 0}function HS(e){var t,r;if(!(!((r=(t=e.hostVersionsInfo)===null||t===void 0?void 0:t.appEligibilityInformation)===null||r===void 0)&&r.ageGroup))return e;const n=e.hostVersionsInfo.appEligibilityInformation.ageGroup;return(n==null?void 0:n.toLowerCase())!=="nonadult"?e:Object.assign(Object.assign({},e),{hostVersionsInfo:Object.assign(Object.assign({},e.hostVersionsInfo),{appEligibilityInformation:Object.assign(Object.assign({},e.hostVersionsInfo.appEligibilityInformation),{ageGroup:Sv.NotAdult})})})}let Wd=class{constructor(t=J6()){this.uuid=t,tR(t)}toString(){return this.uuid}serialize(){return this.toString()}};const TE=e=>{const{uuid:t}=e,r=Ux(e,["uuid"]),n=t==null?void 0:t.toString();return Object.assign(Object.assign({},r),{uuidAsString:n})},nR=e=>{const{uuidAsString:t}=e,r=Ux(e,["uuidAsString"]);return Object.assign(Object.assign({},r),{uuid:t?new Wd(t):void 0})};var Nv={exports:{}},KS,GS;function sR(){if(GS)return KS;GS=1;var e=1e3,t=60*e,r=60*t,n=24*r,s=7*n,i=365.25*n;function l(u,d,m,f){var p=d>=1.5*m;return Math.round(u/m)+" "+f+(p?"s":"")}return KS=function(u,d){d=d||{};var m=typeof u;if(m==="string"&&u.length>0)return(function(f){if(!((f=String(f)).length>100)){var p=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(f);if(p){var v=parseFloat(p[1]);switch((p[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return v*i;case"weeks":case"week":case"w":return v*s;case"days":case"day":case"d":return v*n;case"hours":case"hour":case"hrs":case"hr":case"h":return v*r;case"minutes":case"minute":case"mins":case"min":case"m":return v*t;case"seconds":case"second":case"secs":case"sec":case"s":return v*e;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return v;default:return}}}})(u);if(m==="number"&&isFinite(u))return d.long?(function(f){var p=Math.abs(f);return p>=n?l(f,p,n,"day"):p>=r?l(f,p,r,"hour"):p>=t?l(f,p,t,"minute"):p>=e?l(f,p,e,"second"):f+" ms"})(u):(function(f){var p=Math.abs(f);return p>=n?Math.round(f/n)+"d":p>=r?Math.round(f/r)+"h":p>=t?Math.round(f/t)+"m":p>=e?Math.round(f/e)+"s":f+"ms"})(u);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(u))}}var iR=function(e){function t(s){let i,l,u,d=null;function m(...f){if(!m.enabled)return;const p=m,v=Number(new Date),x=v-(i||v);p.diff=x,p.prev=i,p.curr=v,i=v,f[0]=t.coerce(f[0]),typeof f[0]!="string"&&f.unshift("%O");let b=0;f[0]=f[0].replace(/%([a-zA-Z%])/g,((S,j)=>{if(S==="%%")return"%";b++;const N=t.formatters[j];if(typeof N=="function"){const E=f[b];S=N.call(p,E),f.splice(b,1),b--}return S})),t.formatArgs.call(p,f),(p.log||t.log).apply(p,f)}return m.namespace=s,m.useColors=t.useColors(),m.color=t.selectColor(s),m.extend=r,m.destroy=t.destroy,Object.defineProperty(m,"enabled",{enumerable:!0,configurable:!1,get:()=>d!==null?d:(l!==t.namespaces&&(l=t.namespaces,u=t.enabled(s)),u),set:f=>{d=f}}),typeof t.init=="function"&&t.init(m),m}function r(s,i){const l=t(this.namespace+(i===void 0?":":i)+s);return l.log=this.log,l}function n(s){return s.toString().substring(2,s.toString().length-2).replace(/\.\*\?$/,"*")}return t.debug=t,t.default=t,t.coerce=function(s){return s instanceof Error?s.stack||s.message:s},t.disable=function(){const s=[...t.names.map(n),...t.skips.map(n).map((i=>"-"+i))].join(",");return t.enable(""),s},t.enable=function(s){let i;t.save(s),t.namespaces=s,t.names=[],t.skips=[];const l=(typeof s=="string"?s:"").split(/[\s,]+/),u=l.length;for(i=0;i<u;i++)l[i]&&((s=l[i].replace(/\*/g,".*?"))[0]==="-"?t.skips.push(new RegExp("^"+s.slice(1)+"$")):t.names.push(new RegExp("^"+s+"$")))},t.enabled=function(s){if(s[s.length-1]==="*")return!0;let i,l;for(i=0,l=t.skips.length;i<l;i++)if(t.skips[i].test(s))return!1;for(i=0,l=t.names.length;i<l;i++)if(t.names[i].test(s))return!0;return!1},t.humanize=sR(),t.destroy=function(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")},Object.keys(e).forEach((s=>{t[s]=e[s]})),t.names=[],t.skips=[],t.formatters={},t.selectColor=function(s){let i=0;for(let l=0;l<s.length;l++)i=(i<<5)-i+s.charCodeAt(l),i|=0;return t.colors[Math.abs(i)%t.colors.length]},t.enable(t.load()),t},aR={};(function(e,t){t.formatArgs=function(n){if(n[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+n[0]+(this.useColors?"%c ":" ")+"+"+e.exports.humanize(this.diff),!this.useColors)return;const s="color: "+this.color;n.splice(1,0,s,"color: inherit");let i=0,l=0;n[0].replace(/%[a-zA-Z%]/g,(u=>{u!=="%%"&&(i++,u==="%c"&&(l=i))})),n.splice(l,0,s)},t.save=function(n){try{n?t.storage.setItem("debug",n):t.storage.removeItem("debug")}catch{}},t.load=function(){let n;try{n=t.storage.getItem("debug")}catch{}return!n&&typeof process<"u"&&"env"in process&&(n=aR.DEBUG),n},t.useColors=function(){return typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs)?!0:typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/)?!1:typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)},t.storage=(function(){try{return localStorage}catch{}})(),t.destroy=(()=>{let n=!1;return()=>{n||(n=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),t.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],t.log=console.debug||console.log||(()=>{}),e.exports=iR(t);const{formatters:r}=e.exports;r.j=function(n){try{return JSON.stringify(n)}catch(s){return"[UnexpectedJSONParseError]: "+s.message}}})(Nv,Nv.exports);var Wx=Nv.exports;const oR=new Wd,lR=Wx.debug.formatArgs;Wx.debug.formatArgs=function(e){e[0]=`(${new Date().toISOString()}): ${e[0]} [${oR.toString()}]`,lR.call(this,e)};const cR=Wx.debug("teamsJs");function Da(e){return cR.extend(e)}function vn(e,t){return`${e}_${t}`}function OE(e){return/^v\d+_[\w.]+$/.test(e)}function qo(e){return e.uuidAsString!==void 0?`${e.uuidAsString} (legacy id: ${e.id})`:e.uuid!==void 0?`${e.uuid.toString()} (legacy id: ${e.id})`:`legacy id: ${e.id} (no uuid)`}const uR=Da("flushMessageQueue");function IE(e,t,r,n){if(e&&t&&r.length!==0)for(;r.length>0;){const s=r.shift();if(s){const i=TE(s);uR("Flushing message %s from %s message queue via postMessage.",qo(i),n),e.postMessage(i,t)}}}var dR=["teams.microsoft.com","teams.microsoft.us","gov.teams.microsoft.us","dod.teams.microsoft.us","int.teams.microsoft.com","outlook.office.com","outlook-sdf.office.com","outlook.office365.com","outlook-sdf.office365.com","outlook.office365.us","outlook-dod.office365.us","webmail.apps.mil","outlook.live.com","outlook-sdf.live.com","teams.live.com","local.teams.live.com","local.teams.live.com:8080","local.teams.office.com","local.teams.office.com:8080","devspaces.skype.com","*.www.office.com","www.office.com","word.office.com","excel.office.com","powerpoint.office.com","www.officeppe.com","*.www.microsoft365.com","www.microsoft365.com","bing.com","edgeservices.bing.com","work.bing.com","www.bing.com","www.staging-bing-int.com","*.cloud.microsoft","*.m365.cloud.microsoft","*.outlook.cloud.microsoft","chatuxmanager.svc.cloud.microsoft","copilot.microsoft.com","windows.msn.com","fa000000125.resources.office.net","fa000000129.resources.office.net","fa000000124.resources.office.net","fa000000128.resources.office.net","fa000000136.resources.office.net","fa000000125.officeapps.live.com","fa000000129.officeapps.live.com","fa000000124.officeapps.live.com","fa000000128.officeapps.live.com"];const YS="2.0.1",_h=dR,JS=1500,fR=new URL("https://res.cdn.office.net/teams-js/validDomains/json/validDomains.json"),hR=/^https:\/\//,_d="The library has not yet been initialized",mR="The runtime has not yet been initialized",pR="The runtime version is not supported";let Gt=class{};Gt.initializeCalled=!1,Gt.initializeCompleted=!1,Gt.additionalValidOrigins=[],Gt.initializePromise=void 0,Gt.isFramelessWindow=!1,Gt.frameContext=void 0,Gt.hostClientType=void 0,Gt.printCapabilityEnabled=!1,Gt.teamsJsInstanceId=new Wd().toString();const DE=Da("runtime"),Hm=4;function $E(e){return e.apiVersion===Hm}function gR(e){if($E(e))return!0;throw e.apiVersion===-1?new Error(mR):new Error(pR)}let Ca={apiVersion:-1,supports:{}};const yR={supports:{appInstallDialog:{},appEntity:{},call:{},chat:{},conversations:{},dialog:{card:{bot:{}},url:{bot:{},parentCommunication:{}},update:{}},interactive:{},logs:{},meetingRoom:{},menus:{},monetization:{},notifications:{},pages:{config:{},backStack:{},fullTrust:{}},remoteCamera:{},teams:{fullTrust:{}},teamsCore:{},video:{sharedFrame:{}}}},RE=[or.desktop,or.web,or.rigel,or.surfaceHub,or.teamsRoomsWindows,or.teamsRoomsAndroid,or.teamsPhones,or.teamsDisplays],vR=[or.android,or.ios,or.ipados,or.visionOS],XS=[...RE,...vR];function xR(e){let t=e;if(t.apiVersion<Hm&&wR.forEach((r=>{t.apiVersion===r.versionToUpgradeFrom&&(t=r.upgradeToNextVersion(t))})),$E(t))return t;throw new Error("Received a runtime that could not be upgraded to the latest version")}const wR=[{versionToUpgradeFrom:1,upgradeToNextVersion:e=>{var t;return{apiVersion:2,hostVersionsInfo:void 0,isLegacyTeams:e.isLegacyTeams,supports:Object.assign(Object.assign({},e.supports),{dialog:e.supports.dialog?{card:void 0,url:e.supports.dialog,update:(t=e.supports.dialog)===null||t===void 0?void 0:t.update}:void 0})}}},{versionToUpgradeFrom:2,upgradeToNextVersion:e=>{const t=e.supports,r=Ux(t,["appNotification"]);return Object.assign(Object.assign({},e),{apiVersion:3,supports:r})}},{versionToUpgradeFrom:3,upgradeToNextVersion:e=>{var t,r,n,s,i;return{apiVersion:4,hostVersionsInfo:e.hostVersionsInfo,isNAAChannelRecommended:e.isNAAChannelRecommended,isLegacyTeams:e.isLegacyTeams,supports:Object.assign(Object.assign({},e.supports),{dialog:e.supports.dialog?{card:(t=e.supports.dialog)===null||t===void 0?void 0:t.card,url:{bot:(n=(r=e.supports.dialog)===null||r===void 0?void 0:r.url)===null||n===void 0?void 0:n.bot,parentCommunication:!((s=e.supports.dialog)===null||s===void 0)&&s.url?{}:void 0},update:(i=e.supports.dialog)===null||i===void 0?void 0:i.update}:void 0})}}}],bR={"1.0.0":[{capability:{pages:{appButton:{},tabs:{}},stageView:{}},hostClientTypes:RE}],"1.9.0":[{capability:{location:{}},hostClientTypes:XS}],"2.0.0":[{capability:{people:{}},hostClientTypes:XS},{capability:{sharing:{}},hostClientTypes:[or.desktop,or.web]}],"2.0.1":[{capability:{teams:{fullTrust:{joinedTeams:{}}}},hostClientTypes:[or.android,or.desktop,or.ios,or.teamsRoomsAndroid,or.teamsPhones,or.teamsDisplays,or.web]},{capability:{webStorage:{}},hostClientTypes:[or.desktop]}],"2.0.5":[{capability:{webStorage:{}},hostClientTypes:[or.android,or.ios]}],"2.0.8":[{capability:{sharing:{}},hostClientTypes:[or.android,or.ios]}],"2.1.1":[{capability:{nestedAppAuth:{}},hostClientTypes:[or.android,or.ios,or.ipados,or.visionOS]}],"2.1.2":[]},xy=DE.extend("generateBackCompatRuntimeConfig");function ME(e,t){const r=Object.assign({},e);for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&(typeof t[n]!="object"||Array.isArray(t[n])?n in e||(r[n]=t[n]):r[n]=ME(e[n]||{},t[n]));return r}function jR(e,t,r){xy("generating back compat runtime config for %s",e);let n=Object.assign({},t.supports);xy("Supported capabilities in config before updating based on highestSupportedVersion: %o",n),Object.keys(r).forEach((i=>{AE(e,i)>=0&&r[i].forEach((l=>{Gt.hostClientType!==void 0&&l.hostClientTypes.includes(Gt.hostClientType)&&(n=ME(n,l.capability))}))}));const s={apiVersion:Hm,hostVersionsInfo:W6,isLegacyTeams:!0,supports:n};return xy("Runtime config after updating based on highestSupportedVersion: %o",s),s}const wy=DE.extend("applyRuntimeConfig");function by(e){typeof e.apiVersion=="string"&&(wy("Trying to apply runtime with string apiVersion, processing as v1: %o",e),e=Object.assign(Object.assign({},e),{apiVersion:1})),wy("Fast-forwarding runtime %o",e);const t=xR(e);wy("Applying runtime %o",t),Ca=PE(t)}function SR(e){return e!=null&&e.serialize!==void 0&&typeof e.serialize=="function"}const Bh="2.46.0";let Wh=class Rc{static storeCallbackInformation(t,r){Rc.callbackInformation.set(t,r)}static clearMessages(){Rc.callbackInformation.clear()}static deleteMessageInformation(t){Rc.callbackInformation.delete(t)}static handleOneWayPerformanceMetrics(t,r,n){const s=t.monotonicTimestamp;s&&n?uk({actionName:t.func,messageDelay:n-s,requestStartedAt:s}):r("Unable to send performance metrics for event %s",t.func)}static handlePerformanceMetrics(t,r,n,s){const i=Rc.callbackInformation.get(t);i&&r.monotonicTimestamp&&s?(uk({actionName:i.name,messageDelay:s-r.monotonicTimestamp,requestStartedAt:i.calledAt}),Rc.deleteMessageInformation(t)):n("Unable to send performance metrics for callback %s with arguments %o",t.toString(),r.args)}};Wh.callbackInformation=new Map;const FE=Da("nestedAppAuthUtils"),kR=FE.extend("tryPolyfillWithNestedAppAuthBridge"),_R="v2";function NR(e,t,r){var n;const s=kR;if(Gt.isFramelessWindow)return void s("Cannot polyfill nestedAppAuthBridge as current window is frameless");if(!t)return void s("Cannot polyfill nestedAppAuthBridge as current window does not exist");if(t.parent!==t.top)return void s("Default NAA bridge injection not supported in nested iframe. Use standalone NAA bridge instead.");const i=(()=>{try{return JSON.parse(e)}catch{return null}})();if(!i||!(!((n=i.supports)===null||n===void 0)&&n.nestedAppAuth))return void s("Cannot polyfill nestedAppAuthBridge as current hub does not support nested app auth");const l=t;if(l.nestedAppAuthBridge)return void s("nestedAppAuthBridge already exists on current window, skipping polyfill");const u=(function(d,m){const f=CR;if(!d)return f("nestedAppAuthBridge cannot be created as current window does not exist"),null;const{onMessage:p,sendPostMessage:v}=m,x=b=>S=>p(S,b);return{addEventListener:(b,S)=>{b==="message"?d.addEventListener(b,x(S)):f(`Event ${b} is not supported by nestedAppAuthBridge`)},postMessage:b=>{const S=(()=>{try{return JSON.parse(b)}catch{return null}})();if(!S||typeof S!="object"||S.messageType!=="NestedAppAuthRequest")return void f("Unrecognized data format received by app, message being ignored. Message: %o",b);const j=vn(_R,"nestedAppAuth.execute");v(b,j)},removeEventListener:(b,S)=>{d.removeEventListener(b,x(S))}}})(l,r);u&&(l.nestedAppAuthBridge=u)}const CR=FE.extend("createNestedAppAuthBridge");let Fo=[];const Wo=Da("validateOrigin");let od;function ER(){return Xo(this,void 0,void 0,(function*(){od||(yield zE())}))}function LE(){return Fo.length===0}function zE(e=!1){return Xo(this,void 0,void 0,(function*(){if(!LE()&&!e)return Fo;if(od)return od;if(qm())return Fo=_h,_h;{Wo("Initiating fetch call to acquire valid origins list from CDN");const t=new AbortController,r=setTimeout((()=>t.abort()),JS);return od=fetch(fR,{signal:t.signal}).then((n=>{if(clearTimeout(r),!n.ok)throw new Error("Invalid Response from Fetch Call");return Wo("Fetch call completed and retrieved valid origins list from CDN"),n.json().then((s=>{if((function(i){let l=JSON.parse(i);try{l=JSON.parse(i)}catch{return!1}if(!l.validOrigins)return!1;for(const u of l.validOrigins)try{new URL("https://"+u)}catch{return Wo("isValidOriginsFromCDN call failed to validate origin: %s",u),!1}return!0})(JSON.stringify(s)))return Fo=s.validOrigins,Fo;throw new Error("Valid origins list retrieved from CDN is invalid")}))})).catch((n=>(n.name==="AbortError"?Wo(`validOrigins fetch call to CDN failed due to Timeout of ${JS} ms. Defaulting to fallback list`):Wo("validOrigins fetch call to CDN failed with error: %s. Defaulting to fallback list",n),Fo=_h,Fo))),od}}))}function QS(e,t){if(e.substring(0,2)==="*."){const r=e.substring(1);if(t.length>r.length&&t.split(".").length===r.split(".").length&&t.substring(t.length-r.length)===r)return!0}else if(e===t)return!0;return!1}function AR(e,t){const r=LE()?_h:Fo;return ZS(e,r)?Promise.resolve(!0):(Wo("Origin %s is not in the local valid origins list, fetching from CDN",e),zE(t).then((n=>ZS(e,n))))}function ZS(e,t){if(!Q6(e))return Wo("Origin %s is invalid because it is not using https protocol. Protocol being used: %s",e,e.protocol),!1;const r=e.host;if(t.some((n=>QS(n,r))))return!0;for(const n of Gt.additionalValidOrigins)if(QS(n.substring(0,8)==="https://"?n.substring(8):n,r))return!0;return Wo(`Origin %s is invalid because it is not an origin approved by this library or included in the call to app.initialize.
Origins approved by this library: %o
Origins included in app.initialize: %o`,e,t,Gt.additionalValidOrigins),!1}ER();const Hl=Da("communication");let xt=class{},dr=class{};function PR(e,t){if(dr.messageListener=r=>(function(n){return Xo(this,void 0,void 0,(function*(){if(!n||!n.data||typeof n.data!="object")return void ek("Unrecognized message format received by app, message being ignored. Message: %o",n);const s=n.source||n.originalEvent&&n.originalEvent.source,i=n.origin||n.originalEvent&&n.originalEvent.origin;return WE(s,i).then((l=>{l?((function(u,d){Gt.isFramelessWindow||xt.parentWindow&&!xt.parentWindow.closed&&u!==xt.parentWindow||(xt.parentWindow=u,xt.parentOrigin=d),xt.parentWindow&&xt.parentWindow.closed&&(xt.parentWindow=null,xt.parentOrigin=null),IE(xt.parentWindow,xt.parentOrigin,dr.parentMessageQueue,"parent")})(s,i),s!==xt.parentWindow?IM():rk(n)):ek("Message being ignored by app because it is either coming from the current window or a different window with an invalid origin, message: %o, source: %o, origin: %o",n,s,i)}))}))})(r),xt.currentWindow=xt.currentWindow||Z6(),xt.parentWindow=xt.currentWindow.parent!==xt.currentWindow.self?xt.currentWindow.parent:xt.currentWindow.opener,xt.topWindow=xt.currentWindow.top,(xt.parentWindow||e)&&xt.currentWindow.addEventListener("message",dr.messageListener,!1),!xt.parentWindow){const r=xt.currentWindow;if(!r.nativeInterface)return Promise.reject(new Error("Initialization Failed. No Parent window found."));Gt.isFramelessWindow=!0,r.onNativeMessage=rk}try{return xt.parentOrigin="*",Km(t,"initialize",[Bh,Hm,e]).then((([r,n,s,i])=>(NR(i,xt.currentWindow,{onMessage:zR,sendPostMessage:RR}),{context:r,clientType:n,runtimeConfig:s,clientSupportedSDKVersion:i})))}finally{xt.parentOrigin=null}}function TR(e,t,...r){return Km(e,t,r).then((([n])=>n))}function OR(e,t,r,...n){return Km(e,t,n).then((([s,i])=>{if(!s)throw new Error(i||r)}))}function Km(e,t,r=void 0){if(!OE(e))throw Error(`apiVersionTag: ${e} passed in doesn't follow the pattern starting with 'v' followed by digits, then underscore with words, please check.`);return new Promise((n=>{const s=BE(e,t,r);var i;n((i=s.uuid,new Promise((l=>{dr.promiseCallbacks.set(i,l)}))))}))}function IR(e){return e.map((t=>SR(t)?t.serialize():t))}function DR(e,t,r,n,s){var i;return Xo(this,void 0,void 0,(function*(){const l=IR(t),[u]=yield Km(n,e,l);if(U6(u))throw new Error(`${u.errorCode}, message: ${(i=u.message)!==null&&i!==void 0?i:"None"}`);if(r.validate(u))return r.deserialize(u);throw new Error(`${Uh.INTERNAL_ERROR}, message: Invalid response from host - ${JSON.stringify(u)}`)}))}function oa(e,t,r,n){let s;if(r instanceof Function?n=r:r instanceof Array&&(s=r),!OE(e))throw Error(`apiVersionTag: ${e} passed in doesn't follow the pattern starting with 'v' followed by digits, then underscore with words, please check.`);const i=BE(e,t,s);n&&dr.callbacks.set(i.uuid,n)}dr.parentMessageQueue=[],dr.topMessageQueue=[],dr.nextMessageId=0,dr.callbacks=new Map,dr.promiseCallbacks=new Map,dr.portCallbacks=new Map,dr.legacyMessageIdsToUuidMap={};const $R=Hl.extend("sendNestedAuthRequestToTopWindow");function RR(e,t){const r=$R,n=xt.topWindow,s=(function(i,l){const u=dr.nextMessageId++,d=new Wd;return dr.legacyMessageIdsToUuidMap[u]=d,{id:u,uuid:d,func:"nestedAppAuth.execute",timestamp:Date.now(),monotonicTimestamp:Bx(),apiVersionTag:l,args:[],data:i}})(e,t);return r("Message %s information: %o",qo(s),{actionName:s.func}),UE(n,s)}const MR=Hl.extend("sendRequestToTargetWindowHelper");function UE(e,t){const r=MR,n=(function(i){return i===xt.topWindow&&Cv()?"top":i===xt.parentWindow?"parent":null})(e),s=TE(t);if(Gt.isFramelessWindow)xt.currentWindow&&xt.currentWindow.nativeInterface&&(r("Sending message %s to %s via framelessPostMessage interface",qo(s),n),xt.currentWindow.nativeInterface.framelessPostMessage(JSON.stringify(s)));else{const i=(function(l){return l===xt.topWindow&&Cv()?xt.topOrigin:l===xt.parentWindow?xt.parentOrigin:null})(e);e&&i?(r("Sending message %s to %s via postMessage",qo(s),n),e.postMessage(s,i)):(r("Adding message %s to %s message queue",qo(s),n),UR(e).push(t))}return t}const FR=Hl.extend("sendMessageToParentHelper");function BE(e,t,r,n,s){const i=FR,l=xt.parentWindow,u=(function(d,m,f,p,v){const x=dr.nextMessageId++,b=new Wd;dr.legacyMessageIdsToUuidMap[x]=b;const S=Gt.teamsJsInstanceId;return{id:x,uuid:b,func:m,timestamp:Date.now(),monotonicTimestamp:Bx(),args:f||[],apiVersionTag:d,isProxiedFromChild:p!=null,teamsJsInstanceId:S}})(e,t,r,n);return Wh.storeCallbackInformation(u.uuid,{name:t,calledAt:u.timestamp}),i("Message %s information: %o",qo(u),{actionName:t,args:r}),UE(l,u)}const ek=Hl.extend("processIncomingMessage"),LR=Hl.extend("processAuthBridgeMessage");function zR(e,t){var r,n;const s=LR;if(!e||!e.data||typeof e.data!="object")return void s("Unrecognized message format received by app, message being ignored. Message: %o",e);const{args:i}=e.data,[,l]=i??[],u=(()=>{try{return JSON.parse(l)}catch{return null}})();if(!u||typeof u!="object"||u.messageType!=="NestedAppAuthResponse")return void s("Unrecognized data format received by app, message being ignored. Message: %o",e);const d=e.source||((r=e==null?void 0:e.originalEvent)===null||r===void 0?void 0:r.source),m=e.origin||((n=e==null?void 0:e.originalEvent)===null||n===void 0?void 0:n.origin);d?WE(d,m)?(xt.topWindow&&!xt.topWindow.closed&&d!==xt.topWindow||(xt.topWindow=d,xt.topOrigin=m),xt.topWindow&&xt.topWindow.closed&&(xt.topWindow=null,xt.topOrigin=null),IE(xt.topWindow,xt.topOrigin,dr.topMessageQueue,"top"),t(l)):s("Message being ignored by app because it is either coming from the current window or a different window with an invalid origin"):s("Message being ignored by app because it is coming for a target that is null")}const jy=Hl.extend("shouldProcessIncomingMessage");function WE(e,t){return Xo(this,void 0,void 0,(function*(){if(xt.currentWindow&&e===xt.currentWindow)return jy("Should not process message because it is coming from the current window"),!1;if(xt.currentWindow&&xt.currentWindow.location&&t&&t===xt.currentWindow.location.origin)return!0;{let r;try{r=new URL(t)}catch{return jy("Message has an invalid origin of %s",t),!1}const n=yield AR(r);return n||jy("Message has an invalid origin of %s",t),n}}))}const tk=Hl.extend("handleIncomingMessageFromParent");function Nh(e,t){if(t){const r=[...e].find((([n,s])=>n.toString()===t.toString()));if(r)return r[0]}}function Sy(e,t){const r=Nh(t,e.uuid);r&&t.delete(r),e.uuid?dr.legacyMessageIdsToUuidMap={}:delete dr.legacyMessageIdsToUuidMap[e.id]}function rk(e){const t=tk,r=Bx();if("id"in e.data&&typeof e.data.id=="number"){const n=e.data,s=nR(n),i=(function(l){const u=tk;if(!l.uuid)return dr.legacyMessageIdsToUuidMap[l.id];{const d=l.uuid,m=Nh(dr.callbacks,d);if(m)return m;const f=Nh(dr.promiseCallbacks,d);if(f)return f;const p=Nh(dr.portCallbacks,d);if(p)return p}u("Received message %s that failed to produce a callbackId",qo(l))})(s);if(i){const l=dr.callbacks.get(i);t("Received a response from parent for message %s",i.toString()),Wh.handlePerformanceMetrics(i,s,t,r),l&&(t("Invoking the registered callback for message %s with arguments %o",i.toString(),s.args),l.apply(null,[...s.args,s.isPartialResponse]),(function(m){return m.data.isPartialResponse===!0})(e)||(t("Removing registered callback for message %s",i.toString()),Sy(s,dr.callbacks)));const u=dr.promiseCallbacks.get(i);u&&(t("Invoking the registered promise callback for message %s with arguments %o",i.toString(),s.args),u(s.args),t("Removing registered promise callback for message %s",i.toString()),Sy(s,dr.promiseCallbacks));const d=dr.portCallbacks.get(i);if(d){let m;t("Invoking the registered port callback for message %s with arguments %o",i.toString(),s.args),e.ports&&e.ports[0]instanceof MessagePort&&(m=e.ports[0]),d(m,s.args),t("Removing registered port callback for message %s",i.toString()),Sy(s,dr.portCallbacks)}s.uuid&&(dr.legacyMessageIdsToUuidMap={})}}else if("func"in e.data&&typeof e.data.func=="string"){const n=e.data;Wh.handleOneWayPerformanceMetrics(n,t,r),t('Received a message from parent %s, action: "%s"',qo(n),n.func),NM(n.func,n.args)}else t("Received an unknown message: %O",e)}function Cv(){return xt.topWindow!==xt.parentWindow}function UR(e){return e===xt.topWindow&&Cv()?dr.topMessageQueue:e===xt.parentWindow?dr.parentMessageQueue:[]}const VE=Da("internal"),BR=VE.extend("ensureInitializeCalled"),WR=VE.extend("ensureInitialized");function qE(){if(!Gt.initializeCalled)throw BR(_d),new Error(_d)}function uu(e,...t){if(!Gt.initializeCompleted)throw WR("%s. initializeCalled: %s",_d,Gt.initializeCalled.toString()),new Error(_d);if(t&&t.length>0){let r=!1;for(let n=0;n<t.length;n++)if(t[n]===Gt.frameContext){r=!0;break}if(!r)throw new Error(`This call is only allowed in following contexts: ${JSON.stringify(t)}. Current context: "${Gt.frameContext}".`)}return gR(e)}function VR(e){let t=Gt.additionalValidOrigins.concat(e.filter((n=>typeof n=="string"&&hR.test(n))));const r={};t=t.filter((n=>!r[n]&&(r[n]=!0,!0))),Gt.additionalValidOrigins=t}function qR(e){if(!KR(e))throw new Error(`Potential app id (${e}) is invalid; its length ${e.length} is not within the length limits (${HE}-${KE}).`)}function HR(e){if(eR(e))throw new Error(`Potential app id (${e}) is invalid; it contains script tags.`);if(GR(e))throw new Error(`Potential app id (${e}) is invalid; it contains non-printable characters.`)}const HE=4,KE=256;function KR(e){return e.length<KE&&e.length>HE}function GR(e){return[...e].some((t=>{const r=t.charCodeAt(0);return r<32||r>126}))}let YR=class{constructor(t){this.idAsString=t,HR(t)}serialize(){return this.toString()}toString(){return this.idAsString}},JR=class extends YR{constructor(t){super(t),qR(t)}toJSON(){return{appIdAsString:this.toString()}}};function GE(e){return e==null}const Gm="v2",ky=Da("app"),nk={Success:"appInitialization.success"};var sk,ik;function XR(e){return gM(vn(Gm,"app.initialize"),e)}function QR(){return new Promise((e=>{qE(),e(TR(vn(Gm,"app.getContext"),"getContext"))})).then((e=>(function(t){var r;return{actionInfo:t.actionInfo,app:{locale:t.locale,sessionId:t.appSessionId?t.appSessionId:"",theme:t.theme?t.theme:"default",iconPositionVertical:t.appIconPosition,osLocaleInfo:t.osLocaleInfo,messageId:t.messageId,parentMessageId:t.parentMessageId,userClickTime:t.userClickTime,userClickTimeV2:t.userClickTimeV2,userFileOpenPreference:t.userFileOpenPreference,host:{name:t.hostName?t.hostName:kv.teams,clientType:t.hostClientType?t.hostClientType:or.web,sessionId:t.sessionId?t.sessionId:"",ringId:t.ringId},appLaunchId:t.appLaunchId,appId:t.appId?new JR(t.appId):void 0,manifestVersion:t.manifestVersion},page:{id:t.entityId,frameContext:t.frameContext?t.frameContext:Gt.frameContext,renderingSurface:t.renderingSurface?t.renderingSurface:void 0,subPageId:t.subEntityId,isFullScreen:t.isFullScreen,isMultiWindow:t.isMultiWindow,isBackgroundLoad:t.isBackgroundLoad,sourceOrigin:t.sourceOrigin},user:{id:(r=t.userObjectId)!==null&&r!==void 0?r:"",displayName:t.userDisplayName,isCallingAllowed:t.isCallingAllowed,isPSTNCallingAllowed:t.isPSTNCallingAllowed,licenseType:t.userLicenseType,loginHint:t.loginHint,userPrincipalName:t.userPrincipalName,tenant:t.tid?{id:t.tid,teamsSku:t.tenantSKU}:void 0},channel:t.channelId?{id:t.channelId,displayName:t.channelName,relativeUrl:t.channelRelativeUrl,membershipType:t.channelType,defaultOneNoteSectionId:t.defaultOneNoteSectionId,ownerGroupId:t.hostTeamGroupId,ownerTenantId:t.hostTeamTenantId}:void 0,chat:t.chatId?{id:t.chatId}:void 0,meeting:t.meetingId?{id:t.meetingId}:void 0,sharepoint:t.sharepoint,team:t.teamId?{internalId:t.teamId,displayName:t.teamName,type:t.teamType,groupId:t.groupId,templateId:t.teamTemplateId,isArchived:t.isTeamArchived,userRole:t.userTeamRole}:void 0,sharePointSite:t.teamSiteUrl||t.teamSiteDomain||t.teamSitePath||t.mySitePath||t.mySiteDomain?{teamSiteUrl:t.teamSiteUrl,teamSiteDomain:t.teamSiteDomain,teamSitePath:t.teamSitePath,teamSiteId:t.teamSiteId,mySitePath:t.mySitePath,mySiteDomain:t.mySiteDomain}:void 0,dialogParameters:t.dialogParameters||{}}})(e)))}function ZR(){return yM(vn(Gm,"app.notifySuccess"))}function eM(e){vM(vn(Gm,"app.registerOnThemeChangeHandler"),e)}(function(e){e.AuthFailed="AuthFailed",e.Timeout="Timeout",e.Other="Other"})(sk||(sk={})),(function(e){e.PermissionError="PermissionError",e.NotFound="NotFound",e.Throttling="Throttling",e.Offline="Offline",e.Other="Other"})(ik||(ik={})),ky("teamsjs instance is version %s, starting at %s UTC (%s local)",Bh,new Date().toISOString(),new Date().toLocaleString()),(function(){if(qm())return;const e=document.getElementsByTagName("script"),t=e&&e[e.length-1]&&e[e.length-1].src,r="Today, teamsjs can only be used from a single script or you may see undefined behavior. This log line is used to help detect cases where teamsjs is loaded multiple times -- it is always written. The presence of the log itself does not indicate a multi-load situation, but multiples of these log lines will. If you would like to use teamjs from more than one script at the same time, please open an issue at https://github.com/OfficeDev/microsoft-teams-library-js/issues";t&&t.length!==0?ky("teamsjs is being used from %s. %s",t,r):ky("teamsjs is being used from a script tag embedded directly in your html. %s",r)})();const tM="v2",rM=[];function nM(e){Gt.frameContext&&(Gt.frameContext===_v.task?rM.push(e):CM("messageForChild"))}function sM(){Al(vn(tM,"dialog.registerMessageForChildHandler"),"messageForChild",nM,!1)}const Wc="v2";var ak,ok;(function(e){e[e.ifRoom=0]="ifRoom",e[e.overflowOnly=1]="overflowOnly"})(ak||(ak={}));function iM(){Al(vn(Wc,"menus.registerNavBarMenuItemPressHandler"),"navBarMenuItemPress",oM,!1),Al(vn(Wc,"menus.registerActionMenuItemPressHandler"),"actionMenuItemPress",lM,!1),Al(vn(Wc,"menus.registerSetModuleViewHandler"),"setModuleView",aM,!1)}function aM(e){uu(Ca),oa(vn(Wc,"menus.handleViewConfigItemPress"),"viewConfigItemPress",[e])}function oM(e){uu(Ca),oa(vn(Wc,"menus.handleNavBarMenuItemPress"),"handleNavBarMenuItemPress",[e])}function lM(e){uu(Ca),oa(vn(Wc,"menus.handleActionMenuItemPress"),"handleActionMenuItemPress",[e])}(function(e){e.dropDown="dropDown",e.popOver="popOver"})(ok||(ok={}));class cM{}let uM=class extends cM{validate(t){return!0}deserialize(t){return t}};function dM(){Al(vn(Dl,"pages.config.registerSettingsSaveHandler"),"settings.save",fM,!1),Al(vn(Dl,"pages.config.registerSettingsRemoveHandler"),"settings.remove",mM,!1)}function fM(e){new hM(e).notifySuccess()}let hM=class{constructor(t){this.notified=!1,this.result=t||{}}notifySuccess(){this.ensureNotNotified(),oa(vn(Dl,"pages.saveEvent.notifySuccess"),"settings.save.success"),this.notified=!0}notifyFailure(t){this.ensureNotNotified(),oa(vn(Dl,"pages.saveEvent.notifyFailure"),"settings.save.failure",[t]),this.notified=!0}ensureNotNotified(){if(this.notified)throw new Error("The SaveEvent may only notify success or failure once.")}};function mM(){new pM().notifySuccess()}let pM=class{constructor(){this.notified=!1}notifySuccess(){this.ensureNotNotified(),oa(vn(Dl,"pages.removeEvent.notifySuccess"),"settings.remove.success"),this.notified=!0}notifyFailure(t){this.ensureNotNotified(),oa(vn(Dl,"pages.removeEvent.notifyFailure"),"settings.remove.failure",[t]),this.notified=!0}ensureNotNotified(){if(this.notified)throw new Error("The removeEventType may only notify success or failure once.")}};const YE=Da("app");function gM(e,t){return qm()?(YE.extend("initialize")("window object undefined at initialization"),Promise.resolve()):X6((()=>(function(r,n){return new Promise((s=>{Gt.initializeCalled||(Gt.initializeCalled=!0,_M(),Gt.initializePromise=PR(n,r).then((({context:i,clientType:l,runtimeConfig:u,clientSupportedSDKVersion:d=YS})=>{Gt.frameContext=i,Gt.hostClientType=l,Gt.clientSupportedSDKVersion=d;try{Gu("Parsing %s",u);let m=JSON.parse(u);if(Gu("Checking if %o is a valid runtime object",m??"null"),!m||!m.apiVersion)throw new Error("Received runtime config is invalid");m=HS(m),u&&by(m)}catch(m){if(!(m instanceof SyntaxError))throw m;try{Gu("Attempting to parse %s as an SDK version",u),isNaN(AE(u,YS))||(Gt.clientSupportedSDKVersion=u);let f=JSON.parse(d);if(Gu("givenRuntimeConfig parsed to %o",f??"null"),!f)throw new Error("givenRuntimeConfig string was successfully parsed. However, it parsed to value of null");f=HS(f),by(f)}catch(f){if(!(f instanceof SyntaxError))throw f;by(jR(Gt.clientSupportedSDKVersion,yR,bR))}}Gt.initializeCompleted=!0})),iM(),dM(),sM()),Array.isArray(n)&&VR(n),Gt.initializePromise!==void 0?s(Gt.initializePromise):Gu("GlobalVars.initializePromise is unexpectedly undefined")}))})(e,t)),6e4,new Error("SDK initialization timed out."))}function yM(e){return Xo(this,void 0,void 0,(function*(){if(Gt.initializeCompleted)return lk(e);if(!Gt.initializePromise)throw new Error(_d);return Gt.initializePromise.then((()=>lk(e)))}))}function lk(e){return Xo(this,void 0,void 0,(function*(){return uu(Ca)&&(!((t=Ca.supports.app)===null||t===void 0)&&t.notifySuccessResponse)?DR(nk.Success,[Bh],new uM,e).then((()=>({hasFinishedSuccessfully:!0}))):(oa(e,nk.Success,[Bh]),{hasFinishedSuccessfully:"unknown"});var t}))}const Gu=YE.extend("initializeHelper");function vM(e,t){!GE(t)&&qE(),EM(e,t)}function xM(){return bM(vn(Dl,"pages.backStack.navigateBack"))}function wM(){return!(!uu(Ca)||!Ca.supports.pages)&&!!Ca.supports.pages.backStack}const Dl="v2";function bM(e){return new Promise((t=>{if(uu(Ca),!wM())throw B6;t(OR(e,"navigateBack","Back navigation is not supported in the current client or context."))}))}function jM(){Al(vn("v2","pages.backStack.registerBackButtonPressHandler"),"backButtonPress",SM,!1)}function SM(){xM()}const kM=Da("handlers");let Vr=class Sa{static initializeHandlers(){Sa.handlers.themeChange=AM,Sa.handlers.load=PM,Sa.handlers.beforeUnload=TM,jM()}static uninitializeHandlers(){Sa.handlers={},Sa.themeChangeHandler=null,Sa.loadHandler=null,Sa.beforeUnloadHandler=null,Sa.beforeSuspendOrTerminateHandler=null,Sa.resumeHandler=null}};function _M(){Vr.initializeHandlers()}Vr.handlers={},Vr.themeChangeHandler=null,Vr.loadHandler=null,Vr.beforeUnloadHandler=null,Vr.beforeSuspendOrTerminateHandler=null,Vr.resumeHandler=null,Vr.hostToAppPerformanceMetricsHandler=null;const ck=kM.extend("callHandler");function NM(e,t){const r=Vr.handlers[e];return r?(ck("Invoking the registered handler for message %s with arguments %o",e,t),[!0,r.apply(this,t)]):(ck("Handler for action message %s not found.",e),[!1,void 0])}function Al(e,t,r,n=!0,s=[]){r?(Vr.handlers[t]=r,n&&oa(e,"registerHandler",[t,...s])):delete Vr.handlers[t]}function CM(e){delete Vr.handlers[e]}function EM(e,t){Vr.themeChangeHandler=t,!GE(t)&&oa(e,"registerHandler",["themeChange"])}function AM(e){Vr.themeChangeHandler&&Vr.themeChangeHandler(e)}function uk(e){Vr.hostToAppPerformanceMetricsHandler&&Vr.hostToAppPerformanceMetricsHandler(e)}function PM(e){const t={entityId:(r=e).entityId,contentUrl:new URL(r.contentUrl)};var r;Vr.resumeHandler?(Vr.resumeHandler(t),dk()):Vr.loadHandler&&(Vr.loadHandler(e),dk())}function TM(){return Xo(this,void 0,void 0,(function*(){const e=()=>{oa(vn("v2","handleBeforeUnload"),"readyToUnload",[])};Vr.beforeSuspendOrTerminateHandler?(yield Vr.beforeSuspendOrTerminateHandler(),e()):Vr.beforeUnloadHandler&&Vr.beforeUnloadHandler(e)||e()}))}const OM=Da("childProxyingCommunication");function dk(){return!1}function IM(e,t){return!1}OM.extend("handleIncomingMessageFromChild");const DM=y.createContext({inTeams:!1,teamsContext:null,isInitialized:!1,teamsTheme:null}),$M=({children:e})=>{const[t,r]=y.useState(!1),[n,s]=y.useState(null),[i,l]=y.useState(!1),[u,d]=y.useState(null);return y.useEffect(()=>{(async()=>{try{if(new URLSearchParams(window.location.search).get("inTeams")==="true"||window.parent!==window){console.log(" Initializing Teams SDK..."),await XR();const v=await QR();console.log(" Teams context:",v),r(!0),s(v),d(v.app.theme),eM(x=>{d(x)}),ZR()}}catch(f){console.error(" Teams initialization error:",f),r(!1)}finally{l(!0)}})()},[]),a.jsx(DM.Provider,{value:{inTeams:t,teamsContext:n,isInitialized:i,teamsTheme:u},children:e})},RM="service_idsx5cg",MM="template_4owif48",FM="OXfL2jaTJuDR5IThS";async function Kc(e){var t;try{const r=await fetch("https://api.emailjs.com/api/v1.0/email/send",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({service_id:RM,template_id:MM,user_id:FM,template_params:{email:e.to,to_email:e.to,to_name:e.to.split("@")[0],subject:e.subject,message_html:e.html||e.text||"",message_text:e.text||((t=e.html)==null?void 0:t.replace(/<[^>]*>/g,""))||""}})});if(!r.ok){const s=await r.text();console.error("EmailJS API error:",r.status,s);let i=`EmailJS API error: ${r.status}`;try{const l=JSON.parse(s);l.text?i=l.text:l.message?i=l.message:l.error&&(i=l.error)}catch{i=s||i}throw new Error(i)}let n;try{const s=await r.text();if(s==="OK"||s.trim()==="OK"){console.log("Email sent successfully via EmailJS");return}n=JSON.parse(s),console.log("Email sent successfully via EmailJS:",n)}catch(s){if(r.ok){console.log("Email sent successfully via EmailJS (non-JSON response)");return}throw s}return}catch(r){throw console.error("sendInvitationEmail error:",r),r.message?r:new Error(`Failed to send email: ${r.toString()}`)}}/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LM=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),zM=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(t,r,n)=>n?n.toUpperCase():r.toLowerCase()),fk=e=>{const t=zM(e);return t.charAt(0).toUpperCase()+t.slice(1)},JE=(...e)=>e.filter((t,r,n)=>!!t&&t.trim()!==""&&n.indexOf(t)===r).join(" ").trim(),UM=e=>{for(const t in e)if(t.startsWith("aria-")||t==="role"||t==="title")return!0};/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var BM={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WM=y.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:r=2,absoluteStrokeWidth:n,className:s="",children:i,iconNode:l,...u},d)=>y.createElement("svg",{ref:d,...BM,width:t,height:t,stroke:e,strokeWidth:n?Number(r)*24/Number(t):r,className:JE("lucide",s),...!i&&!UM(u)&&{"aria-hidden":"true"},...u},[...l.map(([m,f])=>y.createElement(m,f)),...Array.isArray(i)?i:[i]]));/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rt=(e,t)=>{const r=y.forwardRef(({className:n,...s},i)=>y.createElement(WM,{ref:i,iconNode:t,className:JE(`lucide-${LM(fk(e))}`,`lucide-${e}`,n),...s}));return r.displayName=fk(e),r};/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VM=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],hk=Rt("arrow-left",VM);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qM=[["path",{d:"m16 3 4 4-4 4",key:"1x1c3m"}],["path",{d:"M20 7H4",key:"zbl0bi"}],["path",{d:"m8 21-4-4 4-4",key:"h9nckh"}],["path",{d:"M4 17h16",key:"g4d7ey"}]],XE=Rt("arrow-right-left",qM);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HM=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],KM=Rt("arrow-right",HM);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GM=[["path",{d:"M3.85 8.62a4 4 0 0 1 4.78-4.77 4 4 0 0 1 6.74 0 4 4 0 0 1 4.78 4.78 4 4 0 0 1 0 6.74 4 4 0 0 1-4.77 4.78 4 4 0 0 1-6.75 0 4 4 0 0 1-4.78-4.77 4 4 0 0 1 0-6.76Z",key:"3c2336"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],Ev=Rt("badge-check",GM);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YM=[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]],QE=Rt("book-open",YM);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JM=[["path",{d:"M12 20v-9",key:"1qisl0"}],["path",{d:"M14 7a4 4 0 0 1 4 4v3a6 6 0 0 1-12 0v-3a4 4 0 0 1 4-4z",key:"uouzyp"}],["path",{d:"M14.12 3.88 16 2",key:"qol33r"}],["path",{d:"M21 21a4 4 0 0 0-3.81-4",key:"1b0z45"}],["path",{d:"M21 5a4 4 0 0 1-3.55 3.97",key:"5cxbf6"}],["path",{d:"M22 13h-4",key:"1jl80f"}],["path",{d:"M3 21a4 4 0 0 1 3.81-4",key:"1fjd4g"}],["path",{d:"M3 5a4 4 0 0 0 3.55 3.97",key:"1d7oge"}],["path",{d:"M6 13H2",key:"82j7cp"}],["path",{d:"m8 2 1.88 1.88",key:"fmnt4t"}],["path",{d:"M9 7.13V6a3 3 0 1 1 6 0v1.13",key:"1vgav8"}]],ZE=Rt("bug",JM);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XM=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],An=Rt("calendar",XM);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QM=[["path",{d:"M5 21v-6",key:"1hz6c0"}],["path",{d:"M12 21V3",key:"1lcnhd"}],["path",{d:"M19 21V9",key:"unv183"}]],Ch=Rt("chart-no-axes-column",QM);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZM=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],ks=Rt("chevron-down",ZM);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eF=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],tF=Rt("chevron-left",eF);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rF=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],an=Rt("circle-alert",rF);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nF=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],Mr=Rt("circle-check-big",nF);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sF=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],Vx=Rt("clock",sF);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iF=[["path",{d:"M11.562 3.266a.5.5 0 0 1 .876 0L15.39 8.87a1 1 0 0 0 1.516.294L21.183 5.5a.5.5 0 0 1 .798.519l-2.834 10.246a1 1 0 0 1-.956.734H5.81a1 1 0 0 1-.957-.734L2.02 6.02a.5.5 0 0 1 .798-.519l4.276 3.664a1 1 0 0 0 1.516-.294z",key:"1vdc57"}],["path",{d:"M5 21h14",key:"11awu3"}]],Br=Rt("crown",iF);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aF=[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]],oF=Rt("database",aF);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lF=[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]],mk=Rt("ellipsis-vertical",lF);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cF=[["path",{d:"M14 2v6a2 2 0 0 0 .245.96l5.51 10.08A2 2 0 0 1 18 22H6a2 2 0 0 1-1.755-2.96l5.51-10.08A2 2 0 0 0 10 8V2",key:"18mbvz"}],["path",{d:"M6.453 15h11.094",key:"3shlmq"}],["path",{d:"M8.5 2h7",key:"csnxdl"}]],eA=Rt("flask-conical",cF);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uF=[["path",{d:"M12.531 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14v6a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341l.427-.473",key:"ol2ft2"}],["path",{d:"m16.5 3.5 5 5",key:"15e6fa"}],["path",{d:"m21.5 3.5-5 5",key:"m0lwru"}]],dF=Rt("funnel-x",uF);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fF=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]],hF=Rt("funnel",fF);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mF=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],ld=Rt("info",mF);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pF=[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]],Ym=Rt("lightbulb",pF);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gF=[["path",{d:"M3 5h.01",key:"18ugdj"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 19h.01",key:"noohij"}],["path",{d:"M8 5h13",key:"1pao27"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 19h13",key:"m83p4d"}]],ta=Rt("list",gF);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yF=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],vF=Rt("lock",yF);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xF=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],pi=Rt("log-out",xF);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wF=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],Jm=Rt("mail",wF);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bF=[["path",{d:"M5 12h14",key:"1ays0h"}]],_l=Rt("minus",bF);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jF=[["path",{d:"m16 6-8.414 8.586a2 2 0 0 0 2.829 2.829l8.414-8.586a4 4 0 1 0-5.657-5.657l-8.379 8.551a6 6 0 1 0 8.485 8.485l8.379-8.551",key:"1miecu"}]],Sl=Rt("paperclip",jF);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SF=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]],Vh=Rt("pencil",SF);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kF=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],dn=Rt("plus",kF);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _F=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],Ko=Rt("refresh-cw",_F);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NF=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],pk=Rt("search",NF);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CF=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],Ks=Rt("settings",CF);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EF=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],gk=Rt("shield-check",EF);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AF=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],Rr=Rt("shield",AF);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PF=[["path",{d:"m18 14 4 4-4 4",key:"10pe0f"}],["path",{d:"m18 2 4 4-4 4",key:"pucp1d"}],["path",{d:"M2 18h1.973a4 4 0 0 0 3.3-1.7l5.454-8.6a4 4 0 0 1 3.3-1.7H22",key:"1ailkh"}],["path",{d:"M2 6h1.972a4 4 0 0 1 3.6 2.2",key:"km57vx"}],["path",{d:"M22 18h-6.041a4 4 0 0 1-3.3-1.8l-.359-.45",key:"os18l9"}]],TF=Rt("shuffle",PF);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OF=[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]],Ec=Rt("sparkles",OF);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IF=[["path",{d:"M21 10.656V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h12.344",key:"2acyp4"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],$l=Rt("square-check-big",IF);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DF=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],vd=Rt("square-pen",DF);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $F=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]],Nd=Rt("square",$F);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RF=[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]],Ac=Rt("star",RF);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MF=[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]],yk=Rt("tag",MF);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FF=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],to=Rt("trash-2",FF);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LF=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],zF=Rt("triangle-alert",LF);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UF=[["path",{d:"M10 14.66v1.626a2 2 0 0 1-.976 1.696A5 5 0 0 0 7 21.978",key:"1n3hpd"}],["path",{d:"M14 14.66v1.626a2 2 0 0 0 .976 1.696A5 5 0 0 1 17 21.978",key:"rfe1zi"}],["path",{d:"M18 9h1.5a1 1 0 0 0 0-5H18",key:"7xy6bh"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M6 9a6 6 0 0 0 12 0V3a1 1 0 0 0-1-1H7a1 1 0 0 0-1 1z",key:"1mhfuq"}],["path",{d:"M6 9H4.5a1 1 0 0 1 0-5H6",key:"tex48p"}]],Xm=Rt("trophy",UF);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BF=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]],vk=Rt("user-plus",BF);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WF=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"17",x2:"22",y1:"8",y2:"13",key:"3nzzx3"}],["line",{x1:"22",x2:"17",y1:"8",y2:"13",key:"1swrse"}]],Yu=Rt("user-x",WF);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VF=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],gn=Rt("user",VF);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qF=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],Qn=Rt("users",qF);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HF=[["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}],["path",{d:"M5 7c0-1.1.9-2 2-2h10a2 2 0 0 1 2 2v12H5V7Z",key:"1ezoue"}],["path",{d:"M22 19H2",key:"nuriw5"}]],Ln=Rt("vote",HF);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KF=[["rect",{width:"8",height:"8",x:"3",y:"3",rx:"2",key:"by2w9f"}],["path",{d:"M7 11v4a2 2 0 0 0 2 2h4",key:"xkn7yn"}],["rect",{width:"8",height:"8",x:"13",y:"13",rx:"2",key:"1cgmvn"}]],GF=Rt("workflow",KF);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YF=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],Ts=Rt("x",YF),$a="/feature-voting-app/assets/New-Millennium-color-logo-C0dd35-E.svg",tA="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='UTF-8'?%3e%3csvg%20id='Layer_1'%20xmlns='http://www.w3.org/2000/svg'%20version='1.1'%20viewBox='0%200%2019%2019'%3e%3c!--%20Generator:%20Adobe%20Illustrator%2029.8.3,%20SVG%20Export%20Plug-In%20.%20SVG%20Version:%202.1.1%20Build%203)%20--%3e%3cdefs%3e%3cstyle%3e%20.st0%20{%20fill:%20%23f25022;%20}%20.st1%20{%20fill:%20%23ffb900;%20}%20.st2%20{%20fill:%20%237fba00;%20}%20.st3%20{%20fill:%20%2300a4ef;%20}%20%3c/style%3e%3c/defs%3e%3crect%20class='st0'%20width='9'%20height='9'/%3e%3crect%20class='st3'%20y='10'%20width='9'%20height='9'/%3e%3crect%20class='st2'%20x='10'%20width='9'%20height='9'/%3e%3crect%20class='st1'%20x='10'%20y='10'%20width='9'%20height='9'/%3e%3c/svg%3e";var Vd=e=>e.type==="checkbox",Nl=e=>e instanceof Date,Hs=e=>e==null;const rA=e=>typeof e=="object";var Tn=e=>!Hs(e)&&!Array.isArray(e)&&rA(e)&&!Nl(e),nA=e=>Tn(e)&&e.target?Vd(e.target)?e.target.checked:e.target.value:e,JF=e=>e.substring(0,e.search(/\.\d+(\.|$)/))||e,sA=(e,t)=>e.has(JF(t)),XF=e=>{const t=e.constructor&&e.constructor.prototype;return Tn(t)&&t.hasOwnProperty("isPrototypeOf")},qx=typeof window<"u"&&typeof window.HTMLElement<"u"&&typeof document<"u";function Fn(e){let t;const r=Array.isArray(e),n=typeof FileList<"u"?e instanceof FileList:!1;if(e instanceof Date)t=new Date(e);else if(!(qx&&(e instanceof Blob||n))&&(r||Tn(e)))if(t=r?[]:Object.create(Object.getPrototypeOf(e)),!r&&!XF(e))t=e;else for(const s in e)e.hasOwnProperty(s)&&(t[s]=Fn(e[s]));else return e;return t}var Qm=e=>/^\w*$/.test(e),fn=e=>e===void 0,Hx=e=>Array.isArray(e)?e.filter(Boolean):[],Kx=e=>Hx(e.replace(/["|']|\]/g,"").split(/\.|\[/)),tt=(e,t,r)=>{if(!t||!Tn(e))return r;const n=(Qm(t)?[t]:Kx(t)).reduce((s,i)=>Hs(s)?s:s[i],e);return fn(n)||n===e?fn(e[t])?r:e[t]:n},li=e=>typeof e=="boolean",Dr=(e,t,r)=>{let n=-1;const s=Qm(t)?[t]:Kx(t),i=s.length,l=i-1;for(;++n<i;){const u=s[n];let d=r;if(n!==l){const m=e[u];d=Tn(m)||Array.isArray(m)?m:isNaN(+s[n+1])?{}:[]}if(u==="__proto__"||u==="constructor"||u==="prototype")return;e[u]=d,e=e[u]}};const qh={BLUR:"blur",FOCUS_OUT:"focusout",CHANGE:"change"},ra={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},Va={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"},iA=Nt.createContext(null);iA.displayName="HookFormContext";const Gx=()=>Nt.useContext(iA);var aA=(e,t,r,n=!0)=>{const s={defaultValues:t._defaultValues};for(const i in e)Object.defineProperty(s,i,{get:()=>{const l=i;return t._proxyFormState[l]!==ra.all&&(t._proxyFormState[l]=!n||ra.all),r&&(r[l]=!0),e[l]}});return s};const Yx=typeof window<"u"?Nt.useLayoutEffect:Nt.useEffect;function QF(e){const t=Gx(),{control:r=t.control,disabled:n,name:s,exact:i}=e||{},[l,u]=Nt.useState(r._formState),d=Nt.useRef({isDirty:!1,isLoading:!1,dirtyFields:!1,touchedFields:!1,validatingFields:!1,isValidating:!1,isValid:!1,errors:!1});return Yx(()=>r._subscribe({name:s,formState:d.current,exact:i,callback:m=>{!n&&u({...r._formState,...m})}}),[s,n,i]),Nt.useEffect(()=>{d.current.isValid&&r._setValid(!0)},[r]),Nt.useMemo(()=>aA(l,r,d.current,!1),[l,r])}var ui=e=>typeof e=="string",Av=(e,t,r,n,s)=>ui(e)?(n&&t.watch.add(e),tt(r,e,s)):Array.isArray(e)?e.map(i=>(n&&t.watch.add(i),tt(r,i))):(n&&(t.watchAll=!0),r),Pv=e=>Hs(e)||!rA(e);function na(e,t,r=new WeakSet){if(Pv(e)||Pv(t))return e===t;if(Nl(e)&&Nl(t))return e.getTime()===t.getTime();const n=Object.keys(e),s=Object.keys(t);if(n.length!==s.length)return!1;if(r.has(e)||r.has(t))return!0;r.add(e),r.add(t);for(const i of n){const l=e[i];if(!s.includes(i))return!1;if(i!=="ref"){const u=t[i];if(Nl(l)&&Nl(u)||Tn(l)&&Tn(u)||Array.isArray(l)&&Array.isArray(u)?!na(l,u,r):l!==u)return!1}}return!0}function ZF(e){const t=Gx(),{control:r=t.control,name:n,defaultValue:s,disabled:i,exact:l,compute:u}=e||{},d=Nt.useRef(s),m=Nt.useRef(u),f=Nt.useRef(void 0),p=Nt.useRef(r),v=Nt.useRef(n);m.current=u;const[x,b]=Nt.useState(()=>{const I=r._getWatch(n,d.current);return m.current?m.current(I):I}),S=Nt.useCallback(I=>{const T=Av(n,r._names,I||r._formValues,!1,d.current);return m.current?m.current(T):T},[r._formValues,r._names,n]),j=Nt.useCallback(I=>{if(!i){const T=Av(n,r._names,I||r._formValues,!1,d.current);if(m.current){const O=m.current(T);na(O,f.current)||(b(O),f.current=O)}else b(T)}},[r._formValues,r._names,i,n]);Yx(()=>((p.current!==r||!na(v.current,n))&&(p.current=r,v.current=n,j()),r._subscribe({name:n,formState:{values:!0},exact:l,callback:I=>{j(I.values)}})),[r,l,n,j]),Nt.useEffect(()=>r._removeUnmounted());const N=p.current!==r,E=v.current,C=Nt.useMemo(()=>{if(i)return null;const I=!N&&!na(E,n);return N||I?S():null},[i,N,n,E,S]);return C!==null?C:x}function eL(e){const t=Gx(),{name:r,disabled:n,control:s=t.control,shouldUnregister:i,defaultValue:l}=e,u=sA(s._names.array,r),d=Nt.useMemo(()=>tt(s._formValues,r,tt(s._defaultValues,r,l)),[s,r,l]),m=ZF({control:s,name:r,defaultValue:d,exact:!0}),f=QF({control:s,name:r,exact:!0}),p=Nt.useRef(e),v=Nt.useRef(void 0),x=Nt.useRef(s.register(r,{...e.rules,value:m,...li(e.disabled)?{disabled:e.disabled}:{}}));p.current=e;const b=Nt.useMemo(()=>Object.defineProperties({},{invalid:{enumerable:!0,get:()=>!!tt(f.errors,r)},isDirty:{enumerable:!0,get:()=>!!tt(f.dirtyFields,r)},isTouched:{enumerable:!0,get:()=>!!tt(f.touchedFields,r)},isValidating:{enumerable:!0,get:()=>!!tt(f.validatingFields,r)},error:{enumerable:!0,get:()=>tt(f.errors,r)}}),[f,r]),S=Nt.useCallback(C=>x.current.onChange({target:{value:nA(C),name:r},type:qh.CHANGE}),[r]),j=Nt.useCallback(()=>x.current.onBlur({target:{value:tt(s._formValues,r),name:r},type:qh.BLUR}),[r,s._formValues]),N=Nt.useCallback(C=>{const I=tt(s._fields,r);I&&C&&(I._f.ref={focus:()=>C.focus&&C.focus(),select:()=>C.select&&C.select(),setCustomValidity:T=>C.setCustomValidity(T),reportValidity:()=>C.reportValidity()})},[s._fields,r]),E=Nt.useMemo(()=>({name:r,value:m,...li(n)||f.disabled?{disabled:f.disabled||n}:{},onChange:S,onBlur:j,ref:N}),[r,n,f.disabled,S,j,N,m]);return Nt.useEffect(()=>{const C=s._options.shouldUnregister||i,I=v.current;I&&I!==r&&!u&&s.unregister(I),s.register(r,{...p.current.rules,...li(p.current.disabled)?{disabled:p.current.disabled}:{}});const T=(O,V)=>{const F=tt(s._fields,O);F&&F._f&&(F._f.mount=V)};if(T(r,!0),C){const O=Fn(tt(s._options.defaultValues,r,p.current.defaultValue));Dr(s._defaultValues,r,O),fn(tt(s._formValues,r))&&Dr(s._formValues,r,O)}return!u&&s.register(r),v.current=r,()=>{(u?C&&!s._state.action:C)?s.unregister(r):T(r,!1)}},[r,s,u,i]),Nt.useEffect(()=>{s._setDisabledField({disabled:n,name:r})},[n,r,s]),Nt.useMemo(()=>({field:E,formState:f,fieldState:b}),[E,f,b])}const cd=e=>e.render(eL(e));var tL=(e,t,r,n,s)=>t?{...r[e],types:{...r[e]&&r[e].types?r[e].types:{},[n]:s||!0}}:{},xd=e=>Array.isArray(e)?e:[e],xk=()=>{let e=[];return{get observers(){return e},next:s=>{for(const i of e)i.next&&i.next(s)},subscribe:s=>(e.push(s),{unsubscribe:()=>{e=e.filter(i=>i!==s)}}),unsubscribe:()=>{e=[]}}};function oA(e,t){const r={};for(const n in e)if(e.hasOwnProperty(n)){const s=e[n],i=t[n];if(s&&Tn(s)&&i){const l=oA(s,i);Tn(l)&&(r[n]=l)}else e[n]&&(r[n]=i)}return r}var As=e=>Tn(e)&&!Object.keys(e).length,Jx=e=>e.type==="file",sa=e=>typeof e=="function",Hh=e=>{if(!qx)return!1;const t=e?e.ownerDocument:0;return e instanceof(t&&t.defaultView?t.defaultView.HTMLElement:HTMLElement)},lA=e=>e.type==="select-multiple",Xx=e=>e.type==="radio",rL=e=>Xx(e)||Vd(e),_y=e=>Hh(e)&&e.isConnected;function nL(e,t){const r=t.slice(0,-1).length;let n=0;for(;n<r;)e=fn(e)?n++:e[t[n++]];return e}function sL(e){for(const t in e)if(e.hasOwnProperty(t)&&!fn(e[t]))return!1;return!0}function Nn(e,t){const r=Array.isArray(t)?t:Qm(t)?[t]:Kx(t),n=r.length===1?e:nL(e,r),s=r.length-1,i=r[s];return n&&delete n[i],s!==0&&(Tn(n)&&As(n)||Array.isArray(n)&&sL(n))&&Nn(e,r.slice(0,-1)),e}var iL=e=>{for(const t in e)if(sa(e[t]))return!0;return!1};function cA(e){return Array.isArray(e)||Tn(e)&&!iL(e)}function Tv(e,t={}){for(const r in e)cA(e[r])?(t[r]=Array.isArray(e[r])?[]:{},Tv(e[r],t[r])):fn(e[r])||(t[r]=!0);return t}function Mc(e,t,r){r||(r=Tv(t));for(const n in e)cA(e[n])?fn(t)||Pv(r[n])?r[n]=Tv(e[n],Array.isArray(e[n])?[]:{}):Mc(e[n],Hs(t)?{}:t[n],r[n]):r[n]=!na(e[n],t[n]);return r}const wk={value:!1,isValid:!1},bk={value:!0,isValid:!0};var uA=e=>{if(Array.isArray(e)){if(e.length>1){const t=e.filter(r=>r&&r.checked&&!r.disabled).map(r=>r.value);return{value:t,isValid:!!t.length}}return e[0].checked&&!e[0].disabled?e[0].attributes&&!fn(e[0].attributes.value)?fn(e[0].value)||e[0].value===""?bk:{value:e[0].value,isValid:!0}:bk:wk}return wk},dA=(e,{valueAsNumber:t,valueAsDate:r,setValueAs:n})=>fn(e)?e:t?e===""?NaN:e&&+e:r&&ui(e)?new Date(e):n?n(e):e;const jk={isValid:!1,value:null};var fA=e=>Array.isArray(e)?e.reduce((t,r)=>r&&r.checked&&!r.disabled?{isValid:!0,value:r.value}:t,jk):jk;function Sk(e){const t=e.ref;return Jx(t)?t.files:Xx(t)?fA(e.refs).value:lA(t)?[...t.selectedOptions].map(({value:r})=>r):Vd(t)?uA(e.refs).value:dA(fn(t.value)?e.ref.value:t.value,e)}var aL=(e,t,r,n)=>{const s={};for(const i of e){const l=tt(t,i);l&&Dr(s,i,l._f)}return{criteriaMode:r,names:[...e],fields:s,shouldUseNativeValidation:n}},Kh=e=>e instanceof RegExp,Ju=e=>fn(e)?e:Kh(e)?e.source:Tn(e)?Kh(e.value)?e.value.source:e.value:e,kk=e=>({isOnSubmit:!e||e===ra.onSubmit,isOnBlur:e===ra.onBlur,isOnChange:e===ra.onChange,isOnAll:e===ra.all,isOnTouch:e===ra.onTouched});const _k="AsyncFunction";var oL=e=>!!e&&!!e.validate&&!!(sa(e.validate)&&e.validate.constructor.name===_k||Tn(e.validate)&&Object.values(e.validate).find(t=>t.constructor.name===_k)),lL=e=>e.mount&&(e.required||e.min||e.max||e.maxLength||e.minLength||e.pattern||e.validate),Nk=(e,t,r)=>!r&&(t.watchAll||t.watch.has(e)||[...t.watch].some(n=>e.startsWith(n)&&/^\.\w+/.test(e.slice(n.length))));const wd=(e,t,r,n)=>{for(const s of r||Object.keys(e)){const i=tt(e,s);if(i){const{_f:l,...u}=i;if(l){if(l.refs&&l.refs[0]&&t(l.refs[0],s)&&!n)return!0;if(l.ref&&t(l.ref,l.name)&&!n)return!0;if(wd(u,t))break}else if(Tn(u)&&wd(u,t))break}}};function Ck(e,t,r){const n=tt(e,r);if(n||Qm(r))return{error:n,name:r};const s=r.split(".");for(;s.length;){const i=s.join("."),l=tt(t,i),u=tt(e,i);if(l&&!Array.isArray(l)&&r!==i)return{name:r};if(u&&u.type)return{name:i,error:u};if(u&&u.root&&u.root.type)return{name:`${i}.root`,error:u.root};s.pop()}return{name:r}}var cL=(e,t,r,n)=>{r(e);const{name:s,...i}=e;return As(i)||Object.keys(i).length>=Object.keys(t).length||Object.keys(i).find(l=>t[l]===(!n||ra.all))},uL=(e,t,r)=>!e||!t||e===t||xd(e).some(n=>n&&(r?n===t:n.startsWith(t)||t.startsWith(n))),dL=(e,t,r,n,s)=>s.isOnAll?!1:!r&&s.isOnTouch?!(t||e):(r?n.isOnBlur:s.isOnBlur)?!e:(r?n.isOnChange:s.isOnChange)?e:!0,fL=(e,t)=>!Hx(tt(e,t)).length&&Nn(e,t),hL=(e,t,r)=>{const n=xd(tt(e,r));return Dr(n,"root",t[r]),Dr(e,r,n),e};function Ek(e,t,r="validate"){if(ui(e)||Array.isArray(e)&&e.every(ui)||li(e)&&!e)return{type:r,message:ui(e)?e:"",ref:t}}var Pc=e=>Tn(e)&&!Kh(e)?e:{value:e,message:""},Ak=async(e,t,r,n,s,i)=>{const{ref:l,refs:u,required:d,maxLength:m,minLength:f,min:p,max:v,pattern:x,validate:b,name:S,valueAsNumber:j,mount:N}=e._f,E=tt(r,S);if(!N||t.has(S))return{};const C=u?u[0]:l,I=K=>{s&&C.reportValidity&&(C.setCustomValidity(li(K)?"":K||""),C.reportValidity())},T={},O=Xx(l),V=Vd(l),F=O||V,L=(j||Jx(l))&&fn(l.value)&&fn(E)||Hh(l)&&l.value===""||E===""||Array.isArray(E)&&!E.length,H=tL.bind(null,S,n,T),le=(K,ie,q,G=Va.maxLength,ve=Va.minLength)=>{const M=K?ie:q;T[S]={type:K?G:ve,message:M,ref:l,...H(K?G:ve,M)}};if(i?!Array.isArray(E)||!E.length:d&&(!F&&(L||Hs(E))||li(E)&&!E||V&&!uA(u).isValid||O&&!fA(u).isValid)){const{value:K,message:ie}=ui(d)?{value:!!d,message:d}:Pc(d);if(K&&(T[S]={type:Va.required,message:ie,ref:C,...H(Va.required,ie)},!n))return I(ie),T}if(!L&&(!Hs(p)||!Hs(v))){let K,ie;const q=Pc(v),G=Pc(p);if(!Hs(E)&&!isNaN(E)){const ve=l.valueAsNumber||E&&+E;Hs(q.value)||(K=ve>q.value),Hs(G.value)||(ie=ve<G.value)}else{const ve=l.valueAsDate||new Date(E),M=he=>new Date(new Date().toDateString()+" "+he),Y=l.type=="time",ce=l.type=="week";ui(q.value)&&E&&(K=Y?M(E)>M(q.value):ce?E>q.value:ve>new Date(q.value)),ui(G.value)&&E&&(ie=Y?M(E)<M(G.value):ce?E<G.value:ve<new Date(G.value))}if((K||ie)&&(le(!!K,q.message,G.message,Va.max,Va.min),!n))return I(T[S].message),T}if((m||f)&&!L&&(ui(E)||i&&Array.isArray(E))){const K=Pc(m),ie=Pc(f),q=!Hs(K.value)&&E.length>+K.value,G=!Hs(ie.value)&&E.length<+ie.value;if((q||G)&&(le(q,K.message,ie.message),!n))return I(T[S].message),T}if(x&&!L&&ui(E)){const{value:K,message:ie}=Pc(x);if(Kh(K)&&!E.match(K)&&(T[S]={type:Va.pattern,message:ie,ref:l,...H(Va.pattern,ie)},!n))return I(ie),T}if(b){if(sa(b)){const K=await b(E,r),ie=Ek(K,C);if(ie&&(T[S]={...ie,...H(Va.validate,ie.message)},!n))return I(ie.message),T}else if(Tn(b)){let K={};for(const ie in b){if(!As(K)&&!n)break;const q=Ek(await b[ie](E,r),C,ie);q&&(K={...q,...H(ie,q.message)},I(q.message),n&&(T[S]=K))}if(!As(K)&&(T[S]={ref:C,...K},!n))return T}}return I(!0),T};const mL={mode:ra.onSubmit,reValidateMode:ra.onChange,shouldFocusError:!0};function pL(e={}){let t={...mL,...e},r={submitCount:0,isDirty:!1,isReady:!1,isLoading:sa(t.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},validatingFields:{},errors:t.errors||{},disabled:t.disabled||!1},n={},s=Tn(t.defaultValues)||Tn(t.values)?Fn(t.defaultValues||t.values)||{}:{},i=t.shouldUnregister?{}:Fn(s),l={action:!1,mount:!1,watch:!1},u={mount:new Set,disabled:new Set,unMount:new Set,array:new Set,watch:new Set},d,m=0;const f={isDirty:!1,dirtyFields:!1,validatingFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1};let p={...f};const v={array:xk(),state:xk()},x=t.criteriaMode===ra.all,b=z=>W=>{clearTimeout(m),m=setTimeout(z,W)},S=async z=>{if(!t.disabled&&(f.isValid||p.isValid||z)){const W=t.resolver?As((await V()).errors):await L(n,!0);W!==r.isValid&&v.state.next({isValid:W})}},j=(z,W)=>{!t.disabled&&(f.isValidating||f.validatingFields||p.isValidating||p.validatingFields)&&((z||Array.from(u.mount)).forEach(ee=>{ee&&(W?Dr(r.validatingFields,ee,W):Nn(r.validatingFields,ee))}),v.state.next({validatingFields:r.validatingFields,isValidating:!As(r.validatingFields)}))},N=(z,W=[],ee,Se,Ne=!0,Ee=!0)=>{if(Se&&ee&&!t.disabled){if(l.action=!0,Ee&&Array.isArray(tt(n,z))){const qe=ee(tt(n,z),Se.argA,Se.argB);Ne&&Dr(n,z,qe)}if(Ee&&Array.isArray(tt(r.errors,z))){const qe=ee(tt(r.errors,z),Se.argA,Se.argB);Ne&&Dr(r.errors,z,qe),fL(r.errors,z)}if((f.touchedFields||p.touchedFields)&&Ee&&Array.isArray(tt(r.touchedFields,z))){const qe=ee(tt(r.touchedFields,z),Se.argA,Se.argB);Ne&&Dr(r.touchedFields,z,qe)}(f.dirtyFields||p.dirtyFields)&&(r.dirtyFields=Mc(s,i)),v.state.next({name:z,isDirty:le(z,W),dirtyFields:r.dirtyFields,errors:r.errors,isValid:r.isValid})}else Dr(i,z,W)},E=(z,W)=>{Dr(r.errors,z,W),v.state.next({errors:r.errors})},C=z=>{r.errors=z,v.state.next({errors:r.errors,isValid:!1})},I=(z,W,ee,Se)=>{const Ne=tt(n,z);if(Ne){const Ee=tt(i,z,fn(ee)?tt(s,z):ee);fn(Ee)||Se&&Se.defaultChecked||W?Dr(i,z,W?Ee:Sk(Ne._f)):q(z,Ee),l.mount&&S()}},T=(z,W,ee,Se,Ne)=>{let Ee=!1,qe=!1;const Fe={name:z};if(!t.disabled){if(!ee||Se){(f.isDirty||p.isDirty)&&(qe=r.isDirty,r.isDirty=Fe.isDirty=le(),Ee=qe!==Fe.isDirty);const Mt=na(tt(s,z),W);qe=!!tt(r.dirtyFields,z),Mt?Nn(r.dirtyFields,z):Dr(r.dirtyFields,z,!0),Fe.dirtyFields=r.dirtyFields,Ee=Ee||(f.dirtyFields||p.dirtyFields)&&qe!==!Mt}if(ee){const Mt=tt(r.touchedFields,z);Mt||(Dr(r.touchedFields,z,ee),Fe.touchedFields=r.touchedFields,Ee=Ee||(f.touchedFields||p.touchedFields)&&Mt!==ee)}Ee&&Ne&&v.state.next(Fe)}return Ee?Fe:{}},O=(z,W,ee,Se)=>{const Ne=tt(r.errors,z),Ee=(f.isValid||p.isValid)&&li(W)&&r.isValid!==W;if(t.delayError&&ee?(d=b(()=>E(z,ee)),d(t.delayError)):(clearTimeout(m),d=null,ee?Dr(r.errors,z,ee):Nn(r.errors,z)),(ee?!na(Ne,ee):Ne)||!As(Se)||Ee){const qe={...Se,...Ee&&li(W)?{isValid:W}:{},errors:r.errors,name:z};r={...r,...qe},v.state.next(qe)}},V=async z=>{j(z,!0);const W=await t.resolver(i,t.context,aL(z||u.mount,n,t.criteriaMode,t.shouldUseNativeValidation));return j(z),W},F=async z=>{const{errors:W}=await V(z);if(z)for(const ee of z){const Se=tt(W,ee);Se?Dr(r.errors,ee,Se):Nn(r.errors,ee)}else r.errors=W;return W},L=async(z,W,ee={valid:!0})=>{for(const Se in z){const Ne=z[Se];if(Ne){const{_f:Ee,...qe}=Ne;if(Ee){const Fe=u.array.has(Ee.name),Mt=Ne._f&&oL(Ne._f);Mt&&f.validatingFields&&j([Ee.name],!0);const We=await Ak(Ne,u.disabled,i,x,t.shouldUseNativeValidation&&!W,Fe);if(Mt&&f.validatingFields&&j([Ee.name]),We[Ee.name]&&(ee.valid=!1,W))break;!W&&(tt(We,Ee.name)?Fe?hL(r.errors,We,Ee.name):Dr(r.errors,Ee.name,We[Ee.name]):Nn(r.errors,Ee.name))}!As(qe)&&await L(qe,W,ee)}}return ee.valid},H=()=>{for(const z of u.unMount){const W=tt(n,z);W&&(W._f.refs?W._f.refs.every(ee=>!_y(ee)):!_y(W._f.ref))&&Te(z)}u.unMount=new Set},le=(z,W)=>!t.disabled&&(z&&W&&Dr(i,z,W),!na(he(),s)),K=(z,W,ee)=>Av(z,u,{...l.mount?i:fn(W)?s:ui(z)?{[z]:W}:W},ee,W),ie=z=>Hx(tt(l.mount?i:s,z,t.shouldUnregister?tt(s,z,[]):[])),q=(z,W,ee={})=>{const Se=tt(n,z);let Ne=W;if(Se){const Ee=Se._f;Ee&&(!Ee.disabled&&Dr(i,z,dA(W,Ee)),Ne=Hh(Ee.ref)&&Hs(W)?"":W,lA(Ee.ref)?[...Ee.ref.options].forEach(qe=>qe.selected=Ne.includes(qe.value)):Ee.refs?Vd(Ee.ref)?Ee.refs.forEach(qe=>{(!qe.defaultChecked||!qe.disabled)&&(Array.isArray(Ne)?qe.checked=!!Ne.find(Fe=>Fe===qe.value):qe.checked=Ne===qe.value||!!Ne)}):Ee.refs.forEach(qe=>qe.checked=qe.value===Ne):Jx(Ee.ref)?Ee.ref.value="":(Ee.ref.value=Ne,Ee.ref.type||v.state.next({name:z,values:Fn(i)})))}(ee.shouldDirty||ee.shouldTouch)&&T(z,Ne,ee.shouldTouch,ee.shouldDirty,!0),ee.shouldValidate&&ce(z)},G=(z,W,ee)=>{for(const Se in W){if(!W.hasOwnProperty(Se))return;const Ne=W[Se],Ee=z+"."+Se,qe=tt(n,Ee);(u.array.has(z)||Tn(Ne)||qe&&!qe._f)&&!Nl(Ne)?G(Ee,Ne,ee):q(Ee,Ne,ee)}},ve=(z,W,ee={})=>{const Se=tt(n,z),Ne=u.array.has(z),Ee=Fn(W);Dr(i,z,Ee),Ne?(v.array.next({name:z,values:Fn(i)}),(f.isDirty||f.dirtyFields||p.isDirty||p.dirtyFields)&&ee.shouldDirty&&v.state.next({name:z,dirtyFields:Mc(s,i),isDirty:le(z,Ee)})):Se&&!Se._f&&!Hs(Ee)?G(z,Ee,ee):q(z,Ee,ee),Nk(z,u)&&v.state.next({...r,name:z}),v.state.next({name:l.mount?z:void 0,values:Fn(i)})},M=async z=>{l.mount=!0;const W=z.target;let ee=W.name,Se=!0;const Ne=tt(n,ee),Ee=Mt=>{Se=Number.isNaN(Mt)||Nl(Mt)&&isNaN(Mt.getTime())||na(Mt,tt(i,ee,Mt))},qe=kk(t.mode),Fe=kk(t.reValidateMode);if(Ne){let Mt,We;const yt=W.type?Sk(Ne._f):nA(z),kt=z.type===qh.BLUR||z.type===qh.FOCUS_OUT,ze=!lL(Ne._f)&&!t.resolver&&!tt(r.errors,ee)&&!Ne._f.deps||dL(kt,tt(r.touchedFields,ee),r.isSubmitted,Fe,qe),Le=Nk(ee,u,kt);Dr(i,ee,yt),kt?(!W||!W.readOnly)&&(Ne._f.onBlur&&Ne._f.onBlur(z),d&&d(0)):Ne._f.onChange&&Ne._f.onChange(z);const ct=T(ee,yt,kt),at=!As(ct)||Le;if(!kt&&v.state.next({name:ee,type:z.type,values:Fn(i)}),ze)return(f.isValid||p.isValid)&&(t.mode==="onBlur"?kt&&S():kt||S()),at&&v.state.next({name:ee,...Le?{}:ct});if(!kt&&Le&&v.state.next({...r}),t.resolver){const{errors:Je}=await V([ee]);if(Ee(yt),Se){const Ct=Ck(r.errors,n,ee),Wt=Ck(Je,n,Ct.name||ee);Mt=Wt.error,ee=Wt.name,We=As(Je)}}else j([ee],!0),Mt=(await Ak(Ne,u.disabled,i,x,t.shouldUseNativeValidation))[ee],j([ee]),Ee(yt),Se&&(Mt?We=!1:(f.isValid||p.isValid)&&(We=await L(n,!0)));Se&&(Ne._f.deps&&(!Array.isArray(Ne._f.deps)||Ne._f.deps.length>0)&&ce(Ne._f.deps),O(ee,We,Mt,ct))}},Y=(z,W)=>{if(tt(r.errors,W)&&z.focus)return z.focus(),1},ce=async(z,W={})=>{let ee,Se;const Ne=xd(z);if(t.resolver){const Ee=await F(fn(z)?z:Ne);ee=As(Ee),Se=z?!Ne.some(qe=>tt(Ee,qe)):ee}else z?(Se=(await Promise.all(Ne.map(async Ee=>{const qe=tt(n,Ee);return await L(qe&&qe._f?{[Ee]:qe}:qe)}))).every(Boolean),!(!Se&&!r.isValid)&&S()):Se=ee=await L(n);return v.state.next({...!ui(z)||(f.isValid||p.isValid)&&ee!==r.isValid?{}:{name:z},...t.resolver||!z?{isValid:ee}:{},errors:r.errors}),W.shouldFocus&&!Se&&wd(n,Y,z?Ne:u.mount),Se},he=(z,W)=>{let ee={...l.mount?i:s};return W&&(ee=oA(W.dirtyFields?r.dirtyFields:r.touchedFields,ee)),fn(z)?ee:ui(z)?tt(ee,z):z.map(Se=>tt(ee,Se))},U=(z,W)=>({invalid:!!tt((W||r).errors,z),isDirty:!!tt((W||r).dirtyFields,z),error:tt((W||r).errors,z),isValidating:!!tt(r.validatingFields,z),isTouched:!!tt((W||r).touchedFields,z)}),re=z=>{z&&xd(z).forEach(W=>Nn(r.errors,W)),v.state.next({errors:z?r.errors:{}})},pe=(z,W,ee)=>{const Se=(tt(n,z,{_f:{}})._f||{}).ref,Ne=tt(r.errors,z)||{},{ref:Ee,message:qe,type:Fe,...Mt}=Ne;Dr(r.errors,z,{...Mt,...W,ref:Se}),v.state.next({name:z,errors:r.errors,isValid:!1}),ee&&ee.shouldFocus&&Se&&Se.focus&&Se.focus()},$e=(z,W)=>sa(z)?v.state.subscribe({next:ee=>"values"in ee&&z(K(void 0,W),ee)}):K(z,W,!0),de=z=>v.state.subscribe({next:W=>{uL(z.name,W.name,z.exact)&&cL(W,z.formState||f,gt,z.reRenderRoot)&&z.callback({values:{...i},...r,...W,defaultValues:s})}}).unsubscribe,ke=z=>(l.mount=!0,p={...p,...z.formState},de({...z,formState:p})),Te=(z,W={})=>{for(const ee of z?xd(z):u.mount)u.mount.delete(ee),u.array.delete(ee),W.keepValue||(Nn(n,ee),Nn(i,ee)),!W.keepError&&Nn(r.errors,ee),!W.keepDirty&&Nn(r.dirtyFields,ee),!W.keepTouched&&Nn(r.touchedFields,ee),!W.keepIsValidating&&Nn(r.validatingFields,ee),!t.shouldUnregister&&!W.keepDefaultValue&&Nn(s,ee);v.state.next({values:Fn(i)}),v.state.next({...r,...W.keepDirty?{isDirty:le()}:{}}),!W.keepIsValid&&S()},Ve=({disabled:z,name:W})=>{(li(z)&&l.mount||z||u.disabled.has(W))&&(z?u.disabled.add(W):u.disabled.delete(W))},J=(z,W={})=>{let ee=tt(n,z);const Se=li(W.disabled)||li(t.disabled);return Dr(n,z,{...ee||{},_f:{...ee&&ee._f?ee._f:{ref:{name:z}},name:z,mount:!0,...W}}),u.mount.add(z),ee?Ve({disabled:li(W.disabled)?W.disabled:t.disabled,name:z}):I(z,!0,W.value),{...Se?{disabled:W.disabled||t.disabled}:{},...t.progressive?{required:!!W.required,min:Ju(W.min),max:Ju(W.max),minLength:Ju(W.minLength),maxLength:Ju(W.maxLength),pattern:Ju(W.pattern)}:{},name:z,onChange:M,onBlur:M,ref:Ne=>{if(Ne){J(z,W),ee=tt(n,z);const Ee=fn(Ne.value)&&Ne.querySelectorAll&&Ne.querySelectorAll("input,select,textarea")[0]||Ne,qe=rL(Ee),Fe=ee._f.refs||[];if(qe?Fe.find(Mt=>Mt===Ee):Ee===ee._f.ref)return;Dr(n,z,{_f:{...ee._f,...qe?{refs:[...Fe.filter(_y),Ee,...Array.isArray(tt(s,z))?[{}]:[]],ref:{type:Ee.type,name:z}}:{ref:Ee}}}),I(z,!1,void 0,Ee)}else ee=tt(n,z,{}),ee._f&&(ee._f.mount=!1),(t.shouldUnregister||W.shouldUnregister)&&!(sA(u.array,z)&&l.action)&&u.unMount.add(z)}}},je=()=>t.shouldFocusError&&wd(n,Y,u.mount),fe=z=>{li(z)&&(v.state.next({disabled:z}),wd(n,(W,ee)=>{const Se=tt(n,ee);Se&&(W.disabled=Se._f.disabled||z,Array.isArray(Se._f.refs)&&Se._f.refs.forEach(Ne=>{Ne.disabled=Se._f.disabled||z}))},0,!1))},se=(z,W)=>async ee=>{let Se;ee&&(ee.preventDefault&&ee.preventDefault(),ee.persist&&ee.persist());let Ne=Fn(i);if(v.state.next({isSubmitting:!0}),t.resolver){const{errors:Ee,values:qe}=await V();r.errors=Ee,Ne=Fn(qe)}else await L(n);if(u.disabled.size)for(const Ee of u.disabled)Nn(Ne,Ee);if(Nn(r.errors,"root"),As(r.errors)){v.state.next({errors:{}});try{await z(Ne,ee)}catch(Ee){Se=Ee}}else W&&await W({...r.errors},ee),je(),setTimeout(je);if(v.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:As(r.errors)&&!Se,submitCount:r.submitCount+1,errors:r.errors}),Se)throw Se},Ze=(z,W={})=>{tt(n,z)&&(fn(W.defaultValue)?ve(z,Fn(tt(s,z))):(ve(z,W.defaultValue),Dr(s,z,Fn(W.defaultValue))),W.keepTouched||Nn(r.touchedFields,z),W.keepDirty||(Nn(r.dirtyFields,z),r.isDirty=W.defaultValue?le(z,Fn(tt(s,z))):le()),W.keepError||(Nn(r.errors,z),f.isValid&&S()),v.state.next({...r}))},Ge=(z,W={})=>{const ee=z?Fn(z):s,Se=Fn(ee),Ne=As(z),Ee=Ne?s:Se;if(W.keepDefaultValues||(s=ee),!W.keepValues){if(W.keepDirtyValues){const qe=new Set([...u.mount,...Object.keys(Mc(s,i))]);for(const Fe of Array.from(qe))tt(r.dirtyFields,Fe)?Dr(Ee,Fe,tt(i,Fe)):ve(Fe,tt(Ee,Fe))}else{if(qx&&fn(z))for(const qe of u.mount){const Fe=tt(n,qe);if(Fe&&Fe._f){const Mt=Array.isArray(Fe._f.refs)?Fe._f.refs[0]:Fe._f.ref;if(Hh(Mt)){const We=Mt.closest("form");if(We){We.reset();break}}}}if(W.keepFieldsRef)for(const qe of u.mount)ve(qe,tt(Ee,qe));else n={}}i=t.shouldUnregister?W.keepDefaultValues?Fn(s):{}:Fn(Ee),v.array.next({values:{...Ee}}),v.state.next({values:{...Ee}})}u={mount:W.keepDirtyValues?u.mount:new Set,unMount:new Set,array:new Set,disabled:new Set,watch:new Set,watchAll:!1,focus:""},l.mount=!f.isValid||!!W.keepIsValid||!!W.keepDirtyValues||!t.shouldUnregister&&!As(Ee),l.watch=!!t.shouldUnregister,v.state.next({submitCount:W.keepSubmitCount?r.submitCount:0,isDirty:Ne?!1:W.keepDirty?r.isDirty:!!(W.keepDefaultValues&&!na(z,s)),isSubmitted:W.keepIsSubmitted?r.isSubmitted:!1,dirtyFields:Ne?{}:W.keepDirtyValues?W.keepDefaultValues&&i?Mc(s,i):r.dirtyFields:W.keepDefaultValues&&z?Mc(s,z):W.keepDirty?r.dirtyFields:{},touchedFields:W.keepTouched?r.touchedFields:{},errors:W.keepErrors?r.errors:{},isSubmitSuccessful:W.keepIsSubmitSuccessful?r.isSubmitSuccessful:!1,isSubmitting:!1,defaultValues:s})},Ue=(z,W)=>Ge(sa(z)?z(i):z,W),At=(z,W={})=>{const ee=tt(n,z),Se=ee&&ee._f;if(Se){const Ne=Se.refs?Se.refs[0]:Se.ref;Ne.focus&&(Ne.focus(),W.shouldSelect&&sa(Ne.select)&&Ne.select())}},gt=z=>{r={...r,...z}},Yt={control:{register:J,unregister:Te,getFieldState:U,handleSubmit:se,setError:pe,_subscribe:de,_runSchema:V,_focusError:je,_getWatch:K,_getDirty:le,_setValid:S,_setFieldArray:N,_setDisabledField:Ve,_setErrors:C,_getFieldArray:ie,_reset:Ge,_resetDefaultValues:()=>sa(t.defaultValues)&&t.defaultValues().then(z=>{Ue(z,t.resetOptions),v.state.next({isLoading:!1})}),_removeUnmounted:H,_disableForm:fe,_subjects:v,_proxyFormState:f,get _fields(){return n},get _formValues(){return i},get _state(){return l},set _state(z){l=z},get _defaultValues(){return s},get _names(){return u},set _names(z){u=z},get _formState(){return r},get _options(){return t},set _options(z){t={...t,...z}}},subscribe:ke,trigger:ce,register:J,handleSubmit:se,watch:$e,setValue:ve,getValues:he,reset:Ue,resetField:Ze,clearErrors:re,unregister:Te,setError:pe,setFocus:At,getFieldState:U};return{...Yt,formControl:Yt}}function Cd(e={}){const t=Nt.useRef(void 0),r=Nt.useRef(void 0),[n,s]=Nt.useState({isDirty:!1,isValidating:!1,isLoading:sa(e.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},validatingFields:{},errors:e.errors||{},disabled:e.disabled||!1,isReady:!1,defaultValues:sa(e.defaultValues)?void 0:e.defaultValues});if(!t.current)if(e.formControl)t.current={...e.formControl,formState:n},e.defaultValues&&!sa(e.defaultValues)&&e.formControl.reset(e.defaultValues,e.resetOptions);else{const{formControl:l,...u}=pL(e);t.current={...u,formState:n}}const i=t.current.control;return i._options=e,Yx(()=>{const l=i._subscribe({formState:i._proxyFormState,callback:()=>s({...i._formState}),reRenderRoot:!0});return s(u=>({...u,isReady:!0})),i._formState.isReady=!0,l},[i]),Nt.useEffect(()=>i._disableForm(e.disabled),[i,e.disabled]),Nt.useEffect(()=>{e.mode&&(i._options.mode=e.mode),e.reValidateMode&&(i._options.reValidateMode=e.reValidateMode)},[i,e.mode,e.reValidateMode]),Nt.useEffect(()=>{e.errors&&(i._setErrors(e.errors),i._focusError())},[i,e.errors]),Nt.useEffect(()=>{e.shouldUnregister&&i._subjects.state.next({values:i._getWatch()})},[i,e.shouldUnregister]),Nt.useEffect(()=>{if(i._proxyFormState.isDirty){const l=i._getDirty();l!==n.isDirty&&i._subjects.state.next({isDirty:l})}},[i,n.isDirty]),Nt.useEffect(()=>{e.values&&!na(e.values,r.current)?(i._reset(e.values,{keepFieldsRef:!0,...i._options.resetOptions}),r.current=e.values,s(l=>({...l}))):i._resetDefaultValues()},[i,e.values]),Nt.useEffect(()=>{i._state.mount||(i._setValid(),i._state.mount=!0),i._state.watch&&(i._state.watch=!1,i._subjects.state.next({...i._formState})),i._removeUnmounted()}),t.current.formState=aA(n,i),t.current}function hA(e){var t,r,n="";if(typeof e=="string"||typeof e=="number")n+=e;else if(typeof e=="object")if(Array.isArray(e)){var s=e.length;for(t=0;t<s;t++)e[t]&&(r=hA(e[t]))&&(n&&(n+=" "),n+=r)}else for(r in e)e[r]&&(n&&(n+=" "),n+=r);return n}function qr(){for(var e,t,r=0,n="",s=arguments.length;r<s;r++)(e=arguments[r])&&(t=hA(e))&&(n&&(n+=" "),n+=t);return n}var gL=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"];function Qx(e){if(typeof e!="string")return!1;var t=gL;return t.includes(e)}var yL=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"];function mA(e){if(typeof e!="string")return!1;var t=yL;return t.includes(e)}function pA(e){return typeof e=="string"&&e.startsWith("data-")}function Go(e){var t=Object.entries(e).filter(r=>{var[n]=r;return mA(n)||pA(n)});return Object.fromEntries(t)}function Zx(e){if(e==null)return null;if(y.isValidElement(e)&&typeof e.props=="object"&&e.props!==null){var t=e.props;return Go(t)}return typeof e=="object"&&!Array.isArray(e)?Go(e):null}function Ii(e){var t=Object.entries(e).filter(r=>{var[n]=r;return mA(n)||pA(n)||Qx(n)});return Object.fromEntries(t)}var vL=["children","width","height","viewBox","className","style","title","desc"];function Ov(){return Ov=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Ov.apply(null,arguments)}function xL(e,t){if(e==null)return{};var r,n,s=wL(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function wL(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var gA=y.forwardRef((e,t)=>{var{children:r,width:n,height:s,viewBox:i,className:l,style:u,title:d,desc:m}=e,f=xL(e,vL),p=i||{width:n,height:s,x:0,y:0},v=qr("recharts-surface",l);return y.createElement("svg",Ov({},Ii(f),{className:v,width:n,height:s,style:u,viewBox:"".concat(p.x," ").concat(p.y," ").concat(p.width," ").concat(p.height),ref:t}),y.createElement("title",null,d),y.createElement("desc",null,m),r)}),bL=["children","className"];function Iv(){return Iv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Iv.apply(null,arguments)}function jL(e,t){if(e==null)return{};var r,n,s=SL(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function SL(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var ro=y.forwardRef((e,t)=>{var{children:r,className:n}=e,s=jL(e,bL),i=qr("recharts-layer",n);return y.createElement("g",Iv({className:i},Ii(s),{ref:t}),r)}),kL=y.createContext(null);function $r(e){return function(){return e}}const yA=Math.cos,Gh=Math.sin,fa=Math.sqrt,Yh=Math.PI,Zm=2*Yh,Dv=Math.PI,$v=2*Dv,vl=1e-6,_L=$v-vl;function vA(e){this._+=e[0];for(let t=1,r=e.length;t<r;++t)this._+=arguments[t]+e[t]}function NL(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return vA;const r=10**t;return function(n){this._+=n[0];for(let s=1,i=n.length;s<i;++s)this._+=Math.round(arguments[s]*r)/r+n[s]}}class CL{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?vA:NL(t)}moveTo(t,r){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+r}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,r){this._append`L${this._x1=+t},${this._y1=+r}`}quadraticCurveTo(t,r,n,s){this._append`Q${+t},${+r},${this._x1=+n},${this._y1=+s}`}bezierCurveTo(t,r,n,s,i,l){this._append`C${+t},${+r},${+n},${+s},${this._x1=+i},${this._y1=+l}`}arcTo(t,r,n,s,i){if(t=+t,r=+r,n=+n,s=+s,i=+i,i<0)throw new Error(`negative radius: ${i}`);let l=this._x1,u=this._y1,d=n-t,m=s-r,f=l-t,p=u-r,v=f*f+p*p;if(this._x1===null)this._append`M${this._x1=t},${this._y1=r}`;else if(v>vl)if(!(Math.abs(p*d-m*f)>vl)||!i)this._append`L${this._x1=t},${this._y1=r}`;else{let x=n-l,b=s-u,S=d*d+m*m,j=x*x+b*b,N=Math.sqrt(S),E=Math.sqrt(v),C=i*Math.tan((Dv-Math.acos((S+v-j)/(2*N*E)))/2),I=C/E,T=C/N;Math.abs(I-1)>vl&&this._append`L${t+I*f},${r+I*p}`,this._append`A${i},${i},0,0,${+(p*x>f*b)},${this._x1=t+T*d},${this._y1=r+T*m}`}}arc(t,r,n,s,i,l){if(t=+t,r=+r,n=+n,l=!!l,n<0)throw new Error(`negative radius: ${n}`);let u=n*Math.cos(s),d=n*Math.sin(s),m=t+u,f=r+d,p=1^l,v=l?s-i:i-s;this._x1===null?this._append`M${m},${f}`:(Math.abs(this._x1-m)>vl||Math.abs(this._y1-f)>vl)&&this._append`L${m},${f}`,n&&(v<0&&(v=v%$v+$v),v>_L?this._append`A${n},${n},0,1,${p},${t-u},${r-d}A${n},${n},0,1,${p},${this._x1=m},${this._y1=f}`:v>vl&&this._append`A${n},${n},0,${+(v>=Dv)},${p},${this._x1=t+n*Math.cos(i)},${this._y1=r+n*Math.sin(i)}`)}rect(t,r,n,s){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+r}h${n=+n}v${+s}h${-n}Z`}toString(){return this._}}function ew(e){let t=3;return e.digits=function(r){if(!arguments.length)return t;if(r==null)t=null;else{const n=Math.floor(r);if(!(n>=0))throw new RangeError(`invalid digits: ${r}`);t=n}return e},()=>new CL(t)}function tw(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function xA(e){this._context=e}xA.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function ep(e){return new xA(e)}function wA(e){return e[0]}function bA(e){return e[1]}function jA(e,t){var r=$r(!0),n=null,s=ep,i=null,l=ew(u);e=typeof e=="function"?e:e===void 0?wA:$r(e),t=typeof t=="function"?t:t===void 0?bA:$r(t);function u(d){var m,f=(d=tw(d)).length,p,v=!1,x;for(n==null&&(i=s(x=l())),m=0;m<=f;++m)!(m<f&&r(p=d[m],m,d))===v&&((v=!v)?i.lineStart():i.lineEnd()),v&&i.point(+e(p,m,d),+t(p,m,d));if(x)return i=null,x+""||null}return u.x=function(d){return arguments.length?(e=typeof d=="function"?d:$r(+d),u):e},u.y=function(d){return arguments.length?(t=typeof d=="function"?d:$r(+d),u):t},u.defined=function(d){return arguments.length?(r=typeof d=="function"?d:$r(!!d),u):r},u.curve=function(d){return arguments.length?(s=d,n!=null&&(i=s(n)),u):s},u.context=function(d){return arguments.length?(d==null?n=i=null:i=s(n=d),u):n},u}function oh(e,t,r){var n=null,s=$r(!0),i=null,l=ep,u=null,d=ew(m);e=typeof e=="function"?e:e===void 0?wA:$r(+e),t=typeof t=="function"?t:$r(t===void 0?0:+t),r=typeof r=="function"?r:r===void 0?bA:$r(+r);function m(p){var v,x,b,S=(p=tw(p)).length,j,N=!1,E,C=new Array(S),I=new Array(S);for(i==null&&(u=l(E=d())),v=0;v<=S;++v){if(!(v<S&&s(j=p[v],v,p))===N)if(N=!N)x=v,u.areaStart(),u.lineStart();else{for(u.lineEnd(),u.lineStart(),b=v-1;b>=x;--b)u.point(C[b],I[b]);u.lineEnd(),u.areaEnd()}N&&(C[v]=+e(j,v,p),I[v]=+t(j,v,p),u.point(n?+n(j,v,p):C[v],r?+r(j,v,p):I[v]))}if(E)return u=null,E+""||null}function f(){return jA().defined(s).curve(l).context(i)}return m.x=function(p){return arguments.length?(e=typeof p=="function"?p:$r(+p),n=null,m):e},m.x0=function(p){return arguments.length?(e=typeof p=="function"?p:$r(+p),m):e},m.x1=function(p){return arguments.length?(n=p==null?null:typeof p=="function"?p:$r(+p),m):n},m.y=function(p){return arguments.length?(t=typeof p=="function"?p:$r(+p),r=null,m):t},m.y0=function(p){return arguments.length?(t=typeof p=="function"?p:$r(+p),m):t},m.y1=function(p){return arguments.length?(r=p==null?null:typeof p=="function"?p:$r(+p),m):r},m.lineX0=m.lineY0=function(){return f().x(e).y(t)},m.lineY1=function(){return f().x(e).y(r)},m.lineX1=function(){return f().x(n).y(t)},m.defined=function(p){return arguments.length?(s=typeof p=="function"?p:$r(!!p),m):s},m.curve=function(p){return arguments.length?(l=p,i!=null&&(u=l(i)),m):l},m.context=function(p){return arguments.length?(p==null?i=u=null:u=l(i=p),m):i},m}class SA{constructor(t,r){this._context=t,this._x=r}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(t,r){switch(t=+t,r=+r,this._point){case 0:{this._point=1,this._line?this._context.lineTo(t,r):this._context.moveTo(t,r);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+t)/2,this._y0,this._x0,r,t,r):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+r)/2,t,this._y0,t,r);break}}this._x0=t,this._y0=r}}function EL(e){return new SA(e,!0)}function AL(e){return new SA(e,!1)}const rw={draw(e,t){const r=fa(t/Yh);e.moveTo(r,0),e.arc(0,0,r,0,Zm)}},PL={draw(e,t){const r=fa(t/5)/2;e.moveTo(-3*r,-r),e.lineTo(-r,-r),e.lineTo(-r,-3*r),e.lineTo(r,-3*r),e.lineTo(r,-r),e.lineTo(3*r,-r),e.lineTo(3*r,r),e.lineTo(r,r),e.lineTo(r,3*r),e.lineTo(-r,3*r),e.lineTo(-r,r),e.lineTo(-3*r,r),e.closePath()}},kA=fa(1/3),TL=kA*2,OL={draw(e,t){const r=fa(t/TL),n=r*kA;e.moveTo(0,-r),e.lineTo(n,0),e.lineTo(0,r),e.lineTo(-n,0),e.closePath()}},IL={draw(e,t){const r=fa(t),n=-r/2;e.rect(n,n,r,r)}},DL=.8908130915292852,_A=Gh(Yh/10)/Gh(7*Yh/10),$L=Gh(Zm/10)*_A,RL=-yA(Zm/10)*_A,ML={draw(e,t){const r=fa(t*DL),n=$L*r,s=RL*r;e.moveTo(0,-r),e.lineTo(n,s);for(let i=1;i<5;++i){const l=Zm*i/5,u=yA(l),d=Gh(l);e.lineTo(d*r,-u*r),e.lineTo(u*n-d*s,d*n+u*s)}e.closePath()}},Ny=fa(3),FL={draw(e,t){const r=-fa(t/(Ny*3));e.moveTo(0,r*2),e.lineTo(-Ny*r,-r),e.lineTo(Ny*r,-r),e.closePath()}},Ei=-.5,Ai=fa(3)/2,Rv=1/fa(12),LL=(Rv/2+1)*3,zL={draw(e,t){const r=fa(t/LL),n=r/2,s=r*Rv,i=n,l=r*Rv+r,u=-i,d=l;e.moveTo(n,s),e.lineTo(i,l),e.lineTo(u,d),e.lineTo(Ei*n-Ai*s,Ai*n+Ei*s),e.lineTo(Ei*i-Ai*l,Ai*i+Ei*l),e.lineTo(Ei*u-Ai*d,Ai*u+Ei*d),e.lineTo(Ei*n+Ai*s,Ei*s-Ai*n),e.lineTo(Ei*i+Ai*l,Ei*l-Ai*i),e.lineTo(Ei*u+Ai*d,Ei*d-Ai*u),e.closePath()}};function UL(e,t){let r=null,n=ew(s);e=typeof e=="function"?e:$r(e||rw),t=typeof t=="function"?t:$r(t===void 0?64:+t);function s(){let i;if(r||(r=i=n()),e.apply(this,arguments).draw(r,+t.apply(this,arguments)),i)return r=null,i+""||null}return s.type=function(i){return arguments.length?(e=typeof i=="function"?i:$r(i),s):e},s.size=function(i){return arguments.length?(t=typeof i=="function"?i:$r(+i),s):t},s.context=function(i){return arguments.length?(r=i??null,s):r},s}function Jh(){}function Xh(e,t,r){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+r)/6)}function NA(e){this._context=e}NA.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:Xh(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:Xh(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function BL(e){return new NA(e)}function CA(e){this._context=e}CA.prototype={areaStart:Jh,areaEnd:Jh,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:Xh(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function WL(e){return new CA(e)}function EA(e){this._context=e}EA.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var r=(this._x0+4*this._x1+e)/6,n=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(r,n):this._context.moveTo(r,n);break;case 3:this._point=4;default:Xh(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function VL(e){return new EA(e)}function AA(e){this._context=e}AA.prototype={areaStart:Jh,areaEnd:Jh,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}};function qL(e){return new AA(e)}function Pk(e){return e<0?-1:1}function Tk(e,t,r){var n=e._x1-e._x0,s=t-e._x1,i=(e._y1-e._y0)/(n||s<0&&-0),l=(r-e._y1)/(s||n<0&&-0),u=(i*s+l*n)/(n+s);return(Pk(i)+Pk(l))*Math.min(Math.abs(i),Math.abs(l),.5*Math.abs(u))||0}function Ok(e,t){var r=e._x1-e._x0;return r?(3*(e._y1-e._y0)/r-t)/2:t}function Cy(e,t,r){var n=e._x0,s=e._y0,i=e._x1,l=e._y1,u=(i-n)/3;e._context.bezierCurveTo(n+u,s+u*t,i-u,l-u*r,i,l)}function Qh(e){this._context=e}Qh.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:Cy(this,this._t0,Ok(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var r=NaN;if(e=+e,t=+t,!(e===this._x1&&t===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,Cy(this,Ok(this,r=Tk(this,e,t)),r);break;default:Cy(this,this._t0,r=Tk(this,e,t));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=r}}};function PA(e){this._context=new TA(e)}(PA.prototype=Object.create(Qh.prototype)).point=function(e,t){Qh.prototype.point.call(this,t,e)};function TA(e){this._context=e}TA.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,r,n,s,i){this._context.bezierCurveTo(t,e,n,r,i,s)}};function HL(e){return new Qh(e)}function KL(e){return new PA(e)}function OA(e){this._context=e}OA.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,r=e.length;if(r)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),r===2)this._context.lineTo(e[1],t[1]);else for(var n=Ik(e),s=Ik(t),i=0,l=1;l<r;++i,++l)this._context.bezierCurveTo(n[0][i],s[0][i],n[1][i],s[1][i],e[l],t[l]);(this._line||this._line!==0&&r===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}};function Ik(e){var t,r=e.length-1,n,s=new Array(r),i=new Array(r),l=new Array(r);for(s[0]=0,i[0]=2,l[0]=e[0]+2*e[1],t=1;t<r-1;++t)s[t]=1,i[t]=4,l[t]=4*e[t]+2*e[t+1];for(s[r-1]=2,i[r-1]=7,l[r-1]=8*e[r-1]+e[r],t=1;t<r;++t)n=s[t]/i[t-1],i[t]-=n,l[t]-=n*l[t-1];for(s[r-1]=l[r-1]/i[r-1],t=r-2;t>=0;--t)s[t]=(l[t]-s[t+1])/i[t];for(i[r-1]=(e[r]+s[r-1])/2,t=0;t<r-1;++t)i[t]=2*e[t+1]-s[t+1];return[s,i]}function GL(e){return new OA(e)}function tp(e,t){this._context=e,this._t=t}tp.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var r=this._x*(1-this._t)+e*this._t;this._context.lineTo(r,this._y),this._context.lineTo(r,t)}break}}this._x=e,this._y=t}};function YL(e){return new tp(e,.5)}function JL(e){return new tp(e,0)}function XL(e){return new tp(e,1)}function Gc(e,t){if((l=e.length)>1)for(var r=1,n,s,i=e[t[0]],l,u=i.length;r<l;++r)for(s=i,i=e[t[r]],n=0;n<u;++n)i[n][1]+=i[n][0]=isNaN(s[n][1])?s[n][0]:s[n][1]}function Mv(e){for(var t=e.length,r=new Array(t);--t>=0;)r[t]=t;return r}function QL(e,t){return e[t]}function ZL(e){const t=[];return t.key=e,t}function ez(){var e=$r([]),t=Mv,r=Gc,n=QL;function s(i){var l=Array.from(e.apply(this,arguments),ZL),u,d=l.length,m=-1,f;for(const p of i)for(u=0,++m;u<d;++u)(l[u][m]=[0,+n(p,l[u].key,m,i)]).data=p;for(u=0,f=tw(t(l));u<d;++u)l[f[u]].index=u;return r(l,f),l}return s.keys=function(i){return arguments.length?(e=typeof i=="function"?i:$r(Array.from(i)),s):e},s.value=function(i){return arguments.length?(n=typeof i=="function"?i:$r(+i),s):n},s.order=function(i){return arguments.length?(t=i==null?Mv:typeof i=="function"?i:$r(Array.from(i)),s):t},s.offset=function(i){return arguments.length?(r=i??Gc,s):r},s}function tz(e,t){if((n=e.length)>0){for(var r,n,s=0,i=e[0].length,l;s<i;++s){for(l=r=0;r<n;++r)l+=e[r][s][1]||0;if(l)for(r=0;r<n;++r)e[r][s][1]/=l}Gc(e,t)}}function rz(e,t){if((s=e.length)>0){for(var r=0,n=e[t[0]],s,i=n.length;r<i;++r){for(var l=0,u=0;l<s;++l)u+=e[l][r][1]||0;n[r][1]+=n[r][0]=-u/2}Gc(e,t)}}function nz(e,t){if(!(!((l=e.length)>0)||!((i=(s=e[t[0]]).length)>0))){for(var r=0,n=1,s,i,l;n<i;++n){for(var u=0,d=0,m=0;u<l;++u){for(var f=e[t[u]],p=f[n][1]||0,v=f[n-1][1]||0,x=(p-v)/2,b=0;b<u;++b){var S=e[t[b]],j=S[n][1]||0,N=S[n-1][1]||0;x+=j-N}d+=p,m+=x*p}s[n-1][1]+=s[n-1][0]=r,d&&(r-=m/d)}s[n-1][1]+=s[n-1][0]=r,Gc(e,t)}}var Ey={},Ay={},Dk;function sz(){return Dk||(Dk=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r==="__proto__"}e.isUnsafeProperty=t})(Ay)),Ay}var Py={},$k;function IA(){return $k||($k=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){switch(typeof r){case"number":case"symbol":return!1;case"string":return r.includes(".")||r.includes("[")||r.includes("]")}}e.isDeepKey=t})(Py)),Py}var Ty={},Rk;function nw(){return Rk||(Rk=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){var n;return typeof r=="string"||typeof r=="symbol"?r:Object.is((n=r==null?void 0:r.valueOf)==null?void 0:n.call(r),-0)?"-0":String(r)}e.toKey=t})(Ty)),Ty}var Oy={},Iy={},Mk;function iz(){return Mk||(Mk=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){if(r==null)return"";if(typeof r=="string")return r;if(Array.isArray(r))return r.map(t).join(",");const n=String(r);return n==="0"&&Object.is(Number(r),-0)?"-0":n}e.toString=t})(Iy)),Iy}var Fk;function sw(){return Fk||(Fk=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=iz(),r=nw();function n(s){if(Array.isArray(s))return s.map(r.toKey);if(typeof s=="symbol")return[s];s=t.toString(s);const i=[],l=s.length;if(l===0)return i;let u=0,d="",m="",f=!1;for(s.charCodeAt(0)===46&&(i.push(""),u++);u<l;){const p=s[u];m?p==="\\"&&u+1<l?(u++,d+=s[u]):p===m?m="":d+=p:f?p==='"'||p==="'"?m=p:p==="]"?(f=!1,i.push(d),d=""):d+=p:p==="["?(f=!0,d&&(i.push(d),d="")):p==="."?d&&(i.push(d),d=""):d+=p,u++}return d&&i.push(d),i}e.toPath=n})(Oy)),Oy}var Lk;function iw(){return Lk||(Lk=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=sz(),r=IA(),n=nw(),s=sw();function i(u,d,m){if(u==null)return m;switch(typeof d){case"string":{if(t.isUnsafeProperty(d))return m;const f=u[d];return f===void 0?r.isDeepKey(d)?i(u,s.toPath(d),m):m:f}case"number":case"symbol":{typeof d=="number"&&(d=n.toKey(d));const f=u[d];return f===void 0?m:f}default:{if(Array.isArray(d))return l(u,d,m);if(Object.is(d==null?void 0:d.valueOf(),-0)?d="-0":d=String(d),t.isUnsafeProperty(d))return m;const f=u[d];return f===void 0?m:f}}}function l(u,d,m){if(d.length===0)return m;let f=u;for(let p=0;p<d.length;p++){if(f==null||t.isUnsafeProperty(d[p]))return m;f=f[d[p]]}return f===void 0?m:f}e.get=i})(Ey)),Ey}var Dy,zk;function az(){return zk||(zk=1,Dy=iw().get),Dy}var oz=az();const Yc=ca(oz);var fi=e=>e===0?0:e>0?1:-1,Pa=e=>typeof e=="number"&&e!=+e,no=e=>typeof e=="string"&&e.indexOf("%")===e.length-1,$t=e=>(typeof e=="number"||e instanceof Number)&&!Pa(e),Ta=e=>$t(e)||typeof e=="string",lz=0,Ed=e=>{var t=++lz;return"".concat(e||"").concat(t)},la=function(t,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!$t(t)&&typeof t!="string")return n;var i;if(no(t)){if(r==null)return n;var l=t.indexOf("%");i=r*parseFloat(t.slice(0,l))/100}else i=+t;return Pa(i)&&(i=n),s&&r!=null&&i>r&&(i=r),i},DA=e=>{if(!Array.isArray(e))return!1;for(var t=e.length,r={},n=0;n<t;n++)if(!r[e[n]])r[e[n]]=!0;else return!0;return!1};function hs(e,t,r){return $t(e)&&$t(t)?e+r*(t-e):t}function cz(e,t,r){if(!(!e||!e.length))return e.find(n=>n&&(typeof t=="function"?t(n):Yc(n,t))===r)}var Zn=e=>e===null||typeof e>"u",qd=e=>Zn(e)?e:"".concat(e.charAt(0).toUpperCase()).concat(e.slice(1));function uz(e){return e!=null}function du(){}var dz=["type","size","sizeType"];function Fv(){return Fv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Fv.apply(null,arguments)}function Uk(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Bk(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Uk(Object(r),!0).forEach(function(n){fz(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Uk(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function fz(e,t,r){return(t=hz(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function hz(e){var t=mz(e,"string");return typeof t=="symbol"?t:t+""}function mz(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function pz(e,t){if(e==null)return{};var r,n,s=gz(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function gz(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var $A={symbolCircle:rw,symbolCross:PL,symbolDiamond:OL,symbolSquare:IL,symbolStar:ML,symbolTriangle:FL,symbolWye:zL},yz=Math.PI/180,vz=e=>{var t="symbol".concat(qd(e));return $A[t]||rw},xz=(e,t,r)=>{if(t==="area")return e;switch(r){case"cross":return 5*e*e/9;case"diamond":return .5*e*e/Math.sqrt(3);case"square":return e*e;case"star":{var n=18*yz;return 1.25*e*e*(Math.tan(n)-Math.tan(n*2)*Math.tan(n)**2)}case"triangle":return Math.sqrt(3)*e*e/4;case"wye":return(21-10*Math.sqrt(3))*e*e/8;default:return Math.PI*e*e/4}},wz=(e,t)=>{$A["symbol".concat(qd(e))]=t},RA=e=>{var{type:t="circle",size:r=64,sizeType:n="area"}=e,s=pz(e,dz),i=Bk(Bk({},s),{},{type:t,size:r,sizeType:n}),l="circle";typeof t=="string"&&(l=t);var u=()=>{var v=vz(l),x=UL().type(v).size(xz(r,n,l)),b=x();if(b!==null)return b},{className:d,cx:m,cy:f}=i,p=Ii(i);return $t(m)&&$t(f)&&$t(r)?y.createElement("path",Fv({},p,{className:qr("recharts-symbols",d),transform:"translate(".concat(m,", ").concat(f,")"),d:u()})):null};RA.registerSymbol=wz;var MA=e=>"radius"in e&&"startAngle"in e&&"endAngle"in e,bz=(e,t)=>{if(!e||typeof e=="function"||typeof e=="boolean")return null;var r=e;if(y.isValidElement(e)&&(r=e.props),typeof r!="object"&&typeof r!="function")return null;var n={};return Object.keys(r).forEach(s=>{Qx(s)&&(n[s]=(i=>r[s](r,i)))}),n},jz=(e,t,r)=>n=>(e(t,r,n),null),aw=(e,t,r)=>{if(e===null||typeof e!="object"&&typeof e!="function")return null;var n=null;return Object.keys(e).forEach(s=>{var i=e[s];Qx(s)&&typeof i=="function"&&(n||(n={}),n[s]=jz(i,t,r))}),n};function Wk(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Sz(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Wk(Object(r),!0).forEach(function(n){kz(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Wk(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function kz(e,t,r){return(t=_z(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function _z(e){var t=Nz(e,"string");return typeof t=="symbol"?t:t+""}function Nz(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Ri(e,t){var r=Sz({},e),n=t,s=Object.keys(t),i=s.reduce((l,u)=>(l[u]===void 0&&n[u]!==void 0&&(l[u]=n[u]),l),r);return i}var $y={},Ry={},Vk;function Cz(){return Vk||(Vk=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r,n){const s=new Map;for(let i=0;i<r.length;i++){const l=r[i],u=n(l);s.has(u)||s.set(u,l)}return Array.from(s.values())}e.uniqBy=t})(Ry)),Ry}var My={},qk;function FA(){return qk||(qk=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r}e.identity=t})(My)),My}var Fy={},Ly={},zy={},Hk;function Ez(){return Hk||(Hk=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return Number.isSafeInteger(r)&&r>=0}e.isLength=t})(zy)),zy}var Kk;function ow(){return Kk||(Kk=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Ez();function r(n){return n!=null&&typeof n!="function"&&t.isLength(n.length)}e.isArrayLike=r})(Ly)),Ly}var Uy={},Gk;function Az(){return Gk||(Gk=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return typeof r=="object"&&r!==null}e.isObjectLike=t})(Uy)),Uy}var Yk;function Pz(){return Yk||(Yk=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=ow(),r=Az();function n(s){return r.isObjectLike(s)&&t.isArrayLike(s)}e.isArrayLikeObject=n})(Fy)),Fy}var By={},Wy={},Jk;function Tz(){return Jk||(Jk=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=iw();function r(n){return function(s){return t.get(s,n)}}e.property=r})(Wy)),Wy}var Vy={},qy={},Hy={},Ky={},Xk;function LA(){return Xk||(Xk=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r!==null&&(typeof r=="object"||typeof r=="function")}e.isObject=t})(Ky)),Ky}var Gy={},Qk;function zA(){return Qk||(Qk=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r==null||typeof r!="object"&&typeof r!="function"}e.isPrimitive=t})(Gy)),Gy}var Yy={},Zk;function UA(){return Zk||(Zk=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r,n){return r===n||Number.isNaN(r)&&Number.isNaN(n)}e.eq=t})(Yy)),Yy}var e_;function Oz(){return e_||(e_=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=LA(),r=zA(),n=UA();function s(f,p,v){return typeof v!="function"?s(f,p,()=>{}):i(f,p,function x(b,S,j,N,E,C){const I=v(b,S,j,N,E,C);return I!==void 0?!!I:i(b,S,x,C)},new Map)}function i(f,p,v,x){if(p===f)return!0;switch(typeof p){case"object":return l(f,p,v,x);case"function":return Object.keys(p).length>0?i(f,{...p},v,x):n.eq(f,p);default:return t.isObject(f)?typeof p=="string"?p==="":!0:n.eq(f,p)}}function l(f,p,v,x){if(p==null)return!0;if(Array.isArray(p))return d(f,p,v,x);if(p instanceof Map)return u(f,p,v,x);if(p instanceof Set)return m(f,p,v,x);const b=Object.keys(p);if(f==null)return b.length===0;if(b.length===0)return!0;if(x!=null&&x.has(p))return x.get(p)===f;x==null||x.set(p,f);try{for(let S=0;S<b.length;S++){const j=b[S];if(!r.isPrimitive(f)&&!(j in f)||p[j]===void 0&&f[j]!==void 0||p[j]===null&&f[j]!==null||!v(f[j],p[j],j,f,p,x))return!1}return!0}finally{x==null||x.delete(p)}}function u(f,p,v,x){if(p.size===0)return!0;if(!(f instanceof Map))return!1;for(const[b,S]of p.entries()){const j=f.get(b);if(v(j,S,b,f,p,x)===!1)return!1}return!0}function d(f,p,v,x){if(p.length===0)return!0;if(!Array.isArray(f))return!1;const b=new Set;for(let S=0;S<p.length;S++){const j=p[S];let N=!1;for(let E=0;E<f.length;E++){if(b.has(E))continue;const C=f[E];let I=!1;if(v(C,j,S,f,p,x)&&(I=!0),I){b.add(E),N=!0;break}}if(!N)return!1}return!0}function m(f,p,v,x){return p.size===0?!0:f instanceof Set?d([...f],[...p],v,x):!1}e.isMatchWith=s,e.isSetMatch=m})(Hy)),Hy}var t_;function BA(){return t_||(t_=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Oz();function r(n,s){return t.isMatchWith(n,s,()=>{})}e.isMatch=r})(qy)),qy}var Jy={},Xy={},Qy={},r_;function Iz(){return r_||(r_=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return Object.getOwnPropertySymbols(r).filter(n=>Object.prototype.propertyIsEnumerable.call(r,n))}e.getSymbols=t})(Qy)),Qy}var Zy={},n_;function WA(){return n_||(n_=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r==null?r===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(r)}e.getTag=t})(Zy)),Zy}var e0={},s_;function VA(){return s_||(s_=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t="[object RegExp]",r="[object String]",n="[object Number]",s="[object Boolean]",i="[object Arguments]",l="[object Symbol]",u="[object Date]",d="[object Map]",m="[object Set]",f="[object Array]",p="[object Function]",v="[object ArrayBuffer]",x="[object Object]",b="[object Error]",S="[object DataView]",j="[object Uint8Array]",N="[object Uint8ClampedArray]",E="[object Uint16Array]",C="[object Uint32Array]",I="[object BigUint64Array]",T="[object Int8Array]",O="[object Int16Array]",V="[object Int32Array]",F="[object BigInt64Array]",L="[object Float32Array]",H="[object Float64Array]";e.argumentsTag=i,e.arrayBufferTag=v,e.arrayTag=f,e.bigInt64ArrayTag=F,e.bigUint64ArrayTag=I,e.booleanTag=s,e.dataViewTag=S,e.dateTag=u,e.errorTag=b,e.float32ArrayTag=L,e.float64ArrayTag=H,e.functionTag=p,e.int16ArrayTag=O,e.int32ArrayTag=V,e.int8ArrayTag=T,e.mapTag=d,e.numberTag=n,e.objectTag=x,e.regexpTag=t,e.setTag=m,e.stringTag=r,e.symbolTag=l,e.uint16ArrayTag=E,e.uint32ArrayTag=C,e.uint8ArrayTag=j,e.uint8ClampedArrayTag=N})(e0)),e0}var t0={},i_;function Dz(){return i_||(i_=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return ArrayBuffer.isView(r)&&!(r instanceof DataView)}e.isTypedArray=t})(t0)),t0}var a_;function qA(){return a_||(a_=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Iz(),r=WA(),n=VA(),s=zA(),i=Dz();function l(f,p){return u(f,void 0,f,new Map,p)}function u(f,p,v,x=new Map,b=void 0){const S=b==null?void 0:b(f,p,v,x);if(S!==void 0)return S;if(s.isPrimitive(f))return f;if(x.has(f))return x.get(f);if(Array.isArray(f)){const j=new Array(f.length);x.set(f,j);for(let N=0;N<f.length;N++)j[N]=u(f[N],N,v,x,b);return Object.hasOwn(f,"index")&&(j.index=f.index),Object.hasOwn(f,"input")&&(j.input=f.input),j}if(f instanceof Date)return new Date(f.getTime());if(f instanceof RegExp){const j=new RegExp(f.source,f.flags);return j.lastIndex=f.lastIndex,j}if(f instanceof Map){const j=new Map;x.set(f,j);for(const[N,E]of f)j.set(N,u(E,N,v,x,b));return j}if(f instanceof Set){const j=new Set;x.set(f,j);for(const N of f)j.add(u(N,void 0,v,x,b));return j}if(typeof Buffer<"u"&&Buffer.isBuffer(f))return f.subarray();if(i.isTypedArray(f)){const j=new(Object.getPrototypeOf(f)).constructor(f.length);x.set(f,j);for(let N=0;N<f.length;N++)j[N]=u(f[N],N,v,x,b);return j}if(f instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&f instanceof SharedArrayBuffer)return f.slice(0);if(f instanceof DataView){const j=new DataView(f.buffer.slice(0),f.byteOffset,f.byteLength);return x.set(f,j),d(j,f,v,x,b),j}if(typeof File<"u"&&f instanceof File){const j=new File([f],f.name,{type:f.type});return x.set(f,j),d(j,f,v,x,b),j}if(typeof Blob<"u"&&f instanceof Blob){const j=new Blob([f],{type:f.type});return x.set(f,j),d(j,f,v,x,b),j}if(f instanceof Error){const j=new f.constructor;return x.set(f,j),j.message=f.message,j.name=f.name,j.stack=f.stack,j.cause=f.cause,d(j,f,v,x,b),j}if(f instanceof Boolean){const j=new Boolean(f.valueOf());return x.set(f,j),d(j,f,v,x,b),j}if(f instanceof Number){const j=new Number(f.valueOf());return x.set(f,j),d(j,f,v,x,b),j}if(f instanceof String){const j=new String(f.valueOf());return x.set(f,j),d(j,f,v,x,b),j}if(typeof f=="object"&&m(f)){const j=Object.create(Object.getPrototypeOf(f));return x.set(f,j),d(j,f,v,x,b),j}return f}function d(f,p,v=f,x,b){const S=[...Object.keys(p),...t.getSymbols(p)];for(let j=0;j<S.length;j++){const N=S[j],E=Object.getOwnPropertyDescriptor(f,N);(E==null||E.writable)&&(f[N]=u(p[N],N,v,x,b))}}function m(f){switch(r.getTag(f)){case n.argumentsTag:case n.arrayTag:case n.arrayBufferTag:case n.dataViewTag:case n.booleanTag:case n.dateTag:case n.float32ArrayTag:case n.float64ArrayTag:case n.int8ArrayTag:case n.int16ArrayTag:case n.int32ArrayTag:case n.mapTag:case n.numberTag:case n.objectTag:case n.regexpTag:case n.setTag:case n.stringTag:case n.symbolTag:case n.uint8ArrayTag:case n.uint8ClampedArrayTag:case n.uint16ArrayTag:case n.uint32ArrayTag:return!0;default:return!1}}e.cloneDeepWith=l,e.cloneDeepWithImpl=u,e.copyProperties=d})(Xy)),Xy}var o_;function $z(){return o_||(o_=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=qA();function r(n){return t.cloneDeepWithImpl(n,void 0,n,new Map,void 0)}e.cloneDeep=r})(Jy)),Jy}var l_;function Rz(){return l_||(l_=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=BA(),r=$z();function n(s){return s=r.cloneDeep(s),i=>t.isMatch(i,s)}e.matches=n})(Vy)),Vy}var r0={},n0={},s0={},c_;function Mz(){return c_||(c_=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=qA(),r=VA();function n(s,i){return t.cloneDeepWith(s,(l,u,d,m)=>{const f=i==null?void 0:i(l,u,d,m);if(f!==void 0)return f;if(typeof s=="object")switch(Object.prototype.toString.call(s)){case r.numberTag:case r.stringTag:case r.booleanTag:{const p=new s.constructor(s==null?void 0:s.valueOf());return t.copyProperties(p,s),p}case r.argumentsTag:{const p={};return t.copyProperties(p,s),p.length=s.length,p[Symbol.iterator]=s[Symbol.iterator],p}default:return}})}e.cloneDeepWith=n})(s0)),s0}var u_;function Fz(){return u_||(u_=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Mz();function r(n){return t.cloneDeepWith(n)}e.cloneDeep=r})(n0)),n0}var i0={},a0={},d_;function HA(){return d_||(d_=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=/^(?:0|[1-9]\d*)$/;function r(n,s=Number.MAX_SAFE_INTEGER){switch(typeof n){case"number":return Number.isInteger(n)&&n>=0&&n<s;case"symbol":return!1;case"string":return t.test(n)}}e.isIndex=r})(a0)),a0}var o0={},f_;function Lz(){return f_||(f_=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=WA();function r(n){return n!==null&&typeof n=="object"&&t.getTag(n)==="[object Arguments]"}e.isArguments=r})(o0)),o0}var h_;function zz(){return h_||(h_=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=IA(),r=HA(),n=Lz(),s=sw();function i(l,u){let d;if(Array.isArray(u)?d=u:typeof u=="string"&&t.isDeepKey(u)&&(l==null?void 0:l[u])==null?d=s.toPath(u):d=[u],d.length===0)return!1;let m=l;for(let f=0;f<d.length;f++){const p=d[f];if((m==null||!Object.hasOwn(m,p))&&!((Array.isArray(m)||n.isArguments(m))&&r.isIndex(p)&&p<m.length))return!1;m=m[p]}return!0}e.has=i})(i0)),i0}var m_;function Uz(){return m_||(m_=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=BA(),r=nw(),n=Fz(),s=iw(),i=zz();function l(u,d){switch(typeof u){case"object":{Object.is(u==null?void 0:u.valueOf(),-0)&&(u="-0");break}case"number":{u=r.toKey(u);break}}return d=n.cloneDeep(d),function(m){const f=s.get(m,u);return f===void 0?i.has(m,u):d===void 0?f===void 0:t.isMatch(f,d)}}e.matchesProperty=l})(r0)),r0}var p_;function Bz(){return p_||(p_=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=FA(),r=Tz(),n=Rz(),s=Uz();function i(l){if(l==null)return t.identity;switch(typeof l){case"function":return l;case"object":return Array.isArray(l)&&l.length===2?s.matchesProperty(l[0],l[1]):n.matches(l);case"string":case"symbol":case"number":return r.property(l)}}e.iteratee=i})(By)),By}var g_;function Wz(){return g_||(g_=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Cz(),r=FA(),n=Pz(),s=Bz();function i(l,u=r.identity){return n.isArrayLikeObject(l)?t.uniqBy(Array.from(l),s.iteratee(u)):[]}e.uniqBy=i})($y)),$y}var l0,y_;function Vz(){return y_||(y_=1,l0=Wz().uniqBy),l0}var qz=Vz();const v_=ca(qz);function Hz(e,t,r){return t===!0?v_(e,r):typeof t=="function"?v_(e,t):e}var c0={exports:{}},u0={},d0={exports:{}},f0={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var x_;function Kz(){if(x_)return f0;x_=1;var e=nu();function t(p,v){return p===v&&(p!==0||1/p===1/v)||p!==p&&v!==v}var r=typeof Object.is=="function"?Object.is:t,n=e.useState,s=e.useEffect,i=e.useLayoutEffect,l=e.useDebugValue;function u(p,v){var x=v(),b=n({inst:{value:x,getSnapshot:v}}),S=b[0].inst,j=b[1];return i(function(){S.value=x,S.getSnapshot=v,d(S)&&j({inst:S})},[p,x,v]),s(function(){return d(S)&&j({inst:S}),p(function(){d(S)&&j({inst:S})})},[p]),l(x),x}function d(p){var v=p.getSnapshot;p=p.value;try{var x=v();return!r(p,x)}catch{return!0}}function m(p,v){return v()}var f=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?m:u;return f0.useSyncExternalStore=e.useSyncExternalStore!==void 0?e.useSyncExternalStore:f,f0}var w_;function Gz(){return w_||(w_=1,d0.exports=Kz()),d0.exports}/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var b_;function Yz(){if(b_)return u0;b_=1;var e=nu(),t=Gz();function r(m,f){return m===f&&(m!==0||1/m===1/f)||m!==m&&f!==f}var n=typeof Object.is=="function"?Object.is:r,s=t.useSyncExternalStore,i=e.useRef,l=e.useEffect,u=e.useMemo,d=e.useDebugValue;return u0.useSyncExternalStoreWithSelector=function(m,f,p,v,x){var b=i(null);if(b.current===null){var S={hasValue:!1,value:null};b.current=S}else S=b.current;b=u(function(){function N(O){if(!E){if(E=!0,C=O,O=v(O),x!==void 0&&S.hasValue){var V=S.value;if(x(V,O))return I=V}return I=O}if(V=I,n(C,O))return V;var F=v(O);return x!==void 0&&x(V,F)?(C=O,V):(C=O,I=F)}var E=!1,C,I,T=p===void 0?null:p;return[function(){return N(f())},T===null?void 0:function(){return N(T())}]},[f,p,v,x]);var j=s(m,b[0],b[1]);return l(function(){S.hasValue=!0,S.value=j},[j]),d(j),j},u0}var j_;function Jz(){return j_||(j_=1,c0.exports=Yz()),c0.exports}var Xz=Jz(),lw=y.createContext(null),Qz=e=>e,wn=()=>{var e=y.useContext(lw);return e?e.store.dispatch:Qz},Eh=()=>{},Zz=()=>Eh,e8=(e,t)=>e===t;function Pt(e){var t=y.useContext(lw);return Xz.useSyncExternalStoreWithSelector(t?t.subscription.addNestedSub:Zz,t?t.store.getState:Eh,t?t.store.getState:Eh,t?e:Eh,e8)}function t8(e,t=`expected a function, instead received ${typeof e}`){if(typeof e!="function")throw new TypeError(t)}function r8(e,t=`expected an object, instead received ${typeof e}`){if(typeof e!="object")throw new TypeError(t)}function n8(e,t="expected all items to be functions, instead received the following types: "){if(!e.every(r=>typeof r=="function")){const r=e.map(n=>typeof n=="function"?`function ${n.name||"unnamed"}()`:typeof n).join(", ");throw new TypeError(`${t}[${r}]`)}}var S_=e=>Array.isArray(e)?e:[e];function s8(e){const t=Array.isArray(e[0])?e[0]:e;return n8(t,"createSelector expects all input-selectors to be functions, but received the following types: "),t}function i8(e,t){const r=[],{length:n}=e;for(let s=0;s<n;s++)r.push(e[s].apply(null,t));return r}var a8=class{constructor(e){this.value=e}deref(){return this.value}},o8=typeof WeakRef<"u"?WeakRef:a8,l8=0,k_=1;function lh(){return{s:l8,v:void 0,o:null,p:null}}function KA(e,t={}){let r=lh();const{resultEqualityCheck:n}=t;let s,i=0;function l(){var p;let u=r;const{length:d}=arguments;for(let v=0,x=d;v<x;v++){const b=arguments[v];if(typeof b=="function"||typeof b=="object"&&b!==null){let S=u.o;S===null&&(u.o=S=new WeakMap);const j=S.get(b);j===void 0?(u=lh(),S.set(b,u)):u=j}else{let S=u.p;S===null&&(u.p=S=new Map);const j=S.get(b);j===void 0?(u=lh(),S.set(b,u)):u=j}}const m=u;let f;if(u.s===k_)f=u.v;else if(f=e.apply(null,arguments),i++,n){const v=((p=s==null?void 0:s.deref)==null?void 0:p.call(s))??s;v!=null&&n(v,f)&&(f=v,i!==0&&i--),s=typeof f=="object"&&f!==null||typeof f=="function"?new o8(f):f}return m.s=k_,m.v=f,f}return l.clearCache=()=>{r=lh(),l.resetResultsCount()},l.resultsCount=()=>i,l.resetResultsCount=()=>{i=0},l}function c8(e,...t){const r=typeof e=="function"?{memoize:e,memoizeOptions:t}:e,n=(...s)=>{let i=0,l=0,u,d={},m=s.pop();typeof m=="object"&&(d=m,m=s.pop()),t8(m,`createSelector expects an output function after the inputs, but received: [${typeof m}]`);const f={...r,...d},{memoize:p,memoizeOptions:v=[],argsMemoize:x=KA,argsMemoizeOptions:b=[]}=f,S=S_(v),j=S_(b),N=s8(s),E=p(function(){return i++,m.apply(null,arguments)},...S),C=x(function(){l++;const T=i8(N,arguments);return u=E.apply(null,T),u},...j);return Object.assign(C,{resultFunc:m,memoizedResultFunc:E,dependencies:N,dependencyRecomputations:()=>l,resetDependencyRecomputations:()=>{l=0},lastResult:()=>u,recomputations:()=>i,resetRecomputations:()=>{i=0},memoize:p,argsMemoize:x})};return Object.assign(n,{withTypes:()=>n}),n}var we=c8(KA),u8=Object.assign((e,t=we)=>{r8(e,`createStructuredSelector expects first argument to be an object where each property is a selector, instead received a ${typeof e}`);const r=Object.keys(e),n=r.map(i=>e[i]);return t(n,(...i)=>i.reduce((l,u,d)=>(l[r[d]]=u,l),{}))},{withTypes:()=>u8}),h0={},m0={},p0={},__;function d8(){return __||(__=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return typeof n=="symbol"?1:n===null?2:n===void 0?3:n!==n?4:0}const r=(n,s,i)=>{if(n!==s){const l=t(n),u=t(s);if(l===u&&l===0){if(n<s)return i==="desc"?1:-1;if(n>s)return i==="desc"?-1:1}return i==="desc"?u-l:l-u}return 0};e.compareValues=r})(p0)),p0}var g0={},y0={},N_;function GA(){return N_||(N_=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return typeof r=="symbol"||r instanceof Symbol}e.isSymbol=t})(y0)),y0}var C_;function f8(){return C_||(C_=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=GA(),r=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,n=/^\w*$/;function s(i,l){return Array.isArray(i)?!1:typeof i=="number"||typeof i=="boolean"||i==null||t.isSymbol(i)?!0:typeof i=="string"&&(n.test(i)||!r.test(i))||l!=null&&Object.hasOwn(l,i)}e.isKey=s})(g0)),g0}var E_;function h8(){return E_||(E_=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=d8(),r=f8(),n=sw();function s(i,l,u,d){if(i==null)return[];u=d?void 0:u,Array.isArray(i)||(i=Object.values(i)),Array.isArray(l)||(l=l==null?[null]:[l]),l.length===0&&(l=[null]),Array.isArray(u)||(u=u==null?[]:[u]),u=u.map(x=>String(x));const m=(x,b)=>{let S=x;for(let j=0;j<b.length&&S!=null;++j)S=S[b[j]];return S},f=(x,b)=>b==null||x==null?b:typeof x=="object"&&"key"in x?Object.hasOwn(b,x.key)?b[x.key]:m(b,x.path):typeof x=="function"?x(b):Array.isArray(x)?m(b,x):typeof b=="object"?b[x]:b,p=l.map(x=>(Array.isArray(x)&&x.length===1&&(x=x[0]),x==null||typeof x=="function"||Array.isArray(x)||r.isKey(x)?x:{key:x,path:n.toPath(x)}));return i.map(x=>({original:x,criteria:p.map(b=>f(b,x))})).slice().sort((x,b)=>{for(let S=0;S<p.length;S++){const j=t.compareValues(x.criteria[S],b.criteria[S],u[S]);if(j!==0)return j}return 0}).map(x=>x.original)}e.orderBy=s})(m0)),m0}var v0={},A_;function m8(){return A_||(A_=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r,n=1){const s=[],i=Math.floor(n),l=(u,d)=>{for(let m=0;m<u.length;m++){const f=u[m];Array.isArray(f)&&d<i?l(f,d+1):s.push(f)}};return l(r,0),s}e.flatten=t})(v0)),v0}var x0={},P_;function YA(){return P_||(P_=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=HA(),r=ow(),n=LA(),s=UA();function i(l,u,d){return n.isObject(d)&&(typeof u=="number"&&r.isArrayLike(d)&&t.isIndex(u)&&u<d.length||typeof u=="string"&&u in d)?s.eq(d[u],l):!1}e.isIterateeCall=i})(x0)),x0}var T_;function p8(){return T_||(T_=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=h8(),r=m8(),n=YA();function s(i,...l){const u=l.length;return u>1&&n.isIterateeCall(i,l[0],l[1])?l=[]:u>2&&n.isIterateeCall(l[0],l[1],l[2])&&(l=[l[0]]),t.orderBy(i,r.flatten(l),["asc"])}e.sortBy=s})(h0)),h0}var w0,O_;function g8(){return O_||(O_=1,w0=p8().sortBy),w0}var y8=g8();const rp=ca(y8);var JA=e=>e.legend.settings,v8=e=>e.legend.size,x8=e=>e.legend.payload;we([x8,JA],(e,t)=>{var{itemSorter:r}=t,n=e.flat(1);return r?rp(n,r):n});var ch=1;function w8(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],[t,r]=y.useState({height:0,left:0,top:0,width:0}),n=y.useCallback(s=>{if(s!=null){var i=s.getBoundingClientRect(),l={height:i.height,left:i.left,top:i.top,width:i.width};(Math.abs(l.height-t.height)>ch||Math.abs(l.left-t.left)>ch||Math.abs(l.top-t.top)>ch||Math.abs(l.width-t.width)>ch)&&r({height:l.height,left:l.left,top:l.top,width:l.width})}},[t.width,t.height,t.top,t.left,...e]);return[t,n]}function fs(e){return`Minified Redux error #${e}; visit https://redux.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var b8=typeof Symbol=="function"&&Symbol.observable||"@@observable",I_=b8,b0=()=>Math.random().toString(36).substring(7).split("").join("."),j8={INIT:`@@redux/INIT${b0()}`,REPLACE:`@@redux/REPLACE${b0()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${b0()}`},Zh=j8;function cw(e){if(typeof e!="object"||e===null)return!1;let t=e;for(;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t||Object.getPrototypeOf(e)===null}function XA(e,t,r){if(typeof e!="function")throw new Error(fs(2));if(typeof t=="function"&&typeof r=="function"||typeof r=="function"&&typeof arguments[3]=="function")throw new Error(fs(0));if(typeof t=="function"&&typeof r>"u"&&(r=t,t=void 0),typeof r<"u"){if(typeof r!="function")throw new Error(fs(1));return r(XA)(e,t)}let n=e,s=t,i=new Map,l=i,u=0,d=!1;function m(){l===i&&(l=new Map,i.forEach((j,N)=>{l.set(N,j)}))}function f(){if(d)throw new Error(fs(3));return s}function p(j){if(typeof j!="function")throw new Error(fs(4));if(d)throw new Error(fs(5));let N=!0;m();const E=u++;return l.set(E,j),function(){if(N){if(d)throw new Error(fs(6));N=!1,m(),l.delete(E),i=null}}}function v(j){if(!cw(j))throw new Error(fs(7));if(typeof j.type>"u")throw new Error(fs(8));if(typeof j.type!="string")throw new Error(fs(17));if(d)throw new Error(fs(9));try{d=!0,s=n(s,j)}finally{d=!1}return(i=l).forEach(E=>{E()}),j}function x(j){if(typeof j!="function")throw new Error(fs(10));n=j,v({type:Zh.REPLACE})}function b(){const j=p;return{subscribe(N){if(typeof N!="object"||N===null)throw new Error(fs(11));function E(){const I=N;I.next&&I.next(f())}return E(),{unsubscribe:j(E)}},[I_](){return this}}}return v({type:Zh.INIT}),{dispatch:v,subscribe:p,getState:f,replaceReducer:x,[I_]:b}}function S8(e){Object.keys(e).forEach(t=>{const r=e[t];if(typeof r(void 0,{type:Zh.INIT})>"u")throw new Error(fs(12));if(typeof r(void 0,{type:Zh.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(fs(13))})}function QA(e){const t=Object.keys(e),r={};for(let i=0;i<t.length;i++){const l=t[i];typeof e[l]=="function"&&(r[l]=e[l])}const n=Object.keys(r);let s;try{S8(r)}catch(i){s=i}return function(l={},u){if(s)throw s;let d=!1;const m={};for(let f=0;f<n.length;f++){const p=n[f],v=r[p],x=l[p],b=v(x,u);if(typeof b>"u")throw u&&u.type,new Error(fs(14));m[p]=b,d=d||b!==x}return d=d||n.length!==Object.keys(l).length,d?m:l}}function em(...e){return e.length===0?t=>t:e.length===1?e[0]:e.reduce((t,r)=>(...n)=>t(r(...n)))}function k8(...e){return t=>(r,n)=>{const s=t(r,n);let i=()=>{throw new Error(fs(15))};const l={getState:s.getState,dispatch:(d,...m)=>i(d,...m)},u=e.map(d=>d(l));return i=em(...u)(s.dispatch),{...s,dispatch:i}}}function ZA(e){return cw(e)&&"type"in e&&typeof e.type=="string"}var eP=Symbol.for("immer-nothing"),D_=Symbol.for("immer-draftable"),gi=Symbol.for("immer-state");function ia(e,...t){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var Ad=Object.getPrototypeOf;function Rl(e){return!!e&&!!e[gi]}function so(e){var t;return e?tP(e)||Array.isArray(e)||!!e[D_]||!!((t=e.constructor)!=null&&t[D_])||Hd(e)||sp(e):!1}var _8=Object.prototype.constructor.toString(),$_=new WeakMap;function tP(e){if(!e||typeof e!="object")return!1;const t=Object.getPrototypeOf(e);if(t===null||t===Object.prototype)return!0;const r=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;if(r===Object)return!0;if(typeof r!="function")return!1;let n=$_.get(r);return n===void 0&&(n=Function.toString.call(r),$_.set(r,n)),n===_8}function tm(e,t,r=!0){np(e)===0?(r?Reflect.ownKeys(e):Object.keys(e)).forEach(s=>{t(s,e[s],e)}):e.forEach((n,s)=>t(s,n,e))}function np(e){const t=e[gi];return t?t.type_:Array.isArray(e)?1:Hd(e)?2:sp(e)?3:0}function Lv(e,t){return np(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function rP(e,t,r){const n=np(e);n===2?e.set(t,r):n===3?e.add(r):e[t]=r}function N8(e,t){return e===t?e!==0||1/e===1/t:e!==e&&t!==t}function Hd(e){return e instanceof Map}function sp(e){return e instanceof Set}function xl(e){return e.copy_||e.base_}function zv(e,t){if(Hd(e))return new Map(e);if(sp(e))return new Set(e);if(Array.isArray(e))return Array.prototype.slice.call(e);const r=tP(e);if(t===!0||t==="class_only"&&!r){const n=Object.getOwnPropertyDescriptors(e);delete n[gi];let s=Reflect.ownKeys(n);for(let i=0;i<s.length;i++){const l=s[i],u=n[l];u.writable===!1&&(u.writable=!0,u.configurable=!0),(u.get||u.set)&&(n[l]={configurable:!0,writable:!0,enumerable:u.enumerable,value:e[l]})}return Object.create(Ad(e),n)}else{const n=Ad(e);if(n!==null&&r)return{...e};const s=Object.create(n);return Object.assign(s,e)}}function uw(e,t=!1){return ip(e)||Rl(e)||!so(e)||(np(e)>1&&Object.defineProperties(e,{set:uh,add:uh,clear:uh,delete:uh}),Object.freeze(e),t&&Object.values(e).forEach(r=>uw(r,!0))),e}function C8(){ia(2)}var uh={value:C8};function ip(e){return e===null||typeof e!="object"?!0:Object.isFrozen(e)}var E8={};function Ml(e){const t=E8[e];return t||ia(0,e),t}var Pd;function nP(){return Pd}function A8(e,t){return{drafts_:[],parent_:e,immer_:t,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function R_(e,t){t&&(Ml("Patches"),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function Uv(e){Bv(e),e.drafts_.forEach(P8),e.drafts_=null}function Bv(e){e===Pd&&(Pd=e.parent_)}function M_(e){return Pd=A8(Pd,e)}function P8(e){const t=e[gi];t.type_===0||t.type_===1?t.revoke_():t.revoked_=!0}function F_(e,t){t.unfinalizedDrafts_=t.drafts_.length;const r=t.drafts_[0];return e!==void 0&&e!==r?(r[gi].modified_&&(Uv(t),ia(4)),so(e)&&(e=rm(t,e),t.parent_||nm(t,e)),t.patches_&&Ml("Patches").generateReplacementPatches_(r[gi].base_,e,t.patches_,t.inversePatches_)):e=rm(t,r,[]),Uv(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==eP?e:void 0}function rm(e,t,r){if(ip(t))return t;const n=e.immer_.shouldUseStrictIteration(),s=t[gi];if(!s)return tm(t,(i,l)=>L_(e,s,t,i,l,r),n),t;if(s.scope_!==e)return t;if(!s.modified_)return nm(e,s.base_,!0),s.base_;if(!s.finalized_){s.finalized_=!0,s.scope_.unfinalizedDrafts_--;const i=s.copy_;let l=i,u=!1;s.type_===3&&(l=new Set(i),i.clear(),u=!0),tm(l,(d,m)=>L_(e,s,i,d,m,r,u),n),nm(e,i,!1),r&&e.patches_&&Ml("Patches").generatePatches_(s,r,e.patches_,e.inversePatches_)}return s.copy_}function L_(e,t,r,n,s,i,l){if(s==null||typeof s!="object"&&!l)return;const u=ip(s);if(!(u&&!l)){if(Rl(s)){const d=i&&t&&t.type_!==3&&!Lv(t.assigned_,n)?i.concat(n):void 0,m=rm(e,s,d);if(rP(r,n,m),Rl(m))e.canAutoFreeze_=!1;else return}else l&&r.add(s);if(so(s)&&!u){if(!e.immer_.autoFreeze_&&e.unfinalizedDrafts_<1||t&&t.base_&&t.base_[n]===s&&u)return;rm(e,s),(!t||!t.scope_.parent_)&&typeof n!="symbol"&&(Hd(r)?r.has(n):Object.prototype.propertyIsEnumerable.call(r,n))&&nm(e,s)}}}function nm(e,t,r=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&uw(t,r)}function T8(e,t){const r=Array.isArray(e),n={type_:r?1:0,scope_:t?t.scope_:nP(),modified_:!1,finalized_:!1,assigned_:{},parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1};let s=n,i=dw;r&&(s=[n],i=Td);const{revoke:l,proxy:u}=Proxy.revocable(s,i);return n.draft_=u,n.revoke_=l,u}var dw={get(e,t){if(t===gi)return e;const r=xl(e);if(!Lv(r,t))return O8(e,r,t);const n=r[t];return e.finalized_||!so(n)?n:n===j0(e.base_,t)?(S0(e),e.copy_[t]=Vv(n,e)):n},has(e,t){return t in xl(e)},ownKeys(e){return Reflect.ownKeys(xl(e))},set(e,t,r){const n=sP(xl(e),t);if(n!=null&&n.set)return n.set.call(e.draft_,r),!0;if(!e.modified_){const s=j0(xl(e),t),i=s==null?void 0:s[gi];if(i&&i.base_===r)return e.copy_[t]=r,e.assigned_[t]=!1,!0;if(N8(r,s)&&(r!==void 0||Lv(e.base_,t)))return!0;S0(e),Wv(e)}return e.copy_[t]===r&&(r!==void 0||t in e.copy_)||Number.isNaN(r)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=r,e.assigned_[t]=!0),!0},deleteProperty(e,t){return j0(e.base_,t)!==void 0||t in e.base_?(e.assigned_[t]=!1,S0(e),Wv(e)):delete e.assigned_[t],e.copy_&&delete e.copy_[t],!0},getOwnPropertyDescriptor(e,t){const r=xl(e),n=Reflect.getOwnPropertyDescriptor(r,t);return n&&{writable:!0,configurable:e.type_!==1||t!=="length",enumerable:n.enumerable,value:r[t]}},defineProperty(){ia(11)},getPrototypeOf(e){return Ad(e.base_)},setPrototypeOf(){ia(12)}},Td={};tm(dw,(e,t)=>{Td[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}});Td.deleteProperty=function(e,t){return Td.set.call(this,e,t,void 0)};Td.set=function(e,t,r){return dw.set.call(this,e[0],t,r,e[0])};function j0(e,t){const r=e[gi];return(r?xl(r):e)[t]}function O8(e,t,r){var s;const n=sP(t,r);return n?"value"in n?n.value:(s=n.get)==null?void 0:s.call(e.draft_):void 0}function sP(e,t){if(!(t in e))return;let r=Ad(e);for(;r;){const n=Object.getOwnPropertyDescriptor(r,t);if(n)return n;r=Ad(r)}}function Wv(e){e.modified_||(e.modified_=!0,e.parent_&&Wv(e.parent_))}function S0(e){e.copy_||(e.copy_=zv(e.base_,e.scope_.immer_.useStrictShallowCopy_))}var I8=class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.useStrictIteration_=!0,this.produce=(t,r,n)=>{if(typeof t=="function"&&typeof r!="function"){const i=r;r=t;const l=this;return function(d=i,...m){return l.produce(d,f=>r.call(this,f,...m))}}typeof r!="function"&&ia(6),n!==void 0&&typeof n!="function"&&ia(7);let s;if(so(t)){const i=M_(this),l=Vv(t,void 0);let u=!0;try{s=r(l),u=!1}finally{u?Uv(i):Bv(i)}return R_(i,n),F_(s,i)}else if(!t||typeof t!="object"){if(s=r(t),s===void 0&&(s=t),s===eP&&(s=void 0),this.autoFreeze_&&uw(s,!0),n){const i=[],l=[];Ml("Patches").generateReplacementPatches_(t,s,i,l),n(i,l)}return s}else ia(1,t)},this.produceWithPatches=(t,r)=>{if(typeof t=="function")return(l,...u)=>this.produceWithPatches(l,d=>t(d,...u));let n,s;return[this.produce(t,r,(l,u)=>{n=l,s=u}),n,s]},typeof(e==null?void 0:e.autoFreeze)=="boolean"&&this.setAutoFreeze(e.autoFreeze),typeof(e==null?void 0:e.useStrictShallowCopy)=="boolean"&&this.setUseStrictShallowCopy(e.useStrictShallowCopy),typeof(e==null?void 0:e.useStrictIteration)=="boolean"&&this.setUseStrictIteration(e.useStrictIteration)}createDraft(e){so(e)||ia(8),Rl(e)&&(e=Xa(e));const t=M_(this),r=Vv(e,void 0);return r[gi].isManual_=!0,Bv(t),r}finishDraft(e,t){const r=e&&e[gi];(!r||!r.isManual_)&&ia(9);const{scope_:n}=r;return R_(n,t),F_(void 0,n)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}setUseStrictIteration(e){this.useStrictIteration_=e}shouldUseStrictIteration(){return this.useStrictIteration_}applyPatches(e,t){let r;for(r=t.length-1;r>=0;r--){const s=t[r];if(s.path.length===0&&s.op==="replace"){e=s.value;break}}r>-1&&(t=t.slice(r+1));const n=Ml("Patches").applyPatches_;return Rl(e)?n(e,t):this.produce(e,s=>n(s,t))}};function Vv(e,t){const r=Hd(e)?Ml("MapSet").proxyMap_(e,t):sp(e)?Ml("MapSet").proxySet_(e,t):T8(e,t);return(t?t.scope_:nP()).drafts_.push(r),r}function Xa(e){return Rl(e)||ia(10,e),iP(e)}function iP(e){if(!so(e)||ip(e))return e;const t=e[gi];let r,n=!0;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,r=zv(e,t.scope_.immer_.useStrictShallowCopy_),n=t.scope_.immer_.shouldUseStrictIteration()}else r=zv(e,!0);return tm(r,(s,i)=>{rP(r,s,iP(i))},n),t&&(t.finalized_=!1),r}var qv=new I8,aP=qv.produce,D8=qv.setUseStrictIteration.bind(qv);function oP(e){return({dispatch:r,getState:n})=>s=>i=>typeof i=="function"?i(r,n,e):s(i)}var $8=oP(),R8=oP,M8=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?em:em.apply(null,arguments)};function Di(e,t){function r(...n){if(t){let s=t(...n);if(!s)throw new Error(mi(0));return{type:e,payload:s.payload,..."meta"in s&&{meta:s.meta},..."error"in s&&{error:s.error}}}return{type:e,payload:n[0]}}return r.toString=()=>`${e}`,r.type=e,r.match=n=>ZA(n)&&n.type===e,r}var lP=class ud extends Array{constructor(...t){super(...t),Object.setPrototypeOf(this,ud.prototype)}static get[Symbol.species](){return ud}concat(...t){return super.concat.apply(this,t)}prepend(...t){return t.length===1&&Array.isArray(t[0])?new ud(...t[0].concat(this)):new ud(...t.concat(this))}};function z_(e){return so(e)?aP(e,()=>{}):e}function dh(e,t,r){return e.has(t)?e.get(t):e.set(t,r(t)).get(t)}function F8(e){return typeof e=="boolean"}var L8=()=>function(t){const{thunk:r=!0,immutableCheck:n=!0,serializableCheck:s=!0,actionCreatorCheck:i=!0}=t??{};let l=new lP;return r&&(F8(r)?l.push($8):l.push(R8(r.extraArgument))),l},cP="RTK_autoBatch",Un=()=>e=>({payload:e,meta:{[cP]:!0}}),U_=e=>t=>{setTimeout(t,e)},uP=(e={type:"raf"})=>t=>(...r)=>{const n=t(...r);let s=!0,i=!1,l=!1;const u=new Set,d=e.type==="tick"?queueMicrotask:e.type==="raf"?typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:U_(10):e.type==="callback"?e.queueNotification:U_(e.timeout),m=()=>{l=!1,i&&(i=!1,u.forEach(f=>f()))};return Object.assign({},n,{subscribe(f){const p=()=>s&&f(),v=n.subscribe(p);return u.add(f),()=>{v(),u.delete(f)}},dispatch(f){var p;try{return s=!((p=f==null?void 0:f.meta)!=null&&p[cP]),i=!s,i&&(l||(l=!0,d(m))),n.dispatch(f)}finally{s=!0}}})},z8=e=>function(r){const{autoBatch:n=!0}=r??{};let s=new lP(e);return n&&s.push(uP(typeof n=="object"?n:void 0)),s};function U8(e){const t=L8(),{reducer:r=void 0,middleware:n,devTools:s=!0,preloadedState:i=void 0,enhancers:l=void 0}=e||{};let u;if(typeof r=="function")u=r;else if(cw(r))u=QA(r);else throw new Error(mi(1));let d;typeof n=="function"?d=n(t):d=t();let m=em;s&&(m=M8({trace:!1,...typeof s=="object"&&s}));const f=k8(...d),p=z8(f);let v=typeof l=="function"?l(p):p();const x=m(...v);return XA(u,i,x)}function dP(e){const t={},r=[];let n;const s={addCase(i,l){const u=typeof i=="string"?i:i.type;if(!u)throw new Error(mi(28));if(u in t)throw new Error(mi(29));return t[u]=l,s},addAsyncThunk(i,l){return l.pending&&(t[i.pending.type]=l.pending),l.rejected&&(t[i.rejected.type]=l.rejected),l.fulfilled&&(t[i.fulfilled.type]=l.fulfilled),l.settled&&r.push({matcher:i.settled,reducer:l.settled}),s},addMatcher(i,l){return r.push({matcher:i,reducer:l}),s},addDefaultCase(i){return n=i,s}};return e(s),[t,r,n]}D8(!1);function B8(e){return typeof e=="function"}function W8(e,t){let[r,n,s]=dP(t),i;if(B8(e))i=()=>z_(e());else{const u=z_(e);i=()=>u}function l(u=i(),d){let m=[r[d.type],...n.filter(({matcher:f})=>f(d)).map(({reducer:f})=>f)];return m.filter(f=>!!f).length===0&&(m=[s]),m.reduce((f,p)=>{if(p)if(Rl(f)){const x=p(f,d);return x===void 0?f:x}else{if(so(f))return aP(f,v=>p(v,d));{const v=p(f,d);if(v===void 0){if(f===null)return f;throw Error("A case reducer on a non-draftable value must not return undefined")}return v}}return f},u)}return l.getInitialState=i,l}var V8="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",q8=(e=21)=>{let t="",r=e;for(;r--;)t+=V8[Math.random()*64|0];return t},H8=Symbol.for("rtk-slice-createasyncthunk");function K8(e,t){return`${e}/${t}`}function G8({creators:e}={}){var r;const t=(r=e==null?void 0:e.asyncThunk)==null?void 0:r[H8];return function(s){const{name:i,reducerPath:l=i}=s;if(!i)throw new Error(mi(11));const u=(typeof s.reducers=="function"?s.reducers(J8()):s.reducers)||{},d=Object.keys(u),m={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},f={addCase(I,T){const O=typeof I=="string"?I:I.type;if(!O)throw new Error(mi(12));if(O in m.sliceCaseReducersByType)throw new Error(mi(13));return m.sliceCaseReducersByType[O]=T,f},addMatcher(I,T){return m.sliceMatchers.push({matcher:I,reducer:T}),f},exposeAction(I,T){return m.actionCreators[I]=T,f},exposeCaseReducer(I,T){return m.sliceCaseReducersByName[I]=T,f}};d.forEach(I=>{const T=u[I],O={reducerName:I,type:K8(i,I),createNotation:typeof s.reducers=="function"};Q8(T)?eU(O,T,f,t):X8(O,T,f)});function p(){const[I={},T=[],O=void 0]=typeof s.extraReducers=="function"?dP(s.extraReducers):[s.extraReducers],V={...I,...m.sliceCaseReducersByType};return W8(s.initialState,F=>{for(let L in V)F.addCase(L,V[L]);for(let L of m.sliceMatchers)F.addMatcher(L.matcher,L.reducer);for(let L of T)F.addMatcher(L.matcher,L.reducer);O&&F.addDefaultCase(O)})}const v=I=>I,x=new Map,b=new WeakMap;let S;function j(I,T){return S||(S=p()),S(I,T)}function N(){return S||(S=p()),S.getInitialState()}function E(I,T=!1){function O(F){let L=F[I];return typeof L>"u"&&T&&(L=dh(b,O,N)),L}function V(F=v){const L=dh(x,T,()=>new WeakMap);return dh(L,F,()=>{const H={};for(const[le,K]of Object.entries(s.selectors??{}))H[le]=Y8(K,F,()=>dh(b,F,N),T);return H})}return{reducerPath:I,getSelectors:V,get selectors(){return V(O)},selectSlice:O}}const C={name:i,reducer:j,actions:m.actionCreators,caseReducers:m.sliceCaseReducersByName,getInitialState:N,...E(l),injectInto(I,{reducerPath:T,...O}={}){const V=T??l;return I.inject({reducerPath:V,reducer:j},O),{...C,...E(V,!0)}}};return C}}function Y8(e,t,r,n){function s(i,...l){let u=t(i);return typeof u>"u"&&n&&(u=r()),e(u,...l)}return s.unwrapped=e,s}var Js=G8();function J8(){function e(t,r){return{_reducerDefinitionType:"asyncThunk",payloadCreator:t,...r}}return e.withTypes=()=>e,{reducer(t){return Object.assign({[t.name](...r){return t(...r)}}[t.name],{_reducerDefinitionType:"reducer"})},preparedReducer(t,r){return{_reducerDefinitionType:"reducerWithPrepare",prepare:t,reducer:r}},asyncThunk:e}}function X8({type:e,reducerName:t,createNotation:r},n,s){let i,l;if("reducer"in n){if(r&&!Z8(n))throw new Error(mi(17));i=n.reducer,l=n.prepare}else i=n;s.addCase(e,i).exposeCaseReducer(t,i).exposeAction(t,l?Di(e,l):Di(e))}function Q8(e){return e._reducerDefinitionType==="asyncThunk"}function Z8(e){return e._reducerDefinitionType==="reducerWithPrepare"}function eU({type:e,reducerName:t},r,n,s){if(!s)throw new Error(mi(18));const{payloadCreator:i,fulfilled:l,pending:u,rejected:d,settled:m,options:f}=r,p=s(e,i,f);n.exposeAction(t,p),l&&n.addCase(p.fulfilled,l),u&&n.addCase(p.pending,u),d&&n.addCase(p.rejected,d),m&&n.addMatcher(p.settled,m),n.exposeCaseReducer(t,{fulfilled:l||fh,pending:u||fh,rejected:d||fh,settled:m||fh})}function fh(){}var tU="task",fP="listener",hP="completed",fw="cancelled",rU=`task-${fw}`,nU=`task-${hP}`,Hv=`${fP}-${fw}`,sU=`${fP}-${hP}`,ap=class{constructor(e){ny(this,"name","TaskAbortError");ny(this,"message");this.code=e,this.message=`${tU} ${fw} (reason: ${e})`}},hw=(e,t)=>{if(typeof e!="function")throw new TypeError(mi(32))},sm=()=>{},mP=(e,t=sm)=>(e.catch(t),e),pP=(e,t)=>(e.addEventListener("abort",t,{once:!0}),()=>e.removeEventListener("abort",t)),Pl=(e,t)=>{const r=e.signal;r.aborted||("reason"in r||Object.defineProperty(r,"reason",{enumerable:!0,value:t,configurable:!0,writable:!0}),e.abort(t))},Tl=e=>{if(e.aborted){const{reason:t}=e;throw new ap(t)}};function gP(e,t){let r=sm;return new Promise((n,s)=>{const i=()=>s(new ap(e.reason));if(e.aborted){i();return}r=pP(e,i),t.finally(()=>r()).then(n,s)}).finally(()=>{r=sm})}var iU=async(e,t)=>{try{return await Promise.resolve(),{status:"ok",value:await e()}}catch(r){return{status:r instanceof ap?"cancelled":"rejected",error:r}}finally{t==null||t()}},im=e=>t=>mP(gP(e,t).then(r=>(Tl(e),r))),yP=e=>{const t=im(e);return r=>t(new Promise(n=>setTimeout(n,r)))},{assign:Vc}=Object,B_={},op="listenerMiddleware",aU=(e,t)=>{const r=n=>pP(e,()=>Pl(n,e.reason));return(n,s)=>{hw(n);const i=new AbortController;r(i);const l=iU(async()=>{Tl(e),Tl(i.signal);const u=await n({pause:im(i.signal),delay:yP(i.signal),signal:i.signal});return Tl(i.signal),u},()=>Pl(i,nU));return s!=null&&s.autoJoin&&t.push(l.catch(sm)),{result:im(e)(l),cancel(){Pl(i,rU)}}}},oU=(e,t)=>{const r=async(n,s)=>{Tl(t);let i=()=>{};const u=[new Promise((d,m)=>{let f=e({predicate:n,effect:(p,v)=>{v.unsubscribe(),d([p,v.getState(),v.getOriginalState()])}});i=()=>{f(),m()}})];s!=null&&u.push(new Promise(d=>setTimeout(d,s,null)));try{const d=await gP(t,Promise.race(u));return Tl(t),d}finally{i()}};return(n,s)=>mP(r(n,s))},vP=e=>{let{type:t,actionCreator:r,matcher:n,predicate:s,effect:i}=e;if(t)s=Di(t).match;else if(r)t=r.type,s=r.match;else if(n)s=n;else if(!s)throw new Error(mi(21));return hw(i),{predicate:s,type:t,effect:i}},xP=Vc(e=>{const{type:t,predicate:r,effect:n}=vP(e);return{id:q8(),effect:n,type:t,predicate:r,pending:new Set,unsubscribe:()=>{throw new Error(mi(22))}}},{withTypes:()=>xP}),W_=(e,t)=>{const{type:r,effect:n,predicate:s}=vP(t);return Array.from(e.values()).find(i=>(typeof r=="string"?i.type===r:i.predicate===s)&&i.effect===n)},Kv=e=>{e.pending.forEach(t=>{Pl(t,Hv)})},lU=(e,t)=>()=>{for(const r of t.keys())Kv(r);e.clear()},V_=(e,t,r)=>{try{e(t,r)}catch(n){setTimeout(()=>{throw n},0)}},wP=Vc(Di(`${op}/add`),{withTypes:()=>wP}),cU=Di(`${op}/removeAll`),bP=Vc(Di(`${op}/remove`),{withTypes:()=>bP}),uU=(...e)=>{console.error(`${op}/error`,...e)},Kd=(e={})=>{const t=new Map,r=new Map,n=x=>{const b=r.get(x)??0;r.set(x,b+1)},s=x=>{const b=r.get(x)??1;b===1?r.delete(x):r.set(x,b-1)},{extra:i,onError:l=uU}=e;hw(l);const u=x=>(x.unsubscribe=()=>t.delete(x.id),t.set(x.id,x),b=>{x.unsubscribe(),b!=null&&b.cancelActive&&Kv(x)}),d=x=>{const b=W_(t,x)??xP(x);return u(b)};Vc(d,{withTypes:()=>d});const m=x=>{const b=W_(t,x);return b&&(b.unsubscribe(),x.cancelActive&&Kv(b)),!!b};Vc(m,{withTypes:()=>m});const f=async(x,b,S,j)=>{const N=new AbortController,E=oU(d,N.signal),C=[];try{x.pending.add(N),n(x),await Promise.resolve(x.effect(b,Vc({},S,{getOriginalState:j,condition:(I,T)=>E(I,T).then(Boolean),take:E,delay:yP(N.signal),pause:im(N.signal),extra:i,signal:N.signal,fork:aU(N.signal,C),unsubscribe:x.unsubscribe,subscribe:()=>{t.set(x.id,x)},cancelActiveListeners:()=>{x.pending.forEach((I,T,O)=>{I!==N&&(Pl(I,Hv),O.delete(I))})},cancel:()=>{Pl(N,Hv),x.pending.delete(N)},throwIfCancelled:()=>{Tl(N.signal)}})))}catch(I){I instanceof ap||V_(l,I,{raisedBy:"effect"})}finally{await Promise.all(C),Pl(N,sU),s(x),x.pending.delete(N)}},p=lU(t,r);return{middleware:x=>b=>S=>{if(!ZA(S))return b(S);if(wP.match(S))return d(S.payload);if(cU.match(S)){p();return}if(bP.match(S))return m(S.payload);let j=x.getState();const N=()=>{if(j===B_)throw new Error(mi(23));return j};let E;try{if(E=b(S),t.size>0){const C=x.getState(),I=Array.from(t.values());for(const T of I){let O=!1;try{O=T.predicate(S,C,j)}catch(V){O=!1,V_(l,V,{raisedBy:"predicate"})}O&&f(T,S,x,N)}}}finally{j=B_}return E},startListening:d,stopListening:m,clearListeners:p}};function mi(e){return`Minified Redux Toolkit error #${e}; visit https://redux-toolkit.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var dU={layoutType:"horizontal",width:0,height:0,margin:{top:5,right:5,bottom:5,left:5},scale:1},jP=Js({name:"chartLayout",initialState:dU,reducers:{setLayout(e,t){e.layoutType=t.payload},setChartSize(e,t){e.width=t.payload.width,e.height=t.payload.height},setMargin(e,t){var r,n,s,i;e.margin.top=(r=t.payload.top)!==null&&r!==void 0?r:0,e.margin.right=(n=t.payload.right)!==null&&n!==void 0?n:0,e.margin.bottom=(s=t.payload.bottom)!==null&&s!==void 0?s:0,e.margin.left=(i=t.payload.left)!==null&&i!==void 0?i:0},setScale(e,t){e.scale=t.payload}}}),{setMargin:fU,setLayout:hU,setChartSize:mU,setScale:pU}=jP.actions,gU=jP.reducer;function SP(e,t,r){return Array.isArray(e)&&e&&t+r!==0?e.slice(t,r+1):e}function q_(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Lc(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?q_(Object(r),!0).forEach(function(n){yU(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):q_(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function yU(e,t,r){return(t=vU(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function vU(e){var t=xU(e,"string");return typeof t=="symbol"?t:t+""}function xU(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Is(e,t,r){return Zn(e)||Zn(t)?r:Ta(t)?Yc(e,t,r):typeof t=="function"?t(e):r}var wU=(e,t,r)=>{if(t&&r){var{width:n,height:s}=r,{align:i,verticalAlign:l,layout:u}=t;if((u==="vertical"||u==="horizontal"&&l==="middle")&&i!=="center"&&$t(e[i]))return Lc(Lc({},e),{},{[i]:e[i]+(n||0)});if((u==="horizontal"||u==="vertical"&&i==="center")&&l!=="middle"&&$t(e[l]))return Lc(Lc({},e),{},{[l]:e[l]+(s||0)})}return e},Kl=(e,t)=>e==="horizontal"&&t==="xAxis"||e==="vertical"&&t==="yAxis"||e==="centric"&&t==="angleAxis"||e==="radial"&&t==="radiusAxis",H_=1e-4,bU=e=>{var t=e.domain();if(!(!t||t.length<=2)){var r=t.length,n=e.range(),s=Math.min(n[0],n[1])-H_,i=Math.max(n[0],n[1])+H_,l=e(t[0]),u=e(t[r-1]);(l<s||l>i||u<s||u>i)&&e.domain([t[0],t[r-1]])}},jU=(e,t)=>{if(!t||t.length!==2||!$t(t[0])||!$t(t[1]))return e;var r=Math.min(t[0],t[1]),n=Math.max(t[0],t[1]),s=[e[0],e[1]];return(!$t(e[0])||e[0]<r)&&(s[0]=r),(!$t(e[1])||e[1]>n)&&(s[1]=n),s[0]>n&&(s[0]=n),s[1]<r&&(s[1]=r),s},SU=e=>{var t=e.length;if(!(t<=0))for(var r=0,n=e[0].length;r<n;++r)for(var s=0,i=0,l=0;l<t;++l){var u=Pa(e[l][r][1])?e[l][r][0]:e[l][r][1];u>=0?(e[l][r][0]=s,e[l][r][1]=s+u,s=e[l][r][1]):(e[l][r][0]=i,e[l][r][1]=i+u,i=e[l][r][1])}},kU=e=>{var t=e.length;if(!(t<=0))for(var r=0,n=e[0].length;r<n;++r)for(var s=0,i=0;i<t;++i){var l=Pa(e[i][r][1])?e[i][r][0]:e[i][r][1];l>=0?(e[i][r][0]=s,e[i][r][1]=s+l,s=e[i][r][1]):(e[i][r][0]=0,e[i][r][1]=0)}},_U={sign:SU,expand:tz,none:Gc,silhouette:rz,wiggle:nz,positive:kU},NU=(e,t,r)=>{var n=_U[r],s=ez().keys(t).value((i,l)=>Number(Is(i,l,0))).order(Mv).offset(n);return s(e)};function CU(e){return e==null?void 0:String(e)}var K_=e=>{var{axis:t,ticks:r,offset:n,bandSize:s,entry:i,index:l}=e;if(t.type==="category")return r[l]?r[l].coordinate+n:null;var u=Is(i,t.dataKey,t.scale.domain()[l]);return Zn(u)?null:t.scale(u)-s/2+n},EU=e=>{var{numericAxis:t}=e,r=t.scale.domain();if(t.type==="number"){var n=Math.min(r[0],r[1]),s=Math.max(r[0],r[1]);return n<=0&&s>=0?0:s<0?s:n}return r[0]},AU=e=>{var t=e.flat(2).filter($t);return[Math.min(...t),Math.max(...t)]},PU=e=>[e[0]===1/0?0:e[0],e[1]===-1/0?0:e[1]],TU=(e,t,r)=>{if(e!=null)return PU(Object.keys(e).reduce((n,s)=>{var i=e[s],{stackedData:l}=i,u=l.reduce((d,m)=>{var f=SP(m,t,r),p=AU(f);return[Math.min(d[0],p[0]),Math.max(d[1],p[1])]},[1/0,-1/0]);return[Math.min(u[0],n[0]),Math.max(u[1],n[1])]},[1/0,-1/0]))},G_=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,Y_=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,am=(e,t,r)=>{if(e&&e.scale&&e.scale.bandwidth){var n=e.scale.bandwidth();if(!r||n>0)return n}if(e&&t&&t.length>=2){for(var s=rp(t,f=>f.coordinate),i=1/0,l=1,u=s.length;l<u;l++){var d=s[l],m=s[l-1];i=Math.min((d.coordinate||0)-(m.coordinate||0),i)}return i===1/0?0:i}return r?void 0:0};function J_(e){var{tooltipEntrySettings:t,dataKey:r,payload:n,value:s,name:i}=e;return Lc(Lc({},t),{},{dataKey:r,payload:n,value:s,name:i})}function kP(e,t){if(e)return String(e);if(typeof t=="string")return t}var OU=(e,t)=>{if(t==="horizontal")return e.chartX;if(t==="vertical")return e.chartY},IU=(e,t)=>t==="centric"?e.angle:e.radius,fo=e=>e.layout.width,ho=e=>e.layout.height,DU=e=>e.layout.scale,_P=e=>e.layout.margin,lp=we(e=>e.cartesianAxis.xAxis,e=>Object.values(e)),cp=we(e=>e.cartesianAxis.yAxis,e=>Object.values(e)),$U="data-recharts-item-index",RU="data-recharts-item-data-key",Gd=60;function X_(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function hh(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?X_(Object(r),!0).forEach(function(n){MU(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):X_(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function MU(e,t,r){return(t=FU(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function FU(e){var t=LU(e,"string");return typeof t=="symbol"?t:t+""}function LU(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var zU=e=>e.brush.height;function UU(e){var t=cp(e);return t.reduce((r,n)=>{if(n.orientation==="left"&&!n.mirror&&!n.hide){var s=typeof n.width=="number"?n.width:Gd;return r+s}return r},0)}function BU(e){var t=cp(e);return t.reduce((r,n)=>{if(n.orientation==="right"&&!n.mirror&&!n.hide){var s=typeof n.width=="number"?n.width:Gd;return r+s}return r},0)}function WU(e){var t=lp(e);return t.reduce((r,n)=>n.orientation==="top"&&!n.mirror&&!n.hide?r+n.height:r,0)}function VU(e){var t=lp(e);return t.reduce((r,n)=>n.orientation==="bottom"&&!n.mirror&&!n.hide?r+n.height:r,0)}var es=we([fo,ho,_P,zU,UU,BU,WU,VU,JA,v8],(e,t,r,n,s,i,l,u,d,m)=>{var f={left:(r.left||0)+s,right:(r.right||0)+i},p={top:(r.top||0)+l,bottom:(r.bottom||0)+u},v=hh(hh({},p),f),x=v.bottom;v.bottom+=n,v=wU(v,d,m);var b=e-v.left-v.right,S=t-v.top-v.bottom;return hh(hh({brushBottom:x},v),{},{width:Math.max(b,0),height:Math.max(S,0)})}),qU=we(es,e=>({x:e.left,y:e.top,width:e.width,height:e.height})),mw=we(fo,ho,(e,t)=>({x:0,y:0,width:e,height:t})),HU=y.createContext(null),yi=()=>y.useContext(HU)!=null,up=e=>e.brush,dp=we([up,es,_P],(e,t,r)=>({height:e.height,x:$t(e.x)?e.x:t.left,y:$t(e.y)?e.y:t.top+t.height+t.brushBottom-((r==null?void 0:r.bottom)||0),width:$t(e.width)?e.width:t.width})),k0={},_0={},N0={},Q_;function KU(){return Q_||(Q_=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r,n,{signal:s,edges:i}={}){let l,u=null;const d=i!=null&&i.includes("leading"),m=i==null||i.includes("trailing"),f=()=>{u!==null&&(r.apply(l,u),l=void 0,u=null)},p=()=>{m&&f(),S()};let v=null;const x=()=>{v!=null&&clearTimeout(v),v=setTimeout(()=>{v=null,p()},n)},b=()=>{v!==null&&(clearTimeout(v),v=null)},S=()=>{b(),l=void 0,u=null},j=()=>{f()},N=function(...E){if(s!=null&&s.aborted)return;l=this,u=E;const C=v==null;x(),d&&C&&f()};return N.schedule=x,N.cancel=S,N.flush=j,s==null||s.addEventListener("abort",S,{once:!0}),N}e.debounce=t})(N0)),N0}var Z_;function GU(){return Z_||(Z_=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=KU();function r(n,s=0,i={}){typeof i!="object"&&(i={});const{leading:l=!1,trailing:u=!0,maxWait:d}=i,m=Array(2);l&&(m[0]="leading"),u&&(m[1]="trailing");let f,p=null;const v=t.debounce(function(...S){f=n.apply(this,S),p=null},s,{edges:m}),x=function(...S){return d!=null&&(p===null&&(p=Date.now()),Date.now()-p>=d)?(f=n.apply(this,S),p=Date.now(),v.cancel(),v.schedule(),f):(v.apply(this,S),f)},b=()=>(v.flush(),f);return x.cancel=v.cancel,x.flush=b,x}e.debounce=r})(_0)),_0}var eN;function YU(){return eN||(eN=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=GU();function r(n,s=0,i={}){const{leading:l=!0,trailing:u=!0}=i;return t.debounce(n,s,{leading:l,maxWait:s,trailing:u})}e.throttle=r})(k0)),k0}var C0,tN;function JU(){return tN||(tN=1,C0=YU().throttle),C0}var XU=JU();const QU=ca(XU);var rN=function(t,r){for(var n=arguments.length,s=new Array(n>2?n-2:0),i=2;i<n;i++)s[i-2]=arguments[i]},NP=(e,t,r)=>{var{width:n="100%",height:s="100%",aspect:i,maxHeight:l}=r,u=no(n)?e:Number(n),d=no(s)?t:Number(s);return i&&i>0&&(u?d=u/i:d&&(u=d*i),l&&d!=null&&d>l&&(d=l)),{calculatedWidth:u,calculatedHeight:d}},ZU={width:0,height:0,overflow:"visible"},eB={width:0,overflowX:"visible"},tB={height:0,overflowY:"visible"},rB={},nB=e=>{var{width:t,height:r}=e,n=no(t),s=no(r);return n&&s?ZU:n?eB:s?tB:rB};function sB(e){var{width:t,height:r,aspect:n}=e,s=t,i=r;return s===void 0&&i===void 0?(s="100%",i="100%"):s===void 0?s=n&&n>0?void 0:"100%":i===void 0&&(i=n&&n>0?void 0:"100%"),{width:s,height:i}}function xn(e){return Number.isFinite(e)}function Yo(e){return typeof e=="number"&&e>0&&Number.isFinite(e)}function Gv(){return Gv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Gv.apply(null,arguments)}function nN(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function sN(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?nN(Object(r),!0).forEach(function(n){iB(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):nN(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function iB(e,t,r){return(t=aB(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function aB(e){var t=oB(e,"string");return typeof t=="symbol"?t:t+""}function oB(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var CP=y.createContext({width:-1,height:-1});function lB(e){return Yo(e.width)&&Yo(e.height)}function EP(e){var{children:t,width:r,height:n}=e,s=y.useMemo(()=>({width:r,height:n}),[r,n]);return lB(s)?y.createElement(CP.Provider,{value:s},t):null}var pw=()=>y.useContext(CP),cB=y.forwardRef((e,t)=>{var{aspect:r,initialDimension:n={width:-1,height:-1},width:s,height:i,minWidth:l=0,minHeight:u,maxHeight:d,children:m,debounce:f=0,id:p,className:v,onResize:x,style:b={}}=e,S=y.useRef(null),j=y.useRef();j.current=x,y.useImperativeHandle(t,()=>S.current);var[N,E]=y.useState({containerWidth:n.width,containerHeight:n.height}),C=y.useCallback((F,L)=>{E(H=>{var le=Math.round(F),K=Math.round(L);return H.containerWidth===le&&H.containerHeight===K?H:{containerWidth:le,containerHeight:K}})},[]);y.useEffect(()=>{if(S.current==null||typeof ResizeObserver>"u")return du;var F=K=>{var ie,{width:q,height:G}=K[0].contentRect;C(q,G),(ie=j.current)===null||ie===void 0||ie.call(j,q,G)};f>0&&(F=QU(F,f,{trailing:!0,leading:!1}));var L=new ResizeObserver(F),{width:H,height:le}=S.current.getBoundingClientRect();return C(H,le),L.observe(S.current),()=>{L.disconnect()}},[C,f]);var{containerWidth:I,containerHeight:T}=N;rN(!r||r>0,"The aspect(%s) must be greater than zero.",r);var{calculatedWidth:O,calculatedHeight:V}=NP(I,T,{width:s,height:i,aspect:r,maxHeight:d});return rN(O!=null&&O>0||V!=null&&V>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,O,V,s,i,l,u,r),y.createElement("div",{id:p?"".concat(p):void 0,className:qr("recharts-responsive-container",v),style:sN(sN({},b),{},{width:s,height:i,minWidth:l,minHeight:u,maxHeight:d}),ref:S},y.createElement("div",{style:nB({width:s,height:i})},y.createElement(EP,{width:O,height:V},m)))}),uB=y.forwardRef((e,t)=>{var r=pw();if(Yo(r.width)&&Yo(r.height))return e.children;var{width:n,height:s}=sB({width:e.width,height:e.height,aspect:e.aspect}),{calculatedWidth:i,calculatedHeight:l}=NP(void 0,void 0,{width:n,height:s,aspect:e.aspect,maxHeight:e.maxHeight});return $t(i)&&$t(l)?y.createElement(EP,{width:i,height:l},e.children):y.createElement(cB,Gv({},e,{width:n,height:s,ref:t}))});function AP(e){if(e)return{x:e.x,y:e.y,upperWidth:"upperWidth"in e?e.upperWidth:e.width,lowerWidth:"lowerWidth"in e?e.lowerWidth:e.width,width:e.width,height:e.height}}var fp=()=>{var e,t=yi(),r=Pt(qU),n=Pt(dp),s=(e=Pt(up))===null||e===void 0?void 0:e.padding;return!t||!n||!s?r:{width:n.width-s.left-s.right,height:n.height-s.top-s.bottom,x:s.left,y:s.top}},dB={top:0,bottom:0,left:0,right:0,width:0,height:0,brushBottom:0},fB=()=>{var e;return(e=Pt(es))!==null&&e!==void 0?e:dB},hB=()=>Pt(fo),mB=()=>Pt(ho),br=e=>e.layout.layoutType,hp=()=>Pt(br),pB=()=>{var e=hp();return e!==void 0},mp=e=>{var t=wn(),r=yi(),{width:n,height:s}=e,i=pw(),l=n,u=s;return i&&(l=i.width>0?i.width:n,u=i.height>0?i.height:s),y.useEffect(()=>{!r&&Yo(l)&&Yo(u)&&t(mU({width:l,height:u}))},[t,r,l,u]),null},gB={settings:{layout:"horizontal",align:"center",verticalAlign:"middle",itemSorter:"value"},size:{width:0,height:0},payload:[]},PP=Js({name:"legend",initialState:gB,reducers:{setLegendSize(e,t){e.size.width=t.payload.width,e.size.height=t.payload.height},setLegendSettings(e,t){e.settings.align=t.payload.align,e.settings.layout=t.payload.layout,e.settings.verticalAlign=t.payload.verticalAlign,e.settings.itemSorter=t.payload.itemSorter},addLegendPayload:{reducer(e,t){e.payload.push(t.payload)},prepare:Un()},removeLegendPayload:{reducer(e,t){var r=Xa(e).payload.indexOf(t.payload);r>-1&&e.payload.splice(r,1)},prepare:Un()}}}),{setLegendSize:Eee,setLegendSettings:Aee,addLegendPayload:yB,removeLegendPayload:vB}=PP.actions,xB=PP.reducer;function Yv(){return Yv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Yv.apply(null,arguments)}function iN(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function E0(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?iN(Object(r),!0).forEach(function(n){wB(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):iN(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function wB(e,t,r){return(t=bB(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function bB(e){var t=jB(e,"string");return typeof t=="symbol"?t:t+""}function jB(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function SB(e){return Array.isArray(e)&&Ta(e[0])&&Ta(e[1])?e.join(" ~ "):e}var kB=e=>{var{separator:t=" : ",contentStyle:r={},itemStyle:n={},labelStyle:s={},payload:i,formatter:l,itemSorter:u,wrapperClassName:d,labelClassName:m,label:f,labelFormatter:p,accessibilityLayer:v=!1}=e,x=()=>{if(i&&i.length){var T={padding:0,margin:0},O=(u?rp(i,u):i).map((V,F)=>{if(V.type==="none")return null;var L=V.formatter||l||SB,{value:H,name:le}=V,K=H,ie=le;if(L){var q=L(H,le,V,F,i);if(Array.isArray(q))[K,ie]=q;else if(q!=null)K=q;else return null}var G=E0({display:"block",paddingTop:4,paddingBottom:4,color:V.color||"#000"},n);return y.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(F),style:G},Ta(ie)?y.createElement("span",{className:"recharts-tooltip-item-name"},ie):null,Ta(ie)?y.createElement("span",{className:"recharts-tooltip-item-separator"},t):null,y.createElement("span",{className:"recharts-tooltip-item-value"},K),y.createElement("span",{className:"recharts-tooltip-item-unit"},V.unit||""))});return y.createElement("ul",{className:"recharts-tooltip-item-list",style:T},O)}return null},b=E0({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},r),S=E0({margin:0},s),j=!Zn(f),N=j?f:"",E=qr("recharts-default-tooltip",d),C=qr("recharts-tooltip-label",m);j&&p&&i!==void 0&&i!==null&&(N=p(f,i));var I=v?{role:"status","aria-live":"assertive"}:{};return y.createElement("div",Yv({className:E,style:b},I),y.createElement("p",{className:C,style:S},y.isValidElement(N)?N:"".concat(N)),x())},Xu="recharts-tooltip-wrapper",_B={visibility:"hidden"};function NB(e){var{coordinate:t,translateX:r,translateY:n}=e;return qr(Xu,{["".concat(Xu,"-right")]:$t(r)&&t&&$t(t.x)&&r>=t.x,["".concat(Xu,"-left")]:$t(r)&&t&&$t(t.x)&&r<t.x,["".concat(Xu,"-bottom")]:$t(n)&&t&&$t(t.y)&&n>=t.y,["".concat(Xu,"-top")]:$t(n)&&t&&$t(t.y)&&n<t.y})}function aN(e){var{allowEscapeViewBox:t,coordinate:r,key:n,offsetTopLeft:s,position:i,reverseDirection:l,tooltipDimension:u,viewBox:d,viewBoxDimension:m}=e;if(i&&$t(i[n]))return i[n];var f=r[n]-u-(s>0?s:0),p=r[n]+s;if(t[n])return l[n]?f:p;var v=d[n];if(v==null)return 0;if(l[n]){var x=f,b=v;return x<b?Math.max(p,v):Math.max(f,v)}if(m==null)return 0;var S=p+u,j=v+m;return S>j?Math.max(f,v):Math.max(p,v)}function CB(e){var{translateX:t,translateY:r,useTranslate3d:n}=e;return{transform:n?"translate3d(".concat(t,"px, ").concat(r,"px, 0)"):"translate(".concat(t,"px, ").concat(r,"px)")}}function EB(e){var{allowEscapeViewBox:t,coordinate:r,offsetTopLeft:n,position:s,reverseDirection:i,tooltipBox:l,useTranslate3d:u,viewBox:d}=e,m,f,p;return l.height>0&&l.width>0&&r?(f=aN({allowEscapeViewBox:t,coordinate:r,key:"x",offsetTopLeft:n,position:s,reverseDirection:i,tooltipDimension:l.width,viewBox:d,viewBoxDimension:d.width}),p=aN({allowEscapeViewBox:t,coordinate:r,key:"y",offsetTopLeft:n,position:s,reverseDirection:i,tooltipDimension:l.height,viewBox:d,viewBoxDimension:d.height}),m=CB({translateX:f,translateY:p,useTranslate3d:u})):m=_B,{cssProperties:m,cssClasses:NB({translateX:f,translateY:p,coordinate:r})}}function oN(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function mh(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?oN(Object(r),!0).forEach(function(n){Jv(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):oN(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Jv(e,t,r){return(t=AB(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function AB(e){var t=PB(e,"string");return typeof t=="symbol"?t:t+""}function PB(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class TB extends y.PureComponent{constructor(){super(...arguments),Jv(this,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0}}),Jv(this,"handleKeyDown",t=>{if(t.key==="Escape"){var r,n,s,i;this.setState({dismissed:!0,dismissedAtCoordinate:{x:(r=(n=this.props.coordinate)===null||n===void 0?void 0:n.x)!==null&&r!==void 0?r:0,y:(s=(i=this.props.coordinate)===null||i===void 0?void 0:i.y)!==null&&s!==void 0?s:0}})}})}componentDidMount(){document.addEventListener("keydown",this.handleKeyDown)}componentWillUnmount(){document.removeEventListener("keydown",this.handleKeyDown)}componentDidUpdate(){var t,r;this.state.dismissed&&(((t=this.props.coordinate)===null||t===void 0?void 0:t.x)!==this.state.dismissedAtCoordinate.x||((r=this.props.coordinate)===null||r===void 0?void 0:r.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}render(){var{active:t,allowEscapeViewBox:r,animationDuration:n,animationEasing:s,children:i,coordinate:l,hasPayload:u,isAnimationActive:d,offset:m,position:f,reverseDirection:p,useTranslate3d:v,viewBox:x,wrapperStyle:b,lastBoundingBox:S,innerRef:j,hasPortalFromProps:N}=this.props,{cssClasses:E,cssProperties:C}=EB({allowEscapeViewBox:r,coordinate:l,offsetTopLeft:m,position:f,reverseDirection:p,tooltipBox:{height:S.height,width:S.width},useTranslate3d:v,viewBox:x}),I=N?{}:mh(mh({transition:d&&t?"transform ".concat(n,"ms ").concat(s):void 0},C),{},{pointerEvents:"none",visibility:!this.state.dismissed&&t&&u?"visible":"hidden",position:"absolute",top:0,left:0}),T=mh(mh({},I),{},{visibility:!this.state.dismissed&&t&&u?"visible":"hidden"},b);return y.createElement("div",{xmlns:"http://www.w3.org/1999/xhtml",tabIndex:-1,className:E,style:T,ref:j},i)}}var OB=()=>!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout),fu={devToolsEnabled:!1,isSsr:OB()},TP=()=>{var e;return(e=Pt(t=>t.rootProps.accessibilityLayer))!==null&&e!==void 0?e:!0};function Xv(){return Xv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Xv.apply(null,arguments)}function lN(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function cN(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?lN(Object(r),!0).forEach(function(n){IB(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):lN(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function IB(e,t,r){return(t=DB(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function DB(e){var t=$B(e,"string");return typeof t=="symbol"?t:t+""}function $B(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var uN={curveBasisClosed:WL,curveBasisOpen:VL,curveBasis:BL,curveBumpX:EL,curveBumpY:AL,curveLinearClosed:qL,curveLinear:ep,curveMonotoneX:HL,curveMonotoneY:KL,curveNatural:GL,curveStep:YL,curveStepAfter:XL,curveStepBefore:JL},om=e=>xn(e.x)&&xn(e.y),dN=e=>e.base!=null&&om(e.base)&&om(e),Qu=e=>e.x,Zu=e=>e.y,RB=(e,t)=>{if(typeof e=="function")return e;var r="curve".concat(qd(e));return(r==="curveMonotone"||r==="curveBump")&&t?uN["".concat(r).concat(t==="vertical"?"Y":"X")]:uN[r]||ep},MB=e=>{var{type:t="linear",points:r=[],baseLine:n,layout:s,connectNulls:i=!1}=e,l=RB(t,s),u=i?r.filter(om):r,d;if(Array.isArray(n)){var m=r.map((x,b)=>cN(cN({},x),{},{base:n[b]}));s==="vertical"?d=oh().y(Zu).x1(Qu).x0(x=>x.base.x):d=oh().x(Qu).y1(Zu).y0(x=>x.base.y);var f=d.defined(dN).curve(l),p=i?m.filter(dN):m;return f(p)}s==="vertical"&&$t(n)?d=oh().y(Zu).x1(Qu).x0(n):$t(n)?d=oh().x(Qu).y1(Zu).y0(n):d=jA().x(Qu).y(Zu);var v=d.defined(om).curve(l);return v(u)},OP=e=>{var{className:t,points:r,path:n,pathRef:s}=e;if((!r||!r.length)&&!n)return null;var i=r&&r.length?MB(e):n;return y.createElement("path",Xv({},Go(e),bz(e),{className:qr("recharts-curve",t),d:i===null?void 0:i,ref:s}))},FB=["x","y","top","left","width","height","className"];function Qv(){return Qv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Qv.apply(null,arguments)}function fN(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function LB(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?fN(Object(r),!0).forEach(function(n){zB(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):fN(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function zB(e,t,r){return(t=UB(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function UB(e){var t=BB(e,"string");return typeof t=="symbol"?t:t+""}function BB(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function WB(e,t){if(e==null)return{};var r,n,s=VB(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function VB(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var qB=(e,t,r,n,s,i)=>"M".concat(e,",").concat(s,"v").concat(n,"M").concat(i,",").concat(t,"h").concat(r),HB=e=>{var{x:t=0,y:r=0,top:n=0,left:s=0,width:i=0,height:l=0,className:u}=e,d=WB(e,FB),m=LB({x:t,y:r,top:n,left:s,width:i,height:l},d);return!$t(t)||!$t(r)||!$t(i)||!$t(l)||!$t(n)||!$t(s)?null:y.createElement("path",Qv({},Ii(m),{className:qr("recharts-cross",u),d:qB(t,r,i,l,n,s)}))};function KB(e,t,r,n){var s=n/2;return{stroke:"none",fill:"#ccc",x:e==="horizontal"?t.x-s:r.left+.5,y:e==="horizontal"?r.top+.5:t.y-s,width:e==="horizontal"?n:r.width-1,height:e==="horizontal"?r.height-1:n}}function hN(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function mN(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?hN(Object(r),!0).forEach(function(n){GB(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):hN(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function GB(e,t,r){return(t=YB(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function YB(e){var t=JB(e,"string");return typeof t=="symbol"?t:t+""}function JB(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var XB=e=>e.replace(/([A-Z])/g,t=>"-".concat(t.toLowerCase())),IP=(e,t,r)=>e.map(n=>"".concat(XB(n)," ").concat(t,"ms ").concat(r)).join(","),QB=(e,t)=>[Object.keys(e),Object.keys(t)].reduce((r,n)=>r.filter(s=>n.includes(s))),Od=(e,t)=>Object.keys(t).reduce((r,n)=>mN(mN({},r),{},{[n]:e(n,t[n])}),{});function pN(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function zn(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?pN(Object(r),!0).forEach(function(n){ZB(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):pN(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function ZB(e,t,r){return(t=e7(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function e7(e){var t=t7(e,"string");return typeof t=="symbol"?t:t+""}function t7(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var lm=(e,t,r)=>e+(t-e)*r,Zv=e=>{var{from:t,to:r}=e;return t!==r},DP=(e,t,r)=>{var n=Od((s,i)=>{if(Zv(i)){var[l,u]=e(i.from,i.to,i.velocity);return zn(zn({},i),{},{from:l,velocity:u})}return i},t);return r<1?Od((s,i)=>Zv(i)?zn(zn({},i),{},{velocity:lm(i.velocity,n[s].velocity,r),from:lm(i.from,n[s].from,r)}):i,t):DP(e,n,r-1)};function r7(e,t,r,n,s,i){var l,u=n.reduce((v,x)=>zn(zn({},v),{},{[x]:{from:e[x],velocity:0,to:t[x]}}),{}),d=()=>Od((v,x)=>x.from,u),m=()=>!Object.values(u).filter(Zv).length,f=null,p=v=>{l||(l=v);var x=v-l,b=x/r.dt;u=DP(r,u,b),s(zn(zn(zn({},e),t),d())),l=v,m()||(f=i.setTimeout(p))};return()=>(f=i.setTimeout(p),()=>{var v;(v=f)===null||v===void 0||v()})}function n7(e,t,r,n,s,i,l){var u=null,d=s.reduce((p,v)=>zn(zn({},p),{},{[v]:[e[v],t[v]]}),{}),m,f=p=>{m||(m=p);var v=(p-m)/n,x=Od((S,j)=>lm(...j,r(v)),d);if(i(zn(zn(zn({},e),t),x)),v<1)u=l.setTimeout(f);else{var b=Od((S,j)=>lm(...j,r(1)),d);i(zn(zn(zn({},e),t),b))}};return()=>(u=l.setTimeout(f),()=>{var p;(p=u)===null||p===void 0||p()})}const s7=(e,t,r,n,s,i)=>{var l=QB(e,t);return r==null?()=>(s(zn(zn({},e),t)),()=>{}):r.isStepper===!0?r7(e,t,r,l,s,i):n7(e,t,r,n,l,s,i)};var cm=1e-4,$P=(e,t)=>[0,3*e,3*t-6*e,3*e-3*t+1],RP=(e,t)=>e.map((r,n)=>r*t**n).reduce((r,n)=>r+n),gN=(e,t)=>r=>{var n=$P(e,t);return RP(n,r)},i7=(e,t)=>r=>{var n=$P(e,t),s=[...n.map((i,l)=>i*l).slice(1),0];return RP(s,r)},a7=function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];if(r.length===1)switch(r[0]){case"linear":return[0,0,1,1];case"ease":return[.25,.1,.25,1];case"ease-in":return[.42,0,1,1];case"ease-out":return[.42,0,.58,1];case"ease-in-out":return[0,0,.58,1];default:{var s,i=r[0].split("(");if(i[0]==="cubic-bezier"&&((s=i[1])===null||s===void 0?void 0:s.split(")")[0].split(",").length)===4){var l=i[1].split(")")[0].split(",").map(u=>parseFloat(u));return[l[0],l[1],l[2],l[3]]}}}return r.length===4?r:[0,0,1,1]},o7=(e,t,r,n)=>{var s=gN(e,r),i=gN(t,n),l=i7(e,r),u=m=>m>1?1:m<0?0:m,d=m=>{for(var f=m>1?1:m,p=f,v=0;v<8;++v){var x=s(p)-f,b=l(p);if(Math.abs(x-f)<cm||b<cm)return i(p);p=u(p-x/b)}return i(p)};return d.isStepper=!1,d},yN=function(){return o7(...a7(...arguments))},l7=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},{stiff:r=100,damping:n=8,dt:s=17}=t,i=(l,u,d)=>{var m=-(l-u)*r,f=d*n,p=d+(m-f)*s/1e3,v=d*s/1e3+l;return Math.abs(v-u)<cm&&Math.abs(p)<cm?[u,0]:[v,p]};return i.isStepper=!0,i.dt=s,i},c7=e=>{if(typeof e=="string")switch(e){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return yN(e);case"spring":return l7();default:if(e.split("(")[0]==="cubic-bezier")return yN(e)}return typeof e=="function"?e:null};function u7(e){var t,r=()=>null,n=!1,s=null,i=l=>{if(!n){if(Array.isArray(l)){if(!l.length)return;var u=l,[d,...m]=u;if(typeof d=="number"){s=e.setTimeout(i.bind(null,m),d);return}i(d),s=e.setTimeout(i.bind(null,m));return}typeof l=="string"&&(t=l,r(t)),typeof l=="object"&&(t=l,r(t)),typeof l=="function"&&l()}};return{stop:()=>{n=!0},start:l=>{n=!1,s&&(s(),s=null),i(l)},subscribe:l=>(r=l,()=>{r=()=>null}),getTimeoutController:()=>e}}class d7{setTimeout(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=performance.now(),s=null,i=l=>{l-n>=r?t(l):typeof requestAnimationFrame=="function"&&(s=requestAnimationFrame(i))};return s=requestAnimationFrame(i),()=>{s!=null&&cancelAnimationFrame(s)}}}function f7(){return u7(new d7)}var h7=y.createContext(f7);function m7(e,t){var r=y.useContext(h7);return y.useMemo(()=>t??r(e),[e,t,r])}var p7={begin:0,duration:1e3,easing:"ease",isActive:!0,canBegin:!0,onAnimationEnd:()=>{},onAnimationStart:()=>{}},vN={t:0},A0={t:1};function gw(e){var t=Ri(e,p7),{isActive:r,canBegin:n,duration:s,easing:i,begin:l,onAnimationEnd:u,onAnimationStart:d,children:m}=t,f=m7(t.animationId,t.animationManager),[p,v]=y.useState(r?vN:A0),x=y.useRef(null);return y.useEffect(()=>{r||v(A0)},[r]),y.useEffect(()=>{if(!r||!n)return du;var b=s7(vN,A0,c7(i),s,v,f.getTimeoutController()),S=()=>{x.current=b()};return f.start([d,l,S,s,u]),()=>{f.stop(),x.current&&x.current(),u()}},[r,n,s,i,l,d,u,f]),m(p.t)}function yw(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"animation-",r=y.useRef(Ed(t)),n=y.useRef(e);return n.current!==e&&(r.current=Ed(t),n.current=e),r.current}var g7=["radius"],y7=["radius"];function xN(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function wN(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?xN(Object(r),!0).forEach(function(n){v7(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):xN(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function v7(e,t,r){return(t=x7(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function x7(e){var t=w7(e,"string");return typeof t=="symbol"?t:t+""}function w7(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function um(){return um=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},um.apply(null,arguments)}function bN(e,t){if(e==null)return{};var r,n,s=b7(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function b7(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var jN=(e,t,r,n,s)=>{var i=Math.min(Math.abs(r)/2,Math.abs(n)/2),l=n>=0?1:-1,u=r>=0?1:-1,d=n>=0&&r>=0||n<0&&r<0?1:0,m;if(i>0&&s instanceof Array){for(var f=[0,0,0,0],p=0,v=4;p<v;p++)f[p]=s[p]>i?i:s[p];m="M".concat(e,",").concat(t+l*f[0]),f[0]>0&&(m+="A ".concat(f[0],",").concat(f[0],",0,0,").concat(d,",").concat(e+u*f[0],",").concat(t)),m+="L ".concat(e+r-u*f[1],",").concat(t),f[1]>0&&(m+="A ".concat(f[1],",").concat(f[1],",0,0,").concat(d,`,
        `).concat(e+r,",").concat(t+l*f[1])),m+="L ".concat(e+r,",").concat(t+n-l*f[2]),f[2]>0&&(m+="A ".concat(f[2],",").concat(f[2],",0,0,").concat(d,`,
        `).concat(e+r-u*f[2],",").concat(t+n)),m+="L ".concat(e+u*f[3],",").concat(t+n),f[3]>0&&(m+="A ".concat(f[3],",").concat(f[3],",0,0,").concat(d,`,
        `).concat(e,",").concat(t+n-l*f[3])),m+="Z"}else if(i>0&&s===+s&&s>0){var x=Math.min(i,s);m="M ".concat(e,",").concat(t+l*x,`
            A `).concat(x,",").concat(x,",0,0,").concat(d,",").concat(e+u*x,",").concat(t,`
            L `).concat(e+r-u*x,",").concat(t,`
            A `).concat(x,",").concat(x,",0,0,").concat(d,",").concat(e+r,",").concat(t+l*x,`
            L `).concat(e+r,",").concat(t+n-l*x,`
            A `).concat(x,",").concat(x,",0,0,").concat(d,",").concat(e+r-u*x,",").concat(t+n,`
            L `).concat(e+u*x,",").concat(t+n,`
            A `).concat(x,",").concat(x,",0,0,").concat(d,",").concat(e,",").concat(t+n-l*x," Z")}else m="M ".concat(e,",").concat(t," h ").concat(r," v ").concat(n," h ").concat(-r," Z");return m},SN={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},MP=e=>{var t=Ri(e,SN),r=y.useRef(null),[n,s]=y.useState(-1);y.useEffect(()=>{if(r.current&&r.current.getTotalLength)try{var M=r.current.getTotalLength();M&&s(M)}catch{}},[]);var{x:i,y:l,width:u,height:d,radius:m,className:f}=t,{animationEasing:p,animationDuration:v,animationBegin:x,isAnimationActive:b,isUpdateAnimationActive:S}=t,j=y.useRef(u),N=y.useRef(d),E=y.useRef(i),C=y.useRef(l),I=y.useMemo(()=>({x:i,y:l,width:u,height:d,radius:m}),[i,l,u,d,m]),T=yw(I,"rectangle-");if(i!==+i||l!==+l||u!==+u||d!==+d||u===0||d===0)return null;var O=qr("recharts-rectangle",f);if(!S){var V=Ii(t),{radius:F}=V,L=bN(V,g7);return y.createElement("path",um({},L,{radius:typeof m=="number"?m:void 0,className:O,d:jN(i,l,u,d,m)}))}var H=j.current,le=N.current,K=E.current,ie=C.current,q="0px ".concat(n===-1?1:n,"px"),G="".concat(n,"px 0px"),ve=IP(["strokeDasharray"],v,typeof p=="string"?p:SN.animationEasing);return y.createElement(gw,{animationId:T,key:T,canBegin:n>0,duration:v,easing:p,isActive:S,begin:x},M=>{var Y=hs(H,u,M),ce=hs(le,d,M),he=hs(K,i,M),U=hs(ie,l,M);r.current&&(j.current=Y,N.current=ce,E.current=he,C.current=U);var re;b?M>0?re={transition:ve,strokeDasharray:G}:re={strokeDasharray:q}:re={strokeDasharray:G};var pe=Ii(t),{radius:$e}=pe,de=bN(pe,y7);return y.createElement("path",um({},de,{radius:typeof m=="number"?m:void 0,className:O,d:jN(he,U,Y,ce,m),ref:r,style:wN(wN({},re),t.style)}))})};function kN(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function _N(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?kN(Object(r),!0).forEach(function(n){j7(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):kN(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function j7(e,t,r){return(t=S7(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function S7(e){var t=k7(e,"string");return typeof t=="symbol"?t:t+""}function k7(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var dm=Math.PI/180,_7=e=>e*180/Math.PI,ms=(e,t,r,n)=>({x:e+Math.cos(-dm*n)*r,y:t+Math.sin(-dm*n)*r}),N7=function(t,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{top:0,right:0,bottom:0,left:0};return Math.min(Math.abs(t-(n.left||0)-(n.right||0)),Math.abs(r-(n.top||0)-(n.bottom||0)))/2},C7=(e,t)=>{var{x:r,y:n}=e,{x:s,y:i}=t;return Math.sqrt((r-s)**2+(n-i)**2)},E7=(e,t)=>{var{x:r,y:n}=e,{cx:s,cy:i}=t,l=C7({x:r,y:n},{x:s,y:i});if(l<=0)return{radius:l,angle:0};var u=(r-s)/l,d=Math.acos(u);return n>i&&(d=2*Math.PI-d),{radius:l,angle:_7(d),angleInRadian:d}},A7=e=>{var{startAngle:t,endAngle:r}=e,n=Math.floor(t/360),s=Math.floor(r/360),i=Math.min(n,s);return{startAngle:t-i*360,endAngle:r-i*360}},P7=(e,t)=>{var{startAngle:r,endAngle:n}=t,s=Math.floor(r/360),i=Math.floor(n/360),l=Math.min(s,i);return e+l*360},T7=(e,t)=>{var{chartX:r,chartY:n}=e,{radius:s,angle:i}=E7({x:r,y:n},t),{innerRadius:l,outerRadius:u}=t;if(s<l||s>u||s===0)return null;var{startAngle:d,endAngle:m}=A7(t),f=i,p;if(d<=m){for(;f>m;)f-=360;for(;f<d;)f+=360;p=f>=d&&f<=m}else{for(;f>d;)f-=360;for(;f<m;)f+=360;p=f>=m&&f<=d}return p?_N(_N({},t),{},{radius:s,angle:P7(f,t)}):null};function FP(e){var{cx:t,cy:r,radius:n,startAngle:s,endAngle:i}=e,l=ms(t,r,n,s),u=ms(t,r,n,i);return{points:[l,u],cx:t,cy:r,radius:n,startAngle:s,endAngle:i}}function ex(){return ex=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},ex.apply(null,arguments)}var O7=(e,t)=>{var r=fi(t-e),n=Math.min(Math.abs(t-e),359.999);return r*n},ph=e=>{var{cx:t,cy:r,radius:n,angle:s,sign:i,isExternal:l,cornerRadius:u,cornerIsExternal:d}=e,m=u*(l?1:-1)+n,f=Math.asin(u/m)/dm,p=d?s:s+i*f,v=ms(t,r,m,p),x=ms(t,r,n,p),b=d?s-i*f:s,S=ms(t,r,m*Math.cos(f*dm),b);return{center:v,circleTangency:x,lineTangency:S,theta:f}},LP=e=>{var{cx:t,cy:r,innerRadius:n,outerRadius:s,startAngle:i,endAngle:l}=e,u=O7(i,l),d=i+u,m=ms(t,r,s,i),f=ms(t,r,s,d),p="M ".concat(m.x,",").concat(m.y,`
    A `).concat(s,",").concat(s,`,0,
    `).concat(+(Math.abs(u)>180),",").concat(+(i>d),`,
    `).concat(f.x,",").concat(f.y,`
  `);if(n>0){var v=ms(t,r,n,i),x=ms(t,r,n,d);p+="L ".concat(x.x,",").concat(x.y,`
            A `).concat(n,",").concat(n,`,0,
            `).concat(+(Math.abs(u)>180),",").concat(+(i<=d),`,
            `).concat(v.x,",").concat(v.y," Z")}else p+="L ".concat(t,",").concat(r," Z");return p},I7=e=>{var{cx:t,cy:r,innerRadius:n,outerRadius:s,cornerRadius:i,forceCornerRadius:l,cornerIsExternal:u,startAngle:d,endAngle:m}=e,f=fi(m-d),{circleTangency:p,lineTangency:v,theta:x}=ph({cx:t,cy:r,radius:s,angle:d,sign:f,cornerRadius:i,cornerIsExternal:u}),{circleTangency:b,lineTangency:S,theta:j}=ph({cx:t,cy:r,radius:s,angle:m,sign:-f,cornerRadius:i,cornerIsExternal:u}),N=u?Math.abs(d-m):Math.abs(d-m)-x-j;if(N<0)return l?"M ".concat(v.x,",").concat(v.y,`
        a`).concat(i,",").concat(i,",0,0,1,").concat(i*2,`,0
        a`).concat(i,",").concat(i,",0,0,1,").concat(-i*2,`,0
      `):LP({cx:t,cy:r,innerRadius:n,outerRadius:s,startAngle:d,endAngle:m});var E="M ".concat(v.x,",").concat(v.y,`
    A`).concat(i,",").concat(i,",0,0,").concat(+(f<0),",").concat(p.x,",").concat(p.y,`
    A`).concat(s,",").concat(s,",0,").concat(+(N>180),",").concat(+(f<0),",").concat(b.x,",").concat(b.y,`
    A`).concat(i,",").concat(i,",0,0,").concat(+(f<0),",").concat(S.x,",").concat(S.y,`
  `);if(n>0){var{circleTangency:C,lineTangency:I,theta:T}=ph({cx:t,cy:r,radius:n,angle:d,sign:f,isExternal:!0,cornerRadius:i,cornerIsExternal:u}),{circleTangency:O,lineTangency:V,theta:F}=ph({cx:t,cy:r,radius:n,angle:m,sign:-f,isExternal:!0,cornerRadius:i,cornerIsExternal:u}),L=u?Math.abs(d-m):Math.abs(d-m)-T-F;if(L<0&&i===0)return"".concat(E,"L").concat(t,",").concat(r,"Z");E+="L".concat(V.x,",").concat(V.y,`
      A`).concat(i,",").concat(i,",0,0,").concat(+(f<0),",").concat(O.x,",").concat(O.y,`
      A`).concat(n,",").concat(n,",0,").concat(+(L>180),",").concat(+(f>0),",").concat(C.x,",").concat(C.y,`
      A`).concat(i,",").concat(i,",0,0,").concat(+(f<0),",").concat(I.x,",").concat(I.y,"Z")}else E+="L".concat(t,",").concat(r,"Z");return E},D7={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},zP=e=>{var t=Ri(e,D7),{cx:r,cy:n,innerRadius:s,outerRadius:i,cornerRadius:l,forceCornerRadius:u,cornerIsExternal:d,startAngle:m,endAngle:f,className:p}=t;if(i<s||m===f)return null;var v=qr("recharts-sector",p),x=i-s,b=la(l,x,0,!0),S;return b>0&&Math.abs(m-f)<360?S=I7({cx:r,cy:n,innerRadius:s,outerRadius:i,cornerRadius:Math.min(b,x/2),forceCornerRadius:u,cornerIsExternal:d,startAngle:m,endAngle:f}):S=LP({cx:r,cy:n,innerRadius:s,outerRadius:i,startAngle:m,endAngle:f}),y.createElement("path",ex({},Ii(t),{className:v,d:S}))};function $7(e,t,r){if(e==="horizontal")return[{x:t.x,y:r.top},{x:t.x,y:r.top+r.height}];if(e==="vertical")return[{x:r.left,y:t.y},{x:r.left+r.width,y:t.y}];if(MA(t)){if(e==="centric"){var{cx:n,cy:s,innerRadius:i,outerRadius:l,angle:u}=t,d=ms(n,s,i,u),m=ms(n,s,l,u);return[{x:d.x,y:d.y},{x:m.x,y:m.y}]}return FP(t)}}var P0={},T0={},O0={},NN;function R7(){return NN||(NN=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=GA();function r(n){return t.isSymbol(n)?NaN:Number(n)}e.toNumber=r})(O0)),O0}var CN;function M7(){return CN||(CN=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=R7();function r(n){return n?(n=t.toNumber(n),n===1/0||n===-1/0?(n<0?-1:1)*Number.MAX_VALUE:n===n?n:0):n===0?n:0}e.toFinite=r})(T0)),T0}var EN;function F7(){return EN||(EN=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=YA(),r=M7();function n(s,i,l){l&&typeof l!="number"&&t.isIterateeCall(s,i,l)&&(i=l=void 0),s=r.toFinite(s),i===void 0?(i=s,s=0):i=r.toFinite(i),l=l===void 0?s<i?1:-1:r.toFinite(l);const u=Math.max(Math.ceil((i-s)/(l||1)),0),d=new Array(u);for(let m=0;m<u;m++)d[m]=s,s+=l;return d}e.range=n})(P0)),P0}var I0,AN;function L7(){return AN||(AN=1,I0=F7().range),I0}var z7=L7();const UP=ca(z7);function Ho(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function U7(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function vw(e){let t,r,n;e.length!==2?(t=Ho,r=(u,d)=>Ho(e(u),d),n=(u,d)=>e(u)-d):(t=e===Ho||e===U7?e:B7,r=e,n=e);function s(u,d,m=0,f=u.length){if(m<f){if(t(d,d)!==0)return f;do{const p=m+f>>>1;r(u[p],d)<0?m=p+1:f=p}while(m<f)}return m}function i(u,d,m=0,f=u.length){if(m<f){if(t(d,d)!==0)return f;do{const p=m+f>>>1;r(u[p],d)<=0?m=p+1:f=p}while(m<f)}return m}function l(u,d,m=0,f=u.length){const p=s(u,d,m,f-1);return p>m&&n(u[p-1],d)>-n(u[p],d)?p-1:p}return{left:s,center:l,right:i}}function B7(){return 0}function BP(e){return e===null?NaN:+e}function*W7(e,t){for(let r of e)r!=null&&(r=+r)>=r&&(yield r)}const V7=vw(Ho),Yd=V7.right;vw(BP).center;class PN extends Map{constructor(t,r=K7){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:r}}),t!=null)for(const[n,s]of t)this.set(n,s)}get(t){return super.get(TN(this,t))}has(t){return super.has(TN(this,t))}set(t,r){return super.set(q7(this,t),r)}delete(t){return super.delete(H7(this,t))}}function TN({_intern:e,_key:t},r){const n=t(r);return e.has(n)?e.get(n):r}function q7({_intern:e,_key:t},r){const n=t(r);return e.has(n)?e.get(n):(e.set(n,r),r)}function H7({_intern:e,_key:t},r){const n=t(r);return e.has(n)&&(r=e.get(n),e.delete(n)),r}function K7(e){return e!==null&&typeof e=="object"?e.valueOf():e}function G7(e=Ho){if(e===Ho)return WP;if(typeof e!="function")throw new TypeError("compare is not a function");return(t,r)=>{const n=e(t,r);return n||n===0?n:(e(r,r)===0)-(e(t,t)===0)}}function WP(e,t){return(e==null||!(e>=e))-(t==null||!(t>=t))||(e<t?-1:e>t?1:0)}const Y7=Math.sqrt(50),J7=Math.sqrt(10),X7=Math.sqrt(2);function fm(e,t,r){const n=(t-e)/Math.max(0,r),s=Math.floor(Math.log10(n)),i=n/Math.pow(10,s),l=i>=Y7?10:i>=J7?5:i>=X7?2:1;let u,d,m;return s<0?(m=Math.pow(10,-s)/l,u=Math.round(e*m),d=Math.round(t*m),u/m<e&&++u,d/m>t&&--d,m=-m):(m=Math.pow(10,s)*l,u=Math.round(e/m),d=Math.round(t/m),u*m<e&&++u,d*m>t&&--d),d<u&&.5<=r&&r<2?fm(e,t,r*2):[u,d,m]}function tx(e,t,r){if(t=+t,e=+e,r=+r,!(r>0))return[];if(e===t)return[e];const n=t<e,[s,i,l]=n?fm(t,e,r):fm(e,t,r);if(!(i>=s))return[];const u=i-s+1,d=new Array(u);if(n)if(l<0)for(let m=0;m<u;++m)d[m]=(i-m)/-l;else for(let m=0;m<u;++m)d[m]=(i-m)*l;else if(l<0)for(let m=0;m<u;++m)d[m]=(s+m)/-l;else for(let m=0;m<u;++m)d[m]=(s+m)*l;return d}function rx(e,t,r){return t=+t,e=+e,r=+r,fm(e,t,r)[2]}function nx(e,t,r){t=+t,e=+e,r=+r;const n=t<e,s=n?rx(t,e,r):rx(e,t,r);return(n?-1:1)*(s<0?1/-s:s)}function ON(e,t){let r;for(const n of e)n!=null&&(r<n||r===void 0&&n>=n)&&(r=n);return r}function IN(e,t){let r;for(const n of e)n!=null&&(r>n||r===void 0&&n>=n)&&(r=n);return r}function VP(e,t,r=0,n=1/0,s){if(t=Math.floor(t),r=Math.floor(Math.max(0,r)),n=Math.floor(Math.min(e.length-1,n)),!(r<=t&&t<=n))return e;for(s=s===void 0?WP:G7(s);n>r;){if(n-r>600){const d=n-r+1,m=t-r+1,f=Math.log(d),p=.5*Math.exp(2*f/3),v=.5*Math.sqrt(f*p*(d-p)/d)*(m-d/2<0?-1:1),x=Math.max(r,Math.floor(t-m*p/d+v)),b=Math.min(n,Math.floor(t+(d-m)*p/d+v));VP(e,t,x,b,s)}const i=e[t];let l=r,u=n;for(ed(e,r,t),s(e[n],i)>0&&ed(e,r,n);l<u;){for(ed(e,l,u),++l,--u;s(e[l],i)<0;)++l;for(;s(e[u],i)>0;)--u}s(e[r],i)===0?ed(e,r,u):(++u,ed(e,u,n)),u<=t&&(r=u+1),t<=u&&(n=u-1)}return e}function ed(e,t,r){const n=e[t];e[t]=e[r],e[r]=n}function Q7(e,t,r){if(e=Float64Array.from(W7(e)),!(!(n=e.length)||isNaN(t=+t))){if(t<=0||n<2)return IN(e);if(t>=1)return ON(e);var n,s=(n-1)*t,i=Math.floor(s),l=ON(VP(e,i).subarray(0,i+1)),u=IN(e.subarray(i+1));return l+(u-l)*(s-i)}}function Z7(e,t,r=BP){if(!(!(n=e.length)||isNaN(t=+t))){if(t<=0||n<2)return+r(e[0],0,e);if(t>=1)return+r(e[n-1],n-1,e);var n,s=(n-1)*t,i=Math.floor(s),l=+r(e[i],i,e),u=+r(e[i+1],i+1,e);return l+(u-l)*(s-i)}}function e9(e,t,r){e=+e,t=+t,r=(s=arguments.length)<2?(t=e,e=0,1):s<3?1:+r;for(var n=-1,s=Math.max(0,Math.ceil((t-e)/r))|0,i=new Array(s);++n<s;)i[n]=e+n*r;return i}function Mi(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}function mo(e,t){switch(arguments.length){case 0:break;case 1:{typeof e=="function"?this.interpolator(e):this.range(e);break}default:{this.domain(e),typeof t=="function"?this.interpolator(t):this.range(t);break}}return this}const sx=Symbol("implicit");function xw(){var e=new PN,t=[],r=[],n=sx;function s(i){let l=e.get(i);if(l===void 0){if(n!==sx)return n;e.set(i,l=t.push(i)-1)}return r[l%r.length]}return s.domain=function(i){if(!arguments.length)return t.slice();t=[],e=new PN;for(const l of i)e.has(l)||e.set(l,t.push(l)-1);return s},s.range=function(i){return arguments.length?(r=Array.from(i),s):r.slice()},s.unknown=function(i){return arguments.length?(n=i,s):n},s.copy=function(){return xw(t,r).unknown(n)},Mi.apply(s,arguments),s}function ww(){var e=xw().unknown(void 0),t=e.domain,r=e.range,n=0,s=1,i,l,u=!1,d=0,m=0,f=.5;delete e.unknown;function p(){var v=t().length,x=s<n,b=x?s:n,S=x?n:s;i=(S-b)/Math.max(1,v-d+m*2),u&&(i=Math.floor(i)),b+=(S-b-i*(v-d))*f,l=i*(1-d),u&&(b=Math.round(b),l=Math.round(l));var j=e9(v).map(function(N){return b+i*N});return r(x?j.reverse():j)}return e.domain=function(v){return arguments.length?(t(v),p()):t()},e.range=function(v){return arguments.length?([n,s]=v,n=+n,s=+s,p()):[n,s]},e.rangeRound=function(v){return[n,s]=v,n=+n,s=+s,u=!0,p()},e.bandwidth=function(){return l},e.step=function(){return i},e.round=function(v){return arguments.length?(u=!!v,p()):u},e.padding=function(v){return arguments.length?(d=Math.min(1,m=+v),p()):d},e.paddingInner=function(v){return arguments.length?(d=Math.min(1,v),p()):d},e.paddingOuter=function(v){return arguments.length?(m=+v,p()):m},e.align=function(v){return arguments.length?(f=Math.max(0,Math.min(1,v)),p()):f},e.copy=function(){return ww(t(),[n,s]).round(u).paddingInner(d).paddingOuter(m).align(f)},Mi.apply(p(),arguments)}function qP(e){var t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,delete e.paddingOuter,e.copy=function(){return qP(t())},e}function t9(){return qP(ww.apply(null,arguments).paddingInner(1))}function bw(e,t,r){e.prototype=t.prototype=r,r.constructor=e}function HP(e,t){var r=Object.create(e.prototype);for(var n in t)r[n]=t[n];return r}function Jd(){}var Id=.7,hm=1/Id,qc="\\s*([+-]?\\d+)\\s*",Dd="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Ea="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",r9=/^#([0-9a-f]{3,8})$/,n9=new RegExp(`^rgb\\(${qc},${qc},${qc}\\)$`),s9=new RegExp(`^rgb\\(${Ea},${Ea},${Ea}\\)$`),i9=new RegExp(`^rgba\\(${qc},${qc},${qc},${Dd}\\)$`),a9=new RegExp(`^rgba\\(${Ea},${Ea},${Ea},${Dd}\\)$`),o9=new RegExp(`^hsl\\(${Dd},${Ea},${Ea}\\)$`),l9=new RegExp(`^hsla\\(${Dd},${Ea},${Ea},${Dd}\\)$`),DN={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};bw(Jd,$d,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:$N,formatHex:$N,formatHex8:c9,formatHsl:u9,formatRgb:RN,toString:RN});function $N(){return this.rgb().formatHex()}function c9(){return this.rgb().formatHex8()}function u9(){return KP(this).formatHsl()}function RN(){return this.rgb().formatRgb()}function $d(e){var t,r;return e=(e+"").trim().toLowerCase(),(t=r9.exec(e))?(r=t[1].length,t=parseInt(t[1],16),r===6?MN(t):r===3?new Gs(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):r===8?gh(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):r===4?gh(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=n9.exec(e))?new Gs(t[1],t[2],t[3],1):(t=s9.exec(e))?new Gs(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=i9.exec(e))?gh(t[1],t[2],t[3],t[4]):(t=a9.exec(e))?gh(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=o9.exec(e))?zN(t[1],t[2]/100,t[3]/100,1):(t=l9.exec(e))?zN(t[1],t[2]/100,t[3]/100,t[4]):DN.hasOwnProperty(e)?MN(DN[e]):e==="transparent"?new Gs(NaN,NaN,NaN,0):null}function MN(e){return new Gs(e>>16&255,e>>8&255,e&255,1)}function gh(e,t,r,n){return n<=0&&(e=t=r=NaN),new Gs(e,t,r,n)}function d9(e){return e instanceof Jd||(e=$d(e)),e?(e=e.rgb(),new Gs(e.r,e.g,e.b,e.opacity)):new Gs}function ix(e,t,r,n){return arguments.length===1?d9(e):new Gs(e,t,r,n??1)}function Gs(e,t,r,n){this.r=+e,this.g=+t,this.b=+r,this.opacity=+n}bw(Gs,ix,HP(Jd,{brighter(e){return e=e==null?hm:Math.pow(hm,e),new Gs(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?Id:Math.pow(Id,e),new Gs(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new Gs(Ol(this.r),Ol(this.g),Ol(this.b),mm(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:FN,formatHex:FN,formatHex8:f9,formatRgb:LN,toString:LN}));function FN(){return`#${Cl(this.r)}${Cl(this.g)}${Cl(this.b)}`}function f9(){return`#${Cl(this.r)}${Cl(this.g)}${Cl(this.b)}${Cl((isNaN(this.opacity)?1:this.opacity)*255)}`}function LN(){const e=mm(this.opacity);return`${e===1?"rgb(":"rgba("}${Ol(this.r)}, ${Ol(this.g)}, ${Ol(this.b)}${e===1?")":`, ${e})`}`}function mm(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function Ol(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function Cl(e){return e=Ol(e),(e<16?"0":"")+e.toString(16)}function zN(e,t,r,n){return n<=0?e=t=r=NaN:r<=0||r>=1?e=t=NaN:t<=0&&(e=NaN),new aa(e,t,r,n)}function KP(e){if(e instanceof aa)return new aa(e.h,e.s,e.l,e.opacity);if(e instanceof Jd||(e=$d(e)),!e)return new aa;if(e instanceof aa)return e;e=e.rgb();var t=e.r/255,r=e.g/255,n=e.b/255,s=Math.min(t,r,n),i=Math.max(t,r,n),l=NaN,u=i-s,d=(i+s)/2;return u?(t===i?l=(r-n)/u+(r<n)*6:r===i?l=(n-t)/u+2:l=(t-r)/u+4,u/=d<.5?i+s:2-i-s,l*=60):u=d>0&&d<1?0:l,new aa(l,u,d,e.opacity)}function h9(e,t,r,n){return arguments.length===1?KP(e):new aa(e,t,r,n??1)}function aa(e,t,r,n){this.h=+e,this.s=+t,this.l=+r,this.opacity=+n}bw(aa,h9,HP(Jd,{brighter(e){return e=e==null?hm:Math.pow(hm,e),new aa(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?Id:Math.pow(Id,e),new aa(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,r=this.l,n=r+(r<.5?r:1-r)*t,s=2*r-n;return new Gs(D0(e>=240?e-240:e+120,s,n),D0(e,s,n),D0(e<120?e+240:e-120,s,n),this.opacity)},clamp(){return new aa(UN(this.h),yh(this.s),yh(this.l),mm(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=mm(this.opacity);return`${e===1?"hsl(":"hsla("}${UN(this.h)}, ${yh(this.s)*100}%, ${yh(this.l)*100}%${e===1?")":`, ${e})`}`}}));function UN(e){return e=(e||0)%360,e<0?e+360:e}function yh(e){return Math.max(0,Math.min(1,e||0))}function D0(e,t,r){return(e<60?t+(r-t)*e/60:e<180?r:e<240?t+(r-t)*(240-e)/60:t)*255}const jw=e=>()=>e;function m9(e,t){return function(r){return e+r*t}}function p9(e,t,r){return e=Math.pow(e,r),t=Math.pow(t,r)-e,r=1/r,function(n){return Math.pow(e+n*t,r)}}function g9(e){return(e=+e)==1?GP:function(t,r){return r-t?p9(t,r,e):jw(isNaN(t)?r:t)}}function GP(e,t){var r=t-e;return r?m9(e,r):jw(isNaN(e)?t:e)}const BN=(function e(t){var r=g9(t);function n(s,i){var l=r((s=ix(s)).r,(i=ix(i)).r),u=r(s.g,i.g),d=r(s.b,i.b),m=GP(s.opacity,i.opacity);return function(f){return s.r=l(f),s.g=u(f),s.b=d(f),s.opacity=m(f),s+""}}return n.gamma=e,n})(1);function y9(e,t){t||(t=[]);var r=e?Math.min(t.length,e.length):0,n=t.slice(),s;return function(i){for(s=0;s<r;++s)n[s]=e[s]*(1-i)+t[s]*i;return n}}function v9(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function x9(e,t){var r=t?t.length:0,n=e?Math.min(r,e.length):0,s=new Array(n),i=new Array(r),l;for(l=0;l<n;++l)s[l]=hu(e[l],t[l]);for(;l<r;++l)i[l]=t[l];return function(u){for(l=0;l<n;++l)i[l]=s[l](u);return i}}function w9(e,t){var r=new Date;return e=+e,t=+t,function(n){return r.setTime(e*(1-n)+t*n),r}}function pm(e,t){return e=+e,t=+t,function(r){return e*(1-r)+t*r}}function b9(e,t){var r={},n={},s;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(s in t)s in e?r[s]=hu(e[s],t[s]):n[s]=t[s];return function(i){for(s in r)n[s]=r[s](i);return n}}var ax=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,$0=new RegExp(ax.source,"g");function j9(e){return function(){return e}}function S9(e){return function(t){return e(t)+""}}function k9(e,t){var r=ax.lastIndex=$0.lastIndex=0,n,s,i,l=-1,u=[],d=[];for(e=e+"",t=t+"";(n=ax.exec(e))&&(s=$0.exec(t));)(i=s.index)>r&&(i=t.slice(r,i),u[l]?u[l]+=i:u[++l]=i),(n=n[0])===(s=s[0])?u[l]?u[l]+=s:u[++l]=s:(u[++l]=null,d.push({i:l,x:pm(n,s)})),r=$0.lastIndex;return r<t.length&&(i=t.slice(r),u[l]?u[l]+=i:u[++l]=i),u.length<2?d[0]?S9(d[0].x):j9(t):(t=d.length,function(m){for(var f=0,p;f<t;++f)u[(p=d[f]).i]=p.x(m);return u.join("")})}function hu(e,t){var r=typeof t,n;return t==null||r==="boolean"?jw(t):(r==="number"?pm:r==="string"?(n=$d(t))?(t=n,BN):k9:t instanceof $d?BN:t instanceof Date?w9:v9(t)?y9:Array.isArray(t)?x9:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?b9:pm)(e,t)}function Sw(e,t){return e=+e,t=+t,function(r){return Math.round(e*(1-r)+t*r)}}function _9(e,t){t===void 0&&(t=e,e=hu);for(var r=0,n=t.length-1,s=t[0],i=new Array(n<0?0:n);r<n;)i[r]=e(s,s=t[++r]);return function(l){var u=Math.max(0,Math.min(n-1,Math.floor(l*=n)));return i[u](l-u)}}function N9(e){return function(){return e}}function gm(e){return+e}var WN=[0,1];function Os(e){return e}function ox(e,t){return(t-=e=+e)?function(r){return(r-e)/t}:N9(isNaN(t)?NaN:.5)}function C9(e,t){var r;return e>t&&(r=e,e=t,t=r),function(n){return Math.max(e,Math.min(t,n))}}function E9(e,t,r){var n=e[0],s=e[1],i=t[0],l=t[1];return s<n?(n=ox(s,n),i=r(l,i)):(n=ox(n,s),i=r(i,l)),function(u){return i(n(u))}}function A9(e,t,r){var n=Math.min(e.length,t.length)-1,s=new Array(n),i=new Array(n),l=-1;for(e[n]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++l<n;)s[l]=ox(e[l],e[l+1]),i[l]=r(t[l],t[l+1]);return function(u){var d=Yd(e,u,1,n)-1;return i[d](s[d](u))}}function Xd(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function pp(){var e=WN,t=WN,r=hu,n,s,i,l=Os,u,d,m;function f(){var v=Math.min(e.length,t.length);return l!==Os&&(l=C9(e[0],e[v-1])),u=v>2?A9:E9,d=m=null,p}function p(v){return v==null||isNaN(v=+v)?i:(d||(d=u(e.map(n),t,r)))(n(l(v)))}return p.invert=function(v){return l(s((m||(m=u(t,e.map(n),pm)))(v)))},p.domain=function(v){return arguments.length?(e=Array.from(v,gm),f()):e.slice()},p.range=function(v){return arguments.length?(t=Array.from(v),f()):t.slice()},p.rangeRound=function(v){return t=Array.from(v),r=Sw,f()},p.clamp=function(v){return arguments.length?(l=v?!0:Os,f()):l!==Os},p.interpolate=function(v){return arguments.length?(r=v,f()):r},p.unknown=function(v){return arguments.length?(i=v,p):i},function(v,x){return n=v,s=x,f()}}function kw(){return pp()(Os,Os)}function P9(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function ym(e,t){if((r=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var r,n=e.slice(0,r);return[n.length>1?n[0]+n.slice(2):n,+e.slice(r+1)]}function Jc(e){return e=ym(Math.abs(e)),e?e[1]:NaN}function T9(e,t){return function(r,n){for(var s=r.length,i=[],l=0,u=e[0],d=0;s>0&&u>0&&(d+u+1>n&&(u=Math.max(1,n-d)),i.push(r.substring(s-=u,s+u)),!((d+=u+1)>n));)u=e[l=(l+1)%e.length];return i.reverse().join(t)}}function O9(e){return function(t){return t.replace(/[0-9]/g,function(r){return e[+r]})}}var I9=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Rd(e){if(!(t=I9.exec(e)))throw new Error("invalid format: "+e);var t;return new _w({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}Rd.prototype=_w.prototype;function _w(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}_w.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function D9(e){e:for(var t=e.length,r=1,n=-1,s;r<t;++r)switch(e[r]){case".":n=s=r;break;case"0":n===0&&(n=r),s=r;break;default:if(!+e[r])break e;n>0&&(n=0);break}return n>0?e.slice(0,n)+e.slice(s+1):e}var YP;function $9(e,t){var r=ym(e,t);if(!r)return e+"";var n=r[0],s=r[1],i=s-(YP=Math.max(-8,Math.min(8,Math.floor(s/3)))*3)+1,l=n.length;return i===l?n:i>l?n+new Array(i-l+1).join("0"):i>0?n.slice(0,i)+"."+n.slice(i):"0."+new Array(1-i).join("0")+ym(e,Math.max(0,t+i-1))[0]}function VN(e,t){var r=ym(e,t);if(!r)return e+"";var n=r[0],s=r[1];return s<0?"0."+new Array(-s).join("0")+n:n.length>s+1?n.slice(0,s+1)+"."+n.slice(s+1):n+new Array(s-n.length+2).join("0")}const qN={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:P9,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>VN(e*100,t),r:VN,s:$9,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function HN(e){return e}var KN=Array.prototype.map,GN=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function R9(e){var t=e.grouping===void 0||e.thousands===void 0?HN:T9(KN.call(e.grouping,Number),e.thousands+""),r=e.currency===void 0?"":e.currency[0]+"",n=e.currency===void 0?"":e.currency[1]+"",s=e.decimal===void 0?".":e.decimal+"",i=e.numerals===void 0?HN:O9(KN.call(e.numerals,String)),l=e.percent===void 0?"%":e.percent+"",u=e.minus===void 0?"":e.minus+"",d=e.nan===void 0?"NaN":e.nan+"";function m(p){p=Rd(p);var v=p.fill,x=p.align,b=p.sign,S=p.symbol,j=p.zero,N=p.width,E=p.comma,C=p.precision,I=p.trim,T=p.type;T==="n"?(E=!0,T="g"):qN[T]||(C===void 0&&(C=12),I=!0,T="g"),(j||v==="0"&&x==="=")&&(j=!0,v="0",x="=");var O=S==="$"?r:S==="#"&&/[boxX]/.test(T)?"0"+T.toLowerCase():"",V=S==="$"?n:/[%p]/.test(T)?l:"",F=qN[T],L=/[defgprs%]/.test(T);C=C===void 0?6:/[gprs]/.test(T)?Math.max(1,Math.min(21,C)):Math.max(0,Math.min(20,C));function H(le){var K=O,ie=V,q,G,ve;if(T==="c")ie=F(le)+ie,le="";else{le=+le;var M=le<0||1/le<0;if(le=isNaN(le)?d:F(Math.abs(le),C),I&&(le=D9(le)),M&&+le==0&&b!=="+"&&(M=!1),K=(M?b==="("?b:u:b==="-"||b==="("?"":b)+K,ie=(T==="s"?GN[8+YP/3]:"")+ie+(M&&b==="("?")":""),L){for(q=-1,G=le.length;++q<G;)if(ve=le.charCodeAt(q),48>ve||ve>57){ie=(ve===46?s+le.slice(q+1):le.slice(q))+ie,le=le.slice(0,q);break}}}E&&!j&&(le=t(le,1/0));var Y=K.length+le.length+ie.length,ce=Y<N?new Array(N-Y+1).join(v):"";switch(E&&j&&(le=t(ce+le,ce.length?N-ie.length:1/0),ce=""),x){case"<":le=K+le+ie+ce;break;case"=":le=K+ce+le+ie;break;case"^":le=ce.slice(0,Y=ce.length>>1)+K+le+ie+ce.slice(Y);break;default:le=ce+K+le+ie;break}return i(le)}return H.toString=function(){return p+""},H}function f(p,v){var x=m((p=Rd(p),p.type="f",p)),b=Math.max(-8,Math.min(8,Math.floor(Jc(v)/3)))*3,S=Math.pow(10,-b),j=GN[8+b/3];return function(N){return x(S*N)+j}}return{format:m,formatPrefix:f}}var vh,Nw,JP;M9({thousands:",",grouping:[3],currency:["$",""]});function M9(e){return vh=R9(e),Nw=vh.format,JP=vh.formatPrefix,vh}function F9(e){return Math.max(0,-Jc(Math.abs(e)))}function L9(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(Jc(t)/3)))*3-Jc(Math.abs(e)))}function z9(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,Jc(t)-Jc(e))+1}function XP(e,t,r,n){var s=nx(e,t,r),i;switch(n=Rd(n??",f"),n.type){case"s":{var l=Math.max(Math.abs(e),Math.abs(t));return n.precision==null&&!isNaN(i=L9(s,l))&&(n.precision=i),JP(n,l)}case"":case"e":case"g":case"p":case"r":{n.precision==null&&!isNaN(i=z9(s,Math.max(Math.abs(e),Math.abs(t))))&&(n.precision=i-(n.type==="e"));break}case"f":case"%":{n.precision==null&&!isNaN(i=F9(s))&&(n.precision=i-(n.type==="%")*2);break}}return Nw(n)}function Qo(e){var t=e.domain;return e.ticks=function(r){var n=t();return tx(n[0],n[n.length-1],r??10)},e.tickFormat=function(r,n){var s=t();return XP(s[0],s[s.length-1],r??10,n)},e.nice=function(r){r==null&&(r=10);var n=t(),s=0,i=n.length-1,l=n[s],u=n[i],d,m,f=10;for(u<l&&(m=l,l=u,u=m,m=s,s=i,i=m);f-- >0;){if(m=rx(l,u,r),m===d)return n[s]=l,n[i]=u,t(n);if(m>0)l=Math.floor(l/m)*m,u=Math.ceil(u/m)*m;else if(m<0)l=Math.ceil(l*m)/m,u=Math.floor(u*m)/m;else break;d=m}return e},e}function QP(){var e=kw();return e.copy=function(){return Xd(e,QP())},Mi.apply(e,arguments),Qo(e)}function ZP(e){var t;function r(n){return n==null||isNaN(n=+n)?t:n}return r.invert=r,r.domain=r.range=function(n){return arguments.length?(e=Array.from(n,gm),r):e.slice()},r.unknown=function(n){return arguments.length?(t=n,r):t},r.copy=function(){return ZP(e).unknown(t)},e=arguments.length?Array.from(e,gm):[0,1],Qo(r)}function eT(e,t){e=e.slice();var r=0,n=e.length-1,s=e[r],i=e[n],l;return i<s&&(l=r,r=n,n=l,l=s,s=i,i=l),e[r]=t.floor(s),e[n]=t.ceil(i),e}function YN(e){return Math.log(e)}function JN(e){return Math.exp(e)}function U9(e){return-Math.log(-e)}function B9(e){return-Math.exp(-e)}function W9(e){return isFinite(e)?+("1e"+e):e<0?0:e}function V9(e){return e===10?W9:e===Math.E?Math.exp:t=>Math.pow(e,t)}function q9(e){return e===Math.E?Math.log:e===10&&Math.log10||e===2&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}function XN(e){return(t,r)=>-e(-t,r)}function Cw(e){const t=e(YN,JN),r=t.domain;let n=10,s,i;function l(){return s=q9(n),i=V9(n),r()[0]<0?(s=XN(s),i=XN(i),e(U9,B9)):e(YN,JN),t}return t.base=function(u){return arguments.length?(n=+u,l()):n},t.domain=function(u){return arguments.length?(r(u),l()):r()},t.ticks=u=>{const d=r();let m=d[0],f=d[d.length-1];const p=f<m;p&&([m,f]=[f,m]);let v=s(m),x=s(f),b,S;const j=u==null?10:+u;let N=[];if(!(n%1)&&x-v<j){if(v=Math.floor(v),x=Math.ceil(x),m>0){for(;v<=x;++v)for(b=1;b<n;++b)if(S=v<0?b/i(-v):b*i(v),!(S<m)){if(S>f)break;N.push(S)}}else for(;v<=x;++v)for(b=n-1;b>=1;--b)if(S=v>0?b/i(-v):b*i(v),!(S<m)){if(S>f)break;N.push(S)}N.length*2<j&&(N=tx(m,f,j))}else N=tx(v,x,Math.min(x-v,j)).map(i);return p?N.reverse():N},t.tickFormat=(u,d)=>{if(u==null&&(u=10),d==null&&(d=n===10?"s":","),typeof d!="function"&&(!(n%1)&&(d=Rd(d)).precision==null&&(d.trim=!0),d=Nw(d)),u===1/0)return d;const m=Math.max(1,n*u/t.ticks().length);return f=>{let p=f/i(Math.round(s(f)));return p*n<n-.5&&(p*=n),p<=m?d(f):""}},t.nice=()=>r(eT(r(),{floor:u=>i(Math.floor(s(u))),ceil:u=>i(Math.ceil(s(u)))})),t}function tT(){const e=Cw(pp()).domain([1,10]);return e.copy=()=>Xd(e,tT()).base(e.base()),Mi.apply(e,arguments),e}function QN(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function ZN(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function Ew(e){var t=1,r=e(QN(t),ZN(t));return r.constant=function(n){return arguments.length?e(QN(t=+n),ZN(t)):t},Qo(r)}function rT(){var e=Ew(pp());return e.copy=function(){return Xd(e,rT()).constant(e.constant())},Mi.apply(e,arguments)}function e2(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function H9(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function K9(e){return e<0?-e*e:e*e}function Aw(e){var t=e(Os,Os),r=1;function n(){return r===1?e(Os,Os):r===.5?e(H9,K9):e(e2(r),e2(1/r))}return t.exponent=function(s){return arguments.length?(r=+s,n()):r},Qo(t)}function Pw(){var e=Aw(pp());return e.copy=function(){return Xd(e,Pw()).exponent(e.exponent())},Mi.apply(e,arguments),e}function G9(){return Pw.apply(null,arguments).exponent(.5)}function t2(e){return Math.sign(e)*e*e}function Y9(e){return Math.sign(e)*Math.sqrt(Math.abs(e))}function nT(){var e=kw(),t=[0,1],r=!1,n;function s(i){var l=Y9(e(i));return isNaN(l)?n:r?Math.round(l):l}return s.invert=function(i){return e.invert(t2(i))},s.domain=function(i){return arguments.length?(e.domain(i),s):e.domain()},s.range=function(i){return arguments.length?(e.range((t=Array.from(i,gm)).map(t2)),s):t.slice()},s.rangeRound=function(i){return s.range(i).round(!0)},s.round=function(i){return arguments.length?(r=!!i,s):r},s.clamp=function(i){return arguments.length?(e.clamp(i),s):e.clamp()},s.unknown=function(i){return arguments.length?(n=i,s):n},s.copy=function(){return nT(e.domain(),t).round(r).clamp(e.clamp()).unknown(n)},Mi.apply(s,arguments),Qo(s)}function sT(){var e=[],t=[],r=[],n;function s(){var l=0,u=Math.max(1,t.length);for(r=new Array(u-1);++l<u;)r[l-1]=Z7(e,l/u);return i}function i(l){return l==null||isNaN(l=+l)?n:t[Yd(r,l)]}return i.invertExtent=function(l){var u=t.indexOf(l);return u<0?[NaN,NaN]:[u>0?r[u-1]:e[0],u<r.length?r[u]:e[e.length-1]]},i.domain=function(l){if(!arguments.length)return e.slice();e=[];for(let u of l)u!=null&&!isNaN(u=+u)&&e.push(u);return e.sort(Ho),s()},i.range=function(l){return arguments.length?(t=Array.from(l),s()):t.slice()},i.unknown=function(l){return arguments.length?(n=l,i):n},i.quantiles=function(){return r.slice()},i.copy=function(){return sT().domain(e).range(t).unknown(n)},Mi.apply(i,arguments)}function iT(){var e=0,t=1,r=1,n=[.5],s=[0,1],i;function l(d){return d!=null&&d<=d?s[Yd(n,d,0,r)]:i}function u(){var d=-1;for(n=new Array(r);++d<r;)n[d]=((d+1)*t-(d-r)*e)/(r+1);return l}return l.domain=function(d){return arguments.length?([e,t]=d,e=+e,t=+t,u()):[e,t]},l.range=function(d){return arguments.length?(r=(s=Array.from(d)).length-1,u()):s.slice()},l.invertExtent=function(d){var m=s.indexOf(d);return m<0?[NaN,NaN]:m<1?[e,n[0]]:m>=r?[n[r-1],t]:[n[m-1],n[m]]},l.unknown=function(d){return arguments.length&&(i=d),l},l.thresholds=function(){return n.slice()},l.copy=function(){return iT().domain([e,t]).range(s).unknown(i)},Mi.apply(Qo(l),arguments)}function aT(){var e=[.5],t=[0,1],r,n=1;function s(i){return i!=null&&i<=i?t[Yd(e,i,0,n)]:r}return s.domain=function(i){return arguments.length?(e=Array.from(i),n=Math.min(e.length,t.length-1),s):e.slice()},s.range=function(i){return arguments.length?(t=Array.from(i),n=Math.min(e.length,t.length-1),s):t.slice()},s.invertExtent=function(i){var l=t.indexOf(i);return[e[l-1],e[l]]},s.unknown=function(i){return arguments.length?(r=i,s):r},s.copy=function(){return aT().domain(e).range(t).unknown(r)},Mi.apply(s,arguments)}const R0=new Date,M0=new Date;function Bn(e,t,r,n){function s(i){return e(i=arguments.length===0?new Date:new Date(+i)),i}return s.floor=i=>(e(i=new Date(+i)),i),s.ceil=i=>(e(i=new Date(i-1)),t(i,1),e(i),i),s.round=i=>{const l=s(i),u=s.ceil(i);return i-l<u-i?l:u},s.offset=(i,l)=>(t(i=new Date(+i),l==null?1:Math.floor(l)),i),s.range=(i,l,u)=>{const d=[];if(i=s.ceil(i),u=u==null?1:Math.floor(u),!(i<l)||!(u>0))return d;let m;do d.push(m=new Date(+i)),t(i,u),e(i);while(m<i&&i<l);return d},s.filter=i=>Bn(l=>{if(l>=l)for(;e(l),!i(l);)l.setTime(l-1)},(l,u)=>{if(l>=l)if(u<0)for(;++u<=0;)for(;t(l,-1),!i(l););else for(;--u>=0;)for(;t(l,1),!i(l););}),r&&(s.count=(i,l)=>(R0.setTime(+i),M0.setTime(+l),e(R0),e(M0),Math.floor(r(R0,M0))),s.every=i=>(i=Math.floor(i),!isFinite(i)||!(i>0)?null:i>1?s.filter(n?l=>n(l)%i===0:l=>s.count(0,l)%i===0):s)),s}const vm=Bn(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);vm.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?Bn(t=>{t.setTime(Math.floor(t/e)*e)},(t,r)=>{t.setTime(+t+r*e)},(t,r)=>(r-t)/e):vm);vm.range;const Ga=1e3,Ti=Ga*60,Ya=Ti*60,io=Ya*24,Tw=io*7,r2=io*30,F0=io*365,El=Bn(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*Ga)},(e,t)=>(t-e)/Ga,e=>e.getUTCSeconds());El.range;const Ow=Bn(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*Ga)},(e,t)=>{e.setTime(+e+t*Ti)},(e,t)=>(t-e)/Ti,e=>e.getMinutes());Ow.range;const Iw=Bn(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*Ti)},(e,t)=>(t-e)/Ti,e=>e.getUTCMinutes());Iw.range;const Dw=Bn(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*Ga-e.getMinutes()*Ti)},(e,t)=>{e.setTime(+e+t*Ya)},(e,t)=>(t-e)/Ya,e=>e.getHours());Dw.range;const $w=Bn(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*Ya)},(e,t)=>(t-e)/Ya,e=>e.getUTCHours());$w.range;const Qd=Bn(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*Ti)/io,e=>e.getDate()-1);Qd.range;const gp=Bn(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/io,e=>e.getUTCDate()-1);gp.range;const oT=Bn(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/io,e=>Math.floor(e/io));oT.range;function Gl(e){return Bn(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(t,r)=>{t.setDate(t.getDate()+r*7)},(t,r)=>(r-t-(r.getTimezoneOffset()-t.getTimezoneOffset())*Ti)/Tw)}const yp=Gl(0),xm=Gl(1),J9=Gl(2),X9=Gl(3),Xc=Gl(4),Q9=Gl(5),Z9=Gl(6);yp.range;xm.range;J9.range;X9.range;Xc.range;Q9.range;Z9.range;function Yl(e){return Bn(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(t,r)=>{t.setUTCDate(t.getUTCDate()+r*7)},(t,r)=>(r-t)/Tw)}const vp=Yl(0),wm=Yl(1),eW=Yl(2),tW=Yl(3),Qc=Yl(4),rW=Yl(5),nW=Yl(6);vp.range;wm.range;eW.range;tW.range;Qc.range;rW.range;nW.range;const Rw=Bn(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12,e=>e.getMonth());Rw.range;const Mw=Bn(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth());Mw.range;const ao=Bn(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());ao.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:Bn(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,r)=>{t.setFullYear(t.getFullYear()+r*e)});ao.range;const oo=Bn(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());oo.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:Bn(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,r)=>{t.setUTCFullYear(t.getUTCFullYear()+r*e)});oo.range;function lT(e,t,r,n,s,i){const l=[[El,1,Ga],[El,5,5*Ga],[El,15,15*Ga],[El,30,30*Ga],[i,1,Ti],[i,5,5*Ti],[i,15,15*Ti],[i,30,30*Ti],[s,1,Ya],[s,3,3*Ya],[s,6,6*Ya],[s,12,12*Ya],[n,1,io],[n,2,2*io],[r,1,Tw],[t,1,r2],[t,3,3*r2],[e,1,F0]];function u(m,f,p){const v=f<m;v&&([m,f]=[f,m]);const x=p&&typeof p.range=="function"?p:d(m,f,p),b=x?x.range(m,+f+1):[];return v?b.reverse():b}function d(m,f,p){const v=Math.abs(f-m)/p,x=vw(([,,j])=>j).right(l,v);if(x===l.length)return e.every(nx(m/F0,f/F0,p));if(x===0)return vm.every(Math.max(nx(m,f,p),1));const[b,S]=l[v/l[x-1][2]<l[x][2]/v?x-1:x];return b.every(S)}return[u,d]}const[sW,iW]=lT(oo,Mw,vp,oT,$w,Iw),[aW,oW]=lT(ao,Rw,yp,Qd,Dw,Ow);function L0(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function z0(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function td(e,t,r){return{y:e,m:t,d:r,H:0,M:0,S:0,L:0}}function lW(e){var t=e.dateTime,r=e.date,n=e.time,s=e.periods,i=e.days,l=e.shortDays,u=e.months,d=e.shortMonths,m=rd(s),f=nd(s),p=rd(i),v=nd(i),x=rd(l),b=nd(l),S=rd(u),j=nd(u),N=rd(d),E=nd(d),C={a:M,A:Y,b:ce,B:he,c:null,d:l2,e:l2,f:TW,g:UW,G:WW,H:EW,I:AW,j:PW,L:cT,m:OW,M:IW,p:U,q:re,Q:d2,s:f2,S:DW,u:$W,U:RW,V:MW,w:FW,W:LW,x:null,X:null,y:zW,Y:BW,Z:VW,"%":u2},I={a:pe,A:$e,b:de,B:ke,c:null,d:c2,e:c2,f:GW,g:sV,G:aV,H:qW,I:HW,j:KW,L:dT,m:YW,M:JW,p:Te,q:Ve,Q:d2,s:f2,S:XW,u:QW,U:ZW,V:eV,w:tV,W:rV,x:null,X:null,y:nV,Y:iV,Z:oV,"%":u2},T={a:H,A:le,b:K,B:ie,c:q,d:a2,e:a2,f:kW,g:i2,G:s2,H:o2,I:o2,j:wW,L:SW,m:xW,M:bW,p:L,q:vW,Q:NW,s:CW,S:jW,u:hW,U:mW,V:pW,w:fW,W:gW,x:G,X:ve,y:i2,Y:s2,Z:yW,"%":_W};C.x=O(r,C),C.X=O(n,C),C.c=O(t,C),I.x=O(r,I),I.X=O(n,I),I.c=O(t,I);function O(J,je){return function(fe){var se=[],Ze=-1,Ge=0,Ue=J.length,At,gt,wt;for(fe instanceof Date||(fe=new Date(+fe));++Ze<Ue;)J.charCodeAt(Ze)===37&&(se.push(J.slice(Ge,Ze)),(gt=n2[At=J.charAt(++Ze)])!=null?At=J.charAt(++Ze):gt=At==="e"?" ":"0",(wt=je[At])&&(At=wt(fe,gt)),se.push(At),Ge=Ze+1);return se.push(J.slice(Ge,Ze)),se.join("")}}function V(J,je){return function(fe){var se=td(1900,void 0,1),Ze=F(se,J,fe+="",0),Ge,Ue;if(Ze!=fe.length)return null;if("Q"in se)return new Date(se.Q);if("s"in se)return new Date(se.s*1e3+("L"in se?se.L:0));if(je&&!("Z"in se)&&(se.Z=0),"p"in se&&(se.H=se.H%12+se.p*12),se.m===void 0&&(se.m="q"in se?se.q:0),"V"in se){if(se.V<1||se.V>53)return null;"w"in se||(se.w=1),"Z"in se?(Ge=z0(td(se.y,0,1)),Ue=Ge.getUTCDay(),Ge=Ue>4||Ue===0?wm.ceil(Ge):wm(Ge),Ge=gp.offset(Ge,(se.V-1)*7),se.y=Ge.getUTCFullYear(),se.m=Ge.getUTCMonth(),se.d=Ge.getUTCDate()+(se.w+6)%7):(Ge=L0(td(se.y,0,1)),Ue=Ge.getDay(),Ge=Ue>4||Ue===0?xm.ceil(Ge):xm(Ge),Ge=Qd.offset(Ge,(se.V-1)*7),se.y=Ge.getFullYear(),se.m=Ge.getMonth(),se.d=Ge.getDate()+(se.w+6)%7)}else("W"in se||"U"in se)&&("w"in se||(se.w="u"in se?se.u%7:"W"in se?1:0),Ue="Z"in se?z0(td(se.y,0,1)).getUTCDay():L0(td(se.y,0,1)).getDay(),se.m=0,se.d="W"in se?(se.w+6)%7+se.W*7-(Ue+5)%7:se.w+se.U*7-(Ue+6)%7);return"Z"in se?(se.H+=se.Z/100|0,se.M+=se.Z%100,z0(se)):L0(se)}}function F(J,je,fe,se){for(var Ze=0,Ge=je.length,Ue=fe.length,At,gt;Ze<Ge;){if(se>=Ue)return-1;if(At=je.charCodeAt(Ze++),At===37){if(At=je.charAt(Ze++),gt=T[At in n2?je.charAt(Ze++):At],!gt||(se=gt(J,fe,se))<0)return-1}else if(At!=fe.charCodeAt(se++))return-1}return se}function L(J,je,fe){var se=m.exec(je.slice(fe));return se?(J.p=f.get(se[0].toLowerCase()),fe+se[0].length):-1}function H(J,je,fe){var se=x.exec(je.slice(fe));return se?(J.w=b.get(se[0].toLowerCase()),fe+se[0].length):-1}function le(J,je,fe){var se=p.exec(je.slice(fe));return se?(J.w=v.get(se[0].toLowerCase()),fe+se[0].length):-1}function K(J,je,fe){var se=N.exec(je.slice(fe));return se?(J.m=E.get(se[0].toLowerCase()),fe+se[0].length):-1}function ie(J,je,fe){var se=S.exec(je.slice(fe));return se?(J.m=j.get(se[0].toLowerCase()),fe+se[0].length):-1}function q(J,je,fe){return F(J,t,je,fe)}function G(J,je,fe){return F(J,r,je,fe)}function ve(J,je,fe){return F(J,n,je,fe)}function M(J){return l[J.getDay()]}function Y(J){return i[J.getDay()]}function ce(J){return d[J.getMonth()]}function he(J){return u[J.getMonth()]}function U(J){return s[+(J.getHours()>=12)]}function re(J){return 1+~~(J.getMonth()/3)}function pe(J){return l[J.getUTCDay()]}function $e(J){return i[J.getUTCDay()]}function de(J){return d[J.getUTCMonth()]}function ke(J){return u[J.getUTCMonth()]}function Te(J){return s[+(J.getUTCHours()>=12)]}function Ve(J){return 1+~~(J.getUTCMonth()/3)}return{format:function(J){var je=O(J+="",C);return je.toString=function(){return J},je},parse:function(J){var je=V(J+="",!1);return je.toString=function(){return J},je},utcFormat:function(J){var je=O(J+="",I);return je.toString=function(){return J},je},utcParse:function(J){var je=V(J+="",!0);return je.toString=function(){return J},je}}}var n2={"-":"",_:" ",0:"0"},ts=/^\s*\d+/,cW=/^%/,uW=/[\\^$*+?|[\]().{}]/g;function fr(e,t,r){var n=e<0?"-":"",s=(n?-e:e)+"",i=s.length;return n+(i<r?new Array(r-i+1).join(t)+s:s)}function dW(e){return e.replace(uW,"\\$&")}function rd(e){return new RegExp("^(?:"+e.map(dW).join("|")+")","i")}function nd(e){return new Map(e.map((t,r)=>[t.toLowerCase(),r]))}function fW(e,t,r){var n=ts.exec(t.slice(r,r+1));return n?(e.w=+n[0],r+n[0].length):-1}function hW(e,t,r){var n=ts.exec(t.slice(r,r+1));return n?(e.u=+n[0],r+n[0].length):-1}function mW(e,t,r){var n=ts.exec(t.slice(r,r+2));return n?(e.U=+n[0],r+n[0].length):-1}function pW(e,t,r){var n=ts.exec(t.slice(r,r+2));return n?(e.V=+n[0],r+n[0].length):-1}function gW(e,t,r){var n=ts.exec(t.slice(r,r+2));return n?(e.W=+n[0],r+n[0].length):-1}function s2(e,t,r){var n=ts.exec(t.slice(r,r+4));return n?(e.y=+n[0],r+n[0].length):-1}function i2(e,t,r){var n=ts.exec(t.slice(r,r+2));return n?(e.y=+n[0]+(+n[0]>68?1900:2e3),r+n[0].length):-1}function yW(e,t,r){var n=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(r,r+6));return n?(e.Z=n[1]?0:-(n[2]+(n[3]||"00")),r+n[0].length):-1}function vW(e,t,r){var n=ts.exec(t.slice(r,r+1));return n?(e.q=n[0]*3-3,r+n[0].length):-1}function xW(e,t,r){var n=ts.exec(t.slice(r,r+2));return n?(e.m=n[0]-1,r+n[0].length):-1}function a2(e,t,r){var n=ts.exec(t.slice(r,r+2));return n?(e.d=+n[0],r+n[0].length):-1}function wW(e,t,r){var n=ts.exec(t.slice(r,r+3));return n?(e.m=0,e.d=+n[0],r+n[0].length):-1}function o2(e,t,r){var n=ts.exec(t.slice(r,r+2));return n?(e.H=+n[0],r+n[0].length):-1}function bW(e,t,r){var n=ts.exec(t.slice(r,r+2));return n?(e.M=+n[0],r+n[0].length):-1}function jW(e,t,r){var n=ts.exec(t.slice(r,r+2));return n?(e.S=+n[0],r+n[0].length):-1}function SW(e,t,r){var n=ts.exec(t.slice(r,r+3));return n?(e.L=+n[0],r+n[0].length):-1}function kW(e,t,r){var n=ts.exec(t.slice(r,r+6));return n?(e.L=Math.floor(n[0]/1e3),r+n[0].length):-1}function _W(e,t,r){var n=cW.exec(t.slice(r,r+1));return n?r+n[0].length:-1}function NW(e,t,r){var n=ts.exec(t.slice(r));return n?(e.Q=+n[0],r+n[0].length):-1}function CW(e,t,r){var n=ts.exec(t.slice(r));return n?(e.s=+n[0],r+n[0].length):-1}function l2(e,t){return fr(e.getDate(),t,2)}function EW(e,t){return fr(e.getHours(),t,2)}function AW(e,t){return fr(e.getHours()%12||12,t,2)}function PW(e,t){return fr(1+Qd.count(ao(e),e),t,3)}function cT(e,t){return fr(e.getMilliseconds(),t,3)}function TW(e,t){return cT(e,t)+"000"}function OW(e,t){return fr(e.getMonth()+1,t,2)}function IW(e,t){return fr(e.getMinutes(),t,2)}function DW(e,t){return fr(e.getSeconds(),t,2)}function $W(e){var t=e.getDay();return t===0?7:t}function RW(e,t){return fr(yp.count(ao(e)-1,e),t,2)}function uT(e){var t=e.getDay();return t>=4||t===0?Xc(e):Xc.ceil(e)}function MW(e,t){return e=uT(e),fr(Xc.count(ao(e),e)+(ao(e).getDay()===4),t,2)}function FW(e){return e.getDay()}function LW(e,t){return fr(xm.count(ao(e)-1,e),t,2)}function zW(e,t){return fr(e.getFullYear()%100,t,2)}function UW(e,t){return e=uT(e),fr(e.getFullYear()%100,t,2)}function BW(e,t){return fr(e.getFullYear()%1e4,t,4)}function WW(e,t){var r=e.getDay();return e=r>=4||r===0?Xc(e):Xc.ceil(e),fr(e.getFullYear()%1e4,t,4)}function VW(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+fr(t/60|0,"0",2)+fr(t%60,"0",2)}function c2(e,t){return fr(e.getUTCDate(),t,2)}function qW(e,t){return fr(e.getUTCHours(),t,2)}function HW(e,t){return fr(e.getUTCHours()%12||12,t,2)}function KW(e,t){return fr(1+gp.count(oo(e),e),t,3)}function dT(e,t){return fr(e.getUTCMilliseconds(),t,3)}function GW(e,t){return dT(e,t)+"000"}function YW(e,t){return fr(e.getUTCMonth()+1,t,2)}function JW(e,t){return fr(e.getUTCMinutes(),t,2)}function XW(e,t){return fr(e.getUTCSeconds(),t,2)}function QW(e){var t=e.getUTCDay();return t===0?7:t}function ZW(e,t){return fr(vp.count(oo(e)-1,e),t,2)}function fT(e){var t=e.getUTCDay();return t>=4||t===0?Qc(e):Qc.ceil(e)}function eV(e,t){return e=fT(e),fr(Qc.count(oo(e),e)+(oo(e).getUTCDay()===4),t,2)}function tV(e){return e.getUTCDay()}function rV(e,t){return fr(wm.count(oo(e)-1,e),t,2)}function nV(e,t){return fr(e.getUTCFullYear()%100,t,2)}function sV(e,t){return e=fT(e),fr(e.getUTCFullYear()%100,t,2)}function iV(e,t){return fr(e.getUTCFullYear()%1e4,t,4)}function aV(e,t){var r=e.getUTCDay();return e=r>=4||r===0?Qc(e):Qc.ceil(e),fr(e.getUTCFullYear()%1e4,t,4)}function oV(){return"+0000"}function u2(){return"%"}function d2(e){return+e}function f2(e){return Math.floor(+e/1e3)}var Tc,hT,mT;lV({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function lV(e){return Tc=lW(e),hT=Tc.format,Tc.parse,mT=Tc.utcFormat,Tc.utcParse,Tc}function cV(e){return new Date(e)}function uV(e){return e instanceof Date?+e:+new Date(+e)}function Fw(e,t,r,n,s,i,l,u,d,m){var f=kw(),p=f.invert,v=f.domain,x=m(".%L"),b=m(":%S"),S=m("%I:%M"),j=m("%I %p"),N=m("%a %d"),E=m("%b %d"),C=m("%B"),I=m("%Y");function T(O){return(d(O)<O?x:u(O)<O?b:l(O)<O?S:i(O)<O?j:n(O)<O?s(O)<O?N:E:r(O)<O?C:I)(O)}return f.invert=function(O){return new Date(p(O))},f.domain=function(O){return arguments.length?v(Array.from(O,uV)):v().map(cV)},f.ticks=function(O){var V=v();return e(V[0],V[V.length-1],O??10)},f.tickFormat=function(O,V){return V==null?T:m(V)},f.nice=function(O){var V=v();return(!O||typeof O.range!="function")&&(O=t(V[0],V[V.length-1],O??10)),O?v(eT(V,O)):f},f.copy=function(){return Xd(f,Fw(e,t,r,n,s,i,l,u,d,m))},f}function dV(){return Mi.apply(Fw(aW,oW,ao,Rw,yp,Qd,Dw,Ow,El,hT).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function fV(){return Mi.apply(Fw(sW,iW,oo,Mw,vp,gp,$w,Iw,El,mT).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function xp(){var e=0,t=1,r,n,s,i,l=Os,u=!1,d;function m(p){return p==null||isNaN(p=+p)?d:l(s===0?.5:(p=(i(p)-r)*s,u?Math.max(0,Math.min(1,p)):p))}m.domain=function(p){return arguments.length?([e,t]=p,r=i(e=+e),n=i(t=+t),s=r===n?0:1/(n-r),m):[e,t]},m.clamp=function(p){return arguments.length?(u=!!p,m):u},m.interpolator=function(p){return arguments.length?(l=p,m):l};function f(p){return function(v){var x,b;return arguments.length?([x,b]=v,l=p(x,b),m):[l(0),l(1)]}}return m.range=f(hu),m.rangeRound=f(Sw),m.unknown=function(p){return arguments.length?(d=p,m):d},function(p){return i=p,r=p(e),n=p(t),s=r===n?0:1/(n-r),m}}function Zo(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function pT(){var e=Qo(xp()(Os));return e.copy=function(){return Zo(e,pT())},mo.apply(e,arguments)}function gT(){var e=Cw(xp()).domain([1,10]);return e.copy=function(){return Zo(e,gT()).base(e.base())},mo.apply(e,arguments)}function yT(){var e=Ew(xp());return e.copy=function(){return Zo(e,yT()).constant(e.constant())},mo.apply(e,arguments)}function Lw(){var e=Aw(xp());return e.copy=function(){return Zo(e,Lw()).exponent(e.exponent())},mo.apply(e,arguments)}function hV(){return Lw.apply(null,arguments).exponent(.5)}function vT(){var e=[],t=Os;function r(n){if(n!=null&&!isNaN(n=+n))return t((Yd(e,n,1)-1)/(e.length-1))}return r.domain=function(n){if(!arguments.length)return e.slice();e=[];for(let s of n)s!=null&&!isNaN(s=+s)&&e.push(s);return e.sort(Ho),r},r.interpolator=function(n){return arguments.length?(t=n,r):t},r.range=function(){return e.map((n,s)=>t(s/(e.length-1)))},r.quantiles=function(n){return Array.from({length:n+1},(s,i)=>Q7(e,i/n))},r.copy=function(){return vT(t).domain(e)},mo.apply(r,arguments)}function wp(){var e=0,t=.5,r=1,n=1,s,i,l,u,d,m=Os,f,p=!1,v;function x(S){return isNaN(S=+S)?v:(S=.5+((S=+f(S))-i)*(n*S<n*i?u:d),m(p?Math.max(0,Math.min(1,S)):S))}x.domain=function(S){return arguments.length?([e,t,r]=S,s=f(e=+e),i=f(t=+t),l=f(r=+r),u=s===i?0:.5/(i-s),d=i===l?0:.5/(l-i),n=i<s?-1:1,x):[e,t,r]},x.clamp=function(S){return arguments.length?(p=!!S,x):p},x.interpolator=function(S){return arguments.length?(m=S,x):m};function b(S){return function(j){var N,E,C;return arguments.length?([N,E,C]=j,m=_9(S,[N,E,C]),x):[m(0),m(.5),m(1)]}}return x.range=b(hu),x.rangeRound=b(Sw),x.unknown=function(S){return arguments.length?(v=S,x):v},function(S){return f=S,s=S(e),i=S(t),l=S(r),u=s===i?0:.5/(i-s),d=i===l?0:.5/(l-i),n=i<s?-1:1,x}}function xT(){var e=Qo(wp()(Os));return e.copy=function(){return Zo(e,xT())},mo.apply(e,arguments)}function wT(){var e=Cw(wp()).domain([.1,1,10]);return e.copy=function(){return Zo(e,wT()).base(e.base())},mo.apply(e,arguments)}function bT(){var e=Ew(wp());return e.copy=function(){return Zo(e,bT()).constant(e.constant())},mo.apply(e,arguments)}function zw(){var e=Aw(wp());return e.copy=function(){return Zo(e,zw()).exponent(e.exponent())},mo.apply(e,arguments)}function mV(){return zw.apply(null,arguments).exponent(.5)}const dd=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:ww,scaleDiverging:xT,scaleDivergingLog:wT,scaleDivergingPow:zw,scaleDivergingSqrt:mV,scaleDivergingSymlog:bT,scaleIdentity:ZP,scaleImplicit:sx,scaleLinear:QP,scaleLog:tT,scaleOrdinal:xw,scalePoint:t9,scalePow:Pw,scaleQuantile:sT,scaleQuantize:iT,scaleRadial:nT,scaleSequential:pT,scaleSequentialLog:gT,scaleSequentialPow:Lw,scaleSequentialQuantile:vT,scaleSequentialSqrt:hV,scaleSequentialSymlog:yT,scaleSqrt:G9,scaleSymlog:rT,scaleThreshold:aT,scaleTime:dV,scaleUtc:fV,tickFormat:XP},Symbol.toStringTag,{value:"Module"}));var el=e=>e.chartData,pV=we([el],e=>{var t=e.chartData!=null?e.chartData.length-1:0;return{chartData:e.chartData,computedData:e.computedData,dataEndIndex:t,dataStartIndex:0}}),Uw=(e,t,r,n)=>n?pV(e):el(e);function Fl(e){if(Array.isArray(e)&&e.length===2){var[t,r]=e;if(xn(t)&&xn(r))return!0}return!1}function h2(e,t,r){return r?e:[Math.min(e[0],t[0]),Math.max(e[1],t[1])]}function jT(e,t){if(t&&typeof e!="function"&&Array.isArray(e)&&e.length===2){var[r,n]=e,s,i;if(xn(r))s=r;else if(typeof r=="function")return;if(xn(n))i=n;else if(typeof n=="function")return;var l=[s,i];if(Fl(l))return l}}function gV(e,t,r){if(!(!r&&t==null)){if(typeof e=="function"&&t!=null)try{var n=e(t,r);if(Fl(n))return h2(n,t,r)}catch{}if(Array.isArray(e)&&e.length===2){var[s,i]=e,l,u;if(s==="auto")t!=null&&(l=Math.min(...t));else if($t(s))l=s;else if(typeof s=="function")try{t!=null&&(l=s(t==null?void 0:t[0]))}catch{}else if(typeof s=="string"&&G_.test(s)){var d=G_.exec(s);if(d==null||t==null)l=void 0;else{var m=+d[1];l=t[0]-m}}else l=t==null?void 0:t[0];if(i==="auto")t!=null&&(u=Math.max(...t));else if($t(i))u=i;else if(typeof i=="function")try{t!=null&&(u=i(t==null?void 0:t[1]))}catch{}else if(typeof i=="string"&&Y_.test(i)){var f=Y_.exec(i);if(f==null||t==null)u=void 0;else{var p=+f[1];u=t[1]+p}}else u=t==null?void 0:t[1];var v=[l,u];if(Fl(v))return t==null?v:h2(v,t,r)}}}var mu=1e9,yV={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},Ww,Qr=!0,$i="[DecimalError] ",Il=$i+"Invalid argument: ",Bw=$i+"Exponent out of range: ",pu=Math.floor,wl=Math.pow,vV=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,di,Xn=1e7,Wr=7,ST=9007199254740991,bm=pu(ST/Wr),lt={};lt.absoluteValue=lt.abs=function(){var e=new this.constructor(this);return e.s&&(e.s=1),e};lt.comparedTo=lt.cmp=function(e){var t,r,n,s,i=this;if(e=new i.constructor(e),i.s!==e.s)return i.s||-e.s;if(i.e!==e.e)return i.e>e.e^i.s<0?1:-1;for(n=i.d.length,s=e.d.length,t=0,r=n<s?n:s;t<r;++t)if(i.d[t]!==e.d[t])return i.d[t]>e.d[t]^i.s<0?1:-1;return n===s?0:n>s^i.s<0?1:-1};lt.decimalPlaces=lt.dp=function(){var e=this,t=e.d.length-1,r=(t-e.e)*Wr;if(t=e.d[t],t)for(;t%10==0;t/=10)r--;return r<0?0:r};lt.dividedBy=lt.div=function(e){return Qa(this,new this.constructor(e))};lt.dividedToIntegerBy=lt.idiv=function(e){var t=this,r=t.constructor;return Nr(Qa(t,new r(e),0,1),r.precision)};lt.equals=lt.eq=function(e){return!this.cmp(e)};lt.exponent=function(){return On(this)};lt.greaterThan=lt.gt=function(e){return this.cmp(e)>0};lt.greaterThanOrEqualTo=lt.gte=function(e){return this.cmp(e)>=0};lt.isInteger=lt.isint=function(){return this.e>this.d.length-2};lt.isNegative=lt.isneg=function(){return this.s<0};lt.isPositive=lt.ispos=function(){return this.s>0};lt.isZero=function(){return this.s===0};lt.lessThan=lt.lt=function(e){return this.cmp(e)<0};lt.lessThanOrEqualTo=lt.lte=function(e){return this.cmp(e)<1};lt.logarithm=lt.log=function(e){var t,r=this,n=r.constructor,s=n.precision,i=s+5;if(e===void 0)e=new n(10);else if(e=new n(e),e.s<1||e.eq(di))throw Error($i+"NaN");if(r.s<1)throw Error($i+(r.s?"NaN":"-Infinity"));return r.eq(di)?new n(0):(Qr=!1,t=Qa(Md(r,i),Md(e,i),i),Qr=!0,Nr(t,s))};lt.minus=lt.sub=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?NT(t,e):kT(t,(e.s=-e.s,e))};lt.modulo=lt.mod=function(e){var t,r=this,n=r.constructor,s=n.precision;if(e=new n(e),!e.s)throw Error($i+"NaN");return r.s?(Qr=!1,t=Qa(r,e,0,1).times(e),Qr=!0,r.minus(t)):Nr(new n(r),s)};lt.naturalExponential=lt.exp=function(){return _T(this)};lt.naturalLogarithm=lt.ln=function(){return Md(this)};lt.negated=lt.neg=function(){var e=new this.constructor(this);return e.s=-e.s||0,e};lt.plus=lt.add=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?kT(t,e):NT(t,(e.s=-e.s,e))};lt.precision=lt.sd=function(e){var t,r,n,s=this;if(e!==void 0&&e!==!!e&&e!==1&&e!==0)throw Error(Il+e);if(t=On(s)+1,n=s.d.length-1,r=n*Wr+1,n=s.d[n],n){for(;n%10==0;n/=10)r--;for(n=s.d[0];n>=10;n/=10)r++}return e&&t>r?t:r};lt.squareRoot=lt.sqrt=function(){var e,t,r,n,s,i,l,u=this,d=u.constructor;if(u.s<1){if(!u.s)return new d(0);throw Error($i+"NaN")}for(e=On(u),Qr=!1,s=Math.sqrt(+u),s==0||s==1/0?(t=Na(u.d),(t.length+e)%2==0&&(t+="0"),s=Math.sqrt(t),e=pu((e+1)/2)-(e<0||e%2),s==1/0?t="5e"+e:(t=s.toExponential(),t=t.slice(0,t.indexOf("e")+1)+e),n=new d(t)):n=new d(s.toString()),r=d.precision,s=l=r+3;;)if(i=n,n=i.plus(Qa(u,i,l+2)).times(.5),Na(i.d).slice(0,l)===(t=Na(n.d)).slice(0,l)){if(t=t.slice(l-3,l+1),s==l&&t=="4999"){if(Nr(i,r+1,0),i.times(i).eq(u)){n=i;break}}else if(t!="9999")break;l+=4}return Qr=!0,Nr(n,r)};lt.times=lt.mul=function(e){var t,r,n,s,i,l,u,d,m,f=this,p=f.constructor,v=f.d,x=(e=new p(e)).d;if(!f.s||!e.s)return new p(0);for(e.s*=f.s,r=f.e+e.e,d=v.length,m=x.length,d<m&&(i=v,v=x,x=i,l=d,d=m,m=l),i=[],l=d+m,n=l;n--;)i.push(0);for(n=m;--n>=0;){for(t=0,s=d+n;s>n;)u=i[s]+x[n]*v[s-n-1]+t,i[s--]=u%Xn|0,t=u/Xn|0;i[s]=(i[s]+t)%Xn|0}for(;!i[--l];)i.pop();return t?++r:i.shift(),e.d=i,e.e=r,Qr?Nr(e,p.precision):e};lt.toDecimalPlaces=lt.todp=function(e,t){var r=this,n=r.constructor;return r=new n(r),e===void 0?r:(Oa(e,0,mu),t===void 0?t=n.rounding:Oa(t,0,8),Nr(r,e+On(r)+1,t))};lt.toExponential=function(e,t){var r,n=this,s=n.constructor;return e===void 0?r=Ll(n,!0):(Oa(e,0,mu),t===void 0?t=s.rounding:Oa(t,0,8),n=Nr(new s(n),e+1,t),r=Ll(n,!0,e+1)),r};lt.toFixed=function(e,t){var r,n,s=this,i=s.constructor;return e===void 0?Ll(s):(Oa(e,0,mu),t===void 0?t=i.rounding:Oa(t,0,8),n=Nr(new i(s),e+On(s)+1,t),r=Ll(n.abs(),!1,e+On(n)+1),s.isneg()&&!s.isZero()?"-"+r:r)};lt.toInteger=lt.toint=function(){var e=this,t=e.constructor;return Nr(new t(e),On(e)+1,t.rounding)};lt.toNumber=function(){return+this};lt.toPower=lt.pow=function(e){var t,r,n,s,i,l,u=this,d=u.constructor,m=12,f=+(e=new d(e));if(!e.s)return new d(di);if(u=new d(u),!u.s){if(e.s<1)throw Error($i+"Infinity");return u}if(u.eq(di))return u;if(n=d.precision,e.eq(di))return Nr(u,n);if(t=e.e,r=e.d.length-1,l=t>=r,i=u.s,l){if((r=f<0?-f:f)<=ST){for(s=new d(di),t=Math.ceil(n/Wr+4),Qr=!1;r%2&&(s=s.times(u),p2(s.d,t)),r=pu(r/2),r!==0;)u=u.times(u),p2(u.d,t);return Qr=!0,e.s<0?new d(di).div(s):Nr(s,n)}}else if(i<0)throw Error($i+"NaN");return i=i<0&&e.d[Math.max(t,r)]&1?-1:1,u.s=1,Qr=!1,s=e.times(Md(u,n+m)),Qr=!0,s=_T(s),s.s=i,s};lt.toPrecision=function(e,t){var r,n,s=this,i=s.constructor;return e===void 0?(r=On(s),n=Ll(s,r<=i.toExpNeg||r>=i.toExpPos)):(Oa(e,1,mu),t===void 0?t=i.rounding:Oa(t,0,8),s=Nr(new i(s),e,t),r=On(s),n=Ll(s,e<=r||r<=i.toExpNeg,e)),n};lt.toSignificantDigits=lt.tosd=function(e,t){var r=this,n=r.constructor;return e===void 0?(e=n.precision,t=n.rounding):(Oa(e,1,mu),t===void 0?t=n.rounding:Oa(t,0,8)),Nr(new n(r),e,t)};lt.toString=lt.valueOf=lt.val=lt.toJSON=lt[Symbol.for("nodejs.util.inspect.custom")]=function(){var e=this,t=On(e),r=e.constructor;return Ll(e,t<=r.toExpNeg||t>=r.toExpPos)};function kT(e,t){var r,n,s,i,l,u,d,m,f=e.constructor,p=f.precision;if(!e.s||!t.s)return t.s||(t=new f(e)),Qr?Nr(t,p):t;if(d=e.d,m=t.d,l=e.e,s=t.e,d=d.slice(),i=l-s,i){for(i<0?(n=d,i=-i,u=m.length):(n=m,s=l,u=d.length),l=Math.ceil(p/Wr),u=l>u?l+1:u+1,i>u&&(i=u,n.length=1),n.reverse();i--;)n.push(0);n.reverse()}for(u=d.length,i=m.length,u-i<0&&(i=u,n=m,m=d,d=n),r=0;i;)r=(d[--i]=d[i]+m[i]+r)/Xn|0,d[i]%=Xn;for(r&&(d.unshift(r),++s),u=d.length;d[--u]==0;)d.pop();return t.d=d,t.e=s,Qr?Nr(t,p):t}function Oa(e,t,r){if(e!==~~e||e<t||e>r)throw Error(Il+e)}function Na(e){var t,r,n,s=e.length-1,i="",l=e[0];if(s>0){for(i+=l,t=1;t<s;t++)n=e[t]+"",r=Wr-n.length,r&&(i+=Lo(r)),i+=n;l=e[t],n=l+"",r=Wr-n.length,r&&(i+=Lo(r))}else if(l===0)return"0";for(;l%10===0;)l/=10;return i+l}var Qa=(function(){function e(n,s){var i,l=0,u=n.length;for(n=n.slice();u--;)i=n[u]*s+l,n[u]=i%Xn|0,l=i/Xn|0;return l&&n.unshift(l),n}function t(n,s,i,l){var u,d;if(i!=l)d=i>l?1:-1;else for(u=d=0;u<i;u++)if(n[u]!=s[u]){d=n[u]>s[u]?1:-1;break}return d}function r(n,s,i){for(var l=0;i--;)n[i]-=l,l=n[i]<s[i]?1:0,n[i]=l*Xn+n[i]-s[i];for(;!n[0]&&n.length>1;)n.shift()}return function(n,s,i,l){var u,d,m,f,p,v,x,b,S,j,N,E,C,I,T,O,V,F,L=n.constructor,H=n.s==s.s?1:-1,le=n.d,K=s.d;if(!n.s)return new L(n);if(!s.s)throw Error($i+"Division by zero");for(d=n.e-s.e,V=K.length,T=le.length,x=new L(H),b=x.d=[],m=0;K[m]==(le[m]||0);)++m;if(K[m]>(le[m]||0)&&--d,i==null?E=i=L.precision:l?E=i+(On(n)-On(s))+1:E=i,E<0)return new L(0);if(E=E/Wr+2|0,m=0,V==1)for(f=0,K=K[0],E++;(m<T||f)&&E--;m++)C=f*Xn+(le[m]||0),b[m]=C/K|0,f=C%K|0;else{for(f=Xn/(K[0]+1)|0,f>1&&(K=e(K,f),le=e(le,f),V=K.length,T=le.length),I=V,S=le.slice(0,V),j=S.length;j<V;)S[j++]=0;F=K.slice(),F.unshift(0),O=K[0],K[1]>=Xn/2&&++O;do f=0,u=t(K,S,V,j),u<0?(N=S[0],V!=j&&(N=N*Xn+(S[1]||0)),f=N/O|0,f>1?(f>=Xn&&(f=Xn-1),p=e(K,f),v=p.length,j=S.length,u=t(p,S,v,j),u==1&&(f--,r(p,V<v?F:K,v))):(f==0&&(u=f=1),p=K.slice()),v=p.length,v<j&&p.unshift(0),r(S,p,j),u==-1&&(j=S.length,u=t(K,S,V,j),u<1&&(f++,r(S,V<j?F:K,j))),j=S.length):u===0&&(f++,S=[0]),b[m++]=f,u&&S[0]?S[j++]=le[I]||0:(S=[le[I]],j=1);while((I++<T||S[0]!==void 0)&&E--)}return b[0]||b.shift(),x.e=d,Nr(x,l?i+On(x)+1:i)}})();function _T(e,t){var r,n,s,i,l,u,d=0,m=0,f=e.constructor,p=f.precision;if(On(e)>16)throw Error(Bw+On(e));if(!e.s)return new f(di);for(Qr=!1,u=p,l=new f(.03125);e.abs().gte(.1);)e=e.times(l),m+=5;for(n=Math.log(wl(2,m))/Math.LN10*2+5|0,u+=n,r=s=i=new f(di),f.precision=u;;){if(s=Nr(s.times(e),u),r=r.times(++d),l=i.plus(Qa(s,r,u)),Na(l.d).slice(0,u)===Na(i.d).slice(0,u)){for(;m--;)i=Nr(i.times(i),u);return f.precision=p,t==null?(Qr=!0,Nr(i,p)):i}i=l}}function On(e){for(var t=e.e*Wr,r=e.d[0];r>=10;r/=10)t++;return t}function U0(e,t,r){if(t>e.LN10.sd())throw Qr=!0,r&&(e.precision=r),Error($i+"LN10 precision limit exceeded");return Nr(new e(e.LN10),t)}function Lo(e){for(var t="";e--;)t+="0";return t}function Md(e,t){var r,n,s,i,l,u,d,m,f,p=1,v=10,x=e,b=x.d,S=x.constructor,j=S.precision;if(x.s<1)throw Error($i+(x.s?"NaN":"-Infinity"));if(x.eq(di))return new S(0);if(t==null?(Qr=!1,m=j):m=t,x.eq(10))return t==null&&(Qr=!0),U0(S,m);if(m+=v,S.precision=m,r=Na(b),n=r.charAt(0),i=On(x),Math.abs(i)<15e14){for(;n<7&&n!=1||n==1&&r.charAt(1)>3;)x=x.times(e),r=Na(x.d),n=r.charAt(0),p++;i=On(x),n>1?(x=new S("0."+r),i++):x=new S(n+"."+r.slice(1))}else return d=U0(S,m+2,j).times(i+""),x=Md(new S(n+"."+r.slice(1)),m-v).plus(d),S.precision=j,t==null?(Qr=!0,Nr(x,j)):x;for(u=l=x=Qa(x.minus(di),x.plus(di),m),f=Nr(x.times(x),m),s=3;;){if(l=Nr(l.times(f),m),d=u.plus(Qa(l,new S(s),m)),Na(d.d).slice(0,m)===Na(u.d).slice(0,m))return u=u.times(2),i!==0&&(u=u.plus(U0(S,m+2,j).times(i+""))),u=Qa(u,new S(p),m),S.precision=j,t==null?(Qr=!0,Nr(u,j)):u;u=d,s+=2}}function m2(e,t){var r,n,s;for((r=t.indexOf("."))>-1&&(t=t.replace(".","")),(n=t.search(/e/i))>0?(r<0&&(r=n),r+=+t.slice(n+1),t=t.substring(0,n)):r<0&&(r=t.length),n=0;t.charCodeAt(n)===48;)++n;for(s=t.length;t.charCodeAt(s-1)===48;)--s;if(t=t.slice(n,s),t){if(s-=n,r=r-n-1,e.e=pu(r/Wr),e.d=[],n=(r+1)%Wr,r<0&&(n+=Wr),n<s){for(n&&e.d.push(+t.slice(0,n)),s-=Wr;n<s;)e.d.push(+t.slice(n,n+=Wr));t=t.slice(n),n=Wr-t.length}else n-=s;for(;n--;)t+="0";if(e.d.push(+t),Qr&&(e.e>bm||e.e<-bm))throw Error(Bw+r)}else e.s=0,e.e=0,e.d=[0];return e}function Nr(e,t,r){var n,s,i,l,u,d,m,f,p=e.d;for(l=1,i=p[0];i>=10;i/=10)l++;if(n=t-l,n<0)n+=Wr,s=t,m=p[f=0];else{if(f=Math.ceil((n+1)/Wr),i=p.length,f>=i)return e;for(m=i=p[f],l=1;i>=10;i/=10)l++;n%=Wr,s=n-Wr+l}if(r!==void 0&&(i=wl(10,l-s-1),u=m/i%10|0,d=t<0||p[f+1]!==void 0||m%i,d=r<4?(u||d)&&(r==0||r==(e.s<0?3:2)):u>5||u==5&&(r==4||d||r==6&&(n>0?s>0?m/wl(10,l-s):0:p[f-1])%10&1||r==(e.s<0?8:7))),t<1||!p[0])return d?(i=On(e),p.length=1,t=t-i-1,p[0]=wl(10,(Wr-t%Wr)%Wr),e.e=pu(-t/Wr)||0):(p.length=1,p[0]=e.e=e.s=0),e;if(n==0?(p.length=f,i=1,f--):(p.length=f+1,i=wl(10,Wr-n),p[f]=s>0?(m/wl(10,l-s)%wl(10,s)|0)*i:0),d)for(;;)if(f==0){(p[0]+=i)==Xn&&(p[0]=1,++e.e);break}else{if(p[f]+=i,p[f]!=Xn)break;p[f--]=0,i=1}for(n=p.length;p[--n]===0;)p.pop();if(Qr&&(e.e>bm||e.e<-bm))throw Error(Bw+On(e));return e}function NT(e,t){var r,n,s,i,l,u,d,m,f,p,v=e.constructor,x=v.precision;if(!e.s||!t.s)return t.s?t.s=-t.s:t=new v(e),Qr?Nr(t,x):t;if(d=e.d,p=t.d,n=t.e,m=e.e,d=d.slice(),l=m-n,l){for(f=l<0,f?(r=d,l=-l,u=p.length):(r=p,n=m,u=d.length),s=Math.max(Math.ceil(x/Wr),u)+2,l>s&&(l=s,r.length=1),r.reverse(),s=l;s--;)r.push(0);r.reverse()}else{for(s=d.length,u=p.length,f=s<u,f&&(u=s),s=0;s<u;s++)if(d[s]!=p[s]){f=d[s]<p[s];break}l=0}for(f&&(r=d,d=p,p=r,t.s=-t.s),u=d.length,s=p.length-u;s>0;--s)d[u++]=0;for(s=p.length;s>l;){if(d[--s]<p[s]){for(i=s;i&&d[--i]===0;)d[i]=Xn-1;--d[i],d[s]+=Xn}d[s]-=p[s]}for(;d[--u]===0;)d.pop();for(;d[0]===0;d.shift())--n;return d[0]?(t.d=d,t.e=n,Qr?Nr(t,x):t):new v(0)}function Ll(e,t,r){var n,s=On(e),i=Na(e.d),l=i.length;return t?(r&&(n=r-l)>0?i=i.charAt(0)+"."+i.slice(1)+Lo(n):l>1&&(i=i.charAt(0)+"."+i.slice(1)),i=i+(s<0?"e":"e+")+s):s<0?(i="0."+Lo(-s-1)+i,r&&(n=r-l)>0&&(i+=Lo(n))):s>=l?(i+=Lo(s+1-l),r&&(n=r-s-1)>0&&(i=i+"."+Lo(n))):((n=s+1)<l&&(i=i.slice(0,n)+"."+i.slice(n)),r&&(n=r-l)>0&&(s+1===l&&(i+="."),i+=Lo(n))),e.s<0?"-"+i:i}function p2(e,t){if(e.length>t)return e.length=t,!0}function CT(e){var t,r,n;function s(i){var l=this;if(!(l instanceof s))return new s(i);if(l.constructor=s,i instanceof s){l.s=i.s,l.e=i.e,l.d=(i=i.d)?i.slice():i;return}if(typeof i=="number"){if(i*0!==0)throw Error(Il+i);if(i>0)l.s=1;else if(i<0)i=-i,l.s=-1;else{l.s=0,l.e=0,l.d=[0];return}if(i===~~i&&i<1e7){l.e=0,l.d=[i];return}return m2(l,i.toString())}else if(typeof i!="string")throw Error(Il+i);if(i.charCodeAt(0)===45?(i=i.slice(1),l.s=-1):l.s=1,vV.test(i))m2(l,i);else throw Error(Il+i)}if(s.prototype=lt,s.ROUND_UP=0,s.ROUND_DOWN=1,s.ROUND_CEIL=2,s.ROUND_FLOOR=3,s.ROUND_HALF_UP=4,s.ROUND_HALF_DOWN=5,s.ROUND_HALF_EVEN=6,s.ROUND_HALF_CEIL=7,s.ROUND_HALF_FLOOR=8,s.clone=CT,s.config=s.set=xV,e===void 0&&(e={}),e)for(n=["precision","rounding","toExpNeg","toExpPos","LN10"],t=0;t<n.length;)e.hasOwnProperty(r=n[t++])||(e[r]=this[r]);return s.config(e),s}function xV(e){if(!e||typeof e!="object")throw Error($i+"Object expected");var t,r,n,s=["precision",1,mu,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(t=0;t<s.length;t+=3)if((n=e[r=s[t]])!==void 0)if(pu(n)===n&&n>=s[t+1]&&n<=s[t+2])this[r]=n;else throw Error(Il+r+": "+n);if((n=e[r="LN10"])!==void 0)if(n==Math.LN10)this[r]=new this(n);else throw Error(Il+r+": "+n);return this}var Ww=CT(yV);di=new Ww(1);const wr=Ww;var wV=e=>e,ET={},AT=e=>e===ET,g2=e=>function t(){return arguments.length===0||arguments.length===1&&AT(arguments.length<=0?void 0:arguments[0])?t:e(...arguments)},PT=(e,t)=>e===1?t:g2(function(){for(var r=arguments.length,n=new Array(r),s=0;s<r;s++)n[s]=arguments[s];var i=n.filter(l=>l!==ET).length;return i>=e?t(...n):PT(e-i,g2(function(){for(var l=arguments.length,u=new Array(l),d=0;d<l;d++)u[d]=arguments[d];var m=n.map(f=>AT(f)?u.shift():f);return t(...m,...u)}))}),bp=e=>PT(e.length,e),lx=(e,t)=>{for(var r=[],n=e;n<t;++n)r[n-e]=n;return r},bV=bp((e,t)=>Array.isArray(t)?t.map(e):Object.keys(t).map(r=>t[r]).map(e)),jV=function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];if(!r.length)return wV;var s=r.reverse(),i=s[0],l=s.slice(1);return function(){return l.reduce((u,d)=>d(u),i(...arguments))}},cx=e=>Array.isArray(e)?e.reverse():e.split("").reverse().join(""),TT=e=>{var t=null,r=null;return function(){for(var n=arguments.length,s=new Array(n),i=0;i<n;i++)s[i]=arguments[i];return t&&s.every((l,u)=>{var d;return l===((d=t)===null||d===void 0?void 0:d[u])})||(t=s,r=e(...s)),r}};function OT(e){var t;return e===0?t=1:t=Math.floor(new wr(e).abs().log(10).toNumber())+1,t}function IT(e,t,r){for(var n=new wr(e),s=0,i=[];n.lt(t)&&s<1e5;)i.push(n.toNumber()),n=n.add(r),s++;return i}bp((e,t,r)=>{var n=+e,s=+t;return n+r*(s-n)});bp((e,t,r)=>{var n=t-+e;return n=n||1/0,(r-e)/n});bp((e,t,r)=>{var n=t-+e;return n=n||1/0,Math.max(0,Math.min(1,(r-e)/n))});var DT=e=>{var[t,r]=e,[n,s]=[t,r];return t>r&&([n,s]=[r,t]),[n,s]},$T=(e,t,r)=>{if(e.lte(0))return new wr(0);var n=OT(e.toNumber()),s=new wr(10).pow(n),i=e.div(s),l=n!==1?.05:.1,u=new wr(Math.ceil(i.div(l).toNumber())).add(r).mul(l),d=u.mul(s);return t?new wr(d.toNumber()):new wr(Math.ceil(d.toNumber()))},SV=(e,t,r)=>{var n=new wr(1),s=new wr(e);if(!s.isint()&&r){var i=Math.abs(e);i<1?(n=new wr(10).pow(OT(e)-1),s=new wr(Math.floor(s.div(n).toNumber())).mul(n)):i>1&&(s=new wr(Math.floor(e)))}else e===0?s=new wr(Math.floor((t-1)/2)):r||(s=new wr(Math.floor(e)));var l=Math.floor((t-1)/2),u=jV(bV(d=>s.add(new wr(d-l).mul(n)).toNumber()),lx);return u(0,t)},RT=function(t,r,n,s){var i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((r-t)/(n-1)))return{step:new wr(0),tickMin:new wr(0),tickMax:new wr(0)};var l=$T(new wr(r).sub(t).div(n-1),s,i),u;t<=0&&r>=0?u=new wr(0):(u=new wr(t).add(r).div(2),u=u.sub(new wr(u).mod(l)));var d=Math.ceil(u.sub(t).div(l).toNumber()),m=Math.ceil(new wr(r).sub(u).div(l).toNumber()),f=d+m+1;return f>n?RT(t,r,n,s,i+1):(f<n&&(m=r>0?m+(n-f):m,d=r>0?d:d+(n-f)),{step:l,tickMin:u.sub(new wr(d).mul(l)),tickMax:u.add(new wr(m).mul(l))})};function kV(e){var[t,r]=e,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,i=Math.max(n,2),[l,u]=DT([t,r]);if(l===-1/0||u===1/0){var d=u===1/0?[l,...lx(0,n-1).map(()=>1/0)]:[...lx(0,n-1).map(()=>-1/0),u];return t>r?cx(d):d}if(l===u)return SV(l,n,s);var{step:m,tickMin:f,tickMax:p}=RT(l,u,i,s,0),v=IT(f,p.add(new wr(.1).mul(m)),m);return t>r?cx(v):v}function _V(e,t){var[r,n]=e,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,[i,l]=DT([r,n]);if(i===-1/0||l===1/0)return[r,n];if(i===l)return[i];var u=Math.max(t,2),d=$T(new wr(l).sub(i).div(u-1),s,0),m=[...IT(new wr(i),new wr(l),d),l];return s===!1&&(m=m.map(f=>Math.round(f))),r>n?cx(m):m}var NV=TT(kV),CV=TT(_V),MT=e=>e.rootProps.maxBarSize,EV=e=>e.rootProps.barGap,FT=e=>e.rootProps.barCategoryGap,AV=e=>e.rootProps.barSize,jp=e=>e.rootProps.stackOffset,Vw=e=>e.options.chartName,qw=e=>e.rootProps.syncId,LT=e=>e.rootProps.syncMethod,Hw=e=>e.options.eventEmitter,Ys={grid:-100,barBackground:-50,area:100,cursorRectangle:200,bar:300,line:400,axis:500,scatter:600,activeBar:1e3,cursorLine:1100,activeDot:1200,label:2e3},Ha={allowDuplicatedCategory:!0,angleAxisId:0,reversed:!1,scale:"auto",tick:!0,type:"category"},ci={allowDataOverflow:!1,allowDuplicatedCategory:!0,radiusAxisId:0,scale:"auto",tick:!0,tickCount:5,type:"number"},Sp=(e,t)=>{if(!(!e||!t))return e!=null&&e.reversed?[t[1],t[0]]:t},PV={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:!1,dataKey:void 0,domain:void 0,id:Ha.angleAxisId,includeHidden:!1,name:void 0,reversed:Ha.reversed,scale:Ha.scale,tick:Ha.tick,tickCount:void 0,ticks:void 0,type:Ha.type,unit:void 0},TV={allowDataOverflow:ci.allowDataOverflow,allowDecimals:!1,allowDuplicatedCategory:ci.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:ci.radiusAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:ci.scale,tick:ci.tick,tickCount:ci.tickCount,ticks:void 0,type:ci.type,unit:void 0},OV={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:Ha.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:Ha.angleAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:Ha.scale,tick:Ha.tick,tickCount:void 0,ticks:void 0,type:"number",unit:void 0},IV={allowDataOverflow:ci.allowDataOverflow,allowDecimals:!1,allowDuplicatedCategory:ci.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:ci.radiusAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:ci.scale,tick:ci.tick,tickCount:ci.tickCount,ticks:void 0,type:"category",unit:void 0},Kw=(e,t)=>e.polarAxis.angleAxis[t]!=null?e.polarAxis.angleAxis[t]:e.layout.layoutType==="radial"?OV:PV,Gw=(e,t)=>e.polarAxis.radiusAxis[t]!=null?e.polarAxis.radiusAxis[t]:e.layout.layoutType==="radial"?IV:TV,kp=e=>e.polarOptions,Yw=we([fo,ho,es],N7),zT=we([kp,Yw],(e,t)=>{if(e!=null)return la(e.innerRadius,t,0)}),UT=we([kp,Yw],(e,t)=>{if(e!=null)return la(e.outerRadius,t,t*.8)}),DV=e=>{if(e==null)return[0,0];var{startAngle:t,endAngle:r}=e;return[t,r]},BT=we([kp],DV);we([Kw,BT],Sp);var WT=we([Yw,zT,UT],(e,t,r)=>{if(!(e==null||t==null||r==null))return[t,r]});we([Gw,WT],Sp);var VT=we([br,kp,zT,UT,fo,ho],(e,t,r,n,s,i)=>{if(!(e!=="centric"&&e!=="radial"||t==null||r==null||n==null)){var{cx:l,cy:u,startAngle:d,endAngle:m}=t;return{cx:la(l,s,s/2),cy:la(u,i,i/2),innerRadius:r,outerRadius:n,startAngle:d,endAngle:m,clockWise:!1}}}),Wn=(e,t)=>t,_p=(e,t,r)=>r;function Jw(e){return e==null?void 0:e.id}function qT(e,t,r){var{chartData:n=[]}=t,{allowDuplicatedCategory:s,dataKey:i}=r,l=new Map;return e.forEach(u=>{var d,m=(d=u.data)!==null&&d!==void 0?d:n;if(!(m==null||m.length===0)){var f=Jw(u);m.forEach((p,v)=>{var x=i==null||s?v:String(Is(p,i,null)),b=Is(p,u.dataKey,0),S;l.has(x)?S=l.get(x):S={},Object.assign(S,{[f]:b}),l.set(x,S)})}}),Array.from(l.values())}function Np(e){return e.stackId!=null&&e.dataKey!=null}var Cp=(e,t)=>e===t?!0:e==null||t==null?!1:e[0]===t[0]&&e[1]===t[1];function Ep(e,t){return Array.isArray(e)&&Array.isArray(t)&&e.length===0&&t.length===0?!0:e===t}function $V(e,t){if(e.length===t.length){for(var r=0;r<e.length;r++)if(e[r]!==t[r])return!1;return!0}return!1}var Vn=e=>{var t=br(e);return t==="horizontal"?"xAxis":t==="vertical"?"yAxis":t==="centric"?"angleAxis":"radiusAxis"},gu=e=>e.tooltip.settings.axisId;function y2(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function jm(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?y2(Object(r),!0).forEach(function(n){RV(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):y2(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function RV(e,t,r){return(t=MV(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function MV(e){var t=FV(e,"string");return typeof t=="symbol"?t:t+""}function FV(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var ux=[0,"auto"],ai={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:void 0,height:30,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"bottom",padding:{left:0,right:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"category",unit:void 0},HT=(e,t)=>e.cartesianAxis.xAxis[t],po=(e,t)=>{var r=HT(e,t);return r??ai},oi={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:ux,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"left",padding:{top:0,bottom:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"number",unit:void 0,width:Gd},KT=(e,t)=>e.cartesianAxis.yAxis[t],go=(e,t)=>{var r=KT(e,t);return r??oi},LV={domain:[0,"auto"],includeHidden:!1,reversed:!1,allowDataOverflow:!1,allowDuplicatedCategory:!1,dataKey:void 0,id:0,name:"",range:[64,64],scale:"auto",type:"number",unit:""},Xw=(e,t)=>{var r=e.cartesianAxis.zAxis[t];return r??LV},Ds=(e,t,r)=>{switch(t){case"xAxis":return po(e,r);case"yAxis":return go(e,r);case"zAxis":return Xw(e,r);case"angleAxis":return Kw(e,r);case"radiusAxis":return Gw(e,r);default:throw new Error("Unexpected axis type: ".concat(t))}},zV=(e,t,r)=>{switch(t){case"xAxis":return po(e,r);case"yAxis":return go(e,r);default:throw new Error("Unexpected axis type: ".concat(t))}},Zd=(e,t,r)=>{switch(t){case"xAxis":return po(e,r);case"yAxis":return go(e,r);case"angleAxis":return Kw(e,r);case"radiusAxis":return Gw(e,r);default:throw new Error("Unexpected axis type: ".concat(t))}},GT=e=>e.graphicalItems.cartesianItems.some(t=>t.type==="bar")||e.graphicalItems.polarItems.some(t=>t.type==="radialBar");function YT(e,t){return r=>{switch(e){case"xAxis":return"xAxisId"in r&&r.xAxisId===t;case"yAxis":return"yAxisId"in r&&r.yAxisId===t;case"zAxis":return"zAxisId"in r&&r.zAxisId===t;case"angleAxis":return"angleAxisId"in r&&r.angleAxisId===t;case"radiusAxis":return"radiusAxisId"in r&&r.radiusAxisId===t;default:return!1}}}var Qw=e=>e.graphicalItems.cartesianItems,UV=we([Wn,_p],YT),JT=(e,t,r)=>e.filter(r).filter(n=>(t==null?void 0:t.includeHidden)===!0?!0:!n.hide),ef=we([Qw,Ds,UV],JT,{memoizeOptions:{resultEqualityCheck:Ep}}),XT=we([ef],e=>e.filter(t=>t.type==="area"||t.type==="bar").filter(Np)),QT=e=>e.filter(t=>!("stackId"in t)||t.stackId===void 0),BV=we([ef],QT),ZT=e=>e.map(t=>t.data).filter(Boolean).flat(1),WV=we([ef],ZT,{memoizeOptions:{resultEqualityCheck:Ep}}),eO=(e,t)=>{var{chartData:r=[],dataStartIndex:n,dataEndIndex:s}=t;return e.length>0?e:r.slice(n,s+1)},Zw=we([WV,Uw],eO),tO=(e,t,r)=>(t==null?void 0:t.dataKey)!=null?e.map(n=>({value:Is(n,t.dataKey)})):r.length>0?r.map(n=>n.dataKey).flatMap(n=>e.map(s=>({value:Is(s,n)}))):e.map(n=>({value:n})),Ap=we([Zw,Ds,ef],tO);function rO(e,t){switch(e){case"xAxis":return t.direction==="x";case"yAxis":return t.direction==="y";default:return!1}}function Ah(e){if(Ta(e)||e instanceof Date){var t=Number(e);if(xn(t))return t}}function v2(e){if(Array.isArray(e)){var t=[Ah(e[0]),Ah(e[1])];return Fl(t)?t:void 0}var r=Ah(e);if(r!=null)return[r,r]}function lo(e){return e.map(Ah).filter(uz)}function VV(e,t,r){return!r||typeof t!="number"||Pa(t)?[]:r.length?lo(r.flatMap(n=>{var s=Is(e,n.dataKey),i,l;if(Array.isArray(s)?[i,l]=s:i=l=s,!(!xn(i)||!xn(l)))return[t-i,t+l]})):[]}var qn=e=>{var t=Vn(e),r=gu(e);return Zd(e,t,r)},nO=we([qn],e=>e==null?void 0:e.dataKey),qV=we([XT,Uw,qn],qT),sO=(e,t,r)=>{var n={},s=t.reduce((i,l)=>(l.stackId==null||(i[l.stackId]==null&&(i[l.stackId]=[]),i[l.stackId].push(l)),i),n);return Object.fromEntries(Object.entries(s).map(i=>{var[l,u]=i,d=u.map(Jw);return[l,{stackedData:NU(e,d,r),graphicalItems:u}]}))},dx=we([qV,XT,jp],sO),iO=(e,t,r,n)=>{var{dataStartIndex:s,dataEndIndex:i}=t;if(n==null&&r!=="zAxis"){var l=TU(e,s,i);if(!(l!=null&&l[0]===0&&l[1]===0))return l}},HV=we([Ds],e=>e.allowDataOverflow),eb=e=>{var t;if(e==null||!("domain"in e))return ux;if(e.domain!=null)return e.domain;if(e.ticks!=null){if(e.type==="number"){var r=lo(e.ticks);return[Math.min(...r),Math.max(...r)]}if(e.type==="category")return e.ticks.map(String)}return(t=e==null?void 0:e.domain)!==null&&t!==void 0?t:ux},aO=we([Ds],eb),oO=we([aO,HV],jT),KV=we([dx,el,Wn,oO],iO,{memoizeOptions:{resultEqualityCheck:Cp}}),tb=e=>e.errorBars,GV=(e,t,r)=>e.flatMap(n=>t[n.id]).filter(Boolean).filter(n=>rO(r,n)),Sm=function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];var s=r.filter(Boolean);if(s.length!==0){var i=s.flat(),l=Math.min(...i),u=Math.max(...i);return[l,u]}},lO=(e,t,r,n,s)=>{var i,l;if(r.length>0&&e.forEach(u=>{r.forEach(d=>{var m,f,p=(m=n[d.id])===null||m===void 0?void 0:m.filter(N=>rO(s,N)),v=Is(u,(f=t.dataKey)!==null&&f!==void 0?f:d.dataKey),x=VV(u,v,p);if(x.length>=2){var b=Math.min(...x),S=Math.max(...x);(i==null||b<i)&&(i=b),(l==null||S>l)&&(l=S)}var j=v2(v);j!=null&&(i=i==null?j[0]:Math.min(i,j[0]),l=l==null?j[1]:Math.max(l,j[1]))})}),(t==null?void 0:t.dataKey)!=null&&e.forEach(u=>{var d=v2(Is(u,t.dataKey));d!=null&&(i=i==null?d[0]:Math.min(i,d[0]),l=l==null?d[1]:Math.max(l,d[1]))}),xn(i)&&xn(l))return[i,l]},YV=we([Zw,Ds,BV,tb,Wn],lO,{memoizeOptions:{resultEqualityCheck:Cp}});function JV(e){var{value:t}=e;if(Ta(t)||t instanceof Date)return t}var XV=(e,t,r)=>{var n=e.map(JV).filter(s=>s!=null);return r&&(t.dataKey==null||t.allowDuplicatedCategory&&DA(n))?UP(0,e.length):t.allowDuplicatedCategory?n:Array.from(new Set(n))},cO=e=>e.referenceElements.dots,yu=(e,t,r)=>e.filter(n=>n.ifOverflow==="extendDomain").filter(n=>t==="xAxis"?n.xAxisId===r:n.yAxisId===r),QV=we([cO,Wn,_p],yu),uO=e=>e.referenceElements.areas,ZV=we([uO,Wn,_p],yu),dO=e=>e.referenceElements.lines,eq=we([dO,Wn,_p],yu),fO=(e,t)=>{var r=lo(e.map(n=>t==="xAxis"?n.x:n.y));if(r.length!==0)return[Math.min(...r),Math.max(...r)]},tq=we(QV,Wn,fO),hO=(e,t)=>{var r=lo(e.flatMap(n=>[t==="xAxis"?n.x1:n.y1,t==="xAxis"?n.x2:n.y2]));if(r.length!==0)return[Math.min(...r),Math.max(...r)]},rq=we([ZV,Wn],hO);function nq(e){var t;if(e.x!=null)return lo([e.x]);var r=(t=e.segment)===null||t===void 0?void 0:t.map(n=>n.x);return r==null||r.length===0?[]:lo(r)}function sq(e){var t;if(e.y!=null)return lo([e.y]);var r=(t=e.segment)===null||t===void 0?void 0:t.map(n=>n.y);return r==null||r.length===0?[]:lo(r)}var mO=(e,t)=>{var r=e.flatMap(n=>t==="xAxis"?nq(n):sq(n));if(r.length!==0)return[Math.min(...r),Math.max(...r)]},iq=we([eq,Wn],mO),aq=we(tq,iq,rq,(e,t,r)=>Sm(e,r,t)),pO=(e,t,r,n,s,i,l,u)=>{if(r!=null)return r;var d=l==="vertical"&&u==="xAxis"||l==="horizontal"&&u==="yAxis",m=d?Sm(n,i,s):Sm(i,s);return gV(t,m,e.allowDataOverflow)},oq=we([Ds,aO,oO,KV,YV,aq,br,Wn],pO,{memoizeOptions:{resultEqualityCheck:Cp}}),lq=[0,1],gO=(e,t,r,n,s,i,l)=>{if(!((e==null||r==null||r.length===0)&&l===void 0)){var{dataKey:u,type:d}=e,m=Kl(t,i);if(m&&u==null){var f;return UP(0,(f=r==null?void 0:r.length)!==null&&f!==void 0?f:0)}return d==="category"?XV(n,e,m):s==="expand"?lq:l}},rb=we([Ds,br,Zw,Ap,jp,Wn,oq],gO),yO=(e,t,r,n,s)=>{if(e!=null){var{scale:i,type:l}=e;if(i==="auto")return t==="radial"&&s==="radiusAxis"?"band":t==="radial"&&s==="angleAxis"?"linear":l==="category"&&n&&(n.indexOf("LineChart")>=0||n.indexOf("AreaChart")>=0||n.indexOf("ComposedChart")>=0&&!r)?"point":l==="category"?"band":"linear";if(typeof i=="string"){var u="scale".concat(qd(i));return u in dd?u:"point"}}},tf=we([Ds,br,GT,Vw,Wn],yO);function cq(e){if(e!=null){if(e in dd)return dd[e]();var t="scale".concat(qd(e));if(t in dd)return dd[t]()}}function nb(e,t,r,n){if(!(r==null||n==null)){if(typeof e.scale=="function")return e.scale.copy().domain(r).range(n);var s=cq(t);if(s!=null){var i=s.domain(r).range(n);return bU(i),i}}}var vO=(e,t,r)=>{var n=eb(t);if(!(r!=="auto"&&r!=="linear")){if(t!=null&&t.tickCount&&Array.isArray(n)&&(n[0]==="auto"||n[1]==="auto")&&Fl(e))return NV(e,t.tickCount,t.allowDecimals);if(t!=null&&t.tickCount&&t.type==="number"&&Fl(e))return CV(e,t.tickCount,t.allowDecimals)}},sb=we([rb,Zd,tf],vO),xO=(e,t,r,n)=>{if(n!=="angleAxis"&&(e==null?void 0:e.type)==="number"&&Fl(t)&&Array.isArray(r)&&r.length>0){var s=t[0],i=r[0],l=t[1],u=r[r.length-1];return[Math.min(s,i),Math.max(l,u)]}return t},uq=we([Ds,rb,sb,Wn],xO),dq=we(Ap,Ds,(e,t)=>{if(!(!t||t.type!=="number")){var r=1/0,n=Array.from(lo(e.map(u=>u.value))).sort((u,d)=>u-d);if(n.length<2)return 1/0;var s=n[n.length-1]-n[0];if(s===0)return 1/0;for(var i=0;i<n.length-1;i++){var l=n[i+1]-n[i];r=Math.min(r,l)}return r/s}}),wO=we(dq,br,FT,es,(e,t,r,n)=>n,(e,t,r,n,s)=>{if(!xn(e))return 0;var i=t==="vertical"?n.height:n.width;if(s==="gap")return e*i/2;if(s==="no-gap"){var l=la(r,e*i),u=e*i/2;return u-l-(u-l)/i*l}return 0}),fq=(e,t)=>{var r=po(e,t);return r==null||typeof r.padding!="string"?0:wO(e,"xAxis",t,r.padding)},hq=(e,t)=>{var r=go(e,t);return r==null||typeof r.padding!="string"?0:wO(e,"yAxis",t,r.padding)},mq=we(po,fq,(e,t)=>{var r,n;if(e==null)return{left:0,right:0};var{padding:s}=e;return typeof s=="string"?{left:t,right:t}:{left:((r=s.left)!==null&&r!==void 0?r:0)+t,right:((n=s.right)!==null&&n!==void 0?n:0)+t}}),pq=we(go,hq,(e,t)=>{var r,n;if(e==null)return{top:0,bottom:0};var{padding:s}=e;return typeof s=="string"?{top:t,bottom:t}:{top:((r=s.top)!==null&&r!==void 0?r:0)+t,bottom:((n=s.bottom)!==null&&n!==void 0?n:0)+t}}),gq=we([es,mq,dp,up,(e,t,r)=>r],(e,t,r,n,s)=>{var{padding:i}=n;return s?[i.left,r.width-i.right]:[e.left+t.left,e.left+e.width-t.right]}),yq=we([es,br,pq,dp,up,(e,t,r)=>r],(e,t,r,n,s,i)=>{var{padding:l}=s;return i?[n.height-l.bottom,l.top]:t==="horizontal"?[e.top+e.height-r.bottom,e.top+r.top]:[e.top+r.top,e.top+e.height-r.bottom]}),rf=(e,t,r,n)=>{var s;switch(t){case"xAxis":return gq(e,r,n);case"yAxis":return yq(e,r,n);case"zAxis":return(s=Xw(e,r))===null||s===void 0?void 0:s.range;case"angleAxis":return BT(e);case"radiusAxis":return WT(e,r);default:return}},bO=we([Ds,rf],Sp),vu=we([Ds,tf,uq,bO],nb);we([ef,tb,Wn],GV);function jO(e,t){return e.id<t.id?-1:e.id>t.id?1:0}var Pp=(e,t)=>t,Tp=(e,t,r)=>r,vq=we(lp,Pp,Tp,(e,t,r)=>e.filter(n=>n.orientation===t).filter(n=>n.mirror===r).sort(jO)),xq=we(cp,Pp,Tp,(e,t,r)=>e.filter(n=>n.orientation===t).filter(n=>n.mirror===r).sort(jO)),SO=(e,t)=>({width:e.width,height:t.height}),wq=(e,t)=>{var r=typeof t.width=="number"?t.width:Gd;return{width:r,height:e.height}},kO=we(es,po,SO),bq=(e,t,r)=>{switch(t){case"top":return e.top;case"bottom":return r-e.bottom;default:return 0}},jq=(e,t,r)=>{switch(t){case"left":return e.left;case"right":return r-e.right;default:return 0}},Sq=we(ho,es,vq,Pp,Tp,(e,t,r,n,s)=>{var i={},l;return r.forEach(u=>{var d=SO(t,u);l==null&&(l=bq(t,n,e));var m=n==="top"&&!s||n==="bottom"&&s;i[u.id]=l-Number(m)*d.height,l+=(m?-1:1)*d.height}),i}),kq=we(fo,es,xq,Pp,Tp,(e,t,r,n,s)=>{var i={},l;return r.forEach(u=>{var d=wq(t,u);l==null&&(l=jq(t,n,e));var m=n==="left"&&!s||n==="right"&&s;i[u.id]=l-Number(m)*d.width,l+=(m?-1:1)*d.width}),i}),_q=(e,t)=>{var r=po(e,t);if(r!=null)return Sq(e,r.orientation,r.mirror)},Nq=we([es,po,_q,(e,t)=>t],(e,t,r,n)=>{if(t!=null){var s=r==null?void 0:r[n];return s==null?{x:e.left,y:0}:{x:e.left,y:s}}}),Cq=(e,t)=>{var r=go(e,t);if(r!=null)return kq(e,r.orientation,r.mirror)},Eq=we([es,go,Cq,(e,t)=>t],(e,t,r,n)=>{if(t!=null){var s=r==null?void 0:r[n];return s==null?{x:0,y:e.top}:{x:s,y:e.top}}}),_O=we(es,go,(e,t)=>{var r=typeof t.width=="number"?t.width:Gd;return{width:r,height:e.height}}),x2=(e,t,r)=>{switch(t){case"xAxis":return kO(e,r).width;case"yAxis":return _O(e,r).height;default:return}},NO=(e,t,r,n)=>{if(r!=null){var{allowDuplicatedCategory:s,type:i,dataKey:l}=r,u=Kl(e,n),d=t.map(m=>m.value);if(l&&u&&i==="category"&&s&&DA(d))return d}},ib=we([br,Ap,Ds,Wn],NO),CO=(e,t,r,n)=>{if(!(r==null||r.dataKey==null)){var{type:s,scale:i}=r,l=Kl(e,n);if(l&&(s==="number"||i!=="auto"))return t.map(u=>u.value)}},ab=we([br,Ap,Zd,Wn],CO);we([br,zV,tf,vu,ib,ab,rf,sb,Wn],(e,t,r,n,s,i,l,u,d)=>{if(t!=null){var m=Kl(e,d);return{angle:t.angle,interval:t.interval,minTickGap:t.minTickGap,orientation:t.orientation,tick:t.tick,tickCount:t.tickCount,tickFormatter:t.tickFormatter,ticks:t.ticks,type:t.type,unit:t.unit,axisType:d,categoricalDomain:i,duplicateDomain:s,isCategorical:m,niceTicks:u,range:l,realScaleType:r,scale:n}}});var Aq=(e,t,r,n,s,i,l,u,d)=>{if(!(t==null||n==null)){var m=Kl(e,d),{type:f,ticks:p,tickCount:v}=t,x=r==="scaleBand"&&typeof n.bandwidth=="function"?n.bandwidth()/2:2,b=f==="category"&&n.bandwidth?n.bandwidth()/x:0;b=d==="angleAxis"&&i!=null&&i.length>=2?fi(i[0]-i[1])*2*b:b;var S=p||s;if(S){var j=S.map((N,E)=>{var C=l?l.indexOf(N):N;return{index:E,coordinate:n(C)+b,value:N,offset:b}});return j.filter(N=>xn(N.coordinate))}return m&&u?u.map((N,E)=>({coordinate:n(N)+b,value:N,index:E,offset:b})).filter(N=>xn(N.coordinate)):n.ticks?n.ticks(v).map(N=>({coordinate:n(N)+b,value:N,offset:b})):n.domain().map((N,E)=>({coordinate:n(N)+b,value:l?l[N]:N,index:E,offset:b}))}},EO=we([br,Zd,tf,vu,sb,rf,ib,ab,Wn],Aq),Pq=(e,t,r,n,s,i,l)=>{if(!(t==null||r==null||n==null||n[0]===n[1])){var u=Kl(e,l),{tickCount:d}=t,m=0;return m=l==="angleAxis"&&(n==null?void 0:n.length)>=2?fi(n[0]-n[1])*2*m:m,u&&i?i.map((f,p)=>({coordinate:r(f)+m,value:f,index:p,offset:m})):r.ticks?r.ticks(d).map(f=>({coordinate:r(f)+m,value:f,offset:m})):r.domain().map((f,p)=>({coordinate:r(f)+m,value:s?s[f]:f,index:p,offset:m}))}},Zc=we([br,Zd,vu,rf,ib,ab,Wn],Pq),eu=we(Ds,vu,(e,t)=>{if(!(e==null||t==null))return jm(jm({},e),{},{scale:t})}),Tq=we([Ds,tf,rb,bO],nb);we((e,t,r)=>Xw(e,r),Tq,(e,t)=>{if(!(e==null||t==null))return jm(jm({},e),{},{scale:t})});var Oq=we([br,lp,cp],(e,t,r)=>{switch(e){case"horizontal":return t.some(n=>n.reversed)?"right-to-left":"left-to-right";case"vertical":return r.some(n=>n.reversed)?"bottom-to-top":"top-to-bottom";case"centric":case"radial":return"left-to-right";default:return}}),AO=e=>e.options.defaultTooltipEventType,PO=e=>e.options.validateTooltipEventTypes;function TO(e,t,r){if(e==null)return t;var n=e?"axis":"item";return r==null?t:r.includes(n)?n:t}function ob(e,t){var r=AO(e),n=PO(e);return TO(t,r,n)}function Iq(e){return Pt(t=>ob(t,e))}var OO=(e,t)=>{var r,n=Number(t);if(!(Pa(n)||t==null))return n>=0?e==null||(r=e[n])===null||r===void 0?void 0:r.value:void 0},Dq=e=>e.tooltip.settings,Vo={active:!1,index:null,dataKey:void 0,coordinate:void 0},$q={itemInteraction:{click:Vo,hover:Vo},axisInteraction:{click:Vo,hover:Vo},keyboardInteraction:Vo,syncInteraction:{active:!1,index:null,dataKey:void 0,label:void 0,coordinate:void 0,sourceViewBox:void 0},tooltipItemPayloads:[],settings:{shared:void 0,trigger:"hover",axisId:0,active:!1,defaultIndex:void 0}},IO=Js({name:"tooltip",initialState:$q,reducers:{addTooltipEntrySettings:{reducer(e,t){e.tooltipItemPayloads.push(t.payload)},prepare:Un()},removeTooltipEntrySettings:{reducer(e,t){var r=Xa(e).tooltipItemPayloads.indexOf(t.payload);r>-1&&e.tooltipItemPayloads.splice(r,1)},prepare:Un()},setTooltipSettingsState(e,t){e.settings=t.payload},setActiveMouseOverItemIndex(e,t){e.syncInteraction.active=!1,e.keyboardInteraction.active=!1,e.itemInteraction.hover.active=!0,e.itemInteraction.hover.index=t.payload.activeIndex,e.itemInteraction.hover.dataKey=t.payload.activeDataKey,e.itemInteraction.hover.coordinate=t.payload.activeCoordinate},mouseLeaveChart(e){e.itemInteraction.hover.active=!1,e.axisInteraction.hover.active=!1},mouseLeaveItem(e){e.itemInteraction.hover.active=!1},setActiveClickItemIndex(e,t){e.syncInteraction.active=!1,e.itemInteraction.click.active=!0,e.keyboardInteraction.active=!1,e.itemInteraction.click.index=t.payload.activeIndex,e.itemInteraction.click.dataKey=t.payload.activeDataKey,e.itemInteraction.click.coordinate=t.payload.activeCoordinate},setMouseOverAxisIndex(e,t){e.syncInteraction.active=!1,e.axisInteraction.hover.active=!0,e.keyboardInteraction.active=!1,e.axisInteraction.hover.index=t.payload.activeIndex,e.axisInteraction.hover.dataKey=t.payload.activeDataKey,e.axisInteraction.hover.coordinate=t.payload.activeCoordinate},setMouseClickAxisIndex(e,t){e.syncInteraction.active=!1,e.keyboardInteraction.active=!1,e.axisInteraction.click.active=!0,e.axisInteraction.click.index=t.payload.activeIndex,e.axisInteraction.click.dataKey=t.payload.activeDataKey,e.axisInteraction.click.coordinate=t.payload.activeCoordinate},setSyncInteraction(e,t){e.syncInteraction=t.payload},setKeyboardInteraction(e,t){e.keyboardInteraction.active=t.payload.active,e.keyboardInteraction.index=t.payload.activeIndex,e.keyboardInteraction.coordinate=t.payload.activeCoordinate,e.keyboardInteraction.dataKey=t.payload.activeDataKey}}}),{addTooltipEntrySettings:Rq,removeTooltipEntrySettings:Mq,setTooltipSettingsState:Fq,setActiveMouseOverItemIndex:DO,mouseLeaveItem:Lq,mouseLeaveChart:$O,setActiveClickItemIndex:zq,setMouseOverAxisIndex:RO,setMouseClickAxisIndex:Uq,setSyncInteraction:fx,setKeyboardInteraction:hx}=IO.actions,Bq=IO.reducer;function w2(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function xh(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?w2(Object(r),!0).forEach(function(n){Wq(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):w2(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Wq(e,t,r){return(t=Vq(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Vq(e){var t=qq(e,"string");return typeof t=="symbol"?t:t+""}function qq(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Hq(e,t,r){return t==="axis"?r==="click"?e.axisInteraction.click:e.axisInteraction.hover:r==="click"?e.itemInteraction.click:e.itemInteraction.hover}function Kq(e){return e.index!=null}var MO=(e,t,r,n)=>{if(t==null)return Vo;var s=Hq(e,t,r);if(s==null)return Vo;if(s.active)return s;if(e.keyboardInteraction.active)return e.keyboardInteraction;if(e.syncInteraction.active&&e.syncInteraction.index!=null)return e.syncInteraction;var i=e.settings.active===!0;if(Kq(s)){if(i)return xh(xh({},s),{},{active:!0})}else if(n!=null)return{active:!0,coordinate:void 0,dataKey:void 0,index:n};return xh(xh({},Vo),{},{coordinate:s.coordinate})},lb=(e,t)=>{var r=e==null?void 0:e.index;if(r==null)return null;var n=Number(r);if(!xn(n))return r;var s=0,i=1/0;return t.length>0&&(i=t.length-1),String(Math.max(s,Math.min(n,i)))},FO=(e,t,r,n,s,i,l,u)=>{if(!(i==null||u==null)){var d=l[0],m=d==null?void 0:u(d.positions,i);if(m!=null)return m;var f=s==null?void 0:s[Number(i)];if(f)switch(r){case"horizontal":return{x:f.coordinate,y:(n.top+t)/2};default:return{x:(n.left+e)/2,y:f.coordinate}}}},LO=(e,t,r,n)=>{if(t==="axis")return e.tooltipItemPayloads;if(e.tooltipItemPayloads.length===0)return[];var s;return r==="hover"?s=e.itemInteraction.hover.dataKey:s=e.itemInteraction.click.dataKey,s==null&&n!=null?[e.tooltipItemPayloads[0]]:e.tooltipItemPayloads.filter(i=>{var l;return((l=i.settings)===null||l===void 0?void 0:l.dataKey)===s})},nf=e=>e.options.tooltipPayloadSearcher,xu=e=>e.tooltip;function b2(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function j2(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?b2(Object(r),!0).forEach(function(n){Gq(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):b2(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Gq(e,t,r){return(t=Yq(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Yq(e){var t=Jq(e,"string");return typeof t=="symbol"?t:t+""}function Jq(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Xq(e,t){return e??t}var zO=(e,t,r,n,s,i,l)=>{if(!(t==null||i==null)){var{chartData:u,computedData:d,dataStartIndex:m,dataEndIndex:f}=r,p=[];return e.reduce((v,x)=>{var b,{dataDefinedOnItem:S,settings:j}=x,N=Xq(S,u),E=Array.isArray(N)?SP(N,m,f):N,C=(b=j==null?void 0:j.dataKey)!==null&&b!==void 0?b:n,I=j==null?void 0:j.nameKey,T;if(n&&Array.isArray(E)&&!Array.isArray(E[0])&&l==="axis"?T=cz(E,n,s):T=i(E,t,d,I),Array.isArray(T))T.forEach(V=>{var F=j2(j2({},j),{},{name:V.name,unit:V.unit,color:void 0,fill:void 0});v.push(J_({tooltipEntrySettings:F,dataKey:V.dataKey,payload:V.payload,value:Is(V.payload,V.dataKey),name:V.name}))});else{var O;v.push(J_({tooltipEntrySettings:j,dataKey:C,payload:T,value:Is(T,C),name:(O=Is(T,I))!==null&&O!==void 0?O:j==null?void 0:j.name}))}return v},p)}},cb=we([qn,br,GT,Vw,Vn],yO),Qq=we([e=>e.graphicalItems.cartesianItems,e=>e.graphicalItems.polarItems],(e,t)=>[...e,...t]),Zq=we([Vn,gu],YT),sf=we([Qq,qn,Zq],JT,{memoizeOptions:{resultEqualityCheck:Ep}}),eH=we([sf],e=>e.filter(Np)),tH=we([sf],ZT,{memoizeOptions:{resultEqualityCheck:Ep}}),wu=we([tH,el],eO),rH=we([eH,el,qn],qT),ub=we([wu,qn,sf],tO),UO=we([qn],eb),nH=we([qn],e=>e.allowDataOverflow),BO=we([UO,nH],jT),sH=we([sf],e=>e.filter(Np)),iH=we([rH,sH,jp],sO),aH=we([iH,el,Vn,BO],iO),oH=we([sf],QT),lH=we([wu,qn,oH,tb,Vn],lO,{memoizeOptions:{resultEqualityCheck:Cp}}),cH=we([cO,Vn,gu],yu),uH=we([cH,Vn],fO),dH=we([uO,Vn,gu],yu),fH=we([dH,Vn],hO),hH=we([dO,Vn,gu],yu),mH=we([hH,Vn],mO),pH=we([uH,mH,fH],Sm),gH=we([qn,UO,BO,aH,lH,pH,br,Vn],pO),WO=we([qn,br,wu,ub,jp,Vn,gH],gO),yH=we([WO,qn,cb],vO),vH=we([qn,WO,yH,Vn],xO),VO=e=>{var t=Vn(e),r=gu(e),n=!1;return rf(e,t,r,n)},qO=we([qn,VO],Sp),HO=we([qn,cb,vH,qO],nb),xH=we([br,ub,qn,Vn],NO),wH=we([br,ub,qn,Vn],CO),bH=(e,t,r,n,s,i,l,u)=>{if(t){var{type:d}=t,m=Kl(e,u);if(n){var f=r==="scaleBand"&&n.bandwidth?n.bandwidth()/2:2,p=d==="category"&&n.bandwidth?n.bandwidth()/f:0;return p=u==="angleAxis"&&s!=null&&(s==null?void 0:s.length)>=2?fi(s[0]-s[1])*2*p:p,m&&l?l.map((v,x)=>({coordinate:n(v)+p,value:v,index:x,offset:p})):n.domain().map((v,x)=>({coordinate:n(v)+p,value:i?i[v]:v,index:x,offset:p}))}}},yo=we([br,qn,cb,HO,VO,xH,wH,Vn],bH),db=we([AO,PO,Dq],(e,t,r)=>TO(r.shared,e,t)),KO=e=>e.tooltip.settings.trigger,fb=e=>e.tooltip.settings.defaultIndex,Op=we([xu,db,KO,fb],MO),tu=we([Op,wu],lb),GO=we([yo,tu],OO),YO=we([Op],e=>{if(e)return e.dataKey}),JO=we([xu,db,KO,fb],LO),jH=we([fo,ho,br,es,yo,fb,JO,nf],FO),SH=we([Op,jH],(e,t)=>e!=null&&e.coordinate?e.coordinate:t),kH=we([Op],e=>e.active),_H=we([JO,tu,el,nO,GO,nf,db],zO);we([_H],e=>{if(e!=null){var t=e.map(r=>r.payload).filter(r=>r!=null);return Array.from(new Set(t))}});function S2(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function k2(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?S2(Object(r),!0).forEach(function(n){NH(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):S2(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function NH(e,t,r){return(t=CH(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function CH(e){var t=EH(e,"string");return typeof t=="symbol"?t:t+""}function EH(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var AH=()=>Pt(qn),PH=()=>{var e=AH(),t=Pt(yo),r=Pt(HO);return am(!e||!r?void 0:k2(k2({},e),{},{scale:r}),t)};function _2(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Oc(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?_2(Object(r),!0).forEach(function(n){TH(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):_2(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function TH(e,t,r){return(t=OH(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function OH(e){var t=IH(e,"string");return typeof t=="symbol"?t:t+""}function IH(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var DH=(e,t,r,n)=>{var s=t.find(i=>i&&i.index===r);if(s){if(e==="horizontal")return{x:s.coordinate,y:n.chartY};if(e==="vertical")return{x:n.chartX,y:s.coordinate}}return{x:0,y:0}},$H=(e,t,r,n)=>{var s=t.find(m=>m&&m.index===r);if(s){if(e==="centric"){var i=s.coordinate,{radius:l}=n;return Oc(Oc(Oc({},n),ms(n.cx,n.cy,l,i)),{},{angle:i,radius:l})}var u=s.coordinate,{angle:d}=n;return Oc(Oc(Oc({},n),ms(n.cx,n.cy,u,d)),{},{angle:d,radius:u})}return{angle:0,clockWise:!1,cx:0,cy:0,endAngle:0,innerRadius:0,outerRadius:0,radius:0,startAngle:0,x:0,y:0}};function RH(e,t){var{chartX:r,chartY:n}=e;return r>=t.left&&r<=t.left+t.width&&n>=t.top&&n<=t.top+t.height}var XO=(e,t,r,n,s)=>{var i,l=-1,u=(i=t==null?void 0:t.length)!==null&&i!==void 0?i:0;if(u<=1||e==null)return 0;if(n==="angleAxis"&&s!=null&&Math.abs(Math.abs(s[1]-s[0])-360)<=1e-6)for(var d=0;d<u;d++){var m=d>0?r[d-1].coordinate:r[u-1].coordinate,f=r[d].coordinate,p=d>=u-1?r[0].coordinate:r[d+1].coordinate,v=void 0;if(fi(f-m)!==fi(p-f)){var x=[];if(fi(p-f)===fi(s[1]-s[0])){v=p;var b=f+s[1]-s[0];x[0]=Math.min(b,(b+m)/2),x[1]=Math.max(b,(b+m)/2)}else{v=m;var S=p+s[1]-s[0];x[0]=Math.min(f,(S+f)/2),x[1]=Math.max(f,(S+f)/2)}var j=[Math.min(f,(v+f)/2),Math.max(f,(v+f)/2)];if(e>j[0]&&e<=j[1]||e>=x[0]&&e<=x[1]){({index:l}=r[d]);break}}else{var N=Math.min(m,p),E=Math.max(m,p);if(e>(N+f)/2&&e<=(E+f)/2){({index:l}=r[d]);break}}}else if(t){for(var C=0;C<u;C++)if(C===0&&e<=(t[C].coordinate+t[C+1].coordinate)/2||C>0&&C<u-1&&e>(t[C].coordinate+t[C-1].coordinate)/2&&e<=(t[C].coordinate+t[C+1].coordinate)/2||C===u-1&&e>(t[C].coordinate+t[C-1].coordinate)/2){({index:l}=t[C]);break}}return l},MH=()=>Pt(Vw),hb=(e,t)=>t,QO=(e,t,r)=>r,mb=(e,t,r,n)=>n,FH=we(yo,e=>rp(e,t=>t.coordinate)),pb=we([xu,hb,QO,mb],MO),ZO=we([pb,wu],lb),LH=(e,t,r)=>{if(t!=null){var n=xu(e);return t==="axis"?r==="hover"?n.axisInteraction.hover.dataKey:n.axisInteraction.click.dataKey:r==="hover"?n.itemInteraction.hover.dataKey:n.itemInteraction.click.dataKey}},eI=we([xu,hb,QO,mb],LO),km=we([fo,ho,br,es,yo,mb,eI,nf],FO),zH=we([pb,km],(e,t)=>{var r;return(r=e.coordinate)!==null&&r!==void 0?r:t}),tI=we([yo,ZO],OO),UH=we([eI,ZO,el,nO,tI,nf,hb],zO),BH=we([pb],e=>({isActive:e.active,activeIndex:e.index})),WH=(e,t,r,n,s,i,l)=>{if(!(!e||!r||!n||!s)&&RH(e,l)){var u=OU(e,t),d=XO(u,i,s,r,n),m=DH(t,s,d,e);return{activeIndex:String(d),activeCoordinate:m}}},VH=(e,t,r,n,s,i,l)=>{if(!(!e||!n||!s||!i||!r)){var u=T7(e,r);if(u){var d=IU(u,t),m=XO(d,l,i,n,s),f=$H(t,i,m,u);return{activeIndex:String(m),activeCoordinate:f}}}},qH=(e,t,r,n,s,i,l,u)=>{if(!(!e||!t||!n||!s||!i))return t==="horizontal"||t==="vertical"?WH(e,t,n,s,i,l,u):VH(e,t,r,n,s,i,l)},HH=we(e=>e.zIndex.zIndexMap,(e,t)=>t,(e,t,r)=>r,(e,t,r)=>{if(t!=null){var n=e[t];if(n!=null)return r?n.panoramaElementId:n.elementId}}),KH=we(e=>e.zIndex.zIndexMap,e=>{var t=Object.keys(e).map(n=>parseInt(n,10)).concat(Object.values(Ys)),r=Array.from(new Set(t));return r.sort((n,s)=>n-s)},{memoizeOptions:{resultEqualityCheck:$V}});function N2(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function C2(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?N2(Object(r),!0).forEach(function(n){GH(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):N2(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function GH(e,t,r){return(t=YH(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function YH(e){var t=JH(e,"string");return typeof t=="symbol"?t:t+""}function JH(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var XH={},QH={zIndexMap:Object.values(Ys).reduce((e,t)=>C2(C2({},e),{},{[t]:{elementId:void 0,panoramaElementId:void 0,consumers:0}}),XH)},ZH=new Set(Object.values(Ys));function eK(e){return ZH.has(e)}var rI=Js({name:"zIndex",initialState:QH,reducers:{registerZIndexPortal:{reducer:(e,t)=>{var{zIndex:r}=t.payload;e.zIndexMap[r]?e.zIndexMap[r].consumers+=1:e.zIndexMap[r]={consumers:1,elementId:void 0,panoramaElementId:void 0}},prepare:Un()},unregisterZIndexPortal:{reducer:(e,t)=>{var{zIndex:r}=t.payload;e.zIndexMap[r]&&(e.zIndexMap[r].consumers-=1,e.zIndexMap[r].consumers<=0&&!eK(r)&&delete e.zIndexMap[r])},prepare:Un()},registerZIndexPortalId:{reducer:(e,t)=>{var{zIndex:r,elementId:n,isPanorama:s}=t.payload;e.zIndexMap[r]?s?e.zIndexMap[r].panoramaElementId=n:e.zIndexMap[r].elementId=n:e.zIndexMap[r]={consumers:0,elementId:s?void 0:n,panoramaElementId:s?n:void 0}},prepare:Un()},unregisterZIndexPortalId:{reducer:(e,t)=>{var{zIndex:r}=t.payload;e.zIndexMap[r]&&(t.payload.isPanorama?e.zIndexMap[r].panoramaElementId=void 0:e.zIndexMap[r].elementId=void 0)},prepare:Un()}}}),{registerZIndexPortal:tK,unregisterZIndexPortal:rK,registerZIndexPortalId:nK,unregisterZIndexPortalId:sK}=rI.actions,iK=rI.reducer;function tl(e){var{zIndex:t,children:r}=e,n=pB(),s=n&&t!==void 0&&t!==0,i=yi(),l=wn();y.useLayoutEffect(()=>s?(l(tK({zIndex:t})),()=>{l(rK({zIndex:t}))}):du,[l,t,s]);var u=Pt(m=>HH(m,t,i));if(!s)return r;if(!u)return null;var d=document.getElementById(u);return d?Ox.createPortal(r,d):null}function mx(){return mx=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},mx.apply(null,arguments)}function E2(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function wh(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?E2(Object(r),!0).forEach(function(n){aK(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):E2(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function aK(e,t,r){return(t=oK(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function oK(e){var t=lK(e,"string");return typeof t=="symbol"?t:t+""}function lK(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function cK(e){var{cursor:t,cursorComp:r,cursorProps:n}=e;return y.isValidElement(t)?y.cloneElement(t,n):y.createElement(r,n)}function uK(e){var t,{coordinate:r,payload:n,index:s,offset:i,tooltipAxisBandSize:l,layout:u,cursor:d,tooltipEventType:m,chartName:f}=e,p=r,v=n,x=s;if(!d||!p||f!=="ScatterChart"&&m!=="axis")return null;var b,S,j;if(f==="ScatterChart")b=p,S=HB,j=Ys.cursorLine;else if(f==="BarChart")b=KB(u,p,i,l),S=MP,j=Ys.cursorRectangle;else if(u==="radial"&&MA(p)){var{cx:N,cy:E,radius:C,startAngle:I,endAngle:T}=FP(p);b={cx:N,cy:E,startAngle:I,endAngle:T,innerRadius:C,outerRadius:C},S=zP,j=Ys.cursorLine}else b={points:$7(u,p,i)},S=OP,j=Ys.cursorLine;var O=typeof d=="object"&&"className"in d?d.className:void 0,V=wh(wh(wh(wh({stroke:"#ccc",pointerEvents:"none"},i),b),Zx(d)),{},{payload:v,payloadIndex:x,className:qr("recharts-tooltip-cursor",O)});return y.createElement(tl,{zIndex:(t=e.zIndex)!==null&&t!==void 0?t:j},y.createElement(cK,{cursor:d,cursorComp:S,cursorProps:V}))}function dK(e){var t=PH(),r=fB(),n=hp(),s=MH();return t==null||r==null||n==null||s==null?null:y.createElement(uK,mx({},e,{offset:r,layout:n,tooltipAxisBandSize:t,chartName:s}))}var nI=y.createContext(null),fK=()=>y.useContext(nI),B0={exports:{}},A2;function hK(){return A2||(A2=1,(function(e){var t=Object.prototype.hasOwnProperty,r="~";function n(){}Object.create&&(n.prototype=Object.create(null),new n().__proto__||(r=!1));function s(d,m,f){this.fn=d,this.context=m,this.once=f||!1}function i(d,m,f,p,v){if(typeof f!="function")throw new TypeError("The listener must be a function");var x=new s(f,p||d,v),b=r?r+m:m;return d._events[b]?d._events[b].fn?d._events[b]=[d._events[b],x]:d._events[b].push(x):(d._events[b]=x,d._eventsCount++),d}function l(d,m){--d._eventsCount===0?d._events=new n:delete d._events[m]}function u(){this._events=new n,this._eventsCount=0}u.prototype.eventNames=function(){var m=[],f,p;if(this._eventsCount===0)return m;for(p in f=this._events)t.call(f,p)&&m.push(r?p.slice(1):p);return Object.getOwnPropertySymbols?m.concat(Object.getOwnPropertySymbols(f)):m},u.prototype.listeners=function(m){var f=r?r+m:m,p=this._events[f];if(!p)return[];if(p.fn)return[p.fn];for(var v=0,x=p.length,b=new Array(x);v<x;v++)b[v]=p[v].fn;return b},u.prototype.listenerCount=function(m){var f=r?r+m:m,p=this._events[f];return p?p.fn?1:p.length:0},u.prototype.emit=function(m,f,p,v,x,b){var S=r?r+m:m;if(!this._events[S])return!1;var j=this._events[S],N=arguments.length,E,C;if(j.fn){switch(j.once&&this.removeListener(m,j.fn,void 0,!0),N){case 1:return j.fn.call(j.context),!0;case 2:return j.fn.call(j.context,f),!0;case 3:return j.fn.call(j.context,f,p),!0;case 4:return j.fn.call(j.context,f,p,v),!0;case 5:return j.fn.call(j.context,f,p,v,x),!0;case 6:return j.fn.call(j.context,f,p,v,x,b),!0}for(C=1,E=new Array(N-1);C<N;C++)E[C-1]=arguments[C];j.fn.apply(j.context,E)}else{var I=j.length,T;for(C=0;C<I;C++)switch(j[C].once&&this.removeListener(m,j[C].fn,void 0,!0),N){case 1:j[C].fn.call(j[C].context);break;case 2:j[C].fn.call(j[C].context,f);break;case 3:j[C].fn.call(j[C].context,f,p);break;case 4:j[C].fn.call(j[C].context,f,p,v);break;default:if(!E)for(T=1,E=new Array(N-1);T<N;T++)E[T-1]=arguments[T];j[C].fn.apply(j[C].context,E)}}return!0},u.prototype.on=function(m,f,p){return i(this,m,f,p,!1)},u.prototype.once=function(m,f,p){return i(this,m,f,p,!0)},u.prototype.removeListener=function(m,f,p,v){var x=r?r+m:m;if(!this._events[x])return this;if(!f)return l(this,x),this;var b=this._events[x];if(b.fn)b.fn===f&&(!v||b.once)&&(!p||b.context===p)&&l(this,x);else{for(var S=0,j=[],N=b.length;S<N;S++)(b[S].fn!==f||v&&!b[S].once||p&&b[S].context!==p)&&j.push(b[S]);j.length?this._events[x]=j.length===1?j[0]:j:l(this,x)}return this},u.prototype.removeAllListeners=function(m){var f;return m?(f=r?r+m:m,this._events[f]&&l(this,f)):(this._events=new n,this._eventsCount=0),this},u.prototype.off=u.prototype.removeListener,u.prototype.addListener=u.prototype.on,u.prefixed=r,u.EventEmitter=u,e.exports=u})(B0)),B0.exports}var mK=hK();const pK=ca(mK);var Fd=new pK,px="recharts.syncEvent.tooltip",P2="recharts.syncEvent.brush";function gK(e,t){if(t){var r=Number.parseInt(t,10);if(!Pa(r))return e==null?void 0:e[r]}}var yK={chartName:"",tooltipPayloadSearcher:void 0,eventEmitter:void 0,defaultTooltipEventType:"axis"},sI=Js({name:"options",initialState:yK,reducers:{createEventEmitter:e=>{e.eventEmitter==null&&(e.eventEmitter=Symbol("rechartsEventEmitter"))}}}),vK=sI.reducer,{createEventEmitter:xK}=sI.actions;function wK(e){return e.tooltip.syncInteraction}var bK={chartData:void 0,computedData:void 0,dataStartIndex:0,dataEndIndex:0},iI=Js({name:"chartData",initialState:bK,reducers:{setChartData(e,t){if(e.chartData=t.payload,t.payload==null){e.dataStartIndex=0,e.dataEndIndex=0;return}t.payload.length>0&&e.dataEndIndex!==t.payload.length-1&&(e.dataEndIndex=t.payload.length-1)},setComputedData(e,t){e.computedData=t.payload},setDataStartEndIndexes(e,t){var{startIndex:r,endIndex:n}=t.payload;r!=null&&(e.dataStartIndex=r),n!=null&&(e.dataEndIndex=n)}}}),{setChartData:T2,setDataStartEndIndexes:jK,setComputedData:Pee}=iI.actions,SK=iI.reducer,kK=["x","y"];function O2(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Ic(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?O2(Object(r),!0).forEach(function(n){_K(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):O2(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function _K(e,t,r){return(t=NK(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function NK(e){var t=CK(e,"string");return typeof t=="symbol"?t:t+""}function CK(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function EK(e,t){if(e==null)return{};var r,n,s=AK(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function AK(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function PK(){var e=Pt(qw),t=Pt(Hw),r=wn(),n=Pt(LT),s=Pt(yo),i=hp(),l=fp(),u=Pt(d=>d.rootProps.className);y.useEffect(()=>{if(e==null)return du;var d=(m,f,p)=>{if(t!==p&&e===m){if(n==="index"){var v;if(l&&f!==null&&f!==void 0&&(v=f.payload)!==null&&v!==void 0&&v.coordinate&&f.payload.sourceViewBox){var x=f.payload.coordinate,{x:b,y:S}=x,j=EK(x,kK),{x:N,y:E,width:C,height:I}=f.payload.sourceViewBox,T=Ic(Ic({},j),{},{x:l.x+(C?(b-N)/C:0)*l.width,y:l.y+(I?(S-E)/I:0)*l.height});r(Ic(Ic({},f),{},{payload:Ic(Ic({},f.payload),{},{coordinate:T})}))}else r(f);return}if(s!=null){var O;if(typeof n=="function"){var V={activeTooltipIndex:f.payload.index==null?void 0:Number(f.payload.index),isTooltipActive:f.payload.active,activeIndex:f.payload.index==null?void 0:Number(f.payload.index),activeLabel:f.payload.label,activeDataKey:f.payload.dataKey,activeCoordinate:f.payload.coordinate},F=n(s,V);O=s[F]}else n==="value"&&(O=s.find(ve=>String(ve.value)===f.payload.label));var{coordinate:L}=f.payload;if(O==null||f.payload.active===!1||L==null||l==null){r(fx({active:!1,coordinate:void 0,dataKey:void 0,index:null,label:void 0,sourceViewBox:void 0}));return}var{x:H,y:le}=L,K=Math.min(H,l.x+l.width),ie=Math.min(le,l.y+l.height),q={x:i==="horizontal"?O.coordinate:K,y:i==="horizontal"?ie:O.coordinate},G=fx({active:f.payload.active,coordinate:q,dataKey:f.payload.dataKey,index:String(O.index),label:f.payload.label,sourceViewBox:f.payload.sourceViewBox});r(G)}}};return Fd.on(px,d),()=>{Fd.off(px,d)}},[u,r,t,e,n,s,i,l])}function TK(){var e=Pt(qw),t=Pt(Hw),r=wn();y.useEffect(()=>{if(e==null)return du;var n=(s,i,l)=>{t!==l&&e===s&&r(jK(i))};return Fd.on(P2,n),()=>{Fd.off(P2,n)}},[r,t,e])}function OK(){var e=wn();y.useEffect(()=>{e(xK())},[e]),PK(),TK()}function IK(e,t,r,n,s,i){var l=Pt(x=>LH(x,e,t)),u=Pt(Hw),d=Pt(qw),m=Pt(LT),f=Pt(wK),p=f==null?void 0:f.active,v=fp();y.useEffect(()=>{if(!p&&d!=null&&u!=null){var x=fx({active:i,coordinate:r,dataKey:l,index:s,label:typeof n=="number"?String(n):n,sourceViewBox:v});Fd.emit(px,d,x,u)}},[p,r,l,s,n,u,d,m,i,v])}function I2(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function D2(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?I2(Object(r),!0).forEach(function(n){DK(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):I2(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function DK(e,t,r){return(t=$K(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function $K(e){var t=RK(e,"string");return typeof t=="symbol"?t:t+""}function RK(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function MK(e){return e.dataKey}function FK(e,t){return y.isValidElement(e)?y.cloneElement(e,t):typeof e=="function"?y.createElement(e,t):y.createElement(kB,t)}var $2=[],LK={allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",axisId:0,contentStyle:{},cursor:!0,filterNull:!0,isAnimationActive:!fu.isSsr,itemSorter:"name",itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,wrapperStyle:{}};function zK(e){var t,r,n=Ri(e,LK),{active:s,allowEscapeViewBox:i,animationDuration:l,animationEasing:u,content:d,filterNull:m,isAnimationActive:f,offset:p,payloadUniqBy:v,position:x,reverseDirection:b,useTranslate3d:S,wrapperStyle:j,cursor:N,shared:E,trigger:C,defaultIndex:I,portal:T,axisId:O}=n,V=wn(),F=typeof I=="number"?String(I):I;y.useEffect(()=>{V(Fq({shared:E,trigger:C,axisId:O,active:s,defaultIndex:F}))},[V,E,C,O,s,F]);var L=fp(),H=TP(),le=Iq(E),{activeIndex:K,isActive:ie}=(t=Pt(Te=>BH(Te,le,C,F)))!==null&&t!==void 0?t:{},q=Pt(Te=>UH(Te,le,C,F)),G=Pt(Te=>tI(Te,le,C,F)),ve=Pt(Te=>zH(Te,le,C,F)),M=q,Y=fK(),ce=(r=s??ie)!==null&&r!==void 0?r:!1,[he,U]=w8([M,ce]),re=le==="axis"?G:void 0;IK(le,C,ve,re,K,ce);var pe=T??Y;if(pe==null||L==null||le==null)return null;var $e=M??$2;ce||($e=$2),m&&$e.length&&($e=Hz($e.filter(Te=>Te.value!=null&&(Te.hide!==!0||n.includeHidden)),v,MK));var de=$e.length>0,ke=y.createElement(TB,{allowEscapeViewBox:i,animationDuration:l,animationEasing:u,isAnimationActive:f,active:ce,coordinate:ve,hasPayload:de,offset:p,position:x,reverseDirection:b,useTranslate3d:S,viewBox:L,wrapperStyle:j,lastBoundingBox:he,innerRef:U,hasPortalFromProps:!!T},FK(d,D2(D2({},n),{},{payload:$e,label:re,active:ce,activeIndex:K,coordinate:ve,accessibilityLayer:H})));return y.createElement(y.Fragment,null,Ox.createPortal(ke,pe),ce&&y.createElement(dK,{cursor:N,tooltipEventType:le,coordinate:ve,payload:$e,index:K}))}var gb=e=>null;gb.displayName="Cell";function UK(e,t,r){return(t=BK(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function BK(e){var t=WK(e,"string");return typeof t=="symbol"?t:t+""}function WK(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class VK{constructor(t){UK(this,"cache",new Map),this.maxSize=t}get(t){var r=this.cache.get(t);return r!==void 0&&(this.cache.delete(t),this.cache.set(t,r)),r}set(t,r){if(this.cache.has(t))this.cache.delete(t);else if(this.cache.size>=this.maxSize){var n=this.cache.keys().next().value;this.cache.delete(n)}this.cache.set(t,r)}clear(){this.cache.clear()}size(){return this.cache.size}}function R2(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function qK(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?R2(Object(r),!0).forEach(function(n){HK(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):R2(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function HK(e,t,r){return(t=KK(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function KK(e){var t=GK(e,"string");return typeof t=="symbol"?t:t+""}function GK(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var YK={cacheSize:2e3,enableCache:!0},aI=qK({},YK),M2=new VK(aI.cacheSize),JK={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},F2="recharts_measurement_span";function XK(e,t){var r=t.fontSize||"",n=t.fontFamily||"",s=t.fontWeight||"",i=t.fontStyle||"",l=t.letterSpacing||"",u=t.textTransform||"";return"".concat(e,"|").concat(r,"|").concat(n,"|").concat(s,"|").concat(i,"|").concat(l,"|").concat(u)}var L2=(e,t)=>{try{var r=document.getElementById(F2);r||(r=document.createElement("span"),r.setAttribute("id",F2),r.setAttribute("aria-hidden","true"),document.body.appendChild(r)),Object.assign(r.style,JK,t),r.textContent="".concat(e);var n=r.getBoundingClientRect();return{width:n.width,height:n.height}}catch{return{width:0,height:0}}},bd=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(t==null||fu.isSsr)return{width:0,height:0};if(!aI.enableCache)return L2(t,r);var n=XK(t,r),s=M2.get(n);if(s)return s;var i=L2(t,r);return M2.set(n,i),i},z2=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,U2=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,QK=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,ZK=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,oI={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},eG=Object.keys(oI),zc="NaN";function tG(e,t){return e*oI[t]}class qs{static parse(t){var r,[,n,s]=(r=ZK.exec(t))!==null&&r!==void 0?r:[];return new qs(parseFloat(n),s??"")}constructor(t,r){this.num=t,this.unit=r,this.num=t,this.unit=r,Pa(t)&&(this.unit=""),r!==""&&!QK.test(r)&&(this.num=NaN,this.unit=""),eG.includes(r)&&(this.num=tG(t,r),this.unit="px")}add(t){return this.unit!==t.unit?new qs(NaN,""):new qs(this.num+t.num,this.unit)}subtract(t){return this.unit!==t.unit?new qs(NaN,""):new qs(this.num-t.num,this.unit)}multiply(t){return this.unit!==""&&t.unit!==""&&this.unit!==t.unit?new qs(NaN,""):new qs(this.num*t.num,this.unit||t.unit)}divide(t){return this.unit!==""&&t.unit!==""&&this.unit!==t.unit?new qs(NaN,""):new qs(this.num/t.num,this.unit||t.unit)}toString(){return"".concat(this.num).concat(this.unit)}isNaN(){return Pa(this.num)}}function lI(e){if(e.includes(zc))return zc;for(var t=e;t.includes("*")||t.includes("/");){var r,[,n,s,i]=(r=z2.exec(t))!==null&&r!==void 0?r:[],l=qs.parse(n??""),u=qs.parse(i??""),d=s==="*"?l.multiply(u):l.divide(u);if(d.isNaN())return zc;t=t.replace(z2,d.toString())}for(;t.includes("+")||/.-\d+(?:\.\d+)?/.test(t);){var m,[,f,p,v]=(m=U2.exec(t))!==null&&m!==void 0?m:[],x=qs.parse(f??""),b=qs.parse(v??""),S=p==="+"?x.add(b):x.subtract(b);if(S.isNaN())return zc;t=t.replace(U2,S.toString())}return t}var B2=/\(([^()]*)\)/;function rG(e){for(var t=e,r;(r=B2.exec(t))!=null;){var[,n]=r;t=t.replace(B2,lI(n))}return t}function nG(e){var t=e.replace(/\s+/g,"");return t=rG(t),t=lI(t),t}function sG(e){try{return nG(e)}catch{return zc}}function W0(e){var t=sG(e.slice(5,-1));return t===zc?"":t}var iG=["x","y","lineHeight","capHeight","fill","scaleToFit","textAnchor","verticalAnchor"],aG=["dx","dy","angle","className","breakAll"];function gx(){return gx=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},gx.apply(null,arguments)}function W2(e,t){if(e==null)return{};var r,n,s=oG(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function oG(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var cI=/[ \f\n\r\t\v\u2028\u2029]+/,uI=e=>{var{children:t,breakAll:r,style:n}=e;try{var s=[];Zn(t)||(r?s=t.toString().split(""):s=t.toString().split(cI));var i=s.map(u=>({word:u,width:bd(u,n).width})),l=r?0:bd("",n).width;return{wordsWithComputedWidth:i,spaceWidth:l}}catch{return null}};function lG(e){return e==="start"||e==="middle"||e==="end"||e==="inherit"}var dI=(e,t,r,n)=>e.reduce((s,i)=>{var{word:l,width:u}=i,d=s[s.length-1];if(d&&u!=null&&(t==null||n||d.width+u+r<Number(t)))d.words.push(l),d.width+=u+r;else{var m={words:[l],width:u};s.push(m)}return s},[]),fI=e=>e.reduce((t,r)=>t.width>r.width?t:r),cG="",V2=(e,t,r,n,s,i,l,u)=>{var d=e.slice(0,t),m=uI({breakAll:r,style:n,children:d+cG});if(!m)return[!1,[]];var f=dI(m.wordsWithComputedWidth,i,l,u),p=f.length>s||fI(f).width>Number(i);return[p,f]},uG=(e,t,r,n,s)=>{var{maxLines:i,children:l,style:u,breakAll:d}=e,m=$t(i),f=String(l),p=dI(t,n,r,s);if(!m||s)return p;var v=p.length>i||fI(p).width>Number(n);if(!v)return p;for(var x=0,b=f.length-1,S=0,j;x<=b&&S<=f.length-1;){var N=Math.floor((x+b)/2),E=N-1,[C,I]=V2(f,E,d,u,i,n,r,s),[T]=V2(f,N,d,u,i,n,r,s);if(!C&&!T&&(x=N+1),C&&T&&(b=N-1),!C&&T){j=I;break}S++}return j||p},q2=e=>{var t=Zn(e)?[]:e.toString().split(cI);return[{words:t,width:void 0}]},dG=e=>{var{width:t,scaleToFit:r,children:n,style:s,breakAll:i,maxLines:l}=e;if((t||r)&&!fu.isSsr){var u,d,m=uI({breakAll:i,children:n,style:s});if(m){var{wordsWithComputedWidth:f,spaceWidth:p}=m;u=f,d=p}else return q2(n);return uG({breakAll:i,children:n,maxLines:l,style:s},u,d,t,!!r)}return q2(n)},hI="#808080",fG={breakAll:!1,capHeight:"0.71em",fill:hI,lineHeight:"1em",scaleToFit:!1,textAnchor:"start",verticalAnchor:"end",x:0,y:0},yb=y.forwardRef((e,t)=>{var r=Ri(e,fG),{x:n,y:s,lineHeight:i,capHeight:l,fill:u,scaleToFit:d,textAnchor:m,verticalAnchor:f}=r,p=W2(r,iG),v=y.useMemo(()=>dG({breakAll:p.breakAll,children:p.children,maxLines:p.maxLines,scaleToFit:d,style:p.style,width:p.width}),[p.breakAll,p.children,p.maxLines,d,p.style,p.width]),{dx:x,dy:b,angle:S,className:j,breakAll:N}=p,E=W2(p,aG);if(!Ta(n)||!Ta(s)||v.length===0)return null;var C=Number(n)+($t(x)?x:0),I=Number(s)+($t(b)?b:0);if(!xn(C)||!xn(I))return null;var T;switch(f){case"start":T=W0("calc(".concat(l,")"));break;case"middle":T=W0("calc(".concat((v.length-1)/2," * -").concat(i," + (").concat(l," / 2))"));break;default:T=W0("calc(".concat(v.length-1," * -").concat(i,")"));break}var O=[];if(d){var V=v[0].width,{width:F}=p;O.push("scale(".concat($t(F)&&$t(V)?F/V:1,")"))}return S&&O.push("rotate(".concat(S,", ").concat(C,", ").concat(I,")")),O.length&&(E.transform=O.join(" ")),y.createElement("text",gx({},Ii(E),{ref:t,x:C,y:I,className:qr("recharts-text",j),textAnchor:m,fill:u.includes("url")?hI:u}),v.map((L,H)=>{var le=L.words.join(N?"":" ");return y.createElement("tspan",{x:C,dy:H===0?T:i,key:"".concat(le,"-").concat(H)},le)}))});yb.displayName="Text";var hG=["labelRef"];function mG(e,t){if(e==null)return{};var r,n,s=pG(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function pG(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function H2(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function pn(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?H2(Object(r),!0).forEach(function(n){gG(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):H2(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function gG(e,t,r){return(t=yG(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function yG(e){var t=vG(e,"string");return typeof t=="symbol"?t:t+""}function vG(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Ka(){return Ka=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Ka.apply(null,arguments)}var mI=y.createContext(null),xG=e=>{var{x:t,y:r,upperWidth:n,lowerWidth:s,width:i,height:l,children:u}=e,d=y.useMemo(()=>({x:t,y:r,upperWidth:n,lowerWidth:s,width:i,height:l}),[t,r,n,s,i,l]);return y.createElement(mI.Provider,{value:d},u)},pI=()=>{var e=y.useContext(mI),t=fp();return e||AP(t)},wG=y.createContext(null),bG=()=>{var e=y.useContext(wG),t=Pt(VT);return e||t},jG=e=>{var{value:t,formatter:r}=e,n=Zn(e.children)?t:e.children;return typeof r=="function"?r(n):n},vb=e=>e!=null&&typeof e=="function",SG=(e,t)=>{var r=fi(t-e),n=Math.min(Math.abs(t-e),360);return r*n},kG=(e,t,r,n,s)=>{var{offset:i,className:l}=e,{cx:u,cy:d,innerRadius:m,outerRadius:f,startAngle:p,endAngle:v,clockWise:x}=s,b=(m+f)/2,S=SG(p,v),j=S>=0?1:-1,N,E;switch(t){case"insideStart":N=p+j*i,E=x;break;case"insideEnd":N=v-j*i,E=!x;break;case"end":N=v+j*i,E=x;break;default:throw new Error("Unsupported position ".concat(t))}E=S<=0?E:!E;var C=ms(u,d,b,N),I=ms(u,d,b,N+(E?1:-1)*359),T="M".concat(C.x,",").concat(C.y,`
    A`).concat(b,",").concat(b,",0,1,").concat(E?0:1,`,
    `).concat(I.x,",").concat(I.y),O=Zn(e.id)?Ed("recharts-radial-line-"):e.id;return y.createElement("text",Ka({},n,{dominantBaseline:"central",className:qr("recharts-radial-bar-label",l)}),y.createElement("defs",null,y.createElement("path",{id:O,d:T})),y.createElement("textPath",{xlinkHref:"#".concat(O)},r))},_G=(e,t,r)=>{var{cx:n,cy:s,innerRadius:i,outerRadius:l,startAngle:u,endAngle:d}=e,m=(u+d)/2;if(r==="outside"){var{x:f,y:p}=ms(n,s,l+t,m);return{x:f,y:p,textAnchor:f>=n?"start":"end",verticalAnchor:"middle"}}if(r==="center")return{x:n,y:s,textAnchor:"middle",verticalAnchor:"middle"};if(r==="centerTop")return{x:n,y:s,textAnchor:"middle",verticalAnchor:"start"};if(r==="centerBottom")return{x:n,y:s,textAnchor:"middle",verticalAnchor:"end"};var v=(i+l)/2,{x,y:b}=ms(n,s,v,m);return{x,y:b,textAnchor:"middle",verticalAnchor:"middle"}},yx=e=>"cx"in e&&$t(e.cx),NG=(e,t)=>{var{parentViewBox:r,offset:n,position:s}=e,i;r!=null&&!yx(r)&&(i=r);var{x:l,y:u,upperWidth:d,lowerWidth:m,height:f}=t,p=l,v=l+(d-m)/2,x=(p+v)/2,b=(d+m)/2,S=p+d/2,j=f>=0?1:-1,N=j*n,E=j>0?"end":"start",C=j>0?"start":"end",I=d>=0?1:-1,T=I*n,O=I>0?"end":"start",V=I>0?"start":"end";if(s==="top"){var F={x:p+d/2,y:u-N,textAnchor:"middle",verticalAnchor:E};return pn(pn({},F),i?{height:Math.max(u-i.y,0),width:d}:{})}if(s==="bottom"){var L={x:v+m/2,y:u+f+N,textAnchor:"middle",verticalAnchor:C};return pn(pn({},L),i?{height:Math.max(i.y+i.height-(u+f),0),width:m}:{})}if(s==="left"){var H={x:x-T,y:u+f/2,textAnchor:O,verticalAnchor:"middle"};return pn(pn({},H),i?{width:Math.max(H.x-i.x,0),height:f}:{})}if(s==="right"){var le={x:x+b+T,y:u+f/2,textAnchor:V,verticalAnchor:"middle"};return pn(pn({},le),i?{width:Math.max(i.x+i.width-le.x,0),height:f}:{})}var K=i?{width:b,height:f}:{};return s==="insideLeft"?pn({x:x+T,y:u+f/2,textAnchor:V,verticalAnchor:"middle"},K):s==="insideRight"?pn({x:x+b-T,y:u+f/2,textAnchor:O,verticalAnchor:"middle"},K):s==="insideTop"?pn({x:p+d/2,y:u+N,textAnchor:"middle",verticalAnchor:C},K):s==="insideBottom"?pn({x:v+m/2,y:u+f-N,textAnchor:"middle",verticalAnchor:E},K):s==="insideTopLeft"?pn({x:p+T,y:u+N,textAnchor:V,verticalAnchor:C},K):s==="insideTopRight"?pn({x:p+d-T,y:u+N,textAnchor:O,verticalAnchor:C},K):s==="insideBottomLeft"?pn({x:v+T,y:u+f-N,textAnchor:V,verticalAnchor:E},K):s==="insideBottomRight"?pn({x:v+m-T,y:u+f-N,textAnchor:O,verticalAnchor:E},K):s&&typeof s=="object"&&($t(s.x)||no(s.x))&&($t(s.y)||no(s.y))?pn({x:l+la(s.x,b),y:u+la(s.y,f),textAnchor:"end",verticalAnchor:"end"},K):pn({x:S,y:u+f/2,textAnchor:"middle",verticalAnchor:"middle"},K)},CG={offset:5,zIndex:Ys.label};function zo(e){var t=Ri(e,CG),{viewBox:r,position:n,value:s,children:i,content:l,className:u="",textBreakAll:d,labelRef:m}=t,f=bG(),p=pI(),v=n==="center"?p:f??p,x,b,S;if(r==null?x=v:yx(r)?x=r:x=AP(r),!x||Zn(s)&&Zn(i)&&!y.isValidElement(l)&&typeof l!="function")return null;var j=pn(pn({},t),{},{viewBox:x});if(y.isValidElement(l)){var{labelRef:N}=j,E=mG(j,hG);return y.cloneElement(l,E)}if(typeof l=="function"){if(b=y.createElement(l,j),y.isValidElement(b))return b}else b=jG(t);var C=Ii(t);if(yx(x)){if(n==="insideStart"||n==="insideEnd"||n==="end")return kG(t,n,b,C,x);S=_G(x,t.offset,t.position)}else S=NG(t,x);return y.createElement(tl,{zIndex:t.zIndex},y.createElement(yb,Ka({ref:m,className:qr("recharts-label",u)},C,S,{textAnchor:lG(C.textAnchor)?C.textAnchor:S.textAnchor,breakAll:d}),b))}zo.displayName="Label";var EG=(e,t,r)=>{if(!e)return null;var n={viewBox:t,labelRef:r};return e===!0?y.createElement(zo,Ka({key:"label-implicit"},n)):Ta(e)?y.createElement(zo,Ka({key:"label-implicit",value:e},n)):y.isValidElement(e)?e.type===zo?y.cloneElement(e,pn({key:"label-implicit"},n)):y.createElement(zo,Ka({key:"label-implicit",content:e},n)):vb(e)?y.createElement(zo,Ka({key:"label-implicit",content:e},n)):e&&typeof e=="object"?y.createElement(zo,Ka({},e,{key:"label-implicit"},n)):null};function AG(e){var{label:t,labelRef:r}=e,n=pI();return EG(t,n,r)||null}var V0={},q0={},K2;function PG(){return K2||(K2=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r[r.length-1]}e.last=t})(q0)),q0}var H0={},G2;function TG(){return G2||(G2=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return Array.isArray(r)?r:Array.from(r)}e.toArray=t})(H0)),H0}var Y2;function OG(){return Y2||(Y2=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=PG(),r=TG(),n=ow();function s(i){if(n.isArrayLike(i))return t.last(r.toArray(i))}e.last=s})(V0)),V0}var K0,J2;function IG(){return J2||(J2=1,K0=OG().last),K0}var DG=IG();const $G=ca(DG);var RG=["valueAccessor"],MG=["dataKey","clockWise","id","textBreakAll","zIndex"];function _m(){return _m=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},_m.apply(null,arguments)}function X2(e,t){if(e==null)return{};var r,n,s=FG(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function FG(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var LG=e=>Array.isArray(e.value)?$G(e.value):e.value,gI=y.createContext(void 0),zG=gI.Provider,yI=y.createContext(void 0);yI.Provider;function UG(){return y.useContext(gI)}function BG(){return y.useContext(yI)}function Ph(e){var{valueAccessor:t=LG}=e,r=X2(e,RG),{dataKey:n,clockWise:s,id:i,textBreakAll:l,zIndex:u}=r,d=X2(r,MG),m=UG(),f=BG(),p=m||f;return!p||!p.length?null:y.createElement(tl,{zIndex:u??Ys.label},y.createElement(ro,{className:"recharts-label-list"},p.map((v,x)=>{var b,S=Zn(n)?t(v,x):Is(v&&v.payload,n),j=Zn(i)?{}:{id:"".concat(i,"-").concat(x)};return y.createElement(zo,_m({key:"label-".concat(x)},Ii(v),d,j,{fill:(b=r.fill)!==null&&b!==void 0?b:v.fill,parentViewBox:v.parentViewBox,value:S,textBreakAll:l,viewBox:v.viewBox,index:x,zIndex:0}))})))}Ph.displayName="LabelList";function WG(e){var{label:t}=e;return t?t===!0?y.createElement(Ph,{key:"labelList-implicit"}):y.isValidElement(t)||vb(t)?y.createElement(Ph,{key:"labelList-implicit",content:t}):typeof t=="object"?y.createElement(Ph,_m({key:"labelList-implicit"},t,{type:String(t.type)})):null:null}var VG={radiusAxis:{},angleAxis:{}},vI=Js({name:"polarAxis",initialState:VG,reducers:{addRadiusAxis(e,t){e.radiusAxis[t.payload.id]=t.payload},removeRadiusAxis(e,t){delete e.radiusAxis[t.payload.id]},addAngleAxis(e,t){e.angleAxis[t.payload.id]=t.payload},removeAngleAxis(e,t){delete e.angleAxis[t.payload.id]}}}),{addRadiusAxis:Tee,removeRadiusAxis:Oee,addAngleAxis:Iee,removeAngleAxis:Dee}=vI.actions,qG=vI.reducer,G0={exports:{}},Sr={};/**
 * @license React
 * react-is.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Q2;function HG(){if(Q2)return Sr;Q2=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),i=Symbol.for("react.consumer"),l=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),m=Symbol.for("react.suspense_list"),f=Symbol.for("react.memo"),p=Symbol.for("react.lazy"),v=Symbol.for("react.view_transition"),x=Symbol.for("react.client.reference");function b(S){if(typeof S=="object"&&S!==null){var j=S.$$typeof;switch(j){case e:switch(S=S.type,S){case r:case s:case n:case d:case m:case v:return S;default:switch(S=S&&S.$$typeof,S){case l:case u:case p:case f:return S;case i:return S;default:return j}}case t:return j}}}return Sr.ContextConsumer=i,Sr.ContextProvider=l,Sr.Element=e,Sr.ForwardRef=u,Sr.Fragment=r,Sr.Lazy=p,Sr.Memo=f,Sr.Portal=t,Sr.Profiler=s,Sr.StrictMode=n,Sr.Suspense=d,Sr.SuspenseList=m,Sr.isContextConsumer=function(S){return b(S)===i},Sr.isContextProvider=function(S){return b(S)===l},Sr.isElement=function(S){return typeof S=="object"&&S!==null&&S.$$typeof===e},Sr.isForwardRef=function(S){return b(S)===u},Sr.isFragment=function(S){return b(S)===r},Sr.isLazy=function(S){return b(S)===p},Sr.isMemo=function(S){return b(S)===f},Sr.isPortal=function(S){return b(S)===t},Sr.isProfiler=function(S){return b(S)===s},Sr.isStrictMode=function(S){return b(S)===n},Sr.isSuspense=function(S){return b(S)===d},Sr.isSuspenseList=function(S){return b(S)===m},Sr.isValidElementType=function(S){return typeof S=="string"||typeof S=="function"||S===r||S===s||S===n||S===d||S===m||typeof S=="object"&&S!==null&&(S.$$typeof===p||S.$$typeof===f||S.$$typeof===l||S.$$typeof===i||S.$$typeof===u||S.$$typeof===x||S.getModuleId!==void 0)},Sr.typeOf=b,Sr}var Z2;function KG(){return Z2||(Z2=1,G0.exports=HG()),G0.exports}var GG=KG(),eC=e=>typeof e=="string"?e:e?e.displayName||e.name||"Component":"",tC=null,Y0=null,xI=e=>{if(e===tC&&Array.isArray(Y0))return Y0;var t=[];return y.Children.forEach(e,r=>{Zn(r)||(GG.isFragment(r)?t=t.concat(xI(r.props.children)):t.push(r))}),Y0=t,tC=e,t};function YG(e,t){var r=[],n=[];return Array.isArray(t)?n=t.map(s=>eC(s)):n=[eC(t)],xI(e).forEach(s=>{var i=Yc(s,"type.displayName")||Yc(s,"type.name");i&&n.indexOf(i)!==-1&&r.push(s)}),r}var J0={},rC;function JG(){return rC||(rC=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){var s;if(typeof r!="object"||r==null)return!1;if(Object.getPrototypeOf(r)===null)return!0;if(Object.prototype.toString.call(r)!=="[object Object]"){const i=r[Symbol.toStringTag];return i==null||!((s=Object.getOwnPropertyDescriptor(r,Symbol.toStringTag))!=null&&s.writable)?!1:r.toString()===`[object ${i}]`}let n=r;for(;Object.getPrototypeOf(n)!==null;)n=Object.getPrototypeOf(n);return Object.getPrototypeOf(r)===n}e.isPlainObject=t})(J0)),J0}var X0,nC;function XG(){return nC||(nC=1,X0=JG().isPlainObject),X0}var QG=XG();const ZG=ca(QG);function sC(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function iC(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?sC(Object(r),!0).forEach(function(n){eY(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):sC(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function eY(e,t,r){return(t=tY(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function tY(e){var t=rY(e,"string");return typeof t=="symbol"?t:t+""}function rY(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Nm(){return Nm=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Nm.apply(null,arguments)}var aC=(e,t,r,n,s)=>{var i=r-n,l;return l="M ".concat(e,",").concat(t),l+="L ".concat(e+r,",").concat(t),l+="L ".concat(e+r-i/2,",").concat(t+s),l+="L ".concat(e+r-i/2-n,",").concat(t+s),l+="L ".concat(e,",").concat(t," Z"),l},nY={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},sY=e=>{var t=Ri(e,nY),{x:r,y:n,upperWidth:s,lowerWidth:i,height:l,className:u}=t,{animationEasing:d,animationDuration:m,animationBegin:f,isUpdateAnimationActive:p}=t,v=y.useRef(null),[x,b]=y.useState(-1),S=y.useRef(s),j=y.useRef(i),N=y.useRef(l),E=y.useRef(r),C=y.useRef(n),I=yw(e,"trapezoid-");if(y.useEffect(()=>{if(v.current&&v.current.getTotalLength)try{var q=v.current.getTotalLength();q&&b(q)}catch{}},[]),r!==+r||n!==+n||s!==+s||i!==+i||l!==+l||s===0&&i===0||l===0)return null;var T=qr("recharts-trapezoid",u);if(!p)return y.createElement("g",null,y.createElement("path",Nm({},Ii(t),{className:T,d:aC(r,n,s,i,l)})));var O=S.current,V=j.current,F=N.current,L=E.current,H=C.current,le="0px ".concat(x===-1?1:x,"px"),K="".concat(x,"px 0px"),ie=IP(["strokeDasharray"],m,d);return y.createElement(gw,{animationId:I,key:I,canBegin:x>0,duration:m,easing:d,isActive:p,begin:f},q=>{var G=hs(O,s,q),ve=hs(V,i,q),M=hs(F,l,q),Y=hs(L,r,q),ce=hs(H,n,q);v.current&&(S.current=G,j.current=ve,N.current=M,E.current=Y,C.current=ce);var he=q>0?{transition:ie,strokeDasharray:K}:{strokeDasharray:le};return y.createElement("path",Nm({},Ii(t),{className:T,d:aC(Y,ce,G,ve,M),ref:v,style:iC(iC({},he),t.style)}))})},iY=["option","shapeType","propTransformer","activeClassName","isActive"];function aY(e,t){if(e==null)return{};var r,n,s=oY(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function oY(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function oC(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Cm(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?oC(Object(r),!0).forEach(function(n){lY(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):oC(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function lY(e,t,r){return(t=cY(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function cY(e){var t=uY(e,"string");return typeof t=="symbol"?t:t+""}function uY(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function dY(e,t){return Cm(Cm({},t),e)}function fY(e,t){return e==="symbols"}function lC(e){var{shapeType:t,elementProps:r}=e;switch(t){case"rectangle":return y.createElement(MP,r);case"trapezoid":return y.createElement(sY,r);case"sector":return y.createElement(zP,r);case"symbols":if(fY(t))return y.createElement(RA,r);break;case"curve":return y.createElement(OP,r);default:return null}}function hY(e){return y.isValidElement(e)?e.props:e}function mY(e){var{option:t,shapeType:r,propTransformer:n=dY,activeClassName:s="recharts-active-shape",isActive:i}=e,l=aY(e,iY),u;if(y.isValidElement(t))u=y.cloneElement(t,Cm(Cm({},l),hY(t)));else if(typeof t=="function")u=t(l);else if(ZG(t)&&typeof t!="boolean"){var d=n(t,l);u=y.createElement(lC,{shapeType:r,elementProps:d})}else{var m=l;u=y.createElement(lC,{shapeType:r,elementProps:m})}return i?y.createElement(ro,{className:s},u):u}var wI=(e,t)=>{var r=wn();return(n,s)=>i=>{e==null||e(n,s,i),r(DO({activeIndex:String(s),activeDataKey:t,activeCoordinate:n.tooltipPosition}))}},bI=e=>{var t=wn();return(r,n)=>s=>{e==null||e(r,n,s),t(Lq())}},jI=(e,t)=>{var r=wn();return(n,s)=>i=>{e==null||e(n,s,i),r(zq({activeIndex:String(s),activeDataKey:t,activeCoordinate:n.tooltipPosition}))}};function pY(e){var{fn:t,args:r}=e,n=wn(),s=yi();return y.useLayoutEffect(()=>{if(!s){var i=t(r);return n(Rq(i)),()=>{n(Mq(i))}}},[t,r,n,s]),null}function gY(e){var{legendPayload:t}=e,r=wn(),n=yi();return y.useLayoutEffect(()=>n?du:(r(yB(t)),()=>{r(vB(t))}),[r,n,t]),null}var Q0,yY=()=>{var[e]=y.useState(()=>Ed("uid-"));return e},vY=(Q0=hD.useId)!==null&&Q0!==void 0?Q0:yY;function SI(e,t){var r=vY();return t||(e?"".concat(e,"-").concat(r):r)}var xY=y.createContext(void 0),wY=e=>{var{id:t,type:r,children:n}=e,s=SI("recharts-".concat(r),t);return y.createElement(xY.Provider,{value:s},n(s))},bY={cartesianItems:[],polarItems:[]},kI=Js({name:"graphicalItems",initialState:bY,reducers:{addCartesianGraphicalItem:{reducer(e,t){e.cartesianItems.push(t.payload)},prepare:Un()},replaceCartesianGraphicalItem:{reducer(e,t){var{prev:r,next:n}=t.payload,s=Xa(e).cartesianItems.indexOf(r);s>-1&&(e.cartesianItems[s]=n)},prepare:Un()},removeCartesianGraphicalItem:{reducer(e,t){var r=Xa(e).cartesianItems.indexOf(t.payload);r>-1&&e.cartesianItems.splice(r,1)},prepare:Un()},addPolarGraphicalItem:{reducer(e,t){e.polarItems.push(t.payload)},prepare:Un()},removePolarGraphicalItem:{reducer(e,t){var r=Xa(e).polarItems.indexOf(t.payload);r>-1&&e.polarItems.splice(r,1)},prepare:Un()}}}),{addCartesianGraphicalItem:jY,replaceCartesianGraphicalItem:SY,removeCartesianGraphicalItem:kY,addPolarGraphicalItem:$ee,removePolarGraphicalItem:Ree}=kI.actions,_Y=kI.reducer;function NY(e){var t=wn(),r=y.useRef(null);return y.useLayoutEffect(()=>{r.current===null?t(jY(e)):r.current!==e&&t(SY({prev:r.current,next:e})),r.current=e},[t,e]),y.useLayoutEffect(()=>()=>{r.current&&(t(kY(r.current)),r.current=null)},[t]),null}function cC(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function uC(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?cC(Object(r),!0).forEach(function(n){CY(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):cC(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function CY(e,t,r){return(t=EY(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function EY(e){var t=AY(e,"string");return typeof t=="symbol"?t:t+""}function AY(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var PY={xAxis:{},yAxis:{},zAxis:{}},_I=Js({name:"cartesianAxis",initialState:PY,reducers:{addXAxis:{reducer(e,t){e.xAxis[t.payload.id]=t.payload},prepare:Un()},removeXAxis:{reducer(e,t){delete e.xAxis[t.payload.id]},prepare:Un()},addYAxis:{reducer(e,t){e.yAxis[t.payload.id]=t.payload},prepare:Un()},removeYAxis:{reducer(e,t){delete e.yAxis[t.payload.id]},prepare:Un()},addZAxis:{reducer(e,t){e.zAxis[t.payload.id]=t.payload},prepare:Un()},removeZAxis:{reducer(e,t){delete e.zAxis[t.payload.id]},prepare:Un()},updateYAxisWidth(e,t){var{id:r,width:n}=t.payload,s=e.yAxis[r];if(s){var i=s.widthHistory||[];if(i.length===3&&i[0]===i[2]&&n===i[1]&&n!==s.width&&Math.abs(n-i[0])<=1)return;var l=[...i,n].slice(-3);e.yAxis[r]=uC(uC({},e.yAxis[r]),{},{width:n,widthHistory:l})}}}}),{addXAxis:TY,removeXAxis:OY,addYAxis:IY,removeYAxis:DY,addZAxis:Mee,removeZAxis:Fee,updateYAxisWidth:$Y}=_I.actions,RY=_I.reducer,MY=we([es],e=>({top:e.top,bottom:e.bottom,left:e.left,right:e.right})),FY=we([MY,fo,ho],(e,t,r)=>{if(!(!e||t==null||r==null))return{x:e.left,y:e.top,width:Math.max(0,t-e.left-e.right),height:Math.max(0,r-e.top-e.bottom)}}),NI=()=>Pt(FY),LY="Invariant failed";function zY(e,t){throw new Error(LY)}var UY=["x","y"];function vx(){return vx=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},vx.apply(null,arguments)}function dC(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function sd(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?dC(Object(r),!0).forEach(function(n){BY(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):dC(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function BY(e,t,r){return(t=WY(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function WY(e){var t=VY(e,"string");return typeof t=="symbol"?t:t+""}function VY(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function qY(e,t){if(e==null)return{};var r,n,s=HY(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function HY(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function KY(e,t){var{x:r,y:n}=e,s=qY(e,UY),i="".concat(r),l=parseInt(i,10),u="".concat(n),d=parseInt(u,10),m="".concat(t.height||s.height),f=parseInt(m,10),p="".concat(t.width||s.width),v=parseInt(p,10);return sd(sd(sd(sd(sd({},t),s),l?{x:l}:{}),d?{y:d}:{}),{},{height:f,width:v,name:t.name,radius:t.radius})}function Em(e){return y.createElement(mY,vx({shapeType:"rectangle",propTransformer:KY,activeClassName:"recharts-active-bar"},e))}var GY=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return(n,s)=>{if($t(t))return t;var i=$t(n)||Zn(n);return i?t(n,s):(i||zY(),r)}},YY={},CI=Js({name:"errorBars",initialState:YY,reducers:{addErrorBar:(e,t)=>{var{itemId:r,errorBar:n}=t.payload;e[r]||(e[r]=[]),e[r].push(n)},replaceErrorBar:(e,t)=>{var{itemId:r,prev:n,next:s}=t.payload;e[r]&&(e[r]=e[r].map(i=>i.dataKey===n.dataKey&&i.direction===n.direction?s:i))},removeErrorBar:(e,t)=>{var{itemId:r,errorBar:n}=t.payload;e[r]&&(e[r]=e[r].filter(s=>s.dataKey!==n.dataKey||s.direction!==n.direction))}}}),{addErrorBar:Lee,replaceErrorBar:zee,removeErrorBar:Uee}=CI.actions,JY=CI.reducer,XY=["children"];function QY(e,t){if(e==null)return{};var r,n,s=ZY(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function ZY(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var eJ={data:[],xAxisId:"xAxis-0",yAxisId:"yAxis-0",dataPointFormatter:()=>({x:0,y:0,value:0}),errorBarOffset:0},tJ=y.createContext(eJ);function rJ(e){var{children:t}=e,r=QY(e,XY);return y.createElement(tJ.Provider,{value:r},t)}function EI(e,t){var r,n,s=Pt(m=>po(m,e)),i=Pt(m=>go(m,t)),l=(r=s==null?void 0:s.allowDataOverflow)!==null&&r!==void 0?r:ai.allowDataOverflow,u=(n=i==null?void 0:i.allowDataOverflow)!==null&&n!==void 0?n:oi.allowDataOverflow,d=l||u;return{needClip:d,needClipX:l,needClipY:u}}function nJ(e){var{xAxisId:t,yAxisId:r,clipPathId:n}=e,s=NI(),{needClipX:i,needClipY:l,needClip:u}=EI(t,r);if(!u||!s)return null;var{x:d,y:m,width:f,height:p}=s;return y.createElement("clipPath",{id:"clipPath-".concat(n)},y.createElement("rect",{x:i?d:d-f/2,y:l?m:m-p/2,width:i?f:f*2,height:l?p:p*2}))}function sJ(e,t){return e&&typeof e=="object"&&"zIndex"in e&&typeof e.zIndex=="number"&&xn(e.zIndex)?e.zIndex:t}var iJ=["onMouseEnter","onMouseLeave","onClick"],aJ=["value","background","tooltipPosition"],oJ=["id"],lJ=["onMouseEnter","onClick","onMouseLeave"];function co(){return co=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},co.apply(null,arguments)}function fC(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Ps(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?fC(Object(r),!0).forEach(function(n){cJ(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):fC(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function cJ(e,t,r){return(t=uJ(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function uJ(e){var t=dJ(e,"string");return typeof t=="symbol"?t:t+""}function dJ(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Am(e,t){if(e==null)return{};var r,n,s=fJ(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function fJ(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var hJ=e=>{var{dataKey:t,name:r,fill:n,legendType:s,hide:i}=e;return[{inactive:i,dataKey:t,type:s,color:n,value:kP(r,t),payload:e}]};function mJ(e){var{dataKey:t,stroke:r,strokeWidth:n,fill:s,name:i,hide:l,unit:u}=e;return{dataDefinedOnItem:void 0,positions:void 0,settings:{stroke:r,strokeWidth:n,fill:s,dataKey:t,nameKey:void 0,name:kP(i,t),hide:l,type:e.tooltipType,color:e.fill,unit:u}}}function pJ(e){var t=Pt(tu),{data:r,dataKey:n,background:s,allOtherBarProps:i}=e,{onMouseEnter:l,onMouseLeave:u,onClick:d}=i,m=Am(i,iJ),f=wI(l,n),p=bI(u),v=jI(d,n);if(!s||r==null)return null;var x=Zx(s);return y.createElement(tl,{zIndex:sJ(s,Ys.barBackground)},r.map((b,S)=>{var{value:j,background:N,tooltipPosition:E}=b,C=Am(b,aJ);if(!N)return null;var I=f(b,S),T=p(b,S),O=v(b,S),V=Ps(Ps(Ps(Ps(Ps({option:s,isActive:String(S)===t},C),{},{fill:"#eee"},N),x),aw(m,b,S)),{},{onMouseEnter:I,onMouseLeave:T,onClick:O,dataKey:n,index:S,className:"recharts-bar-background-rectangle"});return y.createElement(Em,co({key:"background-bar-".concat(S)},V))}))}function gJ(e){var{showLabels:t,children:r,rects:n}=e,s=n==null?void 0:n.map(i=>{var l={x:i.x,y:i.y,width:i.width,lowerWidth:i.width,upperWidth:i.width,height:i.height};return Ps(Ps({},l),{},{value:i.value,payload:i.payload,parentViewBox:i.parentViewBox,viewBox:l,fill:i.fill})});return y.createElement(zG,{value:t?s:void 0},r)}function yJ(e){var{shape:t,activeBar:r,baseProps:n,entry:s,index:i,dataKey:l}=e,u=Pt(tu),d=Pt(YO),m=r&&String(i)===u&&(d==null||l===d),f=m?r:t;return m?y.createElement(tl,{zIndex:Ys.activeBar},y.createElement(Em,co({},n,{name:String(n.name)},s,{isActive:m,option:f,index:i,dataKey:l}))):y.createElement(Em,co({},n,{name:String(n.name)},s,{isActive:m,option:f,index:i,dataKey:l}))}function vJ(e){var{shape:t,baseProps:r,entry:n,index:s,dataKey:i}=e;return y.createElement(Em,co({},r,{name:String(r.name)},n,{isActive:!1,option:t,index:s,dataKey:i}))}function xJ(e){var t,{data:r,props:n}=e,s=(t=Go(n))!==null&&t!==void 0?t:{},{id:i}=s,l=Am(s,oJ),{shape:u,dataKey:d,activeBar:m}=n,{onMouseEnter:f,onClick:p,onMouseLeave:v}=n,x=Am(n,lJ),b=wI(f,d),S=bI(v),j=jI(p,d);return r?y.createElement(y.Fragment,null,r.map((N,E)=>y.createElement(ro,co({key:"rectangle-".concat(N==null?void 0:N.x,"-").concat(N==null?void 0:N.y,"-").concat(N==null?void 0:N.value,"-").concat(E),className:"recharts-bar-rectangle"},aw(x,N,E),{onMouseEnter:b(N,E),onMouseLeave:S(N,E),onClick:j(N,E)}),m?y.createElement(yJ,{shape:u,activeBar:m,baseProps:l,entry:N,index:E,dataKey:d}):y.createElement(vJ,{shape:u,baseProps:l,entry:N,index:E,dataKey:d})))):null}function wJ(e){var{props:t,previousRectanglesRef:r}=e,{data:n,layout:s,isAnimationActive:i,animationBegin:l,animationDuration:u,animationEasing:d,onAnimationEnd:m,onAnimationStart:f}=t,p=r.current,v=yw(t,"recharts-bar-"),[x,b]=y.useState(!1),S=!x,j=y.useCallback(()=>{typeof m=="function"&&m(),b(!1)},[m]),N=y.useCallback(()=>{typeof f=="function"&&f(),b(!0)},[f]);return y.createElement(gJ,{showLabels:S,rects:n},y.createElement(gw,{animationId:v,begin:l,duration:u,isActive:i,easing:d,onAnimationEnd:j,onAnimationStart:N,key:v},E=>{var C=E===1?n:n==null?void 0:n.map((I,T)=>{var O=p&&p[T];if(O)return Ps(Ps({},I),{},{x:hs(O.x,I.x,E),y:hs(O.y,I.y,E),width:hs(O.width,I.width,E),height:hs(O.height,I.height,E)});if(s==="horizontal"){var V=hs(0,I.height,E),F=hs(I.stackedBarStart,I.y,E);return Ps(Ps({},I),{},{y:F,height:V})}var L=hs(0,I.width,E),H=hs(I.stackedBarStart,I.x,E);return Ps(Ps({},I),{},{width:L,x:H})});return E>0&&(r.current=C??null),C==null?null:y.createElement(ro,null,y.createElement(xJ,{props:t,data:C}))}),y.createElement(WG,{label:t.label}),t.children)}function bJ(e){var t=y.useRef(null);return y.createElement(wJ,{previousRectanglesRef:t,props:e})}var AI=0,jJ=(e,t)=>{var r=Array.isArray(e.value)?e.value[1]:e.value;return{x:e.x,y:e.y,value:r,errorVal:Is(e,t)}};class SJ extends y.PureComponent{render(){var{hide:t,data:r,dataKey:n,className:s,xAxisId:i,yAxisId:l,needClip:u,background:d,id:m}=this.props;if(t||r==null)return null;var f=qr("recharts-bar",s),p=m;return y.createElement(ro,{className:f,id:m},u&&y.createElement("defs",null,y.createElement(nJ,{clipPathId:p,xAxisId:i,yAxisId:l})),y.createElement(ro,{className:"recharts-bar-rectangles",clipPath:u?"url(#clipPath-".concat(p,")"):void 0},y.createElement(pJ,{data:r,dataKey:n,background:d,allOtherBarProps:this.props}),y.createElement(bJ,this.props)))}}var kJ={activeBar:!1,animationBegin:0,animationDuration:400,animationEasing:"ease",hide:!1,isAnimationActive:!fu.isSsr,legendType:"rect",minPointSize:AI,xAxisId:0,yAxisId:0,zIndex:Ys.bar};function _J(e){var{xAxisId:t,yAxisId:r,hide:n,legendType:s,minPointSize:i,activeBar:l,animationBegin:u,animationDuration:d,animationEasing:m,isAnimationActive:f}=e,{needClip:p}=EI(t,r),v=hp(),x=yi(),b=YG(e.children,gb),S=Pt(E=>ZJ(E,t,r,x,e.id,b));if(v!=="vertical"&&v!=="horizontal")return null;var j,N=S==null?void 0:S[0];return N==null||N.height==null||N.width==null?j=0:j=v==="vertical"?N.height/2:N.width/2,y.createElement(rJ,{xAxisId:t,yAxisId:r,data:S,dataPointFormatter:jJ,errorBarOffset:j},y.createElement(SJ,co({},e,{layout:v,needClip:p,data:S,xAxisId:t,yAxisId:r,hide:n,legendType:s,minPointSize:i,activeBar:l,animationBegin:u,animationDuration:d,animationEasing:m,isAnimationActive:f})))}function NJ(e){var{layout:t,barSettings:{dataKey:r,minPointSize:n},pos:s,bandSize:i,xAxis:l,yAxis:u,xAxisTicks:d,yAxisTicks:m,stackedData:f,displayedData:p,offset:v,cells:x,parentViewBox:b,dataStartIndex:S}=e,j=t==="horizontal"?u:l,N=f?j.scale.domain():null,E=EU({numericAxis:j}),C=j.scale(E);return p.map((I,T)=>{var O,V,F,L,H,le;f?O=jU(f[T+S],N):(O=Is(I,r),Array.isArray(O)||(O=[E,O]));var K=GY(n,AI)(O[1],T);if(t==="horizontal"){var ie,[q,G]=[u.scale(O[0]),u.scale(O[1])];V=K_({axis:l,ticks:d,bandSize:i,offset:s.offset,entry:I,index:T}),F=(ie=G??q)!==null&&ie!==void 0?ie:void 0,L=s.size;var ve=q-G;if(H=Pa(ve)?0:ve,le={x:V,y:v.top,width:L,height:v.height},Math.abs(K)>0&&Math.abs(H)<Math.abs(K)){var M=fi(H||K)*(Math.abs(K)-Math.abs(H));F-=M,H+=M}}else{var[Y,ce]=[l.scale(O[0]),l.scale(O[1])];if(V=Y,F=K_({axis:u,ticks:m,bandSize:i,offset:s.offset,entry:I,index:T}),L=ce-Y,H=s.size,le={x:v.left,y:F,width:v.width,height:H},Math.abs(K)>0&&Math.abs(L)<Math.abs(K)){var he=fi(L||K)*(Math.abs(K)-Math.abs(L));L+=he}}if(V==null||F==null||L==null||H==null)return null;var U=Ps(Ps({},I),{},{stackedBarStart:C,x:V,y:F,width:L,height:H,value:f?O:O[1],payload:I,background:le,tooltipPosition:{x:V+L/2,y:F+H/2},parentViewBox:b},x&&x[T]&&x[T].props);return U}).filter(Boolean)}function CJ(e){var t=Ri(e,kJ),r=yi();return y.createElement(wY,{id:t.id,type:"bar"},n=>y.createElement(y.Fragment,null,y.createElement(gY,{legendPayload:hJ(t)}),y.createElement(pY,{fn:mJ,args:t}),y.createElement(NY,{type:"bar",id:n,data:void 0,xAxisId:t.xAxisId,yAxisId:t.yAxisId,zAxisId:0,dataKey:t.dataKey,stackId:CU(t.stackId),hide:t.hide,barSize:t.barSize,minPointSize:t.minPointSize,maxBarSize:t.maxBarSize,isPanorama:r}),y.createElement(tl,{zIndex:t.zIndex},y.createElement(_J,co({},t,{id:n})))))}var PI=y.memo(CJ);PI.displayName="Bar";function hC(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function bh(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?hC(Object(r),!0).forEach(function(n){EJ(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):hC(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function EJ(e,t,r){return(t=AJ(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function AJ(e){var t=PJ(e,"string");return typeof t=="symbol"?t:t+""}function PJ(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var TJ=(e,t)=>t,OJ=(e,t,r)=>r,IJ=(e,t,r,n)=>n,DJ=(e,t,r,n,s)=>s,af=we([Qw,DJ],(e,t)=>e.filter(r=>r.type==="bar").find(r=>r.id===t)),$J=we([af],e=>e==null?void 0:e.maxBarSize),RJ=(e,t,r,n,s,i)=>i,mC=(e,t,r)=>{var n=r??e;if(!Zn(n))return la(n,t,0)},MJ=we([br,Qw,TJ,OJ,IJ],(e,t,r,n,s)=>t.filter(i=>e==="horizontal"?i.xAxisId===r:i.yAxisId===n).filter(i=>i.isPanorama===s).filter(i=>i.hide===!1).filter(i=>i.type==="bar")),FJ=(e,t,r,n)=>{var s=br(e);return s==="horizontal"?dx(e,"yAxis",r,n):dx(e,"xAxis",t,n)},LJ=(e,t,r)=>{var n=br(e);return n==="horizontal"?x2(e,"xAxis",t):x2(e,"yAxis",r)},zJ=(e,t,r)=>{var n={},s=e.filter(Np),i=e.filter(m=>m.stackId==null),l=s.reduce((m,f)=>(m[f.stackId]||(m[f.stackId]=[]),m[f.stackId].push(f),m),n),u=Object.entries(l).map(m=>{var[f,p]=m,v=p.map(b=>b.dataKey),x=mC(t,r,p[0].barSize);return{stackId:f,dataKeys:v,barSize:x}}),d=i.map(m=>{var f=[m.dataKey].filter(v=>v!=null),p=mC(t,r,m.barSize);return{stackId:void 0,dataKeys:f,barSize:p}});return[...u,...d]},UJ=we([MJ,AV,LJ],zJ),BJ=(e,t,r,n,s)=>{var i,l,u=af(e,t,r,n,s);if(u!=null){var d=br(e),m=MT(e),{maxBarSize:f}=u,p=Zn(f)?m:f,v,x;return d==="horizontal"?(v=eu(e,"xAxis",t,n),x=Zc(e,"xAxis",t,n)):(v=eu(e,"yAxis",r,n),x=Zc(e,"yAxis",r,n)),(i=(l=am(v,x,!0))!==null&&l!==void 0?l:p)!==null&&i!==void 0?i:0}},TI=(e,t,r,n)=>{var s=br(e),i,l;return s==="horizontal"?(i=eu(e,"xAxis",t,n),l=Zc(e,"xAxis",t,n)):(i=eu(e,"yAxis",r,n),l=Zc(e,"yAxis",r,n)),am(i,l)};function WJ(e,t,r,n,s){var i=n.length;if(!(i<1)){var l=la(e,r,0,!0),u,d=[];if(xn(n[0].barSize)){var m=!1,f=r/i,p=n.reduce((N,E)=>N+(E.barSize||0),0);p+=(i-1)*l,p>=r&&(p-=(i-1)*l,l=0),p>=r&&f>0&&(m=!0,f*=.9,p=i*f);var v=(r-p)/2>>0,x={offset:v-l,size:0};u=n.reduce((N,E)=>{var C,I={stackId:E.stackId,dataKeys:E.dataKeys,position:{offset:x.offset+x.size+l,size:m?f:(C=E.barSize)!==null&&C!==void 0?C:0}},T=[...N,I];return x=T[T.length-1].position,T},d)}else{var b=la(t,r,0,!0);r-2*b-(i-1)*l<=0&&(l=0);var S=(r-2*b-(i-1)*l)/i;S>1&&(S>>=0);var j=xn(s)?Math.min(S,s):S;u=n.reduce((N,E,C)=>[...N,{stackId:E.stackId,dataKeys:E.dataKeys,position:{offset:b+(S+l)*C+(S-j)/2,size:j}}],d)}return u}}var VJ=(e,t,r,n,s,i,l)=>{var u=Zn(l)?t:l,d=WJ(r,n,s!==i?s:i,e,u);return s!==i&&d!=null&&(d=d.map(m=>bh(bh({},m),{},{position:bh(bh({},m.position),{},{offset:m.position.offset-s/2})}))),d},qJ=we([UJ,MT,EV,FT,BJ,TI,$J],VJ),HJ=(e,t,r,n)=>eu(e,"xAxis",t,n),KJ=(e,t,r,n)=>eu(e,"yAxis",r,n),GJ=(e,t,r,n)=>Zc(e,"xAxis",t,n),YJ=(e,t,r,n)=>Zc(e,"yAxis",r,n),JJ=we([qJ,af],(e,t)=>{if(!(e==null||t==null)){var r=e.find(n=>n.stackId===t.stackId&&t.dataKey!=null&&n.dataKeys.includes(t.dataKey));if(r!=null)return r.position}}),XJ=(e,t)=>{var r=Jw(t);if(!(!e||r==null||t==null)){var{stackId:n}=t;if(n!=null){var s=e[n];if(s){var{stackedData:i}=s;if(i)return i.find(l=>l.key===r)}}}},QJ=we([FJ,af],XJ),ZJ=we([es,mw,HJ,KJ,GJ,YJ,JJ,br,Uw,TI,QJ,af,RJ],(e,t,r,n,s,i,l,u,d,m,f,p,v)=>{var{chartData:x,dataStartIndex:b,dataEndIndex:S}=d;if(!(p==null||l==null||t==null||u!=="horizontal"&&u!=="vertical"||r==null||n==null||s==null||i==null||m==null)){var{data:j}=p,N;if(j!=null&&j.length>0?N=j:N=x==null?void 0:x.slice(b,S+1),N!=null)return NJ({layout:u,barSettings:p,pos:l,parentViewBox:t,bandSize:m,xAxis:r,yAxis:n,xAxisTicks:s,yAxisTicks:i,stackedData:f,displayedData:N,offset:e,cells:v,dataStartIndex:b})}}),eX=e=>{var{chartData:t}=e,r=wn(),n=yi();return y.useEffect(()=>n?()=>{}:(r(T2(t)),()=>{r(T2(void 0))}),[t,r,n]),null},pC={x:0,y:0,width:0,height:0,padding:{top:0,right:0,bottom:0,left:0}},OI=Js({name:"brush",initialState:pC,reducers:{setBrushSettings(e,t){return t.payload==null?pC:t.payload}}}),{setBrushSettings:Bee}=OI.actions,tX=OI.reducer;function rX(e,t,r){return(t=nX(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function nX(e){var t=sX(e,"string");return typeof t=="symbol"?t:t+""}function sX(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class xb{static create(t){return new xb(t)}constructor(t){this.scale=t}get domain(){return this.scale.domain}get range(){return this.scale.range}get rangeMin(){return this.range()[0]}get rangeMax(){return this.range()[1]}get bandwidth(){return this.scale.bandwidth}apply(t){var{bandAware:r,position:n}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(t!==void 0){if(n)switch(n){case"start":return this.scale(t);case"middle":{var s=this.bandwidth?this.bandwidth()/2:0;return this.scale(t)+s}case"end":{var i=this.bandwidth?this.bandwidth():0;return this.scale(t)+i}default:return this.scale(t)}if(r){var l=this.bandwidth?this.bandwidth()/2:0;return this.scale(t)+l}return this.scale(t)}}isInRange(t){var r=this.range(),n=r[0],s=r[r.length-1];return n<=s?t>=n&&t<=s:t>=s&&t<=n}}rX(xb,"EPS",1e-4);function iX(e){return(e%180+180)%180}var aX=function(t){var{width:r,height:n}=t,s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,i=iX(s),l=i*Math.PI/180,u=Math.atan(n/r),d=l>u&&l<Math.PI-u?n/Math.sin(l):r/Math.cos(l);return Math.abs(d)},oX={dots:[],areas:[],lines:[]},II=Js({name:"referenceElements",initialState:oX,reducers:{addDot:(e,t)=>{e.dots.push(t.payload)},removeDot:(e,t)=>{var r=Xa(e).dots.findIndex(n=>n===t.payload);r!==-1&&e.dots.splice(r,1)},addArea:(e,t)=>{e.areas.push(t.payload)},removeArea:(e,t)=>{var r=Xa(e).areas.findIndex(n=>n===t.payload);r!==-1&&e.areas.splice(r,1)},addLine:(e,t)=>{e.lines.push(t.payload)},removeLine:(e,t)=>{var r=Xa(e).lines.findIndex(n=>n===t.payload);r!==-1&&e.lines.splice(r,1)}}}),{addDot:Wee,removeDot:Vee,addArea:qee,removeArea:Hee,addLine:Kee,removeLine:Gee}=II.actions,lX=II.reducer,cX=y.createContext(void 0),uX=e=>{var{children:t}=e,[r]=y.useState("".concat(Ed("recharts"),"-clip")),n=NI();if(n==null)return null;var{x:s,y:i,width:l,height:u}=n;return y.createElement(cX.Provider,{value:r},y.createElement("defs",null,y.createElement("clipPath",{id:r},y.createElement("rect",{x:s,y:i,height:u,width:l}))),t)};function ru(e,t){for(var r in e)if({}.hasOwnProperty.call(e,r)&&(!{}.hasOwnProperty.call(t,r)||e[r]!==t[r]))return!1;for(var n in t)if({}.hasOwnProperty.call(t,n)&&!{}.hasOwnProperty.call(e,n))return!1;return!0}function DI(e,t){if(t<1)return[];if(t===1)return e;for(var r=[],n=0;n<e.length;n+=t)r.push(e[n]);return r}function dX(e,t,r){var n={width:e.width+t.width,height:e.height+t.height};return aX(n,r)}function fX(e,t,r){var n=r==="width",{x:s,y:i,width:l,height:u}=e;return t===1?{start:n?s:i,end:n?s+l:i+u}:{start:n?s+l:i+u,end:n?s:i}}function Pm(e,t,r,n,s){if(e*t<e*n||e*t>e*s)return!1;var i=r();return e*(t-e*i/2-n)>=0&&e*(t+e*i/2-s)<=0}function hX(e,t){return DI(e,t+1)}function mX(e,t,r,n,s){for(var i=(n||[]).slice(),{start:l,end:u}=t,d=0,m=1,f=l,p=function(){var b=n==null?void 0:n[d];if(b===void 0)return{v:DI(n,m)};var S=d,j,N=()=>(j===void 0&&(j=r(b,S)),j),E=b.coordinate,C=d===0||Pm(e,E,N,f,u);C||(d=0,f=l,m+=1),C&&(f=E+e*(N()/2+s),d+=m)},v;m<=i.length;)if(v=p(),v)return v.v;return[]}function gC(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Ss(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?gC(Object(r),!0).forEach(function(n){pX(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):gC(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function pX(e,t,r){return(t=gX(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function gX(e){var t=yX(e,"string");return typeof t=="symbol"?t:t+""}function yX(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function vX(e,t,r,n,s){for(var i=(n||[]).slice(),l=i.length,{start:u}=t,{end:d}=t,m=function(v){var x=i[v],b,S=()=>(b===void 0&&(b=r(x,v)),b);if(v===l-1){var j=e*(x.coordinate+e*S()/2-d);i[v]=x=Ss(Ss({},x),{},{tickCoord:j>0?x.coordinate-j*e:x.coordinate})}else i[v]=x=Ss(Ss({},x),{},{tickCoord:x.coordinate});if(x.tickCoord!=null){var N=Pm(e,x.tickCoord,S,u,d);N&&(d=x.tickCoord-e*(S()/2+s),i[v]=Ss(Ss({},x),{},{isShow:!0}))}},f=l-1;f>=0;f--)m(f);return i}function xX(e,t,r,n,s,i){var l=(n||[]).slice(),u=l.length,{start:d,end:m}=t;if(i){var f=n[u-1],p=r(f,u-1),v=e*(f.coordinate+e*p/2-m);if(l[u-1]=f=Ss(Ss({},f),{},{tickCoord:v>0?f.coordinate-v*e:f.coordinate}),f.tickCoord!=null){var x=Pm(e,f.tickCoord,()=>p,d,m);x&&(m=f.tickCoord-e*(p/2+s),l[u-1]=Ss(Ss({},f),{},{isShow:!0}))}}for(var b=i?u-1:u,S=function(E){var C=l[E],I,T=()=>(I===void 0&&(I=r(C,E)),I);if(E===0){var O=e*(C.coordinate-e*T()/2-d);l[E]=C=Ss(Ss({},C),{},{tickCoord:O<0?C.coordinate-O*e:C.coordinate})}else l[E]=C=Ss(Ss({},C),{},{tickCoord:C.coordinate});if(C.tickCoord!=null){var V=Pm(e,C.tickCoord,T,d,m);V&&(d=C.tickCoord+e*(T()/2+s),l[E]=Ss(Ss({},C),{},{isShow:!0}))}},j=0;j<b;j++)S(j);return l}function wX(e,t,r){var{tick:n,ticks:s,viewBox:i,minTickGap:l,orientation:u,interval:d,tickFormatter:m,unit:f,angle:p}=e;if(!s||!s.length||!n)return[];if($t(d)||fu.isSsr){var v;return(v=hX(s,$t(d)?d:0))!==null&&v!==void 0?v:[]}var x=[],b=u==="top"||u==="bottom"?"width":"height",S=f&&b==="width"?bd(f,{fontSize:t,letterSpacing:r}):{width:0,height:0},j=(C,I)=>{var T=typeof m=="function"?m(C.value,I):C.value;return b==="width"?dX(bd(T,{fontSize:t,letterSpacing:r}),S,p):bd(T,{fontSize:t,letterSpacing:r})[b]},N=s.length>=2?fi(s[1].coordinate-s[0].coordinate):1,E=fX(i,N,b);return d==="equidistantPreserveStart"?mX(N,E,j,s,l):(d==="preserveStart"||d==="preserveStartEnd"?x=xX(N,E,j,s,l,d==="preserveStartEnd"):x=vX(N,E,j,s,l),x.filter(C=>C.isShow))}var bX=e=>{var{ticks:t,label:r,labelGapWithTick:n=5,tickSize:s=0,tickMargin:i=0}=e,l=0;if(t){Array.from(t).forEach(f=>{if(f){var p=f.getBoundingClientRect();p.width>l&&(l=p.width)}});var u=r?r.getBoundingClientRect().width:0,d=s+i,m=l+d+u+(r?n:0);return Math.round(m)}return 0},jX=["axisLine","width","height","className","hide","ticks","axisType"],SX=["viewBox"],kX=["viewBox"];function xx(e,t){if(e==null)return{};var r,n,s=_X(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function _X(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function zl(){return zl=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},zl.apply(null,arguments)}function yC(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Pn(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?yC(Object(r),!0).forEach(function(n){NX(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):yC(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function NX(e,t,r){return(t=CX(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function CX(e){var t=EX(e,"string");return typeof t=="symbol"?t:t+""}function EX(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var AX={x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd",zIndex:Ys.axis};function PX(e){var{x:t,y:r,width:n,height:s,orientation:i,mirror:l,axisLine:u,otherSvgProps:d}=e;if(!u)return null;var m=Pn(Pn(Pn({},d),Go(u)),{},{fill:"none"});if(i==="top"||i==="bottom"){var f=+(i==="top"&&!l||i==="bottom"&&l);m=Pn(Pn({},m),{},{x1:t,y1:r+f*s,x2:t+n,y2:r+f*s})}else{var p=+(i==="left"&&!l||i==="right"&&l);m=Pn(Pn({},m),{},{x1:t+p*n,y1:r,x2:t+p*n,y2:r+s})}return y.createElement("line",zl({},m,{className:qr("recharts-cartesian-axis-line",Yc(u,"className"))}))}function TX(e,t,r,n,s,i,l,u,d){var m,f,p,v,x,b,S=u?-1:1,j=e.tickSize||l,N=$t(e.tickCoord)?e.tickCoord:e.coordinate;switch(i){case"top":m=f=e.coordinate,v=r+ +!u*s,p=v-S*j,b=p-S*d,x=N;break;case"left":p=v=e.coordinate,f=t+ +!u*n,m=f-S*j,x=m-S*d,b=N;break;case"right":p=v=e.coordinate,f=t+ +u*n,m=f+S*j,x=m+S*d,b=N;break;default:m=f=e.coordinate,v=r+ +u*s,p=v+S*j,b=p+S*d,x=N;break}return{line:{x1:m,y1:p,x2:f,y2:v},tick:{x,y:b}}}function OX(e,t){switch(e){case"left":return t?"start":"end";case"right":return t?"end":"start";default:return"middle"}}function IX(e,t){switch(e){case"left":case"right":return"middle";case"top":return t?"start":"end";default:return t?"end":"start"}}function DX(e){var{option:t,tickProps:r,value:n}=e,s,i=qr(r.className,"recharts-cartesian-axis-tick-value");if(y.isValidElement(t))s=y.cloneElement(t,Pn(Pn({},r),{},{className:i}));else if(typeof t=="function")s=t(Pn(Pn({},r),{},{className:i}));else{var l="recharts-cartesian-axis-tick-value";typeof t!="boolean"&&(l=qr(l,t==null?void 0:t.className)),s=y.createElement(yb,zl({},r,{className:l}),n)}return s}var $X=y.forwardRef((e,t)=>{var{ticks:r=[],tick:n,tickLine:s,stroke:i,tickFormatter:l,unit:u,padding:d,tickTextProps:m,orientation:f,mirror:p,x:v,y:x,width:b,height:S,tickSize:j,tickMargin:N,fontSize:E,letterSpacing:C,getTicksConfig:I,events:T,axisType:O}=e,V=wX(Pn(Pn({},I),{},{ticks:r}),E,C),F=OX(f,p),L=IX(f,p),H=Go(I),le=Zx(n),K={};typeof s=="object"&&(K=s);var ie=Pn(Pn({},H),{},{fill:"none"},K),q=V.map(M=>Pn({entry:M},TX(M,v,x,b,S,f,j,p,N))),G=q.map(M=>{var{entry:Y,line:ce}=M;return y.createElement(ro,{className:"recharts-cartesian-axis-tick",key:"tick-".concat(Y.value,"-").concat(Y.coordinate,"-").concat(Y.tickCoord)},s&&y.createElement("line",zl({},ie,ce,{className:qr("recharts-cartesian-axis-tick-line",Yc(s,"className"))})))}),ve=q.map((M,Y)=>{var{entry:ce,tick:he}=M,U=Pn(Pn(Pn(Pn({textAnchor:F,verticalAnchor:L},H),{},{stroke:"none",fill:i},le),he),{},{index:Y,payload:ce,visibleTicksCount:V.length,tickFormatter:l,padding:d},m);return y.createElement(ro,zl({className:"recharts-cartesian-axis-tick-label",key:"tick-label-".concat(ce.value,"-").concat(ce.coordinate,"-").concat(ce.tickCoord)},aw(T,ce,Y)),n&&y.createElement(DX,{option:n,tickProps:U,value:"".concat(typeof l=="function"?l(ce.value,Y):ce.value).concat(u||"")}))});return y.createElement("g",{className:"recharts-cartesian-axis-ticks recharts-".concat(O,"-ticks")},ve.length>0&&y.createElement(tl,{zIndex:Ys.label},y.createElement("g",{className:"recharts-cartesian-axis-tick-labels recharts-".concat(O,"-tick-labels"),ref:t},ve)),G.length>0&&y.createElement("g",{className:"recharts-cartesian-axis-tick-lines recharts-".concat(O,"-tick-lines")},G))}),RX=y.forwardRef((e,t)=>{var{axisLine:r,width:n,height:s,className:i,hide:l,ticks:u,axisType:d}=e,m=xx(e,jX),[f,p]=y.useState(""),[v,x]=y.useState(""),b=y.useRef(null);y.useImperativeHandle(t,()=>({getCalculatedWidth:()=>{var j;return bX({ticks:b.current,label:(j=e.labelRef)===null||j===void 0?void 0:j.current,labelGapWithTick:5,tickSize:e.tickSize,tickMargin:e.tickMargin})}}));var S=y.useCallback(j=>{if(j){var N=j.getElementsByClassName("recharts-cartesian-axis-tick-value");b.current=N;var E=N[0];if(E){var C=window.getComputedStyle(E),I=C.fontSize,T=C.letterSpacing;(I!==f||T!==v)&&(p(I),x(T))}}},[f,v]);return l||n!=null&&n<=0||s!=null&&s<=0?null:y.createElement(tl,{zIndex:e.zIndex},y.createElement(ro,{className:qr("recharts-cartesian-axis",i)},y.createElement(PX,{x:e.x,y:e.y,width:n,height:s,orientation:e.orientation,mirror:e.mirror,axisLine:r,otherSvgProps:Go(e)}),y.createElement($X,{ref:S,axisType:d,events:m,fontSize:f,getTicksConfig:e,height:e.height,letterSpacing:v,mirror:e.mirror,orientation:e.orientation,padding:e.padding,stroke:e.stroke,tick:e.tick,tickFormatter:e.tickFormatter,tickLine:e.tickLine,tickMargin:e.tickMargin,tickSize:e.tickSize,tickTextProps:e.tickTextProps,ticks:u,unit:e.unit,width:e.width,x:e.x,y:e.y}),y.createElement(xG,{x:e.x,y:e.y,width:e.width,height:e.height,lowerWidth:e.width,upperWidth:e.width},y.createElement(AG,{label:e.label,labelRef:e.labelRef}),e.children)))}),MX=y.memo(RX,(e,t)=>{var{viewBox:r}=e,n=xx(e,SX),{viewBox:s}=t,i=xx(t,kX);return ru(r,s)&&ru(n,i)}),wb=y.forwardRef((e,t)=>{var r=Ri(e,AX);return y.createElement(MX,zl({},r,{ref:t}))});wb.displayName="CartesianAxis";var FX=["dangerouslySetInnerHTML","ticks"],LX=["id"],zX=["domain"],UX=["domain"];function wx(){return wx=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},wx.apply(null,arguments)}function Tm(e,t){if(e==null)return{};var r,n,s=BX(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function BX(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function WX(e){var t=wn();return y.useLayoutEffect(()=>(t(TY(e)),()=>{t(OY(e))}),[e,t]),null}var VX=e=>{var{xAxisId:t,className:r}=e,n=Pt(mw),s=yi(),i="xAxis",l=Pt(j=>vu(j,i,t,s)),u=Pt(j=>EO(j,i,t,s)),d=Pt(j=>kO(j,t)),m=Pt(j=>Nq(j,t)),f=Pt(j=>HT(j,t));if(d==null||m==null||f==null)return null;var{dangerouslySetInnerHTML:p,ticks:v}=e,x=Tm(e,FX),{id:b}=f,S=Tm(f,LX);return y.createElement(wb,wx({},x,S,{scale:l,x:m.x,y:m.y,width:d.width,height:d.height,className:qr("recharts-".concat(i," ").concat(i),r),viewBox:n,ticks:u,axisType:i}))},qX={allowDataOverflow:ai.allowDataOverflow,allowDecimals:ai.allowDecimals,allowDuplicatedCategory:ai.allowDuplicatedCategory,height:ai.height,hide:!1,mirror:ai.mirror,orientation:ai.orientation,padding:ai.padding,reversed:ai.reversed,scale:ai.scale,tickCount:ai.tickCount,type:ai.type,xAxisId:0},HX=e=>{var t,r,n,s,i,l=Ri(e,qX);return y.createElement(y.Fragment,null,y.createElement(WX,{interval:(t=l.interval)!==null&&t!==void 0?t:"preserveEnd",id:l.xAxisId,scale:l.scale,type:l.type,padding:l.padding,allowDataOverflow:l.allowDataOverflow,domain:l.domain,dataKey:l.dataKey,allowDuplicatedCategory:l.allowDuplicatedCategory,allowDecimals:l.allowDecimals,tickCount:l.tickCount,includeHidden:(r=l.includeHidden)!==null&&r!==void 0?r:!1,reversed:l.reversed,ticks:l.ticks,height:l.height,orientation:l.orientation,mirror:l.mirror,hide:l.hide,unit:l.unit,name:l.name,angle:(n=l.angle)!==null&&n!==void 0?n:0,minTickGap:(s=l.minTickGap)!==null&&s!==void 0?s:5,tick:(i=l.tick)!==null&&i!==void 0?i:!0,tickFormatter:l.tickFormatter}),y.createElement(VX,l))},KX=(e,t)=>{var{domain:r}=e,n=Tm(e,zX),{domain:s}=t,i=Tm(t,UX);return ru(n,i)?Array.isArray(r)&&r.length===2&&Array.isArray(s)&&s.length===2?r[0]===s[0]&&r[1]===s[1]:ru({domain:r},{domain:s}):!1},$I=y.memo(HX,KX);$I.displayName="XAxis";var GX=["dangerouslySetInnerHTML","ticks"],YX=["id"],JX=["domain"],XX=["domain"];function bx(){return bx=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},bx.apply(null,arguments)}function Om(e,t){if(e==null)return{};var r,n,s=QX(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function QX(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function ZX(e){var t=wn();return y.useLayoutEffect(()=>(t(IY(e)),()=>{t(DY(e))}),[e,t]),null}var eQ=e=>{var{yAxisId:t,className:r,width:n,label:s}=e,i=y.useRef(null),l=y.useRef(null),u=Pt(mw),d=yi(),m=wn(),f="yAxis",p=Pt(T=>vu(T,f,t,d)),v=Pt(T=>_O(T,t)),x=Pt(T=>Eq(T,t)),b=Pt(T=>EO(T,f,t,d)),S=Pt(T=>KT(T,t));if(y.useLayoutEffect(()=>{if(!(n!=="auto"||!v||vb(s)||y.isValidElement(s)||S==null)){var T=i.current;if(T){var O=T.getCalculatedWidth();Math.round(v.width)!==Math.round(O)&&m($Y({id:t,width:O}))}}},[b,v,m,s,t,n,S]),v==null||x==null||S==null)return null;var{dangerouslySetInnerHTML:j,ticks:N}=e,E=Om(e,GX),{id:C}=S,I=Om(S,YX);return y.createElement(wb,bx({},E,I,{ref:i,labelRef:l,scale:p,x:x.x,y:x.y,tickTextProps:n==="auto"?{width:void 0}:{width:n},width:v.width,height:v.height,className:qr("recharts-".concat(f," ").concat(f),r),viewBox:u,ticks:b,axisType:f}))},tQ={allowDataOverflow:oi.allowDataOverflow,allowDecimals:oi.allowDecimals,allowDuplicatedCategory:oi.allowDuplicatedCategory,hide:!1,mirror:oi.mirror,orientation:oi.orientation,padding:oi.padding,reversed:oi.reversed,scale:oi.scale,tickCount:oi.tickCount,type:oi.type,width:oi.width,yAxisId:0},rQ=e=>{var t,r,n,s,i,l=Ri(e,tQ);return y.createElement(y.Fragment,null,y.createElement(ZX,{interval:(t=l.interval)!==null&&t!==void 0?t:"preserveEnd",id:l.yAxisId,scale:l.scale,type:l.type,domain:l.domain,allowDataOverflow:l.allowDataOverflow,dataKey:l.dataKey,allowDuplicatedCategory:l.allowDuplicatedCategory,allowDecimals:l.allowDecimals,tickCount:l.tickCount,padding:l.padding,includeHidden:(r=l.includeHidden)!==null&&r!==void 0?r:!1,reversed:l.reversed,ticks:l.ticks,width:l.width,orientation:l.orientation,mirror:l.mirror,hide:l.hide,unit:l.unit,name:l.name,angle:(n=l.angle)!==null&&n!==void 0?n:0,minTickGap:(s=l.minTickGap)!==null&&s!==void 0?s:5,tick:(i=l.tick)!==null&&i!==void 0?i:!0,tickFormatter:l.tickFormatter}),y.createElement(eQ,l))},nQ=(e,t)=>{var{domain:r}=e,n=Om(e,JX),{domain:s}=t,i=Om(t,XX);return ru(n,i)?Array.isArray(r)&&r.length===2&&Array.isArray(s)&&s.length===2?r[0]===s[0]&&r[1]===s[1]:ru({domain:r},{domain:s}):!1},RI=y.memo(rQ,nQ);RI.displayName="YAxis";var Z0={exports:{}},ev={};/**
 * @license React
 * use-sync-external-store-with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var vC;function sQ(){if(vC)return ev;vC=1;var e=nu();function t(d,m){return d===m&&(d!==0||1/d===1/m)||d!==d&&m!==m}var r=typeof Object.is=="function"?Object.is:t,n=e.useSyncExternalStore,s=e.useRef,i=e.useEffect,l=e.useMemo,u=e.useDebugValue;return ev.useSyncExternalStoreWithSelector=function(d,m,f,p,v){var x=s(null);if(x.current===null){var b={hasValue:!1,value:null};x.current=b}else b=x.current;x=l(function(){function j(T){if(!N){if(N=!0,E=T,T=p(T),v!==void 0&&b.hasValue){var O=b.value;if(v(O,T))return C=O}return C=T}if(O=C,r(E,T))return O;var V=p(T);return v!==void 0&&v(O,V)?(E=T,O):(E=T,C=V)}var N=!1,E,C,I=f===void 0?null:f;return[function(){return j(m())},I===null?void 0:function(){return j(I())}]},[m,f,p,v]);var S=n(d,x[0],x[1]);return i(function(){b.hasValue=!0,b.value=S},[S]),u(S),S},ev}var xC;function iQ(){return xC||(xC=1,Z0.exports=sQ()),Z0.exports}iQ();function aQ(e){e()}function oQ(){let e=null,t=null;return{clear(){e=null,t=null},notify(){aQ(()=>{let r=e;for(;r;)r.callback(),r=r.next})},get(){const r=[];let n=e;for(;n;)r.push(n),n=n.next;return r},subscribe(r){let n=!0;const s=t={callback:r,next:null,prev:t};return s.prev?s.prev.next=s:e=s,function(){!n||e===null||(n=!1,s.next?s.next.prev=s.prev:t=s.prev,s.prev?s.prev.next=s.next:e=s.next)}}}}var wC={notify(){},get:()=>[]};function lQ(e,t){let r,n=wC,s=0,i=!1;function l(S){f();const j=n.subscribe(S);let N=!1;return()=>{N||(N=!0,j(),p())}}function u(){n.notify()}function d(){b.onStateChange&&b.onStateChange()}function m(){return i}function f(){s++,r||(r=e.subscribe(d),n=oQ())}function p(){s--,r&&s===0&&(r(),r=void 0,n.clear(),n=wC)}function v(){i||(i=!0,f())}function x(){i&&(i=!1,p())}const b={addNestedSub:l,notifyNestedSubs:u,handleChangeWrapper:d,isSubscribed:m,trySubscribe:v,tryUnsubscribe:x,getListeners:()=>n};return b}var cQ=()=>typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",uQ=cQ(),dQ=()=>typeof navigator<"u"&&navigator.product==="ReactNative",fQ=dQ(),hQ=()=>uQ||fQ?y.useLayoutEffect:y.useEffect,mQ=hQ(),tv=Symbol.for("react-redux-context"),rv=typeof globalThis<"u"?globalThis:{};function pQ(){if(!y.createContext)return{};const e=rv[tv]??(rv[tv]=new Map);let t=e.get(y.createContext);return t||(t=y.createContext(null),e.set(y.createContext,t)),t}var gQ=pQ();function yQ(e){const{children:t,context:r,serverState:n,store:s}=e,i=y.useMemo(()=>{const d=lQ(s);return{store:s,subscription:d,getServerState:n?()=>n:void 0}},[s,n]),l=y.useMemo(()=>s.getState(),[s]);mQ(()=>{const{subscription:d}=i;return d.onStateChange=d.notifyNestedSubs,d.trySubscribe(),l!==s.getState()&&d.notifyNestedSubs(),()=>{d.tryUnsubscribe(),d.onStateChange=void 0}},[i,l]);const u=r||gQ;return y.createElement(u.Provider,{value:i},t)}var vQ=yQ,xQ=(e,t)=>t,bb=we([xQ,br,VT,Vn,qO,yo,FH,es],qH),jb=e=>{var t=e.currentTarget.getBoundingClientRect(),r=t.width/e.currentTarget.offsetWidth,n=t.height/e.currentTarget.offsetHeight;return{chartX:Math.round((e.clientX-t.left)/r),chartY:Math.round((e.clientY-t.top)/n)}},MI=Di("mouseClick"),FI=Kd();FI.startListening({actionCreator:MI,effect:(e,t)=>{var r=e.payload,n=bb(t.getState(),jb(r));(n==null?void 0:n.activeIndex)!=null&&t.dispatch(Uq({activeIndex:n.activeIndex,activeDataKey:void 0,activeCoordinate:n.activeCoordinate}))}});var jx=Di("mouseMove"),LI=Kd();LI.startListening({actionCreator:jx,effect:(e,t)=>{var r=e.payload,n=t.getState(),s=ob(n,n.tooltip.settings.shared),i=bb(n,jb(r));s==="axis"&&((i==null?void 0:i.activeIndex)!=null?t.dispatch(RO({activeIndex:i.activeIndex,activeDataKey:void 0,activeCoordinate:i.activeCoordinate})):t.dispatch($O()))}});var bC={accessibilityLayer:!0,barCategoryGap:"10%",barGap:4,barSize:void 0,className:void 0,maxBarSize:void 0,stackOffset:"none",syncId:void 0,syncMethod:"index",baseValue:void 0},zI=Js({name:"rootProps",initialState:bC,reducers:{updateOptions:(e,t)=>{var r;e.accessibilityLayer=t.payload.accessibilityLayer,e.barCategoryGap=t.payload.barCategoryGap,e.barGap=(r=t.payload.barGap)!==null&&r!==void 0?r:bC.barGap,e.barSize=t.payload.barSize,e.maxBarSize=t.payload.maxBarSize,e.stackOffset=t.payload.stackOffset,e.syncId=t.payload.syncId,e.syncMethod=t.payload.syncMethod,e.className=t.payload.className,e.baseValue=t.payload.baseValue}}}),wQ=zI.reducer,{updateOptions:bQ}=zI.actions,UI=Js({name:"polarOptions",initialState:null,reducers:{updatePolarOptions:(e,t)=>t.payload}}),{updatePolarOptions:Yee}=UI.actions,jQ=UI.reducer,BI=Di("keyDown"),WI=Di("focus"),Sb=Kd();Sb.startListening({actionCreator:BI,effect:(e,t)=>{var r=t.getState(),n=r.rootProps.accessibilityLayer!==!1;if(n){var{keyboardInteraction:s}=r.tooltip,i=e.payload;if(!(i!=="ArrowRight"&&i!=="ArrowLeft"&&i!=="Enter")){var l=Number(lb(s,wu(r))),u=yo(r);if(i==="Enter"){var d=km(r,"axis","hover",String(s.index));t.dispatch(hx({active:!s.active,activeIndex:s.index,activeDataKey:s.dataKey,activeCoordinate:d}));return}var m=Oq(r),f=m==="left-to-right"?1:-1,p=i==="ArrowRight"?1:-1,v=l+p*f;if(!(u==null||v>=u.length||v<0)){var x=km(r,"axis","hover",String(v));t.dispatch(hx({active:!0,activeIndex:v.toString(),activeDataKey:void 0,activeCoordinate:x}))}}}}});Sb.startListening({actionCreator:WI,effect:(e,t)=>{var r=t.getState(),n=r.rootProps.accessibilityLayer!==!1;if(n){var{keyboardInteraction:s}=r.tooltip;if(!s.active&&s.index==null){var i="0",l=km(r,"axis","hover",String(i));t.dispatch(hx({activeDataKey:void 0,active:!0,activeIndex:i,activeCoordinate:l}))}}}});var Pi=Di("externalEvent"),VI=Kd();VI.startListening({actionCreator:Pi,effect:(e,t)=>{if(e.payload.handler!=null){var r=t.getState(),n={activeCoordinate:SH(r),activeDataKey:YO(r),activeIndex:tu(r),activeLabel:GO(r),activeTooltipIndex:tu(r),isTooltipActive:kH(r)};e.payload.handler(n,e.payload.reactEvent)}}});var SQ=we([xu],e=>e.tooltipItemPayloads),kQ=we([SQ,nf,(e,t,r)=>t,(e,t,r)=>r],(e,t,r,n)=>{var s=e.find(u=>u.settings.dataKey===n);if(s!=null){var{positions:i}=s;if(i!=null){var l=t(i,r);return l}}}),qI=Di("touchMove"),HI=Kd();HI.startListening({actionCreator:qI,effect:(e,t)=>{var r=e.payload;if(!(r.touches==null||r.touches.length===0)){var n=t.getState(),s=ob(n,n.tooltip.settings.shared);if(s==="axis"){var i=bb(n,jb({clientX:r.touches[0].clientX,clientY:r.touches[0].clientY,currentTarget:r.currentTarget}));(i==null?void 0:i.activeIndex)!=null&&t.dispatch(RO({activeIndex:i.activeIndex,activeDataKey:void 0,activeCoordinate:i.activeCoordinate}))}else if(s==="item"){var l,u=r.touches[0];if(document.elementFromPoint==null)return;var d=document.elementFromPoint(u.clientX,u.clientY);if(!d||!d.getAttribute)return;var m=d.getAttribute($U),f=(l=d.getAttribute(RU))!==null&&l!==void 0?l:void 0,p=kQ(t.getState(),m,f);t.dispatch(DO({activeDataKey:f,activeIndex:m,activeCoordinate:p}))}}}});var _Q=QA({brush:tX,cartesianAxis:RY,chartData:SK,errorBars:JY,graphicalItems:_Y,layout:gU,legend:xB,options:vK,polarAxis:qG,polarOptions:jQ,referenceElements:lX,rootProps:wQ,tooltip:Bq,zIndex:iK}),NQ=function(t){return U8({reducer:_Q,preloadedState:t,middleware:r=>r({serializableCheck:!1}).concat([FI.middleware,LI.middleware,Sb.middleware,VI.middleware,HI.middleware]),enhancers:r=>{var n=r;return typeof r=="function"&&(n=r()),n.concat(uP({type:"raf"}))},devTools:fu.devToolsEnabled})};function CQ(e){var{preloadedState:t,children:r,reduxStoreName:n}=e,s=yi(),i=y.useRef(null);if(s)return r;i.current==null&&(i.current=NQ(t));var l=lw;return y.createElement(vQ,{context:l,store:i.current},r)}function EQ(e){var{layout:t,margin:r}=e,n=wn(),s=yi();return y.useEffect(()=>{s||(n(hU(t)),n(fU(r)))},[n,s,t,r]),null}function AQ(e){var t=wn();return y.useEffect(()=>{t(bQ(e))},[t,e]),null}function jC(e){var{zIndex:t,isPanorama:r}=e,n=r?"recharts-zindex-panorama-":"recharts-zindex-",s=SI("".concat(n).concat(t)),i=wn();return y.useLayoutEffect(()=>(i(nK({zIndex:t,elementId:s,isPanorama:r})),()=>{i(sK({zIndex:t,isPanorama:r}))}),[i,t,s,r]),y.createElement("g",{id:s})}function SC(e){var{children:t,isPanorama:r}=e,n=Pt(KH);if(!n||n.length===0)return t;var s=n.filter(l=>l<0),i=n.filter(l=>l>0);return y.createElement(y.Fragment,null,s.map(l=>y.createElement(jC,{key:l,zIndex:l,isPanorama:r})),t,i.map(l=>y.createElement(jC,{key:l,zIndex:l,isPanorama:r})))}var PQ=["children"];function TQ(e,t){if(e==null)return{};var r,n,s=OQ(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function OQ(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function Im(){return Im=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Im.apply(null,arguments)}var IQ={width:"100%",height:"100%",display:"block"},DQ=y.forwardRef((e,t)=>{var r=hB(),n=mB(),s=TP();if(!Yo(r)||!Yo(n))return null;var{children:i,otherAttributes:l,title:u,desc:d}=e,m,f;return l!=null&&(typeof l.tabIndex=="number"?m=l.tabIndex:m=s?0:void 0,typeof l.role=="string"?f=l.role:f=s?"application":void 0),y.createElement(gA,Im({},l,{title:u,desc:d,role:f,tabIndex:m,width:r,height:n,style:IQ,ref:t}),i)}),$Q=e=>{var{children:t}=e,r=Pt(dp);if(!r)return null;var{width:n,height:s,y:i,x:l}=r;return y.createElement(gA,{width:n,height:s,x:l,y:i},t)},kC=y.forwardRef((e,t)=>{var{children:r}=e,n=TQ(e,PQ),s=yi();return s?y.createElement($Q,null,y.createElement(SC,{isPanorama:!0},r)):y.createElement(DQ,Im({ref:t},n),y.createElement(SC,{isPanorama:!1},r))});function RQ(){var e=wn(),[t,r]=y.useState(null),n=Pt(DU);return y.useEffect(()=>{if(t!=null){var s=t.getBoundingClientRect(),i=s.width/t.offsetWidth;xn(i)&&i!==n&&e(pU(i))}},[t,e,n]),r}function _C(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function MQ(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?_C(Object(r),!0).forEach(function(n){FQ(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):_C(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function FQ(e,t,r){return(t=LQ(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function LQ(e){var t=zQ(e,"string");return typeof t=="symbol"?t:t+""}function zQ(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Ul(){return Ul=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Ul.apply(null,arguments)}var UQ=()=>(OK(),null);function Dm(e){if(typeof e=="number")return e;if(typeof e=="string"){var t=parseFloat(e);if(!Number.isNaN(t))return t}return 0}var BQ=y.forwardRef((e,t)=>{var r,n,s=y.useRef(null),[i,l]=y.useState({containerWidth:Dm((r=e.style)===null||r===void 0?void 0:r.width),containerHeight:Dm((n=e.style)===null||n===void 0?void 0:n.height)}),u=y.useCallback((m,f)=>{l(p=>{var v=Math.round(m),x=Math.round(f);return p.containerWidth===v&&p.containerHeight===x?p:{containerWidth:v,containerHeight:x}})},[]),d=y.useCallback(m=>{if(typeof t=="function"&&t(m),m!=null&&typeof ResizeObserver<"u"){var{width:f,height:p}=m.getBoundingClientRect();u(f,p);var v=b=>{var{width:S,height:j}=b[0].contentRect;u(S,j)},x=new ResizeObserver(v);x.observe(m),s.current=x}},[t,u]);return y.useEffect(()=>()=>{var m=s.current;m!=null&&m.disconnect()},[u]),y.createElement(y.Fragment,null,y.createElement(mp,{width:i.containerWidth,height:i.containerHeight}),y.createElement("div",Ul({ref:d},e)))}),WQ=y.forwardRef((e,t)=>{var{width:r,height:n}=e,[s,i]=y.useState({containerWidth:Dm(r),containerHeight:Dm(n)}),l=y.useCallback((d,m)=>{i(f=>{var p=Math.round(d),v=Math.round(m);return f.containerWidth===p&&f.containerHeight===v?f:{containerWidth:p,containerHeight:v}})},[]),u=y.useCallback(d=>{if(typeof t=="function"&&t(d),d!=null){var{width:m,height:f}=d.getBoundingClientRect();l(m,f)}},[t,l]);return y.createElement(y.Fragment,null,y.createElement(mp,{width:s.containerWidth,height:s.containerHeight}),y.createElement("div",Ul({ref:u},e)))}),VQ=y.forwardRef((e,t)=>{var{width:r,height:n}=e;return y.createElement(y.Fragment,null,y.createElement(mp,{width:r,height:n}),y.createElement("div",Ul({ref:t},e)))}),qQ=y.forwardRef((e,t)=>{var{width:r,height:n}=e;return no(r)||no(n)?y.createElement(WQ,Ul({},e,{ref:t})):y.createElement(VQ,Ul({},e,{ref:t}))});function HQ(e){return e===!0?BQ:qQ}var KQ=y.forwardRef((e,t)=>{var{children:r,className:n,height:s,onClick:i,onContextMenu:l,onDoubleClick:u,onMouseDown:d,onMouseEnter:m,onMouseLeave:f,onMouseMove:p,onMouseUp:v,onTouchEnd:x,onTouchMove:b,onTouchStart:S,style:j,width:N,responsive:E,dispatchTouchEvents:C=!0}=e,I=y.useRef(null),T=wn(),[O,V]=y.useState(null),[F,L]=y.useState(null),H=RQ(),le=pw(),K=(le==null?void 0:le.width)>0?le.width:N,ie=(le==null?void 0:le.height)>0?le.height:s,q=y.useCallback(J=>{H(J),typeof t=="function"&&t(J),V(J),L(J),J!=null&&(I.current=J)},[H,t,V,L]),G=y.useCallback(J=>{T(MI(J)),T(Pi({handler:i,reactEvent:J}))},[T,i]),ve=y.useCallback(J=>{T(jx(J)),T(Pi({handler:m,reactEvent:J}))},[T,m]),M=y.useCallback(J=>{T($O()),T(Pi({handler:f,reactEvent:J}))},[T,f]),Y=y.useCallback(J=>{T(jx(J)),T(Pi({handler:p,reactEvent:J}))},[T,p]),ce=y.useCallback(()=>{T(WI())},[T]),he=y.useCallback(J=>{T(BI(J.key))},[T]),U=y.useCallback(J=>{T(Pi({handler:l,reactEvent:J}))},[T,l]),re=y.useCallback(J=>{T(Pi({handler:u,reactEvent:J}))},[T,u]),pe=y.useCallback(J=>{T(Pi({handler:d,reactEvent:J}))},[T,d]),$e=y.useCallback(J=>{T(Pi({handler:v,reactEvent:J}))},[T,v]),de=y.useCallback(J=>{T(Pi({handler:S,reactEvent:J}))},[T,S]),ke=y.useCallback(J=>{C&&T(qI(J)),T(Pi({handler:b,reactEvent:J}))},[T,C,b]),Te=y.useCallback(J=>{T(Pi({handler:x,reactEvent:J}))},[T,x]),Ve=HQ(E);return y.createElement(nI.Provider,{value:O},y.createElement(kL.Provider,{value:F},y.createElement(Ve,{width:K??(j==null?void 0:j.width),height:ie??(j==null?void 0:j.height),className:qr("recharts-wrapper",n),style:MQ({position:"relative",cursor:"default",width:K,height:ie},j),onClick:G,onContextMenu:U,onDoubleClick:re,onFocus:ce,onKeyDown:he,onMouseDown:pe,onMouseEnter:ve,onMouseLeave:M,onMouseMove:Y,onMouseUp:$e,onTouchEnd:Te,onTouchMove:ke,onTouchStart:de,ref:q},y.createElement(UQ,null),r)))}),GQ=["width","height","responsive","children","className","style","compact","title","desc"];function YQ(e,t){if(e==null)return{};var r,n,s=JQ(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function JQ(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var XQ=y.forwardRef((e,t)=>{var{width:r,height:n,responsive:s,children:i,className:l,style:u,compact:d,title:m,desc:f}=e,p=YQ(e,GQ),v=Go(p);return d?y.createElement(y.Fragment,null,y.createElement(mp,{width:r,height:n}),y.createElement(kC,{otherAttributes:v,title:m,desc:f},i)):y.createElement(KQ,{className:l,style:u,width:r,height:n,responsive:s??!1,onClick:e.onClick,onMouseLeave:e.onMouseLeave,onMouseEnter:e.onMouseEnter,onMouseMove:e.onMouseMove,onMouseDown:e.onMouseDown,onMouseUp:e.onMouseUp,onContextMenu:e.onContextMenu,onDoubleClick:e.onDoubleClick,onTouchStart:e.onTouchStart,onTouchMove:e.onTouchMove,onTouchEnd:e.onTouchEnd},y.createElement(kC,{otherAttributes:v,title:m,desc:f,ref:t},y.createElement(uX,null,i)))});function Sx(){return Sx=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Sx.apply(null,arguments)}var QQ={top:5,right:5,bottom:5,left:5},ZQ={accessibilityLayer:!0,layout:"horizontal",stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:QQ,reverseStackOrder:!1,syncMethod:"index",responsive:!1},eZ=y.forwardRef(function(t,r){var n,s=Ri(t.categoricalChartProps,ZQ),{chartName:i,defaultTooltipEventType:l,validateTooltipEventTypes:u,tooltipPayloadSearcher:d,categoricalChartProps:m}=t,f={chartName:i,defaultTooltipEventType:l,validateTooltipEventTypes:u,tooltipPayloadSearcher:d,eventEmitter:void 0};return y.createElement(CQ,{preloadedState:{options:f},reduxStoreName:(n=m.id)!==null&&n!==void 0?n:i},y.createElement(eX,{chartData:m.data}),y.createElement(EQ,{layout:s.layout,margin:s.margin}),y.createElement(AQ,{baseValue:s.baseValue,accessibilityLayer:s.accessibilityLayer,barCategoryGap:s.barCategoryGap,maxBarSize:s.maxBarSize,stackOffset:s.stackOffset,barGap:s.barGap,barSize:s.barSize,syncId:s.syncId,syncMethod:s.syncMethod,className:s.className}),y.createElement(XQ,Sx({},s,{ref:r})))}),tZ=["axis","item"],rZ=y.forwardRef((e,t)=>y.createElement(eZ,{chartName:"BarChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:tZ,tooltipPayloadSearcher:gK,categoricalChartProps:e,ref:t}));const Jl="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='UTF-8'?%3e%3csvg%20id='icons'%20xmlns='http://www.w3.org/2000/svg'%20version='1.1'%20viewBox='0%200%20288%20288'%3e%3c!--%20Generator:%20Adobe%20Illustrator%2029.8.3,%20SVG%20Export%20Plug-In%20.%20SVG%20Version:%202.1.1%20Build%203)%20--%3e%3cdefs%3e%3cstyle%3e%20.st0%20{%20fill:%20%23c89211;%20}%20.st1%20{%20fill:%20%232e4760;%20}%20%3c/style%3e%3c/defs%3e%3crect%20class='st1'%20x='-.18'%20y='.13'%20width='288'%20height='287.75'%20rx='29.77'%20ry='29.77'/%3e%3cg%3e%3cpath%20class='st0'%20d='M255.27,97.14c-1.15-2.2-2.46-4.34-3.89-6.42-9.61-13.92-24.44-23.22-38.72-24.23-9.72-.86-15.97,1.42-30.41,10.99l-69.64,46.23-.72.49-27.78,32.23.56.79,5.22,7.56.54.8.73-.5,67.68-44.93c13.39-8.89,18.9-11.26,25.65-11.06,10.45.25,23.48,8.33,31.01,19.24,1.09,1.57,2.08,3.22,2.96,4.92,3.7,7.05,5.56,14.86,5.4,21.79l-61.49,40.82-.72.48-27.77,32.24.56.78,5.22,7.56.54.8.73-.48,69.63-46.23c7.75-5.15,12.63-8.93,15.92-12.75l27.76-32.24c-.11.12-.25.25-.35.37,3.04-3.42,4.8-6.83,6.16-11.25,3.68-11.38,1.81-25.42-4.79-38.01Z'/%3e%3cpath%20class='st0'%20d='M32.37,187.15c1.15,2.2,2.45,4.34,3.89,6.43,9.61,13.92,24.45,23.21,38.71,24.23,9.72.87,15.97-1.42,30.41-11l69.63-46.23.73-.49,27.77-32.24-.57-.78-5.22-7.57-.53-.8-.73.5-67.68,44.93c-13.39,8.89-18.9,11.26-25.65,11.06-10.44-.24-23.48-8.33-31-19.23-1.08-1.58-2.08-3.22-2.96-4.92-3.71-7.05-5.57-14.86-5.41-21.79l61.49-40.82.72-.48,27.77-32.24-.56-.79-5.21-7.56-.54-.79-.74.48-69.62,46.23c-7.75,5.14-12.63,8.93-15.92,12.75l-27.76,32.24c.11-.12.26-.25.36-.37-3.04,3.42-4.81,6.83-6.16,11.25-3.68,11.37-1.82,25.42,4.79,38Z'/%3e%3c/g%3e%3c/svg%3e",KI=["Bug","Change Request","Data Correction","Epic","Feature","Group","Issue","Other","Spike","Task","Test Case","User Story"];function nZ(){const e=window.location.origin,t=window.location.pathname,r=t.includes("/admin")?t.substring(0,t.indexOf("/admin")):t.includes("/voter")?t.substring(0,t.indexOf("/voter")):t;return`${e}${r}/admin`}const hi={clientId:"a6283b6c-2210-4d6c-bade-651acfdb6703",tenantId:"3bb4e039-9a0f-4671-9733-a9ae03d39395",get redirectUri(){return nZ()},scopes:["https://app.vssps.visualstudio.com/user_impersonation","offline_access"]};function sZ(){const e=new Uint8Array(32);return crypto.getRandomValues(e),GI(e)}async function iZ(e){const r=new TextEncoder().encode(e),n=await crypto.subtle.digest("SHA-256",r);return GI(new Uint8Array(n))}function GI(e){return btoa(String.fromCharCode(...e)).replace(/\+/g,"-").replace(/\//g,"_").replace(/=/g,"")}async function aZ(e){const t=sZ(),r=await iZ(t);sessionStorage.setItem("pkce_verifier",t);const n=new URLSearchParams({client_id:hi.clientId,response_type:"code",redirect_uri:hi.redirectUri,response_mode:"query",scope:hi.scopes.join(" "),state:e,code_challenge:r,code_challenge_method:"S256"});return`https://login.microsoftonline.com/${hi.tenantId}/oauth2/v2.0/authorize?${n}`}async function oZ(e){const t=`https://login.microsoftonline.com/${hi.tenantId}/oauth2/v2.0/token`,r=sessionStorage.getItem("pkce_verifier");if(!r)throw new Error("Code verifier not found - PKCE flow incomplete");const n=new URLSearchParams({client_id:hi.clientId,scope:hi.scopes.join(" "),code:e,redirect_uri:hi.redirectUri,grant_type:"authorization_code",code_verifier:r}),s=await fetch(t,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:n.toString()});if(!s.ok){const l=await s.json();throw console.error("Token exchange error:",l),new Error(`Failed to exchange code for tokens: ${l.error_description||l.error}`)}const i=await s.json();return sessionStorage.removeItem("pkce_verifier"),{accessToken:i.access_token,refreshToken:i.refresh_token,expiresIn:i.expires_in}}async function lZ(e){const t=`https://login.microsoftonline.com/${hi.tenantId}/oauth2/v2.0/token`,r=new URLSearchParams({client_id:hi.clientId,scope:hi.scopes.join(" "),refresh_token:e,grant_type:"refresh_token"}),n=await fetch(t,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:r.toString()});if(!n.ok){const i=await n.json();throw console.error("Token refresh error:",i),new Error(`Failed to refresh access token: ${i.error_description||i.error}`)}const s=await n.json();return{accessToken:s.access_token,expiresIn:s.expires_in}}async function YI(e,t){if(!e.accessToken||!e.organization||!e.project)throw new Error("Missing required configuration");const r=t||e.workItemType;if(!r)throw new Error("Missing work item type for state fetch");const n=encodeURIComponent(r),s=`https://dev.azure.com/${e.organization}/${e.project}/_apis/wit/workitemtypes/${n}?api-version=7.1`,i=await fetch(s,{headers:{Authorization:`Bearer ${e.accessToken}`,"Content-Type":"application/json"}});if(!i.ok)throw new Error(`Failed to fetch states: ${i.statusText}`);const l=await i.json();return l.states&&Array.isArray(l.states)?l.states.map(u=>u.name):[]}async function NC(e){const t=new Set;for(const r of KI)try{(await YI({...e,workItemType:r},r)).forEach(s=>{s&&t.add(s)})}catch(n){console.warn(`Failed to fetch states for type ${r}:`,n)}return Array.from(t).sort((r,n)=>r.localeCompare(n))}async function kx(e){if(!e.accessToken||!e.organization||!e.project)throw new Error("Missing required configuration");const t=`https://dev.azure.com/${e.organization}/${e.project}/_apis/wit/classificationnodes/areas?$depth=10&api-version=7.1`,r=await fetch(t,{headers:{Authorization:`Bearer ${e.accessToken}`,"Content-Type":"application/json"}});if(!r.ok)throw new Error(`Failed to fetch area paths: ${r.statusText}`);const n=await r.json(),s=(i,l="")=>{const u=l?`${l}\\${i.name}`:i.name;let d=[u];return i.children&&i.children.length>0&&i.children.forEach(m=>{d=d.concat(s(m,u))}),d};return s(n)}async function cZ(e,t,r=[]){var n;if(!e.accessToken||!e.organization||!e.project)throw new Error("Missing required configuration");if(!t)return kx(e);try{const s=[`[System.WorkItemType] = '${t}'`];if(r&&r.length>0)if(r.length===1)s.push(`[System.State] = '${r[0]}'`);else{const S=r.map(j=>`'${j}'`).join(", ");s.push(`[System.State] IN (${S})`)}const i=`SELECT [System.Id] FROM WorkItems WHERE ${s.join(" AND ")} ORDER BY [System.ChangedDate] DESC`,l=`https://dev.azure.com/${e.organization}/${e.project}/_apis/wit/wiql?api-version=7.1`,u=await fetch(l,{method:"POST",headers:{Authorization:`Bearer ${e.accessToken}`,"Content-Type":"application/json"},body:JSON.stringify({query:i})});if(!u.ok)return console.warn("Failed to fetch area paths by type/state, returning empty list"),[];const d=await u.json();if(!d.workItems||d.workItems.length===0)return[];const m=d.workItems.map(S=>S.id).slice(0,200);if(m.length===0)return[];const f=`https://dev.azure.com/${e.organization}/${e.project}/_apis/wit/workitems?ids=${m.join(",")}&fields=System.AreaPath,System.TeamProject&api-version=7.1`,p=await fetch(f,{headers:{Authorization:`Bearer ${e.accessToken}`,"Content-Type":"application/json"}});if(!p.ok)return console.warn("Failed to fetch work item area paths for filtered request"),[];const v=await p.json(),x=new Set,b=((n=e.project)==null?void 0:n.toLowerCase())||"";return v.value&&Array.isArray(v.value)&&v.value.forEach(S=>{var E,C,I;if((((C=(E=S.fields)==null?void 0:E["System.TeamProject"])==null?void 0:C.toLowerCase())||"")!==b)return;const N=(I=S.fields)==null?void 0:I["System.AreaPath"];N&&x.add(N)}),Array.from(x).sort()}catch(s){return console.error("Error fetching area paths for type/state:",s),[]}}async function uZ(e,t){var r;if(!e.accessToken||!e.organization||!e.project)throw new Error("Missing required configuration");if(!t||t.length===0)return{types:[],areaPaths:[],tags:[]};try{const s=`SELECT [System.Id], [System.WorkItemType], [System.AreaPath] FROM WorkItems WHERE ${t.length===1?`[System.State] = '${t[0]}'`:`[System.State] IN (${t.map(j=>`'${j}'`).join(", ")})`} ORDER BY [System.ChangedDate] DESC`,i=`https://dev.azure.com/${e.organization}/${e.project}/_apis/wit/wiql?api-version=7.1`,l=await fetch(i,{method:"POST",headers:{Authorization:`Bearer ${e.accessToken}`,"Content-Type":"application/json"},body:JSON.stringify({query:s})});if(!l.ok)throw new Error(`Failed to fetch work items by state: ${l.statusText}`);const u=await l.json();if(!u.workItems||u.workItems.length===0)return{types:[],areaPaths:[],tags:[]};const d=u.workItems.map(j=>j.id).slice(0,200);if(d.length===0)return{types:[],areaPaths:[],tags:[]};const m=`https://dev.azure.com/${e.organization}/${e.project}/_apis/wit/workitems?ids=${d.join(",")}&fields=System.WorkItemType,System.AreaPath,System.Tags,System.TeamProject&api-version=7.1`,f=await fetch(m,{headers:{Authorization:`Bearer ${e.accessToken}`,"Content-Type":"application/json"}});if(!f.ok)return console.warn("Failed to fetch work item details for states filter"),{types:[],areaPaths:[],tags:[]};const p=await f.json(),v=new Set,x=new Set,b=new Set,S=((r=e.project)==null?void 0:r.toLowerCase())||"";return p.value&&Array.isArray(p.value)&&p.value.forEach(j=>{var T,O,V,F,L;if((((O=(T=j.fields)==null?void 0:T["System.TeamProject"])==null?void 0:O.toLowerCase())||"")!==S)return;const E=(V=j.fields)==null?void 0:V["System.WorkItemType"],C=(F=j.fields)==null?void 0:F["System.AreaPath"],I=(L=j.fields)==null?void 0:L["System.Tags"];E&&v.add(E),C&&x.add(C),I&&I.split(";").map(H=>H.trim()).forEach(H=>{H&&b.add(H)})}),{types:Array.from(v).sort((j,N)=>j.localeCompare(N)),areaPaths:Array.from(x).sort((j,N)=>j.localeCompare(N)),tags:Array.from(b).sort((j,N)=>j.localeCompare(N))}}catch(n){return console.error("Error fetching types and area paths for states:",n),{types:[],areaPaths:[],tags:[]}}}async function dZ(e){if(!e.accessToken||!e.organization)throw new Error("Missing required configuration");const t=`https://dev.azure.com/${e.organization}/_apis/projects?stateFilter=All&api-version=7.1`,r=await fetch(t,{headers:{Authorization:`Bearer ${e.accessToken}`,"Content-Type":"application/json"}});if(!r.ok)throw new Error(`Failed to fetch projects: ${r.statusText}`);const n=await r.json();return!(n!=null&&n.value)||!Array.isArray(n.value)?[]:n.value.map(s=>s==null?void 0:s.name).filter(s=>typeof s=="string"&&s.trim().length>0).map(s=>s.trim()).sort((s,i)=>s.localeCompare(i))}async function fZ(e,t){var r;if(!e.accessToken||!e.organization||!e.project)throw new Error("Missing required configuration");try{const s=`SELECT [System.Id], [System.WorkItemType], [System.State] FROM WorkItems WHERE (${t.map(S=>`[System.AreaPath] UNDER '${S}'`).join(" OR ")}) ORDER BY [System.ChangedDate] DESC`,i=`https://dev.azure.com/${e.organization}/${e.project}/_apis/wit/wiql?api-version=7.1`,l=await fetch(i,{method:"POST",headers:{Authorization:`Bearer ${e.accessToken}`,"Content-Type":"application/json"},body:JSON.stringify({query:s})});if(!l.ok)throw new Error(`Failed to fetch work items: ${l.statusText}`);const u=await l.json();if(!u.workItems||u.workItems.length===0)return{types:[],states:[]};const d=u.workItems.map(S=>S.id).slice(0,200),m=`https://dev.azure.com/${e.organization}/${e.project}/_apis/wit/workitems?ids=${d.join(",")}&fields=System.WorkItemType,System.State,System.TeamProject&api-version=7.1`,f=await fetch(m,{headers:{Authorization:`Bearer ${e.accessToken}`,"Content-Type":"application/json"}});if(!f.ok)return console.warn("Failed to fetch work item details"),{types:[],states:[]};const p=await f.json(),v=new Set,x=new Set,b=((r=e.project)==null?void 0:r.toLowerCase())||"";return p.value&&Array.isArray(p.value)&&p.value.forEach(S=>{var j;if(S.fields){if((((j=S.fields["System.TeamProject"])==null?void 0:j.toLowerCase())||"")!==b)return;S.fields["System.WorkItemType"]&&v.add(S.fields["System.WorkItemType"]),S.fields["System.State"]&&x.add(S.fields["System.State"])}}),{types:Array.from(v).sort(),states:Array.from(x).sort()}}catch(n){return console.error("Error fetching types and states for area path:",n),{types:[],states:[]}}}async function hZ(e,t){var r;if(!e.accessToken||!e.organization||!e.project)throw new Error("Missing required configuration");try{const s=`SELECT [System.Id], [System.WorkItemType], [System.State] FROM WorkItems WHERE (${t.map(j=>`[System.Tags] CONTAINS '${j}'`).join(" OR ")}) ORDER BY [System.ChangedDate] DESC`,i=`https://dev.azure.com/${e.organization}/${e.project}/_apis/wit/wiql?api-version=7.1`,l=await fetch(i,{method:"POST",headers:{Authorization:`Bearer ${e.accessToken}`,"Content-Type":"application/json"},body:JSON.stringify({query:s})});if(!l.ok)throw new Error(`Failed to fetch work items: ${l.statusText}`);const u=await l.json();if(!u.workItems||u.workItems.length===0)return{types:[],states:[],areaPaths:[]};const d=u.workItems.map(j=>j.id).slice(0,200),m=`https://dev.azure.com/${e.organization}/${e.project}/_apis/wit/workitems?ids=${d.join(",")}&fields=System.WorkItemType,System.State,System.AreaPath,System.TeamProject&api-version=7.1`,f=await fetch(m,{headers:{Authorization:`Bearer ${e.accessToken}`,"Content-Type":"application/json"}});if(!f.ok)return console.warn("Failed to fetch work item details"),{types:[],states:[],areaPaths:[]};const p=await f.json(),v=new Set,x=new Set,b=new Set,S=((r=e.project)==null?void 0:r.toLowerCase())||"";return p.value&&Array.isArray(p.value)&&p.value.forEach(j=>{var N;if(j.fields){if((((N=j.fields["System.TeamProject"])==null?void 0:N.toLowerCase())||"")!==S)return;j.fields["System.WorkItemType"]&&v.add(j.fields["System.WorkItemType"]),j.fields["System.State"]&&x.add(j.fields["System.State"]),j.fields["System.AreaPath"]&&b.add(j.fields["System.AreaPath"])}}),{types:Array.from(v).sort(),states:Array.from(x).sort(),areaPaths:Array.from(b).sort()}}catch(n){return console.error("Error fetching types and states for tags:",n),{types:[],states:[],areaPaths:[]}}}async function mZ(e,t,r,n){if(!e.accessToken||!e.organization||!e.project)throw new Error("Missing required configuration");try{const s=[];if(s.push(`[System.WorkItemType] = '${t}'`),r&&r.length>0)if(r.length===1)s.push(`[System.State] = '${r[0]}'`);else{const b=r.map(S=>`'${S}'`).join(", ");s.push(`[System.State] IN (${b})`)}if(n&&n.length>0)if(n.length===1)s.push(`[System.AreaPath] UNDER '${n[0]}'`);else{const b=n.map(S=>`[System.AreaPath] UNDER '${S}'`);s.push(`(${b.join(" OR ")})`)}const i=`SELECT [System.Id] FROM WorkItems WHERE ${s.join(" AND ")} ORDER BY [System.ChangedDate] DESC`,l=`https://dev.azure.com/${e.organization}/${e.project}/_apis/wit/wiql?api-version=7.1`,u=await fetch(l,{method:"POST",headers:{Authorization:`Bearer ${e.accessToken}`,"Content-Type":"application/json"},body:JSON.stringify({query:i})});if(!u.ok)return console.warn("Failed to fetch tags, returning empty array"),[];const d=await u.json();if(!d.workItems||d.workItems.length===0)return[];const m=d.workItems.map(b=>b.id).slice(0,200),f=`https://dev.azure.com/${e.organization}/${e.project}/_apis/wit/workitems?ids=${m.join(",")}&fields=System.Tags&api-version=7.1`,p=await fetch(f,{headers:{Authorization:`Bearer ${e.accessToken}`,"Content-Type":"application/json"}});if(!p.ok)return console.warn("Failed to fetch work item details for tags"),[];const v=await p.json(),x=new Set;return v.value&&Array.isArray(v.value)&&v.value.forEach(b=>{b.fields&&b.fields["System.Tags"]&&b.fields["System.Tags"].split(";").map(j=>j.trim()).forEach(j=>{j&&x.add(j)})}),Array.from(x).sort()}catch(s){return console.warn("Error fetching tags, returning empty array:",s),[]}}async function CC(e){if(!e.accessToken||!e.organization||!e.project)throw new Error("Missing required configuration");const t=new Set;try{const r=[];let n=null;do{let s=`https://dev.azure.com/${e.organization}/${e.project}/_apis/wit/tags?api-version=7.1`;n&&(s+=`&continuationToken=${encodeURIComponent(n)}`);const i=await fetch(s,{headers:{Authorization:`Bearer ${e.accessToken}`,"Content-Type":"application/json"}});if(!i.ok){console.warn("Failed to fetch tags page, aborting remaining pages");break}const l=await i.json();l.value&&Array.isArray(l.value)&&l.value.forEach(u=>{u&&u.name&&r.push(u.name)}),n=i.headers.get("x-ms-continuationtoken")}while(n);r.forEach(s=>t.add(s))}catch(r){console.warn("Error fetching tags, returning empty array:",r)}try{(await pZ(e)).forEach(n=>t.add(n))}catch(r){console.warn("Error fetching tags via WIQL fallback:",r)}return Array.from(t).sort((r,n)=>r.localeCompare(n))}async function pZ(e){const t={query:"SELECT [System.Id] FROM WorkItems WHERE [System.TeamProject] = @project ORDER BY [System.ChangedDate] DESC"},r=`https://dev.azure.com/${e.organization}/${e.project}/_apis/wit/wiql?api-version=7.1`,n=await fetch(r,{method:"POST",headers:{Authorization:`Bearer ${e.accessToken}`,"Content-Type":"application/json"},body:JSON.stringify(t)});if(!n.ok)throw new Error(`Failed to fetch tags via WIQL: ${n.status}`);const s=await n.json();if(!s.workItems||s.workItems.length===0)return[];const i=s.workItems.map(f=>f.id).slice(0,200);if(i.length===0)return[];const l=`https://dev.azure.com/${e.organization}/${e.project}/_apis/wit/workitems?ids=${i.join(",")}&fields=System.Tags&api-version=7.1`,u=await fetch(l,{headers:{Authorization:`Bearer ${e.accessToken}`,"Content-Type":"application/json"}});if(!u.ok)throw new Error(`Failed to fetch work item details for tags via WIQL fallback: ${u.status}`);const d=await u.json(),m=new Set;return d.value&&Array.isArray(d.value)&&d.value.forEach(f=>{f.fields&&f.fields["System.Tags"]&&f.fields["System.Tags"].split(";").map(v=>v.trim()).forEach(v=>{v&&m.add(v)})}),Array.from(m)}function gZ(e){const t=new Date(e).getTime(),r=Date.now(),n=300*1e3;return t-r<n}async function yZ(){const e=new URLSearchParams(window.location.search),t=e.get("code"),r=e.get("state");if(!t)return null;const n=sessionStorage.getItem("oauth_state");if(r!==n)throw new Error("State mismatch - possible CSRF attack");const s=await oZ(t);return sessionStorage.removeItem("oauth_state"),s}async function vZ(){const e=Math.random().toString(36).substring(7);sessionStorage.setItem("oauth_state",e);const t=sessionStorage.getItem("currentSession");t&&sessionStorage.setItem("oauth_session_backup",t);const r=await aZ(e);window.location.href=r}async function EC(e){const{organization:t,project:r,workItemType:n,query:s,accessToken:i}=e;if(!i)throw new Error("Not authenticated with Azure DevOps");try{let l;s?l=`SELECT [System.Id] FROM WorkItems WHERE ${s}`:l=`SELECT [System.Id] FROM WorkItems WHERE [System.WorkItemType] = '${n}' AND [System.State] = 'Active'`;const u=`https://dev.azure.com/${t}/${r}/_apis/wit/wiql?api-version=7.0`,d=await fetch(u,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${i}`},body:JSON.stringify({query:l})});if(!d.ok)throw new Error(`Azure DevOps query failed: ${d.status} ${d.statusText}`);const f=(await d.json()).workItems.map(F=>F.id);if(f.length===0)return[];const p=["System.Id","System.Title","System.Description","System.Tags","System.WorkItemType","System.State","Microsoft.VSTS.Common.Priority","System.AreaPath","System.IterationPath"].join(","),v=200,x=[];for(let F=0;F<f.length;F+=v){const H=f.slice(F,F+v).join(","),le=`https://dev.azure.com/${t}/${r}/_apis/wit/workitems?ids=${H}&fields=${p}&api-version=7.0`,K=await fetch(le,{headers:{Authorization:`Bearer ${i}`}});if(!K.ok)throw new Error(`Failed to fetch work items: ${K.status} ${K.statusText}`);const ie=await K.json();ie.value&&Array.isArray(ie.value)&&x.push(...ie.value)}if(x.length===0)return[];const b=new Map,S=new Map,j=new Map,N=new Map,E=10;for(let F=0;F<x.length;F+=E){const L=x.slice(F,F+E);await Promise.all(L.map(async H=>{try{const le=`https://dev.azure.com/${t}/${r}/_apis/wit/workitems/${H.id}?$expand=relations&api-version=7.0`,K=await fetch(le,{headers:{Authorization:`Bearer ${i}`}});if(K.ok){const ie=await K.json(),q=H.fields["System.WorkItemType"]||"",G=q&&q.toLowerCase()==="epic";if(ie.relations){for(const ve of ie.relations)if(ve.rel==="System.LinkTypes.Hierarchy-Forward"){const M=ve.url.match(/\/work[iI]tems\/(\d+)(?:\?|$|\/)/i);if(M){const Y=parseInt(M[1],10);G?b.has(Y)||(b.set(Y,H.id),console.log(`[Epic Detection] Epic ${H.id} "${H.fields["System.Title"]}" has child ${Y}, storing as parent of ${Y}`)):b.has(H.id)?console.log(`[Epic Detection] Work item ${H.id} already has parent ${b.get(H.id)}, ignoring additional parent ${Y}`):(b.set(H.id,Y),console.log(`[Epic Detection] Work item ${H.id} "${H.fields["System.Title"]}" (type: ${q}) has parent ${Y}`))}}else if(ve.rel==="System.LinkTypes.Hierarchy-Reverse"){const M=ve.url.match(/\/work[iI]tems\/(\d+)(?:\?|$|\/)/i);if(M){const Y=parseInt(M[1],10);b.has(Y)||(b.set(Y,H.id),console.log(`[Epic Detection] Work item ${H.id} "${H.fields["System.Title"]}" (type: ${q}) has child ${Y}, storing as parent of ${Y}`))}}}}}catch(le){console.error(`Error fetching relations for work item ${H.id}:`,le)}}))}const C=Array.from(new Set(b.values()));if(C.length>0)for(let L=0;L<C.length;L+=200){const le=C.slice(L,L+200).join(","),K=["System.Id","System.Title","System.WorkItemType"].join(","),ie=`https://dev.azure.com/${t}/${r}/_apis/wit/workitems?ids=${le}&fields=${K}&api-version=7.0`;try{const q=await fetch(ie,{headers:{Authorization:`Bearer ${i}`}});if(q.ok){const G=await q.json(),ve=[];for(const M of G.value){const Y=M.fields["System.Title"]||"",ce=M.fields["System.WorkItemType"]||"";j.set(M.id,Y),N.set(M.id,ce),console.log(`[Epic Detection] Fetched parent ${M.id}: type="${ce}", title="${Y}"`),ce&&ce.toLowerCase()==="epic"?(S.set(M.id,Y),console.log(`[Epic Detection]  Found Epic ${M.id}: "${Y}"`)):(console.log(`[Epic Detection] Parent ${M.id} is type "${ce}", not an Epic - will check for grandparent`),ve.push(M.id))}ve.length>0&&await Promise.all(ve.map(async M=>{try{const Y=`https://dev.azure.com/${t}/${r}/_apis/wit/workitems/${M}?$expand=relations&api-version=7.0`,ce=await fetch(Y,{headers:{Authorization:`Bearer ${i}`}});if(ce.ok){const he=await ce.json();if(he.relations){for(const U of he.relations)if(U.rel==="System.LinkTypes.Hierarchy-Forward"){const re=U.url.match(/\/work[iI]tems\/(\d+)(?:\?|$|\/)/i);if(re){const pe=parseInt(re[1],10);b.has(M)||(b.set(M,pe),console.log(`[Epic Detection] Parent ${M} has grandparent ${pe}`))}}}}}catch(Y){console.error(`Error fetching relations for parent ${M}:`,Y)}}))}}catch(q){console.error("Error fetching parent work items:",q)}}let I=Array.from(new Set(b.values())).filter(F=>!j.has(F)),T=new Set,O=5,V=0;for(j.forEach((F,L)=>T.add(L));I.length>0&&V<O;){V++,console.log(`[Epic Detection] Fetching ancestor level ${V}, ${I.length} ancestors to fetch`);const F=200;for(let L=0;L<I.length;L+=F){const le=I.slice(L,L+F).join(","),K=["System.Id","System.Title","System.WorkItemType"].join(","),ie=`https://dev.azure.com/${t}/${r}/_apis/wit/workitems?ids=${le}&fields=${K}&api-version=7.0`;try{const q=await fetch(ie,{headers:{Authorization:`Bearer ${i}`}});if(q.ok){const G=await q.json(),ve=[];for(const M of G.value){if(T.has(M.id))continue;T.add(M.id);const Y=M.fields["System.Title"]||"",ce=M.fields["System.WorkItemType"]||"";j.set(M.id,Y),N.set(M.id,ce),console.log(`[Epic Detection] Fetched ancestor ${M.id}: type="${ce}", title="${Y}"`),ce&&ce.toLowerCase()==="epic"?(S.set(M.id,Y),console.log(`[Epic Detection]  Found Epic ancestor ${M.id}: "${Y}"`)):console.log(`[Epic Detection] Ancestor ${M.id} is type "${ce}", checking for its parent...`)}await Promise.all(G.value.map(async M=>{if(T.has(M.id))return;const Y=M.fields["System.WorkItemType"]||"";if(Y&&Y.toLowerCase()!=="epic")try{const ce=`https://dev.azure.com/${t}/${r}/_apis/wit/workitems/${M.id}?$expand=relations&api-version=7.0`,he=await fetch(ce,{headers:{Authorization:`Bearer ${i}`}});if(he.ok){const U=await he.json();if(U.relations){for(const re of U.relations)if(re.rel==="System.LinkTypes.Hierarchy-Forward"){const pe=re.url.match(/\/work[iI]tems\/(\d+)(?:\?|$|\/)/i);if(pe){const $e=parseInt(pe[1],10);T.has($e)||(b.set(M.id,$e),ve.push($e),console.log(`[Epic Detection] Ancestor ${M.id} has parent ${$e}`))}}}}}catch(ce){console.error(`Error fetching relations for ancestor ${M.id}:`,ce)}})),I=ve}}catch(q){console.error("Error fetching ancestor work items:",q)}}}return x.map(F=>{let L=null,H=null;const le=F.fields["System.WorkItemType"]||"",K=le&&le.toLowerCase()==="epic";if(K){const q=b.get(F.id);q&&(console.warn(`[Epic Detection]  Work item ${F.id} "${F.fields["System.Title"]}" is an Epic but has a parent ${q} stored. This is likely incorrect - Epics are at the top of the hierarchy.`),b.delete(F.id)),console.log(`[Epic Detection] Work item ${F.id} "${F.fields["System.Title"]}" is itself an Epic (type: ${le}), skipping Epic parent lookup`)}else{let q=b.get(F.id),G=[];for(;q&&!G.includes(q);){if(G.push(q),console.log(`[Epic Detection] Work item ${F.id} "${F.fields["System.Title"]}" (type: ${le}) checking parent ${q}`),L=S.get(q)||null,L){H=q,console.log(`[Epic Detection]  Work item ${F.id} "${F.fields["System.Title"]}" has Epic parent ${q}: "${L}"`);break}const ve=j.get(q),M=N.get(q);if(M)if(M.toLowerCase()==="epic"){L=ve||null,H=q,L&&S.set(q,L),console.log(`[Epic Detection]  Work item ${F.id} "${F.fields["System.Title"]}" has Epic parent ${q}: "${L}"`);break}else console.log(`[Epic Detection] Parent ${q} "${ve}" is type "${M}", traversing up to find Epic...`),q=b.get(q);else{console.warn(`[Epic Detection]  Work item ${F.id} "${F.fields["System.Title"]}" has parent ${q} but parent wasn't fetched`);break}}}if(!L&&!K){const q=b.get(F.id);if(q){const G=j.get(q),ve=N.get(q)||"Unknown";G?console.log(`[Epic Detection]  Work item ${F.id} "${F.fields["System.Title"]}" has parent ${q} "${G}" (type: "${ve}") but no Epic found in hierarchy`):console.warn(`[Epic Detection]  Work item ${F.id} "${F.fields["System.Title"]}" has parent ${q} but parent wasn't fetched`)}else console.log(`[Epic Detection] Work item ${F.id} "${F.fields["System.Title"]}" has no parent`)}if(!L&&F.fields){const G=["System.Epic","Epic","Microsoft.VSTS.Common.Epic","Custom.Epic","EpicLink","EpicName",...Object.keys(F.fields).filter(ve=>ve.toLowerCase().includes("epic")&&!["System.Epic","Epic","Microsoft.VSTS.Common.Epic","Custom.Epic","EpicLink","EpicName"].includes(ve))];for(const ve of G){const M=F.fields[ve];if(M!=null){if(typeof M=="string"&&M.trim()!==""){const Y=parseInt(M.trim());if(!isNaN(Y)&&Y>0){if(L=S.get(Y)||null,L){H=Y;break}}else{L=M.trim();break}}else if(typeof M=="number"&&(L=S.get(M)||null,L)){H=M;break}}}}if(!L){const q=b.get(F.id);console.log(q?`[Epic Detection] Work item ${F.id} "${F.fields["System.Title"]}" has parent ${q} but no Epic title found`:`[Epic Detection] Work item ${F.id} "${F.fields["System.Title"]}" has no Epic found (no parent)`)}const ie={id:F.id,fields:{"System.Title":F.fields["System.Title"],"System.Description":F.fields["System.Description"],"System.Tags":F.fields["System.Tags"],"System.WorkItemType":F.fields["System.WorkItemType"],"System.State":F.fields["System.State"],"Microsoft.VSTS.Common.Priority":F.fields["Microsoft.VSTS.Common.Priority"],"System.AreaPath":F.fields["System.AreaPath"],"System.IterationPath":F.fields["System.IterationPath"],Epic:L||void 0,EpicId:H?H.toString():void 0},url:`https://dev.azure.com/${t}/${r}/_workitems/edit/${F.id}`};return console.log(`[Map] Work item ${F.id} "${F.fields["System.Title"]}" mapped with Epic: "${L||"none"}", EpicId: "${H||"none"}"`),ie})}catch(l){throw console.error("Error fetching from Azure DevOps:",l),l}}function AC(e){return e.map(t=>{let r,n;const s=t.fields.Epic,i=t.fields.EpicId,l=t.fields["System.WorkItemType"];if(console.log(`[Convert] Work item ${t.id} "${t.fields["System.Title"]}": epicField="${s}", epicIdField="${i}", workItemType="${l}"`),s&&typeof s=="string"&&s.trim()!==""){const f=s.trim();f!==l&&f!=="Epic"&&f.toLowerCase()!=="epic"?(r=f,console.log(`[Convert] Work item ${t.id} converted - Epic: "${r}"`)):console.warn(`[Convert] Work item ${t.id} has epic field "${f}" which matches work item type "${l}" - ignoring`)}i&&typeof i=="string"&&i.trim()!==""&&(n=i.trim(),console.log(`[Convert] Work item ${t.id} - Epic ID: "${n}"`)),!r&&l!=="Epic"&&console.log(`[Convert] Work item ${t.id} "${t.fields["System.Title"]}" has no Epic assigned`);const d=(t.fields["System.Description"]||"").replace(/<[^>]*>/g,"").trim(),m=t.fields["System.Title"]||"Untitled";return r&&m===r&&console.warn(`Work item ${t.id}: Title "${m}" matches Epic name "${r}" - this may indicate a data issue`),{id:`ado-${t.id}`,title:m,description:d,votes:0,voters:[],epic:r||void 0,epicId:n||void 0,state:t.fields["System.State"]||void 0,areaPath:t.fields["System.AreaPath"]||void 0,tags:t.fields["System.Tags"]?t.fields["System.Tags"].split(";").map(f=>f.trim()).filter(f=>f):[],azureDevOpsId:t.id.toString(),azureDevOpsUrl:t.url,workItemType:l||void 0}})}function PC(){return"Product".split(",").map(t=>t.trim()).filter(t=>t.length>0)}const ea=e=>{const r=e.split("T")[0].split(" ")[0].split("-");if(r.length!==3)return new Date(e).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"});const n=parseInt(r[0],10),s=parseInt(r[1],10)-1,i=parseInt(r[2],10);return new Date(n,s,i).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})},_a=e=>new Date(e)<new Date,JI="/feature-voting-app/assets/colorpicker-CmB9zXJh.png",TC=[{bg:"#2D4660",text:"#FFFFFF",border:"#1D3144"},{bg:"#1E5461",text:"#FFFFFF",border:"#133742"},{bg:"#C89212",text:"#FFFFFF",border:"#A67810"},{bg:"#173B65",text:"#FFFFFF",border:"#0F2844"},{bg:"#2E5A8F",text:"#FFFFFF",border:"#1F4468"},{bg:"#4A6A8F",text:"#FFFFFF",border:"#3D5A7D"},{bg:"#5479A1",text:"#FFFFFF",border:"#4A6A8F"},{bg:"#6B8FBF",text:"#FFFFFF",border:"#5479A1"},{bg:"#3D7BAD",text:"#FFFFFF",border:"#2E5A8F"},{bg:"#258799",text:"#FFFFFF",border:"#145668"},{bg:"#36849B",text:"#FFFFFF",border:"#2A7489"},{bg:"#4098B3",text:"#FFFFFF",border:"#36849B"},{bg:"#2B9BAD",text:"#FFFFFF",border:"#1E7A89"},{bg:"#1FA3B5",text:"#FFFFFF",border:"#178290"},{bg:"#2D7A4E",text:"#FFFFFF",border:"#1E5A38"},{bg:"#3A9B5C",text:"#FFFFFF",border:"#2D7A4E"},{bg:"#52B876",text:"#FFFFFF",border:"#3A9B5C"},{bg:"#6FD492",text:"#FFFFFF",border:"#52B876"},{bg:"#4CAF7A",text:"#FFFFFF",border:"#3A9B5C"},{bg:"#7CB342",text:"#FFFFFF",border:"#689F38"},{bg:"#9CCC65",text:"#111827",border:"#7CB342"},{bg:"#E0A925",text:"#111827",border:"#C89212"},{bg:"#F4B729",text:"#111827",border:"#E0A925"},{bg:"#FFC940",text:"#111827",border:"#F4B729"},{bg:"#D4A017",text:"#FFFFFF",border:"#B8890F"},{bg:"#D87A35",text:"#FFFFFF",border:"#C4681F"},{bg:"#E88F3A",text:"#FFFFFF",border:"#D87A35"},{bg:"#FF9F4A",text:"#FFFFFF",border:"#E88F3A"},{bg:"#FF8C42",text:"#FFFFFF",border:"#E88F3A"},{bg:"#B83A2F",text:"#FFFFFF",border:"#9F2A21"},{bg:"#D44638",text:"#FFFFFF",border:"#B83A2F"},{bg:"#E85240",text:"#FFFFFF",border:"#D44638"},{bg:"#591D0F",text:"#FFFFFF",border:"#3C130A"},{bg:"#8A3420",text:"#FFFFFF",border:"#6F2818"},{bg:"#6B4C9A",text:"#FFFFFF",border:"#573A7F"},{bg:"#8E6BB5",text:"#FFFFFF",border:"#7556A1"},{bg:"#9B7AC7",text:"#FFFFFF",border:"#8E6BB5"},{bg:"#5D3F7A",text:"#FFFFFF",border:"#4A2F61"},{bg:"#492434",text:"#FFFFFF",border:"#311823"},{bg:"#5D2F43",text:"#FFFFFF",border:"#492434"},{bg:"#8B3A62",text:"#FFFFFF",border:"#6F2A4D"},{bg:"#A14A76",text:"#FFFFFF",border:"#8B3A62"},{bg:"#6A4234",text:"#FFFFFF",border:"#4B2D23"},{bg:"#8B5A3C",text:"#FFFFFF",border:"#6A4234"},{bg:"#A0694B",text:"#FFFFFF",border:"#8B5A3C"},{bg:"#7D5A3A",text:"#FFFFFF",border:"#6A4234"},{bg:"#3A3638",text:"#FFFFFF",border:"#2A2628"},{bg:"#4A4548",text:"#FFFFFF",border:"#3A3638"},{bg:"#5C5A5D",text:"#FFFFFF",border:"#4A4548"},{bg:"#7A8590",text:"#FFFFFF",border:"#5F6A74"},{bg:"#8F959B",text:"#111827",border:"#72777C"}],xZ=e=>e?e.trim().toLowerCase():"",wZ=e=>{let t=0;for(let r=0;r<e.length;r+=1)t=t*31+e.charCodeAt(r)>>>0;return t},Th=(e,t,r)=>Math.min(Math.max(e,t),r),bZ=e=>{if(!e)return null;let t=e.trim();return!t||(t.startsWith("#")||(t=`#${t}`),t.length===4&&(t=`#${t[1]}${t[1]}${t[2]}${t[2]}${t[3]}${t[3]}`),t.length!==7)?null:t.toUpperCase()},kb=e=>{const t=e.replace("#",""),r=parseInt(t,16);return{r:r>>16&255,g:r>>8&255,b:r&255}},jZ=({r:e,g:t,b:r})=>{const n=[e,t,r].map(s=>{const i=s/255;return i<=.03928?i/12.92:Math.pow((i+.055)/1.055,2.4)});return .2126*n[0]+.7152*n[1]+.0722*n[2]},SZ=e=>jZ(kb(e))>.6?"#111827":"#FFFFFF",OC=(e,t)=>{const{r,g:n,b:s}=kb(e),i=1+t/100,l=Th(Math.round(r*i),0,255),u=Th(Math.round(n*i),0,255),d=Th(Math.round(s*i),0,255);return`#${l.toString(16).padStart(2,"0")}${u.toString(16).padStart(2,"0")}${d.toString(16).padStart(2,"0")}`.toUpperCase()},kZ=(e,t)=>{const{r,g:n,b:s}=kb(e);return`rgba(${r}, ${n}, ${s}, ${Th(t,0,1)})`},on=(e,t)=>{const r=bZ(t);if(r){const l=SZ(r);return{background:r,text:l,border:OC(r,-20),badgeBackground:kZ(r,.15),badgeText:l,hoverBackground:OC(r,-5),hoverText:l}}const n=xZ(e),s=n?wZ(n)%TC.length:0,i=TC[s];return{background:i.bg,text:i.text,border:i.border,badgeBackground:`${i.bg}1A`,badgeText:i.text,hoverBackground:i.bg,hoverText:i.text}};function _Z({label:e="Product",products:t,value:r,onChange:n,fallbackName:s=null,isLoading:i=!1,error:l=null,disabled:u=!1,placeholder:d="Select a product",helperText:m,className:f="",allowAdd:p=!1,newProductName:v="",onNewProductNameChange:x,newProductColor:b,onNewProductColorChange:S,onCreateProduct:j,isCreatingProduct:N=!1,addHelperText:E,addButtonLabel:C="Add Product",addInputPlaceholder:I="e.g., Catalyst Cloud",allowDelete:T=!1,onRequestDeleteProduct:O}){const[V,F]=y.useState(!1),L=y.useRef(null),H=y.useRef(null),[le,K]=y.useState(!1),[ie,q]=y.useState(!1),G=y.useMemo(()=>t.find(ke=>ke.id===r)??null,[t,r]),ve=(G==null?void 0:G.name)??s??"",M=ve?on(ve,(G==null?void 0:G.color_hex)??null):null,Y=u||i||t.length===0;y.useEffect(()=>{if(!V)return;function ke(Ve){L.current&&!L.current.contains(Ve.target)&&F(!1)}function Te(Ve){Ve.key==="Escape"&&F(!1)}return document.addEventListener("mousedown",ke),document.addEventListener("keydown",Te),()=>{document.removeEventListener("mousedown",ke),document.removeEventListener("keydown",Te)}},[V]);const ce=ke=>{n(ke),F(!1)},he=!!(p&&x&&j),U=he&&le,re=!!S,pe=b??"#2D4660",$e=!!(e&&e.trim().length>0),de=$e||he;return a.jsxs("div",{className:`space-y-3 ${f}`,children:[a.jsx("style",{children:`
        .product-picker__menu {
          box-shadow: 0px 12px 28px rgba(45, 70, 96, 0.18);
          width: 100%;
          background-color: #ffffff;
          overflow: hidden;
        }

        .product-picker__item {
          display: flex;
          width: 100%;
          align-items: center;
          justify-content: flex-start;
          gap: 0.75rem;
          padding: 0.65rem 0.75rem;
          font-size: 0.875rem;
          background: #ffffff;
          border: none;
          border-top: 1px solid rgba(203, 213, 225, 0.4);
          cursor: pointer;
          color: var(--product-color, #2D4660);
          transition: color 0.3s ease;
          text-align: left;
        }

        .product-picker__item:first-child {
          border-top: none;
        }

        .product-picker__item:hover,
        .product-picker__item:focus-visible {
          background-color: var(--product-light-bg, rgba(45, 70, 96, 0.1));
          outline: none;
        }

        .product-color-badge {
          width: 1.5rem;
          height: 1.5rem;
          border-radius: 0.35rem;
          flex-shrink: 0;
          background-color: var(--product-color, #2D4660);
          border: 1px solid var(--product-border-color, rgba(0,0,0,0.12));
          box-shadow: inset 0 0 0 1px rgba(255,255,255,0.35);
        }
      `}),a.jsxs("div",{className:"relative",ref:L,style:de?void 0:{marginTop:"-12px"},children:[de&&a.jsxs("div",{className:"flex items-center justify-between mb-1 gap-3",children:[$e&&a.jsx("label",{className:"block text-sm font-medium text-gray-700",children:e}),he&&a.jsx("div",{className:"flex-1 flex items-center justify-end gap-2",children:U?a.jsxs("div",{className:"flex items-center gap-2 transition-all duration-300",children:[a.jsx("input",{type:"text",value:v,onChange:ke=>{q(!1),x==null||x(ke.target.value)},placeholder:"Product name",className:"flex-1 h-10 px-3 border rounded-md text-sm focus:outline-none focus:ring-0",style:{borderColor:b&&v.trim().length>0?b:"#D1D5DB"}}),re&&v.trim().length>0&&a.jsxs(a.Fragment,{children:[a.jsx("button",{type:"button",onClick:()=>{var ke;return(ke=H.current)==null?void 0:ke.click()},className:`relative h-10 w-10 rounded-md border shadow-sm flex items-center justify-center focus:outline-none focus:ring-2 focus:ring-offset-1 focus:ring-[#2d4660] ${b?"":"border-gray-300 bg-white"}`,style:b?{backgroundColor:b,borderColor:b}:void 0,"aria-label":"Choose product color",children:!b&&a.jsx("img",{src:"https://icon-library.com/images/color-wheel-icon-png/color-wheel-icon-png-25.jpg",alt:"",className:"h-7 w-7 object-contain pointer-events-none"})}),a.jsx("input",{ref:H,type:"color",value:pe,onChange:ke=>{q(!1),S==null||S(ke.target.value)},className:"sr-only"}),v.trim().length>0&&a.jsx("button",{type:"button",onClick:()=>q(!0),className:`h-10 px-3 rounded-md text-sm font-medium border transition-colors ${ie?"bg-green-50 border-green-500 text-green-700":"bg-white border-gray-300 text-gray-700 hover:bg-gray-50"}`,children:"Looks Great"})]}),v.trim().length>0&&b&&ie&&a.jsx("button",{type:"button",onClick:j,className:"h-10 px-4 bg-[#C89212] text-white rounded-md text-sm font-semibold hover:bg-[#A67810] transition-colors",children:N?"Creating":"Create New Product"})]}):a.jsx("button",{type:"button",onClick:()=>K(!0),className:"text-sm font-medium text-blue-600 hover:text-blue-700 whitespace-nowrap",children:"+ Create New Product"})})]}),a.jsxs("button",{type:"button",onClick:()=>!Y&&F(ke=>!ke),className:`relative flex w-full items-center justify-between rounded-md border px-3 py-2 text-left text-sm ${Y?"cursor-not-allowed bg-gray-100 text-gray-400 border-gray-200":"bg-white text-gray-900 border-gray-300 hover:border-[#2D4660]"}`,style:!Y&&M?{borderColor:M.border}:void 0,"aria-expanded":V,"aria-haspopup":"listbox",children:[a.jsxs("div",{className:"flex items-center gap-2 truncate",children:[M&&a.jsx("span",{className:"inline-flex h-3.5 w-3.5 rounded-sm border border-white/60 shadow-inner",style:{backgroundColor:M.background,borderColor:M.border},"aria-hidden":"true"}),a.jsx("span",{className:`truncate ${ve?"":"text-gray-400"}`,style:M?{color:M.background}:void 0,children:ve||(t.length===0?"No products available":d)})]}),a.jsx(ks,{className:`ml-2 h-4 w-4 transition-transform ${V?"rotate-180":""} ${Y?"text-gray-300":"text-gray-500"}`})]}),V&&!Y&&a.jsx("div",{className:"product-picker__menu absolute left-0 z-50 mt-2 w-full overflow-hidden rounded-md border border-gray-200 bg-white",style:{marginTop:"-10px"},role:"listbox",children:a.jsx("div",{className:"max-h-60 overflow-y-auto py-1",children:t.map(ke=>{const Te=on(ke.name,ke.color_hex??null),Ve=r===ke.id;return a.jsxs("div",{className:"product-picker__item",style:{"--product-color":Te.background,"--product-light-bg":Te.badgeBackground,"--product-border-color":Te.border},children:[a.jsxs("button",{type:"button",className:"flex flex-1 items-center gap-3 text-left",onClick:()=>ce(ke.id),"aria-selected":Ve,children:[a.jsx("span",{className:"product-color-badge","aria-hidden":"true"}),a.jsx("span",{className:"flex-1 truncate font-medium",children:ke.name}),Ve&&a.jsx(Mr,{className:"h-4 w-4 text-gray-400"})]}),T&&O&&a.jsx("button",{type:"button",onClick:J=>{J.stopPropagation(),F(!1),O(ke)},className:"ml-2 text-gray-400 hover:text-[#B83A2F]","aria-label":`Delete ${ke.name}`,title:"Delete product",children:a.jsx(to,{className:"h-4 w-4"})})]},ke.id)})})}),i&&a.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"Loading products"}),l&&a.jsx("p",{className:"mt-1 text-xs text-[#591D0F]",children:l}),!i&&!l&&m&&a.jsx("p",{className:"mt-1 text-xs text-gray-500",children:m})]}),he&&E&&U&&a.jsx("p",{className:"text-xs text-gray-500",children:E})]})}const IC=["OpsVision Portal","MillTrack Insight","Quality Compass","Supply Sync","Roadmap Nexus","Fabricator Hub","Blueprint Studio","Velocity Forge","Navigator Suite","Catalyst Cloud"],DC=e=>{if(!e)return null;const t=e.trim();return t.length===0?null:t},NZ=e=>{let t=0;for(let r=0;r<e.length;r+=1)t=t*31+e.charCodeAt(r)>>>0;return IC[t%IC.length]};function kr(e,t){const r=e.product_id??e.productId??null;if(r&&t){const i=DC(t[r]);if(i)return i}const n=DC(e.product_name??e.productName);if(n)return n;const s=r||e.id||e.title||"default-product";return NZ(s)}const CZ=["Stakeholders need more time","New backlog items require votes","Clarify previous results","Technical issue resolved","Other"],$C="https://cdn.iconscout.com/icon/free/png-512/azure-devops-3628645-3029870.png";function EZ({options:e,value:t,onChange:r,placeholder:n="Select...",label:s,disabled:i=!1,variant:l="default"}){const[u,d]=y.useState(!1),m=y.useRef(null);y.useEffect(()=>{function j(N){m.current&&!m.current.contains(N.target)&&d(!1)}return document.addEventListener("mousedown",j),()=>document.removeEventListener("mousedown",j)},[]);const f=j=>{r(j),d(!1)},p=t||n,v=l==="green"?"border-green-600":"border-gray-300",x=l==="green"?"text-green-600":"text-gray-400",b=l==="green"?"bg-green-50":"bg-blue-50",S=l==="green"?"text-green-600":"text-[#1E5461]";return a.jsxs("div",{ref:m,className:"relative",children:[s&&a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:s}),a.jsxs("div",{onClick:()=>!i&&d(!u),className:`w-full px-3 py-2 border ${v} rounded-md min-h-[38px] flex items-center justify-between ${i?"bg-gray-100 cursor-not-allowed":"bg-white cursor-pointer"}`,children:[a.jsx("span",{className:`text-sm ${t?"text-gray-900":"text-gray-400"}`,children:p}),a.jsx(ks,{className:`h-4 w-4 ${x} transition-transform ${u?"transform rotate-180":""}`})]}),u&&!i&&a.jsx("div",{className:"absolute z-50 w-full mt-1 bg-white border border-gray-300 rounded-md shadow-lg max-h-60 overflow-y-auto",children:e.map(j=>a.jsxs("div",{onClick:()=>f(j),className:`px-3 py-2 cursor-pointer hover:bg-gray-50 flex items-center justify-between ${t===j?b:""}`,children:[a.jsx("span",{className:"text-sm text-gray-900",children:j}),t===j&&a.jsx(Mr,{className:`h-4 w-4 ${S}`})]},j))})]})}function XI(e){if(!e)return null;const t=e.toLowerCase();return t==="epic"?{icon:Br,color:"rgb(51, 153, 71)"}:t==="feature"?{icon:Xm,color:"#773b93"}:t==="user story"||t==="story"?{icon:QE,color:"#007acc"}:t==="bug"?{icon:ZE,color:"#cc293d"}:t==="task"?{icon:$l,color:"#007acc"}:t==="change request"?{icon:XE,color:"#ff8c00"}:t==="test case"||t==="test"?{icon:eA,color:"#007acc"}:t==="issue"?{icon:an,color:"#cc293d"}:null}function fd({options:e,value:t,onChange:r,placeholder:n="Select...",label:s,searchable:i=!1,disabled:l=!1}){const[u,d]=y.useState(!1),[m,f]=y.useState(""),p=y.useRef(null),v=y.useRef(null);y.useEffect(()=>{function N(E){p.current&&!p.current.contains(E.target)&&(d(!1),f(""))}return document.addEventListener("mousedown",N),()=>document.removeEventListener("mousedown",N)},[]),y.useEffect(()=>{u&&i&&v.current&&v.current.focus()},[u,i]);const x=N=>{t.includes(N)?r(t.filter(E=>E!==N)):r([...t,N])},b=(N,E)=>{E.stopPropagation(),r(t.filter(C=>C!==N))},S=N=>{N.stopPropagation(),r([])},j=i&&m?e.filter(N=>N.toLowerCase().includes(m.toLowerCase())):e;return a.jsxs("div",{ref:p,className:"relative",children:[s&&a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:s}),a.jsxs("div",{onClick:()=>!l&&d(!u),className:`w-full px-3 py-2 border border-gray-300 rounded-md min-h-[38px] flex items-center justify-between ${l?"bg-gray-100 cursor-not-allowed":"bg-white cursor-pointer"}`,children:[a.jsx("div",{className:"flex-1 flex flex-wrap gap-1",children:t.length===0?a.jsx("span",{className:"text-sm text-gray-400",children:n}):t.map(N=>a.jsxs("span",{className:"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-[#2D4660]/10 text-[#2D4660]",children:[N,!l&&a.jsx("button",{type:"button",onClick:E=>b(N,E),className:"ml-1 hover:text-[#173B65]",children:a.jsx(Ts,{className:"h-3 w-3"})})]},N))}),a.jsxs("div",{className:"flex items-center gap-1 ml-2",children:[t.length>0&&!l&&a.jsx("button",{type:"button",onClick:S,className:"text-gray-400 hover:text-gray-600",children:a.jsx(Ts,{className:"h-4 w-4"})}),a.jsx(ks,{className:`h-4 w-4 text-gray-400 transition-transform ${u?"transform rotate-180":""}`})]})]}),u&&!l&&a.jsxs("div",{className:"absolute z-50 w-full mt-1 bg-white border border-gray-300 rounded-md shadow-lg max-h-60 overflow-hidden flex flex-col",children:[i&&a.jsx("div",{className:"p-2 border-b border-gray-200",children:a.jsx("input",{ref:v,type:"text",value:m,onChange:N=>f(N.target.value),onClick:N=>N.stopPropagation(),placeholder:"Type to search...",className:"w-full px-3 py-1.5 text-sm border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[#2D4660]"})}),a.jsx("div",{className:"overflow-y-auto",children:j.length>0?j.map(N=>a.jsxs("div",{onClick:()=>x(N),className:`px-3 py-2 cursor-pointer hover:bg-gray-50 flex items-center justify-between ${t.includes(N)?"bg-[#2D4660]/5":""}`,children:[a.jsx("span",{className:"text-sm",children:N}),t.includes(N)&&a.jsx(Mr,{className:"h-4 w-4 text-[#1E5461]"})]},N)):a.jsx("div",{className:"px-3 py-2 text-sm text-gray-500 text-center",children:"No matches found"})})]})]})}function AZ({isOpen:e,onClose:t,previewFeatures:r,onConfirmSync:n,onReplaceAll:s,isFetching:i=!1,config:l}){const[u,d]=y.useState(new Set);y.useEffect(()=>{if(e&&r&&r.length>0){const b=r.map(S=>S.id).filter(S=>S);console.log("PreviewFeaturesModal: Selecting all features by default",b.length,"features"),console.log("PreviewFeaturesModal: Feature IDs:",b),b.length>0&&d(new Set(b))}else e||d(new Set)},[e,r]);const m=b=>{d(S=>{const j=new Set(S);return j.has(b)?j.delete(b):j.add(b),j})},f=()=>{r&&(u.size===r.length?d(new Set):d(new Set(r.map(b=>b.id))))},p=async()=>{if(!r||r.length===0){console.warn("handleAddSelected: No preview features available");return}if(u.size===0){console.log("handleAddSelected: No features selected, selecting all by default");const S=r.map(j=>j.id).filter(j=>j);d(new Set(S)),setTimeout(()=>{p()},100);return}console.log("handleAddSelected: Preview features count:",r.length),console.log("handleAddSelected: Selected features count:",u.size),console.log("handleAddSelected: Selected feature IDs:",Array.from(u)),console.log("handleAddSelected: Preview feature IDs:",r.map(S=>S.id));const b=r.filter(S=>{const j=S.id&&u.has(S.id);return j||console.warn("handleAddSelected: Feature not selected:",S.id,S.title),j});if(b.length===0){if(console.warn("handleAddSelected: No features selected after filtering"),console.warn("handleAddSelected: Preview features:",r),console.warn("handleAddSelected: Selected set:",u),r.map(j=>j.id).filter(j=>j).length>0){console.log("handleAddSelected: Fallback - selecting all features");const j=r.filter(N=>N.id);if(j.length>0)try{await n(j),console.log("handleAddSelected: Sync completed with all features, closing modal"),t()}catch(N){console.error("handleAddSelected: Error during sync",N)}}return}console.log("handleAddSelected: Adding",b.length,"features");try{await n(b),console.log("handleAddSelected: Sync completed, closing modal"),t()}catch(S){console.error("handleAddSelected: Error during sync",S)}},v=async()=>{!r||!s||(await s(),t())},x=u.size;return a.jsx(yn,{isOpen:e,onClose:t,title:"Preview Azure DevOps Features",maxWidth:"max-w-6xl",children:a.jsx("div",{className:"space-y-4",children:r&&r.length>0?a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"bg-[#1E5461]/5 border border-[#1E5461]/20 rounded-lg p-4",children:a.jsx("p",{className:"text-[#1E5461] font-medium",children:"Select the work items you want to add to your voting session."})}),a.jsx("div",{className:"border border-gray-200 rounded-lg overflow-hidden",children:a.jsx("div",{className:"max-h-96 overflow-y-auto",children:a.jsxs("table",{className:"w-full",children:[a.jsx("thead",{className:"bg-gray-50 sticky top-0",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-4 py-3 text-left",children:a.jsx("button",{type:"button",onClick:b=>{b.stopPropagation(),f()},className:"flex items-center justify-center w-5 h-5",children:r.length>0&&u.size===r.length?a.jsx($l,{className:"w-5 h-5 text-green-600"}):a.jsx(Nd,{className:"w-5 h-5 text-gray-400"})})}),a.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-gray-700 uppercase",children:"Title"}),a.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-gray-700 uppercase",children:"Type"}),a.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-gray-700 uppercase",children:"State"}),a.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-gray-700 uppercase",children:"Epic"}),a.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-gray-700 uppercase",children:"Area Path"})]})}),a.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:r.map(b=>{const S=u.has(b.id);return console.log(`[PreviewModal] Rendering feature ${b.id} "${b.title}": epic="${b.epic}", epicId="${b.epicId}"`),a.jsxs("tr",{className:`hover:bg-gray-50 cursor-pointer ${S?"bg-blue-50":""}`,onClick:()=>m(b.id),children:[a.jsx("td",{className:"px-4 py-3",children:a.jsx("button",{type:"button",onClick:j=>{j.stopPropagation(),m(b.id)},className:"flex items-center justify-center w-5 h-5",children:S?a.jsx($l,{className:"w-5 h-5 text-green-600"}):a.jsx(Nd,{className:"w-5 h-5 text-gray-400"})})}),a.jsx("td",{className:"px-4 py-3",children:a.jsx("div",{className:"flex items-start gap-2",children:a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("div",{className:"text-sm font-medium text-gray-900",children:b.title}),b.description&&b.description.trim()&&a.jsxs("div",{className:"text-xs text-gray-500 mt-1 line-clamp-2",children:[b.description.replace(/<[^>]*>/g,"").substring(0,100),b.description.replace(/<[^>]*>/g,"").length>100?"...":""]}),b.tags&&b.tags.length>0&&a.jsxs("div",{className:"flex flex-wrap gap-1 mt-1",children:[b.tags.slice(0,3).map((j,N)=>a.jsx("span",{className:"px-1.5 py-0.5 text-xs bg-gray-100 text-gray-600 rounded",children:j},N)),b.tags.length>3&&a.jsxs("span",{className:"px-1.5 py-0.5 text-xs text-gray-500",children:["+",b.tags.length-3]})]})]})})}),a.jsx("td",{className:"px-4 py-3 align-middle",children:a.jsx("div",{className:"flex items-center gap-2",children:(()=>{const j=XI(b.workItemType);if(j&&b.azureDevOpsId){const N=j.icon,C=(O=>{const V=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(O);return V?{r:parseInt(V[1],16),g:parseInt(V[2],16),b:parseInt(V[3],16)}:null})(j.color),I=C?`rgba(${C.r}, ${C.g}, ${C.b}, 0.1)`:`${j.color}20`,T=C?`rgba(${C.r}, ${C.g}, ${C.b}, 0.2)`:`${j.color}40`;return a.jsxs("a",{href:b.azureDevOpsUrl||"",target:"_blank",rel:"noopener noreferrer",onClick:O=>O.stopPropagation(),className:"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium cursor-pointer border",style:{backgroundColor:I,color:j.color,borderColor:j.color},onMouseEnter:O=>{O.currentTarget.style.backgroundColor=T},onMouseLeave:O=>{O.currentTarget.style.backgroundColor=I},title:"View in Azure DevOps",children:[a.jsx(N,{className:"h-3 w-3 mr-1",style:{color:j.color}}),b.azureDevOpsId.replace(/^ado-/,"#")]})}else{if(b.workItemType&&b.azureDevOpsId)return a.jsxs("a",{href:b.azureDevOpsUrl||"",target:"_blank",rel:"noopener noreferrer",onClick:N=>N.stopPropagation(),className:"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-[#492434]/10 text-[#492434] hover:bg-[#492434]/20 cursor-pointer border border-[#492434]/30",title:"View in Azure DevOps",children:[a.jsx("span",{className:"mr-1 text-xs",children:b.workItemType}),b.azureDevOpsId.replace(/^ado-/,"#")]});if(j){const N=j.icon;return a.jsx(N,{className:"w-5 h-5",style:{color:j.color}})}else if(b.workItemType)return a.jsx("span",{className:"px-2 py-1 text-xs font-medium bg-[#492434]/10 text-[#492434] rounded",children:b.workItemType})}return null})()})}),a.jsx("td",{className:"px-4 py-3 align-middle",children:b.state&&a.jsx("span",{className:"px-2 py-1 text-xs font-medium bg-[#1E5461]/10 text-[#1E5461] rounded",children:b.state})}),a.jsx("td",{className:`px-4 py-3 align-middle ${b.epic||b.workItemType&&b.workItemType.toLowerCase()==="epic"?"w-64":"w-32"}`,children:b.workItemType&&b.workItemType.toLowerCase()==="epic"?a.jsx("span",{className:"text-xs text-gray-600 italic",children:"This Work Item is an Epic"}):b.epic?b.epicId?a.jsx("a",{href:`https://dev.azure.com/${l.organization}/${l.project}/_workitems/edit/${b.epicId}`,target:"_blank",rel:"noopener noreferrer",onClick:j=>j.stopPropagation(),className:"inline-block w-full",children:a.jsx(Bl,{name:b.epic,epicId:b.epicId,description:b.description,className:"hover:opacity-80"})}):a.jsx(Bl,{name:b.epic,description:b.description}):a.jsx("span",{className:"text-xs text-gray-400 italic",children:"no Epic assigned"})}),a.jsx("td",{className:"px-4 py-3 align-middle",children:b.areaPath?a.jsx("div",{className:"text-xs text-gray-700 max-w-xs truncate",title:b.areaPath,children:b.areaPath}):a.jsx("span",{className:"text-xs text-gray-400",children:""})})]},b.id)})})]})})}),a.jsxs("div",{className:"flex justify-between items-center pt-4 border-t",children:[a.jsxs("div",{className:"text-sm text-gray-600",children:[x," of ",r.length," selected"]}),a.jsxs("div",{className:"flex space-x-2",children:[a.jsx(jt,{variant:"primary",onClick:p,disabled:x===0||i,className:"flex items-center",children:i?a.jsxs(a.Fragment,{children:[a.jsx(Ko,{className:"h-4 w-4 mr-2 animate-spin"}),"Adding..."]}):a.jsxs(a.Fragment,{children:[a.jsx(dn,{className:"h-4 w-4 mr-2"}),"Add ",x," Feature",x!==1?"s":""]})}),s&&a.jsxs(jt,{variant:"danger",onClick:v,className:"flex items-center",children:[a.jsx(Ko,{className:"h-4 w-4 mr-2"}),"Replace All Features"]})]})]})]}):a.jsxs("div",{className:"text-center py-8",children:[a.jsx(an,{className:"h-12 w-12 text-gray-400 mx-auto mb-3"}),a.jsx("p",{className:"text-gray-600",children:"No features found to sync"})]})})})}function PZ({config:e,onUpdateConfig:t,onPreview:r,isFetching:n,availableStates:s,availableAreaPaths:i,availableTags:l,previewFeatures:u,showPreviewModal:d,onFetchStatesForType:m,onFetchAreaPathsForTypeAndState:f,onFetchTagsForTypeStateAndAreaPath:p,onFetchTypesAndStatesForAreaPath:v,onFetchTypesAndStatesForTags:x,onFetchTypesAndAreaPathsForStates:b,resetSignal:S}){const j=KI,[N,E]=y.useState(!1),[C,I]=y.useState(null),[T,O]=y.useState(!1),[V,F]=y.useState(!1),[L,H]=y.useState(!1),[le,K]=y.useState(0),ie=y.useRef(null),q=y.useRef(!1),G=y.useRef(!1),ve=y.useRef(null),M=y.useRef(e),Y=y.useRef(null),ce=y.useRef(!1),he=y.useRef(!1),U=y.useRef(!1),re=y.useRef(null),pe=y.useRef(!1),$e=y.useRef(!1),de=y.useRef([]),ke=y.useRef([]),Te=y.useRef([]),Ve=y.useRef(null),J=y.useRef(null),je=y.useRef([]),fe=y.useRef([]),se=y.useRef([]),Ze={workItemTypes:[],states:[],areaPaths:[],tags:[],query:""},{register:Ge,handleSubmit:Ue,watch:At,control:gt,setValue:wt,reset:Yt}=Cd({defaultValues:Ze}),z=y.useCallback(()=>{$e.current=!0,Yt({...Ze}),E(!1),ce.current=!1,he.current=!1,U.current=!1,pe.current=!1,G.current=!1,ve.current=null,re.current!==null&&(clearTimeout(re.current),re.current=null),Ve.current!==null&&(clearTimeout(Ve.current),Ve.current=null),J.current=null,je.current=[],fe.current=[],se.current=[],setTimeout(()=>{$e.current=!1},500)},[Yt]);y.useEffect(()=>{z()},[S,z]);const W=At("workItemTypes"),ee=At("states"),Se=At("areaPaths"),Ne=At("tags");y.useEffect(()=>{if(he.current||pe.current||ce.current||U.current||$e.current){de.current=W||[],ke.current=ee||[],Te.current=Se||[];return}const We=W.length<de.current.length,yt=ee.length<ke.current.length,kt=Se.length<Te.current.length;if(We||yt||kt){J.current=Date.now(),de.current=W||[],ke.current=ee||[],Te.current=Se||[],$e.current=!0,Ve.current!==null&&clearTimeout(Ve.current);const ze=async()=>{We&&(je.current=[]),yt&&(fe.current=[]),kt&&(se.current=[]),W&&W.length>0?(m&&await m(W[0]),f&&await f(W[0],ee||[]),p&&await p(W[0],ee||[],Se||[])):ee&&ee.length>0&&b?await b(ee):Se&&Se.length>0&&v&&await v(Se),setTimeout(()=>{Ve.current=null,setTimeout(()=>{$e.current=!1,setTimeout(()=>{J.current=null},2e3)},1e3)},500)};Ve.current=window.setTimeout(()=>{ze()},100)}else de.current=W||[],ke.current=ee||[],Te.current=Se||[]},[W,ee,Se,Ne,m,f,p,b,v]);const Ee=At("query"),qe=y.useCallback((We,yt,kt,ze,Le,ct)=>{const at=[];if(We&&We.length>0)if(We.length===1)at.push(`[System.WorkItemType] = '${We[0]}'`);else{const Je=We.map(Ct=>`'${Ct}'`).join(", ");at.push(`[System.WorkItemType] IN (${Je})`)}if(yt&&yt.length>0)if(yt.length===1)at.push(`[System.State] = '${yt[0]}'`);else{const Je=yt.map(Ct=>`'${Ct}'`).join(", ");at.push(`[System.State] IN (${Je})`)}if(kt&&kt.length>0)if(kt.length===1)at.push(`[System.AreaPath] UNDER '${kt[0]}'`);else{const Je=kt.map(Ct=>`[System.AreaPath] UNDER '${Ct}'`);at.push(`(${Je.join(" OR ")})`)}if(ze&&ze.length>0){const Je=ze.map(Ct=>`[System.Tags] CONTAINS '${Ct}'`);at.push(`(${Je.join(" OR ")})`)}return ct&&Le&&at.push(`(${Le})`),at.length>0?at.join(" AND "):void 0},[]);y.useEffect(()=>{if(!(ce.current||he.current||U.current||pe.current||re.current!==null)&&m){if(!W||W.length===0){m(void 0);return}m(W[0])}},[W,m]),y.useEffect(()=>{if(ce.current||he.current||pe.current||!f)return;(async()=>{F(!0);try{await f(W&&W.length>0?W[0]:void 0,ee||[])}finally{F(!1)}})()},[W,ee,f]),y.useEffect(()=>{if(he.current||ce.current||U.current||re.current!==null||pe.current||!p||!W||W.length===0)return;const We=async()=>{H(!0);try{await p(W[0],ee||[],Se||[])}finally{H(!1)}},yt=setTimeout(()=>{We()},100);return()=>{clearTimeout(yt),H(!1)}},[W,ee,Se,p]),y.useEffect(()=>{var Le,ct;if(!v||$e.current||Ve.current!==null||he.current||pe.current||!Se||Se.length===0)return;if(J.current!==null){if(Date.now()-J.current<5e3)return;J.current=null}const We=W&&W.length>0,yt=ee&&ee.length>0;if(We&&yt)return;const kt=((W==null?void 0:W.length)||0)<(((Le=de.current)==null?void 0:Le.length)||0),ze=((ee==null?void 0:ee.length)||0)<(((ct=ke.current)==null?void 0:ct.length)||0);if(kt||ze){de.current=W||[],ke.current=ee||[],J.current=Date.now();return}ce.current=!0,v(Se).then(({types:at,states:Je})=>{at.length>0&&!We&&(wt("workItemTypes",at,{shouldDirty:!1}),de.current=at),Je.length>0&&!yt&&(wt("states",Je,{shouldDirty:!1}),ke.current=Je)}).finally(()=>{setTimeout(()=>{ce.current=!1},300)})},[Se,W,ee,v,wt]),y.useEffect(()=>{var rt,Ht,Ft;if(!x||$e.current||Ve.current!==null||ce.current||U.current)return;if(J.current!==null){if(Date.now()-J.current<5e3)return;J.current=null}const We=((W==null?void 0:W.length)||0)<(((rt=de.current)==null?void 0:rt.length)||0),yt=((ee==null?void 0:ee.length)||0)<(((Ht=ke.current)==null?void 0:Ht.length)||0),kt=((Se==null?void 0:Se.length)||0)<(((Ft=Te.current)==null?void 0:Ft.length)||0),ze=W||[],Le=ee||[],ct=Se||[],at=je.current||[],Je=fe.current||[],Ct=se.current||[],Wt=at.length>0&&ze.length<at.length&&ze.every(vt=>at.includes(vt)),rr=Je.length>0&&Le.length<Je.length&&Le.every(vt=>Je.includes(vt)),sr=Ct.length>0&&ct.length<Ct.length&&ct.every(vt=>Ct.includes(vt));if(We||yt||kt||Wt||rr||sr){de.current=W||[],ke.current=ee||[],Te.current=Se||[],J.current=Date.now();return}if(!Ne||Ne.length===0){re.current!==null&&(clearTimeout(re.current),re.current=null),pe.current=!1,ve.current=null,G.current=!1,J.current=null,je.current=[],fe.current=[],se.current=[];return}he.current=!0,pe.current=!0,ve.current=Date.now(),re.current!==null&&clearTimeout(re.current),re.current=window.setTimeout(()=>{re.current=null,setTimeout(()=>{pe.current=!1,ve.current=null,G.current=!0,K(vt=>vt+1)},500)},1500),x(Ne).then(({types:vt,states:ir,areaPaths:yr})=>{vt.length>0,ir.length>0,yr.length>0,vt.length>0&&(wt("workItemTypes",vt,{shouldDirty:!1}),de.current=vt,je.current=vt),ir.length>0&&(wt("states",ir,{shouldDirty:!1}),ke.current=ir,fe.current=ir),yr.length>0&&(wt("areaPaths",yr,{shouldDirty:!1}),Te.current=yr,se.current=yr),vt.length>0&&(G.current=!0,setTimeout(()=>{const hr=M.current,Fr=Y.current;!pe.current&&!he.current&&re.current===null&&hr.enabled&&hr.accessToken&&Fr?(ie.current!==null&&(window.clearTimeout(ie.current),ie.current=null),Fr(),G.current=!1):K(mr=>mr+1)},2100))}).finally(()=>{setTimeout(()=>{he.current=!1},500)})},[Ne,x,wt]),y.useEffect(()=>{!b||ce.current||he.current||!ee||ee.length===0||W&&W.length>0||(U.current=!0,b(ee).then(({types:yt})=>{yt.length>0&&wt("workItemTypes",yt,{shouldDirty:!1})}).finally(()=>{setTimeout(()=>{U.current=!1},300)}))},[ee,W,b,wt]),y.useEffect(()=>{if(ee&&ee.length>0&&s.length>0){const We=ee.filter(yt=>s.includes(yt));We.length!==ee.length&&wt("states",We)}},[s,ee,wt]),y.useEffect(()=>{if(Se&&Se.length>0&&i.length>0){const We=Se.filter(yt=>i.includes(yt));We.length!==Se.length&&(wt("areaPaths",We),We.length===0&&wt("tags",[]))}},[i,Se,wt]),y.useEffect(()=>{if(Ne&&Ne.length>0&&l.length>0){const We=Ne.filter(yt=>l.includes(yt));We.length!==Ne.length&&wt("tags",We)}},[l,Ne,wt]);const Fe=y.useCallback(async()=>{if(!e.enabled||!e.accessToken||!W||W.length===0){I(null);return}try{O(!0);const We=W[0],yt=qe(W||[],ee||[],Se||[],Ne||[],Ee||"",N);let kt="";yt?kt=`SELECT [System.Id] FROM WorkItems WHERE ${yt}`:kt=`SELECT [System.Id] FROM WorkItems WHERE [System.WorkItemType] = '${We}' AND [System.State] = 'Active'`;const ze=`https://dev.azure.com/${e.organization}/${e.project}/_apis/wit/wiql?api-version=7.0`,Le=await fetch(ze,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${e.accessToken}`},body:JSON.stringify({query:kt})});if(!Le.ok)throw new Error(`Azure DevOps query failed: ${Le.status} ${Le.statusText}`);const ct=await Le.json(),at=ct.workItems?ct.workItems.length:0;I(at)}catch(We){console.error("[FilterForm] Error fetching feature count:",We),I(null)}finally{O(!1)}},[e,W,ee,Se,Ne,Ee,N,qe]);y.useEffect(()=>{M.current=e,Y.current=Fe},[e,Fe]),y.useEffect(()=>{if(ie.current!==null&&(window.clearTimeout(ie.current),ie.current=null),!W||W.length===0){I(null);return}if(G.current&&W&&W.length>0){const We=!pe.current&&!he.current&&re.current===null,yt=ve.current===null||Date.now()-ve.current>=2100;if(We||yt){G.current=!1;const kt=M.current,ze=Y.current;kt.enabled&&kt.accessToken&&ze&&ze();return}return}if(pe.current||he.current||re.current!==null){G.current=!0;return}return e.enabled&&e.accessToken?ie.current=window.setTimeout(()=>{Fe()},300):I(null),()=>{ie.current!==null&&(window.clearTimeout(ie.current),ie.current=null)}},[W,ee,Se,Ne,Ee,N,e.enabled,e.accessToken,Fe,le]),y.useEffect(()=>{if(d&&!q.current&&u){const We=u.length;I(We)}q.current=d||!1},[d,u]),y.useEffect(()=>{u&&u.length>0?I(u.length):u&&u.length===0&&I(0)},[u]),y.useEffect(()=>{const We=qe(W||[],ee||[],Se||[],Ne||[],Ee||"",N),yt={...e,workItemType:W&&W.length>0?W[0]:e.workItemType||"Feature",query:We,states:ee&&ee.length>0?ee:void 0,areaPath:Se&&Se.length>0?Se[0]:void 0,tags:Ne&&Ne.length>0?Ne:void 0},kt=window.setTimeout(()=>{t(yt)},100);return()=>{window.clearTimeout(kt)}},[W,ee,Se,Ne,Ee,N,qe,t]);const Mt=async We=>{await r()};return a.jsxs("form",{onSubmit:Ue(Mt),className:"bg-gray-50 p-4 rounded-lg border border-gray-200",children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsxs("h3",{className:"text-lg font-medium text-[#2D4660] flex items-center",children:[a.jsx(hF,{className:"h-5 w-5 mr-2"}),"Filter Work Items"]}),a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("button",{type:"button",onClick:z,className:"text-xs text-[#576C71] hover:text-[#2D4660] font-medium border border-transparent hover:border-[#576C71] rounded-full px-2 py-0.5 transition",children:"Clear All Filters"}),a.jsx("button",{type:"button",onClick:()=>E(!N),className:"text-xs text-[#1E5461] hover:text-[#2D4660] font-medium",children:N?" Hide Advanced WIQL":"Show Advanced WIQL "})]})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-4",children:[a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[a.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Work Item Type"}),a.jsx("span",{className:"px-2 py-0.5 rounded-full text-xs font-semibold text-white bg-[#2D4660]",children:j.length})]}),a.jsx(cd,{name:"workItemTypes",control:gt,render:({field:We})=>a.jsx(fd,{options:j,value:We.value,onChange:We.onChange,placeholder:"Select types..."})}),a.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"Click to select multiple types"})]}),a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[a.jsx("span",{className:"text-sm font-medium text-gray-700",children:"State (Optional)"}),a.jsx("span",{className:"px-2 py-0.5 rounded-full text-xs font-semibold text-white bg-[#1E5461]",children:(s==null?void 0:s.length)||0})]}),a.jsx(cd,{name:"states",control:gt,render:({field:We})=>a.jsx(fd,{options:s,value:We.value,onChange:We.onChange,placeholder:"Select states...",disabled:s.length===0})}),a.jsx("p",{className:"mt-1 text-xs text-gray-500",children:s.length===0?"Loading states...":"Filtered by work item type"})]}),a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[a.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Area Path (Optional)"}),a.jsx("span",{className:"px-2 py-0.5 rounded-full text-xs font-semibold text-white bg-[#576C71]",children:(i==null?void 0:i.length)||0})]}),a.jsx(cd,{name:"areaPaths",control:gt,render:({field:We})=>a.jsx(fd,{options:i,value:We.value,onChange:We.onChange,placeholder:"Select area paths...",searchable:!0,disabled:i.length===0})}),a.jsx("p",{className:"mt-1 text-xs text-gray-500",children:V?"Loading area paths...":i.length===0?"No area paths found for current filters":"Filtered by type & state"})]}),a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[a.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Tags (Optional)"}),a.jsx("span",{className:"px-2 py-0.5 rounded-full text-xs font-semibold text-white bg-[#C89212]",children:(l==null?void 0:l.length)||0})]}),a.jsx(cd,{name:"tags",control:gt,render:({field:We})=>a.jsx(fd,{options:l,value:We.value,onChange:We.onChange,placeholder:"Select tags...",searchable:!0,disabled:l.length===0&&!L})}),a.jsx("p",{className:"mt-1 text-xs text-gray-500",children:!W||W.length===0?"Select work item type to see tags":L?"Loading tags...":l.length===0?"No tags found for current filters":"Filtered by type, state & area"})]})]}),N&&a.jsxs("div",{className:"mb-4",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Advanced WIQL Query (Optional)"}),a.jsx("input",{...Ge("query"),placeholder:"e.g., [System.Priority] = 1",className:"w-full px-3 py-2 border border-gray-300 rounded-md text-sm"}),a.jsxs("p",{className:"mt-1 text-xs text-gray-500",children:["Will be combined with above filters using AND."," ",a.jsx("a",{href:"https://learn.microsoft.com/en-us/azure/devops/boards/queries/wiql-syntax",target:"_blank",rel:"noopener noreferrer",className:"text-[#1E5461] hover:text-[#2D4660]",children:"WIQL syntax reference "})]})]}),a.jsx("div",{className:"flex justify-end",children:a.jsxs(jt,{variant:"gold",type:"submit",disabled:(()=>{const We=((W==null?void 0:W.length)??0)>0,yt=((ee==null?void 0:ee.length)??0)>0,kt=((Se==null?void 0:Se.length)??0)>0,ze=((Ne==null?void 0:Ne.length)??0)>0,Le=Ee&&Ee.trim().length>0;return n||T||!(We||yt||kt||ze||Le)})(),className:"flex items-center",children:[n&&a.jsx(Ko,{className:"animate-spin h-4 w-4 mr-2"}),n?"Loading...":(()=>{const We=C!==null?C:(u==null?void 0:u.length)??null;return We!==null?`Preview ${We} Feature${We!==1?"s":""}`:"Preview Features"})()]})})]})}function TZ({session:e,featureCount:t,onSubmit:r,onCancel:n,onRequestDeleteSession:s,isDeletingSession:i,productName:l,products:u,isLoadingProducts:d,productError:m,onRequestDeleteProduct:f,onProductColorUpdated:p}){const[v,x]=y.useState(null),[b,S]=y.useState(!1),[j,N]=y.useState("#2D4660"),[E,C]=y.useState(null),[I,T]=y.useState(!1);y.useRef(null);const O="2099-12-31",V=fe=>fe?fe.split("T")[0]===O:!1,F=fe=>{if(!fe||typeof fe!="string")return new Date;const Ze=fe.split("T")[0].split(" ")[0].split("-");if(Ze.length!==3)return new Date;const Ge=parseInt(Ze[0],10),Ue=parseInt(Ze[1],10),At=parseInt(Ze[2],10);if(isNaN(Ge)||isNaN(Ue)||isNaN(At))return new Date;const gt=new Date(Ge,Ue-1,At,0,0,0,0);return isNaN(gt.getTime())?new Date:gt},L=fe=>{if(!fe||isNaN(fe.getTime()))return new Date().toISOString().split("T")[0];const se=fe.getFullYear(),Ze=String(fe.getMonth()+1).padStart(2,"0"),Ge=String(fe.getDate()).padStart(2,"0");return`${se}-${Ze}-${Ge}`},H=(fe,se)=>{const Ze=fe.getFullYear(),Ge=fe.getMonth(),Ue=fe.getDate();return new Date(Ze,Ge,Ue+se,0,0,0,0)},le=y.useMemo(()=>{const fe={};return u.forEach(se=>{se.id&&se.name&&(fe[se.id]=se.name)}),fe},[u]),{register:K,handleSubmit:ie,watch:q,reset:G,control:ve,setValue:M,formState:{errors:Y}}=Cd({defaultValues:{productId:e.productId??e.product_id??"",title:e.title,goal:e.goal,startDate:V(e.startDate)?"":e.startDate.split("T")[0],endDate:V(e.endDate)?"":e.endDate.split("T")[0],useAutoVotes:e.useAutoVotes||!1,votesPerUser:e.votesPerUser}});y.useEffect(()=>{const fe=V(e.startDate)?"":e.startDate.split("T")[0],se=V(e.endDate)?"":e.endDate.split("T")[0];G({productId:e.productId??e.product_id??"",title:e.title,goal:e.goal,startDate:fe,endDate:se,useAutoVotes:e.useAutoVotes||!1,votesPerUser:e.votesPerUser}),de.current=fe},[e,G]);const ce=e.productName??e.product_name??l??"",he=e.productId??e.product_id??"";y.useEffect(()=>{if(!u.length)return;if(he){u.some(Ze=>Ze.id===he)&&M("productId",he,{shouldDirty:!1,shouldTouch:!1});return}if(!ce)return;const fe=u.find(se=>se.name.toLowerCase()===ce.toLowerCase());fe&&M("productId",fe.id,{shouldDirty:!1,shouldTouch:!1})},[u,he,ce,M]);const U=q("useAutoVotes"),re=q("productId"),pe=q("startDate"),$e=q("endDate"),de=y.useRef(""),ke=y.useCallback(async fe=>{const se=pe,Ze=$e;if(fe==="startDate"&&!se){let Ge;if(re)try{const gt=(await SS(re)).filter(wt=>wt.id!==e.id);if(gt.length>0){let wt=null;gt.forEach(Yt=>{const z=Yt.end_date||Yt.endDate;if(z&&!V(z)){const W=F(z);(!wt||W>wt)&&(wt=W)}}),wt?Ge=H(wt,1):Ge=new Date}else Ge=new Date}catch(At){console.error("Error calculating dates for product:",At),Ge=new Date}else Ge=new Date;const Ue=H(Ge,14);M("startDate",L(Ge),{shouldDirty:!0}),Ze||M("endDate",L(Ue),{shouldDirty:!0})}else if(fe==="endDate"&&!Ze){let Ge;if(se)Ge=F(se);else{if(re)try{const gt=(await SS(re)).filter(wt=>wt.id!==e.id);if(gt.length>0){let wt=null;gt.forEach(Yt=>{const z=Yt.end_date||Yt.endDate;if(z&&!V(z)){const W=F(z);(!wt||W>wt)&&(wt=W)}}),wt?Ge=H(wt,1):Ge=new Date}else Ge=new Date}catch(At){console.error("Error calculating dates for product:",At),Ge=new Date}else Ge=new Date;M("startDate",L(Ge),{shouldDirty:!0})}const Ue=H(Ge,14);M("endDate",L(Ue),{shouldDirty:!0})}},[pe,$e,re,M]);y.useEffect(()=>{if(pe&&pe!==de.current&&$e){de.current=pe;const fe=F(pe),se=H(fe,14);M("endDate",L(se),{shouldDirty:!0})}},[pe,$e,M]);const Te=y.useMemo(()=>!E||!re?u:u.map(fe=>fe.id===re?{...fe,color_hex:E}:fe),[u,E,re]);y.useEffect(()=>{if(!re)return;u.some(se=>se.id===re)||M("productId","",{shouldDirty:!0,shouldTouch:!0})},[re,u,M]),y.useEffect(()=>{if(re&&u.length>0){const fe=u.find(se=>se.id===re);if(fe){const se=fe.color_hex??null;x(se),N(se||"#2D4660"),C(null),S(!1)}}else re||(x(null),N("#2D4660"),C(null),S(!1))},[re,u]);const Ve=U?Math.max(1,Math.floor(t/2)):q("votesPerUser"),J=async(fe,se=!1)=>{try{r({...fe,isDraft:se})}catch(Ze){throw console.error("ERROR in handleFormSubmit:",Ze),Ze}},je=async()=>{const fe=q();await J(fe,!0)};return a.jsxs("form",{onSubmit:ie(fe=>J(fe),fe=>{}),children:[a.jsxs("div",{className:"mb-4",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Product"}),a.jsx("div",{className:"flex items-center gap-2",children:(()=>{const fe=Te.find(gt=>gt.id===re)??null,se=re?le[re]??null:null,Ze=(fe==null?void 0:fe.name)??se??ce??"No Product",Ge=(fe==null?void 0:fe.color_hex)||null,Ue=fe?on(fe.name,Ge??null):null,At=(Ue==null?void 0:Ue.background)||null;return a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"w-4 h-4 rounded-sm flex-shrink-0",style:{backgroundColor:At||"#2D4660"}}),a.jsx("span",{className:"text-gray-900",children:Ze})]})})()})]}),a.jsxs("div",{className:"mb-4",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Session Title"}),a.jsx("input",{...K("title",{required:"Title is required"}),className:"w-full px-3 py-2 border border-gray-300 rounded-md"}),Y.title&&a.jsx("p",{className:"mt-1 text-sm text-red-600",children:Y.title.message})]}),a.jsxs("div",{className:"mb-4",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Goal"}),a.jsx("textarea",{...K("goal",{required:"Goal is required"}),rows:2,className:"w-full px-3 py-2 border border-gray-300 rounded-md"}),Y.goal&&a.jsx("p",{className:"mt-1 text-sm text-red-600",children:Y.goal.message})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Start Date"}),a.jsx("input",{type:"date",...K("startDate",{required:!V(e.startDate)&&!V(e.endDate)?"Start date is required":!1}),value:q("startDate")||"",onFocus:fe=>{q("startDate")||ke("startDate")},autoComplete:"off",className:`w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-0 focus:border-[#2d4660] [&::-webkit-calendar-picker-indicator]:cursor-pointer ${Y.startDate?"border-red-500":"border-gray-300"}`,style:q("startDate")?{}:{color:"transparent"},onBlur:fe=>{fe.target.value?fe.target.style.color="":fe.target.style.color="transparent"}}),Y.startDate&&a.jsx("p",{className:"mt-1 text-sm text-red-600",children:Y.startDate.message})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"End Date"}),a.jsx("input",{type:"date",...K("endDate",{required:!V(e.startDate)&&!V(e.endDate)?"End date is required":!1}),value:q("endDate")||"",onFocus:fe=>{q("endDate")||ke("endDate")},autoComplete:"off",className:`w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-0 focus:border-[#2d4660] [&::-webkit-calendar-picker-indicator]:cursor-pointer ${Y.endDate?"border-red-500":"border-gray-300"}`,style:q("endDate")?{}:{color:"transparent",position:"relative"},onBlur:fe=>{fe.target.value?fe.target.style.color="":fe.target.style.color="transparent"}}),Y.endDate&&a.jsx("p",{className:"mt-1 text-sm text-red-600",children:Y.endDate.message})]})]}),a.jsxs("div",{className:"mb-4 bg-[#1E5461]/5 border border-[#1E5461]/20 rounded-lg p-4",children:[a.jsxs("div",{className:"flex items-start",children:[a.jsx("input",{type:"checkbox",...K("useAutoVotes"),className:"hidden"}),a.jsx("button",{type:"button",onClick:()=>M("useAutoVotes",!U,{shouldDirty:!0}),className:"flex-shrink-0 cursor-pointer mt-0.5 w-5 h-5 flex items-center justify-center",children:U?a.jsx($l,{className:"w-5 h-5 text-green-600"}):a.jsx(Nd,{className:"w-5 h-5 text-gray-400"})}),a.jsxs("div",{className:"ml-3",children:[a.jsx("label",{onClick:()=>M("useAutoVotes",!U,{shouldDirty:!0}),className:"text-sm font-medium text-gray-700 cursor-pointer",children:"Automatically calculate votes per user"}),a.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:["Each user gets half the number of features (minimum 1 vote). Currently: ",Ve," votes"]})]})]}),!U&&a.jsxs("div",{className:"mt-3",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Votes Per User"}),a.jsx("input",{type:"number",min:"1",...K("votesPerUser",{required:U?!1:"Votes per user is required",min:{value:1,message:"Must be at least 1"}}),className:"w-full px-3 py-2 border border-gray-300 rounded-md"}),Y.votesPerUser&&a.jsx("p",{className:"mt-1 text-sm text-red-600",children:Y.votesPerUser.message})]})]}),a.jsxs("div",{className:"mt-6 flex flex-col gap-3 border-t border-gray-200 pt-4 sm:flex-row sm:items-center sm:justify-between",children:[a.jsxs(jt,{variant:"danger",type:"button",onClick:()=>s(),disabled:i,className:"flex items-center gap-2",children:[a.jsx(to,{className:"h-4 w-4"}),i?"Deleting...":"Delete Session"]}),a.jsxs("div",{className:"flex w-full justify-end gap-2 sm:w-auto",children:[a.jsx(jt,{variant:"secondary",type:"button",onClick:je,children:"Save Draft"}),a.jsx(jt,{variant:"primary",type:"button",onClick:async fe=>{fe.preventDefault(),fe.stopPropagation(),q(),await ie(se=>J(se,!1),se=>{alert("Please fix form errors: "+JSON.stringify(se))})()},children:"Save Changes"})]})]}),b&&re&&(()=>{const fe=Te.find(se=>se.id===re);return fe?a.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",onClick:()=>{S(!1),x(fe.color_hex??null),N(fe.color_hex??"#2D4660"),C(null)},children:a.jsx("div",{className:"bg-white rounded-lg shadow-xl px-3 py-2 w-auto mx-4",onClick:se=>se.stopPropagation(),children:a.jsxs("div",{className:"flex gap-3 items-stretch",children:[a.jsxs("div",{className:"flex-shrink-0",style:{width:"240px",height:"260px"},children:[a.jsx("input",{id:"native-color-input",type:"color",value:j,onChange:se=>{N(se.target.value),x(se.target.value)},ref:se=>{se&&b&&setTimeout(()=>se.click(),50)},className:"opacity-0 absolute",style:{width:"1px",height:"1px"}}),a.jsx("div",{className:"w-full h-full"})]}),a.jsx("button",{type:"button",onClick:()=>{if(!re||!j)return;const se=Te.find(Ge=>Ge.id===re);if(!se)return;if((se.color_hex||null)===j){S(!1);return}C(j),x(j),S(!1)},disabled:I,className:"px-6 rounded-lg text-white font-bold shadow-lg hover:shadow-xl transition-all flex flex-col items-center justify-center gap-3 text-lg flex-shrink-0 disabled:opacity-50 disabled:cursor-not-allowed",style:{backgroundColor:j,height:"260px",minWidth:"100px"},children:I?a.jsx(Ko,{className:"h-8 w-8 animate-spin"}):a.jsxs(a.Fragment,{children:[a.jsx(Mr,{className:"h-8 w-8"}),a.jsxs("div",{className:"text-center leading-tight",children:[a.jsx("div",{children:"Looks"}),a.jsx("div",{children:"Good"})]})]})})]})})}):null})()]})}function OZ({features:e,onAddFeature:t,onUpdateFeature:r,onDeleteFeature:n,onShowResults:s,onRequestDeleteSession:i,isDeletingSession:l,showAddForm:u,setShowAddForm:d,editingFeature:m,setEditingFeature:f,onLogout:p,onShowVoterView:v,votingSession:x,azureDevOpsConfig:b,onUpdateAzureDevOpsConfig:S,onPreviewAzureDevOpsFeatures:j,onDisconnectAzureDevOps:N,isFetchingAzureDevOps:E,azureFetchError:C,onInitiateOAuth:I,availableStates:T,availableAreaPaths:O,availableTags:V,previewFeatures:F,showPreviewModal:L,setShowPreviewModal:H,onConfirmSync:le,onReplaceAll:K,onUpdateVotingSession:ie,onFetchStatesForType:q,onFetchAreaPathsForTypeAndState:G,onFetchTagsForTypeStateAndAreaPath:ve,onFetchTypesAndStatesForAreaPath:M,onFetchTypesAndStatesForTags:Y,onFetchTypesAndAreaPathsForStates:ce,suggestedFeatures:he,otherSessions:U,onPromoteSuggestion:re,onMoveSuggestion:pe,onEditSuggestion:$e,onDeleteSuggestion:de,adminPerspective:ke="session",projectOptions:Te}){const Ve=da(),{currentUser:J,currentSession:je,setCurrentSession:fe}=ql(),[se,Ze]=y.useState(()=>b.project?[b.project]:Te[0]?[Te[0]]:[]),[Ge,Ue]=y.useState(0);y.useEffect(()=>{b.project?Ze([b.project]):Te.length>0?Ze([Te[0]]):Ze([])},[b.project,Te]);const[At,gt]=y.useState(!1),[wt,Yt]=y.useState(!1),[z,W]=y.useState(!1),[ee,Se]=y.useState(!1),Ne=y.useRef(null),[Ee,qe]=y.useState(!1),[Fe,Mt]=y.useState(!1),[We,yt]=y.useState(!1),kt=ke==="system"&&Fe,ze=ke==="session"||ke==="system"&&!Fe&&We,[Le,ct]=y.useState(0),[at,Je]=y.useState(0),Ct=y.useRef(null),[Wt,rr]=y.useState(null),[sr,rt]=y.useState(!1),[Ht,Ft]=y.useState(null),[vt,ir]=y.useState(null),[yr,hr]=y.useState(""),[Fr,Jt]=y.useState(null),[mr,rs]=y.useState(!1),[nr,bn]=y.useState(null),[Qt,pr]=y.useState({title:"",summary:"",whatWouldItDo:"",howWouldItWork:""}),[ln,lr]=y.useState([]),[In,Hr]=y.useState(null),[Lr,vr]=y.useState(!1),[hn,ns]=y.useState(null),[jn,ss]=y.useState(!1),[_s,Dn]=y.useState(null),[$s,Cr]=y.useState(!1),[Kr,Kt]=y.useState([]),[Er,_r]=y.useState(!1),[Sn,en]=y.useState([]),[ps,Xs]=y.useState(!1),[X,be]=y.useState(null),[Pe,Oe]=y.useState(null),[Xe,Ie]=y.useState(null),[Lt,Dt]=y.useState(""),[zt,_e]=y.useState(null),[He,Zt]=y.useState(!1),[Gr,dt]=y.useState(!1),[gr,Xt]=y.useState("#2D4660"),[xr,cr]=y.useState(!1),[Fi,Ut]=y.useState(!1),ha=y.useMemo(()=>{const w={};return Sn.forEach(D=>{D.id&&D.name&&(w[D.id]=D.name)}),w},[Sn]),Qs=y.useMemo(()=>{const w={};return Sn.forEach(D=>{D.id&&D.color_hex&&(w[D.id]=D.color_hex)}),w},[Sn]),Ns=y.useMemo(()=>kr({...x,product_id:x.product_id??(je==null?void 0:je.product_id)??x.productId??null,product_name:null},ha),[x,je,ha]),is=y.useMemo(()=>{const w=x.product_id??x.productId??null;return w?Qs[w]??null:null},[x,Qs]),Li=y.useMemo(()=>on(Ns,is),[Ns,is]),zi=y.useRef(null);y.useEffect(()=>{(async()=>{if(!J)return;const D=await Aa(J.id);Mt(D);const{data:Z}=await Ce.from("session_admins").select("session_id").eq("user_id",J.id).limit(1);yt(Z&&Z.length>0)})()},[J]);const tn=y.useCallback(async()=>{const w=(je==null?void 0:je.id)||(x==null?void 0:x.id);if(!w){ct(0),Je(0);return}try{const[D,Z]=await Promise.all([Wm(w).catch(ae=>(console.error("[AdminDashboard] Error loading admins:",ae),[])),wv(w).catch(ae=>(console.error("[AdminDashboard] Error loading stakeholders:",ae),[]))]);ct(D.length),Je(Z.length)}catch(D){console.error("[AdminDashboard] Error loading admin/stakeholder counts:",D),ct(0),Je(0)}},[je==null?void 0:je.id,x]);y.useEffect(()=>{tn()},[tn]),y.useEffect(()=>{const w=()=>{tn()};return window.addEventListener("focus",w),()=>window.removeEventListener("focus",w)},[tn]),y.useEffect(()=>{const w=(J==null?void 0:J.tenant_id)??(J==null?void 0:J.tenantId)??null;if(!w){zi.current=null,en([]),be(null);return}if(zi.current===w)return;let D=!1;return(async()=>{Xs(!0),be(null);try{const ae=await Bo(w);if(D)return;en(ae),zi.current=w}catch(ae){if(D)return;console.error("Error loading products for admin dashboard:",ae),Bc!=null&&Bc(ae)?be("Products are not configured yet. Please create the `products` table in Supabase."):be("Unable to load products. Please try again."),en([]),zi.current=null}finally{D||Xs(!1)}})(),()=>{D=!0}},[J==null?void 0:J.tenant_id,J==null?void 0:J.tenantId]);const as=y.useCallback(async()=>{if(Pe){cr(!0);try{await kE(Pe.id),en(w=>w.filter(D=>D.id!==Pe.id)),Oe(null)}catch(w){console.error("Error deleting product from admin dashboard:",w),be("Failed to delete product. Please try again.")}finally{cr(!1)}}},[Pe]),Yr=y.useCallback(w=>{const D=w.filter(Z=>Z==null?void 0:Z.trim()).map(Z=>Z.trim());if(Ze(D),D.length>0&&D[0]!==(b.project||"")){const Z={...b,project:D[0]};S(Z)}Ue(Z=>Z+1)},[b,S]),{register:gs,handleSubmit:ys,reset:jr}=Cd({defaultValues:{reason:"",details:""}}),{control:Zs,handleSubmit:Ar,reset:ei,register:os,formState:{errors:vi}}=Cd({defaultValues:{reason:"",details:""}}),ti="2099-12-31",ma=w=>w?w.split("T")[0]===ti:!1,xi=w=>{if(!w.is_active){const D=!w.title||w.title==="Untitled Session"||w.title.trim()==="",Z=!w.goal||w.goal.trim()==="";return D||Z}return!1},Ui=(w=>{if(xi(w))return{text:"Draft",color:"text-yellow-900 bg-yellow-200",icon:Vh};const D=new Date,Z=w.startDate||w.start_date,ae=w.endDate||w.end_date,A=new Date(Z),$=new Date(ae);return D<A?{text:"Upcoming",color:"text-yellow-600 bg-yellow-50",icon:Vx}:D>$?{text:"Closed",color:"text-gray-600 bg-gray-100",icon:an}:{text:"Active",color:"text-[#1E6154] bg-[#1E6154]/10",icon:Mr}})(x),Bi=Ui.icon,wi=a.jsxs("span",{className:`inline-flex items-center ${Ui.text==="Active"?"px-3 py-1 text-sm":"px-2 py-0.5 text-xs"} rounded-full font-medium ${Ui.color}`,children:[a.jsx(Bi,{className:`${Ui.text==="Active"?"h-4 w-4":"h-3 w-3"} mr-1`}),Ui.text]}),Pr=y.useMemo(()=>{const w=Z=>{const ae=Z.type==="reopen",A=Z.createdAt||null,$=Z.actorName||"Admin",R=A?` ${ea(A)}`:"";return{id:Z.id,type:Z.type,reason:Z.reason,details:Z.details??null,title:ae?`Reopened${R} by ${$}`:`Ended early${R} by ${$}`,description:`${Z.reason}${Z.details?": "+Z.details:""}`,iconBgClass:ae?"bg-[#1E5461]/10":"bg-[#C89212]/10",iconBorderClass:ae?"border-[#1E5461]/20":"border-[#C89212]/20",iconColorClass:ae?"text-[#1E5461]":"text-[#C89212]",textColorClass:ae?"text-[#1E5461]":"text-[#6A4234]"}};if(Kr.length>0)return Kr.map(Z=>w(Z));const D=[];return x.reopenReason&&D.push({id:"fallback-reopen",sessionId:(je==null?void 0:je.id)||"",type:"reopen",reason:x.reopenReason,details:x.reopenDetails??null,actorName:x.reopenedBy||"Admin",actorId:null,createdAt:x.reopenedAt||x.endDate}),x.endedEarlyReason&&D.push({id:"fallback-ended-early",sessionId:(je==null?void 0:je.id)||"",type:"ended-early",reason:x.endedEarlyReason,details:x.endedEarlyDetails??null,actorName:x.endedEarlyBy||"Admin",actorId:null,createdAt:x.originalEndDate||x.endDate}),D.map(Z=>w(Z))},[Kr,x.reopenReason,x.reopenDetails,x.reopenedAt,x.reopenedBy,x.endedEarlyReason,x.endedEarlyDetails,x.originalEndDate,x.endDate,x.endedEarlyBy,je==null?void 0:je.id]);y.useEffect(()=>{Pr.length<=2&&_r(!1)},[Pr.length]);const bi=y.useCallback(async()=>{if(!(je!=null&&je.id)){Kt([]);return}try{const w=await k6(je.id);Kt(w)}catch(w){console.error("Error loading session status notes:",w)}},[je==null?void 0:je.id]);y.useEffect(()=>{bi()},[bi]);const xo=y.useCallback(w=>{w.stopPropagation(),je&&fe(je),Ve(`/users?filter=session-admin&perspective=${ke}`)},[je,fe,Ve,ke]),wo=y.useCallback(w=>{w.stopPropagation(),je&&fe(je),Ve(`/users?filter=stakeholder&perspective=${ke}`)},[je,fe,Ve,ke]),pa=y.useCallback(async w=>{if(je!=null&&je.id)try{const D=await _6({session_id:je.id,type:w.type,reason:w.reason,details:w.details??null,actor_id:w.actorId??null,actor_name:w.actorName||"Admin"});Kt(Z=>{const ae=Z.findIndex(A=>A.id===D.id);if(ae!==-1){const A=[...Z];return A[ae]=D,A}return[D,...Z]})}catch(D){console.error("Error logging session status note:",D)}},[je==null?void 0:je.id]);y.useEffect(()=>{nr&&(pr({title:nr.title,summary:nr.summary??"",whatWouldItDo:nr.whatWouldItDo??"",howWouldItWork:nr.howWouldItWork??""}),lr(nr.attachment_urls?[...nr.attachment_urls]:[]),Hr(null))},[nr]),y.useEffect(()=>{vt&&U.length>0?hr(U[0].id):hr(""),Jt(null)},[vt,U]);const ga=w=>{const D=w.isDraft||!1,Z="2099-12-31",ae=w.startDate&&w.startDate.trim()?w.startDate:Z,A=w.endDate&&w.endDate.trim()?w.endDate:Z,$=w.productId&&w.productId.trim()!==""?w.productId:null,R=$&&Sn.find(ge=>ge.id===$)||null,ne={...x,title:w.title.trim()||"Untitled Session",goal:w.goal.trim()||"",votesPerUser:w.useAutoVotes?Math.max(1,Math.floor(e.length/2)):Number(w.votesPerUser),useAutoVotes:w.useAutoVotes,startDate:new Date(ae).toISOString(),endDate:new Date(A+"T23:59:59").toISOString(),isActive:D?!1:x.isActive,product_id:(R==null?void 0:R.id)??null,product_name:null};ie(ne),gt(!1)},Wi=w=>{var ae,A;const D=new Date().toISOString(),Z={...x,originalEndDate:x.endDate,endDate:D,isActive:!1,endedEarlyBy:(J==null?void 0:J.name)||"Admin",endedEarlyReason:w.reason,endedEarlyDetails:(ae=w.details)!=null&&ae.trim()?w.details.trim():null,reopenReason:null,reopenDetails:null,reopenedBy:null,reopenedAt:null};ie(Z),pa({type:"ended-early",reason:w.reason,details:(A=w.details)!=null&&A.trim()?w.details.trim():null,actorName:(J==null?void 0:J.name)||"Admin",actorId:(J==null?void 0:J.id)??null}),Yt(!1),jr()},cn=w=>{var ae,A;const D=new Date;D.setDate(D.getDate()+7);const Z={...x,endDate:D.toISOString(),isActive:!0,originalEndDate:null,endedEarlyBy:null,endedEarlyReason:null,endedEarlyDetails:null,reopenReason:w.reason,reopenDetails:(ae=w.details)!=null&&ae.trim()?w.details.trim():null,reopenedBy:(J==null?void 0:J.name)||"Admin",reopenedAt:new Date().toISOString()};ie(Z),pa({type:"reopen",reason:w.reason,details:(A=w.details)!=null&&A.trim()?w.details.trim():null,actorName:(J==null?void 0:J.name)||"Admin",actorId:(J==null?void 0:J.id)??null}),W(!1),ei()},Jr=async(w,D)=>{const Z={...b,organization:w,project:D};S(Z),I()},kn=w=>{bn(w)},Hn=async()=>{if(!nr)return;const w=Qt.title.trim();if(!w){Hr("Title is required.");return}vr(!0),Hr(null);try{await $e(nr.id,{title:w,summary:Qt.summary.trim()?Qt.summary.trim():null,whatWouldItDo:Qt.whatWouldItDo.trim()?Qt.whatWouldItDo.trim():null,howWouldItWork:Qt.howWouldItWork.trim()?Qt.howWouldItWork.trim():null,attachment_urls:ln.length>0?ln:null}),bn(null),lr([])}catch(D){console.error("Error updating suggestion:",D),Hr("Failed to update the suggestion. Please try again.")}finally{vr(!1)}},Vi=async()=>{if(vt){if(!yr){Jt("Please select a session.");return}try{if(!await Lx(yr)){Jt("The selected session no longer exists. Please refresh and try again.");return}}catch{Jt("The selected session no longer exists. Please refresh and try again.");return}rs(!0),Jt(null);try{await pe(vt.id,yr),ir(null)}catch(w){console.error("Error moving suggestion:",w),Jt("Failed to move the suggestion. Please try again.")}finally{rs(!1)}}},Rs=async()=>{if(Wt){rt(!0),Ft(null);try{await re(Wt.id),rr(null)}catch(w){console.error("Error promoting suggestion:",w),Ft("Failed to move the suggestion into the current session.")}finally{rt(!1)}}},ls=async()=>{if(hn){ss(!0),Dn(null);try{await de(hn.id),ns(null)}catch(w){console.error("Error deleting suggestion:",w),Dn("Failed to delete the suggestion. Please try again.")}finally{ss(!1)}}},qi=y.useCallback(()=>{gt(!1),i()},[i]);return y.useEffect(()=>{if(!ee)return;const w=D=>{Ne.current&&!Ne.current.contains(D.target)&&Se(!1)};return document.addEventListener("mousedown",w),document.addEventListener("touchstart",w,{passive:!0}),()=>{document.removeEventListener("mousedown",w),document.removeEventListener("touchstart",w)}},[ee]),y.useEffect(()=>{if(!Ee)return;const w=D=>{Ct.current&&!Ct.current.contains(D.target)&&qe(!1)};return document.addEventListener("mousedown",w),document.addEventListener("touchstart",w,{passive:!0}),()=>{document.removeEventListener("mousedown",w),document.removeEventListener("touchstart",w)}},[Ee]),a.jsxs("div",{className:"container mx-auto p-4 max-w-6xl min-h-screen pb-8",children:[a.jsx("div",{className:"hidden md:flex md:justify-center mb-2",children:a.jsx("img",{src:$a,alt:"New Millennium Building Systems Logo",className:"-mt-4 cursor-pointer hover:opacity-80 transition-opacity",style:{height:"96px",width:"auto"},onClick:()=>Ve("/sessions")})}),a.jsxs("div",{className:"flex justify-between items-center mb-6",children:[a.jsxs("div",{className:"flex items-center",children:[a.jsx(Ip,{src:Jl,alt:"New Millennium Building Systems Logo",className:"mr-4 md:hidden",style:{width:"40px",height:"40px",objectFit:"contain"}}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("h1",{className:"text-2xl font-bold text-[#2D4660] md:text-3xl",children:"Admin Dashboard"}),J&&a.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:["Welcome, ",J.name,(()=>{const w=Fe?"system-admin":We?"session-admin":"stakeholder",D=w==="system-admin"?a.jsxs("span",{className:"inline-flex items-baseline text-[#C89212]",children:[a.jsx("span",{className:"inline-flex items-center",children:a.jsx(Br,{className:"h-3.5 w-3.5"})}),a.jsx("span",{className:"ml-1 text-sm",children:"System Admin"})]}):w==="session-admin"?a.jsxs("span",{className:"inline-flex items-baseline text-[#576C71]",children:[a.jsx("span",{className:"inline-flex items-center",children:a.jsx(Rr,{className:"h-3.5 w-3.5"})}),a.jsx("span",{className:"ml-1 text-sm",children:"Session Admin"})]}):a.jsxs("span",{className:"inline-flex items-baseline text-[#8B5A4A]",children:[a.jsx("span",{className:"inline-flex items-center",children:a.jsx(gn,{className:"h-3.5 w-3.5"})}),a.jsx("span",{className:"ml-1 text-sm",children:"Stakeholder"})]}),Z=kt?"system-admin":ze?"session-admin":"stakeholder";if(Z===w)return a.jsxs("span",{className:"text-sm text-gray-600",children:[", ",D]});const ae=Z==="system-admin"?a.jsxs("span",{className:"inline-flex items-baseline text-[#C89212]",children:[a.jsx("span",{className:"inline-flex items-center",children:a.jsx(Br,{className:"h-3.5 w-3.5"})}),a.jsx("span",{className:"ml-1 text-sm",children:"System Admin"})]}):Z==="session-admin"?a.jsxs("span",{className:"inline-flex items-baseline text-[#576C71]",children:[a.jsx("span",{className:"inline-flex items-center",children:a.jsx(Rr,{className:"h-3.5 w-3.5"})}),a.jsx("span",{className:"ml-1 text-sm",children:"Session Admin"})]}):a.jsxs("span",{className:"inline-flex items-baseline text-[#8B5A4A]",children:[a.jsx("span",{className:"inline-flex items-center",children:a.jsx(gn,{className:"h-3.5 w-3.5"})}),a.jsx("span",{className:"ml-1 text-sm",children:"Stakeholder"})]});return a.jsxs("span",{className:"text-sm text-gray-600",children:[", ",D,a.jsx("span",{className:"md:inline hidden",children:", "}),a.jsxs("span",{className:"whitespace-nowrap md:inline inline-block",children:[a.jsx("span",{className:"md:hidden",children:", "}),"viewing this page as a ",ae]})]})})()]})]})]}),a.jsxs("div",{ref:Ne,className:"relative z-40",children:[a.jsxs("div",{className:"hidden md:flex space-x-2",children:[x.isActive&&a.jsxs("button",{onClick:v,className:"flex items-center px-4 py-2 bg-[#576C71] text-white rounded-lg hover:bg-[#1E5461] transition-colors",children:[a.jsx(Ln,{className:"mr-2 h-[26px] w-[26px]"}),"Vote!"]}),a.jsxs("button",{onClick:()=>Ve(kt||ze?`/users?perspective=${ke}`:"/users?filter=stakeholder"),className:"flex items-center px-4 py-2 bg-[#2D4660] text-white rounded-lg hover:bg-[#173B65] transition-colors",children:[kt||ze?a.jsx(Rr,{className:"mr-2 h-4 w-4"}):a.jsx(Qn,{className:"mr-2 h-4 w-4"}),kt||ze?"User Management":"Stakeholders"]}),a.jsxs("button",{onClick:()=>Ve("/sessions"),className:"flex items-center px-4 py-2 bg-[#4f6d8e] text-white rounded-lg hover:bg-[#3d5670] transition-colors",children:[a.jsx(Qn,{className:"mr-2 h-4 w-4"}),"All Sessions"]}),a.jsx("button",{onClick:p,className:"flex items-center justify-center p-2 w-10 h-10 bg-[#576C71] text-white rounded-lg hover:bg-[#1E5461] transition-colors",title:"Logout",children:a.jsx(pi,{className:"h-4 w-4"})})]}),a.jsx("div",{className:"flex md:hidden",children:a.jsx("button",{onClick:()=>Se(!ee),className:"p-2 rounded-md border border-gray-200 bg-white shadow-sm","aria-label":"Open menu",children:a.jsx(ta,{className:"h-5 w-5 text-gray-700"})})}),ee&&a.jsx("div",{className:"absolute right-0 mt-2 w-56 bg-white border border-gray-200 rounded-lg shadow-lg md:hidden z-50",children:a.jsxs("div",{className:"py-1",children:[x.isActive&&a.jsxs("button",{onClick:()=>{Se(!1),v()},className:"w-full px-3 py-2 flex items-center text-left hover:bg-gray-50",children:[a.jsx(Ln,{className:"h-[26px] w-[26px] mr-2 text-gray-700"}),"Vote!"]}),a.jsxs("button",{onClick:()=>{Se(!1),Ve(kt||ze?`/users?perspective=${ke}`:"/users?filter=stakeholder")},className:"w-full px-3 py-2 flex items-center text-left hover:bg-gray-50",children:[kt||ze?a.jsx(Rr,{className:"h-4 w-4 mr-2 text-gray-700"}):a.jsx(Qn,{className:"h-4 w-4 mr-2 text-gray-700"}),kt||ze?"User Management":"Stakeholders"]}),a.jsxs("button",{onClick:()=>{Se(!1),Ve("/sessions")},className:"w-full px-3 py-2 flex items-center text-left hover:bg-gray-50",children:[a.jsx(Qn,{className:"h-4 w-4 mr-2 text-gray-700"}),"All Sessions"]}),!(x.isActive===!1&&!_a(x.endDate))&&a.jsxs("button",{onClick:()=>{Se(!1),s()},className:"w-full px-3 py-2 flex items-center text-left hover:bg-gray-50",children:[a.jsx(Ch,{className:"h-4 w-4 mr-2 text-gray-700"}),_a(x.endDate)?"Final Results":"Current Results"]}),a.jsxs("button",{onClick:()=>{Se(!1),gt(!0)},className:"w-full px-3 py-2 flex items-center text-left hover:bg-gray-50",children:[a.jsx(Ks,{className:"h-4 w-4 mr-2 text-gray-700"}),"Edit Session"]}),a.jsx("button",{onClick:()=>{Se(!1),p()},className:"w-full px-3 py-2 flex items-center justify-center hover:bg-gray-50",title:"Logout",children:a.jsx(pi,{className:"h-4 w-4 text-gray-700"})})]})})]})]}),a.jsxs("div",{className:"relative bg-white rounded-lg shadow-md p-4 mb-6",style:{marginTop:Ns?"3.5rem":"0"},children:[Ns&&a.jsxs("div",{className:"absolute left-0 px-4 py-1 pr-8 rounded-t-md border-b-0 text-sm font-semibold shadow-sm z-20 flex items-center gap-2 whitespace-nowrap group cursor-pointer",style:{top:"0",left:"-1px",transform:"translateY(-100%)",backgroundColor:Li.background,color:Li.text,borderColor:Li.border,borderWidth:"1px",borderBottomWidth:"0",boxShadow:"0 4px 8px rgba(16,24,40,0.06)",borderTopLeftRadius:"0.9rem",borderTopRightRadius:"0.9rem",overflow:"visible"},onMouseEnter:()=>{(x.product_id||x.productId)&&Ut(!0)},onMouseLeave:()=>Ut(!1),onClick:w=>{const D=x.product_id||x.productId;if(!D)return;w.stopPropagation(),w.preventDefault();const Z=Sn.find(ae=>ae.id===D);Z&&(Ie(Z),Dt(Z.name||""),_e(Z.color_hex||null),Xt(Z.color_hex||"#2D4660"))},children:[a.jsx(Ev,{className:"h-4 w-4 flex-shrink-0"}),a.jsx("span",{className:"overflow-hidden text-ellipsis flex-1 min-w-0",children:Ns}),(x.product_id||x.productId)&&Fi&&a.jsx("div",{className:"absolute right-2 flex-shrink-0 opacity-80",children:a.jsx(Vh,{className:"h-4 w-4",style:{color:Li.text}})})]}),a.jsxs("div",{className:"pt-1",children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsxs("h2",{className:"text-xl font-semibold text-[#2D4660]",children:["Current Session: ",a.jsx("span",{className:"text-[#1E5461]",children:x.title})]}),a.jsxs("div",{ref:Ct,className:"relative z-40",children:[a.jsxs("div",{className:"hidden md:flex space-x-2",children:[a.jsxs("button",{onClick:xo,className:"relative inline-flex items-center px-4 py-2 rounded-lg text-sm font-medium transition-colors bg-[#576C71] text-white hover:bg-[#1E5461]",children:[a.jsx(Rr,{className:"h-4 w-4 mr-2"}),"Admins",a.jsx("span",{className:"absolute -top-1 -right-1 bg-red-500 text-white text-[10px] font-bold rounded-full min-w-[18px] h-[18px] flex items-center justify-center px-1 z-10",children:Le})]}),a.jsxs("button",{onClick:wo,className:"relative inline-flex items-center px-4 py-2 rounded-lg text-sm font-medium transition-colors bg-[#1E5461] text-white hover:bg-[#576C71]",children:[a.jsx(Qn,{className:"h-4 w-4 mr-2"}),"Stakeholders",a.jsx("span",{className:"absolute -top-1 -right-1 bg-red-500 text-white text-[10px] font-bold rounded-full min-w-[18px] h-[18px] flex items-center justify-center px-1 z-10",children:at})]}),!(x.isActive===!1&&!_a(x.endDate))&&a.jsxs(jt,{variant:"gold",onClick:s,className:"flex items-center",children:[a.jsx(Ch,{className:"h-4 w-4 mr-2"}),_a(x.endDate)?"Final Results":"Current Results"]}),a.jsxs(jt,{variant:"primary",onClick:()=>gt(!0),className:"flex items-center",children:[a.jsx(Ks,{className:"h-4 w-4 mr-2"}),"Edit Session"]})]}),a.jsx("div",{className:"flex md:hidden",children:a.jsx("button",{onClick:()=>qe(!Ee),className:"p-2 rounded-md border border-gray-200 bg-white shadow-sm","aria-label":"Open session actions menu",children:a.jsx(ta,{className:"h-5 w-5 text-gray-700"})})}),Ee&&a.jsx("div",{className:"absolute right-0 mt-2 w-56 bg-white border border-gray-200 rounded-lg shadow-lg md:hidden z-50",children:a.jsxs("div",{className:"py-1",children:[a.jsxs("button",{onClick:w=>{qe(!1),xo(w)},className:"relative w-full px-3 py-2 flex items-center text-left hover:bg-gray-50",children:[a.jsx(Rr,{className:"h-4 w-4 mr-2 text-gray-700"}),"Admins",a.jsx("span",{className:"absolute right-3 top-1/2 -translate-y-1/2 bg-red-500 text-white text-[10px] font-bold rounded-full min-w-[18px] h-[18px] flex items-center justify-center px-1 z-10",children:Le})]}),a.jsxs("button",{onClick:w=>{qe(!1),wo(w)},className:"relative w-full px-3 py-2 flex items-center text-left hover:bg-gray-50",children:[a.jsx(Qn,{className:"h-4 w-4 mr-2 text-gray-700"}),"Stakeholders",a.jsx("span",{className:"absolute right-3 top-1/2 -translate-y-1/2 bg-red-500 text-white text-[10px] font-bold rounded-full min-w-[18px] h-[18px] flex items-center justify-center px-1 z-10",children:at})]}),!(x.isActive===!1&&!_a(x.endDate))&&a.jsxs("button",{onClick:()=>{qe(!1),s()},className:"w-full px-3 py-2 flex items-center text-left hover:bg-gray-50",children:[a.jsx(Ch,{className:"h-4 w-4 mr-2 text-gray-700"}),_a(x.endDate)?"Final Results":"Current Results"]}),a.jsxs("button",{onClick:()=>{qe(!1),gt(!0)},className:"w-full px-3 py-2 flex items-center text-left hover:bg-gray-50",children:[a.jsx(Ks,{className:"h-4 w-4 mr-2 text-gray-700"}),"Edit Session"]})]})})]})]}),ps&&a.jsx("p",{className:"text-xs text-gray-500 mb-4",children:"Loading products"}),X&&a.jsx("p",{className:"text-xs text-[#591D0F] mb-4",children:X}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4",children:[a.jsxs("div",{children:[a.jsx("h3",{className:"text-sm font-medium text-gray-700 mb-1",children:"Voting Period"}),ma(x.startDate)||ma(x.endDate)?a.jsx("p",{className:"text-gray-400 italic",children:"Dates not set"}):a.jsxs("p",{className:`text-[#2D4660] font-medium ${x.originalEndDate?"line-through text-gray-400":""}`,children:[ea(x.startDate)," - ",ea(x.originalEndDate||x.endDate)]}),x.originalEndDate&&x.endedEarlyBy&&a.jsxs("div",{className:"flex items-center mt-1 text-xs text-[#591D0F]",children:[a.jsxs("span",{children:["Ended Early by ",x.endedEarlyBy]}),x.endedEarlyReason&&a.jsxs("div",{className:"group relative ml-1",children:[a.jsx(an,{className:"h-3 w-3 cursor-help"}),a.jsxs("div",{className:"absolute bottom-full left-1/2 -translate-x-1/2 mb-2 px-3 py-2 bg-gray-900 text-white text-xs rounded-lg opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-200 whitespace-nowrap z-10 pointer-events-none max-w-xs",children:[a.jsxs("div",{className:"font-semibold mb-1",children:["Reason: ",x.endedEarlyReason]}),x.endedEarlyDetails&&a.jsx("div",{className:"whitespace-normal",children:x.endedEarlyDetails}),a.jsx("div",{className:"absolute top-full left-1/2 -translate-x-1/2 -mt-1 border-4 border-transparent border-t-gray-900"})]})]})]})]}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-sm font-medium text-gray-700 mb-1",children:"Votes Per User"}),a.jsx("p",{className:"text-[#2D4660] font-medium",children:x.useAutoVotes?`${Math.max(1,Math.floor(e.length/2))} (Auto: ${e.length} features  2)`:x.votesPerUser})]}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-sm font-medium text-gray-700 mb-1",children:"Status"}),a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("div",{className:"flex items-center",children:wi}),(x.isActive||_a(x.endDate))&&a.jsx(jt,{variant:x.isActive?"danger":"primary",onClick:()=>{x.isActive?Yt(!0):(ei(),W(!0))},className:"text-xs px-2 py-1 ml-2",children:x.isActive?"End Early":"Reopen"})]})]})]}),x.goal&&x.goal.trim()||Pr.length>0?a.jsx("div",{className:"pt-3",children:a.jsxs("div",{className:"flex flex-col md:flex-row md:items-start gap-4",children:[x.goal&&x.goal.trim()&&a.jsxs("div",{className:"flex-[2] relative overflow-hidden rounded-2xl border border-[#C89212]/30 bg-gradient-to-r from-[#FFF6E3] via-[#FFF9ED] to-white shadow-sm p-5 md:p-6",children:[a.jsx("span",{className:"pointer-events-none absolute -top-10 left-4 h-32 w-32 rounded-full bg-[#C89212]/25 blur-3xl"}),a.jsx("span",{className:"pointer-events-none absolute -bottom-16 right-6 h-40 w-40 rounded-full bg-[#F4C66C]/20 blur-3xl"}),a.jsx("span",{className:"pointer-events-none absolute top-6 right-10 text-[#F4B400] text-xl animate-ping",children:""}),a.jsx("span",{className:"pointer-events-none absolute bottom-8 left-10 text-[#C89212] text-lg animate-pulse",children:""}),a.jsxs("div",{className:"relative flex items-start gap-5",children:[a.jsxs("div",{className:"relative",children:[a.jsx("div",{className:"h-16 w-16 md:h-20 md:w-20 rounded-full bg-white shadow-lg shadow-[#C89212]/30 border border-[#C89212]/40 flex items-center justify-center text-[#C89212]",children:a.jsx(Xm,{className:"h-8 w-8 md:h-10 md:w-10"})}),a.jsx("span",{className:"pointer-events-none absolute -top-3 -left-2 text-[#C89212] text-base animate-ping",children:""}),a.jsx("span",{className:"pointer-events-none absolute bottom-0 -right-3 text-[#F5D79E] text-xl animate-pulse",children:""})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-xs font-semibold uppercase tracking-[0.2em] text-[#C89212]/80 mb-1",children:"Session Goal"}),a.jsx("h3",{className:"text-lg md:text-xl font-semibold text-[#2D4660] leading-relaxed",children:x.goal})]})]})]}),Pr.length>0&&a.jsxs("div",{className:"flex-[1] rounded-xl border border-white/70 bg-white/80 backdrop-blur-sm shadow-inner p-4",children:[(Pr.length===1||Pr.length>2)&&a.jsxs("div",{className:"flex items-center justify-between mb-3",children:[Pr.length===1&&a.jsx("h3",{className:"text-sm font-semibold text-[#2D4660]",children:"Status Notes"}),Pr.length>2&&a.jsxs("span",{className:"inline-flex items-center justify-between text-xs text-[#1E5461] w-[90px] ml-auto",children:[a.jsx("span",{className:"flex items-center justify-center w-4 h-4 border border-current rounded",children:Er?a.jsx(_l,{className:"h-2.5 w-2.5"}):a.jsx(dn,{className:"h-2.5 w-2.5"})}),a.jsx("button",{type:"button",onClick:()=>_r(w=>!w),className:"ml-1 hover:text-[#173B65] transition-colors text-left flex-1",children:Er?"Show Less":"Show More"})]})]}),a.jsx("div",{className:"space-y-3",children:Pr.slice(0,Er?Pr.length:2).map(w=>{const D=w.type==="reopen"?Ko:an;return a.jsxs("div",{className:`flex items-start gap-3 text-sm ${w.textColorClass}`,children:[a.jsx("div",{className:`mt-0.5 flex items-center justify-center w-8 h-8 ${w.iconBgClass} ${w.iconBorderClass} border rounded-lg`,children:a.jsx(D,{className:`h-3.5 w-3.5 ${w.iconColorClass}`})}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold text-gray-800",children:w.title}),a.jsx("p",{className:"text-xs text-gray-600 leading-relaxed",children:w.description})]})]},w.id)})}),Pr.length>2&&!Er&&a.jsx("p",{className:"text-xs text-gray-500 mt-3",children:'Showing newest notes. Select "Show More" to view all updates.'})]})]})}):null]})]}),a.jsxs("div",{className:"relative bg-white rounded-lg shadow-md p-4 mb-6",children:[a.jsxs("div",{className:"flex items-center justify-between mb-0",children:[a.jsxs("div",{className:"flex items-center pb-[20px]",children:[a.jsx("img",{src:$C,alt:"Azure DevOps logo",className:"h-5 w-5 mr-2"}),a.jsx("h2",{className:"text-xl font-semibold text-[#2D4660]",children:"Azure DevOps Integration"})]}),b.enabled&&a.jsxs("button",{onClick:N,className:"text-sm text-[#591D0F] hover:text-[#6A4234] font-medium flex items-center flex-shrink-0 pr-[10px] mb-[-15px]",children:[a.jsx(Ts,{className:"h-4 w-4 mr-1"}),"Disconnect"]})]}),b.enabled?a.jsxs("div",{className:"space-y-4",children:[a.jsx("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4",children:a.jsxs("div",{className:"flex flex-col",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Mr,{className:"h-5 w-5 text-green-600 flex-shrink-0"}),a.jsx("span",{className:"font-medium text-green-900",children:"Connected to Azure DevOps"}),a.jsx("span",{className:"text-green-500",children:""}),a.jsxs("span",{className:"text-sm text-green-700 whitespace-nowrap",children:[a.jsx("span",{className:"font-medium",children:"Organization:"})," ",b.organization]}),a.jsx("span",{className:"text-green-500",children:""}),a.jsx("span",{className:"text-sm text-green-700 font-medium whitespace-nowrap",children:"Project:"}),a.jsx("div",{className:"min-w-[150px]",children:a.jsx(fd,{options:Te,value:se,onChange:Yr,placeholder:"Select projects..."})})]}),a.jsxs("div",{className:"flex items-start mt-1",children:[b.lastSyncTime&&a.jsxs("div",{className:"text-sm text-green-700 ml-7 mt-[-5px]",children:[a.jsx("span",{className:"font-medium",children:"Last Sync:"})," ",ea(b.lastSyncTime)]}),a.jsx("div",{className:"text-xs text-green-700 ml-[300px]",children:"Switching projects will clear the filters below."})]})]})}),a.jsx(PZ,{config:b,onUpdateConfig:S,onPreview:j,isFetching:E,availableStates:T,availableAreaPaths:O,availableTags:V,previewFeatures:F,showPreviewModal:L,onFetchStatesForType:q,onFetchAreaPathsForTypeAndState:G,onFetchTagsForTypeStateAndAreaPath:ve,onFetchTypesAndStatesForAreaPath:M,onFetchTypesAndStatesForTags:Y,onFetchTypesAndAreaPathsForStates:ce,resetSignal:Ge})]}):a.jsxs("div",{className:"bg-gray-50 rounded-lg p-6 text-center border border-dashed border-gray-300",children:[a.jsx("img",{src:$C,alt:"Azure DevOps logo",className:"h-10 w-10 mx-auto mb-3 opacity-80"}),a.jsx("h3",{className:"text-lg font-medium text-gray-700 mb-2",children:"Not Connected"}),a.jsx("p",{className:"text-gray-600 mb-4",children:"Connect to Azure DevOps to import work items as features for voting."}),a.jsx(jt,{variant:"primary",onClick:()=>Jr("newmill",se[0]||Te[0]||"Product"),className:"inline-flex items-center",disabled:E,children:E?a.jsxs(a.Fragment,{children:[a.jsx(Ko,{className:"h-4 w-4 mr-2 animate-spin"}),"Connecting..."]}):a.jsxs(a.Fragment,{children:[a.jsx(Ks,{className:"h-4 w-4 mr-2"}),"Connect to Azure DevOps"]})}),C&&a.jsx("p",{className:"mt-3 text-sm text-[#591D0F]",children:C})]})]}),a.jsxs("div",{className:"relative bg-white rounded-lg shadow-md p-4 mb-6",children:[a.jsxs("div",{className:"flex flex-wrap justify-between items-center gap-2 mb-4",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"text-xl font-semibold text-[#2D4660]",children:"Suggested Features"}),a.jsx("p",{className:"text-sm text-gray-600",children:"Ideas submitted from the voting experience for future consideration."})]}),a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsxs("span",{className:"inline-flex items-center px-3 py-1 rounded-full bg-[#1E5461]/10 text-[#1E5461] text-sm font-medium",children:[he.length," ",he.length===1?"suggestion":"suggestions"]}),he.length>1&&a.jsx(jt,{variant:"gold",onClick:()=>Cr(!$s),className:"text-xs px-3 py-1 flex items-center gap-1",children:$s?a.jsxs(a.Fragment,{children:[a.jsx(_l,{className:"h-3.5 w-3.5"}),"Show Less"]}):a.jsxs(a.Fragment,{children:[a.jsx(dn,{className:"h-3.5 w-3.5"}),"Show All"]})})]})]}),he.length===0?a.jsx("div",{className:"bg-gray-50 border border-dashed border-gray-200 rounded-lg p-6 text-center text-gray-500 text-sm",children:'No feature suggestions have been submitted yet. Encourage voters to use the "Suggest a Feature" button in the voting experience.'}):a.jsx("div",{className:`space-y-4 pr-1 ${$s?"":"max-h-[360px] overflow-y-auto"}`,children:he.map(w=>{const D=w.requester_name||w.requester_email||"Anonymous";return a.jsx("div",{className:"border border-gray-200 rounded-lg p-4 hover:border-[#1E5461]/40 transition-colors",children:a.jsxs("div",{className:"flex flex-col gap-4",children:[a.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4",children:[a.jsxs("div",{className:"md:flex-1",children:[a.jsx("h3",{className:"text-lg font-semibold text-[#2D4660]",children:w.title}),a.jsxs("p",{className:"text-xs text-gray-500 mt-[14px]",children:["Submitted by ",a.jsx("span",{className:"font-medium text-[#1E5461]",children:D}),w.requester_email&&a.jsxs(a.Fragment,{children:[" ","(",a.jsx("a",{href:`mailto:${w.requester_email}`,className:"text-[#1E5461] hover:underline",children:w.requester_email}),")"]})," on ",ea(w.created_at)]})]}),a.jsxs("div",{className:"flex flex-col items-end gap-2 self-start md:min-w-[360px]",children:[a.jsxs("div",{className:"flex flex-wrap justify-end gap-2",children:[a.jsxs(jt,{variant:"primary",onClick:()=>{Ft(null),rr(w)},className:"text-xs px-3 py-1 flex items-center",children:[a.jsx(KM,{className:"h-3.5 w-3.5 mr-2"}),"Move to Current Session"]}),a.jsxs(jt,{variant:"secondary",onClick:()=>{U.length>0&&ir(w)},disabled:U.length===0,className:"text-xs px-3 py-1 flex items-center",children:[a.jsx(An,{className:"h-3.5 w-3.5 mr-2"}),"Move to Future Session"]}),a.jsxs(jt,{variant:"secondary",onClick:()=>kn(w),className:"text-xs px-3 py-1 flex items-center",children:[a.jsx(vd,{className:"h-3.5 w-3.5 mr-2"}),"Edit"]}),a.jsxs(jt,{variant:"danger",onClick:()=>{Dn(null),ns(w)},className:"text-xs px-3 py-1 flex items-center",children:[a.jsx(to,{className:"h-3.5 w-3.5 mr-2"}),"Delete"]})]}),U.length===0&&a.jsx("p",{className:"text-xs text-gray-500 text-right",children:"No upcoming sessions are available yet. Create a future session to enable this action."})]})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3",children:[a.jsxs("div",{className:"border border-gray-200 rounded-lg p-3 bg-gray-50 max-h-48 overflow-y-auto",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[a.jsx(an,{className:"h-4 w-4 text-[#2D4660]"}),a.jsx("p",{className:"text-sm font-semibold text-[#2D4660]",children:"Problem it solves"})]}),a.jsx("p",{className:"text-sm text-gray-700 whitespace-pre-line",children:w.summary&&w.summary.length>0?w.summary:"No summary provided."})]}),a.jsxs("div",{className:"border border-gray-200 rounded-lg p-3 bg-gray-50 max-h-48 overflow-y-auto",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[a.jsx(Ym,{className:"h-4 w-4 text-[#2D4660]"}),a.jsx("p",{className:"text-sm font-semibold text-[#2D4660]",children:"What would it do?"})]}),a.jsx("p",{className:"text-sm text-gray-700 whitespace-pre-line",children:w.whatWouldItDo&&w.whatWouldItDo.length>0?w.whatWouldItDo:"No details provided."})]}),a.jsxs("div",{className:"border border-gray-200 rounded-lg p-3 bg-gray-50 max-h-48 overflow-y-auto",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[a.jsx(GF,{className:"h-4 w-4 text-[#2D4660]"}),a.jsx("p",{className:"text-sm font-semibold text-[#2D4660]",children:"How would it work?"})]}),a.jsx("p",{className:"text-sm text-gray-700 whitespace-pre-line",children:w.howWouldItWork&&w.howWouldItWork.length>0?w.howWouldItWork:"No implementation details provided."})]})]}),w.attachment_urls&&w.attachment_urls.length>0&&a.jsxs("div",{className:"border-t border-gray-200 pt-4",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[a.jsx(Sl,{className:"h-4 w-4 text-[#2D4660]"}),a.jsxs("p",{className:"text-sm font-semibold text-[#2D4660]",children:["Attachments (",w.attachment_urls.length,")"]})]}),a.jsx("div",{className:"flex flex-wrap gap-3",children:w.attachment_urls.map((Z,ae)=>{const A=Z.match(/\.(jpg|jpeg|png|gif|webp)$/i),$=Z.match(/\.pdf$/i),R=Z.split("/").pop()||`attachment-${ae+1}`;return a.jsxs("div",{className:"relative group border border-gray-300 rounded-md overflow-hidden",style:{width:"120px",height:"120px"},children:[A?a.jsx("a",{href:Z,target:"_blank",rel:"noopener noreferrer",className:"block w-full h-full",children:a.jsx("img",{src:Z,alt:R,className:"w-full h-full object-cover"})}):$?a.jsx("a",{href:Z,target:"_blank",rel:"noopener noreferrer",className:"block w-full h-full flex items-center justify-center bg-red-50 hover:bg-red-100 transition-colors",children:a.jsx(Sl,{className:"h-10 w-10 text-red-600"})}):a.jsx("a",{href:Z,target:"_blank",rel:"noopener noreferrer",className:"block w-full h-full flex items-center justify-center bg-gray-100 hover:bg-gray-200 transition-colors",children:a.jsx(Sl,{className:"h-8 w-8 text-gray-600"})}),a.jsx("div",{className:"absolute bottom-0 left-0 right-0 bg-black bg-opacity-70 text-white text-xs p-1.5 truncate",children:R.length>18?`${R.substring(0,18)}...`:R})]},ae)})})]})]})},w.id)})})]}),a.jsxs("div",{className:"relative bg-white rounded-lg shadow-md p-4 mb-6",children:[a.jsxs("div",{className:"flex justify-between items-center mb-4",children:[a.jsx("h2",{className:"text-xl font-semibold text-[#2D4660]",children:"Feature Management"}),a.jsxs(jt,{variant:"gold",onClick:()=>d(!0),className:"flex items-center w-44",children:[a.jsx(dn,{className:"mr-2 h-4 w-4"}),"Add Feature"]})]}),a.jsx("div",{className:"w-full overflow-x-auto max-h-[600px] overflow-y-auto",children:a.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[a.jsx("thead",{className:"bg-gray-50",children:a.jsxs("tr",{children:[a.jsx("th",{scope:"col",className:"sticky left-0 top-0 bg-gray-50 px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider z-30",children:"Title"}),a.jsx("th",{scope:"col",className:"sticky top-0 bg-gray-50 hidden md:table-cell px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider z-20",children:"Type"}),a.jsx("th",{scope:"col",className:"sticky top-0 bg-gray-50 hidden md:table-cell px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider z-20",children:"Epic"}),a.jsx("th",{scope:"col",className:"sticky top-0 bg-gray-50 hidden md:table-cell px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider z-20",children:"State"}),a.jsx("th",{scope:"col",className:"sticky top-0 bg-gray-50 hidden lg:table-cell px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider z-20",children:"Area Path"}),a.jsx("th",{scope:"col",className:"sticky top-0 bg-gray-50 px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider z-20",children:"Votes"}),a.jsx("th",{scope:"col",className:"sticky top-0 bg-gray-50 px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider z-20",children:"Actions"})]})}),a.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:e.map(w=>a.jsxs("tr",{className:"align-top group hover:bg-gray-50 bg-white",children:[a.jsx("td",{className:"sticky left-0 bg-white group-hover:bg-gray-50 px-4 py-3 z-10",children:a.jsx("div",{className:"flex items-start gap-2",children:a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("div",{className:"text-sm font-medium text-gray-900",children:w.title}),w.description&&w.description.trim()&&a.jsxs("div",{className:"text-xs text-gray-500 mt-1 line-clamp-2",children:[w.description.replace(/<[^>]*>/g,"").substring(0,100),w.description.replace(/<[^>]*>/g,"").length>100?"...":""]}),w.tags&&w.tags.length>0&&a.jsxs("div",{className:"flex flex-wrap gap-1 mt-1 items-center",children:[w.tags.slice(0,3).map((D,Z)=>a.jsxs("span",{className:"inline-flex items-center px-1.5 py-0.5 text-xs bg-[#C89212]/10 text-[#C89212] rounded border border-[#C89212]/30",children:[a.jsx(yk,{className:"h-3 w-3 mr-1"}),D]},Z)),w.tags.length>3&&a.jsxs("span",{className:"inline-flex items-center px-1.5 py-0.5 text-xs bg-[#C89212]/10 text-[#C89212] rounded border border-[#C89212]/30",children:[a.jsx(yk,{className:"h-3 w-3 mr-1"}),"+",w.tags.length-3]})]})]})})}),a.jsx("td",{className:"hidden md:table-cell px-4 py-3 align-middle",children:(()=>{const D=w.workItemType||w.work_item_type,Z=XI(D);if(Z&&w.azureDevOpsId){const ae=Z.icon,$=(ge=>{const Re=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(ge);return Re?{r:parseInt(Re[1],16),g:parseInt(Re[2],16),b:parseInt(Re[3],16)}:null})(Z.color),R=$?`rgba(${$.r}, ${$.g}, ${$.b}, 0.1)`:`${Z.color}20`,ne=$?`rgba(${$.r}, ${$.g}, ${$.b}, 0.2)`:`${Z.color}40`;return a.jsxs("a",{href:w.azureDevOpsUrl||"",target:"_blank",rel:"noopener noreferrer",onClick:ge=>ge.stopPropagation(),className:"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium cursor-pointer border",style:{backgroundColor:R,color:Z.color,borderColor:Z.color},onMouseEnter:ge=>{ge.currentTarget.style.backgroundColor=ne},onMouseLeave:ge=>{ge.currentTarget.style.backgroundColor=R},title:"View in Azure DevOps",children:[a.jsx(ae,{className:"h-3 w-3 mr-1",style:{color:Z.color}}),w.azureDevOpsId.replace(/^ado-/,"#")]})}else{if(D&&w.azureDevOpsId)return a.jsxs("a",{href:w.azureDevOpsUrl||"",target:"_blank",rel:"noopener noreferrer",onClick:ae=>ae.stopPropagation(),className:"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-[#492434]/10 text-[#492434] hover:bg-[#492434]/20 cursor-pointer border border-[#492434]/30",title:"View in Azure DevOps",children:[a.jsx("span",{className:"mr-1 text-xs",children:D}),w.azureDevOpsId.replace(/^ado-/,"#")]});if(Z){const ae=Z.icon;return a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx(ae,{className:"w-4 h-4",style:{color:Z.color}}),w.azureDevOpsId&&a.jsx("span",{className:"text-xs text-gray-600",children:w.azureDevOpsId.replace(/^ado-/,"#")})]})}else if(D)return a.jsx("span",{className:"px-2 py-1 text-xs font-medium bg-[#492434]/10 text-[#492434] rounded",children:D})}return a.jsx("span",{className:"text-gray-400 text-xs",children:"-"})})()}),a.jsx("td",{className:`hidden md:table-cell px-4 py-3 align-middle ${w.epic||w.workItemType&&w.workItemType.toLowerCase()==="epic"?"w-64":"w-32"}`,onMouseEnter:D=>D.stopPropagation(),onMouseLeave:D=>D.stopPropagation(),children:w.workItemType&&w.workItemType.toLowerCase()==="epic"?a.jsx("span",{className:"text-xs text-gray-600 italic",children:"This Work Item is an Epic"}):w.epic?w.epicId?a.jsx("a",{href:`https://dev.azure.com/${b.organization}/${b.project}/_workitems/edit/${w.epicId}`,target:"_blank",rel:"noopener noreferrer",onClick:D=>D.stopPropagation(),className:"inline-block w-full",children:a.jsx(Bl,{name:w.epic,epicId:String(w.epicId),description:w.description,className:"hover:opacity-80"})}):a.jsx(Bl,{name:w.epic,description:w.description}):a.jsx("span",{className:"text-xs text-gray-400 italic",children:"no Epic assigned"})}),a.jsx("td",{className:"hidden md:table-cell px-4 py-3 align-middle",children:w.state&&a.jsx("span",{className:"px-2 py-1 text-xs font-medium bg-[#1E5461]/10 text-[#1E5461] rounded",children:w.state})}),a.jsx("td",{className:"hidden lg:table-cell px-4 py-3 text-sm",children:a.jsx("div",{className:"text-gray-600",children:w.areaPath&&typeof w.areaPath=="string"&&w.areaPath.trim()!==""?a.jsx("div",{className:"max-w-xs break-words text-xs",children:w.areaPath}):a.jsx("span",{className:"text-gray-400 text-xs",children:"-"})})}),a.jsx("td",{className:"px-4 py-3 whitespace-nowrap text-sm",children:w.votes}),a.jsxs("td",{className:"px-4 py-3 whitespace-nowrap text-sm text-gray-500 space-x-3 md:opacity-0 md:group-hover:opacity-100 transition-opacity",children:[a.jsx("button",{onClick:()=>f(w),className:"text-[#2D4660] hover:text-[#C89212] inline-block cursor-pointer",title:"Edit Feature",children:a.jsx(vd,{className:"h-5 w-5"})}),a.jsx("button",{onClick:()=>n(w.id),className:"text-[#2D4660] hover:text-[#591D0F] inline-block cursor-pointer",title:"Delete Feature",children:a.jsx(to,{className:"h-5 w-5"})})]})]},w.id))})]})})]}),a.jsx(yn,{isOpen:Wt!==null,onClose:()=>{sr||(rr(null),Ft(null))},title:"Move Suggestion to Current Session",children:a.jsxs("div",{className:"space-y-4",children:[a.jsxs("p",{className:"text-sm text-gray-700",children:["Move ",a.jsx("span",{className:"font-semibold text-[#2D4660]",children:Wt==null?void 0:Wt.title})," into the current session so it can be managed and voted on."]}),Ht&&a.jsx("div",{className:"bg-[#591D0F]/5 border border-[#591D0F]/20 text-[#591D0F] text-sm rounded-md px-3 py-2",children:Ht}),a.jsxs("div",{className:"flex justify-end gap-2",children:[a.jsx(jt,{variant:"secondary",onClick:()=>{sr||(rr(null),Ft(null))},disabled:sr,children:"Cancel"}),a.jsx(jt,{variant:"primary",onClick:Rs,disabled:sr,children:sr?"Moving...":"Move to Current Session"})]})]})}),a.jsx(yn,{isOpen:vt!==null,onClose:()=>{mr||(ir(null),Jt(null))},title:"Move to Future Session",children:a.jsxs("div",{className:"space-y-4",children:[a.jsxs("p",{className:"text-sm text-gray-700",children:["Choose the upcoming session where you would like to queue ",a.jsx("span",{className:"font-semibold text-[#2D4660]",children:vt==null?void 0:vt.title}),"."]}),U.length>0?a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Destination Session"}),a.jsx("select",{value:yr,onChange:w=>hr(w.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md text-sm bg-white",disabled:mr,children:U.map(w=>a.jsxs("option",{value:w.id,children:[w.title," (Starts ",ea(w.startDate),")"]},w.id))})]}):a.jsx("div",{className:"bg-[#1E5461]/5 border border-[#1E5461]/20 text-[#1E5461] text-sm rounded-md px-3 py-2",children:"No future sessions are available yet. Create a new session to enable this action."}),Fr&&a.jsx("div",{className:"bg-[#591D0F]/5 border border-[#591D0F]/20 text-[#591D0F] text-sm rounded-md px-3 py-2",children:Fr}),a.jsxs("div",{className:"flex justify-end gap-2",children:[a.jsx(jt,{variant:"secondary",onClick:()=>{mr||(ir(null),Jt(null))},disabled:mr,children:"Cancel"}),a.jsx(jt,{variant:"primary",onClick:Vi,disabled:mr||U.length===0,children:mr?"Moving...":"Move to Session"})]})]})}),a.jsx(yn,{isOpen:nr!==null,onClose:()=>{Lr||(bn(null),Hr(null))},title:"Edit Suggested Feature",children:a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Title"}),a.jsx("input",{type:"text",value:Qt.title,onChange:w=>pr(D=>({...D,title:w.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md",disabled:Lr})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Problem it solves"}),a.jsx("textarea",{value:Qt.summary,onChange:w=>pr(D=>({...D,summary:w.target.value})),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-md",disabled:Lr})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"What would it do?"}),a.jsx("textarea",{value:Qt.whatWouldItDo,onChange:w=>pr(D=>({...D,whatWouldItDo:w.target.value})),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-md",disabled:Lr})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"How would it work?"}),a.jsx("textarea",{value:Qt.howWouldItWork,onChange:w=>pr(D=>({...D,howWouldItWork:w.target.value})),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-md",disabled:Lr})]}),ln.length>0&&a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Attachments"}),a.jsx("div",{className:"flex flex-wrap gap-3",children:ln.map((w,D)=>{const Z=w.match(/\.(jpg|jpeg|png|gif|webp)$/i),ae=w.match(/\.pdf$/i),A=w.split("/").pop()||`attachment-${D+1}`;return a.jsxs("div",{className:"relative group border border-gray-300 rounded-md overflow-hidden",style:{width:"120px",height:"120px"},children:[Z?a.jsx("a",{href:w,target:"_blank",rel:"noopener noreferrer",className:"block w-full h-full",children:a.jsx("img",{src:w,alt:A,className:"w-full h-full object-cover"})}):ae?a.jsx("a",{href:w,target:"_blank",rel:"noopener noreferrer",className:"block w-full h-full flex items-center justify-center bg-red-50 hover:bg-red-100 transition-colors",children:a.jsx(Sl,{className:"h-10 w-10 text-red-600"})}):a.jsx("a",{href:w,target:"_blank",rel:"noopener noreferrer",className:"block w-full h-full flex items-center justify-center bg-gray-100 hover:bg-gray-200 transition-colors",children:a.jsx(Sl,{className:"h-8 w-8 text-gray-600"})}),a.jsx("button",{type:"button",onClick:()=>{lr($=>$.filter((R,ne)=>ne!==D))},className:"absolute top-1 right-1 bg-red-500 text-white rounded-full p-1 opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center",style:{width:"20px",height:"20px"},disabled:Lr,"aria-label":`Remove ${A}`,children:a.jsx(Ts,{className:"h-3 w-3"})}),a.jsx("div",{className:"absolute bottom-0 left-0 right-0 bg-black bg-opacity-70 text-white text-xs p-1.5 truncate",children:A.length>18?`${A.substring(0,18)}...`:A})]},D)})}),a.jsx("p",{className:"mt-2 text-xs text-gray-500",children:"Click the X icon on hover to remove attachments"})]}),In&&a.jsx("div",{className:"bg-[#591D0F]/5 border border-[#591D0F]/20 text-[#591D0F] text-sm rounded-md px-3 py-2",children:In}),a.jsx("div",{className:"flex justify-end gap-2",children:a.jsx(jt,{variant:"primary",onClick:Hn,disabled:Lr,children:Lr?"Saving...":"Save Changes"})})]})}),a.jsx(yn,{isOpen:hn!==null,onClose:()=>{jn||(ns(null),Dn(null))},title:"Delete Suggested Feature",children:a.jsxs("div",{className:"space-y-4",children:[a.jsxs("p",{className:"text-sm text-gray-700",children:["Are you sure you want to delete ",a.jsx("span",{className:"font-semibold text-[#591D0F]",children:hn==null?void 0:hn.title}),"? This action cannot be undone."]}),_s&&a.jsx("div",{className:"bg-[#591D0F]/5 border border-[#591D0F]/20 text-[#591D0F] text-sm rounded-md px-3 py-2",children:_s}),a.jsxs("div",{className:"flex justify-end gap-2",children:[a.jsx(jt,{variant:"secondary",onClick:()=>{jn||(ns(null),Dn(null))},disabled:jn,children:"Cancel"}),a.jsx(jt,{variant:"danger",onClick:ls,disabled:jn,children:jn?"Deleting...":"Delete"})]})]})}),a.jsx(yn,{isOpen:u,onClose:()=>d(!1),title:"Add New Feature",children:a.jsx(MC,{onSubmit:w=>{t(w),d(!1)},onCancel:()=>d(!1)})}),a.jsx(yn,{isOpen:m!==null,onClose:()=>f(null),title:"Edit Feature",children:m&&a.jsx(MC,{feature:m,onSubmit:w=>{r({...m,...w}),f(null)},onCancel:()=>f(null)})}),a.jsx(yn,{isOpen:At,onClose:()=>gt(!1),title:"Edit Session Settings",children:a.jsx(TZ,{session:x,featureCount:e.length,onSubmit:ga,onCancel:()=>gt(!1),onRequestDeleteSession:qi,isDeletingSession:l,productName:Ns,products:Sn,isLoadingProducts:ps,productError:X,onRequestDeleteProduct:w=>Oe(w),onProductColorUpdated:async()=>{const w=(J==null?void 0:J.tenant_id)??(J==null?void 0:J.tenantId)??null;if(w)try{const D=await Bo(w);en(D)}catch(D){console.error("Error refreshing products after color update:",D)}}})}),Pe&&a.jsxs(yn,{isOpen:!0,onClose:()=>Oe(null),title:"Delete Product",children:[a.jsxs("p",{className:"text-sm text-gray-700 mb-4",children:["Are you sure you want to delete ",a.jsx("span",{className:"font-semibold",children:Pe.name}),"? This will remove it for everyone in your tenant."]}),a.jsxs("div",{className:"flex justify-end gap-3",children:[a.jsx(jt,{variant:"secondary",onClick:()=>Oe(null),disabled:xr,children:"Cancel"}),a.jsx(jt,{variant:"danger",onClick:as,disabled:xr,children:xr?"Deleting...":"Delete"})]})]}),a.jsx(AZ,{isOpen:L,onClose:()=>H(!1),previewFeatures:F,onConfirmSync:le,onReplaceAll:K,isFetching:E,config:b}),a.jsx(yn,{isOpen:z,onClose:()=>{W(!1),ei()},title:"Reopen Session",children:a.jsxs("form",{onSubmit:Ar(cn),className:"space-y-4",children:[a.jsx("p",{className:"text-gray-600",children:"Capture a brief note so other admins understand why this session is being reopened."}),a.jsx(cd,{control:Zs,name:"reason",rules:{required:"Please select a reason"},render:({field:w})=>a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Reason *"}),a.jsx(EZ,{options:CZ,value:w.value,onChange:w.onChange,placeholder:"Select a reason..."}),vi.reason&&a.jsx("p",{className:"mt-1 text-sm text-[#591D0F]",children:vi.reason.message})]})}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Additional Details (Optional)"}),a.jsx("textarea",{...os("details"),rows:3,placeholder:"Add any context you'd like to share with other admins...",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-[#2D4660] focus:border-transparent"})]}),a.jsx("div",{className:"bg-[#1E5461]/5 border border-[#1E5461]/20 rounded-lg p-3 text-sm text-[#1E5461]",children:"This information will appear in the Current Session summary so every admin sees why voting resumed."}),a.jsxs("div",{className:"flex justify-end space-x-2 pt-4",children:[a.jsx(jt,{variant:"secondary",type:"button",onClick:()=>{W(!1),ei()},children:"Cancel"}),a.jsx(jt,{variant:"primary",type:"submit",children:"Save & Reopen"})]})]})}),a.jsx(yn,{isOpen:wt,onClose:()=>{Yt(!1),jr()},title:"End Session Early",children:a.jsxs("form",{onSubmit:ys(Wi),className:"space-y-4",children:[a.jsx("p",{className:"text-gray-600",children:"You are about to end this voting session early. Please select a reason:"}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Reason *"}),a.jsxs("select",{...gs("reason",{required:"Please select a reason"}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-[#2D4660] focus:border-transparent",children:[a.jsx("option",{value:"",children:"Select a reason..."}),a.jsx("option",{value:"Sufficient Responses",children:"Sufficient responses received"}),a.jsx("option",{value:"Project Cancelled",children:"Project or initiative cancelled"}),a.jsx("option",{value:"Timeline Changed",children:"Timeline or priorities changed"}),a.jsx("option",{value:"Technical Issues",children:"Technical issues or data concerns"}),a.jsx("option",{value:"Stakeholder Request",children:"Stakeholder request"}),a.jsx("option",{value:"Low Participation",children:"Low participation rate"}),a.jsx("option",{value:"Other",children:"Other"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Additional Details (Optional)"}),a.jsx("textarea",{...gs("details"),rows:3,placeholder:"Add any additional context or notes...",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-[#2D4660] focus:border-transparent"})]}),a.jsxs("div",{className:"bg-[#C89212]/5 border border-[#C89212]/20 rounded-lg p-3 text-sm text-[#6A4234]",children:[a.jsx("p",{className:"font-medium mb-1",children:"Note:"}),a.jsx("p",{children:"Ending the session will close voting immediately. This action will be logged and visible to all admins."})]}),a.jsxs("div",{className:"flex justify-end space-x-2 pt-4",children:[a.jsx(jt,{variant:"secondary",type:"button",onClick:()=>{Yt(!1),jr()},children:"Cancel"}),a.jsx(jt,{variant:"danger",type:"submit",children:"End Session Now"})]})]})}),Xe&&a.jsx(yn,{isOpen:!0,onClose:()=>{Ie(null),Dt(""),_e(null),dt(!1)},title:"Edit Product",children:a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Product Name *"}),a.jsx("input",{type:"text",value:Lt,onChange:w=>Dt(w.target.value),placeholder:"Enter product name",className:"w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-0 focus:border-[#2D4660]"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Product Color"}),a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("button",{type:"button",onClick:()=>{Xt(zt||"#2D4660"),dt(!0)},className:"block w-12 h-12 rounded-md border-2 border-gray-300 hover:border-gray-400 transition-all flex items-center justify-center overflow-hidden",style:zt?{backgroundColor:zt}:{backgroundColor:"#ffffff"},children:!zt&&a.jsx("img",{src:JI,alt:"Color Picker",className:"w-8 h-8 object-contain"})}),a.jsx("span",{className:"text-sm text-gray-600",children:zt||"No color selected"})]})]}),a.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t",children:[a.jsx(jt,{variant:"secondary",onClick:()=>{Ie(null),Dt(""),_e(null),dt(!1)},disabled:He,children:"Cancel"}),a.jsx(jt,{variant:"primary",onClick:async()=>{if(!(!(Xe!=null&&Xe.id)||!Lt.trim())){Zt(!0);try{await SE(Xe.id,{name:Lt.trim(),color_hex:zt});const w=(J==null?void 0:J.tenant_id)??(J==null?void 0:J.tenantId);if(w){const D=await Bo(w);en(D.sort((Z,ae)=>Z.name.localeCompare(ae.name)))}Ie(null),Dt(""),_e(null),dt(!1),onProductColorUpdated&&onProductColorUpdated()}catch(w){console.error("Error updating product:",w),alert("Failed to update product. Please try again.")}finally{Zt(!1)}}},disabled:He||!Lt.trim(),children:He?"Updating...":"Update Product"})]})]})}),Gr&&a.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",onClick:()=>dt(!1),children:a.jsx("div",{className:"bg-white rounded-lg shadow-xl px-3 py-2 w-auto mx-4",onClick:w=>w.stopPropagation(),children:a.jsxs("div",{className:"flex gap-3 items-stretch",children:[a.jsxs("div",{className:"flex-shrink-0",style:{width:"240px",height:"260px"},children:[a.jsx("input",{id:"edit-native-color-input",type:"color",value:gr,onChange:w=>Xt(w.target.value),ref:w=>{w&&Gr&&setTimeout(()=>w.click(),50)},className:"opacity-0 absolute",style:{width:"1px",height:"1px"}}),a.jsx("div",{className:"w-full h-full"})]}),a.jsxs("button",{type:"button",onClick:()=>{_e(gr),dt(!1)},className:"px-6 rounded-lg text-white font-bold shadow-lg hover:shadow-xl transition-all flex flex-col items-center justify-center gap-3 text-lg flex-shrink-0",style:{backgroundColor:gr,height:"260px",minWidth:"100px"},children:[a.jsx(Mr,{className:"h-8 w-8"}),a.jsxs("div",{className:"text-center leading-tight",children:[a.jsx("div",{children:"Looks"}),a.jsx("div",{children:"Good"})]})]})]})})})]})}const RC=["User Experience","Vendor Management","Analytics & Reporting","Operational Efficiency","Compliance & Risk","Mobile Access","Integration","Sustainability","Budget Management"],IZ={title:"Q2 Product Roadmap",goal:"Prioritize features for the Purchasing Dashboard redesign",votesPerUser:10,useAutoVotes:!0,startDate:new Date().toISOString(),endDate:new Date(Date.now()+10080*60*1e3).toISOString(),isActive:!0,originalEndDate:null,endedEarlyBy:null,endedEarlyReason:null,endedEarlyDetails:null,reopenReason:null,reopenDetails:null,reopenedBy:null,reopenedAt:null,productId:null,productName:null,product_id:null,product_name:null},DZ={organization:"newmill",project:"Product",enabled:!1,workItemType:"Feature"},$Z=[{id:"u1",name:"John Doe",email:"john@example.com",totalVotes:10,usedVotes:0,votesPerFeature:{}},{id:"u2",name:"Jane Smith",email:"jane@example.com",totalVotes:10,usedVotes:0,votesPerFeature:{}},{id:"u3",name:"Robert Johnson",email:"robert@example.com",totalVotes:10,usedVotes:0,votesPerFeature:{}}],RZ=(e,t,r)=>e?{label:"System Admin",className:"text-[#C89212]",icon:a.jsx(Br,{className:"h-3.5 w-3.5"})}:t?{label:"Session Admin",className:"text-[#576C71]",icon:a.jsx(Rr,{className:"h-3.5 w-3.5"})}:r?{label:"Stakeholder",className:"text-[#8B5A4A]",icon:a.jsx(gn,{className:"h-3.5 w-3.5"})}:null,MZ=e=>{switch(e){case"system-admin":return{label:"System Admin",className:"text-[#C89212]",icon:a.jsx(Br,{className:"h-3.5 w-3.5"})};case"session-admin":return{label:"Session Admin",className:"text-[#576C71]",icon:a.jsx(Rr,{className:"h-3.5 w-3.5"})};case"stakeholder":return{label:"Stakeholder",className:"text-[#8B5A4A]",icon:a.jsx(gn,{className:"h-3.5 w-3.5"})};default:return null}},FZ=(e,t,r)=>e?"system-admin":t?"session-admin":"stakeholder",_b=(e,t,r,n)=>{const s=FZ(e,t),i=RZ(e,t,r);if(!i)return null;if(n===s)return a.jsxs("span",{className:"text-sm text-gray-600",children:[","," ",a.jsxs("span",{className:`inline-flex items-baseline ${i.className}`,children:[a.jsx("span",{className:"inline-flex items-center",children:i.icon}),a.jsx("span",{className:"ml-1 text-sm",children:i.label})]})]});const l=MZ(n);return l?a.jsxs("span",{className:"text-sm text-gray-600",children:[","," ",a.jsxs("span",{className:`inline-flex items-baseline ${i.className}`,children:[a.jsx("span",{className:"inline-flex items-center",children:i.icon}),a.jsx("span",{className:"ml-1 text-sm",children:i.label})]}),a.jsx("span",{className:"md:inline hidden",children:", "}),a.jsxs("span",{className:"whitespace-nowrap md:inline inline-block",children:[a.jsx("span",{className:"md:hidden",children:", "}),"viewing this page as a"," ",a.jsxs("span",{className:`inline-flex items-baseline ${l.className}`,children:[a.jsx("span",{className:"inline-flex items-center",children:l.icon}),a.jsx("span",{className:"ml-1 text-sm",children:l.label})]})]})]}):null},$m=e=>{const t=new Date(e),r=new Date;t.setHours(0,0,0,0),r.setHours(0,0,0,0);const n=t.getTime()-r.getTime();return Math.ceil(n/(1e3*60*60*24))},Rm=e=>e<=0?"text-[#591D0F]":e<=2?"text-[#6A4234]":e<=4?"text-[#C89212]":"text-[#1E5461]",Nb=e=>e<=0?"bg-[#591D0F]/10":e<=2?"bg-[#6A4234]/10":e<=4?"bg-[#C89212]/10":"bg-[#1E5461]/10",LZ=e=>e<=0?"bg-[#EEE8E7]":e<=2?"bg-[#F0ECEB]":e<=4?"bg-[#FAF4E7]":"bg-[#E9EEEF]",zZ=(e,t)=>{const r=new Date(e),n=new Date(t),s=new Date;return r<=s&&s<=n},UZ=e=>{const t=[...e];for(let r=t.length-1;r>0;r--){const n=Math.floor(Math.random()*(r+1));[t[r],t[n]]=[t[n],t[r]]}return t},hd=(e,t)=>e?e.length>t?`${e.substring(0,t-3)}...`:e:"",jh=e=>{if(!e)return"";const t=document.createElement("div");t.innerHTML=e;let r=t.textContent||t.innerText||"";return r=r.replace(/\s+/g," ").trim(),r},BZ=e=>{const t=e.split("");for(let r=0;r<3;r++){const n=Math.floor(Math.random()*t.length),s=Math.floor(Math.random()*t.length);n!==s&&([t[n],t[s]]=[t[s],t[n]])}return t.join("")};function Ip({src:e,alt:t,style:r,className:n,...s}){const[i,l]=y.useState(!1);return i?a.jsx("div",{className:`inline-block bg-gray-100 text-center align-middle ${n??""}`,style:r,children:a.jsx("div",{className:"flex items-center justify-center w-full h-full",children:a.jsx("img",{src:"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iODgiIGhlaWdodD0iODgiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgc3Ryb2tlPSIjMDAwIiBzdHJva2UtbGluZWpvaW49InJvdW5kIiBvcGFjaXR5PSIuMyIgZmlsbD0ibm9uZSIgc3Ryb2tlLXdpZHRoPSIzLjciPjxyZWN0IHg9IjE2IiB5PSIxNiIgd2lkdGg9IjU2IiBoZWlnaHQ9IjU2IiByeD0iNiIvPjxwYXRoIGQ9Im0xNiA1OCAxNi0xOCAzMiAzMiIvPjxjaXJjbGUgY3g9IjUzIiBjeT0iMzUiIHI9IjciLz48L3N2Zz4KCg==",alt:"Error loading image",...s,"data-original-url":e})})}):a.jsx("img",{src:e,alt:t,className:n,style:r,...s,onError:()=>l(!0)})}const jt=Nt.memo(function({children:t,onClick:r,variant:n="primary",disabled:s=!1,className:i="",...l}){const u="py-2 px-4 rounded-lg flex items-center transition-colors cursor-pointer",d={primary:"bg-[#2d4660] text-white hover:bg-[#173B65]",secondary:"border border-gray-300 text-gray-700 hover:bg-gray-50",danger:"bg-[#591D0F] text-white hover:bg-[#492434]",gold:"bg-[#C89212] text-white hover:bg-[#E0A814]",blue:"bg-[#173B65] text-white hover:bg-[#1D2C49]",gray:"bg-[#576C71] text-white hover:bg-[#1E5461]"};return a.jsx("button",{onClick:r,disabled:s,className:`${u} ${d[n]} ${s?"opacity-60 cursor-not-allowed":""} ${i}`,...l,children:t})}),yn=({isOpen:e,onClose:t,title:r,children:n,maxWidth:s="max-w-2xl",hideCloseButton:i=!1,hideHeader:l=!1})=>(y.useEffect(()=>{if(e){const u=window.scrollY;return document.body.style.position="fixed",document.body.style.top=`-${u}px`,document.body.style.width="100%",document.body.style.overflow="hidden",()=>{document.body.style.position="",document.body.style.top="",document.body.style.width="",document.body.style.overflow="",window.scrollTo(0,u)}}},[e]),e?a.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:a.jsxs("div",{className:"flex items-start justify-center min-h-screen p-4 text-center pt-8 sm:pt-16",children:[a.jsx("div",{className:"fixed inset-0 transition-opacity bg-black/50",onClick:i?void 0:t,"aria-hidden":"true"}),a.jsxs("div",{className:`inline-block w-full ${s} p-6 mb-8 overflow-visible text-left align-middle transition-all transform bg-white shadow-xl rounded-lg relative z-10`,children:[l?!i&&a.jsx("div",{className:"flex justify-end -mt-2 -mr-2",children:a.jsx("button",{onClick:t,className:"text-gray-400 hover:text-gray-500 focus:outline-none",children:a.jsx(Ts,{className:"h-5 w-5"})})}):a.jsxs("div",{className:"flex items-start justify-between mb-5",children:[a.jsxs("div",{className:"flex items-center gap-3 bg-[#FFF7E2] border border-[#C89212]/40 rounded-xl px-6 py-3 shadow-sm w-full mr-4",children:[a.jsx("div",{className:"flex items-center justify-center h-10 w-10 rounded-full bg-[#C89212]/15 text-[#C89212]",children:a.jsx(Ym,{className:"h-6 w-6"})}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-lg font-semibold text-[#2d4660] tracking-tight",children:r}),a.jsx("p",{className:"text-xs text-[#8A6D3B] font-medium mt-1 uppercase tracking-widest",children:"Spark the roadmap with your ideas"})]})]}),!i&&a.jsx("button",{onClick:t,className:"ml-3 text-gray-400 hover:text-gray-500 focus:outline-none",children:a.jsx(Ts,{className:"h-5 w-5"})})]}),a.jsx("div",{className:l?"-mt-4":"mt-2 overflow-visible",children:n})]})]})}):null),Bl=Nt.memo(function({name:t,epicId:r,description:n,truncateAt:s=null,className:i}){if(!t)return null;const l=s===null?t:hd(t,s),u=["flex items-center text-xs text-gray-600",i].filter(Boolean).join(" "),d=n;return a.jsxs("div",{className:`${u} relative group/epic`,children:[a.jsxs("div",{className:"flex items-start gap-1.5 min-w-0",children:[a.jsx(Br,{className:"h-4 w-4 flex-shrink-0 mt-0.5",style:{color:"rgba(51, 153, 71, 0.6)"}}),a.jsxs("span",{className:"font-normal leading-tight break-words min-w-0 text-gray-600",children:[l,r&&a.jsxs("span",{className:"text-gray-500 ml-1",children:["#",r]})]})]}),d&&a.jsxs("div",{className:"absolute left-0 bottom-full mb-2 opacity-0 group-hover/epic:opacity-100 transition-opacity z-50 w-64 p-3 bg-gray-900 text-white text-xs rounded-lg shadow-lg pointer-events-none",children:[a.jsx("div",{className:"font-semibold mb-1",children:t}),n&&a.jsx("div",{className:"text-gray-300 mt-2 line-clamp-4",children:n.replace(/<[^>]*>/g,"").trim()}),a.jsx("div",{className:"absolute top-full left-4 w-0 h-0 border-l-4 border-r-4 border-t-4 border-transparent border-t-gray-900"})]})]})});function WZ(e){if(!e)return null;const t=e.toLowerCase();return t==="epic"?{icon:Br,color:"rgb(51, 153, 71)"}:t==="feature"?{icon:Xm,color:"rgb(119, 59, 147)"}:t==="user story"||t==="story"?{icon:QE,color:"#007acc"}:t==="bug"?{icon:ZE,color:"#cc293d"}:t==="task"?{icon:$l,color:"#007acc"}:t==="change request"?{icon:XE,color:"#ff8c00"}:t==="test case"||t==="test"?{icon:eA,color:"#007acc"}:t==="issue"?{icon:an,color:"#cc293d"}:null}const VZ=Nt.memo(function({id:t,url:r,workItemType:n}){if(!t)return null;const s=WZ(n),i=(s==null?void 0:s.icon)||oF,l=(s==null?void 0:s.color)||"#007acc",u=(v,x)=>{if(v.startsWith("rgb(")){const b=v.match(/\d+/g);if(b&&b.length>=3)return`rgba(${b[0]}, ${b[1]}, ${b[2]}, ${x})`}if(v.startsWith("#")){const b=v.replace("#",""),S=parseInt(b.substring(0,2),16),j=parseInt(b.substring(2,4),16),N=parseInt(b.substring(4,6),16);return`rgba(${S}, ${j}, ${N}, ${x})`}return v},d=s?u(l,.2):"rgb(219, 234, 254)",m=s?u(l,.6):"rgb(147, 197, 254)",f=s?u(l,.3):"rgb(191, 219, 254)",p=s?u(l,.8):"rgb(147, 197, 254)";return a.jsxs("a",{href:r,target:"_blank",rel:"noreferrer",className:"inline-flex items-center gap-1.5 px-1.5 py-1 rounded-md text-xs font-semibold border-2 shadow-sm hover:shadow-md cursor-pointer transition-all duration-200",style:{backgroundColor:d,color:l,borderColor:m},onMouseEnter:v=>{v.currentTarget.style.backgroundColor=f,v.currentTarget.style.borderColor=p},onMouseLeave:v=>{v.currentTarget.style.backgroundColor=d,v.currentTarget.style.borderColor=m},title:"View in Azure DevOps",children:[a.jsx(i,{className:"h-3.5 w-3.5 flex-shrink-0",style:s?{color:l}:{}}),a.jsxs("span",{className:"font-mono",children:["#",t]})]})});Nt.memo(function({endDate:t}){const r=$m(t),n=Rm(r),s=Nb(r);return a.jsx("div",{className:`${s} rounded-md p-3 border ${r<=2?"border-[#6A4234]/20":r<=4?"border-[#C89212]/20":"border-[#1E5461]/20"}`,children:a.jsxs("div",{className:"flex items-center",children:[a.jsx(An,{className:`h-5 w-5 mr-2 ${n}`}),a.jsxs("div",{children:[a.jsxs("span",{className:`font-medium ${n}`,children:["Voting ends: ",ea(t)]}),a.jsx("div",{className:"text-sm mt-1",children:r<=0?a.jsx("span",{className:"text-red-600 font-medium",children:"Voting ends today!"}):a.jsxs("span",{className:`${n}`,children:[r," ",r===1?"day":"days"," remaining"]})})]})]})})});function qZ({isShuffling:e,onShuffle:t}){const[r,n]=y.useState("Shuffle Features"),s=y.useRef(null);return y.useEffect(()=>(e?s.current=window.setInterval(()=>{n(BZ("Shuffle Features"))},100):s.current!==null&&(window.clearInterval(s.current),n("Shuffle Features")),()=>{s.current!==null&&window.clearInterval(s.current)}),[e]),a.jsxs("button",{onClick:t,className:`py-2 px-4 rounded-lg flex items-center justify-center transition-all duration-300 w-full md:w-auto ${e?"bg-[#C89212] text-white scale-95":"bg-[#C89212] hover:bg-[#A67810] text-white hover:scale-105"}`,disabled:e,children:[a.jsx("span",{className:`transition-transform duration-500 ${e?"mr-2 animate-spin":"mr-2"}`,children:a.jsx(TF,{className:"h-4 w-4"})}),a.jsx("span",{className:"font-medium tracking-wide whitespace-nowrap",children:r})]})}const Oh=Nt.memo(function({show:t,title:r,message:n,onConfirm:s,onCancel:i,confirmText:l="Confirm",cancelText:u="Cancel",type:d="delete"}){if(!t)return null;const m=d==="delete"?"bg-[#591D0F]/10":"bg-[#C89212]/10",f=d==="delete"?"text-[#591D0F]":"text-[#C89212]",p=d==="delete"?"bg-[#591D0F] hover:bg-[#492434]":"bg-[#C89212] hover:bg-[#A67810]";return a.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:a.jsxs("div",{className:"relative z-10 bg-white rounded-lg shadow-xl max-w-md w-full mx-auto overflow-hidden",children:[a.jsxs("div",{className:`${m} p-4 flex items-start space-x-4`,children:[a.jsx("div",{className:f,children:d==="delete"?a.jsx(to,{className:"h-5 w-5"}):a.jsx(an,{className:"h-5 w-5"})}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-lg font-medium text-gray-900",children:r}),a.jsx("p",{className:"mt-1 text-sm text-gray-500",children:n})]})]}),a.jsx("div",{className:"p-4 bg-white space-y-4",children:a.jsxs("div",{className:"flex items-center justify-end space-x-3",children:[a.jsx("button",{type:"button",onClick:i,className:"px-4 py-2 border border-gray-300 rounded-md text-sm font-medium text-gray-700 hover:bg-gray-50 cursor-pointer",children:u}),a.jsx("button",{type:"button",onClick:()=>{s(),i()},className:`px-4 py-2 rounded-md text-sm font-medium text-white ${p} cursor-pointer`,children:l})]})})]})})}),HZ=Nt.memo(function({feature:t,userVoteCount:r=0,remainingVotes:n=0,votingIsActive:s=!1,onVote:i,isShuffling:l=!1,shuffleStage:u="idle",currentUser:d,onRequestInfo:m}){const[f,p]=y.useState(!1),[v,x]=y.useState(!1),b=async()=>{if(!(!m||v)){x(!0);try{await m(t.id),p(!0)}catch(j){console.error("Error requesting info:",j)}finally{x(!1)}}},S=()=>{switch(u){case"fadeOut":return"opacity-0 scale-95 blur-sm";case"rearranging":return"opacity-0 scale-90";case"fadeIn":return"opacity-100 scale-100 blur-0";default:return"opacity-100 scale-100 blur-0"}};return a.jsx("div",{className:`relative z-10 bg-white rounded-lg shadow-md overflow-hidden transition-all duration-400 ease-in-out ${r>0?"border-2 border-[#1E5461]":""} ${S()}`,children:a.jsxs("div",{className:"p-6 flex flex-col h-full",children:[a.jsx("h3",{className:"text-lg font-semibold mb-2 text-[#2d4660]",children:t.title}),a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[t.areaPath&&a.jsx("span",{className:"text-sm text-gray-600",children:t.areaPath}),t.azureDevOpsId&&a.jsx("div",{className:"mt-2",children:a.jsx(VZ,{id:t.azureDevOpsId,url:t.azureDevOpsUrl||"",workItemType:t.workItemType})})]}),t.description?a.jsx("p",{className:"text-gray-600 mb-4 flex-grow",children:t.description}):a.jsxs("div",{className:"mb-4 flex-grow",children:[a.jsx("p",{className:"text-gray-400 italic mb-3",children:"No description provided"}),d&&m&&a.jsx("div",{className:"transition-all duration-300",children:f?a.jsxs("div",{className:"text-sm px-3 py-2 bg-green-50 text-green-700 rounded-md font-medium flex items-center animate-fadeIn",children:[a.jsx(Mr,{className:"h-4 w-4 mr-2 flex-shrink-0"}),a.jsx("span",{children:"Thank you! Your request has been sent."})]}):a.jsxs("button",{onClick:b,disabled:v,className:"text-sm px-3 py-2 bg-blue-50 hover:bg-blue-100 text-[#2d4660] rounded-md font-medium flex items-center transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:[a.jsx(an,{className:"h-4 w-4 mr-2 flex-shrink-0"}),a.jsx("span",{children:v?"Sending...":"Ask Product Owner for more info"})]})})]}),i&&a.jsx("div",{className:"mt-auto pt-3",children:a.jsxs("div",{className:`flex items-center mb-3 gap-2 ${t.epic?"justify-between":"justify-end"}`,children:[t.epic&&t.epic.trim()&&a.jsx(Bl,{name:t.epic,epicId:t.epicId,truncateAt:null,className:"text-sm bg-gray-100 px-2 py-1 rounded-md"}),a.jsx("div",{className:"flex items-center space-x-2",children:r===0?a.jsxs("button",{onClick:()=>i(t.id,!0),className:`px-6 py-2.5 rounded-lg text-base font-semibold cursor-pointer transition-colors flex items-center ${s&&n>0?"bg-[#2d4660] text-white hover:bg-[#C89212]":"bg-gray-300 text-gray-600 cursor-not-allowed"}`,disabled:!s||n<=0,children:[a.jsx(Ln,{className:"h-6 w-6 mr-2"}),"Vote"]}):a.jsxs(a.Fragment,{children:[a.jsx("button",{onClick:()=>i(t.id,!1),className:"p-2 rounded-full bg-gray-100 hover:bg-gray-200 text-gray-700 cursor-pointer transition-colors","aria-label":"Remove vote",disabled:!s,children:a.jsx(_l,{className:"h-6 w-6"})}),a.jsx("span",{className:"px-4 py-2 bg-[#1E5461]/10 text-[#1E5461] rounded-full font-semibold text-base min-w-[3rem] text-center",children:r}),a.jsx("button",{onClick:()=>i(t.id,!0),className:`p-2 rounded-full cursor-pointer transition-colors ${s&&n>0?"bg-[#2d4660]/10 hover:bg-[#C89212]/30 text-[#2d4660]":"bg-gray-100 text-gray-400 cursor-not-allowed"}`,disabled:!s||n<=0,"aria-label":"Add vote",children:a.jsx(dn,{className:"h-6 w-6"})})]})})]})})]})})});function KZ({feature:e,onClose:t}){return y.useEffect(()=>{const r=window.scrollY;return document.body.style.position="fixed",document.body.style.top=`-${r}px`,document.body.style.width="100%",document.body.style.overflow="hidden",()=>{document.body.style.position="",document.body.style.top="",document.body.style.width="",document.body.style.overflow="",window.scrollTo(0,r)}},[]),a.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:a.jsxs("div",{className:"relative z-10 bg-white rounded-lg p-6 max-w-md w-full max-h-[80vh] overflow-y-auto",children:[a.jsxs("div",{className:"flex justify-between items-center mb-4",children:[a.jsxs("h3",{className:"text-lg font-medium text-[#2d4660]",children:['Voters for "',e.title,'"']}),a.jsx("button",{onClick:t,className:"text-gray-500 hover:text-gray-700 cursor-pointer",children:a.jsx(Ts,{className:"h-5 w-5"})})]}),e.voters.length===0?a.jsx("p",{className:"text-gray-500",children:"No votes yet"}):a.jsx("ul",{className:"divide-y divide-gray-200",children:e.voters.map(r=>a.jsxs("li",{className:"py-3 flex justify-between items-center",children:[a.jsxs("div",{children:[a.jsx("p",{className:"font-medium",children:r.name}),a.jsx("p",{className:"text-sm text-gray-500",children:r.email})]}),a.jsxs("div",{className:"bg-[#2d4660]/10 text-[#2d4660] rounded-full px-3 py-1",children:[r.voteCount," ",r.voteCount===1?"vote":"votes"]})]},r.userId))})]})})}function GZ({features:e,onResetVotes:t,onResetAllVotes:r,onBack:n,showVotersList:s,setShowVotersList:i,votingSession:l,effectiveVotesPerUser:u,onLogout:d,currentUser:m,isSystemAdmin:f,isSessionAdmin:p,isStakeholder:v,currentRole:x=f?"system-admin":p?"session-admin":"stakeholder"}){const b=da(),[S,j]=y.useState(!1),N=y.useRef(null);y.useEffect(()=>{if(!S)return;const O=V=>{N.current&&!N.current.contains(V.target)&&j(!1)};return document.addEventListener("mousedown",O),document.addEventListener("touchstart",O,{passive:!0}),()=>{document.removeEventListener("mousedown",O),document.removeEventListener("touchstart",O)}},[S]);const E=y.useMemo(()=>[...e].sort((O,V)=>V.votes-O.votes),[e]),C=y.useMemo(()=>E.slice(0,10).map(O=>({name:O.title,votes:O.votes,id:O.id})),[E]),I=$m(l.endDate),T=Rm(I);return a.jsxs("div",{className:"container mx-auto p-4 max-w-6xl pb-8",children:[a.jsx("div",{className:"hidden md:flex md:justify-center mb-2",children:a.jsx("img",{src:$a,alt:"New Millennium Building Systems Logo",className:"-mt-4 cursor-pointer hover:opacity-80 transition-opacity",style:{height:"96px",width:"auto"},onClick:()=>b("/sessions")})}),a.jsxs("div",{className:"flex justify-between items-center mb-6",children:[a.jsxs("div",{className:"flex items-center",children:[a.jsx(Ip,{src:Jl,alt:"New Millennium Building Systems Logo",className:"mr-4 md:hidden cursor-pointer hover:opacity-80 transition-opacity",style:{width:"40px",height:"40px",objectFit:"contain"},onClick:()=>b("/sessions")}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("h1",{className:"text-2xl font-bold text-[#2d4660] md:text-3xl",children:_a(l.endDate)?"Final Voting Results":"Current Voting Results"}),m&&a.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:[m.name,_b(f,p,v,x)]})]})]}),a.jsxs("div",{ref:N,className:"relative z-40",children:[a.jsxs("div",{className:"hidden md:flex space-x-2",children:[a.jsxs(jt,{variant:"primary",onClick:n,className:"flex items-center",children:[a.jsx(Ks,{className:"mr-2 h-4 w-4"}),"Admin Dashboard"]}),a.jsx(jt,{variant:"danger",onClick:r,children:"Reset All Votes"}),a.jsxs("button",{onClick:d,className:`flex items-center justify-center bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-colors ${x==="stakeholder"?"px-4 py-2":"p-2 w-10 h-10"}`,title:"Logout",children:[a.jsx(pi,{className:"h-4 w-4"}),x==="stakeholder"&&a.jsx("span",{className:"ml-2",children:"Logout"})]})]}),a.jsx("div",{className:"flex md:hidden",children:a.jsx("button",{onClick:()=>j(!S),className:"p-2 rounded-md border border-gray-200 bg-white shadow-sm","aria-label":"Open menu",children:a.jsx(ta,{className:"h-5 w-5 text-gray-700"})})}),S&&a.jsx("div",{className:"absolute right-0 mt-2 w-56 bg-white border border-gray-200 rounded-lg shadow-lg md:hidden z-50",children:a.jsxs("div",{className:"py-1",children:[a.jsxs("button",{onClick:()=>{j(!1),n()},className:"w-full px-3 py-2 flex items-center text-left hover:bg-gray-50",children:[a.jsx(Ks,{className:"h-4 w-4 mr-2 text-gray-700"}),"Admin Dashboard"]}),a.jsxs("button",{onClick:()=>{j(!1),r()},className:"w-full px-3 py-2 flex items-center text-left hover:bg-gray-50 text-red-600",children:[a.jsx(to,{className:"h-4 w-4 mr-2"}),"Reset All Votes"]}),a.jsxs("button",{onClick:()=>{j(!1),d()},className:`w-full px-3 py-2 flex items-center hover:bg-gray-50 ${x==="stakeholder"?"text-left":"justify-center"}`,title:"Logout",children:[a.jsx(pi,{className:"h-4 w-4 text-gray-700"}),x==="stakeholder"&&a.jsx("span",{className:"ml-2 text-base text-gray-700",children:"Logout"})]})]})})]})]}),a.jsxs("div",{className:"relative z-10 mb-6",children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsx("div",{children:a.jsxs("h2",{className:"text-xl font-semibold text-[#2D4660]",children:["Current Session: ",l.product_name&&a.jsxs("span",{className:"text-[#1E5461]",children:[l.product_name," - "]}),a.jsx("span",{className:"text-[#1E5461]",children:l.title})]})}),l.isActive&&a.jsx("div",{className:`${Nb(I)} relative z-10 rounded-md p-3 inline-block border ${I<=2?"border-[#6A4234]/20":I<=4?"border-[#C89212]/20":"border-[#1E5461]/20"}`,children:a.jsxs("div",{className:"flex items-center justify-between gap-4",children:[a.jsxs("div",{className:"flex items-center",children:[a.jsx(An,{className:`h-4 w-4 mr-2 ${T}`}),a.jsx("span",{className:`${T} font-medium`,children:I<=0?"Voting ends today!":`${I} ${I===1?"day":"days"} remaining until ${ea(l.endDate)}`})]}),a.jsx("span",{className:`${T} font-medium`,children:"Voting Active"})]})})]}),a.jsx("div",{className:"text-sm text-gray-600 mb-4",children:a.jsxs("span",{children:["Votes per user: ",u]})}),a.jsx("div",{className:"h-72",children:a.jsx(uB,{width:"100%",height:"100%",children:a.jsxs(rZ,{data:C,margin:{top:20,right:30,left:20,bottom:60},children:[a.jsx($I,{dataKey:"name",angle:-45,textAnchor:"end",height:80,tick:{fontSize:12}}),a.jsx(RI,{}),a.jsx(zK,{}),a.jsx(PI,{dataKey:"votes",fill:"#3B82F6",children:C.map((O,V)=>a.jsx(gb,{fill:V%2===0?"#2d4660":"#4f6d8e"},`cell-${V}`))})]})})})]}),a.jsxs("div",{className:"relative z-10 bg-white rounded-lg shadow-md p-4",children:[a.jsx("h2",{className:"text-xl font-semibold mb-4 text-[#2d4660]",children:"Feature Details"}),a.jsx("div",{className:"w-full overflow-x-auto",children:a.jsxs("table",{className:"min-w-full divide-y divide-gray-200 table-fixed",children:[a.jsx("thead",{className:"bg-gray-50",children:a.jsxs("tr",{children:[a.jsx("th",{scope:"col",className:"w-12 px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Rank"}),a.jsx("th",{scope:"col",className:"w-1/2 px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Title"}),a.jsx("th",{scope:"col",className:"hidden sm:table-cell px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Epic"}),a.jsx("th",{scope:"col",className:"w-14 px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Votes"}),a.jsx("th",{scope:"col",className:"hidden md:table-cell w-20 px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Voters"}),a.jsx("th",{scope:"col",className:"w-20 px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),a.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:E.map((O,V)=>a.jsxs("tr",{className:"align-top group",children:[a.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm font-medium",children:V+1}),a.jsx("td",{className:"px-4 py-4 whitespace-normal break-words text-sm font-medium",children:O.title}),a.jsx("td",{className:`hidden sm:table-cell px-4 py-4 text-sm ${O.epic||O.workItemType&&O.workItemType.toLowerCase()==="epic"?"w-64":"w-32"}`,children:O.workItemType&&O.workItemType.toLowerCase()==="epic"?a.jsx("span",{className:"text-xs text-gray-600 italic",children:"This Work Item is an Epic"}):O.epic?a.jsx(Bl,{name:O.epic,epicId:O.epicId,description:O.description}):null}),a.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm",children:O.votes}),a.jsx("td",{className:"hidden md:table-cell px-4 py-4 whitespace-nowrap text-sm",children:a.jsxs("button",{onClick:()=>i(O.id),className:"text-[#2d4660] hover:text-[#C89212] flex items-center cursor-pointer",disabled:O.voters.length===0,children:[a.jsx(Qn,{className:"h-4 w-4 mr-1"}),O.voters.length," ",O.voters.length===1?"user":"users"]})}),a.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm md:opacity-0 md:group-hover:opacity-100 transition-opacity",children:a.jsx("button",{onClick:()=>t(O.id),className:"text-[#591D0F] hover:text-[#492434] cursor-pointer",disabled:O.votes===0,children:"Reset Votes"})})]},O.id))})]})})]}),s&&a.jsx(KZ,{feature:e.find(O=>O.id===s),onClose:()=>i(null)})]})}function YZ({navigate:e,votingSession:t}){return a.jsx("div",{className:"relative z-10 flex flex-col items-center justify-center min-h-[80vh] p-6",children:a.jsxs("div",{className:"relative z-10 w-full max-w-md bg-white rounded-lg shadow-lg p-8 text-center",children:[a.jsx("img",{src:$a,alt:"New Millennium Building Systems Logo",className:"mx-auto mb-6",style:{maxWidth:"200px",height:"auto"}}),a.jsx("div",{className:"w-20 h-20 bg-[#1E5461]/10 rounded-full flex items-center justify-center mx-auto mb-6",children:a.jsx(Mr,{className:"h-12 w-12 text-[#1E5461]"})}),a.jsx("h1",{className:"text-3xl font-bold text-[#1E5461] mb-4",children:"Thank You!"}),a.jsxs("p",{className:"text-gray-700 text-lg mb-6",children:["Your votes for ",a.jsx("span",{className:"font-semibold",children:t.title})," have been submitted successfully."]}),a.jsx("p",{className:"text-gray-600 mb-8",children:"We appreciate your input in helping prioritize features for our product roadmap."}),a.jsx(jt,{variant:"primary",onClick:()=>e("/sessions"),className:"mx-auto",children:"View All Voting Sessions"})]})})}function QI({currentRole:e="stakeholder",onSelectStakeholder:t,onSelectSessionAdmin:r,onSelectSystemAdmin:n,showRoleToggle:s=!0,isSessionAdmin:i=!1}){const l=new Date().getFullYear(),u=[];(t||e==="stakeholder")&&u.push({key:"stakeholder",label:"Stakeholder View",icon:a.jsx(Qn,{className:"h-4 w-4 inline mr-2"}),onClick:t}),(r||e==="session-admin")&&u.push({key:"session-admin",label:"Session Admin",icon:a.jsx(Rr,{className:"h-4 w-4 inline mr-2"}),onClick:r}),!i&&(n||e==="system-admin")&&u.push({key:"system-admin",label:"System Admin",icon:a.jsx(Br,{className:"h-4 w-4 inline mr-2"}),onClick:n});const d=["stakeholder","session-admin","system-admin"];u.sort((f,p)=>{const v=d.indexOf(f.key),x=d.indexOf(p.key);return v-x});const m=s&&u.length>0;return a.jsx("footer",{className:"mt-auto bg-gray-50 border-t border-gray-200",children:a.jsxs("div",{className:"container mx-auto px-4 py-6 max-w-6xl",children:[m&&a.jsx("div",{className:"flex justify-center mb-6",children:a.jsx("div",{className:"inline-flex items-center bg-gray-100 rounded-lg p-1",children:u.map(({key:f,label:p,icon:v,onClick:x})=>{const b=e===f,S=!x;return a.jsxs("button",{onClick:x,disabled:S,className:`px-4 py-2 rounded-md text-sm font-medium transition-colors flex items-center ${b?"bg-white text-[#2d4660] shadow-sm":"text-gray-600 hover:text-gray-900"} ${S&&!b?"opacity-60 cursor-not-allowed":""}`,children:[v,a.jsx("span",{children:p})]},f)})})}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 text-sm text-gray-600",children:[a.jsxs("div",{children:[a.jsx("h3",{className:"font-semibold text-gray-900 mb-2",children:"New Millennium Building Systems"}),a.jsxs("p",{className:"text-xs leading-relaxed",children:["A Steel Dynamics Company",a.jsx("br",{}),"Innovation in structural steel manufacturing"]})]}),a.jsxs("div",{children:[a.jsx("h3",{className:"font-semibold text-gray-900 mb-2",children:"Quick Links"}),a.jsxs("ul",{className:"space-y-1 text-xs",children:[a.jsx("li",{children:a.jsx("a",{href:"https://www.steeldynamics.com",target:"_blank",rel:"noopener noreferrer",className:"hover:text-[#2d4660] transition-colors",children:"Steel Dynamics Inc."})}),a.jsx("li",{children:a.jsx("a",{href:"https://www.newmill.com",target:"_blank",rel:"noopener noreferrer",className:"hover:text-[#2d4660] transition-colors",children:"New Millennium"})})]})]}),a.jsxs("div",{children:[a.jsx("h3",{className:"font-semibold text-gray-900 mb-2",children:"Need Help?"}),a.jsx("p",{className:"text-xs",children:"Contact your Product Owner or session administrator for assistance with voting."})]})]}),a.jsx("div",{className:"mt-6 pt-6 border-t border-gray-200 text-center text-xs text-gray-500",children:a.jsxs("p",{children:[" ",l," New Millennium Building Systems, LLC. All rights reserved."]})})]})})}function MC({feature:e,onSubmit:t,onCancel:r}){const{register:n,handleSubmit:s,formState:{errors:i}}=Cd({defaultValues:e?{title:e.title,description:e.description,epic:e.epic}:{epic:RC[0]}});return a.jsxs("form",{onSubmit:s(t),children:[a.jsxs("div",{className:"mb-4",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Title"}),a.jsx("input",{...n("title",{required:"Title is required"}),className:"w-full px-3 py-2 border border-gray-300 rounded-md"}),i.title&&a.jsx("p",{className:"mt-1 text-sm text-red-600",children:i.title.message})]}),a.jsxs("div",{className:"mb-4",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),a.jsx("textarea",{...n("description",{required:"Description is required"}),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-md"}),i.description&&a.jsx("p",{className:"mt-1 text-sm text-red-600",children:i.description.message})]}),a.jsxs("div",{className:"mb-4",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Epic"}),a.jsx("select",{...n("epic",{required:"Epic is required"}),className:"w-full px-3 py-2 border border-gray-300 rounded-md bg-white",children:RC.map(l=>a.jsx("option",{value:l,children:l},l))}),i.epic&&a.jsx("p",{className:"mt-1 text-sm text-red-600",children:i.epic.message})]}),a.jsxs("div",{className:"flex justify-end space-x-2 mt-6",children:[a.jsx(jt,{variant:"secondary",type:"button",onClick:r,children:"Cancel"}),a.jsxs(jt,{variant:"primary",type:"submit",children:[e?"Update":"Add"," Feature"]})]})]})}function JZ({currentUser:e,votingSession:t,onChangeVotes:r,onToggleAdmin:n,isAdmin:s,navigate:i,userVotes:l,features:u,isSystemAdmin:d,isSessionAdmin:m,isStakeholder:f,currentRole:p=d?"system-admin":m?"session-admin":"stakeholder"}){const[v,x]=y.useState(!1),b=Object.values(l).reduce((j,N)=>j+N,0),S=u.filter(j=>l[j.id]>0);return a.jsxs("div",{className:"container mx-auto p-4 max-w-6xl min-h-screen pb-8",children:[a.jsx("div",{className:"hidden md:flex md:justify-center mb-2",children:a.jsx("img",{src:$a,alt:"New Millennium Building Systems Logo",className:"-mt-4 cursor-pointer hover:opacity-80 transition-opacity",style:{height:"96px",width:"auto"},onClick:()=>i("/sessions")})}),a.jsxs("div",{className:"flex flex-col md:flex-row md:justify-between md:items-center mb-6",children:[a.jsxs("div",{className:"flex items-start md:items-center",children:[a.jsx(Ip,{src:Jl,alt:"New Millennium Building Systems Logo",className:"mr-4 md:hidden",style:{width:"40px",height:"40px",objectFit:"contain"}}),a.jsxs("div",{children:[a.jsx("h1",{className:"text-2xl font-bold text-[#2d4660] md:text-3xl",children:"Feature Voting"}),a.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:["Welcome, ",e==null?void 0:e.name,_b(d,m,f,p)]})]})]}),a.jsxs("div",{className:"relative z-10 flex items-center space-x-2 mt-3 md:mt-0 md:justify-end",children:[s&&a.jsxs(jt,{variant:"primary",onClick:n,className:"flex items-center",children:[a.jsx(Ks,{className:"mr-2 h-4 w-4"}),a.jsx("span",{className:"hidden md:inline",children:"Admin Dashboard"}),a.jsx("span",{className:"md:hidden",children:"Admin"})]}),a.jsxs(jt,{variant:"gray",onClick:()=>i("/sessions"),className:"flex items-center",children:[a.jsx(pi,{className:"mr-2 h-4 w-4"}),a.jsx("span",{className:"hidden md:inline",children:"All Sessions"}),a.jsx("span",{className:"md:hidden",children:"Sessions"})]})]})]}),a.jsx("div",{className:"max-w-3xl mx-auto",children:a.jsxs("div",{className:"relative z-10 bg-white rounded-lg shadow-lg p-8 text-center",children:[a.jsx("div",{className:"w-20 h-20 bg-[#1E5461]/10 rounded-full flex items-center justify-center mx-auto mb-6",children:a.jsx(Mr,{className:"h-12 w-12 text-[#1E5461]"})}),a.jsx("h2",{className:"text-3xl font-bold text-[#1E5461] mb-4",children:"Votes Already Submitted"}),a.jsxs("p",{className:"text-gray-700 text-lg mb-2",children:["Welcome back, ",a.jsx("span",{className:"font-semibold",children:e.name}),"!"]}),a.jsxs("p",{className:"text-gray-600 mb-6",children:["You have already submitted your votes for ",a.jsx("span",{className:"font-semibold",children:t.title}),"."]}),a.jsxs("div",{className:"bg-gray-50 rounded-lg p-6 mb-6",children:[a.jsx("h3",{className:"text-lg font-semibold text-[#2d4660] mb-4",children:"Your Current Votes"}),a.jsxs("div",{className:"space-y-3",children:[S.map(j=>a.jsxs("div",{className:"flex justify-between items-start gap-4",children:[a.jsxs("div",{children:[a.jsx("span",{className:"block text-gray-700 font-medium",children:j.title}),j.epic&&a.jsx("div",{className:"mt-1",children:a.jsx(Bl,{name:j.epic,truncateAt:null,className:"text-xs bg-[#1E5461]/10 px-2 py-0.5 rounded"})})]}),a.jsxs("span",{className:"bg-[#1E5461]/10 text-[#1E5461] rounded-full px-3 py-1 font-medium self-center",children:[l[j.id]," ",l[j.id]===1?"vote":"votes"]})]},j.id)),a.jsx("div",{className:"border-t border-gray-200 pt-3 mt-3",children:a.jsxs("div",{className:"flex justify-between items-center font-semibold",children:[a.jsx("span",{className:"text-[#2d4660]",children:"Total Votes"}),a.jsx("span",{className:"text-[#2d4660]",children:b})]})})]})]}),a.jsx("div",{className:"bg-[#C89212]/10 border border-[#C89212]/20 rounded-lg p-4 mb-6",children:a.jsxs("div",{className:"flex items-start text-left",children:[a.jsx(zF,{className:"h-5 w-5 text-[#C89212] mr-3 mt-0.5 flex-shrink-0"}),a.jsx("div",{children:a.jsxs("p",{className:"text-sm text-gray-700",children:["If you'd like to change your votes, you can do so below. However, please note that this will",a.jsx("span",{className:"font-semibold",children:" permanently remove your previous votes"})," and allow you to vote again. This action cannot be undone."]})})]})}),a.jsxs(jt,{variant:"gold",onClick:()=>x(!0),className:"mx-auto text-lg py-3 px-8",children:[a.jsx(Ko,{className:"mr-2 h-5 w-5"}),"Change My Votes"]})]})}),a.jsx(Oh,{show:v,title:"Change Your Votes?",message:"This will permanently remove all your previous votes for this session and allow you to vote again. This action cannot be undone. Are you sure you want to continue?",onConfirm:r,onCancel:()=>x(!1),confirmText:"Yes, Change My Votes",cancelText:"Cancel",type:"reset"})]})}const FC=Nt.memo(function({features:t,currentUser:r,pendingVotes:n,pendingUsedVotes:s,onVote:i,onSubmitVotes:l,onToggleAdmin:u,isAdmin:d,votingSession:m,navigate:f,effectiveVotesPerUser:p,sessionId:v,onLogout:x,onSuggestionSubmitted:b,isSystemAdmin:S,isSessionAdmin:j,isStakeholder:N,currentRole:E=S?"system-admin":j?"session-admin":"stakeholder"}){const[C,I]=y.useState([...t]),[T,O]=y.useState(!1),[V,F]=y.useState("idle"),[L,H]=y.useState(!1),[le,K]=y.useState({}),[ie,q]=y.useState(!0),[G,ve]=y.useState(!1),[M,Y]=y.useState(!1),[ce,he]=y.useState(""),[U,re]=y.useState(""),[pe,$e]=y.useState(""),[de,ke]=y.useState(""),[Te,Ve]=y.useState(!1),[J,je]=y.useState(null),[fe,se]=y.useState(!1),[Ze,Ge]=y.useState(!1),[Ue,At]=y.useState([]),[gt,wt]=y.useState([]),Yt=y.useRef(null),z=y.useRef(null);y.useEffect(()=>{if(!G)return;const ze=Le=>{z.current&&!z.current.contains(Le.target)&&ve(!1)};return document.addEventListener("mousedown",ze),document.addEventListener("touchstart",ze,{passive:!0}),()=>{document.removeEventListener("mousedown",ze),document.removeEventListener("touchstart",ze)}},[G]),y.useEffect(()=>{I([...t])},[t]),y.useEffect(()=>{async function ze(){if(!r||!v){q(!1);return}try{const ct=(await Mo(v)).filter(at=>at.user_id===r.id);if(ct.length>0){const at={};ct.forEach(Je=>{at[Je.feature_id]=Je.vote_count}),K(at),H(!0)}else H(!1),K({})}catch(Le){console.error("Error checking existing votes:",Le),H(!1)}finally{q(!1)}}ze()},[r,v]);const W=y.useCallback(async()=>{if(!(!r||!v))try{await C6(v,r.id),H(!1),K({})}catch(ze){console.error("Error changing votes:",ze),alert("Failed to reset votes. Please try again.")}},[r,v]),ee=y.useCallback(()=>{T||(O(!0),F("fadeOut"),setTimeout(()=>{F("rearranging"),setTimeout(()=>{I(UZ(t)),F("fadeIn"),setTimeout(()=>{F("idle"),O(!1)},400)},200)},400))},[t,T]),Se=y.useCallback(async ze=>{const Le=t.find(ct=>ct.id===ze);if(!(!Le||!r||!v))try{const ct=Ce.supabaseUrl,at=Ce.supabaseKey,Je=await fetch(`${ct}/functions/v1/create-info-request`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${at}`},body:JSON.stringify({session_id:v,feature_id:ze,feature_title:Le.title,requester_id:r.id,requester_name:r.name||"",requester_email:r.email||"",session_name:m.title,feature_description:Le.description})});if(!Je.ok){const Wt=await Je.json().catch(()=>({error:"Unknown error"}));throw new Error(Wt.error||`HTTP ${Je.status}`)}const Ct=await Je.json();if(console.log("Info request created successfully:",Ct),Ct.adminEmails&&Ct.adminEmails.length>0&&Ct.emailContent){const Wt=window.location.pathname.startsWith("/feature-voting-app")?"/feature-voting-app":"",rr=`${window.location.origin}${Wt}/admin?session=${Ct.emailContent.sessionId}&feature=${Ct.emailContent.featureId}`,sr=Ct.emailContent.html.replace("{{ADMIN_DASHBOARD_URL}}",rr),rt=Ct.emailContent.text.replace("{{ADMIN_DASHBOARD_URL}}",rr),Ht=Ct.adminEmails.map(Ft=>Kc({to:Ft,subject:Ct.emailContent.subject,html:sr,text:rt}).catch(vt=>(console.error(`Failed to send email to ${Ft}:`,vt),null)));await Promise.all(Ht),console.log(`Emails sent to ${Ct.adminEmails.length} session admin(s)`)}}catch(ct){console.error("Error submitting info request:",ct);const at=(ct==null?void 0:ct.message)||(ct==null?void 0:ct.toString())||"Unknown error";throw console.error("Full error details:",ct),alert(`Failed to submit request: ${at}. Please try again.`),ct}},[t,r,v,m]),Ne=y.useCallback(()=>{je(null),se(!1),Y(!0)},[]),Ee=y.useCallback(()=>{Te||(gt.forEach(ze=>{ze&&URL.revokeObjectURL(ze)}),Y(!1),je(null),se(!1),he(""),re(""),$e(""),ke(""),At([]),wt([]),Yt.current&&(Yt.current.value=""))},[Te,gt]),qe=y.useCallback(ze=>{const Le=Array.from(ze.target.files||[]),ct=[],at=[],Je=["image/jpeg","image/jpg","image/png","image/gif","image/webp","application/pdf"];Le.forEach(sr=>{Je.includes(sr.type)&&(ct.push(sr),sr.type.startsWith("image/")?at.push(URL.createObjectURL(sr)):at.push(""))});const Ct=3-Ue.length,Wt=ct.slice(0,Ct),rr=at.slice(0,Ct);At(sr=>[...sr,...Wt]),wt(sr=>[...sr,...rr]),Yt.current&&(Yt.current.value="")},[Ue]),Fe=y.useCallback(ze=>{At(Le=>{const ct=Le[ze];return ct&&ct.type.startsWith("image/")?wt(at=>{const Je=at[ze];return Je&&URL.revokeObjectURL(Je),at.filter((Ct,Wt)=>Wt!==ze)}):wt(at=>at.filter((Je,Ct)=>Ct!==ze)),Le.filter((at,Je)=>Je!==ze)})},[]);y.useEffect(()=>()=>{gt.forEach(ze=>{ze&&URL.revokeObjectURL(ze)})},[gt]);const Mt=y.useCallback(async ze=>{var Ct,Wt;ze.preventDefault();const Le=ce.trim(),ct=U.trim(),at=pe.trim(),Je=de.trim();if(!Le){je("Please provide a brief title for your suggestion.");return}if(!v){je("Unable to link this suggestion to the current session.");return}try{Ve(!0),je(null);const rr=[];if(Ue.length>0)for(let rt=0;rt<Ue.length;rt++){const Ht=Ue[rt],Ft=Ht.name.split(".").pop(),vt=`${Date.now()}-${rt}.${Ft}`,ir=`suggestions/${v}/${vt}`;try{const{data:yr,error:hr}=await Ce.storage.from("feature-attachments").upload(ir,Ht,{cacheControl:"3600",upsert:!1});if(hr)console.error("Error uploading file:",hr),((Ct=hr.message)!=null&&Ct.includes("Bucket not found")||(Wt=hr.message)!=null&&Wt.includes("not found"))&&console.warn('Storage bucket "feature-attachments" not found. Please create it in Supabase Storage.');else{const{data:{publicUrl:Fr}}=Ce.storage.from("feature-attachments").getPublicUrl(ir);rr.push(Fr)}}catch(yr){console.error("Error uploading file:",yr)}}const sr=await O6({session_id:v,title:Le,description:ct||null,requester_id:(r==null?void 0:r.id)??null,requester_name:(r==null?void 0:r.name)??null,requester_email:(r==null?void 0:r.email)??null,whatWouldItDo:at||null,howWouldItWork:Je||null,attachment_urls:rr.length>0?rr:null});try{const Ht=(await Wm(v)).map(Ft=>{var vt;return(vt=Ft.user)==null?void 0:vt.email}).filter(Ft=>!!Ft);if(Ht.length>0){const Ft=(m==null?void 0:m.title)||"this session",vt=(r==null?void 0:r.name)||"A user",ir=(r==null?void 0:r.email)||"",yr="https://dcchoffman.github.io/feature-voting-app/New-Millennium-color-logo1.png",hr=window.location.pathname.startsWith("/feature-voting-app")?"/feature-voting-app":"",Fr=`${window.location.origin}${hr}/admin`,Jt=nr=>nr.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;"),mr=nr=>Jt(nr).replace(/\n/g,"<br />"),rs=`
<table width="100%" cellpadding="0" cellspacing="0" border="0" style="background-color: #f9fafb; font-family: Arial, sans-serif;">
  <tr>
    <td align="center" style="padding: 48px 20px;">
      <table width="600" cellpadding="0" cellspacing="0" border="0" style="background-color: #ffffff; border-radius: 8px; box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);">
        <!-- Logo Header -->
        <tr>
          <td style="background-color: #ffffff; padding: 32px 40px 24px 40px; text-align: center;">
            <img src="${yr}" alt="New Millennium Building Systems" width="300" height="96" style="height: 96px; width: auto; max-width: 300px; display: block; margin: 0 auto; border: 0;" />
            <div style="font-size: 20px; font-weight: bold; color: #2d4660; margin-top: 16px;">Feature Voting System</div>
            <div style="font-size: 11px; color: #6b7280; margin-top: 4px;">has a</div>
            <div style="font-size: 25px; font-weight: bold; color: #2d4660; margin-top: 4px;">New Feature Suggestion</div>
            <div style="font-size: 11px; color: #6b7280; margin-top: 4px;">for the</div>
            <div style="font-size: 30px; font-weight: bold; color: #2d4660; margin-top: 4px;">${Jt(Ft)}</div>
          </td>
        </tr>
        
        <!-- Main Content -->
        <tr>
          <td style="background-color: #ffffff; padding: 40px;">
            <p style="margin: 0 0 16px 0; font-size: 16px; color: #333; line-height: 1.6;">
              <strong style="color: #2d4660;">${Jt(vt)}</strong>${ir?` (${Jt(ir)})`:""} has submitted a new feature suggestion.
            </p>
            
            <!-- Suggestion Details Box -->
            <div style="background-color: #f3f4f6; padding: 20px; border-radius: 6px; margin: 24px 0; border-left: 4px solid #C89212;">
              <h3 style="color: #2d4660; margin: 0 0 16px 0; font-size: 18px; font-weight: bold;">${Jt(Le)}</h3>
              
              ${ct?`
              <p style="margin: 0 0 12px 0; font-size: 14px; color: #111827; line-height: 1.6;">
                <strong style="color: #2d4660;">Problem it solves:</strong><br />
                <span style="color: #374151;">${mr(ct)}</span>
              </p>
              `:""}
              
              ${at?`
              <p style="margin: 0 0 12px 0; font-size: 14px; color: #111827; line-height: 1.6;">
                <strong style="color: #2d4660;">What it would do:</strong><br />
                <span style="color: #374151;">${mr(at)}</span>
              </p>
              `:""}
              
              ${Je?`
              <p style="margin: 0 0 12px 0; font-size: 14px; color: #111827; line-height: 1.6;">
                <strong style="color: #2d4660;">How it would work:</strong><br />
                <span style="color: #374151;">${mr(Je)}</span>
              </p>
              `:""}
              
              ${rr.length>0?`
              <p style="margin: 12px 0 0 0; font-size: 14px; color: #111827; line-height: 1.6;">
                <strong style="color: #2d4660;">Attachments:</strong> ${rr.length} file(s) - View on admin page
              </p>
              `:""}
            </div>
            
            <!-- Go to Admin Dashboard Button -->
            <table width="100%" cellpadding="0" cellspacing="0" border="0" style="margin: 32px 0;">
              <tr>
                <td align="center">
                  <a href="${Fr}" style="display: inline-block; padding: 12px 24px; background-color: #C89212; color: white; text-decoration: none; border-radius: 6px; font-weight: 600; font-size: 16px; box-shadow: 0 1px 2px 0 rgba(0, 0, 0, 0.05);">Go to Admin Dashboard</a>
                </td>
              </tr>
            </table>
            
            <p style="margin: 24px 0 0 0; font-size: 14px; color: #6b7280; line-height: 1.6;">
              You can review and manage this suggestion from the admin dashboard.
            </p>
          </td>
        </tr>
        
        <!-- Footer -->
        <tr>
          <td style="background-color: #f9fafb; padding: 20px; text-align: center; border-top: 1px solid #e5e7eb; font-size: 12px; color: #6b7280;">
            <p style="margin: 0 0 8px 0;">This is an automated message from the Feature Voting System.</p>
            <p style="margin: 0; color: #9ca3af;"> ${new Date().getFullYear()} New Millennium Building Systems</p>
          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>`;await Promise.all(Ht.map(nr=>Kc({to:nr,subject:`New Feature Suggestion: ${Le}`,html:rs}).catch(bn=>{console.error(`Failed to send email to ${nr}:`,bn)})))}}catch(rt){console.error("Error sending admin emails:",rt)}b==null||b(sr),Y(!1),he(""),re(""),$e(""),ke(""),At([]),wt([]),Yt.current&&(Yt.current.value=""),Ge(!0)}catch(rr){console.error("Error submitting feature suggestion:",rr),je("We were unable to submit your suggestion. Please try again in a moment.")}finally{Ve(!1)}},[U,ce,pe,de,Ue,r,v,m,b]);if(!r)return null;if(ie)return a.jsx("div",{className:"container mx-auto p-4 max-w-6xl min-h-screen flex items-center justify-center",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-[#2d4660] mx-auto mb-4"}),a.jsx("p",{className:"text-gray-600",children:"Loading your voting status..."})]})});if(L)return a.jsx(JZ,{currentUser:r,votingSession:m,onChangeVotes:W,onToggleAdmin:u,isAdmin:d,navigate:f,userVotes:le,features:t,isSystemAdmin:S,isSessionAdmin:j,isStakeholder:N,currentRole:E});const We=p-s,yt=We===0,kt=m.isActive;return a.jsxs("div",{className:"container mx-auto p-4 max-w-6xl pb-8",children:[a.jsx("div",{className:"hidden md:flex md:justify-center mb-2",children:a.jsx("img",{src:$a,alt:"New Millennium Building Systems Logo",className:"-mt-4 cursor-pointer hover:opacity-80 transition-opacity",style:{height:"96px",width:"auto"},onClick:()=>f("/sessions")})}),a.jsxs("div",{className:"flex justify-between items-start md:items-center mb-6",children:[a.jsxs("div",{className:"flex items-start md:items-center",children:[a.jsx(Ip,{src:Jl,alt:"New Millennium Building Systems Logo",className:"mr-4 md:hidden",style:{width:"40px",height:"40px",objectFit:"contain"}}),a.jsxs("div",{children:[a.jsx("h1",{className:"text-2xl font-bold text-[#2d4660] md:text-3xl",children:"Feature Voting"}),a.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:["Welcome, ",r==null?void 0:r.name,_b(S,j,N,E)]})]})]}),a.jsxs("div",{ref:z,className:"relative z-40 flex items-start md:items-center",children:[a.jsxs("div",{className:"hidden md:flex items-center space-x-2",children:[d&&a.jsxs(jt,{variant:"primary",onClick:u,className:"flex items-center",children:[a.jsx(Ks,{className:"mr-2 h-4 w-4"}),"Admin Dashboard"]}),a.jsx(jt,{variant:"gray",onClick:()=>f("/sessions"),className:"flex items-center",children:"All Sessions"}),a.jsxs("button",{onClick:x,className:`flex items-center justify-center bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-colors ${E==="stakeholder"?"px-4 py-2":"p-2 w-10 h-10"}`,title:"Logout",children:[a.jsx(pi,{className:"h-4 w-4"}),E==="stakeholder"&&a.jsx("span",{className:"ml-2",children:"Logout"})]})]}),a.jsx("div",{className:"flex md:hidden",children:a.jsx("button",{onClick:()=>ve(!G),className:"p-2 rounded-md border border-gray-200 bg-white shadow-sm","aria-label":"Open menu",children:a.jsx(ta,{className:"h-5 w-5 text-gray-700"})})}),G&&a.jsx("div",{className:"absolute right-0 mt-2 w-56 bg-white border border-gray-200 rounded-lg shadow-lg md:hidden z-50",children:a.jsxs("div",{className:"py-1",children:[d&&a.jsxs("button",{onClick:()=>{ve(!1),u()},className:"w-full px-3 py-2 flex items-center text-left hover:bg-gray-50",children:[a.jsx(Ks,{className:"h-4 w-4 mr-2 text-gray-700"}),"Admin Dashboard"]}),a.jsx("button",{onClick:()=>{ve(!1),f("/sessions")},className:"w-full px-3 py-2 flex items-center text-left hover:bg-gray-50",children:"All Sessions"}),a.jsxs("button",{onClick:()=>{ve(!1),x()},className:`w-full px-3 py-2 flex items-center hover:bg-gray-50 ${E==="stakeholder"?"text-left":"justify-center"}`,title:"Logout",children:[a.jsx(pi,{className:"h-4 w-4 text-gray-700"}),E==="stakeholder"&&a.jsx("span",{className:"ml-2 text-base text-gray-700",children:"Logout"})]})]})})]})]}),a.jsxs("div",{className:"relative z-10 mb-6",children:[a.jsx("div",{className:"flex items-center justify-between mb-4",children:a.jsx("div",{children:a.jsxs("h2",{className:"text-xl font-semibold text-[#2D4660]",children:["Current Session: ",m.product_name&&a.jsxs("span",{className:"text-[#1E5461]",children:[m.product_name," - "]}),a.jsx("span",{className:"text-[#1E5461]",children:m.title})]})})}),m.goal&&m.goal.trim()&&a.jsx("div",{className:"pt-3 mb-4",children:a.jsxs("div",{className:"relative overflow-hidden rounded-2xl border border-[#C89212]/30 bg-gradient-to-r from-[#FFF6E3] via-[#FFF9ED] to-white shadow-sm p-5 md:p-6",children:[a.jsx("span",{className:"pointer-events-none absolute -top-10 left-4 h-32 w-32 rounded-full bg-[#C89212]/25 blur-3xl"}),a.jsx("span",{className:"pointer-events-none absolute -bottom-16 right-6 h-40 w-40 rounded-full bg-[#F4C66C]/20 blur-3xl"}),a.jsx("span",{className:"pointer-events-none absolute top-6 right-10 text-[#F4B400] text-xl animate-ping",children:""}),a.jsx("span",{className:"pointer-events-none absolute bottom-8 left-10 text-[#C89212] text-lg animate-pulse",children:""}),a.jsx("div",{className:"relative flex flex-col gap-6 md:flex-row md:items-start md:justify-between",children:a.jsxs("div",{className:"flex items-start gap-5 md:pr-8 lg:pr-12",children:[a.jsxs("div",{className:"relative",children:[a.jsx("div",{className:"h-16 w-16 md:h-20 md:w-20 rounded-full bg-white shadow-lg shadow-[#C89212]/30 border border-[#C89212]/40 flex items-center justify-center text-[#C89212]",children:a.jsx(Xm,{className:"h-8 w-8 md:h-10 md:w-10"})}),a.jsx("span",{className:"pointer-events-none absolute -top-3 -left-2 text-[#C89212] text-base animate-ping",children:""}),a.jsx("span",{className:"pointer-events-none absolute bottom-0 -right-3 text-[#F5D79E] text-xl animate-pulse",children:""})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-xs font-semibold uppercase tracking-[0.2em] text-[#C89212]/80 mb-1",children:"Session Goal"}),a.jsx("h3",{className:"text-lg md:text-xl font-semibold text-[#2D4660] leading-relaxed",children:m.goal})]})]})})]})}),(()=>{const ze=$m(m.endDate),Le=Rm(ze),ct=Nb(ze);return a.jsx("div",{className:`${ct} rounded-md p-3 md:p-4 border ${ze<=2?"border-[#6A4234]/20":ze<=4?"border-[#C89212]/20":"border-[#1E5461]/20"}`,children:a.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-3 md:gap-4",children:[a.jsxs("div",{className:"flex items-center flex-shrink-0",children:[a.jsx(An,{className:`h-5 w-5 mr-2 ${Le}`}),a.jsxs("div",{className:"leading-tight",style:{marginTop:"10px"},children:[a.jsxs("span",{className:`font-medium ${Le}`,children:["Voting ends: ",ea(m.endDate)]}),a.jsx("div",{className:"text-sm -mt-0.5",style:{marginLeft:"100px",marginTop:"-6px"},children:ze<=0?a.jsx("span",{className:"text-red-600 font-medium",children:"Voting ends today!"}):a.jsxs("span",{className:`${Le}`,children:[a.jsx("span",{className:"font-semibold text-lg",children:ze})," ",ze===1?"day":"days"," remaining"]})})]})]}),a.jsx("div",{className:"flex items-center justify-center md:justify-end flex-1 min-w-0",children:a.jsx("div",{className:"leading-tight",children:a.jsxs("div",{className:"flex items-center justify-center md:justify-start",children:[a.jsx(Ln,{className:`h-[30px] w-[30px] mr-2 ${Le}`}),a.jsxs("div",{className:"text-sm -mt-0.5 leading-none",children:[a.jsxs("div",{className:"flex items-baseline justify-center md:justify-start",style:{marginRight:"60px"},children:[a.jsx("span",{className:`${Le} mr-1`,style:{fontSize:"14px"},children:"You have"}),a.jsx("span",{className:`${Le} font-semibold text-2xl`,children:We}),a.jsxs("span",{className:`${Le} font-semibold text-lg ml-1`,children:["/ ",p]})]}),a.jsx("span",{className:`${Le} block -mt-0.5 text-center`,style:{fontSize:"14px"},children:"votes remaining"})]})]})})})]})})})()]}),!kt&&a.jsx("div",{className:"mb-6 bg-[#C89212]/10 p-4 rounded-lg border border-[#C89212]/20",children:a.jsxs("div",{className:"flex items-center text-[#6A4234]",children:[a.jsx(Vx,{className:"h-5 w-5 mr-2"}),a.jsxs("span",{className:"font-medium",children:["Voting is currently ",_a(m.endDate)?"closed":"not yet open",".",_a(m.endDate)?` Voting ended on ${ea(m.endDate)}.`:` Voting will open on ${ea(m.startDate)}.`]})]})}),a.jsxs("div",{className:"flex flex-col md:flex-row md:justify-between md:items-center mb-4 gap-3",children:[a.jsx("h2",{className:"text-xl font-semibold text-[#2d4660]",children:"Available Features"}),a.jsxs("div",{className:"flex flex-col md:flex-row items-stretch md:items-center gap-3",children:[a.jsxs(jt,{variant:"gold",onClick:Ne,className:"flex items-center justify-center w-full md:w-auto",children:[a.jsx(Ym,{className:"h-4 w-4 mr-2"}),"Suggest a Feature"]}),t.length>6&&a.jsx(qZ,{isShuffling:T,onShuffle:ee})]})]}),a.jsx("div",{className:`grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 ${s>0?"mb-32":""}`,children:C.map(ze=>{const Le=n[ze.id]||0;return a.jsx(HZ,{feature:ze,userVoteCount:Le,remainingVotes:We,votingIsActive:kt,onVote:i,isShuffling:T,shuffleStage:V,currentUser:r,onRequestInfo:Se},ze.id)})}),s>0&&(()=>{const ze=$m(m.endDate),Le=Rm(ze),ct=LZ(ze);return a.jsx("div",{className:`fixed bottom-0 left-0 right-0 ${ct} rounded-t-md border-t ${ze<=2?"border-[#6A4234]/20":ze<=4?"border-[#C89212]/20":"border-[#1E5461]/20"} p-3 md:p-4 z-50`,children:a.jsxs("div",{className:"container mx-auto max-w-6xl flex items-center justify-center",children:[a.jsx("div",{className:"flex items-center flex-1 min-w-0 justify-center",style:{paddingLeft:"60px",width:"100px"},children:a.jsx("div",{className:"leading-tight w-full",style:{width:"120px"},children:a.jsxs("div",{className:"flex items-center",children:[a.jsx(Ln,{className:`h-[30px] w-[30px] mr-2 ${Le}`,style:{marginLeft:"-88px"}}),a.jsxs("div",{className:"text-sm -mt-0.5 leading-none flex-1",children:[a.jsxs("div",{className:"flex items-baseline justify-center",style:{marginLeft:"-12px"},children:[a.jsx("span",{className:`${Le} mr-1`,style:{fontSize:"14px",marginLeft:"-48px"},children:"You have"}),a.jsx("span",{className:`${Le} font-semibold text-2xl`,children:We}),a.jsxs("span",{className:`${Le} font-semibold text-lg ml-1`,children:["/ ",p]})]}),a.jsx("span",{className:`${Le} block -mt-0.5 text-center`,style:{fontSize:"14px"},children:"votes remaining"})]})]})})}),a.jsx("button",{onClick:l,className:`py-3 px-6 rounded-lg font-medium cursor-pointer ${yt?"bg-[#1E5461] hover:bg-[#173B65] text-white":"bg-gray-300 text-gray-600 cursor-not-allowed"}`,disabled:!yt,children:"Submit Votes"})]})})})(),a.jsx(yn,{isOpen:M,onClose:Ee,title:"Suggest a Feature",maxWidth:"max-w-lg",children:a.jsxs("form",{onSubmit:Mt,className:"space-y-4",children:[a.jsxs("div",{className:"bg-[#1E5461]/10 border border-[#1E5461]/30 text-sm text-[#1E5461] rounded-md px-3 py-2",children:["All suggested features will be reviewed for ",a.jsx("strong",{children:"future sessions"}),".",a.jsx("br",{}),"Suggestions will not be added to the current session."]}),J&&a.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 text-sm rounded-md px-3 py-2",children:J}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Feature title"}),a.jsx("input",{type:"text",value:ce,onChange:ze=>he(ze.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md",placeholder:"Give your feature a name",disabled:Te})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"What problem would this solve? (optional)"}),a.jsx("textarea",{value:U,onChange:ze=>re(ze.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md",rows:4,placeholder:"Share a few details so we understand the request.",disabled:Te})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"What would it do? (optional)"}),a.jsx("textarea",{value:pe,onChange:ze=>$e(ze.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md",rows:3,placeholder:"Describe the functionality or outcome users would experience.",disabled:Te})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"How would it work? (optional)"}),a.jsx("textarea",{value:de,onChange:ze=>ke(ze.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md",rows:3,placeholder:"Share any ideas on workflow, technical approach, or integration.",disabled:Te})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Attach Images or PDFs (optional, up to 3)"}),a.jsx("input",{ref:Yt,type:"file",accept:"image/*,.pdf",multiple:!0,onChange:qe,disabled:Te||Ue.length>=3,className:"hidden",id:"suggestion-file-input"}),a.jsxs("label",{htmlFor:"suggestion-file-input",className:`inline-flex items-center px-4 py-2 border border-gray-300 rounded-md cursor-pointer ${Te||Ue.length>=3?"bg-gray-100 text-gray-400 cursor-not-allowed":"bg-white text-gray-700 hover:bg-gray-50"}`,children:[a.jsx(Sl,{className:"h-4 w-4 mr-2"}),Ue.length>=3?"Maximum 3 files":"Attach Files"]}),Ue.length>0&&a.jsx("div",{className:"mt-3 flex flex-wrap gap-3",children:Ue.map((ze,Le)=>{const ct=ze.type.startsWith("image/"),at=ze.type==="application/pdf",Je=gt[Le]||null;return a.jsxs("div",{className:"relative group border border-gray-300 rounded-md overflow-hidden",style:{width:"100px",height:"100px"},children:[ct&&Je?a.jsx("img",{src:Je,alt:ze.name,className:"w-full h-full object-cover"}):at?a.jsx("div",{className:"w-full h-full flex items-center justify-center bg-red-50",children:a.jsx(Sl,{className:"h-8 w-8 text-red-600"})}):null,a.jsx("button",{type:"button",onClick:()=>Fe(Le),className:"absolute top-1 right-1 bg-red-500 text-white rounded-full p-1 opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center",style:{width:"20px",height:"20px"},"aria-label":`Remove ${ze.name}`,children:a.jsx(Ts,{className:"h-3 w-3"})}),a.jsx("div",{className:"absolute bottom-0 left-0 right-0 bg-black bg-opacity-50 text-white text-xs p-1 truncate",children:ze.name.length>15?`${ze.name.substring(0,15)}...`:ze.name})]},Le)})})]}),a.jsxs("div",{className:"flex justify-end gap-2",children:[a.jsx(jt,{type:"button",variant:"secondary",onClick:Ee,disabled:Te,children:"Close"}),a.jsxs(jt,{type:"submit",variant:"primary",disabled:Te,className:"flex items-center",children:[Te&&a.jsx(Ko,{className:"h-4 w-4 animate-spin mr-2"}),"Submit Suggestion"]})]})]})}),a.jsx(yn,{isOpen:Ze,onClose:()=>Ge(!1),title:"",maxWidth:"max-w-md",hideHeader:!0,children:a.jsxs("div",{className:"text-center py-6",children:[a.jsx("div",{className:"mx-auto flex items-center justify-center h-16 w-16 rounded-full bg-green-100 mb-4",children:a.jsx(Mr,{className:"h-10 w-10 text-green-600"})}),a.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Thank You!"}),a.jsx("p",{className:"text-gray-600 mb-1",children:"Your feature suggestion has been submitted successfully."}),a.jsx("p",{className:"text-sm text-gray-500",children:"The session admins have been notified and will review your suggestion."})]})})]})});function nv({defaultVotesPerUser:e=10,adminMode:t=!1,resultsMode:r=!1}){const{currentSession:n,currentUser:s,setCurrentUser:i,setCurrentSession:l,refreshSessions:u,isSystemAdmin:d,isAdmin:m,isStakeholder:f}=ql(),p=da(),[v]=Lm(),x=async()=>{try{await Ce.auth.signOut()}catch{}try{l(null)}catch{}i(null);try{localStorage.removeItem("voting_system_current_session"),localStorage.removeItem("azureDevOpsAuthInProgress"),sessionStorage.removeItem("oauth_return_path"),sessionStorage.removeItem("oauth_action")}catch{}p("/login",{replace:!0})};y.useEffect(()=>{const X=new URLSearchParams(window.location.search),be=X.has("code")||X.has("error"),Pe=localStorage.getItem("voting_system_current_session");!n&&!be&&!Pe&&p("/sessions")},[n,p]);const b=y.useMemo(()=>{const X=new URLSearchParams(window.location.search);return X.has("code")||X.has("error")},[]),[S,j]=y.useState([]),[N,E]=y.useState(!0),[C,I]=y.useState($Z),[T,O]=y.useState(r?"results":t||b?"admin":"voting"),[V,F]=y.useState(t||b||r),[L,H]=y.useState(null),[le,K]=y.useState(!1),[ie,q]=y.useState(null),[G,ve]=y.useState({...IZ,votesPerUser:e}),[M,Y]=y.useState(DZ),[ce,he]=y.useState(PC()),[U,re]=y.useState([]),[pe,$e]=y.useState([]),[de,ke]=y.useState([]),[Te,Ve]=y.useState(!1),[J,je]=y.useState(null),[fe,se]=y.useState(null),[Ze,Ge]=y.useState(!1),[Ue,At]=y.useState([]),[gt,wt]=y.useState([]),Yt=()=>{const X=v.get("perspective");if(X)return sessionStorage.setItem("adminPerspective",X),X;const be=sessionStorage.getItem("adminPerspective");if(be)return be;const Pe=sessionStorage.getItem("viewMode");return Pe==="system-admin"?(sessionStorage.setItem("adminPerspective","system"),"system"):Pe==="admin"?(sessionStorage.setItem("adminPerspective","session"),"session"):d?"system":"session"},[z,W]=y.useState(Yt());y.useEffect(()=>{const X=v.get("perspective");X&&X!==z&&(W(X),sessionStorage.setItem("adminPerspective",X))},[v,z]);const[ee,Se]=y.useState({}),[Ne,Ee]=y.useState(0),[qe,Fe]=y.useState({showReset:!1,showResetAll:!1,showDeleteSession:!1,targetId:null}),[Mt,We]=y.useState(!1),yt=y.useRef(!1),kt=y.useRef(!1),ze=y.useRef(null),Le=y.useMemo(()=>G.useAutoVotes?Math.max(1,Math.floor(S.length/2)):G.votesPerUser,[G.useAutoVotes,G.votesPerUser,S.length]),ct=y.useRef(!1);y.useEffect(()=>{if(ct.current){console.log("OAuth processing already in progress, skipping...");return}(async()=>{const be=new URLSearchParams(window.location.search),Pe=be.has("code")||be.has("error");if(Pe&&!n){console.log("OAuth callback detected, waiting for session to load..."),localStorage.getItem("voting_system_current_session")&&console.log("Found stored session ID, waiting for SessionContext to restore it...");return}if(localStorage.getItem("azureDevOpsAuthInProgress")&&localStorage.removeItem("azureDevOpsAuthInProgress"),!(!Pe||yt.current)){if(!n){console.log("No session available yet, waiting...");return}ct.current=!0,yt.current=!0,console.log("Processing OAuth callback with session:",n.id);try{const Xe=await yZ();if(Xe){const Ie=new Date(Date.now()+Xe.expiresIn*1e3).toISOString(),Lt={...M,accessToken:Xe.accessToken,refreshToken:Xe.refreshToken,tokenExpiresAt:Ie,enabled:!0,clientId:hi.clientId,tenantId:hi.tenantId};await gl(n.id,Lt),Y(Lt);const Dt=sessionStorage.getItem("oauth_return_path")||"/admin";sessionStorage.removeItem("oauth_return_path"),console.log("OAuth successful, navigating to:",Dt),p(Dt,{replace:!0})}}catch(Xe){console.error("OAuth callback error:",Xe),je("Failed to authenticate with Azure DevOps");const Ie="/admin";sessionStorage.removeItem("oauth_return_path"),p(Ie,{replace:!0})}finally{ct.current=!1}}})()},[n,p,M]),y.useEffect(()=>{r&&T!=="results"?O("results"):t&&T!=="admin"?O("admin"):!t&&!r&&T==="admin"&&O("voting")},[t,r,T]);const at=y.useCallback(X=>{localStorage.setItem("azureDevOpsAuthInProgress","true"),X&&sessionStorage.setItem("oauth_action",X),sessionStorage.getItem("oauth_return_path")||sessionStorage.setItem("oauth_return_path","/admin"),vZ()},[]),Je=y.useCallback(async X=>{if(!X.accessToken||!X.refreshToken||!X.tokenExpiresAt)throw new Error("Not authenticated");if(gZ(X.tokenExpiresAt)){const be=await lZ(X.refreshToken),Pe=new Date(Date.now()+be.expiresIn*1e3).toISOString(),Oe={...X,accessToken:be.accessToken,tokenExpiresAt:Pe};return n&&(await gl(n.id,Oe),Y(Oe)),be.accessToken}return X.accessToken},[n]),Ct=y.useCallback(async()=>{if(!n)return[];const[X,be]=await Promise.all([ja(n.id),Mo(n.id)]);return X.map(Pe=>{const Xe=be.filter(Lt=>Lt.feature_id===Pe.id).map(Lt=>({userId:Lt.user_id,name:Lt.user_name,email:Lt.user_email,voteCount:Lt.vote_count})),Ie=Xe.reduce((Lt,Dt)=>Lt+Dt.voteCount,0);return{id:Pe.id,title:Pe.title,description:Pe.description,epic:Pe.epic||null,epicId:Pe.epic_id||Pe.epicId||null,state:Pe.state,areaPath:Pe.area_path||Pe.areaPath||null,tags:Pe.tags||[],azureDevOpsId:Pe.azure_devops_id||Pe.azureDevOpsId||null,azureDevOpsUrl:Pe.azure_devops_url||Pe.azureDevOpsUrl||null,workItemType:Pe.workItemType||Pe.work_item_type||null,votes:Ie,voters:Xe}})},[n]),Wt=y.useCallback(async()=>{if(n)try{const X=await TS(n.id);At(X)}catch(X){console.error("Error loading feature suggestions:",X)}},[n]),rr=y.useCallback(async()=>{if(n)try{const X=await cu(),be=new Date,Pe=[];for(const Oe of X)if(!(Oe.id===n.id||new Date(Oe.start_date)<=be))try{await Lx(Oe.id)&&Pe.push({id:Oe.id,title:Oe.title,startDate:Oe.start_date})}catch{console.warn(`Session ${Oe.id} no longer exists, skipping from future sessions list`)}wt(Pe)}catch(X){console.error("Error loading future sessions:",X),wt([])}},[n]),sr=y.useCallback(X=>{At(be=>[X,...be]),Wt(),rr()},[Wt,rr]),rt=y.useCallback(async(X,be)=>{await I6(X,be),await Wt()},[Wt]),Ht=y.useCallback(async X=>{await D6(X),await Wt()},[Wt]),Ft=y.useCallback(async(X,be)=>{await $6(X,be),await Wt()},[Wt]),vt=y.useCallback(async X=>{await R6(X);const be=await Ct();j(be),await Wt()},[Ct,Wt]);y.useEffect(()=>{async function X(){if(n&&!(kt.current&&ze.current===n.id)){ze.current=n.id,kt.current=!0;try{E(!0);const[be,Pe]=await Promise.all([ja(n.id),Mo(n.id)]),Oe=be.map(Ie=>{const Dt=Pe.filter(_e=>_e.feature_id===Ie.id).map(_e=>({userId:_e.user_id,name:_e.user_name,email:_e.user_email,voteCount:_e.vote_count})),zt=Dt.reduce((_e,He)=>_e+He.voteCount,0);return{id:Ie.id,title:Ie.title,description:Ie.description,epic:Ie.epic||null,epicId:Ie.epic_id||Ie.epicId||null,state:Ie.state,areaPath:Ie.area_path||Ie.areaPath||null,tags:Ie.tags||[],azureDevOpsId:Ie.azure_devops_id||Ie.azureDevOpsId||null,azureDevOpsUrl:Ie.azure_devops_url||Ie.azureDevOpsUrl||null,workItemType:Ie.workItemType||Ie.work_item_type||null,votes:zt,voters:Dt}});j(Oe),ve({title:n.title,goal:n.goal,votesPerUser:n.votes_per_user,useAutoVotes:n.use_auto_votes||!1,startDate:n.start_date,endDate:n.end_date,isActive:n.is_active,originalEndDate:n.original_end_date??void 0,endedEarlyBy:n.ended_early_by??void 0,endedEarlyReason:n.ended_early_reason??void 0,endedEarlyDetails:n.ended_early_details??void 0,reopenReason:n.reopen_reason??void 0,reopenDetails:n.reopen_details??void 0,reopenedBy:n.reopened_by??void 0,reopenedAt:n.reopened_at??void 0,productId:n.product_id??null,productName:n.product_name??null,product_id:n.product_id??null,product_name:n.product_name??null});const Xe=await A6(n.id);Y(Xe?{organization:Xe.organization||"newmill",project:Xe.project||"Product",accessToken:Xe.access_token,refreshToken:Xe.refresh_token,tokenExpiresAt:Xe.token_expires_at,tenantId:Xe.tenant_id,clientId:Xe.client_id,enabled:Xe.enabled,workItemType:Xe.work_item_type||"Feature",query:Xe.query,lastSyncTime:Xe.last_sync_time}:{organization:"newmill",project:"Product",enabled:!1,workItemType:"Feature"});try{const Ie=await TS(n.id);At(Ie)}catch(Ie){console.error("Error loading feature suggestions:",Ie)}}catch(be){console.error("Error loading data:",be),j([])}finally{E(!1),kt.current=!1}}}X()},[n==null?void 0:n.id]),y.useEffect(()=>{async function X(){const be=PC(),Pe=M.project;if(he(be),re([]),$e([]),ke([]),M.enabled&&M.accessToken&&Pe)try{const Oe=await Je(M),Xe={...M,accessToken:Oe,project:Pe},[Ie,Lt,Dt,zt]=await Promise.all([dZ(Xe).catch(_e=>(console.error("Error loading Azure DevOps projects:",_e),be)),NC(Xe),kx(Xe),CC(Xe)]);M.project===Pe&&(he(Ie.length>0?Ie:be),re(Lt),$e(Dt),ke(zt))}catch(Oe){console.error("Error loading filter options:",Oe),M.project===Pe&&he(be)}}X()},[M.enabled,M.accessToken,M.project,Je]);const ir=y.useCallback(async(X,be)=>{if(!(!M.enabled||!M.accessToken))try{const Pe=await Je(M),Oe={...M,accessToken:Pe},Xe=X?await YI(Oe,X):await NC(Oe);re(Xe)}catch(Pe){console.error("Error loading states for work item type:",Pe)}},[M,Je]),yr=y.useCallback(async X=>{if(!M.enabled||!M.accessToken)return{types:[],states:[]};try{const be=await Je(M),Pe={...M,accessToken:be};return await fZ(Pe,X)}catch(be){return console.error("Error fetching types and states for area path:",be),{types:[],states:[]}}},[M,Je]),hr=y.useCallback(async X=>{if(!M.enabled||!M.accessToken)return{types:[],areaPaths:[]};try{const be=await Je(M),Pe={...M,accessToken:be},Oe=await uZ(Pe,X);return Oe.areaPaths.length>0&&$e(Oe.areaPaths),Oe}catch(be){return console.error("Error fetching types and area paths for states:",be),{types:[],areaPaths:[]}}},[M,Je]),Fr=y.useCallback(async X=>{if(!M.enabled||!M.accessToken)return{types:[],states:[],areaPaths:[]};try{const be=await Je(M),Pe={...M,accessToken:be},Oe=await hZ(Pe,X);return Oe.states.length>0&&re(Oe.states),Oe.areaPaths.length>0&&$e(Oe.areaPaths),Oe}catch(be){return console.error("Error fetching types, states, and area paths for tags:",be),{types:[],states:[],areaPaths:[]}}},[M,Je]),Jt=y.useCallback(async(X,be=[],Pe=[])=>{if(!(!M.enabled||!M.accessToken))try{const Oe=await Je(M),Xe={...M,accessToken:Oe},Ie=X?await mZ(Xe,X,be,Pe):await CC(Xe);ke(Ie)}catch(Oe){console.error("Error loading tags for type, state, and area path:",Oe)}},[M,Je]),mr=y.useCallback(async(X,be=[])=>{if(!(!M.enabled||!M.accessToken))try{const Pe=await Je(M),Oe={...M,accessToken:Pe},Xe=X?await cZ(Oe,X,be):await kx(Oe);$e(Xe)}catch(Pe){console.error("Error loading area paths for type and state:",Pe)}},[M,Je]);y.useEffect(()=>{const X=async()=>{const Pe=zZ(G.startDate,G.endDate);if(G.isActive!==Pe){const Oe={...G,isActive:Pe};ve(Oe);try{n!=null&&n.id&&await PS(n.id,{title:Oe.title,goal:Oe.goal,votes_per_user:Oe.votesPerUser,start_date:Oe.startDate,end_date:Oe.endDate,is_active:Oe.isActive})}catch(Xe){console.error("Error updating voting session status:",Xe)}}};X();const be=setInterval(X,6e5);return()=>clearInterval(be)},[G,n==null?void 0:n.id]),y.useEffect(()=>{document.body.style.overflow="",document.body.style.position="",document.body.style.width="",T==="admin"&&(Wt(),rr())},[T,Wt,rr]),y.useEffect(()=>(document.body.style.overflow="",()=>{document.body.style.overflow=""}),[]);const rs=y.useCallback(async(X=M)=>{if(!X.organization||!X.project||!n){je("Organization and project name are required");return}try{Ve(!0),je(null);const be=await Je(X),Pe={...X,accessToken:be},Oe=await EC(Pe),Xe=AC(Oe);for(const _e of Xe){const Zt=(await ja(n.id)).find(gr=>gr.azure_devops_id===_e.azureDevOpsId),Gr=jh(_e.description),dt=hd(Gr,300);Zt?await Ku(Zt.id,{title:_e.title,description:dt,epic:_e.epic||null,epicId:_e.epicId||null,state:_e.state,areaPath:_e.areaPath,tags:_e.tags,azure_devops_id:_e.azureDevOpsId,azure_devops_url:_e.azureDevOpsUrl,workItemType:_e.workItemType||null}):await ih({session_id:n.id,title:_e.title,description:dt,epic:_e.epic||null,epicId:_e.epicId||null,state:_e.state,areaPath:_e.areaPath,tags:_e.tags,azure_devops_id:_e.azureDevOpsId,azure_devops_url:_e.azureDevOpsUrl,workItemType:_e.workItemType||null})}const Ie=await ja(n.id),Lt=await Mo(n.id),Dt=Ie.map(_e=>{const Zt=Lt.filter(dt=>dt.feature_id===_e.id).map(dt=>({userId:dt.user_id,name:dt.user_name,email:dt.user_email,voteCount:dt.vote_count})),Gr=Zt.reduce((dt,gr)=>dt+gr.voteCount,0);return{id:_e.id,title:_e.title,description:_e.description,epic:_e.epic||null,epicId:_e.epic_id||_e.epicId||null,state:_e.state,areaPath:_e.area_path||_e.areaPath||null,tags:_e.tags||[],azureDevOpsId:_e.azure_devops_id||_e.azureDevOpsId||null,azureDevOpsUrl:_e.azure_devops_url||_e.azureDevOpsUrl||null,workItemType:_e.workItemType||_e.work_item_type||null,votes:Gr,voters:Zt}});j(Dt);const zt={...Pe,lastSyncTime:new Date().toISOString()};await gl(n.id,zt),Y(zt)}catch(be){console.error("Azure DevOps sync error:",be),be instanceof Error&&be.message==="Not authenticated"?(je("Please authenticate with Azure DevOps"),at()):je("Failed to fetch features from Azure DevOps. Please try reconnecting.")}finally{Ve(!1)}},[M,n,Je,at]),nr=y.useCallback(async()=>{if(!M.organization||!M.project){je("Organization and project name are required");return}try{Ve(!0),je(null);const X=await Je(M),be={...M,accessToken:X},Pe=await EC(be),Xe=AC(Pe).map(Ie=>(console.log(`[Preview] Feature ${Ie.id} "${Ie.title}": epic="${Ie.epic}", epicId="${Ie.epicId}"`),{...Ie,description:hd(jh(Ie.description),300)}));console.log(`[Preview] Setting ${Xe.length} preview features`),se(Xe),Ge(!0)}catch(X){console.error("Azure DevOps preview error:",X),X instanceof Error&&X.message==="Not authenticated"?(je("Please authenticate with Azure DevOps"),at()):je("Failed to fetch features from Azure DevOps. Please try reconnecting.")}finally{Ve(!1)}},[M,Je,at]),bn=y.useCallback(async()=>{if(!(!fe||!n))try{Ve(!0);const X=await ja(n.id);for(const Ie of X)await AS(Ie.id);for(const Ie of fe){const Lt=jh(Ie.description),Dt=hd(Lt,300);await ih({session_id:n.id,title:Ie.title,description:Dt,epic:Ie.epic||null,state:Ie.state,areaPath:Ie.areaPath,tags:Ie.tags,azure_devops_id:Ie.azureDevOpsId,azure_devops_url:Ie.azureDevOpsUrl})}const be=await ja(n.id),Pe=await Mo(n.id),Oe=be.map(Ie=>{const Dt=Pe.filter(_e=>_e.feature_id===Ie.id).map(_e=>({userId:_e.user_id,name:_e.user_name,email:_e.user_email,voteCount:_e.vote_count})),zt=Dt.reduce((_e,He)=>_e+He.voteCount,0);return{id:Ie.id,title:Ie.title,description:Ie.description,epic:Ie.epic||null,epicId:Ie.epic_id||Ie.epicId||null,state:Ie.state,areaPath:Ie.area_path||Ie.areaPath||null,tags:Ie.tags||[],azureDevOpsId:Ie.azure_devops_id||Ie.azureDevOpsId||null,azureDevOpsUrl:Ie.azure_devops_url||Ie.azureDevOpsUrl||null,workItemType:Ie.workItemType||Ie.work_item_type||null,votes:zt,voters:Dt}});j(Oe);const Xe={...M,lastSyncTime:new Date().toISOString()};await gl(n.id,Xe),Y(Xe)}catch(X){console.error("Azure DevOps replace all error:",X),je("Failed to replace all features from Azure DevOps.")}finally{Ve(!1),se(null)}},[fe,n,M]),[Qt,pr]=y.useState({isOpen:!1,feature:null,existingFeature:null,onResolve:()=>{}}),ln=y.useCallback(async X=>{if(!X||X.length===0||!n){console.error("handleConfirmSync: Invalid input",{selectedFeatures:X,currentSession:n});return}try{Ve(!0),console.log("handleConfirmSync: Starting sync for",X.length,"features");const be=await ja(n.id),Pe=[];let Oe=!1,Xe=!1;for(let _e=0;_e<X.length;_e++){const He=X[_e];try{const Zt=be.find(gr=>{const Xt=gr.azureDevOpsId||gr.azure_devops_id,xr=He.azureDevOpsId;return Xt&&xr&&Xt.toString()===xr.toString()}),Gr=jh(He.description),dt=hd(Gr,300);if(Zt){if(Xe){console.log("handleConfirmSync: Auto-replacing existing feature (replace-all)",Zt.id,He.title),await Ku(Zt.id,{title:He.title,description:dt,epic:He.epic||null,epicId:He.epicId||null,state:He.state,areaPath:He.areaPath,tags:He.tags,azure_devops_id:He.azureDevOpsId,azure_devops_url:He.azureDevOpsUrl,workItemType:He.workItemType||null}),Pe.push(He);continue}const gr=await new Promise(Xt=>{pr({isOpen:!0,feature:He,existingFeature:Zt,onResolve:xr=>{pr({isOpen:!1,feature:null,existingFeature:null,onResolve:()=>{}}),Xt(xr)}})});if(gr==="cancel"){Oe=!0;break}else if(gr==="skip"){console.log("handleConfirmSync: Skipping existing feature",Zt.id,He.title);continue}else gr==="replace-all"?(Xe=!0,console.log("handleConfirmSync: Replace-all selected, replacing current and all future conflicts"),await Ku(Zt.id,{title:He.title,description:dt,epic:He.epic||null,epicId:He.epicId||null,state:He.state,areaPath:He.areaPath,tags:He.tags,azure_devops_id:He.azureDevOpsId,azure_devops_url:He.azureDevOpsUrl,workItemType:He.workItemType||null}),Pe.push(He)):gr==="replace"&&(console.log("handleConfirmSync: Replacing existing feature",Zt.id,He.title),await Ku(Zt.id,{title:He.title,description:dt,epic:He.epic||null,epicId:He.epicId||null,state:He.state,areaPath:He.areaPath,tags:He.tags,azure_devops_id:He.azureDevOpsId,azure_devops_url:He.azureDevOpsUrl,workItemType:He.workItemType||null}),Pe.push(He))}else{console.log("handleConfirmSync: Creating new feature",He.title,He.azureDevOpsId);const gr=await ih({session_id:n.id,title:He.title,description:dt,epic:He.epic||null,epicId:He.epicId||null,state:He.state,areaPath:He.areaPath,tags:He.tags,azure_devops_id:He.azureDevOpsId,azure_devops_url:He.azureDevOpsUrl,workItemType:He.workItemType||null});console.log("handleConfirmSync: Created feature",gr),Pe.push(He)}}catch(Zt){throw console.error("handleConfirmSync: Error processing feature",He.title,Zt),Zt}}if(Oe){console.log("handleConfirmSync: Sync cancelled by user");return}console.log("handleConfirmSync: Fetching all features after sync"),await new Promise(_e=>setTimeout(_e,200));const Ie=await ja(n.id);console.log("handleConfirmSync: Retrieved",Ie.length,"features from database"),console.log("handleConfirmSync: Feature IDs:",Ie.map(_e=>({id:_e.id,title:_e.title,azureId:_e.azure_devops_id||_e.azureDevOpsId})));const Lt=await Mo(n.id),Dt=Ie.map(_e=>{const Zt=Lt.filter(dt=>dt.feature_id===_e.id).map(dt=>({userId:dt.user_id,name:dt.user_name,email:dt.user_email,voteCount:dt.vote_count})),Gr=Zt.reduce((dt,gr)=>dt+gr.voteCount,0);return{id:_e.id,title:_e.title,description:_e.description,epic:_e.epic||null,epicId:_e.epic_id||_e.epicId||null,state:_e.state,areaPath:_e.area_path||_e.areaPath||null,tags:_e.tags||[],azureDevOpsId:_e.azure_devops_id||_e.azureDevOpsId||null,azureDevOpsUrl:_e.azure_devops_url||_e.azureDevOpsUrl||null,workItemType:_e.workItemType||_e.work_item_type||null,votes:Gr,voters:Zt}});console.log("handleConfirmSync: Setting features with votes",Dt.length),j(()=>Dt),await new Promise(_e=>setTimeout(_e,200));const zt={...M,lastSyncTime:new Date().toISOString()};await gl(n.id,zt),Y(zt),console.log("handleConfirmSync: Sync completed successfully")}catch(be){throw console.error("Azure DevOps sync error:",be),je("Failed to sync features from Azure DevOps."),be}finally{Ve(!1),se(null)}},[n,M]),lr=y.useCallback(async()=>{if(n)try{const X={organization:M.organization||"newmill",project:M.project||"Product",workItemType:M.workItemType||"Feature",query:M.query,accessToken:void 0,refreshToken:void 0,tokenExpiresAt:void 0,enabled:!1};await gl(n.id,X),Y(X),je(null)}catch(X){console.error("Error disconnecting Azure DevOps:",X),je("Failed to disconnect from Azure DevOps")}},[M,n]);y.useEffect(()=>{(async()=>{const be=sessionStorage.getItem("oauth_action");if(be&&!(!M.enabled||!M.accessToken))try{be==="preview"?await nr():be==="sync"&&await rs()}finally{sessionStorage.removeItem("oauth_action")}})()},[M.enabled,M.accessToken,nr,rs]);const In=y.useCallback(()=>{p("/admin")},[p]),Hr=y.useCallback(()=>{if(t){p("/vote");return}F(!1);const X=d?"system":"session";W(X),sessionStorage.setItem("adminPerspective",X),sessionStorage.setItem("viewMode","stakeholder"),O("voting")},[d,t,p]),Lr=y.useCallback(()=>{F(!0),W("session"),sessionStorage.setItem("adminPerspective","session"),sessionStorage.setItem("viewMode","admin"),t?T!=="admin"&&O("admin"):T!=="voting"&&O("voting")},[t,T]),vr=y.useCallback(()=>{d&&(F(!0),W("system"),sessionStorage.setItem("adminPerspective","system"),sessionStorage.setItem("viewMode","system-admin"),t?T!=="admin"&&O("admin"):T!=="voting"&&O("voting"))},[T,d,t]),hn=y.useCallback(async X=>{if(n)try{const be=await ih({session_id:n.id,title:X.title,description:X.description,epic:X.epic});j(Pe=>[...Pe,{id:be.id,title:be.title,description:be.description,epic:be.epic,votes:0,voters:[]}]),K(!1)}catch(be){console.error("Error adding feature:",be),alert("Failed to add feature")}},[n]),ns=y.useCallback(async X=>{try{await Ku(X.id,{title:X.title,description:X.description,epic:X.epic,epicId:X.epicId||null}),j(be=>be.map(Pe=>Pe.id===X.id?X:Pe)),H(null)}catch(be){console.error("Error updating feature:",be),alert("Failed to update feature")}},[]),jn=y.useCallback(async X=>{try{await AS(X),j(be=>be.filter(Pe=>Pe.id!==X))}catch(be){console.error("Error deleting feature:",be),alert("Failed to delete feature")}},[]),ss=y.useCallback(X=>{Fe(be=>({...be,showReset:!0,showResetAll:!1,showDeleteSession:!1,targetId:X}))},[]),_s=y.useCallback(async()=>{const X=qe.targetId;if(!(!X||!n))try{await w6(n.id,X);const be=await Ct();j(be)}catch(be){console.error("Error resetting votes:",be),alert("Failed to reset votes")}},[qe.targetId,n,Ct]),Dn=y.useCallback(()=>{Fe(X=>({...X,showReset:!1,showResetAll:!0,showDeleteSession:!1,targetId:null}))},[]),$s=y.useCallback(()=>{Fe(X=>({...X,showReset:!1,showResetAll:!1,showDeleteSession:!0,targetId:null}))},[]),Cr=y.useCallback(async()=>{if(n){We(!0);try{await x6(n.id),l(null);try{localStorage.removeItem("voting_system_current_session")}catch{}await u(),p("/sessions",{replace:!0})}catch(X){console.error("Error deleting session:",X),alert("Failed to delete session. Please try again.")}finally{We(!1),Fe(X=>({...X,showDeleteSession:!1}))}}},[n,p,l,u]),Kr=y.useCallback(async()=>{if(n)try{await E6(n.id);const X=await Ct();j(X)}catch(X){console.error("Error resetting all votes:",X),alert("Failed to reset all votes")}},[n,Ct]),Kt=y.useCallback((X,be)=>{if(!s||!G.isActive)return;const Pe=ee[X]||0;let Oe=Pe;if(be)if(Ne<Le)Oe=Pe+1;else return;else if(Pe>0)Oe=Pe-1;else return;Se(Xe=>{const Ie={...Xe};return Oe===0?delete Ie[X]:Ie[X]=Oe,Ie}),Ee(Xe=>be?Xe+1:Xe-1)},[s,ee,Ne,G.isActive,Le]),Er=y.useCallback(async()=>{if(!(!s||!G.isActive||!n)&&!(Ne<Le))try{for(const[Oe,Xe]of Object.entries(ee))Xe>0&&await N6({session_id:n.id,feature_id:Oe,user_id:s.id,user_name:s.name,user_email:s.email,vote_count:Xe});const X=await ja(n.id),be=await Mo(n.id),Pe=X.map(Oe=>{const Ie=be.filter(Dt=>Dt.feature_id===Oe.id).map(Dt=>({userId:Dt.user_id,name:Dt.user_name,email:Dt.user_email,voteCount:Dt.vote_count})),Lt=Ie.reduce((Dt,zt)=>Dt+zt.voteCount,0);return{id:Oe.id,title:Oe.title,description:Oe.description,epic:Oe.epic,state:Oe.state,areaPath:Oe.area_path,tags:Oe.tags||[],azureDevOpsId:Oe.azure_devops_id,azureDevOpsUrl:Oe.azure_devops_url,votes:Lt,voters:Ie}});j(Pe),O("thankyou")}catch(X){console.error("Error submitting votes:",X),alert("Failed to submit votes. Please try again.")}},[s,n,Ne,ee,G.isActive,Le]),_r=y.useCallback(async X=>{var Lt,Dt;const be={title:X.title,goal:X.goal,votes_per_user:X.votesPerUser,start_date:X.startDate,end_date:X.endDate,is_active:X.isActive,use_auto_votes:X.useAutoVotes,product_id:X.product_id??null,product_name:null},Pe={},Oe=(zt,_e)=>{zt!==void 0&&(Pe[_e]=zt)};Oe(X.originalEndDate,"original_end_date"),Oe(X.endedEarlyBy,"ended_early_by"),Oe(X.endedEarlyReason,"ended_early_reason"),Oe(X.endedEarlyDetails,"ended_early_details"),Oe(X.reopenReason,"reopen_reason"),Oe(X.reopenDetails,"reopen_details"),Oe(X.reopenedBy,"reopened_by"),Oe(X.reopenedAt,"reopened_at");const Xe={...be,...Pe},Ie=async zt=>{n!=null&&n.id?await PS(n.id,zt):await T6(zt)};try{await Ie(Xe),ve(X),n!=null&&n.id&&l({...n,title:be.title??n.title,goal:be.goal??n.goal,votes_per_user:be.votes_per_user??n.votes_per_user,use_auto_votes:be.use_auto_votes??n.use_auto_votes,start_date:be.start_date??n.start_date,end_date:be.end_date??n.end_date,is_active:be.is_active??n.is_active,product_id:be.product_id!==void 0?be.product_id??null:X.product_id??n.product_id??null,product_name:null,original_end_date:Pe.original_end_date??n.original_end_date??null,ended_early_by:Pe.ended_early_by??n.ended_early_by??null,ended_early_reason:Pe.ended_early_reason??n.ended_early_reason??null,ended_early_details:Pe.ended_early_details??n.ended_early_details??null,reopen_reason:Pe.reopen_reason??n.reopen_reason??null,reopen_details:Pe.reopen_details??n.reopen_details??null,reopened_by:Pe.reopened_by??n.reopened_by??null,reopened_at:Pe.reopened_at??n.reopened_at??null})}catch(zt){const _e=((Dt=(Lt=zt==null?void 0:zt.message)==null?void 0:Lt.toLowerCase)==null?void 0:Dt.call(Lt))??"",He=_e.includes("column")&&(_e.includes("reopen_reason")||_e.includes("reopen_details")||_e.includes("reopened_by")||_e.includes("reopened_at")||_e.includes("original_end_date")||_e.includes("ended_early_by")||_e.includes("ended_early_reason")||_e.includes("ended_early_details")),Zt=_e.includes("product_name")||_e.includes('"product_name"'),Gr=_e.includes("product_id")||_e.includes('"product_id"');if(He||Zt||Gr){console.warn("[FeatureVoting] Voting session metadata/product columns missing, falling back to basic update.",zt);try{const dt={...be};Zt&&delete dt.product_name,Gr&&delete dt.product_id,await Ie(dt),ve(X),n!=null&&n.id&&l({...n,title:dt.title??n.title,goal:dt.goal??n.goal,votes_per_user:dt.votes_per_user??n.votes_per_user,use_auto_votes:dt.use_auto_votes??n.use_auto_votes,start_date:dt.start_date??n.start_date,end_date:dt.end_date??n.end_date,is_active:dt.is_active??n.is_active,product_id:dt.product_id!==void 0?dt.product_id??null:X.productId??n.product_id??null,product_name:null,original_end_date:X.originalEndDate??n.original_end_date??null,ended_early_by:X.endedEarlyBy??n.ended_early_by??null,ended_early_reason:X.endedEarlyReason??n.ended_early_reason??null,ended_early_details:X.endedEarlyDetails??n.ended_early_details??null,reopen_reason:X.reopenReason??n.reopen_reason??null,reopen_details:X.reopenDetails??n.reopen_details??null,reopened_by:X.reopenedBy??n.reopened_by??null,reopened_at:X.reopenedAt??n.reopened_at??null})}catch(dt){console.error("Error updating voting session (fallback):",dt),alert("Failed to update voting session settings")}}else console.error("Error updating voting session:",zt),alert("Failed to update voting session settings")}},[n,l]),Sn=y.useCallback(async X=>{if(n){Y(X);try{await gl(n.id,{organization:X.organization,project:X.project,accessToken:X.accessToken,refreshToken:X.refreshToken,tokenExpiresAt:X.tokenExpiresAt,tenantId:X.tenantId,clientId:X.clientId,enabled:X.enabled,workItemType:X.workItemType,query:X.query,lastSyncTime:X.lastSyncTime})}catch(be){console.error("Error saving config:",be)}}},[n]),en=y.useCallback(()=>{t||n?p("/results"):O("results")},[t,n,p]),ps=y.useMemo(()=>{if(t)return a.jsx(OZ,{features:S,onAddFeature:hn,onUpdateFeature:ns,onDeleteFeature:jn,onShowResults:en,onRequestDeleteSession:$s,isDeletingSession:Mt,showAddForm:le,setShowAddForm:K,editingFeature:L,setEditingFeature:H,onLogout:x,onShowVoterView:Hr,votingSession:G,azureDevOpsConfig:M,onUpdateAzureDevOpsConfig:Sn,onPreviewAzureDevOpsFeatures:nr,onDisconnectAzureDevOps:lr,isFetchingAzureDevOps:Te,azureFetchError:J,onInitiateOAuth:at,availableStates:U,availableAreaPaths:pe,availableTags:de,previewFeatures:fe,showPreviewModal:Ze,setShowPreviewModal:Ge,onConfirmSync:ln,onReplaceAll:bn,onUpdateVotingSession:_r,onFetchStatesForType:ir,onFetchAreaPathsForTypeAndState:mr,onFetchTagsForTypeStateAndAreaPath:Jt,onFetchTypesAndStatesForAreaPath:yr,onFetchTypesAndStatesForTags:Fr,onFetchTypesAndAreaPathsForStates:hr,suggestedFeatures:Ue,otherSessions:gt,onPromoteSuggestion:vt,onMoveSuggestion:Ft,onEditSuggestion:rt,onDeleteSuggestion:Ht,adminPerspective:z,projectOptions:ce});switch(T==="admin"&&!t?"voting":T){case"voting":return a.jsx(FC,{features:S,currentUser:s,pendingVotes:ee,pendingUsedVotes:Ne,onVote:Kt,onSubmitVotes:Er,onToggleAdmin:In,isAdmin:V,votingSession:G,navigate:p,effectiveVotesPerUser:Le,sessionId:(n==null?void 0:n.id)||"",onLogout:x,onSuggestionSubmitted:sr,isSystemAdmin:d,isSessionAdmin:m,isStakeholder:f,currentRole:V?z==="system"?"system-admin":"session-admin":"stakeholder"});case"results":return a.jsx(GZ,{features:S,onResetVotes:ss,onResetAllVotes:Dn,onBack:r?()=>p("../admin"):()=>O("admin"),showVotersList:ie,setShowVotersList:q,votingSession:G,effectiveVotesPerUser:Le,onLogout:x,currentUser:s,isSystemAdmin:d,isSessionAdmin:m,isStakeholder:f,currentRole:V?z==="system"?"system-admin":"session-admin":"stakeholder"});case"thankyou":return a.jsx(YZ,{navigate:p,votingSession:G});default:return a.jsx(FC,{features:S,currentUser:s,pendingVotes:ee,pendingUsedVotes:Ne,onVote:Kt,onSubmitVotes:Er,onToggleAdmin:In,isAdmin:V,votingSession:G,navigate:p,effectiveVotesPerUser:Le,sessionId:(n==null?void 0:n.id)||"",onLogout:x,onSuggestionSubmitted:sr,isSystemAdmin:d,isSessionAdmin:m,isStakeholder:f,currentRole:V?z==="system"?"system-admin":"session-admin":"stakeholder"})}},[T,S,s,ee,Ne,Kt,Er,In,V,G,ss,Dn,ie,q,hn,ns,jn,le,K,L,H,M,Sn,rs,nr,lr,Te,J,at,fe,Ze,Ge,ln,p,Le,t,U,pe,de,ir,n,Hr,sr,Ue,gt,vt,Ft,rt,Ht,z,ce,en]),Xs=()=>{const{feature:X,existingFeature:be}=Qt;return y.useEffect(()=>{if(Qt.isOpen){const Pe=window.scrollY;return document.body.style.position="fixed",document.body.style.top=`-${Pe}px`,document.body.style.width="100%",document.body.style.overflow="hidden",()=>{document.body.style.position="",document.body.style.top="",document.body.style.width="",document.body.style.overflow="",window.scrollTo(0,Pe)}}},[Qt.isOpen]),!Qt.isOpen||!X||!be?null:a.jsx("div",{className:"fixed inset-0 z-[60] overflow-y-auto",children:a.jsxs("div",{className:"flex items-start justify-center min-h-screen p-4 text-center pt-8 sm:pt-16",children:[a.jsx("div",{className:"fixed inset-0 transition-opacity bg-black/50",onClick:()=>Qt.onResolve("cancel"),"aria-hidden":"true"}),a.jsxs("div",{className:"inline-block w-full max-w-2xl mb-8 overflow-visible text-left align-middle transition-all transform bg-white shadow-xl rounded-lg relative z-10",children:[a.jsxs("div",{className:"flex items-start justify-between mb-5 p-6 pb-0",children:[a.jsxs("div",{className:"flex items-center gap-3 bg-[#FFF7E2] border border-[#C89212]/40 rounded-xl px-6 py-3 shadow-sm w-full mr-4",children:[a.jsx("div",{className:"flex items-center justify-center h-10 w-10 rounded-full bg-[#C89212]/15 text-[#C89212]",children:a.jsx(Ym,{className:"h-6 w-6"})}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-lg font-semibold text-[#2d4660] tracking-tight",children:"Work Item Already Exists"}),a.jsx("p",{className:"text-xs text-[#8A6D3B] font-medium mt-1 uppercase tracking-widest",children:"Spark the roadmap with your ideas"})]})]}),a.jsx("button",{onClick:()=>Qt.onResolve("cancel"),className:"ml-3 text-gray-400 hover:text-gray-500 focus:outline-none",children:a.jsx(Ts,{className:"h-5 w-5"})})]}),a.jsx("div",{className:"p-6",children:a.jsxs("div",{className:"space-y-4",children:[a.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:a.jsx("p",{className:"text-sm text-yellow-800 mb-2",children:"This work item already exists in your voting session. What would you like to do?"})}),a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[a.jsx("h4",{className:"font-semibold text-gray-900 mb-2",children:"Existing Work Item:"}),a.jsx("p",{className:"text-sm text-gray-700",children:be.title}),be.azureDevOpsId&&a.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Azure DevOps ID: ",be.azureDevOpsId]})]}),a.jsxs("div",{className:"border border-blue-200 rounded-lg p-4 bg-blue-50",children:[a.jsx("h4",{className:"font-semibold text-blue-900 mb-2",children:"New Work Item:"}),a.jsx("p",{className:"text-sm text-blue-700",children:X.title}),X.azureDevOpsId&&a.jsxs("p",{className:"text-xs text-blue-600 mt-1",children:["Azure DevOps ID: ",X.azureDevOpsId]})]})]}),a.jsxs("div",{className:"flex justify-between items-center pt-4 border-t",children:[a.jsx(jt,{variant:"primary",onClick:()=>Qt.onResolve("replace-all"),children:"Replace All Selected"}),a.jsxs("div",{className:"flex gap-3",children:[a.jsx(jt,{variant:"secondary",onClick:()=>Qt.onResolve("cancel"),children:"Cancel"}),a.jsx(jt,{variant:"secondary",onClick:()=>Qt.onResolve("skip"),children:"Skip"}),a.jsx(jt,{variant:"primary",onClick:()=>Qt.onResolve("replace"),children:"Replace"})]})]})]})})]})]})})};return n?N?a.jsx("div",{className:"min-h-screen w-full bg-gray-50 flex items-center justify-center",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-[#2d4660] mx-auto mb-4"}),a.jsx("p",{className:"text-gray-600",children:"Loading..."})]})}):!V&&T!=="voting"&&T!=="thankyou"?a.jsx("div",{className:"min-h-screen w-full bg-gray-50 flex items-center justify-center",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-[#2d4660] mx-auto mb-4"}),a.jsx("p",{className:"text-gray-600",children:"Loading voting experience..."})]})}):a.jsxs(a.Fragment,{children:[a.jsx(Xs,{}),a.jsxs("div",{className:"w-full bg-gray-50 text-gray-900 font-sans min-h-screen flex flex-col",children:[a.jsx("div",{className:"flex-grow",children:ps}),a.jsx(QI,{currentRole:V?z==="system"?"system-admin":"session-admin":"stakeholder",onSelectStakeholder:Hr,onSelectSessionAdmin:V||d?Lr:void 0,onSelectSystemAdmin:d?vr:void 0,showRoleToggle:d||m,isSessionAdmin:m&&!d}),a.jsx(Oh,{show:qe.showReset,title:"Reset Votes",message:"Are you sure you want to reset all votes for this feature? This will remove all voting data for this feature.",onConfirm:_s,onCancel:()=>Fe(X=>({...X,showReset:!1})),confirmText:"Reset",type:"reset"}),a.jsx(Oh,{show:qe.showResetAll,title:"Reset All Votes",message:"Are you sure you want to reset all votes for all features? This will remove all voting data and cannot be undone.",onConfirm:Kr,onCancel:()=>Fe(X=>({...X,showResetAll:!1})),confirmText:"Reset All",type:"reset"}),a.jsx(Oh,{show:qe.showDeleteSession,title:"Delete Voting Session",message:"This will permanently delete the current voting session for all admins and stakeholders. Votes, notes, and settings for this session will be removed. This action cannot be undone.",onConfirm:Cr,onCancel:()=>Fe(X=>({...X,showDeleteSession:!1})),confirmText:Mt?"Deleting":"Delete Session",type:"delete"})]})]}):a.jsxs(a.Fragment,{children:[a.jsx(Xs,{}),a.jsx("div",{className:"min-h-screen w-full bg-gray-50 flex items-center justify-center",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-[#2d4660] mx-auto mb-4"}),a.jsx("p",{className:"text-gray-600",children:"Loading session..."})]})})]})}async function LC(e,t,r){const s=`${e}:${t}:${r}:default-secret-change-in-production`,l=new TextEncoder().encode(s),u=await crypto.subtle.digest("SHA-256",l);return Array.from(new Uint8Array(u)).map(f=>f.toString(16).padStart(2,"0")).join("").substring(0,32)}function XZ(){const[e,t]=y.useState(!1),[r,n]=y.useState(!1),[s,i]=y.useState(""),[l,u]=y.useState(!1),[d,m]=y.useState(null),[f,p]=y.useState(""),[v,x]=y.useState(""),{currentUser:b,setCurrentUser:S,setCurrentSession:j}=ql(),N=da(),[E]=Lm(),C=async T=>{T.preventDefault(),i(""),t(!0);try{const O=await Fc(f.toLowerCase(),v);console.log("[LoginScreen] User created/retrieved:",O),S(O);const V=E.get("session");if(V){console.log("[LoginScreen] Session code found, loading session...");const F=await y6(V);if(F){j(F),console.log("[LoginScreen] Checking user roles...");const[L,H,le]=await Promise.all([Aa(O.id),Vm(F.id,O.id),zx(F.id,O.email)]);if(L||H)N("/admin");else if(le)N("/vote");else{i("You are not authorized to access this voting session."),t(!1);return}}else{i("Invalid session code."),t(!1);return}}else console.log("[LoginScreen] No session code, navigating to /sessions"),N("/sessions")}catch(O){console.error("[LoginScreen] Login error:",O),i(`Failed to log in: ${O instanceof Error?O.message:"Unknown error"}. Please try again.`),t(!1)}};y.useEffect(()=>{const T=sessionStorage.getItem("oauth_error");T&&(i(T),sessionStorage.removeItem("oauth_error"));const O=E.get("error"),V=E.get("error_description"),F=E.get("error_code");if(O){const L=V?decodeURIComponent(V):"An authentication error occurred.";O==="invalid_request"&&L.includes("AADSTS9002325")?i('Azure AD authentication requires PKCE. Please ensure your Azure AD app is configured correctly. The redirect URI must be registered under the "Web" platform in Azure AD.'):F==="unexpected_failure"&&L.includes("email")?i("Azure AD did not return your email address. Please ensure your Azure AD app has the correct API permissions (User.Read or email) and that your account has an email address."):i(`Authentication failed: ${L}`),N("/login",{replace:!0})}},[E,N]),y.useEffect(()=>{const T=E.get("token"),O=E.get("action"),V=E.get("email"),F=E.get("product");T&&O&&V&&F&&(O==="grant-admin"||O==="grant-stakeholder")&&(async()=>{var H,le;try{t(!0),i("");const ie=`${Ce.supabaseUrl}/functions/v1/grant-access`;let q;try{q=await fetch(ie,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${Ce.supabaseKey}`},body:JSON.stringify({token:T,action:O,email:V,productId:F})})}catch(de){throw(H=de.message)!=null&&H.includes("CORS")||(le=de.message)!=null&&le.includes("Failed to fetch")?new Error("The grant access function is not available. Please ensure the Edge Function is deployed. Error: "+de.message):de}if(!q.ok){let de="Failed to grant access";try{de=(await q.json()).error||de}catch{de=`Server returned ${q.status}: ${q.statusText}`}throw new Error(de)}const G=await q.json(),ve=V.split("@")[0].replace(/\./g," "),M=G.productName||"the product",Y=O==="grant-admin"?"Session Admin":"Stakeholder";let ce=ve;try{const de=await jE(V);de&&(ce=de.name)}catch{}const he=window.location.pathname.startsWith("/feature-voting-app")?"/feature-voting-app":"",U=`${window.location.origin}${he}/login`,pe=`
<table width="100%" cellpadding="0" cellspacing="0" border="0" style="background-color: #f9fafb; font-family: Arial, sans-serif;">
  <tr>
    <td align="center" style="padding: 48px 20px;">
      <table width="600" cellpadding="0" cellspacing="0" border="0" style="background-color: #ffffff; border-radius: 8px; box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);">
        <!-- Logo Header -->
        <tr>
          <td style="background-color: #ffffff; padding: 32px 40px 24px 40px; text-align: center;">
            <img src="https://dcchoffman.github.io/feature-voting-app/New-Millennium-color-logo1.png" alt="New Millennium Building Systems" width="300" height="96" style="height: 96px; width: auto; max-width: 300px; display: block; margin: 0 auto; border: 0;" />
            <div style="font-size: 24px; font-weight: bold; color: #2d4660; margin-top: 16px;">Access Granted</div>
          </td>
        </tr>
        
        <!-- Main Content -->
        <tr>
          <td style="background-color: #ffffff; padding: 40px;">
            <p style="margin: 0 0 16px 0; font-size: 16px; color: #333;">Hello ${ce},</p>
            <p style="margin: 0 0 24px 0; font-size: 16px; color: #333; line-height: 1.6;">Your access request has been approved! You have been granted <strong style="color: #2d4660;">${Y}</strong> access to all voting sessions for <strong style="color: #2d4660;">${M}</strong>.</p>
            
            <p style="margin: 24px 0; font-size: 16px; color: #333; line-height: 1.6;">You can now log in to the Feature Voting System to access your sessions.</p>
            
            <!-- Login Button -->
            <table width="100%" cellpadding="0" cellspacing="0" border="0" style="margin: 32px 0;">
              <tr>
                <td align="center">
                  <a href="${U}" style="display: inline-block; padding: 12px 24px; background-color: #2d4660; color: white; text-decoration: none; border-radius: 6px; font-weight: 500; font-size: 14px; box-shadow: 0 1px 2px 0 rgba(0, 0, 0, 0.05);">Log In to Feature Voting System</a>
                </td>
              </tr>
            </table>
          </td>
        </tr>
        
        <!-- Footer -->
        <tr>
          <td style="background-color: #f9fafb; padding: 20px; text-align: center; border-top: 1px solid #e5e7eb; font-size: 12px; color: #6b7280; position: relative;">
            <p style="margin: 0 0 8px 0;">This is an automated message from the Feature Voting System.</p>
            <p style="margin: 0; color: #9ca3af;"> ${new Date().getFullYear()} New Millennium Building Systems</p>
          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>`,$e=`
Access Granted - Feature Voting System

Hello ${ce},

Your access request has been approved! You have been granted ${Y} access to all voting sessions for ${M}.

You can now log in to the Feature Voting System to access your sessions.

Login: ${U}

This is an automated message from the Feature Voting System.
          `;try{await Kc({to:V,subject:`Access Granted - ${M} - Feature Voting System`,text:$e,html:pe})}catch(de){console.error("Error sending email to requester:",de)}m({roleName:Y,productName:M,requesterName:ce,requesterEmail:V}),N("/login",{replace:!0})}catch(K){console.error("Error granting access:",K),i(K.message||"Failed to grant access. Please try again."),N("/login",{replace:!0})}finally{t(!1)}})()},[E,N]);const I=async()=>{i(""),n(!0);try{const T=window.location.pathname.startsWith("/feature-voting-app")?"/feature-voting-app":"",O=`${window.location.origin}${T}/sessions`,{error:V}=await Ce.auth.signInWithOAuth({provider:"azure",options:{redirectTo:O,scopes:"email openid profile User.ReadBasic.All",queryParams:{redirect_to:O}}});V&&(i("Failed to sign in with Azure AD. Please try again."),n(!1))}catch(T){console.error("Azure login error:",T),i("Failed to sign in with Azure AD. Please try again."),n(!1)}};return a.jsxs("div",{className:"min-h-screen bg-gray-50 flex flex-col justify-center py-12 sm:px-6 lg:px-8",children:[a.jsx("div",{className:"sm:mx-auto sm:w-full sm:max-w-md",children:a.jsxs("div",{className:"bg-white shadow-lg sm:rounded-lg overflow-hidden relative z-10",children:[a.jsxs("div",{className:"relative",children:[a.jsx("div",{className:"px-10 pt-8 pb-6 text-center",children:a.jsx("img",{src:$a,alt:"New Millennium Building Systems Logo",className:"mx-auto h-24 w-auto"})}),a.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-12 pointer-events-none",style:{background:"linear-gradient(to bottom, transparent, rgba(255, 255, 255, 0.8), rgba(255, 255, 255, 1))"}})]}),a.jsxs("div",{className:"px-4 sm:px-10 pb-8",children:[a.jsxs("div",{className:"text-center mb-6",children:[a.jsx("h2",{className:"text-3xl font-bold text-[#2d4660]",children:"Feature Voting System"}),a.jsx("p",{className:"mt-2 text-sm text-gray-600",children:"Sign in to access your voting sessions"})]}),a.jsxs("form",{onSubmit:C,className:"space-y-6",children:[a.jsxs("div",{children:[a.jsx("label",{htmlFor:"login-name",className:"block text-sm font-medium text-gray-700",children:"Full Name"}),a.jsx("div",{className:"mt-1",children:a.jsx("input",{id:"login-name",name:"name",type:"text",autoComplete:"name",required:!0,value:v,onChange:T=>x(T.target.value),className:"appearance-none block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-[#2d4660] focus:border-[#2d4660]",placeholder:"John Doe"})})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"login-email",className:"block text-sm font-medium text-gray-700",children:"Email Address"}),a.jsx("div",{className:"mt-1",children:a.jsx("input",{id:"login-email",name:"email",type:"email",autoComplete:"email",required:!0,value:f,onChange:T=>p(T.target.value),className:"appearance-none block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-[#2d4660] focus:border-[#2d4660]",placeholder:"your.email@company.com"})})]}),a.jsx("div",{children:a.jsx("button",{type:"submit",disabled:e,className:"w-full flex justify-center items-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-[#2d4660] hover:bg-[#1d3a53] focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-[#2d4660] disabled:opacity-50 disabled:cursor-not-allowed",children:e?a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Signing in..."]}):a.jsxs(a.Fragment,{children:[a.jsx("svg",{className:"h-6 w-6 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M11 16l-4-4m0 0l4-4m-4 4h14m-5 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h7a3 3 0 013 3v1"})}),"Sign In"]})})})]}),s&&a.jsx("div",{className:"rounded-md bg-red-50 p-4 mt-6",children:a.jsx("div",{className:"flex",children:a.jsx("div",{className:"ml-3",children:a.jsx("h3",{className:"text-sm font-medium text-red-800",children:s})})})}),a.jsx("div",{className:"mt-4",children:a.jsx("button",{type:"button",onClick:I,disabled:r,className:"microsoft-signin-button",style:{width:"100%",height:"41px",display:"flex",alignItems:"center",justifyContent:"center",paddingLeft:"12px",paddingRight:"12px",cursor:r?"not-allowed":"pointer",opacity:r?.5:1},onMouseEnter:T=>{r||(T.currentTarget.style.backgroundColor="#F5F5F5")},onMouseLeave:T=>{r||(T.currentTarget.style.backgroundColor="#FFFFFF")},children:r?a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2",style:{borderColor:"#5E5E5E",marginRight:"12px"}}),a.jsx("span",{style:{color:"#5E5E5E"},children:"Signing in..."})]}):a.jsxs(a.Fragment,{children:[a.jsx("img",{src:tA,alt:"Microsoft",style:{width:"21px",height:"21px",marginRight:"12px",flexShrink:0}}),a.jsx("span",{style:{color:"#5E5E5E",fontFamily:'"Segoe UI", system-ui, -apple-system, BlinkMacSystemFont, "Roboto", "Helvetica Neue", Arial, sans-serif',fontSize:"15px",fontWeight:600},children:"Sign in with Microsoft"})]})})}),a.jsxs("div",{className:"mt-6",children:[a.jsxs("div",{className:"relative",children:[a.jsx("div",{className:"absolute inset-0 flex items-center",children:a.jsx("div",{className:"w-full border-t border-gray-300"})}),a.jsx("div",{className:"relative flex justify-center text-sm",children:a.jsx("span",{className:"px-2 bg-white text-gray-500",children:"No registration required"})})]}),a.jsxs("div",{className:"mt-6 text-center text-xs text-gray-500",children:[a.jsx("p",{children:"Simply enter your name and email to access"}),a.jsx("p",{children:"voting sessions you've been invited to"})]}),a.jsx("div",{className:"mt-4",children:a.jsx("button",{type:"button",onClick:()=>u(!0),className:"w-full text-sm text-[#2d4660] hover:text-[#1d3a53] underline",children:"Request Access"})})]})]})]})}),a.jsx(QZ,{isOpen:l,onClose:Nt.useCallback(()=>u(!1),[])}),d&&a.jsx(yn,{isOpen:!0,onClose:()=>m(null),title:"",maxWidth:"max-w-md",hideHeader:!0,hideCloseButton:!1,children:a.jsxs("div",{className:"text-center pb-6",children:[a.jsx(Mr,{className:"h-16 w-16 text-green-600 mx-auto mb-4"}),a.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Access Granted Successfully!"}),a.jsxs("p",{className:"text-sm text-gray-600 mb-1",children:["Successfully granted ",a.jsx("span",{className:"font-semibold text-green-700",children:d.roleName})," access to"]}),a.jsx("p",{className:"text-base font-semibold text-gray-900 mb-1",children:d.requesterName}),a.jsx("p",{className:"text-xs text-gray-500 mb-3",children:d.requesterEmail}),a.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"for all sessions in"}),a.jsx("p",{className:"text-lg font-semibold text-green-700 mb-4",children:d.productName}),a.jsx("p",{className:"text-sm text-gray-600",children:"Emails have been sent to both the requester and admin."})]})})]})}const QZ=Nt.memo(function({isOpen:t,onClose:r}){const[n,s]=y.useState(""),[i,l]=y.useState(""),[u,d]=y.useState(""),[m,f]=y.useState([]),[p,v]=y.useState(!1),[x,b]=y.useState(!1),[S,j]=y.useState(!1),[N,E]=y.useState(""),[C,I]=y.useState(!1),T=Nt.useRef(null),O=Nt.useRef(!1),V=Nt.useRef(null),F=Nt.useRef(null);y.useEffect(()=>{t&&!O.current?(async()=>{v(!0);try{const G=await xv();f(G),O.current=!0}catch(G){console.error("Error loading products:",G),E("Failed to load products. Please try again.")}finally{v(!1)}})():t||(s(""),l(""),d(""),j(!1),E(""),O.current=!1)},[t]),y.useEffect(()=>{function q(G){T.current&&!T.current.contains(G.target)&&I(!1)}return document.addEventListener("mousedown",q),()=>document.removeEventListener("mousedown",q)},[]);const L=Nt.useCallback(q=>{s(q.target.value)},[]),H=Nt.useCallback(q=>{l(q.target.value)},[]),le=async q=>{if(q.preventDefault(),E(""),!n.trim()){E("Name is required");return}if(!i.trim()){E("Email is required");return}if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(i)){E("Please enter a valid email address");return}if(!u){E("Please select a product");return}b(!0);try{const G=await b6(u);if(G.length===0){E("No administrators found for this product. Please contact your system administrator."),b(!1);return}const ve=m.find(ke=>ke.id===u),M=(ve==null?void 0:ve.name)||"the selected product",Y=Array.from(new Set(G.map(ke=>{var Te;return(Te=ke.user)==null?void 0:Te.email}).filter(Boolean))),ce=window.location.pathname.startsWith("/feature-voting-app")?"/feature-voting-app":"",he=`${window.location.origin}${ce}/login`,U=await LC(i,u,"grant-admin"),re=await LC(i,u,"grant-stakeholder"),$e=`
<table width="100%" cellpadding="0" cellspacing="0" border="0" style="background-color: #f9fafb; font-family: Arial, sans-serif;">
  <tr>
    <td align="center" style="padding: 48px 20px;">
      <table width="600" cellpadding="0" cellspacing="0" border="0" style="background-color: #ffffff; border-radius: 8px; box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);">
        <!-- Logo Header - Matching Login Page -->
        <tr>
          <td style="background-color: #ffffff; padding: 32px 40px 24px 40px; text-align: center;">
            <img src="https://dcchoffman.github.io/feature-voting-app/New-Millennium-color-logo1.png" alt="New Millennium Building Systems" width="300" height="96" style="height: 96px; width: auto; max-width: 300px; display: block; margin: 0 auto; border: 0;" />
            <div style="font-size: 20px; font-weight: bold; color: #2d4660; margin-top: 16px; margin-bottom: 4px;">Feature Voting System</div>
            <div style="font-size: 11px; color: #6b7280; margin-bottom: 2px;">has a</div>
            <div style="font-size: 25px; font-weight: bold; color: #2d4660; margin-bottom: 2px;">Access Request Notification</div>
            <div style="font-size: 11px; color: #6b7280; margin-bottom: 2px;">for the</div>
            <div style="font-size: 30px; font-weight: bold; color: #2d4660; margin-bottom: 8px;">${M}</div>
          </td>
        </tr>
        
        <!-- Main Content -->
        <tr>
          <td style="background-color: #ffffff; padding: 40px;">
            <p style="margin: 0 0 16px 0; font-size: 16px; color: #333;">Hello,</p>
            <p style="margin: 0 0 24px 0; font-size: 16px; color: #333;">A new access request has been submitted for <strong style="color: #2d4660;">${M}</strong>.</p>
            
            <!-- User Details - Labels less prominent, values emphasized -->
            <table width="100%" cellpadding="0" cellspacing="0" border="0" style="background-color: white; border-left: 4px solid #2d4660; border-radius: 4px; margin: 20px 0;">
              <tr>
                <td style="padding: 20px;">
                  <div style="margin: 10px 0;">
                    <span style="font-weight: normal; color: #6b7280; font-size: 13px;">Requester Name:</span> <span style="color: #1f2937; font-weight: 600; font-size: 15px;">${n}</span>
                  </div>
                  <div style="margin: 10px 0;">
                    <span style="font-weight: normal; color: #6b7280; font-size: 13px;">Requester Email:</span> <span style="color: #1f2937; font-weight: 600; font-size: 15px;">${i}</span>
                  </div>
                  <div style="margin: 10px 0;">
                    <span style="font-weight: normal; color: #6b7280; font-size: 13px;">Product:</span> <span style="color: #1f2937; font-weight: 600; font-size: 15px;">${M}</span>
                  </div>
                </td>
              </tr>
            </table>

            <p style="margin: 24px 0; font-size: 16px; color: #333; line-height: 1.6;">To grant access, click one of the buttons below.<br />Access will be granted <b>immediately</b> to all sessions for this product,<br /><b>and an email notification will be sent to the requester.</b></p>
            
            <!-- Action Buttons - Gold buttons for granting access (same size) -->
            <table width="100%" cellpadding="0" cellspacing="0" border="0" style="margin: 32px 0;">
              <tr>
                <td width="50%" align="left" valign="top" style="padding-right: 10px;">
                  <a href="${he}?token=${U}&action=grant-admin&email=${encodeURIComponent(i)}&product=${encodeURIComponent(u)}" style="display: inline-block; padding: 12px 20px; background-color: #C89212; color: white; text-decoration: none; border-radius: 6px; font-weight: 600; font-size: 13px; box-shadow: 0 1px 2px 0 rgba(0, 0, 0, 0.05); text-align: center; line-height: 1.5; width: 100%; max-width: 240px; min-width: 240px;">
                    Grant Access as<br /><span style="font-size: 18px; font-weight: 700;">Session Admin</span>
                  </a>
                </td>
                <td width="50%" align="right" valign="top" style="padding-left: 10px;">
                  <a href="${he}?token=${re}&action=grant-stakeholder&email=${encodeURIComponent(i)}&product=${encodeURIComponent(u)}" style="display: inline-block; padding: 12px 20px; background-color: #C89212; color: white; text-decoration: none; border-radius: 6px; font-weight: 600; font-size: 13px; box-shadow: 0 1px 2px 0 rgba(0, 0, 0, 0.05); text-align: center; line-height: 1.5; width: 100%; max-width: 240px; min-width: 240px;">
                    Grant Access as<br /><span style="font-size: 18px; font-weight: 700;">Stakeholder</span>
                  </a>
                </td>
              </tr>
            </table>
            
            <!-- Helpful Text -->
            <p style="margin: 24px 0 16px 0; font-size: 14px; color: #6b7280; line-height: 1.6; text-align: center;">
              Click either button above to quickly grant access,<br />or use the link below to manage sessions and users in the system.
            </p>
            
            <!-- Go to System Button -->
            <table width="100%" cellpadding="0" cellspacing="0" border="0" style="margin: 24px 0;">
              <tr>
                <td align="center">
                  <a href="${he}" style="display: inline-block; padding: 12px 24px; background-color: #2d4660; color: white; text-decoration: none; border-radius: 6px; font-weight: 500; font-size: 14px; box-shadow: 0 1px 2px 0 rgba(0, 0, 0, 0.05);">Go to Feature Voting System</a>
                </td>
              </tr>
            </table>
          </td>
        </tr>
        
        <!-- Footer -->
        <tr>
          <td style="background-color: #f9fafb; padding: 20px; text-align: center; border-top: 1px solid #e5e7eb; font-size: 12px; color: #6b7280;">
            <p style="margin: 0 0 8px 0;">This is an automated message from the Feature Voting System.</p>
            <p style="margin: 0; color: #9ca3af;"> ${new Date().getFullYear()} New Millennium Building Systems</p>
          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>`,de=`
Access Request - Feature Voting System

Hello,

A new access request has been submitted for ${M}.

Requester Name: ${n}
Requester Email: ${i}
Product: ${M}

To grant access, please add this user as a stakeholder or admin to the relevant voting sessions for this product.

Login: ${he}

This is an automated message from the Feature Voting System.
      `;try{const ke=Y.map(Te=>Kc({to:Te,subject:`Access Request for ${M} - Feature Voting System`,text:de,html:$e}));await Promise.all(ke),j(!0)}catch(ke){console.error("Email service failed:",ke);let Te="Failed to send email through the system.";ke instanceof Error||ke!=null&&ke.message?Te=ke.message:typeof ke=="string"&&(Te=ke),(Te.includes("validation_error")||Te.includes("403"))&&(Te="Domain verification required. Please verify your domain in Resend and update FROM_EMAIL in Supabase secrets."),E(`Failed to send access request: ${Te}. Please check the Supabase Edge Function logs for details.`),b(!1);return}}catch(G){console.error("Error sending access request:",G),E("Failed to send access request. Please try again or contact your administrator.")}finally{b(!1)}},K=m.find(q=>q.id===u),ie=K?on(K.name,K.color_hex??null):null;return a.jsx(yn,{isOpen:t,onClose:r,title:S?"":"Request Access",maxWidth:"max-w-lg",hideHeader:S,children:S?a.jsxs("div",{className:"text-center pb-6",children:[a.jsx(Mr,{className:"h-16 w-16 text-green-600 mx-auto mb-3"}),a.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-3",children:"Thank You!"}),a.jsx("p",{className:"text-sm text-gray-600 mb-2",children:"Your access request has been sent to the administrators for"}),a.jsx("p",{className:"text-xl font-semibold text-[#2d4660] mb-4",children:K==null?void 0:K.name}),a.jsx("p",{className:"text-sm text-gray-600",children:"You will be notified once your access has been granted."})]}):a.jsxs("form",{onSubmit:le,className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{htmlFor:"requestName",className:"block text-sm font-medium text-gray-700 mb-1",children:"Full Name *"}),a.jsx("input",{ref:V,id:"requestName",type:"text",required:!0,autoComplete:"off","data-lpignore":"true","data-form-type":"other",value:n,onChange:L,className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-[#2d4660] focus:border-[#2d4660]",placeholder:"John Doe"})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"requestEmail",className:"block text-sm font-medium text-gray-700 mb-1",children:"Email Address *"}),a.jsx("input",{ref:F,id:"requestEmail",type:"email",required:!0,autoComplete:"off","data-lpignore":"true","data-form-type":"other",value:i,onChange:H,className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-[#2d4660] focus:border-[#2d4660]",placeholder:"your.email@company.com"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Product *"}),a.jsxs("div",{ref:T,className:"relative",children:[a.jsxs("button",{type:"button",onClick:()=>I(!C),className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm bg-white text-left flex items-center justify-between hover:border-gray-400 focus:outline-none focus:ring-[#2d4660] focus:border-[#2d4660]",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[K&&ie&&a.jsx("div",{className:"w-4 h-4 rounded flex-shrink-0",style:{backgroundColor:ie.background}}),a.jsx("span",{className:K?"text-gray-900":"text-gray-400",children:K?K.name:"Select a product..."})]}),a.jsx(ks,{className:`h-4 w-4 text-gray-400 transition-transform ${C?"transform rotate-180":""}`})]}),C&&a.jsx("div",{className:"absolute z-[100] w-full mt-1 bg-white border border-gray-300 rounded-md shadow-lg max-h-96 overflow-y-auto",children:p?a.jsx("div",{className:"px-3 py-2 text-sm text-gray-500 text-center",children:"Loading products..."}):m.length===0?a.jsx("div",{className:"px-3 py-2 text-sm text-gray-500 text-center",children:"No products available"}):m.map(q=>{const G=on(q.name,q.color_hex??null),ve=u===q.id;return a.jsxs("div",{onClick:()=>{d(q.id),I(!1)},className:`px-3 py-2 cursor-pointer hover:bg-gray-50 flex items-center gap-2 ${ve?"bg-[#2d4660]/5":""}`,children:[G&&a.jsx("div",{className:"w-4 h-4 rounded flex-shrink-0",style:{backgroundColor:G.background}}),a.jsx("span",{className:"text-sm text-gray-900",children:q.name})]},q.id)})})]})]}),N&&a.jsx("div",{className:"rounded-md bg-red-50 p-4",children:a.jsx("div",{className:"flex",children:a.jsx("div",{className:"ml-3",children:a.jsx("h3",{className:"text-sm font-medium text-red-800",children:N})})})}),a.jsxs("div",{className:"flex justify-end space-x-2 pt-4 border-t",children:[a.jsx(jt,{variant:"secondary",onClick:r,disabled:x,children:"Cancel"}),a.jsx(jt,{variant:"primary",type:"submit",disabled:x,className:"flex items-center",children:x?a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Sending..."]}):a.jsxs(a.Fragment,{children:[a.jsx(Jm,{className:"h-4 w-4 mr-2"}),"Send Request"]})})]})]})})});function ZZ(){const{currentUser:e,setCurrentSession:t,refreshSessions:r,setCurrentUser:n,isLoading:s}=ql(),i=da(),[l]=Lm(),[u,d]=y.useState(!0),[m,f]=y.useState(!1),p=y.useRef(!1),[v,x]=y.useState([]),[b,S]=y.useState({}),[j,N]=y.useState({}),[E,C]=y.useState({}),[I,T]=y.useState({}),[O,V]=y.useState({}),[F,L]=y.useState(!1),[H,le]=y.useState(()=>sessionStorage.getItem("viewMode")||"admin"),[K,ie]=y.useState(!1),q=y.useRef(null),[G,ve]=y.useState({}),[M,Y]=y.useState({}),[ce,he]=y.useState(!1),[U,re]=y.useState(!0),[pe,$e]=y.useState({title:"",goal:"",votesPerUser:10,useAutoVotes:!0,startDate:"",endDate:""}),[de,ke]=y.useState({}),[Te,Ve]=y.useState(!1),[J,je]=y.useState([]),[fe,se]=y.useState(""),[Ze,Ge]=y.useState(""),[Ue,At]=y.useState(null),[gt,wt]=y.useState(null),[Yt,z]=y.useState(!1),[W,ee]=y.useState(!1),[Se,Ne]=y.useState(!1),[Ee,qe]=y.useState(null),[Fe,Mt]=y.useState(!1),[We,yt]=y.useState(!1),[kt,ze]=y.useState(!1),[Le,ct]=y.useState(null),[at,Je]=y.useState(!1),[Ct,Wt]=y.useState("#2D4660"),rr=y.useRef(null),[sr,rt]=y.useState(new Set),[Ht,Ft]=y.useState(null),[vt,ir]=y.useState(null),[yr,hr]=y.useState(!1),[Fr,Jt]=y.useState(!1),[mr,rs]=y.useState(null),[nr,bn]=y.useState(null),[Qt,pr]=y.useState(null),[ln,lr]=y.useState(null),[In,Hr]=y.useState(""),[Lr,vr]=y.useState(null),[hn,ns]=y.useState(!1),[jn,ss]=y.useState(!1),[_s,Dn]=y.useState("#2D4660"),[$s,Cr]=y.useState(!1),[Kr,Kt]=y.useState([]),[Er,_r]=y.useState([]),[Sn,en]=y.useState(""),[ps,Xs]=y.useState(""),[X,be]=y.useState(""),[Pe,Oe]=y.useState(!1),[Xe,Ie]=y.useState(""),[Lt,Dt]=y.useState(null),[zt,_e]=y.useState(!1),[He,Zt]=y.useState(null),Gr=()=>Zt(null),dt=Kr.map(A=>A.user_email.toLowerCase()),gr=dt.length>0&&dt.every(A=>Er.includes(A));y.useEffect(()=>{const A=l.get("error"),$=l.get("error_description"),R=l.get("error_code");if(A){let ne="Authentication failed.";R==="unexpected_failure"&&($!=null&&$.includes("email"))?ne="Azure AD did not return your email address. Please ensure your Azure AD app has the correct API permissions (User.Read or email) and that your account has an email address.":$&&(ne=decodeURIComponent($)),sessionStorage.setItem("oauth_error",ne),i("/login",{replace:!0})}},[l,i]),y.useEffect(()=>{(async()=>{if(!ce||!e)return;const $=e.tenant_id??e.tenantId??null;if(!$){je([]),se(""),qe("No tenant assigned. Products cannot be loaded.");return}ee(!0),qe(null);try{let R;zh(e.email)||await Aa(e.id)?R=await Bo($):R=await g6(e.id);const Re=R;je(Re),se(oe=>{if(yr&&oe&&Re.some(Ye=>Ye.id===oe))return oe;if(Ht){const ue=Re.find(Ye=>{var bt;return((bt=Ye.name)==null?void 0:bt.toLowerCase().trim())===Ht.toLowerCase().trim()});if(ue!=null&&ue.id)return Ft(null),ue.id}return yr&&oe||""}),ve(oe=>{const ue={...oe};return Re.forEach(Ye=>{Ye.id&&Ye.name&&(ue[Ye.id]=Ye.name)}),ue}),Y(oe=>{const ue={...oe};return Re.forEach(Ye=>{Ye.id&&Ye.color_hex&&(ue[Ye.id]=Ye.color_hex)}),ue})}catch(R){console.error("Error loading products for modal:",R),Bc!=null&&Bc(R)?qe("Products are not configured yet. Please create the `products` table in Supabase."):qe("Unable to load products. You can still create a session without a product tag."),je([]),se("")}finally{ee(!1)}})()},[ce,e]);const Xt=A=>{if(!A||typeof A!="string")return console.error("[parseLocalDate] Invalid date string:",A),new Date;const R=A.split("T")[0].split(" ")[0].split("-");if(R.length!==3)return console.error("[parseLocalDate] Invalid date format:",A),new Date;const ne=parseInt(R[0],10),ge=parseInt(R[1],10),Re=parseInt(R[2],10);if(isNaN(ne)||isNaN(ge)||isNaN(Re))return console.error("[parseLocalDate] Invalid date components:",{year:ne,month:ge,day:Re}),new Date;const oe=new Date(ne,ge-1,Re,0,0,0,0);return isNaN(oe.getTime())?(console.error("[parseLocalDate] Invalid date created:",{year:ne,month:ge,day:Re,dateString:A}),new Date):oe},xr=A=>{if(!A||isNaN(A.getTime()))return console.error("[formatDateToISO] Invalid date:",A),new Date().toISOString().split("T")[0];const $=A.getFullYear(),R=String(A.getMonth()+1).padStart(2,"0"),ne=String(A.getDate()).padStart(2,"0");return`${$}-${R}-${ne}`},cr=(A,$)=>{const R=A.getFullYear(),ne=A.getMonth(),ge=A.getDate();return new Date(R,ne,ge+$,0,0,0,0)},Fi=()=>{const A="ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";let $="";for(let R=0;R<8;R++)$+=A.charAt(Math.floor(Math.random()*A.length));return $},Ut=()=>{$e({title:"",goal:"",votesPerUser:10,useAutoVotes:!0,startDate:"",endDate:""}),ke({}),Ge(""),At(null),qe(null),Mt(!1),yt(!1),ze(!1),ct(null),Je(!1),Wt("#2D4660"),Ft(null),re(!0),hr(!1),Jt(!1)},ha=(A=!1)=>{const $={};if(A||(pe.title.trim()||($.title="Session title is required"),pe.goal.trim()||($.goal="Session goal is required")),pe.useAutoVotes||(pe.votesPerUser<1&&($.votesPerUser="Votes per user must be at least 1"),pe.votesPerUser>100&&($.votesPerUser="Votes per user cannot exceed 100")),A){if(pe.startDate&&pe.endDate){const R=Xt(pe.startDate);Xt(pe.endDate)<=R&&($.endDate="End date must be after start date")}}else if((!pe.startDate||!pe.startDate.trim())&&($.startDate="Start date is required"),(!pe.endDate||!pe.endDate.trim())&&($.endDate="End date is required"),pe.startDate&&pe.endDate&&pe.startDate.trim()&&pe.endDate.trim()){const R=Xt(pe.startDate);Xt(pe.endDate)<=R&&($.endDate="End date must be after start date")}if(!A){const R=Ze.trim().length>0;!Ee&&J.length>0&&!fe&&!Le&&!Fe&&!R&&($.product="Please select a product or enter a new product name"),Fe&&!R&&($.product="Please enter a product name or select an existing product")}return ke($),Object.keys($).length===0},Qs=A=>{const{name:$,value:R}=A.target;$e(ne=>{const ge={...ne,[$]:$==="votesPerUser"?parseInt(R)||0:R};if($==="startDate"&&R){const Re=Xt(R),oe=cr(Re,14);ge.endDate=xr(oe)}return ge}),de[$]&&ke(ne=>{const ge={...ne};return delete ge[$],ge})},Ns=async A=>{if(A==="startDate"&&!pe.startDate){let $;if(fe)try{const Re=v.filter(oe=>oe.product_id===fe);if(Re.length>0){let oe=Xt(Re[0].end_date);Re.forEach(ue=>{const Ye=Xt(ue.end_date);Ye>oe&&(oe=Ye)}),$=cr(oe,1)}else $=new Date}catch(Re){console.error("Error calculating dates for product:",Re),$=new Date}else $=new Date;const R=xr($),ne=Xt(R),ge=cr(ne,14);$e(Re=>({...Re,startDate:R,endDate:Re.endDate||xr(ge)}))}else if(A==="endDate"&&!pe.endDate){let $;if(pe.startDate)$=Xt(pe.startDate);else if(fe)try{const ne=v.filter(ge=>ge.product_id===fe);if(ne.length>0){let ge=Xt(ne[0].end_date);ne.forEach(Re=>{const oe=Xt(Re.end_date);oe>ge&&(ge=oe)}),$=cr(ge,1)}else $=new Date}catch(ne){console.error("Error calculating dates for product:",ne),$=new Date}else $=new Date;const R=cr($,14);$e(ne=>({...ne,endDate:xr(R),startDate:ne.startDate||xr($)}))}},is=async()=>{if(!(!gt||!e)){z(!0);try{await kE(gt.id),je(A=>A.filter($=>$.id!==gt.id)),ve(A=>{const $={...A};return delete $[gt.id],$}),Y(A=>{const $={...A};return delete $[gt.id],$}),fe===gt.id&&se("")}catch(A){console.error("Error deleting product:",A),alert("Failed to delete product. Please try again.")}finally{z(!1),wt(null)}}},Li=async()=>{if(e&&ha(!0)){Ve(!0);try{const A=Fi(),$=e.tenant_id??e.tenantId??null;let R=fe&&fe.trim()!==""?fe:null;const ne=Ze.trim(),ge=ne.length>0;let Re=null,oe=null;if(Le?(Re=Le.name,oe=Le.color):ge&&(Re=ne,oe=Ue),Re&&$)try{const _t=J.find(Ae=>Ae.name.toLowerCase().trim()===Re.toLowerCase().trim());if(_t)R=_t.id;else{const Ae=await jS($,Re,oe||void 0);R=Ae.id,je(Et=>[...Et,Ae].sort((Qe,et)=>Qe.name.localeCompare(et.name))),ve(Et=>({...Et,[Ae.id]:Ae.name})),Y(Et=>{const Qe={...Et};return Ae.color_hex&&(Qe[Ae.id]=Ae.color_hex),Qe})}}catch(_t){console.error("Error creating product during draft save:",_t)}const ue=pe.startDate&&pe.startDate.trim()?pe.startDate:Zs,Ye=pe.endDate&&pe.endDate.trim()?pe.endDate:Zs,bt=`${ue}T00:00:00`,nt=`${Ye}T23:59:59`,mt=await kS({title:pe.title.trim()||"Untitled Session",goal:pe.goal.trim()||"",votes_per_user:pe.votesPerUser||10,use_auto_votes:pe.useAutoVotes,start_date:bt,end_date:nt,is_active:!1,session_code:A,access_type:"invite-only",product_id:R??null,product_name:null});try{await yd(mt.id,e.id)}catch(_t){console.error("Error adding session admin for draft:",_t)}await r(),p.current=!1,await tn(),Wi()}catch(A){console.error("Error saving draft:",A),ke($=>({...$,submit:A.message||"Failed to save draft. Please try again."}))}finally{Ve(!1)}}},zi=async A=>{if(A.preventDefault(),!!e&&ha(!1)){Ve(!0);try{const $=Fi(),R=e.tenant_id??e.tenantId??null;let ne=fe&&fe.trim()!==""?fe:null;const ge=Ze.trim(),Re=ge.length>0,oe=fe&&fe.trim()!=="";let ue=null,Ye=null;if(Le?(ue=Le.name,Ye=Le.color):Re&&(ue=ge,Ye=Ue),ue){const Qe=J.find(et=>et.name.toLowerCase().trim()===ue.toLowerCase().trim());if(Qe)ne=Qe.id;else if(R)try{const et=await jS(R,ue,Ye||void 0);ne=et.id,je(St=>[...St,et].sort((it,Vt)=>it.name.localeCompare(Vt.name))),ve(St=>({...St,[et.id]:et.name})),Y(St=>{const it={...St};return et.color_hex&&(it[et.id]=et.color_hex),it})}catch(et){console.error("Error creating product during session creation:",et),ke(St=>({...St,submit:"Failed to create product. Please try again."})),Ve(!1);return}else{console.error("No tenantId available to create product"),ke(et=>({...et,submit:"Unable to create product: No tenant assigned."})),Ve(!1);return}}if(ne&&pe.startDate&&pe.endDate&&pe.startDate.trim()&&pe.endDate.trim()){const Qe=v.filter(ft=>ft.product_id===ne),et=pe.startDate.split("T")[0],St=pe.endDate.split("T")[0];if(Qe.find(ft=>{const er=ft.start_date.split("T")[0],Tr=ft.end_date.split("T")[0];return er===et&&Tr===St})){const ft=G[ne]||"this product";ke(er=>({...er,submit:`A session with the same dates (${jr(pe.startDate)} - ${jr(pe.endDate)}) already exists for ${ft}. Please choose different dates.`})),Ve(!1);return}const Vt=await v6(ne);if(Vt){const ft=Xt(Vt.end_date);if(Xt(pe.startDate)<=ft){const Tr=G[ne]||"this product";ke(rn=>({...rn,submit:`There is already an active session for ${Tr}. The new session must start after ${jr(Vt.end_date)}.`})),Ve(!1);return}}}const bt=`${pe.startDate}T00:00:00`,nt=`${pe.endDate}T23:59:59`,mt=await kS({title:pe.title,goal:pe.goal,votes_per_user:pe.votesPerUser,use_auto_votes:pe.useAutoVotes,start_date:bt,end_date:nt,is_active:!0,session_code:$,access_type:"invite-only",product_id:ne??null,product_name:null});try{await yd(mt.id,e.id)}catch(Qe){console.error("Error adding session admin (session was created successfully):",Qe),(Qe==null?void 0:Qe.code)==="42501"&&(console.warn("RLS policy violation when adding session admin. The session was created but admin assignment failed."),console.warn("This may require updating RLS policies for the session_admins table."))}const Ae=await Lx(mt.id)||mt;if(Ae.product_id&&R)try{const et=(await Bo(R)).find(St=>St.id===Ae.product_id);et&&(ve(St=>({...St,[et.id]:et.name})),et.color_hex&&et.color_hex.trim()!==""&&Y(St=>({...St,[et.id]:et.color_hex})))}catch(Qe){console.error("Error loading product for lookup:",Qe)}t(Ae),await r(),await tn(),he(!1),Ut();const Et=H==="system-admin"?"system":"session";setTimeout(()=>{i(`/admin?perspective=${Et}`)},100)}catch($){console.error("Error creating session from modal:",$),ke(R=>({...R,submit:"Failed to create session. Please try again."}))}finally{Ve(!1)}}};y.useEffect(()=>{if(!K)return;const A=$=>{q.current&&!q.current.contains($.target)&&ie(!1)};return document.addEventListener("mousedown",A),document.addEventListener("touchstart",A,{passive:!0}),()=>{document.removeEventListener("mousedown",A),document.removeEventListener("touchstart",A)}},[K]);const tn=y.useCallback(async()=>{var A;if(!e){console.log("[SessionSelectionScreen] No current user, skipping loadUserSessions");return}if(p.current){console.log("[SessionSelectionScreen] Sessions already loading, skipping duplicate call");return}p.current=!0,d(!0);try{const R=zh(e.email)||await Aa(e.id);L(R);let ne;R?ne=await cu():ne=await _E(e.id);const ge=(e==null?void 0:e.tenant_id)??(e==null?void 0:e.tenantId)??null;let Re={},oe={};if(ge)try{const _t=await Bo(ge);Re=_t.reduce((Ae,Et)=>(Et.id&&Et.name&&(Ae[Et.id]=Et.name),Ae),{}),oe=_t.reduce((Ae,Et)=>(Et.id&&Et.color_hex&&(Ae[Et.id]=Et.color_hex),Ae),{})}catch(_t){console.error("Error loading products for session selection:",_t)}const ue={},Ye={},bt={},nt={},mt={};for(let _t=0;_t<ne.length;_t++){const Ae=ne[_t];try{const[Et,Qe,et,St,it,Vt]=await Promise.all([R?Promise.resolve(!0):Vm(Ae.id,e.id),zx(Ae.id,e.email),ja(Ae.id),Mo(Ae.id).catch(er=>(console.warn(`Failed to load votes for session ${Ae.id}:`,er),[])),Wm(Ae.id).catch(()=>[]),wv(Ae.id).catch(()=>[])]);ue[Ae.id]={isAdmin:Et,isStakeholder:Qe},Ye[Ae.id]=et.length,nt[Ae.id]=it.length,mt[Ae.id]=Vt.length;const ft=St.some(er=>er.user_id===e.id);bt[Ae.id]=ft}catch(Et){console.warn(`Error loading data for session ${Ae.id}:`,Et),ue[Ae.id]={isAdmin:!1,isStakeholder:!1},Ye[Ae.id]=0,nt[Ae.id]=0,mt[Ae.id]=0,bt[Ae.id]=!1}}await r(),x(ne),S(ue),N(Ye),C(bt),T(nt),V(mt),ve(Re),Y(oe)}catch($){console.error("Error loading sessions:",$),(A=$==null?void 0:$.message)!=null&&A.includes("Failed to fetch")||($==null?void 0:$.code)==="ERR_FAILED"?(console.warn("Network error loading sessions - will retry. This is usually temporary."),x([]),S({}),N({}),C({})):(x([]),S({}),N({}),C({})),p.current=!1}finally{d(!1)}},[e,r]);y.useEffect(()=>{if(s)return;if((window.location.search.includes("code=")||window.location.hash.includes("access_token")||window.location.search.includes("error="))&&!e&&!m){f(!0);const $=setTimeout(()=>{f(!1),e||i("/login",{replace:!0})},3e3);return()=>clearTimeout($)}if(m&&e&&f(!1),!m){if(!e&&!s){i("/login",{replace:!0});return}e&&!s&&!p.current&&tn()}},[e,s,i,m]);const as=A=>{const $=j[A.id]||0;if(A.use_auto_votes){const R=Math.max(1,Math.floor($/2));return{votes:R,displayText:`${R} votes/user`,isAuto:!0,formula:`Auto: ${$} ${$===1?"feature":"features"}  2 = ${R}`}}else return{votes:A.votes_per_user,displayText:`${A.votes_per_user} votes/user`,isAuto:!1,formula:""}},Yr=A=>{t(A);const $=b[A.id],R=H==="system-admin"?"system":"session";H==="stakeholder"?i("/vote"):$!=null&&$.isAdmin?i(`/admin?perspective=${R}`):i("/vote")},gs=A=>{t(A),i("/vote")},ys=async()=>{try{await Ce.auth.signOut()}catch{}try{t(null)}catch{}n(null);try{localStorage.removeItem("voting_system_current_session"),localStorage.removeItem("azureDevOpsAuthInProgress"),sessionStorage.removeItem("oauth_return_path"),sessionStorage.removeItem("oauth_action")}catch{}ie(!1),i("/login",{replace:!0})},jr=A=>{const R=A.split("T")[0].split(" ")[0].split("-");if(R.length!==3)return new Date(A).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}).replace(/\b(\d{4})\b/g,nt=>`'${nt.slice(-2)}`);const ne=parseInt(R[0],10),ge=parseInt(R[1],10)-1,Re=parseInt(R[2],10);return new Date(ne,ge,Re).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}).replace(/\b(\d{4})\b/g,Ye=>`'${Ye.slice(-2)}`)},Zs="2099-12-31",Ar=A=>A?A.split("T")[0]===Zs:!1,ei=A=>{if(!A.is_active){const $=!A.title||A.title==="Untitled Session"||A.title.trim()==="",R=!A.goal||A.goal.trim()==="";return $||R}return!1},os=A=>{if(ei(A))return{text:"Draft",color:"text-yellow-900 bg-yellow-200",icon:Vh};const $=new Date,R=new Date(A.start_date),ne=new Date(A.end_date);return $<R?{text:"Upcoming",color:"text-yellow-600 bg-yellow-50",icon:Vx}:$>ne?{text:"Closed",color:"text-gray-600 bg-gray-100",icon:an}:{text:"Active",color:"text-[#1E6154] bg-[#1E6154]/10",icon:Mr}},vi=A=>[...A].sort(($,R)=>{const ne=$!=null&&$.end_date?Date.parse($.end_date):0;return(R!=null&&R.end_date?Date.parse(R.end_date):0)-ne}),ti=A=>A.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;"),ma=A=>ti(A).replace(/\n/g,"<br />"),xi=A=>{const $=kr(A,G);return $?`${$}  ${A.title}`:`You're invited to vote: ${A.title}`},vo=(A,$)=>{const R=kr(A,G);return`Hello,

You're invited to participate in the "${R?`${R}  ${A.title}`:A.title}" feature voting session.

`+(A.goal?`Goal: ${A.goal}

`:"")+`Voting Period: ${Ar(A.start_date)||Ar(A.end_date)?"Dates not set":`${jr(A.start_date)} - ${jr(A.end_date)}`}

Click the "Go Vote!" button below to sign in and cast your votes.

Need help? Reach out to the session admin team.

Thanks,
${(e==null?void 0:e.name)||"Feature Voting System"}`},Ui=(A,$)=>{const R="https://dcchoffman.github.io/feature-voting-app/New-Millennium-color-logo1.png";window.location.pathname.startsWith("/feature-voting-app");const ne=kr(A,G),ge=ne?`${ne}  ${A.title}`:A.title;return`
<table width="100%" cellpadding="0" cellspacing="0" border="0" style="background-color: #f9fafb; font-family: Arial, sans-serif;">
  <tr>
    <td align="center" style="padding: 48px 20px;">
      <table width="600" cellpadding="0" cellspacing="0" border="0" style="background-color: #ffffff; border-radius: 8px; box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);">
        <!-- Logo Header -->
        <tr>
          <td style="background-color: #ffffff; padding: 32px 40px 24px 40px; text-align: center;">
            <img src="${R}" alt="New Millennium Building Systems" width="300" height="96" style="height: 96px; width: auto; max-width: 300px; display: block; margin: 0 auto; border: 0;" />
            <div style="font-size: 24px; font-weight: bold; color: #2d4660; margin-top: 16px;">You're Invited to Vote</div>
          </td>
        </tr>
        
        <!-- Main Content -->
        <tr>
          <td style="background-color: #ffffff; padding: 40px;">
            <p style="margin: 0 0 16px 0; font-size: 16px; color: #333;">Hello,</p>
            <p style="margin: 0 0 24px 0; font-size: 16px; color: #333; line-height: 1.6;">You're invited to participate in the <strong style="color: #2d4660;">"${ge}"</strong> feature voting session.</p>
            
            ${A.goal?`<p style="margin: 0 0 24px 0; font-size: 16px; color: #333; line-height: 1.6;"><strong style="color: #2d4660;">Goal:</strong> ${ti(A.goal)}</p>`:""}
            
            <p style="margin: 0 0 24px 0; font-size: 16px; color: #333; line-height: 1.6;"><strong style="color: #2d4660;">Voting Period:</strong> ${Ar(A.start_date)||Ar(A.end_date)?"Dates not set":`${jr(A.start_date)} - ${jr(A.end_date)}`}</p>
            
            <p style="margin: 24px 0; font-size: 16px; color: #333; line-height: 1.6;">Click the button below to sign in and cast your votes.</p>
            
            <!-- Go Vote Button - Gold styling like admin email -->
            <table width="100%" cellpadding="0" cellspacing="0" border="0" style="margin: 32px 0;">
              <tr>
                <td align="center">
                  <a href="${$}" style="display: inline-block; padding: 12px 24px; background-color: #C89212; color: white; text-decoration: none; border-radius: 6px; font-weight: 600; font-size: 16px; box-shadow: 0 1px 2px 0 rgba(0, 0, 0, 0.05);">Go Vote!</a>
                </td>
              </tr>
            </table>
            
            <p style="margin: 24px 0 0 0; font-size: 14px; color: #6b7280; line-height: 1.6;">Need help? Reach out to the session admin team.</p>
            
            <p style="margin: 24px 0 0 0; font-size: 16px; color: #333; line-height: 1.6;">Thanks,<br />${(e==null?void 0:e.name)||"Feature Voting System"}</p>
          </td>
        </tr>
        
        <!-- Footer -->
        <tr>
          <td style="background-color: #f9fafb; padding: 20px; text-align: center; border-top: 1px solid #e5e7eb; font-size: 12px; color: #6b7280;">
            <p style="margin: 0 0 8px 0;">This is an automated message from the Feature Voting System.</p>
            <p style="margin: 0; color: #9ca3af;"> ${new Date().getFullYear()} New Millennium Building Systems</p>
          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>`},Bi=async(A,$)=>{A.stopPropagation();const R=window.location.pathname.startsWith("/feature-voting-app")?"/feature-voting-app":"",ne=`${window.location.origin}${R}/login?session=${$.session_code}`;Ie(""),Dt($),be(ne),en(xi($)),Xs(vo($)),Cr(!0),Oe(!0),Kt([]),_r([]);try{const Re=(await wv($.id)).filter(bt=>!!bt.user_email),oe=await vv(),ue=new Set(oe.map(bt=>bt.email.toLowerCase())),Ye=Re.filter(bt=>ue.has(bt.user_email.toLowerCase()));Kt(Ye),_r(Ye.map(bt=>bt.user_email.toLowerCase())),Ye.length===0&&(Re.length>0?Ie("No active stakeholders found for this session. Some stakeholders may have been deleted. Add stakeholders first, then send invites."):Ie("No stakeholders found for this session. Add stakeholders first, then send invites."))}catch(ge){console.error("Error loading stakeholders:",ge),Ie(ge.message||"Failed to load stakeholders for this session.")}finally{Oe(!1)}},wi=(A,$)=>{A.stopPropagation(),t($),i(`/results?perspective=${H==="system-admin"?"system":"session"}`)},Pr=()=>{Cr(!1),Kt([]),_r([]),Dt(null),Ie("")},bi=A=>{_r($=>{const R=A.toLowerCase();return $.includes(R)?$.filter(ne=>ne!==R):[...$,R]})},xo=()=>{_r(gr?[]:dt)},wo=async()=>{if(!Lt)return;if(Er.length===0){Ie("Select at least one stakeholder to email.");return}Ie(""),_e(!0);const A=Er.length,$=Lt.title,R=ps||vo(Lt),ne=Sn||xi(Lt),ge=`
      <table width="100%" cellpadding="0" cellspacing="0" border="0" style="margin: 24px 0;">
        <tr>
          <td align="center">
            <a href="${X}" style="display: inline-block; padding: 12px 24px; background-color: #C89212; color: white; text-decoration: none; border-radius: 6px; font-weight: 600; font-size: 16px; box-shadow: 0 1px 2px 0 rgba(0, 0, 0, 0.05);">Go Vote!</a>
          </td>
        </tr>
      </table>
    `;let Re;if(ps){const oe="https://dcchoffman.github.io/feature-voting-app/New-Millennium-color-logo1.png";let ue=ma(R);X&&ue.includes(ti(X))&&(ue=ue.replace(new RegExp(ti(X),"g"),"")),ue=ue+ge,Re=`
<table width="100%" cellpadding="0" cellspacing="0" border="0" style="background-color: #f9fafb; font-family: Arial, sans-serif;">
  <tr>
    <td align="center" style="padding: 48px 20px;">
      <table width="600" cellpadding="0" cellspacing="0" border="0" style="background-color: #ffffff; border-radius: 8px; box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);">
        <!-- Logo Header -->
        <tr>
          <td style="background-color: #ffffff; padding: 32px 40px 24px 40px; text-align: center;">
            <img src="${oe}" alt="New Millennium Building Systems" width="300" height="96" style="height: 96px; width: auto; max-width: 300px; display: block; margin: 0 auto; border: 0;" />
            <div style="font-size: 24px; font-weight: bold; color: #2d4660; margin-top: 16px;">You're Invited to Vote</div>
          </td>
        </tr>
        
        <!-- Main Content -->
        <tr>
          <td style="background-color: #ffffff; padding: 40px;">
            <div style="font-family: Arial, sans-serif; font-size: 14px; color: #111827; line-height: 1.6;">${ue}</div>
          </td>
        </tr>
        
        <!-- Footer -->
        <tr>
          <td style="background-color: #f9fafb; padding: 20px; text-align: center; border-top: 1px solid #e5e7eb; font-size: 12px; color: #6b7280;">
            <p style="margin: 0 0 8px 0;">This is an automated message from the Feature Voting System.</p>
            <p style="margin: 0; color: #9ca3af;"> ${new Date().getFullYear()} New Millennium Building Systems</p>
          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>`}else Re=Ui(Lt,X);try{await Promise.all(Er.map(ue=>Kc({to:ue,subject:ne,text:R,html:Re})));const oe=Kr.filter(ue=>Er.includes(ue.user_email.toLowerCase())).map(ue=>({name:ue.user_name||"Unnamed Stakeholder",email:ue.user_email}));Pr(),Zt({sessionTitle:$,count:A,stakeholders:oe})}catch(oe){console.error("Error sending stakeholder invites:",oe),Ie(oe.message||"Failed to send invites. Please try again.")}finally{_e(!1)}},pa=(A,$)=>{A.stopPropagation(),t($);const R=$.product_id||$.productId||"",ne=R?`/users?filter=session-admin&product=${R}`:"/users?filter=session-admin";i(ne)},ga=(A,$)=>{A.stopPropagation(),t($);const R=$.product_id||$.productId||"",ne=R?`/users?filter=stakeholder&product=${R}`:"/users?filter=stakeholder";i(ne)},Wi=()=>{he(!1),hr(!1),Jt(!1),Ut(),se("")};if(u)return a.jsx("div",{className:"min-h-screen w-full bg-gray-50 flex items-center justify-center",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-[#2D4660] mx-auto mb-4"}),a.jsx("p",{className:"text-gray-600",children:"Loading sessions..."})]})});const cn=vi(v),Jr=F?cn:cn.filter(A=>{var $;return($=b[A.id])==null?void 0:$.isAdmin}),kn=F?[]:cn.filter(A=>{var $,R;return(($=b[A.id])==null?void 0:$.isStakeholder)&&!((R=b[A.id])!=null&&R.isAdmin)}),Hn=F||Jr.length>0,Vi=F&&H==="system-admin",Rs=H==="stakeholder"?cn.filter(A=>os(A).text==="Active"):[],ls=H==="admin"||H==="system-admin"?Jr:[],qi=H==="admin"?kn:[],w=(A,$)=>{const R={};return A.forEach(ne=>{const ge=kr(ne,$);if(!ge||ge==="No Product"||ge.trim()==="")return;const Re=ge.toLowerCase().trim();R[Re]||(R[Re]=[]),R[Re].push(ne)}),R},D=A=>{rt($=>{const R=new Set($);return R.has(A)?R.delete(A):R.add(A),R})},Z=(A,$,R,ne)=>{const ge=ne||R||A,Re=async oe=>{if(!R)return;oe.stopPropagation();let ue=J.find(Ye=>Ye.id===R);if(!ue){const Ye=(e==null?void 0:e.tenant_id)??(e==null?void 0:e.tenantId);if(Ye)try{ue=(await Bo(Ye)).find(nt=>nt.id===R),ue&&je(nt=>nt.find(_t=>_t.id===R)?nt:[...nt,ue].sort((_t,Ae)=>_t.name.localeCompare(Ae.name)))}catch(bt){console.error("Error loading product for edit:",bt)}}ue&&(lr(ue),Hr(ue.name||""),vr(ue.color_hex||null),Dn(ue.color_hex||"#2D4660"))};return a.jsxs("div",{className:"absolute left-0 px-4 py-1 pr-8 rounded-t-md border-b-0 text-sm font-semibold shadow-sm z-20 flex items-center gap-2 whitespace-nowrap group cursor-pointer",style:{top:"0",left:"-1px",transform:"translateY(-100%)",backgroundColor:$.background,color:$.text,borderColor:$.border,borderWidth:"1px",borderBottomWidth:"0",boxShadow:"0 4px 8px rgba(16,24,40,0.06)",borderTopLeftRadius:"0.9rem",borderTopRightRadius:"0.9rem",overflow:"visible"},onMouseEnter:()=>{R&&H!=="stakeholder"&&Hn&&bn(ge)},onMouseLeave:()=>bn(null),onClick:H!=="stakeholder"&&Hn?Re:void 0,children:[a.jsx(Ev,{className:"h-4 w-4 flex-shrink-0"}),a.jsx("span",{className:"overflow-hidden text-ellipsis flex-1 min-w-0",children:A}),R&&nr===ge&&H!=="stakeholder"&&Hn&&a.jsx("div",{className:"absolute right-2 flex-shrink-0 opacity-80",children:a.jsx(Vh,{className:"h-4 w-4",style:{color:$.text}})})]})},ae=(A,$,R,ne,ge,Re,oe,ue=!0,Ye)=>a.jsxs(a.Fragment,{children:[ue&&Z($,R,Ye),a.jsxs("div",{className:"flex flex-col h-full",children:[a.jsx("div",{className:"w-full px-6 py-2 rounded-t-md border-b border-gray-200",style:{backgroundColor:R.background,color:R.text},children:a.jsx("h3",{className:"text-lg font-semibold",children:A.title})}),a.jsxs("div",{className:"flex flex-col flex-1",style:{padding:"15px"},children:[H!=="stakeholder"&&(()=>{const bt=_t=>{if(!_t||Ar(_t))return 0;const Ae=new Date(_t),Et=new Date;Et.setHours(0,0,0,0),Ae.setHours(0,0,0,0);const Qe=Ae.getTime()-Et.getTime();return Math.ceil(Qe/(1e3*60*60*24))};let nt="Cast your Votes",mt=!1;if(ne.text==="Upcoming"){const _t=bt(A.start_date);nt=`Cast your Vote in ${_t} ${_t===1?"day":"days"}`,mt=!0}else ne.text==="Closed"||ne.text==="Draft"?(nt="Voting Session Closed",mt=!0):ne.text==="Active"?(nt="Cast your Votes",mt=!1):(nt="Voting Session Closed",mt=!0);return a.jsxs("button",{onClick:_t=>{_t.stopPropagation(),mt||gs(A)},disabled:mt,className:`w-full flex items-center justify-center px-3 py-2 rounded-md transition-colors mb-4 ${mt?"bg-gray-200 text-gray-500 cursor-not-allowed":"bg-[#1E6154]/10 hover:bg-[#1E6154]/20 text-[#1E6154]"}`,style:mt?{cursor:"not-allowed"}:{},children:[a.jsx(Ln,{className:`h-4 w-4 mr-2 ${mt?"text-gray-500":"text-[#1E6154]"}`}),a.jsx("span",{className:`text-sm font-medium ${mt?"text-gray-500":"text-[#1E6154]"}`,children:nt})]})})(),a.jsx("p",{className:"text-sm text-gray-600 mb-4 line-clamp-2",children:A.goal}),a.jsx("div",{className:"flex-1"}),a.jsxs("div",{className:"space-y-2 text-sm text-gray-500",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center",children:[a.jsx(An,{className:"h-4 w-4 mr-2"}),Ar(A.start_date)||Ar(A.end_date)?a.jsx("span",{className:"text-gray-400 italic",children:"Dates not set"}):a.jsxs("span",{children:[jr(A.start_date)," - ",jr(A.end_date)]})]}),a.jsxs("span",{className:`inline-flex items-center ${ne.text==="Active"?"px-3 py-1 text-sm":"px-2 py-0.5 text-xs"} rounded-full font-medium ${ne.color}`,children:[a.jsx(ge,{className:`${ne.text==="Active"?"h-4 w-4":"h-3 w-3"} mr-1`}),ne.text]})]}),a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center",children:[a.jsx(ta,{className:"h-4 w-4 mr-2"}),a.jsxs("span",{children:[j[A.id]||0," ",j[A.id]===1?"feature":"features"]})]}),a.jsx("span",{className:"text-sm font-medium text-[#2D4660]",children:$})]}),a.jsxs("div",{className:"flex items-start",children:[a.jsx(Ln,{className:"h-4 w-4 mr-2 mt-0.5 flex-shrink-0"}),a.jsxs("div",{className:"flex-1 flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center",children:[a.jsx("span",{className:"break-words",children:Re.displayText}),Re.isAuto&&a.jsxs("div",{className:"group relative ml-1 mt-0.5",children:[a.jsx(ld,{className:"h-4 w-4 text-blue-500 cursor-help"}),a.jsxs("div",{className:"absolute bottom-full left-1/2 -translate-x-1/2 mb-2 px-3 py-2 bg-gray-900 text-white text-xs rounded-lg opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-200 whitespace-nowrap z-10 pointer-events-none",children:[Re.formula,a.jsx("div",{className:"absolute top-full left-1/2 -translate-x-1/2 -mt-1 border-4 border-transparent border-t-gray-900"})]})]})]}),ne.text!=="Upcoming"&&ne.text!=="Draft"&&H!=="stakeholder"&&a.jsxs("button",{onClick:bt=>wi(bt,A),className:"ml-4 inline-flex items-center px-3 py-1 rounded-full text-xs font-medium bg-[#C89212] text-white hover:bg-[#E0A814] transition-colors cursor-pointer flex-shrink-0",children:[a.jsx(Ch,{className:"h-3 w-3 mr-1"}),ne.text==="Closed"?"Final Results":"Current Results"]})]})]}),H!=="stakeholder"&&a.jsxs("div",{className:"flex items-center justify-center min-h-[48px] border-t border-gray-200 text-sm text-gray-600",children:[a.jsxs("button",{onClick:bt=>{bt.stopPropagation(),pa(bt,A)},className:"flex items-center mr-3 text-[#2D4660] hover:text-[#1D3144] hover:underline cursor-pointer",children:[a.jsx(Rr,{className:"h-4 w-4 mr-1.5"}),I[A.id]!==void 0?I[A.id]:0," Session Admin",I[A.id]!==1?"s":""]}),a.jsx("span",{className:"text-gray-400",children:""}),a.jsxs("button",{onClick:bt=>{bt.stopPropagation(),ga(bt,A)},className:"flex items-center ml-3 text-[#1E5461] hover:text-[#576C71] hover:underline cursor-pointer",children:[a.jsx(Qn,{className:"h-4 w-4 mr-1.5"}),O[A.id]!==void 0?O[A.id]:0," Stakeholder",O[A.id]!==1?"s":""]})]}),H==="stakeholder"&&(()=>{const bt=_t=>{if(!_t||Ar(_t))return 0;const Ae=new Date(_t),Et=new Date;Et.setHours(0,0,0,0),Ae.setHours(0,0,0,0);const Qe=Ae.getTime()-Et.getTime();return Math.ceil(Qe/(1e3*60*60*24))};let nt="Cast your Votes",mt=!1;if(ne.text==="Upcoming"){const _t=bt(A.start_date);nt=`Cast your Vote in ${_t} ${_t===1?"day":"days"}`,mt=!0}else ne.text==="Closed"||ne.text==="Draft"?(nt="Voting Session Closed",mt=!0):ne.text==="Active"?(nt="Cast your Votes",mt=!1):(nt="Voting Session Closed",mt=!0);return a.jsxs("button",{onClick:_t=>{_t.stopPropagation(),mt||gs(A)},disabled:mt,className:`w-full flex items-center justify-center px-3 py-2 rounded-md transition-colors mt-4 ${mt?"bg-gray-200 text-gray-500 cursor-not-allowed":"bg-[#1E6154]/10 hover:bg-[#1E6154]/20 text-[#1E6154]"}`,style:mt?{cursor:"not-allowed"}:{},children:[a.jsx(Ln,{className:`h-6 w-6 mr-2 ${mt?"text-gray-500":"text-[#1E6154]"}`}),a.jsx("span",{className:`text-sm font-medium ${mt?"text-gray-500":"text-[#1E6154]"}`,children:nt})]})})()]}),H!=="stakeholder"&&a.jsx("div",{className:"pt-4 border-t border-gray-200",children:(()=>{const bt=ei(A),nt=oe||bt;return a.jsxs("div",{className:`relative inline-block w-full ${nt?"group":""}`,children:[a.jsxs("button",{onClick:mt=>Bi(mt,A),disabled:nt,className:`w-full flex items-center justify-center px-3 py-2 rounded-md transition-colors ${nt?"bg-gray-200 text-gray-500":"bg-blue-50 hover:bg-blue-100"}`,style:nt?{cursor:"not-allowed"}:{},children:[a.jsx(Jm,{className:`h-4 w-4 mr-2 ${nt?"text-gray-500":"text-blue-600"}`}),a.jsx("span",{className:`text-sm font-medium ${nt?"text-gray-500":"text-blue-600"}`,children:"Email Invite to Stakeholders"})]}),nt&&a.jsxs("div",{className:"absolute top-full left-1/2 -translate-x-1/2 mt-2 px-2 py-1 bg-gray-100 text-gray-800 text-xs rounded shadow-sm opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-200 whitespace-nowrap z-10 pointer-events-none",children:[bt?"Draft Session":"Session Closed",a.jsx("div",{className:"absolute -top-1 left-1/2 -translate-x-1/2 w-2 h-2 bg-gray-100 rotate-45 transform"})]})]})})()})]})]})]});return s||m||u&&!e?a.jsx("div",{className:"min-h-screen w-full bg-gray-50 flex items-center justify-center",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-[#2d4660] mx-auto mb-4"}),a.jsx("p",{className:"text-gray-600",children:"Signing you in..."})]})}):a.jsxs("div",{className:"container mx-auto p-4 max-w-6xl min-h-screen pb-8",children:[a.jsx("div",{className:"hidden md:flex md:justify-center mb-2",children:a.jsx("img",{src:$a,alt:"New Millennium Building Systems Logo",className:"-mt-4 cursor-pointer hover:opacity-80 transition-opacity",style:{height:"96px",width:"auto"},onClick:()=>i("/sessions")})}),a.jsxs("div",{className:"flex justify-between items-center mb-6",children:[a.jsxs("div",{className:"flex items-center",children:[a.jsx("img",{src:Jl,alt:"New Millennium Building Systems Logo",className:"mr-4 md:hidden cursor-pointer hover:opacity-80 transition-opacity",style:{width:"40px",height:"40px",objectFit:"contain"},onClick:()=>i("/sessions")}),a.jsxs("div",{children:[a.jsx("h1",{className:"text-2xl font-bold text-[#2D4660] md:text-3xl",children:"My Voting Sessions"}),a.jsxs("p",{className:"text-sm text-gray-600",children:["Welcome, ",e==null?void 0:e.name,(()=>{const A=F?"system-admin":Jr.length>0?"session-admin":"stakeholder",$=A==="system-admin"?a.jsxs("span",{className:"inline-flex items-baseline text-[#C89212]",children:[a.jsx("span",{className:"inline-flex items-center",children:a.jsx(Br,{className:"h-3.5 w-3.5"})}),a.jsx("span",{className:"ml-1 text-sm",children:"System Admin"})]}):A==="session-admin"?a.jsxs("span",{className:"inline-flex items-baseline text-[#576C71]",children:[a.jsx("span",{className:"inline-flex items-center",children:a.jsx(Rr,{className:"h-3.5 w-3.5"})}),a.jsx("span",{className:"ml-1 text-sm",children:"Session Admin"})]}):a.jsxs("span",{className:"inline-flex items-baseline text-[#8B5A4A]",children:[a.jsx("span",{className:"inline-flex items-center",children:a.jsx(gn,{className:"h-3.5 w-3.5"})}),a.jsx("span",{className:"ml-1 text-sm",children:"Stakeholder"})]}),R=F&&H==="system-admin"?"system-admin":H==="admin"?"session-admin":"stakeholder";if(R===A)return a.jsxs("span",{className:"text-sm text-gray-600",children:[", ",$]});const ne=R==="system-admin"?a.jsxs("span",{className:"inline-flex items-baseline text-[#C89212]",children:[a.jsx("span",{className:"inline-flex items-center",children:a.jsx(Br,{className:"h-3.5 w-3.5"})}),a.jsx("span",{className:"ml-1 text-sm",children:"System Admin"})]}):R==="session-admin"?a.jsxs("span",{className:"inline-flex items-baseline text-[#576C71]",children:[a.jsx("span",{className:"inline-flex items-center",children:a.jsx(Rr,{className:"h-3.5 w-3.5"})}),a.jsx("span",{className:"ml-1 text-sm",children:"Session Admin"})]}):a.jsxs("span",{className:"inline-flex items-baseline text-[#8B5A4A]",children:[a.jsx("span",{className:"inline-flex items-center",children:a.jsx(gn,{className:"h-3.5 w-3.5"})}),a.jsx("span",{className:"ml-1 text-sm",children:"Stakeholder"})]});return a.jsxs("span",{className:"text-sm text-gray-600",children:[", ",$,a.jsx("span",{className:"md:inline hidden",children:", "}),a.jsxs("span",{className:"whitespace-nowrap md:inline inline-block",children:[a.jsx("span",{className:"md:hidden",children:", "}),"viewing this page as a ",ne]})]})})()]})]})]}),a.jsxs("div",{ref:q,className:"relative z-40 md:justify-end",children:[a.jsxs("div",{className:"hidden md:flex space-x-2",children:[F&&(H==="admin"||H==="system-admin")&&a.jsx(a.Fragment,{children:a.jsxs("button",{onClick:()=>i("/users"),className:"flex items-center px-4 py-2 bg-[#2D4660] text-white rounded-lg hover:bg-[#173B65] transition-colors",children:[a.jsx(Qn,{className:"h-4 w-4 mr-2"}),"User Management"]})}),(F||Jr.length>0)&&(H==="admin"||H==="system-admin")&&a.jsx(a.Fragment,{children:a.jsxs("button",{onClick:()=>{Ut(),hr(!1),re(!0),se(""),he(!0)},className:"flex items-center px-4 py-2 bg-[#C89212] text-white rounded-lg hover:bg-[#6A4234] transition-colors",children:[a.jsx(dn,{className:"h-4 w-4 mr-2"}),a.jsx("span",{className:"hidden sm:inline",children:"Create Session"}),a.jsx("span",{className:"sm:hidden",children:"Create"})]})}),a.jsxs("button",{onClick:ys,className:`flex items-center justify-center bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-colors ${H==="stakeholder"?"px-4 py-2":"p-2 w-10 h-10"}`,title:"Logout",children:[a.jsx(pi,{className:"h-4 w-4"}),H==="stakeholder"&&a.jsx("span",{className:"ml-2",children:"Logout"})]})]}),a.jsx("div",{className:"flex md:hidden justify-end",children:a.jsx("button",{onClick:()=>ie(!K),className:"p-2 rounded-md border border-gray-200 bg-white shadow-sm","aria-label":"Open menu",children:a.jsx(ta,{className:"h-5 w-5 text-gray-700"})})}),K&&a.jsx("div",{className:"absolute right-0 mt-2 w-56 bg-white border border-gray-200 rounded-lg shadow-lg md:hidden z-50",children:a.jsxs("div",{className:"py-1",children:[F&&(H==="admin"||H==="system-admin")&&a.jsx(a.Fragment,{children:a.jsxs("button",{onClick:()=>{ie(!1),i("/users")},className:"w-full px-3 py-2 flex items-center text-left hover:bg-gray-50",children:[a.jsx(Qn,{className:"h-4 w-4 mr-2 text-gray-700"}),"User Management"]})}),(F||Jr.length>0)&&(H==="admin"||H==="system-admin")&&a.jsx(a.Fragment,{children:a.jsxs("button",{onClick:()=>{Ut(),ie(!1),re(!0),he(!0)},className:"w-full px-3 py-2 flex items-center text-left hover:bg-gray-50",children:[a.jsx(dn,{className:"h-4 w-4 mr-2 text-gray-700"}),"Create Session"]})}),a.jsxs("button",{onClick:()=>{ie(!1),ys()},className:`w-full px-3 py-2 flex items-center hover:bg-gray-50 ${H==="stakeholder"?"text-left":"justify-center"}`,title:"Logout",children:[a.jsx(pi,{className:"h-4 w-4 text-gray-700"}),H==="stakeholder"&&a.jsx("span",{className:"ml-2 text-base text-gray-700",children:"Logout"})]})]})})]})]}),v.length===0?a.jsxs("div",{className:"bg-white rounded-lg shadow-md p-12 text-center",children:[a.jsx(Ln,{className:"mx-auto h-12 w-12 text-gray-400 mb-4"}),a.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No voting sessions"}),a.jsx("p",{className:"text-sm text-gray-500 mb-6",children:"You are not part of any voting sessions yet."}),F&&a.jsxs("button",{onClick:()=>{Ut(),re(!0),he(!0)},className:"inline-flex items-center px-4 py-2 bg-[#2D4660] text-white rounded-lg hover:bg-[#173B65] transition-colors",children:[a.jsx(dn,{className:"h-5 w-5 mr-2"}),"Create Your First Session"]})]}):a.jsxs("div",{className:"space-y-8",children:[H==="stakeholder"&&a.jsxs("div",{children:[a.jsxs("h2",{className:"text-xl font-semibold text-[#2D4660] mb-4 flex items-center",children:[a.jsx(Ln,{className:"h-5 w-5 mr-2"}),"All Your Voting Sessions"]}),(()=>{const A=Rs.filter(oe=>{const ue=kr(oe,G);return ue&&ue!=="No Product"&&ue.trim()!==""}),$=Rs.filter(oe=>{const ue=kr(oe,G);return!ue||ue==="No Product"||ue.trim()===""}),R=w(A,G),ne=[],ge=[],Re=[];return Object.entries(R).forEach(([oe,ue])=>{ue.length>=2?ne.push({key:oe,sessions:ue}):ue.length===1?ge.push({key:oe,sessions:ue}):Re.push(...ue)}),a.jsxs("div",{className:"space-y-8",children:[ne.map(({key:oe,sessions:ue})=>{var et,St;const Ye=sr.has(oe),bt=Ye?ue:ue.slice(0,3),nt=ue.length>3?ue.length-3:0,mt=kr(ue[0],G),_t=(et=ue[0])!=null&&et.product_id?M[ue[0].product_id]:void 0,Ae=on(mt,_t),Et=(it,Vt)=>{const ft=it.replace("#",""),er=parseInt(ft.substring(0,2),16),Tr=parseInt(ft.substring(2,4),16),rn=parseInt(ft.substring(4,6),16);return`rgba(${er}, ${Tr}, ${rn}, ${Vt})`},Qe=Ae.background?Et(Ae.background,.1):"#F9FAFB";return a.jsx("div",{className:"relative",style:{marginTop:"50px"},children:a.jsxs("div",{className:"rounded-lg rounded-tl-none border border-gray-200 relative overflow-visible",style:{backgroundColor:Qe,borderColor:Ae.border||"#E5E7EB",padding:"24px",marginTop:H==="stakeholder"?"25px":void 0},children:[Z(mt,Ae,(St=ue[0])==null?void 0:St.product_id,oe),nt>0&&a.jsx("div",{className:"absolute right-0 z-20 hidden md:block",style:{top:"0",transform:"translateY(calc(-100% - 3px))"},children:a.jsx("button",{onClick:()=>D(oe),className:"flex items-center gap-1 text-sm text-[#2D4660] hover:text-[#173B65] transition-colors cursor-pointer",children:Ye?a.jsxs(a.Fragment,{children:["Show Less",a.jsx(ks,{className:"h-4 w-4 rotate-180"})]}):a.jsxs(a.Fragment,{children:["Show More (",nt,")",a.jsx(ks,{className:"h-4 w-4"})]})})}),Hn&&H!=="stakeholder"&&a.jsx("div",{className:"absolute z-20 bottom-[-20px] left-1/2 -translate-x-1/2 md:bottom-auto md:left-auto md:translate-x-0 md:right-[-20px] md:top-1/2 md:-translate-y-1/2",children:a.jsx("button",{onClick:it=>{var rn;it.stopPropagation();const Vt=(rn=ue[0])==null?void 0:rn.product_id,ft=kr(ue[0],G);Vt&&se(Vt),ft&&ft!=="No Product"&&Ft(ft);let er=ue.length>0?Xt(ue[0].end_date):new Date;ue.forEach(Ms=>{const vs=Xt(Ms.end_date);vs>er&&(er=vs)});const Tr=cr(er,1);cr(Tr,14),Ut(),se(Vt),hr(!0),re(!1),Jt(!0),he(!0)},onMouseEnter:()=>ir(oe),onMouseLeave:()=>ir(null),className:"flex items-center justify-center w-10 h-10 rounded-full shadow-md",style:{backgroundColor:Ae.background||"#C89212",color:Ae.text||"#FFFFFF"},title:`Create new session for ${mt}`,children:a.jsx(dn,{className:"h-5 w-5"})})}),a.jsx("div",{className:"grid grid-cols-1 gap-6 sm:grid-cols-2 lg:grid-cols-3",children:bt.map((it,Vt)=>{const ft=os(it),er=ft.text==="Closed",Tr=ft.icon,rn=as(it),Ms=E[it.id],vs=kr(it,G),Dp=it.product_id?M[it.product_id]:void 0,$p=on(vs,Dp);return a.jsx("div",{className:"relative z-10 bg-white overflow-visible shadow-md rounded-lg hover:shadow-lg transition-shadow cursor-pointer border",style:{borderColor:$p.border,borderWidth:"1px",opacity:er&&Qt!==it.id?.75:1},onMouseEnter:()=>pr(it.id),onMouseLeave:()=>pr(null),onClick:()=>Yr(it),children:a.jsxs("div",{className:"flex flex-col h-full",style:{padding:"15px"},children:[a.jsx("div",{className:"flex justify-end items-start mb-4",children:Ms?a.jsxs("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-xs font-medium bg-green-100 text-green-800",children:[a.jsx(Mr,{className:"h-3 w-3 mr-1"}),"Voted"]}):ft.text==="Active"?a.jsxs("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:[a.jsx(an,{className:"h-3 w-3 mr-1"}),"Needs Your Vote"]}):null}),a.jsx("h3",{className:"text-lg font-semibold text-[#2D4660] mb-2",children:it.title}),a.jsx("p",{className:"text-sm text-gray-600 mb-4 line-clamp-2",children:it.goal}),a.jsx("div",{className:"flex-1"}),a.jsxs("div",{className:"space-y-2 text-sm text-gray-500",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center",children:[a.jsx(An,{className:"h-4 w-4 mr-2"}),a.jsxs("span",{children:[jr(it.start_date)," - ",jr(it.end_date)]})]}),a.jsxs("span",{className:`inline-flex items-center ${ft.text==="Active"?"px-3 py-1 text-sm":"px-2 py-0.5 text-xs"} rounded-full font-medium ${ft.color}`,children:[a.jsx(Tr,{className:`${ft.text==="Active"?"h-4 w-4":"h-3 w-3"} mr-1`}),ft.text]})]}),a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center",children:[a.jsx(ta,{className:"h-4 w-4 mr-2"}),a.jsxs("span",{children:[j[it.id]||0," ",j[it.id]===1?"feature":"features"," to vote on"]})]}),a.jsx("span",{className:"text-sm font-medium text-[#2D4660]",children:vs})]}),a.jsxs("div",{className:"flex items-center",children:[a.jsx(Ln,{className:"h-4 w-4 mr-2"}),a.jsx("span",{children:rn.displayText}),rn.isAuto&&a.jsxs("div",{className:"group relative ml-1",children:[a.jsx(ld,{className:"h-4 w-4 text-blue-500 cursor-help"}),a.jsxs("div",{className:"absolute bottom-full left-1/2 -translate-x-1/2 mb-2 px-3 py-2 bg-gray-900 text-white text-xs rounded-lg opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-200 whitespace-nowrap z-10 pointer-events-none",children:[rn.formula,a.jsx("div",{className:"absolute top-full left-1/2 -translate-x-1/2 -mt-1 border-4 border-transparent border-t-gray-900"})]})]})]})]}),a.jsx("div",{className:"mt-4 pt-4 border-t border-gray-200",children:a.jsxs("button",{onClick:Rp=>{Rp.stopPropagation(),er||Yr(it)},disabled:er,className:`w-full flex items-center justify-center px-4 py-2 rounded-lg transition-colors font-medium ${er?"bg-gray-100 text-gray-500 cursor-not-allowed":Ms?"bg-gray-100 text-gray-700 hover:bg-gray-200":"bg-[#2D4660] text-white hover:bg-[#173B65]"}`,style:er?{cursor:"not-allowed"}:{},children:[a.jsx(Ln,{className:"h-4 w-4 mr-2"}),Ms?"View or Change Votes":"Cast Your Votes"]})})]})},it.id)})}),nt>0&&a.jsx("div",{className:"mt-4 md:hidden",children:a.jsx("button",{onClick:()=>D(oe),className:"w-full flex items-center justify-center gap-1 px-4 py-2 text-sm font-medium text-[#2D4660] bg-white hover:bg-gray-50 rounded-md border border-gray-300 transition-colors",children:Ye?a.jsxs(a.Fragment,{children:["Show Less",a.jsx(ks,{className:"h-4 w-4 rotate-180"})]}):a.jsxs(a.Fragment,{children:["Show More (",nt,")",a.jsx(ks,{className:"h-4 w-4"})]})})})]})},oe)}),ge.length>0&&a.jsx("div",{className:"grid grid-cols-1 gap-6 sm:grid-cols-2 lg:grid-cols-3",style:{marginTop:H==="stakeholder"?"30px":"50px"},children:ge.map(({key:oe,sessions:ue})=>{var Ae,Et;const Ye=kr(ue[0],G),bt=(Ae=ue[0])!=null&&Ae.product_id?M[ue[0].product_id]:void 0,nt=on(Ye,bt),mt=(Qe,et)=>{const St=Qe.replace("#",""),it=parseInt(St.substring(0,2),16),Vt=parseInt(St.substring(2,4),16),ft=parseInt(St.substring(4,6),16);return`rgba(${it}, ${Vt}, ${ft}, ${et})`},_t=nt.background?mt(nt.background,.1):"#F9FAFB";return a.jsx("div",{className:"relative",children:a.jsxs("div",{className:"rounded-lg rounded-tl-none border border-gray-200 relative overflow-visible",style:{backgroundColor:_t,borderColor:nt.border||"#E5E7EB",padding:"24px",marginTop:H==="stakeholder"?"25px":void 0},children:[Z(Ye,nt,(Et=ue[0])==null?void 0:Et.product_id,oe),Hn&&H!=="stakeholder"&&a.jsx("div",{className:"absolute z-20 bottom-[-20px] left-1/2 -translate-x-1/2 md:bottom-auto md:left-auto md:translate-x-0 md:right-[-20px] md:top-1/2 md:-translate-y-1/2",children:a.jsx("button",{onClick:Qe=>{var ft;Qe.stopPropagation();const et=(ft=ue[0])==null?void 0:ft.product_id,St=kr(ue[0],G);et&&se(et),St&&St!=="No Product"&&Ft(St);let it=Xt(ue[0].end_date);const Vt=cr(it,1);cr(Vt,14),Ut(),se(et),hr(!0),re(!1),Jt(!0),he(!0)},onMouseEnter:()=>ir(oe),onMouseLeave:()=>ir(null),className:"flex items-center justify-center w-10 h-10 rounded-full shadow-md",style:{backgroundColor:nt.background||"#C89212",color:nt.text||"#FFFFFF"},title:`Create new session for ${Ye}`,children:a.jsx(dn,{className:"h-5 w-5"})})}),ue.map(Qe=>{const et=os(Qe),St=et.text==="Closed",it=et.icon,Vt=as(Qe);E[Qe.id];const ft=kr(Qe,G),er=Qe.product_id?M[Qe.product_id]:void 0,Tr=on(ft,er);return a.jsx("div",{className:"relative z-10 bg-white overflow-visible shadow-md rounded-lg hover:shadow-lg transition-shadow cursor-pointer border",style:{borderColor:Tr.border,borderWidth:"1px",opacity:St&&Qt!==Qe.id?.75:1},onMouseEnter:()=>pr(Qe.id),onMouseLeave:()=>pr(null),onClick:()=>Yr(Qe),children:ae(Qe,ft,Tr,et,it,Vt,St,!1,Qe.product_id)},Qe.id)})]})},oe)})}),(Re.length>0||$.length>0)&&a.jsx("div",{className:"grid grid-cols-1 gap-0 sm:gap-6 sm:grid-cols-2 lg:grid-cols-3",children:[...Re,...$].map(oe=>{const ue=os(oe),Ye=ue.text==="Closed",bt=ue.icon,nt=as(oe),mt=E[oe.id],_t=kr(oe,G),Ae=oe.product_id?M[oe.product_id]:void 0,Et=on(_t,Ae),Qe=Re.includes(oe);return a.jsxs("div",{className:"relative z-10 bg-white overflow-visible shadow-md rounded-lg rounded-tl-none hover:shadow-lg transition-shadow cursor-pointer mt-6 border",style:{borderColor:Et.border,borderWidth:"1px",opacity:Ye&&Qt!==oe.id?.75:1},onMouseEnter:()=>pr(oe.id),onMouseLeave:()=>pr(null),onClick:()=>Yr(oe),children:[Z(_t,Et,oe.product_id),Qe&&Hn&&H!=="stakeholder"&&a.jsx("div",{className:"absolute z-20 bottom-[-20px] left-1/2 -translate-x-1/2 md:bottom-auto md:left-auto md:translate-x-0 md:right-[-20px] md:top-1/2 md:-translate-y-1/2",children:a.jsx("button",{onClick:et=>{et.stopPropagation();const St=oe.product_id,it=kr(oe,G);St&&se(St),it&&it!=="No Product"&&Ft(it);const Vt=Xt(oe.end_date),ft=cr(Vt,1);cr(ft,14),Ut(),se(St),hr(!0),re(!1),Jt(!0),he(!0)},className:"flex items-center justify-center w-10 h-10 rounded-full transition-colors shadow-md hover:shadow-lg",style:{backgroundColor:Et.background||"#C89212",color:Et.text||"#FFFFFF"},onMouseEnter:et=>{const St=Et.background||"#C89212";et.currentTarget.style.backgroundColor=St,et.currentTarget.style.filter="brightness(0.8)"},onMouseLeave:et=>{et.currentTarget.style.backgroundColor=Et.background||"#C89212",et.currentTarget.style.filter="brightness(1)"},title:`Create new session for ${_t}`,children:a.jsx(dn,{className:"h-5 w-5"})})}),a.jsxs("div",{className:"flex flex-col h-full",style:{padding:"15px"},children:[a.jsx("div",{className:"flex justify-end items-start mb-4",children:mt?a.jsxs("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-xs font-medium bg-green-100 text-green-800",children:[a.jsx(Mr,{className:"h-3 w-3 mr-1"}),"Voted"]}):ue.text==="Active"?a.jsxs("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:[a.jsx(an,{className:"h-3 w-3 mr-1"}),"Needs Your Vote"]}):null}),a.jsx("h3",{className:"text-lg font-semibold text-[#2D4660] mb-2",children:oe.title}),a.jsx("p",{className:"text-sm text-gray-600 mb-4 line-clamp-2",children:oe.goal}),a.jsx("div",{className:"flex-1"}),a.jsxs("div",{className:"space-y-2 text-sm text-gray-500",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center",children:[a.jsx(An,{className:"h-4 w-4 mr-2"}),a.jsxs("span",{children:[jr(oe.start_date)," - ",jr(oe.end_date)]})]}),a.jsxs("span",{className:`inline-flex items-center ${ue.text==="Active"?"px-3 py-1 text-sm":"px-2 py-0.5 text-xs"} rounded-full font-medium ${ue.color}`,children:[a.jsx(bt,{className:`${ue.text==="Active"?"h-4 w-4":"h-3 w-3"} mr-1`}),ue.text]})]}),a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center",children:[a.jsx(ta,{className:"h-4 w-4 mr-2"}),a.jsxs("span",{children:[j[oe.id]||0," ",j[oe.id]===1?"feature":"features"," to vote on"]})]}),a.jsx("span",{className:"text-sm font-medium text-[#2D4660]",children:_t})]}),a.jsxs("div",{className:"flex items-center",children:[a.jsx(Ln,{className:"h-4 w-4 mr-2"}),a.jsx("span",{children:nt.displayText}),nt.isAuto&&a.jsxs("div",{className:"group relative ml-1",children:[a.jsx(ld,{className:"h-4 w-4 text-blue-500 cursor-help"}),a.jsxs("div",{className:"absolute bottom-full left-1/2 -translate-x-1/2 mb-2 px-3 py-2 bg-gray-900 text-white text-xs rounded-lg opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-200 whitespace-nowrap z-10 pointer-events-none",children:[nt.formula,a.jsx("div",{className:"absolute top-full left-1/2 -translate-x-1/2 -mt-1 border-4 border-transparent border-t-gray-900"})]})]})]})]}),a.jsx("div",{className:"mt-4 pt-4 border-t border-gray-200",children:a.jsxs("button",{onClick:et=>{et.stopPropagation(),Ye||Yr(oe)},disabled:Ye,className:`w-full flex items-center justify-center px-4 py-2 rounded-lg transition-colors font-medium ${Ye?"bg-gray-100 text-gray-500 cursor-not-allowed":mt?"bg-gray-100 text-gray-700 hover:bg-gray-200":"bg-[#2D4660] text-white hover:bg-[#173B65]"}`,style:Ye?{cursor:"not-allowed"}:{},children:[a.jsx(Ln,{className:"h-4 w-4 mr-2"}),mt?"View or Change Votes":"Cast Your Votes"]})})]})]},oe.id)})})]})})()]}),(H==="admin"||H==="system-admin")&&a.jsxs(a.Fragment,{children:[H==="admin"&&qi.length>0&&a.jsxs("div",{children:[a.jsxs("h2",{className:"text-xl font-semibold text-[#2D4660] mb-4 flex items-center",children:[a.jsx(Ln,{className:"h-5 w-5 mr-2"}),"Your Voting Sessions"]}),a.jsx("div",{className:"grid grid-cols-1 gap-6 sm:grid-cols-2 lg:grid-cols-3",children:qi.map(A=>{const $=os(A),R=$.text==="Closed",ne=$.icon,ge=as(A),Re=E[A.id],oe=kr(A,G),ue=A.product_id?M[A.product_id]:void 0,Ye=on(oe,ue);return a.jsxs("div",{className:"relative z-10 bg-white overflow-visible shadow-md rounded-lg rounded-tl-none hover:shadow-lg transition-shadow cursor-pointer mt-6 border",style:{borderColor:Ye.border,borderWidth:"1px",opacity:R&&Qt!==A.id?.75:1},onMouseEnter:()=>pr(A.id),onMouseLeave:()=>pr(null),onClick:()=>Yr(A),children:[a.jsxs("div",{className:"absolute left-0 px-4 py-1 rounded-t-md border-b-0 text-sm font-semibold shadow-sm z-20 flex items-center gap-2 whitespace-nowrap overflow-hidden",style:{top:"0",left:"-1px",transform:"translateY(-100%)",backgroundColor:Ye.background,color:Ye.text,borderColor:Ye.border,borderWidth:"1px",borderBottomWidth:"0",boxShadow:"0 4px 8px rgba(16,24,40,0.06)",borderTopLeftRadius:"0.9rem",borderTopRightRadius:"0.9rem"},children:[a.jsx(Ev,{className:"h-4 w-4 flex-shrink-0"}),a.jsx("span",{className:"overflow-hidden text-ellipsis",children:oe})]}),a.jsxs("div",{className:"flex flex-col h-full",style:{padding:"15px"},children:[a.jsx("div",{className:"flex justify-end items-start mb-4",children:Re?a.jsxs("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-xs font-medium bg-green-100 text-green-800",children:[a.jsx(Mr,{className:"h-3 w-3 mr-1"}),"Voted"]}):$.text==="Active"?a.jsxs("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:[a.jsx(an,{className:"h-3 w-3 mr-1"}),"Needs Your Vote"]}):null}),a.jsx("h3",{className:"text-lg font-semibold text-[#2D4660] mb-2",children:A.title}),a.jsx("p",{className:"text-sm text-gray-600 mb-4 line-clamp-2",children:A.goal}),a.jsx("div",{className:"flex-1"}),a.jsxs("div",{className:"space-y-2 text-sm text-gray-500",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center",children:[a.jsx(An,{className:"h-4 w-4 mr-2"}),a.jsxs("span",{children:[jr(A.start_date)," - ",jr(A.end_date)]})]}),a.jsxs("span",{className:`inline-flex items-center ${$.text==="Active"?"px-3 py-1 text-sm":"px-2 py-0.5 text-xs"} rounded-full font-medium ${$.color}`,children:[a.jsx(ne,{className:`${$.text==="Active"?"h-4 w-4":"h-3 w-3"} mr-1`}),$.text]})]}),a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center",children:[a.jsx(ta,{className:"h-4 w-4 mr-2"}),a.jsxs("span",{children:[j[A.id]||0," ",j[A.id]===1?"feature":"features"," to vote on"]})]}),a.jsx("span",{className:"text-sm font-medium text-[#2D4660]",children:oe})]}),a.jsxs("div",{className:"flex items-center",children:[a.jsx(Ln,{className:"h-4 w-4 mr-2"}),a.jsx("span",{children:ge.displayText}),ge.isAuto&&a.jsxs("div",{className:"group relative ml-1",children:[a.jsx(ld,{className:"h-4 w-4 text-blue-500 cursor-help"}),a.jsxs("div",{className:"absolute bottom-full left-1/2 -translate-x-1/2 mb-2 px-3 py-2 bg-gray-900 text-white text-xs rounded-lg opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-200 whitespace-nowrap z-10 pointer-events-none",children:[ge.formula,a.jsx("div",{className:"absolute top-full left-1/2 -translate-x-1/2 -mt-1 border-4 border-transparent border-t-gray-900"})]})]})]})]}),a.jsx("div",{className:"mt-4 pt-4 border-t border-gray-200",children:a.jsxs("button",{onClick:bt=>{bt.stopPropagation(),R||Yr(A)},disabled:R,className:`w-full flex items-center justify-center px-4 py-2 rounded-lg transition-colors font-medium ${R?"bg-gray-100 text-gray-500 cursor-not-allowed":Re?"bg-gray-100 text-gray-700 hover:bg-gray-200":"bg-[#2D4660] text-white hover:bg-[#173B65]"}`,style:R?{cursor:"not-allowed"}:{},children:[a.jsx(Ln,{className:"h-4 w-4 mr-2"}),Re?"View or Change Votes":"Cast Your Votes"]})})]})]},A.id)})})]}),ls.length>0&&a.jsxs("div",{children:[a.jsxs("div",{className:"flex flex-col gap-3 sm:flex-row sm:items-center sm:justify-between mb-4",children:[a.jsxs("h2",{className:"text-xl font-semibold text-[#2D4660] flex items-center",children:[a.jsx(Ks,{className:"h-5 w-5 mr-2"}),Vi?"All Sessions (System Admin)":"Sessions You Manage"]}),Vi&&a.jsxs("p",{className:"text-sm text-gray-600",children:["Showing ",ls.length," total sessions across the organization."]})]}),(()=>{const A=ls.filter(oe=>{const ue=kr(oe,G);return ue&&ue!=="No Product"&&ue.trim()!==""}),$=ls.filter(oe=>{const ue=kr(oe,G);return!ue||ue==="No Product"||ue.trim()===""}),R=w(A,G),ne=[],ge=[],Re=[];return Object.entries(R).forEach(([oe,ue])=>{ue.length>=2?ne.push({key:oe,sessions:ue}):ue.length===1?ge.push({key:oe,sessions:ue}):Re.push(...ue)}),a.jsxs("div",{className:"space-y-8",children:[ne.map(({key:oe,sessions:ue})=>{var et,St;const Ye=sr.has(oe),bt=Ye?ue:ue.slice(0,3),nt=ue.length>3?ue.length-3:0,mt=kr(ue[0],G),_t=(et=ue[0])!=null&&et.product_id?M[ue[0].product_id]:void 0,Ae=on(mt,_t),Et=(it,Vt)=>{const ft=it.replace("#",""),er=parseInt(ft.substring(0,2),16),Tr=parseInt(ft.substring(2,4),16),rn=parseInt(ft.substring(4,6),16);return`rgba(${er}, ${Tr}, ${rn}, ${Vt})`},Qe=Ae.background?Et(Ae.background,.1):"#F9FAFB";return a.jsx("div",{className:"relative",style:{marginTop:"50px"},children:a.jsxs("div",{className:"rounded-lg rounded-tl-none border border-gray-200 relative overflow-visible",style:{backgroundColor:Qe,borderColor:Ae.border||"#E5E7EB",padding:"24px"},children:[Z(mt,Ae,(St=ue[0])==null?void 0:St.product_id,oe),nt>0&&a.jsx("div",{className:"absolute right-0 z-20 hidden md:block",style:{top:"0",transform:"translateY(calc(-100% - 3px))"},children:a.jsx("button",{onClick:()=>D(oe),className:"flex items-center gap-1 text-sm text-[#2D4660] hover:text-[#173B65] transition-colors cursor-pointer",children:Ye?a.jsxs(a.Fragment,{children:["Show Less",a.jsx(ks,{className:"h-4 w-4 rotate-180"})]}):a.jsxs(a.Fragment,{children:["Show More (",nt,")",a.jsx(ks,{className:"h-4 w-4"})]})})}),(F||H==="admin"||H==="system-admin")&&a.jsx("div",{className:"absolute z-20 bottom-[-20px] left-1/2 -translate-x-1/2 md:bottom-auto md:left-auto md:translate-x-0 md:right-[-20px] md:top-1/2 md:-translate-y-1/2",children:a.jsx("button",{onClick:it=>{var rn;it.stopPropagation();const Vt=(rn=ue[0])==null?void 0:rn.product_id,ft=kr(ue[0],G);Vt&&se(Vt),ft&&ft!=="No Product"&&Ft(ft);let er=ue.length>0?Xt(ue[0].end_date):new Date;ue.forEach(Ms=>{const vs=Xt(Ms.end_date);vs>er&&(er=vs)});const Tr=cr(er,1);cr(Tr,14),Ut(),se(Vt),hr(!0),re(!1),Jt(!0),he(!0)},onMouseEnter:()=>ir(oe),onMouseLeave:()=>ir(null),className:"flex items-center justify-center w-10 h-10 rounded-full shadow-md",style:{backgroundColor:Ae.background||"#C89212",color:Ae.text||"#FFFFFF"},title:`Create new session for ${mt}`,children:a.jsx(dn,{className:"h-5 w-5"})})}),a.jsxs("div",{className:"grid grid-cols-1 gap-6 sm:grid-cols-2 lg:grid-cols-3",children:[bt.map(it=>{const Vt=os(it),ft=Vt.icon,er=as(it),Tr=Vt.text==="Closed",rn=kr(it,G),Ms=it.product_id?M[it.product_id]:void 0,vs=on(rn,Ms);return a.jsx("div",{className:"relative z-10 bg-white overflow-visible shadow-md rounded-lg hover:shadow-lg transition-shadow cursor-pointer border",style:{borderColor:vs.border,borderWidth:"1px",opacity:Tr&&Qt!==it.id?.75:1},onMouseEnter:()=>pr(it.id),onMouseLeave:()=>pr(null),onClick:()=>Yr(it),children:ae(it,rn,vs,Vt,ft,er,Tr,!1,it.product_id)},it.id)}),ue.length===2&&a.jsxs(a.Fragment,{children:[a.jsx("style",{children:`
                                        @keyframes growFromCenter {
                                          from {
                                            opacity: 0;
                                            transform: scale(0.3);
                                          }
                                          to {
                                            opacity: 1;
                                            transform: scale(1);
                                          }
                                        }
                                        @keyframes sparkle {
                                          0%, 100% {
                                            opacity: 0.1;
                                            transform: scale(0.7) rotate(0deg);
                                          }
                                          50% {
                                            opacity: 0.25;
                                            transform: scale(1.3) rotate(180deg);
                                          }
                                        }
                                        @keyframes sparkleSlow {
                                          0%, 100% {
                                            opacity: 0.08;
                                            transform: scale(0.6);
                                          }
                                          50% {
                                            opacity: 0.2;
                                            transform: scale(1.4);
                                          }
                                        }
                                        @keyframes starTwinkle {
                                          0%, 100% {
                                            opacity: 0.12;
                                            transform: scale(0.8) rotate(0deg);
                                          }
                                          25% {
                                            opacity: 0.22;
                                            transform: scale(1.1) rotate(90deg);
                                          }
                                          50% {
                                            opacity: 0.18;
                                            transform: scale(1.3) rotate(180deg);
                                          }
                                          75% {
                                            opacity: 0.22;
                                            transform: scale(1.1) rotate(270deg);
                                          }
                                        }
                                      `}),a.jsx("div",{className:"hidden lg:block relative z-10 overflow-hidden shadow-md rounded-lg mt-6 border cursor-pointer transition-all",style:{borderColor:Ae.border||"#E5E7EB",borderWidth:"1px",backgroundColor:"rgba(255, 255, 255, 0.7)"},onMouseEnter:()=>rs(oe),onMouseLeave:()=>rs(null),onClick:it=>{var rn;it.stopPropagation();const Vt=(rn=ue[0])==null?void 0:rn.product_id,ft=kr(ue[0],G);Vt&&se(Vt),ft&&ft!=="No Product"&&Ft(ft);let er=ue.length>0?Xt(ue[0].end_date):new Date;ue.forEach(Ms=>{const vs=Xt(Ms.end_date);vs>er&&(er=vs)});const Tr=cr(er,1);cr(Tr,14),Ut(),se(Vt),hr(!0),re(!1),Jt(!0),he(!0)},children:a.jsxs("div",{className:"flex flex-col h-full items-center justify-center relative rounded-lg transition-all duration-300",style:{padding:"15px",backgroundColor:"transparent",backgroundImage:vt===oe||mr===oe?`radial-gradient(circle at center, ${Ae.badgeBackground||"rgba(200, 146, 18, 0.15)"}, transparent 70%)`:"none"},children:[(vt===oe||mr===oe)&&a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"absolute top-3 left-3 w-1.5 h-1.5 rounded-full",style:{backgroundColor:Ae.background||"#C89212",animation:"sparkle 1.8s ease-in-out infinite",animationDelay:"0ms",opacity:.12}}),a.jsx("div",{className:"absolute top-5 left-8 w-1 h-1 rounded-full",style:{backgroundColor:Ae.background||"#C89212",animation:"sparkleSlow 2.5s ease-in-out infinite",animationDelay:"200ms",opacity:.1}}),a.jsx("div",{className:"absolute top-8 left-5 w-2 h-2 rounded-full",style:{backgroundColor:Ae.background||"#C89212",animation:"sparkle 2.2s ease-in-out infinite",animationDelay:"400ms",opacity:.15}}),a.jsx("div",{className:"absolute top-4 right-6 w-1 h-1 rounded-full",style:{backgroundColor:Ae.background||"#C89212",animation:"sparkleSlow 2.8s ease-in-out infinite",animationDelay:"600ms",opacity:.1}}),a.jsx("div",{className:"absolute top-7 right-4 w-1.5 h-1.5 rounded-full",style:{backgroundColor:Ae.background||"#C89212",animation:"sparkle 2s ease-in-out infinite",animationDelay:"800ms",opacity:.12}}),a.jsx("div",{className:"absolute top-10 right-9 w-1 h-1 rounded-full",style:{backgroundColor:Ae.background||"#C89212",animation:"sparkleSlow 2.3s ease-in-out infinite",animationDelay:"1000ms",opacity:.1}}),a.jsx("div",{className:"absolute bottom-5 left-4 w-2 h-2 rounded-full",style:{backgroundColor:Ae.background||"#C89212",animation:"sparkle 2.1s ease-in-out infinite",animationDelay:"1200ms",opacity:.15}}),a.jsx("div",{className:"absolute bottom-7 left-9 w-1 h-1 rounded-full",style:{backgroundColor:Ae.background||"#C89212",animation:"sparkleSlow 2.6s ease-in-out infinite",animationDelay:"1400ms",opacity:.1}}),a.jsx("div",{className:"absolute bottom-4 left-12 w-1.5 h-1.5 rounded-full",style:{backgroundColor:Ae.background||"#C89212",animation:"sparkle 1.9s ease-in-out infinite",animationDelay:"1600ms",opacity:.12}}),a.jsx("div",{className:"absolute bottom-8 right-5 w-1 h-1 rounded-full",style:{backgroundColor:Ae.background||"#C89212",animation:"sparkleSlow 2.4s ease-in-out infinite",animationDelay:"1800ms",opacity:.1}}),a.jsx("div",{className:"absolute bottom-6 right-10 w-1.5 h-1.5 rounded-full",style:{backgroundColor:Ae.background||"#C89212",animation:"sparkle 2.2s ease-in-out infinite",animationDelay:"2000ms",opacity:.12}}),a.jsx("div",{className:"absolute bottom-3 right-7 w-1 h-1 rounded-full",style:{backgroundColor:Ae.background||"#C89212",animation:"sparkleSlow 2.7s ease-in-out infinite",animationDelay:"2200ms",opacity:.1}}),a.jsx(Ac,{className:"absolute top-6 left-12",size:8,style:{color:Ae.background||"#C89212",animation:"starTwinkle 3s ease-in-out infinite",animationDelay:"300ms",opacity:.15}}),a.jsx(Ac,{className:"absolute top-9 right-12",size:6,style:{color:Ae.background||"#C89212",animation:"starTwinkle 3.5s ease-in-out infinite",animationDelay:"700ms",opacity:.12}}),a.jsx(Ac,{className:"absolute bottom-9 left-6",size:7,style:{color:Ae.background||"#C89212",animation:"starTwinkle 2.8s ease-in-out infinite",animationDelay:"1100ms",opacity:.13}}),a.jsx(Ac,{className:"absolute bottom-5 right-12",size:5,style:{color:Ae.background||"#C89212",animation:"starTwinkle 3.2s ease-in-out infinite",animationDelay:"1500ms",opacity:.1}}),a.jsx(Ac,{className:"absolute top-12 left-1/2 -translate-x-1/2",size:6,style:{color:Ae.background||"#C89212",animation:"starTwinkle 2.9s ease-in-out infinite",animationDelay:"500ms",opacity:.12}}),a.jsx(Ac,{className:"absolute bottom-12 left-1/2 -translate-x-1/2",size:7,style:{color:Ae.background||"#C89212",animation:"starTwinkle 3.3s ease-in-out infinite",animationDelay:"1300ms",opacity:.13}}),a.jsx(Ec,{className:"absolute top-2 left-6",size:6,style:{color:Ae.background||"#C89212",animation:"sparkle 2.1s ease-in-out infinite",animationDelay:"250ms",opacity:.12}}),a.jsx(Ec,{className:"absolute top-11 right-6",size:5,style:{color:Ae.background||"#C89212",animation:"sparkleSlow 2.7s ease-in-out infinite",animationDelay:"750ms",opacity:.1}}),a.jsx(Ec,{className:"absolute bottom-10 left-10",size:7,style:{color:Ae.background||"#C89212",animation:"sparkle 2.4s ease-in-out infinite",animationDelay:"1150ms",opacity:.13}}),a.jsx(Ec,{className:"absolute bottom-2 right-8",size:6,style:{color:Ae.background||"#C89212",animation:"sparkleSlow 2.9s ease-in-out infinite",animationDelay:"1550ms",opacity:.11}}),a.jsx(Ec,{className:"absolute top-1/2 left-2",size:5,style:{color:Ae.background||"#C89212",animation:"sparkle 2.6s ease-in-out infinite",animationDelay:"450ms",opacity:.1}}),a.jsx(Ec,{className:"absolute top-1/2 right-2",size:6,style:{color:Ae.background||"#C89212",animation:"sparkleSlow 2.8s ease-in-out infinite",animationDelay:"950ms",opacity:.12}}),a.jsx("div",{className:"absolute top-1/4 left-1/4 w-1 h-1 rounded-full",style:{backgroundColor:Ae.background||"#C89212",animation:"sparkleSlow 2.2s ease-in-out infinite",animationDelay:"300ms",opacity:.1}}),a.jsx("div",{className:"absolute top-1/3 right-1/4 w-1.5 h-1.5 rounded-full",style:{backgroundColor:Ae.background||"#C89212",animation:"sparkle 2.3s ease-in-out infinite",animationDelay:"900ms",opacity:.12}}),a.jsx("div",{className:"absolute bottom-1/4 left-1/3 w-1 h-1 rounded-full",style:{backgroundColor:Ae.background||"#C89212",animation:"sparkleSlow 2.5s ease-in-out infinite",animationDelay:"1500ms",opacity:.1}}),a.jsx("div",{className:"absolute bottom-1/3 right-1/3 w-1.5 h-1.5 rounded-full",style:{backgroundColor:Ae.background||"#C89212",animation:"sparkle 2.1s ease-in-out infinite",animationDelay:"600ms",opacity:.12}})]}),a.jsxs("div",{className:"flex flex-col items-center justify-center gap-2 z-10",style:{opacity:vt===oe||mr===oe?1:0,transformOrigin:"center center",animation:vt===oe||mr===oe?"growFromCenter 0.3s ease-out forwards":"none"},children:[a.jsx(dn,{className:"h-8 w-8",style:{color:Ae.background||"#C89212"}}),a.jsxs("div",{className:"flex flex-col items-center justify-center text-base font-semibold",style:{color:Ae.background||"#C89212"},children:[a.jsx("span",{children:"Create"}),a.jsx("span",{children:"New Session"})]})]})]})})]})]}),nt>0&&a.jsx("div",{className:"mt-4 md:hidden",children:a.jsx("button",{onClick:()=>D(oe),className:"w-full flex items-center justify-center gap-1 px-4 py-2 text-sm font-medium text-[#2D4660] bg-white hover:bg-gray-50 rounded-md border border-gray-300 transition-colors",children:Ye?a.jsxs(a.Fragment,{children:["Show Less",a.jsx(ks,{className:"h-4 w-4 rotate-180"})]}):a.jsxs(a.Fragment,{children:["Show More (",nt,")",a.jsx(ks,{className:"h-4 w-4"})]})})})]})},oe)}),ge.length>0&&a.jsx("div",{className:"grid grid-cols-1 gap-6 sm:grid-cols-2 lg:grid-cols-3",style:{marginTop:"50px"},children:ge.map(({key:oe,sessions:ue})=>{var Ae,Et;const Ye=kr(ue[0],G),bt=(Ae=ue[0])!=null&&Ae.product_id?M[ue[0].product_id]:void 0,nt=on(Ye,bt),mt=(Qe,et)=>{const St=Qe.replace("#",""),it=parseInt(St.substring(0,2),16),Vt=parseInt(St.substring(2,4),16),ft=parseInt(St.substring(4,6),16);return`rgba(${it}, ${Vt}, ${ft}, ${et})`},_t=nt.background?mt(nt.background,.1):"#F9FAFB";return a.jsx("div",{className:"relative",children:a.jsxs("div",{className:"rounded-lg rounded-tl-none border border-gray-200 relative overflow-visible",style:{backgroundColor:_t,borderColor:nt.border||"#E5E7EB",padding:"24px"},children:[Z(Ye,nt,(Et=ue[0])==null?void 0:Et.product_id,oe),(F||H==="admin"||H==="system-admin")&&a.jsx("div",{className:"absolute z-20 bottom-[-20px] left-1/2 -translate-x-1/2 md:bottom-auto md:left-auto md:translate-x-0 md:right-[-20px] md:top-1/2 md:-translate-y-1/2",children:a.jsx("button",{onClick:Qe=>{var ft;Qe.stopPropagation();const et=(ft=ue[0])==null?void 0:ft.product_id,St=kr(ue[0],G);et&&se(et),St&&St!=="No Product"&&Ft(St);let it=Xt(ue[0].end_date);const Vt=cr(it,1);cr(Vt,14),Ut(),se(et),hr(!0),re(!1),Jt(!0),he(!0)},onMouseEnter:()=>ir(oe),onMouseLeave:()=>ir(null),className:"flex items-center justify-center w-10 h-10 rounded-full shadow-md",style:{backgroundColor:nt.background||"#C89212",color:nt.text||"#FFFFFF"},title:`Create new session for ${Ye}`,children:a.jsx(dn,{className:"h-5 w-5"})})}),ue.map(Qe=>{const et=os(Qe),St=et.text==="Closed",it=et.icon,Vt=as(Qe);E[Qe.id];const ft=kr(Qe,G),er=Qe.product_id?M[Qe.product_id]:void 0,Tr=on(ft,er);return a.jsx("div",{className:"relative z-10 bg-white overflow-visible shadow-md rounded-lg hover:shadow-lg transition-shadow cursor-pointer border",style:{borderColor:Tr.border,borderWidth:"1px",opacity:St&&Qt!==Qe.id?.75:1},onMouseEnter:()=>pr(Qe.id),onMouseLeave:()=>pr(null),onClick:()=>Yr(Qe),children:ae(Qe,ft,Tr,et,it,Vt,St,!1,Qe.product_id)},Qe.id)})]})},oe)})}),(Re.length>0||$.length>0)&&a.jsxs("div",{className:"grid grid-cols-1 gap-6 sm:grid-cols-2 lg:grid-cols-3",children:[[...Re,...$].map(oe=>{const ue=os(oe),Ye=ue.icon,bt=as(oe),nt=ue.text==="Closed",mt=kr(oe,G),_t=oe.product_id?M[oe.product_id]:void 0,Ae=on(mt,_t),Et=Re.includes(oe);return a.jsxs("div",{className:"relative z-10 bg-white overflow-visible shadow-md rounded-lg rounded-tl-none hover:shadow-lg transition-shadow cursor-pointer border",style:{borderColor:Ae.border,borderWidth:"1px",opacity:nt&&Qt!==oe.id?.75:1},onMouseEnter:()=>pr(oe.id),onMouseLeave:()=>pr(null),onClick:()=>Yr(oe),children:[Et&&(F||H==="admin"||H==="system-admin")&&a.jsx("div",{className:"absolute z-20 bottom-[-20px] left-1/2 -translate-x-1/2 md:bottom-auto md:left-auto md:translate-x-0 md:right-[-20px] md:top-1/2 md:-translate-y-1/2",children:a.jsx("button",{onClick:Qe=>{Qe.stopPropagation();const et=oe.product_id,St=kr(oe,G);et&&se(et),St&&St!=="No Product"&&Ft(St);const it=Xt(oe.end_date),Vt=cr(it,1);cr(Vt,14),Ut(),se(et),hr(!0),re(!1),Jt(!0),he(!0)},className:"flex items-center justify-center w-10 h-10 rounded-full transition-colors shadow-md hover:shadow-lg",style:{backgroundColor:Ae.background||"#C89212",color:Ae.text||"#FFFFFF"},onMouseEnter:Qe=>{const et=Ae.background||"#C89212";Qe.currentTarget.style.backgroundColor=et,Qe.currentTarget.style.filter="brightness(0.8)"},onMouseLeave:Qe=>{Qe.currentTarget.style.backgroundColor=Ae.background||"#C89212",Qe.currentTarget.style.filter="brightness(1)"},title:`Create new session for ${mt}`,children:a.jsx(dn,{className:"h-5 w-5"})})}),ae(oe,mt,Ae,ue,Ye,bt,nt,!0,oe.product_id)]},oe.id)}),ls.length===2&&Re.length+$.length>0&&a.jsx("div",{className:"hidden lg:block relative z-10 bg-white overflow-visible shadow-md rounded-lg hover:shadow-lg transition-shadow border border-gray-200",children:a.jsx("div",{className:"flex flex-col h-full items-end justify-center",style:{padding:"15px"},children:a.jsxs("button",{onClick:()=>{re(!0),he(!0)},className:"flex items-center px-6 py-3 bg-[#C89212] text-white rounded-lg hover:bg-[#6A4234] transition-colors font-semibold",children:[a.jsx(dn,{className:"h-5 w-5 mr-2"}),"Create Session"]})})})]})]})})()]})]})]}),a.jsx(yn,{isOpen:ce,onClose:Wi,title:"Create Voting Session",maxWidth:"max-w-3xl",children:a.jsxs("form",{onSubmit:zi,className:"space-y-6",children:[a.jsxs("div",{className:"space-y-1",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Product *"}),!Fe&&!Le?yr&&fe?a.jsx("div",{className:"flex items-center gap-3 px-4 py-2 border border-gray-300 rounded-md bg-gray-50",children:(()=>{const A=J.find(ge=>ge.id===fe),$=(A==null?void 0:A.name)||G[fe]||"Unknown Product",R=(A==null?void 0:A.color_hex)||M[fe],ne=on($,R);return a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"w-6 h-6 rounded-md border flex-shrink-0",style:{backgroundColor:ne.background||"#2D4660",borderColor:ne.border||"#2D4660"}}),a.jsx("span",{className:"font-medium text-gray-900 flex-1",children:$})]})})()}):a.jsx("div",{className:"space-y-3",style:{marginTop:0},children:a.jsxs("div",{className:"flex flex-col gap-3 sm:flex-row sm:items-end",style:{marginTop:0},children:[a.jsx("div",{className:"flex-1 w-full",children:a.jsx(_Z,{label:"",products:J,value:fe,onChange:async A=>{if(se(A),A){Ge("");try{const $=v.filter(R=>R.product_id===A);if($.length>0){let R=Xt($[0].end_date);$.forEach(Re=>{const oe=Xt(Re.end_date);oe>R&&(R=oe)});const ne=cr(R,1),ge=cr(ne,14);$e(Re=>({...Re,startDate:xr(ne),endDate:xr(ge)}))}else{const R=new Date,ne=cr(R,14);$e(ge=>({...ge,startDate:xr(R),endDate:xr(ne)}))}}catch($){console.error("Error calculating dates for selected product:",$);const R=new Date,ne=cr(R,14);$e(ge=>({...ge,startDate:xr(R),endDate:xr(ne)}))}}de.product&&ke($=>{const R={...$};return delete R.product,R})},isLoading:W,error:Ee,disabled:W||J.length===0||Fr,placeholder:"Select a product",helperText:!W&&J.length===0&&!Ee&&U?"No products found yet. Enter a product name below to create one.":void 0,allowDelete:U,onRequestDeleteProduct:U?(A=>{wt(A)}):void 0,className:"w-full"})}),U&&a.jsxs("div",{className:"flex items-center gap-2 sm:flex-none",children:[a.jsx("span",{className:"text-gray-500 font-medium px-2",children:"or"}),a.jsxs("button",{type:"button",onClick:()=>Mt(!0),disabled:W,className:"px-4 py-2 bg-[#1E5461] text-white rounded-md hover:bg-[#576C71] transition-colors font-medium whitespace-nowrap disabled:opacity-50 disabled:cursor-not-allowed",children:[a.jsx(dn,{className:"h-4 w-4 inline mr-2"}),"Create New Product"]})]})]})}):Le?a.jsxs("div",{className:"flex items-center gap-3 px-4 py-2 border border-gray-300 rounded-md cursor-pointer hover:border-[#2D4660] transition-colors animate-in fade-in duration-300",onClick:()=>{ct(null),Ge(Le.name),At(Le.color),Mt(!0),yt(!0),ze(!1)},children:[a.jsx("div",{className:"w-6 h-6 rounded-md border flex-shrink-0",style:{backgroundColor:Le.color||"#2D4660",borderColor:Le.color||"#2D4660"}}),a.jsx("span",{className:"font-medium text-gray-900 flex-1",children:Le.name}),a.jsx("span",{className:"text-xs text-gray-500",children:"Click to edit"})]}):U&&Fe?a.jsx("div",{className:"space-y-3",children:a.jsxs("div",{className:"flex gap-3 items-center",children:[a.jsxs("div",{className:"flex-1",style:{animation:"dramaticSlideIn 1.2s cubic-bezier(0.34, 1.56, 0.64, 1) forwards"},children:[a.jsx("style",{children:`
                      @keyframes dramaticSlideIn {
                        from {
                          opacity: 0;
                          transform: translateX(150px) scale(0.9);
                        }
                        to {
                          opacity: 1;
                          transform: translateX(0) scale(1);
                        }
                      }
                    `}),a.jsx("input",{type:"text",value:Ze,onChange:A=>{Ge(A.target.value),A.target.value.trim()&&!We&&setTimeout(()=>yt(!0),200),Ee&&qe(null)},placeholder:"Enter product name...",autoFocus:!0,className:"w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-0 focus:border-[#2D4660]"})]}),We&&a.jsxs("div",{className:"flex items-center gap-2 overflow-hidden",style:{animation:"slideInFromRight 1s ease-out forwards"},children:[a.jsx("style",{children:`
                        @keyframes slideInFromRight {
                          from {
                            opacity: 0;
                            transform: translateX(100px);
                          }
                          to {
                            opacity: 1;
                            transform: translateX(0);
                          }
                        }
                      `}),a.jsx("label",{className:"text-sm font-medium text-gray-700 whitespace-nowrap",children:"Product Color"}),a.jsx("button",{type:"button",onClick:()=>{Wt(Ue||"#2D4660"),Je(!0),setTimeout(()=>{var A;(A=document.getElementById("native-color-input"))==null||A.click()},100)},className:"block w-10 h-10 rounded-md border-2 border-gray-300 hover:border-gray-400 transition-all flex items-center justify-center overflow-hidden",style:Ue?{backgroundColor:Ue}:{backgroundColor:"#ffffff"},children:!Ue&&a.jsx("img",{src:JI,alt:"Color Picker",className:"w-8 h-8 object-contain"})})]})]})}):null,de.product&&a.jsxs("p",{className:"text-sm text-red-600 flex items-center",children:[a.jsx(an,{className:"h-4 w-4 mr-1"}),de.product]}),Ee&&(Fe||!!Le)&&a.jsxs("p",{className:"text-sm text-red-600 flex items-center",children:[a.jsx(an,{className:"h-4 w-4 mr-1"}),Ee]})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Session Title *"}),a.jsx("input",{ref:rr,type:"text",name:"title",value:pe.title,onChange:Qs,placeholder:"e.g., Q3 Product Priorities, Sprint 5, Sprint 5: Mobile Updates",className:`w-full px-4 py-2 border rounded-md focus:outline-none focus:ring-0 focus:border-[#2d4660] ${de.title?"border-red-500":"border-gray-300"}`}),de.title&&a.jsxs("p",{className:"mt-1 text-sm text-red-600 flex items-center",children:[a.jsx(an,{className:"h-4 w-4 mr-1"}),de.title]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Session Goal *"}),a.jsx("textarea",{name:"goal",value:pe.goal,onChange:Qs,rows:2,placeholder:"Describe the purpose of this voting session...",className:`w-full px-4 py-2 border rounded-md focus:outline-none focus:ring-0 focus:border-[#2d4660] ${de.goal?"border-red-500":"border-gray-300"}`}),de.goal&&a.jsxs("p",{className:"mt-1 text-sm text-red-600 flex items-center",children:[a.jsx(an,{className:"h-4 w-4 mr-1"}),de.goal]})]})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Votes Per User *"}),a.jsxs("div",{className:"flex items-center mb-3",children:[a.jsx("button",{type:"button",onClick:()=>$e(A=>({...A,useAutoVotes:!A.useAutoVotes})),className:"flex-shrink-0 cursor-pointer w-5 h-5 flex items-center justify-center",children:pe.useAutoVotes?a.jsx($l,{className:"w-5 h-5 text-green-600"}):a.jsx(Nd,{className:"w-5 h-5 text-gray-400"})}),a.jsxs("label",{onClick:()=>$e(A=>({...A,useAutoVotes:!A.useAutoVotes})),className:"ml-2 text-sm text-gray-700 cursor-pointer",children:["Auto-calculate votes",a.jsx("br",{}),"(half of feature count, minimum 1)"]})]}),!pe.useAutoVotes&&a.jsxs(a.Fragment,{children:[a.jsx("input",{type:"number",name:"votesPerUser",value:pe.votesPerUser,onChange:Qs,min:"1",max:"100",className:`w-full px-4 py-2 border rounded-md focus:outline-none focus:ring-0 focus:border-[#2d4660] ${de.votesPerUser?"border-red-500":"border-gray-300"}`}),de.votesPerUser&&a.jsxs("p",{className:"mt-1 text-sm text-red-600 flex items-center",children:[a.jsx(an,{className:"h-4 w-4 mr-1"}),de.votesPerUser]})]}),a.jsx("p",{className:"mt-2 text-xs text-gray-500",children:pe.useAutoVotes?"Votes will automatically be set to half the number of features (minimum 1).":"Each stakeholder receives this many votes."})]}),a.jsxs("div",{children:[a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Start Date *"}),a.jsx("input",{type:"date",name:"startDate",value:pe.startDate||"",onChange:Qs,onFocus:A=>{pe.startDate||Ns("startDate")},autoComplete:"off",className:`w-full px-4 py-2 border rounded-md focus:outline-none focus:ring-0 focus:border-[#2d4660] [&::-webkit-calendar-picker-indicator]:cursor-pointer ${de.startDate?"border-red-500":"border-gray-300"}`,style:pe.startDate?{}:{color:"transparent"},onBlur:A=>{A.target.value?A.target.style.color="":A.target.style.color="transparent"}}),de.startDate&&a.jsxs("p",{className:"mt-1 text-sm text-red-600 flex items-center",children:[a.jsx(an,{className:"h-4 w-4 mr-1"}),de.startDate]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"End Date *"}),a.jsx("input",{type:"date",name:"endDate",value:pe.endDate||"",onChange:Qs,onFocus:A=>{pe.endDate||Ns("endDate")},autoComplete:"off",className:`w-full px-4 py-2 border rounded-md focus:outline-none focus:ring-0 focus:border-[#2d4660] [&::-webkit-calendar-picker-indicator]:cursor-pointer ${de.endDate?"border-red-500":"border-gray-300"}`,style:pe.endDate?{}:{color:"transparent",position:"relative"},onBlur:A=>{A.target.value?A.target.style.color="":A.target.style.color="transparent"}}),de.endDate&&a.jsxs("p",{className:"mt-1 text-sm text-red-600 flex items-center",children:[a.jsx(an,{className:"h-4 w-4 mr-1"}),de.endDate]})]})]}),(pe.startDate||pe.endDate)&&a.jsxs("div",{className:"mt-1 grid grid-cols-1 sm:grid-cols-2 gap-3",children:[a.jsx("div",{}),a.jsx("div",{className:"flex justify-end",children:a.jsx("button",{type:"button",onClick:()=>{$e(A=>({...A,startDate:"",endDate:""}))},className:"text-sm text-[#2D4660] hover:text-[#173B65] underline",children:"Clear Dates"})})]})]})]}),de.submit&&a.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-3 text-sm text-red-700 flex items-center",children:[a.jsx(an,{className:"h-4 w-4 mr-2"}),de.submit]}),a.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t",children:[a.jsx(jt,{type:"button",variant:"secondary",onClick:Li,disabled:Te||!Fr&&!fe&&!(Fe&&Ze.trim()&&Ue)&&!Le,children:Te?"Saving...":"Save Draft"}),a.jsx(jt,{type:"submit",variant:Fe&&Ze.trim()&&Ue?"gold":"primary",disabled:Te||!Fr&&!fe&&!(Fe&&Ze.trim()&&Ue)&&!Le,className:`transition-all duration-500 ease-in-out ${Fe&&Ze.trim()&&Ue?"relative overflow-hidden":""}`,children:Te?"Creating...":Fe&&Ze.trim()&&Ue?a.jsxs(a.Fragment,{children:[a.jsxs("span",{className:"relative z-10 flex items-center",children:[a.jsx(dn,{className:"h-4 w-4 mr-2"}),"Create New Product and Session"]}),a.jsx("span",{className:"absolute top-1 left-1/4 w-1 h-1 bg-white rounded-full animate-ping opacity-75",style:{animationDelay:"0ms",animationDuration:"1.5s"}}),a.jsx("span",{className:"absolute top-2 right-1/3 w-1 h-1 bg-white rounded-full animate-ping opacity-75",style:{animationDelay:"300ms",animationDuration:"1.5s"}}),a.jsx("span",{className:"absolute bottom-2 left-1/3 w-1 h-1 bg-white rounded-full animate-ping opacity-75",style:{animationDelay:"600ms",animationDuration:"1.5s"}}),a.jsx("span",{className:"absolute bottom-1 right-1/4 w-1 h-1 bg-white rounded-full animate-ping opacity-75",style:{animationDelay:"900ms",animationDuration:"1.5s"}})]}):"Create Session"})]})]})}),at&&a.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",onClick:()=>Je(!1),children:a.jsx("div",{className:"bg-white rounded-lg shadow-xl px-3 py-2 w-auto mx-4",onClick:A=>A.stopPropagation(),children:a.jsxs("div",{className:"flex gap-3 items-stretch",children:[a.jsxs("div",{className:"flex-shrink-0",style:{width:"240px",height:"260px"},children:[a.jsx("input",{id:"native-color-input",type:"color",value:Ct,onChange:A=>Wt(A.target.value),ref:A=>{A&&at&&setTimeout(()=>A.click(),50)},className:"opacity-0 absolute",style:{width:"1px",height:"1px"}}),a.jsx("div",{className:"w-full h-full"})]}),a.jsxs("button",{type:"button",onClick:()=>{At(Ct),Je(!1),setTimeout(()=>{var A;(A=rr.current)==null||A.focus()},100)},className:"px-6 rounded-lg text-white font-bold shadow-lg hover:shadow-xl transition-all flex flex-col items-center justify-center gap-3 text-lg flex-shrink-0",style:{backgroundColor:Ct,height:"260px",minWidth:"100px"},children:[a.jsx(Mr,{className:"h-8 w-8"}),a.jsxs("div",{className:"text-center leading-tight",children:[a.jsx("div",{children:"Looks"}),a.jsx("div",{children:"Good"})]})]})]})})}),H==="stakeholder"&&v.length>0&&a.jsx("div",{className:"relative z-10 mt-8 bg-blue-50 border border-blue-200 rounded-lg p-4",children:a.jsxs("div",{className:"flex items-start",children:[a.jsx(Ln,{className:"h-5 w-5 text-blue-600 mr-3 mt-0.5"}),a.jsxs("div",{className:"text-sm text-blue-800",children:[a.jsx("p",{className:"font-medium mb-1",children:"About Voting Sessions:"}),a.jsx("p",{children:"Click on any session card to cast your votes. You can change your votes at any time before the voting period ends."})]})]})}),H==="admin"&&qi.length>0&&ls.length===0&&a.jsx("div",{className:"relative z-10 mt-8 bg-blue-50 border border-blue-200 rounded-lg p-4",children:a.jsxs("div",{className:"flex items-start",children:[a.jsx(Ln,{className:"h-5 w-5 text-blue-600 mr-3 mt-0.5"}),a.jsxs("div",{className:"text-sm text-blue-800",children:[a.jsx("p",{className:"font-medium mb-1",children:"About Voting Sessions:"}),a.jsx("p",{children:"Click on any session card to cast your votes. You can change your votes at any time before the voting period ends."})]})]})}),H==="admin"&&ls.length>0&&a.jsx("div",{className:"relative z-10 mt-8 bg-blue-50 border border-blue-200 rounded-lg p-4",children:a.jsxs("div",{className:"flex items-start",children:[a.jsx(Qn,{className:"h-5 w-5 text-blue-600 mr-3 mt-0.5"}),a.jsxs("div",{className:"text-sm text-blue-800",children:[a.jsx("p",{className:"font-medium mb-1",children:"Managing Sessions:"}),a.jsx("p",{children:'Click "Email Invite to Stakeholders" on any session card to send invitation links. Use the Admins and Stakeholders buttons to manage access.'})]})]})}),H==="system-admin"&&a.jsx("div",{className:"relative z-10 mt-8 bg-purple-50 border border-purple-200 rounded-lg p-4",children:a.jsxs("div",{className:"flex items-start",children:[a.jsx(Rr,{className:"h-5 w-5 text-purple-600 mr-3 mt-0.5"}),a.jsxs("div",{className:"text-sm text-purple-900",children:[a.jsx("p",{className:"font-medium mb-1",children:"System Admin Tips:"}),a.jsxs("ul",{className:"list-disc list-inside space-y-1",children:[a.jsx("li",{children:"Use this view to audit every session across the tenant without switching teams."}),a.jsx("li",{children:"Jump into any card to open the admin dashboard and assist local admins."}),a.jsx("li",{children:"Need a quick rollout? Click Create Session above to spin up a new voting round for any product."})]})]})]})}),a.jsx(QI,{currentRole:F&&H==="system-admin"?"system-admin":H==="admin"?"session-admin":"stakeholder",onSelectStakeholder:()=>{le("stakeholder"),sessionStorage.setItem("viewMode","stakeholder"),sessionStorage.setItem("adminPerspective","session")},onSelectSessionAdmin:()=>{le("admin"),sessionStorage.setItem("viewMode","admin"),sessionStorage.setItem("adminPerspective","session")},onSelectSystemAdmin:F?()=>{le("system-admin"),sessionStorage.setItem("viewMode","system-admin"),sessionStorage.setItem("adminPerspective","system")}:void 0,showRoleToggle:Hn,isSessionAdmin:Hn&&!F}),a.jsxs(yn,{isOpen:$s,onClose:()=>{zt||Pr()},title:Lt?(()=>{const A=kr(Lt,G);return A?`${A}  ${Lt.title}`:`Email Stakeholders  ${Lt.title}`})():"Email Stakeholders",maxWidth:"max-w-3xl",children:[a.jsxs("div",{className:"space-y-6",children:[Xe&&a.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 text-sm rounded-lg p-3",children:Xe}),Pe?a.jsxs("div",{className:"py-12 flex flex-col items-center justify-center text-gray-600",children:[a.jsx("div",{className:"animate-spin rounded-full h-10 w-10 border-b-2 border-[#2D4660] mb-3"}),"Loading stakeholders..."]}):a.jsxs(a.Fragment,{children:[a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center justify-between mb-2",children:[a.jsxs("h4",{className:"text-sm font-semibold text-gray-900",children:["Stakeholders (",Kr.length,")"]}),Kr.length>0&&a.jsx("button",{type:"button",onClick:xo,className:"text-sm font-medium text-blue-600 hover:text-blue-700",children:gr?"Deselect All":"Select All"})]}),a.jsx("div",{className:"border border-gray-200 rounded-lg max-h-64 overflow-y-auto divide-y divide-gray-100",children:Kr.length===0?a.jsx("div",{className:"p-4 text-sm text-gray-500 text-center",children:"No stakeholders are assigned to this session yet."}):Kr.map(A=>{const $=A.user_email.toLowerCase(),R=Er.includes($);return a.jsxs("div",{className:"flex items-center justify-between px-4 py-3 hover:bg-gray-50",children:[a.jsxs("div",{className:"flex-1 cursor-pointer",onClick:()=>bi(A.user_email),children:[a.jsx("p",{className:"text-sm font-medium text-gray-900",children:A.user_name||"Unnamed Stakeholder"}),a.jsx("p",{className:"text-xs text-gray-500",children:A.user_email})]}),a.jsx("button",{type:"button",onClick:ne=>{ne.stopPropagation(),bi(A.user_email)},className:"flex-shrink-0 ml-4 w-5 h-5 flex items-center justify-center",children:R?a.jsx($l,{className:"w-5 h-5 text-green-600"}):a.jsx(Nd,{className:"w-5 h-5 text-gray-400"})})]},A.id)})})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Subject"}),a.jsx("input",{type:"text",value:Sn,onChange:A=>en(A.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-1 focus:ring-[#2D4660]",placeholder:"Email subject"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email Body"}),a.jsx("textarea",{value:ps,onChange:A=>Xs(A.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-1 focus:ring-[#2D4660]",rows:10,placeholder:"Enter your custom message here. A 'Go Vote!' button will be automatically added below your message."}),a.jsx("div",{className:"mt-2 p-3 bg-blue-50 border border-blue-200 rounded-md",children:a.jsxs("p",{className:"text-xs text-blue-800",children:[a.jsx("strong",{children:"Note:"}),` A gold "Go Vote!" button will be automatically added to the email below your message. You don't need to include the link in your text.`]})})]})]})]})]}),a.jsxs("div",{className:"flex justify-end gap-3 pt-6 border-t mt-6",children:[a.jsx(jt,{variant:"secondary",onClick:Pr,disabled:zt,children:"Cancel"}),a.jsx(jt,{variant:"primary",onClick:wo,disabled:zt||Kr.length===0||Er.length===0,children:zt?"Sending...":`Send to ${Er.length} Stakeholder${Er.length===1?"":"s"}`})]})]}),a.jsx(yn,{isOpen:!!He,onClose:Gr,title:"",hideHeader:!0,maxWidth:"max-w-md",hideCloseButton:!1,children:a.jsxs("div",{className:"py-6 px-4",children:[a.jsxs("div",{className:"text-center mb-6",children:[a.jsx("div",{className:"mx-auto h-16 w-16 rounded-full bg-green-100 flex items-center justify-center mb-4",children:a.jsx(Mr,{className:"h-10 w-10 text-green-600"})}),a.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-1",children:"Invites Sent!"}),a.jsxs("p",{className:"text-sm text-gray-600",children:["Successfully emailed ",(He==null?void 0:He.count)??0," stakeholder",(He==null?void 0:He.count)===1?"":"s"," for"," ",a.jsx("span",{className:"font-semibold text-gray-900",children:He==null?void 0:He.sessionTitle}),"."]})]}),(He==null?void 0:He.stakeholders)&&He.stakeholders.length>0&&a.jsxs("div",{className:"mt-6 border-t border-gray-200 pt-6",children:[a.jsx("h4",{className:"text-sm font-semibold text-gray-900 mb-3",children:"Recipients:"}),a.jsx("div",{className:"max-h-64 overflow-y-auto space-y-2",children:He.stakeholders.map((A,$)=>a.jsxs("div",{className:"flex items-start py-2 px-3 bg-gray-50 rounded-md",children:[a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("p",{className:"text-sm font-medium text-gray-900 truncate",children:A.name}),a.jsx("p",{className:"text-xs text-gray-500 truncate",children:A.email})]}),a.jsx(Mr,{className:"h-4 w-4 text-green-600 flex-shrink-0 ml-2 mt-1"})]},$))})]})]})}),gt&&a.jsxs(yn,{isOpen:!0,onClose:()=>wt(null),title:"Delete Product",children:[a.jsxs("p",{className:"text-sm text-gray-700 mb-4",children:["Are you sure you want to delete ",a.jsx("span",{className:"font-semibold",children:gt.name}),"? This will remove it for everyone in your tenant."]}),a.jsxs("div",{className:"flex justify-end gap-3",children:[a.jsx(jt,{variant:"secondary",onClick:()=>wt(null),disabled:Yt,children:"Cancel"}),a.jsx(jt,{variant:"danger",onClick:is,disabled:Yt,children:Yt?"Deleting":"Delete"})]})]}),ln&&a.jsx(yn,{isOpen:!0,onClose:()=>{lr(null),Hr(""),vr(null),ss(!1)},title:"Edit Product",children:a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Product Name *"}),a.jsx("input",{type:"text",value:In,onChange:A=>Hr(A.target.value),placeholder:"Enter product name",className:"w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-0 focus:border-[#2D4660]"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Product Color"}),a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("button",{type:"button",onClick:()=>{Dn(Lr||"#2D4660"),ss(!0)},className:"block w-12 h-12 rounded-md border-2 border-gray-300 hover:border-gray-400 transition-all flex items-center justify-center overflow-hidden",style:Lr?{backgroundColor:Lr}:{backgroundColor:"#ffffff"},children:!Lr&&a.jsx("img",{src:"/colorpicker.png",alt:"Color Picker",className:"w-8 h-8 object-contain"})}),a.jsx("span",{className:"text-sm text-gray-600",children:Lr||"No color selected"})]})]}),a.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t",children:[a.jsx(jt,{variant:"secondary",onClick:()=>{lr(null),Hr(""),vr(null),ss(!1)},disabled:hn,children:"Cancel"}),a.jsx(jt,{variant:"primary",onClick:async()=>{if(!(!(ln!=null&&ln.id)||!In.trim())){ns(!0);try{await SE(ln.id,{name:In.trim(),color_hex:Lr});const A=(e==null?void 0:e.tenant_id)??(e==null?void 0:e.tenantId);if(A){const $=await Bo(A);je($.sort((ge,Re)=>ge.name.localeCompare(Re.name)));const R={},ne={};$.forEach(ge=>{R[ge.id]=ge.name||"",ge.color_hex&&(ne[ge.id]=ge.color_hex)}),ve(R),Y(ne)}lr(null),Hr(""),vr(null),ss(!1),await r(),await tn()}catch(A){console.error("Error updating product:",A),alert("Failed to update product. Please try again.")}finally{ns(!1)}}},disabled:hn||!In.trim(),children:hn?"Updating...":"Update Product"})]})]})}),jn&&a.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",onClick:()=>ss(!1),children:a.jsx("div",{className:"bg-white rounded-lg shadow-xl px-3 py-2 w-auto mx-4",onClick:A=>A.stopPropagation(),children:a.jsxs("div",{className:"flex gap-3 items-stretch",children:[a.jsxs("div",{className:"flex-shrink-0",style:{width:"240px",height:"260px"},children:[a.jsx("input",{id:"edit-native-color-input",type:"color",value:_s,onChange:A=>Dn(A.target.value),ref:A=>{A&&jn&&setTimeout(()=>A.click(),50)},className:"opacity-0 absolute",style:{width:"1px",height:"1px"}}),a.jsx("div",{className:"w-full h-full"})]}),a.jsxs("button",{type:"button",onClick:()=>{vr(_s),ss(!1)},className:"px-6 rounded-lg text-white font-bold shadow-lg hover:shadow-xl transition-all flex flex-col items-center justify-center gap-3 text-lg flex-shrink-0",style:{backgroundColor:_s,height:"260px",minWidth:"100px"},children:[a.jsx(Mr,{className:"h-8 w-8"}),a.jsxs("div",{className:"text-center leading-tight",children:[a.jsx("div",{children:"Looks"}),a.jsx("div",{children:"Good"})]})]})]})})})]})}function eee(){const{currentUser:e,sessions:t}=ql(),r=da(),[n,s]=y.useState([]),[i,l]=y.useState(!0),[u,d]=y.useState(!1);y.useEffect(()=>{m()},[t]);const m=async()=>{l(!0);try{const v=new Set;for(const x of t)(await Wm(x.id)).forEach(S=>{S.user&&S.user.email&&v.add(S.user.email)});s(Array.from(v))}catch(v){console.error("Error loading admin emails:",v)}finally{l(!1)}},f=()=>{const v=encodeURIComponent(" Request: Add me to Feature Voting System"),x=encodeURIComponent(`Hi Team,

I tried to access the Feature Voting System but don't have admin permissions yet.

Could you please add me to the system so I can participate in voting?

My details:
Name: ${(e==null?void 0:e.name)||"Unknown"}
Email: ${(e==null?void 0:e.email)||"Unknown"}

Thanks!
${(e==null?void 0:e.name)||"A hopeful voter"} `),b=n.length>0?`mailto:${n.join(",")}?subject=${v}&body=${x}`:`mailto:?subject=${v}&body=${x}`;window.location.href=b,d(!0)},p=()=>{r("/login")};return i?a.jsx("div",{className:"min-h-screen w-full bg-gray-50 flex items-center justify-center",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-[#2d4660] mx-auto mb-4"}),a.jsx("p",{className:"text-gray-600",children:"Loading..."})]})}):a.jsx("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 to-gray-100 flex items-center justify-center p-4",children:a.jsxs("div",{className:"max-w-md w-full",children:[a.jsx("div",{className:"text-center mb-8",children:a.jsx("img",{src:$a,alt:"New Millennium Building Systems Logo",className:"mx-auto cursor-pointer hover:opacity-80 transition-opacity",style:{height:"80px",width:"auto"},onClick:()=>r("/sessions")})}),a.jsxs("div",{className:"relative z-10 bg-white rounded-xl shadow-lg overflow-hidden",children:[a.jsxs("div",{className:"bg-gradient-to-r from-[#2d4660] to-[#1d3a53] p-6 text-center",children:[a.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-white/10 rounded-full mb-4",children:a.jsx(vF,{className:"h-8 w-8 text-white"})}),a.jsx("h1",{className:"text-2xl font-bold text-white mb-2",children:"Whoa There, Speedracer! "}),a.jsx("p",{className:"text-blue-100 text-sm",children:"You need access to the Feature Voting System"})]}),a.jsx("div",{className:"p-6",children:u?a.jsx(a.Fragment,{children:a.jsxs("div",{className:"text-center py-4",children:[a.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-green-100 rounded-full mb-4",children:a.jsx(Mr,{className:"h-8 w-8 text-green-600"})}),a.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-2",children:"Email Sent! "}),a.jsx("p",{className:"text-gray-600 mb-6",children:"Your access request has been sent to the admin team. They'll get you set up soon!"}),a.jsxs("button",{onClick:p,className:"inline-flex items-center px-4 py-2 bg-[#2d4660] text-white rounded-lg hover:bg-[#1d3a53] transition-colors",children:[a.jsx(hk,{className:"h-4 w-4 mr-2"}),"Back to Login"]})]})}):a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"mb-6",children:[a.jsx("p",{className:"text-gray-600 mb-4",children:"Looks like you're trying to access the Feature Voting System, but you haven't been added yet."}),a.jsx("p",{className:"text-gray-600 mb-4",children:"No worries! Click the button below to send a quick message to the admins asking to be added."}),a.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:a.jsxs("div",{className:"flex items-start",children:[a.jsx(Qn,{className:"h-5 w-5 text-blue-600 mr-2 mt-0.5 flex-shrink-0"}),a.jsx("div",{className:"text-sm text-blue-800",children:n.length>0?a.jsxs(a.Fragment,{children:[a.jsx("p",{className:"font-medium mb-1",children:"Your message will be sent to:"}),a.jsx("p",{className:"text-xs",children:n.join(", ")})]}):a.jsx("p",{children:"Your message will help the admin team get you set up!"})})]})})]}),a.jsxs("div",{className:"space-y-3",children:[a.jsxs("button",{onClick:f,className:"w-full flex items-center justify-center px-4 py-3 bg-[#c59f2d] text-white rounded-lg hover:bg-[#a88a26] transition-colors font-medium",children:[a.jsx(Jm,{className:"h-5 w-5 mr-2"}),"Request Access from Admins"]}),a.jsxs("button",{onClick:p,className:"w-full flex items-center justify-center px-4 py-3 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-colors",children:[a.jsx(hk,{className:"h-4 w-4 mr-2"}),"Back to Login"]})]})]})})]}),a.jsx("div",{className:"mt-6 text-center",children:a.jsx("p",{className:"text-sm text-gray-500",children:"Once you're added to the system, you'll be able to participate in voting sessions."})})]})})}function tee(){const{currentUser:e,setCurrentUser:t,setCurrentSession:r}=ql(),n=da(),s=async()=>{try{await Ce.auth.signOut()}catch{}try{r(null)}catch{}t(null);try{localStorage.removeItem("voting_system_current_session"),localStorage.removeItem("azureDevOpsAuthInProgress"),sessionStorage.removeItem("oauth_return_path"),sessionStorage.removeItem("oauth_action")}catch{}E(!1),n("/login",{replace:!0})},[i,l]=y.useState([]),[u,d]=y.useState(!0),[m,f]=y.useState(!1),[p,v]=y.useState({email:""}),[x,b]=y.useState({}),[S,j]=y.useState(!1),[N,E]=y.useState(!1),C=y.useRef(null),[I,T]=y.useState(!1),[O,V]=y.useState(!1);y.useEffect(()=>{if(!N)return;const ie=q=>{C.current&&!C.current.contains(q.target)&&E(!1)};return document.addEventListener("mousedown",ie),document.addEventListener("touchstart",ie,{passive:!0}),()=>{document.removeEventListener("mousedown",ie),document.removeEventListener("touchstart",ie)}},[N]),y.useEffect(()=>{F()},[]),y.useEffect(()=>{(async()=>{if(!e)return;const q=await Aa(e.id);T(q);const{data:G}=await Ce.from("session_admins").select("session_id").eq("user_id",e.id).limit(1);V(G&&G.length>0)})()},[e]);const F=async()=>{d(!0);try{let ie=await bv();ie.length===0&&e&&(console.log("No system admins found. Adding current user as first system admin..."),await Lh(e.id),ie=await bv()),l(ie)}catch(ie){console.error("Error loading system admins:",ie)}finally{d(!1)}},L=ie=>/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(ie),H=async ie=>{ie.preventDefault();const q={};if(p.email.trim()?L(p.email)||(q.email="Invalid email address"):q.email="Email is required",i.some(G=>G.user.email.toLowerCase()===p.email.toLowerCase())&&(q.email="This user is already a system admin"),b(q),!(Object.keys(q).length>0)){j(!0);try{const G=p.email.split("@")[0].replace(/\./g," "),ve=await Fc(p.email,G);await Lh(ve.id);try{const M=window.location.pathname.startsWith("/feature-voting-app")?"/feature-voting-app":"",Y=`${window.location.origin}${M}/login`;await Kc({to:p.email,subject:"You're a System Admin: Feature Voting System",text:`Hi,

You've been granted System Admin access to the Feature Voting System.

Login: ${Y}

Best regards,
System`,html:`<p>Hi,</p><p>You've been granted <strong>System Admin</strong> access to the Feature Voting System.</p><p><a href="${Y}">Login</a></p><p>Best regards,<br/>System</p>`})}catch{try{const M=window.location.pathname.startsWith("/feature-voting-app")?"/feature-voting-app":"",Y=`${window.location.origin}${M}/login`,ce=encodeURIComponent("You're a System Admin: Feature Voting System"),he=encodeURIComponent(`Hi,

You've been granted System Admin access to the Feature Voting System.

To sign in, use this link:

${Y}

Best regards,
System`);window.location.href=`mailto:${encodeURIComponent(p.email)}?subject=${ce}&body=${he}`}catch{}}await F(),v({email:""}),f(!1)}catch(G){console.error("Error adding system admin:",G),b({submit:"Failed to add system admin. Please try again."})}finally{j(!1)}}},le=async ie=>{const q=i.reduce((G,ve)=>new Date(ve.created_at)<new Date(G.created_at)?ve:G);if(ie===q.user_id){alert("Cannot remove the original system admin. This protects against accidentally locking everyone out of the system.");return}if(i.length===1){alert("Cannot remove the last system admin. The system must have at least one admin.");return}if(ie===(e==null?void 0:e.id)){alert("You cannot remove yourself as a system admin.");return}if(confirm("Are you sure you want to remove this system admin?"))try{await jv(ie),await F()}catch(G){console.error("Error removing system admin:",G),alert("Failed to remove system admin")}},K=ie=>{const G=ie.split("T")[0].split(" ")[0].split("-");let ve;if(G.length===3){const M=parseInt(G[0],10),Y=parseInt(G[1],10)-1,ce=parseInt(G[2],10);ve=new Date(M,Y,ce);const he=ie.match(/T(\d{2}):(\d{2}):(\d{2})/);he&&ve.setHours(parseInt(he[1],10),parseInt(he[2],10),parseInt(he[3],10))}else ve=new Date(ie);return ve.toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})};return u?a.jsx("div",{className:"min-h-screen w-full bg-gray-50 flex items-center justify-center",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-[#2d4660] mx-auto mb-4"}),a.jsx("p",{className:"text-gray-600",children:"Loading system admins..."})]})}):a.jsxs("div",{className:"container mx-auto p-4 max-w-6xl min-h-screen pb-8",children:[a.jsx("div",{className:"hidden md:flex md:justify-center mb-2",children:a.jsx("img",{src:$a,alt:"New Millennium Building Systems Logo",className:"-mt-4 cursor-pointer hover:opacity-80 transition-opacity",style:{height:"96px",width:"auto"},onClick:()=>n("/sessions")})}),a.jsxs("div",{className:"flex justify-between items-center mb-6",children:[a.jsxs("div",{className:"flex items-center",children:[a.jsx("img",{src:Jl,alt:"New Millennium Building Systems Logo",className:"mr-4 md:hidden",style:{width:"40px",height:"40px",objectFit:"contain"}}),a.jsx("button",{onClick:()=>n("/sessions"),className:"mr-2 p-1 rounded-full hover:bg-gray-200 cursor-pointer",children:a.jsx(tF,{className:"h-6 w-6"})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("h1",{className:"text-2xl font-bold text-[#2d4660] md:text-3xl",children:"System Admins"}),e&&a.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:[e.name,I&&a.jsx("span",{className:"ml-2 inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium bg-[#C89212] text-white",children:"System Admin"}),!I&&O&&a.jsx("span",{className:"ml-2 inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium bg-[#576C71] text-white",children:"Session Admin"})]})]})]}),a.jsxs("div",{ref:C,className:"relative z-40",children:[a.jsxs("div",{className:"hidden md:flex space-x-2",children:[a.jsxs("button",{onClick:()=>n("/sessions"),className:"flex items-center px-4 py-2 bg-[#4f6d8e] text-white rounded-lg hover:bg-[#3d5670] transition-colors",children:[a.jsx(Ks,{className:"h-4 w-4 mr-2"}),"My Sessions"]}),a.jsxs("button",{onClick:()=>f(!0),className:"flex items-center px-4 py-2 bg-[#c59f2d] text-white rounded-lg hover:bg-[#a88a26] transition-colors",children:[a.jsx(vk,{className:"h-4 w-4 mr-2"}),"Add System Admin"]}),a.jsx("button",{onClick:s,className:"flex items-center justify-center p-2 w-10 h-10 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-colors",title:"Logout",children:a.jsx(pi,{className:"h-4 w-4"})})]}),a.jsx("div",{className:"flex md:hidden",children:a.jsx("button",{onClick:()=>E(!N),className:"p-2 rounded-md border border-gray-200 bg-white shadow-sm","aria-label":"Open menu",children:a.jsx(ta,{className:"h-5 w-5 text-gray-700"})})}),N&&a.jsx("div",{className:"absolute right-0 mt-2 w-56 bg-white border border-gray-200 rounded-lg shadow-lg md:hidden z-50",children:a.jsxs("div",{className:"py-1",children:[a.jsxs("button",{onClick:()=>{E(!1),n("/sessions")},className:"w-full px-3 py-2 flex items-center text-left hover:bg-gray-50",children:[a.jsx(Ks,{className:"h-4 w-4 mr-2 text-gray-700"}),"My Sessions"]}),a.jsxs("button",{onClick:()=>{E(!1),f(!0)},className:"w-full px-3 py-2 flex items-center text-left hover:bg-gray-50",children:[a.jsx(vk,{className:"h-4 w-4 mr-2 text-gray-700"}),"Add System Admin"]}),a.jsx("button",{onClick:()=>{E(!1),s()},className:"w-full px-3 py-2 flex items-center justify-center hover:bg-gray-50",title:"Logout",children:a.jsx(pi,{className:"h-4 w-4 text-gray-700"})})]})})]})]}),a.jsx("div",{className:"relative z-10 bg-gradient-to-r from-[#2d4660] to-[#1d3a53] rounded-lg shadow-md p-6 mb-6 text-white",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center",children:[a.jsx(Br,{className:"h-8 w-8 mr-3"}),a.jsxs("div",{children:[a.jsx("h2",{className:"text-xl font-semibold",children:"Feature Voting System"}),a.jsx("p",{className:"text-blue-100 mt-1",children:"Global administrator management"})]})]}),a.jsxs("div",{className:"text-right",children:[a.jsx("p",{className:"text-sm text-blue-100",children:"Total System Admins"}),a.jsx("p",{className:"text-3xl font-bold",children:i.length})]})]})}),a.jsxs("div",{className:"relative z-10 bg-white rounded-lg shadow-md overflow-hidden",children:[a.jsxs("div",{className:"p-6 border-b border-gray-200",children:[a.jsxs("h2",{className:"text-lg font-semibold text-[#2d4660]",children:["System Administrators (",i.length,")"]}),a.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Manage who has full access to the Feature Voting System"})]}),a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[a.jsx("thead",{className:"bg-gray-50",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Name"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Email"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Added"}),a.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),a.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:(()=>{const ie=i.reduce((q,G)=>new Date(G.created_at)<new Date(q.created_at)?G:q);return i.map(q=>{const G=q.user_id===ie.user_id;return a.jsxs("tr",{className:"hover:bg-gray-50",children:[a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsxs("div",{className:"flex items-center",children:[a.jsx(Br,{className:"h-5 w-5 text-[#c59f2d] mr-2"}),a.jsxs("span",{className:"text-sm font-medium text-gray-900",children:[q.user.name,q.user.id===(e==null?void 0:e.id)&&a.jsx("span",{className:"ml-2 text-xs text-gray-500",children:"(You)"}),G&&a.jsx("span",{className:"ml-2 text-xs text-[#c59f2d] font-semibold",children:"(Original Admin)"})]})]})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsxs("div",{className:"flex items-center text-sm text-gray-500",children:[a.jsx(Jm,{className:"h-4 w-4 mr-2"}),q.user.email]})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:K(q.created_at)}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:a.jsx("button",{onClick:()=>le(q.user_id),className:`text-red-600 hover:text-red-900 ${q.user.id===(e==null?void 0:e.id)||i.length===1||G?"opacity-50 cursor-not-allowed":""}`,disabled:q.user.id===(e==null?void 0:e.id)||i.length===1||G,title:G?"Cannot remove the original system admin":q.user.id===(e==null?void 0:e.id)?"You cannot remove yourself":i.length===1?"Cannot remove the last system admin":"Remove system admin",children:a.jsx(to,{className:"h-5 w-5"})})})]},q.id)})})()})]})})]}),a.jsx("div",{className:"relative z-10 mt-6 bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:a.jsxs("div",{className:"flex items-start",children:[a.jsx(Br,{className:"h-5 w-5 text-yellow-600 mr-3 mt-0.5"}),a.jsxs("div",{className:"text-sm text-yellow-800",children:[a.jsx("p",{className:"font-medium mb-1",children:"System Admin Permissions:"}),a.jsxs("ul",{className:"list-disc list-inside space-y-1",children:[a.jsx("li",{children:"Full access to all voting sessions across the system"}),a.jsx("li",{children:"Create and manage any voting session"}),a.jsx("li",{children:"Add and remove other system administrators"}),a.jsx("li",{children:"Manage session admins and stakeholders for any session"}),a.jsx("li",{children:"View all results and analytics system-wide"})]}),a.jsx("p",{className:"mt-3 text-xs font-medium",children:"Note: The original system admin (first person to access this page) cannot be removed to prevent system lockout."})]})]})}),m&&a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:a.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-md w-full",children:[a.jsxs("div",{className:"flex justify-between items-center mb-4",children:[a.jsx("h3",{className:"text-lg font-medium text-[#2d4660]",children:"Add System Admin"}),a.jsx("button",{onClick:()=>{f(!1),v({email:""}),b({})},className:"text-gray-400 hover:text-gray-500",children:a.jsx(Ts,{className:"h-5 w-5"})})]}),a.jsxs("form",{onSubmit:H,className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email Address *"}),a.jsx("input",{type:"email",value:p.email,onChange:ie=>v(q=>({...q,email:ie.target.value})),className:`w-full px-3 py-2 border rounded-md focus:ring-2 focus:ring-[#2d4660] focus:border-transparent ${x.email?"border-red-500":"border-gray-300"}`,placeholder:"admin@example.com"}),x.email&&a.jsxs("p",{className:"mt-1 text-sm text-red-600 flex items-center",children:[a.jsx(an,{className:"h-4 w-4 mr-1"}),x.email]})]}),x.submit&&a.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-3",children:a.jsxs("p",{className:"text-sm text-red-800 flex items-center",children:[a.jsx(an,{className:"h-4 w-4 mr-2"}),x.submit]})}),a.jsxs("div",{className:"flex justify-end space-x-2 pt-4",children:[a.jsx("button",{type:"button",onClick:()=>{f(!1),v({email:""}),b({})},className:"px-4 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50",disabled:S,children:"Cancel"}),a.jsx("button",{type:"submit",className:"px-4 py-2 bg-[#2d4660] text-white rounded-md hover:bg-[#1d3a53] disabled:opacity-50",disabled:S,children:S?"Adding...":"Add System Admin"})]})]})]})})]})}async function ree(e){var t,r,n,s;if(!e||e.trim().length<2)return[];try{const{data:{session:i},error:l}=await Ce.auth.getSession();if(l)throw console.error("Error getting session:",l),new Error("Unable to access your session. Please sign in again.");if(!i)throw console.warn("No session available for Azure AD search"),new Error("You must be signed in to search company users.");if(!(((r=(t=i.user)==null?void 0:t.app_metadata)==null?void 0:r.provider)==="azure"||((s=(n=i.user)==null?void 0:n.identities)==null?void 0:s.some(S=>S.provider==="azure"))))throw console.warn("User not signed in with Azure AD"),new Error("You must sign in with Microsoft to search company users.");const d=i.provider_token||i.access_token;if(!d)throw console.warn("No provider token available for Azure AD search"),new Error("Unable to access Microsoft Graph. Please sign out and sign in again with Microsoft.");const m=e.trim(),f=`startswith(displayName,'${m}') or startswith(mail,'${m}') or startswith(userPrincipalName,'${m}') or startswith(givenName,'${m}') or startswith(surname,'${m}')`,p=`https://graph.microsoft.com/v1.0/users?$filter=${encodeURIComponent(f)}&$select=id,displayName,mail,userPrincipalName,givenName,surname,jobTitle,department&$top=20`,v=await fetch(p,{headers:{Authorization:`Bearer ${d}`,"Content-Type":"application/json"}});if(!v.ok){const S=await v.text();let j="";throw v.status===401?(j="Authentication failed. Please sign out and sign in again with Microsoft.",console.warn("Azure AD search 401:",S)):v.status===403?(j='Your Azure AD app needs "User.ReadBasic.All" or "User.Read.All" permission to search users. An administrator must grant this permission in Azure Portal.',console.warn("Azure AD search 403 - Insufficient permissions:",S)):v.status===400?(j="Invalid search query. Please try a different search term.",console.warn("Azure AD search 400:",S)):(j=`Unable to search users (${v.status}). Please try again.`,console.error("Azure AD search error:",v.status,S)),new Error(j)}return((await v.json()).value||[]).map(S=>({id:S.id,displayName:S.displayName||"",mail:S.mail||S.userPrincipalName||"",userPrincipalName:S.userPrincipalName||"",givenName:S.givenName,surname:S.surname,jobTitle:S.jobTitle,department:S.department})).sort((S,j)=>{const N=S.displayName.toLowerCase(),E=j.displayName.toLowerCase();return N.localeCompare(E)})}catch(i){throw console.error("Error searching Azure AD users:",i),i}}const nee=(e,t,r)=>e?{label:"System Admin",className:"text-[#C89212]",icon:a.jsx(Br,{className:"h-3.5 w-3.5"})}:t?{label:"Session Admin",className:"text-[#576C71]",icon:a.jsx(Rr,{className:"h-3.5 w-3.5"})}:r?{label:"Stakeholder",className:"text-[#8B5A4A]",icon:a.jsx(gn,{className:"h-3.5 w-3.5"})}:null,see=e=>{switch(e){case"system-admin":return{label:"System Admin",className:"text-[#C89212]",icon:a.jsx(Br,{className:"h-3.5 w-3.5"})};case"session-admin":return{label:"Session Admin",className:"text-[#576C71]",icon:a.jsx(Rr,{className:"h-3.5 w-3.5"})};case"stakeholder":return{label:"Stakeholder",className:"text-[#8B5A4A]",icon:a.jsx(gn,{className:"h-3.5 w-3.5"})};default:return null}},iee=(e,t,r)=>e?"system-admin":t?"session-admin":"stakeholder",aee=(e,t,r,n)=>{const s=iee(e,t),i=nee(e,t,r);if(!i)return null;if(n===s)return a.jsxs("span",{className:"text-sm text-gray-600",children:[","," ",a.jsxs("span",{className:`inline-flex items-baseline ${i.className}`,children:[a.jsx("span",{className:"inline-flex items-center",children:i.icon}),a.jsx("span",{className:"ml-1 text-sm",children:i.label})]})]});const l=see(n);return l?a.jsxs("span",{className:"text-sm text-gray-600",children:[","," ",a.jsxs("span",{className:`inline-flex items-baseline ${i.className}`,children:[a.jsx("span",{className:"inline-flex items-center",children:i.icon}),a.jsx("span",{className:"ml-1 text-sm",children:i.label})]}),a.jsx("span",{className:"md:inline hidden",children:", "}),a.jsxs("span",{className:"whitespace-nowrap md:inline inline-block",children:[a.jsx("span",{className:"md:hidden",children:", "}),"viewing this page as a"," ",a.jsxs("span",{className:`inline-flex items-baseline ${l.className}`,children:[a.jsx("span",{className:"inline-flex items-center",children:l.icon}),a.jsx("span",{className:"ml-1 text-sm",children:l.label})]})]})]}):null},id=()=>({searchTerm:"",results:[],isSearching:!1,showResults:!1,error:""});function Ih({products:e,value:t,onChange:r,label:n,error:s,onProductChange:i}){const[l,u]=y.useState(!1),d=y.useRef(null);y.useEffect(()=>{function p(v){d.current&&!d.current.contains(v.target)&&u(!1)}return document.addEventListener("mousedown",p),()=>document.removeEventListener("mousedown",p)},[]);const m=e.find(p=>p.id===t),f=m?on(m.name,m.color_hex??null):null;return a.jsxs("div",{ref:d,className:"relative overflow-visible",children:[n&&a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:n}),a.jsxs("div",{onClick:()=>u(!l),className:`w-full px-3 py-2 border rounded-md bg-white cursor-pointer flex items-center justify-between hover:border-gray-400 ${s?"border-red-500":"border-gray-300"}`,children:[a.jsxs("div",{className:"flex items-center gap-2 flex-1 min-w-0",children:[m&&f&&a.jsx("div",{className:"w-4 h-4 rounded flex-shrink-0",style:{backgroundColor:f.background}}),a.jsx("span",{className:`text-sm truncate ${t?"text-gray-900":"text-gray-400"}`,children:m?m.name:"Select a Product"})]}),a.jsx(ks,{className:`h-4 w-4 text-gray-400 transition-transform flex-shrink-0 ${l?"transform rotate-180":""}`})]}),l&&a.jsx("div",{className:"absolute z-[100] w-full mt-1 bg-white border border-gray-300 rounded-md shadow-lg max-h-60 overflow-y-auto",children:e.length===0?a.jsx("div",{className:"px-3 py-2 text-sm text-gray-500 text-center",children:"No products available"}):e.map(p=>{const v=on(p.name,p.color_hex??null),x=t===p.id;return a.jsxs("div",{onClick:()=>{r(p.id),u(!1),i&&i()},className:`px-3 py-2 cursor-pointer hover:bg-gray-50 flex items-center gap-2 ${x?"bg-gray-50":""}`,children:[a.jsx("div",{className:"w-4 h-4 rounded flex-shrink-0",style:{backgroundColor:v.background}}),a.jsx("span",{className:"text-sm text-gray-900 flex-1",children:p.name}),x&&a.jsx(Mr,{className:"h-4 w-4 text-gray-400 flex-shrink-0"})]},p.id)})})]})}function oee({products:e,value:t,onChange:r}){const[n,s]=y.useState(!1),i=y.useRef(null),l=y.useRef(null),[u,d]=y.useState({top:0,left:0,width:0});y.useEffect(()=>{function p(v){i.current&&!i.current.contains(v.target)&&l.current&&!l.current.contains(v.target)&&s(!1)}return n&&(document.addEventListener("mousedown",p),l.current&&requestAnimationFrame(()=>{if(l.current){const v=l.current.getBoundingClientRect();d({top:v.bottom+window.scrollY+4,left:v.left+window.scrollX,width:v.width})}})),()=>document.removeEventListener("mousedown",p)},[n]);const m=e.find(p=>p.id===t),f=n?a.jsxs("div",{ref:i,className:"fixed bg-white border border-gray-300 rounded-lg shadow-xl max-h-60 overflow-y-auto",style:{top:`${u.top}px`,left:`${u.left}px`,width:"300px",zIndex:99999},children:[a.jsxs("div",{onClick:()=>{r(""),s(!1)},className:`px-4 py-2.5 cursor-pointer hover:bg-gray-50 flex items-center gap-2 border-b border-gray-100 ${t?"":"bg-gray-50"}`,children:[a.jsx("span",{className:"text-base text-gray-900",children:"All Products"}),!t&&a.jsx(Mr,{className:"h-4 w-4 text-gray-400 flex-shrink-0"})]}),e.length===0?a.jsx("div",{className:"px-4 py-2.5 text-base text-gray-500 text-center",children:"Loading products..."}):e.map(p=>{const v=on(p.name,p.color_hex??null),x=t===p.id;return a.jsxs("div",{onClick:()=>{r(p.id),s(!1)},className:`px-4 py-2.5 cursor-pointer hover:bg-gray-50 flex items-center gap-2 ${x?"bg-blue-50":""}`,children:[a.jsx("span",{className:"inline-block w-3 h-3 rounded-sm flex-shrink-0",style:{backgroundColor:v.background}}),a.jsx("span",{className:"text-base text-gray-900 flex-1",children:p.name}),x&&a.jsx(Mr,{className:"h-4 w-4 text-blue-600 flex-shrink-0"})]},p.id)})]}):null;return a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"relative min-w-[200px]",children:a.jsxs("div",{ref:l,onClick:()=>s(!n),className:"px-4 py-2.5 md:py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#2d4660] focus:border-transparent text-base bg-white cursor-pointer flex items-center justify-between hover:bg-gray-50",children:[a.jsx("span",{className:`text-base truncate ${t?"text-gray-900":"text-gray-500"}`,children:m?m.name:"All Products"}),a.jsx(ks,{className:"h-4 w-4 text-gray-400 flex-shrink-0"})]})}),n&&Ox.createPortal(f,document.body)]})}function lee({products:e,sessions:t,selectedProductId:r,onProductChange:n,useAllSessions:s,onToggleAllSessions:i,selectedSessionIds:l,onSessionToggle:u,getSessionStatus:d,formatSessionDateRange:m,filterSessions:f}){const p=r?f(t,r):[];return a.jsxs("div",{className:"space-y-3 overflow-visible",children:[a.jsx("div",{className:"overflow-visible",children:a.jsx(Ih,{products:e,value:r,onChange:v=>{n(v),i(!0)},label:"Product *"})}),r&&a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Session Selection *"}),a.jsxs("div",{className:"inline-flex items-center bg-gray-100 rounded-lg p-1",children:[a.jsx("button",{type:"button",onClick:()=>i(!1),className:`px-4 py-2 rounded-md text-sm font-medium transition-colors flex items-center ${s?"text-gray-600 hover:text-gray-900":"bg-white text-[#2d4660] shadow-sm"}`,children:"Select Sessions"}),a.jsx("button",{type:"button",onClick:()=>{i(!0)},className:`px-4 py-2 rounded-md text-sm font-medium transition-colors flex items-center ${s?"bg-white text-[#2d4660] shadow-sm":"text-gray-600 hover:text-gray-900"}`,children:"All Sessions"})]}),s&&a.jsx("p",{className:"mt-2 text-xs text-gray-500",children:"User will be added to all current and future sessions for this product"})]}),!s&&a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Sessions * (Current and Future)"}),p.length===0?a.jsx("p",{className:"text-sm text-gray-500",children:"No current or future sessions found for this product."}):a.jsx("div",{className:"max-h-48 overflow-y-auto border border-gray-300 rounded-md p-2",children:p.map(v=>a.jsxs("label",{className:"flex items-start px-3 py-2 hover:bg-gray-50 cursor-pointer border-b border-gray-100 last:border-b-0",children:[a.jsx("input",{type:"checkbox",checked:l.includes(v.id),onChange:()=>u(v.id),className:"w-4 h-4 border-gray-300 rounded focus:ring-[#2D4660] accent-green-600 mt-1",style:{accentColor:"#16a34a"}}),a.jsxs("div",{className:"ml-3 flex-1",children:[a.jsx("div",{className:"text-sm font-medium text-gray-900",children:v.title||"Unnamed Session"}),a.jsx("div",{className:"text-xs text-gray-500 mt-0.5",children:m(v)}),a.jsx("div",{className:"text-xs mt-0.5",children:a.jsx("span",{className:`font-medium ${d(v).color}`,children:d(v).text})})]})]},v.id))})]})]})]})}function cee(){var ls,qi;const{currentUser:e,setCurrentUser:t,setCurrentSession:r,currentSession:n}=ql(),s=da(),[i]=Lm(),l=i.get("perspective")||sessionStorage.getItem("adminPerspective")||"system";y.useEffect(()=>{sessionStorage.setItem("adminPerspective",l)},[l]);const[u,d]=y.useState([]),[m,f]=y.useState([]),[p,v]=y.useState(!0),[x,b]=y.useState(""),[S,j]=y.useState("all"),[N,E]=y.useState(!1),[C,I]=y.useState(null),[T,O]=y.useState({}),[V,F]=y.useState(null),[L,H]=y.useState(null),[le,K]=y.useState(null),ie=w=>{const D=new Date,Z=w.filter(ae=>{const A=ae.start_date?new Date(ae.start_date):null,$=ae.end_date?new Date(ae.end_date):null;return A&&D<A||$&&D>$?!1:!!(A&&D>=A&&(!$||D<=$))});return Z.length===0?null:Z.sort((ae,A)=>{const $=ae.start_date?new Date(ae.start_date).getTime():0;return(A.start_date?new Date(A.start_date).getTime():0)-$})[0]},q=new Set(["spencer.faull@newmill.com","chris.rodes@newmill.com","dave.hoffman@newmill.com"]),G=y.useRef(null),ve=y.useRef({}),M=y.useRef(null),Y=y.useRef(!1),[ce,he]=y.useState(!1),[U,re]=y.useState(!1),[pe,$e]=y.useState([]),[de,ke]=y.useState(l==="system"?"system-admin":"session-admin");y.useEffect(()=>{ke(l==="system"?"system-admin":"session-admin")},[l]);const[Te,Ve]=y.useState(!0),[J,je]=y.useState(!1),[fe,se]=y.useState(null),[Ze,Ge]=y.useState(null),[Ue,At]=y.useState([]),[gt,wt]=y.useState({adminSessions:[],stakeholderSessions:[]}),[Yt,z]=y.useState(""),[W,ee]=y.useState(!0),[Se,Ne]=y.useState([]),[Ee,qe]=y.useState(!1),[Fe,Mt]=y.useState(null),[We,yt]=y.useState(!1),[kt,ze]=y.useState(null),[Le,ct]=y.useState(new Set),[at,Je]=y.useState(new Map),[Ct,Wt]=y.useState(!1),[rr,sr]=y.useState(!1),[rt,Ht]=y.useState({name:"",email:"",isSystemAdmin:!1,sessionAdminIds:[],stakeholderSessionIds:[]}),[Ft,vt]=y.useState(id()),[ir,yr]=y.useState(!0),[hr,Fr]=y.useState(null),[Jt,mr]=y.useState({sessionAdmin:!1,stakeholder:!1}),[rs,nr]=y.useState("User Management"),[bn,Qt]=y.useState([]),[pr,ln]=y.useState([]),[lr,In]=y.useState(""),[Hr,Lr]=y.useState([]),[vr,hn]=y.useState(""),[ns,jn]=y.useState([]),[ss,_s]=y.useState(!1),[Dn,$s]=y.useState(null),[Cr,Kr]=y.useState(!0),[Kt,Er]=y.useState(!0),[_r,Sn]=y.useState(""),en=!!vr&&(Kt||rt.sessionAdminIds.length>0),ps=!!lr&&(Cr||rt.stakeholderSessionIds.length>0),Xs=((ls=bn.find(w=>w.id===vr))==null?void 0:ls.name)||"",X=((qi=bn.find(w=>w.id===lr))==null?void 0:qi.name)||"",be=w=>{const D=w.map(ae=>Ue.find(A=>A.id===ae)).filter(ae=>!!ae);return D.length===0?"":D.map(ae=>ae.title||"Unnamed Session").join(", ")},Pe=en?`${Xs||"Selected Product"}  ${Kt?"All Sessions":be(rt.sessionAdminIds)||"Sessions selected"}`:"",Oe=ps?`${X||"Selected Product"}  ${Cr?"All Sessions":be(rt.stakeholderSessionIds)||"Sessions selected"}`:"",Xe=(()=>{const w=[];return rt.isSystemAdmin&&w.push("System Admin"),en&&w.push("Session Admin"),ps&&w.push("Stakeholder"),w})(),Ie=w=>{if(Xe.length===0)return w?"Creating User...":"Create User";const D=Xe.join(" & ");return w?`Adding ${D}...`:`Add ${D}`},[Lt,Dt]=y.useState(!1),[zt,_e]=y.useState(null),[He,Zt]=y.useState(""),[Gr,dt]=y.useState(""),[gr,Xt]=y.useState(!1),xr=async w=>{w&&(w.preventDefault(),w.stopPropagation());try{await Ce.auth.signOut()}catch(D){console.error("Error signing out:",D)}try{r(null)}catch(D){console.error("Error clearing session:",D)}t(null);try{localStorage.removeItem("voting_system_current_session"),localStorage.removeItem("voting_system_user"),localStorage.removeItem("azureDevOpsAuthInProgress"),sessionStorage.removeItem("oauth_return_path"),sessionStorage.removeItem("oauth_action"),sessionStorage.removeItem("oauth_error")}catch(D){console.error("Error clearing storage:",D)}E(!1),s("/login",{replace:!0})};y.useEffect(()=>{if(!N)return;const w=D=>{G.current&&!G.current.contains(D.target)&&E(!1)};return document.addEventListener("mousedown",w),document.addEventListener("touchstart",w,{passive:!0}),()=>{document.removeEventListener("mousedown",w),document.removeEventListener("touchstart",w)}},[N]),y.useEffect(()=>{if(!C){O({});return}const D=setTimeout(()=>{const Z=ve.current[C];Z&&requestAnimationFrame(()=>{const ae=Z.getBoundingClientRect();window.innerWidth<768?O({[C]:{top:`${ae.bottom+4}px`,right:`${window.innerWidth-ae.right+4}px`,left:"auto"}}):O({[C]:{}})})},0);return()=>clearTimeout(D)},[C]),y.useEffect(()=>{if(!C)return;const w=D=>{const Z=ve.current[C];Z&&!Z.contains(D.target)&&I(null)};return document.addEventListener("mousedown",w),document.addEventListener("touchstart",w,{passive:!0}),()=>{document.removeEventListener("mousedown",w),document.removeEventListener("touchstart",w)}},[C]);const cr=y.useCallback(async()=>{try{const w=await xv();ln(w);const D=new Date,Z=w.filter(ae=>Ue.some(A=>A.product_id!==ae.id?!1:new Date(A.end_date)>=D));Qt(Z)}catch(w){console.error("Error loading products:",w)}},[Ue]),Fi=y.useCallback(async()=>{try{const w=await xv();console.log("Loaded products:",w),ln(w)}catch(w){console.error("Error loading all products:",w),ln([])}},[]),Ut=()=>{hn(""),jn([]),Ht(w=>({...w,sessionAdminIds:[]})),Er(!0),mr(w=>({...w,sessionAdmin:!1}))},ha=()=>{In(""),Ht(w=>({...w,stakeholderSessionIds:[]})),Kr(!0),mr(w=>({...w,stakeholder:!1}))},Qs=w=>{if(!w){Lr([]);return}const D=new Date,Z=Ue.filter(ae=>ae.product_id!==w?!1:new Date(ae.end_date)>=D);Lr(Z)};y.useEffect(()=>{lr?Qs(lr):Lr([])},[lr,Ue]);const Ns=w=>{if(!w){jn([]);return}const D=new Date,Z=Ue.filter(ae=>ae.product_id!==w?!1:new Date(ae.end_date)>=D);jn(Z)};y.useEffect(()=>{vr?Ns(vr):jn([])},[vr,Ue]),y.useEffect(()=>{const w=i.get("filter");w==="session-admin"?(nr("Session Admin Management"),j("session-admin")):w==="stakeholder"?(nr("Stakeholder Management"),j("stakeholder")):nr("User Management")},[i]);const is=async w=>{v(!0);try{const[D,Z,ae]=await Promise.all([vv(),Ce.from("session_admins").select("user_id, session_id, created_at").then(({data:oe,error:ue})=>ue?(console.error("Error fetching all admin relations:",ue),[]):oe||[]),Ce.from("session_stakeholders").select("user_email, session_id, created_at").then(({data:oe,error:ue})=>ue?(console.error("Error fetching all stakeholder relations:",ue),[]):oe||[])]),A=new Map;Z.forEach(oe=>{A.has(oe.user_id)||A.set(oe.user_id,[]),A.get(oe.user_id).push({session_id:oe.session_id,created_at:oe.created_at})});const $=new Map;ae.forEach(oe=>{var Ye;const ue=((Ye=oe.user_email)==null?void 0:Ye.toLowerCase())||"";ue&&($.has(ue)||$.set(ue,[]),$.get(ue).push({session_id:oe.session_id,created_at:oe.created_at}))});const R=new Map(w.map(oe=>[oe.id,oe])),ne=await Promise.all(D.map(async oe=>{const ue=await p6(oe.id),Ye=[],bt=[];(A.get(oe.id)||[]).forEach(Ae=>{const Et=R.get(Ae.session_id);Et&&Ye.push({...Et,assignedAt:Ae.created_at,assignedBy:"System",assignedByName:"System"})});const mt=oe.email.toLowerCase();return($.get(mt)||[]).forEach(Ae=>{const Et=R.get(Ae.session_id);Et&&bt.push({...Et,assignedAt:Ae.created_at,assignedBy:"System",assignedByName:"System"})}),{...oe,roles:ue,adminInSessions:Ye,stakeholderInSessions:bt}}));d(ne);const ge=new Map;ne.forEach(oe=>{const ue=oe.email.toLowerCase().trim();ge.has(ue)||ge.set(ue,[]),ge.get(ue).push(oe.id)});const Re=new Map;ge.forEach((oe,ue)=>{oe.length>1&&Re.set(ue,oe)}),Je(Re)}catch(D){console.error("Error loading users:",D)}finally{v(!1)}},Li=async()=>{if(e){Ve(!0);try{const w=await cu(),[D,Z]=await Promise.all([Aa(e.id),Ce.from("session_admins").select("session_id").eq("user_id",e.id).then(({data:A,error:$})=>$?(console.error("Error fetching admin sessions:",$),[]):(A||[]).map(R=>R.session_id))]);he(D);const ae=Z;if(D)At(w),await Promise.all([zi(),is(w)]);else{const A=ae.length>0;if(re(A),$e(ae),!A){s("/sessions");return}const $=w.filter(R=>ae.includes(R.id));At($),ke("session-admin"),await is($)}await cr()}catch(w){console.error("Error checking access:",w),s("/sessions")}finally{Ve(!1)}}},zi=async()=>{try{const w=["chris.rodes@newmill.com","spencer.faull@newmill.com"],D=new Set,Z=await bv();if(Z.length>0){const A=Z.reduce(($,R)=>new Date(R.created_at)<new Date($.created_at)?R:$);ze(A.user_id),D.add(A.user_id)}(await vv()).forEach(A=>{w.includes(A.email.toLowerCase())&&D.add(A.id)}),ct(D)}catch(w){console.error("Error loading protected accounts:",w)}},tn=w=>{if(w.id===kt)return"Original Admin";const D=w.email.toLowerCase();return D==="chris.rodes@newmill.com"?"Manager":D==="spencer.faull@newmill.com"?"Portfolio Owner":null},as=w=>{const D=w.email.toLowerCase().trim(),Z=at.get(D);return Z?Z.length>1:!1},Yr=w=>{const D=w.email.toLowerCase().trim(),Z=at.get(D);return Z?Z.length:1},gs=()=>{let w=[...u];if(de==="session-admin"&&Ue.length>0){const D=new Set(Ue.map(Z=>Z.id));w=w.filter(Z=>{var $,R;if(Z.id===(e==null?void 0:e.id))return!0;const ae=($=Z.adminInSessions)==null?void 0:$.some(ne=>ne&&D.has(ne.id)),A=(R=Z.stakeholderInSessions)==null?void 0:R.some(ne=>ne&&D.has(ne.id));return!!ae||!!A})}if(x.trim()){const D=x.toLowerCase();w=w.filter(Z=>Z.name.toLowerCase().includes(D)||Z.email.toLowerCase().includes(D))}(S!=="all"||_r)&&(w=w.filter(D=>{const Z=[...D.adminInSessions||[],...D.stakeholderInSessions||[]];let ae=Z;if(_r&&(ae=Z.filter(A=>(A.product_id||A.productId)===_r)),_r&&ae.length===0)return!1;if(S!=="all")switch(S){case"system-admin":return D.roles.isSystemAdmin;case"session-admin":return _r?ae.some(A=>{var $;return($=D.adminInSessions)==null?void 0:$.some(R=>R.id===A.id)}):D.roles.sessionAdminCount>0;case"stakeholder":return _r?ae.some(A=>{var $;return($=D.stakeholderInSessions)==null?void 0:$.some(R=>R.id===A.id)}):D.roles.stakeholderSessionCount>0;case"none":return!D.roles.isSystemAdmin&&D.roles.sessionAdminCount===0&&D.roles.stakeholderSessionCount===0;default:return!0}return!0})),f(w)},ys=w=>{const D=[...w.adminInSessions||[],...w.stakeholderInSessions||[]],Z=new Set;return D.forEach(ae=>{const A=ae.product_id||ae.productId;A&&Z.add(A)}),pr.filter(ae=>Z.has(ae.id))};y.useEffect(()=>{e&&Fi()},[e,Fi]),y.useEffect(()=>{if(!e){s("/login");return}if(!Y.current)return Y.current=!0,Li(),()=>{}},[e]),y.useEffect(()=>{const w=i.get("filter");w&&["system-admin","session-admin","stakeholder","none"].includes(w)&&j(w);const D=i.get("product");D&&Sn(D)},[i]),y.useEffect(()=>{i.get("filter")||(de==="session-admin"?(S==="system-admin"||S==="session-admin"||S==="all")&&j("stakeholder"):de==="system-admin"&&(i.get("filter")||j("all")))},[de,i,S]);const jr=y.useCallback(()=>{gs()},[u,x,S,_r,de,Ue,e]);y.useEffect(()=>{jr()},[jr]),y.useEffect(()=>{function w(D){M.current&&!M.current.contains(D.target)&&vt(Z=>({...Z,showResults:!1}))}return document.addEventListener("mousedown",w),()=>document.removeEventListener("mousedown",w)},[]);const Zs=async w=>{try{const D=[],Z=[];for(const ae of Ue)await Vm(w,ae.id)&&D.push(ae.id),await S6(w,ae.id)&&Z.push(ae.id);wt({adminSessions:D,stakeholderSessions:Z})}catch(D){console.error("Error loading user session memberships:",D)}},Ar=async(w,D)=>{Ge(w),se(D),z(""),ee(!0),Ne([]),je(!0),I(null),bn.length===0&&await cr(),await Zs(w.id)},ei=()=>{je(!1),se(null),Ge(null),z(""),ee(!0),Ne([]),wt({adminSessions:[],stakeholderSessions:[]})},os=(w,D)=>{if(!D)return[];const Z=new Date;return w.filter(ae=>ae.product_id!==D?!1:new Date(ae.end_date)>=Z)},vi=async()=>{if(!Ze||!fe)return;if(!Yt){alert("Please select a product first.");return}let w=[];if(W)w=os(Vi(fe),Yt).map(Z=>Z.id);else{if(Se.length===0){alert("Please select at least one session.");return}w=Se}if(w.length===0){alert("No sessions available for this product.");return}try{for(const D of w)fe==="session-admin"?await yd(D,Ze.id):fe==="stakeholder"?await NS(D,Ze.email,Ze.name):fe==="remove-stakeholder"&&await CS(D,Ze.email);ei(),await is(Ue)}catch(D){console.error("Error modifying user session role:",D);const Z=(D==null?void 0:D.message)||(D==null?void 0:D.toString())||"Unknown error";console.error("Full error details:",D),alert(`Failed to ${fe==="remove-stakeholder"?"remove stakeholder from":"add user to"} session(s).

Error: ${Z}

Please check the console for more details.`)}},ti=async(w,D)=>{if(I(null),!!confirm(`Are you sure you want to ${D?"remove":"grant"} system admin access for this user?`))try{D?await jv(w):await Lh(w),await is(Ue)}catch(Z){console.error("Error toggling system admin:",Z),alert("Failed to update system admin status. Please try again.")}},ma=async(w,D)=>{I(null);const Z=de==="session-admin"?`Are you sure you want to remove ${D} from all sessions you manage? This will remove them as a stakeholder or session admin from your sessions only.`:`Are you sure you want to remove all roles from ${D}? This will remove them from all sessions and revoke system admin access.`;if(confirm(Z))try{if(de==="system-admin"&&await jv(w),de==="session-admin"){for(const ae of pe)try{await _S(ae,w)}catch(A){console.error(`Error removing session admin from ${ae}:`,A)}for(const ae of pe)try{await ES(ae,w)}catch(A){console.error(`Error removing stakeholder from ${ae}:`,A)}}else for(const ae of Ue)try{await _S(ae.id,w),await ES(ae.id,w)}catch{}await is(Ue)}catch(ae){console.error("Error removing roles:",ae),alert("Failed to remove roles. Please try again.")}},xi=async(w,D)=>{const Z=u.find(ae=>ae.id===w);if(Z){if(de==="session-admin"){if(Z.roles.stakeholderSessionCount===0){alert("This user is not a stakeholder in any sessions.");return}const ae=`Are you sure you want to remove ${D} as a stakeholder from all sessions you manage?`;if(!confirm(ae))return;try{let A=0;for(const $ of Ue)try{await CS($.id,Z.email),A++}catch(R){console.error(`Error removing stakeholder from session ${$.id}:`,R)}await is(Ue),A>0?alert(`${D} has been removed as a stakeholder from ${A} session(s) you manage.`):alert(`${D} was not a stakeholder in any of the sessions you manage.`)}catch(A){console.error("Error removing stakeholder:",A),alert("Failed to remove stakeholder. Please try again.")}return}Mt(Z),qe(!0)}},vo=async()=>{var w;if(Fe){if(Le.has(Fe.id)){const D=tn(Fe);alert(`Cannot delete this protected account${D?` (${D})`:""}. This protects against accidentally locking important users out of the system.`),qe(!1),Mt(null);return}yt(!0);try{if(!e)throw new Error("You must be logged in to delete users");const Z=`${Ce.supabaseUrl}/functions/v1/delete-user`,ae=await fetch(Z,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${Ce.supabaseKey}`},body:JSON.stringify({userId:Fe.id,currentUserId:e.id})});if(!ae.ok){let R="Failed to delete user";try{R=(await ae.json()).error||R}catch{R=`Server returned ${ae.status}: ${ae.statusText}`}throw new Error(R)}const A=await ae.json();d(R=>R.filter(ne=>ne.id!==Fe.id)),qe(!1);const $=Fe.id;Mt(null);try{await is(Ue)}catch(R){console.error("Error reloading users after deletion:",R)}}catch(D){console.error("Error deleting user:",D);const Z=(D==null?void 0:D.message)||((w=D==null?void 0:D.error)==null?void 0:w.message)||"Unknown error";d(ae=>!ae.find($=>$.id===(Fe==null?void 0:Fe.id))&&Fe?[...ae,Fe].sort(($,R)=>($.name||$.email).localeCompare(R.name||R.email)):ae),alert(`Failed to delete user: ${Z}

If this persists, the deletion may be blocked by database security policies. Please check the console for details.`);try{await is(Ue)}catch(ae){console.error("Error reloading users after failed deletion:",ae)}}finally{yt(!1)}}},Ui=()=>{qe(!1),Mt(null)},Bi=async()=>{if(!zt)return;if(!He.trim()){alert("Name is required");return}if(!Gr.trim()){alert("Email is required");return}if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(Gr.trim())){alert("Please enter a valid email address");return}Xt(!0);try{const{error:D}=await Ce.from("users").update({name:He.trim(),email:Gr.trim().toLowerCase()}).eq("id",zt.id);if(D)throw D;d(Z=>Z.map(ae=>ae.id===zt.id?{...ae,name:He.trim(),email:Gr.trim().toLowerCase()}:ae)),Dt(!1),_e(null),Zt(""),dt("")}catch(D){console.error("Error updating user:",D),alert("Failed to update user. Please try again.")}finally{Xt(!1)}},wi=()=>{E(!1),Wt(!0),Ht({name:"",email:"",isSystemAdmin:!1,sessionAdminIds:[],stakeholderSessionIds:[]}),vt(id()),In(""),Lr([]),hn(""),jn([]),cr(),yr(!0)},Pr=()=>{Wt(!1),Ht({name:"",email:"",isSystemAdmin:!1,sessionAdminIds:[],stakeholderSessionIds:[]}),vt(id()),In(""),Lr([]),hn(""),jn([]),Kr(!0),Er(!0),mr({sessionAdmin:!1,stakeholder:!1}),yr(!0)};y.useEffect(()=>{(async()=>{var Z,ae,A,$;try{const{data:{session:R}}=await Ce.auth.getSession();if(R){const ne=((ae=(Z=R.user)==null?void 0:Z.app_metadata)==null?void 0:ae.provider)==="azure"||(($=(A=R.user)==null?void 0:A.identities)==null?void 0:$.some(ge=>ge.provider==="azure"));Fr(ne||!1)}else Fr(!1)}catch(R){console.error("Error checking Azure sign-in status:",R),Fr(!1)}})();const{data:{subscription:D}}=Ce.auth.onAuthStateChange((Z,ae)=>{var A,$,R,ne;if(ae){const ge=(($=(A=ae.user)==null?void 0:A.app_metadata)==null?void 0:$.provider)==="azure"||((ne=(R=ae.user)==null?void 0:R.identities)==null?void 0:ne.some(Re=>Re.provider==="azure"));Fr(ge||!1)}else Fr(!1)});return()=>{D.unsubscribe()}},[]);const bi=async()=>{try{const w=window.location.pathname.startsWith("/feature-voting-app")?"/feature-voting-app":"",{error:D}=await Ce.auth.signInWithOAuth({provider:"azure",options:{redirectTo:`${window.location.origin}${w}/users`,scopes:"email openid profile User.ReadBasic.All"}});D&&(console.error("Azure sign-in error:",D),vt(Z=>({...Z,error:"Failed to sign in with Microsoft. Please try again."})))}catch(w){console.error("Azure sign-in error:",w),vt(D=>({...D,error:"Failed to sign in with Microsoft. Please try again."}))}},xo=async w=>{if(vt(D=>({...D,searchTerm:w,isSearching:!0,showResults:!1,error:""})),!w||w.trim().length<2){vt(D=>({...D,results:[],isSearching:!1,error:""}));return}try{const D=await ree(w);vt(Z=>({...Z,results:D,isSearching:!1,showResults:D.length>0,error:""}))}catch(D){console.error("Error searching Azure AD users:",D);const Z=(D==null?void 0:D.message)||"Failed to search company users. Please try again.";vt(ae=>({...ae,results:[],isSearching:!1,showResults:!1,error:Z}))}},wo=w=>{let D="";if(w.givenName&&w.surname)D=`${w.givenName} ${w.surname}`;else if(w.displayName){const Z=w.displayName.trim();if(Z.includes(",")){const ae=Z.split(",").map(A=>A.trim());ae.length===2?D=`${ae[1]} ${ae[0]}`:D=Z}else D=Z}else D=w.mail||w.userPrincipalName||"";Ht({...rt,name:D,email:w.mail||w.userPrincipalName}),vt(id()),yr(!1)},pa=async()=>{if(!rt.name.trim()||!rt.email.trim()){alert("Please fill in all required fields (Name, Email)");return}sr(!0);try{const{data:w,error:D}=await Ce.from("users").insert({name:rt.name.trim(),email:rt.email.trim().toLowerCase(),created_by:e==null?void 0:e.id,created_by_name:e==null?void 0:e.name}).select().single();if(D)throw D;if(!w)throw new Error("User creation failed");const Z=w.id;if(de==="system-admin"&&rt.isSystemAdmin&&await Lh(Z),de==="system-admin"&&Jt.sessionAdmin&&vr)if(Kt)for(const $ of ns)try{await yd($.id,Z)}catch(R){console.error(`Error adding session admin role to session ${$.id}:`,R)}else for(const $ of rt.sessionAdminIds)try{await yd($,Z)}catch(R){console.error("Error adding session admin role:",R)}console.log("Adding stakeholder to sessions:",rt.stakeholderSessionIds),console.log("View mode:",de),console.log("User admin sessions:",pe),console.log("All sessions:",Ue.map($=>({id:$.id,title:$.title})));let ae=[];if(de==="session-admin"?lr&&Cr?ae=Hr.map($=>$.id):lr&&!Cr&&(ae=rt.stakeholderSessionIds):de==="system-admin"&&Jt.stakeholder&&lr&&(Cr?ae=Hr.map($=>$.id):ae=rt.stakeholderSessionIds),ae.length===0)console.log("No stakeholder sessions to add");else{for(const $ of ae){if(de==="session-admin"&&!Ue.some(ne=>ne.id===$)){console.warn(`Skipping session ${$} - not in managed sessions`);continue}try{console.log(`Adding ${rt.email} as stakeholder to session ${$}`);const R=await NS($,rt.email,rt.name);console.log(`Successfully added stakeholder to session ${$}:`,R)}catch(R){console.error(`Error adding stakeholder role to session ${$}:`,R);const ne=(R==null?void 0:R.message)||(R==null?void 0:R.toString())||"Unknown error";alert(`Warning: Failed to add ${rt.email} to session ${$}.

Error: ${ne}`)}}console.log("Finished adding stakeholder roles")}let A="User";rt.isSystemAdmin?A="System Admin":Jt.sessionAdmin&&vr&&(Kt||rt.sessionAdminIds.length>0)?A="Session Admin":(de==="session-admin"&&lr&&(Cr||rt.stakeholderSessionIds.length>0)||de==="system-admin"&&Jt.stakeholder&&lr&&(Cr||rt.stakeholderSessionIds.length>0))&&(A="Stakeholder"),Pr(),await is(Ue),$s({email:rt.email,userType:A}),_s(!0)}catch(w){console.error("Error creating user:",w),alert(`Failed to create user: ${w.message||"Unknown error"}`)}finally{sr(!1)}},ga=w=>{Ht(D=>({...D,sessionAdminIds:D.sessionAdminIds.includes(w)?D.sessionAdminIds.filter(Z=>Z!==w):[...D.sessionAdminIds,w]}))},Wi=w=>{Ht(D=>({...D,stakeholderSessionIds:D.stakeholderSessionIds.includes(w)?D.stakeholderSessionIds.filter(Z=>Z!==w):[...D.stakeholderSessionIds,w]}))},cn=w=>{const Z=w.split("T")[0].split(" ")[0].split("-");if(Z.length!==3)return new Date(w).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"});const ae=parseInt(Z[0],10),A=parseInt(Z[1],10)-1,$=parseInt(Z[2],10);return new Date(ae,A,$).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})},Jr=w=>{const D=new Date,Z=new Date(w.start_date),ae=new Date(w.end_date);return w.is_active&&D>=Z&&D<=ae?{text:"Active",color:"text-green-600"}:D<Z?{text:"Upcoming",color:"text-blue-600"}:{text:"Ended",color:"text-gray-500"}},kn=w=>{const D=new Date(w.start_date),Z=new Date(w.end_date),ae=D.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}),A=Z.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"});return`${ae} - ${A}`},Hn=w=>w.roles.isSystemAdmin?a.jsxs("span",{className:"inline-flex items-center px-2.5 py-1 rounded text-xs font-medium bg-[#C89212] text-white",children:[a.jsx(Br,{className:"h-3.5 w-3.5 mr-1"}),"System Admin"]}):w.roles.sessionAdminCount>0?a.jsxs("span",{className:"inline-flex items-center px-2.5 py-1 rounded text-xs font-medium bg-[#576C71] text-white",children:[a.jsx(Rr,{className:"h-3.5 w-3.5 mr-1"}),"Session Admin (",w.roles.sessionAdminCount,")"]}):w.roles.stakeholderSessionCount>0?a.jsxs("span",{className:"inline-flex items-center px-2.5 py-1 rounded text-xs font-medium bg-[#8B5A4A] text-white",children:[a.jsx(gn,{className:"h-3.5 w-3.5 mr-1"}),"Stakeholder (",w.roles.stakeholderSessionCount,")"]}):a.jsx("span",{className:"inline-flex items-center px-2.5 py-1 rounded text-xs font-medium bg-gray-100 text-gray-600",children:"No Role"}),Vi=w=>w?w==="session-admin"?Ue.filter(D=>!gt.adminSessions.includes(D.id)):w==="remove-stakeholder"?Ue.filter(D=>gt.stakeholderSessions.includes(D.id)&&(de==="system-admin"||pe.includes(D.id))):Ue.filter(D=>!gt.stakeholderSessions.includes(D.id)):[],Rs=(w,D)=>D?D==="session-admin"?w.roles.sessionAdminCount<Ue.length:w.roles.stakeholderSessionCount<Ue.length:!1;return Te||p?a.jsx("div",{className:"min-h-screen w-full bg-gray-50 flex items-center justify-center",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-[#2d4660] mx-auto mb-4"}),a.jsx("p",{className:"text-gray-600",children:Te?"Checking access...":"Loading users..."})]})}):!ce&&!U?null:a.jsxs("div",{className:"min-h-screen bg-gray-50 pb-20",children:[a.jsxs("div",{className:"container mx-auto p-4 max-w-6xl",children:[a.jsx("div",{className:"hidden md:flex md:justify-center mb-2",children:a.jsx("img",{src:$a,alt:"New Millennium Building Systems Logo",className:"-mt-4 cursor-pointer hover:opacity-80 transition-opacity",style:{height:"96px",width:"auto"},onClick:()=>s("/sessions")})}),a.jsxs("div",{className:"flex justify-between items-center mb-4 md:mb-6",children:[a.jsxs("div",{className:"flex items-center flex-1 min-w-0",children:[a.jsx("img",{src:Jl,alt:"New Millennium Building Systems Logo",className:"mr-3 md:hidden flex-shrink-0 cursor-pointer hover:opacity-80 transition-opacity",style:{width:"36px",height:"36px",objectFit:"contain"},onClick:()=>s("/sessions")}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("h1",{className:"text-xl md:text-3xl font-bold text-[#2d4660] truncate",children:rs}),a.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:["Welcome, ",e==null?void 0:e.name,aee(ce,U,!ce&&!U,de==="system-admin"?"system-admin":"session-admin")]})]})]}),a.jsxs("div",{ref:G,className:"relative z-40 flex-shrink-0 ml-2",children:[a.jsxs("div",{className:"hidden md:flex space-x-2",children:[(ce||U)&&a.jsxs("button",{onClick:wi,className:"flex items-center px-4 py-2 bg-[#2D4660] text-white rounded-lg hover:bg-[#173B65] transition-colors",children:[a.jsx(Qn,{className:"h-4 w-4 mr-2"}),de==="session-admin"?"Add Stakeholder":"Add User"]}),(ce||U)&&n&&a.jsxs("button",{onClick:()=>s("/admin"),className:"flex items-center px-4 py-2 bg-[#1E5461] text-white rounded-lg hover:bg-[#145668] transition-colors",children:[a.jsx(Rr,{className:"h-4 w-4 mr-2"}),"Admin Dashboard"]}),a.jsxs("button",{onClick:()=>s("/sessions"),className:"flex items-center px-4 py-2 bg-[#4f6d8e] text-white rounded-lg hover:bg-[#3d5670] transition-colors",children:[a.jsx(Ks,{className:"h-4 w-4 mr-2"}),"My Sessions"]}),a.jsx("button",{onClick:w=>{w.preventDefault(),w.stopPropagation(),xr(w)},className:"flex items-center justify-center p-2 w-10 h-10 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-colors",title:"Logout",children:a.jsx(pi,{className:"h-4 w-4"})})]}),a.jsx("div",{className:"flex md:hidden",children:a.jsx("button",{onClick:()=>E(!N),className:"p-2 rounded-md border border-gray-200 bg-white shadow-sm","aria-label":"Open menu",children:a.jsx(ta,{className:"h-5 w-5 text-gray-700"})})}),N&&a.jsx("div",{className:"absolute right-0 mt-2 w-56 bg-white border border-gray-200 rounded-lg shadow-lg md:hidden z-50",children:a.jsxs("div",{className:"py-1",children:[(ce||U)&&a.jsxs("button",{onClick:()=>{E(!1),wi()},className:"w-full px-4 py-3 flex items-center text-left hover:bg-gray-50",children:[a.jsx(Qn,{className:"h-5 w-5 mr-3 text-green-600"}),a.jsx("span",{className:"text-base",children:de==="session-admin"?"Add Stakeholder":"Add User"})]}),(ce||U)&&n&&a.jsxs("button",{onClick:()=>{E(!1),s("/admin")},className:"w-full px-4 py-3 flex items-center text-left hover:bg-gray-50",children:[a.jsx(Rr,{className:"h-5 w-5 mr-3 text-[#1E5461]"}),a.jsx("span",{className:"text-base",children:"Admin Dashboard"})]}),a.jsxs("button",{onClick:()=>{E(!1),s("/sessions")},className:"w-full px-4 py-3 flex items-center text-left hover:bg-gray-50",children:[a.jsx(Ks,{className:"h-5 w-5 mr-3 text-gray-700"}),a.jsx("span",{className:"text-base",children:"My Sessions"})]}),a.jsx("button",{onClick:w=>{w.preventDefault(),w.stopPropagation(),E(!1),xr(w)},className:"w-full px-4 py-3 flex items-center justify-center hover:bg-gray-50",title:"Logout",children:a.jsx(pi,{className:"h-5 w-5 text-gray-700"})})]})})]})]}),a.jsx("div",{className:"relative z-10 bg-white rounded-lg shadow-md p-3 md:p-4 mb-4 md:mb-6",style:{overflow:"visible",position:"relative"},children:a.jsxs("div",{className:"flex flex-col gap-3 md:flex-row md:gap-4",style:{position:"relative"},children:[a.jsxs("div",{className:"flex-1 relative",children:[a.jsx(pk,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"}),a.jsx("input",{type:"text",placeholder:"Search by name or email...",value:x,onChange:w=>b(w.target.value),className:"w-full pl-10 pr-10 py-2.5 md:py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#2d4660] focus:border-transparent text-base"}),x&&a.jsx("button",{onClick:()=>b(""),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600",children:a.jsx(Ts,{className:"h-5 w-5"})})]}),a.jsx(oee,{products:pr,value:_r,onChange:Sn}),a.jsxs("select",{value:S==="system-admin"&&de==="session-admin"?"session-admin":S,onChange:w=>j(w.target.value),className:"px-4 py-2.5 md:py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#2d4660] focus:border-transparent text-base",children:[de!=="session-admin"&&a.jsx("option",{value:"all",children:"All Roles"}),de!=="session-admin"&&a.jsx("option",{value:"system-admin",children:"System Admin"}),de!=="session-admin"&&a.jsx("option",{value:"session-admin",children:"Session Admin"}),a.jsx("option",{value:"stakeholder",children:"Stakeholder"}),a.jsx("option",{value:"none",children:"No Role"})]}),a.jsx("button",{onClick:()=>{b(""),Sn(""),j("all")},disabled:!x&&!_r&&S==="all",className:"inline-flex items-center justify-center px-3 py-2.5 md:py-2 border border-gray-300 rounded-lg bg-white text-gray-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed hover:bg-gray-50 disabled:hover:bg-white",title:"Clear all filters",children:a.jsx(dF,{className:"h-5 w-5"})})]})}),a.jsx("div",{className:"md:hidden space-y-3 relative z-10 overflow-visible",children:m.length===0?a.jsx("div",{className:"bg-white rounded-lg shadow-md p-8 text-center text-gray-500",children:x||S!=="all"||_r?"No users found matching your filters.":"No users found."}):m.map(w=>{var D,Z;return a.jsxs("div",{className:"bg-white rounded-lg shadow-md overflow-visible",children:[a.jsxs("div",{className:"p-4 border-b border-gray-100",children:[a.jsxs("div",{className:"flex justify-between items-start mb-2",children:[a.jsxs("div",{className:"flex-1 min-w-0 pr-2",children:[a.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[a.jsx("h3",{className:"text-base font-semibold text-gray-900 truncate",children:w.name||w.email}),w.id===(e==null?void 0:e.id)&&a.jsx("span",{className:"text-xs text-[#c59f2d] font-semibold",children:"(You)"}),w.roles.isSystemAdmin&&a.jsx("span",{className:"inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium bg-[#C89212] text-white",children:"System Admin"}),w.roles.sessionAdminCount>0&&a.jsxs("span",{className:"inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-700",children:["Session Admin (",w.roles.sessionAdminCount,")"]}),w.roles.stakeholderSessionCount>0&&a.jsxs("span",{className:"inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-700",children:["Stakeholder (",w.roles.stakeholderSessionCount,")"]}),tn(w)&&a.jsxs("span",{className:"text-xs text-[#c59f2d] font-semibold",children:["(",tn(w),")"]}),as(w)&&a.jsxs("span",{className:"px-2 py-0.5 bg-red-100 text-red-700 text-xs font-medium rounded",children:["Duplicate (",Yr(w),")"]})]}),a.jsx("p",{className:"text-sm text-gray-500 truncate mt-1",children:w.email}),(()=>{const ae=ys(w);return ae.length>0?a.jsxs("div",{className:"text-sm text-gray-600 mt-1",children:[a.jsx("span",{className:"font-medium",children:ae.length===1?"Product:":"Products:"}),a.jsx("ul",{className:"list-none mt-1 space-y-0.5",children:ae.map(A=>{const $=on(A.name,A.color_hex??null);return a.jsxs("li",{className:"text-gray-600 flex items-center gap-2",children:[a.jsx("span",{className:"inline-block w-3 h-3 rounded-sm flex-shrink-0",style:{backgroundColor:$.background}}),A.name]},A.id)})})]}):null})()]}),a.jsx("div",{className:"flex items-center gap-2 flex-shrink-0",children:a.jsxs("div",{className:"relative",ref:ae=>{ve.current[w.id]=ae},children:[a.jsx("button",{onClick:()=>I(C===w.id?null:w.id),className:`p-2 rounded-md hover:bg-gray-100 transition-colors ${w.id===(e==null?void 0:e.id)?"opacity-50 cursor-not-allowed":""}`,disabled:w.id===(e==null?void 0:e.id),title:w.id===(e==null?void 0:e.id)?"Cannot modify your own permissions":"Change user role",children:a.jsx(mk,{className:"h-5 w-5 text-gray-600"})}),C===w.id&&w.id!==(e==null?void 0:e.id)&&a.jsx("div",{className:"fixed md:absolute md:right-0 md:mt-1 w-64 bg-white border border-gray-200 rounded-lg shadow-lg z-[9999]",style:T[w.id]||{},children:a.jsxs("div",{className:"py-1",children:[a.jsx("div",{className:"px-3 py-2 text-xs font-semibold text-gray-500 uppercase border-b border-gray-200",children:"Change User Role"}),de==="system-admin"&&a.jsxs(a.Fragment,{children:[w.roles.isSystemAdmin?a.jsxs("button",{onClick:()=>ti(w.id,!0),className:"w-full px-4 py-3 text-left flex items-center hover:bg-red-50 text-red-700",children:[a.jsx(Br,{className:"h-5 w-5 mr-3 flex-shrink-0"}),a.jsxs("div",{children:[a.jsx("div",{className:"font-medium text-base",children:"Remove System Admin"}),a.jsx("div",{className:"text-xs text-gray-500",children:"Revoke global admin access"})]})]}):a.jsxs("button",{onClick:()=>ti(w.id,!1),className:"w-full px-4 py-3 text-left flex items-center hover:bg-[#C89212]/10 text-[#C89212]",children:[a.jsx(Br,{className:"h-5 w-5 mr-3 flex-shrink-0"}),a.jsxs("div",{children:[a.jsx("div",{className:"font-medium text-base",children:"Make System Admin"}),a.jsx("div",{className:"text-xs text-gray-500",children:"Grant global admin access"})]})]}),Rs(w,"session-admin")&&a.jsxs("button",{onClick:()=>Ar(w,"session-admin"),className:"w-full px-4 py-3 text-left flex items-center hover:bg-[#576C71]/10 text-[#576C71] border-t border-gray-200",children:[a.jsx(Rr,{className:"h-5 w-5 mr-3 flex-shrink-0"}),a.jsxs("div",{children:[a.jsx("div",{className:"font-medium text-base",children:"Make Session Admin"}),a.jsx("div",{className:"text-xs text-gray-500",children:"Add to a session as admin"})]})]})]}),Rs(w,"stakeholder")&&a.jsxs("button",{onClick:()=>Ar(w,"stakeholder"),className:"w-full px-4 py-3 text-left flex items-center hover:bg-[#8B5A4A]/10 text-[#8B5A4A] border-t border-gray-200",children:[a.jsx(gn,{className:"h-5 w-5 mr-3 flex-shrink-0"}),a.jsxs("div",{children:[a.jsx("div",{className:"font-medium text-base",children:"Make Stakeholder"}),a.jsx("div",{className:"text-xs text-gray-500",children:"Add to a session as stakeholder"})]})]}),de==="session-admin"&&w.stakeholderInSessions&&w.stakeholderInSessions.length>0&&w.stakeholderInSessions.some(ae=>pe.includes(ae.id))&&a.jsxs("button",{onClick:()=>Ar(w,"remove-stakeholder"),className:"w-full px-4 py-3 text-left flex items-center hover:bg-red-50 text-red-700 border-t border-gray-200",children:[a.jsx(Yu,{className:"h-5 w-5 mr-3 flex-shrink-0"}),a.jsxs("div",{children:[a.jsx("div",{className:"font-medium text-base",children:"Remove Stakeholder"}),a.jsx("div",{className:"text-xs text-gray-500",children:"Remove from a session you manage"})]})]}),(w.roles.isSystemAdmin||w.roles.sessionAdminCount>0||w.roles.stakeholderSessionCount>0)&&a.jsxs("button",{onClick:()=>ma(w.id,w.name),className:"w-full px-4 py-3 text-left flex items-center hover:bg-gray-50 text-gray-700 border-t border-gray-200",children:[a.jsx(Yu,{className:"h-5 w-5 mr-3 flex-shrink-0"}),a.jsxs("div",{children:[a.jsx("div",{className:"font-medium text-base",children:"Remove All Roles"}),a.jsx("div",{className:"text-xs text-gray-500",children:"Remove from all sessions"})]})]}),(de==="system-admin"||de==="session-admin"&&w.roles.stakeholderSessionCount>0&&((D=w.stakeholderInSessions)==null?void 0:D.some(ae=>Ue.some(A=>A.id===ae.id)))&&!q.has(w.email))&&a.jsx("div",{className:"px-3 py-2 text-xs font-semibold text-gray-500 uppercase border-t border-gray-200",children:"User Functions"}),de==="system-admin"&&a.jsxs("button",{onClick:()=>{_e(w),Zt(w.name),dt(w.email),Dt(!0),I(null)},className:"w-full px-4 py-3 text-left flex items-center hover:bg-[#1E5461]/10 text-[#1E5461] border-t border-gray-200",children:[a.jsx(vd,{className:"h-5 w-5 mr-3 flex-shrink-0"}),a.jsxs("div",{children:[a.jsx("div",{className:"font-medium text-base",children:"Edit User Profile"}),a.jsx("div",{className:"text-xs text-gray-500",children:"Update name and email"})]})]}),(de==="system-admin"||de==="session-admin"&&w.roles.stakeholderSessionCount>0&&((Z=w.stakeholderInSessions)==null?void 0:Z.some(ae=>Ue.some(A=>A.id===ae.id))))&&!q.has(w.email)&&a.jsxs("button",{onClick:()=>{I(null),xi(w.id,w.name)},className:`w-full px-4 py-3 text-left flex items-center hover:bg-[#8B5A4A]/10 text-[#8B5A4A] border-t border-gray-200 ${w.id===(e==null?void 0:e.id)||de==="system-admin"&&Le.has(w.id)?"opacity-50 cursor-not-allowed":""}`,disabled:w.id===(e==null?void 0:e.id)||de==="system-admin"&&Le.has(w.id),children:[a.jsx(to,{className:"h-5 w-5 mr-3 flex-shrink-0"}),a.jsxs("div",{children:[a.jsx("div",{className:"font-medium text-base",children:de==="session-admin"?"Remove Stakeholder":"Delete User"}),a.jsx("div",{className:"text-xs text-gray-500",children:de==="session-admin"?"Remove from all your sessions":w.id===(e==null?void 0:e.id)?"Cannot delete your own account":Le.has(w.id)?`Cannot delete protected account${tn(w)?` (${tn(w)})`:""}`:"Permanently delete this user"})]})]})]})})]})})]}),a.jsx("div",{className:"mt-2",children:Hn(w)})]}),a.jsxs("div",{className:"p-4 space-y-3",children:[a.jsxs("div",{children:[a.jsx("div",{className:"text-xs font-semibold text-gray-500 uppercase mb-1",children:"Sessions"}),a.jsxs("div",{className:"space-y-1",children:[w.roles.sessionAdminCount>0&&a.jsxs("div",{className:"space-y-1",children:[a.jsxs("div",{className:"inline-flex items-center gap-1.5 px-2.5 py-1 rounded border text-xs font-medium",style:{borderColor:"#576C71",color:"#576C71"},children:[a.jsx(gk,{className:"h-3.5 w-3.5 flex-shrink-0",style:{fill:"#576C71",color:"#576C71"}}),a.jsxs("span",{children:[w.roles.sessionAdminCount," as Session Admin"]})]}),w.adminInSessions&&w.adminInSessions.length>0&&a.jsx(a.Fragment,{children:(()=>{const A=ie(w.adminInSessions)||w.adminInSessions[0],$=w.adminInSessions.length>1,R=(L==null?void 0:L.userId)===w.id&&(L==null?void 0:L.role)==="admin";return a.jsxs(a.Fragment,{children:[A&&a.jsxs("button",{onClick:async ne=>{ne.stopPropagation(),await r(A),s("/admin")},className:"ml-6 text-left text-sm text-gray-700 hover:text-gray-900 hover:underline",children:[a.jsx("div",{children:A.title||"Unnamed Session"}),a.jsx("div",{className:"text-xs text-gray-500 mt-0.5",children:kn(A)})]}),$&&a.jsxs("button",{onClick:ne=>{ne.stopPropagation(),H(R?null:{userId:w.id,role:"admin"})},className:"ml-6 text-xs text-gray-500 hover:text-gray-700 hover:underline mt-1 block flex items-center gap-1.5",style:{minWidth:"70px"},children:[a.jsx("span",{className:"inline-flex items-center justify-center w-4 h-4 border border-gray-400 rounded text-gray-600",children:R?a.jsx(_l,{className:"h-2.5 w-2.5"}):a.jsx(dn,{className:"h-2.5 w-2.5"})}),R?"Hide":"Show"]}),R&&a.jsx("div",{className:"ml-6 mt-1 space-y-1",children:w.adminInSessions.filter(ne=>ne.id!==(A==null?void 0:A.id)).map(ne=>a.jsxs("button",{onClick:async ge=>{ge.stopPropagation(),await r(ne),s("/admin")},className:"block text-sm text-left text-gray-700 hover:text-gray-900 hover:underline w-full",children:[a.jsx("div",{children:ne.title||"Unnamed Session"}),a.jsx("div",{className:"text-xs text-gray-500 mt-0.5",children:kn(ne)})]},ne.id))})]})})()})]}),w.roles.stakeholderSessionCount>0&&a.jsxs("div",{className:"space-y-1",children:[a.jsxs("div",{className:"inline-flex items-center gap-1.5 px-2.5 py-1 rounded border text-xs font-medium",style:{borderColor:"#8B5A4A",color:"#8B5A4A"},children:[a.jsx(gn,{className:"h-3.5 w-3.5 flex-shrink-0",style:{fill:"#8B5A4A",color:"#8B5A4A"}}),a.jsxs("span",{children:[w.roles.stakeholderSessionCount," as Stakeholder"]})]}),w.stakeholderInSessions&&w.stakeholderInSessions.length>0&&a.jsx(a.Fragment,{children:(()=>{const A=ie(w.stakeholderInSessions)||w.stakeholderInSessions[0],$=w.stakeholderInSessions.length>1,R=(L==null?void 0:L.userId)===w.id&&(L==null?void 0:L.role)==="stakeholder";return a.jsxs(a.Fragment,{children:[A&&a.jsxs("button",{onClick:async ne=>{ne.stopPropagation(),await r(A),s("/admin")},className:"ml-6 text-left text-sm text-gray-700 hover:text-gray-900 hover:underline",children:[a.jsx("div",{children:A.title||"Unnamed Session"}),a.jsx("div",{className:"text-xs text-gray-500 mt-0.5",children:kn(A)})]}),$&&a.jsxs("button",{onClick:ne=>{ne.stopPropagation(),H(R?null:{userId:w.id,role:"stakeholder"})},className:"ml-6 text-xs text-gray-500 hover:text-gray-700 hover:underline mt-1 block flex items-center gap-1.5",style:{minWidth:"70px"},children:[a.jsx("span",{className:"inline-flex items-center justify-center w-4 h-4 border border-gray-400 rounded text-gray-600",children:R?a.jsx(_l,{className:"h-2.5 w-2.5"}):a.jsx(dn,{className:"h-2.5 w-2.5"})}),R?"Hide":"Show"]}),R&&a.jsx("div",{className:"ml-6 mt-1 space-y-1",children:w.stakeholderInSessions.filter(ne=>ne.id!==(A==null?void 0:A.id)).map(ne=>a.jsxs("button",{onClick:async ge=>{ge.stopPropagation(),await r(ne),s("/admin")},className:"block text-sm text-left text-gray-700 hover:text-gray-900 hover:underline w-full",children:[a.jsx("div",{children:ne.title||"Unnamed Session"}),a.jsx("div",{className:"text-xs text-gray-500 mt-0.5",children:kn(ne)})]},ne.id))})]})})()})]}),w.roles.sessionAdminCount===0&&w.roles.stakeholderSessionCount===0&&a.jsx("span",{className:"text-sm text-gray-400",children:"No session roles"})]})]}),a.jsxs("div",{children:[a.jsx("div",{className:"text-xs font-semibold text-gray-500 uppercase mb-1",children:"Assigned"}),a.jsxs("div",{className:"space-y-2",children:[w.roles.sessionAdminCount===0&&w.roles.stakeholderSessionCount===0&&a.jsxs("div",{className:"flex items-center text-sm text-gray-700",children:[a.jsx(An,{className:"h-4 w-4 mr-2 text-gray-400 flex-shrink-0"}),a.jsx("span",{children:w.created_at?cn(w.created_at):"N/A"}),a.jsxs("span",{className:"text-gray-500 text-xs ml-2",children:["by ",w.created_by_name||"System"]})]}),w.adminInSessions&&w.adminInSessions.length>0&&a.jsx("div",{className:"space-y-3",children:(()=>{const A=ie(w.adminInSessions)||w.adminInSessions[0];w.adminInSessions.length>1;const $=(L==null?void 0:L.userId)===w.id&&(L==null?void 0:L.role)==="admin";return a.jsxs(a.Fragment,{children:[A&&a.jsxs("div",{className:"ml-5 space-y-1",children:[a.jsxs("div",{className:"flex items-center text-xs text-gray-700 whitespace-nowrap",children:[a.jsx(An,{className:"h-3 w-3 mr-1.5 text-gray-400 flex-shrink-0"}),a.jsx("span",{children:A.assignedAt?cn(A.assignedAt):"N/A"})]}),a.jsxs("div",{className:"text-xs text-gray-500 ml-5",children:["by ",A.assignedByName||"System"]})]}),$&&a.jsx("div",{className:"ml-5 mt-2 space-y-3",children:w.adminInSessions.filter(R=>R.id!==(A==null?void 0:A.id)).map(R=>a.jsxs("div",{className:"space-y-1",children:[a.jsxs("div",{className:"flex items-center text-xs text-gray-700 whitespace-nowrap",children:[a.jsx(An,{className:"h-3 w-3 mr-1.5 text-gray-400 flex-shrink-0"}),a.jsx("span",{children:R.assignedAt?cn(R.assignedAt):"N/A"})]}),a.jsxs("div",{className:"text-xs text-gray-500 ml-5",children:["by ",R.assignedByName||"System"]})]},R.id))})]})})()}),w.stakeholderInSessions&&w.stakeholderInSessions.length>0&&a.jsx("div",{className:w.adminInSessions&&w.adminInSessions.length>0?"pt-4 border-t border-gray-100 mt-4":"",children:a.jsx("div",{className:"space-y-3",children:(()=>{const A=ie(w.stakeholderInSessions)||w.stakeholderInSessions[0];w.stakeholderInSessions.length>1;const $=(L==null?void 0:L.userId)===w.id&&(L==null?void 0:L.role)==="stakeholder";return a.jsxs(a.Fragment,{children:[A&&a.jsxs("div",{className:"ml-5 space-y-1",children:[a.jsxs("div",{className:"flex items-center text-xs text-gray-700 whitespace-nowrap",children:[a.jsx(An,{className:"h-3 w-3 mr-1.5 text-gray-400 flex-shrink-0"}),a.jsx("span",{children:A.assignedAt?cn(A.assignedAt):"N/A"})]}),a.jsxs("div",{className:"text-xs text-gray-500 ml-5",children:["by ",A.assignedByName||"System"]})]}),$&&a.jsx("div",{className:"ml-5 mt-2 space-y-3",children:w.stakeholderInSessions.filter(R=>R.id!==(A==null?void 0:A.id)).map(R=>a.jsxs("div",{className:"space-y-1",children:[a.jsxs("div",{className:"flex items-center text-xs text-gray-700 whitespace-nowrap",children:[a.jsx(An,{className:"h-3 w-3 mr-1.5 text-gray-400 flex-shrink-0"}),a.jsx("span",{children:R.assignedAt?cn(R.assignedAt):"N/A"})]}),a.jsxs("div",{className:"text-xs text-gray-500 ml-5",children:["by ",R.assignedByName||"System"]})]},R.id))})]})})()})})]})]})]})]},w.id)})}),a.jsxs("div",{className:"hidden md:block relative z-10 bg-white rounded-lg shadow-md overflow-visible",children:[a.jsxs("table",{className:"min-w-full divide-y divide-gray-200 rounded-t-lg",children:[a.jsx("thead",{className:"bg-gray-50",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"User"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Role"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Sessions"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider w-48",children:"Created"}),a.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),a.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:m.length===0?a.jsx("tr",{children:a.jsx("td",{colSpan:5,className:"px-6 py-8 text-center text-gray-500",children:x||S!=="all"||_r?"No users found matching your filters.":"No users found."})}):m.map(w=>{var D,Z,ae,A;return a.jsxs("tr",{className:"hover:bg-gray-50 relative",onMouseEnter:()=>F(w.id),onMouseLeave:()=>F(null),children:[a.jsx("td",{className:"px-6 py-4 whitespace-nowrap align-top",children:a.jsxs("div",{children:[a.jsxs("div",{className:"text-sm font-medium text-gray-900",children:[w.name,w.id===(e==null?void 0:e.id)&&a.jsx("span",{className:"ml-2 text-xs text-[#c59f2d] font-semibold",children:"(You)"}),tn(w)&&a.jsxs("span",{className:"ml-2 text-xs text-[#c59f2d] font-semibold",children:["(",tn(w),")"]}),as(w)&&a.jsxs("span",{className:"ml-2 px-2 py-0.5 bg-red-100 text-red-700 text-xs font-medium rounded",children:["Duplicate (",Yr(w),")"]})]}),a.jsx("div",{className:"text-sm text-gray-500",children:w.email}),(()=>{const $=ys(w);return $.length>0?a.jsxs("div",{className:"text-sm text-gray-600 mt-1",children:[a.jsx("span",{className:"font-medium",children:$.length===1?"Product:":"Products:"}),a.jsx("ul",{className:"list-none mt-1 space-y-0.5",children:$.map(R=>{const ne=on(R.name,R.color_hex??null);return a.jsxs("li",{className:"text-gray-600 flex items-center gap-2",children:[a.jsx("span",{className:"inline-block w-3 h-3 rounded-sm flex-shrink-0",style:{backgroundColor:ne.background}}),R.name]},R.id)})})]}):null})()]})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap align-top",children:Hn(w)}),a.jsx("td",{className:"px-6 py-4 text-sm text-gray-500 align-top relative overflow-visible",children:a.jsxs("div",{className:"space-y-2",children:[w.roles.sessionAdminCount===0&&w.roles.stakeholderSessionCount===0&&a.jsx("span",{className:"text-gray-400",children:"None"}),w.adminInSessions&&w.adminInSessions.length>0&&a.jsxs("div",{children:[a.jsx("div",{className:"mb-2",children:(()=>{var Re;const $=((Re=w.adminInSessions)==null?void 0:Re.length)||0,R=$>1,ne=(L==null?void 0:L.userId)===w.id&&(L==null?void 0:L.role)==="admin",ge=()=>a.jsxs("div",{className:"inline-flex items-center gap-1.5 px-2.5 py-1 rounded border text-xs font-medium group",style:{borderColor:"#576C71",color:"#576C71"},children:[a.jsx(gk,{className:"h-3.5 w-3.5 flex-shrink-0",style:{fill:"#576C71",color:"#576C71"}}),a.jsxs("span",{children:["Session Admin in ",$," session",$!==1?"s":""]}),R&&a.jsxs("span",{className:"inline-flex items-baseline gap-0.5",style:{color:"#576C71"},children:[ne?a.jsx(_l,{className:"h-2.5 w-2.5 transition-all group-hover:brightness-150 mt-[3px]",style:{color:"#576C71"}}):a.jsx(dn,{className:"h-2.5 w-2.5 transition-all group-hover:brightness-150 mt-[3px]",style:{color:"#576C71"}}),a.jsx("span",{className:"text-[10px] transition-all group-hover:brightness-150",children:ne?"Hide":"Show"})]})]});return R?a.jsx("button",{onClick:oe=>{oe.stopPropagation(),H(ne?null:{userId:w.id,role:"admin"})},className:"text-left",children:a.jsx(ge,{})}):a.jsx(ge,{})})()}),(()=>{const R=ie(w.adminInSessions)||w.adminInSessions[0],ne=(L==null?void 0:L.userId)===w.id&&(L==null?void 0:L.role)==="admin";return a.jsxs(a.Fragment,{children:[R&&a.jsxs("div",{className:"relative cursor-pointer",style:{marginLeft:"1.25rem",marginTop:"0.75rem"},onMouseEnter:()=>K(`${w.id}-${R.id}`),onMouseLeave:()=>K(null),onClick:async ge=>{ge.stopPropagation(),await r(R),s("/admin")},children:[le===`${w.id}-${R.id}`&&a.jsx("div",{className:"absolute bg-blue-50 pointer-events-none z-0 rounded",style:{left:"-0.5rem",right:"-13rem",top:"-0.375rem",bottom:"-0.375rem",boxShadow:"0 0 0 1px rgb(191 219 254)",outline:"none"}}),a.jsxs("div",{className:"text-left text-sm text-gray-700 hover:text-gray-900 block relative z-10",style:{padding:0,margin:0,lineHeight:"1.25rem"},children:[a.jsx("div",{style:{height:"20px",lineHeight:"20px"},children:R.title||"Unnamed Session"}),a.jsx("div",{className:"text-xs text-gray-500",style:{height:"16px",lineHeight:"16px",marginTop:"2px"},children:kn(R)})]})]}),ne&&a.jsx("div",{style:{marginTop:"0.5rem"},children:w.adminInSessions.filter(ge=>ge.id!==(R==null?void 0:R.id)).map((ge,Re)=>a.jsxs("div",{className:"relative cursor-pointer",style:{marginTop:"0.75rem",marginLeft:"1.25rem"},onMouseEnter:()=>K(`${w.id}-${ge.id}`),onMouseLeave:()=>K(null),onClick:async oe=>{oe.stopPropagation(),await r(ge),s("/admin")},children:[le===`${w.id}-${ge.id}`&&a.jsx("div",{className:"absolute bg-blue-50 pointer-events-none z-0 rounded",style:{left:"-0.5rem",right:"-13rem",top:"-0.375rem",bottom:"-0.375rem",boxShadow:"0 0 0 1px rgb(191 219 254)",outline:"none"}}),a.jsxs("div",{className:"block text-sm text-left text-gray-700 hover:text-gray-900 relative z-10",style:{padding:0,margin:0,lineHeight:"1.25rem"},children:[a.jsx("div",{style:{height:"20px",lineHeight:"20px"},children:ge.title||"Unnamed Session"}),a.jsx("div",{className:"text-xs text-gray-500",style:{height:"16px",lineHeight:"16px",marginTop:"2px"},children:kn(ge)})]})]},ge.id))})]})})()]}),w.stakeholderInSessions&&w.stakeholderInSessions.length>0&&a.jsx("div",{className:w.adminInSessions&&w.adminInSessions.length>0?"pt-4 border-t border-gray-100 mt-4":"",children:a.jsxs("div",{children:[a.jsx("div",{className:"mb-2",children:(()=>{var Re;const $=((Re=w.stakeholderInSessions)==null?void 0:Re.length)||0,R=$>1,ne=(L==null?void 0:L.userId)===w.id&&(L==null?void 0:L.role)==="stakeholder",ge=()=>a.jsxs("div",{className:"inline-flex items-center gap-1.5 px-2.5 py-1 rounded border text-xs font-medium group",style:{borderColor:"#8B5A4A",color:"#8B5A4A"},children:[a.jsx(gn,{className:"h-3.5 w-3.5 flex-shrink-0",style:{fill:"#8B5A4A",color:"#8B5A4A"}}),a.jsxs("span",{children:["Stakeholder in ",$," session",$!==1?"s":""]}),R&&a.jsxs("span",{className:"inline-flex items-baseline gap-0.5",style:{color:"#8B5A4A"},children:[ne?a.jsx(_l,{className:"h-2.5 w-2.5 transition-all group-hover:brightness-150 mt-[3px]",style:{color:"#8B5A4A"}}):a.jsx(dn,{className:"h-2.5 w-2.5 transition-all group-hover:brightness-150 mt-[3px]",style:{color:"#8B5A4A"}}),a.jsx("span",{className:"text-[10px] transition-all group-hover:brightness-150",children:ne?"Hide":"Show"})]})]});return R?a.jsx("button",{onClick:oe=>{oe.stopPropagation(),H(ne?null:{userId:w.id,role:"stakeholder"})},className:"text-left",children:a.jsx(ge,{})}):a.jsx(ge,{})})()}),(()=>{const R=ie(w.stakeholderInSessions)||w.stakeholderInSessions[0],ne=(L==null?void 0:L.userId)===w.id&&(L==null?void 0:L.role)==="stakeholder";return a.jsxs(a.Fragment,{children:[R&&a.jsxs("div",{className:"relative cursor-pointer",style:{marginLeft:"1.25rem",marginTop:"0.75rem"},onMouseEnter:()=>K(`${w.id}-${R.id}`),onMouseLeave:()=>K(null),onClick:async ge=>{ge.stopPropagation(),await r(R),s("/admin")},children:[le===`${w.id}-${R.id}`&&a.jsx("div",{className:"absolute bg-blue-50 pointer-events-none z-0 rounded",style:{left:"-0.5rem",right:"-13rem",top:"-0.25rem",bottom:"-0.25rem",boxShadow:"0 0 0 1px rgb(191 219 254)",outline:"none"}}),a.jsxs("div",{className:"text-left text-sm text-gray-700 hover:text-gray-900 hover:underline block relative z-10",style:{padding:0,margin:0,lineHeight:"1.25rem"},children:[a.jsx("div",{style:{height:"20px",lineHeight:"20px"},children:R.title||"Unnamed Session"}),a.jsx("div",{className:"text-xs text-gray-500",style:{height:"16px",lineHeight:"16px",marginTop:"2px"},children:kn(R)})]})]}),ne&&a.jsx("div",{style:{marginTop:"0.5rem"},children:w.stakeholderInSessions.filter(ge=>ge.id!==(R==null?void 0:R.id)).map((ge,Re)=>a.jsxs("div",{className:"relative cursor-pointer",style:{marginTop:"0.75rem",marginLeft:"1.25rem"},onMouseEnter:()=>K(`${w.id}-${ge.id}`),onMouseLeave:()=>K(null),onClick:async oe=>{oe.stopPropagation(),await r(ge),s("/admin")},children:[le===`${w.id}-${ge.id}`&&a.jsx("div",{className:"absolute bg-blue-50 pointer-events-none z-0 rounded",style:{left:"-0.5rem",right:"-13rem",top:"-0.25rem",bottom:"-0.25rem",boxShadow:"0 0 0 1px rgb(191 219 254)",outline:"none"}}),a.jsxs("div",{className:"block text-sm text-left text-gray-700 hover:text-gray-900 hover:underline relative z-10",style:{padding:0,margin:0,lineHeight:"1.25rem"},children:[a.jsx("div",{style:{height:"20px",lineHeight:"20px"},children:ge.title||"Unnamed Session"}),a.jsx("div",{className:"text-xs text-gray-500",style:{height:"16px",lineHeight:"16px",marginTop:"2px"},children:kn(ge)})]})]},ge.id))})]})})()]})})]})}),a.jsx("td",{className:"px-6 py-4 text-sm text-gray-500 align-top w-48 relative overflow-visible",children:a.jsxs("div",{className:"space-y-2",children:[w.roles.sessionAdminCount===0&&w.roles.stakeholderSessionCount===0&&a.jsxs("div",{className:"flex items-center text-gray-700 whitespace-nowrap",children:[a.jsx(An,{className:"h-4 w-4 mr-1.5 text-gray-400 flex-shrink-0"}),a.jsx("span",{children:w.created_at?cn(w.created_at):"N/A"}),a.jsxs("span",{className:"text-gray-500 text-xs ml-2",children:["by ",w.created_by_name||"System"]})]}),w.adminInSessions&&w.adminInSessions.length>0&&a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center text-gray-700 whitespace-nowrap",style:{marginBottom:"0.5rem",height:"30px"},children:[a.jsx(An,{className:"h-4 w-4 mr-1.5 text-gray-400 flex-shrink-0"}),a.jsx("span",{children:w.created_at?cn(w.created_at):"N/A"}),a.jsxs("span",{className:"text-gray-500 text-xs ml-2",children:["by ",w.created_by_name||"System"]})]}),(()=>{const R=ie(w.adminInSessions)||w.adminInSessions[0];w.adminInSessions.length>1;const ne=(L==null?void 0:L.userId)===w.id&&(L==null?void 0:L.role)==="admin";return a.jsxs(a.Fragment,{children:[R&&a.jsx("div",{className:"relative cursor-pointer",style:{marginLeft:"1.25rem",marginTop:"0.5rem",marginBottom:"0.25rem"},onMouseEnter:()=>K(`${w.id}-${R.id}`),onMouseLeave:()=>K(null),onClick:async ge=>{ge.stopPropagation(),await r(R),s("/admin")},children:a.jsxs("div",{className:"relative z-10",style:{padding:0,margin:0,lineHeight:"1.25rem"},children:[a.jsxs("div",{className:"flex items-center",style:{height:"20px",lineHeight:"20px"},children:[a.jsx(An,{className:"h-3 w-3 mr-1.5 text-gray-400 flex-shrink-0"}),a.jsx("span",{className:"text-xs text-gray-700 whitespace-nowrap",children:R.assignedAt?cn(R.assignedAt):"N/A"})]}),a.jsxs("div",{className:"text-xs text-gray-500",style:{height:"16px",lineHeight:"16px",marginTop:"2px",marginLeft:"18px"},children:["by ",R.assignedByName||"System"]})]})}),ne&&a.jsx("div",{style:{marginTop:"0.5rem"},children:w.adminInSessions.filter(ge=>ge.id!==(R==null?void 0:R.id)).map((ge,Re)=>a.jsx("div",{className:"relative cursor-pointer",style:{marginTop:"0.75rem",marginLeft:"1.25rem",marginBottom:"0.25rem"},onMouseEnter:()=>K(`${w.id}-${ge.id}`),onMouseLeave:()=>K(null),onClick:async oe=>{oe.stopPropagation(),await r(ge),s("/admin")},children:a.jsxs("div",{className:"relative z-10",style:{padding:0,margin:0,lineHeight:"1.25rem"},children:[a.jsxs("div",{className:"flex items-center",style:{height:"20px",lineHeight:"20px"},children:[a.jsx(An,{className:"h-3 w-3 mr-1.5 text-gray-400 flex-shrink-0"}),a.jsx("span",{className:"text-xs text-gray-700 whitespace-nowrap",children:ge.assignedAt?cn(ge.assignedAt):"N/A"})]}),a.jsxs("div",{className:"text-xs text-gray-500",style:{height:"16px",lineHeight:"16px",marginTop:"2px",marginLeft:"18px"},children:["by ",ge.assignedByName||"System"]})]})},ge.id))})]})})()]}),w.stakeholderInSessions&&w.stakeholderInSessions.length>0&&a.jsx("div",{className:w.adminInSessions&&w.adminInSessions.length>0?"pt-4 border-t border-gray-100 mt-4":"",children:a.jsxs("div",{children:[(!w.adminInSessions||w.adminInSessions.length===0)&&a.jsxs("div",{className:"flex items-center text-gray-700 whitespace-nowrap",style:{marginBottom:"0.5rem",height:"30px"},children:[a.jsx(An,{className:"h-4 w-4 mr-1.5 text-gray-400 flex-shrink-0"}),a.jsx("span",{children:w.created_at?cn(w.created_at):"N/A"}),a.jsxs("span",{className:"text-gray-500 text-xs ml-2",children:["by ",w.created_by_name||"System"]})]}),w.adminInSessions&&w.adminInSessions.length>0&&a.jsx("div",{style:{height:"26px",marginBottom:"0.5rem",visibility:"hidden"},children:a.jsxs("div",{className:"inline-flex items-center gap-1.5 px-2.5 py-1 rounded border text-xs font-medium",children:[a.jsx(gn,{className:"h-3.5 w-3.5"}),a.jsx("span",{children:"Stakeholder"})]})}),(()=>{const R=ie(w.stakeholderInSessions)||w.stakeholderInSessions[0];w.stakeholderInSessions.length>1;const ne=(L==null?void 0:L.userId)===w.id&&(L==null?void 0:L.role)==="stakeholder";return a.jsxs(a.Fragment,{children:[R&&a.jsx("div",{className:"relative cursor-pointer",style:{marginLeft:"1.25rem",marginTop:"0.5rem",marginBottom:"0.25rem"},onMouseEnter:()=>K(`${w.id}-${R.id}`),onMouseLeave:()=>K(null),onClick:async ge=>{ge.stopPropagation(),await r(R),s("/admin")},children:a.jsxs("div",{className:"relative z-10",style:{padding:0,margin:0,lineHeight:"1.25rem"},children:[a.jsxs("div",{className:"flex items-center",style:{height:"20px",lineHeight:"20px"},children:[a.jsx(An,{className:"h-3 w-3 mr-1.5 text-gray-400 flex-shrink-0"}),a.jsx("span",{className:"text-xs text-gray-700 whitespace-nowrap",children:R.assignedAt?cn(R.assignedAt):"N/A"})]}),a.jsxs("div",{className:"text-xs text-gray-500",style:{height:"16px",lineHeight:"16px",marginTop:"2px",marginLeft:"18px"},children:["by ",R.assignedByName||"System"]})]})}),ne&&a.jsx("div",{style:{marginTop:"0.5rem"},children:w.stakeholderInSessions.filter(ge=>ge.id!==(R==null?void 0:R.id)).map((ge,Re)=>a.jsx("div",{className:"relative cursor-pointer",style:{marginTop:"0.75rem",marginLeft:"1.25rem",marginBottom:"0.25rem"},onMouseEnter:()=>K(`${w.id}-${ge.id}`),onMouseLeave:()=>K(null),onClick:async oe=>{oe.stopPropagation(),await r(ge),s("/admin")},children:a.jsxs("div",{className:"relative z-10",style:{padding:0,margin:0,lineHeight:"1.25rem"},children:[a.jsxs("div",{className:"flex items-center",style:{height:"20px",lineHeight:"20px"},children:[a.jsx(An,{className:"h-3 w-3 mr-1.5 text-gray-400 flex-shrink-0"}),a.jsx("span",{className:"text-xs text-gray-700 whitespace-nowrap",children:ge.assignedAt?cn(ge.assignedAt):"N/A"})]}),a.jsxs("div",{className:"text-xs text-gray-500",style:{height:"16px",lineHeight:"16px",marginTop:"2px"},children:["by ",ge.assignedByName||"System"]})]})},ge.id))})]})})()]})})]})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium align-top",children:a.jsx("div",{className:"flex items-center justify-end gap-2",children:a.jsxs("div",{className:`relative inline-block transition-all md:transition-opacity ${V===w.id?w.id===(e==null?void 0:e.id)?"opacity-50 visible":"opacity-100 visible":"md:opacity-0 md:invisible opacity-100 visible"}`,ref:$=>{ve.current[w.id]=$},children:[a.jsx("button",{onClick:()=>I(C===w.id?null:w.id),className:"p-2 rounded-md hover:bg-gray-100 transition-colors",disabled:w.id===(e==null?void 0:e.id),title:w.id===(e==null?void 0:e.id)?"Cannot modify your own permissions":"Change user role",children:a.jsx(mk,{className:"h-5 w-5 text-gray-600"})}),C===w.id&&w.id!==(e==null?void 0:e.id)&&a.jsx("div",{className:"fixed mt-1 w-64 bg-white border border-gray-200 rounded-lg shadow-lg z-[100]",style:{top:((D=ve.current[w.id])==null?void 0:D.getBoundingClientRect().bottom)??0,right:window.innerWidth-(((Z=ve.current[w.id])==null?void 0:Z.getBoundingClientRect().right)??0)},children:a.jsxs("div",{className:"py-1",children:[a.jsx("div",{className:"px-3 py-2 text-xs font-semibold text-gray-500 uppercase border-b border-gray-200",children:"Change User Role"}),de==="system-admin"&&a.jsxs(a.Fragment,{children:[w.roles.isSystemAdmin?a.jsxs("button",{onClick:()=>ti(w.id,!0),className:"w-full px-4 py-2 text-left flex items-center hover:bg-red-50 text-red-700",children:[a.jsx(Br,{className:"h-4 w-4 mr-3"}),a.jsxs("div",{children:[a.jsx("div",{className:"font-medium",children:"Remove System Admin"}),a.jsx("div",{className:"text-xs text-gray-500",children:"Revoke global admin access"})]})]}):a.jsxs("button",{onClick:()=>ti(w.id,!1),className:"w-full px-4 py-2 text-left flex items-center hover:bg-[#C89212]/10 text-[#C89212]",children:[a.jsx(Br,{className:"h-4 w-4 mr-3"}),a.jsxs("div",{children:[a.jsx("div",{className:"font-medium",children:"Make System Admin"}),a.jsx("div",{className:"text-xs text-gray-500",children:"Grant global admin access"})]})]}),Rs(w,"session-admin")&&a.jsxs("button",{onClick:()=>Ar(w,"session-admin"),className:"w-full px-4 py-2 text-left flex items-center hover:bg-[#576C71]/10 text-[#576C71] border-t border-gray-200",children:[a.jsx(Rr,{className:"h-4 w-4 mr-3"}),a.jsxs("div",{children:[a.jsx("div",{className:"font-medium",children:"Make Session Admin"}),a.jsx("div",{className:"text-xs text-gray-500",children:"Add to a session as admin"})]})]})]}),Rs(w,"stakeholder")&&a.jsxs("button",{onClick:()=>Ar(w,"stakeholder"),className:"w-full px-4 py-2 text-left flex items-center hover:bg-[#8B5A4A]/10 text-[#8B5A4A] border-t border-gray-200",children:[a.jsx(gn,{className:"h-4 w-4 mr-3"}),a.jsxs("div",{children:[a.jsx("div",{className:"font-medium",children:"Make Stakeholder"}),a.jsx("div",{className:"text-xs text-gray-500",children:"Add to a session as stakeholder"})]})]}),de==="session-admin"&&w.stakeholderInSessions&&w.stakeholderInSessions.length>0&&w.stakeholderInSessions.some($=>pe.includes($.id))&&a.jsxs("button",{onClick:()=>Ar(w,"remove-stakeholder"),className:"w-full px-4 py-2 text-left flex items-center hover:bg-red-50 text-red-700 border-t border-gray-200",children:[a.jsx(Yu,{className:"h-4 w-4 mr-3"}),a.jsxs("div",{children:[a.jsx("div",{className:"font-medium",children:"Remove Stakeholder"}),a.jsx("div",{className:"text-xs text-gray-500",children:"Remove from a session you manage"})]})]}),(w.roles.isSystemAdmin||w.roles.sessionAdminCount>0||w.roles.stakeholderSessionCount>0)&&a.jsxs("button",{onClick:()=>ma(w.id,w.name),className:"w-full px-4 py-2 text-left flex items-center hover:bg-gray-50 text-gray-700 border-t border-gray-200",children:[a.jsx(Yu,{className:"h-4 w-4 mr-3"}),a.jsxs("div",{children:[a.jsx("div",{className:"font-medium",children:"Remove All Roles"}),a.jsx("div",{className:"text-xs text-gray-500",children:"Remove from all sessions"})]})]}),(de==="system-admin"||de==="session-admin"&&w.roles.stakeholderSessionCount>0&&((ae=w.stakeholderInSessions)==null?void 0:ae.some($=>Ue.some(R=>R.id===$.id)))&&!q.has(w.email))&&a.jsx("div",{className:"px-3 py-2 text-xs font-semibold text-gray-500 uppercase border-t border-gray-200",children:"User Functions"}),de==="system-admin"&&a.jsxs("button",{onClick:()=>{_e(w),Zt(w.name),dt(w.email),Dt(!0),I(null)},className:"w-full px-4 py-2 text-left flex items-center hover:bg-[#1E5461]/10 text-[#1E5461] border-t border-gray-200",children:[a.jsx(vd,{className:"h-4 w-4 mr-3"}),a.jsxs("div",{children:[a.jsx("div",{className:"font-medium",children:"Edit User Profile"}),a.jsx("div",{className:"text-xs text-gray-500",children:"Update name and email"})]})]}),(de==="system-admin"||de==="session-admin"&&w.roles.stakeholderSessionCount>0&&((A=w.stakeholderInSessions)==null?void 0:A.some($=>Ue.some(R=>R.id===$.id))))&&!q.has(w.email)&&a.jsxs("button",{onClick:()=>{I(null),xi(w.id,w.name)},className:`w-full px-4 py-2 text-left flex items-center hover:bg-[#8B5A4A]/10 text-[#8B5A4A] border-t border-gray-200 ${w.id===(e==null?void 0:e.id)||de==="system-admin"&&Le.has(w.id)?"opacity-50 cursor-not-allowed":""}`,disabled:w.id===(e==null?void 0:e.id)||de==="system-admin"&&Le.has(w.id),children:[a.jsx(to,{className:"h-4 w-4 mr-3"}),a.jsxs("div",{children:[a.jsx("div",{className:"font-medium",children:de==="session-admin"?"Remove Stakeholder":"Delete User"}),a.jsx("div",{className:"text-xs text-gray-500",children:de==="session-admin"?"Remove from all your sessions":w.id===(e==null?void 0:e.id)?"Cannot delete your own account":Le.has(w.id)?`Cannot delete protected account${tn(w)?` (${tn(w)})`:""}`:"Permanently delete this user"})]})]})]})})]})})})]},w.id)})})]}),a.jsx("div",{className:"bg-gray-50 px-6 py-4 border-t border-gray-200",children:a.jsxs("div",{className:"flex flex-wrap gap-4 text-sm",children:[a.jsxs("div",{className:"flex items-center",children:[a.jsx(Qn,{className:"h-4 w-4 mr-2 text-gray-500"}),a.jsxs("span",{className:"text-gray-600",children:["Total Users: ",a.jsx("strong",{children:u.length})]})]}),a.jsxs("div",{className:"flex items-center",children:[a.jsx(Br,{className:"h-4 w-4 mr-2 text-[#C89212]"}),a.jsxs("span",{className:"text-gray-600",children:["System Admins: ",a.jsx("strong",{children:u.filter(w=>w.roles.isSystemAdmin).length})]})]}),a.jsxs("div",{className:"flex items-center",children:[a.jsx(Rr,{className:"h-4 w-4 mr-2 text-[#576C71]"}),a.jsxs("span",{className:"text-gray-600",children:["Session Admins: ",a.jsx("strong",{children:u.filter(w=>w.roles.sessionAdminCount>0).length})]})]}),a.jsxs("div",{className:"flex items-center",children:[a.jsx(gn,{className:"h-4 w-4 mr-2 text-[#8B5A4A]"}),a.jsxs("span",{className:"text-gray-600",children:["Stakeholders: ",a.jsx("strong",{children:u.filter(w=>w.roles.stakeholderSessionCount>0).length})]})]})]})})]}),a.jsx("div",{className:"md:hidden mt-4 bg-white rounded-lg shadow-md p-4",children:a.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[a.jsxs("div",{className:"flex items-center",children:[a.jsx(Qn,{className:"h-5 w-5 mr-2 text-gray-500 flex-shrink-0"}),a.jsxs("div",{children:[a.jsx("div",{className:"text-xs text-gray-500",children:"Total"}),a.jsx("div",{className:"text-lg font-bold text-gray-900",children:u.length})]})]}),a.jsxs("div",{className:"flex items-center",children:[a.jsx(Br,{className:"h-5 w-5 mr-2 text-[#C89212] flex-shrink-0"}),a.jsxs("div",{children:[a.jsx("div",{className:"text-xs text-gray-500",children:"Sys Admins"}),a.jsx("div",{className:"text-lg font-bold text-gray-900",children:u.filter(w=>w.roles.isSystemAdmin).length})]})]}),a.jsxs("div",{className:"flex items-center",children:[a.jsx(Rr,{className:"h-5 w-5 mr-2 text-[#576C71] flex-shrink-0"}),a.jsxs("div",{children:[a.jsx("div",{className:"text-xs text-gray-500",children:"Session Admins"}),a.jsx("div",{className:"text-lg font-bold text-gray-900",children:u.filter(w=>w.roles.sessionAdminCount>0).length})]})]}),a.jsxs("div",{className:"flex items-center",children:[a.jsx(gn,{className:"h-5 w-5 mr-2 text-[#8B5A4A] flex-shrink-0"}),a.jsxs("div",{children:[a.jsx("div",{className:"text-xs text-gray-500",children:"Stakeholders"}),a.jsx("div",{className:"text-lg font-bold text-gray-900",children:u.filter(w=>w.roles.stakeholderSessionCount>0).length})]})]})]})}),ce&&a.jsx("div",{className:"mt-8 flex justify-center",children:a.jsxs("div",{className:"inline-flex items-center bg-gray-100 rounded-lg p-1",children:[a.jsxs("button",{onClick:()=>{(U||ce)&&ke("session-admin")},className:`px-4 py-2 rounded-md text-sm font-medium transition-colors flex items-center ${de==="session-admin"?"bg-white text-[#2d4660] shadow-sm":"text-gray-600 hover:text-gray-900"}`,title:"Session Admin View",children:[a.jsx(Rr,{className:"h-4 w-4 inline mr-2"}),"Session Admin"]}),a.jsxs("button",{onClick:()=>{ce&&ke("system-admin")},className:`px-4 py-2 rounded-md text-sm font-medium transition-colors flex items-center ${de==="system-admin"?"bg-white text-[#2d4660] shadow-sm":"text-gray-600 hover:text-gray-900"}`,disabled:!ce,title:ce?"System Admin View":"Only available for System Admins",children:[a.jsx(Br,{className:"h-4 w-4 inline mr-2"}),"System Admin"]})]})})]}),a.jsx("footer",{className:"mt-12 bg-gray-50 border-t border-gray-200",children:a.jsxs("div",{className:"container mx-auto px-4 py-6 max-w-6xl",children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 text-sm text-gray-600",children:[a.jsxs("div",{children:[a.jsx("h3",{className:"font-semibold text-gray-900 mb-2",children:"New Millennium Building Systems"}),a.jsxs("p",{className:"text-xs leading-relaxed",children:["A Steel Dynamics Company",a.jsx("br",{}),"Innovation in structural steel manufacturing"]})]}),a.jsxs("div",{children:[a.jsx("h3",{className:"font-semibold text-gray-900 mb-2",children:"Quick Links"}),a.jsxs("ul",{className:"space-y-1 text-xs",children:[a.jsx("li",{children:a.jsx("a",{href:"https://www.steeldynamics.com",target:"_blank",rel:"noopener noreferrer",className:"hover:text-[#2d4660] transition-colors",children:"Steel Dynamics Inc."})}),a.jsx("li",{children:a.jsx("a",{href:"https://www.newmill.com",target:"_blank",rel:"noopener noreferrer",className:"hover:text-[#2d4660] transition-colors",children:"New Millennium"})})]})]}),a.jsxs("div",{children:[a.jsx("h3",{className:"font-semibold text-gray-900 mb-2",children:"Need Help?"}),a.jsx("p",{className:"text-xs",children:"Contact your Product Owner or IT administrator for assistance with user management."})]})]}),a.jsx("div",{className:"mt-6 pt-6 border-t border-gray-200 text-center text-xs text-gray-500",children:a.jsx("p",{children:" 2025 New Millennium Building Systems, LLC. All rights reserved."})})]})}),J&&Ze&&fe&&a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4 overflow-y-auto",onClick:ei,children:a.jsx("div",{className:"bg-white rounded-lg shadow-xl max-w-xl w-full my-8",onClick:w=>w.stopPropagation(),children:a.jsxs("div",{className:"p-6 overflow-visible",children:[a.jsxs("div",{className:"flex items-start justify-between mb-2",children:[a.jsxs("div",{className:"flex-1",children:[a.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-2",children:fe==="session-admin"?"Add Session Admin":fe==="remove-stakeholder"?"Remove Stakeholder":"Add Stakeholder"}),a.jsx("p",{className:"text-sm text-gray-600",children:fe==="remove-stakeholder"?a.jsxs(a.Fragment,{children:["Select sessions to remove ",a.jsx("strong",{children:Ze.name})," as a stakeholder."]}):a.jsxs(a.Fragment,{children:["Select sessions to add ",a.jsx("strong",{children:Ze.name})," as ",fe==="session-admin"?"an admin":"a stakeholder","."]})})]}),a.jsx("button",{onClick:ei,className:"ml-4 p-1 rounded-md text-gray-400 hover:text-gray-600 hover:bg-gray-100 transition-colors flex-shrink-0","aria-label":"Close modal",children:a.jsx(Ts,{className:"h-5 w-5"})})]}),a.jsx("div",{className:"mb-6",children:a.jsx(lee,{products:bn,sessions:Vi(fe),selectedProductId:Yt,onProductChange:w=>{z(w),Ne([]),ee(!0)},useAllSessions:W,onToggleAllSessions:w=>{ee(w),w&&Ne([])},selectedSessionIds:Se,onSessionToggle:w=>{Se.includes(w)?Ne(Se.filter(D=>D!==w)):Ne([...Se,w])},getSessionStatus:Jr,formatSessionDateRange:kn,filterSessions:os})}),a.jsx("div",{className:"flex justify-end mt-6",children:a.jsx("button",{onClick:vi,disabled:!Yt||!W&&Se.length===0,className:`px-6 py-2.5 rounded-lg transition-colors ${Yt&&(W||Se.length>0)?fe==="remove-stakeholder"?"bg-red-600 text-white hover:bg-red-700":"bg-[#4f6d8e] text-white hover:bg-[#3d5670]":"bg-gray-300 text-gray-500 cursor-not-allowed"}`,children:(()=>{const D=(W?os(Vi(fe),Yt||"").length:Se.length)>1;return fe==="remove-stakeholder"?`Remove from Session${D?"s":""}`:fe==="session-admin"?`Add to Session${D?"s":""} as Session Admin`:`Add to Session${D?"s":""} as a Stakeholder`})()})})]})})}),Ee&&Fe&&a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:a.jsx("div",{className:"bg-white rounded-lg shadow-xl max-w-xl w-full max-h-[90vh] overflow-y-auto",children:a.jsxs("div",{className:"p-6",children:[a.jsxs("div",{className:"flex items-start mb-4",children:[a.jsx("div",{className:"flex-shrink-0 w-12 h-12 rounded-full bg-red-100 flex items-center justify-center",children:a.jsx(Yu,{className:"h-6 w-6 text-red-600"})}),a.jsxs("div",{className:"ml-4 flex-1",children:[a.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-1",children:"Delete User Account"}),a.jsx("p",{className:"text-sm text-gray-600",children:"This action cannot be undone. Please review the details below."})]})]}),a.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 mb-4",children:[a.jsxs("div",{className:"flex items-center mb-3",children:[a.jsx(gn,{className:"h-5 w-5 text-gray-400 mr-2"}),a.jsxs("div",{children:[a.jsx("div",{className:"font-medium text-gray-900",children:Fe.name}),a.jsx("div",{className:"text-sm text-gray-500",children:Fe.email})]})]}),a.jsxs("div",{className:"space-y-2 border-t border-gray-200 pt-3",children:[a.jsx("div",{className:"text-xs font-semibold text-gray-500 uppercase",children:"Current Roles"}),Fe.roles.isSystemAdmin&&a.jsxs("div",{className:"flex items-center text-sm",children:[a.jsx(Br,{className:"h-4 w-4 mr-2 text-[#C89212]"}),a.jsx("span",{className:"text-gray-700",children:"System Admin"})]}),Fe.roles.sessionAdminCount>0&&a.jsxs("div",{className:"flex items-center text-sm",children:[a.jsx(Rr,{className:"h-4 w-4 mr-2 text-[#576C71]"}),a.jsxs("span",{className:"text-gray-700",children:["Session Admin in ",Fe.roles.sessionAdminCount," session",Fe.roles.sessionAdminCount!==1?"s":""]})]}),Fe.roles.stakeholderSessionCount>0&&a.jsxs("div",{className:"flex items-center text-sm",children:[a.jsx(gn,{className:"h-4 w-4 mr-2 text-[#8B5A4A]"}),a.jsxs("span",{className:"text-gray-700",children:["Stakeholder in ",Fe.roles.stakeholderSessionCount," session",Fe.roles.stakeholderSessionCount!==1?"s":""]})]}),!Fe.roles.isSystemAdmin&&Fe.roles.sessionAdminCount===0&&Fe.roles.stakeholderSessionCount===0&&a.jsx("div",{className:"text-sm text-gray-500",children:"No roles assigned"})]})]}),Fe.adminInSessions&&Fe.adminInSessions.length>0||Fe.stakeholderInSessions&&Fe.stakeholderInSessions.length>0?a.jsxs("div",{className:"mb-4",children:[a.jsx("div",{className:"text-sm font-semibold text-gray-700 mb-2",children:"User will be removed from these sessions:"}),a.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-3 max-h-48 overflow-y-auto",children:[Fe.adminInSessions&&Fe.adminInSessions.length>0&&a.jsxs("div",{className:"mb-3",children:[a.jsxs("div",{className:"text-xs font-semibold text-gray-600 mb-1.5 flex items-center",children:[a.jsx(Rr,{className:"h-3.5 w-3.5 mr-1.5 text-[#576C71]"}),"Admin Sessions (",Fe.adminInSessions.length,")"]}),a.jsx("div",{className:"space-y-1 ml-5",children:Fe.adminInSessions.map(w=>a.jsxs("div",{className:"text-sm text-gray-700",children:[" ",w.title||"Unnamed Session"]},w.id))})]}),Fe.stakeholderInSessions&&Fe.stakeholderInSessions.length>0&&a.jsxs("div",{children:[a.jsxs("div",{className:"text-xs font-semibold text-gray-600 mb-1.5 flex items-center",children:[a.jsx(gn,{className:"h-3.5 w-3.5 mr-1.5 text-[#8B5A4A]"}),"Stakeholder Sessions (",Fe.stakeholderInSessions.length,")"]}),a.jsx("div",{className:"space-y-1 ml-5",children:Fe.stakeholderInSessions.map(w=>a.jsxs("div",{className:"text-sm text-gray-700",children:[" ",w.title||"Unnamed Session"]},w.id))})]})]})]}):null,a.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-3 mb-4",children:a.jsxs("div",{className:"flex",children:[a.jsx("div",{className:"flex-shrink-0",children:a.jsx("svg",{className:"h-5 w-5 text-yellow-600",fill:"currentColor",viewBox:"0 0 20 20",children:a.jsx("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})})}),a.jsxs("div",{className:"ml-3",children:[a.jsx("h3",{className:"text-sm font-medium text-yellow-800",children:"Warning: This action is permanent"}),a.jsx("div",{className:"mt-1 text-sm text-yellow-700",children:a.jsxs("ul",{className:"list-disc pl-5 space-y-1",children:[a.jsx("li",{children:"User account will be permanently deleted"}),a.jsx("li",{children:"All authentication access will be revoked"}),a.jsx("li",{children:"User will be removed from all sessions"}),a.jsx("li",{children:"This action cannot be undone"})]})})]})]})}),a.jsxs("div",{className:"flex gap-3",children:[a.jsx("button",{onClick:Ui,disabled:We,className:"flex-1 px-4 py-2.5 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:"Cancel"}),a.jsx("button",{onClick:vo,disabled:We,className:"flex-1 px-4 py-2.5 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center",children:We?a.jsxs(a.Fragment,{children:[a.jsxs("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",fill:"none",viewBox:"0 0 24 24",children:[a.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),a.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Deleting..."]}):"Delete User Permanently"})]})]})})}),Ct&&a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4 overflow-y-auto",onClick:Pr,children:a.jsx("div",{className:"bg-white rounded-lg shadow-xl max-w-3xl w-full my-8 max-h-[90vh] overflow-y-auto",onClick:w=>w.stopPropagation(),children:a.jsxs("div",{className:"p-6",children:[a.jsxs("div",{className:"flex items-start mb-6",children:[a.jsx("div",{className:"flex-shrink-0 w-12 h-12 rounded-full bg-[#8B5A4A]/10 flex items-center justify-center",children:a.jsx(Qn,{className:"h-6 w-6 text-[#8B5A4A]"})}),a.jsxs("div",{className:"ml-4 flex-1",children:[a.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-1",children:de==="session-admin"?"Add New Stakeholder":"Add New User"}),a.jsx("p",{className:"text-sm text-gray-600",children:de==="session-admin"?"Create a new user account and add as stakeholder to your sessions":"Create a new user account and assign roles"})]}),a.jsx("button",{onClick:Pr,disabled:rr,className:"flex-shrink-0 ml-4 p-1 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed","aria-label":"Close modal",children:a.jsx(Ts,{className:"h-5 w-5"})})]}),a.jsxs("div",{className:"space-y-4",children:[ir?a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Search Company Users (Optional)"}),hr===!1?a.jsx("div",{className:"border border-gray-300 rounded-lg p-4 bg-blue-50",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex-1",children:[a.jsx("p",{className:"text-sm font-medium text-gray-900 mb-1",children:"Sign in with Microsoft to search company users"}),a.jsx("p",{className:"text-xs text-gray-600",children:"You need to sign in with your Microsoft account to use the company user search feature."})]}),a.jsxs("button",{type:"button",onClick:bi,className:"ml-4 flex items-center px-4 py-2 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors shadow-sm",children:[a.jsx("img",{src:tA,alt:"Microsoft",style:{width:"21px",height:"21px",marginRight:"8px"}}),a.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Sign in"})]})]})}):a.jsx(a.Fragment,{children:a.jsxs("div",{className:"relative",ref:M,children:[a.jsx("div",{className:"flex gap-2",children:a.jsxs("div",{className:"flex-1 relative",children:[a.jsx(pk,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),a.jsx("input",{type:"text",value:Ft.searchTerm,onChange:w=>{const D=w.target.value;vt(Z=>({...Z,searchTerm:D})),xo(D)},onFocus:()=>{Ft.results.length>0&&vt(w=>({...w,showResults:!0}))},className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#2D4660] focus:border-transparent",placeholder:"Search by name or email (min 2 characters)..."}),Ft.isSearching&&a.jsx("div",{className:"absolute right-3 top-1/2 transform -translate-y-1/2",children:a.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-[#2D4660]"})})]})}),Ft.showResults&&Ft.results.length>0&&a.jsx("div",{className:"absolute z-10 w-full mt-1 bg-white border border-gray-300 rounded-lg shadow-lg max-h-60 overflow-y-auto",children:Ft.results.map(w=>a.jsxs("button",{type:"button",onClick:()=>wo(w),className:"w-full px-4 py-3 text-left hover:bg-gray-50 border-b border-gray-100 last:border-b-0 transition-colors",children:[a.jsx("div",{className:"font-medium text-gray-900",children:w.displayName}),a.jsx("div",{className:"text-sm text-gray-500",children:w.mail||w.userPrincipalName}),w.jobTitle&&a.jsx("div",{className:"text-xs text-gray-400 mt-0.5",children:w.jobTitle})]},w.id))}),Ft.error&&a.jsxs("div",{className:"absolute z-10 w-full mt-1 bg-red-50 border border-red-200 rounded-lg shadow-lg p-4 text-sm text-red-700",children:[a.jsx("div",{className:"font-medium mb-1",children:"Search Error"}),a.jsx("div",{className:"mb-2",children:Ft.error}),Ft.error.includes("User.ReadBasic.All")&&a.jsxs("div",{className:"mt-2 p-2 bg-red-100 rounded text-xs text-red-800",children:[a.jsx("div",{className:"font-medium mb-1",children:"To fix this:"}),a.jsxs("ol",{className:"list-decimal list-inside space-y-1 ml-2",children:[a.jsx("li",{children:"Go to Azure Portal  App registrations  Your app"}),a.jsx("li",{children:"API permissions  Add permission  Microsoft Graph  Delegated permissions"}),a.jsx("li",{children:'Add "User.ReadBasic.All" or "User.Read.All"'}),a.jsx("li",{children:'Click "Grant admin consent" (requires admin)'})]})]}),a.jsx("div",{className:"mt-2 text-xs text-red-600",children:"You can still enter the email manually below."})]}),Ft.searchTerm.length>=2&&!Ft.isSearching&&Ft.results.length===0&&!Ft.error&&a.jsx("div",{className:"absolute z-10 w-full mt-1 bg-white border border-gray-300 rounded-lg shadow-lg p-4 text-sm text-gray-500 text-center",children:"No users found. You can still enter the email manually below."})]})}),a.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"Search for users in your organization by name or email, or enter manually below"})]}):a.jsx("div",{children:a.jsx("button",{type:"button",className:"text-sm font-semibold text-[#2D4660] hover:underline focus:outline-none",onClick:()=>{yr(!0),vt(id())},children:"Search Company Users again"})}),a.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Full Name ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx("input",{type:"text",value:rt.name,onChange:w=>Ht({...rt,name:w.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#2D4660] focus:border-transparent",placeholder:"John Doe"})]}),a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Email Address ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx("input",{type:"email",value:rt.email,onChange:w=>Ht({...rt,email:w.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#2D4660] focus:border-transparent",placeholder:"john.doe@newmill.com"})]})]}),de==="system-admin"&&a.jsx("div",{className:"border-t border-gray-200 pt-4",children:a.jsxs("label",{className:"flex items-center gap-3 cursor-pointer",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"flex-shrink-0 w-6 h-6 flex items-center justify-center",children:a.jsx(Br,{className:"h-4 w-4 text-[#C89212] transition-transform",style:{transform:rt.isSystemAdmin?"scale(2)":"scale(1)",transformOrigin:"center"}})}),a.jsx("span",{className:"text-sm font-medium text-gray-700",children:"System Administrator"})]}),a.jsx("input",{id:"systemAdminCheckbox",type:"checkbox",checked:rt.isSystemAdmin,onChange:w=>Ht({...rt,isSystemAdmin:w.target.checked}),className:"sr-only"}),a.jsx("span",{className:"flex items-center justify-center w-6 h-6 border rounded-md transition-colors",style:{borderColor:"#C89212",backgroundColor:rt.isSystemAdmin?"#C89212":"#ffffff"},children:rt.isSystemAdmin&&a.jsx("svg",{viewBox:"0 0 24 24",className:"w-4 h-4",stroke:"#ffffff",strokeWidth:"3",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("polyline",{points:"4 12 10 18 20 6"})})})]})}),de==="system-admin"&&a.jsxs("div",{className:"border-t border-gray-200 pt-4",children:[a.jsxs("div",{className:"w-full flex items-center gap-2 py-2 hover:bg-gray-50 rounded-lg px-2 -ml-2 transition-colors",children:[a.jsxs("button",{type:"button",className:"flex items-center gap-2 text-sm font-medium text-gray-700 flex-1 text-left",onClick:()=>mr(w=>({sessionAdmin:!w.sessionAdmin,stakeholder:!1})),children:[a.jsx("span",{className:"flex items-center justify-center",style:{transform:en?"scale(1.2)":"scale(1)"},children:a.jsx(Rr,{className:"h-4 w-4 text-[#576C71]"})}),a.jsx("span",{children:"Session Admin"}),en&&Pe&&a.jsx("span",{className:"ml-2 text-xs text-gray-500",children:Pe})]}),en&&a.jsx("button",{type:"button",onClick:Ut,className:"px-3 py-1 rounded-full border text-xs font-semibold transition-colors hover:bg-[#576C71]/10",style:{borderColor:"#576C71",color:"#576C71",backgroundColor:"#f6fbfb"},children:"Reset"}),a.jsx(ks,{className:`h-4 w-4 text-gray-500 transition-transform ${Jt.sessionAdmin?"rotate-180":""}`})]}),Jt.sessionAdmin&&a.jsxs("div",{className:"mt-3 ml-6 space-y-3",children:[a.jsx("div",{children:a.jsx(Ih,{products:bn,value:vr,onChange:w=>{hn(w),Ht(D=>({...D,sessionAdminIds:[]})),Er(!0)},label:"Product *"})}),vr&&a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Session Selection *"}),a.jsxs("div",{className:"inline-flex items-center bg-gray-100 rounded-lg p-1",children:[a.jsx("button",{type:"button",onClick:()=>Er(!1),className:`px-4 py-2 rounded-md text-sm font-medium transition-colors flex items-center ${Kt?"text-gray-600 hover:text-gray-900":"bg-white text-[#2d4660] shadow-sm"}`,children:"Select Sessions"}),a.jsx("button",{type:"button",onClick:()=>{Er(!0),Ht(w=>({...w,sessionAdminIds:[]}))},className:`px-4 py-2 rounded-md text-sm font-medium transition-colors flex items-center ${Kt?"bg-white text-[#2d4660] shadow-sm":"text-gray-600 hover:text-gray-900"}`,children:"All Sessions"})]}),Kt&&a.jsx("p",{className:"mt-2 text-xs text-gray-500",children:"User will be added to all current and future sessions for this product"})]}),!Kt&&a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Sessions * (Current and Future)"}),ns.length===0?a.jsx("p",{className:"text-sm text-gray-500",children:"No current or future sessions found for this product."}):a.jsx("div",{className:"max-h-48 overflow-y-auto border border-gray-300 rounded-md p-2",children:ns.map(w=>a.jsxs("label",{className:"flex items-start px-3 py-2 hover:bg-gray-50 cursor-pointer border-b border-gray-100 last:border-b-0",children:[a.jsx("input",{type:"checkbox",checked:rt.sessionAdminIds.includes(w.id),onChange:()=>ga(w.id),className:"w-4 h-4 border-gray-300 rounded focus:ring-[#2D4660] accent-green-600 mt-1",style:{accentColor:"#16a34a"}}),a.jsxs("div",{className:"ml-3 flex-1",children:[a.jsxs("div",{className:"flex items-start justify-between gap-2",children:[a.jsx("div",{className:"text-sm font-medium text-gray-900",children:w.title||"Unnamed Session"}),a.jsx("span",{className:`text-xs font-medium ${Jr(w).color}`,children:Jr(w).text})]}),a.jsx("div",{className:"text-xs text-gray-500 mt-0.5",children:kn(w)})]})]},w.id))})]})]})]})]}),de==="session-admin"?a.jsxs("div",{className:"border-t border-gray-200 pt-4",children:[a.jsxs("div",{className:"flex items-center mb-3",children:[a.jsx(gn,{className:"h-4 w-4 mr-2 text-[#8B5A4A]"}),a.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Add as Stakeholder"}),rt.stakeholderSessionIds.length>0&&a.jsx("span",{className:"ml-2 px-2 py-0.5 bg-[#8B5A4A]/10 text-[#8B5A4A] text-xs rounded-full",children:rt.stakeholderSessionIds.length})]}),a.jsxs("div",{className:"space-y-3",children:[a.jsx("div",{children:a.jsx(Ih,{products:bn,value:lr,onChange:w=>{In(w),Ht(D=>({...D,stakeholderSessionIds:[]})),Kr(!0)},label:"Product *"})}),lr&&a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Session Selection *"}),a.jsxs("div",{className:"inline-flex items-center bg-gray-100 rounded-lg p-1",children:[a.jsx("button",{type:"button",onClick:()=>{Kr(!1)},className:`px-4 py-2 rounded-md text-sm font-medium transition-colors flex items-center ${Cr?"text-gray-600 hover:text-gray-900":"bg-white text-[#2d4660] shadow-sm"}`,children:"Select Sessions"}),a.jsx("button",{type:"button",onClick:()=>{Kr(!0),Ht(w=>({...w,stakeholderSessionIds:[]}))},className:`px-4 py-2 rounded-md text-sm font-medium transition-colors flex items-center ${Cr?"bg-white text-[#2d4660] shadow-sm":"text-gray-600 hover:text-gray-900"}`,children:"All Sessions"})]}),Cr&&a.jsx("p",{className:"mt-2 text-xs text-gray-500",children:"User will be added to all current and future sessions for this product"})]}),!Cr&&a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Sessions * (Current and Future)"}),Hr.length===0?a.jsx("p",{className:"text-sm text-gray-500",children:"No current or future sessions found for this product."}):a.jsx("div",{className:"max-h-48 overflow-y-auto border border-gray-300 rounded-md p-2",children:Hr.map(w=>a.jsxs("label",{className:"flex items-start px-3 py-2 hover:bg-gray-50 cursor-pointer border-b border-gray-100 last:border-b-0",children:[a.jsx("input",{type:"checkbox",checked:rt.stakeholderSessionIds.includes(w.id),onChange:()=>Wi(w.id),className:"w-4 h-4 border-gray-300 rounded focus:ring-[#2D4660] accent-green-600 mt-1",style:{accentColor:"#16a34a"}}),a.jsxs("div",{className:"ml-3 flex-1",children:[a.jsx("div",{className:"text-sm font-medium text-gray-900",children:w.title||"Unnamed Session"}),a.jsx("div",{className:"text-xs text-gray-500 mt-0.5",children:kn(w)}),a.jsx("div",{className:"text-xs mt-0.5",children:a.jsx("span",{className:`font-medium ${Jr(w).color}`,children:Jr(w).text})})]})]},w.id))})]})]})]})]}):a.jsxs("div",{className:"border-t border-gray-200 pt-4",children:[a.jsxs("div",{className:"w-full flex items-center gap-2 py-2 hover:bg-gray-50 rounded-lg px-2 -ml-2 transition-colors",children:[a.jsxs("button",{type:"button",className:"flex items-center gap-2 text-sm font-medium text-gray-700 flex-1 text-left",onClick:()=>mr(w=>({stakeholder:!w.stakeholder,sessionAdmin:!1})),children:[a.jsx("span",{className:"flex items-center justify-center",style:{transform:ps?"scale(1.2)":"scale(1)"},children:a.jsx(gn,{className:"h-4 w-4 text-[#8B5A4A]"})}),a.jsx("span",{children:"Stakeholder"}),ps&&Oe&&a.jsx("span",{className:"ml-2 text-xs text-gray-500",children:Oe})]}),ps&&a.jsx("button",{type:"button",onClick:ha,className:"px-3 py-1 rounded-full border text-xs font-semibold transition-colors hover:bg-[#8B5A4A]/10",style:{borderColor:"#8B5A4A",color:"#8B5A4A",backgroundColor:"#fcf8f4"},children:"Reset"}),a.jsx(ks,{className:`h-4 w-4 text-gray-500 transition-transform ${Jt.stakeholder?"rotate-180":""}`})]}),Jt.stakeholder&&a.jsxs("div",{className:"mt-3 ml-6 space-y-3",children:[a.jsx("div",{children:a.jsx(Ih,{products:bn,value:lr,onChange:w=>{In(w),Ht(D=>({...D,stakeholderSessionIds:[]})),Kr(!0)},label:"Product *"})}),lr&&a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Session Selection *"}),a.jsxs("div",{className:"inline-flex items-center bg-gray-100 rounded-lg p-1",children:[a.jsx("button",{type:"button",onClick:()=>{Kr(!1)},className:`px-4 py-2 rounded-md text-sm font-medium transition-colors flex items-center ${Cr?"text-gray-600 hover:text-gray-900":"bg-white text-[#2d4660] shadow-sm"}`,children:"Select Sessions"}),a.jsx("button",{type:"button",onClick:()=>{Kr(!0),Ht(w=>({...w,stakeholderSessionIds:[]}))},className:`px-4 py-2 rounded-md text-sm font-medium transition-colors flex items-center ${Cr?"bg-white text-[#2d4660] shadow-sm":"text-gray-600 hover:text-gray-900"}`,children:"All Sessions"})]}),Cr&&a.jsx("p",{className:"mt-2 text-xs text-gray-500",children:"User will be added to all current and future sessions for this product"})]}),!Cr&&a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Sessions * (Current and Future)"}),Hr.length===0?a.jsx("p",{className:"text-sm text-gray-500",children:"No current or future sessions found for this product."}):a.jsx("div",{className:"max-h-48 overflow-y-auto border border-gray-300 rounded-md p-2",children:Hr.map(w=>a.jsxs("label",{className:"flex items-start px-3 py-2 hover:bg-gray-50 cursor-pointer border-b border-gray-100 last:border-b-0",children:[a.jsx("input",{type:"checkbox",checked:rt.stakeholderSessionIds.includes(w.id),onChange:()=>Wi(w.id),className:"w-4 h-4 border-gray-300 rounded focus:ring-[#2D4660] accent-green-600 mt-1",style:{accentColor:"#16a34a"}}),a.jsxs("div",{className:"ml-3 flex-1",children:[a.jsxs("div",{className:"flex items-start justify-between gap-2",children:[a.jsx("div",{className:"text-sm font-medium text-gray-900",children:w.title||"Unnamed Session"}),a.jsx("span",{className:`text-xs font-medium ${Jr(w).color}`,children:Jr(w).text})]}),a.jsx("div",{className:"text-xs text-gray-500 mt-0.5",children:kn(w)})]})]},w.id))})]})]})]})]})]}),a.jsx("div",{className:"mt-6 pt-6 border-t border-gray-200 flex justify-end",children:a.jsx("button",{onClick:pa,disabled:!!(rr||!rt.name.trim()||!rt.email.trim()||de==="session-admin"&&(!lr||!Cr&&rt.stakeholderSessionIds.length===0)||de==="system-admin"&&Jt.sessionAdmin&&vr&&!Kt&&rt.sessionAdminIds.length===0||de==="system-admin"&&Jt.stakeholder&&lr&&!Cr&&rt.stakeholderSessionIds.length===0),className:"px-4 py-2.5 bg-[#2D4660] text-white rounded-lg hover:bg-[#173B65] transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center",children:rr?a.jsxs(a.Fragment,{children:[a.jsxs("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",fill:"none",viewBox:"0 0 24 24",children:[a.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),a.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),Ie(!0)]}):Ie(!1)})})]})})}),Lt&&zt&&a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:a.jsx("div",{className:"bg-white rounded-lg shadow-xl max-w-lg w-full max-h-[90vh] overflow-y-auto",children:a.jsxs("div",{className:"p-6",children:[a.jsxs("div",{className:"flex items-start mb-4",children:[a.jsx("div",{className:"flex-shrink-0 w-12 h-12 rounded-full bg-blue-100 flex items-center justify-center",children:a.jsx(vd,{className:"h-6 w-6 text-blue-600"})}),a.jsxs("div",{className:"ml-4 flex-1",children:[a.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-1",children:"Edit User"}),a.jsx("p",{className:"text-sm text-gray-600",children:"Update user name and email address"})]}),a.jsx("button",{onClick:()=>{Dt(!1),_e(null),Zt(""),dt("")},className:"flex-shrink-0 ml-4 p-1 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-lg transition-colors","aria-label":"Close modal",children:a.jsx(Ts,{className:"h-5 w-5"})})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Full Name ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx("input",{type:"text",value:He,onChange:w=>Zt(w.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#2D4660] focus:border-transparent",placeholder:"John Doe",disabled:gr})]}),a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Email Address ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx("input",{type:"email",value:Gr,onChange:w=>dt(w.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#2D4660] focus:border-transparent",placeholder:"john.doe@newmill.com",disabled:gr})]})]}),a.jsxs("div",{className:"flex justify-end gap-3 mt-6",children:[a.jsx("button",{onClick:()=>{Dt(!1),_e(null),Zt(""),dt("")},className:"px-4 py-2.5 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",disabled:gr,children:"Cancel"}),a.jsx("button",{onClick:Bi,disabled:gr||!He.trim()||!Gr.trim(),className:"px-4 py-2.5 bg-[#2D4660] text-white rounded-lg hover:bg-[#173B65] transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:gr?"Updating...":"Update User"})]})]})})}),ss&&Dn&&a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:a.jsx("div",{className:"bg-white rounded-lg shadow-xl max-w-lg w-full max-h-[90vh] overflow-y-auto",children:a.jsxs("div",{className:"p-6",children:[a.jsxs("div",{className:"flex items-start mb-4",children:[a.jsx("div",{className:"flex-shrink-0 w-12 h-12 rounded-full bg-green-100 flex items-center justify-center",children:a.jsx(Mr,{className:"h-6 w-6 text-green-600"})}),a.jsxs("div",{className:"ml-4 flex-1",children:[a.jsxs("h2",{className:"text-xl font-bold text-gray-900 mb-1",children:[Dn.userType," Created Successfully!"]}),a.jsx("p",{className:"text-sm text-gray-600",children:"The user account has been created and roles have been assigned."})]}),a.jsx("button",{onClick:()=>{_s(!1),$s(null)},className:"flex-shrink-0 ml-4 p-1 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-lg transition-colors","aria-label":"Close modal",children:a.jsx(Ts,{className:"h-5 w-5"})})]}),a.jsx("div",{className:"bg-gray-50 rounded-lg p-4 mb-4",children:a.jsx("div",{className:"space-y-3",children:a.jsxs("div",{children:[a.jsx("div",{className:"text-xs font-semibold text-gray-500 uppercase mb-1",children:"Email Address"}),a.jsx("div",{className:"text-sm font-medium text-gray-900",children:Dn.email})]})})}),a.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-3 mb-4",children:a.jsxs("div",{className:"flex",children:[a.jsx(ld,{className:"h-5 w-5 text-blue-600 flex-shrink-0 mt-0.5"}),a.jsxs("div",{className:"ml-2",children:[a.jsx("div",{className:"text-sm font-semibold text-blue-800 mb-1",children:"User Authentication"}),a.jsx("div",{className:"text-xs text-blue-700",children:"The user will sign in using their company Azure AD credentials. No password is needed."})]})]})}),a.jsx("div",{className:"flex justify-end",children:a.jsx("button",{onClick:()=>{_s(!1),$s(null)},className:"px-4 py-2.5 bg-[#2D4660] text-white rounded-lg hover:bg-[#173B65] transition-colors",children:"Done"})})]})})})]})}const uee="/feature-voting-app/assets/bottom-left-curve-T4fflHT3.png",dee=()=>a.jsx("div",{className:"fixed bottom-0 left-0 pointer-events-none z-0",children:a.jsx("img",{src:uee,alt:"",style:{maxWidth:"600px",height:"auto",opacity:.2}})});function fee(){return a.jsx($M,{children:a.jsxs(z6,{children:[a.jsx(dee,{}),a.jsx(D3,{basename:"/feature-voting-app",children:a.jsxs(u3,{children:[a.jsx(ba,{path:"/",element:a.jsx(l3,{to:"/login",replace:!0})}),a.jsx(ba,{path:"/login",element:a.jsx(XZ,{})}),a.jsx(ba,{path:"/sessions",element:a.jsx(ZZ,{})}),a.jsx(ba,{path:"/vote",element:a.jsx(nv,{adminMode:!1})}),a.jsx(ba,{path:"/admin",element:a.jsx(nv,{adminMode:!0})}),a.jsx(ba,{path:"/results",element:a.jsx(nv,{resultsMode:!0})}),a.jsx(ba,{path:"/unauthorized",element:a.jsx(eee,{})}),a.jsx(ba,{path:"/system-admins",element:a.jsx(tee,{})}),a.jsx(ba,{path:"/users",element:a.jsx(cee,{})})]})})]})})}if(typeof window<"u"){const e=console.error;console.error=(...t)=>{var n;const r=((n=t[0])==null?void 0:n.toString())||"";r.includes("runtime.lastError")||r.includes("message channel closed")||e.apply(console,t)}}xD.createRoot(document.getElementById("root")).render(a.jsx(fee,{}));
