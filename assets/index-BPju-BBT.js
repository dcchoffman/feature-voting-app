var KI=Object.defineProperty;var GI=(e,t,r)=>t in e?KI(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;var gg=(e,t,r)=>GI(e,typeof t!="symbol"?t+"":t,r);function YI(e,t){for(var r=0;r<t.length;r++){const n=t[r];if(typeof n!="string"&&!Array.isArray(n)){for(const s in n)if(s!=="default"&&!(s in e)){const i=Object.getOwnPropertyDescriptor(n,s);i&&Object.defineProperty(e,s,i.get?i:{enumerable:!0,get:()=>n[s]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const l of i.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&n(l)}).observe(document,{childList:!0,subtree:!0});function r(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(s){if(s.ep)return;s.ep=!0;const i=r(s);fetch(s.href,i)}})();function _i(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function JI(e){if(Object.prototype.hasOwnProperty.call(e,"__esModule"))return e;var t=e.default;if(typeof t=="function"){var r=function n(){return this instanceof n?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};r.prototype=t.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(e).forEach(function(n){var s=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(r,n,s.get?s:{enumerable:!0,get:function(){return e[n]}})}),r}var yg={exports:{}},ru={},vg={exports:{}},$t={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ej;function QI(){if(ej)return $t;ej=1;var e=Symbol.for("react.element"),t=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),i=Symbol.for("react.provider"),l=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),m=Symbol.for("react.memo"),f=Symbol.for("react.lazy"),p=Symbol.iterator;function y(I){return I===null||typeof I!="object"?null:(I=p&&I[p]||I["@@iterator"],typeof I=="function"?I:null)}var x={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},j=Object.assign,b={};function S(I,H,Ie){this.props=I,this.context=H,this.refs=b,this.updater=Ie||x}S.prototype.isReactComponent={},S.prototype.setState=function(I,H){if(typeof I!="object"&&typeof I!="function"&&I!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,I,H,"setState")},S.prototype.forceUpdate=function(I){this.updater.enqueueForceUpdate(this,I,"forceUpdate")};function N(){}N.prototype=S.prototype;function E(I,H,Ie){this.props=I,this.context=H,this.refs=b,this.updater=Ie||x}var k=E.prototype=new N;k.constructor=E,j(k,S.prototype),k.isPureReactComponent=!0;var T=Array.isArray,O=Object.prototype.hasOwnProperty,P={current:null},R={key:!0,ref:!0,__self:!0,__source:!0};function q(I,H,Ie){var X,ve={},ce=null,ge=null;if(H!=null)for(X in H.ref!==void 0&&(ge=H.ref),H.key!==void 0&&(ce=""+H.key),H)O.call(H,X)&&!R.hasOwnProperty(X)&&(ve[X]=H[X]);var ye=arguments.length-2;if(ye===1)ve.children=Ie;else if(1<ye){for(var L=Array(ye),Fe=0;Fe<ye;Fe++)L[Fe]=arguments[Fe+2];ve.children=L}if(I&&I.defaultProps)for(X in ye=I.defaultProps,ye)ve[X]===void 0&&(ve[X]=ye[X]);return{$$typeof:e,type:I,key:ce,ref:ge,props:ve,_owner:P.current}}function F(I,H){return{$$typeof:e,type:I.type,key:H,ref:I.ref,props:I.props,_owner:I._owner}}function V(I){return typeof I=="object"&&I!==null&&I.$$typeof===e}function B(I){var H={"=":"=0",":":"=2"};return"$"+I.replace(/[=:]/g,function(Ie){return H[Ie]})}var Q=/\/+/g;function ae(I,H){return typeof I=="object"&&I!==null&&I.key!=null?B(""+I.key):H.toString(36)}function ne(I,H,Ie,X,ve){var ce=typeof I;(ce==="undefined"||ce==="boolean")&&(I=null);var ge=!1;if(I===null)ge=!0;else switch(ce){case"string":case"number":ge=!0;break;case"object":switch(I.$$typeof){case e:case t:ge=!0}}if(ge)return ge=I,ve=ve(ge),I=X===""?"."+ae(ge,0):X,T(ve)?(Ie="",I!=null&&(Ie=I.replace(Q,"$&/")+"/"),ne(ve,H,Ie,"",function(Fe){return Fe})):ve!=null&&(V(ve)&&(ve=F(ve,Ie+(!ve.key||ge&&ge.key===ve.key?"":(""+ve.key).replace(Q,"$&/")+"/")+I)),H.push(ve)),1;if(ge=0,X=X===""?".":X+":",T(I))for(var ye=0;ye<I.length;ye++){ce=I[ye];var L=X+ae(ce,ye);ge+=ne(ce,H,Ie,L,ve)}else if(L=y(I),typeof L=="function")for(I=L.call(I),ye=0;!(ce=I.next()).done;)ce=ce.value,L=X+ae(ce,ye++),ge+=ne(ce,H,Ie,L,ve);else if(ce==="object")throw H=String(I),Error("Objects are not valid as a React child (found: "+(H==="[object Object]"?"object with keys {"+Object.keys(I).join(", ")+"}":H)+"). If you meant to render a collection of children, use an array instead.");return ge}function me(I,H,Ie){if(I==null)return I;var X=[],ve=0;return ne(I,X,"","",function(ce){return H.call(Ie,ce,ve++)}),X}function K(I){if(I._status===-1){var H=I._result;H=H(),H.then(function(Ie){(I._status===0||I._status===-1)&&(I._status=1,I._result=Ie)},function(Ie){(I._status===0||I._status===-1)&&(I._status=2,I._result=Ie)}),I._status===-1&&(I._status=0,I._result=H)}if(I._status===1)return I._result.default;throw I._result}var te={current:null},se={transition:null},de={ReactCurrentDispatcher:te,ReactCurrentBatchConfig:se,ReactCurrentOwner:P};function xe(){throw Error("act(...) is not supported in production builds of React.")}return $t.Children={map:me,forEach:function(I,H,Ie){me(I,function(){H.apply(this,arguments)},Ie)},count:function(I){var H=0;return me(I,function(){H++}),H},toArray:function(I){return me(I,function(H){return H})||[]},only:function(I){if(!V(I))throw Error("React.Children.only expected to receive a single React element child.");return I}},$t.Component=S,$t.Fragment=r,$t.Profiler=s,$t.PureComponent=E,$t.StrictMode=n,$t.Suspense=d,$t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=de,$t.act=xe,$t.cloneElement=function(I,H,Ie){if(I==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+I+".");var X=j({},I.props),ve=I.key,ce=I.ref,ge=I._owner;if(H!=null){if(H.ref!==void 0&&(ce=H.ref,ge=P.current),H.key!==void 0&&(ve=""+H.key),I.type&&I.type.defaultProps)var ye=I.type.defaultProps;for(L in H)O.call(H,L)&&!R.hasOwnProperty(L)&&(X[L]=H[L]===void 0&&ye!==void 0?ye[L]:H[L])}var L=arguments.length-2;if(L===1)X.children=Ie;else if(1<L){ye=Array(L);for(var Fe=0;Fe<L;Fe++)ye[Fe]=arguments[Fe+2];X.children=ye}return{$$typeof:e,type:I.type,key:ve,ref:ce,props:X,_owner:ge}},$t.createContext=function(I){return I={$$typeof:l,_currentValue:I,_currentValue2:I,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},I.Provider={$$typeof:i,_context:I},I.Consumer=I},$t.createElement=q,$t.createFactory=function(I){var H=q.bind(null,I);return H.type=I,H},$t.createRef=function(){return{current:null}},$t.forwardRef=function(I){return{$$typeof:u,render:I}},$t.isValidElement=V,$t.lazy=function(I){return{$$typeof:f,_payload:{_status:-1,_result:I},_init:K}},$t.memo=function(I,H){return{$$typeof:m,type:I,compare:H===void 0?null:H}},$t.startTransition=function(I){var H=se.transition;se.transition={};try{I()}finally{se.transition=H}},$t.unstable_act=xe,$t.useCallback=function(I,H){return te.current.useCallback(I,H)},$t.useContext=function(I){return te.current.useContext(I)},$t.useDebugValue=function(){},$t.useDeferredValue=function(I){return te.current.useDeferredValue(I)},$t.useEffect=function(I,H){return te.current.useEffect(I,H)},$t.useId=function(){return te.current.useId()},$t.useImperativeHandle=function(I,H,Ie){return te.current.useImperativeHandle(I,H,Ie)},$t.useInsertionEffect=function(I,H){return te.current.useInsertionEffect(I,H)},$t.useLayoutEffect=function(I,H){return te.current.useLayoutEffect(I,H)},$t.useMemo=function(I,H){return te.current.useMemo(I,H)},$t.useReducer=function(I,H,Ie){return te.current.useReducer(I,H,Ie)},$t.useRef=function(I){return te.current.useRef(I)},$t.useState=function(I){return te.current.useState(I)},$t.useSyncExternalStore=function(I,H,Ie){return te.current.useSyncExternalStore(I,H,Ie)},$t.useTransition=function(){return te.current.useTransition()},$t.version="18.3.1",$t}var tj;function fc(){return tj||(tj=1,vg.exports=QI()),vg.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var rj;function XI(){if(rj)return ru;rj=1;var e=fc(),t=Symbol.for("react.element"),r=Symbol.for("react.fragment"),n=Object.prototype.hasOwnProperty,s=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,i={key:!0,ref:!0,__self:!0,__source:!0};function l(u,d,m){var f,p={},y=null,x=null;m!==void 0&&(y=""+m),d.key!==void 0&&(y=""+d.key),d.ref!==void 0&&(x=d.ref);for(f in d)n.call(d,f)&&!i.hasOwnProperty(f)&&(p[f]=d[f]);if(u&&u.defaultProps)for(f in d=u.defaultProps,d)p[f]===void 0&&(p[f]=d[f]);return{$$typeof:t,type:u,key:y,ref:x,props:p,_owner:s.current}}return ru.Fragment=r,ru.jsx=l,ru.jsxs=l,ru}var nj;function ZI(){return nj||(nj=1,yg.exports=XI()),yg.exports}var a=ZI(),v=fc();const vt=_i(v),eD=YI({__proto__:null,default:vt},[v]);var ff={},xg={exports:{}},gs={},wg={exports:{}},bg={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var sj;function tD(){return sj||(sj=1,(function(e){function t(se,de){var xe=se.length;se.push(de);e:for(;0<xe;){var I=xe-1>>>1,H=se[I];if(0<s(H,de))se[I]=de,se[xe]=H,xe=I;else break e}}function r(se){return se.length===0?null:se[0]}function n(se){if(se.length===0)return null;var de=se[0],xe=se.pop();if(xe!==de){se[0]=xe;e:for(var I=0,H=se.length,Ie=H>>>1;I<Ie;){var X=2*(I+1)-1,ve=se[X],ce=X+1,ge=se[ce];if(0>s(ve,xe))ce<H&&0>s(ge,ve)?(se[I]=ge,se[ce]=xe,I=ce):(se[I]=ve,se[X]=xe,I=X);else if(ce<H&&0>s(ge,xe))se[I]=ge,se[ce]=xe,I=ce;else break e}}return de}function s(se,de){var xe=se.sortIndex-de.sortIndex;return xe!==0?xe:se.id-de.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;e.unstable_now=function(){return i.now()}}else{var l=Date,u=l.now();e.unstable_now=function(){return l.now()-u}}var d=[],m=[],f=1,p=null,y=3,x=!1,j=!1,b=!1,S=typeof setTimeout=="function"?setTimeout:null,N=typeof clearTimeout=="function"?clearTimeout:null,E=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function k(se){for(var de=r(m);de!==null;){if(de.callback===null)n(m);else if(de.startTime<=se)n(m),de.sortIndex=de.expirationTime,t(d,de);else break;de=r(m)}}function T(se){if(b=!1,k(se),!j)if(r(d)!==null)j=!0,K(O);else{var de=r(m);de!==null&&te(T,de.startTime-se)}}function O(se,de){j=!1,b&&(b=!1,N(q),q=-1),x=!0;var xe=y;try{for(k(de),p=r(d);p!==null&&(!(p.expirationTime>de)||se&&!B());){var I=p.callback;if(typeof I=="function"){p.callback=null,y=p.priorityLevel;var H=I(p.expirationTime<=de);de=e.unstable_now(),typeof H=="function"?p.callback=H:p===r(d)&&n(d),k(de)}else n(d);p=r(d)}if(p!==null)var Ie=!0;else{var X=r(m);X!==null&&te(T,X.startTime-de),Ie=!1}return Ie}finally{p=null,y=xe,x=!1}}var P=!1,R=null,q=-1,F=5,V=-1;function B(){return!(e.unstable_now()-V<F)}function Q(){if(R!==null){var se=e.unstable_now();V=se;var de=!0;try{de=R(!0,se)}finally{de?ae():(P=!1,R=null)}}else P=!1}var ae;if(typeof E=="function")ae=function(){E(Q)};else if(typeof MessageChannel<"u"){var ne=new MessageChannel,me=ne.port2;ne.port1.onmessage=Q,ae=function(){me.postMessage(null)}}else ae=function(){S(Q,0)};function K(se){R=se,P||(P=!0,ae())}function te(se,de){q=S(function(){se(e.unstable_now())},de)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(se){se.callback=null},e.unstable_continueExecution=function(){j||x||(j=!0,K(O))},e.unstable_forceFrameRate=function(se){0>se||125<se?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):F=0<se?Math.floor(1e3/se):5},e.unstable_getCurrentPriorityLevel=function(){return y},e.unstable_getFirstCallbackNode=function(){return r(d)},e.unstable_next=function(se){switch(y){case 1:case 2:case 3:var de=3;break;default:de=y}var xe=y;y=de;try{return se()}finally{y=xe}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(se,de){switch(se){case 1:case 2:case 3:case 4:case 5:break;default:se=3}var xe=y;y=se;try{return de()}finally{y=xe}},e.unstable_scheduleCallback=function(se,de,xe){var I=e.unstable_now();switch(typeof xe=="object"&&xe!==null?(xe=xe.delay,xe=typeof xe=="number"&&0<xe?I+xe:I):xe=I,se){case 1:var H=-1;break;case 2:H=250;break;case 5:H=1073741823;break;case 4:H=1e4;break;default:H=5e3}return H=xe+H,se={id:f++,callback:de,priorityLevel:se,startTime:xe,expirationTime:H,sortIndex:-1},xe>I?(se.sortIndex=xe,t(m,se),r(d)===null&&se===r(m)&&(b?(N(q),q=-1):b=!0,te(T,xe-I))):(se.sortIndex=H,t(d,se),j||x||(j=!0,K(O))),se},e.unstable_shouldYield=B,e.unstable_wrapCallback=function(se){var de=y;return function(){var xe=y;y=de;try{return se.apply(this,arguments)}finally{y=xe}}}})(bg)),bg}var ij;function rD(){return ij||(ij=1,wg.exports=tD()),wg.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var aj;function nD(){if(aj)return gs;aj=1;var e=fc(),t=rD();function r(o){for(var c="https://reactjs.org/docs/error-decoder.html?invariant="+o,h=1;h<arguments.length;h++)c+="&args[]="+encodeURIComponent(arguments[h]);return"Minified React error #"+o+"; visit "+c+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var n=new Set,s={};function i(o,c){l(o,c),l(o+"Capture",c)}function l(o,c){for(s[o]=c,o=0;o<c.length;o++)n.add(c[o])}var u=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),d=Object.prototype.hasOwnProperty,m=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,f={},p={};function y(o){return d.call(p,o)?!0:d.call(f,o)?!1:m.test(o)?p[o]=!0:(f[o]=!0,!1)}function x(o,c,h,g){if(h!==null&&h.type===0)return!1;switch(typeof c){case"function":case"symbol":return!0;case"boolean":return g?!1:h!==null?!h.acceptsBooleans:(o=o.toLowerCase().slice(0,5),o!=="data-"&&o!=="aria-");default:return!1}}function j(o,c,h,g){if(c===null||typeof c>"u"||x(o,c,h,g))return!0;if(g)return!1;if(h!==null)switch(h.type){case 3:return!c;case 4:return c===!1;case 5:return isNaN(c);case 6:return isNaN(c)||1>c}return!1}function b(o,c,h,g,w,_,A){this.acceptsBooleans=c===2||c===3||c===4,this.attributeName=g,this.attributeNamespace=w,this.mustUseProperty=h,this.propertyName=o,this.type=c,this.sanitizeURL=_,this.removeEmptyString=A}var S={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(o){S[o]=new b(o,0,!1,o,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(o){var c=o[0];S[c]=new b(c,1,!1,o[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(o){S[o]=new b(o,2,!1,o.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(o){S[o]=new b(o,2,!1,o,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(o){S[o]=new b(o,3,!1,o.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(o){S[o]=new b(o,3,!0,o,null,!1,!1)}),["capture","download"].forEach(function(o){S[o]=new b(o,4,!1,o,null,!1,!1)}),["cols","rows","size","span"].forEach(function(o){S[o]=new b(o,6,!1,o,null,!1,!1)}),["rowSpan","start"].forEach(function(o){S[o]=new b(o,5,!1,o.toLowerCase(),null,!1,!1)});var N=/[\-:]([a-z])/g;function E(o){return o[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(o){var c=o.replace(N,E);S[c]=new b(c,1,!1,o,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(o){var c=o.replace(N,E);S[c]=new b(c,1,!1,o,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(o){var c=o.replace(N,E);S[c]=new b(c,1,!1,o,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(o){S[o]=new b(o,1,!1,o.toLowerCase(),null,!1,!1)}),S.xlinkHref=new b("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(o){S[o]=new b(o,1,!1,o.toLowerCase(),null,!0,!0)});function k(o,c,h,g){var w=S.hasOwnProperty(c)?S[c]:null;(w!==null?w.type!==0:g||!(2<c.length)||c[0]!=="o"&&c[0]!=="O"||c[1]!=="n"&&c[1]!=="N")&&(j(c,h,w,g)&&(h=null),g||w===null?y(c)&&(h===null?o.removeAttribute(c):o.setAttribute(c,""+h)):w.mustUseProperty?o[w.propertyName]=h===null?w.type===3?!1:"":h:(c=w.attributeName,g=w.attributeNamespace,h===null?o.removeAttribute(c):(w=w.type,h=w===3||w===4&&h===!0?"":""+h,g?o.setAttributeNS(g,c,h):o.setAttribute(c,h))))}var T=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,O=Symbol.for("react.element"),P=Symbol.for("react.portal"),R=Symbol.for("react.fragment"),q=Symbol.for("react.strict_mode"),F=Symbol.for("react.profiler"),V=Symbol.for("react.provider"),B=Symbol.for("react.context"),Q=Symbol.for("react.forward_ref"),ae=Symbol.for("react.suspense"),ne=Symbol.for("react.suspense_list"),me=Symbol.for("react.memo"),K=Symbol.for("react.lazy"),te=Symbol.for("react.offscreen"),se=Symbol.iterator;function de(o){return o===null||typeof o!="object"?null:(o=se&&o[se]||o["@@iterator"],typeof o=="function"?o:null)}var xe=Object.assign,I;function H(o){if(I===void 0)try{throw Error()}catch(h){var c=h.stack.trim().match(/\n( *(at )?)/);I=c&&c[1]||""}return`
`+I+o}var Ie=!1;function X(o,c){if(!o||Ie)return"";Ie=!0;var h=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(c)if(c=function(){throw Error()},Object.defineProperty(c.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(c,[])}catch(le){var g=le}Reflect.construct(o,[],c)}else{try{c.call()}catch(le){g=le}o.call(c.prototype)}else{try{throw Error()}catch(le){g=le}o()}}catch(le){if(le&&g&&typeof le.stack=="string"){for(var w=le.stack.split(`
`),_=g.stack.split(`
`),A=w.length-1,M=_.length-1;1<=A&&0<=M&&w[A]!==_[M];)M--;for(;1<=A&&0<=M;A--,M--)if(w[A]!==_[M]){if(A!==1||M!==1)do if(A--,M--,0>M||w[A]!==_[M]){var z=`
`+w[A].replace(" at new "," at ");return o.displayName&&z.includes("<anonymous>")&&(z=z.replace("<anonymous>",o.displayName)),z}while(1<=A&&0<=M);break}}}finally{Ie=!1,Error.prepareStackTrace=h}return(o=o?o.displayName||o.name:"")?H(o):""}function ve(o){switch(o.tag){case 5:return H(o.type);case 16:return H("Lazy");case 13:return H("Suspense");case 19:return H("SuspenseList");case 0:case 2:case 15:return o=X(o.type,!1),o;case 11:return o=X(o.type.render,!1),o;case 1:return o=X(o.type,!0),o;default:return""}}function ce(o){if(o==null)return null;if(typeof o=="function")return o.displayName||o.name||null;if(typeof o=="string")return o;switch(o){case R:return"Fragment";case P:return"Portal";case F:return"Profiler";case q:return"StrictMode";case ae:return"Suspense";case ne:return"SuspenseList"}if(typeof o=="object")switch(o.$$typeof){case B:return(o.displayName||"Context")+".Consumer";case V:return(o._context.displayName||"Context")+".Provider";case Q:var c=o.render;return o=o.displayName,o||(o=c.displayName||c.name||"",o=o!==""?"ForwardRef("+o+")":"ForwardRef"),o;case me:return c=o.displayName||null,c!==null?c:ce(o.type)||"Memo";case K:c=o._payload,o=o._init;try{return ce(o(c))}catch{}}return null}function ge(o){var c=o.type;switch(o.tag){case 24:return"Cache";case 9:return(c.displayName||"Context")+".Consumer";case 10:return(c._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return o=c.render,o=o.displayName||o.name||"",c.displayName||(o!==""?"ForwardRef("+o+")":"ForwardRef");case 7:return"Fragment";case 5:return c;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return ce(c);case 8:return c===q?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof c=="function")return c.displayName||c.name||null;if(typeof c=="string")return c}return null}function ye(o){switch(typeof o){case"boolean":case"number":case"string":case"undefined":return o;case"object":return o;default:return""}}function L(o){var c=o.type;return(o=o.nodeName)&&o.toLowerCase()==="input"&&(c==="checkbox"||c==="radio")}function Fe(o){var c=L(o)?"checked":"value",h=Object.getOwnPropertyDescriptor(o.constructor.prototype,c),g=""+o[c];if(!o.hasOwnProperty(c)&&typeof h<"u"&&typeof h.get=="function"&&typeof h.set=="function"){var w=h.get,_=h.set;return Object.defineProperty(o,c,{configurable:!0,get:function(){return w.call(this)},set:function(A){g=""+A,_.call(this,A)}}),Object.defineProperty(o,c,{enumerable:h.enumerable}),{getValue:function(){return g},setValue:function(A){g=""+A},stopTracking:function(){o._valueTracker=null,delete o[c]}}}}function Me(o){o._valueTracker||(o._valueTracker=Fe(o))}function ee(o){if(!o)return!1;var c=o._valueTracker;if(!c)return!0;var h=c.getValue(),g="";return o&&(g=L(o)?o.checked?"true":"false":o.value),o=g,o!==h?(c.setValue(o),!0):!1}function Ke(o){if(o=o||(typeof document<"u"?document:void 0),typeof o>"u")return null;try{return o.activeElement||o.body}catch{return o.body}}function Xe(o,c){var h=c.checked;return xe({},c,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:h??o._wrapperState.initialChecked})}function ft(o,c){var h=c.defaultValue==null?"":c.defaultValue,g=c.checked!=null?c.checked:c.defaultChecked;h=ye(c.value!=null?c.value:h),o._wrapperState={initialChecked:g,initialValue:h,controlled:c.type==="checkbox"||c.type==="radio"?c.checked!=null:c.value!=null}}function wt(o,c){c=c.checked,c!=null&&k(o,"checked",c,!1)}function Ct(o,c){wt(o,c);var h=ye(c.value),g=c.type;if(h!=null)g==="number"?(h===0&&o.value===""||o.value!=h)&&(o.value=""+h):o.value!==""+h&&(o.value=""+h);else if(g==="submit"||g==="reset"){o.removeAttribute("value");return}c.hasOwnProperty("value")?Ot(o,c.type,h):c.hasOwnProperty("defaultValue")&&Ot(o,c.type,ye(c.defaultValue)),c.checked==null&&c.defaultChecked!=null&&(o.defaultChecked=!!c.defaultChecked)}function _t(o,c,h){if(c.hasOwnProperty("value")||c.hasOwnProperty("defaultValue")){var g=c.type;if(!(g!=="submit"&&g!=="reset"||c.value!==void 0&&c.value!==null))return;c=""+o._wrapperState.initialValue,h||c===o.value||(o.value=c),o.defaultValue=c}h=o.name,h!==""&&(o.name=""),o.defaultChecked=!!o._wrapperState.initialChecked,h!==""&&(o.name=h)}function Ot(o,c,h){(c!=="number"||Ke(o.ownerDocument)!==o)&&(h==null?o.defaultValue=""+o._wrapperState.initialValue:o.defaultValue!==""+h&&(o.defaultValue=""+h))}var $=Array.isArray;function Y(o,c,h,g){if(o=o.options,c){c={};for(var w=0;w<h.length;w++)c["$"+h[w]]=!0;for(h=0;h<o.length;h++)w=c.hasOwnProperty("$"+o[h].value),o[h].selected!==w&&(o[h].selected=w),w&&g&&(o[h].defaultSelected=!0)}else{for(h=""+ye(h),c=null,w=0;w<o.length;w++){if(o[w].value===h){o[w].selected=!0,g&&(o[w].defaultSelected=!0);return}c!==null||o[w].disabled||(c=o[w])}c!==null&&(c.selected=!0)}}function oe(o,c){if(c.dangerouslySetInnerHTML!=null)throw Error(r(91));return xe({},c,{value:void 0,defaultValue:void 0,children:""+o._wrapperState.initialValue})}function ue(o,c){var h=c.value;if(h==null){if(h=c.children,c=c.defaultValue,h!=null){if(c!=null)throw Error(r(92));if($(h)){if(1<h.length)throw Error(r(93));h=h[0]}c=h}c==null&&(c=""),h=c}o._wrapperState={initialValue:ye(h)}}function we(o,c){var h=ye(c.value),g=ye(c.defaultValue);h!=null&&(h=""+h,h!==o.value&&(o.value=h),c.defaultValue==null&&o.defaultValue!==h&&(o.defaultValue=h)),g!=null&&(o.defaultValue=""+g)}function je(o){var c=o.textContent;c===o._wrapperState.initialValue&&c!==""&&c!==null&&(o.value=c)}function ze(o){switch(o){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ot(o,c){return o==null||o==="http://www.w3.org/1999/xhtml"?ze(c):o==="http://www.w3.org/2000/svg"&&c==="foreignObject"?"http://www.w3.org/1999/xhtml":o}var pt,It=(function(o){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(c,h,g,w){MSApp.execUnsafeLocalFunction(function(){return o(c,h,g,w)})}:o})(function(o,c){if(o.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in o)o.innerHTML=c;else{for(pt=pt||document.createElement("div"),pt.innerHTML="<svg>"+c.valueOf().toString()+"</svg>",c=pt.firstChild;o.firstChild;)o.removeChild(o.firstChild);for(;c.firstChild;)o.appendChild(c.firstChild)}});function Or(o,c){if(c){var h=o.firstChild;if(h&&h===o.lastChild&&h.nodeType===3){h.nodeValue=c;return}}o.textContent=c}var Wt={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Lt=["Webkit","ms","Moz","O"];Object.keys(Wt).forEach(function(o){Lt.forEach(function(c){c=c+o.charAt(0).toUpperCase()+o.substring(1),Wt[c]=Wt[o]})});function fr(o,c,h){return c==null||typeof c=="boolean"||c===""?"":h||typeof c!="number"||c===0||Wt.hasOwnProperty(o)&&Wt[o]?(""+c).trim():c+"px"}function Ft(o,c){o=o.style;for(var h in c)if(c.hasOwnProperty(h)){var g=h.indexOf("--")===0,w=fr(h,c[h],g);h==="float"&&(h="cssFloat"),g?o.setProperty(h,w):o[h]=w}}var Lr=xe({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Kr(o,c){if(c){if(Lr[o]&&(c.children!=null||c.dangerouslySetInnerHTML!=null))throw Error(r(137,o));if(c.dangerouslySetInnerHTML!=null){if(c.children!=null)throw Error(r(60));if(typeof c.dangerouslySetInnerHTML!="object"||!("__html"in c.dangerouslySetInnerHTML))throw Error(r(61))}if(c.style!=null&&typeof c.style!="object")throw Error(r(62))}}function Ve(o,c){if(o.indexOf("-")===-1)return typeof c.is=="string";switch(o){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var zt=null;function Xt(o){return o=o.target||o.srcElement||window,o.correspondingUseElement&&(o=o.correspondingUseElement),o.nodeType===3?o.parentNode:o}var Sr=null,Tr=null,Bt=null;function Ir(o){if(o=Bc(o)){if(typeof Sr!="function")throw Error(r(280));var c=o.stateNode;c&&(c=kd(c),Sr(o.stateNode,o.type,c))}}function ls(o){Tr?Bt?Bt.push(o):Bt=[o]:Tr=o}function Qt(){if(Tr){var o=Tr,c=Bt;if(Bt=Tr=null,Ir(o),c)for(o=0;o<c.length;o++)Ir(c[o])}}function hr(o,c){return o(c)}function Cr(){}var nr=!1;function Er(o,c,h){if(nr)return o(c,h);nr=!0;try{return hr(o,c,h)}finally{nr=!1,(Tr!==null||Bt!==null)&&(Cr(),Qt())}}function zr(o,c){var h=o.stateNode;if(h===null)return null;var g=kd(h);if(g===null)return null;h=g[c];e:switch(c){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(g=!g.disabled)||(o=o.type,g=!(o==="button"||o==="input"||o==="select"||o==="textarea")),o=!g;break e;default:o=!1}if(o)return null;if(h&&typeof h!="function")throw Error(r(231,c,typeof h));return h}var Vn=!1;if(u)try{var mr={};Object.defineProperty(mr,"passive",{get:function(){Vn=!0}}),window.addEventListener("test",mr,mr),window.removeEventListener("test",mr,mr)}catch{Vn=!1}function Xn(o,c,h,g,w,_,A,M,z){var le=Array.prototype.slice.call(arguments,3);try{c.apply(h,le)}catch(Ce){this.onError(Ce)}}var sn=!1,an=null,on=!1,sr=null,ir={onError:function(o){sn=!0,an=o}};function Gr(o,c,h,g,w,_,A,M,z){sn=!1,an=null,Xn.apply(ir,arguments)}function cs(o,c,h,g,w,_,A,M,z){if(Gr.apply(this,arguments),sn){if(sn){var le=an;sn=!1,an=null}else throw Error(r(198));on||(on=!0,sr=le)}}function wn(o){var c=o,h=o;if(o.alternate)for(;c.return;)c=c.return;else{o=c;do c=o,(c.flags&4098)!==0&&(h=c.return),o=c.return;while(o)}return c.tag===3?h:null}function Yr(o){if(o.tag===13){var c=o.memoizedState;if(c===null&&(o=o.alternate,o!==null&&(c=o.memoizedState)),c!==null)return c.dehydrated}return null}function pr(o){if(wn(o)!==o)throw Error(r(188))}function Jr(o){var c=o.alternate;if(!c){if(c=wn(o),c===null)throw Error(r(188));return c!==o?null:o}for(var h=o,g=c;;){var w=h.return;if(w===null)break;var _=w.alternate;if(_===null){if(g=w.return,g!==null){h=g;continue}break}if(w.child===_.child){for(_=w.child;_;){if(_===h)return pr(w),o;if(_===g)return pr(w),c;_=_.sibling}throw Error(r(188))}if(h.return!==g.return)h=w,g=_;else{for(var A=!1,M=w.child;M;){if(M===h){A=!0,h=w,g=_;break}if(M===g){A=!0,g=w,h=_;break}M=M.sibling}if(!A){for(M=_.child;M;){if(M===h){A=!0,h=_,g=w;break}if(M===g){A=!0,g=_,h=w;break}M=M.sibling}if(!A)throw Error(r(189))}}if(h.alternate!==g)throw Error(r(190))}if(h.tag!==3)throw Error(r(188));return h.stateNode.current===h?o:c}function ar(o){return o=Jr(o),o!==null?Dr(o):null}function Dr(o){if(o.tag===5||o.tag===6)return o;for(o=o.child;o!==null;){var c=Dr(o);if(c!==null)return c;o=o.sibling}return null}var In=t.unstable_scheduleCallback,qn=t.unstable_cancelCallback,us=t.unstable_shouldYield,G=t.unstable_requestPaint,fe=t.unstable_now,Ee=t.unstable_getCurrentPriorityLevel,Pe=t.unstable_ImmediatePriority,st=t.unstable_UserBlockingPriority,We=t.unstable_NormalPriority,Tt=t.unstable_LowPriority,Et=t.unstable_IdlePriority,bt=null,Le=null;function ln(o){if(Le&&typeof Le.onCommitFiberRoot=="function")try{Le.onCommitFiberRoot(bt,o,void 0,(o.current.flags&128)===128)}catch{}}var tr=Math.clz32?Math.clz32:Dn,Rr=Math.log,Nt=Math.LN2;function Dn(o){return o>>>=0,o===0?32:31-(Rr(o)/Nt|0)|0}var ie=64,Se=4194304;function De(o){switch(o&-o){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return o&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return o}}function Ye(o,c){var h=o.pendingLanes;if(h===0)return 0;var g=0,w=o.suspendedLanes,_=o.pingedLanes,A=h&268435455;if(A!==0){var M=A&~w;M!==0?g=De(M):(_&=A,_!==0&&(g=De(_)))}else A=h&~w,A!==0?g=De(A):_!==0&&(g=De(_));if(g===0)return 0;if(c!==0&&c!==g&&(c&w)===0&&(w=g&-g,_=c&-c,w>=_||w===16&&(_&4194240)!==0))return c;if((g&4)!==0&&(g|=h&16),c=o.entangledLanes,c!==0)for(o=o.entanglements,c&=g;0<c;)h=31-tr(c),w=1<<h,g|=o[h],c&=~w;return g}function Ge(o,c){switch(o){case 1:case 2:case 4:return c+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return c+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function _e(o,c){for(var h=o.suspendedLanes,g=o.pingedLanes,w=o.expirationTimes,_=o.pendingLanes;0<_;){var A=31-tr(_),M=1<<A,z=w[A];z===-1?((M&h)===0||(M&g)!==0)&&(w[A]=Ge(M,c)):z<=c&&(o.expiredLanes|=M),_&=~M}}function be(o){return o=o.pendingLanes&-1073741825,o!==0?o:o&1073741824?1073741824:0}function it(){var o=ie;return ie<<=1,(ie&4194240)===0&&(ie=64),o}function Dt(o){for(var c=[],h=0;31>h;h++)c.push(o);return c}function et(o,c,h){o.pendingLanes|=c,c!==536870912&&(o.suspendedLanes=0,o.pingedLanes=0),o=o.eventTimes,c=31-tr(c),o[c]=h}function Mt(o,c){var h=o.pendingLanes&~c;o.pendingLanes=c,o.suspendedLanes=0,o.pingedLanes=0,o.expiredLanes&=c,o.mutableReadLanes&=c,o.entangledLanes&=c,c=o.entanglements;var g=o.eventTimes;for(o=o.expirationTimes;0<h;){var w=31-tr(h),_=1<<w;c[w]=0,g[w]=-1,o[w]=-1,h&=~_}}function At(o,c){var h=o.entangledLanes|=c;for(o=o.entanglements;h;){var g=31-tr(h),w=1<<g;w&c|o[g]&c&&(o[g]|=c),h&=~w}}var $e=0;function gt(o){return o&=-o,1<o?4<o?(o&268435455)!==0?16:536870912:4:1}var yt,Pt,Ut,ht,Vt,Rt=!1,C=[],J=null,Ne=null,Te=null,D=new Map,he=new Map,W=[],Ae="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Be(o,c){switch(o){case"focusin":case"focusout":J=null;break;case"dragenter":case"dragleave":Ne=null;break;case"mouseover":case"mouseout":Te=null;break;case"pointerover":case"pointerout":D.delete(c.pointerId);break;case"gotpointercapture":case"lostpointercapture":he.delete(c.pointerId)}}function gr(o,c,h,g,w,_){return o===null||o.nativeEvent!==_?(o={blockedOn:c,domEventName:h,eventSystemFlags:g,nativeEvent:_,targetContainers:[w]},c!==null&&(c=Bc(c),c!==null&&Pt(c)),o):(o.eventSystemFlags|=g,c=o.targetContainers,w!==null&&c.indexOf(w)===-1&&c.push(w),o)}function yr(o,c,h,g,w){switch(c){case"focusin":return J=gr(J,o,c,h,g,w),!0;case"dragenter":return Ne=gr(Ne,o,c,h,g,w),!0;case"mouseover":return Te=gr(Te,o,c,h,g,w),!0;case"pointerover":var _=w.pointerId;return D.set(_,gr(D.get(_)||null,o,c,h,g,w)),!0;case"gotpointercapture":return _=w.pointerId,he.set(_,gr(he.get(_)||null,o,c,h,g,w)),!0}return!1}function tl(o){var c=uo(o.target);if(c!==null){var h=wn(c);if(h!==null){if(c=h.tag,c===13){if(c=Yr(h),c!==null){o.blockedOn=c,Vt(o.priority,function(){Ut(h)});return}}else if(c===3&&h.stateNode.current.memoizedState.isDehydrated){o.blockedOn=h.tag===3?h.stateNode.containerInfo:null;return}}}o.blockedOn=null}function Vi(o){if(o.blockedOn!==null)return!1;for(var c=o.targetContainers;0<c.length;){var h=Wm(o.domEventName,o.eventSystemFlags,c[0],o.nativeEvent);if(h===null){h=o.nativeEvent;var g=new h.constructor(h.type,h);zt=g,h.target.dispatchEvent(g),zt=null}else return c=Bc(h),c!==null&&Pt(c),o.blockedOn=h,!1;c.shift()}return!0}function qi(o,c,h){Vi(o)&&h.delete(c)}function Ci(){Rt=!1,J!==null&&Vi(J)&&(J=null),Ne!==null&&Vi(Ne)&&(Ne=null),Te!==null&&Vi(Te)&&(Te=null),D.forEach(qi),he.forEach(qi)}function oi(o,c){o.blockedOn===c&&(o.blockedOn=null,Rt||(Rt=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,Ci)))}function co(o){function c(w){return oi(w,o)}if(0<C.length){oi(C[0],o);for(var h=1;h<C.length;h++){var g=C[h];g.blockedOn===o&&(g.blockedOn=null)}}for(J!==null&&oi(J,o),Ne!==null&&oi(Ne,o),Te!==null&&oi(Te,o),D.forEach(c),he.forEach(c),h=0;h<W.length;h++)g=W[h],g.blockedOn===o&&(g.blockedOn=null);for(;0<W.length&&(h=W[0],h.blockedOn===null);)tl(h),h.blockedOn===null&&W.shift()}var rl=T.ReactCurrentBatchConfig,hd=!0;function vT(o,c,h,g){var w=$e,_=rl.transition;rl.transition=null;try{$e=1,Um(o,c,h,g)}finally{$e=w,rl.transition=_}}function xT(o,c,h,g){var w=$e,_=rl.transition;rl.transition=null;try{$e=4,Um(o,c,h,g)}finally{$e=w,rl.transition=_}}function Um(o,c,h,g){if(hd){var w=Wm(o,c,h,g);if(w===null)ap(o,c,g,md,h),Be(o,g);else if(yr(w,o,c,h,g))g.stopPropagation();else if(Be(o,g),c&4&&-1<Ae.indexOf(o)){for(;w!==null;){var _=Bc(w);if(_!==null&&yt(_),_=Wm(o,c,h,g),_===null&&ap(o,c,g,md,h),_===w)break;w=_}w!==null&&g.stopPropagation()}else ap(o,c,g,null,h)}}var md=null;function Wm(o,c,h,g){if(md=null,o=Xt(g),o=uo(o),o!==null)if(c=wn(o),c===null)o=null;else if(h=c.tag,h===13){if(o=Yr(c),o!==null)return o;o=null}else if(h===3){if(c.stateNode.current.memoizedState.isDehydrated)return c.tag===3?c.stateNode.containerInfo:null;o=null}else c!==o&&(o=null);return md=o,null}function zw(o){switch(o){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Ee()){case Pe:return 1;case st:return 4;case We:case Tt:return 16;case Et:return 536870912;default:return 16}default:return 16}}var Aa=null,Vm=null,pd=null;function Bw(){if(pd)return pd;var o,c=Vm,h=c.length,g,w="value"in Aa?Aa.value:Aa.textContent,_=w.length;for(o=0;o<h&&c[o]===w[o];o++);var A=h-o;for(g=1;g<=A&&c[h-g]===w[_-g];g++);return pd=w.slice(o,1<g?1-g:void 0)}function gd(o){var c=o.keyCode;return"charCode"in o?(o=o.charCode,o===0&&c===13&&(o=13)):o=c,o===10&&(o=13),32<=o||o===13?o:0}function yd(){return!0}function Uw(){return!1}function Ns(o){function c(h,g,w,_,A){this._reactName=h,this._targetInst=w,this.type=g,this.nativeEvent=_,this.target=A,this.currentTarget=null;for(var M in o)o.hasOwnProperty(M)&&(h=o[M],this[M]=h?h(_):_[M]);return this.isDefaultPrevented=(_.defaultPrevented!=null?_.defaultPrevented:_.returnValue===!1)?yd:Uw,this.isPropagationStopped=Uw,this}return xe(c.prototype,{preventDefault:function(){this.defaultPrevented=!0;var h=this.nativeEvent;h&&(h.preventDefault?h.preventDefault():typeof h.returnValue!="unknown"&&(h.returnValue=!1),this.isDefaultPrevented=yd)},stopPropagation:function(){var h=this.nativeEvent;h&&(h.stopPropagation?h.stopPropagation():typeof h.cancelBubble!="unknown"&&(h.cancelBubble=!0),this.isPropagationStopped=yd)},persist:function(){},isPersistent:yd}),c}var nl={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(o){return o.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},qm=Ns(nl),Pc=xe({},nl,{view:0,detail:0}),wT=Ns(Pc),Hm,Km,Oc,vd=xe({},Pc,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ym,button:0,buttons:0,relatedTarget:function(o){return o.relatedTarget===void 0?o.fromElement===o.srcElement?o.toElement:o.fromElement:o.relatedTarget},movementX:function(o){return"movementX"in o?o.movementX:(o!==Oc&&(Oc&&o.type==="mousemove"?(Hm=o.screenX-Oc.screenX,Km=o.screenY-Oc.screenY):Km=Hm=0,Oc=o),Hm)},movementY:function(o){return"movementY"in o?o.movementY:Km}}),Ww=Ns(vd),bT=xe({},vd,{dataTransfer:0}),jT=Ns(bT),ST=xe({},Pc,{relatedTarget:0}),Gm=Ns(ST),_T=xe({},nl,{animationName:0,elapsedTime:0,pseudoElement:0}),NT=Ns(_T),kT=xe({},nl,{clipboardData:function(o){return"clipboardData"in o?o.clipboardData:window.clipboardData}}),CT=Ns(kT),ET=xe({},nl,{data:0}),Vw=Ns(ET),AT={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},PT={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},OT={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function TT(o){var c=this.nativeEvent;return c.getModifierState?c.getModifierState(o):(o=OT[o])?!!c[o]:!1}function Ym(){return TT}var IT=xe({},Pc,{key:function(o){if(o.key){var c=AT[o.key]||o.key;if(c!=="Unidentified")return c}return o.type==="keypress"?(o=gd(o),o===13?"Enter":String.fromCharCode(o)):o.type==="keydown"||o.type==="keyup"?PT[o.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ym,charCode:function(o){return o.type==="keypress"?gd(o):0},keyCode:function(o){return o.type==="keydown"||o.type==="keyup"?o.keyCode:0},which:function(o){return o.type==="keypress"?gd(o):o.type==="keydown"||o.type==="keyup"?o.keyCode:0}}),DT=Ns(IT),RT=xe({},vd,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),qw=Ns(RT),$T=xe({},Pc,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ym}),MT=Ns($T),FT=xe({},nl,{propertyName:0,elapsedTime:0,pseudoElement:0}),LT=Ns(FT),zT=xe({},vd,{deltaX:function(o){return"deltaX"in o?o.deltaX:"wheelDeltaX"in o?-o.wheelDeltaX:0},deltaY:function(o){return"deltaY"in o?o.deltaY:"wheelDeltaY"in o?-o.wheelDeltaY:"wheelDelta"in o?-o.wheelDelta:0},deltaZ:0,deltaMode:0}),BT=Ns(zT),UT=[9,13,27,32],Jm=u&&"CompositionEvent"in window,Tc=null;u&&"documentMode"in document&&(Tc=document.documentMode);var WT=u&&"TextEvent"in window&&!Tc,Hw=u&&(!Jm||Tc&&8<Tc&&11>=Tc),Kw=" ",Gw=!1;function Yw(o,c){switch(o){case"keyup":return UT.indexOf(c.keyCode)!==-1;case"keydown":return c.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Jw(o){return o=o.detail,typeof o=="object"&&"data"in o?o.data:null}var sl=!1;function VT(o,c){switch(o){case"compositionend":return Jw(c);case"keypress":return c.which!==32?null:(Gw=!0,Kw);case"textInput":return o=c.data,o===Kw&&Gw?null:o;default:return null}}function qT(o,c){if(sl)return o==="compositionend"||!Jm&&Yw(o,c)?(o=Bw(),pd=Vm=Aa=null,sl=!1,o):null;switch(o){case"paste":return null;case"keypress":if(!(c.ctrlKey||c.altKey||c.metaKey)||c.ctrlKey&&c.altKey){if(c.char&&1<c.char.length)return c.char;if(c.which)return String.fromCharCode(c.which)}return null;case"compositionend":return Hw&&c.locale!=="ko"?null:c.data;default:return null}}var HT={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Qw(o){var c=o&&o.nodeName&&o.nodeName.toLowerCase();return c==="input"?!!HT[o.type]:c==="textarea"}function Xw(o,c,h,g){ls(g),c=Sd(c,"onChange"),0<c.length&&(h=new qm("onChange","change",null,h,g),o.push({event:h,listeners:c}))}var Ic=null,Dc=null;function KT(o){gb(o,0)}function xd(o){var c=cl(o);if(ee(c))return o}function GT(o,c){if(o==="change")return c}var Zw=!1;if(u){var Qm;if(u){var Xm="oninput"in document;if(!Xm){var eb=document.createElement("div");eb.setAttribute("oninput","return;"),Xm=typeof eb.oninput=="function"}Qm=Xm}else Qm=!1;Zw=Qm&&(!document.documentMode||9<document.documentMode)}function tb(){Ic&&(Ic.detachEvent("onpropertychange",rb),Dc=Ic=null)}function rb(o){if(o.propertyName==="value"&&xd(Dc)){var c=[];Xw(c,Dc,o,Xt(o)),Er(KT,c)}}function YT(o,c,h){o==="focusin"?(tb(),Ic=c,Dc=h,Ic.attachEvent("onpropertychange",rb)):o==="focusout"&&tb()}function JT(o){if(o==="selectionchange"||o==="keyup"||o==="keydown")return xd(Dc)}function QT(o,c){if(o==="click")return xd(c)}function XT(o,c){if(o==="input"||o==="change")return xd(c)}function ZT(o,c){return o===c&&(o!==0||1/o===1/c)||o!==o&&c!==c}var li=typeof Object.is=="function"?Object.is:ZT;function Rc(o,c){if(li(o,c))return!0;if(typeof o!="object"||o===null||typeof c!="object"||c===null)return!1;var h=Object.keys(o),g=Object.keys(c);if(h.length!==g.length)return!1;for(g=0;g<h.length;g++){var w=h[g];if(!d.call(c,w)||!li(o[w],c[w]))return!1}return!0}function nb(o){for(;o&&o.firstChild;)o=o.firstChild;return o}function sb(o,c){var h=nb(o);o=0;for(var g;h;){if(h.nodeType===3){if(g=o+h.textContent.length,o<=c&&g>=c)return{node:h,offset:c-o};o=g}e:{for(;h;){if(h.nextSibling){h=h.nextSibling;break e}h=h.parentNode}h=void 0}h=nb(h)}}function ib(o,c){return o&&c?o===c?!0:o&&o.nodeType===3?!1:c&&c.nodeType===3?ib(o,c.parentNode):"contains"in o?o.contains(c):o.compareDocumentPosition?!!(o.compareDocumentPosition(c)&16):!1:!1}function ab(){for(var o=window,c=Ke();c instanceof o.HTMLIFrameElement;){try{var h=typeof c.contentWindow.location.href=="string"}catch{h=!1}if(h)o=c.contentWindow;else break;c=Ke(o.document)}return c}function Zm(o){var c=o&&o.nodeName&&o.nodeName.toLowerCase();return c&&(c==="input"&&(o.type==="text"||o.type==="search"||o.type==="tel"||o.type==="url"||o.type==="password")||c==="textarea"||o.contentEditable==="true")}function eI(o){var c=ab(),h=o.focusedElem,g=o.selectionRange;if(c!==h&&h&&h.ownerDocument&&ib(h.ownerDocument.documentElement,h)){if(g!==null&&Zm(h)){if(c=g.start,o=g.end,o===void 0&&(o=c),"selectionStart"in h)h.selectionStart=c,h.selectionEnd=Math.min(o,h.value.length);else if(o=(c=h.ownerDocument||document)&&c.defaultView||window,o.getSelection){o=o.getSelection();var w=h.textContent.length,_=Math.min(g.start,w);g=g.end===void 0?_:Math.min(g.end,w),!o.extend&&_>g&&(w=g,g=_,_=w),w=sb(h,_);var A=sb(h,g);w&&A&&(o.rangeCount!==1||o.anchorNode!==w.node||o.anchorOffset!==w.offset||o.focusNode!==A.node||o.focusOffset!==A.offset)&&(c=c.createRange(),c.setStart(w.node,w.offset),o.removeAllRanges(),_>g?(o.addRange(c),o.extend(A.node,A.offset)):(c.setEnd(A.node,A.offset),o.addRange(c)))}}for(c=[],o=h;o=o.parentNode;)o.nodeType===1&&c.push({element:o,left:o.scrollLeft,top:o.scrollTop});for(typeof h.focus=="function"&&h.focus(),h=0;h<c.length;h++)o=c[h],o.element.scrollLeft=o.left,o.element.scrollTop=o.top}}var tI=u&&"documentMode"in document&&11>=document.documentMode,il=null,ep=null,$c=null,tp=!1;function ob(o,c,h){var g=h.window===h?h.document:h.nodeType===9?h:h.ownerDocument;tp||il==null||il!==Ke(g)||(g=il,"selectionStart"in g&&Zm(g)?g={start:g.selectionStart,end:g.selectionEnd}:(g=(g.ownerDocument&&g.ownerDocument.defaultView||window).getSelection(),g={anchorNode:g.anchorNode,anchorOffset:g.anchorOffset,focusNode:g.focusNode,focusOffset:g.focusOffset}),$c&&Rc($c,g)||($c=g,g=Sd(ep,"onSelect"),0<g.length&&(c=new qm("onSelect","select",null,c,h),o.push({event:c,listeners:g}),c.target=il)))}function wd(o,c){var h={};return h[o.toLowerCase()]=c.toLowerCase(),h["Webkit"+o]="webkit"+c,h["Moz"+o]="moz"+c,h}var al={animationend:wd("Animation","AnimationEnd"),animationiteration:wd("Animation","AnimationIteration"),animationstart:wd("Animation","AnimationStart"),transitionend:wd("Transition","TransitionEnd")},rp={},lb={};u&&(lb=document.createElement("div").style,"AnimationEvent"in window||(delete al.animationend.animation,delete al.animationiteration.animation,delete al.animationstart.animation),"TransitionEvent"in window||delete al.transitionend.transition);function bd(o){if(rp[o])return rp[o];if(!al[o])return o;var c=al[o],h;for(h in c)if(c.hasOwnProperty(h)&&h in lb)return rp[o]=c[h];return o}var cb=bd("animationend"),ub=bd("animationiteration"),db=bd("animationstart"),fb=bd("transitionend"),hb=new Map,mb="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Pa(o,c){hb.set(o,c),i(c,[o])}for(var np=0;np<mb.length;np++){var sp=mb[np],rI=sp.toLowerCase(),nI=sp[0].toUpperCase()+sp.slice(1);Pa(rI,"on"+nI)}Pa(cb,"onAnimationEnd"),Pa(ub,"onAnimationIteration"),Pa(db,"onAnimationStart"),Pa("dblclick","onDoubleClick"),Pa("focusin","onFocus"),Pa("focusout","onBlur"),Pa(fb,"onTransitionEnd"),l("onMouseEnter",["mouseout","mouseover"]),l("onMouseLeave",["mouseout","mouseover"]),l("onPointerEnter",["pointerout","pointerover"]),l("onPointerLeave",["pointerout","pointerover"]),i("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),i("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),i("onBeforeInput",["compositionend","keypress","textInput","paste"]),i("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),i("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),i("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Mc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),sI=new Set("cancel close invalid load scroll toggle".split(" ").concat(Mc));function pb(o,c,h){var g=o.type||"unknown-event";o.currentTarget=h,cs(g,c,void 0,o),o.currentTarget=null}function gb(o,c){c=(c&4)!==0;for(var h=0;h<o.length;h++){var g=o[h],w=g.event;g=g.listeners;e:{var _=void 0;if(c)for(var A=g.length-1;0<=A;A--){var M=g[A],z=M.instance,le=M.currentTarget;if(M=M.listener,z!==_&&w.isPropagationStopped())break e;pb(w,M,le),_=z}else for(A=0;A<g.length;A++){if(M=g[A],z=M.instance,le=M.currentTarget,M=M.listener,z!==_&&w.isPropagationStopped())break e;pb(w,M,le),_=z}}}if(on)throw o=sr,on=!1,sr=null,o}function vr(o,c){var h=c[fp];h===void 0&&(h=c[fp]=new Set);var g=o+"__bubble";h.has(g)||(yb(c,o,2,!1),h.add(g))}function ip(o,c,h){var g=0;c&&(g|=4),yb(h,o,g,c)}var jd="_reactListening"+Math.random().toString(36).slice(2);function Fc(o){if(!o[jd]){o[jd]=!0,n.forEach(function(h){h!=="selectionchange"&&(sI.has(h)||ip(h,!1,o),ip(h,!0,o))});var c=o.nodeType===9?o:o.ownerDocument;c===null||c[jd]||(c[jd]=!0,ip("selectionchange",!1,c))}}function yb(o,c,h,g){switch(zw(c)){case 1:var w=vT;break;case 4:w=xT;break;default:w=Um}h=w.bind(null,c,h,o),w=void 0,!Vn||c!=="touchstart"&&c!=="touchmove"&&c!=="wheel"||(w=!0),g?w!==void 0?o.addEventListener(c,h,{capture:!0,passive:w}):o.addEventListener(c,h,!0):w!==void 0?o.addEventListener(c,h,{passive:w}):o.addEventListener(c,h,!1)}function ap(o,c,h,g,w){var _=g;if((c&1)===0&&(c&2)===0&&g!==null)e:for(;;){if(g===null)return;var A=g.tag;if(A===3||A===4){var M=g.stateNode.containerInfo;if(M===w||M.nodeType===8&&M.parentNode===w)break;if(A===4)for(A=g.return;A!==null;){var z=A.tag;if((z===3||z===4)&&(z=A.stateNode.containerInfo,z===w||z.nodeType===8&&z.parentNode===w))return;A=A.return}for(;M!==null;){if(A=uo(M),A===null)return;if(z=A.tag,z===5||z===6){g=_=A;continue e}M=M.parentNode}}g=g.return}Er(function(){var le=_,Ce=Xt(h),Oe=[];e:{var ke=hb.get(o);if(ke!==void 0){var He=qm,Ze=o;switch(o){case"keypress":if(gd(h)===0)break e;case"keydown":case"keyup":He=DT;break;case"focusin":Ze="focus",He=Gm;break;case"focusout":Ze="blur",He=Gm;break;case"beforeblur":case"afterblur":He=Gm;break;case"click":if(h.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":He=Ww;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":He=jT;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":He=MT;break;case cb:case ub:case db:He=NT;break;case fb:He=LT;break;case"scroll":He=wT;break;case"wheel":He=BT;break;case"copy":case"cut":case"paste":He=CT;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":He=qw}var tt=(c&4)!==0,Br=!tt&&o==="scroll",Z=tt?ke!==null?ke+"Capture":null:ke;tt=[];for(var U=le,re;U!==null;){re=U;var Re=re.stateNode;if(re.tag===5&&Re!==null&&(re=Re,Z!==null&&(Re=zr(U,Z),Re!=null&&tt.push(Lc(U,Re,re)))),Br)break;U=U.return}0<tt.length&&(ke=new He(ke,Ze,null,h,Ce),Oe.push({event:ke,listeners:tt}))}}if((c&7)===0){e:{if(ke=o==="mouseover"||o==="pointerover",He=o==="mouseout"||o==="pointerout",ke&&h!==zt&&(Ze=h.relatedTarget||h.fromElement)&&(uo(Ze)||Ze[Hi]))break e;if((He||ke)&&(ke=Ce.window===Ce?Ce:(ke=Ce.ownerDocument)?ke.defaultView||ke.parentWindow:window,He?(Ze=h.relatedTarget||h.toElement,He=le,Ze=Ze?uo(Ze):null,Ze!==null&&(Br=wn(Ze),Ze!==Br||Ze.tag!==5&&Ze.tag!==6)&&(Ze=null)):(He=null,Ze=le),He!==Ze)){if(tt=Ww,Re="onMouseLeave",Z="onMouseEnter",U="mouse",(o==="pointerout"||o==="pointerover")&&(tt=qw,Re="onPointerLeave",Z="onPointerEnter",U="pointer"),Br=He==null?ke:cl(He),re=Ze==null?ke:cl(Ze),ke=new tt(Re,U+"leave",He,h,Ce),ke.target=Br,ke.relatedTarget=re,Re=null,uo(Ce)===le&&(tt=new tt(Z,U+"enter",Ze,h,Ce),tt.target=re,tt.relatedTarget=Br,Re=tt),Br=Re,He&&Ze)t:{for(tt=He,Z=Ze,U=0,re=tt;re;re=ol(re))U++;for(re=0,Re=Z;Re;Re=ol(Re))re++;for(;0<U-re;)tt=ol(tt),U--;for(;0<re-U;)Z=ol(Z),re--;for(;U--;){if(tt===Z||Z!==null&&tt===Z.alternate)break t;tt=ol(tt),Z=ol(Z)}tt=null}else tt=null;He!==null&&vb(Oe,ke,He,tt,!1),Ze!==null&&Br!==null&&vb(Oe,Br,Ze,tt,!0)}}e:{if(ke=le?cl(le):window,He=ke.nodeName&&ke.nodeName.toLowerCase(),He==="select"||He==="input"&&ke.type==="file")var rt=GT;else if(Qw(ke))if(Zw)rt=XT;else{rt=JT;var ct=YT}else(He=ke.nodeName)&&He.toLowerCase()==="input"&&(ke.type==="checkbox"||ke.type==="radio")&&(rt=QT);if(rt&&(rt=rt(o,le))){Xw(Oe,rt,h,Ce);break e}ct&&ct(o,ke,le),o==="focusout"&&(ct=ke._wrapperState)&&ct.controlled&&ke.type==="number"&&Ot(ke,"number",ke.value)}switch(ct=le?cl(le):window,o){case"focusin":(Qw(ct)||ct.contentEditable==="true")&&(il=ct,ep=le,$c=null);break;case"focusout":$c=ep=il=null;break;case"mousedown":tp=!0;break;case"contextmenu":case"mouseup":case"dragend":tp=!1,ob(Oe,h,Ce);break;case"selectionchange":if(tI)break;case"keydown":case"keyup":ob(Oe,h,Ce)}var ut;if(Jm)e:{switch(o){case"compositionstart":var xt="onCompositionStart";break e;case"compositionend":xt="onCompositionEnd";break e;case"compositionupdate":xt="onCompositionUpdate";break e}xt=void 0}else sl?Yw(o,h)&&(xt="onCompositionEnd"):o==="keydown"&&h.keyCode===229&&(xt="onCompositionStart");xt&&(Hw&&h.locale!=="ko"&&(sl||xt!=="onCompositionStart"?xt==="onCompositionEnd"&&sl&&(ut=Bw()):(Aa=Ce,Vm="value"in Aa?Aa.value:Aa.textContent,sl=!0)),ct=Sd(le,xt),0<ct.length&&(xt=new Vw(xt,o,null,h,Ce),Oe.push({event:xt,listeners:ct}),ut?xt.data=ut:(ut=Jw(h),ut!==null&&(xt.data=ut)))),(ut=WT?VT(o,h):qT(o,h))&&(le=Sd(le,"onBeforeInput"),0<le.length&&(Ce=new Vw("onBeforeInput","beforeinput",null,h,Ce),Oe.push({event:Ce,listeners:le}),Ce.data=ut))}gb(Oe,c)})}function Lc(o,c,h){return{instance:o,listener:c,currentTarget:h}}function Sd(o,c){for(var h=c+"Capture",g=[];o!==null;){var w=o,_=w.stateNode;w.tag===5&&_!==null&&(w=_,_=zr(o,h),_!=null&&g.unshift(Lc(o,_,w)),_=zr(o,c),_!=null&&g.push(Lc(o,_,w))),o=o.return}return g}function ol(o){if(o===null)return null;do o=o.return;while(o&&o.tag!==5);return o||null}function vb(o,c,h,g,w){for(var _=c._reactName,A=[];h!==null&&h!==g;){var M=h,z=M.alternate,le=M.stateNode;if(z!==null&&z===g)break;M.tag===5&&le!==null&&(M=le,w?(z=zr(h,_),z!=null&&A.unshift(Lc(h,z,M))):w||(z=zr(h,_),z!=null&&A.push(Lc(h,z,M)))),h=h.return}A.length!==0&&o.push({event:c,listeners:A})}var iI=/\r\n?/g,aI=/\u0000|\uFFFD/g;function xb(o){return(typeof o=="string"?o:""+o).replace(iI,`
`).replace(aI,"")}function _d(o,c,h){if(c=xb(c),xb(o)!==c&&h)throw Error(r(425))}function Nd(){}var op=null,lp=null;function cp(o,c){return o==="textarea"||o==="noscript"||typeof c.children=="string"||typeof c.children=="number"||typeof c.dangerouslySetInnerHTML=="object"&&c.dangerouslySetInnerHTML!==null&&c.dangerouslySetInnerHTML.__html!=null}var up=typeof setTimeout=="function"?setTimeout:void 0,oI=typeof clearTimeout=="function"?clearTimeout:void 0,wb=typeof Promise=="function"?Promise:void 0,lI=typeof queueMicrotask=="function"?queueMicrotask:typeof wb<"u"?function(o){return wb.resolve(null).then(o).catch(cI)}:up;function cI(o){setTimeout(function(){throw o})}function dp(o,c){var h=c,g=0;do{var w=h.nextSibling;if(o.removeChild(h),w&&w.nodeType===8)if(h=w.data,h==="/$"){if(g===0){o.removeChild(w),co(c);return}g--}else h!=="$"&&h!=="$?"&&h!=="$!"||g++;h=w}while(h);co(c)}function Oa(o){for(;o!=null;o=o.nextSibling){var c=o.nodeType;if(c===1||c===3)break;if(c===8){if(c=o.data,c==="$"||c==="$!"||c==="$?")break;if(c==="/$")return null}}return o}function bb(o){o=o.previousSibling;for(var c=0;o;){if(o.nodeType===8){var h=o.data;if(h==="$"||h==="$!"||h==="$?"){if(c===0)return o;c--}else h==="/$"&&c++}o=o.previousSibling}return null}var ll=Math.random().toString(36).slice(2),Ei="__reactFiber$"+ll,zc="__reactProps$"+ll,Hi="__reactContainer$"+ll,fp="__reactEvents$"+ll,uI="__reactListeners$"+ll,dI="__reactHandles$"+ll;function uo(o){var c=o[Ei];if(c)return c;for(var h=o.parentNode;h;){if(c=h[Hi]||h[Ei]){if(h=c.alternate,c.child!==null||h!==null&&h.child!==null)for(o=bb(o);o!==null;){if(h=o[Ei])return h;o=bb(o)}return c}o=h,h=o.parentNode}return null}function Bc(o){return o=o[Ei]||o[Hi],!o||o.tag!==5&&o.tag!==6&&o.tag!==13&&o.tag!==3?null:o}function cl(o){if(o.tag===5||o.tag===6)return o.stateNode;throw Error(r(33))}function kd(o){return o[zc]||null}var hp=[],ul=-1;function Ta(o){return{current:o}}function xr(o){0>ul||(o.current=hp[ul],hp[ul]=null,ul--)}function lr(o,c){ul++,hp[ul]=o.current,o.current=c}var Ia={},Hn=Ta(Ia),ds=Ta(!1),fo=Ia;function dl(o,c){var h=o.type.contextTypes;if(!h)return Ia;var g=o.stateNode;if(g&&g.__reactInternalMemoizedUnmaskedChildContext===c)return g.__reactInternalMemoizedMaskedChildContext;var w={},_;for(_ in h)w[_]=c[_];return g&&(o=o.stateNode,o.__reactInternalMemoizedUnmaskedChildContext=c,o.__reactInternalMemoizedMaskedChildContext=w),w}function fs(o){return o=o.childContextTypes,o!=null}function Cd(){xr(ds),xr(Hn)}function jb(o,c,h){if(Hn.current!==Ia)throw Error(r(168));lr(Hn,c),lr(ds,h)}function Sb(o,c,h){var g=o.stateNode;if(c=c.childContextTypes,typeof g.getChildContext!="function")return h;g=g.getChildContext();for(var w in g)if(!(w in c))throw Error(r(108,ge(o)||"Unknown",w));return xe({},h,g)}function Ed(o){return o=(o=o.stateNode)&&o.__reactInternalMemoizedMergedChildContext||Ia,fo=Hn.current,lr(Hn,o),lr(ds,ds.current),!0}function _b(o,c,h){var g=o.stateNode;if(!g)throw Error(r(169));h?(o=Sb(o,c,fo),g.__reactInternalMemoizedMergedChildContext=o,xr(ds),xr(Hn),lr(Hn,o)):xr(ds),lr(ds,h)}var Ki=null,Ad=!1,mp=!1;function Nb(o){Ki===null?Ki=[o]:Ki.push(o)}function fI(o){Ad=!0,Nb(o)}function Da(){if(!mp&&Ki!==null){mp=!0;var o=0,c=$e;try{var h=Ki;for($e=1;o<h.length;o++){var g=h[o];do g=g(!0);while(g!==null)}Ki=null,Ad=!1}catch(w){throw Ki!==null&&(Ki=Ki.slice(o+1)),In(Pe,Da),w}finally{$e=c,mp=!1}}return null}var fl=[],hl=0,Pd=null,Od=0,Vs=[],qs=0,ho=null,Gi=1,Yi="";function mo(o,c){fl[hl++]=Od,fl[hl++]=Pd,Pd=o,Od=c}function kb(o,c,h){Vs[qs++]=Gi,Vs[qs++]=Yi,Vs[qs++]=ho,ho=o;var g=Gi;o=Yi;var w=32-tr(g)-1;g&=~(1<<w),h+=1;var _=32-tr(c)+w;if(30<_){var A=w-w%5;_=(g&(1<<A)-1).toString(32),g>>=A,w-=A,Gi=1<<32-tr(c)+w|h<<w|g,Yi=_+o}else Gi=1<<_|h<<w|g,Yi=o}function pp(o){o.return!==null&&(mo(o,1),kb(o,1,0))}function gp(o){for(;o===Pd;)Pd=fl[--hl],fl[hl]=null,Od=fl[--hl],fl[hl]=null;for(;o===ho;)ho=Vs[--qs],Vs[qs]=null,Yi=Vs[--qs],Vs[qs]=null,Gi=Vs[--qs],Vs[qs]=null}var ks=null,Cs=null,_r=!1,ci=null;function Cb(o,c){var h=Ys(5,null,null,0);h.elementType="DELETED",h.stateNode=c,h.return=o,c=o.deletions,c===null?(o.deletions=[h],o.flags|=16):c.push(h)}function Eb(o,c){switch(o.tag){case 5:var h=o.type;return c=c.nodeType!==1||h.toLowerCase()!==c.nodeName.toLowerCase()?null:c,c!==null?(o.stateNode=c,ks=o,Cs=Oa(c.firstChild),!0):!1;case 6:return c=o.pendingProps===""||c.nodeType!==3?null:c,c!==null?(o.stateNode=c,ks=o,Cs=null,!0):!1;case 13:return c=c.nodeType!==8?null:c,c!==null?(h=ho!==null?{id:Gi,overflow:Yi}:null,o.memoizedState={dehydrated:c,treeContext:h,retryLane:1073741824},h=Ys(18,null,null,0),h.stateNode=c,h.return=o,o.child=h,ks=o,Cs=null,!0):!1;default:return!1}}function yp(o){return(o.mode&1)!==0&&(o.flags&128)===0}function vp(o){if(_r){var c=Cs;if(c){var h=c;if(!Eb(o,c)){if(yp(o))throw Error(r(418));c=Oa(h.nextSibling);var g=ks;c&&Eb(o,c)?Cb(g,h):(o.flags=o.flags&-4097|2,_r=!1,ks=o)}}else{if(yp(o))throw Error(r(418));o.flags=o.flags&-4097|2,_r=!1,ks=o}}}function Ab(o){for(o=o.return;o!==null&&o.tag!==5&&o.tag!==3&&o.tag!==13;)o=o.return;ks=o}function Td(o){if(o!==ks)return!1;if(!_r)return Ab(o),_r=!0,!1;var c;if((c=o.tag!==3)&&!(c=o.tag!==5)&&(c=o.type,c=c!=="head"&&c!=="body"&&!cp(o.type,o.memoizedProps)),c&&(c=Cs)){if(yp(o))throw Pb(),Error(r(418));for(;c;)Cb(o,c),c=Oa(c.nextSibling)}if(Ab(o),o.tag===13){if(o=o.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(r(317));e:{for(o=o.nextSibling,c=0;o;){if(o.nodeType===8){var h=o.data;if(h==="/$"){if(c===0){Cs=Oa(o.nextSibling);break e}c--}else h!=="$"&&h!=="$!"&&h!=="$?"||c++}o=o.nextSibling}Cs=null}}else Cs=ks?Oa(o.stateNode.nextSibling):null;return!0}function Pb(){for(var o=Cs;o;)o=Oa(o.nextSibling)}function ml(){Cs=ks=null,_r=!1}function xp(o){ci===null?ci=[o]:ci.push(o)}var hI=T.ReactCurrentBatchConfig;function Uc(o,c,h){if(o=h.ref,o!==null&&typeof o!="function"&&typeof o!="object"){if(h._owner){if(h=h._owner,h){if(h.tag!==1)throw Error(r(309));var g=h.stateNode}if(!g)throw Error(r(147,o));var w=g,_=""+o;return c!==null&&c.ref!==null&&typeof c.ref=="function"&&c.ref._stringRef===_?c.ref:(c=function(A){var M=w.refs;A===null?delete M[_]:M[_]=A},c._stringRef=_,c)}if(typeof o!="string")throw Error(r(284));if(!h._owner)throw Error(r(290,o))}return o}function Id(o,c){throw o=Object.prototype.toString.call(c),Error(r(31,o==="[object Object]"?"object with keys {"+Object.keys(c).join(", ")+"}":o))}function Ob(o){var c=o._init;return c(o._payload)}function Tb(o){function c(Z,U){if(o){var re=Z.deletions;re===null?(Z.deletions=[U],Z.flags|=16):re.push(U)}}function h(Z,U){if(!o)return null;for(;U!==null;)c(Z,U),U=U.sibling;return null}function g(Z,U){for(Z=new Map;U!==null;)U.key!==null?Z.set(U.key,U):Z.set(U.index,U),U=U.sibling;return Z}function w(Z,U){return Z=Ua(Z,U),Z.index=0,Z.sibling=null,Z}function _(Z,U,re){return Z.index=re,o?(re=Z.alternate,re!==null?(re=re.index,re<U?(Z.flags|=2,U):re):(Z.flags|=2,U)):(Z.flags|=1048576,U)}function A(Z){return o&&Z.alternate===null&&(Z.flags|=2),Z}function M(Z,U,re,Re){return U===null||U.tag!==6?(U=ug(re,Z.mode,Re),U.return=Z,U):(U=w(U,re),U.return=Z,U)}function z(Z,U,re,Re){var rt=re.type;return rt===R?Ce(Z,U,re.props.children,Re,re.key):U!==null&&(U.elementType===rt||typeof rt=="object"&&rt!==null&&rt.$$typeof===K&&Ob(rt)===U.type)?(Re=w(U,re.props),Re.ref=Uc(Z,U,re),Re.return=Z,Re):(Re=nf(re.type,re.key,re.props,null,Z.mode,Re),Re.ref=Uc(Z,U,re),Re.return=Z,Re)}function le(Z,U,re,Re){return U===null||U.tag!==4||U.stateNode.containerInfo!==re.containerInfo||U.stateNode.implementation!==re.implementation?(U=dg(re,Z.mode,Re),U.return=Z,U):(U=w(U,re.children||[]),U.return=Z,U)}function Ce(Z,U,re,Re,rt){return U===null||U.tag!==7?(U=jo(re,Z.mode,Re,rt),U.return=Z,U):(U=w(U,re),U.return=Z,U)}function Oe(Z,U,re){if(typeof U=="string"&&U!==""||typeof U=="number")return U=ug(""+U,Z.mode,re),U.return=Z,U;if(typeof U=="object"&&U!==null){switch(U.$$typeof){case O:return re=nf(U.type,U.key,U.props,null,Z.mode,re),re.ref=Uc(Z,null,U),re.return=Z,re;case P:return U=dg(U,Z.mode,re),U.return=Z,U;case K:var Re=U._init;return Oe(Z,Re(U._payload),re)}if($(U)||de(U))return U=jo(U,Z.mode,re,null),U.return=Z,U;Id(Z,U)}return null}function ke(Z,U,re,Re){var rt=U!==null?U.key:null;if(typeof re=="string"&&re!==""||typeof re=="number")return rt!==null?null:M(Z,U,""+re,Re);if(typeof re=="object"&&re!==null){switch(re.$$typeof){case O:return re.key===rt?z(Z,U,re,Re):null;case P:return re.key===rt?le(Z,U,re,Re):null;case K:return rt=re._init,ke(Z,U,rt(re._payload),Re)}if($(re)||de(re))return rt!==null?null:Ce(Z,U,re,Re,null);Id(Z,re)}return null}function He(Z,U,re,Re,rt){if(typeof Re=="string"&&Re!==""||typeof Re=="number")return Z=Z.get(re)||null,M(U,Z,""+Re,rt);if(typeof Re=="object"&&Re!==null){switch(Re.$$typeof){case O:return Z=Z.get(Re.key===null?re:Re.key)||null,z(U,Z,Re,rt);case P:return Z=Z.get(Re.key===null?re:Re.key)||null,le(U,Z,Re,rt);case K:var ct=Re._init;return He(Z,U,re,ct(Re._payload),rt)}if($(Re)||de(Re))return Z=Z.get(re)||null,Ce(U,Z,Re,rt,null);Id(U,Re)}return null}function Ze(Z,U,re,Re){for(var rt=null,ct=null,ut=U,xt=U=0,Sn=null;ut!==null&&xt<re.length;xt++){ut.index>xt?(Sn=ut,ut=null):Sn=ut.sibling;var Kt=ke(Z,ut,re[xt],Re);if(Kt===null){ut===null&&(ut=Sn);break}o&&ut&&Kt.alternate===null&&c(Z,ut),U=_(Kt,U,xt),ct===null?rt=Kt:ct.sibling=Kt,ct=Kt,ut=Sn}if(xt===re.length)return h(Z,ut),_r&&mo(Z,xt),rt;if(ut===null){for(;xt<re.length;xt++)ut=Oe(Z,re[xt],Re),ut!==null&&(U=_(ut,U,xt),ct===null?rt=ut:ct.sibling=ut,ct=ut);return _r&&mo(Z,xt),rt}for(ut=g(Z,ut);xt<re.length;xt++)Sn=He(ut,Z,xt,re[xt],Re),Sn!==null&&(o&&Sn.alternate!==null&&ut.delete(Sn.key===null?xt:Sn.key),U=_(Sn,U,xt),ct===null?rt=Sn:ct.sibling=Sn,ct=Sn);return o&&ut.forEach(function(Wa){return c(Z,Wa)}),_r&&mo(Z,xt),rt}function tt(Z,U,re,Re){var rt=de(re);if(typeof rt!="function")throw Error(r(150));if(re=rt.call(re),re==null)throw Error(r(151));for(var ct=rt=null,ut=U,xt=U=0,Sn=null,Kt=re.next();ut!==null&&!Kt.done;xt++,Kt=re.next()){ut.index>xt?(Sn=ut,ut=null):Sn=ut.sibling;var Wa=ke(Z,ut,Kt.value,Re);if(Wa===null){ut===null&&(ut=Sn);break}o&&ut&&Wa.alternate===null&&c(Z,ut),U=_(Wa,U,xt),ct===null?rt=Wa:ct.sibling=Wa,ct=Wa,ut=Sn}if(Kt.done)return h(Z,ut),_r&&mo(Z,xt),rt;if(ut===null){for(;!Kt.done;xt++,Kt=re.next())Kt=Oe(Z,Kt.value,Re),Kt!==null&&(U=_(Kt,U,xt),ct===null?rt=Kt:ct.sibling=Kt,ct=Kt);return _r&&mo(Z,xt),rt}for(ut=g(Z,ut);!Kt.done;xt++,Kt=re.next())Kt=He(ut,Z,xt,Kt.value,Re),Kt!==null&&(o&&Kt.alternate!==null&&ut.delete(Kt.key===null?xt:Kt.key),U=_(Kt,U,xt),ct===null?rt=Kt:ct.sibling=Kt,ct=Kt);return o&&ut.forEach(function(HI){return c(Z,HI)}),_r&&mo(Z,xt),rt}function Br(Z,U,re,Re){if(typeof re=="object"&&re!==null&&re.type===R&&re.key===null&&(re=re.props.children),typeof re=="object"&&re!==null){switch(re.$$typeof){case O:e:{for(var rt=re.key,ct=U;ct!==null;){if(ct.key===rt){if(rt=re.type,rt===R){if(ct.tag===7){h(Z,ct.sibling),U=w(ct,re.props.children),U.return=Z,Z=U;break e}}else if(ct.elementType===rt||typeof rt=="object"&&rt!==null&&rt.$$typeof===K&&Ob(rt)===ct.type){h(Z,ct.sibling),U=w(ct,re.props),U.ref=Uc(Z,ct,re),U.return=Z,Z=U;break e}h(Z,ct);break}else c(Z,ct);ct=ct.sibling}re.type===R?(U=jo(re.props.children,Z.mode,Re,re.key),U.return=Z,Z=U):(Re=nf(re.type,re.key,re.props,null,Z.mode,Re),Re.ref=Uc(Z,U,re),Re.return=Z,Z=Re)}return A(Z);case P:e:{for(ct=re.key;U!==null;){if(U.key===ct)if(U.tag===4&&U.stateNode.containerInfo===re.containerInfo&&U.stateNode.implementation===re.implementation){h(Z,U.sibling),U=w(U,re.children||[]),U.return=Z,Z=U;break e}else{h(Z,U);break}else c(Z,U);U=U.sibling}U=dg(re,Z.mode,Re),U.return=Z,Z=U}return A(Z);case K:return ct=re._init,Br(Z,U,ct(re._payload),Re)}if($(re))return Ze(Z,U,re,Re);if(de(re))return tt(Z,U,re,Re);Id(Z,re)}return typeof re=="string"&&re!==""||typeof re=="number"?(re=""+re,U!==null&&U.tag===6?(h(Z,U.sibling),U=w(U,re),U.return=Z,Z=U):(h(Z,U),U=ug(re,Z.mode,Re),U.return=Z,Z=U),A(Z)):h(Z,U)}return Br}var pl=Tb(!0),Ib=Tb(!1),Dd=Ta(null),Rd=null,gl=null,wp=null;function bp(){wp=gl=Rd=null}function jp(o){var c=Dd.current;xr(Dd),o._currentValue=c}function Sp(o,c,h){for(;o!==null;){var g=o.alternate;if((o.childLanes&c)!==c?(o.childLanes|=c,g!==null&&(g.childLanes|=c)):g!==null&&(g.childLanes&c)!==c&&(g.childLanes|=c),o===h)break;o=o.return}}function yl(o,c){Rd=o,wp=gl=null,o=o.dependencies,o!==null&&o.firstContext!==null&&((o.lanes&c)!==0&&(hs=!0),o.firstContext=null)}function Hs(o){var c=o._currentValue;if(wp!==o)if(o={context:o,memoizedValue:c,next:null},gl===null){if(Rd===null)throw Error(r(308));gl=o,Rd.dependencies={lanes:0,firstContext:o}}else gl=gl.next=o;return c}var po=null;function _p(o){po===null?po=[o]:po.push(o)}function Db(o,c,h,g){var w=c.interleaved;return w===null?(h.next=h,_p(c)):(h.next=w.next,w.next=h),c.interleaved=h,Ji(o,g)}function Ji(o,c){o.lanes|=c;var h=o.alternate;for(h!==null&&(h.lanes|=c),h=o,o=o.return;o!==null;)o.childLanes|=c,h=o.alternate,h!==null&&(h.childLanes|=c),h=o,o=o.return;return h.tag===3?h.stateNode:null}var Ra=!1;function Np(o){o.updateQueue={baseState:o.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Rb(o,c){o=o.updateQueue,c.updateQueue===o&&(c.updateQueue={baseState:o.baseState,firstBaseUpdate:o.firstBaseUpdate,lastBaseUpdate:o.lastBaseUpdate,shared:o.shared,effects:o.effects})}function Qi(o,c){return{eventTime:o,lane:c,tag:0,payload:null,callback:null,next:null}}function $a(o,c,h){var g=o.updateQueue;if(g===null)return null;if(g=g.shared,(qt&2)!==0){var w=g.pending;return w===null?c.next=c:(c.next=w.next,w.next=c),g.pending=c,Ji(o,h)}return w=g.interleaved,w===null?(c.next=c,_p(g)):(c.next=w.next,w.next=c),g.interleaved=c,Ji(o,h)}function $d(o,c,h){if(c=c.updateQueue,c!==null&&(c=c.shared,(h&4194240)!==0)){var g=c.lanes;g&=o.pendingLanes,h|=g,c.lanes=h,At(o,h)}}function $b(o,c){var h=o.updateQueue,g=o.alternate;if(g!==null&&(g=g.updateQueue,h===g)){var w=null,_=null;if(h=h.firstBaseUpdate,h!==null){do{var A={eventTime:h.eventTime,lane:h.lane,tag:h.tag,payload:h.payload,callback:h.callback,next:null};_===null?w=_=A:_=_.next=A,h=h.next}while(h!==null);_===null?w=_=c:_=_.next=c}else w=_=c;h={baseState:g.baseState,firstBaseUpdate:w,lastBaseUpdate:_,shared:g.shared,effects:g.effects},o.updateQueue=h;return}o=h.lastBaseUpdate,o===null?h.firstBaseUpdate=c:o.next=c,h.lastBaseUpdate=c}function Md(o,c,h,g){var w=o.updateQueue;Ra=!1;var _=w.firstBaseUpdate,A=w.lastBaseUpdate,M=w.shared.pending;if(M!==null){w.shared.pending=null;var z=M,le=z.next;z.next=null,A===null?_=le:A.next=le,A=z;var Ce=o.alternate;Ce!==null&&(Ce=Ce.updateQueue,M=Ce.lastBaseUpdate,M!==A&&(M===null?Ce.firstBaseUpdate=le:M.next=le,Ce.lastBaseUpdate=z))}if(_!==null){var Oe=w.baseState;A=0,Ce=le=z=null,M=_;do{var ke=M.lane,He=M.eventTime;if((g&ke)===ke){Ce!==null&&(Ce=Ce.next={eventTime:He,lane:0,tag:M.tag,payload:M.payload,callback:M.callback,next:null});e:{var Ze=o,tt=M;switch(ke=c,He=h,tt.tag){case 1:if(Ze=tt.payload,typeof Ze=="function"){Oe=Ze.call(He,Oe,ke);break e}Oe=Ze;break e;case 3:Ze.flags=Ze.flags&-65537|128;case 0:if(Ze=tt.payload,ke=typeof Ze=="function"?Ze.call(He,Oe,ke):Ze,ke==null)break e;Oe=xe({},Oe,ke);break e;case 2:Ra=!0}}M.callback!==null&&M.lane!==0&&(o.flags|=64,ke=w.effects,ke===null?w.effects=[M]:ke.push(M))}else He={eventTime:He,lane:ke,tag:M.tag,payload:M.payload,callback:M.callback,next:null},Ce===null?(le=Ce=He,z=Oe):Ce=Ce.next=He,A|=ke;if(M=M.next,M===null){if(M=w.shared.pending,M===null)break;ke=M,M=ke.next,ke.next=null,w.lastBaseUpdate=ke,w.shared.pending=null}}while(!0);if(Ce===null&&(z=Oe),w.baseState=z,w.firstBaseUpdate=le,w.lastBaseUpdate=Ce,c=w.shared.interleaved,c!==null){w=c;do A|=w.lane,w=w.next;while(w!==c)}else _===null&&(w.shared.lanes=0);vo|=A,o.lanes=A,o.memoizedState=Oe}}function Mb(o,c,h){if(o=c.effects,c.effects=null,o!==null)for(c=0;c<o.length;c++){var g=o[c],w=g.callback;if(w!==null){if(g.callback=null,g=h,typeof w!="function")throw Error(r(191,w));w.call(g)}}}var Wc={},Ai=Ta(Wc),Vc=Ta(Wc),qc=Ta(Wc);function go(o){if(o===Wc)throw Error(r(174));return o}function kp(o,c){switch(lr(qc,c),lr(Vc,o),lr(Ai,Wc),o=c.nodeType,o){case 9:case 11:c=(c=c.documentElement)?c.namespaceURI:ot(null,"");break;default:o=o===8?c.parentNode:c,c=o.namespaceURI||null,o=o.tagName,c=ot(c,o)}xr(Ai),lr(Ai,c)}function vl(){xr(Ai),xr(Vc),xr(qc)}function Fb(o){go(qc.current);var c=go(Ai.current),h=ot(c,o.type);c!==h&&(lr(Vc,o),lr(Ai,h))}function Cp(o){Vc.current===o&&(xr(Ai),xr(Vc))}var Ar=Ta(0);function Fd(o){for(var c=o;c!==null;){if(c.tag===13){var h=c.memoizedState;if(h!==null&&(h=h.dehydrated,h===null||h.data==="$?"||h.data==="$!"))return c}else if(c.tag===19&&c.memoizedProps.revealOrder!==void 0){if((c.flags&128)!==0)return c}else if(c.child!==null){c.child.return=c,c=c.child;continue}if(c===o)break;for(;c.sibling===null;){if(c.return===null||c.return===o)return null;c=c.return}c.sibling.return=c.return,c=c.sibling}return null}var Ep=[];function Ap(){for(var o=0;o<Ep.length;o++)Ep[o]._workInProgressVersionPrimary=null;Ep.length=0}var Ld=T.ReactCurrentDispatcher,Pp=T.ReactCurrentBatchConfig,yo=0,Pr=null,cn=null,bn=null,zd=!1,Hc=!1,Kc=0,mI=0;function Kn(){throw Error(r(321))}function Op(o,c){if(c===null)return!1;for(var h=0;h<c.length&&h<o.length;h++)if(!li(o[h],c[h]))return!1;return!0}function Tp(o,c,h,g,w,_){if(yo=_,Pr=c,c.memoizedState=null,c.updateQueue=null,c.lanes=0,Ld.current=o===null||o.memoizedState===null?vI:xI,o=h(g,w),Hc){_=0;do{if(Hc=!1,Kc=0,25<=_)throw Error(r(301));_+=1,bn=cn=null,c.updateQueue=null,Ld.current=wI,o=h(g,w)}while(Hc)}if(Ld.current=Wd,c=cn!==null&&cn.next!==null,yo=0,bn=cn=Pr=null,zd=!1,c)throw Error(r(300));return o}function Ip(){var o=Kc!==0;return Kc=0,o}function Pi(){var o={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return bn===null?Pr.memoizedState=bn=o:bn=bn.next=o,bn}function Ks(){if(cn===null){var o=Pr.alternate;o=o!==null?o.memoizedState:null}else o=cn.next;var c=bn===null?Pr.memoizedState:bn.next;if(c!==null)bn=c,cn=o;else{if(o===null)throw Error(r(310));cn=o,o={memoizedState:cn.memoizedState,baseState:cn.baseState,baseQueue:cn.baseQueue,queue:cn.queue,next:null},bn===null?Pr.memoizedState=bn=o:bn=bn.next=o}return bn}function Gc(o,c){return typeof c=="function"?c(o):c}function Dp(o){var c=Ks(),h=c.queue;if(h===null)throw Error(r(311));h.lastRenderedReducer=o;var g=cn,w=g.baseQueue,_=h.pending;if(_!==null){if(w!==null){var A=w.next;w.next=_.next,_.next=A}g.baseQueue=w=_,h.pending=null}if(w!==null){_=w.next,g=g.baseState;var M=A=null,z=null,le=_;do{var Ce=le.lane;if((yo&Ce)===Ce)z!==null&&(z=z.next={lane:0,action:le.action,hasEagerState:le.hasEagerState,eagerState:le.eagerState,next:null}),g=le.hasEagerState?le.eagerState:o(g,le.action);else{var Oe={lane:Ce,action:le.action,hasEagerState:le.hasEagerState,eagerState:le.eagerState,next:null};z===null?(M=z=Oe,A=g):z=z.next=Oe,Pr.lanes|=Ce,vo|=Ce}le=le.next}while(le!==null&&le!==_);z===null?A=g:z.next=M,li(g,c.memoizedState)||(hs=!0),c.memoizedState=g,c.baseState=A,c.baseQueue=z,h.lastRenderedState=g}if(o=h.interleaved,o!==null){w=o;do _=w.lane,Pr.lanes|=_,vo|=_,w=w.next;while(w!==o)}else w===null&&(h.lanes=0);return[c.memoizedState,h.dispatch]}function Rp(o){var c=Ks(),h=c.queue;if(h===null)throw Error(r(311));h.lastRenderedReducer=o;var g=h.dispatch,w=h.pending,_=c.memoizedState;if(w!==null){h.pending=null;var A=w=w.next;do _=o(_,A.action),A=A.next;while(A!==w);li(_,c.memoizedState)||(hs=!0),c.memoizedState=_,c.baseQueue===null&&(c.baseState=_),h.lastRenderedState=_}return[_,g]}function Lb(){}function zb(o,c){var h=Pr,g=Ks(),w=c(),_=!li(g.memoizedState,w);if(_&&(g.memoizedState=w,hs=!0),g=g.queue,$p(Wb.bind(null,h,g,o),[o]),g.getSnapshot!==c||_||bn!==null&&bn.memoizedState.tag&1){if(h.flags|=2048,Yc(9,Ub.bind(null,h,g,w,c),void 0,null),jn===null)throw Error(r(349));(yo&30)!==0||Bb(h,c,w)}return w}function Bb(o,c,h){o.flags|=16384,o={getSnapshot:c,value:h},c=Pr.updateQueue,c===null?(c={lastEffect:null,stores:null},Pr.updateQueue=c,c.stores=[o]):(h=c.stores,h===null?c.stores=[o]:h.push(o))}function Ub(o,c,h,g){c.value=h,c.getSnapshot=g,Vb(c)&&qb(o)}function Wb(o,c,h){return h(function(){Vb(c)&&qb(o)})}function Vb(o){var c=o.getSnapshot;o=o.value;try{var h=c();return!li(o,h)}catch{return!0}}function qb(o){var c=Ji(o,1);c!==null&&hi(c,o,1,-1)}function Hb(o){var c=Pi();return typeof o=="function"&&(o=o()),c.memoizedState=c.baseState=o,o={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Gc,lastRenderedState:o},c.queue=o,o=o.dispatch=yI.bind(null,Pr,o),[c.memoizedState,o]}function Yc(o,c,h,g){return o={tag:o,create:c,destroy:h,deps:g,next:null},c=Pr.updateQueue,c===null?(c={lastEffect:null,stores:null},Pr.updateQueue=c,c.lastEffect=o.next=o):(h=c.lastEffect,h===null?c.lastEffect=o.next=o:(g=h.next,h.next=o,o.next=g,c.lastEffect=o)),o}function Kb(){return Ks().memoizedState}function Bd(o,c,h,g){var w=Pi();Pr.flags|=o,w.memoizedState=Yc(1|c,h,void 0,g===void 0?null:g)}function Ud(o,c,h,g){var w=Ks();g=g===void 0?null:g;var _=void 0;if(cn!==null){var A=cn.memoizedState;if(_=A.destroy,g!==null&&Op(g,A.deps)){w.memoizedState=Yc(c,h,_,g);return}}Pr.flags|=o,w.memoizedState=Yc(1|c,h,_,g)}function Gb(o,c){return Bd(8390656,8,o,c)}function $p(o,c){return Ud(2048,8,o,c)}function Yb(o,c){return Ud(4,2,o,c)}function Jb(o,c){return Ud(4,4,o,c)}function Qb(o,c){if(typeof c=="function")return o=o(),c(o),function(){c(null)};if(c!=null)return o=o(),c.current=o,function(){c.current=null}}function Xb(o,c,h){return h=h!=null?h.concat([o]):null,Ud(4,4,Qb.bind(null,c,o),h)}function Mp(){}function Zb(o,c){var h=Ks();c=c===void 0?null:c;var g=h.memoizedState;return g!==null&&c!==null&&Op(c,g[1])?g[0]:(h.memoizedState=[o,c],o)}function e1(o,c){var h=Ks();c=c===void 0?null:c;var g=h.memoizedState;return g!==null&&c!==null&&Op(c,g[1])?g[0]:(o=o(),h.memoizedState=[o,c],o)}function t1(o,c,h){return(yo&21)===0?(o.baseState&&(o.baseState=!1,hs=!0),o.memoizedState=h):(li(h,c)||(h=it(),Pr.lanes|=h,vo|=h,o.baseState=!0),c)}function pI(o,c){var h=$e;$e=h!==0&&4>h?h:4,o(!0);var g=Pp.transition;Pp.transition={};try{o(!1),c()}finally{$e=h,Pp.transition=g}}function r1(){return Ks().memoizedState}function gI(o,c,h){var g=za(o);if(h={lane:g,action:h,hasEagerState:!1,eagerState:null,next:null},n1(o))s1(c,h);else if(h=Db(o,c,h,g),h!==null){var w=es();hi(h,o,g,w),i1(h,c,g)}}function yI(o,c,h){var g=za(o),w={lane:g,action:h,hasEagerState:!1,eagerState:null,next:null};if(n1(o))s1(c,w);else{var _=o.alternate;if(o.lanes===0&&(_===null||_.lanes===0)&&(_=c.lastRenderedReducer,_!==null))try{var A=c.lastRenderedState,M=_(A,h);if(w.hasEagerState=!0,w.eagerState=M,li(M,A)){var z=c.interleaved;z===null?(w.next=w,_p(c)):(w.next=z.next,z.next=w),c.interleaved=w;return}}catch{}finally{}h=Db(o,c,w,g),h!==null&&(w=es(),hi(h,o,g,w),i1(h,c,g))}}function n1(o){var c=o.alternate;return o===Pr||c!==null&&c===Pr}function s1(o,c){Hc=zd=!0;var h=o.pending;h===null?c.next=c:(c.next=h.next,h.next=c),o.pending=c}function i1(o,c,h){if((h&4194240)!==0){var g=c.lanes;g&=o.pendingLanes,h|=g,c.lanes=h,At(o,h)}}var Wd={readContext:Hs,useCallback:Kn,useContext:Kn,useEffect:Kn,useImperativeHandle:Kn,useInsertionEffect:Kn,useLayoutEffect:Kn,useMemo:Kn,useReducer:Kn,useRef:Kn,useState:Kn,useDebugValue:Kn,useDeferredValue:Kn,useTransition:Kn,useMutableSource:Kn,useSyncExternalStore:Kn,useId:Kn,unstable_isNewReconciler:!1},vI={readContext:Hs,useCallback:function(o,c){return Pi().memoizedState=[o,c===void 0?null:c],o},useContext:Hs,useEffect:Gb,useImperativeHandle:function(o,c,h){return h=h!=null?h.concat([o]):null,Bd(4194308,4,Qb.bind(null,c,o),h)},useLayoutEffect:function(o,c){return Bd(4194308,4,o,c)},useInsertionEffect:function(o,c){return Bd(4,2,o,c)},useMemo:function(o,c){var h=Pi();return c=c===void 0?null:c,o=o(),h.memoizedState=[o,c],o},useReducer:function(o,c,h){var g=Pi();return c=h!==void 0?h(c):c,g.memoizedState=g.baseState=c,o={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:o,lastRenderedState:c},g.queue=o,o=o.dispatch=gI.bind(null,Pr,o),[g.memoizedState,o]},useRef:function(o){var c=Pi();return o={current:o},c.memoizedState=o},useState:Hb,useDebugValue:Mp,useDeferredValue:function(o){return Pi().memoizedState=o},useTransition:function(){var o=Hb(!1),c=o[0];return o=pI.bind(null,o[1]),Pi().memoizedState=o,[c,o]},useMutableSource:function(){},useSyncExternalStore:function(o,c,h){var g=Pr,w=Pi();if(_r){if(h===void 0)throw Error(r(407));h=h()}else{if(h=c(),jn===null)throw Error(r(349));(yo&30)!==0||Bb(g,c,h)}w.memoizedState=h;var _={value:h,getSnapshot:c};return w.queue=_,Gb(Wb.bind(null,g,_,o),[o]),g.flags|=2048,Yc(9,Ub.bind(null,g,_,h,c),void 0,null),h},useId:function(){var o=Pi(),c=jn.identifierPrefix;if(_r){var h=Yi,g=Gi;h=(g&~(1<<32-tr(g)-1)).toString(32)+h,c=":"+c+"R"+h,h=Kc++,0<h&&(c+="H"+h.toString(32)),c+=":"}else h=mI++,c=":"+c+"r"+h.toString(32)+":";return o.memoizedState=c},unstable_isNewReconciler:!1},xI={readContext:Hs,useCallback:Zb,useContext:Hs,useEffect:$p,useImperativeHandle:Xb,useInsertionEffect:Yb,useLayoutEffect:Jb,useMemo:e1,useReducer:Dp,useRef:Kb,useState:function(){return Dp(Gc)},useDebugValue:Mp,useDeferredValue:function(o){var c=Ks();return t1(c,cn.memoizedState,o)},useTransition:function(){var o=Dp(Gc)[0],c=Ks().memoizedState;return[o,c]},useMutableSource:Lb,useSyncExternalStore:zb,useId:r1,unstable_isNewReconciler:!1},wI={readContext:Hs,useCallback:Zb,useContext:Hs,useEffect:$p,useImperativeHandle:Xb,useInsertionEffect:Yb,useLayoutEffect:Jb,useMemo:e1,useReducer:Rp,useRef:Kb,useState:function(){return Rp(Gc)},useDebugValue:Mp,useDeferredValue:function(o){var c=Ks();return cn===null?c.memoizedState=o:t1(c,cn.memoizedState,o)},useTransition:function(){var o=Rp(Gc)[0],c=Ks().memoizedState;return[o,c]},useMutableSource:Lb,useSyncExternalStore:zb,useId:r1,unstable_isNewReconciler:!1};function ui(o,c){if(o&&o.defaultProps){c=xe({},c),o=o.defaultProps;for(var h in o)c[h]===void 0&&(c[h]=o[h]);return c}return c}function Fp(o,c,h,g){c=o.memoizedState,h=h(g,c),h=h==null?c:xe({},c,h),o.memoizedState=h,o.lanes===0&&(o.updateQueue.baseState=h)}var Vd={isMounted:function(o){return(o=o._reactInternals)?wn(o)===o:!1},enqueueSetState:function(o,c,h){o=o._reactInternals;var g=es(),w=za(o),_=Qi(g,w);_.payload=c,h!=null&&(_.callback=h),c=$a(o,_,w),c!==null&&(hi(c,o,w,g),$d(c,o,w))},enqueueReplaceState:function(o,c,h){o=o._reactInternals;var g=es(),w=za(o),_=Qi(g,w);_.tag=1,_.payload=c,h!=null&&(_.callback=h),c=$a(o,_,w),c!==null&&(hi(c,o,w,g),$d(c,o,w))},enqueueForceUpdate:function(o,c){o=o._reactInternals;var h=es(),g=za(o),w=Qi(h,g);w.tag=2,c!=null&&(w.callback=c),c=$a(o,w,g),c!==null&&(hi(c,o,g,h),$d(c,o,g))}};function a1(o,c,h,g,w,_,A){return o=o.stateNode,typeof o.shouldComponentUpdate=="function"?o.shouldComponentUpdate(g,_,A):c.prototype&&c.prototype.isPureReactComponent?!Rc(h,g)||!Rc(w,_):!0}function o1(o,c,h){var g=!1,w=Ia,_=c.contextType;return typeof _=="object"&&_!==null?_=Hs(_):(w=fs(c)?fo:Hn.current,g=c.contextTypes,_=(g=g!=null)?dl(o,w):Ia),c=new c(h,_),o.memoizedState=c.state!==null&&c.state!==void 0?c.state:null,c.updater=Vd,o.stateNode=c,c._reactInternals=o,g&&(o=o.stateNode,o.__reactInternalMemoizedUnmaskedChildContext=w,o.__reactInternalMemoizedMaskedChildContext=_),c}function l1(o,c,h,g){o=c.state,typeof c.componentWillReceiveProps=="function"&&c.componentWillReceiveProps(h,g),typeof c.UNSAFE_componentWillReceiveProps=="function"&&c.UNSAFE_componentWillReceiveProps(h,g),c.state!==o&&Vd.enqueueReplaceState(c,c.state,null)}function Lp(o,c,h,g){var w=o.stateNode;w.props=h,w.state=o.memoizedState,w.refs={},Np(o);var _=c.contextType;typeof _=="object"&&_!==null?w.context=Hs(_):(_=fs(c)?fo:Hn.current,w.context=dl(o,_)),w.state=o.memoizedState,_=c.getDerivedStateFromProps,typeof _=="function"&&(Fp(o,c,_,h),w.state=o.memoizedState),typeof c.getDerivedStateFromProps=="function"||typeof w.getSnapshotBeforeUpdate=="function"||typeof w.UNSAFE_componentWillMount!="function"&&typeof w.componentWillMount!="function"||(c=w.state,typeof w.componentWillMount=="function"&&w.componentWillMount(),typeof w.UNSAFE_componentWillMount=="function"&&w.UNSAFE_componentWillMount(),c!==w.state&&Vd.enqueueReplaceState(w,w.state,null),Md(o,h,w,g),w.state=o.memoizedState),typeof w.componentDidMount=="function"&&(o.flags|=4194308)}function xl(o,c){try{var h="",g=c;do h+=ve(g),g=g.return;while(g);var w=h}catch(_){w=`
Error generating stack: `+_.message+`
`+_.stack}return{value:o,source:c,stack:w,digest:null}}function zp(o,c,h){return{value:o,source:null,stack:h??null,digest:c??null}}function Bp(o,c){try{console.error(c.value)}catch(h){setTimeout(function(){throw h})}}var bI=typeof WeakMap=="function"?WeakMap:Map;function c1(o,c,h){h=Qi(-1,h),h.tag=3,h.payload={element:null};var g=c.value;return h.callback=function(){Qd||(Qd=!0,rg=g),Bp(o,c)},h}function u1(o,c,h){h=Qi(-1,h),h.tag=3;var g=o.type.getDerivedStateFromError;if(typeof g=="function"){var w=c.value;h.payload=function(){return g(w)},h.callback=function(){Bp(o,c)}}var _=o.stateNode;return _!==null&&typeof _.componentDidCatch=="function"&&(h.callback=function(){Bp(o,c),typeof g!="function"&&(Fa===null?Fa=new Set([this]):Fa.add(this));var A=c.stack;this.componentDidCatch(c.value,{componentStack:A!==null?A:""})}),h}function d1(o,c,h){var g=o.pingCache;if(g===null){g=o.pingCache=new bI;var w=new Set;g.set(c,w)}else w=g.get(c),w===void 0&&(w=new Set,g.set(c,w));w.has(h)||(w.add(h),o=RI.bind(null,o,c,h),c.then(o,o))}function f1(o){do{var c;if((c=o.tag===13)&&(c=o.memoizedState,c=c!==null?c.dehydrated!==null:!0),c)return o;o=o.return}while(o!==null);return null}function h1(o,c,h,g,w){return(o.mode&1)===0?(o===c?o.flags|=65536:(o.flags|=128,h.flags|=131072,h.flags&=-52805,h.tag===1&&(h.alternate===null?h.tag=17:(c=Qi(-1,1),c.tag=2,$a(h,c,1))),h.lanes|=1),o):(o.flags|=65536,o.lanes=w,o)}var jI=T.ReactCurrentOwner,hs=!1;function Zn(o,c,h,g){c.child=o===null?Ib(c,null,h,g):pl(c,o.child,h,g)}function m1(o,c,h,g,w){h=h.render;var _=c.ref;return yl(c,w),g=Tp(o,c,h,g,_,w),h=Ip(),o!==null&&!hs?(c.updateQueue=o.updateQueue,c.flags&=-2053,o.lanes&=~w,Xi(o,c,w)):(_r&&h&&pp(c),c.flags|=1,Zn(o,c,g,w),c.child)}function p1(o,c,h,g,w){if(o===null){var _=h.type;return typeof _=="function"&&!cg(_)&&_.defaultProps===void 0&&h.compare===null&&h.defaultProps===void 0?(c.tag=15,c.type=_,g1(o,c,_,g,w)):(o=nf(h.type,null,g,c,c.mode,w),o.ref=c.ref,o.return=c,c.child=o)}if(_=o.child,(o.lanes&w)===0){var A=_.memoizedProps;if(h=h.compare,h=h!==null?h:Rc,h(A,g)&&o.ref===c.ref)return Xi(o,c,w)}return c.flags|=1,o=Ua(_,g),o.ref=c.ref,o.return=c,c.child=o}function g1(o,c,h,g,w){if(o!==null){var _=o.memoizedProps;if(Rc(_,g)&&o.ref===c.ref)if(hs=!1,c.pendingProps=g=_,(o.lanes&w)!==0)(o.flags&131072)!==0&&(hs=!0);else return c.lanes=o.lanes,Xi(o,c,w)}return Up(o,c,h,g,w)}function y1(o,c,h){var g=c.pendingProps,w=g.children,_=o!==null?o.memoizedState:null;if(g.mode==="hidden")if((c.mode&1)===0)c.memoizedState={baseLanes:0,cachePool:null,transitions:null},lr(bl,Es),Es|=h;else{if((h&1073741824)===0)return o=_!==null?_.baseLanes|h:h,c.lanes=c.childLanes=1073741824,c.memoizedState={baseLanes:o,cachePool:null,transitions:null},c.updateQueue=null,lr(bl,Es),Es|=o,null;c.memoizedState={baseLanes:0,cachePool:null,transitions:null},g=_!==null?_.baseLanes:h,lr(bl,Es),Es|=g}else _!==null?(g=_.baseLanes|h,c.memoizedState=null):g=h,lr(bl,Es),Es|=g;return Zn(o,c,w,h),c.child}function v1(o,c){var h=c.ref;(o===null&&h!==null||o!==null&&o.ref!==h)&&(c.flags|=512,c.flags|=2097152)}function Up(o,c,h,g,w){var _=fs(h)?fo:Hn.current;return _=dl(c,_),yl(c,w),h=Tp(o,c,h,g,_,w),g=Ip(),o!==null&&!hs?(c.updateQueue=o.updateQueue,c.flags&=-2053,o.lanes&=~w,Xi(o,c,w)):(_r&&g&&pp(c),c.flags|=1,Zn(o,c,h,w),c.child)}function x1(o,c,h,g,w){if(fs(h)){var _=!0;Ed(c)}else _=!1;if(yl(c,w),c.stateNode===null)Hd(o,c),o1(c,h,g),Lp(c,h,g,w),g=!0;else if(o===null){var A=c.stateNode,M=c.memoizedProps;A.props=M;var z=A.context,le=h.contextType;typeof le=="object"&&le!==null?le=Hs(le):(le=fs(h)?fo:Hn.current,le=dl(c,le));var Ce=h.getDerivedStateFromProps,Oe=typeof Ce=="function"||typeof A.getSnapshotBeforeUpdate=="function";Oe||typeof A.UNSAFE_componentWillReceiveProps!="function"&&typeof A.componentWillReceiveProps!="function"||(M!==g||z!==le)&&l1(c,A,g,le),Ra=!1;var ke=c.memoizedState;A.state=ke,Md(c,g,A,w),z=c.memoizedState,M!==g||ke!==z||ds.current||Ra?(typeof Ce=="function"&&(Fp(c,h,Ce,g),z=c.memoizedState),(M=Ra||a1(c,h,M,g,ke,z,le))?(Oe||typeof A.UNSAFE_componentWillMount!="function"&&typeof A.componentWillMount!="function"||(typeof A.componentWillMount=="function"&&A.componentWillMount(),typeof A.UNSAFE_componentWillMount=="function"&&A.UNSAFE_componentWillMount()),typeof A.componentDidMount=="function"&&(c.flags|=4194308)):(typeof A.componentDidMount=="function"&&(c.flags|=4194308),c.memoizedProps=g,c.memoizedState=z),A.props=g,A.state=z,A.context=le,g=M):(typeof A.componentDidMount=="function"&&(c.flags|=4194308),g=!1)}else{A=c.stateNode,Rb(o,c),M=c.memoizedProps,le=c.type===c.elementType?M:ui(c.type,M),A.props=le,Oe=c.pendingProps,ke=A.context,z=h.contextType,typeof z=="object"&&z!==null?z=Hs(z):(z=fs(h)?fo:Hn.current,z=dl(c,z));var He=h.getDerivedStateFromProps;(Ce=typeof He=="function"||typeof A.getSnapshotBeforeUpdate=="function")||typeof A.UNSAFE_componentWillReceiveProps!="function"&&typeof A.componentWillReceiveProps!="function"||(M!==Oe||ke!==z)&&l1(c,A,g,z),Ra=!1,ke=c.memoizedState,A.state=ke,Md(c,g,A,w);var Ze=c.memoizedState;M!==Oe||ke!==Ze||ds.current||Ra?(typeof He=="function"&&(Fp(c,h,He,g),Ze=c.memoizedState),(le=Ra||a1(c,h,le,g,ke,Ze,z)||!1)?(Ce||typeof A.UNSAFE_componentWillUpdate!="function"&&typeof A.componentWillUpdate!="function"||(typeof A.componentWillUpdate=="function"&&A.componentWillUpdate(g,Ze,z),typeof A.UNSAFE_componentWillUpdate=="function"&&A.UNSAFE_componentWillUpdate(g,Ze,z)),typeof A.componentDidUpdate=="function"&&(c.flags|=4),typeof A.getSnapshotBeforeUpdate=="function"&&(c.flags|=1024)):(typeof A.componentDidUpdate!="function"||M===o.memoizedProps&&ke===o.memoizedState||(c.flags|=4),typeof A.getSnapshotBeforeUpdate!="function"||M===o.memoizedProps&&ke===o.memoizedState||(c.flags|=1024),c.memoizedProps=g,c.memoizedState=Ze),A.props=g,A.state=Ze,A.context=z,g=le):(typeof A.componentDidUpdate!="function"||M===o.memoizedProps&&ke===o.memoizedState||(c.flags|=4),typeof A.getSnapshotBeforeUpdate!="function"||M===o.memoizedProps&&ke===o.memoizedState||(c.flags|=1024),g=!1)}return Wp(o,c,h,g,_,w)}function Wp(o,c,h,g,w,_){v1(o,c);var A=(c.flags&128)!==0;if(!g&&!A)return w&&_b(c,h,!1),Xi(o,c,_);g=c.stateNode,jI.current=c;var M=A&&typeof h.getDerivedStateFromError!="function"?null:g.render();return c.flags|=1,o!==null&&A?(c.child=pl(c,o.child,null,_),c.child=pl(c,null,M,_)):Zn(o,c,M,_),c.memoizedState=g.state,w&&_b(c,h,!0),c.child}function w1(o){var c=o.stateNode;c.pendingContext?jb(o,c.pendingContext,c.pendingContext!==c.context):c.context&&jb(o,c.context,!1),kp(o,c.containerInfo)}function b1(o,c,h,g,w){return ml(),xp(w),c.flags|=256,Zn(o,c,h,g),c.child}var Vp={dehydrated:null,treeContext:null,retryLane:0};function qp(o){return{baseLanes:o,cachePool:null,transitions:null}}function j1(o,c,h){var g=c.pendingProps,w=Ar.current,_=!1,A=(c.flags&128)!==0,M;if((M=A)||(M=o!==null&&o.memoizedState===null?!1:(w&2)!==0),M?(_=!0,c.flags&=-129):(o===null||o.memoizedState!==null)&&(w|=1),lr(Ar,w&1),o===null)return vp(c),o=c.memoizedState,o!==null&&(o=o.dehydrated,o!==null)?((c.mode&1)===0?c.lanes=1:o.data==="$!"?c.lanes=8:c.lanes=1073741824,null):(A=g.children,o=g.fallback,_?(g=c.mode,_=c.child,A={mode:"hidden",children:A},(g&1)===0&&_!==null?(_.childLanes=0,_.pendingProps=A):_=sf(A,g,0,null),o=jo(o,g,h,null),_.return=c,o.return=c,_.sibling=o,c.child=_,c.child.memoizedState=qp(h),c.memoizedState=Vp,o):Hp(c,A));if(w=o.memoizedState,w!==null&&(M=w.dehydrated,M!==null))return SI(o,c,A,g,M,w,h);if(_){_=g.fallback,A=c.mode,w=o.child,M=w.sibling;var z={mode:"hidden",children:g.children};return(A&1)===0&&c.child!==w?(g=c.child,g.childLanes=0,g.pendingProps=z,c.deletions=null):(g=Ua(w,z),g.subtreeFlags=w.subtreeFlags&14680064),M!==null?_=Ua(M,_):(_=jo(_,A,h,null),_.flags|=2),_.return=c,g.return=c,g.sibling=_,c.child=g,g=_,_=c.child,A=o.child.memoizedState,A=A===null?qp(h):{baseLanes:A.baseLanes|h,cachePool:null,transitions:A.transitions},_.memoizedState=A,_.childLanes=o.childLanes&~h,c.memoizedState=Vp,g}return _=o.child,o=_.sibling,g=Ua(_,{mode:"visible",children:g.children}),(c.mode&1)===0&&(g.lanes=h),g.return=c,g.sibling=null,o!==null&&(h=c.deletions,h===null?(c.deletions=[o],c.flags|=16):h.push(o)),c.child=g,c.memoizedState=null,g}function Hp(o,c){return c=sf({mode:"visible",children:c},o.mode,0,null),c.return=o,o.child=c}function qd(o,c,h,g){return g!==null&&xp(g),pl(c,o.child,null,h),o=Hp(c,c.pendingProps.children),o.flags|=2,c.memoizedState=null,o}function SI(o,c,h,g,w,_,A){if(h)return c.flags&256?(c.flags&=-257,g=zp(Error(r(422))),qd(o,c,A,g)):c.memoizedState!==null?(c.child=o.child,c.flags|=128,null):(_=g.fallback,w=c.mode,g=sf({mode:"visible",children:g.children},w,0,null),_=jo(_,w,A,null),_.flags|=2,g.return=c,_.return=c,g.sibling=_,c.child=g,(c.mode&1)!==0&&pl(c,o.child,null,A),c.child.memoizedState=qp(A),c.memoizedState=Vp,_);if((c.mode&1)===0)return qd(o,c,A,null);if(w.data==="$!"){if(g=w.nextSibling&&w.nextSibling.dataset,g)var M=g.dgst;return g=M,_=Error(r(419)),g=zp(_,g,void 0),qd(o,c,A,g)}if(M=(A&o.childLanes)!==0,hs||M){if(g=jn,g!==null){switch(A&-A){case 4:w=2;break;case 16:w=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:w=32;break;case 536870912:w=268435456;break;default:w=0}w=(w&(g.suspendedLanes|A))!==0?0:w,w!==0&&w!==_.retryLane&&(_.retryLane=w,Ji(o,w),hi(g,o,w,-1))}return lg(),g=zp(Error(r(421))),qd(o,c,A,g)}return w.data==="$?"?(c.flags|=128,c.child=o.child,c=$I.bind(null,o),w._reactRetry=c,null):(o=_.treeContext,Cs=Oa(w.nextSibling),ks=c,_r=!0,ci=null,o!==null&&(Vs[qs++]=Gi,Vs[qs++]=Yi,Vs[qs++]=ho,Gi=o.id,Yi=o.overflow,ho=c),c=Hp(c,g.children),c.flags|=4096,c)}function S1(o,c,h){o.lanes|=c;var g=o.alternate;g!==null&&(g.lanes|=c),Sp(o.return,c,h)}function Kp(o,c,h,g,w){var _=o.memoizedState;_===null?o.memoizedState={isBackwards:c,rendering:null,renderingStartTime:0,last:g,tail:h,tailMode:w}:(_.isBackwards=c,_.rendering=null,_.renderingStartTime=0,_.last=g,_.tail=h,_.tailMode=w)}function _1(o,c,h){var g=c.pendingProps,w=g.revealOrder,_=g.tail;if(Zn(o,c,g.children,h),g=Ar.current,(g&2)!==0)g=g&1|2,c.flags|=128;else{if(o!==null&&(o.flags&128)!==0)e:for(o=c.child;o!==null;){if(o.tag===13)o.memoizedState!==null&&S1(o,h,c);else if(o.tag===19)S1(o,h,c);else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===c)break e;for(;o.sibling===null;){if(o.return===null||o.return===c)break e;o=o.return}o.sibling.return=o.return,o=o.sibling}g&=1}if(lr(Ar,g),(c.mode&1)===0)c.memoizedState=null;else switch(w){case"forwards":for(h=c.child,w=null;h!==null;)o=h.alternate,o!==null&&Fd(o)===null&&(w=h),h=h.sibling;h=w,h===null?(w=c.child,c.child=null):(w=h.sibling,h.sibling=null),Kp(c,!1,w,h,_);break;case"backwards":for(h=null,w=c.child,c.child=null;w!==null;){if(o=w.alternate,o!==null&&Fd(o)===null){c.child=w;break}o=w.sibling,w.sibling=h,h=w,w=o}Kp(c,!0,h,null,_);break;case"together":Kp(c,!1,null,null,void 0);break;default:c.memoizedState=null}return c.child}function Hd(o,c){(c.mode&1)===0&&o!==null&&(o.alternate=null,c.alternate=null,c.flags|=2)}function Xi(o,c,h){if(o!==null&&(c.dependencies=o.dependencies),vo|=c.lanes,(h&c.childLanes)===0)return null;if(o!==null&&c.child!==o.child)throw Error(r(153));if(c.child!==null){for(o=c.child,h=Ua(o,o.pendingProps),c.child=h,h.return=c;o.sibling!==null;)o=o.sibling,h=h.sibling=Ua(o,o.pendingProps),h.return=c;h.sibling=null}return c.child}function _I(o,c,h){switch(c.tag){case 3:w1(c),ml();break;case 5:Fb(c);break;case 1:fs(c.type)&&Ed(c);break;case 4:kp(c,c.stateNode.containerInfo);break;case 10:var g=c.type._context,w=c.memoizedProps.value;lr(Dd,g._currentValue),g._currentValue=w;break;case 13:if(g=c.memoizedState,g!==null)return g.dehydrated!==null?(lr(Ar,Ar.current&1),c.flags|=128,null):(h&c.child.childLanes)!==0?j1(o,c,h):(lr(Ar,Ar.current&1),o=Xi(o,c,h),o!==null?o.sibling:null);lr(Ar,Ar.current&1);break;case 19:if(g=(h&c.childLanes)!==0,(o.flags&128)!==0){if(g)return _1(o,c,h);c.flags|=128}if(w=c.memoizedState,w!==null&&(w.rendering=null,w.tail=null,w.lastEffect=null),lr(Ar,Ar.current),g)break;return null;case 22:case 23:return c.lanes=0,y1(o,c,h)}return Xi(o,c,h)}var N1,Gp,k1,C1;N1=function(o,c){for(var h=c.child;h!==null;){if(h.tag===5||h.tag===6)o.appendChild(h.stateNode);else if(h.tag!==4&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===c)break;for(;h.sibling===null;){if(h.return===null||h.return===c)return;h=h.return}h.sibling.return=h.return,h=h.sibling}},Gp=function(){},k1=function(o,c,h,g){var w=o.memoizedProps;if(w!==g){o=c.stateNode,go(Ai.current);var _=null;switch(h){case"input":w=Xe(o,w),g=Xe(o,g),_=[];break;case"select":w=xe({},w,{value:void 0}),g=xe({},g,{value:void 0}),_=[];break;case"textarea":w=oe(o,w),g=oe(o,g),_=[];break;default:typeof w.onClick!="function"&&typeof g.onClick=="function"&&(o.onclick=Nd)}Kr(h,g);var A;h=null;for(le in w)if(!g.hasOwnProperty(le)&&w.hasOwnProperty(le)&&w[le]!=null)if(le==="style"){var M=w[le];for(A in M)M.hasOwnProperty(A)&&(h||(h={}),h[A]="")}else le!=="dangerouslySetInnerHTML"&&le!=="children"&&le!=="suppressContentEditableWarning"&&le!=="suppressHydrationWarning"&&le!=="autoFocus"&&(s.hasOwnProperty(le)?_||(_=[]):(_=_||[]).push(le,null));for(le in g){var z=g[le];if(M=w!=null?w[le]:void 0,g.hasOwnProperty(le)&&z!==M&&(z!=null||M!=null))if(le==="style")if(M){for(A in M)!M.hasOwnProperty(A)||z&&z.hasOwnProperty(A)||(h||(h={}),h[A]="");for(A in z)z.hasOwnProperty(A)&&M[A]!==z[A]&&(h||(h={}),h[A]=z[A])}else h||(_||(_=[]),_.push(le,h)),h=z;else le==="dangerouslySetInnerHTML"?(z=z?z.__html:void 0,M=M?M.__html:void 0,z!=null&&M!==z&&(_=_||[]).push(le,z)):le==="children"?typeof z!="string"&&typeof z!="number"||(_=_||[]).push(le,""+z):le!=="suppressContentEditableWarning"&&le!=="suppressHydrationWarning"&&(s.hasOwnProperty(le)?(z!=null&&le==="onScroll"&&vr("scroll",o),_||M===z||(_=[])):(_=_||[]).push(le,z))}h&&(_=_||[]).push("style",h);var le=_;(c.updateQueue=le)&&(c.flags|=4)}},C1=function(o,c,h,g){h!==g&&(c.flags|=4)};function Jc(o,c){if(!_r)switch(o.tailMode){case"hidden":c=o.tail;for(var h=null;c!==null;)c.alternate!==null&&(h=c),c=c.sibling;h===null?o.tail=null:h.sibling=null;break;case"collapsed":h=o.tail;for(var g=null;h!==null;)h.alternate!==null&&(g=h),h=h.sibling;g===null?c||o.tail===null?o.tail=null:o.tail.sibling=null:g.sibling=null}}function Gn(o){var c=o.alternate!==null&&o.alternate.child===o.child,h=0,g=0;if(c)for(var w=o.child;w!==null;)h|=w.lanes|w.childLanes,g|=w.subtreeFlags&14680064,g|=w.flags&14680064,w.return=o,w=w.sibling;else for(w=o.child;w!==null;)h|=w.lanes|w.childLanes,g|=w.subtreeFlags,g|=w.flags,w.return=o,w=w.sibling;return o.subtreeFlags|=g,o.childLanes=h,c}function NI(o,c,h){var g=c.pendingProps;switch(gp(c),c.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Gn(c),null;case 1:return fs(c.type)&&Cd(),Gn(c),null;case 3:return g=c.stateNode,vl(),xr(ds),xr(Hn),Ap(),g.pendingContext&&(g.context=g.pendingContext,g.pendingContext=null),(o===null||o.child===null)&&(Td(c)?c.flags|=4:o===null||o.memoizedState.isDehydrated&&(c.flags&256)===0||(c.flags|=1024,ci!==null&&(ig(ci),ci=null))),Gp(o,c),Gn(c),null;case 5:Cp(c);var w=go(qc.current);if(h=c.type,o!==null&&c.stateNode!=null)k1(o,c,h,g,w),o.ref!==c.ref&&(c.flags|=512,c.flags|=2097152);else{if(!g){if(c.stateNode===null)throw Error(r(166));return Gn(c),null}if(o=go(Ai.current),Td(c)){g=c.stateNode,h=c.type;var _=c.memoizedProps;switch(g[Ei]=c,g[zc]=_,o=(c.mode&1)!==0,h){case"dialog":vr("cancel",g),vr("close",g);break;case"iframe":case"object":case"embed":vr("load",g);break;case"video":case"audio":for(w=0;w<Mc.length;w++)vr(Mc[w],g);break;case"source":vr("error",g);break;case"img":case"image":case"link":vr("error",g),vr("load",g);break;case"details":vr("toggle",g);break;case"input":ft(g,_),vr("invalid",g);break;case"select":g._wrapperState={wasMultiple:!!_.multiple},vr("invalid",g);break;case"textarea":ue(g,_),vr("invalid",g)}Kr(h,_),w=null;for(var A in _)if(_.hasOwnProperty(A)){var M=_[A];A==="children"?typeof M=="string"?g.textContent!==M&&(_.suppressHydrationWarning!==!0&&_d(g.textContent,M,o),w=["children",M]):typeof M=="number"&&g.textContent!==""+M&&(_.suppressHydrationWarning!==!0&&_d(g.textContent,M,o),w=["children",""+M]):s.hasOwnProperty(A)&&M!=null&&A==="onScroll"&&vr("scroll",g)}switch(h){case"input":Me(g),_t(g,_,!0);break;case"textarea":Me(g),je(g);break;case"select":case"option":break;default:typeof _.onClick=="function"&&(g.onclick=Nd)}g=w,c.updateQueue=g,g!==null&&(c.flags|=4)}else{A=w.nodeType===9?w:w.ownerDocument,o==="http://www.w3.org/1999/xhtml"&&(o=ze(h)),o==="http://www.w3.org/1999/xhtml"?h==="script"?(o=A.createElement("div"),o.innerHTML="<script><\/script>",o=o.removeChild(o.firstChild)):typeof g.is=="string"?o=A.createElement(h,{is:g.is}):(o=A.createElement(h),h==="select"&&(A=o,g.multiple?A.multiple=!0:g.size&&(A.size=g.size))):o=A.createElementNS(o,h),o[Ei]=c,o[zc]=g,N1(o,c,!1,!1),c.stateNode=o;e:{switch(A=Ve(h,g),h){case"dialog":vr("cancel",o),vr("close",o),w=g;break;case"iframe":case"object":case"embed":vr("load",o),w=g;break;case"video":case"audio":for(w=0;w<Mc.length;w++)vr(Mc[w],o);w=g;break;case"source":vr("error",o),w=g;break;case"img":case"image":case"link":vr("error",o),vr("load",o),w=g;break;case"details":vr("toggle",o),w=g;break;case"input":ft(o,g),w=Xe(o,g),vr("invalid",o);break;case"option":w=g;break;case"select":o._wrapperState={wasMultiple:!!g.multiple},w=xe({},g,{value:void 0}),vr("invalid",o);break;case"textarea":ue(o,g),w=oe(o,g),vr("invalid",o);break;default:w=g}Kr(h,w),M=w;for(_ in M)if(M.hasOwnProperty(_)){var z=M[_];_==="style"?Ft(o,z):_==="dangerouslySetInnerHTML"?(z=z?z.__html:void 0,z!=null&&It(o,z)):_==="children"?typeof z=="string"?(h!=="textarea"||z!=="")&&Or(o,z):typeof z=="number"&&Or(o,""+z):_!=="suppressContentEditableWarning"&&_!=="suppressHydrationWarning"&&_!=="autoFocus"&&(s.hasOwnProperty(_)?z!=null&&_==="onScroll"&&vr("scroll",o):z!=null&&k(o,_,z,A))}switch(h){case"input":Me(o),_t(o,g,!1);break;case"textarea":Me(o),je(o);break;case"option":g.value!=null&&o.setAttribute("value",""+ye(g.value));break;case"select":o.multiple=!!g.multiple,_=g.value,_!=null?Y(o,!!g.multiple,_,!1):g.defaultValue!=null&&Y(o,!!g.multiple,g.defaultValue,!0);break;default:typeof w.onClick=="function"&&(o.onclick=Nd)}switch(h){case"button":case"input":case"select":case"textarea":g=!!g.autoFocus;break e;case"img":g=!0;break e;default:g=!1}}g&&(c.flags|=4)}c.ref!==null&&(c.flags|=512,c.flags|=2097152)}return Gn(c),null;case 6:if(o&&c.stateNode!=null)C1(o,c,o.memoizedProps,g);else{if(typeof g!="string"&&c.stateNode===null)throw Error(r(166));if(h=go(qc.current),go(Ai.current),Td(c)){if(g=c.stateNode,h=c.memoizedProps,g[Ei]=c,(_=g.nodeValue!==h)&&(o=ks,o!==null))switch(o.tag){case 3:_d(g.nodeValue,h,(o.mode&1)!==0);break;case 5:o.memoizedProps.suppressHydrationWarning!==!0&&_d(g.nodeValue,h,(o.mode&1)!==0)}_&&(c.flags|=4)}else g=(h.nodeType===9?h:h.ownerDocument).createTextNode(g),g[Ei]=c,c.stateNode=g}return Gn(c),null;case 13:if(xr(Ar),g=c.memoizedState,o===null||o.memoizedState!==null&&o.memoizedState.dehydrated!==null){if(_r&&Cs!==null&&(c.mode&1)!==0&&(c.flags&128)===0)Pb(),ml(),c.flags|=98560,_=!1;else if(_=Td(c),g!==null&&g.dehydrated!==null){if(o===null){if(!_)throw Error(r(318));if(_=c.memoizedState,_=_!==null?_.dehydrated:null,!_)throw Error(r(317));_[Ei]=c}else ml(),(c.flags&128)===0&&(c.memoizedState=null),c.flags|=4;Gn(c),_=!1}else ci!==null&&(ig(ci),ci=null),_=!0;if(!_)return c.flags&65536?c:null}return(c.flags&128)!==0?(c.lanes=h,c):(g=g!==null,g!==(o!==null&&o.memoizedState!==null)&&g&&(c.child.flags|=8192,(c.mode&1)!==0&&(o===null||(Ar.current&1)!==0?un===0&&(un=3):lg())),c.updateQueue!==null&&(c.flags|=4),Gn(c),null);case 4:return vl(),Gp(o,c),o===null&&Fc(c.stateNode.containerInfo),Gn(c),null;case 10:return jp(c.type._context),Gn(c),null;case 17:return fs(c.type)&&Cd(),Gn(c),null;case 19:if(xr(Ar),_=c.memoizedState,_===null)return Gn(c),null;if(g=(c.flags&128)!==0,A=_.rendering,A===null)if(g)Jc(_,!1);else{if(un!==0||o!==null&&(o.flags&128)!==0)for(o=c.child;o!==null;){if(A=Fd(o),A!==null){for(c.flags|=128,Jc(_,!1),g=A.updateQueue,g!==null&&(c.updateQueue=g,c.flags|=4),c.subtreeFlags=0,g=h,h=c.child;h!==null;)_=h,o=g,_.flags&=14680066,A=_.alternate,A===null?(_.childLanes=0,_.lanes=o,_.child=null,_.subtreeFlags=0,_.memoizedProps=null,_.memoizedState=null,_.updateQueue=null,_.dependencies=null,_.stateNode=null):(_.childLanes=A.childLanes,_.lanes=A.lanes,_.child=A.child,_.subtreeFlags=0,_.deletions=null,_.memoizedProps=A.memoizedProps,_.memoizedState=A.memoizedState,_.updateQueue=A.updateQueue,_.type=A.type,o=A.dependencies,_.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext}),h=h.sibling;return lr(Ar,Ar.current&1|2),c.child}o=o.sibling}_.tail!==null&&fe()>jl&&(c.flags|=128,g=!0,Jc(_,!1),c.lanes=4194304)}else{if(!g)if(o=Fd(A),o!==null){if(c.flags|=128,g=!0,h=o.updateQueue,h!==null&&(c.updateQueue=h,c.flags|=4),Jc(_,!0),_.tail===null&&_.tailMode==="hidden"&&!A.alternate&&!_r)return Gn(c),null}else 2*fe()-_.renderingStartTime>jl&&h!==1073741824&&(c.flags|=128,g=!0,Jc(_,!1),c.lanes=4194304);_.isBackwards?(A.sibling=c.child,c.child=A):(h=_.last,h!==null?h.sibling=A:c.child=A,_.last=A)}return _.tail!==null?(c=_.tail,_.rendering=c,_.tail=c.sibling,_.renderingStartTime=fe(),c.sibling=null,h=Ar.current,lr(Ar,g?h&1|2:h&1),c):(Gn(c),null);case 22:case 23:return og(),g=c.memoizedState!==null,o!==null&&o.memoizedState!==null!==g&&(c.flags|=8192),g&&(c.mode&1)!==0?(Es&1073741824)!==0&&(Gn(c),c.subtreeFlags&6&&(c.flags|=8192)):Gn(c),null;case 24:return null;case 25:return null}throw Error(r(156,c.tag))}function kI(o,c){switch(gp(c),c.tag){case 1:return fs(c.type)&&Cd(),o=c.flags,o&65536?(c.flags=o&-65537|128,c):null;case 3:return vl(),xr(ds),xr(Hn),Ap(),o=c.flags,(o&65536)!==0&&(o&128)===0?(c.flags=o&-65537|128,c):null;case 5:return Cp(c),null;case 13:if(xr(Ar),o=c.memoizedState,o!==null&&o.dehydrated!==null){if(c.alternate===null)throw Error(r(340));ml()}return o=c.flags,o&65536?(c.flags=o&-65537|128,c):null;case 19:return xr(Ar),null;case 4:return vl(),null;case 10:return jp(c.type._context),null;case 22:case 23:return og(),null;case 24:return null;default:return null}}var Kd=!1,Yn=!1,CI=typeof WeakSet=="function"?WeakSet:Set,Je=null;function wl(o,c){var h=o.ref;if(h!==null)if(typeof h=="function")try{h(null)}catch(g){$r(o,c,g)}else h.current=null}function Yp(o,c,h){try{h()}catch(g){$r(o,c,g)}}var E1=!1;function EI(o,c){if(op=hd,o=ab(),Zm(o)){if("selectionStart"in o)var h={start:o.selectionStart,end:o.selectionEnd};else e:{h=(h=o.ownerDocument)&&h.defaultView||window;var g=h.getSelection&&h.getSelection();if(g&&g.rangeCount!==0){h=g.anchorNode;var w=g.anchorOffset,_=g.focusNode;g=g.focusOffset;try{h.nodeType,_.nodeType}catch{h=null;break e}var A=0,M=-1,z=-1,le=0,Ce=0,Oe=o,ke=null;t:for(;;){for(var He;Oe!==h||w!==0&&Oe.nodeType!==3||(M=A+w),Oe!==_||g!==0&&Oe.nodeType!==3||(z=A+g),Oe.nodeType===3&&(A+=Oe.nodeValue.length),(He=Oe.firstChild)!==null;)ke=Oe,Oe=He;for(;;){if(Oe===o)break t;if(ke===h&&++le===w&&(M=A),ke===_&&++Ce===g&&(z=A),(He=Oe.nextSibling)!==null)break;Oe=ke,ke=Oe.parentNode}Oe=He}h=M===-1||z===-1?null:{start:M,end:z}}else h=null}h=h||{start:0,end:0}}else h=null;for(lp={focusedElem:o,selectionRange:h},hd=!1,Je=c;Je!==null;)if(c=Je,o=c.child,(c.subtreeFlags&1028)!==0&&o!==null)o.return=c,Je=o;else for(;Je!==null;){c=Je;try{var Ze=c.alternate;if((c.flags&1024)!==0)switch(c.tag){case 0:case 11:case 15:break;case 1:if(Ze!==null){var tt=Ze.memoizedProps,Br=Ze.memoizedState,Z=c.stateNode,U=Z.getSnapshotBeforeUpdate(c.elementType===c.type?tt:ui(c.type,tt),Br);Z.__reactInternalSnapshotBeforeUpdate=U}break;case 3:var re=c.stateNode.containerInfo;re.nodeType===1?re.textContent="":re.nodeType===9&&re.documentElement&&re.removeChild(re.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(r(163))}}catch(Re){$r(c,c.return,Re)}if(o=c.sibling,o!==null){o.return=c.return,Je=o;break}Je=c.return}return Ze=E1,E1=!1,Ze}function Qc(o,c,h){var g=c.updateQueue;if(g=g!==null?g.lastEffect:null,g!==null){var w=g=g.next;do{if((w.tag&o)===o){var _=w.destroy;w.destroy=void 0,_!==void 0&&Yp(c,h,_)}w=w.next}while(w!==g)}}function Gd(o,c){if(c=c.updateQueue,c=c!==null?c.lastEffect:null,c!==null){var h=c=c.next;do{if((h.tag&o)===o){var g=h.create;h.destroy=g()}h=h.next}while(h!==c)}}function Jp(o){var c=o.ref;if(c!==null){var h=o.stateNode;switch(o.tag){case 5:o=h;break;default:o=h}typeof c=="function"?c(o):c.current=o}}function A1(o){var c=o.alternate;c!==null&&(o.alternate=null,A1(c)),o.child=null,o.deletions=null,o.sibling=null,o.tag===5&&(c=o.stateNode,c!==null&&(delete c[Ei],delete c[zc],delete c[fp],delete c[uI],delete c[dI])),o.stateNode=null,o.return=null,o.dependencies=null,o.memoizedProps=null,o.memoizedState=null,o.pendingProps=null,o.stateNode=null,o.updateQueue=null}function P1(o){return o.tag===5||o.tag===3||o.tag===4}function O1(o){e:for(;;){for(;o.sibling===null;){if(o.return===null||P1(o.return))return null;o=o.return}for(o.sibling.return=o.return,o=o.sibling;o.tag!==5&&o.tag!==6&&o.tag!==18;){if(o.flags&2||o.child===null||o.tag===4)continue e;o.child.return=o,o=o.child}if(!(o.flags&2))return o.stateNode}}function Qp(o,c,h){var g=o.tag;if(g===5||g===6)o=o.stateNode,c?h.nodeType===8?h.parentNode.insertBefore(o,c):h.insertBefore(o,c):(h.nodeType===8?(c=h.parentNode,c.insertBefore(o,h)):(c=h,c.appendChild(o)),h=h._reactRootContainer,h!=null||c.onclick!==null||(c.onclick=Nd));else if(g!==4&&(o=o.child,o!==null))for(Qp(o,c,h),o=o.sibling;o!==null;)Qp(o,c,h),o=o.sibling}function Xp(o,c,h){var g=o.tag;if(g===5||g===6)o=o.stateNode,c?h.insertBefore(o,c):h.appendChild(o);else if(g!==4&&(o=o.child,o!==null))for(Xp(o,c,h),o=o.sibling;o!==null;)Xp(o,c,h),o=o.sibling}var Rn=null,di=!1;function Ma(o,c,h){for(h=h.child;h!==null;)T1(o,c,h),h=h.sibling}function T1(o,c,h){if(Le&&typeof Le.onCommitFiberUnmount=="function")try{Le.onCommitFiberUnmount(bt,h)}catch{}switch(h.tag){case 5:Yn||wl(h,c);case 6:var g=Rn,w=di;Rn=null,Ma(o,c,h),Rn=g,di=w,Rn!==null&&(di?(o=Rn,h=h.stateNode,o.nodeType===8?o.parentNode.removeChild(h):o.removeChild(h)):Rn.removeChild(h.stateNode));break;case 18:Rn!==null&&(di?(o=Rn,h=h.stateNode,o.nodeType===8?dp(o.parentNode,h):o.nodeType===1&&dp(o,h),co(o)):dp(Rn,h.stateNode));break;case 4:g=Rn,w=di,Rn=h.stateNode.containerInfo,di=!0,Ma(o,c,h),Rn=g,di=w;break;case 0:case 11:case 14:case 15:if(!Yn&&(g=h.updateQueue,g!==null&&(g=g.lastEffect,g!==null))){w=g=g.next;do{var _=w,A=_.destroy;_=_.tag,A!==void 0&&((_&2)!==0||(_&4)!==0)&&Yp(h,c,A),w=w.next}while(w!==g)}Ma(o,c,h);break;case 1:if(!Yn&&(wl(h,c),g=h.stateNode,typeof g.componentWillUnmount=="function"))try{g.props=h.memoizedProps,g.state=h.memoizedState,g.componentWillUnmount()}catch(M){$r(h,c,M)}Ma(o,c,h);break;case 21:Ma(o,c,h);break;case 22:h.mode&1?(Yn=(g=Yn)||h.memoizedState!==null,Ma(o,c,h),Yn=g):Ma(o,c,h);break;default:Ma(o,c,h)}}function I1(o){var c=o.updateQueue;if(c!==null){o.updateQueue=null;var h=o.stateNode;h===null&&(h=o.stateNode=new CI),c.forEach(function(g){var w=MI.bind(null,o,g);h.has(g)||(h.add(g),g.then(w,w))})}}function fi(o,c){var h=c.deletions;if(h!==null)for(var g=0;g<h.length;g++){var w=h[g];try{var _=o,A=c,M=A;e:for(;M!==null;){switch(M.tag){case 5:Rn=M.stateNode,di=!1;break e;case 3:Rn=M.stateNode.containerInfo,di=!0;break e;case 4:Rn=M.stateNode.containerInfo,di=!0;break e}M=M.return}if(Rn===null)throw Error(r(160));T1(_,A,w),Rn=null,di=!1;var z=w.alternate;z!==null&&(z.return=null),w.return=null}catch(le){$r(w,c,le)}}if(c.subtreeFlags&12854)for(c=c.child;c!==null;)D1(c,o),c=c.sibling}function D1(o,c){var h=o.alternate,g=o.flags;switch(o.tag){case 0:case 11:case 14:case 15:if(fi(c,o),Oi(o),g&4){try{Qc(3,o,o.return),Gd(3,o)}catch(tt){$r(o,o.return,tt)}try{Qc(5,o,o.return)}catch(tt){$r(o,o.return,tt)}}break;case 1:fi(c,o),Oi(o),g&512&&h!==null&&wl(h,h.return);break;case 5:if(fi(c,o),Oi(o),g&512&&h!==null&&wl(h,h.return),o.flags&32){var w=o.stateNode;try{Or(w,"")}catch(tt){$r(o,o.return,tt)}}if(g&4&&(w=o.stateNode,w!=null)){var _=o.memoizedProps,A=h!==null?h.memoizedProps:_,M=o.type,z=o.updateQueue;if(o.updateQueue=null,z!==null)try{M==="input"&&_.type==="radio"&&_.name!=null&&wt(w,_),Ve(M,A);var le=Ve(M,_);for(A=0;A<z.length;A+=2){var Ce=z[A],Oe=z[A+1];Ce==="style"?Ft(w,Oe):Ce==="dangerouslySetInnerHTML"?It(w,Oe):Ce==="children"?Or(w,Oe):k(w,Ce,Oe,le)}switch(M){case"input":Ct(w,_);break;case"textarea":we(w,_);break;case"select":var ke=w._wrapperState.wasMultiple;w._wrapperState.wasMultiple=!!_.multiple;var He=_.value;He!=null?Y(w,!!_.multiple,He,!1):ke!==!!_.multiple&&(_.defaultValue!=null?Y(w,!!_.multiple,_.defaultValue,!0):Y(w,!!_.multiple,_.multiple?[]:"",!1))}w[zc]=_}catch(tt){$r(o,o.return,tt)}}break;case 6:if(fi(c,o),Oi(o),g&4){if(o.stateNode===null)throw Error(r(162));w=o.stateNode,_=o.memoizedProps;try{w.nodeValue=_}catch(tt){$r(o,o.return,tt)}}break;case 3:if(fi(c,o),Oi(o),g&4&&h!==null&&h.memoizedState.isDehydrated)try{co(c.containerInfo)}catch(tt){$r(o,o.return,tt)}break;case 4:fi(c,o),Oi(o);break;case 13:fi(c,o),Oi(o),w=o.child,w.flags&8192&&(_=w.memoizedState!==null,w.stateNode.isHidden=_,!_||w.alternate!==null&&w.alternate.memoizedState!==null||(tg=fe())),g&4&&I1(o);break;case 22:if(Ce=h!==null&&h.memoizedState!==null,o.mode&1?(Yn=(le=Yn)||Ce,fi(c,o),Yn=le):fi(c,o),Oi(o),g&8192){if(le=o.memoizedState!==null,(o.stateNode.isHidden=le)&&!Ce&&(o.mode&1)!==0)for(Je=o,Ce=o.child;Ce!==null;){for(Oe=Je=Ce;Je!==null;){switch(ke=Je,He=ke.child,ke.tag){case 0:case 11:case 14:case 15:Qc(4,ke,ke.return);break;case 1:wl(ke,ke.return);var Ze=ke.stateNode;if(typeof Ze.componentWillUnmount=="function"){g=ke,h=ke.return;try{c=g,Ze.props=c.memoizedProps,Ze.state=c.memoizedState,Ze.componentWillUnmount()}catch(tt){$r(g,h,tt)}}break;case 5:wl(ke,ke.return);break;case 22:if(ke.memoizedState!==null){M1(Oe);continue}}He!==null?(He.return=ke,Je=He):M1(Oe)}Ce=Ce.sibling}e:for(Ce=null,Oe=o;;){if(Oe.tag===5){if(Ce===null){Ce=Oe;try{w=Oe.stateNode,le?(_=w.style,typeof _.setProperty=="function"?_.setProperty("display","none","important"):_.display="none"):(M=Oe.stateNode,z=Oe.memoizedProps.style,A=z!=null&&z.hasOwnProperty("display")?z.display:null,M.style.display=fr("display",A))}catch(tt){$r(o,o.return,tt)}}}else if(Oe.tag===6){if(Ce===null)try{Oe.stateNode.nodeValue=le?"":Oe.memoizedProps}catch(tt){$r(o,o.return,tt)}}else if((Oe.tag!==22&&Oe.tag!==23||Oe.memoizedState===null||Oe===o)&&Oe.child!==null){Oe.child.return=Oe,Oe=Oe.child;continue}if(Oe===o)break e;for(;Oe.sibling===null;){if(Oe.return===null||Oe.return===o)break e;Ce===Oe&&(Ce=null),Oe=Oe.return}Ce===Oe&&(Ce=null),Oe.sibling.return=Oe.return,Oe=Oe.sibling}}break;case 19:fi(c,o),Oi(o),g&4&&I1(o);break;case 21:break;default:fi(c,o),Oi(o)}}function Oi(o){var c=o.flags;if(c&2){try{e:{for(var h=o.return;h!==null;){if(P1(h)){var g=h;break e}h=h.return}throw Error(r(160))}switch(g.tag){case 5:var w=g.stateNode;g.flags&32&&(Or(w,""),g.flags&=-33);var _=O1(o);Xp(o,_,w);break;case 3:case 4:var A=g.stateNode.containerInfo,M=O1(o);Qp(o,M,A);break;default:throw Error(r(161))}}catch(z){$r(o,o.return,z)}o.flags&=-3}c&4096&&(o.flags&=-4097)}function AI(o,c,h){Je=o,R1(o)}function R1(o,c,h){for(var g=(o.mode&1)!==0;Je!==null;){var w=Je,_=w.child;if(w.tag===22&&g){var A=w.memoizedState!==null||Kd;if(!A){var M=w.alternate,z=M!==null&&M.memoizedState!==null||Yn;M=Kd;var le=Yn;if(Kd=A,(Yn=z)&&!le)for(Je=w;Je!==null;)A=Je,z=A.child,A.tag===22&&A.memoizedState!==null?F1(w):z!==null?(z.return=A,Je=z):F1(w);for(;_!==null;)Je=_,R1(_),_=_.sibling;Je=w,Kd=M,Yn=le}$1(o)}else(w.subtreeFlags&8772)!==0&&_!==null?(_.return=w,Je=_):$1(o)}}function $1(o){for(;Je!==null;){var c=Je;if((c.flags&8772)!==0){var h=c.alternate;try{if((c.flags&8772)!==0)switch(c.tag){case 0:case 11:case 15:Yn||Gd(5,c);break;case 1:var g=c.stateNode;if(c.flags&4&&!Yn)if(h===null)g.componentDidMount();else{var w=c.elementType===c.type?h.memoizedProps:ui(c.type,h.memoizedProps);g.componentDidUpdate(w,h.memoizedState,g.__reactInternalSnapshotBeforeUpdate)}var _=c.updateQueue;_!==null&&Mb(c,_,g);break;case 3:var A=c.updateQueue;if(A!==null){if(h=null,c.child!==null)switch(c.child.tag){case 5:h=c.child.stateNode;break;case 1:h=c.child.stateNode}Mb(c,A,h)}break;case 5:var M=c.stateNode;if(h===null&&c.flags&4){h=M;var z=c.memoizedProps;switch(c.type){case"button":case"input":case"select":case"textarea":z.autoFocus&&h.focus();break;case"img":z.src&&(h.src=z.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(c.memoizedState===null){var le=c.alternate;if(le!==null){var Ce=le.memoizedState;if(Ce!==null){var Oe=Ce.dehydrated;Oe!==null&&co(Oe)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(r(163))}Yn||c.flags&512&&Jp(c)}catch(ke){$r(c,c.return,ke)}}if(c===o){Je=null;break}if(h=c.sibling,h!==null){h.return=c.return,Je=h;break}Je=c.return}}function M1(o){for(;Je!==null;){var c=Je;if(c===o){Je=null;break}var h=c.sibling;if(h!==null){h.return=c.return,Je=h;break}Je=c.return}}function F1(o){for(;Je!==null;){var c=Je;try{switch(c.tag){case 0:case 11:case 15:var h=c.return;try{Gd(4,c)}catch(z){$r(c,h,z)}break;case 1:var g=c.stateNode;if(typeof g.componentDidMount=="function"){var w=c.return;try{g.componentDidMount()}catch(z){$r(c,w,z)}}var _=c.return;try{Jp(c)}catch(z){$r(c,_,z)}break;case 5:var A=c.return;try{Jp(c)}catch(z){$r(c,A,z)}}}catch(z){$r(c,c.return,z)}if(c===o){Je=null;break}var M=c.sibling;if(M!==null){M.return=c.return,Je=M;break}Je=c.return}}var PI=Math.ceil,Yd=T.ReactCurrentDispatcher,Zp=T.ReactCurrentOwner,Gs=T.ReactCurrentBatchConfig,qt=0,jn=null,Qr=null,$n=0,Es=0,bl=Ta(0),un=0,Xc=null,vo=0,Jd=0,eg=0,Zc=null,ms=null,tg=0,jl=1/0,Zi=null,Qd=!1,rg=null,Fa=null,Xd=!1,La=null,Zd=0,eu=0,ng=null,ef=-1,tf=0;function es(){return(qt&6)!==0?fe():ef!==-1?ef:ef=fe()}function za(o){return(o.mode&1)===0?1:(qt&2)!==0&&$n!==0?$n&-$n:hI.transition!==null?(tf===0&&(tf=it()),tf):(o=$e,o!==0||(o=window.event,o=o===void 0?16:zw(o.type)),o)}function hi(o,c,h,g){if(50<eu)throw eu=0,ng=null,Error(r(185));et(o,h,g),((qt&2)===0||o!==jn)&&(o===jn&&((qt&2)===0&&(Jd|=h),un===4&&Ba(o,$n)),ps(o,g),h===1&&qt===0&&(c.mode&1)===0&&(jl=fe()+500,Ad&&Da()))}function ps(o,c){var h=o.callbackNode;_e(o,c);var g=Ye(o,o===jn?$n:0);if(g===0)h!==null&&qn(h),o.callbackNode=null,o.callbackPriority=0;else if(c=g&-g,o.callbackPriority!==c){if(h!=null&&qn(h),c===1)o.tag===0?fI(z1.bind(null,o)):Nb(z1.bind(null,o)),lI(function(){(qt&6)===0&&Da()}),h=null;else{switch(gt(g)){case 1:h=Pe;break;case 4:h=st;break;case 16:h=We;break;case 536870912:h=Et;break;default:h=We}h=G1(h,L1.bind(null,o))}o.callbackPriority=c,o.callbackNode=h}}function L1(o,c){if(ef=-1,tf=0,(qt&6)!==0)throw Error(r(327));var h=o.callbackNode;if(Sl()&&o.callbackNode!==h)return null;var g=Ye(o,o===jn?$n:0);if(g===0)return null;if((g&30)!==0||(g&o.expiredLanes)!==0||c)c=rf(o,g);else{c=g;var w=qt;qt|=2;var _=U1();(jn!==o||$n!==c)&&(Zi=null,jl=fe()+500,wo(o,c));do try{II();break}catch(M){B1(o,M)}while(!0);bp(),Yd.current=_,qt=w,Qr!==null?c=0:(jn=null,$n=0,c=un)}if(c!==0){if(c===2&&(w=be(o),w!==0&&(g=w,c=sg(o,w))),c===1)throw h=Xc,wo(o,0),Ba(o,g),ps(o,fe()),h;if(c===6)Ba(o,g);else{if(w=o.current.alternate,(g&30)===0&&!OI(w)&&(c=rf(o,g),c===2&&(_=be(o),_!==0&&(g=_,c=sg(o,_))),c===1))throw h=Xc,wo(o,0),Ba(o,g),ps(o,fe()),h;switch(o.finishedWork=w,o.finishedLanes=g,c){case 0:case 1:throw Error(r(345));case 2:bo(o,ms,Zi);break;case 3:if(Ba(o,g),(g&130023424)===g&&(c=tg+500-fe(),10<c)){if(Ye(o,0)!==0)break;if(w=o.suspendedLanes,(w&g)!==g){es(),o.pingedLanes|=o.suspendedLanes&w;break}o.timeoutHandle=up(bo.bind(null,o,ms,Zi),c);break}bo(o,ms,Zi);break;case 4:if(Ba(o,g),(g&4194240)===g)break;for(c=o.eventTimes,w=-1;0<g;){var A=31-tr(g);_=1<<A,A=c[A],A>w&&(w=A),g&=~_}if(g=w,g=fe()-g,g=(120>g?120:480>g?480:1080>g?1080:1920>g?1920:3e3>g?3e3:4320>g?4320:1960*PI(g/1960))-g,10<g){o.timeoutHandle=up(bo.bind(null,o,ms,Zi),g);break}bo(o,ms,Zi);break;case 5:bo(o,ms,Zi);break;default:throw Error(r(329))}}}return ps(o,fe()),o.callbackNode===h?L1.bind(null,o):null}function sg(o,c){var h=Zc;return o.current.memoizedState.isDehydrated&&(wo(o,c).flags|=256),o=rf(o,c),o!==2&&(c=ms,ms=h,c!==null&&ig(c)),o}function ig(o){ms===null?ms=o:ms.push.apply(ms,o)}function OI(o){for(var c=o;;){if(c.flags&16384){var h=c.updateQueue;if(h!==null&&(h=h.stores,h!==null))for(var g=0;g<h.length;g++){var w=h[g],_=w.getSnapshot;w=w.value;try{if(!li(_(),w))return!1}catch{return!1}}}if(h=c.child,c.subtreeFlags&16384&&h!==null)h.return=c,c=h;else{if(c===o)break;for(;c.sibling===null;){if(c.return===null||c.return===o)return!0;c=c.return}c.sibling.return=c.return,c=c.sibling}}return!0}function Ba(o,c){for(c&=~eg,c&=~Jd,o.suspendedLanes|=c,o.pingedLanes&=~c,o=o.expirationTimes;0<c;){var h=31-tr(c),g=1<<h;o[h]=-1,c&=~g}}function z1(o){if((qt&6)!==0)throw Error(r(327));Sl();var c=Ye(o,0);if((c&1)===0)return ps(o,fe()),null;var h=rf(o,c);if(o.tag!==0&&h===2){var g=be(o);g!==0&&(c=g,h=sg(o,g))}if(h===1)throw h=Xc,wo(o,0),Ba(o,c),ps(o,fe()),h;if(h===6)throw Error(r(345));return o.finishedWork=o.current.alternate,o.finishedLanes=c,bo(o,ms,Zi),ps(o,fe()),null}function ag(o,c){var h=qt;qt|=1;try{return o(c)}finally{qt=h,qt===0&&(jl=fe()+500,Ad&&Da())}}function xo(o){La!==null&&La.tag===0&&(qt&6)===0&&Sl();var c=qt;qt|=1;var h=Gs.transition,g=$e;try{if(Gs.transition=null,$e=1,o)return o()}finally{$e=g,Gs.transition=h,qt=c,(qt&6)===0&&Da()}}function og(){Es=bl.current,xr(bl)}function wo(o,c){o.finishedWork=null,o.finishedLanes=0;var h=o.timeoutHandle;if(h!==-1&&(o.timeoutHandle=-1,oI(h)),Qr!==null)for(h=Qr.return;h!==null;){var g=h;switch(gp(g),g.tag){case 1:g=g.type.childContextTypes,g!=null&&Cd();break;case 3:vl(),xr(ds),xr(Hn),Ap();break;case 5:Cp(g);break;case 4:vl();break;case 13:xr(Ar);break;case 19:xr(Ar);break;case 10:jp(g.type._context);break;case 22:case 23:og()}h=h.return}if(jn=o,Qr=o=Ua(o.current,null),$n=Es=c,un=0,Xc=null,eg=Jd=vo=0,ms=Zc=null,po!==null){for(c=0;c<po.length;c++)if(h=po[c],g=h.interleaved,g!==null){h.interleaved=null;var w=g.next,_=h.pending;if(_!==null){var A=_.next;_.next=w,g.next=A}h.pending=g}po=null}return o}function B1(o,c){do{var h=Qr;try{if(bp(),Ld.current=Wd,zd){for(var g=Pr.memoizedState;g!==null;){var w=g.queue;w!==null&&(w.pending=null),g=g.next}zd=!1}if(yo=0,bn=cn=Pr=null,Hc=!1,Kc=0,Zp.current=null,h===null||h.return===null){un=1,Xc=c,Qr=null;break}e:{var _=o,A=h.return,M=h,z=c;if(c=$n,M.flags|=32768,z!==null&&typeof z=="object"&&typeof z.then=="function"){var le=z,Ce=M,Oe=Ce.tag;if((Ce.mode&1)===0&&(Oe===0||Oe===11||Oe===15)){var ke=Ce.alternate;ke?(Ce.updateQueue=ke.updateQueue,Ce.memoizedState=ke.memoizedState,Ce.lanes=ke.lanes):(Ce.updateQueue=null,Ce.memoizedState=null)}var He=f1(A);if(He!==null){He.flags&=-257,h1(He,A,M,_,c),He.mode&1&&d1(_,le,c),c=He,z=le;var Ze=c.updateQueue;if(Ze===null){var tt=new Set;tt.add(z),c.updateQueue=tt}else Ze.add(z);break e}else{if((c&1)===0){d1(_,le,c),lg();break e}z=Error(r(426))}}else if(_r&&M.mode&1){var Br=f1(A);if(Br!==null){(Br.flags&65536)===0&&(Br.flags|=256),h1(Br,A,M,_,c),xp(xl(z,M));break e}}_=z=xl(z,M),un!==4&&(un=2),Zc===null?Zc=[_]:Zc.push(_),_=A;do{switch(_.tag){case 3:_.flags|=65536,c&=-c,_.lanes|=c;var Z=c1(_,z,c);$b(_,Z);break e;case 1:M=z;var U=_.type,re=_.stateNode;if((_.flags&128)===0&&(typeof U.getDerivedStateFromError=="function"||re!==null&&typeof re.componentDidCatch=="function"&&(Fa===null||!Fa.has(re)))){_.flags|=65536,c&=-c,_.lanes|=c;var Re=u1(_,M,c);$b(_,Re);break e}}_=_.return}while(_!==null)}V1(h)}catch(rt){c=rt,Qr===h&&h!==null&&(Qr=h=h.return);continue}break}while(!0)}function U1(){var o=Yd.current;return Yd.current=Wd,o===null?Wd:o}function lg(){(un===0||un===3||un===2)&&(un=4),jn===null||(vo&268435455)===0&&(Jd&268435455)===0||Ba(jn,$n)}function rf(o,c){var h=qt;qt|=2;var g=U1();(jn!==o||$n!==c)&&(Zi=null,wo(o,c));do try{TI();break}catch(w){B1(o,w)}while(!0);if(bp(),qt=h,Yd.current=g,Qr!==null)throw Error(r(261));return jn=null,$n=0,un}function TI(){for(;Qr!==null;)W1(Qr)}function II(){for(;Qr!==null&&!us();)W1(Qr)}function W1(o){var c=K1(o.alternate,o,Es);o.memoizedProps=o.pendingProps,c===null?V1(o):Qr=c,Zp.current=null}function V1(o){var c=o;do{var h=c.alternate;if(o=c.return,(c.flags&32768)===0){if(h=NI(h,c,Es),h!==null){Qr=h;return}}else{if(h=kI(h,c),h!==null){h.flags&=32767,Qr=h;return}if(o!==null)o.flags|=32768,o.subtreeFlags=0,o.deletions=null;else{un=6,Qr=null;return}}if(c=c.sibling,c!==null){Qr=c;return}Qr=c=o}while(c!==null);un===0&&(un=5)}function bo(o,c,h){var g=$e,w=Gs.transition;try{Gs.transition=null,$e=1,DI(o,c,h,g)}finally{Gs.transition=w,$e=g}return null}function DI(o,c,h,g){do Sl();while(La!==null);if((qt&6)!==0)throw Error(r(327));h=o.finishedWork;var w=o.finishedLanes;if(h===null)return null;if(o.finishedWork=null,o.finishedLanes=0,h===o.current)throw Error(r(177));o.callbackNode=null,o.callbackPriority=0;var _=h.lanes|h.childLanes;if(Mt(o,_),o===jn&&(Qr=jn=null,$n=0),(h.subtreeFlags&2064)===0&&(h.flags&2064)===0||Xd||(Xd=!0,G1(We,function(){return Sl(),null})),_=(h.flags&15990)!==0,(h.subtreeFlags&15990)!==0||_){_=Gs.transition,Gs.transition=null;var A=$e;$e=1;var M=qt;qt|=4,Zp.current=null,EI(o,h),D1(h,o),eI(lp),hd=!!op,lp=op=null,o.current=h,AI(h),G(),qt=M,$e=A,Gs.transition=_}else o.current=h;if(Xd&&(Xd=!1,La=o,Zd=w),_=o.pendingLanes,_===0&&(Fa=null),ln(h.stateNode),ps(o,fe()),c!==null)for(g=o.onRecoverableError,h=0;h<c.length;h++)w=c[h],g(w.value,{componentStack:w.stack,digest:w.digest});if(Qd)throw Qd=!1,o=rg,rg=null,o;return(Zd&1)!==0&&o.tag!==0&&Sl(),_=o.pendingLanes,(_&1)!==0?o===ng?eu++:(eu=0,ng=o):eu=0,Da(),null}function Sl(){if(La!==null){var o=gt(Zd),c=Gs.transition,h=$e;try{if(Gs.transition=null,$e=16>o?16:o,La===null)var g=!1;else{if(o=La,La=null,Zd=0,(qt&6)!==0)throw Error(r(331));var w=qt;for(qt|=4,Je=o.current;Je!==null;){var _=Je,A=_.child;if((Je.flags&16)!==0){var M=_.deletions;if(M!==null){for(var z=0;z<M.length;z++){var le=M[z];for(Je=le;Je!==null;){var Ce=Je;switch(Ce.tag){case 0:case 11:case 15:Qc(8,Ce,_)}var Oe=Ce.child;if(Oe!==null)Oe.return=Ce,Je=Oe;else for(;Je!==null;){Ce=Je;var ke=Ce.sibling,He=Ce.return;if(A1(Ce),Ce===le){Je=null;break}if(ke!==null){ke.return=He,Je=ke;break}Je=He}}}var Ze=_.alternate;if(Ze!==null){var tt=Ze.child;if(tt!==null){Ze.child=null;do{var Br=tt.sibling;tt.sibling=null,tt=Br}while(tt!==null)}}Je=_}}if((_.subtreeFlags&2064)!==0&&A!==null)A.return=_,Je=A;else e:for(;Je!==null;){if(_=Je,(_.flags&2048)!==0)switch(_.tag){case 0:case 11:case 15:Qc(9,_,_.return)}var Z=_.sibling;if(Z!==null){Z.return=_.return,Je=Z;break e}Je=_.return}}var U=o.current;for(Je=U;Je!==null;){A=Je;var re=A.child;if((A.subtreeFlags&2064)!==0&&re!==null)re.return=A,Je=re;else e:for(A=U;Je!==null;){if(M=Je,(M.flags&2048)!==0)try{switch(M.tag){case 0:case 11:case 15:Gd(9,M)}}catch(rt){$r(M,M.return,rt)}if(M===A){Je=null;break e}var Re=M.sibling;if(Re!==null){Re.return=M.return,Je=Re;break e}Je=M.return}}if(qt=w,Da(),Le&&typeof Le.onPostCommitFiberRoot=="function")try{Le.onPostCommitFiberRoot(bt,o)}catch{}g=!0}return g}finally{$e=h,Gs.transition=c}}return!1}function q1(o,c,h){c=xl(h,c),c=c1(o,c,1),o=$a(o,c,1),c=es(),o!==null&&(et(o,1,c),ps(o,c))}function $r(o,c,h){if(o.tag===3)q1(o,o,h);else for(;c!==null;){if(c.tag===3){q1(c,o,h);break}else if(c.tag===1){var g=c.stateNode;if(typeof c.type.getDerivedStateFromError=="function"||typeof g.componentDidCatch=="function"&&(Fa===null||!Fa.has(g))){o=xl(h,o),o=u1(c,o,1),c=$a(c,o,1),o=es(),c!==null&&(et(c,1,o),ps(c,o));break}}c=c.return}}function RI(o,c,h){var g=o.pingCache;g!==null&&g.delete(c),c=es(),o.pingedLanes|=o.suspendedLanes&h,jn===o&&($n&h)===h&&(un===4||un===3&&($n&130023424)===$n&&500>fe()-tg?wo(o,0):eg|=h),ps(o,c)}function H1(o,c){c===0&&((o.mode&1)===0?c=1:(c=Se,Se<<=1,(Se&130023424)===0&&(Se=4194304)));var h=es();o=Ji(o,c),o!==null&&(et(o,c,h),ps(o,h))}function $I(o){var c=o.memoizedState,h=0;c!==null&&(h=c.retryLane),H1(o,h)}function MI(o,c){var h=0;switch(o.tag){case 13:var g=o.stateNode,w=o.memoizedState;w!==null&&(h=w.retryLane);break;case 19:g=o.stateNode;break;default:throw Error(r(314))}g!==null&&g.delete(c),H1(o,h)}var K1;K1=function(o,c,h){if(o!==null)if(o.memoizedProps!==c.pendingProps||ds.current)hs=!0;else{if((o.lanes&h)===0&&(c.flags&128)===0)return hs=!1,_I(o,c,h);hs=(o.flags&131072)!==0}else hs=!1,_r&&(c.flags&1048576)!==0&&kb(c,Od,c.index);switch(c.lanes=0,c.tag){case 2:var g=c.type;Hd(o,c),o=c.pendingProps;var w=dl(c,Hn.current);yl(c,h),w=Tp(null,c,g,o,w,h);var _=Ip();return c.flags|=1,typeof w=="object"&&w!==null&&typeof w.render=="function"&&w.$$typeof===void 0?(c.tag=1,c.memoizedState=null,c.updateQueue=null,fs(g)?(_=!0,Ed(c)):_=!1,c.memoizedState=w.state!==null&&w.state!==void 0?w.state:null,Np(c),w.updater=Vd,c.stateNode=w,w._reactInternals=c,Lp(c,g,o,h),c=Wp(null,c,g,!0,_,h)):(c.tag=0,_r&&_&&pp(c),Zn(null,c,w,h),c=c.child),c;case 16:g=c.elementType;e:{switch(Hd(o,c),o=c.pendingProps,w=g._init,g=w(g._payload),c.type=g,w=c.tag=LI(g),o=ui(g,o),w){case 0:c=Up(null,c,g,o,h);break e;case 1:c=x1(null,c,g,o,h);break e;case 11:c=m1(null,c,g,o,h);break e;case 14:c=p1(null,c,g,ui(g.type,o),h);break e}throw Error(r(306,g,""))}return c;case 0:return g=c.type,w=c.pendingProps,w=c.elementType===g?w:ui(g,w),Up(o,c,g,w,h);case 1:return g=c.type,w=c.pendingProps,w=c.elementType===g?w:ui(g,w),x1(o,c,g,w,h);case 3:e:{if(w1(c),o===null)throw Error(r(387));g=c.pendingProps,_=c.memoizedState,w=_.element,Rb(o,c),Md(c,g,null,h);var A=c.memoizedState;if(g=A.element,_.isDehydrated)if(_={element:g,isDehydrated:!1,cache:A.cache,pendingSuspenseBoundaries:A.pendingSuspenseBoundaries,transitions:A.transitions},c.updateQueue.baseState=_,c.memoizedState=_,c.flags&256){w=xl(Error(r(423)),c),c=b1(o,c,g,h,w);break e}else if(g!==w){w=xl(Error(r(424)),c),c=b1(o,c,g,h,w);break e}else for(Cs=Oa(c.stateNode.containerInfo.firstChild),ks=c,_r=!0,ci=null,h=Ib(c,null,g,h),c.child=h;h;)h.flags=h.flags&-3|4096,h=h.sibling;else{if(ml(),g===w){c=Xi(o,c,h);break e}Zn(o,c,g,h)}c=c.child}return c;case 5:return Fb(c),o===null&&vp(c),g=c.type,w=c.pendingProps,_=o!==null?o.memoizedProps:null,A=w.children,cp(g,w)?A=null:_!==null&&cp(g,_)&&(c.flags|=32),v1(o,c),Zn(o,c,A,h),c.child;case 6:return o===null&&vp(c),null;case 13:return j1(o,c,h);case 4:return kp(c,c.stateNode.containerInfo),g=c.pendingProps,o===null?c.child=pl(c,null,g,h):Zn(o,c,g,h),c.child;case 11:return g=c.type,w=c.pendingProps,w=c.elementType===g?w:ui(g,w),m1(o,c,g,w,h);case 7:return Zn(o,c,c.pendingProps,h),c.child;case 8:return Zn(o,c,c.pendingProps.children,h),c.child;case 12:return Zn(o,c,c.pendingProps.children,h),c.child;case 10:e:{if(g=c.type._context,w=c.pendingProps,_=c.memoizedProps,A=w.value,lr(Dd,g._currentValue),g._currentValue=A,_!==null)if(li(_.value,A)){if(_.children===w.children&&!ds.current){c=Xi(o,c,h);break e}}else for(_=c.child,_!==null&&(_.return=c);_!==null;){var M=_.dependencies;if(M!==null){A=_.child;for(var z=M.firstContext;z!==null;){if(z.context===g){if(_.tag===1){z=Qi(-1,h&-h),z.tag=2;var le=_.updateQueue;if(le!==null){le=le.shared;var Ce=le.pending;Ce===null?z.next=z:(z.next=Ce.next,Ce.next=z),le.pending=z}}_.lanes|=h,z=_.alternate,z!==null&&(z.lanes|=h),Sp(_.return,h,c),M.lanes|=h;break}z=z.next}}else if(_.tag===10)A=_.type===c.type?null:_.child;else if(_.tag===18){if(A=_.return,A===null)throw Error(r(341));A.lanes|=h,M=A.alternate,M!==null&&(M.lanes|=h),Sp(A,h,c),A=_.sibling}else A=_.child;if(A!==null)A.return=_;else for(A=_;A!==null;){if(A===c){A=null;break}if(_=A.sibling,_!==null){_.return=A.return,A=_;break}A=A.return}_=A}Zn(o,c,w.children,h),c=c.child}return c;case 9:return w=c.type,g=c.pendingProps.children,yl(c,h),w=Hs(w),g=g(w),c.flags|=1,Zn(o,c,g,h),c.child;case 14:return g=c.type,w=ui(g,c.pendingProps),w=ui(g.type,w),p1(o,c,g,w,h);case 15:return g1(o,c,c.type,c.pendingProps,h);case 17:return g=c.type,w=c.pendingProps,w=c.elementType===g?w:ui(g,w),Hd(o,c),c.tag=1,fs(g)?(o=!0,Ed(c)):o=!1,yl(c,h),o1(c,g,w),Lp(c,g,w,h),Wp(null,c,g,!0,o,h);case 19:return _1(o,c,h);case 22:return y1(o,c,h)}throw Error(r(156,c.tag))};function G1(o,c){return In(o,c)}function FI(o,c,h,g){this.tag=o,this.key=h,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=c,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=g,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ys(o,c,h,g){return new FI(o,c,h,g)}function cg(o){return o=o.prototype,!(!o||!o.isReactComponent)}function LI(o){if(typeof o=="function")return cg(o)?1:0;if(o!=null){if(o=o.$$typeof,o===Q)return 11;if(o===me)return 14}return 2}function Ua(o,c){var h=o.alternate;return h===null?(h=Ys(o.tag,c,o.key,o.mode),h.elementType=o.elementType,h.type=o.type,h.stateNode=o.stateNode,h.alternate=o,o.alternate=h):(h.pendingProps=c,h.type=o.type,h.flags=0,h.subtreeFlags=0,h.deletions=null),h.flags=o.flags&14680064,h.childLanes=o.childLanes,h.lanes=o.lanes,h.child=o.child,h.memoizedProps=o.memoizedProps,h.memoizedState=o.memoizedState,h.updateQueue=o.updateQueue,c=o.dependencies,h.dependencies=c===null?null:{lanes:c.lanes,firstContext:c.firstContext},h.sibling=o.sibling,h.index=o.index,h.ref=o.ref,h}function nf(o,c,h,g,w,_){var A=2;if(g=o,typeof o=="function")cg(o)&&(A=1);else if(typeof o=="string")A=5;else e:switch(o){case R:return jo(h.children,w,_,c);case q:A=8,w|=8;break;case F:return o=Ys(12,h,c,w|2),o.elementType=F,o.lanes=_,o;case ae:return o=Ys(13,h,c,w),o.elementType=ae,o.lanes=_,o;case ne:return o=Ys(19,h,c,w),o.elementType=ne,o.lanes=_,o;case te:return sf(h,w,_,c);default:if(typeof o=="object"&&o!==null)switch(o.$$typeof){case V:A=10;break e;case B:A=9;break e;case Q:A=11;break e;case me:A=14;break e;case K:A=16,g=null;break e}throw Error(r(130,o==null?o:typeof o,""))}return c=Ys(A,h,c,w),c.elementType=o,c.type=g,c.lanes=_,c}function jo(o,c,h,g){return o=Ys(7,o,g,c),o.lanes=h,o}function sf(o,c,h,g){return o=Ys(22,o,g,c),o.elementType=te,o.lanes=h,o.stateNode={isHidden:!1},o}function ug(o,c,h){return o=Ys(6,o,null,c),o.lanes=h,o}function dg(o,c,h){return c=Ys(4,o.children!==null?o.children:[],o.key,c),c.lanes=h,c.stateNode={containerInfo:o.containerInfo,pendingChildren:null,implementation:o.implementation},c}function zI(o,c,h,g,w){this.tag=c,this.containerInfo=o,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Dt(0),this.expirationTimes=Dt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Dt(0),this.identifierPrefix=g,this.onRecoverableError=w,this.mutableSourceEagerHydrationData=null}function fg(o,c,h,g,w,_,A,M,z){return o=new zI(o,c,h,M,z),c===1?(c=1,_===!0&&(c|=8)):c=0,_=Ys(3,null,null,c),o.current=_,_.stateNode=o,_.memoizedState={element:g,isDehydrated:h,cache:null,transitions:null,pendingSuspenseBoundaries:null},Np(_),o}function BI(o,c,h){var g=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:P,key:g==null?null:""+g,children:o,containerInfo:c,implementation:h}}function Y1(o){if(!o)return Ia;o=o._reactInternals;e:{if(wn(o)!==o||o.tag!==1)throw Error(r(170));var c=o;do{switch(c.tag){case 3:c=c.stateNode.context;break e;case 1:if(fs(c.type)){c=c.stateNode.__reactInternalMemoizedMergedChildContext;break e}}c=c.return}while(c!==null);throw Error(r(171))}if(o.tag===1){var h=o.type;if(fs(h))return Sb(o,h,c)}return c}function J1(o,c,h,g,w,_,A,M,z){return o=fg(h,g,!0,o,w,_,A,M,z),o.context=Y1(null),h=o.current,g=es(),w=za(h),_=Qi(g,w),_.callback=c??null,$a(h,_,w),o.current.lanes=w,et(o,w,g),ps(o,g),o}function af(o,c,h,g){var w=c.current,_=es(),A=za(w);return h=Y1(h),c.context===null?c.context=h:c.pendingContext=h,c=Qi(_,A),c.payload={element:o},g=g===void 0?null:g,g!==null&&(c.callback=g),o=$a(w,c,A),o!==null&&(hi(o,w,A,_),$d(o,w,A)),A}function of(o){if(o=o.current,!o.child)return null;switch(o.child.tag){case 5:return o.child.stateNode;default:return o.child.stateNode}}function Q1(o,c){if(o=o.memoizedState,o!==null&&o.dehydrated!==null){var h=o.retryLane;o.retryLane=h!==0&&h<c?h:c}}function hg(o,c){Q1(o,c),(o=o.alternate)&&Q1(o,c)}function UI(){return null}var X1=typeof reportError=="function"?reportError:function(o){console.error(o)};function mg(o){this._internalRoot=o}lf.prototype.render=mg.prototype.render=function(o){var c=this._internalRoot;if(c===null)throw Error(r(409));af(o,c,null,null)},lf.prototype.unmount=mg.prototype.unmount=function(){var o=this._internalRoot;if(o!==null){this._internalRoot=null;var c=o.containerInfo;xo(function(){af(null,o,null,null)}),c[Hi]=null}};function lf(o){this._internalRoot=o}lf.prototype.unstable_scheduleHydration=function(o){if(o){var c=ht();o={blockedOn:null,target:o,priority:c};for(var h=0;h<W.length&&c!==0&&c<W[h].priority;h++);W.splice(h,0,o),h===0&&tl(o)}};function pg(o){return!(!o||o.nodeType!==1&&o.nodeType!==9&&o.nodeType!==11)}function cf(o){return!(!o||o.nodeType!==1&&o.nodeType!==9&&o.nodeType!==11&&(o.nodeType!==8||o.nodeValue!==" react-mount-point-unstable "))}function Z1(){}function WI(o,c,h,g,w){if(w){if(typeof g=="function"){var _=g;g=function(){var le=of(A);_.call(le)}}var A=J1(c,g,o,0,null,!1,!1,"",Z1);return o._reactRootContainer=A,o[Hi]=A.current,Fc(o.nodeType===8?o.parentNode:o),xo(),A}for(;w=o.lastChild;)o.removeChild(w);if(typeof g=="function"){var M=g;g=function(){var le=of(z);M.call(le)}}var z=fg(o,0,!1,null,null,!1,!1,"",Z1);return o._reactRootContainer=z,o[Hi]=z.current,Fc(o.nodeType===8?o.parentNode:o),xo(function(){af(c,z,h,g)}),z}function uf(o,c,h,g,w){var _=h._reactRootContainer;if(_){var A=_;if(typeof w=="function"){var M=w;w=function(){var z=of(A);M.call(z)}}af(c,A,o,w)}else A=WI(h,c,o,w,g);return of(A)}yt=function(o){switch(o.tag){case 3:var c=o.stateNode;if(c.current.memoizedState.isDehydrated){var h=De(c.pendingLanes);h!==0&&(At(c,h|1),ps(c,fe()),(qt&6)===0&&(jl=fe()+500,Da()))}break;case 13:xo(function(){var g=Ji(o,1);if(g!==null){var w=es();hi(g,o,1,w)}}),hg(o,1)}},Pt=function(o){if(o.tag===13){var c=Ji(o,134217728);if(c!==null){var h=es();hi(c,o,134217728,h)}hg(o,134217728)}},Ut=function(o){if(o.tag===13){var c=za(o),h=Ji(o,c);if(h!==null){var g=es();hi(h,o,c,g)}hg(o,c)}},ht=function(){return $e},Vt=function(o,c){var h=$e;try{return $e=o,c()}finally{$e=h}},Sr=function(o,c,h){switch(c){case"input":if(Ct(o,h),c=h.name,h.type==="radio"&&c!=null){for(h=o;h.parentNode;)h=h.parentNode;for(h=h.querySelectorAll("input[name="+JSON.stringify(""+c)+'][type="radio"]'),c=0;c<h.length;c++){var g=h[c];if(g!==o&&g.form===o.form){var w=kd(g);if(!w)throw Error(r(90));ee(g),Ct(g,w)}}}break;case"textarea":we(o,h);break;case"select":c=h.value,c!=null&&Y(o,!!h.multiple,c,!1)}},hr=ag,Cr=xo;var VI={usingClientEntryPoint:!1,Events:[Bc,cl,kd,ls,Qt,ag]},tu={findFiberByHostInstance:uo,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},qI={bundleType:tu.bundleType,version:tu.version,rendererPackageName:tu.rendererPackageName,rendererConfig:tu.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:T.ReactCurrentDispatcher,findHostInstanceByFiber:function(o){return o=ar(o),o===null?null:o.stateNode},findFiberByHostInstance:tu.findFiberByHostInstance||UI,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var df=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!df.isDisabled&&df.supportsFiber)try{bt=df.inject(qI),Le=df}catch{}}return gs.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=VI,gs.createPortal=function(o,c){var h=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!pg(c))throw Error(r(200));return BI(o,c,null,h)},gs.createRoot=function(o,c){if(!pg(o))throw Error(r(299));var h=!1,g="",w=X1;return c!=null&&(c.unstable_strictMode===!0&&(h=!0),c.identifierPrefix!==void 0&&(g=c.identifierPrefix),c.onRecoverableError!==void 0&&(w=c.onRecoverableError)),c=fg(o,1,!1,null,null,h,!1,g,w),o[Hi]=c.current,Fc(o.nodeType===8?o.parentNode:o),new mg(c)},gs.findDOMNode=function(o){if(o==null)return null;if(o.nodeType===1)return o;var c=o._reactInternals;if(c===void 0)throw typeof o.render=="function"?Error(r(188)):(o=Object.keys(o).join(","),Error(r(268,o)));return o=ar(c),o=o===null?null:o.stateNode,o},gs.flushSync=function(o){return xo(o)},gs.hydrate=function(o,c,h){if(!cf(c))throw Error(r(200));return uf(null,o,c,!0,h)},gs.hydrateRoot=function(o,c,h){if(!pg(o))throw Error(r(405));var g=h!=null&&h.hydratedSources||null,w=!1,_="",A=X1;if(h!=null&&(h.unstable_strictMode===!0&&(w=!0),h.identifierPrefix!==void 0&&(_=h.identifierPrefix),h.onRecoverableError!==void 0&&(A=h.onRecoverableError)),c=J1(c,null,o,1,h??null,w,!1,_,A),o[Hi]=c.current,Fc(o),g)for(o=0;o<g.length;o++)h=g[o],w=h._getVersion,w=w(h._source),c.mutableSourceEagerHydrationData==null?c.mutableSourceEagerHydrationData=[h,w]:c.mutableSourceEagerHydrationData.push(h,w);return new lf(c)},gs.render=function(o,c,h){if(!cf(c))throw Error(r(200));return uf(null,o,c,!1,h)},gs.unmountComponentAtNode=function(o){if(!cf(o))throw Error(r(40));return o._reactRootContainer?(xo(function(){uf(null,null,o,!1,function(){o._reactRootContainer=null,o[Hi]=null})}),!0):!1},gs.unstable_batchedUpdates=ag,gs.unstable_renderSubtreeIntoContainer=function(o,c,h,g){if(!cf(h))throw Error(r(200));if(o==null||o._reactInternals===void 0)throw Error(r(38));return uf(o,c,h,!1,g)},gs.version="18.3.1-next-f1338f8080-20240426",gs}var oj;function J2(){if(oj)return xg.exports;oj=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),xg.exports=nD(),xg.exports}var lj;function sD(){if(lj)return ff;lj=1;var e=J2();return ff.createRoot=e.createRoot,ff.hydrateRoot=e.hydrateRoot,ff}var iD=sD();const aD=_i(iD);/**
 * react-router v7.9.4
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var cj="popstate";function oD(e={}){function t(n,s){let{pathname:i,search:l,hash:u}=n.location;return bv("",{pathname:i,search:l,hash:u},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function r(n,s){return typeof s=="string"?s:Cu(s)}return cD(t,r,null,e)}function kr(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function ti(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function lD(){return Math.random().toString(36).substring(2,10)}function uj(e,t){return{usr:e.state,key:e.key,idx:t}}function bv(e,t,r=null,n){return{pathname:typeof e=="string"?e:e.pathname,search:"",hash:"",...typeof t=="string"?hc(t):t,state:r,key:t&&t.key||n||lD()}}function Cu({pathname:e="/",search:t="",hash:r=""}){return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function hc(e){let t={};if(e){let r=e.indexOf("#");r>=0&&(t.hash=e.substring(r),e=e.substring(0,r));let n=e.indexOf("?");n>=0&&(t.search=e.substring(n),e=e.substring(0,n)),e&&(t.pathname=e)}return t}function cD(e,t,r,n={}){let{window:s=document.defaultView,v5Compat:i=!1}=n,l=s.history,u="POP",d=null,m=f();m==null&&(m=0,l.replaceState({...l.state,idx:m},""));function f(){return(l.state||{idx:null}).idx}function p(){u="POP";let S=f(),N=S==null?null:S-m;m=S,d&&d({action:u,location:b.location,delta:N})}function y(S,N){u="PUSH";let E=bv(b.location,S,N);m=f()+1;let k=uj(E,m),T=b.createHref(E);try{l.pushState(k,"",T)}catch(O){if(O instanceof DOMException&&O.name==="DataCloneError")throw O;s.location.assign(T)}i&&d&&d({action:u,location:b.location,delta:1})}function x(S,N){u="REPLACE";let E=bv(b.location,S,N);m=f();let k=uj(E,m),T=b.createHref(E);l.replaceState(k,"",T),i&&d&&d({action:u,location:b.location,delta:0})}function j(S){return uD(S)}let b={get action(){return u},get location(){return e(s,l)},listen(S){if(d)throw new Error("A history only accepts one active listener");return s.addEventListener(cj,p),d=S,()=>{s.removeEventListener(cj,p),d=null}},createHref(S){return t(s,S)},createURL:j,encodeLocation(S){let N=j(S);return{pathname:N.pathname,search:N.search,hash:N.hash}},push:y,replace:x,go(S){return l.go(S)}};return b}function uD(e,t=!1){let r="http://localhost";typeof window<"u"&&(r=window.location.origin!=="null"?window.location.origin:window.location.href),kr(r,"No window.location.(origin|href) available to create URL");let n=typeof e=="string"?e:Cu(e);return n=n.replace(/ $/,"%20"),!t&&n.startsWith("//")&&(n=r+n),new URL(n,r)}function Q2(e,t,r="/"){return dD(e,t,r,!1)}function dD(e,t,r,n){let s=typeof t=="string"?hc(t):t,i=da(s.pathname||"/",r);if(i==null)return null;let l=X2(e);fD(l);let u=null;for(let d=0;u==null&&d<l.length;++d){let m=SD(i);u=bD(l[d],m,n)}return u}function X2(e,t=[],r=[],n="",s=!1){let i=(l,u,d=s,m)=>{let f={relativePath:m===void 0?l.path||"":m,caseSensitive:l.caseSensitive===!0,childrenIndex:u,route:l};if(f.relativePath.startsWith("/")){if(!f.relativePath.startsWith(n)&&d)return;kr(f.relativePath.startsWith(n),`Absolute route path "${f.relativePath}" nested under path "${n}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),f.relativePath=f.relativePath.slice(n.length)}let p=oa([n,f.relativePath]),y=r.concat(f);l.children&&l.children.length>0&&(kr(l.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${p}".`),X2(l.children,t,y,p,d)),!(l.path==null&&!l.index)&&t.push({path:p,score:xD(p,l.index),routesMeta:y})};return e.forEach((l,u)=>{var d;if(l.path===""||!((d=l.path)!=null&&d.includes("?")))i(l,u);else for(let m of Z2(l.path))i(l,u,!0,m)}),t}function Z2(e){let t=e.split("/");if(t.length===0)return[];let[r,...n]=t,s=r.endsWith("?"),i=r.replace(/\?$/,"");if(n.length===0)return s?[i,""]:[i];let l=Z2(n.join("/")),u=[];return u.push(...l.map(d=>d===""?i:[i,d].join("/"))),s&&u.push(...l),u.map(d=>e.startsWith("/")&&d===""?"/":d)}function fD(e){e.sort((t,r)=>t.score!==r.score?r.score-t.score:wD(t.routesMeta.map(n=>n.childrenIndex),r.routesMeta.map(n=>n.childrenIndex)))}var hD=/^:[\w-]+$/,mD=3,pD=2,gD=1,yD=10,vD=-2,dj=e=>e==="*";function xD(e,t){let r=e.split("/"),n=r.length;return r.some(dj)&&(n+=vD),t&&(n+=pD),r.filter(s=>!dj(s)).reduce((s,i)=>s+(hD.test(i)?mD:i===""?gD:yD),n)}function wD(e,t){return e.length===t.length&&e.slice(0,-1).every((n,s)=>n===t[s])?e[e.length-1]-t[t.length-1]:0}function bD(e,t,r=!1){let{routesMeta:n}=e,s={},i="/",l=[];for(let u=0;u<n.length;++u){let d=n[u],m=u===n.length-1,f=i==="/"?t:t.slice(i.length)||"/",p=Jf({path:d.relativePath,caseSensitive:d.caseSensitive,end:m},f),y=d.route;if(!p&&m&&r&&!n[n.length-1].route.index&&(p=Jf({path:d.relativePath,caseSensitive:d.caseSensitive,end:!1},f)),!p)return null;Object.assign(s,p.params),l.push({params:s,pathname:oa([i,p.pathname]),pathnameBase:CD(oa([i,p.pathnameBase])),route:y}),p.pathnameBase!=="/"&&(i=oa([i,p.pathnameBase]))}return l}function Jf(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[r,n]=jD(e.path,e.caseSensitive,e.end),s=t.match(r);if(!s)return null;let i=s[0],l=i.replace(/(.)\/+$/,"$1"),u=s.slice(1);return{params:n.reduce((m,{paramName:f,isOptional:p},y)=>{if(f==="*"){let j=u[y]||"";l=i.slice(0,i.length-j.length).replace(/(.)\/+$/,"$1")}const x=u[y];return p&&!x?m[f]=void 0:m[f]=(x||"").replace(/%2F/g,"/"),m},{}),pathname:i,pathnameBase:l,pattern:e}}function jD(e,t=!1,r=!0){ti(e==="*"||!e.endsWith("*")||e.endsWith("/*"),`Route path "${e}" will be treated as if it were "${e.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${e.replace(/\*$/,"/*")}".`);let n=[],s="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(l,u,d)=>(n.push({paramName:u,isOptional:d!=null}),d?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return e.endsWith("*")?(n.push({paramName:"*"}),s+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?s+="\\/*$":e!==""&&e!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,t?void 0:"i"),n]}function SD(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return ti(!1,`The URL path "${e}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${t}).`),e}}function da(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let r=t.endsWith("/")?t.length-1:t.length,n=e.charAt(r);return n&&n!=="/"?null:e.slice(r)||"/"}function _D(e,t="/"){let{pathname:r,search:n="",hash:s=""}=typeof e=="string"?hc(e):e;return{pathname:r?r.startsWith("/")?r:ND(r,t):t,search:ED(n),hash:AD(s)}}function ND(e,t){let r=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(s=>{s===".."?r.length>1&&r.pop():s!=="."&&r.push(s)}),r.length>1?r.join("/"):"/"}function jg(e,t,r,n){return`Cannot include a '${e}' character in a manually specified \`to.${t}\` field [${JSON.stringify(n)}].  Please separate it out to the \`to.${r}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function kD(e){return e.filter((t,r)=>r===0||t.route.path&&t.route.path.length>0)}function z0(e){let t=kD(e);return t.map((r,n)=>n===t.length-1?r.pathname:r.pathnameBase)}function B0(e,t,r,n=!1){let s;typeof e=="string"?s=hc(e):(s={...e},kr(!s.pathname||!s.pathname.includes("?"),jg("?","pathname","search",s)),kr(!s.pathname||!s.pathname.includes("#"),jg("#","pathname","hash",s)),kr(!s.search||!s.search.includes("#"),jg("#","search","hash",s)));let i=e===""||s.pathname==="",l=i?"/":s.pathname,u;if(l==null)u=r;else{let p=t.length-1;if(!n&&l.startsWith("..")){let y=l.split("/");for(;y[0]==="..";)y.shift(),p-=1;s.pathname=y.join("/")}u=p>=0?t[p]:"/"}let d=_D(s,u),m=l&&l!=="/"&&l.endsWith("/"),f=(i||l===".")&&r.endsWith("/");return!d.pathname.endsWith("/")&&(m||f)&&(d.pathname+="/"),d}var oa=e=>e.join("/").replace(/\/\/+/g,"/"),CD=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),ED=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,AD=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function PD(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}var eC=["POST","PUT","PATCH","DELETE"];new Set(eC);var OD=["GET",...eC];new Set(OD);var mc=v.createContext(null);mc.displayName="DataRouter";var Jh=v.createContext(null);Jh.displayName="DataRouterState";v.createContext(!1);var tC=v.createContext({isTransitioning:!1});tC.displayName="ViewTransition";var TD=v.createContext(new Map);TD.displayName="Fetchers";var ID=v.createContext(null);ID.displayName="Await";var Ni=v.createContext(null);Ni.displayName="Navigation";var Vu=v.createContext(null);Vu.displayName="Location";var Bi=v.createContext({outlet:null,matches:[],isDataRoute:!1});Bi.displayName="Route";var U0=v.createContext(null);U0.displayName="RouteError";function DD(e,{relative:t}={}){kr(pc(),"useHref() may be used only in the context of a <Router> component.");let{basename:r,navigator:n}=v.useContext(Ni),{hash:s,pathname:i,search:l}=qu(e,{relative:t}),u=i;return r!=="/"&&(u=i==="/"?r:oa([r,i])),n.createHref({pathname:u,search:l,hash:s})}function pc(){return v.useContext(Vu)!=null}function ja(){return kr(pc(),"useLocation() may be used only in the context of a <Router> component."),v.useContext(Vu).location}var rC="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function nC(e){v.useContext(Ni).static||v.useLayoutEffect(e)}function Ss(){let{isDataRoute:e}=v.useContext(Bi);return e?KD():RD()}function RD(){kr(pc(),"useNavigate() may be used only in the context of a <Router> component.");let e=v.useContext(mc),{basename:t,navigator:r}=v.useContext(Ni),{matches:n}=v.useContext(Bi),{pathname:s}=ja(),i=JSON.stringify(z0(n)),l=v.useRef(!1);return nC(()=>{l.current=!0}),v.useCallback((d,m={})=>{if(ti(l.current,rC),!l.current)return;if(typeof d=="number"){r.go(d);return}let f=B0(d,JSON.parse(i),s,m.relative==="path");e==null&&t!=="/"&&(f.pathname=f.pathname==="/"?t:oa([t,f.pathname])),(m.replace?r.replace:r.push)(f,m.state,m)},[t,r,i,s,e])}v.createContext(null);function qu(e,{relative:t}={}){let{matches:r}=v.useContext(Bi),{pathname:n}=ja(),s=JSON.stringify(z0(r));return v.useMemo(()=>B0(e,JSON.parse(s),n,t==="path"),[e,s,n,t])}function $D(e,t){return sC(e,t)}function sC(e,t,r,n,s){var E;kr(pc(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:i}=v.useContext(Ni),{matches:l}=v.useContext(Bi),u=l[l.length-1],d=u?u.params:{},m=u?u.pathname:"/",f=u?u.pathnameBase:"/",p=u&&u.route;{let k=p&&p.path||"";iC(m,!p||k.endsWith("*")||k.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${m}" (under <Route path="${k}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${k}"> to <Route path="${k==="/"?"*":`${k}/*`}">.`)}let y=ja(),x;if(t){let k=typeof t=="string"?hc(t):t;kr(f==="/"||((E=k.pathname)==null?void 0:E.startsWith(f)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${f}" but pathname "${k.pathname}" was given in the \`location\` prop.`),x=k}else x=y;let j=x.pathname||"/",b=j;if(f!=="/"){let k=f.replace(/^\//,"").split("/");b="/"+j.replace(/^\//,"").split("/").slice(k.length).join("/")}let S=Q2(e,{pathname:b});ti(p||S!=null,`No routes matched location "${x.pathname}${x.search}${x.hash}" `),ti(S==null||S[S.length-1].route.element!==void 0||S[S.length-1].route.Component!==void 0||S[S.length-1].route.lazy!==void 0,`Matched leaf route at location "${x.pathname}${x.search}${x.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let N=BD(S&&S.map(k=>Object.assign({},k,{params:Object.assign({},d,k.params),pathname:oa([f,i.encodeLocation?i.encodeLocation(k.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:k.pathname]),pathnameBase:k.pathnameBase==="/"?f:oa([f,i.encodeLocation?i.encodeLocation(k.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:k.pathnameBase])})),l,r,n,s);return t&&N?v.createElement(Vu.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...x},navigationType:"POP"}},N):N}function MD(){let e=HD(),t=PD(e)?`${e.status} ${e.statusText}`:e instanceof Error?e.message:JSON.stringify(e),r=e instanceof Error?e.stack:null,n="rgba(200,200,200, 0.5)",s={padding:"0.5rem",backgroundColor:n},i={padding:"2px 4px",backgroundColor:n},l=null;return console.error("Error handled by React Router default ErrorBoundary:",e),l=v.createElement(v.Fragment,null,v.createElement("p",null," Hey developer "),v.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",v.createElement("code",{style:i},"ErrorBoundary")," or"," ",v.createElement("code",{style:i},"errorElement")," prop on your route.")),v.createElement(v.Fragment,null,v.createElement("h2",null,"Unexpected Application Error!"),v.createElement("h3",{style:{fontStyle:"italic"}},t),r?v.createElement("pre",{style:s},r):null,l)}var FD=v.createElement(MD,null),LD=class extends v.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){this.props.unstable_onError?this.props.unstable_onError(e,t):console.error("React Router caught the following error during render",e)}render(){return this.state.error!==void 0?v.createElement(Bi.Provider,{value:this.props.routeContext},v.createElement(U0.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function zD({routeContext:e,match:t,children:r}){let n=v.useContext(mc);return n&&n.static&&n.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(n.staticContext._deepestRenderedBoundaryId=t.route.id),v.createElement(Bi.Provider,{value:e},r)}function BD(e,t=[],r=null,n=null,s=null){if(e==null){if(!r)return null;if(r.errors)e=r.matches;else if(t.length===0&&!r.initialized&&r.matches.length>0)e=r.matches;else return null}let i=e,l=r==null?void 0:r.errors;if(l!=null){let m=i.findIndex(f=>f.route.id&&(l==null?void 0:l[f.route.id])!==void 0);kr(m>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(l).join(",")}`),i=i.slice(0,Math.min(i.length,m+1))}let u=!1,d=-1;if(r)for(let m=0;m<i.length;m++){let f=i[m];if((f.route.HydrateFallback||f.route.hydrateFallbackElement)&&(d=m),f.route.id){let{loaderData:p,errors:y}=r,x=f.route.loader&&!p.hasOwnProperty(f.route.id)&&(!y||y[f.route.id]===void 0);if(f.route.lazy||x){u=!0,d>=0?i=i.slice(0,d+1):i=[i[0]];break}}}return i.reduceRight((m,f,p)=>{let y,x=!1,j=null,b=null;r&&(y=l&&f.route.id?l[f.route.id]:void 0,j=f.route.errorElement||FD,u&&(d<0&&p===0?(iC("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),x=!0,b=null):d===p&&(x=!0,b=f.route.hydrateFallbackElement||null)));let S=t.concat(i.slice(0,p+1)),N=()=>{let E;return y?E=j:x?E=b:f.route.Component?E=v.createElement(f.route.Component,null):f.route.element?E=f.route.element:E=m,v.createElement(zD,{match:f,routeContext:{outlet:m,matches:S,isDataRoute:r!=null},children:E})};return r&&(f.route.ErrorBoundary||f.route.errorElement||p===0)?v.createElement(LD,{location:r.location,revalidation:r.revalidation,component:j,error:y,children:N(),routeContext:{outlet:null,matches:S,isDataRoute:!0},unstable_onError:n}):N()},null)}function W0(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function UD(e){let t=v.useContext(mc);return kr(t,W0(e)),t}function WD(e){let t=v.useContext(Jh);return kr(t,W0(e)),t}function VD(e){let t=v.useContext(Bi);return kr(t,W0(e)),t}function V0(e){let t=VD(e),r=t.matches[t.matches.length-1];return kr(r.route.id,`${e} can only be used on routes that contain a unique "id"`),r.route.id}function qD(){return V0("useRouteId")}function HD(){var n;let e=v.useContext(U0),t=WD("useRouteError"),r=V0("useRouteError");return e!==void 0?e:(n=t.errors)==null?void 0:n[r]}function KD(){let{router:e}=UD("useNavigate"),t=V0("useNavigate"),r=v.useRef(!1);return nC(()=>{r.current=!0}),v.useCallback(async(s,i={})=>{ti(r.current,rC),r.current&&(typeof s=="number"?e.navigate(s):await e.navigate(s,{fromRouteId:t,...i}))},[e,t])}var fj={};function iC(e,t,r){!t&&!fj[e]&&(fj[e]=!0,ti(!1,r))}v.memo(GD);function GD({routes:e,future:t,state:r,unstable_onError:n}){return sC(e,void 0,r,n,t)}function YD({to:e,replace:t,state:r,relative:n}){kr(pc(),"<Navigate> may be used only in the context of a <Router> component.");let{static:s}=v.useContext(Ni);ti(!s,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:i}=v.useContext(Bi),{pathname:l}=ja(),u=Ss(),d=B0(e,z0(i),l,n==="path"),m=JSON.stringify(d);return v.useEffect(()=>{u(JSON.parse(m),{replace:t,state:r,relative:n})},[u,m,n,t,r]),null}function As(e){kr(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function JD({basename:e="/",children:t=null,location:r,navigationType:n="POP",navigator:s,static:i=!1}){kr(!pc(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let l=e.replace(/^\/*/,"/"),u=v.useMemo(()=>({basename:l,navigator:s,static:i,future:{}}),[l,s,i]);typeof r=="string"&&(r=hc(r));let{pathname:d="/",search:m="",hash:f="",state:p=null,key:y="default"}=r,x=v.useMemo(()=>{let j=da(d,l);return j==null?null:{location:{pathname:j,search:m,hash:f,state:p,key:y},navigationType:n}},[l,d,m,f,p,y,n]);return ti(x!=null,`<Router basename="${l}"> is not able to match the URL "${d}${m}${f}" because it does not start with the basename, so the <Router> won't render anything.`),x==null?null:v.createElement(Ni.Provider,{value:u},v.createElement(Vu.Provider,{children:t,value:x}))}function QD({children:e,location:t}){return $D(jv(e),t)}function jv(e,t=[]){let r=[];return v.Children.forEach(e,(n,s)=>{if(!v.isValidElement(n))return;let i=[...t,s];if(n.type===v.Fragment){r.push.apply(r,jv(n.props.children,i));return}kr(n.type===As,`[${typeof n.type=="string"?n.type:n.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),kr(!n.props.index||!n.props.children,"An index route cannot have child routes.");let l={id:n.props.id||i.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,middleware:n.props.middleware,loader:n.props.loader,action:n.props.action,hydrateFallbackElement:n.props.hydrateFallbackElement,HydrateFallback:n.props.HydrateFallback,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.hasErrorBoundary===!0||n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(l.children=jv(n.props.children,i)),r.push(l)}),r}var $f="get",Mf="application/x-www-form-urlencoded";function Qh(e){return e!=null&&typeof e.tagName=="string"}function XD(e){return Qh(e)&&e.tagName.toLowerCase()==="button"}function ZD(e){return Qh(e)&&e.tagName.toLowerCase()==="form"}function e5(e){return Qh(e)&&e.tagName.toLowerCase()==="input"}function t5(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function r5(e,t){return e.button===0&&(!t||t==="_self")&&!t5(e)}function Sv(e=""){return new URLSearchParams(typeof e=="string"||Array.isArray(e)||e instanceof URLSearchParams?e:Object.keys(e).reduce((t,r)=>{let n=e[r];return t.concat(Array.isArray(n)?n.map(s=>[r,s]):[[r,n]])},[]))}function n5(e,t){let r=Sv(e);return t&&t.forEach((n,s)=>{r.has(s)||t.getAll(s).forEach(i=>{r.append(s,i)})}),r}var hf=null;function s5(){if(hf===null)try{new FormData(document.createElement("form"),0),hf=!1}catch{hf=!0}return hf}var i5=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Sg(e){return e!=null&&!i5.has(e)?(ti(!1,`"${e}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Mf}"`),null):e}function a5(e,t){let r,n,s,i,l;if(ZD(e)){let u=e.getAttribute("action");n=u?da(u,t):null,r=e.getAttribute("method")||$f,s=Sg(e.getAttribute("enctype"))||Mf,i=new FormData(e)}else if(XD(e)||e5(e)&&(e.type==="submit"||e.type==="image")){let u=e.form;if(u==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let d=e.getAttribute("formaction")||u.getAttribute("action");if(n=d?da(d,t):null,r=e.getAttribute("formmethod")||u.getAttribute("method")||$f,s=Sg(e.getAttribute("formenctype"))||Sg(u.getAttribute("enctype"))||Mf,i=new FormData(u,e),!s5()){let{name:m,type:f,value:p}=e;if(f==="image"){let y=m?`${m}.`:"";i.append(`${y}x`,"0"),i.append(`${y}y`,"0")}else m&&i.append(m,p)}}else{if(Qh(e))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');r=$f,n=null,s=Mf,l=e}return i&&s==="text/plain"&&(l=i,i=void 0),{action:n,method:r.toLowerCase(),encType:s,formData:i,body:l}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function q0(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function o5(e,t,r){let n=typeof e=="string"?new URL(e,typeof window>"u"?"server://singlefetch/":window.location.origin):e;return n.pathname==="/"?n.pathname=`_root.${r}`:t&&da(n.pathname,t)==="/"?n.pathname=`${t.replace(/\/$/,"")}/_root.${r}`:n.pathname=`${n.pathname.replace(/\/$/,"")}.${r}`,n}async function l5(e,t){if(e.id in t)return t[e.id];try{let r=await import(e.module);return t[e.id]=r,r}catch(r){return console.error(`Error loading route module \`${e.module}\`, reloading page...`),console.error(r),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function c5(e){return e==null?!1:e.href==null?e.rel==="preload"&&typeof e.imageSrcSet=="string"&&typeof e.imageSizes=="string":typeof e.rel=="string"&&typeof e.href=="string"}async function u5(e,t,r){let n=await Promise.all(e.map(async s=>{let i=t.routes[s.route.id];if(i){let l=await l5(i,r);return l.links?l.links():[]}return[]}));return m5(n.flat(1).filter(c5).filter(s=>s.rel==="stylesheet"||s.rel==="preload").map(s=>s.rel==="stylesheet"?{...s,rel:"prefetch",as:"style"}:{...s,rel:"prefetch"}))}function hj(e,t,r,n,s,i){let l=(d,m)=>r[m]?d.route.id!==r[m].route.id:!0,u=(d,m)=>{var f;return r[m].pathname!==d.pathname||((f=r[m].route.path)==null?void 0:f.endsWith("*"))&&r[m].params["*"]!==d.params["*"]};return i==="assets"?t.filter((d,m)=>l(d,m)||u(d,m)):i==="data"?t.filter((d,m)=>{var p;let f=n.routes[d.route.id];if(!f||!f.hasLoader)return!1;if(l(d,m)||u(d,m))return!0;if(d.route.shouldRevalidate){let y=d.route.shouldRevalidate({currentUrl:new URL(s.pathname+s.search+s.hash,window.origin),currentParams:((p=r[0])==null?void 0:p.params)||{},nextUrl:new URL(e,window.origin),nextParams:d.params,defaultShouldRevalidate:!0});if(typeof y=="boolean")return y}return!0}):[]}function d5(e,t,{includeHydrateFallback:r}={}){return f5(e.map(n=>{let s=t.routes[n.route.id];if(!s)return[];let i=[s.module];return s.clientActionModule&&(i=i.concat(s.clientActionModule)),s.clientLoaderModule&&(i=i.concat(s.clientLoaderModule)),r&&s.hydrateFallbackModule&&(i=i.concat(s.hydrateFallbackModule)),s.imports&&(i=i.concat(s.imports)),i}).flat(1))}function f5(e){return[...new Set(e)]}function h5(e){let t={},r=Object.keys(e).sort();for(let n of r)t[n]=e[n];return t}function m5(e,t){let r=new Set;return new Set(t),e.reduce((n,s)=>{let i=JSON.stringify(h5(s));return r.has(i)||(r.add(i),n.push({key:i,link:s})),n},[])}function aC(){let e=v.useContext(mc);return q0(e,"You must render this element inside a <DataRouterContext.Provider> element"),e}function p5(){let e=v.useContext(Jh);return q0(e,"You must render this element inside a <DataRouterStateContext.Provider> element"),e}var H0=v.createContext(void 0);H0.displayName="FrameworkContext";function oC(){let e=v.useContext(H0);return q0(e,"You must render this element inside a <HydratedRouter> element"),e}function g5(e,t){let r=v.useContext(H0),[n,s]=v.useState(!1),[i,l]=v.useState(!1),{onFocus:u,onBlur:d,onMouseEnter:m,onMouseLeave:f,onTouchStart:p}=t,y=v.useRef(null);v.useEffect(()=>{if(e==="render"&&l(!0),e==="viewport"){let b=N=>{N.forEach(E=>{l(E.isIntersecting)})},S=new IntersectionObserver(b,{threshold:.5});return y.current&&S.observe(y.current),()=>{S.disconnect()}}},[e]),v.useEffect(()=>{if(n){let b=setTimeout(()=>{l(!0)},100);return()=>{clearTimeout(b)}}},[n]);let x=()=>{s(!0)},j=()=>{s(!1),l(!1)};return r?e!=="intent"?[i,y,{}]:[i,y,{onFocus:nu(u,x),onBlur:nu(d,j),onMouseEnter:nu(m,x),onMouseLeave:nu(f,j),onTouchStart:nu(p,x)}]:[!1,y,{}]}function nu(e,t){return r=>{e&&e(r),r.defaultPrevented||t(r)}}function y5({page:e,...t}){let{router:r}=aC(),n=v.useMemo(()=>Q2(r.routes,e,r.basename),[r.routes,e,r.basename]);return n?v.createElement(x5,{page:e,matches:n,...t}):null}function v5(e){let{manifest:t,routeModules:r}=oC(),[n,s]=v.useState([]);return v.useEffect(()=>{let i=!1;return u5(e,t,r).then(l=>{i||s(l)}),()=>{i=!0}},[e,t,r]),n}function x5({page:e,matches:t,...r}){let n=ja(),{manifest:s,routeModules:i}=oC(),{basename:l}=aC(),{loaderData:u,matches:d}=p5(),m=v.useMemo(()=>hj(e,t,d,s,n,"data"),[e,t,d,s,n]),f=v.useMemo(()=>hj(e,t,d,s,n,"assets"),[e,t,d,s,n]),p=v.useMemo(()=>{if(e===n.pathname+n.search+n.hash)return[];let j=new Set,b=!1;if(t.forEach(N=>{var k;let E=s.routes[N.route.id];!E||!E.hasLoader||(!m.some(T=>T.route.id===N.route.id)&&N.route.id in u&&((k=i[N.route.id])!=null&&k.shouldRevalidate)||E.hasClientLoader?b=!0:j.add(N.route.id))}),j.size===0)return[];let S=o5(e,l,"data");return b&&j.size>0&&S.searchParams.set("_routes",t.filter(N=>j.has(N.route.id)).map(N=>N.route.id).join(",")),[S.pathname+S.search]},[l,u,n,s,m,t,e,i]),y=v.useMemo(()=>d5(f,s),[f,s]),x=v5(f);return v.createElement(v.Fragment,null,p.map(j=>v.createElement("link",{key:j,rel:"prefetch",as:"fetch",href:j,...r})),y.map(j=>v.createElement("link",{key:j,rel:"modulepreload",href:j,...r})),x.map(({key:j,link:b})=>v.createElement("link",{key:j,nonce:r.nonce,...b})))}function w5(...e){return t=>{e.forEach(r=>{typeof r=="function"?r(t):r!=null&&(r.current=t)})}}var lC=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{lC&&(window.__reactRouterVersion="7.9.4")}catch{}function b5({basename:e,children:t,window:r}){let n=v.useRef();n.current==null&&(n.current=oD({window:r,v5Compat:!0}));let s=n.current,[i,l]=v.useState({action:s.action,location:s.location}),u=v.useCallback(d=>{v.startTransition(()=>l(d))},[l]);return v.useLayoutEffect(()=>s.listen(u),[s,u]),v.createElement(JD,{basename:e,children:t,location:i.location,navigationType:i.action,navigator:s})}var cC=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,uC=v.forwardRef(function({onClick:t,discover:r="render",prefetch:n="none",relative:s,reloadDocument:i,replace:l,state:u,target:d,to:m,preventScrollReset:f,viewTransition:p,...y},x){let{basename:j}=v.useContext(Ni),b=typeof m=="string"&&cC.test(m),S,N=!1;if(typeof m=="string"&&b&&(S=m,lC))try{let F=new URL(window.location.href),V=m.startsWith("//")?new URL(F.protocol+m):new URL(m),B=da(V.pathname,j);V.origin===F.origin&&B!=null?m=B+V.search+V.hash:N=!0}catch{ti(!1,`<Link to="${m}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let E=DD(m,{relative:s}),[k,T,O]=g5(n,y),P=N5(m,{replace:l,state:u,target:d,preventScrollReset:f,relative:s,viewTransition:p});function R(F){t&&t(F),F.defaultPrevented||P(F)}let q=v.createElement("a",{...y,...O,href:S||E,onClick:N||i?t:R,ref:w5(x,T),target:d,"data-discover":!b&&r==="render"?"true":void 0});return k&&!b?v.createElement(v.Fragment,null,q,v.createElement(y5,{page:E})):q});uC.displayName="Link";var j5=v.forwardRef(function({"aria-current":t="page",caseSensitive:r=!1,className:n="",end:s=!1,style:i,to:l,viewTransition:u,children:d,...m},f){let p=qu(l,{relative:m.relative}),y=ja(),x=v.useContext(Jh),{navigator:j,basename:b}=v.useContext(Ni),S=x!=null&&P5(p)&&u===!0,N=j.encodeLocation?j.encodeLocation(p).pathname:p.pathname,E=y.pathname,k=x&&x.navigation&&x.navigation.location?x.navigation.location.pathname:null;r||(E=E.toLowerCase(),k=k?k.toLowerCase():null,N=N.toLowerCase()),k&&b&&(k=da(k,b)||k);const T=N!=="/"&&N.endsWith("/")?N.length-1:N.length;let O=E===N||!s&&E.startsWith(N)&&E.charAt(T)==="/",P=k!=null&&(k===N||!s&&k.startsWith(N)&&k.charAt(N.length)==="/"),R={isActive:O,isPending:P,isTransitioning:S},q=O?t:void 0,F;typeof n=="function"?F=n(R):F=[n,O?"active":null,P?"pending":null,S?"transitioning":null].filter(Boolean).join(" ");let V=typeof i=="function"?i(R):i;return v.createElement(uC,{...m,"aria-current":q,className:F,ref:f,style:V,to:l,viewTransition:u},typeof d=="function"?d(R):d)});j5.displayName="NavLink";var S5=v.forwardRef(({discover:e="render",fetcherKey:t,navigate:r,reloadDocument:n,replace:s,state:i,method:l=$f,action:u,onSubmit:d,relative:m,preventScrollReset:f,viewTransition:p,...y},x)=>{let j=E5(),b=A5(u,{relative:m}),S=l.toLowerCase()==="get"?"get":"post",N=typeof u=="string"&&cC.test(u),E=k=>{if(d&&d(k),k.defaultPrevented)return;k.preventDefault();let T=k.nativeEvent.submitter,O=(T==null?void 0:T.getAttribute("formmethod"))||l;j(T||k.currentTarget,{fetcherKey:t,method:O,navigate:r,replace:s,state:i,relative:m,preventScrollReset:f,viewTransition:p})};return v.createElement("form",{ref:x,method:S,action:b,onSubmit:n?d:E,...y,"data-discover":!N&&e==="render"?"true":void 0})});S5.displayName="Form";function _5(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function dC(e){let t=v.useContext(mc);return kr(t,_5(e)),t}function N5(e,{target:t,replace:r,state:n,preventScrollReset:s,relative:i,viewTransition:l}={}){let u=Ss(),d=ja(),m=qu(e,{relative:i});return v.useCallback(f=>{if(r5(f,t)){f.preventDefault();let p=r!==void 0?r:Cu(d)===Cu(m);u(e,{replace:p,state:n,preventScrollReset:s,relative:i,viewTransition:l})}},[d,u,m,r,n,t,e,s,i,l])}function fC(e){ti(typeof URLSearchParams<"u","You cannot use the `useSearchParams` hook in a browser that does not support the URLSearchParams API. If you need to support Internet Explorer 11, we recommend you load a polyfill such as https://github.com/ungap/url-search-params.");let t=v.useRef(Sv(e)),r=v.useRef(!1),n=ja(),s=v.useMemo(()=>n5(n.search,r.current?null:t.current),[n.search]),i=Ss(),l=v.useCallback((u,d)=>{const m=Sv(typeof u=="function"?u(new URLSearchParams(s)):u);r.current=!0,i("?"+m,d)},[i,s]);return[s,l]}var k5=0,C5=()=>`__${String(++k5)}__`;function E5(){let{router:e}=dC("useSubmit"),{basename:t}=v.useContext(Ni),r=qD();return v.useCallback(async(n,s={})=>{let{action:i,method:l,encType:u,formData:d,body:m}=a5(n,t);if(s.navigate===!1){let f=s.fetcherKey||C5();await e.fetch(f,r,s.action||i,{preventScrollReset:s.preventScrollReset,formData:d,body:m,formMethod:s.method||l,formEncType:s.encType||u,flushSync:s.flushSync})}else await e.navigate(s.action||i,{preventScrollReset:s.preventScrollReset,formData:d,body:m,formMethod:s.method||l,formEncType:s.encType||u,replace:s.replace,state:s.state,fromRouteId:r,flushSync:s.flushSync,viewTransition:s.viewTransition})},[e,t,r])}function A5(e,{relative:t}={}){let{basename:r}=v.useContext(Ni),n=v.useContext(Bi);kr(n,"useFormAction must be used inside a RouteContext");let[s]=n.matches.slice(-1),i={...qu(e||".",{relative:t})},l=ja();if(e==null){i.search=l.search;let u=new URLSearchParams(i.search),d=u.getAll("index");if(d.some(f=>f==="")){u.delete("index"),d.filter(p=>p).forEach(p=>u.append("index",p));let f=u.toString();i.search=f?`?${f}`:""}}return(!e||e===".")&&s.route.index&&(i.search=i.search?i.search.replace(/^\?/,"?index&"):"?index"),r!=="/"&&(i.pathname=i.pathname==="/"?r:oa([r,i.pathname])),Cu(i)}function P5(e,{relative:t}={}){let r=v.useContext(tC);kr(r!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:n}=dC("useViewTransitionState"),s=qu(e,{relative:t});if(!r.isTransitioning)return!1;let i=da(r.currentLocation.pathname,n)||r.currentLocation.pathname,l=da(r.nextLocation.pathname,n)||r.nextLocation.pathname;return Jf(s.pathname,l)!=null||Jf(s.pathname,i)!=null}var hC=J2();const O5="modulepreload",T5=function(e,t){return new URL(e,t).href},mj={},Hu=function(t,r,n){let s=Promise.resolve();if(r&&r.length>0){let l=function(f){return Promise.all(f.map(p=>Promise.resolve(p).then(y=>({status:"fulfilled",value:y}),y=>({status:"rejected",reason:y}))))};const u=document.getElementsByTagName("link"),d=document.querySelector("meta[property=csp-nonce]"),m=(d==null?void 0:d.nonce)||(d==null?void 0:d.getAttribute("nonce"));s=l(r.map(f=>{if(f=T5(f,n),f in mj)return;mj[f]=!0;const p=f.endsWith(".css"),y=p?'[rel="stylesheet"]':"";if(!!n)for(let b=u.length-1;b>=0;b--){const S=u[b];if(S.href===f&&(!p||S.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${f}"]${y}`))return;const j=document.createElement("link");if(j.rel=p?"stylesheet":O5,p||(j.as="script"),j.crossOrigin="",j.href=f,m&&j.setAttribute("nonce",m),document.head.appendChild(j),p)return new Promise((b,S)=>{j.addEventListener("load",b),j.addEventListener("error",()=>S(new Error(`Unable to preload CSS for ${f}`)))})}))}function i(l){const u=new Event("vite:preloadError",{cancelable:!0});if(u.payload=l,window.dispatchEvent(u),!u.defaultPrevented)throw l}return s.then(l=>{for(const u of l||[])u.status==="rejected"&&i(u.reason);return t().catch(i)})},I5=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...r)=>Hu(async()=>{const{default:n}=await Promise.resolve().then(()=>gc);return{default:n}},[],import.meta.url).then(({default:n})=>n(...r)):t=fetch,(...r)=>t(...r)};class K0 extends Error{constructor(t,r="FunctionsError",n){super(t),this.name=r,this.context=n}}class pj extends K0{constructor(t){super("Failed to send a request to the Edge Function","FunctionsFetchError",t)}}class gj extends K0{constructor(t){super("Relay Error invoking the Edge Function","FunctionsRelayError",t)}}class yj extends K0{constructor(t){super("Edge Function returned a non-2xx status code","FunctionsHttpError",t)}}var _v;(function(e){e.Any="any",e.ApNortheast1="ap-northeast-1",e.ApNortheast2="ap-northeast-2",e.ApSouth1="ap-south-1",e.ApSoutheast1="ap-southeast-1",e.ApSoutheast2="ap-southeast-2",e.CaCentral1="ca-central-1",e.EuCentral1="eu-central-1",e.EuWest1="eu-west-1",e.EuWest2="eu-west-2",e.EuWest3="eu-west-3",e.SaEast1="sa-east-1",e.UsEast1="us-east-1",e.UsWest1="us-west-1",e.UsWest2="us-west-2"})(_v||(_v={}));var D5=function(e,t,r,n){function s(i){return i instanceof r?i:new r(function(l){l(i)})}return new(r||(r=Promise))(function(i,l){function u(f){try{m(n.next(f))}catch(p){l(p)}}function d(f){try{m(n.throw(f))}catch(p){l(p)}}function m(f){f.done?i(f.value):s(f.value).then(u,d)}m((n=n.apply(e,t||[])).next())})};class R5{constructor(t,{headers:r={},customFetch:n,region:s=_v.Any}={}){this.url=t,this.headers=r,this.region=s,this.fetch=I5(n)}setAuth(t){this.headers.Authorization=`Bearer ${t}`}invoke(t){return D5(this,arguments,void 0,function*(r,n={}){var s;try{const{headers:i,method:l,body:u,signal:d}=n;let m={},{region:f}=n;f||(f=this.region);const p=new URL(`${this.url}/${r}`);f&&f!=="any"&&(m["x-region"]=f,p.searchParams.set("forceFunctionRegion",f));let y;u&&(i&&!Object.prototype.hasOwnProperty.call(i,"Content-Type")||!i)&&(typeof Blob<"u"&&u instanceof Blob||u instanceof ArrayBuffer?(m["Content-Type"]="application/octet-stream",y=u):typeof u=="string"?(m["Content-Type"]="text/plain",y=u):typeof FormData<"u"&&u instanceof FormData?y=u:(m["Content-Type"]="application/json",y=JSON.stringify(u)));const x=yield this.fetch(p.toString(),{method:l||"POST",headers:Object.assign(Object.assign(Object.assign({},m),this.headers),i),body:y,signal:d}).catch(N=>{throw N.name==="AbortError"?N:new pj(N)}),j=x.headers.get("x-relay-error");if(j&&j==="true")throw new gj(x);if(!x.ok)throw new yj(x);let b=((s=x.headers.get("Content-Type"))!==null&&s!==void 0?s:"text/plain").split(";")[0].trim(),S;return b==="application/json"?S=yield x.json():b==="application/octet-stream"?S=yield x.blob():b==="text/event-stream"?S=x:b==="multipart/form-data"?S=yield x.formData():S=yield x.text(),{data:S,error:null,response:x}}catch(i){return i instanceof Error&&i.name==="AbortError"?{data:null,error:new pj(i)}:{data:null,error:i,response:i instanceof yj||i instanceof gj?i.context:void 0}}})}}var _n={},_l={},Nl={},kl={},Cl={},El={},$5=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},rc=$5();const M5=rc.fetch,mC=rc.fetch.bind(rc),pC=rc.Headers,F5=rc.Request,L5=rc.Response,gc=Object.freeze(Object.defineProperty({__proto__:null,Headers:pC,Request:F5,Response:L5,default:mC,fetch:M5},Symbol.toStringTag,{value:"Module"})),z5=JI(gc);var mf={},vj;function gC(){if(vj)return mf;vj=1,Object.defineProperty(mf,"__esModule",{value:!0});class e extends Error{constructor(r){super(r.message),this.name="PostgrestError",this.details=r.details,this.hint=r.hint,this.code=r.code}}return mf.default=e,mf}var xj;function yC(){if(xj)return El;xj=1;var e=El&&El.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(El,"__esModule",{value:!0});const t=e(z5),r=e(gC());class n{constructor(i){var l,u;this.shouldThrowOnError=!1,this.method=i.method,this.url=i.url,this.headers=new Headers(i.headers),this.schema=i.schema,this.body=i.body,this.shouldThrowOnError=(l=i.shouldThrowOnError)!==null&&l!==void 0?l:!1,this.signal=i.signal,this.isMaybeSingle=(u=i.isMaybeSingle)!==null&&u!==void 0?u:!1,i.fetch?this.fetch=i.fetch:typeof fetch>"u"?this.fetch=t.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(i,l){return this.headers=new Headers(this.headers),this.headers.set(i,l),this}then(i,l){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const u=this.fetch;let d=u(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async m=>{var f,p,y,x;let j=null,b=null,S=null,N=m.status,E=m.statusText;if(m.ok){if(this.method!=="HEAD"){const P=await m.text();P===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((f=this.headers.get("Accept"))===null||f===void 0)&&f.includes("application/vnd.pgrst.plan+text"))?b=P:b=JSON.parse(P))}const T=(p=this.headers.get("Prefer"))===null||p===void 0?void 0:p.match(/count=(exact|planned|estimated)/),O=(y=m.headers.get("content-range"))===null||y===void 0?void 0:y.split("/");T&&O&&O.length>1&&(S=parseInt(O[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(b)&&(b.length>1?(j={code:"PGRST116",details:`Results contain ${b.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},b=null,S=null,N=406,E="Not Acceptable"):b.length===1?b=b[0]:b=null)}else{const T=await m.text();try{j=JSON.parse(T),Array.isArray(j)&&m.status===404&&(b=[],j=null,N=200,E="OK")}catch{m.status===404&&T===""?(N=204,E="No Content"):j={message:T}}if(j&&this.isMaybeSingle&&(!((x=j==null?void 0:j.details)===null||x===void 0)&&x.includes("0 rows"))&&(j=null,N=200,E="OK"),j&&this.shouldThrowOnError)throw new r.default(j)}return{error:j,data:b,count:S,status:N,statusText:E}});return this.shouldThrowOnError||(d=d.catch(m=>{var f,p,y;return{error:{message:`${(f=m==null?void 0:m.name)!==null&&f!==void 0?f:"FetchError"}: ${m==null?void 0:m.message}`,details:`${(p=m==null?void 0:m.stack)!==null&&p!==void 0?p:""}`,hint:"",code:`${(y=m==null?void 0:m.code)!==null&&y!==void 0?y:""}`},data:null,count:null,status:0,statusText:""}})),d.then(i,l)}returns(){return this}overrideTypes(){return this}}return El.default=n,El}var wj;function vC(){if(wj)return Cl;wj=1;var e=Cl&&Cl.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(Cl,"__esModule",{value:!0});const t=e(yC());class r extends t.default{select(s){let i=!1;const l=(s??"*").split("").map(u=>/\s/.test(u)&&!i?"":(u==='"'&&(i=!i),u)).join("");return this.url.searchParams.set("select",l),this.headers.append("Prefer","return=representation"),this}order(s,{ascending:i=!0,nullsFirst:l,foreignTable:u,referencedTable:d=u}={}){const m=d?`${d}.order`:"order",f=this.url.searchParams.get(m);return this.url.searchParams.set(m,`${f?`${f},`:""}${s}.${i?"asc":"desc"}${l===void 0?"":l?".nullsfirst":".nullslast"}`),this}limit(s,{foreignTable:i,referencedTable:l=i}={}){const u=typeof l>"u"?"limit":`${l}.limit`;return this.url.searchParams.set(u,`${s}`),this}range(s,i,{foreignTable:l,referencedTable:u=l}={}){const d=typeof u>"u"?"offset":`${u}.offset`,m=typeof u>"u"?"limit":`${u}.limit`;return this.url.searchParams.set(d,`${s}`),this.url.searchParams.set(m,`${i-s+1}`),this}abortSignal(s){return this.signal=s,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:s=!1,verbose:i=!1,settings:l=!1,buffers:u=!1,wal:d=!1,format:m="text"}={}){var f;const p=[s?"analyze":null,i?"verbose":null,l?"settings":null,u?"buffers":null,d?"wal":null].filter(Boolean).join("|"),y=(f=this.headers.get("Accept"))!==null&&f!==void 0?f:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${m}; for="${y}"; options=${p};`),m==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(s){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${s}`),this}}return Cl.default=r,Cl}var bj;function G0(){if(bj)return kl;bj=1;var e=kl&&kl.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(kl,"__esModule",{value:!0});const t=e(vC());class r extends t.default{eq(s,i){return this.url.searchParams.append(s,`eq.${i}`),this}neq(s,i){return this.url.searchParams.append(s,`neq.${i}`),this}gt(s,i){return this.url.searchParams.append(s,`gt.${i}`),this}gte(s,i){return this.url.searchParams.append(s,`gte.${i}`),this}lt(s,i){return this.url.searchParams.append(s,`lt.${i}`),this}lte(s,i){return this.url.searchParams.append(s,`lte.${i}`),this}like(s,i){return this.url.searchParams.append(s,`like.${i}`),this}likeAllOf(s,i){return this.url.searchParams.append(s,`like(all).{${i.join(",")}}`),this}likeAnyOf(s,i){return this.url.searchParams.append(s,`like(any).{${i.join(",")}}`),this}ilike(s,i){return this.url.searchParams.append(s,`ilike.${i}`),this}ilikeAllOf(s,i){return this.url.searchParams.append(s,`ilike(all).{${i.join(",")}}`),this}ilikeAnyOf(s,i){return this.url.searchParams.append(s,`ilike(any).{${i.join(",")}}`),this}is(s,i){return this.url.searchParams.append(s,`is.${i}`),this}in(s,i){const l=Array.from(new Set(i)).map(u=>typeof u=="string"&&new RegExp("[,()]").test(u)?`"${u}"`:`${u}`).join(",");return this.url.searchParams.append(s,`in.(${l})`),this}contains(s,i){return typeof i=="string"?this.url.searchParams.append(s,`cs.${i}`):Array.isArray(i)?this.url.searchParams.append(s,`cs.{${i.join(",")}}`):this.url.searchParams.append(s,`cs.${JSON.stringify(i)}`),this}containedBy(s,i){return typeof i=="string"?this.url.searchParams.append(s,`cd.${i}`):Array.isArray(i)?this.url.searchParams.append(s,`cd.{${i.join(",")}}`):this.url.searchParams.append(s,`cd.${JSON.stringify(i)}`),this}rangeGt(s,i){return this.url.searchParams.append(s,`sr.${i}`),this}rangeGte(s,i){return this.url.searchParams.append(s,`nxl.${i}`),this}rangeLt(s,i){return this.url.searchParams.append(s,`sl.${i}`),this}rangeLte(s,i){return this.url.searchParams.append(s,`nxr.${i}`),this}rangeAdjacent(s,i){return this.url.searchParams.append(s,`adj.${i}`),this}overlaps(s,i){return typeof i=="string"?this.url.searchParams.append(s,`ov.${i}`):this.url.searchParams.append(s,`ov.{${i.join(",")}}`),this}textSearch(s,i,{config:l,type:u}={}){let d="";u==="plain"?d="pl":u==="phrase"?d="ph":u==="websearch"&&(d="w");const m=l===void 0?"":`(${l})`;return this.url.searchParams.append(s,`${d}fts${m}.${i}`),this}match(s){return Object.entries(s).forEach(([i,l])=>{this.url.searchParams.append(i,`eq.${l}`)}),this}not(s,i,l){return this.url.searchParams.append(s,`not.${i}.${l}`),this}or(s,{foreignTable:i,referencedTable:l=i}={}){const u=l?`${l}.or`:"or";return this.url.searchParams.append(u,`(${s})`),this}filter(s,i,l){return this.url.searchParams.append(s,`${i}.${l}`),this}}return kl.default=r,kl}var jj;function xC(){if(jj)return Nl;jj=1;var e=Nl&&Nl.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(Nl,"__esModule",{value:!0});const t=e(G0());class r{constructor(s,{headers:i={},schema:l,fetch:u}){this.url=s,this.headers=new Headers(i),this.schema=l,this.fetch=u}select(s,i){const{head:l=!1,count:u}=i??{},d=l?"HEAD":"GET";let m=!1;const f=(s??"*").split("").map(p=>/\s/.test(p)&&!m?"":(p==='"'&&(m=!m),p)).join("");return this.url.searchParams.set("select",f),u&&this.headers.append("Prefer",`count=${u}`),new t.default({method:d,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(s,{count:i,defaultToNull:l=!0}={}){var u;const d="POST";if(i&&this.headers.append("Prefer",`count=${i}`),l||this.headers.append("Prefer","missing=default"),Array.isArray(s)){const m=s.reduce((f,p)=>f.concat(Object.keys(p)),[]);if(m.length>0){const f=[...new Set(m)].map(p=>`"${p}"`);this.url.searchParams.set("columns",f.join(","))}}return new t.default({method:d,url:this.url,headers:this.headers,schema:this.schema,body:s,fetch:(u=this.fetch)!==null&&u!==void 0?u:fetch})}upsert(s,{onConflict:i,ignoreDuplicates:l=!1,count:u,defaultToNull:d=!0}={}){var m;const f="POST";if(this.headers.append("Prefer",`resolution=${l?"ignore":"merge"}-duplicates`),i!==void 0&&this.url.searchParams.set("on_conflict",i),u&&this.headers.append("Prefer",`count=${u}`),d||this.headers.append("Prefer","missing=default"),Array.isArray(s)){const p=s.reduce((y,x)=>y.concat(Object.keys(x)),[]);if(p.length>0){const y=[...new Set(p)].map(x=>`"${x}"`);this.url.searchParams.set("columns",y.join(","))}}return new t.default({method:f,url:this.url,headers:this.headers,schema:this.schema,body:s,fetch:(m=this.fetch)!==null&&m!==void 0?m:fetch})}update(s,{count:i}={}){var l;const u="PATCH";return i&&this.headers.append("Prefer",`count=${i}`),new t.default({method:u,url:this.url,headers:this.headers,schema:this.schema,body:s,fetch:(l=this.fetch)!==null&&l!==void 0?l:fetch})}delete({count:s}={}){var i;const l="DELETE";return s&&this.headers.append("Prefer",`count=${s}`),new t.default({method:l,url:this.url,headers:this.headers,schema:this.schema,fetch:(i=this.fetch)!==null&&i!==void 0?i:fetch})}}return Nl.default=r,Nl}var Sj;function B5(){if(Sj)return _l;Sj=1;var e=_l&&_l.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(_l,"__esModule",{value:!0});const t=e(xC()),r=e(G0());class n{constructor(i,{headers:l={},schema:u,fetch:d}={}){this.url=i,this.headers=new Headers(l),this.schemaName=u,this.fetch=d}from(i){const l=new URL(`${this.url}/${i}`);return new t.default(l,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(i){return new n(this.url,{headers:this.headers,schema:i,fetch:this.fetch})}rpc(i,l={},{head:u=!1,get:d=!1,count:m}={}){var f;let p;const y=new URL(`${this.url}/rpc/${i}`);let x;u||d?(p=u?"HEAD":"GET",Object.entries(l).filter(([b,S])=>S!==void 0).map(([b,S])=>[b,Array.isArray(S)?`{${S.join(",")}}`:`${S}`]).forEach(([b,S])=>{y.searchParams.append(b,S)})):(p="POST",x=l);const j=new Headers(this.headers);return m&&j.set("Prefer",`count=${m}`),new r.default({method:p,url:y,headers:j,schema:this.schemaName,body:x,fetch:(f=this.fetch)!==null&&f!==void 0?f:fetch})}}return _l.default=n,_l}var _j;function U5(){if(_j)return _n;_j=1;var e=_n&&_n.__importDefault||function(u){return u&&u.__esModule?u:{default:u}};Object.defineProperty(_n,"__esModule",{value:!0}),_n.PostgrestError=_n.PostgrestBuilder=_n.PostgrestTransformBuilder=_n.PostgrestFilterBuilder=_n.PostgrestQueryBuilder=_n.PostgrestClient=void 0;const t=e(B5());_n.PostgrestClient=t.default;const r=e(xC());_n.PostgrestQueryBuilder=r.default;const n=e(G0());_n.PostgrestFilterBuilder=n.default;const s=e(vC());_n.PostgrestTransformBuilder=s.default;const i=e(yC());_n.PostgrestBuilder=i.default;const l=e(gC());return _n.PostgrestError=l.default,_n.default={PostgrestClient:t.default,PostgrestQueryBuilder:r.default,PostgrestFilterBuilder:n.default,PostgrestTransformBuilder:s.default,PostgrestBuilder:i.default,PostgrestError:l.default},_n}var W5=U5();const V5=_i(W5),{PostgrestClient:q5,PostgrestQueryBuilder:LZ,PostgrestFilterBuilder:zZ,PostgrestTransformBuilder:BZ,PostgrestBuilder:UZ,PostgrestError:WZ}=V5;class H5{static detectEnvironment(){var t;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((t=navigator.userAgent)===null||t===void 0)&&t.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const r=process.versions;if(r&&r.node){const n=r.node,s=parseInt(n.replace(/^v/,"").split(".")[0]);return s>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${s} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${s} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const t=this.detectEnvironment();if(t.constructor)return t.constructor;let r=t.error||"WebSocket not supported in this environment.";throw t.workaround&&(r+=`

Suggested solution: ${t.workaround}`),new Error(r)}static createWebSocket(t,r){const n=this.getWebSocketConstructor();return new n(t,r)}static isWebSocketSupported(){try{const t=this.detectEnvironment();return t.type==="native"||t.type==="ws"}catch{return!1}}}const K5="2.74.0",G5=`realtime-js/${K5}`,Y5="1.0.0",Nv=1e4,J5=1e3,Q5=100;var wu;(function(e){e[e.connecting=0]="connecting",e[e.open=1]="open",e[e.closing=2]="closing",e[e.closed=3]="closed"})(wu||(wu={}));var dn;(function(e){e.closed="closed",e.errored="errored",e.joined="joined",e.joining="joining",e.leaving="leaving"})(dn||(dn={}));var pi;(function(e){e.close="phx_close",e.error="phx_error",e.join="phx_join",e.reply="phx_reply",e.leave="phx_leave",e.access_token="access_token"})(pi||(pi={}));var kv;(function(e){e.websocket="websocket"})(kv||(kv={}));var Ao;(function(e){e.Connecting="connecting",e.Open="open",e.Closing="closing",e.Closed="closed"})(Ao||(Ao={}));class X5{constructor(){this.HEADER_LENGTH=1}decode(t,r){return t.constructor===ArrayBuffer?r(this._binaryDecode(t)):r(typeof t=="string"?JSON.parse(t):{})}_binaryDecode(t){const r=new DataView(t),n=new TextDecoder;return this._decodeBroadcast(t,r,n)}_decodeBroadcast(t,r,n){const s=r.getUint8(1),i=r.getUint8(2);let l=this.HEADER_LENGTH+2;const u=n.decode(t.slice(l,l+s));l=l+s;const d=n.decode(t.slice(l,l+i));l=l+i;const m=JSON.parse(n.decode(t.slice(l,t.byteLength)));return{ref:null,topic:u,event:d,payload:m}}}class wC{constructor(t,r){this.callback=t,this.timerCalc=r,this.timer=void 0,this.tries=0,this.callback=t,this.timerCalc=r}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var cr;(function(e){e.abstime="abstime",e.bool="bool",e.date="date",e.daterange="daterange",e.float4="float4",e.float8="float8",e.int2="int2",e.int4="int4",e.int4range="int4range",e.int8="int8",e.int8range="int8range",e.json="json",e.jsonb="jsonb",e.money="money",e.numeric="numeric",e.oid="oid",e.reltime="reltime",e.text="text",e.time="time",e.timestamp="timestamp",e.timestamptz="timestamptz",e.timetz="timetz",e.tsrange="tsrange",e.tstzrange="tstzrange"})(cr||(cr={}));const Nj=(e,t,r={})=>{var n;const s=(n=r.skipTypes)!==null&&n!==void 0?n:[];return t?Object.keys(t).reduce((i,l)=>(i[l]=Z5(l,e,t,s),i),{}):{}},Z5=(e,t,r,n)=>{const s=t.find(u=>u.name===e),i=s==null?void 0:s.type,l=r[e];return i&&!n.includes(i)?bC(i,l):Cv(l)},bC=(e,t)=>{if(e.charAt(0)==="_"){const r=e.slice(1,e.length);return n3(t,r)}switch(e){case cr.bool:return e3(t);case cr.float4:case cr.float8:case cr.int2:case cr.int4:case cr.int8:case cr.numeric:case cr.oid:return t3(t);case cr.json:case cr.jsonb:return r3(t);case cr.timestamp:return s3(t);case cr.abstime:case cr.date:case cr.daterange:case cr.int4range:case cr.int8range:case cr.money:case cr.reltime:case cr.text:case cr.time:case cr.timestamptz:case cr.timetz:case cr.tsrange:case cr.tstzrange:return Cv(t);default:return Cv(t)}},Cv=e=>e,e3=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},t3=e=>{if(typeof e=="string"){const t=parseFloat(e);if(!Number.isNaN(t))return t}return e},r3=e=>{if(typeof e=="string")try{return JSON.parse(e)}catch(t){return console.log(`JSON parse error: ${t}`),e}return e},n3=(e,t)=>{if(typeof e!="string")return e;const r=e.length-1,n=e[r];if(e[0]==="{"&&n==="}"){let i;const l=e.slice(1,r);try{i=JSON.parse("["+l+"]")}catch{i=l?l.split(","):[]}return i.map(u=>bC(t,u))}return e},s3=e=>typeof e=="string"?e.replace(" ","T"):e,jC=e=>{let t=e;return t=t.replace(/^ws/i,"http"),t=t.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),t.replace(/\/+$/,"")+"/api/broadcast"};class _g{constructor(t,r,n={},s=Nv){this.channel=t,this.event=r,this.payload=n,this.timeout=s,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(t){this.timeout=t,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(t){this.payload=Object.assign(Object.assign({},this.payload),t)}receive(t,r){var n;return this._hasReceived(t)&&r((n=this.receivedResp)===null||n===void 0?void 0:n.response),this.recHooks.push({status:t,callback:r}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const t=r=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=r,this._matchReceive(r)};this.channel._on(this.refEvent,{},t),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(t,r){this.refEvent&&this.channel._trigger(this.refEvent,{status:t,response:r})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:t,response:r}){this.recHooks.filter(n=>n.status===t).forEach(n=>n.callback(r))}_hasReceived(t){return this.receivedResp&&this.receivedResp.status===t}}var kj;(function(e){e.SYNC="sync",e.JOIN="join",e.LEAVE="leave"})(kj||(kj={}));class bu{constructor(t,r){this.channel=t,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const n=(r==null?void 0:r.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(n.state,{},s=>{const{onJoin:i,onLeave:l,onSync:u}=this.caller;this.joinRef=this.channel._joinRef(),this.state=bu.syncState(this.state,s,i,l),this.pendingDiffs.forEach(d=>{this.state=bu.syncDiff(this.state,d,i,l)}),this.pendingDiffs=[],u()}),this.channel._on(n.diff,{},s=>{const{onJoin:i,onLeave:l,onSync:u}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(s):(this.state=bu.syncDiff(this.state,s,i,l),u())}),this.onJoin((s,i,l)=>{this.channel._trigger("presence",{event:"join",key:s,currentPresences:i,newPresences:l})}),this.onLeave((s,i,l)=>{this.channel._trigger("presence",{event:"leave",key:s,currentPresences:i,leftPresences:l})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(t,r,n,s){const i=this.cloneDeep(t),l=this.transformState(r),u={},d={};return this.map(i,(m,f)=>{l[m]||(d[m]=f)}),this.map(l,(m,f)=>{const p=i[m];if(p){const y=f.map(S=>S.presence_ref),x=p.map(S=>S.presence_ref),j=f.filter(S=>x.indexOf(S.presence_ref)<0),b=p.filter(S=>y.indexOf(S.presence_ref)<0);j.length>0&&(u[m]=j),b.length>0&&(d[m]=b)}else u[m]=f}),this.syncDiff(i,{joins:u,leaves:d},n,s)}static syncDiff(t,r,n,s){const{joins:i,leaves:l}={joins:this.transformState(r.joins),leaves:this.transformState(r.leaves)};return n||(n=()=>{}),s||(s=()=>{}),this.map(i,(u,d)=>{var m;const f=(m=t[u])!==null&&m!==void 0?m:[];if(t[u]=this.cloneDeep(d),f.length>0){const p=t[u].map(x=>x.presence_ref),y=f.filter(x=>p.indexOf(x.presence_ref)<0);t[u].unshift(...y)}n(u,f,d)}),this.map(l,(u,d)=>{let m=t[u];if(!m)return;const f=d.map(p=>p.presence_ref);m=m.filter(p=>f.indexOf(p.presence_ref)<0),t[u]=m,s(u,m,d),m.length===0&&delete t[u]}),t}static map(t,r){return Object.getOwnPropertyNames(t).map(n=>r(n,t[n]))}static transformState(t){return t=this.cloneDeep(t),Object.getOwnPropertyNames(t).reduce((r,n)=>{const s=t[n];return"metas"in s?r[n]=s.metas.map(i=>(i.presence_ref=i.phx_ref,delete i.phx_ref,delete i.phx_ref_prev,i)):r[n]=s,r},{})}static cloneDeep(t){return JSON.parse(JSON.stringify(t))}onJoin(t){this.caller.onJoin=t}onLeave(t){this.caller.onLeave=t}onSync(t){this.caller.onSync=t}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var Cj;(function(e){e.ALL="*",e.INSERT="INSERT",e.UPDATE="UPDATE",e.DELETE="DELETE"})(Cj||(Cj={}));var ju;(function(e){e.BROADCAST="broadcast",e.PRESENCE="presence",e.POSTGRES_CHANGES="postgres_changes",e.SYSTEM="system"})(ju||(ju={}));var ta;(function(e){e.SUBSCRIBED="SUBSCRIBED",e.TIMED_OUT="TIMED_OUT",e.CLOSED="CLOSED",e.CHANNEL_ERROR="CHANNEL_ERROR"})(ta||(ta={}));class Y0{constructor(t,r={config:{}},n){var s,i;if(this.topic=t,this.params=r,this.socket=n,this.bindings={},this.state=dn.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=t.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},r.config),this.timeout=this.socket.timeout,this.joinPush=new _g(this,pi.join,this.params,this.timeout),this.rejoinTimer=new wC(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=dn.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(l=>l.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=dn.closed,this.socket._remove(this)}),this._onError(l=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,l),this.state=dn.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=dn.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",l=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,l),this.state=dn.errored,this.rejoinTimer.scheduleTimeout())}),this._on(pi.reply,{},(l,u)=>{this._trigger(this._replyEventName(u),l)}),this.presence=new bu(this),this.broadcastEndpointURL=jC(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((i=(s=this.params.config)===null||s===void 0?void 0:s.broadcast)===null||i===void 0)&&i.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(t,r=this.timeout){var n,s,i;if(this.socket.isConnected()||this.socket.connect(),this.state==dn.closed){const{config:{broadcast:l,presence:u,private:d}}=this.params,m=(s=(n=this.bindings.postgres_changes)===null||n===void 0?void 0:n.map(x=>x.filter))!==null&&s!==void 0?s:[],f=!!this.bindings[ju.PRESENCE]&&this.bindings[ju.PRESENCE].length>0||((i=this.params.config.presence)===null||i===void 0?void 0:i.enabled)===!0,p={},y={broadcast:l,presence:Object.assign(Object.assign({},u),{enabled:f}),postgres_changes:m,private:d};this.socket.accessTokenValue&&(p.access_token=this.socket.accessTokenValue),this._onError(x=>t==null?void 0:t(ta.CHANNEL_ERROR,x)),this._onClose(()=>t==null?void 0:t(ta.CLOSED)),this.updateJoinPayload(Object.assign({config:y},p)),this.joinedOnce=!0,this._rejoin(r),this.joinPush.receive("ok",async({postgres_changes:x})=>{var j;if(this.socket.setAuth(),x===void 0){t==null||t(ta.SUBSCRIBED);return}else{const b=this.bindings.postgres_changes,S=(j=b==null?void 0:b.length)!==null&&j!==void 0?j:0,N=[];for(let E=0;E<S;E++){const k=b[E],{filter:{event:T,schema:O,table:P,filter:R}}=k,q=x&&x[E];if(q&&q.event===T&&q.schema===O&&q.table===P&&q.filter===R)N.push(Object.assign(Object.assign({},k),{id:q.id}));else{this.unsubscribe(),this.state=dn.errored,t==null||t(ta.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=N,t&&t(ta.SUBSCRIBED);return}}).receive("error",x=>{this.state=dn.errored,t==null||t(ta.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(x).join(", ")||"error")))}).receive("timeout",()=>{t==null||t(ta.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(t,r={}){return await this.send({type:"presence",event:"track",payload:t},r.timeout||this.timeout)}async untrack(t={}){return await this.send({type:"presence",event:"untrack"},t)}on(t,r,n){return this.state===dn.joined&&t===ju.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(t,r,n)}async send(t,r={}){var n,s;if(!this._canPush()&&t.type==="broadcast"){const{event:i,payload:l}=t,d={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:i,payload:l,private:this.private}]})};try{const m=await this._fetchWithTimeout(this.broadcastEndpointURL,d,(n=r.timeout)!==null&&n!==void 0?n:this.timeout);return await((s=m.body)===null||s===void 0?void 0:s.cancel()),m.ok?"ok":"error"}catch(m){return m.name==="AbortError"?"timed out":"error"}}else return new Promise(i=>{var l,u,d;const m=this._push(t.type,t,r.timeout||this.timeout);t.type==="broadcast"&&!(!((d=(u=(l=this.params)===null||l===void 0?void 0:l.config)===null||u===void 0?void 0:u.broadcast)===null||d===void 0)&&d.ack)&&i("ok"),m.receive("ok",()=>i("ok")),m.receive("error",()=>i("error")),m.receive("timeout",()=>i("timed out"))})}updateJoinPayload(t){this.joinPush.updatePayload(t)}unsubscribe(t=this.timeout){this.state=dn.leaving;const r=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(pi.close,"leave",this._joinRef())};this.joinPush.destroy();let n=null;return new Promise(s=>{n=new _g(this,pi.leave,{},t),n.receive("ok",()=>{r(),s("ok")}).receive("timeout",()=>{r(),s("timed out")}).receive("error",()=>{s("error")}),n.send(),this._canPush()||n.trigger("ok",{})}).finally(()=>{n==null||n.destroy()})}teardown(){this.pushBuffer.forEach(t=>t.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=dn.closed,this.bindings={}}async _fetchWithTimeout(t,r,n){const s=new AbortController,i=setTimeout(()=>s.abort(),n),l=await this.socket.fetch(t,Object.assign(Object.assign({},r),{signal:s.signal}));return clearTimeout(i),l}_push(t,r,n=this.timeout){if(!this.joinedOnce)throw`tried to push '${t}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let s=new _g(this,t,r,n);return this._canPush()?s.send():this._addToPushBuffer(s),s}_addToPushBuffer(t){if(t.startTimeout(),this.pushBuffer.push(t),this.pushBuffer.length>Q5){const r=this.pushBuffer.shift();r&&(r.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${r.event}`,r.payload))}}_onMessage(t,r,n){return r}_isMember(t){return this.topic===t}_joinRef(){return this.joinPush.ref}_trigger(t,r,n){var s,i;const l=t.toLocaleLowerCase(),{close:u,error:d,leave:m,join:f}=pi;if(n&&[u,d,m,f].indexOf(l)>=0&&n!==this._joinRef())return;let y=this._onMessage(l,r,n);if(r&&!y)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(l)?(s=this.bindings.postgres_changes)===null||s===void 0||s.filter(x=>{var j,b,S;return((j=x.filter)===null||j===void 0?void 0:j.event)==="*"||((S=(b=x.filter)===null||b===void 0?void 0:b.event)===null||S===void 0?void 0:S.toLocaleLowerCase())===l}).map(x=>x.callback(y,n)):(i=this.bindings[l])===null||i===void 0||i.filter(x=>{var j,b,S,N,E,k;if(["broadcast","presence","postgres_changes"].includes(l))if("id"in x){const T=x.id,O=(j=x.filter)===null||j===void 0?void 0:j.event;return T&&((b=r.ids)===null||b===void 0?void 0:b.includes(T))&&(O==="*"||(O==null?void 0:O.toLocaleLowerCase())===((S=r.data)===null||S===void 0?void 0:S.type.toLocaleLowerCase()))}else{const T=(E=(N=x==null?void 0:x.filter)===null||N===void 0?void 0:N.event)===null||E===void 0?void 0:E.toLocaleLowerCase();return T==="*"||T===((k=r==null?void 0:r.event)===null||k===void 0?void 0:k.toLocaleLowerCase())}else return x.type.toLocaleLowerCase()===l}).map(x=>{if(typeof y=="object"&&"ids"in y){const j=y.data,{schema:b,table:S,commit_timestamp:N,type:E,errors:k}=j;y=Object.assign(Object.assign({},{schema:b,table:S,commit_timestamp:N,eventType:E,new:{},old:{},errors:k}),this._getPayloadRecords(j))}x.callback(y,n)})}_isClosed(){return this.state===dn.closed}_isJoined(){return this.state===dn.joined}_isJoining(){return this.state===dn.joining}_isLeaving(){return this.state===dn.leaving}_replyEventName(t){return`chan_reply_${t}`}_on(t,r,n){const s=t.toLocaleLowerCase(),i={type:s,filter:r,callback:n};return this.bindings[s]?this.bindings[s].push(i):this.bindings[s]=[i],this}_off(t,r){const n=t.toLocaleLowerCase();return this.bindings[n]&&(this.bindings[n]=this.bindings[n].filter(s=>{var i;return!(((i=s.type)===null||i===void 0?void 0:i.toLocaleLowerCase())===n&&Y0.isEqual(s.filter,r))})),this}static isEqual(t,r){if(Object.keys(t).length!==Object.keys(r).length)return!1;for(const n in t)if(t[n]!==r[n])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(t){this._on(pi.close,{},t)}_onError(t){this._on(pi.error,{},r=>t(r))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(t=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=dn.joining,this.joinPush.resend(t))}_getPayloadRecords(t){const r={new:{},old:{}};return(t.type==="INSERT"||t.type==="UPDATE")&&(r.new=Nj(t.columns,t.record)),(t.type==="UPDATE"||t.type==="DELETE")&&(r.old=Nj(t.columns,t.old_record)),r}}const Ng=()=>{},pf={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},i3=[1e3,2e3,5e3,1e4],a3=1e4,o3=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class l3{constructor(t,r){var n;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=Nv,this.transport=null,this.heartbeatIntervalMs=pf.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=Ng,this.ref=0,this.reconnectTimer=null,this.logger=Ng,this.conn=null,this.sendBuffer=[],this.serializer=new X5,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=s=>{let i;return s?i=s:typeof fetch>"u"?i=(...l)=>Hu(async()=>{const{default:u}=await Promise.resolve().then(()=>gc);return{default:u}},void 0,import.meta.url).then(({default:u})=>u(...l)).catch(u=>{throw new Error(`Failed to load @supabase/node-fetch: ${u.message}. This is required for HTTP requests in Node.js environments without native fetch.`)}):i=fetch,(...l)=>i(...l)},!(!((n=r==null?void 0:r.params)===null||n===void 0)&&n.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=r.params.apikey,this.endPoint=`${t}/${kv.websocket}`,this.httpEndpoint=jC(t),this._initializeOptions(r),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(r==null?void 0:r.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=H5.createWebSocket(this.endpointURL())}catch(t){this._setConnectionState("disconnected");const r=t.message;throw r.includes("Node.js")?new Error(`${r}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${r}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:Y5}))}disconnect(t,r){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const n=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(n),this._setConnectionState("disconnected")},t?this.conn.close(t,r??""):this.conn.close(),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(t){const r=await t.unsubscribe();return this.channels.length===0&&this.disconnect(),r}async removeAllChannels(){const t=await Promise.all(this.channels.map(r=>r.unsubscribe()));return this.channels=[],this.disconnect(),t}log(t,r,n){this.logger(t,r,n)}connectionState(){switch(this.conn&&this.conn.readyState){case wu.connecting:return Ao.Connecting;case wu.open:return Ao.Open;case wu.closing:return Ao.Closing;default:return Ao.Closed}}isConnected(){return this.connectionState()===Ao.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(t,r={config:{}}){const n=`realtime:${t}`,s=this.getChannels().find(i=>i.topic===n);if(s)return s;{const i=new Y0(`realtime:${t}`,r,this);return this.channels.push(i),i}}push(t){const{topic:r,event:n,payload:s,ref:i}=t,l=()=>{this.encode(t,u=>{var d;(d=this.conn)===null||d===void 0||d.send(u)})};this.log("push",`${r} ${n} (${i})`,s),this.isConnected()?l():this.sendBuffer.push(l)}async setAuth(t=null){this._authPromise=this._performAuth(t);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var t;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(r){this.log("error","error in heartbeat callback",r)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(r){this.log("error","error in heartbeat callback",r)}this._wasManualDisconnect=!1,(t=this.conn)===null||t===void 0||t.close(J5,"heartbeat timeout"),setTimeout(()=>{var r;this.isConnected()||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout()},pf.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(r){this.log("error","error in heartbeat callback",r)}this._setAuthSafely("heartbeat")}onHeartbeat(t){this.heartbeatCallback=t}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(t=>t()),this.sendBuffer=[])}_makeRef(){let t=this.ref+1;return t===this.ref?this.ref=0:this.ref=t,this.ref.toString()}_leaveOpenTopic(t){let r=this.channels.find(n=>n.topic===t&&(n._isJoined()||n._isJoining()));r&&(this.log("transport",`leaving duplicate topic "${t}"`),r.unsubscribe())}_remove(t){this.channels=this.channels.filter(r=>r.topic!==t.topic)}_onConnMessage(t){this.decode(t.data,r=>{if(r.topic==="phoenix"&&r.event==="phx_reply")try{this.heartbeatCallback(r.payload.status==="ok"?"ok":"error")}catch(m){this.log("error","error in heartbeat callback",m)}r.ref&&r.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:n,event:s,payload:i,ref:l}=r,u=l?`(${l})`:"",d=i.status||"";this.log("receive",`${d} ${n} ${s} ${u}`.trim(),i),this.channels.filter(m=>m._isMember(n)).forEach(m=>m._trigger(s,i,l)),this._triggerStateCallbacks("message",r)})}_clearTimer(t){var r;t==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):t==="reconnect"&&((r=this.reconnectTimer)===null||r===void 0||r.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=t=>this._onConnError(t),this.conn.onmessage=t=>this._onConnMessage(t),this.conn.onclose=t=>this._onConnClose(t))}_teardownConnection(){this.conn&&(this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null),this._clearAllTimers(),this.channels.forEach(t=>t.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const t=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(t),this.workerRef.onerror=r=>{this.log("worker","worker error",r.message),this.workerRef.terminate()},this.workerRef.onmessage=r=>{r.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(t){var r;this._setConnectionState("disconnected"),this.log("transport","close",t),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout(),this._triggerStateCallbacks("close",t)}_onConnError(t){this._setConnectionState("disconnected"),this.log("transport",`${t}`),this._triggerChanError(),this._triggerStateCallbacks("error",t)}_triggerChanError(){this.channels.forEach(t=>t._trigger(pi.error))}_appendParams(t,r){if(Object.keys(r).length===0)return t;const n=t.match(/\?/)?"&":"?",s=new URLSearchParams(r);return`${t}${n}${s}`}_workerObjectUrl(t){let r;if(t)r=t;else{const n=new Blob([o3],{type:"application/javascript"});r=URL.createObjectURL(n)}return r}_setConnectionState(t,r=!1){this._connectionState=t,t==="connecting"?this._wasManualDisconnect=!1:t==="disconnecting"&&(this._wasManualDisconnect=r)}async _performAuth(t=null){let r;t?r=t:this.accessToken?r=await this.accessToken():r=this.accessTokenValue,this.accessTokenValue!=r&&(this.accessTokenValue=r,this.channels.forEach(n=>{const s={access_token:r,version:G5};r&&n.updateJoinPayload(s),n.joinedOnce&&n._isJoined()&&n._push(pi.access_token,{access_token:r})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(t="general"){this.setAuth().catch(r=>{this.log("error",`error setting auth in ${t}`,r)})}_triggerStateCallbacks(t,r){try{this.stateChangeCallbacks[t].forEach(n=>{try{n(r)}catch(s){this.log("error",`error in ${t} callback`,s)}})}catch(n){this.log("error",`error triggering ${t} callbacks`,n)}}_setupReconnectionTimer(){this.reconnectTimer=new wC(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},pf.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(t){var r,n,s,i,l,u,d,m,f;if(this.transport=(r=t==null?void 0:t.transport)!==null&&r!==void 0?r:null,this.timeout=(n=t==null?void 0:t.timeout)!==null&&n!==void 0?n:Nv,this.heartbeatIntervalMs=(s=t==null?void 0:t.heartbeatIntervalMs)!==null&&s!==void 0?s:pf.HEARTBEAT_INTERVAL,this.worker=(i=t==null?void 0:t.worker)!==null&&i!==void 0?i:!1,this.accessToken=(l=t==null?void 0:t.accessToken)!==null&&l!==void 0?l:null,this.heartbeatCallback=(u=t==null?void 0:t.heartbeatCallback)!==null&&u!==void 0?u:Ng,t!=null&&t.params&&(this.params=t.params),t!=null&&t.logger&&(this.logger=t.logger),(t!=null&&t.logLevel||t!=null&&t.log_level)&&(this.logLevel=t.logLevel||t.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(d=t==null?void 0:t.reconnectAfterMs)!==null&&d!==void 0?d:(p=>i3[p-1]||a3),this.encode=(m=t==null?void 0:t.encode)!==null&&m!==void 0?m:((p,y)=>y(JSON.stringify(p))),this.decode=(f=t==null?void 0:t.decode)!==null&&f!==void 0?f:this.serializer.decode.bind(this.serializer),this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=t==null?void 0:t.workerUrl}}}class J0 extends Error{constructor(t){super(t),this.__isStorageError=!0,this.name="StorageError"}}function en(e){return typeof e=="object"&&e!==null&&"__isStorageError"in e}class c3 extends J0{constructor(t,r,n){super(t),this.name="StorageApiError",this.status=r,this.statusCode=n}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class Ev extends J0{constructor(t,r){super(t),this.name="StorageUnknownError",this.originalError=r}}var u3=function(e,t,r,n){function s(i){return i instanceof r?i:new r(function(l){l(i)})}return new(r||(r=Promise))(function(i,l){function u(f){try{m(n.next(f))}catch(p){l(p)}}function d(f){try{m(n.throw(f))}catch(p){l(p)}}function m(f){f.done?i(f.value):s(f.value).then(u,d)}m((n=n.apply(e,t||[])).next())})};const SC=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...r)=>Hu(async()=>{const{default:n}=await Promise.resolve().then(()=>gc);return{default:n}},void 0,import.meta.url).then(({default:n})=>n(...r)):t=fetch,(...r)=>t(...r)},d3=()=>u3(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield Hu(()=>Promise.resolve().then(()=>gc),void 0,import.meta.url)).Response:Response}),Av=e=>{if(Array.isArray(e))return e.map(r=>Av(r));if(typeof e=="function"||e!==Object(e))return e;const t={};return Object.entries(e).forEach(([r,n])=>{const s=r.replace(/([-_][a-z])/gi,i=>i.toUpperCase().replace(/[-_]/g,""));t[s]=Av(n)}),t},f3=e=>{if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)};var Yo=function(e,t,r,n){function s(i){return i instanceof r?i:new r(function(l){l(i)})}return new(r||(r=Promise))(function(i,l){function u(f){try{m(n.next(f))}catch(p){l(p)}}function d(f){try{m(n.throw(f))}catch(p){l(p)}}function m(f){f.done?i(f.value):s(f.value).then(u,d)}m((n=n.apply(e,t||[])).next())})};const kg=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),h3=(e,t,r)=>Yo(void 0,void 0,void 0,function*(){const n=yield d3();e instanceof n&&!(r!=null&&r.noResolveJson)?e.json().then(s=>{const i=e.status||500,l=(s==null?void 0:s.statusCode)||i+"";t(new c3(kg(s),i,l))}).catch(s=>{t(new Ev(kg(s),s))}):t(new Ev(kg(e),e))}),m3=(e,t,r,n)=>{const s={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"||!n?s:(f3(n)?(s.headers=Object.assign({"Content-Type":"application/json"},t==null?void 0:t.headers),s.body=JSON.stringify(n)):s.body=n,t!=null&&t.duplex&&(s.duplex=t.duplex),Object.assign(Object.assign({},s),r))};function Ku(e,t,r,n,s,i){return Yo(this,void 0,void 0,function*(){return new Promise((l,u)=>{e(r,m3(t,n,s,i)).then(d=>{if(!d.ok)throw d;return n!=null&&n.noResolveJson?d:d.json()}).then(d=>l(d)).catch(d=>h3(d,u,n))})})}function Qf(e,t,r,n){return Yo(this,void 0,void 0,function*(){return Ku(e,"GET",t,r,n)})}function Ii(e,t,r,n,s){return Yo(this,void 0,void 0,function*(){return Ku(e,"POST",t,n,s,r)})}function Pv(e,t,r,n,s){return Yo(this,void 0,void 0,function*(){return Ku(e,"PUT",t,n,s,r)})}function p3(e,t,r,n){return Yo(this,void 0,void 0,function*(){return Ku(e,"HEAD",t,Object.assign(Object.assign({},r),{noResolveJson:!0}),n)})}function _C(e,t,r,n,s){return Yo(this,void 0,void 0,function*(){return Ku(e,"DELETE",t,n,s,r)})}var g3=function(e,t,r,n){function s(i){return i instanceof r?i:new r(function(l){l(i)})}return new(r||(r=Promise))(function(i,l){function u(f){try{m(n.next(f))}catch(p){l(p)}}function d(f){try{m(n.throw(f))}catch(p){l(p)}}function m(f){f.done?i(f.value):s(f.value).then(u,d)}m((n=n.apply(e,t||[])).next())})};class y3{constructor(t,r){this.downloadFn=t,this.shouldThrowOnError=r}then(t,r){return this.execute().then(t,r)}execute(){return g3(this,void 0,void 0,function*(){try{return{data:(yield this.downloadFn()).body,error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(en(t))return{data:null,error:t};throw t}})}}var v3=function(e,t,r,n){function s(i){return i instanceof r?i:new r(function(l){l(i)})}return new(r||(r=Promise))(function(i,l){function u(f){try{m(n.next(f))}catch(p){l(p)}}function d(f){try{m(n.throw(f))}catch(p){l(p)}}function m(f){f.done?i(f.value):s(f.value).then(u,d)}m((n=n.apply(e,t||[])).next())})};class x3{constructor(t,r){this.downloadFn=t,this.shouldThrowOnError=r}asStream(){return new y3(this.downloadFn,this.shouldThrowOnError)}then(t,r){return this.execute().then(t,r)}execute(){return v3(this,void 0,void 0,function*(){try{return{data:yield(yield this.downloadFn()).blob(),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(en(t))return{data:null,error:t};throw t}})}}var ys=function(e,t,r,n){function s(i){return i instanceof r?i:new r(function(l){l(i)})}return new(r||(r=Promise))(function(i,l){function u(f){try{m(n.next(f))}catch(p){l(p)}}function d(f){try{m(n.throw(f))}catch(p){l(p)}}function m(f){f.done?i(f.value):s(f.value).then(u,d)}m((n=n.apply(e,t||[])).next())})};const w3={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},Ej={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class b3{constructor(t,r={},n,s){this.shouldThrowOnError=!1,this.url=t,this.headers=r,this.bucketId=n,this.fetch=SC(s)}throwOnError(){return this.shouldThrowOnError=!0,this}uploadOrUpdate(t,r,n,s){return ys(this,void 0,void 0,function*(){try{let i;const l=Object.assign(Object.assign({},Ej),s);let u=Object.assign(Object.assign({},this.headers),t==="POST"&&{"x-upsert":String(l.upsert)});const d=l.metadata;typeof Blob<"u"&&n instanceof Blob?(i=new FormData,i.append("cacheControl",l.cacheControl),d&&i.append("metadata",this.encodeMetadata(d)),i.append("",n)):typeof FormData<"u"&&n instanceof FormData?(i=n,i.append("cacheControl",l.cacheControl),d&&i.append("metadata",this.encodeMetadata(d))):(i=n,u["cache-control"]=`max-age=${l.cacheControl}`,u["content-type"]=l.contentType,d&&(u["x-metadata"]=this.toBase64(this.encodeMetadata(d)))),s!=null&&s.headers&&(u=Object.assign(Object.assign({},u),s.headers));const m=this._removeEmptyFolders(r),f=this._getFinalPath(m),p=yield(t=="PUT"?Pv:Ii)(this.fetch,`${this.url}/object/${f}`,i,Object.assign({headers:u},l!=null&&l.duplex?{duplex:l.duplex}:{}));return{data:{path:m,id:p.Id,fullPath:p.Key},error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(en(i))return{data:null,error:i};throw i}})}upload(t,r,n){return ys(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",t,r,n)})}uploadToSignedUrl(t,r,n,s){return ys(this,void 0,void 0,function*(){const i=this._removeEmptyFolders(t),l=this._getFinalPath(i),u=new URL(this.url+`/object/upload/sign/${l}`);u.searchParams.set("token",r);try{let d;const m=Object.assign({upsert:Ej.upsert},s),f=Object.assign(Object.assign({},this.headers),{"x-upsert":String(m.upsert)});typeof Blob<"u"&&n instanceof Blob?(d=new FormData,d.append("cacheControl",m.cacheControl),d.append("",n)):typeof FormData<"u"&&n instanceof FormData?(d=n,d.append("cacheControl",m.cacheControl)):(d=n,f["cache-control"]=`max-age=${m.cacheControl}`,f["content-type"]=m.contentType);const p=yield Pv(this.fetch,u.toString(),d,{headers:f});return{data:{path:i,fullPath:p.Key},error:null}}catch(d){if(this.shouldThrowOnError)throw d;if(en(d))return{data:null,error:d};throw d}})}createSignedUploadUrl(t,r){return ys(this,void 0,void 0,function*(){try{let n=this._getFinalPath(t);const s=Object.assign({},this.headers);r!=null&&r.upsert&&(s["x-upsert"]="true");const i=yield Ii(this.fetch,`${this.url}/object/upload/sign/${n}`,{},{headers:s}),l=new URL(this.url+i.url),u=l.searchParams.get("token");if(!u)throw new J0("No token returned by API");return{data:{signedUrl:l.toString(),path:t,token:u},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(en(n))return{data:null,error:n};throw n}})}update(t,r,n){return ys(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",t,r,n)})}move(t,r,n){return ys(this,void 0,void 0,function*(){try{return{data:yield Ii(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:t,destinationKey:r,destinationBucket:n==null?void 0:n.destinationBucket},{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(en(s))return{data:null,error:s};throw s}})}copy(t,r,n){return ys(this,void 0,void 0,function*(){try{return{data:{path:(yield Ii(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:t,destinationKey:r,destinationBucket:n==null?void 0:n.destinationBucket},{headers:this.headers})).Key},error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(en(s))return{data:null,error:s};throw s}})}createSignedUrl(t,r,n){return ys(this,void 0,void 0,function*(){try{let s=this._getFinalPath(t),i=yield Ii(this.fetch,`${this.url}/object/sign/${s}`,Object.assign({expiresIn:r},n!=null&&n.transform?{transform:n.transform}:{}),{headers:this.headers});const l=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return i={signedUrl:encodeURI(`${this.url}${i.signedURL}${l}`)},{data:i,error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(en(s))return{data:null,error:s};throw s}})}createSignedUrls(t,r,n){return ys(this,void 0,void 0,function*(){try{const s=yield Ii(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:r,paths:t},{headers:this.headers}),i=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return{data:s.map(l=>Object.assign(Object.assign({},l),{signedUrl:l.signedURL?encodeURI(`${this.url}${l.signedURL}${i}`):null})),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(en(s))return{data:null,error:s};throw s}})}download(t,r){const s=typeof(r==null?void 0:r.transform)<"u"?"render/image/authenticated":"object",i=this.transformOptsToQueryString((r==null?void 0:r.transform)||{}),l=i?`?${i}`:"",u=this._getFinalPath(t),d=()=>Qf(this.fetch,`${this.url}/${s}/${u}${l}`,{headers:this.headers,noResolveJson:!0});return new x3(d,this.shouldThrowOnError)}info(t){return ys(this,void 0,void 0,function*(){const r=this._getFinalPath(t);try{const n=yield Qf(this.fetch,`${this.url}/object/info/${r}`,{headers:this.headers});return{data:Av(n),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(en(n))return{data:null,error:n};throw n}})}exists(t){return ys(this,void 0,void 0,function*(){const r=this._getFinalPath(t);try{return yield p3(this.fetch,`${this.url}/object/${r}`,{headers:this.headers}),{data:!0,error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(en(n)&&n instanceof Ev){const s=n.originalError;if([400,404].includes(s==null?void 0:s.status))return{data:!1,error:n}}throw n}})}getPublicUrl(t,r){const n=this._getFinalPath(t),s=[],i=r!=null&&r.download?`download=${r.download===!0?"":r.download}`:"";i!==""&&s.push(i);const u=typeof(r==null?void 0:r.transform)<"u"?"render/image":"object",d=this.transformOptsToQueryString((r==null?void 0:r.transform)||{});d!==""&&s.push(d);let m=s.join("&");return m!==""&&(m=`?${m}`),{data:{publicUrl:encodeURI(`${this.url}/${u}/public/${n}${m}`)}}}remove(t){return ys(this,void 0,void 0,function*(){try{return{data:yield _C(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:t},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(en(r))return{data:null,error:r};throw r}})}list(t,r,n){return ys(this,void 0,void 0,function*(){try{const s=Object.assign(Object.assign(Object.assign({},w3),r),{prefix:t||""});return{data:yield Ii(this.fetch,`${this.url}/object/list/${this.bucketId}`,s,{headers:this.headers},n),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(en(s))return{data:null,error:s};throw s}})}listV2(t,r){return ys(this,void 0,void 0,function*(){try{const n=Object.assign({},t);return{data:yield Ii(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,n,{headers:this.headers},r),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(en(n))return{data:null,error:n};throw n}})}encodeMetadata(t){return JSON.stringify(t)}toBase64(t){return typeof Buffer<"u"?Buffer.from(t).toString("base64"):btoa(t)}_getFinalPath(t){return`${this.bucketId}/${t.replace(/^\/+/,"")}`}_removeEmptyFolders(t){return t.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(t){const r=[];return t.width&&r.push(`width=${t.width}`),t.height&&r.push(`height=${t.height}`),t.resize&&r.push(`resize=${t.resize}`),t.format&&r.push(`format=${t.format}`),t.quality&&r.push(`quality=${t.quality}`),r.join("&")}}const j3="2.74.0",S3={"X-Client-Info":`storage-js/${j3}`};var Al=function(e,t,r,n){function s(i){return i instanceof r?i:new r(function(l){l(i)})}return new(r||(r=Promise))(function(i,l){function u(f){try{m(n.next(f))}catch(p){l(p)}}function d(f){try{m(n.throw(f))}catch(p){l(p)}}function m(f){f.done?i(f.value):s(f.value).then(u,d)}m((n=n.apply(e,t||[])).next())})};class _3{constructor(t,r={},n,s){this.shouldThrowOnError=!1;const i=new URL(t);s!=null&&s.useNewHostname&&/supabase\.(co|in|red)$/.test(i.hostname)&&!i.hostname.includes("storage.supabase.")&&(i.hostname=i.hostname.replace("supabase.","storage.supabase.")),this.url=i.href.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},S3),r),this.fetch=SC(n)}throwOnError(){return this.shouldThrowOnError=!0,this}listBuckets(){return Al(this,void 0,void 0,function*(){try{return{data:yield Qf(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(en(t))return{data:null,error:t};throw t}})}getBucket(t){return Al(this,void 0,void 0,function*(){try{return{data:yield Qf(this.fetch,`${this.url}/bucket/${t}`,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(en(r))return{data:null,error:r};throw r}})}createBucket(t){return Al(this,arguments,void 0,function*(r,n={public:!1}){try{return{data:yield Ii(this.fetch,`${this.url}/bucket`,{id:r,name:r,type:n.type,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(en(s))return{data:null,error:s};throw s}})}updateBucket(t,r){return Al(this,void 0,void 0,function*(){try{return{data:yield Pv(this.fetch,`${this.url}/bucket/${t}`,{id:t,name:t,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(en(n))return{data:null,error:n};throw n}})}emptyBucket(t){return Al(this,void 0,void 0,function*(){try{return{data:yield Ii(this.fetch,`${this.url}/bucket/${t}/empty`,{},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(en(r))return{data:null,error:r};throw r}})}deleteBucket(t){return Al(this,void 0,void 0,function*(){try{return{data:yield _C(this.fetch,`${this.url}/bucket/${t}`,{},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(en(r))return{data:null,error:r};throw r}})}}class N3 extends _3{constructor(t,r={},n,s){super(t,r,n,s)}from(t){return new b3(this.url,this.headers,t,this.fetch)}}const k3="2.74.0";let pu="";typeof Deno<"u"?pu="deno":typeof document<"u"?pu="web":typeof navigator<"u"&&navigator.product==="ReactNative"?pu="react-native":pu="node";const C3={"X-Client-Info":`supabase-js-${pu}/${k3}`},E3={headers:C3},A3={schema:"public"},P3={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},O3={};var T3=function(e,t,r,n){function s(i){return i instanceof r?i:new r(function(l){l(i)})}return new(r||(r=Promise))(function(i,l){function u(f){try{m(n.next(f))}catch(p){l(p)}}function d(f){try{m(n.throw(f))}catch(p){l(p)}}function m(f){f.done?i(f.value):s(f.value).then(u,d)}m((n=n.apply(e,t||[])).next())})};const I3=e=>{let t;return e?t=e:typeof fetch>"u"?t=mC:t=fetch,(...r)=>t(...r)},D3=()=>typeof Headers>"u"?pC:Headers,R3=(e,t,r)=>{const n=I3(r),s=D3();return(i,l)=>T3(void 0,void 0,void 0,function*(){var u;const d=(u=yield t())!==null&&u!==void 0?u:e;let m=new s(l==null?void 0:l.headers);return m.has("apikey")||m.set("apikey",e),m.has("Authorization")||m.set("Authorization",`Bearer ${d}`),n(i,Object.assign(Object.assign({},l),{headers:m}))})};var $3=function(e,t,r,n){function s(i){return i instanceof r?i:new r(function(l){l(i)})}return new(r||(r=Promise))(function(i,l){function u(f){try{m(n.next(f))}catch(p){l(p)}}function d(f){try{m(n.throw(f))}catch(p){l(p)}}function m(f){f.done?i(f.value):s(f.value).then(u,d)}m((n=n.apply(e,t||[])).next())})};function M3(e){return e.endsWith("/")?e:e+"/"}function F3(e,t){var r,n;const{db:s,auth:i,realtime:l,global:u}=e,{db:d,auth:m,realtime:f,global:p}=t,y={db:Object.assign(Object.assign({},d),s),auth:Object.assign(Object.assign({},m),i),realtime:Object.assign(Object.assign({},f),l),storage:{},global:Object.assign(Object.assign(Object.assign({},p),u),{headers:Object.assign(Object.assign({},(r=p==null?void 0:p.headers)!==null&&r!==void 0?r:{}),(n=u==null?void 0:u.headers)!==null&&n!==void 0?n:{})}),accessToken:()=>$3(this,void 0,void 0,function*(){return""})};return e.accessToken?y.accessToken=e.accessToken:delete y.accessToken,y}function L3(e){const t=e==null?void 0:e.trim();if(!t)throw new Error("supabaseUrl is required.");if(!t.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(M3(t))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}const NC="2.74.0",Ul=30*1e3,Ov=3,Cg=Ov*Ul,z3="http://localhost:9999",B3="supabase.auth.token",U3={"X-Client-Info":`gotrue-js/${NC}`},Tv="X-Supabase-Api-Version",kC={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},W3=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,V3=600*1e3;class Eu extends Error{constructor(t,r,n){super(t),this.__isAuthError=!0,this.name="AuthError",this.status=r,this.code=n}}function dt(e){return typeof e=="object"&&e!==null&&"__isAuthError"in e}class q3 extends Eu{constructor(t,r,n){super(t,r,n),this.name="AuthApiError",this.status=r,this.code=n}}function H3(e){return dt(e)&&e.name==="AuthApiError"}class Po extends Eu{constructor(t,r){super(t),this.name="AuthUnknownError",this.originalError=r}}class no extends Eu{constructor(t,r,n,s){super(t,n,s),this.name=r,this.status=n}}class qa extends no{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function K3(e){return dt(e)&&e.name==="AuthSessionMissingError"}class Pl extends no{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class gf extends no{constructor(t){super(t,"AuthInvalidCredentialsError",400,void 0)}}class yf extends no{constructor(t,r=null){super(t,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function G3(e){return dt(e)&&e.name==="AuthImplicitGrantRedirectError"}class Aj extends no{constructor(t,r=null){super(t,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Iv extends no{constructor(t,r){super(t,"AuthRetryableFetchError",r,void 0)}}function Eg(e){return dt(e)&&e.name==="AuthRetryableFetchError"}class Pj extends no{constructor(t,r,n){super(t,"AuthWeakPasswordError",r,"weak_password"),this.reasons=n}}class Dv extends no{constructor(t){super(t,"AuthInvalidJwtError",400,"invalid_jwt")}}const Xf="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),Oj=` 	
\r=`.split(""),Y3=(()=>{const e=new Array(128);for(let t=0;t<e.length;t+=1)e[t]=-1;for(let t=0;t<Oj.length;t+=1)e[Oj[t].charCodeAt(0)]=-2;for(let t=0;t<Xf.length;t+=1)e[Xf[t].charCodeAt(0)]=t;return e})();function Tj(e,t,r){if(e!==null)for(t.queue=t.queue<<8|e,t.queuedBits+=8;t.queuedBits>=6;){const n=t.queue>>t.queuedBits-6&63;r(Xf[n]),t.queuedBits-=6}else if(t.queuedBits>0)for(t.queue=t.queue<<6-t.queuedBits,t.queuedBits=6;t.queuedBits>=6;){const n=t.queue>>t.queuedBits-6&63;r(Xf[n]),t.queuedBits-=6}}function CC(e,t,r){const n=Y3[e];if(n>-1)for(t.queue=t.queue<<6|n,t.queuedBits+=6;t.queuedBits>=8;)r(t.queue>>t.queuedBits-8&255),t.queuedBits-=8;else{if(n===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(e)}"`)}}function Ij(e){const t=[],r=l=>{t.push(String.fromCodePoint(l))},n={utf8seq:0,codepoint:0},s={queue:0,queuedBits:0},i=l=>{X3(l,n,r)};for(let l=0;l<e.length;l+=1)CC(e.charCodeAt(l),s,i);return t.join("")}function J3(e,t){if(e<=127){t(e);return}else if(e<=2047){t(192|e>>6),t(128|e&63);return}else if(e<=65535){t(224|e>>12),t(128|e>>6&63),t(128|e&63);return}else if(e<=1114111){t(240|e>>18),t(128|e>>12&63),t(128|e>>6&63),t(128|e&63);return}throw new Error(`Unrecognized Unicode codepoint: ${e.toString(16)}`)}function Q3(e,t){for(let r=0;r<e.length;r+=1){let n=e.charCodeAt(r);if(n>55295&&n<=56319){const s=(n-55296)*1024&65535;n=(e.charCodeAt(r+1)-56320&65535|s)+65536,r+=1}J3(n,t)}}function X3(e,t,r){if(t.utf8seq===0){if(e<=127){r(e);return}for(let n=1;n<6;n+=1)if((e>>7-n&1)===0){t.utf8seq=n;break}if(t.utf8seq===2)t.codepoint=e&31;else if(t.utf8seq===3)t.codepoint=e&15;else if(t.utf8seq===4)t.codepoint=e&7;else throw new Error("Invalid UTF-8 sequence");t.utf8seq-=1}else if(t.utf8seq>0){if(e<=127)throw new Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|e&63,t.utf8seq-=1,t.utf8seq===0&&r(t.codepoint)}}function Jl(e){const t=[],r={queue:0,queuedBits:0},n=s=>{t.push(s)};for(let s=0;s<e.length;s+=1)CC(e.charCodeAt(s),r,n);return new Uint8Array(t)}function Z3(e){const t=[];return Q3(e,r=>t.push(r)),new Uint8Array(t)}function Oo(e){const t=[],r={queue:0,queuedBits:0},n=s=>{t.push(s)};return e.forEach(s=>Tj(s,r,n)),Tj(null,r,n),t.join("")}function eR(e){return Math.round(Date.now()/1e3)+e}function tR(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){const t=Math.random()*16|0;return(e=="x"?t:t&3|8).toString(16)})}const Ps=()=>typeof window<"u"&&typeof document<"u",So={tested:!1,writable:!1},EC=()=>{if(!Ps())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(So.tested)return So.writable;const e=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),So.tested=!0,So.writable=!0}catch{So.tested=!0,So.writable=!1}return So.writable};function rR(e){const t={},r=new URL(e);if(r.hash&&r.hash[0]==="#")try{new URLSearchParams(r.hash.substring(1)).forEach((s,i)=>{t[i]=s})}catch{}return r.searchParams.forEach((n,s)=>{t[s]=n}),t}const AC=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...r)=>Hu(async()=>{const{default:n}=await Promise.resolve().then(()=>gc);return{default:n}},void 0,import.meta.url).then(({default:n})=>n(...r)):t=fetch,(...r)=>t(...r)},nR=e=>typeof e=="object"&&e!==null&&"status"in e&&"ok"in e&&"json"in e&&typeof e.json=="function",Wl=async(e,t,r)=>{await e.setItem(t,JSON.stringify(r))},_o=async(e,t)=>{const r=await e.getItem(t);if(!r)return null;try{return JSON.parse(r)}catch{return r}},Va=async(e,t)=>{await e.removeItem(t)};class Xh{constructor(){this.promise=new Xh.promiseConstructor((t,r)=>{this.resolve=t,this.reject=r})}}Xh.promiseConstructor=Promise;function Ag(e){const t=e.split(".");if(t.length!==3)throw new Dv("Invalid JWT structure");for(let n=0;n<t.length;n++)if(!W3.test(t[n]))throw new Dv("JWT not in base64url format");return{header:JSON.parse(Ij(t[0])),payload:JSON.parse(Ij(t[1])),signature:Jl(t[2]),raw:{header:t[0],payload:t[1]}}}async function sR(e){return await new Promise(t=>{setTimeout(()=>t(null),e)})}function iR(e,t){return new Promise((n,s)=>{(async()=>{for(let i=0;i<1/0;i++)try{const l=await e(i);if(!t(i,null,l)){n(l);return}}catch(l){if(!t(i,l)){s(l);return}}})()})}function aR(e){return("0"+e.toString(16)).substr(-2)}function oR(){const t=new Uint32Array(56);if(typeof crypto>"u"){const r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",n=r.length;let s="";for(let i=0;i<56;i++)s+=r.charAt(Math.floor(Math.random()*n));return s}return crypto.getRandomValues(t),Array.from(t,aR).join("")}async function lR(e){const r=new TextEncoder().encode(e),n=await crypto.subtle.digest("SHA-256",r),s=new Uint8Array(n);return Array.from(s).map(i=>String.fromCharCode(i)).join("")}async function cR(e){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),e;const r=await lR(e);return btoa(r).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Ol(e,t,r=!1){const n=oR();let s=n;r&&(s+="/PASSWORD_RECOVERY"),await Wl(e,`${t}-code-verifier`,s);const i=await cR(n);return[i,n===i?"plain":"s256"]}const uR=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function dR(e){const t=e.headers.get(Tv);if(!t||!t.match(uR))return null;try{return new Date(`${t}T00:00:00.0Z`)}catch{return null}}function fR(e){if(!e)throw new Error("Missing exp claim");const t=Math.floor(Date.now()/1e3);if(e<=t)throw new Error("JWT has expired")}function hR(e){switch(e){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const mR=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Tl(e){if(!mR.test(e))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function Pg(){const e={};return new Proxy(e,{get:(t,r)=>{if(r==="__isUserNotAvailableProxy")return!0;if(typeof r=="symbol"){const n=r.toString();if(n==="Symbol(Symbol.toPrimitive)"||n==="Symbol(Symbol.toStringTag)"||n==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${r}" property of the session object is not supported. Please use getUser() instead.`)},set:(t,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(t,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function Dj(e){return JSON.parse(JSON.stringify(e))}var pR=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(e);s<n.length;s++)t.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(e,n[s])&&(r[n[s]]=e[n[s]]);return r};const No=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),gR=[502,503,504];async function Rj(e){var t;if(!nR(e))throw new Iv(No(e),0);if(gR.includes(e.status))throw new Iv(No(e),e.status);let r;try{r=await e.json()}catch(i){throw new Po(No(i),i)}let n;const s=dR(e);if(s&&s.getTime()>=kC["2024-01-01"].timestamp&&typeof r=="object"&&r&&typeof r.code=="string"?n=r.code:typeof r=="object"&&r&&typeof r.error_code=="string"&&(n=r.error_code),n){if(n==="weak_password")throw new Pj(No(r),e.status,((t=r.weak_password)===null||t===void 0?void 0:t.reasons)||[]);if(n==="session_not_found")throw new qa}else if(typeof r=="object"&&r&&typeof r.weak_password=="object"&&r.weak_password&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.reasons.reduce((i,l)=>i&&typeof l=="string",!0))throw new Pj(No(r),e.status,r.weak_password.reasons);throw new q3(No(r),e.status||500,n)}const yR=(e,t,r,n)=>{const s={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"?s:(s.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},t==null?void 0:t.headers),s.body=JSON.stringify(n),Object.assign(Object.assign({},s),r))};async function St(e,t,r,n){var s;const i=Object.assign({},n==null?void 0:n.headers);i[Tv]||(i[Tv]=kC["2024-01-01"].name),n!=null&&n.jwt&&(i.Authorization=`Bearer ${n.jwt}`);const l=(s=n==null?void 0:n.query)!==null&&s!==void 0?s:{};n!=null&&n.redirectTo&&(l.redirect_to=n.redirectTo);const u=Object.keys(l).length?"?"+new URLSearchParams(l).toString():"",d=await vR(e,t,r+u,{headers:i,noResolveJson:n==null?void 0:n.noResolveJson},{},n==null?void 0:n.body);return n!=null&&n.xform?n==null?void 0:n.xform(d):{data:Object.assign({},d),error:null}}async function vR(e,t,r,n,s,i){const l=yR(t,n,s,i);let u;try{u=await e(r,Object.assign({},l))}catch(d){throw console.error(d),new Iv(No(d),0)}if(u.ok||await Rj(u),n!=null&&n.noResolveJson)return u;try{return await u.json()}catch(d){await Rj(d)}}function mi(e){var t;let r=null;bR(e)&&(r=Object.assign({},e),e.expires_at||(r.expires_at=eR(e.expires_in)));const n=(t=e.user)!==null&&t!==void 0?t:e;return{data:{session:r,user:n},error:null}}function $j(e){const t=mi(e);return!t.error&&e.weak_password&&typeof e.weak_password=="object"&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.message&&typeof e.weak_password.message=="string"&&e.weak_password.reasons.reduce((r,n)=>r&&typeof n=="string",!0)&&(t.data.weak_password=e.weak_password),t}function Ja(e){var t;return{data:{user:(t=e.user)!==null&&t!==void 0?t:e},error:null}}function xR(e){return{data:e,error:null}}function wR(e){const{action_link:t,email_otp:r,hashed_token:n,redirect_to:s,verification_type:i}=e,l=pR(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),u={action_link:t,email_otp:r,hashed_token:n,redirect_to:s,verification_type:i},d=Object.assign({},l);return{data:{properties:u,user:d},error:null}}function Mj(e){return e}function bR(e){return e.access_token&&e.refresh_token&&e.expires_in}const Og=["global","local","others"];var jR=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(e);s<n.length;s++)t.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(e,n[s])&&(r[n[s]]=e[n[s]]);return r};class SR{constructor({url:t="",headers:r={},fetch:n}){this.url=t,this.headers=r,this.fetch=AC(n),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(t,r=Og[0]){if(Og.indexOf(r)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${Og.join(", ")}`);try{return await St(this.fetch,"POST",`${this.url}/logout?scope=${r}`,{headers:this.headers,jwt:t,noResolveJson:!0}),{data:null,error:null}}catch(n){if(dt(n))return{data:null,error:n};throw n}}async inviteUserByEmail(t,r={}){try{return await St(this.fetch,"POST",`${this.url}/invite`,{body:{email:t,data:r.data},headers:this.headers,redirectTo:r.redirectTo,xform:Ja})}catch(n){if(dt(n))return{data:{user:null},error:n};throw n}}async generateLink(t){try{const{options:r}=t,n=jR(t,["options"]),s=Object.assign(Object.assign({},n),r);return"newEmail"in n&&(s.new_email=n==null?void 0:n.newEmail,delete s.newEmail),await St(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:s,headers:this.headers,xform:wR,redirectTo:r==null?void 0:r.redirectTo})}catch(r){if(dt(r))return{data:{properties:null,user:null},error:r};throw r}}async createUser(t){try{return await St(this.fetch,"POST",`${this.url}/admin/users`,{body:t,headers:this.headers,xform:Ja})}catch(r){if(dt(r))return{data:{user:null},error:r};throw r}}async listUsers(t){var r,n,s,i,l,u,d;try{const m={nextPage:null,lastPage:0,total:0},f=await St(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(r=t==null?void 0:t.page)===null||r===void 0?void 0:r.toString())!==null&&n!==void 0?n:"",per_page:(i=(s=t==null?void 0:t.perPage)===null||s===void 0?void 0:s.toString())!==null&&i!==void 0?i:""},xform:Mj});if(f.error)throw f.error;const p=await f.json(),y=(l=f.headers.get("x-total-count"))!==null&&l!==void 0?l:0,x=(d=(u=f.headers.get("link"))===null||u===void 0?void 0:u.split(","))!==null&&d!==void 0?d:[];return x.length>0&&(x.forEach(j=>{const b=parseInt(j.split(";")[0].split("=")[1].substring(0,1)),S=JSON.parse(j.split(";")[1].split("=")[1]);m[`${S}Page`]=b}),m.total=parseInt(y)),{data:Object.assign(Object.assign({},p),m),error:null}}catch(m){if(dt(m))return{data:{users:[]},error:m};throw m}}async getUserById(t){Tl(t);try{return await St(this.fetch,"GET",`${this.url}/admin/users/${t}`,{headers:this.headers,xform:Ja})}catch(r){if(dt(r))return{data:{user:null},error:r};throw r}}async updateUserById(t,r){Tl(t);try{return await St(this.fetch,"PUT",`${this.url}/admin/users/${t}`,{body:r,headers:this.headers,xform:Ja})}catch(n){if(dt(n))return{data:{user:null},error:n};throw n}}async deleteUser(t,r=!1){Tl(t);try{return await St(this.fetch,"DELETE",`${this.url}/admin/users/${t}`,{headers:this.headers,body:{should_soft_delete:r},xform:Ja})}catch(n){if(dt(n))return{data:{user:null},error:n};throw n}}async _listFactors(t){Tl(t.userId);try{const{data:r,error:n}=await St(this.fetch,"GET",`${this.url}/admin/users/${t.userId}/factors`,{headers:this.headers,xform:s=>({data:{factors:s},error:null})});return{data:r,error:n}}catch(r){if(dt(r))return{data:null,error:r};throw r}}async _deleteFactor(t){Tl(t.userId),Tl(t.id);try{return{data:await St(this.fetch,"DELETE",`${this.url}/admin/users/${t.userId}/factors/${t.id}`,{headers:this.headers}),error:null}}catch(r){if(dt(r))return{data:null,error:r};throw r}}async _listOAuthClients(t){var r,n,s,i,l,u,d;try{const m={nextPage:null,lastPage:0,total:0},f=await St(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(r=t==null?void 0:t.page)===null||r===void 0?void 0:r.toString())!==null&&n!==void 0?n:"",per_page:(i=(s=t==null?void 0:t.perPage)===null||s===void 0?void 0:s.toString())!==null&&i!==void 0?i:""},xform:Mj});if(f.error)throw f.error;const p=await f.json(),y=(l=f.headers.get("x-total-count"))!==null&&l!==void 0?l:0,x=(d=(u=f.headers.get("link"))===null||u===void 0?void 0:u.split(","))!==null&&d!==void 0?d:[];return x.length>0&&(x.forEach(j=>{const b=parseInt(j.split(";")[0].split("=")[1].substring(0,1)),S=JSON.parse(j.split(";")[1].split("=")[1]);m[`${S}Page`]=b}),m.total=parseInt(y)),{data:Object.assign(Object.assign({},p),m),error:null}}catch(m){if(dt(m))return{data:{clients:[]},error:m};throw m}}async _createOAuthClient(t){try{return await St(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:t,headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(dt(r))return{data:null,error:r};throw r}}async _getOAuthClient(t){try{return await St(this.fetch,"GET",`${this.url}/admin/oauth/clients/${t}`,{headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(dt(r))return{data:null,error:r};throw r}}async _deleteOAuthClient(t){try{return await St(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${t}`,{headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(dt(r))return{data:null,error:r};throw r}}async _regenerateOAuthClientSecret(t){try{return await St(this.fetch,"POST",`${this.url}/admin/oauth/clients/${t}/regenerate_secret`,{headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(dt(r))return{data:null,error:r};throw r}}}function Fj(e={}){return{getItem:t=>e[t]||null,setItem:(t,r)=>{e[t]=r},removeItem:t=>{delete e[t]}}}const Il={debug:!!(globalThis&&EC()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class PC extends Error{constructor(t){super(t),this.isAcquireTimeout=!0}}class _R extends PC{}async function NR(e,t,r){Il.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",e,t);const n=new globalThis.AbortController;return t>0&&setTimeout(()=>{n.abort(),Il.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",e)},t),await Promise.resolve().then(()=>globalThis.navigator.locks.request(e,t===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:n.signal},async s=>{if(s){Il.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",e,s.name);try{return await r()}finally{Il.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",e,s.name)}}else{if(t===0)throw Il.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",e),new _R(`Acquiring an exclusive Navigator LockManager lock "${e}" immediately failed`);if(Il.debug)try{const i=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(i,null,"  "))}catch(i){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",i)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await r()}}))}function kR(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function OC(e){if(!/^0x[a-fA-F0-9]{40}$/.test(e))throw new Error(`@supabase/auth-js: Address "${e}" is invalid.`);return e.toLowerCase()}function CR(e){return parseInt(e,16)}function ER(e){const t=new TextEncoder().encode(e);return"0x"+Array.from(t,n=>n.toString(16).padStart(2,"0")).join("")}function AR(e){var t;const{chainId:r,domain:n,expirationTime:s,issuedAt:i=new Date,nonce:l,notBefore:u,requestId:d,resources:m,scheme:f,uri:p,version:y}=e;{if(!Number.isInteger(r))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${r}`);if(!n)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(l&&l.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${l}`);if(!p)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(y!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${y}`);if(!((t=e.statement)===null||t===void 0)&&t.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${e.statement}`)}const x=OC(e.address),j=f?`${f}://${n}`:n,b=e.statement?`${e.statement}
`:"",S=`${j} wants you to sign in with your Ethereum account:
${x}

${b}`;let N=`URI: ${p}
Version: ${y}
Chain ID: ${r}${l?`
Nonce: ${l}`:""}
Issued At: ${i.toISOString()}`;if(s&&(N+=`
Expiration Time: ${s.toISOString()}`),u&&(N+=`
Not Before: ${u.toISOString()}`),d&&(N+=`
Request ID: ${d}`),m){let E=`
Resources:`;for(const k of m){if(!k||typeof k!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${k}`);E+=`
- ${k}`}N+=E}return`${S}
${N}`}class Zr extends Error{constructor({message:t,code:r,cause:n,name:s}){var i;super(t,{cause:n}),this.__isWebAuthnError=!0,this.name=(i=s??(n instanceof Error?n.name:void 0))!==null&&i!==void 0?i:"Unknown Error",this.code=r}}class Zf extends Zr{constructor(t,r){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:r,message:t}),this.name="WebAuthnUnknownError",this.originalError=r}}function PR({error:e,options:t}){var r,n,s;const{publicKey:i}=t;if(!i)throw Error("options was missing required publicKey property");if(e.name==="AbortError"){if(t.signal instanceof AbortSignal)return new Zr({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:e})}else if(e.name==="ConstraintError"){if(((r=i.authenticatorSelection)===null||r===void 0?void 0:r.requireResidentKey)===!0)return new Zr({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:e});if(t.mediation==="conditional"&&((n=i.authenticatorSelection)===null||n===void 0?void 0:n.userVerification)==="required")return new Zr({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:e});if(((s=i.authenticatorSelection)===null||s===void 0?void 0:s.userVerification)==="required")return new Zr({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:e})}else{if(e.name==="InvalidStateError")return new Zr({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:e});if(e.name==="NotAllowedError")return new Zr({message:e.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e});if(e.name==="NotSupportedError")return i.pubKeyCredParams.filter(u=>u.type==="public-key").length===0?new Zr({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:e}):new Zr({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:e});if(e.name==="SecurityError"){const l=window.location.hostname;if(IC(l)){if(i.rp.id!==l)return new Zr({message:`The RP ID "${i.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:e})}else return new Zr({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:e})}else if(e.name==="TypeError"){if(i.user.id.byteLength<1||i.user.id.byteLength>64)return new Zr({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:e})}else if(e.name==="UnknownError")return new Zr({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:e})}return new Zr({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e})}function OR({error:e,options:t}){const{publicKey:r}=t;if(!r)throw Error("options was missing required publicKey property");if(e.name==="AbortError"){if(t.signal instanceof AbortSignal)return new Zr({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:e})}else{if(e.name==="NotAllowedError")return new Zr({message:e.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e});if(e.name==="SecurityError"){const n=window.location.hostname;if(IC(n)){if(r.rpId!==n)return new Zr({message:`The RP ID "${r.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:e})}else return new Zr({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:e})}else if(e.name==="UnknownError")return new Zr({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:e})}return new Zr({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e})}var TC=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(e);s<n.length;s++)t.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(e,n[s])&&(r[n[s]]=e[n[s]]);return r};class TR{createNewAbortSignal(){if(this.controller){const r=new Error("Cancelling existing WebAuthn API call for new one");r.name="AbortError",this.controller.abort(r)}const t=new AbortController;return this.controller=t,t.signal}cancelCeremony(){if(this.controller){const t=new Error("Manually cancelling existing WebAuthn API call");t.name="AbortError",this.controller.abort(t),this.controller=void 0}}}const IR=new TR;function DR(e){if(!e)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(e);const{challenge:t,user:r,excludeCredentials:n}=e,s=TC(e,["challenge","user","excludeCredentials"]),i=Jl(t).buffer,l=Object.assign(Object.assign({},r),{id:Jl(r.id).buffer}),u=Object.assign(Object.assign({},s),{challenge:i,user:l});if(n&&n.length>0){u.excludeCredentials=new Array(n.length);for(let d=0;d<n.length;d++){const m=n[d];u.excludeCredentials[d]=Object.assign(Object.assign({},m),{id:Jl(m.id).buffer,type:m.type||"public-key",transports:m.transports})}}return u}function RR(e){if(!e)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(e);const{challenge:t,allowCredentials:r}=e,n=TC(e,["challenge","allowCredentials"]),s=Jl(t).buffer,i=Object.assign(Object.assign({},n),{challenge:s});if(r&&r.length>0){i.allowCredentials=new Array(r.length);for(let l=0;l<r.length;l++){const u=r[l];i.allowCredentials[l]=Object.assign(Object.assign({},u),{id:Jl(u.id).buffer,type:u.type||"public-key",transports:u.transports})}}return i}function $R(e){var t;if("toJSON"in e&&typeof e.toJSON=="function")return e.toJSON();const r=e;return{id:e.id,rawId:e.id,response:{attestationObject:Oo(new Uint8Array(e.response.attestationObject)),clientDataJSON:Oo(new Uint8Array(e.response.clientDataJSON))},type:"public-key",clientExtensionResults:e.getClientExtensionResults(),authenticatorAttachment:(t=r.authenticatorAttachment)!==null&&t!==void 0?t:void 0}}function MR(e){var t;if("toJSON"in e&&typeof e.toJSON=="function")return e.toJSON();const r=e,n=e.getClientExtensionResults(),s=e.response;return{id:e.id,rawId:e.id,response:{authenticatorData:Oo(new Uint8Array(s.authenticatorData)),clientDataJSON:Oo(new Uint8Array(s.clientDataJSON)),signature:Oo(new Uint8Array(s.signature)),userHandle:s.userHandle?Oo(new Uint8Array(s.userHandle)):void 0},type:"public-key",clientExtensionResults:n,authenticatorAttachment:(t=r.authenticatorAttachment)!==null&&t!==void 0?t:void 0}}function IC(e){return e==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(e)}function Lj(){var e,t;return!!(Ps()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((e=navigator==null?void 0:navigator.credentials)===null||e===void 0?void 0:e.create)=="function"&&typeof((t=navigator==null?void 0:navigator.credentials)===null||t===void 0?void 0:t.get)=="function")}async function FR(e){try{const t=await navigator.credentials.create(e);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new Zf("Browser returned unexpected credential type",t)}:{data:null,error:new Zf("Empty credential response",t)}}catch(t){return{data:null,error:PR({error:t,options:e})}}}async function LR(e){try{const t=await navigator.credentials.get(e);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new Zf("Browser returned unexpected credential type",t)}:{data:null,error:new Zf("Empty credential response",t)}}catch(t){return{data:null,error:OR({error:t,options:e})}}}const zR={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"none"},BR={userVerification:"preferred",hints:["security-key"]};function eh(...e){const t=s=>s!==null&&typeof s=="object"&&!Array.isArray(s),r=s=>s instanceof ArrayBuffer||ArrayBuffer.isView(s),n={};for(const s of e)if(s)for(const i in s){const l=s[i];if(l!==void 0)if(Array.isArray(l))n[i]=l;else if(r(l))n[i]=l;else if(t(l)){const u=n[i];t(u)?n[i]=eh(u,l):n[i]=eh(l)}else n[i]=l}return n}function UR(e,t){return eh(zR,e,t||{})}function WR(e,t){return eh(BR,e,t||{})}class VR{constructor(t){this.client=t,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(t){return this.client.mfa.enroll(Object.assign(Object.assign({},t),{factorType:"webauthn"}))}async _challenge({factorId:t,webauthn:r,friendlyName:n,signal:s},i){try{const{data:l,error:u}=await this.client.mfa.challenge({factorId:t,webauthn:r});if(!l)return{data:null,error:u};const d=s??IR.createNewAbortSignal();if(l.webauthn.type==="create"){const{user:m}=l.webauthn.credential_options.publicKey;m.name||(m.name=`${m.id}:${n}`),m.displayName||(m.displayName=m.name)}switch(l.webauthn.type){case"create":{const m=UR(l.webauthn.credential_options.publicKey,i==null?void 0:i.create),{data:f,error:p}=await FR({publicKey:m,signal:d});return f?{data:{factorId:t,challengeId:l.id,webauthn:{type:l.webauthn.type,credential_response:f}},error:null}:{data:null,error:p}}case"request":{const m=WR(l.webauthn.credential_options.publicKey,i==null?void 0:i.request),{data:f,error:p}=await LR(Object.assign(Object.assign({},l.webauthn.credential_options),{publicKey:m,signal:d}));return f?{data:{factorId:t,challengeId:l.id,webauthn:{type:l.webauthn.type,credential_response:f}},error:null}:{data:null,error:p}}}}catch(l){return dt(l)?{data:null,error:l}:{data:null,error:new Po("Unexpected error in challenge",l)}}}async _verify({challengeId:t,factorId:r,webauthn:n}){return this.client.mfa.verify({factorId:r,challengeId:t,webauthn:n})}async _authenticate({factorId:t,webauthn:{rpId:r=typeof window<"u"?window.location.hostname:void 0,rpOrigins:n=typeof window<"u"?[window.location.origin]:void 0,signal:s}},i){if(!r)return{data:null,error:new Eu("rpId is required for WebAuthn authentication")};try{if(!Lj())return{data:null,error:new Po("Browser does not support WebAuthn",null)};const{data:l,error:u}=await this.challenge({factorId:t,webauthn:{rpId:r,rpOrigins:n},signal:s},{request:i});if(!l)return{data:null,error:u};const{webauthn:d}=l;return this._verify({factorId:t,challengeId:l.challengeId,webauthn:{type:d.type,rpId:r,rpOrigins:n,credential_response:d.credential_response}})}catch(l){return dt(l)?{data:null,error:l}:{data:null,error:new Po("Unexpected error in authenticate",l)}}}async _register({friendlyName:t,rpId:r=typeof window<"u"?window.location.hostname:void 0,rpOrigins:n=typeof window<"u"?[window.location.origin]:void 0,signal:s},i){if(!r)return{data:null,error:new Eu("rpId is required for WebAuthn registration")};try{if(!Lj())return{data:null,error:new Po("Browser does not support WebAuthn",null)};const{data:l,error:u}=await this._enroll({friendlyName:t});if(!l)return await this.client.mfa.listFactors().then(f=>{var p;return(p=f.data)===null||p===void 0?void 0:p.all.find(y=>y.factor_type==="webauthn"&&y.friendly_name===t&&y.status!=="unverified")}).then(f=>f?this.client.mfa.unenroll({factorId:f==null?void 0:f.id}):void 0),{data:null,error:u};const{data:d,error:m}=await this._challenge({factorId:l.id,friendlyName:l.friendly_name,webauthn:{rpId:r,rpOrigins:n},signal:s},{create:i});return d?this._verify({factorId:l.id,challengeId:d.challengeId,webauthn:{rpId:r,rpOrigins:n,type:d.webauthn.type,credential_response:d.webauthn.credential_response}}):{data:null,error:m}}catch(l){return dt(l)?{data:null,error:l}:{data:null,error:new Po("Unexpected error in register",l)}}}}kR();const qR={url:z3,storageKey:B3,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:U3,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function zj(e,t,r){return await r()}const Dl={};class Au{get jwks(){var t,r;return(r=(t=Dl[this.storageKey])===null||t===void 0?void 0:t.jwks)!==null&&r!==void 0?r:{keys:[]}}set jwks(t){Dl[this.storageKey]=Object.assign(Object.assign({},Dl[this.storageKey]),{jwks:t})}get jwks_cached_at(){var t,r;return(r=(t=Dl[this.storageKey])===null||t===void 0?void 0:t.cachedAt)!==null&&r!==void 0?r:Number.MIN_SAFE_INTEGER}set jwks_cached_at(t){Dl[this.storageKey]=Object.assign(Object.assign({},Dl[this.storageKey]),{cachedAt:t})}constructor(t){var r,n;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=Au.nextInstanceID,Au.nextInstanceID+=1,this.instanceID>0&&Ps()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const s=Object.assign(Object.assign({},qR),t);if(this.logDebugMessages=!!s.debug,typeof s.debug=="function"&&(this.logger=s.debug),this.persistSession=s.persistSession,this.storageKey=s.storageKey,this.autoRefreshToken=s.autoRefreshToken,this.admin=new SR({url:s.url,headers:s.headers,fetch:s.fetch}),this.url=s.url,this.headers=s.headers,this.fetch=AC(s.fetch),this.lock=s.lock||zj,this.detectSessionInUrl=s.detectSessionInUrl,this.flowType=s.flowType,this.hasCustomAuthorizationHeader=s.hasCustomAuthorizationHeader,s.lock?this.lock=s.lock:Ps()&&(!((r=globalThis==null?void 0:globalThis.navigator)===null||r===void 0)&&r.locks)?this.lock=NR:this.lock=zj,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new VR(this)},this.persistSession?(s.storage?this.storage=s.storage:EC()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=Fj(this.memoryStorage)),s.userStorage&&(this.userStorage=s.userStorage)):(this.memoryStorage={},this.storage=Fj(this.memoryStorage)),Ps()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(i){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",i)}(n=this.broadcastChannel)===null||n===void 0||n.addEventListener("message",async i=>{this._debug("received broadcast notification from other tab or client",i),await this._notifyAllSubscribers(i.data.event,i.data.session,!1)})}this.initialize()}_debug(...t){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${NC}) ${new Date().toISOString()}`,...t),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var t;try{const r=rR(window.location.href);let n="none";if(this._isImplicitGrantCallback(r)?n="implicit":await this._isPKCECallback(r)&&(n="pkce"),Ps()&&this.detectSessionInUrl&&n!=="none"){const{data:s,error:i}=await this._getSessionFromURL(r,n);if(i){if(this._debug("#_initialize()","error detecting session from URL",i),G3(i)){const d=(t=i.details)===null||t===void 0?void 0:t.code;if(d==="identity_already_exists"||d==="identity_not_found"||d==="single_identity_not_deletable")return{error:i}}return await this._removeSession(),{error:i}}const{session:l,redirectType:u}=s;return this._debug("#_initialize()","detected session in URL",l,"redirect type",u),await this._saveSession(l),setTimeout(async()=>{u==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",l):await this._notifyAllSubscribers("SIGNED_IN",l)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(r){return dt(r)?{error:r}:{error:new Po("Unexpected error during initialization",r)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(t){var r,n,s;try{const i=await St(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(n=(r=t==null?void 0:t.options)===null||r===void 0?void 0:r.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:(s=t==null?void 0:t.options)===null||s===void 0?void 0:s.captchaToken}},xform:mi}),{data:l,error:u}=i;if(u||!l)return{data:{user:null,session:null},error:u};const d=l.session,m=l.user;return l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",d)),{data:{user:m,session:d},error:null}}catch(i){if(dt(i))return{data:{user:null,session:null},error:i};throw i}}async signUp(t){var r,n,s;try{let i;if("email"in t){const{email:f,password:p,options:y}=t;let x=null,j=null;this.flowType==="pkce"&&([x,j]=await Ol(this.storage,this.storageKey)),i=await St(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:y==null?void 0:y.emailRedirectTo,body:{email:f,password:p,data:(r=y==null?void 0:y.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:y==null?void 0:y.captchaToken},code_challenge:x,code_challenge_method:j},xform:mi})}else if("phone"in t){const{phone:f,password:p,options:y}=t;i=await St(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:f,password:p,data:(n=y==null?void 0:y.data)!==null&&n!==void 0?n:{},channel:(s=y==null?void 0:y.channel)!==null&&s!==void 0?s:"sms",gotrue_meta_security:{captcha_token:y==null?void 0:y.captchaToken}},xform:mi})}else throw new gf("You must provide either an email or phone number and a password");const{data:l,error:u}=i;if(u||!l)return{data:{user:null,session:null},error:u};const d=l.session,m=l.user;return l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",d)),{data:{user:m,session:d},error:null}}catch(i){if(dt(i))return{data:{user:null,session:null},error:i};throw i}}async signInWithPassword(t){try{let r;if("email"in t){const{email:i,password:l,options:u}=t;r=await St(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:i,password:l,gotrue_meta_security:{captcha_token:u==null?void 0:u.captchaToken}},xform:$j})}else if("phone"in t){const{phone:i,password:l,options:u}=t;r=await St(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:i,password:l,gotrue_meta_security:{captcha_token:u==null?void 0:u.captchaToken}},xform:$j})}else throw new gf("You must provide either an email or phone number and a password");const{data:n,error:s}=r;return s?{data:{user:null,session:null},error:s}:!n||!n.session||!n.user?{data:{user:null,session:null},error:new Pl}:(n.session&&(await this._saveSession(n.session),await this._notifyAllSubscribers("SIGNED_IN",n.session)),{data:Object.assign({user:n.user,session:n.session},n.weak_password?{weakPassword:n.weak_password}:null),error:s})}catch(r){if(dt(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithOAuth(t){var r,n,s,i;return await this._handleProviderSignIn(t.provider,{redirectTo:(r=t.options)===null||r===void 0?void 0:r.redirectTo,scopes:(n=t.options)===null||n===void 0?void 0:n.scopes,queryParams:(s=t.options)===null||s===void 0?void 0:s.queryParams,skipBrowserRedirect:(i=t.options)===null||i===void 0?void 0:i.skipBrowserRedirect})}async exchangeCodeForSession(t){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(t))}async signInWithWeb3(t){const{chain:r}=t;switch(r){case"ethereum":return await this.signInWithEthereum(t);case"solana":return await this.signInWithSolana(t);default:throw new Error(`@supabase/auth-js: Unsupported chain "${r}"`)}}async signInWithEthereum(t){var r,n,s,i,l,u,d,m,f,p,y;let x,j;if("message"in t)x=t.message,j=t.signature;else{const{chain:b,wallet:S,statement:N,options:E}=t;let k;if(Ps())if(typeof S=="object")k=S;else{const F=window;if("ethereum"in F&&typeof F.ethereum=="object"&&"request"in F.ethereum&&typeof F.ethereum.request=="function")k=F.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof S!="object"||!(E!=null&&E.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");k=S}const T=new URL((r=E==null?void 0:E.url)!==null&&r!==void 0?r:window.location.href),O=await k.request({method:"eth_requestAccounts"}).then(F=>F).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!O||O.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const P=OC(O[0]);let R=(n=E==null?void 0:E.signInWithEthereum)===null||n===void 0?void 0:n.chainId;if(!R){const F=await k.request({method:"eth_chainId"});R=CR(F)}const q={domain:T.host,address:P,statement:N,uri:T.href,version:"1",chainId:R,nonce:(s=E==null?void 0:E.signInWithEthereum)===null||s===void 0?void 0:s.nonce,issuedAt:(l=(i=E==null?void 0:E.signInWithEthereum)===null||i===void 0?void 0:i.issuedAt)!==null&&l!==void 0?l:new Date,expirationTime:(u=E==null?void 0:E.signInWithEthereum)===null||u===void 0?void 0:u.expirationTime,notBefore:(d=E==null?void 0:E.signInWithEthereum)===null||d===void 0?void 0:d.notBefore,requestId:(m=E==null?void 0:E.signInWithEthereum)===null||m===void 0?void 0:m.requestId,resources:(f=E==null?void 0:E.signInWithEthereum)===null||f===void 0?void 0:f.resources};x=AR(q),j=await k.request({method:"personal_sign",params:[ER(x),P]})}try{const{data:b,error:S}=await St(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:x,signature:j},!((p=t.options)===null||p===void 0)&&p.captchaToken?{gotrue_meta_security:{captcha_token:(y=t.options)===null||y===void 0?void 0:y.captchaToken}}:null),xform:mi});if(S)throw S;return!b||!b.session||!b.user?{data:{user:null,session:null},error:new Pl}:(b.session&&(await this._saveSession(b.session),await this._notifyAllSubscribers("SIGNED_IN",b.session)),{data:Object.assign({},b),error:S})}catch(b){if(dt(b))return{data:{user:null,session:null},error:b};throw b}}async signInWithSolana(t){var r,n,s,i,l,u,d,m,f,p,y,x;let j,b;if("message"in t)j=t.message,b=t.signature;else{const{chain:S,wallet:N,statement:E,options:k}=t;let T;if(Ps())if(typeof N=="object")T=N;else{const P=window;if("solana"in P&&typeof P.solana=="object"&&("signIn"in P.solana&&typeof P.solana.signIn=="function"||"signMessage"in P.solana&&typeof P.solana.signMessage=="function"))T=P.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof N!="object"||!(k!=null&&k.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");T=N}const O=new URL((r=k==null?void 0:k.url)!==null&&r!==void 0?r:window.location.href);if("signIn"in T&&T.signIn){const P=await T.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},k==null?void 0:k.signInWithSolana),{version:"1",domain:O.host,uri:O.href}),E?{statement:E}:null));let R;if(Array.isArray(P)&&P[0]&&typeof P[0]=="object")R=P[0];else if(P&&typeof P=="object"&&"signedMessage"in P&&"signature"in P)R=P;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in R&&"signature"in R&&(typeof R.signedMessage=="string"||R.signedMessage instanceof Uint8Array)&&R.signature instanceof Uint8Array)j=typeof R.signedMessage=="string"?R.signedMessage:new TextDecoder().decode(R.signedMessage),b=R.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in T)||typeof T.signMessage!="function"||!("publicKey"in T)||typeof T!="object"||!T.publicKey||!("toBase58"in T.publicKey)||typeof T.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");j=[`${O.host} wants you to sign in with your Solana account:`,T.publicKey.toBase58(),...E?["",E,""]:[""],"Version: 1",`URI: ${O.href}`,`Issued At: ${(s=(n=k==null?void 0:k.signInWithSolana)===null||n===void 0?void 0:n.issuedAt)!==null&&s!==void 0?s:new Date().toISOString()}`,...!((i=k==null?void 0:k.signInWithSolana)===null||i===void 0)&&i.notBefore?[`Not Before: ${k.signInWithSolana.notBefore}`]:[],...!((l=k==null?void 0:k.signInWithSolana)===null||l===void 0)&&l.expirationTime?[`Expiration Time: ${k.signInWithSolana.expirationTime}`]:[],...!((u=k==null?void 0:k.signInWithSolana)===null||u===void 0)&&u.chainId?[`Chain ID: ${k.signInWithSolana.chainId}`]:[],...!((d=k==null?void 0:k.signInWithSolana)===null||d===void 0)&&d.nonce?[`Nonce: ${k.signInWithSolana.nonce}`]:[],...!((m=k==null?void 0:k.signInWithSolana)===null||m===void 0)&&m.requestId?[`Request ID: ${k.signInWithSolana.requestId}`]:[],...!((p=(f=k==null?void 0:k.signInWithSolana)===null||f===void 0?void 0:f.resources)===null||p===void 0)&&p.length?["Resources",...k.signInWithSolana.resources.map(R=>`- ${R}`)]:[]].join(`
`);const P=await T.signMessage(new TextEncoder().encode(j),"utf8");if(!P||!(P instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");b=P}}try{const{data:S,error:N}=await St(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:j,signature:Oo(b)},!((y=t.options)===null||y===void 0)&&y.captchaToken?{gotrue_meta_security:{captcha_token:(x=t.options)===null||x===void 0?void 0:x.captchaToken}}:null),xform:mi});if(N)throw N;return!S||!S.session||!S.user?{data:{user:null,session:null},error:new Pl}:(S.session&&(await this._saveSession(S.session),await this._notifyAllSubscribers("SIGNED_IN",S.session)),{data:Object.assign({},S),error:N})}catch(S){if(dt(S))return{data:{user:null,session:null},error:S};throw S}}async _exchangeCodeForSession(t){const r=await _o(this.storage,`${this.storageKey}-code-verifier`),[n,s]=(r??"").split("/");try{const{data:i,error:l}=await St(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:t,code_verifier:n},xform:mi});if(await Va(this.storage,`${this.storageKey}-code-verifier`),l)throw l;return!i||!i.session||!i.user?{data:{user:null,session:null,redirectType:null},error:new Pl}:(i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),{data:Object.assign(Object.assign({},i),{redirectType:s??null}),error:l})}catch(i){if(dt(i))return{data:{user:null,session:null,redirectType:null},error:i};throw i}}async signInWithIdToken(t){try{const{options:r,provider:n,token:s,access_token:i,nonce:l}=t,u=await St(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:n,id_token:s,access_token:i,nonce:l,gotrue_meta_security:{captcha_token:r==null?void 0:r.captchaToken}},xform:mi}),{data:d,error:m}=u;return m?{data:{user:null,session:null},error:m}:!d||!d.session||!d.user?{data:{user:null,session:null},error:new Pl}:(d.session&&(await this._saveSession(d.session),await this._notifyAllSubscribers("SIGNED_IN",d.session)),{data:d,error:m})}catch(r){if(dt(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithOtp(t){var r,n,s,i,l;try{if("email"in t){const{email:u,options:d}=t;let m=null,f=null;this.flowType==="pkce"&&([m,f]=await Ol(this.storage,this.storageKey));const{error:p}=await St(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:u,data:(r=d==null?void 0:d.data)!==null&&r!==void 0?r:{},create_user:(n=d==null?void 0:d.shouldCreateUser)!==null&&n!==void 0?n:!0,gotrue_meta_security:{captcha_token:d==null?void 0:d.captchaToken},code_challenge:m,code_challenge_method:f},redirectTo:d==null?void 0:d.emailRedirectTo});return{data:{user:null,session:null},error:p}}if("phone"in t){const{phone:u,options:d}=t,{data:m,error:f}=await St(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:u,data:(s=d==null?void 0:d.data)!==null&&s!==void 0?s:{},create_user:(i=d==null?void 0:d.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:d==null?void 0:d.captchaToken},channel:(l=d==null?void 0:d.channel)!==null&&l!==void 0?l:"sms"}});return{data:{user:null,session:null,messageId:m==null?void 0:m.message_id},error:f}}throw new gf("You must provide either an email or phone number.")}catch(u){if(dt(u))return{data:{user:null,session:null},error:u};throw u}}async verifyOtp(t){var r,n;try{let s,i;"options"in t&&(s=(r=t.options)===null||r===void 0?void 0:r.redirectTo,i=(n=t.options)===null||n===void 0?void 0:n.captchaToken);const{data:l,error:u}=await St(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},t),{gotrue_meta_security:{captcha_token:i}}),redirectTo:s,xform:mi});if(u)throw u;if(!l)throw new Error("An error occurred on token verification.");const d=l.session,m=l.user;return d!=null&&d.access_token&&(await this._saveSession(d),await this._notifyAllSubscribers(t.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",d)),{data:{user:m,session:d},error:null}}catch(s){if(dt(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithSSO(t){var r,n,s;try{let i=null,l=null;return this.flowType==="pkce"&&([i,l]=await Ol(this.storage,this.storageKey)),await St(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in t?{provider_id:t.providerId}:null),"domain"in t?{domain:t.domain}:null),{redirect_to:(n=(r=t.options)===null||r===void 0?void 0:r.redirectTo)!==null&&n!==void 0?n:void 0}),!((s=t==null?void 0:t.options)===null||s===void 0)&&s.captchaToken?{gotrue_meta_security:{captcha_token:t.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:i,code_challenge_method:l}),headers:this.headers,xform:xR})}catch(i){if(dt(i))return{data:null,error:i};throw i}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async t=>{const{data:{session:r},error:n}=t;if(n)throw n;if(!r)throw new qa;const{error:s}=await St(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:r.access_token});return{data:{user:null,session:null},error:s}})}catch(t){if(dt(t))return{data:{user:null,session:null},error:t};throw t}}async resend(t){try{const r=`${this.url}/resend`;if("email"in t){const{email:n,type:s,options:i}=t,{error:l}=await St(this.fetch,"POST",r,{headers:this.headers,body:{email:n,type:s,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}},redirectTo:i==null?void 0:i.emailRedirectTo});return{data:{user:null,session:null},error:l}}else if("phone"in t){const{phone:n,type:s,options:i}=t,{data:l,error:u}=await St(this.fetch,"POST",r,{headers:this.headers,body:{phone:n,type:s,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}}});return{data:{user:null,session:null,messageId:l==null?void 0:l.message_id},error:u}}throw new gf("You must provide either an email or phone number and a type")}catch(r){if(dt(r))return{data:{user:null,session:null},error:r};throw r}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async r=>r))}async _acquireLock(t,r){this._debug("#_acquireLock","begin",t);try{if(this.lockAcquired){const n=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),s=(async()=>(await n,await r()))();return this.pendingInLock.push((async()=>{try{await s}catch{}})()),s}return await this.lock(`lock:${this.storageKey}`,t,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const n=r();for(this.pendingInLock.push((async()=>{try{await n}catch{}})()),await n;this.pendingInLock.length;){const s=[...this.pendingInLock];await Promise.all(s),this.pendingInLock.splice(0,s.length)}return await n}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(t){this._debug("#_useSession","begin");try{const r=await this.__loadSession();return await t(r)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let t=null;const r=await _o(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",r),r!==null&&(this._isValidSession(r)?t=r:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!t)return{data:{session:null},error:null};const n=t.expires_at?t.expires_at*1e3-Date.now()<Cg:!1;if(this._debug("#__loadSession()",`session has${n?"":" not"} expired`,"expires_at",t.expires_at),!n){if(this.userStorage){const l=await _o(this.userStorage,this.storageKey+"-user");l!=null&&l.user?t.user=l.user:t.user=Pg()}if(this.storage.isServer&&t.user){let l=this.suppressGetSessionWarning;t=new Proxy(t,{get:(d,m,f)=>(!l&&m==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),l=!0,this.suppressGetSessionWarning=!0),Reflect.get(d,m,f))})}return{data:{session:t},error:null}}const{data:s,error:i}=await this._callRefreshToken(t.refresh_token);return i?{data:{session:null},error:i}:{data:{session:s},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(t){return t?await this._getUser(t):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(t){try{return t?await St(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:t,xform:Ja}):await this._useSession(async r=>{var n,s,i;const{data:l,error:u}=r;if(u)throw u;return!(!((n=l.session)===null||n===void 0)&&n.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new qa}:await St(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(i=(s=l.session)===null||s===void 0?void 0:s.access_token)!==null&&i!==void 0?i:void 0,xform:Ja})})}catch(r){if(dt(r))return K3(r)&&(await this._removeSession(),await Va(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:r};throw r}}async updateUser(t,r={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(t,r))}async _updateUser(t,r={}){try{return await this._useSession(async n=>{const{data:s,error:i}=n;if(i)throw i;if(!s.session)throw new qa;const l=s.session;let u=null,d=null;this.flowType==="pkce"&&t.email!=null&&([u,d]=await Ol(this.storage,this.storageKey));const{data:m,error:f}=await St(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:r==null?void 0:r.emailRedirectTo,body:Object.assign(Object.assign({},t),{code_challenge:u,code_challenge_method:d}),jwt:l.access_token,xform:Ja});if(f)throw f;return l.user=m.user,await this._saveSession(l),await this._notifyAllSubscribers("USER_UPDATED",l),{data:{user:l.user},error:null}})}catch(n){if(dt(n))return{data:{user:null},error:n};throw n}}async setSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(t))}async _setSession(t){try{if(!t.access_token||!t.refresh_token)throw new qa;const r=Date.now()/1e3;let n=r,s=!0,i=null;const{payload:l}=Ag(t.access_token);if(l.exp&&(n=l.exp,s=n<=r),s){const{data:u,error:d}=await this._callRefreshToken(t.refresh_token);if(d)return{data:{user:null,session:null},error:d};if(!u)return{data:{user:null,session:null},error:null};i=u}else{const{data:u,error:d}=await this._getUser(t.access_token);if(d)throw d;i={access_token:t.access_token,refresh_token:t.refresh_token,user:u.user,token_type:"bearer",expires_in:n-r,expires_at:n},await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)}return{data:{user:i.user,session:i},error:null}}catch(r){if(dt(r))return{data:{session:null,user:null},error:r};throw r}}async refreshSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(t))}async _refreshSession(t){try{return await this._useSession(async r=>{var n;if(!t){const{data:l,error:u}=r;if(u)throw u;t=(n=l.session)!==null&&n!==void 0?n:void 0}if(!(t!=null&&t.refresh_token))throw new qa;const{data:s,error:i}=await this._callRefreshToken(t.refresh_token);return i?{data:{user:null,session:null},error:i}:s?{data:{user:s.user,session:s},error:null}:{data:{user:null,session:null},error:null}})}catch(r){if(dt(r))return{data:{user:null,session:null},error:r};throw r}}async _getSessionFromURL(t,r){try{if(!Ps())throw new yf("No browser detected.");if(t.error||t.error_description||t.error_code)throw new yf(t.error_description||"Error in URL with unspecified error_description",{error:t.error||"unspecified_error",code:t.error_code||"unspecified_code"});switch(r){case"implicit":if(this.flowType==="pkce")throw new Aj("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new yf("Not a valid implicit grant flow url.");break;default:}if(r==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!t.code)throw new Aj("No code detected.");const{data:E,error:k}=await this._exchangeCodeForSession(t.code);if(k)throw k;const T=new URL(window.location.href);return T.searchParams.delete("code"),window.history.replaceState(window.history.state,"",T.toString()),{data:{session:E.session,redirectType:null},error:null}}const{provider_token:n,provider_refresh_token:s,access_token:i,refresh_token:l,expires_in:u,expires_at:d,token_type:m}=t;if(!i||!u||!l||!m)throw new yf("No session defined in URL");const f=Math.round(Date.now()/1e3),p=parseInt(u);let y=f+p;d&&(y=parseInt(d));const x=y-f;x*1e3<=Ul&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${x}s, should have been closer to ${p}s`);const j=y-p;f-j>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",j,y,f):f-j<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",j,y,f);const{data:b,error:S}=await this._getUser(i);if(S)throw S;const N={provider_token:n,provider_refresh_token:s,access_token:i,expires_in:p,expires_at:y,refresh_token:l,token_type:m,user:b.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:N,redirectType:t.type},error:null}}catch(n){if(dt(n))return{data:{session:null,redirectType:null},error:n};throw n}}_isImplicitGrantCallback(t){return!!(t.access_token||t.error_description)}async _isPKCECallback(t){const r=await _o(this.storage,`${this.storageKey}-code-verifier`);return!!(t.code&&r)}async signOut(t={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(t))}async _signOut({scope:t}={scope:"global"}){return await this._useSession(async r=>{var n;const{data:s,error:i}=r;if(i)return{error:i};const l=(n=s.session)===null||n===void 0?void 0:n.access_token;if(l){const{error:u}=await this.admin.signOut(l,t);if(u&&!(H3(u)&&(u.status===404||u.status===401||u.status===403)))return{error:u}}return t!=="others"&&(await this._removeSession(),await Va(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(t){const r=tR(),n={id:r,callback:t,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",r),this.stateChangeEmitters.delete(r)}};return this._debug("#onAuthStateChange()","registered callback with id",r),this.stateChangeEmitters.set(r,n),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(r)})))(),{data:{subscription:n}}}async _emitInitialSession(t){return await this._useSession(async r=>{var n,s;try{const{data:{session:i},error:l}=r;if(l)throw l;await((n=this.stateChangeEmitters.get(t))===null||n===void 0?void 0:n.callback("INITIAL_SESSION",i)),this._debug("INITIAL_SESSION","callback id",t,"session",i)}catch(i){await((s=this.stateChangeEmitters.get(t))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",t,"error",i),console.error(i)}})}async resetPasswordForEmail(t,r={}){let n=null,s=null;this.flowType==="pkce"&&([n,s]=await Ol(this.storage,this.storageKey,!0));try{return await St(this.fetch,"POST",`${this.url}/recover`,{body:{email:t,code_challenge:n,code_challenge_method:s,gotrue_meta_security:{captcha_token:r.captchaToken}},headers:this.headers,redirectTo:r.redirectTo})}catch(i){if(dt(i))return{data:null,error:i};throw i}}async getUserIdentities(){var t;try{const{data:r,error:n}=await this.getUser();if(n)throw n;return{data:{identities:(t=r.user.identities)!==null&&t!==void 0?t:[]},error:null}}catch(r){if(dt(r))return{data:null,error:r};throw r}}async linkIdentity(t){return"token"in t?this.linkIdentityIdToken(t):this.linkIdentityOAuth(t)}async linkIdentityOAuth(t){var r;try{const{data:n,error:s}=await this._useSession(async i=>{var l,u,d,m,f;const{data:p,error:y}=i;if(y)throw y;const x=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,t.provider,{redirectTo:(l=t.options)===null||l===void 0?void 0:l.redirectTo,scopes:(u=t.options)===null||u===void 0?void 0:u.scopes,queryParams:(d=t.options)===null||d===void 0?void 0:d.queryParams,skipBrowserRedirect:!0});return await St(this.fetch,"GET",x,{headers:this.headers,jwt:(f=(m=p.session)===null||m===void 0?void 0:m.access_token)!==null&&f!==void 0?f:void 0})});if(s)throw s;return Ps()&&!(!((r=t.options)===null||r===void 0)&&r.skipBrowserRedirect)&&window.location.assign(n==null?void 0:n.url),{data:{provider:t.provider,url:n==null?void 0:n.url},error:null}}catch(n){if(dt(n))return{data:{provider:t.provider,url:null},error:n};throw n}}async linkIdentityIdToken(t){return await this._useSession(async r=>{var n;try{const{error:s,data:{session:i}}=r;if(s)throw s;const{options:l,provider:u,token:d,access_token:m,nonce:f}=t,p=await St(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(n=i==null?void 0:i.access_token)!==null&&n!==void 0?n:void 0,body:{provider:u,id_token:d,access_token:m,nonce:f,link_identity:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:mi}),{data:y,error:x}=p;return x?{data:{user:null,session:null},error:x}:!y||!y.session||!y.user?{data:{user:null,session:null},error:new Pl}:(y.session&&(await this._saveSession(y.session),await this._notifyAllSubscribers("USER_UPDATED",y.session)),{data:y,error:x})}catch(s){if(dt(s))return{data:{user:null,session:null},error:s};throw s}})}async unlinkIdentity(t){try{return await this._useSession(async r=>{var n,s;const{data:i,error:l}=r;if(l)throw l;return await St(this.fetch,"DELETE",`${this.url}/user/identities/${t.identity_id}`,{headers:this.headers,jwt:(s=(n=i.session)===null||n===void 0?void 0:n.access_token)!==null&&s!==void 0?s:void 0})})}catch(r){if(dt(r))return{data:null,error:r};throw r}}async _refreshAccessToken(t){const r=`#_refreshAccessToken(${t.substring(0,5)}...)`;this._debug(r,"begin");try{const n=Date.now();return await iR(async s=>(s>0&&await sR(200*Math.pow(2,s-1)),this._debug(r,"refreshing attempt",s),await St(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:t},headers:this.headers,xform:mi})),(s,i)=>{const l=200*Math.pow(2,s);return i&&Eg(i)&&Date.now()+l-n<Ul})}catch(n){if(this._debug(r,"error",n),dt(n))return{data:{session:null,user:null},error:n};throw n}finally{this._debug(r,"end")}}_isValidSession(t){return typeof t=="object"&&t!==null&&"access_token"in t&&"refresh_token"in t&&"expires_at"in t}async _handleProviderSignIn(t,r){const n=await this._getUrlForProvider(`${this.url}/authorize`,t,{redirectTo:r.redirectTo,scopes:r.scopes,queryParams:r.queryParams});return this._debug("#_handleProviderSignIn()","provider",t,"options",r,"url",n),Ps()&&!r.skipBrowserRedirect&&window.location.assign(n),{data:{provider:t,url:n},error:null}}async _recoverAndRefresh(){var t,r;const n="#_recoverAndRefresh()";this._debug(n,"begin");try{const s=await _o(this.storage,this.storageKey);if(s&&this.userStorage){let l=await _o(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!l&&(l={user:s.user},await Wl(this.userStorage,this.storageKey+"-user",l)),s.user=(t=l==null?void 0:l.user)!==null&&t!==void 0?t:Pg()}else if(s&&!s.user&&!s.user){const l=await _o(this.storage,this.storageKey+"-user");l&&(l!=null&&l.user)?(s.user=l.user,await Va(this.storage,this.storageKey+"-user"),await Wl(this.storage,this.storageKey,s)):s.user=Pg()}if(this._debug(n,"session from storage",s),!this._isValidSession(s)){this._debug(n,"session is not valid"),s!==null&&await this._removeSession();return}const i=((r=s.expires_at)!==null&&r!==void 0?r:1/0)*1e3-Date.now()<Cg;if(this._debug(n,`session has${i?"":" not"} expired with margin of ${Cg}s`),i){if(this.autoRefreshToken&&s.refresh_token){const{error:l}=await this._callRefreshToken(s.refresh_token);l&&(console.error(l),Eg(l)||(this._debug(n,"refresh failed with a non-retryable error, removing the session",l),await this._removeSession()))}}else if(s.user&&s.user.__isUserNotAvailableProxy===!0)try{const{data:l,error:u}=await this._getUser(s.access_token);!u&&(l!=null&&l.user)?(s.user=l.user,await this._saveSession(s),await this._notifyAllSubscribers("SIGNED_IN",s)):this._debug(n,"could not get user data, skipping SIGNED_IN notification")}catch(l){console.error("Error getting user data:",l),this._debug(n,"error getting user data, skipping SIGNED_IN notification",l)}else await this._notifyAllSubscribers("SIGNED_IN",s)}catch(s){this._debug(n,"error",s),console.error(s);return}finally{this._debug(n,"end")}}async _callRefreshToken(t){var r,n;if(!t)throw new qa;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const s=`#_callRefreshToken(${t.substring(0,5)}...)`;this._debug(s,"begin");try{this.refreshingDeferred=new Xh;const{data:i,error:l}=await this._refreshAccessToken(t);if(l)throw l;if(!i.session)throw new qa;await this._saveSession(i.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",i.session);const u={data:i.session,error:null};return this.refreshingDeferred.resolve(u),u}catch(i){if(this._debug(s,"error",i),dt(i)){const l={data:null,error:i};return Eg(i)||await this._removeSession(),(r=this.refreshingDeferred)===null||r===void 0||r.resolve(l),l}throw(n=this.refreshingDeferred)===null||n===void 0||n.reject(i),i}finally{this.refreshingDeferred=null,this._debug(s,"end")}}async _notifyAllSubscribers(t,r,n=!0){const s=`#_notifyAllSubscribers(${t})`;this._debug(s,"begin",r,`broadcast = ${n}`);try{this.broadcastChannel&&n&&this.broadcastChannel.postMessage({event:t,session:r});const i=[],l=Array.from(this.stateChangeEmitters.values()).map(async u=>{try{await u.callback(t,r)}catch(d){i.push(d)}});if(await Promise.all(l),i.length>0){for(let u=0;u<i.length;u+=1)console.error(i[u]);throw i[0]}}finally{this._debug(s,"end")}}async _saveSession(t){this._debug("#_saveSession()",t),this.suppressGetSessionWarning=!0;const r=Object.assign({},t),n=r.user&&r.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!n&&r.user&&await Wl(this.userStorage,this.storageKey+"-user",{user:r.user});const s=Object.assign({},r);delete s.user;const i=Dj(s);await Wl(this.storage,this.storageKey,i)}else{const s=Dj(r);await Wl(this.storage,this.storageKey,s)}}async _removeSession(){this._debug("#_removeSession()"),await Va(this.storage,this.storageKey),await Va(this.storage,this.storageKey+"-code-verifier"),await Va(this.storage,this.storageKey+"-user"),this.userStorage&&await Va(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const t=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{t&&Ps()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",t)}catch(r){console.error("removing visibilitychange callback failed",r)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const t=setInterval(()=>this._autoRefreshTokenTick(),Ul);this.autoRefreshTicker=t,t&&typeof t=="object"&&typeof t.unref=="function"?t.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(t),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const t=this.autoRefreshTicker;this.autoRefreshTicker=null,t&&clearInterval(t)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const t=Date.now();try{return await this._useSession(async r=>{const{data:{session:n}}=r;if(!n||!n.refresh_token||!n.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const s=Math.floor((n.expires_at*1e3-t)/Ul);this._debug("#_autoRefreshTokenTick()",`access token expires in ${s} ticks, a tick lasts ${Ul}ms, refresh threshold is ${Ov} ticks`),s<=Ov&&await this._callRefreshToken(n.refresh_token)})}catch(r){console.error("Auto refresh tick failed with error. This is likely a transient error.",r)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(t){if(t.isAcquireTimeout||t instanceof PC)this._debug("auto refresh token tick lock not available");else throw t}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Ps()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(t){console.error("_handleVisibilityChange",t)}}async _onVisibilityChanged(t){const r=`#_onVisibilityChanged(${t})`;this._debug(r,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),t||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(r,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(t,r,n){const s=[`provider=${encodeURIComponent(r)}`];if(n!=null&&n.redirectTo&&s.push(`redirect_to=${encodeURIComponent(n.redirectTo)}`),n!=null&&n.scopes&&s.push(`scopes=${encodeURIComponent(n.scopes)}`),this.flowType==="pkce"){const[i,l]=await Ol(this.storage,this.storageKey),u=new URLSearchParams({code_challenge:`${encodeURIComponent(i)}`,code_challenge_method:`${encodeURIComponent(l)}`});s.push(u.toString())}if(n!=null&&n.queryParams){const i=new URLSearchParams(n.queryParams);s.push(i.toString())}return n!=null&&n.skipBrowserRedirect&&s.push(`skip_http_redirect=${n.skipBrowserRedirect}`),`${t}?${s.join("&")}`}async _unenroll(t){try{return await this._useSession(async r=>{var n;const{data:s,error:i}=r;return i?{data:null,error:i}:await St(this.fetch,"DELETE",`${this.url}/factors/${t.factorId}`,{headers:this.headers,jwt:(n=s==null?void 0:s.session)===null||n===void 0?void 0:n.access_token})})}catch(r){if(dt(r))return{data:null,error:r};throw r}}async _enroll(t){try{return await this._useSession(async r=>{var n,s;const{data:i,error:l}=r;if(l)return{data:null,error:l};const u=Object.assign({friendly_name:t.friendlyName,factor_type:t.factorType},t.factorType==="phone"?{phone:t.phone}:t.factorType==="totp"?{issuer:t.issuer}:{}),{data:d,error:m}=await St(this.fetch,"POST",`${this.url}/factors`,{body:u,headers:this.headers,jwt:(n=i==null?void 0:i.session)===null||n===void 0?void 0:n.access_token});return m?{data:null,error:m}:(t.factorType==="totp"&&d.type==="totp"&&(!((s=d==null?void 0:d.totp)===null||s===void 0)&&s.qr_code)&&(d.totp.qr_code=`data:image/svg+xml;utf-8,${d.totp.qr_code}`),{data:d,error:null})})}catch(r){if(dt(r))return{data:null,error:r};throw r}}async _verify(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var n;const{data:s,error:i}=r;if(i)return{data:null,error:i};const l=Object.assign({challenge_id:t.challengeId},"webauthn"in t?{webauthn:Object.assign(Object.assign({},t.webauthn),{credential_response:t.webauthn.type==="create"?$R(t.webauthn.credential_response):MR(t.webauthn.credential_response)})}:{code:t.code}),{data:u,error:d}=await St(this.fetch,"POST",`${this.url}/factors/${t.factorId}/verify`,{body:l,headers:this.headers,jwt:(n=s==null?void 0:s.session)===null||n===void 0?void 0:n.access_token});return d?{data:null,error:d}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+u.expires_in},u)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",u),{data:u,error:d})})}catch(r){if(dt(r))return{data:null,error:r};throw r}})}async _challenge(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var n;const{data:s,error:i}=r;if(i)return{data:null,error:i};const l=await St(this.fetch,"POST",`${this.url}/factors/${t.factorId}/challenge`,{body:t,headers:this.headers,jwt:(n=s==null?void 0:s.session)===null||n===void 0?void 0:n.access_token});if(l.error)return l;const{data:u}=l;if(u.type!=="webauthn")return{data:u,error:null};switch(u.webauthn.type){case"create":return{data:Object.assign(Object.assign({},u),{webauthn:Object.assign(Object.assign({},u.webauthn),{credential_options:Object.assign(Object.assign({},u.webauthn.credential_options),{publicKey:DR(u.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},u),{webauthn:Object.assign(Object.assign({},u.webauthn),{credential_options:Object.assign(Object.assign({},u.webauthn.credential_options),{publicKey:RR(u.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(r){if(dt(r))return{data:null,error:r};throw r}})}async _challengeAndVerify(t){const{data:r,error:n}=await this._challenge({factorId:t.factorId});return n?{data:null,error:n}:await this._verify({factorId:t.factorId,challengeId:r.id,code:t.code})}async _listFactors(){var t;const{data:{user:r},error:n}=await this.getUser();if(n)return{data:null,error:n};const s={all:[],phone:[],totp:[],webauthn:[]};for(const i of(t=r==null?void 0:r.factors)!==null&&t!==void 0?t:[])s.all.push(i),i.status==="verified"&&s[i.factor_type].push(i);return{data:s,error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async t=>{var r,n;const{data:{session:s},error:i}=t;if(i)return{data:null,error:i};if(!s)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:l}=Ag(s.access_token);let u=null;l.aal&&(u=l.aal);let d=u;((n=(r=s.user.factors)===null||r===void 0?void 0:r.filter(p=>p.status==="verified"))!==null&&n!==void 0?n:[]).length>0&&(d="aal2");const f=l.amr||[];return{data:{currentLevel:u,nextLevel:d,currentAuthenticationMethods:f},error:null}}))}async fetchJwk(t,r={keys:[]}){let n=r.keys.find(u=>u.kid===t);if(n)return n;const s=Date.now();if(n=this.jwks.keys.find(u=>u.kid===t),n&&this.jwks_cached_at+V3>s)return n;const{data:i,error:l}=await St(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(l)throw l;return!i.keys||i.keys.length===0||(this.jwks=i,this.jwks_cached_at=s,n=i.keys.find(u=>u.kid===t),!n)?null:n}async getClaims(t,r={}){try{let n=t;if(!n){const{data:x,error:j}=await this.getSession();if(j||!x.session)return{data:null,error:j};n=x.session.access_token}const{header:s,payload:i,signature:l,raw:{header:u,payload:d}}=Ag(n);r!=null&&r.allowExpired||fR(i.exp);const m=!s.alg||s.alg.startsWith("HS")||!s.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(s.kid,r!=null&&r.keys?{keys:r.keys}:r==null?void 0:r.jwks);if(!m){const{error:x}=await this.getUser(n);if(x)throw x;return{data:{claims:i,header:s,signature:l},error:null}}const f=hR(s.alg),p=await crypto.subtle.importKey("jwk",m,f,!0,["verify"]);if(!await crypto.subtle.verify(f,p,l,Z3(`${u}.${d}`)))throw new Dv("Invalid JWT signature");return{data:{claims:i,header:s,signature:l},error:null}}catch(n){if(dt(n))return{data:null,error:n};throw n}}}Au.nextInstanceID=0;const HR=Au;class KR extends HR{constructor(t){super(t)}}var GR=function(e,t,r,n){function s(i){return i instanceof r?i:new r(function(l){l(i)})}return new(r||(r=Promise))(function(i,l){function u(f){try{m(n.next(f))}catch(p){l(p)}}function d(f){try{m(n.throw(f))}catch(p){l(p)}}function m(f){f.done?i(f.value):s(f.value).then(u,d)}m((n=n.apply(e,t||[])).next())})};class YR{constructor(t,r,n){var s,i,l;this.supabaseUrl=t,this.supabaseKey=r;const u=L3(t);if(!r)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",u),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",u),this.storageUrl=new URL("storage/v1",u),this.functionsUrl=new URL("functions/v1",u);const d=`sb-${u.hostname.split(".")[0]}-auth-token`,m={db:A3,realtime:O3,auth:Object.assign(Object.assign({},P3),{storageKey:d}),global:E3},f=F3(n??{},m);this.storageKey=(s=f.auth.storageKey)!==null&&s!==void 0?s:"",this.headers=(i=f.global.headers)!==null&&i!==void 0?i:{},f.accessToken?(this.accessToken=f.accessToken,this.auth=new Proxy({},{get:(p,y)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(y)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((l=f.auth)!==null&&l!==void 0?l:{},this.headers,f.global.fetch),this.fetch=R3(r,this._getAccessToken.bind(this),f.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},f.realtime)),this.rest=new q5(new URL("rest/v1",u).href,{headers:this.headers,schema:f.db.schema,fetch:this.fetch}),this.storage=new N3(this.storageUrl.href,this.headers,this.fetch,n==null?void 0:n.storage),f.accessToken||this._listenForAuthEvents()}get functions(){return new R5(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(t){return this.rest.from(t)}schema(t){return this.rest.schema(t)}rpc(t,r={},n={}){return this.rest.rpc(t,r,n)}channel(t,r={config:{}}){return this.realtime.channel(t,r)}getChannels(){return this.realtime.getChannels()}removeChannel(t){return this.realtime.removeChannel(t)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){return GR(this,void 0,void 0,function*(){var t,r;if(this.accessToken)return yield this.accessToken();const{data:n}=yield this.auth.getSession();return(r=(t=n.session)===null||t===void 0?void 0:t.access_token)!==null&&r!==void 0?r:this.supabaseKey})}_initSupabaseAuthClient({autoRefreshToken:t,persistSession:r,detectSessionInUrl:n,storage:s,userStorage:i,storageKey:l,flowType:u,lock:d,debug:m},f,p){const y={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new KR({url:this.authUrl.href,headers:Object.assign(Object.assign({},y),f),storageKey:l,autoRefreshToken:t,persistSession:r,detectSessionInUrl:n,storage:s,userStorage:i,flowType:u,lock:d,debug:m,fetch:p,hasCustomAuthorizationHeader:Object.keys(this.headers).some(x=>x.toLowerCase()==="authorization")})}_initRealtimeClient(t){return new l3(this.realtimeUrl.href,Object.assign(Object.assign({},t),{params:Object.assign({apikey:this.supabaseKey},t==null?void 0:t.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((r,n)=>{this._handleTokenChanged(r,"CLIENT",n==null?void 0:n.access_token)})}_handleTokenChanged(t,r,n){(t==="TOKEN_REFRESHED"||t==="SIGNED_IN")&&this.changedAccessToken!==n?(this.changedAccessToken=n,this.realtime.setAuth(n)):t==="SIGNED_OUT"&&(this.realtime.setAuth(),r=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const JR=(e,t,r)=>new YR(e,t,r);function QR(){if(typeof window<"u"||typeof process>"u")return!1;const e=process.version;if(e==null)return!1;const t=e.match(/^v(\d+)\./);return t?parseInt(t[1],10)<=18:!1}QR()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const XR="https://okdzllfpsvltjqryslnn.supabase.co",ZR="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im9rZHpsbGZwc3ZsdGpxcnlzbG5uIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTk3NTcxMTgsImV4cCI6MjA3NTMzMzExOH0.uLhMzo49-OMEp4ghFAFI31IpiDs1tjbyY2jZlk-vgUo",Ue=JR(XR,ZR),fa="__FEATURE_SUGGESTION__",Q0="__feature_suggestion__",e6="__feature_future_session__";function Zh(e){let t={};if(e!=null&&e.description)try{t=JSON.parse(e.description)}catch(s){console.warn("[databaseService] Unable to parse suggestion payload",s),t={}}const n=(Array.isArray(e==null?void 0:e.tags)?e.tags:[]).includes(e6)?"future":"pending";return{id:e.id,session_id:e.session_id,title:e.title,summary:t.summary??null,whatWouldItDo:t.whatWouldItDo??null,howWouldItWork:t.howWouldItWork??null,status:n,requester_id:t.requesterId??null,requester_name:t.requesterName??null,requester_email:t.requesterEmail??null,created_at:e.created_at}}async function t6(e){const{data:t,error:r}=await Ue.from("users").select("*").eq("email",e).single();if(r){if(r.code==="PGRST116")return null;throw r}return t}async function r6(e){const t="5e5482eb-82f0-4e76-8a6b-c6d74b01cd3a",{data:r,error:n}=await Ue.from("users").insert([{email:e.email,name:e.name,tenant_id:e.tenant_id||t}]).select().single();if(n)throw n;return r}async function X0(e,t){let r=await t6(e);return r||(r=await r6({email:e,name:t})),r}async function Bj(){const{data:e,error:t}=await Ue.from("users").select("*").order("created_at",{ascending:!1});if(t)throw t;return e||[]}async function n6(e){var l,u;const[t,r,n]=await Promise.all([Jo(e),Ue.from("session_admins").select("session_id").eq("user_id",e),Ue.from("users").select("email").eq("id",e).single()]),s=((l=r.data)==null?void 0:l.length)||0;let i=0;if((u=n.data)!=null&&u.email){const{data:d}=await Ue.from("session_stakeholders").select("session_id").eq("user_email",n.data.email);i=(d==null?void 0:d.length)||0}return{userId:e,isSystemAdmin:t,sessionAdminCount:s,stakeholderSessionCount:i}}const yc="PRODUCTS_TABLE_MISSING";function la(e){return typeof e=="object"&&e!==null&&e.code===yc}async function DC(){const{data:e,error:t}=await Ue.from("products").select("*").order("name",{ascending:!0});if(t){if((t==null?void 0:t.code)==="PGRST205"){const r=new Error("Products table is missing");throw r.code=yc,r}throw t}return e||[]}async function ra(e){const{data:t,error:r}=await Ue.from("products").select("*").eq("tenant_id",e).order("name",{ascending:!0});if(r){if((r==null?void 0:r.code)==="PGRST205"){const n=new Error("Products table is missing");throw n.code=yc,n}throw r}return t||[]}async function Z0(e,t){if(!e)throw new Error("Product ID is required");const r={};if(t.name!==void 0){const i=t.name.trim();if(!i)throw new Error("Product name cannot be empty");r.name=i}if(t.color_hex!==void 0&&(r.color_hex=t.color_hex),Object.keys(r).length===0)throw new Error("No updates provided");const{data:n,error:s}=await Ue.from("products").update(r).eq("id",e).select().single();if(s){if((s==null?void 0:s.code)==="PGRST205"){const i=new Error("Products table is missing");throw i.code=yc,i}throw s}return n}async function RC(e,t,r){const n=t.trim();if(!n)throw new Error("Product name is required");const{data:s,error:i}=await Ue.from("products").insert([{name:n,tenant_id:e,color_hex:r||null}]).select().single();if(i){if((i==null?void 0:i.code)==="PGRST205"){const l=new Error("Products table is missing");throw l.code=yc,l}if((i==null?void 0:i.code)==="23505"){const{data:l,error:u}=await Ue.from("products").select("*").eq("tenant_id",e).eq("name",n).maybeSingle();if(u)throw u;if(l)return l}throw i}return s}async function $C(e){const{error:t}=await Ue.from("products").delete().eq("id",e);if(t){if((t==null?void 0:t.code)==="PGRST205"){const r=new Error("Products table is missing");throw r.code=yc,r}throw t}}const Gu="*, product:products(name)";function em(e){if(!e)throw new Error("Unexpected empty session row");const{product:t,...r}=e,n=r.product_name??(t==null?void 0:t.name)??null;return{...r,product_name:n}}function MC(e){return!e||e.length===0?[]:e.map(t=>em(t))}async function ha(){const{data:e,error:t}=await Ue.from("voting_sessions").select(Gu).order("created_at",{ascending:!1});if(t)throw t;return MC(e)}async function s6(e){const{data:t,error:r}=await Ue.from("voting_sessions").select(Gu).eq("id",e).single();if(r){if(r.code==="PGRST116")return null;throw r}return t?em(t):null}async function i6(e){const{data:t,error:r}=await Ue.from("voting_sessions").select(Gu).eq("session_code",e).single();if(r){if(r.code==="PGRST116")return null;throw r}return t?em(t):null}async function FC(e){if(await Jo(e))return ha();const{data:r,error:n}=await Ue.from("session_admins").select("session_id").eq("user_id",e);if(n)throw n;const s=(r==null?void 0:r.map(y=>y.session_id))||[],i=await Ue.from("users").select("email").eq("id",e).single();if(i.error)throw i.error;const{data:l,error:u}=await Ue.from("session_stakeholders").select("session_id").eq("user_email",i.data.email);if(u)throw u;const d=(l==null?void 0:l.map(y=>y.session_id))||[],m=[...new Set([...s,...d])];if(m.length===0)return[];const{data:f,error:p}=await Ue.from("voting_sessions").select(Gu).in("id",m).order("created_at",{ascending:!1});if(p)throw p;return MC(f)}async function LC(e){if(!e)return null;const{data:t,error:r}=await Ue.from("voting_sessions").select(Gu).eq("product_id",e).eq("is_active",!0).maybeSingle();if(r){if(r.code==="PGRST116")return null;throw r}return t?em(t):null}async function zC(e){const{data:t,error:r}=await Ue.from("voting_sessions").insert([e]).select().single();if(r)throw r;return t}async function BC(e,t){const{data:r,error:n}=await Ue.from("voting_sessions").update(t).eq("id",e).select().single();if(n)throw n;return r}async function a6(e){const{error:t}=await Ue.from("voting_sessions").delete().eq("id",e);if(t)throw t}async function o6(e,t){const{error:r}=await Ue.from("votes").delete().eq("session_id",e).eq("feature_id",t);if(r)throw r}async function UC(e){const{data:t,error:r}=await Ue.from("session_admins").select(`
      *,
      users (*)
    `).eq("session_id",e);if(r)throw r;return(t||[]).map(n=>({id:n.id,session_id:n.session_id,user_id:n.user_id,created_at:n.created_at,user:n.users}))}async function Ql(e,t){const{data:r,error:n}=await Ue.from("session_admins").insert([{session_id:e,user_id:t}]).select().single();if(n)throw n;return r}async function l6(e,t,r){const n=await X0(t,r);return Ql(e,n.id)}async function Ff(e,t){const{error:r}=await Ue.from("session_admins").delete().eq("session_id",e).eq("user_id",t);if(r)throw r}async function Pu(e,t){try{if(await Jo(t))return!0;const{data:n,error:s}=await Ue.from("session_admins").select("id").eq("session_id",e).eq("user_id",t).maybeSingle();return s?(console.error("Error checking admin status:",s),!1):!!n}catch(r){return console.error("Caught exception checking admin:",r),!1}}async function WC(e){const{data:t,error:r}=await Ue.from("session_stakeholders").select("*").eq("session_id",e).order("user_name",{ascending:!0});if(r)throw r;return t||[]}async function VC(e){const{data:t,error:r}=await Ue.from("session_stakeholders").insert([e]).select().single();if(r)throw r;return t}async function Uj(e,t,r){return VC({session_id:e,user_email:t,user_name:r,votes_allocated:0,has_voted:!1})}function qC(e,t,r){const n=`${window.location.origin}/login?session=${e.session_code??""}`,s=encodeURIComponent(`You're invited to vote: ${e.title}`),i=encodeURIComponent(`Hi,

You've been invited to participate in a feature voting session.

Session: ${e.title}
Goal: ${e.goal}

To get started, copy and paste this link into your browser:

${n}

Voting Period: ${e.start_date?Wj(e.start_date):""} - ${e.end_date?Wj(e.end_date):""}

Best regards,
${r}`);return`mailto:${encodeURIComponent(t)}?subject=${s}&body=${i}`}function Wj(e){return new Date(e).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})}async function Rv(e,t){const{error:r}=await Ue.from("session_stakeholders").delete().eq("session_id",e).eq("user_email",t);if(r)throw r}async function ex(e,t){try{const{data:r,error:n}=await Ue.from("session_stakeholders").select("id").eq("session_id",e).eq("user_email",t).maybeSingle();return n?(console.error("Error checking stakeholder status:",n),!1):!!r}catch(r){return console.error("Caught exception checking stakeholder:",r),!1}}async function c6(e,t){const{data:r,error:n}=await Ue.from("session_stakeholders").select("id").eq("session_id",e).eq("user_email",t.toLowerCase()).maybeSingle();return n?(console.error("Error checking stakeholder status:",n),!1):!!r}async function Tg(e,t){const{error:r}=await Ue.from("session_stakeholders").delete().eq("session_id",e).eq("user_email",t.toLowerCase());if(r)throw r}async function Ha(e){const{data:t,error:r}=await Ue.from("features").select("*").eq("session_id",e).order("created_at",{ascending:!1});if(r)throw r;return(t||[]).filter(n=>{const s=n.state===fa,i=Array.isArray(n.tags)&&n.tags.includes(Q0);return!s&&!i})}async function Ig(e){const{data:t,error:r}=await Ue.from("features").insert([{session_id:e.session_id,title:e.title,description:e.description,epic:e.epic,state:e.state,area_path:e.areaPath,tags:e.tags,azure_devops_id:e.azure_devops_id,azure_devops_url:e.azure_devops_url}]).select().single();if(r)throw r;return t}async function Dg(e,t){const r={};t.title!==void 0&&(r.title=t.title),t.description!==void 0&&(r.description=t.description),t.epic!==void 0&&(r.epic=t.epic),t.state!==void 0&&(r.state=t.state),t.areaPath!==void 0&&(r.area_path=t.areaPath),t.tags!==void 0&&(r.tags=t.tags),t.azure_devops_id!==void 0&&(r.azure_devops_id=t.azure_devops_id),t.azure_devops_url!==void 0&&(r.azure_devops_url=t.azure_devops_url);const{data:n,error:s}=await Ue.from("features").update(r).eq("id",e).select().single();if(s)throw s;return n}async function Vj(e){const{error:t}=await Ue.from("features").delete().eq("id",e);if(t)throw t}function HC(e){return{id:e.id,sessionId:e.session_id,type:e.type,reason:e.reason,details:e.details??null,actorName:e.actor_name??"Admin",actorId:e.actor_id??null,createdAt:e.created_at}}async function u6(e){try{const{data:t,error:r}=await Ue.from("session_status_notes").select("*").eq("session_id",e).order("created_at",{ascending:!1});if(r)throw r;return(t||[]).map(HC)}catch(t){if((t==null?void 0:t.code)==="42P01")return console.warn("[databaseService] session_status_notes table not found; status notes will not persist.",t),[];throw t}}async function d6(e){try{const{data:t,error:r}=await Ue.from("session_status_notes").insert([{session_id:e.session_id,type:e.type,reason:e.reason,details:e.details??null,actor_id:e.actor_id??null,actor_name:e.actor_name}]).select("*").single();if(r)throw r;return HC(t)}catch(t){if((t==null?void 0:t.code)==="42P01")return console.warn("[databaseService] session_status_notes table not found; status notes will not persist.",t),{id:`temp-${Date.now()}`,sessionId:e.session_id,type:e.type,reason:e.reason,details:e.details??null,actorName:e.actor_name,actorId:e.actor_id??null,createdAt:new Date().toISOString()};throw t}}async function Hl(e){const{data:t,error:r}=await Ue.from("votes").select("*").eq("session_id",e);if(r)throw r;return t||[]}async function f6(e){const{data:t}=await Ue.from("votes").select("*").eq("session_id",e.session_id).eq("feature_id",e.feature_id).eq("user_id",e.user_id).single();if(t){const{data:r,error:n}=await Ue.from("votes").update({vote_count:e.vote_count}).eq("session_id",e.session_id).eq("feature_id",e.feature_id).eq("user_id",e.user_id).select().single();if(n)throw n;return r}else{const{data:r,error:n}=await Ue.from("votes").insert([e]).select().single();if(n)throw n;return r}}async function h6(e,t){const{error:r}=await Ue.from("votes").delete().eq("session_id",e).eq("user_id",t);if(r)throw console.error("Error deleting user votes:",r),r}async function m6(e){const{error:t}=await Ue.from("votes").delete().eq("session_id",e);if(t)throw t}async function p6(e){try{const{data:t,error:r}=await Ue.from("azure_devops_config").select("*").eq("session_id",e).maybeSingle();if(r){if(r.code==="PGRST116")return null;throw r}return t}catch(t){return console.error("Error getting Azure DevOps config:",t),null}}async function Rl(e,t){try{const r={session_id:e,organization:t.organization,project:t.project,enabled:t.enabled,work_item_type:t.workItemType};t.accessToken!==void 0&&(r.access_token=t.accessToken),t.refreshToken!==void 0&&(r.refresh_token=t.refreshToken),t.tokenExpiresAt!==void 0&&(r.token_expires_at=t.tokenExpiresAt),t.tenantId!==void 0&&(r.tenant_id=t.tenantId),t.clientId!==void 0&&(r.client_id=t.clientId),t.query!==void 0&&(r.query=t.query),t.lastSyncTime!==void 0&&(r.last_sync_time=t.lastSyncTime),t.states!==void 0&&(r.states=t.states),t.areaPath!==void 0&&(r.area_path=t.areaPath),t.tags!==void 0&&(r.tags=t.tags);const{data:n,error:s}=await Ue.from("azure_devops_config").update(r).eq("session_id",e).select();if(!s&&n&&n.length>0)return n[0];const{data:i,error:l}=await Ue.from("azure_devops_config").upsert([r]).select().single();if(!l)return i;if((l==null?void 0:l.code)==="23505"){const{data:u,error:d}=await Ue.from("azure_devops_config").select("*").eq("session_id",e).maybeSingle();if(d)throw d;return u}throw l||s}catch(r){throw console.error("Error saving Azure DevOps config:",r),r}}async function g6(){return(await ha())[0]||null}async function y6(e){const t=await g6();if(!t)throw new Error("No session found");return BC(t.id,e)}async function qj(e,t){return BC(e,t)}async function v6(e){const{data:t,error:r}=await Ue.from("info_requests").insert([{session_id:e.session_id,feature_id:e.feature_id,feature_title:e.feature_title,requester_id:e.requester_id,requester_name:e.requester_name,requester_email:e.requester_email,created_at:e.created_at}]).select().single();if(r)throw r;return t}async function x6(e){const t={summary:e.description??null,whatWouldItDo:e.whatWouldItDo??null,howWouldItWork:e.howWouldItWork??null,requesterId:e.requester_id??null,requesterName:e.requester_name??null,requesterEmail:e.requester_email??null},{data:r,error:n}=await Ue.from("features").insert([{session_id:e.session_id,title:e.title,description:JSON.stringify(t),epic:null,state:fa,area_path:null,tags:[Q0],azure_devops_id:null,azure_devops_url:null}]).select("id, session_id, title, description, created_at").single();if(n)throw n;return Zh(r)}async function w6(e,t){const{data:r,error:n}=await Ue.from("features").select("id, title, description, session_id, created_at").eq("id",e).eq("state",fa).single();if(n)throw n;let s={};if(r!=null&&r.description)try{s=JSON.parse(r.description)}catch(d){console.warn("[databaseService] Unable to parse suggestion payload during update",d)}const i={summary:t.summary??s.summary??null,whatWouldItDo:t.whatWouldItDo??s.whatWouldItDo??null,howWouldItWork:t.howWouldItWork??s.howWouldItWork??null,requesterId:s.requesterId??null,requesterName:t.requester_name??s.requesterName??null,requesterEmail:t.requester_email??s.requesterEmail??null},{data:l,error:u}=await Ue.from("features").update({title:t.title??r.title,description:JSON.stringify(i)}).eq("id",e).eq("state",fa).select("id, session_id, title, description, created_at").single();if(u)throw u;return Zh(l)}async function b6(e){const{error:t}=await Ue.from("features").delete().eq("id",e).eq("state",fa);if(t)throw t}async function j6(e,t){const{data:r,error:n}=await Ue.from("features").update({session_id:t}).eq("id",e).eq("state",fa).select("id, session_id, title, description, created_at").single();if(n)throw n;return Zh(r)}async function S6(e){const{data:t,error:r}=await Ue.from("features").select("*").eq("id",e).eq("state",fa).single();if(r)throw r;let n={};if(t!=null&&t.description)try{n=JSON.parse(t.description)}catch(d){console.warn("[databaseService] Unable to parse suggestion payload during promotion",d)}const s=[];n.summary&&s.push(n.summary),n.whatWouldItDo&&s.push(`What would it do?
${n.whatWouldItDo}`),n.howWouldItWork&&s.push(`How would it work?
${n.howWouldItWork}`);const i=Array.isArray(t.tags)?t.tags.filter(d=>d!==Q0):[],{data:l,error:u}=await Ue.from("features").update({description:s.join(`

`)||t.title,state:null,tags:i}).eq("id",e).eq("state",fa).select("*").single();if(u)throw u;return l}async function _6(e){const{data:t,error:r}=await Ue.from("features").select("id, session_id, title, description, created_at, state, tags").eq("session_id",e).eq("state",fa).order("created_at",{ascending:!1});if(r)throw r;return(t||[]).map(Zh)}async function $v(){const{data:e,error:t}=await Ue.from("system_admins").select(`
      *,
      users (*)
    `).order("created_at",{ascending:!1});if(t)throw t;return(e||[]).map(r=>({id:r.id,user_id:r.user_id,created_at:r.created_at,user:r.users}))}async function th(e){const{data:t,error:r}=await Ue.from("system_admins").insert([{user_id:e}]).select().single();if(r)throw r;return t}async function Lf(e){const{error:t}=await Ue.from("system_admins").delete().eq("user_id",e);if(t)throw t}async function Jo(e){try{const{data:t,error:r}=await Ue.from("system_admins").select("id").eq("user_id",e).maybeSingle();return r?(console.error("Error checking system admin status:",r),!1):!!t}catch(t){return console.error("Caught exception checking system admin:",t),!1}}const N6=["dave.hoffman@newmill.com"],k6="".split(",").map(e=>e.trim().toLowerCase()).filter(Boolean),C6=Array.from(new Set([...N6,...k6]));function Mv(e){return e?C6.includes(e.toLowerCase()):!1}const KC=v.createContext(void 0);function E6({children:e}){const[t,r]=v.useState(null),[n,s]=v.useState([]),[i,l]=v.useState(null),[u,d]=v.useState(!1),[m,f]=v.useState(!1),[p,y]=v.useState(!1),[x,j]=v.useState(!0),[b,S]=v.useState(!1);v.useEffect(()=>{(async()=>{const P=localStorage.getItem("voting_system_user");if(P)try{const R=JSON.parse(P);l(R),await N(R)}catch(R){console.error("Error loading stored user:",R),localStorage.removeItem("voting_system_user")}j(!1)})()},[]),v.useEffect(()=>{(async()=>{if(!t||!i){d(!1),f(!1),S(!1);return}if(!b)try{const[P,R]=await Promise.all([Pu(t.id,i.id),ex(t.id,i.email)]);d(P),f(R),S(!1)}catch(P){console.error("Error checking user roles:",P),d(!1),f(!1),S(!0)}})()},[t,i,b]),v.useEffect(()=>{(async()=>{if(!i){y(!1);return}if(Mv(i.email)){y(!0);return}try{const R=await Jo(i.id);y(R)}catch(R){console.error("Error checking system admin status:",R),y(!1)}})()},[i]);const N=v.useCallback(async O=>{const P=O||i;if(!P){s([]),r(R=>{if(R)try{localStorage.removeItem("voting_system_current_session")}catch{}return null});return}try{const q=Mv(P.email)?await ha():await FC(P.id);s(q),r(F=>{if(!F)return F;const V=q.find(B=>B.id===F.id);if(!V){try{localStorage.removeItem("voting_system_current_session")}catch{}return null}if(V.id!==F.id)return F;if(V!==F){try{localStorage.setItem("voting_system_current_session",V.id)}catch{}return V}return F})}catch(R){console.error("Error loading sessions:",R),s([])}},[i]),E=v.useCallback(async O=>{l(O),S(!1),O?(localStorage.setItem("voting_system_user",JSON.stringify(O)),await N(O)):(localStorage.removeItem("voting_system_user"),s([]),r(null),y(!1))},[N]),k=v.useCallback(O=>{r(O),S(!1),O?localStorage.setItem("voting_system_current_session",O.id):localStorage.removeItem("voting_system_current_session")},[]);v.useEffect(()=>{(async()=>{if(!i||n.length===0)return;const P=localStorage.getItem("voting_system_current_session");if(P){const R=n.find(q=>q.id===P);R&&r(R)}})()},[i,n]);const T={currentSession:t,sessions:n,currentUser:i,isAdmin:u,isStakeholder:m,isSystemAdmin:p,setCurrentSession:k,refreshSessions:N,setCurrentUser:E};return x?a.jsx("div",{className:"min-h-screen w-full bg-gray-50 flex items-center justify-center",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-[#2d4660] mx-auto mb-4"}),a.jsx("p",{className:"text-gray-600",children:"Loading..."})]})}):a.jsx(KC.Provider,{value:T,children:e})}function Ui(){const e=v.useContext(KC);if(e===void 0)throw new Error("useSession must be used within a SessionProvider");return e}function tx(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function"){var s=0;for(n=Object.getOwnPropertySymbols(e);s<n.length;s++)t.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(e,n[s])&&(r[n[s]]=e[n[s]])}return r}function so(e,t,r,n){return new(r||(r=Promise))((function(s,i){function l(m){try{d(n.next(m))}catch(f){i(f)}}function u(m){try{d(n.throw(m))}catch(f){i(f)}}function d(m){var f;m.done?s(m.value):(f=m.value,f instanceof r?f:new r((function(p){p(f)}))).then(l,u)}d((n=n.apply(e,[])).next())}))}var Hj,Kj,Gj,rh,Yj,Jj,Qj,Fv,Xj,Zj;function A6(e){return(e==null?void 0:e.errorCode)!==void 0}(function(e){e.Inline="inline",e.Desktop="desktop",e.Web="web"})(Hj||(Hj={})),(function(e){e.M365Content="m365content"})(Kj||(Kj={})),(function(e){e.DriveId="driveId",e.GroupId="groupId",e.SiteId="siteId",e.UserId="userId"})(Gj||(Gj={})),(function(e){e[e.NOT_SUPPORTED_ON_PLATFORM=100]="NOT_SUPPORTED_ON_PLATFORM",e[e.INTERNAL_ERROR=500]="INTERNAL_ERROR",e[e.NOT_SUPPORTED_IN_CURRENT_CONTEXT=501]="NOT_SUPPORTED_IN_CURRENT_CONTEXT",e[e.PERMISSION_DENIED=1e3]="PERMISSION_DENIED",e[e.NETWORK_ERROR=2e3]="NETWORK_ERROR",e[e.NO_HW_SUPPORT=3e3]="NO_HW_SUPPORT",e[e.INVALID_ARGUMENTS=4e3]="INVALID_ARGUMENTS",e[e.UNAUTHORIZED_USER_OPERATION=5e3]="UNAUTHORIZED_USER_OPERATION",e[e.INSUFFICIENT_RESOURCES=6e3]="INSUFFICIENT_RESOURCES",e[e.THROTTLE=7e3]="THROTTLE",e[e.USER_ABORT=8e3]="USER_ABORT",e[e.OPERATION_TIMED_OUT=8001]="OPERATION_TIMED_OUT",e[e.OLD_PLATFORM=9e3]="OLD_PLATFORM",e[e.FILE_NOT_FOUND=404]="FILE_NOT_FOUND",e[e.SIZE_EXCEEDED=1e4]="SIZE_EXCEEDED"})(rh||(rh={})),(function(e){e.GeoLocation="geolocation",e.Media="media"})(Yj||(Yj={})),(function(e){e.BCAIS="bcais",e.BCWAF="bcwaf",e.BCWBF="bcwbf"})(Jj||(Jj={})),(function(e){e.Faculty="faculty",e.Student="student",e.Other="other"})(Qj||(Qj={})),(function(e){e.Adult="adult",e.MinorNoParentalConsentRequired="minorNoParentalConsentRequired",e.MinorWithoutParentalConsent="minorWithoutParentalConsent",e.MinorWithParentalConsent="minorWithParentalConsent",e.NotAdult="notAdult",e.NonAdult="notAdult"})(Fv||(Fv={})),(function(e){e.HigherEducation="higherEducation",e.K12="k12",e.Other="other"})(Xj||(Xj={})),(function(e){e.TextPlain="text/plain",e.TextHtml="text/html",e.ImagePNG="image/png",e.ImageJPEG="image/jpeg"})(Zj||(Zj={}));var Ht,Lv,zv,eS,tS,rS,nS,sS;(function(e){e.desktop="desktop",e.web="web",e.android="android",e.ios="ios",e.ipados="ipados",e.macos="macos",e.visionOS="visionOS",e.rigel="rigel",e.surfaceHub="surfaceHub",e.teamsRoomsWindows="teamsRoomsWindows",e.teamsRoomsAndroid="teamsRoomsAndroid",e.teamsPhones="teamsPhones",e.teamsDisplays="teamsDisplays"})(Ht||(Ht={})),(function(e){e.office="Office",e.outlook="Outlook",e.outlookWin32="OutlookWin32",e.orange="Orange",e.places="Places",e.teams="Teams",e.teamsModern="TeamsModern"})(Lv||(Lv={})),(function(e){e.settings="settings",e.content="content",e.authentication="authentication",e.remove="remove",e.task="task",e.sidePanel="sidePanel",e.stage="stage",e.meetingStage="meetingStage"})(zv||(zv={})),(function(e){e.copilotSidePanel="copilotSidePanel",e.copilotMainPane="copilotMainPane",e.copilotFullScreen="copilotFullScreen"})(eS||(eS={})),(function(e){e[e.Standard=0]="Standard",e[e.Edu=1]="Edu",e[e.Class=2]="Class",e[e.Plc=3]="Plc",e[e.Staff=4]="Staff"})(tS||(tS={})),(function(e){e[e.Admin=0]="Admin",e[e.User=1]="User",e[e.Guest=2]="Guest"})(rS||(rS={})),(function(e){e.Large="large",e.Medium="medium",e.Small="small"})(nS||(nS={})),(function(e){e.Regular="Regular",e.Private="Private",e.Shared="Shared"})(sS||(sS={}));const P6={errorCode:rh.NOT_SUPPORTED_ON_PLATFORM},O6={adaptiveCardSchemaVersion:{majorVersion:1,minorVersion:5}};var iS={randomUUID:typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};let vf;const T6=new Uint8Array(16);function I6(){if(!vf&&(vf=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!vf))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return vf(T6)}const Mn=[];for(let e=0;e<256;++e)Mn.push((e+256).toString(16).slice(1));function D6(e,t=0){return Mn[e[t+0]]+Mn[e[t+1]]+Mn[e[t+2]]+Mn[e[t+3]]+"-"+Mn[e[t+4]]+Mn[e[t+5]]+"-"+Mn[e[t+6]]+Mn[e[t+7]]+"-"+Mn[e[t+8]]+Mn[e[t+9]]+"-"+Mn[e[t+10]]+Mn[e[t+11]]+Mn[e[t+12]]+Mn[e[t+13]]+Mn[e[t+14]]+Mn[e[t+15]]}function R6(e,t,r){if(iS.randomUUID&&!e)return iS.randomUUID();const n=(e=e||{}).random||(e.rng||I6)();return n[6]=15&n[6]|64,n[8]=63&n[8]|128,D6(n)}var $6=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function M6(e){return typeof e=="string"&&$6.test(e)}function GC(e,t){if(typeof e!="string"||typeof t!="string")return NaN;const r=e.split("."),n=t.split(".");function s(i){return/^\d+$/.test(i)}if(!r.every(s)||!n.every(s))return NaN;for(;r.length<n.length;)r.push("0");for(;n.length<r.length;)n.push("0");for(let i=0;i<r.length;++i)if(Number(r[i])!=Number(n[i]))return Number(r[i])>Number(n[i])?1:-1;return 0}function F6(){return R6()}function YC(e){return Object.keys(e).forEach((t=>{e[t]!==null&&e[t]!==void 0&&typeof e[t]=="object"&&YC(e[t])})),Object.freeze(e)}function L6(e,t,r){return new Promise(((n,s)=>{const i=setTimeout(s,t,r);e().then((l=>{clearTimeout(i),n(l)})).catch((l=>{clearTimeout(i),s(l)}))}))}function z6(e){return e.protocol==="https:"}function B6(){if(tm())throw new Error("window object undefined at SSR check");return window}function tm(){return typeof window>"u"}function U6(e){return new RegExp(`${/<script[^>]*>|&lt;script[^&]*&gt;|%3Cscript[^%]*%3E/gi.source}|${/<\/script[^>]*>|&lt;\/script[^&]*&gt;|%3C\/script[^%]*%3E/gi.source}`,"gi").test(e)}function W6(e){if(!e)throw new Error("id must not be empty");if(M6(e)===!1)throw new Error("id must be a valid UUID")}const V6=!!performance&&"now"in performance;function rx(){return V6?performance.now()+performance.timeOrigin:void 0}function aS(e){var t,r;if(!(!((r=(t=e.hostVersionsInfo)===null||t===void 0?void 0:t.appEligibilityInformation)===null||r===void 0)&&r.ageGroup))return e;const n=e.hostVersionsInfo.appEligibilityInformation.ageGroup;return(n==null?void 0:n.toLowerCase())!=="nonadult"?e:Object.assign(Object.assign({},e),{hostVersionsInfo:Object.assign(Object.assign({},e.hostVersionsInfo),{appEligibilityInformation:Object.assign(Object.assign({},e.hostVersionsInfo.appEligibilityInformation),{ageGroup:Fv.NotAdult})})})}let Yu=class{constructor(t=F6()){this.uuid=t,W6(t)}toString(){return this.uuid}serialize(){return this.toString()}};const JC=e=>{const{uuid:t}=e,r=tx(e,["uuid"]),n=t==null?void 0:t.toString();return Object.assign(Object.assign({},r),{uuidAsString:n})},q6=e=>{const{uuidAsString:t}=e,r=tx(e,["uuidAsString"]);return Object.assign(Object.assign({},r),{uuid:t?new Yu(t):void 0})};var Bv={exports:{}},oS,lS;function H6(){if(lS)return oS;lS=1;var e=1e3,t=60*e,r=60*t,n=24*r,s=7*n,i=365.25*n;function l(u,d,m,f){var p=d>=1.5*m;return Math.round(u/m)+" "+f+(p?"s":"")}return oS=function(u,d){d=d||{};var m=typeof u;if(m==="string"&&u.length>0)return(function(f){if(!((f=String(f)).length>100)){var p=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(f);if(p){var y=parseFloat(p[1]);switch((p[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return y*i;case"weeks":case"week":case"w":return y*s;case"days":case"day":case"d":return y*n;case"hours":case"hour":case"hrs":case"hr":case"h":return y*r;case"minutes":case"minute":case"mins":case"min":case"m":return y*t;case"seconds":case"second":case"secs":case"sec":case"s":return y*e;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return y;default:return}}}})(u);if(m==="number"&&isFinite(u))return d.long?(function(f){var p=Math.abs(f);return p>=n?l(f,p,n,"day"):p>=r?l(f,p,r,"hour"):p>=t?l(f,p,t,"minute"):p>=e?l(f,p,e,"second"):f+" ms"})(u):(function(f){var p=Math.abs(f);return p>=n?Math.round(f/n)+"d":p>=r?Math.round(f/r)+"h":p>=t?Math.round(f/t)+"m":p>=e?Math.round(f/e)+"s":f+"ms"})(u);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(u))}}var K6=function(e){function t(s){let i,l,u,d=null;function m(...f){if(!m.enabled)return;const p=m,y=Number(new Date),x=y-(i||y);p.diff=x,p.prev=i,p.curr=y,i=y,f[0]=t.coerce(f[0]),typeof f[0]!="string"&&f.unshift("%O");let j=0;f[0]=f[0].replace(/%([a-zA-Z%])/g,((b,S)=>{if(b==="%%")return"%";j++;const N=t.formatters[S];if(typeof N=="function"){const E=f[j];b=N.call(p,E),f.splice(j,1),j--}return b})),t.formatArgs.call(p,f),(p.log||t.log).apply(p,f)}return m.namespace=s,m.useColors=t.useColors(),m.color=t.selectColor(s),m.extend=r,m.destroy=t.destroy,Object.defineProperty(m,"enabled",{enumerable:!0,configurable:!1,get:()=>d!==null?d:(l!==t.namespaces&&(l=t.namespaces,u=t.enabled(s)),u),set:f=>{d=f}}),typeof t.init=="function"&&t.init(m),m}function r(s,i){const l=t(this.namespace+(i===void 0?":":i)+s);return l.log=this.log,l}function n(s){return s.toString().substring(2,s.toString().length-2).replace(/\.\*\?$/,"*")}return t.debug=t,t.default=t,t.coerce=function(s){return s instanceof Error?s.stack||s.message:s},t.disable=function(){const s=[...t.names.map(n),...t.skips.map(n).map((i=>"-"+i))].join(",");return t.enable(""),s},t.enable=function(s){let i;t.save(s),t.namespaces=s,t.names=[],t.skips=[];const l=(typeof s=="string"?s:"").split(/[\s,]+/),u=l.length;for(i=0;i<u;i++)l[i]&&((s=l[i].replace(/\*/g,".*?"))[0]==="-"?t.skips.push(new RegExp("^"+s.slice(1)+"$")):t.names.push(new RegExp("^"+s+"$")))},t.enabled=function(s){if(s[s.length-1]==="*")return!0;let i,l;for(i=0,l=t.skips.length;i<l;i++)if(t.skips[i].test(s))return!1;for(i=0,l=t.names.length;i<l;i++)if(t.names[i].test(s))return!0;return!1},t.humanize=H6(),t.destroy=function(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")},Object.keys(e).forEach((s=>{t[s]=e[s]})),t.names=[],t.skips=[],t.formatters={},t.selectColor=function(s){let i=0;for(let l=0;l<s.length;l++)i=(i<<5)-i+s.charCodeAt(l),i|=0;return t.colors[Math.abs(i)%t.colors.length]},t.enable(t.load()),t},G6={};(function(e,t){t.formatArgs=function(n){if(n[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+n[0]+(this.useColors?"%c ":" ")+"+"+e.exports.humanize(this.diff),!this.useColors)return;const s="color: "+this.color;n.splice(1,0,s,"color: inherit");let i=0,l=0;n[0].replace(/%[a-zA-Z%]/g,(u=>{u!=="%%"&&(i++,u==="%c"&&(l=i))})),n.splice(l,0,s)},t.save=function(n){try{n?t.storage.setItem("debug",n):t.storage.removeItem("debug")}catch{}},t.load=function(){let n;try{n=t.storage.getItem("debug")}catch{}return!n&&typeof process<"u"&&"env"in process&&(n=G6.DEBUG),n},t.useColors=function(){return typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs)?!0:typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/)?!1:typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)},t.storage=(function(){try{return localStorage}catch{}})(),t.destroy=(()=>{let n=!1;return()=>{n||(n=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),t.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],t.log=console.debug||console.log||(()=>{}),e.exports=K6(t);const{formatters:r}=e.exports;r.j=function(n){try{return JSON.stringify(n)}catch(s){return"[UnexpectedJSONParseError]: "+s.message}}})(Bv,Bv.exports);var nx=Bv.exports;const Y6=new Yu,J6=nx.debug.formatArgs;nx.debug.formatArgs=function(e){e[0]=`(${new Date().toISOString()}): ${e[0]} [${Y6.toString()}]`,J6.call(this,e)};const Q6=nx.debug("teamsJs");function Wi(e){return Q6.extend(e)}function Vr(e,t){return`${e}_${t}`}function QC(e){return/^v\d+_[\w.]+$/.test(e)}function Za(e){return e.uuidAsString!==void 0?`${e.uuidAsString} (legacy id: ${e.id})`:e.uuid!==void 0?`${e.uuid.toString()} (legacy id: ${e.id})`:`legacy id: ${e.id} (no uuid)`}const X6=Wi("flushMessageQueue");function XC(e,t,r,n){if(e&&t&&r.length!==0)for(;r.length>0;){const s=r.shift();if(s){const i=JC(s);X6("Flushing message %s from %s message queue via postMessage.",Za(i),n),e.postMessage(i,t)}}}var Z6=["teams.microsoft.com","teams.microsoft.us","gov.teams.microsoft.us","dod.teams.microsoft.us","int.teams.microsoft.com","outlook.office.com","outlook-sdf.office.com","outlook.office365.com","outlook-sdf.office365.com","outlook.office365.us","outlook-dod.office365.us","webmail.apps.mil","outlook.live.com","outlook-sdf.live.com","teams.live.com","local.teams.live.com","local.teams.live.com:8080","local.teams.office.com","local.teams.office.com:8080","devspaces.skype.com","*.www.office.com","www.office.com","word.office.com","excel.office.com","powerpoint.office.com","www.officeppe.com","*.www.microsoft365.com","www.microsoft365.com","bing.com","edgeservices.bing.com","work.bing.com","www.bing.com","www.staging-bing-int.com","*.cloud.microsoft","*.m365.cloud.microsoft","*.outlook.cloud.microsoft","chatuxmanager.svc.cloud.microsoft","copilot.microsoft.com","windows.msn.com","fa000000125.resources.office.net","fa000000129.resources.office.net","fa000000124.resources.office.net","fa000000128.resources.office.net","fa000000136.resources.office.net","fa000000125.officeapps.live.com","fa000000129.officeapps.live.com","fa000000124.officeapps.live.com","fa000000128.officeapps.live.com"];const cS="2.0.1",zf=Z6,uS=1500,e$=new URL("https://res.cdn.office.net/teams-js/validDomains/json/validDomains.json"),t$=/^https:\/\//,Ou="The library has not yet been initialized",r$="The runtime has not yet been initialized",n$="The runtime version is not supported";let kt=class{};kt.initializeCalled=!1,kt.initializeCompleted=!1,kt.additionalValidOrigins=[],kt.initializePromise=void 0,kt.isFramelessWindow=!1,kt.frameContext=void 0,kt.hostClientType=void 0,kt.printCapabilityEnabled=!1,kt.teamsJsInstanceId=new Yu().toString();const ZC=Wi("runtime"),rm=4;function eE(e){return e.apiVersion===rm}function s$(e){if(eE(e))return!0;throw e.apiVersion===-1?new Error(r$):new Error(n$)}let $i={apiVersion:-1,supports:{}};const i$={supports:{appInstallDialog:{},appEntity:{},call:{},chat:{},conversations:{},dialog:{card:{bot:{}},url:{bot:{},parentCommunication:{}},update:{}},interactive:{},logs:{},meetingRoom:{},menus:{},monetization:{},notifications:{},pages:{config:{},backStack:{},fullTrust:{}},remoteCamera:{},teams:{fullTrust:{}},teamsCore:{},video:{sharedFrame:{}}}},tE=[Ht.desktop,Ht.web,Ht.rigel,Ht.surfaceHub,Ht.teamsRoomsWindows,Ht.teamsRoomsAndroid,Ht.teamsPhones,Ht.teamsDisplays],a$=[Ht.android,Ht.ios,Ht.ipados,Ht.visionOS],dS=[...tE,...a$];function o$(e){let t=e;if(t.apiVersion<rm&&l$.forEach((r=>{t.apiVersion===r.versionToUpgradeFrom&&(t=r.upgradeToNextVersion(t))})),eE(t))return t;throw new Error("Received a runtime that could not be upgraded to the latest version")}const l$=[{versionToUpgradeFrom:1,upgradeToNextVersion:e=>{var t;return{apiVersion:2,hostVersionsInfo:void 0,isLegacyTeams:e.isLegacyTeams,supports:Object.assign(Object.assign({},e.supports),{dialog:e.supports.dialog?{card:void 0,url:e.supports.dialog,update:(t=e.supports.dialog)===null||t===void 0?void 0:t.update}:void 0})}}},{versionToUpgradeFrom:2,upgradeToNextVersion:e=>{const t=e.supports,r=tx(t,["appNotification"]);return Object.assign(Object.assign({},e),{apiVersion:3,supports:r})}},{versionToUpgradeFrom:3,upgradeToNextVersion:e=>{var t,r,n,s,i;return{apiVersion:4,hostVersionsInfo:e.hostVersionsInfo,isNAAChannelRecommended:e.isNAAChannelRecommended,isLegacyTeams:e.isLegacyTeams,supports:Object.assign(Object.assign({},e.supports),{dialog:e.supports.dialog?{card:(t=e.supports.dialog)===null||t===void 0?void 0:t.card,url:{bot:(n=(r=e.supports.dialog)===null||r===void 0?void 0:r.url)===null||n===void 0?void 0:n.bot,parentCommunication:!((s=e.supports.dialog)===null||s===void 0)&&s.url?{}:void 0},update:(i=e.supports.dialog)===null||i===void 0?void 0:i.update}:void 0})}}}],c$={"1.0.0":[{capability:{pages:{appButton:{},tabs:{}},stageView:{}},hostClientTypes:tE}],"1.9.0":[{capability:{location:{}},hostClientTypes:dS}],"2.0.0":[{capability:{people:{}},hostClientTypes:dS},{capability:{sharing:{}},hostClientTypes:[Ht.desktop,Ht.web]}],"2.0.1":[{capability:{teams:{fullTrust:{joinedTeams:{}}}},hostClientTypes:[Ht.android,Ht.desktop,Ht.ios,Ht.teamsRoomsAndroid,Ht.teamsPhones,Ht.teamsDisplays,Ht.web]},{capability:{webStorage:{}},hostClientTypes:[Ht.desktop]}],"2.0.5":[{capability:{webStorage:{}},hostClientTypes:[Ht.android,Ht.ios]}],"2.0.8":[{capability:{sharing:{}},hostClientTypes:[Ht.android,Ht.ios]}],"2.1.1":[{capability:{nestedAppAuth:{}},hostClientTypes:[Ht.android,Ht.ios,Ht.ipados,Ht.visionOS]}],"2.1.2":[]},Rg=ZC.extend("generateBackCompatRuntimeConfig");function rE(e,t){const r=Object.assign({},e);for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&(typeof t[n]!="object"||Array.isArray(t[n])?n in e||(r[n]=t[n]):r[n]=rE(e[n]||{},t[n]));return r}function u$(e,t,r){Rg("generating back compat runtime config for %s",e);let n=Object.assign({},t.supports);Rg("Supported capabilities in config before updating based on highestSupportedVersion: %o",n),Object.keys(r).forEach((i=>{GC(e,i)>=0&&r[i].forEach((l=>{kt.hostClientType!==void 0&&l.hostClientTypes.includes(kt.hostClientType)&&(n=rE(n,l.capability))}))}));const s={apiVersion:rm,hostVersionsInfo:O6,isLegacyTeams:!0,supports:n};return Rg("Runtime config after updating based on highestSupportedVersion: %o",s),s}const $g=ZC.extend("applyRuntimeConfig");function Mg(e){typeof e.apiVersion=="string"&&($g("Trying to apply runtime with string apiVersion, processing as v1: %o",e),e=Object.assign(Object.assign({},e),{apiVersion:1})),$g("Fast-forwarding runtime %o",e);const t=o$(e);$g("Applying runtime %o",t),$i=YC(t)}function d$(e){return e!=null&&e.serialize!==void 0&&typeof e.serialize=="function"}const nh="2.46.0";let sh=class Vl{static storeCallbackInformation(t,r){Vl.callbackInformation.set(t,r)}static clearMessages(){Vl.callbackInformation.clear()}static deleteMessageInformation(t){Vl.callbackInformation.delete(t)}static handleOneWayPerformanceMetrics(t,r,n){const s=t.monotonicTimestamp;s&&n?_S({actionName:t.func,messageDelay:n-s,requestStartedAt:s}):r("Unable to send performance metrics for event %s",t.func)}static handlePerformanceMetrics(t,r,n,s){const i=Vl.callbackInformation.get(t);i&&r.monotonicTimestamp&&s?(_S({actionName:i.name,messageDelay:s-r.monotonicTimestamp,requestStartedAt:i.calledAt}),Vl.deleteMessageInformation(t)):n("Unable to send performance metrics for callback %s with arguments %o",t.toString(),r.args)}};sh.callbackInformation=new Map;const nE=Wi("nestedAppAuthUtils"),f$=nE.extend("tryPolyfillWithNestedAppAuthBridge"),h$="v2";function m$(e,t,r){var n;const s=f$;if(kt.isFramelessWindow)return void s("Cannot polyfill nestedAppAuthBridge as current window is frameless");if(!t)return void s("Cannot polyfill nestedAppAuthBridge as current window does not exist");if(t.parent!==t.top)return void s("Default NAA bridge injection not supported in nested iframe. Use standalone NAA bridge instead.");const i=(()=>{try{return JSON.parse(e)}catch{return null}})();if(!i||!(!((n=i.supports)===null||n===void 0)&&n.nestedAppAuth))return void s("Cannot polyfill nestedAppAuthBridge as current hub does not support nested app auth");const l=t;if(l.nestedAppAuthBridge)return void s("nestedAppAuthBridge already exists on current window, skipping polyfill");const u=(function(d,m){const f=p$;if(!d)return f("nestedAppAuthBridge cannot be created as current window does not exist"),null;const{onMessage:p,sendPostMessage:y}=m,x=j=>b=>p(b,j);return{addEventListener:(j,b)=>{j==="message"?d.addEventListener(j,x(b)):f(`Event ${j} is not supported by nestedAppAuthBridge`)},postMessage:j=>{const b=(()=>{try{return JSON.parse(j)}catch{return null}})();if(!b||typeof b!="object"||b.messageType!=="NestedAppAuthRequest")return void f("Unrecognized data format received by app, message being ignored. Message: %o",j);const S=Vr(h$,"nestedAppAuth.execute");y(j,S)},removeEventListener:(j,b)=>{d.removeEventListener(j,x(b))}}})(l,r);u&&(l.nestedAppAuthBridge=u)}const p$=nE.extend("createNestedAppAuthBridge");let Ka=[];const Qa=Wi("validateOrigin");let gu;function g$(){return so(this,void 0,void 0,(function*(){gu||(yield iE())}))}function sE(){return Ka.length===0}function iE(e=!1){return so(this,void 0,void 0,(function*(){if(!sE()&&!e)return Ka;if(gu)return gu;if(tm())return Ka=zf,zf;{Qa("Initiating fetch call to acquire valid origins list from CDN");const t=new AbortController,r=setTimeout((()=>t.abort()),uS);return gu=fetch(e$,{signal:t.signal}).then((n=>{if(clearTimeout(r),!n.ok)throw new Error("Invalid Response from Fetch Call");return Qa("Fetch call completed and retrieved valid origins list from CDN"),n.json().then((s=>{if((function(i){let l=JSON.parse(i);try{l=JSON.parse(i)}catch{return!1}if(!l.validOrigins)return!1;for(const u of l.validOrigins)try{new URL("https://"+u)}catch{return Qa("isValidOriginsFromCDN call failed to validate origin: %s",u),!1}return!0})(JSON.stringify(s)))return Ka=s.validOrigins,Ka;throw new Error("Valid origins list retrieved from CDN is invalid")}))})).catch((n=>(n.name==="AbortError"?Qa(`validOrigins fetch call to CDN failed due to Timeout of ${uS} ms. Defaulting to fallback list`):Qa("validOrigins fetch call to CDN failed with error: %s. Defaulting to fallback list",n),Ka=zf,Ka))),gu}}))}function fS(e,t){if(e.substring(0,2)==="*."){const r=e.substring(1);if(t.length>r.length&&t.split(".").length===r.split(".").length&&t.substring(t.length-r.length)===r)return!0}else if(e===t)return!0;return!1}function y$(e,t){const r=sE()?zf:Ka;return hS(e,r)?Promise.resolve(!0):(Qa("Origin %s is not in the local valid origins list, fetching from CDN",e),iE(t).then((n=>hS(e,n))))}function hS(e,t){if(!z6(e))return Qa("Origin %s is invalid because it is not using https protocol. Protocol being used: %s",e,e.protocol),!1;const r=e.host;if(t.some((n=>fS(n,r))))return!0;for(const n of kt.additionalValidOrigins)if(fS(n.substring(0,8)==="https://"?n.substring(8):n,r))return!0;return Qa(`Origin %s is invalid because it is not an origin approved by this library or included in the call to app.initialize.
Origins approved by this library: %o
Origins included in app.initialize: %o`,e,t,kt.additionalValidOrigins),!1}g$();const Qo=Wi("communication");let nt=class{},Gt=class{};function v$(e,t){if(Gt.messageListener=r=>(function(n){return so(this,void 0,void 0,(function*(){if(!n||!n.data||typeof n.data!="object")return void mS("Unrecognized message format received by app, message being ignored. Message: %o",n);const s=n.source||n.originalEvent&&n.originalEvent.source,i=n.origin||n.originalEvent&&n.originalEvent.origin;return lE(s,i).then((l=>{l?((function(u,d){kt.isFramelessWindow||nt.parentWindow&&!nt.parentWindow.closed&&u!==nt.parentWindow||(nt.parentWindow=u,nt.parentOrigin=d),nt.parentWindow&&nt.parentWindow.closed&&(nt.parentWindow=null,nt.parentOrigin=null),XC(nt.parentWindow,nt.parentOrigin,Gt.parentMessageQueue,"parent")})(s,i),s!==nt.parentWindow?bM():gS(n)):mS("Message being ignored by app because it is either coming from the current window or a different window with an invalid origin, message: %o, source: %o, origin: %o",n,s,i)}))}))})(r),nt.currentWindow=nt.currentWindow||B6(),nt.parentWindow=nt.currentWindow.parent!==nt.currentWindow.self?nt.currentWindow.parent:nt.currentWindow.opener,nt.topWindow=nt.currentWindow.top,(nt.parentWindow||e)&&nt.currentWindow.addEventListener("message",Gt.messageListener,!1),!nt.parentWindow){const r=nt.currentWindow;if(!r.nativeInterface)return Promise.reject(new Error("Initialization Failed. No Parent window found."));kt.isFramelessWindow=!0,r.onNativeMessage=gS}try{return nt.parentOrigin="*",nm(t,"initialize",[nh,rm,e]).then((([r,n,s,i])=>(m$(i,nt.currentWindow,{onMessage:E$,sendPostMessage:_$}),{context:r,clientType:n,runtimeConfig:s,clientSupportedSDKVersion:i})))}finally{nt.parentOrigin=null}}function x$(e,t,...r){return nm(e,t,r).then((([n])=>n))}function w$(e,t,r,...n){return nm(e,t,n).then((([s,i])=>{if(!s)throw new Error(i||r)}))}function nm(e,t,r=void 0){if(!QC(e))throw Error(`apiVersionTag: ${e} passed in doesn't follow the pattern starting with 'v' followed by digits, then underscore with words, please check.`);return new Promise((n=>{const s=oE(e,t,r);var i;n((i=s.uuid,new Promise((l=>{Gt.promiseCallbacks.set(i,l)}))))}))}function b$(e){return e.map((t=>d$(t)?t.serialize():t))}function j$(e,t,r,n,s){var i;return so(this,void 0,void 0,(function*(){const l=b$(t),[u]=yield nm(n,e,l);if(A6(u))throw new Error(`${u.errorCode}, message: ${(i=u.message)!==null&&i!==void 0?i:"None"}`);if(r.validate(u))return r.deserialize(u);throw new Error(`${rh.INTERNAL_ERROR}, message: Invalid response from host - ${JSON.stringify(u)}`)}))}function bi(e,t,r,n){let s;if(r instanceof Function?n=r:r instanceof Array&&(s=r),!QC(e))throw Error(`apiVersionTag: ${e} passed in doesn't follow the pattern starting with 'v' followed by digits, then underscore with words, please check.`);const i=oE(e,t,s);n&&Gt.callbacks.set(i.uuid,n)}Gt.parentMessageQueue=[],Gt.topMessageQueue=[],Gt.nextMessageId=0,Gt.callbacks=new Map,Gt.promiseCallbacks=new Map,Gt.portCallbacks=new Map,Gt.legacyMessageIdsToUuidMap={};const S$=Qo.extend("sendNestedAuthRequestToTopWindow");function _$(e,t){const r=S$,n=nt.topWindow,s=(function(i,l){const u=Gt.nextMessageId++,d=new Yu;return Gt.legacyMessageIdsToUuidMap[u]=d,{id:u,uuid:d,func:"nestedAppAuth.execute",timestamp:Date.now(),monotonicTimestamp:rx(),apiVersionTag:l,args:[],data:i}})(e,t);return r("Message %s information: %o",Za(s),{actionName:s.func}),aE(n,s)}const N$=Qo.extend("sendRequestToTargetWindowHelper");function aE(e,t){const r=N$,n=(function(i){return i===nt.topWindow&&Uv()?"top":i===nt.parentWindow?"parent":null})(e),s=JC(t);if(kt.isFramelessWindow)nt.currentWindow&&nt.currentWindow.nativeInterface&&(r("Sending message %s to %s via framelessPostMessage interface",Za(s),n),nt.currentWindow.nativeInterface.framelessPostMessage(JSON.stringify(s)));else{const i=(function(l){return l===nt.topWindow&&Uv()?nt.topOrigin:l===nt.parentWindow?nt.parentOrigin:null})(e);e&&i?(r("Sending message %s to %s via postMessage",Za(s),n),e.postMessage(s,i)):(r("Adding message %s to %s message queue",Za(s),n),A$(e).push(t))}return t}const k$=Qo.extend("sendMessageToParentHelper");function oE(e,t,r,n,s){const i=k$,l=nt.parentWindow,u=(function(d,m,f,p,y){const x=Gt.nextMessageId++,j=new Yu;Gt.legacyMessageIdsToUuidMap[x]=j;const b=kt.teamsJsInstanceId;return{id:x,uuid:j,func:m,timestamp:Date.now(),monotonicTimestamp:rx(),args:f||[],apiVersionTag:d,isProxiedFromChild:p!=null,teamsJsInstanceId:b}})(e,t,r,n);return sh.storeCallbackInformation(u.uuid,{name:t,calledAt:u.timestamp}),i("Message %s information: %o",Za(u),{actionName:t,args:r}),aE(l,u)}const mS=Qo.extend("processIncomingMessage"),C$=Qo.extend("processAuthBridgeMessage");function E$(e,t){var r,n;const s=C$;if(!e||!e.data||typeof e.data!="object")return void s("Unrecognized message format received by app, message being ignored. Message: %o",e);const{args:i}=e.data,[,l]=i??[],u=(()=>{try{return JSON.parse(l)}catch{return null}})();if(!u||typeof u!="object"||u.messageType!=="NestedAppAuthResponse")return void s("Unrecognized data format received by app, message being ignored. Message: %o",e);const d=e.source||((r=e==null?void 0:e.originalEvent)===null||r===void 0?void 0:r.source),m=e.origin||((n=e==null?void 0:e.originalEvent)===null||n===void 0?void 0:n.origin);d?lE(d,m)?(nt.topWindow&&!nt.topWindow.closed&&d!==nt.topWindow||(nt.topWindow=d,nt.topOrigin=m),nt.topWindow&&nt.topWindow.closed&&(nt.topWindow=null,nt.topOrigin=null),XC(nt.topWindow,nt.topOrigin,Gt.topMessageQueue,"top"),t(l)):s("Message being ignored by app because it is either coming from the current window or a different window with an invalid origin"):s("Message being ignored by app because it is coming for a target that is null")}const Fg=Qo.extend("shouldProcessIncomingMessage");function lE(e,t){return so(this,void 0,void 0,(function*(){if(nt.currentWindow&&e===nt.currentWindow)return Fg("Should not process message because it is coming from the current window"),!1;if(nt.currentWindow&&nt.currentWindow.location&&t&&t===nt.currentWindow.location.origin)return!0;{let r;try{r=new URL(t)}catch{return Fg("Message has an invalid origin of %s",t),!1}const n=yield y$(r);return n||Fg("Message has an invalid origin of %s",t),n}}))}const pS=Qo.extend("handleIncomingMessageFromParent");function Bf(e,t){if(t){const r=[...e].find((([n,s])=>n.toString()===t.toString()));if(r)return r[0]}}function Lg(e,t){const r=Bf(t,e.uuid);r&&t.delete(r),e.uuid?Gt.legacyMessageIdsToUuidMap={}:delete Gt.legacyMessageIdsToUuidMap[e.id]}function gS(e){const t=pS,r=rx();if("id"in e.data&&typeof e.data.id=="number"){const n=e.data,s=q6(n),i=(function(l){const u=pS;if(!l.uuid)return Gt.legacyMessageIdsToUuidMap[l.id];{const d=l.uuid,m=Bf(Gt.callbacks,d);if(m)return m;const f=Bf(Gt.promiseCallbacks,d);if(f)return f;const p=Bf(Gt.portCallbacks,d);if(p)return p}u("Received message %s that failed to produce a callbackId",Za(l))})(s);if(i){const l=Gt.callbacks.get(i);t("Received a response from parent for message %s",i.toString()),sh.handlePerformanceMetrics(i,s,t,r),l&&(t("Invoking the registered callback for message %s with arguments %o",i.toString(),s.args),l.apply(null,[...s.args,s.isPartialResponse]),(function(m){return m.data.isPartialResponse===!0})(e)||(t("Removing registered callback for message %s",i.toString()),Lg(s,Gt.callbacks)));const u=Gt.promiseCallbacks.get(i);u&&(t("Invoking the registered promise callback for message %s with arguments %o",i.toString(),s.args),u(s.args),t("Removing registered promise callback for message %s",i.toString()),Lg(s,Gt.promiseCallbacks));const d=Gt.portCallbacks.get(i);if(d){let m;t("Invoking the registered port callback for message %s with arguments %o",i.toString(),s.args),e.ports&&e.ports[0]instanceof MessagePort&&(m=e.ports[0]),d(m,s.args),t("Removing registered port callback for message %s",i.toString()),Lg(s,Gt.portCallbacks)}s.uuid&&(Gt.legacyMessageIdsToUuidMap={})}}else if("func"in e.data&&typeof e.data.func=="string"){const n=e.data;sh.handleOneWayPerformanceMetrics(n,t,r),t('Received a message from parent %s, action: "%s"',Za(n),n.func),mM(n.func,n.args)}else t("Received an unknown message: %O",e)}function Uv(){return nt.topWindow!==nt.parentWindow}function A$(e){return e===nt.topWindow&&Uv()?Gt.topMessageQueue:e===nt.parentWindow?Gt.parentMessageQueue:[]}const cE=Wi("internal"),P$=cE.extend("ensureInitializeCalled"),O$=cE.extend("ensureInitialized");function uE(){if(!kt.initializeCalled)throw P$(Ou),new Error(Ou)}function vc(e,...t){if(!kt.initializeCompleted)throw O$("%s. initializeCalled: %s",Ou,kt.initializeCalled.toString()),new Error(Ou);if(t&&t.length>0){let r=!1;for(let n=0;n<t.length;n++)if(t[n]===kt.frameContext){r=!0;break}if(!r)throw new Error(`This call is only allowed in following contexts: ${JSON.stringify(t)}. Current context: "${kt.frameContext}".`)}return s$(e)}function T$(e){let t=kt.additionalValidOrigins.concat(e.filter((n=>typeof n=="string"&&t$.test(n))));const r={};t=t.filter((n=>!r[n]&&(r[n]=!0,!0))),kt.additionalValidOrigins=t}function I$(e){if(!R$(e))throw new Error(`Potential app id (${e}) is invalid; its length ${e.length} is not within the length limits (${dE}-${fE}).`)}function D$(e){if(U6(e))throw new Error(`Potential app id (${e}) is invalid; it contains script tags.`);if($$(e))throw new Error(`Potential app id (${e}) is invalid; it contains non-printable characters.`)}const dE=4,fE=256;function R$(e){return e.length<fE&&e.length>dE}function $$(e){return[...e].some((t=>{const r=t.charCodeAt(0);return r<32||r>126}))}let M$=class{constructor(t){this.idAsString=t,D$(t)}serialize(){return this.toString()}toString(){return this.idAsString}},F$=class extends M${constructor(t){super(t),I$(t)}toJSON(){return{appIdAsString:this.toString()}}};function hE(e){return e==null}const sm="v2",zg=Wi("app"),yS={Success:"appInitialization.success"};var vS,xS;function L$(e){return sM(Vr(sm,"app.initialize"),e)}function z$(){return new Promise((e=>{uE(),e(x$(Vr(sm,"app.getContext"),"getContext"))})).then((e=>(function(t){var r;return{actionInfo:t.actionInfo,app:{locale:t.locale,sessionId:t.appSessionId?t.appSessionId:"",theme:t.theme?t.theme:"default",iconPositionVertical:t.appIconPosition,osLocaleInfo:t.osLocaleInfo,messageId:t.messageId,parentMessageId:t.parentMessageId,userClickTime:t.userClickTime,userClickTimeV2:t.userClickTimeV2,userFileOpenPreference:t.userFileOpenPreference,host:{name:t.hostName?t.hostName:Lv.teams,clientType:t.hostClientType?t.hostClientType:Ht.web,sessionId:t.sessionId?t.sessionId:"",ringId:t.ringId},appLaunchId:t.appLaunchId,appId:t.appId?new F$(t.appId):void 0,manifestVersion:t.manifestVersion},page:{id:t.entityId,frameContext:t.frameContext?t.frameContext:kt.frameContext,renderingSurface:t.renderingSurface?t.renderingSurface:void 0,subPageId:t.subEntityId,isFullScreen:t.isFullScreen,isMultiWindow:t.isMultiWindow,isBackgroundLoad:t.isBackgroundLoad,sourceOrigin:t.sourceOrigin},user:{id:(r=t.userObjectId)!==null&&r!==void 0?r:"",displayName:t.userDisplayName,isCallingAllowed:t.isCallingAllowed,isPSTNCallingAllowed:t.isPSTNCallingAllowed,licenseType:t.userLicenseType,loginHint:t.loginHint,userPrincipalName:t.userPrincipalName,tenant:t.tid?{id:t.tid,teamsSku:t.tenantSKU}:void 0},channel:t.channelId?{id:t.channelId,displayName:t.channelName,relativeUrl:t.channelRelativeUrl,membershipType:t.channelType,defaultOneNoteSectionId:t.defaultOneNoteSectionId,ownerGroupId:t.hostTeamGroupId,ownerTenantId:t.hostTeamTenantId}:void 0,chat:t.chatId?{id:t.chatId}:void 0,meeting:t.meetingId?{id:t.meetingId}:void 0,sharepoint:t.sharepoint,team:t.teamId?{internalId:t.teamId,displayName:t.teamName,type:t.teamType,groupId:t.groupId,templateId:t.teamTemplateId,isArchived:t.isTeamArchived,userRole:t.userTeamRole}:void 0,sharePointSite:t.teamSiteUrl||t.teamSiteDomain||t.teamSitePath||t.mySitePath||t.mySiteDomain?{teamSiteUrl:t.teamSiteUrl,teamSiteDomain:t.teamSiteDomain,teamSitePath:t.teamSitePath,teamSiteId:t.teamSiteId,mySitePath:t.mySitePath,mySiteDomain:t.mySiteDomain}:void 0,dialogParameters:t.dialogParameters||{}}})(e)))}function B$(){return iM(Vr(sm,"app.notifySuccess"))}function U$(e){aM(Vr(sm,"app.registerOnThemeChangeHandler"),e)}(function(e){e.AuthFailed="AuthFailed",e.Timeout="Timeout",e.Other="Other"})(vS||(vS={})),(function(e){e.PermissionError="PermissionError",e.NotFound="NotFound",e.Throttling="Throttling",e.Offline="Offline",e.Other="Other"})(xS||(xS={})),zg("teamsjs instance is version %s, starting at %s UTC (%s local)",nh,new Date().toISOString(),new Date().toLocaleString()),(function(){if(tm())return;const e=document.getElementsByTagName("script"),t=e&&e[e.length-1]&&e[e.length-1].src,r="Today, teamsjs can only be used from a single script or you may see undefined behavior. This log line is used to help detect cases where teamsjs is loaded multiple times -- it is always written. The presence of the log itself does not indicate a multi-load situation, but multiples of these log lines will. If you would like to use teamjs from more than one script at the same time, please open an issue at https://github.com/OfficeDev/microsoft-teams-library-js/issues";t&&t.length!==0?zg("teamsjs is being used from %s. %s",t,r):zg("teamsjs is being used from a script tag embedded directly in your html. %s",r)})();const W$="v2",V$=[];function q$(e){kt.frameContext&&(kt.frameContext===zv.task?V$.push(e):pM("messageForChild"))}function H$(){Ro(Vr(W$,"dialog.registerMessageForChildHandler"),"messageForChild",q$,!1)}const Xl="v2";var wS,bS;(function(e){e[e.ifRoom=0]="ifRoom",e[e.overflowOnly=1]="overflowOnly"})(wS||(wS={}));function K$(){Ro(Vr(Xl,"menus.registerNavBarMenuItemPressHandler"),"navBarMenuItemPress",Y$,!1),Ro(Vr(Xl,"menus.registerActionMenuItemPressHandler"),"actionMenuItemPress",J$,!1),Ro(Vr(Xl,"menus.registerSetModuleViewHandler"),"setModuleView",G$,!1)}function G$(e){vc($i),bi(Vr(Xl,"menus.handleViewConfigItemPress"),"viewConfigItemPress",[e])}function Y$(e){vc($i),bi(Vr(Xl,"menus.handleNavBarMenuItemPress"),"handleNavBarMenuItemPress",[e])}function J$(e){vc($i),bi(Vr(Xl,"menus.handleActionMenuItemPress"),"handleActionMenuItemPress",[e])}(function(e){e.dropDown="dropDown",e.popOver="popOver"})(bS||(bS={}));class Q${}let X$=class extends Q${validate(t){return!0}deserialize(t){return t}};function Z$(){Ro(Vr(Uo,"pages.config.registerSettingsSaveHandler"),"settings.save",eM,!1),Ro(Vr(Uo,"pages.config.registerSettingsRemoveHandler"),"settings.remove",rM,!1)}function eM(e){new tM(e).notifySuccess()}let tM=class{constructor(t){this.notified=!1,this.result=t||{}}notifySuccess(){this.ensureNotNotified(),bi(Vr(Uo,"pages.saveEvent.notifySuccess"),"settings.save.success"),this.notified=!0}notifyFailure(t){this.ensureNotNotified(),bi(Vr(Uo,"pages.saveEvent.notifyFailure"),"settings.save.failure",[t]),this.notified=!0}ensureNotNotified(){if(this.notified)throw new Error("The SaveEvent may only notify success or failure once.")}};function rM(){new nM().notifySuccess()}let nM=class{constructor(){this.notified=!1}notifySuccess(){this.ensureNotNotified(),bi(Vr(Uo,"pages.removeEvent.notifySuccess"),"settings.remove.success"),this.notified=!0}notifyFailure(t){this.ensureNotNotified(),bi(Vr(Uo,"pages.removeEvent.notifyFailure"),"settings.remove.failure",[t]),this.notified=!0}ensureNotNotified(){if(this.notified)throw new Error("The removeEventType may only notify success or failure once.")}};const mE=Wi("app");function sM(e,t){return tm()?(mE.extend("initialize")("window object undefined at initialization"),Promise.resolve()):L6((()=>(function(r,n){return new Promise((s=>{kt.initializeCalled||(kt.initializeCalled=!0,hM(),kt.initializePromise=v$(n,r).then((({context:i,clientType:l,runtimeConfig:u,clientSupportedSDKVersion:d=cS})=>{kt.frameContext=i,kt.hostClientType=l,kt.clientSupportedSDKVersion=d;try{su("Parsing %s",u);let m=JSON.parse(u);if(su("Checking if %o is a valid runtime object",m??"null"),!m||!m.apiVersion)throw new Error("Received runtime config is invalid");m=aS(m),u&&Mg(m)}catch(m){if(!(m instanceof SyntaxError))throw m;try{su("Attempting to parse %s as an SDK version",u),isNaN(GC(u,cS))||(kt.clientSupportedSDKVersion=u);let f=JSON.parse(d);if(su("givenRuntimeConfig parsed to %o",f??"null"),!f)throw new Error("givenRuntimeConfig string was successfully parsed. However, it parsed to value of null");f=aS(f),Mg(f)}catch(f){if(!(f instanceof SyntaxError))throw f;Mg(u$(kt.clientSupportedSDKVersion,i$,c$))}}kt.initializeCompleted=!0})),K$(),Z$(),H$()),Array.isArray(n)&&T$(n),kt.initializePromise!==void 0?s(kt.initializePromise):su("GlobalVars.initializePromise is unexpectedly undefined")}))})(e,t)),6e4,new Error("SDK initialization timed out."))}function iM(e){return so(this,void 0,void 0,(function*(){if(kt.initializeCompleted)return jS(e);if(!kt.initializePromise)throw new Error(Ou);return kt.initializePromise.then((()=>jS(e)))}))}function jS(e){return so(this,void 0,void 0,(function*(){return vc($i)&&(!((t=$i.supports.app)===null||t===void 0)&&t.notifySuccessResponse)?j$(yS.Success,[nh],new X$,e).then((()=>({hasFinishedSuccessfully:!0}))):(bi(e,yS.Success,[nh]),{hasFinishedSuccessfully:"unknown"});var t}))}const su=mE.extend("initializeHelper");function aM(e,t){!hE(t)&&uE(),gM(e,t)}function oM(){return cM(Vr(Uo,"pages.backStack.navigateBack"))}function lM(){return!(!vc($i)||!$i.supports.pages)&&!!$i.supports.pages.backStack}const Uo="v2";function cM(e){return new Promise((t=>{if(vc($i),!lM())throw P6;t(w$(e,"navigateBack","Back navigation is not supported in the current client or context."))}))}function uM(){Ro(Vr("v2","pages.backStack.registerBackButtonPressHandler"),"backButtonPress",dM,!1)}function dM(){oM()}const fM=Wi("handlers");let br=class Ti{static initializeHandlers(){Ti.handlers.themeChange=yM,Ti.handlers.load=vM,Ti.handlers.beforeUnload=xM,uM()}static uninitializeHandlers(){Ti.handlers={},Ti.themeChangeHandler=null,Ti.loadHandler=null,Ti.beforeUnloadHandler=null,Ti.beforeSuspendOrTerminateHandler=null,Ti.resumeHandler=null}};function hM(){br.initializeHandlers()}br.handlers={},br.themeChangeHandler=null,br.loadHandler=null,br.beforeUnloadHandler=null,br.beforeSuspendOrTerminateHandler=null,br.resumeHandler=null,br.hostToAppPerformanceMetricsHandler=null;const SS=fM.extend("callHandler");function mM(e,t){const r=br.handlers[e];return r?(SS("Invoking the registered handler for message %s with arguments %o",e,t),[!0,r.apply(this,t)]):(SS("Handler for action message %s not found.",e),[!1,void 0])}function Ro(e,t,r,n=!0,s=[]){r?(br.handlers[t]=r,n&&bi(e,"registerHandler",[t,...s])):delete br.handlers[t]}function pM(e){delete br.handlers[e]}function gM(e,t){br.themeChangeHandler=t,!hE(t)&&bi(e,"registerHandler",["themeChange"])}function yM(e){br.themeChangeHandler&&br.themeChangeHandler(e)}function _S(e){br.hostToAppPerformanceMetricsHandler&&br.hostToAppPerformanceMetricsHandler(e)}function vM(e){const t={entityId:(r=e).entityId,contentUrl:new URL(r.contentUrl)};var r;br.resumeHandler?(br.resumeHandler(t),NS()):br.loadHandler&&(br.loadHandler(e),NS())}function xM(){return so(this,void 0,void 0,(function*(){const e=()=>{bi(Vr("v2","handleBeforeUnload"),"readyToUnload",[])};br.beforeSuspendOrTerminateHandler?(yield br.beforeSuspendOrTerminateHandler(),e()):br.beforeUnloadHandler&&br.beforeUnloadHandler(e)||e()}))}const wM=Wi("childProxyingCommunication");function NS(){return!1}function bM(e,t){return!1}wM.extend("handleIncomingMessageFromChild");const jM=v.createContext({inTeams:!1,teamsContext:null,isInitialized:!1,teamsTheme:null}),SM=({children:e})=>{const[t,r]=v.useState(!1),[n,s]=v.useState(null),[i,l]=v.useState(!1),[u,d]=v.useState(null);return v.useEffect(()=>{(async()=>{try{if(new URLSearchParams(window.location.search).get("inTeams")==="true"||window.parent!==window){console.log(" Initializing Teams SDK..."),await L$();const y=await z$();console.log(" Teams context:",y),r(!0),s(y),d(y.app.theme),U$(x=>{d(x)}),B$()}else console.log(" Running in browser (not Teams)")}catch(f){console.error(" Teams initialization error:",f),r(!1)}finally{l(!0)}})()},[]),a.jsx(jM.Provider,{value:{inTeams:t,teamsContext:n,isInitialized:i,teamsTheme:u},children:e})};/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _M=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),NM=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(t,r,n)=>n?n.toUpperCase():r.toLowerCase()),kS=e=>{const t=NM(e);return t.charAt(0).toUpperCase()+t.slice(1)},pE=(...e)=>e.filter((t,r,n)=>!!t&&t.trim()!==""&&n.indexOf(t)===r).join(" ").trim(),kM=e=>{for(const t in e)if(t.startsWith("aria-")||t==="role"||t==="title")return!0};/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var CM={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EM=v.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:r=2,absoluteStrokeWidth:n,className:s="",children:i,iconNode:l,...u},d)=>v.createElement("svg",{ref:d,...CM,width:t,height:t,stroke:e,strokeWidth:n?Number(r)*24/Number(t):r,className:pE("lucide",s),...!i&&!kM(u)&&{"aria-hidden":"true"},...u},[...l.map(([m,f])=>v.createElement(m,f)),...Array.isArray(i)?i:[i]]));/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jt=(e,t)=>{const r=v.forwardRef(({className:n,...s},i)=>v.createElement(EM,{ref:i,iconNode:t,className:pE(`lucide-${_M(kS(e))}`,`lucide-${e}`,n),...s}));return r.displayName=kS(e),r};/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AM=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],CS=jt("arrow-left",AM);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PM=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],OM=jt("arrow-right",PM);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TM=[["path",{d:"M3.85 8.62a4 4 0 0 1 4.78-4.77 4 4 0 0 1 6.74 0 4 4 0 0 1 4.78 4.78 4 4 0 0 1 0 6.74 4 4 0 0 1-4.77 4.78 4 4 0 0 1-6.75 0 4 4 0 0 1-4.78-4.77 4 4 0 0 1 0-6.76Z",key:"3c2336"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],Wv=jt("badge-check",TM);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IM=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],Wr=jt("calendar",IM);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DM=[["path",{d:"M5 21v-6",key:"1hz6c0"}],["path",{d:"M12 21V3",key:"1lcnhd"}],["path",{d:"M19 21V9",key:"unv183"}]],Uf=jt("chart-no-axes-column",DM);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RM=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],zn=jt("chevron-down",RM);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $M=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],xc=jt("chevron-left",$M);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MM=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],FM=jt("chevron-up",MM);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LM=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],Yt=jt("circle-alert",LM);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zM=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],Fr=jt("circle-check-big",zM);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BM=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],im=jt("clock",BM);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UM=[["path",{d:"M11.562 3.266a.5.5 0 0 1 .876 0L15.39 8.87a1 1 0 0 0 1.516.294L21.183 5.5a.5.5 0 0 1 .798.519l-2.834 10.246a1 1 0 0 1-.956.734H5.81a1 1 0 0 1-.957-.734L2.02 6.02a.5.5 0 0 1 .798-.519l4.276 3.664a1 1 0 0 0 1.516-.294z",key:"1vdc57"}],["path",{d:"M5 21h14",key:"11awu3"}]],vs=jt("crown",UM);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WM=[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]],VM=jt("database",WM);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qM=[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]],ES=jt("ellipsis-vertical",qM);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HM=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]],KM=jt("funnel",HM);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GM=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],xf=jt("info",GM);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YM=[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]],sx=jt("lightbulb",YM);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JM=[["path",{d:"M3 5h.01",key:"18ugdj"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 19h.01",key:"noohij"}],["path",{d:"M8 5h13",key:"1pao27"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 19h13",key:"m83p4d"}]],Rs=jt("list",JM);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QM=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],XM=jt("lock",QM);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZM=[["path",{d:"m10 17 5-5-5-5",key:"1bsop3"}],["path",{d:"M15 12H3",key:"6jk70r"}],["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}]],eF=jt("log-in",ZM);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tF=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],An=jt("log-out",tF);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rF=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],Ju=jt("mail",rF);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nF=[["path",{d:"M5 12h14",key:"1ays0h"}]],yu=jt("minus",nF);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sF=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]],gE=jt("pencil",sF);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iF=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],kn=jt("plus",iF);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aF=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],$o=jt("refresh-cw",aF);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oF=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],lF=jt("search",oF);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cF=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],pn=jt("settings",cF);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uF=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],AS=jt("shield-check",uF);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dF=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],Cn=jt("shield",dF);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fF=[["path",{d:"m18 14 4 4-4 4",key:"10pe0f"}],["path",{d:"m18 2 4 4-4 4",key:"pucp1d"}],["path",{d:"M2 18h1.973a4 4 0 0 0 3.3-1.7l5.454-8.6a4 4 0 0 1 3.3-1.7H22",key:"1ailkh"}],["path",{d:"M2 6h1.972a4 4 0 0 1 3.6 2.2",key:"km57vx"}],["path",{d:"M22 18h-6.041a4 4 0 0 1-3.3-1.8l-.359-.45",key:"os18l9"}]],hF=jt("shuffle",fF);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mF=[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]],$l=jt("sparkles",mF);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pF=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],Su=jt("square-pen",pF);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gF=[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]],Ml=jt("star",gF);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yF=[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]],vF=jt("tag",yF);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xF=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],ji=jt("trash-2",xF);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wF=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],yE=jt("triangle-alert",wF);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bF=[["path",{d:"M10 14.66v1.626a2 2 0 0 1-.976 1.696A5 5 0 0 0 7 21.978",key:"1n3hpd"}],["path",{d:"M14 14.66v1.626a2 2 0 0 0 .976 1.696A5 5 0 0 1 17 21.978",key:"rfe1zi"}],["path",{d:"M18 9h1.5a1 1 0 0 0 0-5H18",key:"7xy6bh"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M6 9a6 6 0 0 0 12 0V3a1 1 0 0 0-1-1H7a1 1 0 0 0-1 1z",key:"1mhfuq"}],["path",{d:"M6 9H4.5a1 1 0 0 1 0-5H6",key:"tex48p"}]],jF=jt("trophy",bF);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SF=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]],Mo=jt("user-plus",SF);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _F=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"17",x2:"22",y1:"8",y2:"13",key:"3nzzx3"}],["line",{x1:"22",x2:"17",y1:"8",y2:"13",key:"1swrse"}]],iu=jt("user-x",_F);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NF=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],ts=jt("user",NF);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kF=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],Un=jt("users",kF);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CF=[["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}],["path",{d:"M5 7c0-1.1.9-2 2-2h10a2 2 0 0 1 2 2v12H5V7Z",key:"1ezoue"}],["path",{d:"M22 19H2",key:"nuriw5"}]],Fn=jt("vote",CF);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EF=[["rect",{width:"8",height:"8",x:"3",y:"3",rx:"2",key:"by2w9f"}],["path",{d:"M7 11v4a2 2 0 0 0 2 2h4",key:"xkn7yn"}],["rect",{width:"8",height:"8",x:"13",y:"13",rx:"2",key:"1cgmvn"}]],AF=jt("workflow",EF);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PF=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],$s=jt("x",PF);function OF(){const[e,t]=v.useState(""),[r,n]=v.useState(""),[s,i]=v.useState(!1),[l,u]=v.useState(""),{setCurrentUser:d,setCurrentSession:m}=Ui(),f=Ss(),[p]=fC(),y=async x=>{x.preventDefault(),u(""),i(!0);try{const j=await X0(e.trim().toLowerCase(),r.trim());d(j);const b=p.get("session");if(b){const S=await i6(b);if(S){m(S);const[N,E,k]=await Promise.all([Jo(j.id),Pu(S.id,j.id),ex(S.id,j.email)]);if(N||E)f("/admin");else if(k)f("/vote");else{u("You are not authorized to access this voting session."),i(!1);return}}else{u("Invalid session code."),i(!1);return}}else f("/sessions")}catch(j){console.error("Login error:",j),u("Failed to log in. Please try again."),i(!1)}};return a.jsxs("div",{className:"min-h-screen bg-gray-50 flex flex-col justify-center py-12 sm:px-6 lg:px-8",children:[a.jsxs("div",{className:"sm:mx-auto sm:w-full sm:max-w-md",children:[a.jsx("img",{src:"https://www.steeldynamics.com/wp-content/uploads/2024/05/New-Millennium-color-logo1.png",alt:"New Millennium Building Systems Logo",className:"mx-auto h-24 w-auto cursor-pointer hover:opacity-80 transition-opacity",onClick:()=>f("/sessions")}),a.jsx("h2",{className:"mt-6 text-center text-3xl font-bold text-[#2d4660]",children:"Feature Voting System"}),a.jsx("p",{className:"mt-2 text-center text-sm text-gray-600",children:"Sign in to access your voting sessions"})]}),a.jsx("div",{className:"relative z-10 mt-8 sm:mx-auto sm:w-full sm:max-w-md",children:a.jsxs("div",{className:"bg-white py-8 px-4 shadow-lg sm:rounded-lg sm:px-10",children:[a.jsxs("form",{onSubmit:y,className:"space-y-6",children:[a.jsxs("div",{children:[a.jsx("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700",children:"Full Name"}),a.jsx("div",{className:"mt-1",children:a.jsx("input",{id:"name",name:"name",type:"text",autoComplete:"name",required:!0,value:r,onChange:x=>n(x.target.value),className:"appearance-none block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-[#2d4660] focus:border-[#2d4660]",placeholder:"John Doe"})})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700",children:"Email Address"}),a.jsx("div",{className:"mt-1",children:a.jsx("input",{id:"email",name:"email",type:"email",autoComplete:"email",required:!0,value:e,onChange:x=>t(x.target.value),className:"appearance-none block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-[#2d4660] focus:border-[#2d4660]",placeholder:"your.email@company.com"})})]}),l&&a.jsx("div",{className:"rounded-md bg-red-50 p-4",children:a.jsx("div",{className:"flex",children:a.jsx("div",{className:"ml-3",children:a.jsx("h3",{className:"text-sm font-medium text-red-800",children:l})})})}),a.jsx("div",{children:a.jsx("button",{type:"submit",disabled:s,className:"w-full flex justify-center items-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-[#2d4660] hover:bg-[#1d3a53] focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-[#2d4660] disabled:opacity-50 disabled:cursor-not-allowed",children:s?a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Signing in..."]}):a.jsxs(a.Fragment,{children:[a.jsx(eF,{className:"h-4 w-4 mr-2"}),"Sign In"]})})})]}),a.jsxs("div",{className:"mt-6",children:[a.jsxs("div",{className:"relative",children:[a.jsx("div",{className:"absolute inset-0 flex items-center",children:a.jsx("div",{className:"w-full border-t border-gray-300"})}),a.jsx("div",{className:"relative flex justify-center text-sm",children:a.jsx("span",{className:"px-2 bg-white text-gray-500",children:"No registration required"})})]}),a.jsxs("div",{className:"mt-6 text-center text-xs text-gray-500",children:[a.jsx("p",{children:"Simply enter your name and email to access"}),a.jsx("p",{children:"voting sessions you've been invited to"})]})]})]})})]})}var Qu=e=>e.type==="checkbox",To=e=>e instanceof Date,ws=e=>e==null;const vE=e=>typeof e=="object";var rn=e=>!ws(e)&&!Array.isArray(e)&&vE(e)&&!To(e),xE=e=>rn(e)&&e.target?Qu(e.target)?e.target.checked:e.target.value:e,TF=e=>e.substring(0,e.search(/\.\d+(\.|$)/))||e,wE=(e,t)=>e.has(TF(t)),IF=e=>{const t=e.constructor&&e.constructor.prototype;return rn(t)&&t.hasOwnProperty("isPrototypeOf")},ix=typeof window<"u"&&typeof window.HTMLElement<"u"&&typeof document<"u";function fn(e){let t;const r=Array.isArray(e),n=typeof FileList<"u"?e instanceof FileList:!1;if(e instanceof Date)t=new Date(e);else if(!(ix&&(e instanceof Blob||n))&&(r||rn(e)))if(t=r?[]:Object.create(Object.getPrototypeOf(e)),!r&&!IF(e))t=e;else for(const s in e)e.hasOwnProperty(s)&&(t[s]=fn(e[s]));else return e;return t}var am=e=>/^\w*$/.test(e),Mr=e=>e===void 0,ax=e=>Array.isArray(e)?e.filter(Boolean):[],ox=e=>ax(e.replace(/["|']|\]/g,"").split(/\.|\[/)),qe=(e,t,r)=>{if(!t||!rn(e))return r;const n=(am(t)?[t]:ox(t)).reduce((s,i)=>ws(s)?s:s[i],e);return Mr(n)||n===e?Mr(e[t])?r:e[t]:n},Is=e=>typeof e=="boolean",ur=(e,t,r)=>{let n=-1;const s=am(t)?[t]:ox(t),i=s.length,l=i-1;for(;++n<i;){const u=s[n];let d=r;if(n!==l){const m=e[u];d=rn(m)||Array.isArray(m)?m:isNaN(+s[n+1])?{}:[]}if(u==="__proto__"||u==="constructor"||u==="prototype")return;e[u]=d,e=e[u]}};const ih={BLUR:"blur",FOCUS_OUT:"focusout",CHANGE:"change"},gi={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},ea={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"},bE=vt.createContext(null);bE.displayName="HookFormContext";const lx=()=>vt.useContext(bE);var jE=(e,t,r,n=!0)=>{const s={defaultValues:t._defaultValues};for(const i in e)Object.defineProperty(s,i,{get:()=>{const l=i;return t._proxyFormState[l]!==gi.all&&(t._proxyFormState[l]=!n||gi.all),r&&(r[l]=!0),e[l]}});return s};const cx=typeof window<"u"?vt.useLayoutEffect:vt.useEffect;function DF(e){const t=lx(),{control:r=t.control,disabled:n,name:s,exact:i}=e||{},[l,u]=vt.useState(r._formState),d=vt.useRef({isDirty:!1,isLoading:!1,dirtyFields:!1,touchedFields:!1,validatingFields:!1,isValidating:!1,isValid:!1,errors:!1});return cx(()=>r._subscribe({name:s,formState:d.current,exact:i,callback:m=>{!n&&u({...r._formState,...m})}}),[s,n,i]),vt.useEffect(()=>{d.current.isValid&&r._setValid(!0)},[r]),vt.useMemo(()=>jE(l,r,d.current,!1),[l,r])}var Ms=e=>typeof e=="string",Vv=(e,t,r,n,s)=>Ms(e)?(n&&t.watch.add(e),qe(r,e,s)):Array.isArray(e)?e.map(i=>(n&&t.watch.add(i),qe(r,i))):(n&&(t.watchAll=!0),r),qv=e=>ws(e)||!vE(e);function yi(e,t,r=new WeakSet){if(qv(e)||qv(t))return e===t;if(To(e)&&To(t))return e.getTime()===t.getTime();const n=Object.keys(e),s=Object.keys(t);if(n.length!==s.length)return!1;if(r.has(e)||r.has(t))return!0;r.add(e),r.add(t);for(const i of n){const l=e[i];if(!s.includes(i))return!1;if(i!=="ref"){const u=t[i];if(To(l)&&To(u)||rn(l)&&rn(u)||Array.isArray(l)&&Array.isArray(u)?!yi(l,u,r):l!==u)return!1}}return!0}function RF(e){const t=lx(),{control:r=t.control,name:n,defaultValue:s,disabled:i,exact:l,compute:u}=e||{},d=vt.useRef(s),m=vt.useRef(u),f=vt.useRef(void 0),p=vt.useRef(r),y=vt.useRef(n);m.current=u;const[x,j]=vt.useState(()=>{const T=r._getWatch(n,d.current);return m.current?m.current(T):T}),b=vt.useCallback(T=>{const O=Vv(n,r._names,T||r._formValues,!1,d.current);return m.current?m.current(O):O},[r._formValues,r._names,n]),S=vt.useCallback(T=>{if(!i){const O=Vv(n,r._names,T||r._formValues,!1,d.current);if(m.current){const P=m.current(O);yi(P,f.current)||(j(P),f.current=P)}else j(O)}},[r._formValues,r._names,i,n]);cx(()=>((p.current!==r||!yi(y.current,n))&&(p.current=r,y.current=n,S()),r._subscribe({name:n,formState:{values:!0},exact:l,callback:T=>{S(T.values)}})),[r,l,n,S]),vt.useEffect(()=>r._removeUnmounted());const N=p.current!==r,E=y.current,k=vt.useMemo(()=>{if(i)return null;const T=!N&&!yi(E,n);return N||T?b():null},[i,N,n,E,b]);return k!==null?k:x}function $F(e){const t=lx(),{name:r,disabled:n,control:s=t.control,shouldUnregister:i,defaultValue:l}=e,u=wE(s._names.array,r),d=vt.useMemo(()=>qe(s._formValues,r,qe(s._defaultValues,r,l)),[s,r,l]),m=RF({control:s,name:r,defaultValue:d,exact:!0}),f=DF({control:s,name:r,exact:!0}),p=vt.useRef(e),y=vt.useRef(void 0),x=vt.useRef(s.register(r,{...e.rules,value:m,...Is(e.disabled)?{disabled:e.disabled}:{}}));p.current=e;const j=vt.useMemo(()=>Object.defineProperties({},{invalid:{enumerable:!0,get:()=>!!qe(f.errors,r)},isDirty:{enumerable:!0,get:()=>!!qe(f.dirtyFields,r)},isTouched:{enumerable:!0,get:()=>!!qe(f.touchedFields,r)},isValidating:{enumerable:!0,get:()=>!!qe(f.validatingFields,r)},error:{enumerable:!0,get:()=>qe(f.errors,r)}}),[f,r]),b=vt.useCallback(k=>x.current.onChange({target:{value:xE(k),name:r},type:ih.CHANGE}),[r]),S=vt.useCallback(()=>x.current.onBlur({target:{value:qe(s._formValues,r),name:r},type:ih.BLUR}),[r,s._formValues]),N=vt.useCallback(k=>{const T=qe(s._fields,r);T&&k&&(T._f.ref={focus:()=>k.focus&&k.focus(),select:()=>k.select&&k.select(),setCustomValidity:O=>k.setCustomValidity(O),reportValidity:()=>k.reportValidity()})},[s._fields,r]),E=vt.useMemo(()=>({name:r,value:m,...Is(n)||f.disabled?{disabled:f.disabled||n}:{},onChange:b,onBlur:S,ref:N}),[r,n,f.disabled,b,S,N,m]);return vt.useEffect(()=>{const k=s._options.shouldUnregister||i,T=y.current;T&&T!==r&&!u&&s.unregister(T),s.register(r,{...p.current.rules,...Is(p.current.disabled)?{disabled:p.current.disabled}:{}});const O=(P,R)=>{const q=qe(s._fields,P);q&&q._f&&(q._f.mount=R)};if(O(r,!0),k){const P=fn(qe(s._options.defaultValues,r,p.current.defaultValue));ur(s._defaultValues,r,P),Mr(qe(s._formValues,r))&&ur(s._formValues,r,P)}return!u&&s.register(r),y.current=r,()=>{(u?k&&!s._state.action:k)?s.unregister(r):O(r,!1)}},[r,s,u,i]),vt.useEffect(()=>{s._setDisabledField({disabled:n,name:r})},[n,r,s]),vt.useMemo(()=>({field:E,formState:f,fieldState:j}),[E,f,j])}const Kl=e=>e.render($F(e));var MF=(e,t,r,n,s)=>t?{...r[e],types:{...r[e]&&r[e].types?r[e].types:{},[n]:s||!0}}:{},_u=e=>Array.isArray(e)?e:[e],PS=()=>{let e=[];return{get observers(){return e},next:s=>{for(const i of e)i.next&&i.next(s)},subscribe:s=>(e.push(s),{unsubscribe:()=>{e=e.filter(i=>i!==s)}}),unsubscribe:()=>{e=[]}}};function SE(e,t){const r={};for(const n in e)if(e.hasOwnProperty(n)){const s=e[n],i=t[n];if(s&&rn(s)&&i){const l=SE(s,i);rn(l)&&(r[n]=l)}else e[n]&&(r[n]=i)}return r}var rs=e=>rn(e)&&!Object.keys(e).length,ux=e=>e.type==="file",vi=e=>typeof e=="function",ah=e=>{if(!ix)return!1;const t=e?e.ownerDocument:0;return e instanceof(t&&t.defaultView?t.defaultView.HTMLElement:HTMLElement)},_E=e=>e.type==="select-multiple",dx=e=>e.type==="radio",FF=e=>dx(e)||Qu(e),Bg=e=>ah(e)&&e.isConnected;function LF(e,t){const r=t.slice(0,-1).length;let n=0;for(;n<r;)e=Mr(e)?n++:e[t[n++]];return e}function zF(e){for(const t in e)if(e.hasOwnProperty(t)&&!Mr(e[t]))return!1;return!0}function Xr(e,t){const r=Array.isArray(t)?t:am(t)?[t]:ox(t),n=r.length===1?e:LF(e,r),s=r.length-1,i=r[s];return n&&delete n[i],s!==0&&(rn(n)&&rs(n)||Array.isArray(n)&&zF(n))&&Xr(e,r.slice(0,-1)),e}var BF=e=>{for(const t in e)if(vi(e[t]))return!0;return!1};function NE(e){return Array.isArray(e)||rn(e)&&!BF(e)}function Hv(e,t={}){for(const r in e)NE(e[r])?(t[r]=Array.isArray(e[r])?[]:{},Hv(e[r],t[r])):Mr(e[r])||(t[r]=!0);return t}function ql(e,t,r){r||(r=Hv(t));for(const n in e)NE(e[n])?Mr(t)||qv(r[n])?r[n]=Hv(e[n],Array.isArray(e[n])?[]:{}):ql(e[n],ws(t)?{}:t[n],r[n]):r[n]=!yi(e[n],t[n]);return r}const OS={value:!1,isValid:!1},TS={value:!0,isValid:!0};var kE=e=>{if(Array.isArray(e)){if(e.length>1){const t=e.filter(r=>r&&r.checked&&!r.disabled).map(r=>r.value);return{value:t,isValid:!!t.length}}return e[0].checked&&!e[0].disabled?e[0].attributes&&!Mr(e[0].attributes.value)?Mr(e[0].value)||e[0].value===""?TS:{value:e[0].value,isValid:!0}:TS:OS}return OS},CE=(e,{valueAsNumber:t,valueAsDate:r,setValueAs:n})=>Mr(e)?e:t?e===""?NaN:e&&+e:r&&Ms(e)?new Date(e):n?n(e):e;const IS={isValid:!1,value:null};var EE=e=>Array.isArray(e)?e.reduce((t,r)=>r&&r.checked&&!r.disabled?{isValid:!0,value:r.value}:t,IS):IS;function DS(e){const t=e.ref;return ux(t)?t.files:dx(t)?EE(e.refs).value:_E(t)?[...t.selectedOptions].map(({value:r})=>r):Qu(t)?kE(e.refs).value:CE(Mr(t.value)?e.ref.value:t.value,e)}var UF=(e,t,r,n)=>{const s={};for(const i of e){const l=qe(t,i);l&&ur(s,i,l._f)}return{criteriaMode:r,names:[...e],fields:s,shouldUseNativeValidation:n}},oh=e=>e instanceof RegExp,au=e=>Mr(e)?e:oh(e)?e.source:rn(e)?oh(e.value)?e.value.source:e.value:e,RS=e=>({isOnSubmit:!e||e===gi.onSubmit,isOnBlur:e===gi.onBlur,isOnChange:e===gi.onChange,isOnAll:e===gi.all,isOnTouch:e===gi.onTouched});const $S="AsyncFunction";var WF=e=>!!e&&!!e.validate&&!!(vi(e.validate)&&e.validate.constructor.name===$S||rn(e.validate)&&Object.values(e.validate).find(t=>t.constructor.name===$S)),VF=e=>e.mount&&(e.required||e.min||e.max||e.maxLength||e.minLength||e.pattern||e.validate),MS=(e,t,r)=>!r&&(t.watchAll||t.watch.has(e)||[...t.watch].some(n=>e.startsWith(n)&&/^\.\w+/.test(e.slice(n.length))));const Nu=(e,t,r,n)=>{for(const s of r||Object.keys(e)){const i=qe(e,s);if(i){const{_f:l,...u}=i;if(l){if(l.refs&&l.refs[0]&&t(l.refs[0],s)&&!n)return!0;if(l.ref&&t(l.ref,l.name)&&!n)return!0;if(Nu(u,t))break}else if(rn(u)&&Nu(u,t))break}}};function FS(e,t,r){const n=qe(e,r);if(n||am(r))return{error:n,name:r};const s=r.split(".");for(;s.length;){const i=s.join("."),l=qe(t,i),u=qe(e,i);if(l&&!Array.isArray(l)&&r!==i)return{name:r};if(u&&u.type)return{name:i,error:u};if(u&&u.root&&u.root.type)return{name:`${i}.root`,error:u.root};s.pop()}return{name:r}}var qF=(e,t,r,n)=>{r(e);const{name:s,...i}=e;return rs(i)||Object.keys(i).length>=Object.keys(t).length||Object.keys(i).find(l=>t[l]===(!n||gi.all))},HF=(e,t,r)=>!e||!t||e===t||_u(e).some(n=>n&&(r?n===t:n.startsWith(t)||t.startsWith(n))),KF=(e,t,r,n,s)=>s.isOnAll?!1:!r&&s.isOnTouch?!(t||e):(r?n.isOnBlur:s.isOnBlur)?!e:(r?n.isOnChange:s.isOnChange)?e:!0,GF=(e,t)=>!ax(qe(e,t)).length&&Xr(e,t),YF=(e,t,r)=>{const n=_u(qe(e,r));return ur(n,"root",t[r]),ur(e,r,n),e};function LS(e,t,r="validate"){if(Ms(e)||Array.isArray(e)&&e.every(Ms)||Is(e)&&!e)return{type:r,message:Ms(e)?e:"",ref:t}}var Fl=e=>rn(e)&&!oh(e)?e:{value:e,message:""},zS=async(e,t,r,n,s,i)=>{const{ref:l,refs:u,required:d,maxLength:m,minLength:f,min:p,max:y,pattern:x,validate:j,name:b,valueAsNumber:S,mount:N}=e._f,E=qe(r,b);if(!N||t.has(b))return{};const k=u?u[0]:l,T=Q=>{s&&k.reportValidity&&(k.setCustomValidity(Is(Q)?"":Q||""),k.reportValidity())},O={},P=dx(l),R=Qu(l),q=P||R,F=(S||ux(l))&&Mr(l.value)&&Mr(E)||ah(l)&&l.value===""||E===""||Array.isArray(E)&&!E.length,V=MF.bind(null,b,n,O),B=(Q,ae,ne,me=ea.maxLength,K=ea.minLength)=>{const te=Q?ae:ne;O[b]={type:Q?me:K,message:te,ref:l,...V(Q?me:K,te)}};if(i?!Array.isArray(E)||!E.length:d&&(!q&&(F||ws(E))||Is(E)&&!E||R&&!kE(u).isValid||P&&!EE(u).isValid)){const{value:Q,message:ae}=Ms(d)?{value:!!d,message:d}:Fl(d);if(Q&&(O[b]={type:ea.required,message:ae,ref:k,...V(ea.required,ae)},!n))return T(ae),O}if(!F&&(!ws(p)||!ws(y))){let Q,ae;const ne=Fl(y),me=Fl(p);if(!ws(E)&&!isNaN(E)){const K=l.valueAsNumber||E&&+E;ws(ne.value)||(Q=K>ne.value),ws(me.value)||(ae=K<me.value)}else{const K=l.valueAsDate||new Date(E),te=xe=>new Date(new Date().toDateString()+" "+xe),se=l.type=="time",de=l.type=="week";Ms(ne.value)&&E&&(Q=se?te(E)>te(ne.value):de?E>ne.value:K>new Date(ne.value)),Ms(me.value)&&E&&(ae=se?te(E)<te(me.value):de?E<me.value:K<new Date(me.value))}if((Q||ae)&&(B(!!Q,ne.message,me.message,ea.max,ea.min),!n))return T(O[b].message),O}if((m||f)&&!F&&(Ms(E)||i&&Array.isArray(E))){const Q=Fl(m),ae=Fl(f),ne=!ws(Q.value)&&E.length>+Q.value,me=!ws(ae.value)&&E.length<+ae.value;if((ne||me)&&(B(ne,Q.message,ae.message),!n))return T(O[b].message),O}if(x&&!F&&Ms(E)){const{value:Q,message:ae}=Fl(x);if(oh(Q)&&!E.match(Q)&&(O[b]={type:ea.pattern,message:ae,ref:l,...V(ea.pattern,ae)},!n))return T(ae),O}if(j){if(vi(j)){const Q=await j(E,r),ae=LS(Q,k);if(ae&&(O[b]={...ae,...V(ea.validate,ae.message)},!n))return T(ae.message),O}else if(rn(j)){let Q={};for(const ae in j){if(!rs(Q)&&!n)break;const ne=LS(await j[ae](E,r),k,ae);ne&&(Q={...ne,...V(ae,ne.message)},T(ne.message),n&&(O[b]=Q))}if(!rs(Q)&&(O[b]={ref:k,...Q},!n))return O}}return T(!0),O};const JF={mode:gi.onSubmit,reValidateMode:gi.onChange,shouldFocusError:!0};function QF(e={}){let t={...JF,...e},r={submitCount:0,isDirty:!1,isReady:!1,isLoading:vi(t.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},validatingFields:{},errors:t.errors||{},disabled:t.disabled||!1},n={},s=rn(t.defaultValues)||rn(t.values)?fn(t.defaultValues||t.values)||{}:{},i=t.shouldUnregister?{}:fn(s),l={action:!1,mount:!1,watch:!1},u={mount:new Set,disabled:new Set,unMount:new Set,array:new Set,watch:new Set},d,m=0;const f={isDirty:!1,dirtyFields:!1,validatingFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1};let p={...f};const y={array:PS(),state:PS()},x=t.criteriaMode===gi.all,j=$=>Y=>{clearTimeout(m),m=setTimeout($,Y)},b=async $=>{if(!t.disabled&&(f.isValid||p.isValid||$)){const Y=t.resolver?rs((await R()).errors):await F(n,!0);Y!==r.isValid&&y.state.next({isValid:Y})}},S=($,Y)=>{!t.disabled&&(f.isValidating||f.validatingFields||p.isValidating||p.validatingFields)&&(($||Array.from(u.mount)).forEach(oe=>{oe&&(Y?ur(r.validatingFields,oe,Y):Xr(r.validatingFields,oe))}),y.state.next({validatingFields:r.validatingFields,isValidating:!rs(r.validatingFields)}))},N=($,Y=[],oe,ue,we=!0,je=!0)=>{if(ue&&oe&&!t.disabled){if(l.action=!0,je&&Array.isArray(qe(n,$))){const ze=oe(qe(n,$),ue.argA,ue.argB);we&&ur(n,$,ze)}if(je&&Array.isArray(qe(r.errors,$))){const ze=oe(qe(r.errors,$),ue.argA,ue.argB);we&&ur(r.errors,$,ze),GF(r.errors,$)}if((f.touchedFields||p.touchedFields)&&je&&Array.isArray(qe(r.touchedFields,$))){const ze=oe(qe(r.touchedFields,$),ue.argA,ue.argB);we&&ur(r.touchedFields,$,ze)}(f.dirtyFields||p.dirtyFields)&&(r.dirtyFields=ql(s,i)),y.state.next({name:$,isDirty:B($,Y),dirtyFields:r.dirtyFields,errors:r.errors,isValid:r.isValid})}else ur(i,$,Y)},E=($,Y)=>{ur(r.errors,$,Y),y.state.next({errors:r.errors})},k=$=>{r.errors=$,y.state.next({errors:r.errors,isValid:!1})},T=($,Y,oe,ue)=>{const we=qe(n,$);if(we){const je=qe(i,$,Mr(oe)?qe(s,$):oe);Mr(je)||ue&&ue.defaultChecked||Y?ur(i,$,Y?je:DS(we._f)):ne($,je),l.mount&&b()}},O=($,Y,oe,ue,we)=>{let je=!1,ze=!1;const ot={name:$};if(!t.disabled){if(!oe||ue){(f.isDirty||p.isDirty)&&(ze=r.isDirty,r.isDirty=ot.isDirty=B(),je=ze!==ot.isDirty);const pt=yi(qe(s,$),Y);ze=!!qe(r.dirtyFields,$),pt?Xr(r.dirtyFields,$):ur(r.dirtyFields,$,!0),ot.dirtyFields=r.dirtyFields,je=je||(f.dirtyFields||p.dirtyFields)&&ze!==!pt}if(oe){const pt=qe(r.touchedFields,$);pt||(ur(r.touchedFields,$,oe),ot.touchedFields=r.touchedFields,je=je||(f.touchedFields||p.touchedFields)&&pt!==oe)}je&&we&&y.state.next(ot)}return je?ot:{}},P=($,Y,oe,ue)=>{const we=qe(r.errors,$),je=(f.isValid||p.isValid)&&Is(Y)&&r.isValid!==Y;if(t.delayError&&oe?(d=j(()=>E($,oe)),d(t.delayError)):(clearTimeout(m),d=null,oe?ur(r.errors,$,oe):Xr(r.errors,$)),(oe?!yi(we,oe):we)||!rs(ue)||je){const ze={...ue,...je&&Is(Y)?{isValid:Y}:{},errors:r.errors,name:$};r={...r,...ze},y.state.next(ze)}},R=async $=>{S($,!0);const Y=await t.resolver(i,t.context,UF($||u.mount,n,t.criteriaMode,t.shouldUseNativeValidation));return S($),Y},q=async $=>{const{errors:Y}=await R($);if($)for(const oe of $){const ue=qe(Y,oe);ue?ur(r.errors,oe,ue):Xr(r.errors,oe)}else r.errors=Y;return Y},F=async($,Y,oe={valid:!0})=>{for(const ue in $){const we=$[ue];if(we){const{_f:je,...ze}=we;if(je){const ot=u.array.has(je.name),pt=we._f&&WF(we._f);pt&&f.validatingFields&&S([je.name],!0);const It=await zS(we,u.disabled,i,x,t.shouldUseNativeValidation&&!Y,ot);if(pt&&f.validatingFields&&S([je.name]),It[je.name]&&(oe.valid=!1,Y))break;!Y&&(qe(It,je.name)?ot?YF(r.errors,It,je.name):ur(r.errors,je.name,It[je.name]):Xr(r.errors,je.name))}!rs(ze)&&await F(ze,Y,oe)}}return oe.valid},V=()=>{for(const $ of u.unMount){const Y=qe(n,$);Y&&(Y._f.refs?Y._f.refs.every(oe=>!Bg(oe)):!Bg(Y._f.ref))&&ge($)}u.unMount=new Set},B=($,Y)=>!t.disabled&&($&&Y&&ur(i,$,Y),!yi(xe(),s)),Q=($,Y,oe)=>Vv($,u,{...l.mount?i:Mr(Y)?s:Ms($)?{[$]:Y}:Y},oe,Y),ae=$=>ax(qe(l.mount?i:s,$,t.shouldUnregister?qe(s,$,[]):[])),ne=($,Y,oe={})=>{const ue=qe(n,$);let we=Y;if(ue){const je=ue._f;je&&(!je.disabled&&ur(i,$,CE(Y,je)),we=ah(je.ref)&&ws(Y)?"":Y,_E(je.ref)?[...je.ref.options].forEach(ze=>ze.selected=we.includes(ze.value)):je.refs?Qu(je.ref)?je.refs.forEach(ze=>{(!ze.defaultChecked||!ze.disabled)&&(Array.isArray(we)?ze.checked=!!we.find(ot=>ot===ze.value):ze.checked=we===ze.value||!!we)}):je.refs.forEach(ze=>ze.checked=ze.value===we):ux(je.ref)?je.ref.value="":(je.ref.value=we,je.ref.type||y.state.next({name:$,values:fn(i)})))}(oe.shouldDirty||oe.shouldTouch)&&O($,we,oe.shouldTouch,oe.shouldDirty,!0),oe.shouldValidate&&de($)},me=($,Y,oe)=>{for(const ue in Y){if(!Y.hasOwnProperty(ue))return;const we=Y[ue],je=$+"."+ue,ze=qe(n,je);(u.array.has($)||rn(we)||ze&&!ze._f)&&!To(we)?me(je,we,oe):ne(je,we,oe)}},K=($,Y,oe={})=>{const ue=qe(n,$),we=u.array.has($),je=fn(Y);ur(i,$,je),we?(y.array.next({name:$,values:fn(i)}),(f.isDirty||f.dirtyFields||p.isDirty||p.dirtyFields)&&oe.shouldDirty&&y.state.next({name:$,dirtyFields:ql(s,i),isDirty:B($,je)})):ue&&!ue._f&&!ws(je)?me($,je,oe):ne($,je,oe),MS($,u)&&y.state.next({...r,name:$}),y.state.next({name:l.mount?$:void 0,values:fn(i)})},te=async $=>{l.mount=!0;const Y=$.target;let oe=Y.name,ue=!0;const we=qe(n,oe),je=pt=>{ue=Number.isNaN(pt)||To(pt)&&isNaN(pt.getTime())||yi(pt,qe(i,oe,pt))},ze=RS(t.mode),ot=RS(t.reValidateMode);if(we){let pt,It;const Or=Y.type?DS(we._f):xE($),Wt=$.type===ih.BLUR||$.type===ih.FOCUS_OUT,Lt=!VF(we._f)&&!t.resolver&&!qe(r.errors,oe)&&!we._f.deps||KF(Wt,qe(r.touchedFields,oe),r.isSubmitted,ot,ze),fr=MS(oe,u,Wt);ur(i,oe,Or),Wt?(!Y||!Y.readOnly)&&(we._f.onBlur&&we._f.onBlur($),d&&d(0)):we._f.onChange&&we._f.onChange($);const Ft=O(oe,Or,Wt),Lr=!rs(Ft)||fr;if(!Wt&&y.state.next({name:oe,type:$.type,values:fn(i)}),Lt)return(f.isValid||p.isValid)&&(t.mode==="onBlur"?Wt&&b():Wt||b()),Lr&&y.state.next({name:oe,...fr?{}:Ft});if(!Wt&&fr&&y.state.next({...r}),t.resolver){const{errors:Kr}=await R([oe]);if(je(Or),ue){const Ve=FS(r.errors,n,oe),zt=FS(Kr,n,Ve.name||oe);pt=zt.error,oe=zt.name,It=rs(Kr)}}else S([oe],!0),pt=(await zS(we,u.disabled,i,x,t.shouldUseNativeValidation))[oe],S([oe]),je(Or),ue&&(pt?It=!1:(f.isValid||p.isValid)&&(It=await F(n,!0)));ue&&(we._f.deps&&(!Array.isArray(we._f.deps)||we._f.deps.length>0)&&de(we._f.deps),P(oe,It,pt,Ft))}},se=($,Y)=>{if(qe(r.errors,Y)&&$.focus)return $.focus(),1},de=async($,Y={})=>{let oe,ue;const we=_u($);if(t.resolver){const je=await q(Mr($)?$:we);oe=rs(je),ue=$?!we.some(ze=>qe(je,ze)):oe}else $?(ue=(await Promise.all(we.map(async je=>{const ze=qe(n,je);return await F(ze&&ze._f?{[je]:ze}:ze)}))).every(Boolean),!(!ue&&!r.isValid)&&b()):ue=oe=await F(n);return y.state.next({...!Ms($)||(f.isValid||p.isValid)&&oe!==r.isValid?{}:{name:$},...t.resolver||!$?{isValid:oe}:{},errors:r.errors}),Y.shouldFocus&&!ue&&Nu(n,se,$?we:u.mount),ue},xe=($,Y)=>{let oe={...l.mount?i:s};return Y&&(oe=SE(Y.dirtyFields?r.dirtyFields:r.touchedFields,oe)),Mr($)?oe:Ms($)?qe(oe,$):$.map(ue=>qe(oe,ue))},I=($,Y)=>({invalid:!!qe((Y||r).errors,$),isDirty:!!qe((Y||r).dirtyFields,$),error:qe((Y||r).errors,$),isValidating:!!qe(r.validatingFields,$),isTouched:!!qe((Y||r).touchedFields,$)}),H=$=>{$&&_u($).forEach(Y=>Xr(r.errors,Y)),y.state.next({errors:$?r.errors:{}})},Ie=($,Y,oe)=>{const ue=(qe(n,$,{_f:{}})._f||{}).ref,we=qe(r.errors,$)||{},{ref:je,message:ze,type:ot,...pt}=we;ur(r.errors,$,{...pt,...Y,ref:ue}),y.state.next({name:$,errors:r.errors,isValid:!1}),oe&&oe.shouldFocus&&ue&&ue.focus&&ue.focus()},X=($,Y)=>vi($)?y.state.subscribe({next:oe=>"values"in oe&&$(Q(void 0,Y),oe)}):Q($,Y,!0),ve=$=>y.state.subscribe({next:Y=>{HF($.name,Y.name,$.exact)&&qF(Y,$.formState||f,Ct,$.reRenderRoot)&&$.callback({values:{...i},...r,...Y,defaultValues:s})}}).unsubscribe,ce=$=>(l.mount=!0,p={...p,...$.formState},ve({...$,formState:p})),ge=($,Y={})=>{for(const oe of $?_u($):u.mount)u.mount.delete(oe),u.array.delete(oe),Y.keepValue||(Xr(n,oe),Xr(i,oe)),!Y.keepError&&Xr(r.errors,oe),!Y.keepDirty&&Xr(r.dirtyFields,oe),!Y.keepTouched&&Xr(r.touchedFields,oe),!Y.keepIsValidating&&Xr(r.validatingFields,oe),!t.shouldUnregister&&!Y.keepDefaultValue&&Xr(s,oe);y.state.next({values:fn(i)}),y.state.next({...r,...Y.keepDirty?{isDirty:B()}:{}}),!Y.keepIsValid&&b()},ye=({disabled:$,name:Y})=>{(Is($)&&l.mount||$||u.disabled.has(Y))&&($?u.disabled.add(Y):u.disabled.delete(Y))},L=($,Y={})=>{let oe=qe(n,$);const ue=Is(Y.disabled)||Is(t.disabled);return ur(n,$,{...oe||{},_f:{...oe&&oe._f?oe._f:{ref:{name:$}},name:$,mount:!0,...Y}}),u.mount.add($),oe?ye({disabled:Is(Y.disabled)?Y.disabled:t.disabled,name:$}):T($,!0,Y.value),{...ue?{disabled:Y.disabled||t.disabled}:{},...t.progressive?{required:!!Y.required,min:au(Y.min),max:au(Y.max),minLength:au(Y.minLength),maxLength:au(Y.maxLength),pattern:au(Y.pattern)}:{},name:$,onChange:te,onBlur:te,ref:we=>{if(we){L($,Y),oe=qe(n,$);const je=Mr(we.value)&&we.querySelectorAll&&we.querySelectorAll("input,select,textarea")[0]||we,ze=FF(je),ot=oe._f.refs||[];if(ze?ot.find(pt=>pt===je):je===oe._f.ref)return;ur(n,$,{_f:{...oe._f,...ze?{refs:[...ot.filter(Bg),je,...Array.isArray(qe(s,$))?[{}]:[]],ref:{type:je.type,name:$}}:{ref:je}}}),T($,!1,void 0,je)}else oe=qe(n,$,{}),oe._f&&(oe._f.mount=!1),(t.shouldUnregister||Y.shouldUnregister)&&!(wE(u.array,$)&&l.action)&&u.unMount.add($)}}},Fe=()=>t.shouldFocusError&&Nu(n,se,u.mount),Me=$=>{Is($)&&(y.state.next({disabled:$}),Nu(n,(Y,oe)=>{const ue=qe(n,oe);ue&&(Y.disabled=ue._f.disabled||$,Array.isArray(ue._f.refs)&&ue._f.refs.forEach(we=>{we.disabled=ue._f.disabled||$}))},0,!1))},ee=($,Y)=>async oe=>{let ue;oe&&(oe.preventDefault&&oe.preventDefault(),oe.persist&&oe.persist());let we=fn(i);if(y.state.next({isSubmitting:!0}),t.resolver){const{errors:je,values:ze}=await R();r.errors=je,we=fn(ze)}else await F(n);if(u.disabled.size)for(const je of u.disabled)Xr(we,je);if(Xr(r.errors,"root"),rs(r.errors)){y.state.next({errors:{}});try{await $(we,oe)}catch(je){ue=je}}else Y&&await Y({...r.errors},oe),Fe(),setTimeout(Fe);if(y.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:rs(r.errors)&&!ue,submitCount:r.submitCount+1,errors:r.errors}),ue)throw ue},Ke=($,Y={})=>{qe(n,$)&&(Mr(Y.defaultValue)?K($,fn(qe(s,$))):(K($,Y.defaultValue),ur(s,$,fn(Y.defaultValue))),Y.keepTouched||Xr(r.touchedFields,$),Y.keepDirty||(Xr(r.dirtyFields,$),r.isDirty=Y.defaultValue?B($,fn(qe(s,$))):B()),Y.keepError||(Xr(r.errors,$),f.isValid&&b()),y.state.next({...r}))},Xe=($,Y={})=>{const oe=$?fn($):s,ue=fn(oe),we=rs($),je=we?s:ue;if(Y.keepDefaultValues||(s=oe),!Y.keepValues){if(Y.keepDirtyValues){const ze=new Set([...u.mount,...Object.keys(ql(s,i))]);for(const ot of Array.from(ze))qe(r.dirtyFields,ot)?ur(je,ot,qe(i,ot)):K(ot,qe(je,ot))}else{if(ix&&Mr($))for(const ze of u.mount){const ot=qe(n,ze);if(ot&&ot._f){const pt=Array.isArray(ot._f.refs)?ot._f.refs[0]:ot._f.ref;if(ah(pt)){const It=pt.closest("form");if(It){It.reset();break}}}}if(Y.keepFieldsRef)for(const ze of u.mount)K(ze,qe(je,ze));else n={}}i=t.shouldUnregister?Y.keepDefaultValues?fn(s):{}:fn(je),y.array.next({values:{...je}}),y.state.next({values:{...je}})}u={mount:Y.keepDirtyValues?u.mount:new Set,unMount:new Set,array:new Set,disabled:new Set,watch:new Set,watchAll:!1,focus:""},l.mount=!f.isValid||!!Y.keepIsValid||!!Y.keepDirtyValues||!t.shouldUnregister&&!rs(je),l.watch=!!t.shouldUnregister,y.state.next({submitCount:Y.keepSubmitCount?r.submitCount:0,isDirty:we?!1:Y.keepDirty?r.isDirty:!!(Y.keepDefaultValues&&!yi($,s)),isSubmitted:Y.keepIsSubmitted?r.isSubmitted:!1,dirtyFields:we?{}:Y.keepDirtyValues?Y.keepDefaultValues&&i?ql(s,i):r.dirtyFields:Y.keepDefaultValues&&$?ql(s,$):Y.keepDirty?r.dirtyFields:{},touchedFields:Y.keepTouched?r.touchedFields:{},errors:Y.keepErrors?r.errors:{},isSubmitSuccessful:Y.keepIsSubmitSuccessful?r.isSubmitSuccessful:!1,isSubmitting:!1,defaultValues:s})},ft=($,Y)=>Xe(vi($)?$(i):$,Y),wt=($,Y={})=>{const oe=qe(n,$),ue=oe&&oe._f;if(ue){const we=ue.refs?ue.refs[0]:ue.ref;we.focus&&(we.focus(),Y.shouldSelect&&vi(we.select)&&we.select())}},Ct=$=>{r={...r,...$}},Ot={control:{register:L,unregister:ge,getFieldState:I,handleSubmit:ee,setError:Ie,_subscribe:ve,_runSchema:R,_focusError:Fe,_getWatch:Q,_getDirty:B,_setValid:b,_setFieldArray:N,_setDisabledField:ye,_setErrors:k,_getFieldArray:ae,_reset:Xe,_resetDefaultValues:()=>vi(t.defaultValues)&&t.defaultValues().then($=>{ft($,t.resetOptions),y.state.next({isLoading:!1})}),_removeUnmounted:V,_disableForm:Me,_subjects:y,_proxyFormState:f,get _fields(){return n},get _formValues(){return i},get _state(){return l},set _state($){l=$},get _defaultValues(){return s},get _names(){return u},set _names($){u=$},get _formState(){return r},get _options(){return t},set _options($){t={...t,...$}}},subscribe:ce,trigger:de,register:L,handleSubmit:ee,watch:X,setValue:K,getValues:xe,reset:ft,resetField:Ke,clearErrors:H,unregister:ge,setError:Ie,setFocus:wt,getFieldState:I};return{...Ot,formControl:Ot}}function Tu(e={}){const t=vt.useRef(void 0),r=vt.useRef(void 0),[n,s]=vt.useState({isDirty:!1,isValidating:!1,isLoading:vi(e.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},validatingFields:{},errors:e.errors||{},disabled:e.disabled||!1,isReady:!1,defaultValues:vi(e.defaultValues)?void 0:e.defaultValues});if(!t.current)if(e.formControl)t.current={...e.formControl,formState:n},e.defaultValues&&!vi(e.defaultValues)&&e.formControl.reset(e.defaultValues,e.resetOptions);else{const{formControl:l,...u}=QF(e);t.current={...u,formState:n}}const i=t.current.control;return i._options=e,cx(()=>{const l=i._subscribe({formState:i._proxyFormState,callback:()=>s({...i._formState}),reRenderRoot:!0});return s(u=>({...u,isReady:!0})),i._formState.isReady=!0,l},[i]),vt.useEffect(()=>i._disableForm(e.disabled),[i,e.disabled]),vt.useEffect(()=>{e.mode&&(i._options.mode=e.mode),e.reValidateMode&&(i._options.reValidateMode=e.reValidateMode)},[i,e.mode,e.reValidateMode]),vt.useEffect(()=>{e.errors&&(i._setErrors(e.errors),i._focusError())},[i,e.errors]),vt.useEffect(()=>{e.shouldUnregister&&i._subjects.state.next({values:i._getWatch()})},[i,e.shouldUnregister]),vt.useEffect(()=>{if(i._proxyFormState.isDirty){const l=i._getDirty();l!==n.isDirty&&i._subjects.state.next({isDirty:l})}},[i,n.isDirty]),vt.useEffect(()=>{e.values&&!yi(e.values,r.current)?(i._reset(e.values,{keepFieldsRef:!0,...i._options.resetOptions}),r.current=e.values,s(l=>({...l}))):i._resetDefaultValues()},[i,e.values]),vt.useEffect(()=>{i._state.mount||(i._setValid(),i._state.mount=!0),i._state.watch&&(i._state.watch=!1,i._subjects.state.next({...i._formState})),i._removeUnmounted()}),t.current.formState=jE(n,i),t.current}function AE(e){var t,r,n="";if(typeof e=="string"||typeof e=="number")n+=e;else if(typeof e=="object")if(Array.isArray(e)){var s=e.length;for(t=0;t<s;t++)e[t]&&(r=AE(e[t]))&&(n&&(n+=" "),n+=r)}else for(r in e)e[r]&&(n&&(n+=" "),n+=r);return n}function jr(){for(var e,t,r=0,n="",s=arguments.length;r<s;r++)(e=arguments[r])&&(t=AE(e))&&(n&&(n+=" "),n+=t);return n}var XF=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"];function fx(e){if(typeof e!="string")return!1;var t=XF;return t.includes(e)}var ZF=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"];function PE(e){if(typeof e!="string")return!1;var t=ZF;return t.includes(e)}function OE(e){return typeof e=="string"&&e.startsWith("data-")}function to(e){var t=Object.entries(e).filter(r=>{var[n]=r;return PE(n)||OE(n)});return Object.fromEntries(t)}function hx(e){if(e==null)return null;if(v.isValidElement(e)&&typeof e.props=="object"&&e.props!==null){var t=e.props;return to(t)}return typeof e=="object"&&!Array.isArray(e)?to(e):null}function ri(e){var t=Object.entries(e).filter(r=>{var[n]=r;return PE(n)||OE(n)||fx(n)});return Object.fromEntries(t)}var eL=["children","width","height","viewBox","className","style","title","desc"];function Kv(){return Kv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Kv.apply(null,arguments)}function tL(e,t){if(e==null)return{};var r,n,s=rL(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function rL(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var TE=v.forwardRef((e,t)=>{var{children:r,width:n,height:s,viewBox:i,className:l,style:u,title:d,desc:m}=e,f=tL(e,eL),p=i||{width:n,height:s,x:0,y:0},y=jr("recharts-surface",l);return v.createElement("svg",Kv({},ri(f),{className:y,width:n,height:s,style:u,viewBox:"".concat(p.x," ").concat(p.y," ").concat(p.width," ").concat(p.height),ref:t}),v.createElement("title",null,d),v.createElement("desc",null,m),r)}),nL=["children","className"];function Gv(){return Gv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Gv.apply(null,arguments)}function sL(e,t){if(e==null)return{};var r,n,s=iL(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function iL(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var ma=v.forwardRef((e,t)=>{var{children:r,className:n}=e,s=sL(e,nL),i=jr("recharts-layer",n);return v.createElement("g",Gv({className:i},ri(s),{ref:t}),r)}),aL=v.createContext(null);function dr(e){return function(){return e}}const IE=Math.cos,lh=Math.sin,ki=Math.sqrt,ch=Math.PI,om=2*ch,Yv=Math.PI,Jv=2*Yv,ko=1e-6,oL=Jv-ko;function DE(e){this._+=e[0];for(let t=1,r=e.length;t<r;++t)this._+=arguments[t]+e[t]}function lL(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return DE;const r=10**t;return function(n){this._+=n[0];for(let s=1,i=n.length;s<i;++s)this._+=Math.round(arguments[s]*r)/r+n[s]}}class cL{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?DE:lL(t)}moveTo(t,r){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+r}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,r){this._append`L${this._x1=+t},${this._y1=+r}`}quadraticCurveTo(t,r,n,s){this._append`Q${+t},${+r},${this._x1=+n},${this._y1=+s}`}bezierCurveTo(t,r,n,s,i,l){this._append`C${+t},${+r},${+n},${+s},${this._x1=+i},${this._y1=+l}`}arcTo(t,r,n,s,i){if(t=+t,r=+r,n=+n,s=+s,i=+i,i<0)throw new Error(`negative radius: ${i}`);let l=this._x1,u=this._y1,d=n-t,m=s-r,f=l-t,p=u-r,y=f*f+p*p;if(this._x1===null)this._append`M${this._x1=t},${this._y1=r}`;else if(y>ko)if(!(Math.abs(p*d-m*f)>ko)||!i)this._append`L${this._x1=t},${this._y1=r}`;else{let x=n-l,j=s-u,b=d*d+m*m,S=x*x+j*j,N=Math.sqrt(b),E=Math.sqrt(y),k=i*Math.tan((Yv-Math.acos((b+y-S)/(2*N*E)))/2),T=k/E,O=k/N;Math.abs(T-1)>ko&&this._append`L${t+T*f},${r+T*p}`,this._append`A${i},${i},0,0,${+(p*x>f*j)},${this._x1=t+O*d},${this._y1=r+O*m}`}}arc(t,r,n,s,i,l){if(t=+t,r=+r,n=+n,l=!!l,n<0)throw new Error(`negative radius: ${n}`);let u=n*Math.cos(s),d=n*Math.sin(s),m=t+u,f=r+d,p=1^l,y=l?s-i:i-s;this._x1===null?this._append`M${m},${f}`:(Math.abs(this._x1-m)>ko||Math.abs(this._y1-f)>ko)&&this._append`L${m},${f}`,n&&(y<0&&(y=y%Jv+Jv),y>oL?this._append`A${n},${n},0,1,${p},${t-u},${r-d}A${n},${n},0,1,${p},${this._x1=m},${this._y1=f}`:y>ko&&this._append`A${n},${n},0,${+(y>=Yv)},${p},${this._x1=t+n*Math.cos(i)},${this._y1=r+n*Math.sin(i)}`)}rect(t,r,n,s){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+r}h${n=+n}v${+s}h${-n}Z`}toString(){return this._}}function mx(e){let t=3;return e.digits=function(r){if(!arguments.length)return t;if(r==null)t=null;else{const n=Math.floor(r);if(!(n>=0))throw new RangeError(`invalid digits: ${r}`);t=n}return e},()=>new cL(t)}function px(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function RE(e){this._context=e}RE.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function lm(e){return new RE(e)}function $E(e){return e[0]}function ME(e){return e[1]}function FE(e,t){var r=dr(!0),n=null,s=lm,i=null,l=mx(u);e=typeof e=="function"?e:e===void 0?$E:dr(e),t=typeof t=="function"?t:t===void 0?ME:dr(t);function u(d){var m,f=(d=px(d)).length,p,y=!1,x;for(n==null&&(i=s(x=l())),m=0;m<=f;++m)!(m<f&&r(p=d[m],m,d))===y&&((y=!y)?i.lineStart():i.lineEnd()),y&&i.point(+e(p,m,d),+t(p,m,d));if(x)return i=null,x+""||null}return u.x=function(d){return arguments.length?(e=typeof d=="function"?d:dr(+d),u):e},u.y=function(d){return arguments.length?(t=typeof d=="function"?d:dr(+d),u):t},u.defined=function(d){return arguments.length?(r=typeof d=="function"?d:dr(!!d),u):r},u.curve=function(d){return arguments.length?(s=d,n!=null&&(i=s(n)),u):s},u.context=function(d){return arguments.length?(d==null?n=i=null:i=s(n=d),u):n},u}function wf(e,t,r){var n=null,s=dr(!0),i=null,l=lm,u=null,d=mx(m);e=typeof e=="function"?e:e===void 0?$E:dr(+e),t=typeof t=="function"?t:dr(t===void 0?0:+t),r=typeof r=="function"?r:r===void 0?ME:dr(+r);function m(p){var y,x,j,b=(p=px(p)).length,S,N=!1,E,k=new Array(b),T=new Array(b);for(i==null&&(u=l(E=d())),y=0;y<=b;++y){if(!(y<b&&s(S=p[y],y,p))===N)if(N=!N)x=y,u.areaStart(),u.lineStart();else{for(u.lineEnd(),u.lineStart(),j=y-1;j>=x;--j)u.point(k[j],T[j]);u.lineEnd(),u.areaEnd()}N&&(k[y]=+e(S,y,p),T[y]=+t(S,y,p),u.point(n?+n(S,y,p):k[y],r?+r(S,y,p):T[y]))}if(E)return u=null,E+""||null}function f(){return FE().defined(s).curve(l).context(i)}return m.x=function(p){return arguments.length?(e=typeof p=="function"?p:dr(+p),n=null,m):e},m.x0=function(p){return arguments.length?(e=typeof p=="function"?p:dr(+p),m):e},m.x1=function(p){return arguments.length?(n=p==null?null:typeof p=="function"?p:dr(+p),m):n},m.y=function(p){return arguments.length?(t=typeof p=="function"?p:dr(+p),r=null,m):t},m.y0=function(p){return arguments.length?(t=typeof p=="function"?p:dr(+p),m):t},m.y1=function(p){return arguments.length?(r=p==null?null:typeof p=="function"?p:dr(+p),m):r},m.lineX0=m.lineY0=function(){return f().x(e).y(t)},m.lineY1=function(){return f().x(e).y(r)},m.lineX1=function(){return f().x(n).y(t)},m.defined=function(p){return arguments.length?(s=typeof p=="function"?p:dr(!!p),m):s},m.curve=function(p){return arguments.length?(l=p,i!=null&&(u=l(i)),m):l},m.context=function(p){return arguments.length?(p==null?i=u=null:u=l(i=p),m):i},m}class LE{constructor(t,r){this._context=t,this._x=r}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(t,r){switch(t=+t,r=+r,this._point){case 0:{this._point=1,this._line?this._context.lineTo(t,r):this._context.moveTo(t,r);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+t)/2,this._y0,this._x0,r,t,r):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+r)/2,t,this._y0,t,r);break}}this._x0=t,this._y0=r}}function uL(e){return new LE(e,!0)}function dL(e){return new LE(e,!1)}const gx={draw(e,t){const r=ki(t/ch);e.moveTo(r,0),e.arc(0,0,r,0,om)}},fL={draw(e,t){const r=ki(t/5)/2;e.moveTo(-3*r,-r),e.lineTo(-r,-r),e.lineTo(-r,-3*r),e.lineTo(r,-3*r),e.lineTo(r,-r),e.lineTo(3*r,-r),e.lineTo(3*r,r),e.lineTo(r,r),e.lineTo(r,3*r),e.lineTo(-r,3*r),e.lineTo(-r,r),e.lineTo(-3*r,r),e.closePath()}},zE=ki(1/3),hL=zE*2,mL={draw(e,t){const r=ki(t/hL),n=r*zE;e.moveTo(0,-r),e.lineTo(n,0),e.lineTo(0,r),e.lineTo(-n,0),e.closePath()}},pL={draw(e,t){const r=ki(t),n=-r/2;e.rect(n,n,r,r)}},gL=.8908130915292852,BE=lh(ch/10)/lh(7*ch/10),yL=lh(om/10)*BE,vL=-IE(om/10)*BE,xL={draw(e,t){const r=ki(t*gL),n=yL*r,s=vL*r;e.moveTo(0,-r),e.lineTo(n,s);for(let i=1;i<5;++i){const l=om*i/5,u=IE(l),d=lh(l);e.lineTo(d*r,-u*r),e.lineTo(u*n-d*s,d*n+u*s)}e.closePath()}},Ug=ki(3),wL={draw(e,t){const r=-ki(t/(Ug*3));e.moveTo(0,r*2),e.lineTo(-Ug*r,-r),e.lineTo(Ug*r,-r),e.closePath()}},Js=-.5,Qs=ki(3)/2,Qv=1/ki(12),bL=(Qv/2+1)*3,jL={draw(e,t){const r=ki(t/bL),n=r/2,s=r*Qv,i=n,l=r*Qv+r,u=-i,d=l;e.moveTo(n,s),e.lineTo(i,l),e.lineTo(u,d),e.lineTo(Js*n-Qs*s,Qs*n+Js*s),e.lineTo(Js*i-Qs*l,Qs*i+Js*l),e.lineTo(Js*u-Qs*d,Qs*u+Js*d),e.lineTo(Js*n+Qs*s,Js*s-Qs*n),e.lineTo(Js*i+Qs*l,Js*l-Qs*i),e.lineTo(Js*u+Qs*d,Js*d-Qs*u),e.closePath()}};function SL(e,t){let r=null,n=mx(s);e=typeof e=="function"?e:dr(e||gx),t=typeof t=="function"?t:dr(t===void 0?64:+t);function s(){let i;if(r||(r=i=n()),e.apply(this,arguments).draw(r,+t.apply(this,arguments)),i)return r=null,i+""||null}return s.type=function(i){return arguments.length?(e=typeof i=="function"?i:dr(i),s):e},s.size=function(i){return arguments.length?(t=typeof i=="function"?i:dr(+i),s):t},s.context=function(i){return arguments.length?(r=i??null,s):r},s}function uh(){}function dh(e,t,r){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+r)/6)}function UE(e){this._context=e}UE.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:dh(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:dh(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function _L(e){return new UE(e)}function WE(e){this._context=e}WE.prototype={areaStart:uh,areaEnd:uh,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:dh(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function NL(e){return new WE(e)}function VE(e){this._context=e}VE.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var r=(this._x0+4*this._x1+e)/6,n=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(r,n):this._context.moveTo(r,n);break;case 3:this._point=4;default:dh(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function kL(e){return new VE(e)}function qE(e){this._context=e}qE.prototype={areaStart:uh,areaEnd:uh,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}};function CL(e){return new qE(e)}function BS(e){return e<0?-1:1}function US(e,t,r){var n=e._x1-e._x0,s=t-e._x1,i=(e._y1-e._y0)/(n||s<0&&-0),l=(r-e._y1)/(s||n<0&&-0),u=(i*s+l*n)/(n+s);return(BS(i)+BS(l))*Math.min(Math.abs(i),Math.abs(l),.5*Math.abs(u))||0}function WS(e,t){var r=e._x1-e._x0;return r?(3*(e._y1-e._y0)/r-t)/2:t}function Wg(e,t,r){var n=e._x0,s=e._y0,i=e._x1,l=e._y1,u=(i-n)/3;e._context.bezierCurveTo(n+u,s+u*t,i-u,l-u*r,i,l)}function fh(e){this._context=e}fh.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:Wg(this,this._t0,WS(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var r=NaN;if(e=+e,t=+t,!(e===this._x1&&t===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,Wg(this,WS(this,r=US(this,e,t)),r);break;default:Wg(this,this._t0,r=US(this,e,t));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=r}}};function HE(e){this._context=new KE(e)}(HE.prototype=Object.create(fh.prototype)).point=function(e,t){fh.prototype.point.call(this,t,e)};function KE(e){this._context=e}KE.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,r,n,s,i){this._context.bezierCurveTo(t,e,n,r,i,s)}};function EL(e){return new fh(e)}function AL(e){return new HE(e)}function GE(e){this._context=e}GE.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,r=e.length;if(r)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),r===2)this._context.lineTo(e[1],t[1]);else for(var n=VS(e),s=VS(t),i=0,l=1;l<r;++i,++l)this._context.bezierCurveTo(n[0][i],s[0][i],n[1][i],s[1][i],e[l],t[l]);(this._line||this._line!==0&&r===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}};function VS(e){var t,r=e.length-1,n,s=new Array(r),i=new Array(r),l=new Array(r);for(s[0]=0,i[0]=2,l[0]=e[0]+2*e[1],t=1;t<r-1;++t)s[t]=1,i[t]=4,l[t]=4*e[t]+2*e[t+1];for(s[r-1]=2,i[r-1]=7,l[r-1]=8*e[r-1]+e[r],t=1;t<r;++t)n=s[t]/i[t-1],i[t]-=n,l[t]-=n*l[t-1];for(s[r-1]=l[r-1]/i[r-1],t=r-2;t>=0;--t)s[t]=(l[t]-s[t+1])/i[t];for(i[r-1]=(e[r]+s[r-1])/2,t=0;t<r-1;++t)i[t]=2*e[t+1]-s[t+1];return[s,i]}function PL(e){return new GE(e)}function cm(e,t){this._context=e,this._t=t}cm.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var r=this._x*(1-this._t)+e*this._t;this._context.lineTo(r,this._y),this._context.lineTo(r,t)}break}}this._x=e,this._y=t}};function OL(e){return new cm(e,.5)}function TL(e){return new cm(e,0)}function IL(e){return new cm(e,1)}function nc(e,t){if((l=e.length)>1)for(var r=1,n,s,i=e[t[0]],l,u=i.length;r<l;++r)for(s=i,i=e[t[r]],n=0;n<u;++n)i[n][1]+=i[n][0]=isNaN(s[n][1])?s[n][0]:s[n][1]}function Xv(e){for(var t=e.length,r=new Array(t);--t>=0;)r[t]=t;return r}function DL(e,t){return e[t]}function RL(e){const t=[];return t.key=e,t}function $L(){var e=dr([]),t=Xv,r=nc,n=DL;function s(i){var l=Array.from(e.apply(this,arguments),RL),u,d=l.length,m=-1,f;for(const p of i)for(u=0,++m;u<d;++u)(l[u][m]=[0,+n(p,l[u].key,m,i)]).data=p;for(u=0,f=px(t(l));u<d;++u)l[f[u]].index=u;return r(l,f),l}return s.keys=function(i){return arguments.length?(e=typeof i=="function"?i:dr(Array.from(i)),s):e},s.value=function(i){return arguments.length?(n=typeof i=="function"?i:dr(+i),s):n},s.order=function(i){return arguments.length?(t=i==null?Xv:typeof i=="function"?i:dr(Array.from(i)),s):t},s.offset=function(i){return arguments.length?(r=i??nc,s):r},s}function ML(e,t){if((n=e.length)>0){for(var r,n,s=0,i=e[0].length,l;s<i;++s){for(l=r=0;r<n;++r)l+=e[r][s][1]||0;if(l)for(r=0;r<n;++r)e[r][s][1]/=l}nc(e,t)}}function FL(e,t){if((s=e.length)>0){for(var r=0,n=e[t[0]],s,i=n.length;r<i;++r){for(var l=0,u=0;l<s;++l)u+=e[l][r][1]||0;n[r][1]+=n[r][0]=-u/2}nc(e,t)}}function LL(e,t){if(!(!((l=e.length)>0)||!((i=(s=e[t[0]]).length)>0))){for(var r=0,n=1,s,i,l;n<i;++n){for(var u=0,d=0,m=0;u<l;++u){for(var f=e[t[u]],p=f[n][1]||0,y=f[n-1][1]||0,x=(p-y)/2,j=0;j<u;++j){var b=e[t[j]],S=b[n][1]||0,N=b[n-1][1]||0;x+=S-N}d+=p,m+=x*p}s[n-1][1]+=s[n-1][0]=r,d&&(r-=m/d)}s[n-1][1]+=s[n-1][0]=r,nc(e,t)}}var Vg={},qg={},qS;function zL(){return qS||(qS=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r==="__proto__"}e.isUnsafeProperty=t})(qg)),qg}var Hg={},HS;function YE(){return HS||(HS=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){switch(typeof r){case"number":case"symbol":return!1;case"string":return r.includes(".")||r.includes("[")||r.includes("]")}}e.isDeepKey=t})(Hg)),Hg}var Kg={},KS;function yx(){return KS||(KS=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){var n;return typeof r=="string"||typeof r=="symbol"?r:Object.is((n=r==null?void 0:r.valueOf)==null?void 0:n.call(r),-0)?"-0":String(r)}e.toKey=t})(Kg)),Kg}var Gg={},Yg={},GS;function BL(){return GS||(GS=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){if(r==null)return"";if(typeof r=="string")return r;if(Array.isArray(r))return r.map(t).join(",");const n=String(r);return n==="0"&&Object.is(Number(r),-0)?"-0":n}e.toString=t})(Yg)),Yg}var YS;function vx(){return YS||(YS=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=BL(),r=yx();function n(s){if(Array.isArray(s))return s.map(r.toKey);if(typeof s=="symbol")return[s];s=t.toString(s);const i=[],l=s.length;if(l===0)return i;let u=0,d="",m="",f=!1;for(s.charCodeAt(0)===46&&(i.push(""),u++);u<l;){const p=s[u];m?p==="\\"&&u+1<l?(u++,d+=s[u]):p===m?m="":d+=p:f?p==='"'||p==="'"?m=p:p==="]"?(f=!1,i.push(d),d=""):d+=p:p==="["?(f=!0,d&&(i.push(d),d="")):p==="."?d&&(i.push(d),d=""):d+=p,u++}return d&&i.push(d),i}e.toPath=n})(Gg)),Gg}var JS;function xx(){return JS||(JS=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=zL(),r=YE(),n=yx(),s=vx();function i(u,d,m){if(u==null)return m;switch(typeof d){case"string":{if(t.isUnsafeProperty(d))return m;const f=u[d];return f===void 0?r.isDeepKey(d)?i(u,s.toPath(d),m):m:f}case"number":case"symbol":{typeof d=="number"&&(d=n.toKey(d));const f=u[d];return f===void 0?m:f}default:{if(Array.isArray(d))return l(u,d,m);if(Object.is(d==null?void 0:d.valueOf(),-0)?d="-0":d=String(d),t.isUnsafeProperty(d))return m;const f=u[d];return f===void 0?m:f}}}function l(u,d,m){if(d.length===0)return m;let f=u;for(let p=0;p<d.length;p++){if(f==null||t.isUnsafeProperty(d[p]))return m;f=f[d[p]]}return f===void 0?m:f}e.get=i})(Vg)),Vg}var Jg,QS;function UL(){return QS||(QS=1,Jg=xx().get),Jg}var WL=UL();const sc=_i(WL);var Ls=e=>e===0?0:e>0?1:-1,Fi=e=>typeof e=="number"&&e!=+e,pa=e=>typeof e=="string"&&e.indexOf("%")===e.length-1,mt=e=>(typeof e=="number"||e instanceof Number)&&!Fi(e),Li=e=>mt(e)||typeof e=="string",VL=0,Iu=e=>{var t=++VL;return"".concat(e||"").concat(t)},Si=function(t,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!mt(t)&&typeof t!="string")return n;var i;if(pa(t)){if(r==null)return n;var l=t.indexOf("%");i=r*parseFloat(t.slice(0,l))/100}else i=+t;return Fi(i)&&(i=n),s&&r!=null&&i>r&&(i=r),i},JE=e=>{if(!Array.isArray(e))return!1;for(var t=e.length,r={},n=0;n<t;n++)if(!r[e[n]])r[e[n]]=!0;else return!0;return!1};function Bn(e,t,r){return mt(e)&&mt(t)?e+r*(t-e):t}function qL(e,t,r){if(!(!e||!e.length))return e.find(n=>n&&(typeof t=="function"?t(n):sc(n,t))===r)}var Pn=e=>e===null||typeof e>"u",Xu=e=>Pn(e)?e:"".concat(e.charAt(0).toUpperCase()).concat(e.slice(1));function HL(e){return e!=null}function wc(){}var KL=["type","size","sizeType"];function Zv(){return Zv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Zv.apply(null,arguments)}function XS(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function ZS(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?XS(Object(r),!0).forEach(function(n){GL(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):XS(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function GL(e,t,r){return(t=YL(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function YL(e){var t=JL(e,"string");return typeof t=="symbol"?t:t+""}function JL(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function QL(e,t){if(e==null)return{};var r,n,s=XL(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function XL(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var QE={symbolCircle:gx,symbolCross:fL,symbolDiamond:mL,symbolSquare:pL,symbolStar:xL,symbolTriangle:wL,symbolWye:jL},ZL=Math.PI/180,ez=e=>{var t="symbol".concat(Xu(e));return QE[t]||gx},tz=(e,t,r)=>{if(t==="area")return e;switch(r){case"cross":return 5*e*e/9;case"diamond":return .5*e*e/Math.sqrt(3);case"square":return e*e;case"star":{var n=18*ZL;return 1.25*e*e*(Math.tan(n)-Math.tan(n*2)*Math.tan(n)**2)}case"triangle":return Math.sqrt(3)*e*e/4;case"wye":return(21-10*Math.sqrt(3))*e*e/8;default:return Math.PI*e*e/4}},rz=(e,t)=>{QE["symbol".concat(Xu(e))]=t},XE=e=>{var{type:t="circle",size:r=64,sizeType:n="area"}=e,s=QL(e,KL),i=ZS(ZS({},s),{},{type:t,size:r,sizeType:n}),l="circle";typeof t=="string"&&(l=t);var u=()=>{var y=ez(l),x=SL().type(y).size(tz(r,n,l)),j=x();if(j!==null)return j},{className:d,cx:m,cy:f}=i,p=ri(i);return mt(m)&&mt(f)&&mt(r)?v.createElement("path",Zv({},p,{className:jr("recharts-symbols",d),transform:"translate(".concat(m,", ").concat(f,")"),d:u()})):null};XE.registerSymbol=rz;var ZE=e=>"radius"in e&&"startAngle"in e&&"endAngle"in e,nz=(e,t)=>{if(!e||typeof e=="function"||typeof e=="boolean")return null;var r=e;if(v.isValidElement(e)&&(r=e.props),typeof r!="object"&&typeof r!="function")return null;var n={};return Object.keys(r).forEach(s=>{fx(s)&&(n[s]=(i=>r[s](r,i)))}),n},sz=(e,t,r)=>n=>(e(t,r,n),null),wx=(e,t,r)=>{if(e===null||typeof e!="object"&&typeof e!="function")return null;var n=null;return Object.keys(e).forEach(s=>{var i=e[s];fx(s)&&typeof i=="function"&&(n||(n={}),n[s]=sz(i,t,r))}),n};function e_(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function iz(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?e_(Object(r),!0).forEach(function(n){az(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):e_(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function az(e,t,r){return(t=oz(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function oz(e){var t=lz(e,"string");return typeof t=="symbol"?t:t+""}function lz(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function ii(e,t){var r=iz({},e),n=t,s=Object.keys(t),i=s.reduce((l,u)=>(l[u]===void 0&&n[u]!==void 0&&(l[u]=n[u]),l),r);return i}var Qg={},Xg={},t_;function cz(){return t_||(t_=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r,n){const s=new Map;for(let i=0;i<r.length;i++){const l=r[i],u=n(l);s.has(u)||s.set(u,l)}return Array.from(s.values())}e.uniqBy=t})(Xg)),Xg}var Zg={},r_;function eA(){return r_||(r_=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r}e.identity=t})(Zg)),Zg}var ey={},ty={},ry={},n_;function uz(){return n_||(n_=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return Number.isSafeInteger(r)&&r>=0}e.isLength=t})(ry)),ry}var s_;function bx(){return s_||(s_=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=uz();function r(n){return n!=null&&typeof n!="function"&&t.isLength(n.length)}e.isArrayLike=r})(ty)),ty}var ny={},i_;function dz(){return i_||(i_=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return typeof r=="object"&&r!==null}e.isObjectLike=t})(ny)),ny}var a_;function fz(){return a_||(a_=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=bx(),r=dz();function n(s){return r.isObjectLike(s)&&t.isArrayLike(s)}e.isArrayLikeObject=n})(ey)),ey}var sy={},iy={},o_;function hz(){return o_||(o_=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=xx();function r(n){return function(s){return t.get(s,n)}}e.property=r})(iy)),iy}var ay={},oy={},ly={},cy={},l_;function tA(){return l_||(l_=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r!==null&&(typeof r=="object"||typeof r=="function")}e.isObject=t})(cy)),cy}var uy={},c_;function rA(){return c_||(c_=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r==null||typeof r!="object"&&typeof r!="function"}e.isPrimitive=t})(uy)),uy}var dy={},u_;function nA(){return u_||(u_=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r,n){return r===n||Number.isNaN(r)&&Number.isNaN(n)}e.eq=t})(dy)),dy}var d_;function mz(){return d_||(d_=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=tA(),r=rA(),n=nA();function s(f,p,y){return typeof y!="function"?s(f,p,()=>{}):i(f,p,function x(j,b,S,N,E,k){const T=y(j,b,S,N,E,k);return T!==void 0?!!T:i(j,b,x,k)},new Map)}function i(f,p,y,x){if(p===f)return!0;switch(typeof p){case"object":return l(f,p,y,x);case"function":return Object.keys(p).length>0?i(f,{...p},y,x):n.eq(f,p);default:return t.isObject(f)?typeof p=="string"?p==="":!0:n.eq(f,p)}}function l(f,p,y,x){if(p==null)return!0;if(Array.isArray(p))return d(f,p,y,x);if(p instanceof Map)return u(f,p,y,x);if(p instanceof Set)return m(f,p,y,x);const j=Object.keys(p);if(f==null)return j.length===0;if(j.length===0)return!0;if(x!=null&&x.has(p))return x.get(p)===f;x==null||x.set(p,f);try{for(let b=0;b<j.length;b++){const S=j[b];if(!r.isPrimitive(f)&&!(S in f)||p[S]===void 0&&f[S]!==void 0||p[S]===null&&f[S]!==null||!y(f[S],p[S],S,f,p,x))return!1}return!0}finally{x==null||x.delete(p)}}function u(f,p,y,x){if(p.size===0)return!0;if(!(f instanceof Map))return!1;for(const[j,b]of p.entries()){const S=f.get(j);if(y(S,b,j,f,p,x)===!1)return!1}return!0}function d(f,p,y,x){if(p.length===0)return!0;if(!Array.isArray(f))return!1;const j=new Set;for(let b=0;b<p.length;b++){const S=p[b];let N=!1;for(let E=0;E<f.length;E++){if(j.has(E))continue;const k=f[E];let T=!1;if(y(k,S,b,f,p,x)&&(T=!0),T){j.add(E),N=!0;break}}if(!N)return!1}return!0}function m(f,p,y,x){return p.size===0?!0:f instanceof Set?d([...f],[...p],y,x):!1}e.isMatchWith=s,e.isSetMatch=m})(ly)),ly}var f_;function sA(){return f_||(f_=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=mz();function r(n,s){return t.isMatchWith(n,s,()=>{})}e.isMatch=r})(oy)),oy}var fy={},hy={},my={},h_;function pz(){return h_||(h_=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return Object.getOwnPropertySymbols(r).filter(n=>Object.prototype.propertyIsEnumerable.call(r,n))}e.getSymbols=t})(my)),my}var py={},m_;function iA(){return m_||(m_=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r==null?r===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(r)}e.getTag=t})(py)),py}var gy={},p_;function aA(){return p_||(p_=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t="[object RegExp]",r="[object String]",n="[object Number]",s="[object Boolean]",i="[object Arguments]",l="[object Symbol]",u="[object Date]",d="[object Map]",m="[object Set]",f="[object Array]",p="[object Function]",y="[object ArrayBuffer]",x="[object Object]",j="[object Error]",b="[object DataView]",S="[object Uint8Array]",N="[object Uint8ClampedArray]",E="[object Uint16Array]",k="[object Uint32Array]",T="[object BigUint64Array]",O="[object Int8Array]",P="[object Int16Array]",R="[object Int32Array]",q="[object BigInt64Array]",F="[object Float32Array]",V="[object Float64Array]";e.argumentsTag=i,e.arrayBufferTag=y,e.arrayTag=f,e.bigInt64ArrayTag=q,e.bigUint64ArrayTag=T,e.booleanTag=s,e.dataViewTag=b,e.dateTag=u,e.errorTag=j,e.float32ArrayTag=F,e.float64ArrayTag=V,e.functionTag=p,e.int16ArrayTag=P,e.int32ArrayTag=R,e.int8ArrayTag=O,e.mapTag=d,e.numberTag=n,e.objectTag=x,e.regexpTag=t,e.setTag=m,e.stringTag=r,e.symbolTag=l,e.uint16ArrayTag=E,e.uint32ArrayTag=k,e.uint8ArrayTag=S,e.uint8ClampedArrayTag=N})(gy)),gy}var yy={},g_;function gz(){return g_||(g_=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return ArrayBuffer.isView(r)&&!(r instanceof DataView)}e.isTypedArray=t})(yy)),yy}var y_;function oA(){return y_||(y_=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=pz(),r=iA(),n=aA(),s=rA(),i=gz();function l(f,p){return u(f,void 0,f,new Map,p)}function u(f,p,y,x=new Map,j=void 0){const b=j==null?void 0:j(f,p,y,x);if(b!==void 0)return b;if(s.isPrimitive(f))return f;if(x.has(f))return x.get(f);if(Array.isArray(f)){const S=new Array(f.length);x.set(f,S);for(let N=0;N<f.length;N++)S[N]=u(f[N],N,y,x,j);return Object.hasOwn(f,"index")&&(S.index=f.index),Object.hasOwn(f,"input")&&(S.input=f.input),S}if(f instanceof Date)return new Date(f.getTime());if(f instanceof RegExp){const S=new RegExp(f.source,f.flags);return S.lastIndex=f.lastIndex,S}if(f instanceof Map){const S=new Map;x.set(f,S);for(const[N,E]of f)S.set(N,u(E,N,y,x,j));return S}if(f instanceof Set){const S=new Set;x.set(f,S);for(const N of f)S.add(u(N,void 0,y,x,j));return S}if(typeof Buffer<"u"&&Buffer.isBuffer(f))return f.subarray();if(i.isTypedArray(f)){const S=new(Object.getPrototypeOf(f)).constructor(f.length);x.set(f,S);for(let N=0;N<f.length;N++)S[N]=u(f[N],N,y,x,j);return S}if(f instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&f instanceof SharedArrayBuffer)return f.slice(0);if(f instanceof DataView){const S=new DataView(f.buffer.slice(0),f.byteOffset,f.byteLength);return x.set(f,S),d(S,f,y,x,j),S}if(typeof File<"u"&&f instanceof File){const S=new File([f],f.name,{type:f.type});return x.set(f,S),d(S,f,y,x,j),S}if(typeof Blob<"u"&&f instanceof Blob){const S=new Blob([f],{type:f.type});return x.set(f,S),d(S,f,y,x,j),S}if(f instanceof Error){const S=new f.constructor;return x.set(f,S),S.message=f.message,S.name=f.name,S.stack=f.stack,S.cause=f.cause,d(S,f,y,x,j),S}if(f instanceof Boolean){const S=new Boolean(f.valueOf());return x.set(f,S),d(S,f,y,x,j),S}if(f instanceof Number){const S=new Number(f.valueOf());return x.set(f,S),d(S,f,y,x,j),S}if(f instanceof String){const S=new String(f.valueOf());return x.set(f,S),d(S,f,y,x,j),S}if(typeof f=="object"&&m(f)){const S=Object.create(Object.getPrototypeOf(f));return x.set(f,S),d(S,f,y,x,j),S}return f}function d(f,p,y=f,x,j){const b=[...Object.keys(p),...t.getSymbols(p)];for(let S=0;S<b.length;S++){const N=b[S],E=Object.getOwnPropertyDescriptor(f,N);(E==null||E.writable)&&(f[N]=u(p[N],N,y,x,j))}}function m(f){switch(r.getTag(f)){case n.argumentsTag:case n.arrayTag:case n.arrayBufferTag:case n.dataViewTag:case n.booleanTag:case n.dateTag:case n.float32ArrayTag:case n.float64ArrayTag:case n.int8ArrayTag:case n.int16ArrayTag:case n.int32ArrayTag:case n.mapTag:case n.numberTag:case n.objectTag:case n.regexpTag:case n.setTag:case n.stringTag:case n.symbolTag:case n.uint8ArrayTag:case n.uint8ClampedArrayTag:case n.uint16ArrayTag:case n.uint32ArrayTag:return!0;default:return!1}}e.cloneDeepWith=l,e.cloneDeepWithImpl=u,e.copyProperties=d})(hy)),hy}var v_;function yz(){return v_||(v_=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=oA();function r(n){return t.cloneDeepWithImpl(n,void 0,n,new Map,void 0)}e.cloneDeep=r})(fy)),fy}var x_;function vz(){return x_||(x_=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=sA(),r=yz();function n(s){return s=r.cloneDeep(s),i=>t.isMatch(i,s)}e.matches=n})(ay)),ay}var vy={},xy={},wy={},w_;function xz(){return w_||(w_=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=oA(),r=aA();function n(s,i){return t.cloneDeepWith(s,(l,u,d,m)=>{const f=i==null?void 0:i(l,u,d,m);if(f!==void 0)return f;if(typeof s=="object")switch(Object.prototype.toString.call(s)){case r.numberTag:case r.stringTag:case r.booleanTag:{const p=new s.constructor(s==null?void 0:s.valueOf());return t.copyProperties(p,s),p}case r.argumentsTag:{const p={};return t.copyProperties(p,s),p.length=s.length,p[Symbol.iterator]=s[Symbol.iterator],p}default:return}})}e.cloneDeepWith=n})(wy)),wy}var b_;function wz(){return b_||(b_=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=xz();function r(n){return t.cloneDeepWith(n)}e.cloneDeep=r})(xy)),xy}var by={},jy={},j_;function lA(){return j_||(j_=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=/^(?:0|[1-9]\d*)$/;function r(n,s=Number.MAX_SAFE_INTEGER){switch(typeof n){case"number":return Number.isInteger(n)&&n>=0&&n<s;case"symbol":return!1;case"string":return t.test(n)}}e.isIndex=r})(jy)),jy}var Sy={},S_;function bz(){return S_||(S_=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=iA();function r(n){return n!==null&&typeof n=="object"&&t.getTag(n)==="[object Arguments]"}e.isArguments=r})(Sy)),Sy}var __;function jz(){return __||(__=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=YE(),r=lA(),n=bz(),s=vx();function i(l,u){let d;if(Array.isArray(u)?d=u:typeof u=="string"&&t.isDeepKey(u)&&(l==null?void 0:l[u])==null?d=s.toPath(u):d=[u],d.length===0)return!1;let m=l;for(let f=0;f<d.length;f++){const p=d[f];if((m==null||!Object.hasOwn(m,p))&&!((Array.isArray(m)||n.isArguments(m))&&r.isIndex(p)&&p<m.length))return!1;m=m[p]}return!0}e.has=i})(by)),by}var N_;function Sz(){return N_||(N_=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=sA(),r=yx(),n=wz(),s=xx(),i=jz();function l(u,d){switch(typeof u){case"object":{Object.is(u==null?void 0:u.valueOf(),-0)&&(u="-0");break}case"number":{u=r.toKey(u);break}}return d=n.cloneDeep(d),function(m){const f=s.get(m,u);return f===void 0?i.has(m,u):d===void 0?f===void 0:t.isMatch(f,d)}}e.matchesProperty=l})(vy)),vy}var k_;function _z(){return k_||(k_=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=eA(),r=hz(),n=vz(),s=Sz();function i(l){if(l==null)return t.identity;switch(typeof l){case"function":return l;case"object":return Array.isArray(l)&&l.length===2?s.matchesProperty(l[0],l[1]):n.matches(l);case"string":case"symbol":case"number":return r.property(l)}}e.iteratee=i})(sy)),sy}var C_;function Nz(){return C_||(C_=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=cz(),r=eA(),n=fz(),s=_z();function i(l,u=r.identity){return n.isArrayLikeObject(l)?t.uniqBy(Array.from(l),s.iteratee(u)):[]}e.uniqBy=i})(Qg)),Qg}var _y,E_;function kz(){return E_||(E_=1,_y=Nz().uniqBy),_y}var Cz=kz();const A_=_i(Cz);function Ez(e,t,r){return t===!0?A_(e,r):typeof t=="function"?A_(e,t):e}var Ny={exports:{}},ky={},Cy={exports:{}},Ey={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var P_;function Az(){if(P_)return Ey;P_=1;var e=fc();function t(p,y){return p===y&&(p!==0||1/p===1/y)||p!==p&&y!==y}var r=typeof Object.is=="function"?Object.is:t,n=e.useState,s=e.useEffect,i=e.useLayoutEffect,l=e.useDebugValue;function u(p,y){var x=y(),j=n({inst:{value:x,getSnapshot:y}}),b=j[0].inst,S=j[1];return i(function(){b.value=x,b.getSnapshot=y,d(b)&&S({inst:b})},[p,x,y]),s(function(){return d(b)&&S({inst:b}),p(function(){d(b)&&S({inst:b})})},[p]),l(x),x}function d(p){var y=p.getSnapshot;p=p.value;try{var x=y();return!r(p,x)}catch{return!0}}function m(p,y){return y()}var f=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?m:u;return Ey.useSyncExternalStore=e.useSyncExternalStore!==void 0?e.useSyncExternalStore:f,Ey}var O_;function Pz(){return O_||(O_=1,Cy.exports=Az()),Cy.exports}/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var T_;function Oz(){if(T_)return ky;T_=1;var e=fc(),t=Pz();function r(m,f){return m===f&&(m!==0||1/m===1/f)||m!==m&&f!==f}var n=typeof Object.is=="function"?Object.is:r,s=t.useSyncExternalStore,i=e.useRef,l=e.useEffect,u=e.useMemo,d=e.useDebugValue;return ky.useSyncExternalStoreWithSelector=function(m,f,p,y,x){var j=i(null);if(j.current===null){var b={hasValue:!1,value:null};j.current=b}else b=j.current;j=u(function(){function N(P){if(!E){if(E=!0,k=P,P=y(P),x!==void 0&&b.hasValue){var R=b.value;if(x(R,P))return T=R}return T=P}if(R=T,n(k,P))return R;var q=y(P);return x!==void 0&&x(R,q)?(k=P,R):(k=P,T=q)}var E=!1,k,T,O=p===void 0?null:p;return[function(){return N(f())},O===null?void 0:function(){return N(O())}]},[f,p,y,x]);var S=s(m,j[0],j[1]);return l(function(){b.hasValue=!0,b.value=S},[S]),d(S),S},ky}var I_;function Tz(){return I_||(I_=1,Ny.exports=Oz()),Ny.exports}var Iz=Tz(),jx=v.createContext(null),Dz=e=>e,Hr=()=>{var e=v.useContext(jx);return e?e.store.dispatch:Dz},Wf=()=>{},Rz=()=>Wf,$z=(e,t)=>e===t;function lt(e){var t=v.useContext(jx);return Iz.useSyncExternalStoreWithSelector(t?t.subscription.addNestedSub:Rz,t?t.store.getState:Wf,t?t.store.getState:Wf,t?e:Wf,$z)}function Mz(e,t=`expected a function, instead received ${typeof e}`){if(typeof e!="function")throw new TypeError(t)}function Fz(e,t=`expected an object, instead received ${typeof e}`){if(typeof e!="object")throw new TypeError(t)}function Lz(e,t="expected all items to be functions, instead received the following types: "){if(!e.every(r=>typeof r=="function")){const r=e.map(n=>typeof n=="function"?`function ${n.name||"unnamed"}()`:typeof n).join(", ");throw new TypeError(`${t}[${r}]`)}}var D_=e=>Array.isArray(e)?e:[e];function zz(e){const t=Array.isArray(e[0])?e[0]:e;return Lz(t,"createSelector expects all input-selectors to be functions, but received the following types: "),t}function Bz(e,t){const r=[],{length:n}=e;for(let s=0;s<n;s++)r.push(e[s].apply(null,t));return r}var Uz=class{constructor(e){this.value=e}deref(){return this.value}},Wz=typeof WeakRef<"u"?WeakRef:Uz,Vz=0,R_=1;function bf(){return{s:Vz,v:void 0,o:null,p:null}}function cA(e,t={}){let r=bf();const{resultEqualityCheck:n}=t;let s,i=0;function l(){var p;let u=r;const{length:d}=arguments;for(let y=0,x=d;y<x;y++){const j=arguments[y];if(typeof j=="function"||typeof j=="object"&&j!==null){let b=u.o;b===null&&(u.o=b=new WeakMap);const S=b.get(j);S===void 0?(u=bf(),b.set(j,u)):u=S}else{let b=u.p;b===null&&(u.p=b=new Map);const S=b.get(j);S===void 0?(u=bf(),b.set(j,u)):u=S}}const m=u;let f;if(u.s===R_)f=u.v;else if(f=e.apply(null,arguments),i++,n){const y=((p=s==null?void 0:s.deref)==null?void 0:p.call(s))??s;y!=null&&n(y,f)&&(f=y,i!==0&&i--),s=typeof f=="object"&&f!==null||typeof f=="function"?new Wz(f):f}return m.s=R_,m.v=f,f}return l.clearCache=()=>{r=bf(),l.resetResultsCount()},l.resultsCount=()=>i,l.resetResultsCount=()=>{i=0},l}function qz(e,...t){const r=typeof e=="function"?{memoize:e,memoizeOptions:t}:e,n=(...s)=>{let i=0,l=0,u,d={},m=s.pop();typeof m=="object"&&(d=m,m=s.pop()),Mz(m,`createSelector expects an output function after the inputs, but received: [${typeof m}]`);const f={...r,...d},{memoize:p,memoizeOptions:y=[],argsMemoize:x=cA,argsMemoizeOptions:j=[]}=f,b=D_(y),S=D_(j),N=zz(s),E=p(function(){return i++,m.apply(null,arguments)},...b),k=x(function(){l++;const O=Bz(N,arguments);return u=E.apply(null,O),u},...S);return Object.assign(k,{resultFunc:m,memoizedResultFunc:E,dependencies:N,dependencyRecomputations:()=>l,resetDependencyRecomputations:()=>{l=0},lastResult:()=>u,recomputations:()=>i,resetRecomputations:()=>{i=0},memoize:p,argsMemoize:x})};return Object.assign(n,{withTypes:()=>n}),n}var pe=qz(cA),Hz=Object.assign((e,t=pe)=>{Fz(e,`createStructuredSelector expects first argument to be an object where each property is a selector, instead received a ${typeof e}`);const r=Object.keys(e),n=r.map(i=>e[i]);return t(n,(...i)=>i.reduce((l,u,d)=>(l[r[d]]=u,l),{}))},{withTypes:()=>Hz}),Ay={},Py={},Oy={},$_;function Kz(){return $_||($_=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return typeof n=="symbol"?1:n===null?2:n===void 0?3:n!==n?4:0}const r=(n,s,i)=>{if(n!==s){const l=t(n),u=t(s);if(l===u&&l===0){if(n<s)return i==="desc"?1:-1;if(n>s)return i==="desc"?-1:1}return i==="desc"?u-l:l-u}return 0};e.compareValues=r})(Oy)),Oy}var Ty={},Iy={},M_;function uA(){return M_||(M_=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return typeof r=="symbol"||r instanceof Symbol}e.isSymbol=t})(Iy)),Iy}var F_;function Gz(){return F_||(F_=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=uA(),r=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,n=/^\w*$/;function s(i,l){return Array.isArray(i)?!1:typeof i=="number"||typeof i=="boolean"||i==null||t.isSymbol(i)?!0:typeof i=="string"&&(n.test(i)||!r.test(i))||l!=null&&Object.hasOwn(l,i)}e.isKey=s})(Ty)),Ty}var L_;function Yz(){return L_||(L_=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Kz(),r=Gz(),n=vx();function s(i,l,u,d){if(i==null)return[];u=d?void 0:u,Array.isArray(i)||(i=Object.values(i)),Array.isArray(l)||(l=l==null?[null]:[l]),l.length===0&&(l=[null]),Array.isArray(u)||(u=u==null?[]:[u]),u=u.map(x=>String(x));const m=(x,j)=>{let b=x;for(let S=0;S<j.length&&b!=null;++S)b=b[j[S]];return b},f=(x,j)=>j==null||x==null?j:typeof x=="object"&&"key"in x?Object.hasOwn(j,x.key)?j[x.key]:m(j,x.path):typeof x=="function"?x(j):Array.isArray(x)?m(j,x):typeof j=="object"?j[x]:j,p=l.map(x=>(Array.isArray(x)&&x.length===1&&(x=x[0]),x==null||typeof x=="function"||Array.isArray(x)||r.isKey(x)?x:{key:x,path:n.toPath(x)}));return i.map(x=>({original:x,criteria:p.map(j=>f(j,x))})).slice().sort((x,j)=>{for(let b=0;b<p.length;b++){const S=t.compareValues(x.criteria[b],j.criteria[b],u[b]);if(S!==0)return S}return 0}).map(x=>x.original)}e.orderBy=s})(Py)),Py}var Dy={},z_;function Jz(){return z_||(z_=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r,n=1){const s=[],i=Math.floor(n),l=(u,d)=>{for(let m=0;m<u.length;m++){const f=u[m];Array.isArray(f)&&d<i?l(f,d+1):s.push(f)}};return l(r,0),s}e.flatten=t})(Dy)),Dy}var Ry={},B_;function dA(){return B_||(B_=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=lA(),r=bx(),n=tA(),s=nA();function i(l,u,d){return n.isObject(d)&&(typeof u=="number"&&r.isArrayLike(d)&&t.isIndex(u)&&u<d.length||typeof u=="string"&&u in d)?s.eq(d[u],l):!1}e.isIterateeCall=i})(Ry)),Ry}var U_;function Qz(){return U_||(U_=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Yz(),r=Jz(),n=dA();function s(i,...l){const u=l.length;return u>1&&n.isIterateeCall(i,l[0],l[1])?l=[]:u>2&&n.isIterateeCall(l[0],l[1],l[2])&&(l=[l[0]]),t.orderBy(i,r.flatten(l),["asc"])}e.sortBy=s})(Ay)),Ay}var $y,W_;function Xz(){return W_||(W_=1,$y=Qz().sortBy),$y}var Zz=Xz();const um=_i(Zz);var fA=e=>e.legend.settings,e8=e=>e.legend.size,t8=e=>e.legend.payload;pe([t8,fA],(e,t)=>{var{itemSorter:r}=t,n=e.flat(1);return r?um(n,r):n});var jf=1;function r8(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],[t,r]=v.useState({height:0,left:0,top:0,width:0}),n=v.useCallback(s=>{if(s!=null){var i=s.getBoundingClientRect(),l={height:i.height,left:i.left,top:i.top,width:i.width};(Math.abs(l.height-t.height)>jf||Math.abs(l.left-t.left)>jf||Math.abs(l.top-t.top)>jf||Math.abs(l.width-t.width)>jf)&&r({height:l.height,left:l.left,top:l.top,width:l.width})}},[t.width,t.height,t.top,t.left,...e]);return[t,n]}function Ln(e){return`Minified Redux error #${e}; visit https://redux.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var n8=typeof Symbol=="function"&&Symbol.observable||"@@observable",V_=n8,My=()=>Math.random().toString(36).substring(7).split("").join("."),s8={INIT:`@@redux/INIT${My()}`,REPLACE:`@@redux/REPLACE${My()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${My()}`},hh=s8;function Sx(e){if(typeof e!="object"||e===null)return!1;let t=e;for(;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t||Object.getPrototypeOf(e)===null}function hA(e,t,r){if(typeof e!="function")throw new Error(Ln(2));if(typeof t=="function"&&typeof r=="function"||typeof r=="function"&&typeof arguments[3]=="function")throw new Error(Ln(0));if(typeof t=="function"&&typeof r>"u"&&(r=t,t=void 0),typeof r<"u"){if(typeof r!="function")throw new Error(Ln(1));return r(hA)(e,t)}let n=e,s=t,i=new Map,l=i,u=0,d=!1;function m(){l===i&&(l=new Map,i.forEach((S,N)=>{l.set(N,S)}))}function f(){if(d)throw new Error(Ln(3));return s}function p(S){if(typeof S!="function")throw new Error(Ln(4));if(d)throw new Error(Ln(5));let N=!0;m();const E=u++;return l.set(E,S),function(){if(N){if(d)throw new Error(Ln(6));N=!1,m(),l.delete(E),i=null}}}function y(S){if(!Sx(S))throw new Error(Ln(7));if(typeof S.type>"u")throw new Error(Ln(8));if(typeof S.type!="string")throw new Error(Ln(17));if(d)throw new Error(Ln(9));try{d=!0,s=n(s,S)}finally{d=!1}return(i=l).forEach(E=>{E()}),S}function x(S){if(typeof S!="function")throw new Error(Ln(10));n=S,y({type:hh.REPLACE})}function j(){const S=p;return{subscribe(N){if(typeof N!="object"||N===null)throw new Error(Ln(11));function E(){const T=N;T.next&&T.next(f())}return E(),{unsubscribe:S(E)}},[V_](){return this}}}return y({type:hh.INIT}),{dispatch:y,subscribe:p,getState:f,replaceReducer:x,[V_]:j}}function i8(e){Object.keys(e).forEach(t=>{const r=e[t];if(typeof r(void 0,{type:hh.INIT})>"u")throw new Error(Ln(12));if(typeof r(void 0,{type:hh.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(Ln(13))})}function mA(e){const t=Object.keys(e),r={};for(let i=0;i<t.length;i++){const l=t[i];typeof e[l]=="function"&&(r[l]=e[l])}const n=Object.keys(r);let s;try{i8(r)}catch(i){s=i}return function(l={},u){if(s)throw s;let d=!1;const m={};for(let f=0;f<n.length;f++){const p=n[f],y=r[p],x=l[p],j=y(x,u);if(typeof j>"u")throw u&&u.type,new Error(Ln(14));m[p]=j,d=d||j!==x}return d=d||n.length!==Object.keys(l).length,d?m:l}}function mh(...e){return e.length===0?t=>t:e.length===1?e[0]:e.reduce((t,r)=>(...n)=>t(r(...n)))}function a8(...e){return t=>(r,n)=>{const s=t(r,n);let i=()=>{throw new Error(Ln(15))};const l={getState:s.getState,dispatch:(d,...m)=>i(d,...m)},u=e.map(d=>d(l));return i=mh(...u)(s.dispatch),{...s,dispatch:i}}}function pA(e){return Sx(e)&&"type"in e&&typeof e.type=="string"}var gA=Symbol.for("immer-nothing"),q_=Symbol.for("immer-draftable"),Us=Symbol.for("immer-state");function xi(e,...t){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var Du=Object.getPrototypeOf;function Wo(e){return!!e&&!!e[Us]}function ga(e){var t;return e?yA(e)||Array.isArray(e)||!!e[q_]||!!((t=e.constructor)!=null&&t[q_])||Zu(e)||fm(e):!1}var o8=Object.prototype.constructor.toString(),H_=new WeakMap;function yA(e){if(!e||typeof e!="object")return!1;const t=Object.getPrototypeOf(e);if(t===null||t===Object.prototype)return!0;const r=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;if(r===Object)return!0;if(typeof r!="function")return!1;let n=H_.get(r);return n===void 0&&(n=Function.toString.call(r),H_.set(r,n)),n===o8}function ph(e,t,r=!0){dm(e)===0?(r?Reflect.ownKeys(e):Object.keys(e)).forEach(s=>{t(s,e[s],e)}):e.forEach((n,s)=>t(s,n,e))}function dm(e){const t=e[Us];return t?t.type_:Array.isArray(e)?1:Zu(e)?2:fm(e)?3:0}function e0(e,t){return dm(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function vA(e,t,r){const n=dm(e);n===2?e.set(t,r):n===3?e.add(r):e[t]=r}function l8(e,t){return e===t?e!==0||1/e===1/t:e!==e&&t!==t}function Zu(e){return e instanceof Map}function fm(e){return e instanceof Set}function Co(e){return e.copy_||e.base_}function t0(e,t){if(Zu(e))return new Map(e);if(fm(e))return new Set(e);if(Array.isArray(e))return Array.prototype.slice.call(e);const r=yA(e);if(t===!0||t==="class_only"&&!r){const n=Object.getOwnPropertyDescriptors(e);delete n[Us];let s=Reflect.ownKeys(n);for(let i=0;i<s.length;i++){const l=s[i],u=n[l];u.writable===!1&&(u.writable=!0,u.configurable=!0),(u.get||u.set)&&(n[l]={configurable:!0,writable:!0,enumerable:u.enumerable,value:e[l]})}return Object.create(Du(e),n)}else{const n=Du(e);if(n!==null&&r)return{...e};const s=Object.create(n);return Object.assign(s,e)}}function _x(e,t=!1){return hm(e)||Wo(e)||!ga(e)||(dm(e)>1&&Object.defineProperties(e,{set:Sf,add:Sf,clear:Sf,delete:Sf}),Object.freeze(e),t&&Object.values(e).forEach(r=>_x(r,!0))),e}function c8(){xi(2)}var Sf={value:c8};function hm(e){return e===null||typeof e!="object"?!0:Object.isFrozen(e)}var u8={};function Vo(e){const t=u8[e];return t||xi(0,e),t}var Ru;function xA(){return Ru}function d8(e,t){return{drafts_:[],parent_:e,immer_:t,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function K_(e,t){t&&(Vo("Patches"),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function r0(e){n0(e),e.drafts_.forEach(f8),e.drafts_=null}function n0(e){e===Ru&&(Ru=e.parent_)}function G_(e){return Ru=d8(Ru,e)}function f8(e){const t=e[Us];t.type_===0||t.type_===1?t.revoke_():t.revoked_=!0}function Y_(e,t){t.unfinalizedDrafts_=t.drafts_.length;const r=t.drafts_[0];return e!==void 0&&e!==r?(r[Us].modified_&&(r0(t),xi(4)),ga(e)&&(e=gh(t,e),t.parent_||yh(t,e)),t.patches_&&Vo("Patches").generateReplacementPatches_(r[Us].base_,e,t.patches_,t.inversePatches_)):e=gh(t,r,[]),r0(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==gA?e:void 0}function gh(e,t,r){if(hm(t))return t;const n=e.immer_.shouldUseStrictIteration(),s=t[Us];if(!s)return ph(t,(i,l)=>J_(e,s,t,i,l,r),n),t;if(s.scope_!==e)return t;if(!s.modified_)return yh(e,s.base_,!0),s.base_;if(!s.finalized_){s.finalized_=!0,s.scope_.unfinalizedDrafts_--;const i=s.copy_;let l=i,u=!1;s.type_===3&&(l=new Set(i),i.clear(),u=!0),ph(l,(d,m)=>J_(e,s,i,d,m,r,u),n),yh(e,i,!1),r&&e.patches_&&Vo("Patches").generatePatches_(s,r,e.patches_,e.inversePatches_)}return s.copy_}function J_(e,t,r,n,s,i,l){if(s==null||typeof s!="object"&&!l)return;const u=hm(s);if(!(u&&!l)){if(Wo(s)){const d=i&&t&&t.type_!==3&&!e0(t.assigned_,n)?i.concat(n):void 0,m=gh(e,s,d);if(vA(r,n,m),Wo(m))e.canAutoFreeze_=!1;else return}else l&&r.add(s);if(ga(s)&&!u){if(!e.immer_.autoFreeze_&&e.unfinalizedDrafts_<1||t&&t.base_&&t.base_[n]===s&&u)return;gh(e,s),(!t||!t.scope_.parent_)&&typeof n!="symbol"&&(Zu(r)?r.has(n):Object.prototype.propertyIsEnumerable.call(r,n))&&yh(e,s)}}}function yh(e,t,r=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&_x(t,r)}function h8(e,t){const r=Array.isArray(e),n={type_:r?1:0,scope_:t?t.scope_:xA(),modified_:!1,finalized_:!1,assigned_:{},parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1};let s=n,i=Nx;r&&(s=[n],i=$u);const{revoke:l,proxy:u}=Proxy.revocable(s,i);return n.draft_=u,n.revoke_=l,u}var Nx={get(e,t){if(t===Us)return e;const r=Co(e);if(!e0(r,t))return m8(e,r,t);const n=r[t];return e.finalized_||!ga(n)?n:n===Fy(e.base_,t)?(Ly(e),e.copy_[t]=i0(n,e)):n},has(e,t){return t in Co(e)},ownKeys(e){return Reflect.ownKeys(Co(e))},set(e,t,r){const n=wA(Co(e),t);if(n!=null&&n.set)return n.set.call(e.draft_,r),!0;if(!e.modified_){const s=Fy(Co(e),t),i=s==null?void 0:s[Us];if(i&&i.base_===r)return e.copy_[t]=r,e.assigned_[t]=!1,!0;if(l8(r,s)&&(r!==void 0||e0(e.base_,t)))return!0;Ly(e),s0(e)}return e.copy_[t]===r&&(r!==void 0||t in e.copy_)||Number.isNaN(r)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=r,e.assigned_[t]=!0),!0},deleteProperty(e,t){return Fy(e.base_,t)!==void 0||t in e.base_?(e.assigned_[t]=!1,Ly(e),s0(e)):delete e.assigned_[t],e.copy_&&delete e.copy_[t],!0},getOwnPropertyDescriptor(e,t){const r=Co(e),n=Reflect.getOwnPropertyDescriptor(r,t);return n&&{writable:!0,configurable:e.type_!==1||t!=="length",enumerable:n.enumerable,value:r[t]}},defineProperty(){xi(11)},getPrototypeOf(e){return Du(e.base_)},setPrototypeOf(){xi(12)}},$u={};ph(Nx,(e,t)=>{$u[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}});$u.deleteProperty=function(e,t){return $u.set.call(this,e,t,void 0)};$u.set=function(e,t,r){return Nx.set.call(this,e[0],t,r,e[0])};function Fy(e,t){const r=e[Us];return(r?Co(r):e)[t]}function m8(e,t,r){var s;const n=wA(t,r);return n?"value"in n?n.value:(s=n.get)==null?void 0:s.call(e.draft_):void 0}function wA(e,t){if(!(t in e))return;let r=Du(e);for(;r;){const n=Object.getOwnPropertyDescriptor(r,t);if(n)return n;r=Du(r)}}function s0(e){e.modified_||(e.modified_=!0,e.parent_&&s0(e.parent_))}function Ly(e){e.copy_||(e.copy_=t0(e.base_,e.scope_.immer_.useStrictShallowCopy_))}var p8=class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.useStrictIteration_=!0,this.produce=(t,r,n)=>{if(typeof t=="function"&&typeof r!="function"){const i=r;r=t;const l=this;return function(d=i,...m){return l.produce(d,f=>r.call(this,f,...m))}}typeof r!="function"&&xi(6),n!==void 0&&typeof n!="function"&&xi(7);let s;if(ga(t)){const i=G_(this),l=i0(t,void 0);let u=!0;try{s=r(l),u=!1}finally{u?r0(i):n0(i)}return K_(i,n),Y_(s,i)}else if(!t||typeof t!="object"){if(s=r(t),s===void 0&&(s=t),s===gA&&(s=void 0),this.autoFreeze_&&_x(s,!0),n){const i=[],l=[];Vo("Patches").generateReplacementPatches_(t,s,i,l),n(i,l)}return s}else xi(1,t)},this.produceWithPatches=(t,r)=>{if(typeof t=="function")return(l,...u)=>this.produceWithPatches(l,d=>t(d,...u));let n,s;return[this.produce(t,r,(l,u)=>{n=l,s=u}),n,s]},typeof(e==null?void 0:e.autoFreeze)=="boolean"&&this.setAutoFreeze(e.autoFreeze),typeof(e==null?void 0:e.useStrictShallowCopy)=="boolean"&&this.setUseStrictShallowCopy(e.useStrictShallowCopy),typeof(e==null?void 0:e.useStrictIteration)=="boolean"&&this.setUseStrictIteration(e.useStrictIteration)}createDraft(e){ga(e)||xi(8),Wo(e)&&(e=ca(e));const t=G_(this),r=i0(e,void 0);return r[Us].isManual_=!0,n0(t),r}finishDraft(e,t){const r=e&&e[Us];(!r||!r.isManual_)&&xi(9);const{scope_:n}=r;return K_(n,t),Y_(void 0,n)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}setUseStrictIteration(e){this.useStrictIteration_=e}shouldUseStrictIteration(){return this.useStrictIteration_}applyPatches(e,t){let r;for(r=t.length-1;r>=0;r--){const s=t[r];if(s.path.length===0&&s.op==="replace"){e=s.value;break}}r>-1&&(t=t.slice(r+1));const n=Vo("Patches").applyPatches_;return Wo(e)?n(e,t):this.produce(e,s=>n(s,t))}};function i0(e,t){const r=Zu(e)?Vo("MapSet").proxyMap_(e,t):fm(e)?Vo("MapSet").proxySet_(e,t):h8(e,t);return(t?t.scope_:xA()).drafts_.push(r),r}function ca(e){return Wo(e)||xi(10,e),bA(e)}function bA(e){if(!ga(e)||hm(e))return e;const t=e[Us];let r,n=!0;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,r=t0(e,t.scope_.immer_.useStrictShallowCopy_),n=t.scope_.immer_.shouldUseStrictIteration()}else r=t0(e,!0);return ph(r,(s,i)=>{vA(r,s,bA(i))},n),t&&(t.finalized_=!1),r}var a0=new p8,jA=a0.produce,g8=a0.setUseStrictIteration.bind(a0);function SA(e){return({dispatch:r,getState:n})=>s=>i=>typeof i=="function"?i(r,n,e):s(i)}var y8=SA(),v8=SA,x8=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?mh:mh.apply(null,arguments)};function ni(e,t){function r(...n){if(t){let s=t(...n);if(!s)throw new Error(Bs(0));return{type:e,payload:s.payload,..."meta"in s&&{meta:s.meta},..."error"in s&&{error:s.error}}}return{type:e,payload:n[0]}}return r.toString=()=>`${e}`,r.type=e,r.match=n=>pA(n)&&n.type===e,r}var _A=class vu extends Array{constructor(...t){super(...t),Object.setPrototypeOf(this,vu.prototype)}static get[Symbol.species](){return vu}concat(...t){return super.concat.apply(this,t)}prepend(...t){return t.length===1&&Array.isArray(t[0])?new vu(...t[0].concat(this)):new vu(...t.concat(this))}};function Q_(e){return ga(e)?jA(e,()=>{}):e}function _f(e,t,r){return e.has(t)?e.get(t):e.set(t,r(t)).get(t)}function w8(e){return typeof e=="boolean"}var b8=()=>function(t){const{thunk:r=!0,immutableCheck:n=!0,serializableCheck:s=!0,actionCreatorCheck:i=!0}=t??{};let l=new _A;return r&&(w8(r)?l.push(y8):l.push(v8(r.extraArgument))),l},NA="RTK_autoBatch",mn=()=>e=>({payload:e,meta:{[NA]:!0}}),X_=e=>t=>{setTimeout(t,e)},kA=(e={type:"raf"})=>t=>(...r)=>{const n=t(...r);let s=!0,i=!1,l=!1;const u=new Set,d=e.type==="tick"?queueMicrotask:e.type==="raf"?typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:X_(10):e.type==="callback"?e.queueNotification:X_(e.timeout),m=()=>{l=!1,i&&(i=!1,u.forEach(f=>f()))};return Object.assign({},n,{subscribe(f){const p=()=>s&&f(),y=n.subscribe(p);return u.add(f),()=>{y(),u.delete(f)}},dispatch(f){var p;try{return s=!((p=f==null?void 0:f.meta)!=null&&p[NA]),i=!s,i&&(l||(l=!0,d(m))),n.dispatch(f)}finally{s=!0}}})},j8=e=>function(r){const{autoBatch:n=!0}=r??{};let s=new _A(e);return n&&s.push(kA(typeof n=="object"?n:void 0)),s};function S8(e){const t=b8(),{reducer:r=void 0,middleware:n,devTools:s=!0,preloadedState:i=void 0,enhancers:l=void 0}=e||{};let u;if(typeof r=="function")u=r;else if(Sx(r))u=mA(r);else throw new Error(Bs(1));let d;typeof n=="function"?d=n(t):d=t();let m=mh;s&&(m=x8({trace:!1,...typeof s=="object"&&s}));const f=a8(...d),p=j8(f);let y=typeof l=="function"?l(p):p();const x=m(...y);return hA(u,i,x)}function CA(e){const t={},r=[];let n;const s={addCase(i,l){const u=typeof i=="string"?i:i.type;if(!u)throw new Error(Bs(28));if(u in t)throw new Error(Bs(29));return t[u]=l,s},addAsyncThunk(i,l){return l.pending&&(t[i.pending.type]=l.pending),l.rejected&&(t[i.rejected.type]=l.rejected),l.fulfilled&&(t[i.fulfilled.type]=l.fulfilled),l.settled&&r.push({matcher:i.settled,reducer:l.settled}),s},addMatcher(i,l){return r.push({matcher:i,reducer:l}),s},addDefaultCase(i){return n=i,s}};return e(s),[t,r,n]}g8(!1);function _8(e){return typeof e=="function"}function N8(e,t){let[r,n,s]=CA(t),i;if(_8(e))i=()=>Q_(e());else{const u=Q_(e);i=()=>u}function l(u=i(),d){let m=[r[d.type],...n.filter(({matcher:f})=>f(d)).map(({reducer:f})=>f)];return m.filter(f=>!!f).length===0&&(m=[s]),m.reduce((f,p)=>{if(p)if(Wo(f)){const x=p(f,d);return x===void 0?f:x}else{if(ga(f))return jA(f,y=>p(y,d));{const y=p(f,d);if(y===void 0){if(f===null)return f;throw Error("A case reducer on a non-draftable value must not return undefined")}return y}}return f},u)}return l.getInitialState=i,l}var k8="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",C8=(e=21)=>{let t="",r=e;for(;r--;)t+=k8[Math.random()*64|0];return t},E8=Symbol.for("rtk-slice-createasyncthunk");function A8(e,t){return`${e}/${t}`}function P8({creators:e}={}){var r;const t=(r=e==null?void 0:e.asyncThunk)==null?void 0:r[E8];return function(s){const{name:i,reducerPath:l=i}=s;if(!i)throw new Error(Bs(11));const u=(typeof s.reducers=="function"?s.reducers(T8()):s.reducers)||{},d=Object.keys(u),m={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},f={addCase(T,O){const P=typeof T=="string"?T:T.type;if(!P)throw new Error(Bs(12));if(P in m.sliceCaseReducersByType)throw new Error(Bs(13));return m.sliceCaseReducersByType[P]=O,f},addMatcher(T,O){return m.sliceMatchers.push({matcher:T,reducer:O}),f},exposeAction(T,O){return m.actionCreators[T]=O,f},exposeCaseReducer(T,O){return m.sliceCaseReducersByName[T]=O,f}};d.forEach(T=>{const O=u[T],P={reducerName:T,type:A8(i,T),createNotation:typeof s.reducers=="function"};D8(O)?$8(P,O,f,t):I8(P,O,f)});function p(){const[T={},O=[],P=void 0]=typeof s.extraReducers=="function"?CA(s.extraReducers):[s.extraReducers],R={...T,...m.sliceCaseReducersByType};return N8(s.initialState,q=>{for(let F in R)q.addCase(F,R[F]);for(let F of m.sliceMatchers)q.addMatcher(F.matcher,F.reducer);for(let F of O)q.addMatcher(F.matcher,F.reducer);P&&q.addDefaultCase(P)})}const y=T=>T,x=new Map,j=new WeakMap;let b;function S(T,O){return b||(b=p()),b(T,O)}function N(){return b||(b=p()),b.getInitialState()}function E(T,O=!1){function P(q){let F=q[T];return typeof F>"u"&&O&&(F=_f(j,P,N)),F}function R(q=y){const F=_f(x,O,()=>new WeakMap);return _f(F,q,()=>{const V={};for(const[B,Q]of Object.entries(s.selectors??{}))V[B]=O8(Q,q,()=>_f(j,q,N),O);return V})}return{reducerPath:T,getSelectors:R,get selectors(){return R(P)},selectSlice:P}}const k={name:i,reducer:S,actions:m.actionCreators,caseReducers:m.sliceCaseReducersByName,getInitialState:N,...E(l),injectInto(T,{reducerPath:O,...P}={}){const R=O??l;return T.inject({reducerPath:R,reducer:S},P),{...k,...E(R,!0)}}};return k}}function O8(e,t,r,n){function s(i,...l){let u=t(i);return typeof u>"u"&&n&&(u=r()),e(u,...l)}return s.unwrapped=e,s}var _s=P8();function T8(){function e(t,r){return{_reducerDefinitionType:"asyncThunk",payloadCreator:t,...r}}return e.withTypes=()=>e,{reducer(t){return Object.assign({[t.name](...r){return t(...r)}}[t.name],{_reducerDefinitionType:"reducer"})},preparedReducer(t,r){return{_reducerDefinitionType:"reducerWithPrepare",prepare:t,reducer:r}},asyncThunk:e}}function I8({type:e,reducerName:t,createNotation:r},n,s){let i,l;if("reducer"in n){if(r&&!R8(n))throw new Error(Bs(17));i=n.reducer,l=n.prepare}else i=n;s.addCase(e,i).exposeCaseReducer(t,i).exposeAction(t,l?ni(e,l):ni(e))}function D8(e){return e._reducerDefinitionType==="asyncThunk"}function R8(e){return e._reducerDefinitionType==="reducerWithPrepare"}function $8({type:e,reducerName:t},r,n,s){if(!s)throw new Error(Bs(18));const{payloadCreator:i,fulfilled:l,pending:u,rejected:d,settled:m,options:f}=r,p=s(e,i,f);n.exposeAction(t,p),l&&n.addCase(p.fulfilled,l),u&&n.addCase(p.pending,u),d&&n.addCase(p.rejected,d),m&&n.addMatcher(p.settled,m),n.exposeCaseReducer(t,{fulfilled:l||Nf,pending:u||Nf,rejected:d||Nf,settled:m||Nf})}function Nf(){}var M8="task",EA="listener",AA="completed",kx="cancelled",F8=`task-${kx}`,L8=`task-${AA}`,o0=`${EA}-${kx}`,z8=`${EA}-${AA}`,mm=class{constructor(e){gg(this,"name","TaskAbortError");gg(this,"message");this.code=e,this.message=`${M8} ${kx} (reason: ${e})`}},Cx=(e,t)=>{if(typeof e!="function")throw new TypeError(Bs(32))},vh=()=>{},PA=(e,t=vh)=>(e.catch(t),e),OA=(e,t)=>(e.addEventListener("abort",t,{once:!0}),()=>e.removeEventListener("abort",t)),Fo=(e,t)=>{const r=e.signal;r.aborted||("reason"in r||Object.defineProperty(r,"reason",{enumerable:!0,value:t,configurable:!0,writable:!0}),e.abort(t))},Lo=e=>{if(e.aborted){const{reason:t}=e;throw new mm(t)}};function TA(e,t){let r=vh;return new Promise((n,s)=>{const i=()=>s(new mm(e.reason));if(e.aborted){i();return}r=OA(e,i),t.finally(()=>r()).then(n,s)}).finally(()=>{r=vh})}var B8=async(e,t)=>{try{return await Promise.resolve(),{status:"ok",value:await e()}}catch(r){return{status:r instanceof mm?"cancelled":"rejected",error:r}}finally{t==null||t()}},xh=e=>t=>PA(TA(e,t).then(r=>(Lo(e),r))),IA=e=>{const t=xh(e);return r=>t(new Promise(n=>setTimeout(n,r)))},{assign:Zl}=Object,Z_={},pm="listenerMiddleware",U8=(e,t)=>{const r=n=>OA(e,()=>Fo(n,e.reason));return(n,s)=>{Cx(n);const i=new AbortController;r(i);const l=B8(async()=>{Lo(e),Lo(i.signal);const u=await n({pause:xh(i.signal),delay:IA(i.signal),signal:i.signal});return Lo(i.signal),u},()=>Fo(i,L8));return s!=null&&s.autoJoin&&t.push(l.catch(vh)),{result:xh(e)(l),cancel(){Fo(i,F8)}}}},W8=(e,t)=>{const r=async(n,s)=>{Lo(t);let i=()=>{};const u=[new Promise((d,m)=>{let f=e({predicate:n,effect:(p,y)=>{y.unsubscribe(),d([p,y.getState(),y.getOriginalState()])}});i=()=>{f(),m()}})];s!=null&&u.push(new Promise(d=>setTimeout(d,s,null)));try{const d=await TA(t,Promise.race(u));return Lo(t),d}finally{i()}};return(n,s)=>PA(r(n,s))},DA=e=>{let{type:t,actionCreator:r,matcher:n,predicate:s,effect:i}=e;if(t)s=ni(t).match;else if(r)t=r.type,s=r.match;else if(n)s=n;else if(!s)throw new Error(Bs(21));return Cx(i),{predicate:s,type:t,effect:i}},RA=Zl(e=>{const{type:t,predicate:r,effect:n}=DA(e);return{id:C8(),effect:n,type:t,predicate:r,pending:new Set,unsubscribe:()=>{throw new Error(Bs(22))}}},{withTypes:()=>RA}),eN=(e,t)=>{const{type:r,effect:n,predicate:s}=DA(t);return Array.from(e.values()).find(i=>(typeof r=="string"?i.type===r:i.predicate===s)&&i.effect===n)},l0=e=>{e.pending.forEach(t=>{Fo(t,o0)})},V8=(e,t)=>()=>{for(const r of t.keys())l0(r);e.clear()},tN=(e,t,r)=>{try{e(t,r)}catch(n){setTimeout(()=>{throw n},0)}},$A=Zl(ni(`${pm}/add`),{withTypes:()=>$A}),q8=ni(`${pm}/removeAll`),MA=Zl(ni(`${pm}/remove`),{withTypes:()=>MA}),H8=(...e)=>{console.error(`${pm}/error`,...e)},ed=(e={})=>{const t=new Map,r=new Map,n=x=>{const j=r.get(x)??0;r.set(x,j+1)},s=x=>{const j=r.get(x)??1;j===1?r.delete(x):r.set(x,j-1)},{extra:i,onError:l=H8}=e;Cx(l);const u=x=>(x.unsubscribe=()=>t.delete(x.id),t.set(x.id,x),j=>{x.unsubscribe(),j!=null&&j.cancelActive&&l0(x)}),d=x=>{const j=eN(t,x)??RA(x);return u(j)};Zl(d,{withTypes:()=>d});const m=x=>{const j=eN(t,x);return j&&(j.unsubscribe(),x.cancelActive&&l0(j)),!!j};Zl(m,{withTypes:()=>m});const f=async(x,j,b,S)=>{const N=new AbortController,E=W8(d,N.signal),k=[];try{x.pending.add(N),n(x),await Promise.resolve(x.effect(j,Zl({},b,{getOriginalState:S,condition:(T,O)=>E(T,O).then(Boolean),take:E,delay:IA(N.signal),pause:xh(N.signal),extra:i,signal:N.signal,fork:U8(N.signal,k),unsubscribe:x.unsubscribe,subscribe:()=>{t.set(x.id,x)},cancelActiveListeners:()=>{x.pending.forEach((T,O,P)=>{T!==N&&(Fo(T,o0),P.delete(T))})},cancel:()=>{Fo(N,o0),x.pending.delete(N)},throwIfCancelled:()=>{Lo(N.signal)}})))}catch(T){T instanceof mm||tN(l,T,{raisedBy:"effect"})}finally{await Promise.all(k),Fo(N,z8),s(x),x.pending.delete(N)}},p=V8(t,r);return{middleware:x=>j=>b=>{if(!pA(b))return j(b);if($A.match(b))return d(b.payload);if(q8.match(b)){p();return}if(MA.match(b))return m(b.payload);let S=x.getState();const N=()=>{if(S===Z_)throw new Error(Bs(23));return S};let E;try{if(E=j(b),t.size>0){const k=x.getState(),T=Array.from(t.values());for(const O of T){let P=!1;try{P=O.predicate(b,k,S)}catch(R){P=!1,tN(l,R,{raisedBy:"predicate"})}P&&f(O,b,x,N)}}}finally{S=Z_}return E},startListening:d,stopListening:m,clearListeners:p}};function Bs(e){return`Minified Redux Toolkit error #${e}; visit https://redux-toolkit.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var K8={layoutType:"horizontal",width:0,height:0,margin:{top:5,right:5,bottom:5,left:5},scale:1},FA=_s({name:"chartLayout",initialState:K8,reducers:{setLayout(e,t){e.layoutType=t.payload},setChartSize(e,t){e.width=t.payload.width,e.height=t.payload.height},setMargin(e,t){var r,n,s,i;e.margin.top=(r=t.payload.top)!==null&&r!==void 0?r:0,e.margin.right=(n=t.payload.right)!==null&&n!==void 0?n:0,e.margin.bottom=(s=t.payload.bottom)!==null&&s!==void 0?s:0,e.margin.left=(i=t.payload.left)!==null&&i!==void 0?i:0},setScale(e,t){e.scale=t.payload}}}),{setMargin:G8,setLayout:Y8,setChartSize:J8,setScale:Q8}=FA.actions,X8=FA.reducer;function LA(e,t,r){return Array.isArray(e)&&e&&t+r!==0?e.slice(t,r+1):e}function rN(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Gl(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?rN(Object(r),!0).forEach(function(n){Z8(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):rN(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Z8(e,t,r){return(t=eB(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function eB(e){var t=tB(e,"string");return typeof t=="symbol"?t:t+""}function tB(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function as(e,t,r){return Pn(e)||Pn(t)?r:Li(t)?sc(e,t,r):typeof t=="function"?t(e):r}var rB=(e,t,r)=>{if(t&&r){var{width:n,height:s}=r,{align:i,verticalAlign:l,layout:u}=t;if((u==="vertical"||u==="horizontal"&&l==="middle")&&i!=="center"&&mt(e[i]))return Gl(Gl({},e),{},{[i]:e[i]+(n||0)});if((u==="horizontal"||u==="vertical"&&i==="center")&&l!=="middle"&&mt(e[l]))return Gl(Gl({},e),{},{[l]:e[l]+(s||0)})}return e},Xo=(e,t)=>e==="horizontal"&&t==="xAxis"||e==="vertical"&&t==="yAxis"||e==="centric"&&t==="angleAxis"||e==="radial"&&t==="radiusAxis",nN=1e-4,nB=e=>{var t=e.domain();if(!(!t||t.length<=2)){var r=t.length,n=e.range(),s=Math.min(n[0],n[1])-nN,i=Math.max(n[0],n[1])+nN,l=e(t[0]),u=e(t[r-1]);(l<s||l>i||u<s||u>i)&&e.domain([t[0],t[r-1]])}},sB=(e,t)=>{if(!t||t.length!==2||!mt(t[0])||!mt(t[1]))return e;var r=Math.min(t[0],t[1]),n=Math.max(t[0],t[1]),s=[e[0],e[1]];return(!mt(e[0])||e[0]<r)&&(s[0]=r),(!mt(e[1])||e[1]>n)&&(s[1]=n),s[0]>n&&(s[0]=n),s[1]<r&&(s[1]=r),s},iB=e=>{var t=e.length;if(!(t<=0))for(var r=0,n=e[0].length;r<n;++r)for(var s=0,i=0,l=0;l<t;++l){var u=Fi(e[l][r][1])?e[l][r][0]:e[l][r][1];u>=0?(e[l][r][0]=s,e[l][r][1]=s+u,s=e[l][r][1]):(e[l][r][0]=i,e[l][r][1]=i+u,i=e[l][r][1])}},aB=e=>{var t=e.length;if(!(t<=0))for(var r=0,n=e[0].length;r<n;++r)for(var s=0,i=0;i<t;++i){var l=Fi(e[i][r][1])?e[i][r][0]:e[i][r][1];l>=0?(e[i][r][0]=s,e[i][r][1]=s+l,s=e[i][r][1]):(e[i][r][0]=0,e[i][r][1]=0)}},oB={sign:iB,expand:ML,none:nc,silhouette:FL,wiggle:LL,positive:aB},lB=(e,t,r)=>{var n=oB[r],s=$L().keys(t).value((i,l)=>Number(as(i,l,0))).order(Xv).offset(n);return s(e)};function cB(e){return e==null?void 0:String(e)}var sN=e=>{var{axis:t,ticks:r,offset:n,bandSize:s,entry:i,index:l}=e;if(t.type==="category")return r[l]?r[l].coordinate+n:null;var u=as(i,t.dataKey,t.scale.domain()[l]);return Pn(u)?null:t.scale(u)-s/2+n},uB=e=>{var{numericAxis:t}=e,r=t.scale.domain();if(t.type==="number"){var n=Math.min(r[0],r[1]),s=Math.max(r[0],r[1]);return n<=0&&s>=0?0:s<0?s:n}return r[0]},dB=e=>{var t=e.flat(2).filter(mt);return[Math.min(...t),Math.max(...t)]},fB=e=>[e[0]===1/0?0:e[0],e[1]===-1/0?0:e[1]],hB=(e,t,r)=>{if(e!=null)return fB(Object.keys(e).reduce((n,s)=>{var i=e[s],{stackedData:l}=i,u=l.reduce((d,m)=>{var f=LA(m,t,r),p=dB(f);return[Math.min(d[0],p[0]),Math.max(d[1],p[1])]},[1/0,-1/0]);return[Math.min(u[0],n[0]),Math.max(u[1],n[1])]},[1/0,-1/0]))},iN=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,aN=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,wh=(e,t,r)=>{if(e&&e.scale&&e.scale.bandwidth){var n=e.scale.bandwidth();if(!r||n>0)return n}if(e&&t&&t.length>=2){for(var s=um(t,f=>f.coordinate),i=1/0,l=1,u=s.length;l<u;l++){var d=s[l],m=s[l-1];i=Math.min((d.coordinate||0)-(m.coordinate||0),i)}return i===1/0?0:i}return r?void 0:0};function oN(e){var{tooltipEntrySettings:t,dataKey:r,payload:n,value:s,name:i}=e;return Gl(Gl({},t),{},{dataKey:r,payload:n,value:s,name:i})}function zA(e,t){if(e)return String(e);if(typeof t=="string")return t}var mB=(e,t)=>{if(t==="horizontal")return e.chartX;if(t==="vertical")return e.chartY},pB=(e,t)=>t==="centric"?e.angle:e.radius,Sa=e=>e.layout.width,_a=e=>e.layout.height,gB=e=>e.layout.scale,BA=e=>e.layout.margin,gm=pe(e=>e.cartesianAxis.xAxis,e=>Object.values(e)),ym=pe(e=>e.cartesianAxis.yAxis,e=>Object.values(e)),yB="data-recharts-item-index",vB="data-recharts-item-data-key",td=60;function lN(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function kf(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?lN(Object(r),!0).forEach(function(n){xB(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):lN(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function xB(e,t,r){return(t=wB(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function wB(e){var t=bB(e,"string");return typeof t=="symbol"?t:t+""}function bB(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var jB=e=>e.brush.height;function SB(e){var t=ym(e);return t.reduce((r,n)=>{if(n.orientation==="left"&&!n.mirror&&!n.hide){var s=typeof n.width=="number"?n.width:td;return r+s}return r},0)}function _B(e){var t=ym(e);return t.reduce((r,n)=>{if(n.orientation==="right"&&!n.mirror&&!n.hide){var s=typeof n.width=="number"?n.width:td;return r+s}return r},0)}function NB(e){var t=gm(e);return t.reduce((r,n)=>n.orientation==="top"&&!n.mirror&&!n.hide?r+n.height:r,0)}function kB(e){var t=gm(e);return t.reduce((r,n)=>n.orientation==="bottom"&&!n.mirror&&!n.hide?r+n.height:r,0)}var On=pe([Sa,_a,BA,jB,SB,_B,NB,kB,fA,e8],(e,t,r,n,s,i,l,u,d,m)=>{var f={left:(r.left||0)+s,right:(r.right||0)+i},p={top:(r.top||0)+l,bottom:(r.bottom||0)+u},y=kf(kf({},p),f),x=y.bottom;y.bottom+=n,y=rB(y,d,m);var j=e-y.left-y.right,b=t-y.top-y.bottom;return kf(kf({brushBottom:x},y),{},{width:Math.max(j,0),height:Math.max(b,0)})}),CB=pe(On,e=>({x:e.left,y:e.top,width:e.width,height:e.height})),Ex=pe(Sa,_a,(e,t)=>({x:0,y:0,width:e,height:t})),EB=v.createContext(null),Ws=()=>v.useContext(EB)!=null,vm=e=>e.brush,xm=pe([vm,On,BA],(e,t,r)=>({height:e.height,x:mt(e.x)?e.x:t.left,y:mt(e.y)?e.y:t.top+t.height+t.brushBottom-((r==null?void 0:r.bottom)||0),width:mt(e.width)?e.width:t.width})),zy={},By={},Uy={},cN;function AB(){return cN||(cN=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r,n,{signal:s,edges:i}={}){let l,u=null;const d=i!=null&&i.includes("leading"),m=i==null||i.includes("trailing"),f=()=>{u!==null&&(r.apply(l,u),l=void 0,u=null)},p=()=>{m&&f(),b()};let y=null;const x=()=>{y!=null&&clearTimeout(y),y=setTimeout(()=>{y=null,p()},n)},j=()=>{y!==null&&(clearTimeout(y),y=null)},b=()=>{j(),l=void 0,u=null},S=()=>{f()},N=function(...E){if(s!=null&&s.aborted)return;l=this,u=E;const k=y==null;x(),d&&k&&f()};return N.schedule=x,N.cancel=b,N.flush=S,s==null||s.addEventListener("abort",b,{once:!0}),N}e.debounce=t})(Uy)),Uy}var uN;function PB(){return uN||(uN=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=AB();function r(n,s=0,i={}){typeof i!="object"&&(i={});const{leading:l=!1,trailing:u=!0,maxWait:d}=i,m=Array(2);l&&(m[0]="leading"),u&&(m[1]="trailing");let f,p=null;const y=t.debounce(function(...b){f=n.apply(this,b),p=null},s,{edges:m}),x=function(...b){return d!=null&&(p===null&&(p=Date.now()),Date.now()-p>=d)?(f=n.apply(this,b),p=Date.now(),y.cancel(),y.schedule(),f):(y.apply(this,b),f)},j=()=>(y.flush(),f);return x.cancel=y.cancel,x.flush=j,x}e.debounce=r})(By)),By}var dN;function OB(){return dN||(dN=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=PB();function r(n,s=0,i={}){const{leading:l=!0,trailing:u=!0}=i;return t.debounce(n,s,{leading:l,maxWait:s,trailing:u})}e.throttle=r})(zy)),zy}var Wy,fN;function TB(){return fN||(fN=1,Wy=OB().throttle),Wy}var IB=TB();const DB=_i(IB);var hN=function(t,r){for(var n=arguments.length,s=new Array(n>2?n-2:0),i=2;i<n;i++)s[i-2]=arguments[i]},UA=(e,t,r)=>{var{width:n="100%",height:s="100%",aspect:i,maxHeight:l}=r,u=pa(n)?e:Number(n),d=pa(s)?t:Number(s);return i&&i>0&&(u?d=u/i:d&&(u=d*i),l&&d!=null&&d>l&&(d=l)),{calculatedWidth:u,calculatedHeight:d}},RB={width:0,height:0,overflow:"visible"},$B={width:0,overflowX:"visible"},MB={height:0,overflowY:"visible"},FB={},LB=e=>{var{width:t,height:r}=e,n=pa(t),s=pa(r);return n&&s?RB:n?$B:s?MB:FB};function zB(e){var{width:t,height:r,aspect:n}=e,s=t,i=r;return s===void 0&&i===void 0?(s="100%",i="100%"):s===void 0?s=n&&n>0?void 0:"100%":i===void 0&&(i=n&&n>0?void 0:"100%"),{width:s,height:i}}function qr(e){return Number.isFinite(e)}function ro(e){return typeof e=="number"&&e>0&&Number.isFinite(e)}function c0(){return c0=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},c0.apply(null,arguments)}function mN(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function pN(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?mN(Object(r),!0).forEach(function(n){BB(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):mN(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function BB(e,t,r){return(t=UB(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function UB(e){var t=WB(e,"string");return typeof t=="symbol"?t:t+""}function WB(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var WA=v.createContext({width:-1,height:-1});function VB(e){return ro(e.width)&&ro(e.height)}function VA(e){var{children:t,width:r,height:n}=e,s=v.useMemo(()=>({width:r,height:n}),[r,n]);return VB(s)?v.createElement(WA.Provider,{value:s},t):null}var Ax=()=>v.useContext(WA),qB=v.forwardRef((e,t)=>{var{aspect:r,initialDimension:n={width:-1,height:-1},width:s,height:i,minWidth:l=0,minHeight:u,maxHeight:d,children:m,debounce:f=0,id:p,className:y,onResize:x,style:j={}}=e,b=v.useRef(null),S=v.useRef();S.current=x,v.useImperativeHandle(t,()=>b.current);var[N,E]=v.useState({containerWidth:n.width,containerHeight:n.height}),k=v.useCallback((q,F)=>{E(V=>{var B=Math.round(q),Q=Math.round(F);return V.containerWidth===B&&V.containerHeight===Q?V:{containerWidth:B,containerHeight:Q}})},[]);v.useEffect(()=>{if(b.current==null||typeof ResizeObserver>"u")return wc;var q=Q=>{var ae,{width:ne,height:me}=Q[0].contentRect;k(ne,me),(ae=S.current)===null||ae===void 0||ae.call(S,ne,me)};f>0&&(q=DB(q,f,{trailing:!0,leading:!1}));var F=new ResizeObserver(q),{width:V,height:B}=b.current.getBoundingClientRect();return k(V,B),F.observe(b.current),()=>{F.disconnect()}},[k,f]);var{containerWidth:T,containerHeight:O}=N;hN(!r||r>0,"The aspect(%s) must be greater than zero.",r);var{calculatedWidth:P,calculatedHeight:R}=UA(T,O,{width:s,height:i,aspect:r,maxHeight:d});return hN(P!=null&&P>0||R!=null&&R>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,P,R,s,i,l,u,r),v.createElement("div",{id:p?"".concat(p):void 0,className:jr("recharts-responsive-container",y),style:pN(pN({},j),{},{width:s,height:i,minWidth:l,minHeight:u,maxHeight:d}),ref:b},v.createElement("div",{style:LB({width:s,height:i})},v.createElement(VA,{width:P,height:R},m)))}),HB=v.forwardRef((e,t)=>{var r=Ax();if(ro(r.width)&&ro(r.height))return e.children;var{width:n,height:s}=zB({width:e.width,height:e.height,aspect:e.aspect}),{calculatedWidth:i,calculatedHeight:l}=UA(void 0,void 0,{width:n,height:s,aspect:e.aspect,maxHeight:e.maxHeight});return mt(i)&&mt(l)?v.createElement(VA,{width:i,height:l},e.children):v.createElement(qB,c0({},e,{width:n,height:s,ref:t}))});function qA(e){if(e)return{x:e.x,y:e.y,upperWidth:"upperWidth"in e?e.upperWidth:e.width,lowerWidth:"lowerWidth"in e?e.lowerWidth:e.width,width:e.width,height:e.height}}var wm=()=>{var e,t=Ws(),r=lt(CB),n=lt(xm),s=(e=lt(vm))===null||e===void 0?void 0:e.padding;return!t||!n||!s?r:{width:n.width-s.left-s.right,height:n.height-s.top-s.bottom,x:s.left,y:s.top}},KB={top:0,bottom:0,left:0,right:0,width:0,height:0,brushBottom:0},GB=()=>{var e;return(e=lt(On))!==null&&e!==void 0?e:KB},YB=()=>lt(Sa),JB=()=>lt(_a),er=e=>e.layout.layoutType,bm=()=>lt(er),QB=()=>{var e=bm();return e!==void 0},jm=e=>{var t=Hr(),r=Ws(),{width:n,height:s}=e,i=Ax(),l=n,u=s;return i&&(l=i.width>0?i.width:n,u=i.height>0?i.height:s),v.useEffect(()=>{!r&&ro(l)&&ro(u)&&t(J8({width:l,height:u}))},[t,r,l,u]),null},XB={settings:{layout:"horizontal",align:"center",verticalAlign:"middle",itemSorter:"value"},size:{width:0,height:0},payload:[]},HA=_s({name:"legend",initialState:XB,reducers:{setLegendSize(e,t){e.size.width=t.payload.width,e.size.height=t.payload.height},setLegendSettings(e,t){e.settings.align=t.payload.align,e.settings.layout=t.payload.layout,e.settings.verticalAlign=t.payload.verticalAlign,e.settings.itemSorter=t.payload.itemSorter},addLegendPayload:{reducer(e,t){e.payload.push(t.payload)},prepare:mn()},removeLegendPayload:{reducer(e,t){var r=ca(e).payload.indexOf(t.payload);r>-1&&e.payload.splice(r,1)},prepare:mn()}}}),{setLegendSize:ZZ,setLegendSettings:eee,addLegendPayload:ZB,removeLegendPayload:eU}=HA.actions,tU=HA.reducer;function u0(){return u0=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},u0.apply(null,arguments)}function gN(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Vy(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?gN(Object(r),!0).forEach(function(n){rU(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):gN(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function rU(e,t,r){return(t=nU(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function nU(e){var t=sU(e,"string");return typeof t=="symbol"?t:t+""}function sU(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function iU(e){return Array.isArray(e)&&Li(e[0])&&Li(e[1])?e.join(" ~ "):e}var aU=e=>{var{separator:t=" : ",contentStyle:r={},itemStyle:n={},labelStyle:s={},payload:i,formatter:l,itemSorter:u,wrapperClassName:d,labelClassName:m,label:f,labelFormatter:p,accessibilityLayer:y=!1}=e,x=()=>{if(i&&i.length){var O={padding:0,margin:0},P=(u?um(i,u):i).map((R,q)=>{if(R.type==="none")return null;var F=R.formatter||l||iU,{value:V,name:B}=R,Q=V,ae=B;if(F){var ne=F(V,B,R,q,i);if(Array.isArray(ne))[Q,ae]=ne;else if(ne!=null)Q=ne;else return null}var me=Vy({display:"block",paddingTop:4,paddingBottom:4,color:R.color||"#000"},n);return v.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(q),style:me},Li(ae)?v.createElement("span",{className:"recharts-tooltip-item-name"},ae):null,Li(ae)?v.createElement("span",{className:"recharts-tooltip-item-separator"},t):null,v.createElement("span",{className:"recharts-tooltip-item-value"},Q),v.createElement("span",{className:"recharts-tooltip-item-unit"},R.unit||""))});return v.createElement("ul",{className:"recharts-tooltip-item-list",style:O},P)}return null},j=Vy({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},r),b=Vy({margin:0},s),S=!Pn(f),N=S?f:"",E=jr("recharts-default-tooltip",d),k=jr("recharts-tooltip-label",m);S&&p&&i!==void 0&&i!==null&&(N=p(f,i));var T=y?{role:"status","aria-live":"assertive"}:{};return v.createElement("div",u0({className:E,style:j},T),v.createElement("p",{className:k,style:b},v.isValidElement(N)?N:"".concat(N)),x())},ou="recharts-tooltip-wrapper",oU={visibility:"hidden"};function lU(e){var{coordinate:t,translateX:r,translateY:n}=e;return jr(ou,{["".concat(ou,"-right")]:mt(r)&&t&&mt(t.x)&&r>=t.x,["".concat(ou,"-left")]:mt(r)&&t&&mt(t.x)&&r<t.x,["".concat(ou,"-bottom")]:mt(n)&&t&&mt(t.y)&&n>=t.y,["".concat(ou,"-top")]:mt(n)&&t&&mt(t.y)&&n<t.y})}function yN(e){var{allowEscapeViewBox:t,coordinate:r,key:n,offsetTopLeft:s,position:i,reverseDirection:l,tooltipDimension:u,viewBox:d,viewBoxDimension:m}=e;if(i&&mt(i[n]))return i[n];var f=r[n]-u-(s>0?s:0),p=r[n]+s;if(t[n])return l[n]?f:p;var y=d[n];if(y==null)return 0;if(l[n]){var x=f,j=y;return x<j?Math.max(p,y):Math.max(f,y)}if(m==null)return 0;var b=p+u,S=y+m;return b>S?Math.max(f,y):Math.max(p,y)}function cU(e){var{translateX:t,translateY:r,useTranslate3d:n}=e;return{transform:n?"translate3d(".concat(t,"px, ").concat(r,"px, 0)"):"translate(".concat(t,"px, ").concat(r,"px)")}}function uU(e){var{allowEscapeViewBox:t,coordinate:r,offsetTopLeft:n,position:s,reverseDirection:i,tooltipBox:l,useTranslate3d:u,viewBox:d}=e,m,f,p;return l.height>0&&l.width>0&&r?(f=yN({allowEscapeViewBox:t,coordinate:r,key:"x",offsetTopLeft:n,position:s,reverseDirection:i,tooltipDimension:l.width,viewBox:d,viewBoxDimension:d.width}),p=yN({allowEscapeViewBox:t,coordinate:r,key:"y",offsetTopLeft:n,position:s,reverseDirection:i,tooltipDimension:l.height,viewBox:d,viewBoxDimension:d.height}),m=cU({translateX:f,translateY:p,useTranslate3d:u})):m=oU,{cssProperties:m,cssClasses:lU({translateX:f,translateY:p,coordinate:r})}}function vN(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Cf(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?vN(Object(r),!0).forEach(function(n){d0(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):vN(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function d0(e,t,r){return(t=dU(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function dU(e){var t=fU(e,"string");return typeof t=="symbol"?t:t+""}function fU(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class hU extends v.PureComponent{constructor(){super(...arguments),d0(this,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0}}),d0(this,"handleKeyDown",t=>{if(t.key==="Escape"){var r,n,s,i;this.setState({dismissed:!0,dismissedAtCoordinate:{x:(r=(n=this.props.coordinate)===null||n===void 0?void 0:n.x)!==null&&r!==void 0?r:0,y:(s=(i=this.props.coordinate)===null||i===void 0?void 0:i.y)!==null&&s!==void 0?s:0}})}})}componentDidMount(){document.addEventListener("keydown",this.handleKeyDown)}componentWillUnmount(){document.removeEventListener("keydown",this.handleKeyDown)}componentDidUpdate(){var t,r;this.state.dismissed&&(((t=this.props.coordinate)===null||t===void 0?void 0:t.x)!==this.state.dismissedAtCoordinate.x||((r=this.props.coordinate)===null||r===void 0?void 0:r.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}render(){var{active:t,allowEscapeViewBox:r,animationDuration:n,animationEasing:s,children:i,coordinate:l,hasPayload:u,isAnimationActive:d,offset:m,position:f,reverseDirection:p,useTranslate3d:y,viewBox:x,wrapperStyle:j,lastBoundingBox:b,innerRef:S,hasPortalFromProps:N}=this.props,{cssClasses:E,cssProperties:k}=uU({allowEscapeViewBox:r,coordinate:l,offsetTopLeft:m,position:f,reverseDirection:p,tooltipBox:{height:b.height,width:b.width},useTranslate3d:y,viewBox:x}),T=N?{}:Cf(Cf({transition:d&&t?"transform ".concat(n,"ms ").concat(s):void 0},k),{},{pointerEvents:"none",visibility:!this.state.dismissed&&t&&u?"visible":"hidden",position:"absolute",top:0,left:0}),O=Cf(Cf({},T),{},{visibility:!this.state.dismissed&&t&&u?"visible":"hidden"},j);return v.createElement("div",{xmlns:"http://www.w3.org/1999/xhtml",tabIndex:-1,className:E,style:O,ref:S},i)}}var mU=()=>!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout),bc={devToolsEnabled:!1,isSsr:mU()},KA=()=>{var e;return(e=lt(t=>t.rootProps.accessibilityLayer))!==null&&e!==void 0?e:!0};function f0(){return f0=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},f0.apply(null,arguments)}function xN(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function wN(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?xN(Object(r),!0).forEach(function(n){pU(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):xN(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function pU(e,t,r){return(t=gU(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function gU(e){var t=yU(e,"string");return typeof t=="symbol"?t:t+""}function yU(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var bN={curveBasisClosed:NL,curveBasisOpen:kL,curveBasis:_L,curveBumpX:uL,curveBumpY:dL,curveLinearClosed:CL,curveLinear:lm,curveMonotoneX:EL,curveMonotoneY:AL,curveNatural:PL,curveStep:OL,curveStepAfter:IL,curveStepBefore:TL},bh=e=>qr(e.x)&&qr(e.y),jN=e=>e.base!=null&&bh(e.base)&&bh(e),lu=e=>e.x,cu=e=>e.y,vU=(e,t)=>{if(typeof e=="function")return e;var r="curve".concat(Xu(e));return(r==="curveMonotone"||r==="curveBump")&&t?bN["".concat(r).concat(t==="vertical"?"Y":"X")]:bN[r]||lm},xU=e=>{var{type:t="linear",points:r=[],baseLine:n,layout:s,connectNulls:i=!1}=e,l=vU(t,s),u=i?r.filter(bh):r,d;if(Array.isArray(n)){var m=r.map((x,j)=>wN(wN({},x),{},{base:n[j]}));s==="vertical"?d=wf().y(cu).x1(lu).x0(x=>x.base.x):d=wf().x(lu).y1(cu).y0(x=>x.base.y);var f=d.defined(jN).curve(l),p=i?m.filter(jN):m;return f(p)}s==="vertical"&&mt(n)?d=wf().y(cu).x1(lu).x0(n):mt(n)?d=wf().x(lu).y1(cu).y0(n):d=FE().x(lu).y(cu);var y=d.defined(bh).curve(l);return y(u)},GA=e=>{var{className:t,points:r,path:n,pathRef:s}=e;if((!r||!r.length)&&!n)return null;var i=r&&r.length?xU(e):n;return v.createElement("path",f0({},to(e),nz(e),{className:jr("recharts-curve",t),d:i===null?void 0:i,ref:s}))},wU=["x","y","top","left","width","height","className"];function h0(){return h0=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},h0.apply(null,arguments)}function SN(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function bU(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?SN(Object(r),!0).forEach(function(n){jU(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):SN(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function jU(e,t,r){return(t=SU(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function SU(e){var t=_U(e,"string");return typeof t=="symbol"?t:t+""}function _U(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function NU(e,t){if(e==null)return{};var r,n,s=kU(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function kU(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var CU=(e,t,r,n,s,i)=>"M".concat(e,",").concat(s,"v").concat(n,"M").concat(i,",").concat(t,"h").concat(r),EU=e=>{var{x:t=0,y:r=0,top:n=0,left:s=0,width:i=0,height:l=0,className:u}=e,d=NU(e,wU),m=bU({x:t,y:r,top:n,left:s,width:i,height:l},d);return!mt(t)||!mt(r)||!mt(i)||!mt(l)||!mt(n)||!mt(s)?null:v.createElement("path",h0({},ri(m),{className:jr("recharts-cross",u),d:CU(t,r,i,l,n,s)}))};function AU(e,t,r,n){var s=n/2;return{stroke:"none",fill:"#ccc",x:e==="horizontal"?t.x-s:r.left+.5,y:e==="horizontal"?r.top+.5:t.y-s,width:e==="horizontal"?n:r.width-1,height:e==="horizontal"?r.height-1:n}}function _N(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function NN(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?_N(Object(r),!0).forEach(function(n){PU(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):_N(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function PU(e,t,r){return(t=OU(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function OU(e){var t=TU(e,"string");return typeof t=="symbol"?t:t+""}function TU(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var IU=e=>e.replace(/([A-Z])/g,t=>"-".concat(t.toLowerCase())),YA=(e,t,r)=>e.map(n=>"".concat(IU(n)," ").concat(t,"ms ").concat(r)).join(","),DU=(e,t)=>[Object.keys(e),Object.keys(t)].reduce((r,n)=>r.filter(s=>n.includes(s))),Mu=(e,t)=>Object.keys(t).reduce((r,n)=>NN(NN({},r),{},{[n]:e(n,t[n])}),{});function kN(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function hn(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?kN(Object(r),!0).forEach(function(n){RU(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):kN(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function RU(e,t,r){return(t=$U(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function $U(e){var t=MU(e,"string");return typeof t=="symbol"?t:t+""}function MU(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var jh=(e,t,r)=>e+(t-e)*r,m0=e=>{var{from:t,to:r}=e;return t!==r},JA=(e,t,r)=>{var n=Mu((s,i)=>{if(m0(i)){var[l,u]=e(i.from,i.to,i.velocity);return hn(hn({},i),{},{from:l,velocity:u})}return i},t);return r<1?Mu((s,i)=>m0(i)?hn(hn({},i),{},{velocity:jh(i.velocity,n[s].velocity,r),from:jh(i.from,n[s].from,r)}):i,t):JA(e,n,r-1)};function FU(e,t,r,n,s,i){var l,u=n.reduce((y,x)=>hn(hn({},y),{},{[x]:{from:e[x],velocity:0,to:t[x]}}),{}),d=()=>Mu((y,x)=>x.from,u),m=()=>!Object.values(u).filter(m0).length,f=null,p=y=>{l||(l=y);var x=y-l,j=x/r.dt;u=JA(r,u,j),s(hn(hn(hn({},e),t),d())),l=y,m()||(f=i.setTimeout(p))};return()=>(f=i.setTimeout(p),()=>{var y;(y=f)===null||y===void 0||y()})}function LU(e,t,r,n,s,i,l){var u=null,d=s.reduce((p,y)=>hn(hn({},p),{},{[y]:[e[y],t[y]]}),{}),m,f=p=>{m||(m=p);var y=(p-m)/n,x=Mu((b,S)=>jh(...S,r(y)),d);if(i(hn(hn(hn({},e),t),x)),y<1)u=l.setTimeout(f);else{var j=Mu((b,S)=>jh(...S,r(1)),d);i(hn(hn(hn({},e),t),j))}};return()=>(u=l.setTimeout(f),()=>{var p;(p=u)===null||p===void 0||p()})}const zU=(e,t,r,n,s,i)=>{var l=DU(e,t);return r==null?()=>(s(hn(hn({},e),t)),()=>{}):r.isStepper===!0?FU(e,t,r,l,s,i):LU(e,t,r,n,l,s,i)};var Sh=1e-4,QA=(e,t)=>[0,3*e,3*t-6*e,3*e-3*t+1],XA=(e,t)=>e.map((r,n)=>r*t**n).reduce((r,n)=>r+n),CN=(e,t)=>r=>{var n=QA(e,t);return XA(n,r)},BU=(e,t)=>r=>{var n=QA(e,t),s=[...n.map((i,l)=>i*l).slice(1),0];return XA(s,r)},UU=function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];if(r.length===1)switch(r[0]){case"linear":return[0,0,1,1];case"ease":return[.25,.1,.25,1];case"ease-in":return[.42,0,1,1];case"ease-out":return[.42,0,.58,1];case"ease-in-out":return[0,0,.58,1];default:{var s,i=r[0].split("(");if(i[0]==="cubic-bezier"&&((s=i[1])===null||s===void 0?void 0:s.split(")")[0].split(",").length)===4){var l=i[1].split(")")[0].split(",").map(u=>parseFloat(u));return[l[0],l[1],l[2],l[3]]}}}return r.length===4?r:[0,0,1,1]},WU=(e,t,r,n)=>{var s=CN(e,r),i=CN(t,n),l=BU(e,r),u=m=>m>1?1:m<0?0:m,d=m=>{for(var f=m>1?1:m,p=f,y=0;y<8;++y){var x=s(p)-f,j=l(p);if(Math.abs(x-f)<Sh||j<Sh)return i(p);p=u(p-x/j)}return i(p)};return d.isStepper=!1,d},EN=function(){return WU(...UU(...arguments))},VU=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},{stiff:r=100,damping:n=8,dt:s=17}=t,i=(l,u,d)=>{var m=-(l-u)*r,f=d*n,p=d+(m-f)*s/1e3,y=d*s/1e3+l;return Math.abs(y-u)<Sh&&Math.abs(p)<Sh?[u,0]:[y,p]};return i.isStepper=!0,i.dt=s,i},qU=e=>{if(typeof e=="string")switch(e){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return EN(e);case"spring":return VU();default:if(e.split("(")[0]==="cubic-bezier")return EN(e)}return typeof e=="function"?e:null};function HU(e){var t,r=()=>null,n=!1,s=null,i=l=>{if(!n){if(Array.isArray(l)){if(!l.length)return;var u=l,[d,...m]=u;if(typeof d=="number"){s=e.setTimeout(i.bind(null,m),d);return}i(d),s=e.setTimeout(i.bind(null,m));return}typeof l=="string"&&(t=l,r(t)),typeof l=="object"&&(t=l,r(t)),typeof l=="function"&&l()}};return{stop:()=>{n=!0},start:l=>{n=!1,s&&(s(),s=null),i(l)},subscribe:l=>(r=l,()=>{r=()=>null}),getTimeoutController:()=>e}}class KU{setTimeout(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=performance.now(),s=null,i=l=>{l-n>=r?t(l):typeof requestAnimationFrame=="function"&&(s=requestAnimationFrame(i))};return s=requestAnimationFrame(i),()=>{s!=null&&cancelAnimationFrame(s)}}}function GU(){return HU(new KU)}var YU=v.createContext(GU);function JU(e,t){var r=v.useContext(YU);return v.useMemo(()=>t??r(e),[e,t,r])}var QU={begin:0,duration:1e3,easing:"ease",isActive:!0,canBegin:!0,onAnimationEnd:()=>{},onAnimationStart:()=>{}},AN={t:0},qy={t:1};function Px(e){var t=ii(e,QU),{isActive:r,canBegin:n,duration:s,easing:i,begin:l,onAnimationEnd:u,onAnimationStart:d,children:m}=t,f=JU(t.animationId,t.animationManager),[p,y]=v.useState(r?AN:qy),x=v.useRef(null);return v.useEffect(()=>{r||y(qy)},[r]),v.useEffect(()=>{if(!r||!n)return wc;var j=zU(AN,qy,qU(i),s,y,f.getTimeoutController()),b=()=>{x.current=j()};return f.start([d,l,b,s,u]),()=>{f.stop(),x.current&&x.current(),u()}},[r,n,s,i,l,d,u,f]),m(p.t)}function Ox(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"animation-",r=v.useRef(Iu(t)),n=v.useRef(e);return n.current!==e&&(r.current=Iu(t),n.current=e),r.current}var XU=["radius"],ZU=["radius"];function PN(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function ON(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?PN(Object(r),!0).forEach(function(n){e7(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):PN(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function e7(e,t,r){return(t=t7(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function t7(e){var t=r7(e,"string");return typeof t=="symbol"?t:t+""}function r7(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function _h(){return _h=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},_h.apply(null,arguments)}function TN(e,t){if(e==null)return{};var r,n,s=n7(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function n7(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var IN=(e,t,r,n,s)=>{var i=Math.min(Math.abs(r)/2,Math.abs(n)/2),l=n>=0?1:-1,u=r>=0?1:-1,d=n>=0&&r>=0||n<0&&r<0?1:0,m;if(i>0&&s instanceof Array){for(var f=[0,0,0,0],p=0,y=4;p<y;p++)f[p]=s[p]>i?i:s[p];m="M".concat(e,",").concat(t+l*f[0]),f[0]>0&&(m+="A ".concat(f[0],",").concat(f[0],",0,0,").concat(d,",").concat(e+u*f[0],",").concat(t)),m+="L ".concat(e+r-u*f[1],",").concat(t),f[1]>0&&(m+="A ".concat(f[1],",").concat(f[1],",0,0,").concat(d,`,
        `).concat(e+r,",").concat(t+l*f[1])),m+="L ".concat(e+r,",").concat(t+n-l*f[2]),f[2]>0&&(m+="A ".concat(f[2],",").concat(f[2],",0,0,").concat(d,`,
        `).concat(e+r-u*f[2],",").concat(t+n)),m+="L ".concat(e+u*f[3],",").concat(t+n),f[3]>0&&(m+="A ".concat(f[3],",").concat(f[3],",0,0,").concat(d,`,
        `).concat(e,",").concat(t+n-l*f[3])),m+="Z"}else if(i>0&&s===+s&&s>0){var x=Math.min(i,s);m="M ".concat(e,",").concat(t+l*x,`
            A `).concat(x,",").concat(x,",0,0,").concat(d,",").concat(e+u*x,",").concat(t,`
            L `).concat(e+r-u*x,",").concat(t,`
            A `).concat(x,",").concat(x,",0,0,").concat(d,",").concat(e+r,",").concat(t+l*x,`
            L `).concat(e+r,",").concat(t+n-l*x,`
            A `).concat(x,",").concat(x,",0,0,").concat(d,",").concat(e+r-u*x,",").concat(t+n,`
            L `).concat(e+u*x,",").concat(t+n,`
            A `).concat(x,",").concat(x,",0,0,").concat(d,",").concat(e,",").concat(t+n-l*x," Z")}else m="M ".concat(e,",").concat(t," h ").concat(r," v ").concat(n," h ").concat(-r," Z");return m},DN={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},ZA=e=>{var t=ii(e,DN),r=v.useRef(null),[n,s]=v.useState(-1);v.useEffect(()=>{if(r.current&&r.current.getTotalLength)try{var te=r.current.getTotalLength();te&&s(te)}catch{}},[]);var{x:i,y:l,width:u,height:d,radius:m,className:f}=t,{animationEasing:p,animationDuration:y,animationBegin:x,isAnimationActive:j,isUpdateAnimationActive:b}=t,S=v.useRef(u),N=v.useRef(d),E=v.useRef(i),k=v.useRef(l),T=v.useMemo(()=>({x:i,y:l,width:u,height:d,radius:m}),[i,l,u,d,m]),O=Ox(T,"rectangle-");if(i!==+i||l!==+l||u!==+u||d!==+d||u===0||d===0)return null;var P=jr("recharts-rectangle",f);if(!b){var R=ri(t),{radius:q}=R,F=TN(R,XU);return v.createElement("path",_h({},F,{radius:typeof m=="number"?m:void 0,className:P,d:IN(i,l,u,d,m)}))}var V=S.current,B=N.current,Q=E.current,ae=k.current,ne="0px ".concat(n===-1?1:n,"px"),me="".concat(n,"px 0px"),K=YA(["strokeDasharray"],y,typeof p=="string"?p:DN.animationEasing);return v.createElement(Px,{animationId:O,key:O,canBegin:n>0,duration:y,easing:p,isActive:b,begin:x},te=>{var se=Bn(V,u,te),de=Bn(B,d,te),xe=Bn(Q,i,te),I=Bn(ae,l,te);r.current&&(S.current=se,N.current=de,E.current=xe,k.current=I);var H;j?te>0?H={transition:K,strokeDasharray:me}:H={strokeDasharray:ne}:H={strokeDasharray:me};var Ie=ri(t),{radius:X}=Ie,ve=TN(Ie,ZU);return v.createElement("path",_h({},ve,{radius:typeof m=="number"?m:void 0,className:P,d:IN(xe,I,se,de,m),ref:r,style:ON(ON({},H),t.style)}))})};function RN(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function $N(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?RN(Object(r),!0).forEach(function(n){s7(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):RN(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function s7(e,t,r){return(t=i7(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function i7(e){var t=a7(e,"string");return typeof t=="symbol"?t:t+""}function a7(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Nh=Math.PI/180,o7=e=>e*180/Math.PI,Wn=(e,t,r,n)=>({x:e+Math.cos(-Nh*n)*r,y:t+Math.sin(-Nh*n)*r}),l7=function(t,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{top:0,right:0,bottom:0,left:0};return Math.min(Math.abs(t-(n.left||0)-(n.right||0)),Math.abs(r-(n.top||0)-(n.bottom||0)))/2},c7=(e,t)=>{var{x:r,y:n}=e,{x:s,y:i}=t;return Math.sqrt((r-s)**2+(n-i)**2)},u7=(e,t)=>{var{x:r,y:n}=e,{cx:s,cy:i}=t,l=c7({x:r,y:n},{x:s,y:i});if(l<=0)return{radius:l,angle:0};var u=(r-s)/l,d=Math.acos(u);return n>i&&(d=2*Math.PI-d),{radius:l,angle:o7(d),angleInRadian:d}},d7=e=>{var{startAngle:t,endAngle:r}=e,n=Math.floor(t/360),s=Math.floor(r/360),i=Math.min(n,s);return{startAngle:t-i*360,endAngle:r-i*360}},f7=(e,t)=>{var{startAngle:r,endAngle:n}=t,s=Math.floor(r/360),i=Math.floor(n/360),l=Math.min(s,i);return e+l*360},h7=(e,t)=>{var{chartX:r,chartY:n}=e,{radius:s,angle:i}=u7({x:r,y:n},t),{innerRadius:l,outerRadius:u}=t;if(s<l||s>u||s===0)return null;var{startAngle:d,endAngle:m}=d7(t),f=i,p;if(d<=m){for(;f>m;)f-=360;for(;f<d;)f+=360;p=f>=d&&f<=m}else{for(;f>d;)f-=360;for(;f<m;)f+=360;p=f>=m&&f<=d}return p?$N($N({},t),{},{radius:s,angle:f7(f,t)}):null};function eP(e){var{cx:t,cy:r,radius:n,startAngle:s,endAngle:i}=e,l=Wn(t,r,n,s),u=Wn(t,r,n,i);return{points:[l,u],cx:t,cy:r,radius:n,startAngle:s,endAngle:i}}function p0(){return p0=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},p0.apply(null,arguments)}var m7=(e,t)=>{var r=Ls(t-e),n=Math.min(Math.abs(t-e),359.999);return r*n},Ef=e=>{var{cx:t,cy:r,radius:n,angle:s,sign:i,isExternal:l,cornerRadius:u,cornerIsExternal:d}=e,m=u*(l?1:-1)+n,f=Math.asin(u/m)/Nh,p=d?s:s+i*f,y=Wn(t,r,m,p),x=Wn(t,r,n,p),j=d?s-i*f:s,b=Wn(t,r,m*Math.cos(f*Nh),j);return{center:y,circleTangency:x,lineTangency:b,theta:f}},tP=e=>{var{cx:t,cy:r,innerRadius:n,outerRadius:s,startAngle:i,endAngle:l}=e,u=m7(i,l),d=i+u,m=Wn(t,r,s,i),f=Wn(t,r,s,d),p="M ".concat(m.x,",").concat(m.y,`
    A `).concat(s,",").concat(s,`,0,
    `).concat(+(Math.abs(u)>180),",").concat(+(i>d),`,
    `).concat(f.x,",").concat(f.y,`
  `);if(n>0){var y=Wn(t,r,n,i),x=Wn(t,r,n,d);p+="L ".concat(x.x,",").concat(x.y,`
            A `).concat(n,",").concat(n,`,0,
            `).concat(+(Math.abs(u)>180),",").concat(+(i<=d),`,
            `).concat(y.x,",").concat(y.y," Z")}else p+="L ".concat(t,",").concat(r," Z");return p},p7=e=>{var{cx:t,cy:r,innerRadius:n,outerRadius:s,cornerRadius:i,forceCornerRadius:l,cornerIsExternal:u,startAngle:d,endAngle:m}=e,f=Ls(m-d),{circleTangency:p,lineTangency:y,theta:x}=Ef({cx:t,cy:r,radius:s,angle:d,sign:f,cornerRadius:i,cornerIsExternal:u}),{circleTangency:j,lineTangency:b,theta:S}=Ef({cx:t,cy:r,radius:s,angle:m,sign:-f,cornerRadius:i,cornerIsExternal:u}),N=u?Math.abs(d-m):Math.abs(d-m)-x-S;if(N<0)return l?"M ".concat(y.x,",").concat(y.y,`
        a`).concat(i,",").concat(i,",0,0,1,").concat(i*2,`,0
        a`).concat(i,",").concat(i,",0,0,1,").concat(-i*2,`,0
      `):tP({cx:t,cy:r,innerRadius:n,outerRadius:s,startAngle:d,endAngle:m});var E="M ".concat(y.x,",").concat(y.y,`
    A`).concat(i,",").concat(i,",0,0,").concat(+(f<0),",").concat(p.x,",").concat(p.y,`
    A`).concat(s,",").concat(s,",0,").concat(+(N>180),",").concat(+(f<0),",").concat(j.x,",").concat(j.y,`
    A`).concat(i,",").concat(i,",0,0,").concat(+(f<0),",").concat(b.x,",").concat(b.y,`
  `);if(n>0){var{circleTangency:k,lineTangency:T,theta:O}=Ef({cx:t,cy:r,radius:n,angle:d,sign:f,isExternal:!0,cornerRadius:i,cornerIsExternal:u}),{circleTangency:P,lineTangency:R,theta:q}=Ef({cx:t,cy:r,radius:n,angle:m,sign:-f,isExternal:!0,cornerRadius:i,cornerIsExternal:u}),F=u?Math.abs(d-m):Math.abs(d-m)-O-q;if(F<0&&i===0)return"".concat(E,"L").concat(t,",").concat(r,"Z");E+="L".concat(R.x,",").concat(R.y,`
      A`).concat(i,",").concat(i,",0,0,").concat(+(f<0),",").concat(P.x,",").concat(P.y,`
      A`).concat(n,",").concat(n,",0,").concat(+(F>180),",").concat(+(f>0),",").concat(k.x,",").concat(k.y,`
      A`).concat(i,",").concat(i,",0,0,").concat(+(f<0),",").concat(T.x,",").concat(T.y,"Z")}else E+="L".concat(t,",").concat(r,"Z");return E},g7={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},rP=e=>{var t=ii(e,g7),{cx:r,cy:n,innerRadius:s,outerRadius:i,cornerRadius:l,forceCornerRadius:u,cornerIsExternal:d,startAngle:m,endAngle:f,className:p}=t;if(i<s||m===f)return null;var y=jr("recharts-sector",p),x=i-s,j=Si(l,x,0,!0),b;return j>0&&Math.abs(m-f)<360?b=p7({cx:r,cy:n,innerRadius:s,outerRadius:i,cornerRadius:Math.min(j,x/2),forceCornerRadius:u,cornerIsExternal:d,startAngle:m,endAngle:f}):b=tP({cx:r,cy:n,innerRadius:s,outerRadius:i,startAngle:m,endAngle:f}),v.createElement("path",p0({},ri(t),{className:y,d:b}))};function y7(e,t,r){if(e==="horizontal")return[{x:t.x,y:r.top},{x:t.x,y:r.top+r.height}];if(e==="vertical")return[{x:r.left,y:t.y},{x:r.left+r.width,y:t.y}];if(ZE(t)){if(e==="centric"){var{cx:n,cy:s,innerRadius:i,outerRadius:l,angle:u}=t,d=Wn(n,s,i,u),m=Wn(n,s,l,u);return[{x:d.x,y:d.y},{x:m.x,y:m.y}]}return eP(t)}}var Hy={},Ky={},Gy={},MN;function v7(){return MN||(MN=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=uA();function r(n){return t.isSymbol(n)?NaN:Number(n)}e.toNumber=r})(Gy)),Gy}var FN;function x7(){return FN||(FN=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=v7();function r(n){return n?(n=t.toNumber(n),n===1/0||n===-1/0?(n<0?-1:1)*Number.MAX_VALUE:n===n?n:0):n===0?n:0}e.toFinite=r})(Ky)),Ky}var LN;function w7(){return LN||(LN=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=dA(),r=x7();function n(s,i,l){l&&typeof l!="number"&&t.isIterateeCall(s,i,l)&&(i=l=void 0),s=r.toFinite(s),i===void 0?(i=s,s=0):i=r.toFinite(i),l=l===void 0?s<i?1:-1:r.toFinite(l);const u=Math.max(Math.ceil((i-s)/(l||1)),0),d=new Array(u);for(let m=0;m<u;m++)d[m]=s,s+=l;return d}e.range=n})(Hy)),Hy}var Yy,zN;function b7(){return zN||(zN=1,Yy=w7().range),Yy}var j7=b7();const nP=_i(j7);function eo(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function S7(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function Tx(e){let t,r,n;e.length!==2?(t=eo,r=(u,d)=>eo(e(u),d),n=(u,d)=>e(u)-d):(t=e===eo||e===S7?e:_7,r=e,n=e);function s(u,d,m=0,f=u.length){if(m<f){if(t(d,d)!==0)return f;do{const p=m+f>>>1;r(u[p],d)<0?m=p+1:f=p}while(m<f)}return m}function i(u,d,m=0,f=u.length){if(m<f){if(t(d,d)!==0)return f;do{const p=m+f>>>1;r(u[p],d)<=0?m=p+1:f=p}while(m<f)}return m}function l(u,d,m=0,f=u.length){const p=s(u,d,m,f-1);return p>m&&n(u[p-1],d)>-n(u[p],d)?p-1:p}return{left:s,center:l,right:i}}function _7(){return 0}function sP(e){return e===null?NaN:+e}function*N7(e,t){for(let r of e)r!=null&&(r=+r)>=r&&(yield r)}const k7=Tx(eo),rd=k7.right;Tx(sP).center;class BN extends Map{constructor(t,r=A7){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:r}}),t!=null)for(const[n,s]of t)this.set(n,s)}get(t){return super.get(UN(this,t))}has(t){return super.has(UN(this,t))}set(t,r){return super.set(C7(this,t),r)}delete(t){return super.delete(E7(this,t))}}function UN({_intern:e,_key:t},r){const n=t(r);return e.has(n)?e.get(n):r}function C7({_intern:e,_key:t},r){const n=t(r);return e.has(n)?e.get(n):(e.set(n,r),r)}function E7({_intern:e,_key:t},r){const n=t(r);return e.has(n)&&(r=e.get(n),e.delete(n)),r}function A7(e){return e!==null&&typeof e=="object"?e.valueOf():e}function P7(e=eo){if(e===eo)return iP;if(typeof e!="function")throw new TypeError("compare is not a function");return(t,r)=>{const n=e(t,r);return n||n===0?n:(e(r,r)===0)-(e(t,t)===0)}}function iP(e,t){return(e==null||!(e>=e))-(t==null||!(t>=t))||(e<t?-1:e>t?1:0)}const O7=Math.sqrt(50),T7=Math.sqrt(10),I7=Math.sqrt(2);function kh(e,t,r){const n=(t-e)/Math.max(0,r),s=Math.floor(Math.log10(n)),i=n/Math.pow(10,s),l=i>=O7?10:i>=T7?5:i>=I7?2:1;let u,d,m;return s<0?(m=Math.pow(10,-s)/l,u=Math.round(e*m),d=Math.round(t*m),u/m<e&&++u,d/m>t&&--d,m=-m):(m=Math.pow(10,s)*l,u=Math.round(e/m),d=Math.round(t/m),u*m<e&&++u,d*m>t&&--d),d<u&&.5<=r&&r<2?kh(e,t,r*2):[u,d,m]}function g0(e,t,r){if(t=+t,e=+e,r=+r,!(r>0))return[];if(e===t)return[e];const n=t<e,[s,i,l]=n?kh(t,e,r):kh(e,t,r);if(!(i>=s))return[];const u=i-s+1,d=new Array(u);if(n)if(l<0)for(let m=0;m<u;++m)d[m]=(i-m)/-l;else for(let m=0;m<u;++m)d[m]=(i-m)*l;else if(l<0)for(let m=0;m<u;++m)d[m]=(s+m)/-l;else for(let m=0;m<u;++m)d[m]=(s+m)*l;return d}function y0(e,t,r){return t=+t,e=+e,r=+r,kh(e,t,r)[2]}function v0(e,t,r){t=+t,e=+e,r=+r;const n=t<e,s=n?y0(t,e,r):y0(e,t,r);return(n?-1:1)*(s<0?1/-s:s)}function WN(e,t){let r;for(const n of e)n!=null&&(r<n||r===void 0&&n>=n)&&(r=n);return r}function VN(e,t){let r;for(const n of e)n!=null&&(r>n||r===void 0&&n>=n)&&(r=n);return r}function aP(e,t,r=0,n=1/0,s){if(t=Math.floor(t),r=Math.floor(Math.max(0,r)),n=Math.floor(Math.min(e.length-1,n)),!(r<=t&&t<=n))return e;for(s=s===void 0?iP:P7(s);n>r;){if(n-r>600){const d=n-r+1,m=t-r+1,f=Math.log(d),p=.5*Math.exp(2*f/3),y=.5*Math.sqrt(f*p*(d-p)/d)*(m-d/2<0?-1:1),x=Math.max(r,Math.floor(t-m*p/d+y)),j=Math.min(n,Math.floor(t+(d-m)*p/d+y));aP(e,t,x,j,s)}const i=e[t];let l=r,u=n;for(uu(e,r,t),s(e[n],i)>0&&uu(e,r,n);l<u;){for(uu(e,l,u),++l,--u;s(e[l],i)<0;)++l;for(;s(e[u],i)>0;)--u}s(e[r],i)===0?uu(e,r,u):(++u,uu(e,u,n)),u<=t&&(r=u+1),t<=u&&(n=u-1)}return e}function uu(e,t,r){const n=e[t];e[t]=e[r],e[r]=n}function D7(e,t,r){if(e=Float64Array.from(N7(e)),!(!(n=e.length)||isNaN(t=+t))){if(t<=0||n<2)return VN(e);if(t>=1)return WN(e);var n,s=(n-1)*t,i=Math.floor(s),l=WN(aP(e,i).subarray(0,i+1)),u=VN(e.subarray(i+1));return l+(u-l)*(s-i)}}function R7(e,t,r=sP){if(!(!(n=e.length)||isNaN(t=+t))){if(t<=0||n<2)return+r(e[0],0,e);if(t>=1)return+r(e[n-1],n-1,e);var n,s=(n-1)*t,i=Math.floor(s),l=+r(e[i],i,e),u=+r(e[i+1],i+1,e);return l+(u-l)*(s-i)}}function $7(e,t,r){e=+e,t=+t,r=(s=arguments.length)<2?(t=e,e=0,1):s<3?1:+r;for(var n=-1,s=Math.max(0,Math.ceil((t-e)/r))|0,i=new Array(s);++n<s;)i[n]=e+n*r;return i}function ai(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}function Na(e,t){switch(arguments.length){case 0:break;case 1:{typeof e=="function"?this.interpolator(e):this.range(e);break}default:{this.domain(e),typeof t=="function"?this.interpolator(t):this.range(t);break}}return this}const x0=Symbol("implicit");function Ix(){var e=new BN,t=[],r=[],n=x0;function s(i){let l=e.get(i);if(l===void 0){if(n!==x0)return n;e.set(i,l=t.push(i)-1)}return r[l%r.length]}return s.domain=function(i){if(!arguments.length)return t.slice();t=[],e=new BN;for(const l of i)e.has(l)||e.set(l,t.push(l)-1);return s},s.range=function(i){return arguments.length?(r=Array.from(i),s):r.slice()},s.unknown=function(i){return arguments.length?(n=i,s):n},s.copy=function(){return Ix(t,r).unknown(n)},ai.apply(s,arguments),s}function Dx(){var e=Ix().unknown(void 0),t=e.domain,r=e.range,n=0,s=1,i,l,u=!1,d=0,m=0,f=.5;delete e.unknown;function p(){var y=t().length,x=s<n,j=x?s:n,b=x?n:s;i=(b-j)/Math.max(1,y-d+m*2),u&&(i=Math.floor(i)),j+=(b-j-i*(y-d))*f,l=i*(1-d),u&&(j=Math.round(j),l=Math.round(l));var S=$7(y).map(function(N){return j+i*N});return r(x?S.reverse():S)}return e.domain=function(y){return arguments.length?(t(y),p()):t()},e.range=function(y){return arguments.length?([n,s]=y,n=+n,s=+s,p()):[n,s]},e.rangeRound=function(y){return[n,s]=y,n=+n,s=+s,u=!0,p()},e.bandwidth=function(){return l},e.step=function(){return i},e.round=function(y){return arguments.length?(u=!!y,p()):u},e.padding=function(y){return arguments.length?(d=Math.min(1,m=+y),p()):d},e.paddingInner=function(y){return arguments.length?(d=Math.min(1,y),p()):d},e.paddingOuter=function(y){return arguments.length?(m=+y,p()):m},e.align=function(y){return arguments.length?(f=Math.max(0,Math.min(1,y)),p()):f},e.copy=function(){return Dx(t(),[n,s]).round(u).paddingInner(d).paddingOuter(m).align(f)},ai.apply(p(),arguments)}function oP(e){var t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,delete e.paddingOuter,e.copy=function(){return oP(t())},e}function M7(){return oP(Dx.apply(null,arguments).paddingInner(1))}function Rx(e,t,r){e.prototype=t.prototype=r,r.constructor=e}function lP(e,t){var r=Object.create(e.prototype);for(var n in t)r[n]=t[n];return r}function nd(){}var Fu=.7,Ch=1/Fu,ec="\\s*([+-]?\\d+)\\s*",Lu="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Mi="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",F7=/^#([0-9a-f]{3,8})$/,L7=new RegExp(`^rgb\\(${ec},${ec},${ec}\\)$`),z7=new RegExp(`^rgb\\(${Mi},${Mi},${Mi}\\)$`),B7=new RegExp(`^rgba\\(${ec},${ec},${ec},${Lu}\\)$`),U7=new RegExp(`^rgba\\(${Mi},${Mi},${Mi},${Lu}\\)$`),W7=new RegExp(`^hsl\\(${Lu},${Mi},${Mi}\\)$`),V7=new RegExp(`^hsla\\(${Lu},${Mi},${Mi},${Lu}\\)$`),qN={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Rx(nd,zu,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:HN,formatHex:HN,formatHex8:q7,formatHsl:H7,formatRgb:KN,toString:KN});function HN(){return this.rgb().formatHex()}function q7(){return this.rgb().formatHex8()}function H7(){return cP(this).formatHsl()}function KN(){return this.rgb().formatRgb()}function zu(e){var t,r;return e=(e+"").trim().toLowerCase(),(t=F7.exec(e))?(r=t[1].length,t=parseInt(t[1],16),r===6?GN(t):r===3?new bs(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):r===8?Af(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):r===4?Af(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=L7.exec(e))?new bs(t[1],t[2],t[3],1):(t=z7.exec(e))?new bs(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=B7.exec(e))?Af(t[1],t[2],t[3],t[4]):(t=U7.exec(e))?Af(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=W7.exec(e))?QN(t[1],t[2]/100,t[3]/100,1):(t=V7.exec(e))?QN(t[1],t[2]/100,t[3]/100,t[4]):qN.hasOwnProperty(e)?GN(qN[e]):e==="transparent"?new bs(NaN,NaN,NaN,0):null}function GN(e){return new bs(e>>16&255,e>>8&255,e&255,1)}function Af(e,t,r,n){return n<=0&&(e=t=r=NaN),new bs(e,t,r,n)}function K7(e){return e instanceof nd||(e=zu(e)),e?(e=e.rgb(),new bs(e.r,e.g,e.b,e.opacity)):new bs}function w0(e,t,r,n){return arguments.length===1?K7(e):new bs(e,t,r,n??1)}function bs(e,t,r,n){this.r=+e,this.g=+t,this.b=+r,this.opacity=+n}Rx(bs,w0,lP(nd,{brighter(e){return e=e==null?Ch:Math.pow(Ch,e),new bs(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?Fu:Math.pow(Fu,e),new bs(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new bs(zo(this.r),zo(this.g),zo(this.b),Eh(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:YN,formatHex:YN,formatHex8:G7,formatRgb:JN,toString:JN}));function YN(){return`#${Io(this.r)}${Io(this.g)}${Io(this.b)}`}function G7(){return`#${Io(this.r)}${Io(this.g)}${Io(this.b)}${Io((isNaN(this.opacity)?1:this.opacity)*255)}`}function JN(){const e=Eh(this.opacity);return`${e===1?"rgb(":"rgba("}${zo(this.r)}, ${zo(this.g)}, ${zo(this.b)}${e===1?")":`, ${e})`}`}function Eh(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function zo(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function Io(e){return e=zo(e),(e<16?"0":"")+e.toString(16)}function QN(e,t,r,n){return n<=0?e=t=r=NaN:r<=0||r>=1?e=t=NaN:t<=0&&(e=NaN),new wi(e,t,r,n)}function cP(e){if(e instanceof wi)return new wi(e.h,e.s,e.l,e.opacity);if(e instanceof nd||(e=zu(e)),!e)return new wi;if(e instanceof wi)return e;e=e.rgb();var t=e.r/255,r=e.g/255,n=e.b/255,s=Math.min(t,r,n),i=Math.max(t,r,n),l=NaN,u=i-s,d=(i+s)/2;return u?(t===i?l=(r-n)/u+(r<n)*6:r===i?l=(n-t)/u+2:l=(t-r)/u+4,u/=d<.5?i+s:2-i-s,l*=60):u=d>0&&d<1?0:l,new wi(l,u,d,e.opacity)}function Y7(e,t,r,n){return arguments.length===1?cP(e):new wi(e,t,r,n??1)}function wi(e,t,r,n){this.h=+e,this.s=+t,this.l=+r,this.opacity=+n}Rx(wi,Y7,lP(nd,{brighter(e){return e=e==null?Ch:Math.pow(Ch,e),new wi(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?Fu:Math.pow(Fu,e),new wi(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,r=this.l,n=r+(r<.5?r:1-r)*t,s=2*r-n;return new bs(Jy(e>=240?e-240:e+120,s,n),Jy(e,s,n),Jy(e<120?e+240:e-120,s,n),this.opacity)},clamp(){return new wi(XN(this.h),Pf(this.s),Pf(this.l),Eh(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=Eh(this.opacity);return`${e===1?"hsl(":"hsla("}${XN(this.h)}, ${Pf(this.s)*100}%, ${Pf(this.l)*100}%${e===1?")":`, ${e})`}`}}));function XN(e){return e=(e||0)%360,e<0?e+360:e}function Pf(e){return Math.max(0,Math.min(1,e||0))}function Jy(e,t,r){return(e<60?t+(r-t)*e/60:e<180?r:e<240?t+(r-t)*(240-e)/60:t)*255}const $x=e=>()=>e;function J7(e,t){return function(r){return e+r*t}}function Q7(e,t,r){return e=Math.pow(e,r),t=Math.pow(t,r)-e,r=1/r,function(n){return Math.pow(e+n*t,r)}}function X7(e){return(e=+e)==1?uP:function(t,r){return r-t?Q7(t,r,e):$x(isNaN(t)?r:t)}}function uP(e,t){var r=t-e;return r?J7(e,r):$x(isNaN(e)?t:e)}const ZN=(function e(t){var r=X7(t);function n(s,i){var l=r((s=w0(s)).r,(i=w0(i)).r),u=r(s.g,i.g),d=r(s.b,i.b),m=uP(s.opacity,i.opacity);return function(f){return s.r=l(f),s.g=u(f),s.b=d(f),s.opacity=m(f),s+""}}return n.gamma=e,n})(1);function Z7(e,t){t||(t=[]);var r=e?Math.min(t.length,e.length):0,n=t.slice(),s;return function(i){for(s=0;s<r;++s)n[s]=e[s]*(1-i)+t[s]*i;return n}}function e9(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function t9(e,t){var r=t?t.length:0,n=e?Math.min(r,e.length):0,s=new Array(n),i=new Array(r),l;for(l=0;l<n;++l)s[l]=jc(e[l],t[l]);for(;l<r;++l)i[l]=t[l];return function(u){for(l=0;l<n;++l)i[l]=s[l](u);return i}}function r9(e,t){var r=new Date;return e=+e,t=+t,function(n){return r.setTime(e*(1-n)+t*n),r}}function Ah(e,t){return e=+e,t=+t,function(r){return e*(1-r)+t*r}}function n9(e,t){var r={},n={},s;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(s in t)s in e?r[s]=jc(e[s],t[s]):n[s]=t[s];return function(i){for(s in r)n[s]=r[s](i);return n}}var b0=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Qy=new RegExp(b0.source,"g");function s9(e){return function(){return e}}function i9(e){return function(t){return e(t)+""}}function a9(e,t){var r=b0.lastIndex=Qy.lastIndex=0,n,s,i,l=-1,u=[],d=[];for(e=e+"",t=t+"";(n=b0.exec(e))&&(s=Qy.exec(t));)(i=s.index)>r&&(i=t.slice(r,i),u[l]?u[l]+=i:u[++l]=i),(n=n[0])===(s=s[0])?u[l]?u[l]+=s:u[++l]=s:(u[++l]=null,d.push({i:l,x:Ah(n,s)})),r=Qy.lastIndex;return r<t.length&&(i=t.slice(r),u[l]?u[l]+=i:u[++l]=i),u.length<2?d[0]?i9(d[0].x):s9(t):(t=d.length,function(m){for(var f=0,p;f<t;++f)u[(p=d[f]).i]=p.x(m);return u.join("")})}function jc(e,t){var r=typeof t,n;return t==null||r==="boolean"?$x(t):(r==="number"?Ah:r==="string"?(n=zu(t))?(t=n,ZN):a9:t instanceof zu?ZN:t instanceof Date?r9:e9(t)?Z7:Array.isArray(t)?t9:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?n9:Ah)(e,t)}function Mx(e,t){return e=+e,t=+t,function(r){return Math.round(e*(1-r)+t*r)}}function o9(e,t){t===void 0&&(t=e,e=jc);for(var r=0,n=t.length-1,s=t[0],i=new Array(n<0?0:n);r<n;)i[r]=e(s,s=t[++r]);return function(l){var u=Math.max(0,Math.min(n-1,Math.floor(l*=n)));return i[u](l-u)}}function l9(e){return function(){return e}}function Ph(e){return+e}var ek=[0,1];function is(e){return e}function j0(e,t){return(t-=e=+e)?function(r){return(r-e)/t}:l9(isNaN(t)?NaN:.5)}function c9(e,t){var r;return e>t&&(r=e,e=t,t=r),function(n){return Math.max(e,Math.min(t,n))}}function u9(e,t,r){var n=e[0],s=e[1],i=t[0],l=t[1];return s<n?(n=j0(s,n),i=r(l,i)):(n=j0(n,s),i=r(i,l)),function(u){return i(n(u))}}function d9(e,t,r){var n=Math.min(e.length,t.length)-1,s=new Array(n),i=new Array(n),l=-1;for(e[n]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++l<n;)s[l]=j0(e[l],e[l+1]),i[l]=r(t[l],t[l+1]);return function(u){var d=rd(e,u,1,n)-1;return i[d](s[d](u))}}function sd(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function Sm(){var e=ek,t=ek,r=jc,n,s,i,l=is,u,d,m;function f(){var y=Math.min(e.length,t.length);return l!==is&&(l=c9(e[0],e[y-1])),u=y>2?d9:u9,d=m=null,p}function p(y){return y==null||isNaN(y=+y)?i:(d||(d=u(e.map(n),t,r)))(n(l(y)))}return p.invert=function(y){return l(s((m||(m=u(t,e.map(n),Ah)))(y)))},p.domain=function(y){return arguments.length?(e=Array.from(y,Ph),f()):e.slice()},p.range=function(y){return arguments.length?(t=Array.from(y),f()):t.slice()},p.rangeRound=function(y){return t=Array.from(y),r=Mx,f()},p.clamp=function(y){return arguments.length?(l=y?!0:is,f()):l!==is},p.interpolate=function(y){return arguments.length?(r=y,f()):r},p.unknown=function(y){return arguments.length?(i=y,p):i},function(y,x){return n=y,s=x,f()}}function Fx(){return Sm()(is,is)}function f9(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function Oh(e,t){if((r=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var r,n=e.slice(0,r);return[n.length>1?n[0]+n.slice(2):n,+e.slice(r+1)]}function ic(e){return e=Oh(Math.abs(e)),e?e[1]:NaN}function h9(e,t){return function(r,n){for(var s=r.length,i=[],l=0,u=e[0],d=0;s>0&&u>0&&(d+u+1>n&&(u=Math.max(1,n-d)),i.push(r.substring(s-=u,s+u)),!((d+=u+1)>n));)u=e[l=(l+1)%e.length];return i.reverse().join(t)}}function m9(e){return function(t){return t.replace(/[0-9]/g,function(r){return e[+r]})}}var p9=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Bu(e){if(!(t=p9.exec(e)))throw new Error("invalid format: "+e);var t;return new Lx({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}Bu.prototype=Lx.prototype;function Lx(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}Lx.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function g9(e){e:for(var t=e.length,r=1,n=-1,s;r<t;++r)switch(e[r]){case".":n=s=r;break;case"0":n===0&&(n=r),s=r;break;default:if(!+e[r])break e;n>0&&(n=0);break}return n>0?e.slice(0,n)+e.slice(s+1):e}var dP;function y9(e,t){var r=Oh(e,t);if(!r)return e+"";var n=r[0],s=r[1],i=s-(dP=Math.max(-8,Math.min(8,Math.floor(s/3)))*3)+1,l=n.length;return i===l?n:i>l?n+new Array(i-l+1).join("0"):i>0?n.slice(0,i)+"."+n.slice(i):"0."+new Array(1-i).join("0")+Oh(e,Math.max(0,t+i-1))[0]}function tk(e,t){var r=Oh(e,t);if(!r)return e+"";var n=r[0],s=r[1];return s<0?"0."+new Array(-s).join("0")+n:n.length>s+1?n.slice(0,s+1)+"."+n.slice(s+1):n+new Array(s-n.length+2).join("0")}const rk={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:f9,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>tk(e*100,t),r:tk,s:y9,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function nk(e){return e}var sk=Array.prototype.map,ik=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function v9(e){var t=e.grouping===void 0||e.thousands===void 0?nk:h9(sk.call(e.grouping,Number),e.thousands+""),r=e.currency===void 0?"":e.currency[0]+"",n=e.currency===void 0?"":e.currency[1]+"",s=e.decimal===void 0?".":e.decimal+"",i=e.numerals===void 0?nk:m9(sk.call(e.numerals,String)),l=e.percent===void 0?"%":e.percent+"",u=e.minus===void 0?"":e.minus+"",d=e.nan===void 0?"NaN":e.nan+"";function m(p){p=Bu(p);var y=p.fill,x=p.align,j=p.sign,b=p.symbol,S=p.zero,N=p.width,E=p.comma,k=p.precision,T=p.trim,O=p.type;O==="n"?(E=!0,O="g"):rk[O]||(k===void 0&&(k=12),T=!0,O="g"),(S||y==="0"&&x==="=")&&(S=!0,y="0",x="=");var P=b==="$"?r:b==="#"&&/[boxX]/.test(O)?"0"+O.toLowerCase():"",R=b==="$"?n:/[%p]/.test(O)?l:"",q=rk[O],F=/[defgprs%]/.test(O);k=k===void 0?6:/[gprs]/.test(O)?Math.max(1,Math.min(21,k)):Math.max(0,Math.min(20,k));function V(B){var Q=P,ae=R,ne,me,K;if(O==="c")ae=q(B)+ae,B="";else{B=+B;var te=B<0||1/B<0;if(B=isNaN(B)?d:q(Math.abs(B),k),T&&(B=g9(B)),te&&+B==0&&j!=="+"&&(te=!1),Q=(te?j==="("?j:u:j==="-"||j==="("?"":j)+Q,ae=(O==="s"?ik[8+dP/3]:"")+ae+(te&&j==="("?")":""),F){for(ne=-1,me=B.length;++ne<me;)if(K=B.charCodeAt(ne),48>K||K>57){ae=(K===46?s+B.slice(ne+1):B.slice(ne))+ae,B=B.slice(0,ne);break}}}E&&!S&&(B=t(B,1/0));var se=Q.length+B.length+ae.length,de=se<N?new Array(N-se+1).join(y):"";switch(E&&S&&(B=t(de+B,de.length?N-ae.length:1/0),de=""),x){case"<":B=Q+B+ae+de;break;case"=":B=Q+de+B+ae;break;case"^":B=de.slice(0,se=de.length>>1)+Q+B+ae+de.slice(se);break;default:B=de+Q+B+ae;break}return i(B)}return V.toString=function(){return p+""},V}function f(p,y){var x=m((p=Bu(p),p.type="f",p)),j=Math.max(-8,Math.min(8,Math.floor(ic(y)/3)))*3,b=Math.pow(10,-j),S=ik[8+j/3];return function(N){return x(b*N)+S}}return{format:m,formatPrefix:f}}var Of,zx,fP;x9({thousands:",",grouping:[3],currency:["$",""]});function x9(e){return Of=v9(e),zx=Of.format,fP=Of.formatPrefix,Of}function w9(e){return Math.max(0,-ic(Math.abs(e)))}function b9(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(ic(t)/3)))*3-ic(Math.abs(e)))}function j9(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,ic(t)-ic(e))+1}function hP(e,t,r,n){var s=v0(e,t,r),i;switch(n=Bu(n??",f"),n.type){case"s":{var l=Math.max(Math.abs(e),Math.abs(t));return n.precision==null&&!isNaN(i=b9(s,l))&&(n.precision=i),fP(n,l)}case"":case"e":case"g":case"p":case"r":{n.precision==null&&!isNaN(i=j9(s,Math.max(Math.abs(e),Math.abs(t))))&&(n.precision=i-(n.type==="e"));break}case"f":case"%":{n.precision==null&&!isNaN(i=w9(s))&&(n.precision=i-(n.type==="%")*2);break}}return zx(n)}function io(e){var t=e.domain;return e.ticks=function(r){var n=t();return g0(n[0],n[n.length-1],r??10)},e.tickFormat=function(r,n){var s=t();return hP(s[0],s[s.length-1],r??10,n)},e.nice=function(r){r==null&&(r=10);var n=t(),s=0,i=n.length-1,l=n[s],u=n[i],d,m,f=10;for(u<l&&(m=l,l=u,u=m,m=s,s=i,i=m);f-- >0;){if(m=y0(l,u,r),m===d)return n[s]=l,n[i]=u,t(n);if(m>0)l=Math.floor(l/m)*m,u=Math.ceil(u/m)*m;else if(m<0)l=Math.ceil(l*m)/m,u=Math.floor(u*m)/m;else break;d=m}return e},e}function mP(){var e=Fx();return e.copy=function(){return sd(e,mP())},ai.apply(e,arguments),io(e)}function pP(e){var t;function r(n){return n==null||isNaN(n=+n)?t:n}return r.invert=r,r.domain=r.range=function(n){return arguments.length?(e=Array.from(n,Ph),r):e.slice()},r.unknown=function(n){return arguments.length?(t=n,r):t},r.copy=function(){return pP(e).unknown(t)},e=arguments.length?Array.from(e,Ph):[0,1],io(r)}function gP(e,t){e=e.slice();var r=0,n=e.length-1,s=e[r],i=e[n],l;return i<s&&(l=r,r=n,n=l,l=s,s=i,i=l),e[r]=t.floor(s),e[n]=t.ceil(i),e}function ak(e){return Math.log(e)}function ok(e){return Math.exp(e)}function S9(e){return-Math.log(-e)}function _9(e){return-Math.exp(-e)}function N9(e){return isFinite(e)?+("1e"+e):e<0?0:e}function k9(e){return e===10?N9:e===Math.E?Math.exp:t=>Math.pow(e,t)}function C9(e){return e===Math.E?Math.log:e===10&&Math.log10||e===2&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}function lk(e){return(t,r)=>-e(-t,r)}function Bx(e){const t=e(ak,ok),r=t.domain;let n=10,s,i;function l(){return s=C9(n),i=k9(n),r()[0]<0?(s=lk(s),i=lk(i),e(S9,_9)):e(ak,ok),t}return t.base=function(u){return arguments.length?(n=+u,l()):n},t.domain=function(u){return arguments.length?(r(u),l()):r()},t.ticks=u=>{const d=r();let m=d[0],f=d[d.length-1];const p=f<m;p&&([m,f]=[f,m]);let y=s(m),x=s(f),j,b;const S=u==null?10:+u;let N=[];if(!(n%1)&&x-y<S){if(y=Math.floor(y),x=Math.ceil(x),m>0){for(;y<=x;++y)for(j=1;j<n;++j)if(b=y<0?j/i(-y):j*i(y),!(b<m)){if(b>f)break;N.push(b)}}else for(;y<=x;++y)for(j=n-1;j>=1;--j)if(b=y>0?j/i(-y):j*i(y),!(b<m)){if(b>f)break;N.push(b)}N.length*2<S&&(N=g0(m,f,S))}else N=g0(y,x,Math.min(x-y,S)).map(i);return p?N.reverse():N},t.tickFormat=(u,d)=>{if(u==null&&(u=10),d==null&&(d=n===10?"s":","),typeof d!="function"&&(!(n%1)&&(d=Bu(d)).precision==null&&(d.trim=!0),d=zx(d)),u===1/0)return d;const m=Math.max(1,n*u/t.ticks().length);return f=>{let p=f/i(Math.round(s(f)));return p*n<n-.5&&(p*=n),p<=m?d(f):""}},t.nice=()=>r(gP(r(),{floor:u=>i(Math.floor(s(u))),ceil:u=>i(Math.ceil(s(u)))})),t}function yP(){const e=Bx(Sm()).domain([1,10]);return e.copy=()=>sd(e,yP()).base(e.base()),ai.apply(e,arguments),e}function ck(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function uk(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function Ux(e){var t=1,r=e(ck(t),uk(t));return r.constant=function(n){return arguments.length?e(ck(t=+n),uk(t)):t},io(r)}function vP(){var e=Ux(Sm());return e.copy=function(){return sd(e,vP()).constant(e.constant())},ai.apply(e,arguments)}function dk(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function E9(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function A9(e){return e<0?-e*e:e*e}function Wx(e){var t=e(is,is),r=1;function n(){return r===1?e(is,is):r===.5?e(E9,A9):e(dk(r),dk(1/r))}return t.exponent=function(s){return arguments.length?(r=+s,n()):r},io(t)}function Vx(){var e=Wx(Sm());return e.copy=function(){return sd(e,Vx()).exponent(e.exponent())},ai.apply(e,arguments),e}function P9(){return Vx.apply(null,arguments).exponent(.5)}function fk(e){return Math.sign(e)*e*e}function O9(e){return Math.sign(e)*Math.sqrt(Math.abs(e))}function xP(){var e=Fx(),t=[0,1],r=!1,n;function s(i){var l=O9(e(i));return isNaN(l)?n:r?Math.round(l):l}return s.invert=function(i){return e.invert(fk(i))},s.domain=function(i){return arguments.length?(e.domain(i),s):e.domain()},s.range=function(i){return arguments.length?(e.range((t=Array.from(i,Ph)).map(fk)),s):t.slice()},s.rangeRound=function(i){return s.range(i).round(!0)},s.round=function(i){return arguments.length?(r=!!i,s):r},s.clamp=function(i){return arguments.length?(e.clamp(i),s):e.clamp()},s.unknown=function(i){return arguments.length?(n=i,s):n},s.copy=function(){return xP(e.domain(),t).round(r).clamp(e.clamp()).unknown(n)},ai.apply(s,arguments),io(s)}function wP(){var e=[],t=[],r=[],n;function s(){var l=0,u=Math.max(1,t.length);for(r=new Array(u-1);++l<u;)r[l-1]=R7(e,l/u);return i}function i(l){return l==null||isNaN(l=+l)?n:t[rd(r,l)]}return i.invertExtent=function(l){var u=t.indexOf(l);return u<0?[NaN,NaN]:[u>0?r[u-1]:e[0],u<r.length?r[u]:e[e.length-1]]},i.domain=function(l){if(!arguments.length)return e.slice();e=[];for(let u of l)u!=null&&!isNaN(u=+u)&&e.push(u);return e.sort(eo),s()},i.range=function(l){return arguments.length?(t=Array.from(l),s()):t.slice()},i.unknown=function(l){return arguments.length?(n=l,i):n},i.quantiles=function(){return r.slice()},i.copy=function(){return wP().domain(e).range(t).unknown(n)},ai.apply(i,arguments)}function bP(){var e=0,t=1,r=1,n=[.5],s=[0,1],i;function l(d){return d!=null&&d<=d?s[rd(n,d,0,r)]:i}function u(){var d=-1;for(n=new Array(r);++d<r;)n[d]=((d+1)*t-(d-r)*e)/(r+1);return l}return l.domain=function(d){return arguments.length?([e,t]=d,e=+e,t=+t,u()):[e,t]},l.range=function(d){return arguments.length?(r=(s=Array.from(d)).length-1,u()):s.slice()},l.invertExtent=function(d){var m=s.indexOf(d);return m<0?[NaN,NaN]:m<1?[e,n[0]]:m>=r?[n[r-1],t]:[n[m-1],n[m]]},l.unknown=function(d){return arguments.length&&(i=d),l},l.thresholds=function(){return n.slice()},l.copy=function(){return bP().domain([e,t]).range(s).unknown(i)},ai.apply(io(l),arguments)}function jP(){var e=[.5],t=[0,1],r,n=1;function s(i){return i!=null&&i<=i?t[rd(e,i,0,n)]:r}return s.domain=function(i){return arguments.length?(e=Array.from(i),n=Math.min(e.length,t.length-1),s):e.slice()},s.range=function(i){return arguments.length?(t=Array.from(i),n=Math.min(e.length,t.length-1),s):t.slice()},s.invertExtent=function(i){var l=t.indexOf(i);return[e[l-1],e[l]]},s.unknown=function(i){return arguments.length?(r=i,s):r},s.copy=function(){return jP().domain(e).range(t).unknown(r)},ai.apply(s,arguments)}const Xy=new Date,Zy=new Date;function gn(e,t,r,n){function s(i){return e(i=arguments.length===0?new Date:new Date(+i)),i}return s.floor=i=>(e(i=new Date(+i)),i),s.ceil=i=>(e(i=new Date(i-1)),t(i,1),e(i),i),s.round=i=>{const l=s(i),u=s.ceil(i);return i-l<u-i?l:u},s.offset=(i,l)=>(t(i=new Date(+i),l==null?1:Math.floor(l)),i),s.range=(i,l,u)=>{const d=[];if(i=s.ceil(i),u=u==null?1:Math.floor(u),!(i<l)||!(u>0))return d;let m;do d.push(m=new Date(+i)),t(i,u),e(i);while(m<i&&i<l);return d},s.filter=i=>gn(l=>{if(l>=l)for(;e(l),!i(l);)l.setTime(l-1)},(l,u)=>{if(l>=l)if(u<0)for(;++u<=0;)for(;t(l,-1),!i(l););else for(;--u>=0;)for(;t(l,1),!i(l););}),r&&(s.count=(i,l)=>(Xy.setTime(+i),Zy.setTime(+l),e(Xy),e(Zy),Math.floor(r(Xy,Zy))),s.every=i=>(i=Math.floor(i),!isFinite(i)||!(i>0)?null:i>1?s.filter(n?l=>n(l)%i===0:l=>s.count(0,l)%i===0):s)),s}const Th=gn(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);Th.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?gn(t=>{t.setTime(Math.floor(t/e)*e)},(t,r)=>{t.setTime(+t+r*e)},(t,r)=>(r-t)/e):Th);Th.range;const ia=1e3,ei=ia*60,aa=ei*60,ya=aa*24,qx=ya*7,hk=ya*30,ev=ya*365,Do=gn(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*ia)},(e,t)=>(t-e)/ia,e=>e.getUTCSeconds());Do.range;const Hx=gn(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*ia)},(e,t)=>{e.setTime(+e+t*ei)},(e,t)=>(t-e)/ei,e=>e.getMinutes());Hx.range;const Kx=gn(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*ei)},(e,t)=>(t-e)/ei,e=>e.getUTCMinutes());Kx.range;const Gx=gn(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*ia-e.getMinutes()*ei)},(e,t)=>{e.setTime(+e+t*aa)},(e,t)=>(t-e)/aa,e=>e.getHours());Gx.range;const Yx=gn(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*aa)},(e,t)=>(t-e)/aa,e=>e.getUTCHours());Yx.range;const id=gn(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*ei)/ya,e=>e.getDate()-1);id.range;const _m=gn(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/ya,e=>e.getUTCDate()-1);_m.range;const SP=gn(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/ya,e=>Math.floor(e/ya));SP.range;function Zo(e){return gn(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(t,r)=>{t.setDate(t.getDate()+r*7)},(t,r)=>(r-t-(r.getTimezoneOffset()-t.getTimezoneOffset())*ei)/qx)}const Nm=Zo(0),Ih=Zo(1),T9=Zo(2),I9=Zo(3),ac=Zo(4),D9=Zo(5),R9=Zo(6);Nm.range;Ih.range;T9.range;I9.range;ac.range;D9.range;R9.range;function el(e){return gn(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(t,r)=>{t.setUTCDate(t.getUTCDate()+r*7)},(t,r)=>(r-t)/qx)}const km=el(0),Dh=el(1),$9=el(2),M9=el(3),oc=el(4),F9=el(5),L9=el(6);km.range;Dh.range;$9.range;M9.range;oc.range;F9.range;L9.range;const Jx=gn(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12,e=>e.getMonth());Jx.range;const Qx=gn(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth());Qx.range;const va=gn(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());va.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:gn(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,r)=>{t.setFullYear(t.getFullYear()+r*e)});va.range;const xa=gn(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());xa.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:gn(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,r)=>{t.setUTCFullYear(t.getUTCFullYear()+r*e)});xa.range;function _P(e,t,r,n,s,i){const l=[[Do,1,ia],[Do,5,5*ia],[Do,15,15*ia],[Do,30,30*ia],[i,1,ei],[i,5,5*ei],[i,15,15*ei],[i,30,30*ei],[s,1,aa],[s,3,3*aa],[s,6,6*aa],[s,12,12*aa],[n,1,ya],[n,2,2*ya],[r,1,qx],[t,1,hk],[t,3,3*hk],[e,1,ev]];function u(m,f,p){const y=f<m;y&&([m,f]=[f,m]);const x=p&&typeof p.range=="function"?p:d(m,f,p),j=x?x.range(m,+f+1):[];return y?j.reverse():j}function d(m,f,p){const y=Math.abs(f-m)/p,x=Tx(([,,S])=>S).right(l,y);if(x===l.length)return e.every(v0(m/ev,f/ev,p));if(x===0)return Th.every(Math.max(v0(m,f,p),1));const[j,b]=l[y/l[x-1][2]<l[x][2]/y?x-1:x];return j.every(b)}return[u,d]}const[z9,B9]=_P(xa,Qx,km,SP,Yx,Kx),[U9,W9]=_P(va,Jx,Nm,id,Gx,Hx);function tv(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function rv(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function du(e,t,r){return{y:e,m:t,d:r,H:0,M:0,S:0,L:0}}function V9(e){var t=e.dateTime,r=e.date,n=e.time,s=e.periods,i=e.days,l=e.shortDays,u=e.months,d=e.shortMonths,m=fu(s),f=hu(s),p=fu(i),y=hu(i),x=fu(l),j=hu(l),b=fu(u),S=hu(u),N=fu(d),E=hu(d),k={a:te,A:se,b:de,B:xe,c:null,d:xk,e:xk,f:hW,g:SW,G:NW,H:uW,I:dW,j:fW,L:NP,m:mW,M:pW,p:I,q:H,Q:jk,s:Sk,S:gW,u:yW,U:vW,V:xW,w:wW,W:bW,x:null,X:null,y:jW,Y:_W,Z:kW,"%":bk},T={a:Ie,A:X,b:ve,B:ce,c:null,d:wk,e:wk,f:PW,g:zW,G:UW,H:CW,I:EW,j:AW,L:CP,m:OW,M:TW,p:ge,q:ye,Q:jk,s:Sk,S:IW,u:DW,U:RW,V:$W,w:MW,W:FW,x:null,X:null,y:LW,Y:BW,Z:WW,"%":bk},O={a:V,A:B,b:Q,B:ae,c:ne,d:yk,e:yk,f:aW,g:gk,G:pk,H:vk,I:vk,j:rW,L:iW,m:tW,M:nW,p:F,q:eW,Q:lW,s:cW,S:sW,u:Y9,U:J9,V:Q9,w:G9,W:X9,x:me,X:K,y:gk,Y:pk,Z:Z9,"%":oW};k.x=P(r,k),k.X=P(n,k),k.c=P(t,k),T.x=P(r,T),T.X=P(n,T),T.c=P(t,T);function P(L,Fe){return function(Me){var ee=[],Ke=-1,Xe=0,ft=L.length,wt,Ct,_t;for(Me instanceof Date||(Me=new Date(+Me));++Ke<ft;)L.charCodeAt(Ke)===37&&(ee.push(L.slice(Xe,Ke)),(Ct=mk[wt=L.charAt(++Ke)])!=null?wt=L.charAt(++Ke):Ct=wt==="e"?" ":"0",(_t=Fe[wt])&&(wt=_t(Me,Ct)),ee.push(wt),Xe=Ke+1);return ee.push(L.slice(Xe,Ke)),ee.join("")}}function R(L,Fe){return function(Me){var ee=du(1900,void 0,1),Ke=q(ee,L,Me+="",0),Xe,ft;if(Ke!=Me.length)return null;if("Q"in ee)return new Date(ee.Q);if("s"in ee)return new Date(ee.s*1e3+("L"in ee?ee.L:0));if(Fe&&!("Z"in ee)&&(ee.Z=0),"p"in ee&&(ee.H=ee.H%12+ee.p*12),ee.m===void 0&&(ee.m="q"in ee?ee.q:0),"V"in ee){if(ee.V<1||ee.V>53)return null;"w"in ee||(ee.w=1),"Z"in ee?(Xe=rv(du(ee.y,0,1)),ft=Xe.getUTCDay(),Xe=ft>4||ft===0?Dh.ceil(Xe):Dh(Xe),Xe=_m.offset(Xe,(ee.V-1)*7),ee.y=Xe.getUTCFullYear(),ee.m=Xe.getUTCMonth(),ee.d=Xe.getUTCDate()+(ee.w+6)%7):(Xe=tv(du(ee.y,0,1)),ft=Xe.getDay(),Xe=ft>4||ft===0?Ih.ceil(Xe):Ih(Xe),Xe=id.offset(Xe,(ee.V-1)*7),ee.y=Xe.getFullYear(),ee.m=Xe.getMonth(),ee.d=Xe.getDate()+(ee.w+6)%7)}else("W"in ee||"U"in ee)&&("w"in ee||(ee.w="u"in ee?ee.u%7:"W"in ee?1:0),ft="Z"in ee?rv(du(ee.y,0,1)).getUTCDay():tv(du(ee.y,0,1)).getDay(),ee.m=0,ee.d="W"in ee?(ee.w+6)%7+ee.W*7-(ft+5)%7:ee.w+ee.U*7-(ft+6)%7);return"Z"in ee?(ee.H+=ee.Z/100|0,ee.M+=ee.Z%100,rv(ee)):tv(ee)}}function q(L,Fe,Me,ee){for(var Ke=0,Xe=Fe.length,ft=Me.length,wt,Ct;Ke<Xe;){if(ee>=ft)return-1;if(wt=Fe.charCodeAt(Ke++),wt===37){if(wt=Fe.charAt(Ke++),Ct=O[wt in mk?Fe.charAt(Ke++):wt],!Ct||(ee=Ct(L,Me,ee))<0)return-1}else if(wt!=Me.charCodeAt(ee++))return-1}return ee}function F(L,Fe,Me){var ee=m.exec(Fe.slice(Me));return ee?(L.p=f.get(ee[0].toLowerCase()),Me+ee[0].length):-1}function V(L,Fe,Me){var ee=x.exec(Fe.slice(Me));return ee?(L.w=j.get(ee[0].toLowerCase()),Me+ee[0].length):-1}function B(L,Fe,Me){var ee=p.exec(Fe.slice(Me));return ee?(L.w=y.get(ee[0].toLowerCase()),Me+ee[0].length):-1}function Q(L,Fe,Me){var ee=N.exec(Fe.slice(Me));return ee?(L.m=E.get(ee[0].toLowerCase()),Me+ee[0].length):-1}function ae(L,Fe,Me){var ee=b.exec(Fe.slice(Me));return ee?(L.m=S.get(ee[0].toLowerCase()),Me+ee[0].length):-1}function ne(L,Fe,Me){return q(L,t,Fe,Me)}function me(L,Fe,Me){return q(L,r,Fe,Me)}function K(L,Fe,Me){return q(L,n,Fe,Me)}function te(L){return l[L.getDay()]}function se(L){return i[L.getDay()]}function de(L){return d[L.getMonth()]}function xe(L){return u[L.getMonth()]}function I(L){return s[+(L.getHours()>=12)]}function H(L){return 1+~~(L.getMonth()/3)}function Ie(L){return l[L.getUTCDay()]}function X(L){return i[L.getUTCDay()]}function ve(L){return d[L.getUTCMonth()]}function ce(L){return u[L.getUTCMonth()]}function ge(L){return s[+(L.getUTCHours()>=12)]}function ye(L){return 1+~~(L.getUTCMonth()/3)}return{format:function(L){var Fe=P(L+="",k);return Fe.toString=function(){return L},Fe},parse:function(L){var Fe=R(L+="",!1);return Fe.toString=function(){return L},Fe},utcFormat:function(L){var Fe=P(L+="",T);return Fe.toString=function(){return L},Fe},utcParse:function(L){var Fe=R(L+="",!0);return Fe.toString=function(){return L},Fe}}}var mk={"-":"",_:" ",0:"0"},Tn=/^\s*\d+/,q9=/^%/,H9=/[\\^$*+?|[\]().{}]/g;function Jt(e,t,r){var n=e<0?"-":"",s=(n?-e:e)+"",i=s.length;return n+(i<r?new Array(r-i+1).join(t)+s:s)}function K9(e){return e.replace(H9,"\\$&")}function fu(e){return new RegExp("^(?:"+e.map(K9).join("|")+")","i")}function hu(e){return new Map(e.map((t,r)=>[t.toLowerCase(),r]))}function G9(e,t,r){var n=Tn.exec(t.slice(r,r+1));return n?(e.w=+n[0],r+n[0].length):-1}function Y9(e,t,r){var n=Tn.exec(t.slice(r,r+1));return n?(e.u=+n[0],r+n[0].length):-1}function J9(e,t,r){var n=Tn.exec(t.slice(r,r+2));return n?(e.U=+n[0],r+n[0].length):-1}function Q9(e,t,r){var n=Tn.exec(t.slice(r,r+2));return n?(e.V=+n[0],r+n[0].length):-1}function X9(e,t,r){var n=Tn.exec(t.slice(r,r+2));return n?(e.W=+n[0],r+n[0].length):-1}function pk(e,t,r){var n=Tn.exec(t.slice(r,r+4));return n?(e.y=+n[0],r+n[0].length):-1}function gk(e,t,r){var n=Tn.exec(t.slice(r,r+2));return n?(e.y=+n[0]+(+n[0]>68?1900:2e3),r+n[0].length):-1}function Z9(e,t,r){var n=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(r,r+6));return n?(e.Z=n[1]?0:-(n[2]+(n[3]||"00")),r+n[0].length):-1}function eW(e,t,r){var n=Tn.exec(t.slice(r,r+1));return n?(e.q=n[0]*3-3,r+n[0].length):-1}function tW(e,t,r){var n=Tn.exec(t.slice(r,r+2));return n?(e.m=n[0]-1,r+n[0].length):-1}function yk(e,t,r){var n=Tn.exec(t.slice(r,r+2));return n?(e.d=+n[0],r+n[0].length):-1}function rW(e,t,r){var n=Tn.exec(t.slice(r,r+3));return n?(e.m=0,e.d=+n[0],r+n[0].length):-1}function vk(e,t,r){var n=Tn.exec(t.slice(r,r+2));return n?(e.H=+n[0],r+n[0].length):-1}function nW(e,t,r){var n=Tn.exec(t.slice(r,r+2));return n?(e.M=+n[0],r+n[0].length):-1}function sW(e,t,r){var n=Tn.exec(t.slice(r,r+2));return n?(e.S=+n[0],r+n[0].length):-1}function iW(e,t,r){var n=Tn.exec(t.slice(r,r+3));return n?(e.L=+n[0],r+n[0].length):-1}function aW(e,t,r){var n=Tn.exec(t.slice(r,r+6));return n?(e.L=Math.floor(n[0]/1e3),r+n[0].length):-1}function oW(e,t,r){var n=q9.exec(t.slice(r,r+1));return n?r+n[0].length:-1}function lW(e,t,r){var n=Tn.exec(t.slice(r));return n?(e.Q=+n[0],r+n[0].length):-1}function cW(e,t,r){var n=Tn.exec(t.slice(r));return n?(e.s=+n[0],r+n[0].length):-1}function xk(e,t){return Jt(e.getDate(),t,2)}function uW(e,t){return Jt(e.getHours(),t,2)}function dW(e,t){return Jt(e.getHours()%12||12,t,2)}function fW(e,t){return Jt(1+id.count(va(e),e),t,3)}function NP(e,t){return Jt(e.getMilliseconds(),t,3)}function hW(e,t){return NP(e,t)+"000"}function mW(e,t){return Jt(e.getMonth()+1,t,2)}function pW(e,t){return Jt(e.getMinutes(),t,2)}function gW(e,t){return Jt(e.getSeconds(),t,2)}function yW(e){var t=e.getDay();return t===0?7:t}function vW(e,t){return Jt(Nm.count(va(e)-1,e),t,2)}function kP(e){var t=e.getDay();return t>=4||t===0?ac(e):ac.ceil(e)}function xW(e,t){return e=kP(e),Jt(ac.count(va(e),e)+(va(e).getDay()===4),t,2)}function wW(e){return e.getDay()}function bW(e,t){return Jt(Ih.count(va(e)-1,e),t,2)}function jW(e,t){return Jt(e.getFullYear()%100,t,2)}function SW(e,t){return e=kP(e),Jt(e.getFullYear()%100,t,2)}function _W(e,t){return Jt(e.getFullYear()%1e4,t,4)}function NW(e,t){var r=e.getDay();return e=r>=4||r===0?ac(e):ac.ceil(e),Jt(e.getFullYear()%1e4,t,4)}function kW(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+Jt(t/60|0,"0",2)+Jt(t%60,"0",2)}function wk(e,t){return Jt(e.getUTCDate(),t,2)}function CW(e,t){return Jt(e.getUTCHours(),t,2)}function EW(e,t){return Jt(e.getUTCHours()%12||12,t,2)}function AW(e,t){return Jt(1+_m.count(xa(e),e),t,3)}function CP(e,t){return Jt(e.getUTCMilliseconds(),t,3)}function PW(e,t){return CP(e,t)+"000"}function OW(e,t){return Jt(e.getUTCMonth()+1,t,2)}function TW(e,t){return Jt(e.getUTCMinutes(),t,2)}function IW(e,t){return Jt(e.getUTCSeconds(),t,2)}function DW(e){var t=e.getUTCDay();return t===0?7:t}function RW(e,t){return Jt(km.count(xa(e)-1,e),t,2)}function EP(e){var t=e.getUTCDay();return t>=4||t===0?oc(e):oc.ceil(e)}function $W(e,t){return e=EP(e),Jt(oc.count(xa(e),e)+(xa(e).getUTCDay()===4),t,2)}function MW(e){return e.getUTCDay()}function FW(e,t){return Jt(Dh.count(xa(e)-1,e),t,2)}function LW(e,t){return Jt(e.getUTCFullYear()%100,t,2)}function zW(e,t){return e=EP(e),Jt(e.getUTCFullYear()%100,t,2)}function BW(e,t){return Jt(e.getUTCFullYear()%1e4,t,4)}function UW(e,t){var r=e.getUTCDay();return e=r>=4||r===0?oc(e):oc.ceil(e),Jt(e.getUTCFullYear()%1e4,t,4)}function WW(){return"+0000"}function bk(){return"%"}function jk(e){return+e}function Sk(e){return Math.floor(+e/1e3)}var Ll,AP,PP;VW({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function VW(e){return Ll=V9(e),AP=Ll.format,Ll.parse,PP=Ll.utcFormat,Ll.utcParse,Ll}function qW(e){return new Date(e)}function HW(e){return e instanceof Date?+e:+new Date(+e)}function Xx(e,t,r,n,s,i,l,u,d,m){var f=Fx(),p=f.invert,y=f.domain,x=m(".%L"),j=m(":%S"),b=m("%I:%M"),S=m("%I %p"),N=m("%a %d"),E=m("%b %d"),k=m("%B"),T=m("%Y");function O(P){return(d(P)<P?x:u(P)<P?j:l(P)<P?b:i(P)<P?S:n(P)<P?s(P)<P?N:E:r(P)<P?k:T)(P)}return f.invert=function(P){return new Date(p(P))},f.domain=function(P){return arguments.length?y(Array.from(P,HW)):y().map(qW)},f.ticks=function(P){var R=y();return e(R[0],R[R.length-1],P??10)},f.tickFormat=function(P,R){return R==null?O:m(R)},f.nice=function(P){var R=y();return(!P||typeof P.range!="function")&&(P=t(R[0],R[R.length-1],P??10)),P?y(gP(R,P)):f},f.copy=function(){return sd(f,Xx(e,t,r,n,s,i,l,u,d,m))},f}function KW(){return ai.apply(Xx(U9,W9,va,Jx,Nm,id,Gx,Hx,Do,AP).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function GW(){return ai.apply(Xx(z9,B9,xa,Qx,km,_m,Yx,Kx,Do,PP).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function Cm(){var e=0,t=1,r,n,s,i,l=is,u=!1,d;function m(p){return p==null||isNaN(p=+p)?d:l(s===0?.5:(p=(i(p)-r)*s,u?Math.max(0,Math.min(1,p)):p))}m.domain=function(p){return arguments.length?([e,t]=p,r=i(e=+e),n=i(t=+t),s=r===n?0:1/(n-r),m):[e,t]},m.clamp=function(p){return arguments.length?(u=!!p,m):u},m.interpolator=function(p){return arguments.length?(l=p,m):l};function f(p){return function(y){var x,j;return arguments.length?([x,j]=y,l=p(x,j),m):[l(0),l(1)]}}return m.range=f(jc),m.rangeRound=f(Mx),m.unknown=function(p){return arguments.length?(d=p,m):d},function(p){return i=p,r=p(e),n=p(t),s=r===n?0:1/(n-r),m}}function ao(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function OP(){var e=io(Cm()(is));return e.copy=function(){return ao(e,OP())},Na.apply(e,arguments)}function TP(){var e=Bx(Cm()).domain([1,10]);return e.copy=function(){return ao(e,TP()).base(e.base())},Na.apply(e,arguments)}function IP(){var e=Ux(Cm());return e.copy=function(){return ao(e,IP()).constant(e.constant())},Na.apply(e,arguments)}function Zx(){var e=Wx(Cm());return e.copy=function(){return ao(e,Zx()).exponent(e.exponent())},Na.apply(e,arguments)}function YW(){return Zx.apply(null,arguments).exponent(.5)}function DP(){var e=[],t=is;function r(n){if(n!=null&&!isNaN(n=+n))return t((rd(e,n,1)-1)/(e.length-1))}return r.domain=function(n){if(!arguments.length)return e.slice();e=[];for(let s of n)s!=null&&!isNaN(s=+s)&&e.push(s);return e.sort(eo),r},r.interpolator=function(n){return arguments.length?(t=n,r):t},r.range=function(){return e.map((n,s)=>t(s/(e.length-1)))},r.quantiles=function(n){return Array.from({length:n+1},(s,i)=>D7(e,i/n))},r.copy=function(){return DP(t).domain(e)},Na.apply(r,arguments)}function Em(){var e=0,t=.5,r=1,n=1,s,i,l,u,d,m=is,f,p=!1,y;function x(b){return isNaN(b=+b)?y:(b=.5+((b=+f(b))-i)*(n*b<n*i?u:d),m(p?Math.max(0,Math.min(1,b)):b))}x.domain=function(b){return arguments.length?([e,t,r]=b,s=f(e=+e),i=f(t=+t),l=f(r=+r),u=s===i?0:.5/(i-s),d=i===l?0:.5/(l-i),n=i<s?-1:1,x):[e,t,r]},x.clamp=function(b){return arguments.length?(p=!!b,x):p},x.interpolator=function(b){return arguments.length?(m=b,x):m};function j(b){return function(S){var N,E,k;return arguments.length?([N,E,k]=S,m=o9(b,[N,E,k]),x):[m(0),m(.5),m(1)]}}return x.range=j(jc),x.rangeRound=j(Mx),x.unknown=function(b){return arguments.length?(y=b,x):y},function(b){return f=b,s=b(e),i=b(t),l=b(r),u=s===i?0:.5/(i-s),d=i===l?0:.5/(l-i),n=i<s?-1:1,x}}function RP(){var e=io(Em()(is));return e.copy=function(){return ao(e,RP())},Na.apply(e,arguments)}function $P(){var e=Bx(Em()).domain([.1,1,10]);return e.copy=function(){return ao(e,$P()).base(e.base())},Na.apply(e,arguments)}function MP(){var e=Ux(Em());return e.copy=function(){return ao(e,MP()).constant(e.constant())},Na.apply(e,arguments)}function ew(){var e=Wx(Em());return e.copy=function(){return ao(e,ew()).exponent(e.exponent())},Na.apply(e,arguments)}function JW(){return ew.apply(null,arguments).exponent(.5)}const xu=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:Dx,scaleDiverging:RP,scaleDivergingLog:$P,scaleDivergingPow:ew,scaleDivergingSqrt:JW,scaleDivergingSymlog:MP,scaleIdentity:pP,scaleImplicit:x0,scaleLinear:mP,scaleLog:yP,scaleOrdinal:Ix,scalePoint:M7,scalePow:Vx,scaleQuantile:wP,scaleQuantize:bP,scaleRadial:xP,scaleSequential:OP,scaleSequentialLog:TP,scaleSequentialPow:Zx,scaleSequentialQuantile:DP,scaleSequentialSqrt:YW,scaleSequentialSymlog:IP,scaleSqrt:P9,scaleSymlog:vP,scaleThreshold:jP,scaleTime:KW,scaleUtc:GW,tickFormat:hP},Symbol.toStringTag,{value:"Module"}));var oo=e=>e.chartData,QW=pe([oo],e=>{var t=e.chartData!=null?e.chartData.length-1:0;return{chartData:e.chartData,computedData:e.computedData,dataEndIndex:t,dataStartIndex:0}}),tw=(e,t,r,n)=>n?QW(e):oo(e);function qo(e){if(Array.isArray(e)&&e.length===2){var[t,r]=e;if(qr(t)&&qr(r))return!0}return!1}function _k(e,t,r){return r?e:[Math.min(e[0],t[0]),Math.max(e[1],t[1])]}function FP(e,t){if(t&&typeof e!="function"&&Array.isArray(e)&&e.length===2){var[r,n]=e,s,i;if(qr(r))s=r;else if(typeof r=="function")return;if(qr(n))i=n;else if(typeof n=="function")return;var l=[s,i];if(qo(l))return l}}function XW(e,t,r){if(!(!r&&t==null)){if(typeof e=="function"&&t!=null)try{var n=e(t,r);if(qo(n))return _k(n,t,r)}catch{}if(Array.isArray(e)&&e.length===2){var[s,i]=e,l,u;if(s==="auto")t!=null&&(l=Math.min(...t));else if(mt(s))l=s;else if(typeof s=="function")try{t!=null&&(l=s(t==null?void 0:t[0]))}catch{}else if(typeof s=="string"&&iN.test(s)){var d=iN.exec(s);if(d==null||t==null)l=void 0;else{var m=+d[1];l=t[0]-m}}else l=t==null?void 0:t[0];if(i==="auto")t!=null&&(u=Math.max(...t));else if(mt(i))u=i;else if(typeof i=="function")try{t!=null&&(u=i(t==null?void 0:t[1]))}catch{}else if(typeof i=="string"&&aN.test(i)){var f=aN.exec(i);if(f==null||t==null)u=void 0;else{var p=+f[1];u=t[1]+p}}else u=t==null?void 0:t[1];var y=[l,u];if(qo(y))return t==null?y:_k(y,t,r)}}}var Sc=1e9,ZW={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},nw,Nr=!0,si="[DecimalError] ",Bo=si+"Invalid argument: ",rw=si+"Exponent out of range: ",_c=Math.floor,Eo=Math.pow,eV=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,Fs,En=1e7,wr=7,LP=9007199254740991,Rh=_c(LP/wr),Qe={};Qe.absoluteValue=Qe.abs=function(){var e=new this.constructor(this);return e.s&&(e.s=1),e};Qe.comparedTo=Qe.cmp=function(e){var t,r,n,s,i=this;if(e=new i.constructor(e),i.s!==e.s)return i.s||-e.s;if(i.e!==e.e)return i.e>e.e^i.s<0?1:-1;for(n=i.d.length,s=e.d.length,t=0,r=n<s?n:s;t<r;++t)if(i.d[t]!==e.d[t])return i.d[t]>e.d[t]^i.s<0?1:-1;return n===s?0:n>s^i.s<0?1:-1};Qe.decimalPlaces=Qe.dp=function(){var e=this,t=e.d.length-1,r=(t-e.e)*wr;if(t=e.d[t],t)for(;t%10==0;t/=10)r--;return r<0?0:r};Qe.dividedBy=Qe.div=function(e){return ua(this,new this.constructor(e))};Qe.dividedToIntegerBy=Qe.idiv=function(e){var t=this,r=t.constructor;return or(ua(t,new r(e),0,1),r.precision)};Qe.equals=Qe.eq=function(e){return!this.cmp(e)};Qe.exponent=function(){return nn(this)};Qe.greaterThan=Qe.gt=function(e){return this.cmp(e)>0};Qe.greaterThanOrEqualTo=Qe.gte=function(e){return this.cmp(e)>=0};Qe.isInteger=Qe.isint=function(){return this.e>this.d.length-2};Qe.isNegative=Qe.isneg=function(){return this.s<0};Qe.isPositive=Qe.ispos=function(){return this.s>0};Qe.isZero=function(){return this.s===0};Qe.lessThan=Qe.lt=function(e){return this.cmp(e)<0};Qe.lessThanOrEqualTo=Qe.lte=function(e){return this.cmp(e)<1};Qe.logarithm=Qe.log=function(e){var t,r=this,n=r.constructor,s=n.precision,i=s+5;if(e===void 0)e=new n(10);else if(e=new n(e),e.s<1||e.eq(Fs))throw Error(si+"NaN");if(r.s<1)throw Error(si+(r.s?"NaN":"-Infinity"));return r.eq(Fs)?new n(0):(Nr=!1,t=ua(Uu(r,i),Uu(e,i),i),Nr=!0,or(t,s))};Qe.minus=Qe.sub=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?UP(t,e):zP(t,(e.s=-e.s,e))};Qe.modulo=Qe.mod=function(e){var t,r=this,n=r.constructor,s=n.precision;if(e=new n(e),!e.s)throw Error(si+"NaN");return r.s?(Nr=!1,t=ua(r,e,0,1).times(e),Nr=!0,r.minus(t)):or(new n(r),s)};Qe.naturalExponential=Qe.exp=function(){return BP(this)};Qe.naturalLogarithm=Qe.ln=function(){return Uu(this)};Qe.negated=Qe.neg=function(){var e=new this.constructor(this);return e.s=-e.s||0,e};Qe.plus=Qe.add=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?zP(t,e):UP(t,(e.s=-e.s,e))};Qe.precision=Qe.sd=function(e){var t,r,n,s=this;if(e!==void 0&&e!==!!e&&e!==1&&e!==0)throw Error(Bo+e);if(t=nn(s)+1,n=s.d.length-1,r=n*wr+1,n=s.d[n],n){for(;n%10==0;n/=10)r--;for(n=s.d[0];n>=10;n/=10)r++}return e&&t>r?t:r};Qe.squareRoot=Qe.sqrt=function(){var e,t,r,n,s,i,l,u=this,d=u.constructor;if(u.s<1){if(!u.s)return new d(0);throw Error(si+"NaN")}for(e=nn(u),Nr=!1,s=Math.sqrt(+u),s==0||s==1/0?(t=Ri(u.d),(t.length+e)%2==0&&(t+="0"),s=Math.sqrt(t),e=_c((e+1)/2)-(e<0||e%2),s==1/0?t="5e"+e:(t=s.toExponential(),t=t.slice(0,t.indexOf("e")+1)+e),n=new d(t)):n=new d(s.toString()),r=d.precision,s=l=r+3;;)if(i=n,n=i.plus(ua(u,i,l+2)).times(.5),Ri(i.d).slice(0,l)===(t=Ri(n.d)).slice(0,l)){if(t=t.slice(l-3,l+1),s==l&&t=="4999"){if(or(i,r+1,0),i.times(i).eq(u)){n=i;break}}else if(t!="9999")break;l+=4}return Nr=!0,or(n,r)};Qe.times=Qe.mul=function(e){var t,r,n,s,i,l,u,d,m,f=this,p=f.constructor,y=f.d,x=(e=new p(e)).d;if(!f.s||!e.s)return new p(0);for(e.s*=f.s,r=f.e+e.e,d=y.length,m=x.length,d<m&&(i=y,y=x,x=i,l=d,d=m,m=l),i=[],l=d+m,n=l;n--;)i.push(0);for(n=m;--n>=0;){for(t=0,s=d+n;s>n;)u=i[s]+x[n]*y[s-n-1]+t,i[s--]=u%En|0,t=u/En|0;i[s]=(i[s]+t)%En|0}for(;!i[--l];)i.pop();return t?++r:i.shift(),e.d=i,e.e=r,Nr?or(e,p.precision):e};Qe.toDecimalPlaces=Qe.todp=function(e,t){var r=this,n=r.constructor;return r=new n(r),e===void 0?r:(zi(e,0,Sc),t===void 0?t=n.rounding:zi(t,0,8),or(r,e+nn(r)+1,t))};Qe.toExponential=function(e,t){var r,n=this,s=n.constructor;return e===void 0?r=Ho(n,!0):(zi(e,0,Sc),t===void 0?t=s.rounding:zi(t,0,8),n=or(new s(n),e+1,t),r=Ho(n,!0,e+1)),r};Qe.toFixed=function(e,t){var r,n,s=this,i=s.constructor;return e===void 0?Ho(s):(zi(e,0,Sc),t===void 0?t=i.rounding:zi(t,0,8),n=or(new i(s),e+nn(s)+1,t),r=Ho(n.abs(),!1,e+nn(n)+1),s.isneg()&&!s.isZero()?"-"+r:r)};Qe.toInteger=Qe.toint=function(){var e=this,t=e.constructor;return or(new t(e),nn(e)+1,t.rounding)};Qe.toNumber=function(){return+this};Qe.toPower=Qe.pow=function(e){var t,r,n,s,i,l,u=this,d=u.constructor,m=12,f=+(e=new d(e));if(!e.s)return new d(Fs);if(u=new d(u),!u.s){if(e.s<1)throw Error(si+"Infinity");return u}if(u.eq(Fs))return u;if(n=d.precision,e.eq(Fs))return or(u,n);if(t=e.e,r=e.d.length-1,l=t>=r,i=u.s,l){if((r=f<0?-f:f)<=LP){for(s=new d(Fs),t=Math.ceil(n/wr+4),Nr=!1;r%2&&(s=s.times(u),kk(s.d,t)),r=_c(r/2),r!==0;)u=u.times(u),kk(u.d,t);return Nr=!0,e.s<0?new d(Fs).div(s):or(s,n)}}else if(i<0)throw Error(si+"NaN");return i=i<0&&e.d[Math.max(t,r)]&1?-1:1,u.s=1,Nr=!1,s=e.times(Uu(u,n+m)),Nr=!0,s=BP(s),s.s=i,s};Qe.toPrecision=function(e,t){var r,n,s=this,i=s.constructor;return e===void 0?(r=nn(s),n=Ho(s,r<=i.toExpNeg||r>=i.toExpPos)):(zi(e,1,Sc),t===void 0?t=i.rounding:zi(t,0,8),s=or(new i(s),e,t),r=nn(s),n=Ho(s,e<=r||r<=i.toExpNeg,e)),n};Qe.toSignificantDigits=Qe.tosd=function(e,t){var r=this,n=r.constructor;return e===void 0?(e=n.precision,t=n.rounding):(zi(e,1,Sc),t===void 0?t=n.rounding:zi(t,0,8)),or(new n(r),e,t)};Qe.toString=Qe.valueOf=Qe.val=Qe.toJSON=Qe[Symbol.for("nodejs.util.inspect.custom")]=function(){var e=this,t=nn(e),r=e.constructor;return Ho(e,t<=r.toExpNeg||t>=r.toExpPos)};function zP(e,t){var r,n,s,i,l,u,d,m,f=e.constructor,p=f.precision;if(!e.s||!t.s)return t.s||(t=new f(e)),Nr?or(t,p):t;if(d=e.d,m=t.d,l=e.e,s=t.e,d=d.slice(),i=l-s,i){for(i<0?(n=d,i=-i,u=m.length):(n=m,s=l,u=d.length),l=Math.ceil(p/wr),u=l>u?l+1:u+1,i>u&&(i=u,n.length=1),n.reverse();i--;)n.push(0);n.reverse()}for(u=d.length,i=m.length,u-i<0&&(i=u,n=m,m=d,d=n),r=0;i;)r=(d[--i]=d[i]+m[i]+r)/En|0,d[i]%=En;for(r&&(d.unshift(r),++s),u=d.length;d[--u]==0;)d.pop();return t.d=d,t.e=s,Nr?or(t,p):t}function zi(e,t,r){if(e!==~~e||e<t||e>r)throw Error(Bo+e)}function Ri(e){var t,r,n,s=e.length-1,i="",l=e[0];if(s>0){for(i+=l,t=1;t<s;t++)n=e[t]+"",r=wr-n.length,r&&(i+=Ga(r)),i+=n;l=e[t],n=l+"",r=wr-n.length,r&&(i+=Ga(r))}else if(l===0)return"0";for(;l%10===0;)l/=10;return i+l}var ua=(function(){function e(n,s){var i,l=0,u=n.length;for(n=n.slice();u--;)i=n[u]*s+l,n[u]=i%En|0,l=i/En|0;return l&&n.unshift(l),n}function t(n,s,i,l){var u,d;if(i!=l)d=i>l?1:-1;else for(u=d=0;u<i;u++)if(n[u]!=s[u]){d=n[u]>s[u]?1:-1;break}return d}function r(n,s,i){for(var l=0;i--;)n[i]-=l,l=n[i]<s[i]?1:0,n[i]=l*En+n[i]-s[i];for(;!n[0]&&n.length>1;)n.shift()}return function(n,s,i,l){var u,d,m,f,p,y,x,j,b,S,N,E,k,T,O,P,R,q,F=n.constructor,V=n.s==s.s?1:-1,B=n.d,Q=s.d;if(!n.s)return new F(n);if(!s.s)throw Error(si+"Division by zero");for(d=n.e-s.e,R=Q.length,O=B.length,x=new F(V),j=x.d=[],m=0;Q[m]==(B[m]||0);)++m;if(Q[m]>(B[m]||0)&&--d,i==null?E=i=F.precision:l?E=i+(nn(n)-nn(s))+1:E=i,E<0)return new F(0);if(E=E/wr+2|0,m=0,R==1)for(f=0,Q=Q[0],E++;(m<O||f)&&E--;m++)k=f*En+(B[m]||0),j[m]=k/Q|0,f=k%Q|0;else{for(f=En/(Q[0]+1)|0,f>1&&(Q=e(Q,f),B=e(B,f),R=Q.length,O=B.length),T=R,b=B.slice(0,R),S=b.length;S<R;)b[S++]=0;q=Q.slice(),q.unshift(0),P=Q[0],Q[1]>=En/2&&++P;do f=0,u=t(Q,b,R,S),u<0?(N=b[0],R!=S&&(N=N*En+(b[1]||0)),f=N/P|0,f>1?(f>=En&&(f=En-1),p=e(Q,f),y=p.length,S=b.length,u=t(p,b,y,S),u==1&&(f--,r(p,R<y?q:Q,y))):(f==0&&(u=f=1),p=Q.slice()),y=p.length,y<S&&p.unshift(0),r(b,p,S),u==-1&&(S=b.length,u=t(Q,b,R,S),u<1&&(f++,r(b,R<S?q:Q,S))),S=b.length):u===0&&(f++,b=[0]),j[m++]=f,u&&b[0]?b[S++]=B[T]||0:(b=[B[T]],S=1);while((T++<O||b[0]!==void 0)&&E--)}return j[0]||j.shift(),x.e=d,or(x,l?i+nn(x)+1:i)}})();function BP(e,t){var r,n,s,i,l,u,d=0,m=0,f=e.constructor,p=f.precision;if(nn(e)>16)throw Error(rw+nn(e));if(!e.s)return new f(Fs);for(Nr=!1,u=p,l=new f(.03125);e.abs().gte(.1);)e=e.times(l),m+=5;for(n=Math.log(Eo(2,m))/Math.LN10*2+5|0,u+=n,r=s=i=new f(Fs),f.precision=u;;){if(s=or(s.times(e),u),r=r.times(++d),l=i.plus(ua(s,r,u)),Ri(l.d).slice(0,u)===Ri(i.d).slice(0,u)){for(;m--;)i=or(i.times(i),u);return f.precision=p,t==null?(Nr=!0,or(i,p)):i}i=l}}function nn(e){for(var t=e.e*wr,r=e.d[0];r>=10;r/=10)t++;return t}function nv(e,t,r){if(t>e.LN10.sd())throw Nr=!0,r&&(e.precision=r),Error(si+"LN10 precision limit exceeded");return or(new e(e.LN10),t)}function Ga(e){for(var t="";e--;)t+="0";return t}function Uu(e,t){var r,n,s,i,l,u,d,m,f,p=1,y=10,x=e,j=x.d,b=x.constructor,S=b.precision;if(x.s<1)throw Error(si+(x.s?"NaN":"-Infinity"));if(x.eq(Fs))return new b(0);if(t==null?(Nr=!1,m=S):m=t,x.eq(10))return t==null&&(Nr=!0),nv(b,m);if(m+=y,b.precision=m,r=Ri(j),n=r.charAt(0),i=nn(x),Math.abs(i)<15e14){for(;n<7&&n!=1||n==1&&r.charAt(1)>3;)x=x.times(e),r=Ri(x.d),n=r.charAt(0),p++;i=nn(x),n>1?(x=new b("0."+r),i++):x=new b(n+"."+r.slice(1))}else return d=nv(b,m+2,S).times(i+""),x=Uu(new b(n+"."+r.slice(1)),m-y).plus(d),b.precision=S,t==null?(Nr=!0,or(x,S)):x;for(u=l=x=ua(x.minus(Fs),x.plus(Fs),m),f=or(x.times(x),m),s=3;;){if(l=or(l.times(f),m),d=u.plus(ua(l,new b(s),m)),Ri(d.d).slice(0,m)===Ri(u.d).slice(0,m))return u=u.times(2),i!==0&&(u=u.plus(nv(b,m+2,S).times(i+""))),u=ua(u,new b(p),m),b.precision=S,t==null?(Nr=!0,or(u,S)):u;u=d,s+=2}}function Nk(e,t){var r,n,s;for((r=t.indexOf("."))>-1&&(t=t.replace(".","")),(n=t.search(/e/i))>0?(r<0&&(r=n),r+=+t.slice(n+1),t=t.substring(0,n)):r<0&&(r=t.length),n=0;t.charCodeAt(n)===48;)++n;for(s=t.length;t.charCodeAt(s-1)===48;)--s;if(t=t.slice(n,s),t){if(s-=n,r=r-n-1,e.e=_c(r/wr),e.d=[],n=(r+1)%wr,r<0&&(n+=wr),n<s){for(n&&e.d.push(+t.slice(0,n)),s-=wr;n<s;)e.d.push(+t.slice(n,n+=wr));t=t.slice(n),n=wr-t.length}else n-=s;for(;n--;)t+="0";if(e.d.push(+t),Nr&&(e.e>Rh||e.e<-Rh))throw Error(rw+r)}else e.s=0,e.e=0,e.d=[0];return e}function or(e,t,r){var n,s,i,l,u,d,m,f,p=e.d;for(l=1,i=p[0];i>=10;i/=10)l++;if(n=t-l,n<0)n+=wr,s=t,m=p[f=0];else{if(f=Math.ceil((n+1)/wr),i=p.length,f>=i)return e;for(m=i=p[f],l=1;i>=10;i/=10)l++;n%=wr,s=n-wr+l}if(r!==void 0&&(i=Eo(10,l-s-1),u=m/i%10|0,d=t<0||p[f+1]!==void 0||m%i,d=r<4?(u||d)&&(r==0||r==(e.s<0?3:2)):u>5||u==5&&(r==4||d||r==6&&(n>0?s>0?m/Eo(10,l-s):0:p[f-1])%10&1||r==(e.s<0?8:7))),t<1||!p[0])return d?(i=nn(e),p.length=1,t=t-i-1,p[0]=Eo(10,(wr-t%wr)%wr),e.e=_c(-t/wr)||0):(p.length=1,p[0]=e.e=e.s=0),e;if(n==0?(p.length=f,i=1,f--):(p.length=f+1,i=Eo(10,wr-n),p[f]=s>0?(m/Eo(10,l-s)%Eo(10,s)|0)*i:0),d)for(;;)if(f==0){(p[0]+=i)==En&&(p[0]=1,++e.e);break}else{if(p[f]+=i,p[f]!=En)break;p[f--]=0,i=1}for(n=p.length;p[--n]===0;)p.pop();if(Nr&&(e.e>Rh||e.e<-Rh))throw Error(rw+nn(e));return e}function UP(e,t){var r,n,s,i,l,u,d,m,f,p,y=e.constructor,x=y.precision;if(!e.s||!t.s)return t.s?t.s=-t.s:t=new y(e),Nr?or(t,x):t;if(d=e.d,p=t.d,n=t.e,m=e.e,d=d.slice(),l=m-n,l){for(f=l<0,f?(r=d,l=-l,u=p.length):(r=p,n=m,u=d.length),s=Math.max(Math.ceil(x/wr),u)+2,l>s&&(l=s,r.length=1),r.reverse(),s=l;s--;)r.push(0);r.reverse()}else{for(s=d.length,u=p.length,f=s<u,f&&(u=s),s=0;s<u;s++)if(d[s]!=p[s]){f=d[s]<p[s];break}l=0}for(f&&(r=d,d=p,p=r,t.s=-t.s),u=d.length,s=p.length-u;s>0;--s)d[u++]=0;for(s=p.length;s>l;){if(d[--s]<p[s]){for(i=s;i&&d[--i]===0;)d[i]=En-1;--d[i],d[s]+=En}d[s]-=p[s]}for(;d[--u]===0;)d.pop();for(;d[0]===0;d.shift())--n;return d[0]?(t.d=d,t.e=n,Nr?or(t,x):t):new y(0)}function Ho(e,t,r){var n,s=nn(e),i=Ri(e.d),l=i.length;return t?(r&&(n=r-l)>0?i=i.charAt(0)+"."+i.slice(1)+Ga(n):l>1&&(i=i.charAt(0)+"."+i.slice(1)),i=i+(s<0?"e":"e+")+s):s<0?(i="0."+Ga(-s-1)+i,r&&(n=r-l)>0&&(i+=Ga(n))):s>=l?(i+=Ga(s+1-l),r&&(n=r-s-1)>0&&(i=i+"."+Ga(n))):((n=s+1)<l&&(i=i.slice(0,n)+"."+i.slice(n)),r&&(n=r-l)>0&&(s+1===l&&(i+="."),i+=Ga(n))),e.s<0?"-"+i:i}function kk(e,t){if(e.length>t)return e.length=t,!0}function WP(e){var t,r,n;function s(i){var l=this;if(!(l instanceof s))return new s(i);if(l.constructor=s,i instanceof s){l.s=i.s,l.e=i.e,l.d=(i=i.d)?i.slice():i;return}if(typeof i=="number"){if(i*0!==0)throw Error(Bo+i);if(i>0)l.s=1;else if(i<0)i=-i,l.s=-1;else{l.s=0,l.e=0,l.d=[0];return}if(i===~~i&&i<1e7){l.e=0,l.d=[i];return}return Nk(l,i.toString())}else if(typeof i!="string")throw Error(Bo+i);if(i.charCodeAt(0)===45?(i=i.slice(1),l.s=-1):l.s=1,eV.test(i))Nk(l,i);else throw Error(Bo+i)}if(s.prototype=Qe,s.ROUND_UP=0,s.ROUND_DOWN=1,s.ROUND_CEIL=2,s.ROUND_FLOOR=3,s.ROUND_HALF_UP=4,s.ROUND_HALF_DOWN=5,s.ROUND_HALF_EVEN=6,s.ROUND_HALF_CEIL=7,s.ROUND_HALF_FLOOR=8,s.clone=WP,s.config=s.set=tV,e===void 0&&(e={}),e)for(n=["precision","rounding","toExpNeg","toExpPos","LN10"],t=0;t<n.length;)e.hasOwnProperty(r=n[t++])||(e[r]=this[r]);return s.config(e),s}function tV(e){if(!e||typeof e!="object")throw Error(si+"Object expected");var t,r,n,s=["precision",1,Sc,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(t=0;t<s.length;t+=3)if((n=e[r=s[t]])!==void 0)if(_c(n)===n&&n>=s[t+1]&&n<=s[t+2])this[r]=n;else throw Error(Bo+r+": "+n);if((n=e[r="LN10"])!==void 0)if(n==Math.LN10)this[r]=new this(n);else throw Error(Bo+r+": "+n);return this}var nw=WP(ZW);Fs=new nw(1);const Zt=nw;var rV=e=>e,VP={},qP=e=>e===VP,Ck=e=>function t(){return arguments.length===0||arguments.length===1&&qP(arguments.length<=0?void 0:arguments[0])?t:e(...arguments)},HP=(e,t)=>e===1?t:Ck(function(){for(var r=arguments.length,n=new Array(r),s=0;s<r;s++)n[s]=arguments[s];var i=n.filter(l=>l!==VP).length;return i>=e?t(...n):HP(e-i,Ck(function(){for(var l=arguments.length,u=new Array(l),d=0;d<l;d++)u[d]=arguments[d];var m=n.map(f=>qP(f)?u.shift():f);return t(...m,...u)}))}),Am=e=>HP(e.length,e),S0=(e,t)=>{for(var r=[],n=e;n<t;++n)r[n-e]=n;return r},nV=Am((e,t)=>Array.isArray(t)?t.map(e):Object.keys(t).map(r=>t[r]).map(e)),sV=function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];if(!r.length)return rV;var s=r.reverse(),i=s[0],l=s.slice(1);return function(){return l.reduce((u,d)=>d(u),i(...arguments))}},_0=e=>Array.isArray(e)?e.reverse():e.split("").reverse().join(""),KP=e=>{var t=null,r=null;return function(){for(var n=arguments.length,s=new Array(n),i=0;i<n;i++)s[i]=arguments[i];return t&&s.every((l,u)=>{var d;return l===((d=t)===null||d===void 0?void 0:d[u])})||(t=s,r=e(...s)),r}};function GP(e){var t;return e===0?t=1:t=Math.floor(new Zt(e).abs().log(10).toNumber())+1,t}function YP(e,t,r){for(var n=new Zt(e),s=0,i=[];n.lt(t)&&s<1e5;)i.push(n.toNumber()),n=n.add(r),s++;return i}Am((e,t,r)=>{var n=+e,s=+t;return n+r*(s-n)});Am((e,t,r)=>{var n=t-+e;return n=n||1/0,(r-e)/n});Am((e,t,r)=>{var n=t-+e;return n=n||1/0,Math.max(0,Math.min(1,(r-e)/n))});var JP=e=>{var[t,r]=e,[n,s]=[t,r];return t>r&&([n,s]=[r,t]),[n,s]},QP=(e,t,r)=>{if(e.lte(0))return new Zt(0);var n=GP(e.toNumber()),s=new Zt(10).pow(n),i=e.div(s),l=n!==1?.05:.1,u=new Zt(Math.ceil(i.div(l).toNumber())).add(r).mul(l),d=u.mul(s);return t?new Zt(d.toNumber()):new Zt(Math.ceil(d.toNumber()))},iV=(e,t,r)=>{var n=new Zt(1),s=new Zt(e);if(!s.isint()&&r){var i=Math.abs(e);i<1?(n=new Zt(10).pow(GP(e)-1),s=new Zt(Math.floor(s.div(n).toNumber())).mul(n)):i>1&&(s=new Zt(Math.floor(e)))}else e===0?s=new Zt(Math.floor((t-1)/2)):r||(s=new Zt(Math.floor(e)));var l=Math.floor((t-1)/2),u=sV(nV(d=>s.add(new Zt(d-l).mul(n)).toNumber()),S0);return u(0,t)},XP=function(t,r,n,s){var i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((r-t)/(n-1)))return{step:new Zt(0),tickMin:new Zt(0),tickMax:new Zt(0)};var l=QP(new Zt(r).sub(t).div(n-1),s,i),u;t<=0&&r>=0?u=new Zt(0):(u=new Zt(t).add(r).div(2),u=u.sub(new Zt(u).mod(l)));var d=Math.ceil(u.sub(t).div(l).toNumber()),m=Math.ceil(new Zt(r).sub(u).div(l).toNumber()),f=d+m+1;return f>n?XP(t,r,n,s,i+1):(f<n&&(m=r>0?m+(n-f):m,d=r>0?d:d+(n-f)),{step:l,tickMin:u.sub(new Zt(d).mul(l)),tickMax:u.add(new Zt(m).mul(l))})};function aV(e){var[t,r]=e,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,i=Math.max(n,2),[l,u]=JP([t,r]);if(l===-1/0||u===1/0){var d=u===1/0?[l,...S0(0,n-1).map(()=>1/0)]:[...S0(0,n-1).map(()=>-1/0),u];return t>r?_0(d):d}if(l===u)return iV(l,n,s);var{step:m,tickMin:f,tickMax:p}=XP(l,u,i,s,0),y=YP(f,p.add(new Zt(.1).mul(m)),m);return t>r?_0(y):y}function oV(e,t){var[r,n]=e,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,[i,l]=JP([r,n]);if(i===-1/0||l===1/0)return[r,n];if(i===l)return[i];var u=Math.max(t,2),d=QP(new Zt(l).sub(i).div(u-1),s,0),m=[...YP(new Zt(i),new Zt(l),d),l];return s===!1&&(m=m.map(f=>Math.round(f))),r>n?_0(m):m}var lV=KP(aV),cV=KP(oV),ZP=e=>e.rootProps.maxBarSize,uV=e=>e.rootProps.barGap,eO=e=>e.rootProps.barCategoryGap,dV=e=>e.rootProps.barSize,Pm=e=>e.rootProps.stackOffset,sw=e=>e.options.chartName,iw=e=>e.rootProps.syncId,tO=e=>e.rootProps.syncMethod,aw=e=>e.options.eventEmitter,js={grid:-100,barBackground:-50,area:100,cursorRectangle:200,bar:300,line:400,axis:500,scatter:600,activeBar:1e3,cursorLine:1100,activeDot:1200,label:2e3},na={allowDuplicatedCategory:!0,angleAxisId:0,reversed:!1,scale:"auto",tick:!0,type:"category"},Ds={allowDataOverflow:!1,allowDuplicatedCategory:!0,radiusAxisId:0,scale:"auto",tick:!0,tickCount:5,type:"number"},Om=(e,t)=>{if(!(!e||!t))return e!=null&&e.reversed?[t[1],t[0]]:t},fV={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:!1,dataKey:void 0,domain:void 0,id:na.angleAxisId,includeHidden:!1,name:void 0,reversed:na.reversed,scale:na.scale,tick:na.tick,tickCount:void 0,ticks:void 0,type:na.type,unit:void 0},hV={allowDataOverflow:Ds.allowDataOverflow,allowDecimals:!1,allowDuplicatedCategory:Ds.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:Ds.radiusAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:Ds.scale,tick:Ds.tick,tickCount:Ds.tickCount,ticks:void 0,type:Ds.type,unit:void 0},mV={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:na.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:na.angleAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:na.scale,tick:na.tick,tickCount:void 0,ticks:void 0,type:"number",unit:void 0},pV={allowDataOverflow:Ds.allowDataOverflow,allowDecimals:!1,allowDuplicatedCategory:Ds.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:Ds.radiusAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:Ds.scale,tick:Ds.tick,tickCount:Ds.tickCount,ticks:void 0,type:"category",unit:void 0},ow=(e,t)=>e.polarAxis.angleAxis[t]!=null?e.polarAxis.angleAxis[t]:e.layout.layoutType==="radial"?mV:fV,lw=(e,t)=>e.polarAxis.radiusAxis[t]!=null?e.polarAxis.radiusAxis[t]:e.layout.layoutType==="radial"?pV:hV,Tm=e=>e.polarOptions,cw=pe([Sa,_a,On],l7),rO=pe([Tm,cw],(e,t)=>{if(e!=null)return Si(e.innerRadius,t,0)}),nO=pe([Tm,cw],(e,t)=>{if(e!=null)return Si(e.outerRadius,t,t*.8)}),gV=e=>{if(e==null)return[0,0];var{startAngle:t,endAngle:r}=e;return[t,r]},sO=pe([Tm],gV);pe([ow,sO],Om);var iO=pe([cw,rO,nO],(e,t,r)=>{if(!(e==null||t==null||r==null))return[t,r]});pe([lw,iO],Om);var aO=pe([er,Tm,rO,nO,Sa,_a],(e,t,r,n,s,i)=>{if(!(e!=="centric"&&e!=="radial"||t==null||r==null||n==null)){var{cx:l,cy:u,startAngle:d,endAngle:m}=t;return{cx:Si(l,s,s/2),cy:Si(u,i,i/2),innerRadius:r,outerRadius:n,startAngle:d,endAngle:m,clockWise:!1}}}),yn=(e,t)=>t,Im=(e,t,r)=>r;function uw(e){return e==null?void 0:e.id}function oO(e,t,r){var{chartData:n=[]}=t,{allowDuplicatedCategory:s,dataKey:i}=r,l=new Map;return e.forEach(u=>{var d,m=(d=u.data)!==null&&d!==void 0?d:n;if(!(m==null||m.length===0)){var f=uw(u);m.forEach((p,y)=>{var x=i==null||s?y:String(as(p,i,null)),j=as(p,u.dataKey,0),b;l.has(x)?b=l.get(x):b={},Object.assign(b,{[f]:j}),l.set(x,b)})}}),Array.from(l.values())}function Dm(e){return e.stackId!=null&&e.dataKey!=null}var Rm=(e,t)=>e===t?!0:e==null||t==null?!1:e[0]===t[0]&&e[1]===t[1];function $m(e,t){return Array.isArray(e)&&Array.isArray(t)&&e.length===0&&t.length===0?!0:e===t}function yV(e,t){if(e.length===t.length){for(var r=0;r<e.length;r++)if(e[r]!==t[r])return!1;return!0}return!1}var vn=e=>{var t=er(e);return t==="horizontal"?"xAxis":t==="vertical"?"yAxis":t==="centric"?"angleAxis":"radiusAxis"},Nc=e=>e.tooltip.settings.axisId;function Ek(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function $h(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Ek(Object(r),!0).forEach(function(n){vV(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ek(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function vV(e,t,r){return(t=xV(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function xV(e){var t=wV(e,"string");return typeof t=="symbol"?t:t+""}function wV(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var N0=[0,"auto"],Os={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:void 0,height:30,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"bottom",padding:{left:0,right:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"category",unit:void 0},lO=(e,t)=>e.cartesianAxis.xAxis[t],ka=(e,t)=>{var r=lO(e,t);return r??Os},Ts={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:N0,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"left",padding:{top:0,bottom:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"number",unit:void 0,width:td},cO=(e,t)=>e.cartesianAxis.yAxis[t],Ca=(e,t)=>{var r=cO(e,t);return r??Ts},bV={domain:[0,"auto"],includeHidden:!1,reversed:!1,allowDataOverflow:!1,allowDuplicatedCategory:!1,dataKey:void 0,id:0,name:"",range:[64,64],scale:"auto",type:"number",unit:""},dw=(e,t)=>{var r=e.cartesianAxis.zAxis[t];return r??bV},os=(e,t,r)=>{switch(t){case"xAxis":return ka(e,r);case"yAxis":return Ca(e,r);case"zAxis":return dw(e,r);case"angleAxis":return ow(e,r);case"radiusAxis":return lw(e,r);default:throw new Error("Unexpected axis type: ".concat(t))}},jV=(e,t,r)=>{switch(t){case"xAxis":return ka(e,r);case"yAxis":return Ca(e,r);default:throw new Error("Unexpected axis type: ".concat(t))}},ad=(e,t,r)=>{switch(t){case"xAxis":return ka(e,r);case"yAxis":return Ca(e,r);case"angleAxis":return ow(e,r);case"radiusAxis":return lw(e,r);default:throw new Error("Unexpected axis type: ".concat(t))}},uO=e=>e.graphicalItems.cartesianItems.some(t=>t.type==="bar")||e.graphicalItems.polarItems.some(t=>t.type==="radialBar");function dO(e,t){return r=>{switch(e){case"xAxis":return"xAxisId"in r&&r.xAxisId===t;case"yAxis":return"yAxisId"in r&&r.yAxisId===t;case"zAxis":return"zAxisId"in r&&r.zAxisId===t;case"angleAxis":return"angleAxisId"in r&&r.angleAxisId===t;case"radiusAxis":return"radiusAxisId"in r&&r.radiusAxisId===t;default:return!1}}}var fw=e=>e.graphicalItems.cartesianItems,SV=pe([yn,Im],dO),fO=(e,t,r)=>e.filter(r).filter(n=>(t==null?void 0:t.includeHidden)===!0?!0:!n.hide),od=pe([fw,os,SV],fO,{memoizeOptions:{resultEqualityCheck:$m}}),hO=pe([od],e=>e.filter(t=>t.type==="area"||t.type==="bar").filter(Dm)),mO=e=>e.filter(t=>!("stackId"in t)||t.stackId===void 0),_V=pe([od],mO),pO=e=>e.map(t=>t.data).filter(Boolean).flat(1),NV=pe([od],pO,{memoizeOptions:{resultEqualityCheck:$m}}),gO=(e,t)=>{var{chartData:r=[],dataStartIndex:n,dataEndIndex:s}=t;return e.length>0?e:r.slice(n,s+1)},hw=pe([NV,tw],gO),yO=(e,t,r)=>(t==null?void 0:t.dataKey)!=null?e.map(n=>({value:as(n,t.dataKey)})):r.length>0?r.map(n=>n.dataKey).flatMap(n=>e.map(s=>({value:as(s,n)}))):e.map(n=>({value:n})),Mm=pe([hw,os,od],yO);function vO(e,t){switch(e){case"xAxis":return t.direction==="x";case"yAxis":return t.direction==="y";default:return!1}}function Vf(e){if(Li(e)||e instanceof Date){var t=Number(e);if(qr(t))return t}}function Ak(e){if(Array.isArray(e)){var t=[Vf(e[0]),Vf(e[1])];return qo(t)?t:void 0}var r=Vf(e);if(r!=null)return[r,r]}function wa(e){return e.map(Vf).filter(HL)}function kV(e,t,r){return!r||typeof t!="number"||Fi(t)?[]:r.length?wa(r.flatMap(n=>{var s=as(e,n.dataKey),i,l;if(Array.isArray(s)?[i,l]=s:i=l=s,!(!qr(i)||!qr(l)))return[t-i,t+l]})):[]}var xn=e=>{var t=vn(e),r=Nc(e);return ad(e,t,r)},xO=pe([xn],e=>e==null?void 0:e.dataKey),CV=pe([hO,tw,xn],oO),wO=(e,t,r)=>{var n={},s=t.reduce((i,l)=>(l.stackId==null||(i[l.stackId]==null&&(i[l.stackId]=[]),i[l.stackId].push(l)),i),n);return Object.fromEntries(Object.entries(s).map(i=>{var[l,u]=i,d=u.map(uw);return[l,{stackedData:lB(e,d,r),graphicalItems:u}]}))},k0=pe([CV,hO,Pm],wO),bO=(e,t,r,n)=>{var{dataStartIndex:s,dataEndIndex:i}=t;if(n==null&&r!=="zAxis"){var l=hB(e,s,i);if(!(l!=null&&l[0]===0&&l[1]===0))return l}},EV=pe([os],e=>e.allowDataOverflow),mw=e=>{var t;if(e==null||!("domain"in e))return N0;if(e.domain!=null)return e.domain;if(e.ticks!=null){if(e.type==="number"){var r=wa(e.ticks);return[Math.min(...r),Math.max(...r)]}if(e.type==="category")return e.ticks.map(String)}return(t=e==null?void 0:e.domain)!==null&&t!==void 0?t:N0},jO=pe([os],mw),SO=pe([jO,EV],FP),AV=pe([k0,oo,yn,SO],bO,{memoizeOptions:{resultEqualityCheck:Rm}}),pw=e=>e.errorBars,PV=(e,t,r)=>e.flatMap(n=>t[n.id]).filter(Boolean).filter(n=>vO(r,n)),Mh=function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];var s=r.filter(Boolean);if(s.length!==0){var i=s.flat(),l=Math.min(...i),u=Math.max(...i);return[l,u]}},_O=(e,t,r,n,s)=>{var i,l;if(r.length>0&&e.forEach(u=>{r.forEach(d=>{var m,f,p=(m=n[d.id])===null||m===void 0?void 0:m.filter(N=>vO(s,N)),y=as(u,(f=t.dataKey)!==null&&f!==void 0?f:d.dataKey),x=kV(u,y,p);if(x.length>=2){var j=Math.min(...x),b=Math.max(...x);(i==null||j<i)&&(i=j),(l==null||b>l)&&(l=b)}var S=Ak(y);S!=null&&(i=i==null?S[0]:Math.min(i,S[0]),l=l==null?S[1]:Math.max(l,S[1]))})}),(t==null?void 0:t.dataKey)!=null&&e.forEach(u=>{var d=Ak(as(u,t.dataKey));d!=null&&(i=i==null?d[0]:Math.min(i,d[0]),l=l==null?d[1]:Math.max(l,d[1]))}),qr(i)&&qr(l))return[i,l]},OV=pe([hw,os,_V,pw,yn],_O,{memoizeOptions:{resultEqualityCheck:Rm}});function TV(e){var{value:t}=e;if(Li(t)||t instanceof Date)return t}var IV=(e,t,r)=>{var n=e.map(TV).filter(s=>s!=null);return r&&(t.dataKey==null||t.allowDuplicatedCategory&&JE(n))?nP(0,e.length):t.allowDuplicatedCategory?n:Array.from(new Set(n))},NO=e=>e.referenceElements.dots,kc=(e,t,r)=>e.filter(n=>n.ifOverflow==="extendDomain").filter(n=>t==="xAxis"?n.xAxisId===r:n.yAxisId===r),DV=pe([NO,yn,Im],kc),kO=e=>e.referenceElements.areas,RV=pe([kO,yn,Im],kc),CO=e=>e.referenceElements.lines,$V=pe([CO,yn,Im],kc),EO=(e,t)=>{var r=wa(e.map(n=>t==="xAxis"?n.x:n.y));if(r.length!==0)return[Math.min(...r),Math.max(...r)]},MV=pe(DV,yn,EO),AO=(e,t)=>{var r=wa(e.flatMap(n=>[t==="xAxis"?n.x1:n.y1,t==="xAxis"?n.x2:n.y2]));if(r.length!==0)return[Math.min(...r),Math.max(...r)]},FV=pe([RV,yn],AO);function LV(e){var t;if(e.x!=null)return wa([e.x]);var r=(t=e.segment)===null||t===void 0?void 0:t.map(n=>n.x);return r==null||r.length===0?[]:wa(r)}function zV(e){var t;if(e.y!=null)return wa([e.y]);var r=(t=e.segment)===null||t===void 0?void 0:t.map(n=>n.y);return r==null||r.length===0?[]:wa(r)}var PO=(e,t)=>{var r=e.flatMap(n=>t==="xAxis"?LV(n):zV(n));if(r.length!==0)return[Math.min(...r),Math.max(...r)]},BV=pe([$V,yn],PO),UV=pe(MV,BV,FV,(e,t,r)=>Mh(e,r,t)),OO=(e,t,r,n,s,i,l,u)=>{if(r!=null)return r;var d=l==="vertical"&&u==="xAxis"||l==="horizontal"&&u==="yAxis",m=d?Mh(n,i,s):Mh(i,s);return XW(t,m,e.allowDataOverflow)},WV=pe([os,jO,SO,AV,OV,UV,er,yn],OO,{memoizeOptions:{resultEqualityCheck:Rm}}),VV=[0,1],TO=(e,t,r,n,s,i,l)=>{if(!((e==null||r==null||r.length===0)&&l===void 0)){var{dataKey:u,type:d}=e,m=Xo(t,i);if(m&&u==null){var f;return nP(0,(f=r==null?void 0:r.length)!==null&&f!==void 0?f:0)}return d==="category"?IV(n,e,m):s==="expand"?VV:l}},gw=pe([os,er,hw,Mm,Pm,yn,WV],TO),IO=(e,t,r,n,s)=>{if(e!=null){var{scale:i,type:l}=e;if(i==="auto")return t==="radial"&&s==="radiusAxis"?"band":t==="radial"&&s==="angleAxis"?"linear":l==="category"&&n&&(n.indexOf("LineChart")>=0||n.indexOf("AreaChart")>=0||n.indexOf("ComposedChart")>=0&&!r)?"point":l==="category"?"band":"linear";if(typeof i=="string"){var u="scale".concat(Xu(i));return u in xu?u:"point"}}},ld=pe([os,er,uO,sw,yn],IO);function qV(e){if(e!=null){if(e in xu)return xu[e]();var t="scale".concat(Xu(e));if(t in xu)return xu[t]()}}function yw(e,t,r,n){if(!(r==null||n==null)){if(typeof e.scale=="function")return e.scale.copy().domain(r).range(n);var s=qV(t);if(s!=null){var i=s.domain(r).range(n);return nB(i),i}}}var DO=(e,t,r)=>{var n=mw(t);if(!(r!=="auto"&&r!=="linear")){if(t!=null&&t.tickCount&&Array.isArray(n)&&(n[0]==="auto"||n[1]==="auto")&&qo(e))return lV(e,t.tickCount,t.allowDecimals);if(t!=null&&t.tickCount&&t.type==="number"&&qo(e))return cV(e,t.tickCount,t.allowDecimals)}},vw=pe([gw,ad,ld],DO),RO=(e,t,r,n)=>{if(n!=="angleAxis"&&(e==null?void 0:e.type)==="number"&&qo(t)&&Array.isArray(r)&&r.length>0){var s=t[0],i=r[0],l=t[1],u=r[r.length-1];return[Math.min(s,i),Math.max(l,u)]}return t},HV=pe([os,gw,vw,yn],RO),KV=pe(Mm,os,(e,t)=>{if(!(!t||t.type!=="number")){var r=1/0,n=Array.from(wa(e.map(u=>u.value))).sort((u,d)=>u-d);if(n.length<2)return 1/0;var s=n[n.length-1]-n[0];if(s===0)return 1/0;for(var i=0;i<n.length-1;i++){var l=n[i+1]-n[i];r=Math.min(r,l)}return r/s}}),$O=pe(KV,er,eO,On,(e,t,r,n)=>n,(e,t,r,n,s)=>{if(!qr(e))return 0;var i=t==="vertical"?n.height:n.width;if(s==="gap")return e*i/2;if(s==="no-gap"){var l=Si(r,e*i),u=e*i/2;return u-l-(u-l)/i*l}return 0}),GV=(e,t)=>{var r=ka(e,t);return r==null||typeof r.padding!="string"?0:$O(e,"xAxis",t,r.padding)},YV=(e,t)=>{var r=Ca(e,t);return r==null||typeof r.padding!="string"?0:$O(e,"yAxis",t,r.padding)},JV=pe(ka,GV,(e,t)=>{var r,n;if(e==null)return{left:0,right:0};var{padding:s}=e;return typeof s=="string"?{left:t,right:t}:{left:((r=s.left)!==null&&r!==void 0?r:0)+t,right:((n=s.right)!==null&&n!==void 0?n:0)+t}}),QV=pe(Ca,YV,(e,t)=>{var r,n;if(e==null)return{top:0,bottom:0};var{padding:s}=e;return typeof s=="string"?{top:t,bottom:t}:{top:((r=s.top)!==null&&r!==void 0?r:0)+t,bottom:((n=s.bottom)!==null&&n!==void 0?n:0)+t}}),XV=pe([On,JV,xm,vm,(e,t,r)=>r],(e,t,r,n,s)=>{var{padding:i}=n;return s?[i.left,r.width-i.right]:[e.left+t.left,e.left+e.width-t.right]}),ZV=pe([On,er,QV,xm,vm,(e,t,r)=>r],(e,t,r,n,s,i)=>{var{padding:l}=s;return i?[n.height-l.bottom,l.top]:t==="horizontal"?[e.top+e.height-r.bottom,e.top+r.top]:[e.top+r.top,e.top+e.height-r.bottom]}),cd=(e,t,r,n)=>{var s;switch(t){case"xAxis":return XV(e,r,n);case"yAxis":return ZV(e,r,n);case"zAxis":return(s=dw(e,r))===null||s===void 0?void 0:s.range;case"angleAxis":return sO(e);case"radiusAxis":return iO(e,r);default:return}},MO=pe([os,cd],Om),Cc=pe([os,ld,HV,MO],yw);pe([od,pw,yn],PV);function FO(e,t){return e.id<t.id?-1:e.id>t.id?1:0}var Fm=(e,t)=>t,Lm=(e,t,r)=>r,eq=pe(gm,Fm,Lm,(e,t,r)=>e.filter(n=>n.orientation===t).filter(n=>n.mirror===r).sort(FO)),tq=pe(ym,Fm,Lm,(e,t,r)=>e.filter(n=>n.orientation===t).filter(n=>n.mirror===r).sort(FO)),LO=(e,t)=>({width:e.width,height:t.height}),rq=(e,t)=>{var r=typeof t.width=="number"?t.width:td;return{width:r,height:e.height}},zO=pe(On,ka,LO),nq=(e,t,r)=>{switch(t){case"top":return e.top;case"bottom":return r-e.bottom;default:return 0}},sq=(e,t,r)=>{switch(t){case"left":return e.left;case"right":return r-e.right;default:return 0}},iq=pe(_a,On,eq,Fm,Lm,(e,t,r,n,s)=>{var i={},l;return r.forEach(u=>{var d=LO(t,u);l==null&&(l=nq(t,n,e));var m=n==="top"&&!s||n==="bottom"&&s;i[u.id]=l-Number(m)*d.height,l+=(m?-1:1)*d.height}),i}),aq=pe(Sa,On,tq,Fm,Lm,(e,t,r,n,s)=>{var i={},l;return r.forEach(u=>{var d=rq(t,u);l==null&&(l=sq(t,n,e));var m=n==="left"&&!s||n==="right"&&s;i[u.id]=l-Number(m)*d.width,l+=(m?-1:1)*d.width}),i}),oq=(e,t)=>{var r=ka(e,t);if(r!=null)return iq(e,r.orientation,r.mirror)},lq=pe([On,ka,oq,(e,t)=>t],(e,t,r,n)=>{if(t!=null){var s=r==null?void 0:r[n];return s==null?{x:e.left,y:0}:{x:e.left,y:s}}}),cq=(e,t)=>{var r=Ca(e,t);if(r!=null)return aq(e,r.orientation,r.mirror)},uq=pe([On,Ca,cq,(e,t)=>t],(e,t,r,n)=>{if(t!=null){var s=r==null?void 0:r[n];return s==null?{x:0,y:e.top}:{x:s,y:e.top}}}),BO=pe(On,Ca,(e,t)=>{var r=typeof t.width=="number"?t.width:td;return{width:r,height:e.height}}),Pk=(e,t,r)=>{switch(t){case"xAxis":return zO(e,r).width;case"yAxis":return BO(e,r).height;default:return}},UO=(e,t,r,n)=>{if(r!=null){var{allowDuplicatedCategory:s,type:i,dataKey:l}=r,u=Xo(e,n),d=t.map(m=>m.value);if(l&&u&&i==="category"&&s&&JE(d))return d}},xw=pe([er,Mm,os,yn],UO),WO=(e,t,r,n)=>{if(!(r==null||r.dataKey==null)){var{type:s,scale:i}=r,l=Xo(e,n);if(l&&(s==="number"||i!=="auto"))return t.map(u=>u.value)}},ww=pe([er,Mm,ad,yn],WO);pe([er,jV,ld,Cc,xw,ww,cd,vw,yn],(e,t,r,n,s,i,l,u,d)=>{if(t!=null){var m=Xo(e,d);return{angle:t.angle,interval:t.interval,minTickGap:t.minTickGap,orientation:t.orientation,tick:t.tick,tickCount:t.tickCount,tickFormatter:t.tickFormatter,ticks:t.ticks,type:t.type,unit:t.unit,axisType:d,categoricalDomain:i,duplicateDomain:s,isCategorical:m,niceTicks:u,range:l,realScaleType:r,scale:n}}});var dq=(e,t,r,n,s,i,l,u,d)=>{if(!(t==null||n==null)){var m=Xo(e,d),{type:f,ticks:p,tickCount:y}=t,x=r==="scaleBand"&&typeof n.bandwidth=="function"?n.bandwidth()/2:2,j=f==="category"&&n.bandwidth?n.bandwidth()/x:0;j=d==="angleAxis"&&i!=null&&i.length>=2?Ls(i[0]-i[1])*2*j:j;var b=p||s;if(b){var S=b.map((N,E)=>{var k=l?l.indexOf(N):N;return{index:E,coordinate:n(k)+j,value:N,offset:j}});return S.filter(N=>qr(N.coordinate))}return m&&u?u.map((N,E)=>({coordinate:n(N)+j,value:N,index:E,offset:j})).filter(N=>qr(N.coordinate)):n.ticks?n.ticks(y).map(N=>({coordinate:n(N)+j,value:N,offset:j})):n.domain().map((N,E)=>({coordinate:n(N)+j,value:l?l[N]:N,index:E,offset:j}))}},VO=pe([er,ad,ld,Cc,vw,cd,xw,ww,yn],dq),fq=(e,t,r,n,s,i,l)=>{if(!(t==null||r==null||n==null||n[0]===n[1])){var u=Xo(e,l),{tickCount:d}=t,m=0;return m=l==="angleAxis"&&(n==null?void 0:n.length)>=2?Ls(n[0]-n[1])*2*m:m,u&&i?i.map((f,p)=>({coordinate:r(f)+m,value:f,index:p,offset:m})):r.ticks?r.ticks(d).map(f=>({coordinate:r(f)+m,value:f,offset:m})):r.domain().map((f,p)=>({coordinate:r(f)+m,value:s?s[f]:f,index:p,offset:m}))}},lc=pe([er,ad,Cc,cd,xw,ww,yn],fq),cc=pe(os,Cc,(e,t)=>{if(!(e==null||t==null))return $h($h({},e),{},{scale:t})}),hq=pe([os,ld,gw,MO],yw);pe((e,t,r)=>dw(e,r),hq,(e,t)=>{if(!(e==null||t==null))return $h($h({},e),{},{scale:t})});var mq=pe([er,gm,ym],(e,t,r)=>{switch(e){case"horizontal":return t.some(n=>n.reversed)?"right-to-left":"left-to-right";case"vertical":return r.some(n=>n.reversed)?"bottom-to-top":"top-to-bottom";case"centric":case"radial":return"left-to-right";default:return}}),qO=e=>e.options.defaultTooltipEventType,HO=e=>e.options.validateTooltipEventTypes;function KO(e,t,r){if(e==null)return t;var n=e?"axis":"item";return r==null?t:r.includes(n)?n:t}function bw(e,t){var r=qO(e),n=HO(e);return KO(t,r,n)}function pq(e){return lt(t=>bw(t,e))}var GO=(e,t)=>{var r,n=Number(t);if(!(Fi(n)||t==null))return n>=0?e==null||(r=e[n])===null||r===void 0?void 0:r.value:void 0},gq=e=>e.tooltip.settings,Xa={active:!1,index:null,dataKey:void 0,coordinate:void 0},yq={itemInteraction:{click:Xa,hover:Xa},axisInteraction:{click:Xa,hover:Xa},keyboardInteraction:Xa,syncInteraction:{active:!1,index:null,dataKey:void 0,label:void 0,coordinate:void 0,sourceViewBox:void 0},tooltipItemPayloads:[],settings:{shared:void 0,trigger:"hover",axisId:0,active:!1,defaultIndex:void 0}},YO=_s({name:"tooltip",initialState:yq,reducers:{addTooltipEntrySettings:{reducer(e,t){e.tooltipItemPayloads.push(t.payload)},prepare:mn()},removeTooltipEntrySettings:{reducer(e,t){var r=ca(e).tooltipItemPayloads.indexOf(t.payload);r>-1&&e.tooltipItemPayloads.splice(r,1)},prepare:mn()},setTooltipSettingsState(e,t){e.settings=t.payload},setActiveMouseOverItemIndex(e,t){e.syncInteraction.active=!1,e.keyboardInteraction.active=!1,e.itemInteraction.hover.active=!0,e.itemInteraction.hover.index=t.payload.activeIndex,e.itemInteraction.hover.dataKey=t.payload.activeDataKey,e.itemInteraction.hover.coordinate=t.payload.activeCoordinate},mouseLeaveChart(e){e.itemInteraction.hover.active=!1,e.axisInteraction.hover.active=!1},mouseLeaveItem(e){e.itemInteraction.hover.active=!1},setActiveClickItemIndex(e,t){e.syncInteraction.active=!1,e.itemInteraction.click.active=!0,e.keyboardInteraction.active=!1,e.itemInteraction.click.index=t.payload.activeIndex,e.itemInteraction.click.dataKey=t.payload.activeDataKey,e.itemInteraction.click.coordinate=t.payload.activeCoordinate},setMouseOverAxisIndex(e,t){e.syncInteraction.active=!1,e.axisInteraction.hover.active=!0,e.keyboardInteraction.active=!1,e.axisInteraction.hover.index=t.payload.activeIndex,e.axisInteraction.hover.dataKey=t.payload.activeDataKey,e.axisInteraction.hover.coordinate=t.payload.activeCoordinate},setMouseClickAxisIndex(e,t){e.syncInteraction.active=!1,e.keyboardInteraction.active=!1,e.axisInteraction.click.active=!0,e.axisInteraction.click.index=t.payload.activeIndex,e.axisInteraction.click.dataKey=t.payload.activeDataKey,e.axisInteraction.click.coordinate=t.payload.activeCoordinate},setSyncInteraction(e,t){e.syncInteraction=t.payload},setKeyboardInteraction(e,t){e.keyboardInteraction.active=t.payload.active,e.keyboardInteraction.index=t.payload.activeIndex,e.keyboardInteraction.coordinate=t.payload.activeCoordinate,e.keyboardInteraction.dataKey=t.payload.activeDataKey}}}),{addTooltipEntrySettings:vq,removeTooltipEntrySettings:xq,setTooltipSettingsState:wq,setActiveMouseOverItemIndex:JO,mouseLeaveItem:bq,mouseLeaveChart:QO,setActiveClickItemIndex:jq,setMouseOverAxisIndex:XO,setMouseClickAxisIndex:Sq,setSyncInteraction:C0,setKeyboardInteraction:E0}=YO.actions,_q=YO.reducer;function Ok(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Tf(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Ok(Object(r),!0).forEach(function(n){Nq(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ok(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Nq(e,t,r){return(t=kq(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function kq(e){var t=Cq(e,"string");return typeof t=="symbol"?t:t+""}function Cq(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Eq(e,t,r){return t==="axis"?r==="click"?e.axisInteraction.click:e.axisInteraction.hover:r==="click"?e.itemInteraction.click:e.itemInteraction.hover}function Aq(e){return e.index!=null}var ZO=(e,t,r,n)=>{if(t==null)return Xa;var s=Eq(e,t,r);if(s==null)return Xa;if(s.active)return s;if(e.keyboardInteraction.active)return e.keyboardInteraction;if(e.syncInteraction.active&&e.syncInteraction.index!=null)return e.syncInteraction;var i=e.settings.active===!0;if(Aq(s)){if(i)return Tf(Tf({},s),{},{active:!0})}else if(n!=null)return{active:!0,coordinate:void 0,dataKey:void 0,index:n};return Tf(Tf({},Xa),{},{coordinate:s.coordinate})},jw=(e,t)=>{var r=e==null?void 0:e.index;if(r==null)return null;var n=Number(r);if(!qr(n))return r;var s=0,i=1/0;return t.length>0&&(i=t.length-1),String(Math.max(s,Math.min(n,i)))},e4=(e,t,r,n,s,i,l,u)=>{if(!(i==null||u==null)){var d=l[0],m=d==null?void 0:u(d.positions,i);if(m!=null)return m;var f=s==null?void 0:s[Number(i)];if(f)switch(r){case"horizontal":return{x:f.coordinate,y:(n.top+t)/2};default:return{x:(n.left+e)/2,y:f.coordinate}}}},t4=(e,t,r,n)=>{if(t==="axis")return e.tooltipItemPayloads;if(e.tooltipItemPayloads.length===0)return[];var s;return r==="hover"?s=e.itemInteraction.hover.dataKey:s=e.itemInteraction.click.dataKey,s==null&&n!=null?[e.tooltipItemPayloads[0]]:e.tooltipItemPayloads.filter(i=>{var l;return((l=i.settings)===null||l===void 0?void 0:l.dataKey)===s})},ud=e=>e.options.tooltipPayloadSearcher,Ec=e=>e.tooltip;function Tk(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Ik(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Tk(Object(r),!0).forEach(function(n){Pq(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Tk(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Pq(e,t,r){return(t=Oq(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Oq(e){var t=Tq(e,"string");return typeof t=="symbol"?t:t+""}function Tq(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Iq(e,t){return e??t}var r4=(e,t,r,n,s,i,l)=>{if(!(t==null||i==null)){var{chartData:u,computedData:d,dataStartIndex:m,dataEndIndex:f}=r,p=[];return e.reduce((y,x)=>{var j,{dataDefinedOnItem:b,settings:S}=x,N=Iq(b,u),E=Array.isArray(N)?LA(N,m,f):N,k=(j=S==null?void 0:S.dataKey)!==null&&j!==void 0?j:n,T=S==null?void 0:S.nameKey,O;if(n&&Array.isArray(E)&&!Array.isArray(E[0])&&l==="axis"?O=qL(E,n,s):O=i(E,t,d,T),Array.isArray(O))O.forEach(R=>{var q=Ik(Ik({},S),{},{name:R.name,unit:R.unit,color:void 0,fill:void 0});y.push(oN({tooltipEntrySettings:q,dataKey:R.dataKey,payload:R.payload,value:as(R.payload,R.dataKey),name:R.name}))});else{var P;y.push(oN({tooltipEntrySettings:S,dataKey:k,payload:O,value:as(O,k),name:(P=as(O,T))!==null&&P!==void 0?P:S==null?void 0:S.name}))}return y},p)}},Sw=pe([xn,er,uO,sw,vn],IO),Dq=pe([e=>e.graphicalItems.cartesianItems,e=>e.graphicalItems.polarItems],(e,t)=>[...e,...t]),Rq=pe([vn,Nc],dO),dd=pe([Dq,xn,Rq],fO,{memoizeOptions:{resultEqualityCheck:$m}}),$q=pe([dd],e=>e.filter(Dm)),Mq=pe([dd],pO,{memoizeOptions:{resultEqualityCheck:$m}}),Ac=pe([Mq,oo],gO),Fq=pe([$q,oo,xn],oO),_w=pe([Ac,xn,dd],yO),n4=pe([xn],mw),Lq=pe([xn],e=>e.allowDataOverflow),s4=pe([n4,Lq],FP),zq=pe([dd],e=>e.filter(Dm)),Bq=pe([Fq,zq,Pm],wO),Uq=pe([Bq,oo,vn,s4],bO),Wq=pe([dd],mO),Vq=pe([Ac,xn,Wq,pw,vn],_O,{memoizeOptions:{resultEqualityCheck:Rm}}),qq=pe([NO,vn,Nc],kc),Hq=pe([qq,vn],EO),Kq=pe([kO,vn,Nc],kc),Gq=pe([Kq,vn],AO),Yq=pe([CO,vn,Nc],kc),Jq=pe([Yq,vn],PO),Qq=pe([Hq,Jq,Gq],Mh),Xq=pe([xn,n4,s4,Uq,Vq,Qq,er,vn],OO),i4=pe([xn,er,Ac,_w,Pm,vn,Xq],TO),Zq=pe([i4,xn,Sw],DO),eH=pe([xn,i4,Zq,vn],RO),a4=e=>{var t=vn(e),r=Nc(e),n=!1;return cd(e,t,r,n)},o4=pe([xn,a4],Om),l4=pe([xn,Sw,eH,o4],yw),tH=pe([er,_w,xn,vn],UO),rH=pe([er,_w,xn,vn],WO),nH=(e,t,r,n,s,i,l,u)=>{if(t){var{type:d}=t,m=Xo(e,u);if(n){var f=r==="scaleBand"&&n.bandwidth?n.bandwidth()/2:2,p=d==="category"&&n.bandwidth?n.bandwidth()/f:0;return p=u==="angleAxis"&&s!=null&&(s==null?void 0:s.length)>=2?Ls(s[0]-s[1])*2*p:p,m&&l?l.map((y,x)=>({coordinate:n(y)+p,value:y,index:x,offset:p})):n.domain().map((y,x)=>({coordinate:n(y)+p,value:i?i[y]:y,index:x,offset:p}))}}},Ea=pe([er,xn,Sw,l4,a4,tH,rH,vn],nH),Nw=pe([qO,HO,gq],(e,t,r)=>KO(r.shared,e,t)),c4=e=>e.tooltip.settings.trigger,kw=e=>e.tooltip.settings.defaultIndex,zm=pe([Ec,Nw,c4,kw],ZO),uc=pe([zm,Ac],jw),u4=pe([Ea,uc],GO),d4=pe([zm],e=>{if(e)return e.dataKey}),f4=pe([Ec,Nw,c4,kw],t4),sH=pe([Sa,_a,er,On,Ea,kw,f4,ud],e4),iH=pe([zm,sH],(e,t)=>e!=null&&e.coordinate?e.coordinate:t),aH=pe([zm],e=>e.active),oH=pe([f4,uc,oo,xO,u4,ud,Nw],r4);pe([oH],e=>{if(e!=null){var t=e.map(r=>r.payload).filter(r=>r!=null);return Array.from(new Set(t))}});function Dk(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Rk(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Dk(Object(r),!0).forEach(function(n){lH(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Dk(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function lH(e,t,r){return(t=cH(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function cH(e){var t=uH(e,"string");return typeof t=="symbol"?t:t+""}function uH(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var dH=()=>lt(xn),fH=()=>{var e=dH(),t=lt(Ea),r=lt(l4);return wh(!e||!r?void 0:Rk(Rk({},e),{},{scale:r}),t)};function $k(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function zl(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?$k(Object(r),!0).forEach(function(n){hH(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):$k(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function hH(e,t,r){return(t=mH(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function mH(e){var t=pH(e,"string");return typeof t=="symbol"?t:t+""}function pH(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var gH=(e,t,r,n)=>{var s=t.find(i=>i&&i.index===r);if(s){if(e==="horizontal")return{x:s.coordinate,y:n.chartY};if(e==="vertical")return{x:n.chartX,y:s.coordinate}}return{x:0,y:0}},yH=(e,t,r,n)=>{var s=t.find(m=>m&&m.index===r);if(s){if(e==="centric"){var i=s.coordinate,{radius:l}=n;return zl(zl(zl({},n),Wn(n.cx,n.cy,l,i)),{},{angle:i,radius:l})}var u=s.coordinate,{angle:d}=n;return zl(zl(zl({},n),Wn(n.cx,n.cy,u,d)),{},{angle:d,radius:u})}return{angle:0,clockWise:!1,cx:0,cy:0,endAngle:0,innerRadius:0,outerRadius:0,radius:0,startAngle:0,x:0,y:0}};function vH(e,t){var{chartX:r,chartY:n}=e;return r>=t.left&&r<=t.left+t.width&&n>=t.top&&n<=t.top+t.height}var h4=(e,t,r,n,s)=>{var i,l=-1,u=(i=t==null?void 0:t.length)!==null&&i!==void 0?i:0;if(u<=1||e==null)return 0;if(n==="angleAxis"&&s!=null&&Math.abs(Math.abs(s[1]-s[0])-360)<=1e-6)for(var d=0;d<u;d++){var m=d>0?r[d-1].coordinate:r[u-1].coordinate,f=r[d].coordinate,p=d>=u-1?r[0].coordinate:r[d+1].coordinate,y=void 0;if(Ls(f-m)!==Ls(p-f)){var x=[];if(Ls(p-f)===Ls(s[1]-s[0])){y=p;var j=f+s[1]-s[0];x[0]=Math.min(j,(j+m)/2),x[1]=Math.max(j,(j+m)/2)}else{y=m;var b=p+s[1]-s[0];x[0]=Math.min(f,(b+f)/2),x[1]=Math.max(f,(b+f)/2)}var S=[Math.min(f,(y+f)/2),Math.max(f,(y+f)/2)];if(e>S[0]&&e<=S[1]||e>=x[0]&&e<=x[1]){({index:l}=r[d]);break}}else{var N=Math.min(m,p),E=Math.max(m,p);if(e>(N+f)/2&&e<=(E+f)/2){({index:l}=r[d]);break}}}else if(t){for(var k=0;k<u;k++)if(k===0&&e<=(t[k].coordinate+t[k+1].coordinate)/2||k>0&&k<u-1&&e>(t[k].coordinate+t[k-1].coordinate)/2&&e<=(t[k].coordinate+t[k+1].coordinate)/2||k===u-1&&e>(t[k].coordinate+t[k-1].coordinate)/2){({index:l}=t[k]);break}}return l},xH=()=>lt(sw),Cw=(e,t)=>t,m4=(e,t,r)=>r,Ew=(e,t,r,n)=>n,wH=pe(Ea,e=>um(e,t=>t.coordinate)),Aw=pe([Ec,Cw,m4,Ew],ZO),p4=pe([Aw,Ac],jw),bH=(e,t,r)=>{if(t!=null){var n=Ec(e);return t==="axis"?r==="hover"?n.axisInteraction.hover.dataKey:n.axisInteraction.click.dataKey:r==="hover"?n.itemInteraction.hover.dataKey:n.itemInteraction.click.dataKey}},g4=pe([Ec,Cw,m4,Ew],t4),Fh=pe([Sa,_a,er,On,Ea,Ew,g4,ud],e4),jH=pe([Aw,Fh],(e,t)=>{var r;return(r=e.coordinate)!==null&&r!==void 0?r:t}),y4=pe([Ea,p4],GO),SH=pe([g4,p4,oo,xO,y4,ud,Cw],r4),_H=pe([Aw],e=>({isActive:e.active,activeIndex:e.index})),NH=(e,t,r,n,s,i,l)=>{if(!(!e||!r||!n||!s)&&vH(e,l)){var u=mB(e,t),d=h4(u,i,s,r,n),m=gH(t,s,d,e);return{activeIndex:String(d),activeCoordinate:m}}},kH=(e,t,r,n,s,i,l)=>{if(!(!e||!n||!s||!i||!r)){var u=h7(e,r);if(u){var d=pB(u,t),m=h4(d,l,i,n,s),f=yH(t,i,m,u);return{activeIndex:String(m),activeCoordinate:f}}}},CH=(e,t,r,n,s,i,l,u)=>{if(!(!e||!t||!n||!s||!i))return t==="horizontal"||t==="vertical"?NH(e,t,n,s,i,l,u):kH(e,t,r,n,s,i,l)},EH=pe(e=>e.zIndex.zIndexMap,(e,t)=>t,(e,t,r)=>r,(e,t,r)=>{if(t!=null){var n=e[t];if(n!=null)return r?n.panoramaElementId:n.elementId}}),AH=pe(e=>e.zIndex.zIndexMap,e=>{var t=Object.keys(e).map(n=>parseInt(n,10)).concat(Object.values(js)),r=Array.from(new Set(t));return r.sort((n,s)=>n-s)},{memoizeOptions:{resultEqualityCheck:yV}});function Mk(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Fk(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Mk(Object(r),!0).forEach(function(n){PH(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Mk(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function PH(e,t,r){return(t=OH(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function OH(e){var t=TH(e,"string");return typeof t=="symbol"?t:t+""}function TH(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var IH={},DH={zIndexMap:Object.values(js).reduce((e,t)=>Fk(Fk({},e),{},{[t]:{elementId:void 0,panoramaElementId:void 0,consumers:0}}),IH)},RH=new Set(Object.values(js));function $H(e){return RH.has(e)}var v4=_s({name:"zIndex",initialState:DH,reducers:{registerZIndexPortal:{reducer:(e,t)=>{var{zIndex:r}=t.payload;e.zIndexMap[r]?e.zIndexMap[r].consumers+=1:e.zIndexMap[r]={consumers:1,elementId:void 0,panoramaElementId:void 0}},prepare:mn()},unregisterZIndexPortal:{reducer:(e,t)=>{var{zIndex:r}=t.payload;e.zIndexMap[r]&&(e.zIndexMap[r].consumers-=1,e.zIndexMap[r].consumers<=0&&!$H(r)&&delete e.zIndexMap[r])},prepare:mn()},registerZIndexPortalId:{reducer:(e,t)=>{var{zIndex:r,elementId:n,isPanorama:s}=t.payload;e.zIndexMap[r]?s?e.zIndexMap[r].panoramaElementId=n:e.zIndexMap[r].elementId=n:e.zIndexMap[r]={consumers:0,elementId:s?void 0:n,panoramaElementId:s?n:void 0}},prepare:mn()},unregisterZIndexPortalId:{reducer:(e,t)=>{var{zIndex:r}=t.payload;e.zIndexMap[r]&&(t.payload.isPanorama?e.zIndexMap[r].panoramaElementId=void 0:e.zIndexMap[r].elementId=void 0)},prepare:mn()}}}),{registerZIndexPortal:MH,unregisterZIndexPortal:FH,registerZIndexPortalId:LH,unregisterZIndexPortalId:zH}=v4.actions,BH=v4.reducer;function lo(e){var{zIndex:t,children:r}=e,n=QB(),s=n&&t!==void 0&&t!==0,i=Ws(),l=Hr();v.useLayoutEffect(()=>s?(l(MH({zIndex:t})),()=>{l(FH({zIndex:t}))}):wc,[l,t,s]);var u=lt(m=>EH(m,t,i));if(!s)return r;if(!u)return null;var d=document.getElementById(u);return d?hC.createPortal(r,d):null}function A0(){return A0=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},A0.apply(null,arguments)}function Lk(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function If(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Lk(Object(r),!0).forEach(function(n){UH(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Lk(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function UH(e,t,r){return(t=WH(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function WH(e){var t=VH(e,"string");return typeof t=="symbol"?t:t+""}function VH(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function qH(e){var{cursor:t,cursorComp:r,cursorProps:n}=e;return v.isValidElement(t)?v.cloneElement(t,n):v.createElement(r,n)}function HH(e){var t,{coordinate:r,payload:n,index:s,offset:i,tooltipAxisBandSize:l,layout:u,cursor:d,tooltipEventType:m,chartName:f}=e,p=r,y=n,x=s;if(!d||!p||f!=="ScatterChart"&&m!=="axis")return null;var j,b,S;if(f==="ScatterChart")j=p,b=EU,S=js.cursorLine;else if(f==="BarChart")j=AU(u,p,i,l),b=ZA,S=js.cursorRectangle;else if(u==="radial"&&ZE(p)){var{cx:N,cy:E,radius:k,startAngle:T,endAngle:O}=eP(p);j={cx:N,cy:E,startAngle:T,endAngle:O,innerRadius:k,outerRadius:k},b=rP,S=js.cursorLine}else j={points:y7(u,p,i)},b=GA,S=js.cursorLine;var P=typeof d=="object"&&"className"in d?d.className:void 0,R=If(If(If(If({stroke:"#ccc",pointerEvents:"none"},i),j),hx(d)),{},{payload:y,payloadIndex:x,className:jr("recharts-tooltip-cursor",P)});return v.createElement(lo,{zIndex:(t=e.zIndex)!==null&&t!==void 0?t:S},v.createElement(qH,{cursor:d,cursorComp:b,cursorProps:R}))}function KH(e){var t=fH(),r=GB(),n=bm(),s=xH();return t==null||r==null||n==null||s==null?null:v.createElement(HH,A0({},e,{offset:r,layout:n,tooltipAxisBandSize:t,chartName:s}))}var x4=v.createContext(null),GH=()=>v.useContext(x4),sv={exports:{}},zk;function YH(){return zk||(zk=1,(function(e){var t=Object.prototype.hasOwnProperty,r="~";function n(){}Object.create&&(n.prototype=Object.create(null),new n().__proto__||(r=!1));function s(d,m,f){this.fn=d,this.context=m,this.once=f||!1}function i(d,m,f,p,y){if(typeof f!="function")throw new TypeError("The listener must be a function");var x=new s(f,p||d,y),j=r?r+m:m;return d._events[j]?d._events[j].fn?d._events[j]=[d._events[j],x]:d._events[j].push(x):(d._events[j]=x,d._eventsCount++),d}function l(d,m){--d._eventsCount===0?d._events=new n:delete d._events[m]}function u(){this._events=new n,this._eventsCount=0}u.prototype.eventNames=function(){var m=[],f,p;if(this._eventsCount===0)return m;for(p in f=this._events)t.call(f,p)&&m.push(r?p.slice(1):p);return Object.getOwnPropertySymbols?m.concat(Object.getOwnPropertySymbols(f)):m},u.prototype.listeners=function(m){var f=r?r+m:m,p=this._events[f];if(!p)return[];if(p.fn)return[p.fn];for(var y=0,x=p.length,j=new Array(x);y<x;y++)j[y]=p[y].fn;return j},u.prototype.listenerCount=function(m){var f=r?r+m:m,p=this._events[f];return p?p.fn?1:p.length:0},u.prototype.emit=function(m,f,p,y,x,j){var b=r?r+m:m;if(!this._events[b])return!1;var S=this._events[b],N=arguments.length,E,k;if(S.fn){switch(S.once&&this.removeListener(m,S.fn,void 0,!0),N){case 1:return S.fn.call(S.context),!0;case 2:return S.fn.call(S.context,f),!0;case 3:return S.fn.call(S.context,f,p),!0;case 4:return S.fn.call(S.context,f,p,y),!0;case 5:return S.fn.call(S.context,f,p,y,x),!0;case 6:return S.fn.call(S.context,f,p,y,x,j),!0}for(k=1,E=new Array(N-1);k<N;k++)E[k-1]=arguments[k];S.fn.apply(S.context,E)}else{var T=S.length,O;for(k=0;k<T;k++)switch(S[k].once&&this.removeListener(m,S[k].fn,void 0,!0),N){case 1:S[k].fn.call(S[k].context);break;case 2:S[k].fn.call(S[k].context,f);break;case 3:S[k].fn.call(S[k].context,f,p);break;case 4:S[k].fn.call(S[k].context,f,p,y);break;default:if(!E)for(O=1,E=new Array(N-1);O<N;O++)E[O-1]=arguments[O];S[k].fn.apply(S[k].context,E)}}return!0},u.prototype.on=function(m,f,p){return i(this,m,f,p,!1)},u.prototype.once=function(m,f,p){return i(this,m,f,p,!0)},u.prototype.removeListener=function(m,f,p,y){var x=r?r+m:m;if(!this._events[x])return this;if(!f)return l(this,x),this;var j=this._events[x];if(j.fn)j.fn===f&&(!y||j.once)&&(!p||j.context===p)&&l(this,x);else{for(var b=0,S=[],N=j.length;b<N;b++)(j[b].fn!==f||y&&!j[b].once||p&&j[b].context!==p)&&S.push(j[b]);S.length?this._events[x]=S.length===1?S[0]:S:l(this,x)}return this},u.prototype.removeAllListeners=function(m){var f;return m?(f=r?r+m:m,this._events[f]&&l(this,f)):(this._events=new n,this._eventsCount=0),this},u.prototype.off=u.prototype.removeListener,u.prototype.addListener=u.prototype.on,u.prefixed=r,u.EventEmitter=u,e.exports=u})(sv)),sv.exports}var JH=YH();const QH=_i(JH);var Wu=new QH,P0="recharts.syncEvent.tooltip",Bk="recharts.syncEvent.brush";function XH(e,t){if(t){var r=Number.parseInt(t,10);if(!Fi(r))return e==null?void 0:e[r]}}var ZH={chartName:"",tooltipPayloadSearcher:void 0,eventEmitter:void 0,defaultTooltipEventType:"axis"},w4=_s({name:"options",initialState:ZH,reducers:{createEventEmitter:e=>{e.eventEmitter==null&&(e.eventEmitter=Symbol("rechartsEventEmitter"))}}}),eK=w4.reducer,{createEventEmitter:tK}=w4.actions;function rK(e){return e.tooltip.syncInteraction}var nK={chartData:void 0,computedData:void 0,dataStartIndex:0,dataEndIndex:0},b4=_s({name:"chartData",initialState:nK,reducers:{setChartData(e,t){if(e.chartData=t.payload,t.payload==null){e.dataStartIndex=0,e.dataEndIndex=0;return}t.payload.length>0&&e.dataEndIndex!==t.payload.length-1&&(e.dataEndIndex=t.payload.length-1)},setComputedData(e,t){e.computedData=t.payload},setDataStartEndIndexes(e,t){var{startIndex:r,endIndex:n}=t.payload;r!=null&&(e.dataStartIndex=r),n!=null&&(e.dataEndIndex=n)}}}),{setChartData:Uk,setDataStartEndIndexes:sK,setComputedData:tee}=b4.actions,iK=b4.reducer,aK=["x","y"];function Wk(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Bl(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Wk(Object(r),!0).forEach(function(n){oK(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Wk(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function oK(e,t,r){return(t=lK(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function lK(e){var t=cK(e,"string");return typeof t=="symbol"?t:t+""}function cK(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function uK(e,t){if(e==null)return{};var r,n,s=dK(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function dK(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function fK(){var e=lt(iw),t=lt(aw),r=Hr(),n=lt(tO),s=lt(Ea),i=bm(),l=wm(),u=lt(d=>d.rootProps.className);v.useEffect(()=>{if(e==null)return wc;var d=(m,f,p)=>{if(t!==p&&e===m){if(n==="index"){var y;if(l&&f!==null&&f!==void 0&&(y=f.payload)!==null&&y!==void 0&&y.coordinate&&f.payload.sourceViewBox){var x=f.payload.coordinate,{x:j,y:b}=x,S=uK(x,aK),{x:N,y:E,width:k,height:T}=f.payload.sourceViewBox,O=Bl(Bl({},S),{},{x:l.x+(k?(j-N)/k:0)*l.width,y:l.y+(T?(b-E)/T:0)*l.height});r(Bl(Bl({},f),{},{payload:Bl(Bl({},f.payload),{},{coordinate:O})}))}else r(f);return}if(s!=null){var P;if(typeof n=="function"){var R={activeTooltipIndex:f.payload.index==null?void 0:Number(f.payload.index),isTooltipActive:f.payload.active,activeIndex:f.payload.index==null?void 0:Number(f.payload.index),activeLabel:f.payload.label,activeDataKey:f.payload.dataKey,activeCoordinate:f.payload.coordinate},q=n(s,R);P=s[q]}else n==="value"&&(P=s.find(K=>String(K.value)===f.payload.label));var{coordinate:F}=f.payload;if(P==null||f.payload.active===!1||F==null||l==null){r(C0({active:!1,coordinate:void 0,dataKey:void 0,index:null,label:void 0,sourceViewBox:void 0}));return}var{x:V,y:B}=F,Q=Math.min(V,l.x+l.width),ae=Math.min(B,l.y+l.height),ne={x:i==="horizontal"?P.coordinate:Q,y:i==="horizontal"?ae:P.coordinate},me=C0({active:f.payload.active,coordinate:ne,dataKey:f.payload.dataKey,index:String(P.index),label:f.payload.label,sourceViewBox:f.payload.sourceViewBox});r(me)}}};return Wu.on(P0,d),()=>{Wu.off(P0,d)}},[u,r,t,e,n,s,i,l])}function hK(){var e=lt(iw),t=lt(aw),r=Hr();v.useEffect(()=>{if(e==null)return wc;var n=(s,i,l)=>{t!==l&&e===s&&r(sK(i))};return Wu.on(Bk,n),()=>{Wu.off(Bk,n)}},[r,t,e])}function mK(){var e=Hr();v.useEffect(()=>{e(tK())},[e]),fK(),hK()}function pK(e,t,r,n,s,i){var l=lt(x=>bH(x,e,t)),u=lt(aw),d=lt(iw),m=lt(tO),f=lt(rK),p=f==null?void 0:f.active,y=wm();v.useEffect(()=>{if(!p&&d!=null&&u!=null){var x=C0({active:i,coordinate:r,dataKey:l,index:s,label:typeof n=="number"?String(n):n,sourceViewBox:y});Wu.emit(P0,d,x,u)}},[p,r,l,s,n,u,d,m,i,y])}function Vk(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function qk(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Vk(Object(r),!0).forEach(function(n){gK(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Vk(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function gK(e,t,r){return(t=yK(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function yK(e){var t=vK(e,"string");return typeof t=="symbol"?t:t+""}function vK(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function xK(e){return e.dataKey}function wK(e,t){return v.isValidElement(e)?v.cloneElement(e,t):typeof e=="function"?v.createElement(e,t):v.createElement(aU,t)}var Hk=[],bK={allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",axisId:0,contentStyle:{},cursor:!0,filterNull:!0,isAnimationActive:!bc.isSsr,itemSorter:"name",itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,wrapperStyle:{}};function jK(e){var t,r,n=ii(e,bK),{active:s,allowEscapeViewBox:i,animationDuration:l,animationEasing:u,content:d,filterNull:m,isAnimationActive:f,offset:p,payloadUniqBy:y,position:x,reverseDirection:j,useTranslate3d:b,wrapperStyle:S,cursor:N,shared:E,trigger:k,defaultIndex:T,portal:O,axisId:P}=n,R=Hr(),q=typeof T=="number"?String(T):T;v.useEffect(()=>{R(wq({shared:E,trigger:k,axisId:P,active:s,defaultIndex:q}))},[R,E,k,P,s,q]);var F=wm(),V=KA(),B=pq(E),{activeIndex:Q,isActive:ae}=(t=lt(ge=>_H(ge,B,k,q)))!==null&&t!==void 0?t:{},ne=lt(ge=>SH(ge,B,k,q)),me=lt(ge=>y4(ge,B,k,q)),K=lt(ge=>jH(ge,B,k,q)),te=ne,se=GH(),de=(r=s??ae)!==null&&r!==void 0?r:!1,[xe,I]=r8([te,de]),H=B==="axis"?me:void 0;pK(B,k,K,H,Q,de);var Ie=O??se;if(Ie==null||F==null||B==null)return null;var X=te??Hk;de||(X=Hk),m&&X.length&&(X=Ez(X.filter(ge=>ge.value!=null&&(ge.hide!==!0||n.includeHidden)),y,xK));var ve=X.length>0,ce=v.createElement(hU,{allowEscapeViewBox:i,animationDuration:l,animationEasing:u,isAnimationActive:f,active:de,coordinate:K,hasPayload:ve,offset:p,position:x,reverseDirection:j,useTranslate3d:b,viewBox:F,wrapperStyle:S,lastBoundingBox:xe,innerRef:I,hasPortalFromProps:!!O},wK(d,qk(qk({},n),{},{payload:X,label:H,active:de,activeIndex:Q,coordinate:K,accessibilityLayer:V})));return v.createElement(v.Fragment,null,hC.createPortal(ce,Ie),de&&v.createElement(KH,{cursor:N,tooltipEventType:B,coordinate:K,payload:X,index:Q}))}var Pw=e=>null;Pw.displayName="Cell";function SK(e,t,r){return(t=_K(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function _K(e){var t=NK(e,"string");return typeof t=="symbol"?t:t+""}function NK(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class kK{constructor(t){SK(this,"cache",new Map),this.maxSize=t}get(t){var r=this.cache.get(t);return r!==void 0&&(this.cache.delete(t),this.cache.set(t,r)),r}set(t,r){if(this.cache.has(t))this.cache.delete(t);else if(this.cache.size>=this.maxSize){var n=this.cache.keys().next().value;this.cache.delete(n)}this.cache.set(t,r)}clear(){this.cache.clear()}size(){return this.cache.size}}function Kk(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function CK(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Kk(Object(r),!0).forEach(function(n){EK(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Kk(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function EK(e,t,r){return(t=AK(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function AK(e){var t=PK(e,"string");return typeof t=="symbol"?t:t+""}function PK(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var OK={cacheSize:2e3,enableCache:!0},j4=CK({},OK),Gk=new kK(j4.cacheSize),TK={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},Yk="recharts_measurement_span";function IK(e,t){var r=t.fontSize||"",n=t.fontFamily||"",s=t.fontWeight||"",i=t.fontStyle||"",l=t.letterSpacing||"",u=t.textTransform||"";return"".concat(e,"|").concat(r,"|").concat(n,"|").concat(s,"|").concat(i,"|").concat(l,"|").concat(u)}var Jk=(e,t)=>{try{var r=document.getElementById(Yk);r||(r=document.createElement("span"),r.setAttribute("id",Yk),r.setAttribute("aria-hidden","true"),document.body.appendChild(r)),Object.assign(r.style,TK,t),r.textContent="".concat(e);var n=r.getBoundingClientRect();return{width:n.width,height:n.height}}catch{return{width:0,height:0}}},ku=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(t==null||bc.isSsr)return{width:0,height:0};if(!j4.enableCache)return Jk(t,r);var n=IK(t,r),s=Gk.get(n);if(s)return s;var i=Jk(t,r);return Gk.set(n,i),i},Qk=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,Xk=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,DK=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,RK=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,S4={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},$K=Object.keys(S4),Yl="NaN";function MK(e,t){return e*S4[t]}class xs{static parse(t){var r,[,n,s]=(r=RK.exec(t))!==null&&r!==void 0?r:[];return new xs(parseFloat(n),s??"")}constructor(t,r){this.num=t,this.unit=r,this.num=t,this.unit=r,Fi(t)&&(this.unit=""),r!==""&&!DK.test(r)&&(this.num=NaN,this.unit=""),$K.includes(r)&&(this.num=MK(t,r),this.unit="px")}add(t){return this.unit!==t.unit?new xs(NaN,""):new xs(this.num+t.num,this.unit)}subtract(t){return this.unit!==t.unit?new xs(NaN,""):new xs(this.num-t.num,this.unit)}multiply(t){return this.unit!==""&&t.unit!==""&&this.unit!==t.unit?new xs(NaN,""):new xs(this.num*t.num,this.unit||t.unit)}divide(t){return this.unit!==""&&t.unit!==""&&this.unit!==t.unit?new xs(NaN,""):new xs(this.num/t.num,this.unit||t.unit)}toString(){return"".concat(this.num).concat(this.unit)}isNaN(){return Fi(this.num)}}function _4(e){if(e.includes(Yl))return Yl;for(var t=e;t.includes("*")||t.includes("/");){var r,[,n,s,i]=(r=Qk.exec(t))!==null&&r!==void 0?r:[],l=xs.parse(n??""),u=xs.parse(i??""),d=s==="*"?l.multiply(u):l.divide(u);if(d.isNaN())return Yl;t=t.replace(Qk,d.toString())}for(;t.includes("+")||/.-\d+(?:\.\d+)?/.test(t);){var m,[,f,p,y]=(m=Xk.exec(t))!==null&&m!==void 0?m:[],x=xs.parse(f??""),j=xs.parse(y??""),b=p==="+"?x.add(j):x.subtract(j);if(b.isNaN())return Yl;t=t.replace(Xk,b.toString())}return t}var Zk=/\(([^()]*)\)/;function FK(e){for(var t=e,r;(r=Zk.exec(t))!=null;){var[,n]=r;t=t.replace(Zk,_4(n))}return t}function LK(e){var t=e.replace(/\s+/g,"");return t=FK(t),t=_4(t),t}function zK(e){try{return LK(e)}catch{return Yl}}function iv(e){var t=zK(e.slice(5,-1));return t===Yl?"":t}var BK=["x","y","lineHeight","capHeight","fill","scaleToFit","textAnchor","verticalAnchor"],UK=["dx","dy","angle","className","breakAll"];function O0(){return O0=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},O0.apply(null,arguments)}function e2(e,t){if(e==null)return{};var r,n,s=WK(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function WK(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var N4=/[ \f\n\r\t\v\u2028\u2029]+/,k4=e=>{var{children:t,breakAll:r,style:n}=e;try{var s=[];Pn(t)||(r?s=t.toString().split(""):s=t.toString().split(N4));var i=s.map(u=>({word:u,width:ku(u,n).width})),l=r?0:ku("",n).width;return{wordsWithComputedWidth:i,spaceWidth:l}}catch{return null}};function VK(e){return e==="start"||e==="middle"||e==="end"||e==="inherit"}var C4=(e,t,r,n)=>e.reduce((s,i)=>{var{word:l,width:u}=i,d=s[s.length-1];if(d&&u!=null&&(t==null||n||d.width+u+r<Number(t)))d.words.push(l),d.width+=u+r;else{var m={words:[l],width:u};s.push(m)}return s},[]),E4=e=>e.reduce((t,r)=>t.width>r.width?t:r),qK="",t2=(e,t,r,n,s,i,l,u)=>{var d=e.slice(0,t),m=k4({breakAll:r,style:n,children:d+qK});if(!m)return[!1,[]];var f=C4(m.wordsWithComputedWidth,i,l,u),p=f.length>s||E4(f).width>Number(i);return[p,f]},HK=(e,t,r,n,s)=>{var{maxLines:i,children:l,style:u,breakAll:d}=e,m=mt(i),f=String(l),p=C4(t,n,r,s);if(!m||s)return p;var y=p.length>i||E4(p).width>Number(n);if(!y)return p;for(var x=0,j=f.length-1,b=0,S;x<=j&&b<=f.length-1;){var N=Math.floor((x+j)/2),E=N-1,[k,T]=t2(f,E,d,u,i,n,r,s),[O]=t2(f,N,d,u,i,n,r,s);if(!k&&!O&&(x=N+1),k&&O&&(j=N-1),!k&&O){S=T;break}b++}return S||p},r2=e=>{var t=Pn(e)?[]:e.toString().split(N4);return[{words:t,width:void 0}]},KK=e=>{var{width:t,scaleToFit:r,children:n,style:s,breakAll:i,maxLines:l}=e;if((t||r)&&!bc.isSsr){var u,d,m=k4({breakAll:i,children:n,style:s});if(m){var{wordsWithComputedWidth:f,spaceWidth:p}=m;u=f,d=p}else return r2(n);return HK({breakAll:i,children:n,maxLines:l,style:s},u,d,t,!!r)}return r2(n)},A4="#808080",GK={breakAll:!1,capHeight:"0.71em",fill:A4,lineHeight:"1em",scaleToFit:!1,textAnchor:"start",verticalAnchor:"end",x:0,y:0},Ow=v.forwardRef((e,t)=>{var r=ii(e,GK),{x:n,y:s,lineHeight:i,capHeight:l,fill:u,scaleToFit:d,textAnchor:m,verticalAnchor:f}=r,p=e2(r,BK),y=v.useMemo(()=>KK({breakAll:p.breakAll,children:p.children,maxLines:p.maxLines,scaleToFit:d,style:p.style,width:p.width}),[p.breakAll,p.children,p.maxLines,d,p.style,p.width]),{dx:x,dy:j,angle:b,className:S,breakAll:N}=p,E=e2(p,UK);if(!Li(n)||!Li(s)||y.length===0)return null;var k=Number(n)+(mt(x)?x:0),T=Number(s)+(mt(j)?j:0);if(!qr(k)||!qr(T))return null;var O;switch(f){case"start":O=iv("calc(".concat(l,")"));break;case"middle":O=iv("calc(".concat((y.length-1)/2," * -").concat(i," + (").concat(l," / 2))"));break;default:O=iv("calc(".concat(y.length-1," * -").concat(i,")"));break}var P=[];if(d){var R=y[0].width,{width:q}=p;P.push("scale(".concat(mt(q)&&mt(R)?q/R:1,")"))}return b&&P.push("rotate(".concat(b,", ").concat(k,", ").concat(T,")")),P.length&&(E.transform=P.join(" ")),v.createElement("text",O0({},ri(E),{ref:t,x:k,y:T,className:jr("recharts-text",S),textAnchor:m,fill:u.includes("url")?A4:u}),y.map((F,V)=>{var B=F.words.join(N?"":" ");return v.createElement("tspan",{x:k,dy:V===0?O:i,key:"".concat(B,"-").concat(V)},B)}))});Ow.displayName="Text";var YK=["labelRef"];function JK(e,t){if(e==null)return{};var r,n,s=QK(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function QK(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function n2(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Ur(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?n2(Object(r),!0).forEach(function(n){XK(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):n2(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function XK(e,t,r){return(t=ZK(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ZK(e){var t=eG(e,"string");return typeof t=="symbol"?t:t+""}function eG(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function sa(){return sa=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},sa.apply(null,arguments)}var P4=v.createContext(null),tG=e=>{var{x:t,y:r,upperWidth:n,lowerWidth:s,width:i,height:l,children:u}=e,d=v.useMemo(()=>({x:t,y:r,upperWidth:n,lowerWidth:s,width:i,height:l}),[t,r,n,s,i,l]);return v.createElement(P4.Provider,{value:d},u)},O4=()=>{var e=v.useContext(P4),t=wm();return e||qA(t)},rG=v.createContext(null),nG=()=>{var e=v.useContext(rG),t=lt(aO);return e||t},sG=e=>{var{value:t,formatter:r}=e,n=Pn(e.children)?t:e.children;return typeof r=="function"?r(n):n},Tw=e=>e!=null&&typeof e=="function",iG=(e,t)=>{var r=Ls(t-e),n=Math.min(Math.abs(t-e),360);return r*n},aG=(e,t,r,n,s)=>{var{offset:i,className:l}=e,{cx:u,cy:d,innerRadius:m,outerRadius:f,startAngle:p,endAngle:y,clockWise:x}=s,j=(m+f)/2,b=iG(p,y),S=b>=0?1:-1,N,E;switch(t){case"insideStart":N=p+S*i,E=x;break;case"insideEnd":N=y-S*i,E=!x;break;case"end":N=y+S*i,E=x;break;default:throw new Error("Unsupported position ".concat(t))}E=b<=0?E:!E;var k=Wn(u,d,j,N),T=Wn(u,d,j,N+(E?1:-1)*359),O="M".concat(k.x,",").concat(k.y,`
    A`).concat(j,",").concat(j,",0,1,").concat(E?0:1,`,
    `).concat(T.x,",").concat(T.y),P=Pn(e.id)?Iu("recharts-radial-line-"):e.id;return v.createElement("text",sa({},n,{dominantBaseline:"central",className:jr("recharts-radial-bar-label",l)}),v.createElement("defs",null,v.createElement("path",{id:P,d:O})),v.createElement("textPath",{xlinkHref:"#".concat(P)},r))},oG=(e,t,r)=>{var{cx:n,cy:s,innerRadius:i,outerRadius:l,startAngle:u,endAngle:d}=e,m=(u+d)/2;if(r==="outside"){var{x:f,y:p}=Wn(n,s,l+t,m);return{x:f,y:p,textAnchor:f>=n?"start":"end",verticalAnchor:"middle"}}if(r==="center")return{x:n,y:s,textAnchor:"middle",verticalAnchor:"middle"};if(r==="centerTop")return{x:n,y:s,textAnchor:"middle",verticalAnchor:"start"};if(r==="centerBottom")return{x:n,y:s,textAnchor:"middle",verticalAnchor:"end"};var y=(i+l)/2,{x,y:j}=Wn(n,s,y,m);return{x,y:j,textAnchor:"middle",verticalAnchor:"middle"}},T0=e=>"cx"in e&&mt(e.cx),lG=(e,t)=>{var{parentViewBox:r,offset:n,position:s}=e,i;r!=null&&!T0(r)&&(i=r);var{x:l,y:u,upperWidth:d,lowerWidth:m,height:f}=t,p=l,y=l+(d-m)/2,x=(p+y)/2,j=(d+m)/2,b=p+d/2,S=f>=0?1:-1,N=S*n,E=S>0?"end":"start",k=S>0?"start":"end",T=d>=0?1:-1,O=T*n,P=T>0?"end":"start",R=T>0?"start":"end";if(s==="top"){var q={x:p+d/2,y:u-N,textAnchor:"middle",verticalAnchor:E};return Ur(Ur({},q),i?{height:Math.max(u-i.y,0),width:d}:{})}if(s==="bottom"){var F={x:y+m/2,y:u+f+N,textAnchor:"middle",verticalAnchor:k};return Ur(Ur({},F),i?{height:Math.max(i.y+i.height-(u+f),0),width:m}:{})}if(s==="left"){var V={x:x-O,y:u+f/2,textAnchor:P,verticalAnchor:"middle"};return Ur(Ur({},V),i?{width:Math.max(V.x-i.x,0),height:f}:{})}if(s==="right"){var B={x:x+j+O,y:u+f/2,textAnchor:R,verticalAnchor:"middle"};return Ur(Ur({},B),i?{width:Math.max(i.x+i.width-B.x,0),height:f}:{})}var Q=i?{width:j,height:f}:{};return s==="insideLeft"?Ur({x:x+O,y:u+f/2,textAnchor:R,verticalAnchor:"middle"},Q):s==="insideRight"?Ur({x:x+j-O,y:u+f/2,textAnchor:P,verticalAnchor:"middle"},Q):s==="insideTop"?Ur({x:p+d/2,y:u+N,textAnchor:"middle",verticalAnchor:k},Q):s==="insideBottom"?Ur({x:y+m/2,y:u+f-N,textAnchor:"middle",verticalAnchor:E},Q):s==="insideTopLeft"?Ur({x:p+O,y:u+N,textAnchor:R,verticalAnchor:k},Q):s==="insideTopRight"?Ur({x:p+d-O,y:u+N,textAnchor:P,verticalAnchor:k},Q):s==="insideBottomLeft"?Ur({x:y+O,y:u+f-N,textAnchor:R,verticalAnchor:E},Q):s==="insideBottomRight"?Ur({x:y+m-O,y:u+f-N,textAnchor:P,verticalAnchor:E},Q):s&&typeof s=="object"&&(mt(s.x)||pa(s.x))&&(mt(s.y)||pa(s.y))?Ur({x:l+Si(s.x,j),y:u+Si(s.y,f),textAnchor:"end",verticalAnchor:"end"},Q):Ur({x:b,y:u+f/2,textAnchor:"middle",verticalAnchor:"middle"},Q)},cG={offset:5,zIndex:js.label};function Ya(e){var t=ii(e,cG),{viewBox:r,position:n,value:s,children:i,content:l,className:u="",textBreakAll:d,labelRef:m}=t,f=nG(),p=O4(),y=n==="center"?p:f??p,x,j,b;if(r==null?x=y:T0(r)?x=r:x=qA(r),!x||Pn(s)&&Pn(i)&&!v.isValidElement(l)&&typeof l!="function")return null;var S=Ur(Ur({},t),{},{viewBox:x});if(v.isValidElement(l)){var{labelRef:N}=S,E=JK(S,YK);return v.cloneElement(l,E)}if(typeof l=="function"){if(j=v.createElement(l,S),v.isValidElement(j))return j}else j=sG(t);var k=ri(t);if(T0(x)){if(n==="insideStart"||n==="insideEnd"||n==="end")return aG(t,n,j,k,x);b=oG(x,t.offset,t.position)}else b=lG(t,x);return v.createElement(lo,{zIndex:t.zIndex},v.createElement(Ow,sa({ref:m,className:jr("recharts-label",u)},k,b,{textAnchor:VK(k.textAnchor)?k.textAnchor:b.textAnchor,breakAll:d}),j))}Ya.displayName="Label";var uG=(e,t,r)=>{if(!e)return null;var n={viewBox:t,labelRef:r};return e===!0?v.createElement(Ya,sa({key:"label-implicit"},n)):Li(e)?v.createElement(Ya,sa({key:"label-implicit",value:e},n)):v.isValidElement(e)?e.type===Ya?v.cloneElement(e,Ur({key:"label-implicit"},n)):v.createElement(Ya,sa({key:"label-implicit",content:e},n)):Tw(e)?v.createElement(Ya,sa({key:"label-implicit",content:e},n)):e&&typeof e=="object"?v.createElement(Ya,sa({},e,{key:"label-implicit"},n)):null};function dG(e){var{label:t,labelRef:r}=e,n=O4();return uG(t,n,r)||null}var av={},ov={},s2;function fG(){return s2||(s2=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r[r.length-1]}e.last=t})(ov)),ov}var lv={},i2;function hG(){return i2||(i2=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return Array.isArray(r)?r:Array.from(r)}e.toArray=t})(lv)),lv}var a2;function mG(){return a2||(a2=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=fG(),r=hG(),n=bx();function s(i){if(n.isArrayLike(i))return t.last(r.toArray(i))}e.last=s})(av)),av}var cv,o2;function pG(){return o2||(o2=1,cv=mG().last),cv}var gG=pG();const yG=_i(gG);var vG=["valueAccessor"],xG=["dataKey","clockWise","id","textBreakAll","zIndex"];function Lh(){return Lh=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Lh.apply(null,arguments)}function l2(e,t){if(e==null)return{};var r,n,s=wG(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function wG(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var bG=e=>Array.isArray(e.value)?yG(e.value):e.value,T4=v.createContext(void 0),jG=T4.Provider,I4=v.createContext(void 0);I4.Provider;function SG(){return v.useContext(T4)}function _G(){return v.useContext(I4)}function qf(e){var{valueAccessor:t=bG}=e,r=l2(e,vG),{dataKey:n,clockWise:s,id:i,textBreakAll:l,zIndex:u}=r,d=l2(r,xG),m=SG(),f=_G(),p=m||f;return!p||!p.length?null:v.createElement(lo,{zIndex:u??js.label},v.createElement(ma,{className:"recharts-label-list"},p.map((y,x)=>{var j,b=Pn(n)?t(y,x):as(y&&y.payload,n),S=Pn(i)?{}:{id:"".concat(i,"-").concat(x)};return v.createElement(Ya,Lh({key:"label-".concat(x)},ri(y),d,S,{fill:(j=r.fill)!==null&&j!==void 0?j:y.fill,parentViewBox:y.parentViewBox,value:b,textBreakAll:l,viewBox:y.viewBox,index:x,zIndex:0}))})))}qf.displayName="LabelList";function NG(e){var{label:t}=e;return t?t===!0?v.createElement(qf,{key:"labelList-implicit"}):v.isValidElement(t)||Tw(t)?v.createElement(qf,{key:"labelList-implicit",content:t}):typeof t=="object"?v.createElement(qf,Lh({key:"labelList-implicit"},t,{type:String(t.type)})):null:null}var kG={radiusAxis:{},angleAxis:{}},D4=_s({name:"polarAxis",initialState:kG,reducers:{addRadiusAxis(e,t){e.radiusAxis[t.payload.id]=t.payload},removeRadiusAxis(e,t){delete e.radiusAxis[t.payload.id]},addAngleAxis(e,t){e.angleAxis[t.payload.id]=t.payload},removeAngleAxis(e,t){delete e.angleAxis[t.payload.id]}}}),{addRadiusAxis:ree,removeRadiusAxis:nee,addAngleAxis:see,removeAngleAxis:iee}=D4.actions,CG=D4.reducer,uv={exports:{}},rr={};/**
 * @license React
 * react-is.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var c2;function EG(){if(c2)return rr;c2=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),i=Symbol.for("react.consumer"),l=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),m=Symbol.for("react.suspense_list"),f=Symbol.for("react.memo"),p=Symbol.for("react.lazy"),y=Symbol.for("react.view_transition"),x=Symbol.for("react.client.reference");function j(b){if(typeof b=="object"&&b!==null){var S=b.$$typeof;switch(S){case e:switch(b=b.type,b){case r:case s:case n:case d:case m:case y:return b;default:switch(b=b&&b.$$typeof,b){case l:case u:case p:case f:return b;case i:return b;default:return S}}case t:return S}}}return rr.ContextConsumer=i,rr.ContextProvider=l,rr.Element=e,rr.ForwardRef=u,rr.Fragment=r,rr.Lazy=p,rr.Memo=f,rr.Portal=t,rr.Profiler=s,rr.StrictMode=n,rr.Suspense=d,rr.SuspenseList=m,rr.isContextConsumer=function(b){return j(b)===i},rr.isContextProvider=function(b){return j(b)===l},rr.isElement=function(b){return typeof b=="object"&&b!==null&&b.$$typeof===e},rr.isForwardRef=function(b){return j(b)===u},rr.isFragment=function(b){return j(b)===r},rr.isLazy=function(b){return j(b)===p},rr.isMemo=function(b){return j(b)===f},rr.isPortal=function(b){return j(b)===t},rr.isProfiler=function(b){return j(b)===s},rr.isStrictMode=function(b){return j(b)===n},rr.isSuspense=function(b){return j(b)===d},rr.isSuspenseList=function(b){return j(b)===m},rr.isValidElementType=function(b){return typeof b=="string"||typeof b=="function"||b===r||b===s||b===n||b===d||b===m||typeof b=="object"&&b!==null&&(b.$$typeof===p||b.$$typeof===f||b.$$typeof===l||b.$$typeof===i||b.$$typeof===u||b.$$typeof===x||b.getModuleId!==void 0)},rr.typeOf=j,rr}var u2;function AG(){return u2||(u2=1,uv.exports=EG()),uv.exports}var PG=AG(),d2=e=>typeof e=="string"?e:e?e.displayName||e.name||"Component":"",f2=null,dv=null,R4=e=>{if(e===f2&&Array.isArray(dv))return dv;var t=[];return v.Children.forEach(e,r=>{Pn(r)||(PG.isFragment(r)?t=t.concat(R4(r.props.children)):t.push(r))}),dv=t,f2=e,t};function OG(e,t){var r=[],n=[];return Array.isArray(t)?n=t.map(s=>d2(s)):n=[d2(t)],R4(e).forEach(s=>{var i=sc(s,"type.displayName")||sc(s,"type.name");i&&n.indexOf(i)!==-1&&r.push(s)}),r}var fv={},h2;function TG(){return h2||(h2=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){var s;if(typeof r!="object"||r==null)return!1;if(Object.getPrototypeOf(r)===null)return!0;if(Object.prototype.toString.call(r)!=="[object Object]"){const i=r[Symbol.toStringTag];return i==null||!((s=Object.getOwnPropertyDescriptor(r,Symbol.toStringTag))!=null&&s.writable)?!1:r.toString()===`[object ${i}]`}let n=r;for(;Object.getPrototypeOf(n)!==null;)n=Object.getPrototypeOf(n);return Object.getPrototypeOf(r)===n}e.isPlainObject=t})(fv)),fv}var hv,m2;function IG(){return m2||(m2=1,hv=TG().isPlainObject),hv}var DG=IG();const RG=_i(DG);function p2(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function g2(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?p2(Object(r),!0).forEach(function(n){$G(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):p2(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function $G(e,t,r){return(t=MG(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function MG(e){var t=FG(e,"string");return typeof t=="symbol"?t:t+""}function FG(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function zh(){return zh=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},zh.apply(null,arguments)}var y2=(e,t,r,n,s)=>{var i=r-n,l;return l="M ".concat(e,",").concat(t),l+="L ".concat(e+r,",").concat(t),l+="L ".concat(e+r-i/2,",").concat(t+s),l+="L ".concat(e+r-i/2-n,",").concat(t+s),l+="L ".concat(e,",").concat(t," Z"),l},LG={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},zG=e=>{var t=ii(e,LG),{x:r,y:n,upperWidth:s,lowerWidth:i,height:l,className:u}=t,{animationEasing:d,animationDuration:m,animationBegin:f,isUpdateAnimationActive:p}=t,y=v.useRef(null),[x,j]=v.useState(-1),b=v.useRef(s),S=v.useRef(i),N=v.useRef(l),E=v.useRef(r),k=v.useRef(n),T=Ox(e,"trapezoid-");if(v.useEffect(()=>{if(y.current&&y.current.getTotalLength)try{var ne=y.current.getTotalLength();ne&&j(ne)}catch{}},[]),r!==+r||n!==+n||s!==+s||i!==+i||l!==+l||s===0&&i===0||l===0)return null;var O=jr("recharts-trapezoid",u);if(!p)return v.createElement("g",null,v.createElement("path",zh({},ri(t),{className:O,d:y2(r,n,s,i,l)})));var P=b.current,R=S.current,q=N.current,F=E.current,V=k.current,B="0px ".concat(x===-1?1:x,"px"),Q="".concat(x,"px 0px"),ae=YA(["strokeDasharray"],m,d);return v.createElement(Px,{animationId:T,key:T,canBegin:x>0,duration:m,easing:d,isActive:p,begin:f},ne=>{var me=Bn(P,s,ne),K=Bn(R,i,ne),te=Bn(q,l,ne),se=Bn(F,r,ne),de=Bn(V,n,ne);y.current&&(b.current=me,S.current=K,N.current=te,E.current=se,k.current=de);var xe=ne>0?{transition:ae,strokeDasharray:Q}:{strokeDasharray:B};return v.createElement("path",zh({},ri(t),{className:O,d:y2(se,de,me,K,te),ref:y,style:g2(g2({},xe),t.style)}))})},BG=["option","shapeType","propTransformer","activeClassName","isActive"];function UG(e,t){if(e==null)return{};var r,n,s=WG(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function WG(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function v2(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Bh(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?v2(Object(r),!0).forEach(function(n){VG(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):v2(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function VG(e,t,r){return(t=qG(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function qG(e){var t=HG(e,"string");return typeof t=="symbol"?t:t+""}function HG(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function KG(e,t){return Bh(Bh({},t),e)}function GG(e,t){return e==="symbols"}function x2(e){var{shapeType:t,elementProps:r}=e;switch(t){case"rectangle":return v.createElement(ZA,r);case"trapezoid":return v.createElement(zG,r);case"sector":return v.createElement(rP,r);case"symbols":if(GG(t))return v.createElement(XE,r);break;case"curve":return v.createElement(GA,r);default:return null}}function YG(e){return v.isValidElement(e)?e.props:e}function JG(e){var{option:t,shapeType:r,propTransformer:n=KG,activeClassName:s="recharts-active-shape",isActive:i}=e,l=UG(e,BG),u;if(v.isValidElement(t))u=v.cloneElement(t,Bh(Bh({},l),YG(t)));else if(typeof t=="function")u=t(l);else if(RG(t)&&typeof t!="boolean"){var d=n(t,l);u=v.createElement(x2,{shapeType:r,elementProps:d})}else{var m=l;u=v.createElement(x2,{shapeType:r,elementProps:m})}return i?v.createElement(ma,{className:s},u):u}var $4=(e,t)=>{var r=Hr();return(n,s)=>i=>{e==null||e(n,s,i),r(JO({activeIndex:String(s),activeDataKey:t,activeCoordinate:n.tooltipPosition}))}},M4=e=>{var t=Hr();return(r,n)=>s=>{e==null||e(r,n,s),t(bq())}},F4=(e,t)=>{var r=Hr();return(n,s)=>i=>{e==null||e(n,s,i),r(jq({activeIndex:String(s),activeDataKey:t,activeCoordinate:n.tooltipPosition}))}};function QG(e){var{fn:t,args:r}=e,n=Hr(),s=Ws();return v.useLayoutEffect(()=>{if(!s){var i=t(r);return n(vq(i)),()=>{n(xq(i))}}},[t,r,n,s]),null}function XG(e){var{legendPayload:t}=e,r=Hr(),n=Ws();return v.useLayoutEffect(()=>n?wc:(r(ZB(t)),()=>{r(eU(t))}),[r,n,t]),null}var mv,ZG=()=>{var[e]=v.useState(()=>Iu("uid-"));return e},eY=(mv=eD.useId)!==null&&mv!==void 0?mv:ZG;function L4(e,t){var r=eY();return t||(e?"".concat(e,"-").concat(r):r)}var tY=v.createContext(void 0),rY=e=>{var{id:t,type:r,children:n}=e,s=L4("recharts-".concat(r),t);return v.createElement(tY.Provider,{value:s},n(s))},nY={cartesianItems:[],polarItems:[]},z4=_s({name:"graphicalItems",initialState:nY,reducers:{addCartesianGraphicalItem:{reducer(e,t){e.cartesianItems.push(t.payload)},prepare:mn()},replaceCartesianGraphicalItem:{reducer(e,t){var{prev:r,next:n}=t.payload,s=ca(e).cartesianItems.indexOf(r);s>-1&&(e.cartesianItems[s]=n)},prepare:mn()},removeCartesianGraphicalItem:{reducer(e,t){var r=ca(e).cartesianItems.indexOf(t.payload);r>-1&&e.cartesianItems.splice(r,1)},prepare:mn()},addPolarGraphicalItem:{reducer(e,t){e.polarItems.push(t.payload)},prepare:mn()},removePolarGraphicalItem:{reducer(e,t){var r=ca(e).polarItems.indexOf(t.payload);r>-1&&e.polarItems.splice(r,1)},prepare:mn()}}}),{addCartesianGraphicalItem:sY,replaceCartesianGraphicalItem:iY,removeCartesianGraphicalItem:aY,addPolarGraphicalItem:aee,removePolarGraphicalItem:oee}=z4.actions,oY=z4.reducer;function lY(e){var t=Hr(),r=v.useRef(null);return v.useLayoutEffect(()=>{r.current===null?t(sY(e)):r.current!==e&&t(iY({prev:r.current,next:e})),r.current=e},[t,e]),v.useLayoutEffect(()=>()=>{r.current&&(t(aY(r.current)),r.current=null)},[t]),null}function w2(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function b2(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?w2(Object(r),!0).forEach(function(n){cY(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):w2(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function cY(e,t,r){return(t=uY(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function uY(e){var t=dY(e,"string");return typeof t=="symbol"?t:t+""}function dY(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var fY={xAxis:{},yAxis:{},zAxis:{}},B4=_s({name:"cartesianAxis",initialState:fY,reducers:{addXAxis:{reducer(e,t){e.xAxis[t.payload.id]=t.payload},prepare:mn()},removeXAxis:{reducer(e,t){delete e.xAxis[t.payload.id]},prepare:mn()},addYAxis:{reducer(e,t){e.yAxis[t.payload.id]=t.payload},prepare:mn()},removeYAxis:{reducer(e,t){delete e.yAxis[t.payload.id]},prepare:mn()},addZAxis:{reducer(e,t){e.zAxis[t.payload.id]=t.payload},prepare:mn()},removeZAxis:{reducer(e,t){delete e.zAxis[t.payload.id]},prepare:mn()},updateYAxisWidth(e,t){var{id:r,width:n}=t.payload,s=e.yAxis[r];if(s){var i=s.widthHistory||[];if(i.length===3&&i[0]===i[2]&&n===i[1]&&n!==s.width&&Math.abs(n-i[0])<=1)return;var l=[...i,n].slice(-3);e.yAxis[r]=b2(b2({},e.yAxis[r]),{},{width:n,widthHistory:l})}}}}),{addXAxis:hY,removeXAxis:mY,addYAxis:pY,removeYAxis:gY,addZAxis:lee,removeZAxis:cee,updateYAxisWidth:yY}=B4.actions,vY=B4.reducer,xY=pe([On],e=>({top:e.top,bottom:e.bottom,left:e.left,right:e.right})),wY=pe([xY,Sa,_a],(e,t,r)=>{if(!(!e||t==null||r==null))return{x:e.left,y:e.top,width:Math.max(0,t-e.left-e.right),height:Math.max(0,r-e.top-e.bottom)}}),U4=()=>lt(wY),bY="Invariant failed";function jY(e,t){throw new Error(bY)}var SY=["x","y"];function I0(){return I0=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},I0.apply(null,arguments)}function j2(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function mu(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?j2(Object(r),!0).forEach(function(n){_Y(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):j2(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function _Y(e,t,r){return(t=NY(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function NY(e){var t=kY(e,"string");return typeof t=="symbol"?t:t+""}function kY(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function CY(e,t){if(e==null)return{};var r,n,s=EY(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function EY(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function AY(e,t){var{x:r,y:n}=e,s=CY(e,SY),i="".concat(r),l=parseInt(i,10),u="".concat(n),d=parseInt(u,10),m="".concat(t.height||s.height),f=parseInt(m,10),p="".concat(t.width||s.width),y=parseInt(p,10);return mu(mu(mu(mu(mu({},t),s),l?{x:l}:{}),d?{y:d}:{}),{},{height:f,width:y,name:t.name,radius:t.radius})}function Uh(e){return v.createElement(JG,I0({shapeType:"rectangle",propTransformer:AY,activeClassName:"recharts-active-bar"},e))}var PY=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return(n,s)=>{if(mt(t))return t;var i=mt(n)||Pn(n);return i?t(n,s):(i||jY(),r)}},OY={},W4=_s({name:"errorBars",initialState:OY,reducers:{addErrorBar:(e,t)=>{var{itemId:r,errorBar:n}=t.payload;e[r]||(e[r]=[]),e[r].push(n)},replaceErrorBar:(e,t)=>{var{itemId:r,prev:n,next:s}=t.payload;e[r]&&(e[r]=e[r].map(i=>i.dataKey===n.dataKey&&i.direction===n.direction?s:i))},removeErrorBar:(e,t)=>{var{itemId:r,errorBar:n}=t.payload;e[r]&&(e[r]=e[r].filter(s=>s.dataKey!==n.dataKey||s.direction!==n.direction))}}}),{addErrorBar:uee,replaceErrorBar:dee,removeErrorBar:fee}=W4.actions,TY=W4.reducer,IY=["children"];function DY(e,t){if(e==null)return{};var r,n,s=RY(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function RY(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var $Y={data:[],xAxisId:"xAxis-0",yAxisId:"yAxis-0",dataPointFormatter:()=>({x:0,y:0,value:0}),errorBarOffset:0},MY=v.createContext($Y);function FY(e){var{children:t}=e,r=DY(e,IY);return v.createElement(MY.Provider,{value:r},t)}function V4(e,t){var r,n,s=lt(m=>ka(m,e)),i=lt(m=>Ca(m,t)),l=(r=s==null?void 0:s.allowDataOverflow)!==null&&r!==void 0?r:Os.allowDataOverflow,u=(n=i==null?void 0:i.allowDataOverflow)!==null&&n!==void 0?n:Ts.allowDataOverflow,d=l||u;return{needClip:d,needClipX:l,needClipY:u}}function LY(e){var{xAxisId:t,yAxisId:r,clipPathId:n}=e,s=U4(),{needClipX:i,needClipY:l,needClip:u}=V4(t,r);if(!u||!s)return null;var{x:d,y:m,width:f,height:p}=s;return v.createElement("clipPath",{id:"clipPath-".concat(n)},v.createElement("rect",{x:i?d:d-f/2,y:l?m:m-p/2,width:i?f:f*2,height:l?p:p*2}))}function zY(e,t){return e&&typeof e=="object"&&"zIndex"in e&&typeof e.zIndex=="number"&&qr(e.zIndex)?e.zIndex:t}var BY=["onMouseEnter","onMouseLeave","onClick"],UY=["value","background","tooltipPosition"],WY=["id"],VY=["onMouseEnter","onClick","onMouseLeave"];function ba(){return ba=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},ba.apply(null,arguments)}function S2(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function ss(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?S2(Object(r),!0).forEach(function(n){qY(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):S2(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function qY(e,t,r){return(t=HY(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function HY(e){var t=KY(e,"string");return typeof t=="symbol"?t:t+""}function KY(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Wh(e,t){if(e==null)return{};var r,n,s=GY(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function GY(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var YY=e=>{var{dataKey:t,name:r,fill:n,legendType:s,hide:i}=e;return[{inactive:i,dataKey:t,type:s,color:n,value:zA(r,t),payload:e}]};function JY(e){var{dataKey:t,stroke:r,strokeWidth:n,fill:s,name:i,hide:l,unit:u}=e;return{dataDefinedOnItem:void 0,positions:void 0,settings:{stroke:r,strokeWidth:n,fill:s,dataKey:t,nameKey:void 0,name:zA(i,t),hide:l,type:e.tooltipType,color:e.fill,unit:u}}}function QY(e){var t=lt(uc),{data:r,dataKey:n,background:s,allOtherBarProps:i}=e,{onMouseEnter:l,onMouseLeave:u,onClick:d}=i,m=Wh(i,BY),f=$4(l,n),p=M4(u),y=F4(d,n);if(!s||r==null)return null;var x=hx(s);return v.createElement(lo,{zIndex:zY(s,js.barBackground)},r.map((j,b)=>{var{value:S,background:N,tooltipPosition:E}=j,k=Wh(j,UY);if(!N)return null;var T=f(j,b),O=p(j,b),P=y(j,b),R=ss(ss(ss(ss(ss({option:s,isActive:String(b)===t},k),{},{fill:"#eee"},N),x),wx(m,j,b)),{},{onMouseEnter:T,onMouseLeave:O,onClick:P,dataKey:n,index:b,className:"recharts-bar-background-rectangle"});return v.createElement(Uh,ba({key:"background-bar-".concat(b)},R))}))}function XY(e){var{showLabels:t,children:r,rects:n}=e,s=n==null?void 0:n.map(i=>{var l={x:i.x,y:i.y,width:i.width,lowerWidth:i.width,upperWidth:i.width,height:i.height};return ss(ss({},l),{},{value:i.value,payload:i.payload,parentViewBox:i.parentViewBox,viewBox:l,fill:i.fill})});return v.createElement(jG,{value:t?s:void 0},r)}function ZY(e){var{shape:t,activeBar:r,baseProps:n,entry:s,index:i,dataKey:l}=e,u=lt(uc),d=lt(d4),m=r&&String(i)===u&&(d==null||l===d),f=m?r:t;return m?v.createElement(lo,{zIndex:js.activeBar},v.createElement(Uh,ba({},n,{name:String(n.name)},s,{isActive:m,option:f,index:i,dataKey:l}))):v.createElement(Uh,ba({},n,{name:String(n.name)},s,{isActive:m,option:f,index:i,dataKey:l}))}function eJ(e){var{shape:t,baseProps:r,entry:n,index:s,dataKey:i}=e;return v.createElement(Uh,ba({},r,{name:String(r.name)},n,{isActive:!1,option:t,index:s,dataKey:i}))}function tJ(e){var t,{data:r,props:n}=e,s=(t=to(n))!==null&&t!==void 0?t:{},{id:i}=s,l=Wh(s,WY),{shape:u,dataKey:d,activeBar:m}=n,{onMouseEnter:f,onClick:p,onMouseLeave:y}=n,x=Wh(n,VY),j=$4(f,d),b=M4(y),S=F4(p,d);return r?v.createElement(v.Fragment,null,r.map((N,E)=>v.createElement(ma,ba({key:"rectangle-".concat(N==null?void 0:N.x,"-").concat(N==null?void 0:N.y,"-").concat(N==null?void 0:N.value,"-").concat(E),className:"recharts-bar-rectangle"},wx(x,N,E),{onMouseEnter:j(N,E),onMouseLeave:b(N,E),onClick:S(N,E)}),m?v.createElement(ZY,{shape:u,activeBar:m,baseProps:l,entry:N,index:E,dataKey:d}):v.createElement(eJ,{shape:u,baseProps:l,entry:N,index:E,dataKey:d})))):null}function rJ(e){var{props:t,previousRectanglesRef:r}=e,{data:n,layout:s,isAnimationActive:i,animationBegin:l,animationDuration:u,animationEasing:d,onAnimationEnd:m,onAnimationStart:f}=t,p=r.current,y=Ox(t,"recharts-bar-"),[x,j]=v.useState(!1),b=!x,S=v.useCallback(()=>{typeof m=="function"&&m(),j(!1)},[m]),N=v.useCallback(()=>{typeof f=="function"&&f(),j(!0)},[f]);return v.createElement(XY,{showLabels:b,rects:n},v.createElement(Px,{animationId:y,begin:l,duration:u,isActive:i,easing:d,onAnimationEnd:S,onAnimationStart:N,key:y},E=>{var k=E===1?n:n==null?void 0:n.map((T,O)=>{var P=p&&p[O];if(P)return ss(ss({},T),{},{x:Bn(P.x,T.x,E),y:Bn(P.y,T.y,E),width:Bn(P.width,T.width,E),height:Bn(P.height,T.height,E)});if(s==="horizontal"){var R=Bn(0,T.height,E),q=Bn(T.stackedBarStart,T.y,E);return ss(ss({},T),{},{y:q,height:R})}var F=Bn(0,T.width,E),V=Bn(T.stackedBarStart,T.x,E);return ss(ss({},T),{},{width:F,x:V})});return E>0&&(r.current=k??null),k==null?null:v.createElement(ma,null,v.createElement(tJ,{props:t,data:k}))}),v.createElement(NG,{label:t.label}),t.children)}function nJ(e){var t=v.useRef(null);return v.createElement(rJ,{previousRectanglesRef:t,props:e})}var q4=0,sJ=(e,t)=>{var r=Array.isArray(e.value)?e.value[1]:e.value;return{x:e.x,y:e.y,value:r,errorVal:as(e,t)}};class iJ extends v.PureComponent{render(){var{hide:t,data:r,dataKey:n,className:s,xAxisId:i,yAxisId:l,needClip:u,background:d,id:m}=this.props;if(t||r==null)return null;var f=jr("recharts-bar",s),p=m;return v.createElement(ma,{className:f,id:m},u&&v.createElement("defs",null,v.createElement(LY,{clipPathId:p,xAxisId:i,yAxisId:l})),v.createElement(ma,{className:"recharts-bar-rectangles",clipPath:u?"url(#clipPath-".concat(p,")"):void 0},v.createElement(QY,{data:r,dataKey:n,background:d,allOtherBarProps:this.props}),v.createElement(nJ,this.props)))}}var aJ={activeBar:!1,animationBegin:0,animationDuration:400,animationEasing:"ease",hide:!1,isAnimationActive:!bc.isSsr,legendType:"rect",minPointSize:q4,xAxisId:0,yAxisId:0,zIndex:js.bar};function oJ(e){var{xAxisId:t,yAxisId:r,hide:n,legendType:s,minPointSize:i,activeBar:l,animationBegin:u,animationDuration:d,animationEasing:m,isAnimationActive:f}=e,{needClip:p}=V4(t,r),y=bm(),x=Ws(),j=OG(e.children,Pw),b=lt(E=>RJ(E,t,r,x,e.id,j));if(y!=="vertical"&&y!=="horizontal")return null;var S,N=b==null?void 0:b[0];return N==null||N.height==null||N.width==null?S=0:S=y==="vertical"?N.height/2:N.width/2,v.createElement(FY,{xAxisId:t,yAxisId:r,data:b,dataPointFormatter:sJ,errorBarOffset:S},v.createElement(iJ,ba({},e,{layout:y,needClip:p,data:b,xAxisId:t,yAxisId:r,hide:n,legendType:s,minPointSize:i,activeBar:l,animationBegin:u,animationDuration:d,animationEasing:m,isAnimationActive:f})))}function lJ(e){var{layout:t,barSettings:{dataKey:r,minPointSize:n},pos:s,bandSize:i,xAxis:l,yAxis:u,xAxisTicks:d,yAxisTicks:m,stackedData:f,displayedData:p,offset:y,cells:x,parentViewBox:j,dataStartIndex:b}=e,S=t==="horizontal"?u:l,N=f?S.scale.domain():null,E=uB({numericAxis:S}),k=S.scale(E);return p.map((T,O)=>{var P,R,q,F,V,B;f?P=sB(f[O+b],N):(P=as(T,r),Array.isArray(P)||(P=[E,P]));var Q=PY(n,q4)(P[1],O);if(t==="horizontal"){var ae,[ne,me]=[u.scale(P[0]),u.scale(P[1])];R=sN({axis:l,ticks:d,bandSize:i,offset:s.offset,entry:T,index:O}),q=(ae=me??ne)!==null&&ae!==void 0?ae:void 0,F=s.size;var K=ne-me;if(V=Fi(K)?0:K,B={x:R,y:y.top,width:F,height:y.height},Math.abs(Q)>0&&Math.abs(V)<Math.abs(Q)){var te=Ls(V||Q)*(Math.abs(Q)-Math.abs(V));q-=te,V+=te}}else{var[se,de]=[l.scale(P[0]),l.scale(P[1])];if(R=se,q=sN({axis:u,ticks:m,bandSize:i,offset:s.offset,entry:T,index:O}),F=de-se,V=s.size,B={x:y.left,y:q,width:y.width,height:V},Math.abs(Q)>0&&Math.abs(F)<Math.abs(Q)){var xe=Ls(F||Q)*(Math.abs(Q)-Math.abs(F));F+=xe}}if(R==null||q==null||F==null||V==null)return null;var I=ss(ss({},T),{},{stackedBarStart:k,x:R,y:q,width:F,height:V,value:f?P:P[1],payload:T,background:B,tooltipPosition:{x:R+F/2,y:q+V/2},parentViewBox:j},x&&x[O]&&x[O].props);return I}).filter(Boolean)}function cJ(e){var t=ii(e,aJ),r=Ws();return v.createElement(rY,{id:t.id,type:"bar"},n=>v.createElement(v.Fragment,null,v.createElement(XG,{legendPayload:YY(t)}),v.createElement(QG,{fn:JY,args:t}),v.createElement(lY,{type:"bar",id:n,data:void 0,xAxisId:t.xAxisId,yAxisId:t.yAxisId,zAxisId:0,dataKey:t.dataKey,stackId:cB(t.stackId),hide:t.hide,barSize:t.barSize,minPointSize:t.minPointSize,maxBarSize:t.maxBarSize,isPanorama:r}),v.createElement(lo,{zIndex:t.zIndex},v.createElement(oJ,ba({},t,{id:n})))))}var H4=v.memo(cJ);H4.displayName="Bar";function _2(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Df(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?_2(Object(r),!0).forEach(function(n){uJ(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):_2(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function uJ(e,t,r){return(t=dJ(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function dJ(e){var t=fJ(e,"string");return typeof t=="symbol"?t:t+""}function fJ(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var hJ=(e,t)=>t,mJ=(e,t,r)=>r,pJ=(e,t,r,n)=>n,gJ=(e,t,r,n,s)=>s,fd=pe([fw,gJ],(e,t)=>e.filter(r=>r.type==="bar").find(r=>r.id===t)),yJ=pe([fd],e=>e==null?void 0:e.maxBarSize),vJ=(e,t,r,n,s,i)=>i,N2=(e,t,r)=>{var n=r??e;if(!Pn(n))return Si(n,t,0)},xJ=pe([er,fw,hJ,mJ,pJ],(e,t,r,n,s)=>t.filter(i=>e==="horizontal"?i.xAxisId===r:i.yAxisId===n).filter(i=>i.isPanorama===s).filter(i=>i.hide===!1).filter(i=>i.type==="bar")),wJ=(e,t,r,n)=>{var s=er(e);return s==="horizontal"?k0(e,"yAxis",r,n):k0(e,"xAxis",t,n)},bJ=(e,t,r)=>{var n=er(e);return n==="horizontal"?Pk(e,"xAxis",t):Pk(e,"yAxis",r)},jJ=(e,t,r)=>{var n={},s=e.filter(Dm),i=e.filter(m=>m.stackId==null),l=s.reduce((m,f)=>(m[f.stackId]||(m[f.stackId]=[]),m[f.stackId].push(f),m),n),u=Object.entries(l).map(m=>{var[f,p]=m,y=p.map(j=>j.dataKey),x=N2(t,r,p[0].barSize);return{stackId:f,dataKeys:y,barSize:x}}),d=i.map(m=>{var f=[m.dataKey].filter(y=>y!=null),p=N2(t,r,m.barSize);return{stackId:void 0,dataKeys:f,barSize:p}});return[...u,...d]},SJ=pe([xJ,dV,bJ],jJ),_J=(e,t,r,n,s)=>{var i,l,u=fd(e,t,r,n,s);if(u!=null){var d=er(e),m=ZP(e),{maxBarSize:f}=u,p=Pn(f)?m:f,y,x;return d==="horizontal"?(y=cc(e,"xAxis",t,n),x=lc(e,"xAxis",t,n)):(y=cc(e,"yAxis",r,n),x=lc(e,"yAxis",r,n)),(i=(l=wh(y,x,!0))!==null&&l!==void 0?l:p)!==null&&i!==void 0?i:0}},K4=(e,t,r,n)=>{var s=er(e),i,l;return s==="horizontal"?(i=cc(e,"xAxis",t,n),l=lc(e,"xAxis",t,n)):(i=cc(e,"yAxis",r,n),l=lc(e,"yAxis",r,n)),wh(i,l)};function NJ(e,t,r,n,s){var i=n.length;if(!(i<1)){var l=Si(e,r,0,!0),u,d=[];if(qr(n[0].barSize)){var m=!1,f=r/i,p=n.reduce((N,E)=>N+(E.barSize||0),0);p+=(i-1)*l,p>=r&&(p-=(i-1)*l,l=0),p>=r&&f>0&&(m=!0,f*=.9,p=i*f);var y=(r-p)/2>>0,x={offset:y-l,size:0};u=n.reduce((N,E)=>{var k,T={stackId:E.stackId,dataKeys:E.dataKeys,position:{offset:x.offset+x.size+l,size:m?f:(k=E.barSize)!==null&&k!==void 0?k:0}},O=[...N,T];return x=O[O.length-1].position,O},d)}else{var j=Si(t,r,0,!0);r-2*j-(i-1)*l<=0&&(l=0);var b=(r-2*j-(i-1)*l)/i;b>1&&(b>>=0);var S=qr(s)?Math.min(b,s):b;u=n.reduce((N,E,k)=>[...N,{stackId:E.stackId,dataKeys:E.dataKeys,position:{offset:j+(b+l)*k+(b-S)/2,size:S}}],d)}return u}}var kJ=(e,t,r,n,s,i,l)=>{var u=Pn(l)?t:l,d=NJ(r,n,s!==i?s:i,e,u);return s!==i&&d!=null&&(d=d.map(m=>Df(Df({},m),{},{position:Df(Df({},m.position),{},{offset:m.position.offset-s/2})}))),d},CJ=pe([SJ,ZP,uV,eO,_J,K4,yJ],kJ),EJ=(e,t,r,n)=>cc(e,"xAxis",t,n),AJ=(e,t,r,n)=>cc(e,"yAxis",r,n),PJ=(e,t,r,n)=>lc(e,"xAxis",t,n),OJ=(e,t,r,n)=>lc(e,"yAxis",r,n),TJ=pe([CJ,fd],(e,t)=>{if(!(e==null||t==null)){var r=e.find(n=>n.stackId===t.stackId&&t.dataKey!=null&&n.dataKeys.includes(t.dataKey));if(r!=null)return r.position}}),IJ=(e,t)=>{var r=uw(t);if(!(!e||r==null||t==null)){var{stackId:n}=t;if(n!=null){var s=e[n];if(s){var{stackedData:i}=s;if(i)return i.find(l=>l.key===r)}}}},DJ=pe([wJ,fd],IJ),RJ=pe([On,Ex,EJ,AJ,PJ,OJ,TJ,er,tw,K4,DJ,fd,vJ],(e,t,r,n,s,i,l,u,d,m,f,p,y)=>{var{chartData:x,dataStartIndex:j,dataEndIndex:b}=d;if(!(p==null||l==null||t==null||u!=="horizontal"&&u!=="vertical"||r==null||n==null||s==null||i==null||m==null)){var{data:S}=p,N;if(S!=null&&S.length>0?N=S:N=x==null?void 0:x.slice(j,b+1),N!=null)return lJ({layout:u,barSettings:p,pos:l,parentViewBox:t,bandSize:m,xAxis:r,yAxis:n,xAxisTicks:s,yAxisTicks:i,stackedData:f,displayedData:N,offset:e,cells:y,dataStartIndex:j})}}),$J=e=>{var{chartData:t}=e,r=Hr(),n=Ws();return v.useEffect(()=>n?()=>{}:(r(Uk(t)),()=>{r(Uk(void 0))}),[t,r,n]),null},k2={x:0,y:0,width:0,height:0,padding:{top:0,right:0,bottom:0,left:0}},G4=_s({name:"brush",initialState:k2,reducers:{setBrushSettings(e,t){return t.payload==null?k2:t.payload}}}),{setBrushSettings:hee}=G4.actions,MJ=G4.reducer;function FJ(e,t,r){return(t=LJ(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function LJ(e){var t=zJ(e,"string");return typeof t=="symbol"?t:t+""}function zJ(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class Iw{static create(t){return new Iw(t)}constructor(t){this.scale=t}get domain(){return this.scale.domain}get range(){return this.scale.range}get rangeMin(){return this.range()[0]}get rangeMax(){return this.range()[1]}get bandwidth(){return this.scale.bandwidth}apply(t){var{bandAware:r,position:n}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(t!==void 0){if(n)switch(n){case"start":return this.scale(t);case"middle":{var s=this.bandwidth?this.bandwidth()/2:0;return this.scale(t)+s}case"end":{var i=this.bandwidth?this.bandwidth():0;return this.scale(t)+i}default:return this.scale(t)}if(r){var l=this.bandwidth?this.bandwidth()/2:0;return this.scale(t)+l}return this.scale(t)}}isInRange(t){var r=this.range(),n=r[0],s=r[r.length-1];return n<=s?t>=n&&t<=s:t>=s&&t<=n}}FJ(Iw,"EPS",1e-4);function BJ(e){return(e%180+180)%180}var UJ=function(t){var{width:r,height:n}=t,s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,i=BJ(s),l=i*Math.PI/180,u=Math.atan(n/r),d=l>u&&l<Math.PI-u?n/Math.sin(l):r/Math.cos(l);return Math.abs(d)},WJ={dots:[],areas:[],lines:[]},Y4=_s({name:"referenceElements",initialState:WJ,reducers:{addDot:(e,t)=>{e.dots.push(t.payload)},removeDot:(e,t)=>{var r=ca(e).dots.findIndex(n=>n===t.payload);r!==-1&&e.dots.splice(r,1)},addArea:(e,t)=>{e.areas.push(t.payload)},removeArea:(e,t)=>{var r=ca(e).areas.findIndex(n=>n===t.payload);r!==-1&&e.areas.splice(r,1)},addLine:(e,t)=>{e.lines.push(t.payload)},removeLine:(e,t)=>{var r=ca(e).lines.findIndex(n=>n===t.payload);r!==-1&&e.lines.splice(r,1)}}}),{addDot:mee,removeDot:pee,addArea:gee,removeArea:yee,addLine:vee,removeLine:xee}=Y4.actions,VJ=Y4.reducer,qJ=v.createContext(void 0),HJ=e=>{var{children:t}=e,[r]=v.useState("".concat(Iu("recharts"),"-clip")),n=U4();if(n==null)return null;var{x:s,y:i,width:l,height:u}=n;return v.createElement(qJ.Provider,{value:r},v.createElement("defs",null,v.createElement("clipPath",{id:r},v.createElement("rect",{x:s,y:i,height:u,width:l}))),t)};function dc(e,t){for(var r in e)if({}.hasOwnProperty.call(e,r)&&(!{}.hasOwnProperty.call(t,r)||e[r]!==t[r]))return!1;for(var n in t)if({}.hasOwnProperty.call(t,n)&&!{}.hasOwnProperty.call(e,n))return!1;return!0}function J4(e,t){if(t<1)return[];if(t===1)return e;for(var r=[],n=0;n<e.length;n+=t)r.push(e[n]);return r}function KJ(e,t,r){var n={width:e.width+t.width,height:e.height+t.height};return UJ(n,r)}function GJ(e,t,r){var n=r==="width",{x:s,y:i,width:l,height:u}=e;return t===1?{start:n?s:i,end:n?s+l:i+u}:{start:n?s+l:i+u,end:n?s:i}}function Vh(e,t,r,n,s){if(e*t<e*n||e*t>e*s)return!1;var i=r();return e*(t-e*i/2-n)>=0&&e*(t+e*i/2-s)<=0}function YJ(e,t){return J4(e,t+1)}function JJ(e,t,r,n,s){for(var i=(n||[]).slice(),{start:l,end:u}=t,d=0,m=1,f=l,p=function(){var j=n==null?void 0:n[d];if(j===void 0)return{v:J4(n,m)};var b=d,S,N=()=>(S===void 0&&(S=r(j,b)),S),E=j.coordinate,k=d===0||Vh(e,E,N,f,u);k||(d=0,f=l,m+=1),k&&(f=E+e*(N()/2+s),d+=m)},y;m<=i.length;)if(y=p(),y)return y.v;return[]}function C2(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Qn(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?C2(Object(r),!0).forEach(function(n){QJ(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):C2(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function QJ(e,t,r){return(t=XJ(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function XJ(e){var t=ZJ(e,"string");return typeof t=="symbol"?t:t+""}function ZJ(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function eQ(e,t,r,n,s){for(var i=(n||[]).slice(),l=i.length,{start:u}=t,{end:d}=t,m=function(y){var x=i[y],j,b=()=>(j===void 0&&(j=r(x,y)),j);if(y===l-1){var S=e*(x.coordinate+e*b()/2-d);i[y]=x=Qn(Qn({},x),{},{tickCoord:S>0?x.coordinate-S*e:x.coordinate})}else i[y]=x=Qn(Qn({},x),{},{tickCoord:x.coordinate});if(x.tickCoord!=null){var N=Vh(e,x.tickCoord,b,u,d);N&&(d=x.tickCoord-e*(b()/2+s),i[y]=Qn(Qn({},x),{},{isShow:!0}))}},f=l-1;f>=0;f--)m(f);return i}function tQ(e,t,r,n,s,i){var l=(n||[]).slice(),u=l.length,{start:d,end:m}=t;if(i){var f=n[u-1],p=r(f,u-1),y=e*(f.coordinate+e*p/2-m);if(l[u-1]=f=Qn(Qn({},f),{},{tickCoord:y>0?f.coordinate-y*e:f.coordinate}),f.tickCoord!=null){var x=Vh(e,f.tickCoord,()=>p,d,m);x&&(m=f.tickCoord-e*(p/2+s),l[u-1]=Qn(Qn({},f),{},{isShow:!0}))}}for(var j=i?u-1:u,b=function(E){var k=l[E],T,O=()=>(T===void 0&&(T=r(k,E)),T);if(E===0){var P=e*(k.coordinate-e*O()/2-d);l[E]=k=Qn(Qn({},k),{},{tickCoord:P<0?k.coordinate-P*e:k.coordinate})}else l[E]=k=Qn(Qn({},k),{},{tickCoord:k.coordinate});if(k.tickCoord!=null){var R=Vh(e,k.tickCoord,O,d,m);R&&(d=k.tickCoord+e*(O()/2+s),l[E]=Qn(Qn({},k),{},{isShow:!0}))}},S=0;S<j;S++)b(S);return l}function rQ(e,t,r){var{tick:n,ticks:s,viewBox:i,minTickGap:l,orientation:u,interval:d,tickFormatter:m,unit:f,angle:p}=e;if(!s||!s.length||!n)return[];if(mt(d)||bc.isSsr){var y;return(y=YJ(s,mt(d)?d:0))!==null&&y!==void 0?y:[]}var x=[],j=u==="top"||u==="bottom"?"width":"height",b=f&&j==="width"?ku(f,{fontSize:t,letterSpacing:r}):{width:0,height:0},S=(k,T)=>{var O=typeof m=="function"?m(k.value,T):k.value;return j==="width"?KJ(ku(O,{fontSize:t,letterSpacing:r}),b,p):ku(O,{fontSize:t,letterSpacing:r})[j]},N=s.length>=2?Ls(s[1].coordinate-s[0].coordinate):1,E=GJ(i,N,j);return d==="equidistantPreserveStart"?JJ(N,E,S,s,l):(d==="preserveStart"||d==="preserveStartEnd"?x=tQ(N,E,S,s,l,d==="preserveStartEnd"):x=eQ(N,E,S,s,l),x.filter(k=>k.isShow))}var nQ=e=>{var{ticks:t,label:r,labelGapWithTick:n=5,tickSize:s=0,tickMargin:i=0}=e,l=0;if(t){Array.from(t).forEach(f=>{if(f){var p=f.getBoundingClientRect();p.width>l&&(l=p.width)}});var u=r?r.getBoundingClientRect().width:0,d=s+i,m=l+d+u+(r?n:0);return Math.round(m)}return 0},sQ=["axisLine","width","height","className","hide","ticks","axisType"],iQ=["viewBox"],aQ=["viewBox"];function D0(e,t){if(e==null)return{};var r,n,s=oQ(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function oQ(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function Ko(){return Ko=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Ko.apply(null,arguments)}function E2(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function tn(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?E2(Object(r),!0).forEach(function(n){lQ(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):E2(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function lQ(e,t,r){return(t=cQ(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function cQ(e){var t=uQ(e,"string");return typeof t=="symbol"?t:t+""}function uQ(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var dQ={x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd",zIndex:js.axis};function fQ(e){var{x:t,y:r,width:n,height:s,orientation:i,mirror:l,axisLine:u,otherSvgProps:d}=e;if(!u)return null;var m=tn(tn(tn({},d),to(u)),{},{fill:"none"});if(i==="top"||i==="bottom"){var f=+(i==="top"&&!l||i==="bottom"&&l);m=tn(tn({},m),{},{x1:t,y1:r+f*s,x2:t+n,y2:r+f*s})}else{var p=+(i==="left"&&!l||i==="right"&&l);m=tn(tn({},m),{},{x1:t+p*n,y1:r,x2:t+p*n,y2:r+s})}return v.createElement("line",Ko({},m,{className:jr("recharts-cartesian-axis-line",sc(u,"className"))}))}function hQ(e,t,r,n,s,i,l,u,d){var m,f,p,y,x,j,b=u?-1:1,S=e.tickSize||l,N=mt(e.tickCoord)?e.tickCoord:e.coordinate;switch(i){case"top":m=f=e.coordinate,y=r+ +!u*s,p=y-b*S,j=p-b*d,x=N;break;case"left":p=y=e.coordinate,f=t+ +!u*n,m=f-b*S,x=m-b*d,j=N;break;case"right":p=y=e.coordinate,f=t+ +u*n,m=f+b*S,x=m+b*d,j=N;break;default:m=f=e.coordinate,y=r+ +u*s,p=y+b*S,j=p+b*d,x=N;break}return{line:{x1:m,y1:p,x2:f,y2:y},tick:{x,y:j}}}function mQ(e,t){switch(e){case"left":return t?"start":"end";case"right":return t?"end":"start";default:return"middle"}}function pQ(e,t){switch(e){case"left":case"right":return"middle";case"top":return t?"start":"end";default:return t?"end":"start"}}function gQ(e){var{option:t,tickProps:r,value:n}=e,s,i=jr(r.className,"recharts-cartesian-axis-tick-value");if(v.isValidElement(t))s=v.cloneElement(t,tn(tn({},r),{},{className:i}));else if(typeof t=="function")s=t(tn(tn({},r),{},{className:i}));else{var l="recharts-cartesian-axis-tick-value";typeof t!="boolean"&&(l=jr(l,t==null?void 0:t.className)),s=v.createElement(Ow,Ko({},r,{className:l}),n)}return s}var yQ=v.forwardRef((e,t)=>{var{ticks:r=[],tick:n,tickLine:s,stroke:i,tickFormatter:l,unit:u,padding:d,tickTextProps:m,orientation:f,mirror:p,x:y,y:x,width:j,height:b,tickSize:S,tickMargin:N,fontSize:E,letterSpacing:k,getTicksConfig:T,events:O,axisType:P}=e,R=rQ(tn(tn({},T),{},{ticks:r}),E,k),q=mQ(f,p),F=pQ(f,p),V=to(T),B=hx(n),Q={};typeof s=="object"&&(Q=s);var ae=tn(tn({},V),{},{fill:"none"},Q),ne=R.map(te=>tn({entry:te},hQ(te,y,x,j,b,f,S,p,N))),me=ne.map(te=>{var{entry:se,line:de}=te;return v.createElement(ma,{className:"recharts-cartesian-axis-tick",key:"tick-".concat(se.value,"-").concat(se.coordinate,"-").concat(se.tickCoord)},s&&v.createElement("line",Ko({},ae,de,{className:jr("recharts-cartesian-axis-tick-line",sc(s,"className"))})))}),K=ne.map((te,se)=>{var{entry:de,tick:xe}=te,I=tn(tn(tn(tn({textAnchor:q,verticalAnchor:F},V),{},{stroke:"none",fill:i},B),xe),{},{index:se,payload:de,visibleTicksCount:R.length,tickFormatter:l,padding:d},m);return v.createElement(ma,Ko({className:"recharts-cartesian-axis-tick-label",key:"tick-label-".concat(de.value,"-").concat(de.coordinate,"-").concat(de.tickCoord)},wx(O,de,se)),n&&v.createElement(gQ,{option:n,tickProps:I,value:"".concat(typeof l=="function"?l(de.value,se):de.value).concat(u||"")}))});return v.createElement("g",{className:"recharts-cartesian-axis-ticks recharts-".concat(P,"-ticks")},K.length>0&&v.createElement(lo,{zIndex:js.label},v.createElement("g",{className:"recharts-cartesian-axis-tick-labels recharts-".concat(P,"-tick-labels"),ref:t},K)),me.length>0&&v.createElement("g",{className:"recharts-cartesian-axis-tick-lines recharts-".concat(P,"-tick-lines")},me))}),vQ=v.forwardRef((e,t)=>{var{axisLine:r,width:n,height:s,className:i,hide:l,ticks:u,axisType:d}=e,m=D0(e,sQ),[f,p]=v.useState(""),[y,x]=v.useState(""),j=v.useRef(null);v.useImperativeHandle(t,()=>({getCalculatedWidth:()=>{var S;return nQ({ticks:j.current,label:(S=e.labelRef)===null||S===void 0?void 0:S.current,labelGapWithTick:5,tickSize:e.tickSize,tickMargin:e.tickMargin})}}));var b=v.useCallback(S=>{if(S){var N=S.getElementsByClassName("recharts-cartesian-axis-tick-value");j.current=N;var E=N[0];if(E){var k=window.getComputedStyle(E),T=k.fontSize,O=k.letterSpacing;(T!==f||O!==y)&&(p(T),x(O))}}},[f,y]);return l||n!=null&&n<=0||s!=null&&s<=0?null:v.createElement(lo,{zIndex:e.zIndex},v.createElement(ma,{className:jr("recharts-cartesian-axis",i)},v.createElement(fQ,{x:e.x,y:e.y,width:n,height:s,orientation:e.orientation,mirror:e.mirror,axisLine:r,otherSvgProps:to(e)}),v.createElement(yQ,{ref:b,axisType:d,events:m,fontSize:f,getTicksConfig:e,height:e.height,letterSpacing:y,mirror:e.mirror,orientation:e.orientation,padding:e.padding,stroke:e.stroke,tick:e.tick,tickFormatter:e.tickFormatter,tickLine:e.tickLine,tickMargin:e.tickMargin,tickSize:e.tickSize,tickTextProps:e.tickTextProps,ticks:u,unit:e.unit,width:e.width,x:e.x,y:e.y}),v.createElement(tG,{x:e.x,y:e.y,width:e.width,height:e.height,lowerWidth:e.width,upperWidth:e.width},v.createElement(dG,{label:e.label,labelRef:e.labelRef}),e.children)))}),xQ=v.memo(vQ,(e,t)=>{var{viewBox:r}=e,n=D0(e,iQ),{viewBox:s}=t,i=D0(t,aQ);return dc(r,s)&&dc(n,i)}),Dw=v.forwardRef((e,t)=>{var r=ii(e,dQ);return v.createElement(xQ,Ko({},r,{ref:t}))});Dw.displayName="CartesianAxis";var wQ=["dangerouslySetInnerHTML","ticks"],bQ=["id"],jQ=["domain"],SQ=["domain"];function R0(){return R0=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},R0.apply(null,arguments)}function qh(e,t){if(e==null)return{};var r,n,s=_Q(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function _Q(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function NQ(e){var t=Hr();return v.useLayoutEffect(()=>(t(hY(e)),()=>{t(mY(e))}),[e,t]),null}var kQ=e=>{var{xAxisId:t,className:r}=e,n=lt(Ex),s=Ws(),i="xAxis",l=lt(S=>Cc(S,i,t,s)),u=lt(S=>VO(S,i,t,s)),d=lt(S=>zO(S,t)),m=lt(S=>lq(S,t)),f=lt(S=>lO(S,t));if(d==null||m==null||f==null)return null;var{dangerouslySetInnerHTML:p,ticks:y}=e,x=qh(e,wQ),{id:j}=f,b=qh(f,bQ);return v.createElement(Dw,R0({},x,b,{scale:l,x:m.x,y:m.y,width:d.width,height:d.height,className:jr("recharts-".concat(i," ").concat(i),r),viewBox:n,ticks:u,axisType:i}))},CQ={allowDataOverflow:Os.allowDataOverflow,allowDecimals:Os.allowDecimals,allowDuplicatedCategory:Os.allowDuplicatedCategory,height:Os.height,hide:!1,mirror:Os.mirror,orientation:Os.orientation,padding:Os.padding,reversed:Os.reversed,scale:Os.scale,tickCount:Os.tickCount,type:Os.type,xAxisId:0},EQ=e=>{var t,r,n,s,i,l=ii(e,CQ);return v.createElement(v.Fragment,null,v.createElement(NQ,{interval:(t=l.interval)!==null&&t!==void 0?t:"preserveEnd",id:l.xAxisId,scale:l.scale,type:l.type,padding:l.padding,allowDataOverflow:l.allowDataOverflow,domain:l.domain,dataKey:l.dataKey,allowDuplicatedCategory:l.allowDuplicatedCategory,allowDecimals:l.allowDecimals,tickCount:l.tickCount,includeHidden:(r=l.includeHidden)!==null&&r!==void 0?r:!1,reversed:l.reversed,ticks:l.ticks,height:l.height,orientation:l.orientation,mirror:l.mirror,hide:l.hide,unit:l.unit,name:l.name,angle:(n=l.angle)!==null&&n!==void 0?n:0,minTickGap:(s=l.minTickGap)!==null&&s!==void 0?s:5,tick:(i=l.tick)!==null&&i!==void 0?i:!0,tickFormatter:l.tickFormatter}),v.createElement(kQ,l))},AQ=(e,t)=>{var{domain:r}=e,n=qh(e,jQ),{domain:s}=t,i=qh(t,SQ);return dc(n,i)?Array.isArray(r)&&r.length===2&&Array.isArray(s)&&s.length===2?r[0]===s[0]&&r[1]===s[1]:dc({domain:r},{domain:s}):!1},Q4=v.memo(EQ,AQ);Q4.displayName="XAxis";var PQ=["dangerouslySetInnerHTML","ticks"],OQ=["id"],TQ=["domain"],IQ=["domain"];function $0(){return $0=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},$0.apply(null,arguments)}function Hh(e,t){if(e==null)return{};var r,n,s=DQ(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function DQ(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function RQ(e){var t=Hr();return v.useLayoutEffect(()=>(t(pY(e)),()=>{t(gY(e))}),[e,t]),null}var $Q=e=>{var{yAxisId:t,className:r,width:n,label:s}=e,i=v.useRef(null),l=v.useRef(null),u=lt(Ex),d=Ws(),m=Hr(),f="yAxis",p=lt(O=>Cc(O,f,t,d)),y=lt(O=>BO(O,t)),x=lt(O=>uq(O,t)),j=lt(O=>VO(O,f,t,d)),b=lt(O=>cO(O,t));if(v.useLayoutEffect(()=>{if(!(n!=="auto"||!y||Tw(s)||v.isValidElement(s)||b==null)){var O=i.current;if(O){var P=O.getCalculatedWidth();Math.round(y.width)!==Math.round(P)&&m(yY({id:t,width:P}))}}},[j,y,m,s,t,n,b]),y==null||x==null||b==null)return null;var{dangerouslySetInnerHTML:S,ticks:N}=e,E=Hh(e,PQ),{id:k}=b,T=Hh(b,OQ);return v.createElement(Dw,$0({},E,T,{ref:i,labelRef:l,scale:p,x:x.x,y:x.y,tickTextProps:n==="auto"?{width:void 0}:{width:n},width:y.width,height:y.height,className:jr("recharts-".concat(f," ").concat(f),r),viewBox:u,ticks:j,axisType:f}))},MQ={allowDataOverflow:Ts.allowDataOverflow,allowDecimals:Ts.allowDecimals,allowDuplicatedCategory:Ts.allowDuplicatedCategory,hide:!1,mirror:Ts.mirror,orientation:Ts.orientation,padding:Ts.padding,reversed:Ts.reversed,scale:Ts.scale,tickCount:Ts.tickCount,type:Ts.type,width:Ts.width,yAxisId:0},FQ=e=>{var t,r,n,s,i,l=ii(e,MQ);return v.createElement(v.Fragment,null,v.createElement(RQ,{interval:(t=l.interval)!==null&&t!==void 0?t:"preserveEnd",id:l.yAxisId,scale:l.scale,type:l.type,domain:l.domain,allowDataOverflow:l.allowDataOverflow,dataKey:l.dataKey,allowDuplicatedCategory:l.allowDuplicatedCategory,allowDecimals:l.allowDecimals,tickCount:l.tickCount,padding:l.padding,includeHidden:(r=l.includeHidden)!==null&&r!==void 0?r:!1,reversed:l.reversed,ticks:l.ticks,width:l.width,orientation:l.orientation,mirror:l.mirror,hide:l.hide,unit:l.unit,name:l.name,angle:(n=l.angle)!==null&&n!==void 0?n:0,minTickGap:(s=l.minTickGap)!==null&&s!==void 0?s:5,tick:(i=l.tick)!==null&&i!==void 0?i:!0,tickFormatter:l.tickFormatter}),v.createElement($Q,l))},LQ=(e,t)=>{var{domain:r}=e,n=Hh(e,TQ),{domain:s}=t,i=Hh(t,IQ);return dc(n,i)?Array.isArray(r)&&r.length===2&&Array.isArray(s)&&s.length===2?r[0]===s[0]&&r[1]===s[1]:dc({domain:r},{domain:s}):!1},X4=v.memo(FQ,LQ);X4.displayName="YAxis";var pv={exports:{}},gv={};/**
 * @license React
 * use-sync-external-store-with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var A2;function zQ(){if(A2)return gv;A2=1;var e=fc();function t(d,m){return d===m&&(d!==0||1/d===1/m)||d!==d&&m!==m}var r=typeof Object.is=="function"?Object.is:t,n=e.useSyncExternalStore,s=e.useRef,i=e.useEffect,l=e.useMemo,u=e.useDebugValue;return gv.useSyncExternalStoreWithSelector=function(d,m,f,p,y){var x=s(null);if(x.current===null){var j={hasValue:!1,value:null};x.current=j}else j=x.current;x=l(function(){function S(O){if(!N){if(N=!0,E=O,O=p(O),y!==void 0&&j.hasValue){var P=j.value;if(y(P,O))return k=P}return k=O}if(P=k,r(E,O))return P;var R=p(O);return y!==void 0&&y(P,R)?(E=O,P):(E=O,k=R)}var N=!1,E,k,T=f===void 0?null:f;return[function(){return S(m())},T===null?void 0:function(){return S(T())}]},[m,f,p,y]);var b=n(d,x[0],x[1]);return i(function(){j.hasValue=!0,j.value=b},[b]),u(b),b},gv}var P2;function BQ(){return P2||(P2=1,pv.exports=zQ()),pv.exports}BQ();function UQ(e){e()}function WQ(){let e=null,t=null;return{clear(){e=null,t=null},notify(){UQ(()=>{let r=e;for(;r;)r.callback(),r=r.next})},get(){const r=[];let n=e;for(;n;)r.push(n),n=n.next;return r},subscribe(r){let n=!0;const s=t={callback:r,next:null,prev:t};return s.prev?s.prev.next=s:e=s,function(){!n||e===null||(n=!1,s.next?s.next.prev=s.prev:t=s.prev,s.prev?s.prev.next=s.next:e=s.next)}}}}var O2={notify(){},get:()=>[]};function VQ(e,t){let r,n=O2,s=0,i=!1;function l(b){f();const S=n.subscribe(b);let N=!1;return()=>{N||(N=!0,S(),p())}}function u(){n.notify()}function d(){j.onStateChange&&j.onStateChange()}function m(){return i}function f(){s++,r||(r=e.subscribe(d),n=WQ())}function p(){s--,r&&s===0&&(r(),r=void 0,n.clear(),n=O2)}function y(){i||(i=!0,f())}function x(){i&&(i=!1,p())}const j={addNestedSub:l,notifyNestedSubs:u,handleChangeWrapper:d,isSubscribed:m,trySubscribe:y,tryUnsubscribe:x,getListeners:()=>n};return j}var qQ=()=>typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",HQ=qQ(),KQ=()=>typeof navigator<"u"&&navigator.product==="ReactNative",GQ=KQ(),YQ=()=>HQ||GQ?v.useLayoutEffect:v.useEffect,JQ=YQ(),yv=Symbol.for("react-redux-context"),vv=typeof globalThis<"u"?globalThis:{};function QQ(){if(!v.createContext)return{};const e=vv[yv]??(vv[yv]=new Map);let t=e.get(v.createContext);return t||(t=v.createContext(null),e.set(v.createContext,t)),t}var XQ=QQ();function ZQ(e){const{children:t,context:r,serverState:n,store:s}=e,i=v.useMemo(()=>{const d=VQ(s);return{store:s,subscription:d,getServerState:n?()=>n:void 0}},[s,n]),l=v.useMemo(()=>s.getState(),[s]);JQ(()=>{const{subscription:d}=i;return d.onStateChange=d.notifyNestedSubs,d.trySubscribe(),l!==s.getState()&&d.notifyNestedSubs(),()=>{d.tryUnsubscribe(),d.onStateChange=void 0}},[i,l]);const u=r||XQ;return v.createElement(u.Provider,{value:i},t)}var eX=ZQ,tX=(e,t)=>t,Rw=pe([tX,er,aO,vn,o4,Ea,wH,On],CH),$w=e=>{var t=e.currentTarget.getBoundingClientRect(),r=t.width/e.currentTarget.offsetWidth,n=t.height/e.currentTarget.offsetHeight;return{chartX:Math.round((e.clientX-t.left)/r),chartY:Math.round((e.clientY-t.top)/n)}},Z4=ni("mouseClick"),eT=ed();eT.startListening({actionCreator:Z4,effect:(e,t)=>{var r=e.payload,n=Rw(t.getState(),$w(r));(n==null?void 0:n.activeIndex)!=null&&t.dispatch(Sq({activeIndex:n.activeIndex,activeDataKey:void 0,activeCoordinate:n.activeCoordinate}))}});var M0=ni("mouseMove"),tT=ed();tT.startListening({actionCreator:M0,effect:(e,t)=>{var r=e.payload,n=t.getState(),s=bw(n,n.tooltip.settings.shared),i=Rw(n,$w(r));s==="axis"&&((i==null?void 0:i.activeIndex)!=null?t.dispatch(XO({activeIndex:i.activeIndex,activeDataKey:void 0,activeCoordinate:i.activeCoordinate})):t.dispatch(QO()))}});var T2={accessibilityLayer:!0,barCategoryGap:"10%",barGap:4,barSize:void 0,className:void 0,maxBarSize:void 0,stackOffset:"none",syncId:void 0,syncMethod:"index",baseValue:void 0},rT=_s({name:"rootProps",initialState:T2,reducers:{updateOptions:(e,t)=>{var r;e.accessibilityLayer=t.payload.accessibilityLayer,e.barCategoryGap=t.payload.barCategoryGap,e.barGap=(r=t.payload.barGap)!==null&&r!==void 0?r:T2.barGap,e.barSize=t.payload.barSize,e.maxBarSize=t.payload.maxBarSize,e.stackOffset=t.payload.stackOffset,e.syncId=t.payload.syncId,e.syncMethod=t.payload.syncMethod,e.className=t.payload.className,e.baseValue=t.payload.baseValue}}}),rX=rT.reducer,{updateOptions:nX}=rT.actions,nT=_s({name:"polarOptions",initialState:null,reducers:{updatePolarOptions:(e,t)=>t.payload}}),{updatePolarOptions:wee}=nT.actions,sX=nT.reducer,sT=ni("keyDown"),iT=ni("focus"),Mw=ed();Mw.startListening({actionCreator:sT,effect:(e,t)=>{var r=t.getState(),n=r.rootProps.accessibilityLayer!==!1;if(n){var{keyboardInteraction:s}=r.tooltip,i=e.payload;if(!(i!=="ArrowRight"&&i!=="ArrowLeft"&&i!=="Enter")){var l=Number(jw(s,Ac(r))),u=Ea(r);if(i==="Enter"){var d=Fh(r,"axis","hover",String(s.index));t.dispatch(E0({active:!s.active,activeIndex:s.index,activeDataKey:s.dataKey,activeCoordinate:d}));return}var m=mq(r),f=m==="left-to-right"?1:-1,p=i==="ArrowRight"?1:-1,y=l+p*f;if(!(u==null||y>=u.length||y<0)){var x=Fh(r,"axis","hover",String(y));t.dispatch(E0({active:!0,activeIndex:y.toString(),activeDataKey:void 0,activeCoordinate:x}))}}}}});Mw.startListening({actionCreator:iT,effect:(e,t)=>{var r=t.getState(),n=r.rootProps.accessibilityLayer!==!1;if(n){var{keyboardInteraction:s}=r.tooltip;if(!s.active&&s.index==null){var i="0",l=Fh(r,"axis","hover",String(i));t.dispatch(E0({activeDataKey:void 0,active:!0,activeIndex:i,activeCoordinate:l}))}}}});var Xs=ni("externalEvent"),aT=ed();aT.startListening({actionCreator:Xs,effect:(e,t)=>{if(e.payload.handler!=null){var r=t.getState(),n={activeCoordinate:iH(r),activeDataKey:d4(r),activeIndex:uc(r),activeLabel:u4(r),activeTooltipIndex:uc(r),isTooltipActive:aH(r)};e.payload.handler(n,e.payload.reactEvent)}}});var iX=pe([Ec],e=>e.tooltipItemPayloads),aX=pe([iX,ud,(e,t,r)=>t,(e,t,r)=>r],(e,t,r,n)=>{var s=e.find(u=>u.settings.dataKey===n);if(s!=null){var{positions:i}=s;if(i!=null){var l=t(i,r);return l}}}),oT=ni("touchMove"),lT=ed();lT.startListening({actionCreator:oT,effect:(e,t)=>{var r=e.payload;if(!(r.touches==null||r.touches.length===0)){var n=t.getState(),s=bw(n,n.tooltip.settings.shared);if(s==="axis"){var i=Rw(n,$w({clientX:r.touches[0].clientX,clientY:r.touches[0].clientY,currentTarget:r.currentTarget}));(i==null?void 0:i.activeIndex)!=null&&t.dispatch(XO({activeIndex:i.activeIndex,activeDataKey:void 0,activeCoordinate:i.activeCoordinate}))}else if(s==="item"){var l,u=r.touches[0];if(document.elementFromPoint==null)return;var d=document.elementFromPoint(u.clientX,u.clientY);if(!d||!d.getAttribute)return;var m=d.getAttribute(yB),f=(l=d.getAttribute(vB))!==null&&l!==void 0?l:void 0,p=aX(t.getState(),m,f);t.dispatch(JO({activeDataKey:f,activeIndex:m,activeCoordinate:p}))}}}});var oX=mA({brush:MJ,cartesianAxis:vY,chartData:iK,errorBars:TY,graphicalItems:oY,layout:X8,legend:tU,options:eK,polarAxis:CG,polarOptions:sX,referenceElements:VJ,rootProps:rX,tooltip:_q,zIndex:BH}),lX=function(t){return S8({reducer:oX,preloadedState:t,middleware:r=>r({serializableCheck:!1}).concat([eT.middleware,tT.middleware,Mw.middleware,aT.middleware,lT.middleware]),enhancers:r=>{var n=r;return typeof r=="function"&&(n=r()),n.concat(kA({type:"raf"}))},devTools:bc.devToolsEnabled})};function cX(e){var{preloadedState:t,children:r,reduxStoreName:n}=e,s=Ws(),i=v.useRef(null);if(s)return r;i.current==null&&(i.current=lX(t));var l=jx;return v.createElement(eX,{context:l,store:i.current},r)}function uX(e){var{layout:t,margin:r}=e,n=Hr(),s=Ws();return v.useEffect(()=>{s||(n(Y8(t)),n(G8(r)))},[n,s,t,r]),null}function dX(e){var t=Hr();return v.useEffect(()=>{t(nX(e))},[t,e]),null}function I2(e){var{zIndex:t,isPanorama:r}=e,n=r?"recharts-zindex-panorama-":"recharts-zindex-",s=L4("".concat(n).concat(t)),i=Hr();return v.useLayoutEffect(()=>(i(LH({zIndex:t,elementId:s,isPanorama:r})),()=>{i(zH({zIndex:t,isPanorama:r}))}),[i,t,s,r]),v.createElement("g",{id:s})}function D2(e){var{children:t,isPanorama:r}=e,n=lt(AH);if(!n||n.length===0)return t;var s=n.filter(l=>l<0),i=n.filter(l=>l>0);return v.createElement(v.Fragment,null,s.map(l=>v.createElement(I2,{key:l,zIndex:l,isPanorama:r})),t,i.map(l=>v.createElement(I2,{key:l,zIndex:l,isPanorama:r})))}var fX=["children"];function hX(e,t){if(e==null)return{};var r,n,s=mX(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function mX(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function Kh(){return Kh=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Kh.apply(null,arguments)}var pX={width:"100%",height:"100%",display:"block"},gX=v.forwardRef((e,t)=>{var r=YB(),n=JB(),s=KA();if(!ro(r)||!ro(n))return null;var{children:i,otherAttributes:l,title:u,desc:d}=e,m,f;return l!=null&&(typeof l.tabIndex=="number"?m=l.tabIndex:m=s?0:void 0,typeof l.role=="string"?f=l.role:f=s?"application":void 0),v.createElement(TE,Kh({},l,{title:u,desc:d,role:f,tabIndex:m,width:r,height:n,style:pX,ref:t}),i)}),yX=e=>{var{children:t}=e,r=lt(xm);if(!r)return null;var{width:n,height:s,y:i,x:l}=r;return v.createElement(TE,{width:n,height:s,x:l,y:i},t)},R2=v.forwardRef((e,t)=>{var{children:r}=e,n=hX(e,fX),s=Ws();return s?v.createElement(yX,null,v.createElement(D2,{isPanorama:!0},r)):v.createElement(gX,Kh({ref:t},n),v.createElement(D2,{isPanorama:!1},r))});function vX(){var e=Hr(),[t,r]=v.useState(null),n=lt(gB);return v.useEffect(()=>{if(t!=null){var s=t.getBoundingClientRect(),i=s.width/t.offsetWidth;qr(i)&&i!==n&&e(Q8(i))}},[t,e,n]),r}function $2(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function xX(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?$2(Object(r),!0).forEach(function(n){wX(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):$2(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function wX(e,t,r){return(t=bX(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function bX(e){var t=jX(e,"string");return typeof t=="symbol"?t:t+""}function jX(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Go(){return Go=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Go.apply(null,arguments)}var SX=()=>(mK(),null);function Gh(e){if(typeof e=="number")return e;if(typeof e=="string"){var t=parseFloat(e);if(!Number.isNaN(t))return t}return 0}var _X=v.forwardRef((e,t)=>{var r,n,s=v.useRef(null),[i,l]=v.useState({containerWidth:Gh((r=e.style)===null||r===void 0?void 0:r.width),containerHeight:Gh((n=e.style)===null||n===void 0?void 0:n.height)}),u=v.useCallback((m,f)=>{l(p=>{var y=Math.round(m),x=Math.round(f);return p.containerWidth===y&&p.containerHeight===x?p:{containerWidth:y,containerHeight:x}})},[]),d=v.useCallback(m=>{if(typeof t=="function"&&t(m),m!=null&&typeof ResizeObserver<"u"){var{width:f,height:p}=m.getBoundingClientRect();u(f,p);var y=j=>{var{width:b,height:S}=j[0].contentRect;u(b,S)},x=new ResizeObserver(y);x.observe(m),s.current=x}},[t,u]);return v.useEffect(()=>()=>{var m=s.current;m!=null&&m.disconnect()},[u]),v.createElement(v.Fragment,null,v.createElement(jm,{width:i.containerWidth,height:i.containerHeight}),v.createElement("div",Go({ref:d},e)))}),NX=v.forwardRef((e,t)=>{var{width:r,height:n}=e,[s,i]=v.useState({containerWidth:Gh(r),containerHeight:Gh(n)}),l=v.useCallback((d,m)=>{i(f=>{var p=Math.round(d),y=Math.round(m);return f.containerWidth===p&&f.containerHeight===y?f:{containerWidth:p,containerHeight:y}})},[]),u=v.useCallback(d=>{if(typeof t=="function"&&t(d),d!=null){var{width:m,height:f}=d.getBoundingClientRect();l(m,f)}},[t,l]);return v.createElement(v.Fragment,null,v.createElement(jm,{width:s.containerWidth,height:s.containerHeight}),v.createElement("div",Go({ref:u},e)))}),kX=v.forwardRef((e,t)=>{var{width:r,height:n}=e;return v.createElement(v.Fragment,null,v.createElement(jm,{width:r,height:n}),v.createElement("div",Go({ref:t},e)))}),CX=v.forwardRef((e,t)=>{var{width:r,height:n}=e;return pa(r)||pa(n)?v.createElement(NX,Go({},e,{ref:t})):v.createElement(kX,Go({},e,{ref:t}))});function EX(e){return e===!0?_X:CX}var AX=v.forwardRef((e,t)=>{var{children:r,className:n,height:s,onClick:i,onContextMenu:l,onDoubleClick:u,onMouseDown:d,onMouseEnter:m,onMouseLeave:f,onMouseMove:p,onMouseUp:y,onTouchEnd:x,onTouchMove:j,onTouchStart:b,style:S,width:N,responsive:E,dispatchTouchEvents:k=!0}=e,T=v.useRef(null),O=Hr(),[P,R]=v.useState(null),[q,F]=v.useState(null),V=vX(),B=Ax(),Q=(B==null?void 0:B.width)>0?B.width:N,ae=(B==null?void 0:B.height)>0?B.height:s,ne=v.useCallback(L=>{V(L),typeof t=="function"&&t(L),R(L),F(L),L!=null&&(T.current=L)},[V,t,R,F]),me=v.useCallback(L=>{O(Z4(L)),O(Xs({handler:i,reactEvent:L}))},[O,i]),K=v.useCallback(L=>{O(M0(L)),O(Xs({handler:m,reactEvent:L}))},[O,m]),te=v.useCallback(L=>{O(QO()),O(Xs({handler:f,reactEvent:L}))},[O,f]),se=v.useCallback(L=>{O(M0(L)),O(Xs({handler:p,reactEvent:L}))},[O,p]),de=v.useCallback(()=>{O(iT())},[O]),xe=v.useCallback(L=>{O(sT(L.key))},[O]),I=v.useCallback(L=>{O(Xs({handler:l,reactEvent:L}))},[O,l]),H=v.useCallback(L=>{O(Xs({handler:u,reactEvent:L}))},[O,u]),Ie=v.useCallback(L=>{O(Xs({handler:d,reactEvent:L}))},[O,d]),X=v.useCallback(L=>{O(Xs({handler:y,reactEvent:L}))},[O,y]),ve=v.useCallback(L=>{O(Xs({handler:b,reactEvent:L}))},[O,b]),ce=v.useCallback(L=>{k&&O(oT(L)),O(Xs({handler:j,reactEvent:L}))},[O,k,j]),ge=v.useCallback(L=>{O(Xs({handler:x,reactEvent:L}))},[O,x]),ye=EX(E);return v.createElement(x4.Provider,{value:P},v.createElement(aL.Provider,{value:q},v.createElement(ye,{width:Q??(S==null?void 0:S.width),height:ae??(S==null?void 0:S.height),className:jr("recharts-wrapper",n),style:xX({position:"relative",cursor:"default",width:Q,height:ae},S),onClick:me,onContextMenu:I,onDoubleClick:H,onFocus:de,onKeyDown:xe,onMouseDown:Ie,onMouseEnter:K,onMouseLeave:te,onMouseMove:se,onMouseUp:X,onTouchEnd:ge,onTouchMove:ce,onTouchStart:ve,ref:ne},v.createElement(SX,null),r)))}),PX=["width","height","responsive","children","className","style","compact","title","desc"];function OX(e,t){if(e==null)return{};var r,n,s=TX(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function TX(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var IX=v.forwardRef((e,t)=>{var{width:r,height:n,responsive:s,children:i,className:l,style:u,compact:d,title:m,desc:f}=e,p=OX(e,PX),y=to(p);return d?v.createElement(v.Fragment,null,v.createElement(jm,{width:r,height:n}),v.createElement(R2,{otherAttributes:y,title:m,desc:f},i)):v.createElement(AX,{className:l,style:u,width:r,height:n,responsive:s??!1,onClick:e.onClick,onMouseLeave:e.onMouseLeave,onMouseEnter:e.onMouseEnter,onMouseMove:e.onMouseMove,onMouseDown:e.onMouseDown,onMouseUp:e.onMouseUp,onContextMenu:e.onContextMenu,onDoubleClick:e.onDoubleClick,onTouchStart:e.onTouchStart,onTouchMove:e.onTouchMove,onTouchEnd:e.onTouchEnd},v.createElement(R2,{otherAttributes:y,title:m,desc:f,ref:t},v.createElement(HJ,null,i)))});function F0(){return F0=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},F0.apply(null,arguments)}var DX={top:5,right:5,bottom:5,left:5},RX={accessibilityLayer:!0,layout:"horizontal",stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:DX,reverseStackOrder:!1,syncMethod:"index",responsive:!1},$X=v.forwardRef(function(t,r){var n,s=ii(t.categoricalChartProps,RX),{chartName:i,defaultTooltipEventType:l,validateTooltipEventTypes:u,tooltipPayloadSearcher:d,categoricalChartProps:m}=t,f={chartName:i,defaultTooltipEventType:l,validateTooltipEventTypes:u,tooltipPayloadSearcher:d,eventEmitter:void 0};return v.createElement(cX,{preloadedState:{options:f},reduxStoreName:(n=m.id)!==null&&n!==void 0?n:i},v.createElement($J,{chartData:m.data}),v.createElement(uX,{layout:s.layout,margin:s.margin}),v.createElement(dX,{baseValue:s.baseValue,accessibilityLayer:s.accessibilityLayer,barCategoryGap:s.barCategoryGap,maxBarSize:s.maxBarSize,stackOffset:s.stackOffset,barGap:s.barGap,barSize:s.barSize,syncId:s.syncId,syncMethod:s.syncMethod,className:s.className}),v.createElement(IX,F0({},s,{ref:r})))}),MX=["axis","item"],FX=v.forwardRef((e,t)=>v.createElement($X,{chartName:"BarChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:MX,tooltipPayloadSearcher:XH,categoricalChartProps:e,ref:t}));const cT=["Bug","Change Request","Data Correction","Epic","Feature","Group","Issue","Other","Spike","Task","Test Case","User Story"];function LX(){const e=window.location.origin,t=window.location.pathname,r=t.includes("/admin")?t.substring(0,t.indexOf("/admin")):t.includes("/voter")?t.substring(0,t.indexOf("/voter")):t;return`${e}${r}/admin`}const zs={clientId:"a6283b6c-2210-4d6c-bade-651acfdb6703",tenantId:"3bb4e039-9a0f-4671-9733-a9ae03d39395",get redirectUri(){return LX()},scopes:["https://app.vssps.visualstudio.com/user_impersonation","offline_access"]};function zX(){const e=new Uint8Array(32);return crypto.getRandomValues(e),uT(e)}async function BX(e){const r=new TextEncoder().encode(e),n=await crypto.subtle.digest("SHA-256",r);return uT(new Uint8Array(n))}function uT(e){return btoa(String.fromCharCode(...e)).replace(/\+/g,"-").replace(/\//g,"_").replace(/=/g,"")}async function UX(e){const t=zX(),r=await BX(t);sessionStorage.setItem("pkce_verifier",t);const n=new URLSearchParams({client_id:zs.clientId,response_type:"code",redirect_uri:zs.redirectUri,response_mode:"query",scope:zs.scopes.join(" "),state:e,code_challenge:r,code_challenge_method:"S256"});return`https://login.microsoftonline.com/${zs.tenantId}/oauth2/v2.0/authorize?${n}`}async function WX(e){const t=`https://login.microsoftonline.com/${zs.tenantId}/oauth2/v2.0/token`,r=sessionStorage.getItem("pkce_verifier");if(!r)throw new Error("Code verifier not found - PKCE flow incomplete");const n=new URLSearchParams({client_id:zs.clientId,scope:zs.scopes.join(" "),code:e,redirect_uri:zs.redirectUri,grant_type:"authorization_code",code_verifier:r}),s=await fetch(t,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:n.toString()});if(!s.ok){const l=await s.json();throw console.error("Token exchange error:",l),new Error(`Failed to exchange code for tokens: ${l.error_description||l.error}`)}const i=await s.json();return sessionStorage.removeItem("pkce_verifier"),{accessToken:i.access_token,refreshToken:i.refresh_token,expiresIn:i.expires_in}}async function VX(e){const t=`https://login.microsoftonline.com/${zs.tenantId}/oauth2/v2.0/token`,r=new URLSearchParams({client_id:zs.clientId,scope:zs.scopes.join(" "),refresh_token:e,grant_type:"refresh_token"}),n=await fetch(t,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:r.toString()});if(!n.ok){const i=await n.json();throw console.error("Token refresh error:",i),new Error(`Failed to refresh access token: ${i.error_description||i.error}`)}const s=await n.json();return{accessToken:s.access_token,expiresIn:s.expires_in}}async function dT(e,t){if(!e.accessToken||!e.organization||!e.project)throw new Error("Missing required configuration");const r=t||e.workItemType;if(!r)throw new Error("Missing work item type for state fetch");const n=encodeURIComponent(r),s=`https://dev.azure.com/${e.organization}/${e.project}/_apis/wit/workitemtypes/${n}?api-version=7.1`,i=await fetch(s,{headers:{Authorization:`Bearer ${e.accessToken}`,"Content-Type":"application/json"}});if(!i.ok)throw new Error(`Failed to fetch states: ${i.statusText}`);const l=await i.json();return l.states&&Array.isArray(l.states)?l.states.map(u=>u.name):[]}async function M2(e){const t=new Set;for(const r of cT)try{(await dT({...e,workItemType:r},r)).forEach(s=>{s&&t.add(s)})}catch(n){console.warn(`Failed to fetch states for type ${r}:`,n)}return Array.from(t).sort((r,n)=>r.localeCompare(n))}async function L0(e){if(!e.accessToken||!e.organization||!e.project)throw new Error("Missing required configuration");const t=`https://dev.azure.com/${e.organization}/${e.project}/_apis/wit/classificationnodes/areas?$depth=10&api-version=7.1`,r=await fetch(t,{headers:{Authorization:`Bearer ${e.accessToken}`,"Content-Type":"application/json"}});if(!r.ok)throw new Error(`Failed to fetch area paths: ${r.statusText}`);const n=await r.json(),s=(i,l="")=>{const u=l?`${l}\\${i.name}`:i.name;let d=[u];return i.children&&i.children.length>0&&i.children.forEach(m=>{d=d.concat(s(m,u))}),d};return s(n)}async function qX(e,t,r=[]){if(!e.accessToken||!e.organization||!e.project)throw new Error("Missing required configuration");if(!t)return L0(e);try{const n=[`[System.WorkItemType] = '${t}'`];if(r&&r.length>0)if(r.length===1)n.push(`[System.State] = '${r[0]}'`);else{const x=r.map(j=>`'${j}'`).join(", ");n.push(`[System.State] IN (${x})`)}const s=`SELECT [System.Id] FROM WorkItems WHERE ${n.join(" AND ")} ORDER BY [System.ChangedDate] DESC`,i=`https://dev.azure.com/${e.organization}/${e.project}/_apis/wit/wiql?api-version=7.1`,l=await fetch(i,{method:"POST",headers:{Authorization:`Bearer ${e.accessToken}`,"Content-Type":"application/json"},body:JSON.stringify({query:s})});if(!l.ok)return console.warn("Failed to fetch area paths by type/state, returning empty list"),[];const u=await l.json();if(!u.workItems||u.workItems.length===0)return[];const d=u.workItems.map(x=>x.id).slice(0,200);if(d.length===0)return[];const m=`https://dev.azure.com/${e.organization}/${e.project}/_apis/wit/workitems?ids=${d.join(",")}&fields=System.AreaPath&api-version=7.1`,f=await fetch(m,{headers:{Authorization:`Bearer ${e.accessToken}`,"Content-Type":"application/json"}});if(!f.ok)return console.warn("Failed to fetch work item area paths for filtered request"),[];const p=await f.json(),y=new Set;return p.value&&Array.isArray(p.value)&&p.value.forEach(x=>{var b;const j=(b=x.fields)==null?void 0:b["System.AreaPath"];j&&y.add(j)}),Array.from(y).sort()}catch(n){return console.error("Error fetching area paths for type/state:",n),[]}}async function HX(e,t){if(!e.accessToken||!e.organization||!e.project)throw new Error("Missing required configuration");if(!t||t.length===0)return{types:[],areaPaths:[],tags:[]};try{const n=`SELECT [System.Id], [System.WorkItemType], [System.AreaPath] FROM WorkItems WHERE ${t.length===1?`[System.State] = '${t[0]}'`:`[System.State] IN (${t.map(j=>`'${j}'`).join(", ")})`} ORDER BY [System.ChangedDate] DESC`,s=`https://dev.azure.com/${e.organization}/${e.project}/_apis/wit/wiql?api-version=7.1`,i=await fetch(s,{method:"POST",headers:{Authorization:`Bearer ${e.accessToken}`,"Content-Type":"application/json"},body:JSON.stringify({query:n})});if(!i.ok)throw new Error(`Failed to fetch work items by state: ${i.statusText}`);const l=await i.json();if(!l.workItems||l.workItems.length===0)return{types:[],areaPaths:[],tags:[]};const u=l.workItems.map(j=>j.id).slice(0,200);if(u.length===0)return{types:[],areaPaths:[],tags:[]};const d=`https://dev.azure.com/${e.organization}/${e.project}/_apis/wit/workitems?ids=${u.join(",")}&fields=System.WorkItemType,System.AreaPath,System.Tags&api-version=7.1`,m=await fetch(d,{headers:{Authorization:`Bearer ${e.accessToken}`,"Content-Type":"application/json"}});if(!m.ok)return console.warn("Failed to fetch work item details for states filter"),{types:[],areaPaths:[],tags:[]};const f=await m.json(),p=new Set,y=new Set,x=new Set;return f.value&&Array.isArray(f.value)&&f.value.forEach(j=>{var E,k,T;const b=(E=j.fields)==null?void 0:E["System.WorkItemType"],S=(k=j.fields)==null?void 0:k["System.AreaPath"],N=(T=j.fields)==null?void 0:T["System.Tags"];b&&p.add(b),S&&y.add(S),N&&N.split(";").map(O=>O.trim()).forEach(O=>{O&&x.add(O)})}),{types:Array.from(p).sort((j,b)=>j.localeCompare(b)),areaPaths:Array.from(y).sort((j,b)=>j.localeCompare(b)),tags:Array.from(x).sort((j,b)=>j.localeCompare(b))}}catch(r){return console.error("Error fetching types and area paths for states:",r),{types:[],areaPaths:[],tags:[]}}}async function KX(e){if(!e.accessToken||!e.organization)throw new Error("Missing required configuration");const t=`https://dev.azure.com/${e.organization}/_apis/projects?stateFilter=All&api-version=7.1`,r=await fetch(t,{headers:{Authorization:`Bearer ${e.accessToken}`,"Content-Type":"application/json"}});if(!r.ok)throw new Error(`Failed to fetch projects: ${r.statusText}`);const n=await r.json();return!(n!=null&&n.value)||!Array.isArray(n.value)?[]:n.value.map(s=>s==null?void 0:s.name).filter(s=>typeof s=="string"&&s.trim().length>0).map(s=>s.trim()).sort((s,i)=>s.localeCompare(i))}async function GX(e,t){if(!e.accessToken||!e.organization||!e.project)throw new Error("Missing required configuration");try{const n=`SELECT [System.Id], [System.WorkItemType], [System.State] FROM WorkItems WHERE (${t.map(x=>`[System.AreaPath] UNDER '${x}'`).join(" OR ")}) ORDER BY [System.ChangedDate] DESC`,s=`https://dev.azure.com/${e.organization}/${e.project}/_apis/wit/wiql?api-version=7.1`,i=await fetch(s,{method:"POST",headers:{Authorization:`Bearer ${e.accessToken}`,"Content-Type":"application/json"},body:JSON.stringify({query:n})});if(!i.ok)throw new Error(`Failed to fetch work items: ${i.statusText}`);const l=await i.json();if(!l.workItems||l.workItems.length===0)return{types:[],states:[]};const u=l.workItems.map(x=>x.id).slice(0,200),d=`https://dev.azure.com/${e.organization}/${e.project}/_apis/wit/workitems?ids=${u.join(",")}&fields=System.WorkItemType,System.State&api-version=7.1`,m=await fetch(d,{headers:{Authorization:`Bearer ${e.accessToken}`,"Content-Type":"application/json"}});if(!m.ok)return console.warn("Failed to fetch work item details"),{types:[],states:[]};const f=await m.json(),p=new Set,y=new Set;return f.value&&Array.isArray(f.value)&&f.value.forEach(x=>{x.fields&&(x.fields["System.WorkItemType"]&&p.add(x.fields["System.WorkItemType"]),x.fields["System.State"]&&y.add(x.fields["System.State"]))}),{types:Array.from(p).sort(),states:Array.from(y).sort()}}catch(r){return console.error("Error fetching types and states for area path:",r),{types:[],states:[]}}}async function YX(e,t){if(!e.accessToken||!e.organization||!e.project)throw new Error("Missing required configuration");try{const n=`SELECT [System.Id], [System.WorkItemType], [System.State] FROM WorkItems WHERE (${t.map(j=>`[System.Tags] CONTAINS '${j}'`).join(" OR ")}) ORDER BY [System.ChangedDate] DESC`,s=`https://dev.azure.com/${e.organization}/${e.project}/_apis/wit/wiql?api-version=7.1`,i=await fetch(s,{method:"POST",headers:{Authorization:`Bearer ${e.accessToken}`,"Content-Type":"application/json"},body:JSON.stringify({query:n})});if(!i.ok)throw new Error(`Failed to fetch work items: ${i.statusText}`);const l=await i.json();if(!l.workItems||l.workItems.length===0)return{types:[],states:[],areaPaths:[]};const u=l.workItems.map(j=>j.id).slice(0,200),d=`https://dev.azure.com/${e.organization}/${e.project}/_apis/wit/workitems?ids=${u.join(",")}&fields=System.WorkItemType,System.State,System.AreaPath&api-version=7.1`,m=await fetch(d,{headers:{Authorization:`Bearer ${e.accessToken}`,"Content-Type":"application/json"}});if(!m.ok)return console.warn("Failed to fetch work item details"),{types:[],states:[],areaPaths:[]};const f=await m.json(),p=new Set,y=new Set,x=new Set;return f.value&&Array.isArray(f.value)&&f.value.forEach(j=>{j.fields&&(j.fields["System.WorkItemType"]&&p.add(j.fields["System.WorkItemType"]),j.fields["System.State"]&&y.add(j.fields["System.State"]),j.fields["System.AreaPath"]&&x.add(j.fields["System.AreaPath"]))}),{types:Array.from(p).sort(),states:Array.from(y).sort(),areaPaths:Array.from(x).sort()}}catch(r){return console.error("Error fetching types and states for tags:",r),{types:[],states:[],areaPaths:[]}}}async function JX(e,t,r,n){if(!e.accessToken||!e.organization||!e.project)throw new Error("Missing required configuration");try{const s=[];if(s.push(`[System.WorkItemType] = '${t}'`),r&&r.length>0)if(r.length===1)s.push(`[System.State] = '${r[0]}'`);else{const j=r.map(b=>`'${b}'`).join(", ");s.push(`[System.State] IN (${j})`)}if(n&&n.length>0)if(n.length===1)s.push(`[System.AreaPath] UNDER '${n[0]}'`);else{const j=n.map(b=>`[System.AreaPath] UNDER '${b}'`);s.push(`(${j.join(" OR ")})`)}const i=`SELECT [System.Id] FROM WorkItems WHERE ${s.join(" AND ")} ORDER BY [System.ChangedDate] DESC`,l=`https://dev.azure.com/${e.organization}/${e.project}/_apis/wit/wiql?api-version=7.1`,u=await fetch(l,{method:"POST",headers:{Authorization:`Bearer ${e.accessToken}`,"Content-Type":"application/json"},body:JSON.stringify({query:i})});if(!u.ok)return console.warn("Failed to fetch tags, returning empty array"),[];const d=await u.json();if(!d.workItems||d.workItems.length===0)return[];const m=d.workItems.map(j=>j.id).slice(0,200),f=`https://dev.azure.com/${e.organization}/${e.project}/_apis/wit/workitems?ids=${m.join(",")}&fields=System.Tags&api-version=7.1`,p=await fetch(f,{headers:{Authorization:`Bearer ${e.accessToken}`,"Content-Type":"application/json"}});if(!p.ok)return console.warn("Failed to fetch work item details for tags"),[];const y=await p.json(),x=new Set;return y.value&&Array.isArray(y.value)&&y.value.forEach(j=>{j.fields&&j.fields["System.Tags"]&&j.fields["System.Tags"].split(";").map(S=>S.trim()).forEach(S=>{S&&x.add(S)})}),Array.from(x).sort()}catch(s){return console.warn("Error fetching tags, returning empty array:",s),[]}}async function F2(e){if(!e.accessToken||!e.organization||!e.project)throw new Error("Missing required configuration");const t=new Set;try{const r=[];let n=null;do{let s=`https://dev.azure.com/${e.organization}/${e.project}/_apis/wit/tags?api-version=7.1`;n&&(s+=`&continuationToken=${encodeURIComponent(n)}`);const i=await fetch(s,{headers:{Authorization:`Bearer ${e.accessToken}`,"Content-Type":"application/json"}});if(!i.ok){console.warn("Failed to fetch tags page, aborting remaining pages");break}const l=await i.json();l.value&&Array.isArray(l.value)&&l.value.forEach(u=>{u&&u.name&&r.push(u.name)}),n=i.headers.get("x-ms-continuationtoken")}while(n);r.forEach(s=>t.add(s))}catch(r){console.warn("Error fetching tags, returning empty array:",r)}try{(await QX(e)).forEach(n=>t.add(n))}catch(r){console.warn("Error fetching tags via WIQL fallback:",r)}return Array.from(t).sort((r,n)=>r.localeCompare(n))}async function QX(e){const t={query:"SELECT [System.Id] FROM WorkItems WHERE [System.TeamProject] = @project ORDER BY [System.ChangedDate] DESC"},r=`https://dev.azure.com/${e.organization}/${e.project}/_apis/wit/wiql?api-version=7.1`,n=await fetch(r,{method:"POST",headers:{Authorization:`Bearer ${e.accessToken}`,"Content-Type":"application/json"},body:JSON.stringify(t)});if(!n.ok)throw new Error(`Failed to fetch tags via WIQL: ${n.status}`);const s=await n.json();if(!s.workItems||s.workItems.length===0)return[];const i=s.workItems.map(f=>f.id).slice(0,200);if(i.length===0)return[];const l=`https://dev.azure.com/${e.organization}/${e.project}/_apis/wit/workitems?ids=${i.join(",")}&fields=System.Tags&api-version=7.1`,u=await fetch(l,{headers:{Authorization:`Bearer ${e.accessToken}`,"Content-Type":"application/json"}});if(!u.ok)throw new Error(`Failed to fetch work item details for tags via WIQL fallback: ${u.status}`);const d=await u.json(),m=new Set;return d.value&&Array.isArray(d.value)&&d.value.forEach(f=>{f.fields&&f.fields["System.Tags"]&&f.fields["System.Tags"].split(";").map(y=>y.trim()).forEach(y=>{y&&m.add(y)})}),Array.from(m)}function XX(e){const t=new Date(e).getTime(),r=Date.now(),n=300*1e3;return t-r<n}async function ZX(){const e=new URLSearchParams(window.location.search),t=e.get("code"),r=e.get("state");if(!t)return null;const n=sessionStorage.getItem("oauth_state");if(r!==n)throw new Error("State mismatch - possible CSRF attack");const s=await WX(t);return sessionStorage.removeItem("oauth_state"),s}async function eZ(){const e=Math.random().toString(36).substring(7);sessionStorage.setItem("oauth_state",e);const t=sessionStorage.getItem("currentSession");t&&sessionStorage.setItem("oauth_session_backup",t);const r=await UX(e);window.location.href=r}async function L2(e){const{organization:t,project:r,workItemType:n,query:s,accessToken:i}=e;if(!i)throw new Error("Not authenticated with Azure DevOps");try{let l;s?l=`SELECT [System.Id] FROM WorkItems WHERE ${s}`:l=`SELECT [System.Id] FROM WorkItems WHERE [System.WorkItemType] = '${n}' AND [System.State] = 'Active'`;const u=`https://dev.azure.com/${t}/${r}/_apis/wit/wiql?api-version=7.0`,d=await fetch(u,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${i}`},body:JSON.stringify({query:l})});if(!d.ok)throw new Error(`Azure DevOps query failed: ${d.status} ${d.statusText}`);const f=(await d.json()).workItems.map(k=>k.id);if(f.length===0)return[];const p=["System.Id","System.Title","System.Description","System.Tags","System.WorkItemType","System.State","Microsoft.VSTS.Common.Priority","System.AreaPath","System.IterationPath"].join(","),y=200,x=[];for(let k=0;k<f.length;k+=y){const O=f.slice(k,k+y).join(","),P=`https://dev.azure.com/${t}/${r}/_apis/wit/workitems?ids=${O}&fields=${p}&api-version=7.0`,R=await fetch(P,{headers:{Authorization:`Bearer ${i}`}});if(!R.ok)throw new Error(`Failed to fetch work items: ${R.status} ${R.statusText}`);const q=await R.json();q.value&&Array.isArray(q.value)&&x.push(...q.value)}if(x.length===0)return[];const j=new Map,b=new Map,S=new Map,N=10;for(let k=0;k<x.length;k+=N){const T=x.slice(k,k+N);await Promise.all(T.map(async O=>{try{const P=`https://dev.azure.com/${t}/${r}/_apis/wit/workitems/${O.id}?$expand=relations&api-version=7.0`,R=await fetch(P,{headers:{Authorization:`Bearer ${i}`}});if(R.ok){const q=await R.json();if(q.relations){for(const F of q.relations)if(F.rel==="System.LinkTypes.Hierarchy-Forward"){const V=F.url.match(/\/work[iI]tems\/(\d+)(?:\?|$|\/)/i);if(V){const B=parseInt(V[1],10);j.set(O.id,B),console.log(`Work item ${O.id} has parent ${B}`)}}}}}catch(P){console.error(`Error fetching relations for work item ${O.id}:`,P)}}))}const E=Array.from(new Set(j.values()));if(E.length>0){const k=E.slice(0,200).join(","),T=["System.Id","System.Title","System.WorkItemType"].join(","),O=`https://dev.azure.com/${t}/${r}/_apis/wit/workitems?ids=${k}&fields=${T}&api-version=7.0`;try{const P=await fetch(O,{headers:{Authorization:`Bearer ${i}`}});if(P.ok){const R=await P.json();for(const q of R.value)S.set(q.id,q.fields["System.Title"]||""),q.fields["System.WorkItemType"]==="Epic"&&(b.set(q.id,q.fields["System.Title"]||""),console.log(`Found Epic ${q.id}: ${q.fields["System.Title"]}`))}}catch(P){console.error("Error fetching parent work items:",P)}}return x.map(k=>{let T=null;const O=j.get(k.id);if(O)if(T=b.get(O)||null,T)console.log(`Work item ${k.id} has Epic from parent ${O}: ${T}`);else{const P=S.get(O);console.log(`Work item ${k.id} has parent ${O} (${P}) but it's not an Epic type`)}if(!T&&k.fields){const R=["System.Epic","Epic","Microsoft.VSTS.Common.Epic","Custom.Epic","EpicLink","EpicName",...Object.keys(k.fields).filter(q=>q.toLowerCase().includes("epic")&&!["System.Epic","Epic","Microsoft.VSTS.Common.Epic","Custom.Epic","EpicLink","EpicName"].includes(q))];for(const q of R){const F=k.fields[q];if(F!=null){if(typeof F=="string"&&F.trim()!==""){const V=parseInt(F.trim());if(!isNaN(V)&&V>0){if(T=b.get(V)||null,T){console.log(`Work item ${k.id} has Epic ID ${V} from field ${q}: ${T}`);break}}else{T=F.trim(),console.log(`Work item ${k.id} has Epic name from field ${q}: ${T}`);break}}else if(typeof F=="number"&&(T=b.get(F)||null,T)){console.log(`Work item ${k.id} has Epic ID ${F} from field ${q}: ${T}`);break}}}}return T||console.log(`Work item ${k.id} (${k.fields["System.Title"]}) has no Epic found`),{id:k.id,fields:{"System.Title":k.fields["System.Title"],"System.Description":k.fields["System.Description"],"System.Tags":k.fields["System.Tags"],"System.WorkItemType":k.fields["System.WorkItemType"],"System.State":k.fields["System.State"],"Microsoft.VSTS.Common.Priority":k.fields["Microsoft.VSTS.Common.Priority"],"System.AreaPath":k.fields["System.AreaPath"],"System.IterationPath":k.fields["System.IterationPath"],Epic:T||void 0},url:`https://dev.azure.com/${t}/${r}/_workitems/edit/${k.id}`}})}catch(l){throw console.error("Error fetching from Azure DevOps:",l),l}}function z2(e){return e.map(t=>{let r;const n=t.fields.Epic,s=t.fields["System.WorkItemType"];if(n&&typeof n=="string"&&n.trim()!==""){const d=n.trim();d!==s&&d!=="Epic"&&d.toLowerCase()!=="epic"?(r=d,console.log(`Work item ${t.id} converted - Epic: "${r}"`)):console.warn(`Work item ${t.id} has epic field "${d}" which matches work item type "${s}" - ignoring`)}!r&&s!=="Epic"&&console.log(`Work item ${t.id} (${t.fields["System.Title"]}) has no Epic assigned`);const l=(t.fields["System.Description"]||"").replace(/<[^>]*>/g,"").trim(),u=t.fields["System.Title"]||"Untitled";return r&&u===r&&console.warn(`Work item ${t.id}: Title "${u}" matches Epic name "${r}" - this may indicate a data issue`),{id:`ado-${t.id}`,title:u,description:l,votes:0,voters:[],epic:r||void 0,state:t.fields["System.State"]||void 0,areaPath:t.fields["System.AreaPath"]||void 0,tags:t.fields["System.Tags"]?t.fields["System.Tags"].split(";").map(d=>d.trim()).filter(d=>d):[],azureDevOpsId:t.id.toString(),azureDevOpsUrl:t.url,workItemType:s||void 0}})}function B2(){return"Product".split(",").map(t=>t.trim()).filter(t=>t.length>0)}const Di=e=>new Date(e).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}),Zs=e=>new Date(e)<new Date,U2=[{bg:"#2D4660",text:"#FFFFFF",border:"#1D3144"},{bg:"#1E5461",text:"#FFFFFF",border:"#133742"},{bg:"#C89212",text:"#FFFFFF",border:"#A67810"},{bg:"#173B65",text:"#FFFFFF",border:"#0F2844"},{bg:"#2E5A8F",text:"#FFFFFF",border:"#1F4468"},{bg:"#4A6A8F",text:"#FFFFFF",border:"#3D5A7D"},{bg:"#5479A1",text:"#FFFFFF",border:"#4A6A8F"},{bg:"#6B8FBF",text:"#FFFFFF",border:"#5479A1"},{bg:"#3D7BAD",text:"#FFFFFF",border:"#2E5A8F"},{bg:"#258799",text:"#FFFFFF",border:"#145668"},{bg:"#36849B",text:"#FFFFFF",border:"#2A7489"},{bg:"#4098B3",text:"#FFFFFF",border:"#36849B"},{bg:"#2B9BAD",text:"#FFFFFF",border:"#1E7A89"},{bg:"#1FA3B5",text:"#FFFFFF",border:"#178290"},{bg:"#2D7A4E",text:"#FFFFFF",border:"#1E5A38"},{bg:"#3A9B5C",text:"#FFFFFF",border:"#2D7A4E"},{bg:"#52B876",text:"#FFFFFF",border:"#3A9B5C"},{bg:"#6FD492",text:"#FFFFFF",border:"#52B876"},{bg:"#4CAF7A",text:"#FFFFFF",border:"#3A9B5C"},{bg:"#7CB342",text:"#FFFFFF",border:"#689F38"},{bg:"#9CCC65",text:"#111827",border:"#7CB342"},{bg:"#E0A925",text:"#111827",border:"#C89212"},{bg:"#F4B729",text:"#111827",border:"#E0A925"},{bg:"#FFC940",text:"#111827",border:"#F4B729"},{bg:"#D4A017",text:"#FFFFFF",border:"#B8890F"},{bg:"#D87A35",text:"#FFFFFF",border:"#C4681F"},{bg:"#E88F3A",text:"#FFFFFF",border:"#D87A35"},{bg:"#FF9F4A",text:"#FFFFFF",border:"#E88F3A"},{bg:"#FF8C42",text:"#FFFFFF",border:"#E88F3A"},{bg:"#B83A2F",text:"#FFFFFF",border:"#9F2A21"},{bg:"#D44638",text:"#FFFFFF",border:"#B83A2F"},{bg:"#E85240",text:"#FFFFFF",border:"#D44638"},{bg:"#591D0F",text:"#FFFFFF",border:"#3C130A"},{bg:"#8A3420",text:"#FFFFFF",border:"#6F2818"},{bg:"#6B4C9A",text:"#FFFFFF",border:"#573A7F"},{bg:"#8E6BB5",text:"#FFFFFF",border:"#7556A1"},{bg:"#9B7AC7",text:"#FFFFFF",border:"#8E6BB5"},{bg:"#5D3F7A",text:"#FFFFFF",border:"#4A2F61"},{bg:"#492434",text:"#FFFFFF",border:"#311823"},{bg:"#5D2F43",text:"#FFFFFF",border:"#492434"},{bg:"#8B3A62",text:"#FFFFFF",border:"#6F2A4D"},{bg:"#A14A76",text:"#FFFFFF",border:"#8B3A62"},{bg:"#6A4234",text:"#FFFFFF",border:"#4B2D23"},{bg:"#8B5A3C",text:"#FFFFFF",border:"#6A4234"},{bg:"#A0694B",text:"#FFFFFF",border:"#8B5A3C"},{bg:"#7D5A3A",text:"#FFFFFF",border:"#6A4234"},{bg:"#3A3638",text:"#FFFFFF",border:"#2A2628"},{bg:"#4A4548",text:"#FFFFFF",border:"#3A3638"},{bg:"#5C5A5D",text:"#FFFFFF",border:"#4A4548"},{bg:"#7A8590",text:"#FFFFFF",border:"#5F6A74"},{bg:"#8F959B",text:"#111827",border:"#72777C"}],tZ=e=>e?e.trim().toLowerCase():"",rZ=e=>{let t=0;for(let r=0;r<e.length;r+=1)t=t*31+e.charCodeAt(r)>>>0;return t},Hf=(e,t,r)=>Math.min(Math.max(e,t),r),nZ=e=>{if(!e)return null;let t=e.trim();return!t||(t.startsWith("#")||(t=`#${t}`),t.length===4&&(t=`#${t[1]}${t[1]}${t[2]}${t[2]}${t[3]}${t[3]}`),t.length!==7)?null:t.toUpperCase()},Fw=e=>{const t=e.replace("#",""),r=parseInt(t,16);return{r:r>>16&255,g:r>>8&255,b:r&255}},sZ=({r:e,g:t,b:r})=>{const n=[e,t,r].map(s=>{const i=s/255;return i<=.03928?i/12.92:Math.pow((i+.055)/1.055,2.4)});return .2126*n[0]+.7152*n[1]+.0722*n[2]},iZ=e=>sZ(Fw(e))>.6?"#111827":"#FFFFFF",W2=(e,t)=>{const{r,g:n,b:s}=Fw(e),i=1+t/100,l=Hf(Math.round(r*i),0,255),u=Hf(Math.round(n*i),0,255),d=Hf(Math.round(s*i),0,255);return`#${l.toString(16).padStart(2,"0")}${u.toString(16).padStart(2,"0")}${d.toString(16).padStart(2,"0")}`.toUpperCase()},aZ=(e,t)=>{const{r,g:n,b:s}=Fw(e);return`rgba(${r}, ${n}, ${s}, ${Hf(t,0,1)})`},ns=(e,t)=>{const r=nZ(t);if(r){const l=iZ(r);return{background:r,text:l,border:W2(r,-20),badgeBackground:aZ(r,.15),badgeText:l,hoverBackground:W2(r,-5),hoverText:l}}const n=tZ(e),s=n?rZ(n)%U2.length:0,i=U2[s];return{background:i.bg,text:i.text,border:i.border,badgeBackground:`${i.bg}1A`,badgeText:i.text,hoverBackground:i.bg,hoverText:i.text}};function fT({label:e="Product",products:t,value:r,onChange:n,fallbackName:s=null,isLoading:i=!1,error:l=null,disabled:u=!1,placeholder:d="Select a product",helperText:m,className:f="",allowAdd:p=!1,newProductName:y="",onNewProductNameChange:x,newProductColor:j,onNewProductColorChange:b,onCreateProduct:S,isCreatingProduct:N=!1,addHelperText:E,addButtonLabel:k="Add Product",addInputPlaceholder:T="e.g., Catalyst Cloud",allowDelete:O=!1,onRequestDeleteProduct:P}){const[R,q]=v.useState(!1),F=v.useRef(null),V=v.useRef(null),[B,Q]=v.useState(!1),[ae,ne]=v.useState(!1),me=v.useMemo(()=>t.find(ce=>ce.id===r)??null,[t,r]),K=(me==null?void 0:me.name)??s??"",te=K?ns(K,(me==null?void 0:me.color_hex)??null):null,se=u||i||t.length===0;v.useEffect(()=>{if(!R)return;function ce(ye){F.current&&!F.current.contains(ye.target)&&q(!1)}function ge(ye){ye.key==="Escape"&&q(!1)}return document.addEventListener("mousedown",ce),document.addEventListener("keydown",ge),()=>{document.removeEventListener("mousedown",ce),document.removeEventListener("keydown",ge)}},[R]);const de=ce=>{n(ce),q(!1)},xe=!!(p&&x&&S),I=xe&&B,H=!!b,Ie=j??"#2D4660",X=!!(e&&e.trim().length>0),ve=X||xe;return a.jsxs("div",{className:`space-y-3 ${f}`,children:[a.jsx("style",{children:`
        .product-picker__menu {
          box-shadow: 0px 12px 28px rgba(45, 70, 96, 0.18);
          width: 100%;
          background-color: #ffffff;
          overflow: hidden;
        }

        .product-picker__item {
          display: flex;
          width: 100%;
          align-items: center;
          justify-content: flex-start;
          gap: 0.75rem;
          padding: 0.65rem 0.75rem;
          font-size: 0.875rem;
          background: #ffffff;
          border: none;
          border-top: 1px solid rgba(203, 213, 225, 0.4);
          cursor: pointer;
          color: var(--product-color, #2D4660);
          transition: color 0.3s ease;
          text-align: left;
        }

        .product-picker__item:first-child {
          border-top: none;
        }

        .product-picker__item:hover,
        .product-picker__item:focus-visible {
          background-color: var(--product-light-bg, rgba(45, 70, 96, 0.1));
          outline: none;
        }

        .product-color-badge {
          width: 1.5rem;
          height: 1.5rem;
          border-radius: 0.35rem;
          flex-shrink: 0;
          background-color: var(--product-color, #2D4660);
          border: 1px solid var(--product-border-color, rgba(0,0,0,0.12));
          box-shadow: inset 0 0 0 1px rgba(255,255,255,0.35);
        }
      `}),a.jsxs("div",{className:"relative",ref:F,children:[ve&&a.jsxs("div",{className:"flex items-center justify-between mb-1 gap-3",children:[X&&a.jsx("label",{className:"block text-sm font-medium text-gray-700",children:e}),xe&&a.jsx("div",{className:"flex-1 flex items-center justify-end gap-2",children:I?a.jsxs("div",{className:"flex items-center gap-2 transition-all duration-300",children:[a.jsx("input",{type:"text",value:y,onChange:ce=>{ne(!1),x==null||x(ce.target.value)},placeholder:"Product name",className:"flex-1 h-10 px-3 border rounded-md text-sm focus:outline-none focus:ring-0",style:{borderColor:j&&y.trim().length>0?j:"#D1D5DB"}}),H&&y.trim().length>0&&a.jsxs(a.Fragment,{children:[a.jsx("button",{type:"button",onClick:()=>{var ce;return(ce=V.current)==null?void 0:ce.click()},className:`relative h-10 w-10 rounded-md border shadow-sm flex items-center justify-center focus:outline-none focus:ring-2 focus:ring-offset-1 focus:ring-[#2d4660] ${j?"":"border-gray-300 bg-white"}`,style:j?{backgroundColor:j,borderColor:j}:void 0,"aria-label":"Choose product color",children:!j&&a.jsx("img",{src:"https://icon-library.com/images/color-wheel-icon-png/color-wheel-icon-png-25.jpg",alt:"",className:"h-7 w-7 object-contain pointer-events-none"})}),a.jsx("input",{ref:V,type:"color",value:Ie,onChange:ce=>{ne(!1),b==null||b(ce.target.value)},className:"sr-only"}),y.trim().length>0&&a.jsx("button",{type:"button",onClick:()=>ne(!0),className:`h-10 px-3 rounded-md text-sm font-medium border transition-colors ${ae?"bg-green-50 border-green-500 text-green-700":"bg-white border-gray-300 text-gray-700 hover:bg-gray-50"}`,children:"Looks Great"})]}),y.trim().length>0&&j&&ae&&a.jsx("button",{type:"button",onClick:S,className:"h-10 px-4 bg-[#C89212] text-white rounded-md text-sm font-semibold hover:bg-[#A67810] transition-colors",children:N?"Creating":"Create New Product"})]}):a.jsx("button",{type:"button",onClick:()=>Q(!0),className:"text-sm font-medium text-blue-600 hover:text-blue-700 whitespace-nowrap",children:"+ Create New Product"})})]}),a.jsxs("button",{type:"button",onClick:()=>!se&&q(ce=>!ce),className:`relative flex w-full items-center justify-between rounded-md border px-3 py-2 text-left text-sm ${se?"cursor-not-allowed bg-gray-100 text-gray-400 border-gray-200":"bg-white text-gray-900 border-gray-300 hover:border-[#2D4660]"}`,style:!se&&te?{borderColor:te.border}:void 0,"aria-expanded":R,"aria-haspopup":"listbox",children:[a.jsxs("div",{className:"flex items-center gap-2 truncate",children:[te&&a.jsx("span",{className:"inline-flex h-3.5 w-3.5 rounded-sm border border-white/60 shadow-inner",style:{backgroundColor:te.background,borderColor:te.border},"aria-hidden":"true"}),a.jsx("span",{className:`truncate ${K?"":"text-gray-400"}`,style:te?{color:te.background}:void 0,children:K||(t.length===0?"No products available":d)})]}),a.jsx(zn,{className:`ml-2 h-4 w-4 transition-transform ${R?"rotate-180":""} ${se?"text-gray-300":"text-gray-500"}`})]}),R&&!se&&a.jsx("div",{className:"product-picker__menu absolute left-0 z-50 mt-2 w-full overflow-hidden rounded-md border border-gray-200 bg-white",role:"listbox",children:a.jsx("div",{className:"max-h-60 overflow-y-auto py-1",children:t.map(ce=>{const ge=ns(ce.name,ce.color_hex??null),ye=r===ce.id;return a.jsxs("div",{className:"product-picker__item",style:{"--product-color":ge.background,"--product-light-bg":ge.badgeBackground,"--product-border-color":ge.border},children:[a.jsxs("button",{type:"button",className:"flex flex-1 items-center gap-3 text-left",onClick:()=>de(ce.id),"aria-selected":ye,children:[a.jsx("span",{className:"product-color-badge","aria-hidden":"true"}),a.jsx("span",{className:"flex-1 truncate font-medium",children:ce.name}),ye&&a.jsx(Fr,{className:"h-4 w-4 text-gray-400"})]}),O&&P&&a.jsx("button",{type:"button",onClick:L=>{L.stopPropagation(),q(!1),P(ce)},className:"ml-2 text-gray-400 hover:text-[#B83A2F]","aria-label":`Delete ${ce.name}`,title:"Delete product",children:a.jsx(ji,{className:"h-4 w-4"})})]},ce.id)})})}),i&&a.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"Loading products"}),l&&a.jsx("p",{className:"mt-1 text-xs text-[#591D0F]",children:l}),!i&&!l&&m&&a.jsx("p",{className:"mt-1 text-xs text-gray-500",children:m})]}),xe&&E&&I&&a.jsx("p",{className:"text-xs text-gray-500",children:E})]})}const V2=["OpsVision Portal","MillTrack Insight","Quality Compass","Supply Sync","Roadmap Nexus","Fabricator Hub","Blueprint Studio","Velocity Forge","Navigator Suite","Catalyst Cloud"],q2=e=>{if(!e)return null;const t=e.trim();return t.length===0?null:t},oZ=e=>{let t=0;for(let r=0;r<e.length;r+=1)t=t*31+e.charCodeAt(r)>>>0;return V2[t%V2.length]};function Nn(e,t){const r=e.product_id??e.productId??null;if(r&&t){const i=q2(t[r]);if(i)return i}const n=q2(e.product_name??e.productName);if(n)return n;const s=r||e.id||e.title||"default-product";return oZ(s)}const lZ=["Stakeholders need more time","New backlog items require votes","Clarify previous results","Technical issue resolved","Other"],H2="https://cdn.iconscout.com/icon/free/png-512/azure-devops-3628645-3029870.png";function K2({options:e,value:t,onChange:r,placeholder:n="Select...",label:s,disabled:i=!1,variant:l="default"}){const[u,d]=v.useState(!1),m=v.useRef(null);v.useEffect(()=>{function S(N){m.current&&!m.current.contains(N.target)&&d(!1)}return document.addEventListener("mousedown",S),()=>document.removeEventListener("mousedown",S)},[]);const f=S=>{r(S),d(!1)},p=t||n,y=l==="green"?"border-green-600":"border-gray-300",x=l==="green"?"text-green-600":"text-gray-400",j=l==="green"?"bg-green-50":"bg-blue-50",b=l==="green"?"text-green-600":"text-[#1E5461]";return a.jsxs("div",{ref:m,className:"relative",children:[s&&a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:s}),a.jsxs("div",{onClick:()=>!i&&d(!u),className:`w-full px-3 py-2 border ${y} rounded-md min-h-[38px] flex items-center justify-between ${i?"bg-gray-100 cursor-not-allowed":"bg-white cursor-pointer"}`,children:[a.jsx("span",{className:`text-sm ${t?"text-gray-900":"text-gray-400"}`,children:p}),a.jsx(zn,{className:`h-4 w-4 ${x} transition-transform ${u?"transform rotate-180":""}`})]}),u&&!i&&a.jsx("div",{className:"absolute z-50 w-full mt-1 bg-white border border-gray-300 rounded-md shadow-lg max-h-60 overflow-y-auto",children:e.map(S=>a.jsxs("div",{onClick:()=>f(S),className:`px-3 py-2 cursor-pointer hover:bg-gray-50 flex items-center justify-between ${t===S?j:""}`,children:[a.jsx("span",{className:"text-sm text-gray-900",children:S}),t===S&&a.jsx(Fr,{className:`h-4 w-4 ${b}`})]},S))})]})}function Rf({options:e,value:t,onChange:r,placeholder:n="Select...",label:s,searchable:i=!1,disabled:l=!1}){const[u,d]=v.useState(!1),[m,f]=v.useState(""),p=v.useRef(null),y=v.useRef(null);v.useEffect(()=>{function N(E){p.current&&!p.current.contains(E.target)&&(d(!1),f(""))}return document.addEventListener("mousedown",N),()=>document.removeEventListener("mousedown",N)},[]),v.useEffect(()=>{u&&i&&y.current&&y.current.focus()},[u,i]);const x=N=>{t.includes(N)?r(t.filter(E=>E!==N)):r([...t,N])},j=(N,E)=>{E.stopPropagation(),r(t.filter(k=>k!==N))},b=N=>{N.stopPropagation(),r([])},S=i&&m?e.filter(N=>N.toLowerCase().includes(m.toLowerCase())):e;return a.jsxs("div",{ref:p,className:"relative",children:[s&&a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:s}),a.jsxs("div",{onClick:()=>!l&&d(!u),className:`w-full px-3 py-2 border border-gray-300 rounded-md min-h-[38px] flex items-center justify-between ${l?"bg-gray-100 cursor-not-allowed":"bg-white cursor-pointer"}`,children:[a.jsx("div",{className:"flex-1 flex flex-wrap gap-1",children:t.length===0?a.jsx("span",{className:"text-sm text-gray-400",children:n}):t.map(N=>a.jsxs("span",{className:"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-[#2D4660]/10 text-[#2D4660]",children:[N,!l&&a.jsx("button",{type:"button",onClick:E=>j(N,E),className:"ml-1 hover:text-[#173B65]",children:a.jsx($s,{className:"h-3 w-3"})})]},N))}),a.jsxs("div",{className:"flex items-center gap-1 ml-2",children:[t.length>0&&!l&&a.jsx("button",{type:"button",onClick:b,className:"text-gray-400 hover:text-gray-600",children:a.jsx($s,{className:"h-4 w-4"})}),a.jsx(zn,{className:`h-4 w-4 text-gray-400 transition-transform ${u?"transform rotate-180":""}`})]})]}),u&&!l&&a.jsxs("div",{className:"absolute z-50 w-full mt-1 bg-white border border-gray-300 rounded-md shadow-lg max-h-60 overflow-hidden flex flex-col",children:[i&&a.jsx("div",{className:"p-2 border-b border-gray-200",children:a.jsx("input",{ref:y,type:"text",value:m,onChange:N=>f(N.target.value),onClick:N=>N.stopPropagation(),placeholder:"Type to search...",className:"w-full px-3 py-1.5 text-sm border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[#2D4660]"})}),a.jsx("div",{className:"overflow-y-auto",children:S.length>0?S.map(N=>a.jsxs("div",{onClick:()=>x(N),className:`px-3 py-2 cursor-pointer hover:bg-gray-50 flex items-center justify-between ${t.includes(N)?"bg-[#2D4660]/5":""}`,children:[a.jsx("span",{className:"text-sm",children:N}),t.includes(N)&&a.jsx(Fr,{className:"h-4 w-4 text-[#1E5461]"})]},N)):a.jsx("div",{className:"px-3 py-2 text-sm text-gray-500 text-center",children:"No matches found"})})]})]})}function cZ({config:e,onUpdateConfig:t,onPreview:r,isFetching:n,availableStates:s,availableAreaPaths:i,availableTags:l,previewFeatures:u,showPreviewModal:d,onFetchStatesForType:m,onFetchAreaPathsForTypeAndState:f,onFetchTagsForTypeStateAndAreaPath:p,onFetchTypesAndStatesForAreaPath:y,onFetchTypesAndStatesForTags:x,onFetchTypesAndAreaPathsForStates:j,resetSignal:b}){const S=cT,[N,E]=v.useState(!1),[k,T]=v.useState(null),[O,P]=v.useState(!1),[R,q]=v.useState(!1),[F,V]=v.useState(!1),B=v.useRef(null),Q=v.useRef(!1),ae=v.useRef(!1),ne=v.useRef(!1),me=v.useRef(!1),K={workItemTypes:[],states:[],areaPaths:[],tags:[],query:""},{register:te,handleSubmit:se,watch:de,control:xe,setValue:I,reset:H}=Tu({defaultValues:K}),Ie=v.useCallback(()=>{H({...K}),E(!1),ae.current=!1,ne.current=!1,me.current=!1},[H]);v.useEffect(()=>{Ie()},[b,Ie]);const X=de("workItemTypes"),ve=de("states"),ce=de("areaPaths"),ge=de("tags"),ye=de("query"),L=v.useCallback((ee,Ke,Xe,ft,wt,Ct)=>{const _t=[];if(ee&&ee.length>0)if(ee.length===1)_t.push(`[System.WorkItemType] = '${ee[0]}'`);else{const Ot=ee.map($=>`'${$}'`).join(", ");_t.push(`[System.WorkItemType] IN (${Ot})`)}if(Ke&&Ke.length>0)if(Ke.length===1)_t.push(`[System.State] = '${Ke[0]}'`);else{const Ot=Ke.map($=>`'${$}'`).join(", ");_t.push(`[System.State] IN (${Ot})`)}if(Xe&&Xe.length>0)if(Xe.length===1)_t.push(`[System.AreaPath] UNDER '${Xe[0]}'`);else{const Ot=Xe.map($=>`[System.AreaPath] UNDER '${$}'`);_t.push(`(${Ot.join(" OR ")})`)}if(ft&&ft.length>0){const Ot=ft.map($=>`[System.Tags] CONTAINS '${$}'`);_t.push(`(${Ot.join(" OR ")})`)}return Ct&&wt&&_t.push(`(${wt})`),_t.length>0?_t.join(" AND "):void 0},[]);v.useEffect(()=>{if(!(ae.current||ne.current||me.current)&&m){if(!X||X.length===0){m(void 0);return}m(X[0])}},[X,m]),v.useEffect(()=>{if(ae.current||ne.current||!f)return;(async()=>{q(!0);try{await f(X&&X.length>0?X[0]:void 0,ve||[])}finally{q(!1)}})()},[X,ve,f]),v.useEffect(()=>{if(ne.current||!p||!X||X.length===0)return;const ee=async()=>{V(!0);try{await p(X[0],ve||[],ce||[])}finally{V(!1)}},Ke=setTimeout(()=>{ee()},100);return()=>{clearTimeout(Ke),V(!1)}},[X,ve,ce,p]),v.useEffect(()=>{if(!y||ne.current||me.current||!ce||ce.length===0)return;const ee=X&&X.length>0,Ke=ve&&ve.length>0;ee&&Ke||(ae.current=!0,y(ce).then(({types:Xe,states:ft})=>{Xe.length>0&&!ee&&I("workItemTypes",Xe,{shouldDirty:!1}),ft.length>0&&!Ke&&I("states",ft,{shouldDirty:!1})}).finally(()=>{setTimeout(()=>{ae.current=!1},300)}))},[ce,X,ve,y,I]),v.useEffect(()=>{x&&(ae.current||me.current||!ge||ge.length===0||(ne.current=!0,x(ge).then(({types:ee,states:Ke,areaPaths:Xe})=>{ee.length>0&&I("workItemTypes",ee,{shouldDirty:!1}),Ke.length>0&&I("states",Ke,{shouldDirty:!1}),Xe.length>0&&I("areaPaths",Xe,{shouldDirty:!1})}).finally(()=>{setTimeout(()=>{ne.current=!1},300)})))},[ge,x,I]),v.useEffect(()=>{!j||ae.current||ne.current||!ve||ve.length===0||X&&X.length>0||(me.current=!0,j(ve).then(({types:Ke})=>{Ke.length>0&&I("workItemTypes",Ke,{shouldDirty:!1})}).finally(()=>{setTimeout(()=>{me.current=!1},300)}))},[ve,X,j,I]),v.useEffect(()=>{if(ve&&ve.length>0&&s.length>0){const ee=ve.filter(Ke=>s.includes(Ke));ee.length!==ve.length&&I("states",ee)}},[s,ve,I]),v.useEffect(()=>{if(ce&&ce.length>0&&i.length>0){const ee=ce.filter(Ke=>i.includes(Ke));ee.length!==ce.length&&(I("areaPaths",ee),ee.length===0&&I("tags",[]))}},[i,ce,I]),v.useEffect(()=>{if(ge&&ge.length>0&&l.length>0){const ee=ge.filter(Ke=>l.includes(Ke));ee.length!==ge.length&&I("tags",ee)}},[l,ge,I]);const Fe=v.useCallback(async()=>{if(!e.enabled||!e.accessToken||!X||X.length===0){T(null);return}try{P(!0);const ee=X[0],Ke=L(X||[],ve||[],ce||[],ge||[],ye||"",N);let Xe="";Ke?Xe=`SELECT [System.Id] FROM WorkItems WHERE ${Ke}`:Xe=`SELECT [System.Id] FROM WorkItems WHERE [System.WorkItemType] = '${ee}' AND [System.State] = 'Active'`;const ft=`https://dev.azure.com/${e.organization}/${e.project}/_apis/wit/wiql?api-version=7.0`,wt=await fetch(ft,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${e.accessToken}`},body:JSON.stringify({query:Xe})});if(!wt.ok)throw new Error(`Azure DevOps query failed: ${wt.status} ${wt.statusText}`);const Ct=await wt.json(),_t=Ct.workItems?Ct.workItems.length:0;T(_t)}catch(ee){console.error("[FilterForm] Error fetching feature count:",ee),T(null)}finally{P(!1)}},[e,X,ve,ce,ge,ye,N,L]);v.useEffect(()=>(B.current!==null&&window.clearTimeout(B.current),T(null),X&&X.length>0&&e.enabled&&e.accessToken&&(B.current=window.setTimeout(()=>{Fe()},300)),()=>{B.current!==null&&window.clearTimeout(B.current)}),[X,ve,ce,ge,ye,N,e.enabled,e.accessToken,Fe]),v.useEffect(()=>{if(d&&!Q.current&&u){const ee=u.length;T(ee)}Q.current=d||!1},[d,u]),v.useEffect(()=>{u&&u.length>0&&!O&&T(u.length)},[u,O]),v.useEffect(()=>{const ee=L(X||[],ve||[],ce||[],ge||[],ye||"",N),Ke={...e,workItemType:X&&X.length>0?X[0]:e.workItemType||"Feature",query:ee,states:ve&&ve.length>0?ve:void 0,areaPath:ce&&ce.length>0?ce[0]:void 0,tags:ge&&ge.length>0?ge:void 0},Xe=window.setTimeout(()=>{t(Ke)},100);return()=>{window.clearTimeout(Xe)}},[X,ve,ce,ge,ye,N,L,t]);const Me=async ee=>{await r()};return a.jsxs("form",{onSubmit:se(Me),className:"bg-gray-50 p-4 rounded-lg border border-gray-200",children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsxs("h3",{className:"text-lg font-medium text-[#2D4660] flex items-center",children:[a.jsx(KM,{className:"h-5 w-5 mr-2"}),"Filter Work Items"]}),a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("button",{type:"button",onClick:Ie,className:"text-xs text-[#576C71] hover:text-[#2D4660] font-medium border border-transparent hover:border-[#576C71] rounded-full px-2 py-0.5 transition",children:"Clear All Filters"}),a.jsx("button",{type:"button",onClick:()=>E(!N),className:"text-xs text-[#1E5461] hover:text-[#2D4660] font-medium",children:N?" Hide Advanced WIQL":"Show Advanced WIQL "})]})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-4",children:[a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[a.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Work Item Type"}),a.jsx("span",{className:"px-2 py-0.5 rounded-full text-xs font-semibold text-white bg-[#2D4660]",children:S.length})]}),a.jsx(Kl,{name:"workItemTypes",control:xe,render:({field:ee})=>a.jsx(Rf,{options:S,value:ee.value,onChange:ee.onChange,placeholder:"Select types..."})}),a.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"Click to select multiple types"})]}),a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[a.jsx("span",{className:"text-sm font-medium text-gray-700",children:"State (Optional)"}),a.jsx("span",{className:"px-2 py-0.5 rounded-full text-xs font-semibold text-white bg-[#1E5461]",children:(s==null?void 0:s.length)||0})]}),a.jsx(Kl,{name:"states",control:xe,render:({field:ee})=>a.jsx(Rf,{options:s,value:ee.value,onChange:ee.onChange,placeholder:"Select states...",disabled:s.length===0})}),a.jsx("p",{className:"mt-1 text-xs text-gray-500",children:s.length===0?"Loading states...":"Filtered by work item type"})]}),a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[a.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Area Path (Optional)"}),a.jsx("span",{className:"px-2 py-0.5 rounded-full text-xs font-semibold text-white bg-[#576C71]",children:(i==null?void 0:i.length)||0})]}),a.jsx(Kl,{name:"areaPaths",control:xe,render:({field:ee})=>a.jsx(Rf,{options:i,value:ee.value,onChange:ee.onChange,placeholder:"Select area paths...",searchable:!0,disabled:i.length===0})}),a.jsx("p",{className:"mt-1 text-xs text-gray-500",children:R?"Loading area paths...":i.length===0?"No area paths found for current filters":"Filtered by type & state"})]}),a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[a.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Tags (Optional)"}),a.jsx("span",{className:"px-2 py-0.5 rounded-full text-xs font-semibold text-white bg-[#C89212]",children:(l==null?void 0:l.length)||0})]}),a.jsx(Kl,{name:"tags",control:xe,render:({field:ee})=>a.jsx(Rf,{options:l,value:ee.value,onChange:ee.onChange,placeholder:"Select tags...",searchable:!0,disabled:l.length===0&&!F})}),a.jsx("p",{className:"mt-1 text-xs text-gray-500",children:!X||X.length===0?"Select work item type to see tags":F?"Loading tags...":l.length===0?"No tags found for current filters":"Filtered by type, state & area"})]})]}),N&&a.jsxs("div",{className:"mb-4",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Advanced WIQL Query (Optional)"}),a.jsx("input",{...te("query"),placeholder:"e.g., [System.Priority] = 1",className:"w-full px-3 py-2 border border-gray-300 rounded-md text-sm"}),a.jsxs("p",{className:"mt-1 text-xs text-gray-500",children:["Will be combined with above filters using AND."," ",a.jsx("a",{href:"https://learn.microsoft.com/en-us/azure/devops/boards/queries/wiql-syntax",target:"_blank",rel:"noopener noreferrer",className:"text-[#1E5461] hover:text-[#2D4660]",children:"WIQL syntax reference "})]})]}),a.jsx("div",{className:"flex justify-end",children:a.jsxs(at,{variant:"gold",type:"submit",disabled:(()=>{const ee=((X==null?void 0:X.length)??0)>0,Ke=((ve==null?void 0:ve.length)??0)>0,Xe=((ce==null?void 0:ce.length)??0)>0,ft=((ge==null?void 0:ge.length)??0)>0,wt=ye&&ye.trim().length>0;return n||O||!(ee||Ke||Xe||ft||wt)})(),className:"flex items-center",children:[n&&a.jsx($o,{className:"animate-spin h-4 w-4 mr-2"}),n?"Loading...":k!==null&&!O?`Preview ${k} Feature${k!==1?"s":""}`:"Preview Features"]})})]})}function uZ({session:e,featureCount:t,onSubmit:r,onCancel:n,onRequestDeleteSession:s,isDeletingSession:i,productName:l,products:u,isLoadingProducts:d,productError:m,onRequestDeleteProduct:f,onProductColorUpdated:p}){const[y,x]=v.useState(null),[j,b]=v.useState(!1),[S,N]=v.useState("#2D4660"),[E,k]=v.useState(null),[T,O]=v.useState(!1);v.useRef(null);const P=v.useMemo(()=>{const I={};return u.forEach(H=>{H.id&&H.name&&(I[H.id]=H.name)}),I},[u]),{register:R,handleSubmit:q,watch:F,reset:V,control:B,setValue:Q,formState:{errors:ae}}=Tu({defaultValues:{productId:e.productId??e.product_id??"",title:e.title,goal:e.goal,startDate:e.startDate.split("T")[0],endDate:e.endDate.split("T")[0],useAutoVotes:e.useAutoVotes||!1,votesPerUser:e.votesPerUser}});v.useEffect(()=>{V({productId:e.productId??e.product_id??"",title:e.title,goal:e.goal,startDate:e.startDate.split("T")[0],endDate:e.endDate.split("T")[0],useAutoVotes:e.useAutoVotes||!1,votesPerUser:e.votesPerUser})},[e,V]);const ne=e.productName??e.product_name??l??"",me=e.productId??e.product_id??"";v.useEffect(()=>{if(!u.length)return;if(me){u.some(Ie=>Ie.id===me)&&Q("productId",me,{shouldDirty:!1,shouldTouch:!1});return}if(!ne)return;const I=u.find(H=>H.name.toLowerCase()===ne.toLowerCase());I&&Q("productId",I.id,{shouldDirty:!1,shouldTouch:!1})},[u,me,ne,Q]);const K=F("useAutoVotes"),te=F("productId"),se=v.useMemo(()=>!E||!te?u:u.map(I=>I.id===te?{...I,color_hex:E}:I),[u,E,te]);v.useEffect(()=>{if(!te)return;u.some(H=>H.id===te)||Q("productId","",{shouldDirty:!0,shouldTouch:!0})},[te,u,Q]),v.useEffect(()=>{if(te&&u.length>0){const I=u.find(H=>H.id===te);if(I){const H=I.color_hex??null;x(H),N(H||"#2D4660"),k(null),b(!1)}}else te||(x(null),N("#2D4660"),k(null),b(!1))},[te,u]);const de=K?Math.max(1,Math.floor(t/2)):F("votesPerUser"),xe=async I=>{try{if(console.log("=== FORM SUBMISSION STARTED ==="),console.log("handleFormSubmit called with form data:",I),console.log("data.productId:",I.productId),console.log("selectedProductId from watch:",te),console.log("Form errors:",ae),E&&te){console.log("Updating product color:",E,"for product:",te),O(!0);try{await Z0(te,{color_hex:E}),p&&p(),k(null),x(E),console.log("Product color updated successfully")}catch(H){console.error("Error updating product color:",H)}finally{O(!1)}}console.log("Calling onSubmit with data:",I),r(I),console.log("=== FORM SUBMISSION COMPLETED ===")}catch(H){throw console.error("ERROR in handleFormSubmit:",H),H}};return a.jsxs("form",{onSubmit:q(I=>(console.log("FORM onSubmit triggered via handleSubmit"),xe(I)),I=>{console.log("FORM VALIDATION ERRORS:",I)}),children:[a.jsx(Kl,{control:B,name:"productId",render:({field:I})=>{const H=se.find(L=>L.id===I.value)??null,Ie=I.value?P[I.value]??null:null,X=H?null:Ie??(ne||null),ve=!!I.value,ce=(H==null?void 0:H.color_hex)||null,ge=H?ns(H.name,ce??null):null,ye=(ge==null?void 0:ge.background)||null;return a.jsx("div",{className:"mb-4",children:a.jsxs("div",{className:"flex items-start gap-3",children:[a.jsx("div",{className:"flex-1",children:a.jsx(fT,{products:se,value:I.value,onChange:L=>{console.log("ProductPicker onChange called with value:",L),I.onChange(L)},fallbackName:X,isLoading:d,error:m,disabled:d||se.length===0,helperText:!d&&se.length===0&&!m?"No products found yet. Create products from the session creation modal.":void 0,allowDelete:!!f,onRequestDeleteProduct:f})}),ve&&a.jsxs("div",{className:"flex items-center gap-2 mt-6",children:[a.jsx("label",{className:"text-sm font-medium text-gray-700 whitespace-nowrap",children:"Product Color"}),a.jsx("button",{type:"button",onClick:()=>{const L=ye||"#2D4660";N(L),x(L),b(!0)},className:"block w-10 h-10 rounded-md border-2 border-gray-300 hover:border-gray-400 transition-all shadow-sm",style:{backgroundColor:ye||"#2D4660",borderColor:(ge==null?void 0:ge.border)||"#D1D5DB"},title:"Change product color"})]})]})})}}),a.jsxs("div",{className:"mb-4",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Session Title"}),a.jsx("input",{...R("title",{required:"Title is required"}),className:"w-full px-3 py-2 border border-gray-300 rounded-md"}),ae.title&&a.jsx("p",{className:"mt-1 text-sm text-red-600",children:ae.title.message})]}),a.jsxs("div",{className:"mb-4",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Goal"}),a.jsx("textarea",{...R("goal",{required:"Goal is required"}),rows:2,className:"w-full px-3 py-2 border border-gray-300 rounded-md"}),ae.goal&&a.jsx("p",{className:"mt-1 text-sm text-red-600",children:ae.goal.message})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Start Date"}),a.jsx("input",{type:"date",...R("startDate",{required:"Start date is required"}),className:"w-full px-3 py-2 border border-gray-300 rounded-md"}),ae.startDate&&a.jsx("p",{className:"mt-1 text-sm text-red-600",children:ae.startDate.message})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"End Date"}),a.jsx("input",{type:"date",...R("endDate",{required:"End date is required"}),className:"w-full px-3 py-2 border border-gray-300 rounded-md"}),ae.endDate&&a.jsx("p",{className:"mt-1 text-sm text-red-600",children:ae.endDate.message})]})]}),a.jsxs("div",{className:"mb-4 bg-[#1E5461]/5 border border-[#1E5461]/20 rounded-lg p-4",children:[a.jsxs("div",{className:"flex items-start",children:[a.jsx("input",{type:"checkbox",...R("useAutoVotes"),className:"mt-1 h-4 w-4 text-[#399E5A] border-gray-300 rounded accent-[#399E5A]"}),a.jsxs("div",{className:"ml-3",children:[a.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Automatically calculate votes per user"}),a.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:["Each user gets half the number of features (minimum 1 vote). Currently: ",de," votes"]})]})]}),!K&&a.jsxs("div",{className:"mt-3",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Votes Per User"}),a.jsx("input",{type:"number",min:"1",...R("votesPerUser",{required:K?!1:"Votes per user is required",min:{value:1,message:"Must be at least 1"}}),className:"w-full px-3 py-2 border border-gray-300 rounded-md"}),ae.votesPerUser&&a.jsx("p",{className:"mt-1 text-sm text-red-600",children:ae.votesPerUser.message})]})]}),a.jsxs("div",{className:"mt-6 flex flex-col gap-3 border-t border-gray-200 pt-4 sm:flex-row sm:items-center sm:justify-between",children:[a.jsxs(at,{variant:"danger",type:"button",onClick:()=>s(),disabled:i,className:"flex items-center gap-2",children:[a.jsx(ji,{className:"h-4 w-4"}),i?"Deleting...":"Delete Session"]}),a.jsxs("div",{className:"flex w-full justify-end gap-2 sm:w-auto",children:[a.jsx(at,{variant:"secondary",type:"button",onClick:n,children:"Cancel"}),a.jsx(at,{variant:"primary",type:"button",onClick:async I=>{I.preventDefault(),I.stopPropagation(),console.log("SAVE BUTTON CLICKED - Manual trigger");const H=F();console.log("Form data:",H),console.log("Form errors:",ae);const Ie=await q(X=>(console.log("Manual handleFormSubmit called with:",X),xe(X)),X=>{console.log("Form validation failed:",X),alert("Please fix form errors: "+JSON.stringify(X))})();console.log("Form submission result:",Ie)},children:"Save Changes"})]})]}),j&&te&&(()=>{const I=se.find(H=>H.id===te);return I?a.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",onClick:()=>{b(!1),x(I.color_hex??null),N(I.color_hex??"#2D4660"),k(null)},children:a.jsx("div",{className:"bg-white rounded-lg shadow-xl px-3 py-2 w-auto mx-4",onClick:H=>H.stopPropagation(),children:a.jsxs("div",{className:"flex gap-3 items-stretch",children:[a.jsxs("div",{className:"flex-shrink-0",style:{width:"240px",height:"260px"},children:[a.jsx("input",{id:"native-color-input",type:"color",value:S,onChange:H=>{N(H.target.value),x(H.target.value)},ref:H=>{H&&j&&setTimeout(()=>H.click(),50)},className:"opacity-0 absolute",style:{width:"1px",height:"1px"}}),a.jsx("div",{className:"w-full h-full"})]}),a.jsx("button",{type:"button",onClick:()=>{if(!te||!S)return;const H=se.find(X=>X.id===te);if(!H)return;if((H.color_hex||null)===S){b(!1);return}k(S),x(S),b(!1)},disabled:T,className:"px-6 rounded-lg text-white font-bold shadow-lg hover:shadow-xl transition-all flex flex-col items-center justify-center gap-3 text-lg flex-shrink-0 disabled:opacity-50 disabled:cursor-not-allowed",style:{backgroundColor:S,height:"260px",minWidth:"100px"},children:T?a.jsx($o,{className:"h-8 w-8 animate-spin"}):a.jsxs(a.Fragment,{children:[a.jsx(Fr,{className:"h-8 w-8"}),a.jsxs("div",{className:"text-center leading-tight",children:[a.jsx("div",{children:"Looks"}),a.jsx("div",{children:"Good"})]})]})})]})})}):null})()]})}function dZ({features:e,onAddFeature:t,onUpdateFeature:r,onDeleteFeature:n,onShowResults:s,onRequestDeleteSession:i,isDeletingSession:l,showAddForm:u,setShowAddForm:d,editingFeature:m,setEditingFeature:f,onLogout:p,onShowVoterView:y,votingSession:x,azureDevOpsConfig:j,onUpdateAzureDevOpsConfig:b,onPreviewAzureDevOpsFeatures:S,onDisconnectAzureDevOps:N,isFetchingAzureDevOps:E,azureFetchError:k,onInitiateOAuth:T,availableStates:O,availableAreaPaths:P,availableTags:R,previewFeatures:q,showPreviewModal:F,setShowPreviewModal:V,onConfirmSync:B,onUpdateVotingSession:Q,onFetchStatesForType:ae,onFetchAreaPathsForTypeAndState:ne,onFetchTagsForTypeStateAndAreaPath:me,onFetchTypesAndStatesForAreaPath:K,onFetchTypesAndStatesForTags:te,onFetchTypesAndAreaPathsForStates:se,suggestedFeatures:de,otherSessions:xe,onPromoteSuggestion:I,onMoveSuggestion:H,onEditSuggestion:Ie,onDeleteSuggestion:X,adminPerspective:ve="session",projectOptions:ce}){const ge=Ss(),{currentUser:ye,currentSession:L}=Ui(),[Fe,Me]=v.useState(()=>j.project?j.project:ce[0]??""),[ee,Ke]=v.useState(0);v.useEffect(()=>{j.project?Me(j.project):ce.length>0?Me(ce[0]):Me("")},[j.project,ce]);const[Xe,ft]=v.useState(!1),[wt,Ct]=v.useState(!1),[_t,Ot]=v.useState(!1),[$,Y]=v.useState(!1),oe=v.useRef(null),[ue,we]=v.useState(!1),je=v.useRef(null),[ze,ot]=v.useState(null),[pt,It]=v.useState(!1),[Or,Wt]=v.useState(null),[Lt,fr]=v.useState(null),[Ft,Lr]=v.useState(""),[Kr,Ve]=v.useState(null),[zt,Xt]=v.useState(!1),[Sr,Tr]=v.useState(null),[Bt,Ir]=v.useState({title:"",summary:"",whatWouldItDo:"",howWouldItWork:""}),[ls,Qt]=v.useState(null),[hr,Cr]=v.useState(!1),[nr,Er]=v.useState(null),[zr,Vn]=v.useState(!1),[mr,Xn]=v.useState(null),[sn,an]=v.useState([]),[on,sr]=v.useState(!1),[ir,Gr]=v.useState([]),[cs,wn]=v.useState(!1),[Yr,pr]=v.useState(null),[Jr,ar]=v.useState(null),[Dr,In]=v.useState(!1),[qn,us]=v.useState(!1),[G,fe]=v.useState(null),[Ee,Pe]=v.useState(""),[st,We]=v.useState(!1),[Tt,Et]=v.useState(!1),[bt,Le]=v.useState("#2D4660"),ln=v.useMemo(()=>{const D={};return ir.forEach(he=>{he.id&&he.name&&(D[he.id]=he.name)}),D},[ir]),tr=v.useMemo(()=>{const D={};return ir.forEach(he=>{he.id&&he.color_hex&&(D[he.id]=he.color_hex)}),D},[ir]),Rr=v.useMemo(()=>Nn({...x,product_id:x.product_id??(L==null?void 0:L.product_id)??x.productId??null,product_name:null},ln),[x,L,ln]),Nt=v.useMemo(()=>{const D=x.product_id??x.productId??null;return D?tr[D]??null:null},[x,tr]),Dn=v.useMemo(()=>ns(Rr,Nt),[Rr,Nt]);v.useEffect(()=>{(async()=>{const he=(ye==null?void 0:ye.tenant_id)??(ye==null?void 0:ye.tenantId)??null;if(!he){Gr([]),pr(null);return}wn(!0),pr(null);try{const W=await ra(he);Gr(W)}catch(W){console.error("Error loading products for admin dashboard:",W),la!=null&&la(W)?pr("Products are not configured yet. Please create the `products` table in Supabase."):pr("Unable to load products. Please try again."),Gr([])}finally{wn(!1)}})()},[ye==null?void 0:ye.tenant_id,ye==null?void 0:ye.tenantId]);const ie=v.useCallback(async()=>{if(Jr){In(!0);try{await $C(Jr.id),Gr(D=>D.filter(he=>he.id!==Jr.id)),ar(null)}catch(D){console.error("Error deleting product from admin dashboard:",D),pr("Failed to delete product. Please try again.")}finally{In(!1)}}},[Jr]),Se=v.useCallback(D=>{const he=D==null?void 0:D.trim();if(he){if(Me(he),he!==(j.project||"")){const W={...j,project:he};b(W)}Ke(W=>W+1)}},[j,b]),{register:De,handleSubmit:Ye,reset:Ge}=Tu({defaultValues:{reason:"",details:""}}),{control:_e,handleSubmit:be,reset:it,register:Dt,formState:{errors:et}}=Tu({defaultValues:{reason:"",details:""}}),Mt=x.isActive?a.jsx("span",{className:"text-[#1E5461] font-medium",children:"Active"}):Zs(x.endDate)?a.jsx("span",{className:"text-[#591D0F] font-medium",children:"Closed"}):a.jsx("span",{className:"text-[#C89212] font-medium",children:"Upcoming"}),At=v.useMemo(()=>{const D=W=>{const Ae=W.type==="reopen",Be=W.createdAt||null,gr=W.actorName||"Admin",yr=Be?` ${Di(Be)}`:"";return{id:W.id,type:W.type,reason:W.reason,details:W.details??null,title:Ae?`Reopened${yr} by ${gr}`:`Ended early${yr} by ${gr}`,description:`${W.reason}${W.details?": "+W.details:""}`,iconBgClass:Ae?"bg-[#1E5461]/10":"bg-[#C89212]/10",iconBorderClass:Ae?"border-[#1E5461]/20":"border-[#C89212]/20",iconColorClass:Ae?"text-[#1E5461]":"text-[#C89212]",textColorClass:Ae?"text-[#1E5461]":"text-[#6A4234]"}};if(sn.length>0)return sn.map(W=>D(W));const he=[];return x.reopenReason&&he.push({id:"fallback-reopen",sessionId:(L==null?void 0:L.id)||"",type:"reopen",reason:x.reopenReason,details:x.reopenDetails??null,actorName:x.reopenedBy||"Admin",actorId:null,createdAt:x.reopenedAt||x.endDate}),x.endedEarlyReason&&he.push({id:"fallback-ended-early",sessionId:(L==null?void 0:L.id)||"",type:"ended-early",reason:x.endedEarlyReason,details:x.endedEarlyDetails??null,actorName:x.endedEarlyBy||"Admin",actorId:null,createdAt:x.originalEndDate||x.endDate}),he.map(W=>D(W))},[sn,x.reopenReason,x.reopenDetails,x.reopenedAt,x.reopenedBy,x.endedEarlyReason,x.endedEarlyDetails,x.originalEndDate,x.endDate,x.endedEarlyBy,L==null?void 0:L.id]);v.useEffect(()=>{At.length<=2&&sr(!1)},[At.length]);const $e=v.useCallback(async()=>{if(!(L!=null&&L.id)){an([]);return}try{const D=await u6(L.id);an(D)}catch(D){console.error("Error loading session status notes:",D)}},[L==null?void 0:L.id]);v.useEffect(()=>{$e()},[$e]);const gt=v.useCallback(async D=>{if(L!=null&&L.id)try{const he=await d6({session_id:L.id,type:D.type,reason:D.reason,details:D.details??null,actor_id:D.actorId??null,actor_name:D.actorName||"Admin"});an(W=>{const Ae=W.findIndex(Be=>Be.id===he.id);if(Ae!==-1){const Be=[...W];return Be[Ae]=he,Be}return[he,...W]})}catch(he){console.error("Error logging session status note:",he)}},[L==null?void 0:L.id]);v.useEffect(()=>{Sr&&(Ir({title:Sr.title,summary:Sr.summary??"",whatWouldItDo:Sr.whatWouldItDo??"",howWouldItWork:Sr.howWouldItWork??""}),Qt(null))},[Sr]),v.useEffect(()=>{Lt&&xe.length>0?Lr(xe[0].id):Lr(""),Ve(null)},[Lt,xe]);const yt=D=>{console.log("handleSessionUpdate called with data:",D),console.log("Current products:",ir),console.log("Current votingSession.product_id:",x.product_id);const he=D.productId&&D.productId.trim()!==""?D.productId:null;console.log("Extracted productId:",he);const W=he&&ir.find(Be=>Be.id===he)||null;console.log("Found selectedProduct:",W);const Ae={...x,title:D.title,goal:D.goal,votesPerUser:D.useAutoVotes?Math.max(1,Math.floor(e.length/2)):Number(D.votesPerUser),useAutoVotes:D.useAutoVotes,startDate:new Date(D.startDate).toISOString(),endDate:new Date(D.endDate+"T23:59:59").toISOString(),isActive:x.isActive,product_id:(W==null?void 0:W.id)??null,product_name:null};console.log("Updated session product_id:",Ae.product_id),console.log("Full updatedSession:",Ae),Q(Ae),ft(!1)},Pt=D=>{var Ae,Be;const he=new Date().toISOString(),W={...x,originalEndDate:x.endDate,endDate:he,isActive:!1,endedEarlyBy:(ye==null?void 0:ye.name)||"Admin",endedEarlyReason:D.reason,endedEarlyDetails:(Ae=D.details)!=null&&Ae.trim()?D.details.trim():null,reopenReason:null,reopenDetails:null,reopenedBy:null,reopenedAt:null};Q(W),gt({type:"ended-early",reason:D.reason,details:(Be=D.details)!=null&&Be.trim()?D.details.trim():null,actorName:(ye==null?void 0:ye.name)||"Admin",actorId:(ye==null?void 0:ye.id)??null}),Ct(!1),Ge()},Ut=D=>{var Ae,Be;const he=new Date;he.setDate(he.getDate()+7);const W={...x,endDate:he.toISOString(),isActive:!0,originalEndDate:null,endedEarlyBy:null,endedEarlyReason:null,endedEarlyDetails:null,reopenReason:D.reason,reopenDetails:(Ae=D.details)!=null&&Ae.trim()?D.details.trim():null,reopenedBy:(ye==null?void 0:ye.name)||"Admin",reopenedAt:new Date().toISOString()};Q(W),gt({type:"reopen",reason:D.reason,details:(Be=D.details)!=null&&Be.trim()?D.details.trim():null,actorName:(ye==null?void 0:ye.name)||"Admin",actorId:(ye==null?void 0:ye.id)??null}),Ot(!1),it()},ht=async(D,he)=>{const W={...j,organization:D,project:he};b(W),T()},Vt=D=>{Tr(D)},Rt=async()=>{if(!Sr)return;const D=Bt.title.trim();if(!D){Qt("Title is required.");return}Cr(!0),Qt(null);try{await Ie(Sr.id,{title:D,summary:Bt.summary.trim()?Bt.summary.trim():null,whatWouldItDo:Bt.whatWouldItDo.trim()?Bt.whatWouldItDo.trim():null,howWouldItWork:Bt.howWouldItWork.trim()?Bt.howWouldItWork.trim():null}),Tr(null)}catch(he){console.error("Error updating suggestion:",he),Qt("Failed to update the suggestion. Please try again.")}finally{Cr(!1)}},C=async()=>{if(Lt){if(!Ft){Ve("Please select a session.");return}Xt(!0),Ve(null);try{await H(Lt.id,Ft),fr(null)}catch(D){console.error("Error moving suggestion:",D),Ve("Failed to move the suggestion. Please try again.")}finally{Xt(!1)}}},J=async()=>{if(ze){It(!0),Wt(null);try{await I(ze.id),ot(null)}catch(D){console.error("Error promoting suggestion:",D),Wt("Failed to move the suggestion into the current session.")}finally{It(!1)}}},Ne=async()=>{if(nr){Vn(!0),Xn(null);try{await X(nr.id),Er(null)}catch(D){console.error("Error deleting suggestion:",D),Xn("Failed to delete the suggestion. Please try again.")}finally{Vn(!1)}}},Te=v.useCallback(()=>{ft(!1),i()},[i]);return v.useEffect(()=>{if(!$)return;const D=he=>{oe.current&&!oe.current.contains(he.target)&&Y(!1)};return document.addEventListener("mousedown",D),document.addEventListener("touchstart",D,{passive:!0}),()=>{document.removeEventListener("mousedown",D),document.removeEventListener("touchstart",D)}},[$]),v.useEffect(()=>{if(!ue)return;const D=he=>{je.current&&!je.current.contains(he.target)&&we(!1)};return document.addEventListener("mousedown",D),document.addEventListener("touchstart",D,{passive:!0}),()=>{document.removeEventListener("mousedown",D),document.removeEventListener("touchstart",D)}},[ue]),a.jsxs("div",{className:"container mx-auto p-4 max-w-6xl min-h-screen pb-8",children:[a.jsx("div",{className:"hidden md:flex md:justify-center mb-2",children:a.jsx("img",{src:"https://www.steeldynamics.com/wp-content/uploads/2024/05/New-Millennium-color-logo1.png",alt:"New Millennium Building Systems Logo",className:"-mt-4 cursor-pointer hover:opacity-80 transition-opacity",style:{height:"96px",width:"auto"},onClick:()=>ge("/sessions")})}),a.jsxs("div",{className:"flex justify-between items-center mb-6",children:[a.jsxs("div",{className:"flex items-center",children:[a.jsx(Bm,{src:"https://media.licdn.com/dms/image/C4D0BAQEC3OhRqehrKg/company-logo_200_200/0/1630518354793/new_millennium_building_systems_logo?e=2147483647&v=beta&t=LM3sJTmQZet5NshZ-RNHXW1MMG9xSi1asp-VUeSA9NA",alt:"New Millennium Building Systems Logo",className:"mr-4 md:hidden",style:{width:"40px",height:"40px"}}),a.jsx("h1",{className:"text-2xl font-bold text-[#2D4660] md:text-3xl",children:"Admin Dashboard"})]}),a.jsxs("div",{ref:oe,className:"relative z-40",children:[a.jsxs("div",{className:"hidden md:flex space-x-2",children:[a.jsxs("button",{onClick:y,className:"flex items-center px-4 py-2 bg-[#576C71] text-white rounded-lg hover:bg-[#1E5461] transition-colors",children:[a.jsx(Fn,{className:"mr-2 h-4 w-4"}),"Vote!"]}),a.jsxs("button",{onClick:()=>ge(ve==="system"?"/users":"/users?filter=stakeholder"),className:"flex items-center px-4 py-2 bg-[#2D4660] text-white rounded-lg hover:bg-[#173B65] transition-colors",children:[ve==="system"?a.jsx(Cn,{className:"mr-2 h-4 w-4"}):a.jsx(Un,{className:"mr-2 h-4 w-4"}),ve==="system"?"User Management":"Stakeholders"]}),a.jsxs("button",{onClick:()=>ge("/sessions"),className:"flex items-center px-4 py-2 bg-[#4f6d8e] text-white rounded-lg hover:bg-[#3d5670] transition-colors",children:[a.jsx(Un,{className:"mr-2 h-4 w-4"}),"All Sessions"]}),a.jsxs("button",{onClick:p,className:"flex items-center px-4 py-2 bg-[#576C71] text-white rounded-lg hover:bg-[#1E5461] transition-colors",children:[a.jsx(An,{className:"mr-2 h-4 w-4"}),"Logout"]})]}),a.jsx("div",{className:"flex md:hidden",children:a.jsx("button",{onClick:()=>Y(!$),className:"p-2 rounded-md border border-gray-200 bg-white shadow-sm","aria-label":"Open menu",children:a.jsx(Rs,{className:"h-5 w-5 text-gray-700"})})}),$&&a.jsx("div",{className:"absolute right-0 mt-2 w-56 bg-white border border-gray-200 rounded-lg shadow-lg md:hidden z-50",children:a.jsxs("div",{className:"py-1",children:[a.jsxs("button",{onClick:()=>{Y(!1),y()},className:"w-full px-3 py-2 flex items-center text-left hover:bg-gray-50",children:[a.jsx(Fn,{className:"h-4 w-4 mr-2 text-gray-700"}),"Vote!"]}),a.jsxs("button",{onClick:()=>{Y(!1),ge(ve==="system"?"/users":"/users?filter=stakeholder")},className:"w-full px-3 py-2 flex items-center text-left hover:bg-gray-50",children:[ve==="system"?a.jsx(Cn,{className:"h-4 w-4 mr-2 text-gray-700"}):a.jsx(Un,{className:"h-4 w-4 mr-2 text-gray-700"}),ve==="system"?"User Management":"Stakeholders"]}),a.jsxs("button",{onClick:()=>{Y(!1),ge("/sessions")},className:"w-full px-3 py-2 flex items-center text-left hover:bg-gray-50",children:[a.jsx(Un,{className:"h-4 w-4 mr-2 text-gray-700"}),"All Sessions"]}),!(x.isActive===!1&&!Zs(x.endDate))&&a.jsxs("button",{onClick:()=>{Y(!1),s()},className:"w-full px-3 py-2 flex items-center text-left hover:bg-gray-50",children:[a.jsx(Uf,{className:"h-4 w-4 mr-2 text-gray-700"}),Zs(x.endDate)?"Final Results":"Current Results"]}),a.jsxs("button",{onClick:()=>{Y(!1),ft(!0)},className:"w-full px-3 py-2 flex items-center text-left hover:bg-gray-50",children:[a.jsx(pn,{className:"h-4 w-4 mr-2 text-gray-700"}),"Edit Session"]}),a.jsxs("button",{onClick:()=>{Y(!1),p()},className:"w-full px-3 py-2 flex items-center text-left hover:bg-gray-50",children:[a.jsx(An,{className:"h-4 w-4 mr-2 text-gray-700"}),"Logout"]})]})})]})]}),a.jsxs("div",{className:"relative bg-white rounded-lg shadow-md p-4 mb-6",style:{marginTop:Rr?"3.5rem":"0"},children:[Rr&&a.jsxs("div",{className:"absolute left-0 px-4 py-1 pr-8 rounded-t-md border-b-0 text-sm font-semibold shadow-sm z-20 flex items-center gap-2 whitespace-nowrap group cursor-pointer",style:{top:"0",left:"-1px",transform:"translateY(-100%)",backgroundColor:Dn.background,color:Dn.text,borderColor:Dn.border,borderWidth:"1px",borderBottomWidth:"0",boxShadow:"0 4px 8px rgba(16,24,40,0.06)",borderTopLeftRadius:"0.9rem",borderTopRightRadius:"0.9rem",overflow:"visible"},onMouseEnter:()=>{(x.product_id||x.productId)&&us(!0)},onMouseLeave:()=>us(!1),onClick:async D=>{const he=x.product_id||x.productId;if(!he)return;D.stopPropagation();const W=ir.find(Ae=>Ae.id===he);W&&(fe(W),Pe(W.name||""),setEditingProductColor(W.color_hex||null),Le(W.color_hex||"#2D4660"))},children:[a.jsx(Wv,{className:"h-4 w-4 flex-shrink-0"}),a.jsx("span",{className:"overflow-hidden text-ellipsis flex-1 min-w-0",children:Rr}),(x.product_id||x.productId)&&qn&&a.jsx("div",{className:"absolute right-2 flex-shrink-0 opacity-80",children:a.jsx(gE,{className:"h-4 w-4",style:{color:Dn.text}})})]}),a.jsxs("div",{className:"pt-1",children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsxs("h2",{className:"text-xl font-semibold text-[#2D4660]",children:["Current Session: ",a.jsx("span",{className:"text-[#1E5461]",children:x.title})]}),a.jsxs("div",{ref:je,className:"relative z-40",children:[a.jsxs("div",{className:"hidden md:flex space-x-2",children:[!(x.isActive===!1&&!Zs(x.endDate))&&a.jsxs(at,{variant:"gold",onClick:s,className:"flex items-center",children:[a.jsx(Uf,{className:"h-4 w-4 mr-2"}),Zs(x.endDate)?"Final Results":"Current Results"]}),a.jsxs(at,{variant:"primary",onClick:()=>ft(!0),className:"flex items-center",children:[a.jsx(pn,{className:"h-4 w-4 mr-2"}),"Edit Session"]})]}),a.jsx("div",{className:"flex md:hidden",children:a.jsx("button",{onClick:()=>we(!ue),className:"p-2 rounded-md border border-gray-200 bg-white shadow-sm","aria-label":"Open session actions menu",children:a.jsx(Rs,{className:"h-5 w-5 text-gray-700"})})}),ue&&a.jsx("div",{className:"absolute right-0 mt-2 w-56 bg-white border border-gray-200 rounded-lg shadow-lg md:hidden z-50",children:a.jsxs("div",{className:"py-1",children:[!(x.isActive===!1&&!Zs(x.endDate))&&a.jsxs("button",{onClick:()=>{we(!1),s()},className:"w-full px-3 py-2 flex items-center text-left hover:bg-gray-50",children:[a.jsx(Uf,{className:"h-4 w-4 mr-2 text-gray-700"}),Zs(x.endDate)?"Final Results":"Current Results"]}),a.jsxs("button",{onClick:()=>{we(!1),ft(!0)},className:"w-full px-3 py-2 flex items-center text-left hover:bg-gray-50",children:[a.jsx(pn,{className:"h-4 w-4 mr-2 text-gray-700"}),"Edit Session"]})]})})]})]}),cs&&a.jsx("p",{className:"text-xs text-gray-500 mb-4",children:"Loading products"}),Yr&&a.jsx("p",{className:"text-xs text-[#591D0F] mb-4",children:Yr}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4",children:[a.jsxs("div",{children:[a.jsx("h3",{className:"text-sm font-medium text-gray-700 mb-1",children:"Voting Period"}),a.jsxs("p",{className:`text-[#2D4660] font-medium ${x.originalEndDate?"line-through text-gray-400":""}`,children:[Di(x.startDate)," - ",Di(x.originalEndDate||x.endDate)]}),x.originalEndDate&&x.endedEarlyBy&&a.jsxs("div",{className:"flex items-center mt-1 text-xs text-[#591D0F]",children:[a.jsxs("span",{children:["Ended Early by ",x.endedEarlyBy]}),x.endedEarlyReason&&a.jsxs("div",{className:"group relative ml-1",children:[a.jsx(Yt,{className:"h-3 w-3 cursor-help"}),a.jsxs("div",{className:"absolute bottom-full left-1/2 -translate-x-1/2 mb-2 px-3 py-2 bg-gray-900 text-white text-xs rounded-lg opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-200 whitespace-nowrap z-10 pointer-events-none max-w-xs",children:[a.jsxs("div",{className:"font-semibold mb-1",children:["Reason: ",x.endedEarlyReason]}),x.endedEarlyDetails&&a.jsx("div",{className:"whitespace-normal",children:x.endedEarlyDetails}),a.jsx("div",{className:"absolute top-full left-1/2 -translate-x-1/2 -mt-1 border-4 border-transparent border-t-gray-900"})]})]})]})]}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-sm font-medium text-gray-700 mb-1",children:"Votes Per User"}),a.jsx("p",{className:"text-[#2D4660] font-medium",children:x.useAutoVotes?`${Math.max(1,Math.floor(e.length/2))} (Auto: ${e.length} features  2)`:x.votesPerUser})]}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-sm font-medium text-gray-700 mb-1",children:"Status"}),a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center",children:[a.jsx(im,{className:"h-4 w-4 mr-1 text-gray-600"}),Mt]}),(x.isActive||Zs(x.endDate))&&a.jsx(at,{variant:x.isActive?"danger":"primary",onClick:()=>{x.isActive?Ct(!0):(it(),Ot(!0))},className:"text-xs px-2 py-1 ml-2",children:x.isActive?"End Early":"Reopen"})]})]})]}),a.jsx("div",{className:"pt-3 border-t border-gray-200",children:a.jsxs("div",{className:"relative overflow-hidden rounded-2xl border border-[#C89212]/30 bg-gradient-to-r from-[#FFF6E3] via-[#FFF9ED] to-white shadow-sm p-5 md:p-6",children:[a.jsx("span",{className:"pointer-events-none absolute -top-10 left-4 h-32 w-32 rounded-full bg-[#C89212]/25 blur-3xl"}),a.jsx("span",{className:"pointer-events-none absolute -bottom-16 right-6 h-40 w-40 rounded-full bg-[#F4C66C]/20 blur-3xl"}),a.jsx("span",{className:"pointer-events-none absolute top-6 right-10 text-[#F4B400] text-xl animate-ping",children:""}),a.jsx("span",{className:"pointer-events-none absolute bottom-8 left-10 text-[#C89212] text-lg animate-pulse",children:""}),a.jsxs("div",{className:"relative flex flex-col gap-6 md:flex-row md:items-start md:justify-between",children:[a.jsxs("div",{className:"flex items-start gap-5 md:pr-8 lg:pr-12",children:[a.jsxs("div",{className:"relative",children:[a.jsx("div",{className:"h-16 w-16 md:h-20 md:w-20 rounded-full bg-white shadow-lg shadow-[#C89212]/30 border border-[#C89212]/40 flex items-center justify-center text-[#C89212]",children:a.jsx(jF,{className:"h-8 w-8 md:h-10 md:w-10"})}),a.jsx("span",{className:"pointer-events-none absolute -top-3 -left-2 text-[#C89212] text-base animate-ping",children:""}),a.jsx("span",{className:"pointer-events-none absolute bottom-0 -right-3 text-[#F5D79E] text-xl animate-pulse",children:""})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-xs font-semibold uppercase tracking-[0.2em] text-[#C89212]/80 mb-1",children:"Session Goal"}),a.jsx("h3",{className:"text-lg md:text-xl font-semibold text-[#2D4660] leading-relaxed",children:x.goal})]})]}),a.jsxs("div",{className:"md:w-80 lg:w-96 rounded-xl border border-white/70 bg-white/80 backdrop-blur-sm shadow-inner p-4",children:[a.jsxs("div",{className:"flex items-center justify-between mb-3",children:[a.jsx("h3",{className:"text-sm font-semibold text-[#2D4660]",children:"Status Notes"}),At.length>2&&a.jsxs("span",{className:"inline-flex items-center justify-between text-xs text-[#1E5461] w-[90px]",children:[a.jsx("span",{className:"flex items-center justify-center w-4 h-4 border border-current rounded",children:on?a.jsx(yu,{className:"h-2.5 w-2.5"}):a.jsx(kn,{className:"h-2.5 w-2.5"})}),a.jsx("button",{type:"button",onClick:()=>sr(D=>!D),className:"ml-1 hover:text-[#173B65] transition-colors text-left flex-1",children:on?"Show Less":"Show More"})]})]}),At.length>0?a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"space-y-3",children:At.slice(0,on?At.length:2).map(D=>{const he=D.type==="reopen"?$o:Yt;return a.jsxs("div",{className:`flex items-start gap-3 text-sm ${D.textColorClass}`,children:[a.jsx("div",{className:`mt-0.5 flex items-center justify-center w-8 h-8 ${D.iconBgClass} ${D.iconBorderClass} border rounded-lg`,children:a.jsx(he,{className:`h-3.5 w-3.5 ${D.iconColorClass}`})}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold text-gray-800",children:D.title}),a.jsx("p",{className:"text-xs text-gray-600 leading-relaxed",children:D.description})]})]},D.id)})}),At.length>2&&!on&&a.jsx("p",{className:"text-xs text-gray-500 mt-3",children:'Showing newest notes. Select "Show More" to view all updates.'})]}):a.jsx("p",{className:"text-sm text-gray-500",children:"No status updates yet."})]})]})]})})]})]}),a.jsxs("div",{className:"relative bg-white rounded-lg shadow-md p-4 mb-6",children:[a.jsx("div",{className:"flex items-center justify-between mb-4",children:a.jsxs("div",{className:"flex items-center",children:[a.jsx("img",{src:H2,alt:"Azure DevOps logo",className:"h-5 w-5 mr-2"}),a.jsx("h2",{className:"text-xl font-semibold text-[#2D4660]",children:"Azure DevOps Integration"})]})}),j.enabled?a.jsxs("div",{className:"space-y-4",children:[a.jsx("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:gap-4",children:[a.jsx(Fr,{className:"h-5 w-5 text-green-600 mr-2"}),a.jsxs("div",{className:"flex flex-col gap-2",children:[a.jsxs("div",{className:"flex flex-wrap items-center gap-x-2 text-sm text-green-700",children:[a.jsx("span",{className:"font-medium text-green-900",children:"Connected to Azure DevOps"}),a.jsx("span",{className:"hidden sm:inline mx-1 text-green-500",children:""}),a.jsxs("span",{children:[a.jsx("span",{className:"font-medium",children:"Organization:"})," ",j.organization]}),a.jsx("span",{className:"hidden sm:inline mx-1 text-green-500",children:""}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"font-medium",children:"Project:"}),a.jsx("div",{className:"min-w-[150px]",children:a.jsx(K2,{options:ce,value:Fe,onChange:Se,variant:"green"})})]}),j.lastSyncTime&&a.jsxs(a.Fragment,{children:[a.jsx("span",{className:"hidden sm:inline mx-1 text-green-500",children:""}),a.jsxs("span",{children:[a.jsx("span",{className:"font-medium",children:"Last Sync:"})," ",Di(j.lastSyncTime)]})]})]}),a.jsx("span",{className:"text-xs text-green-700",children:"Switching projects will clear the filters below."})]})]}),a.jsxs("button",{onClick:N,className:"text-sm text-[#591D0F] hover:text-[#6A4234] font-medium flex items-center",children:[a.jsx($s,{className:"h-4 w-4 mr-1"}),"Disconnect"]})]})}),a.jsx(cZ,{config:j,onUpdateConfig:b,onPreview:S,isFetching:E,availableStates:O,availableAreaPaths:P,availableTags:R,previewFeatures:q,showPreviewModal:F,onFetchStatesForType:ae,onFetchAreaPathsForTypeAndState:ne,onFetchTagsForTypeStateAndAreaPath:me,onFetchTypesAndStatesForAreaPath:K,onFetchTypesAndStatesForTags:te,onFetchTypesAndAreaPathsForStates:se,resetSignal:ee})]}):a.jsxs("div",{className:"bg-gray-50 rounded-lg p-6 text-center border border-dashed border-gray-300",children:[a.jsx("img",{src:H2,alt:"Azure DevOps logo",className:"h-10 w-10 mx-auto mb-3 opacity-80"}),a.jsx("h3",{className:"text-lg font-medium text-gray-700 mb-2",children:"Not Connected"}),a.jsx("p",{className:"text-gray-600 mb-4",children:"Connect to Azure DevOps to import work items as features for voting."}),a.jsx(at,{variant:"primary",onClick:()=>ht("newmill",Fe||ce[0]||"Product"),className:"inline-flex items-center",disabled:E,children:E?a.jsxs(a.Fragment,{children:[a.jsx($o,{className:"h-4 w-4 mr-2 animate-spin"}),"Connecting..."]}):a.jsxs(a.Fragment,{children:[a.jsx(pn,{className:"h-4 w-4 mr-2"}),"Connect to Azure DevOps"]})}),k&&a.jsx("p",{className:"mt-3 text-sm text-[#591D0F]",children:k})]})]}),a.jsxs("div",{className:"relative bg-white rounded-lg shadow-md p-4 mb-6",children:[a.jsxs("div",{className:"flex flex-wrap justify-between items-center gap-2 mb-4",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"text-xl font-semibold text-[#2D4660]",children:"Suggested Features"}),a.jsx("p",{className:"text-sm text-gray-600",children:"Ideas submitted from the voting experience for future consideration."})]}),a.jsxs("span",{className:"inline-flex items-center px-3 py-1 rounded-full bg-[#1E5461]/10 text-[#1E5461] text-sm font-medium",children:[de.length," ",de.length===1?"suggestion":"suggestions"]})]}),de.length===0?a.jsx("div",{className:"bg-gray-50 border border-dashed border-gray-200 rounded-lg p-6 text-center text-gray-500 text-sm",children:'No feature suggestions have been submitted yet. Encourage voters to use the "Suggest a Feature" button in the voting experience.'}):a.jsx("div",{className:"space-y-4 max-h-[360px] overflow-y-auto pr-1",children:de.map(D=>{const he=D.requester_name||D.requester_email||"Anonymous";return a.jsx("div",{className:"border border-gray-200 rounded-lg p-4 hover:border-[#1E5461]/40 transition-colors",children:a.jsxs("div",{className:"flex flex-col gap-4",children:[a.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4",children:[a.jsxs("div",{className:"md:flex-1",children:[a.jsx("h3",{className:"text-lg font-semibold text-[#2D4660]",children:D.title}),a.jsxs("p",{className:"text-xs text-gray-500 mt-[14px]",children:["Submitted by ",a.jsx("span",{className:"font-medium text-[#1E5461]",children:he}),D.requester_email&&a.jsxs(a.Fragment,{children:[" ","(",a.jsx("a",{href:`mailto:${D.requester_email}`,className:"text-[#1E5461] hover:underline",children:D.requester_email}),")"]})," on ",Di(D.created_at)]})]}),a.jsxs("div",{className:"flex flex-col items-end gap-2 self-start md:min-w-[360px]",children:[a.jsxs("div",{className:"flex flex-wrap justify-end gap-2",children:[a.jsxs(at,{variant:"primary",onClick:()=>{Wt(null),ot(D)},className:"text-xs px-3 py-1 flex items-center",children:[a.jsx(OM,{className:"h-3.5 w-3.5 mr-2"}),"Move to Current Session"]}),a.jsxs(at,{variant:"secondary",onClick:()=>{xe.length>0&&fr(D)},disabled:xe.length===0,className:"text-xs px-3 py-1 flex items-center",children:[a.jsx(Wr,{className:"h-3.5 w-3.5 mr-2"}),"Move to Future Session"]}),a.jsxs(at,{variant:"secondary",onClick:()=>Vt(D),className:"text-xs px-3 py-1 flex items-center",children:[a.jsx(Su,{className:"h-3.5 w-3.5 mr-2"}),"Edit"]}),a.jsxs(at,{variant:"danger",onClick:()=>{Xn(null),Er(D)},className:"text-xs px-3 py-1 flex items-center",children:[a.jsx(ji,{className:"h-3.5 w-3.5 mr-2"}),"Delete"]})]}),xe.length===0&&a.jsx("p",{className:"text-xs text-gray-500 text-right",children:"No upcoming sessions are available yet. Create a future session to enable this action."})]})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3",children:[a.jsxs("div",{className:"border border-gray-200 rounded-lg p-3 bg-gray-50 max-h-48 overflow-y-auto",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[a.jsx(Yt,{className:"h-4 w-4 text-[#2D4660]"}),a.jsx("p",{className:"text-sm font-semibold text-[#2D4660]",children:"Problem it solves"})]}),a.jsx("p",{className:"text-sm text-gray-700 whitespace-pre-line",children:D.summary&&D.summary.length>0?D.summary:"No summary provided."})]}),a.jsxs("div",{className:"border border-gray-200 rounded-lg p-3 bg-gray-50 max-h-48 overflow-y-auto",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[a.jsx(sx,{className:"h-4 w-4 text-[#2D4660]"}),a.jsx("p",{className:"text-sm font-semibold text-[#2D4660]",children:"What would it do?"})]}),a.jsx("p",{className:"text-sm text-gray-700 whitespace-pre-line",children:D.whatWouldItDo&&D.whatWouldItDo.length>0?D.whatWouldItDo:"No details provided."})]}),a.jsxs("div",{className:"border border-gray-200 rounded-lg p-3 bg-gray-50 max-h-48 overflow-y-auto",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[a.jsx(AF,{className:"h-4 w-4 text-[#2D4660]"}),a.jsx("p",{className:"text-sm font-semibold text-[#2D4660]",children:"How would it work?"})]}),a.jsx("p",{className:"text-sm text-gray-700 whitespace-pre-line",children:D.howWouldItWork&&D.howWouldItWork.length>0?D.howWouldItWork:"No implementation details provided."})]})]})]})},D.id)})})]}),a.jsxs("div",{className:"relative bg-white rounded-lg shadow-md p-4 mb-6",children:[a.jsxs("div",{className:"flex justify-between items-center mb-4",children:[a.jsx("h2",{className:"text-xl font-semibold text-[#2D4660]",children:"Feature Management"}),a.jsxs(at,{variant:"gold",onClick:()=>d(!0),className:"flex items-center w-44",children:[a.jsx(kn,{className:"mr-2 h-4 w-4"}),"Add Feature"]})]}),a.jsx("div",{className:"w-full overflow-x-auto",children:a.jsxs("table",{className:"min-w-full divide-y divide-gray-200 table-fixed",children:[a.jsx("thead",{className:"bg-gray-50",children:a.jsxs("tr",{children:[a.jsx("th",{scope:"col",className:"w-[20%] px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Title"}),a.jsx("th",{scope:"col",className:"hidden lg:table-cell w-[25%] px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Description"}),a.jsx("th",{scope:"col",className:"hidden md:table-cell w-[10%] px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Epic"}),a.jsx("th",{scope:"col",className:"hidden md:table-cell w-[8%] px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"State"}),a.jsx("th",{scope:"col",className:"hidden lg:table-cell w-[12%] px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Area Path"}),a.jsx("th",{scope:"col",className:"hidden xl:table-cell w-[10%] px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Tags"}),a.jsx("th",{scope:"col",className:"w-[8%] px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Votes"}),a.jsx("th",{scope:"col",className:"w-[7%] px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),a.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:e.map(D=>a.jsxs("tr",{className:"align-top group",children:[a.jsx("td",{className:"px-4 py-4 whitespace-normal break-words text-sm font-medium text-left",children:a.jsxs("div",{className:"max-w-xs overflow-hidden text-left",children:[D.title,D.azureDevOpsId&&a.jsx("div",{className:"mt-1",children:a.jsx(Yh,{id:D.azureDevOpsId,url:D.azureDevOpsUrl||""})})]})}),a.jsx("td",{className:"hidden lg:table-cell px-4 py-4 text-sm text-gray-500 text-left",children:a.jsx("div",{className:"max-w-md overflow-hidden break-words text-left",children:D.description||a.jsx("span",{className:"italic text-gray-400",children:"No description provided"})})}),a.jsx("td",{className:"hidden md:table-cell px-4 py-4 whitespace-nowrap text-sm",children:D.epic&&a.jsx(tc,{name:D.epic})}),a.jsx("td",{className:"hidden md:table-cell px-4 py-4 whitespace-nowrap text-sm",children:D.state&&a.jsx("span",{className:"px-2 py-1 text-xs font-medium bg-[#1E5461]/10 text-[#1E5461] rounded",children:D.state})}),a.jsx("td",{className:"hidden lg:table-cell px-4 py-4 text-sm",children:a.jsx("div",{className:"text-gray-600",children:D.areaPath&&typeof D.areaPath=="string"&&D.areaPath.trim()!==""?a.jsx("div",{className:"max-w-xs break-words",children:D.areaPath}):a.jsx("span",{className:"text-gray-400",children:"-"})})}),a.jsx("td",{className:"hidden xl:table-cell px-4 py-4 text-sm",children:D.tags&&D.tags.length>0?a.jsxs("div",{className:"flex flex-wrap gap-1",children:[D.tags.slice(0,3).map((he,W)=>a.jsx("span",{className:"px-2 py-0.5 text-xs bg-gray-100 text-gray-700 rounded",children:he},W)),D.tags.length>3&&a.jsxs("span",{className:"px-2 py-0.5 text-xs text-gray-500",children:["+",D.tags.length-3]})]}):a.jsx("span",{className:"text-gray-400",children:"-"})}),a.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm",children:D.votes}),a.jsxs("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-gray-500 space-x-3 md:opacity-0 md:group-hover:opacity-100 transition-opacity",children:[a.jsx("button",{onClick:()=>f(D),className:"text-[#2D4660] hover:text-[#C89212] inline-block cursor-pointer",title:"Edit Feature",children:a.jsx(Su,{className:"h-5 w-5"})}),a.jsx("button",{onClick:()=>n(D.id),className:"text-[#2D4660] hover:text-[#591D0F] inline-block cursor-pointer",title:"Delete Feature",children:a.jsx(ji,{className:"h-5 w-5"})})]})]},D.id))})]})})]}),a.jsx(Jn,{isOpen:ze!==null,onClose:()=>{pt||(ot(null),Wt(null))},title:"Move Suggestion to Current Session",children:a.jsxs("div",{className:"space-y-4",children:[a.jsxs("p",{className:"text-sm text-gray-700",children:["Move ",a.jsx("span",{className:"font-semibold text-[#2D4660]",children:ze==null?void 0:ze.title})," into the current session so it can be managed and voted on."]}),Or&&a.jsx("div",{className:"bg-[#591D0F]/5 border border-[#591D0F]/20 text-[#591D0F] text-sm rounded-md px-3 py-2",children:Or}),a.jsxs("div",{className:"flex justify-end gap-2",children:[a.jsx(at,{variant:"secondary",onClick:()=>{pt||(ot(null),Wt(null))},disabled:pt,children:"Cancel"}),a.jsx(at,{variant:"primary",onClick:J,disabled:pt,children:pt?"Moving...":"Move to Current Session"})]})]})}),a.jsx(Jn,{isOpen:Lt!==null,onClose:()=>{zt||(fr(null),Ve(null))},title:"Move to Future Session",children:a.jsxs("div",{className:"space-y-4",children:[a.jsxs("p",{className:"text-sm text-gray-700",children:["Choose the upcoming session where you would like to queue ",a.jsx("span",{className:"font-semibold text-[#2D4660]",children:Lt==null?void 0:Lt.title}),"."]}),xe.length>0?a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Destination Session"}),a.jsx("select",{value:Ft,onChange:D=>Lr(D.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md text-sm bg-white",disabled:zt,children:xe.map(D=>a.jsxs("option",{value:D.id,children:[D.title," (Starts ",Di(D.startDate),")"]},D.id))})]}):a.jsx("div",{className:"bg-[#1E5461]/5 border border-[#1E5461]/20 text-[#1E5461] text-sm rounded-md px-3 py-2",children:"No future sessions are available yet. Create a new session to enable this action."}),Kr&&a.jsx("div",{className:"bg-[#591D0F]/5 border border-[#591D0F]/20 text-[#591D0F] text-sm rounded-md px-3 py-2",children:Kr}),a.jsxs("div",{className:"flex justify-end gap-2",children:[a.jsx(at,{variant:"secondary",onClick:()=>{zt||(fr(null),Ve(null))},disabled:zt,children:"Cancel"}),a.jsx(at,{variant:"primary",onClick:C,disabled:zt||xe.length===0,children:zt?"Moving...":"Move to Session"})]})]})}),a.jsx(Jn,{isOpen:Sr!==null,onClose:()=>{hr||(Tr(null),Qt(null))},title:"Edit Suggested Feature",children:a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Title"}),a.jsx("input",{type:"text",value:Bt.title,onChange:D=>Ir(he=>({...he,title:D.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md",disabled:hr})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Problem it solves"}),a.jsx("textarea",{value:Bt.summary,onChange:D=>Ir(he=>({...he,summary:D.target.value})),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-md",disabled:hr})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"What would it do?"}),a.jsx("textarea",{value:Bt.whatWouldItDo,onChange:D=>Ir(he=>({...he,whatWouldItDo:D.target.value})),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-md",disabled:hr})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"How would it work?"}),a.jsx("textarea",{value:Bt.howWouldItWork,onChange:D=>Ir(he=>({...he,howWouldItWork:D.target.value})),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-md",disabled:hr})]}),ls&&a.jsx("div",{className:"bg-[#591D0F]/5 border border-[#591D0F]/20 text-[#591D0F] text-sm rounded-md px-3 py-2",children:ls}),a.jsxs("div",{className:"flex justify-end gap-2",children:[a.jsx(at,{variant:"secondary",onClick:()=>{hr||(Tr(null),Qt(null))},disabled:hr,children:"Cancel"}),a.jsx(at,{variant:"primary",onClick:Rt,disabled:hr,children:hr?"Saving...":"Save Changes"})]})]})}),a.jsx(Jn,{isOpen:nr!==null,onClose:()=>{zr||(Er(null),Xn(null))},title:"Delete Suggested Feature",children:a.jsxs("div",{className:"space-y-4",children:[a.jsxs("p",{className:"text-sm text-gray-700",children:["Are you sure you want to delete ",a.jsx("span",{className:"font-semibold text-[#591D0F]",children:nr==null?void 0:nr.title}),"? This action cannot be undone."]}),mr&&a.jsx("div",{className:"bg-[#591D0F]/5 border border-[#591D0F]/20 text-[#591D0F] text-sm rounded-md px-3 py-2",children:mr}),a.jsxs("div",{className:"flex justify-end gap-2",children:[a.jsx(at,{variant:"secondary",onClick:()=>{zr||(Er(null),Xn(null))},disabled:zr,children:"Cancel"}),a.jsx(at,{variant:"danger",onClick:Ne,disabled:zr,children:zr?"Deleting...":"Delete"})]})]})}),a.jsx(Jn,{isOpen:u,onClose:()=>d(!1),title:"Add New Feature",children:a.jsx(Y2,{onSubmit:D=>{t(D),d(!1)},onCancel:()=>d(!1)})}),a.jsx(Jn,{isOpen:m!==null,onClose:()=>f(null),title:"Edit Feature",children:m&&a.jsx(Y2,{feature:m,onSubmit:D=>{r({...m,...D}),f(null)},onCancel:()=>f(null)})}),a.jsx(Jn,{isOpen:Xe,onClose:()=>ft(!1),title:"Edit Session Settings",children:a.jsx(uZ,{session:x,featureCount:e.length,onSubmit:yt,onCancel:()=>ft(!1),onRequestDeleteSession:Te,isDeletingSession:l,productName:Rr,products:ir,isLoadingProducts:cs,productError:Yr,onRequestDeleteProduct:D=>ar(D),onProductColorUpdated:async()=>{const D=(ye==null?void 0:ye.tenant_id)??(ye==null?void 0:ye.tenantId)??null;if(D)try{const he=await ra(D);Gr(he)}catch(he){console.error("Error refreshing products after color update:",he)}}})}),Jr&&a.jsxs(Jn,{isOpen:!0,onClose:()=>ar(null),title:"Delete Product",children:[a.jsxs("p",{className:"text-sm text-gray-700 mb-4",children:["Are you sure you want to delete ",a.jsx("span",{className:"font-semibold",children:Jr.name}),"? This will remove it for everyone in your tenant."]}),a.jsxs("div",{className:"flex justify-end gap-3",children:[a.jsx(at,{variant:"secondary",onClick:()=>ar(null),disabled:Dr,children:"Cancel"}),a.jsx(at,{variant:"danger",onClick:ie,disabled:Dr,children:Dr?"Deleting...":"Delete"})]})]}),a.jsx(Jn,{isOpen:F,onClose:()=>V(!1),title:"Preview Azure DevOps Features",maxWidth:"max-w-4xl",children:a.jsx("div",{className:"space-y-4",children:q&&q.length>0?a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"bg-[#1E5461]/5 border border-[#1E5461]/20 rounded-lg p-4",children:a.jsx("p",{className:"text-[#1E5461] font-medium",children:"Review the work items below. If they look correct, add them to your voting session."})}),a.jsx("div",{className:"max-h-96 overflow-y-auto",children:a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:q.map(D=>a.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-4 shadow-sm hover:shadow-md transition-shadow",children:[a.jsx("div",{className:"mb-3",children:a.jsx("h4",{className:"text-base font-semibold text-gray-900",children:D.title})}),D.workItemType!=="Feature"&&D.epic&&a.jsxs("div",{className:"mb-3",children:[a.jsx("p",{className:"text-xs text-gray-500 mb-1",children:"Epic"}),a.jsx(tc,{name:D.epic})]}),D.description&&D.description.trim()!==""?a.jsxs("div",{className:"mb-3",children:[a.jsx("p",{className:"text-xs text-gray-500 mb-1",children:"Description"}),a.jsx("p",{className:"text-xs text-gray-700 line-clamp-3",children:D.description})]}):null,D.state&&a.jsxs("div",{className:"mb-3",children:[a.jsx("p",{className:"text-xs text-gray-500 mb-1",children:"State"}),a.jsx("span",{className:"px-2 py-1 text-xs font-medium bg-[#1E5461]/10 text-[#1E5461] rounded",children:D.state})]}),D.workItemType==="Feature"&&D.epic&&a.jsxs("div",{className:"mb-3",children:[a.jsx("p",{className:"text-xs text-gray-500 mb-1",children:"Epic"}),a.jsx(tc,{name:D.epic})]}),a.jsxs("div",{className:"mb-3",children:[a.jsx("p",{className:"text-xs text-gray-500 mb-1",children:"Work Item Type"}),a.jsxs("div",{className:"flex items-center gap-2",children:[D.workItemType&&a.jsx("span",{className:"px-2 py-1 text-xs font-medium bg-[#492434]/10 text-[#492434] rounded",children:D.workItemType}),D.azureDevOpsId&&a.jsx(Yh,{id:D.azureDevOpsId,url:D.azureDevOpsUrl||""})]})]}),D.areaPath&&a.jsxs("div",{children:[a.jsx("p",{className:"text-xs text-gray-500 mb-1",children:"Area Path"}),a.jsx("p",{className:"text-xs text-gray-700 break-words",children:D.areaPath})]}),D.tags&&D.tags.length>0&&a.jsxs("div",{className:"mt-2 pt-2 border-t border-gray-100",children:[a.jsx("p",{className:"text-xs text-gray-500 mb-1",children:"Tags"}),a.jsx("div",{className:"flex flex-wrap gap-1",children:D.tags.map((he,W)=>a.jsx("span",{className:"px-2 py-0.5 text-xs bg-gray-100 text-gray-700 rounded",children:he},W))})]})]},D.id))})}),a.jsxs("div",{className:"flex justify-end space-x-2 pt-4 border-t",children:[a.jsx(at,{variant:"secondary",onClick:()=>V(!1),children:"Cancel"}),a.jsxs(at,{variant:"primary",onClick:async()=>{await B(!1),V(!1)},className:"flex items-center",children:[a.jsx(kn,{className:"h-4 w-4 mr-2"}),"Add ",q.length," Feature",q.length!==1?"s":""]}),a.jsxs(at,{variant:"danger",onClick:async()=>{await B(!0),V(!1)},className:"flex items-center",children:[a.jsx($o,{className:"h-4 w-4 mr-2"}),"Replace All Features"]})]})]}):a.jsxs("div",{className:"text-center py-8",children:[a.jsx(Yt,{className:"h-12 w-12 text-gray-400 mx-auto mb-3"}),a.jsx("p",{className:"text-gray-600",children:"No features found to sync"})]})})}),a.jsx(Jn,{isOpen:_t,onClose:()=>{Ot(!1),it()},title:"Reopen Session",children:a.jsxs("form",{onSubmit:be(Ut),className:"space-y-4",children:[a.jsx("p",{className:"text-gray-600",children:"Capture a brief note so other admins understand why this session is being reopened."}),a.jsx(Kl,{control:_e,name:"reason",rules:{required:"Please select a reason"},render:({field:D})=>a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Reason *"}),a.jsx(K2,{options:lZ,value:D.value,onChange:D.onChange,placeholder:"Select a reason..."}),et.reason&&a.jsx("p",{className:"mt-1 text-sm text-[#591D0F]",children:et.reason.message})]})}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Additional Details (Optional)"}),a.jsx("textarea",{...Dt("details"),rows:3,placeholder:"Add any context you'd like to share with other admins...",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-[#2D4660] focus:border-transparent"})]}),a.jsx("div",{className:"bg-[#1E5461]/5 border border-[#1E5461]/20 rounded-lg p-3 text-sm text-[#1E5461]",children:"This information will appear in the Current Session summary so every admin sees why voting resumed."}),a.jsxs("div",{className:"flex justify-end space-x-2 pt-4",children:[a.jsx(at,{variant:"secondary",type:"button",onClick:()=>{Ot(!1),it()},children:"Cancel"}),a.jsx(at,{variant:"primary",type:"submit",children:"Save & Reopen"})]})]})}),a.jsx(Jn,{isOpen:wt,onClose:()=>{Ct(!1),Ge()},title:"End Session Early",children:a.jsxs("form",{onSubmit:Ye(Pt),className:"space-y-4",children:[a.jsx("p",{className:"text-gray-600",children:"You are about to end this voting session early. Please select a reason:"}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Reason *"}),a.jsxs("select",{...De("reason",{required:"Please select a reason"}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-[#2D4660] focus:border-transparent",children:[a.jsx("option",{value:"",children:"Select a reason..."}),a.jsx("option",{value:"Sufficient Responses",children:"Sufficient responses received"}),a.jsx("option",{value:"Project Cancelled",children:"Project or initiative cancelled"}),a.jsx("option",{value:"Timeline Changed",children:"Timeline or priorities changed"}),a.jsx("option",{value:"Technical Issues",children:"Technical issues or data concerns"}),a.jsx("option",{value:"Stakeholder Request",children:"Stakeholder request"}),a.jsx("option",{value:"Low Participation",children:"Low participation rate"}),a.jsx("option",{value:"Other",children:"Other"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Additional Details (Optional)"}),a.jsx("textarea",{...De("details"),rows:3,placeholder:"Add any additional context or notes...",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-[#2D4660] focus:border-transparent"})]}),a.jsxs("div",{className:"bg-[#C89212]/5 border border-[#C89212]/20 rounded-lg p-3 text-sm text-[#6A4234]",children:[a.jsx("p",{className:"font-medium mb-1",children:"Note:"}),a.jsx("p",{children:"Ending the session will close voting immediately. This action will be logged and visible to all admins."})]}),a.jsxs("div",{className:"flex justify-end space-x-2 pt-4",children:[a.jsx(at,{variant:"secondary",type:"button",onClick:()=>{Ct(!1),Ge()},children:"Cancel"}),a.jsx(at,{variant:"danger",type:"submit",children:"End Session Now"})]})]})}),G&&a.jsx(Jn,{isOpen:!0,onClose:()=>{fe(null),Pe(""),setEditingProductColor(null),Et(!1)},title:"Edit Product",children:a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Product Name *"}),a.jsx("input",{type:"text",value:Ee,onChange:D=>Pe(D.target.value),placeholder:"Enter product name",className:"w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-0 focus:border-[#2D4660]"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Product Color"}),a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("button",{type:"button",onClick:()=>{Le(editingProductColor||"#2D4660"),Et(!0)},className:"block w-12 h-12 rounded-md border-2 border-gray-300 hover:border-gray-400 transition-all flex items-center justify-center overflow-hidden",style:editingProductColor?{backgroundColor:editingProductColor}:{backgroundColor:"#ffffff"},children:!editingProductColor&&a.jsx("img",{src:"/colorpicker.png",alt:"Color Picker",className:"w-8 h-8 object-contain"})}),a.jsx("span",{className:"text-sm text-gray-600",children:editingProductColor||"No color selected"})]})]}),a.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t",children:[a.jsx(at,{variant:"secondary",onClick:()=>{fe(null),Pe(""),setEditingProductColor(null),Et(!1)},disabled:st,children:"Cancel"}),a.jsx(at,{variant:"primary",onClick:async()=>{if(!(!(G!=null&&G.id)||!Ee.trim())){We(!0);try{await Z0(G.id,{name:Ee.trim(),color_hex:editingProductColor});const D=(ye==null?void 0:ye.tenant_id)??(ye==null?void 0:ye.tenantId);if(D){const he=await ra(D);Gr(he.sort((W,Ae)=>W.name.localeCompare(Ae.name)))}fe(null),Pe(""),setEditingProductColor(null),Et(!1),onProductColorUpdated&&onProductColorUpdated()}catch(D){console.error("Error updating product:",D),alert("Failed to update product. Please try again.")}finally{We(!1)}}},disabled:st||!Ee.trim(),children:st?"Updating...":"Update Product"})]})]})}),Tt&&a.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",onClick:()=>Et(!1),children:a.jsx("div",{className:"bg-white rounded-lg shadow-xl px-3 py-2 w-auto mx-4",onClick:D=>D.stopPropagation(),children:a.jsxs("div",{className:"flex gap-3 items-stretch",children:[a.jsxs("div",{className:"flex-shrink-0",style:{width:"240px",height:"260px"},children:[a.jsx("input",{id:"edit-native-color-input",type:"color",value:bt,onChange:D=>Le(D.target.value),ref:D=>{D&&Tt&&setTimeout(()=>D.click(),50)},className:"opacity-0 absolute",style:{width:"1px",height:"1px"}}),a.jsx("div",{className:"w-full h-full"})]}),a.jsxs("button",{type:"button",onClick:()=>{setEditingProductColor(bt),Et(!1)},className:"px-6 rounded-lg text-white font-bold shadow-lg hover:shadow-xl transition-all flex flex-col items-center justify-center gap-3 text-lg flex-shrink-0",style:{backgroundColor:bt,height:"260px",minWidth:"100px"},children:[a.jsx(Fr,{className:"h-8 w-8"}),a.jsxs("div",{className:"text-center leading-tight",children:[a.jsx("div",{children:"Looks"}),a.jsx("div",{children:"Good"})]})]})]})})})]})}const G2=["User Experience","Vendor Management","Analytics & Reporting","Operational Efficiency","Compliance & Risk","Mobile Access","Integration","Sustainability","Budget Management"],fZ={title:"Q2 Product Roadmap",goal:"Prioritize features for the Purchasing Dashboard redesign",votesPerUser:10,useAutoVotes:!0,startDate:new Date().toISOString(),endDate:new Date(Date.now()+10080*60*1e3).toISOString(),isActive:!0,originalEndDate:null,endedEarlyBy:null,endedEarlyReason:null,endedEarlyDetails:null,reopenReason:null,reopenDetails:null,reopenedBy:null,reopenedAt:null,productId:null,productName:null,product_id:null,product_name:null},hZ={organization:"newmill",project:"Product",enabled:!1,workItemType:"Feature"},mZ=[{id:"u1",name:"John Doe",email:"john@example.com",totalVotes:10,usedVotes:0,votesPerFeature:{}},{id:"u2",name:"Jane Smith",email:"jane@example.com",totalVotes:10,usedVotes:0,votesPerFeature:{}},{id:"u3",name:"Robert Johnson",email:"robert@example.com",totalVotes:10,usedVotes:0,votesPerFeature:{}}],hT=(e,t,r)=>e?{label:"System Admin",className:"bg-purple-100 text-purple-800"}:t?{label:"Session Admin",className:"bg-blue-100 text-blue-800"}:r?{label:"Stakeholder",className:"bg-green-100 text-green-800"}:null,mT=e=>{const t=new Date(e),r=new Date;t.setHours(0,0,0,0),r.setHours(0,0,0,0);const n=t.getTime()-r.getTime();return Math.ceil(n/(1e3*60*60*24))},pT=e=>e<=0?"text-[#591D0F]":e<=2?"text-[#6A4234]":e<=4?"text-[#C89212]":"text-[#1E5461]",gT=e=>e<=0?"bg-[#591D0F]/10":e<=2?"bg-[#6A4234]/10":e<=4?"bg-[#C89212]/10":"bg-[#1E5461]/10",pZ=(e,t)=>{const r=new Date(e),n=new Date(t),s=new Date;return r<=s&&s<=n},gZ=e=>{const t=[...e];for(let r=t.length-1;r>0;r--){const n=Math.floor(Math.random()*(r+1));[t[r],t[n]]=[t[n],t[r]]}return t},Kf=(e,t)=>e?e.length>t?`${e.substring(0,t-3)}...`:e:"",xv=e=>{if(!e)return"";const t=document.createElement("div");t.innerHTML=e;let r=t.textContent||t.innerText||"";return r=r.replace(/\s+/g," ").trim(),r},yZ=e=>{const t=e.split("");for(let r=0;r<3;r++){const n=Math.floor(Math.random()*t.length),s=Math.floor(Math.random()*t.length);n!==s&&([t[n],t[s]]=[t[s],t[n]])}return t.join("")};function Bm({src:e,alt:t,style:r,className:n,...s}){const[i,l]=v.useState(!1);return i?a.jsx("div",{className:`inline-block bg-gray-100 text-center align-middle ${n??""}`,style:r,children:a.jsx("div",{className:"flex items-center justify-center w-full h-full",children:a.jsx("img",{src:"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iODgiIGhlaWdodD0iODgiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgc3Ryb2tlPSIjMDAwIiBzdHJva2UtbGluZWpvaW49InJvdW5kIiBvcGFjaXR5PSIuMyIgZmlsbD0ibm9uZSIgc3Ryb2tlLXdpZHRoPSIzLjciPjxyZWN0IHg9IjE2IiB5PSIxNiIgd2lkdGg9IjU2IiBoZWlnaHQ9IjU2IiByeD0iNiIvPjxwYXRoIGQ9Im0xNiA1OCAxNi0xOCAzMiAzMiIvPjxjaXJjbGUgY3g9IjUzIiBjeT0iMzUiIHI9IjciLz48L3N2Zz4KCg==",alt:"Error loading image",...s,"data-original-url":e})})}):a.jsx("img",{src:e,alt:t,className:n,style:r,...s,onError:()=>l(!0)})}const at=vt.memo(function({children:t,onClick:r,variant:n="primary",disabled:s=!1,className:i="",...l}){const u="py-2 px-4 rounded-lg flex items-center transition-colors cursor-pointer",d={primary:"bg-[#2d4660] text-white hover:bg-[#173B65]",secondary:"border border-gray-300 text-gray-700 hover:bg-gray-50",danger:"bg-[#591D0F] text-white hover:bg-[#492434]",gold:"bg-[#C89212] text-white hover:bg-[#E0A814]",blue:"bg-[#173B65] text-white hover:bg-[#1D2C49]",gray:"bg-[#576C71] text-white hover:bg-[#1E5461]"};return a.jsx("button",{onClick:r,disabled:s,className:`${u} ${d[n]} ${s?"opacity-60 cursor-not-allowed":""} ${i}`,...l,children:t})});class Jn extends v.Component{render(){const{isOpen:t,onClose:r,title:n,children:s,maxWidth:i="max-w-2xl"}=this.props;return t?a.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:a.jsxs("div",{className:"flex items-center justify-center min-h-screen p-4 text-center",children:[a.jsx("div",{className:"fixed inset-0 transition-opacity bg-black/50",onClick:r,"aria-hidden":"true"}),a.jsxs("div",{className:`inline-block w-full ${i} p-6 my-8 overflow-hidden text-left align-middle transition-all transform bg-white shadow-xl rounded-lg`,children:[a.jsxs("div",{className:"flex items-start justify-between mb-5",children:[a.jsxs("div",{className:"flex items-center gap-3 bg-[#FFF7E2] border border-[#C89212]/40 rounded-xl px-6 py-3 shadow-sm w-full mr-4",children:[a.jsx("div",{className:"flex items-center justify-center h-10 w-10 rounded-full bg-[#C89212]/15 text-[#C89212]",children:a.jsx(sx,{className:"h-6 w-6"})}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-lg font-semibold text-[#2d4660] tracking-tight",children:n}),a.jsx("p",{className:"text-xs text-[#8A6D3B] font-medium mt-1 uppercase tracking-widest",children:"Spark the roadmap with your ideas"})]})]}),a.jsx("button",{onClick:r,className:"ml-3 text-gray-400 hover:text-gray-500 focus:outline-none",children:a.jsx($s,{className:"h-5 w-5"})})]}),a.jsx("div",{className:"mt-2",children:s})]})]})}):null}}const tc=vt.memo(function({name:t,truncateAt:r=30,className:n}){if(!t)return null;const s=r===null?t:Kf(t,r),i=["flex items-center text-xs text-[#2d4660]",n].filter(Boolean).join(" ");return a.jsxs("div",{className:i,children:[a.jsx(vF,{className:"h-3 w-3 mr-1 text-[#2d4660]"}),a.jsx("span",{className:"font-medium leading-tight break-words",children:s})]})}),Yh=vt.memo(function({id:t,url:r}){return t?a.jsxs("a",{href:r,target:"_blank",rel:"noreferrer",className:"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-blue-100 text-blue-800 hover:bg-blue-200 cursor-pointer",title:"View in Azure DevOps",children:[a.jsx(VM,{className:"h-3 w-3 mr-1"}),"#",t]}):null}),vZ=vt.memo(function({endDate:t}){const r=mT(t),n=pT(r),s=gT(r);return a.jsx("div",{className:`${s} rounded-md p-3 border ${r<=2?"border-[#6A4234]/20":r<=4?"border-[#C89212]/20":"border-[#1E5461]/20"}`,children:a.jsxs("div",{className:"flex items-center",children:[a.jsx(Wr,{className:`h-5 w-5 mr-2 ${n}`}),a.jsxs("div",{children:[a.jsxs("span",{className:`font-medium ${n}`,children:["Voting ends: ",Di(t)]}),a.jsx("div",{className:"text-sm mt-1",children:r<=0?a.jsx("span",{className:"text-red-600 font-medium",children:"Voting ends today!"}):a.jsxs("span",{className:`${n}`,children:[r," ",r===1?"day":"days"," remaining"]})})]})]})})});function xZ({isShuffling:e,onShuffle:t}){const[r,n]=v.useState("Shuffle Features"),s=v.useRef(null);return v.useEffect(()=>(e?s.current=window.setInterval(()=>{n(yZ("Shuffle Features"))},100):s.current!==null&&(window.clearInterval(s.current),n("Shuffle Features")),()=>{s.current!==null&&window.clearInterval(s.current)}),[e]),a.jsxs("button",{onClick:t,className:`py-2 px-4 rounded-lg flex items-center justify-center transition-all duration-300 w-full md:w-auto ${e?"bg-[#C89212] text-white scale-95":"bg-[#C89212] hover:bg-[#A67810] text-white hover:scale-105"}`,disabled:e,children:[a.jsx("span",{className:`transition-transform duration-500 ${e?"mr-2 animate-spin":"mr-2"}`,children:a.jsx(hF,{className:"h-4 w-4"})}),a.jsx("span",{className:"font-medium tracking-wide whitespace-nowrap",children:r})]})}const Gf=vt.memo(function({show:t,title:r,message:n,onConfirm:s,onCancel:i,confirmText:l="Confirm",cancelText:u="Cancel",type:d="delete"}){if(!t)return null;const m=d==="delete"?"bg-[#591D0F]/10":"bg-[#C89212]/10",f=d==="delete"?"text-[#591D0F]":"text-[#C89212]",p=d==="delete"?"bg-[#591D0F] hover:bg-[#492434]":"bg-[#C89212] hover:bg-[#A67810]";return a.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:a.jsxs("div",{className:"relative z-10 bg-white rounded-lg shadow-xl max-w-md w-full mx-auto overflow-hidden",children:[a.jsxs("div",{className:`${m} p-4 flex items-start space-x-4`,children:[a.jsx("div",{className:f,children:d==="delete"?a.jsx(ji,{className:"h-5 w-5"}):a.jsx(Yt,{className:"h-5 w-5"})}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-lg font-medium text-gray-900",children:r}),a.jsx("p",{className:"mt-1 text-sm text-gray-500",children:n})]})]}),a.jsx("div",{className:"p-4 bg-white space-y-4",children:a.jsxs("div",{className:"flex items-center justify-end space-x-3",children:[a.jsx("button",{type:"button",onClick:i,className:"px-4 py-2 border border-gray-300 rounded-md text-sm font-medium text-gray-700 hover:bg-gray-50 cursor-pointer",children:u}),a.jsx("button",{type:"button",onClick:()=>{s(),i()},className:`px-4 py-2 rounded-md text-sm font-medium text-white ${p} cursor-pointer`,children:l})]})})]})})}),wZ=vt.memo(function({feature:t,userVoteCount:r=0,remainingVotes:n=0,votingIsActive:s=!1,onVote:i,isShuffling:l=!1,shuffleStage:u="idle",currentUser:d,onRequestInfo:m}){const[f,p]=v.useState(!1),[y,x]=v.useState(!1),j=async()=>{if(!(!m||y)){x(!0);try{await m(t.id),p(!0)}catch(S){console.error("Error requesting info:",S)}finally{x(!1)}}},b=()=>{switch(u){case"fadeOut":return"opacity-0 scale-95 blur-sm";case"rearranging":return"opacity-0 scale-90";case"fadeIn":return"opacity-100 scale-100 blur-0";default:return"opacity-100 scale-100 blur-0"}};return a.jsx("div",{className:`relative z-10 bg-white rounded-lg shadow-md overflow-hidden transition-all duration-400 ease-in-out ${r>0?"border-2 border-[#1E5461]":""} ${b()}`,children:a.jsxs("div",{className:"p-6 flex flex-col h-full",children:[a.jsx("h3",{className:"text-lg font-semibold mb-2 text-[#2d4660]",children:t.title}),t.azureDevOpsId&&a.jsx("div",{className:"flex justify-end mb-4",children:a.jsx(Yh,{id:t.azureDevOpsId,url:t.azureDevOpsUrl||""})}),t.description?a.jsx("p",{className:"text-gray-600 mb-4 flex-grow",children:t.description}):a.jsxs("div",{className:"mb-4 flex-grow",children:[a.jsx("p",{className:"text-gray-400 italic mb-3",children:"No description provided"}),d&&m&&a.jsx("div",{className:"transition-all duration-300",children:f?a.jsxs("div",{className:"text-sm px-3 py-2 bg-green-50 text-green-700 rounded-md font-medium flex items-center animate-fadeIn",children:[a.jsx(Fr,{className:"h-4 w-4 mr-2 flex-shrink-0"}),a.jsx("span",{children:"Thank you! Your request has been sent."})]}):a.jsxs("button",{onClick:j,disabled:y,className:"text-sm px-3 py-2 bg-blue-50 hover:bg-blue-100 text-[#2d4660] rounded-md font-medium flex items-center transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:[a.jsx(Yt,{className:"h-4 w-4 mr-2 flex-shrink-0"}),a.jsx("span",{children:y?"Sending...":"Ask Product Owner for more info"})]})})]}),i&&a.jsx("div",{className:"mt-auto pt-3",children:a.jsxs("div",{className:`flex items-center mb-3 ${t.epic?"justify-between":"justify-end"}`,children:[t.epic&&a.jsx(tc,{name:t.epic,truncateAt:null,className:"text-sm bg-[#1E5461]/10 px-2 py-1 rounded-md"}),a.jsx("div",{className:"flex items-center space-x-2",children:r===0?a.jsx("button",{onClick:()=>i(t.id,!0),className:`px-6 py-2.5 rounded-lg text-base font-semibold cursor-pointer transition-colors ${s&&n>0?"bg-[#2d4660] text-white hover:bg-[#C89212]":"bg-gray-300 text-gray-600 cursor-not-allowed"}`,disabled:!s||n<=0,children:"Vote"}):a.jsxs(a.Fragment,{children:[a.jsx("button",{onClick:()=>i(t.id,!1),className:"p-2 rounded-full bg-gray-100 hover:bg-gray-200 text-gray-700 cursor-pointer transition-colors","aria-label":"Remove vote",disabled:!s,children:a.jsx(zn,{className:"h-6 w-6"})}),a.jsx("span",{className:"px-4 py-2 bg-[#1E5461]/10 text-[#1E5461] rounded-full font-semibold text-base min-w-[3rem] text-center",children:r}),a.jsx("button",{onClick:()=>i(t.id,!0),className:`p-2 rounded-full cursor-pointer transition-colors ${s&&n>0?"bg-[#2d4660]/10 hover:bg-[#C89212]/30 text-[#2d4660]":"bg-gray-100 text-gray-400 cursor-not-allowed"}`,disabled:!s||n<=0,"aria-label":"Add vote",children:a.jsx(FM,{className:"h-6 w-6"})})]})})]})})]})})});function bZ({feature:e,onClose:t}){return a.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:a.jsxs("div",{className:"relative z-10 bg-white rounded-lg p-6 max-w-md w-full max-h-[80vh] overflow-y-auto",children:[a.jsxs("div",{className:"flex justify-between items-center mb-4",children:[a.jsxs("h3",{className:"text-lg font-medium text-[#2d4660]",children:['Voters for "',e.title,'"']}),a.jsx("button",{onClick:t,className:"text-gray-500 hover:text-gray-700 cursor-pointer",children:a.jsx($s,{className:"h-5 w-5"})})]}),e.voters.length===0?a.jsx("p",{className:"text-gray-500",children:"No votes yet"}):a.jsx("ul",{className:"divide-y divide-gray-200",children:e.voters.map(r=>a.jsxs("li",{className:"py-3 flex justify-between items-center",children:[a.jsxs("div",{children:[a.jsx("p",{className:"font-medium",children:r.name}),a.jsx("p",{className:"text-sm text-gray-500",children:r.email})]}),a.jsxs("div",{className:"bg-[#2d4660]/10 text-[#2d4660] rounded-full px-3 py-1",children:[r.voteCount," ",r.voteCount===1?"vote":"votes"]})]},r.userId))})]})})}function jZ({features:e,onResetVotes:t,onResetAllVotes:r,onBack:n,showVotersList:s,setShowVotersList:i,votingSession:l,effectiveVotesPerUser:u,onLogout:d}){const m=Ss(),[f,p]=v.useState(!1),y=v.useRef(null);v.useEffect(()=>{if(!f)return;const N=E=>{y.current&&!y.current.contains(E.target)&&p(!1)};return document.addEventListener("mousedown",N),document.addEventListener("touchstart",N,{passive:!0}),()=>{document.removeEventListener("mousedown",N),document.removeEventListener("touchstart",N)}},[f]);const x=v.useMemo(()=>[...e].sort((N,E)=>E.votes-N.votes),[e]),j=v.useMemo(()=>x.slice(0,10).map(N=>({name:N.title,votes:N.votes,id:N.id})),[x]),b=mT(l.endDate),S=pT(b);return a.jsxs("div",{className:"container mx-auto p-4 max-w-6xl pb-8",children:[a.jsx("div",{className:"hidden md:flex md:justify-center mb-2",children:a.jsx("img",{src:"https://www.steeldynamics.com/wp-content/uploads/2024/05/New-Millennium-color-logo1.png",alt:"New Millennium Building Systems Logo",className:"-mt-4 cursor-pointer hover:opacity-80 transition-opacity",style:{height:"96px",width:"auto"},onClick:()=>m("/sessions")})}),a.jsxs("div",{className:"flex justify-between items-center mb-6",children:[a.jsxs("div",{className:"flex items-center",children:[a.jsx(Bm,{src:"https://media.licdn.com/dms/image/C4D0BAQEC3OhRqehrKg/company-logo_200_200/0/1630518354793/new_millennium_building_systems_logo?e=2147483647&v=beta&t=LM3sJTmQZet5NshZ-RNHXW1MMG9xSi1asp-VUeSA9NA",alt:"New Millennium Building Systems Logo",className:"mr-4 md:hidden cursor-pointer hover:opacity-80 transition-opacity",style:{width:"40px",height:"40px"},onClick:()=>m("/sessions")}),a.jsx("button",{onClick:n,className:"mr-2 p-1 rounded-full hover:bg-gray-200 cursor-pointer",children:a.jsx(xc,{className:"h-6 w-6"})}),a.jsx("h1",{className:"text-2xl font-bold text-[#2d4660] md:text-3xl",children:Zs(l.endDate)?"Final Voting Results":"Current Voting Results"})]}),a.jsxs("div",{ref:y,className:"relative z-40",children:[a.jsxs("div",{className:"hidden md:flex space-x-2",children:[a.jsxs(at,{variant:"primary",onClick:n,className:"flex items-center",children:[a.jsx(pn,{className:"mr-2 h-4 w-4"}),"Admin Dashboard"]}),a.jsx(at,{variant:"danger",onClick:r,children:"Reset All Votes"}),a.jsxs(at,{variant:"gray",onClick:d,className:"flex items-center",children:[a.jsx(An,{className:"mr-2 h-4 w-4"}),"Logout"]})]}),a.jsx("div",{className:"flex md:hidden",children:a.jsx("button",{onClick:()=>p(!f),className:"p-2 rounded-md border border-gray-200 bg-white shadow-sm","aria-label":"Open menu",children:a.jsx(Rs,{className:"h-5 w-5 text-gray-700"})})}),f&&a.jsx("div",{className:"absolute right-0 mt-2 w-56 bg-white border border-gray-200 rounded-lg shadow-lg md:hidden z-50",children:a.jsxs("div",{className:"py-1",children:[a.jsxs("button",{onClick:()=>{p(!1),n()},className:"w-full px-3 py-2 flex items-center text-left hover:bg-gray-50",children:[a.jsx(pn,{className:"h-4 w-4 mr-2 text-gray-700"}),"Admin Dashboard"]}),a.jsxs("button",{onClick:()=>{p(!1),r()},className:"w-full px-3 py-2 flex items-center text-left hover:bg-gray-50 text-red-600",children:[a.jsx(ji,{className:"h-4 w-4 mr-2"}),"Reset All Votes"]}),a.jsxs("button",{onClick:()=>{p(!1),d()},className:"w-full px-3 py-2 flex items-center text-left hover:bg-gray-50",children:[a.jsx(An,{className:"h-4 w-4 mr-2 text-gray-700"}),"Logout"]})]})})]})]}),a.jsxs("div",{className:"relative z-10 bg-white rounded-lg shadow-md p-4 mb-6",children:[a.jsxs("div",{className:"flex justify-between items-center mb-4",children:[a.jsx("h2",{className:"text-xl font-semibold text-[#2d4660]",children:l.title}),a.jsxs("div",{className:"text-sm text-gray-600",children:[a.jsxs("span",{className:"mr-2",children:["Votes per user: ",u]}),l.isActive?a.jsx("span",{className:"text-[#1E5461] font-medium",children:"Voting Active"}):Zs(l.endDate)?a.jsx("span",{className:"text-[#591D0F] font-medium",children:"Voting Closed"}):a.jsx("span",{className:"text-[#C89212] font-medium",children:"Voting Upcoming"})]})]}),a.jsx("p",{className:"text-gray-600 mb-4",children:l.goal}),l.isActive&&a.jsx("div",{className:`${gT(b)} relative z-10 rounded-md p-3 mb-4 inline-block border ${b<=2?"border-[#6A4234]/20":b<=4?"border-[#C89212]/20":"border-[#1E5461]/20"}`,children:a.jsxs("div",{className:"flex items-center",children:[a.jsx(Wr,{className:`h-4 w-4 mr-2 ${S}`}),a.jsx("span",{className:`${S} font-medium`,children:b<=0?"Voting ends today!":`${b} ${b===1?"day":"days"} remaining until ${Di(l.endDate)}`})]})}),a.jsx("div",{className:"h-72",children:a.jsx(HB,{width:"100%",height:"100%",children:a.jsxs(FX,{data:j,margin:{top:20,right:30,left:20,bottom:60},children:[a.jsx(Q4,{dataKey:"name",angle:-45,textAnchor:"end",height:80,tick:{fontSize:12}}),a.jsx(X4,{}),a.jsx(jK,{}),a.jsx(H4,{dataKey:"votes",fill:"#3B82F6",children:j.map((N,E)=>a.jsx(Pw,{fill:E%2===0?"#2d4660":"#4f6d8e"},`cell-${E}`))})]})})})]}),a.jsxs("div",{className:"relative z-10 bg-white rounded-lg shadow-md p-4",children:[a.jsx("h2",{className:"text-xl font-semibold mb-4 text-[#2d4660]",children:"Feature Details"}),a.jsx("div",{className:"w-full overflow-x-auto",children:a.jsxs("table",{className:"min-w-full divide-y divide-gray-200 table-fixed",children:[a.jsx("thead",{className:"bg-gray-50",children:a.jsxs("tr",{children:[a.jsx("th",{scope:"col",className:"w-12 px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Rank"}),a.jsx("th",{scope:"col",className:"w-1/2 px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Title"}),a.jsx("th",{scope:"col",className:"hidden sm:table-cell w-1/4 px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Epic"}),a.jsx("th",{scope:"col",className:"w-14 px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Votes"}),a.jsx("th",{scope:"col",className:"hidden md:table-cell w-20 px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Voters"}),a.jsx("th",{scope:"col",className:"w-20 px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),a.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:x.map((N,E)=>a.jsxs("tr",{className:"align-top group",children:[a.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm font-medium",children:E+1}),a.jsxs("td",{className:"px-4 py-4 whitespace-normal break-words text-sm font-medium",children:[N.title,N.azureDevOpsId&&a.jsx("div",{className:"mt-1",children:a.jsx(Yh,{id:N.azureDevOpsId,url:N.azureDevOpsUrl||""})})]}),a.jsx("td",{className:"hidden sm:table-cell px-4 py-4 whitespace-nowrap text-sm",children:N.epic&&a.jsx(tc,{name:N.epic})}),a.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm",children:N.votes}),a.jsx("td",{className:"hidden md:table-cell px-4 py-4 whitespace-nowrap text-sm",children:a.jsxs("button",{onClick:()=>i(N.id),className:"text-[#2d4660] hover:text-[#C89212] flex items-center cursor-pointer",disabled:N.voters.length===0,children:[a.jsx(Un,{className:"h-4 w-4 mr-1"}),N.voters.length," ",N.voters.length===1?"user":"users"]})}),a.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm md:opacity-0 md:group-hover:opacity-100 transition-opacity",children:a.jsx("button",{onClick:()=>t(N.id),className:"text-[#591D0F] hover:text-[#492434] cursor-pointer",disabled:N.votes===0,children:"Reset Votes"})})]},N.id))})]})})]}),s&&a.jsx(bZ,{feature:e.find(N=>N.id===s),onClose:()=>i(null)})]})}function SZ({navigate:e,votingSession:t}){return a.jsx("div",{className:"relative z-10 flex flex-col items-center justify-center min-h-[80vh] p-6",children:a.jsxs("div",{className:"relative z-10 w-full max-w-md bg-white rounded-lg shadow-lg p-8 text-center",children:[a.jsx("img",{src:"https://www.steeldynamics.com/wp-content/uploads/2024/05/New-Millennium-color-logo1.png",alt:"New Millennium Building Systems Logo",className:"mx-auto mb-6",style:{maxWidth:"200px",height:"auto"}}),a.jsx("div",{className:"w-20 h-20 bg-[#1E5461]/10 rounded-full flex items-center justify-center mx-auto mb-6",children:a.jsx(Fr,{className:"h-12 w-12 text-[#1E5461]"})}),a.jsx("h1",{className:"text-3xl font-bold text-[#1E5461] mb-4",children:"Thank You!"}),a.jsxs("p",{className:"text-gray-700 text-lg mb-6",children:["Your votes for ",a.jsx("span",{className:"font-semibold",children:t.title})," have been submitted successfully."]}),a.jsx("p",{className:"text-gray-600 mb-8",children:"We appreciate your input in helping prioritize features for our product roadmap."}),a.jsx(at,{variant:"primary",onClick:()=>e("/sessions"),className:"mx-auto",children:"View All Voting Sessions"})]})})}function yT({currentRole:e="stakeholder",onSelectStakeholder:t,onSelectSessionAdmin:r,onSelectSystemAdmin:n,showRoleToggle:s=!0}){const i=new Date().getFullYear(),l=[];(t||e==="stakeholder")&&l.push({key:"stakeholder",label:"Stakeholder View",icon:a.jsx(Un,{className:"h-4 w-4 inline mr-2"}),onClick:t}),(r||e==="session-admin")&&l.push({key:"session-admin",label:"Session Admin",icon:a.jsx(Cn,{className:"h-4 w-4 inline mr-2"}),onClick:r}),(n||e==="system-admin")&&l.push({key:"system-admin",label:"System Admin",icon:a.jsx(vs,{className:"h-4 w-4 inline mr-2"}),onClick:n});const u=["stakeholder","session-admin","system-admin"];l.sort((m,f)=>{const p=u.indexOf(m.key),y=u.indexOf(f.key);return p-y});const d=s&&l.length>0;return a.jsx("footer",{className:"mt-auto bg-gray-50 border-t border-gray-200",children:a.jsxs("div",{className:"container mx-auto px-4 py-6 max-w-6xl",children:[d&&a.jsx("div",{className:"flex justify-center mb-6",children:a.jsx("div",{className:"inline-flex items-center bg-gray-100 rounded-lg p-1",children:l.map(({key:m,label:f,icon:p,onClick:y})=>{const x=e===m,j=!y;return a.jsxs("button",{onClick:y,disabled:j,className:`px-4 py-2 rounded-md text-sm font-medium transition-colors flex items-center ${x?"bg-white text-[#2d4660] shadow-sm":"text-gray-600 hover:text-gray-900"} ${j&&!x?"opacity-60 cursor-not-allowed":""}`,children:[p,a.jsx("span",{children:f})]},m)})})}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 text-sm text-gray-600",children:[a.jsxs("div",{children:[a.jsx("h3",{className:"font-semibold text-gray-900 mb-2",children:"New Millennium Building Systems"}),a.jsxs("p",{className:"text-xs leading-relaxed",children:["A Steel Dynamics Company",a.jsx("br",{}),"Innovation in structural steel manufacturing"]})]}),a.jsxs("div",{children:[a.jsx("h3",{className:"font-semibold text-gray-900 mb-2",children:"Quick Links"}),a.jsxs("ul",{className:"space-y-1 text-xs",children:[a.jsx("li",{children:a.jsx("a",{href:"https://www.steeldynamics.com",target:"_blank",rel:"noopener noreferrer",className:"hover:text-[#2d4660] transition-colors",children:"Steel Dynamics Inc."})}),a.jsx("li",{children:a.jsx("a",{href:"https://www.newmill.com",target:"_blank",rel:"noopener noreferrer",className:"hover:text-[#2d4660] transition-colors",children:"New Millennium"})})]})]}),a.jsxs("div",{children:[a.jsx("h3",{className:"font-semibold text-gray-900 mb-2",children:"Need Help?"}),a.jsx("p",{className:"text-xs",children:"Contact your Product Owner or session administrator for assistance with voting."})]})]}),a.jsx("div",{className:"mt-6 pt-6 border-t border-gray-200 text-center text-xs text-gray-500",children:a.jsxs("p",{children:[" ",i," New Millennium Building Systems, LLC. All rights reserved."]})})]})})}function Y2({feature:e,onSubmit:t,onCancel:r}){const{register:n,handleSubmit:s,formState:{errors:i}}=Tu({defaultValues:e?{title:e.title,description:e.description,epic:e.epic}:{epic:G2[0]}});return a.jsxs("form",{onSubmit:s(t),children:[a.jsxs("div",{className:"mb-4",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Title"}),a.jsx("input",{...n("title",{required:"Title is required"}),className:"w-full px-3 py-2 border border-gray-300 rounded-md"}),i.title&&a.jsx("p",{className:"mt-1 text-sm text-red-600",children:i.title.message})]}),a.jsxs("div",{className:"mb-4",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),a.jsx("textarea",{...n("description",{required:"Description is required"}),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-md"}),i.description&&a.jsx("p",{className:"mt-1 text-sm text-red-600",children:i.description.message})]}),a.jsxs("div",{className:"mb-4",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Epic"}),a.jsx("select",{...n("epic",{required:"Epic is required"}),className:"w-full px-3 py-2 border border-gray-300 rounded-md bg-white",children:G2.map(l=>a.jsx("option",{value:l,children:l},l))}),i.epic&&a.jsx("p",{className:"mt-1 text-sm text-red-600",children:i.epic.message})]}),a.jsxs("div",{className:"flex justify-end space-x-2 mt-6",children:[a.jsx(at,{variant:"secondary",type:"button",onClick:r,children:"Cancel"}),a.jsxs(at,{variant:"primary",type:"submit",children:[e?"Update":"Add"," Feature"]})]})]})}function _Z({currentUser:e,votingSession:t,onChangeVotes:r,onToggleAdmin:n,isAdmin:s,navigate:i,userVotes:l,features:u,isSystemAdmin:d,isSessionAdmin:m,isStakeholder:f}){const[p,y]=v.useState(!1),x=Object.values(l).reduce((S,N)=>S+N,0),j=u.filter(S=>l[S.id]>0),b=hT(d,m,f);return a.jsxs("div",{className:"container mx-auto p-4 max-w-6xl min-h-screen pb-8",children:[a.jsx("div",{className:"hidden md:flex md:justify-center mb-2",children:a.jsx("img",{src:"https://www.steeldynamics.com/wp-content/uploads/2024/05/New-Millennium-color-logo1.png",alt:"New Millennium Building Systems Logo",className:"-mt-4 cursor-pointer hover:opacity-80 transition-opacity",style:{height:"96px",width:"auto"},onClick:()=>i("/sessions")})}),a.jsxs("div",{className:"flex flex-col md:flex-row md:justify-between md:items-center mb-6",children:[a.jsxs("div",{className:"flex items-start md:items-center",children:[a.jsx(Bm,{src:"https://media.licdn.com/dms/image/C4D0BAQEC3OhRqehrKg/company-logo_200_200/0/1630518354793/new_millennium_building_systems_logo?e=2147483647&v=beta&t=LM3sJTmQZet5NshZ-RNHXW1MMG9xSi1asp-VUeSA9NA",alt:"New Millennium Building Systems Logo",className:"mr-4 md:hidden",style:{width:"40px",height:"40px"}}),a.jsxs("div",{children:[a.jsx("h1",{className:"text-2xl font-bold text-[#2d4660] md:text-3xl",children:"Feature Voting"}),a.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:["Welcome, ",e==null?void 0:e.name,(e==null?void 0:e.email)&&a.jsxs("a",{href:`mailto:${e.email}`,className:"ml-2 text-[#2D4660] hover:underline",children:["(",e.email,")"]}),b&&a.jsx("span",{className:`ml-2 inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium ${b.className}`,children:b.label})]})]})]}),a.jsxs("div",{className:"relative z-10 flex items-center space-x-2 mt-3 md:mt-0 md:justify-end",children:[s&&a.jsxs(at,{variant:"primary",onClick:n,className:"flex items-center",children:[a.jsx(pn,{className:"mr-2 h-4 w-4"}),a.jsx("span",{className:"hidden md:inline",children:"Admin Dashboard"}),a.jsx("span",{className:"md:hidden",children:"Admin"})]}),a.jsxs(at,{variant:"gray",onClick:()=>i("/sessions"),className:"flex items-center",children:[a.jsx(An,{className:"mr-2 h-4 w-4"}),a.jsx("span",{className:"hidden md:inline",children:"All Sessions"}),a.jsx("span",{className:"md:hidden",children:"Sessions"})]})]})]}),a.jsx("div",{className:"max-w-3xl mx-auto",children:a.jsxs("div",{className:"relative z-10 bg-white rounded-lg shadow-lg p-8 text-center",children:[a.jsx("div",{className:"w-20 h-20 bg-[#1E5461]/10 rounded-full flex items-center justify-center mx-auto mb-6",children:a.jsx(Fr,{className:"h-12 w-12 text-[#1E5461]"})}),a.jsx("h2",{className:"text-3xl font-bold text-[#1E5461] mb-4",children:"Votes Already Submitted"}),a.jsxs("p",{className:"text-gray-700 text-lg mb-2",children:["Welcome back, ",a.jsx("span",{className:"font-semibold",children:e.name}),"!"]}),a.jsxs("p",{className:"text-gray-600 mb-6",children:["You have already submitted your votes for ",a.jsx("span",{className:"font-semibold",children:t.title}),"."]}),a.jsxs("div",{className:"bg-gray-50 rounded-lg p-6 mb-6",children:[a.jsx("h3",{className:"text-lg font-semibold text-[#2d4660] mb-4",children:"Your Current Votes"}),a.jsxs("div",{className:"space-y-3",children:[j.map(S=>a.jsxs("div",{className:"flex justify-between items-start gap-4",children:[a.jsxs("div",{children:[a.jsx("span",{className:"block text-gray-700 font-medium",children:S.title}),S.epic&&a.jsx("div",{className:"mt-1",children:a.jsx(tc,{name:S.epic,truncateAt:null,className:"text-xs bg-[#1E5461]/10 px-2 py-0.5 rounded"})})]}),a.jsxs("span",{className:"bg-[#1E5461]/10 text-[#1E5461] rounded-full px-3 py-1 font-medium self-center",children:[l[S.id]," ",l[S.id]===1?"vote":"votes"]})]},S.id)),a.jsx("div",{className:"border-t border-gray-200 pt-3 mt-3",children:a.jsxs("div",{className:"flex justify-between items-center font-semibold",children:[a.jsx("span",{className:"text-[#2d4660]",children:"Total Votes"}),a.jsx("span",{className:"text-[#2d4660]",children:x})]})})]})]}),a.jsx("div",{className:"bg-[#C89212]/10 border border-[#C89212]/20 rounded-lg p-4 mb-6",children:a.jsxs("div",{className:"flex items-start text-left",children:[a.jsx(yE,{className:"h-5 w-5 text-[#C89212] mr-3 mt-0.5 flex-shrink-0"}),a.jsx("div",{children:a.jsxs("p",{className:"text-sm text-gray-700",children:["If you'd like to change your votes, you can do so below. However, please note that this will",a.jsx("span",{className:"font-semibold",children:" permanently remove your previous votes"})," and allow you to vote again. This action cannot be undone."]})})]})}),a.jsxs(at,{variant:"gold",onClick:()=>y(!0),className:"mx-auto text-lg py-3 px-8",children:[a.jsx($o,{className:"mr-2 h-5 w-5"}),"Change My Votes"]})]})}),a.jsx(Gf,{show:p,title:"Change Your Votes?",message:"This will permanently remove all your previous votes for this session and allow you to vote again. This action cannot be undone. Are you sure you want to continue?",onConfirm:r,onCancel:()=>y(!1),confirmText:"Yes, Change My Votes",cancelText:"Cancel",type:"reset"})]})}const NZ=vt.memo(function({features:t,currentUser:r,pendingVotes:n,pendingUsedVotes:s,onVote:i,onSubmitVotes:l,onToggleAdmin:u,isAdmin:d,votingSession:m,navigate:f,effectiveVotesPerUser:p,sessionId:y,onLogout:x,onSuggestionSubmitted:j,isSystemAdmin:b,isSessionAdmin:S,isStakeholder:N}){const[E,k]=v.useState([...t]),[T,O]=v.useState(!1),[P,R]=v.useState("idle"),[q,F]=v.useState(!1),[V,B]=v.useState({}),[Q,ae]=v.useState(!0),[ne,me]=v.useState(!1),[K,te]=v.useState(!1),[se,de]=v.useState(""),[xe,I]=v.useState(""),[H,Ie]=v.useState(""),[X,ve]=v.useState(""),[ce,ge]=v.useState(!1),[ye,L]=v.useState(null),[Fe,Me]=v.useState(!1),ee=v.useRef(null),Ke=hT(b,S,N);v.useEffect(()=>{if(!ne)return;const ue=we=>{ee.current&&!ee.current.contains(we.target)&&me(!1)};return document.addEventListener("mousedown",ue),document.addEventListener("touchstart",ue,{passive:!0}),()=>{document.removeEventListener("mousedown",ue),document.removeEventListener("touchstart",ue)}},[ne]),v.useEffect(()=>{k([...t])},[t]),v.useEffect(()=>{async function ue(){if(!r||!y){ae(!1);return}try{const je=(await Hl(y)).filter(ze=>ze.user_id===r.id);if(je.length>0){const ze={};je.forEach(ot=>{ze[ot.feature_id]=ot.vote_count}),B(ze),F(!0)}else F(!1),B({})}catch(we){console.error("Error checking existing votes:",we),F(!1)}finally{ae(!1)}}ue()},[r,y]);const Xe=v.useCallback(async()=>{if(!(!r||!y))try{await h6(y,r.id),F(!1),B({})}catch(ue){console.error("Error changing votes:",ue),alert("Failed to reset votes. Please try again.")}},[r,y]),ft=v.useCallback(()=>{T||(O(!0),R("fadeOut"),setTimeout(()=>{R("rearranging"),setTimeout(()=>{k(gZ(t)),R("fadeIn"),setTimeout(()=>{R("idle"),O(!1)},400)},200)},400))},[t,T]),wt=v.useCallback(async ue=>{const we=t.find(je=>je.id===ue);if(!(!we||!r))try{await v6({session_id:y,feature_id:ue,feature_title:we.title,requester_id:r.id,requester_name:r.name,requester_email:r.email,created_at:new Date().toISOString()})}catch(je){throw console.error("Error submitting info request:",je),alert("Failed to submit request. Please try again."),je}},[t,r,y]),Ct=v.useCallback(()=>{L(null),Me(!1),te(!0)},[]),_t=v.useCallback(()=>{ce||(te(!1),L(null),Me(!1),de(""),I(""),Ie(""),ve(""))},[ce]),Ot=v.useCallback(async ue=>{ue.preventDefault();const we=se.trim(),je=xe.trim(),ze=H.trim(),ot=X.trim();if(!we){L("Please provide a brief title for your suggestion.");return}if(!y){L("Unable to link this suggestion to the current session.");return}try{ge(!0),L(null);const pt=await x6({session_id:y,title:we,description:je||null,requester_id:(r==null?void 0:r.id)??null,requester_name:(r==null?void 0:r.name)??null,requester_email:(r==null?void 0:r.email)??null,whatWouldItDo:ze||null,howWouldItWork:ot||null});j==null||j(pt),Me(!0),de(""),I(""),Ie(""),ve("")}catch(pt){console.error("Error submitting feature suggestion:",pt),L("We were unable to submit your suggestion. Please try again in a moment.")}finally{ge(!1)}},[xe,se,H,X,r,y,ce,j]);if(!r)return null;if(Q)return a.jsx("div",{className:"container mx-auto p-4 max-w-6xl min-h-screen flex items-center justify-center",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-[#2d4660] mx-auto mb-4"}),a.jsx("p",{className:"text-gray-600",children:"Loading your voting status..."})]})});if(q)return a.jsx(_Z,{currentUser:r,votingSession:m,onChangeVotes:Xe,onToggleAdmin:u,isAdmin:d,navigate:f,userVotes:V,features:t,isSystemAdmin:b,isSessionAdmin:S,isStakeholder:N});const $=p-s,Y=$===0,oe=m.isActive;return a.jsxs("div",{className:"container mx-auto p-4 max-w-6xl pb-8",children:[a.jsx("div",{className:"hidden md:flex md:justify-center mb-2",children:a.jsx("img",{src:"https://www.steeldynamics.com/wp-content/uploads/2024/05/New-Millennium-color-logo1.png",alt:"New Millennium Building Systems Logo",className:"-mt-4 cursor-pointer hover:opacity-80 transition-opacity",style:{height:"96px",width:"auto"},onClick:()=>f("/sessions")})}),a.jsxs("div",{className:"flex justify-between items-center mb-6",children:[a.jsxs("div",{className:"flex items-start md:items-center",children:[a.jsx(Bm,{src:"https://media.licdn.com/dms/image/C4D0BAQEC3OhRqehrKg/company-logo_200_200/0/1630518354793/new_millennium_building_systems_logo?e=2147483647&v=beta&t=LM3sJTmQZet5NshZ-RNHXW1MMG9xSi1asp-VUeSA9NA",alt:"New Millennium Building Systems Logo",className:"mr-4 md:hidden",style:{width:"40px",height:"40px"}}),a.jsxs("div",{children:[a.jsx("h1",{className:"text-2xl font-bold text-[#2d4660] md:text-3xl",children:"Feature Voting"}),a.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:["Welcome, ",r==null?void 0:r.name,(r==null?void 0:r.email)&&a.jsxs("a",{href:`mailto:${r.email}`,className:"ml-2 text-[#2D4660] hover:underline",children:["(",r.email,")"]}),Ke&&a.jsx("span",{className:`ml-2 inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium ${Ke.className}`,children:Ke.label})]})]})]}),a.jsxs("div",{ref:ee,className:"relative z-40",children:[a.jsxs("div",{className:"hidden md:flex items-center space-x-2",children:[d&&a.jsxs(at,{variant:"primary",onClick:u,className:"flex items-center",children:[a.jsx(pn,{className:"mr-2 h-4 w-4"}),"Admin Dashboard"]}),a.jsx(at,{variant:"gray",onClick:()=>f("/sessions"),className:"flex items-center",children:"All Sessions"}),a.jsxs(at,{variant:"gray",onClick:x,className:"flex items-center",children:[a.jsx(An,{className:"mr-2 h-4 w-4"}),"Logout"]})]}),a.jsx("div",{className:"flex md:hidden",children:a.jsx("button",{onClick:()=>me(!ne),className:"p-2 rounded-md border border-gray-200 bg-white shadow-sm","aria-label":"Open menu",children:a.jsx(Rs,{className:"h-5 w-5 text-gray-700"})})}),ne&&a.jsx("div",{className:"absolute right-0 mt-2 w-56 bg-white border border-gray-200 rounded-lg shadow-lg md:hidden z-50",children:a.jsxs("div",{className:"py-1",children:[d&&a.jsxs("button",{onClick:()=>{me(!1),u()},className:"w-full px-3 py-2 flex items-center text-left hover:bg-gray-50",children:[a.jsx(pn,{className:"h-4 w-4 mr-2 text-gray-700"}),"Admin Dashboard"]}),a.jsx("button",{onClick:()=>{me(!1),f("/sessions")},className:"w-full px-3 py-2 flex items-center text-left hover:bg-gray-50",children:"All Sessions"}),a.jsxs("button",{onClick:()=>{me(!1),x()},className:"w-full px-3 py-2 flex items-center text-left hover:bg-gray-50",children:[a.jsx(An,{className:"h-4 w-4 mr-2 text-gray-700"}),"Logout"]})]})})]})]}),a.jsx("div",{className:"relative z-10 mb-6 bg-white rounded-lg shadow-md p-4",children:a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[a.jsxs("div",{className:"md:col-span-2",children:[a.jsx("h2",{className:"text-xl font-semibold text-[#2d4660] mb-2",children:m.title}),a.jsx("p",{className:"text-gray-600",children:m.goal})]}),a.jsxs("div",{className:"flex flex-col justify-center",children:[a.jsx(vZ,{endDate:m.endDate}),a.jsxs("div",{className:"flex items-center mt-3",children:[a.jsx(Fn,{className:"h-4 w-4 mr-2 text-[#2d4660]"}),a.jsxs("p",{className:"text-gray-700",children:["You have ",a.jsxs("span",{className:"font-bold text-[#2d4660]",children:[$," / ",p]})," votes remaining"]})]})]})]})}),!oe&&a.jsx("div",{className:"mb-6 bg-[#C89212]/10 p-4 rounded-lg border border-[#C89212]/20",children:a.jsxs("div",{className:"flex items-center text-[#6A4234]",children:[a.jsx(im,{className:"h-5 w-5 mr-2"}),a.jsxs("span",{className:"font-medium",children:["Voting is currently ",Zs(m.endDate)?"closed":"not yet open",".",Zs(m.endDate)?` Voting ended on ${Di(m.endDate)}.`:` Voting will open on ${Di(m.startDate)}.`]})]})}),a.jsxs("div",{className:"flex flex-col md:flex-row md:justify-between md:items-center mb-4 gap-3",children:[a.jsx("h2",{className:"text-xl font-semibold text-[#2d4660]",children:"Available Features"}),a.jsxs("div",{className:"flex flex-col md:flex-row items-stretch md:items-center gap-3",children:[a.jsxs(at,{variant:"gold",onClick:Ct,className:"flex items-center justify-center w-full md:w-auto",children:[a.jsx(sx,{className:"h-4 w-4 mr-2"}),"Suggest a Feature"]}),t.length>6&&a.jsx(xZ,{isShuffling:T,onShuffle:ft})]})]}),a.jsx("div",{className:`grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 ${s>0?"mb-32":""}`,children:E.map(ue=>{const we=n[ue.id]||0;return a.jsx(wZ,{feature:ue,userVoteCount:we,remainingVotes:$,votingIsActive:oe,onVote:i,isShuffling:T,shuffleStage:P,currentUser:r,onRequestInfo:wt},ue.id)})}),s>0&&a.jsx("div",{className:"fixed bottom-0 left-0 right-0 bg-white shadow-lg border-t border-gray-200 p-4",children:a.jsxs("div",{className:"container mx-auto max-w-6xl flex items-center justify-between",children:[a.jsxs("div",{children:[!Y&&a.jsxs("div",{className:"flex items-center",children:[a.jsx(yE,{className:"h-5 w-5 text-[#C89212] mr-2"}),a.jsxs("span",{className:"text-gray-700",children:["You still have ",a.jsx("span",{className:"font-semibold text-[#C89212]",children:$})," votes remaining."]})]}),Y&&a.jsxs("div",{className:"flex items-center",children:[a.jsx(Fr,{className:"h-5 w-5 text-[#1E5461] mr-2"}),a.jsx("span",{className:"text-gray-700",children:"All votes allocated! You can now submit your votes."})]})]}),a.jsx("button",{onClick:l,className:`py-3 px-6 rounded-lg font-medium cursor-pointer ${Y?"bg-[#1E5461] hover:bg-[#173B65] text-white":"bg-gray-300 text-gray-600 cursor-not-allowed"}`,disabled:!Y,children:"Submit Votes"})]})}),a.jsx(Jn,{isOpen:K,onClose:_t,title:"Suggest a Feature",maxWidth:"max-w-lg",children:a.jsxs("form",{onSubmit:Ot,className:"space-y-4",children:[a.jsxs("div",{className:"bg-[#1E5461]/10 border border-[#1E5461]/30 text-sm text-[#1E5461] rounded-md px-3 py-2",children:["All suggested features will be reviewed for ",a.jsx("strong",{children:"future sessions"}),".",a.jsx("br",{}),"Suggestions will not be added to the current session."]}),ye&&a.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 text-sm rounded-md px-3 py-2",children:ye}),Fe&&a.jsx("div",{className:"bg-green-50 border border-green-200 text-green-700 text-sm rounded-md px-3 py-2",children:"Thank you! Your suggestion has been recorded."}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Feature title"}),a.jsx("input",{type:"text",value:se,onChange:ue=>de(ue.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md",placeholder:"Give your feature a name",disabled:ce||Fe})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"What problem would this solve? (optional)"}),a.jsx("textarea",{value:xe,onChange:ue=>I(ue.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md",rows:4,placeholder:"Share a few details so we understand the request.",disabled:ce||Fe})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"What would it do? (optional)"}),a.jsx("textarea",{value:H,onChange:ue=>Ie(ue.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md",rows:3,placeholder:"Describe the functionality or outcome users would experience.",disabled:ce||Fe})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"How would it work? (optional)"}),a.jsx("textarea",{value:X,onChange:ue=>ve(ue.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md",rows:3,placeholder:"Share any ideas on workflow, technical approach, or integration.",disabled:ce||Fe})]}),a.jsxs("div",{className:"flex justify-end gap-2",children:[a.jsx(at,{type:"button",variant:"secondary",onClick:_t,disabled:ce,children:"Close"}),!Fe&&a.jsxs(at,{type:"submit",variant:"primary",disabled:ce,className:"flex items-center",children:[ce&&a.jsx($o,{className:"h-4 w-4 animate-spin mr-2"}),"Submit Suggestion"]})]})]})})]})});function wv({defaultVotesPerUser:e=10,adminMode:t=!1,resultsMode:r=!1}){const{currentSession:n,currentUser:s,setCurrentUser:i,setCurrentSession:l,refreshSessions:u,isSystemAdmin:d,isAdmin:m,isStakeholder:f}=Ui(),p=Ss(),y=async()=>{try{await Ue.auth.signOut()}catch{}try{l(null)}catch{}i(null);try{localStorage.removeItem("voting_system_current_session"),localStorage.removeItem("azureDevOpsAuthInProgress"),sessionStorage.removeItem("oauth_return_path"),sessionStorage.removeItem("oauth_action")}catch{}p("/login",{replace:!0})};v.useEffect(()=>{const G=new URLSearchParams(window.location.search),fe=G.has("code")||G.has("error"),Ee=localStorage.getItem("voting_system_current_session");!n&&!fe&&!Ee&&p("/sessions")},[n,p]);const x=v.useMemo(()=>{const G=new URLSearchParams(window.location.search);return G.has("code")||G.has("error")},[]),[j,b]=v.useState([]),[S,N]=v.useState(!0),[E,k]=v.useState(mZ),[T,O]=v.useState(r?"results":t||x?"admin":"voting"),[P,R]=v.useState(t||x||r),[q,F]=v.useState(null),[V,B]=v.useState(!1),[Q,ae]=v.useState(null),[ne,me]=v.useState({...fZ,votesPerUser:e}),[K,te]=v.useState(hZ),[se,de]=v.useState(B2()),[xe,I]=v.useState([]),[H,Ie]=v.useState([]),[X,ve]=v.useState([]),[ce,ge]=v.useState(!1),[ye,L]=v.useState(null),[Fe,Me]=v.useState(null),[ee,Ke]=v.useState(!1),[Xe,ft]=v.useState([]),[wt,Ct]=v.useState([]),[_t,Ot]=v.useState(d?"system":"session"),[$,Y]=v.useState({}),[oe,ue]=v.useState(0),[we,je]=v.useState({showReset:!1,showResetAll:!1,showDeleteSession:!1,targetId:null}),[ze,ot]=v.useState(!1),pt=v.useRef(!1),It=v.useMemo(()=>ne.useAutoVotes?Math.max(1,Math.floor(j.length/2)):ne.votesPerUser,[ne.useAutoVotes,ne.votesPerUser,j.length]),Or=v.useRef(!1);v.useEffect(()=>{if(Or.current){console.log("OAuth processing already in progress, skipping...");return}(async()=>{const fe=new URLSearchParams(window.location.search),Ee=fe.has("code")||fe.has("error");if(Ee&&!n){console.log("OAuth callback detected, waiting for session to load..."),localStorage.getItem("voting_system_current_session")&&console.log("Found stored session ID, waiting for SessionContext to restore it...");return}if(localStorage.getItem("azureDevOpsAuthInProgress")&&localStorage.removeItem("azureDevOpsAuthInProgress"),!(!Ee||pt.current)){if(!n){console.log("No session available yet, waiting...");return}Or.current=!0,pt.current=!0,console.log("Processing OAuth callback with session:",n.id);try{const st=await ZX();if(st){const We=new Date(Date.now()+st.expiresIn*1e3).toISOString(),Tt={...K,accessToken:st.accessToken,refreshToken:st.refreshToken,tokenExpiresAt:We,enabled:!0,clientId:zs.clientId,tenantId:zs.tenantId};await Rl(n.id,Tt),te(Tt);const Et=sessionStorage.getItem("oauth_return_path")||"/admin";sessionStorage.removeItem("oauth_return_path"),console.log("OAuth successful, navigating to:",Et),p(Et,{replace:!0})}}catch(st){console.error("OAuth callback error:",st),L("Failed to authenticate with Azure DevOps");const We="/admin";sessionStorage.removeItem("oauth_return_path"),p(We,{replace:!0})}finally{Or.current=!1}}})()},[n,p,K]);const Wt=v.useCallback(G=>{localStorage.setItem("azureDevOpsAuthInProgress","true"),G&&sessionStorage.setItem("oauth_action",G),sessionStorage.getItem("oauth_return_path")||sessionStorage.setItem("oauth_return_path","/admin"),eZ()},[]),Lt=v.useCallback(async G=>{if(!G.accessToken||!G.refreshToken||!G.tokenExpiresAt)throw new Error("Not authenticated");if(XX(G.tokenExpiresAt)){const fe=await VX(G.refreshToken),Ee=new Date(Date.now()+fe.expiresIn*1e3).toISOString(),Pe={...G,accessToken:fe.accessToken,tokenExpiresAt:Ee};return n&&(await Rl(n.id,Pe),te(Pe)),fe.accessToken}return G.accessToken},[n]),fr=v.useCallback(async()=>{if(!n)return[];const[G,fe]=await Promise.all([Ha(n.id),Hl(n.id)]);return G.map(Ee=>{const st=fe.filter(Tt=>Tt.feature_id===Ee.id).map(Tt=>({userId:Tt.user_id,name:Tt.user_name,email:Tt.user_email,voteCount:Tt.vote_count})),We=st.reduce((Tt,Et)=>Tt+Et.voteCount,0);return{id:Ee.id,title:Ee.title,description:Ee.description,epic:Ee.epic,state:Ee.state,areaPath:Ee.area_path,tags:Ee.tags||[],azureDevOpsId:Ee.azure_devops_id,azureDevOpsUrl:Ee.azure_devops_url,votes:We,voters:st}})},[n]),Ft=v.useCallback(async()=>{if(n)try{const G=await _6(n.id);ft(G)}catch(G){console.error("Error loading feature suggestions:",G)}},[n]),Lr=v.useCallback(async()=>{if(n)try{const G=await ha(),fe=new Date,Ee=G.filter(Pe=>Pe.id!==n.id&&new Date(Pe.start_date)>fe).map(Pe=>({id:Pe.id,title:Pe.title,startDate:Pe.start_date}));Ct(Ee)}catch(G){console.error("Error loading future sessions:",G)}},[n]),Kr=v.useCallback(G=>{ft(fe=>[G,...fe]),Ft(),Lr()},[Ft,Lr]),Ve=v.useCallback(async(G,fe)=>{await w6(G,fe),await Ft()},[Ft]),zt=v.useCallback(async G=>{await b6(G),await Ft()},[Ft]),Xt=v.useCallback(async(G,fe)=>{await j6(G,fe),await Ft()},[Ft]),Sr=v.useCallback(async G=>{await S6(G);const fe=await fr();b(fe),await Ft()},[fr,Ft]);v.useEffect(()=>{async function G(){if(n)try{console.log("Loading data from Supabase for session:",n.id),N(!0);const fe=await fr();console.log(`Loaded ${fe.length} features from database`),b(fe),console.log("Features with votes loaded:",fe.map(Pe=>Pe.title)),me({title:n.title,goal:n.goal,votesPerUser:n.votes_per_user,useAutoVotes:n.use_auto_votes||!1,startDate:n.start_date,endDate:n.end_date,isActive:n.is_active,originalEndDate:n.original_end_date??void 0,endedEarlyBy:n.ended_early_by??void 0,endedEarlyReason:n.ended_early_reason??void 0,endedEarlyDetails:n.ended_early_details??void 0,reopenReason:n.reopen_reason??void 0,reopenDetails:n.reopen_details??void 0,reopenedBy:n.reopened_by??void 0,reopenedAt:n.reopened_at??void 0,productId:n.product_id??null,productName:n.product_name??null,product_id:n.product_id??null,product_name:n.product_name??null});const Ee=await p6(n.id);te(Ee?{organization:Ee.organization||"newmill",project:Ee.project||"Product",accessToken:Ee.access_token,refreshToken:Ee.refresh_token,tokenExpiresAt:Ee.token_expires_at,tenantId:Ee.tenant_id,clientId:Ee.client_id,enabled:Ee.enabled,workItemType:Ee.work_item_type||"Feature",query:Ee.query,lastSyncTime:Ee.last_sync_time}:{organization:"newmill",project:"Product",enabled:!1,workItemType:"Feature"}),await Ft()}catch(fe){console.error("Error loading data:",fe),b([])}finally{N(!1)}}G()},[n==null?void 0:n.id,Ft,fr]),v.useEffect(()=>{async function G(){const fe=B2();if(de(fe),I([]),Ie([]),ve([]),K.enabled&&K.accessToken&&K.project)try{const Ee=await Lt(K),Pe={...K,accessToken:Ee},[st,We,Tt,Et]=await Promise.all([KX(Pe).catch(bt=>(console.error("Error loading Azure DevOps projects:",bt),fe)),M2(Pe),L0(Pe),F2(Pe)]);de(st.length>0?st:fe),I(We),Ie(Tt),ve(Et)}catch(Ee){console.error("Error loading filter options:",Ee),de(fe)}}G()},[K.enabled,K.accessToken,K.project,Lt]);const Tr=v.useCallback(async(G,fe)=>{if(!(!K.enabled||!K.accessToken))try{const Ee=await Lt(K),Pe={...K,accessToken:Ee},st=G?await dT(Pe,G):await M2(Pe);I(st)}catch(Ee){console.error("Error loading states for work item type:",Ee)}},[K,Lt]),Bt=v.useCallback(async G=>{if(!K.enabled||!K.accessToken)return{types:[],states:[]};try{const fe=await Lt(K),Ee={...K,accessToken:fe};return await GX(Ee,G)}catch(fe){return console.error("Error fetching types and states for area path:",fe),{types:[],states:[]}}},[K,Lt]),Ir=v.useCallback(async G=>{if(!K.enabled||!K.accessToken)return{types:[],areaPaths:[]};try{const fe=await Lt(K),Ee={...K,accessToken:fe},Pe=await HX(Ee,G);return Pe.areaPaths.length>0&&Ie(Pe.areaPaths),Pe}catch(fe){return console.error("Error fetching types and area paths for states:",fe),{types:[],areaPaths:[]}}},[K,Lt]),ls=v.useCallback(async G=>{if(!K.enabled||!K.accessToken)return{types:[],states:[],areaPaths:[]};try{const fe=await Lt(K),Ee={...K,accessToken:fe},Pe=await YX(Ee,G);return Pe.states.length>0&&I(Pe.states),Pe.areaPaths.length>0&&Ie(Pe.areaPaths),Pe}catch(fe){return console.error("Error fetching types, states, and area paths for tags:",fe),{types:[],states:[],areaPaths:[]}}},[K,Lt]),Qt=v.useCallback(async(G,fe=[],Ee=[])=>{if(!(!K.enabled||!K.accessToken))try{const Pe=await Lt(K),st={...K,accessToken:Pe},We=G?await JX(st,G,fe,Ee):await F2(st);ve(We)}catch(Pe){console.error("Error loading tags for type, state, and area path:",Pe)}},[K,Lt]),hr=v.useCallback(async(G,fe=[])=>{if(!(!K.enabled||!K.accessToken))try{const Ee=await Lt(K),Pe={...K,accessToken:Ee},st=G?await qX(Pe,G,fe):await L0(Pe);Ie(st)}catch(Ee){console.error("Error loading area paths for type and state:",Ee)}},[K,Lt]);v.useEffect(()=>{const G=async()=>{const Ee=pZ(ne.startDate,ne.endDate);if(ne.isActive!==Ee){const Pe={...ne,isActive:Ee};me(Pe);try{n!=null&&n.id&&await qj(n.id,{title:Pe.title,goal:Pe.goal,votes_per_user:Pe.votesPerUser,start_date:Pe.startDate,end_date:Pe.endDate,is_active:Pe.isActive})}catch(st){console.error("Error updating voting session status:",st)}}};G();const fe=setInterval(G,6e5);return()=>clearInterval(fe)},[ne,n==null?void 0:n.id]),v.useEffect(()=>{document.body.style.overflow="",document.body.style.position="",document.body.style.width="",T==="admin"&&(Ft(),Lr())},[T,Ft,Lr]),v.useEffect(()=>(document.body.style.overflow="",()=>{document.body.style.overflow=""}),[]);const Cr=v.useCallback(async(G=K)=>{if(!G.organization||!G.project||!n){L("Organization and project name are required");return}try{ge(!0),L(null);const fe=await Lt(G),Ee={...G,accessToken:fe},Pe=await L2(Ee),st=z2(Pe);for(const Le of st){const tr=(await Ha(n.id)).find(Dn=>Dn.azure_devops_id===Le.azureDevOpsId),Rr=xv(Le.description),Nt=Kf(Rr,300);tr?await Dg(tr.id,{title:Le.title,description:Nt,epic:Le.epic||null,state:Le.state,areaPath:Le.areaPath,tags:Le.tags,azure_devops_id:Le.azureDevOpsId,azure_devops_url:Le.azureDevOpsUrl}):await Ig({session_id:n.id,title:Le.title,description:Nt,epic:Le.epic||null,state:Le.state,areaPath:Le.areaPath,tags:Le.tags,azure_devops_id:Le.azureDevOpsId,azure_devops_url:Le.azureDevOpsUrl})}const We=await Ha(n.id),Tt=await Hl(n.id),Et=We.map(Le=>{const tr=Tt.filter(Nt=>Nt.feature_id===Le.id).map(Nt=>({userId:Nt.user_id,name:Nt.user_name,email:Nt.user_email,voteCount:Nt.vote_count})),Rr=tr.reduce((Nt,Dn)=>Nt+Dn.voteCount,0);return{id:Le.id,title:Le.title,description:Le.description,epic:Le.epic,state:Le.state,areaPath:Le.area_path,tags:Le.tags||[],azureDevOpsId:Le.azure_devops_id,azureDevOpsUrl:Le.azure_devops_url,votes:Rr,voters:tr}});b(Et);const bt={...Ee,lastSyncTime:new Date().toISOString()};await Rl(n.id,bt),te(bt)}catch(fe){console.error("Azure DevOps sync error:",fe),fe instanceof Error&&fe.message==="Not authenticated"?(L("Please authenticate with Azure DevOps"),Wt()):L("Failed to fetch features from Azure DevOps. Please try reconnecting.")}finally{ge(!1)}},[K,n,Lt,Wt]),nr=v.useCallback(async()=>{if(!K.organization||!K.project){L("Organization and project name are required");return}try{ge(!0),L(null);const G=await Lt(K),fe={...K,accessToken:G},Ee=await L2(fe),st=z2(Ee).map(We=>({...We,description:Kf(xv(We.description),300)}));Me(st),Ke(!0)}catch(G){console.error("Azure DevOps preview error:",G),G instanceof Error&&G.message==="Not authenticated"?(L("Please authenticate with Azure DevOps"),Wt()):L("Failed to fetch features from Azure DevOps. Please try reconnecting.")}finally{ge(!1)}},[K,Lt,Wt]),Er=v.useCallback(async(G=!1)=>{if(!(!Fe||!n))try{if(ge(!0),G){const We=await Ha(n.id);for(const Tt of We)await Vj(Tt.id)}for(const We of Fe){const Et=(await Ha(n.id)).find(ln=>ln.azure_devops_id===We.azureDevOpsId),bt=xv(We.description),Le=Kf(bt,300);Et?await Dg(Et.id,{title:We.title,description:Le,epic:We.epic||null,state:We.state,areaPath:We.areaPath,tags:We.tags,azure_devops_id:We.azureDevOpsId,azure_devops_url:We.azureDevOpsUrl}):await Ig({session_id:n.id,title:We.title,description:Le,epic:We.epic||null,state:We.state,areaPath:We.areaPath,tags:We.tags,azure_devops_id:We.azureDevOpsId,azure_devops_url:We.azureDevOpsUrl})}const fe=await Ha(n.id),Ee=await Hl(n.id),Pe=fe.map(We=>{const Et=Ee.filter(Le=>Le.feature_id===We.id).map(Le=>({userId:Le.user_id,name:Le.user_name,email:Le.user_email,voteCount:Le.vote_count})),bt=Et.reduce((Le,ln)=>Le+ln.voteCount,0);return{id:We.id,title:We.title,description:We.description,epic:We.epic,state:We.state,areaPath:We.area_path,tags:We.tags||[],azureDevOpsId:We.azure_devops_id,azureDevOpsUrl:We.azure_devops_url,votes:bt,voters:Et}});b(Pe);const st={...K,lastSyncTime:new Date().toISOString()};await Rl(n.id,st),te(st)}catch(fe){console.error("Azure DevOps sync error:",fe),L("Failed to sync features from Azure DevOps.")}finally{ge(!1),Me(null)}},[Fe,n,K]),zr=v.useCallback(async()=>{if(n)try{const G={organization:K.organization||"newmill",project:K.project||"Product",workItemType:K.workItemType||"Feature",query:K.query,accessToken:void 0,refreshToken:void 0,tokenExpiresAt:void 0,enabled:!1};await Rl(n.id,G),te(G),L(null)}catch(G){console.error("Error disconnecting Azure DevOps:",G),L("Failed to disconnect from Azure DevOps")}},[K,n]);v.useEffect(()=>{(async()=>{const fe=sessionStorage.getItem("oauth_action");if(fe&&!(!K.enabled||!K.accessToken))try{fe==="preview"?await nr():fe==="sync"&&await Cr()}finally{sessionStorage.removeItem("oauth_action")}})()},[K.enabled,K.accessToken,nr,Cr]);const Vn=v.useCallback(()=>{R(!0),Ot(d?"system":"session"),O("admin")},[d]),mr=v.useCallback(()=>{R(!1),Ot(d?"system":"session"),O("voting")},[d]),Xn=v.useCallback(()=>{R(!0),Ot("session"),t?T!=="admin"&&O("admin"):T!=="voting"&&O("voting")},[t,T]),sn=v.useCallback(()=>{d&&(R(!0),Ot("system"),t?T!=="admin"&&O("admin"):T!=="voting"&&O("voting"))},[T,d,t]),an=v.useCallback(async G=>{if(n)try{const fe=await Ig({session_id:n.id,title:G.title,description:G.description,epic:G.epic});b(Ee=>[...Ee,{id:fe.id,title:fe.title,description:fe.description,epic:fe.epic,votes:0,voters:[]}]),B(!1)}catch(fe){console.error("Error adding feature:",fe),alert("Failed to add feature")}},[n]),on=v.useCallback(async G=>{try{await Dg(G.id,{title:G.title,description:G.description,epic:G.epic}),b(fe=>fe.map(Ee=>Ee.id===G.id?G:Ee)),F(null)}catch(fe){console.error("Error updating feature:",fe),alert("Failed to update feature")}},[]),sr=v.useCallback(async G=>{try{await Vj(G),b(fe=>fe.filter(Ee=>Ee.id!==G))}catch(fe){console.error("Error deleting feature:",fe),alert("Failed to delete feature")}},[]),ir=v.useCallback(G=>{je(fe=>({...fe,showReset:!0,showResetAll:!1,showDeleteSession:!1,targetId:G}))},[]),Gr=v.useCallback(async()=>{const G=we.targetId;if(!(!G||!n))try{await o6(n.id,G);const fe=await fr();b(fe)}catch(fe){console.error("Error resetting votes:",fe),alert("Failed to reset votes")}},[we.targetId,n,fr]),cs=v.useCallback(()=>{je(G=>({...G,showReset:!1,showResetAll:!0,showDeleteSession:!1,targetId:null}))},[]),wn=v.useCallback(()=>{je(G=>({...G,showReset:!1,showResetAll:!1,showDeleteSession:!0,targetId:null}))},[]),Yr=v.useCallback(async()=>{if(n){ot(!0);try{await a6(n.id),l(null);try{localStorage.removeItem("voting_system_current_session")}catch{}await u(),p("/sessions",{replace:!0})}catch(G){console.error("Error deleting session:",G),alert("Failed to delete session. Please try again.")}finally{ot(!1),je(G=>({...G,showDeleteSession:!1}))}}},[n,p,l,u]),pr=v.useCallback(async()=>{if(n)try{await m6(n.id);const G=await fr();b(G)}catch(G){console.error("Error resetting all votes:",G),alert("Failed to reset all votes")}},[n,fr]),Jr=v.useCallback((G,fe)=>{if(!s||!ne.isActive)return;const Ee=$[G]||0;let Pe=Ee;if(fe)if(oe<It)Pe=Ee+1;else return;else if(Ee>0)Pe=Ee-1;else return;Y(st=>{const We={...st};return Pe===0?delete We[G]:We[G]=Pe,We}),ue(st=>fe?st+1:st-1)},[s,$,oe,ne.isActive,It]),ar=v.useCallback(async()=>{if(!(!s||!ne.isActive||!n)&&!(oe<It))try{for(const[Pe,st]of Object.entries($))st>0&&await f6({session_id:n.id,feature_id:Pe,user_id:s.id,user_name:s.name,user_email:s.email,vote_count:st});const G=await Ha(n.id),fe=await Hl(n.id),Ee=G.map(Pe=>{const We=fe.filter(Et=>Et.feature_id===Pe.id).map(Et=>({userId:Et.user_id,name:Et.user_name,email:Et.user_email,voteCount:Et.vote_count})),Tt=We.reduce((Et,bt)=>Et+bt.voteCount,0);return{id:Pe.id,title:Pe.title,description:Pe.description,epic:Pe.epic,state:Pe.state,areaPath:Pe.area_path,tags:Pe.tags||[],azureDevOpsId:Pe.azure_devops_id,azureDevOpsUrl:Pe.azure_devops_url,votes:Tt,voters:We}});b(Ee),O("thankyou")}catch(G){console.error("Error submitting votes:",G),alert("Failed to submit votes. Please try again.")}},[s,n,oe,$,ne.isActive,It]),Dr=v.useCallback(async G=>{var Tt,Et;console.log("handleUpdateVotingSession called with:",G),console.log("updatedSession.productId:",G.productId),console.log("updatedSession.product_id:",G.product_id);const fe={title:G.title,goal:G.goal,votes_per_user:G.votesPerUser,start_date:G.startDate,end_date:G.endDate,is_active:G.isActive,use_auto_votes:G.useAutoVotes,product_id:G.product_id??null,product_name:null};console.log("baseUpdates.product_id:",fe.product_id);const Ee={},Pe=(bt,Le)=>{bt!==void 0&&(Ee[Le]=bt)};Pe(G.originalEndDate,"original_end_date"),Pe(G.endedEarlyBy,"ended_early_by"),Pe(G.endedEarlyReason,"ended_early_reason"),Pe(G.endedEarlyDetails,"ended_early_details"),Pe(G.reopenReason,"reopen_reason"),Pe(G.reopenDetails,"reopen_details"),Pe(G.reopenedBy,"reopened_by"),Pe(G.reopenedAt,"reopened_at");const st={...fe,...Ee};console.log("Full updates being sent to database:",st),console.log("product_id in fullUpdates:",st.product_id);const We=async bt=>{console.log("runUpdate called with updates:",bt),console.log("product_id in updates:",bt.product_id),n!=null&&n.id?(console.log("Updating session by ID:",n.id),await qj(n.id,bt)):(console.log("Updating session without ID"),await y6(bt))};try{await We(st),console.log("Database update completed successfully"),me(G),n!=null&&n.id&&l({...n,title:fe.title??n.title,goal:fe.goal??n.goal,votes_per_user:fe.votes_per_user??n.votes_per_user,use_auto_votes:fe.use_auto_votes??n.use_auto_votes,start_date:fe.start_date??n.start_date,end_date:fe.end_date??n.end_date,is_active:fe.is_active??n.is_active,product_id:fe.product_id!==void 0?fe.product_id??null:G.product_id??n.product_id??null,product_name:null,original_end_date:Ee.original_end_date??n.original_end_date??null,ended_early_by:Ee.ended_early_by??n.ended_early_by??null,ended_early_reason:Ee.ended_early_reason??n.ended_early_reason??null,ended_early_details:Ee.ended_early_details??n.ended_early_details??null,reopen_reason:Ee.reopen_reason??n.reopen_reason??null,reopen_details:Ee.reopen_details??n.reopen_details??null,reopened_by:Ee.reopened_by??n.reopened_by??null,reopened_at:Ee.reopened_at??n.reopened_at??null})}catch(bt){const Le=((Et=(Tt=bt==null?void 0:bt.message)==null?void 0:Tt.toLowerCase)==null?void 0:Et.call(Tt))??"",ln=Le.includes("column")&&(Le.includes("reopen_reason")||Le.includes("reopen_details")||Le.includes("reopened_by")||Le.includes("reopened_at")||Le.includes("original_end_date")||Le.includes("ended_early_by")||Le.includes("ended_early_reason")||Le.includes("ended_early_details")),tr=Le.includes("product_name")||Le.includes('"product_name"'),Rr=Le.includes("product_id")||Le.includes('"product_id"');if(ln||tr||Rr){console.warn("[FeatureVoting] Voting session metadata/product columns missing, falling back to basic update.",bt);try{const Nt={...fe};tr&&delete Nt.product_name,Rr&&delete Nt.product_id,await We(Nt),me(G),n!=null&&n.id&&l({...n,title:Nt.title??n.title,goal:Nt.goal??n.goal,votes_per_user:Nt.votes_per_user??n.votes_per_user,use_auto_votes:Nt.use_auto_votes??n.use_auto_votes,start_date:Nt.start_date??n.start_date,end_date:Nt.end_date??n.end_date,is_active:Nt.is_active??n.is_active,product_id:Nt.product_id!==void 0?Nt.product_id??null:G.productId??n.product_id??null,product_name:null,original_end_date:G.originalEndDate??n.original_end_date??null,ended_early_by:G.endedEarlyBy??n.ended_early_by??null,ended_early_reason:G.endedEarlyReason??n.ended_early_reason??null,ended_early_details:G.endedEarlyDetails??n.ended_early_details??null,reopen_reason:G.reopenReason??n.reopen_reason??null,reopen_details:G.reopenDetails??n.reopen_details??null,reopened_by:G.reopenedBy??n.reopened_by??null,reopened_at:G.reopenedAt??n.reopened_at??null})}catch(Nt){console.error("Error updating voting session (fallback):",Nt),alert("Failed to update voting session settings")}}else console.error("Error updating voting session:",bt),alert("Failed to update voting session settings")}},[n,l]),In=v.useCallback(async G=>{if(n){te(G);try{await Rl(n.id,{organization:G.organization,project:G.project,accessToken:G.accessToken,refreshToken:G.refreshToken,tokenExpiresAt:G.tokenExpiresAt,tenantId:G.tenantId,clientId:G.clientId,enabled:G.enabled,workItemType:G.workItemType,query:G.query,lastSyncTime:G.lastSyncTime})}catch(fe){console.error("Error saving config:",fe)}}},[n]),qn=v.useCallback(()=>{n?p("/results"):O("results")},[n,p]),us=v.useMemo(()=>{switch(T){case"voting":return a.jsx(NZ,{features:j,currentUser:s,pendingVotes:$,pendingUsedVotes:oe,onVote:Jr,onSubmitVotes:ar,onToggleAdmin:Vn,isAdmin:P,votingSession:ne,navigate:p,effectiveVotesPerUser:It,sessionId:(n==null?void 0:n.id)||"",onLogout:y,onSuggestionSubmitted:Kr,isSystemAdmin:d,isSessionAdmin:m,isStakeholder:f});case"results":return a.jsx(jZ,{features:j,onResetVotes:ir,onResetAllVotes:cs,onBack:r?()=>p("../admin"):()=>O("admin"),showVotersList:Q,setShowVotersList:ae,votingSession:ne,effectiveVotesPerUser:It,onLogout:y});case"thankyou":return a.jsx(SZ,{navigate:p,votingSession:ne});case"admin":default:return t?a.jsx(dZ,{features:j,onAddFeature:an,onUpdateFeature:on,onDeleteFeature:sr,onShowResults:qn,onRequestDeleteSession:wn,isDeletingSession:ze,showAddForm:V,setShowAddForm:B,editingFeature:q,setEditingFeature:F,onLogout:y,onShowVoterView:mr,votingSession:ne,azureDevOpsConfig:K,onUpdateAzureDevOpsConfig:In,onPreviewAzureDevOpsFeatures:nr,onDisconnectAzureDevOps:zr,isFetchingAzureDevOps:ce,azureFetchError:ye,onInitiateOAuth:Wt,availableStates:xe,availableAreaPaths:H,availableTags:X,previewFeatures:Fe,showPreviewModal:ee,setShowPreviewModal:Ke,onConfirmSync:Er,onUpdateVotingSession:Dr,onFetchStatesForType:Tr,onFetchAreaPathsForTypeAndState:hr,onFetchTagsForTypeStateAndAreaPath:Qt,onFetchTypesAndStatesForAreaPath:Bt,onFetchTypesAndStatesForTags:ls,onFetchTypesAndAreaPathsForStates:Ir,suggestedFeatures:Xe,otherSessions:wt,onPromoteSuggestion:Sr,onMoveSuggestion:Xt,onEditSuggestion:Ve,onDeleteSuggestion:zt,adminPerspective:_t,projectOptions:se}):a.jsxs("div",{className:"max-w-3xl mx-auto text-center py-20 px-6",children:[a.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 rounded-full bg-[#2d4660]/10 text-[#2d4660] mb-6",children:a.jsx(Cn,{className:"h-8 w-8"})}),a.jsx("h2",{className:"text-2xl font-semibold text-[#2d4660] mb-4",children:"Admin tools live on the Admin Dashboard"}),a.jsx("p",{className:"text-gray-600 mb-6",children:"You are viewing the voting experience. To manage sessions, stakeholders, or Azure DevOps connections, open the Admin dashboard from the Admin application."}),a.jsx(at,{variant:"primary",onClick:()=>p("/admin"),children:"Go to Admin Dashboard"})]})}},[T,j,s,$,oe,Jr,ar,Vn,P,ne,ir,cs,Q,ae,an,on,sr,V,B,q,F,K,In,Cr,nr,zr,ce,ye,Wt,Fe,ee,Ke,Er,p,It,t,xe,H,X,Tr,n,mr,Kr,Xe,wt,Sr,Xt,Ve,zt,_t,se,qn]);return n?S?a.jsx("div",{className:"min-h-screen w-full bg-gray-50 flex items-center justify-center",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-[#2d4660] mx-auto mb-4"}),a.jsx("p",{className:"text-gray-600",children:"Loading..."})]})}):!P&&T!=="voting"&&T!=="thankyou"?a.jsx("div",{className:"min-h-screen w-full bg-gray-50 flex items-center justify-center",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-[#2d4660] mx-auto mb-4"}),a.jsx("p",{className:"text-gray-600",children:"Loading voting experience..."})]})}):a.jsxs("div",{className:"w-full bg-gray-50 text-gray-900 font-sans min-h-screen flex flex-col",children:[a.jsx("div",{className:"flex-grow",children:us}),a.jsx(yT,{currentRole:P?_t==="system"?"system-admin":"session-admin":"stakeholder",onSelectStakeholder:P?void 0:mr,onSelectSessionAdmin:P||d?Xn:void 0,onSelectSystemAdmin:d?sn:void 0,showRoleToggle:d||P&&_t==="system"}),a.jsx(Gf,{show:we.showReset,title:"Reset Votes",message:"Are you sure you want to reset all votes for this feature? This will remove all voting data for this feature.",onConfirm:Gr,onCancel:()=>je(G=>({...G,showReset:!1})),confirmText:"Reset",type:"reset"}),a.jsx(Gf,{show:we.showResetAll,title:"Reset All Votes",message:"Are you sure you want to reset all votes for all features? This will remove all voting data and cannot be undone.",onConfirm:pr,onCancel:()=>je(G=>({...G,showResetAll:!1})),confirmText:"Reset All",type:"reset"}),a.jsx(Gf,{show:we.showDeleteSession,title:"Delete Voting Session",message:"This will permanently delete the current voting session for all admins and stakeholders. Votes, notes, and settings for this session will be removed. This action cannot be undone.",onConfirm:Yr,onCancel:()=>je(G=>({...G,showDeleteSession:!1})),confirmText:ze?"Deleting":"Delete Session",type:"delete"})]}):a.jsx("div",{className:"min-h-screen w-full bg-gray-50 flex items-center justify-center",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-[#2d4660] mx-auto mb-4"}),a.jsx("p",{className:"text-gray-600",children:"Loading session..."})]})})}function kZ(){const{currentUser:e,setCurrentSession:t,refreshSessions:r,setCurrentUser:n}=Ui(),s=Ss(),[i,l]=v.useState(!0),[u,d]=v.useState([]),[m,f]=v.useState({}),[p,y]=v.useState({}),[x,j]=v.useState({}),[b,S]=v.useState(!1),[N,E]=v.useState("admin"),[k,T]=v.useState(!1),O=v.useRef(null),[P,R]=v.useState({}),[q,F]=v.useState({}),[V,B]=v.useState(!1),[Q,ae]=v.useState(!0),[ne,me]=v.useState({title:"",goal:"",votesPerUser:10,useAutoVotes:!0,startDate:new Date().toISOString().split("T")[0],endDate:new Date(Date.now()+10080*60*1e3).toISOString().split("T")[0]}),[K,te]=v.useState({}),[se,de]=v.useState(!1),[xe,I]=v.useState([]),[H,Ie]=v.useState(""),[X,ve]=v.useState(""),[ce,ge]=v.useState(null),[ye,L]=v.useState(null),[Fe,Me]=v.useState(!1),[ee,Ke]=v.useState(!1),[Xe,ft]=v.useState(!1),[wt,Ct]=v.useState(null),[_t,Ot]=v.useState(!1),[$,Y]=v.useState(!1),[oe,ue]=v.useState(!1),[we,je]=v.useState(null),[ze,ot]=v.useState(!1),[pt,It]=v.useState("#2D4660"),Or=v.useRef(null),[Wt,Lt]=v.useState(new Set),[fr,Ft]=v.useState(null),[Lr,Kr]=v.useState(null),[Ve,zt]=v.useState(null),[Xt,Sr]=v.useState(null),[Tr,Bt]=v.useState(null),[Ir,ls]=v.useState(null),[Qt,hr]=v.useState(""),[Cr,nr]=v.useState(null),[Er,zr]=v.useState(!1),[Vn,mr]=v.useState(!1),[Xn,sn]=v.useState("#2D4660");v.useEffect(()=>{(async()=>{if(!V||!e)return;const Se=e.tenant_id??e.tenantId??null;if(!Se){I([]),Ie(""),Ct("No tenant assigned. Products cannot be loaded.");return}Ke(!0),Ct(null);try{const De=await ra(Se);console.log(`Loaded ${De.length} products from products table for tenant ${Se}`),console.log("Products:",De.map(Ge=>Ge.name));const Ye=De;I(Ye),Ie(Ge=>{var _e;if(Ge&&Ye.some(it=>it.id===Ge))return Ge;if(fr){const be=Ye.find(it=>{var Dt;return((Dt=it.name)==null?void 0:Dt.toLowerCase().trim())===fr.toLowerCase().trim()});if(be!=null&&be.id)return Ft(null),be.id}return((_e=Ye[0])==null?void 0:_e.id)??""}),R(Ge=>{const _e={...Ge};return Ye.forEach(be=>{be.id&&be.name&&(_e[be.id]=be.name)}),_e}),F(Ge=>{const _e={...Ge};return Ye.forEach(be=>{be.id&&be.color_hex&&(_e[be.id]=be.color_hex)}),_e})}catch(De){console.error("Error loading products for modal:",De),la!=null&&la(De)?Ct("Products are not configured yet. Please create the `products` table in Supabase."):Ct("Unable to load products. You can still create a session without a product tag."),I([]),Ie("")}finally{Ke(!1)}})()},[V,e]);const an=()=>{const ie="ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";let Se="";for(let De=0;De<8;De++)Se+=ie.charAt(Math.floor(Math.random()*ie.length));return Se},on=()=>{me({title:"",goal:"",votesPerUser:10,useAutoVotes:!0,startDate:new Date().toISOString().split("T")[0],endDate:new Date(Date.now()+10080*60*1e3).toISOString().split("T")[0]}),te({}),ve(""),ge(null),Ct(null),Ot(!1),Y(!1),ue(!1),je(null),ot(!1),It("#2D4660"),Ft(null),ae(!0)},sr=()=>{const ie={};ne.title.trim()||(ie.title="Session title is required"),ne.goal.trim()||(ie.goal="Session goal is required"),ne.useAutoVotes||(ne.votesPerUser<1&&(ie.votesPerUser="Votes per user must be at least 1"),ne.votesPerUser>100&&(ie.votesPerUser="Votes per user cannot exceed 100"));const Se=new Date(ne.startDate);new Date(ne.endDate)<=Se&&(ie.endDate="End date must be after start date");const Ye=X.trim().length>0;return!wt&&xe.length>0&&!H&&!we&&!_t&&!Ye&&(ie.product="Please select a product or enter a new product name"),_t&&!Ye&&(ie.product="Please enter a product name or select an existing product"),te(ie),Object.keys(ie).length===0},ir=ie=>{const{name:Se,value:De}=ie.target;me(Ye=>({...Ye,[Se]:Se==="votesPerUser"?parseInt(De)||0:De})),K[Se]&&te(Ye=>{const Ge={...Ye};return delete Ge[Se],Ge})},Gr=async()=>{if(!(!ye||!e)){Me(!0);try{await $C(ye.id),I(ie=>ie.filter(Se=>Se.id!==ye.id)),R(ie=>{const Se={...ie};return delete Se[ye.id],Se}),F(ie=>{const Se={...ie};return delete Se[ye.id],Se}),H===ye.id&&Ie("")}catch(ie){console.error("Error deleting product:",ie),alert("Failed to delete product. Please try again.")}finally{Me(!1),L(null)}}},cs=async ie=>{if(ie.preventDefault(),!!e&&sr()){de(!0);try{const Se=an(),De=e.tenant_id??e.tenantId??null;let Ye=H&&H.trim()!==""?H:null;const Ge=X.trim(),_e=Ge.length>0,be=H&&H.trim()!=="";console.log("Product creation check:",{pendingProduct:we,newProductName:Ge,hasNewProductName:_e,selectedProductId:H,hasSelectedProduct:be});let it=null,Dt=null;if(we?(it=we.name,Dt=we.color,console.log("Using pendingProduct:",it)):_e&&(it=Ge,Dt=ce,console.log("Using newProductName:",it)),it){console.log("Will create/find product:",it);const $e=xe.find(gt=>gt.name.toLowerCase().trim()===it.toLowerCase().trim());if($e)console.log("Product already exists, using:",$e.id),Ye=$e.id;else if(De){console.log("Creating new product:",it);try{const gt=await RC(De,it,Dt||void 0);console.log("Product created successfully:",gt.id),Ye=gt.id,I(yt=>[...yt,gt].sort((Pt,Ut)=>Pt.name.localeCompare(Ut.name))),R(yt=>({...yt,[gt.id]:gt.name})),F(yt=>{const Pt={...yt};return gt.color_hex&&(Pt[gt.id]=gt.color_hex),Pt})}catch(gt){console.error("Error creating product during session creation:",gt),te(yt=>({...yt,submit:"Failed to create product. Please try again."})),de(!1);return}}else{console.error("No tenantId available to create product"),te(gt=>({...gt,submit:"Unable to create product: No tenant assigned."})),de(!1);return}}if(Ye&&await LC(Ye)){const gt=P[Ye]||"this product";te(yt=>({...yt,submit:`There is already an active session for ${gt}. Each product can only have one active session at a time.`})),de(!1);return}const et=await zC({title:ne.title,goal:ne.goal,votes_per_user:ne.votesPerUser,use_auto_votes:ne.useAutoVotes,start_date:ne.startDate,end_date:ne.endDate,is_active:!0,session_code:Se,access_type:"invite-only",product_id:Ye??null,product_name:null});await Ql(et.id,e.id);const At=await s6(et.id)||et;if(At.product_id&&De)try{const gt=(await ra(De)).find(yt=>yt.id===At.product_id);gt&&(R(yt=>({...yt,[gt.id]:gt.name})),gt.color_hex&&gt.color_hex.trim()!==""&&F(yt=>({...yt,[gt.id]:gt.color_hex})))}catch($e){console.error("Error loading product for lookup:",$e)}t(At),await r(),await wn(),B(!1),on(),setTimeout(()=>{s("/admin")},100)}catch(Se){console.error("Error creating session from modal:",Se),te(De=>({...De,submit:"Failed to create session. Please try again."}))}finally{de(!1)}}};v.useEffect(()=>{if(!k)return;const ie=Se=>{O.current&&!O.current.contains(Se.target)&&T(!1)};return document.addEventListener("mousedown",ie),document.addEventListener("touchstart",ie,{passive:!0}),()=>{document.removeEventListener("mousedown",ie),document.removeEventListener("touchstart",ie)}},[k]),v.useEffect(()=>{if(!e){s("/login");return}wn()},[e]);const wn=async()=>{if(e){l(!0);try{const Se=Mv(e.email)||await Jo(e.id);S(Se);const De=Se?await ha():await FC(e.id),Ye=(e==null?void 0:e.tenant_id)??(e==null?void 0:e.tenantId)??null;let Ge={},_e={};if(Ye)try{const et=await ra(Ye);Ge=et.reduce((Mt,At)=>(At.id&&At.name&&(Mt[At.id]=At.name),Mt),{}),_e=et.reduce((Mt,At)=>(At.id&&At.color_hex&&(Mt[At.id]=At.color_hex),Mt),{})}catch(et){console.error("Error loading products for session selection:",et)}const be={},it={},Dt={};for(const et of De){const[Mt,At,$e,gt]=await Promise.all([Se?Promise.resolve(!0):Pu(et.id,e.id),ex(et.id,e.email),Ha(et.id),Hl(et.id)]);be[et.id]={isAdmin:Mt,isStakeholder:At},it[et.id]=$e.length;const yt=gt.some(Pt=>Pt.user_id===e.id);Dt[et.id]=yt}await r(),d(De),f(be),y(it),j(Dt),R(Ge),F(_e)}catch(ie){console.error("Error loading sessions:",ie)}finally{l(!1)}}},Yr=ie=>{const Se=p[ie.id]||0;if(ie.use_auto_votes){const De=Math.max(1,Math.floor(Se/2));return{votes:De,displayText:`${De} votes/user`,isAuto:!0,formula:`Auto: ${Se} ${Se===1?"feature":"features"}  2 = ${De}`}}else return{votes:ie.votes_per_user,displayText:`${ie.votes_per_user} votes/user`,isAuto:!1,formula:""}},pr=ie=>{t(ie);const Se=m[ie.id];N==="stakeholder"?s("/vote"):Se!=null&&Se.isAdmin?s("/admin"):s("/vote")},Jr=async()=>{try{await Ue.auth.signOut()}catch{}try{t(null)}catch{}n(null);try{localStorage.removeItem("voting_system_current_session"),localStorage.removeItem("azureDevOpsAuthInProgress"),sessionStorage.removeItem("oauth_return_path"),sessionStorage.removeItem("oauth_action")}catch{}T(!1),s("/login",{replace:!0})},ar=ie=>new Date(ie).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}).replace(/\b(\d{4})\b/g,Ye=>`'${Ye.slice(-2)}`),Dr=ie=>{const Se=new Date,De=new Date(ie.start_date),Ye=new Date(ie.end_date);return Se<De?{text:"Upcoming",color:"text-yellow-600 bg-yellow-50",icon:im}:Se>Ye?{text:"Closed",color:"text-gray-600 bg-gray-100",icon:Yt}:{text:"Active",color:"text-[#1E6154] bg-[#1E6154]/10",icon:Fr}},In=ie=>[...ie].sort((Se,De)=>{const Ye=Se!=null&&Se.end_date?Date.parse(Se.end_date):0;return(De!=null&&De.end_date?Date.parse(De.end_date):0)-Ye}),qn=(ie,Se)=>{ie.stopPropagation();const De=`${window.location.origin}/login?session=${Se.session_code}`,Ye=encodeURIComponent(`You're invited to vote: ${Se.title}`),Ge=encodeURIComponent(`Hi,

You've been invited to participate in a feature voting session.

Session: ${Se.title}
Goal: ${Se.goal}

To get started, copy and paste this link into your browser:

${De}

Voting Period: ${ar(Se.start_date)} - ${ar(Se.end_date)}

Best regards,
${e==null?void 0:e.name}`);window.location.href=`mailto:?subject=${Ye}&body=${Ge}`},us=(ie,Se)=>{ie.stopPropagation(),t(Se),s("/results")},G=(ie,Se)=>{ie.stopPropagation(),t(Se),s("/users?filter=session-admin")},fe=(ie,Se)=>{ie.stopPropagation(),t(Se),s("/users?filter=stakeholder")},Ee=()=>{B(!1),on()};if(i)return a.jsx("div",{className:"min-h-screen w-full bg-gray-50 flex items-center justify-center",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-[#2D4660] mx-auto mb-4"}),a.jsx("p",{className:"text-gray-600",children:"Loading sessions..."})]})});const Pe=In(u),st=b?Pe:Pe.filter(ie=>{var Se;return(Se=m[ie.id])==null?void 0:Se.isAdmin}),We=b?[]:Pe.filter(ie=>{var Se,De;return((Se=m[ie.id])==null?void 0:Se.isStakeholder)&&!((De=m[ie.id])!=null&&De.isAdmin)}),Tt=b||st.length>0,Et=b&&N==="system-admin",bt=N==="stakeholder"?Pe.filter(ie=>Dr(ie).text==="Active"):[],Le=N==="admin"||N==="system-admin"?st:[],ln=N==="admin"?We:[],tr=(ie,Se)=>{const De={};return ie.forEach(Ye=>{const Ge=Nn(Ye,Se);if(!Ge||Ge==="No Product"||Ge.trim()==="")return;const _e=Ge.toLowerCase().trim();De[_e]||(De[_e]=[]),De[_e].push(Ye)}),console.log(" Product grouping:",Object.entries(De).map(([Ye,Ge])=>({product:Ye,count:Ge.length,sessionTitles:Ge.map(_e=>_e.title)}))),De},Rr=ie=>{Lt(Se=>{const De=new Set(Se);return De.has(ie)?De.delete(ie):De.add(ie),De})},Nt=(ie,Se,De,Ye)=>{const Ge=Ye||De||ie,_e=async be=>{if(!De)return;be.stopPropagation();let it=xe.find(Dt=>Dt.id===De);if(!it){const Dt=(e==null?void 0:e.tenant_id)??(e==null?void 0:e.tenantId);if(Dt)try{it=(await ra(Dt)).find(Mt=>Mt.id===De),it&&I(Mt=>Mt.find($e=>$e.id===De)?Mt:[...Mt,it].sort(($e,gt)=>$e.name.localeCompare(gt.name)))}catch(et){console.error("Error loading product for edit:",et)}}it&&(ls(it),hr(it.name||""),nr(it.color_hex||null),sn(it.color_hex||"#2D4660"))};return a.jsxs("div",{className:"absolute left-0 px-4 py-1 pr-8 rounded-t-md border-b-0 text-sm font-semibold shadow-sm z-20 flex items-center gap-2 whitespace-nowrap group cursor-pointer",style:{top:"0",left:"-1px",transform:"translateY(-100%)",backgroundColor:Se.background,color:Se.text,borderColor:Se.border,borderWidth:"1px",borderBottomWidth:"0",boxShadow:"0 4px 8px rgba(16,24,40,0.06)",borderTopLeftRadius:"0.9rem",borderTopRightRadius:"0.9rem",overflow:"visible"},onMouseEnter:()=>{De&&N!=="stakeholder"&&Tt&&Sr(Ge)},onMouseLeave:()=>Sr(null),onClick:N!=="stakeholder"&&Tt?_e:void 0,children:[a.jsx(Wv,{className:"h-4 w-4 flex-shrink-0"}),a.jsx("span",{className:"overflow-hidden text-ellipsis flex-1 min-w-0",children:ie}),De&&Xt===Ge&&N!=="stakeholder"&&Tt&&a.jsx("div",{className:"absolute right-2 flex-shrink-0 opacity-80",children:a.jsx(gE,{className:"h-4 w-4",style:{color:Se.text}})})]})},Dn=(ie,Se,De,Ye,Ge,_e,be,it=!0,Dt)=>a.jsxs(a.Fragment,{children:[it&&Nt(Se,De,Dt),a.jsxs("div",{className:"p-6 flex flex-col h-full",children:[a.jsxs("div",{className:"flex justify-between items-start mb-4",children:[a.jsx("div",{children:a.jsxs("div",{className:`relative inline-block ${be?"group":""}`,children:[a.jsxs("button",{onClick:et=>{et.stopPropagation(),be||pr(ie)},disabled:be,className:`inline-flex items-center px-3 py-1 rounded-full text-xs font-semibold transition-colors ${be?"bg-gray-200 text-gray-500":"bg-[#576C71] text-white hover:bg-[#1E5461]"}`,style:be?{cursor:"not-allowed"}:{},children:[a.jsx(Fn,{className:"h-3 w-3 mr-1"}),"Vote!"]}),be&&a.jsxs("div",{className:"absolute top-full left-1/2 -translate-x-1/2 mt-2 px-2 py-1 bg-gray-100 text-gray-800 text-xs rounded shadow-sm opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-200 whitespace-nowrap z-10 pointer-events-none",children:["Session Closed",a.jsx("div",{className:"absolute -top-1 left-1/2 -translate-x-1/2 w-2 h-2 bg-gray-100 rotate-45 transform"})]})]})}),a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsxs("div",{className:`relative inline-block ${be?"group":""}`,children:[a.jsxs("button",{onClick:et=>G(et,ie),disabled:be,className:`inline-flex items-center px-3 py-1 rounded-full text-xs font-medium transition-colors ${be?"bg-gray-200 text-gray-500":"bg-[#2D4660] text-white hover:bg-[#1D3144]"}`,style:be?{cursor:"not-allowed"}:{},children:[a.jsx(pn,{className:"h-3 w-3 mr-1"}),"Admins"]}),be&&a.jsxs("div",{className:"absolute top-full left-1/2 -translate-x-1/2 mt-2 px-2 py-1 bg-gray-100 text-gray-800 text-xs rounded shadow-sm opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-200 whitespace-nowrap z-10 pointer-events-none",children:["Session Closed",a.jsx("div",{className:"absolute -top-1 left-1/2 -translate-x-1/2 w-2 h-2 bg-gray-100 rotate-45 transform"})]})]}),a.jsxs("div",{className:`relative inline-block ${be?"group":""}`,children:[a.jsxs("button",{onClick:et=>fe(et,ie),disabled:be,className:`inline-flex items-center px-3 py-1 rounded-full text-xs font-medium transition-colors ${be?"bg-gray-200 text-gray-500":"bg-[#1E5461] text-white hover:bg-[#576C71]"}`,style:be?{cursor:"not-allowed"}:{},children:[a.jsx(Un,{className:"h-3 w-3 mr-1"}),"Stakeholders"]}),be&&a.jsxs("div",{className:"absolute top-full left-1/2 -translate-x-1/2 mt-2 px-2 py-1 bg-gray-100 text-gray-800 text-xs rounded shadow-sm opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-200 whitespace-nowrap z-10 pointer-events-none",children:["Session Closed",a.jsx("div",{className:"absolute -top-1 left-1/2 -translate-x-1/2 w-2 h-2 bg-gray-100 rotate-45 transform"})]})]})]})]}),a.jsx("h3",{className:"text-lg font-semibold text-[#2D4660] mb-2",children:ie.title}),a.jsx("p",{className:"text-sm text-gray-600 mb-4 line-clamp-2",children:ie.goal}),a.jsx("div",{className:"flex-1"}),a.jsxs("div",{className:"space-y-2 text-sm text-gray-500",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center",children:[a.jsx(Wr,{className:"h-4 w-4 mr-2"}),a.jsxs("span",{children:[ar(ie.start_date)," - ",ar(ie.end_date)]})]}),a.jsxs("span",{className:`inline-flex items-center ${Ye.text==="Active"?"px-3 py-1 text-sm":"px-2 py-0.5 text-xs"} rounded-full font-medium ${Ye.color}`,children:[a.jsx(Ge,{className:`${Ye.text==="Active"?"h-4 w-4":"h-3 w-3"} mr-1`}),Ye.text]})]}),a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center",children:[a.jsx(Rs,{className:"h-4 w-4 mr-2"}),a.jsxs("span",{children:[p[ie.id]||0," ",p[ie.id]===1?"feature":"features"]})]}),a.jsx("span",{className:"text-sm font-medium text-[#2D4660]",children:Se})]}),a.jsxs("div",{className:"flex items-start",children:[a.jsx(Fn,{className:"h-4 w-4 mr-2 mt-0.5 flex-shrink-0"}),a.jsxs("div",{className:"flex-1 flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center",children:[a.jsx("span",{className:"break-words",children:_e.displayText}),_e.isAuto&&a.jsxs("div",{className:"group relative ml-1 mt-0.5",children:[a.jsx(xf,{className:"h-4 w-4 text-blue-500 cursor-help"}),a.jsxs("div",{className:"absolute bottom-full left-1/2 -translate-x-1/2 mb-2 px-3 py-2 bg-gray-900 text-white text-xs rounded-lg opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-200 whitespace-nowrap z-10 pointer-events-none",children:[_e.formula,a.jsx("div",{className:"absolute top-full left-1/2 -translate-x-1/2 -mt-1 border-4 border-transparent border-t-gray-900"})]})]})]}),Ye.text!=="Upcoming"&&a.jsxs("button",{onClick:et=>us(et,ie),className:"ml-4 inline-flex items-center px-3 py-1 rounded-full text-xs font-medium bg-[#C89212] text-white hover:bg-[#E0A814] transition-colors cursor-pointer flex-shrink-0",children:[a.jsx(Uf,{className:"h-3 w-3 mr-1"}),Ye.text==="Closed"?"Final Results":"Current Results"]})]})]})]}),a.jsx("div",{className:"mt-4 pt-4 border-t border-gray-200",children:a.jsxs("div",{className:`relative inline-block w-full ${be?"group":""}`,children:[a.jsxs("button",{onClick:et=>qn(et,ie),disabled:be,className:`w-full flex items-center justify-center px-3 py-2 rounded-md transition-colors ${be?"bg-gray-200 text-gray-500":"bg-blue-50 hover:bg-blue-100"}`,style:be?{cursor:"not-allowed"}:{},children:[a.jsx(Ju,{className:`h-4 w-4 mr-2 ${be?"text-gray-500":"text-blue-600"}`}),a.jsx("span",{className:`text-sm font-medium ${be?"text-gray-500":"text-blue-600"}`,children:"Email Invite to Stakeholders"})]}),be&&a.jsxs("div",{className:"absolute top-full left-1/2 -translate-x-1/2 mt-2 px-2 py-1 bg-gray-100 text-gray-800 text-xs rounded shadow-sm opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-200 whitespace-nowrap z-10 pointer-events-none",children:["Session Closed",a.jsx("div",{className:"absolute -top-1 left-1/2 -translate-x-1/2 w-2 h-2 bg-gray-100 rotate-45 transform"})]})]})})]})]});return a.jsxs("div",{className:"container mx-auto p-4 max-w-6xl min-h-screen pb-8",children:[a.jsx("div",{className:"hidden md:flex md:justify-center mb-2",children:a.jsx("img",{src:"https://www.steeldynamics.com/wp-content/uploads/2024/05/New-Millennium-color-logo1.png",alt:"New Millennium Building Systems Logo",className:"-mt-4 cursor-pointer hover:opacity-80 transition-opacity",style:{height:"96px",width:"auto"},onClick:()=>s("/sessions")})}),a.jsxs("div",{className:"flex justify-between items-center mb-6",children:[a.jsxs("div",{className:"flex items-center",children:[a.jsx("img",{src:"https://media.licdn.com/dms/image/C4D0BAQEC3OhRqehrKg/company-logo_200_200/0/1630518354793/new_millennium_building_systems_logo?e=2147483647&v=beta&t=LM3sJTmQZet5NshZ-RNHXW1MMG9xSi1asp-VUeSA9NA",alt:"New Millennium Building Systems Logo",className:"mr-4 md:hidden cursor-pointer hover:opacity-80 transition-opacity",style:{width:"40px",height:"40px"},onClick:()=>s("/sessions")}),a.jsxs("div",{children:[a.jsx("h1",{className:"text-2xl font-bold text-[#2D4660] md:text-3xl",children:"My Voting Sessions"}),a.jsxs("p",{className:"text-sm text-gray-600",children:["Welcome, ",e==null?void 0:e.name,b&&a.jsx("span",{className:"ml-2 inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium bg-purple-100 text-purple-800",children:"System Admin"}),!b&&st.length>0&&a.jsx("span",{className:"ml-2 inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:"Session Admin"}),!b&&st.length===0&&We.length>0&&a.jsx("span",{className:"ml-2 inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800",children:"Stakeholder"})]})]})]}),a.jsxs("div",{ref:O,className:"relative z-40 md:justify-end",children:[a.jsxs("div",{className:"hidden md:flex space-x-2",children:[b&&(N==="admin"||N==="system-admin")&&a.jsx(a.Fragment,{children:a.jsxs("button",{onClick:()=>s("/users"),className:"flex items-center px-4 py-2 bg-[#2D4660] text-white rounded-lg hover:bg-[#173B65] transition-colors",children:[a.jsx(Un,{className:"h-4 w-4 mr-2"}),"User Management"]})}),(b||st.length>0)&&(N==="admin"||N==="system-admin")&&a.jsx(a.Fragment,{children:a.jsxs("button",{onClick:()=>{ae(!0),B(!0)},className:"flex items-center px-4 py-2 bg-[#C89212] text-white rounded-lg hover:bg-[#6A4234] transition-colors",children:[a.jsx(kn,{className:"h-4 w-4 mr-2"}),a.jsx("span",{className:"hidden sm:inline",children:"Create Session"}),a.jsx("span",{className:"sm:hidden",children:"Create"})]})}),a.jsxs("button",{onClick:Jr,className:"flex items-center px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-colors",children:[a.jsx(An,{className:"h-4 w-4 mr-2"}),a.jsx("span",{className:"hidden sm:inline",children:"Logout"})]})]}),a.jsx("div",{className:"flex md:hidden justify-end",children:a.jsx("button",{onClick:()=>T(!k),className:"p-2 rounded-md border border-gray-200 bg-white shadow-sm","aria-label":"Open menu",children:a.jsx(Rs,{className:"h-5 w-5 text-gray-700"})})}),k&&a.jsx("div",{className:"absolute right-0 mt-2 w-56 bg-white border border-gray-200 rounded-lg shadow-lg md:hidden z-50",children:a.jsxs("div",{className:"py-1",children:[b&&(N==="admin"||N==="system-admin")&&a.jsx(a.Fragment,{children:a.jsxs("button",{onClick:()=>{T(!1),s("/users")},className:"w-full px-3 py-2 flex items-center text-left hover:bg-gray-50",children:[a.jsx(Un,{className:"h-4 w-4 mr-2 text-gray-700"}),"User Management"]})}),(b||st.length>0)&&(N==="admin"||N==="system-admin")&&a.jsx(a.Fragment,{children:a.jsxs("button",{onClick:()=>{T(!1),ae(!0),B(!0)},className:"w-full px-3 py-2 flex items-center text-left hover:bg-gray-50",children:[a.jsx(kn,{className:"h-4 w-4 mr-2 text-gray-700"}),"Create Session"]})}),a.jsxs("button",{onClick:()=>{T(!1),Jr()},className:"w-full px-3 py-2 flex items-center text-left hover:bg-gray-50",children:[a.jsx(An,{className:"h-4 w-4 mr-2 text-gray-700"}),"Logout"]})]})})]})]}),u.length===0?a.jsxs("div",{className:"bg-white rounded-lg shadow-md p-12 text-center",children:[a.jsx(Fn,{className:"mx-auto h-12 w-12 text-gray-400 mb-4"}),a.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No voting sessions"}),a.jsx("p",{className:"text-sm text-gray-500 mb-6",children:"You are not part of any voting sessions yet."}),b&&a.jsxs("button",{onClick:()=>{ae(!0),B(!0)},className:"inline-flex items-center px-4 py-2 bg-[#2D4660] text-white rounded-lg hover:bg-[#173B65] transition-colors",children:[a.jsx(kn,{className:"h-5 w-5 mr-2"}),"Create Your First Session"]})]}):a.jsxs("div",{className:"space-y-8",children:[N==="stakeholder"&&a.jsxs("div",{children:[a.jsxs("h2",{className:"text-xl font-semibold text-[#2D4660] mb-4 flex items-center",children:[a.jsx(Fn,{className:"h-5 w-5 mr-2"}),"All Your Voting Sessions"]}),(()=>{const ie=bt.filter(_e=>{const be=Nn(_e,P);return be&&be!=="No Product"&&be.trim()!==""}),Se=bt.filter(_e=>{const be=Nn(_e,P);return!be||be==="No Product"||be.trim()===""}),De=tr(ie,P),Ye=[],Ge=[];return Object.entries(De).forEach(([_e,be])=>{be.length>=2?Ye.push({key:_e,sessions:be}):Ge.push(...be)}),a.jsxs("div",{className:"space-y-8",children:[Ye.map(({key:_e,sessions:be})=>{var Pt,Ut;const it=Wt.has(_e),Dt=it?be:be.slice(0,3),et=be.length>3?be.length-3:0,Mt=Nn(be[0],P),At=(Pt=be[0])!=null&&Pt.product_id?q[be[0].product_id]:void 0,$e=ns(Mt,At),gt=(ht,Vt)=>{const Rt=ht.replace("#",""),C=parseInt(Rt.substring(0,2),16),J=parseInt(Rt.substring(2,4),16),Ne=parseInt(Rt.substring(4,6),16);return`rgba(${C}, ${J}, ${Ne}, ${Vt})`},yt=$e.background?gt($e.background,.1):"#F9FAFB";return a.jsx("div",{className:"relative",style:{marginTop:"50px"},children:a.jsxs("div",{className:"rounded-lg rounded-tl-none border border-gray-200 pt-2 px-6 pb-6 relative overflow-visible",style:{backgroundColor:yt,borderColor:$e.border||"#E5E7EB"},children:[Nt(Mt,$e,(Ut=be[0])==null?void 0:Ut.product_id,_e),et>0&&a.jsx("div",{className:"absolute right-0 z-20 hidden md:block",style:{top:"0",transform:"translateY(calc(-100% - 3px))"},children:a.jsx("button",{onClick:()=>Rr(_e),className:"flex items-center gap-1 text-sm text-[#2D4660] hover:text-[#173B65] transition-colors cursor-pointer",children:it?a.jsxs(a.Fragment,{children:["Show Less",a.jsx(zn,{className:"h-4 w-4 rotate-180"})]}):a.jsxs(a.Fragment,{children:["Show More (",et,")",a.jsx(zn,{className:"h-4 w-4"})]})})}),Tt&&N!=="stakeholder"&&a.jsx("div",{className:"absolute z-20 bottom-[-20px] left-1/2 -translate-x-1/2 md:bottom-auto md:left-auto md:translate-x-0 md:right-[-20px] md:top-1/2 md:-translate-y-1/2",children:a.jsx("button",{onClick:ht=>{var C;ht.stopPropagation();const Vt=(C=be[0])==null?void 0:C.product_id,Rt=Nn(be[0],P);Vt&&Ie(Vt),Rt&&Rt!=="No Product"&&Ft(Rt),ae(!1),B(!0)},onMouseEnter:()=>Kr(_e),onMouseLeave:()=>Kr(null),className:"flex items-center justify-center w-10 h-10 rounded-full shadow-md",style:{backgroundColor:$e.background||"#C89212",color:$e.text||"#FFFFFF"},title:`Create new session for ${Mt}`,children:a.jsx(kn,{className:"h-5 w-5"})})}),a.jsx("div",{className:"grid grid-cols-1 gap-0 sm:gap-6 sm:grid-cols-2 lg:grid-cols-3",children:Dt.map(ht=>{const Vt=Dr(ht),Rt=Vt.text==="Closed",C=Vt.icon,J=Yr(ht),Ne=x[ht.id],Te=Nn(ht,P),D=ht.product_id?q[ht.product_id]:void 0,he=ns(Te,D);return a.jsx("div",{className:"relative z-10 bg-white overflow-visible shadow-md rounded-lg hover:shadow-lg transition-shadow cursor-pointer mt-6 border",style:{borderColor:he.border,borderWidth:"1px",opacity:Rt&&Tr!==ht.id?.75:1},onMouseEnter:()=>Bt(ht.id),onMouseLeave:()=>Bt(null),onClick:()=>pr(ht),children:a.jsxs("div",{className:"p-6 flex flex-col h-full",children:[a.jsx("div",{className:"flex justify-end items-start mb-4",children:Ne?a.jsxs("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-xs font-medium bg-green-100 text-green-800",children:[a.jsx(Fr,{className:"h-3 w-3 mr-1"}),"Voted"]}):Vt.text==="Active"?a.jsxs("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:[a.jsx(Yt,{className:"h-3 w-3 mr-1"}),"Needs Your Vote"]}):null}),a.jsx("h3",{className:"text-lg font-semibold text-[#2D4660] mb-2",children:ht.title}),a.jsx("p",{className:"text-sm text-gray-600 mb-4 line-clamp-2",children:ht.goal}),a.jsx("div",{className:"flex-1"}),a.jsxs("div",{className:"space-y-2 text-sm text-gray-500",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center",children:[a.jsx(Wr,{className:"h-4 w-4 mr-2"}),a.jsxs("span",{children:[ar(ht.start_date)," - ",ar(ht.end_date)]})]}),a.jsxs("span",{className:`inline-flex items-center ${Vt.text==="Active"?"px-3 py-1 text-sm":"px-2 py-0.5 text-xs"} rounded-full font-medium ${Vt.color}`,children:[a.jsx(C,{className:`${Vt.text==="Active"?"h-4 w-4":"h-3 w-3"} mr-1`}),Vt.text]})]}),a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center",children:[a.jsx(Rs,{className:"h-4 w-4 mr-2"}),a.jsxs("span",{children:[p[ht.id]||0," ",p[ht.id]===1?"feature":"features"," to vote on"]})]}),a.jsx("span",{className:"text-sm font-medium text-[#2D4660]",children:Te})]}),a.jsxs("div",{className:"flex items-center",children:[a.jsx(Fn,{className:"h-4 w-4 mr-2"}),a.jsx("span",{children:J.displayText}),J.isAuto&&a.jsxs("div",{className:"group relative ml-1",children:[a.jsx(xf,{className:"h-4 w-4 text-blue-500 cursor-help"}),a.jsxs("div",{className:"absolute bottom-full left-1/2 -translate-x-1/2 mb-2 px-3 py-2 bg-gray-900 text-white text-xs rounded-lg opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-200 whitespace-nowrap z-10 pointer-events-none",children:[J.formula,a.jsx("div",{className:"absolute top-full left-1/2 -translate-x-1/2 -mt-1 border-4 border-transparent border-t-gray-900"})]})]})]})]}),a.jsx("div",{className:"mt-4 pt-4 border-t border-gray-200",children:a.jsxs("button",{onClick:W=>{W.stopPropagation(),Rt||pr(ht)},disabled:Rt,className:`w-full flex items-center justify-center px-4 py-2 rounded-lg transition-colors font-medium ${Rt?"bg-gray-100 text-gray-500 cursor-not-allowed":Ne?"bg-gray-100 text-gray-700 hover:bg-gray-200":"bg-[#2D4660] text-white hover:bg-[#173B65]"}`,style:Rt?{cursor:"not-allowed"}:{},children:[a.jsx(Fn,{className:"h-4 w-4 mr-2"}),Ne?"View or Change Votes":"Cast Your Votes"]})})]})},ht.id)})}),et>0&&a.jsx("div",{className:"mt-4 md:hidden",children:a.jsx("button",{onClick:()=>Rr(_e),className:"w-full flex items-center justify-center gap-1 px-4 py-2 text-sm font-medium text-[#2D4660] bg-white hover:bg-gray-50 rounded-md border border-gray-300 transition-colors",children:it?a.jsxs(a.Fragment,{children:["Show Less",a.jsx(zn,{className:"h-4 w-4 rotate-180"})]}):a.jsxs(a.Fragment,{children:["Show More (",et,")",a.jsx(zn,{className:"h-4 w-4"})]})})})]})},_e)}),(Ge.length>0||Se.length>0)&&a.jsx("div",{className:"grid grid-cols-1 gap-0 sm:gap-6 sm:grid-cols-2 lg:grid-cols-3",children:[...Ge,...Se].map(_e=>{const be=Dr(_e),it=be.text==="Closed",Dt=be.icon,et=Yr(_e),Mt=x[_e.id],At=Nn(_e,P),$e=_e.product_id?q[_e.product_id]:void 0,gt=ns(At,$e),yt=Ge.includes(_e);return a.jsxs("div",{className:"relative z-10 bg-white overflow-visible shadow-md rounded-lg rounded-tl-none hover:shadow-lg transition-shadow cursor-pointer mt-6 border",style:{borderColor:gt.border,borderWidth:"1px",opacity:it&&Tr!==_e.id?.75:1},onMouseEnter:()=>Bt(_e.id),onMouseLeave:()=>Bt(null),onClick:()=>pr(_e),children:[Nt(At,gt,_e.product_id),yt&&Tt&&N!=="stakeholder"&&a.jsx("div",{className:"absolute z-20 bottom-[-20px] left-1/2 -translate-x-1/2 md:bottom-auto md:left-auto md:translate-x-0 md:right-[-20px] md:top-1/2 md:-translate-y-1/2",children:a.jsx("button",{onClick:Pt=>{Pt.stopPropagation();const Ut=_e.product_id,ht=Nn(_e,P);Ut&&Ie(Ut),ht&&ht!=="No Product"&&Ft(ht),ae(!1),B(!0)},className:"flex items-center justify-center w-10 h-10 rounded-full transition-colors shadow-md hover:shadow-lg",style:{backgroundColor:gt.background||"#C89212",color:gt.text||"#FFFFFF"},onMouseEnter:Pt=>{const Ut=gt.background||"#C89212";Pt.currentTarget.style.backgroundColor=Ut,Pt.currentTarget.style.filter="brightness(0.8)"},onMouseLeave:Pt=>{Pt.currentTarget.style.backgroundColor=gt.background||"#C89212",Pt.currentTarget.style.filter="brightness(1)"},title:`Create new session for ${At}`,children:a.jsx(kn,{className:"h-5 w-5"})})}),a.jsxs("div",{className:"p-6 flex flex-col h-full",children:[a.jsx("div",{className:"flex justify-end items-start mb-4",children:Mt?a.jsxs("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-xs font-medium bg-green-100 text-green-800",children:[a.jsx(Fr,{className:"h-3 w-3 mr-1"}),"Voted"]}):be.text==="Active"?a.jsxs("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:[a.jsx(Yt,{className:"h-3 w-3 mr-1"}),"Needs Your Vote"]}):null}),a.jsx("h3",{className:"text-lg font-semibold text-[#2D4660] mb-2",children:_e.title}),a.jsx("p",{className:"text-sm text-gray-600 mb-4 line-clamp-2",children:_e.goal}),a.jsx("div",{className:"flex-1"}),a.jsxs("div",{className:"space-y-2 text-sm text-gray-500",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center",children:[a.jsx(Wr,{className:"h-4 w-4 mr-2"}),a.jsxs("span",{children:[ar(_e.start_date)," - ",ar(_e.end_date)]})]}),a.jsxs("span",{className:`inline-flex items-center ${be.text==="Active"?"px-3 py-1 text-sm":"px-2 py-0.5 text-xs"} rounded-full font-medium ${be.color}`,children:[a.jsx(Dt,{className:`${be.text==="Active"?"h-4 w-4":"h-3 w-3"} mr-1`}),be.text]})]}),a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center",children:[a.jsx(Rs,{className:"h-4 w-4 mr-2"}),a.jsxs("span",{children:[p[_e.id]||0," ",p[_e.id]===1?"feature":"features"," to vote on"]})]}),a.jsx("span",{className:"text-sm font-medium text-[#2D4660]",children:At})]}),a.jsxs("div",{className:"flex items-center",children:[a.jsx(Fn,{className:"h-4 w-4 mr-2"}),a.jsx("span",{children:et.displayText}),et.isAuto&&a.jsxs("div",{className:"group relative ml-1",children:[a.jsx(xf,{className:"h-4 w-4 text-blue-500 cursor-help"}),a.jsxs("div",{className:"absolute bottom-full left-1/2 -translate-x-1/2 mb-2 px-3 py-2 bg-gray-900 text-white text-xs rounded-lg opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-200 whitespace-nowrap z-10 pointer-events-none",children:[et.formula,a.jsx("div",{className:"absolute top-full left-1/2 -translate-x-1/2 -mt-1 border-4 border-transparent border-t-gray-900"})]})]})]})]}),a.jsx("div",{className:"mt-4 pt-4 border-t border-gray-200",children:a.jsxs("button",{onClick:Pt=>{Pt.stopPropagation(),it||pr(_e)},disabled:it,className:`w-full flex items-center justify-center px-4 py-2 rounded-lg transition-colors font-medium ${it?"bg-gray-100 text-gray-500 cursor-not-allowed":Mt?"bg-gray-100 text-gray-700 hover:bg-gray-200":"bg-[#2D4660] text-white hover:bg-[#173B65]"}`,style:it?{cursor:"not-allowed"}:{},children:[a.jsx(Fn,{className:"h-4 w-4 mr-2"}),Mt?"View or Change Votes":"Cast Your Votes"]})})]})]},_e.id)})})]})})()]}),(N==="admin"||N==="system-admin")&&a.jsxs(a.Fragment,{children:[N==="admin"&&ln.length>0&&a.jsxs("div",{children:[a.jsxs("h2",{className:"text-xl font-semibold text-[#2D4660] mb-4 flex items-center",children:[a.jsx(Fn,{className:"h-5 w-5 mr-2"}),"Your Voting Sessions"]}),a.jsx("div",{className:"grid grid-cols-1 gap-6 sm:grid-cols-2 lg:grid-cols-3",children:ln.map(ie=>{const Se=Dr(ie),De=Se.text==="Closed",Ye=Se.icon,Ge=Yr(ie),_e=x[ie.id],be=Nn(ie,P),it=ie.product_id?q[ie.product_id]:void 0,Dt=ns(be,it);return a.jsxs("div",{className:"relative z-10 bg-white overflow-visible shadow-md rounded-lg rounded-tl-none hover:shadow-lg transition-shadow cursor-pointer mt-6 border",style:{borderColor:Dt.border,borderWidth:"1px",opacity:De&&Tr!==ie.id?.75:1},onMouseEnter:()=>Bt(ie.id),onMouseLeave:()=>Bt(null),onClick:()=>pr(ie),children:[a.jsxs("div",{className:"absolute left-0 px-4 py-1 rounded-t-md border-b-0 text-sm font-semibold shadow-sm z-20 flex items-center gap-2 whitespace-nowrap overflow-hidden",style:{top:"0",left:"-1px",transform:"translateY(-100%)",backgroundColor:Dt.background,color:Dt.text,borderColor:Dt.border,borderWidth:"1px",borderBottomWidth:"0",boxShadow:"0 4px 8px rgba(16,24,40,0.06)",borderTopLeftRadius:"0.9rem",borderTopRightRadius:"0.9rem"},children:[a.jsx(Wv,{className:"h-4 w-4 flex-shrink-0"}),a.jsx("span",{className:"overflow-hidden text-ellipsis",children:be})]}),a.jsxs("div",{className:"p-6 flex flex-col h-full",children:[a.jsx("div",{className:"flex justify-end items-start mb-4",children:_e?a.jsxs("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-xs font-medium bg-green-100 text-green-800",children:[a.jsx(Fr,{className:"h-3 w-3 mr-1"}),"Voted"]}):Se.text==="Active"?a.jsxs("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:[a.jsx(Yt,{className:"h-3 w-3 mr-1"}),"Needs Your Vote"]}):null}),a.jsx("h3",{className:"text-lg font-semibold text-[#2D4660] mb-2",children:ie.title}),a.jsx("p",{className:"text-sm text-gray-600 mb-4 line-clamp-2",children:ie.goal}),a.jsx("div",{className:"flex-1"}),a.jsxs("div",{className:"space-y-2 text-sm text-gray-500",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center",children:[a.jsx(Wr,{className:"h-4 w-4 mr-2"}),a.jsxs("span",{children:[ar(ie.start_date)," - ",ar(ie.end_date)]})]}),a.jsxs("span",{className:`inline-flex items-center ${Se.text==="Active"?"px-3 py-1 text-sm":"px-2 py-0.5 text-xs"} rounded-full font-medium ${Se.color}`,children:[a.jsx(Ye,{className:`${Se.text==="Active"?"h-4 w-4":"h-3 w-3"} mr-1`}),Se.text]})]}),a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center",children:[a.jsx(Rs,{className:"h-4 w-4 mr-2"}),a.jsxs("span",{children:[p[ie.id]||0," ",p[ie.id]===1?"feature":"features"," to vote on"]})]}),a.jsx("span",{className:"text-sm font-medium text-[#2D4660]",children:be})]}),a.jsxs("div",{className:"flex items-center",children:[a.jsx(Fn,{className:"h-4 w-4 mr-2"}),a.jsx("span",{children:Ge.displayText}),Ge.isAuto&&a.jsxs("div",{className:"group relative ml-1",children:[a.jsx(xf,{className:"h-4 w-4 text-blue-500 cursor-help"}),a.jsxs("div",{className:"absolute bottom-full left-1/2 -translate-x-1/2 mb-2 px-3 py-2 bg-gray-900 text-white text-xs rounded-lg opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-200 whitespace-nowrap z-10 pointer-events-none",children:[Ge.formula,a.jsx("div",{className:"absolute top-full left-1/2 -translate-x-1/2 -mt-1 border-4 border-transparent border-t-gray-900"})]})]})]})]}),a.jsx("div",{className:"mt-4 pt-4 border-t border-gray-200",children:a.jsxs("button",{onClick:et=>{et.stopPropagation(),De||pr(ie)},disabled:De,className:`w-full flex items-center justify-center px-4 py-2 rounded-lg transition-colors font-medium ${De?"bg-gray-100 text-gray-500 cursor-not-allowed":_e?"bg-gray-100 text-gray-700 hover:bg-gray-200":"bg-[#2D4660] text-white hover:bg-[#173B65]"}`,style:De?{cursor:"not-allowed"}:{},children:[a.jsx(Fn,{className:"h-4 w-4 mr-2"}),_e?"View or Change Votes":"Cast Your Votes"]})})]})]},ie.id)})})]}),Le.length>0&&a.jsxs("div",{children:[a.jsxs("div",{className:"flex flex-col gap-3 sm:flex-row sm:items-center sm:justify-between mb-4",children:[a.jsxs("h2",{className:"text-xl font-semibold text-[#2D4660] flex items-center",children:[a.jsx(pn,{className:"h-5 w-5 mr-2"}),Et?"All Sessions (System Admin)":"Sessions You Manage"]}),Et&&a.jsxs("p",{className:"text-sm text-gray-600",children:["Showing ",Le.length," total sessions across the organization."]})]}),(()=>{const ie=Le.filter(_e=>{const be=Nn(_e,P);return be&&be!=="No Product"&&be.trim()!==""}),Se=Le.filter(_e=>{const be=Nn(_e,P);return!be||be==="No Product"||be.trim()===""}),De=tr(ie,P),Ye=[],Ge=[];return Object.entries(De).forEach(([_e,be])=>{be.length>=2?Ye.push({key:_e,sessions:be}):Ge.push(...be)}),a.jsxs("div",{className:"space-y-8",children:[Ye.map(({key:_e,sessions:be})=>{var Pt,Ut;const it=Wt.has(_e),Dt=it?be:be.slice(0,3),et=be.length>3?be.length-3:0,Mt=Nn(be[0],P),At=(Pt=be[0])!=null&&Pt.product_id?q[be[0].product_id]:void 0,$e=ns(Mt,At),gt=(ht,Vt)=>{const Rt=ht.replace("#",""),C=parseInt(Rt.substring(0,2),16),J=parseInt(Rt.substring(2,4),16),Ne=parseInt(Rt.substring(4,6),16);return`rgba(${C}, ${J}, ${Ne}, ${Vt})`},yt=$e.background?gt($e.background,.1):"#F9FAFB";return a.jsx("div",{className:"relative",style:{marginTop:"50px"},children:a.jsxs("div",{className:"rounded-lg rounded-tl-none border border-gray-200 pt-2 px-6 pb-6 relative overflow-visible",style:{backgroundColor:yt,borderColor:$e.border||"#E5E7EB"},children:[Nt(Mt,$e,(Ut=be[0])==null?void 0:Ut.product_id,_e),et>0&&a.jsx("div",{className:"absolute right-0 z-20 hidden md:block",style:{top:"0",transform:"translateY(calc(-100% - 3px))"},children:a.jsx("button",{onClick:()=>Rr(_e),className:"flex items-center gap-1 text-sm text-[#2D4660] hover:text-[#173B65] transition-colors cursor-pointer",children:it?a.jsxs(a.Fragment,{children:["Show Less",a.jsx(zn,{className:"h-4 w-4 rotate-180"})]}):a.jsxs(a.Fragment,{children:["Show More (",et,")",a.jsx(zn,{className:"h-4 w-4"})]})})}),(b||N==="admin"||N==="system-admin")&&a.jsx("div",{className:"absolute z-20 bottom-[-20px] left-1/2 -translate-x-1/2 md:bottom-auto md:left-auto md:translate-x-0 md:right-[-20px] md:top-1/2 md:-translate-y-1/2",children:a.jsx("button",{onClick:ht=>{var C;ht.stopPropagation();const Vt=(C=be[0])==null?void 0:C.product_id,Rt=Nn(be[0],P);Vt&&Ie(Vt),Rt&&Rt!=="No Product"&&Ft(Rt),ae(!1),B(!0)},onMouseEnter:()=>Kr(_e),onMouseLeave:()=>Kr(null),className:"flex items-center justify-center w-10 h-10 rounded-full shadow-md",style:{backgroundColor:$e.background||"#C89212",color:$e.text||"#FFFFFF"},title:`Create new session for ${Mt}`,children:a.jsx(kn,{className:"h-5 w-5"})})}),a.jsxs("div",{className:"grid grid-cols-1 gap-0 sm:gap-6 sm:grid-cols-2 lg:grid-cols-3",children:[Dt.map(ht=>{const Vt=Dr(ht),Rt=Vt.icon,C=Yr(ht),J=Vt.text==="Closed",Ne=Nn(ht,P),Te=ht.product_id?q[ht.product_id]:void 0,D=ns(Ne,Te);return a.jsx("div",{className:"relative z-10 bg-white overflow-visible shadow-md rounded-lg hover:shadow-lg transition-shadow cursor-pointer mt-6 border",style:{borderColor:D.border,borderWidth:"1px",opacity:J&&Tr!==ht.id?.75:1},onMouseEnter:()=>Bt(ht.id),onMouseLeave:()=>Bt(null),onClick:()=>pr(ht),children:Dn(ht,Ne,D,Vt,Rt,C,J,!1,ht.product_id)},ht.id)}),be.length===2&&a.jsxs(a.Fragment,{children:[a.jsx("style",{children:`
                                        @keyframes fadeIn {
                                          from {
                                            opacity: 0;
                                          }
                                          to {
                                            opacity: 1;
                                          }
                                        }
                                        @keyframes sparkle {
                                          0% {
                                            opacity: 0.2;
                                            transform: scale(0.6) rotate(0deg);
                                            filter: brightness(0.8);
                                          }
                                          15% {
                                            opacity: 1;
                                            transform: scale(1.4) rotate(120deg);
                                            filter: brightness(1.5);
                                          }
                                          30% {
                                            opacity: 0.3;
                                            transform: scale(0.7) rotate(240deg);
                                            filter: brightness(0.6);
                                          }
                                          45% {
                                            opacity: 1;
                                            transform: scale(1.5) rotate(360deg);
                                            filter: brightness(1.8);
                                          }
                                          60% {
                                            opacity: 0.4;
                                            transform: scale(0.8) rotate(480deg);
                                            filter: brightness(0.7);
                                          }
                                          75% {
                                            opacity: 1;
                                            transform: scale(1.3) rotate(600deg);
                                            filter: brightness(1.6);
                                          }
                                          90% {
                                            opacity: 0.3;
                                            transform: scale(0.65) rotate(720deg);
                                            filter: brightness(0.5);
                                          }
                                          100% {
                                            opacity: 0.2;
                                            transform: scale(0.6) rotate(720deg);
                                            filter: brightness(0.8);
                                          }
                                        }
                                        @keyframes twinkle {
                                          0% {
                                            opacity: 0.1;
                                            transform: scale(0.5);
                                            filter: brightness(0.5);
                                          }
                                          10% {
                                            opacity: 1;
                                            transform: scale(1.6);
                                            filter: brightness(2);
                                          }
                                          20% {
                                            opacity: 0.2;
                                            transform: scale(0.6);
                                            filter: brightness(0.4);
                                          }
                                          35% {
                                            opacity: 1;
                                            transform: scale(1.7);
                                            filter: brightness(2.2);
                                          }
                                          50% {
                                            opacity: 0.15;
                                            transform: scale(0.55);
                                            filter: brightness(0.3);
                                          }
                                          65% {
                                            opacity: 1;
                                            transform: scale(1.5);
                                            filter: brightness(1.9);
                                          }
                                          80% {
                                            opacity: 0.25;
                                            transform: scale(0.7);
                                            filter: brightness(0.6);
                                          }
                                          95% {
                                            opacity: 1;
                                            transform: scale(1.4);
                                            filter: brightness(1.8);
                                          }
                                          100% {
                                            opacity: 0.1;
                                            transform: scale(0.5);
                                            filter: brightness(0.5);
                                          }
                                        }
                                        @keyframes gentlePulse {
                                          0% {
                                            opacity: 0.3;
                                            transform: scale(0.8);
                                            filter: brightness(0.7);
                                          }
                                          25% {
                                            opacity: 1;
                                            transform: scale(1.4);
                                            filter: brightness(1.6);
                                          }
                                          50% {
                                            opacity: 0.2;
                                            transform: scale(0.6);
                                            filter: brightness(0.5);
                                          }
                                          75% {
                                            opacity: 1;
                                            transform: scale(1.3);
                                            filter: brightness(1.5);
                                          }
                                          100% {
                                            opacity: 0.3;
                                            transform: scale(0.8);
                                            filter: brightness(0.7);
                                          }
                                        }
                                      `}),a.jsx("div",{className:"hidden lg:block relative z-10 overflow-hidden shadow-md rounded-lg mt-6 border cursor-pointer transition-all",style:{borderColor:$e.border||"#E5E7EB",borderWidth:"1px",backgroundColor:"rgba(255, 255, 255, 0.7)"},onMouseEnter:()=>zt(_e),onMouseLeave:()=>zt(null),onClick:ht=>{var C;ht.stopPropagation();const Vt=(C=be[0])==null?void 0:C.product_id,Rt=Nn(be[0],P);Vt&&Ie(Vt),Rt&&Rt!=="No Product"&&Ft(Rt),ae(!1),B(!0)},children:a.jsxs("div",{className:"p-6 flex flex-col h-full items-center justify-center min-h-[200px] relative rounded-lg transition-all duration-300",style:{backgroundColor:"transparent",backgroundImage:Lr===_e||Ve===_e?`radial-gradient(circle at center, ${$e.badgeBackground||"rgba(200, 146, 18, 0.15)"}, transparent 70%)`:"none"},children:[(Lr===_e||Ve===_e)&&a.jsxs(a.Fragment,{children:[a.jsx(Ml,{className:"absolute top-4 left-4 w-3 h-3",style:{color:$e.background||"#C89212",animationDelay:"0ms",animation:"fadeIn 1.2s ease-in forwards, sparkle 2.8s ease-in-out infinite",filter:"drop-shadow(0 0 4px currentColor) drop-shadow(0 0 8px currentColor)"}}),a.jsx($l,{className:"absolute top-6 right-6 w-4 h-4",style:{color:$e.background||"#C89212",animationDelay:"300ms",animation:"fadeIn 1.2s ease-in 0.3s forwards, twinkle 2.4s ease-in-out infinite",filter:"drop-shadow(0 0 5px currentColor) drop-shadow(0 0 10px currentColor)"}}),a.jsx(Ml,{className:"absolute bottom-8 left-8 w-3.5 h-3.5",style:{color:$e.background||"#C89212",animationDelay:"600ms",animation:"fadeIn 1.2s ease-in 0.6s forwards, gentlePulse 3.2s ease-in-out infinite",filter:"drop-shadow(0 0 4px currentColor) drop-shadow(0 0 8px currentColor)"}}),a.jsx($l,{className:"absolute bottom-4 right-4 w-3 h-3",style:{color:$e.background||"#C89212",animationDelay:"900ms",animation:"fadeIn 1.2s ease-in 0.9s forwards, sparkle 3.5s ease-in-out infinite",filter:"drop-shadow(0 0 4px currentColor) drop-shadow(0 0 8px currentColor)"}}),a.jsx(Ml,{className:"absolute top-1/2 left-2 w-4 h-4",style:{color:$e.background||"#C89212",animationDelay:"150ms",animation:"fadeIn 1.2s ease-in 0.15s forwards, twinkle 2.1s ease-in-out infinite",filter:"drop-shadow(0 0 5px currentColor) drop-shadow(0 0 10px currentColor)"}}),a.jsx($l,{className:"absolute top-1/2 right-2 w-3 h-3",style:{color:$e.background||"#C89212",animationDelay:"450ms",animation:"fadeIn 1.2s ease-in 0.45s forwards, gentlePulse 2.9s ease-in-out infinite",filter:"drop-shadow(0 0 4px currentColor) drop-shadow(0 0 8px currentColor)"}}),a.jsx(Ml,{className:"absolute top-4 left-1/2 w-3.5 h-3.5",style:{color:$e.background||"#C89212",animationDelay:"750ms",animation:"fadeIn 1.2s ease-in 0.75s forwards, sparkle 2.6s ease-in-out infinite",filter:"drop-shadow(0 0 4px currentColor) drop-shadow(0 0 8px currentColor)"}}),a.jsx($l,{className:"absolute bottom-2 left-1/2 w-3 h-3",style:{color:$e.background||"#C89212",animationDelay:"1050ms",animation:"fadeIn 1.2s ease-in 1.05s forwards, twinkle 3.1s ease-in-out infinite",filter:"drop-shadow(0 0 5px currentColor) drop-shadow(0 0 10px currentColor)"}}),a.jsx(Ml,{className:"absolute top-1/4 right-1/4 w-2.5 h-2.5",style:{color:$e.background||"#C89212",animationDelay:"200ms",animation:"fadeIn 1.2s ease-in 0.2s forwards, gentlePulse 3.4s ease-in-out infinite",filter:"drop-shadow(0 0 3px currentColor) drop-shadow(0 0 6px currentColor)"}}),a.jsx($l,{className:"absolute bottom-1/4 left-1/4 w-3.5 h-3.5",style:{color:$e.background||"#C89212",animationDelay:"800ms",animation:"fadeIn 1.2s ease-in 0.8s forwards, sparkle 3.0s ease-in-out infinite",filter:"drop-shadow(0 0 4px currentColor) drop-shadow(0 0 8px currentColor)"}}),a.jsx(Ml,{className:"absolute top-3/4 right-1/3 w-3 h-3",style:{color:$e.background||"#C89212",animationDelay:"500ms",animation:"fadeIn 1.2s ease-in 0.5s forwards, twinkle 2.7s ease-in-out infinite",filter:"drop-shadow(0 0 4px currentColor) drop-shadow(0 0 8px currentColor)"}}),a.jsx($l,{className:"absolute bottom-1/3 left-1/3 w-4 h-4",style:{color:$e.background||"#C89212",animationDelay:"1100ms",animation:"fadeIn 1.2s ease-in 1.1s forwards, gentlePulse 3.3s ease-in-out infinite",filter:"drop-shadow(0 0 5px currentColor) drop-shadow(0 0 10px currentColor)"}})]}),a.jsxs("div",{className:`flex flex-col items-center justify-center gap-2 z-10 ${Lr===_e||Ve===_e?"opacity-100 transition-opacity duration-[1200ms] ease-in":"opacity-0"}`,children:[a.jsx(kn,{className:"h-8 w-8",style:{color:$e.background||"#C89212"}}),a.jsxs("div",{className:"flex flex-col items-center justify-center text-base font-semibold",style:{color:$e.background||"#C89212"},children:[a.jsx("span",{children:"Create"}),a.jsx("span",{children:"New Session"})]})]})]})})]})]}),et>0&&a.jsx("div",{className:"mt-4 md:hidden",children:a.jsx("button",{onClick:()=>Rr(_e),className:"w-full flex items-center justify-center gap-1 px-4 py-2 text-sm font-medium text-[#2D4660] bg-white hover:bg-gray-50 rounded-md border border-gray-300 transition-colors",children:it?a.jsxs(a.Fragment,{children:["Show Less",a.jsx(zn,{className:"h-4 w-4 rotate-180"})]}):a.jsxs(a.Fragment,{children:["Show More (",et,")",a.jsx(zn,{className:"h-4 w-4"})]})})})]})},_e)}),(Ge.length>0||Se.length>0)&&a.jsxs("div",{className:"grid grid-cols-1 gap-0 sm:gap-6 sm:grid-cols-2 lg:grid-cols-3",children:[[...Ge,...Se].map(_e=>{const be=Dr(_e),it=be.icon,Dt=Yr(_e),et=be.text==="Closed",Mt=Nn(_e,P),At=_e.product_id?q[_e.product_id]:void 0,$e=ns(Mt,At),gt=Ge.includes(_e);return a.jsxs("div",{className:"relative z-10 bg-white overflow-visible shadow-md rounded-lg rounded-tl-none hover:shadow-lg transition-shadow cursor-pointer mt-6 border",style:{borderColor:$e.border,borderWidth:"1px",opacity:et&&Tr!==_e.id?.75:1},onMouseEnter:()=>Bt(_e.id),onMouseLeave:()=>Bt(null),onClick:()=>pr(_e),children:[gt&&(b||N==="admin"||N==="system-admin")&&a.jsx("div",{className:"absolute z-20 bottom-[-20px] left-1/2 -translate-x-1/2 md:bottom-auto md:left-auto md:translate-x-0 md:right-[-20px] md:top-1/2 md:-translate-y-1/2",children:a.jsx("button",{onClick:yt=>{yt.stopPropagation();const Pt=_e.product_id,Ut=Nn(_e,P);Pt&&Ie(Pt),Ut&&Ut!=="No Product"&&Ft(Ut),ae(!1),B(!0)},className:"flex items-center justify-center w-10 h-10 rounded-full transition-colors shadow-md hover:shadow-lg",style:{backgroundColor:$e.background||"#C89212",color:$e.text||"#FFFFFF"},onMouseEnter:yt=>{const Pt=$e.background||"#C89212";yt.currentTarget.style.backgroundColor=Pt,yt.currentTarget.style.filter="brightness(0.8)"},onMouseLeave:yt=>{yt.currentTarget.style.backgroundColor=$e.background||"#C89212",yt.currentTarget.style.filter="brightness(1)"},title:`Create new session for ${Mt}`,children:a.jsx(kn,{className:"h-5 w-5"})})}),Dn(_e,Mt,$e,be,it,Dt,et,!0,_e.product_id)]},_e.id)}),Le.length===2&&Ge.length+Se.length>0&&a.jsx("div",{className:"hidden lg:block relative z-10 bg-white overflow-visible shadow-md rounded-lg hover:shadow-lg transition-shadow mt-6 border border-gray-200",children:a.jsx("div",{className:"p-6 flex flex-col h-full items-end justify-center min-h-[200px]",children:a.jsxs("button",{onClick:()=>{ae(!0),B(!0)},className:"flex items-center px-6 py-3 bg-[#C89212] text-white rounded-lg hover:bg-[#6A4234] transition-colors font-semibold",children:[a.jsx(kn,{className:"h-5 w-5 mr-2"}),"Create Session"]})})})]})]})})()]})]})]}),a.jsx(Jn,{isOpen:V,onClose:Ee,title:"Create Voting Session",maxWidth:"max-w-3xl",children:a.jsxs("form",{onSubmit:cs,className:"space-y-6",children:[a.jsxs("div",{className:"space-y-1",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Product *"}),!_t&&!we?a.jsx("div",{className:"space-y-3",children:a.jsxs("div",{className:"flex flex-col gap-3 sm:flex-row sm:items-end",children:[a.jsx("div",{className:"flex-1 w-full",children:a.jsx(fT,{label:"",products:xe,value:H,onChange:ie=>{Ie(ie),ie&&ve(""),K.product&&te(Se=>{const De={...Se};return delete De.product,De})},isLoading:ee,error:wt,disabled:ee||xe.length===0,placeholder:"Select a product",helperText:!ee&&xe.length===0&&!wt&&Q?"No products found yet. Enter a product name below to create one.":void 0,allowDelete:Q,onRequestDeleteProduct:Q?(ie=>{L(ie)}):void 0,className:"w-full"})}),Q&&a.jsxs("div",{className:"flex items-center gap-2 sm:flex-none",children:[a.jsx("span",{className:"text-gray-500 font-medium px-2",children:"or"}),a.jsxs("button",{type:"button",onClick:()=>Ot(!0),disabled:ee,className:"px-4 py-2 bg-[#1E5461] text-white rounded-md hover:bg-[#576C71] transition-colors font-medium whitespace-nowrap disabled:opacity-50 disabled:cursor-not-allowed",children:[a.jsx(kn,{className:"h-4 w-4 inline mr-2"}),"Create New Product"]})]})]})}):we?a.jsxs("div",{className:"flex items-center gap-3 px-4 py-2 border border-gray-300 rounded-md cursor-pointer hover:border-[#2D4660] transition-colors animate-in fade-in duration-300",onClick:()=>{je(null),ve(we.name),ge(we.color),Ot(!0),Y(!0),ue(!1)},children:[a.jsx("div",{className:"w-6 h-6 rounded-md border flex-shrink-0",style:{backgroundColor:we.color||"#2D4660",borderColor:we.color||"#2D4660"}}),a.jsx("span",{className:"font-medium text-gray-900 flex-1",children:we.name}),a.jsx("span",{className:"text-xs text-gray-500",children:"Click to edit"})]}):Q&&_t?a.jsx("div",{className:"space-y-3",children:a.jsxs("div",{className:"flex gap-3 items-center",children:[a.jsxs("div",{className:"flex-1",style:{animation:"dramaticSlideIn 1.2s cubic-bezier(0.34, 1.56, 0.64, 1) forwards"},children:[a.jsx("style",{children:`
                      @keyframes dramaticSlideIn {
                        from {
                          opacity: 0;
                          transform: translateX(150px) scale(0.9);
                        }
                        to {
                          opacity: 1;
                          transform: translateX(0) scale(1);
                        }
                      }
                    `}),a.jsx("input",{type:"text",value:X,onChange:ie=>{ve(ie.target.value),ie.target.value.trim()&&!$&&setTimeout(()=>Y(!0),200),wt&&Ct(null)},placeholder:"Enter product name...",autoFocus:!0,className:"w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-0 focus:border-[#2D4660]"})]}),$&&a.jsxs("div",{className:"flex items-center gap-2 overflow-hidden",style:{animation:"slideInFromRight 1s ease-out forwards"},children:[a.jsx("style",{children:`
                        @keyframes slideInFromRight {
                          from {
                            opacity: 0;
                            transform: translateX(100px);
                          }
                          to {
                            opacity: 1;
                            transform: translateX(0);
                          }
                        }
                      `}),a.jsx("label",{className:"text-sm font-medium text-gray-700 whitespace-nowrap",children:"Product Color"}),a.jsx("button",{type:"button",onClick:()=>{It(ce||"#2D4660"),ot(!0),setTimeout(()=>{var ie;(ie=document.getElementById("native-color-input"))==null||ie.click()},100)},className:"block w-10 h-10 rounded-md border-2 border-gray-300 hover:border-gray-400 transition-all flex items-center justify-center overflow-hidden",style:ce?{backgroundColor:ce}:{backgroundColor:"#ffffff"},children:!ce&&a.jsx("img",{src:"/colorpicker.png",alt:"Color Picker",className:"w-8 h-8 object-contain"})})]})]})}):null,K.product&&a.jsxs("p",{className:"text-sm text-red-600 flex items-center",children:[a.jsx(Yt,{className:"h-4 w-4 mr-1"}),K.product]}),wt&&(_t||!!we)&&a.jsxs("p",{className:"text-sm text-red-600 flex items-center",children:[a.jsx(Yt,{className:"h-4 w-4 mr-1"}),wt]})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Session Title *"}),a.jsx("input",{ref:Or,type:"text",name:"title",value:ne.title,onChange:ir,placeholder:"e.g., Q3 Product Priorities, Sprint 5, Sprint 5: Mobile Updates",className:`w-full px-4 py-2 border rounded-md focus:outline-none focus:ring-0 focus:border-[#2d4660] ${K.title?"border-red-500":"border-gray-300"}`}),K.title&&a.jsxs("p",{className:"mt-1 text-sm text-red-600 flex items-center",children:[a.jsx(Yt,{className:"h-4 w-4 mr-1"}),K.title]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Session Goal *"}),a.jsx("textarea",{name:"goal",value:ne.goal,onChange:ir,rows:2,placeholder:"Describe the purpose of this voting session...",className:`w-full px-4 py-2 border rounded-md focus:outline-none focus:ring-0 focus:border-[#2d4660] ${K.goal?"border-red-500":"border-gray-300"}`}),K.goal&&a.jsxs("p",{className:"mt-1 text-sm text-red-600 flex items-center",children:[a.jsx(Yt,{className:"h-4 w-4 mr-1"}),K.goal]})]})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Votes Per User *"}),a.jsxs("div",{className:"flex items-center mb-3",children:[a.jsx("input",{type:"checkbox",id:"modalAutoVotes",checked:ne.useAutoVotes,onChange:ie=>me(Se=>({...Se,useAutoVotes:ie.target.checked})),className:"h-4 w-4 cursor-pointer rounded border-gray-300 accent-[#3A9B5C] focus:outline-none focus:ring-0"}),a.jsx("label",{htmlFor:"modalAutoVotes",className:"ml-2 text-sm text-gray-700 cursor-pointer",children:"Auto-calculate votes (half of feature count, minimum 1)"})]}),!ne.useAutoVotes&&a.jsxs(a.Fragment,{children:[a.jsx("input",{type:"number",name:"votesPerUser",value:ne.votesPerUser,onChange:ir,min:"1",max:"100",className:`w-full px-4 py-2 border rounded-md focus:outline-none focus:ring-0 focus:border-[#2d4660] ${K.votesPerUser?"border-red-500":"border-gray-300"}`}),K.votesPerUser&&a.jsxs("p",{className:"mt-1 text-sm text-red-600 flex items-center",children:[a.jsx(Yt,{className:"h-4 w-4 mr-1"}),K.votesPerUser]})]}),a.jsx("p",{className:"mt-2 text-xs text-gray-500",children:ne.useAutoVotes?"Votes will automatically be set to half the number of features (minimum 1).":"Each stakeholder receives this many votes."})]}),a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Start Date *"}),a.jsx("input",{type:"date",name:"startDate",value:ne.startDate,onChange:ir,className:"w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-0 focus:border-[#2d4660]"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"End Date *"}),a.jsx("input",{type:"date",name:"endDate",value:ne.endDate,onChange:ir,className:`w-full px-4 py-2 border rounded-md focus:outline-none focus:ring-0 focus:border-[#2d4660] ${K.endDate?"border-red-500":"border-gray-300"}`}),K.endDate&&a.jsxs("p",{className:"mt-1 text-sm text-red-600 flex items-center",children:[a.jsx(Yt,{className:"h-4 w-4 mr-1"}),K.endDate]})]})]})]}),K.submit&&a.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-3 text-sm text-red-700 flex items-center",children:[a.jsx(Yt,{className:"h-4 w-4 mr-2"}),K.submit]}),a.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t",children:[a.jsx(at,{type:"button",variant:"secondary",onClick:Ee,disabled:se,children:"Cancel"}),a.jsx(at,{type:"submit",variant:_t&&X.trim()&&ce?"gold":"primary",disabled:se,className:`transition-all duration-500 ease-in-out ${_t&&X.trim()&&ce?"relative overflow-hidden":""}`,children:se?"Creating...":_t&&X.trim()&&ce?a.jsxs(a.Fragment,{children:[a.jsxs("span",{className:"relative z-10 flex items-center",children:[a.jsx(kn,{className:"h-4 w-4 mr-2"}),"Create New Product and Session"]}),a.jsx("span",{className:"absolute top-1 left-1/4 w-1 h-1 bg-white rounded-full animate-ping opacity-75",style:{animationDelay:"0ms",animationDuration:"1.5s"}}),a.jsx("span",{className:"absolute top-2 right-1/3 w-1 h-1 bg-white rounded-full animate-ping opacity-75",style:{animationDelay:"300ms",animationDuration:"1.5s"}}),a.jsx("span",{className:"absolute bottom-2 left-1/3 w-1 h-1 bg-white rounded-full animate-ping opacity-75",style:{animationDelay:"600ms",animationDuration:"1.5s"}}),a.jsx("span",{className:"absolute bottom-1 right-1/4 w-1 h-1 bg-white rounded-full animate-ping opacity-75",style:{animationDelay:"900ms",animationDuration:"1.5s"}})]}):"Create Session"})]})]})}),ze&&a.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",onClick:()=>ot(!1),children:a.jsx("div",{className:"bg-white rounded-lg shadow-xl px-3 py-2 w-auto mx-4",onClick:ie=>ie.stopPropagation(),children:a.jsxs("div",{className:"flex gap-3 items-stretch",children:[a.jsxs("div",{className:"flex-shrink-0",style:{width:"240px",height:"260px"},children:[a.jsx("input",{id:"native-color-input",type:"color",value:pt,onChange:ie=>It(ie.target.value),ref:ie=>{ie&&ze&&setTimeout(()=>ie.click(),50)},className:"opacity-0 absolute",style:{width:"1px",height:"1px"}}),a.jsx("div",{className:"w-full h-full"})]}),a.jsxs("button",{type:"button",onClick:()=>{ge(pt),ot(!1),setTimeout(()=>{var ie;(ie=Or.current)==null||ie.focus()},100)},className:"px-6 rounded-lg text-white font-bold shadow-lg hover:shadow-xl transition-all flex flex-col items-center justify-center gap-3 text-lg flex-shrink-0",style:{backgroundColor:pt,height:"260px",minWidth:"100px"},children:[a.jsx(Fr,{className:"h-8 w-8"}),a.jsxs("div",{className:"text-center leading-tight",children:[a.jsx("div",{children:"Looks"}),a.jsx("div",{children:"Good"})]})]})]})})}),N==="stakeholder"&&u.length>0&&a.jsx("div",{className:"relative z-10 mt-8 bg-blue-50 border border-blue-200 rounded-lg p-4",children:a.jsxs("div",{className:"flex items-start",children:[a.jsx(Fn,{className:"h-5 w-5 text-blue-600 mr-3 mt-0.5"}),a.jsxs("div",{className:"text-sm text-blue-800",children:[a.jsx("p",{className:"font-medium mb-1",children:"About Voting Sessions:"}),a.jsx("p",{children:"Click on any session card to cast your votes. You can change your votes at any time before the voting period ends."})]})]})}),N==="admin"&&ln.length>0&&Le.length===0&&a.jsx("div",{className:"relative z-10 mt-8 bg-blue-50 border border-blue-200 rounded-lg p-4",children:a.jsxs("div",{className:"flex items-start",children:[a.jsx(Fn,{className:"h-5 w-5 text-blue-600 mr-3 mt-0.5"}),a.jsxs("div",{className:"text-sm text-blue-800",children:[a.jsx("p",{className:"font-medium mb-1",children:"About Voting Sessions:"}),a.jsx("p",{children:"Click on any session card to cast your votes. You can change your votes at any time before the voting period ends."})]})]})}),N==="admin"&&Le.length>0&&a.jsx("div",{className:"relative z-10 mt-8 bg-blue-50 border border-blue-200 rounded-lg p-4",children:a.jsxs("div",{className:"flex items-start",children:[a.jsx(Un,{className:"h-5 w-5 text-blue-600 mr-3 mt-0.5"}),a.jsxs("div",{className:"text-sm text-blue-800",children:[a.jsx("p",{className:"font-medium mb-1",children:"Managing Sessions:"}),a.jsx("p",{children:'Click "Email Invite to Stakeholders" on any session card to send invitation links. Use the Admins and Stakeholders buttons to manage access.'})]})]})}),N==="system-admin"&&a.jsx("div",{className:"relative z-10 mt-8 bg-purple-50 border border-purple-200 rounded-lg p-4",children:a.jsxs("div",{className:"flex items-start",children:[a.jsx(Cn,{className:"h-5 w-5 text-purple-600 mr-3 mt-0.5"}),a.jsxs("div",{className:"text-sm text-purple-900",children:[a.jsx("p",{className:"font-medium mb-1",children:"System Admin Tips:"}),a.jsxs("ul",{className:"list-disc list-inside space-y-1",children:[a.jsx("li",{children:"Use this view to audit every session across the tenant without switching teams."}),a.jsx("li",{children:"Jump into any card to open the admin dashboard and assist local admins."}),a.jsx("li",{children:"Need a quick rollout? Click Create Session above to spin up a new voting round for any product."})]})]})]})}),a.jsx(yT,{currentRole:b&&N==="system-admin"?"system-admin":N==="admin"?"session-admin":"stakeholder",onSelectStakeholder:()=>E("stakeholder"),onSelectSessionAdmin:()=>E("admin"),onSelectSystemAdmin:b?()=>E("system-admin"):void 0,showRoleToggle:Tt||b}),ye&&a.jsxs(Jn,{isOpen:!0,onClose:()=>L(null),title:"Delete Product",children:[a.jsxs("p",{className:"text-sm text-gray-700 mb-4",children:["Are you sure you want to delete ",a.jsx("span",{className:"font-semibold",children:ye.name}),"? This will remove it for everyone in your tenant."]}),a.jsxs("div",{className:"flex justify-end gap-3",children:[a.jsx(at,{variant:"secondary",onClick:()=>L(null),disabled:Fe,children:"Cancel"}),a.jsx(at,{variant:"danger",onClick:Gr,disabled:Fe,children:Fe?"Deleting":"Delete"})]})]}),Ir&&a.jsx(Jn,{isOpen:!0,onClose:()=>{ls(null),hr(""),nr(null),mr(!1)},title:"Edit Product",children:a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Product Name *"}),a.jsx("input",{type:"text",value:Qt,onChange:ie=>hr(ie.target.value),placeholder:"Enter product name",className:"w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-0 focus:border-[#2D4660]"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Product Color"}),a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("button",{type:"button",onClick:()=>{sn(Cr||"#2D4660"),mr(!0)},className:"block w-12 h-12 rounded-md border-2 border-gray-300 hover:border-gray-400 transition-all flex items-center justify-center overflow-hidden",style:Cr?{backgroundColor:Cr}:{backgroundColor:"#ffffff"},children:!Cr&&a.jsx("img",{src:"/colorpicker.png",alt:"Color Picker",className:"w-8 h-8 object-contain"})}),a.jsx("span",{className:"text-sm text-gray-600",children:Cr||"No color selected"})]})]}),a.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t",children:[a.jsx(at,{variant:"secondary",onClick:()=>{ls(null),hr(""),nr(null),mr(!1)},disabled:Er,children:"Cancel"}),a.jsx(at,{variant:"primary",onClick:async()=>{if(!(!(Ir!=null&&Ir.id)||!Qt.trim())){zr(!0);try{await Z0(Ir.id,{name:Qt.trim(),color_hex:Cr});const ie=(e==null?void 0:e.tenant_id)??(e==null?void 0:e.tenantId);if(ie){const Se=await ra(ie);I(Se.sort((Ge,_e)=>Ge.name.localeCompare(_e.name)));const De={},Ye={};Se.forEach(Ge=>{De[Ge.id]=Ge.name||"",Ge.color_hex&&(Ye[Ge.id]=Ge.color_hex)}),R(De),F(Ye)}ls(null),hr(""),nr(null),mr(!1),await r(),await wn()}catch(ie){console.error("Error updating product:",ie),alert("Failed to update product. Please try again.")}finally{zr(!1)}}},disabled:Er||!Qt.trim(),children:Er?"Updating...":"Update Product"})]})]})}),Vn&&a.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",onClick:()=>mr(!1),children:a.jsx("div",{className:"bg-white rounded-lg shadow-xl px-3 py-2 w-auto mx-4",onClick:ie=>ie.stopPropagation(),children:a.jsxs("div",{className:"flex gap-3 items-stretch",children:[a.jsxs("div",{className:"flex-shrink-0",style:{width:"240px",height:"260px"},children:[a.jsx("input",{id:"edit-native-color-input",type:"color",value:Xn,onChange:ie=>sn(ie.target.value),ref:ie=>{ie&&Vn&&setTimeout(()=>ie.click(),50)},className:"opacity-0 absolute",style:{width:"1px",height:"1px"}}),a.jsx("div",{className:"w-full h-full"})]}),a.jsxs("button",{type:"button",onClick:()=>{nr(Xn),mr(!1)},className:"px-6 rounded-lg text-white font-bold shadow-lg hover:shadow-xl transition-all flex flex-col items-center justify-center gap-3 text-lg flex-shrink-0",style:{backgroundColor:Xn,height:"260px",minWidth:"100px"},children:[a.jsx(Fr,{className:"h-8 w-8"}),a.jsxs("div",{className:"text-center leading-tight",children:[a.jsx("div",{children:"Looks"}),a.jsx("div",{children:"Good"})]})]})]})})})]})}function CZ(){const{currentUser:e,setCurrentSession:t,refreshSessions:r,setCurrentUser:n}=Ui(),s=Ss(),i=async()=>{try{await Ue.auth.signOut()}catch{}try{t(null)}catch{}n(null);try{localStorage.removeItem("voting_system_current_session"),localStorage.removeItem("azureDevOpsAuthInProgress"),sessionStorage.removeItem("oauth_return_path"),sessionStorage.removeItem("oauth_action")}catch{}s("/login",{replace:!0})},[l,u]=v.useState({title:"",goal:"",votesPerUser:10,useAutoVotes:!0,startDate:new Date().toISOString().split("T")[0],endDate:new Date(Date.now()+10080*60*1e3).toISOString().split("T")[0]}),[d,m]=v.useState({}),[f,p]=v.useState(!1),[y,x]=v.useState(!1),[j,b]=v.useState([]),[S,N]=v.useState(""),[E,k]=v.useState(""),[T,O]=v.useState(!1),[P,R]=v.useState(!1),[q,F]=v.useState(null);v.useEffect(()=>{(async()=>{var te;if(!e){b([]),N("");return}const K=e.tenant_id??e.tenantId??null;if(!K){b([]),N(""),F("No tenant assigned. Products cannot be loaded.");return}O(!0),F(null);try{const se=await ra(K);b(se),N(((te=se[0])==null?void 0:te.id)??"")}catch(se){console.error("Error loading products for create session:",se),la!=null&&la(se)?F("Products are not configured yet. Please create the `products` table in Supabase."):F("Unable to load products. You can still create a session without a product tag."),b([]),N("")}finally{O(!1)}})()},[e]);const V=()=>{const me="ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";let K="";for(let te=0;te<8;te++)K+=me.charAt(Math.floor(Math.random()*me.length));return K},B=()=>{const me={};l.title.trim()||(me.title="Session title is required"),l.goal.trim()||(me.goal="Session goal is required"),l.useAutoVotes||(l.votesPerUser<1&&(me.votesPerUser="Votes per user must be at least 1"),l.votesPerUser>100&&(me.votesPerUser="Votes per user cannot exceed 100"));const K=new Date(l.startDate);return new Date(l.endDate)<=K&&(me.endDate="End date must be after start date"),!q&&j.length>0&&!S&&(me.product="Please select a product for this session"),m(me),Object.keys(me).length===0},Q=async me=>{if(me.preventDefault(),!(!B()||!e)){p(!0);try{const K=V(),te=j.find(de=>de.id===S)||null;if(te!=null&&te.id&&await LC(te.id)){m({submit:`There is already an active session for ${te.name}. Each product can only have one active session at a time.`}),p(!1);return}const se=await zC({title:l.title,goal:l.goal,votes_per_user:l.votesPerUser,use_auto_votes:l.useAutoVotes,start_date:l.startDate,end_date:l.endDate,is_active:!0,session_code:K,product_id:(te==null?void 0:te.id)??null,product_name:null});await Ql(se.id,e.id),await r(),x(!0),setTimeout(()=>{t(se),s("/admin")},3e3)}catch(K){console.error("Error creating session:",K),m({submit:"Failed to create session. Please try again."})}finally{p(!1)}}},ae=async()=>{if(!e)return;const me=e.tenant_id??e.tenantId??null;if(!me){F("Cannot create products because no tenant is associated with your account.");return}const K=E.trim();if(!K){F("Product name is required.");return}R(!0),F(null);try{const te=await RC(me,K);b(se=>[...se,te].sort((xe,I)=>xe.name.localeCompare(I.name))),N(te.id),k("")}catch(te){console.error("Error creating product:",te),F(te instanceof Error?te.message:"Unable to create product. Please try again.")}finally{R(!1)}},ne=me=>{const{name:K,value:te}=me.target;u(se=>({...se,[K]:K==="votesPerUser"?parseInt(te)||0:te})),d[K]&&m(se=>{const de={...se};return delete de[K],de})};return y?a.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center p-4",children:a.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-8 max-w-md w-full text-center",children:[a.jsx("div",{className:"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4",children:a.jsx(Fr,{className:"h-10 w-10 text-green-600"})}),a.jsx("h2",{className:"text-2xl font-bold text-[#2d4660] mb-2",children:"Session Created!"}),a.jsx("p",{className:"text-gray-600 mb-6",children:"Your voting session has been created successfully."}),a.jsxs("div",{className:"bg-blue-50 border-2 border-blue-200 rounded-lg p-4 mb-6",children:[a.jsx("p",{className:"text-sm text-gray-600 mb-2",children:"Success!"}),a.jsx("p",{className:"text-base text-[#2d4660] font-medium",children:"Your session has been created."}),a.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"You can now invite stakeholders from your session dashboard."})]}),a.jsx("p",{className:"text-sm text-gray-500",children:"Redirecting to admin dashboard..."})]})}):a.jsxs("div",{className:"container mx-auto p-4 max-w-6xl min-h-screen pb-8",children:[a.jsx("div",{className:"hidden md:flex md:justify-center mb-2",children:a.jsx("img",{src:"https://www.steeldynamics.com/wp-content/uploads/2024/05/New-Millennium-color-logo1.png",alt:"New Millennium Building Systems Logo",className:"-mt-4 cursor-pointer hover:opacity-80 transition-opacity",style:{height:"96px",width:"auto"},onClick:()=>s("/sessions")})}),a.jsxs("div",{className:"flex justify-between items-center mb-6",children:[a.jsxs("div",{className:"flex items-center",children:[a.jsx("img",{src:"https://media.licdn.com/dms/image/C4D0BAQEC3OhRqehrKg/company-logo_200_200/0/1630518354793/new_millennium_building_systems_logo?e=2147483647&v=beta&t=LM3sJTmQZet5NshZ-RNHXW1MMG9xSi1asp-VUeSA9NA",alt:"New Millennium Building Systems Logo",className:"mr-4 md:hidden",style:{width:"40px",height:"40px"}}),a.jsx("button",{onClick:()=>s("/sessions"),className:"mr-2 p-1 rounded-full hover:bg-gray-200 cursor-pointer",children:a.jsx(xc,{className:"h-6 w-6"})}),a.jsx("h1",{className:"text-2xl font-bold text-[#2d4660] md:text-3xl",children:"Create Voting Session"})]}),a.jsxs("button",{onClick:i,className:"flex items-center px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-colors",children:[a.jsx(An,{className:"h-4 w-4 mr-2"}),a.jsx("span",{className:"hidden sm:inline",children:"Logout"})]})]}),a.jsx("div",{className:"relative z-10 bg-white rounded-lg shadow-md p-6",children:a.jsxs("form",{onSubmit:Q,className:"space-y-6",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Session Title *"}),a.jsx("input",{type:"text",name:"title",value:l.title,onChange:ne,placeholder:"e.g., Q2 2025 Product Roadmap",className:`w-full px-4 py-2 border rounded-md focus:ring-2 focus:ring-[#2d4660] focus:border-transparent ${d.title?"border-red-500":"border-gray-300"}`}),d.title&&a.jsxs("p",{className:"mt-1 text-sm text-red-600 flex items-center",children:[a.jsx(Yt,{className:"h-4 w-4 mr-1"}),d.title]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Session Goal *"}),a.jsx("textarea",{name:"goal",value:l.goal,onChange:ne,rows:3,placeholder:"Describe the purpose of this voting session...",className:`w-full px-4 py-2 border rounded-md focus:ring-2 focus:ring-[#2d4660] focus:border-transparent ${d.goal?"border-red-500":"border-gray-300"}`}),d.goal&&a.jsxs("p",{className:"mt-1 text-sm text-red-600 flex items-center",children:[a.jsx(Yt,{className:"h-4 w-4 mr-1"}),d.goal]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Product *"}),T?a.jsx("p",{className:"text-sm text-gray-500",children:"Loading products..."}):j.length>0?a.jsxs("select",{value:S,onChange:me=>{N(me.target.value),d.product&&m(K=>{const te={...K};return delete te.product,te})},className:`w-full px-4 py-2 border rounded-md focus:ring-2 focus:ring-[#2d4660] focus:border-transparent ${d.product?"border-red-500":"border-gray-300"}`,children:[a.jsx("option",{value:"",children:"Select a product"}),j.map(me=>a.jsx("option",{value:me.id,children:me.name},me.id))]}):a.jsx("p",{className:"text-sm text-gray-500",children:q??"No products found. Add a product below to associate this session."}),d.product&&a.jsxs("p",{className:"mt-1 text-sm text-red-600 flex items-center",children:[a.jsx(Yt,{className:"h-4 w-4 mr-1"}),d.product]}),q&&j.length>0&&a.jsx("p",{className:"mt-1 text-sm text-red-600",children:q}),a.jsxs("div",{className:"mt-4",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Add a new product"}),a.jsxs("div",{className:"flex flex-col sm:flex-row gap-2",children:[a.jsx("input",{type:"text",value:E,onChange:me=>{k(me.target.value),q&&F(null)},placeholder:"e.g., Catalyst Cloud",className:"w-full px-4 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-[#2d4660] focus:border-transparent"}),a.jsx("button",{type:"button",onClick:ae,disabled:P,className:"px-4 py-2 bg-[#2d4660] text-white rounded-md hover:bg-[#1d3a53] transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:P?"Adding...":"Add Product"})]}),a.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"New products become available immediately for all session admins in your tenant."})]})]}),a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[a.jsx(Fn,{className:"h-4 w-4 inline mr-1"}),"Votes Per User *"]}),a.jsxs("div",{className:"flex items-center mb-3",children:[a.jsx("input",{type:"checkbox",id:"useAutoVotes",checked:l.useAutoVotes,onChange:me=>u(K=>({...K,useAutoVotes:me.target.checked})),className:"h-4 w-4 cursor-pointer rounded border-gray-300 accent-[#3A9B5C] focus:outline-none focus:ring-0"}),a.jsx("label",{htmlFor:"useAutoVotes",className:"ml-2 text-sm text-gray-700 cursor-pointer",children:"Auto-calculate votes (half of feature count, minimum 1)"})]}),!l.useAutoVotes&&a.jsxs(a.Fragment,{children:[a.jsx("input",{type:"number",name:"votesPerUser",value:l.votesPerUser,onChange:ne,min:"1",max:"100",className:`w-full px-4 py-2 border rounded-md focus:ring-2 focus:ring-[#2d4660] focus:border-transparent ${d.votesPerUser?"border-red-500":"border-gray-300"}`}),d.votesPerUser&&a.jsxs("p",{className:"mt-1 text-sm text-red-600 flex items-center",children:[a.jsx(Yt,{className:"h-4 w-4 mr-1"}),d.votesPerUser]})]}),a.jsx("p",{className:"mt-2 text-sm text-gray-500",children:l.useAutoVotes?"Votes will automatically be set to half the number of features (1 feature = 1 vote, 2 features = 1 vote, 4 features = 2 votes, etc.)":"Each stakeholder will have this many votes to distribute across features"})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[a.jsx(Wr,{className:"h-4 w-4 inline mr-1"}),"Start Date *"]}),a.jsx("input",{type:"date",name:"startDate",value:l.startDate,onChange:ne,className:"w-full px-4 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-[#2d4660] focus:border-transparent"})]}),a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[a.jsx(Wr,{className:"h-4 w-4 inline mr-1"}),"End Date *"]}),a.jsx("input",{type:"date",name:"endDate",value:l.endDate,onChange:ne,className:`w-full px-4 py-2 border rounded-md focus:ring-2 focus:ring-[#2d4660] focus:border-transparent ${d.endDate?"border-red-500":"border-gray-300"}`}),d.endDate&&a.jsxs("p",{className:"mt-1 text-sm text-red-600 flex items-center",children:[a.jsx(Yt,{className:"h-4 w-4 mr-1"}),d.endDate]})]})]}),a.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:a.jsxs("div",{className:"flex items-start",children:[a.jsx(Un,{className:"h-5 w-5 text-blue-600 mr-3 mt-0.5"}),a.jsxs("div",{className:"text-sm text-blue-800",children:[a.jsx("p",{className:"font-medium mb-1",children:"Next Steps:"}),a.jsxs("ul",{className:"list-disc list-inside space-y-1",children:[a.jsx("li",{children:"After creating the session, you'll be assigned as the admin"}),a.jsx("li",{children:"You can add stakeholders and other admins from the admin dashboard"}),a.jsx("li",{children:'Use the "Email Invite" button to send stakeholders a link to join'})]})]})]})}),d.submit&&a.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:a.jsxs("p",{className:"text-sm text-red-800 flex items-center",children:[a.jsx(Yt,{className:"h-4 w-4 mr-2"}),d.submit]})}),a.jsxs("div",{className:"flex justify-end space-x-3 pt-4 border-t",children:[a.jsx("button",{type:"button",onClick:()=>s("/sessions"),className:"px-6 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50 transition-colors",disabled:f,children:"Cancel"}),a.jsx("button",{type:"submit",className:"px-6 py-2 bg-[#2d4660] text-white rounded-md hover:bg-[#1d3a53] transition-colors disabled:opacity-50 disabled:cursor-not-allowed",disabled:f,children:f?"Creating...":"Create Session"})]})]})})]})}async function Lw(e){const{error:t}=await Ue.functions.invoke("send-invitation-email",{body:e});if(t)throw t}function EZ({products:e,value:t,onChange:r,label:n,error:s}){const[i,l]=v.useState(!1),u=v.useRef(null);v.useEffect(()=>{function f(p){u.current&&!u.current.contains(p.target)&&l(!1)}return document.addEventListener("mousedown",f),()=>document.removeEventListener("mousedown",f)},[]);const d=e.find(f=>f.id===t),m=d?ns(d.name,d.color_hex??null):null;return a.jsxs("div",{ref:u,className:"relative",children:[n&&a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:n}),a.jsxs("div",{onClick:()=>l(!i),className:`w-full px-3 py-2 border rounded-md bg-white cursor-pointer flex items-center justify-between hover:border-gray-400 ${s?"border-red-500":"border-gray-300"}`,children:[a.jsxs("div",{className:"flex items-center gap-2 flex-1 min-w-0",children:[d&&m&&a.jsx("div",{className:"w-4 h-4 rounded flex-shrink-0",style:{backgroundColor:m.background}}),a.jsx("span",{className:`text-sm truncate ${t?"text-gray-900":"text-gray-400"}`,children:d?d.name:"Select a Product"})]}),a.jsx(zn,{className:`h-4 w-4 text-gray-400 transition-transform flex-shrink-0 ${i?"transform rotate-180":""}`})]}),i&&a.jsx("div",{className:"absolute z-50 w-full mt-1 bg-white border border-gray-300 rounded-md shadow-lg max-h-60 overflow-y-auto",children:e.length===0?a.jsx("div",{className:"px-3 py-2 text-sm text-gray-500 text-center",children:"No products available"}):e.map(f=>{const p=ns(f.name,f.color_hex??null),y=t===f.id;return a.jsxs("div",{onClick:()=>{r(f.id),l(!1)},className:`px-3 py-2 cursor-pointer hover:bg-gray-50 flex items-center gap-2 ${y?"bg-gray-50":""}`,children:[a.jsx("div",{className:"w-4 h-4 rounded flex-shrink-0",style:{backgroundColor:p.background}}),a.jsx("span",{className:"text-sm text-gray-900 flex-1",children:f.name}),y&&a.jsx(Fr,{className:"h-4 w-4 text-gray-400 flex-shrink-0"})]},f.id)})})]})}function AZ(){const{currentSession:e,currentUser:t,setCurrentUser:r,setCurrentSession:n}=Ui(),s=Ss(),i=async()=>{try{await Ue.auth.signOut()}catch{}try{n(null)}catch{}r(null);try{localStorage.removeItem("voting_system_current_session"),localStorage.removeItem("azureDevOpsAuthInProgress"),sessionStorage.removeItem("oauth_return_path"),sessionStorage.removeItem("oauth_action")}catch{}k(!1),s("/login",{replace:!0})},[l,u]=v.useState([]),[d,m]=v.useState(!0),[f,p]=v.useState(!1),[y,x]=v.useState({name:"",email:""}),[j,b]=v.useState({}),[S,N]=v.useState(!1),[E,k]=v.useState(!1),T=v.useRef(null),[O,P]=v.useState([]),[R,q]=v.useState(""),[F,V]=v.useState([]),[B,Q]=v.useState([]),[ae,ne]=v.useState({});v.useEffect(()=>{if(!E)return;const X=ve=>{T.current&&!T.current.contains(ve.target)&&k(!1)};return document.addEventListener("mousedown",X),document.addEventListener("touchstart",X,{passive:!0}),()=>{document.removeEventListener("mousedown",X),document.removeEventListener("touchstart",X)}},[E]),v.useEffect(()=>{if(!e){s("/sessions");return}te(),me()},[e,s]);const me=async()=>{try{const X=await DC(),ve=await ha(),ce=new Date,ge=X.filter(L=>ve.some(Fe=>Fe.product_id!==L.id?!1:new Date(Fe.end_date)>=ce));P(ge);const ye={};ge.forEach(L=>{ye[L.id]=L.name}),ne(ye)}catch(X){console.error("Error loading products:",X)}},K=async X=>{try{const ve=await ha(),ce=new Date,ge=ve.filter(ye=>ye.product_id!==X?!1:new Date(ye.end_date)>=ce);V(ge)}catch(ve){console.error("Error loading sessions:",ve),V([])}};v.useEffect(()=>{R?(K(R),Q([])):(V([]),Q([]))},[R]);const te=async()=>{if(e){m(!0);try{const X=await WC(e.id);u(X)}catch(X){console.error("Error loading stakeholders:",X)}finally{m(!1)}}},se=X=>/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(X),de=X=>{const ve=new Date,ce=new Date(X.start_date),ge=new Date(X.end_date);return X.is_active&&ve>=ce&&ve<=ge?{text:"Active",color:"text-green-600"}:ve<ce?{text:"Upcoming",color:"text-blue-600"}:{text:"Ended",color:"text-gray-500"}},xe=X=>{const ve=new Date(X.start_date),ce=new Date(X.end_date),ge=ve.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}),ye=ce.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"});return`${ge} - ${ye}`},I=async X=>{X.preventDefault();const ve={};if(y.name.trim()||(ve.name="Name is required"),y.email.trim()?se(y.email)||(ve.email="Invalid email address"):ve.email="Email is required",R||(ve.product="Please select a product"),B.length===0&&(ve.sessions="Please select at least one session"),b(ve),!(Object.keys(ve).length>0)){N(!0);try{for(const ce of B)await VC({session_id:ce,user_name:y.name,user_email:y.email,has_voted:!1});for(const ce of B){const ge=F.find(ye=>ye.id===ce);if(ge)try{const ye=`${window.location.origin}/login?session=${ge.session_code}`;await Lw({to:y.email,subject:`You're invited to vote: ${ge.title}`,text:`Hi,

You've been invited to vote in "${ge.title}".

Open: ${ye}

Best regards,
${(t==null?void 0:t.name)||""}`,html:`<p>Hi,</p><p>You've been invited to vote in <strong>${ge.title}</strong>.</p><p><a href="${ye}">Open the Feature Voting System</a></p><p>Best regards,<br/>${(t==null?void 0:t.name)||""}</p>`})}catch{try{const ye=qC(ge,y.email,(t==null?void 0:t.name)||"");window.location.href=ye}catch{}}}await te(),x({name:"",email:""}),q(""),Q([]),p(!1),b({})}catch(ce){console.error("Error adding stakeholder:",ce),b({submit:"Failed to add stakeholder. Please try again."})}finally{N(!1)}}},H=async X=>{if(e&&confirm("Are you sure you want to remove this stakeholder?"))try{await Rv(e.id,X),await te()}catch(ve){console.error("Error removing stakeholder:",ve),alert("Failed to remove stakeholder")}},Ie=X=>new Date(X).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"});return e?d?a.jsx("div",{className:"min-h-screen w-full bg-gray-50 flex items-center justify-center",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-[#2d4660] mx-auto mb-4"}),a.jsx("p",{className:"text-gray-600",children:"Loading stakeholders..."})]})}):a.jsxs("div",{className:"container mx-auto p-4 max-w-6xl min-h-screen pb-8",children:[a.jsx("div",{className:"hidden md:flex md:justify-center mb-2",children:a.jsx("img",{src:"https://www.steeldynamics.com/wp-content/uploads/2024/05/New-Millennium-color-logo1.png",alt:"New Millennium Building Systems Logo",className:"-mt-4 cursor-pointer hover:opacity-80 transition-opacity",style:{height:"96px",width:"auto"},onClick:()=>s("/sessions")})}),a.jsxs("div",{className:"flex justify-between items-center mb-6",children:[a.jsxs("div",{className:"flex items-center",children:[a.jsx("img",{src:"https://media.licdn.com/dms/image/C4D0BAQEC3OhRqehrKg/company-logo_200_200/0/1630518354793/new_millennium_building_systems_logo?e=2147483647&v=beta&t=LM3sJTmQZet5NshZ-RNHXW1MMG9xSi1asp-VUeSA9NA",alt:"New Millennium Building Systems Logo",className:"mr-4 md:hidden",style:{width:"40px",height:"40px"}}),a.jsx("button",{onClick:()=>s("/admin"),className:"mr-2 p-1 rounded-full hover:bg-gray-200 cursor-pointer",children:a.jsx(xc,{className:"h-6 w-6"})}),a.jsx("h1",{className:"text-2xl font-bold text-[#2d4660] md:text-3xl",children:"Manage Stakeholders"})]}),a.jsxs("div",{ref:T,className:"relative z-40",children:[a.jsxs("div",{className:"hidden md:flex space-x-2",children:[a.jsxs("button",{onClick:()=>s("/admin"),className:"flex items-center px-4 py-2 bg-[#4f6d8e] text-white rounded-lg hover:bg-[#3d5670] transition-colors",children:[a.jsx(pn,{className:"h-4 w-4 mr-2"}),"Admin Dashboard"]}),a.jsxs("button",{onClick:()=>p(!0),className:"flex items-center px-4 py-2 bg-[#c59f2d] text-white rounded-lg hover:bg-[#a88a26] transition-colors",children:[a.jsx(Mo,{className:"h-4 w-4 mr-2"}),"Add Stakeholder"]}),a.jsxs("button",{onClick:i,className:"flex items-center px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-colors",children:[a.jsx(An,{className:"h-4 w-4 mr-2"}),"Logout"]})]}),a.jsx("div",{className:"flex md:hidden",children:a.jsx("button",{onClick:()=>k(!E),className:"p-2 rounded-md border border-gray-200 bg-white shadow-sm","aria-label":"Open menu",children:a.jsx(Rs,{className:"h-5 w-5 text-gray-700"})})}),E&&a.jsx("div",{className:"absolute right-0 mt-2 w-56 bg-white border border-gray-200 rounded-lg shadow-lg md:hidden z-50",children:a.jsxs("div",{className:"py-1",children:[a.jsxs("button",{onClick:()=>{k(!1),s("/admin")},className:"w-full px-3 py-2 flex items-center text-left hover:bg-gray-50",children:[a.jsx(pn,{className:"h-4 w-4 mr-2 text-gray-700"}),"Admin Dashboard"]}),a.jsxs("button",{onClick:()=>{k(!1),p(!0)},className:"w-full px-3 py-2 flex items-center text-left hover:bg-gray-50",children:[a.jsx(Mo,{className:"h-4 w-4 mr-2 text-gray-700"}),"Add Stakeholder"]}),a.jsxs("button",{onClick:()=>{k(!1),i()},className:"w-full px-3 py-2 flex items-center text-left hover:bg-gray-50",children:[a.jsx(An,{className:"h-4 w-4 mr-2 text-gray-700"}),"Logout"]})]})})]})]}),a.jsx("div",{className:"relative z-10 bg-white rounded-lg shadow-md p-4 mb-6",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"text-lg font-semibold text-[#2d4660]",children:"Current Session"}),a.jsx("p",{className:"text-gray-600 mt-1",children:e.title})]}),a.jsxs("div",{className:"text-right",children:[a.jsx("p",{className:"text-sm text-gray-600",children:"Total Stakeholders"}),a.jsx("p",{className:"text-2xl font-bold text-[#2d4660]",children:l.length})]})]})}),a.jsxs("div",{className:"relative z-10 bg-white rounded-lg shadow-md overflow-hidden",children:[a.jsxs("div",{className:"p-6 border-b border-gray-200",children:[a.jsxs("h2",{className:"text-lg font-semibold text-[#2d4660]",children:["Stakeholders (",l.length,")"]}),a.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Manage who can vote in this session"})]}),l.length===0?a.jsxs("div",{className:"p-12 text-center",children:[a.jsx(ts,{className:"mx-auto h-12 w-12 text-gray-400"}),a.jsx("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"No stakeholders"}),a.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Get started by adding stakeholders to this voting session."}),a.jsx("div",{className:"mt-6",children:a.jsxs("button",{onClick:()=>p(!0),className:"inline-flex items-center px-4 py-2 bg-[#2d4660] text-white rounded-md hover:bg-[#1d3a53] transition-colors",children:[a.jsx(Mo,{className:"h-5 w-5 mr-2"}),"Add First Stakeholder"]})})]}):a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[a.jsx("thead",{className:"bg-gray-50",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Name"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Email"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Voting Status"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Added"}),a.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),a.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:l.map(X=>a.jsxs("tr",{className:"hover:bg-gray-50",children:[a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsxs("div",{className:"flex items-center",children:[a.jsx(ts,{className:"h-5 w-5 text-gray-400 mr-2"}),a.jsx("span",{className:"text-sm font-medium text-gray-900",children:X.user_name})]})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsxs("div",{className:"flex items-center text-sm text-gray-500",children:[a.jsx(Ju,{className:"h-4 w-4 mr-2"}),X.user_email]})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:X.has_voted?a.jsxs("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800",children:[a.jsx(Fr,{className:"h-3 w-3 mr-1"}),"Voted"]}):a.jsxs("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-gray-100 text-gray-800",children:[a.jsx(im,{className:"h-3 w-3 mr-1"}),"Pending"]})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:Ie(X.created_at)}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:a.jsx("button",{onClick:()=>H(X.user_email),className:"text-red-600 hover:text-red-900",children:a.jsx(ji,{className:"h-5 w-5"})})})]},X.id))})]})})]}),f&&a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:a.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-md w-full max-h-[90vh] overflow-y-auto",children:[a.jsxs("div",{className:"flex justify-between items-center mb-4",children:[a.jsx("h3",{className:"text-lg font-medium text-[#2d4660]",children:"Add Stakeholder"}),a.jsx("button",{onClick:()=>{p(!1),x({name:"",email:""}),q(""),Q([]),b({})},className:"text-gray-400 hover:text-gray-500",children:a.jsx($s,{className:"h-5 w-5"})})]}),a.jsxs("form",{onSubmit:I,className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Name *"}),a.jsx("input",{type:"text",value:y.name,onChange:X=>x(ve=>({...ve,name:X.target.value})),className:`w-full px-3 py-2 border rounded-md focus:ring-2 focus:ring-[#2d4660] focus:border-transparent ${j.name?"border-red-500":"border-gray-300"}`,placeholder:"John Doe"}),j.name&&a.jsxs("p",{className:"mt-1 text-sm text-red-600 flex items-center",children:[a.jsx(Yt,{className:"h-4 w-4 mr-1"}),j.name]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email *"}),a.jsx("input",{type:"email",value:y.email,onChange:X=>x(ve=>({...ve,email:X.target.value})),className:`w-full px-3 py-2 border rounded-md focus:ring-2 focus:ring-[#2d4660] focus:border-transparent ${j.email?"border-red-500":"border-gray-300"}`,placeholder:"john@example.com"}),j.email&&a.jsxs("p",{className:"mt-1 text-sm text-red-600 flex items-center",children:[a.jsx(Yt,{className:"h-4 w-4 mr-1"}),j.email]})]}),a.jsxs("div",{children:[a.jsx(EZ,{products:O,value:R,onChange:q,label:"Product *",error:!!j.product}),j.product&&a.jsxs("p",{className:"mt-1 text-sm text-red-600 flex items-center",children:[a.jsx(Yt,{className:"h-4 w-4 mr-1"}),j.product]})]}),R&&a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Sessions * (Current and Future)"}),F.length===0?a.jsx("p",{className:"text-sm text-gray-500",children:"No current or future sessions found for this product."}):a.jsx("div",{className:"max-h-48 overflow-y-auto border border-gray-300 rounded-md p-2",children:F.map(X=>a.jsxs("label",{className:"flex items-start px-3 py-2 hover:bg-gray-50 cursor-pointer border-b border-gray-100 last:border-b-0",children:[a.jsx("input",{type:"checkbox",checked:B.includes(X.id),onChange:ve=>{ve.target.checked?Q(ce=>[...ce,X.id]):Q(ce=>ce.filter(ge=>ge!==X.id))},className:"w-4 h-4 border-gray-300 rounded focus:ring-[#2D4660] accent-green-600 mt-1",style:{accentColor:"#16a34a"}}),a.jsxs("div",{className:"ml-3 flex-1",children:[a.jsx("div",{className:"text-sm font-medium text-gray-900",children:X.title}),a.jsx("div",{className:"text-xs text-gray-500 mt-0.5",children:xe(X)}),a.jsx("div",{className:"text-xs mt-0.5",children:a.jsx("span",{className:`font-medium ${de(X).color}`,children:de(X).text})})]})]},X.id))}),j.sessions&&a.jsxs("p",{className:"mt-1 text-sm text-red-600 flex items-center",children:[a.jsx(Yt,{className:"h-4 w-4 mr-1"}),j.sessions]})]}),j.submit&&a.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-3",children:a.jsxs("p",{className:"text-sm text-red-800 flex items-center",children:[a.jsx(Yt,{className:"h-4 w-4 mr-2"}),j.submit]})}),a.jsxs("div",{className:"flex justify-end space-x-2 pt-4",children:[a.jsx("button",{type:"button",onClick:()=>{p(!1),x({name:"",email:""}),q(""),Q([]),b({})},className:"px-4 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50",disabled:S,children:"Cancel"}),a.jsx("button",{type:"submit",className:"px-4 py-2 bg-[#2d4660] text-white rounded-md hover:bg-[#1d3a53] disabled:opacity-50",disabled:S,children:S?"Adding...":"Add Stakeholder"})]})]})]})})]}):null}function PZ(){const{currentSession:e,currentUser:t,setCurrentUser:r,setCurrentSession:n}=Ui(),s=Ss(),i=async()=>{try{await Ue.auth.signOut()}catch{}try{n(null)}catch{}r(null);try{localStorage.removeItem("voting_system_current_session"),localStorage.removeItem("azureDevOpsAuthInProgress"),sessionStorage.removeItem("oauth_return_path"),sessionStorage.removeItem("oauth_action")}catch{}k(!1),s("/login",{replace:!0})},[l,u]=v.useState([]),[d,m]=v.useState(!0),[f,p]=v.useState(!1),[y,x]=v.useState({email:""}),[j,b]=v.useState({}),[S,N]=v.useState(!1),[E,k]=v.useState(!1),T=v.useRef(null);v.useEffect(()=>{if(!E)return;const V=B=>{T.current&&!T.current.contains(B.target)&&k(!1)};return document.addEventListener("mousedown",V),document.addEventListener("touchstart",V,{passive:!0}),()=>{document.removeEventListener("mousedown",V),document.removeEventListener("touchstart",V)}},[E]),v.useEffect(()=>{if(!e){s("/sessions");return}O()},[e,s]);const O=async()=>{if(e){m(!0);try{const V=await UC(e.id);u(V)}catch(V){console.error("Error loading admins:",V)}finally{m(!1)}}},P=V=>/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(V),R=async V=>{V.preventDefault();const B={};if(y.email.trim()?P(y.email)||(B.email="Invalid email address"):B.email="Email is required",l.some(Q=>Q.user.email.toLowerCase()===y.email.toLowerCase())&&(B.email="This user is already an admin"),b(B),!(Object.keys(B).length>0)&&e){N(!0);try{const Q=y.email.split("@")[0].replace(/\./g," ");await l6(e.id,y.email,Q);try{const ae=`${window.location.origin}/login?session=${e.session_code}`;await Lw({to:y.email,subject:`You're invited to administer: ${e.title}`,text:`Hi,

You've been added as an admin for "${e.title}".

Open: ${ae}

Best regards,
${(t==null?void 0:t.name)||""}`,html:`<p>Hi,</p><p>You've been added as an admin for <strong>${e.title}</strong>.</p><p><a href="${ae}">Open the Feature Voting System</a></p><p>Best regards,<br/>${(t==null?void 0:t.name)||""}</p>`})}catch{try{const ae=qC(e,y.email,(t==null?void 0:t.name)||"");window.location.href=ae}catch{}}await O(),x({email:""}),p(!1)}catch(Q){console.error("Error adding admin:",Q),b({submit:"Failed to add admin. Please try again."})}finally{N(!1)}}},q=async V=>{if(e){if(l.length===1){alert("Cannot remove the last admin. Sessions must have at least one admin.");return}if(V===(t==null?void 0:t.id)){alert("You cannot remove yourself as an admin.");return}if(confirm("Are you sure you want to remove this admin?"))try{await Ff(e.id,V),await O()}catch(B){console.error("Error removing admin:",B),alert("Failed to remove admin")}}},F=V=>new Date(V).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"});return e?d?a.jsx("div",{className:"min-h-screen w-full bg-gray-50 flex items-center justify-center",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-[#2d4660] mx-auto mb-4"}),a.jsx("p",{className:"text-gray-600",children:"Loading admins..."})]})}):a.jsxs("div",{className:"container mx-auto p-4 max-w-6xl min-h-screen pb-8",children:[a.jsx("div",{className:"hidden md:flex md:justify-center mb-2",children:a.jsx("img",{src:"https://www.steeldynamics.com/wp-content/uploads/2024/05/New-Millennium-color-logo1.png",alt:"New Millennium Building Systems Logo",className:"-mt-4 cursor-pointer hover:opacity-80 transition-opacity",style:{height:"96px",width:"auto"},onClick:()=>s("/sessions")})}),a.jsxs("div",{className:"flex justify-between items-center mb-6",children:[a.jsxs("div",{className:"flex items-center",children:[a.jsx("img",{src:"https://media.licdn.com/dms/image/C4D0BAQEC3OhRqehrKg/company-logo_200_200/0/1630518354793/new_millennium_building_systems_logo?e=2147483647&v=beta&t=LM3sJTmQZet5NshZ-RNHXW1MMG9xSi1asp-VUeSA9NA",alt:"New Millennium Building Systems Logo",className:"mr-4 md:hidden",style:{width:"40px",height:"40px"}}),a.jsx("button",{onClick:()=>s("/admin"),className:"mr-2 p-1 rounded-full hover:bg-gray-200 cursor-pointer",children:a.jsx(xc,{className:"h-6 w-6"})}),a.jsx("h1",{className:"text-2xl font-bold text-[#2d4660] md:text-3xl",children:"Session Admins"})]}),a.jsxs("div",{ref:T,className:"relative z-40",children:[a.jsxs("div",{className:"hidden md:flex space-x-2",children:[a.jsxs("button",{onClick:()=>s("/admin"),className:"flex items-center px-4 py-2 bg-[#4f6d8e] text-white rounded-lg hover:bg-[#3d5670] transition-colors",children:[a.jsx(pn,{className:"h-4 w-4 mr-2"}),"Admin Dashboard"]}),a.jsxs("button",{onClick:()=>p(!0),className:"flex items-center px-4 py-2 bg-[#c59f2d] text-white rounded-lg hover:bg-[#a88a26] transition-colors",children:[a.jsx(Mo,{className:"h-4 w-4 mr-2"}),"Add Admin"]}),a.jsxs("button",{onClick:i,className:"flex items-center px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-colors",children:[a.jsx(An,{className:"h-4 w-4 mr-2"}),"Logout"]})]}),a.jsx("div",{className:"flex md:hidden",children:a.jsx("button",{onClick:()=>k(!E),className:"p-2 rounded-md border border-gray-200 bg-white shadow-sm","aria-label":"Open menu",children:a.jsx(Rs,{className:"h-5 w-5 text-gray-700"})})}),E&&a.jsx("div",{className:"absolute right-0 mt-2 w-56 bg-white border border-gray-200 rounded-lg shadow-lg md:hidden z-50",children:a.jsxs("div",{className:"py-1",children:[a.jsxs("button",{onClick:()=>{k(!1),s("/admin")},className:"w-full px-3 py-2 flex items-center text-left hover:bg-gray-50",children:[a.jsx(pn,{className:"h-4 w-4 mr-2 text-gray-700"}),"Admin Dashboard"]}),a.jsxs("button",{onClick:()=>{k(!1),p(!0)},className:"w-full px-3 py-2 flex items-center text-left hover:bg-gray-50",children:[a.jsx(Mo,{className:"h-4 w-4 mr-2 text-gray-700"}),"Add Admin"]}),a.jsxs("button",{onClick:()=>{k(!1),i()},className:"w-full px-3 py-2 flex items-center text-left hover:bg-gray-50",children:[a.jsx(An,{className:"h-4 w-4 mr-2 text-gray-700"}),"Logout"]})]})})]})]}),a.jsx("div",{className:"relative z-10 bg-white rounded-lg shadow-md p-4 mb-6",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"text-lg font-semibold text-[#2d4660]",children:"Current Session"}),a.jsx("p",{className:"text-gray-600 mt-1",children:e.title})]}),a.jsxs("div",{className:"text-right",children:[a.jsx("p",{className:"text-sm text-gray-600",children:"Total Admins"}),a.jsx("p",{className:"text-2xl font-bold text-[#2d4660]",children:l.length})]})]})}),a.jsxs("div",{className:"relative z-10 bg-white rounded-lg shadow-md overflow-hidden",children:[a.jsxs("div",{className:"p-6 border-b border-gray-200",children:[a.jsxs("h2",{className:"text-lg font-semibold text-[#2d4660]",children:["Session Admins (",l.length,")"]}),a.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Manage who can administer this voting session"})]}),a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[a.jsx("thead",{className:"bg-gray-50",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Name"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Email"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Added"}),a.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),a.jsx("tbody",{className:"relative z-10 bg-white divide-y divide-gray-200",children:l.map(V=>a.jsxs("tr",{className:"hover:bg-gray-50",children:[a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsxs("div",{className:"flex items-center",children:[a.jsx(Cn,{className:"h-5 w-5 text-blue-500 mr-2"}),a.jsxs("span",{className:"text-sm font-medium text-gray-900",children:[V.user.name,V.user.id===(t==null?void 0:t.id)&&a.jsx("span",{className:"ml-2 text-xs text-gray-500",children:"(You)"})]})]})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsxs("div",{className:"flex items-center text-sm text-gray-500",children:[a.jsx(Ju,{className:"h-4 w-4 mr-2"}),V.user.email]})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:F(V.created_at)}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:a.jsx("button",{onClick:()=>q(V.user_id),className:`text-red-600 hover:text-red-900 ${V.user.id===(t==null?void 0:t.id)||l.length===1?"opacity-50 cursor-not-allowed":""}`,disabled:V.user.id===(t==null?void 0:t.id)||l.length===1,title:V.user.id===(t==null?void 0:t.id)?"You cannot remove yourself":l.length===1?"Cannot remove the last admin":"Remove admin",children:a.jsx(ji,{className:"h-5 w-5"})})})]},V.id))})]})})]}),a.jsx("div",{className:"relative z-10 mt-6 bg-blue-50 border border-blue-200 rounded-lg p-4",children:a.jsxs("div",{className:"flex items-start",children:[a.jsx(Cn,{className:"h-5 w-5 text-blue-600 mr-3 mt-0.5"}),a.jsxs("div",{className:"text-sm text-blue-800",children:[a.jsx("p",{className:"font-medium mb-1",children:"Session Admin Permissions:"}),a.jsxs("ul",{className:"list-disc list-inside space-y-1",children:[a.jsx("li",{children:"Manage features and voting settings for this session"}),a.jsx("li",{children:"Add and remove stakeholders for this session"}),a.jsx("li",{children:"View voting results and analytics for this session"}),a.jsx("li",{children:"Add and remove other session admins"})]}),a.jsx("p",{className:"mt-2 text-xs italic",children:"Note: System Admins have full admin access to all sessions in the system."})]})]})}),f&&a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:a.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-md w-full",children:[a.jsxs("div",{className:"flex justify-between items-center mb-4",children:[a.jsx("h3",{className:"text-lg font-medium text-[#2d4660]",children:"Add Session Admin"}),a.jsx("button",{onClick:()=>{p(!1),x({email:""}),b({})},className:"text-gray-400 hover:text-gray-500",children:a.jsx($s,{className:"h-5 w-5"})})]}),a.jsxs("form",{onSubmit:R,className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email Address *"}),a.jsx("input",{type:"email",value:y.email,onChange:V=>x(B=>({...B,email:V.target.value})),className:`w-full px-3 py-2 border rounded-md focus:ring-2 focus:ring-[#2d4660] focus:border-transparent ${j.email?"border-red-500":"border-gray-300"}`,placeholder:"admin@example.com"}),j.email&&a.jsxs("p",{className:"mt-1 text-sm text-red-600 flex items-center",children:[a.jsx(Yt,{className:"h-4 w-4 mr-1"}),j.email]})]}),j.submit&&a.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-3",children:a.jsxs("p",{className:"text-sm text-red-800 flex items-center",children:[a.jsx(Yt,{className:"h-4 w-4 mr-2"}),j.submit]})}),a.jsxs("div",{className:"flex justify-end space-x-2 pt-4",children:[a.jsx("button",{type:"button",onClick:()=>{p(!1),x({email:""}),b({})},className:"px-4 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50",disabled:S,children:"Cancel"}),a.jsx("button",{type:"submit",className:"px-4 py-2 bg-[#2d4660] text-white rounded-md hover:bg-[#1d3a53] disabled:opacity-50",disabled:S,children:S?"Adding...":"Add Admin"})]})]})]})})]}):null}function OZ(){const{currentUser:e,sessions:t}=Ui(),r=Ss(),[n,s]=v.useState([]),[i,l]=v.useState(!0),[u,d]=v.useState(!1);v.useEffect(()=>{m()},[t]);const m=async()=>{l(!0);try{const y=new Set;for(const x of t)(await UC(x.id)).forEach(b=>{b.user&&b.user.email&&y.add(b.user.email)});s(Array.from(y))}catch(y){console.error("Error loading admin emails:",y)}finally{l(!1)}},f=()=>{const y=encodeURIComponent(" Request: Add me to Feature Voting System"),x=encodeURIComponent(`Hi Team,

I tried to access the Feature Voting System but don't have admin permissions yet.

Could you please add me to the system so I can participate in voting?

My details:
Name: ${(e==null?void 0:e.name)||"Unknown"}
Email: ${(e==null?void 0:e.email)||"Unknown"}

Thanks!
${(e==null?void 0:e.name)||"A hopeful voter"} `),j=n.length>0?`mailto:${n.join(",")}?subject=${y}&body=${x}`:`mailto:?subject=${y}&body=${x}`;window.location.href=j,d(!0)},p=()=>{r("/login")};return i?a.jsx("div",{className:"min-h-screen w-full bg-gray-50 flex items-center justify-center",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-[#2d4660] mx-auto mb-4"}),a.jsx("p",{className:"text-gray-600",children:"Loading..."})]})}):a.jsx("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 to-gray-100 flex items-center justify-center p-4",children:a.jsxs("div",{className:"max-w-md w-full",children:[a.jsx("div",{className:"text-center mb-8",children:a.jsx("img",{src:"https://www.steeldynamics.com/wp-content/uploads/2024/05/New-Millennium-color-logo1.png",alt:"New Millennium Building Systems Logo",className:"mx-auto cursor-pointer hover:opacity-80 transition-opacity",style:{height:"80px",width:"auto"},onClick:()=>r("/sessions")})}),a.jsxs("div",{className:"relative z-10 bg-white rounded-xl shadow-lg overflow-hidden",children:[a.jsxs("div",{className:"bg-gradient-to-r from-[#2d4660] to-[#1d3a53] p-6 text-center",children:[a.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-white/10 rounded-full mb-4",children:a.jsx(XM,{className:"h-8 w-8 text-white"})}),a.jsx("h1",{className:"text-2xl font-bold text-white mb-2",children:"Whoa There, Speedracer! "}),a.jsx("p",{className:"text-blue-100 text-sm",children:"You need access to the Feature Voting System"})]}),a.jsx("div",{className:"p-6",children:u?a.jsx(a.Fragment,{children:a.jsxs("div",{className:"text-center py-4",children:[a.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-green-100 rounded-full mb-4",children:a.jsx(Fr,{className:"h-8 w-8 text-green-600"})}),a.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-2",children:"Email Sent! "}),a.jsx("p",{className:"text-gray-600 mb-6",children:"Your access request has been sent to the admin team. They'll get you set up soon!"}),a.jsxs("button",{onClick:p,className:"inline-flex items-center px-4 py-2 bg-[#2d4660] text-white rounded-lg hover:bg-[#1d3a53] transition-colors",children:[a.jsx(CS,{className:"h-4 w-4 mr-2"}),"Back to Login"]})]})}):a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"mb-6",children:[a.jsx("p",{className:"text-gray-600 mb-4",children:"Looks like you're trying to access the Feature Voting System, but you haven't been added yet."}),a.jsx("p",{className:"text-gray-600 mb-4",children:"No worries! Click the button below to send a quick message to the admins asking to be added."}),a.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:a.jsxs("div",{className:"flex items-start",children:[a.jsx(Un,{className:"h-5 w-5 text-blue-600 mr-2 mt-0.5 flex-shrink-0"}),a.jsx("div",{className:"text-sm text-blue-800",children:n.length>0?a.jsxs(a.Fragment,{children:[a.jsx("p",{className:"font-medium mb-1",children:"Your message will be sent to:"}),a.jsx("p",{className:"text-xs",children:n.join(", ")})]}):a.jsx("p",{children:"Your message will help the admin team get you set up!"})})]})})]}),a.jsxs("div",{className:"space-y-3",children:[a.jsxs("button",{onClick:f,className:"w-full flex items-center justify-center px-4 py-3 bg-[#c59f2d] text-white rounded-lg hover:bg-[#a88a26] transition-colors font-medium",children:[a.jsx(Ju,{className:"h-5 w-5 mr-2"}),"Request Access from Admins"]}),a.jsxs("button",{onClick:p,className:"w-full flex items-center justify-center px-4 py-3 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-colors",children:[a.jsx(CS,{className:"h-4 w-4 mr-2"}),"Back to Login"]})]})]})})]}),a.jsx("div",{className:"mt-6 text-center",children:a.jsx("p",{className:"text-sm text-gray-500",children:"Once you're added to the system, you'll be able to participate in voting sessions."})})]})})}function TZ(){const{currentUser:e,setCurrentUser:t,setCurrentSession:r}=Ui(),n=Ss(),s=async()=>{try{await Ue.auth.signOut()}catch{}try{r(null)}catch{}t(null);try{localStorage.removeItem("voting_system_current_session"),localStorage.removeItem("azureDevOpsAuthInProgress"),sessionStorage.removeItem("oauth_return_path"),sessionStorage.removeItem("oauth_action")}catch{}E(!1),n("/login",{replace:!0})},[i,l]=v.useState([]),[u,d]=v.useState(!0),[m,f]=v.useState(!1),[p,y]=v.useState({email:""}),[x,j]=v.useState({}),[b,S]=v.useState(!1),[N,E]=v.useState(!1),k=v.useRef(null);v.useEffect(()=>{if(!N)return;const F=V=>{k.current&&!k.current.contains(V.target)&&E(!1)};return document.addEventListener("mousedown",F),document.addEventListener("touchstart",F,{passive:!0}),()=>{document.removeEventListener("mousedown",F),document.removeEventListener("touchstart",F)}},[N]),v.useEffect(()=>{T()},[]);const T=async()=>{d(!0);try{let F=await $v();F.length===0&&e&&(console.log("No system admins found. Adding current user as first system admin..."),await th(e.id),F=await $v()),l(F)}catch(F){console.error("Error loading system admins:",F)}finally{d(!1)}},O=F=>/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(F),P=async F=>{F.preventDefault();const V={};if(p.email.trim()?O(p.email)||(V.email="Invalid email address"):V.email="Email is required",i.some(B=>B.user.email.toLowerCase()===p.email.toLowerCase())&&(V.email="This user is already a system admin"),j(V),!(Object.keys(V).length>0)){S(!0);try{const B=p.email.split("@")[0].replace(/\./g," "),Q=await X0(p.email,B);await th(Q.id);try{const ae=`${window.location.origin}/login`;await Lw({to:p.email,subject:"You're a System Admin: Feature Voting System",text:`Hi,

You've been granted System Admin access to the Feature Voting System.

Login: ${ae}

Best regards,
System`,html:`<p>Hi,</p><p>You've been granted <strong>System Admin</strong> access to the Feature Voting System.</p><p><a href="${ae}">Login</a></p><p>Best regards,<br/>System</p>`})}catch{try{const ae=`${window.location.origin}/login`,ne=encodeURIComponent("You're a System Admin: Feature Voting System"),me=encodeURIComponent(`Hi,

You've been granted System Admin access to the Feature Voting System.

To sign in, use this link:

${ae}

Best regards,
System`);window.location.href=`mailto:${encodeURIComponent(p.email)}?subject=${ne}&body=${me}`}catch{}}await T(),y({email:""}),f(!1)}catch(B){console.error("Error adding system admin:",B),j({submit:"Failed to add system admin. Please try again."})}finally{S(!1)}}},R=async F=>{const V=i.reduce((B,Q)=>new Date(Q.created_at)<new Date(B.created_at)?Q:B);if(F===V.user_id){alert("Cannot remove the original system admin. This protects against accidentally locking everyone out of the system.");return}if(i.length===1){alert("Cannot remove the last system admin. The system must have at least one admin.");return}if(F===(e==null?void 0:e.id)){alert("You cannot remove yourself as a system admin.");return}if(confirm("Are you sure you want to remove this system admin?"))try{await Lf(F),await T()}catch(B){console.error("Error removing system admin:",B),alert("Failed to remove system admin")}},q=F=>new Date(F).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"});return u?a.jsx("div",{className:"min-h-screen w-full bg-gray-50 flex items-center justify-center",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-[#2d4660] mx-auto mb-4"}),a.jsx("p",{className:"text-gray-600",children:"Loading system admins..."})]})}):a.jsxs("div",{className:"container mx-auto p-4 max-w-6xl min-h-screen pb-8",children:[a.jsx("div",{className:"hidden md:flex md:justify-center mb-2",children:a.jsx("img",{src:"https://www.steeldynamics.com/wp-content/uploads/2024/05/New-Millennium-color-logo1.png",alt:"New Millennium Building Systems Logo",className:"-mt-4 cursor-pointer hover:opacity-80 transition-opacity",style:{height:"96px",width:"auto"},onClick:()=>n("/sessions")})}),a.jsxs("div",{className:"flex justify-between items-center mb-6",children:[a.jsxs("div",{className:"flex items-center",children:[a.jsx("img",{src:"https://media.licdn.com/dms/image/C4D0BAQEC3OhRqehrKg/company-logo_200_200/0/1630518354793/new_millennium_building_systems_logo?e=2147483647&v=beta&t=LM3sJTmQZet5NshZ-RNHXW1MMG9xSi1asp-VUeSA9NA",alt:"New Millennium Building Systems Logo",className:"mr-4 md:hidden",style:{width:"40px",height:"40px"}}),a.jsx("button",{onClick:()=>n("/sessions"),className:"mr-2 p-1 rounded-full hover:bg-gray-200 cursor-pointer",children:a.jsx(xc,{className:"h-6 w-6"})}),a.jsx("h1",{className:"text-2xl font-bold text-[#2d4660] md:text-3xl",children:"System Admins"})]}),a.jsxs("div",{ref:k,className:"relative z-40",children:[a.jsxs("div",{className:"hidden md:flex space-x-2",children:[a.jsxs("button",{onClick:()=>n("/sessions"),className:"flex items-center px-4 py-2 bg-[#4f6d8e] text-white rounded-lg hover:bg-[#3d5670] transition-colors",children:[a.jsx(pn,{className:"h-4 w-4 mr-2"}),"My Sessions"]}),a.jsxs("button",{onClick:()=>f(!0),className:"flex items-center px-4 py-2 bg-[#c59f2d] text-white rounded-lg hover:bg-[#a88a26] transition-colors",children:[a.jsx(Mo,{className:"h-4 w-4 mr-2"}),"Add System Admin"]}),a.jsxs("button",{onClick:s,className:"flex items-center px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-colors",children:[a.jsx(An,{className:"h-4 w-4 mr-2"}),"Logout"]})]}),a.jsx("div",{className:"flex md:hidden",children:a.jsx("button",{onClick:()=>E(!N),className:"p-2 rounded-md border border-gray-200 bg-white shadow-sm","aria-label":"Open menu",children:a.jsx(Rs,{className:"h-5 w-5 text-gray-700"})})}),N&&a.jsx("div",{className:"absolute right-0 mt-2 w-56 bg-white border border-gray-200 rounded-lg shadow-lg md:hidden z-50",children:a.jsxs("div",{className:"py-1",children:[a.jsxs("button",{onClick:()=>{E(!1),n("/sessions")},className:"w-full px-3 py-2 flex items-center text-left hover:bg-gray-50",children:[a.jsx(pn,{className:"h-4 w-4 mr-2 text-gray-700"}),"My Sessions"]}),a.jsxs("button",{onClick:()=>{E(!1),f(!0)},className:"w-full px-3 py-2 flex items-center text-left hover:bg-gray-50",children:[a.jsx(Mo,{className:"h-4 w-4 mr-2 text-gray-700"}),"Add System Admin"]}),a.jsxs("button",{onClick:()=>{E(!1),s()},className:"w-full px-3 py-2 flex items-center text-left hover:bg-gray-50",children:[a.jsx(An,{className:"h-4 w-4 mr-2 text-gray-700"}),"Logout"]})]})})]})]}),a.jsx("div",{className:"relative z-10 bg-gradient-to-r from-[#2d4660] to-[#1d3a53] rounded-lg shadow-md p-6 mb-6 text-white",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center",children:[a.jsx(vs,{className:"h-8 w-8 mr-3"}),a.jsxs("div",{children:[a.jsx("h2",{className:"text-xl font-semibold",children:"Feature Voting System"}),a.jsx("p",{className:"text-blue-100 mt-1",children:"Global administrator management"})]})]}),a.jsxs("div",{className:"text-right",children:[a.jsx("p",{className:"text-sm text-blue-100",children:"Total System Admins"}),a.jsx("p",{className:"text-3xl font-bold",children:i.length})]})]})}),a.jsxs("div",{className:"relative z-10 bg-white rounded-lg shadow-md overflow-hidden",children:[a.jsxs("div",{className:"p-6 border-b border-gray-200",children:[a.jsxs("h2",{className:"text-lg font-semibold text-[#2d4660]",children:["System Administrators (",i.length,")"]}),a.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Manage who has full access to the Feature Voting System"})]}),a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[a.jsx("thead",{className:"bg-gray-50",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Name"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Email"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Added"}),a.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),a.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:(()=>{const F=i.reduce((V,B)=>new Date(B.created_at)<new Date(V.created_at)?B:V);return i.map(V=>{const B=V.user_id===F.user_id;return a.jsxs("tr",{className:"hover:bg-gray-50",children:[a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsxs("div",{className:"flex items-center",children:[a.jsx(vs,{className:"h-5 w-5 text-[#c59f2d] mr-2"}),a.jsxs("span",{className:"text-sm font-medium text-gray-900",children:[V.user.name,V.user.id===(e==null?void 0:e.id)&&a.jsx("span",{className:"ml-2 text-xs text-gray-500",children:"(You)"}),B&&a.jsx("span",{className:"ml-2 text-xs text-[#c59f2d] font-semibold",children:"(Original Admin)"})]})]})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsxs("div",{className:"flex items-center text-sm text-gray-500",children:[a.jsx(Ju,{className:"h-4 w-4 mr-2"}),V.user.email]})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:q(V.created_at)}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:a.jsx("button",{onClick:()=>R(V.user_id),className:`text-red-600 hover:text-red-900 ${V.user.id===(e==null?void 0:e.id)||i.length===1||B?"opacity-50 cursor-not-allowed":""}`,disabled:V.user.id===(e==null?void 0:e.id)||i.length===1||B,title:B?"Cannot remove the original system admin":V.user.id===(e==null?void 0:e.id)?"You cannot remove yourself":i.length===1?"Cannot remove the last system admin":"Remove system admin",children:a.jsx(ji,{className:"h-5 w-5"})})})]},V.id)})})()})]})})]}),a.jsx("div",{className:"relative z-10 mt-6 bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:a.jsxs("div",{className:"flex items-start",children:[a.jsx(vs,{className:"h-5 w-5 text-yellow-600 mr-3 mt-0.5"}),a.jsxs("div",{className:"text-sm text-yellow-800",children:[a.jsx("p",{className:"font-medium mb-1",children:"System Admin Permissions:"}),a.jsxs("ul",{className:"list-disc list-inside space-y-1",children:[a.jsx("li",{children:"Full access to all voting sessions across the system"}),a.jsx("li",{children:"Create and manage any voting session"}),a.jsx("li",{children:"Add and remove other system administrators"}),a.jsx("li",{children:"Manage session admins and stakeholders for any session"}),a.jsx("li",{children:"View all results and analytics system-wide"})]}),a.jsx("p",{className:"mt-3 text-xs font-medium",children:"Note: The original system admin (first person to access this page) cannot be removed to prevent system lockout."})]})]})}),m&&a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:a.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-md w-full",children:[a.jsxs("div",{className:"flex justify-between items-center mb-4",children:[a.jsx("h3",{className:"text-lg font-medium text-[#2d4660]",children:"Add System Admin"}),a.jsx("button",{onClick:()=>{f(!1),y({email:""}),j({})},className:"text-gray-400 hover:text-gray-500",children:a.jsx($s,{className:"h-5 w-5"})})]}),a.jsxs("form",{onSubmit:P,className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email Address *"}),a.jsx("input",{type:"email",value:p.email,onChange:F=>y(V=>({...V,email:F.target.value})),className:`w-full px-3 py-2 border rounded-md focus:ring-2 focus:ring-[#2d4660] focus:border-transparent ${x.email?"border-red-500":"border-gray-300"}`,placeholder:"admin@example.com"}),x.email&&a.jsxs("p",{className:"mt-1 text-sm text-red-600 flex items-center",children:[a.jsx(Yt,{className:"h-4 w-4 mr-1"}),x.email]})]}),x.submit&&a.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-3",children:a.jsxs("p",{className:"text-sm text-red-800 flex items-center",children:[a.jsx(Yt,{className:"h-4 w-4 mr-2"}),x.submit]})}),a.jsxs("div",{className:"flex justify-end space-x-2 pt-4",children:[a.jsx("button",{type:"button",onClick:()=>{f(!1),y({email:""}),j({})},className:"px-4 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50",disabled:b,children:"Cancel"}),a.jsx("button",{type:"submit",className:"px-4 py-2 bg-[#2d4660] text-white rounded-md hover:bg-[#1d3a53] disabled:opacity-50",disabled:b,children:b?"Adding...":"Add System Admin"})]})]})]})})]})}function Yf({products:e,value:t,onChange:r,label:n,error:s,onProductChange:i}){const[l,u]=v.useState(!1),d=v.useRef(null);v.useEffect(()=>{function p(y){d.current&&!d.current.contains(y.target)&&u(!1)}return document.addEventListener("mousedown",p),()=>document.removeEventListener("mousedown",p)},[]);const m=e.find(p=>p.id===t),f=m?ns(m.name,m.color_hex??null):null;return a.jsxs("div",{ref:d,className:"relative overflow-visible",children:[n&&a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:n}),a.jsxs("div",{onClick:()=>u(!l),className:`w-full px-3 py-2 border rounded-md bg-white cursor-pointer flex items-center justify-between hover:border-gray-400 ${s?"border-red-500":"border-gray-300"}`,children:[a.jsxs("div",{className:"flex items-center gap-2 flex-1 min-w-0",children:[m&&f&&a.jsx("div",{className:"w-4 h-4 rounded flex-shrink-0",style:{backgroundColor:f.background}}),a.jsx("span",{className:`text-sm truncate ${t?"text-gray-900":"text-gray-400"}`,children:m?m.name:"Select a Product"})]}),a.jsx(zn,{className:`h-4 w-4 text-gray-400 transition-transform flex-shrink-0 ${l?"transform rotate-180":""}`})]}),l&&a.jsx("div",{className:"absolute z-[100] w-full mt-1 bg-white border border-gray-300 rounded-md shadow-lg max-h-60 overflow-y-auto",children:e.length===0?a.jsx("div",{className:"px-3 py-2 text-sm text-gray-500 text-center",children:"No products available"}):e.map(p=>{const y=ns(p.name,p.color_hex??null),x=t===p.id;return a.jsxs("div",{onClick:()=>{r(p.id),u(!1),i&&i()},className:`px-3 py-2 cursor-pointer hover:bg-gray-50 flex items-center gap-2 ${x?"bg-gray-50":""}`,children:[a.jsx("div",{className:"w-4 h-4 rounded flex-shrink-0",style:{backgroundColor:y.background}}),a.jsx("span",{className:"text-sm text-gray-900 flex-1",children:p.name}),x&&a.jsx(Fr,{className:"h-4 w-4 text-gray-400 flex-shrink-0"})]},p.id)})})]})}function IZ({products:e,sessions:t,selectedProductId:r,onProductChange:n,useAllSessions:s,onToggleAllSessions:i,selectedSessionIds:l,onSessionToggle:u,getSessionStatus:d,formatSessionDateRange:m,filterSessions:f}){const p=r?f(t,r):[];return a.jsxs("div",{className:"space-y-3 overflow-visible",children:[a.jsx("div",{className:"overflow-visible",children:a.jsx(Yf,{products:e,value:r,onChange:y=>{n(y),i(!0)},label:"Product *"})}),r&&a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Session Selection *"}),a.jsxs("div",{className:"inline-flex items-center bg-gray-100 rounded-lg p-1",children:[a.jsx("button",{type:"button",onClick:()=>i(!1),className:`px-4 py-2 rounded-md text-sm font-medium transition-colors flex items-center ${s?"text-gray-600 hover:text-gray-900":"bg-white text-[#2d4660] shadow-sm"}`,children:"Select Sessions"}),a.jsx("button",{type:"button",onClick:()=>{i(!0)},className:`px-4 py-2 rounded-md text-sm font-medium transition-colors flex items-center ${s?"bg-white text-[#2d4660] shadow-sm":"text-gray-600 hover:text-gray-900"}`,children:"All Sessions"})]}),s&&a.jsx("p",{className:"mt-2 text-xs text-gray-500",children:"User will be added to all current and future sessions for this product"})]}),!s&&a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Sessions * (Current and Future)"}),p.length===0?a.jsx("p",{className:"text-sm text-gray-500",children:"No current or future sessions found for this product."}):a.jsx("div",{className:"max-h-48 overflow-y-auto border border-gray-300 rounded-md p-2",children:p.map(y=>a.jsxs("label",{className:"flex items-start px-3 py-2 hover:bg-gray-50 cursor-pointer border-b border-gray-100 last:border-b-0",children:[a.jsx("input",{type:"checkbox",checked:l.includes(y.id),onChange:()=>u(y.id),className:"w-4 h-4 border-gray-300 rounded focus:ring-[#2D4660] accent-green-600 mt-1",style:{accentColor:"#16a34a"}}),a.jsxs("div",{className:"ml-3 flex-1",children:[a.jsx("div",{className:"text-sm font-medium text-gray-900",children:y.title||"Unnamed Session"}),a.jsx("div",{className:"text-xs text-gray-500 mt-0.5",children:m(y)}),a.jsx("div",{className:"text-xs mt-0.5",children:a.jsx("span",{className:`font-medium ${d(y).color}`,children:d(y).text})})]})]},y.id))})]})]})]})}function DZ(){const{currentUser:e,setCurrentUser:t,setCurrentSession:r,currentSession:n}=Ui(),s=Ss(),[i]=fC(),[l,u]=v.useState([]),[d,m]=v.useState([]),[f,p]=v.useState(!0),[y,x]=v.useState(""),[j,b]=v.useState("all"),[S,N]=v.useState(!1),[E,k]=v.useState(null),[T,O]=v.useState(null),[P,R]=v.useState(null),[q,F]=v.useState(null),V=C=>{const J=new Date,Ne=C.filter(Te=>{const D=Te.start_date?new Date(Te.start_date):null,he=Te.end_date?new Date(Te.end_date):null;return D&&J<D||he&&J>he?!1:!!(D&&J>=D&&(!he||J<=he))});return Ne.length===0?null:Ne.sort((Te,D)=>{const he=Te.start_date?new Date(Te.start_date).getTime():0;return(D.start_date?new Date(D.start_date).getTime():0)-he})[0]},B=new Set(["spencer.faull@newmill.com","chris.rodes@newmill.com","dave.hoffman@newmill.com"]),Q=v.useRef(null),ae=v.useRef({}),ne=v.useRef(!1),[me,K]=v.useState(!1),[te,se]=v.useState(!1),[de,xe]=v.useState([]),[I,H]=v.useState("system-admin"),[Ie,X]=v.useState(!0),[ve,ce]=v.useState(!1),[ge,ye]=v.useState(null),[L,Fe]=v.useState(null),[Me,ee]=v.useState([]),[Ke,Xe]=v.useState({adminSessions:[],stakeholderSessions:[]}),[ft,wt]=v.useState(""),[Ct,_t]=v.useState(!0),[Ot,$]=v.useState([]),[Y,oe]=v.useState(!1),[ue,we]=v.useState(null),[je,ze]=v.useState(!1),[ot,pt]=v.useState(null),[It,Or]=v.useState(new Set),[Wt,Lt]=v.useState(new Map),[fr,Ft]=v.useState(!1),[Lr,Kr]=v.useState(!1),[Ve,zt]=v.useState({name:"",email:"",password:"",isSystemAdmin:!1,sessionAdminIds:[],stakeholderSessionIds:[]}),[Xt,Sr]=v.useState({systemAdmin:!1,sessionAdmin:!1,stakeholder:!1}),[Tr,Bt]=v.useState("User Management"),[Ir,ls]=v.useState([]),[Qt,hr]=v.useState(""),[Cr,nr]=v.useState([]),[Er,zr]=v.useState(""),[Vn,mr]=v.useState([]),[Xn,sn]=v.useState(!1),[an,on]=v.useState(null),[sr,ir]=v.useState(!0),[Gr,cs]=v.useState(!0),[wn,Yr]=v.useState(!1),[pr,Jr]=v.useState(null),[ar,Dr]=v.useState(""),[In,qn]=v.useState(""),[us,G]=v.useState(!1),fe=async()=>{try{await Ue.auth.signOut()}catch{}try{r(null)}catch{}t(null);try{localStorage.removeItem("voting_system_current_session"),localStorage.removeItem("azureDevOpsAuthInProgress"),sessionStorage.removeItem("oauth_return_path"),sessionStorage.removeItem("oauth_action")}catch{}N(!1),s("/login",{replace:!0})};v.useEffect(()=>{if(!S)return;const C=J=>{Q.current&&!Q.current.contains(J.target)&&N(!1)};return document.addEventListener("mousedown",C),document.addEventListener("touchstart",C,{passive:!0}),()=>{document.removeEventListener("mousedown",C),document.removeEventListener("touchstart",C)}},[S]),v.useEffect(()=>{if(!E)return;const C=J=>{const Ne=ae.current[E];Ne&&!Ne.contains(J.target)&&k(null)};return document.addEventListener("mousedown",C),document.addEventListener("touchstart",C,{passive:!0}),()=>{document.removeEventListener("mousedown",C),document.removeEventListener("touchstart",C)}},[E]);const Ee=async()=>{try{const C=await DC(),J=await ha(),Ne=new Date,Te=C.filter(D=>J.some(he=>he.product_id!==D.id?!1:new Date(he.end_date)>=Ne));ls(Te)}catch(C){console.error("Error loading products:",C)}},Pe=C=>{if(!C){nr([]);return}const J=new Date,Ne=Me.filter(Te=>Te.product_id!==C?!1:new Date(Te.end_date)>=J);nr(Ne)};v.useEffect(()=>{Qt?Pe(Qt):nr([])},[Qt,Me]);const st=C=>{if(!C){mr([]);return}const J=new Date,Ne=Me.filter(Te=>Te.product_id!==C?!1:new Date(Te.end_date)>=J);mr(Ne)};v.useEffect(()=>{Er?st(Er):mr([])},[Er,Me]),v.useEffect(()=>{const C=i.get("filter");C==="session-admin"?(Bt("Session Admin Management"),b("session-admin")):C==="stakeholder"?(Bt("Stakeholder Management"),b("stakeholder")):Bt("User Management")},[i]);const We=async C=>{p(!0),console.log("=== CHECKING USERS TABLE SCHEMA ===");try{const{data:J,error:Ne}=await Ue.from("users").select("*").limit(1).single();J?(console.log(" Sample user record:",J),console.log(" Available fields:",Object.keys(J)),console.log(" Has created_by?","created_by"in J),console.log(" Has created_by_name?","created_by_name"in J),console.log(" Has created_by_user_id?","created_by_user_id"in J)):console.log(" No users found or error:",Ne)}catch(J){console.log(" Error checking schema:",J)}console.log(`=== END SCHEMA CHECK ===
`);try{const J=await Bj(),Ne=new Map;await Promise.all(C.map(async W=>{try{const Ae=await WC(W.id);Ne.set(W.id,Ae)}catch(Ae){console.error(`Error loading stakeholders for session ${W.id}:`,Ae),Ne.set(W.id,[])}}));const Te=await Promise.all(J.map(async W=>{const Ae=await n6(W.id),Be=[],gr=[];if(Ae.sessionAdminCount>0)try{const{data:yr,error:tl}=await Ue.from("session_admins").select("session_id, created_at").eq("user_id",W.id);if(tl)console.error("Error fetching admin sessions:",tl);else if(yr){const Vi=yr.map(Ci=>Ci.session_id),qi=C.filter(Ci=>Vi.includes(Ci.id));Be.push(...qi.map(Ci=>{const oi=yr.find(co=>co.session_id===Ci.id);return{...Ci,assignedAt:oi==null?void 0:oi.created_at,assignedBy:"System",assignedByName:"System"}}))}}catch(yr){console.error("Error querying session_admins:",yr)}for(const yr of C){const Vi=(Ne.get(yr.id)||[]).find(qi=>{const Ci=qi.user_email&&W.email&&qi.user_email.toLowerCase()===W.email.toLowerCase(),oi=qi.user_id===W.id||qi.id===W.id;return Ci||oi});Vi&&gr.push({...yr,assignedAt:Vi.created_at,assignedBy:"System",assignedByName:"System"})}return{...W,roles:Ae,adminInSessions:Be,stakeholderInSessions:gr}}));u(Te);const D=new Map;Te.forEach(W=>{const Ae=W.email.toLowerCase().trim();D.has(Ae)||D.set(Ae,[]),D.get(Ae).push(W.id)});const he=new Map;D.forEach((W,Ae)=>{W.length>1&&he.set(Ae,W)}),Lt(he)}catch(J){console.error("Error loading users:",J)}finally{p(!1)}},Tt=async()=>{if(e){X(!0);try{const C=await Jo(e.id);K(C);const J=await ha();let Ne=[];if(C)ee(J),await Et(),await We(J);else{const Te=await Promise.all(J.map(W=>Pu(W.id,e.id)));J.forEach((W,Ae)=>{Te[Ae]&&Ne.push(W.id)});const D=Ne.length>0;if(se(D),xe(Ne),!D){s("/sessions");return}const he=J.filter(W=>Ne.includes(W.id));ee(he),H("session-admin"),await We(he)}}catch(C){console.error("Error checking access:",C),s("/sessions")}finally{X(!1)}}},Et=async()=>{try{const C=["chris.rodes@newmill.com","spencer.faull@newmill.com"],J=new Set,Ne=await $v();if(Ne.length>0){const D=Ne.reduce((he,W)=>new Date(W.created_at)<new Date(he.created_at)?W:he);pt(D.user_id),J.add(D.user_id)}(await Bj()).forEach(D=>{C.includes(D.email.toLowerCase())&&J.add(D.id)}),Or(J)}catch(C){console.error("Error loading protected accounts:",C)}},bt=C=>{if(C.id===ot)return"Original Admin";const J=C.email.toLowerCase();return J==="chris.rodes@newmill.com"?"Manager":J==="spencer.faull@newmill.com"?"Portfolio Owner":null},Le=C=>{const J=C.email.toLowerCase().trim(),Ne=Wt.get(J);return Ne?Ne.length>1:!1},ln=C=>{const J=C.email.toLowerCase().trim(),Ne=Wt.get(J);return Ne?Ne.length:1},tr=()=>{let C=[...l];if(I==="session-admin"&&Me.length>0){const J=new Set(Me.map(Ne=>Ne.id));C=C.filter(Ne=>{var he,W;if(Ne.id===(e==null?void 0:e.id))return!0;const Te=(he=Ne.adminInSessions)==null?void 0:he.some(Ae=>Ae&&J.has(Ae.id)),D=(W=Ne.stakeholderInSessions)==null?void 0:W.some(Ae=>Ae&&J.has(Ae.id));return!!Te||!!D})}if(y.trim()){const J=y.toLowerCase();C=C.filter(Ne=>Ne.name.toLowerCase().includes(J)||Ne.email.toLowerCase().includes(J))}j!=="all"&&(C=C.filter(J=>{switch(j){case"system-admin":return J.roles.isSystemAdmin;case"session-admin":return J.roles.sessionAdminCount>0&&!J.roles.isSystemAdmin;case"stakeholder":return J.roles.stakeholderSessionCount>0&&J.roles.sessionAdminCount===0&&!J.roles.isSystemAdmin;case"none":return!J.roles.isSystemAdmin&&J.roles.sessionAdminCount===0&&J.roles.stakeholderSessionCount===0;default:return!0}})),m(C)};v.useEffect(()=>{if(!e){s("/login");return}if(!ne.current)return ne.current=!0,Tt(),()=>{}},[e]),v.useEffect(()=>{const C=i.get("filter");C&&["system-admin","session-admin","stakeholder","none"].includes(C)&&b(C)},[i]),v.useEffect(()=>{I==="session-admin"?(j==="system-admin"||j==="session-admin"||j==="all")&&b("stakeholder"):I==="system-admin"&&b("all")},[I]),v.useEffect(()=>{tr()},[l,y,j,I,Me,e]);const Rr=async C=>{try{const J=[],Ne=[];for(const Te of Me)await Pu(C,Te.id)&&J.push(Te.id),await c6(C,Te.id)&&Ne.push(Te.id);Xe({adminSessions:J,stakeholderSessions:Ne})}catch(J){console.error("Error loading user session memberships:",J)}},Nt=async(C,J)=>{Fe(C),ye(J),wt(""),_t(!0),$([]),ce(!0),k(null),Ir.length===0&&await Ee(),await Rr(C.id)},Dn=()=>{ce(!1),ye(null),Fe(null),wt(""),_t(!0),$([]),Xe({adminSessions:[],stakeholderSessions:[]})},ie=(C,J)=>{if(!J)return[];const Ne=new Date;return C.filter(Te=>Te.product_id!==J?!1:new Date(Te.end_date)>=Ne)},Se=async()=>{if(!L||!ge)return;if(!ft){alert("Please select a product first.");return}let C=[];if(Ct)C=ie(Vt(ge),ft).map(Ne=>Ne.id);else{if(Ot.length===0){alert("Please select at least one session.");return}C=Ot}if(C.length===0){alert("No sessions available for this product.");return}try{for(const J of C)ge==="session-admin"?await Ql(J,L.id):ge==="stakeholder"?await Uj(J,L.email,L.name):ge==="remove-stakeholder"&&await Rv(J,L.email);Dn(),await We(Me)}catch(J){console.error("Error modifying user session role:",J);const Ne=(J==null?void 0:J.message)||(J==null?void 0:J.toString())||"Unknown error";console.error("Full error details:",J),alert(`Failed to ${ge==="remove-stakeholder"?"remove stakeholder from":"add user to"} session(s).

Error: ${Ne}

Please check the console for more details.`)}},De=async(C,J)=>{if(k(null),!!confirm(`Are you sure you want to ${J?"remove":"grant"} system admin access for this user?`))try{J?await Lf(C):await th(C),await We(Me)}catch(Ne){console.error("Error toggling system admin:",Ne),alert("Failed to update system admin status. Please try again.")}},Ye=async(C,J)=>{k(null);const Ne=I==="session-admin"?`Are you sure you want to remove ${J} from all sessions you manage? This will remove them as a stakeholder or session admin from your sessions only.`:`Are you sure you want to remove all roles from ${J}? This will remove them from all sessions and revoke system admin access.`;if(confirm(Ne))try{if(I==="system-admin"&&await Lf(C),I==="session-admin"){for(const Te of de)try{await Ff(Te,C)}catch(D){console.error(`Error removing session admin from ${Te}:`,D)}for(const Te of de)try{await Tg(Te,C)}catch(D){console.error(`Error removing stakeholder from ${Te}:`,D)}}else for(const Te of Me)try{await Ff(Te.id,C),await Tg(Te.id,C)}catch{}await We(Me)}catch(Te){console.error("Error removing roles:",Te),alert("Failed to remove roles. Please try again.")}},Ge=async(C,J)=>{const Ne=l.find(Te=>Te.id===C);if(Ne){if(I==="session-admin"){if(Ne.roles.stakeholderSessionCount===0){alert("This user is not a stakeholder in any sessions.");return}const Te=`Are you sure you want to remove ${J} as a stakeholder from all sessions you manage?`;if(!confirm(Te))return;try{let D=0;for(const he of Me)try{await Rv(he.id,Ne.email),D++}catch(W){console.error(`Error removing stakeholder from session ${he.id}:`,W)}await We(Me),D>0?alert(`${J} has been removed as a stakeholder from ${D} session(s) you manage.`):alert(`${J} was not a stakeholder in any of the sessions you manage.`)}catch(D){console.error("Error removing stakeholder:",D),alert("Failed to remove stakeholder. Please try again.")}return}we(Ne),oe(!0)}},_e=async()=>{if(ue){if(It.has(ue.id)){const C=bt(ue);alert(`Cannot delete this protected account${C?` (${C})`:""}. This protects against accidentally locking important users out of the system.`),oe(!1),we(null);return}ze(!0);try{for(const J of Me)try{await Ff(J.id,ue.id),await Tg(J.id,ue.id)}catch{}if(ue.roles.isSystemAdmin)try{await Lf(ue.id)}catch(J){console.error("Error removing system admin role:",J)}const{error:C}=await Ue.from("users").delete().eq("id",ue.id);if(C)throw C;await We(Me),oe(!1),we(null)}catch(C){console.error("Error deleting user:",C),alert("Failed to delete user. Please try again.")}finally{ze(!1)}}},be=()=>{oe(!1),we(null)},it=async()=>{if(!pr)return;if(!ar.trim()){alert("Name is required");return}if(!In.trim()){alert("Email is required");return}if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(In.trim())){alert("Please enter a valid email address");return}G(!0);try{const{error:J}=await Ue.from("users").update({name:ar.trim(),email:In.trim().toLowerCase()}).eq("id",pr.id);if(J)throw J;u(Ne=>Ne.map(Te=>Te.id===pr.id?{...Te,name:ar.trim(),email:In.trim().toLowerCase()}:Te)),Yr(!1),Jr(null),Dr(""),qn("")}catch(J){console.error("Error updating user:",J),alert("Failed to update user. Please try again.")}finally{G(!1)}},Dt=()=>{zt({name:"",email:"",password:Mt(),isSystemAdmin:!1,sessionAdminIds:[],stakeholderSessionIds:[]}),hr(""),nr([]),zr(""),mr([]),Ee(),Ft(!0)},et=()=>{Ft(!1),zt({name:"",email:"",password:"",isSystemAdmin:!1,sessionAdminIds:[],stakeholderSessionIds:[]}),hr(""),nr([]),zr(""),mr([]),ir(!0),cs(!0),Sr({systemAdmin:!1,sessionAdmin:!1,stakeholder:!1})},Mt=()=>{const J="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789!@#$%^&*";let Ne="";for(let Te=0;Te<12;Te++)Ne+=J.charAt(Math.floor(Math.random()*J.length));return Ne},At=async()=>{if(!Ve.name.trim()||!Ve.email.trim()||!Ve.password.trim()){alert("Please fill in all required fields (Name, Email, Password)");return}Kr(!0);try{const{data:C,error:J}=await Ue.auth.signUp({email:Ve.email,password:Ve.password,options:{data:{name:Ve.name}}});if(J)throw J;if(!C.user)throw new Error("User creation failed");const Ne=C.user.id,{error:Te}=await Ue.from("users").insert({id:Ne,name:Ve.name,email:Ve.email,created_by:e==null?void 0:e.id,created_by_name:e==null?void 0:e.name});if(Te)throw Te;if(I==="system-admin"&&Ve.isSystemAdmin&&await th(Ne),I==="system-admin"&&Xt.sessionAdmin&&Er)if(Gr)for(const W of Vn)try{await Ql(W.id,Ne)}catch(Ae){console.error(`Error adding session admin role to session ${W.id}:`,Ae)}else for(const W of Ve.sessionAdminIds)try{await Ql(W,Ne)}catch(Ae){console.error("Error adding session admin role:",Ae)}console.log("Adding stakeholder to sessions:",Ve.stakeholderSessionIds),console.log("View mode:",I),console.log("User admin sessions:",de),console.log("All sessions:",Me.map(W=>({id:W.id,title:W.title})));let D=[];if(I==="session-admin"?Qt&&sr?D=Cr.map(W=>W.id):Qt&&!sr&&(D=Ve.stakeholderSessionIds):I==="system-admin"&&Xt.stakeholder&&Qt&&(sr?D=Cr.map(W=>W.id):D=Ve.stakeholderSessionIds),D.length===0)console.log("No stakeholder sessions to add");else{for(const W of D){if(I==="session-admin"&&!Me.some(Be=>Be.id===W)){console.warn(`Skipping session ${W} - not in managed sessions`);continue}try{console.log(`Adding ${Ve.email} as stakeholder to session ${W}`);const Ae=await Uj(W,Ve.email,Ve.name);console.log(`Successfully added stakeholder to session ${W}:`,Ae)}catch(Ae){console.error(`Error adding stakeholder role to session ${W}:`,Ae);const Be=(Ae==null?void 0:Ae.message)||(Ae==null?void 0:Ae.toString())||"Unknown error";alert(`Warning: Failed to add ${Ve.email} to session ${W}.

Error: ${Be}`)}}console.log("Finished adding stakeholder roles")}let he="User";Ve.isSystemAdmin?he="System Admin":Xt.sessionAdmin&&Er&&(Gr||Ve.sessionAdminIds.length>0)?he="Session Admin":(I==="session-admin"&&Qt&&(sr||Ve.stakeholderSessionIds.length>0)||I==="system-admin"&&Xt.stakeholder&&Qt&&(sr||Ve.stakeholderSessionIds.length>0))&&(he="Stakeholder"),et(),await We(Me),on({email:Ve.email,password:Ve.password,userType:he}),sn(!0)}catch(C){console.error("Error creating user:",C),alert(`Failed to create user: ${C.message||"Unknown error"}`)}finally{Kr(!1)}},$e=C=>{zt(J=>({...J,sessionAdminIds:J.sessionAdminIds.includes(C)?J.sessionAdminIds.filter(Ne=>Ne!==C):[...J.sessionAdminIds,C]}))},gt=C=>{zt(J=>({...J,stakeholderSessionIds:J.stakeholderSessionIds.includes(C)?J.stakeholderSessionIds.filter(Ne=>Ne!==C):[...J.stakeholderSessionIds,C]}))},yt=C=>new Date(C).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}),Pt=C=>{const J=new Date,Ne=new Date(C.start_date),Te=new Date(C.end_date);return C.is_active&&J>=Ne&&J<=Te?{text:"Active",color:"text-green-600"}:J<Ne?{text:"Upcoming",color:"text-blue-600"}:{text:"Ended",color:"text-gray-500"}},Ut=C=>{const J=new Date(C.start_date),Ne=new Date(C.end_date),Te=J.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}),D=Ne.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"});return`${Te} - ${D}`},ht=C=>C.roles.isSystemAdmin?a.jsxs("span",{className:"inline-flex items-center px-2.5 py-1 rounded text-xs font-medium bg-[#C89212] text-white",children:[a.jsx(vs,{className:"h-3.5 w-3.5 mr-1"}),"System Admin"]}):C.roles.sessionAdminCount>0?a.jsxs("span",{className:"inline-flex items-center px-2.5 py-1 rounded text-xs font-medium bg-[#576C71] text-white",children:[a.jsx(Cn,{className:"h-3.5 w-3.5 mr-1"}),"Session Admin (",C.roles.sessionAdminCount,")"]}):C.roles.stakeholderSessionCount>0?a.jsxs("span",{className:"inline-flex items-center px-2.5 py-1 rounded text-xs font-medium bg-[#8B5A4A] text-white",children:[a.jsx(ts,{className:"h-3.5 w-3.5 mr-1"}),"Stakeholder (",C.roles.stakeholderSessionCount,")"]}):a.jsx("span",{className:"inline-flex items-center px-2.5 py-1 rounded text-xs font-medium bg-gray-100 text-gray-600",children:"No Role"}),Vt=C=>C?C==="session-admin"?Me.filter(J=>!Ke.adminSessions.includes(J.id)):C==="remove-stakeholder"?Me.filter(J=>Ke.stakeholderSessions.includes(J.id)&&(I==="system-admin"||de.includes(J.id))):Me.filter(J=>!Ke.stakeholderSessions.includes(J.id)):[],Rt=(C,J)=>J?J==="session-admin"?C.roles.sessionAdminCount<Me.length:C.roles.stakeholderSessionCount<Me.length:!1;return Ie||f?a.jsx("div",{className:"min-h-screen w-full bg-gray-50 flex items-center justify-center",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-[#2d4660] mx-auto mb-4"}),a.jsx("p",{className:"text-gray-600",children:Ie?"Checking access...":"Loading users..."})]})}):me?a.jsxs("div",{className:"min-h-screen bg-gray-50 pb-20",children:[a.jsxs("div",{className:"container mx-auto p-4 max-w-6xl",children:[a.jsx("div",{className:"hidden md:flex md:justify-center mb-2",children:a.jsx("img",{src:"https://www.steeldynamics.com/wp-content/uploads/2024/05/New-Millennium-color-logo1.png",alt:"New Millennium Building Systems Logo",className:"-mt-4 cursor-pointer hover:opacity-80 transition-opacity",style:{height:"96px",width:"auto"},onClick:()=>s("/sessions")})}),a.jsxs("div",{className:"flex justify-between items-center mb-4 md:mb-6",children:[a.jsxs("div",{className:"flex items-center flex-1 min-w-0",children:[a.jsx("img",{src:"https://media.licdn.com/dms/image/C4D0BAQEC3OhRqehrKg/company-logo_200_200/0/1630518354793/new_millennium_building_systems_logo?e=2147483647&v=beta&t=LM3sJTmQZet5NshZ-RNHXW1MMG9xSi1asp-VUeSA9NA",alt:"New Millennium Building Systems Logo",className:"mr-3 md:hidden flex-shrink-0 cursor-pointer hover:opacity-80 transition-opacity",style:{width:"36px",height:"36px"},onClick:()=>s("/sessions")}),a.jsx("button",{onClick:()=>{n!=null&&n.id?s("/admin"):s("/sessions")},className:"mr-2 p-1 rounded-full hover:bg-gray-200 cursor-pointer flex-shrink-0",children:a.jsx(xc,{className:"h-6 w-6"})}),a.jsx("h1",{className:"text-xl md:text-3xl font-bold text-[#2d4660] truncate",children:Tr})]}),a.jsxs("div",{ref:Q,className:"relative z-40 flex-shrink-0 ml-2",children:[a.jsxs("div",{className:"hidden md:flex space-x-2",children:[(me||te)&&a.jsxs("button",{onClick:Dt,className:"flex items-center px-4 py-2 bg-[#2D4660] text-white rounded-lg hover:bg-[#173B65] transition-colors",children:[a.jsx(Un,{className:"h-4 w-4 mr-2"}),I==="session-admin"?"Add Stakeholder":"Add User"]}),(me||te)&&n&&a.jsxs("button",{onClick:()=>s("/admin"),className:"flex items-center px-4 py-2 bg-[#1E5461] text-white rounded-lg hover:bg-[#145668] transition-colors",children:[a.jsx(Cn,{className:"h-4 w-4 mr-2"}),"Admin Dashboard"]}),a.jsxs("button",{onClick:()=>s("/sessions"),className:"flex items-center px-4 py-2 bg-[#4f6d8e] text-white rounded-lg hover:bg-[#3d5670] transition-colors",children:[a.jsx(pn,{className:"h-4 w-4 mr-2"}),"My Sessions"]}),a.jsxs("button",{onClick:fe,className:"flex items-center px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-colors",children:[a.jsx(An,{className:"h-4 w-4 mr-2"}),"Logout"]})]}),a.jsx("div",{className:"flex md:hidden",children:a.jsx("button",{onClick:()=>N(!S),className:"p-2 rounded-md border border-gray-200 bg-white shadow-sm","aria-label":"Open menu",children:a.jsx(Rs,{className:"h-5 w-5 text-gray-700"})})}),S&&a.jsx("div",{className:"absolute right-0 mt-2 w-56 bg-white border border-gray-200 rounded-lg shadow-lg md:hidden z-50",children:a.jsxs("div",{className:"py-1",children:[(me||te)&&a.jsxs("button",{onClick:()=>{N(!1),Dt()},className:"w-full px-4 py-3 flex items-center text-left hover:bg-gray-50",children:[a.jsx(Un,{className:"h-5 w-5 mr-3 text-green-600"}),a.jsx("span",{className:"text-base",children:I==="session-admin"?"Add Stakeholder":"Add User"})]}),(me||te)&&n&&a.jsxs("button",{onClick:()=>{N(!1),s("/admin")},className:"w-full px-4 py-3 flex items-center text-left hover:bg-gray-50",children:[a.jsx(Cn,{className:"h-5 w-5 mr-3 text-[#1E5461]"}),a.jsx("span",{className:"text-base",children:"Admin Dashboard"})]}),a.jsxs("button",{onClick:()=>{N(!1),s("/sessions")},className:"w-full px-4 py-3 flex items-center text-left hover:bg-gray-50",children:[a.jsx(pn,{className:"h-5 w-5 mr-3 text-gray-700"}),a.jsx("span",{className:"text-base",children:"My Sessions"})]}),a.jsxs("button",{onClick:()=>{N(!1),fe()},className:"w-full px-4 py-3 flex items-center text-left hover:bg-gray-50",children:[a.jsx(An,{className:"h-5 w-5 mr-3 text-gray-700"}),a.jsx("span",{className:"text-base",children:"Logout"})]})]})})]})]}),a.jsx("div",{className:"relative z-10 bg-white rounded-lg shadow-md p-3 md:p-4 mb-4 md:mb-6",children:a.jsxs("div",{className:"flex flex-col gap-3 md:flex-row md:gap-4",children:[a.jsxs("div",{className:"flex-1 relative",children:[a.jsx(lF,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"}),a.jsx("input",{type:"text",placeholder:"Search by name or email...",value:y,onChange:C=>x(C.target.value),className:"w-full pl-10 pr-10 py-2.5 md:py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#2d4660] focus:border-transparent text-base"}),y&&a.jsx("button",{onClick:()=>x(""),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600",children:a.jsx($s,{className:"h-5 w-5"})})]}),a.jsxs("select",{value:j==="system-admin"&&I==="session-admin"?"session-admin":j,onChange:C=>b(C.target.value),className:"px-4 py-2.5 md:py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#2d4660] focus:border-transparent text-base",children:[I!=="session-admin"&&a.jsx("option",{value:"all",children:"All Roles"}),I!=="session-admin"&&a.jsx("option",{value:"system-admin",children:"System Admin"}),I!=="session-admin"&&a.jsx("option",{value:"session-admin",children:"Session Admin"}),a.jsx("option",{value:"stakeholder",children:"Stakeholder"}),a.jsx("option",{value:"none",children:"No Role"})]})]})}),a.jsx("div",{className:"md:hidden space-y-3 relative z-10 overflow-visible",children:d.length===0?a.jsx("div",{className:"bg-white rounded-lg shadow-md p-8 text-center text-gray-500",children:y||j!=="all"?"No users found matching your filters.":"No users found."}):d.map(C=>{var J,Ne;return a.jsxs("div",{className:"bg-white rounded-lg shadow-md overflow-visible",children:[a.jsxs("div",{className:"p-4 border-b border-gray-100",children:[a.jsxs("div",{className:"flex justify-between items-start mb-2",children:[a.jsxs("div",{className:"flex-1 min-w-0 pr-2",children:[a.jsxs("h3",{className:"text-base font-semibold text-gray-900 truncate",children:[C.name,C.id===(e==null?void 0:e.id)&&a.jsx("span",{className:"ml-2 text-xs text-[#c59f2d] font-semibold",children:"(You)"}),bt(C)&&a.jsxs("span",{className:"ml-2 text-xs text-[#c59f2d] font-semibold",children:["(",bt(C),")"]}),Le(C)&&a.jsxs("span",{className:"ml-2 px-2 py-0.5 bg-red-100 text-red-700 text-xs font-medium rounded",children:["Duplicate (",ln(C),")"]})]}),a.jsx("p",{className:"text-sm text-gray-500 truncate",children:C.email})]}),a.jsx("div",{className:"flex items-center gap-2 flex-shrink-0",children:a.jsxs("div",{className:"relative",ref:Te=>{ae.current[C.id]=Te},children:[a.jsx("button",{onClick:()=>k(E===C.id?null:C.id),className:`p-2 rounded-md hover:bg-gray-100 transition-colors ${C.id===(e==null?void 0:e.id)?"opacity-50 cursor-not-allowed":""}`,disabled:C.id===(e==null?void 0:e.id),title:C.id===(e==null?void 0:e.id)?"Cannot modify your own permissions":"Change user role",children:a.jsx(ES,{className:"h-5 w-5 text-gray-600"})}),E===C.id&&C.id!==(e==null?void 0:e.id)&&a.jsx("div",{className:"fixed md:absolute md:right-0 md:mt-1 w-64 bg-white border border-gray-200 rounded-lg shadow-lg z-[9999]",style:(()=>{const Te=ae.current[C.id];if(!Te)return{};const D=Te.getBoundingClientRect();return window.innerWidth<768?{top:`${D.bottom+4}px`,right:`${window.innerWidth-D.right+4}px`,left:"auto"}:{}})(),children:a.jsxs("div",{className:"py-1",children:[a.jsx("div",{className:"px-3 py-2 text-xs font-semibold text-gray-500 uppercase border-b border-gray-200",children:"Change User Role"}),I==="system-admin"&&a.jsxs(a.Fragment,{children:[C.roles.isSystemAdmin?a.jsxs("button",{onClick:()=>De(C.id,!0),className:"w-full px-4 py-3 text-left flex items-center hover:bg-red-50 text-red-700",children:[a.jsx(vs,{className:"h-5 w-5 mr-3 flex-shrink-0"}),a.jsxs("div",{children:[a.jsx("div",{className:"font-medium text-base",children:"Remove System Admin"}),a.jsx("div",{className:"text-xs text-gray-500",children:"Revoke global admin access"})]})]}):a.jsxs("button",{onClick:()=>De(C.id,!1),className:"w-full px-4 py-3 text-left flex items-center hover:bg-[#C89212]/10 text-[#C89212]",children:[a.jsx(vs,{className:"h-5 w-5 mr-3 flex-shrink-0"}),a.jsxs("div",{children:[a.jsx("div",{className:"font-medium text-base",children:"Make System Admin"}),a.jsx("div",{className:"text-xs text-gray-500",children:"Grant global admin access"})]})]}),Rt(C,"session-admin")&&a.jsxs("button",{onClick:()=>Nt(C,"session-admin"),className:"w-full px-4 py-3 text-left flex items-center hover:bg-[#576C71]/10 text-[#576C71] border-t border-gray-200",children:[a.jsx(Cn,{className:"h-5 w-5 mr-3 flex-shrink-0"}),a.jsxs("div",{children:[a.jsx("div",{className:"font-medium text-base",children:"Make Session Admin"}),a.jsx("div",{className:"text-xs text-gray-500",children:"Add to a session as admin"})]})]})]}),Rt(C,"stakeholder")&&a.jsxs("button",{onClick:()=>Nt(C,"stakeholder"),className:"w-full px-4 py-3 text-left flex items-center hover:bg-[#8B5A4A]/10 text-[#8B5A4A] border-t border-gray-200",children:[a.jsx(ts,{className:"h-5 w-5 mr-3 flex-shrink-0"}),a.jsxs("div",{children:[a.jsx("div",{className:"font-medium text-base",children:"Make Stakeholder"}),a.jsx("div",{className:"text-xs text-gray-500",children:"Add to a session as stakeholder"})]})]}),I==="session-admin"&&C.stakeholderInSessions&&C.stakeholderInSessions.length>0&&C.stakeholderInSessions.some(Te=>de.includes(Te.id))&&a.jsxs("button",{onClick:()=>Nt(C,"remove-stakeholder"),className:"w-full px-4 py-3 text-left flex items-center hover:bg-red-50 text-red-700 border-t border-gray-200",children:[a.jsx(iu,{className:"h-5 w-5 mr-3 flex-shrink-0"}),a.jsxs("div",{children:[a.jsx("div",{className:"font-medium text-base",children:"Remove Stakeholder"}),a.jsx("div",{className:"text-xs text-gray-500",children:"Remove from a session you manage"})]})]}),(C.roles.isSystemAdmin||C.roles.sessionAdminCount>0||C.roles.stakeholderSessionCount>0)&&a.jsxs("button",{onClick:()=>Ye(C.id,C.name),className:"w-full px-4 py-3 text-left flex items-center hover:bg-gray-50 text-gray-700 border-t border-gray-200",children:[a.jsx(iu,{className:"h-5 w-5 mr-3 flex-shrink-0"}),a.jsxs("div",{children:[a.jsx("div",{className:"font-medium text-base",children:"Remove All Roles"}),a.jsx("div",{className:"text-xs text-gray-500",children:"Remove from all sessions"})]})]}),(I==="system-admin"||I==="session-admin"&&C.roles.stakeholderSessionCount>0&&((J=C.stakeholderInSessions)==null?void 0:J.some(Te=>Me.some(D=>D.id===Te.id)))&&!B.has(C.email))&&a.jsx("div",{className:"px-3 py-2 text-xs font-semibold text-gray-500 uppercase border-t border-gray-200",children:"User Functions"}),I==="system-admin"&&a.jsxs("button",{onClick:()=>{Jr(C),Dr(C.name),qn(C.email),Yr(!0),k(null)},className:"w-full px-4 py-3 text-left flex items-center hover:bg-[#1E5461]/10 text-[#1E5461] border-t border-gray-200",children:[a.jsx(Su,{className:"h-5 w-5 mr-3 flex-shrink-0"}),a.jsxs("div",{children:[a.jsx("div",{className:"font-medium text-base",children:"Edit User Profile"}),a.jsx("div",{className:"text-xs text-gray-500",children:"Update name and email"})]})]}),(I==="system-admin"||I==="session-admin"&&C.roles.stakeholderSessionCount>0&&((Ne=C.stakeholderInSessions)==null?void 0:Ne.some(Te=>Me.some(D=>D.id===Te.id))))&&!B.has(C.email)&&a.jsxs("button",{onClick:()=>{k(null),Ge(C.id,C.name)},className:`w-full px-4 py-3 text-left flex items-center hover:bg-[#8B5A4A]/10 text-[#8B5A4A] border-t border-gray-200 ${C.id===(e==null?void 0:e.id)||I==="system-admin"&&It.has(C.id)?"opacity-50 cursor-not-allowed":""}`,disabled:C.id===(e==null?void 0:e.id)||I==="system-admin"&&It.has(C.id),children:[a.jsx(ji,{className:"h-5 w-5 mr-3 flex-shrink-0"}),a.jsxs("div",{children:[a.jsx("div",{className:"font-medium text-base",children:I==="session-admin"?"Remove Stakeholder":"Delete User"}),a.jsx("div",{className:"text-xs text-gray-500",children:I==="session-admin"?"Remove from all your sessions":C.id===(e==null?void 0:e.id)?"Cannot delete your own account":It.has(C.id)?`Cannot delete protected account${bt(C)?` (${bt(C)})`:""}`:"Permanently delete this user"})]})]})]})})]})})]}),a.jsx("div",{className:"mt-2",children:ht(C)})]}),a.jsxs("div",{className:"p-4 space-y-3",children:[a.jsxs("div",{children:[a.jsx("div",{className:"text-xs font-semibold text-gray-500 uppercase mb-1",children:"Sessions"}),a.jsxs("div",{className:"space-y-1",children:[C.roles.sessionAdminCount>0&&a.jsxs("div",{className:"space-y-1",children:[a.jsxs("div",{className:"inline-flex items-center gap-1.5 px-2.5 py-1 rounded border text-xs font-medium",style:{borderColor:"#576C71",color:"#576C71"},children:[a.jsx(AS,{className:"h-3.5 w-3.5 flex-shrink-0",style:{fill:"#576C71",color:"#576C71"}}),a.jsxs("span",{children:[C.roles.sessionAdminCount," as Session Admin"]})]}),C.adminInSessions&&C.adminInSessions.length>0&&a.jsx(a.Fragment,{children:(()=>{const D=V(C.adminInSessions)||C.adminInSessions[0],he=C.adminInSessions.length>1,W=(P==null?void 0:P.userId)===C.id&&(P==null?void 0:P.role)==="admin";return a.jsxs(a.Fragment,{children:[D&&a.jsxs("button",{onClick:async Ae=>{Ae.stopPropagation(),await r(D),s("/admin")},className:"ml-6 text-left text-sm text-gray-700 hover:text-gray-900 hover:underline",children:[a.jsx("div",{children:D.title||"Unnamed Session"}),a.jsx("div",{className:"text-xs text-gray-500 mt-0.5",children:Ut(D)})]}),he&&a.jsxs("button",{onClick:Ae=>{Ae.stopPropagation(),R(W?null:{userId:C.id,role:"admin"})},className:"ml-6 text-xs text-gray-500 hover:text-gray-700 hover:underline mt-1 block flex items-center gap-1.5",style:{minWidth:"70px"},children:[a.jsx("span",{className:"inline-flex items-center justify-center w-4 h-4 border border-gray-400 rounded text-gray-600",children:W?a.jsx(yu,{className:"h-2.5 w-2.5"}):a.jsx(kn,{className:"h-2.5 w-2.5"})}),W?"Hide":"Show"]}),W&&a.jsx("div",{className:"ml-6 mt-1 space-y-1",children:C.adminInSessions.filter(Ae=>Ae.id!==(D==null?void 0:D.id)).map(Ae=>a.jsxs("button",{onClick:async Be=>{Be.stopPropagation(),await r(Ae),s("/admin")},className:"block text-sm text-left text-gray-700 hover:text-gray-900 hover:underline w-full",children:[a.jsx("div",{children:Ae.title||"Unnamed Session"}),a.jsx("div",{className:"text-xs text-gray-500 mt-0.5",children:Ut(Ae)})]},Ae.id))})]})})()})]}),C.roles.stakeholderSessionCount>0&&a.jsxs("div",{className:"space-y-1",children:[a.jsxs("div",{className:"inline-flex items-center gap-1.5 px-2.5 py-1 rounded border text-xs font-medium",style:{borderColor:"#8B5A4A",color:"#8B5A4A"},children:[a.jsx(ts,{className:"h-3.5 w-3.5 flex-shrink-0",style:{fill:"#8B5A4A",color:"#8B5A4A"}}),a.jsxs("span",{children:[C.roles.stakeholderSessionCount," as Stakeholder"]})]}),C.stakeholderInSessions&&C.stakeholderInSessions.length>0&&a.jsx(a.Fragment,{children:(()=>{const D=V(C.stakeholderInSessions)||C.stakeholderInSessions[0],he=C.stakeholderInSessions.length>1,W=(P==null?void 0:P.userId)===C.id&&(P==null?void 0:P.role)==="stakeholder";return a.jsxs(a.Fragment,{children:[D&&a.jsxs("button",{onClick:async Ae=>{Ae.stopPropagation(),await r(D),s("/admin")},className:"ml-6 text-left text-sm text-gray-700 hover:text-gray-900 hover:underline",children:[a.jsx("div",{children:D.title||"Unnamed Session"}),a.jsx("div",{className:"text-xs text-gray-500 mt-0.5",children:Ut(D)})]}),he&&a.jsxs("button",{onClick:Ae=>{Ae.stopPropagation(),R(W?null:{userId:C.id,role:"stakeholder"})},className:"ml-6 text-xs text-gray-500 hover:text-gray-700 hover:underline mt-1 block flex items-center gap-1.5",style:{minWidth:"70px"},children:[a.jsx("span",{className:"inline-flex items-center justify-center w-4 h-4 border border-gray-400 rounded text-gray-600",children:W?a.jsx(yu,{className:"h-2.5 w-2.5"}):a.jsx(kn,{className:"h-2.5 w-2.5"})}),W?"Hide":"Show"]}),W&&a.jsx("div",{className:"ml-6 mt-1 space-y-1",children:C.stakeholderInSessions.filter(Ae=>Ae.id!==(D==null?void 0:D.id)).map(Ae=>a.jsxs("button",{onClick:async Be=>{Be.stopPropagation(),await r(Ae),s("/admin")},className:"block text-sm text-left text-gray-700 hover:text-gray-900 hover:underline w-full",children:[a.jsx("div",{children:Ae.title||"Unnamed Session"}),a.jsx("div",{className:"text-xs text-gray-500 mt-0.5",children:Ut(Ae)})]},Ae.id))})]})})()})]}),C.roles.sessionAdminCount===0&&C.roles.stakeholderSessionCount===0&&a.jsx("span",{className:"text-sm text-gray-400",children:"No session roles"})]})]}),a.jsxs("div",{children:[a.jsx("div",{className:"text-xs font-semibold text-gray-500 uppercase mb-1",children:"Assigned"}),a.jsxs("div",{className:"space-y-2",children:[C.roles.sessionAdminCount===0&&C.roles.stakeholderSessionCount===0&&a.jsxs("div",{className:"flex items-center text-sm text-gray-700",children:[a.jsx(Wr,{className:"h-4 w-4 mr-2 text-gray-400 flex-shrink-0"}),a.jsx("span",{children:C.created_at?yt(C.created_at):"N/A"}),a.jsxs("span",{className:"text-gray-500 text-xs ml-2",children:["by ",C.created_by_name||"System"]})]}),C.adminInSessions&&C.adminInSessions.length>0&&a.jsx("div",{className:"space-y-3",children:(()=>{const D=V(C.adminInSessions)||C.adminInSessions[0];C.adminInSessions.length>1;const he=(P==null?void 0:P.userId)===C.id&&(P==null?void 0:P.role)==="admin";return a.jsxs(a.Fragment,{children:[D&&a.jsxs("div",{className:"ml-5 space-y-1",children:[a.jsxs("div",{className:"flex items-center text-xs text-gray-700 whitespace-nowrap",children:[a.jsx(Wr,{className:"h-3 w-3 mr-1.5 text-gray-400 flex-shrink-0"}),a.jsx("span",{children:D.assignedAt?yt(D.assignedAt):"N/A"})]}),a.jsxs("div",{className:"text-xs text-gray-500 ml-5",children:["by ",D.assignedByName||"System"]})]}),he&&a.jsx("div",{className:"ml-5 mt-2 space-y-3",children:C.adminInSessions.filter(W=>W.id!==(D==null?void 0:D.id)).map(W=>a.jsxs("div",{className:"space-y-1",children:[a.jsxs("div",{className:"flex items-center text-xs text-gray-700 whitespace-nowrap",children:[a.jsx(Wr,{className:"h-3 w-3 mr-1.5 text-gray-400 flex-shrink-0"}),a.jsx("span",{children:W.assignedAt?yt(W.assignedAt):"N/A"})]}),a.jsxs("div",{className:"text-xs text-gray-500 ml-5",children:["by ",W.assignedByName||"System"]})]},W.id))})]})})()}),C.stakeholderInSessions&&C.stakeholderInSessions.length>0&&a.jsx("div",{className:C.adminInSessions&&C.adminInSessions.length>0?"pt-4 border-t border-gray-100 mt-4":"",children:a.jsx("div",{className:"space-y-3",children:(()=>{const D=V(C.stakeholderInSessions)||C.stakeholderInSessions[0];C.stakeholderInSessions.length>1;const he=(P==null?void 0:P.userId)===C.id&&(P==null?void 0:P.role)==="stakeholder";return a.jsxs(a.Fragment,{children:[D&&a.jsxs("div",{className:"ml-5 space-y-1",children:[a.jsxs("div",{className:"flex items-center text-xs text-gray-700 whitespace-nowrap",children:[a.jsx(Wr,{className:"h-3 w-3 mr-1.5 text-gray-400 flex-shrink-0"}),a.jsx("span",{children:D.assignedAt?yt(D.assignedAt):"N/A"})]}),a.jsxs("div",{className:"text-xs text-gray-500 ml-5",children:["by ",D.assignedByName||"System"]})]}),he&&a.jsx("div",{className:"ml-5 mt-2 space-y-3",children:C.stakeholderInSessions.filter(W=>W.id!==(D==null?void 0:D.id)).map(W=>a.jsxs("div",{className:"space-y-1",children:[a.jsxs("div",{className:"flex items-center text-xs text-gray-700 whitespace-nowrap",children:[a.jsx(Wr,{className:"h-3 w-3 mr-1.5 text-gray-400 flex-shrink-0"}),a.jsx("span",{children:W.assignedAt?yt(W.assignedAt):"N/A"})]}),a.jsxs("div",{className:"text-xs text-gray-500 ml-5",children:["by ",W.assignedByName||"System"]})]},W.id))})]})})()})})]})]})]})]},C.id)})}),a.jsxs("div",{className:"hidden md:block relative z-10 bg-white rounded-lg shadow-md overflow-visible",children:[a.jsxs("table",{className:"min-w-full divide-y divide-gray-200 rounded-t-lg",children:[a.jsx("thead",{className:"bg-gray-50",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"User"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Role"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Sessions"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider w-48",children:"Created"}),a.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),a.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:d.length===0?a.jsx("tr",{children:a.jsx("td",{colSpan:5,className:"px-6 py-8 text-center text-gray-500",children:y||j!=="all"?"No users found matching your filters.":"No users found."})}):d.map(C=>{var J,Ne,Te,D;return a.jsxs("tr",{className:"hover:bg-gray-50 relative",onMouseEnter:()=>O(C.id),onMouseLeave:()=>O(null),children:[a.jsx("td",{className:"px-6 py-4 whitespace-nowrap align-top",children:a.jsxs("div",{children:[a.jsxs("div",{className:"text-sm font-medium text-gray-900",children:[C.name,C.id===(e==null?void 0:e.id)&&a.jsx("span",{className:"ml-2 text-xs text-[#c59f2d] font-semibold",children:"(You)"}),bt(C)&&a.jsxs("span",{className:"ml-2 text-xs text-[#c59f2d] font-semibold",children:["(",bt(C),")"]}),Le(C)&&a.jsxs("span",{className:"ml-2 px-2 py-0.5 bg-red-100 text-red-700 text-xs font-medium rounded",children:["Duplicate (",ln(C),")"]})]}),a.jsx("div",{className:"text-sm text-gray-500",children:C.email})]})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap align-top",children:ht(C)}),a.jsx("td",{className:"px-6 py-4 text-sm text-gray-500 align-top relative overflow-visible",children:a.jsxs("div",{className:"space-y-2",children:[C.roles.sessionAdminCount===0&&C.roles.stakeholderSessionCount===0&&a.jsx("span",{className:"text-gray-400",children:"None"}),C.adminInSessions&&C.adminInSessions.length>0&&a.jsxs("div",{children:[a.jsx("div",{className:"mb-2",children:(()=>{var gr;const he=((gr=C.adminInSessions)==null?void 0:gr.length)||0,W=he>1,Ae=(P==null?void 0:P.userId)===C.id&&(P==null?void 0:P.role)==="admin",Be=()=>a.jsxs("div",{className:"inline-flex items-center gap-1.5 px-2.5 py-1 rounded border text-xs font-medium group",style:{borderColor:"#576C71",color:"#576C71"},children:[a.jsx(AS,{className:"h-3.5 w-3.5 flex-shrink-0",style:{fill:"#576C71",color:"#576C71"}}),a.jsxs("span",{children:["Session Admin in ",he," session",he!==1?"s":""]}),W&&a.jsxs("span",{className:"inline-flex items-baseline gap-0.5",style:{color:"#576C71"},children:[Ae?a.jsx(yu,{className:"h-2.5 w-2.5 transition-all group-hover:brightness-150 mt-[3px]",style:{color:"#576C71"}}):a.jsx(kn,{className:"h-2.5 w-2.5 transition-all group-hover:brightness-150 mt-[3px]",style:{color:"#576C71"}}),a.jsx("span",{className:"text-[10px] transition-all group-hover:brightness-150",children:Ae?"Hide":"Show"})]})]});return W?a.jsx("button",{onClick:yr=>{yr.stopPropagation(),R(Ae?null:{userId:C.id,role:"admin"})},className:"text-left",children:a.jsx(Be,{})}):a.jsx(Be,{})})()}),(()=>{const W=V(C.adminInSessions)||C.adminInSessions[0],Ae=(P==null?void 0:P.userId)===C.id&&(P==null?void 0:P.role)==="admin";return a.jsxs(a.Fragment,{children:[W&&a.jsxs("div",{className:"relative cursor-pointer",style:{marginLeft:"1.25rem",marginTop:"0.75rem"},onMouseEnter:()=>F(`${C.id}-${W.id}`),onMouseLeave:()=>F(null),onClick:async Be=>{Be.stopPropagation(),await r(W),s("/admin")},children:[q===`${C.id}-${W.id}`&&a.jsx("div",{className:"absolute bg-blue-50 pointer-events-none z-0 rounded",style:{left:"-0.5rem",right:"-13rem",top:"-0.375rem",bottom:"-0.375rem",boxShadow:"0 0 0 1px rgb(191 219 254)",outline:"none"}}),a.jsxs("div",{className:"text-left text-sm text-gray-700 hover:text-gray-900 block relative z-10",style:{padding:0,margin:0,lineHeight:"1.25rem"},children:[a.jsx("div",{style:{height:"20px",lineHeight:"20px"},children:W.title||"Unnamed Session"}),a.jsx("div",{className:"text-xs text-gray-500",style:{height:"16px",lineHeight:"16px",marginTop:"2px"},children:Ut(W)})]})]}),Ae&&a.jsx("div",{style:{marginTop:"0.5rem"},children:C.adminInSessions.filter(Be=>Be.id!==(W==null?void 0:W.id)).map((Be,gr)=>a.jsxs("div",{className:"relative cursor-pointer",style:{marginTop:"0.75rem",marginLeft:"1.25rem"},onMouseEnter:()=>F(`${C.id}-${Be.id}`),onMouseLeave:()=>F(null),onClick:async yr=>{yr.stopPropagation(),await r(Be),s("/admin")},children:[q===`${C.id}-${Be.id}`&&a.jsx("div",{className:"absolute bg-blue-50 pointer-events-none z-0 rounded",style:{left:"-0.5rem",right:"-13rem",top:"-0.375rem",bottom:"-0.375rem",boxShadow:"0 0 0 1px rgb(191 219 254)",outline:"none"}}),a.jsxs("div",{className:"block text-sm text-left text-gray-700 hover:text-gray-900 relative z-10",style:{padding:0,margin:0,lineHeight:"1.25rem"},children:[a.jsx("div",{style:{height:"20px",lineHeight:"20px"},children:Be.title||"Unnamed Session"}),a.jsx("div",{className:"text-xs text-gray-500",style:{height:"16px",lineHeight:"16px",marginTop:"2px"},children:Ut(Be)})]})]},Be.id))})]})})()]}),C.stakeholderInSessions&&C.stakeholderInSessions.length>0&&a.jsx("div",{className:C.adminInSessions&&C.adminInSessions.length>0?"pt-4 border-t border-gray-100 mt-4":"",children:a.jsxs("div",{children:[a.jsx("div",{className:"mb-2",children:(()=>{var gr;const he=((gr=C.stakeholderInSessions)==null?void 0:gr.length)||0,W=he>1,Ae=(P==null?void 0:P.userId)===C.id&&(P==null?void 0:P.role)==="stakeholder",Be=()=>a.jsxs("div",{className:"inline-flex items-center gap-1.5 px-2.5 py-1 rounded border text-xs font-medium group",style:{borderColor:"#8B5A4A",color:"#8B5A4A"},children:[a.jsx(ts,{className:"h-3.5 w-3.5 flex-shrink-0",style:{fill:"#8B5A4A",color:"#8B5A4A"}}),a.jsxs("span",{children:["Stakeholder in ",he," session",he!==1?"s":""]}),W&&a.jsxs("span",{className:"inline-flex items-baseline gap-0.5",style:{color:"#8B5A4A"},children:[Ae?a.jsx(yu,{className:"h-2.5 w-2.5 transition-all group-hover:brightness-150 mt-[3px]",style:{color:"#8B5A4A"}}):a.jsx(kn,{className:"h-2.5 w-2.5 transition-all group-hover:brightness-150 mt-[3px]",style:{color:"#8B5A4A"}}),a.jsx("span",{className:"text-[10px] transition-all group-hover:brightness-150",children:Ae?"Hide":"Show"})]})]});return W?a.jsx("button",{onClick:yr=>{yr.stopPropagation(),R(Ae?null:{userId:C.id,role:"stakeholder"})},className:"text-left",children:a.jsx(Be,{})}):a.jsx(Be,{})})()}),(()=>{const W=V(C.stakeholderInSessions)||C.stakeholderInSessions[0],Ae=(P==null?void 0:P.userId)===C.id&&(P==null?void 0:P.role)==="stakeholder";return a.jsxs(a.Fragment,{children:[W&&a.jsxs("div",{className:"relative cursor-pointer",style:{marginLeft:"1.25rem",marginTop:"0.75rem"},onMouseEnter:()=>F(`${C.id}-${W.id}`),onMouseLeave:()=>F(null),onClick:async Be=>{Be.stopPropagation(),await r(W),s("/admin")},children:[q===`${C.id}-${W.id}`&&a.jsx("div",{className:"absolute bg-blue-50 pointer-events-none z-0 rounded",style:{left:"-0.5rem",right:"-13rem",top:"-0.25rem",bottom:"-0.25rem",boxShadow:"0 0 0 1px rgb(191 219 254)",outline:"none"}}),a.jsxs("div",{className:"text-left text-sm text-gray-700 hover:text-gray-900 hover:underline block relative z-10",style:{padding:0,margin:0,lineHeight:"1.25rem"},children:[a.jsx("div",{style:{height:"20px",lineHeight:"20px"},children:W.title||"Unnamed Session"}),a.jsx("div",{className:"text-xs text-gray-500",style:{height:"16px",lineHeight:"16px",marginTop:"2px"},children:Ut(W)})]})]}),Ae&&a.jsx("div",{style:{marginTop:"0.5rem"},children:C.stakeholderInSessions.filter(Be=>Be.id!==(W==null?void 0:W.id)).map((Be,gr)=>a.jsxs("div",{className:"relative cursor-pointer",style:{marginTop:"0.75rem",marginLeft:"1.25rem"},onMouseEnter:()=>F(`${C.id}-${Be.id}`),onMouseLeave:()=>F(null),onClick:async yr=>{yr.stopPropagation(),await r(Be),s("/admin")},children:[q===`${C.id}-${Be.id}`&&a.jsx("div",{className:"absolute bg-blue-50 pointer-events-none z-0 rounded",style:{left:"-0.5rem",right:"-13rem",top:"-0.25rem",bottom:"-0.25rem",boxShadow:"0 0 0 1px rgb(191 219 254)",outline:"none"}}),a.jsxs("div",{className:"block text-sm text-left text-gray-700 hover:text-gray-900 hover:underline relative z-10",style:{padding:0,margin:0,lineHeight:"1.25rem"},children:[a.jsx("div",{style:{height:"20px",lineHeight:"20px"},children:Be.title||"Unnamed Session"}),a.jsx("div",{className:"text-xs text-gray-500",style:{height:"16px",lineHeight:"16px",marginTop:"2px"},children:Ut(Be)})]})]},Be.id))})]})})()]})})]})}),a.jsx("td",{className:"px-6 py-4 text-sm text-gray-500 align-top w-48 relative overflow-visible",children:a.jsxs("div",{className:"space-y-2",children:[C.roles.sessionAdminCount===0&&C.roles.stakeholderSessionCount===0&&a.jsxs("div",{className:"flex items-center text-gray-700 whitespace-nowrap",children:[a.jsx(Wr,{className:"h-4 w-4 mr-1.5 text-gray-400 flex-shrink-0"}),a.jsx("span",{children:C.created_at?yt(C.created_at):"N/A"}),a.jsxs("span",{className:"text-gray-500 text-xs ml-2",children:["by ",C.created_by_name||"System"]})]}),C.adminInSessions&&C.adminInSessions.length>0&&a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center text-gray-700 whitespace-nowrap",style:{marginBottom:"0.5rem",height:"30px"},children:[a.jsx(Wr,{className:"h-4 w-4 mr-1.5 text-gray-400 flex-shrink-0"}),a.jsx("span",{children:C.created_at?yt(C.created_at):"N/A"}),a.jsxs("span",{className:"text-gray-500 text-xs ml-2",children:["by ",C.created_by_name||"System"]})]}),(()=>{const W=V(C.adminInSessions)||C.adminInSessions[0];C.adminInSessions.length>1;const Ae=(P==null?void 0:P.userId)===C.id&&(P==null?void 0:P.role)==="admin";return a.jsxs(a.Fragment,{children:[W&&a.jsx("div",{className:"relative cursor-pointer",style:{marginLeft:"1.25rem",marginTop:"0.5rem",marginBottom:"0.25rem"},onMouseEnter:()=>F(`${C.id}-${W.id}`),onMouseLeave:()=>F(null),onClick:async Be=>{Be.stopPropagation(),await r(W),s("/admin")},children:a.jsxs("div",{className:"relative z-10",style:{padding:0,margin:0,lineHeight:"1.25rem"},children:[a.jsxs("div",{className:"flex items-center",style:{height:"20px",lineHeight:"20px"},children:[a.jsx(Wr,{className:"h-3 w-3 mr-1.5 text-gray-400 flex-shrink-0"}),a.jsx("span",{className:"text-xs text-gray-700 whitespace-nowrap",children:W.assignedAt?yt(W.assignedAt):"N/A"})]}),a.jsxs("div",{className:"text-xs text-gray-500",style:{height:"16px",lineHeight:"16px",marginTop:"2px",marginLeft:"18px"},children:["by ",W.assignedByName||"System"]})]})}),Ae&&a.jsx("div",{style:{marginTop:"0.5rem"},children:C.adminInSessions.filter(Be=>Be.id!==(W==null?void 0:W.id)).map((Be,gr)=>a.jsx("div",{className:"relative cursor-pointer",style:{marginTop:"0.75rem",marginLeft:"1.25rem",marginBottom:"0.25rem"},onMouseEnter:()=>F(`${C.id}-${Be.id}`),onMouseLeave:()=>F(null),onClick:async yr=>{yr.stopPropagation(),await r(Be),s("/admin")},children:a.jsxs("div",{className:"relative z-10",style:{padding:0,margin:0,lineHeight:"1.25rem"},children:[a.jsxs("div",{className:"flex items-center",style:{height:"20px",lineHeight:"20px"},children:[a.jsx(Wr,{className:"h-3 w-3 mr-1.5 text-gray-400 flex-shrink-0"}),a.jsx("span",{className:"text-xs text-gray-700 whitespace-nowrap",children:Be.assignedAt?yt(Be.assignedAt):"N/A"})]}),a.jsxs("div",{className:"text-xs text-gray-500",style:{height:"16px",lineHeight:"16px",marginTop:"2px",marginLeft:"18px"},children:["by ",Be.assignedByName||"System"]})]})},Be.id))})]})})()]}),C.stakeholderInSessions&&C.stakeholderInSessions.length>0&&a.jsx("div",{className:C.adminInSessions&&C.adminInSessions.length>0?"pt-4 border-t border-gray-100 mt-4":"",children:a.jsxs("div",{children:[(!C.adminInSessions||C.adminInSessions.length===0)&&a.jsxs("div",{className:"flex items-center text-gray-700 whitespace-nowrap",style:{marginBottom:"0.5rem",height:"30px"},children:[a.jsx(Wr,{className:"h-4 w-4 mr-1.5 text-gray-400 flex-shrink-0"}),a.jsx("span",{children:C.created_at?yt(C.created_at):"N/A"}),a.jsxs("span",{className:"text-gray-500 text-xs ml-2",children:["by ",C.created_by_name||"System"]})]}),C.adminInSessions&&C.adminInSessions.length>0&&a.jsx("div",{style:{height:"26px",marginBottom:"0.5rem",visibility:"hidden"},children:a.jsxs("div",{className:"inline-flex items-center gap-1.5 px-2.5 py-1 rounded border text-xs font-medium",children:[a.jsx(ts,{className:"h-3.5 w-3.5"}),a.jsx("span",{children:"Stakeholder"})]})}),(()=>{const W=V(C.stakeholderInSessions)||C.stakeholderInSessions[0];C.stakeholderInSessions.length>1;const Ae=(P==null?void 0:P.userId)===C.id&&(P==null?void 0:P.role)==="stakeholder";return a.jsxs(a.Fragment,{children:[W&&a.jsx("div",{className:"relative cursor-pointer",style:{marginLeft:"1.25rem",marginTop:"0.5rem",marginBottom:"0.25rem"},onMouseEnter:()=>F(`${C.id}-${W.id}`),onMouseLeave:()=>F(null),onClick:async Be=>{Be.stopPropagation(),await r(W),s("/admin")},children:a.jsxs("div",{className:"relative z-10",style:{padding:0,margin:0,lineHeight:"1.25rem"},children:[a.jsxs("div",{className:"flex items-center",style:{height:"20px",lineHeight:"20px"},children:[a.jsx(Wr,{className:"h-3 w-3 mr-1.5 text-gray-400 flex-shrink-0"}),a.jsx("span",{className:"text-xs text-gray-700 whitespace-nowrap",children:W.assignedAt?yt(W.assignedAt):"N/A"})]}),a.jsxs("div",{className:"text-xs text-gray-500",style:{height:"16px",lineHeight:"16px",marginTop:"2px",marginLeft:"18px"},children:["by ",W.assignedByName||"System"]})]})}),Ae&&a.jsx("div",{style:{marginTop:"0.5rem"},children:C.stakeholderInSessions.filter(Be=>Be.id!==(W==null?void 0:W.id)).map((Be,gr)=>a.jsx("div",{className:"relative cursor-pointer",style:{marginTop:"0.75rem",marginLeft:"1.25rem",marginBottom:"0.25rem"},onMouseEnter:()=>F(`${C.id}-${Be.id}`),onMouseLeave:()=>F(null),onClick:async yr=>{yr.stopPropagation(),await r(Be),s("/admin")},children:a.jsxs("div",{className:"relative z-10",style:{padding:0,margin:0,lineHeight:"1.25rem"},children:[a.jsxs("div",{className:"flex items-center",style:{height:"20px",lineHeight:"20px"},children:[a.jsx(Wr,{className:"h-3 w-3 mr-1.5 text-gray-400 flex-shrink-0"}),a.jsx("span",{className:"text-xs text-gray-700 whitespace-nowrap",children:Be.assignedAt?yt(Be.assignedAt):"N/A"})]}),a.jsxs("div",{className:"text-xs text-gray-500",style:{height:"16px",lineHeight:"16px",marginTop:"2px"},children:["by ",Be.assignedByName||"System"]})]})},Be.id))})]})})()]})})]})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium align-top",children:a.jsx("div",{className:"flex items-center justify-end gap-2",children:a.jsxs("div",{className:`relative inline-block transition-all md:transition-opacity ${T===C.id?C.id===(e==null?void 0:e.id)?"opacity-50 visible":"opacity-100 visible":"md:opacity-0 md:invisible opacity-100 visible"}`,ref:he=>{ae.current[C.id]=he},children:[a.jsx("button",{onClick:()=>k(E===C.id?null:C.id),className:"p-2 rounded-md hover:bg-gray-100 transition-colors",disabled:C.id===(e==null?void 0:e.id),title:C.id===(e==null?void 0:e.id)?"Cannot modify your own permissions":"Change user role",children:a.jsx(ES,{className:"h-5 w-5 text-gray-600"})}),E===C.id&&C.id!==(e==null?void 0:e.id)&&a.jsx("div",{className:"fixed mt-1 w-64 bg-white border border-gray-200 rounded-lg shadow-lg z-[100]",style:{top:((J=ae.current[C.id])==null?void 0:J.getBoundingClientRect().bottom)??0,right:window.innerWidth-(((Ne=ae.current[C.id])==null?void 0:Ne.getBoundingClientRect().right)??0)},children:a.jsxs("div",{className:"py-1",children:[a.jsx("div",{className:"px-3 py-2 text-xs font-semibold text-gray-500 uppercase border-b border-gray-200",children:"Change User Role"}),I==="system-admin"&&a.jsxs(a.Fragment,{children:[C.roles.isSystemAdmin?a.jsxs("button",{onClick:()=>De(C.id,!0),className:"w-full px-4 py-2 text-left flex items-center hover:bg-red-50 text-red-700",children:[a.jsx(vs,{className:"h-4 w-4 mr-3"}),a.jsxs("div",{children:[a.jsx("div",{className:"font-medium",children:"Remove System Admin"}),a.jsx("div",{className:"text-xs text-gray-500",children:"Revoke global admin access"})]})]}):a.jsxs("button",{onClick:()=>De(C.id,!1),className:"w-full px-4 py-2 text-left flex items-center hover:bg-[#C89212]/10 text-[#C89212]",children:[a.jsx(vs,{className:"h-4 w-4 mr-3"}),a.jsxs("div",{children:[a.jsx("div",{className:"font-medium",children:"Make System Admin"}),a.jsx("div",{className:"text-xs text-gray-500",children:"Grant global admin access"})]})]}),Rt(C,"session-admin")&&a.jsxs("button",{onClick:()=>Nt(C,"session-admin"),className:"w-full px-4 py-2 text-left flex items-center hover:bg-[#576C71]/10 text-[#576C71] border-t border-gray-200",children:[a.jsx(Cn,{className:"h-4 w-4 mr-3"}),a.jsxs("div",{children:[a.jsx("div",{className:"font-medium",children:"Make Session Admin"}),a.jsx("div",{className:"text-xs text-gray-500",children:"Add to a session as admin"})]})]})]}),Rt(C,"stakeholder")&&a.jsxs("button",{onClick:()=>Nt(C,"stakeholder"),className:"w-full px-4 py-2 text-left flex items-center hover:bg-[#8B5A4A]/10 text-[#8B5A4A] border-t border-gray-200",children:[a.jsx(ts,{className:"h-4 w-4 mr-3"}),a.jsxs("div",{children:[a.jsx("div",{className:"font-medium",children:"Make Stakeholder"}),a.jsx("div",{className:"text-xs text-gray-500",children:"Add to a session as stakeholder"})]})]}),I==="session-admin"&&C.stakeholderInSessions&&C.stakeholderInSessions.length>0&&C.stakeholderInSessions.some(he=>de.includes(he.id))&&a.jsxs("button",{onClick:()=>Nt(C,"remove-stakeholder"),className:"w-full px-4 py-2 text-left flex items-center hover:bg-red-50 text-red-700 border-t border-gray-200",children:[a.jsx(iu,{className:"h-4 w-4 mr-3"}),a.jsxs("div",{children:[a.jsx("div",{className:"font-medium",children:"Remove Stakeholder"}),a.jsx("div",{className:"text-xs text-gray-500",children:"Remove from a session you manage"})]})]}),(C.roles.isSystemAdmin||C.roles.sessionAdminCount>0||C.roles.stakeholderSessionCount>0)&&a.jsxs("button",{onClick:()=>Ye(C.id,C.name),className:"w-full px-4 py-2 text-left flex items-center hover:bg-gray-50 text-gray-700 border-t border-gray-200",children:[a.jsx(iu,{className:"h-4 w-4 mr-3"}),a.jsxs("div",{children:[a.jsx("div",{className:"font-medium",children:"Remove All Roles"}),a.jsx("div",{className:"text-xs text-gray-500",children:"Remove from all sessions"})]})]}),(I==="system-admin"||I==="session-admin"&&C.roles.stakeholderSessionCount>0&&((Te=C.stakeholderInSessions)==null?void 0:Te.some(he=>Me.some(W=>W.id===he.id)))&&!B.has(C.email))&&a.jsx("div",{className:"px-3 py-2 text-xs font-semibold text-gray-500 uppercase border-t border-gray-200",children:"User Functions"}),I==="system-admin"&&a.jsxs("button",{onClick:()=>{Jr(C),Dr(C.name),qn(C.email),Yr(!0),k(null)},className:"w-full px-4 py-2 text-left flex items-center hover:bg-[#1E5461]/10 text-[#1E5461] border-t border-gray-200",children:[a.jsx(Su,{className:"h-4 w-4 mr-3"}),a.jsxs("div",{children:[a.jsx("div",{className:"font-medium",children:"Edit User Profile"}),a.jsx("div",{className:"text-xs text-gray-500",children:"Update name and email"})]})]}),(I==="system-admin"||I==="session-admin"&&C.roles.stakeholderSessionCount>0&&((D=C.stakeholderInSessions)==null?void 0:D.some(he=>Me.some(W=>W.id===he.id))))&&!B.has(C.email)&&a.jsxs("button",{onClick:()=>{k(null),Ge(C.id,C.name)},className:`w-full px-4 py-2 text-left flex items-center hover:bg-[#8B5A4A]/10 text-[#8B5A4A] border-t border-gray-200 ${C.id===(e==null?void 0:e.id)||I==="system-admin"&&It.has(C.id)?"opacity-50 cursor-not-allowed":""}`,disabled:C.id===(e==null?void 0:e.id)||I==="system-admin"&&It.has(C.id),children:[a.jsx(ji,{className:"h-4 w-4 mr-3"}),a.jsxs("div",{children:[a.jsx("div",{className:"font-medium",children:I==="session-admin"?"Remove Stakeholder":"Delete User"}),a.jsx("div",{className:"text-xs text-gray-500",children:I==="session-admin"?"Remove from all your sessions":C.id===(e==null?void 0:e.id)?"Cannot delete your own account":It.has(C.id)?`Cannot delete protected account${bt(C)?` (${bt(C)})`:""}`:"Permanently delete this user"})]})]})]})})]})})})]},C.id)})})]}),a.jsx("div",{className:"bg-gray-50 px-6 py-4 border-t border-gray-200",children:a.jsxs("div",{className:"flex flex-wrap gap-4 text-sm",children:[a.jsxs("div",{className:"flex items-center",children:[a.jsx(Un,{className:"h-4 w-4 mr-2 text-gray-500"}),a.jsxs("span",{className:"text-gray-600",children:["Total Users: ",a.jsx("strong",{children:l.length})]})]}),a.jsxs("div",{className:"flex items-center",children:[a.jsx(vs,{className:"h-4 w-4 mr-2 text-[#C89212]"}),a.jsxs("span",{className:"text-gray-600",children:["System Admins: ",a.jsx("strong",{children:l.filter(C=>C.roles.isSystemAdmin).length})]})]}),a.jsxs("div",{className:"flex items-center",children:[a.jsx(Cn,{className:"h-4 w-4 mr-2 text-[#576C71]"}),a.jsxs("span",{className:"text-gray-600",children:["Session Admins: ",a.jsx("strong",{children:l.filter(C=>C.roles.sessionAdminCount>0).length})]})]}),a.jsxs("div",{className:"flex items-center",children:[a.jsx(ts,{className:"h-4 w-4 mr-2 text-[#8B5A4A]"}),a.jsxs("span",{className:"text-gray-600",children:["Stakeholders: ",a.jsx("strong",{children:l.filter(C=>C.roles.stakeholderSessionCount>0).length})]})]})]})})]}),a.jsx("div",{className:"md:hidden mt-4 bg-white rounded-lg shadow-md p-4",children:a.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[a.jsxs("div",{className:"flex items-center",children:[a.jsx(Un,{className:"h-5 w-5 mr-2 text-gray-500 flex-shrink-0"}),a.jsxs("div",{children:[a.jsx("div",{className:"text-xs text-gray-500",children:"Total"}),a.jsx("div",{className:"text-lg font-bold text-gray-900",children:l.length})]})]}),a.jsxs("div",{className:"flex items-center",children:[a.jsx(vs,{className:"h-5 w-5 mr-2 text-[#C89212] flex-shrink-0"}),a.jsxs("div",{children:[a.jsx("div",{className:"text-xs text-gray-500",children:"Sys Admins"}),a.jsx("div",{className:"text-lg font-bold text-gray-900",children:l.filter(C=>C.roles.isSystemAdmin).length})]})]}),a.jsxs("div",{className:"flex items-center",children:[a.jsx(Cn,{className:"h-5 w-5 mr-2 text-[#576C71] flex-shrink-0"}),a.jsxs("div",{children:[a.jsx("div",{className:"text-xs text-gray-500",children:"Session Admins"}),a.jsx("div",{className:"text-lg font-bold text-gray-900",children:l.filter(C=>C.roles.sessionAdminCount>0).length})]})]}),a.jsxs("div",{className:"flex items-center",children:[a.jsx(ts,{className:"h-5 w-5 mr-2 text-[#8B5A4A] flex-shrink-0"}),a.jsxs("div",{children:[a.jsx("div",{className:"text-xs text-gray-500",children:"Stakeholders"}),a.jsx("div",{className:"text-lg font-bold text-gray-900",children:l.filter(C=>C.roles.stakeholderSessionCount>0).length})]})]})]})}),(me||te)&&a.jsx("div",{className:"mt-8 flex justify-center",children:a.jsxs("div",{className:"inline-flex items-center bg-gray-100 rounded-lg p-1",children:[a.jsxs("button",{onClick:()=>{(te||me)&&H("session-admin")},className:`px-4 py-2 rounded-md text-sm font-medium transition-colors flex items-center ${I==="session-admin"?"bg-white text-[#2d4660] shadow-sm":"text-gray-600 hover:text-gray-900"}`,title:"Session Admin View",children:[a.jsx(Cn,{className:"h-4 w-4 inline mr-2"}),"Session Admin"]}),a.jsxs("button",{onClick:()=>{me&&H("system-admin")},className:`px-4 py-2 rounded-md text-sm font-medium transition-colors flex items-center ${I==="system-admin"?"bg-white text-[#2d4660] shadow-sm":"text-gray-600 hover:text-gray-900"}`,disabled:!me,title:me?"System Admin View":"Only available for System Admins",children:[a.jsx(vs,{className:"h-4 w-4 inline mr-2"}),"System Admin"]})]})})]}),a.jsx("footer",{className:"mt-12 bg-gray-50 border-t border-gray-200",children:a.jsxs("div",{className:"container mx-auto px-4 py-6 max-w-6xl",children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 text-sm text-gray-600",children:[a.jsxs("div",{children:[a.jsx("h3",{className:"font-semibold text-gray-900 mb-2",children:"New Millennium Building Systems"}),a.jsxs("p",{className:"text-xs leading-relaxed",children:["A Steel Dynamics Company",a.jsx("br",{}),"Innovation in structural steel manufacturing"]})]}),a.jsxs("div",{children:[a.jsx("h3",{className:"font-semibold text-gray-900 mb-2",children:"Quick Links"}),a.jsxs("ul",{className:"space-y-1 text-xs",children:[a.jsx("li",{children:a.jsx("a",{href:"https://www.steeldynamics.com",target:"_blank",rel:"noopener noreferrer",className:"hover:text-[#2d4660] transition-colors",children:"Steel Dynamics Inc."})}),a.jsx("li",{children:a.jsx("a",{href:"https://www.newmill.com",target:"_blank",rel:"noopener noreferrer",className:"hover:text-[#2d4660] transition-colors",children:"New Millennium"})})]})]}),a.jsxs("div",{children:[a.jsx("h3",{className:"font-semibold text-gray-900 mb-2",children:"Need Help?"}),a.jsx("p",{className:"text-xs",children:"Contact your Product Owner or IT administrator for assistance with user management."})]})]}),a.jsx("div",{className:"mt-6 pt-6 border-t border-gray-200 text-center text-xs text-gray-500",children:a.jsx("p",{children:" 2025 New Millennium Building Systems, LLC. All rights reserved."})})]})}),ve&&L&&ge&&a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4 overflow-y-auto",onClick:Dn,children:a.jsx("div",{className:"bg-white rounded-lg shadow-xl max-w-xl w-full my-8",onClick:C=>C.stopPropagation(),children:a.jsxs("div",{className:"p-6 overflow-visible",children:[a.jsxs("div",{className:"flex items-start justify-between mb-2",children:[a.jsxs("div",{className:"flex-1",children:[a.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-2",children:ge==="session-admin"?"Add Session Admin":ge==="remove-stakeholder"?"Remove Stakeholder":"Add Stakeholder"}),a.jsx("p",{className:"text-sm text-gray-600",children:ge==="remove-stakeholder"?a.jsxs(a.Fragment,{children:["Select sessions to remove ",a.jsx("strong",{children:L.name})," as a stakeholder."]}):a.jsxs(a.Fragment,{children:["Select sessions to add ",a.jsx("strong",{children:L.name})," as ",ge==="session-admin"?"an admin":"a stakeholder","."]})})]}),a.jsx("button",{onClick:Dn,className:"ml-4 p-1 rounded-md text-gray-400 hover:text-gray-600 hover:bg-gray-100 transition-colors flex-shrink-0","aria-label":"Close modal",children:a.jsx($s,{className:"h-5 w-5"})})]}),a.jsx("div",{className:"mb-6",children:a.jsx(IZ,{products:Ir,sessions:Vt(ge),selectedProductId:ft,onProductChange:C=>{wt(C),$([]),_t(!0)},useAllSessions:Ct,onToggleAllSessions:C=>{_t(C),C&&$([])},selectedSessionIds:Ot,onSessionToggle:C=>{Ot.includes(C)?$(Ot.filter(J=>J!==C)):$([...Ot,C])},getSessionStatus:Pt,formatSessionDateRange:Ut,filterSessions:ie})}),a.jsx("div",{className:"flex justify-end mt-6",children:a.jsx("button",{onClick:Se,disabled:!ft||!Ct&&Ot.length===0,className:`px-6 py-2.5 rounded-lg transition-colors ${ft&&(Ct||Ot.length>0)?ge==="remove-stakeholder"?"bg-red-600 text-white hover:bg-red-700":"bg-[#4f6d8e] text-white hover:bg-[#3d5670]":"bg-gray-300 text-gray-500 cursor-not-allowed"}`,children:(()=>{const J=(Ct?ie(Vt(ge),ft||"").length:Ot.length)>1;return ge==="remove-stakeholder"?`Remove from Session${J?"s":""}`:ge==="session-admin"?`Add to Session${J?"s":""} as Session Admin`:`Add to Session${J?"s":""} as a Stakeholder`})()})})]})})}),Y&&ue&&a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:a.jsx("div",{className:"bg-white rounded-lg shadow-xl max-w-xl w-full max-h-[90vh] overflow-y-auto",children:a.jsxs("div",{className:"p-6",children:[a.jsxs("div",{className:"flex items-start mb-4",children:[a.jsx("div",{className:"flex-shrink-0 w-12 h-12 rounded-full bg-red-100 flex items-center justify-center",children:a.jsx(iu,{className:"h-6 w-6 text-red-600"})}),a.jsxs("div",{className:"ml-4 flex-1",children:[a.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-1",children:"Delete User Account"}),a.jsx("p",{className:"text-sm text-gray-600",children:"This action cannot be undone. Please review the details below."})]})]}),a.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 mb-4",children:[a.jsxs("div",{className:"flex items-center mb-3",children:[a.jsx(ts,{className:"h-5 w-5 text-gray-400 mr-2"}),a.jsxs("div",{children:[a.jsx("div",{className:"font-medium text-gray-900",children:ue.name}),a.jsx("div",{className:"text-sm text-gray-500",children:ue.email})]})]}),a.jsxs("div",{className:"space-y-2 border-t border-gray-200 pt-3",children:[a.jsx("div",{className:"text-xs font-semibold text-gray-500 uppercase",children:"Current Roles"}),ue.roles.isSystemAdmin&&a.jsxs("div",{className:"flex items-center text-sm",children:[a.jsx(vs,{className:"h-4 w-4 mr-2 text-[#C89212]"}),a.jsx("span",{className:"text-gray-700",children:"System Admin"})]}),ue.roles.sessionAdminCount>0&&a.jsxs("div",{className:"flex items-center text-sm",children:[a.jsx(Cn,{className:"h-4 w-4 mr-2 text-[#576C71]"}),a.jsxs("span",{className:"text-gray-700",children:["Session Admin in ",ue.roles.sessionAdminCount," session",ue.roles.sessionAdminCount!==1?"s":""]})]}),ue.roles.stakeholderSessionCount>0&&a.jsxs("div",{className:"flex items-center text-sm",children:[a.jsx(ts,{className:"h-4 w-4 mr-2 text-[#8B5A4A]"}),a.jsxs("span",{className:"text-gray-700",children:["Stakeholder in ",ue.roles.stakeholderSessionCount," session",ue.roles.stakeholderSessionCount!==1?"s":""]})]}),!ue.roles.isSystemAdmin&&ue.roles.sessionAdminCount===0&&ue.roles.stakeholderSessionCount===0&&a.jsx("div",{className:"text-sm text-gray-500",children:"No roles assigned"})]})]}),ue.adminInSessions&&ue.adminInSessions.length>0||ue.stakeholderInSessions&&ue.stakeholderInSessions.length>0?a.jsxs("div",{className:"mb-4",children:[a.jsx("div",{className:"text-sm font-semibold text-gray-700 mb-2",children:"User will be removed from these sessions:"}),a.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-3 max-h-48 overflow-y-auto",children:[ue.adminInSessions&&ue.adminInSessions.length>0&&a.jsxs("div",{className:"mb-3",children:[a.jsxs("div",{className:"text-xs font-semibold text-gray-600 mb-1.5 flex items-center",children:[a.jsx(Cn,{className:"h-3.5 w-3.5 mr-1.5 text-[#576C71]"}),"Admin Sessions (",ue.adminInSessions.length,")"]}),a.jsx("div",{className:"space-y-1 ml-5",children:ue.adminInSessions.map(C=>a.jsxs("div",{className:"text-sm text-gray-700",children:[" ",C.title||"Unnamed Session"]},C.id))})]}),ue.stakeholderInSessions&&ue.stakeholderInSessions.length>0&&a.jsxs("div",{children:[a.jsxs("div",{className:"text-xs font-semibold text-gray-600 mb-1.5 flex items-center",children:[a.jsx(ts,{className:"h-3.5 w-3.5 mr-1.5 text-[#8B5A4A]"}),"Stakeholder Sessions (",ue.stakeholderInSessions.length,")"]}),a.jsx("div",{className:"space-y-1 ml-5",children:ue.stakeholderInSessions.map(C=>a.jsxs("div",{className:"text-sm text-gray-700",children:[" ",C.title||"Unnamed Session"]},C.id))})]})]})]}):null,a.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-3 mb-4",children:a.jsxs("div",{className:"flex",children:[a.jsx("div",{className:"flex-shrink-0",children:a.jsx("svg",{className:"h-5 w-5 text-yellow-600",fill:"currentColor",viewBox:"0 0 20 20",children:a.jsx("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})})}),a.jsxs("div",{className:"ml-3",children:[a.jsx("h3",{className:"text-sm font-medium text-yellow-800",children:"Warning: This action is permanent"}),a.jsx("div",{className:"mt-1 text-sm text-yellow-700",children:a.jsxs("ul",{className:"list-disc pl-5 space-y-1",children:[a.jsx("li",{children:"User account will be permanently deleted"}),a.jsx("li",{children:"All authentication access will be revoked"}),a.jsx("li",{children:"User will be removed from all sessions"}),a.jsx("li",{children:"This action cannot be undone"})]})})]})]})}),a.jsxs("div",{className:"flex gap-3",children:[a.jsx("button",{onClick:be,disabled:je,className:"flex-1 px-4 py-2.5 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:"Cancel"}),a.jsx("button",{onClick:_e,disabled:je,className:"flex-1 px-4 py-2.5 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center",children:je?a.jsxs(a.Fragment,{children:[a.jsxs("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",fill:"none",viewBox:"0 0 24 24",children:[a.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),a.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Deleting..."]}):"Delete User Permanently"})]})]})})}),fr&&a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4 overflow-y-auto",onClick:et,children:a.jsx("div",{className:"bg-white rounded-lg shadow-xl max-w-3xl w-full my-8 max-h-[90vh] overflow-y-auto",onClick:C=>C.stopPropagation(),children:a.jsxs("div",{className:"p-6",children:[a.jsxs("div",{className:"flex items-start mb-6",children:[a.jsx("div",{className:"flex-shrink-0 w-12 h-12 rounded-full bg-[#8B5A4A]/10 flex items-center justify-center",children:a.jsx(Un,{className:"h-6 w-6 text-[#8B5A4A]"})}),a.jsxs("div",{className:"ml-4 flex-1",children:[a.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-1",children:I==="session-admin"?"Add New Stakeholder":"Add New User"}),a.jsx("p",{className:"text-sm text-gray-600",children:I==="session-admin"?"Create a new user account and add as stakeholder to your sessions":"Create a new user account and assign roles"})]}),a.jsx("button",{onClick:et,disabled:Lr,className:"flex-shrink-0 ml-4 p-1 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed","aria-label":"Close modal",children:a.jsx($s,{className:"h-5 w-5"})})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Full Name ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx("input",{type:"text",value:Ve.name,onChange:C=>zt({...Ve,name:C.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#2D4660] focus:border-transparent",placeholder:"John Doe"})]}),a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Email Address ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx("input",{type:"email",value:Ve.email,onChange:C=>zt({...Ve,email:C.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#2D4660] focus:border-transparent",placeholder:"john.doe@newmill.com"})]}),a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Temporary Password ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx("input",{type:"text",value:Ve.password,onChange:C=>zt({...Ve,password:C.target.value}),className:"flex-1 px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#2D4660] focus:border-transparent font-mono text-sm",placeholder:"Auto-generated password"}),a.jsx("button",{onClick:()=>zt({...Ve,password:Mt()}),className:"px-4 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-colors whitespace-nowrap",children:"Regenerate"})]}),a.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"Save this password to share with the user securely"})]}),I==="system-admin"&&a.jsxs("div",{className:"border-t border-gray-200 pt-4",children:[a.jsxs("button",{type:"button",onClick:()=>Sr({...Xt,systemAdmin:!Xt.systemAdmin}),className:"w-full flex items-center justify-between py-2 hover:bg-gray-50 rounded-lg px-2 -ml-2 transition-colors",children:[a.jsxs("div",{className:"flex items-center",children:[a.jsx(vs,{className:"h-4 w-4 mr-2 text-[#C89212]"}),a.jsx("span",{className:"text-sm font-medium text-gray-700",children:"System Administrator"})]}),a.jsx(zn,{className:`h-4 w-4 text-gray-500 transition-transform ${Xt.systemAdmin?"rotate-180":""}`})]}),Xt.systemAdmin&&a.jsxs("div",{className:"mt-3 ml-6 space-y-3",children:[a.jsxs("label",{className:"flex items-center cursor-pointer",children:[a.jsx("input",{type:"checkbox",checked:Ve.isSystemAdmin,onChange:C=>zt({...Ve,isSystemAdmin:C.target.checked}),className:"w-4 h-4 text-[#C89212] border-gray-300 rounded focus:ring-[#C89212] accent-green-600"}),a.jsx("span",{className:"ml-3 text-sm text-gray-700",children:"Grant system administrator privileges"})]}),a.jsx("p",{className:"text-xs text-gray-500",children:"Full access to all sessions and user management"})]})]}),I==="system-admin"&&a.jsxs("div",{className:"border-t border-gray-200 pt-4",children:[a.jsxs("button",{type:"button",onClick:()=>Sr({...Xt,sessionAdmin:!Xt.sessionAdmin}),className:"w-full flex items-center justify-between py-2 hover:bg-gray-50 rounded-lg px-2 -ml-2 transition-colors",children:[a.jsxs("div",{className:"flex items-center",children:[a.jsx(Cn,{className:"h-4 w-4 mr-2 text-[#576C71]"}),a.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Session Admin"}),Ve.sessionAdminIds.length>0&&a.jsx("span",{className:"ml-2 px-2 py-0.5 bg-[#576C71]/10 text-[#576C71] text-xs rounded-full",children:Ve.sessionAdminIds.length})]}),a.jsx(zn,{className:`h-4 w-4 text-gray-500 transition-transform ${Xt.sessionAdmin?"rotate-180":""}`})]}),Xt.sessionAdmin&&a.jsxs("div",{className:"mt-3 ml-6 space-y-3",children:[a.jsx("div",{children:a.jsx(Yf,{products:Ir,value:Er,onChange:C=>{zr(C),zt(J=>({...J,sessionAdminIds:[]})),cs(!0)},label:"Product *"})}),Er&&a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Session Selection *"}),a.jsxs("div",{className:"inline-flex items-center bg-gray-100 rounded-lg p-1",children:[a.jsx("button",{type:"button",onClick:()=>{cs(!1)},className:`px-4 py-2 rounded-md text-sm font-medium transition-colors flex items-center ${Gr?"text-gray-600 hover:text-gray-900":"bg-white text-[#2d4660] shadow-sm"}`,children:"Select Sessions"}),a.jsx("button",{type:"button",onClick:()=>{cs(!0),zt(C=>({...C,sessionAdminIds:[]}))},className:`px-4 py-2 rounded-md text-sm font-medium transition-colors flex items-center ${Gr?"bg-white text-[#2d4660] shadow-sm":"text-gray-600 hover:text-gray-900"}`,children:"All Sessions"})]}),Gr&&a.jsx("p",{className:"mt-2 text-xs text-gray-500",children:"User will be added to all current and future sessions for this product"})]}),!Gr&&a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Sessions * (Current and Future)"}),Vn.length===0?a.jsx("p",{className:"text-sm text-gray-500",children:"No current or future sessions found for this product."}):a.jsx("div",{className:"max-h-48 overflow-y-auto border border-gray-300 rounded-md p-2",children:Vn.map(C=>a.jsxs("label",{className:"flex items-start px-3 py-2 hover:bg-gray-50 cursor-pointer border-b border-gray-100 last:border-b-0",children:[a.jsx("input",{type:"checkbox",checked:Ve.sessionAdminIds.includes(C.id),onChange:()=>$e(C.id),className:"w-4 h-4 border-gray-300 rounded focus:ring-[#2D4660] accent-green-600 mt-1",style:{accentColor:"#16a34a"}}),a.jsxs("div",{className:"ml-3 flex-1",children:[a.jsx("div",{className:"text-sm font-medium text-gray-900",children:C.title||"Unnamed Session"}),a.jsx("div",{className:"text-xs text-gray-500 mt-0.5",children:Ut(C)}),a.jsx("div",{className:"text-xs mt-0.5",children:a.jsx("span",{className:`font-medium ${Pt(C).color}`,children:Pt(C).text})})]})]},C.id))})]})]})]})]}),I==="session-admin"?a.jsxs("div",{className:"border-t border-gray-200 pt-4",children:[a.jsxs("div",{className:"flex items-center mb-3",children:[a.jsx(ts,{className:"h-4 w-4 mr-2 text-[#8B5A4A]"}),a.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Add as Stakeholder"}),Ve.stakeholderSessionIds.length>0&&a.jsx("span",{className:"ml-2 px-2 py-0.5 bg-[#8B5A4A]/10 text-[#8B5A4A] text-xs rounded-full",children:Ve.stakeholderSessionIds.length})]}),a.jsxs("div",{className:"space-y-3",children:[a.jsx("div",{children:a.jsx(Yf,{products:Ir,value:Qt,onChange:C=>{hr(C),zt(J=>({...J,stakeholderSessionIds:[]})),ir(!0)},label:"Product *"})}),Qt&&a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Session Selection *"}),a.jsxs("div",{className:"inline-flex items-center bg-gray-100 rounded-lg p-1",children:[a.jsx("button",{type:"button",onClick:()=>{ir(!1)},className:`px-4 py-2 rounded-md text-sm font-medium transition-colors flex items-center ${sr?"text-gray-600 hover:text-gray-900":"bg-white text-[#2d4660] shadow-sm"}`,children:"Select Sessions"}),a.jsx("button",{type:"button",onClick:()=>{ir(!0),zt(C=>({...C,stakeholderSessionIds:[]}))},className:`px-4 py-2 rounded-md text-sm font-medium transition-colors flex items-center ${sr?"bg-white text-[#2d4660] shadow-sm":"text-gray-600 hover:text-gray-900"}`,children:"All Sessions"})]}),sr&&a.jsx("p",{className:"mt-2 text-xs text-gray-500",children:"User will be added to all current and future sessions for this product"})]}),!sr&&a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Sessions * (Current and Future)"}),Cr.length===0?a.jsx("p",{className:"text-sm text-gray-500",children:"No current or future sessions found for this product."}):a.jsx("div",{className:"max-h-48 overflow-y-auto border border-gray-300 rounded-md p-2",children:Cr.map(C=>a.jsxs("label",{className:"flex items-start px-3 py-2 hover:bg-gray-50 cursor-pointer border-b border-gray-100 last:border-b-0",children:[a.jsx("input",{type:"checkbox",checked:Ve.stakeholderSessionIds.includes(C.id),onChange:()=>gt(C.id),className:"w-4 h-4 border-gray-300 rounded focus:ring-[#2D4660] accent-green-600 mt-1",style:{accentColor:"#16a34a"}}),a.jsxs("div",{className:"ml-3 flex-1",children:[a.jsx("div",{className:"text-sm font-medium text-gray-900",children:C.title||"Unnamed Session"}),a.jsx("div",{className:"text-xs text-gray-500 mt-0.5",children:Ut(C)}),a.jsx("div",{className:"text-xs mt-0.5",children:a.jsx("span",{className:`font-medium ${Pt(C).color}`,children:Pt(C).text})})]})]},C.id))})]})]})]})]}):a.jsxs("div",{className:"border-t border-gray-200 pt-4",children:[a.jsxs("button",{type:"button",onClick:()=>Sr({...Xt,stakeholder:!Xt.stakeholder}),className:"w-full flex items-center justify-between py-2 hover:bg-gray-50 rounded-lg px-2 -ml-2 transition-colors",children:[a.jsxs("div",{className:"flex items-center",children:[a.jsx(ts,{className:"h-4 w-4 mr-2 text-[#8B5A4A]"}),a.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Stakeholder"}),Ve.stakeholderSessionIds.length>0&&a.jsx("span",{className:"ml-2 px-2 py-0.5 bg-[#8B5A4A]/10 text-[#8B5A4A] text-xs rounded-full",children:Ve.stakeholderSessionIds.length})]}),a.jsx(zn,{className:`h-4 w-4 text-gray-500 transition-transform ${Xt.stakeholder?"rotate-180":""}`})]}),Xt.stakeholder&&a.jsxs("div",{className:"mt-3 ml-6 space-y-3",children:[a.jsx("div",{children:a.jsx(Yf,{products:Ir,value:Qt,onChange:C=>{hr(C),zt(J=>({...J,stakeholderSessionIds:[]})),ir(!0)},label:"Product *"})}),Qt&&a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Session Selection *"}),a.jsxs("div",{className:"inline-flex items-center bg-gray-100 rounded-lg p-1",children:[a.jsx("button",{type:"button",onClick:()=>{ir(!1)},className:`px-4 py-2 rounded-md text-sm font-medium transition-colors flex items-center ${sr?"text-gray-600 hover:text-gray-900":"bg-white text-[#2d4660] shadow-sm"}`,children:"Select Sessions"}),a.jsx("button",{type:"button",onClick:()=>{ir(!0),zt(C=>({...C,stakeholderSessionIds:[]}))},className:`px-4 py-2 rounded-md text-sm font-medium transition-colors flex items-center ${sr?"bg-white text-[#2d4660] shadow-sm":"text-gray-600 hover:text-gray-900"}`,children:"All Sessions"})]}),sr&&a.jsx("p",{className:"mt-2 text-xs text-gray-500",children:"User will be added to all current and future sessions for this product"})]}),!sr&&a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Sessions * (Current and Future)"}),Cr.length===0?a.jsx("p",{className:"text-sm text-gray-500",children:"No current or future sessions found for this product."}):a.jsx("div",{className:"max-h-48 overflow-y-auto border border-gray-300 rounded-md p-2",children:Cr.map(C=>a.jsxs("label",{className:"flex items-start px-3 py-2 hover:bg-gray-50 cursor-pointer border-b border-gray-100 last:border-b-0",children:[a.jsx("input",{type:"checkbox",checked:Ve.stakeholderSessionIds.includes(C.id),onChange:()=>gt(C.id),className:"w-4 h-4 border-gray-300 rounded focus:ring-[#2D4660] accent-green-600 mt-1",style:{accentColor:"#16a34a"}}),a.jsxs("div",{className:"ml-3 flex-1",children:[a.jsx("div",{className:"text-sm font-medium text-gray-900",children:C.title||"Unnamed Session"}),a.jsx("div",{className:"text-xs text-gray-500 mt-0.5",children:Ut(C)}),a.jsx("div",{className:"text-xs mt-0.5",children:a.jsx("span",{className:`font-medium ${Pt(C).color}`,children:Pt(C).text})})]})]},C.id))})]})]})]})]})]}),a.jsxs("div",{className:"flex gap-3 mt-6 pt-6 border-t border-gray-200",children:[a.jsx("button",{onClick:et,disabled:Lr,className:"flex-1 px-4 py-2.5 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:"Cancel"}),a.jsx("button",{onClick:At,disabled:!!(Lr||!Ve.name.trim()||!Ve.email.trim()||!Ve.password.trim()||I==="session-admin"&&(!Qt||!sr&&Ve.stakeholderSessionIds.length===0)||I==="system-admin"&&Xt.sessionAdmin&&Er&&!Gr&&Ve.sessionAdminIds.length===0||I==="system-admin"&&Xt.stakeholder&&Qt&&!sr&&Ve.stakeholderSessionIds.length===0),className:"flex-1 px-4 py-2.5 bg-[#2D4660] text-white rounded-lg hover:bg-[#173B65] transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center",children:Lr?a.jsxs(a.Fragment,{children:[a.jsxs("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",fill:"none",viewBox:"0 0 24 24",children:[a.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),a.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),Ve.isSystemAdmin?"Adding System Admin...":Ve.sessionAdminIds.length>0?"Adding Session Admin...":Ve.stakeholderSessionIds.length>0?"Adding Stakeholder...":"Creating User..."]}):Ve.isSystemAdmin?"Add System Admin":Ve.sessionAdminIds.length>0?"Add Session Admin":Ve.stakeholderSessionIds.length>0?"Add Stakeholder":"Create User"})]})]})})}),wn&&pr&&a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:a.jsx("div",{className:"bg-white rounded-lg shadow-xl max-w-lg w-full max-h-[90vh] overflow-y-auto",children:a.jsxs("div",{className:"p-6",children:[a.jsxs("div",{className:"flex items-start mb-4",children:[a.jsx("div",{className:"flex-shrink-0 w-12 h-12 rounded-full bg-blue-100 flex items-center justify-center",children:a.jsx(Su,{className:"h-6 w-6 text-blue-600"})}),a.jsxs("div",{className:"ml-4 flex-1",children:[a.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-1",children:"Edit User"}),a.jsx("p",{className:"text-sm text-gray-600",children:"Update user name and email address"})]}),a.jsx("button",{onClick:()=>{Yr(!1),Jr(null),Dr(""),qn("")},className:"flex-shrink-0 ml-4 p-1 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-lg transition-colors","aria-label":"Close modal",children:a.jsx($s,{className:"h-5 w-5"})})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Full Name ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx("input",{type:"text",value:ar,onChange:C=>Dr(C.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#2D4660] focus:border-transparent",placeholder:"John Doe",disabled:us})]}),a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Email Address ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx("input",{type:"email",value:In,onChange:C=>qn(C.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#2D4660] focus:border-transparent",placeholder:"john.doe@newmill.com",disabled:us})]})]}),a.jsxs("div",{className:"flex justify-end gap-3 mt-6",children:[a.jsx("button",{onClick:()=>{Yr(!1),Jr(null),Dr(""),qn("")},className:"px-4 py-2.5 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",disabled:us,children:"Cancel"}),a.jsx("button",{onClick:it,disabled:us||!ar.trim()||!In.trim(),className:"px-4 py-2.5 bg-[#2D4660] text-white rounded-lg hover:bg-[#173B65] transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:us?"Updating...":"Update User"})]})]})})}),Xn&&an&&a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:a.jsx("div",{className:"bg-white rounded-lg shadow-xl max-w-lg w-full max-h-[90vh] overflow-y-auto",children:a.jsxs("div",{className:"p-6",children:[a.jsxs("div",{className:"flex items-start mb-4",children:[a.jsx("div",{className:"flex-shrink-0 w-12 h-12 rounded-full bg-green-100 flex items-center justify-center",children:a.jsx(Fr,{className:"h-6 w-6 text-green-600"})}),a.jsxs("div",{className:"ml-4 flex-1",children:[a.jsxs("h2",{className:"text-xl font-bold text-gray-900 mb-1",children:[an.userType," Created Successfully!"]}),a.jsx("p",{className:"text-sm text-gray-600",children:"The user account has been created and roles have been assigned."})]}),a.jsx("button",{onClick:()=>{sn(!1),on(null)},className:"flex-shrink-0 ml-4 p-1 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-lg transition-colors","aria-label":"Close modal",children:a.jsx($s,{className:"h-5 w-5"})})]}),a.jsx("div",{className:"bg-gray-50 rounded-lg p-4 mb-4",children:a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{children:[a.jsx("div",{className:"text-xs font-semibold text-gray-500 uppercase mb-1",children:"Email Address"}),a.jsx("div",{className:"text-sm font-medium text-gray-900",children:an.email})]}),a.jsxs("div",{children:[a.jsx("div",{className:"text-xs font-semibold text-gray-500 uppercase mb-1",children:"Temporary Password"}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("code",{className:"flex-1 px-3 py-2 bg-white border border-gray-300 rounded-md font-mono text-sm text-gray-900",children:an.password}),a.jsx("button",{onClick:()=>{navigator.clipboard.writeText(an.password)},className:"px-3 py-2 bg-gray-200 text-gray-700 rounded-md hover:bg-gray-300 transition-colors text-sm",title:"Copy password",children:"Copy"})]})]})]})}),a.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-3 mb-4",children:a.jsxs("div",{className:"flex",children:[a.jsx("div",{className:"flex-shrink-0",children:a.jsx("svg",{className:"h-5 w-5 text-yellow-600",fill:"currentColor",viewBox:"0 0 20 20",children:a.jsx("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})})}),a.jsxs("div",{className:"ml-3",children:[a.jsx("h3",{className:"text-sm font-medium text-yellow-800",children:"Important: Save This Password"}),a.jsx("div",{className:"mt-1 text-sm text-yellow-700",children:"Please save this password and share it with the user securely. They will need it to log in for the first time."})]})]})}),a.jsx("div",{className:"flex justify-end",children:a.jsx("button",{onClick:()=>{sn(!1),on(null)},className:"px-4 py-2.5 bg-[#2D4660] text-white rounded-lg hover:bg-[#173B65] transition-colors",children:"Done"})})]})})})]}):null}const RZ=""+new URL("bottom-left-curve-T4fflHT3.png",import.meta.url).href,$Z=()=>a.jsx("div",{className:"fixed bottom-0 left-0 pointer-events-none z-0",children:a.jsx("img",{src:RZ,alt:"",style:{maxWidth:"600px",height:"auto",opacity:.2}})});function MZ(){return a.jsx(SM,{children:a.jsxs(E6,{children:[a.jsx($Z,{}),a.jsx(b5,{basename:"/feature-voting-app",children:a.jsxs(QD,{children:[a.jsx(As,{path:"/",element:a.jsx(YD,{to:"/login",replace:!0})}),a.jsx(As,{path:"/login",element:a.jsx(OF,{})}),a.jsx(As,{path:"/sessions",element:a.jsx(kZ,{})}),a.jsx(As,{path:"/create-session",element:a.jsx(CZ,{})}),a.jsx(As,{path:"/manage-stakeholders",element:a.jsx(AZ,{})}),a.jsx(As,{path:"/manage-admins",element:a.jsx(PZ,{})}),a.jsx(As,{path:"/vote",element:a.jsx(wv,{adminMode:!1})}),a.jsx(As,{path:"/admin",element:a.jsx(wv,{adminMode:!0})}),a.jsx(As,{path:"/results",element:a.jsx(wv,{resultsMode:!0})}),a.jsx(As,{path:"/unauthorized",element:a.jsx(OZ,{})}),a.jsx(As,{path:"/system-admins",element:a.jsx(TZ,{})}),a.jsx(As,{path:"/users",element:a.jsx(DZ,{})})]})})]})})}if(typeof window<"u"){const e=console.error;console.error=(...t)=>{var n;const r=((n=t[0])==null?void 0:n.toString())||"";r.includes("runtime.lastError")||r.includes("message channel closed")||e.apply(console,t)}}aD.createRoot(document.getElementById("root")).render(a.jsx(vt.StrictMode,{children:a.jsx(MZ,{})}));
