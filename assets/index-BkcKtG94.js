var Y4=Object.defineProperty;var J4=(e,t,r)=>t in e?Y4(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;var _g=(e,t,r)=>J4(e,typeof t!="symbol"?t+"":t,r);function X4(e,t){for(var r=0;r<t.length;r++){const n=t[r];if(typeof n!="string"&&!Array.isArray(n)){for(const s in n)if(s!=="default"&&!(s in e)){const i=Object.getOwnPropertyDescriptor(n,s);i&&Object.defineProperty(e,s,i.get?i:{enumerable:!0,get:()=>n[s]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const l of i.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&n(l)}).observe(document,{childList:!0,subtree:!0});function r(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(s){if(s.ep)return;s.ep=!0;const i=r(s);fetch(s.href,i)}})();function Ui(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function Q4(e){if(Object.prototype.hasOwnProperty.call(e,"__esModule"))return e;var t=e.default;if(typeof t=="function"){var r=function n(){return this instanceof n?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};r.prototype=t.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(e).forEach(function(n){var s=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(r,n,s.get?s:{enumerable:!0,get:function(){return e[n]}})}),r}var Ng={exports:{}},wu={},Cg={exports:{}},$t={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ij;function Z4(){if(ij)return $t;ij=1;var e=Symbol.for("react.element"),t=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),i=Symbol.for("react.provider"),l=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),m=Symbol.for("react.memo"),f=Symbol.for("react.lazy"),p=Symbol.iterator;function y(I){return I===null||typeof I!="object"?null:(I=p&&I[p]||I["@@iterator"],typeof I=="function"?I:null)}var x={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},w=Object.assign,b={};function S(I,M,We){this.props=I,this.context=M,this.refs=b,this.updater=We||x}S.prototype.isReactComponent={},S.prototype.setState=function(I,M){if(typeof I!="object"&&typeof I!="function"&&I!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,I,M,"setState")},S.prototype.forceUpdate=function(I){this.updater.enqueueForceUpdate(this,I,"forceUpdate")};function _(){}_.prototype=S.prototype;function E(I,M,We){this.props=I,this.context=M,this.refs=b,this.updater=We||x}var C=E.prototype=new _;C.constructor=E,w(C,S.prototype),C.isPureReactComponent=!0;var O=Array.isArray,T=Object.prototype.hasOwnProperty,P={current:null},F={key:!0,ref:!0,__self:!0,__source:!0};function H(I,M,We){var te,ve={},he=null,ye=null;if(M!=null)for(te in M.ref!==void 0&&(ye=M.ref),M.key!==void 0&&(he=""+M.key),M)T.call(M,te)&&!F.hasOwnProperty(te)&&(ve[te]=M[te]);var le=arguments.length-2;if(le===1)ve.children=We;else if(1<le){for(var W=Array(le),Re=0;Re<le;Re++)W[Re]=arguments[Re+2];ve.children=W}if(I&&I.defaultProps)for(te in le=I.defaultProps,le)ve[te]===void 0&&(ve[te]=le[te]);return{$$typeof:e,type:I,key:he,ref:ye,props:ve,_owner:P.current}}function L(I,M){return{$$typeof:e,type:I.type,key:M,ref:I.ref,props:I.props,_owner:I._owner}}function q(I){return typeof I=="object"&&I!==null&&I.$$typeof===e}function z(I){var M={"=":"=0",":":"=2"};return"$"+I.replace(/[=:]/g,function(We){return M[We]})}var U=/\/+/g;function ne(I,M){return typeof I=="object"&&I!==null&&I.key!=null?z(""+I.key):M.toString(36)}function ie(I,M,We,te,ve){var he=typeof I;(he==="undefined"||he==="boolean")&&(I=null);var ye=!1;if(I===null)ye=!0;else switch(he){case"string":case"number":ye=!0;break;case"object":switch(I.$$typeof){case e:case t:ye=!0}}if(ye)return ye=I,ve=ve(ye),I=te===""?"."+ne(ye,0):te,O(ve)?(We="",I!=null&&(We=I.replace(U,"$&/")+"/"),ie(ve,M,We,"",function(Re){return Re})):ve!=null&&(q(ve)&&(ve=L(ve,We+(!ve.key||ye&&ye.key===ve.key?"":(""+ve.key).replace(U,"$&/")+"/")+I)),M.push(ve)),1;if(ye=0,te=te===""?".":te+":",O(I))for(var le=0;le<I.length;le++){he=I[le];var W=te+ne(he,le);ye+=ie(he,M,We,W,ve)}else if(W=y(I),typeof W=="function")for(I=W.call(I),le=0;!(he=I.next()).done;)he=he.value,W=te+ne(he,le++),ye+=ie(he,M,We,W,ve);else if(he==="object")throw M=String(I),Error("Objects are not valid as a React child (found: "+(M==="[object Object]"?"object with keys {"+Object.keys(I).join(", ")+"}":M)+"). If you meant to render a collection of children, use an array instead.");return ye}function oe(I,M,We){if(I==null)return I;var te=[],ve=0;return ie(I,te,"","",function(he){return M.call(We,he,ve++)}),te}function V(I){if(I._status===-1){var M=I._result;M=M(),M.then(function(We){(I._status===0||I._status===-1)&&(I._status=1,I._result=We)},function(We){(I._status===0||I._status===-1)&&(I._status=2,I._result=We)}),I._status===-1&&(I._status=0,I._result=M)}if(I._status===1)return I._result.default;throw I._result}var Z={current:null},ee={transition:null},re={ReactCurrentDispatcher:Z,ReactCurrentBatchConfig:ee,ReactCurrentOwner:P};function me(){throw Error("act(...) is not supported in production builds of React.")}return $t.Children={map:oe,forEach:function(I,M,We){oe(I,function(){M.apply(this,arguments)},We)},count:function(I){var M=0;return oe(I,function(){M++}),M},toArray:function(I){return oe(I,function(M){return M})||[]},only:function(I){if(!q(I))throw Error("React.Children.only expected to receive a single React element child.");return I}},$t.Component=S,$t.Fragment=r,$t.Profiler=s,$t.PureComponent=E,$t.StrictMode=n,$t.Suspense=d,$t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=re,$t.act=me,$t.cloneElement=function(I,M,We){if(I==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+I+".");var te=w({},I.props),ve=I.key,he=I.ref,ye=I._owner;if(M!=null){if(M.ref!==void 0&&(he=M.ref,ye=P.current),M.key!==void 0&&(ve=""+M.key),I.type&&I.type.defaultProps)var le=I.type.defaultProps;for(W in M)T.call(M,W)&&!F.hasOwnProperty(W)&&(te[W]=M[W]===void 0&&le!==void 0?le[W]:M[W])}var W=arguments.length-2;if(W===1)te.children=We;else if(1<W){le=Array(W);for(var Re=0;Re<W;Re++)le[Re]=arguments[Re+2];te.children=le}return{$$typeof:e,type:I.type,key:ve,ref:he,props:te,_owner:ye}},$t.createContext=function(I){return I={$$typeof:l,_currentValue:I,_currentValue2:I,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},I.Provider={$$typeof:i,_context:I},I.Consumer=I},$t.createElement=H,$t.createFactory=function(I){var M=H.bind(null,I);return M.type=I,M},$t.createRef=function(){return{current:null}},$t.forwardRef=function(I){return{$$typeof:u,render:I}},$t.isValidElement=q,$t.lazy=function(I){return{$$typeof:f,_payload:{_status:-1,_result:I},_init:V}},$t.memo=function(I,M){return{$$typeof:m,type:I,compare:M===void 0?null:M}},$t.startTransition=function(I){var M=ee.transition;ee.transition={};try{I()}finally{ee.transition=M}},$t.unstable_act=me,$t.useCallback=function(I,M){return Z.current.useCallback(I,M)},$t.useContext=function(I){return Z.current.useContext(I)},$t.useDebugValue=function(){},$t.useDeferredValue=function(I){return Z.current.useDeferredValue(I)},$t.useEffect=function(I,M){return Z.current.useEffect(I,M)},$t.useId=function(){return Z.current.useId()},$t.useImperativeHandle=function(I,M,We){return Z.current.useImperativeHandle(I,M,We)},$t.useInsertionEffect=function(I,M){return Z.current.useInsertionEffect(I,M)},$t.useLayoutEffect=function(I,M){return Z.current.useLayoutEffect(I,M)},$t.useMemo=function(I,M){return Z.current.useMemo(I,M)},$t.useReducer=function(I,M,We){return Z.current.useReducer(I,M,We)},$t.useRef=function(I){return Z.current.useRef(I)},$t.useState=function(I){return Z.current.useState(I)},$t.useSyncExternalStore=function(I,M,We){return Z.current.useSyncExternalStore(I,M,We)},$t.useTransition=function(){return Z.current.useTransition()},$t.version="18.3.1",$t}var aj;function Pc(){return aj||(aj=1,Cg.exports=Z4()),Cg.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var oj;function eD(){if(oj)return wu;oj=1;var e=Pc(),t=Symbol.for("react.element"),r=Symbol.for("react.fragment"),n=Object.prototype.hasOwnProperty,s=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,i={key:!0,ref:!0,__self:!0,__source:!0};function l(u,d,m){var f,p={},y=null,x=null;m!==void 0&&(y=""+m),d.key!==void 0&&(y=""+d.key),d.ref!==void 0&&(x=d.ref);for(f in d)n.call(d,f)&&!i.hasOwnProperty(f)&&(p[f]=d[f]);if(u&&u.defaultProps)for(f in d=u.defaultProps,d)p[f]===void 0&&(p[f]=d[f]);return{$$typeof:t,type:u,key:y,ref:x,props:p,_owner:s.current}}return wu.Fragment=r,wu.jsx=l,wu.jsxs=l,wu}var lj;function tD(){return lj||(lj=1,Ng.exports=eD()),Ng.exports}var a=tD(),v=Pc();const jt=Ui(v),rD=X4({__proto__:null,default:jt},[v]);var Cf={},Eg={exports:{}},Cs={},Ag={exports:{}},Pg={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var cj;function nD(){return cj||(cj=1,(function(e){function t(ee,re){var me=ee.length;ee.push(re);e:for(;0<me;){var I=me-1>>>1,M=ee[I];if(0<s(M,re))ee[I]=re,ee[me]=M,me=I;else break e}}function r(ee){return ee.length===0?null:ee[0]}function n(ee){if(ee.length===0)return null;var re=ee[0],me=ee.pop();if(me!==re){ee[0]=me;e:for(var I=0,M=ee.length,We=M>>>1;I<We;){var te=2*(I+1)-1,ve=ee[te],he=te+1,ye=ee[he];if(0>s(ve,me))he<M&&0>s(ye,ve)?(ee[I]=ye,ee[he]=me,I=he):(ee[I]=ve,ee[te]=me,I=te);else if(he<M&&0>s(ye,me))ee[I]=ye,ee[he]=me,I=he;else break e}}return re}function s(ee,re){var me=ee.sortIndex-re.sortIndex;return me!==0?me:ee.id-re.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;e.unstable_now=function(){return i.now()}}else{var l=Date,u=l.now();e.unstable_now=function(){return l.now()-u}}var d=[],m=[],f=1,p=null,y=3,x=!1,w=!1,b=!1,S=typeof setTimeout=="function"?setTimeout:null,_=typeof clearTimeout=="function"?clearTimeout:null,E=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function C(ee){for(var re=r(m);re!==null;){if(re.callback===null)n(m);else if(re.startTime<=ee)n(m),re.sortIndex=re.expirationTime,t(d,re);else break;re=r(m)}}function O(ee){if(b=!1,C(ee),!w)if(r(d)!==null)w=!0,V(T);else{var re=r(m);re!==null&&Z(O,re.startTime-ee)}}function T(ee,re){w=!1,b&&(b=!1,_(H),H=-1),x=!0;var me=y;try{for(C(re),p=r(d);p!==null&&(!(p.expirationTime>re)||ee&&!z());){var I=p.callback;if(typeof I=="function"){p.callback=null,y=p.priorityLevel;var M=I(p.expirationTime<=re);re=e.unstable_now(),typeof M=="function"?p.callback=M:p===r(d)&&n(d),C(re)}else n(d);p=r(d)}if(p!==null)var We=!0;else{var te=r(m);te!==null&&Z(O,te.startTime-re),We=!1}return We}finally{p=null,y=me,x=!1}}var P=!1,F=null,H=-1,L=5,q=-1;function z(){return!(e.unstable_now()-q<L)}function U(){if(F!==null){var ee=e.unstable_now();q=ee;var re=!0;try{re=F(!0,ee)}finally{re?ne():(P=!1,F=null)}}else P=!1}var ne;if(typeof E=="function")ne=function(){E(U)};else if(typeof MessageChannel<"u"){var ie=new MessageChannel,oe=ie.port2;ie.port1.onmessage=U,ne=function(){oe.postMessage(null)}}else ne=function(){S(U,0)};function V(ee){F=ee,P||(P=!0,ne())}function Z(ee,re){H=S(function(){ee(e.unstable_now())},re)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(ee){ee.callback=null},e.unstable_continueExecution=function(){w||x||(w=!0,V(T))},e.unstable_forceFrameRate=function(ee){0>ee||125<ee?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):L=0<ee?Math.floor(1e3/ee):5},e.unstable_getCurrentPriorityLevel=function(){return y},e.unstable_getFirstCallbackNode=function(){return r(d)},e.unstable_next=function(ee){switch(y){case 1:case 2:case 3:var re=3;break;default:re=y}var me=y;y=re;try{return ee()}finally{y=me}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(ee,re){switch(ee){case 1:case 2:case 3:case 4:case 5:break;default:ee=3}var me=y;y=ee;try{return re()}finally{y=me}},e.unstable_scheduleCallback=function(ee,re,me){var I=e.unstable_now();switch(typeof me=="object"&&me!==null?(me=me.delay,me=typeof me=="number"&&0<me?I+me:I):me=I,ee){case 1:var M=-1;break;case 2:M=250;break;case 5:M=1073741823;break;case 4:M=1e4;break;default:M=5e3}return M=me+M,ee={id:f++,callback:re,priorityLevel:ee,startTime:me,expirationTime:M,sortIndex:-1},me>I?(ee.sortIndex=me,t(m,ee),r(d)===null&&ee===r(m)&&(b?(_(H),H=-1):b=!0,Z(O,me-I))):(ee.sortIndex=M,t(d,ee),w||x||(w=!0,V(T))),ee},e.unstable_shouldYield=z,e.unstable_wrapCallback=function(ee){var re=y;return function(){var me=y;y=re;try{return ee.apply(this,arguments)}finally{y=me}}}})(Pg)),Pg}var uj;function sD(){return uj||(uj=1,Ag.exports=nD()),Ag.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var dj;function iD(){if(dj)return Cs;dj=1;var e=Pc(),t=sD();function r(o){for(var c="https://reactjs.org/docs/error-decoder.html?invariant="+o,h=1;h<arguments.length;h++)c+="&args[]="+encodeURIComponent(arguments[h]);return"Minified React error #"+o+"; visit "+c+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var n=new Set,s={};function i(o,c){l(o,c),l(o+"Capture",c)}function l(o,c){for(s[o]=c,o=0;o<c.length;o++)n.add(c[o])}var u=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),d=Object.prototype.hasOwnProperty,m=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,f={},p={};function y(o){return d.call(p,o)?!0:d.call(f,o)?!1:m.test(o)?p[o]=!0:(f[o]=!0,!1)}function x(o,c,h,g){if(h!==null&&h.type===0)return!1;switch(typeof c){case"function":case"symbol":return!0;case"boolean":return g?!1:h!==null?!h.acceptsBooleans:(o=o.toLowerCase().slice(0,5),o!=="data-"&&o!=="aria-");default:return!1}}function w(o,c,h,g){if(c===null||typeof c>"u"||x(o,c,h,g))return!0;if(g)return!1;if(h!==null)switch(h.type){case 3:return!c;case 4:return c===!1;case 5:return isNaN(c);case 6:return isNaN(c)||1>c}return!1}function b(o,c,h,g,j,k,A){this.acceptsBooleans=c===2||c===3||c===4,this.attributeName=g,this.attributeNamespace=j,this.mustUseProperty=h,this.propertyName=o,this.type=c,this.sanitizeURL=k,this.removeEmptyString=A}var S={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(o){S[o]=new b(o,0,!1,o,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(o){var c=o[0];S[c]=new b(c,1,!1,o[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(o){S[o]=new b(o,2,!1,o.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(o){S[o]=new b(o,2,!1,o,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(o){S[o]=new b(o,3,!1,o.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(o){S[o]=new b(o,3,!0,o,null,!1,!1)}),["capture","download"].forEach(function(o){S[o]=new b(o,4,!1,o,null,!1,!1)}),["cols","rows","size","span"].forEach(function(o){S[o]=new b(o,6,!1,o,null,!1,!1)}),["rowSpan","start"].forEach(function(o){S[o]=new b(o,5,!1,o.toLowerCase(),null,!1,!1)});var _=/[\-:]([a-z])/g;function E(o){return o[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(o){var c=o.replace(_,E);S[c]=new b(c,1,!1,o,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(o){var c=o.replace(_,E);S[c]=new b(c,1,!1,o,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(o){var c=o.replace(_,E);S[c]=new b(c,1,!1,o,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(o){S[o]=new b(o,1,!1,o.toLowerCase(),null,!1,!1)}),S.xlinkHref=new b("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(o){S[o]=new b(o,1,!1,o.toLowerCase(),null,!0,!0)});function C(o,c,h,g){var j=S.hasOwnProperty(c)?S[c]:null;(j!==null?j.type!==0:g||!(2<c.length)||c[0]!=="o"&&c[0]!=="O"||c[1]!=="n"&&c[1]!=="N")&&(w(c,h,j,g)&&(h=null),g||j===null?y(c)&&(h===null?o.removeAttribute(c):o.setAttribute(c,""+h)):j.mustUseProperty?o[j.propertyName]=h===null?j.type===3?!1:"":h:(c=j.attributeName,g=j.attributeNamespace,h===null?o.removeAttribute(c):(j=j.type,h=j===3||j===4&&h===!0?"":""+h,g?o.setAttributeNS(g,c,h):o.setAttribute(c,h))))}var O=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,T=Symbol.for("react.element"),P=Symbol.for("react.portal"),F=Symbol.for("react.fragment"),H=Symbol.for("react.strict_mode"),L=Symbol.for("react.profiler"),q=Symbol.for("react.provider"),z=Symbol.for("react.context"),U=Symbol.for("react.forward_ref"),ne=Symbol.for("react.suspense"),ie=Symbol.for("react.suspense_list"),oe=Symbol.for("react.memo"),V=Symbol.for("react.lazy"),Z=Symbol.for("react.offscreen"),ee=Symbol.iterator;function re(o){return o===null||typeof o!="object"?null:(o=ee&&o[ee]||o["@@iterator"],typeof o=="function"?o:null)}var me=Object.assign,I;function M(o){if(I===void 0)try{throw Error()}catch(h){var c=h.stack.trim().match(/\n( *(at )?)/);I=c&&c[1]||""}return`
`+I+o}var We=!1;function te(o,c){if(!o||We)return"";We=!0;var h=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(c)if(c=function(){throw Error()},Object.defineProperty(c.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(c,[])}catch(fe){var g=fe}Reflect.construct(o,[],c)}else{try{c.call()}catch(fe){g=fe}o.call(c.prototype)}else{try{throw Error()}catch(fe){g=fe}o()}}catch(fe){if(fe&&g&&typeof fe.stack=="string"){for(var j=fe.stack.split(`
`),k=g.stack.split(`
`),A=j.length-1,$=k.length-1;1<=A&&0<=$&&j[A]!==k[$];)$--;for(;1<=A&&0<=$;A--,$--)if(j[A]!==k[$]){if(A!==1||$!==1)do if(A--,$--,0>$||j[A]!==k[$]){var B=`
`+j[A].replace(" at new "," at ");return o.displayName&&B.includes("<anonymous>")&&(B=B.replace("<anonymous>",o.displayName)),B}while(1<=A&&0<=$);break}}}finally{We=!1,Error.prepareStackTrace=h}return(o=o?o.displayName||o.name:"")?M(o):""}function ve(o){switch(o.tag){case 5:return M(o.type);case 16:return M("Lazy");case 13:return M("Suspense");case 19:return M("SuspenseList");case 0:case 2:case 15:return o=te(o.type,!1),o;case 11:return o=te(o.type.render,!1),o;case 1:return o=te(o.type,!0),o;default:return""}}function he(o){if(o==null)return null;if(typeof o=="function")return o.displayName||o.name||null;if(typeof o=="string")return o;switch(o){case F:return"Fragment";case P:return"Portal";case L:return"Profiler";case H:return"StrictMode";case ne:return"Suspense";case ie:return"SuspenseList"}if(typeof o=="object")switch(o.$$typeof){case z:return(o.displayName||"Context")+".Consumer";case q:return(o._context.displayName||"Context")+".Provider";case U:var c=o.render;return o=o.displayName,o||(o=c.displayName||c.name||"",o=o!==""?"ForwardRef("+o+")":"ForwardRef"),o;case oe:return c=o.displayName||null,c!==null?c:he(o.type)||"Memo";case V:c=o._payload,o=o._init;try{return he(o(c))}catch{}}return null}function ye(o){var c=o.type;switch(o.tag){case 24:return"Cache";case 9:return(c.displayName||"Context")+".Consumer";case 10:return(c._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return o=c.render,o=o.displayName||o.name||"",c.displayName||(o!==""?"ForwardRef("+o+")":"ForwardRef");case 7:return"Fragment";case 5:return c;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return he(c);case 8:return c===H?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof c=="function")return c.displayName||c.name||null;if(typeof c=="string")return c}return null}function le(o){switch(typeof o){case"boolean":case"number":case"string":case"undefined":return o;case"object":return o;default:return""}}function W(o){var c=o.type;return(o=o.nodeName)&&o.toLowerCase()==="input"&&(c==="checkbox"||c==="radio")}function Re(o){var c=W(o)?"checked":"value",h=Object.getOwnPropertyDescriptor(o.constructor.prototype,c),g=""+o[c];if(!o.hasOwnProperty(c)&&typeof h<"u"&&typeof h.get=="function"&&typeof h.set=="function"){var j=h.get,k=h.set;return Object.defineProperty(o,c,{configurable:!0,get:function(){return j.call(this)},set:function(A){g=""+A,k.call(this,A)}}),Object.defineProperty(o,c,{enumerable:h.enumerable}),{getValue:function(){return g},setValue:function(A){g=""+A},stopTracking:function(){o._valueTracker=null,delete o[c]}}}}function Ge(o){o._valueTracker||(o._valueTracker=Re(o))}function G(o){if(!o)return!1;var c=o._valueTracker;if(!c)return!0;var h=c.getValue(),g="";return o&&(g=W(o)?o.checked?"true":"false":o.value),o=g,o!==h?(c.setValue(o),!0):!1}function He(o){if(o=o||(typeof document<"u"?document:void 0),typeof o>"u")return null;try{return o.activeElement||o.body}catch{return o.body}}function Je(o,c){var h=c.checked;return me({},c,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:h??o._wrapperState.initialChecked})}function gt(o,c){var h=c.defaultValue==null?"":c.defaultValue,g=c.checked!=null?c.checked:c.defaultChecked;h=le(c.value!=null?c.value:h),o._wrapperState={initialChecked:g,initialValue:h,controlled:c.type==="checkbox"||c.type==="radio"?c.checked!=null:c.value!=null}}function _t(o,c){c=c.checked,c!=null&&C(o,"checked",c,!1)}function Mt(o,c){_t(o,c);var h=le(c.value),g=c.type;if(h!=null)g==="number"?(h===0&&o.value===""||o.value!=h)&&(o.value=""+h):o.value!==""+h&&(o.value=""+h);else if(g==="submit"||g==="reset"){o.removeAttribute("value");return}c.hasOwnProperty("value")?Qt(o,c.type,h):c.hasOwnProperty("defaultValue")&&Qt(o,c.type,le(c.defaultValue)),c.checked==null&&c.defaultChecked!=null&&(o.defaultChecked=!!c.defaultChecked)}function Dt(o,c,h){if(c.hasOwnProperty("value")||c.hasOwnProperty("defaultValue")){var g=c.type;if(!(g!=="submit"&&g!=="reset"||c.value!==void 0&&c.value!==null))return;c=""+o._wrapperState.initialValue,h||c===o.value||(o.value=c),o.defaultValue=c}h=o.name,h!==""&&(o.name=""),o.defaultChecked=!!o._wrapperState.initialChecked,h!==""&&(o.name=h)}function Qt(o,c,h){(c!=="number"||He(o.ownerDocument)!==o)&&(h==null?o.defaultValue=""+o._wrapperState.initialValue:o.defaultValue!==""+h&&(o.defaultValue=""+h))}var R=Array.isArray;function Y(o,c,h,g){if(o=o.options,c){c={};for(var j=0;j<h.length;j++)c["$"+h[j]]=!0;for(h=0;h<o.length;h++)j=c.hasOwnProperty("$"+o[h].value),o[h].selected!==j&&(o[h].selected=j),j&&g&&(o[h].defaultSelected=!0)}else{for(h=""+le(h),c=null,j=0;j<o.length;j++){if(o[j].value===h){o[j].selected=!0,g&&(o[j].defaultSelected=!0);return}c!==null||o[j].disabled||(c=o[j])}c!==null&&(c.selected=!0)}}function ce(o,c){if(c.dangerouslySetInnerHTML!=null)throw Error(r(91));return me({},c,{value:void 0,defaultValue:void 0,children:""+o._wrapperState.initialValue})}function je(o,c){var h=c.value;if(h==null){if(h=c.children,c=c.defaultValue,h!=null){if(c!=null)throw Error(r(92));if(R(h)){if(1<h.length)throw Error(r(93));h=h[0]}c=h}c==null&&(c=""),h=c}o._wrapperState={initialValue:le(h)}}function pe(o,c){var h=le(c.value),g=le(c.defaultValue);h!=null&&(h=""+h,h!==o.value&&(o.value=h),c.defaultValue==null&&o.defaultValue!==h&&(o.defaultValue=h)),g!=null&&(o.defaultValue=""+g)}function Se(o){var c=o.textContent;c===o._wrapperState.initialValue&&c!==""&&c!==null&&(o.value=c)}function qe(o){switch(o){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function xt(o,c){return o==null||o==="http://www.w3.org/1999/xhtml"?qe(c):o==="http://www.w3.org/2000/svg"&&c==="foreignObject"?"http://www.w3.org/1999/xhtml":o}var bt,Ft=(function(o){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(c,h,g,j){MSApp.execUnsafeLocalFunction(function(){return o(c,h,g,j)})}:o})(function(o,c){if(o.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in o)o.innerHTML=c;else{for(bt=bt||document.createElement("div"),bt.innerHTML="<svg>"+c.valueOf().toString()+"</svg>",c=bt.firstChild;o.firstChild;)o.removeChild(o.firstChild);for(;c.firstChild;)o.appendChild(c.firstChild)}});function hr(o,c){if(c){var h=o.firstChild;if(h&&h===o.lastChild&&h.nodeType===3){h.nodeValue=c;return}}o.textContent=c}var Ht={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Ir=["Webkit","ms","Moz","O"];Object.keys(Ht).forEach(function(o){Ir.forEach(function(c){c=c+o.charAt(0).toUpperCase()+o.substring(1),Ht[c]=Ht[o]})});function Dr(o,c,h){return c==null||typeof c=="boolean"||c===""?"":h||typeof c!="number"||c===0||Ht.hasOwnProperty(o)&&Ht[o]?(""+c).trim():c+"px"}function zt(o,c){o=o.style;for(var h in c)if(c.hasOwnProperty(h)){var g=h.indexOf("--")===0,j=Dr(h,c[h],g);h==="float"&&(h="cssFloat"),g?o.setProperty(h,j):o[h]=j}}var nn=me({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ar(o,c){if(c){if(nn[o]&&(c.children!=null||c.dangerouslySetInnerHTML!=null))throw Error(r(137,o));if(c.dangerouslySetInnerHTML!=null){if(c.children!=null)throw Error(r(60));if(typeof c.dangerouslySetInnerHTML!="object"||!("__html"in c.dangerouslySetInnerHTML))throw Error(r(61))}if(c.style!=null&&typeof c.style!="object")throw Error(r(62))}}function Ur(o,c){if(o.indexOf("-")===-1)return typeof c.is=="string";switch(o){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var st=null;function Wt(o){return o=o.target||o.srcElement||window,o.correspondingUseElement&&(o=o.correspondingUseElement),o.nodeType===3?o.parentNode:o}var Ut=null,Kt=null,mr=null;function Rr(o){if(o=iu(o)){if(typeof Ut!="function")throw Error(r(280));var c=o.stateNode;c&&(c=Ud(c),Ut(o.stateNode,o.type,c))}}function ws(o){Kt?mr?mr.push(o):mr=[o]:Kt=o}function sn(){if(Kt){var o=Kt,c=mr;if(mr=Kt=null,Rr(o),c)for(o=0;o<c.length;o++)Rr(c[o])}}function pr(o,c){return o(c)}function Zn(){}var an=!1;function xr(o,c,h){if(an)return o(c,h);an=!0;try{return pr(o,c,h)}finally{an=!1,(Kt!==null||mr!==null)&&(Zn(),sn())}}function ir(o,c){var h=o.stateNode;if(h===null)return null;var g=Ud(h);if(g===null)return null;h=g[c];e:switch(c){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(g=!g.disabled)||(o=o.type,g=!(o==="button"||o==="input"||o==="select"||o==="textarea")),o=!g;break e;default:o=!1}if(o)return null;if(h&&typeof h!="function")throw Error(r(231,c,typeof h));return h}var es=!1;if(u)try{var Gt={};Object.defineProperty(Gt,"passive",{get:function(){es=!0}}),window.addEventListener("test",Gt,Gt),window.removeEventListener("test",Gt,Gt)}catch{es=!1}function Br(o,c,h,g,j,k,A,$,B){var fe=Array.prototype.slice.call(arguments,3);try{c.apply(h,fe)}catch(Ie){this.onError(Ie)}}var gr=!1,Wr=null,wr=!1,Vn=null,yn={onError:function(o){gr=!0,Wr=o}};function _r(o,c,h,g,j,k,A,$,B){gr=!1,Wr=null,Br.apply(yn,arguments)}function $s(o,c,h,g,j,k,A,$,B){if(_r.apply(this,arguments),gr){if(gr){var fe=Wr;gr=!1,Wr=null}else throw Error(r(198));wr||(wr=!0,Vn=fe)}}function on(o){var c=o,h=o;if(o.alternate)for(;c.return;)c=c.return;else{o=c;do c=o,(c.flags&4098)!==0&&(h=c.return),o=c.return;while(o)}return c.tag===3?h:null}function or(o){if(o.tag===13){var c=o.memoizedState;if(c===null&&(o=o.alternate,o!==null&&(c=o.memoizedState)),c!==null)return c.dehydrated}return null}function Zt(o){if(on(o)!==o)throw Error(r(188))}function Et(o){var c=o.alternate;if(!c){if(c=on(o),c===null)throw Error(r(188));return c!==o?null:o}for(var h=o,g=c;;){var j=h.return;if(j===null)break;var k=j.alternate;if(k===null){if(g=j.return,g!==null){h=g;continue}break}if(j.child===k.child){for(k=j.child;k;){if(k===h)return Zt(j),o;if(k===g)return Zt(j),c;k=k.sibling}throw Error(r(188))}if(h.return!==g.return)h=j,g=k;else{for(var A=!1,$=j.child;$;){if($===h){A=!0,h=j,g=k;break}if($===g){A=!0,g=j,h=k;break}$=$.sibling}if(!A){for($=k.child;$;){if($===h){A=!0,h=k,g=j;break}if($===g){A=!0,g=k,h=j;break}$=$.sibling}if(!A)throw Error(r(189))}}if(h.alternate!==g)throw Error(r(190))}if(h.tag!==3)throw Error(r(188));return h.stateNode.current===h?o:c}function ln(o){return o=Et(o),o!==null?Vr(o):null}function Vr(o){if(o.tag===5||o.tag===6)return o;for(o=o.child;o!==null;){var c=Vr(o);if(c!==null)return c;o=o.sibling}return null}var ts=t.unstable_scheduleCallback,Pn=t.unstable_cancelCallback,us=t.unstable_shouldYield,bs=t.unstable_requestPaint,Vt=t.unstable_now,Q=t.unstable_getCurrentPriorityLevel,we=t.unstable_ImmediatePriority,$e=t.unstable_UserBlockingPriority,Oe=t.unstable_NormalPriority,Xe=t.unstable_LowPriority,Ve=t.unstable_IdlePriority,At=null,yt=null;function Lt(o){if(yt&&typeof yt.onCommitFiberRoot=="function")try{yt.onCommitFiberRoot(At,o,void 0,(o.current.flags&128)===128)}catch{}}var Le=Math.clz32?Math.clz32:yr,dr=Math.log,Nr=Math.LN2;function yr(o){return o>>>=0,o===0?32:31-(dr(o)/Nr|0)|0}var Nt=64,cn=4194304;function Ms(o){switch(o&-o){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return o&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return o}}function Fs(o,c){var h=o.pendingLanes;if(h===0)return 0;var g=0,j=o.suspendedLanes,k=o.pingedLanes,A=h&268435455;if(A!==0){var $=A&~j;$!==0?g=Ms($):(k&=A,k!==0&&(g=Ms(k)))}else A=h&~j,A!==0?g=Ms(A):k!==0&&(g=Ms(k));if(g===0)return 0;if(c!==0&&c!==g&&(c&j)===0&&(j=g&-g,k=c&-c,j>=k||j===16&&(k&4194240)!==0))return c;if((g&4)!==0&&(g|=h&16),c=o.entangledLanes,c!==0)for(o=o.entanglements,c&=g;0<c;)h=31-Le(c),j=1<<h,g|=o[h],c&=~j;return g}function Ls(o,c){switch(o){case 1:case 2:case 4:return c+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return c+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function ji(o,c){for(var h=o.suspendedLanes,g=o.pingedLanes,j=o.expirationTimes,k=o.pendingLanes;0<k;){var A=31-Le(k),$=1<<A,B=j[A];B===-1?(($&h)===0||($&g)!==0)&&(j[A]=Ls($,c)):B<=c&&(o.expiredLanes|=$),k&=~$}}function Vi(o){return o=o.pendingLanes&-1073741825,o!==0?o:o&1073741824?1073741824:0}function Si(){var o=Nt;return Nt<<=1,(Nt&4194240)===0&&(Nt=64),o}function qr(o){for(var c=[],h=0;31>h;h++)c.push(o);return c}function si(o,c,h){o.pendingLanes|=c,c!==536870912&&(o.suspendedLanes=0,o.pingedLanes=0),o=o.eventTimes,c=31-Le(c),o[c]=h}function X(o,c){var h=o.pendingLanes&~c;o.pendingLanes=c,o.suspendedLanes=0,o.pingedLanes=0,o.expiredLanes&=c,o.mutableReadLanes&=c,o.entangledLanes&=c,c=o.entanglements;var g=o.eventTimes;for(o=o.expirationTimes;0<h;){var j=31-Le(h),k=1<<j;c[j]=0,g[j]=-1,o[j]=-1,h&=~k}}function de(o,c){var h=o.entangledLanes|=c;for(o=o.entanglements;h;){var g=31-Le(h),j=1<<g;j&c|o[g]&c&&(o[g]|=c),h&=~j}}var ue=0;function Me(o){return o&=-o,1<o?4<o?(o&268435455)!==0?16:536870912:4:1}var Be,xe,be,ct,It,ft=!1,Ot=[],wt=null,ze=null,qt=null,Rt=new Map,D=new Map,_e=[],Ae="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Qe(o,c){switch(o){case"focusin":case"focusout":wt=null;break;case"dragenter":case"dragleave":ze=null;break;case"mouseover":case"mouseout":qt=null;break;case"pointerover":case"pointerout":Rt.delete(c.pointerId);break;case"gotpointercapture":case"lostpointercapture":D.delete(c.pointerId)}}function tt(o,c,h,g,j,k){return o===null||o.nativeEvent!==k?(o={blockedOn:c,domEventName:h,eventSystemFlags:g,nativeEvent:k,targetContainers:[j]},c!==null&&(c=iu(c),c!==null&&xe(c)),o):(o.eventSystemFlags|=g,c=o.targetContainers,j!==null&&c.indexOf(j)===-1&&c.push(j),o)}function Bt(o,c,h,g,j){switch(c){case"focusin":return wt=tt(wt,o,c,h,g,j),!0;case"dragenter":return ze=tt(ze,o,c,h,g,j),!0;case"mouseover":return qt=tt(qt,o,c,h,g,j),!0;case"pointerover":var k=j.pointerId;return Rt.set(k,tt(Rt.get(k)||null,o,c,h,g,j)),!0;case"gotpointercapture":return k=j.pointerId,D.set(k,tt(D.get(k)||null,o,c,h,g,j)),!0}return!1}function Yt(o){var c=Eo(o.target);if(c!==null){var h=on(c);if(h!==null){if(c=h.tag,c===13){if(c=or(h),c!==null){o.blockedOn=c,It(o.priority,function(){be(h)});return}}else if(c===3&&h.stateNode.current.memoizedState.isDehydrated){o.blockedOn=h.tag===3?h.stateNode.containerInfo:null;return}}}o.blockedOn=null}function Cr(o){if(o.blockedOn!==null)return!1;for(var c=o.targetContainers;0<c.length;){var h=N(o.domEventName,o.eventSystemFlags,c[0],o.nativeEvent);if(h===null){h=o.nativeEvent;var g=new h.constructor(h.type,h);st=g,h.target.dispatchEvent(g),st=null}else return c=iu(h),c!==null&&xe(c),o.blockedOn=h,!1;c.shift()}return!0}function On(o,c,h){Cr(o)&&h.delete(c)}function Jr(){ft=!1,wt!==null&&Cr(wt)&&(wt=null),ze!==null&&Cr(ze)&&(ze=null),qt!==null&&Cr(qt)&&(qt=null),Rt.forEach(On),D.forEach(On)}function lr(o,c){o.blockedOn===c&&(o.blockedOn=null,ft||(ft=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,Jr)))}function ds(o){function c(j){return lr(j,o)}if(0<Ot.length){lr(Ot[0],o);for(var h=1;h<Ot.length;h++){var g=Ot[h];g.blockedOn===o&&(g.blockedOn=null)}}for(wt!==null&&lr(wt,o),ze!==null&&lr(ze,o),qt!==null&&lr(qt,o),Rt.forEach(c),D.forEach(c),h=0;h<_e.length;h++)g=_e[h],g.blockedOn===o&&(g.blockedOn=null);for(;0<_e.length&&(h=_e[0],h.blockedOn===null);)Yt(h),h.blockedOn===null&&_e.shift()}var vn=O.ReactCurrentBatchConfig,No=!0;function Gc(o,c,h,g){var j=ue,k=vn.transition;vn.transition=null;try{ue=1,bl(o,c,h,g)}finally{ue=j,vn.transition=k}}function wl(o,c,h,g){var j=ue,k=vn.transition;vn.transition=null;try{ue=4,bl(o,c,h,g)}finally{ue=j,vn.transition=k}}function bl(o,c,h,g){if(No){var j=N(o,c,h,g);if(j===null)pp(o,c,g,Co,h),Qe(o,g);else if(Bt(j,o,c,h,g))g.stopPropagation();else if(Qe(o,g),c&4&&-1<Ae.indexOf(o)){for(;j!==null;){var k=iu(j);if(k!==null&&Be(k),k=N(o,c,h,g),k===null&&pp(o,c,g,Co,h),k===j)break;j=k}j!==null&&g.stopPropagation()}else pp(o,c,g,null,h)}}var Co=null;function N(o,c,h,g){if(Co=null,o=Wt(g),o=Eo(o),o!==null)if(c=on(o),c===null)o=null;else if(h=c.tag,h===13){if(o=or(c),o!==null)return o;o=null}else if(h===3){if(c.stateNode.current.memoizedState.isDehydrated)return c.tag===3?c.stateNode.containerInfo:null;o=null}else c!==o&&(o=null);return Co=o,null}function J(o){switch(o){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Q()){case we:return 1;case $e:return 4;case Oe:case Xe:return 16;case Ve:return 536870912;default:return 16}default:return 16}}var Ee=null,Pe=null,Ce=null;function Ue(){if(Ce)return Ce;var o,c=Pe,h=c.length,g,j="value"in Ee?Ee.value:Ee.textContent,k=j.length;for(o=0;o<h&&c[o]===j[o];o++);var A=h-o;for(g=1;g<=A&&c[h-g]===j[k-g];g++);return Ce=j.slice(o,1<g?1-g:void 0)}function ke(o){var c=o.keyCode;return"charCode"in o?(o=o.charCode,o===0&&c===13&&(o=13)):o=c,o===10&&(o=13),32<=o||o===13?o:0}function at(){return!0}function rt(){return!1}function er(o){function c(h,g,j,k,A){this._reactName=h,this._targetInst=j,this.type=g,this.nativeEvent=k,this.target=A,this.currentTarget=null;for(var $ in o)o.hasOwnProperty($)&&(h=o[$],this[$]=h?h(k):k[$]);return this.isDefaultPrevented=(k.defaultPrevented!=null?k.defaultPrevented:k.returnValue===!1)?at:rt,this.isPropagationStopped=rt,this}return me(c.prototype,{preventDefault:function(){this.defaultPrevented=!0;var h=this.nativeEvent;h&&(h.preventDefault?h.preventDefault():typeof h.returnValue!="unknown"&&(h.returnValue=!1),this.isDefaultPrevented=at)},stopPropagation:function(){var h=this.nativeEvent;h&&(h.stopPropagation?h.stopPropagation():typeof h.cancelBubble!="unknown"&&(h.cancelBubble=!0),this.isPropagationStopped=at)},persist:function(){},isPersistent:at}),c}var kt={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(o){return o.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Hr=er(kt),ki=me({},kt,{view:0,detail:0}),Td=er(ki),Id,Yc,jl,qi=me({},ki,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:sp,button:0,buttons:0,relatedTarget:function(o){return o.relatedTarget===void 0?o.fromElement===o.srcElement?o.toElement:o.fromElement:o.relatedTarget},movementX:function(o){return"movementX"in o?o.movementX:(o!==jl&&(jl&&o.type==="mousemove"?(Id=o.screenX-jl.screenX,Yc=o.screenY-jl.screenY):Yc=Id=0,jl=o),Id)},movementY:function(o){return"movementY"in o?o.movementY:Yc}}),qa=er(qi),SI=me({},qi,{dataTransfer:0}),kI=er(SI),_I=me({},ki,{relatedTarget:0}),np=er(_I),NI=me({},kt,{animationName:0,elapsedTime:0,pseudoElement:0}),CI=er(NI),EI=me({},kt,{clipboardData:function(o){return"clipboardData"in o?o.clipboardData:window.clipboardData}}),AI=er(EI),PI=me({},kt,{data:0}),Yw=er(PI),OI={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},TI={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},II={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function DI(o){var c=this.nativeEvent;return c.getModifierState?c.getModifierState(o):(o=II[o])?!!c[o]:!1}function sp(){return DI}var RI=me({},ki,{key:function(o){if(o.key){var c=OI[o.key]||o.key;if(c!=="Unidentified")return c}return o.type==="keypress"?(o=ke(o),o===13?"Enter":String.fromCharCode(o)):o.type==="keydown"||o.type==="keyup"?TI[o.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:sp,charCode:function(o){return o.type==="keypress"?ke(o):0},keyCode:function(o){return o.type==="keydown"||o.type==="keyup"?o.keyCode:0},which:function(o){return o.type==="keypress"?ke(o):o.type==="keydown"||o.type==="keyup"?o.keyCode:0}}),$I=er(RI),MI=me({},qi,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Jw=er(MI),FI=me({},ki,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:sp}),LI=er(FI),zI=me({},kt,{propertyName:0,elapsedTime:0,pseudoElement:0}),UI=er(zI),BI=me({},qi,{deltaX:function(o){return"deltaX"in o?o.deltaX:"wheelDeltaX"in o?-o.wheelDeltaX:0},deltaY:function(o){return"deltaY"in o?o.deltaY:"wheelDeltaY"in o?-o.wheelDeltaY:"wheelDelta"in o?-o.wheelDelta:0},deltaZ:0,deltaMode:0}),WI=er(BI),VI=[9,13,27,32],ip=u&&"CompositionEvent"in window,Jc=null;u&&"documentMode"in document&&(Jc=document.documentMode);var qI=u&&"TextEvent"in window&&!Jc,Xw=u&&(!ip||Jc&&8<Jc&&11>=Jc),Qw=" ",Zw=!1;function eb(o,c){switch(o){case"keyup":return VI.indexOf(c.keyCode)!==-1;case"keydown":return c.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function tb(o){return o=o.detail,typeof o=="object"&&"data"in o?o.data:null}var Sl=!1;function HI(o,c){switch(o){case"compositionend":return tb(c);case"keypress":return c.which!==32?null:(Zw=!0,Qw);case"textInput":return o=c.data,o===Qw&&Zw?null:o;default:return null}}function KI(o,c){if(Sl)return o==="compositionend"||!ip&&eb(o,c)?(o=Ue(),Ce=Pe=Ee=null,Sl=!1,o):null;switch(o){case"paste":return null;case"keypress":if(!(c.ctrlKey||c.altKey||c.metaKey)||c.ctrlKey&&c.altKey){if(c.char&&1<c.char.length)return c.char;if(c.which)return String.fromCharCode(c.which)}return null;case"compositionend":return Xw&&c.locale!=="ko"?null:c.data;default:return null}}var GI={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function rb(o){var c=o&&o.nodeName&&o.nodeName.toLowerCase();return c==="input"?!!GI[o.type]:c==="textarea"}function nb(o,c,h,g){ws(g),c=Fd(c,"onChange"),0<c.length&&(h=new Hr("onChange","change",null,h,g),o.push({event:h,listeners:c}))}var Xc=null,Qc=null;function YI(o){bb(o,0)}function Dd(o){var c=El(o);if(G(c))return o}function JI(o,c){if(o==="change")return c}var sb=!1;if(u){var ap;if(u){var op="oninput"in document;if(!op){var ib=document.createElement("div");ib.setAttribute("oninput","return;"),op=typeof ib.oninput=="function"}ap=op}else ap=!1;sb=ap&&(!document.documentMode||9<document.documentMode)}function ab(){Xc&&(Xc.detachEvent("onpropertychange",ob),Qc=Xc=null)}function ob(o){if(o.propertyName==="value"&&Dd(Qc)){var c=[];nb(c,Qc,o,Wt(o)),xr(YI,c)}}function XI(o,c,h){o==="focusin"?(ab(),Xc=c,Qc=h,Xc.attachEvent("onpropertychange",ob)):o==="focusout"&&ab()}function QI(o){if(o==="selectionchange"||o==="keyup"||o==="keydown")return Dd(Qc)}function ZI(o,c){if(o==="click")return Dd(c)}function e4(o,c){if(o==="input"||o==="change")return Dd(c)}function t4(o,c){return o===c&&(o!==0||1/o===1/c)||o!==o&&c!==c}var _i=typeof Object.is=="function"?Object.is:t4;function Zc(o,c){if(_i(o,c))return!0;if(typeof o!="object"||o===null||typeof c!="object"||c===null)return!1;var h=Object.keys(o),g=Object.keys(c);if(h.length!==g.length)return!1;for(g=0;g<h.length;g++){var j=h[g];if(!d.call(c,j)||!_i(o[j],c[j]))return!1}return!0}function lb(o){for(;o&&o.firstChild;)o=o.firstChild;return o}function cb(o,c){var h=lb(o);o=0;for(var g;h;){if(h.nodeType===3){if(g=o+h.textContent.length,o<=c&&g>=c)return{node:h,offset:c-o};o=g}e:{for(;h;){if(h.nextSibling){h=h.nextSibling;break e}h=h.parentNode}h=void 0}h=lb(h)}}function ub(o,c){return o&&c?o===c?!0:o&&o.nodeType===3?!1:c&&c.nodeType===3?ub(o,c.parentNode):"contains"in o?o.contains(c):o.compareDocumentPosition?!!(o.compareDocumentPosition(c)&16):!1:!1}function db(){for(var o=window,c=He();c instanceof o.HTMLIFrameElement;){try{var h=typeof c.contentWindow.location.href=="string"}catch{h=!1}if(h)o=c.contentWindow;else break;c=He(o.document)}return c}function lp(o){var c=o&&o.nodeName&&o.nodeName.toLowerCase();return c&&(c==="input"&&(o.type==="text"||o.type==="search"||o.type==="tel"||o.type==="url"||o.type==="password")||c==="textarea"||o.contentEditable==="true")}function r4(o){var c=db(),h=o.focusedElem,g=o.selectionRange;if(c!==h&&h&&h.ownerDocument&&ub(h.ownerDocument.documentElement,h)){if(g!==null&&lp(h)){if(c=g.start,o=g.end,o===void 0&&(o=c),"selectionStart"in h)h.selectionStart=c,h.selectionEnd=Math.min(o,h.value.length);else if(o=(c=h.ownerDocument||document)&&c.defaultView||window,o.getSelection){o=o.getSelection();var j=h.textContent.length,k=Math.min(g.start,j);g=g.end===void 0?k:Math.min(g.end,j),!o.extend&&k>g&&(j=g,g=k,k=j),j=cb(h,k);var A=cb(h,g);j&&A&&(o.rangeCount!==1||o.anchorNode!==j.node||o.anchorOffset!==j.offset||o.focusNode!==A.node||o.focusOffset!==A.offset)&&(c=c.createRange(),c.setStart(j.node,j.offset),o.removeAllRanges(),k>g?(o.addRange(c),o.extend(A.node,A.offset)):(c.setEnd(A.node,A.offset),o.addRange(c)))}}for(c=[],o=h;o=o.parentNode;)o.nodeType===1&&c.push({element:o,left:o.scrollLeft,top:o.scrollTop});for(typeof h.focus=="function"&&h.focus(),h=0;h<c.length;h++)o=c[h],o.element.scrollLeft=o.left,o.element.scrollTop=o.top}}var n4=u&&"documentMode"in document&&11>=document.documentMode,kl=null,cp=null,eu=null,up=!1;function fb(o,c,h){var g=h.window===h?h.document:h.nodeType===9?h:h.ownerDocument;up||kl==null||kl!==He(g)||(g=kl,"selectionStart"in g&&lp(g)?g={start:g.selectionStart,end:g.selectionEnd}:(g=(g.ownerDocument&&g.ownerDocument.defaultView||window).getSelection(),g={anchorNode:g.anchorNode,anchorOffset:g.anchorOffset,focusNode:g.focusNode,focusOffset:g.focusOffset}),eu&&Zc(eu,g)||(eu=g,g=Fd(cp,"onSelect"),0<g.length&&(c=new Hr("onSelect","select",null,c,h),o.push({event:c,listeners:g}),c.target=kl)))}function Rd(o,c){var h={};return h[o.toLowerCase()]=c.toLowerCase(),h["Webkit"+o]="webkit"+c,h["Moz"+o]="moz"+c,h}var _l={animationend:Rd("Animation","AnimationEnd"),animationiteration:Rd("Animation","AnimationIteration"),animationstart:Rd("Animation","AnimationStart"),transitionend:Rd("Transition","TransitionEnd")},dp={},hb={};u&&(hb=document.createElement("div").style,"AnimationEvent"in window||(delete _l.animationend.animation,delete _l.animationiteration.animation,delete _l.animationstart.animation),"TransitionEvent"in window||delete _l.transitionend.transition);function $d(o){if(dp[o])return dp[o];if(!_l[o])return o;var c=_l[o],h;for(h in c)if(c.hasOwnProperty(h)&&h in hb)return dp[o]=c[h];return o}var mb=$d("animationend"),pb=$d("animationiteration"),gb=$d("animationstart"),yb=$d("transitionend"),vb=new Map,xb="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ha(o,c){vb.set(o,c),i(c,[o])}for(var fp=0;fp<xb.length;fp++){var hp=xb[fp],s4=hp.toLowerCase(),i4=hp[0].toUpperCase()+hp.slice(1);Ha(s4,"on"+i4)}Ha(mb,"onAnimationEnd"),Ha(pb,"onAnimationIteration"),Ha(gb,"onAnimationStart"),Ha("dblclick","onDoubleClick"),Ha("focusin","onFocus"),Ha("focusout","onBlur"),Ha(yb,"onTransitionEnd"),l("onMouseEnter",["mouseout","mouseover"]),l("onMouseLeave",["mouseout","mouseover"]),l("onPointerEnter",["pointerout","pointerover"]),l("onPointerLeave",["pointerout","pointerover"]),i("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),i("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),i("onBeforeInput",["compositionend","keypress","textInput","paste"]),i("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),i("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),i("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var tu="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),a4=new Set("cancel close invalid load scroll toggle".split(" ").concat(tu));function wb(o,c,h){var g=o.type||"unknown-event";o.currentTarget=h,$s(g,c,void 0,o),o.currentTarget=null}function bb(o,c){c=(c&4)!==0;for(var h=0;h<o.length;h++){var g=o[h],j=g.event;g=g.listeners;e:{var k=void 0;if(c)for(var A=g.length-1;0<=A;A--){var $=g[A],B=$.instance,fe=$.currentTarget;if($=$.listener,B!==k&&j.isPropagationStopped())break e;wb(j,$,fe),k=B}else for(A=0;A<g.length;A++){if($=g[A],B=$.instance,fe=$.currentTarget,$=$.listener,B!==k&&j.isPropagationStopped())break e;wb(j,$,fe),k=B}}}if(wr)throw o=Vn,wr=!1,Vn=null,o}function Er(o,c){var h=c[bp];h===void 0&&(h=c[bp]=new Set);var g=o+"__bubble";h.has(g)||(jb(c,o,2,!1),h.add(g))}function mp(o,c,h){var g=0;c&&(g|=4),jb(h,o,g,c)}var Md="_reactListening"+Math.random().toString(36).slice(2);function ru(o){if(!o[Md]){o[Md]=!0,n.forEach(function(h){h!=="selectionchange"&&(a4.has(h)||mp(h,!1,o),mp(h,!0,o))});var c=o.nodeType===9?o:o.ownerDocument;c===null||c[Md]||(c[Md]=!0,mp("selectionchange",!1,c))}}function jb(o,c,h,g){switch(J(c)){case 1:var j=Gc;break;case 4:j=wl;break;default:j=bl}h=j.bind(null,c,h,o),j=void 0,!es||c!=="touchstart"&&c!=="touchmove"&&c!=="wheel"||(j=!0),g?j!==void 0?o.addEventListener(c,h,{capture:!0,passive:j}):o.addEventListener(c,h,!0):j!==void 0?o.addEventListener(c,h,{passive:j}):o.addEventListener(c,h,!1)}function pp(o,c,h,g,j){var k=g;if((c&1)===0&&(c&2)===0&&g!==null)e:for(;;){if(g===null)return;var A=g.tag;if(A===3||A===4){var $=g.stateNode.containerInfo;if($===j||$.nodeType===8&&$.parentNode===j)break;if(A===4)for(A=g.return;A!==null;){var B=A.tag;if((B===3||B===4)&&(B=A.stateNode.containerInfo,B===j||B.nodeType===8&&B.parentNode===j))return;A=A.return}for(;$!==null;){if(A=Eo($),A===null)return;if(B=A.tag,B===5||B===6){g=k=A;continue e}$=$.parentNode}}g=g.return}xr(function(){var fe=k,Ie=Wt(h),De=[];e:{var Te=vb.get(o);if(Te!==void 0){var Ye=Hr,nt=o;switch(o){case"keypress":if(ke(h)===0)break e;case"keydown":case"keyup":Ye=$I;break;case"focusin":nt="focus",Ye=np;break;case"focusout":nt="blur",Ye=np;break;case"beforeblur":case"afterblur":Ye=np;break;case"click":if(h.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Ye=qa;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Ye=kI;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Ye=LI;break;case mb:case pb:case gb:Ye=CI;break;case yb:Ye=UI;break;case"scroll":Ye=Td;break;case"wheel":Ye=WI;break;case"copy":case"cut":case"paste":Ye=AI;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Ye=Jw}var it=(c&4)!==0,Xr=!it&&o==="scroll",se=it?Te!==null?Te+"Capture":null:Te;it=[];for(var K=fe,ae;K!==null;){ae=K;var Fe=ae.stateNode;if(ae.tag===5&&Fe!==null&&(ae=Fe,se!==null&&(Fe=ir(K,se),Fe!=null&&it.push(nu(K,Fe,ae)))),Xr)break;K=K.return}0<it.length&&(Te=new Ye(Te,nt,null,h,Ie),De.push({event:Te,listeners:it}))}}if((c&7)===0){e:{if(Te=o==="mouseover"||o==="pointerover",Ye=o==="mouseout"||o==="pointerout",Te&&h!==st&&(nt=h.relatedTarget||h.fromElement)&&(Eo(nt)||nt[la]))break e;if((Ye||Te)&&(Te=Ie.window===Ie?Ie:(Te=Ie.ownerDocument)?Te.defaultView||Te.parentWindow:window,Ye?(nt=h.relatedTarget||h.toElement,Ye=fe,nt=nt?Eo(nt):null,nt!==null&&(Xr=on(nt),nt!==Xr||nt.tag!==5&&nt.tag!==6)&&(nt=null)):(Ye=null,nt=fe),Ye!==nt)){if(it=qa,Fe="onMouseLeave",se="onMouseEnter",K="mouse",(o==="pointerout"||o==="pointerover")&&(it=Jw,Fe="onPointerLeave",se="onPointerEnter",K="pointer"),Xr=Ye==null?Te:El(Ye),ae=nt==null?Te:El(nt),Te=new it(Fe,K+"leave",Ye,h,Ie),Te.target=Xr,Te.relatedTarget=ae,Fe=null,Eo(Ie)===fe&&(it=new it(se,K+"enter",nt,h,Ie),it.target=ae,it.relatedTarget=Xr,Fe=it),Xr=Fe,Ye&&nt)t:{for(it=Ye,se=nt,K=0,ae=it;ae;ae=Nl(ae))K++;for(ae=0,Fe=se;Fe;Fe=Nl(Fe))ae++;for(;0<K-ae;)it=Nl(it),K--;for(;0<ae-K;)se=Nl(se),ae--;for(;K--;){if(it===se||se!==null&&it===se.alternate)break t;it=Nl(it),se=Nl(se)}it=null}else it=null;Ye!==null&&Sb(De,Te,Ye,it,!1),nt!==null&&Xr!==null&&Sb(De,Xr,nt,it,!0)}}e:{if(Te=fe?El(fe):window,Ye=Te.nodeName&&Te.nodeName.toLowerCase(),Ye==="select"||Ye==="input"&&Te.type==="file")var ot=JI;else if(rb(Te))if(sb)ot=e4;else{ot=QI;var ht=XI}else(Ye=Te.nodeName)&&Ye.toLowerCase()==="input"&&(Te.type==="checkbox"||Te.type==="radio")&&(ot=ZI);if(ot&&(ot=ot(o,fe))){nb(De,ot,h,Ie);break e}ht&&ht(o,Te,fe),o==="focusout"&&(ht=Te._wrapperState)&&ht.controlled&&Te.type==="number"&&Qt(Te,"number",Te.value)}switch(ht=fe?El(fe):window,o){case"focusin":(rb(ht)||ht.contentEditable==="true")&&(kl=ht,cp=fe,eu=null);break;case"focusout":eu=cp=kl=null;break;case"mousedown":up=!0;break;case"contextmenu":case"mouseup":case"dragend":up=!1,fb(De,h,Ie);break;case"selectionchange":if(n4)break;case"keydown":case"keyup":fb(De,h,Ie)}var mt;if(ip)e:{switch(o){case"compositionstart":var St="onCompositionStart";break e;case"compositionend":St="onCompositionEnd";break e;case"compositionupdate":St="onCompositionUpdate";break e}St=void 0}else Sl?eb(o,h)&&(St="onCompositionEnd"):o==="keydown"&&h.keyCode===229&&(St="onCompositionStart");St&&(Xw&&h.locale!=="ko"&&(Sl||St!=="onCompositionStart"?St==="onCompositionEnd"&&Sl&&(mt=Ue()):(Ee=Ie,Pe="value"in Ee?Ee.value:Ee.textContent,Sl=!0)),ht=Fd(fe,St),0<ht.length&&(St=new Yw(St,o,null,h,Ie),De.push({event:St,listeners:ht}),mt?St.data=mt:(mt=tb(h),mt!==null&&(St.data=mt)))),(mt=qI?HI(o,h):KI(o,h))&&(fe=Fd(fe,"onBeforeInput"),0<fe.length&&(Ie=new Yw("onBeforeInput","beforeinput",null,h,Ie),De.push({event:Ie,listeners:fe}),Ie.data=mt))}bb(De,c)})}function nu(o,c,h){return{instance:o,listener:c,currentTarget:h}}function Fd(o,c){for(var h=c+"Capture",g=[];o!==null;){var j=o,k=j.stateNode;j.tag===5&&k!==null&&(j=k,k=ir(o,h),k!=null&&g.unshift(nu(o,k,j)),k=ir(o,c),k!=null&&g.push(nu(o,k,j))),o=o.return}return g}function Nl(o){if(o===null)return null;do o=o.return;while(o&&o.tag!==5);return o||null}function Sb(o,c,h,g,j){for(var k=c._reactName,A=[];h!==null&&h!==g;){var $=h,B=$.alternate,fe=$.stateNode;if(B!==null&&B===g)break;$.tag===5&&fe!==null&&($=fe,j?(B=ir(h,k),B!=null&&A.unshift(nu(h,B,$))):j||(B=ir(h,k),B!=null&&A.push(nu(h,B,$)))),h=h.return}A.length!==0&&o.push({event:c,listeners:A})}var o4=/\r\n?/g,l4=/\u0000|\uFFFD/g;function kb(o){return(typeof o=="string"?o:""+o).replace(o4,`
`).replace(l4,"")}function Ld(o,c,h){if(c=kb(c),kb(o)!==c&&h)throw Error(r(425))}function zd(){}var gp=null,yp=null;function vp(o,c){return o==="textarea"||o==="noscript"||typeof c.children=="string"||typeof c.children=="number"||typeof c.dangerouslySetInnerHTML=="object"&&c.dangerouslySetInnerHTML!==null&&c.dangerouslySetInnerHTML.__html!=null}var xp=typeof setTimeout=="function"?setTimeout:void 0,c4=typeof clearTimeout=="function"?clearTimeout:void 0,_b=typeof Promise=="function"?Promise:void 0,u4=typeof queueMicrotask=="function"?queueMicrotask:typeof _b<"u"?function(o){return _b.resolve(null).then(o).catch(d4)}:xp;function d4(o){setTimeout(function(){throw o})}function wp(o,c){var h=c,g=0;do{var j=h.nextSibling;if(o.removeChild(h),j&&j.nodeType===8)if(h=j.data,h==="/$"){if(g===0){o.removeChild(j),ds(c);return}g--}else h!=="$"&&h!=="$?"&&h!=="$!"||g++;h=j}while(h);ds(c)}function Ka(o){for(;o!=null;o=o.nextSibling){var c=o.nodeType;if(c===1||c===3)break;if(c===8){if(c=o.data,c==="$"||c==="$!"||c==="$?")break;if(c==="/$")return null}}return o}function Nb(o){o=o.previousSibling;for(var c=0;o;){if(o.nodeType===8){var h=o.data;if(h==="$"||h==="$!"||h==="$?"){if(c===0)return o;c--}else h==="/$"&&c++}o=o.previousSibling}return null}var Cl=Math.random().toString(36).slice(2),Hi="__reactFiber$"+Cl,su="__reactProps$"+Cl,la="__reactContainer$"+Cl,bp="__reactEvents$"+Cl,f4="__reactListeners$"+Cl,h4="__reactHandles$"+Cl;function Eo(o){var c=o[Hi];if(c)return c;for(var h=o.parentNode;h;){if(c=h[la]||h[Hi]){if(h=c.alternate,c.child!==null||h!==null&&h.child!==null)for(o=Nb(o);o!==null;){if(h=o[Hi])return h;o=Nb(o)}return c}o=h,h=o.parentNode}return null}function iu(o){return o=o[Hi]||o[la],!o||o.tag!==5&&o.tag!==6&&o.tag!==13&&o.tag!==3?null:o}function El(o){if(o.tag===5||o.tag===6)return o.stateNode;throw Error(r(33))}function Ud(o){return o[su]||null}var jp=[],Al=-1;function Ga(o){return{current:o}}function Ar(o){0>Al||(o.current=jp[Al],jp[Al]=null,Al--)}function br(o,c){Al++,jp[Al]=o.current,o.current=c}var Ya={},rs=Ga(Ya),js=Ga(!1),Ao=Ya;function Pl(o,c){var h=o.type.contextTypes;if(!h)return Ya;var g=o.stateNode;if(g&&g.__reactInternalMemoizedUnmaskedChildContext===c)return g.__reactInternalMemoizedMaskedChildContext;var j={},k;for(k in h)j[k]=c[k];return g&&(o=o.stateNode,o.__reactInternalMemoizedUnmaskedChildContext=c,o.__reactInternalMemoizedMaskedChildContext=j),j}function Ss(o){return o=o.childContextTypes,o!=null}function Bd(){Ar(js),Ar(rs)}function Cb(o,c,h){if(rs.current!==Ya)throw Error(r(168));br(rs,c),br(js,h)}function Eb(o,c,h){var g=o.stateNode;if(c=c.childContextTypes,typeof g.getChildContext!="function")return h;g=g.getChildContext();for(var j in g)if(!(j in c))throw Error(r(108,ye(o)||"Unknown",j));return me({},h,g)}function Wd(o){return o=(o=o.stateNode)&&o.__reactInternalMemoizedMergedChildContext||Ya,Ao=rs.current,br(rs,o),br(js,js.current),!0}function Ab(o,c,h){var g=o.stateNode;if(!g)throw Error(r(169));h?(o=Eb(o,c,Ao),g.__reactInternalMemoizedMergedChildContext=o,Ar(js),Ar(rs),br(rs,o)):Ar(js),br(js,h)}var ca=null,Vd=!1,Sp=!1;function Pb(o){ca===null?ca=[o]:ca.push(o)}function m4(o){Vd=!0,Pb(o)}function Ja(){if(!Sp&&ca!==null){Sp=!0;var o=0,c=ue;try{var h=ca;for(ue=1;o<h.length;o++){var g=h[o];do g=g(!0);while(g!==null)}ca=null,Vd=!1}catch(j){throw ca!==null&&(ca=ca.slice(o+1)),ts(we,Ja),j}finally{ue=c,Sp=!1}}return null}var Ol=[],Tl=0,qd=null,Hd=0,ii=[],ai=0,Po=null,ua=1,da="";function Oo(o,c){Ol[Tl++]=Hd,Ol[Tl++]=qd,qd=o,Hd=c}function Ob(o,c,h){ii[ai++]=ua,ii[ai++]=da,ii[ai++]=Po,Po=o;var g=ua;o=da;var j=32-Le(g)-1;g&=~(1<<j),h+=1;var k=32-Le(c)+j;if(30<k){var A=j-j%5;k=(g&(1<<A)-1).toString(32),g>>=A,j-=A,ua=1<<32-Le(c)+j|h<<j|g,da=k+o}else ua=1<<k|h<<j|g,da=o}function kp(o){o.return!==null&&(Oo(o,1),Ob(o,1,0))}function _p(o){for(;o===qd;)qd=Ol[--Tl],Ol[Tl]=null,Hd=Ol[--Tl],Ol[Tl]=null;for(;o===Po;)Po=ii[--ai],ii[ai]=null,da=ii[--ai],ii[ai]=null,ua=ii[--ai],ii[ai]=null}var zs=null,Us=null,$r=!1,Ni=null;function Tb(o,c){var h=ui(5,null,null,0);h.elementType="DELETED",h.stateNode=c,h.return=o,c=o.deletions,c===null?(o.deletions=[h],o.flags|=16):c.push(h)}function Ib(o,c){switch(o.tag){case 5:var h=o.type;return c=c.nodeType!==1||h.toLowerCase()!==c.nodeName.toLowerCase()?null:c,c!==null?(o.stateNode=c,zs=o,Us=Ka(c.firstChild),!0):!1;case 6:return c=o.pendingProps===""||c.nodeType!==3?null:c,c!==null?(o.stateNode=c,zs=o,Us=null,!0):!1;case 13:return c=c.nodeType!==8?null:c,c!==null?(h=Po!==null?{id:ua,overflow:da}:null,o.memoizedState={dehydrated:c,treeContext:h,retryLane:1073741824},h=ui(18,null,null,0),h.stateNode=c,h.return=o,o.child=h,zs=o,Us=null,!0):!1;default:return!1}}function Np(o){return(o.mode&1)!==0&&(o.flags&128)===0}function Cp(o){if($r){var c=Us;if(c){var h=c;if(!Ib(o,c)){if(Np(o))throw Error(r(418));c=Ka(h.nextSibling);var g=zs;c&&Ib(o,c)?Tb(g,h):(o.flags=o.flags&-4097|2,$r=!1,zs=o)}}else{if(Np(o))throw Error(r(418));o.flags=o.flags&-4097|2,$r=!1,zs=o}}}function Db(o){for(o=o.return;o!==null&&o.tag!==5&&o.tag!==3&&o.tag!==13;)o=o.return;zs=o}function Kd(o){if(o!==zs)return!1;if(!$r)return Db(o),$r=!0,!1;var c;if((c=o.tag!==3)&&!(c=o.tag!==5)&&(c=o.type,c=c!=="head"&&c!=="body"&&!vp(o.type,o.memoizedProps)),c&&(c=Us)){if(Np(o))throw Rb(),Error(r(418));for(;c;)Tb(o,c),c=Ka(c.nextSibling)}if(Db(o),o.tag===13){if(o=o.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(r(317));e:{for(o=o.nextSibling,c=0;o;){if(o.nodeType===8){var h=o.data;if(h==="/$"){if(c===0){Us=Ka(o.nextSibling);break e}c--}else h!=="$"&&h!=="$!"&&h!=="$?"||c++}o=o.nextSibling}Us=null}}else Us=zs?Ka(o.stateNode.nextSibling):null;return!0}function Rb(){for(var o=Us;o;)o=Ka(o.nextSibling)}function Il(){Us=zs=null,$r=!1}function Ep(o){Ni===null?Ni=[o]:Ni.push(o)}var p4=O.ReactCurrentBatchConfig;function au(o,c,h){if(o=h.ref,o!==null&&typeof o!="function"&&typeof o!="object"){if(h._owner){if(h=h._owner,h){if(h.tag!==1)throw Error(r(309));var g=h.stateNode}if(!g)throw Error(r(147,o));var j=g,k=""+o;return c!==null&&c.ref!==null&&typeof c.ref=="function"&&c.ref._stringRef===k?c.ref:(c=function(A){var $=j.refs;A===null?delete $[k]:$[k]=A},c._stringRef=k,c)}if(typeof o!="string")throw Error(r(284));if(!h._owner)throw Error(r(290,o))}return o}function Gd(o,c){throw o=Object.prototype.toString.call(c),Error(r(31,o==="[object Object]"?"object with keys {"+Object.keys(c).join(", ")+"}":o))}function $b(o){var c=o._init;return c(o._payload)}function Mb(o){function c(se,K){if(o){var ae=se.deletions;ae===null?(se.deletions=[K],se.flags|=16):ae.push(K)}}function h(se,K){if(!o)return null;for(;K!==null;)c(se,K),K=K.sibling;return null}function g(se,K){for(se=new Map;K!==null;)K.key!==null?se.set(K.key,K):se.set(K.index,K),K=K.sibling;return se}function j(se,K){return se=so(se,K),se.index=0,se.sibling=null,se}function k(se,K,ae){return se.index=ae,o?(ae=se.alternate,ae!==null?(ae=ae.index,ae<K?(se.flags|=2,K):ae):(se.flags|=2,K)):(se.flags|=1048576,K)}function A(se){return o&&se.alternate===null&&(se.flags|=2),se}function $(se,K,ae,Fe){return K===null||K.tag!==6?(K=xg(ae,se.mode,Fe),K.return=se,K):(K=j(K,ae),K.return=se,K)}function B(se,K,ae,Fe){var ot=ae.type;return ot===F?Ie(se,K,ae.props.children,Fe,ae.key):K!==null&&(K.elementType===ot||typeof ot=="object"&&ot!==null&&ot.$$typeof===V&&$b(ot)===K.type)?(Fe=j(K,ae.props),Fe.ref=au(se,K,ae),Fe.return=se,Fe):(Fe=xf(ae.type,ae.key,ae.props,null,se.mode,Fe),Fe.ref=au(se,K,ae),Fe.return=se,Fe)}function fe(se,K,ae,Fe){return K===null||K.tag!==4||K.stateNode.containerInfo!==ae.containerInfo||K.stateNode.implementation!==ae.implementation?(K=wg(ae,se.mode,Fe),K.return=se,K):(K=j(K,ae.children||[]),K.return=se,K)}function Ie(se,K,ae,Fe,ot){return K===null||K.tag!==7?(K=Lo(ae,se.mode,Fe,ot),K.return=se,K):(K=j(K,ae),K.return=se,K)}function De(se,K,ae){if(typeof K=="string"&&K!==""||typeof K=="number")return K=xg(""+K,se.mode,ae),K.return=se,K;if(typeof K=="object"&&K!==null){switch(K.$$typeof){case T:return ae=xf(K.type,K.key,K.props,null,se.mode,ae),ae.ref=au(se,null,K),ae.return=se,ae;case P:return K=wg(K,se.mode,ae),K.return=se,K;case V:var Fe=K._init;return De(se,Fe(K._payload),ae)}if(R(K)||re(K))return K=Lo(K,se.mode,ae,null),K.return=se,K;Gd(se,K)}return null}function Te(se,K,ae,Fe){var ot=K!==null?K.key:null;if(typeof ae=="string"&&ae!==""||typeof ae=="number")return ot!==null?null:$(se,K,""+ae,Fe);if(typeof ae=="object"&&ae!==null){switch(ae.$$typeof){case T:return ae.key===ot?B(se,K,ae,Fe):null;case P:return ae.key===ot?fe(se,K,ae,Fe):null;case V:return ot=ae._init,Te(se,K,ot(ae._payload),Fe)}if(R(ae)||re(ae))return ot!==null?null:Ie(se,K,ae,Fe,null);Gd(se,ae)}return null}function Ye(se,K,ae,Fe,ot){if(typeof Fe=="string"&&Fe!==""||typeof Fe=="number")return se=se.get(ae)||null,$(K,se,""+Fe,ot);if(typeof Fe=="object"&&Fe!==null){switch(Fe.$$typeof){case T:return se=se.get(Fe.key===null?ae:Fe.key)||null,B(K,se,Fe,ot);case P:return se=se.get(Fe.key===null?ae:Fe.key)||null,fe(K,se,Fe,ot);case V:var ht=Fe._init;return Ye(se,K,ae,ht(Fe._payload),ot)}if(R(Fe)||re(Fe))return se=se.get(ae)||null,Ie(K,se,Fe,ot,null);Gd(K,Fe)}return null}function nt(se,K,ae,Fe){for(var ot=null,ht=null,mt=K,St=K=0,Dn=null;mt!==null&&St<ae.length;St++){mt.index>St?(Dn=mt,mt=null):Dn=mt.sibling;var tr=Te(se,mt,ae[St],Fe);if(tr===null){mt===null&&(mt=Dn);break}o&&mt&&tr.alternate===null&&c(se,mt),K=k(tr,K,St),ht===null?ot=tr:ht.sibling=tr,ht=tr,mt=Dn}if(St===ae.length)return h(se,mt),$r&&Oo(se,St),ot;if(mt===null){for(;St<ae.length;St++)mt=De(se,ae[St],Fe),mt!==null&&(K=k(mt,K,St),ht===null?ot=mt:ht.sibling=mt,ht=mt);return $r&&Oo(se,St),ot}for(mt=g(se,mt);St<ae.length;St++)Dn=Ye(mt,se,St,ae[St],Fe),Dn!==null&&(o&&Dn.alternate!==null&&mt.delete(Dn.key===null?St:Dn.key),K=k(Dn,K,St),ht===null?ot=Dn:ht.sibling=Dn,ht=Dn);return o&&mt.forEach(function(io){return c(se,io)}),$r&&Oo(se,St),ot}function it(se,K,ae,Fe){var ot=re(ae);if(typeof ot!="function")throw Error(r(150));if(ae=ot.call(ae),ae==null)throw Error(r(151));for(var ht=ot=null,mt=K,St=K=0,Dn=null,tr=ae.next();mt!==null&&!tr.done;St++,tr=ae.next()){mt.index>St?(Dn=mt,mt=null):Dn=mt.sibling;var io=Te(se,mt,tr.value,Fe);if(io===null){mt===null&&(mt=Dn);break}o&&mt&&io.alternate===null&&c(se,mt),K=k(io,K,St),ht===null?ot=io:ht.sibling=io,ht=io,mt=Dn}if(tr.done)return h(se,mt),$r&&Oo(se,St),ot;if(mt===null){for(;!tr.done;St++,tr=ae.next())tr=De(se,tr.value,Fe),tr!==null&&(K=k(tr,K,St),ht===null?ot=tr:ht.sibling=tr,ht=tr);return $r&&Oo(se,St),ot}for(mt=g(se,mt);!tr.done;St++,tr=ae.next())tr=Ye(mt,se,St,tr.value,Fe),tr!==null&&(o&&tr.alternate!==null&&mt.delete(tr.key===null?St:tr.key),K=k(tr,K,St),ht===null?ot=tr:ht.sibling=tr,ht=tr);return o&&mt.forEach(function(G4){return c(se,G4)}),$r&&Oo(se,St),ot}function Xr(se,K,ae,Fe){if(typeof ae=="object"&&ae!==null&&ae.type===F&&ae.key===null&&(ae=ae.props.children),typeof ae=="object"&&ae!==null){switch(ae.$$typeof){case T:e:{for(var ot=ae.key,ht=K;ht!==null;){if(ht.key===ot){if(ot=ae.type,ot===F){if(ht.tag===7){h(se,ht.sibling),K=j(ht,ae.props.children),K.return=se,se=K;break e}}else if(ht.elementType===ot||typeof ot=="object"&&ot!==null&&ot.$$typeof===V&&$b(ot)===ht.type){h(se,ht.sibling),K=j(ht,ae.props),K.ref=au(se,ht,ae),K.return=se,se=K;break e}h(se,ht);break}else c(se,ht);ht=ht.sibling}ae.type===F?(K=Lo(ae.props.children,se.mode,Fe,ae.key),K.return=se,se=K):(Fe=xf(ae.type,ae.key,ae.props,null,se.mode,Fe),Fe.ref=au(se,K,ae),Fe.return=se,se=Fe)}return A(se);case P:e:{for(ht=ae.key;K!==null;){if(K.key===ht)if(K.tag===4&&K.stateNode.containerInfo===ae.containerInfo&&K.stateNode.implementation===ae.implementation){h(se,K.sibling),K=j(K,ae.children||[]),K.return=se,se=K;break e}else{h(se,K);break}else c(se,K);K=K.sibling}K=wg(ae,se.mode,Fe),K.return=se,se=K}return A(se);case V:return ht=ae._init,Xr(se,K,ht(ae._payload),Fe)}if(R(ae))return nt(se,K,ae,Fe);if(re(ae))return it(se,K,ae,Fe);Gd(se,ae)}return typeof ae=="string"&&ae!==""||typeof ae=="number"?(ae=""+ae,K!==null&&K.tag===6?(h(se,K.sibling),K=j(K,ae),K.return=se,se=K):(h(se,K),K=xg(ae,se.mode,Fe),K.return=se,se=K),A(se)):h(se,K)}return Xr}var Dl=Mb(!0),Fb=Mb(!1),Yd=Ga(null),Jd=null,Rl=null,Ap=null;function Pp(){Ap=Rl=Jd=null}function Op(o){var c=Yd.current;Ar(Yd),o._currentValue=c}function Tp(o,c,h){for(;o!==null;){var g=o.alternate;if((o.childLanes&c)!==c?(o.childLanes|=c,g!==null&&(g.childLanes|=c)):g!==null&&(g.childLanes&c)!==c&&(g.childLanes|=c),o===h)break;o=o.return}}function $l(o,c){Jd=o,Ap=Rl=null,o=o.dependencies,o!==null&&o.firstContext!==null&&((o.lanes&c)!==0&&(ks=!0),o.firstContext=null)}function oi(o){var c=o._currentValue;if(Ap!==o)if(o={context:o,memoizedValue:c,next:null},Rl===null){if(Jd===null)throw Error(r(308));Rl=o,Jd.dependencies={lanes:0,firstContext:o}}else Rl=Rl.next=o;return c}var To=null;function Ip(o){To===null?To=[o]:To.push(o)}function Lb(o,c,h,g){var j=c.interleaved;return j===null?(h.next=h,Ip(c)):(h.next=j.next,j.next=h),c.interleaved=h,fa(o,g)}function fa(o,c){o.lanes|=c;var h=o.alternate;for(h!==null&&(h.lanes|=c),h=o,o=o.return;o!==null;)o.childLanes|=c,h=o.alternate,h!==null&&(h.childLanes|=c),h=o,o=o.return;return h.tag===3?h.stateNode:null}var Xa=!1;function Dp(o){o.updateQueue={baseState:o.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function zb(o,c){o=o.updateQueue,c.updateQueue===o&&(c.updateQueue={baseState:o.baseState,firstBaseUpdate:o.firstBaseUpdate,lastBaseUpdate:o.lastBaseUpdate,shared:o.shared,effects:o.effects})}function ha(o,c){return{eventTime:o,lane:c,tag:0,payload:null,callback:null,next:null}}function Qa(o,c,h){var g=o.updateQueue;if(g===null)return null;if(g=g.shared,(Jt&2)!==0){var j=g.pending;return j===null?c.next=c:(c.next=j.next,j.next=c),g.pending=c,fa(o,h)}return j=g.interleaved,j===null?(c.next=c,Ip(g)):(c.next=j.next,j.next=c),g.interleaved=c,fa(o,h)}function Xd(o,c,h){if(c=c.updateQueue,c!==null&&(c=c.shared,(h&4194240)!==0)){var g=c.lanes;g&=o.pendingLanes,h|=g,c.lanes=h,de(o,h)}}function Ub(o,c){var h=o.updateQueue,g=o.alternate;if(g!==null&&(g=g.updateQueue,h===g)){var j=null,k=null;if(h=h.firstBaseUpdate,h!==null){do{var A={eventTime:h.eventTime,lane:h.lane,tag:h.tag,payload:h.payload,callback:h.callback,next:null};k===null?j=k=A:k=k.next=A,h=h.next}while(h!==null);k===null?j=k=c:k=k.next=c}else j=k=c;h={baseState:g.baseState,firstBaseUpdate:j,lastBaseUpdate:k,shared:g.shared,effects:g.effects},o.updateQueue=h;return}o=h.lastBaseUpdate,o===null?h.firstBaseUpdate=c:o.next=c,h.lastBaseUpdate=c}function Qd(o,c,h,g){var j=o.updateQueue;Xa=!1;var k=j.firstBaseUpdate,A=j.lastBaseUpdate,$=j.shared.pending;if($!==null){j.shared.pending=null;var B=$,fe=B.next;B.next=null,A===null?k=fe:A.next=fe,A=B;var Ie=o.alternate;Ie!==null&&(Ie=Ie.updateQueue,$=Ie.lastBaseUpdate,$!==A&&($===null?Ie.firstBaseUpdate=fe:$.next=fe,Ie.lastBaseUpdate=B))}if(k!==null){var De=j.baseState;A=0,Ie=fe=B=null,$=k;do{var Te=$.lane,Ye=$.eventTime;if((g&Te)===Te){Ie!==null&&(Ie=Ie.next={eventTime:Ye,lane:0,tag:$.tag,payload:$.payload,callback:$.callback,next:null});e:{var nt=o,it=$;switch(Te=c,Ye=h,it.tag){case 1:if(nt=it.payload,typeof nt=="function"){De=nt.call(Ye,De,Te);break e}De=nt;break e;case 3:nt.flags=nt.flags&-65537|128;case 0:if(nt=it.payload,Te=typeof nt=="function"?nt.call(Ye,De,Te):nt,Te==null)break e;De=me({},De,Te);break e;case 2:Xa=!0}}$.callback!==null&&$.lane!==0&&(o.flags|=64,Te=j.effects,Te===null?j.effects=[$]:Te.push($))}else Ye={eventTime:Ye,lane:Te,tag:$.tag,payload:$.payload,callback:$.callback,next:null},Ie===null?(fe=Ie=Ye,B=De):Ie=Ie.next=Ye,A|=Te;if($=$.next,$===null){if($=j.shared.pending,$===null)break;Te=$,$=Te.next,Te.next=null,j.lastBaseUpdate=Te,j.shared.pending=null}}while(!0);if(Ie===null&&(B=De),j.baseState=B,j.firstBaseUpdate=fe,j.lastBaseUpdate=Ie,c=j.shared.interleaved,c!==null){j=c;do A|=j.lane,j=j.next;while(j!==c)}else k===null&&(j.shared.lanes=0);Ro|=A,o.lanes=A,o.memoizedState=De}}function Bb(o,c,h){if(o=c.effects,c.effects=null,o!==null)for(c=0;c<o.length;c++){var g=o[c],j=g.callback;if(j!==null){if(g.callback=null,g=h,typeof j!="function")throw Error(r(191,j));j.call(g)}}}var ou={},Ki=Ga(ou),lu=Ga(ou),cu=Ga(ou);function Io(o){if(o===ou)throw Error(r(174));return o}function Rp(o,c){switch(br(cu,c),br(lu,o),br(Ki,ou),o=c.nodeType,o){case 9:case 11:c=(c=c.documentElement)?c.namespaceURI:xt(null,"");break;default:o=o===8?c.parentNode:c,c=o.namespaceURI||null,o=o.tagName,c=xt(c,o)}Ar(Ki),br(Ki,c)}function Ml(){Ar(Ki),Ar(lu),Ar(cu)}function Wb(o){Io(cu.current);var c=Io(Ki.current),h=xt(c,o.type);c!==h&&(br(lu,o),br(Ki,h))}function $p(o){lu.current===o&&(Ar(Ki),Ar(lu))}var Lr=Ga(0);function Zd(o){for(var c=o;c!==null;){if(c.tag===13){var h=c.memoizedState;if(h!==null&&(h=h.dehydrated,h===null||h.data==="$?"||h.data==="$!"))return c}else if(c.tag===19&&c.memoizedProps.revealOrder!==void 0){if((c.flags&128)!==0)return c}else if(c.child!==null){c.child.return=c,c=c.child;continue}if(c===o)break;for(;c.sibling===null;){if(c.return===null||c.return===o)return null;c=c.return}c.sibling.return=c.return,c=c.sibling}return null}var Mp=[];function Fp(){for(var o=0;o<Mp.length;o++)Mp[o]._workInProgressVersionPrimary=null;Mp.length=0}var ef=O.ReactCurrentDispatcher,Lp=O.ReactCurrentBatchConfig,Do=0,zr=null,xn=null,Tn=null,tf=!1,uu=!1,du=0,g4=0;function ns(){throw Error(r(321))}function zp(o,c){if(c===null)return!1;for(var h=0;h<c.length&&h<o.length;h++)if(!_i(o[h],c[h]))return!1;return!0}function Up(o,c,h,g,j,k){if(Do=k,zr=c,c.memoizedState=null,c.updateQueue=null,c.lanes=0,ef.current=o===null||o.memoizedState===null?w4:b4,o=h(g,j),uu){k=0;do{if(uu=!1,du=0,25<=k)throw Error(r(301));k+=1,Tn=xn=null,c.updateQueue=null,ef.current=j4,o=h(g,j)}while(uu)}if(ef.current=sf,c=xn!==null&&xn.next!==null,Do=0,Tn=xn=zr=null,tf=!1,c)throw Error(r(300));return o}function Bp(){var o=du!==0;return du=0,o}function Gi(){var o={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Tn===null?zr.memoizedState=Tn=o:Tn=Tn.next=o,Tn}function li(){if(xn===null){var o=zr.alternate;o=o!==null?o.memoizedState:null}else o=xn.next;var c=Tn===null?zr.memoizedState:Tn.next;if(c!==null)Tn=c,xn=o;else{if(o===null)throw Error(r(310));xn=o,o={memoizedState:xn.memoizedState,baseState:xn.baseState,baseQueue:xn.baseQueue,queue:xn.queue,next:null},Tn===null?zr.memoizedState=Tn=o:Tn=Tn.next=o}return Tn}function fu(o,c){return typeof c=="function"?c(o):c}function Wp(o){var c=li(),h=c.queue;if(h===null)throw Error(r(311));h.lastRenderedReducer=o;var g=xn,j=g.baseQueue,k=h.pending;if(k!==null){if(j!==null){var A=j.next;j.next=k.next,k.next=A}g.baseQueue=j=k,h.pending=null}if(j!==null){k=j.next,g=g.baseState;var $=A=null,B=null,fe=k;do{var Ie=fe.lane;if((Do&Ie)===Ie)B!==null&&(B=B.next={lane:0,action:fe.action,hasEagerState:fe.hasEagerState,eagerState:fe.eagerState,next:null}),g=fe.hasEagerState?fe.eagerState:o(g,fe.action);else{var De={lane:Ie,action:fe.action,hasEagerState:fe.hasEagerState,eagerState:fe.eagerState,next:null};B===null?($=B=De,A=g):B=B.next=De,zr.lanes|=Ie,Ro|=Ie}fe=fe.next}while(fe!==null&&fe!==k);B===null?A=g:B.next=$,_i(g,c.memoizedState)||(ks=!0),c.memoizedState=g,c.baseState=A,c.baseQueue=B,h.lastRenderedState=g}if(o=h.interleaved,o!==null){j=o;do k=j.lane,zr.lanes|=k,Ro|=k,j=j.next;while(j!==o)}else j===null&&(h.lanes=0);return[c.memoizedState,h.dispatch]}function Vp(o){var c=li(),h=c.queue;if(h===null)throw Error(r(311));h.lastRenderedReducer=o;var g=h.dispatch,j=h.pending,k=c.memoizedState;if(j!==null){h.pending=null;var A=j=j.next;do k=o(k,A.action),A=A.next;while(A!==j);_i(k,c.memoizedState)||(ks=!0),c.memoizedState=k,c.baseQueue===null&&(c.baseState=k),h.lastRenderedState=k}return[k,g]}function Vb(){}function qb(o,c){var h=zr,g=li(),j=c(),k=!_i(g.memoizedState,j);if(k&&(g.memoizedState=j,ks=!0),g=g.queue,qp(Gb.bind(null,h,g,o),[o]),g.getSnapshot!==c||k||Tn!==null&&Tn.memoizedState.tag&1){if(h.flags|=2048,hu(9,Kb.bind(null,h,g,j,c),void 0,null),In===null)throw Error(r(349));(Do&30)!==0||Hb(h,c,j)}return j}function Hb(o,c,h){o.flags|=16384,o={getSnapshot:c,value:h},c=zr.updateQueue,c===null?(c={lastEffect:null,stores:null},zr.updateQueue=c,c.stores=[o]):(h=c.stores,h===null?c.stores=[o]:h.push(o))}function Kb(o,c,h,g){c.value=h,c.getSnapshot=g,Yb(c)&&Jb(o)}function Gb(o,c,h){return h(function(){Yb(c)&&Jb(o)})}function Yb(o){var c=o.getSnapshot;o=o.value;try{var h=c();return!_i(o,h)}catch{return!0}}function Jb(o){var c=fa(o,1);c!==null&&Pi(c,o,1,-1)}function Xb(o){var c=Gi();return typeof o=="function"&&(o=o()),c.memoizedState=c.baseState=o,o={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:fu,lastRenderedState:o},c.queue=o,o=o.dispatch=x4.bind(null,zr,o),[c.memoizedState,o]}function hu(o,c,h,g){return o={tag:o,create:c,destroy:h,deps:g,next:null},c=zr.updateQueue,c===null?(c={lastEffect:null,stores:null},zr.updateQueue=c,c.lastEffect=o.next=o):(h=c.lastEffect,h===null?c.lastEffect=o.next=o:(g=h.next,h.next=o,o.next=g,c.lastEffect=o)),o}function Qb(){return li().memoizedState}function rf(o,c,h,g){var j=Gi();zr.flags|=o,j.memoizedState=hu(1|c,h,void 0,g===void 0?null:g)}function nf(o,c,h,g){var j=li();g=g===void 0?null:g;var k=void 0;if(xn!==null){var A=xn.memoizedState;if(k=A.destroy,g!==null&&zp(g,A.deps)){j.memoizedState=hu(c,h,k,g);return}}zr.flags|=o,j.memoizedState=hu(1|c,h,k,g)}function Zb(o,c){return rf(8390656,8,o,c)}function qp(o,c){return nf(2048,8,o,c)}function e1(o,c){return nf(4,2,o,c)}function t1(o,c){return nf(4,4,o,c)}function r1(o,c){if(typeof c=="function")return o=o(),c(o),function(){c(null)};if(c!=null)return o=o(),c.current=o,function(){c.current=null}}function n1(o,c,h){return h=h!=null?h.concat([o]):null,nf(4,4,r1.bind(null,c,o),h)}function Hp(){}function s1(o,c){var h=li();c=c===void 0?null:c;var g=h.memoizedState;return g!==null&&c!==null&&zp(c,g[1])?g[0]:(h.memoizedState=[o,c],o)}function i1(o,c){var h=li();c=c===void 0?null:c;var g=h.memoizedState;return g!==null&&c!==null&&zp(c,g[1])?g[0]:(o=o(),h.memoizedState=[o,c],o)}function a1(o,c,h){return(Do&21)===0?(o.baseState&&(o.baseState=!1,ks=!0),o.memoizedState=h):(_i(h,c)||(h=Si(),zr.lanes|=h,Ro|=h,o.baseState=!0),c)}function y4(o,c){var h=ue;ue=h!==0&&4>h?h:4,o(!0);var g=Lp.transition;Lp.transition={};try{o(!1),c()}finally{ue=h,Lp.transition=g}}function o1(){return li().memoizedState}function v4(o,c,h){var g=ro(o);if(h={lane:g,action:h,hasEagerState:!1,eagerState:null,next:null},l1(o))c1(c,h);else if(h=Lb(o,c,h,g),h!==null){var j=hs();Pi(h,o,g,j),u1(h,c,g)}}function x4(o,c,h){var g=ro(o),j={lane:g,action:h,hasEagerState:!1,eagerState:null,next:null};if(l1(o))c1(c,j);else{var k=o.alternate;if(o.lanes===0&&(k===null||k.lanes===0)&&(k=c.lastRenderedReducer,k!==null))try{var A=c.lastRenderedState,$=k(A,h);if(j.hasEagerState=!0,j.eagerState=$,_i($,A)){var B=c.interleaved;B===null?(j.next=j,Ip(c)):(j.next=B.next,B.next=j),c.interleaved=j;return}}catch{}finally{}h=Lb(o,c,j,g),h!==null&&(j=hs(),Pi(h,o,g,j),u1(h,c,g))}}function l1(o){var c=o.alternate;return o===zr||c!==null&&c===zr}function c1(o,c){uu=tf=!0;var h=o.pending;h===null?c.next=c:(c.next=h.next,h.next=c),o.pending=c}function u1(o,c,h){if((h&4194240)!==0){var g=c.lanes;g&=o.pendingLanes,h|=g,c.lanes=h,de(o,h)}}var sf={readContext:oi,useCallback:ns,useContext:ns,useEffect:ns,useImperativeHandle:ns,useInsertionEffect:ns,useLayoutEffect:ns,useMemo:ns,useReducer:ns,useRef:ns,useState:ns,useDebugValue:ns,useDeferredValue:ns,useTransition:ns,useMutableSource:ns,useSyncExternalStore:ns,useId:ns,unstable_isNewReconciler:!1},w4={readContext:oi,useCallback:function(o,c){return Gi().memoizedState=[o,c===void 0?null:c],o},useContext:oi,useEffect:Zb,useImperativeHandle:function(o,c,h){return h=h!=null?h.concat([o]):null,rf(4194308,4,r1.bind(null,c,o),h)},useLayoutEffect:function(o,c){return rf(4194308,4,o,c)},useInsertionEffect:function(o,c){return rf(4,2,o,c)},useMemo:function(o,c){var h=Gi();return c=c===void 0?null:c,o=o(),h.memoizedState=[o,c],o},useReducer:function(o,c,h){var g=Gi();return c=h!==void 0?h(c):c,g.memoizedState=g.baseState=c,o={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:o,lastRenderedState:c},g.queue=o,o=o.dispatch=v4.bind(null,zr,o),[g.memoizedState,o]},useRef:function(o){var c=Gi();return o={current:o},c.memoizedState=o},useState:Xb,useDebugValue:Hp,useDeferredValue:function(o){return Gi().memoizedState=o},useTransition:function(){var o=Xb(!1),c=o[0];return o=y4.bind(null,o[1]),Gi().memoizedState=o,[c,o]},useMutableSource:function(){},useSyncExternalStore:function(o,c,h){var g=zr,j=Gi();if($r){if(h===void 0)throw Error(r(407));h=h()}else{if(h=c(),In===null)throw Error(r(349));(Do&30)!==0||Hb(g,c,h)}j.memoizedState=h;var k={value:h,getSnapshot:c};return j.queue=k,Zb(Gb.bind(null,g,k,o),[o]),g.flags|=2048,hu(9,Kb.bind(null,g,k,h,c),void 0,null),h},useId:function(){var o=Gi(),c=In.identifierPrefix;if($r){var h=da,g=ua;h=(g&~(1<<32-Le(g)-1)).toString(32)+h,c=":"+c+"R"+h,h=du++,0<h&&(c+="H"+h.toString(32)),c+=":"}else h=g4++,c=":"+c+"r"+h.toString(32)+":";return o.memoizedState=c},unstable_isNewReconciler:!1},b4={readContext:oi,useCallback:s1,useContext:oi,useEffect:qp,useImperativeHandle:n1,useInsertionEffect:e1,useLayoutEffect:t1,useMemo:i1,useReducer:Wp,useRef:Qb,useState:function(){return Wp(fu)},useDebugValue:Hp,useDeferredValue:function(o){var c=li();return a1(c,xn.memoizedState,o)},useTransition:function(){var o=Wp(fu)[0],c=li().memoizedState;return[o,c]},useMutableSource:Vb,useSyncExternalStore:qb,useId:o1,unstable_isNewReconciler:!1},j4={readContext:oi,useCallback:s1,useContext:oi,useEffect:qp,useImperativeHandle:n1,useInsertionEffect:e1,useLayoutEffect:t1,useMemo:i1,useReducer:Vp,useRef:Qb,useState:function(){return Vp(fu)},useDebugValue:Hp,useDeferredValue:function(o){var c=li();return xn===null?c.memoizedState=o:a1(c,xn.memoizedState,o)},useTransition:function(){var o=Vp(fu)[0],c=li().memoizedState;return[o,c]},useMutableSource:Vb,useSyncExternalStore:qb,useId:o1,unstable_isNewReconciler:!1};function Ci(o,c){if(o&&o.defaultProps){c=me({},c),o=o.defaultProps;for(var h in o)c[h]===void 0&&(c[h]=o[h]);return c}return c}function Kp(o,c,h,g){c=o.memoizedState,h=h(g,c),h=h==null?c:me({},c,h),o.memoizedState=h,o.lanes===0&&(o.updateQueue.baseState=h)}var af={isMounted:function(o){return(o=o._reactInternals)?on(o)===o:!1},enqueueSetState:function(o,c,h){o=o._reactInternals;var g=hs(),j=ro(o),k=ha(g,j);k.payload=c,h!=null&&(k.callback=h),c=Qa(o,k,j),c!==null&&(Pi(c,o,j,g),Xd(c,o,j))},enqueueReplaceState:function(o,c,h){o=o._reactInternals;var g=hs(),j=ro(o),k=ha(g,j);k.tag=1,k.payload=c,h!=null&&(k.callback=h),c=Qa(o,k,j),c!==null&&(Pi(c,o,j,g),Xd(c,o,j))},enqueueForceUpdate:function(o,c){o=o._reactInternals;var h=hs(),g=ro(o),j=ha(h,g);j.tag=2,c!=null&&(j.callback=c),c=Qa(o,j,g),c!==null&&(Pi(c,o,g,h),Xd(c,o,g))}};function d1(o,c,h,g,j,k,A){return o=o.stateNode,typeof o.shouldComponentUpdate=="function"?o.shouldComponentUpdate(g,k,A):c.prototype&&c.prototype.isPureReactComponent?!Zc(h,g)||!Zc(j,k):!0}function f1(o,c,h){var g=!1,j=Ya,k=c.contextType;return typeof k=="object"&&k!==null?k=oi(k):(j=Ss(c)?Ao:rs.current,g=c.contextTypes,k=(g=g!=null)?Pl(o,j):Ya),c=new c(h,k),o.memoizedState=c.state!==null&&c.state!==void 0?c.state:null,c.updater=af,o.stateNode=c,c._reactInternals=o,g&&(o=o.stateNode,o.__reactInternalMemoizedUnmaskedChildContext=j,o.__reactInternalMemoizedMaskedChildContext=k),c}function h1(o,c,h,g){o=c.state,typeof c.componentWillReceiveProps=="function"&&c.componentWillReceiveProps(h,g),typeof c.UNSAFE_componentWillReceiveProps=="function"&&c.UNSAFE_componentWillReceiveProps(h,g),c.state!==o&&af.enqueueReplaceState(c,c.state,null)}function Gp(o,c,h,g){var j=o.stateNode;j.props=h,j.state=o.memoizedState,j.refs={},Dp(o);var k=c.contextType;typeof k=="object"&&k!==null?j.context=oi(k):(k=Ss(c)?Ao:rs.current,j.context=Pl(o,k)),j.state=o.memoizedState,k=c.getDerivedStateFromProps,typeof k=="function"&&(Kp(o,c,k,h),j.state=o.memoizedState),typeof c.getDerivedStateFromProps=="function"||typeof j.getSnapshotBeforeUpdate=="function"||typeof j.UNSAFE_componentWillMount!="function"&&typeof j.componentWillMount!="function"||(c=j.state,typeof j.componentWillMount=="function"&&j.componentWillMount(),typeof j.UNSAFE_componentWillMount=="function"&&j.UNSAFE_componentWillMount(),c!==j.state&&af.enqueueReplaceState(j,j.state,null),Qd(o,h,j,g),j.state=o.memoizedState),typeof j.componentDidMount=="function"&&(o.flags|=4194308)}function Fl(o,c){try{var h="",g=c;do h+=ve(g),g=g.return;while(g);var j=h}catch(k){j=`
Error generating stack: `+k.message+`
`+k.stack}return{value:o,source:c,stack:j,digest:null}}function Yp(o,c,h){return{value:o,source:null,stack:h??null,digest:c??null}}function Jp(o,c){try{console.error(c.value)}catch(h){setTimeout(function(){throw h})}}var S4=typeof WeakMap=="function"?WeakMap:Map;function m1(o,c,h){h=ha(-1,h),h.tag=3,h.payload={element:null};var g=c.value;return h.callback=function(){hf||(hf=!0,dg=g),Jp(o,c)},h}function p1(o,c,h){h=ha(-1,h),h.tag=3;var g=o.type.getDerivedStateFromError;if(typeof g=="function"){var j=c.value;h.payload=function(){return g(j)},h.callback=function(){Jp(o,c)}}var k=o.stateNode;return k!==null&&typeof k.componentDidCatch=="function"&&(h.callback=function(){Jp(o,c),typeof g!="function"&&(eo===null?eo=new Set([this]):eo.add(this));var A=c.stack;this.componentDidCatch(c.value,{componentStack:A!==null?A:""})}),h}function g1(o,c,h){var g=o.pingCache;if(g===null){g=o.pingCache=new S4;var j=new Set;g.set(c,j)}else j=g.get(c),j===void 0&&(j=new Set,g.set(c,j));j.has(h)||(j.add(h),o=M4.bind(null,o,c,h),c.then(o,o))}function y1(o){do{var c;if((c=o.tag===13)&&(c=o.memoizedState,c=c!==null?c.dehydrated!==null:!0),c)return o;o=o.return}while(o!==null);return null}function v1(o,c,h,g,j){return(o.mode&1)===0?(o===c?o.flags|=65536:(o.flags|=128,h.flags|=131072,h.flags&=-52805,h.tag===1&&(h.alternate===null?h.tag=17:(c=ha(-1,1),c.tag=2,Qa(h,c,1))),h.lanes|=1),o):(o.flags|=65536,o.lanes=j,o)}var k4=O.ReactCurrentOwner,ks=!1;function fs(o,c,h,g){c.child=o===null?Fb(c,null,h,g):Dl(c,o.child,h,g)}function x1(o,c,h,g,j){h=h.render;var k=c.ref;return $l(c,j),g=Up(o,c,h,g,k,j),h=Bp(),o!==null&&!ks?(c.updateQueue=o.updateQueue,c.flags&=-2053,o.lanes&=~j,ma(o,c,j)):($r&&h&&kp(c),c.flags|=1,fs(o,c,g,j),c.child)}function w1(o,c,h,g,j){if(o===null){var k=h.type;return typeof k=="function"&&!vg(k)&&k.defaultProps===void 0&&h.compare===null&&h.defaultProps===void 0?(c.tag=15,c.type=k,b1(o,c,k,g,j)):(o=xf(h.type,null,g,c,c.mode,j),o.ref=c.ref,o.return=c,c.child=o)}if(k=o.child,(o.lanes&j)===0){var A=k.memoizedProps;if(h=h.compare,h=h!==null?h:Zc,h(A,g)&&o.ref===c.ref)return ma(o,c,j)}return c.flags|=1,o=so(k,g),o.ref=c.ref,o.return=c,c.child=o}function b1(o,c,h,g,j){if(o!==null){var k=o.memoizedProps;if(Zc(k,g)&&o.ref===c.ref)if(ks=!1,c.pendingProps=g=k,(o.lanes&j)!==0)(o.flags&131072)!==0&&(ks=!0);else return c.lanes=o.lanes,ma(o,c,j)}return Xp(o,c,h,g,j)}function j1(o,c,h){var g=c.pendingProps,j=g.children,k=o!==null?o.memoizedState:null;if(g.mode==="hidden")if((c.mode&1)===0)c.memoizedState={baseLanes:0,cachePool:null,transitions:null},br(zl,Bs),Bs|=h;else{if((h&1073741824)===0)return o=k!==null?k.baseLanes|h:h,c.lanes=c.childLanes=1073741824,c.memoizedState={baseLanes:o,cachePool:null,transitions:null},c.updateQueue=null,br(zl,Bs),Bs|=o,null;c.memoizedState={baseLanes:0,cachePool:null,transitions:null},g=k!==null?k.baseLanes:h,br(zl,Bs),Bs|=g}else k!==null?(g=k.baseLanes|h,c.memoizedState=null):g=h,br(zl,Bs),Bs|=g;return fs(o,c,j,h),c.child}function S1(o,c){var h=c.ref;(o===null&&h!==null||o!==null&&o.ref!==h)&&(c.flags|=512,c.flags|=2097152)}function Xp(o,c,h,g,j){var k=Ss(h)?Ao:rs.current;return k=Pl(c,k),$l(c,j),h=Up(o,c,h,g,k,j),g=Bp(),o!==null&&!ks?(c.updateQueue=o.updateQueue,c.flags&=-2053,o.lanes&=~j,ma(o,c,j)):($r&&g&&kp(c),c.flags|=1,fs(o,c,h,j),c.child)}function k1(o,c,h,g,j){if(Ss(h)){var k=!0;Wd(c)}else k=!1;if($l(c,j),c.stateNode===null)lf(o,c),f1(c,h,g),Gp(c,h,g,j),g=!0;else if(o===null){var A=c.stateNode,$=c.memoizedProps;A.props=$;var B=A.context,fe=h.contextType;typeof fe=="object"&&fe!==null?fe=oi(fe):(fe=Ss(h)?Ao:rs.current,fe=Pl(c,fe));var Ie=h.getDerivedStateFromProps,De=typeof Ie=="function"||typeof A.getSnapshotBeforeUpdate=="function";De||typeof A.UNSAFE_componentWillReceiveProps!="function"&&typeof A.componentWillReceiveProps!="function"||($!==g||B!==fe)&&h1(c,A,g,fe),Xa=!1;var Te=c.memoizedState;A.state=Te,Qd(c,g,A,j),B=c.memoizedState,$!==g||Te!==B||js.current||Xa?(typeof Ie=="function"&&(Kp(c,h,Ie,g),B=c.memoizedState),($=Xa||d1(c,h,$,g,Te,B,fe))?(De||typeof A.UNSAFE_componentWillMount!="function"&&typeof A.componentWillMount!="function"||(typeof A.componentWillMount=="function"&&A.componentWillMount(),typeof A.UNSAFE_componentWillMount=="function"&&A.UNSAFE_componentWillMount()),typeof A.componentDidMount=="function"&&(c.flags|=4194308)):(typeof A.componentDidMount=="function"&&(c.flags|=4194308),c.memoizedProps=g,c.memoizedState=B),A.props=g,A.state=B,A.context=fe,g=$):(typeof A.componentDidMount=="function"&&(c.flags|=4194308),g=!1)}else{A=c.stateNode,zb(o,c),$=c.memoizedProps,fe=c.type===c.elementType?$:Ci(c.type,$),A.props=fe,De=c.pendingProps,Te=A.context,B=h.contextType,typeof B=="object"&&B!==null?B=oi(B):(B=Ss(h)?Ao:rs.current,B=Pl(c,B));var Ye=h.getDerivedStateFromProps;(Ie=typeof Ye=="function"||typeof A.getSnapshotBeforeUpdate=="function")||typeof A.UNSAFE_componentWillReceiveProps!="function"&&typeof A.componentWillReceiveProps!="function"||($!==De||Te!==B)&&h1(c,A,g,B),Xa=!1,Te=c.memoizedState,A.state=Te,Qd(c,g,A,j);var nt=c.memoizedState;$!==De||Te!==nt||js.current||Xa?(typeof Ye=="function"&&(Kp(c,h,Ye,g),nt=c.memoizedState),(fe=Xa||d1(c,h,fe,g,Te,nt,B)||!1)?(Ie||typeof A.UNSAFE_componentWillUpdate!="function"&&typeof A.componentWillUpdate!="function"||(typeof A.componentWillUpdate=="function"&&A.componentWillUpdate(g,nt,B),typeof A.UNSAFE_componentWillUpdate=="function"&&A.UNSAFE_componentWillUpdate(g,nt,B)),typeof A.componentDidUpdate=="function"&&(c.flags|=4),typeof A.getSnapshotBeforeUpdate=="function"&&(c.flags|=1024)):(typeof A.componentDidUpdate!="function"||$===o.memoizedProps&&Te===o.memoizedState||(c.flags|=4),typeof A.getSnapshotBeforeUpdate!="function"||$===o.memoizedProps&&Te===o.memoizedState||(c.flags|=1024),c.memoizedProps=g,c.memoizedState=nt),A.props=g,A.state=nt,A.context=B,g=fe):(typeof A.componentDidUpdate!="function"||$===o.memoizedProps&&Te===o.memoizedState||(c.flags|=4),typeof A.getSnapshotBeforeUpdate!="function"||$===o.memoizedProps&&Te===o.memoizedState||(c.flags|=1024),g=!1)}return Qp(o,c,h,g,k,j)}function Qp(o,c,h,g,j,k){S1(o,c);var A=(c.flags&128)!==0;if(!g&&!A)return j&&Ab(c,h,!1),ma(o,c,k);g=c.stateNode,k4.current=c;var $=A&&typeof h.getDerivedStateFromError!="function"?null:g.render();return c.flags|=1,o!==null&&A?(c.child=Dl(c,o.child,null,k),c.child=Dl(c,null,$,k)):fs(o,c,$,k),c.memoizedState=g.state,j&&Ab(c,h,!0),c.child}function _1(o){var c=o.stateNode;c.pendingContext?Cb(o,c.pendingContext,c.pendingContext!==c.context):c.context&&Cb(o,c.context,!1),Rp(o,c.containerInfo)}function N1(o,c,h,g,j){return Il(),Ep(j),c.flags|=256,fs(o,c,h,g),c.child}var Zp={dehydrated:null,treeContext:null,retryLane:0};function eg(o){return{baseLanes:o,cachePool:null,transitions:null}}function C1(o,c,h){var g=c.pendingProps,j=Lr.current,k=!1,A=(c.flags&128)!==0,$;if(($=A)||($=o!==null&&o.memoizedState===null?!1:(j&2)!==0),$?(k=!0,c.flags&=-129):(o===null||o.memoizedState!==null)&&(j|=1),br(Lr,j&1),o===null)return Cp(c),o=c.memoizedState,o!==null&&(o=o.dehydrated,o!==null)?((c.mode&1)===0?c.lanes=1:o.data==="$!"?c.lanes=8:c.lanes=1073741824,null):(A=g.children,o=g.fallback,k?(g=c.mode,k=c.child,A={mode:"hidden",children:A},(g&1)===0&&k!==null?(k.childLanes=0,k.pendingProps=A):k=wf(A,g,0,null),o=Lo(o,g,h,null),k.return=c,o.return=c,k.sibling=o,c.child=k,c.child.memoizedState=eg(h),c.memoizedState=Zp,o):tg(c,A));if(j=o.memoizedState,j!==null&&($=j.dehydrated,$!==null))return _4(o,c,A,g,$,j,h);if(k){k=g.fallback,A=c.mode,j=o.child,$=j.sibling;var B={mode:"hidden",children:g.children};return(A&1)===0&&c.child!==j?(g=c.child,g.childLanes=0,g.pendingProps=B,c.deletions=null):(g=so(j,B),g.subtreeFlags=j.subtreeFlags&14680064),$!==null?k=so($,k):(k=Lo(k,A,h,null),k.flags|=2),k.return=c,g.return=c,g.sibling=k,c.child=g,g=k,k=c.child,A=o.child.memoizedState,A=A===null?eg(h):{baseLanes:A.baseLanes|h,cachePool:null,transitions:A.transitions},k.memoizedState=A,k.childLanes=o.childLanes&~h,c.memoizedState=Zp,g}return k=o.child,o=k.sibling,g=so(k,{mode:"visible",children:g.children}),(c.mode&1)===0&&(g.lanes=h),g.return=c,g.sibling=null,o!==null&&(h=c.deletions,h===null?(c.deletions=[o],c.flags|=16):h.push(o)),c.child=g,c.memoizedState=null,g}function tg(o,c){return c=wf({mode:"visible",children:c},o.mode,0,null),c.return=o,o.child=c}function of(o,c,h,g){return g!==null&&Ep(g),Dl(c,o.child,null,h),o=tg(c,c.pendingProps.children),o.flags|=2,c.memoizedState=null,o}function _4(o,c,h,g,j,k,A){if(h)return c.flags&256?(c.flags&=-257,g=Yp(Error(r(422))),of(o,c,A,g)):c.memoizedState!==null?(c.child=o.child,c.flags|=128,null):(k=g.fallback,j=c.mode,g=wf({mode:"visible",children:g.children},j,0,null),k=Lo(k,j,A,null),k.flags|=2,g.return=c,k.return=c,g.sibling=k,c.child=g,(c.mode&1)!==0&&Dl(c,o.child,null,A),c.child.memoizedState=eg(A),c.memoizedState=Zp,k);if((c.mode&1)===0)return of(o,c,A,null);if(j.data==="$!"){if(g=j.nextSibling&&j.nextSibling.dataset,g)var $=g.dgst;return g=$,k=Error(r(419)),g=Yp(k,g,void 0),of(o,c,A,g)}if($=(A&o.childLanes)!==0,ks||$){if(g=In,g!==null){switch(A&-A){case 4:j=2;break;case 16:j=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:j=32;break;case 536870912:j=268435456;break;default:j=0}j=(j&(g.suspendedLanes|A))!==0?0:j,j!==0&&j!==k.retryLane&&(k.retryLane=j,fa(o,j),Pi(g,o,j,-1))}return yg(),g=Yp(Error(r(421))),of(o,c,A,g)}return j.data==="$?"?(c.flags|=128,c.child=o.child,c=F4.bind(null,o),j._reactRetry=c,null):(o=k.treeContext,Us=Ka(j.nextSibling),zs=c,$r=!0,Ni=null,o!==null&&(ii[ai++]=ua,ii[ai++]=da,ii[ai++]=Po,ua=o.id,da=o.overflow,Po=c),c=tg(c,g.children),c.flags|=4096,c)}function E1(o,c,h){o.lanes|=c;var g=o.alternate;g!==null&&(g.lanes|=c),Tp(o.return,c,h)}function rg(o,c,h,g,j){var k=o.memoizedState;k===null?o.memoizedState={isBackwards:c,rendering:null,renderingStartTime:0,last:g,tail:h,tailMode:j}:(k.isBackwards=c,k.rendering=null,k.renderingStartTime=0,k.last=g,k.tail=h,k.tailMode=j)}function A1(o,c,h){var g=c.pendingProps,j=g.revealOrder,k=g.tail;if(fs(o,c,g.children,h),g=Lr.current,(g&2)!==0)g=g&1|2,c.flags|=128;else{if(o!==null&&(o.flags&128)!==0)e:for(o=c.child;o!==null;){if(o.tag===13)o.memoizedState!==null&&E1(o,h,c);else if(o.tag===19)E1(o,h,c);else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===c)break e;for(;o.sibling===null;){if(o.return===null||o.return===c)break e;o=o.return}o.sibling.return=o.return,o=o.sibling}g&=1}if(br(Lr,g),(c.mode&1)===0)c.memoizedState=null;else switch(j){case"forwards":for(h=c.child,j=null;h!==null;)o=h.alternate,o!==null&&Zd(o)===null&&(j=h),h=h.sibling;h=j,h===null?(j=c.child,c.child=null):(j=h.sibling,h.sibling=null),rg(c,!1,j,h,k);break;case"backwards":for(h=null,j=c.child,c.child=null;j!==null;){if(o=j.alternate,o!==null&&Zd(o)===null){c.child=j;break}o=j.sibling,j.sibling=h,h=j,j=o}rg(c,!0,h,null,k);break;case"together":rg(c,!1,null,null,void 0);break;default:c.memoizedState=null}return c.child}function lf(o,c){(c.mode&1)===0&&o!==null&&(o.alternate=null,c.alternate=null,c.flags|=2)}function ma(o,c,h){if(o!==null&&(c.dependencies=o.dependencies),Ro|=c.lanes,(h&c.childLanes)===0)return null;if(o!==null&&c.child!==o.child)throw Error(r(153));if(c.child!==null){for(o=c.child,h=so(o,o.pendingProps),c.child=h,h.return=c;o.sibling!==null;)o=o.sibling,h=h.sibling=so(o,o.pendingProps),h.return=c;h.sibling=null}return c.child}function N4(o,c,h){switch(c.tag){case 3:_1(c),Il();break;case 5:Wb(c);break;case 1:Ss(c.type)&&Wd(c);break;case 4:Rp(c,c.stateNode.containerInfo);break;case 10:var g=c.type._context,j=c.memoizedProps.value;br(Yd,g._currentValue),g._currentValue=j;break;case 13:if(g=c.memoizedState,g!==null)return g.dehydrated!==null?(br(Lr,Lr.current&1),c.flags|=128,null):(h&c.child.childLanes)!==0?C1(o,c,h):(br(Lr,Lr.current&1),o=ma(o,c,h),o!==null?o.sibling:null);br(Lr,Lr.current&1);break;case 19:if(g=(h&c.childLanes)!==0,(o.flags&128)!==0){if(g)return A1(o,c,h);c.flags|=128}if(j=c.memoizedState,j!==null&&(j.rendering=null,j.tail=null,j.lastEffect=null),br(Lr,Lr.current),g)break;return null;case 22:case 23:return c.lanes=0,j1(o,c,h)}return ma(o,c,h)}var P1,ng,O1,T1;P1=function(o,c){for(var h=c.child;h!==null;){if(h.tag===5||h.tag===6)o.appendChild(h.stateNode);else if(h.tag!==4&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===c)break;for(;h.sibling===null;){if(h.return===null||h.return===c)return;h=h.return}h.sibling.return=h.return,h=h.sibling}},ng=function(){},O1=function(o,c,h,g){var j=o.memoizedProps;if(j!==g){o=c.stateNode,Io(Ki.current);var k=null;switch(h){case"input":j=Je(o,j),g=Je(o,g),k=[];break;case"select":j=me({},j,{value:void 0}),g=me({},g,{value:void 0}),k=[];break;case"textarea":j=ce(o,j),g=ce(o,g),k=[];break;default:typeof j.onClick!="function"&&typeof g.onClick=="function"&&(o.onclick=zd)}ar(h,g);var A;h=null;for(fe in j)if(!g.hasOwnProperty(fe)&&j.hasOwnProperty(fe)&&j[fe]!=null)if(fe==="style"){var $=j[fe];for(A in $)$.hasOwnProperty(A)&&(h||(h={}),h[A]="")}else fe!=="dangerouslySetInnerHTML"&&fe!=="children"&&fe!=="suppressContentEditableWarning"&&fe!=="suppressHydrationWarning"&&fe!=="autoFocus"&&(s.hasOwnProperty(fe)?k||(k=[]):(k=k||[]).push(fe,null));for(fe in g){var B=g[fe];if($=j!=null?j[fe]:void 0,g.hasOwnProperty(fe)&&B!==$&&(B!=null||$!=null))if(fe==="style")if($){for(A in $)!$.hasOwnProperty(A)||B&&B.hasOwnProperty(A)||(h||(h={}),h[A]="");for(A in B)B.hasOwnProperty(A)&&$[A]!==B[A]&&(h||(h={}),h[A]=B[A])}else h||(k||(k=[]),k.push(fe,h)),h=B;else fe==="dangerouslySetInnerHTML"?(B=B?B.__html:void 0,$=$?$.__html:void 0,B!=null&&$!==B&&(k=k||[]).push(fe,B)):fe==="children"?typeof B!="string"&&typeof B!="number"||(k=k||[]).push(fe,""+B):fe!=="suppressContentEditableWarning"&&fe!=="suppressHydrationWarning"&&(s.hasOwnProperty(fe)?(B!=null&&fe==="onScroll"&&Er("scroll",o),k||$===B||(k=[])):(k=k||[]).push(fe,B))}h&&(k=k||[]).push("style",h);var fe=k;(c.updateQueue=fe)&&(c.flags|=4)}},T1=function(o,c,h,g){h!==g&&(c.flags|=4)};function mu(o,c){if(!$r)switch(o.tailMode){case"hidden":c=o.tail;for(var h=null;c!==null;)c.alternate!==null&&(h=c),c=c.sibling;h===null?o.tail=null:h.sibling=null;break;case"collapsed":h=o.tail;for(var g=null;h!==null;)h.alternate!==null&&(g=h),h=h.sibling;g===null?c||o.tail===null?o.tail=null:o.tail.sibling=null:g.sibling=null}}function ss(o){var c=o.alternate!==null&&o.alternate.child===o.child,h=0,g=0;if(c)for(var j=o.child;j!==null;)h|=j.lanes|j.childLanes,g|=j.subtreeFlags&14680064,g|=j.flags&14680064,j.return=o,j=j.sibling;else for(j=o.child;j!==null;)h|=j.lanes|j.childLanes,g|=j.subtreeFlags,g|=j.flags,j.return=o,j=j.sibling;return o.subtreeFlags|=g,o.childLanes=h,c}function C4(o,c,h){var g=c.pendingProps;switch(_p(c),c.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ss(c),null;case 1:return Ss(c.type)&&Bd(),ss(c),null;case 3:return g=c.stateNode,Ml(),Ar(js),Ar(rs),Fp(),g.pendingContext&&(g.context=g.pendingContext,g.pendingContext=null),(o===null||o.child===null)&&(Kd(c)?c.flags|=4:o===null||o.memoizedState.isDehydrated&&(c.flags&256)===0||(c.flags|=1024,Ni!==null&&(mg(Ni),Ni=null))),ng(o,c),ss(c),null;case 5:$p(c);var j=Io(cu.current);if(h=c.type,o!==null&&c.stateNode!=null)O1(o,c,h,g,j),o.ref!==c.ref&&(c.flags|=512,c.flags|=2097152);else{if(!g){if(c.stateNode===null)throw Error(r(166));return ss(c),null}if(o=Io(Ki.current),Kd(c)){g=c.stateNode,h=c.type;var k=c.memoizedProps;switch(g[Hi]=c,g[su]=k,o=(c.mode&1)!==0,h){case"dialog":Er("cancel",g),Er("close",g);break;case"iframe":case"object":case"embed":Er("load",g);break;case"video":case"audio":for(j=0;j<tu.length;j++)Er(tu[j],g);break;case"source":Er("error",g);break;case"img":case"image":case"link":Er("error",g),Er("load",g);break;case"details":Er("toggle",g);break;case"input":gt(g,k),Er("invalid",g);break;case"select":g._wrapperState={wasMultiple:!!k.multiple},Er("invalid",g);break;case"textarea":je(g,k),Er("invalid",g)}ar(h,k),j=null;for(var A in k)if(k.hasOwnProperty(A)){var $=k[A];A==="children"?typeof $=="string"?g.textContent!==$&&(k.suppressHydrationWarning!==!0&&Ld(g.textContent,$,o),j=["children",$]):typeof $=="number"&&g.textContent!==""+$&&(k.suppressHydrationWarning!==!0&&Ld(g.textContent,$,o),j=["children",""+$]):s.hasOwnProperty(A)&&$!=null&&A==="onScroll"&&Er("scroll",g)}switch(h){case"input":Ge(g),Dt(g,k,!0);break;case"textarea":Ge(g),Se(g);break;case"select":case"option":break;default:typeof k.onClick=="function"&&(g.onclick=zd)}g=j,c.updateQueue=g,g!==null&&(c.flags|=4)}else{A=j.nodeType===9?j:j.ownerDocument,o==="http://www.w3.org/1999/xhtml"&&(o=qe(h)),o==="http://www.w3.org/1999/xhtml"?h==="script"?(o=A.createElement("div"),o.innerHTML="<script><\/script>",o=o.removeChild(o.firstChild)):typeof g.is=="string"?o=A.createElement(h,{is:g.is}):(o=A.createElement(h),h==="select"&&(A=o,g.multiple?A.multiple=!0:g.size&&(A.size=g.size))):o=A.createElementNS(o,h),o[Hi]=c,o[su]=g,P1(o,c,!1,!1),c.stateNode=o;e:{switch(A=Ur(h,g),h){case"dialog":Er("cancel",o),Er("close",o),j=g;break;case"iframe":case"object":case"embed":Er("load",o),j=g;break;case"video":case"audio":for(j=0;j<tu.length;j++)Er(tu[j],o);j=g;break;case"source":Er("error",o),j=g;break;case"img":case"image":case"link":Er("error",o),Er("load",o),j=g;break;case"details":Er("toggle",o),j=g;break;case"input":gt(o,g),j=Je(o,g),Er("invalid",o);break;case"option":j=g;break;case"select":o._wrapperState={wasMultiple:!!g.multiple},j=me({},g,{value:void 0}),Er("invalid",o);break;case"textarea":je(o,g),j=ce(o,g),Er("invalid",o);break;default:j=g}ar(h,j),$=j;for(k in $)if($.hasOwnProperty(k)){var B=$[k];k==="style"?zt(o,B):k==="dangerouslySetInnerHTML"?(B=B?B.__html:void 0,B!=null&&Ft(o,B)):k==="children"?typeof B=="string"?(h!=="textarea"||B!=="")&&hr(o,B):typeof B=="number"&&hr(o,""+B):k!=="suppressContentEditableWarning"&&k!=="suppressHydrationWarning"&&k!=="autoFocus"&&(s.hasOwnProperty(k)?B!=null&&k==="onScroll"&&Er("scroll",o):B!=null&&C(o,k,B,A))}switch(h){case"input":Ge(o),Dt(o,g,!1);break;case"textarea":Ge(o),Se(o);break;case"option":g.value!=null&&o.setAttribute("value",""+le(g.value));break;case"select":o.multiple=!!g.multiple,k=g.value,k!=null?Y(o,!!g.multiple,k,!1):g.defaultValue!=null&&Y(o,!!g.multiple,g.defaultValue,!0);break;default:typeof j.onClick=="function"&&(o.onclick=zd)}switch(h){case"button":case"input":case"select":case"textarea":g=!!g.autoFocus;break e;case"img":g=!0;break e;default:g=!1}}g&&(c.flags|=4)}c.ref!==null&&(c.flags|=512,c.flags|=2097152)}return ss(c),null;case 6:if(o&&c.stateNode!=null)T1(o,c,o.memoizedProps,g);else{if(typeof g!="string"&&c.stateNode===null)throw Error(r(166));if(h=Io(cu.current),Io(Ki.current),Kd(c)){if(g=c.stateNode,h=c.memoizedProps,g[Hi]=c,(k=g.nodeValue!==h)&&(o=zs,o!==null))switch(o.tag){case 3:Ld(g.nodeValue,h,(o.mode&1)!==0);break;case 5:o.memoizedProps.suppressHydrationWarning!==!0&&Ld(g.nodeValue,h,(o.mode&1)!==0)}k&&(c.flags|=4)}else g=(h.nodeType===9?h:h.ownerDocument).createTextNode(g),g[Hi]=c,c.stateNode=g}return ss(c),null;case 13:if(Ar(Lr),g=c.memoizedState,o===null||o.memoizedState!==null&&o.memoizedState.dehydrated!==null){if($r&&Us!==null&&(c.mode&1)!==0&&(c.flags&128)===0)Rb(),Il(),c.flags|=98560,k=!1;else if(k=Kd(c),g!==null&&g.dehydrated!==null){if(o===null){if(!k)throw Error(r(318));if(k=c.memoizedState,k=k!==null?k.dehydrated:null,!k)throw Error(r(317));k[Hi]=c}else Il(),(c.flags&128)===0&&(c.memoizedState=null),c.flags|=4;ss(c),k=!1}else Ni!==null&&(mg(Ni),Ni=null),k=!0;if(!k)return c.flags&65536?c:null}return(c.flags&128)!==0?(c.lanes=h,c):(g=g!==null,g!==(o!==null&&o.memoizedState!==null)&&g&&(c.child.flags|=8192,(c.mode&1)!==0&&(o===null||(Lr.current&1)!==0?wn===0&&(wn=3):yg())),c.updateQueue!==null&&(c.flags|=4),ss(c),null);case 4:return Ml(),ng(o,c),o===null&&ru(c.stateNode.containerInfo),ss(c),null;case 10:return Op(c.type._context),ss(c),null;case 17:return Ss(c.type)&&Bd(),ss(c),null;case 19:if(Ar(Lr),k=c.memoizedState,k===null)return ss(c),null;if(g=(c.flags&128)!==0,A=k.rendering,A===null)if(g)mu(k,!1);else{if(wn!==0||o!==null&&(o.flags&128)!==0)for(o=c.child;o!==null;){if(A=Zd(o),A!==null){for(c.flags|=128,mu(k,!1),g=A.updateQueue,g!==null&&(c.updateQueue=g,c.flags|=4),c.subtreeFlags=0,g=h,h=c.child;h!==null;)k=h,o=g,k.flags&=14680066,A=k.alternate,A===null?(k.childLanes=0,k.lanes=o,k.child=null,k.subtreeFlags=0,k.memoizedProps=null,k.memoizedState=null,k.updateQueue=null,k.dependencies=null,k.stateNode=null):(k.childLanes=A.childLanes,k.lanes=A.lanes,k.child=A.child,k.subtreeFlags=0,k.deletions=null,k.memoizedProps=A.memoizedProps,k.memoizedState=A.memoizedState,k.updateQueue=A.updateQueue,k.type=A.type,o=A.dependencies,k.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext}),h=h.sibling;return br(Lr,Lr.current&1|2),c.child}o=o.sibling}k.tail!==null&&Vt()>Ul&&(c.flags|=128,g=!0,mu(k,!1),c.lanes=4194304)}else{if(!g)if(o=Zd(A),o!==null){if(c.flags|=128,g=!0,h=o.updateQueue,h!==null&&(c.updateQueue=h,c.flags|=4),mu(k,!0),k.tail===null&&k.tailMode==="hidden"&&!A.alternate&&!$r)return ss(c),null}else 2*Vt()-k.renderingStartTime>Ul&&h!==1073741824&&(c.flags|=128,g=!0,mu(k,!1),c.lanes=4194304);k.isBackwards?(A.sibling=c.child,c.child=A):(h=k.last,h!==null?h.sibling=A:c.child=A,k.last=A)}return k.tail!==null?(c=k.tail,k.rendering=c,k.tail=c.sibling,k.renderingStartTime=Vt(),c.sibling=null,h=Lr.current,br(Lr,g?h&1|2:h&1),c):(ss(c),null);case 22:case 23:return gg(),g=c.memoizedState!==null,o!==null&&o.memoizedState!==null!==g&&(c.flags|=8192),g&&(c.mode&1)!==0?(Bs&1073741824)!==0&&(ss(c),c.subtreeFlags&6&&(c.flags|=8192)):ss(c),null;case 24:return null;case 25:return null}throw Error(r(156,c.tag))}function E4(o,c){switch(_p(c),c.tag){case 1:return Ss(c.type)&&Bd(),o=c.flags,o&65536?(c.flags=o&-65537|128,c):null;case 3:return Ml(),Ar(js),Ar(rs),Fp(),o=c.flags,(o&65536)!==0&&(o&128)===0?(c.flags=o&-65537|128,c):null;case 5:return $p(c),null;case 13:if(Ar(Lr),o=c.memoizedState,o!==null&&o.dehydrated!==null){if(c.alternate===null)throw Error(r(340));Il()}return o=c.flags,o&65536?(c.flags=o&-65537|128,c):null;case 19:return Ar(Lr),null;case 4:return Ml(),null;case 10:return Op(c.type._context),null;case 22:case 23:return gg(),null;case 24:return null;default:return null}}var cf=!1,is=!1,A4=typeof WeakSet=="function"?WeakSet:Set,Ze=null;function Ll(o,c){var h=o.ref;if(h!==null)if(typeof h=="function")try{h(null)}catch(g){Kr(o,c,g)}else h.current=null}function sg(o,c,h){try{h()}catch(g){Kr(o,c,g)}}var I1=!1;function P4(o,c){if(gp=No,o=db(),lp(o)){if("selectionStart"in o)var h={start:o.selectionStart,end:o.selectionEnd};else e:{h=(h=o.ownerDocument)&&h.defaultView||window;var g=h.getSelection&&h.getSelection();if(g&&g.rangeCount!==0){h=g.anchorNode;var j=g.anchorOffset,k=g.focusNode;g=g.focusOffset;try{h.nodeType,k.nodeType}catch{h=null;break e}var A=0,$=-1,B=-1,fe=0,Ie=0,De=o,Te=null;t:for(;;){for(var Ye;De!==h||j!==0&&De.nodeType!==3||($=A+j),De!==k||g!==0&&De.nodeType!==3||(B=A+g),De.nodeType===3&&(A+=De.nodeValue.length),(Ye=De.firstChild)!==null;)Te=De,De=Ye;for(;;){if(De===o)break t;if(Te===h&&++fe===j&&($=A),Te===k&&++Ie===g&&(B=A),(Ye=De.nextSibling)!==null)break;De=Te,Te=De.parentNode}De=Ye}h=$===-1||B===-1?null:{start:$,end:B}}else h=null}h=h||{start:0,end:0}}else h=null;for(yp={focusedElem:o,selectionRange:h},No=!1,Ze=c;Ze!==null;)if(c=Ze,o=c.child,(c.subtreeFlags&1028)!==0&&o!==null)o.return=c,Ze=o;else for(;Ze!==null;){c=Ze;try{var nt=c.alternate;if((c.flags&1024)!==0)switch(c.tag){case 0:case 11:case 15:break;case 1:if(nt!==null){var it=nt.memoizedProps,Xr=nt.memoizedState,se=c.stateNode,K=se.getSnapshotBeforeUpdate(c.elementType===c.type?it:Ci(c.type,it),Xr);se.__reactInternalSnapshotBeforeUpdate=K}break;case 3:var ae=c.stateNode.containerInfo;ae.nodeType===1?ae.textContent="":ae.nodeType===9&&ae.documentElement&&ae.removeChild(ae.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(r(163))}}catch(Fe){Kr(c,c.return,Fe)}if(o=c.sibling,o!==null){o.return=c.return,Ze=o;break}Ze=c.return}return nt=I1,I1=!1,nt}function pu(o,c,h){var g=c.updateQueue;if(g=g!==null?g.lastEffect:null,g!==null){var j=g=g.next;do{if((j.tag&o)===o){var k=j.destroy;j.destroy=void 0,k!==void 0&&sg(c,h,k)}j=j.next}while(j!==g)}}function uf(o,c){if(c=c.updateQueue,c=c!==null?c.lastEffect:null,c!==null){var h=c=c.next;do{if((h.tag&o)===o){var g=h.create;h.destroy=g()}h=h.next}while(h!==c)}}function ig(o){var c=o.ref;if(c!==null){var h=o.stateNode;switch(o.tag){case 5:o=h;break;default:o=h}typeof c=="function"?c(o):c.current=o}}function D1(o){var c=o.alternate;c!==null&&(o.alternate=null,D1(c)),o.child=null,o.deletions=null,o.sibling=null,o.tag===5&&(c=o.stateNode,c!==null&&(delete c[Hi],delete c[su],delete c[bp],delete c[f4],delete c[h4])),o.stateNode=null,o.return=null,o.dependencies=null,o.memoizedProps=null,o.memoizedState=null,o.pendingProps=null,o.stateNode=null,o.updateQueue=null}function R1(o){return o.tag===5||o.tag===3||o.tag===4}function $1(o){e:for(;;){for(;o.sibling===null;){if(o.return===null||R1(o.return))return null;o=o.return}for(o.sibling.return=o.return,o=o.sibling;o.tag!==5&&o.tag!==6&&o.tag!==18;){if(o.flags&2||o.child===null||o.tag===4)continue e;o.child.return=o,o=o.child}if(!(o.flags&2))return o.stateNode}}function ag(o,c,h){var g=o.tag;if(g===5||g===6)o=o.stateNode,c?h.nodeType===8?h.parentNode.insertBefore(o,c):h.insertBefore(o,c):(h.nodeType===8?(c=h.parentNode,c.insertBefore(o,h)):(c=h,c.appendChild(o)),h=h._reactRootContainer,h!=null||c.onclick!==null||(c.onclick=zd));else if(g!==4&&(o=o.child,o!==null))for(ag(o,c,h),o=o.sibling;o!==null;)ag(o,c,h),o=o.sibling}function og(o,c,h){var g=o.tag;if(g===5||g===6)o=o.stateNode,c?h.insertBefore(o,c):h.appendChild(o);else if(g!==4&&(o=o.child,o!==null))for(og(o,c,h),o=o.sibling;o!==null;)og(o,c,h),o=o.sibling}var qn=null,Ei=!1;function Za(o,c,h){for(h=h.child;h!==null;)M1(o,c,h),h=h.sibling}function M1(o,c,h){if(yt&&typeof yt.onCommitFiberUnmount=="function")try{yt.onCommitFiberUnmount(At,h)}catch{}switch(h.tag){case 5:is||Ll(h,c);case 6:var g=qn,j=Ei;qn=null,Za(o,c,h),qn=g,Ei=j,qn!==null&&(Ei?(o=qn,h=h.stateNode,o.nodeType===8?o.parentNode.removeChild(h):o.removeChild(h)):qn.removeChild(h.stateNode));break;case 18:qn!==null&&(Ei?(o=qn,h=h.stateNode,o.nodeType===8?wp(o.parentNode,h):o.nodeType===1&&wp(o,h),ds(o)):wp(qn,h.stateNode));break;case 4:g=qn,j=Ei,qn=h.stateNode.containerInfo,Ei=!0,Za(o,c,h),qn=g,Ei=j;break;case 0:case 11:case 14:case 15:if(!is&&(g=h.updateQueue,g!==null&&(g=g.lastEffect,g!==null))){j=g=g.next;do{var k=j,A=k.destroy;k=k.tag,A!==void 0&&((k&2)!==0||(k&4)!==0)&&sg(h,c,A),j=j.next}while(j!==g)}Za(o,c,h);break;case 1:if(!is&&(Ll(h,c),g=h.stateNode,typeof g.componentWillUnmount=="function"))try{g.props=h.memoizedProps,g.state=h.memoizedState,g.componentWillUnmount()}catch($){Kr(h,c,$)}Za(o,c,h);break;case 21:Za(o,c,h);break;case 22:h.mode&1?(is=(g=is)||h.memoizedState!==null,Za(o,c,h),is=g):Za(o,c,h);break;default:Za(o,c,h)}}function F1(o){var c=o.updateQueue;if(c!==null){o.updateQueue=null;var h=o.stateNode;h===null&&(h=o.stateNode=new A4),c.forEach(function(g){var j=L4.bind(null,o,g);h.has(g)||(h.add(g),g.then(j,j))})}}function Ai(o,c){var h=c.deletions;if(h!==null)for(var g=0;g<h.length;g++){var j=h[g];try{var k=o,A=c,$=A;e:for(;$!==null;){switch($.tag){case 5:qn=$.stateNode,Ei=!1;break e;case 3:qn=$.stateNode.containerInfo,Ei=!0;break e;case 4:qn=$.stateNode.containerInfo,Ei=!0;break e}$=$.return}if(qn===null)throw Error(r(160));M1(k,A,j),qn=null,Ei=!1;var B=j.alternate;B!==null&&(B.return=null),j.return=null}catch(fe){Kr(j,c,fe)}}if(c.subtreeFlags&12854)for(c=c.child;c!==null;)L1(c,o),c=c.sibling}function L1(o,c){var h=o.alternate,g=o.flags;switch(o.tag){case 0:case 11:case 14:case 15:if(Ai(c,o),Yi(o),g&4){try{pu(3,o,o.return),uf(3,o)}catch(it){Kr(o,o.return,it)}try{pu(5,o,o.return)}catch(it){Kr(o,o.return,it)}}break;case 1:Ai(c,o),Yi(o),g&512&&h!==null&&Ll(h,h.return);break;case 5:if(Ai(c,o),Yi(o),g&512&&h!==null&&Ll(h,h.return),o.flags&32){var j=o.stateNode;try{hr(j,"")}catch(it){Kr(o,o.return,it)}}if(g&4&&(j=o.stateNode,j!=null)){var k=o.memoizedProps,A=h!==null?h.memoizedProps:k,$=o.type,B=o.updateQueue;if(o.updateQueue=null,B!==null)try{$==="input"&&k.type==="radio"&&k.name!=null&&_t(j,k),Ur($,A);var fe=Ur($,k);for(A=0;A<B.length;A+=2){var Ie=B[A],De=B[A+1];Ie==="style"?zt(j,De):Ie==="dangerouslySetInnerHTML"?Ft(j,De):Ie==="children"?hr(j,De):C(j,Ie,De,fe)}switch($){case"input":Mt(j,k);break;case"textarea":pe(j,k);break;case"select":var Te=j._wrapperState.wasMultiple;j._wrapperState.wasMultiple=!!k.multiple;var Ye=k.value;Ye!=null?Y(j,!!k.multiple,Ye,!1):Te!==!!k.multiple&&(k.defaultValue!=null?Y(j,!!k.multiple,k.defaultValue,!0):Y(j,!!k.multiple,k.multiple?[]:"",!1))}j[su]=k}catch(it){Kr(o,o.return,it)}}break;case 6:if(Ai(c,o),Yi(o),g&4){if(o.stateNode===null)throw Error(r(162));j=o.stateNode,k=o.memoizedProps;try{j.nodeValue=k}catch(it){Kr(o,o.return,it)}}break;case 3:if(Ai(c,o),Yi(o),g&4&&h!==null&&h.memoizedState.isDehydrated)try{ds(c.containerInfo)}catch(it){Kr(o,o.return,it)}break;case 4:Ai(c,o),Yi(o);break;case 13:Ai(c,o),Yi(o),j=o.child,j.flags&8192&&(k=j.memoizedState!==null,j.stateNode.isHidden=k,!k||j.alternate!==null&&j.alternate.memoizedState!==null||(ug=Vt())),g&4&&F1(o);break;case 22:if(Ie=h!==null&&h.memoizedState!==null,o.mode&1?(is=(fe=is)||Ie,Ai(c,o),is=fe):Ai(c,o),Yi(o),g&8192){if(fe=o.memoizedState!==null,(o.stateNode.isHidden=fe)&&!Ie&&(o.mode&1)!==0)for(Ze=o,Ie=o.child;Ie!==null;){for(De=Ze=Ie;Ze!==null;){switch(Te=Ze,Ye=Te.child,Te.tag){case 0:case 11:case 14:case 15:pu(4,Te,Te.return);break;case 1:Ll(Te,Te.return);var nt=Te.stateNode;if(typeof nt.componentWillUnmount=="function"){g=Te,h=Te.return;try{c=g,nt.props=c.memoizedProps,nt.state=c.memoizedState,nt.componentWillUnmount()}catch(it){Kr(g,h,it)}}break;case 5:Ll(Te,Te.return);break;case 22:if(Te.memoizedState!==null){B1(De);continue}}Ye!==null?(Ye.return=Te,Ze=Ye):B1(De)}Ie=Ie.sibling}e:for(Ie=null,De=o;;){if(De.tag===5){if(Ie===null){Ie=De;try{j=De.stateNode,fe?(k=j.style,typeof k.setProperty=="function"?k.setProperty("display","none","important"):k.display="none"):($=De.stateNode,B=De.memoizedProps.style,A=B!=null&&B.hasOwnProperty("display")?B.display:null,$.style.display=Dr("display",A))}catch(it){Kr(o,o.return,it)}}}else if(De.tag===6){if(Ie===null)try{De.stateNode.nodeValue=fe?"":De.memoizedProps}catch(it){Kr(o,o.return,it)}}else if((De.tag!==22&&De.tag!==23||De.memoizedState===null||De===o)&&De.child!==null){De.child.return=De,De=De.child;continue}if(De===o)break e;for(;De.sibling===null;){if(De.return===null||De.return===o)break e;Ie===De&&(Ie=null),De=De.return}Ie===De&&(Ie=null),De.sibling.return=De.return,De=De.sibling}}break;case 19:Ai(c,o),Yi(o),g&4&&F1(o);break;case 21:break;default:Ai(c,o),Yi(o)}}function Yi(o){var c=o.flags;if(c&2){try{e:{for(var h=o.return;h!==null;){if(R1(h)){var g=h;break e}h=h.return}throw Error(r(160))}switch(g.tag){case 5:var j=g.stateNode;g.flags&32&&(hr(j,""),g.flags&=-33);var k=$1(o);og(o,k,j);break;case 3:case 4:var A=g.stateNode.containerInfo,$=$1(o);ag(o,$,A);break;default:throw Error(r(161))}}catch(B){Kr(o,o.return,B)}o.flags&=-3}c&4096&&(o.flags&=-4097)}function O4(o,c,h){Ze=o,z1(o)}function z1(o,c,h){for(var g=(o.mode&1)!==0;Ze!==null;){var j=Ze,k=j.child;if(j.tag===22&&g){var A=j.memoizedState!==null||cf;if(!A){var $=j.alternate,B=$!==null&&$.memoizedState!==null||is;$=cf;var fe=is;if(cf=A,(is=B)&&!fe)for(Ze=j;Ze!==null;)A=Ze,B=A.child,A.tag===22&&A.memoizedState!==null?W1(j):B!==null?(B.return=A,Ze=B):W1(j);for(;k!==null;)Ze=k,z1(k),k=k.sibling;Ze=j,cf=$,is=fe}U1(o)}else(j.subtreeFlags&8772)!==0&&k!==null?(k.return=j,Ze=k):U1(o)}}function U1(o){for(;Ze!==null;){var c=Ze;if((c.flags&8772)!==0){var h=c.alternate;try{if((c.flags&8772)!==0)switch(c.tag){case 0:case 11:case 15:is||uf(5,c);break;case 1:var g=c.stateNode;if(c.flags&4&&!is)if(h===null)g.componentDidMount();else{var j=c.elementType===c.type?h.memoizedProps:Ci(c.type,h.memoizedProps);g.componentDidUpdate(j,h.memoizedState,g.__reactInternalSnapshotBeforeUpdate)}var k=c.updateQueue;k!==null&&Bb(c,k,g);break;case 3:var A=c.updateQueue;if(A!==null){if(h=null,c.child!==null)switch(c.child.tag){case 5:h=c.child.stateNode;break;case 1:h=c.child.stateNode}Bb(c,A,h)}break;case 5:var $=c.stateNode;if(h===null&&c.flags&4){h=$;var B=c.memoizedProps;switch(c.type){case"button":case"input":case"select":case"textarea":B.autoFocus&&h.focus();break;case"img":B.src&&(h.src=B.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(c.memoizedState===null){var fe=c.alternate;if(fe!==null){var Ie=fe.memoizedState;if(Ie!==null){var De=Ie.dehydrated;De!==null&&ds(De)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(r(163))}is||c.flags&512&&ig(c)}catch(Te){Kr(c,c.return,Te)}}if(c===o){Ze=null;break}if(h=c.sibling,h!==null){h.return=c.return,Ze=h;break}Ze=c.return}}function B1(o){for(;Ze!==null;){var c=Ze;if(c===o){Ze=null;break}var h=c.sibling;if(h!==null){h.return=c.return,Ze=h;break}Ze=c.return}}function W1(o){for(;Ze!==null;){var c=Ze;try{switch(c.tag){case 0:case 11:case 15:var h=c.return;try{uf(4,c)}catch(B){Kr(c,h,B)}break;case 1:var g=c.stateNode;if(typeof g.componentDidMount=="function"){var j=c.return;try{g.componentDidMount()}catch(B){Kr(c,j,B)}}var k=c.return;try{ig(c)}catch(B){Kr(c,k,B)}break;case 5:var A=c.return;try{ig(c)}catch(B){Kr(c,A,B)}}}catch(B){Kr(c,c.return,B)}if(c===o){Ze=null;break}var $=c.sibling;if($!==null){$.return=c.return,Ze=$;break}Ze=c.return}}var T4=Math.ceil,df=O.ReactCurrentDispatcher,lg=O.ReactCurrentOwner,ci=O.ReactCurrentBatchConfig,Jt=0,In=null,un=null,Hn=0,Bs=0,zl=Ga(0),wn=0,gu=null,Ro=0,ff=0,cg=0,yu=null,_s=null,ug=0,Ul=1/0,pa=null,hf=!1,dg=null,eo=null,mf=!1,to=null,pf=0,vu=0,fg=null,gf=-1,yf=0;function hs(){return(Jt&6)!==0?Vt():gf!==-1?gf:gf=Vt()}function ro(o){return(o.mode&1)===0?1:(Jt&2)!==0&&Hn!==0?Hn&-Hn:p4.transition!==null?(yf===0&&(yf=Si()),yf):(o=ue,o!==0||(o=window.event,o=o===void 0?16:J(o.type)),o)}function Pi(o,c,h,g){if(50<vu)throw vu=0,fg=null,Error(r(185));si(o,h,g),((Jt&2)===0||o!==In)&&(o===In&&((Jt&2)===0&&(ff|=h),wn===4&&no(o,Hn)),Ns(o,g),h===1&&Jt===0&&(c.mode&1)===0&&(Ul=Vt()+500,Vd&&Ja()))}function Ns(o,c){var h=o.callbackNode;ji(o,c);var g=Fs(o,o===In?Hn:0);if(g===0)h!==null&&Pn(h),o.callbackNode=null,o.callbackPriority=0;else if(c=g&-g,o.callbackPriority!==c){if(h!=null&&Pn(h),c===1)o.tag===0?m4(q1.bind(null,o)):Pb(q1.bind(null,o)),u4(function(){(Jt&6)===0&&Ja()}),h=null;else{switch(Me(g)){case 1:h=we;break;case 4:h=$e;break;case 16:h=Oe;break;case 536870912:h=Ve;break;default:h=Oe}h=Z1(h,V1.bind(null,o))}o.callbackPriority=c,o.callbackNode=h}}function V1(o,c){if(gf=-1,yf=0,(Jt&6)!==0)throw Error(r(327));var h=o.callbackNode;if(Bl()&&o.callbackNode!==h)return null;var g=Fs(o,o===In?Hn:0);if(g===0)return null;if((g&30)!==0||(g&o.expiredLanes)!==0||c)c=vf(o,g);else{c=g;var j=Jt;Jt|=2;var k=K1();(In!==o||Hn!==c)&&(pa=null,Ul=Vt()+500,Mo(o,c));do try{R4();break}catch($){H1(o,$)}while(!0);Pp(),df.current=k,Jt=j,un!==null?c=0:(In=null,Hn=0,c=wn)}if(c!==0){if(c===2&&(j=Vi(o),j!==0&&(g=j,c=hg(o,j))),c===1)throw h=gu,Mo(o,0),no(o,g),Ns(o,Vt()),h;if(c===6)no(o,g);else{if(j=o.current.alternate,(g&30)===0&&!I4(j)&&(c=vf(o,g),c===2&&(k=Vi(o),k!==0&&(g=k,c=hg(o,k))),c===1))throw h=gu,Mo(o,0),no(o,g),Ns(o,Vt()),h;switch(o.finishedWork=j,o.finishedLanes=g,c){case 0:case 1:throw Error(r(345));case 2:Fo(o,_s,pa);break;case 3:if(no(o,g),(g&130023424)===g&&(c=ug+500-Vt(),10<c)){if(Fs(o,0)!==0)break;if(j=o.suspendedLanes,(j&g)!==g){hs(),o.pingedLanes|=o.suspendedLanes&j;break}o.timeoutHandle=xp(Fo.bind(null,o,_s,pa),c);break}Fo(o,_s,pa);break;case 4:if(no(o,g),(g&4194240)===g)break;for(c=o.eventTimes,j=-1;0<g;){var A=31-Le(g);k=1<<A,A=c[A],A>j&&(j=A),g&=~k}if(g=j,g=Vt()-g,g=(120>g?120:480>g?480:1080>g?1080:1920>g?1920:3e3>g?3e3:4320>g?4320:1960*T4(g/1960))-g,10<g){o.timeoutHandle=xp(Fo.bind(null,o,_s,pa),g);break}Fo(o,_s,pa);break;case 5:Fo(o,_s,pa);break;default:throw Error(r(329))}}}return Ns(o,Vt()),o.callbackNode===h?V1.bind(null,o):null}function hg(o,c){var h=yu;return o.current.memoizedState.isDehydrated&&(Mo(o,c).flags|=256),o=vf(o,c),o!==2&&(c=_s,_s=h,c!==null&&mg(c)),o}function mg(o){_s===null?_s=o:_s.push.apply(_s,o)}function I4(o){for(var c=o;;){if(c.flags&16384){var h=c.updateQueue;if(h!==null&&(h=h.stores,h!==null))for(var g=0;g<h.length;g++){var j=h[g],k=j.getSnapshot;j=j.value;try{if(!_i(k(),j))return!1}catch{return!1}}}if(h=c.child,c.subtreeFlags&16384&&h!==null)h.return=c,c=h;else{if(c===o)break;for(;c.sibling===null;){if(c.return===null||c.return===o)return!0;c=c.return}c.sibling.return=c.return,c=c.sibling}}return!0}function no(o,c){for(c&=~cg,c&=~ff,o.suspendedLanes|=c,o.pingedLanes&=~c,o=o.expirationTimes;0<c;){var h=31-Le(c),g=1<<h;o[h]=-1,c&=~g}}function q1(o){if((Jt&6)!==0)throw Error(r(327));Bl();var c=Fs(o,0);if((c&1)===0)return Ns(o,Vt()),null;var h=vf(o,c);if(o.tag!==0&&h===2){var g=Vi(o);g!==0&&(c=g,h=hg(o,g))}if(h===1)throw h=gu,Mo(o,0),no(o,c),Ns(o,Vt()),h;if(h===6)throw Error(r(345));return o.finishedWork=o.current.alternate,o.finishedLanes=c,Fo(o,_s,pa),Ns(o,Vt()),null}function pg(o,c){var h=Jt;Jt|=1;try{return o(c)}finally{Jt=h,Jt===0&&(Ul=Vt()+500,Vd&&Ja())}}function $o(o){to!==null&&to.tag===0&&(Jt&6)===0&&Bl();var c=Jt;Jt|=1;var h=ci.transition,g=ue;try{if(ci.transition=null,ue=1,o)return o()}finally{ue=g,ci.transition=h,Jt=c,(Jt&6)===0&&Ja()}}function gg(){Bs=zl.current,Ar(zl)}function Mo(o,c){o.finishedWork=null,o.finishedLanes=0;var h=o.timeoutHandle;if(h!==-1&&(o.timeoutHandle=-1,c4(h)),un!==null)for(h=un.return;h!==null;){var g=h;switch(_p(g),g.tag){case 1:g=g.type.childContextTypes,g!=null&&Bd();break;case 3:Ml(),Ar(js),Ar(rs),Fp();break;case 5:$p(g);break;case 4:Ml();break;case 13:Ar(Lr);break;case 19:Ar(Lr);break;case 10:Op(g.type._context);break;case 22:case 23:gg()}h=h.return}if(In=o,un=o=so(o.current,null),Hn=Bs=c,wn=0,gu=null,cg=ff=Ro=0,_s=yu=null,To!==null){for(c=0;c<To.length;c++)if(h=To[c],g=h.interleaved,g!==null){h.interleaved=null;var j=g.next,k=h.pending;if(k!==null){var A=k.next;k.next=j,g.next=A}h.pending=g}To=null}return o}function H1(o,c){do{var h=un;try{if(Pp(),ef.current=sf,tf){for(var g=zr.memoizedState;g!==null;){var j=g.queue;j!==null&&(j.pending=null),g=g.next}tf=!1}if(Do=0,Tn=xn=zr=null,uu=!1,du=0,lg.current=null,h===null||h.return===null){wn=1,gu=c,un=null;break}e:{var k=o,A=h.return,$=h,B=c;if(c=Hn,$.flags|=32768,B!==null&&typeof B=="object"&&typeof B.then=="function"){var fe=B,Ie=$,De=Ie.tag;if((Ie.mode&1)===0&&(De===0||De===11||De===15)){var Te=Ie.alternate;Te?(Ie.updateQueue=Te.updateQueue,Ie.memoizedState=Te.memoizedState,Ie.lanes=Te.lanes):(Ie.updateQueue=null,Ie.memoizedState=null)}var Ye=y1(A);if(Ye!==null){Ye.flags&=-257,v1(Ye,A,$,k,c),Ye.mode&1&&g1(k,fe,c),c=Ye,B=fe;var nt=c.updateQueue;if(nt===null){var it=new Set;it.add(B),c.updateQueue=it}else nt.add(B);break e}else{if((c&1)===0){g1(k,fe,c),yg();break e}B=Error(r(426))}}else if($r&&$.mode&1){var Xr=y1(A);if(Xr!==null){(Xr.flags&65536)===0&&(Xr.flags|=256),v1(Xr,A,$,k,c),Ep(Fl(B,$));break e}}k=B=Fl(B,$),wn!==4&&(wn=2),yu===null?yu=[k]:yu.push(k),k=A;do{switch(k.tag){case 3:k.flags|=65536,c&=-c,k.lanes|=c;var se=m1(k,B,c);Ub(k,se);break e;case 1:$=B;var K=k.type,ae=k.stateNode;if((k.flags&128)===0&&(typeof K.getDerivedStateFromError=="function"||ae!==null&&typeof ae.componentDidCatch=="function"&&(eo===null||!eo.has(ae)))){k.flags|=65536,c&=-c,k.lanes|=c;var Fe=p1(k,$,c);Ub(k,Fe);break e}}k=k.return}while(k!==null)}Y1(h)}catch(ot){c=ot,un===h&&h!==null&&(un=h=h.return);continue}break}while(!0)}function K1(){var o=df.current;return df.current=sf,o===null?sf:o}function yg(){(wn===0||wn===3||wn===2)&&(wn=4),In===null||(Ro&268435455)===0&&(ff&268435455)===0||no(In,Hn)}function vf(o,c){var h=Jt;Jt|=2;var g=K1();(In!==o||Hn!==c)&&(pa=null,Mo(o,c));do try{D4();break}catch(j){H1(o,j)}while(!0);if(Pp(),Jt=h,df.current=g,un!==null)throw Error(r(261));return In=null,Hn=0,wn}function D4(){for(;un!==null;)G1(un)}function R4(){for(;un!==null&&!us();)G1(un)}function G1(o){var c=Q1(o.alternate,o,Bs);o.memoizedProps=o.pendingProps,c===null?Y1(o):un=c,lg.current=null}function Y1(o){var c=o;do{var h=c.alternate;if(o=c.return,(c.flags&32768)===0){if(h=C4(h,c,Bs),h!==null){un=h;return}}else{if(h=E4(h,c),h!==null){h.flags&=32767,un=h;return}if(o!==null)o.flags|=32768,o.subtreeFlags=0,o.deletions=null;else{wn=6,un=null;return}}if(c=c.sibling,c!==null){un=c;return}un=c=o}while(c!==null);wn===0&&(wn=5)}function Fo(o,c,h){var g=ue,j=ci.transition;try{ci.transition=null,ue=1,$4(o,c,h,g)}finally{ci.transition=j,ue=g}return null}function $4(o,c,h,g){do Bl();while(to!==null);if((Jt&6)!==0)throw Error(r(327));h=o.finishedWork;var j=o.finishedLanes;if(h===null)return null;if(o.finishedWork=null,o.finishedLanes=0,h===o.current)throw Error(r(177));o.callbackNode=null,o.callbackPriority=0;var k=h.lanes|h.childLanes;if(X(o,k),o===In&&(un=In=null,Hn=0),(h.subtreeFlags&2064)===0&&(h.flags&2064)===0||mf||(mf=!0,Z1(Oe,function(){return Bl(),null})),k=(h.flags&15990)!==0,(h.subtreeFlags&15990)!==0||k){k=ci.transition,ci.transition=null;var A=ue;ue=1;var $=Jt;Jt|=4,lg.current=null,P4(o,h),L1(h,o),r4(yp),No=!!gp,yp=gp=null,o.current=h,O4(h),bs(),Jt=$,ue=A,ci.transition=k}else o.current=h;if(mf&&(mf=!1,to=o,pf=j),k=o.pendingLanes,k===0&&(eo=null),Lt(h.stateNode),Ns(o,Vt()),c!==null)for(g=o.onRecoverableError,h=0;h<c.length;h++)j=c[h],g(j.value,{componentStack:j.stack,digest:j.digest});if(hf)throw hf=!1,o=dg,dg=null,o;return(pf&1)!==0&&o.tag!==0&&Bl(),k=o.pendingLanes,(k&1)!==0?o===fg?vu++:(vu=0,fg=o):vu=0,Ja(),null}function Bl(){if(to!==null){var o=Me(pf),c=ci.transition,h=ue;try{if(ci.transition=null,ue=16>o?16:o,to===null)var g=!1;else{if(o=to,to=null,pf=0,(Jt&6)!==0)throw Error(r(331));var j=Jt;for(Jt|=4,Ze=o.current;Ze!==null;){var k=Ze,A=k.child;if((Ze.flags&16)!==0){var $=k.deletions;if($!==null){for(var B=0;B<$.length;B++){var fe=$[B];for(Ze=fe;Ze!==null;){var Ie=Ze;switch(Ie.tag){case 0:case 11:case 15:pu(8,Ie,k)}var De=Ie.child;if(De!==null)De.return=Ie,Ze=De;else for(;Ze!==null;){Ie=Ze;var Te=Ie.sibling,Ye=Ie.return;if(D1(Ie),Ie===fe){Ze=null;break}if(Te!==null){Te.return=Ye,Ze=Te;break}Ze=Ye}}}var nt=k.alternate;if(nt!==null){var it=nt.child;if(it!==null){nt.child=null;do{var Xr=it.sibling;it.sibling=null,it=Xr}while(it!==null)}}Ze=k}}if((k.subtreeFlags&2064)!==0&&A!==null)A.return=k,Ze=A;else e:for(;Ze!==null;){if(k=Ze,(k.flags&2048)!==0)switch(k.tag){case 0:case 11:case 15:pu(9,k,k.return)}var se=k.sibling;if(se!==null){se.return=k.return,Ze=se;break e}Ze=k.return}}var K=o.current;for(Ze=K;Ze!==null;){A=Ze;var ae=A.child;if((A.subtreeFlags&2064)!==0&&ae!==null)ae.return=A,Ze=ae;else e:for(A=K;Ze!==null;){if($=Ze,($.flags&2048)!==0)try{switch($.tag){case 0:case 11:case 15:uf(9,$)}}catch(ot){Kr($,$.return,ot)}if($===A){Ze=null;break e}var Fe=$.sibling;if(Fe!==null){Fe.return=$.return,Ze=Fe;break e}Ze=$.return}}if(Jt=j,Ja(),yt&&typeof yt.onPostCommitFiberRoot=="function")try{yt.onPostCommitFiberRoot(At,o)}catch{}g=!0}return g}finally{ue=h,ci.transition=c}}return!1}function J1(o,c,h){c=Fl(h,c),c=m1(o,c,1),o=Qa(o,c,1),c=hs(),o!==null&&(si(o,1,c),Ns(o,c))}function Kr(o,c,h){if(o.tag===3)J1(o,o,h);else for(;c!==null;){if(c.tag===3){J1(c,o,h);break}else if(c.tag===1){var g=c.stateNode;if(typeof c.type.getDerivedStateFromError=="function"||typeof g.componentDidCatch=="function"&&(eo===null||!eo.has(g))){o=Fl(h,o),o=p1(c,o,1),c=Qa(c,o,1),o=hs(),c!==null&&(si(c,1,o),Ns(c,o));break}}c=c.return}}function M4(o,c,h){var g=o.pingCache;g!==null&&g.delete(c),c=hs(),o.pingedLanes|=o.suspendedLanes&h,In===o&&(Hn&h)===h&&(wn===4||wn===3&&(Hn&130023424)===Hn&&500>Vt()-ug?Mo(o,0):cg|=h),Ns(o,c)}function X1(o,c){c===0&&((o.mode&1)===0?c=1:(c=cn,cn<<=1,(cn&130023424)===0&&(cn=4194304)));var h=hs();o=fa(o,c),o!==null&&(si(o,c,h),Ns(o,h))}function F4(o){var c=o.memoizedState,h=0;c!==null&&(h=c.retryLane),X1(o,h)}function L4(o,c){var h=0;switch(o.tag){case 13:var g=o.stateNode,j=o.memoizedState;j!==null&&(h=j.retryLane);break;case 19:g=o.stateNode;break;default:throw Error(r(314))}g!==null&&g.delete(c),X1(o,h)}var Q1;Q1=function(o,c,h){if(o!==null)if(o.memoizedProps!==c.pendingProps||js.current)ks=!0;else{if((o.lanes&h)===0&&(c.flags&128)===0)return ks=!1,N4(o,c,h);ks=(o.flags&131072)!==0}else ks=!1,$r&&(c.flags&1048576)!==0&&Ob(c,Hd,c.index);switch(c.lanes=0,c.tag){case 2:var g=c.type;lf(o,c),o=c.pendingProps;var j=Pl(c,rs.current);$l(c,h),j=Up(null,c,g,o,j,h);var k=Bp();return c.flags|=1,typeof j=="object"&&j!==null&&typeof j.render=="function"&&j.$$typeof===void 0?(c.tag=1,c.memoizedState=null,c.updateQueue=null,Ss(g)?(k=!0,Wd(c)):k=!1,c.memoizedState=j.state!==null&&j.state!==void 0?j.state:null,Dp(c),j.updater=af,c.stateNode=j,j._reactInternals=c,Gp(c,g,o,h),c=Qp(null,c,g,!0,k,h)):(c.tag=0,$r&&k&&kp(c),fs(null,c,j,h),c=c.child),c;case 16:g=c.elementType;e:{switch(lf(o,c),o=c.pendingProps,j=g._init,g=j(g._payload),c.type=g,j=c.tag=U4(g),o=Ci(g,o),j){case 0:c=Xp(null,c,g,o,h);break e;case 1:c=k1(null,c,g,o,h);break e;case 11:c=x1(null,c,g,o,h);break e;case 14:c=w1(null,c,g,Ci(g.type,o),h);break e}throw Error(r(306,g,""))}return c;case 0:return g=c.type,j=c.pendingProps,j=c.elementType===g?j:Ci(g,j),Xp(o,c,g,j,h);case 1:return g=c.type,j=c.pendingProps,j=c.elementType===g?j:Ci(g,j),k1(o,c,g,j,h);case 3:e:{if(_1(c),o===null)throw Error(r(387));g=c.pendingProps,k=c.memoizedState,j=k.element,zb(o,c),Qd(c,g,null,h);var A=c.memoizedState;if(g=A.element,k.isDehydrated)if(k={element:g,isDehydrated:!1,cache:A.cache,pendingSuspenseBoundaries:A.pendingSuspenseBoundaries,transitions:A.transitions},c.updateQueue.baseState=k,c.memoizedState=k,c.flags&256){j=Fl(Error(r(423)),c),c=N1(o,c,g,h,j);break e}else if(g!==j){j=Fl(Error(r(424)),c),c=N1(o,c,g,h,j);break e}else for(Us=Ka(c.stateNode.containerInfo.firstChild),zs=c,$r=!0,Ni=null,h=Fb(c,null,g,h),c.child=h;h;)h.flags=h.flags&-3|4096,h=h.sibling;else{if(Il(),g===j){c=ma(o,c,h);break e}fs(o,c,g,h)}c=c.child}return c;case 5:return Wb(c),o===null&&Cp(c),g=c.type,j=c.pendingProps,k=o!==null?o.memoizedProps:null,A=j.children,vp(g,j)?A=null:k!==null&&vp(g,k)&&(c.flags|=32),S1(o,c),fs(o,c,A,h),c.child;case 6:return o===null&&Cp(c),null;case 13:return C1(o,c,h);case 4:return Rp(c,c.stateNode.containerInfo),g=c.pendingProps,o===null?c.child=Dl(c,null,g,h):fs(o,c,g,h),c.child;case 11:return g=c.type,j=c.pendingProps,j=c.elementType===g?j:Ci(g,j),x1(o,c,g,j,h);case 7:return fs(o,c,c.pendingProps,h),c.child;case 8:return fs(o,c,c.pendingProps.children,h),c.child;case 12:return fs(o,c,c.pendingProps.children,h),c.child;case 10:e:{if(g=c.type._context,j=c.pendingProps,k=c.memoizedProps,A=j.value,br(Yd,g._currentValue),g._currentValue=A,k!==null)if(_i(k.value,A)){if(k.children===j.children&&!js.current){c=ma(o,c,h);break e}}else for(k=c.child,k!==null&&(k.return=c);k!==null;){var $=k.dependencies;if($!==null){A=k.child;for(var B=$.firstContext;B!==null;){if(B.context===g){if(k.tag===1){B=ha(-1,h&-h),B.tag=2;var fe=k.updateQueue;if(fe!==null){fe=fe.shared;var Ie=fe.pending;Ie===null?B.next=B:(B.next=Ie.next,Ie.next=B),fe.pending=B}}k.lanes|=h,B=k.alternate,B!==null&&(B.lanes|=h),Tp(k.return,h,c),$.lanes|=h;break}B=B.next}}else if(k.tag===10)A=k.type===c.type?null:k.child;else if(k.tag===18){if(A=k.return,A===null)throw Error(r(341));A.lanes|=h,$=A.alternate,$!==null&&($.lanes|=h),Tp(A,h,c),A=k.sibling}else A=k.child;if(A!==null)A.return=k;else for(A=k;A!==null;){if(A===c){A=null;break}if(k=A.sibling,k!==null){k.return=A.return,A=k;break}A=A.return}k=A}fs(o,c,j.children,h),c=c.child}return c;case 9:return j=c.type,g=c.pendingProps.children,$l(c,h),j=oi(j),g=g(j),c.flags|=1,fs(o,c,g,h),c.child;case 14:return g=c.type,j=Ci(g,c.pendingProps),j=Ci(g.type,j),w1(o,c,g,j,h);case 15:return b1(o,c,c.type,c.pendingProps,h);case 17:return g=c.type,j=c.pendingProps,j=c.elementType===g?j:Ci(g,j),lf(o,c),c.tag=1,Ss(g)?(o=!0,Wd(c)):o=!1,$l(c,h),f1(c,g,j),Gp(c,g,j,h),Qp(null,c,g,!0,o,h);case 19:return A1(o,c,h);case 22:return j1(o,c,h)}throw Error(r(156,c.tag))};function Z1(o,c){return ts(o,c)}function z4(o,c,h,g){this.tag=o,this.key=h,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=c,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=g,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ui(o,c,h,g){return new z4(o,c,h,g)}function vg(o){return o=o.prototype,!(!o||!o.isReactComponent)}function U4(o){if(typeof o=="function")return vg(o)?1:0;if(o!=null){if(o=o.$$typeof,o===U)return 11;if(o===oe)return 14}return 2}function so(o,c){var h=o.alternate;return h===null?(h=ui(o.tag,c,o.key,o.mode),h.elementType=o.elementType,h.type=o.type,h.stateNode=o.stateNode,h.alternate=o,o.alternate=h):(h.pendingProps=c,h.type=o.type,h.flags=0,h.subtreeFlags=0,h.deletions=null),h.flags=o.flags&14680064,h.childLanes=o.childLanes,h.lanes=o.lanes,h.child=o.child,h.memoizedProps=o.memoizedProps,h.memoizedState=o.memoizedState,h.updateQueue=o.updateQueue,c=o.dependencies,h.dependencies=c===null?null:{lanes:c.lanes,firstContext:c.firstContext},h.sibling=o.sibling,h.index=o.index,h.ref=o.ref,h}function xf(o,c,h,g,j,k){var A=2;if(g=o,typeof o=="function")vg(o)&&(A=1);else if(typeof o=="string")A=5;else e:switch(o){case F:return Lo(h.children,j,k,c);case H:A=8,j|=8;break;case L:return o=ui(12,h,c,j|2),o.elementType=L,o.lanes=k,o;case ne:return o=ui(13,h,c,j),o.elementType=ne,o.lanes=k,o;case ie:return o=ui(19,h,c,j),o.elementType=ie,o.lanes=k,o;case Z:return wf(h,j,k,c);default:if(typeof o=="object"&&o!==null)switch(o.$$typeof){case q:A=10;break e;case z:A=9;break e;case U:A=11;break e;case oe:A=14;break e;case V:A=16,g=null;break e}throw Error(r(130,o==null?o:typeof o,""))}return c=ui(A,h,c,j),c.elementType=o,c.type=g,c.lanes=k,c}function Lo(o,c,h,g){return o=ui(7,o,g,c),o.lanes=h,o}function wf(o,c,h,g){return o=ui(22,o,g,c),o.elementType=Z,o.lanes=h,o.stateNode={isHidden:!1},o}function xg(o,c,h){return o=ui(6,o,null,c),o.lanes=h,o}function wg(o,c,h){return c=ui(4,o.children!==null?o.children:[],o.key,c),c.lanes=h,c.stateNode={containerInfo:o.containerInfo,pendingChildren:null,implementation:o.implementation},c}function B4(o,c,h,g,j){this.tag=c,this.containerInfo=o,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=qr(0),this.expirationTimes=qr(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=qr(0),this.identifierPrefix=g,this.onRecoverableError=j,this.mutableSourceEagerHydrationData=null}function bg(o,c,h,g,j,k,A,$,B){return o=new B4(o,c,h,$,B),c===1?(c=1,k===!0&&(c|=8)):c=0,k=ui(3,null,null,c),o.current=k,k.stateNode=o,k.memoizedState={element:g,isDehydrated:h,cache:null,transitions:null,pendingSuspenseBoundaries:null},Dp(k),o}function W4(o,c,h){var g=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:P,key:g==null?null:""+g,children:o,containerInfo:c,implementation:h}}function ej(o){if(!o)return Ya;o=o._reactInternals;e:{if(on(o)!==o||o.tag!==1)throw Error(r(170));var c=o;do{switch(c.tag){case 3:c=c.stateNode.context;break e;case 1:if(Ss(c.type)){c=c.stateNode.__reactInternalMemoizedMergedChildContext;break e}}c=c.return}while(c!==null);throw Error(r(171))}if(o.tag===1){var h=o.type;if(Ss(h))return Eb(o,h,c)}return c}function tj(o,c,h,g,j,k,A,$,B){return o=bg(h,g,!0,o,j,k,A,$,B),o.context=ej(null),h=o.current,g=hs(),j=ro(h),k=ha(g,j),k.callback=c??null,Qa(h,k,j),o.current.lanes=j,si(o,j,g),Ns(o,g),o}function bf(o,c,h,g){var j=c.current,k=hs(),A=ro(j);return h=ej(h),c.context===null?c.context=h:c.pendingContext=h,c=ha(k,A),c.payload={element:o},g=g===void 0?null:g,g!==null&&(c.callback=g),o=Qa(j,c,A),o!==null&&(Pi(o,j,A,k),Xd(o,j,A)),A}function jf(o){if(o=o.current,!o.child)return null;switch(o.child.tag){case 5:return o.child.stateNode;default:return o.child.stateNode}}function rj(o,c){if(o=o.memoizedState,o!==null&&o.dehydrated!==null){var h=o.retryLane;o.retryLane=h!==0&&h<c?h:c}}function jg(o,c){rj(o,c),(o=o.alternate)&&rj(o,c)}function V4(){return null}var nj=typeof reportError=="function"?reportError:function(o){console.error(o)};function Sg(o){this._internalRoot=o}Sf.prototype.render=Sg.prototype.render=function(o){var c=this._internalRoot;if(c===null)throw Error(r(409));bf(o,c,null,null)},Sf.prototype.unmount=Sg.prototype.unmount=function(){var o=this._internalRoot;if(o!==null){this._internalRoot=null;var c=o.containerInfo;$o(function(){bf(null,o,null,null)}),c[la]=null}};function Sf(o){this._internalRoot=o}Sf.prototype.unstable_scheduleHydration=function(o){if(o){var c=ct();o={blockedOn:null,target:o,priority:c};for(var h=0;h<_e.length&&c!==0&&c<_e[h].priority;h++);_e.splice(h,0,o),h===0&&Yt(o)}};function kg(o){return!(!o||o.nodeType!==1&&o.nodeType!==9&&o.nodeType!==11)}function kf(o){return!(!o||o.nodeType!==1&&o.nodeType!==9&&o.nodeType!==11&&(o.nodeType!==8||o.nodeValue!==" react-mount-point-unstable "))}function sj(){}function q4(o,c,h,g,j){if(j){if(typeof g=="function"){var k=g;g=function(){var fe=jf(A);k.call(fe)}}var A=tj(c,g,o,0,null,!1,!1,"",sj);return o._reactRootContainer=A,o[la]=A.current,ru(o.nodeType===8?o.parentNode:o),$o(),A}for(;j=o.lastChild;)o.removeChild(j);if(typeof g=="function"){var $=g;g=function(){var fe=jf(B);$.call(fe)}}var B=bg(o,0,!1,null,null,!1,!1,"",sj);return o._reactRootContainer=B,o[la]=B.current,ru(o.nodeType===8?o.parentNode:o),$o(function(){bf(c,B,h,g)}),B}function _f(o,c,h,g,j){var k=h._reactRootContainer;if(k){var A=k;if(typeof j=="function"){var $=j;j=function(){var B=jf(A);$.call(B)}}bf(c,A,o,j)}else A=q4(h,c,o,j,g);return jf(A)}Be=function(o){switch(o.tag){case 3:var c=o.stateNode;if(c.current.memoizedState.isDehydrated){var h=Ms(c.pendingLanes);h!==0&&(de(c,h|1),Ns(c,Vt()),(Jt&6)===0&&(Ul=Vt()+500,Ja()))}break;case 13:$o(function(){var g=fa(o,1);if(g!==null){var j=hs();Pi(g,o,1,j)}}),jg(o,1)}},xe=function(o){if(o.tag===13){var c=fa(o,134217728);if(c!==null){var h=hs();Pi(c,o,134217728,h)}jg(o,134217728)}},be=function(o){if(o.tag===13){var c=ro(o),h=fa(o,c);if(h!==null){var g=hs();Pi(h,o,c,g)}jg(o,c)}},ct=function(){return ue},It=function(o,c){var h=ue;try{return ue=o,c()}finally{ue=h}},Ut=function(o,c,h){switch(c){case"input":if(Mt(o,h),c=h.name,h.type==="radio"&&c!=null){for(h=o;h.parentNode;)h=h.parentNode;for(h=h.querySelectorAll("input[name="+JSON.stringify(""+c)+'][type="radio"]'),c=0;c<h.length;c++){var g=h[c];if(g!==o&&g.form===o.form){var j=Ud(g);if(!j)throw Error(r(90));G(g),Mt(g,j)}}}break;case"textarea":pe(o,h);break;case"select":c=h.value,c!=null&&Y(o,!!h.multiple,c,!1)}},pr=pg,Zn=$o;var H4={usingClientEntryPoint:!1,Events:[iu,El,Ud,ws,sn,pg]},xu={findFiberByHostInstance:Eo,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},K4={bundleType:xu.bundleType,version:xu.version,rendererPackageName:xu.rendererPackageName,rendererConfig:xu.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:O.ReactCurrentDispatcher,findHostInstanceByFiber:function(o){return o=ln(o),o===null?null:o.stateNode},findFiberByHostInstance:xu.findFiberByHostInstance||V4,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Nf=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Nf.isDisabled&&Nf.supportsFiber)try{At=Nf.inject(K4),yt=Nf}catch{}}return Cs.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=H4,Cs.createPortal=function(o,c){var h=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!kg(c))throw Error(r(200));return W4(o,c,null,h)},Cs.createRoot=function(o,c){if(!kg(o))throw Error(r(299));var h=!1,g="",j=nj;return c!=null&&(c.unstable_strictMode===!0&&(h=!0),c.identifierPrefix!==void 0&&(g=c.identifierPrefix),c.onRecoverableError!==void 0&&(j=c.onRecoverableError)),c=bg(o,1,!1,null,null,h,!1,g,j),o[la]=c.current,ru(o.nodeType===8?o.parentNode:o),new Sg(c)},Cs.findDOMNode=function(o){if(o==null)return null;if(o.nodeType===1)return o;var c=o._reactInternals;if(c===void 0)throw typeof o.render=="function"?Error(r(188)):(o=Object.keys(o).join(","),Error(r(268,o)));return o=ln(c),o=o===null?null:o.stateNode,o},Cs.flushSync=function(o){return $o(o)},Cs.hydrate=function(o,c,h){if(!kf(c))throw Error(r(200));return _f(null,o,c,!0,h)},Cs.hydrateRoot=function(o,c,h){if(!kg(o))throw Error(r(405));var g=h!=null&&h.hydratedSources||null,j=!1,k="",A=nj;if(h!=null&&(h.unstable_strictMode===!0&&(j=!0),h.identifierPrefix!==void 0&&(k=h.identifierPrefix),h.onRecoverableError!==void 0&&(A=h.onRecoverableError)),c=tj(c,null,o,1,h??null,j,!1,k,A),o[la]=c.current,ru(o),g)for(o=0;o<g.length;o++)h=g[o],j=h._getVersion,j=j(h._source),c.mutableSourceEagerHydrationData==null?c.mutableSourceEagerHydrationData=[h,j]:c.mutableSourceEagerHydrationData.push(h,j);return new Sf(c)},Cs.render=function(o,c,h){if(!kf(c))throw Error(r(200));return _f(null,o,c,!1,h)},Cs.unmountComponentAtNode=function(o){if(!kf(o))throw Error(r(40));return o._reactRootContainer?($o(function(){_f(null,null,o,!1,function(){o._reactRootContainer=null,o[la]=null})}),!0):!1},Cs.unstable_batchedUpdates=pg,Cs.unstable_renderSubtreeIntoContainer=function(o,c,h,g){if(!kf(h))throw Error(r(200));if(o==null||o._reactInternals===void 0)throw Error(r(38));return _f(o,c,h,!1,g)},Cs.version="18.3.1-next-f1338f8080-20240426",Cs}var fj;function nC(){if(fj)return Eg.exports;fj=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),Eg.exports=iD(),Eg.exports}var hj;function aD(){if(hj)return Cf;hj=1;var e=nC();return Cf.createRoot=e.createRoot,Cf.hydrateRoot=e.hydrateRoot,Cf}var oD=aD();const lD=Ui(oD);/**
 * react-router v7.9.4
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var mj="popstate";function cD(e={}){function t(n,s){let{pathname:i,search:l,hash:u}=n.location;return Pv("",{pathname:i,search:l,hash:u},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function r(n,s){return typeof s=="string"?s:Ku(s)}return dD(t,r,null,e)}function Fr(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function gi(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function uD(){return Math.random().toString(36).substring(2,10)}function pj(e,t){return{usr:e.state,key:e.key,idx:t}}function Pv(e,t,r=null,n){return{pathname:typeof e=="string"?e:e.pathname,search:"",hash:"",...typeof t=="string"?Oc(t):t,state:r,key:t&&t.key||n||uD()}}function Ku({pathname:e="/",search:t="",hash:r=""}){return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function Oc(e){let t={};if(e){let r=e.indexOf("#");r>=0&&(t.hash=e.substring(r),e=e.substring(0,r));let n=e.indexOf("?");n>=0&&(t.search=e.substring(n),e=e.substring(0,n)),e&&(t.pathname=e)}return t}function dD(e,t,r,n={}){let{window:s=document.defaultView,v5Compat:i=!1}=n,l=s.history,u="POP",d=null,m=f();m==null&&(m=0,l.replaceState({...l.state,idx:m},""));function f(){return(l.state||{idx:null}).idx}function p(){u="POP";let S=f(),_=S==null?null:S-m;m=S,d&&d({action:u,location:b.location,delta:_})}function y(S,_){u="PUSH";let E=Pv(b.location,S,_);m=f()+1;let C=pj(E,m),O=b.createHref(E);try{l.pushState(C,"",O)}catch(T){if(T instanceof DOMException&&T.name==="DataCloneError")throw T;s.location.assign(O)}i&&d&&d({action:u,location:b.location,delta:1})}function x(S,_){u="REPLACE";let E=Pv(b.location,S,_);m=f();let C=pj(E,m),O=b.createHref(E);l.replaceState(C,"",O),i&&d&&d({action:u,location:b.location,delta:0})}function w(S){return fD(S)}let b={get action(){return u},get location(){return e(s,l)},listen(S){if(d)throw new Error("A history only accepts one active listener");return s.addEventListener(mj,p),d=S,()=>{s.removeEventListener(mj,p),d=null}},createHref(S){return t(s,S)},createURL:w,encodeLocation(S){let _=w(S);return{pathname:_.pathname,search:_.search,hash:_.hash}},push:y,replace:x,go(S){return l.go(S)}};return b}function fD(e,t=!1){let r="http://localhost";typeof window<"u"&&(r=window.location.origin!=="null"?window.location.origin:window.location.href),Fr(r,"No window.location.(origin|href) available to create URL");let n=typeof e=="string"?e:Ku(e);return n=n.replace(/ $/,"%20"),!t&&n.startsWith("//")&&(n=r+n),new URL(n,r)}function sC(e,t,r="/"){return hD(e,t,r,!1)}function hD(e,t,r,n){let s=typeof t=="string"?Oc(t):t,i=Ea(s.pathname||"/",r);if(i==null)return null;let l=iC(e);mD(l);let u=null;for(let d=0;u==null&&d<l.length;++d){let m=_D(i);u=SD(l[d],m,n)}return u}function iC(e,t=[],r=[],n="",s=!1){let i=(l,u,d=s,m)=>{let f={relativePath:m===void 0?l.path||"":m,caseSensitive:l.caseSensitive===!0,childrenIndex:u,route:l};if(f.relativePath.startsWith("/")){if(!f.relativePath.startsWith(n)&&d)return;Fr(f.relativePath.startsWith(n),`Absolute route path "${f.relativePath}" nested under path "${n}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),f.relativePath=f.relativePath.slice(n.length)}let p=ka([n,f.relativePath]),y=r.concat(f);l.children&&l.children.length>0&&(Fr(l.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${p}".`),iC(l.children,t,y,p,d)),!(l.path==null&&!l.index)&&t.push({path:p,score:bD(p,l.index),routesMeta:y})};return e.forEach((l,u)=>{var d;if(l.path===""||!((d=l.path)!=null&&d.includes("?")))i(l,u);else for(let m of aC(l.path))i(l,u,!0,m)}),t}function aC(e){let t=e.split("/");if(t.length===0)return[];let[r,...n]=t,s=r.endsWith("?"),i=r.replace(/\?$/,"");if(n.length===0)return s?[i,""]:[i];let l=aC(n.join("/")),u=[];return u.push(...l.map(d=>d===""?i:[i,d].join("/"))),s&&u.push(...l),u.map(d=>e.startsWith("/")&&d===""?"/":d)}function mD(e){e.sort((t,r)=>t.score!==r.score?r.score-t.score:jD(t.routesMeta.map(n=>n.childrenIndex),r.routesMeta.map(n=>n.childrenIndex)))}var pD=/^:[\w-]+$/,gD=3,yD=2,vD=1,xD=10,wD=-2,gj=e=>e==="*";function bD(e,t){let r=e.split("/"),n=r.length;return r.some(gj)&&(n+=wD),t&&(n+=yD),r.filter(s=>!gj(s)).reduce((s,i)=>s+(pD.test(i)?gD:i===""?vD:xD),n)}function jD(e,t){return e.length===t.length&&e.slice(0,-1).every((n,s)=>n===t[s])?e[e.length-1]-t[t.length-1]:0}function SD(e,t,r=!1){let{routesMeta:n}=e,s={},i="/",l=[];for(let u=0;u<n.length;++u){let d=n[u],m=u===n.length-1,f=i==="/"?t:t.slice(i.length)||"/",p=uh({path:d.relativePath,caseSensitive:d.caseSensitive,end:m},f),y=d.route;if(!p&&m&&r&&!n[n.length-1].route.index&&(p=uh({path:d.relativePath,caseSensitive:d.caseSensitive,end:!1},f)),!p)return null;Object.assign(s,p.params),l.push({params:s,pathname:ka([i,p.pathname]),pathnameBase:AD(ka([i,p.pathnameBase])),route:y}),p.pathnameBase!=="/"&&(i=ka([i,p.pathnameBase]))}return l}function uh(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[r,n]=kD(e.path,e.caseSensitive,e.end),s=t.match(r);if(!s)return null;let i=s[0],l=i.replace(/(.)\/+$/,"$1"),u=s.slice(1);return{params:n.reduce((m,{paramName:f,isOptional:p},y)=>{if(f==="*"){let w=u[y]||"";l=i.slice(0,i.length-w.length).replace(/(.)\/+$/,"$1")}const x=u[y];return p&&!x?m[f]=void 0:m[f]=(x||"").replace(/%2F/g,"/"),m},{}),pathname:i,pathnameBase:l,pattern:e}}function kD(e,t=!1,r=!0){gi(e==="*"||!e.endsWith("*")||e.endsWith("/*"),`Route path "${e}" will be treated as if it were "${e.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${e.replace(/\*$/,"/*")}".`);let n=[],s="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(l,u,d)=>(n.push({paramName:u,isOptional:d!=null}),d?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return e.endsWith("*")?(n.push({paramName:"*"}),s+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?s+="\\/*$":e!==""&&e!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,t?void 0:"i"),n]}function _D(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return gi(!1,`The URL path "${e}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${t}).`),e}}function Ea(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let r=t.endsWith("/")?t.length-1:t.length,n=e.charAt(r);return n&&n!=="/"?null:e.slice(r)||"/"}function ND(e,t="/"){let{pathname:r,search:n="",hash:s=""}=typeof e=="string"?Oc(e):e;return{pathname:r?r.startsWith("/")?r:CD(r,t):t,search:PD(n),hash:OD(s)}}function CD(e,t){let r=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(s=>{s===".."?r.length>1&&r.pop():s!=="."&&r.push(s)}),r.length>1?r.join("/"):"/"}function Og(e,t,r,n){return`Cannot include a '${e}' character in a manually specified \`to.${t}\` field [${JSON.stringify(n)}].  Please separate it out to the \`to.${r}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function ED(e){return e.filter((t,r)=>r===0||t.route.path&&t.route.path.length>0)}function Y0(e){let t=ED(e);return t.map((r,n)=>n===t.length-1?r.pathname:r.pathnameBase)}function J0(e,t,r,n=!1){let s;typeof e=="string"?s=Oc(e):(s={...e},Fr(!s.pathname||!s.pathname.includes("?"),Og("?","pathname","search",s)),Fr(!s.pathname||!s.pathname.includes("#"),Og("#","pathname","hash",s)),Fr(!s.search||!s.search.includes("#"),Og("#","search","hash",s)));let i=e===""||s.pathname==="",l=i?"/":s.pathname,u;if(l==null)u=r;else{let p=t.length-1;if(!n&&l.startsWith("..")){let y=l.split("/");for(;y[0]==="..";)y.shift(),p-=1;s.pathname=y.join("/")}u=p>=0?t[p]:"/"}let d=ND(s,u),m=l&&l!=="/"&&l.endsWith("/"),f=(i||l===".")&&r.endsWith("/");return!d.pathname.endsWith("/")&&(m||f)&&(d.pathname+="/"),d}var ka=e=>e.join("/").replace(/\/\/+/g,"/"),AD=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),PD=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,OD=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function TD(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}var oC=["POST","PUT","PATCH","DELETE"];new Set(oC);var ID=["GET",...oC];new Set(ID);var Tc=v.createContext(null);Tc.displayName="DataRouter";var um=v.createContext(null);um.displayName="DataRouterState";v.createContext(!1);var lC=v.createContext({isTransitioning:!1});lC.displayName="ViewTransition";var DD=v.createContext(new Map);DD.displayName="Fetchers";var RD=v.createContext(null);RD.displayName="Await";var Bi=v.createContext(null);Bi.displayName="Navigation";var cd=v.createContext(null);cd.displayName="Location";var ia=v.createContext({outlet:null,matches:[],isDataRoute:!1});ia.displayName="Route";var X0=v.createContext(null);X0.displayName="RouteError";function $D(e,{relative:t}={}){Fr(Ic(),"useHref() may be used only in the context of a <Router> component.");let{basename:r,navigator:n}=v.useContext(Bi),{hash:s,pathname:i,search:l}=ud(e,{relative:t}),u=i;return r!=="/"&&(u=i==="/"?r:ka([r,i])),n.createHref({pathname:u,search:l,hash:s})}function Ic(){return v.useContext(cd)!=null}function Fa(){return Fr(Ic(),"useLocation() may be used only in the context of a <Router> component."),v.useContext(cd).location}var cC="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function uC(e){v.useContext(Bi).static||v.useLayoutEffect(e)}function Ds(){let{isDataRoute:e}=v.useContext(ia);return e?YD():MD()}function MD(){Fr(Ic(),"useNavigate() may be used only in the context of a <Router> component.");let e=v.useContext(Tc),{basename:t,navigator:r}=v.useContext(Bi),{matches:n}=v.useContext(ia),{pathname:s}=Fa(),i=JSON.stringify(Y0(n)),l=v.useRef(!1);return uC(()=>{l.current=!0}),v.useCallback((d,m={})=>{if(gi(l.current,cC),!l.current)return;if(typeof d=="number"){r.go(d);return}let f=J0(d,JSON.parse(i),s,m.relative==="path");e==null&&t!=="/"&&(f.pathname=f.pathname==="/"?t:ka([t,f.pathname])),(m.replace?r.replace:r.push)(f,m.state,m)},[t,r,i,s,e])}v.createContext(null);function ud(e,{relative:t}={}){let{matches:r}=v.useContext(ia),{pathname:n}=Fa(),s=JSON.stringify(Y0(r));return v.useMemo(()=>J0(e,JSON.parse(s),n,t==="path"),[e,s,n,t])}function FD(e,t){return dC(e,t)}function dC(e,t,r,n,s){var E;Fr(Ic(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:i}=v.useContext(Bi),{matches:l}=v.useContext(ia),u=l[l.length-1],d=u?u.params:{},m=u?u.pathname:"/",f=u?u.pathnameBase:"/",p=u&&u.route;{let C=p&&p.path||"";fC(m,!p||C.endsWith("*")||C.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${m}" (under <Route path="${C}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${C}"> to <Route path="${C==="/"?"*":`${C}/*`}">.`)}let y=Fa(),x;if(t){let C=typeof t=="string"?Oc(t):t;Fr(f==="/"||((E=C.pathname)==null?void 0:E.startsWith(f)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${f}" but pathname "${C.pathname}" was given in the \`location\` prop.`),x=C}else x=y;let w=x.pathname||"/",b=w;if(f!=="/"){let C=f.replace(/^\//,"").split("/");b="/"+w.replace(/^\//,"").split("/").slice(C.length).join("/")}let S=sC(e,{pathname:b});gi(p||S!=null,`No routes matched location "${x.pathname}${x.search}${x.hash}" `),gi(S==null||S[S.length-1].route.element!==void 0||S[S.length-1].route.Component!==void 0||S[S.length-1].route.lazy!==void 0,`Matched leaf route at location "${x.pathname}${x.search}${x.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let _=WD(S&&S.map(C=>Object.assign({},C,{params:Object.assign({},d,C.params),pathname:ka([f,i.encodeLocation?i.encodeLocation(C.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:C.pathname]),pathnameBase:C.pathnameBase==="/"?f:ka([f,i.encodeLocation?i.encodeLocation(C.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:C.pathnameBase])})),l,r,n,s);return t&&_?v.createElement(cd.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...x},navigationType:"POP"}},_):_}function LD(){let e=GD(),t=TD(e)?`${e.status} ${e.statusText}`:e instanceof Error?e.message:JSON.stringify(e),r=e instanceof Error?e.stack:null,n="rgba(200,200,200, 0.5)",s={padding:"0.5rem",backgroundColor:n},i={padding:"2px 4px",backgroundColor:n},l=null;return console.error("Error handled by React Router default ErrorBoundary:",e),l=v.createElement(v.Fragment,null,v.createElement("p",null," Hey developer "),v.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",v.createElement("code",{style:i},"ErrorBoundary")," or"," ",v.createElement("code",{style:i},"errorElement")," prop on your route.")),v.createElement(v.Fragment,null,v.createElement("h2",null,"Unexpected Application Error!"),v.createElement("h3",{style:{fontStyle:"italic"}},t),r?v.createElement("pre",{style:s},r):null,l)}var zD=v.createElement(LD,null),UD=class extends v.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){this.props.unstable_onError?this.props.unstable_onError(e,t):console.error("React Router caught the following error during render",e)}render(){return this.state.error!==void 0?v.createElement(ia.Provider,{value:this.props.routeContext},v.createElement(X0.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function BD({routeContext:e,match:t,children:r}){let n=v.useContext(Tc);return n&&n.static&&n.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(n.staticContext._deepestRenderedBoundaryId=t.route.id),v.createElement(ia.Provider,{value:e},r)}function WD(e,t=[],r=null,n=null,s=null){if(e==null){if(!r)return null;if(r.errors)e=r.matches;else if(t.length===0&&!r.initialized&&r.matches.length>0)e=r.matches;else return null}let i=e,l=r==null?void 0:r.errors;if(l!=null){let m=i.findIndex(f=>f.route.id&&(l==null?void 0:l[f.route.id])!==void 0);Fr(m>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(l).join(",")}`),i=i.slice(0,Math.min(i.length,m+1))}let u=!1,d=-1;if(r)for(let m=0;m<i.length;m++){let f=i[m];if((f.route.HydrateFallback||f.route.hydrateFallbackElement)&&(d=m),f.route.id){let{loaderData:p,errors:y}=r,x=f.route.loader&&!p.hasOwnProperty(f.route.id)&&(!y||y[f.route.id]===void 0);if(f.route.lazy||x){u=!0,d>=0?i=i.slice(0,d+1):i=[i[0]];break}}}return i.reduceRight((m,f,p)=>{let y,x=!1,w=null,b=null;r&&(y=l&&f.route.id?l[f.route.id]:void 0,w=f.route.errorElement||zD,u&&(d<0&&p===0?(fC("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),x=!0,b=null):d===p&&(x=!0,b=f.route.hydrateFallbackElement||null)));let S=t.concat(i.slice(0,p+1)),_=()=>{let E;return y?E=w:x?E=b:f.route.Component?E=v.createElement(f.route.Component,null):f.route.element?E=f.route.element:E=m,v.createElement(BD,{match:f,routeContext:{outlet:m,matches:S,isDataRoute:r!=null},children:E})};return r&&(f.route.ErrorBoundary||f.route.errorElement||p===0)?v.createElement(UD,{location:r.location,revalidation:r.revalidation,component:w,error:y,children:_(),routeContext:{outlet:null,matches:S,isDataRoute:!0},unstable_onError:n}):_()},null)}function Q0(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function VD(e){let t=v.useContext(Tc);return Fr(t,Q0(e)),t}function qD(e){let t=v.useContext(um);return Fr(t,Q0(e)),t}function HD(e){let t=v.useContext(ia);return Fr(t,Q0(e)),t}function Z0(e){let t=HD(e),r=t.matches[t.matches.length-1];return Fr(r.route.id,`${e} can only be used on routes that contain a unique "id"`),r.route.id}function KD(){return Z0("useRouteId")}function GD(){var n;let e=v.useContext(X0),t=qD("useRouteError"),r=Z0("useRouteError");return e!==void 0?e:(n=t.errors)==null?void 0:n[r]}function YD(){let{router:e}=VD("useNavigate"),t=Z0("useNavigate"),r=v.useRef(!1);return uC(()=>{r.current=!0}),v.useCallback(async(s,i={})=>{gi(r.current,cC),r.current&&(typeof s=="number"?e.navigate(s):await e.navigate(s,{fromRouteId:t,...i}))},[e,t])}var yj={};function fC(e,t,r){!t&&!yj[e]&&(yj[e]=!0,gi(!1,r))}v.memo(JD);function JD({routes:e,future:t,state:r,unstable_onError:n}){return dC(e,void 0,r,n,t)}function XD({to:e,replace:t,state:r,relative:n}){Fr(Ic(),"<Navigate> may be used only in the context of a <Router> component.");let{static:s}=v.useContext(Bi);gi(!s,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:i}=v.useContext(ia),{pathname:l}=Fa(),u=Ds(),d=J0(e,Y0(i),l,n==="path"),m=JSON.stringify(d);return v.useEffect(()=>{u(JSON.parse(m),{replace:t,state:r,relative:n})},[u,m,n,t,r]),null}function Ws(e){Fr(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function QD({basename:e="/",children:t=null,location:r,navigationType:n="POP",navigator:s,static:i=!1}){Fr(!Ic(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let l=e.replace(/^\/*/,"/"),u=v.useMemo(()=>({basename:l,navigator:s,static:i,future:{}}),[l,s,i]);typeof r=="string"&&(r=Oc(r));let{pathname:d="/",search:m="",hash:f="",state:p=null,key:y="default"}=r,x=v.useMemo(()=>{let w=Ea(d,l);return w==null?null:{location:{pathname:w,search:m,hash:f,state:p,key:y},navigationType:n}},[l,d,m,f,p,y,n]);return gi(x!=null,`<Router basename="${l}"> is not able to match the URL "${d}${m}${f}" because it does not start with the basename, so the <Router> won't render anything.`),x==null?null:v.createElement(Bi.Provider,{value:u},v.createElement(cd.Provider,{children:t,value:x}))}function ZD({children:e,location:t}){return FD(Ov(e),t)}function Ov(e,t=[]){let r=[];return v.Children.forEach(e,(n,s)=>{if(!v.isValidElement(n))return;let i=[...t,s];if(n.type===v.Fragment){r.push.apply(r,Ov(n.props.children,i));return}Fr(n.type===Ws,`[${typeof n.type=="string"?n.type:n.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Fr(!n.props.index||!n.props.children,"An index route cannot have child routes.");let l={id:n.props.id||i.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,middleware:n.props.middleware,loader:n.props.loader,action:n.props.action,hydrateFallbackElement:n.props.hydrateFallbackElement,HydrateFallback:n.props.HydrateFallback,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.hasErrorBoundary===!0||n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(l.children=Ov(n.props.children,i)),r.push(l)}),r}var Jf="get",Xf="application/x-www-form-urlencoded";function dm(e){return e!=null&&typeof e.tagName=="string"}function e5(e){return dm(e)&&e.tagName.toLowerCase()==="button"}function t5(e){return dm(e)&&e.tagName.toLowerCase()==="form"}function r5(e){return dm(e)&&e.tagName.toLowerCase()==="input"}function n5(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function s5(e,t){return e.button===0&&(!t||t==="_self")&&!n5(e)}function Tv(e=""){return new URLSearchParams(typeof e=="string"||Array.isArray(e)||e instanceof URLSearchParams?e:Object.keys(e).reduce((t,r)=>{let n=e[r];return t.concat(Array.isArray(n)?n.map(s=>[r,s]):[[r,n]])},[]))}function i5(e,t){let r=Tv(e);return t&&t.forEach((n,s)=>{r.has(s)||t.getAll(s).forEach(i=>{r.append(s,i)})}),r}var Ef=null;function a5(){if(Ef===null)try{new FormData(document.createElement("form"),0),Ef=!1}catch{Ef=!0}return Ef}var o5=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Tg(e){return e!=null&&!o5.has(e)?(gi(!1,`"${e}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Xf}"`),null):e}function l5(e,t){let r,n,s,i,l;if(t5(e)){let u=e.getAttribute("action");n=u?Ea(u,t):null,r=e.getAttribute("method")||Jf,s=Tg(e.getAttribute("enctype"))||Xf,i=new FormData(e)}else if(e5(e)||r5(e)&&(e.type==="submit"||e.type==="image")){let u=e.form;if(u==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let d=e.getAttribute("formaction")||u.getAttribute("action");if(n=d?Ea(d,t):null,r=e.getAttribute("formmethod")||u.getAttribute("method")||Jf,s=Tg(e.getAttribute("formenctype"))||Tg(u.getAttribute("enctype"))||Xf,i=new FormData(u,e),!a5()){let{name:m,type:f,value:p}=e;if(f==="image"){let y=m?`${m}.`:"";i.append(`${y}x`,"0"),i.append(`${y}y`,"0")}else m&&i.append(m,p)}}else{if(dm(e))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');r=Jf,n=null,s=Xf,l=e}return i&&s==="text/plain"&&(l=i,i=void 0),{action:n,method:r.toLowerCase(),encType:s,formData:i,body:l}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function ex(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function c5(e,t,r){let n=typeof e=="string"?new URL(e,typeof window>"u"?"server://singlefetch/":window.location.origin):e;return n.pathname==="/"?n.pathname=`_root.${r}`:t&&Ea(n.pathname,t)==="/"?n.pathname=`${t.replace(/\/$/,"")}/_root.${r}`:n.pathname=`${n.pathname.replace(/\/$/,"")}.${r}`,n}async function u5(e,t){if(e.id in t)return t[e.id];try{let r=await import(e.module);return t[e.id]=r,r}catch(r){return console.error(`Error loading route module \`${e.module}\`, reloading page...`),console.error(r),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function d5(e){return e==null?!1:e.href==null?e.rel==="preload"&&typeof e.imageSrcSet=="string"&&typeof e.imageSizes=="string":typeof e.rel=="string"&&typeof e.href=="string"}async function f5(e,t,r){let n=await Promise.all(e.map(async s=>{let i=t.routes[s.route.id];if(i){let l=await u5(i,r);return l.links?l.links():[]}return[]}));return g5(n.flat(1).filter(d5).filter(s=>s.rel==="stylesheet"||s.rel==="preload").map(s=>s.rel==="stylesheet"?{...s,rel:"prefetch",as:"style"}:{...s,rel:"prefetch"}))}function vj(e,t,r,n,s,i){let l=(d,m)=>r[m]?d.route.id!==r[m].route.id:!0,u=(d,m)=>{var f;return r[m].pathname!==d.pathname||((f=r[m].route.path)==null?void 0:f.endsWith("*"))&&r[m].params["*"]!==d.params["*"]};return i==="assets"?t.filter((d,m)=>l(d,m)||u(d,m)):i==="data"?t.filter((d,m)=>{var p;let f=n.routes[d.route.id];if(!f||!f.hasLoader)return!1;if(l(d,m)||u(d,m))return!0;if(d.route.shouldRevalidate){let y=d.route.shouldRevalidate({currentUrl:new URL(s.pathname+s.search+s.hash,window.origin),currentParams:((p=r[0])==null?void 0:p.params)||{},nextUrl:new URL(e,window.origin),nextParams:d.params,defaultShouldRevalidate:!0});if(typeof y=="boolean")return y}return!0}):[]}function h5(e,t,{includeHydrateFallback:r}={}){return m5(e.map(n=>{let s=t.routes[n.route.id];if(!s)return[];let i=[s.module];return s.clientActionModule&&(i=i.concat(s.clientActionModule)),s.clientLoaderModule&&(i=i.concat(s.clientLoaderModule)),r&&s.hydrateFallbackModule&&(i=i.concat(s.hydrateFallbackModule)),s.imports&&(i=i.concat(s.imports)),i}).flat(1))}function m5(e){return[...new Set(e)]}function p5(e){let t={},r=Object.keys(e).sort();for(let n of r)t[n]=e[n];return t}function g5(e,t){let r=new Set;return new Set(t),e.reduce((n,s)=>{let i=JSON.stringify(p5(s));return r.has(i)||(r.add(i),n.push({key:i,link:s})),n},[])}function hC(){let e=v.useContext(Tc);return ex(e,"You must render this element inside a <DataRouterContext.Provider> element"),e}function y5(){let e=v.useContext(um);return ex(e,"You must render this element inside a <DataRouterStateContext.Provider> element"),e}var tx=v.createContext(void 0);tx.displayName="FrameworkContext";function mC(){let e=v.useContext(tx);return ex(e,"You must render this element inside a <HydratedRouter> element"),e}function v5(e,t){let r=v.useContext(tx),[n,s]=v.useState(!1),[i,l]=v.useState(!1),{onFocus:u,onBlur:d,onMouseEnter:m,onMouseLeave:f,onTouchStart:p}=t,y=v.useRef(null);v.useEffect(()=>{if(e==="render"&&l(!0),e==="viewport"){let b=_=>{_.forEach(E=>{l(E.isIntersecting)})},S=new IntersectionObserver(b,{threshold:.5});return y.current&&S.observe(y.current),()=>{S.disconnect()}}},[e]),v.useEffect(()=>{if(n){let b=setTimeout(()=>{l(!0)},100);return()=>{clearTimeout(b)}}},[n]);let x=()=>{s(!0)},w=()=>{s(!1),l(!1)};return r?e!=="intent"?[i,y,{}]:[i,y,{onFocus:bu(u,x),onBlur:bu(d,w),onMouseEnter:bu(m,x),onMouseLeave:bu(f,w),onTouchStart:bu(p,x)}]:[!1,y,{}]}function bu(e,t){return r=>{e&&e(r),r.defaultPrevented||t(r)}}function x5({page:e,...t}){let{router:r}=hC(),n=v.useMemo(()=>sC(r.routes,e,r.basename),[r.routes,e,r.basename]);return n?v.createElement(b5,{page:e,matches:n,...t}):null}function w5(e){let{manifest:t,routeModules:r}=mC(),[n,s]=v.useState([]);return v.useEffect(()=>{let i=!1;return f5(e,t,r).then(l=>{i||s(l)}),()=>{i=!0}},[e,t,r]),n}function b5({page:e,matches:t,...r}){let n=Fa(),{manifest:s,routeModules:i}=mC(),{basename:l}=hC(),{loaderData:u,matches:d}=y5(),m=v.useMemo(()=>vj(e,t,d,s,n,"data"),[e,t,d,s,n]),f=v.useMemo(()=>vj(e,t,d,s,n,"assets"),[e,t,d,s,n]),p=v.useMemo(()=>{if(e===n.pathname+n.search+n.hash)return[];let w=new Set,b=!1;if(t.forEach(_=>{var C;let E=s.routes[_.route.id];!E||!E.hasLoader||(!m.some(O=>O.route.id===_.route.id)&&_.route.id in u&&((C=i[_.route.id])!=null&&C.shouldRevalidate)||E.hasClientLoader?b=!0:w.add(_.route.id))}),w.size===0)return[];let S=c5(e,l,"data");return b&&w.size>0&&S.searchParams.set("_routes",t.filter(_=>w.has(_.route.id)).map(_=>_.route.id).join(",")),[S.pathname+S.search]},[l,u,n,s,m,t,e,i]),y=v.useMemo(()=>h5(f,s),[f,s]),x=w5(f);return v.createElement(v.Fragment,null,p.map(w=>v.createElement("link",{key:w,rel:"prefetch",as:"fetch",href:w,...r})),y.map(w=>v.createElement("link",{key:w,rel:"modulepreload",href:w,...r})),x.map(({key:w,link:b})=>v.createElement("link",{key:w,nonce:r.nonce,...b})))}function j5(...e){return t=>{e.forEach(r=>{typeof r=="function"?r(t):r!=null&&(r.current=t)})}}var pC=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{pC&&(window.__reactRouterVersion="7.9.4")}catch{}function S5({basename:e,children:t,window:r}){let n=v.useRef();n.current==null&&(n.current=cD({window:r,v5Compat:!0}));let s=n.current,[i,l]=v.useState({action:s.action,location:s.location}),u=v.useCallback(d=>{v.startTransition(()=>l(d))},[l]);return v.useLayoutEffect(()=>s.listen(u),[s,u]),v.createElement(QD,{basename:e,children:t,location:i.location,navigationType:i.action,navigator:s})}var gC=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,yC=v.forwardRef(function({onClick:t,discover:r="render",prefetch:n="none",relative:s,reloadDocument:i,replace:l,state:u,target:d,to:m,preventScrollReset:f,viewTransition:p,...y},x){let{basename:w}=v.useContext(Bi),b=typeof m=="string"&&gC.test(m),S,_=!1;if(typeof m=="string"&&b&&(S=m,pC))try{let L=new URL(window.location.href),q=m.startsWith("//")?new URL(L.protocol+m):new URL(m),z=Ea(q.pathname,w);q.origin===L.origin&&z!=null?m=z+q.search+q.hash:_=!0}catch{gi(!1,`<Link to="${m}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let E=$D(m,{relative:s}),[C,O,T]=v5(n,y),P=C5(m,{replace:l,state:u,target:d,preventScrollReset:f,relative:s,viewTransition:p});function F(L){t&&t(L),L.defaultPrevented||P(L)}let H=v.createElement("a",{...y,...T,href:S||E,onClick:_||i?t:F,ref:j5(x,O),target:d,"data-discover":!b&&r==="render"?"true":void 0});return C&&!b?v.createElement(v.Fragment,null,H,v.createElement(x5,{page:E})):H});yC.displayName="Link";var k5=v.forwardRef(function({"aria-current":t="page",caseSensitive:r=!1,className:n="",end:s=!1,style:i,to:l,viewTransition:u,children:d,...m},f){let p=ud(l,{relative:m.relative}),y=Fa(),x=v.useContext(um),{navigator:w,basename:b}=v.useContext(Bi),S=x!=null&&T5(p)&&u===!0,_=w.encodeLocation?w.encodeLocation(p).pathname:p.pathname,E=y.pathname,C=x&&x.navigation&&x.navigation.location?x.navigation.location.pathname:null;r||(E=E.toLowerCase(),C=C?C.toLowerCase():null,_=_.toLowerCase()),C&&b&&(C=Ea(C,b)||C);const O=_!=="/"&&_.endsWith("/")?_.length-1:_.length;let T=E===_||!s&&E.startsWith(_)&&E.charAt(O)==="/",P=C!=null&&(C===_||!s&&C.startsWith(_)&&C.charAt(_.length)==="/"),F={isActive:T,isPending:P,isTransitioning:S},H=T?t:void 0,L;typeof n=="function"?L=n(F):L=[n,T?"active":null,P?"pending":null,S?"transitioning":null].filter(Boolean).join(" ");let q=typeof i=="function"?i(F):i;return v.createElement(yC,{...m,"aria-current":H,className:L,ref:f,style:q,to:l,viewTransition:u},typeof d=="function"?d(F):d)});k5.displayName="NavLink";var _5=v.forwardRef(({discover:e="render",fetcherKey:t,navigate:r,reloadDocument:n,replace:s,state:i,method:l=Jf,action:u,onSubmit:d,relative:m,preventScrollReset:f,viewTransition:p,...y},x)=>{let w=P5(),b=O5(u,{relative:m}),S=l.toLowerCase()==="get"?"get":"post",_=typeof u=="string"&&gC.test(u),E=C=>{if(d&&d(C),C.defaultPrevented)return;C.preventDefault();let O=C.nativeEvent.submitter,T=(O==null?void 0:O.getAttribute("formmethod"))||l;w(O||C.currentTarget,{fetcherKey:t,method:T,navigate:r,replace:s,state:i,relative:m,preventScrollReset:f,viewTransition:p})};return v.createElement("form",{ref:x,method:S,action:b,onSubmit:n?d:E,...y,"data-discover":!_&&e==="render"?"true":void 0})});_5.displayName="Form";function N5(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function vC(e){let t=v.useContext(Tc);return Fr(t,N5(e)),t}function C5(e,{target:t,replace:r,state:n,preventScrollReset:s,relative:i,viewTransition:l}={}){let u=Ds(),d=Fa(),m=ud(e,{relative:i});return v.useCallback(f=>{if(s5(f,t)){f.preventDefault();let p=r!==void 0?r:Ku(d)===Ku(m);u(e,{replace:p,state:n,preventScrollReset:s,relative:i,viewTransition:l})}},[d,u,m,r,n,t,e,s,i,l])}function rx(e){gi(typeof URLSearchParams<"u","You cannot use the `useSearchParams` hook in a browser that does not support the URLSearchParams API. If you need to support Internet Explorer 11, we recommend you load a polyfill such as https://github.com/ungap/url-search-params.");let t=v.useRef(Tv(e)),r=v.useRef(!1),n=Fa(),s=v.useMemo(()=>i5(n.search,r.current?null:t.current),[n.search]),i=Ds(),l=v.useCallback((u,d)=>{const m=Tv(typeof u=="function"?u(new URLSearchParams(s)):u);r.current=!0,i("?"+m,d)},[i,s]);return[s,l]}var E5=0,A5=()=>`__${String(++E5)}__`;function P5(){let{router:e}=vC("useSubmit"),{basename:t}=v.useContext(Bi),r=KD();return v.useCallback(async(n,s={})=>{let{action:i,method:l,encType:u,formData:d,body:m}=l5(n,t);if(s.navigate===!1){let f=s.fetcherKey||A5();await e.fetch(f,r,s.action||i,{preventScrollReset:s.preventScrollReset,formData:d,body:m,formMethod:s.method||l,formEncType:s.encType||u,flushSync:s.flushSync})}else await e.navigate(s.action||i,{preventScrollReset:s.preventScrollReset,formData:d,body:m,formMethod:s.method||l,formEncType:s.encType||u,replace:s.replace,state:s.state,fromRouteId:r,flushSync:s.flushSync,viewTransition:s.viewTransition})},[e,t,r])}function O5(e,{relative:t}={}){let{basename:r}=v.useContext(Bi),n=v.useContext(ia);Fr(n,"useFormAction must be used inside a RouteContext");let[s]=n.matches.slice(-1),i={...ud(e||".",{relative:t})},l=Fa();if(e==null){i.search=l.search;let u=new URLSearchParams(i.search),d=u.getAll("index");if(d.some(f=>f==="")){u.delete("index"),d.filter(p=>p).forEach(p=>u.append("index",p));let f=u.toString();i.search=f?`?${f}`:""}}return(!e||e===".")&&s.route.index&&(i.search=i.search?i.search.replace(/^\?/,"?index&"):"?index"),r!=="/"&&(i.pathname=i.pathname==="/"?r:ka([r,i.pathname])),Ku(i)}function T5(e,{relative:t}={}){let r=v.useContext(lC);Fr(r!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:n}=vC("useViewTransitionState"),s=ud(e,{relative:t});if(!r.isTransitioning)return!1;let i=Ea(r.currentLocation.pathname,n)||r.currentLocation.pathname,l=Ea(r.nextLocation.pathname,n)||r.nextLocation.pathname;return uh(s.pathname,l)!=null||uh(s.pathname,i)!=null}var xC=nC();const I5="modulepreload",D5=function(e,t){return new URL(e,t).href},xj={},dd=function(t,r,n){let s=Promise.resolve();if(r&&r.length>0){let l=function(f){return Promise.all(f.map(p=>Promise.resolve(p).then(y=>({status:"fulfilled",value:y}),y=>({status:"rejected",reason:y}))))};const u=document.getElementsByTagName("link"),d=document.querySelector("meta[property=csp-nonce]"),m=(d==null?void 0:d.nonce)||(d==null?void 0:d.getAttribute("nonce"));s=l(r.map(f=>{if(f=D5(f,n),f in xj)return;xj[f]=!0;const p=f.endsWith(".css"),y=p?'[rel="stylesheet"]':"";if(!!n)for(let b=u.length-1;b>=0;b--){const S=u[b];if(S.href===f&&(!p||S.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${f}"]${y}`))return;const w=document.createElement("link");if(w.rel=p?"stylesheet":I5,p||(w.as="script"),w.crossOrigin="",w.href=f,m&&w.setAttribute("nonce",m),document.head.appendChild(w),p)return new Promise((b,S)=>{w.addEventListener("load",b),w.addEventListener("error",()=>S(new Error(`Unable to preload CSS for ${f}`)))})}))}function i(l){const u=new Event("vite:preloadError",{cancelable:!0});if(u.payload=l,window.dispatchEvent(u),!u.defaultPrevented)throw l}return s.then(l=>{for(const u of l||[])u.status==="rejected"&&i(u.reason);return t().catch(i)})},R5=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...r)=>dd(async()=>{const{default:n}=await Promise.resolve().then(()=>Dc);return{default:n}},[],import.meta.url).then(({default:n})=>n(...r)):t=fetch,(...r)=>t(...r)};class nx extends Error{constructor(t,r="FunctionsError",n){super(t),this.name=r,this.context=n}}class wj extends nx{constructor(t){super("Failed to send a request to the Edge Function","FunctionsFetchError",t)}}class bj extends nx{constructor(t){super("Relay Error invoking the Edge Function","FunctionsRelayError",t)}}class jj extends nx{constructor(t){super("Edge Function returned a non-2xx status code","FunctionsHttpError",t)}}var Iv;(function(e){e.Any="any",e.ApNortheast1="ap-northeast-1",e.ApNortheast2="ap-northeast-2",e.ApSouth1="ap-south-1",e.ApSoutheast1="ap-southeast-1",e.ApSoutheast2="ap-southeast-2",e.CaCentral1="ca-central-1",e.EuCentral1="eu-central-1",e.EuWest1="eu-west-1",e.EuWest2="eu-west-2",e.EuWest3="eu-west-3",e.SaEast1="sa-east-1",e.UsEast1="us-east-1",e.UsWest1="us-west-1",e.UsWest2="us-west-2"})(Iv||(Iv={}));var $5=function(e,t,r,n){function s(i){return i instanceof r?i:new r(function(l){l(i)})}return new(r||(r=Promise))(function(i,l){function u(f){try{m(n.next(f))}catch(p){l(p)}}function d(f){try{m(n.throw(f))}catch(p){l(p)}}function m(f){f.done?i(f.value):s(f.value).then(u,d)}m((n=n.apply(e,t||[])).next())})};class M5{constructor(t,{headers:r={},customFetch:n,region:s=Iv.Any}={}){this.url=t,this.headers=r,this.region=s,this.fetch=R5(n)}setAuth(t){this.headers.Authorization=`Bearer ${t}`}invoke(t){return $5(this,arguments,void 0,function*(r,n={}){var s;try{const{headers:i,method:l,body:u,signal:d}=n;let m={},{region:f}=n;f||(f=this.region);const p=new URL(`${this.url}/${r}`);f&&f!=="any"&&(m["x-region"]=f,p.searchParams.set("forceFunctionRegion",f));let y;u&&(i&&!Object.prototype.hasOwnProperty.call(i,"Content-Type")||!i)&&(typeof Blob<"u"&&u instanceof Blob||u instanceof ArrayBuffer?(m["Content-Type"]="application/octet-stream",y=u):typeof u=="string"?(m["Content-Type"]="text/plain",y=u):typeof FormData<"u"&&u instanceof FormData?y=u:(m["Content-Type"]="application/json",y=JSON.stringify(u)));const x=yield this.fetch(p.toString(),{method:l||"POST",headers:Object.assign(Object.assign(Object.assign({},m),this.headers),i),body:y,signal:d}).catch(_=>{throw _.name==="AbortError"?_:new wj(_)}),w=x.headers.get("x-relay-error");if(w&&w==="true")throw new bj(x);if(!x.ok)throw new jj(x);let b=((s=x.headers.get("Content-Type"))!==null&&s!==void 0?s:"text/plain").split(";")[0].trim(),S;return b==="application/json"?S=yield x.json():b==="application/octet-stream"?S=yield x.blob():b==="text/event-stream"?S=x:b==="multipart/form-data"?S=yield x.formData():S=yield x.text(),{data:S,error:null,response:x}}catch(i){return i instanceof Error&&i.name==="AbortError"?{data:null,error:new wj(i)}:{data:null,error:i,response:i instanceof jj||i instanceof bj?i.context:void 0}}})}}var Rn={},Wl={},Vl={},ql={},Hl={},Kl={},F5=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},wc=F5();const L5=wc.fetch,wC=wc.fetch.bind(wc),bC=wc.Headers,z5=wc.Request,U5=wc.Response,Dc=Object.freeze(Object.defineProperty({__proto__:null,Headers:bC,Request:z5,Response:U5,default:wC,fetch:L5},Symbol.toStringTag,{value:"Module"})),B5=Q4(Dc);var Af={},Sj;function jC(){if(Sj)return Af;Sj=1,Object.defineProperty(Af,"__esModule",{value:!0});class e extends Error{constructor(r){super(r.message),this.name="PostgrestError",this.details=r.details,this.hint=r.hint,this.code=r.code}}return Af.default=e,Af}var kj;function SC(){if(kj)return Kl;kj=1;var e=Kl&&Kl.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(Kl,"__esModule",{value:!0});const t=e(B5),r=e(jC());class n{constructor(i){var l,u;this.shouldThrowOnError=!1,this.method=i.method,this.url=i.url,this.headers=new Headers(i.headers),this.schema=i.schema,this.body=i.body,this.shouldThrowOnError=(l=i.shouldThrowOnError)!==null&&l!==void 0?l:!1,this.signal=i.signal,this.isMaybeSingle=(u=i.isMaybeSingle)!==null&&u!==void 0?u:!1,i.fetch?this.fetch=i.fetch:typeof fetch>"u"?this.fetch=t.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(i,l){return this.headers=new Headers(this.headers),this.headers.set(i,l),this}then(i,l){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const u=this.fetch;let d=u(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async m=>{var f,p,y,x;let w=null,b=null,S=null,_=m.status,E=m.statusText;if(m.ok){if(this.method!=="HEAD"){const P=await m.text();P===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((f=this.headers.get("Accept"))===null||f===void 0)&&f.includes("application/vnd.pgrst.plan+text"))?b=P:b=JSON.parse(P))}const O=(p=this.headers.get("Prefer"))===null||p===void 0?void 0:p.match(/count=(exact|planned|estimated)/),T=(y=m.headers.get("content-range"))===null||y===void 0?void 0:y.split("/");O&&T&&T.length>1&&(S=parseInt(T[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(b)&&(b.length>1?(w={code:"PGRST116",details:`Results contain ${b.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},b=null,S=null,_=406,E="Not Acceptable"):b.length===1?b=b[0]:b=null)}else{const O=await m.text();try{w=JSON.parse(O),Array.isArray(w)&&m.status===404&&(b=[],w=null,_=200,E="OK")}catch{m.status===404&&O===""?(_=204,E="No Content"):w={message:O}}if(w&&this.isMaybeSingle&&(!((x=w==null?void 0:w.details)===null||x===void 0)&&x.includes("0 rows"))&&(w=null,_=200,E="OK"),w&&this.shouldThrowOnError)throw new r.default(w)}return{error:w,data:b,count:S,status:_,statusText:E}});return this.shouldThrowOnError||(d=d.catch(m=>{var f,p,y;return{error:{message:`${(f=m==null?void 0:m.name)!==null&&f!==void 0?f:"FetchError"}: ${m==null?void 0:m.message}`,details:`${(p=m==null?void 0:m.stack)!==null&&p!==void 0?p:""}`,hint:"",code:`${(y=m==null?void 0:m.code)!==null&&y!==void 0?y:""}`},data:null,count:null,status:0,statusText:""}})),d.then(i,l)}returns(){return this}overrideTypes(){return this}}return Kl.default=n,Kl}var _j;function kC(){if(_j)return Hl;_j=1;var e=Hl&&Hl.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(Hl,"__esModule",{value:!0});const t=e(SC());class r extends t.default{select(s){let i=!1;const l=(s??"*").split("").map(u=>/\s/.test(u)&&!i?"":(u==='"'&&(i=!i),u)).join("");return this.url.searchParams.set("select",l),this.headers.append("Prefer","return=representation"),this}order(s,{ascending:i=!0,nullsFirst:l,foreignTable:u,referencedTable:d=u}={}){const m=d?`${d}.order`:"order",f=this.url.searchParams.get(m);return this.url.searchParams.set(m,`${f?`${f},`:""}${s}.${i?"asc":"desc"}${l===void 0?"":l?".nullsfirst":".nullslast"}`),this}limit(s,{foreignTable:i,referencedTable:l=i}={}){const u=typeof l>"u"?"limit":`${l}.limit`;return this.url.searchParams.set(u,`${s}`),this}range(s,i,{foreignTable:l,referencedTable:u=l}={}){const d=typeof u>"u"?"offset":`${u}.offset`,m=typeof u>"u"?"limit":`${u}.limit`;return this.url.searchParams.set(d,`${s}`),this.url.searchParams.set(m,`${i-s+1}`),this}abortSignal(s){return this.signal=s,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:s=!1,verbose:i=!1,settings:l=!1,buffers:u=!1,wal:d=!1,format:m="text"}={}){var f;const p=[s?"analyze":null,i?"verbose":null,l?"settings":null,u?"buffers":null,d?"wal":null].filter(Boolean).join("|"),y=(f=this.headers.get("Accept"))!==null&&f!==void 0?f:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${m}; for="${y}"; options=${p};`),m==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(s){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${s}`),this}}return Hl.default=r,Hl}var Nj;function sx(){if(Nj)return ql;Nj=1;var e=ql&&ql.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(ql,"__esModule",{value:!0});const t=e(kC());class r extends t.default{eq(s,i){return this.url.searchParams.append(s,`eq.${i}`),this}neq(s,i){return this.url.searchParams.append(s,`neq.${i}`),this}gt(s,i){return this.url.searchParams.append(s,`gt.${i}`),this}gte(s,i){return this.url.searchParams.append(s,`gte.${i}`),this}lt(s,i){return this.url.searchParams.append(s,`lt.${i}`),this}lte(s,i){return this.url.searchParams.append(s,`lte.${i}`),this}like(s,i){return this.url.searchParams.append(s,`like.${i}`),this}likeAllOf(s,i){return this.url.searchParams.append(s,`like(all).{${i.join(",")}}`),this}likeAnyOf(s,i){return this.url.searchParams.append(s,`like(any).{${i.join(",")}}`),this}ilike(s,i){return this.url.searchParams.append(s,`ilike.${i}`),this}ilikeAllOf(s,i){return this.url.searchParams.append(s,`ilike(all).{${i.join(",")}}`),this}ilikeAnyOf(s,i){return this.url.searchParams.append(s,`ilike(any).{${i.join(",")}}`),this}is(s,i){return this.url.searchParams.append(s,`is.${i}`),this}in(s,i){const l=Array.from(new Set(i)).map(u=>typeof u=="string"&&new RegExp("[,()]").test(u)?`"${u}"`:`${u}`).join(",");return this.url.searchParams.append(s,`in.(${l})`),this}contains(s,i){return typeof i=="string"?this.url.searchParams.append(s,`cs.${i}`):Array.isArray(i)?this.url.searchParams.append(s,`cs.{${i.join(",")}}`):this.url.searchParams.append(s,`cs.${JSON.stringify(i)}`),this}containedBy(s,i){return typeof i=="string"?this.url.searchParams.append(s,`cd.${i}`):Array.isArray(i)?this.url.searchParams.append(s,`cd.{${i.join(",")}}`):this.url.searchParams.append(s,`cd.${JSON.stringify(i)}`),this}rangeGt(s,i){return this.url.searchParams.append(s,`sr.${i}`),this}rangeGte(s,i){return this.url.searchParams.append(s,`nxl.${i}`),this}rangeLt(s,i){return this.url.searchParams.append(s,`sl.${i}`),this}rangeLte(s,i){return this.url.searchParams.append(s,`nxr.${i}`),this}rangeAdjacent(s,i){return this.url.searchParams.append(s,`adj.${i}`),this}overlaps(s,i){return typeof i=="string"?this.url.searchParams.append(s,`ov.${i}`):this.url.searchParams.append(s,`ov.{${i.join(",")}}`),this}textSearch(s,i,{config:l,type:u}={}){let d="";u==="plain"?d="pl":u==="phrase"?d="ph":u==="websearch"&&(d="w");const m=l===void 0?"":`(${l})`;return this.url.searchParams.append(s,`${d}fts${m}.${i}`),this}match(s){return Object.entries(s).forEach(([i,l])=>{this.url.searchParams.append(i,`eq.${l}`)}),this}not(s,i,l){return this.url.searchParams.append(s,`not.${i}.${l}`),this}or(s,{foreignTable:i,referencedTable:l=i}={}){const u=l?`${l}.or`:"or";return this.url.searchParams.append(u,`(${s})`),this}filter(s,i,l){return this.url.searchParams.append(s,`${i}.${l}`),this}}return ql.default=r,ql}var Cj;function _C(){if(Cj)return Vl;Cj=1;var e=Vl&&Vl.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(Vl,"__esModule",{value:!0});const t=e(sx());class r{constructor(s,{headers:i={},schema:l,fetch:u}){this.url=s,this.headers=new Headers(i),this.schema=l,this.fetch=u}select(s,i){const{head:l=!1,count:u}=i??{},d=l?"HEAD":"GET";let m=!1;const f=(s??"*").split("").map(p=>/\s/.test(p)&&!m?"":(p==='"'&&(m=!m),p)).join("");return this.url.searchParams.set("select",f),u&&this.headers.append("Prefer",`count=${u}`),new t.default({method:d,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(s,{count:i,defaultToNull:l=!0}={}){var u;const d="POST";if(i&&this.headers.append("Prefer",`count=${i}`),l||this.headers.append("Prefer","missing=default"),Array.isArray(s)){const m=s.reduce((f,p)=>f.concat(Object.keys(p)),[]);if(m.length>0){const f=[...new Set(m)].map(p=>`"${p}"`);this.url.searchParams.set("columns",f.join(","))}}return new t.default({method:d,url:this.url,headers:this.headers,schema:this.schema,body:s,fetch:(u=this.fetch)!==null&&u!==void 0?u:fetch})}upsert(s,{onConflict:i,ignoreDuplicates:l=!1,count:u,defaultToNull:d=!0}={}){var m;const f="POST";if(this.headers.append("Prefer",`resolution=${l?"ignore":"merge"}-duplicates`),i!==void 0&&this.url.searchParams.set("on_conflict",i),u&&this.headers.append("Prefer",`count=${u}`),d||this.headers.append("Prefer","missing=default"),Array.isArray(s)){const p=s.reduce((y,x)=>y.concat(Object.keys(x)),[]);if(p.length>0){const y=[...new Set(p)].map(x=>`"${x}"`);this.url.searchParams.set("columns",y.join(","))}}return new t.default({method:f,url:this.url,headers:this.headers,schema:this.schema,body:s,fetch:(m=this.fetch)!==null&&m!==void 0?m:fetch})}update(s,{count:i}={}){var l;const u="PATCH";return i&&this.headers.append("Prefer",`count=${i}`),new t.default({method:u,url:this.url,headers:this.headers,schema:this.schema,body:s,fetch:(l=this.fetch)!==null&&l!==void 0?l:fetch})}delete({count:s}={}){var i;const l="DELETE";return s&&this.headers.append("Prefer",`count=${s}`),new t.default({method:l,url:this.url,headers:this.headers,schema:this.schema,fetch:(i=this.fetch)!==null&&i!==void 0?i:fetch})}}return Vl.default=r,Vl}var Ej;function W5(){if(Ej)return Wl;Ej=1;var e=Wl&&Wl.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(Wl,"__esModule",{value:!0});const t=e(_C()),r=e(sx());class n{constructor(i,{headers:l={},schema:u,fetch:d}={}){this.url=i,this.headers=new Headers(l),this.schemaName=u,this.fetch=d}from(i){const l=new URL(`${this.url}/${i}`);return new t.default(l,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(i){return new n(this.url,{headers:this.headers,schema:i,fetch:this.fetch})}rpc(i,l={},{head:u=!1,get:d=!1,count:m}={}){var f;let p;const y=new URL(`${this.url}/rpc/${i}`);let x;u||d?(p=u?"HEAD":"GET",Object.entries(l).filter(([b,S])=>S!==void 0).map(([b,S])=>[b,Array.isArray(S)?`{${S.join(",")}}`:`${S}`]).forEach(([b,S])=>{y.searchParams.append(b,S)})):(p="POST",x=l);const w=new Headers(this.headers);return m&&w.set("Prefer",`count=${m}`),new r.default({method:p,url:y,headers:w,schema:this.schemaName,body:x,fetch:(f=this.fetch)!==null&&f!==void 0?f:fetch})}}return Wl.default=n,Wl}var Aj;function V5(){if(Aj)return Rn;Aj=1;var e=Rn&&Rn.__importDefault||function(u){return u&&u.__esModule?u:{default:u}};Object.defineProperty(Rn,"__esModule",{value:!0}),Rn.PostgrestError=Rn.PostgrestBuilder=Rn.PostgrestTransformBuilder=Rn.PostgrestFilterBuilder=Rn.PostgrestQueryBuilder=Rn.PostgrestClient=void 0;const t=e(W5());Rn.PostgrestClient=t.default;const r=e(_C());Rn.PostgrestQueryBuilder=r.default;const n=e(sx());Rn.PostgrestFilterBuilder=n.default;const s=e(kC());Rn.PostgrestTransformBuilder=s.default;const i=e(SC());Rn.PostgrestBuilder=i.default;const l=e(jC());return Rn.PostgrestError=l.default,Rn.default={PostgrestClient:t.default,PostgrestQueryBuilder:r.default,PostgrestFilterBuilder:n.default,PostgrestTransformBuilder:s.default,PostgrestBuilder:i.default,PostgrestError:l.default},Rn}var q5=V5();const H5=Ui(q5),{PostgrestClient:K5,PostgrestQueryBuilder:BZ,PostgrestFilterBuilder:WZ,PostgrestTransformBuilder:VZ,PostgrestBuilder:qZ,PostgrestError:HZ}=H5;class G5{static detectEnvironment(){var t;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((t=navigator.userAgent)===null||t===void 0)&&t.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const r=process.versions;if(r&&r.node){const n=r.node,s=parseInt(n.replace(/^v/,"").split(".")[0]);return s>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${s} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${s} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const t=this.detectEnvironment();if(t.constructor)return t.constructor;let r=t.error||"WebSocket not supported in this environment.";throw t.workaround&&(r+=`

Suggested solution: ${t.workaround}`),new Error(r)}static createWebSocket(t,r){const n=this.getWebSocketConstructor();return new n(t,r)}static isWebSocketSupported(){try{const t=this.detectEnvironment();return t.type==="native"||t.type==="ws"}catch{return!1}}}const Y5="2.74.0",J5=`realtime-js/${Y5}`,X5="1.0.0",Dv=1e4,Q5=1e3,Z5=100;var zu;(function(e){e[e.connecting=0]="connecting",e[e.open=1]="open",e[e.closing=2]="closing",e[e.closed=3]="closed"})(zu||(zu={}));var bn;(function(e){e.closed="closed",e.errored="errored",e.joined="joined",e.joining="joining",e.leaving="leaving"})(bn||(bn={}));var Ti;(function(e){e.close="phx_close",e.error="phx_error",e.join="phx_join",e.reply="phx_reply",e.leave="phx_leave",e.access_token="access_token"})(Ti||(Ti={}));var Rv;(function(e){e.websocket="websocket"})(Rv||(Rv={}));var Ho;(function(e){e.Connecting="connecting",e.Open="open",e.Closing="closing",e.Closed="closed"})(Ho||(Ho={}));class eR{constructor(){this.HEADER_LENGTH=1}decode(t,r){return t.constructor===ArrayBuffer?r(this._binaryDecode(t)):r(typeof t=="string"?JSON.parse(t):{})}_binaryDecode(t){const r=new DataView(t),n=new TextDecoder;return this._decodeBroadcast(t,r,n)}_decodeBroadcast(t,r,n){const s=r.getUint8(1),i=r.getUint8(2);let l=this.HEADER_LENGTH+2;const u=n.decode(t.slice(l,l+s));l=l+s;const d=n.decode(t.slice(l,l+i));l=l+i;const m=JSON.parse(n.decode(t.slice(l,t.byteLength)));return{ref:null,topic:u,event:d,payload:m}}}class NC{constructor(t,r){this.callback=t,this.timerCalc=r,this.timer=void 0,this.tries=0,this.callback=t,this.timerCalc=r}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var jr;(function(e){e.abstime="abstime",e.bool="bool",e.date="date",e.daterange="daterange",e.float4="float4",e.float8="float8",e.int2="int2",e.int4="int4",e.int4range="int4range",e.int8="int8",e.int8range="int8range",e.json="json",e.jsonb="jsonb",e.money="money",e.numeric="numeric",e.oid="oid",e.reltime="reltime",e.text="text",e.time="time",e.timestamp="timestamp",e.timestamptz="timestamptz",e.timetz="timetz",e.tsrange="tsrange",e.tstzrange="tstzrange"})(jr||(jr={}));const Pj=(e,t,r={})=>{var n;const s=(n=r.skipTypes)!==null&&n!==void 0?n:[];return t?Object.keys(t).reduce((i,l)=>(i[l]=tR(l,e,t,s),i),{}):{}},tR=(e,t,r,n)=>{const s=t.find(u=>u.name===e),i=s==null?void 0:s.type,l=r[e];return i&&!n.includes(i)?CC(i,l):$v(l)},CC=(e,t)=>{if(e.charAt(0)==="_"){const r=e.slice(1,e.length);return iR(t,r)}switch(e){case jr.bool:return rR(t);case jr.float4:case jr.float8:case jr.int2:case jr.int4:case jr.int8:case jr.numeric:case jr.oid:return nR(t);case jr.json:case jr.jsonb:return sR(t);case jr.timestamp:return aR(t);case jr.abstime:case jr.date:case jr.daterange:case jr.int4range:case jr.int8range:case jr.money:case jr.reltime:case jr.text:case jr.time:case jr.timestamptz:case jr.timetz:case jr.tsrange:case jr.tstzrange:return $v(t);default:return $v(t)}},$v=e=>e,rR=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},nR=e=>{if(typeof e=="string"){const t=parseFloat(e);if(!Number.isNaN(t))return t}return e},sR=e=>{if(typeof e=="string")try{return JSON.parse(e)}catch(t){return console.log(`JSON parse error: ${t}`),e}return e},iR=(e,t)=>{if(typeof e!="string")return e;const r=e.length-1,n=e[r];if(e[0]==="{"&&n==="}"){let i;const l=e.slice(1,r);try{i=JSON.parse("["+l+"]")}catch{i=l?l.split(","):[]}return i.map(u=>CC(t,u))}return e},aR=e=>typeof e=="string"?e.replace(" ","T"):e,EC=e=>{let t=e;return t=t.replace(/^ws/i,"http"),t=t.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),t.replace(/\/+$/,"")+"/api/broadcast"};class Ig{constructor(t,r,n={},s=Dv){this.channel=t,this.event=r,this.payload=n,this.timeout=s,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(t){this.timeout=t,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(t){this.payload=Object.assign(Object.assign({},this.payload),t)}receive(t,r){var n;return this._hasReceived(t)&&r((n=this.receivedResp)===null||n===void 0?void 0:n.response),this.recHooks.push({status:t,callback:r}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const t=r=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=r,this._matchReceive(r)};this.channel._on(this.refEvent,{},t),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(t,r){this.refEvent&&this.channel._trigger(this.refEvent,{status:t,response:r})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:t,response:r}){this.recHooks.filter(n=>n.status===t).forEach(n=>n.callback(r))}_hasReceived(t){return this.receivedResp&&this.receivedResp.status===t}}var Oj;(function(e){e.SYNC="sync",e.JOIN="join",e.LEAVE="leave"})(Oj||(Oj={}));class Uu{constructor(t,r){this.channel=t,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const n=(r==null?void 0:r.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(n.state,{},s=>{const{onJoin:i,onLeave:l,onSync:u}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Uu.syncState(this.state,s,i,l),this.pendingDiffs.forEach(d=>{this.state=Uu.syncDiff(this.state,d,i,l)}),this.pendingDiffs=[],u()}),this.channel._on(n.diff,{},s=>{const{onJoin:i,onLeave:l,onSync:u}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(s):(this.state=Uu.syncDiff(this.state,s,i,l),u())}),this.onJoin((s,i,l)=>{this.channel._trigger("presence",{event:"join",key:s,currentPresences:i,newPresences:l})}),this.onLeave((s,i,l)=>{this.channel._trigger("presence",{event:"leave",key:s,currentPresences:i,leftPresences:l})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(t,r,n,s){const i=this.cloneDeep(t),l=this.transformState(r),u={},d={};return this.map(i,(m,f)=>{l[m]||(d[m]=f)}),this.map(l,(m,f)=>{const p=i[m];if(p){const y=f.map(S=>S.presence_ref),x=p.map(S=>S.presence_ref),w=f.filter(S=>x.indexOf(S.presence_ref)<0),b=p.filter(S=>y.indexOf(S.presence_ref)<0);w.length>0&&(u[m]=w),b.length>0&&(d[m]=b)}else u[m]=f}),this.syncDiff(i,{joins:u,leaves:d},n,s)}static syncDiff(t,r,n,s){const{joins:i,leaves:l}={joins:this.transformState(r.joins),leaves:this.transformState(r.leaves)};return n||(n=()=>{}),s||(s=()=>{}),this.map(i,(u,d)=>{var m;const f=(m=t[u])!==null&&m!==void 0?m:[];if(t[u]=this.cloneDeep(d),f.length>0){const p=t[u].map(x=>x.presence_ref),y=f.filter(x=>p.indexOf(x.presence_ref)<0);t[u].unshift(...y)}n(u,f,d)}),this.map(l,(u,d)=>{let m=t[u];if(!m)return;const f=d.map(p=>p.presence_ref);m=m.filter(p=>f.indexOf(p.presence_ref)<0),t[u]=m,s(u,m,d),m.length===0&&delete t[u]}),t}static map(t,r){return Object.getOwnPropertyNames(t).map(n=>r(n,t[n]))}static transformState(t){return t=this.cloneDeep(t),Object.getOwnPropertyNames(t).reduce((r,n)=>{const s=t[n];return"metas"in s?r[n]=s.metas.map(i=>(i.presence_ref=i.phx_ref,delete i.phx_ref,delete i.phx_ref_prev,i)):r[n]=s,r},{})}static cloneDeep(t){return JSON.parse(JSON.stringify(t))}onJoin(t){this.caller.onJoin=t}onLeave(t){this.caller.onLeave=t}onSync(t){this.caller.onSync=t}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var Tj;(function(e){e.ALL="*",e.INSERT="INSERT",e.UPDATE="UPDATE",e.DELETE="DELETE"})(Tj||(Tj={}));var Bu;(function(e){e.BROADCAST="broadcast",e.PRESENCE="presence",e.POSTGRES_CHANGES="postgres_changes",e.SYSTEM="system"})(Bu||(Bu={}));var va;(function(e){e.SUBSCRIBED="SUBSCRIBED",e.TIMED_OUT="TIMED_OUT",e.CLOSED="CLOSED",e.CHANNEL_ERROR="CHANNEL_ERROR"})(va||(va={}));class ix{constructor(t,r={config:{}},n){var s,i;if(this.topic=t,this.params=r,this.socket=n,this.bindings={},this.state=bn.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=t.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},r.config),this.timeout=this.socket.timeout,this.joinPush=new Ig(this,Ti.join,this.params,this.timeout),this.rejoinTimer=new NC(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=bn.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(l=>l.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=bn.closed,this.socket._remove(this)}),this._onError(l=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,l),this.state=bn.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=bn.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",l=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,l),this.state=bn.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Ti.reply,{},(l,u)=>{this._trigger(this._replyEventName(u),l)}),this.presence=new Uu(this),this.broadcastEndpointURL=EC(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((i=(s=this.params.config)===null||s===void 0?void 0:s.broadcast)===null||i===void 0)&&i.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(t,r=this.timeout){var n,s,i;if(this.socket.isConnected()||this.socket.connect(),this.state==bn.closed){const{config:{broadcast:l,presence:u,private:d}}=this.params,m=(s=(n=this.bindings.postgres_changes)===null||n===void 0?void 0:n.map(x=>x.filter))!==null&&s!==void 0?s:[],f=!!this.bindings[Bu.PRESENCE]&&this.bindings[Bu.PRESENCE].length>0||((i=this.params.config.presence)===null||i===void 0?void 0:i.enabled)===!0,p={},y={broadcast:l,presence:Object.assign(Object.assign({},u),{enabled:f}),postgres_changes:m,private:d};this.socket.accessTokenValue&&(p.access_token=this.socket.accessTokenValue),this._onError(x=>t==null?void 0:t(va.CHANNEL_ERROR,x)),this._onClose(()=>t==null?void 0:t(va.CLOSED)),this.updateJoinPayload(Object.assign({config:y},p)),this.joinedOnce=!0,this._rejoin(r),this.joinPush.receive("ok",async({postgres_changes:x})=>{var w;if(this.socket.setAuth(),x===void 0){t==null||t(va.SUBSCRIBED);return}else{const b=this.bindings.postgres_changes,S=(w=b==null?void 0:b.length)!==null&&w!==void 0?w:0,_=[];for(let E=0;E<S;E++){const C=b[E],{filter:{event:O,schema:T,table:P,filter:F}}=C,H=x&&x[E];if(H&&H.event===O&&H.schema===T&&H.table===P&&H.filter===F)_.push(Object.assign(Object.assign({},C),{id:H.id}));else{this.unsubscribe(),this.state=bn.errored,t==null||t(va.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=_,t&&t(va.SUBSCRIBED);return}}).receive("error",x=>{this.state=bn.errored,t==null||t(va.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(x).join(", ")||"error")))}).receive("timeout",()=>{t==null||t(va.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(t,r={}){return await this.send({type:"presence",event:"track",payload:t},r.timeout||this.timeout)}async untrack(t={}){return await this.send({type:"presence",event:"untrack"},t)}on(t,r,n){return this.state===bn.joined&&t===Bu.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(t,r,n)}async send(t,r={}){var n,s;if(!this._canPush()&&t.type==="broadcast"){const{event:i,payload:l}=t,d={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:i,payload:l,private:this.private}]})};try{const m=await this._fetchWithTimeout(this.broadcastEndpointURL,d,(n=r.timeout)!==null&&n!==void 0?n:this.timeout);return await((s=m.body)===null||s===void 0?void 0:s.cancel()),m.ok?"ok":"error"}catch(m){return m.name==="AbortError"?"timed out":"error"}}else return new Promise(i=>{var l,u,d;const m=this._push(t.type,t,r.timeout||this.timeout);t.type==="broadcast"&&!(!((d=(u=(l=this.params)===null||l===void 0?void 0:l.config)===null||u===void 0?void 0:u.broadcast)===null||d===void 0)&&d.ack)&&i("ok"),m.receive("ok",()=>i("ok")),m.receive("error",()=>i("error")),m.receive("timeout",()=>i("timed out"))})}updateJoinPayload(t){this.joinPush.updatePayload(t)}unsubscribe(t=this.timeout){this.state=bn.leaving;const r=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Ti.close,"leave",this._joinRef())};this.joinPush.destroy();let n=null;return new Promise(s=>{n=new Ig(this,Ti.leave,{},t),n.receive("ok",()=>{r(),s("ok")}).receive("timeout",()=>{r(),s("timed out")}).receive("error",()=>{s("error")}),n.send(),this._canPush()||n.trigger("ok",{})}).finally(()=>{n==null||n.destroy()})}teardown(){this.pushBuffer.forEach(t=>t.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=bn.closed,this.bindings={}}async _fetchWithTimeout(t,r,n){const s=new AbortController,i=setTimeout(()=>s.abort(),n),l=await this.socket.fetch(t,Object.assign(Object.assign({},r),{signal:s.signal}));return clearTimeout(i),l}_push(t,r,n=this.timeout){if(!this.joinedOnce)throw`tried to push '${t}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let s=new Ig(this,t,r,n);return this._canPush()?s.send():this._addToPushBuffer(s),s}_addToPushBuffer(t){if(t.startTimeout(),this.pushBuffer.push(t),this.pushBuffer.length>Z5){const r=this.pushBuffer.shift();r&&(r.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${r.event}`,r.payload))}}_onMessage(t,r,n){return r}_isMember(t){return this.topic===t}_joinRef(){return this.joinPush.ref}_trigger(t,r,n){var s,i;const l=t.toLocaleLowerCase(),{close:u,error:d,leave:m,join:f}=Ti;if(n&&[u,d,m,f].indexOf(l)>=0&&n!==this._joinRef())return;let y=this._onMessage(l,r,n);if(r&&!y)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(l)?(s=this.bindings.postgres_changes)===null||s===void 0||s.filter(x=>{var w,b,S;return((w=x.filter)===null||w===void 0?void 0:w.event)==="*"||((S=(b=x.filter)===null||b===void 0?void 0:b.event)===null||S===void 0?void 0:S.toLocaleLowerCase())===l}).map(x=>x.callback(y,n)):(i=this.bindings[l])===null||i===void 0||i.filter(x=>{var w,b,S,_,E,C;if(["broadcast","presence","postgres_changes"].includes(l))if("id"in x){const O=x.id,T=(w=x.filter)===null||w===void 0?void 0:w.event;return O&&((b=r.ids)===null||b===void 0?void 0:b.includes(O))&&(T==="*"||(T==null?void 0:T.toLocaleLowerCase())===((S=r.data)===null||S===void 0?void 0:S.type.toLocaleLowerCase()))}else{const O=(E=(_=x==null?void 0:x.filter)===null||_===void 0?void 0:_.event)===null||E===void 0?void 0:E.toLocaleLowerCase();return O==="*"||O===((C=r==null?void 0:r.event)===null||C===void 0?void 0:C.toLocaleLowerCase())}else return x.type.toLocaleLowerCase()===l}).map(x=>{if(typeof y=="object"&&"ids"in y){const w=y.data,{schema:b,table:S,commit_timestamp:_,type:E,errors:C}=w;y=Object.assign(Object.assign({},{schema:b,table:S,commit_timestamp:_,eventType:E,new:{},old:{},errors:C}),this._getPayloadRecords(w))}x.callback(y,n)})}_isClosed(){return this.state===bn.closed}_isJoined(){return this.state===bn.joined}_isJoining(){return this.state===bn.joining}_isLeaving(){return this.state===bn.leaving}_replyEventName(t){return`chan_reply_${t}`}_on(t,r,n){const s=t.toLocaleLowerCase(),i={type:s,filter:r,callback:n};return this.bindings[s]?this.bindings[s].push(i):this.bindings[s]=[i],this}_off(t,r){const n=t.toLocaleLowerCase();return this.bindings[n]&&(this.bindings[n]=this.bindings[n].filter(s=>{var i;return!(((i=s.type)===null||i===void 0?void 0:i.toLocaleLowerCase())===n&&ix.isEqual(s.filter,r))})),this}static isEqual(t,r){if(Object.keys(t).length!==Object.keys(r).length)return!1;for(const n in t)if(t[n]!==r[n])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(t){this._on(Ti.close,{},t)}_onError(t){this._on(Ti.error,{},r=>t(r))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(t=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=bn.joining,this.joinPush.resend(t))}_getPayloadRecords(t){const r={new:{},old:{}};return(t.type==="INSERT"||t.type==="UPDATE")&&(r.new=Pj(t.columns,t.record)),(t.type==="UPDATE"||t.type==="DELETE")&&(r.old=Pj(t.columns,t.old_record)),r}}const Dg=()=>{},Pf={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},oR=[1e3,2e3,5e3,1e4],lR=1e4,cR=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class uR{constructor(t,r){var n;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=Dv,this.transport=null,this.heartbeatIntervalMs=Pf.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=Dg,this.ref=0,this.reconnectTimer=null,this.logger=Dg,this.conn=null,this.sendBuffer=[],this.serializer=new eR,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=s=>{let i;return s?i=s:typeof fetch>"u"?i=(...l)=>dd(async()=>{const{default:u}=await Promise.resolve().then(()=>Dc);return{default:u}},void 0,import.meta.url).then(({default:u})=>u(...l)).catch(u=>{throw new Error(`Failed to load @supabase/node-fetch: ${u.message}. This is required for HTTP requests in Node.js environments without native fetch.`)}):i=fetch,(...l)=>i(...l)},!(!((n=r==null?void 0:r.params)===null||n===void 0)&&n.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=r.params.apikey,this.endPoint=`${t}/${Rv.websocket}`,this.httpEndpoint=EC(t),this._initializeOptions(r),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(r==null?void 0:r.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=G5.createWebSocket(this.endpointURL())}catch(t){this._setConnectionState("disconnected");const r=t.message;throw r.includes("Node.js")?new Error(`${r}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${r}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:X5}))}disconnect(t,r){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const n=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(n),this._setConnectionState("disconnected")},t?this.conn.close(t,r??""):this.conn.close(),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(t){const r=await t.unsubscribe();return this.channels.length===0&&this.disconnect(),r}async removeAllChannels(){const t=await Promise.all(this.channels.map(r=>r.unsubscribe()));return this.channels=[],this.disconnect(),t}log(t,r,n){this.logger(t,r,n)}connectionState(){switch(this.conn&&this.conn.readyState){case zu.connecting:return Ho.Connecting;case zu.open:return Ho.Open;case zu.closing:return Ho.Closing;default:return Ho.Closed}}isConnected(){return this.connectionState()===Ho.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(t,r={config:{}}){const n=`realtime:${t}`,s=this.getChannels().find(i=>i.topic===n);if(s)return s;{const i=new ix(`realtime:${t}`,r,this);return this.channels.push(i),i}}push(t){const{topic:r,event:n,payload:s,ref:i}=t,l=()=>{this.encode(t,u=>{var d;(d=this.conn)===null||d===void 0||d.send(u)})};this.log("push",`${r} ${n} (${i})`,s),this.isConnected()?l():this.sendBuffer.push(l)}async setAuth(t=null){this._authPromise=this._performAuth(t);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var t;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(r){this.log("error","error in heartbeat callback",r)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(r){this.log("error","error in heartbeat callback",r)}this._wasManualDisconnect=!1,(t=this.conn)===null||t===void 0||t.close(Q5,"heartbeat timeout"),setTimeout(()=>{var r;this.isConnected()||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout()},Pf.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(r){this.log("error","error in heartbeat callback",r)}this._setAuthSafely("heartbeat")}onHeartbeat(t){this.heartbeatCallback=t}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(t=>t()),this.sendBuffer=[])}_makeRef(){let t=this.ref+1;return t===this.ref?this.ref=0:this.ref=t,this.ref.toString()}_leaveOpenTopic(t){let r=this.channels.find(n=>n.topic===t&&(n._isJoined()||n._isJoining()));r&&(this.log("transport",`leaving duplicate topic "${t}"`),r.unsubscribe())}_remove(t){this.channels=this.channels.filter(r=>r.topic!==t.topic)}_onConnMessage(t){this.decode(t.data,r=>{if(r.topic==="phoenix"&&r.event==="phx_reply")try{this.heartbeatCallback(r.payload.status==="ok"?"ok":"error")}catch(m){this.log("error","error in heartbeat callback",m)}r.ref&&r.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:n,event:s,payload:i,ref:l}=r,u=l?`(${l})`:"",d=i.status||"";this.log("receive",`${d} ${n} ${s} ${u}`.trim(),i),this.channels.filter(m=>m._isMember(n)).forEach(m=>m._trigger(s,i,l)),this._triggerStateCallbacks("message",r)})}_clearTimer(t){var r;t==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):t==="reconnect"&&((r=this.reconnectTimer)===null||r===void 0||r.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=t=>this._onConnError(t),this.conn.onmessage=t=>this._onConnMessage(t),this.conn.onclose=t=>this._onConnClose(t))}_teardownConnection(){this.conn&&(this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null),this._clearAllTimers(),this.channels.forEach(t=>t.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const t=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(t),this.workerRef.onerror=r=>{this.log("worker","worker error",r.message),this.workerRef.terminate()},this.workerRef.onmessage=r=>{r.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(t){var r;this._setConnectionState("disconnected"),this.log("transport","close",t),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout(),this._triggerStateCallbacks("close",t)}_onConnError(t){this._setConnectionState("disconnected"),this.log("transport",`${t}`),this._triggerChanError(),this._triggerStateCallbacks("error",t)}_triggerChanError(){this.channels.forEach(t=>t._trigger(Ti.error))}_appendParams(t,r){if(Object.keys(r).length===0)return t;const n=t.match(/\?/)?"&":"?",s=new URLSearchParams(r);return`${t}${n}${s}`}_workerObjectUrl(t){let r;if(t)r=t;else{const n=new Blob([cR],{type:"application/javascript"});r=URL.createObjectURL(n)}return r}_setConnectionState(t,r=!1){this._connectionState=t,t==="connecting"?this._wasManualDisconnect=!1:t==="disconnecting"&&(this._wasManualDisconnect=r)}async _performAuth(t=null){let r;t?r=t:this.accessToken?r=await this.accessToken():r=this.accessTokenValue,this.accessTokenValue!=r&&(this.accessTokenValue=r,this.channels.forEach(n=>{const s={access_token:r,version:J5};r&&n.updateJoinPayload(s),n.joinedOnce&&n._isJoined()&&n._push(Ti.access_token,{access_token:r})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(t="general"){this.setAuth().catch(r=>{this.log("error",`error setting auth in ${t}`,r)})}_triggerStateCallbacks(t,r){try{this.stateChangeCallbacks[t].forEach(n=>{try{n(r)}catch(s){this.log("error",`error in ${t} callback`,s)}})}catch(n){this.log("error",`error triggering ${t} callbacks`,n)}}_setupReconnectionTimer(){this.reconnectTimer=new NC(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},Pf.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(t){var r,n,s,i,l,u,d,m,f;if(this.transport=(r=t==null?void 0:t.transport)!==null&&r!==void 0?r:null,this.timeout=(n=t==null?void 0:t.timeout)!==null&&n!==void 0?n:Dv,this.heartbeatIntervalMs=(s=t==null?void 0:t.heartbeatIntervalMs)!==null&&s!==void 0?s:Pf.HEARTBEAT_INTERVAL,this.worker=(i=t==null?void 0:t.worker)!==null&&i!==void 0?i:!1,this.accessToken=(l=t==null?void 0:t.accessToken)!==null&&l!==void 0?l:null,this.heartbeatCallback=(u=t==null?void 0:t.heartbeatCallback)!==null&&u!==void 0?u:Dg,t!=null&&t.params&&(this.params=t.params),t!=null&&t.logger&&(this.logger=t.logger),(t!=null&&t.logLevel||t!=null&&t.log_level)&&(this.logLevel=t.logLevel||t.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(d=t==null?void 0:t.reconnectAfterMs)!==null&&d!==void 0?d:(p=>oR[p-1]||lR),this.encode=(m=t==null?void 0:t.encode)!==null&&m!==void 0?m:((p,y)=>y(JSON.stringify(p))),this.decode=(f=t==null?void 0:t.decode)!==null&&f!==void 0?f:this.serializer.decode.bind(this.serializer),this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=t==null?void 0:t.workerUrl}}}class ax extends Error{constructor(t){super(t),this.__isStorageError=!0,this.name="StorageError"}}function hn(e){return typeof e=="object"&&e!==null&&"__isStorageError"in e}class dR extends ax{constructor(t,r,n){super(t),this.name="StorageApiError",this.status=r,this.statusCode=n}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class Mv extends ax{constructor(t,r){super(t),this.name="StorageUnknownError",this.originalError=r}}var fR=function(e,t,r,n){function s(i){return i instanceof r?i:new r(function(l){l(i)})}return new(r||(r=Promise))(function(i,l){function u(f){try{m(n.next(f))}catch(p){l(p)}}function d(f){try{m(n.throw(f))}catch(p){l(p)}}function m(f){f.done?i(f.value):s(f.value).then(u,d)}m((n=n.apply(e,t||[])).next())})};const AC=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...r)=>dd(async()=>{const{default:n}=await Promise.resolve().then(()=>Dc);return{default:n}},void 0,import.meta.url).then(({default:n})=>n(...r)):t=fetch,(...r)=>t(...r)},hR=()=>fR(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield dd(()=>Promise.resolve().then(()=>Dc),void 0,import.meta.url)).Response:Response}),Fv=e=>{if(Array.isArray(e))return e.map(r=>Fv(r));if(typeof e=="function"||e!==Object(e))return e;const t={};return Object.entries(e).forEach(([r,n])=>{const s=r.replace(/([-_][a-z])/gi,i=>i.toUpperCase().replace(/[-_]/g,""));t[s]=Fv(n)}),t},mR=e=>{if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)};var ml=function(e,t,r,n){function s(i){return i instanceof r?i:new r(function(l){l(i)})}return new(r||(r=Promise))(function(i,l){function u(f){try{m(n.next(f))}catch(p){l(p)}}function d(f){try{m(n.throw(f))}catch(p){l(p)}}function m(f){f.done?i(f.value):s(f.value).then(u,d)}m((n=n.apply(e,t||[])).next())})};const Rg=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),pR=(e,t,r)=>ml(void 0,void 0,void 0,function*(){const n=yield hR();e instanceof n&&!(r!=null&&r.noResolveJson)?e.json().then(s=>{const i=e.status||500,l=(s==null?void 0:s.statusCode)||i+"";t(new dR(Rg(s),i,l))}).catch(s=>{t(new Mv(Rg(s),s))}):t(new Mv(Rg(e),e))}),gR=(e,t,r,n)=>{const s={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"||!n?s:(mR(n)?(s.headers=Object.assign({"Content-Type":"application/json"},t==null?void 0:t.headers),s.body=JSON.stringify(n)):s.body=n,t!=null&&t.duplex&&(s.duplex=t.duplex),Object.assign(Object.assign({},s),r))};function fd(e,t,r,n,s,i){return ml(this,void 0,void 0,function*(){return new Promise((l,u)=>{e(r,gR(t,n,s,i)).then(d=>{if(!d.ok)throw d;return n!=null&&n.noResolveJson?d:d.json()}).then(d=>l(d)).catch(d=>pR(d,u,n))})})}function dh(e,t,r,n){return ml(this,void 0,void 0,function*(){return fd(e,"GET",t,r,n)})}function Xi(e,t,r,n,s){return ml(this,void 0,void 0,function*(){return fd(e,"POST",t,n,s,r)})}function Lv(e,t,r,n,s){return ml(this,void 0,void 0,function*(){return fd(e,"PUT",t,n,s,r)})}function yR(e,t,r,n){return ml(this,void 0,void 0,function*(){return fd(e,"HEAD",t,Object.assign(Object.assign({},r),{noResolveJson:!0}),n)})}function PC(e,t,r,n,s){return ml(this,void 0,void 0,function*(){return fd(e,"DELETE",t,n,s,r)})}var vR=function(e,t,r,n){function s(i){return i instanceof r?i:new r(function(l){l(i)})}return new(r||(r=Promise))(function(i,l){function u(f){try{m(n.next(f))}catch(p){l(p)}}function d(f){try{m(n.throw(f))}catch(p){l(p)}}function m(f){f.done?i(f.value):s(f.value).then(u,d)}m((n=n.apply(e,t||[])).next())})};class xR{constructor(t,r){this.downloadFn=t,this.shouldThrowOnError=r}then(t,r){return this.execute().then(t,r)}execute(){return vR(this,void 0,void 0,function*(){try{return{data:(yield this.downloadFn()).body,error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(hn(t))return{data:null,error:t};throw t}})}}var wR=function(e,t,r,n){function s(i){return i instanceof r?i:new r(function(l){l(i)})}return new(r||(r=Promise))(function(i,l){function u(f){try{m(n.next(f))}catch(p){l(p)}}function d(f){try{m(n.throw(f))}catch(p){l(p)}}function m(f){f.done?i(f.value):s(f.value).then(u,d)}m((n=n.apply(e,t||[])).next())})};class bR{constructor(t,r){this.downloadFn=t,this.shouldThrowOnError=r}asStream(){return new xR(this.downloadFn,this.shouldThrowOnError)}then(t,r){return this.execute().then(t,r)}execute(){return wR(this,void 0,void 0,function*(){try{return{data:yield(yield this.downloadFn()).blob(),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(hn(t))return{data:null,error:t};throw t}})}}var Es=function(e,t,r,n){function s(i){return i instanceof r?i:new r(function(l){l(i)})}return new(r||(r=Promise))(function(i,l){function u(f){try{m(n.next(f))}catch(p){l(p)}}function d(f){try{m(n.throw(f))}catch(p){l(p)}}function m(f){f.done?i(f.value):s(f.value).then(u,d)}m((n=n.apply(e,t||[])).next())})};const jR={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},Ij={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class SR{constructor(t,r={},n,s){this.shouldThrowOnError=!1,this.url=t,this.headers=r,this.bucketId=n,this.fetch=AC(s)}throwOnError(){return this.shouldThrowOnError=!0,this}uploadOrUpdate(t,r,n,s){return Es(this,void 0,void 0,function*(){try{let i;const l=Object.assign(Object.assign({},Ij),s);let u=Object.assign(Object.assign({},this.headers),t==="POST"&&{"x-upsert":String(l.upsert)});const d=l.metadata;typeof Blob<"u"&&n instanceof Blob?(i=new FormData,i.append("cacheControl",l.cacheControl),d&&i.append("metadata",this.encodeMetadata(d)),i.append("",n)):typeof FormData<"u"&&n instanceof FormData?(i=n,i.append("cacheControl",l.cacheControl),d&&i.append("metadata",this.encodeMetadata(d))):(i=n,u["cache-control"]=`max-age=${l.cacheControl}`,u["content-type"]=l.contentType,d&&(u["x-metadata"]=this.toBase64(this.encodeMetadata(d)))),s!=null&&s.headers&&(u=Object.assign(Object.assign({},u),s.headers));const m=this._removeEmptyFolders(r),f=this._getFinalPath(m),p=yield(t=="PUT"?Lv:Xi)(this.fetch,`${this.url}/object/${f}`,i,Object.assign({headers:u},l!=null&&l.duplex?{duplex:l.duplex}:{}));return{data:{path:m,id:p.Id,fullPath:p.Key},error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(hn(i))return{data:null,error:i};throw i}})}upload(t,r,n){return Es(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",t,r,n)})}uploadToSignedUrl(t,r,n,s){return Es(this,void 0,void 0,function*(){const i=this._removeEmptyFolders(t),l=this._getFinalPath(i),u=new URL(this.url+`/object/upload/sign/${l}`);u.searchParams.set("token",r);try{let d;const m=Object.assign({upsert:Ij.upsert},s),f=Object.assign(Object.assign({},this.headers),{"x-upsert":String(m.upsert)});typeof Blob<"u"&&n instanceof Blob?(d=new FormData,d.append("cacheControl",m.cacheControl),d.append("",n)):typeof FormData<"u"&&n instanceof FormData?(d=n,d.append("cacheControl",m.cacheControl)):(d=n,f["cache-control"]=`max-age=${m.cacheControl}`,f["content-type"]=m.contentType);const p=yield Lv(this.fetch,u.toString(),d,{headers:f});return{data:{path:i,fullPath:p.Key},error:null}}catch(d){if(this.shouldThrowOnError)throw d;if(hn(d))return{data:null,error:d};throw d}})}createSignedUploadUrl(t,r){return Es(this,void 0,void 0,function*(){try{let n=this._getFinalPath(t);const s=Object.assign({},this.headers);r!=null&&r.upsert&&(s["x-upsert"]="true");const i=yield Xi(this.fetch,`${this.url}/object/upload/sign/${n}`,{},{headers:s}),l=new URL(this.url+i.url),u=l.searchParams.get("token");if(!u)throw new ax("No token returned by API");return{data:{signedUrl:l.toString(),path:t,token:u},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(hn(n))return{data:null,error:n};throw n}})}update(t,r,n){return Es(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",t,r,n)})}move(t,r,n){return Es(this,void 0,void 0,function*(){try{return{data:yield Xi(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:t,destinationKey:r,destinationBucket:n==null?void 0:n.destinationBucket},{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(hn(s))return{data:null,error:s};throw s}})}copy(t,r,n){return Es(this,void 0,void 0,function*(){try{return{data:{path:(yield Xi(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:t,destinationKey:r,destinationBucket:n==null?void 0:n.destinationBucket},{headers:this.headers})).Key},error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(hn(s))return{data:null,error:s};throw s}})}createSignedUrl(t,r,n){return Es(this,void 0,void 0,function*(){try{let s=this._getFinalPath(t),i=yield Xi(this.fetch,`${this.url}/object/sign/${s}`,Object.assign({expiresIn:r},n!=null&&n.transform?{transform:n.transform}:{}),{headers:this.headers});const l=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return i={signedUrl:encodeURI(`${this.url}${i.signedURL}${l}`)},{data:i,error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(hn(s))return{data:null,error:s};throw s}})}createSignedUrls(t,r,n){return Es(this,void 0,void 0,function*(){try{const s=yield Xi(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:r,paths:t},{headers:this.headers}),i=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return{data:s.map(l=>Object.assign(Object.assign({},l),{signedUrl:l.signedURL?encodeURI(`${this.url}${l.signedURL}${i}`):null})),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(hn(s))return{data:null,error:s};throw s}})}download(t,r){const s=typeof(r==null?void 0:r.transform)<"u"?"render/image/authenticated":"object",i=this.transformOptsToQueryString((r==null?void 0:r.transform)||{}),l=i?`?${i}`:"",u=this._getFinalPath(t),d=()=>dh(this.fetch,`${this.url}/${s}/${u}${l}`,{headers:this.headers,noResolveJson:!0});return new bR(d,this.shouldThrowOnError)}info(t){return Es(this,void 0,void 0,function*(){const r=this._getFinalPath(t);try{const n=yield dh(this.fetch,`${this.url}/object/info/${r}`,{headers:this.headers});return{data:Fv(n),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(hn(n))return{data:null,error:n};throw n}})}exists(t){return Es(this,void 0,void 0,function*(){const r=this._getFinalPath(t);try{return yield yR(this.fetch,`${this.url}/object/${r}`,{headers:this.headers}),{data:!0,error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(hn(n)&&n instanceof Mv){const s=n.originalError;if([400,404].includes(s==null?void 0:s.status))return{data:!1,error:n}}throw n}})}getPublicUrl(t,r){const n=this._getFinalPath(t),s=[],i=r!=null&&r.download?`download=${r.download===!0?"":r.download}`:"";i!==""&&s.push(i);const u=typeof(r==null?void 0:r.transform)<"u"?"render/image":"object",d=this.transformOptsToQueryString((r==null?void 0:r.transform)||{});d!==""&&s.push(d);let m=s.join("&");return m!==""&&(m=`?${m}`),{data:{publicUrl:encodeURI(`${this.url}/${u}/public/${n}${m}`)}}}remove(t){return Es(this,void 0,void 0,function*(){try{return{data:yield PC(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:t},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(hn(r))return{data:null,error:r};throw r}})}list(t,r,n){return Es(this,void 0,void 0,function*(){try{const s=Object.assign(Object.assign(Object.assign({},jR),r),{prefix:t||""});return{data:yield Xi(this.fetch,`${this.url}/object/list/${this.bucketId}`,s,{headers:this.headers},n),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(hn(s))return{data:null,error:s};throw s}})}listV2(t,r){return Es(this,void 0,void 0,function*(){try{const n=Object.assign({},t);return{data:yield Xi(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,n,{headers:this.headers},r),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(hn(n))return{data:null,error:n};throw n}})}encodeMetadata(t){return JSON.stringify(t)}toBase64(t){return typeof Buffer<"u"?Buffer.from(t).toString("base64"):btoa(t)}_getFinalPath(t){return`${this.bucketId}/${t.replace(/^\/+/,"")}`}_removeEmptyFolders(t){return t.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(t){const r=[];return t.width&&r.push(`width=${t.width}`),t.height&&r.push(`height=${t.height}`),t.resize&&r.push(`resize=${t.resize}`),t.format&&r.push(`format=${t.format}`),t.quality&&r.push(`quality=${t.quality}`),r.join("&")}}const kR="2.74.0",_R={"X-Client-Info":`storage-js/${kR}`};var Gl=function(e,t,r,n){function s(i){return i instanceof r?i:new r(function(l){l(i)})}return new(r||(r=Promise))(function(i,l){function u(f){try{m(n.next(f))}catch(p){l(p)}}function d(f){try{m(n.throw(f))}catch(p){l(p)}}function m(f){f.done?i(f.value):s(f.value).then(u,d)}m((n=n.apply(e,t||[])).next())})};class NR{constructor(t,r={},n,s){this.shouldThrowOnError=!1;const i=new URL(t);s!=null&&s.useNewHostname&&/supabase\.(co|in|red)$/.test(i.hostname)&&!i.hostname.includes("storage.supabase.")&&(i.hostname=i.hostname.replace("supabase.","storage.supabase.")),this.url=i.href.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},_R),r),this.fetch=AC(n)}throwOnError(){return this.shouldThrowOnError=!0,this}listBuckets(){return Gl(this,void 0,void 0,function*(){try{return{data:yield dh(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(hn(t))return{data:null,error:t};throw t}})}getBucket(t){return Gl(this,void 0,void 0,function*(){try{return{data:yield dh(this.fetch,`${this.url}/bucket/${t}`,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(hn(r))return{data:null,error:r};throw r}})}createBucket(t){return Gl(this,arguments,void 0,function*(r,n={public:!1}){try{return{data:yield Xi(this.fetch,`${this.url}/bucket`,{id:r,name:r,type:n.type,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(hn(s))return{data:null,error:s};throw s}})}updateBucket(t,r){return Gl(this,void 0,void 0,function*(){try{return{data:yield Lv(this.fetch,`${this.url}/bucket/${t}`,{id:t,name:t,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(hn(n))return{data:null,error:n};throw n}})}emptyBucket(t){return Gl(this,void 0,void 0,function*(){try{return{data:yield Xi(this.fetch,`${this.url}/bucket/${t}/empty`,{},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(hn(r))return{data:null,error:r};throw r}})}deleteBucket(t){return Gl(this,void 0,void 0,function*(){try{return{data:yield PC(this.fetch,`${this.url}/bucket/${t}`,{},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(hn(r))return{data:null,error:r};throw r}})}}class CR extends NR{constructor(t,r={},n,s){super(t,r,n,s)}from(t){return new SR(this.url,this.headers,t,this.fetch)}}const ER="2.74.0";let Du="";typeof Deno<"u"?Du="deno":typeof document<"u"?Du="web":typeof navigator<"u"&&navigator.product==="ReactNative"?Du="react-native":Du="node";const AR={"X-Client-Info":`supabase-js-${Du}/${ER}`},PR={headers:AR},OR={schema:"public"},TR={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},IR={};var DR=function(e,t,r,n){function s(i){return i instanceof r?i:new r(function(l){l(i)})}return new(r||(r=Promise))(function(i,l){function u(f){try{m(n.next(f))}catch(p){l(p)}}function d(f){try{m(n.throw(f))}catch(p){l(p)}}function m(f){f.done?i(f.value):s(f.value).then(u,d)}m((n=n.apply(e,t||[])).next())})};const RR=e=>{let t;return e?t=e:typeof fetch>"u"?t=wC:t=fetch,(...r)=>t(...r)},$R=()=>typeof Headers>"u"?bC:Headers,MR=(e,t,r)=>{const n=RR(r),s=$R();return(i,l)=>DR(void 0,void 0,void 0,function*(){var u;const d=(u=yield t())!==null&&u!==void 0?u:e;let m=new s(l==null?void 0:l.headers);return m.has("apikey")||m.set("apikey",e),m.has("Authorization")||m.set("Authorization",`Bearer ${d}`),n(i,Object.assign(Object.assign({},l),{headers:m}))})};var FR=function(e,t,r,n){function s(i){return i instanceof r?i:new r(function(l){l(i)})}return new(r||(r=Promise))(function(i,l){function u(f){try{m(n.next(f))}catch(p){l(p)}}function d(f){try{m(n.throw(f))}catch(p){l(p)}}function m(f){f.done?i(f.value):s(f.value).then(u,d)}m((n=n.apply(e,t||[])).next())})};function LR(e){return e.endsWith("/")?e:e+"/"}function zR(e,t){var r,n;const{db:s,auth:i,realtime:l,global:u}=e,{db:d,auth:m,realtime:f,global:p}=t,y={db:Object.assign(Object.assign({},d),s),auth:Object.assign(Object.assign({},m),i),realtime:Object.assign(Object.assign({},f),l),storage:{},global:Object.assign(Object.assign(Object.assign({},p),u),{headers:Object.assign(Object.assign({},(r=p==null?void 0:p.headers)!==null&&r!==void 0?r:{}),(n=u==null?void 0:u.headers)!==null&&n!==void 0?n:{})}),accessToken:()=>FR(this,void 0,void 0,function*(){return""})};return e.accessToken?y.accessToken=e.accessToken:delete y.accessToken,y}function UR(e){const t=e==null?void 0:e.trim();if(!t)throw new Error("supabaseUrl is required.");if(!t.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(LR(t))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}const OC="2.74.0",oc=30*1e3,zv=3,$g=zv*oc,BR="http://localhost:9999",WR="supabase.auth.token",VR={"X-Client-Info":`gotrue-js/${OC}`},Uv="X-Supabase-Api-Version",TC={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},qR=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,HR=600*1e3;class Gu extends Error{constructor(t,r,n){super(t),this.__isAuthError=!0,this.name="AuthError",this.status=r,this.code=n}}function pt(e){return typeof e=="object"&&e!==null&&"__isAuthError"in e}class KR extends Gu{constructor(t,r,n){super(t,r,n),this.name="AuthApiError",this.status=r,this.code=n}}function GR(e){return pt(e)&&e.name==="AuthApiError"}class Ko extends Gu{constructor(t,r){super(t),this.name="AuthUnknownError",this.originalError=r}}class wo extends Gu{constructor(t,r,n,s){super(t,n,s),this.name=r,this.status=n}}class oo extends wo{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function YR(e){return pt(e)&&e.name==="AuthSessionMissingError"}class Yl extends wo{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Of extends wo{constructor(t){super(t,"AuthInvalidCredentialsError",400,void 0)}}class Tf extends wo{constructor(t,r=null){super(t,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function JR(e){return pt(e)&&e.name==="AuthImplicitGrantRedirectError"}class Dj extends wo{constructor(t,r=null){super(t,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Bv extends wo{constructor(t,r){super(t,"AuthRetryableFetchError",r,void 0)}}function Mg(e){return pt(e)&&e.name==="AuthRetryableFetchError"}class Rj extends wo{constructor(t,r,n){super(t,"AuthWeakPasswordError",r,"weak_password"),this.reasons=n}}class Wv extends wo{constructor(t){super(t,"AuthInvalidJwtError",400,"invalid_jwt")}}const fh="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),$j=` 	
\r=`.split(""),XR=(()=>{const e=new Array(128);for(let t=0;t<e.length;t+=1)e[t]=-1;for(let t=0;t<$j.length;t+=1)e[$j[t].charCodeAt(0)]=-2;for(let t=0;t<fh.length;t+=1)e[fh[t].charCodeAt(0)]=t;return e})();function Mj(e,t,r){if(e!==null)for(t.queue=t.queue<<8|e,t.queuedBits+=8;t.queuedBits>=6;){const n=t.queue>>t.queuedBits-6&63;r(fh[n]),t.queuedBits-=6}else if(t.queuedBits>0)for(t.queue=t.queue<<6-t.queuedBits,t.queuedBits=6;t.queuedBits>=6;){const n=t.queue>>t.queuedBits-6&63;r(fh[n]),t.queuedBits-=6}}function IC(e,t,r){const n=XR[e];if(n>-1)for(t.queue=t.queue<<6|n,t.queuedBits+=6;t.queuedBits>=8;)r(t.queue>>t.queuedBits-8&255),t.queuedBits-=8;else{if(n===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(e)}"`)}}function Fj(e){const t=[],r=l=>{t.push(String.fromCodePoint(l))},n={utf8seq:0,codepoint:0},s={queue:0,queuedBits:0},i=l=>{e$(l,n,r)};for(let l=0;l<e.length;l+=1)IC(e.charCodeAt(l),s,i);return t.join("")}function QR(e,t){if(e<=127){t(e);return}else if(e<=2047){t(192|e>>6),t(128|e&63);return}else if(e<=65535){t(224|e>>12),t(128|e>>6&63),t(128|e&63);return}else if(e<=1114111){t(240|e>>18),t(128|e>>12&63),t(128|e>>6&63),t(128|e&63);return}throw new Error(`Unrecognized Unicode codepoint: ${e.toString(16)}`)}function ZR(e,t){for(let r=0;r<e.length;r+=1){let n=e.charCodeAt(r);if(n>55295&&n<=56319){const s=(n-55296)*1024&65535;n=(e.charCodeAt(r+1)-56320&65535|s)+65536,r+=1}QR(n,t)}}function e$(e,t,r){if(t.utf8seq===0){if(e<=127){r(e);return}for(let n=1;n<6;n+=1)if((e>>7-n&1)===0){t.utf8seq=n;break}if(t.utf8seq===2)t.codepoint=e&31;else if(t.utf8seq===3)t.codepoint=e&15;else if(t.utf8seq===4)t.codepoint=e&7;else throw new Error("Invalid UTF-8 sequence");t.utf8seq-=1}else if(t.utf8seq>0){if(e<=127)throw new Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|e&63,t.utf8seq-=1,t.utf8seq===0&&r(t.codepoint)}}function mc(e){const t=[],r={queue:0,queuedBits:0},n=s=>{t.push(s)};for(let s=0;s<e.length;s+=1)IC(e.charCodeAt(s),r,n);return new Uint8Array(t)}function t$(e){const t=[];return ZR(e,r=>t.push(r)),new Uint8Array(t)}function Yo(e){const t=[],r={queue:0,queuedBits:0},n=s=>{t.push(s)};return e.forEach(s=>Mj(s,r,n)),Mj(null,r,n),t.join("")}function r$(e){return Math.round(Date.now()/1e3)+e}function n$(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){const t=Math.random()*16|0;return(e=="x"?t:t&3|8).toString(16)})}const Vs=()=>typeof window<"u"&&typeof document<"u",zo={tested:!1,writable:!1},DC=()=>{if(!Vs())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(zo.tested)return zo.writable;const e=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),zo.tested=!0,zo.writable=!0}catch{zo.tested=!0,zo.writable=!1}return zo.writable};function s$(e){const t={},r=new URL(e);if(r.hash&&r.hash[0]==="#")try{new URLSearchParams(r.hash.substring(1)).forEach((s,i)=>{t[i]=s})}catch{}return r.searchParams.forEach((n,s)=>{t[s]=n}),t}const RC=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...r)=>dd(async()=>{const{default:n}=await Promise.resolve().then(()=>Dc);return{default:n}},void 0,import.meta.url).then(({default:n})=>n(...r)):t=fetch,(...r)=>t(...r)},i$=e=>typeof e=="object"&&e!==null&&"status"in e&&"ok"in e&&"json"in e&&typeof e.json=="function",lc=async(e,t,r)=>{await e.setItem(t,JSON.stringify(r))},Uo=async(e,t)=>{const r=await e.getItem(t);if(!r)return null;try{return JSON.parse(r)}catch{return r}},ao=async(e,t)=>{await e.removeItem(t)};class fm{constructor(){this.promise=new fm.promiseConstructor((t,r)=>{this.resolve=t,this.reject=r})}}fm.promiseConstructor=Promise;function Fg(e){const t=e.split(".");if(t.length!==3)throw new Wv("Invalid JWT structure");for(let n=0;n<t.length;n++)if(!qR.test(t[n]))throw new Wv("JWT not in base64url format");return{header:JSON.parse(Fj(t[0])),payload:JSON.parse(Fj(t[1])),signature:mc(t[2]),raw:{header:t[0],payload:t[1]}}}async function a$(e){return await new Promise(t=>{setTimeout(()=>t(null),e)})}function o$(e,t){return new Promise((n,s)=>{(async()=>{for(let i=0;i<1/0;i++)try{const l=await e(i);if(!t(i,null,l)){n(l);return}}catch(l){if(!t(i,l)){s(l);return}}})()})}function l$(e){return("0"+e.toString(16)).substr(-2)}function c$(){const t=new Uint32Array(56);if(typeof crypto>"u"){const r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",n=r.length;let s="";for(let i=0;i<56;i++)s+=r.charAt(Math.floor(Math.random()*n));return s}return crypto.getRandomValues(t),Array.from(t,l$).join("")}async function u$(e){const r=new TextEncoder().encode(e),n=await crypto.subtle.digest("SHA-256",r),s=new Uint8Array(n);return Array.from(s).map(i=>String.fromCharCode(i)).join("")}async function d$(e){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),e;const r=await u$(e);return btoa(r).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Jl(e,t,r=!1){const n=c$();let s=n;r&&(s+="/PASSWORD_RECOVERY"),await lc(e,`${t}-code-verifier`,s);const i=await d$(n);return[i,n===i?"plain":"s256"]}const f$=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function h$(e){const t=e.headers.get(Uv);if(!t||!t.match(f$))return null;try{return new Date(`${t}T00:00:00.0Z`)}catch{return null}}function m$(e){if(!e)throw new Error("Missing exp claim");const t=Math.floor(Date.now()/1e3);if(e<=t)throw new Error("JWT has expired")}function p$(e){switch(e){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const g$=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Xl(e){if(!g$.test(e))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function Lg(){const e={};return new Proxy(e,{get:(t,r)=>{if(r==="__isUserNotAvailableProxy")return!0;if(typeof r=="symbol"){const n=r.toString();if(n==="Symbol(Symbol.toPrimitive)"||n==="Symbol(Symbol.toStringTag)"||n==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${r}" property of the session object is not supported. Please use getUser() instead.`)},set:(t,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(t,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function Lj(e){return JSON.parse(JSON.stringify(e))}var y$=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(e);s<n.length;s++)t.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(e,n[s])&&(r[n[s]]=e[n[s]]);return r};const Bo=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),v$=[502,503,504];async function zj(e){var t;if(!i$(e))throw new Bv(Bo(e),0);if(v$.includes(e.status))throw new Bv(Bo(e),e.status);let r;try{r=await e.json()}catch(i){throw new Ko(Bo(i),i)}let n;const s=h$(e);if(s&&s.getTime()>=TC["2024-01-01"].timestamp&&typeof r=="object"&&r&&typeof r.code=="string"?n=r.code:typeof r=="object"&&r&&typeof r.error_code=="string"&&(n=r.error_code),n){if(n==="weak_password")throw new Rj(Bo(r),e.status,((t=r.weak_password)===null||t===void 0?void 0:t.reasons)||[]);if(n==="session_not_found")throw new oo}else if(typeof r=="object"&&r&&typeof r.weak_password=="object"&&r.weak_password&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.reasons.reduce((i,l)=>i&&typeof l=="string",!0))throw new Rj(Bo(r),e.status,r.weak_password.reasons);throw new KR(Bo(r),e.status||500,n)}const x$=(e,t,r,n)=>{const s={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"?s:(s.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},t==null?void 0:t.headers),s.body=JSON.stringify(n),Object.assign(Object.assign({},s),r))};async function Pt(e,t,r,n){var s;const i=Object.assign({},n==null?void 0:n.headers);i[Uv]||(i[Uv]=TC["2024-01-01"].name),n!=null&&n.jwt&&(i.Authorization=`Bearer ${n.jwt}`);const l=(s=n==null?void 0:n.query)!==null&&s!==void 0?s:{};n!=null&&n.redirectTo&&(l.redirect_to=n.redirectTo);const u=Object.keys(l).length?"?"+new URLSearchParams(l).toString():"",d=await w$(e,t,r+u,{headers:i,noResolveJson:n==null?void 0:n.noResolveJson},{},n==null?void 0:n.body);return n!=null&&n.xform?n==null?void 0:n.xform(d):{data:Object.assign({},d),error:null}}async function w$(e,t,r,n,s,i){const l=x$(t,n,s,i);let u;try{u=await e(r,Object.assign({},l))}catch(d){throw console.error(d),new Bv(Bo(d),0)}if(u.ok||await zj(u),n!=null&&n.noResolveJson)return u;try{return await u.json()}catch(d){await zj(d)}}function Oi(e){var t;let r=null;S$(e)&&(r=Object.assign({},e),e.expires_at||(r.expires_at=r$(e.expires_in)));const n=(t=e.user)!==null&&t!==void 0?t:e;return{data:{session:r,user:n},error:null}}function Uj(e){const t=Oi(e);return!t.error&&e.weak_password&&typeof e.weak_password=="object"&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.message&&typeof e.weak_password.message=="string"&&e.weak_password.reasons.reduce((r,n)=>r&&typeof n=="string",!0)&&(t.data.weak_password=e.weak_password),t}function fo(e){var t;return{data:{user:(t=e.user)!==null&&t!==void 0?t:e},error:null}}function b$(e){return{data:e,error:null}}function j$(e){const{action_link:t,email_otp:r,hashed_token:n,redirect_to:s,verification_type:i}=e,l=y$(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),u={action_link:t,email_otp:r,hashed_token:n,redirect_to:s,verification_type:i},d=Object.assign({},l);return{data:{properties:u,user:d},error:null}}function Bj(e){return e}function S$(e){return e.access_token&&e.refresh_token&&e.expires_in}const zg=["global","local","others"];var k$=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(e);s<n.length;s++)t.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(e,n[s])&&(r[n[s]]=e[n[s]]);return r};class _${constructor({url:t="",headers:r={},fetch:n}){this.url=t,this.headers=r,this.fetch=RC(n),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(t,r=zg[0]){if(zg.indexOf(r)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${zg.join(", ")}`);try{return await Pt(this.fetch,"POST",`${this.url}/logout?scope=${r}`,{headers:this.headers,jwt:t,noResolveJson:!0}),{data:null,error:null}}catch(n){if(pt(n))return{data:null,error:n};throw n}}async inviteUserByEmail(t,r={}){try{return await Pt(this.fetch,"POST",`${this.url}/invite`,{body:{email:t,data:r.data},headers:this.headers,redirectTo:r.redirectTo,xform:fo})}catch(n){if(pt(n))return{data:{user:null},error:n};throw n}}async generateLink(t){try{const{options:r}=t,n=k$(t,["options"]),s=Object.assign(Object.assign({},n),r);return"newEmail"in n&&(s.new_email=n==null?void 0:n.newEmail,delete s.newEmail),await Pt(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:s,headers:this.headers,xform:j$,redirectTo:r==null?void 0:r.redirectTo})}catch(r){if(pt(r))return{data:{properties:null,user:null},error:r};throw r}}async createUser(t){try{return await Pt(this.fetch,"POST",`${this.url}/admin/users`,{body:t,headers:this.headers,xform:fo})}catch(r){if(pt(r))return{data:{user:null},error:r};throw r}}async listUsers(t){var r,n,s,i,l,u,d;try{const m={nextPage:null,lastPage:0,total:0},f=await Pt(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(r=t==null?void 0:t.page)===null||r===void 0?void 0:r.toString())!==null&&n!==void 0?n:"",per_page:(i=(s=t==null?void 0:t.perPage)===null||s===void 0?void 0:s.toString())!==null&&i!==void 0?i:""},xform:Bj});if(f.error)throw f.error;const p=await f.json(),y=(l=f.headers.get("x-total-count"))!==null&&l!==void 0?l:0,x=(d=(u=f.headers.get("link"))===null||u===void 0?void 0:u.split(","))!==null&&d!==void 0?d:[];return x.length>0&&(x.forEach(w=>{const b=parseInt(w.split(";")[0].split("=")[1].substring(0,1)),S=JSON.parse(w.split(";")[1].split("=")[1]);m[`${S}Page`]=b}),m.total=parseInt(y)),{data:Object.assign(Object.assign({},p),m),error:null}}catch(m){if(pt(m))return{data:{users:[]},error:m};throw m}}async getUserById(t){Xl(t);try{return await Pt(this.fetch,"GET",`${this.url}/admin/users/${t}`,{headers:this.headers,xform:fo})}catch(r){if(pt(r))return{data:{user:null},error:r};throw r}}async updateUserById(t,r){Xl(t);try{return await Pt(this.fetch,"PUT",`${this.url}/admin/users/${t}`,{body:r,headers:this.headers,xform:fo})}catch(n){if(pt(n))return{data:{user:null},error:n};throw n}}async deleteUser(t,r=!1){Xl(t);try{return await Pt(this.fetch,"DELETE",`${this.url}/admin/users/${t}`,{headers:this.headers,body:{should_soft_delete:r},xform:fo})}catch(n){if(pt(n))return{data:{user:null},error:n};throw n}}async _listFactors(t){Xl(t.userId);try{const{data:r,error:n}=await Pt(this.fetch,"GET",`${this.url}/admin/users/${t.userId}/factors`,{headers:this.headers,xform:s=>({data:{factors:s},error:null})});return{data:r,error:n}}catch(r){if(pt(r))return{data:null,error:r};throw r}}async _deleteFactor(t){Xl(t.userId),Xl(t.id);try{return{data:await Pt(this.fetch,"DELETE",`${this.url}/admin/users/${t.userId}/factors/${t.id}`,{headers:this.headers}),error:null}}catch(r){if(pt(r))return{data:null,error:r};throw r}}async _listOAuthClients(t){var r,n,s,i,l,u,d;try{const m={nextPage:null,lastPage:0,total:0},f=await Pt(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(r=t==null?void 0:t.page)===null||r===void 0?void 0:r.toString())!==null&&n!==void 0?n:"",per_page:(i=(s=t==null?void 0:t.perPage)===null||s===void 0?void 0:s.toString())!==null&&i!==void 0?i:""},xform:Bj});if(f.error)throw f.error;const p=await f.json(),y=(l=f.headers.get("x-total-count"))!==null&&l!==void 0?l:0,x=(d=(u=f.headers.get("link"))===null||u===void 0?void 0:u.split(","))!==null&&d!==void 0?d:[];return x.length>0&&(x.forEach(w=>{const b=parseInt(w.split(";")[0].split("=")[1].substring(0,1)),S=JSON.parse(w.split(";")[1].split("=")[1]);m[`${S}Page`]=b}),m.total=parseInt(y)),{data:Object.assign(Object.assign({},p),m),error:null}}catch(m){if(pt(m))return{data:{clients:[]},error:m};throw m}}async _createOAuthClient(t){try{return await Pt(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:t,headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(pt(r))return{data:null,error:r};throw r}}async _getOAuthClient(t){try{return await Pt(this.fetch,"GET",`${this.url}/admin/oauth/clients/${t}`,{headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(pt(r))return{data:null,error:r};throw r}}async _deleteOAuthClient(t){try{return await Pt(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${t}`,{headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(pt(r))return{data:null,error:r};throw r}}async _regenerateOAuthClientSecret(t){try{return await Pt(this.fetch,"POST",`${this.url}/admin/oauth/clients/${t}/regenerate_secret`,{headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(pt(r))return{data:null,error:r};throw r}}}function Wj(e={}){return{getItem:t=>e[t]||null,setItem:(t,r)=>{e[t]=r},removeItem:t=>{delete e[t]}}}const Ql={debug:!!(globalThis&&DC()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class $C extends Error{constructor(t){super(t),this.isAcquireTimeout=!0}}class N$ extends $C{}async function C$(e,t,r){Ql.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",e,t);const n=new globalThis.AbortController;return t>0&&setTimeout(()=>{n.abort(),Ql.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",e)},t),await Promise.resolve().then(()=>globalThis.navigator.locks.request(e,t===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:n.signal},async s=>{if(s){Ql.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",e,s.name);try{return await r()}finally{Ql.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",e,s.name)}}else{if(t===0)throw Ql.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",e),new N$(`Acquiring an exclusive Navigator LockManager lock "${e}" immediately failed`);if(Ql.debug)try{const i=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(i,null,"  "))}catch(i){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",i)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await r()}}))}function E$(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function MC(e){if(!/^0x[a-fA-F0-9]{40}$/.test(e))throw new Error(`@supabase/auth-js: Address "${e}" is invalid.`);return e.toLowerCase()}function A$(e){return parseInt(e,16)}function P$(e){const t=new TextEncoder().encode(e);return"0x"+Array.from(t,n=>n.toString(16).padStart(2,"0")).join("")}function O$(e){var t;const{chainId:r,domain:n,expirationTime:s,issuedAt:i=new Date,nonce:l,notBefore:u,requestId:d,resources:m,scheme:f,uri:p,version:y}=e;{if(!Number.isInteger(r))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${r}`);if(!n)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(l&&l.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${l}`);if(!p)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(y!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${y}`);if(!((t=e.statement)===null||t===void 0)&&t.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${e.statement}`)}const x=MC(e.address),w=f?`${f}://${n}`:n,b=e.statement?`${e.statement}
`:"",S=`${w} wants you to sign in with your Ethereum account:
${x}

${b}`;let _=`URI: ${p}
Version: ${y}
Chain ID: ${r}${l?`
Nonce: ${l}`:""}
Issued At: ${i.toISOString()}`;if(s&&(_+=`
Expiration Time: ${s.toISOString()}`),u&&(_+=`
Not Before: ${u.toISOString()}`),d&&(_+=`
Request ID: ${d}`),m){let E=`
Resources:`;for(const C of m){if(!C||typeof C!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${C}`);E+=`
- ${C}`}_+=E}return`${S}
${_}`}class fn extends Error{constructor({message:t,code:r,cause:n,name:s}){var i;super(t,{cause:n}),this.__isWebAuthnError=!0,this.name=(i=s??(n instanceof Error?n.name:void 0))!==null&&i!==void 0?i:"Unknown Error",this.code=r}}class hh extends fn{constructor(t,r){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:r,message:t}),this.name="WebAuthnUnknownError",this.originalError=r}}function T$({error:e,options:t}){var r,n,s;const{publicKey:i}=t;if(!i)throw Error("options was missing required publicKey property");if(e.name==="AbortError"){if(t.signal instanceof AbortSignal)return new fn({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:e})}else if(e.name==="ConstraintError"){if(((r=i.authenticatorSelection)===null||r===void 0?void 0:r.requireResidentKey)===!0)return new fn({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:e});if(t.mediation==="conditional"&&((n=i.authenticatorSelection)===null||n===void 0?void 0:n.userVerification)==="required")return new fn({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:e});if(((s=i.authenticatorSelection)===null||s===void 0?void 0:s.userVerification)==="required")return new fn({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:e})}else{if(e.name==="InvalidStateError")return new fn({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:e});if(e.name==="NotAllowedError")return new fn({message:e.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e});if(e.name==="NotSupportedError")return i.pubKeyCredParams.filter(u=>u.type==="public-key").length===0?new fn({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:e}):new fn({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:e});if(e.name==="SecurityError"){const l=window.location.hostname;if(LC(l)){if(i.rp.id!==l)return new fn({message:`The RP ID "${i.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:e})}else return new fn({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:e})}else if(e.name==="TypeError"){if(i.user.id.byteLength<1||i.user.id.byteLength>64)return new fn({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:e})}else if(e.name==="UnknownError")return new fn({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:e})}return new fn({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e})}function I$({error:e,options:t}){const{publicKey:r}=t;if(!r)throw Error("options was missing required publicKey property");if(e.name==="AbortError"){if(t.signal instanceof AbortSignal)return new fn({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:e})}else{if(e.name==="NotAllowedError")return new fn({message:e.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e});if(e.name==="SecurityError"){const n=window.location.hostname;if(LC(n)){if(r.rpId!==n)return new fn({message:`The RP ID "${r.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:e})}else return new fn({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:e})}else if(e.name==="UnknownError")return new fn({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:e})}return new fn({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e})}var FC=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(e);s<n.length;s++)t.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(e,n[s])&&(r[n[s]]=e[n[s]]);return r};class D${createNewAbortSignal(){if(this.controller){const r=new Error("Cancelling existing WebAuthn API call for new one");r.name="AbortError",this.controller.abort(r)}const t=new AbortController;return this.controller=t,t.signal}cancelCeremony(){if(this.controller){const t=new Error("Manually cancelling existing WebAuthn API call");t.name="AbortError",this.controller.abort(t),this.controller=void 0}}}const R$=new D$;function $$(e){if(!e)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(e);const{challenge:t,user:r,excludeCredentials:n}=e,s=FC(e,["challenge","user","excludeCredentials"]),i=mc(t).buffer,l=Object.assign(Object.assign({},r),{id:mc(r.id).buffer}),u=Object.assign(Object.assign({},s),{challenge:i,user:l});if(n&&n.length>0){u.excludeCredentials=new Array(n.length);for(let d=0;d<n.length;d++){const m=n[d];u.excludeCredentials[d]=Object.assign(Object.assign({},m),{id:mc(m.id).buffer,type:m.type||"public-key",transports:m.transports})}}return u}function M$(e){if(!e)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(e);const{challenge:t,allowCredentials:r}=e,n=FC(e,["challenge","allowCredentials"]),s=mc(t).buffer,i=Object.assign(Object.assign({},n),{challenge:s});if(r&&r.length>0){i.allowCredentials=new Array(r.length);for(let l=0;l<r.length;l++){const u=r[l];i.allowCredentials[l]=Object.assign(Object.assign({},u),{id:mc(u.id).buffer,type:u.type||"public-key",transports:u.transports})}}return i}function F$(e){var t;if("toJSON"in e&&typeof e.toJSON=="function")return e.toJSON();const r=e;return{id:e.id,rawId:e.id,response:{attestationObject:Yo(new Uint8Array(e.response.attestationObject)),clientDataJSON:Yo(new Uint8Array(e.response.clientDataJSON))},type:"public-key",clientExtensionResults:e.getClientExtensionResults(),authenticatorAttachment:(t=r.authenticatorAttachment)!==null&&t!==void 0?t:void 0}}function L$(e){var t;if("toJSON"in e&&typeof e.toJSON=="function")return e.toJSON();const r=e,n=e.getClientExtensionResults(),s=e.response;return{id:e.id,rawId:e.id,response:{authenticatorData:Yo(new Uint8Array(s.authenticatorData)),clientDataJSON:Yo(new Uint8Array(s.clientDataJSON)),signature:Yo(new Uint8Array(s.signature)),userHandle:s.userHandle?Yo(new Uint8Array(s.userHandle)):void 0},type:"public-key",clientExtensionResults:n,authenticatorAttachment:(t=r.authenticatorAttachment)!==null&&t!==void 0?t:void 0}}function LC(e){return e==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(e)}function Vj(){var e,t;return!!(Vs()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((e=navigator==null?void 0:navigator.credentials)===null||e===void 0?void 0:e.create)=="function"&&typeof((t=navigator==null?void 0:navigator.credentials)===null||t===void 0?void 0:t.get)=="function")}async function z$(e){try{const t=await navigator.credentials.create(e);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new hh("Browser returned unexpected credential type",t)}:{data:null,error:new hh("Empty credential response",t)}}catch(t){return{data:null,error:T$({error:t,options:e})}}}async function U$(e){try{const t=await navigator.credentials.get(e);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new hh("Browser returned unexpected credential type",t)}:{data:null,error:new hh("Empty credential response",t)}}catch(t){return{data:null,error:I$({error:t,options:e})}}}const B$={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"none"},W$={userVerification:"preferred",hints:["security-key"]};function mh(...e){const t=s=>s!==null&&typeof s=="object"&&!Array.isArray(s),r=s=>s instanceof ArrayBuffer||ArrayBuffer.isView(s),n={};for(const s of e)if(s)for(const i in s){const l=s[i];if(l!==void 0)if(Array.isArray(l))n[i]=l;else if(r(l))n[i]=l;else if(t(l)){const u=n[i];t(u)?n[i]=mh(u,l):n[i]=mh(l)}else n[i]=l}return n}function V$(e,t){return mh(B$,e,t||{})}function q$(e,t){return mh(W$,e,t||{})}class H${constructor(t){this.client=t,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(t){return this.client.mfa.enroll(Object.assign(Object.assign({},t),{factorType:"webauthn"}))}async _challenge({factorId:t,webauthn:r,friendlyName:n,signal:s},i){try{const{data:l,error:u}=await this.client.mfa.challenge({factorId:t,webauthn:r});if(!l)return{data:null,error:u};const d=s??R$.createNewAbortSignal();if(l.webauthn.type==="create"){const{user:m}=l.webauthn.credential_options.publicKey;m.name||(m.name=`${m.id}:${n}`),m.displayName||(m.displayName=m.name)}switch(l.webauthn.type){case"create":{const m=V$(l.webauthn.credential_options.publicKey,i==null?void 0:i.create),{data:f,error:p}=await z$({publicKey:m,signal:d});return f?{data:{factorId:t,challengeId:l.id,webauthn:{type:l.webauthn.type,credential_response:f}},error:null}:{data:null,error:p}}case"request":{const m=q$(l.webauthn.credential_options.publicKey,i==null?void 0:i.request),{data:f,error:p}=await U$(Object.assign(Object.assign({},l.webauthn.credential_options),{publicKey:m,signal:d}));return f?{data:{factorId:t,challengeId:l.id,webauthn:{type:l.webauthn.type,credential_response:f}},error:null}:{data:null,error:p}}}}catch(l){return pt(l)?{data:null,error:l}:{data:null,error:new Ko("Unexpected error in challenge",l)}}}async _verify({challengeId:t,factorId:r,webauthn:n}){return this.client.mfa.verify({factorId:r,challengeId:t,webauthn:n})}async _authenticate({factorId:t,webauthn:{rpId:r=typeof window<"u"?window.location.hostname:void 0,rpOrigins:n=typeof window<"u"?[window.location.origin]:void 0,signal:s}},i){if(!r)return{data:null,error:new Gu("rpId is required for WebAuthn authentication")};try{if(!Vj())return{data:null,error:new Ko("Browser does not support WebAuthn",null)};const{data:l,error:u}=await this.challenge({factorId:t,webauthn:{rpId:r,rpOrigins:n},signal:s},{request:i});if(!l)return{data:null,error:u};const{webauthn:d}=l;return this._verify({factorId:t,challengeId:l.challengeId,webauthn:{type:d.type,rpId:r,rpOrigins:n,credential_response:d.credential_response}})}catch(l){return pt(l)?{data:null,error:l}:{data:null,error:new Ko("Unexpected error in authenticate",l)}}}async _register({friendlyName:t,rpId:r=typeof window<"u"?window.location.hostname:void 0,rpOrigins:n=typeof window<"u"?[window.location.origin]:void 0,signal:s},i){if(!r)return{data:null,error:new Gu("rpId is required for WebAuthn registration")};try{if(!Vj())return{data:null,error:new Ko("Browser does not support WebAuthn",null)};const{data:l,error:u}=await this._enroll({friendlyName:t});if(!l)return await this.client.mfa.listFactors().then(f=>{var p;return(p=f.data)===null||p===void 0?void 0:p.all.find(y=>y.factor_type==="webauthn"&&y.friendly_name===t&&y.status!=="unverified")}).then(f=>f?this.client.mfa.unenroll({factorId:f==null?void 0:f.id}):void 0),{data:null,error:u};const{data:d,error:m}=await this._challenge({factorId:l.id,friendlyName:l.friendly_name,webauthn:{rpId:r,rpOrigins:n},signal:s},{create:i});return d?this._verify({factorId:l.id,challengeId:d.challengeId,webauthn:{rpId:r,rpOrigins:n,type:d.webauthn.type,credential_response:d.webauthn.credential_response}}):{data:null,error:m}}catch(l){return pt(l)?{data:null,error:l}:{data:null,error:new Ko("Unexpected error in register",l)}}}}E$();const K$={url:BR,storageKey:WR,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:VR,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function qj(e,t,r){return await r()}const Zl={};class Yu{get jwks(){var t,r;return(r=(t=Zl[this.storageKey])===null||t===void 0?void 0:t.jwks)!==null&&r!==void 0?r:{keys:[]}}set jwks(t){Zl[this.storageKey]=Object.assign(Object.assign({},Zl[this.storageKey]),{jwks:t})}get jwks_cached_at(){var t,r;return(r=(t=Zl[this.storageKey])===null||t===void 0?void 0:t.cachedAt)!==null&&r!==void 0?r:Number.MIN_SAFE_INTEGER}set jwks_cached_at(t){Zl[this.storageKey]=Object.assign(Object.assign({},Zl[this.storageKey]),{cachedAt:t})}constructor(t){var r,n;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=Yu.nextInstanceID,Yu.nextInstanceID+=1,this.instanceID>0&&Vs()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const s=Object.assign(Object.assign({},K$),t);if(this.logDebugMessages=!!s.debug,typeof s.debug=="function"&&(this.logger=s.debug),this.persistSession=s.persistSession,this.storageKey=s.storageKey,this.autoRefreshToken=s.autoRefreshToken,this.admin=new _$({url:s.url,headers:s.headers,fetch:s.fetch}),this.url=s.url,this.headers=s.headers,this.fetch=RC(s.fetch),this.lock=s.lock||qj,this.detectSessionInUrl=s.detectSessionInUrl,this.flowType=s.flowType,this.hasCustomAuthorizationHeader=s.hasCustomAuthorizationHeader,s.lock?this.lock=s.lock:Vs()&&(!((r=globalThis==null?void 0:globalThis.navigator)===null||r===void 0)&&r.locks)?this.lock=C$:this.lock=qj,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new H$(this)},this.persistSession?(s.storage?this.storage=s.storage:DC()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=Wj(this.memoryStorage)),s.userStorage&&(this.userStorage=s.userStorage)):(this.memoryStorage={},this.storage=Wj(this.memoryStorage)),Vs()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(i){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",i)}(n=this.broadcastChannel)===null||n===void 0||n.addEventListener("message",async i=>{this._debug("received broadcast notification from other tab or client",i),await this._notifyAllSubscribers(i.data.event,i.data.session,!1)})}this.initialize()}_debug(...t){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${OC}) ${new Date().toISOString()}`,...t),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var t;try{const r=s$(window.location.href);let n="none";if(this._isImplicitGrantCallback(r)?n="implicit":await this._isPKCECallback(r)&&(n="pkce"),Vs()&&this.detectSessionInUrl&&n!=="none"){const{data:s,error:i}=await this._getSessionFromURL(r,n);if(i){if(this._debug("#_initialize()","error detecting session from URL",i),JR(i)){const d=(t=i.details)===null||t===void 0?void 0:t.code;if(d==="identity_already_exists"||d==="identity_not_found"||d==="single_identity_not_deletable")return{error:i}}return await this._removeSession(),{error:i}}const{session:l,redirectType:u}=s;return this._debug("#_initialize()","detected session in URL",l,"redirect type",u),await this._saveSession(l),setTimeout(async()=>{u==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",l):await this._notifyAllSubscribers("SIGNED_IN",l)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(r){return pt(r)?{error:r}:{error:new Ko("Unexpected error during initialization",r)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(t){var r,n,s;try{const i=await Pt(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(n=(r=t==null?void 0:t.options)===null||r===void 0?void 0:r.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:(s=t==null?void 0:t.options)===null||s===void 0?void 0:s.captchaToken}},xform:Oi}),{data:l,error:u}=i;if(u||!l)return{data:{user:null,session:null},error:u};const d=l.session,m=l.user;return l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",d)),{data:{user:m,session:d},error:null}}catch(i){if(pt(i))return{data:{user:null,session:null},error:i};throw i}}async signUp(t){var r,n,s;try{let i;if("email"in t){const{email:f,password:p,options:y}=t;let x=null,w=null;this.flowType==="pkce"&&([x,w]=await Jl(this.storage,this.storageKey)),i=await Pt(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:y==null?void 0:y.emailRedirectTo,body:{email:f,password:p,data:(r=y==null?void 0:y.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:y==null?void 0:y.captchaToken},code_challenge:x,code_challenge_method:w},xform:Oi})}else if("phone"in t){const{phone:f,password:p,options:y}=t;i=await Pt(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:f,password:p,data:(n=y==null?void 0:y.data)!==null&&n!==void 0?n:{},channel:(s=y==null?void 0:y.channel)!==null&&s!==void 0?s:"sms",gotrue_meta_security:{captcha_token:y==null?void 0:y.captchaToken}},xform:Oi})}else throw new Of("You must provide either an email or phone number and a password");const{data:l,error:u}=i;if(u||!l)return{data:{user:null,session:null},error:u};const d=l.session,m=l.user;return l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",d)),{data:{user:m,session:d},error:null}}catch(i){if(pt(i))return{data:{user:null,session:null},error:i};throw i}}async signInWithPassword(t){try{let r;if("email"in t){const{email:i,password:l,options:u}=t;r=await Pt(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:i,password:l,gotrue_meta_security:{captcha_token:u==null?void 0:u.captchaToken}},xform:Uj})}else if("phone"in t){const{phone:i,password:l,options:u}=t;r=await Pt(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:i,password:l,gotrue_meta_security:{captcha_token:u==null?void 0:u.captchaToken}},xform:Uj})}else throw new Of("You must provide either an email or phone number and a password");const{data:n,error:s}=r;return s?{data:{user:null,session:null},error:s}:!n||!n.session||!n.user?{data:{user:null,session:null},error:new Yl}:(n.session&&(await this._saveSession(n.session),await this._notifyAllSubscribers("SIGNED_IN",n.session)),{data:Object.assign({user:n.user,session:n.session},n.weak_password?{weakPassword:n.weak_password}:null),error:s})}catch(r){if(pt(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithOAuth(t){var r,n,s,i;return await this._handleProviderSignIn(t.provider,{redirectTo:(r=t.options)===null||r===void 0?void 0:r.redirectTo,scopes:(n=t.options)===null||n===void 0?void 0:n.scopes,queryParams:(s=t.options)===null||s===void 0?void 0:s.queryParams,skipBrowserRedirect:(i=t.options)===null||i===void 0?void 0:i.skipBrowserRedirect})}async exchangeCodeForSession(t){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(t))}async signInWithWeb3(t){const{chain:r}=t;switch(r){case"ethereum":return await this.signInWithEthereum(t);case"solana":return await this.signInWithSolana(t);default:throw new Error(`@supabase/auth-js: Unsupported chain "${r}"`)}}async signInWithEthereum(t){var r,n,s,i,l,u,d,m,f,p,y;let x,w;if("message"in t)x=t.message,w=t.signature;else{const{chain:b,wallet:S,statement:_,options:E}=t;let C;if(Vs())if(typeof S=="object")C=S;else{const L=window;if("ethereum"in L&&typeof L.ethereum=="object"&&"request"in L.ethereum&&typeof L.ethereum.request=="function")C=L.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof S!="object"||!(E!=null&&E.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");C=S}const O=new URL((r=E==null?void 0:E.url)!==null&&r!==void 0?r:window.location.href),T=await C.request({method:"eth_requestAccounts"}).then(L=>L).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!T||T.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const P=MC(T[0]);let F=(n=E==null?void 0:E.signInWithEthereum)===null||n===void 0?void 0:n.chainId;if(!F){const L=await C.request({method:"eth_chainId"});F=A$(L)}const H={domain:O.host,address:P,statement:_,uri:O.href,version:"1",chainId:F,nonce:(s=E==null?void 0:E.signInWithEthereum)===null||s===void 0?void 0:s.nonce,issuedAt:(l=(i=E==null?void 0:E.signInWithEthereum)===null||i===void 0?void 0:i.issuedAt)!==null&&l!==void 0?l:new Date,expirationTime:(u=E==null?void 0:E.signInWithEthereum)===null||u===void 0?void 0:u.expirationTime,notBefore:(d=E==null?void 0:E.signInWithEthereum)===null||d===void 0?void 0:d.notBefore,requestId:(m=E==null?void 0:E.signInWithEthereum)===null||m===void 0?void 0:m.requestId,resources:(f=E==null?void 0:E.signInWithEthereum)===null||f===void 0?void 0:f.resources};x=O$(H),w=await C.request({method:"personal_sign",params:[P$(x),P]})}try{const{data:b,error:S}=await Pt(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:x,signature:w},!((p=t.options)===null||p===void 0)&&p.captchaToken?{gotrue_meta_security:{captcha_token:(y=t.options)===null||y===void 0?void 0:y.captchaToken}}:null),xform:Oi});if(S)throw S;return!b||!b.session||!b.user?{data:{user:null,session:null},error:new Yl}:(b.session&&(await this._saveSession(b.session),await this._notifyAllSubscribers("SIGNED_IN",b.session)),{data:Object.assign({},b),error:S})}catch(b){if(pt(b))return{data:{user:null,session:null},error:b};throw b}}async signInWithSolana(t){var r,n,s,i,l,u,d,m,f,p,y,x;let w,b;if("message"in t)w=t.message,b=t.signature;else{const{chain:S,wallet:_,statement:E,options:C}=t;let O;if(Vs())if(typeof _=="object")O=_;else{const P=window;if("solana"in P&&typeof P.solana=="object"&&("signIn"in P.solana&&typeof P.solana.signIn=="function"||"signMessage"in P.solana&&typeof P.solana.signMessage=="function"))O=P.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof _!="object"||!(C!=null&&C.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");O=_}const T=new URL((r=C==null?void 0:C.url)!==null&&r!==void 0?r:window.location.href);if("signIn"in O&&O.signIn){const P=await O.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},C==null?void 0:C.signInWithSolana),{version:"1",domain:T.host,uri:T.href}),E?{statement:E}:null));let F;if(Array.isArray(P)&&P[0]&&typeof P[0]=="object")F=P[0];else if(P&&typeof P=="object"&&"signedMessage"in P&&"signature"in P)F=P;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in F&&"signature"in F&&(typeof F.signedMessage=="string"||F.signedMessage instanceof Uint8Array)&&F.signature instanceof Uint8Array)w=typeof F.signedMessage=="string"?F.signedMessage:new TextDecoder().decode(F.signedMessage),b=F.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in O)||typeof O.signMessage!="function"||!("publicKey"in O)||typeof O!="object"||!O.publicKey||!("toBase58"in O.publicKey)||typeof O.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");w=[`${T.host} wants you to sign in with your Solana account:`,O.publicKey.toBase58(),...E?["",E,""]:[""],"Version: 1",`URI: ${T.href}`,`Issued At: ${(s=(n=C==null?void 0:C.signInWithSolana)===null||n===void 0?void 0:n.issuedAt)!==null&&s!==void 0?s:new Date().toISOString()}`,...!((i=C==null?void 0:C.signInWithSolana)===null||i===void 0)&&i.notBefore?[`Not Before: ${C.signInWithSolana.notBefore}`]:[],...!((l=C==null?void 0:C.signInWithSolana)===null||l===void 0)&&l.expirationTime?[`Expiration Time: ${C.signInWithSolana.expirationTime}`]:[],...!((u=C==null?void 0:C.signInWithSolana)===null||u===void 0)&&u.chainId?[`Chain ID: ${C.signInWithSolana.chainId}`]:[],...!((d=C==null?void 0:C.signInWithSolana)===null||d===void 0)&&d.nonce?[`Nonce: ${C.signInWithSolana.nonce}`]:[],...!((m=C==null?void 0:C.signInWithSolana)===null||m===void 0)&&m.requestId?[`Request ID: ${C.signInWithSolana.requestId}`]:[],...!((p=(f=C==null?void 0:C.signInWithSolana)===null||f===void 0?void 0:f.resources)===null||p===void 0)&&p.length?["Resources",...C.signInWithSolana.resources.map(F=>`- ${F}`)]:[]].join(`
`);const P=await O.signMessage(new TextEncoder().encode(w),"utf8");if(!P||!(P instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");b=P}}try{const{data:S,error:_}=await Pt(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:w,signature:Yo(b)},!((y=t.options)===null||y===void 0)&&y.captchaToken?{gotrue_meta_security:{captcha_token:(x=t.options)===null||x===void 0?void 0:x.captchaToken}}:null),xform:Oi});if(_)throw _;return!S||!S.session||!S.user?{data:{user:null,session:null},error:new Yl}:(S.session&&(await this._saveSession(S.session),await this._notifyAllSubscribers("SIGNED_IN",S.session)),{data:Object.assign({},S),error:_})}catch(S){if(pt(S))return{data:{user:null,session:null},error:S};throw S}}async _exchangeCodeForSession(t){const r=await Uo(this.storage,`${this.storageKey}-code-verifier`),[n,s]=(r??"").split("/");try{const{data:i,error:l}=await Pt(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:t,code_verifier:n},xform:Oi});if(await ao(this.storage,`${this.storageKey}-code-verifier`),l)throw l;return!i||!i.session||!i.user?{data:{user:null,session:null,redirectType:null},error:new Yl}:(i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),{data:Object.assign(Object.assign({},i),{redirectType:s??null}),error:l})}catch(i){if(pt(i))return{data:{user:null,session:null,redirectType:null},error:i};throw i}}async signInWithIdToken(t){try{const{options:r,provider:n,token:s,access_token:i,nonce:l}=t,u=await Pt(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:n,id_token:s,access_token:i,nonce:l,gotrue_meta_security:{captcha_token:r==null?void 0:r.captchaToken}},xform:Oi}),{data:d,error:m}=u;return m?{data:{user:null,session:null},error:m}:!d||!d.session||!d.user?{data:{user:null,session:null},error:new Yl}:(d.session&&(await this._saveSession(d.session),await this._notifyAllSubscribers("SIGNED_IN",d.session)),{data:d,error:m})}catch(r){if(pt(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithOtp(t){var r,n,s,i,l;try{if("email"in t){const{email:u,options:d}=t;let m=null,f=null;this.flowType==="pkce"&&([m,f]=await Jl(this.storage,this.storageKey));const{error:p}=await Pt(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:u,data:(r=d==null?void 0:d.data)!==null&&r!==void 0?r:{},create_user:(n=d==null?void 0:d.shouldCreateUser)!==null&&n!==void 0?n:!0,gotrue_meta_security:{captcha_token:d==null?void 0:d.captchaToken},code_challenge:m,code_challenge_method:f},redirectTo:d==null?void 0:d.emailRedirectTo});return{data:{user:null,session:null},error:p}}if("phone"in t){const{phone:u,options:d}=t,{data:m,error:f}=await Pt(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:u,data:(s=d==null?void 0:d.data)!==null&&s!==void 0?s:{},create_user:(i=d==null?void 0:d.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:d==null?void 0:d.captchaToken},channel:(l=d==null?void 0:d.channel)!==null&&l!==void 0?l:"sms"}});return{data:{user:null,session:null,messageId:m==null?void 0:m.message_id},error:f}}throw new Of("You must provide either an email or phone number.")}catch(u){if(pt(u))return{data:{user:null,session:null},error:u};throw u}}async verifyOtp(t){var r,n;try{let s,i;"options"in t&&(s=(r=t.options)===null||r===void 0?void 0:r.redirectTo,i=(n=t.options)===null||n===void 0?void 0:n.captchaToken);const{data:l,error:u}=await Pt(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},t),{gotrue_meta_security:{captcha_token:i}}),redirectTo:s,xform:Oi});if(u)throw u;if(!l)throw new Error("An error occurred on token verification.");const d=l.session,m=l.user;return d!=null&&d.access_token&&(await this._saveSession(d),await this._notifyAllSubscribers(t.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",d)),{data:{user:m,session:d},error:null}}catch(s){if(pt(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithSSO(t){var r,n,s;try{let i=null,l=null;return this.flowType==="pkce"&&([i,l]=await Jl(this.storage,this.storageKey)),await Pt(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in t?{provider_id:t.providerId}:null),"domain"in t?{domain:t.domain}:null),{redirect_to:(n=(r=t.options)===null||r===void 0?void 0:r.redirectTo)!==null&&n!==void 0?n:void 0}),!((s=t==null?void 0:t.options)===null||s===void 0)&&s.captchaToken?{gotrue_meta_security:{captcha_token:t.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:i,code_challenge_method:l}),headers:this.headers,xform:b$})}catch(i){if(pt(i))return{data:null,error:i};throw i}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async t=>{const{data:{session:r},error:n}=t;if(n)throw n;if(!r)throw new oo;const{error:s}=await Pt(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:r.access_token});return{data:{user:null,session:null},error:s}})}catch(t){if(pt(t))return{data:{user:null,session:null},error:t};throw t}}async resend(t){try{const r=`${this.url}/resend`;if("email"in t){const{email:n,type:s,options:i}=t,{error:l}=await Pt(this.fetch,"POST",r,{headers:this.headers,body:{email:n,type:s,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}},redirectTo:i==null?void 0:i.emailRedirectTo});return{data:{user:null,session:null},error:l}}else if("phone"in t){const{phone:n,type:s,options:i}=t,{data:l,error:u}=await Pt(this.fetch,"POST",r,{headers:this.headers,body:{phone:n,type:s,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}}});return{data:{user:null,session:null,messageId:l==null?void 0:l.message_id},error:u}}throw new Of("You must provide either an email or phone number and a type")}catch(r){if(pt(r))return{data:{user:null,session:null},error:r};throw r}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async r=>r))}async _acquireLock(t,r){this._debug("#_acquireLock","begin",t);try{if(this.lockAcquired){const n=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),s=(async()=>(await n,await r()))();return this.pendingInLock.push((async()=>{try{await s}catch{}})()),s}return await this.lock(`lock:${this.storageKey}`,t,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const n=r();for(this.pendingInLock.push((async()=>{try{await n}catch{}})()),await n;this.pendingInLock.length;){const s=[...this.pendingInLock];await Promise.all(s),this.pendingInLock.splice(0,s.length)}return await n}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(t){this._debug("#_useSession","begin");try{const r=await this.__loadSession();return await t(r)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let t=null;const r=await Uo(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",r),r!==null&&(this._isValidSession(r)?t=r:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!t)return{data:{session:null},error:null};const n=t.expires_at?t.expires_at*1e3-Date.now()<$g:!1;if(this._debug("#__loadSession()",`session has${n?"":" not"} expired`,"expires_at",t.expires_at),!n){if(this.userStorage){const l=await Uo(this.userStorage,this.storageKey+"-user");l!=null&&l.user?t.user=l.user:t.user=Lg()}if(this.storage.isServer&&t.user){let l=this.suppressGetSessionWarning;t=new Proxy(t,{get:(d,m,f)=>(!l&&m==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),l=!0,this.suppressGetSessionWarning=!0),Reflect.get(d,m,f))})}return{data:{session:t},error:null}}const{data:s,error:i}=await this._callRefreshToken(t.refresh_token);return i?{data:{session:null},error:i}:{data:{session:s},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(t){return t?await this._getUser(t):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(t){try{return t?await Pt(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:t,xform:fo}):await this._useSession(async r=>{var n,s,i;const{data:l,error:u}=r;if(u)throw u;return!(!((n=l.session)===null||n===void 0)&&n.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new oo}:await Pt(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(i=(s=l.session)===null||s===void 0?void 0:s.access_token)!==null&&i!==void 0?i:void 0,xform:fo})})}catch(r){if(pt(r))return YR(r)&&(await this._removeSession(),await ao(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:r};throw r}}async updateUser(t,r={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(t,r))}async _updateUser(t,r={}){try{return await this._useSession(async n=>{const{data:s,error:i}=n;if(i)throw i;if(!s.session)throw new oo;const l=s.session;let u=null,d=null;this.flowType==="pkce"&&t.email!=null&&([u,d]=await Jl(this.storage,this.storageKey));const{data:m,error:f}=await Pt(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:r==null?void 0:r.emailRedirectTo,body:Object.assign(Object.assign({},t),{code_challenge:u,code_challenge_method:d}),jwt:l.access_token,xform:fo});if(f)throw f;return l.user=m.user,await this._saveSession(l),await this._notifyAllSubscribers("USER_UPDATED",l),{data:{user:l.user},error:null}})}catch(n){if(pt(n))return{data:{user:null},error:n};throw n}}async setSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(t))}async _setSession(t){try{if(!t.access_token||!t.refresh_token)throw new oo;const r=Date.now()/1e3;let n=r,s=!0,i=null;const{payload:l}=Fg(t.access_token);if(l.exp&&(n=l.exp,s=n<=r),s){const{data:u,error:d}=await this._callRefreshToken(t.refresh_token);if(d)return{data:{user:null,session:null},error:d};if(!u)return{data:{user:null,session:null},error:null};i=u}else{const{data:u,error:d}=await this._getUser(t.access_token);if(d)throw d;i={access_token:t.access_token,refresh_token:t.refresh_token,user:u.user,token_type:"bearer",expires_in:n-r,expires_at:n},await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)}return{data:{user:i.user,session:i},error:null}}catch(r){if(pt(r))return{data:{session:null,user:null},error:r};throw r}}async refreshSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(t))}async _refreshSession(t){try{return await this._useSession(async r=>{var n;if(!t){const{data:l,error:u}=r;if(u)throw u;t=(n=l.session)!==null&&n!==void 0?n:void 0}if(!(t!=null&&t.refresh_token))throw new oo;const{data:s,error:i}=await this._callRefreshToken(t.refresh_token);return i?{data:{user:null,session:null},error:i}:s?{data:{user:s.user,session:s},error:null}:{data:{user:null,session:null},error:null}})}catch(r){if(pt(r))return{data:{user:null,session:null},error:r};throw r}}async _getSessionFromURL(t,r){try{if(!Vs())throw new Tf("No browser detected.");if(t.error||t.error_description||t.error_code)throw new Tf(t.error_description||"Error in URL with unspecified error_description",{error:t.error||"unspecified_error",code:t.error_code||"unspecified_code"});switch(r){case"implicit":if(this.flowType==="pkce")throw new Dj("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Tf("Not a valid implicit grant flow url.");break;default:}if(r==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!t.code)throw new Dj("No code detected.");const{data:E,error:C}=await this._exchangeCodeForSession(t.code);if(C)throw C;const O=new URL(window.location.href);return O.searchParams.delete("code"),window.history.replaceState(window.history.state,"",O.toString()),{data:{session:E.session,redirectType:null},error:null}}const{provider_token:n,provider_refresh_token:s,access_token:i,refresh_token:l,expires_in:u,expires_at:d,token_type:m}=t;if(!i||!u||!l||!m)throw new Tf("No session defined in URL");const f=Math.round(Date.now()/1e3),p=parseInt(u);let y=f+p;d&&(y=parseInt(d));const x=y-f;x*1e3<=oc&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${x}s, should have been closer to ${p}s`);const w=y-p;f-w>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",w,y,f):f-w<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",w,y,f);const{data:b,error:S}=await this._getUser(i);if(S)throw S;const _={provider_token:n,provider_refresh_token:s,access_token:i,expires_in:p,expires_at:y,refresh_token:l,token_type:m,user:b.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:_,redirectType:t.type},error:null}}catch(n){if(pt(n))return{data:{session:null,redirectType:null},error:n};throw n}}_isImplicitGrantCallback(t){return!!(t.access_token||t.error_description)}async _isPKCECallback(t){const r=await Uo(this.storage,`${this.storageKey}-code-verifier`);return!!(t.code&&r)}async signOut(t={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(t))}async _signOut({scope:t}={scope:"global"}){return await this._useSession(async r=>{var n;const{data:s,error:i}=r;if(i)return{error:i};const l=(n=s.session)===null||n===void 0?void 0:n.access_token;if(l){const{error:u}=await this.admin.signOut(l,t);if(u&&!(GR(u)&&(u.status===404||u.status===401||u.status===403)))return{error:u}}return t!=="others"&&(await this._removeSession(),await ao(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(t){const r=n$(),n={id:r,callback:t,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",r),this.stateChangeEmitters.delete(r)}};return this._debug("#onAuthStateChange()","registered callback with id",r),this.stateChangeEmitters.set(r,n),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(r)})))(),{data:{subscription:n}}}async _emitInitialSession(t){return await this._useSession(async r=>{var n,s;try{const{data:{session:i},error:l}=r;if(l)throw l;await((n=this.stateChangeEmitters.get(t))===null||n===void 0?void 0:n.callback("INITIAL_SESSION",i)),this._debug("INITIAL_SESSION","callback id",t,"session",i)}catch(i){await((s=this.stateChangeEmitters.get(t))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",t,"error",i),console.error(i)}})}async resetPasswordForEmail(t,r={}){let n=null,s=null;this.flowType==="pkce"&&([n,s]=await Jl(this.storage,this.storageKey,!0));try{return await Pt(this.fetch,"POST",`${this.url}/recover`,{body:{email:t,code_challenge:n,code_challenge_method:s,gotrue_meta_security:{captcha_token:r.captchaToken}},headers:this.headers,redirectTo:r.redirectTo})}catch(i){if(pt(i))return{data:null,error:i};throw i}}async getUserIdentities(){var t;try{const{data:r,error:n}=await this.getUser();if(n)throw n;return{data:{identities:(t=r.user.identities)!==null&&t!==void 0?t:[]},error:null}}catch(r){if(pt(r))return{data:null,error:r};throw r}}async linkIdentity(t){return"token"in t?this.linkIdentityIdToken(t):this.linkIdentityOAuth(t)}async linkIdentityOAuth(t){var r;try{const{data:n,error:s}=await this._useSession(async i=>{var l,u,d,m,f;const{data:p,error:y}=i;if(y)throw y;const x=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,t.provider,{redirectTo:(l=t.options)===null||l===void 0?void 0:l.redirectTo,scopes:(u=t.options)===null||u===void 0?void 0:u.scopes,queryParams:(d=t.options)===null||d===void 0?void 0:d.queryParams,skipBrowserRedirect:!0});return await Pt(this.fetch,"GET",x,{headers:this.headers,jwt:(f=(m=p.session)===null||m===void 0?void 0:m.access_token)!==null&&f!==void 0?f:void 0})});if(s)throw s;return Vs()&&!(!((r=t.options)===null||r===void 0)&&r.skipBrowserRedirect)&&window.location.assign(n==null?void 0:n.url),{data:{provider:t.provider,url:n==null?void 0:n.url},error:null}}catch(n){if(pt(n))return{data:{provider:t.provider,url:null},error:n};throw n}}async linkIdentityIdToken(t){return await this._useSession(async r=>{var n;try{const{error:s,data:{session:i}}=r;if(s)throw s;const{options:l,provider:u,token:d,access_token:m,nonce:f}=t,p=await Pt(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(n=i==null?void 0:i.access_token)!==null&&n!==void 0?n:void 0,body:{provider:u,id_token:d,access_token:m,nonce:f,link_identity:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:Oi}),{data:y,error:x}=p;return x?{data:{user:null,session:null},error:x}:!y||!y.session||!y.user?{data:{user:null,session:null},error:new Yl}:(y.session&&(await this._saveSession(y.session),await this._notifyAllSubscribers("USER_UPDATED",y.session)),{data:y,error:x})}catch(s){if(pt(s))return{data:{user:null,session:null},error:s};throw s}})}async unlinkIdentity(t){try{return await this._useSession(async r=>{var n,s;const{data:i,error:l}=r;if(l)throw l;return await Pt(this.fetch,"DELETE",`${this.url}/user/identities/${t.identity_id}`,{headers:this.headers,jwt:(s=(n=i.session)===null||n===void 0?void 0:n.access_token)!==null&&s!==void 0?s:void 0})})}catch(r){if(pt(r))return{data:null,error:r};throw r}}async _refreshAccessToken(t){const r=`#_refreshAccessToken(${t.substring(0,5)}...)`;this._debug(r,"begin");try{const n=Date.now();return await o$(async s=>(s>0&&await a$(200*Math.pow(2,s-1)),this._debug(r,"refreshing attempt",s),await Pt(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:t},headers:this.headers,xform:Oi})),(s,i)=>{const l=200*Math.pow(2,s);return i&&Mg(i)&&Date.now()+l-n<oc})}catch(n){if(this._debug(r,"error",n),pt(n))return{data:{session:null,user:null},error:n};throw n}finally{this._debug(r,"end")}}_isValidSession(t){return typeof t=="object"&&t!==null&&"access_token"in t&&"refresh_token"in t&&"expires_at"in t}async _handleProviderSignIn(t,r){const n=await this._getUrlForProvider(`${this.url}/authorize`,t,{redirectTo:r.redirectTo,scopes:r.scopes,queryParams:r.queryParams});return this._debug("#_handleProviderSignIn()","provider",t,"options",r,"url",n),Vs()&&!r.skipBrowserRedirect&&window.location.assign(n),{data:{provider:t,url:n},error:null}}async _recoverAndRefresh(){var t,r;const n="#_recoverAndRefresh()";this._debug(n,"begin");try{const s=await Uo(this.storage,this.storageKey);if(s&&this.userStorage){let l=await Uo(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!l&&(l={user:s.user},await lc(this.userStorage,this.storageKey+"-user",l)),s.user=(t=l==null?void 0:l.user)!==null&&t!==void 0?t:Lg()}else if(s&&!s.user&&!s.user){const l=await Uo(this.storage,this.storageKey+"-user");l&&(l!=null&&l.user)?(s.user=l.user,await ao(this.storage,this.storageKey+"-user"),await lc(this.storage,this.storageKey,s)):s.user=Lg()}if(this._debug(n,"session from storage",s),!this._isValidSession(s)){this._debug(n,"session is not valid"),s!==null&&await this._removeSession();return}const i=((r=s.expires_at)!==null&&r!==void 0?r:1/0)*1e3-Date.now()<$g;if(this._debug(n,`session has${i?"":" not"} expired with margin of ${$g}s`),i){if(this.autoRefreshToken&&s.refresh_token){const{error:l}=await this._callRefreshToken(s.refresh_token);l&&(console.error(l),Mg(l)||(this._debug(n,"refresh failed with a non-retryable error, removing the session",l),await this._removeSession()))}}else if(s.user&&s.user.__isUserNotAvailableProxy===!0)try{const{data:l,error:u}=await this._getUser(s.access_token);!u&&(l!=null&&l.user)?(s.user=l.user,await this._saveSession(s),await this._notifyAllSubscribers("SIGNED_IN",s)):this._debug(n,"could not get user data, skipping SIGNED_IN notification")}catch(l){console.error("Error getting user data:",l),this._debug(n,"error getting user data, skipping SIGNED_IN notification",l)}else await this._notifyAllSubscribers("SIGNED_IN",s)}catch(s){this._debug(n,"error",s),console.error(s);return}finally{this._debug(n,"end")}}async _callRefreshToken(t){var r,n;if(!t)throw new oo;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const s=`#_callRefreshToken(${t.substring(0,5)}...)`;this._debug(s,"begin");try{this.refreshingDeferred=new fm;const{data:i,error:l}=await this._refreshAccessToken(t);if(l)throw l;if(!i.session)throw new oo;await this._saveSession(i.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",i.session);const u={data:i.session,error:null};return this.refreshingDeferred.resolve(u),u}catch(i){if(this._debug(s,"error",i),pt(i)){const l={data:null,error:i};return Mg(i)||await this._removeSession(),(r=this.refreshingDeferred)===null||r===void 0||r.resolve(l),l}throw(n=this.refreshingDeferred)===null||n===void 0||n.reject(i),i}finally{this.refreshingDeferred=null,this._debug(s,"end")}}async _notifyAllSubscribers(t,r,n=!0){const s=`#_notifyAllSubscribers(${t})`;this._debug(s,"begin",r,`broadcast = ${n}`);try{this.broadcastChannel&&n&&this.broadcastChannel.postMessage({event:t,session:r});const i=[],l=Array.from(this.stateChangeEmitters.values()).map(async u=>{try{await u.callback(t,r)}catch(d){i.push(d)}});if(await Promise.all(l),i.length>0){for(let u=0;u<i.length;u+=1)console.error(i[u]);throw i[0]}}finally{this._debug(s,"end")}}async _saveSession(t){this._debug("#_saveSession()",t),this.suppressGetSessionWarning=!0;const r=Object.assign({},t),n=r.user&&r.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!n&&r.user&&await lc(this.userStorage,this.storageKey+"-user",{user:r.user});const s=Object.assign({},r);delete s.user;const i=Lj(s);await lc(this.storage,this.storageKey,i)}else{const s=Lj(r);await lc(this.storage,this.storageKey,s)}}async _removeSession(){this._debug("#_removeSession()"),await ao(this.storage,this.storageKey),await ao(this.storage,this.storageKey+"-code-verifier"),await ao(this.storage,this.storageKey+"-user"),this.userStorage&&await ao(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const t=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{t&&Vs()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",t)}catch(r){console.error("removing visibilitychange callback failed",r)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const t=setInterval(()=>this._autoRefreshTokenTick(),oc);this.autoRefreshTicker=t,t&&typeof t=="object"&&typeof t.unref=="function"?t.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(t),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const t=this.autoRefreshTicker;this.autoRefreshTicker=null,t&&clearInterval(t)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const t=Date.now();try{return await this._useSession(async r=>{const{data:{session:n}}=r;if(!n||!n.refresh_token||!n.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const s=Math.floor((n.expires_at*1e3-t)/oc);this._debug("#_autoRefreshTokenTick()",`access token expires in ${s} ticks, a tick lasts ${oc}ms, refresh threshold is ${zv} ticks`),s<=zv&&await this._callRefreshToken(n.refresh_token)})}catch(r){console.error("Auto refresh tick failed with error. This is likely a transient error.",r)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(t){if(t.isAcquireTimeout||t instanceof $C)this._debug("auto refresh token tick lock not available");else throw t}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Vs()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(t){console.error("_handleVisibilityChange",t)}}async _onVisibilityChanged(t){const r=`#_onVisibilityChanged(${t})`;this._debug(r,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),t||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(r,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(t,r,n){const s=[`provider=${encodeURIComponent(r)}`];if(n!=null&&n.redirectTo&&s.push(`redirect_to=${encodeURIComponent(n.redirectTo)}`),n!=null&&n.scopes&&s.push(`scopes=${encodeURIComponent(n.scopes)}`),this.flowType==="pkce"){const[i,l]=await Jl(this.storage,this.storageKey),u=new URLSearchParams({code_challenge:`${encodeURIComponent(i)}`,code_challenge_method:`${encodeURIComponent(l)}`});s.push(u.toString())}if(n!=null&&n.queryParams){const i=new URLSearchParams(n.queryParams);s.push(i.toString())}return n!=null&&n.skipBrowserRedirect&&s.push(`skip_http_redirect=${n.skipBrowserRedirect}`),`${t}?${s.join("&")}`}async _unenroll(t){try{return await this._useSession(async r=>{var n;const{data:s,error:i}=r;return i?{data:null,error:i}:await Pt(this.fetch,"DELETE",`${this.url}/factors/${t.factorId}`,{headers:this.headers,jwt:(n=s==null?void 0:s.session)===null||n===void 0?void 0:n.access_token})})}catch(r){if(pt(r))return{data:null,error:r};throw r}}async _enroll(t){try{return await this._useSession(async r=>{var n,s;const{data:i,error:l}=r;if(l)return{data:null,error:l};const u=Object.assign({friendly_name:t.friendlyName,factor_type:t.factorType},t.factorType==="phone"?{phone:t.phone}:t.factorType==="totp"?{issuer:t.issuer}:{}),{data:d,error:m}=await Pt(this.fetch,"POST",`${this.url}/factors`,{body:u,headers:this.headers,jwt:(n=i==null?void 0:i.session)===null||n===void 0?void 0:n.access_token});return m?{data:null,error:m}:(t.factorType==="totp"&&d.type==="totp"&&(!((s=d==null?void 0:d.totp)===null||s===void 0)&&s.qr_code)&&(d.totp.qr_code=`data:image/svg+xml;utf-8,${d.totp.qr_code}`),{data:d,error:null})})}catch(r){if(pt(r))return{data:null,error:r};throw r}}async _verify(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var n;const{data:s,error:i}=r;if(i)return{data:null,error:i};const l=Object.assign({challenge_id:t.challengeId},"webauthn"in t?{webauthn:Object.assign(Object.assign({},t.webauthn),{credential_response:t.webauthn.type==="create"?F$(t.webauthn.credential_response):L$(t.webauthn.credential_response)})}:{code:t.code}),{data:u,error:d}=await Pt(this.fetch,"POST",`${this.url}/factors/${t.factorId}/verify`,{body:l,headers:this.headers,jwt:(n=s==null?void 0:s.session)===null||n===void 0?void 0:n.access_token});return d?{data:null,error:d}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+u.expires_in},u)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",u),{data:u,error:d})})}catch(r){if(pt(r))return{data:null,error:r};throw r}})}async _challenge(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var n;const{data:s,error:i}=r;if(i)return{data:null,error:i};const l=await Pt(this.fetch,"POST",`${this.url}/factors/${t.factorId}/challenge`,{body:t,headers:this.headers,jwt:(n=s==null?void 0:s.session)===null||n===void 0?void 0:n.access_token});if(l.error)return l;const{data:u}=l;if(u.type!=="webauthn")return{data:u,error:null};switch(u.webauthn.type){case"create":return{data:Object.assign(Object.assign({},u),{webauthn:Object.assign(Object.assign({},u.webauthn),{credential_options:Object.assign(Object.assign({},u.webauthn.credential_options),{publicKey:$$(u.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},u),{webauthn:Object.assign(Object.assign({},u.webauthn),{credential_options:Object.assign(Object.assign({},u.webauthn.credential_options),{publicKey:M$(u.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(r){if(pt(r))return{data:null,error:r};throw r}})}async _challengeAndVerify(t){const{data:r,error:n}=await this._challenge({factorId:t.factorId});return n?{data:null,error:n}:await this._verify({factorId:t.factorId,challengeId:r.id,code:t.code})}async _listFactors(){var t;const{data:{user:r},error:n}=await this.getUser();if(n)return{data:null,error:n};const s={all:[],phone:[],totp:[],webauthn:[]};for(const i of(t=r==null?void 0:r.factors)!==null&&t!==void 0?t:[])s.all.push(i),i.status==="verified"&&s[i.factor_type].push(i);return{data:s,error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async t=>{var r,n;const{data:{session:s},error:i}=t;if(i)return{data:null,error:i};if(!s)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:l}=Fg(s.access_token);let u=null;l.aal&&(u=l.aal);let d=u;((n=(r=s.user.factors)===null||r===void 0?void 0:r.filter(p=>p.status==="verified"))!==null&&n!==void 0?n:[]).length>0&&(d="aal2");const f=l.amr||[];return{data:{currentLevel:u,nextLevel:d,currentAuthenticationMethods:f},error:null}}))}async fetchJwk(t,r={keys:[]}){let n=r.keys.find(u=>u.kid===t);if(n)return n;const s=Date.now();if(n=this.jwks.keys.find(u=>u.kid===t),n&&this.jwks_cached_at+HR>s)return n;const{data:i,error:l}=await Pt(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(l)throw l;return!i.keys||i.keys.length===0||(this.jwks=i,this.jwks_cached_at=s,n=i.keys.find(u=>u.kid===t),!n)?null:n}async getClaims(t,r={}){try{let n=t;if(!n){const{data:x,error:w}=await this.getSession();if(w||!x.session)return{data:null,error:w};n=x.session.access_token}const{header:s,payload:i,signature:l,raw:{header:u,payload:d}}=Fg(n);r!=null&&r.allowExpired||m$(i.exp);const m=!s.alg||s.alg.startsWith("HS")||!s.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(s.kid,r!=null&&r.keys?{keys:r.keys}:r==null?void 0:r.jwks);if(!m){const{error:x}=await this.getUser(n);if(x)throw x;return{data:{claims:i,header:s,signature:l},error:null}}const f=p$(s.alg),p=await crypto.subtle.importKey("jwk",m,f,!0,["verify"]);if(!await crypto.subtle.verify(f,p,l,t$(`${u}.${d}`)))throw new Wv("Invalid JWT signature");return{data:{claims:i,header:s,signature:l},error:null}}catch(n){if(pt(n))return{data:null,error:n};throw n}}}Yu.nextInstanceID=0;const G$=Yu;class Y$ extends G${constructor(t){super(t)}}var J$=function(e,t,r,n){function s(i){return i instanceof r?i:new r(function(l){l(i)})}return new(r||(r=Promise))(function(i,l){function u(f){try{m(n.next(f))}catch(p){l(p)}}function d(f){try{m(n.throw(f))}catch(p){l(p)}}function m(f){f.done?i(f.value):s(f.value).then(u,d)}m((n=n.apply(e,t||[])).next())})};class X${constructor(t,r,n){var s,i,l;this.supabaseUrl=t,this.supabaseKey=r;const u=UR(t);if(!r)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",u),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",u),this.storageUrl=new URL("storage/v1",u),this.functionsUrl=new URL("functions/v1",u);const d=`sb-${u.hostname.split(".")[0]}-auth-token`,m={db:OR,realtime:IR,auth:Object.assign(Object.assign({},TR),{storageKey:d}),global:PR},f=zR(n??{},m);this.storageKey=(s=f.auth.storageKey)!==null&&s!==void 0?s:"",this.headers=(i=f.global.headers)!==null&&i!==void 0?i:{},f.accessToken?(this.accessToken=f.accessToken,this.auth=new Proxy({},{get:(p,y)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(y)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((l=f.auth)!==null&&l!==void 0?l:{},this.headers,f.global.fetch),this.fetch=MR(r,this._getAccessToken.bind(this),f.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},f.realtime)),this.rest=new K5(new URL("rest/v1",u).href,{headers:this.headers,schema:f.db.schema,fetch:this.fetch}),this.storage=new CR(this.storageUrl.href,this.headers,this.fetch,n==null?void 0:n.storage),f.accessToken||this._listenForAuthEvents()}get functions(){return new M5(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(t){return this.rest.from(t)}schema(t){return this.rest.schema(t)}rpc(t,r={},n={}){return this.rest.rpc(t,r,n)}channel(t,r={config:{}}){return this.realtime.channel(t,r)}getChannels(){return this.realtime.getChannels()}removeChannel(t){return this.realtime.removeChannel(t)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){return J$(this,void 0,void 0,function*(){var t,r;if(this.accessToken)return yield this.accessToken();const{data:n}=yield this.auth.getSession();return(r=(t=n.session)===null||t===void 0?void 0:t.access_token)!==null&&r!==void 0?r:this.supabaseKey})}_initSupabaseAuthClient({autoRefreshToken:t,persistSession:r,detectSessionInUrl:n,storage:s,userStorage:i,storageKey:l,flowType:u,lock:d,debug:m},f,p){const y={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new Y$({url:this.authUrl.href,headers:Object.assign(Object.assign({},y),f),storageKey:l,autoRefreshToken:t,persistSession:r,detectSessionInUrl:n,storage:s,userStorage:i,flowType:u,lock:d,debug:m,fetch:p,hasCustomAuthorizationHeader:Object.keys(this.headers).some(x=>x.toLowerCase()==="authorization")})}_initRealtimeClient(t){return new uR(this.realtimeUrl.href,Object.assign(Object.assign({},t),{params:Object.assign({apikey:this.supabaseKey},t==null?void 0:t.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((r,n)=>{this._handleTokenChanged(r,"CLIENT",n==null?void 0:n.access_token)})}_handleTokenChanged(t,r,n){(t==="TOKEN_REFRESHED"||t==="SIGNED_IN")&&this.changedAccessToken!==n?(this.changedAccessToken=n,this.realtime.setAuth(n)):t==="SIGNED_OUT"&&(this.realtime.setAuth(),r=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const Q$=(e,t,r)=>new X$(e,t,r);function Z$(){if(typeof window<"u"||typeof process>"u")return!1;const e=process.version;if(e==null)return!1;const t=e.match(/^v(\d+)\./);return t?parseInt(t[1],10)<=18:!1}Z$()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const e3="https://okdzllfpsvltjqryslnn.supabase.co",t3="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im9rZHpsbGZwc3ZsdGpxcnlzbG5uIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTk3NTcxMTgsImV4cCI6MjA3NTMzMzExOH0.uLhMzo49-OMEp4ghFAFI31IpiDs1tjbyY2jZlk-vgUo",Ne=Q$(e3,t3,{db:{schema:"public"},auth:{persistSession:!0,autoRefreshToken:!0}}),Aa="__FEATURE_SUGGESTION__",ox="__feature_suggestion__",r3="__feature_future_session__";function hm(e){let t={};if(e!=null&&e.description)try{t=JSON.parse(e.description)}catch(s){console.warn("[databaseService] Unable to parse suggestion payload",s),t={}}const n=(Array.isArray(e==null?void 0:e.tags)?e.tags:[]).includes(r3)?"future":"pending";return{id:e.id,session_id:e.session_id,title:e.title,summary:t.summary??null,whatWouldItDo:t.whatWouldItDo??null,howWouldItWork:t.howWouldItWork??null,status:n,requester_id:t.requesterId??null,requester_name:t.requesterName??null,requester_email:t.requesterEmail??null,created_at:e.created_at}}async function n3(e){try{if(!Ne||typeof Ne.from!="function")throw new Error("Supabase client is not properly initialized");const t=`${Ne.supabaseUrl}/rest/v1/users?email=eq.${encodeURIComponent(e)}&select=*&limit=1`,r={apikey:Ne.supabaseKey,Authorization:`Bearer ${Ne.supabaseKey}`,"Content-Type":"application/json",Prefer:"return=representation"},n=fetch(t,{method:"GET",headers:r}).then(async f=>{if(!f.ok){const y=await f.text();throw console.error("[databaseService] Direct fetch error:",y),new Error(`API error: ${f.status} - ${y}`)}const p=await f.json();return{data:p.length>0?p[0]:null,error:null}}).catch(f=>{throw console.error("[databaseService] Direct fetch exception:",f),f}),s=Promise.race([n,new Promise((f,p)=>{setTimeout(()=>p(new Error("Direct fetch timeout after 5 seconds")),5e3)})]);try{const f=await s;if(f.data)return f.data}catch{}const i=Ne.from("users").select("*").eq("email",e).single(),u=await Promise.race([i,new Promise((f,p)=>{setTimeout(()=>{console.error("[databaseService]  TIMEOUT: Query did not complete after 10 seconds"),p(new Error("Query timeout after 10 seconds"))},1e4)})]),{data:d,error:m}=u;if(m){if(m.code==="PGRST116")return null;throw m}return d}catch(t){throw console.error("[databaseService] getUserByEmail error:",t),t}}async function s3(e){const t="5e5482eb-82f0-4e76-8a6b-c6d74b01cd3a",{data:r,error:n}=await Ne.from("users").insert([{email:e.email,name:e.name,tenant_id:e.tenant_id||t}]).select().single();if(n)throw console.error("[databaseService] createUser error:",n),n;return r}async function Jo(e,t){try{let r=await n3(e);return r||(r=await s3({email:e,name:t})),r}catch(r){throw console.error("[databaseService] Error in getOrCreateUser:",r),r}}async function Hj(){const{data:e,error:t}=await Ne.from("users").select("*").order("created_at",{ascending:!1});if(t)throw t;return e||[]}async function i3(e){var l,u;const[t,r,n]=await Promise.all([pl(e),Ne.from("session_admins").select("session_id").eq("user_id",e),Ne.from("users").select("email").eq("id",e).single()]),s=((l=r.data)==null?void 0:l.length)||0;let i=0;if((u=n.data)!=null&&u.email){const{data:d}=await Ne.from("session_stakeholders").select("session_id").eq("user_email",n.data.email);i=(d==null?void 0:d.length)||0}return{userId:e,isSystemAdmin:t,sessionAdminCount:s,stakeholderSessionCount:i}}const Rc="PRODUCTS_TABLE_MISSING";function _a(e){return typeof e=="object"&&e!==null&&e.code===Rc}async function zC(){const{data:e,error:t}=await Ne.from("products").select("*").order("name",{ascending:!0});if(t){if((t==null?void 0:t.code)==="PGRST205"){const r=new Error("Products table is missing");throw r.code=Rc,r}throw t}return e||[]}async function xa(e){const{data:t,error:r}=await Ne.from("products").select("*").eq("tenant_id",e).order("name",{ascending:!0});if(r){if((r==null?void 0:r.code)==="PGRST205"){const n=new Error("Products table is missing");throw n.code=Rc,n}throw r}return t||[]}async function lx(e,t){if(!e)throw new Error("Product ID is required");const r={};if(t.name!==void 0){const i=t.name.trim();if(!i)throw new Error("Product name cannot be empty");r.name=i}if(t.color_hex!==void 0&&(r.color_hex=t.color_hex),Object.keys(r).length===0)throw new Error("No updates provided");const{data:n,error:s}=await Ne.from("products").update(r).eq("id",e).select().single();if(s){if((s==null?void 0:s.code)==="PGRST205"){const i=new Error("Products table is missing");throw i.code=Rc,i}throw s}return n}async function UC(e,t,r){const n=t.trim();if(!n)throw new Error("Product name is required");const{data:s,error:i}=await Ne.from("products").insert([{name:n,tenant_id:e,color_hex:r||null}]).select().single();if(i){if((i==null?void 0:i.code)==="PGRST205"){const l=new Error("Products table is missing");throw l.code=Rc,l}if((i==null?void 0:i.code)==="23505"){const{data:l,error:u}=await Ne.from("products").select("*").eq("tenant_id",e).eq("name",n).maybeSingle();if(u)throw u;if(l)return l}throw i}return s}async function BC(e){const{error:t}=await Ne.from("products").delete().eq("id",e);if(t){if((t==null?void 0:t.code)==="PGRST205"){const r=new Error("Products table is missing");throw r.code=Rc,r}throw t}}const hd="*, product:products(name)";function mm(e){if(!e)throw new Error("Unexpected empty session row");const{product:t,...r}=e,n=r.product_name??(t==null?void 0:t.name)??null;return{...r,product_name:n}}function WC(e){return!e||e.length===0?[]:e.map(t=>mm(t))}async function yo(){try{const e=`${Ne.supabaseUrl}/rest/v1/voting_sessions?select=${encodeURIComponent(hd)}&order=created_at.desc`,t={apikey:Ne.supabaseKey,Authorization:`Bearer ${Ne.supabaseKey}`,"Content-Type":"application/json"},r=await fetch(e,{method:"GET",headers:t});if(!r.ok){const s=await r.text();throw console.error("[databaseService] getAllSessions API error:",r.status,s),new Error(`API error: ${r.status} - ${s}`)}const n=await r.json();return WC(n)}catch(e){throw console.error("[databaseService] Exception in getAllSessions:",e),e}}async function a3(e){const{data:t,error:r}=await Ne.from("voting_sessions").select(hd).eq("id",e).single();if(r){if(r.code==="PGRST116")return null;throw r}return t?mm(t):null}async function o3(e){const{data:t,error:r}=await Ne.from("voting_sessions").select(hd).eq("session_code",e).single();if(r){if(r.code==="PGRST116")return null;throw r}return t?mm(t):null}async function VC(e){var t;try{if(await pl(e))return yo();const n=`${Ne.supabaseUrl}/rest/v1/session_admins?user_id=eq.${e}&select=session_id`,s=await fetch(n,{method:"GET",headers:{apikey:Ne.supabaseKey,Authorization:`Bearer ${Ne.supabaseKey}`,"Content-Type":"application/json"}});if(!s.ok){const C=await s.text();throw console.error("[databaseService] Error loading session admins:",s.status,C),new Error(`API error: ${s.status} - ${C}`)}const i=await s.json(),l=(i==null?void 0:i.map(C=>C.session_id))||[],u=`${Ne.supabaseUrl}/rest/v1/users?id=eq.${e}&select=email&limit=1`,d=await fetch(u,{method:"GET",headers:{apikey:Ne.supabaseKey,Authorization:`Bearer ${Ne.supabaseKey}`,"Content-Type":"application/json"}});if(!d.ok){const C=await d.text();throw console.error("[databaseService] Error getting user email:",d.status,C),new Error(`API error: ${d.status} - ${C}`)}const m=await d.json(),f=(t=m==null?void 0:m[0])==null?void 0:t.email;if(!f)throw console.error("[databaseService] User email not found"),new Error("User email not found");const p=`${Ne.supabaseUrl}/rest/v1/session_stakeholders?user_email=eq.${encodeURIComponent(f)}&select=session_id`,y=await fetch(p,{method:"GET",headers:{apikey:Ne.supabaseKey,Authorization:`Bearer ${Ne.supabaseKey}`,"Content-Type":"application/json"}});if(!y.ok){const C=await y.text();throw console.error("[databaseService] Error loading session stakeholders:",y.status,C),new Error(`API error: ${y.status} - ${C}`)}const x=await y.json(),w=(x==null?void 0:x.map(C=>C.session_id))||[],b=[...new Set([...l,...w])];if(b.length===0)return[];const S=`${Ne.supabaseUrl}/rest/v1/voting_sessions?select=${encodeURIComponent(hd)}&id=in.(${b.join(",")})&order=created_at.desc`,_=await fetch(S,{method:"GET",headers:{apikey:Ne.supabaseKey,Authorization:`Bearer ${Ne.supabaseKey}`,"Content-Type":"application/json"}});if(!_.ok){const C=await _.text();throw console.error("[databaseService] Error loading voting sessions:",_.status,C),new Error(`API error: ${_.status} - ${C}`)}const E=await _.json();return WC(E)}catch(r){throw console.error("[databaseService] Error in getSessionsForUser:",r),r}}async function qC(e){if(!e)return null;const{data:t,error:r}=await Ne.from("voting_sessions").select(hd).eq("product_id",e).eq("is_active",!0).maybeSingle();if(r){if(r.code==="PGRST116")return null;throw r}return t?mm(t):null}async function HC(e){const{data:t,error:r}=await Ne.from("voting_sessions").insert([e]).select().single();if(r)throw r;return t}async function KC(e,t){const{data:r,error:n}=await Ne.from("voting_sessions").update(t).eq("id",e).select().single();if(n)throw n;return r}async function l3(e){const{error:t}=await Ne.from("voting_sessions").delete().eq("id",e);if(t)throw t}async function c3(e,t){const{error:r}=await Ne.from("votes").delete().eq("session_id",e).eq("feature_id",t);if(r)throw r}async function GC(e){const{data:t,error:r}=await Ne.from("session_admins").select(`
      *,
      users (*)
    `).eq("session_id",e);if(r)throw r;return(t||[]).map(n=>({id:n.id,session_id:n.session_id,user_id:n.user_id,created_at:n.created_at,user:n.users}))}async function pc(e,t){const{data:r,error:n}=await Ne.from("session_admins").insert([{session_id:e,user_id:t}]).select().single();if(n)throw n;return r}async function u3(e,t,r){const n=await Jo(t,r);return pc(e,n.id)}async function Qf(e,t){const{error:r}=await Ne.from("session_admins").delete().eq("session_id",e).eq("user_id",t);if(r)throw r}async function pm(e,t){try{if(await pl(t))return!0;const n=`${Ne.supabaseUrl}/rest/v1/session_admins?session_id=eq.${e}&user_id=eq.${t}&select=id&limit=1`,s={apikey:Ne.supabaseKey,Authorization:`Bearer ${Ne.supabaseKey}`,"Content-Type":"application/json"},i=await fetch(n,{method:"GET",headers:s});if(!i.ok)return console.error("Error checking admin status:",i.status),!1;const l=await i.json();return Array.isArray(l)&&l.length>0}catch(r){return console.error("Caught exception checking admin:",r),!1}}async function d3(e){const{data:t,error:r}=await Ne.from("session_stakeholders").select("*").eq("session_id",e).order("user_name",{ascending:!0});if(r)throw r;return t||[]}async function YC(e){const{data:t,error:r}=await Ne.from("session_stakeholders").insert([e]).select().single();if(r)throw r;return t}async function Kj(e,t,r){return YC({session_id:e,user_email:t,user_name:r,votes_allocated:0,has_voted:!1})}function JC(e,t,r){const n=`${window.location.origin}/login?session=${e.session_code??""}`,s=encodeURIComponent(`You're invited to vote: ${e.title}`),i=encodeURIComponent(`Hi,

You've been invited to participate in a feature voting session.

Session: ${e.title}
Goal: ${e.goal}

To get started, copy and paste this link into your browser:

${n}

Voting Period: ${e.start_date?Gj(e.start_date):""} - ${e.end_date?Gj(e.end_date):""}

Best regards,
${r}`);return`mailto:${encodeURIComponent(t)}?subject=${s}&body=${i}`}function Gj(e){return new Date(e).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})}async function Vv(e,t){const{error:r}=await Ne.from("session_stakeholders").delete().eq("session_id",e).eq("user_email",t);if(r)throw r}async function cx(e,t){try{const r=`${Ne.supabaseUrl}/rest/v1/session_stakeholders?session_id=eq.${e}&user_email=eq.${encodeURIComponent(t)}&select=id&limit=1`,n={apikey:Ne.supabaseKey,Authorization:`Bearer ${Ne.supabaseKey}`,"Content-Type":"application/json"},s=await fetch(r,{method:"GET",headers:n});if(!s.ok)return console.error("Error checking stakeholder status:",s.status),!1;const i=await s.json();return Array.isArray(i)&&i.length>0}catch(r){return console.error("Caught exception checking stakeholder:",r),!1}}async function f3(e,t){const{data:r,error:n}=await Ne.from("session_stakeholders").select("id").eq("session_id",e).eq("user_email",t.toLowerCase()).maybeSingle();return n?(console.error("Error checking stakeholder status:",n),!1):!!r}async function Ug(e,t){const{error:r}=await Ne.from("session_stakeholders").delete().eq("session_id",e).eq("user_email",t.toLowerCase());if(r)throw r}async function ya(e){const t=`${Ne.supabaseUrl}/rest/v1/features?session_id=eq.${e}&select=*&order=created_at.desc`,r={apikey:Ne.supabaseKey,Authorization:`Bearer ${Ne.supabaseKey}`,"Content-Type":"application/json"},n=await fetch(t,{method:"GET",headers:r});if(!n.ok){const i=await n.text();throw new Error(`API error: ${n.status} - ${i}`)}return(await n.json()||[]).filter(i=>{const l=i.state===Aa,u=Array.isArray(i.tags)&&i.tags.includes(ox);return!l&&!u})}async function Bg(e){const{data:t,error:r}=await Ne.from("features").insert([{session_id:e.session_id,title:e.title,description:e.description,epic:e.epic,state:e.state,area_path:e.areaPath,tags:e.tags,azure_devops_id:e.azure_devops_id,azure_devops_url:e.azure_devops_url}]).select().single();if(r)throw r;return t}async function Wg(e,t){const r={};t.title!==void 0&&(r.title=t.title),t.description!==void 0&&(r.description=t.description),t.epic!==void 0&&(r.epic=t.epic),t.state!==void 0&&(r.state=t.state),t.areaPath!==void 0&&(r.area_path=t.areaPath),t.tags!==void 0&&(r.tags=t.tags),t.azure_devops_id!==void 0&&(r.azure_devops_id=t.azure_devops_id),t.azure_devops_url!==void 0&&(r.azure_devops_url=t.azure_devops_url);const{data:n,error:s}=await Ne.from("features").update(r).eq("id",e).select().single();if(s)throw s;return n}async function Yj(e){const{error:t}=await Ne.from("features").delete().eq("id",e);if(t)throw t}function XC(e){return{id:e.id,sessionId:e.session_id,type:e.type,reason:e.reason,details:e.details??null,actorName:e.actor_name??"Admin",actorId:e.actor_id??null,createdAt:e.created_at}}async function h3(e){try{const{data:t,error:r}=await Ne.from("session_status_notes").select("*").eq("session_id",e).order("created_at",{ascending:!1});if(r)throw r;return(t||[]).map(XC)}catch(t){if((t==null?void 0:t.code)==="42P01")return console.warn("[databaseService] session_status_notes table not found; status notes will not persist.",t),[];throw t}}async function m3(e){try{const{data:t,error:r}=await Ne.from("session_status_notes").insert([{session_id:e.session_id,type:e.type,reason:e.reason,details:e.details??null,actor_id:e.actor_id??null,actor_name:e.actor_name}]).select("*").single();if(r)throw r;return XC(t)}catch(t){if((t==null?void 0:t.code)==="42P01")return console.warn("[databaseService] session_status_notes table not found; status notes will not persist.",t),{id:`temp-${Date.now()}`,sessionId:e.session_id,type:e.type,reason:e.reason,details:e.details??null,actorName:e.actor_name,actorId:e.actor_id??null,createdAt:new Date().toISOString()};throw t}}async function Go(e){const t=`${Ne.supabaseUrl}/rest/v1/votes?session_id=eq.${e}&select=*`,r={apikey:Ne.supabaseKey,Authorization:`Bearer ${Ne.supabaseKey}`,"Content-Type":"application/json"},n=await fetch(t,{method:"GET",headers:r});if(!n.ok){const i=await n.text();throw new Error(`API error: ${n.status} - ${i}`)}return await n.json()||[]}async function p3(e){const{data:t}=await Ne.from("votes").select("*").eq("session_id",e.session_id).eq("feature_id",e.feature_id).eq("user_id",e.user_id).single();if(t){const{data:r,error:n}=await Ne.from("votes").update({vote_count:e.vote_count}).eq("session_id",e.session_id).eq("feature_id",e.feature_id).eq("user_id",e.user_id).select().single();if(n)throw n;return r}else{const{data:r,error:n}=await Ne.from("votes").insert([e]).select().single();if(n)throw n;return r}}async function g3(e,t){const{error:r}=await Ne.from("votes").delete().eq("session_id",e).eq("user_id",t);if(r)throw console.error("Error deleting user votes:",r),r}async function y3(e){const{error:t}=await Ne.from("votes").delete().eq("session_id",e);if(t)throw t}async function v3(e){try{const{data:t,error:r}=await Ne.from("azure_devops_config").select("*").eq("session_id",e).maybeSingle();if(r){if(r.code==="PGRST116")return null;throw r}return t}catch(t){return console.error("Error getting Azure DevOps config:",t),null}}async function ec(e,t){try{const r={session_id:e,organization:t.organization,project:t.project,enabled:t.enabled,work_item_type:t.workItemType};t.accessToken!==void 0&&(r.access_token=t.accessToken),t.refreshToken!==void 0&&(r.refresh_token=t.refreshToken),t.tokenExpiresAt!==void 0&&(r.token_expires_at=t.tokenExpiresAt),t.tenantId!==void 0&&(r.tenant_id=t.tenantId),t.clientId!==void 0&&(r.client_id=t.clientId),t.query!==void 0&&(r.query=t.query),t.lastSyncTime!==void 0&&(r.last_sync_time=t.lastSyncTime),t.states!==void 0&&(r.states=t.states),t.areaPath!==void 0&&(r.area_path=t.areaPath),t.tags!==void 0&&(r.tags=t.tags);const{data:n,error:s}=await Ne.from("azure_devops_config").update(r).eq("session_id",e).select();if(!s&&n&&n.length>0)return n[0];const{data:i,error:l}=await Ne.from("azure_devops_config").upsert([r]).select().single();if(!l)return i;if((l==null?void 0:l.code)==="23505"){const{data:u,error:d}=await Ne.from("azure_devops_config").select("*").eq("session_id",e).maybeSingle();if(d)throw d;return u}throw l||s}catch(r){throw console.error("Error saving Azure DevOps config:",r),r}}async function x3(){return(await yo())[0]||null}async function w3(e){const t=await x3();if(!t)throw new Error("No session found");return KC(t.id,e)}async function Jj(e,t){return KC(e,t)}async function b3(e){const{data:t,error:r}=await Ne.from("info_requests").insert([{session_id:e.session_id,feature_id:e.feature_id,feature_title:e.feature_title,requester_id:e.requester_id,requester_name:e.requester_name,requester_email:e.requester_email,created_at:e.created_at}]).select().single();if(r)throw r;return t}async function j3(e){const t={summary:e.description??null,whatWouldItDo:e.whatWouldItDo??null,howWouldItWork:e.howWouldItWork??null,requesterId:e.requester_id??null,requesterName:e.requester_name??null,requesterEmail:e.requester_email??null},{data:r,error:n}=await Ne.from("features").insert([{session_id:e.session_id,title:e.title,description:JSON.stringify(t),epic:null,state:Aa,area_path:null,tags:[ox],azure_devops_id:null,azure_devops_url:null}]).select("id, session_id, title, description, created_at").single();if(n)throw n;return hm(r)}async function S3(e,t){const{data:r,error:n}=await Ne.from("features").select("id, title, description, session_id, created_at").eq("id",e).eq("state",Aa).single();if(n)throw n;let s={};if(r!=null&&r.description)try{s=JSON.parse(r.description)}catch(d){console.warn("[databaseService] Unable to parse suggestion payload during update",d)}const i={summary:t.summary??s.summary??null,whatWouldItDo:t.whatWouldItDo??s.whatWouldItDo??null,howWouldItWork:t.howWouldItWork??s.howWouldItWork??null,requesterId:s.requesterId??null,requesterName:t.requester_name??s.requesterName??null,requesterEmail:t.requester_email??s.requesterEmail??null},{data:l,error:u}=await Ne.from("features").update({title:t.title??r.title,description:JSON.stringify(i)}).eq("id",e).eq("state",Aa).select("id, session_id, title, description, created_at").single();if(u)throw u;return hm(l)}async function k3(e){const{error:t}=await Ne.from("features").delete().eq("id",e).eq("state",Aa);if(t)throw t}async function _3(e,t){const{data:r,error:n}=await Ne.from("features").update({session_id:t}).eq("id",e).eq("state",Aa).select("id, session_id, title, description, created_at").single();if(n)throw n;return hm(r)}async function N3(e){const{data:t,error:r}=await Ne.from("features").select("*").eq("id",e).eq("state",Aa).single();if(r)throw r;let n={};if(t!=null&&t.description)try{n=JSON.parse(t.description)}catch(d){console.warn("[databaseService] Unable to parse suggestion payload during promotion",d)}const s=[];n.summary&&s.push(n.summary),n.whatWouldItDo&&s.push(`What would it do?
${n.whatWouldItDo}`),n.howWouldItWork&&s.push(`How would it work?
${n.howWouldItWork}`);const i=Array.isArray(t.tags)?t.tags.filter(d=>d!==ox):[],{data:l,error:u}=await Ne.from("features").update({description:s.join(`

`)||t.title,state:null,tags:i}).eq("id",e).eq("state",Aa).select("*").single();if(u)throw u;return l}async function Xj(e){const{data:t,error:r}=await Ne.from("features").select("id, session_id, title, description, created_at, state, tags").eq("session_id",e).eq("state",Aa).order("created_at",{ascending:!1});if(r)throw r;return(t||[]).map(hm)}async function qv(){const{data:e,error:t}=await Ne.from("system_admins").select(`
      *,
      users (*)
    `).order("created_at",{ascending:!1});if(t)throw t;return(e||[]).map(r=>({id:r.id,user_id:r.user_id,created_at:r.created_at,user:r.users}))}async function ph(e){const{data:t,error:r}=await Ne.from("system_admins").insert([{user_id:e}]).select().single();if(r)throw r;return t}async function Zf(e){const{error:t}=await Ne.from("system_admins").delete().eq("user_id",e);if(t)throw t}async function pl(e){try{const t=`${Ne.supabaseUrl}/rest/v1/system_admins?user_id=eq.${e}&select=id&limit=1`,r={apikey:Ne.supabaseKey,Authorization:`Bearer ${Ne.supabaseKey}`,"Content-Type":"application/json"},n=await fetch(t,{method:"GET",headers:r});if(!n.ok)return console.error("Error checking system admin status:",n.status),!1;const s=await n.json();return Array.isArray(s)&&s.length>0}catch(t){return console.error("Caught exception checking system admin:",t),!1}}const C3=["dave.hoffman@newmill.com"],E3="".split(",").map(e=>e.trim().toLowerCase()).filter(Boolean),A3=Array.from(new Set([...C3,...E3]));function Hv(e){return e?A3.includes(e.toLowerCase()):!1}const QC=v.createContext(void 0);function P3({children:e}){const[t,r]=v.useState(null),[n,s]=v.useState([]),[i,l]=v.useState(null),[u,d]=v.useState(!1),[m,f]=v.useState(!1),[p,y]=v.useState(!1),[x,w]=v.useState(!0),[b,S]=v.useState(!1),[_,E]=v.useState(!1),C=v.useRef(!1),O=v.useCallback(async H=>{if(_)return;const L=H||i;if(!L){s([]),r(q=>{if(q)try{localStorage.removeItem("voting_system_current_session")}catch{}return null});return}E(!0);try{const q=Hv(L.email);let z;q?z=await yo():z=await VC(L.id),s(z),r(U=>{if(!U)return U;const ne=z.find(ie=>ie.id===U.id);if(!ne){try{localStorage.removeItem("voting_system_current_session")}catch{}return null}if(ne.id!==U.id)return U;if(ne!==U){try{localStorage.setItem("voting_system_current_session",ne.id)}catch{}return ne}return U})}catch(q){console.error("Error loading sessions:",q),s([])}finally{E(!1)}},[i,_]);v.useEffect(()=>{if(C.current)return;C.current=!0;const H=setTimeout(()=>{w(!1)},5e3);(async()=>{var z,U;try{if(window.location.search.includes("code=")||window.location.hash.includes("access_token")||window.location.search.includes("error=")){setTimeout(async()=>{var oe,V;try{const{data:{session:Z}}=await Ne.auth.getSession();if(Z!=null&&Z.user){const ee=Z.user.email;if(ee){const re=((oe=Z.user.user_metadata)==null?void 0:oe.full_name)||((V=Z.user.user_metadata)==null?void 0:V.name)||ee.split("@")[0]||"User";try{const me=await Jo(ee.toLowerCase(),re);l(me),await O(me)}catch(me){console.error("Error getting/creating user:",me)}}}}catch(Z){console.error("Error in OAuth callback handler:",Z)}finally{w(!1),clearTimeout(H)}},1e3);return}const{data:{session:ie}}=await Ne.auth.getSession();if(ie!=null&&ie.user){const oe=ie.user.email;if(oe){const V=((z=ie.user.user_metadata)==null?void 0:z.full_name)||((U=ie.user.user_metadata)==null?void 0:U.name)||oe.split("@")[0]||"User";try{const Z=await Jo(oe.toLowerCase(),V);l(Z),await O(Z)}catch(Z){console.error("Error getting/creating user:",Z)}}}else{const oe=localStorage.getItem("voting_system_user");if(oe)try{const V=JSON.parse(oe);l(V);try{await O(V)}catch(Z){console.error("Error refreshing sessions:",Z)}}catch(V){console.error("Error loading stored user:",V),localStorage.removeItem("voting_system_user")}}}catch(ne){console.error("Error checking Supabase auth:",ne);const ie=localStorage.getItem("voting_system_user");if(ie)try{const oe=JSON.parse(ie);l(oe)}catch(oe){console.error("Error loading stored user:",oe),localStorage.removeItem("voting_system_user")}}finally{window.location.search.includes("code=")||window.location.hash.includes("access_token")||window.location.search.includes("error=")||(w(!1),clearTimeout(H))}})();const{data:{subscription:q}}=Ne.auth.onAuthStateChange(async(z,U)=>{var ne,ie,oe,V;if(z==="SIGNED_IN"&&(U!=null&&U.user)){const Z=U.user.email;if(Z){const ee=((ne=U.user.user_metadata)==null?void 0:ne.full_name)||((ie=U.user.user_metadata)==null?void 0:ie.name)||Z.split("@")[0]||"User",re=await Jo(Z.toLowerCase(),ee);l(re),await O(re),w(!1)}}else if(z==="SIGNED_OUT")l(null),s([]),r(null),localStorage.removeItem("voting_system_user"),localStorage.removeItem("voting_system_current_session"),w(!1);else if(z==="TOKEN_REFRESHED"&&(U!=null&&U.user)){if(!i&&U.user.email){const Z=U.user.email,ee=((oe=U.user.user_metadata)==null?void 0:oe.full_name)||((V=U.user.user_metadata)==null?void 0:V.name)||Z.split("@")[0]||"User",re=await Jo(Z.toLowerCase(),ee);l(re),await O(re)}w(!1)}});return()=>{q.unsubscribe(),clearTimeout(H)}},[]),v.useEffect(()=>{(async()=>{if(!t||!i){d(!1),f(!1),S(!1);return}if(!b)try{const[L,q]=await Promise.all([pm(t.id,i.id),cx(t.id,i.email)]);d(L),f(q),S(!1)}catch(L){console.error("Error checking user roles:",L),d(!1),f(!1),S(!0)}})()},[t,i,b]),v.useEffect(()=>{(async()=>{if(!i){y(!1);return}if(Hv(i.email)){y(!0);return}try{const q=await pl(i.id);y(q)}catch(q){console.error("Error checking system admin status:",q),y(!1)}})()},[i]);const T=v.useCallback(async H=>{l(H),S(!1),H?(localStorage.setItem("voting_system_user",JSON.stringify(H)),await O(H)):(localStorage.removeItem("voting_system_user"),s([]),r(null),y(!1))},[O]),P=v.useCallback(H=>{r(H),S(!1),H?localStorage.setItem("voting_system_current_session",H.id):localStorage.removeItem("voting_system_current_session")},[]);v.useEffect(()=>{(async()=>{if(!i||n.length===0)return;const L=localStorage.getItem("voting_system_current_session");if(L){const q=n.find(z=>z.id===L);q&&r(q)}})()},[i,n]);const F={currentSession:t,sessions:n,currentUser:i,isAdmin:u,isStakeholder:m,isSystemAdmin:p,isLoading:x,setCurrentSession:P,refreshSessions:O,setCurrentUser:T};return x?a.jsx("div",{className:"min-h-screen w-full bg-gray-50 flex items-center justify-center",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-[#2d4660] mx-auto mb-4"}),a.jsx("p",{className:"text-gray-600",children:"Loading..."})]})}):a.jsx(QC.Provider,{value:F,children:e})}function aa(){const e=v.useContext(QC);if(e===void 0)throw new Error("useSession must be used within a SessionProvider");return e}function ux(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function"){var s=0;for(n=Object.getOwnPropertySymbols(e);s<n.length;s++)t.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(e,n[s])&&(r[n[s]]=e[n[s]])}return r}function bo(e,t,r,n){return new(r||(r=Promise))((function(s,i){function l(m){try{d(n.next(m))}catch(f){i(f)}}function u(m){try{d(n.throw(m))}catch(f){i(f)}}function d(m){var f;m.done?s(m.value):(f=m.value,f instanceof r?f:new r((function(p){p(f)}))).then(l,u)}d((n=n.apply(e,[])).next())}))}var Qj,Zj,eS,gh,tS,rS,nS,Kv,sS,iS;function O3(e){return(e==null?void 0:e.errorCode)!==void 0}(function(e){e.Inline="inline",e.Desktop="desktop",e.Web="web"})(Qj||(Qj={})),(function(e){e.M365Content="m365content"})(Zj||(Zj={})),(function(e){e.DriveId="driveId",e.GroupId="groupId",e.SiteId="siteId",e.UserId="userId"})(eS||(eS={})),(function(e){e[e.NOT_SUPPORTED_ON_PLATFORM=100]="NOT_SUPPORTED_ON_PLATFORM",e[e.INTERNAL_ERROR=500]="INTERNAL_ERROR",e[e.NOT_SUPPORTED_IN_CURRENT_CONTEXT=501]="NOT_SUPPORTED_IN_CURRENT_CONTEXT",e[e.PERMISSION_DENIED=1e3]="PERMISSION_DENIED",e[e.NETWORK_ERROR=2e3]="NETWORK_ERROR",e[e.NO_HW_SUPPORT=3e3]="NO_HW_SUPPORT",e[e.INVALID_ARGUMENTS=4e3]="INVALID_ARGUMENTS",e[e.UNAUTHORIZED_USER_OPERATION=5e3]="UNAUTHORIZED_USER_OPERATION",e[e.INSUFFICIENT_RESOURCES=6e3]="INSUFFICIENT_RESOURCES",e[e.THROTTLE=7e3]="THROTTLE",e[e.USER_ABORT=8e3]="USER_ABORT",e[e.OPERATION_TIMED_OUT=8001]="OPERATION_TIMED_OUT",e[e.OLD_PLATFORM=9e3]="OLD_PLATFORM",e[e.FILE_NOT_FOUND=404]="FILE_NOT_FOUND",e[e.SIZE_EXCEEDED=1e4]="SIZE_EXCEEDED"})(gh||(gh={})),(function(e){e.GeoLocation="geolocation",e.Media="media"})(tS||(tS={})),(function(e){e.BCAIS="bcais",e.BCWAF="bcwaf",e.BCWBF="bcwbf"})(rS||(rS={})),(function(e){e.Faculty="faculty",e.Student="student",e.Other="other"})(nS||(nS={})),(function(e){e.Adult="adult",e.MinorNoParentalConsentRequired="minorNoParentalConsentRequired",e.MinorWithoutParentalConsent="minorWithoutParentalConsent",e.MinorWithParentalConsent="minorWithParentalConsent",e.NotAdult="notAdult",e.NonAdult="notAdult"})(Kv||(Kv={})),(function(e){e.HigherEducation="higherEducation",e.K12="k12",e.Other="other"})(sS||(sS={})),(function(e){e.TextPlain="text/plain",e.TextHtml="text/html",e.ImagePNG="image/png",e.ImageJPEG="image/jpeg"})(iS||(iS={}));var Xt,Gv,Yv,aS,oS,lS,cS,uS;(function(e){e.desktop="desktop",e.web="web",e.android="android",e.ios="ios",e.ipados="ipados",e.macos="macos",e.visionOS="visionOS",e.rigel="rigel",e.surfaceHub="surfaceHub",e.teamsRoomsWindows="teamsRoomsWindows",e.teamsRoomsAndroid="teamsRoomsAndroid",e.teamsPhones="teamsPhones",e.teamsDisplays="teamsDisplays"})(Xt||(Xt={})),(function(e){e.office="Office",e.outlook="Outlook",e.outlookWin32="OutlookWin32",e.orange="Orange",e.places="Places",e.teams="Teams",e.teamsModern="TeamsModern"})(Gv||(Gv={})),(function(e){e.settings="settings",e.content="content",e.authentication="authentication",e.remove="remove",e.task="task",e.sidePanel="sidePanel",e.stage="stage",e.meetingStage="meetingStage"})(Yv||(Yv={})),(function(e){e.copilotSidePanel="copilotSidePanel",e.copilotMainPane="copilotMainPane",e.copilotFullScreen="copilotFullScreen"})(aS||(aS={})),(function(e){e[e.Standard=0]="Standard",e[e.Edu=1]="Edu",e[e.Class=2]="Class",e[e.Plc=3]="Plc",e[e.Staff=4]="Staff"})(oS||(oS={})),(function(e){e[e.Admin=0]="Admin",e[e.User=1]="User",e[e.Guest=2]="Guest"})(lS||(lS={})),(function(e){e.Large="large",e.Medium="medium",e.Small="small"})(cS||(cS={})),(function(e){e.Regular="Regular",e.Private="Private",e.Shared="Shared"})(uS||(uS={}));const T3={errorCode:gh.NOT_SUPPORTED_ON_PLATFORM},I3={adaptiveCardSchemaVersion:{majorVersion:1,minorVersion:5}};var dS={randomUUID:typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};let If;const D3=new Uint8Array(16);function R3(){if(!If&&(If=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!If))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return If(D3)}const Kn=[];for(let e=0;e<256;++e)Kn.push((e+256).toString(16).slice(1));function $3(e,t=0){return Kn[e[t+0]]+Kn[e[t+1]]+Kn[e[t+2]]+Kn[e[t+3]]+"-"+Kn[e[t+4]]+Kn[e[t+5]]+"-"+Kn[e[t+6]]+Kn[e[t+7]]+"-"+Kn[e[t+8]]+Kn[e[t+9]]+"-"+Kn[e[t+10]]+Kn[e[t+11]]+Kn[e[t+12]]+Kn[e[t+13]]+Kn[e[t+14]]+Kn[e[t+15]]}function M3(e,t,r){if(dS.randomUUID&&!e)return dS.randomUUID();const n=(e=e||{}).random||(e.rng||R3)();return n[6]=15&n[6]|64,n[8]=63&n[8]|128,$3(n)}var F3=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function L3(e){return typeof e=="string"&&F3.test(e)}function ZC(e,t){if(typeof e!="string"||typeof t!="string")return NaN;const r=e.split("."),n=t.split(".");function s(i){return/^\d+$/.test(i)}if(!r.every(s)||!n.every(s))return NaN;for(;r.length<n.length;)r.push("0");for(;n.length<r.length;)n.push("0");for(let i=0;i<r.length;++i)if(Number(r[i])!=Number(n[i]))return Number(r[i])>Number(n[i])?1:-1;return 0}function z3(){return M3()}function eE(e){return Object.keys(e).forEach((t=>{e[t]!==null&&e[t]!==void 0&&typeof e[t]=="object"&&eE(e[t])})),Object.freeze(e)}function U3(e,t,r){return new Promise(((n,s)=>{const i=setTimeout(s,t,r);e().then((l=>{clearTimeout(i),n(l)})).catch((l=>{clearTimeout(i),s(l)}))}))}function B3(e){return e.protocol==="https:"}function W3(){if(gm())throw new Error("window object undefined at SSR check");return window}function gm(){return typeof window>"u"}function V3(e){return new RegExp(`${/<script[^>]*>|&lt;script[^&]*&gt;|%3Cscript[^%]*%3E/gi.source}|${/<\/script[^>]*>|&lt;\/script[^&]*&gt;|%3C\/script[^%]*%3E/gi.source}`,"gi").test(e)}function q3(e){if(!e)throw new Error("id must not be empty");if(L3(e)===!1)throw new Error("id must be a valid UUID")}const H3=!!performance&&"now"in performance;function dx(){return H3?performance.now()+performance.timeOrigin:void 0}function fS(e){var t,r;if(!(!((r=(t=e.hostVersionsInfo)===null||t===void 0?void 0:t.appEligibilityInformation)===null||r===void 0)&&r.ageGroup))return e;const n=e.hostVersionsInfo.appEligibilityInformation.ageGroup;return(n==null?void 0:n.toLowerCase())!=="nonadult"?e:Object.assign(Object.assign({},e),{hostVersionsInfo:Object.assign(Object.assign({},e.hostVersionsInfo),{appEligibilityInformation:Object.assign(Object.assign({},e.hostVersionsInfo.appEligibilityInformation),{ageGroup:Kv.NotAdult})})})}let md=class{constructor(t=z3()){this.uuid=t,q3(t)}toString(){return this.uuid}serialize(){return this.toString()}};const tE=e=>{const{uuid:t}=e,r=ux(e,["uuid"]),n=t==null?void 0:t.toString();return Object.assign(Object.assign({},r),{uuidAsString:n})},K3=e=>{const{uuidAsString:t}=e,r=ux(e,["uuidAsString"]);return Object.assign(Object.assign({},r),{uuid:t?new md(t):void 0})};var Jv={exports:{}},hS,mS;function G3(){if(mS)return hS;mS=1;var e=1e3,t=60*e,r=60*t,n=24*r,s=7*n,i=365.25*n;function l(u,d,m,f){var p=d>=1.5*m;return Math.round(u/m)+" "+f+(p?"s":"")}return hS=function(u,d){d=d||{};var m=typeof u;if(m==="string"&&u.length>0)return(function(f){if(!((f=String(f)).length>100)){var p=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(f);if(p){var y=parseFloat(p[1]);switch((p[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return y*i;case"weeks":case"week":case"w":return y*s;case"days":case"day":case"d":return y*n;case"hours":case"hour":case"hrs":case"hr":case"h":return y*r;case"minutes":case"minute":case"mins":case"min":case"m":return y*t;case"seconds":case"second":case"secs":case"sec":case"s":return y*e;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return y;default:return}}}})(u);if(m==="number"&&isFinite(u))return d.long?(function(f){var p=Math.abs(f);return p>=n?l(f,p,n,"day"):p>=r?l(f,p,r,"hour"):p>=t?l(f,p,t,"minute"):p>=e?l(f,p,e,"second"):f+" ms"})(u):(function(f){var p=Math.abs(f);return p>=n?Math.round(f/n)+"d":p>=r?Math.round(f/r)+"h":p>=t?Math.round(f/t)+"m":p>=e?Math.round(f/e)+"s":f+"ms"})(u);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(u))}}var Y3=function(e){function t(s){let i,l,u,d=null;function m(...f){if(!m.enabled)return;const p=m,y=Number(new Date),x=y-(i||y);p.diff=x,p.prev=i,p.curr=y,i=y,f[0]=t.coerce(f[0]),typeof f[0]!="string"&&f.unshift("%O");let w=0;f[0]=f[0].replace(/%([a-zA-Z%])/g,((b,S)=>{if(b==="%%")return"%";w++;const _=t.formatters[S];if(typeof _=="function"){const E=f[w];b=_.call(p,E),f.splice(w,1),w--}return b})),t.formatArgs.call(p,f),(p.log||t.log).apply(p,f)}return m.namespace=s,m.useColors=t.useColors(),m.color=t.selectColor(s),m.extend=r,m.destroy=t.destroy,Object.defineProperty(m,"enabled",{enumerable:!0,configurable:!1,get:()=>d!==null?d:(l!==t.namespaces&&(l=t.namespaces,u=t.enabled(s)),u),set:f=>{d=f}}),typeof t.init=="function"&&t.init(m),m}function r(s,i){const l=t(this.namespace+(i===void 0?":":i)+s);return l.log=this.log,l}function n(s){return s.toString().substring(2,s.toString().length-2).replace(/\.\*\?$/,"*")}return t.debug=t,t.default=t,t.coerce=function(s){return s instanceof Error?s.stack||s.message:s},t.disable=function(){const s=[...t.names.map(n),...t.skips.map(n).map((i=>"-"+i))].join(",");return t.enable(""),s},t.enable=function(s){let i;t.save(s),t.namespaces=s,t.names=[],t.skips=[];const l=(typeof s=="string"?s:"").split(/[\s,]+/),u=l.length;for(i=0;i<u;i++)l[i]&&((s=l[i].replace(/\*/g,".*?"))[0]==="-"?t.skips.push(new RegExp("^"+s.slice(1)+"$")):t.names.push(new RegExp("^"+s+"$")))},t.enabled=function(s){if(s[s.length-1]==="*")return!0;let i,l;for(i=0,l=t.skips.length;i<l;i++)if(t.skips[i].test(s))return!1;for(i=0,l=t.names.length;i<l;i++)if(t.names[i].test(s))return!0;return!1},t.humanize=G3(),t.destroy=function(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")},Object.keys(e).forEach((s=>{t[s]=e[s]})),t.names=[],t.skips=[],t.formatters={},t.selectColor=function(s){let i=0;for(let l=0;l<s.length;l++)i=(i<<5)-i+s.charCodeAt(l),i|=0;return t.colors[Math.abs(i)%t.colors.length]},t.enable(t.load()),t},J3={};(function(e,t){t.formatArgs=function(n){if(n[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+n[0]+(this.useColors?"%c ":" ")+"+"+e.exports.humanize(this.diff),!this.useColors)return;const s="color: "+this.color;n.splice(1,0,s,"color: inherit");let i=0,l=0;n[0].replace(/%[a-zA-Z%]/g,(u=>{u!=="%%"&&(i++,u==="%c"&&(l=i))})),n.splice(l,0,s)},t.save=function(n){try{n?t.storage.setItem("debug",n):t.storage.removeItem("debug")}catch{}},t.load=function(){let n;try{n=t.storage.getItem("debug")}catch{}return!n&&typeof process<"u"&&"env"in process&&(n=J3.DEBUG),n},t.useColors=function(){return typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs)?!0:typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/)?!1:typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)},t.storage=(function(){try{return localStorage}catch{}})(),t.destroy=(()=>{let n=!1;return()=>{n||(n=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),t.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],t.log=console.debug||console.log||(()=>{}),e.exports=Y3(t);const{formatters:r}=e.exports;r.j=function(n){try{return JSON.stringify(n)}catch(s){return"[UnexpectedJSONParseError]: "+s.message}}})(Jv,Jv.exports);var fx=Jv.exports;const X3=new md,Q3=fx.debug.formatArgs;fx.debug.formatArgs=function(e){e[0]=`(${new Date().toISOString()}): ${e[0]} [${X3.toString()}]`,Q3.call(this,e)};const Z3=fx.debug("teamsJs");function oa(e){return Z3.extend(e)}function en(e,t){return`${e}_${t}`}function rE(e){return/^v\d+_[\w.]+$/.test(e)}function po(e){return e.uuidAsString!==void 0?`${e.uuidAsString} (legacy id: ${e.id})`:e.uuid!==void 0?`${e.uuid.toString()} (legacy id: ${e.id})`:`legacy id: ${e.id} (no uuid)`}const e6=oa("flushMessageQueue");function nE(e,t,r,n){if(e&&t&&r.length!==0)for(;r.length>0;){const s=r.shift();if(s){const i=tE(s);e6("Flushing message %s from %s message queue via postMessage.",po(i),n),e.postMessage(i,t)}}}var t6=["teams.microsoft.com","teams.microsoft.us","gov.teams.microsoft.us","dod.teams.microsoft.us","int.teams.microsoft.com","outlook.office.com","outlook-sdf.office.com","outlook.office365.com","outlook-sdf.office365.com","outlook.office365.us","outlook-dod.office365.us","webmail.apps.mil","outlook.live.com","outlook-sdf.live.com","teams.live.com","local.teams.live.com","local.teams.live.com:8080","local.teams.office.com","local.teams.office.com:8080","devspaces.skype.com","*.www.office.com","www.office.com","word.office.com","excel.office.com","powerpoint.office.com","www.officeppe.com","*.www.microsoft365.com","www.microsoft365.com","bing.com","edgeservices.bing.com","work.bing.com","www.bing.com","www.staging-bing-int.com","*.cloud.microsoft","*.m365.cloud.microsoft","*.outlook.cloud.microsoft","chatuxmanager.svc.cloud.microsoft","copilot.microsoft.com","windows.msn.com","fa000000125.resources.office.net","fa000000129.resources.office.net","fa000000124.resources.office.net","fa000000128.resources.office.net","fa000000136.resources.office.net","fa000000125.officeapps.live.com","fa000000129.officeapps.live.com","fa000000124.officeapps.live.com","fa000000128.officeapps.live.com"];const pS="2.0.1",eh=t6,gS=1500,r6=new URL("https://res.cdn.office.net/teams-js/validDomains/json/validDomains.json"),n6=/^https:\/\//,Ju="The library has not yet been initialized",s6="The runtime has not yet been initialized",i6="The runtime version is not supported";let Tt=class{};Tt.initializeCalled=!1,Tt.initializeCompleted=!1,Tt.additionalValidOrigins=[],Tt.initializePromise=void 0,Tt.isFramelessWindow=!1,Tt.frameContext=void 0,Tt.hostClientType=void 0,Tt.printCapabilityEnabled=!1,Tt.teamsJsInstanceId=new md().toString();const sE=oa("runtime"),ym=4;function iE(e){return e.apiVersion===ym}function a6(e){if(iE(e))return!0;throw e.apiVersion===-1?new Error(s6):new Error(i6)}let ea={apiVersion:-1,supports:{}};const o6={supports:{appInstallDialog:{},appEntity:{},call:{},chat:{},conversations:{},dialog:{card:{bot:{}},url:{bot:{},parentCommunication:{}},update:{}},interactive:{},logs:{},meetingRoom:{},menus:{},monetization:{},notifications:{},pages:{config:{},backStack:{},fullTrust:{}},remoteCamera:{},teams:{fullTrust:{}},teamsCore:{},video:{sharedFrame:{}}}},aE=[Xt.desktop,Xt.web,Xt.rigel,Xt.surfaceHub,Xt.teamsRoomsWindows,Xt.teamsRoomsAndroid,Xt.teamsPhones,Xt.teamsDisplays],l6=[Xt.android,Xt.ios,Xt.ipados,Xt.visionOS],yS=[...aE,...l6];function c6(e){let t=e;if(t.apiVersion<ym&&u6.forEach((r=>{t.apiVersion===r.versionToUpgradeFrom&&(t=r.upgradeToNextVersion(t))})),iE(t))return t;throw new Error("Received a runtime that could not be upgraded to the latest version")}const u6=[{versionToUpgradeFrom:1,upgradeToNextVersion:e=>{var t;return{apiVersion:2,hostVersionsInfo:void 0,isLegacyTeams:e.isLegacyTeams,supports:Object.assign(Object.assign({},e.supports),{dialog:e.supports.dialog?{card:void 0,url:e.supports.dialog,update:(t=e.supports.dialog)===null||t===void 0?void 0:t.update}:void 0})}}},{versionToUpgradeFrom:2,upgradeToNextVersion:e=>{const t=e.supports,r=ux(t,["appNotification"]);return Object.assign(Object.assign({},e),{apiVersion:3,supports:r})}},{versionToUpgradeFrom:3,upgradeToNextVersion:e=>{var t,r,n,s,i;return{apiVersion:4,hostVersionsInfo:e.hostVersionsInfo,isNAAChannelRecommended:e.isNAAChannelRecommended,isLegacyTeams:e.isLegacyTeams,supports:Object.assign(Object.assign({},e.supports),{dialog:e.supports.dialog?{card:(t=e.supports.dialog)===null||t===void 0?void 0:t.card,url:{bot:(n=(r=e.supports.dialog)===null||r===void 0?void 0:r.url)===null||n===void 0?void 0:n.bot,parentCommunication:!((s=e.supports.dialog)===null||s===void 0)&&s.url?{}:void 0},update:(i=e.supports.dialog)===null||i===void 0?void 0:i.update}:void 0})}}}],d6={"1.0.0":[{capability:{pages:{appButton:{},tabs:{}},stageView:{}},hostClientTypes:aE}],"1.9.0":[{capability:{location:{}},hostClientTypes:yS}],"2.0.0":[{capability:{people:{}},hostClientTypes:yS},{capability:{sharing:{}},hostClientTypes:[Xt.desktop,Xt.web]}],"2.0.1":[{capability:{teams:{fullTrust:{joinedTeams:{}}}},hostClientTypes:[Xt.android,Xt.desktop,Xt.ios,Xt.teamsRoomsAndroid,Xt.teamsPhones,Xt.teamsDisplays,Xt.web]},{capability:{webStorage:{}},hostClientTypes:[Xt.desktop]}],"2.0.5":[{capability:{webStorage:{}},hostClientTypes:[Xt.android,Xt.ios]}],"2.0.8":[{capability:{sharing:{}},hostClientTypes:[Xt.android,Xt.ios]}],"2.1.1":[{capability:{nestedAppAuth:{}},hostClientTypes:[Xt.android,Xt.ios,Xt.ipados,Xt.visionOS]}],"2.1.2":[]},Vg=sE.extend("generateBackCompatRuntimeConfig");function oE(e,t){const r=Object.assign({},e);for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&(typeof t[n]!="object"||Array.isArray(t[n])?n in e||(r[n]=t[n]):r[n]=oE(e[n]||{},t[n]));return r}function f6(e,t,r){Vg("generating back compat runtime config for %s",e);let n=Object.assign({},t.supports);Vg("Supported capabilities in config before updating based on highestSupportedVersion: %o",n),Object.keys(r).forEach((i=>{ZC(e,i)>=0&&r[i].forEach((l=>{Tt.hostClientType!==void 0&&l.hostClientTypes.includes(Tt.hostClientType)&&(n=oE(n,l.capability))}))}));const s={apiVersion:ym,hostVersionsInfo:I3,isLegacyTeams:!0,supports:n};return Vg("Runtime config after updating based on highestSupportedVersion: %o",s),s}const qg=sE.extend("applyRuntimeConfig");function Hg(e){typeof e.apiVersion=="string"&&(qg("Trying to apply runtime with string apiVersion, processing as v1: %o",e),e=Object.assign(Object.assign({},e),{apiVersion:1})),qg("Fast-forwarding runtime %o",e);const t=c6(e);qg("Applying runtime %o",t),ea=eE(t)}function h6(e){return e!=null&&e.serialize!==void 0&&typeof e.serialize=="function"}const yh="2.46.0";let vh=class cc{static storeCallbackInformation(t,r){cc.callbackInformation.set(t,r)}static clearMessages(){cc.callbackInformation.clear()}static deleteMessageInformation(t){cc.callbackInformation.delete(t)}static handleOneWayPerformanceMetrics(t,r,n){const s=t.monotonicTimestamp;s&&n?PS({actionName:t.func,messageDelay:n-s,requestStartedAt:s}):r("Unable to send performance metrics for event %s",t.func)}static handlePerformanceMetrics(t,r,n,s){const i=cc.callbackInformation.get(t);i&&r.monotonicTimestamp&&s?(PS({actionName:i.name,messageDelay:s-r.monotonicTimestamp,requestStartedAt:i.calledAt}),cc.deleteMessageInformation(t)):n("Unable to send performance metrics for callback %s with arguments %o",t.toString(),r.args)}};vh.callbackInformation=new Map;const lE=oa("nestedAppAuthUtils"),m6=lE.extend("tryPolyfillWithNestedAppAuthBridge"),p6="v2";function g6(e,t,r){var n;const s=m6;if(Tt.isFramelessWindow)return void s("Cannot polyfill nestedAppAuthBridge as current window is frameless");if(!t)return void s("Cannot polyfill nestedAppAuthBridge as current window does not exist");if(t.parent!==t.top)return void s("Default NAA bridge injection not supported in nested iframe. Use standalone NAA bridge instead.");const i=(()=>{try{return JSON.parse(e)}catch{return null}})();if(!i||!(!((n=i.supports)===null||n===void 0)&&n.nestedAppAuth))return void s("Cannot polyfill nestedAppAuthBridge as current hub does not support nested app auth");const l=t;if(l.nestedAppAuthBridge)return void s("nestedAppAuthBridge already exists on current window, skipping polyfill");const u=(function(d,m){const f=y6;if(!d)return f("nestedAppAuthBridge cannot be created as current window does not exist"),null;const{onMessage:p,sendPostMessage:y}=m,x=w=>b=>p(b,w);return{addEventListener:(w,b)=>{w==="message"?d.addEventListener(w,x(b)):f(`Event ${w} is not supported by nestedAppAuthBridge`)},postMessage:w=>{const b=(()=>{try{return JSON.parse(w)}catch{return null}})();if(!b||typeof b!="object"||b.messageType!=="NestedAppAuthRequest")return void f("Unrecognized data format received by app, message being ignored. Message: %o",w);const S=en(p6,"nestedAppAuth.execute");y(w,S)},removeEventListener:(w,b)=>{d.removeEventListener(w,x(b))}}})(l,r);u&&(l.nestedAppAuthBridge=u)}const y6=lE.extend("createNestedAppAuthBridge");let lo=[];const ho=oa("validateOrigin");let Ru;function v6(){return bo(this,void 0,void 0,(function*(){Ru||(yield uE())}))}function cE(){return lo.length===0}function uE(e=!1){return bo(this,void 0,void 0,(function*(){if(!cE()&&!e)return lo;if(Ru)return Ru;if(gm())return lo=eh,eh;{ho("Initiating fetch call to acquire valid origins list from CDN");const t=new AbortController,r=setTimeout((()=>t.abort()),gS);return Ru=fetch(r6,{signal:t.signal}).then((n=>{if(clearTimeout(r),!n.ok)throw new Error("Invalid Response from Fetch Call");return ho("Fetch call completed and retrieved valid origins list from CDN"),n.json().then((s=>{if((function(i){let l=JSON.parse(i);try{l=JSON.parse(i)}catch{return!1}if(!l.validOrigins)return!1;for(const u of l.validOrigins)try{new URL("https://"+u)}catch{return ho("isValidOriginsFromCDN call failed to validate origin: %s",u),!1}return!0})(JSON.stringify(s)))return lo=s.validOrigins,lo;throw new Error("Valid origins list retrieved from CDN is invalid")}))})).catch((n=>(n.name==="AbortError"?ho(`validOrigins fetch call to CDN failed due to Timeout of ${gS} ms. Defaulting to fallback list`):ho("validOrigins fetch call to CDN failed with error: %s. Defaulting to fallback list",n),lo=eh,lo))),Ru}}))}function vS(e,t){if(e.substring(0,2)==="*."){const r=e.substring(1);if(t.length>r.length&&t.split(".").length===r.split(".").length&&t.substring(t.length-r.length)===r)return!0}else if(e===t)return!0;return!1}function x6(e,t){const r=cE()?eh:lo;return xS(e,r)?Promise.resolve(!0):(ho("Origin %s is not in the local valid origins list, fetching from CDN",e),uE(t).then((n=>xS(e,n))))}function xS(e,t){if(!B3(e))return ho("Origin %s is invalid because it is not using https protocol. Protocol being used: %s",e,e.protocol),!1;const r=e.host;if(t.some((n=>vS(n,r))))return!0;for(const n of Tt.additionalValidOrigins)if(vS(n.substring(0,8)==="https://"?n.substring(8):n,r))return!0;return ho(`Origin %s is invalid because it is not an origin approved by this library or included in the call to app.initialize.
Origins approved by this library: %o
Origins included in app.initialize: %o`,e,t,Tt.additionalValidOrigins),!1}v6();const gl=oa("communication");let lt=class{},rr=class{};function w6(e,t){if(rr.messageListener=r=>(function(n){return bo(this,void 0,void 0,(function*(){if(!n||!n.data||typeof n.data!="object")return void wS("Unrecognized message format received by app, message being ignored. Message: %o",n);const s=n.source||n.originalEvent&&n.originalEvent.source,i=n.origin||n.originalEvent&&n.originalEvent.origin;return hE(s,i).then((l=>{l?((function(u,d){Tt.isFramelessWindow||lt.parentWindow&&!lt.parentWindow.closed&&u!==lt.parentWindow||(lt.parentWindow=u,lt.parentOrigin=d),lt.parentWindow&&lt.parentWindow.closed&&(lt.parentWindow=null,lt.parentOrigin=null),nE(lt.parentWindow,lt.parentOrigin,rr.parentMessageQueue,"parent")})(s,i),s!==lt.parentWindow?SM():jS(n)):wS("Message being ignored by app because it is either coming from the current window or a different window with an invalid origin, message: %o, source: %o, origin: %o",n,s,i)}))}))})(r),lt.currentWindow=lt.currentWindow||W3(),lt.parentWindow=lt.currentWindow.parent!==lt.currentWindow.self?lt.currentWindow.parent:lt.currentWindow.opener,lt.topWindow=lt.currentWindow.top,(lt.parentWindow||e)&&lt.currentWindow.addEventListener("message",rr.messageListener,!1),!lt.parentWindow){const r=lt.currentWindow;if(!r.nativeInterface)return Promise.reject(new Error("Initialization Failed. No Parent window found."));Tt.isFramelessWindow=!0,r.onNativeMessage=jS}try{return lt.parentOrigin="*",vm(t,"initialize",[yh,ym,e]).then((([r,n,s,i])=>(g6(i,lt.currentWindow,{onMessage:P6,sendPostMessage:N6}),{context:r,clientType:n,runtimeConfig:s,clientSupportedSDKVersion:i})))}finally{lt.parentOrigin=null}}function b6(e,t,...r){return vm(e,t,r).then((([n])=>n))}function j6(e,t,r,...n){return vm(e,t,n).then((([s,i])=>{if(!s)throw new Error(i||r)}))}function vm(e,t,r=void 0){if(!rE(e))throw Error(`apiVersionTag: ${e} passed in doesn't follow the pattern starting with 'v' followed by digits, then underscore with words, please check.`);return new Promise((n=>{const s=fE(e,t,r);var i;n((i=s.uuid,new Promise((l=>{rr.promiseCallbacks.set(i,l)}))))}))}function S6(e){return e.map((t=>h6(t)?t.serialize():t))}function k6(e,t,r,n,s){var i;return bo(this,void 0,void 0,(function*(){const l=S6(t),[u]=yield vm(n,e,l);if(O3(u))throw new Error(`${u.errorCode}, message: ${(i=u.message)!==null&&i!==void 0?i:"None"}`);if(r.validate(u))return r.deserialize(u);throw new Error(`${gh.INTERNAL_ERROR}, message: Invalid response from host - ${JSON.stringify(u)}`)}))}function Fi(e,t,r,n){let s;if(r instanceof Function?n=r:r instanceof Array&&(s=r),!rE(e))throw Error(`apiVersionTag: ${e} passed in doesn't follow the pattern starting with 'v' followed by digits, then underscore with words, please check.`);const i=fE(e,t,s);n&&rr.callbacks.set(i.uuid,n)}rr.parentMessageQueue=[],rr.topMessageQueue=[],rr.nextMessageId=0,rr.callbacks=new Map,rr.promiseCallbacks=new Map,rr.portCallbacks=new Map,rr.legacyMessageIdsToUuidMap={};const _6=gl.extend("sendNestedAuthRequestToTopWindow");function N6(e,t){const r=_6,n=lt.topWindow,s=(function(i,l){const u=rr.nextMessageId++,d=new md;return rr.legacyMessageIdsToUuidMap[u]=d,{id:u,uuid:d,func:"nestedAppAuth.execute",timestamp:Date.now(),monotonicTimestamp:dx(),apiVersionTag:l,args:[],data:i}})(e,t);return r("Message %s information: %o",po(s),{actionName:s.func}),dE(n,s)}const C6=gl.extend("sendRequestToTargetWindowHelper");function dE(e,t){const r=C6,n=(function(i){return i===lt.topWindow&&Xv()?"top":i===lt.parentWindow?"parent":null})(e),s=tE(t);if(Tt.isFramelessWindow)lt.currentWindow&&lt.currentWindow.nativeInterface&&(r("Sending message %s to %s via framelessPostMessage interface",po(s),n),lt.currentWindow.nativeInterface.framelessPostMessage(JSON.stringify(s)));else{const i=(function(l){return l===lt.topWindow&&Xv()?lt.topOrigin:l===lt.parentWindow?lt.parentOrigin:null})(e);e&&i?(r("Sending message %s to %s via postMessage",po(s),n),e.postMessage(s,i)):(r("Adding message %s to %s message queue",po(s),n),O6(e).push(t))}return t}const E6=gl.extend("sendMessageToParentHelper");function fE(e,t,r,n,s){const i=E6,l=lt.parentWindow,u=(function(d,m,f,p,y){const x=rr.nextMessageId++,w=new md;rr.legacyMessageIdsToUuidMap[x]=w;const b=Tt.teamsJsInstanceId;return{id:x,uuid:w,func:m,timestamp:Date.now(),monotonicTimestamp:dx(),args:f||[],apiVersionTag:d,isProxiedFromChild:p!=null,teamsJsInstanceId:b}})(e,t,r,n);return vh.storeCallbackInformation(u.uuid,{name:t,calledAt:u.timestamp}),i("Message %s information: %o",po(u),{actionName:t,args:r}),dE(l,u)}const wS=gl.extend("processIncomingMessage"),A6=gl.extend("processAuthBridgeMessage");function P6(e,t){var r,n;const s=A6;if(!e||!e.data||typeof e.data!="object")return void s("Unrecognized message format received by app, message being ignored. Message: %o",e);const{args:i}=e.data,[,l]=i??[],u=(()=>{try{return JSON.parse(l)}catch{return null}})();if(!u||typeof u!="object"||u.messageType!=="NestedAppAuthResponse")return void s("Unrecognized data format received by app, message being ignored. Message: %o",e);const d=e.source||((r=e==null?void 0:e.originalEvent)===null||r===void 0?void 0:r.source),m=e.origin||((n=e==null?void 0:e.originalEvent)===null||n===void 0?void 0:n.origin);d?hE(d,m)?(lt.topWindow&&!lt.topWindow.closed&&d!==lt.topWindow||(lt.topWindow=d,lt.topOrigin=m),lt.topWindow&&lt.topWindow.closed&&(lt.topWindow=null,lt.topOrigin=null),nE(lt.topWindow,lt.topOrigin,rr.topMessageQueue,"top"),t(l)):s("Message being ignored by app because it is either coming from the current window or a different window with an invalid origin"):s("Message being ignored by app because it is coming for a target that is null")}const Kg=gl.extend("shouldProcessIncomingMessage");function hE(e,t){return bo(this,void 0,void 0,(function*(){if(lt.currentWindow&&e===lt.currentWindow)return Kg("Should not process message because it is coming from the current window"),!1;if(lt.currentWindow&&lt.currentWindow.location&&t&&t===lt.currentWindow.location.origin)return!0;{let r;try{r=new URL(t)}catch{return Kg("Message has an invalid origin of %s",t),!1}const n=yield x6(r);return n||Kg("Message has an invalid origin of %s",t),n}}))}const bS=gl.extend("handleIncomingMessageFromParent");function th(e,t){if(t){const r=[...e].find((([n,s])=>n.toString()===t.toString()));if(r)return r[0]}}function Gg(e,t){const r=th(t,e.uuid);r&&t.delete(r),e.uuid?rr.legacyMessageIdsToUuidMap={}:delete rr.legacyMessageIdsToUuidMap[e.id]}function jS(e){const t=bS,r=dx();if("id"in e.data&&typeof e.data.id=="number"){const n=e.data,s=K3(n),i=(function(l){const u=bS;if(!l.uuid)return rr.legacyMessageIdsToUuidMap[l.id];{const d=l.uuid,m=th(rr.callbacks,d);if(m)return m;const f=th(rr.promiseCallbacks,d);if(f)return f;const p=th(rr.portCallbacks,d);if(p)return p}u("Received message %s that failed to produce a callbackId",po(l))})(s);if(i){const l=rr.callbacks.get(i);t("Received a response from parent for message %s",i.toString()),vh.handlePerformanceMetrics(i,s,t,r),l&&(t("Invoking the registered callback for message %s with arguments %o",i.toString(),s.args),l.apply(null,[...s.args,s.isPartialResponse]),(function(m){return m.data.isPartialResponse===!0})(e)||(t("Removing registered callback for message %s",i.toString()),Gg(s,rr.callbacks)));const u=rr.promiseCallbacks.get(i);u&&(t("Invoking the registered promise callback for message %s with arguments %o",i.toString(),s.args),u(s.args),t("Removing registered promise callback for message %s",i.toString()),Gg(s,rr.promiseCallbacks));const d=rr.portCallbacks.get(i);if(d){let m;t("Invoking the registered port callback for message %s with arguments %o",i.toString(),s.args),e.ports&&e.ports[0]instanceof MessagePort&&(m=e.ports[0]),d(m,s.args),t("Removing registered port callback for message %s",i.toString()),Gg(s,rr.portCallbacks)}s.uuid&&(rr.legacyMessageIdsToUuidMap={})}}else if("func"in e.data&&typeof e.data.func=="string"){const n=e.data;vh.handleOneWayPerformanceMetrics(n,t,r),t('Received a message from parent %s, action: "%s"',po(n),n.func),gM(n.func,n.args)}else t("Received an unknown message: %O",e)}function Xv(){return lt.topWindow!==lt.parentWindow}function O6(e){return e===lt.topWindow&&Xv()?rr.topMessageQueue:e===lt.parentWindow?rr.parentMessageQueue:[]}const mE=oa("internal"),T6=mE.extend("ensureInitializeCalled"),I6=mE.extend("ensureInitialized");function pE(){if(!Tt.initializeCalled)throw T6(Ju),new Error(Ju)}function $c(e,...t){if(!Tt.initializeCompleted)throw I6("%s. initializeCalled: %s",Ju,Tt.initializeCalled.toString()),new Error(Ju);if(t&&t.length>0){let r=!1;for(let n=0;n<t.length;n++)if(t[n]===Tt.frameContext){r=!0;break}if(!r)throw new Error(`This call is only allowed in following contexts: ${JSON.stringify(t)}. Current context: "${Tt.frameContext}".`)}return a6(e)}function D6(e){let t=Tt.additionalValidOrigins.concat(e.filter((n=>typeof n=="string"&&n6.test(n))));const r={};t=t.filter((n=>!r[n]&&(r[n]=!0,!0))),Tt.additionalValidOrigins=t}function R6(e){if(!M6(e))throw new Error(`Potential app id (${e}) is invalid; its length ${e.length} is not within the length limits (${gE}-${yE}).`)}function $6(e){if(V3(e))throw new Error(`Potential app id (${e}) is invalid; it contains script tags.`);if(F6(e))throw new Error(`Potential app id (${e}) is invalid; it contains non-printable characters.`)}const gE=4,yE=256;function M6(e){return e.length<yE&&e.length>gE}function F6(e){return[...e].some((t=>{const r=t.charCodeAt(0);return r<32||r>126}))}let L6=class{constructor(t){this.idAsString=t,$6(t)}serialize(){return this.toString()}toString(){return this.idAsString}},z6=class extends L6{constructor(t){super(t),R6(t)}toJSON(){return{appIdAsString:this.toString()}}};function vE(e){return e==null}const xm="v2",Yg=oa("app"),SS={Success:"appInitialization.success"};var kS,_S;function U6(e){return aM(en(xm,"app.initialize"),e)}function B6(){return new Promise((e=>{pE(),e(b6(en(xm,"app.getContext"),"getContext"))})).then((e=>(function(t){var r;return{actionInfo:t.actionInfo,app:{locale:t.locale,sessionId:t.appSessionId?t.appSessionId:"",theme:t.theme?t.theme:"default",iconPositionVertical:t.appIconPosition,osLocaleInfo:t.osLocaleInfo,messageId:t.messageId,parentMessageId:t.parentMessageId,userClickTime:t.userClickTime,userClickTimeV2:t.userClickTimeV2,userFileOpenPreference:t.userFileOpenPreference,host:{name:t.hostName?t.hostName:Gv.teams,clientType:t.hostClientType?t.hostClientType:Xt.web,sessionId:t.sessionId?t.sessionId:"",ringId:t.ringId},appLaunchId:t.appLaunchId,appId:t.appId?new z6(t.appId):void 0,manifestVersion:t.manifestVersion},page:{id:t.entityId,frameContext:t.frameContext?t.frameContext:Tt.frameContext,renderingSurface:t.renderingSurface?t.renderingSurface:void 0,subPageId:t.subEntityId,isFullScreen:t.isFullScreen,isMultiWindow:t.isMultiWindow,isBackgroundLoad:t.isBackgroundLoad,sourceOrigin:t.sourceOrigin},user:{id:(r=t.userObjectId)!==null&&r!==void 0?r:"",displayName:t.userDisplayName,isCallingAllowed:t.isCallingAllowed,isPSTNCallingAllowed:t.isPSTNCallingAllowed,licenseType:t.userLicenseType,loginHint:t.loginHint,userPrincipalName:t.userPrincipalName,tenant:t.tid?{id:t.tid,teamsSku:t.tenantSKU}:void 0},channel:t.channelId?{id:t.channelId,displayName:t.channelName,relativeUrl:t.channelRelativeUrl,membershipType:t.channelType,defaultOneNoteSectionId:t.defaultOneNoteSectionId,ownerGroupId:t.hostTeamGroupId,ownerTenantId:t.hostTeamTenantId}:void 0,chat:t.chatId?{id:t.chatId}:void 0,meeting:t.meetingId?{id:t.meetingId}:void 0,sharepoint:t.sharepoint,team:t.teamId?{internalId:t.teamId,displayName:t.teamName,type:t.teamType,groupId:t.groupId,templateId:t.teamTemplateId,isArchived:t.isTeamArchived,userRole:t.userTeamRole}:void 0,sharePointSite:t.teamSiteUrl||t.teamSiteDomain||t.teamSitePath||t.mySitePath||t.mySiteDomain?{teamSiteUrl:t.teamSiteUrl,teamSiteDomain:t.teamSiteDomain,teamSitePath:t.teamSitePath,teamSiteId:t.teamSiteId,mySitePath:t.mySitePath,mySiteDomain:t.mySiteDomain}:void 0,dialogParameters:t.dialogParameters||{}}})(e)))}function W6(){return oM(en(xm,"app.notifySuccess"))}function V6(e){lM(en(xm,"app.registerOnThemeChangeHandler"),e)}(function(e){e.AuthFailed="AuthFailed",e.Timeout="Timeout",e.Other="Other"})(kS||(kS={})),(function(e){e.PermissionError="PermissionError",e.NotFound="NotFound",e.Throttling="Throttling",e.Offline="Offline",e.Other="Other"})(_S||(_S={})),Yg("teamsjs instance is version %s, starting at %s UTC (%s local)",yh,new Date().toISOString(),new Date().toLocaleString()),(function(){if(gm())return;const e=document.getElementsByTagName("script"),t=e&&e[e.length-1]&&e[e.length-1].src,r="Today, teamsjs can only be used from a single script or you may see undefined behavior. This log line is used to help detect cases where teamsjs is loaded multiple times -- it is always written. The presence of the log itself does not indicate a multi-load situation, but multiples of these log lines will. If you would like to use teamjs from more than one script at the same time, please open an issue at https://github.com/OfficeDev/microsoft-teams-library-js/issues";t&&t.length!==0?Yg("teamsjs is being used from %s. %s",t,r):Yg("teamsjs is being used from a script tag embedded directly in your html. %s",r)})();const q6="v2",H6=[];function K6(e){Tt.frameContext&&(Tt.frameContext===Yv.task?H6.push(e):yM("messageForChild"))}function G6(){el(en(q6,"dialog.registerMessageForChildHandler"),"messageForChild",K6,!1)}const gc="v2";var NS,CS;(function(e){e[e.ifRoom=0]="ifRoom",e[e.overflowOnly=1]="overflowOnly"})(NS||(NS={}));function Y6(){el(en(gc,"menus.registerNavBarMenuItemPressHandler"),"navBarMenuItemPress",X6,!1),el(en(gc,"menus.registerActionMenuItemPressHandler"),"actionMenuItemPress",Q6,!1),el(en(gc,"menus.registerSetModuleViewHandler"),"setModuleView",J6,!1)}function J6(e){$c(ea),Fi(en(gc,"menus.handleViewConfigItemPress"),"viewConfigItemPress",[e])}function X6(e){$c(ea),Fi(en(gc,"menus.handleNavBarMenuItemPress"),"handleNavBarMenuItemPress",[e])}function Q6(e){$c(ea),Fi(en(gc,"menus.handleActionMenuItemPress"),"handleActionMenuItemPress",[e])}(function(e){e.dropDown="dropDown",e.popOver="popOver"})(CS||(CS={}));class Z6{}let eM=class extends Z6{validate(t){return!0}deserialize(t){return t}};function tM(){el(en(ol,"pages.config.registerSettingsSaveHandler"),"settings.save",rM,!1),el(en(ol,"pages.config.registerSettingsRemoveHandler"),"settings.remove",sM,!1)}function rM(e){new nM(e).notifySuccess()}let nM=class{constructor(t){this.notified=!1,this.result=t||{}}notifySuccess(){this.ensureNotNotified(),Fi(en(ol,"pages.saveEvent.notifySuccess"),"settings.save.success"),this.notified=!0}notifyFailure(t){this.ensureNotNotified(),Fi(en(ol,"pages.saveEvent.notifyFailure"),"settings.save.failure",[t]),this.notified=!0}ensureNotNotified(){if(this.notified)throw new Error("The SaveEvent may only notify success or failure once.")}};function sM(){new iM().notifySuccess()}let iM=class{constructor(){this.notified=!1}notifySuccess(){this.ensureNotNotified(),Fi(en(ol,"pages.removeEvent.notifySuccess"),"settings.remove.success"),this.notified=!0}notifyFailure(t){this.ensureNotNotified(),Fi(en(ol,"pages.removeEvent.notifyFailure"),"settings.remove.failure",[t]),this.notified=!0}ensureNotNotified(){if(this.notified)throw new Error("The removeEventType may only notify success or failure once.")}};const xE=oa("app");function aM(e,t){return gm()?(xE.extend("initialize")("window object undefined at initialization"),Promise.resolve()):U3((()=>(function(r,n){return new Promise((s=>{Tt.initializeCalled||(Tt.initializeCalled=!0,pM(),Tt.initializePromise=w6(n,r).then((({context:i,clientType:l,runtimeConfig:u,clientSupportedSDKVersion:d=pS})=>{Tt.frameContext=i,Tt.hostClientType=l,Tt.clientSupportedSDKVersion=d;try{ju("Parsing %s",u);let m=JSON.parse(u);if(ju("Checking if %o is a valid runtime object",m??"null"),!m||!m.apiVersion)throw new Error("Received runtime config is invalid");m=fS(m),u&&Hg(m)}catch(m){if(!(m instanceof SyntaxError))throw m;try{ju("Attempting to parse %s as an SDK version",u),isNaN(ZC(u,pS))||(Tt.clientSupportedSDKVersion=u);let f=JSON.parse(d);if(ju("givenRuntimeConfig parsed to %o",f??"null"),!f)throw new Error("givenRuntimeConfig string was successfully parsed. However, it parsed to value of null");f=fS(f),Hg(f)}catch(f){if(!(f instanceof SyntaxError))throw f;Hg(f6(Tt.clientSupportedSDKVersion,o6,d6))}}Tt.initializeCompleted=!0})),Y6(),tM(),G6()),Array.isArray(n)&&D6(n),Tt.initializePromise!==void 0?s(Tt.initializePromise):ju("GlobalVars.initializePromise is unexpectedly undefined")}))})(e,t)),6e4,new Error("SDK initialization timed out."))}function oM(e){return bo(this,void 0,void 0,(function*(){if(Tt.initializeCompleted)return ES(e);if(!Tt.initializePromise)throw new Error(Ju);return Tt.initializePromise.then((()=>ES(e)))}))}function ES(e){return bo(this,void 0,void 0,(function*(){return $c(ea)&&(!((t=ea.supports.app)===null||t===void 0)&&t.notifySuccessResponse)?k6(SS.Success,[yh],new eM,e).then((()=>({hasFinishedSuccessfully:!0}))):(Fi(e,SS.Success,[yh]),{hasFinishedSuccessfully:"unknown"});var t}))}const ju=xE.extend("initializeHelper");function lM(e,t){!vE(t)&&pE(),vM(e,t)}function cM(){return dM(en(ol,"pages.backStack.navigateBack"))}function uM(){return!(!$c(ea)||!ea.supports.pages)&&!!ea.supports.pages.backStack}const ol="v2";function dM(e){return new Promise((t=>{if($c(ea),!uM())throw T3;t(j6(e,"navigateBack","Back navigation is not supported in the current client or context."))}))}function fM(){el(en("v2","pages.backStack.registerBackButtonPressHandler"),"backButtonPress",hM,!1)}function hM(){cM()}const mM=oa("handlers");let Or=class Ji{static initializeHandlers(){Ji.handlers.themeChange=xM,Ji.handlers.load=wM,Ji.handlers.beforeUnload=bM,fM()}static uninitializeHandlers(){Ji.handlers={},Ji.themeChangeHandler=null,Ji.loadHandler=null,Ji.beforeUnloadHandler=null,Ji.beforeSuspendOrTerminateHandler=null,Ji.resumeHandler=null}};function pM(){Or.initializeHandlers()}Or.handlers={},Or.themeChangeHandler=null,Or.loadHandler=null,Or.beforeUnloadHandler=null,Or.beforeSuspendOrTerminateHandler=null,Or.resumeHandler=null,Or.hostToAppPerformanceMetricsHandler=null;const AS=mM.extend("callHandler");function gM(e,t){const r=Or.handlers[e];return r?(AS("Invoking the registered handler for message %s with arguments %o",e,t),[!0,r.apply(this,t)]):(AS("Handler for action message %s not found.",e),[!1,void 0])}function el(e,t,r,n=!0,s=[]){r?(Or.handlers[t]=r,n&&Fi(e,"registerHandler",[t,...s])):delete Or.handlers[t]}function yM(e){delete Or.handlers[e]}function vM(e,t){Or.themeChangeHandler=t,!vE(t)&&Fi(e,"registerHandler",["themeChange"])}function xM(e){Or.themeChangeHandler&&Or.themeChangeHandler(e)}function PS(e){Or.hostToAppPerformanceMetricsHandler&&Or.hostToAppPerformanceMetricsHandler(e)}function wM(e){const t={entityId:(r=e).entityId,contentUrl:new URL(r.contentUrl)};var r;Or.resumeHandler?(Or.resumeHandler(t),OS()):Or.loadHandler&&(Or.loadHandler(e),OS())}function bM(){return bo(this,void 0,void 0,(function*(){const e=()=>{Fi(en("v2","handleBeforeUnload"),"readyToUnload",[])};Or.beforeSuspendOrTerminateHandler?(yield Or.beforeSuspendOrTerminateHandler(),e()):Or.beforeUnloadHandler&&Or.beforeUnloadHandler(e)||e()}))}const jM=oa("childProxyingCommunication");function OS(){return!1}function SM(e,t){return!1}jM.extend("handleIncomingMessageFromChild");const kM=v.createContext({inTeams:!1,teamsContext:null,isInitialized:!1,teamsTheme:null}),_M=({children:e})=>{const[t,r]=v.useState(!1),[n,s]=v.useState(null),[i,l]=v.useState(!1),[u,d]=v.useState(null);return v.useEffect(()=>{(async()=>{try{if(new URLSearchParams(window.location.search).get("inTeams")==="true"||window.parent!==window){console.log(" Initializing Teams SDK..."),await U6();const y=await B6();console.log(" Teams context:",y),r(!0),s(y),d(y.app.theme),V6(x=>{d(x)}),W6()}}catch(f){console.error(" Teams initialization error:",f),r(!1)}finally{l(!0)}})()},[]),a.jsx(kM.Provider,{value:{inTeams:t,teamsContext:n,isInitialized:i,teamsTheme:u},children:e})};/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NM=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),CM=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(t,r,n)=>n?n.toUpperCase():r.toLowerCase()),TS=e=>{const t=CM(e);return t.charAt(0).toUpperCase()+t.slice(1)},wE=(...e)=>e.filter((t,r,n)=>!!t&&t.trim()!==""&&n.indexOf(t)===r).join(" ").trim(),EM=e=>{for(const t in e)if(t.startsWith("aria-")||t==="role"||t==="title")return!0};/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var AM={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PM=v.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:r=2,absoluteStrokeWidth:n,className:s="",children:i,iconNode:l,...u},d)=>v.createElement("svg",{ref:d,...AM,width:t,height:t,stroke:e,strokeWidth:n?Number(r)*24/Number(t):r,className:wE("lucide",s),...!i&&!EM(u)&&{"aria-hidden":"true"},...u},[...l.map(([m,f])=>v.createElement(m,f)),...Array.isArray(i)?i:[i]]));/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ct=(e,t)=>{const r=v.forwardRef(({className:n,...s},i)=>v.createElement(PM,{ref:i,iconNode:t,className:wE(`lucide-${NM(TS(e))}`,`lucide-${e}`,n),...s}));return r.displayName=TS(e),r};/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OM=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],IS=Ct("arrow-left",OM);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TM=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],IM=Ct("arrow-right",TM);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DM=[["path",{d:"M3.85 8.62a4 4 0 0 1 4.78-4.77 4 4 0 0 1 6.74 0 4 4 0 0 1 4.78 4.78 4 4 0 0 1 0 6.74 4 4 0 0 1-4.77 4.78 4 4 0 0 1-6.75 0 4 4 0 0 1-4.78-4.77 4 4 0 0 1 0-6.76Z",key:"3c2336"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],Qv=Ct("badge-check",DM);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RM=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],Zr=Ct("calendar",RM);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $M=[["path",{d:"M5 21v-6",key:"1hz6c0"}],["path",{d:"M12 21V3",key:"1lcnhd"}],["path",{d:"M19 21V9",key:"unv183"}]],rh=Ct("chart-no-axes-column",$M);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MM=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],ls=Ct("chevron-down",MM);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FM=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],Mc=Ct("chevron-left",FM);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LM=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],zM=Ct("chevron-up",LM);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UM=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],nr=Ct("circle-alert",UM);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BM=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],Yr=Ct("circle-check-big",BM);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WM=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],wm=Ct("clock",WM);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VM=[["path",{d:"M11.562 3.266a.5.5 0 0 1 .876 0L15.39 8.87a1 1 0 0 0 1.516.294L21.183 5.5a.5.5 0 0 1 .798.519l-2.834 10.246a1 1 0 0 1-.956.734H5.81a1 1 0 0 1-.957-.734L2.02 6.02a.5.5 0 0 1 .798-.519l4.276 3.664a1 1 0 0 0 1.516-.294z",key:"1vdc57"}],["path",{d:"M5 21h14",key:"11awu3"}]],As=Ct("crown",VM);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qM=[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]],HM=Ct("database",qM);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KM=[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]],DS=Ct("ellipsis-vertical",KM);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GM=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]],YM=Ct("funnel",GM);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JM=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],$u=Ct("info",JM);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XM=[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]],hx=Ct("lightbulb",XM);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QM=[["path",{d:"M3 5h.01",key:"18ugdj"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 19h.01",key:"noohij"}],["path",{d:"M8 5h13",key:"1pao27"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 19h13",key:"m83p4d"}]],Ys=Ct("list",QM);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZM=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],eF=Ct("lock",ZM);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tF=[["path",{d:"m10 17 5-5-5-5",key:"1bsop3"}],["path",{d:"M15 12H3",key:"6jk70r"}],["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}]],rF=Ct("log-in",tF);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nF=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],zn=Ct("log-out",nF);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sF=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],pd=Ct("mail",sF);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iF=[["path",{d:"M5 12h14",key:"1ays0h"}]],Mu=Ct("minus",iF);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aF=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]],bE=Ct("pencil",aF);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oF=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],Mn=Ct("plus",oF);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lF=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],tl=Ct("refresh-cw",lF);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cF=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],RS=Ct("search",cF);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uF=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],_n=Ct("settings",uF);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dF=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],$S=Ct("shield-check",dF);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fF=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],Fn=Ct("shield",fF);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hF=[["path",{d:"m18 14 4 4-4 4",key:"10pe0f"}],["path",{d:"m18 2 4 4-4 4",key:"pucp1d"}],["path",{d:"M2 18h1.973a4 4 0 0 0 3.3-1.7l5.454-8.6a4 4 0 0 1 3.3-1.7H22",key:"1ailkh"}],["path",{d:"M2 6h1.972a4 4 0 0 1 3.6 2.2",key:"km57vx"}],["path",{d:"M22 18h-6.041a4 4 0 0 1-3.3-1.8l-.359-.45",key:"os18l9"}]],mF=Ct("shuffle",hF);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pF=[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]],tc=Ct("sparkles",pF);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gF=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],Wu=Ct("square-pen",gF);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yF=[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]],rc=Ct("star",yF);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vF=[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]],xF=Ct("tag",vF);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wF=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],Li=Ct("trash-2",wF);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bF=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],jE=Ct("triangle-alert",bF);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jF=[["path",{d:"M10 14.66v1.626a2 2 0 0 1-.976 1.696A5 5 0 0 0 7 21.978",key:"1n3hpd"}],["path",{d:"M14 14.66v1.626a2 2 0 0 0 .976 1.696A5 5 0 0 1 17 21.978",key:"rfe1zi"}],["path",{d:"M18 9h1.5a1 1 0 0 0 0-5H18",key:"7xy6bh"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M6 9a6 6 0 0 0 12 0V3a1 1 0 0 0-1-1H7a1 1 0 0 0-1 1z",key:"1mhfuq"}],["path",{d:"M6 9H4.5a1 1 0 0 1 0-5H6",key:"tex48p"}]],SF=Ct("trophy",jF);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kF=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]],rl=Ct("user-plus",kF);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _F=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"17",x2:"22",y1:"8",y2:"13",key:"3nzzx3"}],["line",{x1:"22",x2:"17",y1:"8",y2:"13",key:"1swrse"}]],Su=Ct("user-x",_F);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NF=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],ms=Ct("user",NF);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CF=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],Xn=Ct("users",CF);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EF=[["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}],["path",{d:"M5 7c0-1.1.9-2 2-2h10a2 2 0 0 1 2 2v12H5V7Z",key:"1ezoue"}],["path",{d:"M22 19H2",key:"nuriw5"}]],Gn=Ct("vote",EF);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AF=[["rect",{width:"8",height:"8",x:"3",y:"3",rx:"2",key:"by2w9f"}],["path",{d:"M7 11v4a2 2 0 0 0 2 2h4",key:"xkn7yn"}],["rect",{width:"8",height:"8",x:"13",y:"13",rx:"2",key:"1cgmvn"}]],PF=Ct("workflow",AF);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OF=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],Js=Ct("x",OF),TF=""+new URL("New-Millennium-color-logo1-iusu1O0w.png",import.meta.url).href;function IF(){const[e,t]=v.useState(""),[r,n]=v.useState(""),[s,i]=v.useState(!1),[l,u]=v.useState(""),{setCurrentUser:d,setCurrentSession:m}=aa(),f=Ds(),[p]=rx();v.useEffect(()=>{const w=sessionStorage.getItem("oauth_error");w&&(u(w),sessionStorage.removeItem("oauth_error"));const b=p.get("error"),S=p.get("error_description"),_=p.get("error_code");if(b){const E=S?decodeURIComponent(S):"An authentication error occurred.";b==="invalid_request"&&E.includes("AADSTS9002325")?u('Azure AD authentication requires PKCE. Please ensure your Azure AD app is configured correctly. The redirect URI must be registered under the "Web" platform in Azure AD.'):_==="unexpected_failure"&&E.includes("email")?u("Azure AD did not return your email address. Please ensure your Azure AD app has the correct API permissions (User.Read or email) and that your account has an email address."):u(`Authentication failed: ${E}`),f("/login",{replace:!0})}},[p,f]);const y=async w=>{console.log("[LoginScreen]  handleLogin called!",{email:e,name:r}),w.preventDefault(),console.log("[LoginScreen] Form prevented default"),u(""),i(!0),console.log("[LoginScreen] Set loading state");try{console.log("[LoginScreen] Starting login process..."),console.log("[LoginScreen] Getting or creating user...");const b=await Jo(e.trim().toLowerCase(),r.trim());console.log("[LoginScreen] User created/retrieved:",b),d(b);const S=p.get("session");if(S){console.log("[LoginScreen] Session code found, loading session...");const _=await o3(S);if(_){m(_),console.log("[LoginScreen] Checking user roles...");const[E,C,O]=await Promise.all([pl(b.id),pm(_.id,b.id),cx(_.id,b.email)]);if(E||C)f("/admin");else if(O)f("/vote");else{u("You are not authorized to access this voting session."),i(!1);return}}else{u("Invalid session code."),i(!1);return}}else console.log("[LoginScreen] No session code, navigating to /sessions"),f("/sessions")}catch(b){console.error("[LoginScreen] Login error:",b),u(`Failed to log in: ${b instanceof Error?b.message:"Unknown error"}. Please try again.`),i(!1)}},x=async()=>{u(""),i(!0);try{const w=window.location.pathname.startsWith("/feature-voting-app")?"/feature-voting-app":"",{error:b}=await Ne.auth.signInWithOAuth({provider:"azure",options:{redirectTo:`${window.location.origin}${w}/sessions`,scopes:"email openid profile User.ReadBasic.All"}});b&&(u("Failed to sign in with Azure AD. Please try again."),i(!1))}catch(w){console.error("Azure login error:",w),u("Failed to sign in with Azure AD. Please try again."),i(!1)}};return a.jsx("div",{className:"min-h-screen bg-gray-50 flex flex-col justify-center py-12 sm:px-6 lg:px-8",children:a.jsx("div",{className:"sm:mx-auto sm:w-full sm:max-w-md",children:a.jsxs("div",{className:"bg-white shadow-lg sm:rounded-lg overflow-hidden relative z-10",children:[a.jsxs("div",{className:"relative",children:[a.jsx("div",{className:"px-10 pt-8 pb-6 text-center",children:a.jsx("img",{src:TF,alt:"New Millennium Building Systems Logo",className:"mx-auto h-24 w-auto"})}),a.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-12 pointer-events-none",style:{background:"linear-gradient(to bottom, transparent, rgba(255, 255, 255, 0.8), rgba(255, 255, 255, 1))"}})]}),a.jsxs("div",{className:"px-4 sm:px-10 pb-8",children:[a.jsxs("div",{className:"text-center mb-6",children:[a.jsx("h2",{className:"text-3xl font-bold text-[#2d4660]",children:"Feature Voting System"}),a.jsx("p",{className:"mt-2 text-sm text-gray-600",children:"Sign in to access your voting sessions"})]}),a.jsxs("form",{onSubmit:y,className:"space-y-6",children:[a.jsxs("div",{children:[a.jsx("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700",children:"Full Name"}),a.jsx("div",{className:"mt-1",children:a.jsx("input",{id:"name",name:"name",type:"text",autoComplete:"name",required:!0,value:r,onChange:w=>n(w.target.value),className:"appearance-none block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-[#2d4660] focus:border-[#2d4660]",placeholder:"John Doe"})})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700",children:"Email Address"}),a.jsx("div",{className:"mt-1",children:a.jsx("input",{id:"email",name:"email",type:"email",autoComplete:"email",required:!0,value:e,onChange:w=>t(w.target.value),className:"appearance-none block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-[#2d4660] focus:border-[#2d4660]",placeholder:"your.email@company.com"})})]}),l&&a.jsx("div",{className:"rounded-md bg-red-50 p-4",children:a.jsx("div",{className:"flex",children:a.jsx("div",{className:"ml-3",children:a.jsx("h3",{className:"text-sm font-medium text-red-800",children:l})})})}),a.jsx("div",{children:a.jsx("button",{type:"submit",disabled:s,className:"w-full flex justify-center items-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-[#2d4660] hover:bg-[#1d3a53] focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-[#2d4660] disabled:opacity-50 disabled:cursor-not-allowed",children:s?a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Signing in..."]}):a.jsxs(a.Fragment,{children:[a.jsx(rF,{className:"h-4 w-4 mr-2"}),"Sign In"]})})})]}),a.jsx("div",{className:"mt-4",children:a.jsx("button",{type:"button",onClick:x,disabled:s,className:"microsoft-signin-button",style:{width:"100%",height:"41px",display:"flex",alignItems:"center",justifyContent:"center",paddingLeft:"12px",paddingRight:"12px",cursor:s?"not-allowed":"pointer",opacity:s?.5:1},onMouseEnter:w=>{s||(w.currentTarget.style.backgroundColor="#F5F5F5")},onMouseLeave:w=>{s||(w.currentTarget.style.backgroundColor="#FFFFFF")},children:s?a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2",style:{borderColor:"#5E5E5E",marginRight:"12px"}}),a.jsx("span",{style:{color:"#5E5E5E"},children:"Signing in..."})]}):a.jsxs(a.Fragment,{children:[a.jsx("img",{src:"/microsoft.svg",alt:"Microsoft",style:{width:"21px",height:"21px",marginRight:"12px",flexShrink:0}}),a.jsx("span",{style:{color:"#5E5E5E",fontFamily:'"Segoe UI", system-ui, -apple-system, BlinkMacSystemFont, "Roboto", "Helvetica Neue", Arial, sans-serif',fontSize:"15px",fontWeight:600},children:"Sign in with Microsoft"})]})})}),a.jsxs("div",{className:"mt-6",children:[a.jsxs("div",{className:"relative",children:[a.jsx("div",{className:"absolute inset-0 flex items-center",children:a.jsx("div",{className:"w-full border-t border-gray-300"})}),a.jsx("div",{className:"relative flex justify-center text-sm",children:a.jsx("span",{className:"px-2 bg-white text-gray-500",children:"No registration required"})})]}),a.jsxs("div",{className:"mt-6 text-center text-xs text-gray-500",children:[a.jsx("p",{children:"Simply enter your name and email to access"}),a.jsx("p",{children:"voting sessions you've been invited to"})]})]})]})]})})})}var gd=e=>e.type==="checkbox",Xo=e=>e instanceof Date,Os=e=>e==null;const SE=e=>typeof e=="object";var pn=e=>!Os(e)&&!Array.isArray(e)&&SE(e)&&!Xo(e),kE=e=>pn(e)&&e.target?gd(e.target)?e.target.checked:e.target.value:e,DF=e=>e.substring(0,e.search(/\.\d+(\.|$)/))||e,_E=(e,t)=>e.has(DF(t)),RF=e=>{const t=e.constructor&&e.constructor.prototype;return pn(t)&&t.hasOwnProperty("isPrototypeOf")},mx=typeof window<"u"&&typeof window.HTMLElement<"u"&&typeof document<"u";function jn(e){let t;const r=Array.isArray(e),n=typeof FileList<"u"?e instanceof FileList:!1;if(e instanceof Date)t=new Date(e);else if(!(mx&&(e instanceof Blob||n))&&(r||pn(e)))if(t=r?[]:Object.create(Object.getPrototypeOf(e)),!r&&!RF(e))t=e;else for(const s in e)e.hasOwnProperty(s)&&(t[s]=jn(e[s]));else return e;return t}var bm=e=>/^\w*$/.test(e),Gr=e=>e===void 0,px=e=>Array.isArray(e)?e.filter(Boolean):[],gx=e=>px(e.replace(/["|']|\]/g,"").split(/\.|\[/)),Ke=(e,t,r)=>{if(!t||!pn(e))return r;const n=(bm(t)?[t]:gx(t)).reduce((s,i)=>Os(s)?s:s[i],e);return Gr(n)||n===e?Gr(e[t])?r:e[t]:n},Ks=e=>typeof e=="boolean",Sr=(e,t,r)=>{let n=-1;const s=bm(t)?[t]:gx(t),i=s.length,l=i-1;for(;++n<i;){const u=s[n];let d=r;if(n!==l){const m=e[u];d=pn(m)||Array.isArray(m)?m:isNaN(+s[n+1])?{}:[]}if(u==="__proto__"||u==="constructor"||u==="prototype")return;e[u]=d,e=e[u]}};const xh={BLUR:"blur",FOCUS_OUT:"focusout",CHANGE:"change"},Ii={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},ga={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"},NE=jt.createContext(null);NE.displayName="HookFormContext";const yx=()=>jt.useContext(NE);var CE=(e,t,r,n=!0)=>{const s={defaultValues:t._defaultValues};for(const i in e)Object.defineProperty(s,i,{get:()=>{const l=i;return t._proxyFormState[l]!==Ii.all&&(t._proxyFormState[l]=!n||Ii.all),r&&(r[l]=!0),e[l]}});return s};const vx=typeof window<"u"?jt.useLayoutEffect:jt.useEffect;function $F(e){const t=yx(),{control:r=t.control,disabled:n,name:s,exact:i}=e||{},[l,u]=jt.useState(r._formState),d=jt.useRef({isDirty:!1,isLoading:!1,dirtyFields:!1,touchedFields:!1,validatingFields:!1,isValidating:!1,isValid:!1,errors:!1});return vx(()=>r._subscribe({name:s,formState:d.current,exact:i,callback:m=>{!n&&u({...r._formState,...m})}}),[s,n,i]),jt.useEffect(()=>{d.current.isValid&&r._setValid(!0)},[r]),jt.useMemo(()=>CE(l,r,d.current,!1),[l,r])}var Xs=e=>typeof e=="string",Zv=(e,t,r,n,s)=>Xs(e)?(n&&t.watch.add(e),Ke(r,e,s)):Array.isArray(e)?e.map(i=>(n&&t.watch.add(i),Ke(r,i))):(n&&(t.watchAll=!0),r),e0=e=>Os(e)||!SE(e);function Di(e,t,r=new WeakSet){if(e0(e)||e0(t))return e===t;if(Xo(e)&&Xo(t))return e.getTime()===t.getTime();const n=Object.keys(e),s=Object.keys(t);if(n.length!==s.length)return!1;if(r.has(e)||r.has(t))return!0;r.add(e),r.add(t);for(const i of n){const l=e[i];if(!s.includes(i))return!1;if(i!=="ref"){const u=t[i];if(Xo(l)&&Xo(u)||pn(l)&&pn(u)||Array.isArray(l)&&Array.isArray(u)?!Di(l,u,r):l!==u)return!1}}return!0}function MF(e){const t=yx(),{control:r=t.control,name:n,defaultValue:s,disabled:i,exact:l,compute:u}=e||{},d=jt.useRef(s),m=jt.useRef(u),f=jt.useRef(void 0),p=jt.useRef(r),y=jt.useRef(n);m.current=u;const[x,w]=jt.useState(()=>{const O=r._getWatch(n,d.current);return m.current?m.current(O):O}),b=jt.useCallback(O=>{const T=Zv(n,r._names,O||r._formValues,!1,d.current);return m.current?m.current(T):T},[r._formValues,r._names,n]),S=jt.useCallback(O=>{if(!i){const T=Zv(n,r._names,O||r._formValues,!1,d.current);if(m.current){const P=m.current(T);Di(P,f.current)||(w(P),f.current=P)}else w(T)}},[r._formValues,r._names,i,n]);vx(()=>((p.current!==r||!Di(y.current,n))&&(p.current=r,y.current=n,S()),r._subscribe({name:n,formState:{values:!0},exact:l,callback:O=>{S(O.values)}})),[r,l,n,S]),jt.useEffect(()=>r._removeUnmounted());const _=p.current!==r,E=y.current,C=jt.useMemo(()=>{if(i)return null;const O=!_&&!Di(E,n);return _||O?b():null},[i,_,n,E,b]);return C!==null?C:x}function FF(e){const t=yx(),{name:r,disabled:n,control:s=t.control,shouldUnregister:i,defaultValue:l}=e,u=_E(s._names.array,r),d=jt.useMemo(()=>Ke(s._formValues,r,Ke(s._defaultValues,r,l)),[s,r,l]),m=MF({control:s,name:r,defaultValue:d,exact:!0}),f=$F({control:s,name:r,exact:!0}),p=jt.useRef(e),y=jt.useRef(void 0),x=jt.useRef(s.register(r,{...e.rules,value:m,...Ks(e.disabled)?{disabled:e.disabled}:{}}));p.current=e;const w=jt.useMemo(()=>Object.defineProperties({},{invalid:{enumerable:!0,get:()=>!!Ke(f.errors,r)},isDirty:{enumerable:!0,get:()=>!!Ke(f.dirtyFields,r)},isTouched:{enumerable:!0,get:()=>!!Ke(f.touchedFields,r)},isValidating:{enumerable:!0,get:()=>!!Ke(f.validatingFields,r)},error:{enumerable:!0,get:()=>Ke(f.errors,r)}}),[f,r]),b=jt.useCallback(C=>x.current.onChange({target:{value:kE(C),name:r},type:xh.CHANGE}),[r]),S=jt.useCallback(()=>x.current.onBlur({target:{value:Ke(s._formValues,r),name:r},type:xh.BLUR}),[r,s._formValues]),_=jt.useCallback(C=>{const O=Ke(s._fields,r);O&&C&&(O._f.ref={focus:()=>C.focus&&C.focus(),select:()=>C.select&&C.select(),setCustomValidity:T=>C.setCustomValidity(T),reportValidity:()=>C.reportValidity()})},[s._fields,r]),E=jt.useMemo(()=>({name:r,value:m,...Ks(n)||f.disabled?{disabled:f.disabled||n}:{},onChange:b,onBlur:S,ref:_}),[r,n,f.disabled,b,S,_,m]);return jt.useEffect(()=>{const C=s._options.shouldUnregister||i,O=y.current;O&&O!==r&&!u&&s.unregister(O),s.register(r,{...p.current.rules,...Ks(p.current.disabled)?{disabled:p.current.disabled}:{}});const T=(P,F)=>{const H=Ke(s._fields,P);H&&H._f&&(H._f.mount=F)};if(T(r,!0),C){const P=jn(Ke(s._options.defaultValues,r,p.current.defaultValue));Sr(s._defaultValues,r,P),Gr(Ke(s._formValues,r))&&Sr(s._formValues,r,P)}return!u&&s.register(r),y.current=r,()=>{(u?C&&!s._state.action:C)?s.unregister(r):T(r,!1)}},[r,s,u,i]),jt.useEffect(()=>{s._setDisabledField({disabled:n,name:r})},[n,r,s]),jt.useMemo(()=>({field:E,formState:f,fieldState:w}),[E,f,w])}const dc=e=>e.render(FF(e));var LF=(e,t,r,n,s)=>t?{...r[e],types:{...r[e]&&r[e].types?r[e].types:{},[n]:s||!0}}:{},Vu=e=>Array.isArray(e)?e:[e],MS=()=>{let e=[];return{get observers(){return e},next:s=>{for(const i of e)i.next&&i.next(s)},subscribe:s=>(e.push(s),{unsubscribe:()=>{e=e.filter(i=>i!==s)}}),unsubscribe:()=>{e=[]}}};function EE(e,t){const r={};for(const n in e)if(e.hasOwnProperty(n)){const s=e[n],i=t[n];if(s&&pn(s)&&i){const l=EE(s,i);pn(l)&&(r[n]=l)}else e[n]&&(r[n]=i)}return r}var ps=e=>pn(e)&&!Object.keys(e).length,xx=e=>e.type==="file",Ri=e=>typeof e=="function",wh=e=>{if(!mx)return!1;const t=e?e.ownerDocument:0;return e instanceof(t&&t.defaultView?t.defaultView.HTMLElement:HTMLElement)},AE=e=>e.type==="select-multiple",wx=e=>e.type==="radio",zF=e=>wx(e)||gd(e),Jg=e=>wh(e)&&e.isConnected;function UF(e,t){const r=t.slice(0,-1).length;let n=0;for(;n<r;)e=Gr(e)?n++:e[t[n++]];return e}function BF(e){for(const t in e)if(e.hasOwnProperty(t)&&!Gr(e[t]))return!1;return!0}function dn(e,t){const r=Array.isArray(t)?t:bm(t)?[t]:gx(t),n=r.length===1?e:UF(e,r),s=r.length-1,i=r[s];return n&&delete n[i],s!==0&&(pn(n)&&ps(n)||Array.isArray(n)&&BF(n))&&dn(e,r.slice(0,-1)),e}var WF=e=>{for(const t in e)if(Ri(e[t]))return!0;return!1};function PE(e){return Array.isArray(e)||pn(e)&&!WF(e)}function t0(e,t={}){for(const r in e)PE(e[r])?(t[r]=Array.isArray(e[r])?[]:{},t0(e[r],t[r])):Gr(e[r])||(t[r]=!0);return t}function uc(e,t,r){r||(r=t0(t));for(const n in e)PE(e[n])?Gr(t)||e0(r[n])?r[n]=t0(e[n],Array.isArray(e[n])?[]:{}):uc(e[n],Os(t)?{}:t[n],r[n]):r[n]=!Di(e[n],t[n]);return r}const FS={value:!1,isValid:!1},LS={value:!0,isValid:!0};var OE=e=>{if(Array.isArray(e)){if(e.length>1){const t=e.filter(r=>r&&r.checked&&!r.disabled).map(r=>r.value);return{value:t,isValid:!!t.length}}return e[0].checked&&!e[0].disabled?e[0].attributes&&!Gr(e[0].attributes.value)?Gr(e[0].value)||e[0].value===""?LS:{value:e[0].value,isValid:!0}:LS:FS}return FS},TE=(e,{valueAsNumber:t,valueAsDate:r,setValueAs:n})=>Gr(e)?e:t?e===""?NaN:e&&+e:r&&Xs(e)?new Date(e):n?n(e):e;const zS={isValid:!1,value:null};var IE=e=>Array.isArray(e)?e.reduce((t,r)=>r&&r.checked&&!r.disabled?{isValid:!0,value:r.value}:t,zS):zS;function US(e){const t=e.ref;return xx(t)?t.files:wx(t)?IE(e.refs).value:AE(t)?[...t.selectedOptions].map(({value:r})=>r):gd(t)?OE(e.refs).value:TE(Gr(t.value)?e.ref.value:t.value,e)}var VF=(e,t,r,n)=>{const s={};for(const i of e){const l=Ke(t,i);l&&Sr(s,i,l._f)}return{criteriaMode:r,names:[...e],fields:s,shouldUseNativeValidation:n}},bh=e=>e instanceof RegExp,ku=e=>Gr(e)?e:bh(e)?e.source:pn(e)?bh(e.value)?e.value.source:e.value:e,BS=e=>({isOnSubmit:!e||e===Ii.onSubmit,isOnBlur:e===Ii.onBlur,isOnChange:e===Ii.onChange,isOnAll:e===Ii.all,isOnTouch:e===Ii.onTouched});const WS="AsyncFunction";var qF=e=>!!e&&!!e.validate&&!!(Ri(e.validate)&&e.validate.constructor.name===WS||pn(e.validate)&&Object.values(e.validate).find(t=>t.constructor.name===WS)),HF=e=>e.mount&&(e.required||e.min||e.max||e.maxLength||e.minLength||e.pattern||e.validate),VS=(e,t,r)=>!r&&(t.watchAll||t.watch.has(e)||[...t.watch].some(n=>e.startsWith(n)&&/^\.\w+/.test(e.slice(n.length))));const qu=(e,t,r,n)=>{for(const s of r||Object.keys(e)){const i=Ke(e,s);if(i){const{_f:l,...u}=i;if(l){if(l.refs&&l.refs[0]&&t(l.refs[0],s)&&!n)return!0;if(l.ref&&t(l.ref,l.name)&&!n)return!0;if(qu(u,t))break}else if(pn(u)&&qu(u,t))break}}};function qS(e,t,r){const n=Ke(e,r);if(n||bm(r))return{error:n,name:r};const s=r.split(".");for(;s.length;){const i=s.join("."),l=Ke(t,i),u=Ke(e,i);if(l&&!Array.isArray(l)&&r!==i)return{name:r};if(u&&u.type)return{name:i,error:u};if(u&&u.root&&u.root.type)return{name:`${i}.root`,error:u.root};s.pop()}return{name:r}}var KF=(e,t,r,n)=>{r(e);const{name:s,...i}=e;return ps(i)||Object.keys(i).length>=Object.keys(t).length||Object.keys(i).find(l=>t[l]===(!n||Ii.all))},GF=(e,t,r)=>!e||!t||e===t||Vu(e).some(n=>n&&(r?n===t:n.startsWith(t)||t.startsWith(n))),YF=(e,t,r,n,s)=>s.isOnAll?!1:!r&&s.isOnTouch?!(t||e):(r?n.isOnBlur:s.isOnBlur)?!e:(r?n.isOnChange:s.isOnChange)?e:!0,JF=(e,t)=>!px(Ke(e,t)).length&&dn(e,t),XF=(e,t,r)=>{const n=Vu(Ke(e,r));return Sr(n,"root",t[r]),Sr(e,r,n),e};function HS(e,t,r="validate"){if(Xs(e)||Array.isArray(e)&&e.every(Xs)||Ks(e)&&!e)return{type:r,message:Xs(e)?e:"",ref:t}}var nc=e=>pn(e)&&!bh(e)?e:{value:e,message:""},KS=async(e,t,r,n,s,i)=>{const{ref:l,refs:u,required:d,maxLength:m,minLength:f,min:p,max:y,pattern:x,validate:w,name:b,valueAsNumber:S,mount:_}=e._f,E=Ke(r,b);if(!_||t.has(b))return{};const C=u?u[0]:l,O=U=>{s&&C.reportValidity&&(C.setCustomValidity(Ks(U)?"":U||""),C.reportValidity())},T={},P=wx(l),F=gd(l),H=P||F,L=(S||xx(l))&&Gr(l.value)&&Gr(E)||wh(l)&&l.value===""||E===""||Array.isArray(E)&&!E.length,q=LF.bind(null,b,n,T),z=(U,ne,ie,oe=ga.maxLength,V=ga.minLength)=>{const Z=U?ne:ie;T[b]={type:U?oe:V,message:Z,ref:l,...q(U?oe:V,Z)}};if(i?!Array.isArray(E)||!E.length:d&&(!H&&(L||Os(E))||Ks(E)&&!E||F&&!OE(u).isValid||P&&!IE(u).isValid)){const{value:U,message:ne}=Xs(d)?{value:!!d,message:d}:nc(d);if(U&&(T[b]={type:ga.required,message:ne,ref:C,...q(ga.required,ne)},!n))return O(ne),T}if(!L&&(!Os(p)||!Os(y))){let U,ne;const ie=nc(y),oe=nc(p);if(!Os(E)&&!isNaN(E)){const V=l.valueAsNumber||E&&+E;Os(ie.value)||(U=V>ie.value),Os(oe.value)||(ne=V<oe.value)}else{const V=l.valueAsDate||new Date(E),Z=me=>new Date(new Date().toDateString()+" "+me),ee=l.type=="time",re=l.type=="week";Xs(ie.value)&&E&&(U=ee?Z(E)>Z(ie.value):re?E>ie.value:V>new Date(ie.value)),Xs(oe.value)&&E&&(ne=ee?Z(E)<Z(oe.value):re?E<oe.value:V<new Date(oe.value))}if((U||ne)&&(z(!!U,ie.message,oe.message,ga.max,ga.min),!n))return O(T[b].message),T}if((m||f)&&!L&&(Xs(E)||i&&Array.isArray(E))){const U=nc(m),ne=nc(f),ie=!Os(U.value)&&E.length>+U.value,oe=!Os(ne.value)&&E.length<+ne.value;if((ie||oe)&&(z(ie,U.message,ne.message),!n))return O(T[b].message),T}if(x&&!L&&Xs(E)){const{value:U,message:ne}=nc(x);if(bh(U)&&!E.match(U)&&(T[b]={type:ga.pattern,message:ne,ref:l,...q(ga.pattern,ne)},!n))return O(ne),T}if(w){if(Ri(w)){const U=await w(E,r),ne=HS(U,C);if(ne&&(T[b]={...ne,...q(ga.validate,ne.message)},!n))return O(ne.message),T}else if(pn(w)){let U={};for(const ne in w){if(!ps(U)&&!n)break;const ie=HS(await w[ne](E,r),C,ne);ie&&(U={...ie,...q(ne,ie.message)},O(ie.message),n&&(T[b]=U))}if(!ps(U)&&(T[b]={ref:C,...U},!n))return T}}return O(!0),T};const QF={mode:Ii.onSubmit,reValidateMode:Ii.onChange,shouldFocusError:!0};function ZF(e={}){let t={...QF,...e},r={submitCount:0,isDirty:!1,isReady:!1,isLoading:Ri(t.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},validatingFields:{},errors:t.errors||{},disabled:t.disabled||!1},n={},s=pn(t.defaultValues)||pn(t.values)?jn(t.defaultValues||t.values)||{}:{},i=t.shouldUnregister?{}:jn(s),l={action:!1,mount:!1,watch:!1},u={mount:new Set,disabled:new Set,unMount:new Set,array:new Set,watch:new Set},d,m=0;const f={isDirty:!1,dirtyFields:!1,validatingFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1};let p={...f};const y={array:MS(),state:MS()},x=t.criteriaMode===Ii.all,w=R=>Y=>{clearTimeout(m),m=setTimeout(R,Y)},b=async R=>{if(!t.disabled&&(f.isValid||p.isValid||R)){const Y=t.resolver?ps((await F()).errors):await L(n,!0);Y!==r.isValid&&y.state.next({isValid:Y})}},S=(R,Y)=>{!t.disabled&&(f.isValidating||f.validatingFields||p.isValidating||p.validatingFields)&&((R||Array.from(u.mount)).forEach(ce=>{ce&&(Y?Sr(r.validatingFields,ce,Y):dn(r.validatingFields,ce))}),y.state.next({validatingFields:r.validatingFields,isValidating:!ps(r.validatingFields)}))},_=(R,Y=[],ce,je,pe=!0,Se=!0)=>{if(je&&ce&&!t.disabled){if(l.action=!0,Se&&Array.isArray(Ke(n,R))){const qe=ce(Ke(n,R),je.argA,je.argB);pe&&Sr(n,R,qe)}if(Se&&Array.isArray(Ke(r.errors,R))){const qe=ce(Ke(r.errors,R),je.argA,je.argB);pe&&Sr(r.errors,R,qe),JF(r.errors,R)}if((f.touchedFields||p.touchedFields)&&Se&&Array.isArray(Ke(r.touchedFields,R))){const qe=ce(Ke(r.touchedFields,R),je.argA,je.argB);pe&&Sr(r.touchedFields,R,qe)}(f.dirtyFields||p.dirtyFields)&&(r.dirtyFields=uc(s,i)),y.state.next({name:R,isDirty:z(R,Y),dirtyFields:r.dirtyFields,errors:r.errors,isValid:r.isValid})}else Sr(i,R,Y)},E=(R,Y)=>{Sr(r.errors,R,Y),y.state.next({errors:r.errors})},C=R=>{r.errors=R,y.state.next({errors:r.errors,isValid:!1})},O=(R,Y,ce,je)=>{const pe=Ke(n,R);if(pe){const Se=Ke(i,R,Gr(ce)?Ke(s,R):ce);Gr(Se)||je&&je.defaultChecked||Y?Sr(i,R,Y?Se:US(pe._f)):ie(R,Se),l.mount&&b()}},T=(R,Y,ce,je,pe)=>{let Se=!1,qe=!1;const xt={name:R};if(!t.disabled){if(!ce||je){(f.isDirty||p.isDirty)&&(qe=r.isDirty,r.isDirty=xt.isDirty=z(),Se=qe!==xt.isDirty);const bt=Di(Ke(s,R),Y);qe=!!Ke(r.dirtyFields,R),bt?dn(r.dirtyFields,R):Sr(r.dirtyFields,R,!0),xt.dirtyFields=r.dirtyFields,Se=Se||(f.dirtyFields||p.dirtyFields)&&qe!==!bt}if(ce){const bt=Ke(r.touchedFields,R);bt||(Sr(r.touchedFields,R,ce),xt.touchedFields=r.touchedFields,Se=Se||(f.touchedFields||p.touchedFields)&&bt!==ce)}Se&&pe&&y.state.next(xt)}return Se?xt:{}},P=(R,Y,ce,je)=>{const pe=Ke(r.errors,R),Se=(f.isValid||p.isValid)&&Ks(Y)&&r.isValid!==Y;if(t.delayError&&ce?(d=w(()=>E(R,ce)),d(t.delayError)):(clearTimeout(m),d=null,ce?Sr(r.errors,R,ce):dn(r.errors,R)),(ce?!Di(pe,ce):pe)||!ps(je)||Se){const qe={...je,...Se&&Ks(Y)?{isValid:Y}:{},errors:r.errors,name:R};r={...r,...qe},y.state.next(qe)}},F=async R=>{S(R,!0);const Y=await t.resolver(i,t.context,VF(R||u.mount,n,t.criteriaMode,t.shouldUseNativeValidation));return S(R),Y},H=async R=>{const{errors:Y}=await F(R);if(R)for(const ce of R){const je=Ke(Y,ce);je?Sr(r.errors,ce,je):dn(r.errors,ce)}else r.errors=Y;return Y},L=async(R,Y,ce={valid:!0})=>{for(const je in R){const pe=R[je];if(pe){const{_f:Se,...qe}=pe;if(Se){const xt=u.array.has(Se.name),bt=pe._f&&qF(pe._f);bt&&f.validatingFields&&S([Se.name],!0);const Ft=await KS(pe,u.disabled,i,x,t.shouldUseNativeValidation&&!Y,xt);if(bt&&f.validatingFields&&S([Se.name]),Ft[Se.name]&&(ce.valid=!1,Y))break;!Y&&(Ke(Ft,Se.name)?xt?XF(r.errors,Ft,Se.name):Sr(r.errors,Se.name,Ft[Se.name]):dn(r.errors,Se.name))}!ps(qe)&&await L(qe,Y,ce)}}return ce.valid},q=()=>{for(const R of u.unMount){const Y=Ke(n,R);Y&&(Y._f.refs?Y._f.refs.every(ce=>!Jg(ce)):!Jg(Y._f.ref))&&ye(R)}u.unMount=new Set},z=(R,Y)=>!t.disabled&&(R&&Y&&Sr(i,R,Y),!Di(me(),s)),U=(R,Y,ce)=>Zv(R,u,{...l.mount?i:Gr(Y)?s:Xs(R)?{[R]:Y}:Y},ce,Y),ne=R=>px(Ke(l.mount?i:s,R,t.shouldUnregister?Ke(s,R,[]):[])),ie=(R,Y,ce={})=>{const je=Ke(n,R);let pe=Y;if(je){const Se=je._f;Se&&(!Se.disabled&&Sr(i,R,TE(Y,Se)),pe=wh(Se.ref)&&Os(Y)?"":Y,AE(Se.ref)?[...Se.ref.options].forEach(qe=>qe.selected=pe.includes(qe.value)):Se.refs?gd(Se.ref)?Se.refs.forEach(qe=>{(!qe.defaultChecked||!qe.disabled)&&(Array.isArray(pe)?qe.checked=!!pe.find(xt=>xt===qe.value):qe.checked=pe===qe.value||!!pe)}):Se.refs.forEach(qe=>qe.checked=qe.value===pe):xx(Se.ref)?Se.ref.value="":(Se.ref.value=pe,Se.ref.type||y.state.next({name:R,values:jn(i)})))}(ce.shouldDirty||ce.shouldTouch)&&T(R,pe,ce.shouldTouch,ce.shouldDirty,!0),ce.shouldValidate&&re(R)},oe=(R,Y,ce)=>{for(const je in Y){if(!Y.hasOwnProperty(je))return;const pe=Y[je],Se=R+"."+je,qe=Ke(n,Se);(u.array.has(R)||pn(pe)||qe&&!qe._f)&&!Xo(pe)?oe(Se,pe,ce):ie(Se,pe,ce)}},V=(R,Y,ce={})=>{const je=Ke(n,R),pe=u.array.has(R),Se=jn(Y);Sr(i,R,Se),pe?(y.array.next({name:R,values:jn(i)}),(f.isDirty||f.dirtyFields||p.isDirty||p.dirtyFields)&&ce.shouldDirty&&y.state.next({name:R,dirtyFields:uc(s,i),isDirty:z(R,Se)})):je&&!je._f&&!Os(Se)?oe(R,Se,ce):ie(R,Se,ce),VS(R,u)&&y.state.next({...r,name:R}),y.state.next({name:l.mount?R:void 0,values:jn(i)})},Z=async R=>{l.mount=!0;const Y=R.target;let ce=Y.name,je=!0;const pe=Ke(n,ce),Se=bt=>{je=Number.isNaN(bt)||Xo(bt)&&isNaN(bt.getTime())||Di(bt,Ke(i,ce,bt))},qe=BS(t.mode),xt=BS(t.reValidateMode);if(pe){let bt,Ft;const hr=Y.type?US(pe._f):kE(R),Ht=R.type===xh.BLUR||R.type===xh.FOCUS_OUT,Ir=!HF(pe._f)&&!t.resolver&&!Ke(r.errors,ce)&&!pe._f.deps||YF(Ht,Ke(r.touchedFields,ce),r.isSubmitted,xt,qe),Dr=VS(ce,u,Ht);Sr(i,ce,hr),Ht?(!Y||!Y.readOnly)&&(pe._f.onBlur&&pe._f.onBlur(R),d&&d(0)):pe._f.onChange&&pe._f.onChange(R);const zt=T(ce,hr,Ht),nn=!ps(zt)||Dr;if(!Ht&&y.state.next({name:ce,type:R.type,values:jn(i)}),Ir)return(f.isValid||p.isValid)&&(t.mode==="onBlur"?Ht&&b():Ht||b()),nn&&y.state.next({name:ce,...Dr?{}:zt});if(!Ht&&Dr&&y.state.next({...r}),t.resolver){const{errors:ar}=await F([ce]);if(Se(hr),je){const Ur=qS(r.errors,n,ce),st=qS(ar,n,Ur.name||ce);bt=st.error,ce=st.name,Ft=ps(ar)}}else S([ce],!0),bt=(await KS(pe,u.disabled,i,x,t.shouldUseNativeValidation))[ce],S([ce]),Se(hr),je&&(bt?Ft=!1:(f.isValid||p.isValid)&&(Ft=await L(n,!0)));je&&(pe._f.deps&&(!Array.isArray(pe._f.deps)||pe._f.deps.length>0)&&re(pe._f.deps),P(ce,Ft,bt,zt))}},ee=(R,Y)=>{if(Ke(r.errors,Y)&&R.focus)return R.focus(),1},re=async(R,Y={})=>{let ce,je;const pe=Vu(R);if(t.resolver){const Se=await H(Gr(R)?R:pe);ce=ps(Se),je=R?!pe.some(qe=>Ke(Se,qe)):ce}else R?(je=(await Promise.all(pe.map(async Se=>{const qe=Ke(n,Se);return await L(qe&&qe._f?{[Se]:qe}:qe)}))).every(Boolean),!(!je&&!r.isValid)&&b()):je=ce=await L(n);return y.state.next({...!Xs(R)||(f.isValid||p.isValid)&&ce!==r.isValid?{}:{name:R},...t.resolver||!R?{isValid:ce}:{},errors:r.errors}),Y.shouldFocus&&!je&&qu(n,ee,R?pe:u.mount),je},me=(R,Y)=>{let ce={...l.mount?i:s};return Y&&(ce=EE(Y.dirtyFields?r.dirtyFields:r.touchedFields,ce)),Gr(R)?ce:Xs(R)?Ke(ce,R):R.map(je=>Ke(ce,je))},I=(R,Y)=>({invalid:!!Ke((Y||r).errors,R),isDirty:!!Ke((Y||r).dirtyFields,R),error:Ke((Y||r).errors,R),isValidating:!!Ke(r.validatingFields,R),isTouched:!!Ke((Y||r).touchedFields,R)}),M=R=>{R&&Vu(R).forEach(Y=>dn(r.errors,Y)),y.state.next({errors:R?r.errors:{}})},We=(R,Y,ce)=>{const je=(Ke(n,R,{_f:{}})._f||{}).ref,pe=Ke(r.errors,R)||{},{ref:Se,message:qe,type:xt,...bt}=pe;Sr(r.errors,R,{...bt,...Y,ref:je}),y.state.next({name:R,errors:r.errors,isValid:!1}),ce&&ce.shouldFocus&&je&&je.focus&&je.focus()},te=(R,Y)=>Ri(R)?y.state.subscribe({next:ce=>"values"in ce&&R(U(void 0,Y),ce)}):U(R,Y,!0),ve=R=>y.state.subscribe({next:Y=>{GF(R.name,Y.name,R.exact)&&KF(Y,R.formState||f,Mt,R.reRenderRoot)&&R.callback({values:{...i},...r,...Y,defaultValues:s})}}).unsubscribe,he=R=>(l.mount=!0,p={...p,...R.formState},ve({...R,formState:p})),ye=(R,Y={})=>{for(const ce of R?Vu(R):u.mount)u.mount.delete(ce),u.array.delete(ce),Y.keepValue||(dn(n,ce),dn(i,ce)),!Y.keepError&&dn(r.errors,ce),!Y.keepDirty&&dn(r.dirtyFields,ce),!Y.keepTouched&&dn(r.touchedFields,ce),!Y.keepIsValidating&&dn(r.validatingFields,ce),!t.shouldUnregister&&!Y.keepDefaultValue&&dn(s,ce);y.state.next({values:jn(i)}),y.state.next({...r,...Y.keepDirty?{isDirty:z()}:{}}),!Y.keepIsValid&&b()},le=({disabled:R,name:Y})=>{(Ks(R)&&l.mount||R||u.disabled.has(Y))&&(R?u.disabled.add(Y):u.disabled.delete(Y))},W=(R,Y={})=>{let ce=Ke(n,R);const je=Ks(Y.disabled)||Ks(t.disabled);return Sr(n,R,{...ce||{},_f:{...ce&&ce._f?ce._f:{ref:{name:R}},name:R,mount:!0,...Y}}),u.mount.add(R),ce?le({disabled:Ks(Y.disabled)?Y.disabled:t.disabled,name:R}):O(R,!0,Y.value),{...je?{disabled:Y.disabled||t.disabled}:{},...t.progressive?{required:!!Y.required,min:ku(Y.min),max:ku(Y.max),minLength:ku(Y.minLength),maxLength:ku(Y.maxLength),pattern:ku(Y.pattern)}:{},name:R,onChange:Z,onBlur:Z,ref:pe=>{if(pe){W(R,Y),ce=Ke(n,R);const Se=Gr(pe.value)&&pe.querySelectorAll&&pe.querySelectorAll("input,select,textarea")[0]||pe,qe=zF(Se),xt=ce._f.refs||[];if(qe?xt.find(bt=>bt===Se):Se===ce._f.ref)return;Sr(n,R,{_f:{...ce._f,...qe?{refs:[...xt.filter(Jg),Se,...Array.isArray(Ke(s,R))?[{}]:[]],ref:{type:Se.type,name:R}}:{ref:Se}}}),O(R,!1,void 0,Se)}else ce=Ke(n,R,{}),ce._f&&(ce._f.mount=!1),(t.shouldUnregister||Y.shouldUnregister)&&!(_E(u.array,R)&&l.action)&&u.unMount.add(R)}}},Re=()=>t.shouldFocusError&&qu(n,ee,u.mount),Ge=R=>{Ks(R)&&(y.state.next({disabled:R}),qu(n,(Y,ce)=>{const je=Ke(n,ce);je&&(Y.disabled=je._f.disabled||R,Array.isArray(je._f.refs)&&je._f.refs.forEach(pe=>{pe.disabled=je._f.disabled||R}))},0,!1))},G=(R,Y)=>async ce=>{let je;ce&&(ce.preventDefault&&ce.preventDefault(),ce.persist&&ce.persist());let pe=jn(i);if(y.state.next({isSubmitting:!0}),t.resolver){const{errors:Se,values:qe}=await F();r.errors=Se,pe=jn(qe)}else await L(n);if(u.disabled.size)for(const Se of u.disabled)dn(pe,Se);if(dn(r.errors,"root"),ps(r.errors)){y.state.next({errors:{}});try{await R(pe,ce)}catch(Se){je=Se}}else Y&&await Y({...r.errors},ce),Re(),setTimeout(Re);if(y.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:ps(r.errors)&&!je,submitCount:r.submitCount+1,errors:r.errors}),je)throw je},He=(R,Y={})=>{Ke(n,R)&&(Gr(Y.defaultValue)?V(R,jn(Ke(s,R))):(V(R,Y.defaultValue),Sr(s,R,jn(Y.defaultValue))),Y.keepTouched||dn(r.touchedFields,R),Y.keepDirty||(dn(r.dirtyFields,R),r.isDirty=Y.defaultValue?z(R,jn(Ke(s,R))):z()),Y.keepError||(dn(r.errors,R),f.isValid&&b()),y.state.next({...r}))},Je=(R,Y={})=>{const ce=R?jn(R):s,je=jn(ce),pe=ps(R),Se=pe?s:je;if(Y.keepDefaultValues||(s=ce),!Y.keepValues){if(Y.keepDirtyValues){const qe=new Set([...u.mount,...Object.keys(uc(s,i))]);for(const xt of Array.from(qe))Ke(r.dirtyFields,xt)?Sr(Se,xt,Ke(i,xt)):V(xt,Ke(Se,xt))}else{if(mx&&Gr(R))for(const qe of u.mount){const xt=Ke(n,qe);if(xt&&xt._f){const bt=Array.isArray(xt._f.refs)?xt._f.refs[0]:xt._f.ref;if(wh(bt)){const Ft=bt.closest("form");if(Ft){Ft.reset();break}}}}if(Y.keepFieldsRef)for(const qe of u.mount)V(qe,Ke(Se,qe));else n={}}i=t.shouldUnregister?Y.keepDefaultValues?jn(s):{}:jn(Se),y.array.next({values:{...Se}}),y.state.next({values:{...Se}})}u={mount:Y.keepDirtyValues?u.mount:new Set,unMount:new Set,array:new Set,disabled:new Set,watch:new Set,watchAll:!1,focus:""},l.mount=!f.isValid||!!Y.keepIsValid||!!Y.keepDirtyValues||!t.shouldUnregister&&!ps(Se),l.watch=!!t.shouldUnregister,y.state.next({submitCount:Y.keepSubmitCount?r.submitCount:0,isDirty:pe?!1:Y.keepDirty?r.isDirty:!!(Y.keepDefaultValues&&!Di(R,s)),isSubmitted:Y.keepIsSubmitted?r.isSubmitted:!1,dirtyFields:pe?{}:Y.keepDirtyValues?Y.keepDefaultValues&&i?uc(s,i):r.dirtyFields:Y.keepDefaultValues&&R?uc(s,R):Y.keepDirty?r.dirtyFields:{},touchedFields:Y.keepTouched?r.touchedFields:{},errors:Y.keepErrors?r.errors:{},isSubmitSuccessful:Y.keepIsSubmitSuccessful?r.isSubmitSuccessful:!1,isSubmitting:!1,defaultValues:s})},gt=(R,Y)=>Je(Ri(R)?R(i):R,Y),_t=(R,Y={})=>{const ce=Ke(n,R),je=ce&&ce._f;if(je){const pe=je.refs?je.refs[0]:je.ref;pe.focus&&(pe.focus(),Y.shouldSelect&&Ri(pe.select)&&pe.select())}},Mt=R=>{r={...r,...R}},Qt={control:{register:W,unregister:ye,getFieldState:I,handleSubmit:G,setError:We,_subscribe:ve,_runSchema:F,_focusError:Re,_getWatch:U,_getDirty:z,_setValid:b,_setFieldArray:_,_setDisabledField:le,_setErrors:C,_getFieldArray:ne,_reset:Je,_resetDefaultValues:()=>Ri(t.defaultValues)&&t.defaultValues().then(R=>{gt(R,t.resetOptions),y.state.next({isLoading:!1})}),_removeUnmounted:q,_disableForm:Ge,_subjects:y,_proxyFormState:f,get _fields(){return n},get _formValues(){return i},get _state(){return l},set _state(R){l=R},get _defaultValues(){return s},get _names(){return u},set _names(R){u=R},get _formState(){return r},get _options(){return t},set _options(R){t={...t,...R}}},subscribe:he,trigger:re,register:W,handleSubmit:G,watch:te,setValue:V,getValues:me,reset:gt,resetField:He,clearErrors:M,unregister:ye,setError:We,setFocus:_t,getFieldState:I};return{...Qt,formControl:Qt}}function Xu(e={}){const t=jt.useRef(void 0),r=jt.useRef(void 0),[n,s]=jt.useState({isDirty:!1,isValidating:!1,isLoading:Ri(e.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},validatingFields:{},errors:e.errors||{},disabled:e.disabled||!1,isReady:!1,defaultValues:Ri(e.defaultValues)?void 0:e.defaultValues});if(!t.current)if(e.formControl)t.current={...e.formControl,formState:n},e.defaultValues&&!Ri(e.defaultValues)&&e.formControl.reset(e.defaultValues,e.resetOptions);else{const{formControl:l,...u}=ZF(e);t.current={...u,formState:n}}const i=t.current.control;return i._options=e,vx(()=>{const l=i._subscribe({formState:i._proxyFormState,callback:()=>s({...i._formState}),reRenderRoot:!0});return s(u=>({...u,isReady:!0})),i._formState.isReady=!0,l},[i]),jt.useEffect(()=>i._disableForm(e.disabled),[i,e.disabled]),jt.useEffect(()=>{e.mode&&(i._options.mode=e.mode),e.reValidateMode&&(i._options.reValidateMode=e.reValidateMode)},[i,e.mode,e.reValidateMode]),jt.useEffect(()=>{e.errors&&(i._setErrors(e.errors),i._focusError())},[i,e.errors]),jt.useEffect(()=>{e.shouldUnregister&&i._subjects.state.next({values:i._getWatch()})},[i,e.shouldUnregister]),jt.useEffect(()=>{if(i._proxyFormState.isDirty){const l=i._getDirty();l!==n.isDirty&&i._subjects.state.next({isDirty:l})}},[i,n.isDirty]),jt.useEffect(()=>{e.values&&!Di(e.values,r.current)?(i._reset(e.values,{keepFieldsRef:!0,...i._options.resetOptions}),r.current=e.values,s(l=>({...l}))):i._resetDefaultValues()},[i,e.values]),jt.useEffect(()=>{i._state.mount||(i._setValid(),i._state.mount=!0),i._state.watch&&(i._state.watch=!1,i._subjects.state.next({...i._formState})),i._removeUnmounted()}),t.current.formState=CE(n,i),t.current}function DE(e){var t,r,n="";if(typeof e=="string"||typeof e=="number")n+=e;else if(typeof e=="object")if(Array.isArray(e)){var s=e.length;for(t=0;t<s;t++)e[t]&&(r=DE(e[t]))&&(n&&(n+=" "),n+=r)}else for(r in e)e[r]&&(n&&(n+=" "),n+=r);return n}function Tr(){for(var e,t,r=0,n="",s=arguments.length;r<s;r++)(e=arguments[r])&&(t=DE(e))&&(n&&(n+=" "),n+=t);return n}var eL=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"];function bx(e){if(typeof e!="string")return!1;var t=eL;return t.includes(e)}var tL=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"];function RE(e){if(typeof e!="string")return!1;var t=tL;return t.includes(e)}function $E(e){return typeof e=="string"&&e.startsWith("data-")}function vo(e){var t=Object.entries(e).filter(r=>{var[n]=r;return RE(n)||$E(n)});return Object.fromEntries(t)}function jx(e){if(e==null)return null;if(v.isValidElement(e)&&typeof e.props=="object"&&e.props!==null){var t=e.props;return vo(t)}return typeof e=="object"&&!Array.isArray(e)?vo(e):null}function yi(e){var t=Object.entries(e).filter(r=>{var[n]=r;return RE(n)||$E(n)||bx(n)});return Object.fromEntries(t)}var rL=["children","width","height","viewBox","className","style","title","desc"];function r0(){return r0=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},r0.apply(null,arguments)}function nL(e,t){if(e==null)return{};var r,n,s=sL(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function sL(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var ME=v.forwardRef((e,t)=>{var{children:r,width:n,height:s,viewBox:i,className:l,style:u,title:d,desc:m}=e,f=nL(e,rL),p=i||{width:n,height:s,x:0,y:0},y=Tr("recharts-surface",l);return v.createElement("svg",r0({},yi(f),{className:y,width:n,height:s,style:u,viewBox:"".concat(p.x," ").concat(p.y," ").concat(p.width," ").concat(p.height),ref:t}),v.createElement("title",null,d),v.createElement("desc",null,m),r)}),iL=["children","className"];function n0(){return n0=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},n0.apply(null,arguments)}function aL(e,t){if(e==null)return{};var r,n,s=oL(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function oL(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var Pa=v.forwardRef((e,t)=>{var{children:r,className:n}=e,s=aL(e,iL),i=Tr("recharts-layer",n);return v.createElement("g",n0({className:i},yi(s),{ref:t}),r)}),lL=v.createContext(null);function kr(e){return function(){return e}}const FE=Math.cos,jh=Math.sin,Wi=Math.sqrt,Sh=Math.PI,jm=2*Sh,s0=Math.PI,i0=2*s0,Wo=1e-6,cL=i0-Wo;function LE(e){this._+=e[0];for(let t=1,r=e.length;t<r;++t)this._+=arguments[t]+e[t]}function uL(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return LE;const r=10**t;return function(n){this._+=n[0];for(let s=1,i=n.length;s<i;++s)this._+=Math.round(arguments[s]*r)/r+n[s]}}class dL{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?LE:uL(t)}moveTo(t,r){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+r}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,r){this._append`L${this._x1=+t},${this._y1=+r}`}quadraticCurveTo(t,r,n,s){this._append`Q${+t},${+r},${this._x1=+n},${this._y1=+s}`}bezierCurveTo(t,r,n,s,i,l){this._append`C${+t},${+r},${+n},${+s},${this._x1=+i},${this._y1=+l}`}arcTo(t,r,n,s,i){if(t=+t,r=+r,n=+n,s=+s,i=+i,i<0)throw new Error(`negative radius: ${i}`);let l=this._x1,u=this._y1,d=n-t,m=s-r,f=l-t,p=u-r,y=f*f+p*p;if(this._x1===null)this._append`M${this._x1=t},${this._y1=r}`;else if(y>Wo)if(!(Math.abs(p*d-m*f)>Wo)||!i)this._append`L${this._x1=t},${this._y1=r}`;else{let x=n-l,w=s-u,b=d*d+m*m,S=x*x+w*w,_=Math.sqrt(b),E=Math.sqrt(y),C=i*Math.tan((s0-Math.acos((b+y-S)/(2*_*E)))/2),O=C/E,T=C/_;Math.abs(O-1)>Wo&&this._append`L${t+O*f},${r+O*p}`,this._append`A${i},${i},0,0,${+(p*x>f*w)},${this._x1=t+T*d},${this._y1=r+T*m}`}}arc(t,r,n,s,i,l){if(t=+t,r=+r,n=+n,l=!!l,n<0)throw new Error(`negative radius: ${n}`);let u=n*Math.cos(s),d=n*Math.sin(s),m=t+u,f=r+d,p=1^l,y=l?s-i:i-s;this._x1===null?this._append`M${m},${f}`:(Math.abs(this._x1-m)>Wo||Math.abs(this._y1-f)>Wo)&&this._append`L${m},${f}`,n&&(y<0&&(y=y%i0+i0),y>cL?this._append`A${n},${n},0,1,${p},${t-u},${r-d}A${n},${n},0,1,${p},${this._x1=m},${this._y1=f}`:y>Wo&&this._append`A${n},${n},0,${+(y>=s0)},${p},${this._x1=t+n*Math.cos(i)},${this._y1=r+n*Math.sin(i)}`)}rect(t,r,n,s){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+r}h${n=+n}v${+s}h${-n}Z`}toString(){return this._}}function Sx(e){let t=3;return e.digits=function(r){if(!arguments.length)return t;if(r==null)t=null;else{const n=Math.floor(r);if(!(n>=0))throw new RangeError(`invalid digits: ${r}`);t=n}return e},()=>new dL(t)}function kx(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function zE(e){this._context=e}zE.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function Sm(e){return new zE(e)}function UE(e){return e[0]}function BE(e){return e[1]}function WE(e,t){var r=kr(!0),n=null,s=Sm,i=null,l=Sx(u);e=typeof e=="function"?e:e===void 0?UE:kr(e),t=typeof t=="function"?t:t===void 0?BE:kr(t);function u(d){var m,f=(d=kx(d)).length,p,y=!1,x;for(n==null&&(i=s(x=l())),m=0;m<=f;++m)!(m<f&&r(p=d[m],m,d))===y&&((y=!y)?i.lineStart():i.lineEnd()),y&&i.point(+e(p,m,d),+t(p,m,d));if(x)return i=null,x+""||null}return u.x=function(d){return arguments.length?(e=typeof d=="function"?d:kr(+d),u):e},u.y=function(d){return arguments.length?(t=typeof d=="function"?d:kr(+d),u):t},u.defined=function(d){return arguments.length?(r=typeof d=="function"?d:kr(!!d),u):r},u.curve=function(d){return arguments.length?(s=d,n!=null&&(i=s(n)),u):s},u.context=function(d){return arguments.length?(d==null?n=i=null:i=s(n=d),u):n},u}function Df(e,t,r){var n=null,s=kr(!0),i=null,l=Sm,u=null,d=Sx(m);e=typeof e=="function"?e:e===void 0?UE:kr(+e),t=typeof t=="function"?t:kr(t===void 0?0:+t),r=typeof r=="function"?r:r===void 0?BE:kr(+r);function m(p){var y,x,w,b=(p=kx(p)).length,S,_=!1,E,C=new Array(b),O=new Array(b);for(i==null&&(u=l(E=d())),y=0;y<=b;++y){if(!(y<b&&s(S=p[y],y,p))===_)if(_=!_)x=y,u.areaStart(),u.lineStart();else{for(u.lineEnd(),u.lineStart(),w=y-1;w>=x;--w)u.point(C[w],O[w]);u.lineEnd(),u.areaEnd()}_&&(C[y]=+e(S,y,p),O[y]=+t(S,y,p),u.point(n?+n(S,y,p):C[y],r?+r(S,y,p):O[y]))}if(E)return u=null,E+""||null}function f(){return WE().defined(s).curve(l).context(i)}return m.x=function(p){return arguments.length?(e=typeof p=="function"?p:kr(+p),n=null,m):e},m.x0=function(p){return arguments.length?(e=typeof p=="function"?p:kr(+p),m):e},m.x1=function(p){return arguments.length?(n=p==null?null:typeof p=="function"?p:kr(+p),m):n},m.y=function(p){return arguments.length?(t=typeof p=="function"?p:kr(+p),r=null,m):t},m.y0=function(p){return arguments.length?(t=typeof p=="function"?p:kr(+p),m):t},m.y1=function(p){return arguments.length?(r=p==null?null:typeof p=="function"?p:kr(+p),m):r},m.lineX0=m.lineY0=function(){return f().x(e).y(t)},m.lineY1=function(){return f().x(e).y(r)},m.lineX1=function(){return f().x(n).y(t)},m.defined=function(p){return arguments.length?(s=typeof p=="function"?p:kr(!!p),m):s},m.curve=function(p){return arguments.length?(l=p,i!=null&&(u=l(i)),m):l},m.context=function(p){return arguments.length?(p==null?i=u=null:u=l(i=p),m):i},m}class VE{constructor(t,r){this._context=t,this._x=r}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(t,r){switch(t=+t,r=+r,this._point){case 0:{this._point=1,this._line?this._context.lineTo(t,r):this._context.moveTo(t,r);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+t)/2,this._y0,this._x0,r,t,r):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+r)/2,t,this._y0,t,r);break}}this._x0=t,this._y0=r}}function fL(e){return new VE(e,!0)}function hL(e){return new VE(e,!1)}const _x={draw(e,t){const r=Wi(t/Sh);e.moveTo(r,0),e.arc(0,0,r,0,jm)}},mL={draw(e,t){const r=Wi(t/5)/2;e.moveTo(-3*r,-r),e.lineTo(-r,-r),e.lineTo(-r,-3*r),e.lineTo(r,-3*r),e.lineTo(r,-r),e.lineTo(3*r,-r),e.lineTo(3*r,r),e.lineTo(r,r),e.lineTo(r,3*r),e.lineTo(-r,3*r),e.lineTo(-r,r),e.lineTo(-3*r,r),e.closePath()}},qE=Wi(1/3),pL=qE*2,gL={draw(e,t){const r=Wi(t/pL),n=r*qE;e.moveTo(0,-r),e.lineTo(n,0),e.lineTo(0,r),e.lineTo(-n,0),e.closePath()}},yL={draw(e,t){const r=Wi(t),n=-r/2;e.rect(n,n,r,r)}},vL=.8908130915292852,HE=jh(Sh/10)/jh(7*Sh/10),xL=jh(jm/10)*HE,wL=-FE(jm/10)*HE,bL={draw(e,t){const r=Wi(t*vL),n=xL*r,s=wL*r;e.moveTo(0,-r),e.lineTo(n,s);for(let i=1;i<5;++i){const l=jm*i/5,u=FE(l),d=jh(l);e.lineTo(d*r,-u*r),e.lineTo(u*n-d*s,d*n+u*s)}e.closePath()}},Xg=Wi(3),jL={draw(e,t){const r=-Wi(t/(Xg*3));e.moveTo(0,r*2),e.lineTo(-Xg*r,-r),e.lineTo(Xg*r,-r),e.closePath()}},di=-.5,fi=Wi(3)/2,a0=1/Wi(12),SL=(a0/2+1)*3,kL={draw(e,t){const r=Wi(t/SL),n=r/2,s=r*a0,i=n,l=r*a0+r,u=-i,d=l;e.moveTo(n,s),e.lineTo(i,l),e.lineTo(u,d),e.lineTo(di*n-fi*s,fi*n+di*s),e.lineTo(di*i-fi*l,fi*i+di*l),e.lineTo(di*u-fi*d,fi*u+di*d),e.lineTo(di*n+fi*s,di*s-fi*n),e.lineTo(di*i+fi*l,di*l-fi*i),e.lineTo(di*u+fi*d,di*d-fi*u),e.closePath()}};function _L(e,t){let r=null,n=Sx(s);e=typeof e=="function"?e:kr(e||_x),t=typeof t=="function"?t:kr(t===void 0?64:+t);function s(){let i;if(r||(r=i=n()),e.apply(this,arguments).draw(r,+t.apply(this,arguments)),i)return r=null,i+""||null}return s.type=function(i){return arguments.length?(e=typeof i=="function"?i:kr(i),s):e},s.size=function(i){return arguments.length?(t=typeof i=="function"?i:kr(+i),s):t},s.context=function(i){return arguments.length?(r=i??null,s):r},s}function kh(){}function _h(e,t,r){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+r)/6)}function KE(e){this._context=e}KE.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:_h(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:_h(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function NL(e){return new KE(e)}function GE(e){this._context=e}GE.prototype={areaStart:kh,areaEnd:kh,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:_h(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function CL(e){return new GE(e)}function YE(e){this._context=e}YE.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var r=(this._x0+4*this._x1+e)/6,n=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(r,n):this._context.moveTo(r,n);break;case 3:this._point=4;default:_h(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function EL(e){return new YE(e)}function JE(e){this._context=e}JE.prototype={areaStart:kh,areaEnd:kh,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}};function AL(e){return new JE(e)}function GS(e){return e<0?-1:1}function YS(e,t,r){var n=e._x1-e._x0,s=t-e._x1,i=(e._y1-e._y0)/(n||s<0&&-0),l=(r-e._y1)/(s||n<0&&-0),u=(i*s+l*n)/(n+s);return(GS(i)+GS(l))*Math.min(Math.abs(i),Math.abs(l),.5*Math.abs(u))||0}function JS(e,t){var r=e._x1-e._x0;return r?(3*(e._y1-e._y0)/r-t)/2:t}function Qg(e,t,r){var n=e._x0,s=e._y0,i=e._x1,l=e._y1,u=(i-n)/3;e._context.bezierCurveTo(n+u,s+u*t,i-u,l-u*r,i,l)}function Nh(e){this._context=e}Nh.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:Qg(this,this._t0,JS(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var r=NaN;if(e=+e,t=+t,!(e===this._x1&&t===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,Qg(this,JS(this,r=YS(this,e,t)),r);break;default:Qg(this,this._t0,r=YS(this,e,t));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=r}}};function XE(e){this._context=new QE(e)}(XE.prototype=Object.create(Nh.prototype)).point=function(e,t){Nh.prototype.point.call(this,t,e)};function QE(e){this._context=e}QE.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,r,n,s,i){this._context.bezierCurveTo(t,e,n,r,i,s)}};function PL(e){return new Nh(e)}function OL(e){return new XE(e)}function ZE(e){this._context=e}ZE.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,r=e.length;if(r)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),r===2)this._context.lineTo(e[1],t[1]);else for(var n=XS(e),s=XS(t),i=0,l=1;l<r;++i,++l)this._context.bezierCurveTo(n[0][i],s[0][i],n[1][i],s[1][i],e[l],t[l]);(this._line||this._line!==0&&r===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}};function XS(e){var t,r=e.length-1,n,s=new Array(r),i=new Array(r),l=new Array(r);for(s[0]=0,i[0]=2,l[0]=e[0]+2*e[1],t=1;t<r-1;++t)s[t]=1,i[t]=4,l[t]=4*e[t]+2*e[t+1];for(s[r-1]=2,i[r-1]=7,l[r-1]=8*e[r-1]+e[r],t=1;t<r;++t)n=s[t]/i[t-1],i[t]-=n,l[t]-=n*l[t-1];for(s[r-1]=l[r-1]/i[r-1],t=r-2;t>=0;--t)s[t]=(l[t]-s[t+1])/i[t];for(i[r-1]=(e[r]+s[r-1])/2,t=0;t<r-1;++t)i[t]=2*e[t+1]-s[t+1];return[s,i]}function TL(e){return new ZE(e)}function km(e,t){this._context=e,this._t=t}km.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var r=this._x*(1-this._t)+e*this._t;this._context.lineTo(r,this._y),this._context.lineTo(r,t)}break}}this._x=e,this._y=t}};function IL(e){return new km(e,.5)}function DL(e){return new km(e,0)}function RL(e){return new km(e,1)}function bc(e,t){if((l=e.length)>1)for(var r=1,n,s,i=e[t[0]],l,u=i.length;r<l;++r)for(s=i,i=e[t[r]],n=0;n<u;++n)i[n][1]+=i[n][0]=isNaN(s[n][1])?s[n][0]:s[n][1]}function o0(e){for(var t=e.length,r=new Array(t);--t>=0;)r[t]=t;return r}function $L(e,t){return e[t]}function ML(e){const t=[];return t.key=e,t}function FL(){var e=kr([]),t=o0,r=bc,n=$L;function s(i){var l=Array.from(e.apply(this,arguments),ML),u,d=l.length,m=-1,f;for(const p of i)for(u=0,++m;u<d;++u)(l[u][m]=[0,+n(p,l[u].key,m,i)]).data=p;for(u=0,f=kx(t(l));u<d;++u)l[f[u]].index=u;return r(l,f),l}return s.keys=function(i){return arguments.length?(e=typeof i=="function"?i:kr(Array.from(i)),s):e},s.value=function(i){return arguments.length?(n=typeof i=="function"?i:kr(+i),s):n},s.order=function(i){return arguments.length?(t=i==null?o0:typeof i=="function"?i:kr(Array.from(i)),s):t},s.offset=function(i){return arguments.length?(r=i??bc,s):r},s}function LL(e,t){if((n=e.length)>0){for(var r,n,s=0,i=e[0].length,l;s<i;++s){for(l=r=0;r<n;++r)l+=e[r][s][1]||0;if(l)for(r=0;r<n;++r)e[r][s][1]/=l}bc(e,t)}}function zL(e,t){if((s=e.length)>0){for(var r=0,n=e[t[0]],s,i=n.length;r<i;++r){for(var l=0,u=0;l<s;++l)u+=e[l][r][1]||0;n[r][1]+=n[r][0]=-u/2}bc(e,t)}}function UL(e,t){if(!(!((l=e.length)>0)||!((i=(s=e[t[0]]).length)>0))){for(var r=0,n=1,s,i,l;n<i;++n){for(var u=0,d=0,m=0;u<l;++u){for(var f=e[t[u]],p=f[n][1]||0,y=f[n-1][1]||0,x=(p-y)/2,w=0;w<u;++w){var b=e[t[w]],S=b[n][1]||0,_=b[n-1][1]||0;x+=S-_}d+=p,m+=x*p}s[n-1][1]+=s[n-1][0]=r,d&&(r-=m/d)}s[n-1][1]+=s[n-1][0]=r,bc(e,t)}}var Zg={},ey={},QS;function BL(){return QS||(QS=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r==="__proto__"}e.isUnsafeProperty=t})(ey)),ey}var ty={},ZS;function eA(){return ZS||(ZS=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){switch(typeof r){case"number":case"symbol":return!1;case"string":return r.includes(".")||r.includes("[")||r.includes("]")}}e.isDeepKey=t})(ty)),ty}var ry={},ek;function Nx(){return ek||(ek=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){var n;return typeof r=="string"||typeof r=="symbol"?r:Object.is((n=r==null?void 0:r.valueOf)==null?void 0:n.call(r),-0)?"-0":String(r)}e.toKey=t})(ry)),ry}var ny={},sy={},tk;function WL(){return tk||(tk=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){if(r==null)return"";if(typeof r=="string")return r;if(Array.isArray(r))return r.map(t).join(",");const n=String(r);return n==="0"&&Object.is(Number(r),-0)?"-0":n}e.toString=t})(sy)),sy}var rk;function Cx(){return rk||(rk=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=WL(),r=Nx();function n(s){if(Array.isArray(s))return s.map(r.toKey);if(typeof s=="symbol")return[s];s=t.toString(s);const i=[],l=s.length;if(l===0)return i;let u=0,d="",m="",f=!1;for(s.charCodeAt(0)===46&&(i.push(""),u++);u<l;){const p=s[u];m?p==="\\"&&u+1<l?(u++,d+=s[u]):p===m?m="":d+=p:f?p==='"'||p==="'"?m=p:p==="]"?(f=!1,i.push(d),d=""):d+=p:p==="["?(f=!0,d&&(i.push(d),d="")):p==="."?d&&(i.push(d),d=""):d+=p,u++}return d&&i.push(d),i}e.toPath=n})(ny)),ny}var nk;function Ex(){return nk||(nk=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=BL(),r=eA(),n=Nx(),s=Cx();function i(u,d,m){if(u==null)return m;switch(typeof d){case"string":{if(t.isUnsafeProperty(d))return m;const f=u[d];return f===void 0?r.isDeepKey(d)?i(u,s.toPath(d),m):m:f}case"number":case"symbol":{typeof d=="number"&&(d=n.toKey(d));const f=u[d];return f===void 0?m:f}default:{if(Array.isArray(d))return l(u,d,m);if(Object.is(d==null?void 0:d.valueOf(),-0)?d="-0":d=String(d),t.isUnsafeProperty(d))return m;const f=u[d];return f===void 0?m:f}}}function l(u,d,m){if(d.length===0)return m;let f=u;for(let p=0;p<d.length;p++){if(f==null||t.isUnsafeProperty(d[p]))return m;f=f[d[p]]}return f===void 0?m:f}e.get=i})(Zg)),Zg}var iy,sk;function VL(){return sk||(sk=1,iy=Ex().get),iy}var qL=VL();const jc=Ui(qL);var Zs=e=>e===0?0:e>0?1:-1,ra=e=>typeof e=="number"&&e!=+e,Oa=e=>typeof e=="string"&&e.indexOf("%")===e.length-1,vt=e=>(typeof e=="number"||e instanceof Number)&&!ra(e),na=e=>vt(e)||typeof e=="string",HL=0,Qu=e=>{var t=++HL;return"".concat(e||"").concat(t)},zi=function(t,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!vt(t)&&typeof t!="string")return n;var i;if(Oa(t)){if(r==null)return n;var l=t.indexOf("%");i=r*parseFloat(t.slice(0,l))/100}else i=+t;return ra(i)&&(i=n),s&&r!=null&&i>r&&(i=r),i},tA=e=>{if(!Array.isArray(e))return!1;for(var t=e.length,r={},n=0;n<t;n++)if(!r[e[n]])r[e[n]]=!0;else return!0;return!1};function Jn(e,t,r){return vt(e)&&vt(t)?e+r*(t-e):t}function KL(e,t,r){if(!(!e||!e.length))return e.find(n=>n&&(typeof t=="function"?t(n):jc(n,t))===r)}var Un=e=>e===null||typeof e>"u",yd=e=>Un(e)?e:"".concat(e.charAt(0).toUpperCase()).concat(e.slice(1));function GL(e){return e!=null}function Fc(){}var YL=["type","size","sizeType"];function l0(){return l0=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},l0.apply(null,arguments)}function ik(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function ak(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?ik(Object(r),!0).forEach(function(n){JL(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ik(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function JL(e,t,r){return(t=XL(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function XL(e){var t=QL(e,"string");return typeof t=="symbol"?t:t+""}function QL(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function ZL(e,t){if(e==null)return{};var r,n,s=ez(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function ez(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var rA={symbolCircle:_x,symbolCross:mL,symbolDiamond:gL,symbolSquare:yL,symbolStar:bL,symbolTriangle:jL,symbolWye:kL},tz=Math.PI/180,rz=e=>{var t="symbol".concat(yd(e));return rA[t]||_x},nz=(e,t,r)=>{if(t==="area")return e;switch(r){case"cross":return 5*e*e/9;case"diamond":return .5*e*e/Math.sqrt(3);case"square":return e*e;case"star":{var n=18*tz;return 1.25*e*e*(Math.tan(n)-Math.tan(n*2)*Math.tan(n)**2)}case"triangle":return Math.sqrt(3)*e*e/4;case"wye":return(21-10*Math.sqrt(3))*e*e/8;default:return Math.PI*e*e/4}},sz=(e,t)=>{rA["symbol".concat(yd(e))]=t},nA=e=>{var{type:t="circle",size:r=64,sizeType:n="area"}=e,s=ZL(e,YL),i=ak(ak({},s),{},{type:t,size:r,sizeType:n}),l="circle";typeof t=="string"&&(l=t);var u=()=>{var y=rz(l),x=_L().type(y).size(nz(r,n,l)),w=x();if(w!==null)return w},{className:d,cx:m,cy:f}=i,p=yi(i);return vt(m)&&vt(f)&&vt(r)?v.createElement("path",l0({},p,{className:Tr("recharts-symbols",d),transform:"translate(".concat(m,", ").concat(f,")"),d:u()})):null};nA.registerSymbol=sz;var sA=e=>"radius"in e&&"startAngle"in e&&"endAngle"in e,iz=(e,t)=>{if(!e||typeof e=="function"||typeof e=="boolean")return null;var r=e;if(v.isValidElement(e)&&(r=e.props),typeof r!="object"&&typeof r!="function")return null;var n={};return Object.keys(r).forEach(s=>{bx(s)&&(n[s]=(i=>r[s](r,i)))}),n},az=(e,t,r)=>n=>(e(t,r,n),null),Ax=(e,t,r)=>{if(e===null||typeof e!="object"&&typeof e!="function")return null;var n=null;return Object.keys(e).forEach(s=>{var i=e[s];bx(s)&&typeof i=="function"&&(n||(n={}),n[s]=az(i,t,r))}),n};function ok(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function oz(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?ok(Object(r),!0).forEach(function(n){lz(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ok(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function lz(e,t,r){return(t=cz(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function cz(e){var t=uz(e,"string");return typeof t=="symbol"?t:t+""}function uz(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function wi(e,t){var r=oz({},e),n=t,s=Object.keys(t),i=s.reduce((l,u)=>(l[u]===void 0&&n[u]!==void 0&&(l[u]=n[u]),l),r);return i}var ay={},oy={},lk;function dz(){return lk||(lk=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r,n){const s=new Map;for(let i=0;i<r.length;i++){const l=r[i],u=n(l);s.has(u)||s.set(u,l)}return Array.from(s.values())}e.uniqBy=t})(oy)),oy}var ly={},ck;function iA(){return ck||(ck=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r}e.identity=t})(ly)),ly}var cy={},uy={},dy={},uk;function fz(){return uk||(uk=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return Number.isSafeInteger(r)&&r>=0}e.isLength=t})(dy)),dy}var dk;function Px(){return dk||(dk=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=fz();function r(n){return n!=null&&typeof n!="function"&&t.isLength(n.length)}e.isArrayLike=r})(uy)),uy}var fy={},fk;function hz(){return fk||(fk=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return typeof r=="object"&&r!==null}e.isObjectLike=t})(fy)),fy}var hk;function mz(){return hk||(hk=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Px(),r=hz();function n(s){return r.isObjectLike(s)&&t.isArrayLike(s)}e.isArrayLikeObject=n})(cy)),cy}var hy={},my={},mk;function pz(){return mk||(mk=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Ex();function r(n){return function(s){return t.get(s,n)}}e.property=r})(my)),my}var py={},gy={},yy={},vy={},pk;function aA(){return pk||(pk=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r!==null&&(typeof r=="object"||typeof r=="function")}e.isObject=t})(vy)),vy}var xy={},gk;function oA(){return gk||(gk=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r==null||typeof r!="object"&&typeof r!="function"}e.isPrimitive=t})(xy)),xy}var wy={},yk;function lA(){return yk||(yk=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r,n){return r===n||Number.isNaN(r)&&Number.isNaN(n)}e.eq=t})(wy)),wy}var vk;function gz(){return vk||(vk=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=aA(),r=oA(),n=lA();function s(f,p,y){return typeof y!="function"?s(f,p,()=>{}):i(f,p,function x(w,b,S,_,E,C){const O=y(w,b,S,_,E,C);return O!==void 0?!!O:i(w,b,x,C)},new Map)}function i(f,p,y,x){if(p===f)return!0;switch(typeof p){case"object":return l(f,p,y,x);case"function":return Object.keys(p).length>0?i(f,{...p},y,x):n.eq(f,p);default:return t.isObject(f)?typeof p=="string"?p==="":!0:n.eq(f,p)}}function l(f,p,y,x){if(p==null)return!0;if(Array.isArray(p))return d(f,p,y,x);if(p instanceof Map)return u(f,p,y,x);if(p instanceof Set)return m(f,p,y,x);const w=Object.keys(p);if(f==null)return w.length===0;if(w.length===0)return!0;if(x!=null&&x.has(p))return x.get(p)===f;x==null||x.set(p,f);try{for(let b=0;b<w.length;b++){const S=w[b];if(!r.isPrimitive(f)&&!(S in f)||p[S]===void 0&&f[S]!==void 0||p[S]===null&&f[S]!==null||!y(f[S],p[S],S,f,p,x))return!1}return!0}finally{x==null||x.delete(p)}}function u(f,p,y,x){if(p.size===0)return!0;if(!(f instanceof Map))return!1;for(const[w,b]of p.entries()){const S=f.get(w);if(y(S,b,w,f,p,x)===!1)return!1}return!0}function d(f,p,y,x){if(p.length===0)return!0;if(!Array.isArray(f))return!1;const w=new Set;for(let b=0;b<p.length;b++){const S=p[b];let _=!1;for(let E=0;E<f.length;E++){if(w.has(E))continue;const C=f[E];let O=!1;if(y(C,S,b,f,p,x)&&(O=!0),O){w.add(E),_=!0;break}}if(!_)return!1}return!0}function m(f,p,y,x){return p.size===0?!0:f instanceof Set?d([...f],[...p],y,x):!1}e.isMatchWith=s,e.isSetMatch=m})(yy)),yy}var xk;function cA(){return xk||(xk=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=gz();function r(n,s){return t.isMatchWith(n,s,()=>{})}e.isMatch=r})(gy)),gy}var by={},jy={},Sy={},wk;function yz(){return wk||(wk=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return Object.getOwnPropertySymbols(r).filter(n=>Object.prototype.propertyIsEnumerable.call(r,n))}e.getSymbols=t})(Sy)),Sy}var ky={},bk;function uA(){return bk||(bk=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r==null?r===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(r)}e.getTag=t})(ky)),ky}var _y={},jk;function dA(){return jk||(jk=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t="[object RegExp]",r="[object String]",n="[object Number]",s="[object Boolean]",i="[object Arguments]",l="[object Symbol]",u="[object Date]",d="[object Map]",m="[object Set]",f="[object Array]",p="[object Function]",y="[object ArrayBuffer]",x="[object Object]",w="[object Error]",b="[object DataView]",S="[object Uint8Array]",_="[object Uint8ClampedArray]",E="[object Uint16Array]",C="[object Uint32Array]",O="[object BigUint64Array]",T="[object Int8Array]",P="[object Int16Array]",F="[object Int32Array]",H="[object BigInt64Array]",L="[object Float32Array]",q="[object Float64Array]";e.argumentsTag=i,e.arrayBufferTag=y,e.arrayTag=f,e.bigInt64ArrayTag=H,e.bigUint64ArrayTag=O,e.booleanTag=s,e.dataViewTag=b,e.dateTag=u,e.errorTag=w,e.float32ArrayTag=L,e.float64ArrayTag=q,e.functionTag=p,e.int16ArrayTag=P,e.int32ArrayTag=F,e.int8ArrayTag=T,e.mapTag=d,e.numberTag=n,e.objectTag=x,e.regexpTag=t,e.setTag=m,e.stringTag=r,e.symbolTag=l,e.uint16ArrayTag=E,e.uint32ArrayTag=C,e.uint8ArrayTag=S,e.uint8ClampedArrayTag=_})(_y)),_y}var Ny={},Sk;function vz(){return Sk||(Sk=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return ArrayBuffer.isView(r)&&!(r instanceof DataView)}e.isTypedArray=t})(Ny)),Ny}var kk;function fA(){return kk||(kk=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=yz(),r=uA(),n=dA(),s=oA(),i=vz();function l(f,p){return u(f,void 0,f,new Map,p)}function u(f,p,y,x=new Map,w=void 0){const b=w==null?void 0:w(f,p,y,x);if(b!==void 0)return b;if(s.isPrimitive(f))return f;if(x.has(f))return x.get(f);if(Array.isArray(f)){const S=new Array(f.length);x.set(f,S);for(let _=0;_<f.length;_++)S[_]=u(f[_],_,y,x,w);return Object.hasOwn(f,"index")&&(S.index=f.index),Object.hasOwn(f,"input")&&(S.input=f.input),S}if(f instanceof Date)return new Date(f.getTime());if(f instanceof RegExp){const S=new RegExp(f.source,f.flags);return S.lastIndex=f.lastIndex,S}if(f instanceof Map){const S=new Map;x.set(f,S);for(const[_,E]of f)S.set(_,u(E,_,y,x,w));return S}if(f instanceof Set){const S=new Set;x.set(f,S);for(const _ of f)S.add(u(_,void 0,y,x,w));return S}if(typeof Buffer<"u"&&Buffer.isBuffer(f))return f.subarray();if(i.isTypedArray(f)){const S=new(Object.getPrototypeOf(f)).constructor(f.length);x.set(f,S);for(let _=0;_<f.length;_++)S[_]=u(f[_],_,y,x,w);return S}if(f instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&f instanceof SharedArrayBuffer)return f.slice(0);if(f instanceof DataView){const S=new DataView(f.buffer.slice(0),f.byteOffset,f.byteLength);return x.set(f,S),d(S,f,y,x,w),S}if(typeof File<"u"&&f instanceof File){const S=new File([f],f.name,{type:f.type});return x.set(f,S),d(S,f,y,x,w),S}if(typeof Blob<"u"&&f instanceof Blob){const S=new Blob([f],{type:f.type});return x.set(f,S),d(S,f,y,x,w),S}if(f instanceof Error){const S=new f.constructor;return x.set(f,S),S.message=f.message,S.name=f.name,S.stack=f.stack,S.cause=f.cause,d(S,f,y,x,w),S}if(f instanceof Boolean){const S=new Boolean(f.valueOf());return x.set(f,S),d(S,f,y,x,w),S}if(f instanceof Number){const S=new Number(f.valueOf());return x.set(f,S),d(S,f,y,x,w),S}if(f instanceof String){const S=new String(f.valueOf());return x.set(f,S),d(S,f,y,x,w),S}if(typeof f=="object"&&m(f)){const S=Object.create(Object.getPrototypeOf(f));return x.set(f,S),d(S,f,y,x,w),S}return f}function d(f,p,y=f,x,w){const b=[...Object.keys(p),...t.getSymbols(p)];for(let S=0;S<b.length;S++){const _=b[S],E=Object.getOwnPropertyDescriptor(f,_);(E==null||E.writable)&&(f[_]=u(p[_],_,y,x,w))}}function m(f){switch(r.getTag(f)){case n.argumentsTag:case n.arrayTag:case n.arrayBufferTag:case n.dataViewTag:case n.booleanTag:case n.dateTag:case n.float32ArrayTag:case n.float64ArrayTag:case n.int8ArrayTag:case n.int16ArrayTag:case n.int32ArrayTag:case n.mapTag:case n.numberTag:case n.objectTag:case n.regexpTag:case n.setTag:case n.stringTag:case n.symbolTag:case n.uint8ArrayTag:case n.uint8ClampedArrayTag:case n.uint16ArrayTag:case n.uint32ArrayTag:return!0;default:return!1}}e.cloneDeepWith=l,e.cloneDeepWithImpl=u,e.copyProperties=d})(jy)),jy}var _k;function xz(){return _k||(_k=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=fA();function r(n){return t.cloneDeepWithImpl(n,void 0,n,new Map,void 0)}e.cloneDeep=r})(by)),by}var Nk;function wz(){return Nk||(Nk=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=cA(),r=xz();function n(s){return s=r.cloneDeep(s),i=>t.isMatch(i,s)}e.matches=n})(py)),py}var Cy={},Ey={},Ay={},Ck;function bz(){return Ck||(Ck=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=fA(),r=dA();function n(s,i){return t.cloneDeepWith(s,(l,u,d,m)=>{const f=i==null?void 0:i(l,u,d,m);if(f!==void 0)return f;if(typeof s=="object")switch(Object.prototype.toString.call(s)){case r.numberTag:case r.stringTag:case r.booleanTag:{const p=new s.constructor(s==null?void 0:s.valueOf());return t.copyProperties(p,s),p}case r.argumentsTag:{const p={};return t.copyProperties(p,s),p.length=s.length,p[Symbol.iterator]=s[Symbol.iterator],p}default:return}})}e.cloneDeepWith=n})(Ay)),Ay}var Ek;function jz(){return Ek||(Ek=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=bz();function r(n){return t.cloneDeepWith(n)}e.cloneDeep=r})(Ey)),Ey}var Py={},Oy={},Ak;function hA(){return Ak||(Ak=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=/^(?:0|[1-9]\d*)$/;function r(n,s=Number.MAX_SAFE_INTEGER){switch(typeof n){case"number":return Number.isInteger(n)&&n>=0&&n<s;case"symbol":return!1;case"string":return t.test(n)}}e.isIndex=r})(Oy)),Oy}var Ty={},Pk;function Sz(){return Pk||(Pk=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=uA();function r(n){return n!==null&&typeof n=="object"&&t.getTag(n)==="[object Arguments]"}e.isArguments=r})(Ty)),Ty}var Ok;function kz(){return Ok||(Ok=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=eA(),r=hA(),n=Sz(),s=Cx();function i(l,u){let d;if(Array.isArray(u)?d=u:typeof u=="string"&&t.isDeepKey(u)&&(l==null?void 0:l[u])==null?d=s.toPath(u):d=[u],d.length===0)return!1;let m=l;for(let f=0;f<d.length;f++){const p=d[f];if((m==null||!Object.hasOwn(m,p))&&!((Array.isArray(m)||n.isArguments(m))&&r.isIndex(p)&&p<m.length))return!1;m=m[p]}return!0}e.has=i})(Py)),Py}var Tk;function _z(){return Tk||(Tk=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=cA(),r=Nx(),n=jz(),s=Ex(),i=kz();function l(u,d){switch(typeof u){case"object":{Object.is(u==null?void 0:u.valueOf(),-0)&&(u="-0");break}case"number":{u=r.toKey(u);break}}return d=n.cloneDeep(d),function(m){const f=s.get(m,u);return f===void 0?i.has(m,u):d===void 0?f===void 0:t.isMatch(f,d)}}e.matchesProperty=l})(Cy)),Cy}var Ik;function Nz(){return Ik||(Ik=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=iA(),r=pz(),n=wz(),s=_z();function i(l){if(l==null)return t.identity;switch(typeof l){case"function":return l;case"object":return Array.isArray(l)&&l.length===2?s.matchesProperty(l[0],l[1]):n.matches(l);case"string":case"symbol":case"number":return r.property(l)}}e.iteratee=i})(hy)),hy}var Dk;function Cz(){return Dk||(Dk=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=dz(),r=iA(),n=mz(),s=Nz();function i(l,u=r.identity){return n.isArrayLikeObject(l)?t.uniqBy(Array.from(l),s.iteratee(u)):[]}e.uniqBy=i})(ay)),ay}var Iy,Rk;function Ez(){return Rk||(Rk=1,Iy=Cz().uniqBy),Iy}var Az=Ez();const $k=Ui(Az);function Pz(e,t,r){return t===!0?$k(e,r):typeof t=="function"?$k(e,t):e}var Dy={exports:{}},Ry={},$y={exports:{}},My={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Mk;function Oz(){if(Mk)return My;Mk=1;var e=Pc();function t(p,y){return p===y&&(p!==0||1/p===1/y)||p!==p&&y!==y}var r=typeof Object.is=="function"?Object.is:t,n=e.useState,s=e.useEffect,i=e.useLayoutEffect,l=e.useDebugValue;function u(p,y){var x=y(),w=n({inst:{value:x,getSnapshot:y}}),b=w[0].inst,S=w[1];return i(function(){b.value=x,b.getSnapshot=y,d(b)&&S({inst:b})},[p,x,y]),s(function(){return d(b)&&S({inst:b}),p(function(){d(b)&&S({inst:b})})},[p]),l(x),x}function d(p){var y=p.getSnapshot;p=p.value;try{var x=y();return!r(p,x)}catch{return!0}}function m(p,y){return y()}var f=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?m:u;return My.useSyncExternalStore=e.useSyncExternalStore!==void 0?e.useSyncExternalStore:f,My}var Fk;function Tz(){return Fk||(Fk=1,$y.exports=Oz()),$y.exports}/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Lk;function Iz(){if(Lk)return Ry;Lk=1;var e=Pc(),t=Tz();function r(m,f){return m===f&&(m!==0||1/m===1/f)||m!==m&&f!==f}var n=typeof Object.is=="function"?Object.is:r,s=t.useSyncExternalStore,i=e.useRef,l=e.useEffect,u=e.useMemo,d=e.useDebugValue;return Ry.useSyncExternalStoreWithSelector=function(m,f,p,y,x){var w=i(null);if(w.current===null){var b={hasValue:!1,value:null};w.current=b}else b=w.current;w=u(function(){function _(P){if(!E){if(E=!0,C=P,P=y(P),x!==void 0&&b.hasValue){var F=b.value;if(x(F,P))return O=F}return O=P}if(F=O,n(C,P))return F;var H=y(P);return x!==void 0&&x(F,H)?(C=P,F):(C=P,O=H)}var E=!1,C,O,T=p===void 0?null:p;return[function(){return _(f())},T===null?void 0:function(){return _(T())}]},[f,p,y,x]);var S=s(m,w[0],w[1]);return l(function(){b.hasValue=!0,b.value=S},[S]),d(S),S},Ry}var zk;function Dz(){return zk||(zk=1,Dy.exports=Iz()),Dy.exports}var Rz=Dz(),Ox=v.createContext(null),$z=e=>e,rn=()=>{var e=v.useContext(Ox);return e?e.store.dispatch:$z},nh=()=>{},Mz=()=>nh,Fz=(e,t)=>e===t;function dt(e){var t=v.useContext(Ox);return Rz.useSyncExternalStoreWithSelector(t?t.subscription.addNestedSub:Mz,t?t.store.getState:nh,t?t.store.getState:nh,t?e:nh,Fz)}function Lz(e,t=`expected a function, instead received ${typeof e}`){if(typeof e!="function")throw new TypeError(t)}function zz(e,t=`expected an object, instead received ${typeof e}`){if(typeof e!="object")throw new TypeError(t)}function Uz(e,t="expected all items to be functions, instead received the following types: "){if(!e.every(r=>typeof r=="function")){const r=e.map(n=>typeof n=="function"?`function ${n.name||"unnamed"}()`:typeof n).join(", ");throw new TypeError(`${t}[${r}]`)}}var Uk=e=>Array.isArray(e)?e:[e];function Bz(e){const t=Array.isArray(e[0])?e[0]:e;return Uz(t,"createSelector expects all input-selectors to be functions, but received the following types: "),t}function Wz(e,t){const r=[],{length:n}=e;for(let s=0;s<n;s++)r.push(e[s].apply(null,t));return r}var Vz=class{constructor(e){this.value=e}deref(){return this.value}},qz=typeof WeakRef<"u"?WeakRef:Vz,Hz=0,Bk=1;function Rf(){return{s:Hz,v:void 0,o:null,p:null}}function mA(e,t={}){let r=Rf();const{resultEqualityCheck:n}=t;let s,i=0;function l(){var p;let u=r;const{length:d}=arguments;for(let y=0,x=d;y<x;y++){const w=arguments[y];if(typeof w=="function"||typeof w=="object"&&w!==null){let b=u.o;b===null&&(u.o=b=new WeakMap);const S=b.get(w);S===void 0?(u=Rf(),b.set(w,u)):u=S}else{let b=u.p;b===null&&(u.p=b=new Map);const S=b.get(w);S===void 0?(u=Rf(),b.set(w,u)):u=S}}const m=u;let f;if(u.s===Bk)f=u.v;else if(f=e.apply(null,arguments),i++,n){const y=((p=s==null?void 0:s.deref)==null?void 0:p.call(s))??s;y!=null&&n(y,f)&&(f=y,i!==0&&i--),s=typeof f=="object"&&f!==null||typeof f=="function"?new qz(f):f}return m.s=Bk,m.v=f,f}return l.clearCache=()=>{r=Rf(),l.resetResultsCount()},l.resultsCount=()=>i,l.resetResultsCount=()=>{i=0},l}function Kz(e,...t){const r=typeof e=="function"?{memoize:e,memoizeOptions:t}:e,n=(...s)=>{let i=0,l=0,u,d={},m=s.pop();typeof m=="object"&&(d=m,m=s.pop()),Lz(m,`createSelector expects an output function after the inputs, but received: [${typeof m}]`);const f={...r,...d},{memoize:p,memoizeOptions:y=[],argsMemoize:x=mA,argsMemoizeOptions:w=[]}=f,b=Uk(y),S=Uk(w),_=Bz(s),E=p(function(){return i++,m.apply(null,arguments)},...b),C=x(function(){l++;const T=Wz(_,arguments);return u=E.apply(null,T),u},...S);return Object.assign(C,{resultFunc:m,memoizedResultFunc:E,dependencies:_,dependencyRecomputations:()=>l,resetDependencyRecomputations:()=>{l=0},lastResult:()=>u,recomputations:()=>i,resetRecomputations:()=>{i=0},memoize:p,argsMemoize:x})};return Object.assign(n,{withTypes:()=>n}),n}var ge=Kz(mA),Gz=Object.assign((e,t=ge)=>{zz(e,`createStructuredSelector expects first argument to be an object where each property is a selector, instead received a ${typeof e}`);const r=Object.keys(e),n=r.map(i=>e[i]);return t(n,(...i)=>i.reduce((l,u,d)=>(l[r[d]]=u,l),{}))},{withTypes:()=>Gz}),Fy={},Ly={},zy={},Wk;function Yz(){return Wk||(Wk=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return typeof n=="symbol"?1:n===null?2:n===void 0?3:n!==n?4:0}const r=(n,s,i)=>{if(n!==s){const l=t(n),u=t(s);if(l===u&&l===0){if(n<s)return i==="desc"?1:-1;if(n>s)return i==="desc"?-1:1}return i==="desc"?u-l:l-u}return 0};e.compareValues=r})(zy)),zy}var Uy={},By={},Vk;function pA(){return Vk||(Vk=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return typeof r=="symbol"||r instanceof Symbol}e.isSymbol=t})(By)),By}var qk;function Jz(){return qk||(qk=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=pA(),r=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,n=/^\w*$/;function s(i,l){return Array.isArray(i)?!1:typeof i=="number"||typeof i=="boolean"||i==null||t.isSymbol(i)?!0:typeof i=="string"&&(n.test(i)||!r.test(i))||l!=null&&Object.hasOwn(l,i)}e.isKey=s})(Uy)),Uy}var Hk;function Xz(){return Hk||(Hk=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Yz(),r=Jz(),n=Cx();function s(i,l,u,d){if(i==null)return[];u=d?void 0:u,Array.isArray(i)||(i=Object.values(i)),Array.isArray(l)||(l=l==null?[null]:[l]),l.length===0&&(l=[null]),Array.isArray(u)||(u=u==null?[]:[u]),u=u.map(x=>String(x));const m=(x,w)=>{let b=x;for(let S=0;S<w.length&&b!=null;++S)b=b[w[S]];return b},f=(x,w)=>w==null||x==null?w:typeof x=="object"&&"key"in x?Object.hasOwn(w,x.key)?w[x.key]:m(w,x.path):typeof x=="function"?x(w):Array.isArray(x)?m(w,x):typeof w=="object"?w[x]:w,p=l.map(x=>(Array.isArray(x)&&x.length===1&&(x=x[0]),x==null||typeof x=="function"||Array.isArray(x)||r.isKey(x)?x:{key:x,path:n.toPath(x)}));return i.map(x=>({original:x,criteria:p.map(w=>f(w,x))})).slice().sort((x,w)=>{for(let b=0;b<p.length;b++){const S=t.compareValues(x.criteria[b],w.criteria[b],u[b]);if(S!==0)return S}return 0}).map(x=>x.original)}e.orderBy=s})(Ly)),Ly}var Wy={},Kk;function Qz(){return Kk||(Kk=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r,n=1){const s=[],i=Math.floor(n),l=(u,d)=>{for(let m=0;m<u.length;m++){const f=u[m];Array.isArray(f)&&d<i?l(f,d+1):s.push(f)}};return l(r,0),s}e.flatten=t})(Wy)),Wy}var Vy={},Gk;function gA(){return Gk||(Gk=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=hA(),r=Px(),n=aA(),s=lA();function i(l,u,d){return n.isObject(d)&&(typeof u=="number"&&r.isArrayLike(d)&&t.isIndex(u)&&u<d.length||typeof u=="string"&&u in d)?s.eq(d[u],l):!1}e.isIterateeCall=i})(Vy)),Vy}var Yk;function Zz(){return Yk||(Yk=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Xz(),r=Qz(),n=gA();function s(i,...l){const u=l.length;return u>1&&n.isIterateeCall(i,l[0],l[1])?l=[]:u>2&&n.isIterateeCall(l[0],l[1],l[2])&&(l=[l[0]]),t.orderBy(i,r.flatten(l),["asc"])}e.sortBy=s})(Fy)),Fy}var qy,Jk;function eU(){return Jk||(Jk=1,qy=Zz().sortBy),qy}var tU=eU();const _m=Ui(tU);var yA=e=>e.legend.settings,rU=e=>e.legend.size,nU=e=>e.legend.payload;ge([nU,yA],(e,t)=>{var{itemSorter:r}=t,n=e.flat(1);return r?_m(n,r):n});var $f=1;function sU(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],[t,r]=v.useState({height:0,left:0,top:0,width:0}),n=v.useCallback(s=>{if(s!=null){var i=s.getBoundingClientRect(),l={height:i.height,left:i.left,top:i.top,width:i.width};(Math.abs(l.height-t.height)>$f||Math.abs(l.left-t.left)>$f||Math.abs(l.top-t.top)>$f||Math.abs(l.width-t.width)>$f)&&r({height:l.height,left:l.left,top:l.top,width:l.width})}},[t.width,t.height,t.top,t.left,...e]);return[t,n]}function Yn(e){return`Minified Redux error #${e}; visit https://redux.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var iU=typeof Symbol=="function"&&Symbol.observable||"@@observable",Xk=iU,Hy=()=>Math.random().toString(36).substring(7).split("").join("."),aU={INIT:`@@redux/INIT${Hy()}`,REPLACE:`@@redux/REPLACE${Hy()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${Hy()}`},Ch=aU;function Tx(e){if(typeof e!="object"||e===null)return!1;let t=e;for(;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t||Object.getPrototypeOf(e)===null}function vA(e,t,r){if(typeof e!="function")throw new Error(Yn(2));if(typeof t=="function"&&typeof r=="function"||typeof r=="function"&&typeof arguments[3]=="function")throw new Error(Yn(0));if(typeof t=="function"&&typeof r>"u"&&(r=t,t=void 0),typeof r<"u"){if(typeof r!="function")throw new Error(Yn(1));return r(vA)(e,t)}let n=e,s=t,i=new Map,l=i,u=0,d=!1;function m(){l===i&&(l=new Map,i.forEach((S,_)=>{l.set(_,S)}))}function f(){if(d)throw new Error(Yn(3));return s}function p(S){if(typeof S!="function")throw new Error(Yn(4));if(d)throw new Error(Yn(5));let _=!0;m();const E=u++;return l.set(E,S),function(){if(_){if(d)throw new Error(Yn(6));_=!1,m(),l.delete(E),i=null}}}function y(S){if(!Tx(S))throw new Error(Yn(7));if(typeof S.type>"u")throw new Error(Yn(8));if(typeof S.type!="string")throw new Error(Yn(17));if(d)throw new Error(Yn(9));try{d=!0,s=n(s,S)}finally{d=!1}return(i=l).forEach(E=>{E()}),S}function x(S){if(typeof S!="function")throw new Error(Yn(10));n=S,y({type:Ch.REPLACE})}function w(){const S=p;return{subscribe(_){if(typeof _!="object"||_===null)throw new Error(Yn(11));function E(){const O=_;O.next&&O.next(f())}return E(),{unsubscribe:S(E)}},[Xk](){return this}}}return y({type:Ch.INIT}),{dispatch:y,subscribe:p,getState:f,replaceReducer:x,[Xk]:w}}function oU(e){Object.keys(e).forEach(t=>{const r=e[t];if(typeof r(void 0,{type:Ch.INIT})>"u")throw new Error(Yn(12));if(typeof r(void 0,{type:Ch.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(Yn(13))})}function xA(e){const t=Object.keys(e),r={};for(let i=0;i<t.length;i++){const l=t[i];typeof e[l]=="function"&&(r[l]=e[l])}const n=Object.keys(r);let s;try{oU(r)}catch(i){s=i}return function(l={},u){if(s)throw s;let d=!1;const m={};for(let f=0;f<n.length;f++){const p=n[f],y=r[p],x=l[p],w=y(x,u);if(typeof w>"u")throw u&&u.type,new Error(Yn(14));m[p]=w,d=d||w!==x}return d=d||n.length!==Object.keys(l).length,d?m:l}}function Eh(...e){return e.length===0?t=>t:e.length===1?e[0]:e.reduce((t,r)=>(...n)=>t(r(...n)))}function lU(...e){return t=>(r,n)=>{const s=t(r,n);let i=()=>{throw new Error(Yn(15))};const l={getState:s.getState,dispatch:(d,...m)=>i(d,...m)},u=e.map(d=>d(l));return i=Eh(...u)(s.dispatch),{...s,dispatch:i}}}function wA(e){return Tx(e)&&"type"in e&&typeof e.type=="string"}var bA=Symbol.for("immer-nothing"),Qk=Symbol.for("immer-draftable"),ri=Symbol.for("immer-state");function $i(e,...t){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var Zu=Object.getPrototypeOf;function ll(e){return!!e&&!!e[ri]}function Ta(e){var t;return e?jA(e)||Array.isArray(e)||!!e[Qk]||!!((t=e.constructor)!=null&&t[Qk])||vd(e)||Cm(e):!1}var cU=Object.prototype.constructor.toString(),Zk=new WeakMap;function jA(e){if(!e||typeof e!="object")return!1;const t=Object.getPrototypeOf(e);if(t===null||t===Object.prototype)return!0;const r=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;if(r===Object)return!0;if(typeof r!="function")return!1;let n=Zk.get(r);return n===void 0&&(n=Function.toString.call(r),Zk.set(r,n)),n===cU}function Ah(e,t,r=!0){Nm(e)===0?(r?Reflect.ownKeys(e):Object.keys(e)).forEach(s=>{t(s,e[s],e)}):e.forEach((n,s)=>t(s,n,e))}function Nm(e){const t=e[ri];return t?t.type_:Array.isArray(e)?1:vd(e)?2:Cm(e)?3:0}function c0(e,t){return Nm(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function SA(e,t,r){const n=Nm(e);n===2?e.set(t,r):n===3?e.add(r):e[t]=r}function uU(e,t){return e===t?e!==0||1/e===1/t:e!==e&&t!==t}function vd(e){return e instanceof Map}function Cm(e){return e instanceof Set}function Vo(e){return e.copy_||e.base_}function u0(e,t){if(vd(e))return new Map(e);if(Cm(e))return new Set(e);if(Array.isArray(e))return Array.prototype.slice.call(e);const r=jA(e);if(t===!0||t==="class_only"&&!r){const n=Object.getOwnPropertyDescriptors(e);delete n[ri];let s=Reflect.ownKeys(n);for(let i=0;i<s.length;i++){const l=s[i],u=n[l];u.writable===!1&&(u.writable=!0,u.configurable=!0),(u.get||u.set)&&(n[l]={configurable:!0,writable:!0,enumerable:u.enumerable,value:e[l]})}return Object.create(Zu(e),n)}else{const n=Zu(e);if(n!==null&&r)return{...e};const s=Object.create(n);return Object.assign(s,e)}}function Ix(e,t=!1){return Em(e)||ll(e)||!Ta(e)||(Nm(e)>1&&Object.defineProperties(e,{set:Mf,add:Mf,clear:Mf,delete:Mf}),Object.freeze(e),t&&Object.values(e).forEach(r=>Ix(r,!0))),e}function dU(){$i(2)}var Mf={value:dU};function Em(e){return e===null||typeof e!="object"?!0:Object.isFrozen(e)}var fU={};function cl(e){const t=fU[e];return t||$i(0,e),t}var ed;function kA(){return ed}function hU(e,t){return{drafts_:[],parent_:e,immer_:t,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function e_(e,t){t&&(cl("Patches"),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function d0(e){f0(e),e.drafts_.forEach(mU),e.drafts_=null}function f0(e){e===ed&&(ed=e.parent_)}function t_(e){return ed=hU(ed,e)}function mU(e){const t=e[ri];t.type_===0||t.type_===1?t.revoke_():t.revoked_=!0}function r_(e,t){t.unfinalizedDrafts_=t.drafts_.length;const r=t.drafts_[0];return e!==void 0&&e!==r?(r[ri].modified_&&(d0(t),$i(4)),Ta(e)&&(e=Ph(t,e),t.parent_||Oh(t,e)),t.patches_&&cl("Patches").generateReplacementPatches_(r[ri].base_,e,t.patches_,t.inversePatches_)):e=Ph(t,r,[]),d0(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==bA?e:void 0}function Ph(e,t,r){if(Em(t))return t;const n=e.immer_.shouldUseStrictIteration(),s=t[ri];if(!s)return Ah(t,(i,l)=>n_(e,s,t,i,l,r),n),t;if(s.scope_!==e)return t;if(!s.modified_)return Oh(e,s.base_,!0),s.base_;if(!s.finalized_){s.finalized_=!0,s.scope_.unfinalizedDrafts_--;const i=s.copy_;let l=i,u=!1;s.type_===3&&(l=new Set(i),i.clear(),u=!0),Ah(l,(d,m)=>n_(e,s,i,d,m,r,u),n),Oh(e,i,!1),r&&e.patches_&&cl("Patches").generatePatches_(s,r,e.patches_,e.inversePatches_)}return s.copy_}function n_(e,t,r,n,s,i,l){if(s==null||typeof s!="object"&&!l)return;const u=Em(s);if(!(u&&!l)){if(ll(s)){const d=i&&t&&t.type_!==3&&!c0(t.assigned_,n)?i.concat(n):void 0,m=Ph(e,s,d);if(SA(r,n,m),ll(m))e.canAutoFreeze_=!1;else return}else l&&r.add(s);if(Ta(s)&&!u){if(!e.immer_.autoFreeze_&&e.unfinalizedDrafts_<1||t&&t.base_&&t.base_[n]===s&&u)return;Ph(e,s),(!t||!t.scope_.parent_)&&typeof n!="symbol"&&(vd(r)?r.has(n):Object.prototype.propertyIsEnumerable.call(r,n))&&Oh(e,s)}}}function Oh(e,t,r=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&Ix(t,r)}function pU(e,t){const r=Array.isArray(e),n={type_:r?1:0,scope_:t?t.scope_:kA(),modified_:!1,finalized_:!1,assigned_:{},parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1};let s=n,i=Dx;r&&(s=[n],i=td);const{revoke:l,proxy:u}=Proxy.revocable(s,i);return n.draft_=u,n.revoke_=l,u}var Dx={get(e,t){if(t===ri)return e;const r=Vo(e);if(!c0(r,t))return gU(e,r,t);const n=r[t];return e.finalized_||!Ta(n)?n:n===Ky(e.base_,t)?(Gy(e),e.copy_[t]=m0(n,e)):n},has(e,t){return t in Vo(e)},ownKeys(e){return Reflect.ownKeys(Vo(e))},set(e,t,r){const n=_A(Vo(e),t);if(n!=null&&n.set)return n.set.call(e.draft_,r),!0;if(!e.modified_){const s=Ky(Vo(e),t),i=s==null?void 0:s[ri];if(i&&i.base_===r)return e.copy_[t]=r,e.assigned_[t]=!1,!0;if(uU(r,s)&&(r!==void 0||c0(e.base_,t)))return!0;Gy(e),h0(e)}return e.copy_[t]===r&&(r!==void 0||t in e.copy_)||Number.isNaN(r)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=r,e.assigned_[t]=!0),!0},deleteProperty(e,t){return Ky(e.base_,t)!==void 0||t in e.base_?(e.assigned_[t]=!1,Gy(e),h0(e)):delete e.assigned_[t],e.copy_&&delete e.copy_[t],!0},getOwnPropertyDescriptor(e,t){const r=Vo(e),n=Reflect.getOwnPropertyDescriptor(r,t);return n&&{writable:!0,configurable:e.type_!==1||t!=="length",enumerable:n.enumerable,value:r[t]}},defineProperty(){$i(11)},getPrototypeOf(e){return Zu(e.base_)},setPrototypeOf(){$i(12)}},td={};Ah(Dx,(e,t)=>{td[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}});td.deleteProperty=function(e,t){return td.set.call(this,e,t,void 0)};td.set=function(e,t,r){return Dx.set.call(this,e[0],t,r,e[0])};function Ky(e,t){const r=e[ri];return(r?Vo(r):e)[t]}function gU(e,t,r){var s;const n=_A(t,r);return n?"value"in n?n.value:(s=n.get)==null?void 0:s.call(e.draft_):void 0}function _A(e,t){if(!(t in e))return;let r=Zu(e);for(;r;){const n=Object.getOwnPropertyDescriptor(r,t);if(n)return n;r=Zu(r)}}function h0(e){e.modified_||(e.modified_=!0,e.parent_&&h0(e.parent_))}function Gy(e){e.copy_||(e.copy_=u0(e.base_,e.scope_.immer_.useStrictShallowCopy_))}var yU=class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.useStrictIteration_=!0,this.produce=(t,r,n)=>{if(typeof t=="function"&&typeof r!="function"){const i=r;r=t;const l=this;return function(d=i,...m){return l.produce(d,f=>r.call(this,f,...m))}}typeof r!="function"&&$i(6),n!==void 0&&typeof n!="function"&&$i(7);let s;if(Ta(t)){const i=t_(this),l=m0(t,void 0);let u=!0;try{s=r(l),u=!1}finally{u?d0(i):f0(i)}return e_(i,n),r_(s,i)}else if(!t||typeof t!="object"){if(s=r(t),s===void 0&&(s=t),s===bA&&(s=void 0),this.autoFreeze_&&Ix(s,!0),n){const i=[],l=[];cl("Patches").generateReplacementPatches_(t,s,i,l),n(i,l)}return s}else $i(1,t)},this.produceWithPatches=(t,r)=>{if(typeof t=="function")return(l,...u)=>this.produceWithPatches(l,d=>t(d,...u));let n,s;return[this.produce(t,r,(l,u)=>{n=l,s=u}),n,s]},typeof(e==null?void 0:e.autoFreeze)=="boolean"&&this.setAutoFreeze(e.autoFreeze),typeof(e==null?void 0:e.useStrictShallowCopy)=="boolean"&&this.setUseStrictShallowCopy(e.useStrictShallowCopy),typeof(e==null?void 0:e.useStrictIteration)=="boolean"&&this.setUseStrictIteration(e.useStrictIteration)}createDraft(e){Ta(e)||$i(8),ll(e)&&(e=Na(e));const t=t_(this),r=m0(e,void 0);return r[ri].isManual_=!0,f0(t),r}finishDraft(e,t){const r=e&&e[ri];(!r||!r.isManual_)&&$i(9);const{scope_:n}=r;return e_(n,t),r_(void 0,n)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}setUseStrictIteration(e){this.useStrictIteration_=e}shouldUseStrictIteration(){return this.useStrictIteration_}applyPatches(e,t){let r;for(r=t.length-1;r>=0;r--){const s=t[r];if(s.path.length===0&&s.op==="replace"){e=s.value;break}}r>-1&&(t=t.slice(r+1));const n=cl("Patches").applyPatches_;return ll(e)?n(e,t):this.produce(e,s=>n(s,t))}};function m0(e,t){const r=vd(e)?cl("MapSet").proxyMap_(e,t):Cm(e)?cl("MapSet").proxySet_(e,t):pU(e,t);return(t?t.scope_:kA()).drafts_.push(r),r}function Na(e){return ll(e)||$i(10,e),NA(e)}function NA(e){if(!Ta(e)||Em(e))return e;const t=e[ri];let r,n=!0;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,r=u0(e,t.scope_.immer_.useStrictShallowCopy_),n=t.scope_.immer_.shouldUseStrictIteration()}else r=u0(e,!0);return Ah(r,(s,i)=>{SA(r,s,NA(i))},n),t&&(t.finalized_=!1),r}var p0=new yU,CA=p0.produce,vU=p0.setUseStrictIteration.bind(p0);function EA(e){return({dispatch:r,getState:n})=>s=>i=>typeof i=="function"?i(r,n,e):s(i)}var xU=EA(),wU=EA,bU=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?Eh:Eh.apply(null,arguments)};function vi(e,t){function r(...n){if(t){let s=t(...n);if(!s)throw new Error(ti(0));return{type:e,payload:s.payload,..."meta"in s&&{meta:s.meta},..."error"in s&&{error:s.error}}}return{type:e,payload:n[0]}}return r.toString=()=>`${e}`,r.type=e,r.match=n=>wA(n)&&n.type===e,r}var AA=class Fu extends Array{constructor(...t){super(...t),Object.setPrototypeOf(this,Fu.prototype)}static get[Symbol.species](){return Fu}concat(...t){return super.concat.apply(this,t)}prepend(...t){return t.length===1&&Array.isArray(t[0])?new Fu(...t[0].concat(this)):new Fu(...t.concat(this))}};function s_(e){return Ta(e)?CA(e,()=>{}):e}function Ff(e,t,r){return e.has(t)?e.get(t):e.set(t,r(t)).get(t)}function jU(e){return typeof e=="boolean"}var SU=()=>function(t){const{thunk:r=!0,immutableCheck:n=!0,serializableCheck:s=!0,actionCreatorCheck:i=!0}=t??{};let l=new AA;return r&&(jU(r)?l.push(xU):l.push(wU(r.extraArgument))),l},PA="RTK_autoBatch",kn=()=>e=>({payload:e,meta:{[PA]:!0}}),i_=e=>t=>{setTimeout(t,e)},OA=(e={type:"raf"})=>t=>(...r)=>{const n=t(...r);let s=!0,i=!1,l=!1;const u=new Set,d=e.type==="tick"?queueMicrotask:e.type==="raf"?typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:i_(10):e.type==="callback"?e.queueNotification:i_(e.timeout),m=()=>{l=!1,i&&(i=!1,u.forEach(f=>f()))};return Object.assign({},n,{subscribe(f){const p=()=>s&&f(),y=n.subscribe(p);return u.add(f),()=>{y(),u.delete(f)}},dispatch(f){var p;try{return s=!((p=f==null?void 0:f.meta)!=null&&p[PA]),i=!s,i&&(l||(l=!0,d(m))),n.dispatch(f)}finally{s=!0}}})},kU=e=>function(r){const{autoBatch:n=!0}=r??{};let s=new AA(e);return n&&s.push(OA(typeof n=="object"?n:void 0)),s};function _U(e){const t=SU(),{reducer:r=void 0,middleware:n,devTools:s=!0,preloadedState:i=void 0,enhancers:l=void 0}=e||{};let u;if(typeof r=="function")u=r;else if(Tx(r))u=xA(r);else throw new Error(ti(1));let d;typeof n=="function"?d=n(t):d=t();let m=Eh;s&&(m=bU({trace:!1,...typeof s=="object"&&s}));const f=lU(...d),p=kU(f);let y=typeof l=="function"?l(p):p();const x=m(...y);return vA(u,i,x)}function TA(e){const t={},r=[];let n;const s={addCase(i,l){const u=typeof i=="string"?i:i.type;if(!u)throw new Error(ti(28));if(u in t)throw new Error(ti(29));return t[u]=l,s},addAsyncThunk(i,l){return l.pending&&(t[i.pending.type]=l.pending),l.rejected&&(t[i.rejected.type]=l.rejected),l.fulfilled&&(t[i.fulfilled.type]=l.fulfilled),l.settled&&r.push({matcher:i.settled,reducer:l.settled}),s},addMatcher(i,l){return r.push({matcher:i,reducer:l}),s},addDefaultCase(i){return n=i,s}};return e(s),[t,r,n]}vU(!1);function NU(e){return typeof e=="function"}function CU(e,t){let[r,n,s]=TA(t),i;if(NU(e))i=()=>s_(e());else{const u=s_(e);i=()=>u}function l(u=i(),d){let m=[r[d.type],...n.filter(({matcher:f})=>f(d)).map(({reducer:f})=>f)];return m.filter(f=>!!f).length===0&&(m=[s]),m.reduce((f,p)=>{if(p)if(ll(f)){const x=p(f,d);return x===void 0?f:x}else{if(Ta(f))return CA(f,y=>p(y,d));{const y=p(f,d);if(y===void 0){if(f===null)return f;throw Error("A case reducer on a non-draftable value must not return undefined")}return y}}return f},u)}return l.getInitialState=i,l}var EU="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",AU=(e=21)=>{let t="",r=e;for(;r--;)t+=EU[Math.random()*64|0];return t},PU=Symbol.for("rtk-slice-createasyncthunk");function OU(e,t){return`${e}/${t}`}function TU({creators:e}={}){var r;const t=(r=e==null?void 0:e.asyncThunk)==null?void 0:r[PU];return function(s){const{name:i,reducerPath:l=i}=s;if(!i)throw new Error(ti(11));const u=(typeof s.reducers=="function"?s.reducers(DU()):s.reducers)||{},d=Object.keys(u),m={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},f={addCase(O,T){const P=typeof O=="string"?O:O.type;if(!P)throw new Error(ti(12));if(P in m.sliceCaseReducersByType)throw new Error(ti(13));return m.sliceCaseReducersByType[P]=T,f},addMatcher(O,T){return m.sliceMatchers.push({matcher:O,reducer:T}),f},exposeAction(O,T){return m.actionCreators[O]=T,f},exposeCaseReducer(O,T){return m.sliceCaseReducersByName[O]=T,f}};d.forEach(O=>{const T=u[O],P={reducerName:O,type:OU(i,O),createNotation:typeof s.reducers=="function"};$U(T)?FU(P,T,f,t):RU(P,T,f)});function p(){const[O={},T=[],P=void 0]=typeof s.extraReducers=="function"?TA(s.extraReducers):[s.extraReducers],F={...O,...m.sliceCaseReducersByType};return CU(s.initialState,H=>{for(let L in F)H.addCase(L,F[L]);for(let L of m.sliceMatchers)H.addMatcher(L.matcher,L.reducer);for(let L of T)H.addMatcher(L.matcher,L.reducer);P&&H.addDefaultCase(P)})}const y=O=>O,x=new Map,w=new WeakMap;let b;function S(O,T){return b||(b=p()),b(O,T)}function _(){return b||(b=p()),b.getInitialState()}function E(O,T=!1){function P(H){let L=H[O];return typeof L>"u"&&T&&(L=Ff(w,P,_)),L}function F(H=y){const L=Ff(x,T,()=>new WeakMap);return Ff(L,H,()=>{const q={};for(const[z,U]of Object.entries(s.selectors??{}))q[z]=IU(U,H,()=>Ff(w,H,_),T);return q})}return{reducerPath:O,getSelectors:F,get selectors(){return F(P)},selectSlice:P}}const C={name:i,reducer:S,actions:m.actionCreators,caseReducers:m.sliceCaseReducersByName,getInitialState:_,...E(l),injectInto(O,{reducerPath:T,...P}={}){const F=T??l;return O.inject({reducerPath:F,reducer:S},P),{...C,...E(F,!0)}}};return C}}function IU(e,t,r,n){function s(i,...l){let u=t(i);return typeof u>"u"&&n&&(u=r()),e(u,...l)}return s.unwrapped=e,s}var Rs=TU();function DU(){function e(t,r){return{_reducerDefinitionType:"asyncThunk",payloadCreator:t,...r}}return e.withTypes=()=>e,{reducer(t){return Object.assign({[t.name](...r){return t(...r)}}[t.name],{_reducerDefinitionType:"reducer"})},preparedReducer(t,r){return{_reducerDefinitionType:"reducerWithPrepare",prepare:t,reducer:r}},asyncThunk:e}}function RU({type:e,reducerName:t,createNotation:r},n,s){let i,l;if("reducer"in n){if(r&&!MU(n))throw new Error(ti(17));i=n.reducer,l=n.prepare}else i=n;s.addCase(e,i).exposeCaseReducer(t,i).exposeAction(t,l?vi(e,l):vi(e))}function $U(e){return e._reducerDefinitionType==="asyncThunk"}function MU(e){return e._reducerDefinitionType==="reducerWithPrepare"}function FU({type:e,reducerName:t},r,n,s){if(!s)throw new Error(ti(18));const{payloadCreator:i,fulfilled:l,pending:u,rejected:d,settled:m,options:f}=r,p=s(e,i,f);n.exposeAction(t,p),l&&n.addCase(p.fulfilled,l),u&&n.addCase(p.pending,u),d&&n.addCase(p.rejected,d),m&&n.addMatcher(p.settled,m),n.exposeCaseReducer(t,{fulfilled:l||Lf,pending:u||Lf,rejected:d||Lf,settled:m||Lf})}function Lf(){}var LU="task",IA="listener",DA="completed",Rx="cancelled",zU=`task-${Rx}`,UU=`task-${DA}`,g0=`${IA}-${Rx}`,BU=`${IA}-${DA}`,Am=class{constructor(e){_g(this,"name","TaskAbortError");_g(this,"message");this.code=e,this.message=`${LU} ${Rx} (reason: ${e})`}},$x=(e,t)=>{if(typeof e!="function")throw new TypeError(ti(32))},Th=()=>{},RA=(e,t=Th)=>(e.catch(t),e),$A=(e,t)=>(e.addEventListener("abort",t,{once:!0}),()=>e.removeEventListener("abort",t)),nl=(e,t)=>{const r=e.signal;r.aborted||("reason"in r||Object.defineProperty(r,"reason",{enumerable:!0,value:t,configurable:!0,writable:!0}),e.abort(t))},sl=e=>{if(e.aborted){const{reason:t}=e;throw new Am(t)}};function MA(e,t){let r=Th;return new Promise((n,s)=>{const i=()=>s(new Am(e.reason));if(e.aborted){i();return}r=$A(e,i),t.finally(()=>r()).then(n,s)}).finally(()=>{r=Th})}var WU=async(e,t)=>{try{return await Promise.resolve(),{status:"ok",value:await e()}}catch(r){return{status:r instanceof Am?"cancelled":"rejected",error:r}}finally{t==null||t()}},Ih=e=>t=>RA(MA(e,t).then(r=>(sl(e),r))),FA=e=>{const t=Ih(e);return r=>t(new Promise(n=>setTimeout(n,r)))},{assign:yc}=Object,a_={},Pm="listenerMiddleware",VU=(e,t)=>{const r=n=>$A(e,()=>nl(n,e.reason));return(n,s)=>{$x(n);const i=new AbortController;r(i);const l=WU(async()=>{sl(e),sl(i.signal);const u=await n({pause:Ih(i.signal),delay:FA(i.signal),signal:i.signal});return sl(i.signal),u},()=>nl(i,UU));return s!=null&&s.autoJoin&&t.push(l.catch(Th)),{result:Ih(e)(l),cancel(){nl(i,zU)}}}},qU=(e,t)=>{const r=async(n,s)=>{sl(t);let i=()=>{};const u=[new Promise((d,m)=>{let f=e({predicate:n,effect:(p,y)=>{y.unsubscribe(),d([p,y.getState(),y.getOriginalState()])}});i=()=>{f(),m()}})];s!=null&&u.push(new Promise(d=>setTimeout(d,s,null)));try{const d=await MA(t,Promise.race(u));return sl(t),d}finally{i()}};return(n,s)=>RA(r(n,s))},LA=e=>{let{type:t,actionCreator:r,matcher:n,predicate:s,effect:i}=e;if(t)s=vi(t).match;else if(r)t=r.type,s=r.match;else if(n)s=n;else if(!s)throw new Error(ti(21));return $x(i),{predicate:s,type:t,effect:i}},zA=yc(e=>{const{type:t,predicate:r,effect:n}=LA(e);return{id:AU(),effect:n,type:t,predicate:r,pending:new Set,unsubscribe:()=>{throw new Error(ti(22))}}},{withTypes:()=>zA}),o_=(e,t)=>{const{type:r,effect:n,predicate:s}=LA(t);return Array.from(e.values()).find(i=>(typeof r=="string"?i.type===r:i.predicate===s)&&i.effect===n)},y0=e=>{e.pending.forEach(t=>{nl(t,g0)})},HU=(e,t)=>()=>{for(const r of t.keys())y0(r);e.clear()},l_=(e,t,r)=>{try{e(t,r)}catch(n){setTimeout(()=>{throw n},0)}},UA=yc(vi(`${Pm}/add`),{withTypes:()=>UA}),KU=vi(`${Pm}/removeAll`),BA=yc(vi(`${Pm}/remove`),{withTypes:()=>BA}),GU=(...e)=>{console.error(`${Pm}/error`,...e)},xd=(e={})=>{const t=new Map,r=new Map,n=x=>{const w=r.get(x)??0;r.set(x,w+1)},s=x=>{const w=r.get(x)??1;w===1?r.delete(x):r.set(x,w-1)},{extra:i,onError:l=GU}=e;$x(l);const u=x=>(x.unsubscribe=()=>t.delete(x.id),t.set(x.id,x),w=>{x.unsubscribe(),w!=null&&w.cancelActive&&y0(x)}),d=x=>{const w=o_(t,x)??zA(x);return u(w)};yc(d,{withTypes:()=>d});const m=x=>{const w=o_(t,x);return w&&(w.unsubscribe(),x.cancelActive&&y0(w)),!!w};yc(m,{withTypes:()=>m});const f=async(x,w,b,S)=>{const _=new AbortController,E=qU(d,_.signal),C=[];try{x.pending.add(_),n(x),await Promise.resolve(x.effect(w,yc({},b,{getOriginalState:S,condition:(O,T)=>E(O,T).then(Boolean),take:E,delay:FA(_.signal),pause:Ih(_.signal),extra:i,signal:_.signal,fork:VU(_.signal,C),unsubscribe:x.unsubscribe,subscribe:()=>{t.set(x.id,x)},cancelActiveListeners:()=>{x.pending.forEach((O,T,P)=>{O!==_&&(nl(O,g0),P.delete(O))})},cancel:()=>{nl(_,g0),x.pending.delete(_)},throwIfCancelled:()=>{sl(_.signal)}})))}catch(O){O instanceof Am||l_(l,O,{raisedBy:"effect"})}finally{await Promise.all(C),nl(_,BU),s(x),x.pending.delete(_)}},p=HU(t,r);return{middleware:x=>w=>b=>{if(!wA(b))return w(b);if(UA.match(b))return d(b.payload);if(KU.match(b)){p();return}if(BA.match(b))return m(b.payload);let S=x.getState();const _=()=>{if(S===a_)throw new Error(ti(23));return S};let E;try{if(E=w(b),t.size>0){const C=x.getState(),O=Array.from(t.values());for(const T of O){let P=!1;try{P=T.predicate(b,C,S)}catch(F){P=!1,l_(l,F,{raisedBy:"predicate"})}P&&f(T,b,x,_)}}}finally{S=a_}return E},startListening:d,stopListening:m,clearListeners:p}};function ti(e){return`Minified Redux Toolkit error #${e}; visit https://redux-toolkit.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var YU={layoutType:"horizontal",width:0,height:0,margin:{top:5,right:5,bottom:5,left:5},scale:1},WA=Rs({name:"chartLayout",initialState:YU,reducers:{setLayout(e,t){e.layoutType=t.payload},setChartSize(e,t){e.width=t.payload.width,e.height=t.payload.height},setMargin(e,t){var r,n,s,i;e.margin.top=(r=t.payload.top)!==null&&r!==void 0?r:0,e.margin.right=(n=t.payload.right)!==null&&n!==void 0?n:0,e.margin.bottom=(s=t.payload.bottom)!==null&&s!==void 0?s:0,e.margin.left=(i=t.payload.left)!==null&&i!==void 0?i:0},setScale(e,t){e.scale=t.payload}}}),{setMargin:JU,setLayout:XU,setChartSize:QU,setScale:ZU}=WA.actions,eB=WA.reducer;function VA(e,t,r){return Array.isArray(e)&&e&&t+r!==0?e.slice(t,r+1):e}function c_(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function fc(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?c_(Object(r),!0).forEach(function(n){tB(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):c_(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function tB(e,t,r){return(t=rB(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function rB(e){var t=nB(e,"string");return typeof t=="symbol"?t:t+""}function nB(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function vs(e,t,r){return Un(e)||Un(t)?r:na(t)?jc(e,t,r):typeof t=="function"?t(e):r}var sB=(e,t,r)=>{if(t&&r){var{width:n,height:s}=r,{align:i,verticalAlign:l,layout:u}=t;if((u==="vertical"||u==="horizontal"&&l==="middle")&&i!=="center"&&vt(e[i]))return fc(fc({},e),{},{[i]:e[i]+(n||0)});if((u==="horizontal"||u==="vertical"&&i==="center")&&l!=="middle"&&vt(e[l]))return fc(fc({},e),{},{[l]:e[l]+(s||0)})}return e},yl=(e,t)=>e==="horizontal"&&t==="xAxis"||e==="vertical"&&t==="yAxis"||e==="centric"&&t==="angleAxis"||e==="radial"&&t==="radiusAxis",u_=1e-4,iB=e=>{var t=e.domain();if(!(!t||t.length<=2)){var r=t.length,n=e.range(),s=Math.min(n[0],n[1])-u_,i=Math.max(n[0],n[1])+u_,l=e(t[0]),u=e(t[r-1]);(l<s||l>i||u<s||u>i)&&e.domain([t[0],t[r-1]])}},aB=(e,t)=>{if(!t||t.length!==2||!vt(t[0])||!vt(t[1]))return e;var r=Math.min(t[0],t[1]),n=Math.max(t[0],t[1]),s=[e[0],e[1]];return(!vt(e[0])||e[0]<r)&&(s[0]=r),(!vt(e[1])||e[1]>n)&&(s[1]=n),s[0]>n&&(s[0]=n),s[1]<r&&(s[1]=r),s},oB=e=>{var t=e.length;if(!(t<=0))for(var r=0,n=e[0].length;r<n;++r)for(var s=0,i=0,l=0;l<t;++l){var u=ra(e[l][r][1])?e[l][r][0]:e[l][r][1];u>=0?(e[l][r][0]=s,e[l][r][1]=s+u,s=e[l][r][1]):(e[l][r][0]=i,e[l][r][1]=i+u,i=e[l][r][1])}},lB=e=>{var t=e.length;if(!(t<=0))for(var r=0,n=e[0].length;r<n;++r)for(var s=0,i=0;i<t;++i){var l=ra(e[i][r][1])?e[i][r][0]:e[i][r][1];l>=0?(e[i][r][0]=s,e[i][r][1]=s+l,s=e[i][r][1]):(e[i][r][0]=0,e[i][r][1]=0)}},cB={sign:oB,expand:LL,none:bc,silhouette:zL,wiggle:UL,positive:lB},uB=(e,t,r)=>{var n=cB[r],s=FL().keys(t).value((i,l)=>Number(vs(i,l,0))).order(o0).offset(n);return s(e)};function dB(e){return e==null?void 0:String(e)}var d_=e=>{var{axis:t,ticks:r,offset:n,bandSize:s,entry:i,index:l}=e;if(t.type==="category")return r[l]?r[l].coordinate+n:null;var u=vs(i,t.dataKey,t.scale.domain()[l]);return Un(u)?null:t.scale(u)-s/2+n},fB=e=>{var{numericAxis:t}=e,r=t.scale.domain();if(t.type==="number"){var n=Math.min(r[0],r[1]),s=Math.max(r[0],r[1]);return n<=0&&s>=0?0:s<0?s:n}return r[0]},hB=e=>{var t=e.flat(2).filter(vt);return[Math.min(...t),Math.max(...t)]},mB=e=>[e[0]===1/0?0:e[0],e[1]===-1/0?0:e[1]],pB=(e,t,r)=>{if(e!=null)return mB(Object.keys(e).reduce((n,s)=>{var i=e[s],{stackedData:l}=i,u=l.reduce((d,m)=>{var f=VA(m,t,r),p=hB(f);return[Math.min(d[0],p[0]),Math.max(d[1],p[1])]},[1/0,-1/0]);return[Math.min(u[0],n[0]),Math.max(u[1],n[1])]},[1/0,-1/0]))},f_=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,h_=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,Dh=(e,t,r)=>{if(e&&e.scale&&e.scale.bandwidth){var n=e.scale.bandwidth();if(!r||n>0)return n}if(e&&t&&t.length>=2){for(var s=_m(t,f=>f.coordinate),i=1/0,l=1,u=s.length;l<u;l++){var d=s[l],m=s[l-1];i=Math.min((d.coordinate||0)-(m.coordinate||0),i)}return i===1/0?0:i}return r?void 0:0};function m_(e){var{tooltipEntrySettings:t,dataKey:r,payload:n,value:s,name:i}=e;return fc(fc({},t),{},{dataKey:r,payload:n,value:s,name:i})}function qA(e,t){if(e)return String(e);if(typeof t=="string")return t}var gB=(e,t)=>{if(t==="horizontal")return e.chartX;if(t==="vertical")return e.chartY},yB=(e,t)=>t==="centric"?e.angle:e.radius,La=e=>e.layout.width,za=e=>e.layout.height,vB=e=>e.layout.scale,HA=e=>e.layout.margin,Om=ge(e=>e.cartesianAxis.xAxis,e=>Object.values(e)),Tm=ge(e=>e.cartesianAxis.yAxis,e=>Object.values(e)),xB="data-recharts-item-index",wB="data-recharts-item-data-key",wd=60;function p_(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function zf(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?p_(Object(r),!0).forEach(function(n){bB(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):p_(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function bB(e,t,r){return(t=jB(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function jB(e){var t=SB(e,"string");return typeof t=="symbol"?t:t+""}function SB(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var kB=e=>e.brush.height;function _B(e){var t=Tm(e);return t.reduce((r,n)=>{if(n.orientation==="left"&&!n.mirror&&!n.hide){var s=typeof n.width=="number"?n.width:wd;return r+s}return r},0)}function NB(e){var t=Tm(e);return t.reduce((r,n)=>{if(n.orientation==="right"&&!n.mirror&&!n.hide){var s=typeof n.width=="number"?n.width:wd;return r+s}return r},0)}function CB(e){var t=Om(e);return t.reduce((r,n)=>n.orientation==="top"&&!n.mirror&&!n.hide?r+n.height:r,0)}function EB(e){var t=Om(e);return t.reduce((r,n)=>n.orientation==="bottom"&&!n.mirror&&!n.hide?r+n.height:r,0)}var Bn=ge([La,za,HA,kB,_B,NB,CB,EB,yA,rU],(e,t,r,n,s,i,l,u,d,m)=>{var f={left:(r.left||0)+s,right:(r.right||0)+i},p={top:(r.top||0)+l,bottom:(r.bottom||0)+u},y=zf(zf({},p),f),x=y.bottom;y.bottom+=n,y=sB(y,d,m);var w=e-y.left-y.right,b=t-y.top-y.bottom;return zf(zf({brushBottom:x},y),{},{width:Math.max(w,0),height:Math.max(b,0)})}),AB=ge(Bn,e=>({x:e.left,y:e.top,width:e.width,height:e.height})),Mx=ge(La,za,(e,t)=>({x:0,y:0,width:e,height:t})),PB=v.createContext(null),ni=()=>v.useContext(PB)!=null,Im=e=>e.brush,Dm=ge([Im,Bn,HA],(e,t,r)=>({height:e.height,x:vt(e.x)?e.x:t.left,y:vt(e.y)?e.y:t.top+t.height+t.brushBottom-((r==null?void 0:r.bottom)||0),width:vt(e.width)?e.width:t.width})),Yy={},Jy={},Xy={},g_;function OB(){return g_||(g_=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r,n,{signal:s,edges:i}={}){let l,u=null;const d=i!=null&&i.includes("leading"),m=i==null||i.includes("trailing"),f=()=>{u!==null&&(r.apply(l,u),l=void 0,u=null)},p=()=>{m&&f(),b()};let y=null;const x=()=>{y!=null&&clearTimeout(y),y=setTimeout(()=>{y=null,p()},n)},w=()=>{y!==null&&(clearTimeout(y),y=null)},b=()=>{w(),l=void 0,u=null},S=()=>{f()},_=function(...E){if(s!=null&&s.aborted)return;l=this,u=E;const C=y==null;x(),d&&C&&f()};return _.schedule=x,_.cancel=b,_.flush=S,s==null||s.addEventListener("abort",b,{once:!0}),_}e.debounce=t})(Xy)),Xy}var y_;function TB(){return y_||(y_=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=OB();function r(n,s=0,i={}){typeof i!="object"&&(i={});const{leading:l=!1,trailing:u=!0,maxWait:d}=i,m=Array(2);l&&(m[0]="leading"),u&&(m[1]="trailing");let f,p=null;const y=t.debounce(function(...b){f=n.apply(this,b),p=null},s,{edges:m}),x=function(...b){return d!=null&&(p===null&&(p=Date.now()),Date.now()-p>=d)?(f=n.apply(this,b),p=Date.now(),y.cancel(),y.schedule(),f):(y.apply(this,b),f)},w=()=>(y.flush(),f);return x.cancel=y.cancel,x.flush=w,x}e.debounce=r})(Jy)),Jy}var v_;function IB(){return v_||(v_=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=TB();function r(n,s=0,i={}){const{leading:l=!0,trailing:u=!0}=i;return t.debounce(n,s,{leading:l,maxWait:s,trailing:u})}e.throttle=r})(Yy)),Yy}var Qy,x_;function DB(){return x_||(x_=1,Qy=IB().throttle),Qy}var RB=DB();const $B=Ui(RB);var w_=function(t,r){for(var n=arguments.length,s=new Array(n>2?n-2:0),i=2;i<n;i++)s[i-2]=arguments[i]},KA=(e,t,r)=>{var{width:n="100%",height:s="100%",aspect:i,maxHeight:l}=r,u=Oa(n)?e:Number(n),d=Oa(s)?t:Number(s);return i&&i>0&&(u?d=u/i:d&&(u=d*i),l&&d!=null&&d>l&&(d=l)),{calculatedWidth:u,calculatedHeight:d}},MB={width:0,height:0,overflow:"visible"},FB={width:0,overflowX:"visible"},LB={height:0,overflowY:"visible"},zB={},UB=e=>{var{width:t,height:r}=e,n=Oa(t),s=Oa(r);return n&&s?MB:n?FB:s?LB:zB};function BB(e){var{width:t,height:r,aspect:n}=e,s=t,i=r;return s===void 0&&i===void 0?(s="100%",i="100%"):s===void 0?s=n&&n>0?void 0:"100%":i===void 0&&(i=n&&n>0?void 0:"100%"),{width:s,height:i}}function tn(e){return Number.isFinite(e)}function xo(e){return typeof e=="number"&&e>0&&Number.isFinite(e)}function v0(){return v0=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},v0.apply(null,arguments)}function b_(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function j_(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?b_(Object(r),!0).forEach(function(n){WB(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):b_(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function WB(e,t,r){return(t=VB(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function VB(e){var t=qB(e,"string");return typeof t=="symbol"?t:t+""}function qB(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var GA=v.createContext({width:-1,height:-1});function HB(e){return xo(e.width)&&xo(e.height)}function YA(e){var{children:t,width:r,height:n}=e,s=v.useMemo(()=>({width:r,height:n}),[r,n]);return HB(s)?v.createElement(GA.Provider,{value:s},t):null}var Fx=()=>v.useContext(GA),KB=v.forwardRef((e,t)=>{var{aspect:r,initialDimension:n={width:-1,height:-1},width:s,height:i,minWidth:l=0,minHeight:u,maxHeight:d,children:m,debounce:f=0,id:p,className:y,onResize:x,style:w={}}=e,b=v.useRef(null),S=v.useRef();S.current=x,v.useImperativeHandle(t,()=>b.current);var[_,E]=v.useState({containerWidth:n.width,containerHeight:n.height}),C=v.useCallback((H,L)=>{E(q=>{var z=Math.round(H),U=Math.round(L);return q.containerWidth===z&&q.containerHeight===U?q:{containerWidth:z,containerHeight:U}})},[]);v.useEffect(()=>{if(b.current==null||typeof ResizeObserver>"u")return Fc;var H=U=>{var ne,{width:ie,height:oe}=U[0].contentRect;C(ie,oe),(ne=S.current)===null||ne===void 0||ne.call(S,ie,oe)};f>0&&(H=$B(H,f,{trailing:!0,leading:!1}));var L=new ResizeObserver(H),{width:q,height:z}=b.current.getBoundingClientRect();return C(q,z),L.observe(b.current),()=>{L.disconnect()}},[C,f]);var{containerWidth:O,containerHeight:T}=_;w_(!r||r>0,"The aspect(%s) must be greater than zero.",r);var{calculatedWidth:P,calculatedHeight:F}=KA(O,T,{width:s,height:i,aspect:r,maxHeight:d});return w_(P!=null&&P>0||F!=null&&F>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,P,F,s,i,l,u,r),v.createElement("div",{id:p?"".concat(p):void 0,className:Tr("recharts-responsive-container",y),style:j_(j_({},w),{},{width:s,height:i,minWidth:l,minHeight:u,maxHeight:d}),ref:b},v.createElement("div",{style:UB({width:s,height:i})},v.createElement(YA,{width:P,height:F},m)))}),GB=v.forwardRef((e,t)=>{var r=Fx();if(xo(r.width)&&xo(r.height))return e.children;var{width:n,height:s}=BB({width:e.width,height:e.height,aspect:e.aspect}),{calculatedWidth:i,calculatedHeight:l}=KA(void 0,void 0,{width:n,height:s,aspect:e.aspect,maxHeight:e.maxHeight});return vt(i)&&vt(l)?v.createElement(YA,{width:i,height:l},e.children):v.createElement(KB,v0({},e,{width:n,height:s,ref:t}))});function JA(e){if(e)return{x:e.x,y:e.y,upperWidth:"upperWidth"in e?e.upperWidth:e.width,lowerWidth:"lowerWidth"in e?e.lowerWidth:e.width,width:e.width,height:e.height}}var Rm=()=>{var e,t=ni(),r=dt(AB),n=dt(Dm),s=(e=dt(Im))===null||e===void 0?void 0:e.padding;return!t||!n||!s?r:{width:n.width-s.left-s.right,height:n.height-s.top-s.bottom,x:s.left,y:s.top}},YB={top:0,bottom:0,left:0,right:0,width:0,height:0,brushBottom:0},JB=()=>{var e;return(e=dt(Bn))!==null&&e!==void 0?e:YB},XB=()=>dt(La),QB=()=>dt(za),ur=e=>e.layout.layoutType,$m=()=>dt(ur),ZB=()=>{var e=$m();return e!==void 0},Mm=e=>{var t=rn(),r=ni(),{width:n,height:s}=e,i=Fx(),l=n,u=s;return i&&(l=i.width>0?i.width:n,u=i.height>0?i.height:s),v.useEffect(()=>{!r&&xo(l)&&xo(u)&&t(QU({width:l,height:u}))},[t,r,l,u]),null},e8={settings:{layout:"horizontal",align:"center",verticalAlign:"middle",itemSorter:"value"},size:{width:0,height:0},payload:[]},XA=Rs({name:"legend",initialState:e8,reducers:{setLegendSize(e,t){e.size.width=t.payload.width,e.size.height=t.payload.height},setLegendSettings(e,t){e.settings.align=t.payload.align,e.settings.layout=t.payload.layout,e.settings.verticalAlign=t.payload.verticalAlign,e.settings.itemSorter=t.payload.itemSorter},addLegendPayload:{reducer(e,t){e.payload.push(t.payload)},prepare:kn()},removeLegendPayload:{reducer(e,t){var r=Na(e).payload.indexOf(t.payload);r>-1&&e.payload.splice(r,1)},prepare:kn()}}}),{setLegendSize:ree,setLegendSettings:nee,addLegendPayload:t8,removeLegendPayload:r8}=XA.actions,n8=XA.reducer;function x0(){return x0=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},x0.apply(null,arguments)}function S_(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Zy(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?S_(Object(r),!0).forEach(function(n){s8(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):S_(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function s8(e,t,r){return(t=i8(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function i8(e){var t=a8(e,"string");return typeof t=="symbol"?t:t+""}function a8(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function o8(e){return Array.isArray(e)&&na(e[0])&&na(e[1])?e.join(" ~ "):e}var l8=e=>{var{separator:t=" : ",contentStyle:r={},itemStyle:n={},labelStyle:s={},payload:i,formatter:l,itemSorter:u,wrapperClassName:d,labelClassName:m,label:f,labelFormatter:p,accessibilityLayer:y=!1}=e,x=()=>{if(i&&i.length){var T={padding:0,margin:0},P=(u?_m(i,u):i).map((F,H)=>{if(F.type==="none")return null;var L=F.formatter||l||o8,{value:q,name:z}=F,U=q,ne=z;if(L){var ie=L(q,z,F,H,i);if(Array.isArray(ie))[U,ne]=ie;else if(ie!=null)U=ie;else return null}var oe=Zy({display:"block",paddingTop:4,paddingBottom:4,color:F.color||"#000"},n);return v.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(H),style:oe},na(ne)?v.createElement("span",{className:"recharts-tooltip-item-name"},ne):null,na(ne)?v.createElement("span",{className:"recharts-tooltip-item-separator"},t):null,v.createElement("span",{className:"recharts-tooltip-item-value"},U),v.createElement("span",{className:"recharts-tooltip-item-unit"},F.unit||""))});return v.createElement("ul",{className:"recharts-tooltip-item-list",style:T},P)}return null},w=Zy({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},r),b=Zy({margin:0},s),S=!Un(f),_=S?f:"",E=Tr("recharts-default-tooltip",d),C=Tr("recharts-tooltip-label",m);S&&p&&i!==void 0&&i!==null&&(_=p(f,i));var O=y?{role:"status","aria-live":"assertive"}:{};return v.createElement("div",x0({className:E,style:w},O),v.createElement("p",{className:C,style:b},v.isValidElement(_)?_:"".concat(_)),x())},_u="recharts-tooltip-wrapper",c8={visibility:"hidden"};function u8(e){var{coordinate:t,translateX:r,translateY:n}=e;return Tr(_u,{["".concat(_u,"-right")]:vt(r)&&t&&vt(t.x)&&r>=t.x,["".concat(_u,"-left")]:vt(r)&&t&&vt(t.x)&&r<t.x,["".concat(_u,"-bottom")]:vt(n)&&t&&vt(t.y)&&n>=t.y,["".concat(_u,"-top")]:vt(n)&&t&&vt(t.y)&&n<t.y})}function k_(e){var{allowEscapeViewBox:t,coordinate:r,key:n,offsetTopLeft:s,position:i,reverseDirection:l,tooltipDimension:u,viewBox:d,viewBoxDimension:m}=e;if(i&&vt(i[n]))return i[n];var f=r[n]-u-(s>0?s:0),p=r[n]+s;if(t[n])return l[n]?f:p;var y=d[n];if(y==null)return 0;if(l[n]){var x=f,w=y;return x<w?Math.max(p,y):Math.max(f,y)}if(m==null)return 0;var b=p+u,S=y+m;return b>S?Math.max(f,y):Math.max(p,y)}function d8(e){var{translateX:t,translateY:r,useTranslate3d:n}=e;return{transform:n?"translate3d(".concat(t,"px, ").concat(r,"px, 0)"):"translate(".concat(t,"px, ").concat(r,"px)")}}function f8(e){var{allowEscapeViewBox:t,coordinate:r,offsetTopLeft:n,position:s,reverseDirection:i,tooltipBox:l,useTranslate3d:u,viewBox:d}=e,m,f,p;return l.height>0&&l.width>0&&r?(f=k_({allowEscapeViewBox:t,coordinate:r,key:"x",offsetTopLeft:n,position:s,reverseDirection:i,tooltipDimension:l.width,viewBox:d,viewBoxDimension:d.width}),p=k_({allowEscapeViewBox:t,coordinate:r,key:"y",offsetTopLeft:n,position:s,reverseDirection:i,tooltipDimension:l.height,viewBox:d,viewBoxDimension:d.height}),m=d8({translateX:f,translateY:p,useTranslate3d:u})):m=c8,{cssProperties:m,cssClasses:u8({translateX:f,translateY:p,coordinate:r})}}function __(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Uf(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?__(Object(r),!0).forEach(function(n){w0(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):__(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function w0(e,t,r){return(t=h8(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function h8(e){var t=m8(e,"string");return typeof t=="symbol"?t:t+""}function m8(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class p8 extends v.PureComponent{constructor(){super(...arguments),w0(this,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0}}),w0(this,"handleKeyDown",t=>{if(t.key==="Escape"){var r,n,s,i;this.setState({dismissed:!0,dismissedAtCoordinate:{x:(r=(n=this.props.coordinate)===null||n===void 0?void 0:n.x)!==null&&r!==void 0?r:0,y:(s=(i=this.props.coordinate)===null||i===void 0?void 0:i.y)!==null&&s!==void 0?s:0}})}})}componentDidMount(){document.addEventListener("keydown",this.handleKeyDown)}componentWillUnmount(){document.removeEventListener("keydown",this.handleKeyDown)}componentDidUpdate(){var t,r;this.state.dismissed&&(((t=this.props.coordinate)===null||t===void 0?void 0:t.x)!==this.state.dismissedAtCoordinate.x||((r=this.props.coordinate)===null||r===void 0?void 0:r.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}render(){var{active:t,allowEscapeViewBox:r,animationDuration:n,animationEasing:s,children:i,coordinate:l,hasPayload:u,isAnimationActive:d,offset:m,position:f,reverseDirection:p,useTranslate3d:y,viewBox:x,wrapperStyle:w,lastBoundingBox:b,innerRef:S,hasPortalFromProps:_}=this.props,{cssClasses:E,cssProperties:C}=f8({allowEscapeViewBox:r,coordinate:l,offsetTopLeft:m,position:f,reverseDirection:p,tooltipBox:{height:b.height,width:b.width},useTranslate3d:y,viewBox:x}),O=_?{}:Uf(Uf({transition:d&&t?"transform ".concat(n,"ms ").concat(s):void 0},C),{},{pointerEvents:"none",visibility:!this.state.dismissed&&t&&u?"visible":"hidden",position:"absolute",top:0,left:0}),T=Uf(Uf({},O),{},{visibility:!this.state.dismissed&&t&&u?"visible":"hidden"},w);return v.createElement("div",{xmlns:"http://www.w3.org/1999/xhtml",tabIndex:-1,className:E,style:T,ref:S},i)}}var g8=()=>!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout),Lc={devToolsEnabled:!1,isSsr:g8()},QA=()=>{var e;return(e=dt(t=>t.rootProps.accessibilityLayer))!==null&&e!==void 0?e:!0};function b0(){return b0=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},b0.apply(null,arguments)}function N_(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function C_(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?N_(Object(r),!0).forEach(function(n){y8(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):N_(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function y8(e,t,r){return(t=v8(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function v8(e){var t=x8(e,"string");return typeof t=="symbol"?t:t+""}function x8(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var E_={curveBasisClosed:CL,curveBasisOpen:EL,curveBasis:NL,curveBumpX:fL,curveBumpY:hL,curveLinearClosed:AL,curveLinear:Sm,curveMonotoneX:PL,curveMonotoneY:OL,curveNatural:TL,curveStep:IL,curveStepAfter:RL,curveStepBefore:DL},Rh=e=>tn(e.x)&&tn(e.y),A_=e=>e.base!=null&&Rh(e.base)&&Rh(e),Nu=e=>e.x,Cu=e=>e.y,w8=(e,t)=>{if(typeof e=="function")return e;var r="curve".concat(yd(e));return(r==="curveMonotone"||r==="curveBump")&&t?E_["".concat(r).concat(t==="vertical"?"Y":"X")]:E_[r]||Sm},b8=e=>{var{type:t="linear",points:r=[],baseLine:n,layout:s,connectNulls:i=!1}=e,l=w8(t,s),u=i?r.filter(Rh):r,d;if(Array.isArray(n)){var m=r.map((x,w)=>C_(C_({},x),{},{base:n[w]}));s==="vertical"?d=Df().y(Cu).x1(Nu).x0(x=>x.base.x):d=Df().x(Nu).y1(Cu).y0(x=>x.base.y);var f=d.defined(A_).curve(l),p=i?m.filter(A_):m;return f(p)}s==="vertical"&&vt(n)?d=Df().y(Cu).x1(Nu).x0(n):vt(n)?d=Df().x(Nu).y1(Cu).y0(n):d=WE().x(Nu).y(Cu);var y=d.defined(Rh).curve(l);return y(u)},ZA=e=>{var{className:t,points:r,path:n,pathRef:s}=e;if((!r||!r.length)&&!n)return null;var i=r&&r.length?b8(e):n;return v.createElement("path",b0({},vo(e),iz(e),{className:Tr("recharts-curve",t),d:i===null?void 0:i,ref:s}))},j8=["x","y","top","left","width","height","className"];function j0(){return j0=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},j0.apply(null,arguments)}function P_(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function S8(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?P_(Object(r),!0).forEach(function(n){k8(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):P_(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function k8(e,t,r){return(t=_8(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function _8(e){var t=N8(e,"string");return typeof t=="symbol"?t:t+""}function N8(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function C8(e,t){if(e==null)return{};var r,n,s=E8(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function E8(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var A8=(e,t,r,n,s,i)=>"M".concat(e,",").concat(s,"v").concat(n,"M").concat(i,",").concat(t,"h").concat(r),P8=e=>{var{x:t=0,y:r=0,top:n=0,left:s=0,width:i=0,height:l=0,className:u}=e,d=C8(e,j8),m=S8({x:t,y:r,top:n,left:s,width:i,height:l},d);return!vt(t)||!vt(r)||!vt(i)||!vt(l)||!vt(n)||!vt(s)?null:v.createElement("path",j0({},yi(m),{className:Tr("recharts-cross",u),d:A8(t,r,i,l,n,s)}))};function O8(e,t,r,n){var s=n/2;return{stroke:"none",fill:"#ccc",x:e==="horizontal"?t.x-s:r.left+.5,y:e==="horizontal"?r.top+.5:t.y-s,width:e==="horizontal"?n:r.width-1,height:e==="horizontal"?r.height-1:n}}function O_(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function T_(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?O_(Object(r),!0).forEach(function(n){T8(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):O_(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function T8(e,t,r){return(t=I8(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function I8(e){var t=D8(e,"string");return typeof t=="symbol"?t:t+""}function D8(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var R8=e=>e.replace(/([A-Z])/g,t=>"-".concat(t.toLowerCase())),eP=(e,t,r)=>e.map(n=>"".concat(R8(n)," ").concat(t,"ms ").concat(r)).join(","),$8=(e,t)=>[Object.keys(e),Object.keys(t)].reduce((r,n)=>r.filter(s=>n.includes(s))),rd=(e,t)=>Object.keys(t).reduce((r,n)=>T_(T_({},r),{},{[n]:e(n,t[n])}),{});function I_(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Sn(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?I_(Object(r),!0).forEach(function(n){M8(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):I_(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function M8(e,t,r){return(t=F8(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function F8(e){var t=L8(e,"string");return typeof t=="symbol"?t:t+""}function L8(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var $h=(e,t,r)=>e+(t-e)*r,S0=e=>{var{from:t,to:r}=e;return t!==r},tP=(e,t,r)=>{var n=rd((s,i)=>{if(S0(i)){var[l,u]=e(i.from,i.to,i.velocity);return Sn(Sn({},i),{},{from:l,velocity:u})}return i},t);return r<1?rd((s,i)=>S0(i)?Sn(Sn({},i),{},{velocity:$h(i.velocity,n[s].velocity,r),from:$h(i.from,n[s].from,r)}):i,t):tP(e,n,r-1)};function z8(e,t,r,n,s,i){var l,u=n.reduce((y,x)=>Sn(Sn({},y),{},{[x]:{from:e[x],velocity:0,to:t[x]}}),{}),d=()=>rd((y,x)=>x.from,u),m=()=>!Object.values(u).filter(S0).length,f=null,p=y=>{l||(l=y);var x=y-l,w=x/r.dt;u=tP(r,u,w),s(Sn(Sn(Sn({},e),t),d())),l=y,m()||(f=i.setTimeout(p))};return()=>(f=i.setTimeout(p),()=>{var y;(y=f)===null||y===void 0||y()})}function U8(e,t,r,n,s,i,l){var u=null,d=s.reduce((p,y)=>Sn(Sn({},p),{},{[y]:[e[y],t[y]]}),{}),m,f=p=>{m||(m=p);var y=(p-m)/n,x=rd((b,S)=>$h(...S,r(y)),d);if(i(Sn(Sn(Sn({},e),t),x)),y<1)u=l.setTimeout(f);else{var w=rd((b,S)=>$h(...S,r(1)),d);i(Sn(Sn(Sn({},e),t),w))}};return()=>(u=l.setTimeout(f),()=>{var p;(p=u)===null||p===void 0||p()})}const B8=(e,t,r,n,s,i)=>{var l=$8(e,t);return r==null?()=>(s(Sn(Sn({},e),t)),()=>{}):r.isStepper===!0?z8(e,t,r,l,s,i):U8(e,t,r,n,l,s,i)};var Mh=1e-4,rP=(e,t)=>[0,3*e,3*t-6*e,3*e-3*t+1],nP=(e,t)=>e.map((r,n)=>r*t**n).reduce((r,n)=>r+n),D_=(e,t)=>r=>{var n=rP(e,t);return nP(n,r)},W8=(e,t)=>r=>{var n=rP(e,t),s=[...n.map((i,l)=>i*l).slice(1),0];return nP(s,r)},V8=function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];if(r.length===1)switch(r[0]){case"linear":return[0,0,1,1];case"ease":return[.25,.1,.25,1];case"ease-in":return[.42,0,1,1];case"ease-out":return[.42,0,.58,1];case"ease-in-out":return[0,0,.58,1];default:{var s,i=r[0].split("(");if(i[0]==="cubic-bezier"&&((s=i[1])===null||s===void 0?void 0:s.split(")")[0].split(",").length)===4){var l=i[1].split(")")[0].split(",").map(u=>parseFloat(u));return[l[0],l[1],l[2],l[3]]}}}return r.length===4?r:[0,0,1,1]},q8=(e,t,r,n)=>{var s=D_(e,r),i=D_(t,n),l=W8(e,r),u=m=>m>1?1:m<0?0:m,d=m=>{for(var f=m>1?1:m,p=f,y=0;y<8;++y){var x=s(p)-f,w=l(p);if(Math.abs(x-f)<Mh||w<Mh)return i(p);p=u(p-x/w)}return i(p)};return d.isStepper=!1,d},R_=function(){return q8(...V8(...arguments))},H8=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},{stiff:r=100,damping:n=8,dt:s=17}=t,i=(l,u,d)=>{var m=-(l-u)*r,f=d*n,p=d+(m-f)*s/1e3,y=d*s/1e3+l;return Math.abs(y-u)<Mh&&Math.abs(p)<Mh?[u,0]:[y,p]};return i.isStepper=!0,i.dt=s,i},K8=e=>{if(typeof e=="string")switch(e){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return R_(e);case"spring":return H8();default:if(e.split("(")[0]==="cubic-bezier")return R_(e)}return typeof e=="function"?e:null};function G8(e){var t,r=()=>null,n=!1,s=null,i=l=>{if(!n){if(Array.isArray(l)){if(!l.length)return;var u=l,[d,...m]=u;if(typeof d=="number"){s=e.setTimeout(i.bind(null,m),d);return}i(d),s=e.setTimeout(i.bind(null,m));return}typeof l=="string"&&(t=l,r(t)),typeof l=="object"&&(t=l,r(t)),typeof l=="function"&&l()}};return{stop:()=>{n=!0},start:l=>{n=!1,s&&(s(),s=null),i(l)},subscribe:l=>(r=l,()=>{r=()=>null}),getTimeoutController:()=>e}}class Y8{setTimeout(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=performance.now(),s=null,i=l=>{l-n>=r?t(l):typeof requestAnimationFrame=="function"&&(s=requestAnimationFrame(i))};return s=requestAnimationFrame(i),()=>{s!=null&&cancelAnimationFrame(s)}}}function J8(){return G8(new Y8)}var X8=v.createContext(J8);function Q8(e,t){var r=v.useContext(X8);return v.useMemo(()=>t??r(e),[e,t,r])}var Z8={begin:0,duration:1e3,easing:"ease",isActive:!0,canBegin:!0,onAnimationEnd:()=>{},onAnimationStart:()=>{}},$_={t:0},ev={t:1};function Lx(e){var t=wi(e,Z8),{isActive:r,canBegin:n,duration:s,easing:i,begin:l,onAnimationEnd:u,onAnimationStart:d,children:m}=t,f=Q8(t.animationId,t.animationManager),[p,y]=v.useState(r?$_:ev),x=v.useRef(null);return v.useEffect(()=>{r||y(ev)},[r]),v.useEffect(()=>{if(!r||!n)return Fc;var w=B8($_,ev,K8(i),s,y,f.getTimeoutController()),b=()=>{x.current=w()};return f.start([d,l,b,s,u]),()=>{f.stop(),x.current&&x.current(),u()}},[r,n,s,i,l,d,u,f]),m(p.t)}function zx(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"animation-",r=v.useRef(Qu(t)),n=v.useRef(e);return n.current!==e&&(r.current=Qu(t),n.current=e),r.current}var e7=["radius"],t7=["radius"];function M_(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function F_(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?M_(Object(r),!0).forEach(function(n){r7(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):M_(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function r7(e,t,r){return(t=n7(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function n7(e){var t=s7(e,"string");return typeof t=="symbol"?t:t+""}function s7(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Fh(){return Fh=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Fh.apply(null,arguments)}function L_(e,t){if(e==null)return{};var r,n,s=i7(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function i7(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var z_=(e,t,r,n,s)=>{var i=Math.min(Math.abs(r)/2,Math.abs(n)/2),l=n>=0?1:-1,u=r>=0?1:-1,d=n>=0&&r>=0||n<0&&r<0?1:0,m;if(i>0&&s instanceof Array){for(var f=[0,0,0,0],p=0,y=4;p<y;p++)f[p]=s[p]>i?i:s[p];m="M".concat(e,",").concat(t+l*f[0]),f[0]>0&&(m+="A ".concat(f[0],",").concat(f[0],",0,0,").concat(d,",").concat(e+u*f[0],",").concat(t)),m+="L ".concat(e+r-u*f[1],",").concat(t),f[1]>0&&(m+="A ".concat(f[1],",").concat(f[1],",0,0,").concat(d,`,
        `).concat(e+r,",").concat(t+l*f[1])),m+="L ".concat(e+r,",").concat(t+n-l*f[2]),f[2]>0&&(m+="A ".concat(f[2],",").concat(f[2],",0,0,").concat(d,`,
        `).concat(e+r-u*f[2],",").concat(t+n)),m+="L ".concat(e+u*f[3],",").concat(t+n),f[3]>0&&(m+="A ".concat(f[3],",").concat(f[3],",0,0,").concat(d,`,
        `).concat(e,",").concat(t+n-l*f[3])),m+="Z"}else if(i>0&&s===+s&&s>0){var x=Math.min(i,s);m="M ".concat(e,",").concat(t+l*x,`
            A `).concat(x,",").concat(x,",0,0,").concat(d,",").concat(e+u*x,",").concat(t,`
            L `).concat(e+r-u*x,",").concat(t,`
            A `).concat(x,",").concat(x,",0,0,").concat(d,",").concat(e+r,",").concat(t+l*x,`
            L `).concat(e+r,",").concat(t+n-l*x,`
            A `).concat(x,",").concat(x,",0,0,").concat(d,",").concat(e+r-u*x,",").concat(t+n,`
            L `).concat(e+u*x,",").concat(t+n,`
            A `).concat(x,",").concat(x,",0,0,").concat(d,",").concat(e,",").concat(t+n-l*x," Z")}else m="M ".concat(e,",").concat(t," h ").concat(r," v ").concat(n," h ").concat(-r," Z");return m},U_={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},sP=e=>{var t=wi(e,U_),r=v.useRef(null),[n,s]=v.useState(-1);v.useEffect(()=>{if(r.current&&r.current.getTotalLength)try{var Z=r.current.getTotalLength();Z&&s(Z)}catch{}},[]);var{x:i,y:l,width:u,height:d,radius:m,className:f}=t,{animationEasing:p,animationDuration:y,animationBegin:x,isAnimationActive:w,isUpdateAnimationActive:b}=t,S=v.useRef(u),_=v.useRef(d),E=v.useRef(i),C=v.useRef(l),O=v.useMemo(()=>({x:i,y:l,width:u,height:d,radius:m}),[i,l,u,d,m]),T=zx(O,"rectangle-");if(i!==+i||l!==+l||u!==+u||d!==+d||u===0||d===0)return null;var P=Tr("recharts-rectangle",f);if(!b){var F=yi(t),{radius:H}=F,L=L_(F,e7);return v.createElement("path",Fh({},L,{radius:typeof m=="number"?m:void 0,className:P,d:z_(i,l,u,d,m)}))}var q=S.current,z=_.current,U=E.current,ne=C.current,ie="0px ".concat(n===-1?1:n,"px"),oe="".concat(n,"px 0px"),V=eP(["strokeDasharray"],y,typeof p=="string"?p:U_.animationEasing);return v.createElement(Lx,{animationId:T,key:T,canBegin:n>0,duration:y,easing:p,isActive:b,begin:x},Z=>{var ee=Jn(q,u,Z),re=Jn(z,d,Z),me=Jn(U,i,Z),I=Jn(ne,l,Z);r.current&&(S.current=ee,_.current=re,E.current=me,C.current=I);var M;w?Z>0?M={transition:V,strokeDasharray:oe}:M={strokeDasharray:ie}:M={strokeDasharray:oe};var We=yi(t),{radius:te}=We,ve=L_(We,t7);return v.createElement("path",Fh({},ve,{radius:typeof m=="number"?m:void 0,className:P,d:z_(me,I,ee,re,m),ref:r,style:F_(F_({},M),t.style)}))})};function B_(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function W_(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?B_(Object(r),!0).forEach(function(n){a7(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):B_(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function a7(e,t,r){return(t=o7(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function o7(e){var t=l7(e,"string");return typeof t=="symbol"?t:t+""}function l7(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Lh=Math.PI/180,c7=e=>e*180/Math.PI,Qn=(e,t,r,n)=>({x:e+Math.cos(-Lh*n)*r,y:t+Math.sin(-Lh*n)*r}),u7=function(t,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{top:0,right:0,bottom:0,left:0};return Math.min(Math.abs(t-(n.left||0)-(n.right||0)),Math.abs(r-(n.top||0)-(n.bottom||0)))/2},d7=(e,t)=>{var{x:r,y:n}=e,{x:s,y:i}=t;return Math.sqrt((r-s)**2+(n-i)**2)},f7=(e,t)=>{var{x:r,y:n}=e,{cx:s,cy:i}=t,l=d7({x:r,y:n},{x:s,y:i});if(l<=0)return{radius:l,angle:0};var u=(r-s)/l,d=Math.acos(u);return n>i&&(d=2*Math.PI-d),{radius:l,angle:c7(d),angleInRadian:d}},h7=e=>{var{startAngle:t,endAngle:r}=e,n=Math.floor(t/360),s=Math.floor(r/360),i=Math.min(n,s);return{startAngle:t-i*360,endAngle:r-i*360}},m7=(e,t)=>{var{startAngle:r,endAngle:n}=t,s=Math.floor(r/360),i=Math.floor(n/360),l=Math.min(s,i);return e+l*360},p7=(e,t)=>{var{chartX:r,chartY:n}=e,{radius:s,angle:i}=f7({x:r,y:n},t),{innerRadius:l,outerRadius:u}=t;if(s<l||s>u||s===0)return null;var{startAngle:d,endAngle:m}=h7(t),f=i,p;if(d<=m){for(;f>m;)f-=360;for(;f<d;)f+=360;p=f>=d&&f<=m}else{for(;f>d;)f-=360;for(;f<m;)f+=360;p=f>=m&&f<=d}return p?W_(W_({},t),{},{radius:s,angle:m7(f,t)}):null};function iP(e){var{cx:t,cy:r,radius:n,startAngle:s,endAngle:i}=e,l=Qn(t,r,n,s),u=Qn(t,r,n,i);return{points:[l,u],cx:t,cy:r,radius:n,startAngle:s,endAngle:i}}function k0(){return k0=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},k0.apply(null,arguments)}var g7=(e,t)=>{var r=Zs(t-e),n=Math.min(Math.abs(t-e),359.999);return r*n},Bf=e=>{var{cx:t,cy:r,radius:n,angle:s,sign:i,isExternal:l,cornerRadius:u,cornerIsExternal:d}=e,m=u*(l?1:-1)+n,f=Math.asin(u/m)/Lh,p=d?s:s+i*f,y=Qn(t,r,m,p),x=Qn(t,r,n,p),w=d?s-i*f:s,b=Qn(t,r,m*Math.cos(f*Lh),w);return{center:y,circleTangency:x,lineTangency:b,theta:f}},aP=e=>{var{cx:t,cy:r,innerRadius:n,outerRadius:s,startAngle:i,endAngle:l}=e,u=g7(i,l),d=i+u,m=Qn(t,r,s,i),f=Qn(t,r,s,d),p="M ".concat(m.x,",").concat(m.y,`
    A `).concat(s,",").concat(s,`,0,
    `).concat(+(Math.abs(u)>180),",").concat(+(i>d),`,
    `).concat(f.x,",").concat(f.y,`
  `);if(n>0){var y=Qn(t,r,n,i),x=Qn(t,r,n,d);p+="L ".concat(x.x,",").concat(x.y,`
            A `).concat(n,",").concat(n,`,0,
            `).concat(+(Math.abs(u)>180),",").concat(+(i<=d),`,
            `).concat(y.x,",").concat(y.y," Z")}else p+="L ".concat(t,",").concat(r," Z");return p},y7=e=>{var{cx:t,cy:r,innerRadius:n,outerRadius:s,cornerRadius:i,forceCornerRadius:l,cornerIsExternal:u,startAngle:d,endAngle:m}=e,f=Zs(m-d),{circleTangency:p,lineTangency:y,theta:x}=Bf({cx:t,cy:r,radius:s,angle:d,sign:f,cornerRadius:i,cornerIsExternal:u}),{circleTangency:w,lineTangency:b,theta:S}=Bf({cx:t,cy:r,radius:s,angle:m,sign:-f,cornerRadius:i,cornerIsExternal:u}),_=u?Math.abs(d-m):Math.abs(d-m)-x-S;if(_<0)return l?"M ".concat(y.x,",").concat(y.y,`
        a`).concat(i,",").concat(i,",0,0,1,").concat(i*2,`,0
        a`).concat(i,",").concat(i,",0,0,1,").concat(-i*2,`,0
      `):aP({cx:t,cy:r,innerRadius:n,outerRadius:s,startAngle:d,endAngle:m});var E="M ".concat(y.x,",").concat(y.y,`
    A`).concat(i,",").concat(i,",0,0,").concat(+(f<0),",").concat(p.x,",").concat(p.y,`
    A`).concat(s,",").concat(s,",0,").concat(+(_>180),",").concat(+(f<0),",").concat(w.x,",").concat(w.y,`
    A`).concat(i,",").concat(i,",0,0,").concat(+(f<0),",").concat(b.x,",").concat(b.y,`
  `);if(n>0){var{circleTangency:C,lineTangency:O,theta:T}=Bf({cx:t,cy:r,radius:n,angle:d,sign:f,isExternal:!0,cornerRadius:i,cornerIsExternal:u}),{circleTangency:P,lineTangency:F,theta:H}=Bf({cx:t,cy:r,radius:n,angle:m,sign:-f,isExternal:!0,cornerRadius:i,cornerIsExternal:u}),L=u?Math.abs(d-m):Math.abs(d-m)-T-H;if(L<0&&i===0)return"".concat(E,"L").concat(t,",").concat(r,"Z");E+="L".concat(F.x,",").concat(F.y,`
      A`).concat(i,",").concat(i,",0,0,").concat(+(f<0),",").concat(P.x,",").concat(P.y,`
      A`).concat(n,",").concat(n,",0,").concat(+(L>180),",").concat(+(f>0),",").concat(C.x,",").concat(C.y,`
      A`).concat(i,",").concat(i,",0,0,").concat(+(f<0),",").concat(O.x,",").concat(O.y,"Z")}else E+="L".concat(t,",").concat(r,"Z");return E},v7={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},oP=e=>{var t=wi(e,v7),{cx:r,cy:n,innerRadius:s,outerRadius:i,cornerRadius:l,forceCornerRadius:u,cornerIsExternal:d,startAngle:m,endAngle:f,className:p}=t;if(i<s||m===f)return null;var y=Tr("recharts-sector",p),x=i-s,w=zi(l,x,0,!0),b;return w>0&&Math.abs(m-f)<360?b=y7({cx:r,cy:n,innerRadius:s,outerRadius:i,cornerRadius:Math.min(w,x/2),forceCornerRadius:u,cornerIsExternal:d,startAngle:m,endAngle:f}):b=aP({cx:r,cy:n,innerRadius:s,outerRadius:i,startAngle:m,endAngle:f}),v.createElement("path",k0({},yi(t),{className:y,d:b}))};function x7(e,t,r){if(e==="horizontal")return[{x:t.x,y:r.top},{x:t.x,y:r.top+r.height}];if(e==="vertical")return[{x:r.left,y:t.y},{x:r.left+r.width,y:t.y}];if(sA(t)){if(e==="centric"){var{cx:n,cy:s,innerRadius:i,outerRadius:l,angle:u}=t,d=Qn(n,s,i,u),m=Qn(n,s,l,u);return[{x:d.x,y:d.y},{x:m.x,y:m.y}]}return iP(t)}}var tv={},rv={},nv={},V_;function w7(){return V_||(V_=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=pA();function r(n){return t.isSymbol(n)?NaN:Number(n)}e.toNumber=r})(nv)),nv}var q_;function b7(){return q_||(q_=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=w7();function r(n){return n?(n=t.toNumber(n),n===1/0||n===-1/0?(n<0?-1:1)*Number.MAX_VALUE:n===n?n:0):n===0?n:0}e.toFinite=r})(rv)),rv}var H_;function j7(){return H_||(H_=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=gA(),r=b7();function n(s,i,l){l&&typeof l!="number"&&t.isIterateeCall(s,i,l)&&(i=l=void 0),s=r.toFinite(s),i===void 0?(i=s,s=0):i=r.toFinite(i),l=l===void 0?s<i?1:-1:r.toFinite(l);const u=Math.max(Math.ceil((i-s)/(l||1)),0),d=new Array(u);for(let m=0;m<u;m++)d[m]=s,s+=l;return d}e.range=n})(tv)),tv}var sv,K_;function S7(){return K_||(K_=1,sv=j7().range),sv}var k7=S7();const lP=Ui(k7);function go(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function _7(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function Ux(e){let t,r,n;e.length!==2?(t=go,r=(u,d)=>go(e(u),d),n=(u,d)=>e(u)-d):(t=e===go||e===_7?e:N7,r=e,n=e);function s(u,d,m=0,f=u.length){if(m<f){if(t(d,d)!==0)return f;do{const p=m+f>>>1;r(u[p],d)<0?m=p+1:f=p}while(m<f)}return m}function i(u,d,m=0,f=u.length){if(m<f){if(t(d,d)!==0)return f;do{const p=m+f>>>1;r(u[p],d)<=0?m=p+1:f=p}while(m<f)}return m}function l(u,d,m=0,f=u.length){const p=s(u,d,m,f-1);return p>m&&n(u[p-1],d)>-n(u[p],d)?p-1:p}return{left:s,center:l,right:i}}function N7(){return 0}function cP(e){return e===null?NaN:+e}function*C7(e,t){for(let r of e)r!=null&&(r=+r)>=r&&(yield r)}const E7=Ux(go),bd=E7.right;Ux(cP).center;class G_ extends Map{constructor(t,r=O7){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:r}}),t!=null)for(const[n,s]of t)this.set(n,s)}get(t){return super.get(Y_(this,t))}has(t){return super.has(Y_(this,t))}set(t,r){return super.set(A7(this,t),r)}delete(t){return super.delete(P7(this,t))}}function Y_({_intern:e,_key:t},r){const n=t(r);return e.has(n)?e.get(n):r}function A7({_intern:e,_key:t},r){const n=t(r);return e.has(n)?e.get(n):(e.set(n,r),r)}function P7({_intern:e,_key:t},r){const n=t(r);return e.has(n)&&(r=e.get(n),e.delete(n)),r}function O7(e){return e!==null&&typeof e=="object"?e.valueOf():e}function T7(e=go){if(e===go)return uP;if(typeof e!="function")throw new TypeError("compare is not a function");return(t,r)=>{const n=e(t,r);return n||n===0?n:(e(r,r)===0)-(e(t,t)===0)}}function uP(e,t){return(e==null||!(e>=e))-(t==null||!(t>=t))||(e<t?-1:e>t?1:0)}const I7=Math.sqrt(50),D7=Math.sqrt(10),R7=Math.sqrt(2);function zh(e,t,r){const n=(t-e)/Math.max(0,r),s=Math.floor(Math.log10(n)),i=n/Math.pow(10,s),l=i>=I7?10:i>=D7?5:i>=R7?2:1;let u,d,m;return s<0?(m=Math.pow(10,-s)/l,u=Math.round(e*m),d=Math.round(t*m),u/m<e&&++u,d/m>t&&--d,m=-m):(m=Math.pow(10,s)*l,u=Math.round(e/m),d=Math.round(t/m),u*m<e&&++u,d*m>t&&--d),d<u&&.5<=r&&r<2?zh(e,t,r*2):[u,d,m]}function _0(e,t,r){if(t=+t,e=+e,r=+r,!(r>0))return[];if(e===t)return[e];const n=t<e,[s,i,l]=n?zh(t,e,r):zh(e,t,r);if(!(i>=s))return[];const u=i-s+1,d=new Array(u);if(n)if(l<0)for(let m=0;m<u;++m)d[m]=(i-m)/-l;else for(let m=0;m<u;++m)d[m]=(i-m)*l;else if(l<0)for(let m=0;m<u;++m)d[m]=(s+m)/-l;else for(let m=0;m<u;++m)d[m]=(s+m)*l;return d}function N0(e,t,r){return t=+t,e=+e,r=+r,zh(e,t,r)[2]}function C0(e,t,r){t=+t,e=+e,r=+r;const n=t<e,s=n?N0(t,e,r):N0(e,t,r);return(n?-1:1)*(s<0?1/-s:s)}function J_(e,t){let r;for(const n of e)n!=null&&(r<n||r===void 0&&n>=n)&&(r=n);return r}function X_(e,t){let r;for(const n of e)n!=null&&(r>n||r===void 0&&n>=n)&&(r=n);return r}function dP(e,t,r=0,n=1/0,s){if(t=Math.floor(t),r=Math.floor(Math.max(0,r)),n=Math.floor(Math.min(e.length-1,n)),!(r<=t&&t<=n))return e;for(s=s===void 0?uP:T7(s);n>r;){if(n-r>600){const d=n-r+1,m=t-r+1,f=Math.log(d),p=.5*Math.exp(2*f/3),y=.5*Math.sqrt(f*p*(d-p)/d)*(m-d/2<0?-1:1),x=Math.max(r,Math.floor(t-m*p/d+y)),w=Math.min(n,Math.floor(t+(d-m)*p/d+y));dP(e,t,x,w,s)}const i=e[t];let l=r,u=n;for(Eu(e,r,t),s(e[n],i)>0&&Eu(e,r,n);l<u;){for(Eu(e,l,u),++l,--u;s(e[l],i)<0;)++l;for(;s(e[u],i)>0;)--u}s(e[r],i)===0?Eu(e,r,u):(++u,Eu(e,u,n)),u<=t&&(r=u+1),t<=u&&(n=u-1)}return e}function Eu(e,t,r){const n=e[t];e[t]=e[r],e[r]=n}function $7(e,t,r){if(e=Float64Array.from(C7(e)),!(!(n=e.length)||isNaN(t=+t))){if(t<=0||n<2)return X_(e);if(t>=1)return J_(e);var n,s=(n-1)*t,i=Math.floor(s),l=J_(dP(e,i).subarray(0,i+1)),u=X_(e.subarray(i+1));return l+(u-l)*(s-i)}}function M7(e,t,r=cP){if(!(!(n=e.length)||isNaN(t=+t))){if(t<=0||n<2)return+r(e[0],0,e);if(t>=1)return+r(e[n-1],n-1,e);var n,s=(n-1)*t,i=Math.floor(s),l=+r(e[i],i,e),u=+r(e[i+1],i+1,e);return l+(u-l)*(s-i)}}function F7(e,t,r){e=+e,t=+t,r=(s=arguments.length)<2?(t=e,e=0,1):s<3?1:+r;for(var n=-1,s=Math.max(0,Math.ceil((t-e)/r))|0,i=new Array(s);++n<s;)i[n]=e+n*r;return i}function bi(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}function Ua(e,t){switch(arguments.length){case 0:break;case 1:{typeof e=="function"?this.interpolator(e):this.range(e);break}default:{this.domain(e),typeof t=="function"?this.interpolator(t):this.range(t);break}}return this}const E0=Symbol("implicit");function Bx(){var e=new G_,t=[],r=[],n=E0;function s(i){let l=e.get(i);if(l===void 0){if(n!==E0)return n;e.set(i,l=t.push(i)-1)}return r[l%r.length]}return s.domain=function(i){if(!arguments.length)return t.slice();t=[],e=new G_;for(const l of i)e.has(l)||e.set(l,t.push(l)-1);return s},s.range=function(i){return arguments.length?(r=Array.from(i),s):r.slice()},s.unknown=function(i){return arguments.length?(n=i,s):n},s.copy=function(){return Bx(t,r).unknown(n)},bi.apply(s,arguments),s}function Wx(){var e=Bx().unknown(void 0),t=e.domain,r=e.range,n=0,s=1,i,l,u=!1,d=0,m=0,f=.5;delete e.unknown;function p(){var y=t().length,x=s<n,w=x?s:n,b=x?n:s;i=(b-w)/Math.max(1,y-d+m*2),u&&(i=Math.floor(i)),w+=(b-w-i*(y-d))*f,l=i*(1-d),u&&(w=Math.round(w),l=Math.round(l));var S=F7(y).map(function(_){return w+i*_});return r(x?S.reverse():S)}return e.domain=function(y){return arguments.length?(t(y),p()):t()},e.range=function(y){return arguments.length?([n,s]=y,n=+n,s=+s,p()):[n,s]},e.rangeRound=function(y){return[n,s]=y,n=+n,s=+s,u=!0,p()},e.bandwidth=function(){return l},e.step=function(){return i},e.round=function(y){return arguments.length?(u=!!y,p()):u},e.padding=function(y){return arguments.length?(d=Math.min(1,m=+y),p()):d},e.paddingInner=function(y){return arguments.length?(d=Math.min(1,y),p()):d},e.paddingOuter=function(y){return arguments.length?(m=+y,p()):m},e.align=function(y){return arguments.length?(f=Math.max(0,Math.min(1,y)),p()):f},e.copy=function(){return Wx(t(),[n,s]).round(u).paddingInner(d).paddingOuter(m).align(f)},bi.apply(p(),arguments)}function fP(e){var t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,delete e.paddingOuter,e.copy=function(){return fP(t())},e}function L7(){return fP(Wx.apply(null,arguments).paddingInner(1))}function Vx(e,t,r){e.prototype=t.prototype=r,r.constructor=e}function hP(e,t){var r=Object.create(e.prototype);for(var n in t)r[n]=t[n];return r}function jd(){}var nd=.7,Uh=1/nd,vc="\\s*([+-]?\\d+)\\s*",sd="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",ta="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",z7=/^#([0-9a-f]{3,8})$/,U7=new RegExp(`^rgb\\(${vc},${vc},${vc}\\)$`),B7=new RegExp(`^rgb\\(${ta},${ta},${ta}\\)$`),W7=new RegExp(`^rgba\\(${vc},${vc},${vc},${sd}\\)$`),V7=new RegExp(`^rgba\\(${ta},${ta},${ta},${sd}\\)$`),q7=new RegExp(`^hsl\\(${sd},${ta},${ta}\\)$`),H7=new RegExp(`^hsla\\(${sd},${ta},${ta},${sd}\\)$`),Q_={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Vx(jd,id,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:Z_,formatHex:Z_,formatHex8:K7,formatHsl:G7,formatRgb:eN,toString:eN});function Z_(){return this.rgb().formatHex()}function K7(){return this.rgb().formatHex8()}function G7(){return mP(this).formatHsl()}function eN(){return this.rgb().formatRgb()}function id(e){var t,r;return e=(e+"").trim().toLowerCase(),(t=z7.exec(e))?(r=t[1].length,t=parseInt(t[1],16),r===6?tN(t):r===3?new Ts(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):r===8?Wf(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):r===4?Wf(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=U7.exec(e))?new Ts(t[1],t[2],t[3],1):(t=B7.exec(e))?new Ts(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=W7.exec(e))?Wf(t[1],t[2],t[3],t[4]):(t=V7.exec(e))?Wf(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=q7.exec(e))?sN(t[1],t[2]/100,t[3]/100,1):(t=H7.exec(e))?sN(t[1],t[2]/100,t[3]/100,t[4]):Q_.hasOwnProperty(e)?tN(Q_[e]):e==="transparent"?new Ts(NaN,NaN,NaN,0):null}function tN(e){return new Ts(e>>16&255,e>>8&255,e&255,1)}function Wf(e,t,r,n){return n<=0&&(e=t=r=NaN),new Ts(e,t,r,n)}function Y7(e){return e instanceof jd||(e=id(e)),e?(e=e.rgb(),new Ts(e.r,e.g,e.b,e.opacity)):new Ts}function A0(e,t,r,n){return arguments.length===1?Y7(e):new Ts(e,t,r,n??1)}function Ts(e,t,r,n){this.r=+e,this.g=+t,this.b=+r,this.opacity=+n}Vx(Ts,A0,hP(jd,{brighter(e){return e=e==null?Uh:Math.pow(Uh,e),new Ts(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?nd:Math.pow(nd,e),new Ts(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new Ts(il(this.r),il(this.g),il(this.b),Bh(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:rN,formatHex:rN,formatHex8:J7,formatRgb:nN,toString:nN}));function rN(){return`#${Qo(this.r)}${Qo(this.g)}${Qo(this.b)}`}function J7(){return`#${Qo(this.r)}${Qo(this.g)}${Qo(this.b)}${Qo((isNaN(this.opacity)?1:this.opacity)*255)}`}function nN(){const e=Bh(this.opacity);return`${e===1?"rgb(":"rgba("}${il(this.r)}, ${il(this.g)}, ${il(this.b)}${e===1?")":`, ${e})`}`}function Bh(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function il(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function Qo(e){return e=il(e),(e<16?"0":"")+e.toString(16)}function sN(e,t,r,n){return n<=0?e=t=r=NaN:r<=0||r>=1?e=t=NaN:t<=0&&(e=NaN),new Mi(e,t,r,n)}function mP(e){if(e instanceof Mi)return new Mi(e.h,e.s,e.l,e.opacity);if(e instanceof jd||(e=id(e)),!e)return new Mi;if(e instanceof Mi)return e;e=e.rgb();var t=e.r/255,r=e.g/255,n=e.b/255,s=Math.min(t,r,n),i=Math.max(t,r,n),l=NaN,u=i-s,d=(i+s)/2;return u?(t===i?l=(r-n)/u+(r<n)*6:r===i?l=(n-t)/u+2:l=(t-r)/u+4,u/=d<.5?i+s:2-i-s,l*=60):u=d>0&&d<1?0:l,new Mi(l,u,d,e.opacity)}function X7(e,t,r,n){return arguments.length===1?mP(e):new Mi(e,t,r,n??1)}function Mi(e,t,r,n){this.h=+e,this.s=+t,this.l=+r,this.opacity=+n}Vx(Mi,X7,hP(jd,{brighter(e){return e=e==null?Uh:Math.pow(Uh,e),new Mi(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?nd:Math.pow(nd,e),new Mi(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,r=this.l,n=r+(r<.5?r:1-r)*t,s=2*r-n;return new Ts(iv(e>=240?e-240:e+120,s,n),iv(e,s,n),iv(e<120?e+240:e-120,s,n),this.opacity)},clamp(){return new Mi(iN(this.h),Vf(this.s),Vf(this.l),Bh(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=Bh(this.opacity);return`${e===1?"hsl(":"hsla("}${iN(this.h)}, ${Vf(this.s)*100}%, ${Vf(this.l)*100}%${e===1?")":`, ${e})`}`}}));function iN(e){return e=(e||0)%360,e<0?e+360:e}function Vf(e){return Math.max(0,Math.min(1,e||0))}function iv(e,t,r){return(e<60?t+(r-t)*e/60:e<180?r:e<240?t+(r-t)*(240-e)/60:t)*255}const qx=e=>()=>e;function Q7(e,t){return function(r){return e+r*t}}function Z7(e,t,r){return e=Math.pow(e,r),t=Math.pow(t,r)-e,r=1/r,function(n){return Math.pow(e+n*t,r)}}function eW(e){return(e=+e)==1?pP:function(t,r){return r-t?Z7(t,r,e):qx(isNaN(t)?r:t)}}function pP(e,t){var r=t-e;return r?Q7(e,r):qx(isNaN(e)?t:e)}const aN=(function e(t){var r=eW(t);function n(s,i){var l=r((s=A0(s)).r,(i=A0(i)).r),u=r(s.g,i.g),d=r(s.b,i.b),m=pP(s.opacity,i.opacity);return function(f){return s.r=l(f),s.g=u(f),s.b=d(f),s.opacity=m(f),s+""}}return n.gamma=e,n})(1);function tW(e,t){t||(t=[]);var r=e?Math.min(t.length,e.length):0,n=t.slice(),s;return function(i){for(s=0;s<r;++s)n[s]=e[s]*(1-i)+t[s]*i;return n}}function rW(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function nW(e,t){var r=t?t.length:0,n=e?Math.min(r,e.length):0,s=new Array(n),i=new Array(r),l;for(l=0;l<n;++l)s[l]=zc(e[l],t[l]);for(;l<r;++l)i[l]=t[l];return function(u){for(l=0;l<n;++l)i[l]=s[l](u);return i}}function sW(e,t){var r=new Date;return e=+e,t=+t,function(n){return r.setTime(e*(1-n)+t*n),r}}function Wh(e,t){return e=+e,t=+t,function(r){return e*(1-r)+t*r}}function iW(e,t){var r={},n={},s;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(s in t)s in e?r[s]=zc(e[s],t[s]):n[s]=t[s];return function(i){for(s in r)n[s]=r[s](i);return n}}var P0=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,av=new RegExp(P0.source,"g");function aW(e){return function(){return e}}function oW(e){return function(t){return e(t)+""}}function lW(e,t){var r=P0.lastIndex=av.lastIndex=0,n,s,i,l=-1,u=[],d=[];for(e=e+"",t=t+"";(n=P0.exec(e))&&(s=av.exec(t));)(i=s.index)>r&&(i=t.slice(r,i),u[l]?u[l]+=i:u[++l]=i),(n=n[0])===(s=s[0])?u[l]?u[l]+=s:u[++l]=s:(u[++l]=null,d.push({i:l,x:Wh(n,s)})),r=av.lastIndex;return r<t.length&&(i=t.slice(r),u[l]?u[l]+=i:u[++l]=i),u.length<2?d[0]?oW(d[0].x):aW(t):(t=d.length,function(m){for(var f=0,p;f<t;++f)u[(p=d[f]).i]=p.x(m);return u.join("")})}function zc(e,t){var r=typeof t,n;return t==null||r==="boolean"?qx(t):(r==="number"?Wh:r==="string"?(n=id(t))?(t=n,aN):lW:t instanceof id?aN:t instanceof Date?sW:rW(t)?tW:Array.isArray(t)?nW:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?iW:Wh)(e,t)}function Hx(e,t){return e=+e,t=+t,function(r){return Math.round(e*(1-r)+t*r)}}function cW(e,t){t===void 0&&(t=e,e=zc);for(var r=0,n=t.length-1,s=t[0],i=new Array(n<0?0:n);r<n;)i[r]=e(s,s=t[++r]);return function(l){var u=Math.max(0,Math.min(n-1,Math.floor(l*=n)));return i[u](l-u)}}function uW(e){return function(){return e}}function Vh(e){return+e}var oN=[0,1];function ys(e){return e}function O0(e,t){return(t-=e=+e)?function(r){return(r-e)/t}:uW(isNaN(t)?NaN:.5)}function dW(e,t){var r;return e>t&&(r=e,e=t,t=r),function(n){return Math.max(e,Math.min(t,n))}}function fW(e,t,r){var n=e[0],s=e[1],i=t[0],l=t[1];return s<n?(n=O0(s,n),i=r(l,i)):(n=O0(n,s),i=r(i,l)),function(u){return i(n(u))}}function hW(e,t,r){var n=Math.min(e.length,t.length)-1,s=new Array(n),i=new Array(n),l=-1;for(e[n]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++l<n;)s[l]=O0(e[l],e[l+1]),i[l]=r(t[l],t[l+1]);return function(u){var d=bd(e,u,1,n)-1;return i[d](s[d](u))}}function Sd(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function Fm(){var e=oN,t=oN,r=zc,n,s,i,l=ys,u,d,m;function f(){var y=Math.min(e.length,t.length);return l!==ys&&(l=dW(e[0],e[y-1])),u=y>2?hW:fW,d=m=null,p}function p(y){return y==null||isNaN(y=+y)?i:(d||(d=u(e.map(n),t,r)))(n(l(y)))}return p.invert=function(y){return l(s((m||(m=u(t,e.map(n),Wh)))(y)))},p.domain=function(y){return arguments.length?(e=Array.from(y,Vh),f()):e.slice()},p.range=function(y){return arguments.length?(t=Array.from(y),f()):t.slice()},p.rangeRound=function(y){return t=Array.from(y),r=Hx,f()},p.clamp=function(y){return arguments.length?(l=y?!0:ys,f()):l!==ys},p.interpolate=function(y){return arguments.length?(r=y,f()):r},p.unknown=function(y){return arguments.length?(i=y,p):i},function(y,x){return n=y,s=x,f()}}function Kx(){return Fm()(ys,ys)}function mW(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function qh(e,t){if((r=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var r,n=e.slice(0,r);return[n.length>1?n[0]+n.slice(2):n,+e.slice(r+1)]}function Sc(e){return e=qh(Math.abs(e)),e?e[1]:NaN}function pW(e,t){return function(r,n){for(var s=r.length,i=[],l=0,u=e[0],d=0;s>0&&u>0&&(d+u+1>n&&(u=Math.max(1,n-d)),i.push(r.substring(s-=u,s+u)),!((d+=u+1)>n));)u=e[l=(l+1)%e.length];return i.reverse().join(t)}}function gW(e){return function(t){return t.replace(/[0-9]/g,function(r){return e[+r]})}}var yW=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function ad(e){if(!(t=yW.exec(e)))throw new Error("invalid format: "+e);var t;return new Gx({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}ad.prototype=Gx.prototype;function Gx(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}Gx.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function vW(e){e:for(var t=e.length,r=1,n=-1,s;r<t;++r)switch(e[r]){case".":n=s=r;break;case"0":n===0&&(n=r),s=r;break;default:if(!+e[r])break e;n>0&&(n=0);break}return n>0?e.slice(0,n)+e.slice(s+1):e}var gP;function xW(e,t){var r=qh(e,t);if(!r)return e+"";var n=r[0],s=r[1],i=s-(gP=Math.max(-8,Math.min(8,Math.floor(s/3)))*3)+1,l=n.length;return i===l?n:i>l?n+new Array(i-l+1).join("0"):i>0?n.slice(0,i)+"."+n.slice(i):"0."+new Array(1-i).join("0")+qh(e,Math.max(0,t+i-1))[0]}function lN(e,t){var r=qh(e,t);if(!r)return e+"";var n=r[0],s=r[1];return s<0?"0."+new Array(-s).join("0")+n:n.length>s+1?n.slice(0,s+1)+"."+n.slice(s+1):n+new Array(s-n.length+2).join("0")}const cN={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:mW,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>lN(e*100,t),r:lN,s:xW,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function uN(e){return e}var dN=Array.prototype.map,fN=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function wW(e){var t=e.grouping===void 0||e.thousands===void 0?uN:pW(dN.call(e.grouping,Number),e.thousands+""),r=e.currency===void 0?"":e.currency[0]+"",n=e.currency===void 0?"":e.currency[1]+"",s=e.decimal===void 0?".":e.decimal+"",i=e.numerals===void 0?uN:gW(dN.call(e.numerals,String)),l=e.percent===void 0?"%":e.percent+"",u=e.minus===void 0?"":e.minus+"",d=e.nan===void 0?"NaN":e.nan+"";function m(p){p=ad(p);var y=p.fill,x=p.align,w=p.sign,b=p.symbol,S=p.zero,_=p.width,E=p.comma,C=p.precision,O=p.trim,T=p.type;T==="n"?(E=!0,T="g"):cN[T]||(C===void 0&&(C=12),O=!0,T="g"),(S||y==="0"&&x==="=")&&(S=!0,y="0",x="=");var P=b==="$"?r:b==="#"&&/[boxX]/.test(T)?"0"+T.toLowerCase():"",F=b==="$"?n:/[%p]/.test(T)?l:"",H=cN[T],L=/[defgprs%]/.test(T);C=C===void 0?6:/[gprs]/.test(T)?Math.max(1,Math.min(21,C)):Math.max(0,Math.min(20,C));function q(z){var U=P,ne=F,ie,oe,V;if(T==="c")ne=H(z)+ne,z="";else{z=+z;var Z=z<0||1/z<0;if(z=isNaN(z)?d:H(Math.abs(z),C),O&&(z=vW(z)),Z&&+z==0&&w!=="+"&&(Z=!1),U=(Z?w==="("?w:u:w==="-"||w==="("?"":w)+U,ne=(T==="s"?fN[8+gP/3]:"")+ne+(Z&&w==="("?")":""),L){for(ie=-1,oe=z.length;++ie<oe;)if(V=z.charCodeAt(ie),48>V||V>57){ne=(V===46?s+z.slice(ie+1):z.slice(ie))+ne,z=z.slice(0,ie);break}}}E&&!S&&(z=t(z,1/0));var ee=U.length+z.length+ne.length,re=ee<_?new Array(_-ee+1).join(y):"";switch(E&&S&&(z=t(re+z,re.length?_-ne.length:1/0),re=""),x){case"<":z=U+z+ne+re;break;case"=":z=U+re+z+ne;break;case"^":z=re.slice(0,ee=re.length>>1)+U+z+ne+re.slice(ee);break;default:z=re+U+z+ne;break}return i(z)}return q.toString=function(){return p+""},q}function f(p,y){var x=m((p=ad(p),p.type="f",p)),w=Math.max(-8,Math.min(8,Math.floor(Sc(y)/3)))*3,b=Math.pow(10,-w),S=fN[8+w/3];return function(_){return x(b*_)+S}}return{format:m,formatPrefix:f}}var qf,Yx,yP;bW({thousands:",",grouping:[3],currency:["$",""]});function bW(e){return qf=wW(e),Yx=qf.format,yP=qf.formatPrefix,qf}function jW(e){return Math.max(0,-Sc(Math.abs(e)))}function SW(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(Sc(t)/3)))*3-Sc(Math.abs(e)))}function kW(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,Sc(t)-Sc(e))+1}function vP(e,t,r,n){var s=C0(e,t,r),i;switch(n=ad(n??",f"),n.type){case"s":{var l=Math.max(Math.abs(e),Math.abs(t));return n.precision==null&&!isNaN(i=SW(s,l))&&(n.precision=i),yP(n,l)}case"":case"e":case"g":case"p":case"r":{n.precision==null&&!isNaN(i=kW(s,Math.max(Math.abs(e),Math.abs(t))))&&(n.precision=i-(n.type==="e"));break}case"f":case"%":{n.precision==null&&!isNaN(i=jW(s))&&(n.precision=i-(n.type==="%")*2);break}}return Yx(n)}function jo(e){var t=e.domain;return e.ticks=function(r){var n=t();return _0(n[0],n[n.length-1],r??10)},e.tickFormat=function(r,n){var s=t();return vP(s[0],s[s.length-1],r??10,n)},e.nice=function(r){r==null&&(r=10);var n=t(),s=0,i=n.length-1,l=n[s],u=n[i],d,m,f=10;for(u<l&&(m=l,l=u,u=m,m=s,s=i,i=m);f-- >0;){if(m=N0(l,u,r),m===d)return n[s]=l,n[i]=u,t(n);if(m>0)l=Math.floor(l/m)*m,u=Math.ceil(u/m)*m;else if(m<0)l=Math.ceil(l*m)/m,u=Math.floor(u*m)/m;else break;d=m}return e},e}function xP(){var e=Kx();return e.copy=function(){return Sd(e,xP())},bi.apply(e,arguments),jo(e)}function wP(e){var t;function r(n){return n==null||isNaN(n=+n)?t:n}return r.invert=r,r.domain=r.range=function(n){return arguments.length?(e=Array.from(n,Vh),r):e.slice()},r.unknown=function(n){return arguments.length?(t=n,r):t},r.copy=function(){return wP(e).unknown(t)},e=arguments.length?Array.from(e,Vh):[0,1],jo(r)}function bP(e,t){e=e.slice();var r=0,n=e.length-1,s=e[r],i=e[n],l;return i<s&&(l=r,r=n,n=l,l=s,s=i,i=l),e[r]=t.floor(s),e[n]=t.ceil(i),e}function hN(e){return Math.log(e)}function mN(e){return Math.exp(e)}function _W(e){return-Math.log(-e)}function NW(e){return-Math.exp(-e)}function CW(e){return isFinite(e)?+("1e"+e):e<0?0:e}function EW(e){return e===10?CW:e===Math.E?Math.exp:t=>Math.pow(e,t)}function AW(e){return e===Math.E?Math.log:e===10&&Math.log10||e===2&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}function pN(e){return(t,r)=>-e(-t,r)}function Jx(e){const t=e(hN,mN),r=t.domain;let n=10,s,i;function l(){return s=AW(n),i=EW(n),r()[0]<0?(s=pN(s),i=pN(i),e(_W,NW)):e(hN,mN),t}return t.base=function(u){return arguments.length?(n=+u,l()):n},t.domain=function(u){return arguments.length?(r(u),l()):r()},t.ticks=u=>{const d=r();let m=d[0],f=d[d.length-1];const p=f<m;p&&([m,f]=[f,m]);let y=s(m),x=s(f),w,b;const S=u==null?10:+u;let _=[];if(!(n%1)&&x-y<S){if(y=Math.floor(y),x=Math.ceil(x),m>0){for(;y<=x;++y)for(w=1;w<n;++w)if(b=y<0?w/i(-y):w*i(y),!(b<m)){if(b>f)break;_.push(b)}}else for(;y<=x;++y)for(w=n-1;w>=1;--w)if(b=y>0?w/i(-y):w*i(y),!(b<m)){if(b>f)break;_.push(b)}_.length*2<S&&(_=_0(m,f,S))}else _=_0(y,x,Math.min(x-y,S)).map(i);return p?_.reverse():_},t.tickFormat=(u,d)=>{if(u==null&&(u=10),d==null&&(d=n===10?"s":","),typeof d!="function"&&(!(n%1)&&(d=ad(d)).precision==null&&(d.trim=!0),d=Yx(d)),u===1/0)return d;const m=Math.max(1,n*u/t.ticks().length);return f=>{let p=f/i(Math.round(s(f)));return p*n<n-.5&&(p*=n),p<=m?d(f):""}},t.nice=()=>r(bP(r(),{floor:u=>i(Math.floor(s(u))),ceil:u=>i(Math.ceil(s(u)))})),t}function jP(){const e=Jx(Fm()).domain([1,10]);return e.copy=()=>Sd(e,jP()).base(e.base()),bi.apply(e,arguments),e}function gN(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function yN(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function Xx(e){var t=1,r=e(gN(t),yN(t));return r.constant=function(n){return arguments.length?e(gN(t=+n),yN(t)):t},jo(r)}function SP(){var e=Xx(Fm());return e.copy=function(){return Sd(e,SP()).constant(e.constant())},bi.apply(e,arguments)}function vN(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function PW(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function OW(e){return e<0?-e*e:e*e}function Qx(e){var t=e(ys,ys),r=1;function n(){return r===1?e(ys,ys):r===.5?e(PW,OW):e(vN(r),vN(1/r))}return t.exponent=function(s){return arguments.length?(r=+s,n()):r},jo(t)}function Zx(){var e=Qx(Fm());return e.copy=function(){return Sd(e,Zx()).exponent(e.exponent())},bi.apply(e,arguments),e}function TW(){return Zx.apply(null,arguments).exponent(.5)}function xN(e){return Math.sign(e)*e*e}function IW(e){return Math.sign(e)*Math.sqrt(Math.abs(e))}function kP(){var e=Kx(),t=[0,1],r=!1,n;function s(i){var l=IW(e(i));return isNaN(l)?n:r?Math.round(l):l}return s.invert=function(i){return e.invert(xN(i))},s.domain=function(i){return arguments.length?(e.domain(i),s):e.domain()},s.range=function(i){return arguments.length?(e.range((t=Array.from(i,Vh)).map(xN)),s):t.slice()},s.rangeRound=function(i){return s.range(i).round(!0)},s.round=function(i){return arguments.length?(r=!!i,s):r},s.clamp=function(i){return arguments.length?(e.clamp(i),s):e.clamp()},s.unknown=function(i){return arguments.length?(n=i,s):n},s.copy=function(){return kP(e.domain(),t).round(r).clamp(e.clamp()).unknown(n)},bi.apply(s,arguments),jo(s)}function _P(){var e=[],t=[],r=[],n;function s(){var l=0,u=Math.max(1,t.length);for(r=new Array(u-1);++l<u;)r[l-1]=M7(e,l/u);return i}function i(l){return l==null||isNaN(l=+l)?n:t[bd(r,l)]}return i.invertExtent=function(l){var u=t.indexOf(l);return u<0?[NaN,NaN]:[u>0?r[u-1]:e[0],u<r.length?r[u]:e[e.length-1]]},i.domain=function(l){if(!arguments.length)return e.slice();e=[];for(let u of l)u!=null&&!isNaN(u=+u)&&e.push(u);return e.sort(go),s()},i.range=function(l){return arguments.length?(t=Array.from(l),s()):t.slice()},i.unknown=function(l){return arguments.length?(n=l,i):n},i.quantiles=function(){return r.slice()},i.copy=function(){return _P().domain(e).range(t).unknown(n)},bi.apply(i,arguments)}function NP(){var e=0,t=1,r=1,n=[.5],s=[0,1],i;function l(d){return d!=null&&d<=d?s[bd(n,d,0,r)]:i}function u(){var d=-1;for(n=new Array(r);++d<r;)n[d]=((d+1)*t-(d-r)*e)/(r+1);return l}return l.domain=function(d){return arguments.length?([e,t]=d,e=+e,t=+t,u()):[e,t]},l.range=function(d){return arguments.length?(r=(s=Array.from(d)).length-1,u()):s.slice()},l.invertExtent=function(d){var m=s.indexOf(d);return m<0?[NaN,NaN]:m<1?[e,n[0]]:m>=r?[n[r-1],t]:[n[m-1],n[m]]},l.unknown=function(d){return arguments.length&&(i=d),l},l.thresholds=function(){return n.slice()},l.copy=function(){return NP().domain([e,t]).range(s).unknown(i)},bi.apply(jo(l),arguments)}function CP(){var e=[.5],t=[0,1],r,n=1;function s(i){return i!=null&&i<=i?t[bd(e,i,0,n)]:r}return s.domain=function(i){return arguments.length?(e=Array.from(i),n=Math.min(e.length,t.length-1),s):e.slice()},s.range=function(i){return arguments.length?(t=Array.from(i),n=Math.min(e.length,t.length-1),s):t.slice()},s.invertExtent=function(i){var l=t.indexOf(i);return[e[l-1],e[l]]},s.unknown=function(i){return arguments.length?(r=i,s):r},s.copy=function(){return CP().domain(e).range(t).unknown(r)},bi.apply(s,arguments)}const ov=new Date,lv=new Date;function Nn(e,t,r,n){function s(i){return e(i=arguments.length===0?new Date:new Date(+i)),i}return s.floor=i=>(e(i=new Date(+i)),i),s.ceil=i=>(e(i=new Date(i-1)),t(i,1),e(i),i),s.round=i=>{const l=s(i),u=s.ceil(i);return i-l<u-i?l:u},s.offset=(i,l)=>(t(i=new Date(+i),l==null?1:Math.floor(l)),i),s.range=(i,l,u)=>{const d=[];if(i=s.ceil(i),u=u==null?1:Math.floor(u),!(i<l)||!(u>0))return d;let m;do d.push(m=new Date(+i)),t(i,u),e(i);while(m<i&&i<l);return d},s.filter=i=>Nn(l=>{if(l>=l)for(;e(l),!i(l);)l.setTime(l-1)},(l,u)=>{if(l>=l)if(u<0)for(;++u<=0;)for(;t(l,-1),!i(l););else for(;--u>=0;)for(;t(l,1),!i(l););}),r&&(s.count=(i,l)=>(ov.setTime(+i),lv.setTime(+l),e(ov),e(lv),Math.floor(r(ov,lv))),s.every=i=>(i=Math.floor(i),!isFinite(i)||!(i>0)?null:i>1?s.filter(n?l=>n(l)%i===0:l=>s.count(0,l)%i===0):s)),s}const Hh=Nn(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);Hh.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?Nn(t=>{t.setTime(Math.floor(t/e)*e)},(t,r)=>{t.setTime(+t+r*e)},(t,r)=>(r-t)/e):Hh);Hh.range;const ja=1e3,pi=ja*60,Sa=pi*60,Ia=Sa*24,ew=Ia*7,wN=Ia*30,cv=Ia*365,Zo=Nn(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*ja)},(e,t)=>(t-e)/ja,e=>e.getUTCSeconds());Zo.range;const tw=Nn(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*ja)},(e,t)=>{e.setTime(+e+t*pi)},(e,t)=>(t-e)/pi,e=>e.getMinutes());tw.range;const rw=Nn(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*pi)},(e,t)=>(t-e)/pi,e=>e.getUTCMinutes());rw.range;const nw=Nn(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*ja-e.getMinutes()*pi)},(e,t)=>{e.setTime(+e+t*Sa)},(e,t)=>(t-e)/Sa,e=>e.getHours());nw.range;const sw=Nn(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*Sa)},(e,t)=>(t-e)/Sa,e=>e.getUTCHours());sw.range;const kd=Nn(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*pi)/Ia,e=>e.getDate()-1);kd.range;const Lm=Nn(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/Ia,e=>e.getUTCDate()-1);Lm.range;const EP=Nn(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/Ia,e=>Math.floor(e/Ia));EP.range;function vl(e){return Nn(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(t,r)=>{t.setDate(t.getDate()+r*7)},(t,r)=>(r-t-(r.getTimezoneOffset()-t.getTimezoneOffset())*pi)/ew)}const zm=vl(0),Kh=vl(1),DW=vl(2),RW=vl(3),kc=vl(4),$W=vl(5),MW=vl(6);zm.range;Kh.range;DW.range;RW.range;kc.range;$W.range;MW.range;function xl(e){return Nn(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(t,r)=>{t.setUTCDate(t.getUTCDate()+r*7)},(t,r)=>(r-t)/ew)}const Um=xl(0),Gh=xl(1),FW=xl(2),LW=xl(3),_c=xl(4),zW=xl(5),UW=xl(6);Um.range;Gh.range;FW.range;LW.range;_c.range;zW.range;UW.range;const iw=Nn(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12,e=>e.getMonth());iw.range;const aw=Nn(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth());aw.range;const Da=Nn(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());Da.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:Nn(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,r)=>{t.setFullYear(t.getFullYear()+r*e)});Da.range;const Ra=Nn(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());Ra.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:Nn(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,r)=>{t.setUTCFullYear(t.getUTCFullYear()+r*e)});Ra.range;function AP(e,t,r,n,s,i){const l=[[Zo,1,ja],[Zo,5,5*ja],[Zo,15,15*ja],[Zo,30,30*ja],[i,1,pi],[i,5,5*pi],[i,15,15*pi],[i,30,30*pi],[s,1,Sa],[s,3,3*Sa],[s,6,6*Sa],[s,12,12*Sa],[n,1,Ia],[n,2,2*Ia],[r,1,ew],[t,1,wN],[t,3,3*wN],[e,1,cv]];function u(m,f,p){const y=f<m;y&&([m,f]=[f,m]);const x=p&&typeof p.range=="function"?p:d(m,f,p),w=x?x.range(m,+f+1):[];return y?w.reverse():w}function d(m,f,p){const y=Math.abs(f-m)/p,x=Ux(([,,S])=>S).right(l,y);if(x===l.length)return e.every(C0(m/cv,f/cv,p));if(x===0)return Hh.every(Math.max(C0(m,f,p),1));const[w,b]=l[y/l[x-1][2]<l[x][2]/y?x-1:x];return w.every(b)}return[u,d]}const[BW,WW]=AP(Ra,aw,Um,EP,sw,rw),[VW,qW]=AP(Da,iw,zm,kd,nw,tw);function uv(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function dv(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function Au(e,t,r){return{y:e,m:t,d:r,H:0,M:0,S:0,L:0}}function HW(e){var t=e.dateTime,r=e.date,n=e.time,s=e.periods,i=e.days,l=e.shortDays,u=e.months,d=e.shortMonths,m=Pu(s),f=Ou(s),p=Pu(i),y=Ou(i),x=Pu(l),w=Ou(l),b=Pu(u),S=Ou(u),_=Pu(d),E=Ou(d),C={a:Z,A:ee,b:re,B:me,c:null,d:NN,e:NN,f:p9,g:_9,G:C9,H:f9,I:h9,j:m9,L:PP,m:g9,M:y9,p:I,q:M,Q:AN,s:PN,S:v9,u:x9,U:w9,V:b9,w:j9,W:S9,x:null,X:null,y:k9,Y:N9,Z:E9,"%":EN},O={a:We,A:te,b:ve,B:he,c:null,d:CN,e:CN,f:T9,g:B9,G:V9,H:A9,I:P9,j:O9,L:TP,m:I9,M:D9,p:ye,q:le,Q:AN,s:PN,S:R9,u:$9,U:M9,V:F9,w:L9,W:z9,x:null,X:null,y:U9,Y:W9,Z:q9,"%":EN},T={a:q,A:z,b:U,B:ne,c:ie,d:kN,e:kN,f:l9,g:SN,G:jN,H:_N,I:_N,j:s9,L:o9,m:n9,M:i9,p:L,q:r9,Q:u9,s:d9,S:a9,u:XW,U:QW,V:ZW,w:JW,W:e9,x:oe,X:V,y:SN,Y:jN,Z:t9,"%":c9};C.x=P(r,C),C.X=P(n,C),C.c=P(t,C),O.x=P(r,O),O.X=P(n,O),O.c=P(t,O);function P(W,Re){return function(Ge){var G=[],He=-1,Je=0,gt=W.length,_t,Mt,Dt;for(Ge instanceof Date||(Ge=new Date(+Ge));++He<gt;)W.charCodeAt(He)===37&&(G.push(W.slice(Je,He)),(Mt=bN[_t=W.charAt(++He)])!=null?_t=W.charAt(++He):Mt=_t==="e"?" ":"0",(Dt=Re[_t])&&(_t=Dt(Ge,Mt)),G.push(_t),Je=He+1);return G.push(W.slice(Je,He)),G.join("")}}function F(W,Re){return function(Ge){var G=Au(1900,void 0,1),He=H(G,W,Ge+="",0),Je,gt;if(He!=Ge.length)return null;if("Q"in G)return new Date(G.Q);if("s"in G)return new Date(G.s*1e3+("L"in G?G.L:0));if(Re&&!("Z"in G)&&(G.Z=0),"p"in G&&(G.H=G.H%12+G.p*12),G.m===void 0&&(G.m="q"in G?G.q:0),"V"in G){if(G.V<1||G.V>53)return null;"w"in G||(G.w=1),"Z"in G?(Je=dv(Au(G.y,0,1)),gt=Je.getUTCDay(),Je=gt>4||gt===0?Gh.ceil(Je):Gh(Je),Je=Lm.offset(Je,(G.V-1)*7),G.y=Je.getUTCFullYear(),G.m=Je.getUTCMonth(),G.d=Je.getUTCDate()+(G.w+6)%7):(Je=uv(Au(G.y,0,1)),gt=Je.getDay(),Je=gt>4||gt===0?Kh.ceil(Je):Kh(Je),Je=kd.offset(Je,(G.V-1)*7),G.y=Je.getFullYear(),G.m=Je.getMonth(),G.d=Je.getDate()+(G.w+6)%7)}else("W"in G||"U"in G)&&("w"in G||(G.w="u"in G?G.u%7:"W"in G?1:0),gt="Z"in G?dv(Au(G.y,0,1)).getUTCDay():uv(Au(G.y,0,1)).getDay(),G.m=0,G.d="W"in G?(G.w+6)%7+G.W*7-(gt+5)%7:G.w+G.U*7-(gt+6)%7);return"Z"in G?(G.H+=G.Z/100|0,G.M+=G.Z%100,dv(G)):uv(G)}}function H(W,Re,Ge,G){for(var He=0,Je=Re.length,gt=Ge.length,_t,Mt;He<Je;){if(G>=gt)return-1;if(_t=Re.charCodeAt(He++),_t===37){if(_t=Re.charAt(He++),Mt=T[_t in bN?Re.charAt(He++):_t],!Mt||(G=Mt(W,Ge,G))<0)return-1}else if(_t!=Ge.charCodeAt(G++))return-1}return G}function L(W,Re,Ge){var G=m.exec(Re.slice(Ge));return G?(W.p=f.get(G[0].toLowerCase()),Ge+G[0].length):-1}function q(W,Re,Ge){var G=x.exec(Re.slice(Ge));return G?(W.w=w.get(G[0].toLowerCase()),Ge+G[0].length):-1}function z(W,Re,Ge){var G=p.exec(Re.slice(Ge));return G?(W.w=y.get(G[0].toLowerCase()),Ge+G[0].length):-1}function U(W,Re,Ge){var G=_.exec(Re.slice(Ge));return G?(W.m=E.get(G[0].toLowerCase()),Ge+G[0].length):-1}function ne(W,Re,Ge){var G=b.exec(Re.slice(Ge));return G?(W.m=S.get(G[0].toLowerCase()),Ge+G[0].length):-1}function ie(W,Re,Ge){return H(W,t,Re,Ge)}function oe(W,Re,Ge){return H(W,r,Re,Ge)}function V(W,Re,Ge){return H(W,n,Re,Ge)}function Z(W){return l[W.getDay()]}function ee(W){return i[W.getDay()]}function re(W){return d[W.getMonth()]}function me(W){return u[W.getMonth()]}function I(W){return s[+(W.getHours()>=12)]}function M(W){return 1+~~(W.getMonth()/3)}function We(W){return l[W.getUTCDay()]}function te(W){return i[W.getUTCDay()]}function ve(W){return d[W.getUTCMonth()]}function he(W){return u[W.getUTCMonth()]}function ye(W){return s[+(W.getUTCHours()>=12)]}function le(W){return 1+~~(W.getUTCMonth()/3)}return{format:function(W){var Re=P(W+="",C);return Re.toString=function(){return W},Re},parse:function(W){var Re=F(W+="",!1);return Re.toString=function(){return W},Re},utcFormat:function(W){var Re=P(W+="",O);return Re.toString=function(){return W},Re},utcParse:function(W){var Re=F(W+="",!0);return Re.toString=function(){return W},Re}}}var bN={"-":"",_:" ",0:"0"},Wn=/^\s*\d+/,KW=/^%/,GW=/[\\^$*+?|[\]().{}]/g;function sr(e,t,r){var n=e<0?"-":"",s=(n?-e:e)+"",i=s.length;return n+(i<r?new Array(r-i+1).join(t)+s:s)}function YW(e){return e.replace(GW,"\\$&")}function Pu(e){return new RegExp("^(?:"+e.map(YW).join("|")+")","i")}function Ou(e){return new Map(e.map((t,r)=>[t.toLowerCase(),r]))}function JW(e,t,r){var n=Wn.exec(t.slice(r,r+1));return n?(e.w=+n[0],r+n[0].length):-1}function XW(e,t,r){var n=Wn.exec(t.slice(r,r+1));return n?(e.u=+n[0],r+n[0].length):-1}function QW(e,t,r){var n=Wn.exec(t.slice(r,r+2));return n?(e.U=+n[0],r+n[0].length):-1}function ZW(e,t,r){var n=Wn.exec(t.slice(r,r+2));return n?(e.V=+n[0],r+n[0].length):-1}function e9(e,t,r){var n=Wn.exec(t.slice(r,r+2));return n?(e.W=+n[0],r+n[0].length):-1}function jN(e,t,r){var n=Wn.exec(t.slice(r,r+4));return n?(e.y=+n[0],r+n[0].length):-1}function SN(e,t,r){var n=Wn.exec(t.slice(r,r+2));return n?(e.y=+n[0]+(+n[0]>68?1900:2e3),r+n[0].length):-1}function t9(e,t,r){var n=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(r,r+6));return n?(e.Z=n[1]?0:-(n[2]+(n[3]||"00")),r+n[0].length):-1}function r9(e,t,r){var n=Wn.exec(t.slice(r,r+1));return n?(e.q=n[0]*3-3,r+n[0].length):-1}function n9(e,t,r){var n=Wn.exec(t.slice(r,r+2));return n?(e.m=n[0]-1,r+n[0].length):-1}function kN(e,t,r){var n=Wn.exec(t.slice(r,r+2));return n?(e.d=+n[0],r+n[0].length):-1}function s9(e,t,r){var n=Wn.exec(t.slice(r,r+3));return n?(e.m=0,e.d=+n[0],r+n[0].length):-1}function _N(e,t,r){var n=Wn.exec(t.slice(r,r+2));return n?(e.H=+n[0],r+n[0].length):-1}function i9(e,t,r){var n=Wn.exec(t.slice(r,r+2));return n?(e.M=+n[0],r+n[0].length):-1}function a9(e,t,r){var n=Wn.exec(t.slice(r,r+2));return n?(e.S=+n[0],r+n[0].length):-1}function o9(e,t,r){var n=Wn.exec(t.slice(r,r+3));return n?(e.L=+n[0],r+n[0].length):-1}function l9(e,t,r){var n=Wn.exec(t.slice(r,r+6));return n?(e.L=Math.floor(n[0]/1e3),r+n[0].length):-1}function c9(e,t,r){var n=KW.exec(t.slice(r,r+1));return n?r+n[0].length:-1}function u9(e,t,r){var n=Wn.exec(t.slice(r));return n?(e.Q=+n[0],r+n[0].length):-1}function d9(e,t,r){var n=Wn.exec(t.slice(r));return n?(e.s=+n[0],r+n[0].length):-1}function NN(e,t){return sr(e.getDate(),t,2)}function f9(e,t){return sr(e.getHours(),t,2)}function h9(e,t){return sr(e.getHours()%12||12,t,2)}function m9(e,t){return sr(1+kd.count(Da(e),e),t,3)}function PP(e,t){return sr(e.getMilliseconds(),t,3)}function p9(e,t){return PP(e,t)+"000"}function g9(e,t){return sr(e.getMonth()+1,t,2)}function y9(e,t){return sr(e.getMinutes(),t,2)}function v9(e,t){return sr(e.getSeconds(),t,2)}function x9(e){var t=e.getDay();return t===0?7:t}function w9(e,t){return sr(zm.count(Da(e)-1,e),t,2)}function OP(e){var t=e.getDay();return t>=4||t===0?kc(e):kc.ceil(e)}function b9(e,t){return e=OP(e),sr(kc.count(Da(e),e)+(Da(e).getDay()===4),t,2)}function j9(e){return e.getDay()}function S9(e,t){return sr(Kh.count(Da(e)-1,e),t,2)}function k9(e,t){return sr(e.getFullYear()%100,t,2)}function _9(e,t){return e=OP(e),sr(e.getFullYear()%100,t,2)}function N9(e,t){return sr(e.getFullYear()%1e4,t,4)}function C9(e,t){var r=e.getDay();return e=r>=4||r===0?kc(e):kc.ceil(e),sr(e.getFullYear()%1e4,t,4)}function E9(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+sr(t/60|0,"0",2)+sr(t%60,"0",2)}function CN(e,t){return sr(e.getUTCDate(),t,2)}function A9(e,t){return sr(e.getUTCHours(),t,2)}function P9(e,t){return sr(e.getUTCHours()%12||12,t,2)}function O9(e,t){return sr(1+Lm.count(Ra(e),e),t,3)}function TP(e,t){return sr(e.getUTCMilliseconds(),t,3)}function T9(e,t){return TP(e,t)+"000"}function I9(e,t){return sr(e.getUTCMonth()+1,t,2)}function D9(e,t){return sr(e.getUTCMinutes(),t,2)}function R9(e,t){return sr(e.getUTCSeconds(),t,2)}function $9(e){var t=e.getUTCDay();return t===0?7:t}function M9(e,t){return sr(Um.count(Ra(e)-1,e),t,2)}function IP(e){var t=e.getUTCDay();return t>=4||t===0?_c(e):_c.ceil(e)}function F9(e,t){return e=IP(e),sr(_c.count(Ra(e),e)+(Ra(e).getUTCDay()===4),t,2)}function L9(e){return e.getUTCDay()}function z9(e,t){return sr(Gh.count(Ra(e)-1,e),t,2)}function U9(e,t){return sr(e.getUTCFullYear()%100,t,2)}function B9(e,t){return e=IP(e),sr(e.getUTCFullYear()%100,t,2)}function W9(e,t){return sr(e.getUTCFullYear()%1e4,t,4)}function V9(e,t){var r=e.getUTCDay();return e=r>=4||r===0?_c(e):_c.ceil(e),sr(e.getUTCFullYear()%1e4,t,4)}function q9(){return"+0000"}function EN(){return"%"}function AN(e){return+e}function PN(e){return Math.floor(+e/1e3)}var sc,DP,RP;H9({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function H9(e){return sc=HW(e),DP=sc.format,sc.parse,RP=sc.utcFormat,sc.utcParse,sc}function K9(e){return new Date(e)}function G9(e){return e instanceof Date?+e:+new Date(+e)}function ow(e,t,r,n,s,i,l,u,d,m){var f=Kx(),p=f.invert,y=f.domain,x=m(".%L"),w=m(":%S"),b=m("%I:%M"),S=m("%I %p"),_=m("%a %d"),E=m("%b %d"),C=m("%B"),O=m("%Y");function T(P){return(d(P)<P?x:u(P)<P?w:l(P)<P?b:i(P)<P?S:n(P)<P?s(P)<P?_:E:r(P)<P?C:O)(P)}return f.invert=function(P){return new Date(p(P))},f.domain=function(P){return arguments.length?y(Array.from(P,G9)):y().map(K9)},f.ticks=function(P){var F=y();return e(F[0],F[F.length-1],P??10)},f.tickFormat=function(P,F){return F==null?T:m(F)},f.nice=function(P){var F=y();return(!P||typeof P.range!="function")&&(P=t(F[0],F[F.length-1],P??10)),P?y(bP(F,P)):f},f.copy=function(){return Sd(f,ow(e,t,r,n,s,i,l,u,d,m))},f}function Y9(){return bi.apply(ow(VW,qW,Da,iw,zm,kd,nw,tw,Zo,DP).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function J9(){return bi.apply(ow(BW,WW,Ra,aw,Um,Lm,sw,rw,Zo,RP).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function Bm(){var e=0,t=1,r,n,s,i,l=ys,u=!1,d;function m(p){return p==null||isNaN(p=+p)?d:l(s===0?.5:(p=(i(p)-r)*s,u?Math.max(0,Math.min(1,p)):p))}m.domain=function(p){return arguments.length?([e,t]=p,r=i(e=+e),n=i(t=+t),s=r===n?0:1/(n-r),m):[e,t]},m.clamp=function(p){return arguments.length?(u=!!p,m):u},m.interpolator=function(p){return arguments.length?(l=p,m):l};function f(p){return function(y){var x,w;return arguments.length?([x,w]=y,l=p(x,w),m):[l(0),l(1)]}}return m.range=f(zc),m.rangeRound=f(Hx),m.unknown=function(p){return arguments.length?(d=p,m):d},function(p){return i=p,r=p(e),n=p(t),s=r===n?0:1/(n-r),m}}function So(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function $P(){var e=jo(Bm()(ys));return e.copy=function(){return So(e,$P())},Ua.apply(e,arguments)}function MP(){var e=Jx(Bm()).domain([1,10]);return e.copy=function(){return So(e,MP()).base(e.base())},Ua.apply(e,arguments)}function FP(){var e=Xx(Bm());return e.copy=function(){return So(e,FP()).constant(e.constant())},Ua.apply(e,arguments)}function lw(){var e=Qx(Bm());return e.copy=function(){return So(e,lw()).exponent(e.exponent())},Ua.apply(e,arguments)}function X9(){return lw.apply(null,arguments).exponent(.5)}function LP(){var e=[],t=ys;function r(n){if(n!=null&&!isNaN(n=+n))return t((bd(e,n,1)-1)/(e.length-1))}return r.domain=function(n){if(!arguments.length)return e.slice();e=[];for(let s of n)s!=null&&!isNaN(s=+s)&&e.push(s);return e.sort(go),r},r.interpolator=function(n){return arguments.length?(t=n,r):t},r.range=function(){return e.map((n,s)=>t(s/(e.length-1)))},r.quantiles=function(n){return Array.from({length:n+1},(s,i)=>$7(e,i/n))},r.copy=function(){return LP(t).domain(e)},Ua.apply(r,arguments)}function Wm(){var e=0,t=.5,r=1,n=1,s,i,l,u,d,m=ys,f,p=!1,y;function x(b){return isNaN(b=+b)?y:(b=.5+((b=+f(b))-i)*(n*b<n*i?u:d),m(p?Math.max(0,Math.min(1,b)):b))}x.domain=function(b){return arguments.length?([e,t,r]=b,s=f(e=+e),i=f(t=+t),l=f(r=+r),u=s===i?0:.5/(i-s),d=i===l?0:.5/(l-i),n=i<s?-1:1,x):[e,t,r]},x.clamp=function(b){return arguments.length?(p=!!b,x):p},x.interpolator=function(b){return arguments.length?(m=b,x):m};function w(b){return function(S){var _,E,C;return arguments.length?([_,E,C]=S,m=cW(b,[_,E,C]),x):[m(0),m(.5),m(1)]}}return x.range=w(zc),x.rangeRound=w(Hx),x.unknown=function(b){return arguments.length?(y=b,x):y},function(b){return f=b,s=b(e),i=b(t),l=b(r),u=s===i?0:.5/(i-s),d=i===l?0:.5/(l-i),n=i<s?-1:1,x}}function zP(){var e=jo(Wm()(ys));return e.copy=function(){return So(e,zP())},Ua.apply(e,arguments)}function UP(){var e=Jx(Wm()).domain([.1,1,10]);return e.copy=function(){return So(e,UP()).base(e.base())},Ua.apply(e,arguments)}function BP(){var e=Xx(Wm());return e.copy=function(){return So(e,BP()).constant(e.constant())},Ua.apply(e,arguments)}function cw(){var e=Qx(Wm());return e.copy=function(){return So(e,cw()).exponent(e.exponent())},Ua.apply(e,arguments)}function Q9(){return cw.apply(null,arguments).exponent(.5)}const Lu=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:Wx,scaleDiverging:zP,scaleDivergingLog:UP,scaleDivergingPow:cw,scaleDivergingSqrt:Q9,scaleDivergingSymlog:BP,scaleIdentity:wP,scaleImplicit:E0,scaleLinear:xP,scaleLog:jP,scaleOrdinal:Bx,scalePoint:L7,scalePow:Zx,scaleQuantile:_P,scaleQuantize:NP,scaleRadial:kP,scaleSequential:$P,scaleSequentialLog:MP,scaleSequentialPow:lw,scaleSequentialQuantile:LP,scaleSequentialSqrt:X9,scaleSequentialSymlog:FP,scaleSqrt:TW,scaleSymlog:SP,scaleThreshold:CP,scaleTime:Y9,scaleUtc:J9,tickFormat:vP},Symbol.toStringTag,{value:"Module"}));var ko=e=>e.chartData,Z9=ge([ko],e=>{var t=e.chartData!=null?e.chartData.length-1:0;return{chartData:e.chartData,computedData:e.computedData,dataEndIndex:t,dataStartIndex:0}}),uw=(e,t,r,n)=>n?Z9(e):ko(e);function ul(e){if(Array.isArray(e)&&e.length===2){var[t,r]=e;if(tn(t)&&tn(r))return!0}return!1}function ON(e,t,r){return r?e:[Math.min(e[0],t[0]),Math.max(e[1],t[1])]}function WP(e,t){if(t&&typeof e!="function"&&Array.isArray(e)&&e.length===2){var[r,n]=e,s,i;if(tn(r))s=r;else if(typeof r=="function")return;if(tn(n))i=n;else if(typeof n=="function")return;var l=[s,i];if(ul(l))return l}}function eV(e,t,r){if(!(!r&&t==null)){if(typeof e=="function"&&t!=null)try{var n=e(t,r);if(ul(n))return ON(n,t,r)}catch{}if(Array.isArray(e)&&e.length===2){var[s,i]=e,l,u;if(s==="auto")t!=null&&(l=Math.min(...t));else if(vt(s))l=s;else if(typeof s=="function")try{t!=null&&(l=s(t==null?void 0:t[0]))}catch{}else if(typeof s=="string"&&f_.test(s)){var d=f_.exec(s);if(d==null||t==null)l=void 0;else{var m=+d[1];l=t[0]-m}}else l=t==null?void 0:t[0];if(i==="auto")t!=null&&(u=Math.max(...t));else if(vt(i))u=i;else if(typeof i=="function")try{t!=null&&(u=i(t==null?void 0:t[1]))}catch{}else if(typeof i=="string"&&h_.test(i)){var f=h_.exec(i);if(f==null||t==null)u=void 0;else{var p=+f[1];u=t[1]+p}}else u=t==null?void 0:t[1];var y=[l,u];if(ul(y))return t==null?y:ON(y,t,r)}}}var Uc=1e9,tV={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},fw,Mr=!0,xi="[DecimalError] ",al=xi+"Invalid argument: ",dw=xi+"Exponent out of range: ",Bc=Math.floor,qo=Math.pow,rV=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,Qs,Ln=1e7,Pr=7,VP=9007199254740991,Yh=Bc(VP/Pr),et={};et.absoluteValue=et.abs=function(){var e=new this.constructor(this);return e.s&&(e.s=1),e};et.comparedTo=et.cmp=function(e){var t,r,n,s,i=this;if(e=new i.constructor(e),i.s!==e.s)return i.s||-e.s;if(i.e!==e.e)return i.e>e.e^i.s<0?1:-1;for(n=i.d.length,s=e.d.length,t=0,r=n<s?n:s;t<r;++t)if(i.d[t]!==e.d[t])return i.d[t]>e.d[t]^i.s<0?1:-1;return n===s?0:n>s^i.s<0?1:-1};et.decimalPlaces=et.dp=function(){var e=this,t=e.d.length-1,r=(t-e.e)*Pr;if(t=e.d[t],t)for(;t%10==0;t/=10)r--;return r<0?0:r};et.dividedBy=et.div=function(e){return Ca(this,new this.constructor(e))};et.dividedToIntegerBy=et.idiv=function(e){var t=this,r=t.constructor;return vr(Ca(t,new r(e),0,1),r.precision)};et.equals=et.eq=function(e){return!this.cmp(e)};et.exponent=function(){return gn(this)};et.greaterThan=et.gt=function(e){return this.cmp(e)>0};et.greaterThanOrEqualTo=et.gte=function(e){return this.cmp(e)>=0};et.isInteger=et.isint=function(){return this.e>this.d.length-2};et.isNegative=et.isneg=function(){return this.s<0};et.isPositive=et.ispos=function(){return this.s>0};et.isZero=function(){return this.s===0};et.lessThan=et.lt=function(e){return this.cmp(e)<0};et.lessThanOrEqualTo=et.lte=function(e){return this.cmp(e)<1};et.logarithm=et.log=function(e){var t,r=this,n=r.constructor,s=n.precision,i=s+5;if(e===void 0)e=new n(10);else if(e=new n(e),e.s<1||e.eq(Qs))throw Error(xi+"NaN");if(r.s<1)throw Error(xi+(r.s?"NaN":"-Infinity"));return r.eq(Qs)?new n(0):(Mr=!1,t=Ca(od(r,i),od(e,i),i),Mr=!0,vr(t,s))};et.minus=et.sub=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?KP(t,e):qP(t,(e.s=-e.s,e))};et.modulo=et.mod=function(e){var t,r=this,n=r.constructor,s=n.precision;if(e=new n(e),!e.s)throw Error(xi+"NaN");return r.s?(Mr=!1,t=Ca(r,e,0,1).times(e),Mr=!0,r.minus(t)):vr(new n(r),s)};et.naturalExponential=et.exp=function(){return HP(this)};et.naturalLogarithm=et.ln=function(){return od(this)};et.negated=et.neg=function(){var e=new this.constructor(this);return e.s=-e.s||0,e};et.plus=et.add=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?qP(t,e):KP(t,(e.s=-e.s,e))};et.precision=et.sd=function(e){var t,r,n,s=this;if(e!==void 0&&e!==!!e&&e!==1&&e!==0)throw Error(al+e);if(t=gn(s)+1,n=s.d.length-1,r=n*Pr+1,n=s.d[n],n){for(;n%10==0;n/=10)r--;for(n=s.d[0];n>=10;n/=10)r++}return e&&t>r?t:r};et.squareRoot=et.sqrt=function(){var e,t,r,n,s,i,l,u=this,d=u.constructor;if(u.s<1){if(!u.s)return new d(0);throw Error(xi+"NaN")}for(e=gn(u),Mr=!1,s=Math.sqrt(+u),s==0||s==1/0?(t=Zi(u.d),(t.length+e)%2==0&&(t+="0"),s=Math.sqrt(t),e=Bc((e+1)/2)-(e<0||e%2),s==1/0?t="5e"+e:(t=s.toExponential(),t=t.slice(0,t.indexOf("e")+1)+e),n=new d(t)):n=new d(s.toString()),r=d.precision,s=l=r+3;;)if(i=n,n=i.plus(Ca(u,i,l+2)).times(.5),Zi(i.d).slice(0,l)===(t=Zi(n.d)).slice(0,l)){if(t=t.slice(l-3,l+1),s==l&&t=="4999"){if(vr(i,r+1,0),i.times(i).eq(u)){n=i;break}}else if(t!="9999")break;l+=4}return Mr=!0,vr(n,r)};et.times=et.mul=function(e){var t,r,n,s,i,l,u,d,m,f=this,p=f.constructor,y=f.d,x=(e=new p(e)).d;if(!f.s||!e.s)return new p(0);for(e.s*=f.s,r=f.e+e.e,d=y.length,m=x.length,d<m&&(i=y,y=x,x=i,l=d,d=m,m=l),i=[],l=d+m,n=l;n--;)i.push(0);for(n=m;--n>=0;){for(t=0,s=d+n;s>n;)u=i[s]+x[n]*y[s-n-1]+t,i[s--]=u%Ln|0,t=u/Ln|0;i[s]=(i[s]+t)%Ln|0}for(;!i[--l];)i.pop();return t?++r:i.shift(),e.d=i,e.e=r,Mr?vr(e,p.precision):e};et.toDecimalPlaces=et.todp=function(e,t){var r=this,n=r.constructor;return r=new n(r),e===void 0?r:(sa(e,0,Uc),t===void 0?t=n.rounding:sa(t,0,8),vr(r,e+gn(r)+1,t))};et.toExponential=function(e,t){var r,n=this,s=n.constructor;return e===void 0?r=dl(n,!0):(sa(e,0,Uc),t===void 0?t=s.rounding:sa(t,0,8),n=vr(new s(n),e+1,t),r=dl(n,!0,e+1)),r};et.toFixed=function(e,t){var r,n,s=this,i=s.constructor;return e===void 0?dl(s):(sa(e,0,Uc),t===void 0?t=i.rounding:sa(t,0,8),n=vr(new i(s),e+gn(s)+1,t),r=dl(n.abs(),!1,e+gn(n)+1),s.isneg()&&!s.isZero()?"-"+r:r)};et.toInteger=et.toint=function(){var e=this,t=e.constructor;return vr(new t(e),gn(e)+1,t.rounding)};et.toNumber=function(){return+this};et.toPower=et.pow=function(e){var t,r,n,s,i,l,u=this,d=u.constructor,m=12,f=+(e=new d(e));if(!e.s)return new d(Qs);if(u=new d(u),!u.s){if(e.s<1)throw Error(xi+"Infinity");return u}if(u.eq(Qs))return u;if(n=d.precision,e.eq(Qs))return vr(u,n);if(t=e.e,r=e.d.length-1,l=t>=r,i=u.s,l){if((r=f<0?-f:f)<=VP){for(s=new d(Qs),t=Math.ceil(n/Pr+4),Mr=!1;r%2&&(s=s.times(u),IN(s.d,t)),r=Bc(r/2),r!==0;)u=u.times(u),IN(u.d,t);return Mr=!0,e.s<0?new d(Qs).div(s):vr(s,n)}}else if(i<0)throw Error(xi+"NaN");return i=i<0&&e.d[Math.max(t,r)]&1?-1:1,u.s=1,Mr=!1,s=e.times(od(u,n+m)),Mr=!0,s=HP(s),s.s=i,s};et.toPrecision=function(e,t){var r,n,s=this,i=s.constructor;return e===void 0?(r=gn(s),n=dl(s,r<=i.toExpNeg||r>=i.toExpPos)):(sa(e,1,Uc),t===void 0?t=i.rounding:sa(t,0,8),s=vr(new i(s),e,t),r=gn(s),n=dl(s,e<=r||r<=i.toExpNeg,e)),n};et.toSignificantDigits=et.tosd=function(e,t){var r=this,n=r.constructor;return e===void 0?(e=n.precision,t=n.rounding):(sa(e,1,Uc),t===void 0?t=n.rounding:sa(t,0,8)),vr(new n(r),e,t)};et.toString=et.valueOf=et.val=et.toJSON=et[Symbol.for("nodejs.util.inspect.custom")]=function(){var e=this,t=gn(e),r=e.constructor;return dl(e,t<=r.toExpNeg||t>=r.toExpPos)};function qP(e,t){var r,n,s,i,l,u,d,m,f=e.constructor,p=f.precision;if(!e.s||!t.s)return t.s||(t=new f(e)),Mr?vr(t,p):t;if(d=e.d,m=t.d,l=e.e,s=t.e,d=d.slice(),i=l-s,i){for(i<0?(n=d,i=-i,u=m.length):(n=m,s=l,u=d.length),l=Math.ceil(p/Pr),u=l>u?l+1:u+1,i>u&&(i=u,n.length=1),n.reverse();i--;)n.push(0);n.reverse()}for(u=d.length,i=m.length,u-i<0&&(i=u,n=m,m=d,d=n),r=0;i;)r=(d[--i]=d[i]+m[i]+r)/Ln|0,d[i]%=Ln;for(r&&(d.unshift(r),++s),u=d.length;d[--u]==0;)d.pop();return t.d=d,t.e=s,Mr?vr(t,p):t}function sa(e,t,r){if(e!==~~e||e<t||e>r)throw Error(al+e)}function Zi(e){var t,r,n,s=e.length-1,i="",l=e[0];if(s>0){for(i+=l,t=1;t<s;t++)n=e[t]+"",r=Pr-n.length,r&&(i+=co(r)),i+=n;l=e[t],n=l+"",r=Pr-n.length,r&&(i+=co(r))}else if(l===0)return"0";for(;l%10===0;)l/=10;return i+l}var Ca=(function(){function e(n,s){var i,l=0,u=n.length;for(n=n.slice();u--;)i=n[u]*s+l,n[u]=i%Ln|0,l=i/Ln|0;return l&&n.unshift(l),n}function t(n,s,i,l){var u,d;if(i!=l)d=i>l?1:-1;else for(u=d=0;u<i;u++)if(n[u]!=s[u]){d=n[u]>s[u]?1:-1;break}return d}function r(n,s,i){for(var l=0;i--;)n[i]-=l,l=n[i]<s[i]?1:0,n[i]=l*Ln+n[i]-s[i];for(;!n[0]&&n.length>1;)n.shift()}return function(n,s,i,l){var u,d,m,f,p,y,x,w,b,S,_,E,C,O,T,P,F,H,L=n.constructor,q=n.s==s.s?1:-1,z=n.d,U=s.d;if(!n.s)return new L(n);if(!s.s)throw Error(xi+"Division by zero");for(d=n.e-s.e,F=U.length,T=z.length,x=new L(q),w=x.d=[],m=0;U[m]==(z[m]||0);)++m;if(U[m]>(z[m]||0)&&--d,i==null?E=i=L.precision:l?E=i+(gn(n)-gn(s))+1:E=i,E<0)return new L(0);if(E=E/Pr+2|0,m=0,F==1)for(f=0,U=U[0],E++;(m<T||f)&&E--;m++)C=f*Ln+(z[m]||0),w[m]=C/U|0,f=C%U|0;else{for(f=Ln/(U[0]+1)|0,f>1&&(U=e(U,f),z=e(z,f),F=U.length,T=z.length),O=F,b=z.slice(0,F),S=b.length;S<F;)b[S++]=0;H=U.slice(),H.unshift(0),P=U[0],U[1]>=Ln/2&&++P;do f=0,u=t(U,b,F,S),u<0?(_=b[0],F!=S&&(_=_*Ln+(b[1]||0)),f=_/P|0,f>1?(f>=Ln&&(f=Ln-1),p=e(U,f),y=p.length,S=b.length,u=t(p,b,y,S),u==1&&(f--,r(p,F<y?H:U,y))):(f==0&&(u=f=1),p=U.slice()),y=p.length,y<S&&p.unshift(0),r(b,p,S),u==-1&&(S=b.length,u=t(U,b,F,S),u<1&&(f++,r(b,F<S?H:U,S))),S=b.length):u===0&&(f++,b=[0]),w[m++]=f,u&&b[0]?b[S++]=z[O]||0:(b=[z[O]],S=1);while((O++<T||b[0]!==void 0)&&E--)}return w[0]||w.shift(),x.e=d,vr(x,l?i+gn(x)+1:i)}})();function HP(e,t){var r,n,s,i,l,u,d=0,m=0,f=e.constructor,p=f.precision;if(gn(e)>16)throw Error(dw+gn(e));if(!e.s)return new f(Qs);for(Mr=!1,u=p,l=new f(.03125);e.abs().gte(.1);)e=e.times(l),m+=5;for(n=Math.log(qo(2,m))/Math.LN10*2+5|0,u+=n,r=s=i=new f(Qs),f.precision=u;;){if(s=vr(s.times(e),u),r=r.times(++d),l=i.plus(Ca(s,r,u)),Zi(l.d).slice(0,u)===Zi(i.d).slice(0,u)){for(;m--;)i=vr(i.times(i),u);return f.precision=p,t==null?(Mr=!0,vr(i,p)):i}i=l}}function gn(e){for(var t=e.e*Pr,r=e.d[0];r>=10;r/=10)t++;return t}function fv(e,t,r){if(t>e.LN10.sd())throw Mr=!0,r&&(e.precision=r),Error(xi+"LN10 precision limit exceeded");return vr(new e(e.LN10),t)}function co(e){for(var t="";e--;)t+="0";return t}function od(e,t){var r,n,s,i,l,u,d,m,f,p=1,y=10,x=e,w=x.d,b=x.constructor,S=b.precision;if(x.s<1)throw Error(xi+(x.s?"NaN":"-Infinity"));if(x.eq(Qs))return new b(0);if(t==null?(Mr=!1,m=S):m=t,x.eq(10))return t==null&&(Mr=!0),fv(b,m);if(m+=y,b.precision=m,r=Zi(w),n=r.charAt(0),i=gn(x),Math.abs(i)<15e14){for(;n<7&&n!=1||n==1&&r.charAt(1)>3;)x=x.times(e),r=Zi(x.d),n=r.charAt(0),p++;i=gn(x),n>1?(x=new b("0."+r),i++):x=new b(n+"."+r.slice(1))}else return d=fv(b,m+2,S).times(i+""),x=od(new b(n+"."+r.slice(1)),m-y).plus(d),b.precision=S,t==null?(Mr=!0,vr(x,S)):x;for(u=l=x=Ca(x.minus(Qs),x.plus(Qs),m),f=vr(x.times(x),m),s=3;;){if(l=vr(l.times(f),m),d=u.plus(Ca(l,new b(s),m)),Zi(d.d).slice(0,m)===Zi(u.d).slice(0,m))return u=u.times(2),i!==0&&(u=u.plus(fv(b,m+2,S).times(i+""))),u=Ca(u,new b(p),m),b.precision=S,t==null?(Mr=!0,vr(u,S)):u;u=d,s+=2}}function TN(e,t){var r,n,s;for((r=t.indexOf("."))>-1&&(t=t.replace(".","")),(n=t.search(/e/i))>0?(r<0&&(r=n),r+=+t.slice(n+1),t=t.substring(0,n)):r<0&&(r=t.length),n=0;t.charCodeAt(n)===48;)++n;for(s=t.length;t.charCodeAt(s-1)===48;)--s;if(t=t.slice(n,s),t){if(s-=n,r=r-n-1,e.e=Bc(r/Pr),e.d=[],n=(r+1)%Pr,r<0&&(n+=Pr),n<s){for(n&&e.d.push(+t.slice(0,n)),s-=Pr;n<s;)e.d.push(+t.slice(n,n+=Pr));t=t.slice(n),n=Pr-t.length}else n-=s;for(;n--;)t+="0";if(e.d.push(+t),Mr&&(e.e>Yh||e.e<-Yh))throw Error(dw+r)}else e.s=0,e.e=0,e.d=[0];return e}function vr(e,t,r){var n,s,i,l,u,d,m,f,p=e.d;for(l=1,i=p[0];i>=10;i/=10)l++;if(n=t-l,n<0)n+=Pr,s=t,m=p[f=0];else{if(f=Math.ceil((n+1)/Pr),i=p.length,f>=i)return e;for(m=i=p[f],l=1;i>=10;i/=10)l++;n%=Pr,s=n-Pr+l}if(r!==void 0&&(i=qo(10,l-s-1),u=m/i%10|0,d=t<0||p[f+1]!==void 0||m%i,d=r<4?(u||d)&&(r==0||r==(e.s<0?3:2)):u>5||u==5&&(r==4||d||r==6&&(n>0?s>0?m/qo(10,l-s):0:p[f-1])%10&1||r==(e.s<0?8:7))),t<1||!p[0])return d?(i=gn(e),p.length=1,t=t-i-1,p[0]=qo(10,(Pr-t%Pr)%Pr),e.e=Bc(-t/Pr)||0):(p.length=1,p[0]=e.e=e.s=0),e;if(n==0?(p.length=f,i=1,f--):(p.length=f+1,i=qo(10,Pr-n),p[f]=s>0?(m/qo(10,l-s)%qo(10,s)|0)*i:0),d)for(;;)if(f==0){(p[0]+=i)==Ln&&(p[0]=1,++e.e);break}else{if(p[f]+=i,p[f]!=Ln)break;p[f--]=0,i=1}for(n=p.length;p[--n]===0;)p.pop();if(Mr&&(e.e>Yh||e.e<-Yh))throw Error(dw+gn(e));return e}function KP(e,t){var r,n,s,i,l,u,d,m,f,p,y=e.constructor,x=y.precision;if(!e.s||!t.s)return t.s?t.s=-t.s:t=new y(e),Mr?vr(t,x):t;if(d=e.d,p=t.d,n=t.e,m=e.e,d=d.slice(),l=m-n,l){for(f=l<0,f?(r=d,l=-l,u=p.length):(r=p,n=m,u=d.length),s=Math.max(Math.ceil(x/Pr),u)+2,l>s&&(l=s,r.length=1),r.reverse(),s=l;s--;)r.push(0);r.reverse()}else{for(s=d.length,u=p.length,f=s<u,f&&(u=s),s=0;s<u;s++)if(d[s]!=p[s]){f=d[s]<p[s];break}l=0}for(f&&(r=d,d=p,p=r,t.s=-t.s),u=d.length,s=p.length-u;s>0;--s)d[u++]=0;for(s=p.length;s>l;){if(d[--s]<p[s]){for(i=s;i&&d[--i]===0;)d[i]=Ln-1;--d[i],d[s]+=Ln}d[s]-=p[s]}for(;d[--u]===0;)d.pop();for(;d[0]===0;d.shift())--n;return d[0]?(t.d=d,t.e=n,Mr?vr(t,x):t):new y(0)}function dl(e,t,r){var n,s=gn(e),i=Zi(e.d),l=i.length;return t?(r&&(n=r-l)>0?i=i.charAt(0)+"."+i.slice(1)+co(n):l>1&&(i=i.charAt(0)+"."+i.slice(1)),i=i+(s<0?"e":"e+")+s):s<0?(i="0."+co(-s-1)+i,r&&(n=r-l)>0&&(i+=co(n))):s>=l?(i+=co(s+1-l),r&&(n=r-s-1)>0&&(i=i+"."+co(n))):((n=s+1)<l&&(i=i.slice(0,n)+"."+i.slice(n)),r&&(n=r-l)>0&&(s+1===l&&(i+="."),i+=co(n))),e.s<0?"-"+i:i}function IN(e,t){if(e.length>t)return e.length=t,!0}function GP(e){var t,r,n;function s(i){var l=this;if(!(l instanceof s))return new s(i);if(l.constructor=s,i instanceof s){l.s=i.s,l.e=i.e,l.d=(i=i.d)?i.slice():i;return}if(typeof i=="number"){if(i*0!==0)throw Error(al+i);if(i>0)l.s=1;else if(i<0)i=-i,l.s=-1;else{l.s=0,l.e=0,l.d=[0];return}if(i===~~i&&i<1e7){l.e=0,l.d=[i];return}return TN(l,i.toString())}else if(typeof i!="string")throw Error(al+i);if(i.charCodeAt(0)===45?(i=i.slice(1),l.s=-1):l.s=1,rV.test(i))TN(l,i);else throw Error(al+i)}if(s.prototype=et,s.ROUND_UP=0,s.ROUND_DOWN=1,s.ROUND_CEIL=2,s.ROUND_FLOOR=3,s.ROUND_HALF_UP=4,s.ROUND_HALF_DOWN=5,s.ROUND_HALF_EVEN=6,s.ROUND_HALF_CEIL=7,s.ROUND_HALF_FLOOR=8,s.clone=GP,s.config=s.set=nV,e===void 0&&(e={}),e)for(n=["precision","rounding","toExpNeg","toExpPos","LN10"],t=0;t<n.length;)e.hasOwnProperty(r=n[t++])||(e[r]=this[r]);return s.config(e),s}function nV(e){if(!e||typeof e!="object")throw Error(xi+"Object expected");var t,r,n,s=["precision",1,Uc,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(t=0;t<s.length;t+=3)if((n=e[r=s[t]])!==void 0)if(Bc(n)===n&&n>=s[t+1]&&n<=s[t+2])this[r]=n;else throw Error(al+r+": "+n);if((n=e[r="LN10"])!==void 0)if(n==Math.LN10)this[r]=new this(n);else throw Error(al+r+": "+n);return this}var fw=GP(tV);Qs=new fw(1);const cr=fw;var sV=e=>e,YP={},JP=e=>e===YP,DN=e=>function t(){return arguments.length===0||arguments.length===1&&JP(arguments.length<=0?void 0:arguments[0])?t:e(...arguments)},XP=(e,t)=>e===1?t:DN(function(){for(var r=arguments.length,n=new Array(r),s=0;s<r;s++)n[s]=arguments[s];var i=n.filter(l=>l!==YP).length;return i>=e?t(...n):XP(e-i,DN(function(){for(var l=arguments.length,u=new Array(l),d=0;d<l;d++)u[d]=arguments[d];var m=n.map(f=>JP(f)?u.shift():f);return t(...m,...u)}))}),Vm=e=>XP(e.length,e),T0=(e,t)=>{for(var r=[],n=e;n<t;++n)r[n-e]=n;return r},iV=Vm((e,t)=>Array.isArray(t)?t.map(e):Object.keys(t).map(r=>t[r]).map(e)),aV=function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];if(!r.length)return sV;var s=r.reverse(),i=s[0],l=s.slice(1);return function(){return l.reduce((u,d)=>d(u),i(...arguments))}},I0=e=>Array.isArray(e)?e.reverse():e.split("").reverse().join(""),QP=e=>{var t=null,r=null;return function(){for(var n=arguments.length,s=new Array(n),i=0;i<n;i++)s[i]=arguments[i];return t&&s.every((l,u)=>{var d;return l===((d=t)===null||d===void 0?void 0:d[u])})||(t=s,r=e(...s)),r}};function ZP(e){var t;return e===0?t=1:t=Math.floor(new cr(e).abs().log(10).toNumber())+1,t}function eO(e,t,r){for(var n=new cr(e),s=0,i=[];n.lt(t)&&s<1e5;)i.push(n.toNumber()),n=n.add(r),s++;return i}Vm((e,t,r)=>{var n=+e,s=+t;return n+r*(s-n)});Vm((e,t,r)=>{var n=t-+e;return n=n||1/0,(r-e)/n});Vm((e,t,r)=>{var n=t-+e;return n=n||1/0,Math.max(0,Math.min(1,(r-e)/n))});var tO=e=>{var[t,r]=e,[n,s]=[t,r];return t>r&&([n,s]=[r,t]),[n,s]},rO=(e,t,r)=>{if(e.lte(0))return new cr(0);var n=ZP(e.toNumber()),s=new cr(10).pow(n),i=e.div(s),l=n!==1?.05:.1,u=new cr(Math.ceil(i.div(l).toNumber())).add(r).mul(l),d=u.mul(s);return t?new cr(d.toNumber()):new cr(Math.ceil(d.toNumber()))},oV=(e,t,r)=>{var n=new cr(1),s=new cr(e);if(!s.isint()&&r){var i=Math.abs(e);i<1?(n=new cr(10).pow(ZP(e)-1),s=new cr(Math.floor(s.div(n).toNumber())).mul(n)):i>1&&(s=new cr(Math.floor(e)))}else e===0?s=new cr(Math.floor((t-1)/2)):r||(s=new cr(Math.floor(e)));var l=Math.floor((t-1)/2),u=aV(iV(d=>s.add(new cr(d-l).mul(n)).toNumber()),T0);return u(0,t)},nO=function(t,r,n,s){var i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((r-t)/(n-1)))return{step:new cr(0),tickMin:new cr(0),tickMax:new cr(0)};var l=rO(new cr(r).sub(t).div(n-1),s,i),u;t<=0&&r>=0?u=new cr(0):(u=new cr(t).add(r).div(2),u=u.sub(new cr(u).mod(l)));var d=Math.ceil(u.sub(t).div(l).toNumber()),m=Math.ceil(new cr(r).sub(u).div(l).toNumber()),f=d+m+1;return f>n?nO(t,r,n,s,i+1):(f<n&&(m=r>0?m+(n-f):m,d=r>0?d:d+(n-f)),{step:l,tickMin:u.sub(new cr(d).mul(l)),tickMax:u.add(new cr(m).mul(l))})};function lV(e){var[t,r]=e,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,i=Math.max(n,2),[l,u]=tO([t,r]);if(l===-1/0||u===1/0){var d=u===1/0?[l,...T0(0,n-1).map(()=>1/0)]:[...T0(0,n-1).map(()=>-1/0),u];return t>r?I0(d):d}if(l===u)return oV(l,n,s);var{step:m,tickMin:f,tickMax:p}=nO(l,u,i,s,0),y=eO(f,p.add(new cr(.1).mul(m)),m);return t>r?I0(y):y}function cV(e,t){var[r,n]=e,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,[i,l]=tO([r,n]);if(i===-1/0||l===1/0)return[r,n];if(i===l)return[i];var u=Math.max(t,2),d=rO(new cr(l).sub(i).div(u-1),s,0),m=[...eO(new cr(i),new cr(l),d),l];return s===!1&&(m=m.map(f=>Math.round(f))),r>n?I0(m):m}var uV=QP(lV),dV=QP(cV),sO=e=>e.rootProps.maxBarSize,fV=e=>e.rootProps.barGap,iO=e=>e.rootProps.barCategoryGap,hV=e=>e.rootProps.barSize,qm=e=>e.rootProps.stackOffset,hw=e=>e.options.chartName,mw=e=>e.rootProps.syncId,aO=e=>e.rootProps.syncMethod,pw=e=>e.options.eventEmitter,Is={grid:-100,barBackground:-50,area:100,cursorRectangle:200,bar:300,line:400,axis:500,scatter:600,activeBar:1e3,cursorLine:1100,activeDot:1200,label:2e3},wa={allowDuplicatedCategory:!0,angleAxisId:0,reversed:!1,scale:"auto",tick:!0,type:"category"},Gs={allowDataOverflow:!1,allowDuplicatedCategory:!0,radiusAxisId:0,scale:"auto",tick:!0,tickCount:5,type:"number"},Hm=(e,t)=>{if(!(!e||!t))return e!=null&&e.reversed?[t[1],t[0]]:t},mV={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:!1,dataKey:void 0,domain:void 0,id:wa.angleAxisId,includeHidden:!1,name:void 0,reversed:wa.reversed,scale:wa.scale,tick:wa.tick,tickCount:void 0,ticks:void 0,type:wa.type,unit:void 0},pV={allowDataOverflow:Gs.allowDataOverflow,allowDecimals:!1,allowDuplicatedCategory:Gs.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:Gs.radiusAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:Gs.scale,tick:Gs.tick,tickCount:Gs.tickCount,ticks:void 0,type:Gs.type,unit:void 0},gV={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:wa.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:wa.angleAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:wa.scale,tick:wa.tick,tickCount:void 0,ticks:void 0,type:"number",unit:void 0},yV={allowDataOverflow:Gs.allowDataOverflow,allowDecimals:!1,allowDuplicatedCategory:Gs.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:Gs.radiusAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:Gs.scale,tick:Gs.tick,tickCount:Gs.tickCount,ticks:void 0,type:"category",unit:void 0},gw=(e,t)=>e.polarAxis.angleAxis[t]!=null?e.polarAxis.angleAxis[t]:e.layout.layoutType==="radial"?gV:mV,yw=(e,t)=>e.polarAxis.radiusAxis[t]!=null?e.polarAxis.radiusAxis[t]:e.layout.layoutType==="radial"?yV:pV,Km=e=>e.polarOptions,vw=ge([La,za,Bn],u7),oO=ge([Km,vw],(e,t)=>{if(e!=null)return zi(e.innerRadius,t,0)}),lO=ge([Km,vw],(e,t)=>{if(e!=null)return zi(e.outerRadius,t,t*.8)}),vV=e=>{if(e==null)return[0,0];var{startAngle:t,endAngle:r}=e;return[t,r]},cO=ge([Km],vV);ge([gw,cO],Hm);var uO=ge([vw,oO,lO],(e,t,r)=>{if(!(e==null||t==null||r==null))return[t,r]});ge([yw,uO],Hm);var dO=ge([ur,Km,oO,lO,La,za],(e,t,r,n,s,i)=>{if(!(e!=="centric"&&e!=="radial"||t==null||r==null||n==null)){var{cx:l,cy:u,startAngle:d,endAngle:m}=t;return{cx:zi(l,s,s/2),cy:zi(u,i,i/2),innerRadius:r,outerRadius:n,startAngle:d,endAngle:m,clockWise:!1}}}),Cn=(e,t)=>t,Gm=(e,t,r)=>r;function xw(e){return e==null?void 0:e.id}function fO(e,t,r){var{chartData:n=[]}=t,{allowDuplicatedCategory:s,dataKey:i}=r,l=new Map;return e.forEach(u=>{var d,m=(d=u.data)!==null&&d!==void 0?d:n;if(!(m==null||m.length===0)){var f=xw(u);m.forEach((p,y)=>{var x=i==null||s?y:String(vs(p,i,null)),w=vs(p,u.dataKey,0),b;l.has(x)?b=l.get(x):b={},Object.assign(b,{[f]:w}),l.set(x,b)})}}),Array.from(l.values())}function Ym(e){return e.stackId!=null&&e.dataKey!=null}var Jm=(e,t)=>e===t?!0:e==null||t==null?!1:e[0]===t[0]&&e[1]===t[1];function Xm(e,t){return Array.isArray(e)&&Array.isArray(t)&&e.length===0&&t.length===0?!0:e===t}function xV(e,t){if(e.length===t.length){for(var r=0;r<e.length;r++)if(e[r]!==t[r])return!1;return!0}return!1}var En=e=>{var t=ur(e);return t==="horizontal"?"xAxis":t==="vertical"?"yAxis":t==="centric"?"angleAxis":"radiusAxis"},Wc=e=>e.tooltip.settings.axisId;function RN(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Jh(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?RN(Object(r),!0).forEach(function(n){wV(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):RN(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function wV(e,t,r){return(t=bV(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function bV(e){var t=jV(e,"string");return typeof t=="symbol"?t:t+""}function jV(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var D0=[0,"auto"],qs={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:void 0,height:30,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"bottom",padding:{left:0,right:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"category",unit:void 0},hO=(e,t)=>e.cartesianAxis.xAxis[t],Ba=(e,t)=>{var r=hO(e,t);return r??qs},Hs={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:D0,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"left",padding:{top:0,bottom:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"number",unit:void 0,width:wd},mO=(e,t)=>e.cartesianAxis.yAxis[t],Wa=(e,t)=>{var r=mO(e,t);return r??Hs},SV={domain:[0,"auto"],includeHidden:!1,reversed:!1,allowDataOverflow:!1,allowDuplicatedCategory:!1,dataKey:void 0,id:0,name:"",range:[64,64],scale:"auto",type:"number",unit:""},ww=(e,t)=>{var r=e.cartesianAxis.zAxis[t];return r??SV},xs=(e,t,r)=>{switch(t){case"xAxis":return Ba(e,r);case"yAxis":return Wa(e,r);case"zAxis":return ww(e,r);case"angleAxis":return gw(e,r);case"radiusAxis":return yw(e,r);default:throw new Error("Unexpected axis type: ".concat(t))}},kV=(e,t,r)=>{switch(t){case"xAxis":return Ba(e,r);case"yAxis":return Wa(e,r);default:throw new Error("Unexpected axis type: ".concat(t))}},_d=(e,t,r)=>{switch(t){case"xAxis":return Ba(e,r);case"yAxis":return Wa(e,r);case"angleAxis":return gw(e,r);case"radiusAxis":return yw(e,r);default:throw new Error("Unexpected axis type: ".concat(t))}},pO=e=>e.graphicalItems.cartesianItems.some(t=>t.type==="bar")||e.graphicalItems.polarItems.some(t=>t.type==="radialBar");function gO(e,t){return r=>{switch(e){case"xAxis":return"xAxisId"in r&&r.xAxisId===t;case"yAxis":return"yAxisId"in r&&r.yAxisId===t;case"zAxis":return"zAxisId"in r&&r.zAxisId===t;case"angleAxis":return"angleAxisId"in r&&r.angleAxisId===t;case"radiusAxis":return"radiusAxisId"in r&&r.radiusAxisId===t;default:return!1}}}var bw=e=>e.graphicalItems.cartesianItems,_V=ge([Cn,Gm],gO),yO=(e,t,r)=>e.filter(r).filter(n=>(t==null?void 0:t.includeHidden)===!0?!0:!n.hide),Nd=ge([bw,xs,_V],yO,{memoizeOptions:{resultEqualityCheck:Xm}}),vO=ge([Nd],e=>e.filter(t=>t.type==="area"||t.type==="bar").filter(Ym)),xO=e=>e.filter(t=>!("stackId"in t)||t.stackId===void 0),NV=ge([Nd],xO),wO=e=>e.map(t=>t.data).filter(Boolean).flat(1),CV=ge([Nd],wO,{memoizeOptions:{resultEqualityCheck:Xm}}),bO=(e,t)=>{var{chartData:r=[],dataStartIndex:n,dataEndIndex:s}=t;return e.length>0?e:r.slice(n,s+1)},jw=ge([CV,uw],bO),jO=(e,t,r)=>(t==null?void 0:t.dataKey)!=null?e.map(n=>({value:vs(n,t.dataKey)})):r.length>0?r.map(n=>n.dataKey).flatMap(n=>e.map(s=>({value:vs(s,n)}))):e.map(n=>({value:n})),Qm=ge([jw,xs,Nd],jO);function SO(e,t){switch(e){case"xAxis":return t.direction==="x";case"yAxis":return t.direction==="y";default:return!1}}function sh(e){if(na(e)||e instanceof Date){var t=Number(e);if(tn(t))return t}}function $N(e){if(Array.isArray(e)){var t=[sh(e[0]),sh(e[1])];return ul(t)?t:void 0}var r=sh(e);if(r!=null)return[r,r]}function $a(e){return e.map(sh).filter(GL)}function EV(e,t,r){return!r||typeof t!="number"||ra(t)?[]:r.length?$a(r.flatMap(n=>{var s=vs(e,n.dataKey),i,l;if(Array.isArray(s)?[i,l]=s:i=l=s,!(!tn(i)||!tn(l)))return[t-i,t+l]})):[]}var An=e=>{var t=En(e),r=Wc(e);return _d(e,t,r)},kO=ge([An],e=>e==null?void 0:e.dataKey),AV=ge([vO,uw,An],fO),_O=(e,t,r)=>{var n={},s=t.reduce((i,l)=>(l.stackId==null||(i[l.stackId]==null&&(i[l.stackId]=[]),i[l.stackId].push(l)),i),n);return Object.fromEntries(Object.entries(s).map(i=>{var[l,u]=i,d=u.map(xw);return[l,{stackedData:uB(e,d,r),graphicalItems:u}]}))},R0=ge([AV,vO,qm],_O),NO=(e,t,r,n)=>{var{dataStartIndex:s,dataEndIndex:i}=t;if(n==null&&r!=="zAxis"){var l=pB(e,s,i);if(!(l!=null&&l[0]===0&&l[1]===0))return l}},PV=ge([xs],e=>e.allowDataOverflow),Sw=e=>{var t;if(e==null||!("domain"in e))return D0;if(e.domain!=null)return e.domain;if(e.ticks!=null){if(e.type==="number"){var r=$a(e.ticks);return[Math.min(...r),Math.max(...r)]}if(e.type==="category")return e.ticks.map(String)}return(t=e==null?void 0:e.domain)!==null&&t!==void 0?t:D0},CO=ge([xs],Sw),EO=ge([CO,PV],WP),OV=ge([R0,ko,Cn,EO],NO,{memoizeOptions:{resultEqualityCheck:Jm}}),kw=e=>e.errorBars,TV=(e,t,r)=>e.flatMap(n=>t[n.id]).filter(Boolean).filter(n=>SO(r,n)),Xh=function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];var s=r.filter(Boolean);if(s.length!==0){var i=s.flat(),l=Math.min(...i),u=Math.max(...i);return[l,u]}},AO=(e,t,r,n,s)=>{var i,l;if(r.length>0&&e.forEach(u=>{r.forEach(d=>{var m,f,p=(m=n[d.id])===null||m===void 0?void 0:m.filter(_=>SO(s,_)),y=vs(u,(f=t.dataKey)!==null&&f!==void 0?f:d.dataKey),x=EV(u,y,p);if(x.length>=2){var w=Math.min(...x),b=Math.max(...x);(i==null||w<i)&&(i=w),(l==null||b>l)&&(l=b)}var S=$N(y);S!=null&&(i=i==null?S[0]:Math.min(i,S[0]),l=l==null?S[1]:Math.max(l,S[1]))})}),(t==null?void 0:t.dataKey)!=null&&e.forEach(u=>{var d=$N(vs(u,t.dataKey));d!=null&&(i=i==null?d[0]:Math.min(i,d[0]),l=l==null?d[1]:Math.max(l,d[1]))}),tn(i)&&tn(l))return[i,l]},IV=ge([jw,xs,NV,kw,Cn],AO,{memoizeOptions:{resultEqualityCheck:Jm}});function DV(e){var{value:t}=e;if(na(t)||t instanceof Date)return t}var RV=(e,t,r)=>{var n=e.map(DV).filter(s=>s!=null);return r&&(t.dataKey==null||t.allowDuplicatedCategory&&tA(n))?lP(0,e.length):t.allowDuplicatedCategory?n:Array.from(new Set(n))},PO=e=>e.referenceElements.dots,Vc=(e,t,r)=>e.filter(n=>n.ifOverflow==="extendDomain").filter(n=>t==="xAxis"?n.xAxisId===r:n.yAxisId===r),$V=ge([PO,Cn,Gm],Vc),OO=e=>e.referenceElements.areas,MV=ge([OO,Cn,Gm],Vc),TO=e=>e.referenceElements.lines,FV=ge([TO,Cn,Gm],Vc),IO=(e,t)=>{var r=$a(e.map(n=>t==="xAxis"?n.x:n.y));if(r.length!==0)return[Math.min(...r),Math.max(...r)]},LV=ge($V,Cn,IO),DO=(e,t)=>{var r=$a(e.flatMap(n=>[t==="xAxis"?n.x1:n.y1,t==="xAxis"?n.x2:n.y2]));if(r.length!==0)return[Math.min(...r),Math.max(...r)]},zV=ge([MV,Cn],DO);function UV(e){var t;if(e.x!=null)return $a([e.x]);var r=(t=e.segment)===null||t===void 0?void 0:t.map(n=>n.x);return r==null||r.length===0?[]:$a(r)}function BV(e){var t;if(e.y!=null)return $a([e.y]);var r=(t=e.segment)===null||t===void 0?void 0:t.map(n=>n.y);return r==null||r.length===0?[]:$a(r)}var RO=(e,t)=>{var r=e.flatMap(n=>t==="xAxis"?UV(n):BV(n));if(r.length!==0)return[Math.min(...r),Math.max(...r)]},WV=ge([FV,Cn],RO),VV=ge(LV,WV,zV,(e,t,r)=>Xh(e,r,t)),$O=(e,t,r,n,s,i,l,u)=>{if(r!=null)return r;var d=l==="vertical"&&u==="xAxis"||l==="horizontal"&&u==="yAxis",m=d?Xh(n,i,s):Xh(i,s);return eV(t,m,e.allowDataOverflow)},qV=ge([xs,CO,EO,OV,IV,VV,ur,Cn],$O,{memoizeOptions:{resultEqualityCheck:Jm}}),HV=[0,1],MO=(e,t,r,n,s,i,l)=>{if(!((e==null||r==null||r.length===0)&&l===void 0)){var{dataKey:u,type:d}=e,m=yl(t,i);if(m&&u==null){var f;return lP(0,(f=r==null?void 0:r.length)!==null&&f!==void 0?f:0)}return d==="category"?RV(n,e,m):s==="expand"?HV:l}},_w=ge([xs,ur,jw,Qm,qm,Cn,qV],MO),FO=(e,t,r,n,s)=>{if(e!=null){var{scale:i,type:l}=e;if(i==="auto")return t==="radial"&&s==="radiusAxis"?"band":t==="radial"&&s==="angleAxis"?"linear":l==="category"&&n&&(n.indexOf("LineChart")>=0||n.indexOf("AreaChart")>=0||n.indexOf("ComposedChart")>=0&&!r)?"point":l==="category"?"band":"linear";if(typeof i=="string"){var u="scale".concat(yd(i));return u in Lu?u:"point"}}},Cd=ge([xs,ur,pO,hw,Cn],FO);function KV(e){if(e!=null){if(e in Lu)return Lu[e]();var t="scale".concat(yd(e));if(t in Lu)return Lu[t]()}}function Nw(e,t,r,n){if(!(r==null||n==null)){if(typeof e.scale=="function")return e.scale.copy().domain(r).range(n);var s=KV(t);if(s!=null){var i=s.domain(r).range(n);return iB(i),i}}}var LO=(e,t,r)=>{var n=Sw(t);if(!(r!=="auto"&&r!=="linear")){if(t!=null&&t.tickCount&&Array.isArray(n)&&(n[0]==="auto"||n[1]==="auto")&&ul(e))return uV(e,t.tickCount,t.allowDecimals);if(t!=null&&t.tickCount&&t.type==="number"&&ul(e))return dV(e,t.tickCount,t.allowDecimals)}},Cw=ge([_w,_d,Cd],LO),zO=(e,t,r,n)=>{if(n!=="angleAxis"&&(e==null?void 0:e.type)==="number"&&ul(t)&&Array.isArray(r)&&r.length>0){var s=t[0],i=r[0],l=t[1],u=r[r.length-1];return[Math.min(s,i),Math.max(l,u)]}return t},GV=ge([xs,_w,Cw,Cn],zO),YV=ge(Qm,xs,(e,t)=>{if(!(!t||t.type!=="number")){var r=1/0,n=Array.from($a(e.map(u=>u.value))).sort((u,d)=>u-d);if(n.length<2)return 1/0;var s=n[n.length-1]-n[0];if(s===0)return 1/0;for(var i=0;i<n.length-1;i++){var l=n[i+1]-n[i];r=Math.min(r,l)}return r/s}}),UO=ge(YV,ur,iO,Bn,(e,t,r,n)=>n,(e,t,r,n,s)=>{if(!tn(e))return 0;var i=t==="vertical"?n.height:n.width;if(s==="gap")return e*i/2;if(s==="no-gap"){var l=zi(r,e*i),u=e*i/2;return u-l-(u-l)/i*l}return 0}),JV=(e,t)=>{var r=Ba(e,t);return r==null||typeof r.padding!="string"?0:UO(e,"xAxis",t,r.padding)},XV=(e,t)=>{var r=Wa(e,t);return r==null||typeof r.padding!="string"?0:UO(e,"yAxis",t,r.padding)},QV=ge(Ba,JV,(e,t)=>{var r,n;if(e==null)return{left:0,right:0};var{padding:s}=e;return typeof s=="string"?{left:t,right:t}:{left:((r=s.left)!==null&&r!==void 0?r:0)+t,right:((n=s.right)!==null&&n!==void 0?n:0)+t}}),ZV=ge(Wa,XV,(e,t)=>{var r,n;if(e==null)return{top:0,bottom:0};var{padding:s}=e;return typeof s=="string"?{top:t,bottom:t}:{top:((r=s.top)!==null&&r!==void 0?r:0)+t,bottom:((n=s.bottom)!==null&&n!==void 0?n:0)+t}}),eq=ge([Bn,QV,Dm,Im,(e,t,r)=>r],(e,t,r,n,s)=>{var{padding:i}=n;return s?[i.left,r.width-i.right]:[e.left+t.left,e.left+e.width-t.right]}),tq=ge([Bn,ur,ZV,Dm,Im,(e,t,r)=>r],(e,t,r,n,s,i)=>{var{padding:l}=s;return i?[n.height-l.bottom,l.top]:t==="horizontal"?[e.top+e.height-r.bottom,e.top+r.top]:[e.top+r.top,e.top+e.height-r.bottom]}),Ed=(e,t,r,n)=>{var s;switch(t){case"xAxis":return eq(e,r,n);case"yAxis":return tq(e,r,n);case"zAxis":return(s=ww(e,r))===null||s===void 0?void 0:s.range;case"angleAxis":return cO(e);case"radiusAxis":return uO(e,r);default:return}},BO=ge([xs,Ed],Hm),qc=ge([xs,Cd,GV,BO],Nw);ge([Nd,kw,Cn],TV);function WO(e,t){return e.id<t.id?-1:e.id>t.id?1:0}var Zm=(e,t)=>t,ep=(e,t,r)=>r,rq=ge(Om,Zm,ep,(e,t,r)=>e.filter(n=>n.orientation===t).filter(n=>n.mirror===r).sort(WO)),nq=ge(Tm,Zm,ep,(e,t,r)=>e.filter(n=>n.orientation===t).filter(n=>n.mirror===r).sort(WO)),VO=(e,t)=>({width:e.width,height:t.height}),sq=(e,t)=>{var r=typeof t.width=="number"?t.width:wd;return{width:r,height:e.height}},qO=ge(Bn,Ba,VO),iq=(e,t,r)=>{switch(t){case"top":return e.top;case"bottom":return r-e.bottom;default:return 0}},aq=(e,t,r)=>{switch(t){case"left":return e.left;case"right":return r-e.right;default:return 0}},oq=ge(za,Bn,rq,Zm,ep,(e,t,r,n,s)=>{var i={},l;return r.forEach(u=>{var d=VO(t,u);l==null&&(l=iq(t,n,e));var m=n==="top"&&!s||n==="bottom"&&s;i[u.id]=l-Number(m)*d.height,l+=(m?-1:1)*d.height}),i}),lq=ge(La,Bn,nq,Zm,ep,(e,t,r,n,s)=>{var i={},l;return r.forEach(u=>{var d=sq(t,u);l==null&&(l=aq(t,n,e));var m=n==="left"&&!s||n==="right"&&s;i[u.id]=l-Number(m)*d.width,l+=(m?-1:1)*d.width}),i}),cq=(e,t)=>{var r=Ba(e,t);if(r!=null)return oq(e,r.orientation,r.mirror)},uq=ge([Bn,Ba,cq,(e,t)=>t],(e,t,r,n)=>{if(t!=null){var s=r==null?void 0:r[n];return s==null?{x:e.left,y:0}:{x:e.left,y:s}}}),dq=(e,t)=>{var r=Wa(e,t);if(r!=null)return lq(e,r.orientation,r.mirror)},fq=ge([Bn,Wa,dq,(e,t)=>t],(e,t,r,n)=>{if(t!=null){var s=r==null?void 0:r[n];return s==null?{x:0,y:e.top}:{x:s,y:e.top}}}),HO=ge(Bn,Wa,(e,t)=>{var r=typeof t.width=="number"?t.width:wd;return{width:r,height:e.height}}),MN=(e,t,r)=>{switch(t){case"xAxis":return qO(e,r).width;case"yAxis":return HO(e,r).height;default:return}},KO=(e,t,r,n)=>{if(r!=null){var{allowDuplicatedCategory:s,type:i,dataKey:l}=r,u=yl(e,n),d=t.map(m=>m.value);if(l&&u&&i==="category"&&s&&tA(d))return d}},Ew=ge([ur,Qm,xs,Cn],KO),GO=(e,t,r,n)=>{if(!(r==null||r.dataKey==null)){var{type:s,scale:i}=r,l=yl(e,n);if(l&&(s==="number"||i!=="auto"))return t.map(u=>u.value)}},Aw=ge([ur,Qm,_d,Cn],GO);ge([ur,kV,Cd,qc,Ew,Aw,Ed,Cw,Cn],(e,t,r,n,s,i,l,u,d)=>{if(t!=null){var m=yl(e,d);return{angle:t.angle,interval:t.interval,minTickGap:t.minTickGap,orientation:t.orientation,tick:t.tick,tickCount:t.tickCount,tickFormatter:t.tickFormatter,ticks:t.ticks,type:t.type,unit:t.unit,axisType:d,categoricalDomain:i,duplicateDomain:s,isCategorical:m,niceTicks:u,range:l,realScaleType:r,scale:n}}});var hq=(e,t,r,n,s,i,l,u,d)=>{if(!(t==null||n==null)){var m=yl(e,d),{type:f,ticks:p,tickCount:y}=t,x=r==="scaleBand"&&typeof n.bandwidth=="function"?n.bandwidth()/2:2,w=f==="category"&&n.bandwidth?n.bandwidth()/x:0;w=d==="angleAxis"&&i!=null&&i.length>=2?Zs(i[0]-i[1])*2*w:w;var b=p||s;if(b){var S=b.map((_,E)=>{var C=l?l.indexOf(_):_;return{index:E,coordinate:n(C)+w,value:_,offset:w}});return S.filter(_=>tn(_.coordinate))}return m&&u?u.map((_,E)=>({coordinate:n(_)+w,value:_,index:E,offset:w})).filter(_=>tn(_.coordinate)):n.ticks?n.ticks(y).map(_=>({coordinate:n(_)+w,value:_,offset:w})):n.domain().map((_,E)=>({coordinate:n(_)+w,value:l?l[_]:_,index:E,offset:w}))}},YO=ge([ur,_d,Cd,qc,Cw,Ed,Ew,Aw,Cn],hq),mq=(e,t,r,n,s,i,l)=>{if(!(t==null||r==null||n==null||n[0]===n[1])){var u=yl(e,l),{tickCount:d}=t,m=0;return m=l==="angleAxis"&&(n==null?void 0:n.length)>=2?Zs(n[0]-n[1])*2*m:m,u&&i?i.map((f,p)=>({coordinate:r(f)+m,value:f,index:p,offset:m})):r.ticks?r.ticks(d).map(f=>({coordinate:r(f)+m,value:f,offset:m})):r.domain().map((f,p)=>({coordinate:r(f)+m,value:s?s[f]:f,index:p,offset:m}))}},Nc=ge([ur,_d,qc,Ed,Ew,Aw,Cn],mq),Cc=ge(xs,qc,(e,t)=>{if(!(e==null||t==null))return Jh(Jh({},e),{},{scale:t})}),pq=ge([xs,Cd,_w,BO],Nw);ge((e,t,r)=>ww(e,r),pq,(e,t)=>{if(!(e==null||t==null))return Jh(Jh({},e),{},{scale:t})});var gq=ge([ur,Om,Tm],(e,t,r)=>{switch(e){case"horizontal":return t.some(n=>n.reversed)?"right-to-left":"left-to-right";case"vertical":return r.some(n=>n.reversed)?"bottom-to-top":"top-to-bottom";case"centric":case"radial":return"left-to-right";default:return}}),JO=e=>e.options.defaultTooltipEventType,XO=e=>e.options.validateTooltipEventTypes;function QO(e,t,r){if(e==null)return t;var n=e?"axis":"item";return r==null?t:r.includes(n)?n:t}function Pw(e,t){var r=JO(e),n=XO(e);return QO(t,r,n)}function yq(e){return dt(t=>Pw(t,e))}var ZO=(e,t)=>{var r,n=Number(t);if(!(ra(n)||t==null))return n>=0?e==null||(r=e[n])===null||r===void 0?void 0:r.value:void 0},vq=e=>e.tooltip.settings,mo={active:!1,index:null,dataKey:void 0,coordinate:void 0},xq={itemInteraction:{click:mo,hover:mo},axisInteraction:{click:mo,hover:mo},keyboardInteraction:mo,syncInteraction:{active:!1,index:null,dataKey:void 0,label:void 0,coordinate:void 0,sourceViewBox:void 0},tooltipItemPayloads:[],settings:{shared:void 0,trigger:"hover",axisId:0,active:!1,defaultIndex:void 0}},eT=Rs({name:"tooltip",initialState:xq,reducers:{addTooltipEntrySettings:{reducer(e,t){e.tooltipItemPayloads.push(t.payload)},prepare:kn()},removeTooltipEntrySettings:{reducer(e,t){var r=Na(e).tooltipItemPayloads.indexOf(t.payload);r>-1&&e.tooltipItemPayloads.splice(r,1)},prepare:kn()},setTooltipSettingsState(e,t){e.settings=t.payload},setActiveMouseOverItemIndex(e,t){e.syncInteraction.active=!1,e.keyboardInteraction.active=!1,e.itemInteraction.hover.active=!0,e.itemInteraction.hover.index=t.payload.activeIndex,e.itemInteraction.hover.dataKey=t.payload.activeDataKey,e.itemInteraction.hover.coordinate=t.payload.activeCoordinate},mouseLeaveChart(e){e.itemInteraction.hover.active=!1,e.axisInteraction.hover.active=!1},mouseLeaveItem(e){e.itemInteraction.hover.active=!1},setActiveClickItemIndex(e,t){e.syncInteraction.active=!1,e.itemInteraction.click.active=!0,e.keyboardInteraction.active=!1,e.itemInteraction.click.index=t.payload.activeIndex,e.itemInteraction.click.dataKey=t.payload.activeDataKey,e.itemInteraction.click.coordinate=t.payload.activeCoordinate},setMouseOverAxisIndex(e,t){e.syncInteraction.active=!1,e.axisInteraction.hover.active=!0,e.keyboardInteraction.active=!1,e.axisInteraction.hover.index=t.payload.activeIndex,e.axisInteraction.hover.dataKey=t.payload.activeDataKey,e.axisInteraction.hover.coordinate=t.payload.activeCoordinate},setMouseClickAxisIndex(e,t){e.syncInteraction.active=!1,e.keyboardInteraction.active=!1,e.axisInteraction.click.active=!0,e.axisInteraction.click.index=t.payload.activeIndex,e.axisInteraction.click.dataKey=t.payload.activeDataKey,e.axisInteraction.click.coordinate=t.payload.activeCoordinate},setSyncInteraction(e,t){e.syncInteraction=t.payload},setKeyboardInteraction(e,t){e.keyboardInteraction.active=t.payload.active,e.keyboardInteraction.index=t.payload.activeIndex,e.keyboardInteraction.coordinate=t.payload.activeCoordinate,e.keyboardInteraction.dataKey=t.payload.activeDataKey}}}),{addTooltipEntrySettings:wq,removeTooltipEntrySettings:bq,setTooltipSettingsState:jq,setActiveMouseOverItemIndex:tT,mouseLeaveItem:Sq,mouseLeaveChart:rT,setActiveClickItemIndex:kq,setMouseOverAxisIndex:nT,setMouseClickAxisIndex:_q,setSyncInteraction:$0,setKeyboardInteraction:M0}=eT.actions,Nq=eT.reducer;function FN(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Hf(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?FN(Object(r),!0).forEach(function(n){Cq(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):FN(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Cq(e,t,r){return(t=Eq(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Eq(e){var t=Aq(e,"string");return typeof t=="symbol"?t:t+""}function Aq(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Pq(e,t,r){return t==="axis"?r==="click"?e.axisInteraction.click:e.axisInteraction.hover:r==="click"?e.itemInteraction.click:e.itemInteraction.hover}function Oq(e){return e.index!=null}var sT=(e,t,r,n)=>{if(t==null)return mo;var s=Pq(e,t,r);if(s==null)return mo;if(s.active)return s;if(e.keyboardInteraction.active)return e.keyboardInteraction;if(e.syncInteraction.active&&e.syncInteraction.index!=null)return e.syncInteraction;var i=e.settings.active===!0;if(Oq(s)){if(i)return Hf(Hf({},s),{},{active:!0})}else if(n!=null)return{active:!0,coordinate:void 0,dataKey:void 0,index:n};return Hf(Hf({},mo),{},{coordinate:s.coordinate})},Ow=(e,t)=>{var r=e==null?void 0:e.index;if(r==null)return null;var n=Number(r);if(!tn(n))return r;var s=0,i=1/0;return t.length>0&&(i=t.length-1),String(Math.max(s,Math.min(n,i)))},iT=(e,t,r,n,s,i,l,u)=>{if(!(i==null||u==null)){var d=l[0],m=d==null?void 0:u(d.positions,i);if(m!=null)return m;var f=s==null?void 0:s[Number(i)];if(f)switch(r){case"horizontal":return{x:f.coordinate,y:(n.top+t)/2};default:return{x:(n.left+e)/2,y:f.coordinate}}}},aT=(e,t,r,n)=>{if(t==="axis")return e.tooltipItemPayloads;if(e.tooltipItemPayloads.length===0)return[];var s;return r==="hover"?s=e.itemInteraction.hover.dataKey:s=e.itemInteraction.click.dataKey,s==null&&n!=null?[e.tooltipItemPayloads[0]]:e.tooltipItemPayloads.filter(i=>{var l;return((l=i.settings)===null||l===void 0?void 0:l.dataKey)===s})},Ad=e=>e.options.tooltipPayloadSearcher,Hc=e=>e.tooltip;function LN(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function zN(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?LN(Object(r),!0).forEach(function(n){Tq(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):LN(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Tq(e,t,r){return(t=Iq(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Iq(e){var t=Dq(e,"string");return typeof t=="symbol"?t:t+""}function Dq(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Rq(e,t){return e??t}var oT=(e,t,r,n,s,i,l)=>{if(!(t==null||i==null)){var{chartData:u,computedData:d,dataStartIndex:m,dataEndIndex:f}=r,p=[];return e.reduce((y,x)=>{var w,{dataDefinedOnItem:b,settings:S}=x,_=Rq(b,u),E=Array.isArray(_)?VA(_,m,f):_,C=(w=S==null?void 0:S.dataKey)!==null&&w!==void 0?w:n,O=S==null?void 0:S.nameKey,T;if(n&&Array.isArray(E)&&!Array.isArray(E[0])&&l==="axis"?T=KL(E,n,s):T=i(E,t,d,O),Array.isArray(T))T.forEach(F=>{var H=zN(zN({},S),{},{name:F.name,unit:F.unit,color:void 0,fill:void 0});y.push(m_({tooltipEntrySettings:H,dataKey:F.dataKey,payload:F.payload,value:vs(F.payload,F.dataKey),name:F.name}))});else{var P;y.push(m_({tooltipEntrySettings:S,dataKey:C,payload:T,value:vs(T,C),name:(P=vs(T,O))!==null&&P!==void 0?P:S==null?void 0:S.name}))}return y},p)}},Tw=ge([An,ur,pO,hw,En],FO),$q=ge([e=>e.graphicalItems.cartesianItems,e=>e.graphicalItems.polarItems],(e,t)=>[...e,...t]),Mq=ge([En,Wc],gO),Pd=ge([$q,An,Mq],yO,{memoizeOptions:{resultEqualityCheck:Xm}}),Fq=ge([Pd],e=>e.filter(Ym)),Lq=ge([Pd],wO,{memoizeOptions:{resultEqualityCheck:Xm}}),Kc=ge([Lq,ko],bO),zq=ge([Fq,ko,An],fO),Iw=ge([Kc,An,Pd],jO),lT=ge([An],Sw),Uq=ge([An],e=>e.allowDataOverflow),cT=ge([lT,Uq],WP),Bq=ge([Pd],e=>e.filter(Ym)),Wq=ge([zq,Bq,qm],_O),Vq=ge([Wq,ko,En,cT],NO),qq=ge([Pd],xO),Hq=ge([Kc,An,qq,kw,En],AO,{memoizeOptions:{resultEqualityCheck:Jm}}),Kq=ge([PO,En,Wc],Vc),Gq=ge([Kq,En],IO),Yq=ge([OO,En,Wc],Vc),Jq=ge([Yq,En],DO),Xq=ge([TO,En,Wc],Vc),Qq=ge([Xq,En],RO),Zq=ge([Gq,Qq,Jq],Xh),eH=ge([An,lT,cT,Vq,Hq,Zq,ur,En],$O),uT=ge([An,ur,Kc,Iw,qm,En,eH],MO),tH=ge([uT,An,Tw],LO),rH=ge([An,uT,tH,En],zO),dT=e=>{var t=En(e),r=Wc(e),n=!1;return Ed(e,t,r,n)},fT=ge([An,dT],Hm),hT=ge([An,Tw,rH,fT],Nw),nH=ge([ur,Iw,An,En],KO),sH=ge([ur,Iw,An,En],GO),iH=(e,t,r,n,s,i,l,u)=>{if(t){var{type:d}=t,m=yl(e,u);if(n){var f=r==="scaleBand"&&n.bandwidth?n.bandwidth()/2:2,p=d==="category"&&n.bandwidth?n.bandwidth()/f:0;return p=u==="angleAxis"&&s!=null&&(s==null?void 0:s.length)>=2?Zs(s[0]-s[1])*2*p:p,m&&l?l.map((y,x)=>({coordinate:n(y)+p,value:y,index:x,offset:p})):n.domain().map((y,x)=>({coordinate:n(y)+p,value:i?i[y]:y,index:x,offset:p}))}}},Va=ge([ur,An,Tw,hT,dT,nH,sH,En],iH),Dw=ge([JO,XO,vq],(e,t,r)=>QO(r.shared,e,t)),mT=e=>e.tooltip.settings.trigger,Rw=e=>e.tooltip.settings.defaultIndex,tp=ge([Hc,Dw,mT,Rw],sT),Ec=ge([tp,Kc],Ow),pT=ge([Va,Ec],ZO),gT=ge([tp],e=>{if(e)return e.dataKey}),yT=ge([Hc,Dw,mT,Rw],aT),aH=ge([La,za,ur,Bn,Va,Rw,yT,Ad],iT),oH=ge([tp,aH],(e,t)=>e!=null&&e.coordinate?e.coordinate:t),lH=ge([tp],e=>e.active),cH=ge([yT,Ec,ko,kO,pT,Ad,Dw],oT);ge([cH],e=>{if(e!=null){var t=e.map(r=>r.payload).filter(r=>r!=null);return Array.from(new Set(t))}});function UN(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function BN(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?UN(Object(r),!0).forEach(function(n){uH(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):UN(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function uH(e,t,r){return(t=dH(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function dH(e){var t=fH(e,"string");return typeof t=="symbol"?t:t+""}function fH(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var hH=()=>dt(An),mH=()=>{var e=hH(),t=dt(Va),r=dt(hT);return Dh(!e||!r?void 0:BN(BN({},e),{},{scale:r}),t)};function WN(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function ic(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?WN(Object(r),!0).forEach(function(n){pH(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):WN(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function pH(e,t,r){return(t=gH(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function gH(e){var t=yH(e,"string");return typeof t=="symbol"?t:t+""}function yH(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var vH=(e,t,r,n)=>{var s=t.find(i=>i&&i.index===r);if(s){if(e==="horizontal")return{x:s.coordinate,y:n.chartY};if(e==="vertical")return{x:n.chartX,y:s.coordinate}}return{x:0,y:0}},xH=(e,t,r,n)=>{var s=t.find(m=>m&&m.index===r);if(s){if(e==="centric"){var i=s.coordinate,{radius:l}=n;return ic(ic(ic({},n),Qn(n.cx,n.cy,l,i)),{},{angle:i,radius:l})}var u=s.coordinate,{angle:d}=n;return ic(ic(ic({},n),Qn(n.cx,n.cy,u,d)),{},{angle:d,radius:u})}return{angle:0,clockWise:!1,cx:0,cy:0,endAngle:0,innerRadius:0,outerRadius:0,radius:0,startAngle:0,x:0,y:0}};function wH(e,t){var{chartX:r,chartY:n}=e;return r>=t.left&&r<=t.left+t.width&&n>=t.top&&n<=t.top+t.height}var vT=(e,t,r,n,s)=>{var i,l=-1,u=(i=t==null?void 0:t.length)!==null&&i!==void 0?i:0;if(u<=1||e==null)return 0;if(n==="angleAxis"&&s!=null&&Math.abs(Math.abs(s[1]-s[0])-360)<=1e-6)for(var d=0;d<u;d++){var m=d>0?r[d-1].coordinate:r[u-1].coordinate,f=r[d].coordinate,p=d>=u-1?r[0].coordinate:r[d+1].coordinate,y=void 0;if(Zs(f-m)!==Zs(p-f)){var x=[];if(Zs(p-f)===Zs(s[1]-s[0])){y=p;var w=f+s[1]-s[0];x[0]=Math.min(w,(w+m)/2),x[1]=Math.max(w,(w+m)/2)}else{y=m;var b=p+s[1]-s[0];x[0]=Math.min(f,(b+f)/2),x[1]=Math.max(f,(b+f)/2)}var S=[Math.min(f,(y+f)/2),Math.max(f,(y+f)/2)];if(e>S[0]&&e<=S[1]||e>=x[0]&&e<=x[1]){({index:l}=r[d]);break}}else{var _=Math.min(m,p),E=Math.max(m,p);if(e>(_+f)/2&&e<=(E+f)/2){({index:l}=r[d]);break}}}else if(t){for(var C=0;C<u;C++)if(C===0&&e<=(t[C].coordinate+t[C+1].coordinate)/2||C>0&&C<u-1&&e>(t[C].coordinate+t[C-1].coordinate)/2&&e<=(t[C].coordinate+t[C+1].coordinate)/2||C===u-1&&e>(t[C].coordinate+t[C-1].coordinate)/2){({index:l}=t[C]);break}}return l},bH=()=>dt(hw),$w=(e,t)=>t,xT=(e,t,r)=>r,Mw=(e,t,r,n)=>n,jH=ge(Va,e=>_m(e,t=>t.coordinate)),Fw=ge([Hc,$w,xT,Mw],sT),wT=ge([Fw,Kc],Ow),SH=(e,t,r)=>{if(t!=null){var n=Hc(e);return t==="axis"?r==="hover"?n.axisInteraction.hover.dataKey:n.axisInteraction.click.dataKey:r==="hover"?n.itemInteraction.hover.dataKey:n.itemInteraction.click.dataKey}},bT=ge([Hc,$w,xT,Mw],aT),Qh=ge([La,za,ur,Bn,Va,Mw,bT,Ad],iT),kH=ge([Fw,Qh],(e,t)=>{var r;return(r=e.coordinate)!==null&&r!==void 0?r:t}),jT=ge([Va,wT],ZO),_H=ge([bT,wT,ko,kO,jT,Ad,$w],oT),NH=ge([Fw],e=>({isActive:e.active,activeIndex:e.index})),CH=(e,t,r,n,s,i,l)=>{if(!(!e||!r||!n||!s)&&wH(e,l)){var u=gB(e,t),d=vT(u,i,s,r,n),m=vH(t,s,d,e);return{activeIndex:String(d),activeCoordinate:m}}},EH=(e,t,r,n,s,i,l)=>{if(!(!e||!n||!s||!i||!r)){var u=p7(e,r);if(u){var d=yB(u,t),m=vT(d,l,i,n,s),f=xH(t,i,m,u);return{activeIndex:String(m),activeCoordinate:f}}}},AH=(e,t,r,n,s,i,l,u)=>{if(!(!e||!t||!n||!s||!i))return t==="horizontal"||t==="vertical"?CH(e,t,n,s,i,l,u):EH(e,t,r,n,s,i,l)},PH=ge(e=>e.zIndex.zIndexMap,(e,t)=>t,(e,t,r)=>r,(e,t,r)=>{if(t!=null){var n=e[t];if(n!=null)return r?n.panoramaElementId:n.elementId}}),OH=ge(e=>e.zIndex.zIndexMap,e=>{var t=Object.keys(e).map(n=>parseInt(n,10)).concat(Object.values(Is)),r=Array.from(new Set(t));return r.sort((n,s)=>n-s)},{memoizeOptions:{resultEqualityCheck:xV}});function VN(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function qN(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?VN(Object(r),!0).forEach(function(n){TH(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):VN(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function TH(e,t,r){return(t=IH(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function IH(e){var t=DH(e,"string");return typeof t=="symbol"?t:t+""}function DH(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var RH={},$H={zIndexMap:Object.values(Is).reduce((e,t)=>qN(qN({},e),{},{[t]:{elementId:void 0,panoramaElementId:void 0,consumers:0}}),RH)},MH=new Set(Object.values(Is));function FH(e){return MH.has(e)}var ST=Rs({name:"zIndex",initialState:$H,reducers:{registerZIndexPortal:{reducer:(e,t)=>{var{zIndex:r}=t.payload;e.zIndexMap[r]?e.zIndexMap[r].consumers+=1:e.zIndexMap[r]={consumers:1,elementId:void 0,panoramaElementId:void 0}},prepare:kn()},unregisterZIndexPortal:{reducer:(e,t)=>{var{zIndex:r}=t.payload;e.zIndexMap[r]&&(e.zIndexMap[r].consumers-=1,e.zIndexMap[r].consumers<=0&&!FH(r)&&delete e.zIndexMap[r])},prepare:kn()},registerZIndexPortalId:{reducer:(e,t)=>{var{zIndex:r,elementId:n,isPanorama:s}=t.payload;e.zIndexMap[r]?s?e.zIndexMap[r].panoramaElementId=n:e.zIndexMap[r].elementId=n:e.zIndexMap[r]={consumers:0,elementId:s?void 0:n,panoramaElementId:s?n:void 0}},prepare:kn()},unregisterZIndexPortalId:{reducer:(e,t)=>{var{zIndex:r}=t.payload;e.zIndexMap[r]&&(t.payload.isPanorama?e.zIndexMap[r].panoramaElementId=void 0:e.zIndexMap[r].elementId=void 0)},prepare:kn()}}}),{registerZIndexPortal:LH,unregisterZIndexPortal:zH,registerZIndexPortalId:UH,unregisterZIndexPortalId:BH}=ST.actions,WH=ST.reducer;function _o(e){var{zIndex:t,children:r}=e,n=ZB(),s=n&&t!==void 0&&t!==0,i=ni(),l=rn();v.useLayoutEffect(()=>s?(l(LH({zIndex:t})),()=>{l(zH({zIndex:t}))}):Fc,[l,t,s]);var u=dt(m=>PH(m,t,i));if(!s)return r;if(!u)return null;var d=document.getElementById(u);return d?xC.createPortal(r,d):null}function F0(){return F0=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},F0.apply(null,arguments)}function HN(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Kf(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?HN(Object(r),!0).forEach(function(n){VH(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):HN(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function VH(e,t,r){return(t=qH(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function qH(e){var t=HH(e,"string");return typeof t=="symbol"?t:t+""}function HH(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function KH(e){var{cursor:t,cursorComp:r,cursorProps:n}=e;return v.isValidElement(t)?v.cloneElement(t,n):v.createElement(r,n)}function GH(e){var t,{coordinate:r,payload:n,index:s,offset:i,tooltipAxisBandSize:l,layout:u,cursor:d,tooltipEventType:m,chartName:f}=e,p=r,y=n,x=s;if(!d||!p||f!=="ScatterChart"&&m!=="axis")return null;var w,b,S;if(f==="ScatterChart")w=p,b=P8,S=Is.cursorLine;else if(f==="BarChart")w=O8(u,p,i,l),b=sP,S=Is.cursorRectangle;else if(u==="radial"&&sA(p)){var{cx:_,cy:E,radius:C,startAngle:O,endAngle:T}=iP(p);w={cx:_,cy:E,startAngle:O,endAngle:T,innerRadius:C,outerRadius:C},b=oP,S=Is.cursorLine}else w={points:x7(u,p,i)},b=ZA,S=Is.cursorLine;var P=typeof d=="object"&&"className"in d?d.className:void 0,F=Kf(Kf(Kf(Kf({stroke:"#ccc",pointerEvents:"none"},i),w),jx(d)),{},{payload:y,payloadIndex:x,className:Tr("recharts-tooltip-cursor",P)});return v.createElement(_o,{zIndex:(t=e.zIndex)!==null&&t!==void 0?t:S},v.createElement(KH,{cursor:d,cursorComp:b,cursorProps:F}))}function YH(e){var t=mH(),r=JB(),n=$m(),s=bH();return t==null||r==null||n==null||s==null?null:v.createElement(GH,F0({},e,{offset:r,layout:n,tooltipAxisBandSize:t,chartName:s}))}var kT=v.createContext(null),JH=()=>v.useContext(kT),hv={exports:{}},KN;function XH(){return KN||(KN=1,(function(e){var t=Object.prototype.hasOwnProperty,r="~";function n(){}Object.create&&(n.prototype=Object.create(null),new n().__proto__||(r=!1));function s(d,m,f){this.fn=d,this.context=m,this.once=f||!1}function i(d,m,f,p,y){if(typeof f!="function")throw new TypeError("The listener must be a function");var x=new s(f,p||d,y),w=r?r+m:m;return d._events[w]?d._events[w].fn?d._events[w]=[d._events[w],x]:d._events[w].push(x):(d._events[w]=x,d._eventsCount++),d}function l(d,m){--d._eventsCount===0?d._events=new n:delete d._events[m]}function u(){this._events=new n,this._eventsCount=0}u.prototype.eventNames=function(){var m=[],f,p;if(this._eventsCount===0)return m;for(p in f=this._events)t.call(f,p)&&m.push(r?p.slice(1):p);return Object.getOwnPropertySymbols?m.concat(Object.getOwnPropertySymbols(f)):m},u.prototype.listeners=function(m){var f=r?r+m:m,p=this._events[f];if(!p)return[];if(p.fn)return[p.fn];for(var y=0,x=p.length,w=new Array(x);y<x;y++)w[y]=p[y].fn;return w},u.prototype.listenerCount=function(m){var f=r?r+m:m,p=this._events[f];return p?p.fn?1:p.length:0},u.prototype.emit=function(m,f,p,y,x,w){var b=r?r+m:m;if(!this._events[b])return!1;var S=this._events[b],_=arguments.length,E,C;if(S.fn){switch(S.once&&this.removeListener(m,S.fn,void 0,!0),_){case 1:return S.fn.call(S.context),!0;case 2:return S.fn.call(S.context,f),!0;case 3:return S.fn.call(S.context,f,p),!0;case 4:return S.fn.call(S.context,f,p,y),!0;case 5:return S.fn.call(S.context,f,p,y,x),!0;case 6:return S.fn.call(S.context,f,p,y,x,w),!0}for(C=1,E=new Array(_-1);C<_;C++)E[C-1]=arguments[C];S.fn.apply(S.context,E)}else{var O=S.length,T;for(C=0;C<O;C++)switch(S[C].once&&this.removeListener(m,S[C].fn,void 0,!0),_){case 1:S[C].fn.call(S[C].context);break;case 2:S[C].fn.call(S[C].context,f);break;case 3:S[C].fn.call(S[C].context,f,p);break;case 4:S[C].fn.call(S[C].context,f,p,y);break;default:if(!E)for(T=1,E=new Array(_-1);T<_;T++)E[T-1]=arguments[T];S[C].fn.apply(S[C].context,E)}}return!0},u.prototype.on=function(m,f,p){return i(this,m,f,p,!1)},u.prototype.once=function(m,f,p){return i(this,m,f,p,!0)},u.prototype.removeListener=function(m,f,p,y){var x=r?r+m:m;if(!this._events[x])return this;if(!f)return l(this,x),this;var w=this._events[x];if(w.fn)w.fn===f&&(!y||w.once)&&(!p||w.context===p)&&l(this,x);else{for(var b=0,S=[],_=w.length;b<_;b++)(w[b].fn!==f||y&&!w[b].once||p&&w[b].context!==p)&&S.push(w[b]);S.length?this._events[x]=S.length===1?S[0]:S:l(this,x)}return this},u.prototype.removeAllListeners=function(m){var f;return m?(f=r?r+m:m,this._events[f]&&l(this,f)):(this._events=new n,this._eventsCount=0),this},u.prototype.off=u.prototype.removeListener,u.prototype.addListener=u.prototype.on,u.prefixed=r,u.EventEmitter=u,e.exports=u})(hv)),hv.exports}var QH=XH();const ZH=Ui(QH);var ld=new ZH,L0="recharts.syncEvent.tooltip",GN="recharts.syncEvent.brush";function eK(e,t){if(t){var r=Number.parseInt(t,10);if(!ra(r))return e==null?void 0:e[r]}}var tK={chartName:"",tooltipPayloadSearcher:void 0,eventEmitter:void 0,defaultTooltipEventType:"axis"},_T=Rs({name:"options",initialState:tK,reducers:{createEventEmitter:e=>{e.eventEmitter==null&&(e.eventEmitter=Symbol("rechartsEventEmitter"))}}}),rK=_T.reducer,{createEventEmitter:nK}=_T.actions;function sK(e){return e.tooltip.syncInteraction}var iK={chartData:void 0,computedData:void 0,dataStartIndex:0,dataEndIndex:0},NT=Rs({name:"chartData",initialState:iK,reducers:{setChartData(e,t){if(e.chartData=t.payload,t.payload==null){e.dataStartIndex=0,e.dataEndIndex=0;return}t.payload.length>0&&e.dataEndIndex!==t.payload.length-1&&(e.dataEndIndex=t.payload.length-1)},setComputedData(e,t){e.computedData=t.payload},setDataStartEndIndexes(e,t){var{startIndex:r,endIndex:n}=t.payload;r!=null&&(e.dataStartIndex=r),n!=null&&(e.dataEndIndex=n)}}}),{setChartData:YN,setDataStartEndIndexes:aK,setComputedData:see}=NT.actions,oK=NT.reducer,lK=["x","y"];function JN(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function ac(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?JN(Object(r),!0).forEach(function(n){cK(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):JN(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function cK(e,t,r){return(t=uK(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function uK(e){var t=dK(e,"string");return typeof t=="symbol"?t:t+""}function dK(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function fK(e,t){if(e==null)return{};var r,n,s=hK(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function hK(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function mK(){var e=dt(mw),t=dt(pw),r=rn(),n=dt(aO),s=dt(Va),i=$m(),l=Rm(),u=dt(d=>d.rootProps.className);v.useEffect(()=>{if(e==null)return Fc;var d=(m,f,p)=>{if(t!==p&&e===m){if(n==="index"){var y;if(l&&f!==null&&f!==void 0&&(y=f.payload)!==null&&y!==void 0&&y.coordinate&&f.payload.sourceViewBox){var x=f.payload.coordinate,{x:w,y:b}=x,S=fK(x,lK),{x:_,y:E,width:C,height:O}=f.payload.sourceViewBox,T=ac(ac({},S),{},{x:l.x+(C?(w-_)/C:0)*l.width,y:l.y+(O?(b-E)/O:0)*l.height});r(ac(ac({},f),{},{payload:ac(ac({},f.payload),{},{coordinate:T})}))}else r(f);return}if(s!=null){var P;if(typeof n=="function"){var F={activeTooltipIndex:f.payload.index==null?void 0:Number(f.payload.index),isTooltipActive:f.payload.active,activeIndex:f.payload.index==null?void 0:Number(f.payload.index),activeLabel:f.payload.label,activeDataKey:f.payload.dataKey,activeCoordinate:f.payload.coordinate},H=n(s,F);P=s[H]}else n==="value"&&(P=s.find(V=>String(V.value)===f.payload.label));var{coordinate:L}=f.payload;if(P==null||f.payload.active===!1||L==null||l==null){r($0({active:!1,coordinate:void 0,dataKey:void 0,index:null,label:void 0,sourceViewBox:void 0}));return}var{x:q,y:z}=L,U=Math.min(q,l.x+l.width),ne=Math.min(z,l.y+l.height),ie={x:i==="horizontal"?P.coordinate:U,y:i==="horizontal"?ne:P.coordinate},oe=$0({active:f.payload.active,coordinate:ie,dataKey:f.payload.dataKey,index:String(P.index),label:f.payload.label,sourceViewBox:f.payload.sourceViewBox});r(oe)}}};return ld.on(L0,d),()=>{ld.off(L0,d)}},[u,r,t,e,n,s,i,l])}function pK(){var e=dt(mw),t=dt(pw),r=rn();v.useEffect(()=>{if(e==null)return Fc;var n=(s,i,l)=>{t!==l&&e===s&&r(aK(i))};return ld.on(GN,n),()=>{ld.off(GN,n)}},[r,t,e])}function gK(){var e=rn();v.useEffect(()=>{e(nK())},[e]),mK(),pK()}function yK(e,t,r,n,s,i){var l=dt(x=>SH(x,e,t)),u=dt(pw),d=dt(mw),m=dt(aO),f=dt(sK),p=f==null?void 0:f.active,y=Rm();v.useEffect(()=>{if(!p&&d!=null&&u!=null){var x=$0({active:i,coordinate:r,dataKey:l,index:s,label:typeof n=="number"?String(n):n,sourceViewBox:y});ld.emit(L0,d,x,u)}},[p,r,l,s,n,u,d,m,i,y])}function XN(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function QN(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?XN(Object(r),!0).forEach(function(n){vK(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):XN(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function vK(e,t,r){return(t=xK(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function xK(e){var t=wK(e,"string");return typeof t=="symbol"?t:t+""}function wK(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function bK(e){return e.dataKey}function jK(e,t){return v.isValidElement(e)?v.cloneElement(e,t):typeof e=="function"?v.createElement(e,t):v.createElement(l8,t)}var ZN=[],SK={allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",axisId:0,contentStyle:{},cursor:!0,filterNull:!0,isAnimationActive:!Lc.isSsr,itemSorter:"name",itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,wrapperStyle:{}};function kK(e){var t,r,n=wi(e,SK),{active:s,allowEscapeViewBox:i,animationDuration:l,animationEasing:u,content:d,filterNull:m,isAnimationActive:f,offset:p,payloadUniqBy:y,position:x,reverseDirection:w,useTranslate3d:b,wrapperStyle:S,cursor:_,shared:E,trigger:C,defaultIndex:O,portal:T,axisId:P}=n,F=rn(),H=typeof O=="number"?String(O):O;v.useEffect(()=>{F(jq({shared:E,trigger:C,axisId:P,active:s,defaultIndex:H}))},[F,E,C,P,s,H]);var L=Rm(),q=QA(),z=yq(E),{activeIndex:U,isActive:ne}=(t=dt(ye=>NH(ye,z,C,H)))!==null&&t!==void 0?t:{},ie=dt(ye=>_H(ye,z,C,H)),oe=dt(ye=>jT(ye,z,C,H)),V=dt(ye=>kH(ye,z,C,H)),Z=ie,ee=JH(),re=(r=s??ne)!==null&&r!==void 0?r:!1,[me,I]=sU([Z,re]),M=z==="axis"?oe:void 0;yK(z,C,V,M,U,re);var We=T??ee;if(We==null||L==null||z==null)return null;var te=Z??ZN;re||(te=ZN),m&&te.length&&(te=Pz(te.filter(ye=>ye.value!=null&&(ye.hide!==!0||n.includeHidden)),y,bK));var ve=te.length>0,he=v.createElement(p8,{allowEscapeViewBox:i,animationDuration:l,animationEasing:u,isAnimationActive:f,active:re,coordinate:V,hasPayload:ve,offset:p,position:x,reverseDirection:w,useTranslate3d:b,viewBox:L,wrapperStyle:S,lastBoundingBox:me,innerRef:I,hasPortalFromProps:!!T},jK(d,QN(QN({},n),{},{payload:te,label:M,active:re,activeIndex:U,coordinate:V,accessibilityLayer:q})));return v.createElement(v.Fragment,null,xC.createPortal(he,We),re&&v.createElement(YH,{cursor:_,tooltipEventType:z,coordinate:V,payload:te,index:U}))}var Lw=e=>null;Lw.displayName="Cell";function _K(e,t,r){return(t=NK(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function NK(e){var t=CK(e,"string");return typeof t=="symbol"?t:t+""}function CK(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class EK{constructor(t){_K(this,"cache",new Map),this.maxSize=t}get(t){var r=this.cache.get(t);return r!==void 0&&(this.cache.delete(t),this.cache.set(t,r)),r}set(t,r){if(this.cache.has(t))this.cache.delete(t);else if(this.cache.size>=this.maxSize){var n=this.cache.keys().next().value;this.cache.delete(n)}this.cache.set(t,r)}clear(){this.cache.clear()}size(){return this.cache.size}}function e2(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function AK(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?e2(Object(r),!0).forEach(function(n){PK(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):e2(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function PK(e,t,r){return(t=OK(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function OK(e){var t=TK(e,"string");return typeof t=="symbol"?t:t+""}function TK(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var IK={cacheSize:2e3,enableCache:!0},CT=AK({},IK),t2=new EK(CT.cacheSize),DK={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},r2="recharts_measurement_span";function RK(e,t){var r=t.fontSize||"",n=t.fontFamily||"",s=t.fontWeight||"",i=t.fontStyle||"",l=t.letterSpacing||"",u=t.textTransform||"";return"".concat(e,"|").concat(r,"|").concat(n,"|").concat(s,"|").concat(i,"|").concat(l,"|").concat(u)}var n2=(e,t)=>{try{var r=document.getElementById(r2);r||(r=document.createElement("span"),r.setAttribute("id",r2),r.setAttribute("aria-hidden","true"),document.body.appendChild(r)),Object.assign(r.style,DK,t),r.textContent="".concat(e);var n=r.getBoundingClientRect();return{width:n.width,height:n.height}}catch{return{width:0,height:0}}},Hu=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(t==null||Lc.isSsr)return{width:0,height:0};if(!CT.enableCache)return n2(t,r);var n=RK(t,r),s=t2.get(n);if(s)return s;var i=n2(t,r);return t2.set(n,i),i},s2=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,i2=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,$K=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,MK=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,ET={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},FK=Object.keys(ET),hc="NaN";function LK(e,t){return e*ET[t]}class Ps{static parse(t){var r,[,n,s]=(r=MK.exec(t))!==null&&r!==void 0?r:[];return new Ps(parseFloat(n),s??"")}constructor(t,r){this.num=t,this.unit=r,this.num=t,this.unit=r,ra(t)&&(this.unit=""),r!==""&&!$K.test(r)&&(this.num=NaN,this.unit=""),FK.includes(r)&&(this.num=LK(t,r),this.unit="px")}add(t){return this.unit!==t.unit?new Ps(NaN,""):new Ps(this.num+t.num,this.unit)}subtract(t){return this.unit!==t.unit?new Ps(NaN,""):new Ps(this.num-t.num,this.unit)}multiply(t){return this.unit!==""&&t.unit!==""&&this.unit!==t.unit?new Ps(NaN,""):new Ps(this.num*t.num,this.unit||t.unit)}divide(t){return this.unit!==""&&t.unit!==""&&this.unit!==t.unit?new Ps(NaN,""):new Ps(this.num/t.num,this.unit||t.unit)}toString(){return"".concat(this.num).concat(this.unit)}isNaN(){return ra(this.num)}}function AT(e){if(e.includes(hc))return hc;for(var t=e;t.includes("*")||t.includes("/");){var r,[,n,s,i]=(r=s2.exec(t))!==null&&r!==void 0?r:[],l=Ps.parse(n??""),u=Ps.parse(i??""),d=s==="*"?l.multiply(u):l.divide(u);if(d.isNaN())return hc;t=t.replace(s2,d.toString())}for(;t.includes("+")||/.-\d+(?:\.\d+)?/.test(t);){var m,[,f,p,y]=(m=i2.exec(t))!==null&&m!==void 0?m:[],x=Ps.parse(f??""),w=Ps.parse(y??""),b=p==="+"?x.add(w):x.subtract(w);if(b.isNaN())return hc;t=t.replace(i2,b.toString())}return t}var a2=/\(([^()]*)\)/;function zK(e){for(var t=e,r;(r=a2.exec(t))!=null;){var[,n]=r;t=t.replace(a2,AT(n))}return t}function UK(e){var t=e.replace(/\s+/g,"");return t=zK(t),t=AT(t),t}function BK(e){try{return UK(e)}catch{return hc}}function mv(e){var t=BK(e.slice(5,-1));return t===hc?"":t}var WK=["x","y","lineHeight","capHeight","fill","scaleToFit","textAnchor","verticalAnchor"],VK=["dx","dy","angle","className","breakAll"];function z0(){return z0=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},z0.apply(null,arguments)}function o2(e,t){if(e==null)return{};var r,n,s=qK(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function qK(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var PT=/[ \f\n\r\t\v\u2028\u2029]+/,OT=e=>{var{children:t,breakAll:r,style:n}=e;try{var s=[];Un(t)||(r?s=t.toString().split(""):s=t.toString().split(PT));var i=s.map(u=>({word:u,width:Hu(u,n).width})),l=r?0:Hu("",n).width;return{wordsWithComputedWidth:i,spaceWidth:l}}catch{return null}};function HK(e){return e==="start"||e==="middle"||e==="end"||e==="inherit"}var TT=(e,t,r,n)=>e.reduce((s,i)=>{var{word:l,width:u}=i,d=s[s.length-1];if(d&&u!=null&&(t==null||n||d.width+u+r<Number(t)))d.words.push(l),d.width+=u+r;else{var m={words:[l],width:u};s.push(m)}return s},[]),IT=e=>e.reduce((t,r)=>t.width>r.width?t:r),KK="",l2=(e,t,r,n,s,i,l,u)=>{var d=e.slice(0,t),m=OT({breakAll:r,style:n,children:d+KK});if(!m)return[!1,[]];var f=TT(m.wordsWithComputedWidth,i,l,u),p=f.length>s||IT(f).width>Number(i);return[p,f]},GK=(e,t,r,n,s)=>{var{maxLines:i,children:l,style:u,breakAll:d}=e,m=vt(i),f=String(l),p=TT(t,n,r,s);if(!m||s)return p;var y=p.length>i||IT(p).width>Number(n);if(!y)return p;for(var x=0,w=f.length-1,b=0,S;x<=w&&b<=f.length-1;){var _=Math.floor((x+w)/2),E=_-1,[C,O]=l2(f,E,d,u,i,n,r,s),[T]=l2(f,_,d,u,i,n,r,s);if(!C&&!T&&(x=_+1),C&&T&&(w=_-1),!C&&T){S=O;break}b++}return S||p},c2=e=>{var t=Un(e)?[]:e.toString().split(PT);return[{words:t,width:void 0}]},YK=e=>{var{width:t,scaleToFit:r,children:n,style:s,breakAll:i,maxLines:l}=e;if((t||r)&&!Lc.isSsr){var u,d,m=OT({breakAll:i,children:n,style:s});if(m){var{wordsWithComputedWidth:f,spaceWidth:p}=m;u=f,d=p}else return c2(n);return GK({breakAll:i,children:n,maxLines:l,style:s},u,d,t,!!r)}return c2(n)},DT="#808080",JK={breakAll:!1,capHeight:"0.71em",fill:DT,lineHeight:"1em",scaleToFit:!1,textAnchor:"start",verticalAnchor:"end",x:0,y:0},zw=v.forwardRef((e,t)=>{var r=wi(e,JK),{x:n,y:s,lineHeight:i,capHeight:l,fill:u,scaleToFit:d,textAnchor:m,verticalAnchor:f}=r,p=o2(r,WK),y=v.useMemo(()=>YK({breakAll:p.breakAll,children:p.children,maxLines:p.maxLines,scaleToFit:d,style:p.style,width:p.width}),[p.breakAll,p.children,p.maxLines,d,p.style,p.width]),{dx:x,dy:w,angle:b,className:S,breakAll:_}=p,E=o2(p,VK);if(!na(n)||!na(s)||y.length===0)return null;var C=Number(n)+(vt(x)?x:0),O=Number(s)+(vt(w)?w:0);if(!tn(C)||!tn(O))return null;var T;switch(f){case"start":T=mv("calc(".concat(l,")"));break;case"middle":T=mv("calc(".concat((y.length-1)/2," * -").concat(i," + (").concat(l," / 2))"));break;default:T=mv("calc(".concat(y.length-1," * -").concat(i,")"));break}var P=[];if(d){var F=y[0].width,{width:H}=p;P.push("scale(".concat(vt(H)&&vt(F)?H/F:1,")"))}return b&&P.push("rotate(".concat(b,", ").concat(C,", ").concat(O,")")),P.length&&(E.transform=P.join(" ")),v.createElement("text",z0({},yi(E),{ref:t,x:C,y:O,className:Tr("recharts-text",S),textAnchor:m,fill:u.includes("url")?DT:u}),y.map((L,q)=>{var z=L.words.join(_?"":" ");return v.createElement("tspan",{x:C,dy:q===0?T:i,key:"".concat(z,"-").concat(q)},z)}))});zw.displayName="Text";var XK=["labelRef"];function QK(e,t){if(e==null)return{};var r,n,s=ZK(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function ZK(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function u2(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Qr(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?u2(Object(r),!0).forEach(function(n){eG(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):u2(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function eG(e,t,r){return(t=tG(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function tG(e){var t=rG(e,"string");return typeof t=="symbol"?t:t+""}function rG(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function ba(){return ba=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},ba.apply(null,arguments)}var RT=v.createContext(null),nG=e=>{var{x:t,y:r,upperWidth:n,lowerWidth:s,width:i,height:l,children:u}=e,d=v.useMemo(()=>({x:t,y:r,upperWidth:n,lowerWidth:s,width:i,height:l}),[t,r,n,s,i,l]);return v.createElement(RT.Provider,{value:d},u)},$T=()=>{var e=v.useContext(RT),t=Rm();return e||JA(t)},sG=v.createContext(null),iG=()=>{var e=v.useContext(sG),t=dt(dO);return e||t},aG=e=>{var{value:t,formatter:r}=e,n=Un(e.children)?t:e.children;return typeof r=="function"?r(n):n},Uw=e=>e!=null&&typeof e=="function",oG=(e,t)=>{var r=Zs(t-e),n=Math.min(Math.abs(t-e),360);return r*n},lG=(e,t,r,n,s)=>{var{offset:i,className:l}=e,{cx:u,cy:d,innerRadius:m,outerRadius:f,startAngle:p,endAngle:y,clockWise:x}=s,w=(m+f)/2,b=oG(p,y),S=b>=0?1:-1,_,E;switch(t){case"insideStart":_=p+S*i,E=x;break;case"insideEnd":_=y-S*i,E=!x;break;case"end":_=y+S*i,E=x;break;default:throw new Error("Unsupported position ".concat(t))}E=b<=0?E:!E;var C=Qn(u,d,w,_),O=Qn(u,d,w,_+(E?1:-1)*359),T="M".concat(C.x,",").concat(C.y,`
    A`).concat(w,",").concat(w,",0,1,").concat(E?0:1,`,
    `).concat(O.x,",").concat(O.y),P=Un(e.id)?Qu("recharts-radial-line-"):e.id;return v.createElement("text",ba({},n,{dominantBaseline:"central",className:Tr("recharts-radial-bar-label",l)}),v.createElement("defs",null,v.createElement("path",{id:P,d:T})),v.createElement("textPath",{xlinkHref:"#".concat(P)},r))},cG=(e,t,r)=>{var{cx:n,cy:s,innerRadius:i,outerRadius:l,startAngle:u,endAngle:d}=e,m=(u+d)/2;if(r==="outside"){var{x:f,y:p}=Qn(n,s,l+t,m);return{x:f,y:p,textAnchor:f>=n?"start":"end",verticalAnchor:"middle"}}if(r==="center")return{x:n,y:s,textAnchor:"middle",verticalAnchor:"middle"};if(r==="centerTop")return{x:n,y:s,textAnchor:"middle",verticalAnchor:"start"};if(r==="centerBottom")return{x:n,y:s,textAnchor:"middle",verticalAnchor:"end"};var y=(i+l)/2,{x,y:w}=Qn(n,s,y,m);return{x,y:w,textAnchor:"middle",verticalAnchor:"middle"}},U0=e=>"cx"in e&&vt(e.cx),uG=(e,t)=>{var{parentViewBox:r,offset:n,position:s}=e,i;r!=null&&!U0(r)&&(i=r);var{x:l,y:u,upperWidth:d,lowerWidth:m,height:f}=t,p=l,y=l+(d-m)/2,x=(p+y)/2,w=(d+m)/2,b=p+d/2,S=f>=0?1:-1,_=S*n,E=S>0?"end":"start",C=S>0?"start":"end",O=d>=0?1:-1,T=O*n,P=O>0?"end":"start",F=O>0?"start":"end";if(s==="top"){var H={x:p+d/2,y:u-_,textAnchor:"middle",verticalAnchor:E};return Qr(Qr({},H),i?{height:Math.max(u-i.y,0),width:d}:{})}if(s==="bottom"){var L={x:y+m/2,y:u+f+_,textAnchor:"middle",verticalAnchor:C};return Qr(Qr({},L),i?{height:Math.max(i.y+i.height-(u+f),0),width:m}:{})}if(s==="left"){var q={x:x-T,y:u+f/2,textAnchor:P,verticalAnchor:"middle"};return Qr(Qr({},q),i?{width:Math.max(q.x-i.x,0),height:f}:{})}if(s==="right"){var z={x:x+w+T,y:u+f/2,textAnchor:F,verticalAnchor:"middle"};return Qr(Qr({},z),i?{width:Math.max(i.x+i.width-z.x,0),height:f}:{})}var U=i?{width:w,height:f}:{};return s==="insideLeft"?Qr({x:x+T,y:u+f/2,textAnchor:F,verticalAnchor:"middle"},U):s==="insideRight"?Qr({x:x+w-T,y:u+f/2,textAnchor:P,verticalAnchor:"middle"},U):s==="insideTop"?Qr({x:p+d/2,y:u+_,textAnchor:"middle",verticalAnchor:C},U):s==="insideBottom"?Qr({x:y+m/2,y:u+f-_,textAnchor:"middle",verticalAnchor:E},U):s==="insideTopLeft"?Qr({x:p+T,y:u+_,textAnchor:F,verticalAnchor:C},U):s==="insideTopRight"?Qr({x:p+d-T,y:u+_,textAnchor:P,verticalAnchor:C},U):s==="insideBottomLeft"?Qr({x:y+T,y:u+f-_,textAnchor:F,verticalAnchor:E},U):s==="insideBottomRight"?Qr({x:y+m-T,y:u+f-_,textAnchor:P,verticalAnchor:E},U):s&&typeof s=="object"&&(vt(s.x)||Oa(s.x))&&(vt(s.y)||Oa(s.y))?Qr({x:l+zi(s.x,w),y:u+zi(s.y,f),textAnchor:"end",verticalAnchor:"end"},U):Qr({x:b,y:u+f/2,textAnchor:"middle",verticalAnchor:"middle"},U)},dG={offset:5,zIndex:Is.label};function uo(e){var t=wi(e,dG),{viewBox:r,position:n,value:s,children:i,content:l,className:u="",textBreakAll:d,labelRef:m}=t,f=iG(),p=$T(),y=n==="center"?p:f??p,x,w,b;if(r==null?x=y:U0(r)?x=r:x=JA(r),!x||Un(s)&&Un(i)&&!v.isValidElement(l)&&typeof l!="function")return null;var S=Qr(Qr({},t),{},{viewBox:x});if(v.isValidElement(l)){var{labelRef:_}=S,E=QK(S,XK);return v.cloneElement(l,E)}if(typeof l=="function"){if(w=v.createElement(l,S),v.isValidElement(w))return w}else w=aG(t);var C=yi(t);if(U0(x)){if(n==="insideStart"||n==="insideEnd"||n==="end")return lG(t,n,w,C,x);b=cG(x,t.offset,t.position)}else b=uG(t,x);return v.createElement(_o,{zIndex:t.zIndex},v.createElement(zw,ba({ref:m,className:Tr("recharts-label",u)},C,b,{textAnchor:HK(C.textAnchor)?C.textAnchor:b.textAnchor,breakAll:d}),w))}uo.displayName="Label";var fG=(e,t,r)=>{if(!e)return null;var n={viewBox:t,labelRef:r};return e===!0?v.createElement(uo,ba({key:"label-implicit"},n)):na(e)?v.createElement(uo,ba({key:"label-implicit",value:e},n)):v.isValidElement(e)?e.type===uo?v.cloneElement(e,Qr({key:"label-implicit"},n)):v.createElement(uo,ba({key:"label-implicit",content:e},n)):Uw(e)?v.createElement(uo,ba({key:"label-implicit",content:e},n)):e&&typeof e=="object"?v.createElement(uo,ba({},e,{key:"label-implicit"},n)):null};function hG(e){var{label:t,labelRef:r}=e,n=$T();return fG(t,n,r)||null}var pv={},gv={},d2;function mG(){return d2||(d2=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r[r.length-1]}e.last=t})(gv)),gv}var yv={},f2;function pG(){return f2||(f2=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return Array.isArray(r)?r:Array.from(r)}e.toArray=t})(yv)),yv}var h2;function gG(){return h2||(h2=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=mG(),r=pG(),n=Px();function s(i){if(n.isArrayLike(i))return t.last(r.toArray(i))}e.last=s})(pv)),pv}var vv,m2;function yG(){return m2||(m2=1,vv=gG().last),vv}var vG=yG();const xG=Ui(vG);var wG=["valueAccessor"],bG=["dataKey","clockWise","id","textBreakAll","zIndex"];function Zh(){return Zh=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Zh.apply(null,arguments)}function p2(e,t){if(e==null)return{};var r,n,s=jG(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function jG(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var SG=e=>Array.isArray(e.value)?xG(e.value):e.value,MT=v.createContext(void 0),kG=MT.Provider,FT=v.createContext(void 0);FT.Provider;function _G(){return v.useContext(MT)}function NG(){return v.useContext(FT)}function ih(e){var{valueAccessor:t=SG}=e,r=p2(e,wG),{dataKey:n,clockWise:s,id:i,textBreakAll:l,zIndex:u}=r,d=p2(r,bG),m=_G(),f=NG(),p=m||f;return!p||!p.length?null:v.createElement(_o,{zIndex:u??Is.label},v.createElement(Pa,{className:"recharts-label-list"},p.map((y,x)=>{var w,b=Un(n)?t(y,x):vs(y&&y.payload,n),S=Un(i)?{}:{id:"".concat(i,"-").concat(x)};return v.createElement(uo,Zh({key:"label-".concat(x)},yi(y),d,S,{fill:(w=r.fill)!==null&&w!==void 0?w:y.fill,parentViewBox:y.parentViewBox,value:b,textBreakAll:l,viewBox:y.viewBox,index:x,zIndex:0}))})))}ih.displayName="LabelList";function CG(e){var{label:t}=e;return t?t===!0?v.createElement(ih,{key:"labelList-implicit"}):v.isValidElement(t)||Uw(t)?v.createElement(ih,{key:"labelList-implicit",content:t}):typeof t=="object"?v.createElement(ih,Zh({key:"labelList-implicit"},t,{type:String(t.type)})):null:null}var EG={radiusAxis:{},angleAxis:{}},LT=Rs({name:"polarAxis",initialState:EG,reducers:{addRadiusAxis(e,t){e.radiusAxis[t.payload.id]=t.payload},removeRadiusAxis(e,t){delete e.radiusAxis[t.payload.id]},addAngleAxis(e,t){e.angleAxis[t.payload.id]=t.payload},removeAngleAxis(e,t){delete e.angleAxis[t.payload.id]}}}),{addRadiusAxis:iee,removeRadiusAxis:aee,addAngleAxis:oee,removeAngleAxis:lee}=LT.actions,AG=LT.reducer,xv={exports:{}},fr={};/**
 * @license React
 * react-is.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var g2;function PG(){if(g2)return fr;g2=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),i=Symbol.for("react.consumer"),l=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),m=Symbol.for("react.suspense_list"),f=Symbol.for("react.memo"),p=Symbol.for("react.lazy"),y=Symbol.for("react.view_transition"),x=Symbol.for("react.client.reference");function w(b){if(typeof b=="object"&&b!==null){var S=b.$$typeof;switch(S){case e:switch(b=b.type,b){case r:case s:case n:case d:case m:case y:return b;default:switch(b=b&&b.$$typeof,b){case l:case u:case p:case f:return b;case i:return b;default:return S}}case t:return S}}}return fr.ContextConsumer=i,fr.ContextProvider=l,fr.Element=e,fr.ForwardRef=u,fr.Fragment=r,fr.Lazy=p,fr.Memo=f,fr.Portal=t,fr.Profiler=s,fr.StrictMode=n,fr.Suspense=d,fr.SuspenseList=m,fr.isContextConsumer=function(b){return w(b)===i},fr.isContextProvider=function(b){return w(b)===l},fr.isElement=function(b){return typeof b=="object"&&b!==null&&b.$$typeof===e},fr.isForwardRef=function(b){return w(b)===u},fr.isFragment=function(b){return w(b)===r},fr.isLazy=function(b){return w(b)===p},fr.isMemo=function(b){return w(b)===f},fr.isPortal=function(b){return w(b)===t},fr.isProfiler=function(b){return w(b)===s},fr.isStrictMode=function(b){return w(b)===n},fr.isSuspense=function(b){return w(b)===d},fr.isSuspenseList=function(b){return w(b)===m},fr.isValidElementType=function(b){return typeof b=="string"||typeof b=="function"||b===r||b===s||b===n||b===d||b===m||typeof b=="object"&&b!==null&&(b.$$typeof===p||b.$$typeof===f||b.$$typeof===l||b.$$typeof===i||b.$$typeof===u||b.$$typeof===x||b.getModuleId!==void 0)},fr.typeOf=w,fr}var y2;function OG(){return y2||(y2=1,xv.exports=PG()),xv.exports}var TG=OG(),v2=e=>typeof e=="string"?e:e?e.displayName||e.name||"Component":"",x2=null,wv=null,zT=e=>{if(e===x2&&Array.isArray(wv))return wv;var t=[];return v.Children.forEach(e,r=>{Un(r)||(TG.isFragment(r)?t=t.concat(zT(r.props.children)):t.push(r))}),wv=t,x2=e,t};function IG(e,t){var r=[],n=[];return Array.isArray(t)?n=t.map(s=>v2(s)):n=[v2(t)],zT(e).forEach(s=>{var i=jc(s,"type.displayName")||jc(s,"type.name");i&&n.indexOf(i)!==-1&&r.push(s)}),r}var bv={},w2;function DG(){return w2||(w2=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){var s;if(typeof r!="object"||r==null)return!1;if(Object.getPrototypeOf(r)===null)return!0;if(Object.prototype.toString.call(r)!=="[object Object]"){const i=r[Symbol.toStringTag];return i==null||!((s=Object.getOwnPropertyDescriptor(r,Symbol.toStringTag))!=null&&s.writable)?!1:r.toString()===`[object ${i}]`}let n=r;for(;Object.getPrototypeOf(n)!==null;)n=Object.getPrototypeOf(n);return Object.getPrototypeOf(r)===n}e.isPlainObject=t})(bv)),bv}var jv,b2;function RG(){return b2||(b2=1,jv=DG().isPlainObject),jv}var $G=RG();const MG=Ui($G);function j2(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function S2(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?j2(Object(r),!0).forEach(function(n){FG(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):j2(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function FG(e,t,r){return(t=LG(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function LG(e){var t=zG(e,"string");return typeof t=="symbol"?t:t+""}function zG(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function em(){return em=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},em.apply(null,arguments)}var k2=(e,t,r,n,s)=>{var i=r-n,l;return l="M ".concat(e,",").concat(t),l+="L ".concat(e+r,",").concat(t),l+="L ".concat(e+r-i/2,",").concat(t+s),l+="L ".concat(e+r-i/2-n,",").concat(t+s),l+="L ".concat(e,",").concat(t," Z"),l},UG={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},BG=e=>{var t=wi(e,UG),{x:r,y:n,upperWidth:s,lowerWidth:i,height:l,className:u}=t,{animationEasing:d,animationDuration:m,animationBegin:f,isUpdateAnimationActive:p}=t,y=v.useRef(null),[x,w]=v.useState(-1),b=v.useRef(s),S=v.useRef(i),_=v.useRef(l),E=v.useRef(r),C=v.useRef(n),O=zx(e,"trapezoid-");if(v.useEffect(()=>{if(y.current&&y.current.getTotalLength)try{var ie=y.current.getTotalLength();ie&&w(ie)}catch{}},[]),r!==+r||n!==+n||s!==+s||i!==+i||l!==+l||s===0&&i===0||l===0)return null;var T=Tr("recharts-trapezoid",u);if(!p)return v.createElement("g",null,v.createElement("path",em({},yi(t),{className:T,d:k2(r,n,s,i,l)})));var P=b.current,F=S.current,H=_.current,L=E.current,q=C.current,z="0px ".concat(x===-1?1:x,"px"),U="".concat(x,"px 0px"),ne=eP(["strokeDasharray"],m,d);return v.createElement(Lx,{animationId:O,key:O,canBegin:x>0,duration:m,easing:d,isActive:p,begin:f},ie=>{var oe=Jn(P,s,ie),V=Jn(F,i,ie),Z=Jn(H,l,ie),ee=Jn(L,r,ie),re=Jn(q,n,ie);y.current&&(b.current=oe,S.current=V,_.current=Z,E.current=ee,C.current=re);var me=ie>0?{transition:ne,strokeDasharray:U}:{strokeDasharray:z};return v.createElement("path",em({},yi(t),{className:T,d:k2(ee,re,oe,V,Z),ref:y,style:S2(S2({},me),t.style)}))})},WG=["option","shapeType","propTransformer","activeClassName","isActive"];function VG(e,t){if(e==null)return{};var r,n,s=qG(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function qG(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function _2(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function tm(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?_2(Object(r),!0).forEach(function(n){HG(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):_2(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function HG(e,t,r){return(t=KG(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function KG(e){var t=GG(e,"string");return typeof t=="symbol"?t:t+""}function GG(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function YG(e,t){return tm(tm({},t),e)}function JG(e,t){return e==="symbols"}function N2(e){var{shapeType:t,elementProps:r}=e;switch(t){case"rectangle":return v.createElement(sP,r);case"trapezoid":return v.createElement(BG,r);case"sector":return v.createElement(oP,r);case"symbols":if(JG(t))return v.createElement(nA,r);break;case"curve":return v.createElement(ZA,r);default:return null}}function XG(e){return v.isValidElement(e)?e.props:e}function QG(e){var{option:t,shapeType:r,propTransformer:n=YG,activeClassName:s="recharts-active-shape",isActive:i}=e,l=VG(e,WG),u;if(v.isValidElement(t))u=v.cloneElement(t,tm(tm({},l),XG(t)));else if(typeof t=="function")u=t(l);else if(MG(t)&&typeof t!="boolean"){var d=n(t,l);u=v.createElement(N2,{shapeType:r,elementProps:d})}else{var m=l;u=v.createElement(N2,{shapeType:r,elementProps:m})}return i?v.createElement(Pa,{className:s},u):u}var UT=(e,t)=>{var r=rn();return(n,s)=>i=>{e==null||e(n,s,i),r(tT({activeIndex:String(s),activeDataKey:t,activeCoordinate:n.tooltipPosition}))}},BT=e=>{var t=rn();return(r,n)=>s=>{e==null||e(r,n,s),t(Sq())}},WT=(e,t)=>{var r=rn();return(n,s)=>i=>{e==null||e(n,s,i),r(kq({activeIndex:String(s),activeDataKey:t,activeCoordinate:n.tooltipPosition}))}};function ZG(e){var{fn:t,args:r}=e,n=rn(),s=ni();return v.useLayoutEffect(()=>{if(!s){var i=t(r);return n(wq(i)),()=>{n(bq(i))}}},[t,r,n,s]),null}function eY(e){var{legendPayload:t}=e,r=rn(),n=ni();return v.useLayoutEffect(()=>n?Fc:(r(t8(t)),()=>{r(r8(t))}),[r,n,t]),null}var Sv,tY=()=>{var[e]=v.useState(()=>Qu("uid-"));return e},rY=(Sv=rD.useId)!==null&&Sv!==void 0?Sv:tY;function VT(e,t){var r=rY();return t||(e?"".concat(e,"-").concat(r):r)}var nY=v.createContext(void 0),sY=e=>{var{id:t,type:r,children:n}=e,s=VT("recharts-".concat(r),t);return v.createElement(nY.Provider,{value:s},n(s))},iY={cartesianItems:[],polarItems:[]},qT=Rs({name:"graphicalItems",initialState:iY,reducers:{addCartesianGraphicalItem:{reducer(e,t){e.cartesianItems.push(t.payload)},prepare:kn()},replaceCartesianGraphicalItem:{reducer(e,t){var{prev:r,next:n}=t.payload,s=Na(e).cartesianItems.indexOf(r);s>-1&&(e.cartesianItems[s]=n)},prepare:kn()},removeCartesianGraphicalItem:{reducer(e,t){var r=Na(e).cartesianItems.indexOf(t.payload);r>-1&&e.cartesianItems.splice(r,1)},prepare:kn()},addPolarGraphicalItem:{reducer(e,t){e.polarItems.push(t.payload)},prepare:kn()},removePolarGraphicalItem:{reducer(e,t){var r=Na(e).polarItems.indexOf(t.payload);r>-1&&e.polarItems.splice(r,1)},prepare:kn()}}}),{addCartesianGraphicalItem:aY,replaceCartesianGraphicalItem:oY,removeCartesianGraphicalItem:lY,addPolarGraphicalItem:cee,removePolarGraphicalItem:uee}=qT.actions,cY=qT.reducer;function uY(e){var t=rn(),r=v.useRef(null);return v.useLayoutEffect(()=>{r.current===null?t(aY(e)):r.current!==e&&t(oY({prev:r.current,next:e})),r.current=e},[t,e]),v.useLayoutEffect(()=>()=>{r.current&&(t(lY(r.current)),r.current=null)},[t]),null}function C2(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function E2(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?C2(Object(r),!0).forEach(function(n){dY(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):C2(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function dY(e,t,r){return(t=fY(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function fY(e){var t=hY(e,"string");return typeof t=="symbol"?t:t+""}function hY(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var mY={xAxis:{},yAxis:{},zAxis:{}},HT=Rs({name:"cartesianAxis",initialState:mY,reducers:{addXAxis:{reducer(e,t){e.xAxis[t.payload.id]=t.payload},prepare:kn()},removeXAxis:{reducer(e,t){delete e.xAxis[t.payload.id]},prepare:kn()},addYAxis:{reducer(e,t){e.yAxis[t.payload.id]=t.payload},prepare:kn()},removeYAxis:{reducer(e,t){delete e.yAxis[t.payload.id]},prepare:kn()},addZAxis:{reducer(e,t){e.zAxis[t.payload.id]=t.payload},prepare:kn()},removeZAxis:{reducer(e,t){delete e.zAxis[t.payload.id]},prepare:kn()},updateYAxisWidth(e,t){var{id:r,width:n}=t.payload,s=e.yAxis[r];if(s){var i=s.widthHistory||[];if(i.length===3&&i[0]===i[2]&&n===i[1]&&n!==s.width&&Math.abs(n-i[0])<=1)return;var l=[...i,n].slice(-3);e.yAxis[r]=E2(E2({},e.yAxis[r]),{},{width:n,widthHistory:l})}}}}),{addXAxis:pY,removeXAxis:gY,addYAxis:yY,removeYAxis:vY,addZAxis:dee,removeZAxis:fee,updateYAxisWidth:xY}=HT.actions,wY=HT.reducer,bY=ge([Bn],e=>({top:e.top,bottom:e.bottom,left:e.left,right:e.right})),jY=ge([bY,La,za],(e,t,r)=>{if(!(!e||t==null||r==null))return{x:e.left,y:e.top,width:Math.max(0,t-e.left-e.right),height:Math.max(0,r-e.top-e.bottom)}}),KT=()=>dt(jY),SY="Invariant failed";function kY(e,t){throw new Error(SY)}var _Y=["x","y"];function B0(){return B0=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},B0.apply(null,arguments)}function A2(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Tu(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?A2(Object(r),!0).forEach(function(n){NY(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):A2(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function NY(e,t,r){return(t=CY(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function CY(e){var t=EY(e,"string");return typeof t=="symbol"?t:t+""}function EY(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function AY(e,t){if(e==null)return{};var r,n,s=PY(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function PY(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function OY(e,t){var{x:r,y:n}=e,s=AY(e,_Y),i="".concat(r),l=parseInt(i,10),u="".concat(n),d=parseInt(u,10),m="".concat(t.height||s.height),f=parseInt(m,10),p="".concat(t.width||s.width),y=parseInt(p,10);return Tu(Tu(Tu(Tu(Tu({},t),s),l?{x:l}:{}),d?{y:d}:{}),{},{height:f,width:y,name:t.name,radius:t.radius})}function rm(e){return v.createElement(QG,B0({shapeType:"rectangle",propTransformer:OY,activeClassName:"recharts-active-bar"},e))}var TY=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return(n,s)=>{if(vt(t))return t;var i=vt(n)||Un(n);return i?t(n,s):(i||kY(),r)}},IY={},GT=Rs({name:"errorBars",initialState:IY,reducers:{addErrorBar:(e,t)=>{var{itemId:r,errorBar:n}=t.payload;e[r]||(e[r]=[]),e[r].push(n)},replaceErrorBar:(e,t)=>{var{itemId:r,prev:n,next:s}=t.payload;e[r]&&(e[r]=e[r].map(i=>i.dataKey===n.dataKey&&i.direction===n.direction?s:i))},removeErrorBar:(e,t)=>{var{itemId:r,errorBar:n}=t.payload;e[r]&&(e[r]=e[r].filter(s=>s.dataKey!==n.dataKey||s.direction!==n.direction))}}}),{addErrorBar:hee,replaceErrorBar:mee,removeErrorBar:pee}=GT.actions,DY=GT.reducer,RY=["children"];function $Y(e,t){if(e==null)return{};var r,n,s=MY(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function MY(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var FY={data:[],xAxisId:"xAxis-0",yAxisId:"yAxis-0",dataPointFormatter:()=>({x:0,y:0,value:0}),errorBarOffset:0},LY=v.createContext(FY);function zY(e){var{children:t}=e,r=$Y(e,RY);return v.createElement(LY.Provider,{value:r},t)}function YT(e,t){var r,n,s=dt(m=>Ba(m,e)),i=dt(m=>Wa(m,t)),l=(r=s==null?void 0:s.allowDataOverflow)!==null&&r!==void 0?r:qs.allowDataOverflow,u=(n=i==null?void 0:i.allowDataOverflow)!==null&&n!==void 0?n:Hs.allowDataOverflow,d=l||u;return{needClip:d,needClipX:l,needClipY:u}}function UY(e){var{xAxisId:t,yAxisId:r,clipPathId:n}=e,s=KT(),{needClipX:i,needClipY:l,needClip:u}=YT(t,r);if(!u||!s)return null;var{x:d,y:m,width:f,height:p}=s;return v.createElement("clipPath",{id:"clipPath-".concat(n)},v.createElement("rect",{x:i?d:d-f/2,y:l?m:m-p/2,width:i?f:f*2,height:l?p:p*2}))}function BY(e,t){return e&&typeof e=="object"&&"zIndex"in e&&typeof e.zIndex=="number"&&tn(e.zIndex)?e.zIndex:t}var WY=["onMouseEnter","onMouseLeave","onClick"],VY=["value","background","tooltipPosition"],qY=["id"],HY=["onMouseEnter","onClick","onMouseLeave"];function Ma(){return Ma=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Ma.apply(null,arguments)}function P2(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function gs(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?P2(Object(r),!0).forEach(function(n){KY(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):P2(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function KY(e,t,r){return(t=GY(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function GY(e){var t=YY(e,"string");return typeof t=="symbol"?t:t+""}function YY(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function nm(e,t){if(e==null)return{};var r,n,s=JY(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function JY(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var XY=e=>{var{dataKey:t,name:r,fill:n,legendType:s,hide:i}=e;return[{inactive:i,dataKey:t,type:s,color:n,value:qA(r,t),payload:e}]};function QY(e){var{dataKey:t,stroke:r,strokeWidth:n,fill:s,name:i,hide:l,unit:u}=e;return{dataDefinedOnItem:void 0,positions:void 0,settings:{stroke:r,strokeWidth:n,fill:s,dataKey:t,nameKey:void 0,name:qA(i,t),hide:l,type:e.tooltipType,color:e.fill,unit:u}}}function ZY(e){var t=dt(Ec),{data:r,dataKey:n,background:s,allOtherBarProps:i}=e,{onMouseEnter:l,onMouseLeave:u,onClick:d}=i,m=nm(i,WY),f=UT(l,n),p=BT(u),y=WT(d,n);if(!s||r==null)return null;var x=jx(s);return v.createElement(_o,{zIndex:BY(s,Is.barBackground)},r.map((w,b)=>{var{value:S,background:_,tooltipPosition:E}=w,C=nm(w,VY);if(!_)return null;var O=f(w,b),T=p(w,b),P=y(w,b),F=gs(gs(gs(gs(gs({option:s,isActive:String(b)===t},C),{},{fill:"#eee"},_),x),Ax(m,w,b)),{},{onMouseEnter:O,onMouseLeave:T,onClick:P,dataKey:n,index:b,className:"recharts-bar-background-rectangle"});return v.createElement(rm,Ma({key:"background-bar-".concat(b)},F))}))}function eJ(e){var{showLabels:t,children:r,rects:n}=e,s=n==null?void 0:n.map(i=>{var l={x:i.x,y:i.y,width:i.width,lowerWidth:i.width,upperWidth:i.width,height:i.height};return gs(gs({},l),{},{value:i.value,payload:i.payload,parentViewBox:i.parentViewBox,viewBox:l,fill:i.fill})});return v.createElement(kG,{value:t?s:void 0},r)}function tJ(e){var{shape:t,activeBar:r,baseProps:n,entry:s,index:i,dataKey:l}=e,u=dt(Ec),d=dt(gT),m=r&&String(i)===u&&(d==null||l===d),f=m?r:t;return m?v.createElement(_o,{zIndex:Is.activeBar},v.createElement(rm,Ma({},n,{name:String(n.name)},s,{isActive:m,option:f,index:i,dataKey:l}))):v.createElement(rm,Ma({},n,{name:String(n.name)},s,{isActive:m,option:f,index:i,dataKey:l}))}function rJ(e){var{shape:t,baseProps:r,entry:n,index:s,dataKey:i}=e;return v.createElement(rm,Ma({},r,{name:String(r.name)},n,{isActive:!1,option:t,index:s,dataKey:i}))}function nJ(e){var t,{data:r,props:n}=e,s=(t=vo(n))!==null&&t!==void 0?t:{},{id:i}=s,l=nm(s,qY),{shape:u,dataKey:d,activeBar:m}=n,{onMouseEnter:f,onClick:p,onMouseLeave:y}=n,x=nm(n,HY),w=UT(f,d),b=BT(y),S=WT(p,d);return r?v.createElement(v.Fragment,null,r.map((_,E)=>v.createElement(Pa,Ma({key:"rectangle-".concat(_==null?void 0:_.x,"-").concat(_==null?void 0:_.y,"-").concat(_==null?void 0:_.value,"-").concat(E),className:"recharts-bar-rectangle"},Ax(x,_,E),{onMouseEnter:w(_,E),onMouseLeave:b(_,E),onClick:S(_,E)}),m?v.createElement(tJ,{shape:u,activeBar:m,baseProps:l,entry:_,index:E,dataKey:d}):v.createElement(rJ,{shape:u,baseProps:l,entry:_,index:E,dataKey:d})))):null}function sJ(e){var{props:t,previousRectanglesRef:r}=e,{data:n,layout:s,isAnimationActive:i,animationBegin:l,animationDuration:u,animationEasing:d,onAnimationEnd:m,onAnimationStart:f}=t,p=r.current,y=zx(t,"recharts-bar-"),[x,w]=v.useState(!1),b=!x,S=v.useCallback(()=>{typeof m=="function"&&m(),w(!1)},[m]),_=v.useCallback(()=>{typeof f=="function"&&f(),w(!0)},[f]);return v.createElement(eJ,{showLabels:b,rects:n},v.createElement(Lx,{animationId:y,begin:l,duration:u,isActive:i,easing:d,onAnimationEnd:S,onAnimationStart:_,key:y},E=>{var C=E===1?n:n==null?void 0:n.map((O,T)=>{var P=p&&p[T];if(P)return gs(gs({},O),{},{x:Jn(P.x,O.x,E),y:Jn(P.y,O.y,E),width:Jn(P.width,O.width,E),height:Jn(P.height,O.height,E)});if(s==="horizontal"){var F=Jn(0,O.height,E),H=Jn(O.stackedBarStart,O.y,E);return gs(gs({},O),{},{y:H,height:F})}var L=Jn(0,O.width,E),q=Jn(O.stackedBarStart,O.x,E);return gs(gs({},O),{},{width:L,x:q})});return E>0&&(r.current=C??null),C==null?null:v.createElement(Pa,null,v.createElement(nJ,{props:t,data:C}))}),v.createElement(CG,{label:t.label}),t.children)}function iJ(e){var t=v.useRef(null);return v.createElement(sJ,{previousRectanglesRef:t,props:e})}var JT=0,aJ=(e,t)=>{var r=Array.isArray(e.value)?e.value[1]:e.value;return{x:e.x,y:e.y,value:r,errorVal:vs(e,t)}};class oJ extends v.PureComponent{render(){var{hide:t,data:r,dataKey:n,className:s,xAxisId:i,yAxisId:l,needClip:u,background:d,id:m}=this.props;if(t||r==null)return null;var f=Tr("recharts-bar",s),p=m;return v.createElement(Pa,{className:f,id:m},u&&v.createElement("defs",null,v.createElement(UY,{clipPathId:p,xAxisId:i,yAxisId:l})),v.createElement(Pa,{className:"recharts-bar-rectangles",clipPath:u?"url(#clipPath-".concat(p,")"):void 0},v.createElement(ZY,{data:r,dataKey:n,background:d,allOtherBarProps:this.props}),v.createElement(iJ,this.props)))}}var lJ={activeBar:!1,animationBegin:0,animationDuration:400,animationEasing:"ease",hide:!1,isAnimationActive:!Lc.isSsr,legendType:"rect",minPointSize:JT,xAxisId:0,yAxisId:0,zIndex:Is.bar};function cJ(e){var{xAxisId:t,yAxisId:r,hide:n,legendType:s,minPointSize:i,activeBar:l,animationBegin:u,animationDuration:d,animationEasing:m,isAnimationActive:f}=e,{needClip:p}=YT(t,r),y=$m(),x=ni(),w=IG(e.children,Lw),b=dt(E=>MJ(E,t,r,x,e.id,w));if(y!=="vertical"&&y!=="horizontal")return null;var S,_=b==null?void 0:b[0];return _==null||_.height==null||_.width==null?S=0:S=y==="vertical"?_.height/2:_.width/2,v.createElement(zY,{xAxisId:t,yAxisId:r,data:b,dataPointFormatter:aJ,errorBarOffset:S},v.createElement(oJ,Ma({},e,{layout:y,needClip:p,data:b,xAxisId:t,yAxisId:r,hide:n,legendType:s,minPointSize:i,activeBar:l,animationBegin:u,animationDuration:d,animationEasing:m,isAnimationActive:f})))}function uJ(e){var{layout:t,barSettings:{dataKey:r,minPointSize:n},pos:s,bandSize:i,xAxis:l,yAxis:u,xAxisTicks:d,yAxisTicks:m,stackedData:f,displayedData:p,offset:y,cells:x,parentViewBox:w,dataStartIndex:b}=e,S=t==="horizontal"?u:l,_=f?S.scale.domain():null,E=fB({numericAxis:S}),C=S.scale(E);return p.map((O,T)=>{var P,F,H,L,q,z;f?P=aB(f[T+b],_):(P=vs(O,r),Array.isArray(P)||(P=[E,P]));var U=TY(n,JT)(P[1],T);if(t==="horizontal"){var ne,[ie,oe]=[u.scale(P[0]),u.scale(P[1])];F=d_({axis:l,ticks:d,bandSize:i,offset:s.offset,entry:O,index:T}),H=(ne=oe??ie)!==null&&ne!==void 0?ne:void 0,L=s.size;var V=ie-oe;if(q=ra(V)?0:V,z={x:F,y:y.top,width:L,height:y.height},Math.abs(U)>0&&Math.abs(q)<Math.abs(U)){var Z=Zs(q||U)*(Math.abs(U)-Math.abs(q));H-=Z,q+=Z}}else{var[ee,re]=[l.scale(P[0]),l.scale(P[1])];if(F=ee,H=d_({axis:u,ticks:m,bandSize:i,offset:s.offset,entry:O,index:T}),L=re-ee,q=s.size,z={x:y.left,y:H,width:y.width,height:q},Math.abs(U)>0&&Math.abs(L)<Math.abs(U)){var me=Zs(L||U)*(Math.abs(U)-Math.abs(L));L+=me}}if(F==null||H==null||L==null||q==null)return null;var I=gs(gs({},O),{},{stackedBarStart:C,x:F,y:H,width:L,height:q,value:f?P:P[1],payload:O,background:z,tooltipPosition:{x:F+L/2,y:H+q/2},parentViewBox:w},x&&x[T]&&x[T].props);return I}).filter(Boolean)}function dJ(e){var t=wi(e,lJ),r=ni();return v.createElement(sY,{id:t.id,type:"bar"},n=>v.createElement(v.Fragment,null,v.createElement(eY,{legendPayload:XY(t)}),v.createElement(ZG,{fn:QY,args:t}),v.createElement(uY,{type:"bar",id:n,data:void 0,xAxisId:t.xAxisId,yAxisId:t.yAxisId,zAxisId:0,dataKey:t.dataKey,stackId:dB(t.stackId),hide:t.hide,barSize:t.barSize,minPointSize:t.minPointSize,maxBarSize:t.maxBarSize,isPanorama:r}),v.createElement(_o,{zIndex:t.zIndex},v.createElement(cJ,Ma({},t,{id:n})))))}var XT=v.memo(dJ);XT.displayName="Bar";function O2(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Gf(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?O2(Object(r),!0).forEach(function(n){fJ(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):O2(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function fJ(e,t,r){return(t=hJ(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function hJ(e){var t=mJ(e,"string");return typeof t=="symbol"?t:t+""}function mJ(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var pJ=(e,t)=>t,gJ=(e,t,r)=>r,yJ=(e,t,r,n)=>n,vJ=(e,t,r,n,s)=>s,Od=ge([bw,vJ],(e,t)=>e.filter(r=>r.type==="bar").find(r=>r.id===t)),xJ=ge([Od],e=>e==null?void 0:e.maxBarSize),wJ=(e,t,r,n,s,i)=>i,T2=(e,t,r)=>{var n=r??e;if(!Un(n))return zi(n,t,0)},bJ=ge([ur,bw,pJ,gJ,yJ],(e,t,r,n,s)=>t.filter(i=>e==="horizontal"?i.xAxisId===r:i.yAxisId===n).filter(i=>i.isPanorama===s).filter(i=>i.hide===!1).filter(i=>i.type==="bar")),jJ=(e,t,r,n)=>{var s=ur(e);return s==="horizontal"?R0(e,"yAxis",r,n):R0(e,"xAxis",t,n)},SJ=(e,t,r)=>{var n=ur(e);return n==="horizontal"?MN(e,"xAxis",t):MN(e,"yAxis",r)},kJ=(e,t,r)=>{var n={},s=e.filter(Ym),i=e.filter(m=>m.stackId==null),l=s.reduce((m,f)=>(m[f.stackId]||(m[f.stackId]=[]),m[f.stackId].push(f),m),n),u=Object.entries(l).map(m=>{var[f,p]=m,y=p.map(w=>w.dataKey),x=T2(t,r,p[0].barSize);return{stackId:f,dataKeys:y,barSize:x}}),d=i.map(m=>{var f=[m.dataKey].filter(y=>y!=null),p=T2(t,r,m.barSize);return{stackId:void 0,dataKeys:f,barSize:p}});return[...u,...d]},_J=ge([bJ,hV,SJ],kJ),NJ=(e,t,r,n,s)=>{var i,l,u=Od(e,t,r,n,s);if(u!=null){var d=ur(e),m=sO(e),{maxBarSize:f}=u,p=Un(f)?m:f,y,x;return d==="horizontal"?(y=Cc(e,"xAxis",t,n),x=Nc(e,"xAxis",t,n)):(y=Cc(e,"yAxis",r,n),x=Nc(e,"yAxis",r,n)),(i=(l=Dh(y,x,!0))!==null&&l!==void 0?l:p)!==null&&i!==void 0?i:0}},QT=(e,t,r,n)=>{var s=ur(e),i,l;return s==="horizontal"?(i=Cc(e,"xAxis",t,n),l=Nc(e,"xAxis",t,n)):(i=Cc(e,"yAxis",r,n),l=Nc(e,"yAxis",r,n)),Dh(i,l)};function CJ(e,t,r,n,s){var i=n.length;if(!(i<1)){var l=zi(e,r,0,!0),u,d=[];if(tn(n[0].barSize)){var m=!1,f=r/i,p=n.reduce((_,E)=>_+(E.barSize||0),0);p+=(i-1)*l,p>=r&&(p-=(i-1)*l,l=0),p>=r&&f>0&&(m=!0,f*=.9,p=i*f);var y=(r-p)/2>>0,x={offset:y-l,size:0};u=n.reduce((_,E)=>{var C,O={stackId:E.stackId,dataKeys:E.dataKeys,position:{offset:x.offset+x.size+l,size:m?f:(C=E.barSize)!==null&&C!==void 0?C:0}},T=[..._,O];return x=T[T.length-1].position,T},d)}else{var w=zi(t,r,0,!0);r-2*w-(i-1)*l<=0&&(l=0);var b=(r-2*w-(i-1)*l)/i;b>1&&(b>>=0);var S=tn(s)?Math.min(b,s):b;u=n.reduce((_,E,C)=>[..._,{stackId:E.stackId,dataKeys:E.dataKeys,position:{offset:w+(b+l)*C+(b-S)/2,size:S}}],d)}return u}}var EJ=(e,t,r,n,s,i,l)=>{var u=Un(l)?t:l,d=CJ(r,n,s!==i?s:i,e,u);return s!==i&&d!=null&&(d=d.map(m=>Gf(Gf({},m),{},{position:Gf(Gf({},m.position),{},{offset:m.position.offset-s/2})}))),d},AJ=ge([_J,sO,fV,iO,NJ,QT,xJ],EJ),PJ=(e,t,r,n)=>Cc(e,"xAxis",t,n),OJ=(e,t,r,n)=>Cc(e,"yAxis",r,n),TJ=(e,t,r,n)=>Nc(e,"xAxis",t,n),IJ=(e,t,r,n)=>Nc(e,"yAxis",r,n),DJ=ge([AJ,Od],(e,t)=>{if(!(e==null||t==null)){var r=e.find(n=>n.stackId===t.stackId&&t.dataKey!=null&&n.dataKeys.includes(t.dataKey));if(r!=null)return r.position}}),RJ=(e,t)=>{var r=xw(t);if(!(!e||r==null||t==null)){var{stackId:n}=t;if(n!=null){var s=e[n];if(s){var{stackedData:i}=s;if(i)return i.find(l=>l.key===r)}}}},$J=ge([jJ,Od],RJ),MJ=ge([Bn,Mx,PJ,OJ,TJ,IJ,DJ,ur,uw,QT,$J,Od,wJ],(e,t,r,n,s,i,l,u,d,m,f,p,y)=>{var{chartData:x,dataStartIndex:w,dataEndIndex:b}=d;if(!(p==null||l==null||t==null||u!=="horizontal"&&u!=="vertical"||r==null||n==null||s==null||i==null||m==null)){var{data:S}=p,_;if(S!=null&&S.length>0?_=S:_=x==null?void 0:x.slice(w,b+1),_!=null)return uJ({layout:u,barSettings:p,pos:l,parentViewBox:t,bandSize:m,xAxis:r,yAxis:n,xAxisTicks:s,yAxisTicks:i,stackedData:f,displayedData:_,offset:e,cells:y,dataStartIndex:w})}}),FJ=e=>{var{chartData:t}=e,r=rn(),n=ni();return v.useEffect(()=>n?()=>{}:(r(YN(t)),()=>{r(YN(void 0))}),[t,r,n]),null},I2={x:0,y:0,width:0,height:0,padding:{top:0,right:0,bottom:0,left:0}},ZT=Rs({name:"brush",initialState:I2,reducers:{setBrushSettings(e,t){return t.payload==null?I2:t.payload}}}),{setBrushSettings:gee}=ZT.actions,LJ=ZT.reducer;function zJ(e,t,r){return(t=UJ(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function UJ(e){var t=BJ(e,"string");return typeof t=="symbol"?t:t+""}function BJ(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class Bw{static create(t){return new Bw(t)}constructor(t){this.scale=t}get domain(){return this.scale.domain}get range(){return this.scale.range}get rangeMin(){return this.range()[0]}get rangeMax(){return this.range()[1]}get bandwidth(){return this.scale.bandwidth}apply(t){var{bandAware:r,position:n}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(t!==void 0){if(n)switch(n){case"start":return this.scale(t);case"middle":{var s=this.bandwidth?this.bandwidth()/2:0;return this.scale(t)+s}case"end":{var i=this.bandwidth?this.bandwidth():0;return this.scale(t)+i}default:return this.scale(t)}if(r){var l=this.bandwidth?this.bandwidth()/2:0;return this.scale(t)+l}return this.scale(t)}}isInRange(t){var r=this.range(),n=r[0],s=r[r.length-1];return n<=s?t>=n&&t<=s:t>=s&&t<=n}}zJ(Bw,"EPS",1e-4);function WJ(e){return(e%180+180)%180}var VJ=function(t){var{width:r,height:n}=t,s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,i=WJ(s),l=i*Math.PI/180,u=Math.atan(n/r),d=l>u&&l<Math.PI-u?n/Math.sin(l):r/Math.cos(l);return Math.abs(d)},qJ={dots:[],areas:[],lines:[]},eI=Rs({name:"referenceElements",initialState:qJ,reducers:{addDot:(e,t)=>{e.dots.push(t.payload)},removeDot:(e,t)=>{var r=Na(e).dots.findIndex(n=>n===t.payload);r!==-1&&e.dots.splice(r,1)},addArea:(e,t)=>{e.areas.push(t.payload)},removeArea:(e,t)=>{var r=Na(e).areas.findIndex(n=>n===t.payload);r!==-1&&e.areas.splice(r,1)},addLine:(e,t)=>{e.lines.push(t.payload)},removeLine:(e,t)=>{var r=Na(e).lines.findIndex(n=>n===t.payload);r!==-1&&e.lines.splice(r,1)}}}),{addDot:yee,removeDot:vee,addArea:xee,removeArea:wee,addLine:bee,removeLine:jee}=eI.actions,HJ=eI.reducer,KJ=v.createContext(void 0),GJ=e=>{var{children:t}=e,[r]=v.useState("".concat(Qu("recharts"),"-clip")),n=KT();if(n==null)return null;var{x:s,y:i,width:l,height:u}=n;return v.createElement(KJ.Provider,{value:r},v.createElement("defs",null,v.createElement("clipPath",{id:r},v.createElement("rect",{x:s,y:i,height:u,width:l}))),t)};function Ac(e,t){for(var r in e)if({}.hasOwnProperty.call(e,r)&&(!{}.hasOwnProperty.call(t,r)||e[r]!==t[r]))return!1;for(var n in t)if({}.hasOwnProperty.call(t,n)&&!{}.hasOwnProperty.call(e,n))return!1;return!0}function tI(e,t){if(t<1)return[];if(t===1)return e;for(var r=[],n=0;n<e.length;n+=t)r.push(e[n]);return r}function YJ(e,t,r){var n={width:e.width+t.width,height:e.height+t.height};return VJ(n,r)}function JJ(e,t,r){var n=r==="width",{x:s,y:i,width:l,height:u}=e;return t===1?{start:n?s:i,end:n?s+l:i+u}:{start:n?s+l:i+u,end:n?s:i}}function sm(e,t,r,n,s){if(e*t<e*n||e*t>e*s)return!1;var i=r();return e*(t-e*i/2-n)>=0&&e*(t+e*i/2-s)<=0}function XJ(e,t){return tI(e,t+1)}function QJ(e,t,r,n,s){for(var i=(n||[]).slice(),{start:l,end:u}=t,d=0,m=1,f=l,p=function(){var w=n==null?void 0:n[d];if(w===void 0)return{v:tI(n,m)};var b=d,S,_=()=>(S===void 0&&(S=r(w,b)),S),E=w.coordinate,C=d===0||sm(e,E,_,f,u);C||(d=0,f=l,m+=1),C&&(f=E+e*(_()/2+s),d+=m)},y;m<=i.length;)if(y=p(),y)return y.v;return[]}function D2(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function os(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?D2(Object(r),!0).forEach(function(n){ZJ(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):D2(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function ZJ(e,t,r){return(t=eX(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function eX(e){var t=tX(e,"string");return typeof t=="symbol"?t:t+""}function tX(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function rX(e,t,r,n,s){for(var i=(n||[]).slice(),l=i.length,{start:u}=t,{end:d}=t,m=function(y){var x=i[y],w,b=()=>(w===void 0&&(w=r(x,y)),w);if(y===l-1){var S=e*(x.coordinate+e*b()/2-d);i[y]=x=os(os({},x),{},{tickCoord:S>0?x.coordinate-S*e:x.coordinate})}else i[y]=x=os(os({},x),{},{tickCoord:x.coordinate});if(x.tickCoord!=null){var _=sm(e,x.tickCoord,b,u,d);_&&(d=x.tickCoord-e*(b()/2+s),i[y]=os(os({},x),{},{isShow:!0}))}},f=l-1;f>=0;f--)m(f);return i}function nX(e,t,r,n,s,i){var l=(n||[]).slice(),u=l.length,{start:d,end:m}=t;if(i){var f=n[u-1],p=r(f,u-1),y=e*(f.coordinate+e*p/2-m);if(l[u-1]=f=os(os({},f),{},{tickCoord:y>0?f.coordinate-y*e:f.coordinate}),f.tickCoord!=null){var x=sm(e,f.tickCoord,()=>p,d,m);x&&(m=f.tickCoord-e*(p/2+s),l[u-1]=os(os({},f),{},{isShow:!0}))}}for(var w=i?u-1:u,b=function(E){var C=l[E],O,T=()=>(O===void 0&&(O=r(C,E)),O);if(E===0){var P=e*(C.coordinate-e*T()/2-d);l[E]=C=os(os({},C),{},{tickCoord:P<0?C.coordinate-P*e:C.coordinate})}else l[E]=C=os(os({},C),{},{tickCoord:C.coordinate});if(C.tickCoord!=null){var F=sm(e,C.tickCoord,T,d,m);F&&(d=C.tickCoord+e*(T()/2+s),l[E]=os(os({},C),{},{isShow:!0}))}},S=0;S<w;S++)b(S);return l}function sX(e,t,r){var{tick:n,ticks:s,viewBox:i,minTickGap:l,orientation:u,interval:d,tickFormatter:m,unit:f,angle:p}=e;if(!s||!s.length||!n)return[];if(vt(d)||Lc.isSsr){var y;return(y=XJ(s,vt(d)?d:0))!==null&&y!==void 0?y:[]}var x=[],w=u==="top"||u==="bottom"?"width":"height",b=f&&w==="width"?Hu(f,{fontSize:t,letterSpacing:r}):{width:0,height:0},S=(C,O)=>{var T=typeof m=="function"?m(C.value,O):C.value;return w==="width"?YJ(Hu(T,{fontSize:t,letterSpacing:r}),b,p):Hu(T,{fontSize:t,letterSpacing:r})[w]},_=s.length>=2?Zs(s[1].coordinate-s[0].coordinate):1,E=JJ(i,_,w);return d==="equidistantPreserveStart"?QJ(_,E,S,s,l):(d==="preserveStart"||d==="preserveStartEnd"?x=nX(_,E,S,s,l,d==="preserveStartEnd"):x=rX(_,E,S,s,l),x.filter(C=>C.isShow))}var iX=e=>{var{ticks:t,label:r,labelGapWithTick:n=5,tickSize:s=0,tickMargin:i=0}=e,l=0;if(t){Array.from(t).forEach(f=>{if(f){var p=f.getBoundingClientRect();p.width>l&&(l=p.width)}});var u=r?r.getBoundingClientRect().width:0,d=s+i,m=l+d+u+(r?n:0);return Math.round(m)}return 0},aX=["axisLine","width","height","className","hide","ticks","axisType"],oX=["viewBox"],lX=["viewBox"];function W0(e,t){if(e==null)return{};var r,n,s=cX(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function cX(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function fl(){return fl=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},fl.apply(null,arguments)}function R2(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function mn(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?R2(Object(r),!0).forEach(function(n){uX(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):R2(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function uX(e,t,r){return(t=dX(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function dX(e){var t=fX(e,"string");return typeof t=="symbol"?t:t+""}function fX(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var hX={x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd",zIndex:Is.axis};function mX(e){var{x:t,y:r,width:n,height:s,orientation:i,mirror:l,axisLine:u,otherSvgProps:d}=e;if(!u)return null;var m=mn(mn(mn({},d),vo(u)),{},{fill:"none"});if(i==="top"||i==="bottom"){var f=+(i==="top"&&!l||i==="bottom"&&l);m=mn(mn({},m),{},{x1:t,y1:r+f*s,x2:t+n,y2:r+f*s})}else{var p=+(i==="left"&&!l||i==="right"&&l);m=mn(mn({},m),{},{x1:t+p*n,y1:r,x2:t+p*n,y2:r+s})}return v.createElement("line",fl({},m,{className:Tr("recharts-cartesian-axis-line",jc(u,"className"))}))}function pX(e,t,r,n,s,i,l,u,d){var m,f,p,y,x,w,b=u?-1:1,S=e.tickSize||l,_=vt(e.tickCoord)?e.tickCoord:e.coordinate;switch(i){case"top":m=f=e.coordinate,y=r+ +!u*s,p=y-b*S,w=p-b*d,x=_;break;case"left":p=y=e.coordinate,f=t+ +!u*n,m=f-b*S,x=m-b*d,w=_;break;case"right":p=y=e.coordinate,f=t+ +u*n,m=f+b*S,x=m+b*d,w=_;break;default:m=f=e.coordinate,y=r+ +u*s,p=y+b*S,w=p+b*d,x=_;break}return{line:{x1:m,y1:p,x2:f,y2:y},tick:{x,y:w}}}function gX(e,t){switch(e){case"left":return t?"start":"end";case"right":return t?"end":"start";default:return"middle"}}function yX(e,t){switch(e){case"left":case"right":return"middle";case"top":return t?"start":"end";default:return t?"end":"start"}}function vX(e){var{option:t,tickProps:r,value:n}=e,s,i=Tr(r.className,"recharts-cartesian-axis-tick-value");if(v.isValidElement(t))s=v.cloneElement(t,mn(mn({},r),{},{className:i}));else if(typeof t=="function")s=t(mn(mn({},r),{},{className:i}));else{var l="recharts-cartesian-axis-tick-value";typeof t!="boolean"&&(l=Tr(l,t==null?void 0:t.className)),s=v.createElement(zw,fl({},r,{className:l}),n)}return s}var xX=v.forwardRef((e,t)=>{var{ticks:r=[],tick:n,tickLine:s,stroke:i,tickFormatter:l,unit:u,padding:d,tickTextProps:m,orientation:f,mirror:p,x:y,y:x,width:w,height:b,tickSize:S,tickMargin:_,fontSize:E,letterSpacing:C,getTicksConfig:O,events:T,axisType:P}=e,F=sX(mn(mn({},O),{},{ticks:r}),E,C),H=gX(f,p),L=yX(f,p),q=vo(O),z=jx(n),U={};typeof s=="object"&&(U=s);var ne=mn(mn({},q),{},{fill:"none"},U),ie=F.map(Z=>mn({entry:Z},pX(Z,y,x,w,b,f,S,p,_))),oe=ie.map(Z=>{var{entry:ee,line:re}=Z;return v.createElement(Pa,{className:"recharts-cartesian-axis-tick",key:"tick-".concat(ee.value,"-").concat(ee.coordinate,"-").concat(ee.tickCoord)},s&&v.createElement("line",fl({},ne,re,{className:Tr("recharts-cartesian-axis-tick-line",jc(s,"className"))})))}),V=ie.map((Z,ee)=>{var{entry:re,tick:me}=Z,I=mn(mn(mn(mn({textAnchor:H,verticalAnchor:L},q),{},{stroke:"none",fill:i},z),me),{},{index:ee,payload:re,visibleTicksCount:F.length,tickFormatter:l,padding:d},m);return v.createElement(Pa,fl({className:"recharts-cartesian-axis-tick-label",key:"tick-label-".concat(re.value,"-").concat(re.coordinate,"-").concat(re.tickCoord)},Ax(T,re,ee)),n&&v.createElement(vX,{option:n,tickProps:I,value:"".concat(typeof l=="function"?l(re.value,ee):re.value).concat(u||"")}))});return v.createElement("g",{className:"recharts-cartesian-axis-ticks recharts-".concat(P,"-ticks")},V.length>0&&v.createElement(_o,{zIndex:Is.label},v.createElement("g",{className:"recharts-cartesian-axis-tick-labels recharts-".concat(P,"-tick-labels"),ref:t},V)),oe.length>0&&v.createElement("g",{className:"recharts-cartesian-axis-tick-lines recharts-".concat(P,"-tick-lines")},oe))}),wX=v.forwardRef((e,t)=>{var{axisLine:r,width:n,height:s,className:i,hide:l,ticks:u,axisType:d}=e,m=W0(e,aX),[f,p]=v.useState(""),[y,x]=v.useState(""),w=v.useRef(null);v.useImperativeHandle(t,()=>({getCalculatedWidth:()=>{var S;return iX({ticks:w.current,label:(S=e.labelRef)===null||S===void 0?void 0:S.current,labelGapWithTick:5,tickSize:e.tickSize,tickMargin:e.tickMargin})}}));var b=v.useCallback(S=>{if(S){var _=S.getElementsByClassName("recharts-cartesian-axis-tick-value");w.current=_;var E=_[0];if(E){var C=window.getComputedStyle(E),O=C.fontSize,T=C.letterSpacing;(O!==f||T!==y)&&(p(O),x(T))}}},[f,y]);return l||n!=null&&n<=0||s!=null&&s<=0?null:v.createElement(_o,{zIndex:e.zIndex},v.createElement(Pa,{className:Tr("recharts-cartesian-axis",i)},v.createElement(mX,{x:e.x,y:e.y,width:n,height:s,orientation:e.orientation,mirror:e.mirror,axisLine:r,otherSvgProps:vo(e)}),v.createElement(xX,{ref:b,axisType:d,events:m,fontSize:f,getTicksConfig:e,height:e.height,letterSpacing:y,mirror:e.mirror,orientation:e.orientation,padding:e.padding,stroke:e.stroke,tick:e.tick,tickFormatter:e.tickFormatter,tickLine:e.tickLine,tickMargin:e.tickMargin,tickSize:e.tickSize,tickTextProps:e.tickTextProps,ticks:u,unit:e.unit,width:e.width,x:e.x,y:e.y}),v.createElement(nG,{x:e.x,y:e.y,width:e.width,height:e.height,lowerWidth:e.width,upperWidth:e.width},v.createElement(hG,{label:e.label,labelRef:e.labelRef}),e.children)))}),bX=v.memo(wX,(e,t)=>{var{viewBox:r}=e,n=W0(e,oX),{viewBox:s}=t,i=W0(t,lX);return Ac(r,s)&&Ac(n,i)}),Ww=v.forwardRef((e,t)=>{var r=wi(e,hX);return v.createElement(bX,fl({},r,{ref:t}))});Ww.displayName="CartesianAxis";var jX=["dangerouslySetInnerHTML","ticks"],SX=["id"],kX=["domain"],_X=["domain"];function V0(){return V0=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},V0.apply(null,arguments)}function im(e,t){if(e==null)return{};var r,n,s=NX(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function NX(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function CX(e){var t=rn();return v.useLayoutEffect(()=>(t(pY(e)),()=>{t(gY(e))}),[e,t]),null}var EX=e=>{var{xAxisId:t,className:r}=e,n=dt(Mx),s=ni(),i="xAxis",l=dt(S=>qc(S,i,t,s)),u=dt(S=>YO(S,i,t,s)),d=dt(S=>qO(S,t)),m=dt(S=>uq(S,t)),f=dt(S=>hO(S,t));if(d==null||m==null||f==null)return null;var{dangerouslySetInnerHTML:p,ticks:y}=e,x=im(e,jX),{id:w}=f,b=im(f,SX);return v.createElement(Ww,V0({},x,b,{scale:l,x:m.x,y:m.y,width:d.width,height:d.height,className:Tr("recharts-".concat(i," ").concat(i),r),viewBox:n,ticks:u,axisType:i}))},AX={allowDataOverflow:qs.allowDataOverflow,allowDecimals:qs.allowDecimals,allowDuplicatedCategory:qs.allowDuplicatedCategory,height:qs.height,hide:!1,mirror:qs.mirror,orientation:qs.orientation,padding:qs.padding,reversed:qs.reversed,scale:qs.scale,tickCount:qs.tickCount,type:qs.type,xAxisId:0},PX=e=>{var t,r,n,s,i,l=wi(e,AX);return v.createElement(v.Fragment,null,v.createElement(CX,{interval:(t=l.interval)!==null&&t!==void 0?t:"preserveEnd",id:l.xAxisId,scale:l.scale,type:l.type,padding:l.padding,allowDataOverflow:l.allowDataOverflow,domain:l.domain,dataKey:l.dataKey,allowDuplicatedCategory:l.allowDuplicatedCategory,allowDecimals:l.allowDecimals,tickCount:l.tickCount,includeHidden:(r=l.includeHidden)!==null&&r!==void 0?r:!1,reversed:l.reversed,ticks:l.ticks,height:l.height,orientation:l.orientation,mirror:l.mirror,hide:l.hide,unit:l.unit,name:l.name,angle:(n=l.angle)!==null&&n!==void 0?n:0,minTickGap:(s=l.minTickGap)!==null&&s!==void 0?s:5,tick:(i=l.tick)!==null&&i!==void 0?i:!0,tickFormatter:l.tickFormatter}),v.createElement(EX,l))},OX=(e,t)=>{var{domain:r}=e,n=im(e,kX),{domain:s}=t,i=im(t,_X);return Ac(n,i)?Array.isArray(r)&&r.length===2&&Array.isArray(s)&&s.length===2?r[0]===s[0]&&r[1]===s[1]:Ac({domain:r},{domain:s}):!1},rI=v.memo(PX,OX);rI.displayName="XAxis";var TX=["dangerouslySetInnerHTML","ticks"],IX=["id"],DX=["domain"],RX=["domain"];function q0(){return q0=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},q0.apply(null,arguments)}function am(e,t){if(e==null)return{};var r,n,s=$X(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function $X(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function MX(e){var t=rn();return v.useLayoutEffect(()=>(t(yY(e)),()=>{t(vY(e))}),[e,t]),null}var FX=e=>{var{yAxisId:t,className:r,width:n,label:s}=e,i=v.useRef(null),l=v.useRef(null),u=dt(Mx),d=ni(),m=rn(),f="yAxis",p=dt(T=>qc(T,f,t,d)),y=dt(T=>HO(T,t)),x=dt(T=>fq(T,t)),w=dt(T=>YO(T,f,t,d)),b=dt(T=>mO(T,t));if(v.useLayoutEffect(()=>{if(!(n!=="auto"||!y||Uw(s)||v.isValidElement(s)||b==null)){var T=i.current;if(T){var P=T.getCalculatedWidth();Math.round(y.width)!==Math.round(P)&&m(xY({id:t,width:P}))}}},[w,y,m,s,t,n,b]),y==null||x==null||b==null)return null;var{dangerouslySetInnerHTML:S,ticks:_}=e,E=am(e,TX),{id:C}=b,O=am(b,IX);return v.createElement(Ww,q0({},E,O,{ref:i,labelRef:l,scale:p,x:x.x,y:x.y,tickTextProps:n==="auto"?{width:void 0}:{width:n},width:y.width,height:y.height,className:Tr("recharts-".concat(f," ").concat(f),r),viewBox:u,ticks:w,axisType:f}))},LX={allowDataOverflow:Hs.allowDataOverflow,allowDecimals:Hs.allowDecimals,allowDuplicatedCategory:Hs.allowDuplicatedCategory,hide:!1,mirror:Hs.mirror,orientation:Hs.orientation,padding:Hs.padding,reversed:Hs.reversed,scale:Hs.scale,tickCount:Hs.tickCount,type:Hs.type,width:Hs.width,yAxisId:0},zX=e=>{var t,r,n,s,i,l=wi(e,LX);return v.createElement(v.Fragment,null,v.createElement(MX,{interval:(t=l.interval)!==null&&t!==void 0?t:"preserveEnd",id:l.yAxisId,scale:l.scale,type:l.type,domain:l.domain,allowDataOverflow:l.allowDataOverflow,dataKey:l.dataKey,allowDuplicatedCategory:l.allowDuplicatedCategory,allowDecimals:l.allowDecimals,tickCount:l.tickCount,padding:l.padding,includeHidden:(r=l.includeHidden)!==null&&r!==void 0?r:!1,reversed:l.reversed,ticks:l.ticks,width:l.width,orientation:l.orientation,mirror:l.mirror,hide:l.hide,unit:l.unit,name:l.name,angle:(n=l.angle)!==null&&n!==void 0?n:0,minTickGap:(s=l.minTickGap)!==null&&s!==void 0?s:5,tick:(i=l.tick)!==null&&i!==void 0?i:!0,tickFormatter:l.tickFormatter}),v.createElement(FX,l))},UX=(e,t)=>{var{domain:r}=e,n=am(e,DX),{domain:s}=t,i=am(t,RX);return Ac(n,i)?Array.isArray(r)&&r.length===2&&Array.isArray(s)&&s.length===2?r[0]===s[0]&&r[1]===s[1]:Ac({domain:r},{domain:s}):!1},nI=v.memo(zX,UX);nI.displayName="YAxis";var kv={exports:{}},_v={};/**
 * @license React
 * use-sync-external-store-with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var $2;function BX(){if($2)return _v;$2=1;var e=Pc();function t(d,m){return d===m&&(d!==0||1/d===1/m)||d!==d&&m!==m}var r=typeof Object.is=="function"?Object.is:t,n=e.useSyncExternalStore,s=e.useRef,i=e.useEffect,l=e.useMemo,u=e.useDebugValue;return _v.useSyncExternalStoreWithSelector=function(d,m,f,p,y){var x=s(null);if(x.current===null){var w={hasValue:!1,value:null};x.current=w}else w=x.current;x=l(function(){function S(T){if(!_){if(_=!0,E=T,T=p(T),y!==void 0&&w.hasValue){var P=w.value;if(y(P,T))return C=P}return C=T}if(P=C,r(E,T))return P;var F=p(T);return y!==void 0&&y(P,F)?(E=T,P):(E=T,C=F)}var _=!1,E,C,O=f===void 0?null:f;return[function(){return S(m())},O===null?void 0:function(){return S(O())}]},[m,f,p,y]);var b=n(d,x[0],x[1]);return i(function(){w.hasValue=!0,w.value=b},[b]),u(b),b},_v}var M2;function WX(){return M2||(M2=1,kv.exports=BX()),kv.exports}WX();function VX(e){e()}function qX(){let e=null,t=null;return{clear(){e=null,t=null},notify(){VX(()=>{let r=e;for(;r;)r.callback(),r=r.next})},get(){const r=[];let n=e;for(;n;)r.push(n),n=n.next;return r},subscribe(r){let n=!0;const s=t={callback:r,next:null,prev:t};return s.prev?s.prev.next=s:e=s,function(){!n||e===null||(n=!1,s.next?s.next.prev=s.prev:t=s.prev,s.prev?s.prev.next=s.next:e=s.next)}}}}var F2={notify(){},get:()=>[]};function HX(e,t){let r,n=F2,s=0,i=!1;function l(b){f();const S=n.subscribe(b);let _=!1;return()=>{_||(_=!0,S(),p())}}function u(){n.notify()}function d(){w.onStateChange&&w.onStateChange()}function m(){return i}function f(){s++,r||(r=e.subscribe(d),n=qX())}function p(){s--,r&&s===0&&(r(),r=void 0,n.clear(),n=F2)}function y(){i||(i=!0,f())}function x(){i&&(i=!1,p())}const w={addNestedSub:l,notifyNestedSubs:u,handleChangeWrapper:d,isSubscribed:m,trySubscribe:y,tryUnsubscribe:x,getListeners:()=>n};return w}var KX=()=>typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",GX=KX(),YX=()=>typeof navigator<"u"&&navigator.product==="ReactNative",JX=YX(),XX=()=>GX||JX?v.useLayoutEffect:v.useEffect,QX=XX(),Nv=Symbol.for("react-redux-context"),Cv=typeof globalThis<"u"?globalThis:{};function ZX(){if(!v.createContext)return{};const e=Cv[Nv]??(Cv[Nv]=new Map);let t=e.get(v.createContext);return t||(t=v.createContext(null),e.set(v.createContext,t)),t}var eQ=ZX();function tQ(e){const{children:t,context:r,serverState:n,store:s}=e,i=v.useMemo(()=>{const d=HX(s);return{store:s,subscription:d,getServerState:n?()=>n:void 0}},[s,n]),l=v.useMemo(()=>s.getState(),[s]);QX(()=>{const{subscription:d}=i;return d.onStateChange=d.notifyNestedSubs,d.trySubscribe(),l!==s.getState()&&d.notifyNestedSubs(),()=>{d.tryUnsubscribe(),d.onStateChange=void 0}},[i,l]);const u=r||eQ;return v.createElement(u.Provider,{value:i},t)}var rQ=tQ,nQ=(e,t)=>t,Vw=ge([nQ,ur,dO,En,fT,Va,jH,Bn],AH),qw=e=>{var t=e.currentTarget.getBoundingClientRect(),r=t.width/e.currentTarget.offsetWidth,n=t.height/e.currentTarget.offsetHeight;return{chartX:Math.round((e.clientX-t.left)/r),chartY:Math.round((e.clientY-t.top)/n)}},sI=vi("mouseClick"),iI=xd();iI.startListening({actionCreator:sI,effect:(e,t)=>{var r=e.payload,n=Vw(t.getState(),qw(r));(n==null?void 0:n.activeIndex)!=null&&t.dispatch(_q({activeIndex:n.activeIndex,activeDataKey:void 0,activeCoordinate:n.activeCoordinate}))}});var H0=vi("mouseMove"),aI=xd();aI.startListening({actionCreator:H0,effect:(e,t)=>{var r=e.payload,n=t.getState(),s=Pw(n,n.tooltip.settings.shared),i=Vw(n,qw(r));s==="axis"&&((i==null?void 0:i.activeIndex)!=null?t.dispatch(nT({activeIndex:i.activeIndex,activeDataKey:void 0,activeCoordinate:i.activeCoordinate})):t.dispatch(rT()))}});var L2={accessibilityLayer:!0,barCategoryGap:"10%",barGap:4,barSize:void 0,className:void 0,maxBarSize:void 0,stackOffset:"none",syncId:void 0,syncMethod:"index",baseValue:void 0},oI=Rs({name:"rootProps",initialState:L2,reducers:{updateOptions:(e,t)=>{var r;e.accessibilityLayer=t.payload.accessibilityLayer,e.barCategoryGap=t.payload.barCategoryGap,e.barGap=(r=t.payload.barGap)!==null&&r!==void 0?r:L2.barGap,e.barSize=t.payload.barSize,e.maxBarSize=t.payload.maxBarSize,e.stackOffset=t.payload.stackOffset,e.syncId=t.payload.syncId,e.syncMethod=t.payload.syncMethod,e.className=t.payload.className,e.baseValue=t.payload.baseValue}}}),sQ=oI.reducer,{updateOptions:iQ}=oI.actions,lI=Rs({name:"polarOptions",initialState:null,reducers:{updatePolarOptions:(e,t)=>t.payload}}),{updatePolarOptions:See}=lI.actions,aQ=lI.reducer,cI=vi("keyDown"),uI=vi("focus"),Hw=xd();Hw.startListening({actionCreator:cI,effect:(e,t)=>{var r=t.getState(),n=r.rootProps.accessibilityLayer!==!1;if(n){var{keyboardInteraction:s}=r.tooltip,i=e.payload;if(!(i!=="ArrowRight"&&i!=="ArrowLeft"&&i!=="Enter")){var l=Number(Ow(s,Kc(r))),u=Va(r);if(i==="Enter"){var d=Qh(r,"axis","hover",String(s.index));t.dispatch(M0({active:!s.active,activeIndex:s.index,activeDataKey:s.dataKey,activeCoordinate:d}));return}var m=gq(r),f=m==="left-to-right"?1:-1,p=i==="ArrowRight"?1:-1,y=l+p*f;if(!(u==null||y>=u.length||y<0)){var x=Qh(r,"axis","hover",String(y));t.dispatch(M0({active:!0,activeIndex:y.toString(),activeDataKey:void 0,activeCoordinate:x}))}}}}});Hw.startListening({actionCreator:uI,effect:(e,t)=>{var r=t.getState(),n=r.rootProps.accessibilityLayer!==!1;if(n){var{keyboardInteraction:s}=r.tooltip;if(!s.active&&s.index==null){var i="0",l=Qh(r,"axis","hover",String(i));t.dispatch(M0({activeDataKey:void 0,active:!0,activeIndex:i,activeCoordinate:l}))}}}});var hi=vi("externalEvent"),dI=xd();dI.startListening({actionCreator:hi,effect:(e,t)=>{if(e.payload.handler!=null){var r=t.getState(),n={activeCoordinate:oH(r),activeDataKey:gT(r),activeIndex:Ec(r),activeLabel:pT(r),activeTooltipIndex:Ec(r),isTooltipActive:lH(r)};e.payload.handler(n,e.payload.reactEvent)}}});var oQ=ge([Hc],e=>e.tooltipItemPayloads),lQ=ge([oQ,Ad,(e,t,r)=>t,(e,t,r)=>r],(e,t,r,n)=>{var s=e.find(u=>u.settings.dataKey===n);if(s!=null){var{positions:i}=s;if(i!=null){var l=t(i,r);return l}}}),fI=vi("touchMove"),hI=xd();hI.startListening({actionCreator:fI,effect:(e,t)=>{var r=e.payload;if(!(r.touches==null||r.touches.length===0)){var n=t.getState(),s=Pw(n,n.tooltip.settings.shared);if(s==="axis"){var i=Vw(n,qw({clientX:r.touches[0].clientX,clientY:r.touches[0].clientY,currentTarget:r.currentTarget}));(i==null?void 0:i.activeIndex)!=null&&t.dispatch(nT({activeIndex:i.activeIndex,activeDataKey:void 0,activeCoordinate:i.activeCoordinate}))}else if(s==="item"){var l,u=r.touches[0];if(document.elementFromPoint==null)return;var d=document.elementFromPoint(u.clientX,u.clientY);if(!d||!d.getAttribute)return;var m=d.getAttribute(xB),f=(l=d.getAttribute(wB))!==null&&l!==void 0?l:void 0,p=lQ(t.getState(),m,f);t.dispatch(tT({activeDataKey:f,activeIndex:m,activeCoordinate:p}))}}}});var cQ=xA({brush:LJ,cartesianAxis:wY,chartData:oK,errorBars:DY,graphicalItems:cY,layout:eB,legend:n8,options:rK,polarAxis:AG,polarOptions:aQ,referenceElements:HJ,rootProps:sQ,tooltip:Nq,zIndex:WH}),uQ=function(t){return _U({reducer:cQ,preloadedState:t,middleware:r=>r({serializableCheck:!1}).concat([iI.middleware,aI.middleware,Hw.middleware,dI.middleware,hI.middleware]),enhancers:r=>{var n=r;return typeof r=="function"&&(n=r()),n.concat(OA({type:"raf"}))},devTools:Lc.devToolsEnabled})};function dQ(e){var{preloadedState:t,children:r,reduxStoreName:n}=e,s=ni(),i=v.useRef(null);if(s)return r;i.current==null&&(i.current=uQ(t));var l=Ox;return v.createElement(rQ,{context:l,store:i.current},r)}function fQ(e){var{layout:t,margin:r}=e,n=rn(),s=ni();return v.useEffect(()=>{s||(n(XU(t)),n(JU(r)))},[n,s,t,r]),null}function hQ(e){var t=rn();return v.useEffect(()=>{t(iQ(e))},[t,e]),null}function z2(e){var{zIndex:t,isPanorama:r}=e,n=r?"recharts-zindex-panorama-":"recharts-zindex-",s=VT("".concat(n).concat(t)),i=rn();return v.useLayoutEffect(()=>(i(UH({zIndex:t,elementId:s,isPanorama:r})),()=>{i(BH({zIndex:t,isPanorama:r}))}),[i,t,s,r]),v.createElement("g",{id:s})}function U2(e){var{children:t,isPanorama:r}=e,n=dt(OH);if(!n||n.length===0)return t;var s=n.filter(l=>l<0),i=n.filter(l=>l>0);return v.createElement(v.Fragment,null,s.map(l=>v.createElement(z2,{key:l,zIndex:l,isPanorama:r})),t,i.map(l=>v.createElement(z2,{key:l,zIndex:l,isPanorama:r})))}var mQ=["children"];function pQ(e,t){if(e==null)return{};var r,n,s=gQ(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function gQ(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function om(){return om=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},om.apply(null,arguments)}var yQ={width:"100%",height:"100%",display:"block"},vQ=v.forwardRef((e,t)=>{var r=XB(),n=QB(),s=QA();if(!xo(r)||!xo(n))return null;var{children:i,otherAttributes:l,title:u,desc:d}=e,m,f;return l!=null&&(typeof l.tabIndex=="number"?m=l.tabIndex:m=s?0:void 0,typeof l.role=="string"?f=l.role:f=s?"application":void 0),v.createElement(ME,om({},l,{title:u,desc:d,role:f,tabIndex:m,width:r,height:n,style:yQ,ref:t}),i)}),xQ=e=>{var{children:t}=e,r=dt(Dm);if(!r)return null;var{width:n,height:s,y:i,x:l}=r;return v.createElement(ME,{width:n,height:s,x:l,y:i},t)},B2=v.forwardRef((e,t)=>{var{children:r}=e,n=pQ(e,mQ),s=ni();return s?v.createElement(xQ,null,v.createElement(U2,{isPanorama:!0},r)):v.createElement(vQ,om({ref:t},n),v.createElement(U2,{isPanorama:!1},r))});function wQ(){var e=rn(),[t,r]=v.useState(null),n=dt(vB);return v.useEffect(()=>{if(t!=null){var s=t.getBoundingClientRect(),i=s.width/t.offsetWidth;tn(i)&&i!==n&&e(ZU(i))}},[t,e,n]),r}function W2(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function bQ(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?W2(Object(r),!0).forEach(function(n){jQ(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):W2(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function jQ(e,t,r){return(t=SQ(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function SQ(e){var t=kQ(e,"string");return typeof t=="symbol"?t:t+""}function kQ(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function hl(){return hl=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},hl.apply(null,arguments)}var _Q=()=>(gK(),null);function lm(e){if(typeof e=="number")return e;if(typeof e=="string"){var t=parseFloat(e);if(!Number.isNaN(t))return t}return 0}var NQ=v.forwardRef((e,t)=>{var r,n,s=v.useRef(null),[i,l]=v.useState({containerWidth:lm((r=e.style)===null||r===void 0?void 0:r.width),containerHeight:lm((n=e.style)===null||n===void 0?void 0:n.height)}),u=v.useCallback((m,f)=>{l(p=>{var y=Math.round(m),x=Math.round(f);return p.containerWidth===y&&p.containerHeight===x?p:{containerWidth:y,containerHeight:x}})},[]),d=v.useCallback(m=>{if(typeof t=="function"&&t(m),m!=null&&typeof ResizeObserver<"u"){var{width:f,height:p}=m.getBoundingClientRect();u(f,p);var y=w=>{var{width:b,height:S}=w[0].contentRect;u(b,S)},x=new ResizeObserver(y);x.observe(m),s.current=x}},[t,u]);return v.useEffect(()=>()=>{var m=s.current;m!=null&&m.disconnect()},[u]),v.createElement(v.Fragment,null,v.createElement(Mm,{width:i.containerWidth,height:i.containerHeight}),v.createElement("div",hl({ref:d},e)))}),CQ=v.forwardRef((e,t)=>{var{width:r,height:n}=e,[s,i]=v.useState({containerWidth:lm(r),containerHeight:lm(n)}),l=v.useCallback((d,m)=>{i(f=>{var p=Math.round(d),y=Math.round(m);return f.containerWidth===p&&f.containerHeight===y?f:{containerWidth:p,containerHeight:y}})},[]),u=v.useCallback(d=>{if(typeof t=="function"&&t(d),d!=null){var{width:m,height:f}=d.getBoundingClientRect();l(m,f)}},[t,l]);return v.createElement(v.Fragment,null,v.createElement(Mm,{width:s.containerWidth,height:s.containerHeight}),v.createElement("div",hl({ref:u},e)))}),EQ=v.forwardRef((e,t)=>{var{width:r,height:n}=e;return v.createElement(v.Fragment,null,v.createElement(Mm,{width:r,height:n}),v.createElement("div",hl({ref:t},e)))}),AQ=v.forwardRef((e,t)=>{var{width:r,height:n}=e;return Oa(r)||Oa(n)?v.createElement(CQ,hl({},e,{ref:t})):v.createElement(EQ,hl({},e,{ref:t}))});function PQ(e){return e===!0?NQ:AQ}var OQ=v.forwardRef((e,t)=>{var{children:r,className:n,height:s,onClick:i,onContextMenu:l,onDoubleClick:u,onMouseDown:d,onMouseEnter:m,onMouseLeave:f,onMouseMove:p,onMouseUp:y,onTouchEnd:x,onTouchMove:w,onTouchStart:b,style:S,width:_,responsive:E,dispatchTouchEvents:C=!0}=e,O=v.useRef(null),T=rn(),[P,F]=v.useState(null),[H,L]=v.useState(null),q=wQ(),z=Fx(),U=(z==null?void 0:z.width)>0?z.width:_,ne=(z==null?void 0:z.height)>0?z.height:s,ie=v.useCallback(W=>{q(W),typeof t=="function"&&t(W),F(W),L(W),W!=null&&(O.current=W)},[q,t,F,L]),oe=v.useCallback(W=>{T(sI(W)),T(hi({handler:i,reactEvent:W}))},[T,i]),V=v.useCallback(W=>{T(H0(W)),T(hi({handler:m,reactEvent:W}))},[T,m]),Z=v.useCallback(W=>{T(rT()),T(hi({handler:f,reactEvent:W}))},[T,f]),ee=v.useCallback(W=>{T(H0(W)),T(hi({handler:p,reactEvent:W}))},[T,p]),re=v.useCallback(()=>{T(uI())},[T]),me=v.useCallback(W=>{T(cI(W.key))},[T]),I=v.useCallback(W=>{T(hi({handler:l,reactEvent:W}))},[T,l]),M=v.useCallback(W=>{T(hi({handler:u,reactEvent:W}))},[T,u]),We=v.useCallback(W=>{T(hi({handler:d,reactEvent:W}))},[T,d]),te=v.useCallback(W=>{T(hi({handler:y,reactEvent:W}))},[T,y]),ve=v.useCallback(W=>{T(hi({handler:b,reactEvent:W}))},[T,b]),he=v.useCallback(W=>{C&&T(fI(W)),T(hi({handler:w,reactEvent:W}))},[T,C,w]),ye=v.useCallback(W=>{T(hi({handler:x,reactEvent:W}))},[T,x]),le=PQ(E);return v.createElement(kT.Provider,{value:P},v.createElement(lL.Provider,{value:H},v.createElement(le,{width:U??(S==null?void 0:S.width),height:ne??(S==null?void 0:S.height),className:Tr("recharts-wrapper",n),style:bQ({position:"relative",cursor:"default",width:U,height:ne},S),onClick:oe,onContextMenu:I,onDoubleClick:M,onFocus:re,onKeyDown:me,onMouseDown:We,onMouseEnter:V,onMouseLeave:Z,onMouseMove:ee,onMouseUp:te,onTouchEnd:ye,onTouchMove:he,onTouchStart:ve,ref:ie},v.createElement(_Q,null),r)))}),TQ=["width","height","responsive","children","className","style","compact","title","desc"];function IQ(e,t){if(e==null)return{};var r,n,s=DQ(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function DQ(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var RQ=v.forwardRef((e,t)=>{var{width:r,height:n,responsive:s,children:i,className:l,style:u,compact:d,title:m,desc:f}=e,p=IQ(e,TQ),y=vo(p);return d?v.createElement(v.Fragment,null,v.createElement(Mm,{width:r,height:n}),v.createElement(B2,{otherAttributes:y,title:m,desc:f},i)):v.createElement(OQ,{className:l,style:u,width:r,height:n,responsive:s??!1,onClick:e.onClick,onMouseLeave:e.onMouseLeave,onMouseEnter:e.onMouseEnter,onMouseMove:e.onMouseMove,onMouseDown:e.onMouseDown,onMouseUp:e.onMouseUp,onContextMenu:e.onContextMenu,onDoubleClick:e.onDoubleClick,onTouchStart:e.onTouchStart,onTouchMove:e.onTouchMove,onTouchEnd:e.onTouchEnd},v.createElement(B2,{otherAttributes:y,title:m,desc:f,ref:t},v.createElement(GJ,null,i)))});function K0(){return K0=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},K0.apply(null,arguments)}var $Q={top:5,right:5,bottom:5,left:5},MQ={accessibilityLayer:!0,layout:"horizontal",stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:$Q,reverseStackOrder:!1,syncMethod:"index",responsive:!1},FQ=v.forwardRef(function(t,r){var n,s=wi(t.categoricalChartProps,MQ),{chartName:i,defaultTooltipEventType:l,validateTooltipEventTypes:u,tooltipPayloadSearcher:d,categoricalChartProps:m}=t,f={chartName:i,defaultTooltipEventType:l,validateTooltipEventTypes:u,tooltipPayloadSearcher:d,eventEmitter:void 0};return v.createElement(dQ,{preloadedState:{options:f},reduxStoreName:(n=m.id)!==null&&n!==void 0?n:i},v.createElement(FJ,{chartData:m.data}),v.createElement(fQ,{layout:s.layout,margin:s.margin}),v.createElement(hQ,{baseValue:s.baseValue,accessibilityLayer:s.accessibilityLayer,barCategoryGap:s.barCategoryGap,maxBarSize:s.maxBarSize,stackOffset:s.stackOffset,barGap:s.barGap,barSize:s.barSize,syncId:s.syncId,syncMethod:s.syncMethod,className:s.className}),v.createElement(RQ,K0({},s,{ref:r})))}),LQ=["axis","item"],zQ=v.forwardRef((e,t)=>v.createElement(FQ,{chartName:"BarChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:LQ,tooltipPayloadSearcher:eK,categoricalChartProps:e,ref:t}));const mI=["Bug","Change Request","Data Correction","Epic","Feature","Group","Issue","Other","Spike","Task","Test Case","User Story"];function UQ(){const e=window.location.origin,t=window.location.pathname,r=t.includes("/admin")?t.substring(0,t.indexOf("/admin")):t.includes("/voter")?t.substring(0,t.indexOf("/voter")):t;return`${e}${r}/admin`}const ei={clientId:"a6283b6c-2210-4d6c-bade-651acfdb6703",tenantId:"3bb4e039-9a0f-4671-9733-a9ae03d39395",get redirectUri(){return UQ()},scopes:["https://app.vssps.visualstudio.com/user_impersonation","offline_access"]};function BQ(){const e=new Uint8Array(32);return crypto.getRandomValues(e),pI(e)}async function WQ(e){const r=new TextEncoder().encode(e),n=await crypto.subtle.digest("SHA-256",r);return pI(new Uint8Array(n))}function pI(e){return btoa(String.fromCharCode(...e)).replace(/\+/g,"-").replace(/\//g,"_").replace(/=/g,"")}async function VQ(e){const t=BQ(),r=await WQ(t);sessionStorage.setItem("pkce_verifier",t);const n=new URLSearchParams({client_id:ei.clientId,response_type:"code",redirect_uri:ei.redirectUri,response_mode:"query",scope:ei.scopes.join(" "),state:e,code_challenge:r,code_challenge_method:"S256"});return`https://login.microsoftonline.com/${ei.tenantId}/oauth2/v2.0/authorize?${n}`}async function qQ(e){const t=`https://login.microsoftonline.com/${ei.tenantId}/oauth2/v2.0/token`,r=sessionStorage.getItem("pkce_verifier");if(!r)throw new Error("Code verifier not found - PKCE flow incomplete");const n=new URLSearchParams({client_id:ei.clientId,scope:ei.scopes.join(" "),code:e,redirect_uri:ei.redirectUri,grant_type:"authorization_code",code_verifier:r}),s=await fetch(t,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:n.toString()});if(!s.ok){const l=await s.json();throw console.error("Token exchange error:",l),new Error(`Failed to exchange code for tokens: ${l.error_description||l.error}`)}const i=await s.json();return sessionStorage.removeItem("pkce_verifier"),{accessToken:i.access_token,refreshToken:i.refresh_token,expiresIn:i.expires_in}}async function HQ(e){const t=`https://login.microsoftonline.com/${ei.tenantId}/oauth2/v2.0/token`,r=new URLSearchParams({client_id:ei.clientId,scope:ei.scopes.join(" "),refresh_token:e,grant_type:"refresh_token"}),n=await fetch(t,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:r.toString()});if(!n.ok){const i=await n.json();throw console.error("Token refresh error:",i),new Error(`Failed to refresh access token: ${i.error_description||i.error}`)}const s=await n.json();return{accessToken:s.access_token,expiresIn:s.expires_in}}async function gI(e,t){if(!e.accessToken||!e.organization||!e.project)throw new Error("Missing required configuration");const r=t||e.workItemType;if(!r)throw new Error("Missing work item type for state fetch");const n=encodeURIComponent(r),s=`https://dev.azure.com/${e.organization}/${e.project}/_apis/wit/workitemtypes/${n}?api-version=7.1`,i=await fetch(s,{headers:{Authorization:`Bearer ${e.accessToken}`,"Content-Type":"application/json"}});if(!i.ok)throw new Error(`Failed to fetch states: ${i.statusText}`);const l=await i.json();return l.states&&Array.isArray(l.states)?l.states.map(u=>u.name):[]}async function V2(e){const t=new Set;for(const r of mI)try{(await gI({...e,workItemType:r},r)).forEach(s=>{s&&t.add(s)})}catch(n){console.warn(`Failed to fetch states for type ${r}:`,n)}return Array.from(t).sort((r,n)=>r.localeCompare(n))}async function G0(e){if(!e.accessToken||!e.organization||!e.project)throw new Error("Missing required configuration");const t=`https://dev.azure.com/${e.organization}/${e.project}/_apis/wit/classificationnodes/areas?$depth=10&api-version=7.1`,r=await fetch(t,{headers:{Authorization:`Bearer ${e.accessToken}`,"Content-Type":"application/json"}});if(!r.ok)throw new Error(`Failed to fetch area paths: ${r.statusText}`);const n=await r.json(),s=(i,l="")=>{const u=l?`${l}\\${i.name}`:i.name;let d=[u];return i.children&&i.children.length>0&&i.children.forEach(m=>{d=d.concat(s(m,u))}),d};return s(n)}async function KQ(e,t,r=[]){if(!e.accessToken||!e.organization||!e.project)throw new Error("Missing required configuration");if(!t)return G0(e);try{const n=[`[System.WorkItemType] = '${t}'`];if(r&&r.length>0)if(r.length===1)n.push(`[System.State] = '${r[0]}'`);else{const x=r.map(w=>`'${w}'`).join(", ");n.push(`[System.State] IN (${x})`)}const s=`SELECT [System.Id] FROM WorkItems WHERE ${n.join(" AND ")} ORDER BY [System.ChangedDate] DESC`,i=`https://dev.azure.com/${e.organization}/${e.project}/_apis/wit/wiql?api-version=7.1`,l=await fetch(i,{method:"POST",headers:{Authorization:`Bearer ${e.accessToken}`,"Content-Type":"application/json"},body:JSON.stringify({query:s})});if(!l.ok)return console.warn("Failed to fetch area paths by type/state, returning empty list"),[];const u=await l.json();if(!u.workItems||u.workItems.length===0)return[];const d=u.workItems.map(x=>x.id).slice(0,200);if(d.length===0)return[];const m=`https://dev.azure.com/${e.organization}/${e.project}/_apis/wit/workitems?ids=${d.join(",")}&fields=System.AreaPath&api-version=7.1`,f=await fetch(m,{headers:{Authorization:`Bearer ${e.accessToken}`,"Content-Type":"application/json"}});if(!f.ok)return console.warn("Failed to fetch work item area paths for filtered request"),[];const p=await f.json(),y=new Set;return p.value&&Array.isArray(p.value)&&p.value.forEach(x=>{var b;const w=(b=x.fields)==null?void 0:b["System.AreaPath"];w&&y.add(w)}),Array.from(y).sort()}catch(n){return console.error("Error fetching area paths for type/state:",n),[]}}async function GQ(e,t){if(!e.accessToken||!e.organization||!e.project)throw new Error("Missing required configuration");if(!t||t.length===0)return{types:[],areaPaths:[],tags:[]};try{const n=`SELECT [System.Id], [System.WorkItemType], [System.AreaPath] FROM WorkItems WHERE ${t.length===1?`[System.State] = '${t[0]}'`:`[System.State] IN (${t.map(w=>`'${w}'`).join(", ")})`} ORDER BY [System.ChangedDate] DESC`,s=`https://dev.azure.com/${e.organization}/${e.project}/_apis/wit/wiql?api-version=7.1`,i=await fetch(s,{method:"POST",headers:{Authorization:`Bearer ${e.accessToken}`,"Content-Type":"application/json"},body:JSON.stringify({query:n})});if(!i.ok)throw new Error(`Failed to fetch work items by state: ${i.statusText}`);const l=await i.json();if(!l.workItems||l.workItems.length===0)return{types:[],areaPaths:[],tags:[]};const u=l.workItems.map(w=>w.id).slice(0,200);if(u.length===0)return{types:[],areaPaths:[],tags:[]};const d=`https://dev.azure.com/${e.organization}/${e.project}/_apis/wit/workitems?ids=${u.join(",")}&fields=System.WorkItemType,System.AreaPath,System.Tags&api-version=7.1`,m=await fetch(d,{headers:{Authorization:`Bearer ${e.accessToken}`,"Content-Type":"application/json"}});if(!m.ok)return console.warn("Failed to fetch work item details for states filter"),{types:[],areaPaths:[],tags:[]};const f=await m.json(),p=new Set,y=new Set,x=new Set;return f.value&&Array.isArray(f.value)&&f.value.forEach(w=>{var E,C,O;const b=(E=w.fields)==null?void 0:E["System.WorkItemType"],S=(C=w.fields)==null?void 0:C["System.AreaPath"],_=(O=w.fields)==null?void 0:O["System.Tags"];b&&p.add(b),S&&y.add(S),_&&_.split(";").map(T=>T.trim()).forEach(T=>{T&&x.add(T)})}),{types:Array.from(p).sort((w,b)=>w.localeCompare(b)),areaPaths:Array.from(y).sort((w,b)=>w.localeCompare(b)),tags:Array.from(x).sort((w,b)=>w.localeCompare(b))}}catch(r){return console.error("Error fetching types and area paths for states:",r),{types:[],areaPaths:[],tags:[]}}}async function YQ(e){if(!e.accessToken||!e.organization)throw new Error("Missing required configuration");const t=`https://dev.azure.com/${e.organization}/_apis/projects?stateFilter=All&api-version=7.1`,r=await fetch(t,{headers:{Authorization:`Bearer ${e.accessToken}`,"Content-Type":"application/json"}});if(!r.ok)throw new Error(`Failed to fetch projects: ${r.statusText}`);const n=await r.json();return!(n!=null&&n.value)||!Array.isArray(n.value)?[]:n.value.map(s=>s==null?void 0:s.name).filter(s=>typeof s=="string"&&s.trim().length>0).map(s=>s.trim()).sort((s,i)=>s.localeCompare(i))}async function JQ(e,t){if(!e.accessToken||!e.organization||!e.project)throw new Error("Missing required configuration");try{const n=`SELECT [System.Id], [System.WorkItemType], [System.State] FROM WorkItems WHERE (${t.map(x=>`[System.AreaPath] UNDER '${x}'`).join(" OR ")}) ORDER BY [System.ChangedDate] DESC`,s=`https://dev.azure.com/${e.organization}/${e.project}/_apis/wit/wiql?api-version=7.1`,i=await fetch(s,{method:"POST",headers:{Authorization:`Bearer ${e.accessToken}`,"Content-Type":"application/json"},body:JSON.stringify({query:n})});if(!i.ok)throw new Error(`Failed to fetch work items: ${i.statusText}`);const l=await i.json();if(!l.workItems||l.workItems.length===0)return{types:[],states:[]};const u=l.workItems.map(x=>x.id).slice(0,200),d=`https://dev.azure.com/${e.organization}/${e.project}/_apis/wit/workitems?ids=${u.join(",")}&fields=System.WorkItemType,System.State&api-version=7.1`,m=await fetch(d,{headers:{Authorization:`Bearer ${e.accessToken}`,"Content-Type":"application/json"}});if(!m.ok)return console.warn("Failed to fetch work item details"),{types:[],states:[]};const f=await m.json(),p=new Set,y=new Set;return f.value&&Array.isArray(f.value)&&f.value.forEach(x=>{x.fields&&(x.fields["System.WorkItemType"]&&p.add(x.fields["System.WorkItemType"]),x.fields["System.State"]&&y.add(x.fields["System.State"]))}),{types:Array.from(p).sort(),states:Array.from(y).sort()}}catch(r){return console.error("Error fetching types and states for area path:",r),{types:[],states:[]}}}async function XQ(e,t){if(!e.accessToken||!e.organization||!e.project)throw new Error("Missing required configuration");try{const n=`SELECT [System.Id], [System.WorkItemType], [System.State] FROM WorkItems WHERE (${t.map(w=>`[System.Tags] CONTAINS '${w}'`).join(" OR ")}) ORDER BY [System.ChangedDate] DESC`,s=`https://dev.azure.com/${e.organization}/${e.project}/_apis/wit/wiql?api-version=7.1`,i=await fetch(s,{method:"POST",headers:{Authorization:`Bearer ${e.accessToken}`,"Content-Type":"application/json"},body:JSON.stringify({query:n})});if(!i.ok)throw new Error(`Failed to fetch work items: ${i.statusText}`);const l=await i.json();if(!l.workItems||l.workItems.length===0)return{types:[],states:[],areaPaths:[]};const u=l.workItems.map(w=>w.id).slice(0,200),d=`https://dev.azure.com/${e.organization}/${e.project}/_apis/wit/workitems?ids=${u.join(",")}&fields=System.WorkItemType,System.State,System.AreaPath&api-version=7.1`,m=await fetch(d,{headers:{Authorization:`Bearer ${e.accessToken}`,"Content-Type":"application/json"}});if(!m.ok)return console.warn("Failed to fetch work item details"),{types:[],states:[],areaPaths:[]};const f=await m.json(),p=new Set,y=new Set,x=new Set;return f.value&&Array.isArray(f.value)&&f.value.forEach(w=>{w.fields&&(w.fields["System.WorkItemType"]&&p.add(w.fields["System.WorkItemType"]),w.fields["System.State"]&&y.add(w.fields["System.State"]),w.fields["System.AreaPath"]&&x.add(w.fields["System.AreaPath"]))}),{types:Array.from(p).sort(),states:Array.from(y).sort(),areaPaths:Array.from(x).sort()}}catch(r){return console.error("Error fetching types and states for tags:",r),{types:[],states:[],areaPaths:[]}}}async function QQ(e,t,r,n){if(!e.accessToken||!e.organization||!e.project)throw new Error("Missing required configuration");try{const s=[];if(s.push(`[System.WorkItemType] = '${t}'`),r&&r.length>0)if(r.length===1)s.push(`[System.State] = '${r[0]}'`);else{const w=r.map(b=>`'${b}'`).join(", ");s.push(`[System.State] IN (${w})`)}if(n&&n.length>0)if(n.length===1)s.push(`[System.AreaPath] UNDER '${n[0]}'`);else{const w=n.map(b=>`[System.AreaPath] UNDER '${b}'`);s.push(`(${w.join(" OR ")})`)}const i=`SELECT [System.Id] FROM WorkItems WHERE ${s.join(" AND ")} ORDER BY [System.ChangedDate] DESC`,l=`https://dev.azure.com/${e.organization}/${e.project}/_apis/wit/wiql?api-version=7.1`,u=await fetch(l,{method:"POST",headers:{Authorization:`Bearer ${e.accessToken}`,"Content-Type":"application/json"},body:JSON.stringify({query:i})});if(!u.ok)return console.warn("Failed to fetch tags, returning empty array"),[];const d=await u.json();if(!d.workItems||d.workItems.length===0)return[];const m=d.workItems.map(w=>w.id).slice(0,200),f=`https://dev.azure.com/${e.organization}/${e.project}/_apis/wit/workitems?ids=${m.join(",")}&fields=System.Tags&api-version=7.1`,p=await fetch(f,{headers:{Authorization:`Bearer ${e.accessToken}`,"Content-Type":"application/json"}});if(!p.ok)return console.warn("Failed to fetch work item details for tags"),[];const y=await p.json(),x=new Set;return y.value&&Array.isArray(y.value)&&y.value.forEach(w=>{w.fields&&w.fields["System.Tags"]&&w.fields["System.Tags"].split(";").map(S=>S.trim()).forEach(S=>{S&&x.add(S)})}),Array.from(x).sort()}catch(s){return console.warn("Error fetching tags, returning empty array:",s),[]}}async function q2(e){if(!e.accessToken||!e.organization||!e.project)throw new Error("Missing required configuration");const t=new Set;try{const r=[];let n=null;do{let s=`https://dev.azure.com/${e.organization}/${e.project}/_apis/wit/tags?api-version=7.1`;n&&(s+=`&continuationToken=${encodeURIComponent(n)}`);const i=await fetch(s,{headers:{Authorization:`Bearer ${e.accessToken}`,"Content-Type":"application/json"}});if(!i.ok){console.warn("Failed to fetch tags page, aborting remaining pages");break}const l=await i.json();l.value&&Array.isArray(l.value)&&l.value.forEach(u=>{u&&u.name&&r.push(u.name)}),n=i.headers.get("x-ms-continuationtoken")}while(n);r.forEach(s=>t.add(s))}catch(r){console.warn("Error fetching tags, returning empty array:",r)}try{(await ZQ(e)).forEach(n=>t.add(n))}catch(r){console.warn("Error fetching tags via WIQL fallback:",r)}return Array.from(t).sort((r,n)=>r.localeCompare(n))}async function ZQ(e){const t={query:"SELECT [System.Id] FROM WorkItems WHERE [System.TeamProject] = @project ORDER BY [System.ChangedDate] DESC"},r=`https://dev.azure.com/${e.organization}/${e.project}/_apis/wit/wiql?api-version=7.1`,n=await fetch(r,{method:"POST",headers:{Authorization:`Bearer ${e.accessToken}`,"Content-Type":"application/json"},body:JSON.stringify(t)});if(!n.ok)throw new Error(`Failed to fetch tags via WIQL: ${n.status}`);const s=await n.json();if(!s.workItems||s.workItems.length===0)return[];const i=s.workItems.map(f=>f.id).slice(0,200);if(i.length===0)return[];const l=`https://dev.azure.com/${e.organization}/${e.project}/_apis/wit/workitems?ids=${i.join(",")}&fields=System.Tags&api-version=7.1`,u=await fetch(l,{headers:{Authorization:`Bearer ${e.accessToken}`,"Content-Type":"application/json"}});if(!u.ok)throw new Error(`Failed to fetch work item details for tags via WIQL fallback: ${u.status}`);const d=await u.json(),m=new Set;return d.value&&Array.isArray(d.value)&&d.value.forEach(f=>{f.fields&&f.fields["System.Tags"]&&f.fields["System.Tags"].split(";").map(y=>y.trim()).forEach(y=>{y&&m.add(y)})}),Array.from(m)}function eZ(e){const t=new Date(e).getTime(),r=Date.now(),n=300*1e3;return t-r<n}async function tZ(){const e=new URLSearchParams(window.location.search),t=e.get("code"),r=e.get("state");if(!t)return null;const n=sessionStorage.getItem("oauth_state");if(r!==n)throw new Error("State mismatch - possible CSRF attack");const s=await qQ(t);return sessionStorage.removeItem("oauth_state"),s}async function rZ(){const e=Math.random().toString(36).substring(7);sessionStorage.setItem("oauth_state",e);const t=sessionStorage.getItem("currentSession");t&&sessionStorage.setItem("oauth_session_backup",t);const r=await VQ(e);window.location.href=r}async function H2(e){const{organization:t,project:r,workItemType:n,query:s,accessToken:i}=e;if(!i)throw new Error("Not authenticated with Azure DevOps");try{let l;s?l=`SELECT [System.Id] FROM WorkItems WHERE ${s}`:l=`SELECT [System.Id] FROM WorkItems WHERE [System.WorkItemType] = '${n}' AND [System.State] = 'Active'`;const u=`https://dev.azure.com/${t}/${r}/_apis/wit/wiql?api-version=7.0`,d=await fetch(u,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${i}`},body:JSON.stringify({query:l})});if(!d.ok)throw new Error(`Azure DevOps query failed: ${d.status} ${d.statusText}`);const f=(await d.json()).workItems.map(C=>C.id);if(f.length===0)return[];const p=["System.Id","System.Title","System.Description","System.Tags","System.WorkItemType","System.State","Microsoft.VSTS.Common.Priority","System.AreaPath","System.IterationPath"].join(","),y=200,x=[];for(let C=0;C<f.length;C+=y){const T=f.slice(C,C+y).join(","),P=`https://dev.azure.com/${t}/${r}/_apis/wit/workitems?ids=${T}&fields=${p}&api-version=7.0`,F=await fetch(P,{headers:{Authorization:`Bearer ${i}`}});if(!F.ok)throw new Error(`Failed to fetch work items: ${F.status} ${F.statusText}`);const H=await F.json();H.value&&Array.isArray(H.value)&&x.push(...H.value)}if(x.length===0)return[];const w=new Map,b=new Map,S=new Map,_=10;for(let C=0;C<x.length;C+=_){const O=x.slice(C,C+_);await Promise.all(O.map(async T=>{try{const P=`https://dev.azure.com/${t}/${r}/_apis/wit/workitems/${T.id}?$expand=relations&api-version=7.0`,F=await fetch(P,{headers:{Authorization:`Bearer ${i}`}});if(F.ok){const H=await F.json();if(H.relations){for(const L of H.relations)if(L.rel==="System.LinkTypes.Hierarchy-Forward"){const q=L.url.match(/\/work[iI]tems\/(\d+)(?:\?|$|\/)/i);if(q){const z=parseInt(q[1],10);w.set(T.id,z),console.log(`Work item ${T.id} has parent ${z}`)}}}}}catch(P){console.error(`Error fetching relations for work item ${T.id}:`,P)}}))}const E=Array.from(new Set(w.values()));if(E.length>0){const C=E.slice(0,200).join(","),O=["System.Id","System.Title","System.WorkItemType"].join(","),T=`https://dev.azure.com/${t}/${r}/_apis/wit/workitems?ids=${C}&fields=${O}&api-version=7.0`;try{const P=await fetch(T,{headers:{Authorization:`Bearer ${i}`}});if(P.ok){const F=await P.json();for(const H of F.value)S.set(H.id,H.fields["System.Title"]||""),H.fields["System.WorkItemType"]==="Epic"&&(b.set(H.id,H.fields["System.Title"]||""),console.log(`Found Epic ${H.id}: ${H.fields["System.Title"]}`))}}catch(P){console.error("Error fetching parent work items:",P)}}return x.map(C=>{let O=null;const T=w.get(C.id);if(T)if(O=b.get(T)||null,O)console.log(`Work item ${C.id} has Epic from parent ${T}: ${O}`);else{const P=S.get(T);console.log(`Work item ${C.id} has parent ${T} (${P}) but it's not an Epic type`)}if(!O&&C.fields){const F=["System.Epic","Epic","Microsoft.VSTS.Common.Epic","Custom.Epic","EpicLink","EpicName",...Object.keys(C.fields).filter(H=>H.toLowerCase().includes("epic")&&!["System.Epic","Epic","Microsoft.VSTS.Common.Epic","Custom.Epic","EpicLink","EpicName"].includes(H))];for(const H of F){const L=C.fields[H];if(L!=null){if(typeof L=="string"&&L.trim()!==""){const q=parseInt(L.trim());if(!isNaN(q)&&q>0){if(O=b.get(q)||null,O){console.log(`Work item ${C.id} has Epic ID ${q} from field ${H}: ${O}`);break}}else{O=L.trim(),console.log(`Work item ${C.id} has Epic name from field ${H}: ${O}`);break}}else if(typeof L=="number"&&(O=b.get(L)||null,O)){console.log(`Work item ${C.id} has Epic ID ${L} from field ${H}: ${O}`);break}}}}return O||console.log(`Work item ${C.id} (${C.fields["System.Title"]}) has no Epic found`),{id:C.id,fields:{"System.Title":C.fields["System.Title"],"System.Description":C.fields["System.Description"],"System.Tags":C.fields["System.Tags"],"System.WorkItemType":C.fields["System.WorkItemType"],"System.State":C.fields["System.State"],"Microsoft.VSTS.Common.Priority":C.fields["Microsoft.VSTS.Common.Priority"],"System.AreaPath":C.fields["System.AreaPath"],"System.IterationPath":C.fields["System.IterationPath"],Epic:O||void 0},url:`https://dev.azure.com/${t}/${r}/_workitems/edit/${C.id}`}})}catch(l){throw console.error("Error fetching from Azure DevOps:",l),l}}function K2(e){return e.map(t=>{let r;const n=t.fields.Epic,s=t.fields["System.WorkItemType"];if(n&&typeof n=="string"&&n.trim()!==""){const d=n.trim();d!==s&&d!=="Epic"&&d.toLowerCase()!=="epic"?(r=d,console.log(`Work item ${t.id} converted - Epic: "${r}"`)):console.warn(`Work item ${t.id} has epic field "${d}" which matches work item type "${s}" - ignoring`)}!r&&s!=="Epic"&&console.log(`Work item ${t.id} (${t.fields["System.Title"]}) has no Epic assigned`);const l=(t.fields["System.Description"]||"").replace(/<[^>]*>/g,"").trim(),u=t.fields["System.Title"]||"Untitled";return r&&u===r&&console.warn(`Work item ${t.id}: Title "${u}" matches Epic name "${r}" - this may indicate a data issue`),{id:`ado-${t.id}`,title:u,description:l,votes:0,voters:[],epic:r||void 0,state:t.fields["System.State"]||void 0,areaPath:t.fields["System.AreaPath"]||void 0,tags:t.fields["System.Tags"]?t.fields["System.Tags"].split(";").map(d=>d.trim()).filter(d=>d):[],azureDevOpsId:t.id.toString(),azureDevOpsUrl:t.url,workItemType:s||void 0}})}function G2(){return"Product".split(",").map(t=>t.trim()).filter(t=>t.length>0)}const Qi=e=>{const r=e.split("T")[0].split(" ")[0].split("-");if(r.length!==3)return new Date(e).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"});const n=parseInt(r[0],10),s=parseInt(r[1],10)-1,i=parseInt(r[2],10);return new Date(n,s,i).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})},mi=e=>new Date(e)<new Date,Y2=[{bg:"#2D4660",text:"#FFFFFF",border:"#1D3144"},{bg:"#1E5461",text:"#FFFFFF",border:"#133742"},{bg:"#C89212",text:"#FFFFFF",border:"#A67810"},{bg:"#173B65",text:"#FFFFFF",border:"#0F2844"},{bg:"#2E5A8F",text:"#FFFFFF",border:"#1F4468"},{bg:"#4A6A8F",text:"#FFFFFF",border:"#3D5A7D"},{bg:"#5479A1",text:"#FFFFFF",border:"#4A6A8F"},{bg:"#6B8FBF",text:"#FFFFFF",border:"#5479A1"},{bg:"#3D7BAD",text:"#FFFFFF",border:"#2E5A8F"},{bg:"#258799",text:"#FFFFFF",border:"#145668"},{bg:"#36849B",text:"#FFFFFF",border:"#2A7489"},{bg:"#4098B3",text:"#FFFFFF",border:"#36849B"},{bg:"#2B9BAD",text:"#FFFFFF",border:"#1E7A89"},{bg:"#1FA3B5",text:"#FFFFFF",border:"#178290"},{bg:"#2D7A4E",text:"#FFFFFF",border:"#1E5A38"},{bg:"#3A9B5C",text:"#FFFFFF",border:"#2D7A4E"},{bg:"#52B876",text:"#FFFFFF",border:"#3A9B5C"},{bg:"#6FD492",text:"#FFFFFF",border:"#52B876"},{bg:"#4CAF7A",text:"#FFFFFF",border:"#3A9B5C"},{bg:"#7CB342",text:"#FFFFFF",border:"#689F38"},{bg:"#9CCC65",text:"#111827",border:"#7CB342"},{bg:"#E0A925",text:"#111827",border:"#C89212"},{bg:"#F4B729",text:"#111827",border:"#E0A925"},{bg:"#FFC940",text:"#111827",border:"#F4B729"},{bg:"#D4A017",text:"#FFFFFF",border:"#B8890F"},{bg:"#D87A35",text:"#FFFFFF",border:"#C4681F"},{bg:"#E88F3A",text:"#FFFFFF",border:"#D87A35"},{bg:"#FF9F4A",text:"#FFFFFF",border:"#E88F3A"},{bg:"#FF8C42",text:"#FFFFFF",border:"#E88F3A"},{bg:"#B83A2F",text:"#FFFFFF",border:"#9F2A21"},{bg:"#D44638",text:"#FFFFFF",border:"#B83A2F"},{bg:"#E85240",text:"#FFFFFF",border:"#D44638"},{bg:"#591D0F",text:"#FFFFFF",border:"#3C130A"},{bg:"#8A3420",text:"#FFFFFF",border:"#6F2818"},{bg:"#6B4C9A",text:"#FFFFFF",border:"#573A7F"},{bg:"#8E6BB5",text:"#FFFFFF",border:"#7556A1"},{bg:"#9B7AC7",text:"#FFFFFF",border:"#8E6BB5"},{bg:"#5D3F7A",text:"#FFFFFF",border:"#4A2F61"},{bg:"#492434",text:"#FFFFFF",border:"#311823"},{bg:"#5D2F43",text:"#FFFFFF",border:"#492434"},{bg:"#8B3A62",text:"#FFFFFF",border:"#6F2A4D"},{bg:"#A14A76",text:"#FFFFFF",border:"#8B3A62"},{bg:"#6A4234",text:"#FFFFFF",border:"#4B2D23"},{bg:"#8B5A3C",text:"#FFFFFF",border:"#6A4234"},{bg:"#A0694B",text:"#FFFFFF",border:"#8B5A3C"},{bg:"#7D5A3A",text:"#FFFFFF",border:"#6A4234"},{bg:"#3A3638",text:"#FFFFFF",border:"#2A2628"},{bg:"#4A4548",text:"#FFFFFF",border:"#3A3638"},{bg:"#5C5A5D",text:"#FFFFFF",border:"#4A4548"},{bg:"#7A8590",text:"#FFFFFF",border:"#5F6A74"},{bg:"#8F959B",text:"#111827",border:"#72777C"}],nZ=e=>e?e.trim().toLowerCase():"",sZ=e=>{let t=0;for(let r=0;r<e.length;r+=1)t=t*31+e.charCodeAt(r)>>>0;return t},ah=(e,t,r)=>Math.min(Math.max(e,t),r),iZ=e=>{if(!e)return null;let t=e.trim();return!t||(t.startsWith("#")||(t=`#${t}`),t.length===4&&(t=`#${t[1]}${t[1]}${t[2]}${t[2]}${t[3]}${t[3]}`),t.length!==7)?null:t.toUpperCase()},Kw=e=>{const t=e.replace("#",""),r=parseInt(t,16);return{r:r>>16&255,g:r>>8&255,b:r&255}},aZ=({r:e,g:t,b:r})=>{const n=[e,t,r].map(s=>{const i=s/255;return i<=.03928?i/12.92:Math.pow((i+.055)/1.055,2.4)});return .2126*n[0]+.7152*n[1]+.0722*n[2]},oZ=e=>aZ(Kw(e))>.6?"#111827":"#FFFFFF",J2=(e,t)=>{const{r,g:n,b:s}=Kw(e),i=1+t/100,l=ah(Math.round(r*i),0,255),u=ah(Math.round(n*i),0,255),d=ah(Math.round(s*i),0,255);return`#${l.toString(16).padStart(2,"0")}${u.toString(16).padStart(2,"0")}${d.toString(16).padStart(2,"0")}`.toUpperCase()},lZ=(e,t)=>{const{r,g:n,b:s}=Kw(e);return`rgba(${r}, ${n}, ${s}, ${ah(t,0,1)})`},cs=(e,t)=>{const r=iZ(t);if(r){const l=oZ(r);return{background:r,text:l,border:J2(r,-20),badgeBackground:lZ(r,.15),badgeText:l,hoverBackground:J2(r,-5),hoverText:l}}const n=nZ(e),s=n?sZ(n)%Y2.length:0,i=Y2[s];return{background:i.bg,text:i.text,border:i.border,badgeBackground:`${i.bg}1A`,badgeText:i.text,hoverBackground:i.bg,hoverText:i.text}};function yI({label:e="Product",products:t,value:r,onChange:n,fallbackName:s=null,isLoading:i=!1,error:l=null,disabled:u=!1,placeholder:d="Select a product",helperText:m,className:f="",allowAdd:p=!1,newProductName:y="",onNewProductNameChange:x,newProductColor:w,onNewProductColorChange:b,onCreateProduct:S,isCreatingProduct:_=!1,addHelperText:E,addButtonLabel:C="Add Product",addInputPlaceholder:O="e.g., Catalyst Cloud",allowDelete:T=!1,onRequestDeleteProduct:P}){const[F,H]=v.useState(!1),L=v.useRef(null),q=v.useRef(null),[z,U]=v.useState(!1),[ne,ie]=v.useState(!1),oe=v.useMemo(()=>t.find(he=>he.id===r)??null,[t,r]),V=(oe==null?void 0:oe.name)??s??"",Z=V?cs(V,(oe==null?void 0:oe.color_hex)??null):null,ee=u||i||t.length===0;v.useEffect(()=>{if(!F)return;function he(le){L.current&&!L.current.contains(le.target)&&H(!1)}function ye(le){le.key==="Escape"&&H(!1)}return document.addEventListener("mousedown",he),document.addEventListener("keydown",ye),()=>{document.removeEventListener("mousedown",he),document.removeEventListener("keydown",ye)}},[F]);const re=he=>{n(he),H(!1)},me=!!(p&&x&&S),I=me&&z,M=!!b,We=w??"#2D4660",te=!!(e&&e.trim().length>0),ve=te||me;return a.jsxs("div",{className:`space-y-3 ${f}`,children:[a.jsx("style",{children:`
        .product-picker__menu {
          box-shadow: 0px 12px 28px rgba(45, 70, 96, 0.18);
          width: 100%;
          background-color: #ffffff;
          overflow: hidden;
        }

        .product-picker__item {
          display: flex;
          width: 100%;
          align-items: center;
          justify-content: flex-start;
          gap: 0.75rem;
          padding: 0.65rem 0.75rem;
          font-size: 0.875rem;
          background: #ffffff;
          border: none;
          border-top: 1px solid rgba(203, 213, 225, 0.4);
          cursor: pointer;
          color: var(--product-color, #2D4660);
          transition: color 0.3s ease;
          text-align: left;
        }

        .product-picker__item:first-child {
          border-top: none;
        }

        .product-picker__item:hover,
        .product-picker__item:focus-visible {
          background-color: var(--product-light-bg, rgba(45, 70, 96, 0.1));
          outline: none;
        }

        .product-color-badge {
          width: 1.5rem;
          height: 1.5rem;
          border-radius: 0.35rem;
          flex-shrink: 0;
          background-color: var(--product-color, #2D4660);
          border: 1px solid var(--product-border-color, rgba(0,0,0,0.12));
          box-shadow: inset 0 0 0 1px rgba(255,255,255,0.35);
        }
      `}),a.jsxs("div",{className:"relative",ref:L,children:[ve&&a.jsxs("div",{className:"flex items-center justify-between mb-1 gap-3",children:[te&&a.jsx("label",{className:"block text-sm font-medium text-gray-700",children:e}),me&&a.jsx("div",{className:"flex-1 flex items-center justify-end gap-2",children:I?a.jsxs("div",{className:"flex items-center gap-2 transition-all duration-300",children:[a.jsx("input",{type:"text",value:y,onChange:he=>{ie(!1),x==null||x(he.target.value)},placeholder:"Product name",className:"flex-1 h-10 px-3 border rounded-md text-sm focus:outline-none focus:ring-0",style:{borderColor:w&&y.trim().length>0?w:"#D1D5DB"}}),M&&y.trim().length>0&&a.jsxs(a.Fragment,{children:[a.jsx("button",{type:"button",onClick:()=>{var he;return(he=q.current)==null?void 0:he.click()},className:`relative h-10 w-10 rounded-md border shadow-sm flex items-center justify-center focus:outline-none focus:ring-2 focus:ring-offset-1 focus:ring-[#2d4660] ${w?"":"border-gray-300 bg-white"}`,style:w?{backgroundColor:w,borderColor:w}:void 0,"aria-label":"Choose product color",children:!w&&a.jsx("img",{src:"https://icon-library.com/images/color-wheel-icon-png/color-wheel-icon-png-25.jpg",alt:"",className:"h-7 w-7 object-contain pointer-events-none"})}),a.jsx("input",{ref:q,type:"color",value:We,onChange:he=>{ie(!1),b==null||b(he.target.value)},className:"sr-only"}),y.trim().length>0&&a.jsx("button",{type:"button",onClick:()=>ie(!0),className:`h-10 px-3 rounded-md text-sm font-medium border transition-colors ${ne?"bg-green-50 border-green-500 text-green-700":"bg-white border-gray-300 text-gray-700 hover:bg-gray-50"}`,children:"Looks Great"})]}),y.trim().length>0&&w&&ne&&a.jsx("button",{type:"button",onClick:S,className:"h-10 px-4 bg-[#C89212] text-white rounded-md text-sm font-semibold hover:bg-[#A67810] transition-colors",children:_?"Creating":"Create New Product"})]}):a.jsx("button",{type:"button",onClick:()=>U(!0),className:"text-sm font-medium text-blue-600 hover:text-blue-700 whitespace-nowrap",children:"+ Create New Product"})})]}),a.jsxs("button",{type:"button",onClick:()=>!ee&&H(he=>!he),className:`relative flex w-full items-center justify-between rounded-md border px-3 py-2 text-left text-sm ${ee?"cursor-not-allowed bg-gray-100 text-gray-400 border-gray-200":"bg-white text-gray-900 border-gray-300 hover:border-[#2D4660]"}`,style:!ee&&Z?{borderColor:Z.border}:void 0,"aria-expanded":F,"aria-haspopup":"listbox",children:[a.jsxs("div",{className:"flex items-center gap-2 truncate",children:[Z&&a.jsx("span",{className:"inline-flex h-3.5 w-3.5 rounded-sm border border-white/60 shadow-inner",style:{backgroundColor:Z.background,borderColor:Z.border},"aria-hidden":"true"}),a.jsx("span",{className:`truncate ${V?"":"text-gray-400"}`,style:Z?{color:Z.background}:void 0,children:V||(t.length===0?"No products available":d)})]}),a.jsx(ls,{className:`ml-2 h-4 w-4 transition-transform ${F?"rotate-180":""} ${ee?"text-gray-300":"text-gray-500"}`})]}),F&&!ee&&a.jsx("div",{className:"product-picker__menu absolute left-0 z-50 mt-2 w-full overflow-hidden rounded-md border border-gray-200 bg-white",role:"listbox",children:a.jsx("div",{className:"max-h-60 overflow-y-auto py-1",children:t.map(he=>{const ye=cs(he.name,he.color_hex??null),le=r===he.id;return a.jsxs("div",{className:"product-picker__item",style:{"--product-color":ye.background,"--product-light-bg":ye.badgeBackground,"--product-border-color":ye.border},children:[a.jsxs("button",{type:"button",className:"flex flex-1 items-center gap-3 text-left",onClick:()=>re(he.id),"aria-selected":le,children:[a.jsx("span",{className:"product-color-badge","aria-hidden":"true"}),a.jsx("span",{className:"flex-1 truncate font-medium",children:he.name}),le&&a.jsx(Yr,{className:"h-4 w-4 text-gray-400"})]}),T&&P&&a.jsx("button",{type:"button",onClick:W=>{W.stopPropagation(),H(!1),P(he)},className:"ml-2 text-gray-400 hover:text-[#B83A2F]","aria-label":`Delete ${he.name}`,title:"Delete product",children:a.jsx(Li,{className:"h-4 w-4"})})]},he.id)})})}),i&&a.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"Loading products"}),l&&a.jsx("p",{className:"mt-1 text-xs text-[#591D0F]",children:l}),!i&&!l&&m&&a.jsx("p",{className:"mt-1 text-xs text-gray-500",children:m})]}),me&&E&&I&&a.jsx("p",{className:"text-xs text-gray-500",children:E})]})}const X2=["OpsVision Portal","MillTrack Insight","Quality Compass","Supply Sync","Roadmap Nexus","Fabricator Hub","Blueprint Studio","Velocity Forge","Navigator Suite","Catalyst Cloud"],Q2=e=>{if(!e)return null;const t=e.trim();return t.length===0?null:t},cZ=e=>{let t=0;for(let r=0;r<e.length;r+=1)t=t*31+e.charCodeAt(r)>>>0;return X2[t%X2.length]};function $n(e,t){const r=e.product_id??e.productId??null;if(r&&t){const i=Q2(t[r]);if(i)return i}const n=Q2(e.product_name??e.productName);if(n)return n;const s=r||e.id||e.title||"default-product";return cZ(s)}const uZ=["Stakeholders need more time","New backlog items require votes","Clarify previous results","Technical issue resolved","Other"],Z2="https://cdn.iconscout.com/icon/free/png-512/azure-devops-3628645-3029870.png";function eC({options:e,value:t,onChange:r,placeholder:n="Select...",label:s,disabled:i=!1,variant:l="default"}){const[u,d]=v.useState(!1),m=v.useRef(null);v.useEffect(()=>{function S(_){m.current&&!m.current.contains(_.target)&&d(!1)}return document.addEventListener("mousedown",S),()=>document.removeEventListener("mousedown",S)},[]);const f=S=>{r(S),d(!1)},p=t||n,y=l==="green"?"border-green-600":"border-gray-300",x=l==="green"?"text-green-600":"text-gray-400",w=l==="green"?"bg-green-50":"bg-blue-50",b=l==="green"?"text-green-600":"text-[#1E5461]";return a.jsxs("div",{ref:m,className:"relative",children:[s&&a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:s}),a.jsxs("div",{onClick:()=>!i&&d(!u),className:`w-full px-3 py-2 border ${y} rounded-md min-h-[38px] flex items-center justify-between ${i?"bg-gray-100 cursor-not-allowed":"bg-white cursor-pointer"}`,children:[a.jsx("span",{className:`text-sm ${t?"text-gray-900":"text-gray-400"}`,children:p}),a.jsx(ls,{className:`h-4 w-4 ${x} transition-transform ${u?"transform rotate-180":""}`})]}),u&&!i&&a.jsx("div",{className:"absolute z-50 w-full mt-1 bg-white border border-gray-300 rounded-md shadow-lg max-h-60 overflow-y-auto",children:e.map(S=>a.jsxs("div",{onClick:()=>f(S),className:`px-3 py-2 cursor-pointer hover:bg-gray-50 flex items-center justify-between ${t===S?w:""}`,children:[a.jsx("span",{className:"text-sm text-gray-900",children:S}),t===S&&a.jsx(Yr,{className:`h-4 w-4 ${b}`})]},S))})]})}function Yf({options:e,value:t,onChange:r,placeholder:n="Select...",label:s,searchable:i=!1,disabled:l=!1}){const[u,d]=v.useState(!1),[m,f]=v.useState(""),p=v.useRef(null),y=v.useRef(null);v.useEffect(()=>{function _(E){p.current&&!p.current.contains(E.target)&&(d(!1),f(""))}return document.addEventListener("mousedown",_),()=>document.removeEventListener("mousedown",_)},[]),v.useEffect(()=>{u&&i&&y.current&&y.current.focus()},[u,i]);const x=_=>{t.includes(_)?r(t.filter(E=>E!==_)):r([...t,_])},w=(_,E)=>{E.stopPropagation(),r(t.filter(C=>C!==_))},b=_=>{_.stopPropagation(),r([])},S=i&&m?e.filter(_=>_.toLowerCase().includes(m.toLowerCase())):e;return a.jsxs("div",{ref:p,className:"relative",children:[s&&a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:s}),a.jsxs("div",{onClick:()=>!l&&d(!u),className:`w-full px-3 py-2 border border-gray-300 rounded-md min-h-[38px] flex items-center justify-between ${l?"bg-gray-100 cursor-not-allowed":"bg-white cursor-pointer"}`,children:[a.jsx("div",{className:"flex-1 flex flex-wrap gap-1",children:t.length===0?a.jsx("span",{className:"text-sm text-gray-400",children:n}):t.map(_=>a.jsxs("span",{className:"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-[#2D4660]/10 text-[#2D4660]",children:[_,!l&&a.jsx("button",{type:"button",onClick:E=>w(_,E),className:"ml-1 hover:text-[#173B65]",children:a.jsx(Js,{className:"h-3 w-3"})})]},_))}),a.jsxs("div",{className:"flex items-center gap-1 ml-2",children:[t.length>0&&!l&&a.jsx("button",{type:"button",onClick:b,className:"text-gray-400 hover:text-gray-600",children:a.jsx(Js,{className:"h-4 w-4"})}),a.jsx(ls,{className:`h-4 w-4 text-gray-400 transition-transform ${u?"transform rotate-180":""}`})]})]}),u&&!l&&a.jsxs("div",{className:"absolute z-50 w-full mt-1 bg-white border border-gray-300 rounded-md shadow-lg max-h-60 overflow-hidden flex flex-col",children:[i&&a.jsx("div",{className:"p-2 border-b border-gray-200",children:a.jsx("input",{ref:y,type:"text",value:m,onChange:_=>f(_.target.value),onClick:_=>_.stopPropagation(),placeholder:"Type to search...",className:"w-full px-3 py-1.5 text-sm border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[#2D4660]"})}),a.jsx("div",{className:"overflow-y-auto",children:S.length>0?S.map(_=>a.jsxs("div",{onClick:()=>x(_),className:`px-3 py-2 cursor-pointer hover:bg-gray-50 flex items-center justify-between ${t.includes(_)?"bg-[#2D4660]/5":""}`,children:[a.jsx("span",{className:"text-sm",children:_}),t.includes(_)&&a.jsx(Yr,{className:"h-4 w-4 text-[#1E5461]"})]},_)):a.jsx("div",{className:"px-3 py-2 text-sm text-gray-500 text-center",children:"No matches found"})})]})]})}function dZ({config:e,onUpdateConfig:t,onPreview:r,isFetching:n,availableStates:s,availableAreaPaths:i,availableTags:l,previewFeatures:u,showPreviewModal:d,onFetchStatesForType:m,onFetchAreaPathsForTypeAndState:f,onFetchTagsForTypeStateAndAreaPath:p,onFetchTypesAndStatesForAreaPath:y,onFetchTypesAndStatesForTags:x,onFetchTypesAndAreaPathsForStates:w,resetSignal:b}){const S=mI,[_,E]=v.useState(!1),[C,O]=v.useState(null),[T,P]=v.useState(!1),[F,H]=v.useState(!1),[L,q]=v.useState(!1),z=v.useRef(null),U=v.useRef(!1),ne=v.useRef(!1),ie=v.useRef(!1),oe=v.useRef(!1),V={workItemTypes:[],states:[],areaPaths:[],tags:[],query:""},{register:Z,handleSubmit:ee,watch:re,control:me,setValue:I,reset:M}=Xu({defaultValues:V}),We=v.useCallback(()=>{M({...V}),E(!1),ne.current=!1,ie.current=!1,oe.current=!1},[M]);v.useEffect(()=>{We()},[b,We]);const te=re("workItemTypes"),ve=re("states"),he=re("areaPaths"),ye=re("tags"),le=re("query"),W=v.useCallback((G,He,Je,gt,_t,Mt)=>{const Dt=[];if(G&&G.length>0)if(G.length===1)Dt.push(`[System.WorkItemType] = '${G[0]}'`);else{const Qt=G.map(R=>`'${R}'`).join(", ");Dt.push(`[System.WorkItemType] IN (${Qt})`)}if(He&&He.length>0)if(He.length===1)Dt.push(`[System.State] = '${He[0]}'`);else{const Qt=He.map(R=>`'${R}'`).join(", ");Dt.push(`[System.State] IN (${Qt})`)}if(Je&&Je.length>0)if(Je.length===1)Dt.push(`[System.AreaPath] UNDER '${Je[0]}'`);else{const Qt=Je.map(R=>`[System.AreaPath] UNDER '${R}'`);Dt.push(`(${Qt.join(" OR ")})`)}if(gt&&gt.length>0){const Qt=gt.map(R=>`[System.Tags] CONTAINS '${R}'`);Dt.push(`(${Qt.join(" OR ")})`)}return Mt&&_t&&Dt.push(`(${_t})`),Dt.length>0?Dt.join(" AND "):void 0},[]);v.useEffect(()=>{if(!(ne.current||ie.current||oe.current)&&m){if(!te||te.length===0){m(void 0);return}m(te[0])}},[te,m]),v.useEffect(()=>{if(ne.current||ie.current||!f)return;(async()=>{H(!0);try{await f(te&&te.length>0?te[0]:void 0,ve||[])}finally{H(!1)}})()},[te,ve,f]),v.useEffect(()=>{if(ie.current||!p||!te||te.length===0)return;const G=async()=>{q(!0);try{await p(te[0],ve||[],he||[])}finally{q(!1)}},He=setTimeout(()=>{G()},100);return()=>{clearTimeout(He),q(!1)}},[te,ve,he,p]),v.useEffect(()=>{if(!y||ie.current||oe.current||!he||he.length===0)return;const G=te&&te.length>0,He=ve&&ve.length>0;G&&He||(ne.current=!0,y(he).then(({types:Je,states:gt})=>{Je.length>0&&!G&&I("workItemTypes",Je,{shouldDirty:!1}),gt.length>0&&!He&&I("states",gt,{shouldDirty:!1})}).finally(()=>{setTimeout(()=>{ne.current=!1},300)}))},[he,te,ve,y,I]),v.useEffect(()=>{x&&(ne.current||oe.current||!ye||ye.length===0||(ie.current=!0,x(ye).then(({types:G,states:He,areaPaths:Je})=>{G.length>0&&I("workItemTypes",G,{shouldDirty:!1}),He.length>0&&I("states",He,{shouldDirty:!1}),Je.length>0&&I("areaPaths",Je,{shouldDirty:!1})}).finally(()=>{setTimeout(()=>{ie.current=!1},300)})))},[ye,x,I]),v.useEffect(()=>{!w||ne.current||ie.current||!ve||ve.length===0||te&&te.length>0||(oe.current=!0,w(ve).then(({types:He})=>{He.length>0&&I("workItemTypes",He,{shouldDirty:!1})}).finally(()=>{setTimeout(()=>{oe.current=!1},300)}))},[ve,te,w,I]),v.useEffect(()=>{if(ve&&ve.length>0&&s.length>0){const G=ve.filter(He=>s.includes(He));G.length!==ve.length&&I("states",G)}},[s,ve,I]),v.useEffect(()=>{if(he&&he.length>0&&i.length>0){const G=he.filter(He=>i.includes(He));G.length!==he.length&&(I("areaPaths",G),G.length===0&&I("tags",[]))}},[i,he,I]),v.useEffect(()=>{if(ye&&ye.length>0&&l.length>0){const G=ye.filter(He=>l.includes(He));G.length!==ye.length&&I("tags",G)}},[l,ye,I]);const Re=v.useCallback(async()=>{if(!e.enabled||!e.accessToken||!te||te.length===0){O(null);return}try{P(!0);const G=te[0],He=W(te||[],ve||[],he||[],ye||[],le||"",_);let Je="";He?Je=`SELECT [System.Id] FROM WorkItems WHERE ${He}`:Je=`SELECT [System.Id] FROM WorkItems WHERE [System.WorkItemType] = '${G}' AND [System.State] = 'Active'`;const gt=`https://dev.azure.com/${e.organization}/${e.project}/_apis/wit/wiql?api-version=7.0`,_t=await fetch(gt,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${e.accessToken}`},body:JSON.stringify({query:Je})});if(!_t.ok)throw new Error(`Azure DevOps query failed: ${_t.status} ${_t.statusText}`);const Mt=await _t.json(),Dt=Mt.workItems?Mt.workItems.length:0;O(Dt)}catch(G){console.error("[FilterForm] Error fetching feature count:",G),O(null)}finally{P(!1)}},[e,te,ve,he,ye,le,_,W]);v.useEffect(()=>(z.current!==null&&window.clearTimeout(z.current),O(null),te&&te.length>0&&e.enabled&&e.accessToken&&(z.current=window.setTimeout(()=>{Re()},300)),()=>{z.current!==null&&window.clearTimeout(z.current)}),[te,ve,he,ye,le,_,e.enabled,e.accessToken,Re]),v.useEffect(()=>{if(d&&!U.current&&u){const G=u.length;O(G)}U.current=d||!1},[d,u]),v.useEffect(()=>{u&&u.length>0&&!T&&O(u.length)},[u,T]),v.useEffect(()=>{const G=W(te||[],ve||[],he||[],ye||[],le||"",_),He={...e,workItemType:te&&te.length>0?te[0]:e.workItemType||"Feature",query:G,states:ve&&ve.length>0?ve:void 0,areaPath:he&&he.length>0?he[0]:void 0,tags:ye&&ye.length>0?ye:void 0},Je=window.setTimeout(()=>{t(He)},100);return()=>{window.clearTimeout(Je)}},[te,ve,he,ye,le,_,W,t]);const Ge=async G=>{await r()};return a.jsxs("form",{onSubmit:ee(Ge),className:"bg-gray-50 p-4 rounded-lg border border-gray-200",children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsxs("h3",{className:"text-lg font-medium text-[#2D4660] flex items-center",children:[a.jsx(YM,{className:"h-5 w-5 mr-2"}),"Filter Work Items"]}),a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("button",{type:"button",onClick:We,className:"text-xs text-[#576C71] hover:text-[#2D4660] font-medium border border-transparent hover:border-[#576C71] rounded-full px-2 py-0.5 transition",children:"Clear All Filters"}),a.jsx("button",{type:"button",onClick:()=>E(!_),className:"text-xs text-[#1E5461] hover:text-[#2D4660] font-medium",children:_?" Hide Advanced WIQL":"Show Advanced WIQL "})]})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-4",children:[a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[a.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Work Item Type"}),a.jsx("span",{className:"px-2 py-0.5 rounded-full text-xs font-semibold text-white bg-[#2D4660]",children:S.length})]}),a.jsx(dc,{name:"workItemTypes",control:me,render:({field:G})=>a.jsx(Yf,{options:S,value:G.value,onChange:G.onChange,placeholder:"Select types..."})}),a.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"Click to select multiple types"})]}),a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[a.jsx("span",{className:"text-sm font-medium text-gray-700",children:"State (Optional)"}),a.jsx("span",{className:"px-2 py-0.5 rounded-full text-xs font-semibold text-white bg-[#1E5461]",children:(s==null?void 0:s.length)||0})]}),a.jsx(dc,{name:"states",control:me,render:({field:G})=>a.jsx(Yf,{options:s,value:G.value,onChange:G.onChange,placeholder:"Select states...",disabled:s.length===0})}),a.jsx("p",{className:"mt-1 text-xs text-gray-500",children:s.length===0?"Loading states...":"Filtered by work item type"})]}),a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[a.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Area Path (Optional)"}),a.jsx("span",{className:"px-2 py-0.5 rounded-full text-xs font-semibold text-white bg-[#576C71]",children:(i==null?void 0:i.length)||0})]}),a.jsx(dc,{name:"areaPaths",control:me,render:({field:G})=>a.jsx(Yf,{options:i,value:G.value,onChange:G.onChange,placeholder:"Select area paths...",searchable:!0,disabled:i.length===0})}),a.jsx("p",{className:"mt-1 text-xs text-gray-500",children:F?"Loading area paths...":i.length===0?"No area paths found for current filters":"Filtered by type & state"})]}),a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[a.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Tags (Optional)"}),a.jsx("span",{className:"px-2 py-0.5 rounded-full text-xs font-semibold text-white bg-[#C89212]",children:(l==null?void 0:l.length)||0})]}),a.jsx(dc,{name:"tags",control:me,render:({field:G})=>a.jsx(Yf,{options:l,value:G.value,onChange:G.onChange,placeholder:"Select tags...",searchable:!0,disabled:l.length===0&&!L})}),a.jsx("p",{className:"mt-1 text-xs text-gray-500",children:!te||te.length===0?"Select work item type to see tags":L?"Loading tags...":l.length===0?"No tags found for current filters":"Filtered by type, state & area"})]})]}),_&&a.jsxs("div",{className:"mb-4",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Advanced WIQL Query (Optional)"}),a.jsx("input",{...Z("query"),placeholder:"e.g., [System.Priority] = 1",className:"w-full px-3 py-2 border border-gray-300 rounded-md text-sm"}),a.jsxs("p",{className:"mt-1 text-xs text-gray-500",children:["Will be combined with above filters using AND."," ",a.jsx("a",{href:"https://learn.microsoft.com/en-us/azure/devops/boards/queries/wiql-syntax",target:"_blank",rel:"noopener noreferrer",className:"text-[#1E5461] hover:text-[#2D4660]",children:"WIQL syntax reference "})]})]}),a.jsx("div",{className:"flex justify-end",children:a.jsxs(ut,{variant:"gold",type:"submit",disabled:(()=>{const G=((te==null?void 0:te.length)??0)>0,He=((ve==null?void 0:ve.length)??0)>0,Je=((he==null?void 0:he.length)??0)>0,gt=((ye==null?void 0:ye.length)??0)>0,_t=le&&le.trim().length>0;return n||T||!(G||He||Je||gt||_t)})(),className:"flex items-center",children:[n&&a.jsx(tl,{className:"animate-spin h-4 w-4 mr-2"}),n?"Loading...":C!==null&&!T?`Preview ${C} Feature${C!==1?"s":""}`:"Preview Features"]})})]})}function fZ({session:e,featureCount:t,onSubmit:r,onCancel:n,onRequestDeleteSession:s,isDeletingSession:i,productName:l,products:u,isLoadingProducts:d,productError:m,onRequestDeleteProduct:f,onProductColorUpdated:p}){const[y,x]=v.useState(null),[w,b]=v.useState(!1),[S,_]=v.useState("#2D4660"),[E,C]=v.useState(null),[O,T]=v.useState(!1);v.useRef(null);const P=v.useMemo(()=>{const I={};return u.forEach(M=>{M.id&&M.name&&(I[M.id]=M.name)}),I},[u]),{register:F,handleSubmit:H,watch:L,reset:q,control:z,setValue:U,formState:{errors:ne}}=Xu({defaultValues:{productId:e.productId??e.product_id??"",title:e.title,goal:e.goal,startDate:e.startDate.split("T")[0],endDate:e.endDate.split("T")[0],useAutoVotes:e.useAutoVotes||!1,votesPerUser:e.votesPerUser}});v.useEffect(()=>{q({productId:e.productId??e.product_id??"",title:e.title,goal:e.goal,startDate:e.startDate.split("T")[0],endDate:e.endDate.split("T")[0],useAutoVotes:e.useAutoVotes||!1,votesPerUser:e.votesPerUser})},[e,q]);const ie=e.productName??e.product_name??l??"",oe=e.productId??e.product_id??"";v.useEffect(()=>{if(!u.length)return;if(oe){u.some(We=>We.id===oe)&&U("productId",oe,{shouldDirty:!1,shouldTouch:!1});return}if(!ie)return;const I=u.find(M=>M.name.toLowerCase()===ie.toLowerCase());I&&U("productId",I.id,{shouldDirty:!1,shouldTouch:!1})},[u,oe,ie,U]);const V=L("useAutoVotes"),Z=L("productId"),ee=v.useMemo(()=>!E||!Z?u:u.map(I=>I.id===Z?{...I,color_hex:E}:I),[u,E,Z]);v.useEffect(()=>{if(!Z)return;u.some(M=>M.id===Z)||U("productId","",{shouldDirty:!0,shouldTouch:!0})},[Z,u,U]),v.useEffect(()=>{if(Z&&u.length>0){const I=u.find(M=>M.id===Z);if(I){const M=I.color_hex??null;x(M),_(M||"#2D4660"),C(null),b(!1)}}else Z||(x(null),_("#2D4660"),C(null),b(!1))},[Z,u]);const re=V?Math.max(1,Math.floor(t/2)):L("votesPerUser"),me=async I=>{try{if(E&&Z){T(!0);try{await lx(Z,{color_hex:E}),p&&p(),C(null),x(E)}catch(M){console.error("Error updating product color:",M)}finally{T(!1)}}r(I)}catch(M){throw console.error("ERROR in handleFormSubmit:",M),M}};return a.jsxs("form",{onSubmit:H(I=>me(I),I=>{}),children:[a.jsx(dc,{control:z,name:"productId",render:({field:I})=>{const M=ee.find(W=>W.id===I.value)??null,We=I.value?P[I.value]??null:null,te=M?null:We??(ie||null),ve=!!I.value,he=(M==null?void 0:M.color_hex)||null,ye=M?cs(M.name,he??null):null,le=(ye==null?void 0:ye.background)||null;return a.jsx("div",{className:"mb-4",children:a.jsxs("div",{className:"flex items-start gap-3",children:[a.jsx("div",{className:"flex-1",children:a.jsx(yI,{products:ee,value:I.value,onChange:W=>{I.onChange(W)},fallbackName:te,isLoading:d,error:m,disabled:d||ee.length===0,helperText:!d&&ee.length===0&&!m?"No products found yet. Create products from the session creation modal.":void 0,allowDelete:!!f,onRequestDeleteProduct:f})}),ve&&a.jsxs("div",{className:"flex items-center gap-2 mt-6",children:[a.jsx("label",{className:"text-sm font-medium text-gray-700 whitespace-nowrap",children:"Product Color"}),a.jsx("button",{type:"button",onClick:()=>{const W=le||"#2D4660";_(W),x(W),b(!0)},className:"block w-10 h-10 rounded-md border-2 border-gray-300 hover:border-gray-400 transition-all shadow-sm",style:{backgroundColor:le||"#2D4660",borderColor:(ye==null?void 0:ye.border)||"#D1D5DB"},title:"Change product color"})]})]})})}}),a.jsxs("div",{className:"mb-4",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Session Title"}),a.jsx("input",{...F("title",{required:"Title is required"}),className:"w-full px-3 py-2 border border-gray-300 rounded-md"}),ne.title&&a.jsx("p",{className:"mt-1 text-sm text-red-600",children:ne.title.message})]}),a.jsxs("div",{className:"mb-4",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Goal"}),a.jsx("textarea",{...F("goal",{required:"Goal is required"}),rows:2,className:"w-full px-3 py-2 border border-gray-300 rounded-md"}),ne.goal&&a.jsx("p",{className:"mt-1 text-sm text-red-600",children:ne.goal.message})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Start Date"}),a.jsx("input",{type:"date",...F("startDate",{required:"Start date is required"}),className:"w-full px-3 py-2 border border-gray-300 rounded-md"}),ne.startDate&&a.jsx("p",{className:"mt-1 text-sm text-red-600",children:ne.startDate.message})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"End Date"}),a.jsx("input",{type:"date",...F("endDate",{required:"End date is required"}),className:"w-full px-3 py-2 border border-gray-300 rounded-md"}),ne.endDate&&a.jsx("p",{className:"mt-1 text-sm text-red-600",children:ne.endDate.message})]})]}),a.jsxs("div",{className:"mb-4 bg-[#1E5461]/5 border border-[#1E5461]/20 rounded-lg p-4",children:[a.jsxs("div",{className:"flex items-start",children:[a.jsx("input",{type:"checkbox",...F("useAutoVotes"),className:"mt-1 h-4 w-4 text-[#399E5A] border-gray-300 rounded accent-[#399E5A]"}),a.jsxs("div",{className:"ml-3",children:[a.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Automatically calculate votes per user"}),a.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:["Each user gets half the number of features (minimum 1 vote). Currently: ",re," votes"]})]})]}),!V&&a.jsxs("div",{className:"mt-3",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Votes Per User"}),a.jsx("input",{type:"number",min:"1",...F("votesPerUser",{required:V?!1:"Votes per user is required",min:{value:1,message:"Must be at least 1"}}),className:"w-full px-3 py-2 border border-gray-300 rounded-md"}),ne.votesPerUser&&a.jsx("p",{className:"mt-1 text-sm text-red-600",children:ne.votesPerUser.message})]})]}),a.jsxs("div",{className:"mt-6 flex flex-col gap-3 border-t border-gray-200 pt-4 sm:flex-row sm:items-center sm:justify-between",children:[a.jsxs(ut,{variant:"danger",type:"button",onClick:()=>s(),disabled:i,className:"flex items-center gap-2",children:[a.jsx(Li,{className:"h-4 w-4"}),i?"Deleting...":"Delete Session"]}),a.jsxs("div",{className:"flex w-full justify-end gap-2 sm:w-auto",children:[a.jsx(ut,{variant:"secondary",type:"button",onClick:n,children:"Cancel"}),a.jsx(ut,{variant:"primary",type:"button",onClick:async I=>{I.preventDefault(),I.stopPropagation(),L(),await H(M=>me(M),M=>{alert("Please fix form errors: "+JSON.stringify(M))})()},children:"Save Changes"})]})]}),w&&Z&&(()=>{const I=ee.find(M=>M.id===Z);return I?a.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",onClick:()=>{b(!1),x(I.color_hex??null),_(I.color_hex??"#2D4660"),C(null)},children:a.jsx("div",{className:"bg-white rounded-lg shadow-xl px-3 py-2 w-auto mx-4",onClick:M=>M.stopPropagation(),children:a.jsxs("div",{className:"flex gap-3 items-stretch",children:[a.jsxs("div",{className:"flex-shrink-0",style:{width:"240px",height:"260px"},children:[a.jsx("input",{id:"native-color-input",type:"color",value:S,onChange:M=>{_(M.target.value),x(M.target.value)},ref:M=>{M&&w&&setTimeout(()=>M.click(),50)},className:"opacity-0 absolute",style:{width:"1px",height:"1px"}}),a.jsx("div",{className:"w-full h-full"})]}),a.jsx("button",{type:"button",onClick:()=>{if(!Z||!S)return;const M=ee.find(te=>te.id===Z);if(!M)return;if((M.color_hex||null)===S){b(!1);return}C(S),x(S),b(!1)},disabled:O,className:"px-6 rounded-lg text-white font-bold shadow-lg hover:shadow-xl transition-all flex flex-col items-center justify-center gap-3 text-lg flex-shrink-0 disabled:opacity-50 disabled:cursor-not-allowed",style:{backgroundColor:S,height:"260px",minWidth:"100px"},children:O?a.jsx(tl,{className:"h-8 w-8 animate-spin"}):a.jsxs(a.Fragment,{children:[a.jsx(Yr,{className:"h-8 w-8"}),a.jsxs("div",{className:"text-center leading-tight",children:[a.jsx("div",{children:"Looks"}),a.jsx("div",{children:"Good"})]})]})})]})})}):null})()]})}function hZ({features:e,onAddFeature:t,onUpdateFeature:r,onDeleteFeature:n,onShowResults:s,onRequestDeleteSession:i,isDeletingSession:l,showAddForm:u,setShowAddForm:d,editingFeature:m,setEditingFeature:f,onLogout:p,onShowVoterView:y,votingSession:x,azureDevOpsConfig:w,onUpdateAzureDevOpsConfig:b,onPreviewAzureDevOpsFeatures:S,onDisconnectAzureDevOps:_,isFetchingAzureDevOps:E,azureFetchError:C,onInitiateOAuth:O,availableStates:T,availableAreaPaths:P,availableTags:F,previewFeatures:H,showPreviewModal:L,setShowPreviewModal:q,onConfirmSync:z,onUpdateVotingSession:U,onFetchStatesForType:ne,onFetchAreaPathsForTypeAndState:ie,onFetchTagsForTypeStateAndAreaPath:oe,onFetchTypesAndStatesForAreaPath:V,onFetchTypesAndStatesForTags:Z,onFetchTypesAndAreaPathsForStates:ee,suggestedFeatures:re,otherSessions:me,onPromoteSuggestion:I,onMoveSuggestion:M,onEditSuggestion:We,onDeleteSuggestion:te,adminPerspective:ve="session",projectOptions:he}){const ye=Ds(),{currentUser:le,currentSession:W}=aa(),[Re,Ge]=v.useState(()=>w.project?w.project:he[0]??""),[G,He]=v.useState(0);v.useEffect(()=>{w.project?Ge(w.project):he.length>0?Ge(he[0]):Ge("")},[w.project,he]);const[Je,gt]=v.useState(!1),[_t,Mt]=v.useState(!1),[Dt,Qt]=v.useState(!1),[R,Y]=v.useState(!1),ce=v.useRef(null),[je,pe]=v.useState(!1),Se=v.useRef(null),[qe,xt]=v.useState(null),[bt,Ft]=v.useState(!1),[hr,Ht]=v.useState(null),[Ir,Dr]=v.useState(null),[zt,nn]=v.useState(""),[ar,Ur]=v.useState(null),[st,Wt]=v.useState(!1),[Ut,Kt]=v.useState(null),[mr,Rr]=v.useState({title:"",summary:"",whatWouldItDo:"",howWouldItWork:""}),[ws,sn]=v.useState(null),[pr,Zn]=v.useState(!1),[an,xr]=v.useState(null),[ir,es]=v.useState(!1),[Gt,Br]=v.useState(null),[gr,Wr]=v.useState([]),[wr,Vn]=v.useState(!1),[yn,_r]=v.useState([]),[$s,on]=v.useState(!1),[or,Zt]=v.useState(null),[Et,ln]=v.useState(null),[Vr,ts]=v.useState(!1),[Pn,us]=v.useState(!1),[bs,Vt]=v.useState(null),[Q,we]=v.useState(""),[$e,Oe]=v.useState(!1),[Xe,Ve]=v.useState(!1),[At,yt]=v.useState("#2D4660"),Lt=v.useMemo(()=>{const D={};return yn.forEach(_e=>{_e.id&&_e.name&&(D[_e.id]=_e.name)}),D},[yn]),Le=v.useMemo(()=>{const D={};return yn.forEach(_e=>{_e.id&&_e.color_hex&&(D[_e.id]=_e.color_hex)}),D},[yn]),dr=v.useMemo(()=>$n({...x,product_id:x.product_id??(W==null?void 0:W.product_id)??x.productId??null,product_name:null},Lt),[x,W,Lt]),Nr=v.useMemo(()=>{const D=x.product_id??x.productId??null;return D?Le[D]??null:null},[x,Le]),yr=v.useMemo(()=>cs(dr,Nr),[dr,Nr]),Nt=v.useRef(null);v.useEffect(()=>{const D=(le==null?void 0:le.tenant_id)??(le==null?void 0:le.tenantId)??null;if(!D){Nt.current=null,_r([]),Zt(null);return}if(Nt.current===D)return;let _e=!1;return(async()=>{on(!0),Zt(null);try{const Qe=await xa(D);if(_e)return;_r(Qe),Nt.current=D}catch(Qe){if(_e)return;console.error("Error loading products for admin dashboard:",Qe),_a!=null&&_a(Qe)?Zt("Products are not configured yet. Please create the `products` table in Supabase."):Zt("Unable to load products. Please try again."),_r([]),Nt.current=null}finally{_e||on(!1)}})(),()=>{_e=!0}},[le==null?void 0:le.tenant_id,le==null?void 0:le.tenantId]);const cn=v.useCallback(async()=>{if(Et){ts(!0);try{await BC(Et.id),_r(D=>D.filter(_e=>_e.id!==Et.id)),ln(null)}catch(D){console.error("Error deleting product from admin dashboard:",D),Zt("Failed to delete product. Please try again.")}finally{ts(!1)}}},[Et]),Ms=v.useCallback(D=>{const _e=D==null?void 0:D.trim();if(_e){if(Ge(_e),_e!==(w.project||"")){const Ae={...w,project:_e};b(Ae)}He(Ae=>Ae+1)}},[w,b]),{register:Fs,handleSubmit:Ls,reset:ji}=Xu({defaultValues:{reason:"",details:""}}),{control:Vi,handleSubmit:Si,reset:qr,register:si,formState:{errors:X}}=Xu({defaultValues:{reason:"",details:""}}),de=x.isActive?a.jsx("span",{className:"text-[#1E5461] font-medium",children:"Active"}):mi(x.endDate)?a.jsx("span",{className:"text-[#591D0F] font-medium",children:"Closed"}):a.jsx("span",{className:"text-[#C89212] font-medium",children:"Upcoming"}),ue=v.useMemo(()=>{const D=Ae=>{const Qe=Ae.type==="reopen",tt=Ae.createdAt||null,Bt=Ae.actorName||"Admin",Yt=tt?` ${Qi(tt)}`:"";return{id:Ae.id,type:Ae.type,reason:Ae.reason,details:Ae.details??null,title:Qe?`Reopened${Yt} by ${Bt}`:`Ended early${Yt} by ${Bt}`,description:`${Ae.reason}${Ae.details?": "+Ae.details:""}`,iconBgClass:Qe?"bg-[#1E5461]/10":"bg-[#C89212]/10",iconBorderClass:Qe?"border-[#1E5461]/20":"border-[#C89212]/20",iconColorClass:Qe?"text-[#1E5461]":"text-[#C89212]",textColorClass:Qe?"text-[#1E5461]":"text-[#6A4234]"}};if(gr.length>0)return gr.map(Ae=>D(Ae));const _e=[];return x.reopenReason&&_e.push({id:"fallback-reopen",sessionId:(W==null?void 0:W.id)||"",type:"reopen",reason:x.reopenReason,details:x.reopenDetails??null,actorName:x.reopenedBy||"Admin",actorId:null,createdAt:x.reopenedAt||x.endDate}),x.endedEarlyReason&&_e.push({id:"fallback-ended-early",sessionId:(W==null?void 0:W.id)||"",type:"ended-early",reason:x.endedEarlyReason,details:x.endedEarlyDetails??null,actorName:x.endedEarlyBy||"Admin",actorId:null,createdAt:x.originalEndDate||x.endDate}),_e.map(Ae=>D(Ae))},[gr,x.reopenReason,x.reopenDetails,x.reopenedAt,x.reopenedBy,x.endedEarlyReason,x.endedEarlyDetails,x.originalEndDate,x.endDate,x.endedEarlyBy,W==null?void 0:W.id]);v.useEffect(()=>{ue.length<=2&&Vn(!1)},[ue.length]);const Me=v.useCallback(async()=>{if(!(W!=null&&W.id)){Wr([]);return}try{const D=await h3(W.id);Wr(D)}catch(D){console.error("Error loading session status notes:",D)}},[W==null?void 0:W.id]);v.useEffect(()=>{Me()},[Me]);const Be=v.useCallback(async D=>{if(W!=null&&W.id)try{const _e=await m3({session_id:W.id,type:D.type,reason:D.reason,details:D.details??null,actor_id:D.actorId??null,actor_name:D.actorName||"Admin"});Wr(Ae=>{const Qe=Ae.findIndex(tt=>tt.id===_e.id);if(Qe!==-1){const tt=[...Ae];return tt[Qe]=_e,tt}return[_e,...Ae]})}catch(_e){console.error("Error logging session status note:",_e)}},[W==null?void 0:W.id]);v.useEffect(()=>{Ut&&(Rr({title:Ut.title,summary:Ut.summary??"",whatWouldItDo:Ut.whatWouldItDo??"",howWouldItWork:Ut.howWouldItWork??""}),sn(null))},[Ut]),v.useEffect(()=>{Ir&&me.length>0?nn(me[0].id):nn(""),Ur(null)},[Ir,me]);const xe=D=>{const _e=D.productId&&D.productId.trim()!==""?D.productId:null,Ae=_e&&yn.find(tt=>tt.id===_e)||null,Qe={...x,title:D.title,goal:D.goal,votesPerUser:D.useAutoVotes?Math.max(1,Math.floor(e.length/2)):Number(D.votesPerUser),useAutoVotes:D.useAutoVotes,startDate:new Date(D.startDate).toISOString(),endDate:new Date(D.endDate+"T23:59:59").toISOString(),isActive:x.isActive,product_id:(Ae==null?void 0:Ae.id)??null,product_name:null};U(Qe),gt(!1)},be=D=>{var Qe,tt;const _e=new Date().toISOString(),Ae={...x,originalEndDate:x.endDate,endDate:_e,isActive:!1,endedEarlyBy:(le==null?void 0:le.name)||"Admin",endedEarlyReason:D.reason,endedEarlyDetails:(Qe=D.details)!=null&&Qe.trim()?D.details.trim():null,reopenReason:null,reopenDetails:null,reopenedBy:null,reopenedAt:null};U(Ae),Be({type:"ended-early",reason:D.reason,details:(tt=D.details)!=null&&tt.trim()?D.details.trim():null,actorName:(le==null?void 0:le.name)||"Admin",actorId:(le==null?void 0:le.id)??null}),Mt(!1),ji()},ct=D=>{var Qe,tt;const _e=new Date;_e.setDate(_e.getDate()+7);const Ae={...x,endDate:_e.toISOString(),isActive:!0,originalEndDate:null,endedEarlyBy:null,endedEarlyReason:null,endedEarlyDetails:null,reopenReason:D.reason,reopenDetails:(Qe=D.details)!=null&&Qe.trim()?D.details.trim():null,reopenedBy:(le==null?void 0:le.name)||"Admin",reopenedAt:new Date().toISOString()};U(Ae),Be({type:"reopen",reason:D.reason,details:(tt=D.details)!=null&&tt.trim()?D.details.trim():null,actorName:(le==null?void 0:le.name)||"Admin",actorId:(le==null?void 0:le.id)??null}),Qt(!1),qr()},It=async(D,_e)=>{const Ae={...w,organization:D,project:_e};b(Ae),O()},ft=D=>{Kt(D)},Ot=async()=>{if(!Ut)return;const D=mr.title.trim();if(!D){sn("Title is required.");return}Zn(!0),sn(null);try{await We(Ut.id,{title:D,summary:mr.summary.trim()?mr.summary.trim():null,whatWouldItDo:mr.whatWouldItDo.trim()?mr.whatWouldItDo.trim():null,howWouldItWork:mr.howWouldItWork.trim()?mr.howWouldItWork.trim():null}),Kt(null)}catch(_e){console.error("Error updating suggestion:",_e),sn("Failed to update the suggestion. Please try again.")}finally{Zn(!1)}},wt=async()=>{if(Ir){if(!zt){Ur("Please select a session.");return}Wt(!0),Ur(null);try{await M(Ir.id,zt),Dr(null)}catch(D){console.error("Error moving suggestion:",D),Ur("Failed to move the suggestion. Please try again.")}finally{Wt(!1)}}},ze=async()=>{if(qe){Ft(!0),Ht(null);try{await I(qe.id),xt(null)}catch(D){console.error("Error promoting suggestion:",D),Ht("Failed to move the suggestion into the current session.")}finally{Ft(!1)}}},qt=async()=>{if(an){es(!0),Br(null);try{await te(an.id),xr(null)}catch(D){console.error("Error deleting suggestion:",D),Br("Failed to delete the suggestion. Please try again.")}finally{es(!1)}}},Rt=v.useCallback(()=>{gt(!1),i()},[i]);return v.useEffect(()=>{if(!R)return;const D=_e=>{ce.current&&!ce.current.contains(_e.target)&&Y(!1)};return document.addEventListener("mousedown",D),document.addEventListener("touchstart",D,{passive:!0}),()=>{document.removeEventListener("mousedown",D),document.removeEventListener("touchstart",D)}},[R]),v.useEffect(()=>{if(!je)return;const D=_e=>{Se.current&&!Se.current.contains(_e.target)&&pe(!1)};return document.addEventListener("mousedown",D),document.addEventListener("touchstart",D,{passive:!0}),()=>{document.removeEventListener("mousedown",D),document.removeEventListener("touchstart",D)}},[je]),a.jsxs("div",{className:"container mx-auto p-4 max-w-6xl min-h-screen pb-8",children:[a.jsx("div",{className:"hidden md:flex md:justify-center mb-2",children:a.jsx("img",{src:"https://www.steeldynamics.com/wp-content/uploads/2024/05/New-Millennium-color-logo1.png",alt:"New Millennium Building Systems Logo",className:"-mt-4 cursor-pointer hover:opacity-80 transition-opacity",style:{height:"96px",width:"auto"},onClick:()=>ye("/sessions")})}),a.jsxs("div",{className:"flex justify-between items-center mb-6",children:[a.jsxs("div",{className:"flex items-center",children:[a.jsx(rp,{src:"https://www.steeldynamics.com/wp-content/uploads/2024/05/New-Millennium-color-logo1.png",alt:"New Millennium Building Systems Logo",className:"mr-4 md:hidden",style:{width:"40px",height:"40px"}}),a.jsx("h1",{className:"text-2xl font-bold text-[#2D4660] md:text-3xl",children:"Admin Dashboard"})]}),a.jsxs("div",{ref:ce,className:"relative z-40",children:[a.jsxs("div",{className:"hidden md:flex space-x-2",children:[x.isActive&&a.jsxs("button",{onClick:y,className:"flex items-center px-4 py-2 bg-[#576C71] text-white rounded-lg hover:bg-[#1E5461] transition-colors",children:[a.jsx(Gn,{className:"mr-2 h-4 w-4"}),"Vote!"]}),a.jsxs("button",{onClick:()=>ye(ve==="system"?"/users":"/users?filter=stakeholder"),className:"flex items-center px-4 py-2 bg-[#2D4660] text-white rounded-lg hover:bg-[#173B65] transition-colors",children:[ve==="system"?a.jsx(Fn,{className:"mr-2 h-4 w-4"}):a.jsx(Xn,{className:"mr-2 h-4 w-4"}),ve==="system"?"User Management":"Stakeholders"]}),a.jsxs("button",{onClick:()=>ye("/sessions"),className:"flex items-center px-4 py-2 bg-[#4f6d8e] text-white rounded-lg hover:bg-[#3d5670] transition-colors",children:[a.jsx(Xn,{className:"mr-2 h-4 w-4"}),"All Sessions"]}),a.jsxs("button",{onClick:p,className:"flex items-center px-4 py-2 bg-[#576C71] text-white rounded-lg hover:bg-[#1E5461] transition-colors",children:[a.jsx(zn,{className:"mr-2 h-4 w-4"}),"Logout"]})]}),a.jsx("div",{className:"flex md:hidden",children:a.jsx("button",{onClick:()=>Y(!R),className:"p-2 rounded-md border border-gray-200 bg-white shadow-sm","aria-label":"Open menu",children:a.jsx(Ys,{className:"h-5 w-5 text-gray-700"})})}),R&&a.jsx("div",{className:"absolute right-0 mt-2 w-56 bg-white border border-gray-200 rounded-lg shadow-lg md:hidden z-50",children:a.jsxs("div",{className:"py-1",children:[x.isActive&&a.jsxs("button",{onClick:()=>{Y(!1),y()},className:"w-full px-3 py-2 flex items-center text-left hover:bg-gray-50",children:[a.jsx(Gn,{className:"h-4 w-4 mr-2 text-gray-700"}),"Vote!"]}),a.jsxs("button",{onClick:()=>{Y(!1),ye(ve==="system"?"/users":"/users?filter=stakeholder")},className:"w-full px-3 py-2 flex items-center text-left hover:bg-gray-50",children:[ve==="system"?a.jsx(Fn,{className:"h-4 w-4 mr-2 text-gray-700"}):a.jsx(Xn,{className:"h-4 w-4 mr-2 text-gray-700"}),ve==="system"?"User Management":"Stakeholders"]}),a.jsxs("button",{onClick:()=>{Y(!1),ye("/sessions")},className:"w-full px-3 py-2 flex items-center text-left hover:bg-gray-50",children:[a.jsx(Xn,{className:"h-4 w-4 mr-2 text-gray-700"}),"All Sessions"]}),!(x.isActive===!1&&!mi(x.endDate))&&a.jsxs("button",{onClick:()=>{Y(!1),s()},className:"w-full px-3 py-2 flex items-center text-left hover:bg-gray-50",children:[a.jsx(rh,{className:"h-4 w-4 mr-2 text-gray-700"}),mi(x.endDate)?"Final Results":"Current Results"]}),a.jsxs("button",{onClick:()=>{Y(!1),gt(!0)},className:"w-full px-3 py-2 flex items-center text-left hover:bg-gray-50",children:[a.jsx(_n,{className:"h-4 w-4 mr-2 text-gray-700"}),"Edit Session"]}),a.jsxs("button",{onClick:()=>{Y(!1),p()},className:"w-full px-3 py-2 flex items-center text-left hover:bg-gray-50",children:[a.jsx(zn,{className:"h-4 w-4 mr-2 text-gray-700"}),"Logout"]})]})})]})]}),a.jsxs("div",{className:"relative bg-white rounded-lg shadow-md p-4 mb-6",style:{marginTop:dr?"3.5rem":"0"},children:[dr&&a.jsxs("div",{className:"absolute left-0 px-4 py-1 pr-8 rounded-t-md border-b-0 text-sm font-semibold shadow-sm z-20 flex items-center gap-2 whitespace-nowrap group cursor-pointer",style:{top:"0",left:"-1px",transform:"translateY(-100%)",backgroundColor:yr.background,color:yr.text,borderColor:yr.border,borderWidth:"1px",borderBottomWidth:"0",boxShadow:"0 4px 8px rgba(16,24,40,0.06)",borderTopLeftRadius:"0.9rem",borderTopRightRadius:"0.9rem",overflow:"visible"},onMouseEnter:()=>{(x.product_id||x.productId)&&us(!0)},onMouseLeave:()=>us(!1),onClick:async D=>{const _e=x.product_id||x.productId;if(!_e)return;D.stopPropagation();const Ae=yn.find(Qe=>Qe.id===_e);Ae&&(Vt(Ae),we(Ae.name||""),setEditingProductColor(Ae.color_hex||null),yt(Ae.color_hex||"#2D4660"))},children:[a.jsx(Qv,{className:"h-4 w-4 flex-shrink-0"}),a.jsx("span",{className:"overflow-hidden text-ellipsis flex-1 min-w-0",children:dr}),(x.product_id||x.productId)&&Pn&&a.jsx("div",{className:"absolute right-2 flex-shrink-0 opacity-80",children:a.jsx(bE,{className:"h-4 w-4",style:{color:yr.text}})})]}),a.jsxs("div",{className:"pt-1",children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsxs("h2",{className:"text-xl font-semibold text-[#2D4660]",children:["Current Session: ",a.jsx("span",{className:"text-[#1E5461]",children:x.title})]}),a.jsxs("div",{ref:Se,className:"relative z-40",children:[a.jsxs("div",{className:"hidden md:flex space-x-2",children:[!(x.isActive===!1&&!mi(x.endDate))&&a.jsxs(ut,{variant:"gold",onClick:s,className:"flex items-center",children:[a.jsx(rh,{className:"h-4 w-4 mr-2"}),mi(x.endDate)?"Final Results":"Current Results"]}),a.jsxs(ut,{variant:"primary",onClick:()=>gt(!0),className:"flex items-center",children:[a.jsx(_n,{className:"h-4 w-4 mr-2"}),"Edit Session"]})]}),a.jsx("div",{className:"flex md:hidden",children:a.jsx("button",{onClick:()=>pe(!je),className:"p-2 rounded-md border border-gray-200 bg-white shadow-sm","aria-label":"Open session actions menu",children:a.jsx(Ys,{className:"h-5 w-5 text-gray-700"})})}),je&&a.jsx("div",{className:"absolute right-0 mt-2 w-56 bg-white border border-gray-200 rounded-lg shadow-lg md:hidden z-50",children:a.jsxs("div",{className:"py-1",children:[!(x.isActive===!1&&!mi(x.endDate))&&a.jsxs("button",{onClick:()=>{pe(!1),s()},className:"w-full px-3 py-2 flex items-center text-left hover:bg-gray-50",children:[a.jsx(rh,{className:"h-4 w-4 mr-2 text-gray-700"}),mi(x.endDate)?"Final Results":"Current Results"]}),a.jsxs("button",{onClick:()=>{pe(!1),gt(!0)},className:"w-full px-3 py-2 flex items-center text-left hover:bg-gray-50",children:[a.jsx(_n,{className:"h-4 w-4 mr-2 text-gray-700"}),"Edit Session"]})]})})]})]}),$s&&a.jsx("p",{className:"text-xs text-gray-500 mb-4",children:"Loading products"}),or&&a.jsx("p",{className:"text-xs text-[#591D0F] mb-4",children:or}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4",children:[a.jsxs("div",{children:[a.jsx("h3",{className:"text-sm font-medium text-gray-700 mb-1",children:"Voting Period"}),a.jsxs("p",{className:`text-[#2D4660] font-medium ${x.originalEndDate?"line-through text-gray-400":""}`,children:[Qi(x.startDate)," - ",Qi(x.originalEndDate||x.endDate)]}),x.originalEndDate&&x.endedEarlyBy&&a.jsxs("div",{className:"flex items-center mt-1 text-xs text-[#591D0F]",children:[a.jsxs("span",{children:["Ended Early by ",x.endedEarlyBy]}),x.endedEarlyReason&&a.jsxs("div",{className:"group relative ml-1",children:[a.jsx(nr,{className:"h-3 w-3 cursor-help"}),a.jsxs("div",{className:"absolute bottom-full left-1/2 -translate-x-1/2 mb-2 px-3 py-2 bg-gray-900 text-white text-xs rounded-lg opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-200 whitespace-nowrap z-10 pointer-events-none max-w-xs",children:[a.jsxs("div",{className:"font-semibold mb-1",children:["Reason: ",x.endedEarlyReason]}),x.endedEarlyDetails&&a.jsx("div",{className:"whitespace-normal",children:x.endedEarlyDetails}),a.jsx("div",{className:"absolute top-full left-1/2 -translate-x-1/2 -mt-1 border-4 border-transparent border-t-gray-900"})]})]})]})]}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-sm font-medium text-gray-700 mb-1",children:"Votes Per User"}),a.jsx("p",{className:"text-[#2D4660] font-medium",children:x.useAutoVotes?`${Math.max(1,Math.floor(e.length/2))} (Auto: ${e.length} features  2)`:x.votesPerUser})]}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-sm font-medium text-gray-700 mb-1",children:"Status"}),a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center",children:[a.jsx(wm,{className:"h-4 w-4 mr-1 text-gray-600"}),de]}),(x.isActive||mi(x.endDate))&&a.jsx(ut,{variant:x.isActive?"danger":"primary",onClick:()=>{x.isActive?Mt(!0):(qr(),Qt(!0))},className:"text-xs px-2 py-1 ml-2",children:x.isActive?"End Early":"Reopen"})]})]})]}),a.jsx("div",{className:"pt-3 border-t border-gray-200",children:a.jsxs("div",{className:"relative overflow-hidden rounded-2xl border border-[#C89212]/30 bg-gradient-to-r from-[#FFF6E3] via-[#FFF9ED] to-white shadow-sm p-5 md:p-6",children:[a.jsx("span",{className:"pointer-events-none absolute -top-10 left-4 h-32 w-32 rounded-full bg-[#C89212]/25 blur-3xl"}),a.jsx("span",{className:"pointer-events-none absolute -bottom-16 right-6 h-40 w-40 rounded-full bg-[#F4C66C]/20 blur-3xl"}),a.jsx("span",{className:"pointer-events-none absolute top-6 right-10 text-[#F4B400] text-xl animate-ping",children:""}),a.jsx("span",{className:"pointer-events-none absolute bottom-8 left-10 text-[#C89212] text-lg animate-pulse",children:""}),a.jsxs("div",{className:"relative flex flex-col gap-6 md:flex-row md:items-start md:justify-between",children:[a.jsxs("div",{className:"flex items-start gap-5 md:pr-8 lg:pr-12",children:[a.jsxs("div",{className:"relative",children:[a.jsx("div",{className:"h-16 w-16 md:h-20 md:w-20 rounded-full bg-white shadow-lg shadow-[#C89212]/30 border border-[#C89212]/40 flex items-center justify-center text-[#C89212]",children:a.jsx(SF,{className:"h-8 w-8 md:h-10 md:w-10"})}),a.jsx("span",{className:"pointer-events-none absolute -top-3 -left-2 text-[#C89212] text-base animate-ping",children:""}),a.jsx("span",{className:"pointer-events-none absolute bottom-0 -right-3 text-[#F5D79E] text-xl animate-pulse",children:""})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-xs font-semibold uppercase tracking-[0.2em] text-[#C89212]/80 mb-1",children:"Session Goal"}),a.jsx("h3",{className:"text-lg md:text-xl font-semibold text-[#2D4660] leading-relaxed",children:x.goal})]})]}),a.jsxs("div",{className:"md:w-80 lg:w-96 rounded-xl border border-white/70 bg-white/80 backdrop-blur-sm shadow-inner p-4",children:[a.jsxs("div",{className:"flex items-center justify-between mb-3",children:[a.jsx("h3",{className:"text-sm font-semibold text-[#2D4660]",children:"Status Notes"}),ue.length>2&&a.jsxs("span",{className:"inline-flex items-center justify-between text-xs text-[#1E5461] w-[90px]",children:[a.jsx("span",{className:"flex items-center justify-center w-4 h-4 border border-current rounded",children:wr?a.jsx(Mu,{className:"h-2.5 w-2.5"}):a.jsx(Mn,{className:"h-2.5 w-2.5"})}),a.jsx("button",{type:"button",onClick:()=>Vn(D=>!D),className:"ml-1 hover:text-[#173B65] transition-colors text-left flex-1",children:wr?"Show Less":"Show More"})]})]}),ue.length>0?a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"space-y-3",children:ue.slice(0,wr?ue.length:2).map(D=>{const _e=D.type==="reopen"?tl:nr;return a.jsxs("div",{className:`flex items-start gap-3 text-sm ${D.textColorClass}`,children:[a.jsx("div",{className:`mt-0.5 flex items-center justify-center w-8 h-8 ${D.iconBgClass} ${D.iconBorderClass} border rounded-lg`,children:a.jsx(_e,{className:`h-3.5 w-3.5 ${D.iconColorClass}`})}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold text-gray-800",children:D.title}),a.jsx("p",{className:"text-xs text-gray-600 leading-relaxed",children:D.description})]})]},D.id)})}),ue.length>2&&!wr&&a.jsx("p",{className:"text-xs text-gray-500 mt-3",children:'Showing newest notes. Select "Show More" to view all updates.'})]}):a.jsx("p",{className:"text-sm text-gray-500",children:"No status updates yet."})]})]})]})})]})]}),a.jsxs("div",{className:"relative bg-white rounded-lg shadow-md p-4 mb-6",children:[a.jsx("div",{className:"flex items-center justify-between mb-4",children:a.jsxs("div",{className:"flex items-center",children:[a.jsx("img",{src:Z2,alt:"Azure DevOps logo",className:"h-5 w-5 mr-2"}),a.jsx("h2",{className:"text-xl font-semibold text-[#2D4660]",children:"Azure DevOps Integration"})]})}),w.enabled?a.jsxs("div",{className:"space-y-4",children:[a.jsx("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:gap-4",children:[a.jsx(Yr,{className:"h-5 w-5 text-green-600 mr-2"}),a.jsxs("div",{className:"flex flex-col gap-2",children:[a.jsxs("div",{className:"flex flex-wrap items-center gap-x-2 text-sm text-green-700",children:[a.jsx("span",{className:"font-medium text-green-900",children:"Connected to Azure DevOps"}),a.jsx("span",{className:"hidden sm:inline mx-1 text-green-500",children:""}),a.jsxs("span",{children:[a.jsx("span",{className:"font-medium",children:"Organization:"})," ",w.organization]}),a.jsx("span",{className:"hidden sm:inline mx-1 text-green-500",children:""}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"font-medium",children:"Project:"}),a.jsx("div",{className:"min-w-[150px]",children:a.jsx(eC,{options:he,value:Re,onChange:Ms,variant:"green"})})]}),w.lastSyncTime&&a.jsxs(a.Fragment,{children:[a.jsx("span",{className:"hidden sm:inline mx-1 text-green-500",children:""}),a.jsxs("span",{children:[a.jsx("span",{className:"font-medium",children:"Last Sync:"})," ",Qi(w.lastSyncTime)]})]})]}),a.jsx("span",{className:"text-xs text-green-700",children:"Switching projects will clear the filters below."})]})]}),a.jsxs("button",{onClick:_,className:"text-sm text-[#591D0F] hover:text-[#6A4234] font-medium flex items-center",children:[a.jsx(Js,{className:"h-4 w-4 mr-1"}),"Disconnect"]})]})}),a.jsx(dZ,{config:w,onUpdateConfig:b,onPreview:S,isFetching:E,availableStates:T,availableAreaPaths:P,availableTags:F,previewFeatures:H,showPreviewModal:L,onFetchStatesForType:ne,onFetchAreaPathsForTypeAndState:ie,onFetchTagsForTypeStateAndAreaPath:oe,onFetchTypesAndStatesForAreaPath:V,onFetchTypesAndStatesForTags:Z,onFetchTypesAndAreaPathsForStates:ee,resetSignal:G})]}):a.jsxs("div",{className:"bg-gray-50 rounded-lg p-6 text-center border border-dashed border-gray-300",children:[a.jsx("img",{src:Z2,alt:"Azure DevOps logo",className:"h-10 w-10 mx-auto mb-3 opacity-80"}),a.jsx("h3",{className:"text-lg font-medium text-gray-700 mb-2",children:"Not Connected"}),a.jsx("p",{className:"text-gray-600 mb-4",children:"Connect to Azure DevOps to import work items as features for voting."}),a.jsx(ut,{variant:"primary",onClick:()=>It("newmill",Re||he[0]||"Product"),className:"inline-flex items-center",disabled:E,children:E?a.jsxs(a.Fragment,{children:[a.jsx(tl,{className:"h-4 w-4 mr-2 animate-spin"}),"Connecting..."]}):a.jsxs(a.Fragment,{children:[a.jsx(_n,{className:"h-4 w-4 mr-2"}),"Connect to Azure DevOps"]})}),C&&a.jsx("p",{className:"mt-3 text-sm text-[#591D0F]",children:C})]})]}),a.jsxs("div",{className:"relative bg-white rounded-lg shadow-md p-4 mb-6",children:[a.jsxs("div",{className:"flex flex-wrap justify-between items-center gap-2 mb-4",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"text-xl font-semibold text-[#2D4660]",children:"Suggested Features"}),a.jsx("p",{className:"text-sm text-gray-600",children:"Ideas submitted from the voting experience for future consideration."})]}),a.jsxs("span",{className:"inline-flex items-center px-3 py-1 rounded-full bg-[#1E5461]/10 text-[#1E5461] text-sm font-medium",children:[re.length," ",re.length===1?"suggestion":"suggestions"]})]}),re.length===0?a.jsx("div",{className:"bg-gray-50 border border-dashed border-gray-200 rounded-lg p-6 text-center text-gray-500 text-sm",children:'No feature suggestions have been submitted yet. Encourage voters to use the "Suggest a Feature" button in the voting experience.'}):a.jsx("div",{className:"space-y-4 max-h-[360px] overflow-y-auto pr-1",children:re.map(D=>{const _e=D.requester_name||D.requester_email||"Anonymous";return a.jsx("div",{className:"border border-gray-200 rounded-lg p-4 hover:border-[#1E5461]/40 transition-colors",children:a.jsxs("div",{className:"flex flex-col gap-4",children:[a.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4",children:[a.jsxs("div",{className:"md:flex-1",children:[a.jsx("h3",{className:"text-lg font-semibold text-[#2D4660]",children:D.title}),a.jsxs("p",{className:"text-xs text-gray-500 mt-[14px]",children:["Submitted by ",a.jsx("span",{className:"font-medium text-[#1E5461]",children:_e}),D.requester_email&&a.jsxs(a.Fragment,{children:[" ","(",a.jsx("a",{href:`mailto:${D.requester_email}`,className:"text-[#1E5461] hover:underline",children:D.requester_email}),")"]})," on ",Qi(D.created_at)]})]}),a.jsxs("div",{className:"flex flex-col items-end gap-2 self-start md:min-w-[360px]",children:[a.jsxs("div",{className:"flex flex-wrap justify-end gap-2",children:[a.jsxs(ut,{variant:"primary",onClick:()=>{Ht(null),xt(D)},className:"text-xs px-3 py-1 flex items-center",children:[a.jsx(IM,{className:"h-3.5 w-3.5 mr-2"}),"Move to Current Session"]}),a.jsxs(ut,{variant:"secondary",onClick:()=>{me.length>0&&Dr(D)},disabled:me.length===0,className:"text-xs px-3 py-1 flex items-center",children:[a.jsx(Zr,{className:"h-3.5 w-3.5 mr-2"}),"Move to Future Session"]}),a.jsxs(ut,{variant:"secondary",onClick:()=>ft(D),className:"text-xs px-3 py-1 flex items-center",children:[a.jsx(Wu,{className:"h-3.5 w-3.5 mr-2"}),"Edit"]}),a.jsxs(ut,{variant:"danger",onClick:()=>{Br(null),xr(D)},className:"text-xs px-3 py-1 flex items-center",children:[a.jsx(Li,{className:"h-3.5 w-3.5 mr-2"}),"Delete"]})]}),me.length===0&&a.jsx("p",{className:"text-xs text-gray-500 text-right",children:"No upcoming sessions are available yet. Create a future session to enable this action."})]})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3",children:[a.jsxs("div",{className:"border border-gray-200 rounded-lg p-3 bg-gray-50 max-h-48 overflow-y-auto",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[a.jsx(nr,{className:"h-4 w-4 text-[#2D4660]"}),a.jsx("p",{className:"text-sm font-semibold text-[#2D4660]",children:"Problem it solves"})]}),a.jsx("p",{className:"text-sm text-gray-700 whitespace-pre-line",children:D.summary&&D.summary.length>0?D.summary:"No summary provided."})]}),a.jsxs("div",{className:"border border-gray-200 rounded-lg p-3 bg-gray-50 max-h-48 overflow-y-auto",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[a.jsx(hx,{className:"h-4 w-4 text-[#2D4660]"}),a.jsx("p",{className:"text-sm font-semibold text-[#2D4660]",children:"What would it do?"})]}),a.jsx("p",{className:"text-sm text-gray-700 whitespace-pre-line",children:D.whatWouldItDo&&D.whatWouldItDo.length>0?D.whatWouldItDo:"No details provided."})]}),a.jsxs("div",{className:"border border-gray-200 rounded-lg p-3 bg-gray-50 max-h-48 overflow-y-auto",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[a.jsx(PF,{className:"h-4 w-4 text-[#2D4660]"}),a.jsx("p",{className:"text-sm font-semibold text-[#2D4660]",children:"How would it work?"})]}),a.jsx("p",{className:"text-sm text-gray-700 whitespace-pre-line",children:D.howWouldItWork&&D.howWouldItWork.length>0?D.howWouldItWork:"No implementation details provided."})]})]})]})},D.id)})})]}),a.jsxs("div",{className:"relative bg-white rounded-lg shadow-md p-4 mb-6",children:[a.jsxs("div",{className:"flex justify-between items-center mb-4",children:[a.jsx("h2",{className:"text-xl font-semibold text-[#2D4660]",children:"Feature Management"}),a.jsxs(ut,{variant:"gold",onClick:()=>d(!0),className:"flex items-center w-44",children:[a.jsx(Mn,{className:"mr-2 h-4 w-4"}),"Add Feature"]})]}),a.jsx("div",{className:"w-full overflow-x-auto",children:a.jsxs("table",{className:"min-w-full divide-y divide-gray-200 table-fixed",children:[a.jsx("thead",{className:"bg-gray-50",children:a.jsxs("tr",{children:[a.jsx("th",{scope:"col",className:"w-[20%] px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Title"}),a.jsx("th",{scope:"col",className:"hidden lg:table-cell w-[25%] px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Description"}),a.jsx("th",{scope:"col",className:"hidden md:table-cell w-[10%] px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Epic"}),a.jsx("th",{scope:"col",className:"hidden md:table-cell w-[8%] px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"State"}),a.jsx("th",{scope:"col",className:"hidden lg:table-cell w-[12%] px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Area Path"}),a.jsx("th",{scope:"col",className:"hidden xl:table-cell w-[10%] px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Tags"}),a.jsx("th",{scope:"col",className:"w-[8%] px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Votes"}),a.jsx("th",{scope:"col",className:"w-[7%] px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),a.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:e.map(D=>a.jsxs("tr",{className:"align-top group",children:[a.jsx("td",{className:"px-4 py-4 whitespace-normal break-words text-sm font-medium text-left",children:a.jsxs("div",{className:"max-w-xs overflow-hidden text-left",children:[D.title,D.azureDevOpsId&&a.jsx("div",{className:"mt-1",children:a.jsx(cm,{id:D.azureDevOpsId,url:D.azureDevOpsUrl||""})})]})}),a.jsx("td",{className:"hidden lg:table-cell px-4 py-4 text-sm text-gray-500 text-left",children:a.jsx("div",{className:"max-w-md overflow-hidden break-words text-left",children:D.description||a.jsx("span",{className:"italic text-gray-400",children:"No description provided"})})}),a.jsx("td",{className:"hidden md:table-cell px-4 py-4 whitespace-nowrap text-sm",children:D.epic&&a.jsx(xc,{name:D.epic})}),a.jsx("td",{className:"hidden md:table-cell px-4 py-4 whitespace-nowrap text-sm",children:D.state&&a.jsx("span",{className:"px-2 py-1 text-xs font-medium bg-[#1E5461]/10 text-[#1E5461] rounded",children:D.state})}),a.jsx("td",{className:"hidden lg:table-cell px-4 py-4 text-sm",children:a.jsx("div",{className:"text-gray-600",children:D.areaPath&&typeof D.areaPath=="string"&&D.areaPath.trim()!==""?a.jsx("div",{className:"max-w-xs break-words",children:D.areaPath}):a.jsx("span",{className:"text-gray-400",children:"-"})})}),a.jsx("td",{className:"hidden xl:table-cell px-4 py-4 text-sm",children:D.tags&&D.tags.length>0?a.jsxs("div",{className:"flex flex-wrap gap-1",children:[D.tags.slice(0,3).map((_e,Ae)=>a.jsx("span",{className:"px-2 py-0.5 text-xs bg-gray-100 text-gray-700 rounded",children:_e},Ae)),D.tags.length>3&&a.jsxs("span",{className:"px-2 py-0.5 text-xs text-gray-500",children:["+",D.tags.length-3]})]}):a.jsx("span",{className:"text-gray-400",children:"-"})}),a.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm",children:D.votes}),a.jsxs("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-gray-500 space-x-3 md:opacity-0 md:group-hover:opacity-100 transition-opacity",children:[a.jsx("button",{onClick:()=>f(D),className:"text-[#2D4660] hover:text-[#C89212] inline-block cursor-pointer",title:"Edit Feature",children:a.jsx(Wu,{className:"h-5 w-5"})}),a.jsx("button",{onClick:()=>n(D.id),className:"text-[#2D4660] hover:text-[#591D0F] inline-block cursor-pointer",title:"Delete Feature",children:a.jsx(Li,{className:"h-5 w-5"})})]})]},D.id))})]})})]}),a.jsx(as,{isOpen:qe!==null,onClose:()=>{bt||(xt(null),Ht(null))},title:"Move Suggestion to Current Session",children:a.jsxs("div",{className:"space-y-4",children:[a.jsxs("p",{className:"text-sm text-gray-700",children:["Move ",a.jsx("span",{className:"font-semibold text-[#2D4660]",children:qe==null?void 0:qe.title})," into the current session so it can be managed and voted on."]}),hr&&a.jsx("div",{className:"bg-[#591D0F]/5 border border-[#591D0F]/20 text-[#591D0F] text-sm rounded-md px-3 py-2",children:hr}),a.jsxs("div",{className:"flex justify-end gap-2",children:[a.jsx(ut,{variant:"secondary",onClick:()=>{bt||(xt(null),Ht(null))},disabled:bt,children:"Cancel"}),a.jsx(ut,{variant:"primary",onClick:ze,disabled:bt,children:bt?"Moving...":"Move to Current Session"})]})]})}),a.jsx(as,{isOpen:Ir!==null,onClose:()=>{st||(Dr(null),Ur(null))},title:"Move to Future Session",children:a.jsxs("div",{className:"space-y-4",children:[a.jsxs("p",{className:"text-sm text-gray-700",children:["Choose the upcoming session where you would like to queue ",a.jsx("span",{className:"font-semibold text-[#2D4660]",children:Ir==null?void 0:Ir.title}),"."]}),me.length>0?a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Destination Session"}),a.jsx("select",{value:zt,onChange:D=>nn(D.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md text-sm bg-white",disabled:st,children:me.map(D=>a.jsxs("option",{value:D.id,children:[D.title," (Starts ",Qi(D.startDate),")"]},D.id))})]}):a.jsx("div",{className:"bg-[#1E5461]/5 border border-[#1E5461]/20 text-[#1E5461] text-sm rounded-md px-3 py-2",children:"No future sessions are available yet. Create a new session to enable this action."}),ar&&a.jsx("div",{className:"bg-[#591D0F]/5 border border-[#591D0F]/20 text-[#591D0F] text-sm rounded-md px-3 py-2",children:ar}),a.jsxs("div",{className:"flex justify-end gap-2",children:[a.jsx(ut,{variant:"secondary",onClick:()=>{st||(Dr(null),Ur(null))},disabled:st,children:"Cancel"}),a.jsx(ut,{variant:"primary",onClick:wt,disabled:st||me.length===0,children:st?"Moving...":"Move to Session"})]})]})}),a.jsx(as,{isOpen:Ut!==null,onClose:()=>{pr||(Kt(null),sn(null))},title:"Edit Suggested Feature",children:a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Title"}),a.jsx("input",{type:"text",value:mr.title,onChange:D=>Rr(_e=>({..._e,title:D.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md",disabled:pr})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Problem it solves"}),a.jsx("textarea",{value:mr.summary,onChange:D=>Rr(_e=>({..._e,summary:D.target.value})),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-md",disabled:pr})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"What would it do?"}),a.jsx("textarea",{value:mr.whatWouldItDo,onChange:D=>Rr(_e=>({..._e,whatWouldItDo:D.target.value})),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-md",disabled:pr})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"How would it work?"}),a.jsx("textarea",{value:mr.howWouldItWork,onChange:D=>Rr(_e=>({..._e,howWouldItWork:D.target.value})),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-md",disabled:pr})]}),ws&&a.jsx("div",{className:"bg-[#591D0F]/5 border border-[#591D0F]/20 text-[#591D0F] text-sm rounded-md px-3 py-2",children:ws}),a.jsxs("div",{className:"flex justify-end gap-2",children:[a.jsx(ut,{variant:"secondary",onClick:()=>{pr||(Kt(null),sn(null))},disabled:pr,children:"Cancel"}),a.jsx(ut,{variant:"primary",onClick:Ot,disabled:pr,children:pr?"Saving...":"Save Changes"})]})]})}),a.jsx(as,{isOpen:an!==null,onClose:()=>{ir||(xr(null),Br(null))},title:"Delete Suggested Feature",children:a.jsxs("div",{className:"space-y-4",children:[a.jsxs("p",{className:"text-sm text-gray-700",children:["Are you sure you want to delete ",a.jsx("span",{className:"font-semibold text-[#591D0F]",children:an==null?void 0:an.title}),"? This action cannot be undone."]}),Gt&&a.jsx("div",{className:"bg-[#591D0F]/5 border border-[#591D0F]/20 text-[#591D0F] text-sm rounded-md px-3 py-2",children:Gt}),a.jsxs("div",{className:"flex justify-end gap-2",children:[a.jsx(ut,{variant:"secondary",onClick:()=>{ir||(xr(null),Br(null))},disabled:ir,children:"Cancel"}),a.jsx(ut,{variant:"danger",onClick:qt,disabled:ir,children:ir?"Deleting...":"Delete"})]})]})}),a.jsx(as,{isOpen:u,onClose:()=>d(!1),title:"Add New Feature",children:a.jsx(rC,{onSubmit:D=>{t(D),d(!1)},onCancel:()=>d(!1)})}),a.jsx(as,{isOpen:m!==null,onClose:()=>f(null),title:"Edit Feature",children:m&&a.jsx(rC,{feature:m,onSubmit:D=>{r({...m,...D}),f(null)},onCancel:()=>f(null)})}),a.jsx(as,{isOpen:Je,onClose:()=>gt(!1),title:"Edit Session Settings",children:a.jsx(fZ,{session:x,featureCount:e.length,onSubmit:xe,onCancel:()=>gt(!1),onRequestDeleteSession:Rt,isDeletingSession:l,productName:dr,products:yn,isLoadingProducts:$s,productError:or,onRequestDeleteProduct:D=>ln(D),onProductColorUpdated:async()=>{const D=(le==null?void 0:le.tenant_id)??(le==null?void 0:le.tenantId)??null;if(D)try{const _e=await xa(D);_r(_e)}catch(_e){console.error("Error refreshing products after color update:",_e)}}})}),Et&&a.jsxs(as,{isOpen:!0,onClose:()=>ln(null),title:"Delete Product",children:[a.jsxs("p",{className:"text-sm text-gray-700 mb-4",children:["Are you sure you want to delete ",a.jsx("span",{className:"font-semibold",children:Et.name}),"? This will remove it for everyone in your tenant."]}),a.jsxs("div",{className:"flex justify-end gap-3",children:[a.jsx(ut,{variant:"secondary",onClick:()=>ln(null),disabled:Vr,children:"Cancel"}),a.jsx(ut,{variant:"danger",onClick:cn,disabled:Vr,children:Vr?"Deleting...":"Delete"})]})]}),a.jsx(as,{isOpen:L,onClose:()=>q(!1),title:"Preview Azure DevOps Features",maxWidth:"max-w-4xl",children:a.jsx("div",{className:"space-y-4",children:H&&H.length>0?a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"bg-[#1E5461]/5 border border-[#1E5461]/20 rounded-lg p-4",children:a.jsx("p",{className:"text-[#1E5461] font-medium",children:"Review the work items below. If they look correct, add them to your voting session."})}),a.jsx("div",{className:"max-h-96 overflow-y-auto",children:a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:H.map(D=>a.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-4 shadow-sm hover:shadow-md transition-shadow",children:[a.jsx("div",{className:"mb-3",children:a.jsx("h4",{className:"text-base font-semibold text-gray-900",children:D.title})}),D.workItemType!=="Feature"&&D.epic&&a.jsxs("div",{className:"mb-3",children:[a.jsx("p",{className:"text-xs text-gray-500 mb-1",children:"Epic"}),a.jsx(xc,{name:D.epic})]}),D.description&&D.description.trim()!==""?a.jsxs("div",{className:"mb-3",children:[a.jsx("p",{className:"text-xs text-gray-500 mb-1",children:"Description"}),a.jsx("p",{className:"text-xs text-gray-700 line-clamp-3",children:D.description})]}):null,D.state&&a.jsxs("div",{className:"mb-3",children:[a.jsx("p",{className:"text-xs text-gray-500 mb-1",children:"State"}),a.jsx("span",{className:"px-2 py-1 text-xs font-medium bg-[#1E5461]/10 text-[#1E5461] rounded",children:D.state})]}),D.workItemType==="Feature"&&D.epic&&a.jsxs("div",{className:"mb-3",children:[a.jsx("p",{className:"text-xs text-gray-500 mb-1",children:"Epic"}),a.jsx(xc,{name:D.epic})]}),a.jsxs("div",{className:"mb-3",children:[a.jsx("p",{className:"text-xs text-gray-500 mb-1",children:"Work Item Type"}),a.jsxs("div",{className:"flex items-center gap-2",children:[D.workItemType&&a.jsx("span",{className:"px-2 py-1 text-xs font-medium bg-[#492434]/10 text-[#492434] rounded",children:D.workItemType}),D.azureDevOpsId&&a.jsx(cm,{id:D.azureDevOpsId,url:D.azureDevOpsUrl||""})]})]}),D.areaPath&&a.jsxs("div",{children:[a.jsx("p",{className:"text-xs text-gray-500 mb-1",children:"Area Path"}),a.jsx("p",{className:"text-xs text-gray-700 break-words",children:D.areaPath})]}),D.tags&&D.tags.length>0&&a.jsxs("div",{className:"mt-2 pt-2 border-t border-gray-100",children:[a.jsx("p",{className:"text-xs text-gray-500 mb-1",children:"Tags"}),a.jsx("div",{className:"flex flex-wrap gap-1",children:D.tags.map((_e,Ae)=>a.jsx("span",{className:"px-2 py-0.5 text-xs bg-gray-100 text-gray-700 rounded",children:_e},Ae))})]})]},D.id))})}),a.jsxs("div",{className:"flex justify-end space-x-2 pt-4 border-t",children:[a.jsx(ut,{variant:"secondary",onClick:()=>q(!1),children:"Cancel"}),a.jsxs(ut,{variant:"primary",onClick:async()=>{await z(!1),q(!1)},className:"flex items-center",children:[a.jsx(Mn,{className:"h-4 w-4 mr-2"}),"Add ",H.length," Feature",H.length!==1?"s":""]}),a.jsxs(ut,{variant:"danger",onClick:async()=>{await z(!0),q(!1)},className:"flex items-center",children:[a.jsx(tl,{className:"h-4 w-4 mr-2"}),"Replace All Features"]})]})]}):a.jsxs("div",{className:"text-center py-8",children:[a.jsx(nr,{className:"h-12 w-12 text-gray-400 mx-auto mb-3"}),a.jsx("p",{className:"text-gray-600",children:"No features found to sync"})]})})}),a.jsx(as,{isOpen:Dt,onClose:()=>{Qt(!1),qr()},title:"Reopen Session",children:a.jsxs("form",{onSubmit:Si(ct),className:"space-y-4",children:[a.jsx("p",{className:"text-gray-600",children:"Capture a brief note so other admins understand why this session is being reopened."}),a.jsx(dc,{control:Vi,name:"reason",rules:{required:"Please select a reason"},render:({field:D})=>a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Reason *"}),a.jsx(eC,{options:uZ,value:D.value,onChange:D.onChange,placeholder:"Select a reason..."}),X.reason&&a.jsx("p",{className:"mt-1 text-sm text-[#591D0F]",children:X.reason.message})]})}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Additional Details (Optional)"}),a.jsx("textarea",{...si("details"),rows:3,placeholder:"Add any context you'd like to share with other admins...",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-[#2D4660] focus:border-transparent"})]}),a.jsx("div",{className:"bg-[#1E5461]/5 border border-[#1E5461]/20 rounded-lg p-3 text-sm text-[#1E5461]",children:"This information will appear in the Current Session summary so every admin sees why voting resumed."}),a.jsxs("div",{className:"flex justify-end space-x-2 pt-4",children:[a.jsx(ut,{variant:"secondary",type:"button",onClick:()=>{Qt(!1),qr()},children:"Cancel"}),a.jsx(ut,{variant:"primary",type:"submit",children:"Save & Reopen"})]})]})}),a.jsx(as,{isOpen:_t,onClose:()=>{Mt(!1),ji()},title:"End Session Early",children:a.jsxs("form",{onSubmit:Ls(be),className:"space-y-4",children:[a.jsx("p",{className:"text-gray-600",children:"You are about to end this voting session early. Please select a reason:"}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Reason *"}),a.jsxs("select",{...Fs("reason",{required:"Please select a reason"}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-[#2D4660] focus:border-transparent",children:[a.jsx("option",{value:"",children:"Select a reason..."}),a.jsx("option",{value:"Sufficient Responses",children:"Sufficient responses received"}),a.jsx("option",{value:"Project Cancelled",children:"Project or initiative cancelled"}),a.jsx("option",{value:"Timeline Changed",children:"Timeline or priorities changed"}),a.jsx("option",{value:"Technical Issues",children:"Technical issues or data concerns"}),a.jsx("option",{value:"Stakeholder Request",children:"Stakeholder request"}),a.jsx("option",{value:"Low Participation",children:"Low participation rate"}),a.jsx("option",{value:"Other",children:"Other"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Additional Details (Optional)"}),a.jsx("textarea",{...Fs("details"),rows:3,placeholder:"Add any additional context or notes...",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-[#2D4660] focus:border-transparent"})]}),a.jsxs("div",{className:"bg-[#C89212]/5 border border-[#C89212]/20 rounded-lg p-3 text-sm text-[#6A4234]",children:[a.jsx("p",{className:"font-medium mb-1",children:"Note:"}),a.jsx("p",{children:"Ending the session will close voting immediately. This action will be logged and visible to all admins."})]}),a.jsxs("div",{className:"flex justify-end space-x-2 pt-4",children:[a.jsx(ut,{variant:"secondary",type:"button",onClick:()=>{Mt(!1),ji()},children:"Cancel"}),a.jsx(ut,{variant:"danger",type:"submit",children:"End Session Now"})]})]})}),bs&&a.jsx(as,{isOpen:!0,onClose:()=>{Vt(null),we(""),setEditingProductColor(null),Ve(!1)},title:"Edit Product",children:a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Product Name *"}),a.jsx("input",{type:"text",value:Q,onChange:D=>we(D.target.value),placeholder:"Enter product name",className:"w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-0 focus:border-[#2D4660]"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Product Color"}),a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("button",{type:"button",onClick:()=>{yt(editingProductColor||"#2D4660"),Ve(!0)},className:"block w-12 h-12 rounded-md border-2 border-gray-300 hover:border-gray-400 transition-all flex items-center justify-center overflow-hidden",style:editingProductColor?{backgroundColor:editingProductColor}:{backgroundColor:"#ffffff"},children:!editingProductColor&&a.jsx("img",{src:"/colorpicker.png",alt:"Color Picker",className:"w-8 h-8 object-contain"})}),a.jsx("span",{className:"text-sm text-gray-600",children:editingProductColor||"No color selected"})]})]}),a.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t",children:[a.jsx(ut,{variant:"secondary",onClick:()=>{Vt(null),we(""),setEditingProductColor(null),Ve(!1)},disabled:$e,children:"Cancel"}),a.jsx(ut,{variant:"primary",onClick:async()=>{if(!(!(bs!=null&&bs.id)||!Q.trim())){Oe(!0);try{await lx(bs.id,{name:Q.trim(),color_hex:editingProductColor});const D=(le==null?void 0:le.tenant_id)??(le==null?void 0:le.tenantId);if(D){const _e=await xa(D);_r(_e.sort((Ae,Qe)=>Ae.name.localeCompare(Qe.name)))}Vt(null),we(""),setEditingProductColor(null),Ve(!1),onProductColorUpdated&&onProductColorUpdated()}catch(D){console.error("Error updating product:",D),alert("Failed to update product. Please try again.")}finally{Oe(!1)}}},disabled:$e||!Q.trim(),children:$e?"Updating...":"Update Product"})]})]})}),Xe&&a.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",onClick:()=>Ve(!1),children:a.jsx("div",{className:"bg-white rounded-lg shadow-xl px-3 py-2 w-auto mx-4",onClick:D=>D.stopPropagation(),children:a.jsxs("div",{className:"flex gap-3 items-stretch",children:[a.jsxs("div",{className:"flex-shrink-0",style:{width:"240px",height:"260px"},children:[a.jsx("input",{id:"edit-native-color-input",type:"color",value:At,onChange:D=>yt(D.target.value),ref:D=>{D&&Xe&&setTimeout(()=>D.click(),50)},className:"opacity-0 absolute",style:{width:"1px",height:"1px"}}),a.jsx("div",{className:"w-full h-full"})]}),a.jsxs("button",{type:"button",onClick:()=>{setEditingProductColor(At),Ve(!1)},className:"px-6 rounded-lg text-white font-bold shadow-lg hover:shadow-xl transition-all flex flex-col items-center justify-center gap-3 text-lg flex-shrink-0",style:{backgroundColor:At,height:"260px",minWidth:"100px"},children:[a.jsx(Yr,{className:"h-8 w-8"}),a.jsxs("div",{className:"text-center leading-tight",children:[a.jsx("div",{children:"Looks"}),a.jsx("div",{children:"Good"})]})]})]})})})]})}const tC=["User Experience","Vendor Management","Analytics & Reporting","Operational Efficiency","Compliance & Risk","Mobile Access","Integration","Sustainability","Budget Management"],mZ={title:"Q2 Product Roadmap",goal:"Prioritize features for the Purchasing Dashboard redesign",votesPerUser:10,useAutoVotes:!0,startDate:new Date().toISOString(),endDate:new Date(Date.now()+10080*60*1e3).toISOString(),isActive:!0,originalEndDate:null,endedEarlyBy:null,endedEarlyReason:null,endedEarlyDetails:null,reopenReason:null,reopenDetails:null,reopenedBy:null,reopenedAt:null,productId:null,productName:null,product_id:null,product_name:null},pZ={organization:"newmill",project:"Product",enabled:!1,workItemType:"Feature"},gZ=[{id:"u1",name:"John Doe",email:"john@example.com",totalVotes:10,usedVotes:0,votesPerFeature:{}},{id:"u2",name:"Jane Smith",email:"jane@example.com",totalVotes:10,usedVotes:0,votesPerFeature:{}},{id:"u3",name:"Robert Johnson",email:"robert@example.com",totalVotes:10,usedVotes:0,votesPerFeature:{}}],vI=(e,t,r)=>e?{label:"System Admin",className:"bg-purple-100 text-purple-800"}:t?{label:"Session Admin",className:"bg-blue-100 text-blue-800"}:r?{label:"Stakeholder",className:"bg-green-100 text-green-800"}:null,xI=e=>{const t=new Date(e),r=new Date;t.setHours(0,0,0,0),r.setHours(0,0,0,0);const n=t.getTime()-r.getTime();return Math.ceil(n/(1e3*60*60*24))},wI=e=>e<=0?"text-[#591D0F]":e<=2?"text-[#6A4234]":e<=4?"text-[#C89212]":"text-[#1E5461]",bI=e=>e<=0?"bg-[#591D0F]/10":e<=2?"bg-[#6A4234]/10":e<=4?"bg-[#C89212]/10":"bg-[#1E5461]/10",yZ=(e,t)=>{const r=new Date(e),n=new Date(t),s=new Date;return r<=s&&s<=n},vZ=e=>{const t=[...e];for(let r=t.length-1;r>0;r--){const n=Math.floor(Math.random()*(r+1));[t[r],t[n]]=[t[n],t[r]]}return t},oh=(e,t)=>e?e.length>t?`${e.substring(0,t-3)}...`:e:"",Ev=e=>{if(!e)return"";const t=document.createElement("div");t.innerHTML=e;let r=t.textContent||t.innerText||"";return r=r.replace(/\s+/g," ").trim(),r},xZ=e=>{const t=e.split("");for(let r=0;r<3;r++){const n=Math.floor(Math.random()*t.length),s=Math.floor(Math.random()*t.length);n!==s&&([t[n],t[s]]=[t[s],t[n]])}return t.join("")};function rp({src:e,alt:t,style:r,className:n,...s}){const[i,l]=v.useState(!1);return i?a.jsx("div",{className:`inline-block bg-gray-100 text-center align-middle ${n??""}`,style:r,children:a.jsx("div",{className:"flex items-center justify-center w-full h-full",children:a.jsx("img",{src:"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iODgiIGhlaWdodD0iODgiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgc3Ryb2tlPSIjMDAwIiBzdHJva2UtbGluZWpvaW49InJvdW5kIiBvcGFjaXR5PSIuMyIgZmlsbD0ibm9uZSIgc3Ryb2tlLXdpZHRoPSIzLjciPjxyZWN0IHg9IjE2IiB5PSIxNiIgd2lkdGg9IjU2IiBoZWlnaHQ9IjU2IiByeD0iNiIvPjxwYXRoIGQ9Im0xNiA1OCAxNi0xOCAzMiAzMiIvPjxjaXJjbGUgY3g9IjUzIiBjeT0iMzUiIHI9IjciLz48L3N2Zz4KCg==",alt:"Error loading image",...s,"data-original-url":e})})}):a.jsx("img",{src:e,alt:t,className:n,style:r,...s,onError:()=>l(!0)})}const ut=jt.memo(function({children:t,onClick:r,variant:n="primary",disabled:s=!1,className:i="",...l}){const u="py-2 px-4 rounded-lg flex items-center transition-colors cursor-pointer",d={primary:"bg-[#2d4660] text-white hover:bg-[#173B65]",secondary:"border border-gray-300 text-gray-700 hover:bg-gray-50",danger:"bg-[#591D0F] text-white hover:bg-[#492434]",gold:"bg-[#C89212] text-white hover:bg-[#E0A814]",blue:"bg-[#173B65] text-white hover:bg-[#1D2C49]",gray:"bg-[#576C71] text-white hover:bg-[#1E5461]"};return a.jsx("button",{onClick:r,disabled:s,className:`${u} ${d[n]} ${s?"opacity-60 cursor-not-allowed":""} ${i}`,...l,children:t})});class as extends v.Component{render(){const{isOpen:t,onClose:r,title:n,children:s,maxWidth:i="max-w-2xl"}=this.props;return t?a.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:a.jsxs("div",{className:"flex items-center justify-center min-h-screen p-4 text-center",children:[a.jsx("div",{className:"fixed inset-0 transition-opacity bg-black/50",onClick:r,"aria-hidden":"true"}),a.jsxs("div",{className:`inline-block w-full ${i} p-6 my-8 overflow-hidden text-left align-middle transition-all transform bg-white shadow-xl rounded-lg`,children:[a.jsxs("div",{className:"flex items-start justify-between mb-5",children:[a.jsxs("div",{className:"flex items-center gap-3 bg-[#FFF7E2] border border-[#C89212]/40 rounded-xl px-6 py-3 shadow-sm w-full mr-4",children:[a.jsx("div",{className:"flex items-center justify-center h-10 w-10 rounded-full bg-[#C89212]/15 text-[#C89212]",children:a.jsx(hx,{className:"h-6 w-6"})}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-lg font-semibold text-[#2d4660] tracking-tight",children:n}),a.jsx("p",{className:"text-xs text-[#8A6D3B] font-medium mt-1 uppercase tracking-widest",children:"Spark the roadmap with your ideas"})]})]}),a.jsx("button",{onClick:r,className:"ml-3 text-gray-400 hover:text-gray-500 focus:outline-none",children:a.jsx(Js,{className:"h-5 w-5"})})]}),a.jsx("div",{className:"mt-2",children:s})]})]})}):null}}const xc=jt.memo(function({name:t,truncateAt:r=30,className:n}){if(!t)return null;const s=r===null?t:oh(t,r),i=["flex items-center text-xs text-[#2d4660]",n].filter(Boolean).join(" ");return a.jsxs("div",{className:i,children:[a.jsx(xF,{className:"h-3 w-3 mr-1 text-[#2d4660]"}),a.jsx("span",{className:"font-medium leading-tight break-words",children:s})]})}),cm=jt.memo(function({id:t,url:r}){return t?a.jsxs("a",{href:r,target:"_blank",rel:"noreferrer",className:"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-blue-100 text-blue-800 hover:bg-blue-200 cursor-pointer",title:"View in Azure DevOps",children:[a.jsx(HM,{className:"h-3 w-3 mr-1"}),"#",t]}):null}),wZ=jt.memo(function({endDate:t}){const r=xI(t),n=wI(r),s=bI(r);return a.jsx("div",{className:`${s} rounded-md p-3 border ${r<=2?"border-[#6A4234]/20":r<=4?"border-[#C89212]/20":"border-[#1E5461]/20"}`,children:a.jsxs("div",{className:"flex items-center",children:[a.jsx(Zr,{className:`h-5 w-5 mr-2 ${n}`}),a.jsxs("div",{children:[a.jsxs("span",{className:`font-medium ${n}`,children:["Voting ends: ",Qi(t)]}),a.jsx("div",{className:"text-sm mt-1",children:r<=0?a.jsx("span",{className:"text-red-600 font-medium",children:"Voting ends today!"}):a.jsxs("span",{className:`${n}`,children:[r," ",r===1?"day":"days"," remaining"]})})]})]})})});function bZ({isShuffling:e,onShuffle:t}){const[r,n]=v.useState("Shuffle Features"),s=v.useRef(null);return v.useEffect(()=>(e?s.current=window.setInterval(()=>{n(xZ("Shuffle Features"))},100):s.current!==null&&(window.clearInterval(s.current),n("Shuffle Features")),()=>{s.current!==null&&window.clearInterval(s.current)}),[e]),a.jsxs("button",{onClick:t,className:`py-2 px-4 rounded-lg flex items-center justify-center transition-all duration-300 w-full md:w-auto ${e?"bg-[#C89212] text-white scale-95":"bg-[#C89212] hover:bg-[#A67810] text-white hover:scale-105"}`,disabled:e,children:[a.jsx("span",{className:`transition-transform duration-500 ${e?"mr-2 animate-spin":"mr-2"}`,children:a.jsx(mF,{className:"h-4 w-4"})}),a.jsx("span",{className:"font-medium tracking-wide whitespace-nowrap",children:r})]})}const lh=jt.memo(function({show:t,title:r,message:n,onConfirm:s,onCancel:i,confirmText:l="Confirm",cancelText:u="Cancel",type:d="delete"}){if(!t)return null;const m=d==="delete"?"bg-[#591D0F]/10":"bg-[#C89212]/10",f=d==="delete"?"text-[#591D0F]":"text-[#C89212]",p=d==="delete"?"bg-[#591D0F] hover:bg-[#492434]":"bg-[#C89212] hover:bg-[#A67810]";return a.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:a.jsxs("div",{className:"relative z-10 bg-white rounded-lg shadow-xl max-w-md w-full mx-auto overflow-hidden",children:[a.jsxs("div",{className:`${m} p-4 flex items-start space-x-4`,children:[a.jsx("div",{className:f,children:d==="delete"?a.jsx(Li,{className:"h-5 w-5"}):a.jsx(nr,{className:"h-5 w-5"})}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-lg font-medium text-gray-900",children:r}),a.jsx("p",{className:"mt-1 text-sm text-gray-500",children:n})]})]}),a.jsx("div",{className:"p-4 bg-white space-y-4",children:a.jsxs("div",{className:"flex items-center justify-end space-x-3",children:[a.jsx("button",{type:"button",onClick:i,className:"px-4 py-2 border border-gray-300 rounded-md text-sm font-medium text-gray-700 hover:bg-gray-50 cursor-pointer",children:u}),a.jsx("button",{type:"button",onClick:()=>{s(),i()},className:`px-4 py-2 rounded-md text-sm font-medium text-white ${p} cursor-pointer`,children:l})]})})]})})}),jZ=jt.memo(function({feature:t,userVoteCount:r=0,remainingVotes:n=0,votingIsActive:s=!1,onVote:i,isShuffling:l=!1,shuffleStage:u="idle",currentUser:d,onRequestInfo:m}){const[f,p]=v.useState(!1),[y,x]=v.useState(!1),w=async()=>{if(!(!m||y)){x(!0);try{await m(t.id),p(!0)}catch(S){console.error("Error requesting info:",S)}finally{x(!1)}}},b=()=>{switch(u){case"fadeOut":return"opacity-0 scale-95 blur-sm";case"rearranging":return"opacity-0 scale-90";case"fadeIn":return"opacity-100 scale-100 blur-0";default:return"opacity-100 scale-100 blur-0"}};return a.jsx("div",{className:`relative z-10 bg-white rounded-lg shadow-md overflow-hidden transition-all duration-400 ease-in-out ${r>0?"border-2 border-[#1E5461]":""} ${b()}`,children:a.jsxs("div",{className:"p-6 flex flex-col h-full",children:[a.jsx("h3",{className:"text-lg font-semibold mb-2 text-[#2d4660]",children:t.title}),t.azureDevOpsId&&a.jsx("div",{className:"flex justify-end mb-4",children:a.jsx(cm,{id:t.azureDevOpsId,url:t.azureDevOpsUrl||""})}),t.description?a.jsx("p",{className:"text-gray-600 mb-4 flex-grow",children:t.description}):a.jsxs("div",{className:"mb-4 flex-grow",children:[a.jsx("p",{className:"text-gray-400 italic mb-3",children:"No description provided"}),d&&m&&a.jsx("div",{className:"transition-all duration-300",children:f?a.jsxs("div",{className:"text-sm px-3 py-2 bg-green-50 text-green-700 rounded-md font-medium flex items-center animate-fadeIn",children:[a.jsx(Yr,{className:"h-4 w-4 mr-2 flex-shrink-0"}),a.jsx("span",{children:"Thank you! Your request has been sent."})]}):a.jsxs("button",{onClick:w,disabled:y,className:"text-sm px-3 py-2 bg-blue-50 hover:bg-blue-100 text-[#2d4660] rounded-md font-medium flex items-center transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:[a.jsx(nr,{className:"h-4 w-4 mr-2 flex-shrink-0"}),a.jsx("span",{children:y?"Sending...":"Ask Product Owner for more info"})]})})]}),i&&a.jsx("div",{className:"mt-auto pt-3",children:a.jsxs("div",{className:`flex items-center mb-3 ${t.epic?"justify-between":"justify-end"}`,children:[t.epic&&a.jsx(xc,{name:t.epic,truncateAt:null,className:"text-sm bg-[#1E5461]/10 px-2 py-1 rounded-md"}),a.jsx("div",{className:"flex items-center space-x-2",children:r===0?a.jsx("button",{onClick:()=>i(t.id,!0),className:`px-6 py-2.5 rounded-lg text-base font-semibold cursor-pointer transition-colors ${s&&n>0?"bg-[#2d4660] text-white hover:bg-[#C89212]":"bg-gray-300 text-gray-600 cursor-not-allowed"}`,disabled:!s||n<=0,children:"Vote"}):a.jsxs(a.Fragment,{children:[a.jsx("button",{onClick:()=>i(t.id,!1),className:"p-2 rounded-full bg-gray-100 hover:bg-gray-200 text-gray-700 cursor-pointer transition-colors","aria-label":"Remove vote",disabled:!s,children:a.jsx(ls,{className:"h-6 w-6"})}),a.jsx("span",{className:"px-4 py-2 bg-[#1E5461]/10 text-[#1E5461] rounded-full font-semibold text-base min-w-[3rem] text-center",children:r}),a.jsx("button",{onClick:()=>i(t.id,!0),className:`p-2 rounded-full cursor-pointer transition-colors ${s&&n>0?"bg-[#2d4660]/10 hover:bg-[#C89212]/30 text-[#2d4660]":"bg-gray-100 text-gray-400 cursor-not-allowed"}`,disabled:!s||n<=0,"aria-label":"Add vote",children:a.jsx(zM,{className:"h-6 w-6"})})]})})]})})]})})});function SZ({feature:e,onClose:t}){return a.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:a.jsxs("div",{className:"relative z-10 bg-white rounded-lg p-6 max-w-md w-full max-h-[80vh] overflow-y-auto",children:[a.jsxs("div",{className:"flex justify-between items-center mb-4",children:[a.jsxs("h3",{className:"text-lg font-medium text-[#2d4660]",children:['Voters for "',e.title,'"']}),a.jsx("button",{onClick:t,className:"text-gray-500 hover:text-gray-700 cursor-pointer",children:a.jsx(Js,{className:"h-5 w-5"})})]}),e.voters.length===0?a.jsx("p",{className:"text-gray-500",children:"No votes yet"}):a.jsx("ul",{className:"divide-y divide-gray-200",children:e.voters.map(r=>a.jsxs("li",{className:"py-3 flex justify-between items-center",children:[a.jsxs("div",{children:[a.jsx("p",{className:"font-medium",children:r.name}),a.jsx("p",{className:"text-sm text-gray-500",children:r.email})]}),a.jsxs("div",{className:"bg-[#2d4660]/10 text-[#2d4660] rounded-full px-3 py-1",children:[r.voteCount," ",r.voteCount===1?"vote":"votes"]})]},r.userId))})]})})}function kZ({features:e,onResetVotes:t,onResetAllVotes:r,onBack:n,showVotersList:s,setShowVotersList:i,votingSession:l,effectiveVotesPerUser:u,onLogout:d}){const m=Ds(),[f,p]=v.useState(!1),y=v.useRef(null);v.useEffect(()=>{if(!f)return;const _=E=>{y.current&&!y.current.contains(E.target)&&p(!1)};return document.addEventListener("mousedown",_),document.addEventListener("touchstart",_,{passive:!0}),()=>{document.removeEventListener("mousedown",_),document.removeEventListener("touchstart",_)}},[f]);const x=v.useMemo(()=>[...e].sort((_,E)=>E.votes-_.votes),[e]),w=v.useMemo(()=>x.slice(0,10).map(_=>({name:_.title,votes:_.votes,id:_.id})),[x]),b=xI(l.endDate),S=wI(b);return a.jsxs("div",{className:"container mx-auto p-4 max-w-6xl pb-8",children:[a.jsx("div",{className:"hidden md:flex md:justify-center mb-2",children:a.jsx("img",{src:"https://www.steeldynamics.com/wp-content/uploads/2024/05/New-Millennium-color-logo1.png",alt:"New Millennium Building Systems Logo",className:"-mt-4 cursor-pointer hover:opacity-80 transition-opacity",style:{height:"96px",width:"auto"},onClick:()=>m("/sessions")})}),a.jsxs("div",{className:"flex justify-between items-center mb-6",children:[a.jsxs("div",{className:"flex items-center",children:[a.jsx(rp,{src:"https://www.steeldynamics.com/wp-content/uploads/2024/05/New-Millennium-color-logo1.png",alt:"New Millennium Building Systems Logo",className:"mr-4 md:hidden cursor-pointer hover:opacity-80 transition-opacity",style:{width:"40px",height:"40px"},onClick:()=>m("/sessions")}),a.jsx("button",{onClick:n,className:"mr-2 p-1 rounded-full hover:bg-gray-200 cursor-pointer",children:a.jsx(Mc,{className:"h-6 w-6"})}),a.jsx("h1",{className:"text-2xl font-bold text-[#2d4660] md:text-3xl",children:mi(l.endDate)?"Final Voting Results":"Current Voting Results"})]}),a.jsxs("div",{ref:y,className:"relative z-40",children:[a.jsxs("div",{className:"hidden md:flex space-x-2",children:[a.jsxs(ut,{variant:"primary",onClick:n,className:"flex items-center",children:[a.jsx(_n,{className:"mr-2 h-4 w-4"}),"Admin Dashboard"]}),a.jsx(ut,{variant:"danger",onClick:r,children:"Reset All Votes"}),a.jsxs(ut,{variant:"gray",onClick:d,className:"flex items-center",children:[a.jsx(zn,{className:"mr-2 h-4 w-4"}),"Logout"]})]}),a.jsx("div",{className:"flex md:hidden",children:a.jsx("button",{onClick:()=>p(!f),className:"p-2 rounded-md border border-gray-200 bg-white shadow-sm","aria-label":"Open menu",children:a.jsx(Ys,{className:"h-5 w-5 text-gray-700"})})}),f&&a.jsx("div",{className:"absolute right-0 mt-2 w-56 bg-white border border-gray-200 rounded-lg shadow-lg md:hidden z-50",children:a.jsxs("div",{className:"py-1",children:[a.jsxs("button",{onClick:()=>{p(!1),n()},className:"w-full px-3 py-2 flex items-center text-left hover:bg-gray-50",children:[a.jsx(_n,{className:"h-4 w-4 mr-2 text-gray-700"}),"Admin Dashboard"]}),a.jsxs("button",{onClick:()=>{p(!1),r()},className:"w-full px-3 py-2 flex items-center text-left hover:bg-gray-50 text-red-600",children:[a.jsx(Li,{className:"h-4 w-4 mr-2"}),"Reset All Votes"]}),a.jsxs("button",{onClick:()=>{p(!1),d()},className:"w-full px-3 py-2 flex items-center text-left hover:bg-gray-50",children:[a.jsx(zn,{className:"h-4 w-4 mr-2 text-gray-700"}),"Logout"]})]})})]})]}),a.jsxs("div",{className:"relative z-10 bg-white rounded-lg shadow-md p-4 mb-6",children:[a.jsxs("div",{className:"flex justify-between items-center mb-4",children:[a.jsx("h2",{className:"text-xl font-semibold text-[#2d4660]",children:l.title}),a.jsxs("div",{className:"text-sm text-gray-600",children:[a.jsxs("span",{className:"mr-2",children:["Votes per user: ",u]}),l.isActive?a.jsx("span",{className:"text-[#1E5461] font-medium",children:"Voting Active"}):mi(l.endDate)?a.jsx("span",{className:"text-[#591D0F] font-medium",children:"Voting Closed"}):a.jsx("span",{className:"text-[#C89212] font-medium",children:"Voting Upcoming"})]})]}),a.jsx("p",{className:"text-gray-600 mb-4",children:l.goal}),l.isActive&&a.jsx("div",{className:`${bI(b)} relative z-10 rounded-md p-3 mb-4 inline-block border ${b<=2?"border-[#6A4234]/20":b<=4?"border-[#C89212]/20":"border-[#1E5461]/20"}`,children:a.jsxs("div",{className:"flex items-center",children:[a.jsx(Zr,{className:`h-4 w-4 mr-2 ${S}`}),a.jsx("span",{className:`${S} font-medium`,children:b<=0?"Voting ends today!":`${b} ${b===1?"day":"days"} remaining until ${Qi(l.endDate)}`})]})}),a.jsx("div",{className:"h-72",children:a.jsx(GB,{width:"100%",height:"100%",children:a.jsxs(zQ,{data:w,margin:{top:20,right:30,left:20,bottom:60},children:[a.jsx(rI,{dataKey:"name",angle:-45,textAnchor:"end",height:80,tick:{fontSize:12}}),a.jsx(nI,{}),a.jsx(kK,{}),a.jsx(XT,{dataKey:"votes",fill:"#3B82F6",children:w.map((_,E)=>a.jsx(Lw,{fill:E%2===0?"#2d4660":"#4f6d8e"},`cell-${E}`))})]})})})]}),a.jsxs("div",{className:"relative z-10 bg-white rounded-lg shadow-md p-4",children:[a.jsx("h2",{className:"text-xl font-semibold mb-4 text-[#2d4660]",children:"Feature Details"}),a.jsx("div",{className:"w-full overflow-x-auto",children:a.jsxs("table",{className:"min-w-full divide-y divide-gray-200 table-fixed",children:[a.jsx("thead",{className:"bg-gray-50",children:a.jsxs("tr",{children:[a.jsx("th",{scope:"col",className:"w-12 px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Rank"}),a.jsx("th",{scope:"col",className:"w-1/2 px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Title"}),a.jsx("th",{scope:"col",className:"hidden sm:table-cell w-1/4 px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Epic"}),a.jsx("th",{scope:"col",className:"w-14 px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Votes"}),a.jsx("th",{scope:"col",className:"hidden md:table-cell w-20 px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Voters"}),a.jsx("th",{scope:"col",className:"w-20 px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),a.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:x.map((_,E)=>a.jsxs("tr",{className:"align-top group",children:[a.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm font-medium",children:E+1}),a.jsxs("td",{className:"px-4 py-4 whitespace-normal break-words text-sm font-medium",children:[_.title,_.azureDevOpsId&&a.jsx("div",{className:"mt-1",children:a.jsx(cm,{id:_.azureDevOpsId,url:_.azureDevOpsUrl||""})})]}),a.jsx("td",{className:"hidden sm:table-cell px-4 py-4 whitespace-nowrap text-sm",children:_.epic&&a.jsx(xc,{name:_.epic})}),a.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm",children:_.votes}),a.jsx("td",{className:"hidden md:table-cell px-4 py-4 whitespace-nowrap text-sm",children:a.jsxs("button",{onClick:()=>i(_.id),className:"text-[#2d4660] hover:text-[#C89212] flex items-center cursor-pointer",disabled:_.voters.length===0,children:[a.jsx(Xn,{className:"h-4 w-4 mr-1"}),_.voters.length," ",_.voters.length===1?"user":"users"]})}),a.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm md:opacity-0 md:group-hover:opacity-100 transition-opacity",children:a.jsx("button",{onClick:()=>t(_.id),className:"text-[#591D0F] hover:text-[#492434] cursor-pointer",disabled:_.votes===0,children:"Reset Votes"})})]},_.id))})]})})]}),s&&a.jsx(SZ,{feature:e.find(_=>_.id===s),onClose:()=>i(null)})]})}function _Z({navigate:e,votingSession:t}){return a.jsx("div",{className:"relative z-10 flex flex-col items-center justify-center min-h-[80vh] p-6",children:a.jsxs("div",{className:"relative z-10 w-full max-w-md bg-white rounded-lg shadow-lg p-8 text-center",children:[a.jsx("img",{src:"https://www.steeldynamics.com/wp-content/uploads/2024/05/New-Millennium-color-logo1.png",alt:"New Millennium Building Systems Logo",className:"mx-auto mb-6",style:{maxWidth:"200px",height:"auto"}}),a.jsx("div",{className:"w-20 h-20 bg-[#1E5461]/10 rounded-full flex items-center justify-center mx-auto mb-6",children:a.jsx(Yr,{className:"h-12 w-12 text-[#1E5461]"})}),a.jsx("h1",{className:"text-3xl font-bold text-[#1E5461] mb-4",children:"Thank You!"}),a.jsxs("p",{className:"text-gray-700 text-lg mb-6",children:["Your votes for ",a.jsx("span",{className:"font-semibold",children:t.title})," have been submitted successfully."]}),a.jsx("p",{className:"text-gray-600 mb-8",children:"We appreciate your input in helping prioritize features for our product roadmap."}),a.jsx(ut,{variant:"primary",onClick:()=>e("/sessions"),className:"mx-auto",children:"View All Voting Sessions"})]})})}function jI({currentRole:e="stakeholder",onSelectStakeholder:t,onSelectSessionAdmin:r,onSelectSystemAdmin:n,showRoleToggle:s=!0}){const i=new Date().getFullYear(),l=[];(t||e==="stakeholder")&&l.push({key:"stakeholder",label:"Stakeholder View",icon:a.jsx(Xn,{className:"h-4 w-4 inline mr-2"}),onClick:t}),(r||e==="session-admin")&&l.push({key:"session-admin",label:"Session Admin",icon:a.jsx(Fn,{className:"h-4 w-4 inline mr-2"}),onClick:r}),(n||e==="system-admin")&&l.push({key:"system-admin",label:"System Admin",icon:a.jsx(As,{className:"h-4 w-4 inline mr-2"}),onClick:n});const u=["stakeholder","session-admin","system-admin"];l.sort((m,f)=>{const p=u.indexOf(m.key),y=u.indexOf(f.key);return p-y});const d=s&&l.length>0;return a.jsx("footer",{className:"mt-auto bg-gray-50 border-t border-gray-200",children:a.jsxs("div",{className:"container mx-auto px-4 py-6 max-w-6xl",children:[d&&a.jsx("div",{className:"flex justify-center mb-6",children:a.jsx("div",{className:"inline-flex items-center bg-gray-100 rounded-lg p-1",children:l.map(({key:m,label:f,icon:p,onClick:y})=>{const x=e===m,w=!y;return a.jsxs("button",{onClick:y,disabled:w,className:`px-4 py-2 rounded-md text-sm font-medium transition-colors flex items-center ${x?"bg-white text-[#2d4660] shadow-sm":"text-gray-600 hover:text-gray-900"} ${w&&!x?"opacity-60 cursor-not-allowed":""}`,children:[p,a.jsx("span",{children:f})]},m)})})}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 text-sm text-gray-600",children:[a.jsxs("div",{children:[a.jsx("h3",{className:"font-semibold text-gray-900 mb-2",children:"New Millennium Building Systems"}),a.jsxs("p",{className:"text-xs leading-relaxed",children:["A Steel Dynamics Company",a.jsx("br",{}),"Innovation in structural steel manufacturing"]})]}),a.jsxs("div",{children:[a.jsx("h3",{className:"font-semibold text-gray-900 mb-2",children:"Quick Links"}),a.jsxs("ul",{className:"space-y-1 text-xs",children:[a.jsx("li",{children:a.jsx("a",{href:"https://www.steeldynamics.com",target:"_blank",rel:"noopener noreferrer",className:"hover:text-[#2d4660] transition-colors",children:"Steel Dynamics Inc."})}),a.jsx("li",{children:a.jsx("a",{href:"https://www.newmill.com",target:"_blank",rel:"noopener noreferrer",className:"hover:text-[#2d4660] transition-colors",children:"New Millennium"})})]})]}),a.jsxs("div",{children:[a.jsx("h3",{className:"font-semibold text-gray-900 mb-2",children:"Need Help?"}),a.jsx("p",{className:"text-xs",children:"Contact your Product Owner or session administrator for assistance with voting."})]})]}),a.jsx("div",{className:"mt-6 pt-6 border-t border-gray-200 text-center text-xs text-gray-500",children:a.jsxs("p",{children:[" ",i," New Millennium Building Systems, LLC. All rights reserved."]})})]})})}function rC({feature:e,onSubmit:t,onCancel:r}){const{register:n,handleSubmit:s,formState:{errors:i}}=Xu({defaultValues:e?{title:e.title,description:e.description,epic:e.epic}:{epic:tC[0]}});return a.jsxs("form",{onSubmit:s(t),children:[a.jsxs("div",{className:"mb-4",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Title"}),a.jsx("input",{...n("title",{required:"Title is required"}),className:"w-full px-3 py-2 border border-gray-300 rounded-md"}),i.title&&a.jsx("p",{className:"mt-1 text-sm text-red-600",children:i.title.message})]}),a.jsxs("div",{className:"mb-4",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),a.jsx("textarea",{...n("description",{required:"Description is required"}),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-md"}),i.description&&a.jsx("p",{className:"mt-1 text-sm text-red-600",children:i.description.message})]}),a.jsxs("div",{className:"mb-4",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Epic"}),a.jsx("select",{...n("epic",{required:"Epic is required"}),className:"w-full px-3 py-2 border border-gray-300 rounded-md bg-white",children:tC.map(l=>a.jsx("option",{value:l,children:l},l))}),i.epic&&a.jsx("p",{className:"mt-1 text-sm text-red-600",children:i.epic.message})]}),a.jsxs("div",{className:"flex justify-end space-x-2 mt-6",children:[a.jsx(ut,{variant:"secondary",type:"button",onClick:r,children:"Cancel"}),a.jsxs(ut,{variant:"primary",type:"submit",children:[e?"Update":"Add"," Feature"]})]})]})}function NZ({currentUser:e,votingSession:t,onChangeVotes:r,onToggleAdmin:n,isAdmin:s,navigate:i,userVotes:l,features:u,isSystemAdmin:d,isSessionAdmin:m,isStakeholder:f}){const[p,y]=v.useState(!1),x=Object.values(l).reduce((S,_)=>S+_,0),w=u.filter(S=>l[S.id]>0),b=vI(d,m,f);return a.jsxs("div",{className:"container mx-auto p-4 max-w-6xl min-h-screen pb-8",children:[a.jsx("div",{className:"hidden md:flex md:justify-center mb-2",children:a.jsx("img",{src:"https://www.steeldynamics.com/wp-content/uploads/2024/05/New-Millennium-color-logo1.png",alt:"New Millennium Building Systems Logo",className:"-mt-4 cursor-pointer hover:opacity-80 transition-opacity",style:{height:"96px",width:"auto"},onClick:()=>i("/sessions")})}),a.jsxs("div",{className:"flex flex-col md:flex-row md:justify-between md:items-center mb-6",children:[a.jsxs("div",{className:"flex items-start md:items-center",children:[a.jsx(rp,{src:"https://www.steeldynamics.com/wp-content/uploads/2024/05/New-Millennium-color-logo1.png",alt:"New Millennium Building Systems Logo",className:"mr-4 md:hidden",style:{width:"40px",height:"40px"}}),a.jsxs("div",{children:[a.jsx("h1",{className:"text-2xl font-bold text-[#2d4660] md:text-3xl",children:"Feature Voting"}),a.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:["Welcome, ",e==null?void 0:e.name,(e==null?void 0:e.email)&&a.jsxs("a",{href:`mailto:${e.email}`,className:"ml-2 text-[#2D4660] hover:underline",children:["(",e.email,")"]}),b&&a.jsx("span",{className:`ml-2 inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium ${b.className}`,children:b.label})]})]})]}),a.jsxs("div",{className:"relative z-10 flex items-center space-x-2 mt-3 md:mt-0 md:justify-end",children:[s&&a.jsxs(ut,{variant:"primary",onClick:n,className:"flex items-center",children:[a.jsx(_n,{className:"mr-2 h-4 w-4"}),a.jsx("span",{className:"hidden md:inline",children:"Admin Dashboard"}),a.jsx("span",{className:"md:hidden",children:"Admin"})]}),a.jsxs(ut,{variant:"gray",onClick:()=>i("/sessions"),className:"flex items-center",children:[a.jsx(zn,{className:"mr-2 h-4 w-4"}),a.jsx("span",{className:"hidden md:inline",children:"All Sessions"}),a.jsx("span",{className:"md:hidden",children:"Sessions"})]})]})]}),a.jsx("div",{className:"max-w-3xl mx-auto",children:a.jsxs("div",{className:"relative z-10 bg-white rounded-lg shadow-lg p-8 text-center",children:[a.jsx("div",{className:"w-20 h-20 bg-[#1E5461]/10 rounded-full flex items-center justify-center mx-auto mb-6",children:a.jsx(Yr,{className:"h-12 w-12 text-[#1E5461]"})}),a.jsx("h2",{className:"text-3xl font-bold text-[#1E5461] mb-4",children:"Votes Already Submitted"}),a.jsxs("p",{className:"text-gray-700 text-lg mb-2",children:["Welcome back, ",a.jsx("span",{className:"font-semibold",children:e.name}),"!"]}),a.jsxs("p",{className:"text-gray-600 mb-6",children:["You have already submitted your votes for ",a.jsx("span",{className:"font-semibold",children:t.title}),"."]}),a.jsxs("div",{className:"bg-gray-50 rounded-lg p-6 mb-6",children:[a.jsx("h3",{className:"text-lg font-semibold text-[#2d4660] mb-4",children:"Your Current Votes"}),a.jsxs("div",{className:"space-y-3",children:[w.map(S=>a.jsxs("div",{className:"flex justify-between items-start gap-4",children:[a.jsxs("div",{children:[a.jsx("span",{className:"block text-gray-700 font-medium",children:S.title}),S.epic&&a.jsx("div",{className:"mt-1",children:a.jsx(xc,{name:S.epic,truncateAt:null,className:"text-xs bg-[#1E5461]/10 px-2 py-0.5 rounded"})})]}),a.jsxs("span",{className:"bg-[#1E5461]/10 text-[#1E5461] rounded-full px-3 py-1 font-medium self-center",children:[l[S.id]," ",l[S.id]===1?"vote":"votes"]})]},S.id)),a.jsx("div",{className:"border-t border-gray-200 pt-3 mt-3",children:a.jsxs("div",{className:"flex justify-between items-center font-semibold",children:[a.jsx("span",{className:"text-[#2d4660]",children:"Total Votes"}),a.jsx("span",{className:"text-[#2d4660]",children:x})]})})]})]}),a.jsx("div",{className:"bg-[#C89212]/10 border border-[#C89212]/20 rounded-lg p-4 mb-6",children:a.jsxs("div",{className:"flex items-start text-left",children:[a.jsx(jE,{className:"h-5 w-5 text-[#C89212] mr-3 mt-0.5 flex-shrink-0"}),a.jsx("div",{children:a.jsxs("p",{className:"text-sm text-gray-700",children:["If you'd like to change your votes, you can do so below. However, please note that this will",a.jsx("span",{className:"font-semibold",children:" permanently remove your previous votes"})," and allow you to vote again. This action cannot be undone."]})})]})}),a.jsxs(ut,{variant:"gold",onClick:()=>y(!0),className:"mx-auto text-lg py-3 px-8",children:[a.jsx(tl,{className:"mr-2 h-5 w-5"}),"Change My Votes"]})]})}),a.jsx(lh,{show:p,title:"Change Your Votes?",message:"This will permanently remove all your previous votes for this session and allow you to vote again. This action cannot be undone. Are you sure you want to continue?",onConfirm:r,onCancel:()=>y(!1),confirmText:"Yes, Change My Votes",cancelText:"Cancel",type:"reset"})]})}const CZ=jt.memo(function({features:t,currentUser:r,pendingVotes:n,pendingUsedVotes:s,onVote:i,onSubmitVotes:l,onToggleAdmin:u,isAdmin:d,votingSession:m,navigate:f,effectiveVotesPerUser:p,sessionId:y,onLogout:x,onSuggestionSubmitted:w,isSystemAdmin:b,isSessionAdmin:S,isStakeholder:_}){const[E,C]=v.useState([...t]),[O,T]=v.useState(!1),[P,F]=v.useState("idle"),[H,L]=v.useState(!1),[q,z]=v.useState({}),[U,ne]=v.useState(!0),[ie,oe]=v.useState(!1),[V,Z]=v.useState(!1),[ee,re]=v.useState(""),[me,I]=v.useState(""),[M,We]=v.useState(""),[te,ve]=v.useState(""),[he,ye]=v.useState(!1),[le,W]=v.useState(null),[Re,Ge]=v.useState(!1),G=v.useRef(null),He=vI(b,S,_);v.useEffect(()=>{if(!ie)return;const je=pe=>{G.current&&!G.current.contains(pe.target)&&oe(!1)};return document.addEventListener("mousedown",je),document.addEventListener("touchstart",je,{passive:!0}),()=>{document.removeEventListener("mousedown",je),document.removeEventListener("touchstart",je)}},[ie]),v.useEffect(()=>{C([...t])},[t]),v.useEffect(()=>{async function je(){if(!r||!y){ne(!1);return}try{const Se=(await Go(y)).filter(qe=>qe.user_id===r.id);if(Se.length>0){const qe={};Se.forEach(xt=>{qe[xt.feature_id]=xt.vote_count}),z(qe),L(!0)}else L(!1),z({})}catch(pe){console.error("Error checking existing votes:",pe),L(!1)}finally{ne(!1)}}je()},[r,y]);const Je=v.useCallback(async()=>{if(!(!r||!y))try{await g3(y,r.id),L(!1),z({})}catch(je){console.error("Error changing votes:",je),alert("Failed to reset votes. Please try again.")}},[r,y]),gt=v.useCallback(()=>{O||(T(!0),F("fadeOut"),setTimeout(()=>{F("rearranging"),setTimeout(()=>{C(vZ(t)),F("fadeIn"),setTimeout(()=>{F("idle"),T(!1)},400)},200)},400))},[t,O]),_t=v.useCallback(async je=>{const pe=t.find(Se=>Se.id===je);if(!(!pe||!r))try{await b3({session_id:y,feature_id:je,feature_title:pe.title,requester_id:r.id,requester_name:r.name,requester_email:r.email,created_at:new Date().toISOString()})}catch(Se){throw console.error("Error submitting info request:",Se),alert("Failed to submit request. Please try again."),Se}},[t,r,y]),Mt=v.useCallback(()=>{W(null),Ge(!1),Z(!0)},[]),Dt=v.useCallback(()=>{he||(Z(!1),W(null),Ge(!1),re(""),I(""),We(""),ve(""))},[he]),Qt=v.useCallback(async je=>{je.preventDefault();const pe=ee.trim(),Se=me.trim(),qe=M.trim(),xt=te.trim();if(!pe){W("Please provide a brief title for your suggestion.");return}if(!y){W("Unable to link this suggestion to the current session.");return}try{ye(!0),W(null);const bt=await j3({session_id:y,title:pe,description:Se||null,requester_id:(r==null?void 0:r.id)??null,requester_name:(r==null?void 0:r.name)??null,requester_email:(r==null?void 0:r.email)??null,whatWouldItDo:qe||null,howWouldItWork:xt||null});w==null||w(bt),Ge(!0),re(""),I(""),We(""),ve("")}catch(bt){console.error("Error submitting feature suggestion:",bt),W("We were unable to submit your suggestion. Please try again in a moment.")}finally{ye(!1)}},[me,ee,M,te,r,y,he,w]);if(!r)return null;if(U)return a.jsx("div",{className:"container mx-auto p-4 max-w-6xl min-h-screen flex items-center justify-center",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-[#2d4660] mx-auto mb-4"}),a.jsx("p",{className:"text-gray-600",children:"Loading your voting status..."})]})});if(H)return a.jsx(NZ,{currentUser:r,votingSession:m,onChangeVotes:Je,onToggleAdmin:u,isAdmin:d,navigate:f,userVotes:q,features:t,isSystemAdmin:b,isSessionAdmin:S,isStakeholder:_});const R=p-s,Y=R===0,ce=m.isActive;return a.jsxs("div",{className:"container mx-auto p-4 max-w-6xl pb-8",children:[a.jsx("div",{className:"hidden md:flex md:justify-center mb-2",children:a.jsx("img",{src:"https://www.steeldynamics.com/wp-content/uploads/2024/05/New-Millennium-color-logo1.png",alt:"New Millennium Building Systems Logo",className:"-mt-4 cursor-pointer hover:opacity-80 transition-opacity",style:{height:"96px",width:"auto"},onClick:()=>f("/sessions")})}),a.jsxs("div",{className:"flex justify-between items-center mb-6",children:[a.jsxs("div",{className:"flex items-start md:items-center",children:[a.jsx(rp,{src:"https://www.steeldynamics.com/wp-content/uploads/2024/05/New-Millennium-color-logo1.png",alt:"New Millennium Building Systems Logo",className:"mr-4 md:hidden",style:{width:"40px",height:"40px"}}),a.jsxs("div",{children:[a.jsx("h1",{className:"text-2xl font-bold text-[#2d4660] md:text-3xl",children:"Feature Voting"}),a.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:["Welcome, ",r==null?void 0:r.name,(r==null?void 0:r.email)&&a.jsxs("a",{href:`mailto:${r.email}`,className:"ml-2 text-[#2D4660] hover:underline",children:["(",r.email,")"]}),He&&a.jsx("span",{className:`ml-2 inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium ${He.className}`,children:He.label})]})]})]}),a.jsxs("div",{ref:G,className:"relative z-40",children:[a.jsxs("div",{className:"hidden md:flex items-center space-x-2",children:[d&&a.jsxs(ut,{variant:"primary",onClick:u,className:"flex items-center",children:[a.jsx(_n,{className:"mr-2 h-4 w-4"}),"Admin Dashboard"]}),a.jsx(ut,{variant:"gray",onClick:()=>f("/sessions"),className:"flex items-center",children:"All Sessions"}),a.jsxs(ut,{variant:"gray",onClick:x,className:"flex items-center",children:[a.jsx(zn,{className:"mr-2 h-4 w-4"}),"Logout"]})]}),a.jsx("div",{className:"flex md:hidden",children:a.jsx("button",{onClick:()=>oe(!ie),className:"p-2 rounded-md border border-gray-200 bg-white shadow-sm","aria-label":"Open menu",children:a.jsx(Ys,{className:"h-5 w-5 text-gray-700"})})}),ie&&a.jsx("div",{className:"absolute right-0 mt-2 w-56 bg-white border border-gray-200 rounded-lg shadow-lg md:hidden z-50",children:a.jsxs("div",{className:"py-1",children:[d&&a.jsxs("button",{onClick:()=>{oe(!1),u()},className:"w-full px-3 py-2 flex items-center text-left hover:bg-gray-50",children:[a.jsx(_n,{className:"h-4 w-4 mr-2 text-gray-700"}),"Admin Dashboard"]}),a.jsx("button",{onClick:()=>{oe(!1),f("/sessions")},className:"w-full px-3 py-2 flex items-center text-left hover:bg-gray-50",children:"All Sessions"}),a.jsxs("button",{onClick:()=>{oe(!1),x()},className:"w-full px-3 py-2 flex items-center text-left hover:bg-gray-50",children:[a.jsx(zn,{className:"h-4 w-4 mr-2 text-gray-700"}),"Logout"]})]})})]})]}),a.jsx("div",{className:"relative z-10 mb-6 bg-white rounded-lg shadow-md p-4",children:a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[a.jsxs("div",{className:"md:col-span-2",children:[a.jsx("h2",{className:"text-xl font-semibold text-[#2d4660] mb-2",children:m.title}),a.jsx("p",{className:"text-gray-600",children:m.goal})]}),a.jsxs("div",{className:"flex flex-col justify-center",children:[a.jsx(wZ,{endDate:m.endDate}),a.jsxs("div",{className:"flex items-center mt-3",children:[a.jsx(Gn,{className:"h-4 w-4 mr-2 text-[#2d4660]"}),a.jsxs("p",{className:"text-gray-700",children:["You have ",a.jsxs("span",{className:"font-bold text-[#2d4660]",children:[R," / ",p]})," votes remaining"]})]})]})]})}),!ce&&a.jsx("div",{className:"mb-6 bg-[#C89212]/10 p-4 rounded-lg border border-[#C89212]/20",children:a.jsxs("div",{className:"flex items-center text-[#6A4234]",children:[a.jsx(wm,{className:"h-5 w-5 mr-2"}),a.jsxs("span",{className:"font-medium",children:["Voting is currently ",mi(m.endDate)?"closed":"not yet open",".",mi(m.endDate)?` Voting ended on ${Qi(m.endDate)}.`:` Voting will open on ${Qi(m.startDate)}.`]})]})}),a.jsxs("div",{className:"flex flex-col md:flex-row md:justify-between md:items-center mb-4 gap-3",children:[a.jsx("h2",{className:"text-xl font-semibold text-[#2d4660]",children:"Available Features"}),a.jsxs("div",{className:"flex flex-col md:flex-row items-stretch md:items-center gap-3",children:[a.jsxs(ut,{variant:"gold",onClick:Mt,className:"flex items-center justify-center w-full md:w-auto",children:[a.jsx(hx,{className:"h-4 w-4 mr-2"}),"Suggest a Feature"]}),t.length>6&&a.jsx(bZ,{isShuffling:O,onShuffle:gt})]})]}),a.jsx("div",{className:`grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 ${s>0?"mb-32":""}`,children:E.map(je=>{const pe=n[je.id]||0;return a.jsx(jZ,{feature:je,userVoteCount:pe,remainingVotes:R,votingIsActive:ce,onVote:i,isShuffling:O,shuffleStage:P,currentUser:r,onRequestInfo:_t},je.id)})}),s>0&&a.jsx("div",{className:"fixed bottom-0 left-0 right-0 bg-white shadow-lg border-t border-gray-200 p-4",children:a.jsxs("div",{className:"container mx-auto max-w-6xl flex items-center justify-between",children:[a.jsxs("div",{children:[!Y&&a.jsxs("div",{className:"flex items-center",children:[a.jsx(jE,{className:"h-5 w-5 text-[#C89212] mr-2"}),a.jsxs("span",{className:"text-gray-700",children:["You still have ",a.jsx("span",{className:"font-semibold text-[#C89212]",children:R})," votes remaining."]})]}),Y&&a.jsxs("div",{className:"flex items-center",children:[a.jsx(Yr,{className:"h-5 w-5 text-[#1E5461] mr-2"}),a.jsx("span",{className:"text-gray-700",children:"All votes allocated! You can now submit your votes."})]})]}),a.jsx("button",{onClick:l,className:`py-3 px-6 rounded-lg font-medium cursor-pointer ${Y?"bg-[#1E5461] hover:bg-[#173B65] text-white":"bg-gray-300 text-gray-600 cursor-not-allowed"}`,disabled:!Y,children:"Submit Votes"})]})}),a.jsx(as,{isOpen:V,onClose:Dt,title:"Suggest a Feature",maxWidth:"max-w-lg",children:a.jsxs("form",{onSubmit:Qt,className:"space-y-4",children:[a.jsxs("div",{className:"bg-[#1E5461]/10 border border-[#1E5461]/30 text-sm text-[#1E5461] rounded-md px-3 py-2",children:["All suggested features will be reviewed for ",a.jsx("strong",{children:"future sessions"}),".",a.jsx("br",{}),"Suggestions will not be added to the current session."]}),le&&a.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 text-sm rounded-md px-3 py-2",children:le}),Re&&a.jsx("div",{className:"bg-green-50 border border-green-200 text-green-700 text-sm rounded-md px-3 py-2",children:"Thank you! Your suggestion has been recorded."}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Feature title"}),a.jsx("input",{type:"text",value:ee,onChange:je=>re(je.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md",placeholder:"Give your feature a name",disabled:he||Re})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"What problem would this solve? (optional)"}),a.jsx("textarea",{value:me,onChange:je=>I(je.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md",rows:4,placeholder:"Share a few details so we understand the request.",disabled:he||Re})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"What would it do? (optional)"}),a.jsx("textarea",{value:M,onChange:je=>We(je.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md",rows:3,placeholder:"Describe the functionality or outcome users would experience.",disabled:he||Re})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"How would it work? (optional)"}),a.jsx("textarea",{value:te,onChange:je=>ve(je.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md",rows:3,placeholder:"Share any ideas on workflow, technical approach, or integration.",disabled:he||Re})]}),a.jsxs("div",{className:"flex justify-end gap-2",children:[a.jsx(ut,{type:"button",variant:"secondary",onClick:Dt,disabled:he,children:"Close"}),!Re&&a.jsxs(ut,{type:"submit",variant:"primary",disabled:he,className:"flex items-center",children:[he&&a.jsx(tl,{className:"h-4 w-4 animate-spin mr-2"}),"Submit Suggestion"]})]})]})})]})});function Av({defaultVotesPerUser:e=10,adminMode:t=!1,resultsMode:r=!1}){const{currentSession:n,currentUser:s,setCurrentUser:i,setCurrentSession:l,refreshSessions:u,isSystemAdmin:d,isAdmin:m,isStakeholder:f}=aa(),p=Ds(),y=async()=>{try{await Ne.auth.signOut()}catch{}try{l(null)}catch{}i(null);try{localStorage.removeItem("voting_system_current_session"),localStorage.removeItem("azureDevOpsAuthInProgress"),sessionStorage.removeItem("oauth_return_path"),sessionStorage.removeItem("oauth_action")}catch{}p("/login",{replace:!0})};v.useEffect(()=>{const Q=new URLSearchParams(window.location.search),we=Q.has("code")||Q.has("error"),$e=localStorage.getItem("voting_system_current_session");!n&&!we&&!$e&&p("/sessions")},[n,p]);const x=v.useMemo(()=>{const Q=new URLSearchParams(window.location.search);return Q.has("code")||Q.has("error")},[]),[w,b]=v.useState([]),[S,_]=v.useState(!0),[E,C]=v.useState(gZ),[O,T]=v.useState(r?"results":t||x?"admin":"voting"),[P,F]=v.useState(t||x||r),[H,L]=v.useState(null),[q,z]=v.useState(!1),[U,ne]=v.useState(null),[ie,oe]=v.useState({...mZ,votesPerUser:e}),[V,Z]=v.useState(pZ),[ee,re]=v.useState(G2()),[me,I]=v.useState([]),[M,We]=v.useState([]),[te,ve]=v.useState([]),[he,ye]=v.useState(!1),[le,W]=v.useState(null),[Re,Ge]=v.useState(null),[G,He]=v.useState(!1),[Je,gt]=v.useState([]),[_t,Mt]=v.useState([]),[Dt,Qt]=v.useState(d?"system":"session"),[R,Y]=v.useState({}),[ce,je]=v.useState(0),[pe,Se]=v.useState({showReset:!1,showResetAll:!1,showDeleteSession:!1,targetId:null}),[qe,xt]=v.useState(!1),bt=v.useRef(!1),Ft=v.useRef(!1),hr=v.useRef(null),Ht=v.useMemo(()=>ie.useAutoVotes?Math.max(1,Math.floor(w.length/2)):ie.votesPerUser,[ie.useAutoVotes,ie.votesPerUser,w.length]),Ir=v.useRef(!1);v.useEffect(()=>{if(Ir.current){console.log("OAuth processing already in progress, skipping...");return}(async()=>{const we=new URLSearchParams(window.location.search),$e=we.has("code")||we.has("error");if($e&&!n){console.log("OAuth callback detected, waiting for session to load..."),localStorage.getItem("voting_system_current_session")&&console.log("Found stored session ID, waiting for SessionContext to restore it...");return}if(localStorage.getItem("azureDevOpsAuthInProgress")&&localStorage.removeItem("azureDevOpsAuthInProgress"),!(!$e||bt.current)){if(!n){console.log("No session available yet, waiting...");return}Ir.current=!0,bt.current=!0,console.log("Processing OAuth callback with session:",n.id);try{const Xe=await tZ();if(Xe){const Ve=new Date(Date.now()+Xe.expiresIn*1e3).toISOString(),At={...V,accessToken:Xe.accessToken,refreshToken:Xe.refreshToken,tokenExpiresAt:Ve,enabled:!0,clientId:ei.clientId,tenantId:ei.tenantId};await ec(n.id,At),Z(At);const yt=sessionStorage.getItem("oauth_return_path")||"/admin";sessionStorage.removeItem("oauth_return_path"),console.log("OAuth successful, navigating to:",yt),p(yt,{replace:!0})}}catch(Xe){console.error("OAuth callback error:",Xe),W("Failed to authenticate with Azure DevOps");const Ve="/admin";sessionStorage.removeItem("oauth_return_path"),p(Ve,{replace:!0})}finally{Ir.current=!1}}})()},[n,p,V]);const Dr=v.useCallback(Q=>{localStorage.setItem("azureDevOpsAuthInProgress","true"),Q&&sessionStorage.setItem("oauth_action",Q),sessionStorage.getItem("oauth_return_path")||sessionStorage.setItem("oauth_return_path","/admin"),rZ()},[]),zt=v.useCallback(async Q=>{if(!Q.accessToken||!Q.refreshToken||!Q.tokenExpiresAt)throw new Error("Not authenticated");if(eZ(Q.tokenExpiresAt)){const we=await HQ(Q.refreshToken),$e=new Date(Date.now()+we.expiresIn*1e3).toISOString(),Oe={...Q,accessToken:we.accessToken,tokenExpiresAt:$e};return n&&(await ec(n.id,Oe),Z(Oe)),we.accessToken}return Q.accessToken},[n]),nn=v.useCallback(async()=>{if(!n)return[];const[Q,we]=await Promise.all([ya(n.id),Go(n.id)]);return Q.map($e=>{const Xe=we.filter(At=>At.feature_id===$e.id).map(At=>({userId:At.user_id,name:At.user_name,email:At.user_email,voteCount:At.vote_count})),Ve=Xe.reduce((At,yt)=>At+yt.voteCount,0);return{id:$e.id,title:$e.title,description:$e.description,epic:$e.epic,state:$e.state,areaPath:$e.area_path,tags:$e.tags||[],azureDevOpsId:$e.azure_devops_id,azureDevOpsUrl:$e.azure_devops_url,votes:Ve,voters:Xe}})},[n]),ar=v.useCallback(async()=>{if(n)try{const Q=await Xj(n.id);gt(Q)}catch(Q){console.error("Error loading feature suggestions:",Q)}},[n]),Ur=v.useCallback(async()=>{if(n)try{const Q=await yo(),we=new Date,$e=Q.filter(Oe=>Oe.id!==n.id&&new Date(Oe.start_date)>we).map(Oe=>({id:Oe.id,title:Oe.title,startDate:Oe.start_date}));Mt($e)}catch(Q){console.error("Error loading future sessions:",Q)}},[n]),st=v.useCallback(Q=>{gt(we=>[Q,...we]),ar(),Ur()},[ar,Ur]),Wt=v.useCallback(async(Q,we)=>{await S3(Q,we),await ar()},[ar]),Ut=v.useCallback(async Q=>{await k3(Q),await ar()},[ar]),Kt=v.useCallback(async(Q,we)=>{await _3(Q,we),await ar()},[ar]),mr=v.useCallback(async Q=>{await N3(Q);const we=await nn();b(we),await ar()},[nn,ar]);v.useEffect(()=>{async function Q(){if(n&&!(Ft.current&&hr.current===n.id)){hr.current=n.id,Ft.current=!0;try{_(!0);const[we,$e]=await Promise.all([ya(n.id),Go(n.id)]),Oe=we.map(Ve=>{const yt=$e.filter(Le=>Le.feature_id===Ve.id).map(Le=>({userId:Le.user_id,name:Le.user_name,email:Le.user_email,voteCount:Le.vote_count})),Lt=yt.reduce((Le,dr)=>Le+dr.voteCount,0);return{id:Ve.id,title:Ve.title,description:Ve.description,epic:Ve.epic,state:Ve.state,areaPath:Ve.area_path,tags:Ve.tags||[],azureDevOpsId:Ve.azure_devops_id,azureDevOpsUrl:Ve.azure_devops_url,votes:Lt,voters:yt}});b(Oe),oe({title:n.title,goal:n.goal,votesPerUser:n.votes_per_user,useAutoVotes:n.use_auto_votes||!1,startDate:n.start_date,endDate:n.end_date,isActive:n.is_active,originalEndDate:n.original_end_date??void 0,endedEarlyBy:n.ended_early_by??void 0,endedEarlyReason:n.ended_early_reason??void 0,endedEarlyDetails:n.ended_early_details??void 0,reopenReason:n.reopen_reason??void 0,reopenDetails:n.reopen_details??void 0,reopenedBy:n.reopened_by??void 0,reopenedAt:n.reopened_at??void 0,productId:n.product_id??null,productName:n.product_name??null,product_id:n.product_id??null,product_name:n.product_name??null});const Xe=await v3(n.id);Z(Xe?{organization:Xe.organization||"newmill",project:Xe.project||"Product",accessToken:Xe.access_token,refreshToken:Xe.refresh_token,tokenExpiresAt:Xe.token_expires_at,tenantId:Xe.tenant_id,clientId:Xe.client_id,enabled:Xe.enabled,workItemType:Xe.work_item_type||"Feature",query:Xe.query,lastSyncTime:Xe.last_sync_time}:{organization:"newmill",project:"Product",enabled:!1,workItemType:"Feature"});try{const Ve=await Xj(n.id);gt(Ve)}catch(Ve){console.error("Error loading feature suggestions:",Ve)}}catch(we){console.error("Error loading data:",we),b([])}finally{_(!1),Ft.current=!1}}}Q()},[n==null?void 0:n.id]),v.useEffect(()=>{async function Q(){const we=G2();if(re(we),I([]),We([]),ve([]),V.enabled&&V.accessToken&&V.project)try{const $e=await zt(V),Oe={...V,accessToken:$e},[Xe,Ve,At,yt]=await Promise.all([YQ(Oe).catch(Lt=>(console.error("Error loading Azure DevOps projects:",Lt),we)),V2(Oe),G0(Oe),q2(Oe)]);re(Xe.length>0?Xe:we),I(Ve),We(At),ve(yt)}catch($e){console.error("Error loading filter options:",$e),re(we)}}Q()},[V.enabled,V.accessToken,V.project,zt]);const Rr=v.useCallback(async(Q,we)=>{if(!(!V.enabled||!V.accessToken))try{const $e=await zt(V),Oe={...V,accessToken:$e},Xe=Q?await gI(Oe,Q):await V2(Oe);I(Xe)}catch($e){console.error("Error loading states for work item type:",$e)}},[V,zt]),ws=v.useCallback(async Q=>{if(!V.enabled||!V.accessToken)return{types:[],states:[]};try{const we=await zt(V),$e={...V,accessToken:we};return await JQ($e,Q)}catch(we){return console.error("Error fetching types and states for area path:",we),{types:[],states:[]}}},[V,zt]),sn=v.useCallback(async Q=>{if(!V.enabled||!V.accessToken)return{types:[],areaPaths:[]};try{const we=await zt(V),$e={...V,accessToken:we},Oe=await GQ($e,Q);return Oe.areaPaths.length>0&&We(Oe.areaPaths),Oe}catch(we){return console.error("Error fetching types and area paths for states:",we),{types:[],areaPaths:[]}}},[V,zt]),pr=v.useCallback(async Q=>{if(!V.enabled||!V.accessToken)return{types:[],states:[],areaPaths:[]};try{const we=await zt(V),$e={...V,accessToken:we},Oe=await XQ($e,Q);return Oe.states.length>0&&I(Oe.states),Oe.areaPaths.length>0&&We(Oe.areaPaths),Oe}catch(we){return console.error("Error fetching types, states, and area paths for tags:",we),{types:[],states:[],areaPaths:[]}}},[V,zt]),Zn=v.useCallback(async(Q,we=[],$e=[])=>{if(!(!V.enabled||!V.accessToken))try{const Oe=await zt(V),Xe={...V,accessToken:Oe},Ve=Q?await QQ(Xe,Q,we,$e):await q2(Xe);ve(Ve)}catch(Oe){console.error("Error loading tags for type, state, and area path:",Oe)}},[V,zt]),an=v.useCallback(async(Q,we=[])=>{if(!(!V.enabled||!V.accessToken))try{const $e=await zt(V),Oe={...V,accessToken:$e},Xe=Q?await KQ(Oe,Q,we):await G0(Oe);We(Xe)}catch($e){console.error("Error loading area paths for type and state:",$e)}},[V,zt]);v.useEffect(()=>{const Q=async()=>{const $e=yZ(ie.startDate,ie.endDate);if(ie.isActive!==$e){const Oe={...ie,isActive:$e};oe(Oe);try{n!=null&&n.id&&await Jj(n.id,{title:Oe.title,goal:Oe.goal,votes_per_user:Oe.votesPerUser,start_date:Oe.startDate,end_date:Oe.endDate,is_active:Oe.isActive})}catch(Xe){console.error("Error updating voting session status:",Xe)}}};Q();const we=setInterval(Q,6e5);return()=>clearInterval(we)},[ie,n==null?void 0:n.id]),v.useEffect(()=>{document.body.style.overflow="",document.body.style.position="",document.body.style.width="",O==="admin"&&(ar(),Ur())},[O,ar,Ur]),v.useEffect(()=>(document.body.style.overflow="",()=>{document.body.style.overflow=""}),[]);const xr=v.useCallback(async(Q=V)=>{if(!Q.organization||!Q.project||!n){W("Organization and project name are required");return}try{ye(!0),W(null);const we=await zt(Q),$e={...Q,accessToken:we},Oe=await H2($e),Xe=K2(Oe);for(const Le of Xe){const Nr=(await ya(n.id)).find(cn=>cn.azure_devops_id===Le.azureDevOpsId),yr=Ev(Le.description),Nt=oh(yr,300);Nr?await Wg(Nr.id,{title:Le.title,description:Nt,epic:Le.epic||null,state:Le.state,areaPath:Le.areaPath,tags:Le.tags,azure_devops_id:Le.azureDevOpsId,azure_devops_url:Le.azureDevOpsUrl}):await Bg({session_id:n.id,title:Le.title,description:Nt,epic:Le.epic||null,state:Le.state,areaPath:Le.areaPath,tags:Le.tags,azure_devops_id:Le.azureDevOpsId,azure_devops_url:Le.azureDevOpsUrl})}const Ve=await ya(n.id),At=await Go(n.id),yt=Ve.map(Le=>{const Nr=At.filter(Nt=>Nt.feature_id===Le.id).map(Nt=>({userId:Nt.user_id,name:Nt.user_name,email:Nt.user_email,voteCount:Nt.vote_count})),yr=Nr.reduce((Nt,cn)=>Nt+cn.voteCount,0);return{id:Le.id,title:Le.title,description:Le.description,epic:Le.epic,state:Le.state,areaPath:Le.area_path,tags:Le.tags||[],azureDevOpsId:Le.azure_devops_id,azureDevOpsUrl:Le.azure_devops_url,votes:yr,voters:Nr}});b(yt);const Lt={...$e,lastSyncTime:new Date().toISOString()};await ec(n.id,Lt),Z(Lt)}catch(we){console.error("Azure DevOps sync error:",we),we instanceof Error&&we.message==="Not authenticated"?(W("Please authenticate with Azure DevOps"),Dr()):W("Failed to fetch features from Azure DevOps. Please try reconnecting.")}finally{ye(!1)}},[V,n,zt,Dr]),ir=v.useCallback(async()=>{if(!V.organization||!V.project){W("Organization and project name are required");return}try{ye(!0),W(null);const Q=await zt(V),we={...V,accessToken:Q},$e=await H2(we),Xe=K2($e).map(Ve=>({...Ve,description:oh(Ev(Ve.description),300)}));Ge(Xe),He(!0)}catch(Q){console.error("Azure DevOps preview error:",Q),Q instanceof Error&&Q.message==="Not authenticated"?(W("Please authenticate with Azure DevOps"),Dr()):W("Failed to fetch features from Azure DevOps. Please try reconnecting.")}finally{ye(!1)}},[V,zt,Dr]),es=v.useCallback(async(Q=!1)=>{if(!(!Re||!n))try{if(ye(!0),Q){const Ve=await ya(n.id);for(const At of Ve)await Yj(At.id)}for(const Ve of Re){const yt=(await ya(n.id)).find(dr=>dr.azure_devops_id===Ve.azureDevOpsId),Lt=Ev(Ve.description),Le=oh(Lt,300);yt?await Wg(yt.id,{title:Ve.title,description:Le,epic:Ve.epic||null,state:Ve.state,areaPath:Ve.areaPath,tags:Ve.tags,azure_devops_id:Ve.azureDevOpsId,azure_devops_url:Ve.azureDevOpsUrl}):await Bg({session_id:n.id,title:Ve.title,description:Le,epic:Ve.epic||null,state:Ve.state,areaPath:Ve.areaPath,tags:Ve.tags,azure_devops_id:Ve.azureDevOpsId,azure_devops_url:Ve.azureDevOpsUrl})}const we=await ya(n.id),$e=await Go(n.id),Oe=we.map(Ve=>{const yt=$e.filter(Le=>Le.feature_id===Ve.id).map(Le=>({userId:Le.user_id,name:Le.user_name,email:Le.user_email,voteCount:Le.vote_count})),Lt=yt.reduce((Le,dr)=>Le+dr.voteCount,0);return{id:Ve.id,title:Ve.title,description:Ve.description,epic:Ve.epic,state:Ve.state,areaPath:Ve.area_path,tags:Ve.tags||[],azureDevOpsId:Ve.azure_devops_id,azureDevOpsUrl:Ve.azure_devops_url,votes:Lt,voters:yt}});b(Oe);const Xe={...V,lastSyncTime:new Date().toISOString()};await ec(n.id,Xe),Z(Xe)}catch(we){console.error("Azure DevOps sync error:",we),W("Failed to sync features from Azure DevOps.")}finally{ye(!1),Ge(null)}},[Re,n,V]),Gt=v.useCallback(async()=>{if(n)try{const Q={organization:V.organization||"newmill",project:V.project||"Product",workItemType:V.workItemType||"Feature",query:V.query,accessToken:void 0,refreshToken:void 0,tokenExpiresAt:void 0,enabled:!1};await ec(n.id,Q),Z(Q),W(null)}catch(Q){console.error("Error disconnecting Azure DevOps:",Q),W("Failed to disconnect from Azure DevOps")}},[V,n]);v.useEffect(()=>{(async()=>{const we=sessionStorage.getItem("oauth_action");if(we&&!(!V.enabled||!V.accessToken))try{we==="preview"?await ir():we==="sync"&&await xr()}finally{sessionStorage.removeItem("oauth_action")}})()},[V.enabled,V.accessToken,ir,xr]);const Br=v.useCallback(()=>{F(!0),Qt(d?"system":"session"),T("admin")},[d]),gr=v.useCallback(()=>{F(!1),Qt(d?"system":"session"),T("voting")},[d]),Wr=v.useCallback(()=>{F(!0),Qt("session"),t?O!=="admin"&&T("admin"):O!=="voting"&&T("voting")},[t,O]),wr=v.useCallback(()=>{d&&(F(!0),Qt("system"),t?O!=="admin"&&T("admin"):O!=="voting"&&T("voting"))},[O,d,t]),Vn=v.useCallback(async Q=>{if(n)try{const we=await Bg({session_id:n.id,title:Q.title,description:Q.description,epic:Q.epic});b($e=>[...$e,{id:we.id,title:we.title,description:we.description,epic:we.epic,votes:0,voters:[]}]),z(!1)}catch(we){console.error("Error adding feature:",we),alert("Failed to add feature")}},[n]),yn=v.useCallback(async Q=>{try{await Wg(Q.id,{title:Q.title,description:Q.description,epic:Q.epic}),b(we=>we.map($e=>$e.id===Q.id?Q:$e)),L(null)}catch(we){console.error("Error updating feature:",we),alert("Failed to update feature")}},[]),_r=v.useCallback(async Q=>{try{await Yj(Q),b(we=>we.filter($e=>$e.id!==Q))}catch(we){console.error("Error deleting feature:",we),alert("Failed to delete feature")}},[]),$s=v.useCallback(Q=>{Se(we=>({...we,showReset:!0,showResetAll:!1,showDeleteSession:!1,targetId:Q}))},[]),on=v.useCallback(async()=>{const Q=pe.targetId;if(!(!Q||!n))try{await c3(n.id,Q);const we=await nn();b(we)}catch(we){console.error("Error resetting votes:",we),alert("Failed to reset votes")}},[pe.targetId,n,nn]),or=v.useCallback(()=>{Se(Q=>({...Q,showReset:!1,showResetAll:!0,showDeleteSession:!1,targetId:null}))},[]),Zt=v.useCallback(()=>{Se(Q=>({...Q,showReset:!1,showResetAll:!1,showDeleteSession:!0,targetId:null}))},[]),Et=v.useCallback(async()=>{if(n){xt(!0);try{await l3(n.id),l(null);try{localStorage.removeItem("voting_system_current_session")}catch{}await u(),p("/sessions",{replace:!0})}catch(Q){console.error("Error deleting session:",Q),alert("Failed to delete session. Please try again.")}finally{xt(!1),Se(Q=>({...Q,showDeleteSession:!1}))}}},[n,p,l,u]),ln=v.useCallback(async()=>{if(n)try{await y3(n.id);const Q=await nn();b(Q)}catch(Q){console.error("Error resetting all votes:",Q),alert("Failed to reset all votes")}},[n,nn]),Vr=v.useCallback((Q,we)=>{if(!s||!ie.isActive)return;const $e=R[Q]||0;let Oe=$e;if(we)if(ce<Ht)Oe=$e+1;else return;else if($e>0)Oe=$e-1;else return;Y(Xe=>{const Ve={...Xe};return Oe===0?delete Ve[Q]:Ve[Q]=Oe,Ve}),je(Xe=>we?Xe+1:Xe-1)},[s,R,ce,ie.isActive,Ht]),ts=v.useCallback(async()=>{if(!(!s||!ie.isActive||!n)&&!(ce<Ht))try{for(const[Oe,Xe]of Object.entries(R))Xe>0&&await p3({session_id:n.id,feature_id:Oe,user_id:s.id,user_name:s.name,user_email:s.email,vote_count:Xe});const Q=await ya(n.id),we=await Go(n.id),$e=Q.map(Oe=>{const Ve=we.filter(yt=>yt.feature_id===Oe.id).map(yt=>({userId:yt.user_id,name:yt.user_name,email:yt.user_email,voteCount:yt.vote_count})),At=Ve.reduce((yt,Lt)=>yt+Lt.voteCount,0);return{id:Oe.id,title:Oe.title,description:Oe.description,epic:Oe.epic,state:Oe.state,areaPath:Oe.area_path,tags:Oe.tags||[],azureDevOpsId:Oe.azure_devops_id,azureDevOpsUrl:Oe.azure_devops_url,votes:At,voters:Ve}});b($e),T("thankyou")}catch(Q){console.error("Error submitting votes:",Q),alert("Failed to submit votes. Please try again.")}},[s,n,ce,R,ie.isActive,Ht]),Pn=v.useCallback(async Q=>{var At,yt;const we={title:Q.title,goal:Q.goal,votes_per_user:Q.votesPerUser,start_date:Q.startDate,end_date:Q.endDate,is_active:Q.isActive,use_auto_votes:Q.useAutoVotes,product_id:Q.product_id??null,product_name:null},$e={},Oe=(Lt,Le)=>{Lt!==void 0&&($e[Le]=Lt)};Oe(Q.originalEndDate,"original_end_date"),Oe(Q.endedEarlyBy,"ended_early_by"),Oe(Q.endedEarlyReason,"ended_early_reason"),Oe(Q.endedEarlyDetails,"ended_early_details"),Oe(Q.reopenReason,"reopen_reason"),Oe(Q.reopenDetails,"reopen_details"),Oe(Q.reopenedBy,"reopened_by"),Oe(Q.reopenedAt,"reopened_at");const Xe={...we,...$e},Ve=async Lt=>{n!=null&&n.id?await Jj(n.id,Lt):await w3(Lt)};try{await Ve(Xe),oe(Q),n!=null&&n.id&&l({...n,title:we.title??n.title,goal:we.goal??n.goal,votes_per_user:we.votes_per_user??n.votes_per_user,use_auto_votes:we.use_auto_votes??n.use_auto_votes,start_date:we.start_date??n.start_date,end_date:we.end_date??n.end_date,is_active:we.is_active??n.is_active,product_id:we.product_id!==void 0?we.product_id??null:Q.product_id??n.product_id??null,product_name:null,original_end_date:$e.original_end_date??n.original_end_date??null,ended_early_by:$e.ended_early_by??n.ended_early_by??null,ended_early_reason:$e.ended_early_reason??n.ended_early_reason??null,ended_early_details:$e.ended_early_details??n.ended_early_details??null,reopen_reason:$e.reopen_reason??n.reopen_reason??null,reopen_details:$e.reopen_details??n.reopen_details??null,reopened_by:$e.reopened_by??n.reopened_by??null,reopened_at:$e.reopened_at??n.reopened_at??null})}catch(Lt){const Le=((yt=(At=Lt==null?void 0:Lt.message)==null?void 0:At.toLowerCase)==null?void 0:yt.call(At))??"",dr=Le.includes("column")&&(Le.includes("reopen_reason")||Le.includes("reopen_details")||Le.includes("reopened_by")||Le.includes("reopened_at")||Le.includes("original_end_date")||Le.includes("ended_early_by")||Le.includes("ended_early_reason")||Le.includes("ended_early_details")),Nr=Le.includes("product_name")||Le.includes('"product_name"'),yr=Le.includes("product_id")||Le.includes('"product_id"');if(dr||Nr||yr){console.warn("[FeatureVoting] Voting session metadata/product columns missing, falling back to basic update.",Lt);try{const Nt={...we};Nr&&delete Nt.product_name,yr&&delete Nt.product_id,await Ve(Nt),oe(Q),n!=null&&n.id&&l({...n,title:Nt.title??n.title,goal:Nt.goal??n.goal,votes_per_user:Nt.votes_per_user??n.votes_per_user,use_auto_votes:Nt.use_auto_votes??n.use_auto_votes,start_date:Nt.start_date??n.start_date,end_date:Nt.end_date??n.end_date,is_active:Nt.is_active??n.is_active,product_id:Nt.product_id!==void 0?Nt.product_id??null:Q.productId??n.product_id??null,product_name:null,original_end_date:Q.originalEndDate??n.original_end_date??null,ended_early_by:Q.endedEarlyBy??n.ended_early_by??null,ended_early_reason:Q.endedEarlyReason??n.ended_early_reason??null,ended_early_details:Q.endedEarlyDetails??n.ended_early_details??null,reopen_reason:Q.reopenReason??n.reopen_reason??null,reopen_details:Q.reopenDetails??n.reopen_details??null,reopened_by:Q.reopenedBy??n.reopened_by??null,reopened_at:Q.reopenedAt??n.reopened_at??null})}catch(Nt){console.error("Error updating voting session (fallback):",Nt),alert("Failed to update voting session settings")}}else console.error("Error updating voting session:",Lt),alert("Failed to update voting session settings")}},[n,l]),us=v.useCallback(async Q=>{if(n){Z(Q);try{await ec(n.id,{organization:Q.organization,project:Q.project,accessToken:Q.accessToken,refreshToken:Q.refreshToken,tokenExpiresAt:Q.tokenExpiresAt,tenantId:Q.tenantId,clientId:Q.clientId,enabled:Q.enabled,workItemType:Q.workItemType,query:Q.query,lastSyncTime:Q.lastSyncTime})}catch(we){console.error("Error saving config:",we)}}},[n]),bs=v.useCallback(()=>{n?p("/results"):T("results")},[n,p]),Vt=v.useMemo(()=>{switch(O){case"voting":return a.jsx(CZ,{features:w,currentUser:s,pendingVotes:R,pendingUsedVotes:ce,onVote:Vr,onSubmitVotes:ts,onToggleAdmin:Br,isAdmin:P,votingSession:ie,navigate:p,effectiveVotesPerUser:Ht,sessionId:(n==null?void 0:n.id)||"",onLogout:y,onSuggestionSubmitted:st,isSystemAdmin:d,isSessionAdmin:m,isStakeholder:f});case"results":return a.jsx(kZ,{features:w,onResetVotes:$s,onResetAllVotes:or,onBack:r?()=>p("../admin"):()=>T("admin"),showVotersList:U,setShowVotersList:ne,votingSession:ie,effectiveVotesPerUser:Ht,onLogout:y});case"thankyou":return a.jsx(_Z,{navigate:p,votingSession:ie});case"admin":default:return t?a.jsx(hZ,{features:w,onAddFeature:Vn,onUpdateFeature:yn,onDeleteFeature:_r,onShowResults:bs,onRequestDeleteSession:Zt,isDeletingSession:qe,showAddForm:q,setShowAddForm:z,editingFeature:H,setEditingFeature:L,onLogout:y,onShowVoterView:gr,votingSession:ie,azureDevOpsConfig:V,onUpdateAzureDevOpsConfig:us,onPreviewAzureDevOpsFeatures:ir,onDisconnectAzureDevOps:Gt,isFetchingAzureDevOps:he,azureFetchError:le,onInitiateOAuth:Dr,availableStates:me,availableAreaPaths:M,availableTags:te,previewFeatures:Re,showPreviewModal:G,setShowPreviewModal:He,onConfirmSync:es,onUpdateVotingSession:Pn,onFetchStatesForType:Rr,onFetchAreaPathsForTypeAndState:an,onFetchTagsForTypeStateAndAreaPath:Zn,onFetchTypesAndStatesForAreaPath:ws,onFetchTypesAndStatesForTags:pr,onFetchTypesAndAreaPathsForStates:sn,suggestedFeatures:Je,otherSessions:_t,onPromoteSuggestion:mr,onMoveSuggestion:Kt,onEditSuggestion:Wt,onDeleteSuggestion:Ut,adminPerspective:Dt,projectOptions:ee}):a.jsxs("div",{className:"max-w-3xl mx-auto text-center py-20 px-6",children:[a.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 rounded-full bg-[#2d4660]/10 text-[#2d4660] mb-6",children:a.jsx(Fn,{className:"h-8 w-8"})}),a.jsx("h2",{className:"text-2xl font-semibold text-[#2d4660] mb-4",children:"Admin tools live on the Admin Dashboard"}),a.jsx("p",{className:"text-gray-600 mb-6",children:"You are viewing the voting experience. To manage sessions, stakeholders, or Azure DevOps connections, open the Admin dashboard from the Admin application."}),a.jsx(ut,{variant:"primary",onClick:()=>p("/admin"),children:"Go to Admin Dashboard"})]})}},[O,w,s,R,ce,Vr,ts,Br,P,ie,$s,or,U,ne,Vn,yn,_r,q,z,H,L,V,us,xr,ir,Gt,he,le,Dr,Re,G,He,es,p,Ht,t,me,M,te,Rr,n,gr,st,Je,_t,mr,Kt,Wt,Ut,Dt,ee,bs]);return n?S?a.jsx("div",{className:"min-h-screen w-full bg-gray-50 flex items-center justify-center",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-[#2d4660] mx-auto mb-4"}),a.jsx("p",{className:"text-gray-600",children:"Loading..."})]})}):!P&&O!=="voting"&&O!=="thankyou"?a.jsx("div",{className:"min-h-screen w-full bg-gray-50 flex items-center justify-center",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-[#2d4660] mx-auto mb-4"}),a.jsx("p",{className:"text-gray-600",children:"Loading voting experience..."})]})}):a.jsxs("div",{className:"w-full bg-gray-50 text-gray-900 font-sans min-h-screen flex flex-col",children:[a.jsx("div",{className:"flex-grow",children:Vt}),a.jsx(jI,{currentRole:P?Dt==="system"?"system-admin":"session-admin":"stakeholder",onSelectStakeholder:P?void 0:gr,onSelectSessionAdmin:P||d?Wr:void 0,onSelectSystemAdmin:d?wr:void 0,showRoleToggle:d||P&&Dt==="system"}),a.jsx(lh,{show:pe.showReset,title:"Reset Votes",message:"Are you sure you want to reset all votes for this feature? This will remove all voting data for this feature.",onConfirm:on,onCancel:()=>Se(Q=>({...Q,showReset:!1})),confirmText:"Reset",type:"reset"}),a.jsx(lh,{show:pe.showResetAll,title:"Reset All Votes",message:"Are you sure you want to reset all votes for all features? This will remove all voting data and cannot be undone.",onConfirm:ln,onCancel:()=>Se(Q=>({...Q,showResetAll:!1})),confirmText:"Reset All",type:"reset"}),a.jsx(lh,{show:pe.showDeleteSession,title:"Delete Voting Session",message:"This will permanently delete the current voting session for all admins and stakeholders. Votes, notes, and settings for this session will be removed. This action cannot be undone.",onConfirm:Et,onCancel:()=>Se(Q=>({...Q,showDeleteSession:!1})),confirmText:qe?"Deleting":"Delete Session",type:"delete"})]}):a.jsx("div",{className:"min-h-screen w-full bg-gray-50 flex items-center justify-center",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-[#2d4660] mx-auto mb-4"}),a.jsx("p",{className:"text-gray-600",children:"Loading session..."})]})})}function EZ(){const{currentUser:e,setCurrentSession:t,refreshSessions:r,setCurrentUser:n,isLoading:s}=aa(),i=Ds(),[l]=rx(),[u,d]=v.useState(!0),[m,f]=v.useState(!1),p=v.useRef(!1),[y,x]=v.useState([]),[w,b]=v.useState({}),[S,_]=v.useState({}),[E,C]=v.useState({}),[O,T]=v.useState(!1),[P,F]=v.useState("admin"),[H,L]=v.useState(!1),q=v.useRef(null),[z,U]=v.useState({}),[ne,ie]=v.useState({}),[oe,V]=v.useState(!1),[Z,ee]=v.useState(!0),[re,me]=v.useState({title:"",goal:"",votesPerUser:10,useAutoVotes:!0,startDate:new Date().toISOString().split("T")[0],endDate:new Date(Date.now()+336*60*60*1e3).toISOString().split("T")[0]}),[I,M]=v.useState({}),[We,te]=v.useState(!1),[ve,he]=v.useState([]),[ye,le]=v.useState(""),[W,Re]=v.useState(""),[Ge,G]=v.useState(null),[He,Je]=v.useState(null),[gt,_t]=v.useState(!1),[Mt,Dt]=v.useState(!1),[Qt,R]=v.useState(!1),[Y,ce]=v.useState(null),[je,pe]=v.useState(!1),[Se,qe]=v.useState(!1),[xt,bt]=v.useState(!1),[Ft,hr]=v.useState(null),[Ht,Ir]=v.useState(!1),[Dr,zt]=v.useState("#2D4660"),nn=v.useRef(null),[ar,Ur]=v.useState(new Set),[st,Wt]=v.useState(null),[Ut,Kt]=v.useState(null),[mr,Rr]=v.useState(!1),[ws,sn]=v.useState(null),[pr,Zn]=v.useState(null),[an,xr]=v.useState(null),[ir,es]=v.useState(null),[Gt,Br]=v.useState(""),[gr,Wr]=v.useState(null),[wr,Vn]=v.useState(!1),[yn,_r]=v.useState(!1),[$s,on]=v.useState("#2D4660");v.useEffect(()=>{const X=l.get("error"),de=l.get("error_description"),ue=l.get("error_code");if(X){const Me=window.location.pathname.startsWith("/feature-voting-app")?"/feature-voting-app":"";let Be="Authentication failed.";ue==="unexpected_failure"&&(de!=null&&de.includes("email"))?Be="Azure AD did not return your email address. Please ensure your Azure AD app has the correct API permissions (User.Read or email) and that your account has an email address.":de&&(Be=decodeURIComponent(de)),sessionStorage.setItem("oauth_error",Be),i(`${Me}/login`,{replace:!0})}},[l,i]),v.useEffect(()=>{(async()=>{if(!oe||!e)return;const de=e.tenant_id??e.tenantId??null;if(!de){he([]),le(""),ce("No tenant assigned. Products cannot be loaded.");return}Dt(!0),ce(null);try{const Me=await xa(de);he(Me),le(Be=>{if(mr&&Be&&Me.some(be=>be.id===Be))return Be;if(st){const xe=Me.find(be=>{var ct;return((ct=be.name)==null?void 0:ct.toLowerCase().trim())===st.toLowerCase().trim()});if(xe!=null&&xe.id)return Wt(null),xe.id}return mr&&Be||""}),U(Be=>{const xe={...Be};return Me.forEach(be=>{be.id&&be.name&&(xe[be.id]=be.name)}),xe}),ie(Be=>{const xe={...Be};return Me.forEach(be=>{be.id&&be.color_hex&&(xe[be.id]=be.color_hex)}),xe})}catch(ue){console.error("Error loading products for modal:",ue),_a!=null&&_a(ue)?ce("Products are not configured yet. Please create the `products` table in Supabase."):ce("Unable to load products. You can still create a session without a product tag."),he([]),le("")}finally{Dt(!1)}})()},[oe,e]);const or=X=>{if(!X||typeof X!="string")return console.error("[parseLocalDate] Invalid date string:",X),new Date;const ue=X.split("T")[0].split(" ")[0].split("-");if(ue.length!==3)return console.error("[parseLocalDate] Invalid date format:",X),new Date;const Me=parseInt(ue[0],10),Be=parseInt(ue[1],10),xe=parseInt(ue[2],10);if(isNaN(Me)||isNaN(Be)||isNaN(xe))return console.error("[parseLocalDate] Invalid date components:",{year:Me,month:Be,day:xe}),new Date;const be=new Date(Me,Be-1,xe,0,0,0,0);return isNaN(be.getTime())?(console.error("[parseLocalDate] Invalid date created:",{year:Me,month:Be,day:xe,dateString:X}),new Date):be},Zt=X=>{if(!X||isNaN(X.getTime()))return console.error("[formatDateToISO] Invalid date:",X),new Date().toISOString().split("T")[0];const de=X.getFullYear(),ue=String(X.getMonth()+1).padStart(2,"0"),Me=String(X.getDate()).padStart(2,"0");return`${de}-${ue}-${Me}`},Et=(X,de)=>{const ue=X.getFullYear(),Me=X.getMonth(),Be=X.getDate();return new Date(ue,Me,Be+de,0,0,0,0)},ln=()=>{const X="ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";let de="";for(let ue=0;ue<8;ue++)de+=X.charAt(Math.floor(Math.random()*X.length));return de},Vr=()=>{me({title:"",goal:"",votesPerUser:10,useAutoVotes:!0,startDate:new Date().toISOString().split("T")[0],endDate:new Date(Date.now()+336*60*60*1e3).toISOString().split("T")[0]}),M({}),Re(""),G(null),ce(null),pe(!1),qe(!1),bt(!1),hr(null),Ir(!1),zt("#2D4660"),Wt(null),ee(!0),Rr(!1),le("")},ts=()=>{const X={};re.title.trim()||(X.title="Session title is required"),re.goal.trim()||(X.goal="Session goal is required"),re.useAutoVotes||(re.votesPerUser<1&&(X.votesPerUser="Votes per user must be at least 1"),re.votesPerUser>100&&(X.votesPerUser="Votes per user cannot exceed 100"));const de=or(re.startDate);or(re.endDate)<=de&&(X.endDate="End date must be after start date");const Me=W.trim().length>0;return!Y&&ve.length>0&&!ye&&!Ft&&!je&&!Me&&(X.product="Please select a product or enter a new product name"),je&&!Me&&(X.product="Please enter a product name or select an existing product"),M(X),Object.keys(X).length===0},Pn=X=>{const{name:de,value:ue}=X.target;me(Me=>{const Be={...Me,[de]:de==="votesPerUser"?parseInt(ue)||0:ue};if(de==="startDate"&&ue){const xe=or(ue),be=Et(xe,14);Be.endDate=Zt(be)}return Be}),I[de]&&M(Me=>{const Be={...Me};return delete Be[de],Be})},us=async()=>{if(!(!He||!e)){_t(!0);try{await BC(He.id),he(X=>X.filter(de=>de.id!==He.id)),U(X=>{const de={...X};return delete de[He.id],de}),ie(X=>{const de={...X};return delete de[He.id],de}),ye===He.id&&le("")}catch(X){console.error("Error deleting product:",X),alert("Failed to delete product. Please try again.")}finally{_t(!1),Je(null)}}},bs=async X=>{if(X.preventDefault(),!!e&&ts()){te(!0);try{const de=ln(),ue=e.tenant_id??e.tenantId??null;let Me=ye&&ye.trim()!==""?ye:null;const Be=W.trim(),xe=Be.length>0,be=ye&&ye.trim()!=="";let ct=null,It=null;if(Ft?(ct=Ft.name,It=Ft.color):xe&&(ct=Be,It=Ge),ct){const Rt=ve.find(D=>D.name.toLowerCase().trim()===ct.toLowerCase().trim());if(Rt)Me=Rt.id;else if(ue)try{const D=await UC(ue,ct,It||void 0);Me=D.id,he(_e=>[..._e,D].sort((Ae,Qe)=>Ae.name.localeCompare(Qe.name))),U(_e=>({..._e,[D.id]:D.name})),ie(_e=>{const Ae={..._e};return D.color_hex&&(Ae[D.id]=D.color_hex),Ae})}catch(D){console.error("Error creating product during session creation:",D),M(_e=>({..._e,submit:"Failed to create product. Please try again."})),te(!1);return}else{console.error("No tenantId available to create product"),M(D=>({...D,submit:"Unable to create product: No tenant assigned."})),te(!1);return}}if(Me){const Rt=y.filter(tt=>tt.product_id===Me),D=re.startDate.split("T")[0],_e=re.endDate.split("T")[0];if(Rt.find(tt=>{const Bt=tt.start_date.split("T")[0],Yt=tt.end_date.split("T")[0];return Bt===D&&Yt===_e})){const tt=z[Me]||"this product";M(Bt=>({...Bt,submit:`A session with the same dates (${Oe(re.startDate)} - ${Oe(re.endDate)}) already exists for ${tt}. Please choose different dates.`})),te(!1);return}const Qe=await qC(Me);if(Qe){const tt=or(Qe.end_date);if(or(re.startDate)<=tt){const Yt=z[Me]||"this product";M(Cr=>({...Cr,submit:`There is already an active session for ${Yt}. The new session must start after ${Oe(Qe.end_date)}.`})),te(!1);return}}}const ft=`${re.startDate}T00:00:00`,Ot=`${re.endDate}T23:59:59`,wt=await HC({title:re.title,goal:re.goal,votes_per_user:re.votesPerUser,use_auto_votes:re.useAutoVotes,start_date:ft,end_date:Ot,is_active:!0,session_code:de,access_type:"invite-only",product_id:Me??null,product_name:null});try{await pc(wt.id,e.id)}catch(Rt){console.error("Error adding session admin (session was created successfully):",Rt),(Rt==null?void 0:Rt.code)==="42501"&&(console.warn("RLS policy violation when adding session admin. The session was created but admin assignment failed."),console.warn("This may require updating RLS policies for the session_admins table."))}const qt=await a3(wt.id)||wt;if(qt.product_id&&ue)try{const D=(await xa(ue)).find(_e=>_e.id===qt.product_id);D&&(U(_e=>({..._e,[D.id]:D.name})),D.color_hex&&D.color_hex.trim()!==""&&ie(_e=>({..._e,[D.id]:D.color_hex})))}catch(Rt){console.error("Error loading product for lookup:",Rt)}t(qt),await r(),await Vt(),V(!1),Vr(),setTimeout(()=>{i("/admin")},100)}catch(de){console.error("Error creating session from modal:",de),M(ue=>({...ue,submit:"Failed to create session. Please try again."}))}finally{te(!1)}}};v.useEffect(()=>{if(!H)return;const X=de=>{q.current&&!q.current.contains(de.target)&&L(!1)};return document.addEventListener("mousedown",X),document.addEventListener("touchstart",X,{passive:!0}),()=>{document.removeEventListener("mousedown",X),document.removeEventListener("touchstart",X)}},[H]);const Vt=v.useCallback(async()=>{var X;if(!e){console.log("[SessionSelectionScreen] No current user, skipping loadUserSessions");return}if(p.current){console.log("[SessionSelectionScreen] Sessions already loading, skipping duplicate call");return}p.current=!0,d(!0);try{const ue=Hv(e.email)||await pl(e.id);T(ue);let Me;ue?Me=await yo():Me=await VC(e.id);const Be=(e==null?void 0:e.tenant_id)??(e==null?void 0:e.tenantId)??null;let xe={},be={};if(Be)try{const Ot=await xa(Be);xe=Ot.reduce((wt,ze)=>(ze.id&&ze.name&&(wt[ze.id]=ze.name),wt),{}),be=Ot.reduce((wt,ze)=>(ze.id&&ze.color_hex&&(wt[ze.id]=ze.color_hex),wt),{})}catch(Ot){console.error("Error loading products for session selection:",Ot)}const ct={},It={},ft={};for(let Ot=0;Ot<Me.length;Ot++){const wt=Me[Ot];try{const[ze,qt,Rt,D]=await Promise.all([ue?Promise.resolve(!0):pm(wt.id,e.id),cx(wt.id,e.email),ya(wt.id),Go(wt.id).catch(Ae=>(console.warn(`Failed to load votes for session ${wt.id}:`,Ae),[]))]);ct[wt.id]={isAdmin:ze,isStakeholder:qt},It[wt.id]=Rt.length;const _e=D.some(Ae=>Ae.user_id===e.id);ft[wt.id]=_e}catch(ze){console.warn(`Error loading data for session ${wt.id}:`,ze),ct[wt.id]={isAdmin:!1,isStakeholder:!1},It[wt.id]=0,ft[wt.id]=!1}}await r(),x(Me),b(ct),_(It),C(ft),U(xe),ie(be)}catch(de){console.error("Error loading sessions:",de),(X=de==null?void 0:de.message)!=null&&X.includes("Failed to fetch")||(de==null?void 0:de.code)==="ERR_FAILED"?(console.warn("Network error loading sessions - will retry. This is usually temporary."),x([]),b({}),_({}),C({})):(x([]),b({}),_({}),C({})),p.current=!1}finally{d(!1)}},[e,r]);v.useEffect(()=>{if(s)return;if((window.location.search.includes("code=")||window.location.hash.includes("access_token")||window.location.search.includes("error="))&&!e&&!m){f(!0);const de=setTimeout(()=>{if(f(!1),!e){const ue=window.location.pathname.startsWith("/feature-voting-app")?"/feature-voting-app":"";i(`${ue}/login`,{replace:!0})}},3e3);return()=>clearTimeout(de)}if(m&&e&&f(!1),!m){if(!e&&!s){const de=window.location.pathname.startsWith("/feature-voting-app")?"/feature-voting-app":"";i(`${de}/login`,{replace:!0});return}e&&!s&&!p.current&&Vt()}},[e,s,i,m]);const Q=X=>{const de=S[X.id]||0;if(X.use_auto_votes){const ue=Math.max(1,Math.floor(de/2));return{votes:ue,displayText:`${ue} votes/user`,isAuto:!0,formula:`Auto: ${de} ${de===1?"feature":"features"}  2 = ${ue}`}}else return{votes:X.votes_per_user,displayText:`${X.votes_per_user} votes/user`,isAuto:!1,formula:""}},we=X=>{t(X);const de=w[X.id];P==="stakeholder"?i("/vote"):de!=null&&de.isAdmin?i("/admin"):i("/vote")},$e=async()=>{try{await Ne.auth.signOut()}catch{}try{t(null)}catch{}n(null);try{localStorage.removeItem("voting_system_current_session"),localStorage.removeItem("azureDevOpsAuthInProgress"),sessionStorage.removeItem("oauth_return_path"),sessionStorage.removeItem("oauth_action")}catch{}L(!1);const X=window.location.pathname.startsWith("/feature-voting-app")?"/feature-voting-app":"";window.location.href=`${X}/login`},Oe=X=>{const ue=X.split("T")[0].split(" ")[0].split("-");if(ue.length!==3)return new Date(X).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}).replace(/\b(\d{4})\b/g,Ot=>`'${Ot.slice(-2)}`);const Me=parseInt(ue[0],10),Be=parseInt(ue[1],10)-1,xe=parseInt(ue[2],10);return new Date(Me,Be,xe).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}).replace(/\b(\d{4})\b/g,It=>`'${It.slice(-2)}`)},Xe=X=>{const de=new Date,ue=new Date(X.start_date),Me=new Date(X.end_date);return de<ue?{text:"Upcoming",color:"text-yellow-600 bg-yellow-50",icon:wm}:de>Me?{text:"Closed",color:"text-gray-600 bg-gray-100",icon:nr}:{text:"Active",color:"text-[#1E6154] bg-[#1E6154]/10",icon:Yr}},Ve=X=>[...X].sort((de,ue)=>{const Me=de!=null&&de.end_date?Date.parse(de.end_date):0;return(ue!=null&&ue.end_date?Date.parse(ue.end_date):0)-Me}),At=(X,de)=>{X.stopPropagation();const ue=`${window.location.origin}/login?session=${de.session_code}`,Me=encodeURIComponent(`You're invited to vote: ${de.title}`),Be=encodeURIComponent(`Hi,

You've been invited to participate in a feature voting session.

Session: ${de.title}
Goal: ${de.goal}

To get started, copy and paste this link into your browser:

${ue}

Voting Period: ${Oe(de.start_date)} - ${Oe(de.end_date)}

Best regards,
${e==null?void 0:e.name}`);window.location.href=`mailto:?subject=${Me}&body=${Be}`},yt=(X,de)=>{X.stopPropagation(),t(de),i("/results")},Lt=(X,de)=>{X.stopPropagation(),t(de),i("/users?filter=session-admin")},Le=(X,de)=>{X.stopPropagation(),t(de),i("/users?filter=stakeholder")},dr=()=>{V(!1),Rr(!1),Vr()};if(u)return a.jsx("div",{className:"min-h-screen w-full bg-gray-50 flex items-center justify-center",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-[#2D4660] mx-auto mb-4"}),a.jsx("p",{className:"text-gray-600",children:"Loading sessions..."})]})});const Nr=Ve(y),yr=O?Nr:Nr.filter(X=>{var de;return(de=w[X.id])==null?void 0:de.isAdmin}),Nt=O?[]:Nr.filter(X=>{var de,ue;return((de=w[X.id])==null?void 0:de.isStakeholder)&&!((ue=w[X.id])!=null&&ue.isAdmin)}),cn=O||yr.length>0,Ms=O&&P==="system-admin",Fs=P==="stakeholder"?Nr.filter(X=>Xe(X).text==="Active"):[],Ls=P==="admin"||P==="system-admin"?yr:[],ji=P==="admin"?Nt:[],Vi=(X,de)=>{const ue={};return X.forEach(Me=>{const Be=$n(Me,de);if(!Be||Be==="No Product"||Be.trim()==="")return;const xe=Be.toLowerCase().trim();ue[xe]||(ue[xe]=[]),ue[xe].push(Me)}),ue},Si=X=>{Ur(de=>{const ue=new Set(de);return ue.has(X)?ue.delete(X):ue.add(X),ue})},qr=(X,de,ue,Me)=>{const Be=Me||ue||X,xe=async be=>{if(!ue)return;be.stopPropagation();let ct=ve.find(It=>It.id===ue);if(!ct){const It=(e==null?void 0:e.tenant_id)??(e==null?void 0:e.tenantId);if(It)try{ct=(await xa(It)).find(Ot=>Ot.id===ue),ct&&he(Ot=>Ot.find(ze=>ze.id===ue)?Ot:[...Ot,ct].sort((ze,qt)=>ze.name.localeCompare(qt.name)))}catch(ft){console.error("Error loading product for edit:",ft)}}ct&&(es(ct),Br(ct.name||""),Wr(ct.color_hex||null),on(ct.color_hex||"#2D4660"))};return a.jsxs("div",{className:"absolute left-0 px-4 py-1 pr-8 rounded-t-md border-b-0 text-sm font-semibold shadow-sm z-20 flex items-center gap-2 whitespace-nowrap group cursor-pointer",style:{top:"0",left:"-1px",transform:"translateY(-100%)",backgroundColor:de.background,color:de.text,borderColor:de.border,borderWidth:"1px",borderBottomWidth:"0",boxShadow:"0 4px 8px rgba(16,24,40,0.06)",borderTopLeftRadius:"0.9rem",borderTopRightRadius:"0.9rem",overflow:"visible"},onMouseEnter:()=>{ue&&P!=="stakeholder"&&cn&&Zn(Be)},onMouseLeave:()=>Zn(null),onClick:P!=="stakeholder"&&cn?xe:void 0,children:[a.jsx(Qv,{className:"h-4 w-4 flex-shrink-0"}),a.jsx("span",{className:"overflow-hidden text-ellipsis flex-1 min-w-0",children:X}),ue&&pr===Be&&P!=="stakeholder"&&cn&&a.jsx("div",{className:"absolute right-2 flex-shrink-0 opacity-80",children:a.jsx(bE,{className:"h-4 w-4",style:{color:de.text}})})]})},si=(X,de,ue,Me,Be,xe,be,ct=!0,It)=>a.jsxs(a.Fragment,{children:[ct&&qr(de,ue,It),a.jsxs("div",{className:"p-6 flex flex-col h-full",children:[a.jsxs("div",{className:"flex justify-between items-start mb-4",children:[a.jsx("div",{children:Me.text==="Active"&&a.jsx("div",{className:"relative inline-block",style:{marginLeft:"-10px",marginTop:"-10px"},children:a.jsxs("button",{onClick:ft=>{ft.stopPropagation(),we(X)},className:"inline-flex items-center px-4 py-2 rounded-md text-sm font-semibold transition-colors text-white shadow-md",style:{backgroundColor:"#1E6154"},onMouseEnter:ft=>ft.currentTarget.style.backgroundColor="#15803d",onMouseLeave:ft=>ft.currentTarget.style.backgroundColor="#1E6154",children:[a.jsx(Gn,{className:"h-4 w-4 mr-1.5"}),"Vote!"]})})}),a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsxs("div",{className:`relative inline-block ${be?"group":""}`,children:[a.jsxs("button",{onClick:ft=>Lt(ft,X),disabled:be,className:`inline-flex items-center px-3 py-1 rounded-full text-xs font-medium transition-colors ${be?"bg-gray-200 text-gray-500":"bg-[#2D4660] text-white hover:bg-[#1D3144]"}`,style:be?{cursor:"not-allowed"}:{},children:[a.jsx(_n,{className:"h-3 w-3 mr-1"}),"Admins"]}),be&&a.jsxs("div",{className:"absolute top-full left-1/2 -translate-x-1/2 mt-2 px-2 py-1 bg-gray-100 text-gray-800 text-xs rounded shadow-sm opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-200 whitespace-nowrap z-10 pointer-events-none",children:["Session Closed",a.jsx("div",{className:"absolute -top-1 left-1/2 -translate-x-1/2 w-2 h-2 bg-gray-100 rotate-45 transform"})]})]}),a.jsxs("div",{className:`relative inline-block ${be?"group":""}`,children:[a.jsxs("button",{onClick:ft=>Le(ft,X),disabled:be,className:`inline-flex items-center px-3 py-1 rounded-full text-xs font-medium transition-colors ${be?"bg-gray-200 text-gray-500":"bg-[#1E5461] text-white hover:bg-[#576C71]"}`,style:be?{cursor:"not-allowed"}:{},children:[a.jsx(Xn,{className:"h-3 w-3 mr-1"}),"Stakeholders"]}),be&&a.jsxs("div",{className:"absolute top-full left-1/2 -translate-x-1/2 mt-2 px-2 py-1 bg-gray-100 text-gray-800 text-xs rounded shadow-sm opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-200 whitespace-nowrap z-10 pointer-events-none",children:["Session Closed",a.jsx("div",{className:"absolute -top-1 left-1/2 -translate-x-1/2 w-2 h-2 bg-gray-100 rotate-45 transform"})]})]})]})]}),a.jsx("h3",{className:"text-lg font-semibold text-[#2D4660] mb-2",children:X.title}),a.jsx("p",{className:"text-sm text-gray-600 mb-4 line-clamp-2",children:X.goal}),a.jsx("div",{className:"flex-1"}),a.jsxs("div",{className:"space-y-2 text-sm text-gray-500",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center",children:[a.jsx(Zr,{className:"h-4 w-4 mr-2"}),a.jsxs("span",{children:[Oe(X.start_date)," - ",Oe(X.end_date)]})]}),a.jsxs("span",{className:`inline-flex items-center ${Me.text==="Active"?"px-3 py-1 text-sm":"px-2 py-0.5 text-xs"} rounded-full font-medium ${Me.color}`,children:[a.jsx(Be,{className:`${Me.text==="Active"?"h-4 w-4":"h-3 w-3"} mr-1`}),Me.text]})]}),a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center",children:[a.jsx(Ys,{className:"h-4 w-4 mr-2"}),a.jsxs("span",{children:[S[X.id]||0," ",S[X.id]===1?"feature":"features"]})]}),a.jsx("span",{className:"text-sm font-medium text-[#2D4660]",children:de})]}),a.jsxs("div",{className:"flex items-start",children:[a.jsx(Gn,{className:"h-4 w-4 mr-2 mt-0.5 flex-shrink-0"}),a.jsxs("div",{className:"flex-1 flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center",children:[a.jsx("span",{className:"break-words",children:xe.displayText}),xe.isAuto&&a.jsxs("div",{className:"group relative ml-1 mt-0.5",children:[a.jsx($u,{className:"h-4 w-4 text-blue-500 cursor-help"}),a.jsxs("div",{className:"absolute bottom-full left-1/2 -translate-x-1/2 mb-2 px-3 py-2 bg-gray-900 text-white text-xs rounded-lg opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-200 whitespace-nowrap z-10 pointer-events-none",children:[xe.formula,a.jsx("div",{className:"absolute top-full left-1/2 -translate-x-1/2 -mt-1 border-4 border-transparent border-t-gray-900"})]})]})]}),Me.text!=="Upcoming"&&a.jsxs("button",{onClick:ft=>yt(ft,X),className:"ml-4 inline-flex items-center px-3 py-1 rounded-full text-xs font-medium bg-[#C89212] text-white hover:bg-[#E0A814] transition-colors cursor-pointer flex-shrink-0",children:[a.jsx(rh,{className:"h-3 w-3 mr-1"}),Me.text==="Closed"?"Final Results":"Current Results"]})]})]})]}),a.jsx("div",{className:"mt-4 pt-4 border-t border-gray-200",children:a.jsxs("div",{className:`relative inline-block w-full ${be?"group":""}`,children:[a.jsxs("button",{onClick:ft=>At(ft,X),disabled:be,className:`w-full flex items-center justify-center px-3 py-2 rounded-md transition-colors ${be?"bg-gray-200 text-gray-500":"bg-blue-50 hover:bg-blue-100"}`,style:be?{cursor:"not-allowed"}:{},children:[a.jsx(pd,{className:`h-4 w-4 mr-2 ${be?"text-gray-500":"text-blue-600"}`}),a.jsx("span",{className:`text-sm font-medium ${be?"text-gray-500":"text-blue-600"}`,children:"Email Invite to Stakeholders"})]}),be&&a.jsxs("div",{className:"absolute top-full left-1/2 -translate-x-1/2 mt-2 px-2 py-1 bg-gray-100 text-gray-800 text-xs rounded shadow-sm opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-200 whitespace-nowrap z-10 pointer-events-none",children:["Session Closed",a.jsx("div",{className:"absolute -top-1 left-1/2 -translate-x-1/2 w-2 h-2 bg-gray-100 rotate-45 transform"})]})]})})]})]});return s||m||u&&!e?a.jsx("div",{className:"min-h-screen w-full bg-gray-50 flex items-center justify-center",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-[#2d4660] mx-auto mb-4"}),a.jsx("p",{className:"text-gray-600",children:"Signing you in..."})]})}):a.jsxs("div",{className:"container mx-auto p-4 max-w-6xl min-h-screen pb-8",children:[a.jsx("div",{className:"hidden md:flex md:justify-center mb-2",children:a.jsx("img",{src:"https://www.steeldynamics.com/wp-content/uploads/2024/05/New-Millennium-color-logo1.png",alt:"New Millennium Building Systems Logo",className:"-mt-4 cursor-pointer hover:opacity-80 transition-opacity",style:{height:"96px",width:"auto"},onClick:()=>i("/sessions")})}),a.jsxs("div",{className:"flex justify-between items-center mb-6",children:[a.jsxs("div",{className:"flex items-center",children:[a.jsx("img",{src:"https://www.steeldynamics.com/wp-content/uploads/2024/05/New-Millennium-color-logo1.png",alt:"New Millennium Building Systems Logo",className:"mr-4 md:hidden cursor-pointer hover:opacity-80 transition-opacity",style:{width:"40px",height:"40px"},onClick:()=>i("/sessions")}),a.jsxs("div",{children:[a.jsx("h1",{className:"text-2xl font-bold text-[#2D4660] md:text-3xl",children:"My Voting Sessions"}),a.jsxs("p",{className:"text-sm text-gray-600",children:["Welcome, ",e==null?void 0:e.name,O&&a.jsx("span",{className:"ml-2 inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium bg-[#C89212] text-white",children:"System Admin"}),!O&&yr.length>0&&a.jsx("span",{className:"ml-2 inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium bg-[#576C71] text-white",children:"Session Admin"}),!O&&yr.length===0&&Nt.length>0&&a.jsx("span",{className:"ml-2 inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium bg-[#8B5A4A] text-white",children:"Stakeholder"})]})]})]}),a.jsxs("div",{ref:q,className:"relative z-40 md:justify-end",children:[a.jsxs("div",{className:"hidden md:flex space-x-2",children:[O&&(P==="admin"||P==="system-admin")&&a.jsx(a.Fragment,{children:a.jsxs("button",{onClick:()=>i("/users"),className:"flex items-center px-4 py-2 bg-[#2D4660] text-white rounded-lg hover:bg-[#173B65] transition-colors",children:[a.jsx(Xn,{className:"h-4 w-4 mr-2"}),"User Management"]})}),(O||yr.length>0)&&(P==="admin"||P==="system-admin")&&a.jsx(a.Fragment,{children:a.jsxs("button",{onClick:()=>{Rr(!1),ee(!0),le(""),V(!0)},className:"flex items-center px-4 py-2 bg-[#C89212] text-white rounded-lg hover:bg-[#6A4234] transition-colors",children:[a.jsx(Mn,{className:"h-4 w-4 mr-2"}),a.jsx("span",{className:"hidden sm:inline",children:"Create Session"}),a.jsx("span",{className:"sm:hidden",children:"Create"})]})}),a.jsxs("button",{onClick:$e,className:"flex items-center px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-colors",children:[a.jsx(zn,{className:"h-4 w-4 mr-2"}),a.jsx("span",{className:"hidden sm:inline",children:"Logout"})]})]}),a.jsx("div",{className:"flex md:hidden justify-end",children:a.jsx("button",{onClick:()=>L(!H),className:"p-2 rounded-md border border-gray-200 bg-white shadow-sm","aria-label":"Open menu",children:a.jsx(Ys,{className:"h-5 w-5 text-gray-700"})})}),H&&a.jsx("div",{className:"absolute right-0 mt-2 w-56 bg-white border border-gray-200 rounded-lg shadow-lg md:hidden z-50",children:a.jsxs("div",{className:"py-1",children:[O&&(P==="admin"||P==="system-admin")&&a.jsx(a.Fragment,{children:a.jsxs("button",{onClick:()=>{L(!1),i("/users")},className:"w-full px-3 py-2 flex items-center text-left hover:bg-gray-50",children:[a.jsx(Xn,{className:"h-4 w-4 mr-2 text-gray-700"}),"User Management"]})}),(O||yr.length>0)&&(P==="admin"||P==="system-admin")&&a.jsx(a.Fragment,{children:a.jsxs("button",{onClick:()=>{L(!1),ee(!0),V(!0)},className:"w-full px-3 py-2 flex items-center text-left hover:bg-gray-50",children:[a.jsx(Mn,{className:"h-4 w-4 mr-2 text-gray-700"}),"Create Session"]})}),a.jsxs("button",{onClick:()=>{L(!1),$e()},className:"w-full px-3 py-2 flex items-center text-left hover:bg-gray-50",children:[a.jsx(zn,{className:"h-4 w-4 mr-2 text-gray-700"}),"Logout"]})]})})]})]}),y.length===0?a.jsxs("div",{className:"bg-white rounded-lg shadow-md p-12 text-center",children:[a.jsx(Gn,{className:"mx-auto h-12 w-12 text-gray-400 mb-4"}),a.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No voting sessions"}),a.jsx("p",{className:"text-sm text-gray-500 mb-6",children:"You are not part of any voting sessions yet."}),O&&a.jsxs("button",{onClick:()=>{ee(!0),V(!0)},className:"inline-flex items-center px-4 py-2 bg-[#2D4660] text-white rounded-lg hover:bg-[#173B65] transition-colors",children:[a.jsx(Mn,{className:"h-5 w-5 mr-2"}),"Create Your First Session"]})]}):a.jsxs("div",{className:"space-y-8",children:[P==="stakeholder"&&a.jsxs("div",{children:[a.jsxs("h2",{className:"text-xl font-semibold text-[#2D4660] mb-4 flex items-center",children:[a.jsx(Gn,{className:"h-5 w-5 mr-2"}),"All Your Voting Sessions"]}),(()=>{const X=Fs.filter(xe=>{const be=$n(xe,z);return be&&be!=="No Product"&&be.trim()!==""}),de=Fs.filter(xe=>{const be=$n(xe,z);return!be||be==="No Product"||be.trim()===""}),ue=Vi(X,z),Me=[],Be=[];return Object.entries(ue).forEach(([xe,be])=>{be.length>=2?Me.push({key:xe,sessions:be}):Be.push(...be)}),a.jsxs("div",{className:"space-y-8",children:[Me.map(({key:xe,sessions:be})=>{var D,_e;const ct=ar.has(xe),It=ct?be:be.slice(0,3),ft=be.length>3?be.length-3:0,Ot=$n(be[0],z),wt=(D=be[0])!=null&&D.product_id?ne[be[0].product_id]:void 0,ze=cs(Ot,wt),qt=(Ae,Qe)=>{const tt=Ae.replace("#",""),Bt=parseInt(tt.substring(0,2),16),Yt=parseInt(tt.substring(2,4),16),Cr=parseInt(tt.substring(4,6),16);return`rgba(${Bt}, ${Yt}, ${Cr}, ${Qe})`},Rt=ze.background?qt(ze.background,.1):"#F9FAFB";return a.jsx("div",{className:"relative",style:{marginTop:"50px"},children:a.jsxs("div",{className:"rounded-lg rounded-tl-none border border-gray-200 pt-2 px-6 pb-6 relative overflow-visible",style:{backgroundColor:Rt,borderColor:ze.border||"#E5E7EB"},children:[qr(Ot,ze,(_e=be[0])==null?void 0:_e.product_id,xe),ft>0&&a.jsx("div",{className:"absolute right-0 z-20 hidden md:block",style:{top:"0",transform:"translateY(calc(-100% - 3px))"},children:a.jsx("button",{onClick:()=>Si(xe),className:"flex items-center gap-1 text-sm text-[#2D4660] hover:text-[#173B65] transition-colors cursor-pointer",children:ct?a.jsxs(a.Fragment,{children:["Show Less",a.jsx(ls,{className:"h-4 w-4 rotate-180"})]}):a.jsxs(a.Fragment,{children:["Show More (",ft,")",a.jsx(ls,{className:"h-4 w-4"})]})})}),cn&&P!=="stakeholder"&&a.jsx("div",{className:"absolute z-20 bottom-[-20px] left-1/2 -translate-x-1/2 md:bottom-auto md:left-auto md:translate-x-0 md:right-[-20px] md:top-1/2 md:-translate-y-1/2",children:a.jsx("button",{onClick:Ae=>{var On;Ae.stopPropagation();const Qe=(On=be[0])==null?void 0:On.product_id,tt=$n(be[0],z);Qe&&le(Qe),tt&&tt!=="No Product"&&Wt(tt);let Bt=be.length>0?or(be[0].end_date):new Date;be.forEach(Jr=>{const lr=or(Jr.end_date);lr>Bt&&(Bt=lr)});const Yt=Et(Bt,1),Cr=Et(Yt,14);me(Jr=>({...Jr,startDate:Zt(Yt),endDate:Zt(Cr)})),Rr(!0),ee(!1),V(!0)},onMouseEnter:()=>Kt(xe),onMouseLeave:()=>Kt(null),className:"flex items-center justify-center w-10 h-10 rounded-full shadow-md",style:{backgroundColor:ze.background||"#C89212",color:ze.text||"#FFFFFF"},title:`Create new session for ${Ot}`,children:a.jsx(Mn,{className:"h-5 w-5"})})}),a.jsx("div",{className:"grid grid-cols-1 gap-0 sm:gap-6 sm:grid-cols-2 lg:grid-cols-3",children:It.map(Ae=>{const Qe=Xe(Ae),tt=Qe.text==="Closed",Bt=Qe.icon,Yt=Q(Ae),Cr=E[Ae.id],On=$n(Ae,z),Jr=Ae.product_id?ne[Ae.product_id]:void 0,lr=cs(On,Jr);return a.jsx("div",{className:"relative z-10 bg-white overflow-visible shadow-md rounded-lg hover:shadow-lg transition-shadow cursor-pointer mt-6 border",style:{borderColor:lr.border,borderWidth:"1px",opacity:tt&&an!==Ae.id?.75:1},onMouseEnter:()=>xr(Ae.id),onMouseLeave:()=>xr(null),onClick:()=>we(Ae),children:a.jsxs("div",{className:"p-6 flex flex-col h-full",children:[a.jsx("div",{className:"flex justify-end items-start mb-4",children:Cr?a.jsxs("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-xs font-medium bg-green-100 text-green-800",children:[a.jsx(Yr,{className:"h-3 w-3 mr-1"}),"Voted"]}):Qe.text==="Active"?a.jsxs("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:[a.jsx(nr,{className:"h-3 w-3 mr-1"}),"Needs Your Vote"]}):null}),a.jsx("h3",{className:"text-lg font-semibold text-[#2D4660] mb-2",children:Ae.title}),a.jsx("p",{className:"text-sm text-gray-600 mb-4 line-clamp-2",children:Ae.goal}),a.jsx("div",{className:"flex-1"}),a.jsxs("div",{className:"space-y-2 text-sm text-gray-500",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center",children:[a.jsx(Zr,{className:"h-4 w-4 mr-2"}),a.jsxs("span",{children:[Oe(Ae.start_date)," - ",Oe(Ae.end_date)]})]}),a.jsxs("span",{className:`inline-flex items-center ${Qe.text==="Active"?"px-3 py-1 text-sm":"px-2 py-0.5 text-xs"} rounded-full font-medium ${Qe.color}`,children:[a.jsx(Bt,{className:`${Qe.text==="Active"?"h-4 w-4":"h-3 w-3"} mr-1`}),Qe.text]})]}),a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center",children:[a.jsx(Ys,{className:"h-4 w-4 mr-2"}),a.jsxs("span",{children:[S[Ae.id]||0," ",S[Ae.id]===1?"feature":"features"," to vote on"]})]}),a.jsx("span",{className:"text-sm font-medium text-[#2D4660]",children:On})]}),a.jsxs("div",{className:"flex items-center",children:[a.jsx(Gn,{className:"h-4 w-4 mr-2"}),a.jsx("span",{children:Yt.displayText}),Yt.isAuto&&a.jsxs("div",{className:"group relative ml-1",children:[a.jsx($u,{className:"h-4 w-4 text-blue-500 cursor-help"}),a.jsxs("div",{className:"absolute bottom-full left-1/2 -translate-x-1/2 mb-2 px-3 py-2 bg-gray-900 text-white text-xs rounded-lg opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-200 whitespace-nowrap z-10 pointer-events-none",children:[Yt.formula,a.jsx("div",{className:"absolute top-full left-1/2 -translate-x-1/2 -mt-1 border-4 border-transparent border-t-gray-900"})]})]})]})]}),a.jsx("div",{className:"mt-4 pt-4 border-t border-gray-200",children:a.jsxs("button",{onClick:ds=>{ds.stopPropagation(),tt||we(Ae)},disabled:tt,className:`w-full flex items-center justify-center px-4 py-2 rounded-lg transition-colors font-medium ${tt?"bg-gray-100 text-gray-500 cursor-not-allowed":Cr?"bg-gray-100 text-gray-700 hover:bg-gray-200":"bg-[#2D4660] text-white hover:bg-[#173B65]"}`,style:tt?{cursor:"not-allowed"}:{},children:[a.jsx(Gn,{className:"h-4 w-4 mr-2"}),Cr?"View or Change Votes":"Cast Your Votes"]})})]})},Ae.id)})}),ft>0&&a.jsx("div",{className:"mt-4 md:hidden",children:a.jsx("button",{onClick:()=>Si(xe),className:"w-full flex items-center justify-center gap-1 px-4 py-2 text-sm font-medium text-[#2D4660] bg-white hover:bg-gray-50 rounded-md border border-gray-300 transition-colors",children:ct?a.jsxs(a.Fragment,{children:["Show Less",a.jsx(ls,{className:"h-4 w-4 rotate-180"})]}):a.jsxs(a.Fragment,{children:["Show More (",ft,")",a.jsx(ls,{className:"h-4 w-4"})]})})})]})},xe)}),(Be.length>0||de.length>0)&&a.jsx("div",{className:"grid grid-cols-1 gap-0 sm:gap-6 sm:grid-cols-2 lg:grid-cols-3",children:[...Be,...de].map(xe=>{const be=Xe(xe),ct=be.text==="Closed",It=be.icon,ft=Q(xe),Ot=E[xe.id],wt=$n(xe,z),ze=xe.product_id?ne[xe.product_id]:void 0,qt=cs(wt,ze),Rt=Be.includes(xe);return a.jsxs("div",{className:"relative z-10 bg-white overflow-visible shadow-md rounded-lg rounded-tl-none hover:shadow-lg transition-shadow cursor-pointer mt-6 border",style:{borderColor:qt.border,borderWidth:"1px",opacity:ct&&an!==xe.id?.75:1},onMouseEnter:()=>xr(xe.id),onMouseLeave:()=>xr(null),onClick:()=>we(xe),children:[qr(wt,qt,xe.product_id),Rt&&cn&&P!=="stakeholder"&&a.jsx("div",{className:"absolute z-20 bottom-[-20px] left-1/2 -translate-x-1/2 md:bottom-auto md:left-auto md:translate-x-0 md:right-[-20px] md:top-1/2 md:-translate-y-1/2",children:a.jsx("button",{onClick:D=>{D.stopPropagation();const _e=xe.product_id,Ae=$n(xe,z);_e&&le(_e),Ae&&Ae!=="No Product"&&Wt(Ae);const Qe=or(xe.end_date),tt=Et(Qe,1),Bt=Et(tt,14);me(Yt=>({...Yt,startDate:Zt(tt),endDate:Zt(Bt)})),Rr(!0),ee(!1),V(!0)},className:"flex items-center justify-center w-10 h-10 rounded-full transition-colors shadow-md hover:shadow-lg",style:{backgroundColor:qt.background||"#C89212",color:qt.text||"#FFFFFF"},onMouseEnter:D=>{const _e=qt.background||"#C89212";D.currentTarget.style.backgroundColor=_e,D.currentTarget.style.filter="brightness(0.8)"},onMouseLeave:D=>{D.currentTarget.style.backgroundColor=qt.background||"#C89212",D.currentTarget.style.filter="brightness(1)"},title:`Create new session for ${wt}`,children:a.jsx(Mn,{className:"h-5 w-5"})})}),a.jsxs("div",{className:"p-6 flex flex-col h-full",children:[a.jsx("div",{className:"flex justify-end items-start mb-4",children:Ot?a.jsxs("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-xs font-medium bg-green-100 text-green-800",children:[a.jsx(Yr,{className:"h-3 w-3 mr-1"}),"Voted"]}):be.text==="Active"?a.jsxs("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:[a.jsx(nr,{className:"h-3 w-3 mr-1"}),"Needs Your Vote"]}):null}),a.jsx("h3",{className:"text-lg font-semibold text-[#2D4660] mb-2",children:xe.title}),a.jsx("p",{className:"text-sm text-gray-600 mb-4 line-clamp-2",children:xe.goal}),a.jsx("div",{className:"flex-1"}),a.jsxs("div",{className:"space-y-2 text-sm text-gray-500",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center",children:[a.jsx(Zr,{className:"h-4 w-4 mr-2"}),a.jsxs("span",{children:[Oe(xe.start_date)," - ",Oe(xe.end_date)]})]}),a.jsxs("span",{className:`inline-flex items-center ${be.text==="Active"?"px-3 py-1 text-sm":"px-2 py-0.5 text-xs"} rounded-full font-medium ${be.color}`,children:[a.jsx(It,{className:`${be.text==="Active"?"h-4 w-4":"h-3 w-3"} mr-1`}),be.text]})]}),a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center",children:[a.jsx(Ys,{className:"h-4 w-4 mr-2"}),a.jsxs("span",{children:[S[xe.id]||0," ",S[xe.id]===1?"feature":"features"," to vote on"]})]}),a.jsx("span",{className:"text-sm font-medium text-[#2D4660]",children:wt})]}),a.jsxs("div",{className:"flex items-center",children:[a.jsx(Gn,{className:"h-4 w-4 mr-2"}),a.jsx("span",{children:ft.displayText}),ft.isAuto&&a.jsxs("div",{className:"group relative ml-1",children:[a.jsx($u,{className:"h-4 w-4 text-blue-500 cursor-help"}),a.jsxs("div",{className:"absolute bottom-full left-1/2 -translate-x-1/2 mb-2 px-3 py-2 bg-gray-900 text-white text-xs rounded-lg opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-200 whitespace-nowrap z-10 pointer-events-none",children:[ft.formula,a.jsx("div",{className:"absolute top-full left-1/2 -translate-x-1/2 -mt-1 border-4 border-transparent border-t-gray-900"})]})]})]})]}),a.jsx("div",{className:"mt-4 pt-4 border-t border-gray-200",children:a.jsxs("button",{onClick:D=>{D.stopPropagation(),ct||we(xe)},disabled:ct,className:`w-full flex items-center justify-center px-4 py-2 rounded-lg transition-colors font-medium ${ct?"bg-gray-100 text-gray-500 cursor-not-allowed":Ot?"bg-gray-100 text-gray-700 hover:bg-gray-200":"bg-[#2D4660] text-white hover:bg-[#173B65]"}`,style:ct?{cursor:"not-allowed"}:{},children:[a.jsx(Gn,{className:"h-4 w-4 mr-2"}),Ot?"View or Change Votes":"Cast Your Votes"]})})]})]},xe.id)})})]})})()]}),(P==="admin"||P==="system-admin")&&a.jsxs(a.Fragment,{children:[P==="admin"&&ji.length>0&&a.jsxs("div",{children:[a.jsxs("h2",{className:"text-xl font-semibold text-[#2D4660] mb-4 flex items-center",children:[a.jsx(Gn,{className:"h-5 w-5 mr-2"}),"Your Voting Sessions"]}),a.jsx("div",{className:"grid grid-cols-1 gap-6 sm:grid-cols-2 lg:grid-cols-3",children:ji.map(X=>{const de=Xe(X),ue=de.text==="Closed",Me=de.icon,Be=Q(X),xe=E[X.id],be=$n(X,z),ct=X.product_id?ne[X.product_id]:void 0,It=cs(be,ct);return a.jsxs("div",{className:"relative z-10 bg-white overflow-visible shadow-md rounded-lg rounded-tl-none hover:shadow-lg transition-shadow cursor-pointer mt-6 border",style:{borderColor:It.border,borderWidth:"1px",opacity:ue&&an!==X.id?.75:1},onMouseEnter:()=>xr(X.id),onMouseLeave:()=>xr(null),onClick:()=>we(X),children:[a.jsxs("div",{className:"absolute left-0 px-4 py-1 rounded-t-md border-b-0 text-sm font-semibold shadow-sm z-20 flex items-center gap-2 whitespace-nowrap overflow-hidden",style:{top:"0",left:"-1px",transform:"translateY(-100%)",backgroundColor:It.background,color:It.text,borderColor:It.border,borderWidth:"1px",borderBottomWidth:"0",boxShadow:"0 4px 8px rgba(16,24,40,0.06)",borderTopLeftRadius:"0.9rem",borderTopRightRadius:"0.9rem"},children:[a.jsx(Qv,{className:"h-4 w-4 flex-shrink-0"}),a.jsx("span",{className:"overflow-hidden text-ellipsis",children:be})]}),a.jsxs("div",{className:"p-6 flex flex-col h-full",children:[a.jsx("div",{className:"flex justify-end items-start mb-4",children:xe?a.jsxs("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-xs font-medium bg-green-100 text-green-800",children:[a.jsx(Yr,{className:"h-3 w-3 mr-1"}),"Voted"]}):de.text==="Active"?a.jsxs("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:[a.jsx(nr,{className:"h-3 w-3 mr-1"}),"Needs Your Vote"]}):null}),a.jsx("h3",{className:"text-lg font-semibold text-[#2D4660] mb-2",children:X.title}),a.jsx("p",{className:"text-sm text-gray-600 mb-4 line-clamp-2",children:X.goal}),a.jsx("div",{className:"flex-1"}),a.jsxs("div",{className:"space-y-2 text-sm text-gray-500",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center",children:[a.jsx(Zr,{className:"h-4 w-4 mr-2"}),a.jsxs("span",{children:[Oe(X.start_date)," - ",Oe(X.end_date)]})]}),a.jsxs("span",{className:`inline-flex items-center ${de.text==="Active"?"px-3 py-1 text-sm":"px-2 py-0.5 text-xs"} rounded-full font-medium ${de.color}`,children:[a.jsx(Me,{className:`${de.text==="Active"?"h-4 w-4":"h-3 w-3"} mr-1`}),de.text]})]}),a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center",children:[a.jsx(Ys,{className:"h-4 w-4 mr-2"}),a.jsxs("span",{children:[S[X.id]||0," ",S[X.id]===1?"feature":"features"," to vote on"]})]}),a.jsx("span",{className:"text-sm font-medium text-[#2D4660]",children:be})]}),a.jsxs("div",{className:"flex items-center",children:[a.jsx(Gn,{className:"h-4 w-4 mr-2"}),a.jsx("span",{children:Be.displayText}),Be.isAuto&&a.jsxs("div",{className:"group relative ml-1",children:[a.jsx($u,{className:"h-4 w-4 text-blue-500 cursor-help"}),a.jsxs("div",{className:"absolute bottom-full left-1/2 -translate-x-1/2 mb-2 px-3 py-2 bg-gray-900 text-white text-xs rounded-lg opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-200 whitespace-nowrap z-10 pointer-events-none",children:[Be.formula,a.jsx("div",{className:"absolute top-full left-1/2 -translate-x-1/2 -mt-1 border-4 border-transparent border-t-gray-900"})]})]})]})]}),a.jsx("div",{className:"mt-4 pt-4 border-t border-gray-200",children:a.jsxs("button",{onClick:ft=>{ft.stopPropagation(),ue||we(X)},disabled:ue,className:`w-full flex items-center justify-center px-4 py-2 rounded-lg transition-colors font-medium ${ue?"bg-gray-100 text-gray-500 cursor-not-allowed":xe?"bg-gray-100 text-gray-700 hover:bg-gray-200":"bg-[#2D4660] text-white hover:bg-[#173B65]"}`,style:ue?{cursor:"not-allowed"}:{},children:[a.jsx(Gn,{className:"h-4 w-4 mr-2"}),xe?"View or Change Votes":"Cast Your Votes"]})})]})]},X.id)})})]}),Ls.length>0&&a.jsxs("div",{children:[a.jsxs("div",{className:"flex flex-col gap-3 sm:flex-row sm:items-center sm:justify-between mb-4",children:[a.jsxs("h2",{className:"text-xl font-semibold text-[#2D4660] flex items-center",children:[a.jsx(_n,{className:"h-5 w-5 mr-2"}),Ms?"All Sessions (System Admin)":"Sessions You Manage"]}),Ms&&a.jsxs("p",{className:"text-sm text-gray-600",children:["Showing ",Ls.length," total sessions across the organization."]})]}),(()=>{const X=Ls.filter(xe=>{const be=$n(xe,z);return be&&be!=="No Product"&&be.trim()!==""}),de=Ls.filter(xe=>{const be=$n(xe,z);return!be||be==="No Product"||be.trim()===""}),ue=Vi(X,z),Me=[],Be=[];return Object.entries(ue).forEach(([xe,be])=>{be.length>=2?Me.push({key:xe,sessions:be}):Be.push(...be)}),a.jsxs("div",{className:"space-y-8",children:[Me.map(({key:xe,sessions:be})=>{var D,_e;const ct=ar.has(xe),It=ct?be:be.slice(0,3),ft=be.length>3?be.length-3:0,Ot=$n(be[0],z),wt=(D=be[0])!=null&&D.product_id?ne[be[0].product_id]:void 0,ze=cs(Ot,wt),qt=(Ae,Qe)=>{const tt=Ae.replace("#",""),Bt=parseInt(tt.substring(0,2),16),Yt=parseInt(tt.substring(2,4),16),Cr=parseInt(tt.substring(4,6),16);return`rgba(${Bt}, ${Yt}, ${Cr}, ${Qe})`},Rt=ze.background?qt(ze.background,.1):"#F9FAFB";return a.jsx("div",{className:"relative",style:{marginTop:"50px"},children:a.jsxs("div",{className:"rounded-lg rounded-tl-none border border-gray-200 pt-2 px-6 pb-6 relative overflow-visible",style:{backgroundColor:Rt,borderColor:ze.border||"#E5E7EB"},children:[qr(Ot,ze,(_e=be[0])==null?void 0:_e.product_id,xe),ft>0&&a.jsx("div",{className:"absolute right-0 z-20 hidden md:block",style:{top:"0",transform:"translateY(calc(-100% - 3px))"},children:a.jsx("button",{onClick:()=>Si(xe),className:"flex items-center gap-1 text-sm text-[#2D4660] hover:text-[#173B65] transition-colors cursor-pointer",children:ct?a.jsxs(a.Fragment,{children:["Show Less",a.jsx(ls,{className:"h-4 w-4 rotate-180"})]}):a.jsxs(a.Fragment,{children:["Show More (",ft,")",a.jsx(ls,{className:"h-4 w-4"})]})})}),(O||P==="admin"||P==="system-admin")&&a.jsx("div",{className:"absolute z-20 bottom-[-20px] left-1/2 -translate-x-1/2 md:bottom-auto md:left-auto md:translate-x-0 md:right-[-20px] md:top-1/2 md:-translate-y-1/2",children:a.jsx("button",{onClick:Ae=>{var On;Ae.stopPropagation();const Qe=(On=be[0])==null?void 0:On.product_id,tt=$n(be[0],z);Qe&&le(Qe),tt&&tt!=="No Product"&&Wt(tt);let Bt=be.length>0?or(be[0].end_date):new Date;be.forEach(Jr=>{const lr=or(Jr.end_date);lr>Bt&&(Bt=lr)});const Yt=Et(Bt,1),Cr=Et(Yt,14);me(Jr=>({...Jr,startDate:Zt(Yt),endDate:Zt(Cr)})),ee(!1),V(!0)},onMouseEnter:()=>Kt(xe),onMouseLeave:()=>Kt(null),className:"flex items-center justify-center w-10 h-10 rounded-full shadow-md",style:{backgroundColor:ze.background||"#C89212",color:ze.text||"#FFFFFF"},title:`Create new session for ${Ot}`,children:a.jsx(Mn,{className:"h-5 w-5"})})}),a.jsxs("div",{className:"grid grid-cols-1 gap-0 sm:gap-6 sm:grid-cols-2 lg:grid-cols-3",children:[It.map(Ae=>{const Qe=Xe(Ae),tt=Qe.icon,Bt=Q(Ae),Yt=Qe.text==="Closed",Cr=$n(Ae,z),On=Ae.product_id?ne[Ae.product_id]:void 0,Jr=cs(Cr,On);return a.jsx("div",{className:"relative z-10 bg-white overflow-visible shadow-md rounded-lg hover:shadow-lg transition-shadow cursor-pointer mt-6 border",style:{borderColor:Jr.border,borderWidth:"1px",opacity:Yt&&an!==Ae.id?.75:1},onMouseEnter:()=>xr(Ae.id),onMouseLeave:()=>xr(null),onClick:()=>we(Ae),children:si(Ae,Cr,Jr,Qe,tt,Bt,Yt,!1,Ae.product_id)},Ae.id)}),be.length===2&&a.jsxs(a.Fragment,{children:[a.jsx("style",{children:`
                                        @keyframes growFromCenter {
                                          from {
                                            opacity: 0;
                                            transform: scale(0.3);
                                          }
                                          to {
                                            opacity: 1;
                                            transform: scale(1);
                                          }
                                        }
                                        @keyframes sparkle {
                                          0%, 100% {
                                            opacity: 0.1;
                                            transform: scale(0.7) rotate(0deg);
                                          }
                                          50% {
                                            opacity: 0.25;
                                            transform: scale(1.3) rotate(180deg);
                                          }
                                        }
                                        @keyframes sparkleSlow {
                                          0%, 100% {
                                            opacity: 0.08;
                                            transform: scale(0.6);
                                          }
                                          50% {
                                            opacity: 0.2;
                                            transform: scale(1.4);
                                          }
                                        }
                                        @keyframes starTwinkle {
                                          0%, 100% {
                                            opacity: 0.12;
                                            transform: scale(0.8) rotate(0deg);
                                          }
                                          25% {
                                            opacity: 0.22;
                                            transform: scale(1.1) rotate(90deg);
                                          }
                                          50% {
                                            opacity: 0.18;
                                            transform: scale(1.3) rotate(180deg);
                                          }
                                          75% {
                                            opacity: 0.22;
                                            transform: scale(1.1) rotate(270deg);
                                          }
                                        }
                                      `}),a.jsx("div",{className:"hidden lg:block relative z-10 overflow-hidden shadow-md rounded-lg mt-6 border cursor-pointer transition-all",style:{borderColor:ze.border||"#E5E7EB",borderWidth:"1px",backgroundColor:"rgba(255, 255, 255, 0.7)"},onMouseEnter:()=>sn(xe),onMouseLeave:()=>sn(null),onClick:Ae=>{var On;Ae.stopPropagation();const Qe=(On=be[0])==null?void 0:On.product_id,tt=$n(be[0],z);Qe&&le(Qe),tt&&tt!=="No Product"&&Wt(tt);let Bt=be.length>0?or(be[0].end_date):new Date;be.forEach(Jr=>{const lr=or(Jr.end_date);lr>Bt&&(Bt=lr)});const Yt=Et(Bt,1),Cr=Et(Yt,14);me(Jr=>({...Jr,startDate:Zt(Yt),endDate:Zt(Cr)})),Rr(!0),ee(!1),V(!0)},children:a.jsxs("div",{className:"p-6 flex flex-col h-full items-center justify-center min-h-[200px] relative rounded-lg transition-all duration-300",style:{backgroundColor:"transparent",backgroundImage:Ut===xe||ws===xe?`radial-gradient(circle at center, ${ze.badgeBackground||"rgba(200, 146, 18, 0.15)"}, transparent 70%)`:"none"},children:[(Ut===xe||ws===xe)&&a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"absolute top-3 left-3 w-1.5 h-1.5 rounded-full",style:{backgroundColor:ze.background||"#C89212",animation:"sparkle 1.8s ease-in-out infinite",animationDelay:"0ms",opacity:.12}}),a.jsx("div",{className:"absolute top-5 left-8 w-1 h-1 rounded-full",style:{backgroundColor:ze.background||"#C89212",animation:"sparkleSlow 2.5s ease-in-out infinite",animationDelay:"200ms",opacity:.1}}),a.jsx("div",{className:"absolute top-8 left-5 w-2 h-2 rounded-full",style:{backgroundColor:ze.background||"#C89212",animation:"sparkle 2.2s ease-in-out infinite",animationDelay:"400ms",opacity:.15}}),a.jsx("div",{className:"absolute top-4 right-6 w-1 h-1 rounded-full",style:{backgroundColor:ze.background||"#C89212",animation:"sparkleSlow 2.8s ease-in-out infinite",animationDelay:"600ms",opacity:.1}}),a.jsx("div",{className:"absolute top-7 right-4 w-1.5 h-1.5 rounded-full",style:{backgroundColor:ze.background||"#C89212",animation:"sparkle 2s ease-in-out infinite",animationDelay:"800ms",opacity:.12}}),a.jsx("div",{className:"absolute top-10 right-9 w-1 h-1 rounded-full",style:{backgroundColor:ze.background||"#C89212",animation:"sparkleSlow 2.3s ease-in-out infinite",animationDelay:"1000ms",opacity:.1}}),a.jsx("div",{className:"absolute bottom-5 left-4 w-2 h-2 rounded-full",style:{backgroundColor:ze.background||"#C89212",animation:"sparkle 2.1s ease-in-out infinite",animationDelay:"1200ms",opacity:.15}}),a.jsx("div",{className:"absolute bottom-7 left-9 w-1 h-1 rounded-full",style:{backgroundColor:ze.background||"#C89212",animation:"sparkleSlow 2.6s ease-in-out infinite",animationDelay:"1400ms",opacity:.1}}),a.jsx("div",{className:"absolute bottom-4 left-12 w-1.5 h-1.5 rounded-full",style:{backgroundColor:ze.background||"#C89212",animation:"sparkle 1.9s ease-in-out infinite",animationDelay:"1600ms",opacity:.12}}),a.jsx("div",{className:"absolute bottom-8 right-5 w-1 h-1 rounded-full",style:{backgroundColor:ze.background||"#C89212",animation:"sparkleSlow 2.4s ease-in-out infinite",animationDelay:"1800ms",opacity:.1}}),a.jsx("div",{className:"absolute bottom-6 right-10 w-1.5 h-1.5 rounded-full",style:{backgroundColor:ze.background||"#C89212",animation:"sparkle 2.2s ease-in-out infinite",animationDelay:"2000ms",opacity:.12}}),a.jsx("div",{className:"absolute bottom-3 right-7 w-1 h-1 rounded-full",style:{backgroundColor:ze.background||"#C89212",animation:"sparkleSlow 2.7s ease-in-out infinite",animationDelay:"2200ms",opacity:.1}}),a.jsx(rc,{className:"absolute top-6 left-12",size:8,style:{color:ze.background||"#C89212",animation:"starTwinkle 3s ease-in-out infinite",animationDelay:"300ms",opacity:.15}}),a.jsx(rc,{className:"absolute top-9 right-12",size:6,style:{color:ze.background||"#C89212",animation:"starTwinkle 3.5s ease-in-out infinite",animationDelay:"700ms",opacity:.12}}),a.jsx(rc,{className:"absolute bottom-9 left-6",size:7,style:{color:ze.background||"#C89212",animation:"starTwinkle 2.8s ease-in-out infinite",animationDelay:"1100ms",opacity:.13}}),a.jsx(rc,{className:"absolute bottom-5 right-12",size:5,style:{color:ze.background||"#C89212",animation:"starTwinkle 3.2s ease-in-out infinite",animationDelay:"1500ms",opacity:.1}}),a.jsx(rc,{className:"absolute top-12 left-1/2 -translate-x-1/2",size:6,style:{color:ze.background||"#C89212",animation:"starTwinkle 2.9s ease-in-out infinite",animationDelay:"500ms",opacity:.12}}),a.jsx(rc,{className:"absolute bottom-12 left-1/2 -translate-x-1/2",size:7,style:{color:ze.background||"#C89212",animation:"starTwinkle 3.3s ease-in-out infinite",animationDelay:"1300ms",opacity:.13}}),a.jsx(tc,{className:"absolute top-2 left-6",size:6,style:{color:ze.background||"#C89212",animation:"sparkle 2.1s ease-in-out infinite",animationDelay:"250ms",opacity:.12}}),a.jsx(tc,{className:"absolute top-11 right-6",size:5,style:{color:ze.background||"#C89212",animation:"sparkleSlow 2.7s ease-in-out infinite",animationDelay:"750ms",opacity:.1}}),a.jsx(tc,{className:"absolute bottom-10 left-10",size:7,style:{color:ze.background||"#C89212",animation:"sparkle 2.4s ease-in-out infinite",animationDelay:"1150ms",opacity:.13}}),a.jsx(tc,{className:"absolute bottom-2 right-8",size:6,style:{color:ze.background||"#C89212",animation:"sparkleSlow 2.9s ease-in-out infinite",animationDelay:"1550ms",opacity:.11}}),a.jsx(tc,{className:"absolute top-1/2 left-2",size:5,style:{color:ze.background||"#C89212",animation:"sparkle 2.6s ease-in-out infinite",animationDelay:"450ms",opacity:.1}}),a.jsx(tc,{className:"absolute top-1/2 right-2",size:6,style:{color:ze.background||"#C89212",animation:"sparkleSlow 2.8s ease-in-out infinite",animationDelay:"950ms",opacity:.12}}),a.jsx("div",{className:"absolute top-1/4 left-1/4 w-1 h-1 rounded-full",style:{backgroundColor:ze.background||"#C89212",animation:"sparkleSlow 2.2s ease-in-out infinite",animationDelay:"300ms",opacity:.1}}),a.jsx("div",{className:"absolute top-1/3 right-1/4 w-1.5 h-1.5 rounded-full",style:{backgroundColor:ze.background||"#C89212",animation:"sparkle 2.3s ease-in-out infinite",animationDelay:"900ms",opacity:.12}}),a.jsx("div",{className:"absolute bottom-1/4 left-1/3 w-1 h-1 rounded-full",style:{backgroundColor:ze.background||"#C89212",animation:"sparkleSlow 2.5s ease-in-out infinite",animationDelay:"1500ms",opacity:.1}}),a.jsx("div",{className:"absolute bottom-1/3 right-1/3 w-1.5 h-1.5 rounded-full",style:{backgroundColor:ze.background||"#C89212",animation:"sparkle 2.1s ease-in-out infinite",animationDelay:"600ms",opacity:.12}})]}),a.jsxs("div",{className:"flex flex-col items-center justify-center gap-2 z-10",style:{opacity:Ut===xe||ws===xe?1:0,transformOrigin:"center center",animation:Ut===xe||ws===xe?"growFromCenter 0.3s ease-out forwards":"none"},children:[a.jsx(Mn,{className:"h-8 w-8",style:{color:ze.background||"#C89212"}}),a.jsxs("div",{className:"flex flex-col items-center justify-center text-base font-semibold",style:{color:ze.background||"#C89212"},children:[a.jsx("span",{children:"Create"}),a.jsx("span",{children:"New Session"})]})]})]})})]})]}),ft>0&&a.jsx("div",{className:"mt-4 md:hidden",children:a.jsx("button",{onClick:()=>Si(xe),className:"w-full flex items-center justify-center gap-1 px-4 py-2 text-sm font-medium text-[#2D4660] bg-white hover:bg-gray-50 rounded-md border border-gray-300 transition-colors",children:ct?a.jsxs(a.Fragment,{children:["Show Less",a.jsx(ls,{className:"h-4 w-4 rotate-180"})]}):a.jsxs(a.Fragment,{children:["Show More (",ft,")",a.jsx(ls,{className:"h-4 w-4"})]})})})]})},xe)}),(Be.length>0||de.length>0)&&a.jsxs("div",{className:"grid grid-cols-1 gap-0 sm:gap-6 sm:grid-cols-2 lg:grid-cols-3",children:[[...Be,...de].map(xe=>{const be=Xe(xe),ct=be.icon,It=Q(xe),ft=be.text==="Closed",Ot=$n(xe,z),wt=xe.product_id?ne[xe.product_id]:void 0,ze=cs(Ot,wt),qt=Be.includes(xe);return a.jsxs("div",{className:"relative z-10 bg-white overflow-visible shadow-md rounded-lg rounded-tl-none hover:shadow-lg transition-shadow cursor-pointer mt-6 border",style:{borderColor:ze.border,borderWidth:"1px",opacity:ft&&an!==xe.id?.75:1},onMouseEnter:()=>xr(xe.id),onMouseLeave:()=>xr(null),onClick:()=>we(xe),children:[qt&&(O||P==="admin"||P==="system-admin")&&a.jsx("div",{className:"absolute z-20 bottom-[-20px] left-1/2 -translate-x-1/2 md:bottom-auto md:left-auto md:translate-x-0 md:right-[-20px] md:top-1/2 md:-translate-y-1/2",children:a.jsx("button",{onClick:Rt=>{Rt.stopPropagation();const D=xe.product_id,_e=$n(xe,z);D&&le(D),_e&&_e!=="No Product"&&Wt(_e);const Ae=or(xe.end_date),Qe=Et(Ae,1),tt=Et(Qe,14);me(Bt=>({...Bt,startDate:Zt(Qe),endDate:Zt(tt)})),Rr(!0),ee(!1),V(!0)},className:"flex items-center justify-center w-10 h-10 rounded-full transition-colors shadow-md hover:shadow-lg",style:{backgroundColor:ze.background||"#C89212",color:ze.text||"#FFFFFF"},onMouseEnter:Rt=>{const D=ze.background||"#C89212";Rt.currentTarget.style.backgroundColor=D,Rt.currentTarget.style.filter="brightness(0.8)"},onMouseLeave:Rt=>{Rt.currentTarget.style.backgroundColor=ze.background||"#C89212",Rt.currentTarget.style.filter="brightness(1)"},title:`Create new session for ${Ot}`,children:a.jsx(Mn,{className:"h-5 w-5"})})}),si(xe,Ot,ze,be,ct,It,ft,!0,xe.product_id)]},xe.id)}),Ls.length===2&&Be.length+de.length>0&&a.jsx("div",{className:"hidden lg:block relative z-10 bg-white overflow-visible shadow-md rounded-lg hover:shadow-lg transition-shadow mt-6 border border-gray-200",children:a.jsx("div",{className:"p-6 flex flex-col h-full items-end justify-center min-h-[200px]",children:a.jsxs("button",{onClick:()=>{ee(!0),V(!0)},className:"flex items-center px-6 py-3 bg-[#C89212] text-white rounded-lg hover:bg-[#6A4234] transition-colors font-semibold",children:[a.jsx(Mn,{className:"h-5 w-5 mr-2"}),"Create Session"]})})})]})]})})()]})]})]}),a.jsx(as,{isOpen:oe,onClose:dr,title:"Create Voting Session",maxWidth:"max-w-3xl",children:a.jsxs("form",{onSubmit:bs,className:"space-y-6",children:[a.jsxs("div",{className:"space-y-1",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Product *"}),!je&&!Ft?mr&&ye?a.jsx("div",{className:"flex items-center gap-3 px-4 py-2 border border-gray-300 rounded-md bg-gray-50",children:(()=>{const X=ve.find(Be=>Be.id===ye),de=(X==null?void 0:X.name)||z[ye]||"Unknown Product",ue=(X==null?void 0:X.color_hex)||ne[ye],Me=cs(de,ue);return a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"w-6 h-6 rounded-md border flex-shrink-0",style:{backgroundColor:Me.background||"#2D4660",borderColor:Me.border||"#2D4660"}}),a.jsx("span",{className:"font-medium text-gray-900 flex-1",children:de})]})})()}):a.jsx("div",{className:"space-y-3",children:a.jsxs("div",{className:"flex flex-col gap-3 sm:flex-row sm:items-end",children:[a.jsx("div",{className:"flex-1 w-full",children:a.jsx(yI,{label:"",products:ve,value:ye,onChange:async X=>{if(le(X),X){Re("");try{const de=y.filter(ue=>ue.product_id===X);if(de.length>0){let ue=or(de[0].end_date);de.forEach(xe=>{const be=or(xe.end_date);be>ue&&(ue=be)});const Me=Et(ue,1),Be=Et(Me,14);me(xe=>({...xe,startDate:Zt(Me),endDate:Zt(Be)}))}else{const ue=new Date,Me=Et(ue,14);me(Be=>({...Be,startDate:Zt(ue),endDate:Zt(Me)}))}}catch(de){console.error("Error calculating dates for selected product:",de);const ue=new Date,Me=Et(ue,14);me(Be=>({...Be,startDate:Zt(ue),endDate:Zt(Me)}))}}I.product&&M(de=>{const ue={...de};return delete ue.product,ue})},isLoading:Mt,error:Y,disabled:Mt||ve.length===0,placeholder:"Select a product",helperText:!Mt&&ve.length===0&&!Y&&Z?"No products found yet. Enter a product name below to create one.":void 0,allowDelete:Z,onRequestDeleteProduct:Z?(X=>{Je(X)}):void 0,className:"w-full"})}),Z&&a.jsxs("div",{className:"flex items-center gap-2 sm:flex-none",children:[a.jsx("span",{className:"text-gray-500 font-medium px-2",children:"or"}),a.jsxs("button",{type:"button",onClick:()=>pe(!0),disabled:Mt,className:"px-4 py-2 bg-[#1E5461] text-white rounded-md hover:bg-[#576C71] transition-colors font-medium whitespace-nowrap disabled:opacity-50 disabled:cursor-not-allowed",children:[a.jsx(Mn,{className:"h-4 w-4 inline mr-2"}),"Create New Product"]})]})]})}):Ft?a.jsxs("div",{className:"flex items-center gap-3 px-4 py-2 border border-gray-300 rounded-md cursor-pointer hover:border-[#2D4660] transition-colors animate-in fade-in duration-300",onClick:()=>{hr(null),Re(Ft.name),G(Ft.color),pe(!0),qe(!0),bt(!1)},children:[a.jsx("div",{className:"w-6 h-6 rounded-md border flex-shrink-0",style:{backgroundColor:Ft.color||"#2D4660",borderColor:Ft.color||"#2D4660"}}),a.jsx("span",{className:"font-medium text-gray-900 flex-1",children:Ft.name}),a.jsx("span",{className:"text-xs text-gray-500",children:"Click to edit"})]}):Z&&je?a.jsx("div",{className:"space-y-3",children:a.jsxs("div",{className:"flex gap-3 items-center",children:[a.jsxs("div",{className:"flex-1",style:{animation:"dramaticSlideIn 1.2s cubic-bezier(0.34, 1.56, 0.64, 1) forwards"},children:[a.jsx("style",{children:`
                      @keyframes dramaticSlideIn {
                        from {
                          opacity: 0;
                          transform: translateX(150px) scale(0.9);
                        }
                        to {
                          opacity: 1;
                          transform: translateX(0) scale(1);
                        }
                      }
                    `}),a.jsx("input",{type:"text",value:W,onChange:X=>{Re(X.target.value),X.target.value.trim()&&!Se&&setTimeout(()=>qe(!0),200),Y&&ce(null)},placeholder:"Enter product name...",autoFocus:!0,className:"w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-0 focus:border-[#2D4660]"})]}),Se&&a.jsxs("div",{className:"flex items-center gap-2 overflow-hidden",style:{animation:"slideInFromRight 1s ease-out forwards"},children:[a.jsx("style",{children:`
                        @keyframes slideInFromRight {
                          from {
                            opacity: 0;
                            transform: translateX(100px);
                          }
                          to {
                            opacity: 1;
                            transform: translateX(0);
                          }
                        }
                      `}),a.jsx("label",{className:"text-sm font-medium text-gray-700 whitespace-nowrap",children:"Product Color"}),a.jsx("button",{type:"button",onClick:()=>{zt(Ge||"#2D4660"),Ir(!0),setTimeout(()=>{var X;(X=document.getElementById("native-color-input"))==null||X.click()},100)},className:"block w-10 h-10 rounded-md border-2 border-gray-300 hover:border-gray-400 transition-all flex items-center justify-center overflow-hidden",style:Ge?{backgroundColor:Ge}:{backgroundColor:"#ffffff"},children:!Ge&&a.jsx("img",{src:"/colorpicker.png",alt:"Color Picker",className:"w-8 h-8 object-contain"})})]})]})}):null,I.product&&a.jsxs("p",{className:"text-sm text-red-600 flex items-center",children:[a.jsx(nr,{className:"h-4 w-4 mr-1"}),I.product]}),Y&&(je||!!Ft)&&a.jsxs("p",{className:"text-sm text-red-600 flex items-center",children:[a.jsx(nr,{className:"h-4 w-4 mr-1"}),Y]})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Session Title *"}),a.jsx("input",{ref:nn,type:"text",name:"title",value:re.title,onChange:Pn,placeholder:"e.g., Q3 Product Priorities, Sprint 5, Sprint 5: Mobile Updates",className:`w-full px-4 py-2 border rounded-md focus:outline-none focus:ring-0 focus:border-[#2d4660] ${I.title?"border-red-500":"border-gray-300"}`}),I.title&&a.jsxs("p",{className:"mt-1 text-sm text-red-600 flex items-center",children:[a.jsx(nr,{className:"h-4 w-4 mr-1"}),I.title]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Session Goal *"}),a.jsx("textarea",{name:"goal",value:re.goal,onChange:Pn,rows:2,placeholder:"Describe the purpose of this voting session...",className:`w-full px-4 py-2 border rounded-md focus:outline-none focus:ring-0 focus:border-[#2d4660] ${I.goal?"border-red-500":"border-gray-300"}`}),I.goal&&a.jsxs("p",{className:"mt-1 text-sm text-red-600 flex items-center",children:[a.jsx(nr,{className:"h-4 w-4 mr-1"}),I.goal]})]})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Votes Per User *"}),a.jsxs("div",{className:"flex items-center mb-3",children:[a.jsx("input",{type:"checkbox",id:"modalAutoVotes",checked:re.useAutoVotes,onChange:X=>me(de=>({...de,useAutoVotes:X.target.checked})),className:"h-4 w-4 cursor-pointer rounded border-gray-300 accent-[#3A9B5C] focus:outline-none focus:ring-0"}),a.jsx("label",{htmlFor:"modalAutoVotes",className:"ml-2 text-sm text-gray-700 cursor-pointer",children:"Auto-calculate votes (half of feature count, minimum 1)"})]}),!re.useAutoVotes&&a.jsxs(a.Fragment,{children:[a.jsx("input",{type:"number",name:"votesPerUser",value:re.votesPerUser,onChange:Pn,min:"1",max:"100",className:`w-full px-4 py-2 border rounded-md focus:outline-none focus:ring-0 focus:border-[#2d4660] ${I.votesPerUser?"border-red-500":"border-gray-300"}`}),I.votesPerUser&&a.jsxs("p",{className:"mt-1 text-sm text-red-600 flex items-center",children:[a.jsx(nr,{className:"h-4 w-4 mr-1"}),I.votesPerUser]})]}),a.jsx("p",{className:"mt-2 text-xs text-gray-500",children:re.useAutoVotes?"Votes will automatically be set to half the number of features (minimum 1).":"Each stakeholder receives this many votes."})]}),a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Start Date *"}),a.jsx("input",{type:"date",name:"startDate",value:re.startDate,onChange:Pn,className:"w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-0 focus:border-[#2d4660]"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"End Date *"}),a.jsx("input",{type:"date",name:"endDate",value:re.endDate,onChange:Pn,className:`w-full px-4 py-2 border rounded-md focus:outline-none focus:ring-0 focus:border-[#2d4660] ${I.endDate?"border-red-500":"border-gray-300"}`}),I.endDate&&a.jsxs("p",{className:"mt-1 text-sm text-red-600 flex items-center",children:[a.jsx(nr,{className:"h-4 w-4 mr-1"}),I.endDate]})]})]})]}),I.submit&&a.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-3 text-sm text-red-700 flex items-center",children:[a.jsx(nr,{className:"h-4 w-4 mr-2"}),I.submit]}),a.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t",children:[a.jsx(ut,{type:"button",variant:"secondary",onClick:dr,disabled:We,children:"Cancel"}),a.jsx(ut,{type:"submit",variant:je&&W.trim()&&Ge?"gold":"primary",disabled:We,className:`transition-all duration-500 ease-in-out ${je&&W.trim()&&Ge?"relative overflow-hidden":""}`,children:We?"Creating...":je&&W.trim()&&Ge?a.jsxs(a.Fragment,{children:[a.jsxs("span",{className:"relative z-10 flex items-center",children:[a.jsx(Mn,{className:"h-4 w-4 mr-2"}),"Create New Product and Session"]}),a.jsx("span",{className:"absolute top-1 left-1/4 w-1 h-1 bg-white rounded-full animate-ping opacity-75",style:{animationDelay:"0ms",animationDuration:"1.5s"}}),a.jsx("span",{className:"absolute top-2 right-1/3 w-1 h-1 bg-white rounded-full animate-ping opacity-75",style:{animationDelay:"300ms",animationDuration:"1.5s"}}),a.jsx("span",{className:"absolute bottom-2 left-1/3 w-1 h-1 bg-white rounded-full animate-ping opacity-75",style:{animationDelay:"600ms",animationDuration:"1.5s"}}),a.jsx("span",{className:"absolute bottom-1 right-1/4 w-1 h-1 bg-white rounded-full animate-ping opacity-75",style:{animationDelay:"900ms",animationDuration:"1.5s"}})]}):"Create Session"})]})]})}),Ht&&a.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",onClick:()=>Ir(!1),children:a.jsx("div",{className:"bg-white rounded-lg shadow-xl px-3 py-2 w-auto mx-4",onClick:X=>X.stopPropagation(),children:a.jsxs("div",{className:"flex gap-3 items-stretch",children:[a.jsxs("div",{className:"flex-shrink-0",style:{width:"240px",height:"260px"},children:[a.jsx("input",{id:"native-color-input",type:"color",value:Dr,onChange:X=>zt(X.target.value),ref:X=>{X&&Ht&&setTimeout(()=>X.click(),50)},className:"opacity-0 absolute",style:{width:"1px",height:"1px"}}),a.jsx("div",{className:"w-full h-full"})]}),a.jsxs("button",{type:"button",onClick:()=>{G(Dr),Ir(!1),setTimeout(()=>{var X;(X=nn.current)==null||X.focus()},100)},className:"px-6 rounded-lg text-white font-bold shadow-lg hover:shadow-xl transition-all flex flex-col items-center justify-center gap-3 text-lg flex-shrink-0",style:{backgroundColor:Dr,height:"260px",minWidth:"100px"},children:[a.jsx(Yr,{className:"h-8 w-8"}),a.jsxs("div",{className:"text-center leading-tight",children:[a.jsx("div",{children:"Looks"}),a.jsx("div",{children:"Good"})]})]})]})})}),P==="stakeholder"&&y.length>0&&a.jsx("div",{className:"relative z-10 mt-8 bg-blue-50 border border-blue-200 rounded-lg p-4",children:a.jsxs("div",{className:"flex items-start",children:[a.jsx(Gn,{className:"h-5 w-5 text-blue-600 mr-3 mt-0.5"}),a.jsxs("div",{className:"text-sm text-blue-800",children:[a.jsx("p",{className:"font-medium mb-1",children:"About Voting Sessions:"}),a.jsx("p",{children:"Click on any session card to cast your votes. You can change your votes at any time before the voting period ends."})]})]})}),P==="admin"&&ji.length>0&&Ls.length===0&&a.jsx("div",{className:"relative z-10 mt-8 bg-blue-50 border border-blue-200 rounded-lg p-4",children:a.jsxs("div",{className:"flex items-start",children:[a.jsx(Gn,{className:"h-5 w-5 text-blue-600 mr-3 mt-0.5"}),a.jsxs("div",{className:"text-sm text-blue-800",children:[a.jsx("p",{className:"font-medium mb-1",children:"About Voting Sessions:"}),a.jsx("p",{children:"Click on any session card to cast your votes. You can change your votes at any time before the voting period ends."})]})]})}),P==="admin"&&Ls.length>0&&a.jsx("div",{className:"relative z-10 mt-8 bg-blue-50 border border-blue-200 rounded-lg p-4",children:a.jsxs("div",{className:"flex items-start",children:[a.jsx(Xn,{className:"h-5 w-5 text-blue-600 mr-3 mt-0.5"}),a.jsxs("div",{className:"text-sm text-blue-800",children:[a.jsx("p",{className:"font-medium mb-1",children:"Managing Sessions:"}),a.jsx("p",{children:'Click "Email Invite to Stakeholders" on any session card to send invitation links. Use the Admins and Stakeholders buttons to manage access.'})]})]})}),P==="system-admin"&&a.jsx("div",{className:"relative z-10 mt-8 bg-purple-50 border border-purple-200 rounded-lg p-4",children:a.jsxs("div",{className:"flex items-start",children:[a.jsx(Fn,{className:"h-5 w-5 text-purple-600 mr-3 mt-0.5"}),a.jsxs("div",{className:"text-sm text-purple-900",children:[a.jsx("p",{className:"font-medium mb-1",children:"System Admin Tips:"}),a.jsxs("ul",{className:"list-disc list-inside space-y-1",children:[a.jsx("li",{children:"Use this view to audit every session across the tenant without switching teams."}),a.jsx("li",{children:"Jump into any card to open the admin dashboard and assist local admins."}),a.jsx("li",{children:"Need a quick rollout? Click Create Session above to spin up a new voting round for any product."})]})]})]})}),a.jsx(jI,{currentRole:O&&P==="system-admin"?"system-admin":P==="admin"?"session-admin":"stakeholder",onSelectStakeholder:()=>F("stakeholder"),onSelectSessionAdmin:()=>F("admin"),onSelectSystemAdmin:O?()=>F("system-admin"):void 0,showRoleToggle:cn||O}),He&&a.jsxs(as,{isOpen:!0,onClose:()=>Je(null),title:"Delete Product",children:[a.jsxs("p",{className:"text-sm text-gray-700 mb-4",children:["Are you sure you want to delete ",a.jsx("span",{className:"font-semibold",children:He.name}),"? This will remove it for everyone in your tenant."]}),a.jsxs("div",{className:"flex justify-end gap-3",children:[a.jsx(ut,{variant:"secondary",onClick:()=>Je(null),disabled:gt,children:"Cancel"}),a.jsx(ut,{variant:"danger",onClick:us,disabled:gt,children:gt?"Deleting":"Delete"})]})]}),ir&&a.jsx(as,{isOpen:!0,onClose:()=>{es(null),Br(""),Wr(null),_r(!1)},title:"Edit Product",children:a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Product Name *"}),a.jsx("input",{type:"text",value:Gt,onChange:X=>Br(X.target.value),placeholder:"Enter product name",className:"w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-0 focus:border-[#2D4660]"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Product Color"}),a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("button",{type:"button",onClick:()=>{on(gr||"#2D4660"),_r(!0)},className:"block w-12 h-12 rounded-md border-2 border-gray-300 hover:border-gray-400 transition-all flex items-center justify-center overflow-hidden",style:gr?{backgroundColor:gr}:{backgroundColor:"#ffffff"},children:!gr&&a.jsx("img",{src:"/colorpicker.png",alt:"Color Picker",className:"w-8 h-8 object-contain"})}),a.jsx("span",{className:"text-sm text-gray-600",children:gr||"No color selected"})]})]}),a.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t",children:[a.jsx(ut,{variant:"secondary",onClick:()=>{es(null),Br(""),Wr(null),_r(!1)},disabled:wr,children:"Cancel"}),a.jsx(ut,{variant:"primary",onClick:async()=>{if(!(!(ir!=null&&ir.id)||!Gt.trim())){Vn(!0);try{await lx(ir.id,{name:Gt.trim(),color_hex:gr});const X=(e==null?void 0:e.tenant_id)??(e==null?void 0:e.tenantId);if(X){const de=await xa(X);he(de.sort((Be,xe)=>Be.name.localeCompare(xe.name)));const ue={},Me={};de.forEach(Be=>{ue[Be.id]=Be.name||"",Be.color_hex&&(Me[Be.id]=Be.color_hex)}),U(ue),ie(Me)}es(null),Br(""),Wr(null),_r(!1),await r(),await Vt()}catch(X){console.error("Error updating product:",X),alert("Failed to update product. Please try again.")}finally{Vn(!1)}}},disabled:wr||!Gt.trim(),children:wr?"Updating...":"Update Product"})]})]})}),yn&&a.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",onClick:()=>_r(!1),children:a.jsx("div",{className:"bg-white rounded-lg shadow-xl px-3 py-2 w-auto mx-4",onClick:X=>X.stopPropagation(),children:a.jsxs("div",{className:"flex gap-3 items-stretch",children:[a.jsxs("div",{className:"flex-shrink-0",style:{width:"240px",height:"260px"},children:[a.jsx("input",{id:"edit-native-color-input",type:"color",value:$s,onChange:X=>on(X.target.value),ref:X=>{X&&yn&&setTimeout(()=>X.click(),50)},className:"opacity-0 absolute",style:{width:"1px",height:"1px"}}),a.jsx("div",{className:"w-full h-full"})]}),a.jsxs("button",{type:"button",onClick:()=>{Wr($s),_r(!1)},className:"px-6 rounded-lg text-white font-bold shadow-lg hover:shadow-xl transition-all flex flex-col items-center justify-center gap-3 text-lg flex-shrink-0",style:{backgroundColor:$s,height:"260px",minWidth:"100px"},children:[a.jsx(Yr,{className:"h-8 w-8"}),a.jsxs("div",{className:"text-center leading-tight",children:[a.jsx("div",{children:"Looks"}),a.jsx("div",{children:"Good"})]})]})]})})})]})}function AZ(){const{currentUser:e,setCurrentSession:t,refreshSessions:r,setCurrentUser:n}=aa(),s=Ds(),i=async()=>{try{await Ne.auth.signOut()}catch{}try{t(null)}catch{}n(null);try{localStorage.removeItem("voting_system_current_session"),localStorage.removeItem("azureDevOpsAuthInProgress"),sessionStorage.removeItem("oauth_return_path"),sessionStorage.removeItem("oauth_action")}catch{}s("/login",{replace:!0})},[l,u]=v.useState({title:"",goal:"",votesPerUser:10,useAutoVotes:!0,startDate:new Date().toISOString().split("T")[0],endDate:new Date(Date.now()+10080*60*1e3).toISOString().split("T")[0]}),[d,m]=v.useState({}),[f,p]=v.useState(!1),[y,x]=v.useState(!1),[w,b]=v.useState([]),[S,_]=v.useState(""),[E,C]=v.useState(""),[O,T]=v.useState(!1),[P,F]=v.useState(!1),[H,L]=v.useState(null);v.useEffect(()=>{(async()=>{var Z;if(!e){b([]),_("");return}const V=e.tenant_id??e.tenantId??null;if(!V){b([]),_(""),L("No tenant assigned. Products cannot be loaded.");return}T(!0),L(null);try{const ee=await xa(V);b(ee),_(((Z=ee[0])==null?void 0:Z.id)??"")}catch(ee){console.error("Error loading products for create session:",ee),_a!=null&&_a(ee)?L("Products are not configured yet. Please create the `products` table in Supabase."):L("Unable to load products. You can still create a session without a product tag."),b([]),_("")}finally{T(!1)}})()},[e]);const q=()=>{const oe="ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";let V="";for(let Z=0;Z<8;Z++)V+=oe.charAt(Math.floor(Math.random()*oe.length));return V},z=()=>{const oe={};l.title.trim()||(oe.title="Session title is required"),l.goal.trim()||(oe.goal="Session goal is required"),l.useAutoVotes||(l.votesPerUser<1&&(oe.votesPerUser="Votes per user must be at least 1"),l.votesPerUser>100&&(oe.votesPerUser="Votes per user cannot exceed 100"));const V=new Date(l.startDate);return new Date(l.endDate)<=V&&(oe.endDate="End date must be after start date"),!H&&w.length>0&&!S&&(oe.product="Please select a product for this session"),m(oe),Object.keys(oe).length===0},U=async oe=>{if(oe.preventDefault(),!(!z()||!e)){p(!0);try{const V=q(),Z=w.find(re=>re.id===S)||null;if(Z!=null&&Z.id&&await qC(Z.id)){m({submit:`There is already an active session for ${Z.name}. Each product can only have one active session at a time.`}),p(!1);return}const ee=await HC({title:l.title,goal:l.goal,votes_per_user:l.votesPerUser,use_auto_votes:l.useAutoVotes,start_date:l.startDate,end_date:l.endDate,is_active:!0,session_code:V,product_id:(Z==null?void 0:Z.id)??null,product_name:null});await pc(ee.id,e.id),await r(),x(!0),setTimeout(()=>{t(ee),s("/admin")},3e3)}catch(V){console.error("Error creating session:",V),m({submit:"Failed to create session. Please try again."})}finally{p(!1)}}},ne=async()=>{if(!e)return;const oe=e.tenant_id??e.tenantId??null;if(!oe){L("Cannot create products because no tenant is associated with your account.");return}const V=E.trim();if(!V){L("Product name is required.");return}F(!0),L(null);try{const Z=await UC(oe,V);b(ee=>[...ee,Z].sort((me,I)=>me.name.localeCompare(I.name))),_(Z.id),C("")}catch(Z){console.error("Error creating product:",Z),L(Z instanceof Error?Z.message:"Unable to create product. Please try again.")}finally{F(!1)}},ie=oe=>{const{name:V,value:Z}=oe.target;u(ee=>({...ee,[V]:V==="votesPerUser"?parseInt(Z)||0:Z})),d[V]&&m(ee=>{const re={...ee};return delete re[V],re})};return y?a.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center p-4",children:a.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-8 max-w-md w-full text-center",children:[a.jsx("div",{className:"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4",children:a.jsx(Yr,{className:"h-10 w-10 text-green-600"})}),a.jsx("h2",{className:"text-2xl font-bold text-[#2d4660] mb-2",children:"Session Created!"}),a.jsx("p",{className:"text-gray-600 mb-6",children:"Your voting session has been created successfully."}),a.jsxs("div",{className:"bg-blue-50 border-2 border-blue-200 rounded-lg p-4 mb-6",children:[a.jsx("p",{className:"text-sm text-gray-600 mb-2",children:"Success!"}),a.jsx("p",{className:"text-base text-[#2d4660] font-medium",children:"Your session has been created."}),a.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"You can now invite stakeholders from your session dashboard."})]}),a.jsx("p",{className:"text-sm text-gray-500",children:"Redirecting to admin dashboard..."})]})}):a.jsxs("div",{className:"container mx-auto p-4 max-w-6xl min-h-screen pb-8",children:[a.jsx("div",{className:"hidden md:flex md:justify-center mb-2",children:a.jsx("img",{src:"https://www.steeldynamics.com/wp-content/uploads/2024/05/New-Millennium-color-logo1.png",alt:"New Millennium Building Systems Logo",className:"-mt-4 cursor-pointer hover:opacity-80 transition-opacity",style:{height:"96px",width:"auto"},onClick:()=>s("/sessions")})}),a.jsxs("div",{className:"flex justify-between items-center mb-6",children:[a.jsxs("div",{className:"flex items-center",children:[a.jsx("img",{src:"https://www.steeldynamics.com/wp-content/uploads/2024/05/New-Millennium-color-logo1.png",alt:"New Millennium Building Systems Logo",className:"mr-4 md:hidden",style:{width:"40px",height:"40px"}}),a.jsx("button",{onClick:()=>s("/sessions"),className:"mr-2 p-1 rounded-full hover:bg-gray-200 cursor-pointer",children:a.jsx(Mc,{className:"h-6 w-6"})}),a.jsx("h1",{className:"text-2xl font-bold text-[#2d4660] md:text-3xl",children:"Create Voting Session"})]}),a.jsxs("button",{onClick:i,className:"flex items-center px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-colors",children:[a.jsx(zn,{className:"h-4 w-4 mr-2"}),a.jsx("span",{className:"hidden sm:inline",children:"Logout"})]})]}),a.jsx("div",{className:"relative z-10 bg-white rounded-lg shadow-md p-6",children:a.jsxs("form",{onSubmit:U,className:"space-y-6",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Session Title *"}),a.jsx("input",{type:"text",name:"title",value:l.title,onChange:ie,placeholder:"e.g., Q2 2025 Product Roadmap",className:`w-full px-4 py-2 border rounded-md focus:ring-2 focus:ring-[#2d4660] focus:border-transparent ${d.title?"border-red-500":"border-gray-300"}`}),d.title&&a.jsxs("p",{className:"mt-1 text-sm text-red-600 flex items-center",children:[a.jsx(nr,{className:"h-4 w-4 mr-1"}),d.title]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Session Goal *"}),a.jsx("textarea",{name:"goal",value:l.goal,onChange:ie,rows:3,placeholder:"Describe the purpose of this voting session...",className:`w-full px-4 py-2 border rounded-md focus:ring-2 focus:ring-[#2d4660] focus:border-transparent ${d.goal?"border-red-500":"border-gray-300"}`}),d.goal&&a.jsxs("p",{className:"mt-1 text-sm text-red-600 flex items-center",children:[a.jsx(nr,{className:"h-4 w-4 mr-1"}),d.goal]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Product *"}),O?a.jsx("p",{className:"text-sm text-gray-500",children:"Loading products..."}):w.length>0?a.jsxs("select",{value:S,onChange:oe=>{_(oe.target.value),d.product&&m(V=>{const Z={...V};return delete Z.product,Z})},className:`w-full px-4 py-2 border rounded-md focus:ring-2 focus:ring-[#2d4660] focus:border-transparent ${d.product?"border-red-500":"border-gray-300"}`,children:[a.jsx("option",{value:"",children:"Select a product"}),w.map(oe=>a.jsx("option",{value:oe.id,children:oe.name},oe.id))]}):a.jsx("p",{className:"text-sm text-gray-500",children:H??"No products found. Add a product below to associate this session."}),d.product&&a.jsxs("p",{className:"mt-1 text-sm text-red-600 flex items-center",children:[a.jsx(nr,{className:"h-4 w-4 mr-1"}),d.product]}),H&&w.length>0&&a.jsx("p",{className:"mt-1 text-sm text-red-600",children:H}),a.jsxs("div",{className:"mt-4",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Add a new product"}),a.jsxs("div",{className:"flex flex-col sm:flex-row gap-2",children:[a.jsx("input",{type:"text",value:E,onChange:oe=>{C(oe.target.value),H&&L(null)},placeholder:"e.g., Catalyst Cloud",className:"w-full px-4 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-[#2d4660] focus:border-transparent"}),a.jsx("button",{type:"button",onClick:ne,disabled:P,className:"px-4 py-2 bg-[#2d4660] text-white rounded-md hover:bg-[#1d3a53] transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:P?"Adding...":"Add Product"})]}),a.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"New products become available immediately for all session admins in your tenant."})]})]}),a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[a.jsx(Gn,{className:"h-4 w-4 inline mr-1"}),"Votes Per User *"]}),a.jsxs("div",{className:"flex items-center mb-3",children:[a.jsx("input",{type:"checkbox",id:"useAutoVotes",checked:l.useAutoVotes,onChange:oe=>u(V=>({...V,useAutoVotes:oe.target.checked})),className:"h-4 w-4 cursor-pointer rounded border-gray-300 accent-[#3A9B5C] focus:outline-none focus:ring-0"}),a.jsx("label",{htmlFor:"useAutoVotes",className:"ml-2 text-sm text-gray-700 cursor-pointer",children:"Auto-calculate votes (half of feature count, minimum 1)"})]}),!l.useAutoVotes&&a.jsxs(a.Fragment,{children:[a.jsx("input",{type:"number",name:"votesPerUser",value:l.votesPerUser,onChange:ie,min:"1",max:"100",className:`w-full px-4 py-2 border rounded-md focus:ring-2 focus:ring-[#2d4660] focus:border-transparent ${d.votesPerUser?"border-red-500":"border-gray-300"}`}),d.votesPerUser&&a.jsxs("p",{className:"mt-1 text-sm text-red-600 flex items-center",children:[a.jsx(nr,{className:"h-4 w-4 mr-1"}),d.votesPerUser]})]}),a.jsx("p",{className:"mt-2 text-sm text-gray-500",children:l.useAutoVotes?"Votes will automatically be set to half the number of features (1 feature = 1 vote, 2 features = 1 vote, 4 features = 2 votes, etc.)":"Each stakeholder will have this many votes to distribute across features"})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[a.jsx(Zr,{className:"h-4 w-4 inline mr-1"}),"Start Date *"]}),a.jsx("input",{type:"date",name:"startDate",value:l.startDate,onChange:ie,className:"w-full px-4 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-[#2d4660] focus:border-transparent"})]}),a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[a.jsx(Zr,{className:"h-4 w-4 inline mr-1"}),"End Date *"]}),a.jsx("input",{type:"date",name:"endDate",value:l.endDate,onChange:ie,className:`w-full px-4 py-2 border rounded-md focus:ring-2 focus:ring-[#2d4660] focus:border-transparent ${d.endDate?"border-red-500":"border-gray-300"}`}),d.endDate&&a.jsxs("p",{className:"mt-1 text-sm text-red-600 flex items-center",children:[a.jsx(nr,{className:"h-4 w-4 mr-1"}),d.endDate]})]})]}),a.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:a.jsxs("div",{className:"flex items-start",children:[a.jsx(Xn,{className:"h-5 w-5 text-blue-600 mr-3 mt-0.5"}),a.jsxs("div",{className:"text-sm text-blue-800",children:[a.jsx("p",{className:"font-medium mb-1",children:"Next Steps:"}),a.jsxs("ul",{className:"list-disc list-inside space-y-1",children:[a.jsx("li",{children:"After creating the session, you'll be assigned as the admin"}),a.jsx("li",{children:"You can add stakeholders and other admins from the admin dashboard"}),a.jsx("li",{children:'Use the "Email Invite" button to send stakeholders a link to join'})]})]})]})}),d.submit&&a.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:a.jsxs("p",{className:"text-sm text-red-800 flex items-center",children:[a.jsx(nr,{className:"h-4 w-4 mr-2"}),d.submit]})}),a.jsxs("div",{className:"flex justify-end space-x-3 pt-4 border-t",children:[a.jsx("button",{type:"button",onClick:()=>s("/sessions"),className:"px-6 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50 transition-colors",disabled:f,children:"Cancel"}),a.jsx("button",{type:"submit",className:"px-6 py-2 bg-[#2d4660] text-white rounded-md hover:bg-[#1d3a53] transition-colors disabled:opacity-50 disabled:cursor-not-allowed",disabled:f,children:f?"Creating...":"Create Session"})]})]})})]})}async function Gw(e){const{error:t}=await Ne.functions.invoke("send-invitation-email",{body:e});if(t)throw t}function PZ({products:e,value:t,onChange:r,label:n,error:s}){const[i,l]=v.useState(!1),u=v.useRef(null);v.useEffect(()=>{function f(p){u.current&&!u.current.contains(p.target)&&l(!1)}return document.addEventListener("mousedown",f),()=>document.removeEventListener("mousedown",f)},[]);const d=e.find(f=>f.id===t),m=d?cs(d.name,d.color_hex??null):null;return a.jsxs("div",{ref:u,className:"relative",children:[n&&a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:n}),a.jsxs("div",{onClick:()=>l(!i),className:`w-full px-3 py-2 border rounded-md bg-white cursor-pointer flex items-center justify-between hover:border-gray-400 ${s?"border-red-500":"border-gray-300"}`,children:[a.jsxs("div",{className:"flex items-center gap-2 flex-1 min-w-0",children:[d&&m&&a.jsx("div",{className:"w-4 h-4 rounded flex-shrink-0",style:{backgroundColor:m.background}}),a.jsx("span",{className:`text-sm truncate ${t?"text-gray-900":"text-gray-400"}`,children:d?d.name:"Select a Product"})]}),a.jsx(ls,{className:`h-4 w-4 text-gray-400 transition-transform flex-shrink-0 ${i?"transform rotate-180":""}`})]}),i&&a.jsx("div",{className:"absolute z-50 w-full mt-1 bg-white border border-gray-300 rounded-md shadow-lg max-h-60 overflow-y-auto",children:e.length===0?a.jsx("div",{className:"px-3 py-2 text-sm text-gray-500 text-center",children:"No products available"}):e.map(f=>{const p=cs(f.name,f.color_hex??null),y=t===f.id;return a.jsxs("div",{onClick:()=>{r(f.id),l(!1)},className:`px-3 py-2 cursor-pointer hover:bg-gray-50 flex items-center gap-2 ${y?"bg-gray-50":""}`,children:[a.jsx("div",{className:"w-4 h-4 rounded flex-shrink-0",style:{backgroundColor:p.background}}),a.jsx("span",{className:"text-sm text-gray-900 flex-1",children:f.name}),y&&a.jsx(Yr,{className:"h-4 w-4 text-gray-400 flex-shrink-0"})]},f.id)})})]})}function OZ(){const{currentSession:e,currentUser:t,setCurrentUser:r,setCurrentSession:n}=aa(),s=Ds(),i=async()=>{try{await Ne.auth.signOut()}catch{}try{n(null)}catch{}r(null);try{localStorage.removeItem("voting_system_current_session"),localStorage.removeItem("azureDevOpsAuthInProgress"),sessionStorage.removeItem("oauth_return_path"),sessionStorage.removeItem("oauth_action")}catch{}C(!1),s("/login",{replace:!0})},[l,u]=v.useState([]),[d,m]=v.useState(!0),[f,p]=v.useState(!1),[y,x]=v.useState({name:"",email:""}),[w,b]=v.useState({}),[S,_]=v.useState(!1),[E,C]=v.useState(!1),O=v.useRef(null),[T,P]=v.useState([]),[F,H]=v.useState(""),[L,q]=v.useState([]),[z,U]=v.useState([]),[ne,ie]=v.useState({});v.useEffect(()=>{if(!E)return;const te=ve=>{O.current&&!O.current.contains(ve.target)&&C(!1)};return document.addEventListener("mousedown",te),document.addEventListener("touchstart",te,{passive:!0}),()=>{document.removeEventListener("mousedown",te),document.removeEventListener("touchstart",te)}},[E]),v.useEffect(()=>{if(!e){s("/sessions");return}Z(),oe()},[e,s]);const oe=async()=>{try{const te=await zC(),ve=await yo(),he=new Date,ye=te.filter(W=>ve.some(Re=>Re.product_id!==W.id?!1:new Date(Re.end_date)>=he));P(ye);const le={};ye.forEach(W=>{le[W.id]=W.name}),ie(le)}catch(te){console.error("Error loading products:",te)}},V=async te=>{try{const ve=await yo(),he=new Date,ye=ve.filter(le=>le.product_id!==te?!1:new Date(le.end_date)>=he);q(ye)}catch(ve){console.error("Error loading sessions:",ve),q([])}};v.useEffect(()=>{F?(V(F),U([])):(q([]),U([]))},[F]);const Z=async()=>{if(e){m(!0);try{const te=await d3(e.id);u(te)}catch(te){console.error("Error loading stakeholders:",te)}finally{m(!1)}}},ee=te=>/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(te),re=te=>{const ve=new Date,he=new Date(te.start_date),ye=new Date(te.end_date);return te.is_active&&ve>=he&&ve<=ye?{text:"Active",color:"text-green-600"}:ve<he?{text:"Upcoming",color:"text-blue-600"}:{text:"Ended",color:"text-gray-500"}},me=te=>{const ve=new Date(te.start_date),he=new Date(te.end_date),ye=ve.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}),le=he.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"});return`${ye} - ${le}`},I=async te=>{te.preventDefault();const ve={};if(y.name.trim()||(ve.name="Name is required"),y.email.trim()?ee(y.email)||(ve.email="Invalid email address"):ve.email="Email is required",F||(ve.product="Please select a product"),z.length===0&&(ve.sessions="Please select at least one session"),b(ve),!(Object.keys(ve).length>0)){_(!0);try{for(const he of z)await YC({session_id:he,user_name:y.name,user_email:y.email,has_voted:!1});for(const he of z){const ye=L.find(le=>le.id===he);if(ye)try{const le=`${window.location.origin}/login?session=${ye.session_code}`;await Gw({to:y.email,subject:`You're invited to vote: ${ye.title}`,text:`Hi,

You've been invited to vote in "${ye.title}".

Open: ${le}

Best regards,
${(t==null?void 0:t.name)||""}`,html:`<p>Hi,</p><p>You've been invited to vote in <strong>${ye.title}</strong>.</p><p><a href="${le}">Open the Feature Voting System</a></p><p>Best regards,<br/>${(t==null?void 0:t.name)||""}</p>`})}catch{try{const le=JC(ye,y.email,(t==null?void 0:t.name)||"");window.location.href=le}catch{}}}await Z(),x({name:"",email:""}),H(""),U([]),p(!1),b({})}catch(he){console.error("Error adding stakeholder:",he),b({submit:"Failed to add stakeholder. Please try again."})}finally{_(!1)}}},M=async te=>{if(e&&confirm("Are you sure you want to remove this stakeholder?"))try{await Vv(e.id,te),await Z()}catch(ve){console.error("Error removing stakeholder:",ve),alert("Failed to remove stakeholder")}},We=te=>{const he=te.split("T")[0].split(" ")[0].split("-");let ye;if(he.length===3){const le=parseInt(he[0],10),W=parseInt(he[1],10)-1,Re=parseInt(he[2],10);ye=new Date(le,W,Re);const Ge=te.match(/T(\d{2}):(\d{2}):(\d{2})/);Ge&&ye.setHours(parseInt(Ge[1],10),parseInt(Ge[2],10),parseInt(Ge[3],10))}else ye=new Date(te);return ye.toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})};return e?d?a.jsx("div",{className:"min-h-screen w-full bg-gray-50 flex items-center justify-center",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-[#2d4660] mx-auto mb-4"}),a.jsx("p",{className:"text-gray-600",children:"Loading stakeholders..."})]})}):a.jsxs("div",{className:"container mx-auto p-4 max-w-6xl min-h-screen pb-8",children:[a.jsx("div",{className:"hidden md:flex md:justify-center mb-2",children:a.jsx("img",{src:"https://www.steeldynamics.com/wp-content/uploads/2024/05/New-Millennium-color-logo1.png",alt:"New Millennium Building Systems Logo",className:"-mt-4 cursor-pointer hover:opacity-80 transition-opacity",style:{height:"96px",width:"auto"},onClick:()=>s("/sessions")})}),a.jsxs("div",{className:"flex justify-between items-center mb-6",children:[a.jsxs("div",{className:"flex items-center",children:[a.jsx("img",{src:"https://www.steeldynamics.com/wp-content/uploads/2024/05/New-Millennium-color-logo1.png",alt:"New Millennium Building Systems Logo",className:"mr-4 md:hidden",style:{width:"40px",height:"40px"}}),a.jsx("button",{onClick:()=>s("/admin"),className:"mr-2 p-1 rounded-full hover:bg-gray-200 cursor-pointer",children:a.jsx(Mc,{className:"h-6 w-6"})}),a.jsx("h1",{className:"text-2xl font-bold text-[#2d4660] md:text-3xl",children:"Manage Stakeholders"})]}),a.jsxs("div",{ref:O,className:"relative z-40",children:[a.jsxs("div",{className:"hidden md:flex space-x-2",children:[a.jsxs("button",{onClick:()=>s("/admin"),className:"flex items-center px-4 py-2 bg-[#4f6d8e] text-white rounded-lg hover:bg-[#3d5670] transition-colors",children:[a.jsx(_n,{className:"h-4 w-4 mr-2"}),"Admin Dashboard"]}),a.jsxs("button",{onClick:()=>p(!0),className:"flex items-center px-4 py-2 bg-[#c59f2d] text-white rounded-lg hover:bg-[#a88a26] transition-colors",children:[a.jsx(rl,{className:"h-4 w-4 mr-2"}),"Add Stakeholder"]}),a.jsxs("button",{onClick:i,className:"flex items-center px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-colors",children:[a.jsx(zn,{className:"h-4 w-4 mr-2"}),"Logout"]})]}),a.jsx("div",{className:"flex md:hidden",children:a.jsx("button",{onClick:()=>C(!E),className:"p-2 rounded-md border border-gray-200 bg-white shadow-sm","aria-label":"Open menu",children:a.jsx(Ys,{className:"h-5 w-5 text-gray-700"})})}),E&&a.jsx("div",{className:"absolute right-0 mt-2 w-56 bg-white border border-gray-200 rounded-lg shadow-lg md:hidden z-50",children:a.jsxs("div",{className:"py-1",children:[a.jsxs("button",{onClick:()=>{C(!1),s("/admin")},className:"w-full px-3 py-2 flex items-center text-left hover:bg-gray-50",children:[a.jsx(_n,{className:"h-4 w-4 mr-2 text-gray-700"}),"Admin Dashboard"]}),a.jsxs("button",{onClick:()=>{C(!1),p(!0)},className:"w-full px-3 py-2 flex items-center text-left hover:bg-gray-50",children:[a.jsx(rl,{className:"h-4 w-4 mr-2 text-gray-700"}),"Add Stakeholder"]}),a.jsxs("button",{onClick:()=>{C(!1),i()},className:"w-full px-3 py-2 flex items-center text-left hover:bg-gray-50",children:[a.jsx(zn,{className:"h-4 w-4 mr-2 text-gray-700"}),"Logout"]})]})})]})]}),a.jsx("div",{className:"relative z-10 bg-white rounded-lg shadow-md p-4 mb-6",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"text-lg font-semibold text-[#2d4660]",children:"Current Session"}),a.jsx("p",{className:"text-gray-600 mt-1",children:e.title})]}),a.jsxs("div",{className:"text-right",children:[a.jsx("p",{className:"text-sm text-gray-600",children:"Total Stakeholders"}),a.jsx("p",{className:"text-2xl font-bold text-[#2d4660]",children:l.length})]})]})}),a.jsxs("div",{className:"relative z-10 bg-white rounded-lg shadow-md overflow-hidden",children:[a.jsxs("div",{className:"p-6 border-b border-gray-200",children:[a.jsxs("h2",{className:"text-lg font-semibold text-[#2d4660]",children:["Stakeholders (",l.length,")"]}),a.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Manage who can vote in this session"})]}),l.length===0?a.jsxs("div",{className:"p-12 text-center",children:[a.jsx(ms,{className:"mx-auto h-12 w-12 text-gray-400"}),a.jsx("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"No stakeholders"}),a.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Get started by adding stakeholders to this voting session."}),a.jsx("div",{className:"mt-6",children:a.jsxs("button",{onClick:()=>p(!0),className:"inline-flex items-center px-4 py-2 bg-[#2d4660] text-white rounded-md hover:bg-[#1d3a53] transition-colors",children:[a.jsx(rl,{className:"h-5 w-5 mr-2"}),"Add First Stakeholder"]})})]}):a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[a.jsx("thead",{className:"bg-gray-50",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Name"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Email"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Voting Status"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Added"}),a.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),a.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:l.map(te=>a.jsxs("tr",{className:"hover:bg-gray-50",children:[a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsxs("div",{className:"flex items-center",children:[a.jsx(ms,{className:"h-5 w-5 text-gray-400 mr-2"}),a.jsx("span",{className:"text-sm font-medium text-gray-900",children:te.user_name})]})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsxs("div",{className:"flex items-center text-sm text-gray-500",children:[a.jsx(pd,{className:"h-4 w-4 mr-2"}),te.user_email]})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:te.has_voted?a.jsxs("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800",children:[a.jsx(Yr,{className:"h-3 w-3 mr-1"}),"Voted"]}):a.jsxs("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-gray-100 text-gray-800",children:[a.jsx(wm,{className:"h-3 w-3 mr-1"}),"Pending"]})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:We(te.created_at)}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:a.jsx("button",{onClick:()=>M(te.user_email),className:"text-red-600 hover:text-red-900",children:a.jsx(Li,{className:"h-5 w-5"})})})]},te.id))})]})})]}),f&&a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:a.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-md w-full max-h-[90vh] overflow-y-auto",children:[a.jsxs("div",{className:"flex justify-between items-center mb-4",children:[a.jsx("h3",{className:"text-lg font-medium text-[#2d4660]",children:"Add Stakeholder"}),a.jsx("button",{onClick:()=>{p(!1),x({name:"",email:""}),H(""),U([]),b({})},className:"text-gray-400 hover:text-gray-500",children:a.jsx(Js,{className:"h-5 w-5"})})]}),a.jsxs("form",{onSubmit:I,className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Name *"}),a.jsx("input",{type:"text",value:y.name,onChange:te=>x(ve=>({...ve,name:te.target.value})),className:`w-full px-3 py-2 border rounded-md focus:ring-2 focus:ring-[#2d4660] focus:border-transparent ${w.name?"border-red-500":"border-gray-300"}`,placeholder:"John Doe"}),w.name&&a.jsxs("p",{className:"mt-1 text-sm text-red-600 flex items-center",children:[a.jsx(nr,{className:"h-4 w-4 mr-1"}),w.name]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email *"}),a.jsx("input",{type:"email",value:y.email,onChange:te=>x(ve=>({...ve,email:te.target.value})),className:`w-full px-3 py-2 border rounded-md focus:ring-2 focus:ring-[#2d4660] focus:border-transparent ${w.email?"border-red-500":"border-gray-300"}`,placeholder:"john@example.com"}),w.email&&a.jsxs("p",{className:"mt-1 text-sm text-red-600 flex items-center",children:[a.jsx(nr,{className:"h-4 w-4 mr-1"}),w.email]})]}),a.jsxs("div",{children:[a.jsx(PZ,{products:T,value:F,onChange:H,label:"Product *",error:!!w.product}),w.product&&a.jsxs("p",{className:"mt-1 text-sm text-red-600 flex items-center",children:[a.jsx(nr,{className:"h-4 w-4 mr-1"}),w.product]})]}),F&&a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Sessions * (Current and Future)"}),L.length===0?a.jsx("p",{className:"text-sm text-gray-500",children:"No current or future sessions found for this product."}):a.jsx("div",{className:"max-h-48 overflow-y-auto border border-gray-300 rounded-md p-2",children:L.map(te=>a.jsxs("label",{className:"flex items-start px-3 py-2 hover:bg-gray-50 cursor-pointer border-b border-gray-100 last:border-b-0",children:[a.jsx("input",{type:"checkbox",checked:z.includes(te.id),onChange:ve=>{ve.target.checked?U(he=>[...he,te.id]):U(he=>he.filter(ye=>ye!==te.id))},className:"w-4 h-4 border-gray-300 rounded focus:ring-[#2D4660] accent-green-600 mt-1",style:{accentColor:"#16a34a"}}),a.jsxs("div",{className:"ml-3 flex-1",children:[a.jsx("div",{className:"text-sm font-medium text-gray-900",children:te.title}),a.jsx("div",{className:"text-xs text-gray-500 mt-0.5",children:me(te)}),a.jsx("div",{className:"text-xs mt-0.5",children:a.jsx("span",{className:`font-medium ${re(te).color}`,children:re(te).text})})]})]},te.id))}),w.sessions&&a.jsxs("p",{className:"mt-1 text-sm text-red-600 flex items-center",children:[a.jsx(nr,{className:"h-4 w-4 mr-1"}),w.sessions]})]}),w.submit&&a.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-3",children:a.jsxs("p",{className:"text-sm text-red-800 flex items-center",children:[a.jsx(nr,{className:"h-4 w-4 mr-2"}),w.submit]})}),a.jsxs("div",{className:"flex justify-end space-x-2 pt-4",children:[a.jsx("button",{type:"button",onClick:()=>{p(!1),x({name:"",email:""}),H(""),U([]),b({})},className:"px-4 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50",disabled:S,children:"Cancel"}),a.jsx("button",{type:"submit",className:"px-4 py-2 bg-[#2d4660] text-white rounded-md hover:bg-[#1d3a53] disabled:opacity-50",disabled:S,children:S?"Adding...":"Add Stakeholder"})]})]})]})})]}):null}function TZ(){const{currentSession:e,currentUser:t,setCurrentUser:r,setCurrentSession:n}=aa(),s=Ds(),i=async()=>{try{await Ne.auth.signOut()}catch{}try{n(null)}catch{}r(null);try{localStorage.removeItem("voting_system_current_session"),localStorage.removeItem("azureDevOpsAuthInProgress"),sessionStorage.removeItem("oauth_return_path"),sessionStorage.removeItem("oauth_action")}catch{}C(!1),s("/login",{replace:!0})},[l,u]=v.useState([]),[d,m]=v.useState(!0),[f,p]=v.useState(!1),[y,x]=v.useState({email:""}),[w,b]=v.useState({}),[S,_]=v.useState(!1),[E,C]=v.useState(!1),O=v.useRef(null);v.useEffect(()=>{if(!E)return;const q=z=>{O.current&&!O.current.contains(z.target)&&C(!1)};return document.addEventListener("mousedown",q),document.addEventListener("touchstart",q,{passive:!0}),()=>{document.removeEventListener("mousedown",q),document.removeEventListener("touchstart",q)}},[E]),v.useEffect(()=>{if(!e){s("/sessions");return}T()},[e,s]);const T=async()=>{if(e){m(!0);try{const q=await GC(e.id);u(q)}catch(q){console.error("Error loading admins:",q)}finally{m(!1)}}},P=q=>/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(q),F=async q=>{q.preventDefault();const z={};if(y.email.trim()?P(y.email)||(z.email="Invalid email address"):z.email="Email is required",l.some(U=>U.user.email.toLowerCase()===y.email.toLowerCase())&&(z.email="This user is already an admin"),b(z),!(Object.keys(z).length>0)&&e){_(!0);try{const U=y.email.split("@")[0].replace(/\./g," ");await u3(e.id,y.email,U);try{const ne=`${window.location.origin}/login?session=${e.session_code}`;await Gw({to:y.email,subject:`You're invited to administer: ${e.title}`,text:`Hi,

You've been added as an admin for "${e.title}".

Open: ${ne}

Best regards,
${(t==null?void 0:t.name)||""}`,html:`<p>Hi,</p><p>You've been added as an admin for <strong>${e.title}</strong>.</p><p><a href="${ne}">Open the Feature Voting System</a></p><p>Best regards,<br/>${(t==null?void 0:t.name)||""}</p>`})}catch{try{const ne=JC(e,y.email,(t==null?void 0:t.name)||"");window.location.href=ne}catch{}}await T(),x({email:""}),p(!1)}catch(U){console.error("Error adding admin:",U),b({submit:"Failed to add admin. Please try again."})}finally{_(!1)}}},H=async q=>{if(e){if(l.length===1){alert("Cannot remove the last admin. Sessions must have at least one admin.");return}if(q===(t==null?void 0:t.id)){alert("You cannot remove yourself as an admin.");return}if(confirm("Are you sure you want to remove this admin?"))try{await Qf(e.id,q),await T()}catch(z){console.error("Error removing admin:",z),alert("Failed to remove admin")}}},L=q=>{const U=q.split("T")[0].split(" ")[0].split("-");let ne;if(U.length===3){const ie=parseInt(U[0],10),oe=parseInt(U[1],10)-1,V=parseInt(U[2],10);ne=new Date(ie,oe,V);const Z=q.match(/T(\d{2}):(\d{2}):(\d{2})/);Z&&ne.setHours(parseInt(Z[1],10),parseInt(Z[2],10),parseInt(Z[3],10))}else ne=new Date(q);return ne.toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})};return e?d?a.jsx("div",{className:"min-h-screen w-full bg-gray-50 flex items-center justify-center",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-[#2d4660] mx-auto mb-4"}),a.jsx("p",{className:"text-gray-600",children:"Loading admins..."})]})}):a.jsxs("div",{className:"container mx-auto p-4 max-w-6xl min-h-screen pb-8",children:[a.jsx("div",{className:"hidden md:flex md:justify-center mb-2",children:a.jsx("img",{src:"https://www.steeldynamics.com/wp-content/uploads/2024/05/New-Millennium-color-logo1.png",alt:"New Millennium Building Systems Logo",className:"-mt-4 cursor-pointer hover:opacity-80 transition-opacity",style:{height:"96px",width:"auto"},onClick:()=>s("/sessions")})}),a.jsxs("div",{className:"flex justify-between items-center mb-6",children:[a.jsxs("div",{className:"flex items-center",children:[a.jsx("img",{src:"https://www.steeldynamics.com/wp-content/uploads/2024/05/New-Millennium-color-logo1.png",alt:"New Millennium Building Systems Logo",className:"mr-4 md:hidden",style:{width:"40px",height:"40px"}}),a.jsx("button",{onClick:()=>s("/admin"),className:"mr-2 p-1 rounded-full hover:bg-gray-200 cursor-pointer",children:a.jsx(Mc,{className:"h-6 w-6"})}),a.jsx("h1",{className:"text-2xl font-bold text-[#2d4660] md:text-3xl",children:"Session Admins"})]}),a.jsxs("div",{ref:O,className:"relative z-40",children:[a.jsxs("div",{className:"hidden md:flex space-x-2",children:[a.jsxs("button",{onClick:()=>s("/admin"),className:"flex items-center px-4 py-2 bg-[#4f6d8e] text-white rounded-lg hover:bg-[#3d5670] transition-colors",children:[a.jsx(_n,{className:"h-4 w-4 mr-2"}),"Admin Dashboard"]}),a.jsxs("button",{onClick:()=>p(!0),className:"flex items-center px-4 py-2 bg-[#c59f2d] text-white rounded-lg hover:bg-[#a88a26] transition-colors",children:[a.jsx(rl,{className:"h-4 w-4 mr-2"}),"Add Admin"]}),a.jsxs("button",{onClick:i,className:"flex items-center px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-colors",children:[a.jsx(zn,{className:"h-4 w-4 mr-2"}),"Logout"]})]}),a.jsx("div",{className:"flex md:hidden",children:a.jsx("button",{onClick:()=>C(!E),className:"p-2 rounded-md border border-gray-200 bg-white shadow-sm","aria-label":"Open menu",children:a.jsx(Ys,{className:"h-5 w-5 text-gray-700"})})}),E&&a.jsx("div",{className:"absolute right-0 mt-2 w-56 bg-white border border-gray-200 rounded-lg shadow-lg md:hidden z-50",children:a.jsxs("div",{className:"py-1",children:[a.jsxs("button",{onClick:()=>{C(!1),s("/admin")},className:"w-full px-3 py-2 flex items-center text-left hover:bg-gray-50",children:[a.jsx(_n,{className:"h-4 w-4 mr-2 text-gray-700"}),"Admin Dashboard"]}),a.jsxs("button",{onClick:()=>{C(!1),p(!0)},className:"w-full px-3 py-2 flex items-center text-left hover:bg-gray-50",children:[a.jsx(rl,{className:"h-4 w-4 mr-2 text-gray-700"}),"Add Admin"]}),a.jsxs("button",{onClick:()=>{C(!1),i()},className:"w-full px-3 py-2 flex items-center text-left hover:bg-gray-50",children:[a.jsx(zn,{className:"h-4 w-4 mr-2 text-gray-700"}),"Logout"]})]})})]})]}),a.jsx("div",{className:"relative z-10 bg-white rounded-lg shadow-md p-4 mb-6",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"text-lg font-semibold text-[#2d4660]",children:"Current Session"}),a.jsx("p",{className:"text-gray-600 mt-1",children:e.title})]}),a.jsxs("div",{className:"text-right",children:[a.jsx("p",{className:"text-sm text-gray-600",children:"Total Admins"}),a.jsx("p",{className:"text-2xl font-bold text-[#2d4660]",children:l.length})]})]})}),a.jsxs("div",{className:"relative z-10 bg-white rounded-lg shadow-md overflow-hidden",children:[a.jsxs("div",{className:"p-6 border-b border-gray-200",children:[a.jsxs("h2",{className:"text-lg font-semibold text-[#2d4660]",children:["Session Admins (",l.length,")"]}),a.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Manage who can administer this voting session"})]}),a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[a.jsx("thead",{className:"bg-gray-50",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Name"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Email"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Added"}),a.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),a.jsx("tbody",{className:"relative z-10 bg-white divide-y divide-gray-200",children:l.map(q=>a.jsxs("tr",{className:"hover:bg-gray-50",children:[a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsxs("div",{className:"flex items-center",children:[a.jsx(Fn,{className:"h-5 w-5 text-blue-500 mr-2"}),a.jsxs("span",{className:"text-sm font-medium text-gray-900",children:[q.user.name,q.user.id===(t==null?void 0:t.id)&&a.jsx("span",{className:"ml-2 text-xs text-gray-500",children:"(You)"})]})]})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsxs("div",{className:"flex items-center text-sm text-gray-500",children:[a.jsx(pd,{className:"h-4 w-4 mr-2"}),q.user.email]})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:L(q.created_at)}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:a.jsx("button",{onClick:()=>H(q.user_id),className:`text-red-600 hover:text-red-900 ${q.user.id===(t==null?void 0:t.id)||l.length===1?"opacity-50 cursor-not-allowed":""}`,disabled:q.user.id===(t==null?void 0:t.id)||l.length===1,title:q.user.id===(t==null?void 0:t.id)?"You cannot remove yourself":l.length===1?"Cannot remove the last admin":"Remove admin",children:a.jsx(Li,{className:"h-5 w-5"})})})]},q.id))})]})})]}),a.jsx("div",{className:"relative z-10 mt-6 bg-blue-50 border border-blue-200 rounded-lg p-4",children:a.jsxs("div",{className:"flex items-start",children:[a.jsx(Fn,{className:"h-5 w-5 text-blue-600 mr-3 mt-0.5"}),a.jsxs("div",{className:"text-sm text-blue-800",children:[a.jsx("p",{className:"font-medium mb-1",children:"Session Admin Permissions:"}),a.jsxs("ul",{className:"list-disc list-inside space-y-1",children:[a.jsx("li",{children:"Manage features and voting settings for this session"}),a.jsx("li",{children:"Add and remove stakeholders for this session"}),a.jsx("li",{children:"View voting results and analytics for this session"}),a.jsx("li",{children:"Add and remove other session admins"})]}),a.jsx("p",{className:"mt-2 text-xs italic",children:"Note: System Admins have full admin access to all sessions in the system."})]})]})}),f&&a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:a.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-md w-full",children:[a.jsxs("div",{className:"flex justify-between items-center mb-4",children:[a.jsx("h3",{className:"text-lg font-medium text-[#2d4660]",children:"Add Session Admin"}),a.jsx("button",{onClick:()=>{p(!1),x({email:""}),b({})},className:"text-gray-400 hover:text-gray-500",children:a.jsx(Js,{className:"h-5 w-5"})})]}),a.jsxs("form",{onSubmit:F,className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email Address *"}),a.jsx("input",{type:"email",value:y.email,onChange:q=>x(z=>({...z,email:q.target.value})),className:`w-full px-3 py-2 border rounded-md focus:ring-2 focus:ring-[#2d4660] focus:border-transparent ${w.email?"border-red-500":"border-gray-300"}`,placeholder:"admin@example.com"}),w.email&&a.jsxs("p",{className:"mt-1 text-sm text-red-600 flex items-center",children:[a.jsx(nr,{className:"h-4 w-4 mr-1"}),w.email]})]}),w.submit&&a.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-3",children:a.jsxs("p",{className:"text-sm text-red-800 flex items-center",children:[a.jsx(nr,{className:"h-4 w-4 mr-2"}),w.submit]})}),a.jsxs("div",{className:"flex justify-end space-x-2 pt-4",children:[a.jsx("button",{type:"button",onClick:()=>{p(!1),x({email:""}),b({})},className:"px-4 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50",disabled:S,children:"Cancel"}),a.jsx("button",{type:"submit",className:"px-4 py-2 bg-[#2d4660] text-white rounded-md hover:bg-[#1d3a53] disabled:opacity-50",disabled:S,children:S?"Adding...":"Add Admin"})]})]})]})})]}):null}function IZ(){const{currentUser:e,sessions:t}=aa(),r=Ds(),[n,s]=v.useState([]),[i,l]=v.useState(!0),[u,d]=v.useState(!1);v.useEffect(()=>{m()},[t]);const m=async()=>{l(!0);try{const y=new Set;for(const x of t)(await GC(x.id)).forEach(b=>{b.user&&b.user.email&&y.add(b.user.email)});s(Array.from(y))}catch(y){console.error("Error loading admin emails:",y)}finally{l(!1)}},f=()=>{const y=encodeURIComponent(" Request: Add me to Feature Voting System"),x=encodeURIComponent(`Hi Team,

I tried to access the Feature Voting System but don't have admin permissions yet.

Could you please add me to the system so I can participate in voting?

My details:
Name: ${(e==null?void 0:e.name)||"Unknown"}
Email: ${(e==null?void 0:e.email)||"Unknown"}

Thanks!
${(e==null?void 0:e.name)||"A hopeful voter"} `),w=n.length>0?`mailto:${n.join(",")}?subject=${y}&body=${x}`:`mailto:?subject=${y}&body=${x}`;window.location.href=w,d(!0)},p=()=>{r("/login")};return i?a.jsx("div",{className:"min-h-screen w-full bg-gray-50 flex items-center justify-center",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-[#2d4660] mx-auto mb-4"}),a.jsx("p",{className:"text-gray-600",children:"Loading..."})]})}):a.jsx("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 to-gray-100 flex items-center justify-center p-4",children:a.jsxs("div",{className:"max-w-md w-full",children:[a.jsx("div",{className:"text-center mb-8",children:a.jsx("img",{src:"https://www.steeldynamics.com/wp-content/uploads/2024/05/New-Millennium-color-logo1.png",alt:"New Millennium Building Systems Logo",className:"mx-auto cursor-pointer hover:opacity-80 transition-opacity",style:{height:"80px",width:"auto"},onClick:()=>r("/sessions")})}),a.jsxs("div",{className:"relative z-10 bg-white rounded-xl shadow-lg overflow-hidden",children:[a.jsxs("div",{className:"bg-gradient-to-r from-[#2d4660] to-[#1d3a53] p-6 text-center",children:[a.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-white/10 rounded-full mb-4",children:a.jsx(eF,{className:"h-8 w-8 text-white"})}),a.jsx("h1",{className:"text-2xl font-bold text-white mb-2",children:"Whoa There, Speedracer! "}),a.jsx("p",{className:"text-blue-100 text-sm",children:"You need access to the Feature Voting System"})]}),a.jsx("div",{className:"p-6",children:u?a.jsx(a.Fragment,{children:a.jsxs("div",{className:"text-center py-4",children:[a.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-green-100 rounded-full mb-4",children:a.jsx(Yr,{className:"h-8 w-8 text-green-600"})}),a.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-2",children:"Email Sent! "}),a.jsx("p",{className:"text-gray-600 mb-6",children:"Your access request has been sent to the admin team. They'll get you set up soon!"}),a.jsxs("button",{onClick:p,className:"inline-flex items-center px-4 py-2 bg-[#2d4660] text-white rounded-lg hover:bg-[#1d3a53] transition-colors",children:[a.jsx(IS,{className:"h-4 w-4 mr-2"}),"Back to Login"]})]})}):a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"mb-6",children:[a.jsx("p",{className:"text-gray-600 mb-4",children:"Looks like you're trying to access the Feature Voting System, but you haven't been added yet."}),a.jsx("p",{className:"text-gray-600 mb-4",children:"No worries! Click the button below to send a quick message to the admins asking to be added."}),a.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:a.jsxs("div",{className:"flex items-start",children:[a.jsx(Xn,{className:"h-5 w-5 text-blue-600 mr-2 mt-0.5 flex-shrink-0"}),a.jsx("div",{className:"text-sm text-blue-800",children:n.length>0?a.jsxs(a.Fragment,{children:[a.jsx("p",{className:"font-medium mb-1",children:"Your message will be sent to:"}),a.jsx("p",{className:"text-xs",children:n.join(", ")})]}):a.jsx("p",{children:"Your message will help the admin team get you set up!"})})]})})]}),a.jsxs("div",{className:"space-y-3",children:[a.jsxs("button",{onClick:f,className:"w-full flex items-center justify-center px-4 py-3 bg-[#c59f2d] text-white rounded-lg hover:bg-[#a88a26] transition-colors font-medium",children:[a.jsx(pd,{className:"h-5 w-5 mr-2"}),"Request Access from Admins"]}),a.jsxs("button",{onClick:p,className:"w-full flex items-center justify-center px-4 py-3 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-colors",children:[a.jsx(IS,{className:"h-4 w-4 mr-2"}),"Back to Login"]})]})]})})]}),a.jsx("div",{className:"mt-6 text-center",children:a.jsx("p",{className:"text-sm text-gray-500",children:"Once you're added to the system, you'll be able to participate in voting sessions."})})]})})}function DZ(){const{currentUser:e,setCurrentUser:t,setCurrentSession:r}=aa(),n=Ds(),s=async()=>{try{await Ne.auth.signOut()}catch{}try{r(null)}catch{}t(null);try{localStorage.removeItem("voting_system_current_session"),localStorage.removeItem("azureDevOpsAuthInProgress"),sessionStorage.removeItem("oauth_return_path"),sessionStorage.removeItem("oauth_action")}catch{}E(!1),n("/login",{replace:!0})},[i,l]=v.useState([]),[u,d]=v.useState(!0),[m,f]=v.useState(!1),[p,y]=v.useState({email:""}),[x,w]=v.useState({}),[b,S]=v.useState(!1),[_,E]=v.useState(!1),C=v.useRef(null);v.useEffect(()=>{if(!_)return;const L=q=>{C.current&&!C.current.contains(q.target)&&E(!1)};return document.addEventListener("mousedown",L),document.addEventListener("touchstart",L,{passive:!0}),()=>{document.removeEventListener("mousedown",L),document.removeEventListener("touchstart",L)}},[_]),v.useEffect(()=>{O()},[]);const O=async()=>{d(!0);try{let L=await qv();L.length===0&&e&&(console.log("No system admins found. Adding current user as first system admin..."),await ph(e.id),L=await qv()),l(L)}catch(L){console.error("Error loading system admins:",L)}finally{d(!1)}},T=L=>/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(L),P=async L=>{L.preventDefault();const q={};if(p.email.trim()?T(p.email)||(q.email="Invalid email address"):q.email="Email is required",i.some(z=>z.user.email.toLowerCase()===p.email.toLowerCase())&&(q.email="This user is already a system admin"),w(q),!(Object.keys(q).length>0)){S(!0);try{const z=p.email.split("@")[0].replace(/\./g," "),U=await Jo(p.email,z);await ph(U.id);try{const ne=`${window.location.origin}/login`;await Gw({to:p.email,subject:"You're a System Admin: Feature Voting System",text:`Hi,

You've been granted System Admin access to the Feature Voting System.

Login: ${ne}

Best regards,
System`,html:`<p>Hi,</p><p>You've been granted <strong>System Admin</strong> access to the Feature Voting System.</p><p><a href="${ne}">Login</a></p><p>Best regards,<br/>System</p>`})}catch{try{const ne=`${window.location.origin}/login`,ie=encodeURIComponent("You're a System Admin: Feature Voting System"),oe=encodeURIComponent(`Hi,

You've been granted System Admin access to the Feature Voting System.

To sign in, use this link:

${ne}

Best regards,
System`);window.location.href=`mailto:${encodeURIComponent(p.email)}?subject=${ie}&body=${oe}`}catch{}}await O(),y({email:""}),f(!1)}catch(z){console.error("Error adding system admin:",z),w({submit:"Failed to add system admin. Please try again."})}finally{S(!1)}}},F=async L=>{const q=i.reduce((z,U)=>new Date(U.created_at)<new Date(z.created_at)?U:z);if(L===q.user_id){alert("Cannot remove the original system admin. This protects against accidentally locking everyone out of the system.");return}if(i.length===1){alert("Cannot remove the last system admin. The system must have at least one admin.");return}if(L===(e==null?void 0:e.id)){alert("You cannot remove yourself as a system admin.");return}if(confirm("Are you sure you want to remove this system admin?"))try{await Zf(L),await O()}catch(z){console.error("Error removing system admin:",z),alert("Failed to remove system admin")}},H=L=>{const z=L.split("T")[0].split(" ")[0].split("-");let U;if(z.length===3){const ne=parseInt(z[0],10),ie=parseInt(z[1],10)-1,oe=parseInt(z[2],10);U=new Date(ne,ie,oe);const V=L.match(/T(\d{2}):(\d{2}):(\d{2})/);V&&U.setHours(parseInt(V[1],10),parseInt(V[2],10),parseInt(V[3],10))}else U=new Date(L);return U.toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})};return u?a.jsx("div",{className:"min-h-screen w-full bg-gray-50 flex items-center justify-center",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-[#2d4660] mx-auto mb-4"}),a.jsx("p",{className:"text-gray-600",children:"Loading system admins..."})]})}):a.jsxs("div",{className:"container mx-auto p-4 max-w-6xl min-h-screen pb-8",children:[a.jsx("div",{className:"hidden md:flex md:justify-center mb-2",children:a.jsx("img",{src:"https://www.steeldynamics.com/wp-content/uploads/2024/05/New-Millennium-color-logo1.png",alt:"New Millennium Building Systems Logo",className:"-mt-4 cursor-pointer hover:opacity-80 transition-opacity",style:{height:"96px",width:"auto"},onClick:()=>n("/sessions")})}),a.jsxs("div",{className:"flex justify-between items-center mb-6",children:[a.jsxs("div",{className:"flex items-center",children:[a.jsx("img",{src:"https://www.steeldynamics.com/wp-content/uploads/2024/05/New-Millennium-color-logo1.png",alt:"New Millennium Building Systems Logo",className:"mr-4 md:hidden",style:{width:"40px",height:"40px"}}),a.jsx("button",{onClick:()=>n("/sessions"),className:"mr-2 p-1 rounded-full hover:bg-gray-200 cursor-pointer",children:a.jsx(Mc,{className:"h-6 w-6"})}),a.jsx("h1",{className:"text-2xl font-bold text-[#2d4660] md:text-3xl",children:"System Admins"})]}),a.jsxs("div",{ref:C,className:"relative z-40",children:[a.jsxs("div",{className:"hidden md:flex space-x-2",children:[a.jsxs("button",{onClick:()=>n("/sessions"),className:"flex items-center px-4 py-2 bg-[#4f6d8e] text-white rounded-lg hover:bg-[#3d5670] transition-colors",children:[a.jsx(_n,{className:"h-4 w-4 mr-2"}),"My Sessions"]}),a.jsxs("button",{onClick:()=>f(!0),className:"flex items-center px-4 py-2 bg-[#c59f2d] text-white rounded-lg hover:bg-[#a88a26] transition-colors",children:[a.jsx(rl,{className:"h-4 w-4 mr-2"}),"Add System Admin"]}),a.jsxs("button",{onClick:s,className:"flex items-center px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-colors",children:[a.jsx(zn,{className:"h-4 w-4 mr-2"}),"Logout"]})]}),a.jsx("div",{className:"flex md:hidden",children:a.jsx("button",{onClick:()=>E(!_),className:"p-2 rounded-md border border-gray-200 bg-white shadow-sm","aria-label":"Open menu",children:a.jsx(Ys,{className:"h-5 w-5 text-gray-700"})})}),_&&a.jsx("div",{className:"absolute right-0 mt-2 w-56 bg-white border border-gray-200 rounded-lg shadow-lg md:hidden z-50",children:a.jsxs("div",{className:"py-1",children:[a.jsxs("button",{onClick:()=>{E(!1),n("/sessions")},className:"w-full px-3 py-2 flex items-center text-left hover:bg-gray-50",children:[a.jsx(_n,{className:"h-4 w-4 mr-2 text-gray-700"}),"My Sessions"]}),a.jsxs("button",{onClick:()=>{E(!1),f(!0)},className:"w-full px-3 py-2 flex items-center text-left hover:bg-gray-50",children:[a.jsx(rl,{className:"h-4 w-4 mr-2 text-gray-700"}),"Add System Admin"]}),a.jsxs("button",{onClick:()=>{E(!1),s()},className:"w-full px-3 py-2 flex items-center text-left hover:bg-gray-50",children:[a.jsx(zn,{className:"h-4 w-4 mr-2 text-gray-700"}),"Logout"]})]})})]})]}),a.jsx("div",{className:"relative z-10 bg-gradient-to-r from-[#2d4660] to-[#1d3a53] rounded-lg shadow-md p-6 mb-6 text-white",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center",children:[a.jsx(As,{className:"h-8 w-8 mr-3"}),a.jsxs("div",{children:[a.jsx("h2",{className:"text-xl font-semibold",children:"Feature Voting System"}),a.jsx("p",{className:"text-blue-100 mt-1",children:"Global administrator management"})]})]}),a.jsxs("div",{className:"text-right",children:[a.jsx("p",{className:"text-sm text-blue-100",children:"Total System Admins"}),a.jsx("p",{className:"text-3xl font-bold",children:i.length})]})]})}),a.jsxs("div",{className:"relative z-10 bg-white rounded-lg shadow-md overflow-hidden",children:[a.jsxs("div",{className:"p-6 border-b border-gray-200",children:[a.jsxs("h2",{className:"text-lg font-semibold text-[#2d4660]",children:["System Administrators (",i.length,")"]}),a.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Manage who has full access to the Feature Voting System"})]}),a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[a.jsx("thead",{className:"bg-gray-50",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Name"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Email"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Added"}),a.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),a.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:(()=>{const L=i.reduce((q,z)=>new Date(z.created_at)<new Date(q.created_at)?z:q);return i.map(q=>{const z=q.user_id===L.user_id;return a.jsxs("tr",{className:"hover:bg-gray-50",children:[a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsxs("div",{className:"flex items-center",children:[a.jsx(As,{className:"h-5 w-5 text-[#c59f2d] mr-2"}),a.jsxs("span",{className:"text-sm font-medium text-gray-900",children:[q.user.name,q.user.id===(e==null?void 0:e.id)&&a.jsx("span",{className:"ml-2 text-xs text-gray-500",children:"(You)"}),z&&a.jsx("span",{className:"ml-2 text-xs text-[#c59f2d] font-semibold",children:"(Original Admin)"})]})]})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsxs("div",{className:"flex items-center text-sm text-gray-500",children:[a.jsx(pd,{className:"h-4 w-4 mr-2"}),q.user.email]})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:H(q.created_at)}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:a.jsx("button",{onClick:()=>F(q.user_id),className:`text-red-600 hover:text-red-900 ${q.user.id===(e==null?void 0:e.id)||i.length===1||z?"opacity-50 cursor-not-allowed":""}`,disabled:q.user.id===(e==null?void 0:e.id)||i.length===1||z,title:z?"Cannot remove the original system admin":q.user.id===(e==null?void 0:e.id)?"You cannot remove yourself":i.length===1?"Cannot remove the last system admin":"Remove system admin",children:a.jsx(Li,{className:"h-5 w-5"})})})]},q.id)})})()})]})})]}),a.jsx("div",{className:"relative z-10 mt-6 bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:a.jsxs("div",{className:"flex items-start",children:[a.jsx(As,{className:"h-5 w-5 text-yellow-600 mr-3 mt-0.5"}),a.jsxs("div",{className:"text-sm text-yellow-800",children:[a.jsx("p",{className:"font-medium mb-1",children:"System Admin Permissions:"}),a.jsxs("ul",{className:"list-disc list-inside space-y-1",children:[a.jsx("li",{children:"Full access to all voting sessions across the system"}),a.jsx("li",{children:"Create and manage any voting session"}),a.jsx("li",{children:"Add and remove other system administrators"}),a.jsx("li",{children:"Manage session admins and stakeholders for any session"}),a.jsx("li",{children:"View all results and analytics system-wide"})]}),a.jsx("p",{className:"mt-3 text-xs font-medium",children:"Note: The original system admin (first person to access this page) cannot be removed to prevent system lockout."})]})]})}),m&&a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:a.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-md w-full",children:[a.jsxs("div",{className:"flex justify-between items-center mb-4",children:[a.jsx("h3",{className:"text-lg font-medium text-[#2d4660]",children:"Add System Admin"}),a.jsx("button",{onClick:()=>{f(!1),y({email:""}),w({})},className:"text-gray-400 hover:text-gray-500",children:a.jsx(Js,{className:"h-5 w-5"})})]}),a.jsxs("form",{onSubmit:P,className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email Address *"}),a.jsx("input",{type:"email",value:p.email,onChange:L=>y(q=>({...q,email:L.target.value})),className:`w-full px-3 py-2 border rounded-md focus:ring-2 focus:ring-[#2d4660] focus:border-transparent ${x.email?"border-red-500":"border-gray-300"}`,placeholder:"admin@example.com"}),x.email&&a.jsxs("p",{className:"mt-1 text-sm text-red-600 flex items-center",children:[a.jsx(nr,{className:"h-4 w-4 mr-1"}),x.email]})]}),x.submit&&a.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-3",children:a.jsxs("p",{className:"text-sm text-red-800 flex items-center",children:[a.jsx(nr,{className:"h-4 w-4 mr-2"}),x.submit]})}),a.jsxs("div",{className:"flex justify-end space-x-2 pt-4",children:[a.jsx("button",{type:"button",onClick:()=>{f(!1),y({email:""}),w({})},className:"px-4 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50",disabled:b,children:"Cancel"}),a.jsx("button",{type:"submit",className:"px-4 py-2 bg-[#2d4660] text-white rounded-md hover:bg-[#1d3a53] disabled:opacity-50",disabled:b,children:b?"Adding...":"Add System Admin"})]})]})]})})]})}async function RZ(e){var t,r,n,s;if(!e||e.trim().length<2)return[];try{const{data:{session:i},error:l}=await Ne.auth.getSession();if(l)throw console.error("Error getting session:",l),new Error("Unable to access your session. Please sign in again.");if(!i)throw console.warn("No session available for Azure AD search"),new Error("You must be signed in to search company users.");if(!(((r=(t=i.user)==null?void 0:t.app_metadata)==null?void 0:r.provider)==="azure"||((s=(n=i.user)==null?void 0:n.identities)==null?void 0:s.some(b=>b.provider==="azure"))))throw console.warn("User not signed in with Azure AD"),new Error("You must sign in with Microsoft to search company users.");const d=i.provider_token||i.access_token;if(!d)throw console.warn("No provider token available for Azure AD search"),new Error("Unable to access Microsoft Graph. Please sign out and sign in again with Microsoft.");const m=e.trim(),f=`startswith(displayName,'${m}') or startswith(mail,'${m}') or startswith(userPrincipalName,'${m}') or startswith(givenName,'${m}') or startswith(surname,'${m}')`,p=`https://graph.microsoft.com/v1.0/users?$filter=${encodeURIComponent(f)}&$select=id,displayName,mail,userPrincipalName,givenName,surname,jobTitle,department&$top=20`,y=await fetch(p,{headers:{Authorization:`Bearer ${d}`,"Content-Type":"application/json"}});if(!y.ok){const b=await y.text();let S="";throw y.status===401?(S="Authentication failed. Please sign out and sign in again with Microsoft.",console.warn("Azure AD search 401:",b)):y.status===403?(S='Your Azure AD app needs "User.ReadBasic.All" or "User.Read.All" permission to search users. An administrator must grant this permission in Azure Portal.',console.warn("Azure AD search 403 - Insufficient permissions:",b)):y.status===400?(S="Invalid search query. Please try a different search term.",console.warn("Azure AD search 400:",b)):(S=`Unable to search users (${y.status}). Please try again.`,console.error("Azure AD search error:",y.status,b)),new Error(S)}return((await y.json()).value||[]).map(b=>({id:b.id,displayName:b.displayName||"",mail:b.mail||b.userPrincipalName||"",userPrincipalName:b.userPrincipalName||"",givenName:b.givenName,surname:b.surname,jobTitle:b.jobTitle,department:b.department})).sort((b,S)=>{const _=b.displayName.toLowerCase(),E=S.displayName.toLowerCase();return _.localeCompare(E)})}catch(i){throw console.error("Error searching Azure AD users:",i),i}}const Iu=()=>({searchTerm:"",results:[],isSearching:!1,showResults:!1,error:""});function ch({products:e,value:t,onChange:r,label:n,error:s,onProductChange:i}){const[l,u]=v.useState(!1),d=v.useRef(null);v.useEffect(()=>{function p(y){d.current&&!d.current.contains(y.target)&&u(!1)}return document.addEventListener("mousedown",p),()=>document.removeEventListener("mousedown",p)},[]);const m=e.find(p=>p.id===t),f=m?cs(m.name,m.color_hex??null):null;return a.jsxs("div",{ref:d,className:"relative overflow-visible",children:[n&&a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:n}),a.jsxs("div",{onClick:()=>u(!l),className:`w-full px-3 py-2 border rounded-md bg-white cursor-pointer flex items-center justify-between hover:border-gray-400 ${s?"border-red-500":"border-gray-300"}`,children:[a.jsxs("div",{className:"flex items-center gap-2 flex-1 min-w-0",children:[m&&f&&a.jsx("div",{className:"w-4 h-4 rounded flex-shrink-0",style:{backgroundColor:f.background}}),a.jsx("span",{className:`text-sm truncate ${t?"text-gray-900":"text-gray-400"}`,children:m?m.name:"Select a Product"})]}),a.jsx(ls,{className:`h-4 w-4 text-gray-400 transition-transform flex-shrink-0 ${l?"transform rotate-180":""}`})]}),l&&a.jsx("div",{className:"absolute z-[100] w-full mt-1 bg-white border border-gray-300 rounded-md shadow-lg max-h-60 overflow-y-auto",children:e.length===0?a.jsx("div",{className:"px-3 py-2 text-sm text-gray-500 text-center",children:"No products available"}):e.map(p=>{const y=cs(p.name,p.color_hex??null),x=t===p.id;return a.jsxs("div",{onClick:()=>{r(p.id),u(!1),i&&i()},className:`px-3 py-2 cursor-pointer hover:bg-gray-50 flex items-center gap-2 ${x?"bg-gray-50":""}`,children:[a.jsx("div",{className:"w-4 h-4 rounded flex-shrink-0",style:{backgroundColor:y.background}}),a.jsx("span",{className:"text-sm text-gray-900 flex-1",children:p.name}),x&&a.jsx(Yr,{className:"h-4 w-4 text-gray-400 flex-shrink-0"})]},p.id)})})]})}function $Z({products:e,sessions:t,selectedProductId:r,onProductChange:n,useAllSessions:s,onToggleAllSessions:i,selectedSessionIds:l,onSessionToggle:u,getSessionStatus:d,formatSessionDateRange:m,filterSessions:f}){const p=r?f(t,r):[];return a.jsxs("div",{className:"space-y-3 overflow-visible",children:[a.jsx("div",{className:"overflow-visible",children:a.jsx(ch,{products:e,value:r,onChange:y=>{n(y),i(!0)},label:"Product *"})}),r&&a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Session Selection *"}),a.jsxs("div",{className:"inline-flex items-center bg-gray-100 rounded-lg p-1",children:[a.jsx("button",{type:"button",onClick:()=>i(!1),className:`px-4 py-2 rounded-md text-sm font-medium transition-colors flex items-center ${s?"text-gray-600 hover:text-gray-900":"bg-white text-[#2d4660] shadow-sm"}`,children:"Select Sessions"}),a.jsx("button",{type:"button",onClick:()=>{i(!0)},className:`px-4 py-2 rounded-md text-sm font-medium transition-colors flex items-center ${s?"bg-white text-[#2d4660] shadow-sm":"text-gray-600 hover:text-gray-900"}`,children:"All Sessions"})]}),s&&a.jsx("p",{className:"mt-2 text-xs text-gray-500",children:"User will be added to all current and future sessions for this product"})]}),!s&&a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Sessions * (Current and Future)"}),p.length===0?a.jsx("p",{className:"text-sm text-gray-500",children:"No current or future sessions found for this product."}):a.jsx("div",{className:"max-h-48 overflow-y-auto border border-gray-300 rounded-md p-2",children:p.map(y=>a.jsxs("label",{className:"flex items-start px-3 py-2 hover:bg-gray-50 cursor-pointer border-b border-gray-100 last:border-b-0",children:[a.jsx("input",{type:"checkbox",checked:l.includes(y.id),onChange:()=>u(y.id),className:"w-4 h-4 border-gray-300 rounded focus:ring-[#2D4660] accent-green-600 mt-1",style:{accentColor:"#16a34a"}}),a.jsxs("div",{className:"ml-3 flex-1",children:[a.jsx("div",{className:"text-sm font-medium text-gray-900",children:y.title||"Unnamed Session"}),a.jsx("div",{className:"text-xs text-gray-500 mt-0.5",children:m(y)}),a.jsx("div",{className:"text-xs mt-0.5",children:a.jsx("span",{className:`font-medium ${d(y).color}`,children:d(y).text})})]})]},y.id))})]})]})]})}function MZ(){var bl,Co;const{currentUser:e,setCurrentUser:t,setCurrentSession:r,currentSession:n}=aa(),s=Ds(),[i]=rx(),[l,u]=v.useState([]),[d,m]=v.useState([]),[f,p]=v.useState(!0),[y,x]=v.useState(""),[w,b]=v.useState("all"),[S,_]=v.useState(!1),[E,C]=v.useState(null),[O,T]=v.useState(null),[P,F]=v.useState(null),[H,L]=v.useState(null),q=N=>{const J=new Date,Ee=N.filter(Pe=>{const Ce=Pe.start_date?new Date(Pe.start_date):null,Ue=Pe.end_date?new Date(Pe.end_date):null;return Ce&&J<Ce||Ue&&J>Ue?!1:!!(Ce&&J>=Ce&&(!Ue||J<=Ue))});return Ee.length===0?null:Ee.sort((Pe,Ce)=>{const Ue=Pe.start_date?new Date(Pe.start_date).getTime():0;return(Ce.start_date?new Date(Ce.start_date).getTime():0)-Ue})[0]},z=new Set(["spencer.faull@newmill.com","chris.rodes@newmill.com","dave.hoffman@newmill.com"]),U=v.useRef(null),ne=v.useRef({}),ie=v.useRef(null),oe=v.useRef(!1),[V,Z]=v.useState(!1),[ee,re]=v.useState(!1),[me,I]=v.useState([]),[M,We]=v.useState("system-admin"),[te,ve]=v.useState(!0),[he,ye]=v.useState(!1),[le,W]=v.useState(null),[Re,Ge]=v.useState(null),[G,He]=v.useState([]),[Je,gt]=v.useState({adminSessions:[],stakeholderSessions:[]}),[_t,Mt]=v.useState(""),[Dt,Qt]=v.useState(!0),[R,Y]=v.useState([]),[ce,je]=v.useState(!1),[pe,Se]=v.useState(null),[qe,xt]=v.useState(!1),[bt,Ft]=v.useState(null),[hr,Ht]=v.useState(new Set),[Ir,Dr]=v.useState(new Map),[zt,nn]=v.useState(!1),[ar,Ur]=v.useState(!1),[st,Wt]=v.useState({name:"",email:"",isSystemAdmin:!1,sessionAdminIds:[],stakeholderSessionIds:[]}),[Ut,Kt]=v.useState(Iu()),[mr,Rr]=v.useState(!0),[ws,sn]=v.useState(null),[pr,Zn]=v.useState({sessionAdmin:!1,stakeholder:!1}),[an,xr]=v.useState("User Management"),[ir,es]=v.useState([]),[Gt,Br]=v.useState(""),[gr,Wr]=v.useState([]),[wr,Vn]=v.useState(""),[yn,_r]=v.useState([]),[$s,on]=v.useState(!1),[or,Zt]=v.useState(null),[Et,ln]=v.useState(!0),[Vr,ts]=v.useState(!0),Pn=!!wr&&(Vr||st.sessionAdminIds.length>0),us=!!Gt&&(Et||st.stakeholderSessionIds.length>0),bs=((bl=ir.find(N=>N.id===wr))==null?void 0:bl.name)||"",Vt=((Co=ir.find(N=>N.id===Gt))==null?void 0:Co.name)||"",Q=N=>{const J=N.map(Pe=>G.find(Ce=>Ce.id===Pe)).filter(Pe=>!!Pe);return J.length===0?"":J.map(Pe=>Pe.title||"Unnamed Session").join(", ")},we=Pn?`${bs||"Selected Product"}  ${Vr?"All Sessions":Q(st.sessionAdminIds)||"Sessions selected"}`:"",$e=us?`${Vt||"Selected Product"}  ${Et?"All Sessions":Q(st.stakeholderSessionIds)||"Sessions selected"}`:"",Oe=(()=>{const N=[];return st.isSystemAdmin&&N.push("System Admin"),Pn&&N.push("Session Admin"),us&&N.push("Stakeholder"),N})(),Xe=N=>{if(Oe.length===0)return N?"Creating User...":"Create User";const J=Oe.join(" & ");return N?`Adding ${J}...`:`Add ${J}`},[Ve,At]=v.useState(!1),[yt,Lt]=v.useState(null),[Le,dr]=v.useState(""),[Nr,yr]=v.useState(""),[Nt,cn]=v.useState(!1),Ms=async N=>{N&&(N.preventDefault(),N.stopPropagation());try{await Ne.auth.signOut()}catch(J){console.error("Error signing out:",J)}try{r(null)}catch(J){console.error("Error clearing session:",J)}t(null);try{localStorage.removeItem("voting_system_current_session"),localStorage.removeItem("voting_system_user"),localStorage.removeItem("azureDevOpsAuthInProgress"),sessionStorage.removeItem("oauth_return_path"),sessionStorage.removeItem("oauth_action"),sessionStorage.removeItem("oauth_error")}catch(J){console.error("Error clearing storage:",J)}_(!1),s("/login",{replace:!0})};v.useEffect(()=>{if(!S)return;const N=J=>{U.current&&!U.current.contains(J.target)&&_(!1)};return document.addEventListener("mousedown",N),document.addEventListener("touchstart",N,{passive:!0}),()=>{document.removeEventListener("mousedown",N),document.removeEventListener("touchstart",N)}},[S]),v.useEffect(()=>{if(!E)return;const N=J=>{const Ee=ne.current[E];Ee&&!Ee.contains(J.target)&&C(null)};return document.addEventListener("mousedown",N),document.addEventListener("touchstart",N,{passive:!0}),()=>{document.removeEventListener("mousedown",N),document.removeEventListener("touchstart",N)}},[E]);const Fs=v.useCallback(async()=>{try{const N=await zC(),J=new Date,Ee=N.filter(Pe=>G.some(Ce=>Ce.product_id!==Pe.id?!1:new Date(Ce.end_date)>=J));es(Ee)}catch(N){console.error("Error loading products:",N)}},[G]),Ls=()=>{Vn(""),_r([]),Wt(N=>({...N,sessionAdminIds:[]})),ts(!0),Zn(N=>({...N,sessionAdmin:!1}))},ji=()=>{Br(""),Wt(N=>({...N,stakeholderSessionIds:[]})),ln(!0),Zn(N=>({...N,stakeholder:!1}))},Vi=N=>{if(!N){Wr([]);return}const J=new Date,Ee=G.filter(Pe=>Pe.product_id!==N?!1:new Date(Pe.end_date)>=J);Wr(Ee)};v.useEffect(()=>{Gt?Vi(Gt):Wr([])},[Gt,G]);const Si=N=>{if(!N){_r([]);return}const J=new Date,Ee=G.filter(Pe=>Pe.product_id!==N?!1:new Date(Pe.end_date)>=J);_r(Ee)};v.useEffect(()=>{wr?Si(wr):_r([])},[wr,G]),v.useEffect(()=>{const N=i.get("filter");N==="session-admin"?(xr("Session Admin Management"),b("session-admin")):N==="stakeholder"?(xr("Stakeholder Management"),b("stakeholder")):xr("User Management")},[i]);const qr=async N=>{p(!0);try{const[J,Ee,Pe]=await Promise.all([Hj(),Ne.from("session_admins").select("user_id, session_id, created_at").then(({data:kt,error:Hr})=>Hr?(console.error("Error fetching all admin relations:",Hr),[]):kt||[]),Ne.from("session_stakeholders").select("user_email, session_id, created_at").then(({data:kt,error:Hr})=>Hr?(console.error("Error fetching all stakeholder relations:",Hr),[]):kt||[])]),Ce=new Map;Ee.forEach(kt=>{Ce.has(kt.user_id)||Ce.set(kt.user_id,[]),Ce.get(kt.user_id).push({session_id:kt.session_id,created_at:kt.created_at})});const Ue=new Map;Pe.forEach(kt=>{var ki;const Hr=((ki=kt.user_email)==null?void 0:ki.toLowerCase())||"";Hr&&(Ue.has(Hr)||Ue.set(Hr,[]),Ue.get(Hr).push({session_id:kt.session_id,created_at:kt.created_at}))});const ke=new Map(N.map(kt=>[kt.id,kt])),at=await Promise.all(J.map(async kt=>{const Hr=await i3(kt.id),ki=[],Td=[];(Ce.get(kt.id)||[]).forEach(qi=>{const qa=ke.get(qi.session_id);qa&&ki.push({...qa,assignedAt:qi.created_at,assignedBy:"System",assignedByName:"System"})});const Yc=kt.email.toLowerCase();return(Ue.get(Yc)||[]).forEach(qi=>{const qa=ke.get(qi.session_id);qa&&Td.push({...qa,assignedAt:qi.created_at,assignedBy:"System",assignedByName:"System"})}),{...kt,roles:Hr,adminInSessions:ki,stakeholderInSessions:Td}}));u(at);const rt=new Map;at.forEach(kt=>{const Hr=kt.email.toLowerCase().trim();rt.has(Hr)||rt.set(Hr,[]),rt.get(Hr).push(kt.id)});const er=new Map;rt.forEach((kt,Hr)=>{kt.length>1&&er.set(Hr,kt)}),Dr(er)}catch(J){console.error("Error loading users:",J)}finally{p(!1)}},si=async()=>{if(e){ve(!0);try{const N=await yo(),[J,Ee]=await Promise.all([pl(e.id),Ne.from("session_admins").select("session_id").eq("user_id",e.id).then(({data:Ce,error:Ue})=>Ue?(console.error("Error fetching admin sessions:",Ue),[]):(Ce||[]).map(ke=>ke.session_id))]);Z(J);const Pe=Ee;if(J)He(N),await Promise.all([X(),qr(N)]);else{const Ce=Pe.length>0;if(re(Ce),I(Pe),!Ce){s("/sessions");return}const Ue=N.filter(ke=>Pe.includes(ke.id));He(Ue),We("session-admin"),await qr(Ue)}}catch(N){console.error("Error checking access:",N),s("/sessions")}finally{ve(!1)}}},X=async()=>{try{const N=["chris.rodes@newmill.com","spencer.faull@newmill.com"],J=new Set,Ee=await qv();if(Ee.length>0){const Ce=Ee.reduce((Ue,ke)=>new Date(ke.created_at)<new Date(Ue.created_at)?ke:Ue);Ft(Ce.user_id),J.add(Ce.user_id)}(await Hj()).forEach(Ce=>{N.includes(Ce.email.toLowerCase())&&J.add(Ce.id)}),Ht(J)}catch(N){console.error("Error loading protected accounts:",N)}},de=N=>{if(N.id===bt)return"Original Admin";const J=N.email.toLowerCase();return J==="chris.rodes@newmill.com"?"Manager":J==="spencer.faull@newmill.com"?"Portfolio Owner":null},ue=N=>{const J=N.email.toLowerCase().trim(),Ee=Ir.get(J);return Ee?Ee.length>1:!1},Me=N=>{const J=N.email.toLowerCase().trim(),Ee=Ir.get(J);return Ee?Ee.length:1},Be=()=>{let N=[...l];if(M==="session-admin"&&G.length>0){const J=new Set(G.map(Ee=>Ee.id));N=N.filter(Ee=>{var Ue,ke;if(Ee.id===(e==null?void 0:e.id))return!0;const Pe=(Ue=Ee.adminInSessions)==null?void 0:Ue.some(at=>at&&J.has(at.id)),Ce=(ke=Ee.stakeholderInSessions)==null?void 0:ke.some(at=>at&&J.has(at.id));return!!Pe||!!Ce})}if(y.trim()){const J=y.toLowerCase();N=N.filter(Ee=>Ee.name.toLowerCase().includes(J)||Ee.email.toLowerCase().includes(J))}w!=="all"&&(N=N.filter(J=>{switch(w){case"system-admin":return J.roles.isSystemAdmin;case"session-admin":return J.roles.sessionAdminCount>0&&!J.roles.isSystemAdmin;case"stakeholder":return J.roles.stakeholderSessionCount>0&&J.roles.sessionAdminCount===0&&!J.roles.isSystemAdmin;case"none":return!J.roles.isSystemAdmin&&J.roles.sessionAdminCount===0&&J.roles.stakeholderSessionCount===0;default:return!0}})),m(N)};v.useEffect(()=>{if(!e){s("/login");return}if(!oe.current)return oe.current=!0,si(),()=>{}},[e]),v.useEffect(()=>{const N=i.get("filter");N&&["system-admin","session-admin","stakeholder","none"].includes(N)&&b(N)},[i]),v.useEffect(()=>{M==="session-admin"?(w==="system-admin"||w==="session-admin"||w==="all")&&b("stakeholder"):M==="system-admin"&&b("all")},[M]);const xe=v.useCallback(()=>{Be()},[l,y,w,M,G,e]);v.useEffect(()=>{xe()},[xe]),v.useEffect(()=>{function N(J){ie.current&&!ie.current.contains(J.target)&&Kt(Ee=>({...Ee,showResults:!1}))}return document.addEventListener("mousedown",N),()=>document.removeEventListener("mousedown",N)},[]);const be=async N=>{try{const J=[],Ee=[];for(const Pe of G)await pm(N,Pe.id)&&J.push(Pe.id),await f3(N,Pe.id)&&Ee.push(Pe.id);gt({adminSessions:J,stakeholderSessions:Ee})}catch(J){console.error("Error loading user session memberships:",J)}},ct=async(N,J)=>{Ge(N),W(J),Mt(""),Qt(!0),Y([]),ye(!0),C(null),ir.length===0&&await Fs(),await be(N.id)},It=()=>{ye(!1),W(null),Ge(null),Mt(""),Qt(!0),Y([]),gt({adminSessions:[],stakeholderSessions:[]})},ft=(N,J)=>{if(!J)return[];const Ee=new Date;return N.filter(Pe=>Pe.product_id!==J?!1:new Date(Pe.end_date)>=Ee)},Ot=async()=>{if(!Re||!le)return;if(!_t){alert("Please select a product first.");return}let N=[];if(Dt)N=ft(Gc(le),_t).map(Ee=>Ee.id);else{if(R.length===0){alert("Please select at least one session.");return}N=R}if(N.length===0){alert("No sessions available for this product.");return}try{for(const J of N)le==="session-admin"?await pc(J,Re.id):le==="stakeholder"?await Kj(J,Re.email,Re.name):le==="remove-stakeholder"&&await Vv(J,Re.email);It(),await qr(G)}catch(J){console.error("Error modifying user session role:",J);const Ee=(J==null?void 0:J.message)||(J==null?void 0:J.toString())||"Unknown error";console.error("Full error details:",J),alert(`Failed to ${le==="remove-stakeholder"?"remove stakeholder from":"add user to"} session(s).

Error: ${Ee}

Please check the console for more details.`)}},wt=async(N,J)=>{if(C(null),!!confirm(`Are you sure you want to ${J?"remove":"grant"} system admin access for this user?`))try{J?await Zf(N):await ph(N),await qr(G)}catch(Ee){console.error("Error toggling system admin:",Ee),alert("Failed to update system admin status. Please try again.")}},ze=async(N,J)=>{C(null);const Ee=M==="session-admin"?`Are you sure you want to remove ${J} from all sessions you manage? This will remove them as a stakeholder or session admin from your sessions only.`:`Are you sure you want to remove all roles from ${J}? This will remove them from all sessions and revoke system admin access.`;if(confirm(Ee))try{if(M==="system-admin"&&await Zf(N),M==="session-admin"){for(const Pe of me)try{await Qf(Pe,N)}catch(Ce){console.error(`Error removing session admin from ${Pe}:`,Ce)}for(const Pe of me)try{await Ug(Pe,N)}catch(Ce){console.error(`Error removing stakeholder from ${Pe}:`,Ce)}}else for(const Pe of G)try{await Qf(Pe.id,N),await Ug(Pe.id,N)}catch{}await qr(G)}catch(Pe){console.error("Error removing roles:",Pe),alert("Failed to remove roles. Please try again.")}},qt=async(N,J)=>{const Ee=l.find(Pe=>Pe.id===N);if(Ee){if(M==="session-admin"){if(Ee.roles.stakeholderSessionCount===0){alert("This user is not a stakeholder in any sessions.");return}const Pe=`Are you sure you want to remove ${J} as a stakeholder from all sessions you manage?`;if(!confirm(Pe))return;try{let Ce=0;for(const Ue of G)try{await Vv(Ue.id,Ee.email),Ce++}catch(ke){console.error(`Error removing stakeholder from session ${Ue.id}:`,ke)}await qr(G),Ce>0?alert(`${J} has been removed as a stakeholder from ${Ce} session(s) you manage.`):alert(`${J} was not a stakeholder in any of the sessions you manage.`)}catch(Ce){console.error("Error removing stakeholder:",Ce),alert("Failed to remove stakeholder. Please try again.")}return}Se(Ee),je(!0)}},Rt=async()=>{if(pe){if(hr.has(pe.id)){const N=de(pe);alert(`Cannot delete this protected account${N?` (${N})`:""}. This protects against accidentally locking important users out of the system.`),je(!1),Se(null);return}xt(!0);try{for(const J of G)try{await Qf(J.id,pe.id),await Ug(J.id,pe.id)}catch{}if(pe.roles.isSystemAdmin)try{await Zf(pe.id)}catch(J){console.error("Error removing system admin role:",J)}const{error:N}=await Ne.from("users").delete().eq("id",pe.id);if(N)throw N;await qr(G),je(!1),Se(null)}catch(N){console.error("Error deleting user:",N),alert("Failed to delete user. Please try again.")}finally{xt(!1)}}},D=()=>{je(!1),Se(null)},_e=async()=>{if(!yt)return;if(!Le.trim()){alert("Name is required");return}if(!Nr.trim()){alert("Email is required");return}if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(Nr.trim())){alert("Please enter a valid email address");return}cn(!0);try{const{error:J}=await Ne.from("users").update({name:Le.trim(),email:Nr.trim().toLowerCase()}).eq("id",yt.id);if(J)throw J;u(Ee=>Ee.map(Pe=>Pe.id===yt.id?{...Pe,name:Le.trim(),email:Nr.trim().toLowerCase()}:Pe)),At(!1),Lt(null),dr(""),yr("")}catch(J){console.error("Error updating user:",J),alert("Failed to update user. Please try again.")}finally{cn(!1)}},Ae=()=>{_(!1),nn(!0),Wt({name:"",email:"",isSystemAdmin:!1,sessionAdminIds:[],stakeholderSessionIds:[]}),Kt(Iu()),Br(""),Wr([]),Vn(""),_r([]),Fs(),Rr(!0)},Qe=()=>{nn(!1),Wt({name:"",email:"",isSystemAdmin:!1,sessionAdminIds:[],stakeholderSessionIds:[]}),Kt(Iu()),Br(""),Wr([]),Vn(""),_r([]),ln(!0),ts(!0),Zn({sessionAdmin:!1,stakeholder:!1}),Rr(!0)};v.useEffect(()=>{(async()=>{var Ee,Pe,Ce,Ue;try{const{data:{session:ke}}=await Ne.auth.getSession();if(ke){const at=((Pe=(Ee=ke.user)==null?void 0:Ee.app_metadata)==null?void 0:Pe.provider)==="azure"||((Ue=(Ce=ke.user)==null?void 0:Ce.identities)==null?void 0:Ue.some(rt=>rt.provider==="azure"));sn(at||!1)}else sn(!1)}catch(ke){console.error("Error checking Azure sign-in status:",ke),sn(!1)}})();const{data:{subscription:J}}=Ne.auth.onAuthStateChange((Ee,Pe)=>{var Ce,Ue,ke,at;if(Pe){const rt=((Ue=(Ce=Pe.user)==null?void 0:Ce.app_metadata)==null?void 0:Ue.provider)==="azure"||((at=(ke=Pe.user)==null?void 0:ke.identities)==null?void 0:at.some(er=>er.provider==="azure"));sn(rt||!1)}else sn(!1)});return()=>{J.unsubscribe()}},[]);const tt=async()=>{try{const N=window.location.pathname.startsWith("/feature-voting-app")?"/feature-voting-app":"",{error:J}=await Ne.auth.signInWithOAuth({provider:"azure",options:{redirectTo:`${window.location.origin}${N}/users`,scopes:"email openid profile User.ReadBasic.All"}});J&&(console.error("Azure sign-in error:",J),Kt(Ee=>({...Ee,error:"Failed to sign in with Microsoft. Please try again."})))}catch(N){console.error("Azure sign-in error:",N),Kt(J=>({...J,error:"Failed to sign in with Microsoft. Please try again."}))}},Bt=async N=>{if(Kt(J=>({...J,searchTerm:N,isSearching:!0,showResults:!1,error:""})),!N||N.trim().length<2){Kt(J=>({...J,results:[],isSearching:!1,error:""}));return}try{const J=await RZ(N);Kt(Ee=>({...Ee,results:J,isSearching:!1,showResults:J.length>0,error:""}))}catch(J){console.error("Error searching Azure AD users:",J);const Ee=(J==null?void 0:J.message)||"Failed to search company users. Please try again.";Kt(Pe=>({...Pe,results:[],isSearching:!1,showResults:!1,error:Ee}))}},Yt=N=>{let J="";if(N.givenName&&N.surname)J=`${N.givenName} ${N.surname}`;else if(N.displayName){const Ee=N.displayName.trim();if(Ee.includes(",")){const Pe=Ee.split(",").map(Ce=>Ce.trim());Pe.length===2?J=`${Pe[1]} ${Pe[0]}`:J=Ee}else J=Ee}else J=N.mail||N.userPrincipalName||"";Wt({...st,name:J,email:N.mail||N.userPrincipalName}),Kt(Iu()),Rr(!1)},Cr=async()=>{if(!st.name.trim()||!st.email.trim()){alert("Please fill in all required fields (Name, Email)");return}Ur(!0);try{const{data:N,error:J}=await Ne.from("users").insert({name:st.name.trim(),email:st.email.trim().toLowerCase(),created_by:e==null?void 0:e.id,created_by_name:e==null?void 0:e.name}).select().single();if(J)throw J;if(!N)throw new Error("User creation failed");const Ee=N.id;if(M==="system-admin"&&st.isSystemAdmin&&await ph(Ee),M==="system-admin"&&pr.sessionAdmin&&wr)if(Vr)for(const Ue of yn)try{await pc(Ue.id,Ee)}catch(ke){console.error(`Error adding session admin role to session ${Ue.id}:`,ke)}else for(const Ue of st.sessionAdminIds)try{await pc(Ue,Ee)}catch(ke){console.error("Error adding session admin role:",ke)}console.log("Adding stakeholder to sessions:",st.stakeholderSessionIds),console.log("View mode:",M),console.log("User admin sessions:",me),console.log("All sessions:",G.map(Ue=>({id:Ue.id,title:Ue.title})));let Pe=[];if(M==="session-admin"?Gt&&Et?Pe=gr.map(Ue=>Ue.id):Gt&&!Et&&(Pe=st.stakeholderSessionIds):M==="system-admin"&&pr.stakeholder&&Gt&&(Et?Pe=gr.map(Ue=>Ue.id):Pe=st.stakeholderSessionIds),Pe.length===0)console.log("No stakeholder sessions to add");else{for(const Ue of Pe){if(M==="session-admin"&&!G.some(at=>at.id===Ue)){console.warn(`Skipping session ${Ue} - not in managed sessions`);continue}try{console.log(`Adding ${st.email} as stakeholder to session ${Ue}`);const ke=await Kj(Ue,st.email,st.name);console.log(`Successfully added stakeholder to session ${Ue}:`,ke)}catch(ke){console.error(`Error adding stakeholder role to session ${Ue}:`,ke);const at=(ke==null?void 0:ke.message)||(ke==null?void 0:ke.toString())||"Unknown error";alert(`Warning: Failed to add ${st.email} to session ${Ue}.

Error: ${at}`)}}console.log("Finished adding stakeholder roles")}let Ce="User";st.isSystemAdmin?Ce="System Admin":pr.sessionAdmin&&wr&&(Vr||st.sessionAdminIds.length>0)?Ce="Session Admin":(M==="session-admin"&&Gt&&(Et||st.stakeholderSessionIds.length>0)||M==="system-admin"&&pr.stakeholder&&Gt&&(Et||st.stakeholderSessionIds.length>0))&&(Ce="Stakeholder"),Qe(),await qr(G),Zt({email:st.email,userType:Ce}),on(!0)}catch(N){console.error("Error creating user:",N),alert(`Failed to create user: ${N.message||"Unknown error"}`)}finally{Ur(!1)}},On=N=>{Wt(J=>({...J,sessionAdminIds:J.sessionAdminIds.includes(N)?J.sessionAdminIds.filter(Ee=>Ee!==N):[...J.sessionAdminIds,N]}))},Jr=N=>{Wt(J=>({...J,stakeholderSessionIds:J.stakeholderSessionIds.includes(N)?J.stakeholderSessionIds.filter(Ee=>Ee!==N):[...J.stakeholderSessionIds,N]}))},lr=N=>{const Ee=N.split("T")[0].split(" ")[0].split("-");if(Ee.length!==3)return new Date(N).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"});const Pe=parseInt(Ee[0],10),Ce=parseInt(Ee[1],10)-1,Ue=parseInt(Ee[2],10);return new Date(Pe,Ce,Ue).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})},ds=N=>{const J=new Date,Ee=new Date(N.start_date),Pe=new Date(N.end_date);return N.is_active&&J>=Ee&&J<=Pe?{text:"Active",color:"text-green-600"}:J<Ee?{text:"Upcoming",color:"text-blue-600"}:{text:"Ended",color:"text-gray-500"}},vn=N=>{const J=new Date(N.start_date),Ee=new Date(N.end_date),Pe=J.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}),Ce=Ee.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"});return`${Pe} - ${Ce}`},No=N=>N.roles.isSystemAdmin?a.jsxs("span",{className:"inline-flex items-center px-2.5 py-1 rounded text-xs font-medium bg-[#C89212] text-white",children:[a.jsx(As,{className:"h-3.5 w-3.5 mr-1"}),"System Admin"]}):N.roles.sessionAdminCount>0?a.jsxs("span",{className:"inline-flex items-center px-2.5 py-1 rounded text-xs font-medium bg-[#576C71] text-white",children:[a.jsx(Fn,{className:"h-3.5 w-3.5 mr-1"}),"Session Admin (",N.roles.sessionAdminCount,")"]}):N.roles.stakeholderSessionCount>0?a.jsxs("span",{className:"inline-flex items-center px-2.5 py-1 rounded text-xs font-medium bg-[#8B5A4A] text-white",children:[a.jsx(ms,{className:"h-3.5 w-3.5 mr-1"}),"Stakeholder (",N.roles.stakeholderSessionCount,")"]}):a.jsx("span",{className:"inline-flex items-center px-2.5 py-1 rounded text-xs font-medium bg-gray-100 text-gray-600",children:"No Role"}),Gc=N=>N?N==="session-admin"?G.filter(J=>!Je.adminSessions.includes(J.id)):N==="remove-stakeholder"?G.filter(J=>Je.stakeholderSessions.includes(J.id)&&(M==="system-admin"||me.includes(J.id))):G.filter(J=>!Je.stakeholderSessions.includes(J.id)):[],wl=(N,J)=>J?J==="session-admin"?N.roles.sessionAdminCount<G.length:N.roles.stakeholderSessionCount<G.length:!1;return te||f?a.jsx("div",{className:"min-h-screen w-full bg-gray-50 flex items-center justify-center",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-[#2d4660] mx-auto mb-4"}),a.jsx("p",{className:"text-gray-600",children:te?"Checking access...":"Loading users..."})]})}):V?a.jsxs("div",{className:"min-h-screen bg-gray-50 pb-20",children:[a.jsxs("div",{className:"container mx-auto p-4 max-w-6xl",children:[a.jsx("div",{className:"hidden md:flex md:justify-center mb-2",children:a.jsx("img",{src:"https://www.steeldynamics.com/wp-content/uploads/2024/05/New-Millennium-color-logo1.png",alt:"New Millennium Building Systems Logo",className:"-mt-4 cursor-pointer hover:opacity-80 transition-opacity",style:{height:"96px",width:"auto"},onClick:()=>s("/sessions")})}),a.jsxs("div",{className:"flex justify-between items-center mb-4 md:mb-6",children:[a.jsxs("div",{className:"flex items-center flex-1 min-w-0",children:[a.jsx("img",{src:"https://www.steeldynamics.com/wp-content/uploads/2024/05/New-Millennium-color-logo1.png",alt:"New Millennium Building Systems Logo",className:"mr-3 md:hidden flex-shrink-0 cursor-pointer hover:opacity-80 transition-opacity",style:{width:"36px",height:"36px"},onClick:()=>s("/sessions")}),a.jsx("button",{onClick:()=>{n!=null&&n.id?s("/admin"):s("/sessions")},className:"mr-2 p-1 rounded-full hover:bg-gray-200 cursor-pointer flex-shrink-0",children:a.jsx(Mc,{className:"h-6 w-6"})}),a.jsx("h1",{className:"text-xl md:text-3xl font-bold text-[#2d4660] truncate",children:an})]}),a.jsxs("div",{ref:U,className:"relative z-40 flex-shrink-0 ml-2",children:[a.jsxs("div",{className:"hidden md:flex space-x-2",children:[(V||ee)&&a.jsxs("button",{onClick:Ae,className:"flex items-center px-4 py-2 bg-[#2D4660] text-white rounded-lg hover:bg-[#173B65] transition-colors",children:[a.jsx(Xn,{className:"h-4 w-4 mr-2"}),M==="session-admin"?"Add Stakeholder":"Add User"]}),(V||ee)&&n&&a.jsxs("button",{onClick:()=>s("/admin"),className:"flex items-center px-4 py-2 bg-[#1E5461] text-white rounded-lg hover:bg-[#145668] transition-colors",children:[a.jsx(Fn,{className:"h-4 w-4 mr-2"}),"Admin Dashboard"]}),a.jsxs("button",{onClick:()=>s("/sessions"),className:"flex items-center px-4 py-2 bg-[#4f6d8e] text-white rounded-lg hover:bg-[#3d5670] transition-colors",children:[a.jsx(_n,{className:"h-4 w-4 mr-2"}),"My Sessions"]}),a.jsxs("button",{onClick:N=>{N.preventDefault(),N.stopPropagation(),Ms(N)},className:"flex items-center px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-colors",children:[a.jsx(zn,{className:"h-4 w-4 mr-2"}),"Logout"]})]}),a.jsx("div",{className:"flex md:hidden",children:a.jsx("button",{onClick:()=>_(!S),className:"p-2 rounded-md border border-gray-200 bg-white shadow-sm","aria-label":"Open menu",children:a.jsx(Ys,{className:"h-5 w-5 text-gray-700"})})}),S&&a.jsx("div",{className:"absolute right-0 mt-2 w-56 bg-white border border-gray-200 rounded-lg shadow-lg md:hidden z-50",children:a.jsxs("div",{className:"py-1",children:[(V||ee)&&a.jsxs("button",{onClick:()=>{_(!1),Ae()},className:"w-full px-4 py-3 flex items-center text-left hover:bg-gray-50",children:[a.jsx(Xn,{className:"h-5 w-5 mr-3 text-green-600"}),a.jsx("span",{className:"text-base",children:M==="session-admin"?"Add Stakeholder":"Add User"})]}),(V||ee)&&n&&a.jsxs("button",{onClick:()=>{_(!1),s("/admin")},className:"w-full px-4 py-3 flex items-center text-left hover:bg-gray-50",children:[a.jsx(Fn,{className:"h-5 w-5 mr-3 text-[#1E5461]"}),a.jsx("span",{className:"text-base",children:"Admin Dashboard"})]}),a.jsxs("button",{onClick:()=>{_(!1),s("/sessions")},className:"w-full px-4 py-3 flex items-center text-left hover:bg-gray-50",children:[a.jsx(_n,{className:"h-5 w-5 mr-3 text-gray-700"}),a.jsx("span",{className:"text-base",children:"My Sessions"})]}),a.jsxs("button",{onClick:N=>{N.preventDefault(),N.stopPropagation(),_(!1),Ms(N)},className:"w-full px-4 py-3 flex items-center text-left hover:bg-gray-50",children:[a.jsx(zn,{className:"h-5 w-5 mr-3 text-gray-700"}),a.jsx("span",{className:"text-base",children:"Logout"})]})]})})]})]}),a.jsx("div",{className:"relative z-10 bg-white rounded-lg shadow-md p-3 md:p-4 mb-4 md:mb-6",children:a.jsxs("div",{className:"flex flex-col gap-3 md:flex-row md:gap-4",children:[a.jsxs("div",{className:"flex-1 relative",children:[a.jsx(RS,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"}),a.jsx("input",{type:"text",placeholder:"Search by name or email...",value:y,onChange:N=>x(N.target.value),className:"w-full pl-10 pr-10 py-2.5 md:py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#2d4660] focus:border-transparent text-base"}),y&&a.jsx("button",{onClick:()=>x(""),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600",children:a.jsx(Js,{className:"h-5 w-5"})})]}),a.jsxs("select",{value:w==="system-admin"&&M==="session-admin"?"session-admin":w,onChange:N=>b(N.target.value),className:"px-4 py-2.5 md:py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#2d4660] focus:border-transparent text-base",children:[M!=="session-admin"&&a.jsx("option",{value:"all",children:"All Roles"}),M!=="session-admin"&&a.jsx("option",{value:"system-admin",children:"System Admin"}),M!=="session-admin"&&a.jsx("option",{value:"session-admin",children:"Session Admin"}),a.jsx("option",{value:"stakeholder",children:"Stakeholder"}),a.jsx("option",{value:"none",children:"No Role"})]})]})}),a.jsx("div",{className:"md:hidden space-y-3 relative z-10 overflow-visible",children:d.length===0?a.jsx("div",{className:"bg-white rounded-lg shadow-md p-8 text-center text-gray-500",children:y||w!=="all"?"No users found matching your filters.":"No users found."}):d.map(N=>{var J,Ee;return a.jsxs("div",{className:"bg-white rounded-lg shadow-md overflow-visible",children:[a.jsxs("div",{className:"p-4 border-b border-gray-100",children:[a.jsxs("div",{className:"flex justify-between items-start mb-2",children:[a.jsxs("div",{className:"flex-1 min-w-0 pr-2",children:[a.jsxs("h3",{className:"text-base font-semibold text-gray-900 truncate",children:[N.name,N.id===(e==null?void 0:e.id)&&a.jsx("span",{className:"ml-2 text-xs text-[#c59f2d] font-semibold",children:"(You)"}),de(N)&&a.jsxs("span",{className:"ml-2 text-xs text-[#c59f2d] font-semibold",children:["(",de(N),")"]}),ue(N)&&a.jsxs("span",{className:"ml-2 px-2 py-0.5 bg-red-100 text-red-700 text-xs font-medium rounded",children:["Duplicate (",Me(N),")"]})]}),a.jsx("p",{className:"text-sm text-gray-500 truncate",children:N.email})]}),a.jsx("div",{className:"flex items-center gap-2 flex-shrink-0",children:a.jsxs("div",{className:"relative",ref:Pe=>{ne.current[N.id]=Pe},children:[a.jsx("button",{onClick:()=>C(E===N.id?null:N.id),className:`p-2 rounded-md hover:bg-gray-100 transition-colors ${N.id===(e==null?void 0:e.id)?"opacity-50 cursor-not-allowed":""}`,disabled:N.id===(e==null?void 0:e.id),title:N.id===(e==null?void 0:e.id)?"Cannot modify your own permissions":"Change user role",children:a.jsx(DS,{className:"h-5 w-5 text-gray-600"})}),E===N.id&&N.id!==(e==null?void 0:e.id)&&a.jsx("div",{className:"fixed md:absolute md:right-0 md:mt-1 w-64 bg-white border border-gray-200 rounded-lg shadow-lg z-[9999]",style:(()=>{const Pe=ne.current[N.id];if(!Pe)return{};const Ce=Pe.getBoundingClientRect();return window.innerWidth<768?{top:`${Ce.bottom+4}px`,right:`${window.innerWidth-Ce.right+4}px`,left:"auto"}:{}})(),children:a.jsxs("div",{className:"py-1",children:[a.jsx("div",{className:"px-3 py-2 text-xs font-semibold text-gray-500 uppercase border-b border-gray-200",children:"Change User Role"}),M==="system-admin"&&a.jsxs(a.Fragment,{children:[N.roles.isSystemAdmin?a.jsxs("button",{onClick:()=>wt(N.id,!0),className:"w-full px-4 py-3 text-left flex items-center hover:bg-red-50 text-red-700",children:[a.jsx(As,{className:"h-5 w-5 mr-3 flex-shrink-0"}),a.jsxs("div",{children:[a.jsx("div",{className:"font-medium text-base",children:"Remove System Admin"}),a.jsx("div",{className:"text-xs text-gray-500",children:"Revoke global admin access"})]})]}):a.jsxs("button",{onClick:()=>wt(N.id,!1),className:"w-full px-4 py-3 text-left flex items-center hover:bg-[#C89212]/10 text-[#C89212]",children:[a.jsx(As,{className:"h-5 w-5 mr-3 flex-shrink-0"}),a.jsxs("div",{children:[a.jsx("div",{className:"font-medium text-base",children:"Make System Admin"}),a.jsx("div",{className:"text-xs text-gray-500",children:"Grant global admin access"})]})]}),wl(N,"session-admin")&&a.jsxs("button",{onClick:()=>ct(N,"session-admin"),className:"w-full px-4 py-3 text-left flex items-center hover:bg-[#576C71]/10 text-[#576C71] border-t border-gray-200",children:[a.jsx(Fn,{className:"h-5 w-5 mr-3 flex-shrink-0"}),a.jsxs("div",{children:[a.jsx("div",{className:"font-medium text-base",children:"Make Session Admin"}),a.jsx("div",{className:"text-xs text-gray-500",children:"Add to a session as admin"})]})]})]}),wl(N,"stakeholder")&&a.jsxs("button",{onClick:()=>ct(N,"stakeholder"),className:"w-full px-4 py-3 text-left flex items-center hover:bg-[#8B5A4A]/10 text-[#8B5A4A] border-t border-gray-200",children:[a.jsx(ms,{className:"h-5 w-5 mr-3 flex-shrink-0"}),a.jsxs("div",{children:[a.jsx("div",{className:"font-medium text-base",children:"Make Stakeholder"}),a.jsx("div",{className:"text-xs text-gray-500",children:"Add to a session as stakeholder"})]})]}),M==="session-admin"&&N.stakeholderInSessions&&N.stakeholderInSessions.length>0&&N.stakeholderInSessions.some(Pe=>me.includes(Pe.id))&&a.jsxs("button",{onClick:()=>ct(N,"remove-stakeholder"),className:"w-full px-4 py-3 text-left flex items-center hover:bg-red-50 text-red-700 border-t border-gray-200",children:[a.jsx(Su,{className:"h-5 w-5 mr-3 flex-shrink-0"}),a.jsxs("div",{children:[a.jsx("div",{className:"font-medium text-base",children:"Remove Stakeholder"}),a.jsx("div",{className:"text-xs text-gray-500",children:"Remove from a session you manage"})]})]}),(N.roles.isSystemAdmin||N.roles.sessionAdminCount>0||N.roles.stakeholderSessionCount>0)&&a.jsxs("button",{onClick:()=>ze(N.id,N.name),className:"w-full px-4 py-3 text-left flex items-center hover:bg-gray-50 text-gray-700 border-t border-gray-200",children:[a.jsx(Su,{className:"h-5 w-5 mr-3 flex-shrink-0"}),a.jsxs("div",{children:[a.jsx("div",{className:"font-medium text-base",children:"Remove All Roles"}),a.jsx("div",{className:"text-xs text-gray-500",children:"Remove from all sessions"})]})]}),(M==="system-admin"||M==="session-admin"&&N.roles.stakeholderSessionCount>0&&((J=N.stakeholderInSessions)==null?void 0:J.some(Pe=>G.some(Ce=>Ce.id===Pe.id)))&&!z.has(N.email))&&a.jsx("div",{className:"px-3 py-2 text-xs font-semibold text-gray-500 uppercase border-t border-gray-200",children:"User Functions"}),M==="system-admin"&&a.jsxs("button",{onClick:()=>{Lt(N),dr(N.name),yr(N.email),At(!0),C(null)},className:"w-full px-4 py-3 text-left flex items-center hover:bg-[#1E5461]/10 text-[#1E5461] border-t border-gray-200",children:[a.jsx(Wu,{className:"h-5 w-5 mr-3 flex-shrink-0"}),a.jsxs("div",{children:[a.jsx("div",{className:"font-medium text-base",children:"Edit User Profile"}),a.jsx("div",{className:"text-xs text-gray-500",children:"Update name and email"})]})]}),(M==="system-admin"||M==="session-admin"&&N.roles.stakeholderSessionCount>0&&((Ee=N.stakeholderInSessions)==null?void 0:Ee.some(Pe=>G.some(Ce=>Ce.id===Pe.id))))&&!z.has(N.email)&&a.jsxs("button",{onClick:()=>{C(null),qt(N.id,N.name)},className:`w-full px-4 py-3 text-left flex items-center hover:bg-[#8B5A4A]/10 text-[#8B5A4A] border-t border-gray-200 ${N.id===(e==null?void 0:e.id)||M==="system-admin"&&hr.has(N.id)?"opacity-50 cursor-not-allowed":""}`,disabled:N.id===(e==null?void 0:e.id)||M==="system-admin"&&hr.has(N.id),children:[a.jsx(Li,{className:"h-5 w-5 mr-3 flex-shrink-0"}),a.jsxs("div",{children:[a.jsx("div",{className:"font-medium text-base",children:M==="session-admin"?"Remove Stakeholder":"Delete User"}),a.jsx("div",{className:"text-xs text-gray-500",children:M==="session-admin"?"Remove from all your sessions":N.id===(e==null?void 0:e.id)?"Cannot delete your own account":hr.has(N.id)?`Cannot delete protected account${de(N)?` (${de(N)})`:""}`:"Permanently delete this user"})]})]})]})})]})})]}),a.jsx("div",{className:"mt-2",children:No(N)})]}),a.jsxs("div",{className:"p-4 space-y-3",children:[a.jsxs("div",{children:[a.jsx("div",{className:"text-xs font-semibold text-gray-500 uppercase mb-1",children:"Sessions"}),a.jsxs("div",{className:"space-y-1",children:[N.roles.sessionAdminCount>0&&a.jsxs("div",{className:"space-y-1",children:[a.jsxs("div",{className:"inline-flex items-center gap-1.5 px-2.5 py-1 rounded border text-xs font-medium",style:{borderColor:"#576C71",color:"#576C71"},children:[a.jsx($S,{className:"h-3.5 w-3.5 flex-shrink-0",style:{fill:"#576C71",color:"#576C71"}}),a.jsxs("span",{children:[N.roles.sessionAdminCount," as Session Admin"]})]}),N.adminInSessions&&N.adminInSessions.length>0&&a.jsx(a.Fragment,{children:(()=>{const Ce=q(N.adminInSessions)||N.adminInSessions[0],Ue=N.adminInSessions.length>1,ke=(P==null?void 0:P.userId)===N.id&&(P==null?void 0:P.role)==="admin";return a.jsxs(a.Fragment,{children:[Ce&&a.jsxs("button",{onClick:async at=>{at.stopPropagation(),await r(Ce),s("/admin")},className:"ml-6 text-left text-sm text-gray-700 hover:text-gray-900 hover:underline",children:[a.jsx("div",{children:Ce.title||"Unnamed Session"}),a.jsx("div",{className:"text-xs text-gray-500 mt-0.5",children:vn(Ce)})]}),Ue&&a.jsxs("button",{onClick:at=>{at.stopPropagation(),F(ke?null:{userId:N.id,role:"admin"})},className:"ml-6 text-xs text-gray-500 hover:text-gray-700 hover:underline mt-1 block flex items-center gap-1.5",style:{minWidth:"70px"},children:[a.jsx("span",{className:"inline-flex items-center justify-center w-4 h-4 border border-gray-400 rounded text-gray-600",children:ke?a.jsx(Mu,{className:"h-2.5 w-2.5"}):a.jsx(Mn,{className:"h-2.5 w-2.5"})}),ke?"Hide":"Show"]}),ke&&a.jsx("div",{className:"ml-6 mt-1 space-y-1",children:N.adminInSessions.filter(at=>at.id!==(Ce==null?void 0:Ce.id)).map(at=>a.jsxs("button",{onClick:async rt=>{rt.stopPropagation(),await r(at),s("/admin")},className:"block text-sm text-left text-gray-700 hover:text-gray-900 hover:underline w-full",children:[a.jsx("div",{children:at.title||"Unnamed Session"}),a.jsx("div",{className:"text-xs text-gray-500 mt-0.5",children:vn(at)})]},at.id))})]})})()})]}),N.roles.stakeholderSessionCount>0&&a.jsxs("div",{className:"space-y-1",children:[a.jsxs("div",{className:"inline-flex items-center gap-1.5 px-2.5 py-1 rounded border text-xs font-medium",style:{borderColor:"#8B5A4A",color:"#8B5A4A"},children:[a.jsx(ms,{className:"h-3.5 w-3.5 flex-shrink-0",style:{fill:"#8B5A4A",color:"#8B5A4A"}}),a.jsxs("span",{children:[N.roles.stakeholderSessionCount," as Stakeholder"]})]}),N.stakeholderInSessions&&N.stakeholderInSessions.length>0&&a.jsx(a.Fragment,{children:(()=>{const Ce=q(N.stakeholderInSessions)||N.stakeholderInSessions[0],Ue=N.stakeholderInSessions.length>1,ke=(P==null?void 0:P.userId)===N.id&&(P==null?void 0:P.role)==="stakeholder";return a.jsxs(a.Fragment,{children:[Ce&&a.jsxs("button",{onClick:async at=>{at.stopPropagation(),await r(Ce),s("/admin")},className:"ml-6 text-left text-sm text-gray-700 hover:text-gray-900 hover:underline",children:[a.jsx("div",{children:Ce.title||"Unnamed Session"}),a.jsx("div",{className:"text-xs text-gray-500 mt-0.5",children:vn(Ce)})]}),Ue&&a.jsxs("button",{onClick:at=>{at.stopPropagation(),F(ke?null:{userId:N.id,role:"stakeholder"})},className:"ml-6 text-xs text-gray-500 hover:text-gray-700 hover:underline mt-1 block flex items-center gap-1.5",style:{minWidth:"70px"},children:[a.jsx("span",{className:"inline-flex items-center justify-center w-4 h-4 border border-gray-400 rounded text-gray-600",children:ke?a.jsx(Mu,{className:"h-2.5 w-2.5"}):a.jsx(Mn,{className:"h-2.5 w-2.5"})}),ke?"Hide":"Show"]}),ke&&a.jsx("div",{className:"ml-6 mt-1 space-y-1",children:N.stakeholderInSessions.filter(at=>at.id!==(Ce==null?void 0:Ce.id)).map(at=>a.jsxs("button",{onClick:async rt=>{rt.stopPropagation(),await r(at),s("/admin")},className:"block text-sm text-left text-gray-700 hover:text-gray-900 hover:underline w-full",children:[a.jsx("div",{children:at.title||"Unnamed Session"}),a.jsx("div",{className:"text-xs text-gray-500 mt-0.5",children:vn(at)})]},at.id))})]})})()})]}),N.roles.sessionAdminCount===0&&N.roles.stakeholderSessionCount===0&&a.jsx("span",{className:"text-sm text-gray-400",children:"No session roles"})]})]}),a.jsxs("div",{children:[a.jsx("div",{className:"text-xs font-semibold text-gray-500 uppercase mb-1",children:"Assigned"}),a.jsxs("div",{className:"space-y-2",children:[N.roles.sessionAdminCount===0&&N.roles.stakeholderSessionCount===0&&a.jsxs("div",{className:"flex items-center text-sm text-gray-700",children:[a.jsx(Zr,{className:"h-4 w-4 mr-2 text-gray-400 flex-shrink-0"}),a.jsx("span",{children:N.created_at?lr(N.created_at):"N/A"}),a.jsxs("span",{className:"text-gray-500 text-xs ml-2",children:["by ",N.created_by_name||"System"]})]}),N.adminInSessions&&N.adminInSessions.length>0&&a.jsx("div",{className:"space-y-3",children:(()=>{const Ce=q(N.adminInSessions)||N.adminInSessions[0];N.adminInSessions.length>1;const Ue=(P==null?void 0:P.userId)===N.id&&(P==null?void 0:P.role)==="admin";return a.jsxs(a.Fragment,{children:[Ce&&a.jsxs("div",{className:"ml-5 space-y-1",children:[a.jsxs("div",{className:"flex items-center text-xs text-gray-700 whitespace-nowrap",children:[a.jsx(Zr,{className:"h-3 w-3 mr-1.5 text-gray-400 flex-shrink-0"}),a.jsx("span",{children:Ce.assignedAt?lr(Ce.assignedAt):"N/A"})]}),a.jsxs("div",{className:"text-xs text-gray-500 ml-5",children:["by ",Ce.assignedByName||"System"]})]}),Ue&&a.jsx("div",{className:"ml-5 mt-2 space-y-3",children:N.adminInSessions.filter(ke=>ke.id!==(Ce==null?void 0:Ce.id)).map(ke=>a.jsxs("div",{className:"space-y-1",children:[a.jsxs("div",{className:"flex items-center text-xs text-gray-700 whitespace-nowrap",children:[a.jsx(Zr,{className:"h-3 w-3 mr-1.5 text-gray-400 flex-shrink-0"}),a.jsx("span",{children:ke.assignedAt?lr(ke.assignedAt):"N/A"})]}),a.jsxs("div",{className:"text-xs text-gray-500 ml-5",children:["by ",ke.assignedByName||"System"]})]},ke.id))})]})})()}),N.stakeholderInSessions&&N.stakeholderInSessions.length>0&&a.jsx("div",{className:N.adminInSessions&&N.adminInSessions.length>0?"pt-4 border-t border-gray-100 mt-4":"",children:a.jsx("div",{className:"space-y-3",children:(()=>{const Ce=q(N.stakeholderInSessions)||N.stakeholderInSessions[0];N.stakeholderInSessions.length>1;const Ue=(P==null?void 0:P.userId)===N.id&&(P==null?void 0:P.role)==="stakeholder";return a.jsxs(a.Fragment,{children:[Ce&&a.jsxs("div",{className:"ml-5 space-y-1",children:[a.jsxs("div",{className:"flex items-center text-xs text-gray-700 whitespace-nowrap",children:[a.jsx(Zr,{className:"h-3 w-3 mr-1.5 text-gray-400 flex-shrink-0"}),a.jsx("span",{children:Ce.assignedAt?lr(Ce.assignedAt):"N/A"})]}),a.jsxs("div",{className:"text-xs text-gray-500 ml-5",children:["by ",Ce.assignedByName||"System"]})]}),Ue&&a.jsx("div",{className:"ml-5 mt-2 space-y-3",children:N.stakeholderInSessions.filter(ke=>ke.id!==(Ce==null?void 0:Ce.id)).map(ke=>a.jsxs("div",{className:"space-y-1",children:[a.jsxs("div",{className:"flex items-center text-xs text-gray-700 whitespace-nowrap",children:[a.jsx(Zr,{className:"h-3 w-3 mr-1.5 text-gray-400 flex-shrink-0"}),a.jsx("span",{children:ke.assignedAt?lr(ke.assignedAt):"N/A"})]}),a.jsxs("div",{className:"text-xs text-gray-500 ml-5",children:["by ",ke.assignedByName||"System"]})]},ke.id))})]})})()})})]})]})]})]},N.id)})}),a.jsxs("div",{className:"hidden md:block relative z-10 bg-white rounded-lg shadow-md overflow-visible",children:[a.jsxs("table",{className:"min-w-full divide-y divide-gray-200 rounded-t-lg",children:[a.jsx("thead",{className:"bg-gray-50",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"User"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Role"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Sessions"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider w-48",children:"Created"}),a.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),a.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:d.length===0?a.jsx("tr",{children:a.jsx("td",{colSpan:5,className:"px-6 py-8 text-center text-gray-500",children:y||w!=="all"?"No users found matching your filters.":"No users found."})}):d.map(N=>{var J,Ee,Pe,Ce;return a.jsxs("tr",{className:"hover:bg-gray-50 relative",onMouseEnter:()=>T(N.id),onMouseLeave:()=>T(null),children:[a.jsx("td",{className:"px-6 py-4 whitespace-nowrap align-top",children:a.jsxs("div",{children:[a.jsxs("div",{className:"text-sm font-medium text-gray-900",children:[N.name,N.id===(e==null?void 0:e.id)&&a.jsx("span",{className:"ml-2 text-xs text-[#c59f2d] font-semibold",children:"(You)"}),de(N)&&a.jsxs("span",{className:"ml-2 text-xs text-[#c59f2d] font-semibold",children:["(",de(N),")"]}),ue(N)&&a.jsxs("span",{className:"ml-2 px-2 py-0.5 bg-red-100 text-red-700 text-xs font-medium rounded",children:["Duplicate (",Me(N),")"]})]}),a.jsx("div",{className:"text-sm text-gray-500",children:N.email})]})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap align-top",children:No(N)}),a.jsx("td",{className:"px-6 py-4 text-sm text-gray-500 align-top relative overflow-visible",children:a.jsxs("div",{className:"space-y-2",children:[N.roles.sessionAdminCount===0&&N.roles.stakeholderSessionCount===0&&a.jsx("span",{className:"text-gray-400",children:"None"}),N.adminInSessions&&N.adminInSessions.length>0&&a.jsxs("div",{children:[a.jsx("div",{className:"mb-2",children:(()=>{var er;const Ue=((er=N.adminInSessions)==null?void 0:er.length)||0,ke=Ue>1,at=(P==null?void 0:P.userId)===N.id&&(P==null?void 0:P.role)==="admin",rt=()=>a.jsxs("div",{className:"inline-flex items-center gap-1.5 px-2.5 py-1 rounded border text-xs font-medium group",style:{borderColor:"#576C71",color:"#576C71"},children:[a.jsx($S,{className:"h-3.5 w-3.5 flex-shrink-0",style:{fill:"#576C71",color:"#576C71"}}),a.jsxs("span",{children:["Session Admin in ",Ue," session",Ue!==1?"s":""]}),ke&&a.jsxs("span",{className:"inline-flex items-baseline gap-0.5",style:{color:"#576C71"},children:[at?a.jsx(Mu,{className:"h-2.5 w-2.5 transition-all group-hover:brightness-150 mt-[3px]",style:{color:"#576C71"}}):a.jsx(Mn,{className:"h-2.5 w-2.5 transition-all group-hover:brightness-150 mt-[3px]",style:{color:"#576C71"}}),a.jsx("span",{className:"text-[10px] transition-all group-hover:brightness-150",children:at?"Hide":"Show"})]})]});return ke?a.jsx("button",{onClick:kt=>{kt.stopPropagation(),F(at?null:{userId:N.id,role:"admin"})},className:"text-left",children:a.jsx(rt,{})}):a.jsx(rt,{})})()}),(()=>{const ke=q(N.adminInSessions)||N.adminInSessions[0],at=(P==null?void 0:P.userId)===N.id&&(P==null?void 0:P.role)==="admin";return a.jsxs(a.Fragment,{children:[ke&&a.jsxs("div",{className:"relative cursor-pointer",style:{marginLeft:"1.25rem",marginTop:"0.75rem"},onMouseEnter:()=>L(`${N.id}-${ke.id}`),onMouseLeave:()=>L(null),onClick:async rt=>{rt.stopPropagation(),await r(ke),s("/admin")},children:[H===`${N.id}-${ke.id}`&&a.jsx("div",{className:"absolute bg-blue-50 pointer-events-none z-0 rounded",style:{left:"-0.5rem",right:"-13rem",top:"-0.375rem",bottom:"-0.375rem",boxShadow:"0 0 0 1px rgb(191 219 254)",outline:"none"}}),a.jsxs("div",{className:"text-left text-sm text-gray-700 hover:text-gray-900 block relative z-10",style:{padding:0,margin:0,lineHeight:"1.25rem"},children:[a.jsx("div",{style:{height:"20px",lineHeight:"20px"},children:ke.title||"Unnamed Session"}),a.jsx("div",{className:"text-xs text-gray-500",style:{height:"16px",lineHeight:"16px",marginTop:"2px"},children:vn(ke)})]})]}),at&&a.jsx("div",{style:{marginTop:"0.5rem"},children:N.adminInSessions.filter(rt=>rt.id!==(ke==null?void 0:ke.id)).map((rt,er)=>a.jsxs("div",{className:"relative cursor-pointer",style:{marginTop:"0.75rem",marginLeft:"1.25rem"},onMouseEnter:()=>L(`${N.id}-${rt.id}`),onMouseLeave:()=>L(null),onClick:async kt=>{kt.stopPropagation(),await r(rt),s("/admin")},children:[H===`${N.id}-${rt.id}`&&a.jsx("div",{className:"absolute bg-blue-50 pointer-events-none z-0 rounded",style:{left:"-0.5rem",right:"-13rem",top:"-0.375rem",bottom:"-0.375rem",boxShadow:"0 0 0 1px rgb(191 219 254)",outline:"none"}}),a.jsxs("div",{className:"block text-sm text-left text-gray-700 hover:text-gray-900 relative z-10",style:{padding:0,margin:0,lineHeight:"1.25rem"},children:[a.jsx("div",{style:{height:"20px",lineHeight:"20px"},children:rt.title||"Unnamed Session"}),a.jsx("div",{className:"text-xs text-gray-500",style:{height:"16px",lineHeight:"16px",marginTop:"2px"},children:vn(rt)})]})]},rt.id))})]})})()]}),N.stakeholderInSessions&&N.stakeholderInSessions.length>0&&a.jsx("div",{className:N.adminInSessions&&N.adminInSessions.length>0?"pt-4 border-t border-gray-100 mt-4":"",children:a.jsxs("div",{children:[a.jsx("div",{className:"mb-2",children:(()=>{var er;const Ue=((er=N.stakeholderInSessions)==null?void 0:er.length)||0,ke=Ue>1,at=(P==null?void 0:P.userId)===N.id&&(P==null?void 0:P.role)==="stakeholder",rt=()=>a.jsxs("div",{className:"inline-flex items-center gap-1.5 px-2.5 py-1 rounded border text-xs font-medium group",style:{borderColor:"#8B5A4A",color:"#8B5A4A"},children:[a.jsx(ms,{className:"h-3.5 w-3.5 flex-shrink-0",style:{fill:"#8B5A4A",color:"#8B5A4A"}}),a.jsxs("span",{children:["Stakeholder in ",Ue," session",Ue!==1?"s":""]}),ke&&a.jsxs("span",{className:"inline-flex items-baseline gap-0.5",style:{color:"#8B5A4A"},children:[at?a.jsx(Mu,{className:"h-2.5 w-2.5 transition-all group-hover:brightness-150 mt-[3px]",style:{color:"#8B5A4A"}}):a.jsx(Mn,{className:"h-2.5 w-2.5 transition-all group-hover:brightness-150 mt-[3px]",style:{color:"#8B5A4A"}}),a.jsx("span",{className:"text-[10px] transition-all group-hover:brightness-150",children:at?"Hide":"Show"})]})]});return ke?a.jsx("button",{onClick:kt=>{kt.stopPropagation(),F(at?null:{userId:N.id,role:"stakeholder"})},className:"text-left",children:a.jsx(rt,{})}):a.jsx(rt,{})})()}),(()=>{const ke=q(N.stakeholderInSessions)||N.stakeholderInSessions[0],at=(P==null?void 0:P.userId)===N.id&&(P==null?void 0:P.role)==="stakeholder";return a.jsxs(a.Fragment,{children:[ke&&a.jsxs("div",{className:"relative cursor-pointer",style:{marginLeft:"1.25rem",marginTop:"0.75rem"},onMouseEnter:()=>L(`${N.id}-${ke.id}`),onMouseLeave:()=>L(null),onClick:async rt=>{rt.stopPropagation(),await r(ke),s("/admin")},children:[H===`${N.id}-${ke.id}`&&a.jsx("div",{className:"absolute bg-blue-50 pointer-events-none z-0 rounded",style:{left:"-0.5rem",right:"-13rem",top:"-0.25rem",bottom:"-0.25rem",boxShadow:"0 0 0 1px rgb(191 219 254)",outline:"none"}}),a.jsxs("div",{className:"text-left text-sm text-gray-700 hover:text-gray-900 hover:underline block relative z-10",style:{padding:0,margin:0,lineHeight:"1.25rem"},children:[a.jsx("div",{style:{height:"20px",lineHeight:"20px"},children:ke.title||"Unnamed Session"}),a.jsx("div",{className:"text-xs text-gray-500",style:{height:"16px",lineHeight:"16px",marginTop:"2px"},children:vn(ke)})]})]}),at&&a.jsx("div",{style:{marginTop:"0.5rem"},children:N.stakeholderInSessions.filter(rt=>rt.id!==(ke==null?void 0:ke.id)).map((rt,er)=>a.jsxs("div",{className:"relative cursor-pointer",style:{marginTop:"0.75rem",marginLeft:"1.25rem"},onMouseEnter:()=>L(`${N.id}-${rt.id}`),onMouseLeave:()=>L(null),onClick:async kt=>{kt.stopPropagation(),await r(rt),s("/admin")},children:[H===`${N.id}-${rt.id}`&&a.jsx("div",{className:"absolute bg-blue-50 pointer-events-none z-0 rounded",style:{left:"-0.5rem",right:"-13rem",top:"-0.25rem",bottom:"-0.25rem",boxShadow:"0 0 0 1px rgb(191 219 254)",outline:"none"}}),a.jsxs("div",{className:"block text-sm text-left text-gray-700 hover:text-gray-900 hover:underline relative z-10",style:{padding:0,margin:0,lineHeight:"1.25rem"},children:[a.jsx("div",{style:{height:"20px",lineHeight:"20px"},children:rt.title||"Unnamed Session"}),a.jsx("div",{className:"text-xs text-gray-500",style:{height:"16px",lineHeight:"16px",marginTop:"2px"},children:vn(rt)})]})]},rt.id))})]})})()]})})]})}),a.jsx("td",{className:"px-6 py-4 text-sm text-gray-500 align-top w-48 relative overflow-visible",children:a.jsxs("div",{className:"space-y-2",children:[N.roles.sessionAdminCount===0&&N.roles.stakeholderSessionCount===0&&a.jsxs("div",{className:"flex items-center text-gray-700 whitespace-nowrap",children:[a.jsx(Zr,{className:"h-4 w-4 mr-1.5 text-gray-400 flex-shrink-0"}),a.jsx("span",{children:N.created_at?lr(N.created_at):"N/A"}),a.jsxs("span",{className:"text-gray-500 text-xs ml-2",children:["by ",N.created_by_name||"System"]})]}),N.adminInSessions&&N.adminInSessions.length>0&&a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center text-gray-700 whitespace-nowrap",style:{marginBottom:"0.5rem",height:"30px"},children:[a.jsx(Zr,{className:"h-4 w-4 mr-1.5 text-gray-400 flex-shrink-0"}),a.jsx("span",{children:N.created_at?lr(N.created_at):"N/A"}),a.jsxs("span",{className:"text-gray-500 text-xs ml-2",children:["by ",N.created_by_name||"System"]})]}),(()=>{const ke=q(N.adminInSessions)||N.adminInSessions[0];N.adminInSessions.length>1;const at=(P==null?void 0:P.userId)===N.id&&(P==null?void 0:P.role)==="admin";return a.jsxs(a.Fragment,{children:[ke&&a.jsx("div",{className:"relative cursor-pointer",style:{marginLeft:"1.25rem",marginTop:"0.5rem",marginBottom:"0.25rem"},onMouseEnter:()=>L(`${N.id}-${ke.id}`),onMouseLeave:()=>L(null),onClick:async rt=>{rt.stopPropagation(),await r(ke),s("/admin")},children:a.jsxs("div",{className:"relative z-10",style:{padding:0,margin:0,lineHeight:"1.25rem"},children:[a.jsxs("div",{className:"flex items-center",style:{height:"20px",lineHeight:"20px"},children:[a.jsx(Zr,{className:"h-3 w-3 mr-1.5 text-gray-400 flex-shrink-0"}),a.jsx("span",{className:"text-xs text-gray-700 whitespace-nowrap",children:ke.assignedAt?lr(ke.assignedAt):"N/A"})]}),a.jsxs("div",{className:"text-xs text-gray-500",style:{height:"16px",lineHeight:"16px",marginTop:"2px",marginLeft:"18px"},children:["by ",ke.assignedByName||"System"]})]})}),at&&a.jsx("div",{style:{marginTop:"0.5rem"},children:N.adminInSessions.filter(rt=>rt.id!==(ke==null?void 0:ke.id)).map((rt,er)=>a.jsx("div",{className:"relative cursor-pointer",style:{marginTop:"0.75rem",marginLeft:"1.25rem",marginBottom:"0.25rem"},onMouseEnter:()=>L(`${N.id}-${rt.id}`),onMouseLeave:()=>L(null),onClick:async kt=>{kt.stopPropagation(),await r(rt),s("/admin")},children:a.jsxs("div",{className:"relative z-10",style:{padding:0,margin:0,lineHeight:"1.25rem"},children:[a.jsxs("div",{className:"flex items-center",style:{height:"20px",lineHeight:"20px"},children:[a.jsx(Zr,{className:"h-3 w-3 mr-1.5 text-gray-400 flex-shrink-0"}),a.jsx("span",{className:"text-xs text-gray-700 whitespace-nowrap",children:rt.assignedAt?lr(rt.assignedAt):"N/A"})]}),a.jsxs("div",{className:"text-xs text-gray-500",style:{height:"16px",lineHeight:"16px",marginTop:"2px",marginLeft:"18px"},children:["by ",rt.assignedByName||"System"]})]})},rt.id))})]})})()]}),N.stakeholderInSessions&&N.stakeholderInSessions.length>0&&a.jsx("div",{className:N.adminInSessions&&N.adminInSessions.length>0?"pt-4 border-t border-gray-100 mt-4":"",children:a.jsxs("div",{children:[(!N.adminInSessions||N.adminInSessions.length===0)&&a.jsxs("div",{className:"flex items-center text-gray-700 whitespace-nowrap",style:{marginBottom:"0.5rem",height:"30px"},children:[a.jsx(Zr,{className:"h-4 w-4 mr-1.5 text-gray-400 flex-shrink-0"}),a.jsx("span",{children:N.created_at?lr(N.created_at):"N/A"}),a.jsxs("span",{className:"text-gray-500 text-xs ml-2",children:["by ",N.created_by_name||"System"]})]}),N.adminInSessions&&N.adminInSessions.length>0&&a.jsx("div",{style:{height:"26px",marginBottom:"0.5rem",visibility:"hidden"},children:a.jsxs("div",{className:"inline-flex items-center gap-1.5 px-2.5 py-1 rounded border text-xs font-medium",children:[a.jsx(ms,{className:"h-3.5 w-3.5"}),a.jsx("span",{children:"Stakeholder"})]})}),(()=>{const ke=q(N.stakeholderInSessions)||N.stakeholderInSessions[0];N.stakeholderInSessions.length>1;const at=(P==null?void 0:P.userId)===N.id&&(P==null?void 0:P.role)==="stakeholder";return a.jsxs(a.Fragment,{children:[ke&&a.jsx("div",{className:"relative cursor-pointer",style:{marginLeft:"1.25rem",marginTop:"0.5rem",marginBottom:"0.25rem"},onMouseEnter:()=>L(`${N.id}-${ke.id}`),onMouseLeave:()=>L(null),onClick:async rt=>{rt.stopPropagation(),await r(ke),s("/admin")},children:a.jsxs("div",{className:"relative z-10",style:{padding:0,margin:0,lineHeight:"1.25rem"},children:[a.jsxs("div",{className:"flex items-center",style:{height:"20px",lineHeight:"20px"},children:[a.jsx(Zr,{className:"h-3 w-3 mr-1.5 text-gray-400 flex-shrink-0"}),a.jsx("span",{className:"text-xs text-gray-700 whitespace-nowrap",children:ke.assignedAt?lr(ke.assignedAt):"N/A"})]}),a.jsxs("div",{className:"text-xs text-gray-500",style:{height:"16px",lineHeight:"16px",marginTop:"2px",marginLeft:"18px"},children:["by ",ke.assignedByName||"System"]})]})}),at&&a.jsx("div",{style:{marginTop:"0.5rem"},children:N.stakeholderInSessions.filter(rt=>rt.id!==(ke==null?void 0:ke.id)).map((rt,er)=>a.jsx("div",{className:"relative cursor-pointer",style:{marginTop:"0.75rem",marginLeft:"1.25rem",marginBottom:"0.25rem"},onMouseEnter:()=>L(`${N.id}-${rt.id}`),onMouseLeave:()=>L(null),onClick:async kt=>{kt.stopPropagation(),await r(rt),s("/admin")},children:a.jsxs("div",{className:"relative z-10",style:{padding:0,margin:0,lineHeight:"1.25rem"},children:[a.jsxs("div",{className:"flex items-center",style:{height:"20px",lineHeight:"20px"},children:[a.jsx(Zr,{className:"h-3 w-3 mr-1.5 text-gray-400 flex-shrink-0"}),a.jsx("span",{className:"text-xs text-gray-700 whitespace-nowrap",children:rt.assignedAt?lr(rt.assignedAt):"N/A"})]}),a.jsxs("div",{className:"text-xs text-gray-500",style:{height:"16px",lineHeight:"16px",marginTop:"2px"},children:["by ",rt.assignedByName||"System"]})]})},rt.id))})]})})()]})})]})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium align-top",children:a.jsx("div",{className:"flex items-center justify-end gap-2",children:a.jsxs("div",{className:`relative inline-block transition-all md:transition-opacity ${O===N.id?N.id===(e==null?void 0:e.id)?"opacity-50 visible":"opacity-100 visible":"md:opacity-0 md:invisible opacity-100 visible"}`,ref:Ue=>{ne.current[N.id]=Ue},children:[a.jsx("button",{onClick:()=>C(E===N.id?null:N.id),className:"p-2 rounded-md hover:bg-gray-100 transition-colors",disabled:N.id===(e==null?void 0:e.id),title:N.id===(e==null?void 0:e.id)?"Cannot modify your own permissions":"Change user role",children:a.jsx(DS,{className:"h-5 w-5 text-gray-600"})}),E===N.id&&N.id!==(e==null?void 0:e.id)&&a.jsx("div",{className:"fixed mt-1 w-64 bg-white border border-gray-200 rounded-lg shadow-lg z-[100]",style:{top:((J=ne.current[N.id])==null?void 0:J.getBoundingClientRect().bottom)??0,right:window.innerWidth-(((Ee=ne.current[N.id])==null?void 0:Ee.getBoundingClientRect().right)??0)},children:a.jsxs("div",{className:"py-1",children:[a.jsx("div",{className:"px-3 py-2 text-xs font-semibold text-gray-500 uppercase border-b border-gray-200",children:"Change User Role"}),M==="system-admin"&&a.jsxs(a.Fragment,{children:[N.roles.isSystemAdmin?a.jsxs("button",{onClick:()=>wt(N.id,!0),className:"w-full px-4 py-2 text-left flex items-center hover:bg-red-50 text-red-700",children:[a.jsx(As,{className:"h-4 w-4 mr-3"}),a.jsxs("div",{children:[a.jsx("div",{className:"font-medium",children:"Remove System Admin"}),a.jsx("div",{className:"text-xs text-gray-500",children:"Revoke global admin access"})]})]}):a.jsxs("button",{onClick:()=>wt(N.id,!1),className:"w-full px-4 py-2 text-left flex items-center hover:bg-[#C89212]/10 text-[#C89212]",children:[a.jsx(As,{className:"h-4 w-4 mr-3"}),a.jsxs("div",{children:[a.jsx("div",{className:"font-medium",children:"Make System Admin"}),a.jsx("div",{className:"text-xs text-gray-500",children:"Grant global admin access"})]})]}),wl(N,"session-admin")&&a.jsxs("button",{onClick:()=>ct(N,"session-admin"),className:"w-full px-4 py-2 text-left flex items-center hover:bg-[#576C71]/10 text-[#576C71] border-t border-gray-200",children:[a.jsx(Fn,{className:"h-4 w-4 mr-3"}),a.jsxs("div",{children:[a.jsx("div",{className:"font-medium",children:"Make Session Admin"}),a.jsx("div",{className:"text-xs text-gray-500",children:"Add to a session as admin"})]})]})]}),wl(N,"stakeholder")&&a.jsxs("button",{onClick:()=>ct(N,"stakeholder"),className:"w-full px-4 py-2 text-left flex items-center hover:bg-[#8B5A4A]/10 text-[#8B5A4A] border-t border-gray-200",children:[a.jsx(ms,{className:"h-4 w-4 mr-3"}),a.jsxs("div",{children:[a.jsx("div",{className:"font-medium",children:"Make Stakeholder"}),a.jsx("div",{className:"text-xs text-gray-500",children:"Add to a session as stakeholder"})]})]}),M==="session-admin"&&N.stakeholderInSessions&&N.stakeholderInSessions.length>0&&N.stakeholderInSessions.some(Ue=>me.includes(Ue.id))&&a.jsxs("button",{onClick:()=>ct(N,"remove-stakeholder"),className:"w-full px-4 py-2 text-left flex items-center hover:bg-red-50 text-red-700 border-t border-gray-200",children:[a.jsx(Su,{className:"h-4 w-4 mr-3"}),a.jsxs("div",{children:[a.jsx("div",{className:"font-medium",children:"Remove Stakeholder"}),a.jsx("div",{className:"text-xs text-gray-500",children:"Remove from a session you manage"})]})]}),(N.roles.isSystemAdmin||N.roles.sessionAdminCount>0||N.roles.stakeholderSessionCount>0)&&a.jsxs("button",{onClick:()=>ze(N.id,N.name),className:"w-full px-4 py-2 text-left flex items-center hover:bg-gray-50 text-gray-700 border-t border-gray-200",children:[a.jsx(Su,{className:"h-4 w-4 mr-3"}),a.jsxs("div",{children:[a.jsx("div",{className:"font-medium",children:"Remove All Roles"}),a.jsx("div",{className:"text-xs text-gray-500",children:"Remove from all sessions"})]})]}),(M==="system-admin"||M==="session-admin"&&N.roles.stakeholderSessionCount>0&&((Pe=N.stakeholderInSessions)==null?void 0:Pe.some(Ue=>G.some(ke=>ke.id===Ue.id)))&&!z.has(N.email))&&a.jsx("div",{className:"px-3 py-2 text-xs font-semibold text-gray-500 uppercase border-t border-gray-200",children:"User Functions"}),M==="system-admin"&&a.jsxs("button",{onClick:()=>{Lt(N),dr(N.name),yr(N.email),At(!0),C(null)},className:"w-full px-4 py-2 text-left flex items-center hover:bg-[#1E5461]/10 text-[#1E5461] border-t border-gray-200",children:[a.jsx(Wu,{className:"h-4 w-4 mr-3"}),a.jsxs("div",{children:[a.jsx("div",{className:"font-medium",children:"Edit User Profile"}),a.jsx("div",{className:"text-xs text-gray-500",children:"Update name and email"})]})]}),(M==="system-admin"||M==="session-admin"&&N.roles.stakeholderSessionCount>0&&((Ce=N.stakeholderInSessions)==null?void 0:Ce.some(Ue=>G.some(ke=>ke.id===Ue.id))))&&!z.has(N.email)&&a.jsxs("button",{onClick:()=>{C(null),qt(N.id,N.name)},className:`w-full px-4 py-2 text-left flex items-center hover:bg-[#8B5A4A]/10 text-[#8B5A4A] border-t border-gray-200 ${N.id===(e==null?void 0:e.id)||M==="system-admin"&&hr.has(N.id)?"opacity-50 cursor-not-allowed":""}`,disabled:N.id===(e==null?void 0:e.id)||M==="system-admin"&&hr.has(N.id),children:[a.jsx(Li,{className:"h-4 w-4 mr-3"}),a.jsxs("div",{children:[a.jsx("div",{className:"font-medium",children:M==="session-admin"?"Remove Stakeholder":"Delete User"}),a.jsx("div",{className:"text-xs text-gray-500",children:M==="session-admin"?"Remove from all your sessions":N.id===(e==null?void 0:e.id)?"Cannot delete your own account":hr.has(N.id)?`Cannot delete protected account${de(N)?` (${de(N)})`:""}`:"Permanently delete this user"})]})]})]})})]})})})]},N.id)})})]}),a.jsx("div",{className:"bg-gray-50 px-6 py-4 border-t border-gray-200",children:a.jsxs("div",{className:"flex flex-wrap gap-4 text-sm",children:[a.jsxs("div",{className:"flex items-center",children:[a.jsx(Xn,{className:"h-4 w-4 mr-2 text-gray-500"}),a.jsxs("span",{className:"text-gray-600",children:["Total Users: ",a.jsx("strong",{children:l.length})]})]}),a.jsxs("div",{className:"flex items-center",children:[a.jsx(As,{className:"h-4 w-4 mr-2 text-[#C89212]"}),a.jsxs("span",{className:"text-gray-600",children:["System Admins: ",a.jsx("strong",{children:l.filter(N=>N.roles.isSystemAdmin).length})]})]}),a.jsxs("div",{className:"flex items-center",children:[a.jsx(Fn,{className:"h-4 w-4 mr-2 text-[#576C71]"}),a.jsxs("span",{className:"text-gray-600",children:["Session Admins: ",a.jsx("strong",{children:l.filter(N=>N.roles.sessionAdminCount>0).length})]})]}),a.jsxs("div",{className:"flex items-center",children:[a.jsx(ms,{className:"h-4 w-4 mr-2 text-[#8B5A4A]"}),a.jsxs("span",{className:"text-gray-600",children:["Stakeholders: ",a.jsx("strong",{children:l.filter(N=>N.roles.stakeholderSessionCount>0).length})]})]})]})})]}),a.jsx("div",{className:"md:hidden mt-4 bg-white rounded-lg shadow-md p-4",children:a.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[a.jsxs("div",{className:"flex items-center",children:[a.jsx(Xn,{className:"h-5 w-5 mr-2 text-gray-500 flex-shrink-0"}),a.jsxs("div",{children:[a.jsx("div",{className:"text-xs text-gray-500",children:"Total"}),a.jsx("div",{className:"text-lg font-bold text-gray-900",children:l.length})]})]}),a.jsxs("div",{className:"flex items-center",children:[a.jsx(As,{className:"h-5 w-5 mr-2 text-[#C89212] flex-shrink-0"}),a.jsxs("div",{children:[a.jsx("div",{className:"text-xs text-gray-500",children:"Sys Admins"}),a.jsx("div",{className:"text-lg font-bold text-gray-900",children:l.filter(N=>N.roles.isSystemAdmin).length})]})]}),a.jsxs("div",{className:"flex items-center",children:[a.jsx(Fn,{className:"h-5 w-5 mr-2 text-[#576C71] flex-shrink-0"}),a.jsxs("div",{children:[a.jsx("div",{className:"text-xs text-gray-500",children:"Session Admins"}),a.jsx("div",{className:"text-lg font-bold text-gray-900",children:l.filter(N=>N.roles.sessionAdminCount>0).length})]})]}),a.jsxs("div",{className:"flex items-center",children:[a.jsx(ms,{className:"h-5 w-5 mr-2 text-[#8B5A4A] flex-shrink-0"}),a.jsxs("div",{children:[a.jsx("div",{className:"text-xs text-gray-500",children:"Stakeholders"}),a.jsx("div",{className:"text-lg font-bold text-gray-900",children:l.filter(N=>N.roles.stakeholderSessionCount>0).length})]})]})]})}),(V||ee)&&a.jsx("div",{className:"mt-8 flex justify-center",children:a.jsxs("div",{className:"inline-flex items-center bg-gray-100 rounded-lg p-1",children:[a.jsxs("button",{onClick:()=>{(ee||V)&&We("session-admin")},className:`px-4 py-2 rounded-md text-sm font-medium transition-colors flex items-center ${M==="session-admin"?"bg-white text-[#2d4660] shadow-sm":"text-gray-600 hover:text-gray-900"}`,title:"Session Admin View",children:[a.jsx(Fn,{className:"h-4 w-4 inline mr-2"}),"Session Admin"]}),a.jsxs("button",{onClick:()=>{V&&We("system-admin")},className:`px-4 py-2 rounded-md text-sm font-medium transition-colors flex items-center ${M==="system-admin"?"bg-white text-[#2d4660] shadow-sm":"text-gray-600 hover:text-gray-900"}`,disabled:!V,title:V?"System Admin View":"Only available for System Admins",children:[a.jsx(As,{className:"h-4 w-4 inline mr-2"}),"System Admin"]})]})})]}),a.jsx("footer",{className:"mt-12 bg-gray-50 border-t border-gray-200",children:a.jsxs("div",{className:"container mx-auto px-4 py-6 max-w-6xl",children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 text-sm text-gray-600",children:[a.jsxs("div",{children:[a.jsx("h3",{className:"font-semibold text-gray-900 mb-2",children:"New Millennium Building Systems"}),a.jsxs("p",{className:"text-xs leading-relaxed",children:["A Steel Dynamics Company",a.jsx("br",{}),"Innovation in structural steel manufacturing"]})]}),a.jsxs("div",{children:[a.jsx("h3",{className:"font-semibold text-gray-900 mb-2",children:"Quick Links"}),a.jsxs("ul",{className:"space-y-1 text-xs",children:[a.jsx("li",{children:a.jsx("a",{href:"https://www.steeldynamics.com",target:"_blank",rel:"noopener noreferrer",className:"hover:text-[#2d4660] transition-colors",children:"Steel Dynamics Inc."})}),a.jsx("li",{children:a.jsx("a",{href:"https://www.newmill.com",target:"_blank",rel:"noopener noreferrer",className:"hover:text-[#2d4660] transition-colors",children:"New Millennium"})})]})]}),a.jsxs("div",{children:[a.jsx("h3",{className:"font-semibold text-gray-900 mb-2",children:"Need Help?"}),a.jsx("p",{className:"text-xs",children:"Contact your Product Owner or IT administrator for assistance with user management."})]})]}),a.jsx("div",{className:"mt-6 pt-6 border-t border-gray-200 text-center text-xs text-gray-500",children:a.jsx("p",{children:" 2025 New Millennium Building Systems, LLC. All rights reserved."})})]})}),he&&Re&&le&&a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4 overflow-y-auto",onClick:It,children:a.jsx("div",{className:"bg-white rounded-lg shadow-xl max-w-xl w-full my-8",onClick:N=>N.stopPropagation(),children:a.jsxs("div",{className:"p-6 overflow-visible",children:[a.jsxs("div",{className:"flex items-start justify-between mb-2",children:[a.jsxs("div",{className:"flex-1",children:[a.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-2",children:le==="session-admin"?"Add Session Admin":le==="remove-stakeholder"?"Remove Stakeholder":"Add Stakeholder"}),a.jsx("p",{className:"text-sm text-gray-600",children:le==="remove-stakeholder"?a.jsxs(a.Fragment,{children:["Select sessions to remove ",a.jsx("strong",{children:Re.name})," as a stakeholder."]}):a.jsxs(a.Fragment,{children:["Select sessions to add ",a.jsx("strong",{children:Re.name})," as ",le==="session-admin"?"an admin":"a stakeholder","."]})})]}),a.jsx("button",{onClick:It,className:"ml-4 p-1 rounded-md text-gray-400 hover:text-gray-600 hover:bg-gray-100 transition-colors flex-shrink-0","aria-label":"Close modal",children:a.jsx(Js,{className:"h-5 w-5"})})]}),a.jsx("div",{className:"mb-6",children:a.jsx($Z,{products:ir,sessions:Gc(le),selectedProductId:_t,onProductChange:N=>{Mt(N),Y([]),Qt(!0)},useAllSessions:Dt,onToggleAllSessions:N=>{Qt(N),N&&Y([])},selectedSessionIds:R,onSessionToggle:N=>{R.includes(N)?Y(R.filter(J=>J!==N)):Y([...R,N])},getSessionStatus:ds,formatSessionDateRange:vn,filterSessions:ft})}),a.jsx("div",{className:"flex justify-end mt-6",children:a.jsx("button",{onClick:Ot,disabled:!_t||!Dt&&R.length===0,className:`px-6 py-2.5 rounded-lg transition-colors ${_t&&(Dt||R.length>0)?le==="remove-stakeholder"?"bg-red-600 text-white hover:bg-red-700":"bg-[#4f6d8e] text-white hover:bg-[#3d5670]":"bg-gray-300 text-gray-500 cursor-not-allowed"}`,children:(()=>{const J=(Dt?ft(Gc(le),_t||"").length:R.length)>1;return le==="remove-stakeholder"?`Remove from Session${J?"s":""}`:le==="session-admin"?`Add to Session${J?"s":""} as Session Admin`:`Add to Session${J?"s":""} as a Stakeholder`})()})})]})})}),ce&&pe&&a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:a.jsx("div",{className:"bg-white rounded-lg shadow-xl max-w-xl w-full max-h-[90vh] overflow-y-auto",children:a.jsxs("div",{className:"p-6",children:[a.jsxs("div",{className:"flex items-start mb-4",children:[a.jsx("div",{className:"flex-shrink-0 w-12 h-12 rounded-full bg-red-100 flex items-center justify-center",children:a.jsx(Su,{className:"h-6 w-6 text-red-600"})}),a.jsxs("div",{className:"ml-4 flex-1",children:[a.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-1",children:"Delete User Account"}),a.jsx("p",{className:"text-sm text-gray-600",children:"This action cannot be undone. Please review the details below."})]})]}),a.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 mb-4",children:[a.jsxs("div",{className:"flex items-center mb-3",children:[a.jsx(ms,{className:"h-5 w-5 text-gray-400 mr-2"}),a.jsxs("div",{children:[a.jsx("div",{className:"font-medium text-gray-900",children:pe.name}),a.jsx("div",{className:"text-sm text-gray-500",children:pe.email})]})]}),a.jsxs("div",{className:"space-y-2 border-t border-gray-200 pt-3",children:[a.jsx("div",{className:"text-xs font-semibold text-gray-500 uppercase",children:"Current Roles"}),pe.roles.isSystemAdmin&&a.jsxs("div",{className:"flex items-center text-sm",children:[a.jsx(As,{className:"h-4 w-4 mr-2 text-[#C89212]"}),a.jsx("span",{className:"text-gray-700",children:"System Admin"})]}),pe.roles.sessionAdminCount>0&&a.jsxs("div",{className:"flex items-center text-sm",children:[a.jsx(Fn,{className:"h-4 w-4 mr-2 text-[#576C71]"}),a.jsxs("span",{className:"text-gray-700",children:["Session Admin in ",pe.roles.sessionAdminCount," session",pe.roles.sessionAdminCount!==1?"s":""]})]}),pe.roles.stakeholderSessionCount>0&&a.jsxs("div",{className:"flex items-center text-sm",children:[a.jsx(ms,{className:"h-4 w-4 mr-2 text-[#8B5A4A]"}),a.jsxs("span",{className:"text-gray-700",children:["Stakeholder in ",pe.roles.stakeholderSessionCount," session",pe.roles.stakeholderSessionCount!==1?"s":""]})]}),!pe.roles.isSystemAdmin&&pe.roles.sessionAdminCount===0&&pe.roles.stakeholderSessionCount===0&&a.jsx("div",{className:"text-sm text-gray-500",children:"No roles assigned"})]})]}),pe.adminInSessions&&pe.adminInSessions.length>0||pe.stakeholderInSessions&&pe.stakeholderInSessions.length>0?a.jsxs("div",{className:"mb-4",children:[a.jsx("div",{className:"text-sm font-semibold text-gray-700 mb-2",children:"User will be removed from these sessions:"}),a.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-3 max-h-48 overflow-y-auto",children:[pe.adminInSessions&&pe.adminInSessions.length>0&&a.jsxs("div",{className:"mb-3",children:[a.jsxs("div",{className:"text-xs font-semibold text-gray-600 mb-1.5 flex items-center",children:[a.jsx(Fn,{className:"h-3.5 w-3.5 mr-1.5 text-[#576C71]"}),"Admin Sessions (",pe.adminInSessions.length,")"]}),a.jsx("div",{className:"space-y-1 ml-5",children:pe.adminInSessions.map(N=>a.jsxs("div",{className:"text-sm text-gray-700",children:[" ",N.title||"Unnamed Session"]},N.id))})]}),pe.stakeholderInSessions&&pe.stakeholderInSessions.length>0&&a.jsxs("div",{children:[a.jsxs("div",{className:"text-xs font-semibold text-gray-600 mb-1.5 flex items-center",children:[a.jsx(ms,{className:"h-3.5 w-3.5 mr-1.5 text-[#8B5A4A]"}),"Stakeholder Sessions (",pe.stakeholderInSessions.length,")"]}),a.jsx("div",{className:"space-y-1 ml-5",children:pe.stakeholderInSessions.map(N=>a.jsxs("div",{className:"text-sm text-gray-700",children:[" ",N.title||"Unnamed Session"]},N.id))})]})]})]}):null,a.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-3 mb-4",children:a.jsxs("div",{className:"flex",children:[a.jsx("div",{className:"flex-shrink-0",children:a.jsx("svg",{className:"h-5 w-5 text-yellow-600",fill:"currentColor",viewBox:"0 0 20 20",children:a.jsx("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})})}),a.jsxs("div",{className:"ml-3",children:[a.jsx("h3",{className:"text-sm font-medium text-yellow-800",children:"Warning: This action is permanent"}),a.jsx("div",{className:"mt-1 text-sm text-yellow-700",children:a.jsxs("ul",{className:"list-disc pl-5 space-y-1",children:[a.jsx("li",{children:"User account will be permanently deleted"}),a.jsx("li",{children:"All authentication access will be revoked"}),a.jsx("li",{children:"User will be removed from all sessions"}),a.jsx("li",{children:"This action cannot be undone"})]})})]})]})}),a.jsxs("div",{className:"flex gap-3",children:[a.jsx("button",{onClick:D,disabled:qe,className:"flex-1 px-4 py-2.5 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:"Cancel"}),a.jsx("button",{onClick:Rt,disabled:qe,className:"flex-1 px-4 py-2.5 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center",children:qe?a.jsxs(a.Fragment,{children:[a.jsxs("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",fill:"none",viewBox:"0 0 24 24",children:[a.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),a.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Deleting..."]}):"Delete User Permanently"})]})]})})}),zt&&a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4 overflow-y-auto",onClick:Qe,children:a.jsx("div",{className:"bg-white rounded-lg shadow-xl max-w-3xl w-full my-8 max-h-[90vh] overflow-y-auto",onClick:N=>N.stopPropagation(),children:a.jsxs("div",{className:"p-6",children:[a.jsxs("div",{className:"flex items-start mb-6",children:[a.jsx("div",{className:"flex-shrink-0 w-12 h-12 rounded-full bg-[#8B5A4A]/10 flex items-center justify-center",children:a.jsx(Xn,{className:"h-6 w-6 text-[#8B5A4A]"})}),a.jsxs("div",{className:"ml-4 flex-1",children:[a.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-1",children:M==="session-admin"?"Add New Stakeholder":"Add New User"}),a.jsx("p",{className:"text-sm text-gray-600",children:M==="session-admin"?"Create a new user account and add as stakeholder to your sessions":"Create a new user account and assign roles"})]}),a.jsx("button",{onClick:Qe,disabled:ar,className:"flex-shrink-0 ml-4 p-1 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed","aria-label":"Close modal",children:a.jsx(Js,{className:"h-5 w-5"})})]}),a.jsxs("div",{className:"space-y-4",children:[mr?a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Search Company Users (Optional)"}),ws===!1?a.jsx("div",{className:"border border-gray-300 rounded-lg p-4 bg-blue-50",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex-1",children:[a.jsx("p",{className:"text-sm font-medium text-gray-900 mb-1",children:"Sign in with Microsoft to search company users"}),a.jsx("p",{className:"text-xs text-gray-600",children:"You need to sign in with your Microsoft account to use the company user search feature."})]}),a.jsxs("button",{type:"button",onClick:tt,className:"ml-4 flex items-center px-4 py-2 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors shadow-sm",children:[a.jsx("img",{src:"/microsoft.svg",alt:"Microsoft",style:{width:"21px",height:"21px",marginRight:"8px"}}),a.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Sign in"})]})]})}):a.jsx(a.Fragment,{children:a.jsxs("div",{className:"relative",ref:ie,children:[a.jsx("div",{className:"flex gap-2",children:a.jsxs("div",{className:"flex-1 relative",children:[a.jsx(RS,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),a.jsx("input",{type:"text",value:Ut.searchTerm,onChange:N=>{const J=N.target.value;Kt(Ee=>({...Ee,searchTerm:J})),Bt(J)},onFocus:()=>{Ut.results.length>0&&Kt(N=>({...N,showResults:!0}))},className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#2D4660] focus:border-transparent",placeholder:"Search by name or email (min 2 characters)..."}),Ut.isSearching&&a.jsx("div",{className:"absolute right-3 top-1/2 transform -translate-y-1/2",children:a.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-[#2D4660]"})})]})}),Ut.showResults&&Ut.results.length>0&&a.jsx("div",{className:"absolute z-10 w-full mt-1 bg-white border border-gray-300 rounded-lg shadow-lg max-h-60 overflow-y-auto",children:Ut.results.map(N=>a.jsxs("button",{type:"button",onClick:()=>Yt(N),className:"w-full px-4 py-3 text-left hover:bg-gray-50 border-b border-gray-100 last:border-b-0 transition-colors",children:[a.jsx("div",{className:"font-medium text-gray-900",children:N.displayName}),a.jsx("div",{className:"text-sm text-gray-500",children:N.mail||N.userPrincipalName}),N.jobTitle&&a.jsx("div",{className:"text-xs text-gray-400 mt-0.5",children:N.jobTitle})]},N.id))}),Ut.error&&a.jsxs("div",{className:"absolute z-10 w-full mt-1 bg-red-50 border border-red-200 rounded-lg shadow-lg p-4 text-sm text-red-700",children:[a.jsx("div",{className:"font-medium mb-1",children:"Search Error"}),a.jsx("div",{className:"mb-2",children:Ut.error}),Ut.error.includes("User.ReadBasic.All")&&a.jsxs("div",{className:"mt-2 p-2 bg-red-100 rounded text-xs text-red-800",children:[a.jsx("div",{className:"font-medium mb-1",children:"To fix this:"}),a.jsxs("ol",{className:"list-decimal list-inside space-y-1 ml-2",children:[a.jsx("li",{children:"Go to Azure Portal  App registrations  Your app"}),a.jsx("li",{children:"API permissions  Add permission  Microsoft Graph  Delegated permissions"}),a.jsx("li",{children:'Add "User.ReadBasic.All" or "User.Read.All"'}),a.jsx("li",{children:'Click "Grant admin consent" (requires admin)'})]})]}),a.jsx("div",{className:"mt-2 text-xs text-red-600",children:"You can still enter the email manually below."})]}),Ut.searchTerm.length>=2&&!Ut.isSearching&&Ut.results.length===0&&!Ut.error&&a.jsx("div",{className:"absolute z-10 w-full mt-1 bg-white border border-gray-300 rounded-lg shadow-lg p-4 text-sm text-gray-500 text-center",children:"No users found. You can still enter the email manually below."})]})}),a.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"Search for users in your organization by name or email, or enter manually below"})]}):a.jsx("div",{children:a.jsx("button",{type:"button",className:"text-sm font-semibold text-[#2D4660] hover:underline focus:outline-none",onClick:()=>{Rr(!0),Kt(Iu())},children:"Search Company Users again"})}),a.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Full Name ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx("input",{type:"text",value:st.name,onChange:N=>Wt({...st,name:N.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#2D4660] focus:border-transparent",placeholder:"John Doe"})]}),a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Email Address ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx("input",{type:"email",value:st.email,onChange:N=>Wt({...st,email:N.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#2D4660] focus:border-transparent",placeholder:"john.doe@newmill.com"})]})]}),M==="system-admin"&&a.jsx("div",{className:"border-t border-gray-200 pt-4",children:a.jsxs("label",{className:"flex items-center gap-3 cursor-pointer",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"flex-shrink-0 w-6 h-6 flex items-center justify-center",children:a.jsx(As,{className:"h-4 w-4 text-[#C89212] transition-transform",style:{transform:st.isSystemAdmin?"scale(2)":"scale(1)",transformOrigin:"center"}})}),a.jsx("span",{className:"text-sm font-medium text-gray-700",children:"System Administrator"})]}),a.jsx("input",{id:"systemAdminCheckbox",type:"checkbox",checked:st.isSystemAdmin,onChange:N=>Wt({...st,isSystemAdmin:N.target.checked}),className:"sr-only"}),a.jsx("span",{className:"flex items-center justify-center w-6 h-6 border rounded-md transition-colors",style:{borderColor:"#C89212",backgroundColor:st.isSystemAdmin?"#C89212":"#ffffff"},children:st.isSystemAdmin&&a.jsx("svg",{viewBox:"0 0 24 24",className:"w-4 h-4",stroke:"#ffffff",strokeWidth:"3",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("polyline",{points:"4 12 10 18 20 6"})})})]})}),M==="system-admin"&&a.jsxs("div",{className:"border-t border-gray-200 pt-4",children:[a.jsxs("div",{className:"w-full flex items-center gap-2 py-2 hover:bg-gray-50 rounded-lg px-2 -ml-2 transition-colors",children:[a.jsxs("button",{type:"button",className:"flex items-center gap-2 text-sm font-medium text-gray-700 flex-1 text-left",onClick:()=>Zn(N=>({sessionAdmin:!N.sessionAdmin,stakeholder:!1})),children:[a.jsx("span",{className:"flex items-center justify-center",style:{transform:Pn?"scale(1.2)":"scale(1)"},children:a.jsx(Fn,{className:"h-4 w-4 text-[#576C71]"})}),a.jsx("span",{children:"Session Admin"}),Pn&&we&&a.jsx("span",{className:"ml-2 text-xs text-gray-500",children:we})]}),Pn&&a.jsx("button",{type:"button",onClick:Ls,className:"px-3 py-1 rounded-full border text-xs font-semibold transition-colors hover:bg-[#576C71]/10",style:{borderColor:"#576C71",color:"#576C71",backgroundColor:"#f6fbfb"},children:"Reset"}),a.jsx(ls,{className:`h-4 w-4 text-gray-500 transition-transform ${pr.sessionAdmin?"rotate-180":""}`})]}),pr.sessionAdmin&&a.jsxs("div",{className:"mt-3 ml-6 space-y-3",children:[a.jsx("div",{children:a.jsx(ch,{products:ir,value:wr,onChange:N=>{Vn(N),Wt(J=>({...J,sessionAdminIds:[]})),ts(!0)},label:"Product *"})}),wr&&a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Session Selection *"}),a.jsxs("div",{className:"inline-flex items-center bg-gray-100 rounded-lg p-1",children:[a.jsx("button",{type:"button",onClick:()=>ts(!1),className:`px-4 py-2 rounded-md text-sm font-medium transition-colors flex items-center ${Vr?"text-gray-600 hover:text-gray-900":"bg-white text-[#2d4660] shadow-sm"}`,children:"Select Sessions"}),a.jsx("button",{type:"button",onClick:()=>{ts(!0),Wt(N=>({...N,sessionAdminIds:[]}))},className:`px-4 py-2 rounded-md text-sm font-medium transition-colors flex items-center ${Vr?"bg-white text-[#2d4660] shadow-sm":"text-gray-600 hover:text-gray-900"}`,children:"All Sessions"})]}),Vr&&a.jsx("p",{className:"mt-2 text-xs text-gray-500",children:"User will be added to all current and future sessions for this product"})]}),!Vr&&a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Sessions * (Current and Future)"}),yn.length===0?a.jsx("p",{className:"text-sm text-gray-500",children:"No current or future sessions found for this product."}):a.jsx("div",{className:"max-h-48 overflow-y-auto border border-gray-300 rounded-md p-2",children:yn.map(N=>a.jsxs("label",{className:"flex items-start px-3 py-2 hover:bg-gray-50 cursor-pointer border-b border-gray-100 last:border-b-0",children:[a.jsx("input",{type:"checkbox",checked:st.sessionAdminIds.includes(N.id),onChange:()=>On(N.id),className:"w-4 h-4 border-gray-300 rounded focus:ring-[#2D4660] accent-green-600 mt-1",style:{accentColor:"#16a34a"}}),a.jsxs("div",{className:"ml-3 flex-1",children:[a.jsxs("div",{className:"flex items-start justify-between gap-2",children:[a.jsx("div",{className:"text-sm font-medium text-gray-900",children:N.title||"Unnamed Session"}),a.jsx("span",{className:`text-xs font-medium ${ds(N).color}`,children:ds(N).text})]}),a.jsx("div",{className:"text-xs text-gray-500 mt-0.5",children:vn(N)})]})]},N.id))})]})]})]})]}),M==="session-admin"?a.jsxs("div",{className:"border-t border-gray-200 pt-4",children:[a.jsxs("div",{className:"flex items-center mb-3",children:[a.jsx(ms,{className:"h-4 w-4 mr-2 text-[#8B5A4A]"}),a.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Add as Stakeholder"}),st.stakeholderSessionIds.length>0&&a.jsx("span",{className:"ml-2 px-2 py-0.5 bg-[#8B5A4A]/10 text-[#8B5A4A] text-xs rounded-full",children:st.stakeholderSessionIds.length})]}),a.jsxs("div",{className:"space-y-3",children:[a.jsx("div",{children:a.jsx(ch,{products:ir,value:Gt,onChange:N=>{Br(N),Wt(J=>({...J,stakeholderSessionIds:[]})),ln(!0)},label:"Product *"})}),Gt&&a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Session Selection *"}),a.jsxs("div",{className:"inline-flex items-center bg-gray-100 rounded-lg p-1",children:[a.jsx("button",{type:"button",onClick:()=>{ln(!1)},className:`px-4 py-2 rounded-md text-sm font-medium transition-colors flex items-center ${Et?"text-gray-600 hover:text-gray-900":"bg-white text-[#2d4660] shadow-sm"}`,children:"Select Sessions"}),a.jsx("button",{type:"button",onClick:()=>{ln(!0),Wt(N=>({...N,stakeholderSessionIds:[]}))},className:`px-4 py-2 rounded-md text-sm font-medium transition-colors flex items-center ${Et?"bg-white text-[#2d4660] shadow-sm":"text-gray-600 hover:text-gray-900"}`,children:"All Sessions"})]}),Et&&a.jsx("p",{className:"mt-2 text-xs text-gray-500",children:"User will be added to all current and future sessions for this product"})]}),!Et&&a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Sessions * (Current and Future)"}),gr.length===0?a.jsx("p",{className:"text-sm text-gray-500",children:"No current or future sessions found for this product."}):a.jsx("div",{className:"max-h-48 overflow-y-auto border border-gray-300 rounded-md p-2",children:gr.map(N=>a.jsxs("label",{className:"flex items-start px-3 py-2 hover:bg-gray-50 cursor-pointer border-b border-gray-100 last:border-b-0",children:[a.jsx("input",{type:"checkbox",checked:st.stakeholderSessionIds.includes(N.id),onChange:()=>Jr(N.id),className:"w-4 h-4 border-gray-300 rounded focus:ring-[#2D4660] accent-green-600 mt-1",style:{accentColor:"#16a34a"}}),a.jsxs("div",{className:"ml-3 flex-1",children:[a.jsx("div",{className:"text-sm font-medium text-gray-900",children:N.title||"Unnamed Session"}),a.jsx("div",{className:"text-xs text-gray-500 mt-0.5",children:vn(N)}),a.jsx("div",{className:"text-xs mt-0.5",children:a.jsx("span",{className:`font-medium ${ds(N).color}`,children:ds(N).text})})]})]},N.id))})]})]})]})]}):a.jsxs("div",{className:"border-t border-gray-200 pt-4",children:[a.jsxs("div",{className:"w-full flex items-center gap-2 py-2 hover:bg-gray-50 rounded-lg px-2 -ml-2 transition-colors",children:[a.jsxs("button",{type:"button",className:"flex items-center gap-2 text-sm font-medium text-gray-700 flex-1 text-left",onClick:()=>Zn(N=>({stakeholder:!N.stakeholder,sessionAdmin:!1})),children:[a.jsx("span",{className:"flex items-center justify-center",style:{transform:us?"scale(1.2)":"scale(1)"},children:a.jsx(ms,{className:"h-4 w-4 text-[#8B5A4A]"})}),a.jsx("span",{children:"Stakeholder"}),us&&$e&&a.jsx("span",{className:"ml-2 text-xs text-gray-500",children:$e})]}),us&&a.jsx("button",{type:"button",onClick:ji,className:"px-3 py-1 rounded-full border text-xs font-semibold transition-colors hover:bg-[#8B5A4A]/10",style:{borderColor:"#8B5A4A",color:"#8B5A4A",backgroundColor:"#fcf8f4"},children:"Reset"}),a.jsx(ls,{className:`h-4 w-4 text-gray-500 transition-transform ${pr.stakeholder?"rotate-180":""}`})]}),pr.stakeholder&&a.jsxs("div",{className:"mt-3 ml-6 space-y-3",children:[a.jsx("div",{children:a.jsx(ch,{products:ir,value:Gt,onChange:N=>{Br(N),Wt(J=>({...J,stakeholderSessionIds:[]})),ln(!0)},label:"Product *"})}),Gt&&a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Session Selection *"}),a.jsxs("div",{className:"inline-flex items-center bg-gray-100 rounded-lg p-1",children:[a.jsx("button",{type:"button",onClick:()=>{ln(!1)},className:`px-4 py-2 rounded-md text-sm font-medium transition-colors flex items-center ${Et?"text-gray-600 hover:text-gray-900":"bg-white text-[#2d4660] shadow-sm"}`,children:"Select Sessions"}),a.jsx("button",{type:"button",onClick:()=>{ln(!0),Wt(N=>({...N,stakeholderSessionIds:[]}))},className:`px-4 py-2 rounded-md text-sm font-medium transition-colors flex items-center ${Et?"bg-white text-[#2d4660] shadow-sm":"text-gray-600 hover:text-gray-900"}`,children:"All Sessions"})]}),Et&&a.jsx("p",{className:"mt-2 text-xs text-gray-500",children:"User will be added to all current and future sessions for this product"})]}),!Et&&a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Sessions * (Current and Future)"}),gr.length===0?a.jsx("p",{className:"text-sm text-gray-500",children:"No current or future sessions found for this product."}):a.jsx("div",{className:"max-h-48 overflow-y-auto border border-gray-300 rounded-md p-2",children:gr.map(N=>a.jsxs("label",{className:"flex items-start px-3 py-2 hover:bg-gray-50 cursor-pointer border-b border-gray-100 last:border-b-0",children:[a.jsx("input",{type:"checkbox",checked:st.stakeholderSessionIds.includes(N.id),onChange:()=>Jr(N.id),className:"w-4 h-4 border-gray-300 rounded focus:ring-[#2D4660] accent-green-600 mt-1",style:{accentColor:"#16a34a"}}),a.jsxs("div",{className:"ml-3 flex-1",children:[a.jsxs("div",{className:"flex items-start justify-between gap-2",children:[a.jsx("div",{className:"text-sm font-medium text-gray-900",children:N.title||"Unnamed Session"}),a.jsx("span",{className:`text-xs font-medium ${ds(N).color}`,children:ds(N).text})]}),a.jsx("div",{className:"text-xs text-gray-500 mt-0.5",children:vn(N)})]})]},N.id))})]})]})]})]})]}),a.jsx("div",{className:"mt-6 pt-6 border-t border-gray-200 flex justify-end",children:a.jsx("button",{onClick:Cr,disabled:!!(ar||!st.name.trim()||!st.email.trim()||M==="session-admin"&&(!Gt||!Et&&st.stakeholderSessionIds.length===0)||M==="system-admin"&&pr.sessionAdmin&&wr&&!Vr&&st.sessionAdminIds.length===0||M==="system-admin"&&pr.stakeholder&&Gt&&!Et&&st.stakeholderSessionIds.length===0),className:"px-4 py-2.5 bg-[#2D4660] text-white rounded-lg hover:bg-[#173B65] transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center",children:ar?a.jsxs(a.Fragment,{children:[a.jsxs("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",fill:"none",viewBox:"0 0 24 24",children:[a.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),a.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),Xe(!0)]}):Xe(!1)})})]})})}),Ve&&yt&&a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:a.jsx("div",{className:"bg-white rounded-lg shadow-xl max-w-lg w-full max-h-[90vh] overflow-y-auto",children:a.jsxs("div",{className:"p-6",children:[a.jsxs("div",{className:"flex items-start mb-4",children:[a.jsx("div",{className:"flex-shrink-0 w-12 h-12 rounded-full bg-blue-100 flex items-center justify-center",children:a.jsx(Wu,{className:"h-6 w-6 text-blue-600"})}),a.jsxs("div",{className:"ml-4 flex-1",children:[a.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-1",children:"Edit User"}),a.jsx("p",{className:"text-sm text-gray-600",children:"Update user name and email address"})]}),a.jsx("button",{onClick:()=>{At(!1),Lt(null),dr(""),yr("")},className:"flex-shrink-0 ml-4 p-1 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-lg transition-colors","aria-label":"Close modal",children:a.jsx(Js,{className:"h-5 w-5"})})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Full Name ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx("input",{type:"text",value:Le,onChange:N=>dr(N.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#2D4660] focus:border-transparent",placeholder:"John Doe",disabled:Nt})]}),a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Email Address ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx("input",{type:"email",value:Nr,onChange:N=>yr(N.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#2D4660] focus:border-transparent",placeholder:"john.doe@newmill.com",disabled:Nt})]})]}),a.jsxs("div",{className:"flex justify-end gap-3 mt-6",children:[a.jsx("button",{onClick:()=>{At(!1),Lt(null),dr(""),yr("")},className:"px-4 py-2.5 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",disabled:Nt,children:"Cancel"}),a.jsx("button",{onClick:_e,disabled:Nt||!Le.trim()||!Nr.trim(),className:"px-4 py-2.5 bg-[#2D4660] text-white rounded-lg hover:bg-[#173B65] transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:Nt?"Updating...":"Update User"})]})]})})}),$s&&or&&a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:a.jsx("div",{className:"bg-white rounded-lg shadow-xl max-w-lg w-full max-h-[90vh] overflow-y-auto",children:a.jsxs("div",{className:"p-6",children:[a.jsxs("div",{className:"flex items-start mb-4",children:[a.jsx("div",{className:"flex-shrink-0 w-12 h-12 rounded-full bg-green-100 flex items-center justify-center",children:a.jsx(Yr,{className:"h-6 w-6 text-green-600"})}),a.jsxs("div",{className:"ml-4 flex-1",children:[a.jsxs("h2",{className:"text-xl font-bold text-gray-900 mb-1",children:[or.userType," Created Successfully!"]}),a.jsx("p",{className:"text-sm text-gray-600",children:"The user account has been created and roles have been assigned."})]}),a.jsx("button",{onClick:()=>{on(!1),Zt(null)},className:"flex-shrink-0 ml-4 p-1 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-lg transition-colors","aria-label":"Close modal",children:a.jsx(Js,{className:"h-5 w-5"})})]}),a.jsx("div",{className:"bg-gray-50 rounded-lg p-4 mb-4",children:a.jsx("div",{className:"space-y-3",children:a.jsxs("div",{children:[a.jsx("div",{className:"text-xs font-semibold text-gray-500 uppercase mb-1",children:"Email Address"}),a.jsx("div",{className:"text-sm font-medium text-gray-900",children:or.email})]})})}),a.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-3 mb-4",children:a.jsxs("div",{className:"flex",children:[a.jsx($u,{className:"h-5 w-5 text-blue-600 flex-shrink-0 mt-0.5"}),a.jsxs("div",{className:"ml-2",children:[a.jsx("div",{className:"text-sm font-semibold text-blue-800 mb-1",children:"User Authentication"}),a.jsx("div",{className:"text-xs text-blue-700",children:"The user will sign in using their company Azure AD credentials. No password is needed."})]})]})}),a.jsx("div",{className:"flex justify-end",children:a.jsx("button",{onClick:()=>{on(!1),Zt(null)},className:"px-4 py-2.5 bg-[#2D4660] text-white rounded-lg hover:bg-[#173B65] transition-colors",children:"Done"})})]})})})]}):null}const FZ=""+new URL("bottom-left-curve-T4fflHT3.png",import.meta.url).href,LZ=()=>a.jsx("div",{className:"fixed bottom-0 left-0 pointer-events-none z-0",children:a.jsx("img",{src:FZ,alt:"",style:{maxWidth:"600px",height:"auto",opacity:.2}})});function zZ(){return a.jsx(_M,{children:a.jsxs(P3,{children:[a.jsx(LZ,{}),a.jsx(S5,{basename:"/feature-voting-app",children:a.jsxs(ZD,{children:[a.jsx(Ws,{path:"/",element:a.jsx(XD,{to:"/login",replace:!0})}),a.jsx(Ws,{path:"/login",element:a.jsx(IF,{})}),a.jsx(Ws,{path:"/sessions",element:a.jsx(EZ,{})}),a.jsx(Ws,{path:"/create-session",element:a.jsx(AZ,{})}),a.jsx(Ws,{path:"/manage-stakeholders",element:a.jsx(OZ,{})}),a.jsx(Ws,{path:"/manage-admins",element:a.jsx(TZ,{})}),a.jsx(Ws,{path:"/vote",element:a.jsx(Av,{adminMode:!1})}),a.jsx(Ws,{path:"/admin",element:a.jsx(Av,{adminMode:!0})}),a.jsx(Ws,{path:"/results",element:a.jsx(Av,{resultsMode:!0})}),a.jsx(Ws,{path:"/unauthorized",element:a.jsx(IZ,{})}),a.jsx(Ws,{path:"/system-admins",element:a.jsx(DZ,{})}),a.jsx(Ws,{path:"/users",element:a.jsx(MZ,{})})]})})]})})}if(typeof window<"u"){const e=console.error;console.error=(...t)=>{var n;const r=((n=t[0])==null?void 0:n.toString())||"";r.includes("runtime.lastError")||r.includes("message channel closed")||e.apply(console,t)}}lD.createRoot(document.getElementById("root")).render(a.jsx(jt.StrictMode,{children:a.jsx(zZ,{})}));
