var ZI=Object.defineProperty;var eD=(e,t,r)=>t in e?ZI(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;var ey=(e,t,r)=>eD(e,typeof t!="symbol"?t+"":t,r);function tD(e,t){for(var r=0;r<t.length;r++){const n=t[r];if(typeof n!="string"&&!Array.isArray(n)){for(const s in n)if(s!=="default"&&!(s in e)){const a=Object.getOwnPropertyDescriptor(n,s);a&&Object.defineProperty(e,s,a.get?a:{enumerable:!0,get:()=>n[s]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const a of s)if(a.type==="childList")for(const l of a.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&n(l)}).observe(document,{childList:!0,subtree:!0});function r(s){const a={};return s.integrity&&(a.integrity=s.integrity),s.referrerPolicy&&(a.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?a.credentials="include":s.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function n(s){if(s.ep)return;s.ep=!0;const a=r(s);fetch(s.href,a)}})();function ai(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function rD(e){if(Object.prototype.hasOwnProperty.call(e,"__esModule"))return e;var t=e.default;if(typeof t=="function"){var r=function n(){return this instanceof n?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};r.prototype=t.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(e).forEach(function(n){var s=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(r,n,s.get?s:{enumerable:!0,get:function(){return e[n]}})}),r}var ty={exports:{}},Ju={},ry={exports:{}},lr={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Oj;function nD(){if(Oj)return lr;Oj=1;var e=Symbol.for("react.element"),t=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),a=Symbol.for("react.provider"),l=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),m=Symbol.for("react.memo"),f=Symbol.for("react.lazy"),p=Symbol.iterator;function v(U){return U===null||typeof U!="object"?null:(U=p&&U[p]||U["@@iterator"],typeof U=="function"?U:null)}var x={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},w=Object.assign,k={};function b(U,te,he){this.props=U,this.context=te,this.refs=k,this.updater=he||x}b.prototype.isReactComponent={},b.prototype.setState=function(U,te){if(typeof U!="object"&&typeof U!="function"&&U!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,U,te,"setState")},b.prototype.forceUpdate=function(U){this.updater.enqueueForceUpdate(this,U,"forceUpdate")};function _(){}_.prototype=b.prototype;function N(U,te,he){this.props=U,this.context=te,this.refs=k,this.updater=he||x}var C=N.prototype=new _;C.constructor=N,w(C,b.prototype),C.isPureReactComponent=!0;var T=Array.isArray,P=Object.prototype.hasOwnProperty,A={current:null},M={key:!0,ref:!0,__self:!0,__source:!0};function R(U,te,he){var $e,Pe={},ke=null,De=null;if(te!=null)for($e in te.ref!==void 0&&(De=te.ref),te.key!==void 0&&(ke=""+te.key),te)P.call(te,$e)&&!M.hasOwnProperty($e)&&(Pe[$e]=te[$e]);var He=arguments.length-2;if(He===1)Pe.children=he;else if(1<He){for(var Y=Array(He),ge=0;ge<He;ge++)Y[ge]=arguments[ge+2];Pe.children=Y}if(U&&U.defaultProps)for($e in He=U.defaultProps,He)Pe[$e]===void 0&&(Pe[$e]=He[$e]);return{$$typeof:e,type:U,key:ke,ref:De,props:Pe,_owner:A.current}}function K(U,te){return{$$typeof:e,type:U.type,key:te,ref:U.ref,props:U.props,_owner:U._owner}}function B(U){return typeof U=="object"&&U!==null&&U.$$typeof===e}function ie(U){var te={"=":"=0",":":"=2"};return"$"+U.replace(/[=:]/g,function(he){return te[he]})}var G=/\/+/g;function ne(U,te){return typeof U=="object"&&U!==null&&U.key!=null?ie(""+U.key):te.toString(36)}function W(U,te,he,$e,Pe){var ke=typeof U;(ke==="undefined"||ke==="boolean")&&(U=null);var De=!1;if(U===null)De=!0;else switch(ke){case"string":case"number":De=!0;break;case"object":switch(U.$$typeof){case e:case t:De=!0}}if(De)return De=U,Pe=Pe(De),U=$e===""?"."+ne(De,0):$e,T(Pe)?(he="",U!=null&&(he=U.replace(G,"$&/")+"/"),W(Pe,te,he,"",function(ge){return ge})):Pe!=null&&(B(Pe)&&(Pe=K(Pe,he+(!Pe.key||De&&De.key===Pe.key?"":(""+Pe.key).replace(G,"$&/")+"/")+U)),te.push(Pe)),1;if(De=0,$e=$e===""?".":$e+":",T(U))for(var He=0;He<U.length;He++){ke=U[He];var Y=$e+ne(ke,He);De+=W(ke,te,he,Y,Pe)}else if(Y=v(U),typeof Y=="function")for(U=Y.call(U),He=0;!(ke=U.next()).done;)ke=ke.value,Y=$e+ne(ke,He++),De+=W(ke,te,he,Y,Pe);else if(ke==="object")throw te=String(U),Error("Objects are not valid as a React child (found: "+(te==="[object Object]"?"object with keys {"+Object.keys(U).join(", ")+"}":te)+"). If you meant to render a collection of children, use an array instead.");return De}function q(U,te,he){if(U==null)return U;var $e=[],Pe=0;return W(U,$e,"","",function(ke){return te.call(he,ke,Pe++)}),$e}function ve(U){if(U._status===-1){var te=U._result;te=te(),te.then(function(he){(U._status===0||U._status===-1)&&(U._status=1,U._result=he)},function(he){(U._status===0||U._status===-1)&&(U._status=2,U._result=he)}),U._status===-1&&(U._status=0,U._result=te)}if(U._status===1)return U._result.default;throw U._result}var $={current:null},H={transition:null},ce={ReactCurrentDispatcher:$,ReactCurrentBatchConfig:H,ReactCurrentOwner:A};function le(){throw Error("act(...) is not supported in production builds of React.")}return lr.Children={map:q,forEach:function(U,te,he){q(U,function(){te.apply(this,arguments)},he)},count:function(U){var te=0;return q(U,function(){te++}),te},toArray:function(U){return q(U,function(te){return te})||[]},only:function(U){if(!B(U))throw Error("React.Children.only expected to receive a single React element child.");return U}},lr.Component=b,lr.Fragment=r,lr.Profiler=s,lr.PureComponent=N,lr.StrictMode=n,lr.Suspense=d,lr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ce,lr.act=le,lr.cloneElement=function(U,te,he){if(U==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+U+".");var $e=w({},U.props),Pe=U.key,ke=U.ref,De=U._owner;if(te!=null){if(te.ref!==void 0&&(ke=te.ref,De=A.current),te.key!==void 0&&(Pe=""+te.key),U.type&&U.type.defaultProps)var He=U.type.defaultProps;for(Y in te)P.call(te,Y)&&!M.hasOwnProperty(Y)&&($e[Y]=te[Y]===void 0&&He!==void 0?He[Y]:te[Y])}var Y=arguments.length-2;if(Y===1)$e.children=he;else if(1<Y){He=Array(Y);for(var ge=0;ge<Y;ge++)He[ge]=arguments[ge+2];$e.children=He}return{$$typeof:e,type:U.type,key:Pe,ref:ke,props:$e,_owner:De}},lr.createContext=function(U){return U={$$typeof:l,_currentValue:U,_currentValue2:U,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},U.Provider={$$typeof:a,_context:U},U.Consumer=U},lr.createElement=R,lr.createFactory=function(U){var te=R.bind(null,U);return te.type=U,te},lr.createRef=function(){return{current:null}},lr.forwardRef=function(U){return{$$typeof:u,render:U}},lr.isValidElement=B,lr.lazy=function(U){return{$$typeof:f,_payload:{_status:-1,_result:U},_init:ve}},lr.memo=function(U,te){return{$$typeof:m,type:U,compare:te===void 0?null:te}},lr.startTransition=function(U){var te=H.transition;H.transition={};try{U()}finally{H.transition=te}},lr.unstable_act=le,lr.useCallback=function(U,te){return $.current.useCallback(U,te)},lr.useContext=function(U){return $.current.useContext(U)},lr.useDebugValue=function(){},lr.useDeferredValue=function(U){return $.current.useDeferredValue(U)},lr.useEffect=function(U,te){return $.current.useEffect(U,te)},lr.useId=function(){return $.current.useId()},lr.useImperativeHandle=function(U,te,he){return $.current.useImperativeHandle(U,te,he)},lr.useInsertionEffect=function(U,te){return $.current.useInsertionEffect(U,te)},lr.useLayoutEffect=function(U,te){return $.current.useLayoutEffect(U,te)},lr.useMemo=function(U,te){return $.current.useMemo(U,te)},lr.useReducer=function(U,te,he){return $.current.useReducer(U,te,he)},lr.useRef=function(U){return $.current.useRef(U)},lr.useState=function(U){return $.current.useState(U)},lr.useSyncExternalStore=function(U,te,he){return $.current.useSyncExternalStore(U,te,he)},lr.useTransition=function(){return $.current.useTransition()},lr.version="18.3.1",lr}var Tj;function iu(){return Tj||(Tj=1,ry.exports=nD()),ry.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ij;function sD(){if(Ij)return Ju;Ij=1;var e=iu(),t=Symbol.for("react.element"),r=Symbol.for("react.fragment"),n=Object.prototype.hasOwnProperty,s=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,a={key:!0,ref:!0,__self:!0,__source:!0};function l(u,d,m){var f,p={},v=null,x=null;m!==void 0&&(v=""+m),d.key!==void 0&&(v=""+d.key),d.ref!==void 0&&(x=d.ref);for(f in d)n.call(d,f)&&!a.hasOwnProperty(f)&&(p[f]=d[f]);if(u&&u.defaultProps)for(f in d=u.defaultProps,d)p[f]===void 0&&(p[f]=d[f]);return{$$typeof:t,type:u,key:v,ref:x,props:p,_owner:s.current}}return Ju.Fragment=r,Ju.jsx=l,Ju.jsxs=l,Ju}var Dj;function aD(){return Dj||(Dj=1,ty.exports=sD()),ty.exports}var i=aD(),y=iu();const It=ai(y),iD=tD({__proto__:null,default:It},[y]);var eh={},ny={exports:{}},Js={},sy={exports:{}},ay={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var $j;function oD(){return $j||($j=1,(function(e){function t(H,ce){var le=H.length;H.push(ce);e:for(;0<le;){var U=le-1>>>1,te=H[U];if(0<s(te,ce))H[U]=ce,H[le]=te,le=U;else break e}}function r(H){return H.length===0?null:H[0]}function n(H){if(H.length===0)return null;var ce=H[0],le=H.pop();if(le!==ce){H[0]=le;e:for(var U=0,te=H.length,he=te>>>1;U<he;){var $e=2*(U+1)-1,Pe=H[$e],ke=$e+1,De=H[ke];if(0>s(Pe,le))ke<te&&0>s(De,Pe)?(H[U]=De,H[ke]=le,U=ke):(H[U]=Pe,H[$e]=le,U=$e);else if(ke<te&&0>s(De,le))H[U]=De,H[ke]=le,U=ke;else break e}}return ce}function s(H,ce){var le=H.sortIndex-ce.sortIndex;return le!==0?le:H.id-ce.id}if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;e.unstable_now=function(){return a.now()}}else{var l=Date,u=l.now();e.unstable_now=function(){return l.now()-u}}var d=[],m=[],f=1,p=null,v=3,x=!1,w=!1,k=!1,b=typeof setTimeout=="function"?setTimeout:null,_=typeof clearTimeout=="function"?clearTimeout:null,N=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function C(H){for(var ce=r(m);ce!==null;){if(ce.callback===null)n(m);else if(ce.startTime<=H)n(m),ce.sortIndex=ce.expirationTime,t(d,ce);else break;ce=r(m)}}function T(H){if(k=!1,C(H),!w)if(r(d)!==null)w=!0,ve(P);else{var ce=r(m);ce!==null&&$(T,ce.startTime-H)}}function P(H,ce){w=!1,k&&(k=!1,_(R),R=-1),x=!0;var le=v;try{for(C(ce),p=r(d);p!==null&&(!(p.expirationTime>ce)||H&&!ie());){var U=p.callback;if(typeof U=="function"){p.callback=null,v=p.priorityLevel;var te=U(p.expirationTime<=ce);ce=e.unstable_now(),typeof te=="function"?p.callback=te:p===r(d)&&n(d),C(ce)}else n(d);p=r(d)}if(p!==null)var he=!0;else{var $e=r(m);$e!==null&&$(T,$e.startTime-ce),he=!1}return he}finally{p=null,v=le,x=!1}}var A=!1,M=null,R=-1,K=5,B=-1;function ie(){return!(e.unstable_now()-B<K)}function G(){if(M!==null){var H=e.unstable_now();B=H;var ce=!0;try{ce=M(!0,H)}finally{ce?ne():(A=!1,M=null)}}else A=!1}var ne;if(typeof N=="function")ne=function(){N(G)};else if(typeof MessageChannel<"u"){var W=new MessageChannel,q=W.port2;W.port1.onmessage=G,ne=function(){q.postMessage(null)}}else ne=function(){b(G,0)};function ve(H){M=H,A||(A=!0,ne())}function $(H,ce){R=b(function(){H(e.unstable_now())},ce)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(H){H.callback=null},e.unstable_continueExecution=function(){w||x||(w=!0,ve(P))},e.unstable_forceFrameRate=function(H){0>H||125<H?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):K=0<H?Math.floor(1e3/H):5},e.unstable_getCurrentPriorityLevel=function(){return v},e.unstable_getFirstCallbackNode=function(){return r(d)},e.unstable_next=function(H){switch(v){case 1:case 2:case 3:var ce=3;break;default:ce=v}var le=v;v=ce;try{return H()}finally{v=le}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(H,ce){switch(H){case 1:case 2:case 3:case 4:case 5:break;default:H=3}var le=v;v=H;try{return ce()}finally{v=le}},e.unstable_scheduleCallback=function(H,ce,le){var U=e.unstable_now();switch(typeof le=="object"&&le!==null?(le=le.delay,le=typeof le=="number"&&0<le?U+le:U):le=U,H){case 1:var te=-1;break;case 2:te=250;break;case 5:te=1073741823;break;case 4:te=1e4;break;default:te=5e3}return te=le+te,H={id:f++,callback:ce,priorityLevel:H,startTime:le,expirationTime:te,sortIndex:-1},le>U?(H.sortIndex=le,t(m,H),r(d)===null&&H===r(m)&&(k?(_(R),R=-1):k=!0,$(T,le-U))):(H.sortIndex=te,t(d,H),w||x||(w=!0,ve(P))),H},e.unstable_shouldYield=ie,e.unstable_wrapCallback=function(H){var ce=v;return function(){var le=v;v=ce;try{return H.apply(this,arguments)}finally{v=le}}}})(ay)),ay}var Rj;function lD(){return Rj||(Rj=1,sy.exports=oD()),sy.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Mj;function cD(){if(Mj)return Js;Mj=1;var e=iu(),t=lD();function r(o){for(var c="https://reactjs.org/docs/error-decoder.html?invariant="+o,h=1;h<arguments.length;h++)c+="&args[]="+encodeURIComponent(arguments[h]);return"Minified React error #"+o+"; visit "+c+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var n=new Set,s={};function a(o,c){l(o,c),l(o+"Capture",c)}function l(o,c){for(s[o]=c,o=0;o<c.length;o++)n.add(c[o])}var u=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),d=Object.prototype.hasOwnProperty,m=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,f={},p={};function v(o){return d.call(p,o)?!0:d.call(f,o)?!1:m.test(o)?p[o]=!0:(f[o]=!0,!1)}function x(o,c,h,g){if(h!==null&&h.type===0)return!1;switch(typeof c){case"function":case"symbol":return!0;case"boolean":return g?!1:h!==null?!h.acceptsBooleans:(o=o.toLowerCase().slice(0,5),o!=="data-"&&o!=="aria-");default:return!1}}function w(o,c,h,g){if(c===null||typeof c>"u"||x(o,c,h,g))return!0;if(g)return!1;if(h!==null)switch(h.type){case 3:return!c;case 4:return c===!1;case 5:return isNaN(c);case 6:return isNaN(c)||1>c}return!1}function k(o,c,h,g,j,S,E){this.acceptsBooleans=c===2||c===3||c===4,this.attributeName=g,this.attributeNamespace=j,this.mustUseProperty=h,this.propertyName=o,this.type=c,this.sanitizeURL=S,this.removeEmptyString=E}var b={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(o){b[o]=new k(o,0,!1,o,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(o){var c=o[0];b[c]=new k(c,1,!1,o[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(o){b[o]=new k(o,2,!1,o.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(o){b[o]=new k(o,2,!1,o,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(o){b[o]=new k(o,3,!1,o.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(o){b[o]=new k(o,3,!0,o,null,!1,!1)}),["capture","download"].forEach(function(o){b[o]=new k(o,4,!1,o,null,!1,!1)}),["cols","rows","size","span"].forEach(function(o){b[o]=new k(o,6,!1,o,null,!1,!1)}),["rowSpan","start"].forEach(function(o){b[o]=new k(o,5,!1,o.toLowerCase(),null,!1,!1)});var _=/[\-:]([a-z])/g;function N(o){return o[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(o){var c=o.replace(_,N);b[c]=new k(c,1,!1,o,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(o){var c=o.replace(_,N);b[c]=new k(c,1,!1,o,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(o){var c=o.replace(_,N);b[c]=new k(c,1,!1,o,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(o){b[o]=new k(o,1,!1,o.toLowerCase(),null,!1,!1)}),b.xlinkHref=new k("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(o){b[o]=new k(o,1,!1,o.toLowerCase(),null,!0,!0)});function C(o,c,h,g){var j=b.hasOwnProperty(c)?b[c]:null;(j!==null?j.type!==0:g||!(2<c.length)||c[0]!=="o"&&c[0]!=="O"||c[1]!=="n"&&c[1]!=="N")&&(w(c,h,j,g)&&(h=null),g||j===null?v(c)&&(h===null?o.removeAttribute(c):o.setAttribute(c,""+h)):j.mustUseProperty?o[j.propertyName]=h===null?j.type===3?!1:"":h:(c=j.attributeName,g=j.attributeNamespace,h===null?o.removeAttribute(c):(j=j.type,h=j===3||j===4&&h===!0?"":""+h,g?o.setAttributeNS(g,c,h):o.setAttribute(c,h))))}var T=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,P=Symbol.for("react.element"),A=Symbol.for("react.portal"),M=Symbol.for("react.fragment"),R=Symbol.for("react.strict_mode"),K=Symbol.for("react.profiler"),B=Symbol.for("react.provider"),ie=Symbol.for("react.context"),G=Symbol.for("react.forward_ref"),ne=Symbol.for("react.suspense"),W=Symbol.for("react.suspense_list"),q=Symbol.for("react.memo"),ve=Symbol.for("react.lazy"),$=Symbol.for("react.offscreen"),H=Symbol.iterator;function ce(o){return o===null||typeof o!="object"?null:(o=H&&o[H]||o["@@iterator"],typeof o=="function"?o:null)}var le=Object.assign,U;function te(o){if(U===void 0)try{throw Error()}catch(h){var c=h.stack.trim().match(/\n( *(at )?)/);U=c&&c[1]||""}return`
`+U+o}var he=!1;function $e(o,c){if(!o||he)return"";he=!0;var h=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(c)if(c=function(){throw Error()},Object.defineProperty(c.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(c,[])}catch(xe){var g=xe}Reflect.construct(o,[],c)}else{try{c.call()}catch(xe){g=xe}o.call(c.prototype)}else{try{throw Error()}catch(xe){g=xe}o()}}catch(xe){if(xe&&g&&typeof xe.stack=="string"){for(var j=xe.stack.split(`
`),S=g.stack.split(`
`),E=j.length-1,z=S.length-1;1<=E&&0<=z&&j[E]!==S[z];)z--;for(;1<=E&&0<=z;E--,z--)if(j[E]!==S[z]){if(E!==1||z!==1)do if(E--,z--,0>z||j[E]!==S[z]){var J=`
`+j[E].replace(" at new "," at ");return o.displayName&&J.includes("<anonymous>")&&(J=J.replace("<anonymous>",o.displayName)),J}while(1<=E&&0<=z);break}}}finally{he=!1,Error.prepareStackTrace=h}return(o=o?o.displayName||o.name:"")?te(o):""}function Pe(o){switch(o.tag){case 5:return te(o.type);case 16:return te("Lazy");case 13:return te("Suspense");case 19:return te("SuspenseList");case 0:case 2:case 15:return o=$e(o.type,!1),o;case 11:return o=$e(o.type.render,!1),o;case 1:return o=$e(o.type,!0),o;default:return""}}function ke(o){if(o==null)return null;if(typeof o=="function")return o.displayName||o.name||null;if(typeof o=="string")return o;switch(o){case M:return"Fragment";case A:return"Portal";case K:return"Profiler";case R:return"StrictMode";case ne:return"Suspense";case W:return"SuspenseList"}if(typeof o=="object")switch(o.$$typeof){case ie:return(o.displayName||"Context")+".Consumer";case B:return(o._context.displayName||"Context")+".Provider";case G:var c=o.render;return o=o.displayName,o||(o=c.displayName||c.name||"",o=o!==""?"ForwardRef("+o+")":"ForwardRef"),o;case q:return c=o.displayName||null,c!==null?c:ke(o.type)||"Memo";case ve:c=o._payload,o=o._init;try{return ke(o(c))}catch{}}return null}function De(o){var c=o.type;switch(o.tag){case 24:return"Cache";case 9:return(c.displayName||"Context")+".Consumer";case 10:return(c._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return o=c.render,o=o.displayName||o.name||"",c.displayName||(o!==""?"ForwardRef("+o+")":"ForwardRef");case 7:return"Fragment";case 5:return c;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return ke(c);case 8:return c===R?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof c=="function")return c.displayName||c.name||null;if(typeof c=="string")return c}return null}function He(o){switch(typeof o){case"boolean":case"number":case"string":case"undefined":return o;case"object":return o;default:return""}}function Y(o){var c=o.type;return(o=o.nodeName)&&o.toLowerCase()==="input"&&(c==="checkbox"||c==="radio")}function ge(o){var c=Y(o)?"checked":"value",h=Object.getOwnPropertyDescriptor(o.constructor.prototype,c),g=""+o[c];if(!o.hasOwnProperty(c)&&typeof h<"u"&&typeof h.get=="function"&&typeof h.set=="function"){var j=h.get,S=h.set;return Object.defineProperty(o,c,{configurable:!0,get:function(){return j.call(this)},set:function(E){g=""+E,S.call(this,E)}}),Object.defineProperty(o,c,{enumerable:h.enumerable}),{getValue:function(){return g},setValue:function(E){g=""+E},stopTracking:function(){o._valueTracker=null,delete o[c]}}}}function oe(o){o._valueTracker||(o._valueTracker=ge(o))}function se(o){if(!o)return!1;var c=o._valueTracker;if(!c)return!0;var h=c.getValue(),g="";return o&&(g=Y(o)?o.checked?"true":"false":o.value),o=g,o!==h?(c.setValue(o),!0):!1}function Be(o){if(o=o||(typeof document<"u"?document:void 0),typeof o>"u")return null;try{return o.activeElement||o.body}catch{return o.body}}function Xe(o,c){var h=c.checked;return le({},c,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:h??o._wrapperState.initialChecked})}function mt(o,c){var h=c.defaultValue==null?"":c.defaultValue,g=c.checked!=null?c.checked:c.defaultChecked;h=He(c.value!=null?c.value:h),o._wrapperState={initialChecked:g,initialValue:h,controlled:c.type==="checkbox"||c.type==="radio"?c.checked!=null:c.value!=null}}function zt(o,c){c=c.checked,c!=null&&C(o,"checked",c,!1)}function Qe(o,c){zt(o,c);var h=He(c.value),g=c.type;if(h!=null)g==="number"?(h===0&&o.value===""||o.value!=h)&&(o.value=""+h):o.value!==""+h&&(o.value=""+h);else if(g==="submit"||g==="reset"){o.removeAttribute("value");return}c.hasOwnProperty("value")?Vt(o,c.type,h):c.hasOwnProperty("defaultValue")&&Vt(o,c.type,He(c.defaultValue)),c.checked==null&&c.defaultChecked!=null&&(o.defaultChecked=!!c.defaultChecked)}function nt(o,c,h){if(c.hasOwnProperty("value")||c.hasOwnProperty("defaultValue")){var g=c.type;if(!(g!=="submit"&&g!=="reset"||c.value!==void 0&&c.value!==null))return;c=""+o._wrapperState.initialValue,h||c===o.value||(o.value=c),o.defaultValue=c}h=o.name,h!==""&&(o.name=""),o.defaultChecked=!!o._wrapperState.initialChecked,h!==""&&(o.name=h)}function Vt(o,c,h){(c!=="number"||Be(o.ownerDocument)!==o)&&(h==null?o.defaultValue=""+o._wrapperState.initialValue:o.defaultValue!==""+h&&(o.defaultValue=""+h))}var F=Array.isArray;function L(o,c,h,g){if(o=o.options,c){c={};for(var j=0;j<h.length;j++)c["$"+h[j]]=!0;for(h=0;h<o.length;h++)j=c.hasOwnProperty("$"+o[h].value),o[h].selected!==j&&(o[h].selected=j),j&&g&&(o[h].defaultSelected=!0)}else{for(h=""+He(h),c=null,j=0;j<o.length;j++){if(o[j].value===h){o[j].selected=!0,g&&(o[j].defaultSelected=!0);return}c!==null||o[j].disabled||(c=o[j])}c!==null&&(c.selected=!0)}}function V(o,c){if(c.dangerouslySetInnerHTML!=null)throw Error(r(91));return le({},c,{value:void 0,defaultValue:void 0,children:""+o._wrapperState.initialValue})}function Se(o,c){var h=c.value;if(h==null){if(h=c.children,c=c.defaultValue,h!=null){if(c!=null)throw Error(r(92));if(F(h)){if(1<h.length)throw Error(r(93));h=h[0]}c=h}c==null&&(c=""),h=c}o._wrapperState={initialValue:He(h)}}function we(o,c){var h=He(c.value),g=He(c.defaultValue);h!=null&&(h=""+h,h!==o.value&&(o.value=h),c.defaultValue==null&&o.defaultValue!==h&&(o.defaultValue=h)),g!=null&&(o.defaultValue=""+g)}function Ae(o){var c=o.textContent;c===o._wrapperState.initialValue&&c!==""&&c!==null&&(o.value=c)}function Ke(o){switch(o){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function wt(o,c){return o==null||o==="http://www.w3.org/1999/xhtml"?Ke(c):o==="http://www.w3.org/2000/svg"&&c==="foreignObject"?"http://www.w3.org/1999/xhtml":o}var vt,We=(function(o){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(c,h,g,j){MSApp.execUnsafeLocalFunction(function(){return o(c,h,g,j)})}:o})(function(o,c){if(o.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in o)o.innerHTML=c;else{for(vt=vt||document.createElement("div"),vt.innerHTML="<svg>"+c.valueOf().toString()+"</svg>",c=vt.firstChild;o.firstChild;)o.removeChild(o.firstChild);for(;c.firstChild;)o.appendChild(c.firstChild)}});function Oe(o,c){if(c){var h=o.firstChild;if(h&&h===o.lastChild&&h.nodeType===3){h.nodeValue=c;return}}o.textContent=c}var dt={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Qt=["Webkit","ms","Moz","O"];Object.keys(dt).forEach(function(o){Qt.forEach(function(c){c=c+o.charAt(0).toUpperCase()+o.substring(1),dt[c]=dt[o]})});function Dt(o,c,h){return c==null||typeof c=="boolean"||c===""?"":h||typeof c!="number"||c===0||dt.hasOwnProperty(o)&&dt[o]?(""+c).trim():c+"px"}function ze(o,c){o=o.style;for(var h in c)if(c.hasOwnProperty(h)){var g=h.indexOf("--")===0,j=Dt(h,c[h],g);h==="float"&&(h="cssFloat"),g?o.setProperty(h,j):o[h]=j}}var Ye=le({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function it(o,c){if(c){if(Ye[o]&&(c.children!=null||c.dangerouslySetInnerHTML!=null))throw Error(r(137,o));if(c.dangerouslySetInnerHTML!=null){if(c.children!=null)throw Error(r(60));if(typeof c.dangerouslySetInnerHTML!="object"||!("__html"in c.dangerouslySetInnerHTML))throw Error(r(61))}if(c.style!=null&&typeof c.style!="object")throw Error(r(62))}}function bt(o,c){if(o.indexOf("-")===-1)return typeof c.is=="string";switch(o){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var jt=null;function Yt(o){return o=o.target||o.srcElement||window,o.correspondingUseElement&&(o=o.correspondingUseElement),o.nodeType===3?o.parentNode:o}var Jt=null,rr=null,or=null;function ur(o){if(o=$u(o)){if(typeof Jt!="function")throw Error(r(280));var c=o.stateNode;c&&(c=pf(c),Jt(o.stateNode,o.type,c))}}function Nt(o){rr?or?or.push(o):or=[o]:rr=o}function Kt(){if(rr){var o=rr,c=or;if(or=rr=null,ur(o),c)for(o=0;o<c.length;o++)ur(c[o])}}function nr(o,c){return o(c)}function mr(){}var Ur=!1;function Sr(o,c,h){if(Ur)return o(c,h);Ur=!0;try{return nr(o,c,h)}finally{Ur=!1,(rr!==null||or!==null)&&(mr(),Kt())}}function jr(o,c){var h=o.stateNode;if(h===null)return null;var g=pf(h);if(g===null)return null;h=g[c];e:switch(c){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(g=!g.disabled)||(o=o.type,g=!(o==="button"||o==="input"||o==="select"||o==="textarea")),o=!g;break e;default:o=!1}if(o)return null;if(h&&typeof h!="function")throw Error(r(231,c,typeof h));return h}var sn=!1;if(u)try{var Vn={};Object.defineProperty(Vn,"passive",{get:function(){sn=!0}}),window.addEventListener("test",Vn,Vn),window.removeEventListener("test",Vn,Vn)}catch{sn=!1}function wn(o,c,h,g,j,S,E,z,J){var xe=Array.prototype.slice.call(arguments,3);try{c.apply(h,xe)}catch(Me){this.onError(Me)}}var fr=!1,pr=null,Pr=!1,bn=null,as={onError:function(o){fr=!0,pr=o}};function Rr(o,c,h,g,j,S,E,z,J){fr=!1,pr=null,wn.apply(as,arguments)}function is(o,c,h,g,j,S,E,z,J){if(Rr.apply(this,arguments),fr){if(fr){var xe=pr;fr=!1,pr=null}else throw Error(r(198));Pr||(Pr=!0,bn=xe)}}function an(o){var c=o,h=o;if(o.alternate)for(;c.return;)c=c.return;else{o=c;do c=o,(c.flags&4098)!==0&&(h=c.return),o=c.return;while(o)}return c.tag===3?h:null}function bs(o){if(o.tag===13){var c=o.memoizedState;if(c===null&&(o=o.alternate,o!==null&&(c=o.memoizedState)),c!==null)return c.dehydrated}return null}function os(o){if(an(o)!==o)throw Error(r(188))}function js(o){var c=o.alternate;if(!c){if(c=an(o),c===null)throw Error(r(188));return c!==o?null:o}for(var h=o,g=c;;){var j=h.return;if(j===null)break;var S=j.alternate;if(S===null){if(g=j.return,g!==null){h=g;continue}break}if(j.child===S.child){for(S=j.child;S;){if(S===h)return os(j),o;if(S===g)return os(j),c;S=S.sibling}throw Error(r(188))}if(h.return!==g.return)h=j,g=S;else{for(var E=!1,z=j.child;z;){if(z===h){E=!0,h=j,g=S;break}if(z===g){E=!0,g=j,h=S;break}z=z.sibling}if(!E){for(z=S.child;z;){if(z===h){E=!0,h=S,g=j;break}if(z===g){E=!0,g=S,h=j;break}z=z.sibling}if(!E)throw Error(r(189))}}if(h.alternate!==g)throw Error(r(190))}if(h.tag!==3)throw Error(r(188));return h.stateNode.current===h?o:c}function qn(o){return o=js(o),o!==null?vr(o):null}function vr(o){if(o.tag===5||o.tag===6)return o;for(o=o.child;o!==null;){var c=vr(o);if(c!==null)return c;o=o.sibling}return null}var Ts=t.unstable_scheduleCallback,Hn=t.unstable_cancelCallback,ks=t.unstable_shouldYield,Kn=t.unstable_requestPaint,tr=t.unstable_now,Tn=t.unstable_getCurrentPriorityLevel,Ar=t.unstable_ImmediatePriority,ls=t.unstable_UserBlockingPriority,hn=t.unstable_NormalPriority,cs=t.unstable_LowPriority,Ws=t.unstable_IdlePriority,Br=null,_r=null;function X(o){if(_r&&typeof _r.onCommitFiberRoot=="function")try{_r.onCommitFiberRoot(Br,o,void 0,(o.current.flags&128)===128)}catch{}}var ye=Math.clz32?Math.clz32:rt,Fe=Math.log,Ce=Math.LN2;function rt(o){return o>>>=0,o===0?32:31-(Fe(o)/Ce|0)|0}var Le=64,I=4194304;function ae(o){switch(o&-o){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return o&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return o}}function Q(o,c){var h=o.pendingLanes;if(h===0)return 0;var g=0,j=o.suspendedLanes,S=o.pingedLanes,E=h&268435455;if(E!==0){var z=E&~j;z!==0?g=ae(z):(S&=E,S!==0&&(g=ae(S)))}else E=h&~j,E!==0?g=ae(E):S!==0&&(g=ae(S));if(g===0)return 0;if(c!==0&&c!==g&&(c&j)===0&&(j=g&-g,S=c&-c,j>=S||j===16&&(S&4194240)!==0))return c;if((g&4)!==0&&(g|=h&16),c=o.entangledLanes,c!==0)for(o=o.entanglements,c&=g;0<c;)h=31-ye(c),j=1<<h,g|=o[h],c&=~j;return g}function Z(o,c){switch(o){case 1:case 2:case 4:return c+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return c+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Ie(o,c){for(var h=o.suspendedLanes,g=o.pingedLanes,j=o.expirationTimes,S=o.pendingLanes;0<S;){var E=31-ye(S),z=1<<E,J=j[E];J===-1?((z&h)===0||(z&g)!==0)&&(j[E]=Z(z,c)):J<=c&&(o.expiredLanes|=z),S&=~z}}function Tt(o){return o=o.pendingLanes&-1073741825,o!==0?o:o&1073741824?1073741824:0}function dr(){var o=Le;return Le<<=1,(Le&4194240)===0&&(Le=64),o}function Ve(o){for(var c=[],h=0;31>h;h++)c.push(o);return c}function $t(o,c,h){o.pendingLanes|=c,c!==536870912&&(o.suspendedLanes=0,o.pingedLanes=0),o=o.eventTimes,c=31-ye(c),o[c]=h}function Pt(o,c){var h=o.pendingLanes&~c;o.pendingLanes=c,o.suspendedLanes=0,o.pingedLanes=0,o.expiredLanes&=c,o.mutableReadLanes&=c,o.entangledLanes&=c,c=o.entanglements;var g=o.eventTimes;for(o=o.expirationTimes;0<h;){var j=31-ye(h),S=1<<j;c[j]=0,g[j]=-1,o[j]=-1,h&=~S}}function sr(o,c){var h=o.entangledLanes|=c;for(o=o.entanglements;h;){var g=31-ye(h),j=1<<g;j&c|o[g]&c&&(o[g]|=c),h&=~j}}var ct=0;function hr(o){return o&=-o,1<o?4<o?(o&268435455)!==0?16:536870912:4:1}var ar,Zt,Gt,jn,kr,on=!1,Nr=[],Or=null,Gn=null,Ss=null,Dr=new Map,In=new Map,Jr=[],kn="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function us(o,c){switch(o){case"focusin":case"focusout":Or=null;break;case"dragenter":case"dragleave":Gn=null;break;case"mouseover":case"mouseout":Ss=null;break;case"pointerover":case"pointerout":Dr.delete(c.pointerId);break;case"gotpointercapture":case"lostpointercapture":In.delete(c.pointerId)}}function Vs(o,c,h,g,j,S){return o===null||o.nativeEvent!==S?(o={blockedOn:c,domEventName:h,eventSystemFlags:g,nativeEvent:S,targetContainers:[j]},c!==null&&(c=$u(c),c!==null&&Zt(c)),o):(o.eventSystemFlags|=g,c=o.targetContainers,j!==null&&c.indexOf(j)===-1&&c.push(j),o)}function vo(o,c,h,g,j){switch(c){case"focusin":return Or=Vs(Or,o,c,h,g,j),!0;case"dragenter":return Gn=Vs(Gn,o,c,h,g,j),!0;case"mouseover":return Ss=Vs(Ss,o,c,h,g,j),!0;case"pointerover":var S=j.pointerId;return Dr.set(S,Vs(Dr.get(S)||null,o,c,h,g,j)),!0;case"gotpointercapture":return S=j.pointerId,In.set(S,Vs(In.get(S)||null,o,c,h,g,j)),!0}return!1}function ol(o){var c=ll(o.target);if(c!==null){var h=an(c);if(h!==null){if(c=h.tag,c===13){if(c=bs(h),c!==null){o.blockedOn=c,kr(o.priority,function(){Gt(h)});return}}else if(c===3&&h.stateNode.current.memoizedState.isDehydrated){o.blockedOn=h.tag===3?h.stateNode.containerInfo:null;return}}}o.blockedOn=null}function ci(o){if(o.blockedOn!==null)return!1;for(var c=o.targetContainers;0<c.length;){var h=fi(o.domEventName,o.eventSystemFlags,c[0],o.nativeEvent);if(h===null){h=o.nativeEvent;var g=new h.constructor(h.type,h);jt=g,h.target.dispatchEvent(g),jt=null}else return c=$u(h),c!==null&&Zt(c),o.blockedOn=h,!1;c.shift()}return!0}function xo(o,c,h){ci(o)&&h.delete(c)}function ui(){on=!1,Or!==null&&ci(Or)&&(Or=null),Gn!==null&&ci(Gn)&&(Gn=null),Ss!==null&&ci(Ss)&&(Ss=null),Dr.forEach(xo),In.forEach(xo)}function di(o,c){o.blockedOn===c&&(o.blockedOn=null,on||(on=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,ui)))}function wa(o){function c(j){return di(j,o)}if(0<Nr.length){di(Nr[0],o);for(var h=1;h<Nr.length;h++){var g=Nr[h];g.blockedOn===o&&(g.blockedOn=null)}}for(Or!==null&&di(Or,o),Gn!==null&&di(Gn,o),Ss!==null&&di(Ss,o),Dr.forEach(c),In.forEach(c),h=0;h<Jr.length;h++)g=Jr[h],g.blockedOn===o&&(g.blockedOn=null);for(;0<Jr.length&&(h=Jr[0],h.blockedOn===null);)ol(h),h.blockedOn===null&&Jr.shift()}var Is=T.ReactCurrentBatchConfig,ba=!0;function Su(o,c,h,g){var j=ct,S=Is.transition;Is.transition=null;try{ct=1,wo(o,c,h,g)}finally{ct=j,Is.transition=S}}function _u(o,c,h,g){var j=ct,S=Is.transition;Is.transition=null;try{ct=4,wo(o,c,h,g)}finally{ct=j,Is.transition=S}}function wo(o,c,h,g){if(ba){var j=fi(o,c,h,g);if(j===null)Vp(o,c,g,bo,h),us(o,g);else if(vo(j,o,c,h,g))g.stopPropagation();else if(us(o,g),c&4&&-1<kn.indexOf(o)){for(;j!==null;){var S=$u(j);if(S!==null&&ar(S),S=fi(o,c,h,g),S===null&&Vp(o,c,g,bo,h),S===j)break;j=S}j!==null&&g.stopPropagation()}else Vp(o,c,g,null,h)}}var bo=null;function fi(o,c,h,g){if(bo=null,o=Yt(g),o=ll(o),o!==null)if(c=an(o),c===null)o=null;else if(h=c.tag,h===13){if(o=bs(c),o!==null)return o;o=null}else if(h===3){if(c.stateNode.current.memoizedState.isDehydrated)return c.tag===3?c.stateNode.containerInfo:null;o=null}else c!==o&&(o=null);return bo=o,null}function $i(o){switch(o){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Tn()){case Ar:return 1;case ls:return 4;case hn:case cs:return 16;case Ws:return 536870912;default:return 16}default:return 16}}var _s=null,hi=null,Ds=null;function jo(){if(Ds)return Ds;var o,c=hi,h=c.length,g,j="value"in _s?_s.value:_s.textContent,S=j.length;for(o=0;o<h&&c[o]===j[o];o++);var E=h-o;for(g=1;g<=E&&c[h-g]===j[S-g];g++);return Ds=j.slice(o,1<g?1-g:void 0)}function Ri(o){var c=o.keyCode;return"charCode"in o?(o=o.charCode,o===0&&c===13&&(o=13)):o=c,o===10&&(o=13),32<=o||o===13?o:0}function $s(){return!0}function ko(){return!1}function ds(o){function c(h,g,j,S,E){this._reactName=h,this._targetInst=j,this.type=g,this.nativeEvent=S,this.target=E,this.currentTarget=null;for(var z in o)o.hasOwnProperty(z)&&(h=o[z],this[z]=h?h(S):S[z]);return this.isDefaultPrevented=(S.defaultPrevented!=null?S.defaultPrevented:S.returnValue===!1)?$s:ko,this.isPropagationStopped=ko,this}return le(c.prototype,{preventDefault:function(){this.defaultPrevented=!0;var h=this.nativeEvent;h&&(h.preventDefault?h.preventDefault():typeof h.returnValue!="unknown"&&(h.returnValue=!1),this.isDefaultPrevented=$s)},stopPropagation:function(){var h=this.nativeEvent;h&&(h.stopPropagation?h.stopPropagation():typeof h.cancelBubble!="unknown"&&(h.cancelBubble=!0),this.isPropagationStopped=$s)},persist:function(){},isPersistent:$s}),c}var fs={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(o){return o.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ja=ds(fs),ka=le({},fs,{view:0,detail:0}),D=ds(ka),re,de,Ne,Ge=le({},ka,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:pt,button:0,buttons:0,relatedTarget:function(o){return o.relatedTarget===void 0?o.fromElement===o.srcElement?o.toElement:o.fromElement:o.relatedTarget},movementX:function(o){return"movementX"in o?o.movementX:(o!==Ne&&(Ne&&o.type==="mousemove"?(re=o.screenX-Ne.screenX,de=o.screenY-Ne.screenY):de=re=0,Ne=o),re)},movementY:function(o){return"movementY"in o?o.movementY:de}}),Je=ds(Ge),be=le({},Ge,{dataTransfer:0}),pe=ds(be),st=le({},ka,{relatedTarget:0}),At=ds(st),ot=le({},fs,{animationName:0,elapsedTime:0,pseudoElement:0}),kt=ds(ot),Ot=le({},fs,{clipboardData:function(o){return"clipboardData"in o?o.clipboardData:window.clipboardData}}),Te=ds(Ot),Bt=le({},fs,{data:0}),et=ds(Bt),tt={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Ct={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},lt={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function qt(o){var c=this.nativeEvent;return c.getModifierState?c.getModifierState(o):(o=lt[o])?!!c[o]:!1}function pt(){return qt}var O=le({},ka,{key:function(o){if(o.key){var c=tt[o.key]||o.key;if(c!=="Unidentified")return c}return o.type==="keypress"?(o=Ri(o),o===13?"Enter":String.fromCharCode(o)):o.type==="keydown"||o.type==="keyup"?Ct[o.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:pt,charCode:function(o){return o.type==="keypress"?Ri(o):0},keyCode:function(o){return o.type==="keydown"||o.type==="keyup"?o.keyCode:0},which:function(o){return o.type==="keypress"?Ri(o):o.type==="keydown"||o.type==="keyup"?o.keyCode:0}}),fe=ds(O),_e=le({},Ge,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Ze=ds(_e),gt=le({},ka,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:pt}),ir=ds(gt),Wr=le({},fs,{propertyName:0,elapsedTime:0,pseudoElement:0}),na=ds(Wr),en=le({},Ge,{deltaX:function(o){return"deltaX"in o?o.deltaX:"wheelDeltaX"in o?-o.wheelDeltaX:0},deltaY:function(o){return"deltaY"in o?o.deltaY:"wheelDeltaY"in o?-o.wheelDeltaY:"wheelDelta"in o?-o.wheelDelta:0},deltaZ:0,deltaMode:0}),Sa=ds(en),Ip=[9,13,27,32],Dp=u&&"CompositionEvent"in window,Nu=null;u&&"documentMode"in document&&(Nu=document.documentMode);var Y4=u&&"TextEvent"in window&&!Nu,kb=u&&(!Dp||Nu&&8<Nu&&11>=Nu),Sb=" ",_b=!1;function Nb(o,c){switch(o){case"keyup":return Ip.indexOf(c.keyCode)!==-1;case"keydown":return c.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Cb(o){return o=o.detail,typeof o=="object"&&"data"in o?o.data:null}var ec=!1;function J4(o,c){switch(o){case"compositionend":return Cb(c);case"keypress":return c.which!==32?null:(_b=!0,Sb);case"textInput":return o=c.data,o===Sb&&_b?null:o;default:return null}}function X4(o,c){if(ec)return o==="compositionend"||!Dp&&Nb(o,c)?(o=jo(),Ds=hi=_s=null,ec=!1,o):null;switch(o){case"paste":return null;case"keypress":if(!(c.ctrlKey||c.altKey||c.metaKey)||c.ctrlKey&&c.altKey){if(c.char&&1<c.char.length)return c.char;if(c.which)return String.fromCharCode(c.which)}return null;case"compositionend":return kb&&c.locale!=="ko"?null:c.data;default:return null}}var Q4={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Eb(o){var c=o&&o.nodeName&&o.nodeName.toLowerCase();return c==="input"?!!Q4[o.type]:c==="textarea"}function Pb(o,c,h,g){Nt(g),c=ff(c,"onChange"),0<c.length&&(h=new ja("onChange","change",null,h,g),o.push({event:h,listeners:c}))}var Cu=null,Eu=null;function Z4(o){Kb(o,0)}function lf(o){var c=ac(o);if(se(c))return o}function eI(o,c){if(o==="change")return c}var Ab=!1;if(u){var $p;if(u){var Rp="oninput"in document;if(!Rp){var Ob=document.createElement("div");Ob.setAttribute("oninput","return;"),Rp=typeof Ob.oninput=="function"}$p=Rp}else $p=!1;Ab=$p&&(!document.documentMode||9<document.documentMode)}function Tb(){Cu&&(Cu.detachEvent("onpropertychange",Ib),Eu=Cu=null)}function Ib(o){if(o.propertyName==="value"&&lf(Eu)){var c=[];Pb(c,Eu,o,Yt(o)),Sr(Z4,c)}}function tI(o,c,h){o==="focusin"?(Tb(),Cu=c,Eu=h,Cu.attachEvent("onpropertychange",Ib)):o==="focusout"&&Tb()}function rI(o){if(o==="selectionchange"||o==="keyup"||o==="keydown")return lf(Eu)}function nI(o,c){if(o==="click")return lf(c)}function sI(o,c){if(o==="input"||o==="change")return lf(c)}function aI(o,c){return o===c&&(o!==0||1/o===1/c)||o!==o&&c!==c}var Wa=typeof Object.is=="function"?Object.is:aI;function Pu(o,c){if(Wa(o,c))return!0;if(typeof o!="object"||o===null||typeof c!="object"||c===null)return!1;var h=Object.keys(o),g=Object.keys(c);if(h.length!==g.length)return!1;for(g=0;g<h.length;g++){var j=h[g];if(!d.call(c,j)||!Wa(o[j],c[j]))return!1}return!0}function Db(o){for(;o&&o.firstChild;)o=o.firstChild;return o}function $b(o,c){var h=Db(o);o=0;for(var g;h;){if(h.nodeType===3){if(g=o+h.textContent.length,o<=c&&g>=c)return{node:h,offset:c-o};o=g}e:{for(;h;){if(h.nextSibling){h=h.nextSibling;break e}h=h.parentNode}h=void 0}h=Db(h)}}function Rb(o,c){return o&&c?o===c?!0:o&&o.nodeType===3?!1:c&&c.nodeType===3?Rb(o,c.parentNode):"contains"in o?o.contains(c):o.compareDocumentPosition?!!(o.compareDocumentPosition(c)&16):!1:!1}function Mb(){for(var o=window,c=Be();c instanceof o.HTMLIFrameElement;){try{var h=typeof c.contentWindow.location.href=="string"}catch{h=!1}if(h)o=c.contentWindow;else break;c=Be(o.document)}return c}function Mp(o){var c=o&&o.nodeName&&o.nodeName.toLowerCase();return c&&(c==="input"&&(o.type==="text"||o.type==="search"||o.type==="tel"||o.type==="url"||o.type==="password")||c==="textarea"||o.contentEditable==="true")}function iI(o){var c=Mb(),h=o.focusedElem,g=o.selectionRange;if(c!==h&&h&&h.ownerDocument&&Rb(h.ownerDocument.documentElement,h)){if(g!==null&&Mp(h)){if(c=g.start,o=g.end,o===void 0&&(o=c),"selectionStart"in h)h.selectionStart=c,h.selectionEnd=Math.min(o,h.value.length);else if(o=(c=h.ownerDocument||document)&&c.defaultView||window,o.getSelection){o=o.getSelection();var j=h.textContent.length,S=Math.min(g.start,j);g=g.end===void 0?S:Math.min(g.end,j),!o.extend&&S>g&&(j=g,g=S,S=j),j=$b(h,S);var E=$b(h,g);j&&E&&(o.rangeCount!==1||o.anchorNode!==j.node||o.anchorOffset!==j.offset||o.focusNode!==E.node||o.focusOffset!==E.offset)&&(c=c.createRange(),c.setStart(j.node,j.offset),o.removeAllRanges(),S>g?(o.addRange(c),o.extend(E.node,E.offset)):(c.setEnd(E.node,E.offset),o.addRange(c)))}}for(c=[],o=h;o=o.parentNode;)o.nodeType===1&&c.push({element:o,left:o.scrollLeft,top:o.scrollTop});for(typeof h.focus=="function"&&h.focus(),h=0;h<c.length;h++)o=c[h],o.element.scrollLeft=o.left,o.element.scrollTop=o.top}}var oI=u&&"documentMode"in document&&11>=document.documentMode,tc=null,Fp=null,Au=null,Lp=!1;function Fb(o,c,h){var g=h.window===h?h.document:h.nodeType===9?h:h.ownerDocument;Lp||tc==null||tc!==Be(g)||(g=tc,"selectionStart"in g&&Mp(g)?g={start:g.selectionStart,end:g.selectionEnd}:(g=(g.ownerDocument&&g.ownerDocument.defaultView||window).getSelection(),g={anchorNode:g.anchorNode,anchorOffset:g.anchorOffset,focusNode:g.focusNode,focusOffset:g.focusOffset}),Au&&Pu(Au,g)||(Au=g,g=ff(Fp,"onSelect"),0<g.length&&(c=new ja("onSelect","select",null,c,h),o.push({event:c,listeners:g}),c.target=tc)))}function cf(o,c){var h={};return h[o.toLowerCase()]=c.toLowerCase(),h["Webkit"+o]="webkit"+c,h["Moz"+o]="moz"+c,h}var rc={animationend:cf("Animation","AnimationEnd"),animationiteration:cf("Animation","AnimationIteration"),animationstart:cf("Animation","AnimationStart"),transitionend:cf("Transition","TransitionEnd")},zp={},Lb={};u&&(Lb=document.createElement("div").style,"AnimationEvent"in window||(delete rc.animationend.animation,delete rc.animationiteration.animation,delete rc.animationstart.animation),"TransitionEvent"in window||delete rc.transitionend.transition);function uf(o){if(zp[o])return zp[o];if(!rc[o])return o;var c=rc[o],h;for(h in c)if(c.hasOwnProperty(h)&&h in Lb)return zp[o]=c[h];return o}var zb=uf("animationend"),Ub=uf("animationiteration"),Bb=uf("animationstart"),Wb=uf("transitionend"),Vb=new Map,qb="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function So(o,c){Vb.set(o,c),a(c,[o])}for(var Up=0;Up<qb.length;Up++){var Bp=qb[Up],lI=Bp.toLowerCase(),cI=Bp[0].toUpperCase()+Bp.slice(1);So(lI,"on"+cI)}So(zb,"onAnimationEnd"),So(Ub,"onAnimationIteration"),So(Bb,"onAnimationStart"),So("dblclick","onDoubleClick"),So("focusin","onFocus"),So("focusout","onBlur"),So(Wb,"onTransitionEnd"),l("onMouseEnter",["mouseout","mouseover"]),l("onMouseLeave",["mouseout","mouseover"]),l("onPointerEnter",["pointerout","pointerover"]),l("onPointerLeave",["pointerout","pointerover"]),a("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),a("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),a("onBeforeInput",["compositionend","keypress","textInput","paste"]),a("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),a("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),a("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ou="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),uI=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ou));function Hb(o,c,h){var g=o.type||"unknown-event";o.currentTarget=h,is(g,c,void 0,o),o.currentTarget=null}function Kb(o,c){c=(c&4)!==0;for(var h=0;h<o.length;h++){var g=o[h],j=g.event;g=g.listeners;e:{var S=void 0;if(c)for(var E=g.length-1;0<=E;E--){var z=g[E],J=z.instance,xe=z.currentTarget;if(z=z.listener,J!==S&&j.isPropagationStopped())break e;Hb(j,z,xe),S=J}else for(E=0;E<g.length;E++){if(z=g[E],J=z.instance,xe=z.currentTarget,z=z.listener,J!==S&&j.isPropagationStopped())break e;Hb(j,z,xe),S=J}}}if(Pr)throw o=bn,Pr=!1,bn=null,o}function Vr(o,c){var h=c[Jp];h===void 0&&(h=c[Jp]=new Set);var g=o+"__bubble";h.has(g)||(Gb(c,o,2,!1),h.add(g))}function Wp(o,c,h){var g=0;c&&(g|=4),Gb(h,o,g,c)}var df="_reactListening"+Math.random().toString(36).slice(2);function Tu(o){if(!o[df]){o[df]=!0,n.forEach(function(h){h!=="selectionchange"&&(uI.has(h)||Wp(h,!1,o),Wp(h,!0,o))});var c=o.nodeType===9?o:o.ownerDocument;c===null||c[df]||(c[df]=!0,Wp("selectionchange",!1,c))}}function Gb(o,c,h,g){switch($i(c)){case 1:var j=Su;break;case 4:j=_u;break;default:j=wo}h=j.bind(null,c,h,o),j=void 0,!sn||c!=="touchstart"&&c!=="touchmove"&&c!=="wheel"||(j=!0),g?j!==void 0?o.addEventListener(c,h,{capture:!0,passive:j}):o.addEventListener(c,h,!0):j!==void 0?o.addEventListener(c,h,{passive:j}):o.addEventListener(c,h,!1)}function Vp(o,c,h,g,j){var S=g;if((c&1)===0&&(c&2)===0&&g!==null)e:for(;;){if(g===null)return;var E=g.tag;if(E===3||E===4){var z=g.stateNode.containerInfo;if(z===j||z.nodeType===8&&z.parentNode===j)break;if(E===4)for(E=g.return;E!==null;){var J=E.tag;if((J===3||J===4)&&(J=E.stateNode.containerInfo,J===j||J.nodeType===8&&J.parentNode===j))return;E=E.return}for(;z!==null;){if(E=ll(z),E===null)return;if(J=E.tag,J===5||J===6){g=S=E;continue e}z=z.parentNode}}g=g.return}Sr(function(){var xe=S,Me=Yt(h),Ue=[];e:{var Re=Vb.get(o);if(Re!==void 0){var ut=ja,yt=o;switch(o){case"keypress":if(Ri(h)===0)break e;case"keydown":case"keyup":ut=fe;break;case"focusin":yt="focus",ut=At;break;case"focusout":yt="blur",ut=At;break;case"beforeblur":case"afterblur":ut=At;break;case"click":if(h.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ut=Je;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ut=pe;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ut=ir;break;case zb:case Ub:case Bb:ut=kt;break;case Wb:ut=na;break;case"scroll":ut=D;break;case"wheel":ut=Sa;break;case"copy":case"cut":case"paste":ut=Te;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ut=Ze}var xt=(c&4)!==0,mn=!xt&&o==="scroll",ue=xt?Re!==null?Re+"Capture":null:Re;xt=[];for(var ee=xe,me;ee!==null;){me=ee;var qe=me.stateNode;if(me.tag===5&&qe!==null&&(me=qe,ue!==null&&(qe=jr(ee,ue),qe!=null&&xt.push(Iu(ee,qe,me)))),mn)break;ee=ee.return}0<xt.length&&(Re=new ut(Re,yt,null,h,Me),Ue.push({event:Re,listeners:xt}))}}if((c&7)===0){e:{if(Re=o==="mouseover"||o==="pointerover",ut=o==="mouseout"||o==="pointerout",Re&&h!==jt&&(yt=h.relatedTarget||h.fromElement)&&(ll(yt)||yt[Mi]))break e;if((ut||Re)&&(Re=Me.window===Me?Me:(Re=Me.ownerDocument)?Re.defaultView||Re.parentWindow:window,ut?(yt=h.relatedTarget||h.toElement,ut=xe,yt=yt?ll(yt):null,yt!==null&&(mn=an(yt),yt!==mn||yt.tag!==5&&yt.tag!==6)&&(yt=null)):(ut=null,yt=xe),ut!==yt)){if(xt=Je,qe="onMouseLeave",ue="onMouseEnter",ee="mouse",(o==="pointerout"||o==="pointerover")&&(xt=Ze,qe="onPointerLeave",ue="onPointerEnter",ee="pointer"),mn=ut==null?Re:ac(ut),me=yt==null?Re:ac(yt),Re=new xt(qe,ee+"leave",ut,h,Me),Re.target=mn,Re.relatedTarget=me,qe=null,ll(Me)===xe&&(xt=new xt(ue,ee+"enter",yt,h,Me),xt.target=me,xt.relatedTarget=mn,qe=xt),mn=qe,ut&&yt)t:{for(xt=ut,ue=yt,ee=0,me=xt;me;me=nc(me))ee++;for(me=0,qe=ue;qe;qe=nc(qe))me++;for(;0<ee-me;)xt=nc(xt),ee--;for(;0<me-ee;)ue=nc(ue),me--;for(;ee--;){if(xt===ue||ue!==null&&xt===ue.alternate)break t;xt=nc(xt),ue=nc(ue)}xt=null}else xt=null;ut!==null&&Yb(Ue,Re,ut,xt,!1),yt!==null&&mn!==null&&Yb(Ue,mn,yt,xt,!0)}}e:{if(Re=xe?ac(xe):window,ut=Re.nodeName&&Re.nodeName.toLowerCase(),ut==="select"||ut==="input"&&Re.type==="file")var St=eI;else if(Eb(Re))if(Ab)St=sI;else{St=rI;var Mt=tI}else(ut=Re.nodeName)&&ut.toLowerCase()==="input"&&(Re.type==="checkbox"||Re.type==="radio")&&(St=nI);if(St&&(St=St(o,xe))){Pb(Ue,St,h,Me);break e}Mt&&Mt(o,Re,xe),o==="focusout"&&(Mt=Re._wrapperState)&&Mt.controlled&&Re.type==="number"&&Vt(Re,"number",Re.value)}switch(Mt=xe?ac(xe):window,o){case"focusin":(Eb(Mt)||Mt.contentEditable==="true")&&(tc=Mt,Fp=xe,Au=null);break;case"focusout":Au=Fp=tc=null;break;case"mousedown":Lp=!0;break;case"contextmenu":case"mouseup":case"dragend":Lp=!1,Fb(Ue,h,Me);break;case"selectionchange":if(oI)break;case"keydown":case"keyup":Fb(Ue,h,Me)}var Ft;if(Dp)e:{switch(o){case"compositionstart":var Ht="onCompositionStart";break e;case"compositionend":Ht="onCompositionEnd";break e;case"compositionupdate":Ht="onCompositionUpdate";break e}Ht=void 0}else ec?Nb(o,h)&&(Ht="onCompositionEnd"):o==="keydown"&&h.keyCode===229&&(Ht="onCompositionStart");Ht&&(kb&&h.locale!=="ko"&&(ec||Ht!=="onCompositionStart"?Ht==="onCompositionEnd"&&ec&&(Ft=jo()):(_s=Me,hi="value"in _s?_s.value:_s.textContent,ec=!0)),Mt=ff(xe,Ht),0<Mt.length&&(Ht=new et(Ht,o,null,h,Me),Ue.push({event:Ht,listeners:Mt}),Ft?Ht.data=Ft:(Ft=Cb(h),Ft!==null&&(Ht.data=Ft)))),(Ft=Y4?J4(o,h):X4(o,h))&&(xe=ff(xe,"onBeforeInput"),0<xe.length&&(Me=new et("onBeforeInput","beforeinput",null,h,Me),Ue.push({event:Me,listeners:xe}),Me.data=Ft))}Kb(Ue,c)})}function Iu(o,c,h){return{instance:o,listener:c,currentTarget:h}}function ff(o,c){for(var h=c+"Capture",g=[];o!==null;){var j=o,S=j.stateNode;j.tag===5&&S!==null&&(j=S,S=jr(o,h),S!=null&&g.unshift(Iu(o,S,j)),S=jr(o,c),S!=null&&g.push(Iu(o,S,j))),o=o.return}return g}function nc(o){if(o===null)return null;do o=o.return;while(o&&o.tag!==5);return o||null}function Yb(o,c,h,g,j){for(var S=c._reactName,E=[];h!==null&&h!==g;){var z=h,J=z.alternate,xe=z.stateNode;if(J!==null&&J===g)break;z.tag===5&&xe!==null&&(z=xe,j?(J=jr(h,S),J!=null&&E.unshift(Iu(h,J,z))):j||(J=jr(h,S),J!=null&&E.push(Iu(h,J,z)))),h=h.return}E.length!==0&&o.push({event:c,listeners:E})}var dI=/\r\n?/g,fI=/\u0000|\uFFFD/g;function Jb(o){return(typeof o=="string"?o:""+o).replace(dI,`
`).replace(fI,"")}function hf(o,c,h){if(c=Jb(c),Jb(o)!==c&&h)throw Error(r(425))}function mf(){}var qp=null,Hp=null;function Kp(o,c){return o==="textarea"||o==="noscript"||typeof c.children=="string"||typeof c.children=="number"||typeof c.dangerouslySetInnerHTML=="object"&&c.dangerouslySetInnerHTML!==null&&c.dangerouslySetInnerHTML.__html!=null}var Gp=typeof setTimeout=="function"?setTimeout:void 0,hI=typeof clearTimeout=="function"?clearTimeout:void 0,Xb=typeof Promise=="function"?Promise:void 0,mI=typeof queueMicrotask=="function"?queueMicrotask:typeof Xb<"u"?function(o){return Xb.resolve(null).then(o).catch(pI)}:Gp;function pI(o){setTimeout(function(){throw o})}function Yp(o,c){var h=c,g=0;do{var j=h.nextSibling;if(o.removeChild(h),j&&j.nodeType===8)if(h=j.data,h==="/$"){if(g===0){o.removeChild(j),wa(c);return}g--}else h!=="$"&&h!=="$?"&&h!=="$!"||g++;h=j}while(h);wa(c)}function _o(o){for(;o!=null;o=o.nextSibling){var c=o.nodeType;if(c===1||c===3)break;if(c===8){if(c=o.data,c==="$"||c==="$!"||c==="$?")break;if(c==="/$")return null}}return o}function Qb(o){o=o.previousSibling;for(var c=0;o;){if(o.nodeType===8){var h=o.data;if(h==="$"||h==="$!"||h==="$?"){if(c===0)return o;c--}else h==="/$"&&c++}o=o.previousSibling}return null}var sc=Math.random().toString(36).slice(2),mi="__reactFiber$"+sc,Du="__reactProps$"+sc,Mi="__reactContainer$"+sc,Jp="__reactEvents$"+sc,gI="__reactListeners$"+sc,yI="__reactHandles$"+sc;function ll(o){var c=o[mi];if(c)return c;for(var h=o.parentNode;h;){if(c=h[Mi]||h[mi]){if(h=c.alternate,c.child!==null||h!==null&&h.child!==null)for(o=Qb(o);o!==null;){if(h=o[mi])return h;o=Qb(o)}return c}o=h,h=o.parentNode}return null}function $u(o){return o=o[mi]||o[Mi],!o||o.tag!==5&&o.tag!==6&&o.tag!==13&&o.tag!==3?null:o}function ac(o){if(o.tag===5||o.tag===6)return o.stateNode;throw Error(r(33))}function pf(o){return o[Du]||null}var Xp=[],ic=-1;function No(o){return{current:o}}function qr(o){0>ic||(o.current=Xp[ic],Xp[ic]=null,ic--)}function Mr(o,c){ic++,Xp[ic]=o.current,o.current=c}var Co={},Ns=No(Co),qs=No(!1),cl=Co;function oc(o,c){var h=o.type.contextTypes;if(!h)return Co;var g=o.stateNode;if(g&&g.__reactInternalMemoizedUnmaskedChildContext===c)return g.__reactInternalMemoizedMaskedChildContext;var j={},S;for(S in h)j[S]=c[S];return g&&(o=o.stateNode,o.__reactInternalMemoizedUnmaskedChildContext=c,o.__reactInternalMemoizedMaskedChildContext=j),j}function Hs(o){return o=o.childContextTypes,o!=null}function gf(){qr(qs),qr(Ns)}function Zb(o,c,h){if(Ns.current!==Co)throw Error(r(168));Mr(Ns,c),Mr(qs,h)}function e1(o,c,h){var g=o.stateNode;if(c=c.childContextTypes,typeof g.getChildContext!="function")return h;g=g.getChildContext();for(var j in g)if(!(j in c))throw Error(r(108,De(o)||"Unknown",j));return le({},h,g)}function yf(o){return o=(o=o.stateNode)&&o.__reactInternalMemoizedMergedChildContext||Co,cl=Ns.current,Mr(Ns,o),Mr(qs,qs.current),!0}function t1(o,c,h){var g=o.stateNode;if(!g)throw Error(r(169));h?(o=e1(o,c,cl),g.__reactInternalMemoizedMergedChildContext=o,qr(qs),qr(Ns),Mr(Ns,o)):qr(qs),Mr(qs,h)}var Fi=null,vf=!1,Qp=!1;function r1(o){Fi===null?Fi=[o]:Fi.push(o)}function vI(o){vf=!0,r1(o)}function Eo(){if(!Qp&&Fi!==null){Qp=!0;var o=0,c=ct;try{var h=Fi;for(ct=1;o<h.length;o++){var g=h[o];do g=g(!0);while(g!==null)}Fi=null,vf=!1}catch(j){throw Fi!==null&&(Fi=Fi.slice(o+1)),Ts(Ar,Eo),j}finally{ct=c,Qp=!1}}return null}var lc=[],cc=0,xf=null,wf=0,_a=[],Na=0,ul=null,Li=1,zi="";function dl(o,c){lc[cc++]=wf,lc[cc++]=xf,xf=o,wf=c}function n1(o,c,h){_a[Na++]=Li,_a[Na++]=zi,_a[Na++]=ul,ul=o;var g=Li;o=zi;var j=32-ye(g)-1;g&=~(1<<j),h+=1;var S=32-ye(c)+j;if(30<S){var E=j-j%5;S=(g&(1<<E)-1).toString(32),g>>=E,j-=E,Li=1<<32-ye(c)+j|h<<j|g,zi=S+o}else Li=1<<S|h<<j|g,zi=o}function Zp(o){o.return!==null&&(dl(o,1),n1(o,1,0))}function eg(o){for(;o===xf;)xf=lc[--cc],lc[cc]=null,wf=lc[--cc],lc[cc]=null;for(;o===ul;)ul=_a[--Na],_a[Na]=null,zi=_a[--Na],_a[Na]=null,Li=_a[--Na],_a[Na]=null}var sa=null,aa=null,Xr=!1,Va=null;function s1(o,c){var h=Aa(5,null,null,0);h.elementType="DELETED",h.stateNode=c,h.return=o,c=o.deletions,c===null?(o.deletions=[h],o.flags|=16):c.push(h)}function a1(o,c){switch(o.tag){case 5:var h=o.type;return c=c.nodeType!==1||h.toLowerCase()!==c.nodeName.toLowerCase()?null:c,c!==null?(o.stateNode=c,sa=o,aa=_o(c.firstChild),!0):!1;case 6:return c=o.pendingProps===""||c.nodeType!==3?null:c,c!==null?(o.stateNode=c,sa=o,aa=null,!0):!1;case 13:return c=c.nodeType!==8?null:c,c!==null?(h=ul!==null?{id:Li,overflow:zi}:null,o.memoizedState={dehydrated:c,treeContext:h,retryLane:1073741824},h=Aa(18,null,null,0),h.stateNode=c,h.return=o,o.child=h,sa=o,aa=null,!0):!1;default:return!1}}function tg(o){return(o.mode&1)!==0&&(o.flags&128)===0}function rg(o){if(Xr){var c=aa;if(c){var h=c;if(!a1(o,c)){if(tg(o))throw Error(r(418));c=_o(h.nextSibling);var g=sa;c&&a1(o,c)?s1(g,h):(o.flags=o.flags&-4097|2,Xr=!1,sa=o)}}else{if(tg(o))throw Error(r(418));o.flags=o.flags&-4097|2,Xr=!1,sa=o}}}function i1(o){for(o=o.return;o!==null&&o.tag!==5&&o.tag!==3&&o.tag!==13;)o=o.return;sa=o}function bf(o){if(o!==sa)return!1;if(!Xr)return i1(o),Xr=!0,!1;var c;if((c=o.tag!==3)&&!(c=o.tag!==5)&&(c=o.type,c=c!=="head"&&c!=="body"&&!Kp(o.type,o.memoizedProps)),c&&(c=aa)){if(tg(o))throw o1(),Error(r(418));for(;c;)s1(o,c),c=_o(c.nextSibling)}if(i1(o),o.tag===13){if(o=o.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(r(317));e:{for(o=o.nextSibling,c=0;o;){if(o.nodeType===8){var h=o.data;if(h==="/$"){if(c===0){aa=_o(o.nextSibling);break e}c--}else h!=="$"&&h!=="$!"&&h!=="$?"||c++}o=o.nextSibling}aa=null}}else aa=sa?_o(o.stateNode.nextSibling):null;return!0}function o1(){for(var o=aa;o;)o=_o(o.nextSibling)}function uc(){aa=sa=null,Xr=!1}function ng(o){Va===null?Va=[o]:Va.push(o)}var xI=T.ReactCurrentBatchConfig;function Ru(o,c,h){if(o=h.ref,o!==null&&typeof o!="function"&&typeof o!="object"){if(h._owner){if(h=h._owner,h){if(h.tag!==1)throw Error(r(309));var g=h.stateNode}if(!g)throw Error(r(147,o));var j=g,S=""+o;return c!==null&&c.ref!==null&&typeof c.ref=="function"&&c.ref._stringRef===S?c.ref:(c=function(E){var z=j.refs;E===null?delete z[S]:z[S]=E},c._stringRef=S,c)}if(typeof o!="string")throw Error(r(284));if(!h._owner)throw Error(r(290,o))}return o}function jf(o,c){throw o=Object.prototype.toString.call(c),Error(r(31,o==="[object Object]"?"object with keys {"+Object.keys(c).join(", ")+"}":o))}function l1(o){var c=o._init;return c(o._payload)}function c1(o){function c(ue,ee){if(o){var me=ue.deletions;me===null?(ue.deletions=[ee],ue.flags|=16):me.push(ee)}}function h(ue,ee){if(!o)return null;for(;ee!==null;)c(ue,ee),ee=ee.sibling;return null}function g(ue,ee){for(ue=new Map;ee!==null;)ee.key!==null?ue.set(ee.key,ee):ue.set(ee.index,ee),ee=ee.sibling;return ue}function j(ue,ee){return ue=Ro(ue,ee),ue.index=0,ue.sibling=null,ue}function S(ue,ee,me){return ue.index=me,o?(me=ue.alternate,me!==null?(me=me.index,me<ee?(ue.flags|=2,ee):me):(ue.flags|=2,ee)):(ue.flags|=1048576,ee)}function E(ue){return o&&ue.alternate===null&&(ue.flags|=2),ue}function z(ue,ee,me,qe){return ee===null||ee.tag!==6?(ee=Gg(me,ue.mode,qe),ee.return=ue,ee):(ee=j(ee,me),ee.return=ue,ee)}function J(ue,ee,me,qe){var St=me.type;return St===M?Me(ue,ee,me.props.children,qe,me.key):ee!==null&&(ee.elementType===St||typeof St=="object"&&St!==null&&St.$$typeof===ve&&l1(St)===ee.type)?(qe=j(ee,me.props),qe.ref=Ru(ue,ee,me),qe.return=ue,qe):(qe=Hf(me.type,me.key,me.props,null,ue.mode,qe),qe.ref=Ru(ue,ee,me),qe.return=ue,qe)}function xe(ue,ee,me,qe){return ee===null||ee.tag!==4||ee.stateNode.containerInfo!==me.containerInfo||ee.stateNode.implementation!==me.implementation?(ee=Yg(me,ue.mode,qe),ee.return=ue,ee):(ee=j(ee,me.children||[]),ee.return=ue,ee)}function Me(ue,ee,me,qe,St){return ee===null||ee.tag!==7?(ee=xl(me,ue.mode,qe,St),ee.return=ue,ee):(ee=j(ee,me),ee.return=ue,ee)}function Ue(ue,ee,me){if(typeof ee=="string"&&ee!==""||typeof ee=="number")return ee=Gg(""+ee,ue.mode,me),ee.return=ue,ee;if(typeof ee=="object"&&ee!==null){switch(ee.$$typeof){case P:return me=Hf(ee.type,ee.key,ee.props,null,ue.mode,me),me.ref=Ru(ue,null,ee),me.return=ue,me;case A:return ee=Yg(ee,ue.mode,me),ee.return=ue,ee;case ve:var qe=ee._init;return Ue(ue,qe(ee._payload),me)}if(F(ee)||ce(ee))return ee=xl(ee,ue.mode,me,null),ee.return=ue,ee;jf(ue,ee)}return null}function Re(ue,ee,me,qe){var St=ee!==null?ee.key:null;if(typeof me=="string"&&me!==""||typeof me=="number")return St!==null?null:z(ue,ee,""+me,qe);if(typeof me=="object"&&me!==null){switch(me.$$typeof){case P:return me.key===St?J(ue,ee,me,qe):null;case A:return me.key===St?xe(ue,ee,me,qe):null;case ve:return St=me._init,Re(ue,ee,St(me._payload),qe)}if(F(me)||ce(me))return St!==null?null:Me(ue,ee,me,qe,null);jf(ue,me)}return null}function ut(ue,ee,me,qe,St){if(typeof qe=="string"&&qe!==""||typeof qe=="number")return ue=ue.get(me)||null,z(ee,ue,""+qe,St);if(typeof qe=="object"&&qe!==null){switch(qe.$$typeof){case P:return ue=ue.get(qe.key===null?me:qe.key)||null,J(ee,ue,qe,St);case A:return ue=ue.get(qe.key===null?me:qe.key)||null,xe(ee,ue,qe,St);case ve:var Mt=qe._init;return ut(ue,ee,me,Mt(qe._payload),St)}if(F(qe)||ce(qe))return ue=ue.get(me)||null,Me(ee,ue,qe,St,null);jf(ee,qe)}return null}function yt(ue,ee,me,qe){for(var St=null,Mt=null,Ft=ee,Ht=ee=0,Xn=null;Ft!==null&&Ht<me.length;Ht++){Ft.index>Ht?(Xn=Ft,Ft=null):Xn=Ft.sibling;var xr=Re(ue,Ft,me[Ht],qe);if(xr===null){Ft===null&&(Ft=Xn);break}o&&Ft&&xr.alternate===null&&c(ue,Ft),ee=S(xr,ee,Ht),Mt===null?St=xr:Mt.sibling=xr,Mt=xr,Ft=Xn}if(Ht===me.length)return h(ue,Ft),Xr&&dl(ue,Ht),St;if(Ft===null){for(;Ht<me.length;Ht++)Ft=Ue(ue,me[Ht],qe),Ft!==null&&(ee=S(Ft,ee,Ht),Mt===null?St=Ft:Mt.sibling=Ft,Mt=Ft);return Xr&&dl(ue,Ht),St}for(Ft=g(ue,Ft);Ht<me.length;Ht++)Xn=ut(Ft,ue,Ht,me[Ht],qe),Xn!==null&&(o&&Xn.alternate!==null&&Ft.delete(Xn.key===null?Ht:Xn.key),ee=S(Xn,ee,Ht),Mt===null?St=Xn:Mt.sibling=Xn,Mt=Xn);return o&&Ft.forEach(function(Mo){return c(ue,Mo)}),Xr&&dl(ue,Ht),St}function xt(ue,ee,me,qe){var St=ce(me);if(typeof St!="function")throw Error(r(150));if(me=St.call(me),me==null)throw Error(r(151));for(var Mt=St=null,Ft=ee,Ht=ee=0,Xn=null,xr=me.next();Ft!==null&&!xr.done;Ht++,xr=me.next()){Ft.index>Ht?(Xn=Ft,Ft=null):Xn=Ft.sibling;var Mo=Re(ue,Ft,xr.value,qe);if(Mo===null){Ft===null&&(Ft=Xn);break}o&&Ft&&Mo.alternate===null&&c(ue,Ft),ee=S(Mo,ee,Ht),Mt===null?St=Mo:Mt.sibling=Mo,Mt=Mo,Ft=Xn}if(xr.done)return h(ue,Ft),Xr&&dl(ue,Ht),St;if(Ft===null){for(;!xr.done;Ht++,xr=me.next())xr=Ue(ue,xr.value,qe),xr!==null&&(ee=S(xr,ee,Ht),Mt===null?St=xr:Mt.sibling=xr,Mt=xr);return Xr&&dl(ue,Ht),St}for(Ft=g(ue,Ft);!xr.done;Ht++,xr=me.next())xr=ut(Ft,ue,Ht,xr.value,qe),xr!==null&&(o&&xr.alternate!==null&&Ft.delete(xr.key===null?Ht:xr.key),ee=S(xr,ee,Ht),Mt===null?St=xr:Mt.sibling=xr,Mt=xr);return o&&Ft.forEach(function(QI){return c(ue,QI)}),Xr&&dl(ue,Ht),St}function mn(ue,ee,me,qe){if(typeof me=="object"&&me!==null&&me.type===M&&me.key===null&&(me=me.props.children),typeof me=="object"&&me!==null){switch(me.$$typeof){case P:e:{for(var St=me.key,Mt=ee;Mt!==null;){if(Mt.key===St){if(St=me.type,St===M){if(Mt.tag===7){h(ue,Mt.sibling),ee=j(Mt,me.props.children),ee.return=ue,ue=ee;break e}}else if(Mt.elementType===St||typeof St=="object"&&St!==null&&St.$$typeof===ve&&l1(St)===Mt.type){h(ue,Mt.sibling),ee=j(Mt,me.props),ee.ref=Ru(ue,Mt,me),ee.return=ue,ue=ee;break e}h(ue,Mt);break}else c(ue,Mt);Mt=Mt.sibling}me.type===M?(ee=xl(me.props.children,ue.mode,qe,me.key),ee.return=ue,ue=ee):(qe=Hf(me.type,me.key,me.props,null,ue.mode,qe),qe.ref=Ru(ue,ee,me),qe.return=ue,ue=qe)}return E(ue);case A:e:{for(Mt=me.key;ee!==null;){if(ee.key===Mt)if(ee.tag===4&&ee.stateNode.containerInfo===me.containerInfo&&ee.stateNode.implementation===me.implementation){h(ue,ee.sibling),ee=j(ee,me.children||[]),ee.return=ue,ue=ee;break e}else{h(ue,ee);break}else c(ue,ee);ee=ee.sibling}ee=Yg(me,ue.mode,qe),ee.return=ue,ue=ee}return E(ue);case ve:return Mt=me._init,mn(ue,ee,Mt(me._payload),qe)}if(F(me))return yt(ue,ee,me,qe);if(ce(me))return xt(ue,ee,me,qe);jf(ue,me)}return typeof me=="string"&&me!==""||typeof me=="number"?(me=""+me,ee!==null&&ee.tag===6?(h(ue,ee.sibling),ee=j(ee,me),ee.return=ue,ue=ee):(h(ue,ee),ee=Gg(me,ue.mode,qe),ee.return=ue,ue=ee),E(ue)):h(ue,ee)}return mn}var dc=c1(!0),u1=c1(!1),kf=No(null),Sf=null,fc=null,sg=null;function ag(){sg=fc=Sf=null}function ig(o){var c=kf.current;qr(kf),o._currentValue=c}function og(o,c,h){for(;o!==null;){var g=o.alternate;if((o.childLanes&c)!==c?(o.childLanes|=c,g!==null&&(g.childLanes|=c)):g!==null&&(g.childLanes&c)!==c&&(g.childLanes|=c),o===h)break;o=o.return}}function hc(o,c){Sf=o,sg=fc=null,o=o.dependencies,o!==null&&o.firstContext!==null&&((o.lanes&c)!==0&&(Ks=!0),o.firstContext=null)}function Ca(o){var c=o._currentValue;if(sg!==o)if(o={context:o,memoizedValue:c,next:null},fc===null){if(Sf===null)throw Error(r(308));fc=o,Sf.dependencies={lanes:0,firstContext:o}}else fc=fc.next=o;return c}var fl=null;function lg(o){fl===null?fl=[o]:fl.push(o)}function d1(o,c,h,g){var j=c.interleaved;return j===null?(h.next=h,lg(c)):(h.next=j.next,j.next=h),c.interleaved=h,Ui(o,g)}function Ui(o,c){o.lanes|=c;var h=o.alternate;for(h!==null&&(h.lanes|=c),h=o,o=o.return;o!==null;)o.childLanes|=c,h=o.alternate,h!==null&&(h.childLanes|=c),h=o,o=o.return;return h.tag===3?h.stateNode:null}var Po=!1;function cg(o){o.updateQueue={baseState:o.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function f1(o,c){o=o.updateQueue,c.updateQueue===o&&(c.updateQueue={baseState:o.baseState,firstBaseUpdate:o.firstBaseUpdate,lastBaseUpdate:o.lastBaseUpdate,shared:o.shared,effects:o.effects})}function Bi(o,c){return{eventTime:o,lane:c,tag:0,payload:null,callback:null,next:null}}function Ao(o,c,h){var g=o.updateQueue;if(g===null)return null;if(g=g.shared,(gr&2)!==0){var j=g.pending;return j===null?c.next=c:(c.next=j.next,j.next=c),g.pending=c,Ui(o,h)}return j=g.interleaved,j===null?(c.next=c,lg(g)):(c.next=j.next,j.next=c),g.interleaved=c,Ui(o,h)}function _f(o,c,h){if(c=c.updateQueue,c!==null&&(c=c.shared,(h&4194240)!==0)){var g=c.lanes;g&=o.pendingLanes,h|=g,c.lanes=h,sr(o,h)}}function h1(o,c){var h=o.updateQueue,g=o.alternate;if(g!==null&&(g=g.updateQueue,h===g)){var j=null,S=null;if(h=h.firstBaseUpdate,h!==null){do{var E={eventTime:h.eventTime,lane:h.lane,tag:h.tag,payload:h.payload,callback:h.callback,next:null};S===null?j=S=E:S=S.next=E,h=h.next}while(h!==null);S===null?j=S=c:S=S.next=c}else j=S=c;h={baseState:g.baseState,firstBaseUpdate:j,lastBaseUpdate:S,shared:g.shared,effects:g.effects},o.updateQueue=h;return}o=h.lastBaseUpdate,o===null?h.firstBaseUpdate=c:o.next=c,h.lastBaseUpdate=c}function Nf(o,c,h,g){var j=o.updateQueue;Po=!1;var S=j.firstBaseUpdate,E=j.lastBaseUpdate,z=j.shared.pending;if(z!==null){j.shared.pending=null;var J=z,xe=J.next;J.next=null,E===null?S=xe:E.next=xe,E=J;var Me=o.alternate;Me!==null&&(Me=Me.updateQueue,z=Me.lastBaseUpdate,z!==E&&(z===null?Me.firstBaseUpdate=xe:z.next=xe,Me.lastBaseUpdate=J))}if(S!==null){var Ue=j.baseState;E=0,Me=xe=J=null,z=S;do{var Re=z.lane,ut=z.eventTime;if((g&Re)===Re){Me!==null&&(Me=Me.next={eventTime:ut,lane:0,tag:z.tag,payload:z.payload,callback:z.callback,next:null});e:{var yt=o,xt=z;switch(Re=c,ut=h,xt.tag){case 1:if(yt=xt.payload,typeof yt=="function"){Ue=yt.call(ut,Ue,Re);break e}Ue=yt;break e;case 3:yt.flags=yt.flags&-65537|128;case 0:if(yt=xt.payload,Re=typeof yt=="function"?yt.call(ut,Ue,Re):yt,Re==null)break e;Ue=le({},Ue,Re);break e;case 2:Po=!0}}z.callback!==null&&z.lane!==0&&(o.flags|=64,Re=j.effects,Re===null?j.effects=[z]:Re.push(z))}else ut={eventTime:ut,lane:Re,tag:z.tag,payload:z.payload,callback:z.callback,next:null},Me===null?(xe=Me=ut,J=Ue):Me=Me.next=ut,E|=Re;if(z=z.next,z===null){if(z=j.shared.pending,z===null)break;Re=z,z=Re.next,Re.next=null,j.lastBaseUpdate=Re,j.shared.pending=null}}while(!0);if(Me===null&&(J=Ue),j.baseState=J,j.firstBaseUpdate=xe,j.lastBaseUpdate=Me,c=j.shared.interleaved,c!==null){j=c;do E|=j.lane,j=j.next;while(j!==c)}else S===null&&(j.shared.lanes=0);pl|=E,o.lanes=E,o.memoizedState=Ue}}function m1(o,c,h){if(o=c.effects,c.effects=null,o!==null)for(c=0;c<o.length;c++){var g=o[c],j=g.callback;if(j!==null){if(g.callback=null,g=h,typeof j!="function")throw Error(r(191,j));j.call(g)}}}var Mu={},pi=No(Mu),Fu=No(Mu),Lu=No(Mu);function hl(o){if(o===Mu)throw Error(r(174));return o}function ug(o,c){switch(Mr(Lu,c),Mr(Fu,o),Mr(pi,Mu),o=c.nodeType,o){case 9:case 11:c=(c=c.documentElement)?c.namespaceURI:wt(null,"");break;default:o=o===8?c.parentNode:c,c=o.namespaceURI||null,o=o.tagName,c=wt(c,o)}qr(pi),Mr(pi,c)}function mc(){qr(pi),qr(Fu),qr(Lu)}function p1(o){hl(Lu.current);var c=hl(pi.current),h=wt(c,o.type);c!==h&&(Mr(Fu,o),Mr(pi,h))}function dg(o){Fu.current===o&&(qr(pi),qr(Fu))}var tn=No(0);function Cf(o){for(var c=o;c!==null;){if(c.tag===13){var h=c.memoizedState;if(h!==null&&(h=h.dehydrated,h===null||h.data==="$?"||h.data==="$!"))return c}else if(c.tag===19&&c.memoizedProps.revealOrder!==void 0){if((c.flags&128)!==0)return c}else if(c.child!==null){c.child.return=c,c=c.child;continue}if(c===o)break;for(;c.sibling===null;){if(c.return===null||c.return===o)return null;c=c.return}c.sibling.return=c.return,c=c.sibling}return null}var fg=[];function hg(){for(var o=0;o<fg.length;o++)fg[o]._workInProgressVersionPrimary=null;fg.length=0}var Ef=T.ReactCurrentDispatcher,mg=T.ReactCurrentBatchConfig,ml=0,rn=null,Dn=null,Yn=null,Pf=!1,zu=!1,Uu=0,wI=0;function Cs(){throw Error(r(321))}function pg(o,c){if(c===null)return!1;for(var h=0;h<c.length&&h<o.length;h++)if(!Wa(o[h],c[h]))return!1;return!0}function gg(o,c,h,g,j,S){if(ml=S,rn=c,c.memoizedState=null,c.updateQueue=null,c.lanes=0,Ef.current=o===null||o.memoizedState===null?SI:_I,o=h(g,j),zu){S=0;do{if(zu=!1,Uu=0,25<=S)throw Error(r(301));S+=1,Yn=Dn=null,c.updateQueue=null,Ef.current=NI,o=h(g,j)}while(zu)}if(Ef.current=Tf,c=Dn!==null&&Dn.next!==null,ml=0,Yn=Dn=rn=null,Pf=!1,c)throw Error(r(300));return o}function yg(){var o=Uu!==0;return Uu=0,o}function gi(){var o={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Yn===null?rn.memoizedState=Yn=o:Yn=Yn.next=o,Yn}function Ea(){if(Dn===null){var o=rn.alternate;o=o!==null?o.memoizedState:null}else o=Dn.next;var c=Yn===null?rn.memoizedState:Yn.next;if(c!==null)Yn=c,Dn=o;else{if(o===null)throw Error(r(310));Dn=o,o={memoizedState:Dn.memoizedState,baseState:Dn.baseState,baseQueue:Dn.baseQueue,queue:Dn.queue,next:null},Yn===null?rn.memoizedState=Yn=o:Yn=Yn.next=o}return Yn}function Bu(o,c){return typeof c=="function"?c(o):c}function vg(o){var c=Ea(),h=c.queue;if(h===null)throw Error(r(311));h.lastRenderedReducer=o;var g=Dn,j=g.baseQueue,S=h.pending;if(S!==null){if(j!==null){var E=j.next;j.next=S.next,S.next=E}g.baseQueue=j=S,h.pending=null}if(j!==null){S=j.next,g=g.baseState;var z=E=null,J=null,xe=S;do{var Me=xe.lane;if((ml&Me)===Me)J!==null&&(J=J.next={lane:0,action:xe.action,hasEagerState:xe.hasEagerState,eagerState:xe.eagerState,next:null}),g=xe.hasEagerState?xe.eagerState:o(g,xe.action);else{var Ue={lane:Me,action:xe.action,hasEagerState:xe.hasEagerState,eagerState:xe.eagerState,next:null};J===null?(z=J=Ue,E=g):J=J.next=Ue,rn.lanes|=Me,pl|=Me}xe=xe.next}while(xe!==null&&xe!==S);J===null?E=g:J.next=z,Wa(g,c.memoizedState)||(Ks=!0),c.memoizedState=g,c.baseState=E,c.baseQueue=J,h.lastRenderedState=g}if(o=h.interleaved,o!==null){j=o;do S=j.lane,rn.lanes|=S,pl|=S,j=j.next;while(j!==o)}else j===null&&(h.lanes=0);return[c.memoizedState,h.dispatch]}function xg(o){var c=Ea(),h=c.queue;if(h===null)throw Error(r(311));h.lastRenderedReducer=o;var g=h.dispatch,j=h.pending,S=c.memoizedState;if(j!==null){h.pending=null;var E=j=j.next;do S=o(S,E.action),E=E.next;while(E!==j);Wa(S,c.memoizedState)||(Ks=!0),c.memoizedState=S,c.baseQueue===null&&(c.baseState=S),h.lastRenderedState=S}return[S,g]}function g1(){}function y1(o,c){var h=rn,g=Ea(),j=c(),S=!Wa(g.memoizedState,j);if(S&&(g.memoizedState=j,Ks=!0),g=g.queue,wg(w1.bind(null,h,g,o),[o]),g.getSnapshot!==c||S||Yn!==null&&Yn.memoizedState.tag&1){if(h.flags|=2048,Wu(9,x1.bind(null,h,g,j,c),void 0,null),Jn===null)throw Error(r(349));(ml&30)!==0||v1(h,c,j)}return j}function v1(o,c,h){o.flags|=16384,o={getSnapshot:c,value:h},c=rn.updateQueue,c===null?(c={lastEffect:null,stores:null},rn.updateQueue=c,c.stores=[o]):(h=c.stores,h===null?c.stores=[o]:h.push(o))}function x1(o,c,h,g){c.value=h,c.getSnapshot=g,b1(c)&&j1(o)}function w1(o,c,h){return h(function(){b1(c)&&j1(o)})}function b1(o){var c=o.getSnapshot;o=o.value;try{var h=c();return!Wa(o,h)}catch{return!0}}function j1(o){var c=Ui(o,1);c!==null&&Ga(c,o,1,-1)}function k1(o){var c=gi();return typeof o=="function"&&(o=o()),c.memoizedState=c.baseState=o,o={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Bu,lastRenderedState:o},c.queue=o,o=o.dispatch=kI.bind(null,rn,o),[c.memoizedState,o]}function Wu(o,c,h,g){return o={tag:o,create:c,destroy:h,deps:g,next:null},c=rn.updateQueue,c===null?(c={lastEffect:null,stores:null},rn.updateQueue=c,c.lastEffect=o.next=o):(h=c.lastEffect,h===null?c.lastEffect=o.next=o:(g=h.next,h.next=o,o.next=g,c.lastEffect=o)),o}function S1(){return Ea().memoizedState}function Af(o,c,h,g){var j=gi();rn.flags|=o,j.memoizedState=Wu(1|c,h,void 0,g===void 0?null:g)}function Of(o,c,h,g){var j=Ea();g=g===void 0?null:g;var S=void 0;if(Dn!==null){var E=Dn.memoizedState;if(S=E.destroy,g!==null&&pg(g,E.deps)){j.memoizedState=Wu(c,h,S,g);return}}rn.flags|=o,j.memoizedState=Wu(1|c,h,S,g)}function _1(o,c){return Af(8390656,8,o,c)}function wg(o,c){return Of(2048,8,o,c)}function N1(o,c){return Of(4,2,o,c)}function C1(o,c){return Of(4,4,o,c)}function E1(o,c){if(typeof c=="function")return o=o(),c(o),function(){c(null)};if(c!=null)return o=o(),c.current=o,function(){c.current=null}}function P1(o,c,h){return h=h!=null?h.concat([o]):null,Of(4,4,E1.bind(null,c,o),h)}function bg(){}function A1(o,c){var h=Ea();c=c===void 0?null:c;var g=h.memoizedState;return g!==null&&c!==null&&pg(c,g[1])?g[0]:(h.memoizedState=[o,c],o)}function O1(o,c){var h=Ea();c=c===void 0?null:c;var g=h.memoizedState;return g!==null&&c!==null&&pg(c,g[1])?g[0]:(o=o(),h.memoizedState=[o,c],o)}function T1(o,c,h){return(ml&21)===0?(o.baseState&&(o.baseState=!1,Ks=!0),o.memoizedState=h):(Wa(h,c)||(h=dr(),rn.lanes|=h,pl|=h,o.baseState=!0),c)}function bI(o,c){var h=ct;ct=h!==0&&4>h?h:4,o(!0);var g=mg.transition;mg.transition={};try{o(!1),c()}finally{ct=h,mg.transition=g}}function I1(){return Ea().memoizedState}function jI(o,c,h){var g=Do(o);if(h={lane:g,action:h,hasEagerState:!1,eagerState:null,next:null},D1(o))$1(c,h);else if(h=d1(o,c,h,g),h!==null){var j=Ms();Ga(h,o,g,j),R1(h,c,g)}}function kI(o,c,h){var g=Do(o),j={lane:g,action:h,hasEagerState:!1,eagerState:null,next:null};if(D1(o))$1(c,j);else{var S=o.alternate;if(o.lanes===0&&(S===null||S.lanes===0)&&(S=c.lastRenderedReducer,S!==null))try{var E=c.lastRenderedState,z=S(E,h);if(j.hasEagerState=!0,j.eagerState=z,Wa(z,E)){var J=c.interleaved;J===null?(j.next=j,lg(c)):(j.next=J.next,J.next=j),c.interleaved=j;return}}catch{}finally{}h=d1(o,c,j,g),h!==null&&(j=Ms(),Ga(h,o,g,j),R1(h,c,g))}}function D1(o){var c=o.alternate;return o===rn||c!==null&&c===rn}function $1(o,c){zu=Pf=!0;var h=o.pending;h===null?c.next=c:(c.next=h.next,h.next=c),o.pending=c}function R1(o,c,h){if((h&4194240)!==0){var g=c.lanes;g&=o.pendingLanes,h|=g,c.lanes=h,sr(o,h)}}var Tf={readContext:Ca,useCallback:Cs,useContext:Cs,useEffect:Cs,useImperativeHandle:Cs,useInsertionEffect:Cs,useLayoutEffect:Cs,useMemo:Cs,useReducer:Cs,useRef:Cs,useState:Cs,useDebugValue:Cs,useDeferredValue:Cs,useTransition:Cs,useMutableSource:Cs,useSyncExternalStore:Cs,useId:Cs,unstable_isNewReconciler:!1},SI={readContext:Ca,useCallback:function(o,c){return gi().memoizedState=[o,c===void 0?null:c],o},useContext:Ca,useEffect:_1,useImperativeHandle:function(o,c,h){return h=h!=null?h.concat([o]):null,Af(4194308,4,E1.bind(null,c,o),h)},useLayoutEffect:function(o,c){return Af(4194308,4,o,c)},useInsertionEffect:function(o,c){return Af(4,2,o,c)},useMemo:function(o,c){var h=gi();return c=c===void 0?null:c,o=o(),h.memoizedState=[o,c],o},useReducer:function(o,c,h){var g=gi();return c=h!==void 0?h(c):c,g.memoizedState=g.baseState=c,o={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:o,lastRenderedState:c},g.queue=o,o=o.dispatch=jI.bind(null,rn,o),[g.memoizedState,o]},useRef:function(o){var c=gi();return o={current:o},c.memoizedState=o},useState:k1,useDebugValue:bg,useDeferredValue:function(o){return gi().memoizedState=o},useTransition:function(){var o=k1(!1),c=o[0];return o=bI.bind(null,o[1]),gi().memoizedState=o,[c,o]},useMutableSource:function(){},useSyncExternalStore:function(o,c,h){var g=rn,j=gi();if(Xr){if(h===void 0)throw Error(r(407));h=h()}else{if(h=c(),Jn===null)throw Error(r(349));(ml&30)!==0||v1(g,c,h)}j.memoizedState=h;var S={value:h,getSnapshot:c};return j.queue=S,_1(w1.bind(null,g,S,o),[o]),g.flags|=2048,Wu(9,x1.bind(null,g,S,h,c),void 0,null),h},useId:function(){var o=gi(),c=Jn.identifierPrefix;if(Xr){var h=zi,g=Li;h=(g&~(1<<32-ye(g)-1)).toString(32)+h,c=":"+c+"R"+h,h=Uu++,0<h&&(c+="H"+h.toString(32)),c+=":"}else h=wI++,c=":"+c+"r"+h.toString(32)+":";return o.memoizedState=c},unstable_isNewReconciler:!1},_I={readContext:Ca,useCallback:A1,useContext:Ca,useEffect:wg,useImperativeHandle:P1,useInsertionEffect:N1,useLayoutEffect:C1,useMemo:O1,useReducer:vg,useRef:S1,useState:function(){return vg(Bu)},useDebugValue:bg,useDeferredValue:function(o){var c=Ea();return T1(c,Dn.memoizedState,o)},useTransition:function(){var o=vg(Bu)[0],c=Ea().memoizedState;return[o,c]},useMutableSource:g1,useSyncExternalStore:y1,useId:I1,unstable_isNewReconciler:!1},NI={readContext:Ca,useCallback:A1,useContext:Ca,useEffect:wg,useImperativeHandle:P1,useInsertionEffect:N1,useLayoutEffect:C1,useMemo:O1,useReducer:xg,useRef:S1,useState:function(){return xg(Bu)},useDebugValue:bg,useDeferredValue:function(o){var c=Ea();return Dn===null?c.memoizedState=o:T1(c,Dn.memoizedState,o)},useTransition:function(){var o=xg(Bu)[0],c=Ea().memoizedState;return[o,c]},useMutableSource:g1,useSyncExternalStore:y1,useId:I1,unstable_isNewReconciler:!1};function qa(o,c){if(o&&o.defaultProps){c=le({},c),o=o.defaultProps;for(var h in o)c[h]===void 0&&(c[h]=o[h]);return c}return c}function jg(o,c,h,g){c=o.memoizedState,h=h(g,c),h=h==null?c:le({},c,h),o.memoizedState=h,o.lanes===0&&(o.updateQueue.baseState=h)}var If={isMounted:function(o){return(o=o._reactInternals)?an(o)===o:!1},enqueueSetState:function(o,c,h){o=o._reactInternals;var g=Ms(),j=Do(o),S=Bi(g,j);S.payload=c,h!=null&&(S.callback=h),c=Ao(o,S,j),c!==null&&(Ga(c,o,j,g),_f(c,o,j))},enqueueReplaceState:function(o,c,h){o=o._reactInternals;var g=Ms(),j=Do(o),S=Bi(g,j);S.tag=1,S.payload=c,h!=null&&(S.callback=h),c=Ao(o,S,j),c!==null&&(Ga(c,o,j,g),_f(c,o,j))},enqueueForceUpdate:function(o,c){o=o._reactInternals;var h=Ms(),g=Do(o),j=Bi(h,g);j.tag=2,c!=null&&(j.callback=c),c=Ao(o,j,g),c!==null&&(Ga(c,o,g,h),_f(c,o,g))}};function M1(o,c,h,g,j,S,E){return o=o.stateNode,typeof o.shouldComponentUpdate=="function"?o.shouldComponentUpdate(g,S,E):c.prototype&&c.prototype.isPureReactComponent?!Pu(h,g)||!Pu(j,S):!0}function F1(o,c,h){var g=!1,j=Co,S=c.contextType;return typeof S=="object"&&S!==null?S=Ca(S):(j=Hs(c)?cl:Ns.current,g=c.contextTypes,S=(g=g!=null)?oc(o,j):Co),c=new c(h,S),o.memoizedState=c.state!==null&&c.state!==void 0?c.state:null,c.updater=If,o.stateNode=c,c._reactInternals=o,g&&(o=o.stateNode,o.__reactInternalMemoizedUnmaskedChildContext=j,o.__reactInternalMemoizedMaskedChildContext=S),c}function L1(o,c,h,g){o=c.state,typeof c.componentWillReceiveProps=="function"&&c.componentWillReceiveProps(h,g),typeof c.UNSAFE_componentWillReceiveProps=="function"&&c.UNSAFE_componentWillReceiveProps(h,g),c.state!==o&&If.enqueueReplaceState(c,c.state,null)}function kg(o,c,h,g){var j=o.stateNode;j.props=h,j.state=o.memoizedState,j.refs={},cg(o);var S=c.contextType;typeof S=="object"&&S!==null?j.context=Ca(S):(S=Hs(c)?cl:Ns.current,j.context=oc(o,S)),j.state=o.memoizedState,S=c.getDerivedStateFromProps,typeof S=="function"&&(jg(o,c,S,h),j.state=o.memoizedState),typeof c.getDerivedStateFromProps=="function"||typeof j.getSnapshotBeforeUpdate=="function"||typeof j.UNSAFE_componentWillMount!="function"&&typeof j.componentWillMount!="function"||(c=j.state,typeof j.componentWillMount=="function"&&j.componentWillMount(),typeof j.UNSAFE_componentWillMount=="function"&&j.UNSAFE_componentWillMount(),c!==j.state&&If.enqueueReplaceState(j,j.state,null),Nf(o,h,j,g),j.state=o.memoizedState),typeof j.componentDidMount=="function"&&(o.flags|=4194308)}function pc(o,c){try{var h="",g=c;do h+=Pe(g),g=g.return;while(g);var j=h}catch(S){j=`
Error generating stack: `+S.message+`
`+S.stack}return{value:o,source:c,stack:j,digest:null}}function Sg(o,c,h){return{value:o,source:null,stack:h??null,digest:c??null}}function _g(o,c){try{console.error(c.value)}catch(h){setTimeout(function(){throw h})}}var CI=typeof WeakMap=="function"?WeakMap:Map;function z1(o,c,h){h=Bi(-1,h),h.tag=3,h.payload={element:null};var g=c.value;return h.callback=function(){zf||(zf=!0,zg=g),_g(o,c)},h}function U1(o,c,h){h=Bi(-1,h),h.tag=3;var g=o.type.getDerivedStateFromError;if(typeof g=="function"){var j=c.value;h.payload=function(){return g(j)},h.callback=function(){_g(o,c)}}var S=o.stateNode;return S!==null&&typeof S.componentDidCatch=="function"&&(h.callback=function(){_g(o,c),typeof g!="function"&&(To===null?To=new Set([this]):To.add(this));var E=c.stack;this.componentDidCatch(c.value,{componentStack:E!==null?E:""})}),h}function B1(o,c,h){var g=o.pingCache;if(g===null){g=o.pingCache=new CI;var j=new Set;g.set(c,j)}else j=g.get(c),j===void 0&&(j=new Set,g.set(c,j));j.has(h)||(j.add(h),o=UI.bind(null,o,c,h),c.then(o,o))}function W1(o){do{var c;if((c=o.tag===13)&&(c=o.memoizedState,c=c!==null?c.dehydrated!==null:!0),c)return o;o=o.return}while(o!==null);return null}function V1(o,c,h,g,j){return(o.mode&1)===0?(o===c?o.flags|=65536:(o.flags|=128,h.flags|=131072,h.flags&=-52805,h.tag===1&&(h.alternate===null?h.tag=17:(c=Bi(-1,1),c.tag=2,Ao(h,c,1))),h.lanes|=1),o):(o.flags|=65536,o.lanes=j,o)}var EI=T.ReactCurrentOwner,Ks=!1;function Rs(o,c,h,g){c.child=o===null?u1(c,null,h,g):dc(c,o.child,h,g)}function q1(o,c,h,g,j){h=h.render;var S=c.ref;return hc(c,j),g=gg(o,c,h,g,S,j),h=yg(),o!==null&&!Ks?(c.updateQueue=o.updateQueue,c.flags&=-2053,o.lanes&=~j,Wi(o,c,j)):(Xr&&h&&Zp(c),c.flags|=1,Rs(o,c,g,j),c.child)}function H1(o,c,h,g,j){if(o===null){var S=h.type;return typeof S=="function"&&!Kg(S)&&S.defaultProps===void 0&&h.compare===null&&h.defaultProps===void 0?(c.tag=15,c.type=S,K1(o,c,S,g,j)):(o=Hf(h.type,null,g,c,c.mode,j),o.ref=c.ref,o.return=c,c.child=o)}if(S=o.child,(o.lanes&j)===0){var E=S.memoizedProps;if(h=h.compare,h=h!==null?h:Pu,h(E,g)&&o.ref===c.ref)return Wi(o,c,j)}return c.flags|=1,o=Ro(S,g),o.ref=c.ref,o.return=c,c.child=o}function K1(o,c,h,g,j){if(o!==null){var S=o.memoizedProps;if(Pu(S,g)&&o.ref===c.ref)if(Ks=!1,c.pendingProps=g=S,(o.lanes&j)!==0)(o.flags&131072)!==0&&(Ks=!0);else return c.lanes=o.lanes,Wi(o,c,j)}return Ng(o,c,h,g,j)}function G1(o,c,h){var g=c.pendingProps,j=g.children,S=o!==null?o.memoizedState:null;if(g.mode==="hidden")if((c.mode&1)===0)c.memoizedState={baseLanes:0,cachePool:null,transitions:null},Mr(yc,ia),ia|=h;else{if((h&1073741824)===0)return o=S!==null?S.baseLanes|h:h,c.lanes=c.childLanes=1073741824,c.memoizedState={baseLanes:o,cachePool:null,transitions:null},c.updateQueue=null,Mr(yc,ia),ia|=o,null;c.memoizedState={baseLanes:0,cachePool:null,transitions:null},g=S!==null?S.baseLanes:h,Mr(yc,ia),ia|=g}else S!==null?(g=S.baseLanes|h,c.memoizedState=null):g=h,Mr(yc,ia),ia|=g;return Rs(o,c,j,h),c.child}function Y1(o,c){var h=c.ref;(o===null&&h!==null||o!==null&&o.ref!==h)&&(c.flags|=512,c.flags|=2097152)}function Ng(o,c,h,g,j){var S=Hs(h)?cl:Ns.current;return S=oc(c,S),hc(c,j),h=gg(o,c,h,g,S,j),g=yg(),o!==null&&!Ks?(c.updateQueue=o.updateQueue,c.flags&=-2053,o.lanes&=~j,Wi(o,c,j)):(Xr&&g&&Zp(c),c.flags|=1,Rs(o,c,h,j),c.child)}function J1(o,c,h,g,j){if(Hs(h)){var S=!0;yf(c)}else S=!1;if(hc(c,j),c.stateNode===null)$f(o,c),F1(c,h,g),kg(c,h,g,j),g=!0;else if(o===null){var E=c.stateNode,z=c.memoizedProps;E.props=z;var J=E.context,xe=h.contextType;typeof xe=="object"&&xe!==null?xe=Ca(xe):(xe=Hs(h)?cl:Ns.current,xe=oc(c,xe));var Me=h.getDerivedStateFromProps,Ue=typeof Me=="function"||typeof E.getSnapshotBeforeUpdate=="function";Ue||typeof E.UNSAFE_componentWillReceiveProps!="function"&&typeof E.componentWillReceiveProps!="function"||(z!==g||J!==xe)&&L1(c,E,g,xe),Po=!1;var Re=c.memoizedState;E.state=Re,Nf(c,g,E,j),J=c.memoizedState,z!==g||Re!==J||qs.current||Po?(typeof Me=="function"&&(jg(c,h,Me,g),J=c.memoizedState),(z=Po||M1(c,h,z,g,Re,J,xe))?(Ue||typeof E.UNSAFE_componentWillMount!="function"&&typeof E.componentWillMount!="function"||(typeof E.componentWillMount=="function"&&E.componentWillMount(),typeof E.UNSAFE_componentWillMount=="function"&&E.UNSAFE_componentWillMount()),typeof E.componentDidMount=="function"&&(c.flags|=4194308)):(typeof E.componentDidMount=="function"&&(c.flags|=4194308),c.memoizedProps=g,c.memoizedState=J),E.props=g,E.state=J,E.context=xe,g=z):(typeof E.componentDidMount=="function"&&(c.flags|=4194308),g=!1)}else{E=c.stateNode,f1(o,c),z=c.memoizedProps,xe=c.type===c.elementType?z:qa(c.type,z),E.props=xe,Ue=c.pendingProps,Re=E.context,J=h.contextType,typeof J=="object"&&J!==null?J=Ca(J):(J=Hs(h)?cl:Ns.current,J=oc(c,J));var ut=h.getDerivedStateFromProps;(Me=typeof ut=="function"||typeof E.getSnapshotBeforeUpdate=="function")||typeof E.UNSAFE_componentWillReceiveProps!="function"&&typeof E.componentWillReceiveProps!="function"||(z!==Ue||Re!==J)&&L1(c,E,g,J),Po=!1,Re=c.memoizedState,E.state=Re,Nf(c,g,E,j);var yt=c.memoizedState;z!==Ue||Re!==yt||qs.current||Po?(typeof ut=="function"&&(jg(c,h,ut,g),yt=c.memoizedState),(xe=Po||M1(c,h,xe,g,Re,yt,J)||!1)?(Me||typeof E.UNSAFE_componentWillUpdate!="function"&&typeof E.componentWillUpdate!="function"||(typeof E.componentWillUpdate=="function"&&E.componentWillUpdate(g,yt,J),typeof E.UNSAFE_componentWillUpdate=="function"&&E.UNSAFE_componentWillUpdate(g,yt,J)),typeof E.componentDidUpdate=="function"&&(c.flags|=4),typeof E.getSnapshotBeforeUpdate=="function"&&(c.flags|=1024)):(typeof E.componentDidUpdate!="function"||z===o.memoizedProps&&Re===o.memoizedState||(c.flags|=4),typeof E.getSnapshotBeforeUpdate!="function"||z===o.memoizedProps&&Re===o.memoizedState||(c.flags|=1024),c.memoizedProps=g,c.memoizedState=yt),E.props=g,E.state=yt,E.context=J,g=xe):(typeof E.componentDidUpdate!="function"||z===o.memoizedProps&&Re===o.memoizedState||(c.flags|=4),typeof E.getSnapshotBeforeUpdate!="function"||z===o.memoizedProps&&Re===o.memoizedState||(c.flags|=1024),g=!1)}return Cg(o,c,h,g,S,j)}function Cg(o,c,h,g,j,S){Y1(o,c);var E=(c.flags&128)!==0;if(!g&&!E)return j&&t1(c,h,!1),Wi(o,c,S);g=c.stateNode,EI.current=c;var z=E&&typeof h.getDerivedStateFromError!="function"?null:g.render();return c.flags|=1,o!==null&&E?(c.child=dc(c,o.child,null,S),c.child=dc(c,null,z,S)):Rs(o,c,z,S),c.memoizedState=g.state,j&&t1(c,h,!0),c.child}function X1(o){var c=o.stateNode;c.pendingContext?Zb(o,c.pendingContext,c.pendingContext!==c.context):c.context&&Zb(o,c.context,!1),ug(o,c.containerInfo)}function Q1(o,c,h,g,j){return uc(),ng(j),c.flags|=256,Rs(o,c,h,g),c.child}var Eg={dehydrated:null,treeContext:null,retryLane:0};function Pg(o){return{baseLanes:o,cachePool:null,transitions:null}}function Z1(o,c,h){var g=c.pendingProps,j=tn.current,S=!1,E=(c.flags&128)!==0,z;if((z=E)||(z=o!==null&&o.memoizedState===null?!1:(j&2)!==0),z?(S=!0,c.flags&=-129):(o===null||o.memoizedState!==null)&&(j|=1),Mr(tn,j&1),o===null)return rg(c),o=c.memoizedState,o!==null&&(o=o.dehydrated,o!==null)?((c.mode&1)===0?c.lanes=1:o.data==="$!"?c.lanes=8:c.lanes=1073741824,null):(E=g.children,o=g.fallback,S?(g=c.mode,S=c.child,E={mode:"hidden",children:E},(g&1)===0&&S!==null?(S.childLanes=0,S.pendingProps=E):S=Kf(E,g,0,null),o=xl(o,g,h,null),S.return=c,o.return=c,S.sibling=o,c.child=S,c.child.memoizedState=Pg(h),c.memoizedState=Eg,o):Ag(c,E));if(j=o.memoizedState,j!==null&&(z=j.dehydrated,z!==null))return PI(o,c,E,g,z,j,h);if(S){S=g.fallback,E=c.mode,j=o.child,z=j.sibling;var J={mode:"hidden",children:g.children};return(E&1)===0&&c.child!==j?(g=c.child,g.childLanes=0,g.pendingProps=J,c.deletions=null):(g=Ro(j,J),g.subtreeFlags=j.subtreeFlags&14680064),z!==null?S=Ro(z,S):(S=xl(S,E,h,null),S.flags|=2),S.return=c,g.return=c,g.sibling=S,c.child=g,g=S,S=c.child,E=o.child.memoizedState,E=E===null?Pg(h):{baseLanes:E.baseLanes|h,cachePool:null,transitions:E.transitions},S.memoizedState=E,S.childLanes=o.childLanes&~h,c.memoizedState=Eg,g}return S=o.child,o=S.sibling,g=Ro(S,{mode:"visible",children:g.children}),(c.mode&1)===0&&(g.lanes=h),g.return=c,g.sibling=null,o!==null&&(h=c.deletions,h===null?(c.deletions=[o],c.flags|=16):h.push(o)),c.child=g,c.memoizedState=null,g}function Ag(o,c){return c=Kf({mode:"visible",children:c},o.mode,0,null),c.return=o,o.child=c}function Df(o,c,h,g){return g!==null&&ng(g),dc(c,o.child,null,h),o=Ag(c,c.pendingProps.children),o.flags|=2,c.memoizedState=null,o}function PI(o,c,h,g,j,S,E){if(h)return c.flags&256?(c.flags&=-257,g=Sg(Error(r(422))),Df(o,c,E,g)):c.memoizedState!==null?(c.child=o.child,c.flags|=128,null):(S=g.fallback,j=c.mode,g=Kf({mode:"visible",children:g.children},j,0,null),S=xl(S,j,E,null),S.flags|=2,g.return=c,S.return=c,g.sibling=S,c.child=g,(c.mode&1)!==0&&dc(c,o.child,null,E),c.child.memoizedState=Pg(E),c.memoizedState=Eg,S);if((c.mode&1)===0)return Df(o,c,E,null);if(j.data==="$!"){if(g=j.nextSibling&&j.nextSibling.dataset,g)var z=g.dgst;return g=z,S=Error(r(419)),g=Sg(S,g,void 0),Df(o,c,E,g)}if(z=(E&o.childLanes)!==0,Ks||z){if(g=Jn,g!==null){switch(E&-E){case 4:j=2;break;case 16:j=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:j=32;break;case 536870912:j=268435456;break;default:j=0}j=(j&(g.suspendedLanes|E))!==0?0:j,j!==0&&j!==S.retryLane&&(S.retryLane=j,Ui(o,j),Ga(g,o,j,-1))}return Hg(),g=Sg(Error(r(421))),Df(o,c,E,g)}return j.data==="$?"?(c.flags|=128,c.child=o.child,c=BI.bind(null,o),j._reactRetry=c,null):(o=S.treeContext,aa=_o(j.nextSibling),sa=c,Xr=!0,Va=null,o!==null&&(_a[Na++]=Li,_a[Na++]=zi,_a[Na++]=ul,Li=o.id,zi=o.overflow,ul=c),c=Ag(c,g.children),c.flags|=4096,c)}function ej(o,c,h){o.lanes|=c;var g=o.alternate;g!==null&&(g.lanes|=c),og(o.return,c,h)}function Og(o,c,h,g,j){var S=o.memoizedState;S===null?o.memoizedState={isBackwards:c,rendering:null,renderingStartTime:0,last:g,tail:h,tailMode:j}:(S.isBackwards=c,S.rendering=null,S.renderingStartTime=0,S.last=g,S.tail=h,S.tailMode=j)}function tj(o,c,h){var g=c.pendingProps,j=g.revealOrder,S=g.tail;if(Rs(o,c,g.children,h),g=tn.current,(g&2)!==0)g=g&1|2,c.flags|=128;else{if(o!==null&&(o.flags&128)!==0)e:for(o=c.child;o!==null;){if(o.tag===13)o.memoizedState!==null&&ej(o,h,c);else if(o.tag===19)ej(o,h,c);else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===c)break e;for(;o.sibling===null;){if(o.return===null||o.return===c)break e;o=o.return}o.sibling.return=o.return,o=o.sibling}g&=1}if(Mr(tn,g),(c.mode&1)===0)c.memoizedState=null;else switch(j){case"forwards":for(h=c.child,j=null;h!==null;)o=h.alternate,o!==null&&Cf(o)===null&&(j=h),h=h.sibling;h=j,h===null?(j=c.child,c.child=null):(j=h.sibling,h.sibling=null),Og(c,!1,j,h,S);break;case"backwards":for(h=null,j=c.child,c.child=null;j!==null;){if(o=j.alternate,o!==null&&Cf(o)===null){c.child=j;break}o=j.sibling,j.sibling=h,h=j,j=o}Og(c,!0,h,null,S);break;case"together":Og(c,!1,null,null,void 0);break;default:c.memoizedState=null}return c.child}function $f(o,c){(c.mode&1)===0&&o!==null&&(o.alternate=null,c.alternate=null,c.flags|=2)}function Wi(o,c,h){if(o!==null&&(c.dependencies=o.dependencies),pl|=c.lanes,(h&c.childLanes)===0)return null;if(o!==null&&c.child!==o.child)throw Error(r(153));if(c.child!==null){for(o=c.child,h=Ro(o,o.pendingProps),c.child=h,h.return=c;o.sibling!==null;)o=o.sibling,h=h.sibling=Ro(o,o.pendingProps),h.return=c;h.sibling=null}return c.child}function AI(o,c,h){switch(c.tag){case 3:X1(c),uc();break;case 5:p1(c);break;case 1:Hs(c.type)&&yf(c);break;case 4:ug(c,c.stateNode.containerInfo);break;case 10:var g=c.type._context,j=c.memoizedProps.value;Mr(kf,g._currentValue),g._currentValue=j;break;case 13:if(g=c.memoizedState,g!==null)return g.dehydrated!==null?(Mr(tn,tn.current&1),c.flags|=128,null):(h&c.child.childLanes)!==0?Z1(o,c,h):(Mr(tn,tn.current&1),o=Wi(o,c,h),o!==null?o.sibling:null);Mr(tn,tn.current&1);break;case 19:if(g=(h&c.childLanes)!==0,(o.flags&128)!==0){if(g)return tj(o,c,h);c.flags|=128}if(j=c.memoizedState,j!==null&&(j.rendering=null,j.tail=null,j.lastEffect=null),Mr(tn,tn.current),g)break;return null;case 22:case 23:return c.lanes=0,G1(o,c,h)}return Wi(o,c,h)}var rj,Tg,nj,sj;rj=function(o,c){for(var h=c.child;h!==null;){if(h.tag===5||h.tag===6)o.appendChild(h.stateNode);else if(h.tag!==4&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===c)break;for(;h.sibling===null;){if(h.return===null||h.return===c)return;h=h.return}h.sibling.return=h.return,h=h.sibling}},Tg=function(){},nj=function(o,c,h,g){var j=o.memoizedProps;if(j!==g){o=c.stateNode,hl(pi.current);var S=null;switch(h){case"input":j=Xe(o,j),g=Xe(o,g),S=[];break;case"select":j=le({},j,{value:void 0}),g=le({},g,{value:void 0}),S=[];break;case"textarea":j=V(o,j),g=V(o,g),S=[];break;default:typeof j.onClick!="function"&&typeof g.onClick=="function"&&(o.onclick=mf)}it(h,g);var E;h=null;for(xe in j)if(!g.hasOwnProperty(xe)&&j.hasOwnProperty(xe)&&j[xe]!=null)if(xe==="style"){var z=j[xe];for(E in z)z.hasOwnProperty(E)&&(h||(h={}),h[E]="")}else xe!=="dangerouslySetInnerHTML"&&xe!=="children"&&xe!=="suppressContentEditableWarning"&&xe!=="suppressHydrationWarning"&&xe!=="autoFocus"&&(s.hasOwnProperty(xe)?S||(S=[]):(S=S||[]).push(xe,null));for(xe in g){var J=g[xe];if(z=j!=null?j[xe]:void 0,g.hasOwnProperty(xe)&&J!==z&&(J!=null||z!=null))if(xe==="style")if(z){for(E in z)!z.hasOwnProperty(E)||J&&J.hasOwnProperty(E)||(h||(h={}),h[E]="");for(E in J)J.hasOwnProperty(E)&&z[E]!==J[E]&&(h||(h={}),h[E]=J[E])}else h||(S||(S=[]),S.push(xe,h)),h=J;else xe==="dangerouslySetInnerHTML"?(J=J?J.__html:void 0,z=z?z.__html:void 0,J!=null&&z!==J&&(S=S||[]).push(xe,J)):xe==="children"?typeof J!="string"&&typeof J!="number"||(S=S||[]).push(xe,""+J):xe!=="suppressContentEditableWarning"&&xe!=="suppressHydrationWarning"&&(s.hasOwnProperty(xe)?(J!=null&&xe==="onScroll"&&Vr("scroll",o),S||z===J||(S=[])):(S=S||[]).push(xe,J))}h&&(S=S||[]).push("style",h);var xe=S;(c.updateQueue=xe)&&(c.flags|=4)}},sj=function(o,c,h,g){h!==g&&(c.flags|=4)};function Vu(o,c){if(!Xr)switch(o.tailMode){case"hidden":c=o.tail;for(var h=null;c!==null;)c.alternate!==null&&(h=c),c=c.sibling;h===null?o.tail=null:h.sibling=null;break;case"collapsed":h=o.tail;for(var g=null;h!==null;)h.alternate!==null&&(g=h),h=h.sibling;g===null?c||o.tail===null?o.tail=null:o.tail.sibling=null:g.sibling=null}}function Es(o){var c=o.alternate!==null&&o.alternate.child===o.child,h=0,g=0;if(c)for(var j=o.child;j!==null;)h|=j.lanes|j.childLanes,g|=j.subtreeFlags&14680064,g|=j.flags&14680064,j.return=o,j=j.sibling;else for(j=o.child;j!==null;)h|=j.lanes|j.childLanes,g|=j.subtreeFlags,g|=j.flags,j.return=o,j=j.sibling;return o.subtreeFlags|=g,o.childLanes=h,c}function OI(o,c,h){var g=c.pendingProps;switch(eg(c),c.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Es(c),null;case 1:return Hs(c.type)&&gf(),Es(c),null;case 3:return g=c.stateNode,mc(),qr(qs),qr(Ns),hg(),g.pendingContext&&(g.context=g.pendingContext,g.pendingContext=null),(o===null||o.child===null)&&(bf(c)?c.flags|=4:o===null||o.memoizedState.isDehydrated&&(c.flags&256)===0||(c.flags|=1024,Va!==null&&(Wg(Va),Va=null))),Tg(o,c),Es(c),null;case 5:dg(c);var j=hl(Lu.current);if(h=c.type,o!==null&&c.stateNode!=null)nj(o,c,h,g,j),o.ref!==c.ref&&(c.flags|=512,c.flags|=2097152);else{if(!g){if(c.stateNode===null)throw Error(r(166));return Es(c),null}if(o=hl(pi.current),bf(c)){g=c.stateNode,h=c.type;var S=c.memoizedProps;switch(g[mi]=c,g[Du]=S,o=(c.mode&1)!==0,h){case"dialog":Vr("cancel",g),Vr("close",g);break;case"iframe":case"object":case"embed":Vr("load",g);break;case"video":case"audio":for(j=0;j<Ou.length;j++)Vr(Ou[j],g);break;case"source":Vr("error",g);break;case"img":case"image":case"link":Vr("error",g),Vr("load",g);break;case"details":Vr("toggle",g);break;case"input":mt(g,S),Vr("invalid",g);break;case"select":g._wrapperState={wasMultiple:!!S.multiple},Vr("invalid",g);break;case"textarea":Se(g,S),Vr("invalid",g)}it(h,S),j=null;for(var E in S)if(S.hasOwnProperty(E)){var z=S[E];E==="children"?typeof z=="string"?g.textContent!==z&&(S.suppressHydrationWarning!==!0&&hf(g.textContent,z,o),j=["children",z]):typeof z=="number"&&g.textContent!==""+z&&(S.suppressHydrationWarning!==!0&&hf(g.textContent,z,o),j=["children",""+z]):s.hasOwnProperty(E)&&z!=null&&E==="onScroll"&&Vr("scroll",g)}switch(h){case"input":oe(g),nt(g,S,!0);break;case"textarea":oe(g),Ae(g);break;case"select":case"option":break;default:typeof S.onClick=="function"&&(g.onclick=mf)}g=j,c.updateQueue=g,g!==null&&(c.flags|=4)}else{E=j.nodeType===9?j:j.ownerDocument,o==="http://www.w3.org/1999/xhtml"&&(o=Ke(h)),o==="http://www.w3.org/1999/xhtml"?h==="script"?(o=E.createElement("div"),o.innerHTML="<script><\/script>",o=o.removeChild(o.firstChild)):typeof g.is=="string"?o=E.createElement(h,{is:g.is}):(o=E.createElement(h),h==="select"&&(E=o,g.multiple?E.multiple=!0:g.size&&(E.size=g.size))):o=E.createElementNS(o,h),o[mi]=c,o[Du]=g,rj(o,c,!1,!1),c.stateNode=o;e:{switch(E=bt(h,g),h){case"dialog":Vr("cancel",o),Vr("close",o),j=g;break;case"iframe":case"object":case"embed":Vr("load",o),j=g;break;case"video":case"audio":for(j=0;j<Ou.length;j++)Vr(Ou[j],o);j=g;break;case"source":Vr("error",o),j=g;break;case"img":case"image":case"link":Vr("error",o),Vr("load",o),j=g;break;case"details":Vr("toggle",o),j=g;break;case"input":mt(o,g),j=Xe(o,g),Vr("invalid",o);break;case"option":j=g;break;case"select":o._wrapperState={wasMultiple:!!g.multiple},j=le({},g,{value:void 0}),Vr("invalid",o);break;case"textarea":Se(o,g),j=V(o,g),Vr("invalid",o);break;default:j=g}it(h,j),z=j;for(S in z)if(z.hasOwnProperty(S)){var J=z[S];S==="style"?ze(o,J):S==="dangerouslySetInnerHTML"?(J=J?J.__html:void 0,J!=null&&We(o,J)):S==="children"?typeof J=="string"?(h!=="textarea"||J!=="")&&Oe(o,J):typeof J=="number"&&Oe(o,""+J):S!=="suppressContentEditableWarning"&&S!=="suppressHydrationWarning"&&S!=="autoFocus"&&(s.hasOwnProperty(S)?J!=null&&S==="onScroll"&&Vr("scroll",o):J!=null&&C(o,S,J,E))}switch(h){case"input":oe(o),nt(o,g,!1);break;case"textarea":oe(o),Ae(o);break;case"option":g.value!=null&&o.setAttribute("value",""+He(g.value));break;case"select":o.multiple=!!g.multiple,S=g.value,S!=null?L(o,!!g.multiple,S,!1):g.defaultValue!=null&&L(o,!!g.multiple,g.defaultValue,!0);break;default:typeof j.onClick=="function"&&(o.onclick=mf)}switch(h){case"button":case"input":case"select":case"textarea":g=!!g.autoFocus;break e;case"img":g=!0;break e;default:g=!1}}g&&(c.flags|=4)}c.ref!==null&&(c.flags|=512,c.flags|=2097152)}return Es(c),null;case 6:if(o&&c.stateNode!=null)sj(o,c,o.memoizedProps,g);else{if(typeof g!="string"&&c.stateNode===null)throw Error(r(166));if(h=hl(Lu.current),hl(pi.current),bf(c)){if(g=c.stateNode,h=c.memoizedProps,g[mi]=c,(S=g.nodeValue!==h)&&(o=sa,o!==null))switch(o.tag){case 3:hf(g.nodeValue,h,(o.mode&1)!==0);break;case 5:o.memoizedProps.suppressHydrationWarning!==!0&&hf(g.nodeValue,h,(o.mode&1)!==0)}S&&(c.flags|=4)}else g=(h.nodeType===9?h:h.ownerDocument).createTextNode(g),g[mi]=c,c.stateNode=g}return Es(c),null;case 13:if(qr(tn),g=c.memoizedState,o===null||o.memoizedState!==null&&o.memoizedState.dehydrated!==null){if(Xr&&aa!==null&&(c.mode&1)!==0&&(c.flags&128)===0)o1(),uc(),c.flags|=98560,S=!1;else if(S=bf(c),g!==null&&g.dehydrated!==null){if(o===null){if(!S)throw Error(r(318));if(S=c.memoizedState,S=S!==null?S.dehydrated:null,!S)throw Error(r(317));S[mi]=c}else uc(),(c.flags&128)===0&&(c.memoizedState=null),c.flags|=4;Es(c),S=!1}else Va!==null&&(Wg(Va),Va=null),S=!0;if(!S)return c.flags&65536?c:null}return(c.flags&128)!==0?(c.lanes=h,c):(g=g!==null,g!==(o!==null&&o.memoizedState!==null)&&g&&(c.child.flags|=8192,(c.mode&1)!==0&&(o===null||(tn.current&1)!==0?$n===0&&($n=3):Hg())),c.updateQueue!==null&&(c.flags|=4),Es(c),null);case 4:return mc(),Tg(o,c),o===null&&Tu(c.stateNode.containerInfo),Es(c),null;case 10:return ig(c.type._context),Es(c),null;case 17:return Hs(c.type)&&gf(),Es(c),null;case 19:if(qr(tn),S=c.memoizedState,S===null)return Es(c),null;if(g=(c.flags&128)!==0,E=S.rendering,E===null)if(g)Vu(S,!1);else{if($n!==0||o!==null&&(o.flags&128)!==0)for(o=c.child;o!==null;){if(E=Cf(o),E!==null){for(c.flags|=128,Vu(S,!1),g=E.updateQueue,g!==null&&(c.updateQueue=g,c.flags|=4),c.subtreeFlags=0,g=h,h=c.child;h!==null;)S=h,o=g,S.flags&=14680066,E=S.alternate,E===null?(S.childLanes=0,S.lanes=o,S.child=null,S.subtreeFlags=0,S.memoizedProps=null,S.memoizedState=null,S.updateQueue=null,S.dependencies=null,S.stateNode=null):(S.childLanes=E.childLanes,S.lanes=E.lanes,S.child=E.child,S.subtreeFlags=0,S.deletions=null,S.memoizedProps=E.memoizedProps,S.memoizedState=E.memoizedState,S.updateQueue=E.updateQueue,S.type=E.type,o=E.dependencies,S.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext}),h=h.sibling;return Mr(tn,tn.current&1|2),c.child}o=o.sibling}S.tail!==null&&tr()>vc&&(c.flags|=128,g=!0,Vu(S,!1),c.lanes=4194304)}else{if(!g)if(o=Cf(E),o!==null){if(c.flags|=128,g=!0,h=o.updateQueue,h!==null&&(c.updateQueue=h,c.flags|=4),Vu(S,!0),S.tail===null&&S.tailMode==="hidden"&&!E.alternate&&!Xr)return Es(c),null}else 2*tr()-S.renderingStartTime>vc&&h!==1073741824&&(c.flags|=128,g=!0,Vu(S,!1),c.lanes=4194304);S.isBackwards?(E.sibling=c.child,c.child=E):(h=S.last,h!==null?h.sibling=E:c.child=E,S.last=E)}return S.tail!==null?(c=S.tail,S.rendering=c,S.tail=c.sibling,S.renderingStartTime=tr(),c.sibling=null,h=tn.current,Mr(tn,g?h&1|2:h&1),c):(Es(c),null);case 22:case 23:return qg(),g=c.memoizedState!==null,o!==null&&o.memoizedState!==null!==g&&(c.flags|=8192),g&&(c.mode&1)!==0?(ia&1073741824)!==0&&(Es(c),c.subtreeFlags&6&&(c.flags|=8192)):Es(c),null;case 24:return null;case 25:return null}throw Error(r(156,c.tag))}function TI(o,c){switch(eg(c),c.tag){case 1:return Hs(c.type)&&gf(),o=c.flags,o&65536?(c.flags=o&-65537|128,c):null;case 3:return mc(),qr(qs),qr(Ns),hg(),o=c.flags,(o&65536)!==0&&(o&128)===0?(c.flags=o&-65537|128,c):null;case 5:return dg(c),null;case 13:if(qr(tn),o=c.memoizedState,o!==null&&o.dehydrated!==null){if(c.alternate===null)throw Error(r(340));uc()}return o=c.flags,o&65536?(c.flags=o&-65537|128,c):null;case 19:return qr(tn),null;case 4:return mc(),null;case 10:return ig(c.type._context),null;case 22:case 23:return qg(),null;case 24:return null;default:return null}}var Rf=!1,Ps=!1,II=typeof WeakSet=="function"?WeakSet:Set,ft=null;function gc(o,c){var h=o.ref;if(h!==null)if(typeof h=="function")try{h(null)}catch(g){ln(o,c,g)}else h.current=null}function Ig(o,c,h){try{h()}catch(g){ln(o,c,g)}}var aj=!1;function DI(o,c){if(qp=ba,o=Mb(),Mp(o)){if("selectionStart"in o)var h={start:o.selectionStart,end:o.selectionEnd};else e:{h=(h=o.ownerDocument)&&h.defaultView||window;var g=h.getSelection&&h.getSelection();if(g&&g.rangeCount!==0){h=g.anchorNode;var j=g.anchorOffset,S=g.focusNode;g=g.focusOffset;try{h.nodeType,S.nodeType}catch{h=null;break e}var E=0,z=-1,J=-1,xe=0,Me=0,Ue=o,Re=null;t:for(;;){for(var ut;Ue!==h||j!==0&&Ue.nodeType!==3||(z=E+j),Ue!==S||g!==0&&Ue.nodeType!==3||(J=E+g),Ue.nodeType===3&&(E+=Ue.nodeValue.length),(ut=Ue.firstChild)!==null;)Re=Ue,Ue=ut;for(;;){if(Ue===o)break t;if(Re===h&&++xe===j&&(z=E),Re===S&&++Me===g&&(J=E),(ut=Ue.nextSibling)!==null)break;Ue=Re,Re=Ue.parentNode}Ue=ut}h=z===-1||J===-1?null:{start:z,end:J}}else h=null}h=h||{start:0,end:0}}else h=null;for(Hp={focusedElem:o,selectionRange:h},ba=!1,ft=c;ft!==null;)if(c=ft,o=c.child,(c.subtreeFlags&1028)!==0&&o!==null)o.return=c,ft=o;else for(;ft!==null;){c=ft;try{var yt=c.alternate;if((c.flags&1024)!==0)switch(c.tag){case 0:case 11:case 15:break;case 1:if(yt!==null){var xt=yt.memoizedProps,mn=yt.memoizedState,ue=c.stateNode,ee=ue.getSnapshotBeforeUpdate(c.elementType===c.type?xt:qa(c.type,xt),mn);ue.__reactInternalSnapshotBeforeUpdate=ee}break;case 3:var me=c.stateNode.containerInfo;me.nodeType===1?me.textContent="":me.nodeType===9&&me.documentElement&&me.removeChild(me.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(r(163))}}catch(qe){ln(c,c.return,qe)}if(o=c.sibling,o!==null){o.return=c.return,ft=o;break}ft=c.return}return yt=aj,aj=!1,yt}function qu(o,c,h){var g=c.updateQueue;if(g=g!==null?g.lastEffect:null,g!==null){var j=g=g.next;do{if((j.tag&o)===o){var S=j.destroy;j.destroy=void 0,S!==void 0&&Ig(c,h,S)}j=j.next}while(j!==g)}}function Mf(o,c){if(c=c.updateQueue,c=c!==null?c.lastEffect:null,c!==null){var h=c=c.next;do{if((h.tag&o)===o){var g=h.create;h.destroy=g()}h=h.next}while(h!==c)}}function Dg(o){var c=o.ref;if(c!==null){var h=o.stateNode;switch(o.tag){case 5:o=h;break;default:o=h}typeof c=="function"?c(o):c.current=o}}function ij(o){var c=o.alternate;c!==null&&(o.alternate=null,ij(c)),o.child=null,o.deletions=null,o.sibling=null,o.tag===5&&(c=o.stateNode,c!==null&&(delete c[mi],delete c[Du],delete c[Jp],delete c[gI],delete c[yI])),o.stateNode=null,o.return=null,o.dependencies=null,o.memoizedProps=null,o.memoizedState=null,o.pendingProps=null,o.stateNode=null,o.updateQueue=null}function oj(o){return o.tag===5||o.tag===3||o.tag===4}function lj(o){e:for(;;){for(;o.sibling===null;){if(o.return===null||oj(o.return))return null;o=o.return}for(o.sibling.return=o.return,o=o.sibling;o.tag!==5&&o.tag!==6&&o.tag!==18;){if(o.flags&2||o.child===null||o.tag===4)continue e;o.child.return=o,o=o.child}if(!(o.flags&2))return o.stateNode}}function $g(o,c,h){var g=o.tag;if(g===5||g===6)o=o.stateNode,c?h.nodeType===8?h.parentNode.insertBefore(o,c):h.insertBefore(o,c):(h.nodeType===8?(c=h.parentNode,c.insertBefore(o,h)):(c=h,c.appendChild(o)),h=h._reactRootContainer,h!=null||c.onclick!==null||(c.onclick=mf));else if(g!==4&&(o=o.child,o!==null))for($g(o,c,h),o=o.sibling;o!==null;)$g(o,c,h),o=o.sibling}function Rg(o,c,h){var g=o.tag;if(g===5||g===6)o=o.stateNode,c?h.insertBefore(o,c):h.appendChild(o);else if(g!==4&&(o=o.child,o!==null))for(Rg(o,c,h),o=o.sibling;o!==null;)Rg(o,c,h),o=o.sibling}var hs=null,Ha=!1;function Oo(o,c,h){for(h=h.child;h!==null;)cj(o,c,h),h=h.sibling}function cj(o,c,h){if(_r&&typeof _r.onCommitFiberUnmount=="function")try{_r.onCommitFiberUnmount(Br,h)}catch{}switch(h.tag){case 5:Ps||gc(h,c);case 6:var g=hs,j=Ha;hs=null,Oo(o,c,h),hs=g,Ha=j,hs!==null&&(Ha?(o=hs,h=h.stateNode,o.nodeType===8?o.parentNode.removeChild(h):o.removeChild(h)):hs.removeChild(h.stateNode));break;case 18:hs!==null&&(Ha?(o=hs,h=h.stateNode,o.nodeType===8?Yp(o.parentNode,h):o.nodeType===1&&Yp(o,h),wa(o)):Yp(hs,h.stateNode));break;case 4:g=hs,j=Ha,hs=h.stateNode.containerInfo,Ha=!0,Oo(o,c,h),hs=g,Ha=j;break;case 0:case 11:case 14:case 15:if(!Ps&&(g=h.updateQueue,g!==null&&(g=g.lastEffect,g!==null))){j=g=g.next;do{var S=j,E=S.destroy;S=S.tag,E!==void 0&&((S&2)!==0||(S&4)!==0)&&Ig(h,c,E),j=j.next}while(j!==g)}Oo(o,c,h);break;case 1:if(!Ps&&(gc(h,c),g=h.stateNode,typeof g.componentWillUnmount=="function"))try{g.props=h.memoizedProps,g.state=h.memoizedState,g.componentWillUnmount()}catch(z){ln(h,c,z)}Oo(o,c,h);break;case 21:Oo(o,c,h);break;case 22:h.mode&1?(Ps=(g=Ps)||h.memoizedState!==null,Oo(o,c,h),Ps=g):Oo(o,c,h);break;default:Oo(o,c,h)}}function uj(o){var c=o.updateQueue;if(c!==null){o.updateQueue=null;var h=o.stateNode;h===null&&(h=o.stateNode=new II),c.forEach(function(g){var j=WI.bind(null,o,g);h.has(g)||(h.add(g),g.then(j,j))})}}function Ka(o,c){var h=c.deletions;if(h!==null)for(var g=0;g<h.length;g++){var j=h[g];try{var S=o,E=c,z=E;e:for(;z!==null;){switch(z.tag){case 5:hs=z.stateNode,Ha=!1;break e;case 3:hs=z.stateNode.containerInfo,Ha=!0;break e;case 4:hs=z.stateNode.containerInfo,Ha=!0;break e}z=z.return}if(hs===null)throw Error(r(160));cj(S,E,j),hs=null,Ha=!1;var J=j.alternate;J!==null&&(J.return=null),j.return=null}catch(xe){ln(j,c,xe)}}if(c.subtreeFlags&12854)for(c=c.child;c!==null;)dj(c,o),c=c.sibling}function dj(o,c){var h=o.alternate,g=o.flags;switch(o.tag){case 0:case 11:case 14:case 15:if(Ka(c,o),yi(o),g&4){try{qu(3,o,o.return),Mf(3,o)}catch(xt){ln(o,o.return,xt)}try{qu(5,o,o.return)}catch(xt){ln(o,o.return,xt)}}break;case 1:Ka(c,o),yi(o),g&512&&h!==null&&gc(h,h.return);break;case 5:if(Ka(c,o),yi(o),g&512&&h!==null&&gc(h,h.return),o.flags&32){var j=o.stateNode;try{Oe(j,"")}catch(xt){ln(o,o.return,xt)}}if(g&4&&(j=o.stateNode,j!=null)){var S=o.memoizedProps,E=h!==null?h.memoizedProps:S,z=o.type,J=o.updateQueue;if(o.updateQueue=null,J!==null)try{z==="input"&&S.type==="radio"&&S.name!=null&&zt(j,S),bt(z,E);var xe=bt(z,S);for(E=0;E<J.length;E+=2){var Me=J[E],Ue=J[E+1];Me==="style"?ze(j,Ue):Me==="dangerouslySetInnerHTML"?We(j,Ue):Me==="children"?Oe(j,Ue):C(j,Me,Ue,xe)}switch(z){case"input":Qe(j,S);break;case"textarea":we(j,S);break;case"select":var Re=j._wrapperState.wasMultiple;j._wrapperState.wasMultiple=!!S.multiple;var ut=S.value;ut!=null?L(j,!!S.multiple,ut,!1):Re!==!!S.multiple&&(S.defaultValue!=null?L(j,!!S.multiple,S.defaultValue,!0):L(j,!!S.multiple,S.multiple?[]:"",!1))}j[Du]=S}catch(xt){ln(o,o.return,xt)}}break;case 6:if(Ka(c,o),yi(o),g&4){if(o.stateNode===null)throw Error(r(162));j=o.stateNode,S=o.memoizedProps;try{j.nodeValue=S}catch(xt){ln(o,o.return,xt)}}break;case 3:if(Ka(c,o),yi(o),g&4&&h!==null&&h.memoizedState.isDehydrated)try{wa(c.containerInfo)}catch(xt){ln(o,o.return,xt)}break;case 4:Ka(c,o),yi(o);break;case 13:Ka(c,o),yi(o),j=o.child,j.flags&8192&&(S=j.memoizedState!==null,j.stateNode.isHidden=S,!S||j.alternate!==null&&j.alternate.memoizedState!==null||(Lg=tr())),g&4&&uj(o);break;case 22:if(Me=h!==null&&h.memoizedState!==null,o.mode&1?(Ps=(xe=Ps)||Me,Ka(c,o),Ps=xe):Ka(c,o),yi(o),g&8192){if(xe=o.memoizedState!==null,(o.stateNode.isHidden=xe)&&!Me&&(o.mode&1)!==0)for(ft=o,Me=o.child;Me!==null;){for(Ue=ft=Me;ft!==null;){switch(Re=ft,ut=Re.child,Re.tag){case 0:case 11:case 14:case 15:qu(4,Re,Re.return);break;case 1:gc(Re,Re.return);var yt=Re.stateNode;if(typeof yt.componentWillUnmount=="function"){g=Re,h=Re.return;try{c=g,yt.props=c.memoizedProps,yt.state=c.memoizedState,yt.componentWillUnmount()}catch(xt){ln(g,h,xt)}}break;case 5:gc(Re,Re.return);break;case 22:if(Re.memoizedState!==null){mj(Ue);continue}}ut!==null?(ut.return=Re,ft=ut):mj(Ue)}Me=Me.sibling}e:for(Me=null,Ue=o;;){if(Ue.tag===5){if(Me===null){Me=Ue;try{j=Ue.stateNode,xe?(S=j.style,typeof S.setProperty=="function"?S.setProperty("display","none","important"):S.display="none"):(z=Ue.stateNode,J=Ue.memoizedProps.style,E=J!=null&&J.hasOwnProperty("display")?J.display:null,z.style.display=Dt("display",E))}catch(xt){ln(o,o.return,xt)}}}else if(Ue.tag===6){if(Me===null)try{Ue.stateNode.nodeValue=xe?"":Ue.memoizedProps}catch(xt){ln(o,o.return,xt)}}else if((Ue.tag!==22&&Ue.tag!==23||Ue.memoizedState===null||Ue===o)&&Ue.child!==null){Ue.child.return=Ue,Ue=Ue.child;continue}if(Ue===o)break e;for(;Ue.sibling===null;){if(Ue.return===null||Ue.return===o)break e;Me===Ue&&(Me=null),Ue=Ue.return}Me===Ue&&(Me=null),Ue.sibling.return=Ue.return,Ue=Ue.sibling}}break;case 19:Ka(c,o),yi(o),g&4&&uj(o);break;case 21:break;default:Ka(c,o),yi(o)}}function yi(o){var c=o.flags;if(c&2){try{e:{for(var h=o.return;h!==null;){if(oj(h)){var g=h;break e}h=h.return}throw Error(r(160))}switch(g.tag){case 5:var j=g.stateNode;g.flags&32&&(Oe(j,""),g.flags&=-33);var S=lj(o);Rg(o,S,j);break;case 3:case 4:var E=g.stateNode.containerInfo,z=lj(o);$g(o,z,E);break;default:throw Error(r(161))}}catch(J){ln(o,o.return,J)}o.flags&=-3}c&4096&&(o.flags&=-4097)}function $I(o,c,h){ft=o,fj(o)}function fj(o,c,h){for(var g=(o.mode&1)!==0;ft!==null;){var j=ft,S=j.child;if(j.tag===22&&g){var E=j.memoizedState!==null||Rf;if(!E){var z=j.alternate,J=z!==null&&z.memoizedState!==null||Ps;z=Rf;var xe=Ps;if(Rf=E,(Ps=J)&&!xe)for(ft=j;ft!==null;)E=ft,J=E.child,E.tag===22&&E.memoizedState!==null?pj(j):J!==null?(J.return=E,ft=J):pj(j);for(;S!==null;)ft=S,fj(S),S=S.sibling;ft=j,Rf=z,Ps=xe}hj(o)}else(j.subtreeFlags&8772)!==0&&S!==null?(S.return=j,ft=S):hj(o)}}function hj(o){for(;ft!==null;){var c=ft;if((c.flags&8772)!==0){var h=c.alternate;try{if((c.flags&8772)!==0)switch(c.tag){case 0:case 11:case 15:Ps||Mf(5,c);break;case 1:var g=c.stateNode;if(c.flags&4&&!Ps)if(h===null)g.componentDidMount();else{var j=c.elementType===c.type?h.memoizedProps:qa(c.type,h.memoizedProps);g.componentDidUpdate(j,h.memoizedState,g.__reactInternalSnapshotBeforeUpdate)}var S=c.updateQueue;S!==null&&m1(c,S,g);break;case 3:var E=c.updateQueue;if(E!==null){if(h=null,c.child!==null)switch(c.child.tag){case 5:h=c.child.stateNode;break;case 1:h=c.child.stateNode}m1(c,E,h)}break;case 5:var z=c.stateNode;if(h===null&&c.flags&4){h=z;var J=c.memoizedProps;switch(c.type){case"button":case"input":case"select":case"textarea":J.autoFocus&&h.focus();break;case"img":J.src&&(h.src=J.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(c.memoizedState===null){var xe=c.alternate;if(xe!==null){var Me=xe.memoizedState;if(Me!==null){var Ue=Me.dehydrated;Ue!==null&&wa(Ue)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(r(163))}Ps||c.flags&512&&Dg(c)}catch(Re){ln(c,c.return,Re)}}if(c===o){ft=null;break}if(h=c.sibling,h!==null){h.return=c.return,ft=h;break}ft=c.return}}function mj(o){for(;ft!==null;){var c=ft;if(c===o){ft=null;break}var h=c.sibling;if(h!==null){h.return=c.return,ft=h;break}ft=c.return}}function pj(o){for(;ft!==null;){var c=ft;try{switch(c.tag){case 0:case 11:case 15:var h=c.return;try{Mf(4,c)}catch(J){ln(c,h,J)}break;case 1:var g=c.stateNode;if(typeof g.componentDidMount=="function"){var j=c.return;try{g.componentDidMount()}catch(J){ln(c,j,J)}}var S=c.return;try{Dg(c)}catch(J){ln(c,S,J)}break;case 5:var E=c.return;try{Dg(c)}catch(J){ln(c,E,J)}}}catch(J){ln(c,c.return,J)}if(c===o){ft=null;break}var z=c.sibling;if(z!==null){z.return=c.return,ft=z;break}ft=c.return}}var RI=Math.ceil,Ff=T.ReactCurrentDispatcher,Mg=T.ReactCurrentOwner,Pa=T.ReactCurrentBatchConfig,gr=0,Jn=null,Sn=null,ms=0,ia=0,yc=No(0),$n=0,Hu=null,pl=0,Lf=0,Fg=0,Ku=null,Gs=null,Lg=0,vc=1/0,Vi=null,zf=!1,zg=null,To=null,Uf=!1,Io=null,Bf=0,Gu=0,Ug=null,Wf=-1,Vf=0;function Ms(){return(gr&6)!==0?tr():Wf!==-1?Wf:Wf=tr()}function Do(o){return(o.mode&1)===0?1:(gr&2)!==0&&ms!==0?ms&-ms:xI.transition!==null?(Vf===0&&(Vf=dr()),Vf):(o=ct,o!==0||(o=window.event,o=o===void 0?16:$i(o.type)),o)}function Ga(o,c,h,g){if(50<Gu)throw Gu=0,Ug=null,Error(r(185));$t(o,h,g),((gr&2)===0||o!==Jn)&&(o===Jn&&((gr&2)===0&&(Lf|=h),$n===4&&$o(o,ms)),Ys(o,g),h===1&&gr===0&&(c.mode&1)===0&&(vc=tr()+500,vf&&Eo()))}function Ys(o,c){var h=o.callbackNode;Ie(o,c);var g=Q(o,o===Jn?ms:0);if(g===0)h!==null&&Hn(h),o.callbackNode=null,o.callbackPriority=0;else if(c=g&-g,o.callbackPriority!==c){if(h!=null&&Hn(h),c===1)o.tag===0?vI(yj.bind(null,o)):r1(yj.bind(null,o)),mI(function(){(gr&6)===0&&Eo()}),h=null;else{switch(hr(g)){case 1:h=Ar;break;case 4:h=ls;break;case 16:h=hn;break;case 536870912:h=Ws;break;default:h=hn}h=_j(h,gj.bind(null,o))}o.callbackPriority=c,o.callbackNode=h}}function gj(o,c){if(Wf=-1,Vf=0,(gr&6)!==0)throw Error(r(327));var h=o.callbackNode;if(xc()&&o.callbackNode!==h)return null;var g=Q(o,o===Jn?ms:0);if(g===0)return null;if((g&30)!==0||(g&o.expiredLanes)!==0||c)c=qf(o,g);else{c=g;var j=gr;gr|=2;var S=xj();(Jn!==o||ms!==c)&&(Vi=null,vc=tr()+500,yl(o,c));do try{LI();break}catch(z){vj(o,z)}while(!0);ag(),Ff.current=S,gr=j,Sn!==null?c=0:(Jn=null,ms=0,c=$n)}if(c!==0){if(c===2&&(j=Tt(o),j!==0&&(g=j,c=Bg(o,j))),c===1)throw h=Hu,yl(o,0),$o(o,g),Ys(o,tr()),h;if(c===6)$o(o,g);else{if(j=o.current.alternate,(g&30)===0&&!MI(j)&&(c=qf(o,g),c===2&&(S=Tt(o),S!==0&&(g=S,c=Bg(o,S))),c===1))throw h=Hu,yl(o,0),$o(o,g),Ys(o,tr()),h;switch(o.finishedWork=j,o.finishedLanes=g,c){case 0:case 1:throw Error(r(345));case 2:vl(o,Gs,Vi);break;case 3:if($o(o,g),(g&130023424)===g&&(c=Lg+500-tr(),10<c)){if(Q(o,0)!==0)break;if(j=o.suspendedLanes,(j&g)!==g){Ms(),o.pingedLanes|=o.suspendedLanes&j;break}o.timeoutHandle=Gp(vl.bind(null,o,Gs,Vi),c);break}vl(o,Gs,Vi);break;case 4:if($o(o,g),(g&4194240)===g)break;for(c=o.eventTimes,j=-1;0<g;){var E=31-ye(g);S=1<<E,E=c[E],E>j&&(j=E),g&=~S}if(g=j,g=tr()-g,g=(120>g?120:480>g?480:1080>g?1080:1920>g?1920:3e3>g?3e3:4320>g?4320:1960*RI(g/1960))-g,10<g){o.timeoutHandle=Gp(vl.bind(null,o,Gs,Vi),g);break}vl(o,Gs,Vi);break;case 5:vl(o,Gs,Vi);break;default:throw Error(r(329))}}}return Ys(o,tr()),o.callbackNode===h?gj.bind(null,o):null}function Bg(o,c){var h=Ku;return o.current.memoizedState.isDehydrated&&(yl(o,c).flags|=256),o=qf(o,c),o!==2&&(c=Gs,Gs=h,c!==null&&Wg(c)),o}function Wg(o){Gs===null?Gs=o:Gs.push.apply(Gs,o)}function MI(o){for(var c=o;;){if(c.flags&16384){var h=c.updateQueue;if(h!==null&&(h=h.stores,h!==null))for(var g=0;g<h.length;g++){var j=h[g],S=j.getSnapshot;j=j.value;try{if(!Wa(S(),j))return!1}catch{return!1}}}if(h=c.child,c.subtreeFlags&16384&&h!==null)h.return=c,c=h;else{if(c===o)break;for(;c.sibling===null;){if(c.return===null||c.return===o)return!0;c=c.return}c.sibling.return=c.return,c=c.sibling}}return!0}function $o(o,c){for(c&=~Fg,c&=~Lf,o.suspendedLanes|=c,o.pingedLanes&=~c,o=o.expirationTimes;0<c;){var h=31-ye(c),g=1<<h;o[h]=-1,c&=~g}}function yj(o){if((gr&6)!==0)throw Error(r(327));xc();var c=Q(o,0);if((c&1)===0)return Ys(o,tr()),null;var h=qf(o,c);if(o.tag!==0&&h===2){var g=Tt(o);g!==0&&(c=g,h=Bg(o,g))}if(h===1)throw h=Hu,yl(o,0),$o(o,c),Ys(o,tr()),h;if(h===6)throw Error(r(345));return o.finishedWork=o.current.alternate,o.finishedLanes=c,vl(o,Gs,Vi),Ys(o,tr()),null}function Vg(o,c){var h=gr;gr|=1;try{return o(c)}finally{gr=h,gr===0&&(vc=tr()+500,vf&&Eo())}}function gl(o){Io!==null&&Io.tag===0&&(gr&6)===0&&xc();var c=gr;gr|=1;var h=Pa.transition,g=ct;try{if(Pa.transition=null,ct=1,o)return o()}finally{ct=g,Pa.transition=h,gr=c,(gr&6)===0&&Eo()}}function qg(){ia=yc.current,qr(yc)}function yl(o,c){o.finishedWork=null,o.finishedLanes=0;var h=o.timeoutHandle;if(h!==-1&&(o.timeoutHandle=-1,hI(h)),Sn!==null)for(h=Sn.return;h!==null;){var g=h;switch(eg(g),g.tag){case 1:g=g.type.childContextTypes,g!=null&&gf();break;case 3:mc(),qr(qs),qr(Ns),hg();break;case 5:dg(g);break;case 4:mc();break;case 13:qr(tn);break;case 19:qr(tn);break;case 10:ig(g.type._context);break;case 22:case 23:qg()}h=h.return}if(Jn=o,Sn=o=Ro(o.current,null),ms=ia=c,$n=0,Hu=null,Fg=Lf=pl=0,Gs=Ku=null,fl!==null){for(c=0;c<fl.length;c++)if(h=fl[c],g=h.interleaved,g!==null){h.interleaved=null;var j=g.next,S=h.pending;if(S!==null){var E=S.next;S.next=j,g.next=E}h.pending=g}fl=null}return o}function vj(o,c){do{var h=Sn;try{if(ag(),Ef.current=Tf,Pf){for(var g=rn.memoizedState;g!==null;){var j=g.queue;j!==null&&(j.pending=null),g=g.next}Pf=!1}if(ml=0,Yn=Dn=rn=null,zu=!1,Uu=0,Mg.current=null,h===null||h.return===null){$n=1,Hu=c,Sn=null;break}e:{var S=o,E=h.return,z=h,J=c;if(c=ms,z.flags|=32768,J!==null&&typeof J=="object"&&typeof J.then=="function"){var xe=J,Me=z,Ue=Me.tag;if((Me.mode&1)===0&&(Ue===0||Ue===11||Ue===15)){var Re=Me.alternate;Re?(Me.updateQueue=Re.updateQueue,Me.memoizedState=Re.memoizedState,Me.lanes=Re.lanes):(Me.updateQueue=null,Me.memoizedState=null)}var ut=W1(E);if(ut!==null){ut.flags&=-257,V1(ut,E,z,S,c),ut.mode&1&&B1(S,xe,c),c=ut,J=xe;var yt=c.updateQueue;if(yt===null){var xt=new Set;xt.add(J),c.updateQueue=xt}else yt.add(J);break e}else{if((c&1)===0){B1(S,xe,c),Hg();break e}J=Error(r(426))}}else if(Xr&&z.mode&1){var mn=W1(E);if(mn!==null){(mn.flags&65536)===0&&(mn.flags|=256),V1(mn,E,z,S,c),ng(pc(J,z));break e}}S=J=pc(J,z),$n!==4&&($n=2),Ku===null?Ku=[S]:Ku.push(S),S=E;do{switch(S.tag){case 3:S.flags|=65536,c&=-c,S.lanes|=c;var ue=z1(S,J,c);h1(S,ue);break e;case 1:z=J;var ee=S.type,me=S.stateNode;if((S.flags&128)===0&&(typeof ee.getDerivedStateFromError=="function"||me!==null&&typeof me.componentDidCatch=="function"&&(To===null||!To.has(me)))){S.flags|=65536,c&=-c,S.lanes|=c;var qe=U1(S,z,c);h1(S,qe);break e}}S=S.return}while(S!==null)}bj(h)}catch(St){c=St,Sn===h&&h!==null&&(Sn=h=h.return);continue}break}while(!0)}function xj(){var o=Ff.current;return Ff.current=Tf,o===null?Tf:o}function Hg(){($n===0||$n===3||$n===2)&&($n=4),Jn===null||(pl&268435455)===0&&(Lf&268435455)===0||$o(Jn,ms)}function qf(o,c){var h=gr;gr|=2;var g=xj();(Jn!==o||ms!==c)&&(Vi=null,yl(o,c));do try{FI();break}catch(j){vj(o,j)}while(!0);if(ag(),gr=h,Ff.current=g,Sn!==null)throw Error(r(261));return Jn=null,ms=0,$n}function FI(){for(;Sn!==null;)wj(Sn)}function LI(){for(;Sn!==null&&!ks();)wj(Sn)}function wj(o){var c=Sj(o.alternate,o,ia);o.memoizedProps=o.pendingProps,c===null?bj(o):Sn=c,Mg.current=null}function bj(o){var c=o;do{var h=c.alternate;if(o=c.return,(c.flags&32768)===0){if(h=OI(h,c,ia),h!==null){Sn=h;return}}else{if(h=TI(h,c),h!==null){h.flags&=32767,Sn=h;return}if(o!==null)o.flags|=32768,o.subtreeFlags=0,o.deletions=null;else{$n=6,Sn=null;return}}if(c=c.sibling,c!==null){Sn=c;return}Sn=c=o}while(c!==null);$n===0&&($n=5)}function vl(o,c,h){var g=ct,j=Pa.transition;try{Pa.transition=null,ct=1,zI(o,c,h,g)}finally{Pa.transition=j,ct=g}return null}function zI(o,c,h,g){do xc();while(Io!==null);if((gr&6)!==0)throw Error(r(327));h=o.finishedWork;var j=o.finishedLanes;if(h===null)return null;if(o.finishedWork=null,o.finishedLanes=0,h===o.current)throw Error(r(177));o.callbackNode=null,o.callbackPriority=0;var S=h.lanes|h.childLanes;if(Pt(o,S),o===Jn&&(Sn=Jn=null,ms=0),(h.subtreeFlags&2064)===0&&(h.flags&2064)===0||Uf||(Uf=!0,_j(hn,function(){return xc(),null})),S=(h.flags&15990)!==0,(h.subtreeFlags&15990)!==0||S){S=Pa.transition,Pa.transition=null;var E=ct;ct=1;var z=gr;gr|=4,Mg.current=null,DI(o,h),dj(h,o),iI(Hp),ba=!!qp,Hp=qp=null,o.current=h,$I(h),Kn(),gr=z,ct=E,Pa.transition=S}else o.current=h;if(Uf&&(Uf=!1,Io=o,Bf=j),S=o.pendingLanes,S===0&&(To=null),X(h.stateNode),Ys(o,tr()),c!==null)for(g=o.onRecoverableError,h=0;h<c.length;h++)j=c[h],g(j.value,{componentStack:j.stack,digest:j.digest});if(zf)throw zf=!1,o=zg,zg=null,o;return(Bf&1)!==0&&o.tag!==0&&xc(),S=o.pendingLanes,(S&1)!==0?o===Ug?Gu++:(Gu=0,Ug=o):Gu=0,Eo(),null}function xc(){if(Io!==null){var o=hr(Bf),c=Pa.transition,h=ct;try{if(Pa.transition=null,ct=16>o?16:o,Io===null)var g=!1;else{if(o=Io,Io=null,Bf=0,(gr&6)!==0)throw Error(r(331));var j=gr;for(gr|=4,ft=o.current;ft!==null;){var S=ft,E=S.child;if((ft.flags&16)!==0){var z=S.deletions;if(z!==null){for(var J=0;J<z.length;J++){var xe=z[J];for(ft=xe;ft!==null;){var Me=ft;switch(Me.tag){case 0:case 11:case 15:qu(8,Me,S)}var Ue=Me.child;if(Ue!==null)Ue.return=Me,ft=Ue;else for(;ft!==null;){Me=ft;var Re=Me.sibling,ut=Me.return;if(ij(Me),Me===xe){ft=null;break}if(Re!==null){Re.return=ut,ft=Re;break}ft=ut}}}var yt=S.alternate;if(yt!==null){var xt=yt.child;if(xt!==null){yt.child=null;do{var mn=xt.sibling;xt.sibling=null,xt=mn}while(xt!==null)}}ft=S}}if((S.subtreeFlags&2064)!==0&&E!==null)E.return=S,ft=E;else e:for(;ft!==null;){if(S=ft,(S.flags&2048)!==0)switch(S.tag){case 0:case 11:case 15:qu(9,S,S.return)}var ue=S.sibling;if(ue!==null){ue.return=S.return,ft=ue;break e}ft=S.return}}var ee=o.current;for(ft=ee;ft!==null;){E=ft;var me=E.child;if((E.subtreeFlags&2064)!==0&&me!==null)me.return=E,ft=me;else e:for(E=ee;ft!==null;){if(z=ft,(z.flags&2048)!==0)try{switch(z.tag){case 0:case 11:case 15:Mf(9,z)}}catch(St){ln(z,z.return,St)}if(z===E){ft=null;break e}var qe=z.sibling;if(qe!==null){qe.return=z.return,ft=qe;break e}ft=z.return}}if(gr=j,Eo(),_r&&typeof _r.onPostCommitFiberRoot=="function")try{_r.onPostCommitFiberRoot(Br,o)}catch{}g=!0}return g}finally{ct=h,Pa.transition=c}}return!1}function jj(o,c,h){c=pc(h,c),c=z1(o,c,1),o=Ao(o,c,1),c=Ms(),o!==null&&($t(o,1,c),Ys(o,c))}function ln(o,c,h){if(o.tag===3)jj(o,o,h);else for(;c!==null;){if(c.tag===3){jj(c,o,h);break}else if(c.tag===1){var g=c.stateNode;if(typeof c.type.getDerivedStateFromError=="function"||typeof g.componentDidCatch=="function"&&(To===null||!To.has(g))){o=pc(h,o),o=U1(c,o,1),c=Ao(c,o,1),o=Ms(),c!==null&&($t(c,1,o),Ys(c,o));break}}c=c.return}}function UI(o,c,h){var g=o.pingCache;g!==null&&g.delete(c),c=Ms(),o.pingedLanes|=o.suspendedLanes&h,Jn===o&&(ms&h)===h&&($n===4||$n===3&&(ms&130023424)===ms&&500>tr()-Lg?yl(o,0):Fg|=h),Ys(o,c)}function kj(o,c){c===0&&((o.mode&1)===0?c=1:(c=I,I<<=1,(I&130023424)===0&&(I=4194304)));var h=Ms();o=Ui(o,c),o!==null&&($t(o,c,h),Ys(o,h))}function BI(o){var c=o.memoizedState,h=0;c!==null&&(h=c.retryLane),kj(o,h)}function WI(o,c){var h=0;switch(o.tag){case 13:var g=o.stateNode,j=o.memoizedState;j!==null&&(h=j.retryLane);break;case 19:g=o.stateNode;break;default:throw Error(r(314))}g!==null&&g.delete(c),kj(o,h)}var Sj;Sj=function(o,c,h){if(o!==null)if(o.memoizedProps!==c.pendingProps||qs.current)Ks=!0;else{if((o.lanes&h)===0&&(c.flags&128)===0)return Ks=!1,AI(o,c,h);Ks=(o.flags&131072)!==0}else Ks=!1,Xr&&(c.flags&1048576)!==0&&n1(c,wf,c.index);switch(c.lanes=0,c.tag){case 2:var g=c.type;$f(o,c),o=c.pendingProps;var j=oc(c,Ns.current);hc(c,h),j=gg(null,c,g,o,j,h);var S=yg();return c.flags|=1,typeof j=="object"&&j!==null&&typeof j.render=="function"&&j.$$typeof===void 0?(c.tag=1,c.memoizedState=null,c.updateQueue=null,Hs(g)?(S=!0,yf(c)):S=!1,c.memoizedState=j.state!==null&&j.state!==void 0?j.state:null,cg(c),j.updater=If,c.stateNode=j,j._reactInternals=c,kg(c,g,o,h),c=Cg(null,c,g,!0,S,h)):(c.tag=0,Xr&&S&&Zp(c),Rs(null,c,j,h),c=c.child),c;case 16:g=c.elementType;e:{switch($f(o,c),o=c.pendingProps,j=g._init,g=j(g._payload),c.type=g,j=c.tag=qI(g),o=qa(g,o),j){case 0:c=Ng(null,c,g,o,h);break e;case 1:c=J1(null,c,g,o,h);break e;case 11:c=q1(null,c,g,o,h);break e;case 14:c=H1(null,c,g,qa(g.type,o),h);break e}throw Error(r(306,g,""))}return c;case 0:return g=c.type,j=c.pendingProps,j=c.elementType===g?j:qa(g,j),Ng(o,c,g,j,h);case 1:return g=c.type,j=c.pendingProps,j=c.elementType===g?j:qa(g,j),J1(o,c,g,j,h);case 3:e:{if(X1(c),o===null)throw Error(r(387));g=c.pendingProps,S=c.memoizedState,j=S.element,f1(o,c),Nf(c,g,null,h);var E=c.memoizedState;if(g=E.element,S.isDehydrated)if(S={element:g,isDehydrated:!1,cache:E.cache,pendingSuspenseBoundaries:E.pendingSuspenseBoundaries,transitions:E.transitions},c.updateQueue.baseState=S,c.memoizedState=S,c.flags&256){j=pc(Error(r(423)),c),c=Q1(o,c,g,h,j);break e}else if(g!==j){j=pc(Error(r(424)),c),c=Q1(o,c,g,h,j);break e}else for(aa=_o(c.stateNode.containerInfo.firstChild),sa=c,Xr=!0,Va=null,h=u1(c,null,g,h),c.child=h;h;)h.flags=h.flags&-3|4096,h=h.sibling;else{if(uc(),g===j){c=Wi(o,c,h);break e}Rs(o,c,g,h)}c=c.child}return c;case 5:return p1(c),o===null&&rg(c),g=c.type,j=c.pendingProps,S=o!==null?o.memoizedProps:null,E=j.children,Kp(g,j)?E=null:S!==null&&Kp(g,S)&&(c.flags|=32),Y1(o,c),Rs(o,c,E,h),c.child;case 6:return o===null&&rg(c),null;case 13:return Z1(o,c,h);case 4:return ug(c,c.stateNode.containerInfo),g=c.pendingProps,o===null?c.child=dc(c,null,g,h):Rs(o,c,g,h),c.child;case 11:return g=c.type,j=c.pendingProps,j=c.elementType===g?j:qa(g,j),q1(o,c,g,j,h);case 7:return Rs(o,c,c.pendingProps,h),c.child;case 8:return Rs(o,c,c.pendingProps.children,h),c.child;case 12:return Rs(o,c,c.pendingProps.children,h),c.child;case 10:e:{if(g=c.type._context,j=c.pendingProps,S=c.memoizedProps,E=j.value,Mr(kf,g._currentValue),g._currentValue=E,S!==null)if(Wa(S.value,E)){if(S.children===j.children&&!qs.current){c=Wi(o,c,h);break e}}else for(S=c.child,S!==null&&(S.return=c);S!==null;){var z=S.dependencies;if(z!==null){E=S.child;for(var J=z.firstContext;J!==null;){if(J.context===g){if(S.tag===1){J=Bi(-1,h&-h),J.tag=2;var xe=S.updateQueue;if(xe!==null){xe=xe.shared;var Me=xe.pending;Me===null?J.next=J:(J.next=Me.next,Me.next=J),xe.pending=J}}S.lanes|=h,J=S.alternate,J!==null&&(J.lanes|=h),og(S.return,h,c),z.lanes|=h;break}J=J.next}}else if(S.tag===10)E=S.type===c.type?null:S.child;else if(S.tag===18){if(E=S.return,E===null)throw Error(r(341));E.lanes|=h,z=E.alternate,z!==null&&(z.lanes|=h),og(E,h,c),E=S.sibling}else E=S.child;if(E!==null)E.return=S;else for(E=S;E!==null;){if(E===c){E=null;break}if(S=E.sibling,S!==null){S.return=E.return,E=S;break}E=E.return}S=E}Rs(o,c,j.children,h),c=c.child}return c;case 9:return j=c.type,g=c.pendingProps.children,hc(c,h),j=Ca(j),g=g(j),c.flags|=1,Rs(o,c,g,h),c.child;case 14:return g=c.type,j=qa(g,c.pendingProps),j=qa(g.type,j),H1(o,c,g,j,h);case 15:return K1(o,c,c.type,c.pendingProps,h);case 17:return g=c.type,j=c.pendingProps,j=c.elementType===g?j:qa(g,j),$f(o,c),c.tag=1,Hs(g)?(o=!0,yf(c)):o=!1,hc(c,h),F1(c,g,j),kg(c,g,j,h),Cg(null,c,g,!0,o,h);case 19:return tj(o,c,h);case 22:return G1(o,c,h)}throw Error(r(156,c.tag))};function _j(o,c){return Ts(o,c)}function VI(o,c,h,g){this.tag=o,this.key=h,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=c,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=g,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Aa(o,c,h,g){return new VI(o,c,h,g)}function Kg(o){return o=o.prototype,!(!o||!o.isReactComponent)}function qI(o){if(typeof o=="function")return Kg(o)?1:0;if(o!=null){if(o=o.$$typeof,o===G)return 11;if(o===q)return 14}return 2}function Ro(o,c){var h=o.alternate;return h===null?(h=Aa(o.tag,c,o.key,o.mode),h.elementType=o.elementType,h.type=o.type,h.stateNode=o.stateNode,h.alternate=o,o.alternate=h):(h.pendingProps=c,h.type=o.type,h.flags=0,h.subtreeFlags=0,h.deletions=null),h.flags=o.flags&14680064,h.childLanes=o.childLanes,h.lanes=o.lanes,h.child=o.child,h.memoizedProps=o.memoizedProps,h.memoizedState=o.memoizedState,h.updateQueue=o.updateQueue,c=o.dependencies,h.dependencies=c===null?null:{lanes:c.lanes,firstContext:c.firstContext},h.sibling=o.sibling,h.index=o.index,h.ref=o.ref,h}function Hf(o,c,h,g,j,S){var E=2;if(g=o,typeof o=="function")Kg(o)&&(E=1);else if(typeof o=="string")E=5;else e:switch(o){case M:return xl(h.children,j,S,c);case R:E=8,j|=8;break;case K:return o=Aa(12,h,c,j|2),o.elementType=K,o.lanes=S,o;case ne:return o=Aa(13,h,c,j),o.elementType=ne,o.lanes=S,o;case W:return o=Aa(19,h,c,j),o.elementType=W,o.lanes=S,o;case $:return Kf(h,j,S,c);default:if(typeof o=="object"&&o!==null)switch(o.$$typeof){case B:E=10;break e;case ie:E=9;break e;case G:E=11;break e;case q:E=14;break e;case ve:E=16,g=null;break e}throw Error(r(130,o==null?o:typeof o,""))}return c=Aa(E,h,c,j),c.elementType=o,c.type=g,c.lanes=S,c}function xl(o,c,h,g){return o=Aa(7,o,g,c),o.lanes=h,o}function Kf(o,c,h,g){return o=Aa(22,o,g,c),o.elementType=$,o.lanes=h,o.stateNode={isHidden:!1},o}function Gg(o,c,h){return o=Aa(6,o,null,c),o.lanes=h,o}function Yg(o,c,h){return c=Aa(4,o.children!==null?o.children:[],o.key,c),c.lanes=h,c.stateNode={containerInfo:o.containerInfo,pendingChildren:null,implementation:o.implementation},c}function HI(o,c,h,g,j){this.tag=c,this.containerInfo=o,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Ve(0),this.expirationTimes=Ve(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ve(0),this.identifierPrefix=g,this.onRecoverableError=j,this.mutableSourceEagerHydrationData=null}function Jg(o,c,h,g,j,S,E,z,J){return o=new HI(o,c,h,z,J),c===1?(c=1,S===!0&&(c|=8)):c=0,S=Aa(3,null,null,c),o.current=S,S.stateNode=o,S.memoizedState={element:g,isDehydrated:h,cache:null,transitions:null,pendingSuspenseBoundaries:null},cg(S),o}function KI(o,c,h){var g=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:A,key:g==null?null:""+g,children:o,containerInfo:c,implementation:h}}function Nj(o){if(!o)return Co;o=o._reactInternals;e:{if(an(o)!==o||o.tag!==1)throw Error(r(170));var c=o;do{switch(c.tag){case 3:c=c.stateNode.context;break e;case 1:if(Hs(c.type)){c=c.stateNode.__reactInternalMemoizedMergedChildContext;break e}}c=c.return}while(c!==null);throw Error(r(171))}if(o.tag===1){var h=o.type;if(Hs(h))return e1(o,h,c)}return c}function Cj(o,c,h,g,j,S,E,z,J){return o=Jg(h,g,!0,o,j,S,E,z,J),o.context=Nj(null),h=o.current,g=Ms(),j=Do(h),S=Bi(g,j),S.callback=c??null,Ao(h,S,j),o.current.lanes=j,$t(o,j,g),Ys(o,g),o}function Gf(o,c,h,g){var j=c.current,S=Ms(),E=Do(j);return h=Nj(h),c.context===null?c.context=h:c.pendingContext=h,c=Bi(S,E),c.payload={element:o},g=g===void 0?null:g,g!==null&&(c.callback=g),o=Ao(j,c,E),o!==null&&(Ga(o,j,E,S),_f(o,j,E)),E}function Yf(o){if(o=o.current,!o.child)return null;switch(o.child.tag){case 5:return o.child.stateNode;default:return o.child.stateNode}}function Ej(o,c){if(o=o.memoizedState,o!==null&&o.dehydrated!==null){var h=o.retryLane;o.retryLane=h!==0&&h<c?h:c}}function Xg(o,c){Ej(o,c),(o=o.alternate)&&Ej(o,c)}function GI(){return null}var Pj=typeof reportError=="function"?reportError:function(o){console.error(o)};function Qg(o){this._internalRoot=o}Jf.prototype.render=Qg.prototype.render=function(o){var c=this._internalRoot;if(c===null)throw Error(r(409));Gf(o,c,null,null)},Jf.prototype.unmount=Qg.prototype.unmount=function(){var o=this._internalRoot;if(o!==null){this._internalRoot=null;var c=o.containerInfo;gl(function(){Gf(null,o,null,null)}),c[Mi]=null}};function Jf(o){this._internalRoot=o}Jf.prototype.unstable_scheduleHydration=function(o){if(o){var c=jn();o={blockedOn:null,target:o,priority:c};for(var h=0;h<Jr.length&&c!==0&&c<Jr[h].priority;h++);Jr.splice(h,0,o),h===0&&ol(o)}};function Zg(o){return!(!o||o.nodeType!==1&&o.nodeType!==9&&o.nodeType!==11)}function Xf(o){return!(!o||o.nodeType!==1&&o.nodeType!==9&&o.nodeType!==11&&(o.nodeType!==8||o.nodeValue!==" react-mount-point-unstable "))}function Aj(){}function YI(o,c,h,g,j){if(j){if(typeof g=="function"){var S=g;g=function(){var xe=Yf(E);S.call(xe)}}var E=Cj(c,g,o,0,null,!1,!1,"",Aj);return o._reactRootContainer=E,o[Mi]=E.current,Tu(o.nodeType===8?o.parentNode:o),gl(),E}for(;j=o.lastChild;)o.removeChild(j);if(typeof g=="function"){var z=g;g=function(){var xe=Yf(J);z.call(xe)}}var J=Jg(o,0,!1,null,null,!1,!1,"",Aj);return o._reactRootContainer=J,o[Mi]=J.current,Tu(o.nodeType===8?o.parentNode:o),gl(function(){Gf(c,J,h,g)}),J}function Qf(o,c,h,g,j){var S=h._reactRootContainer;if(S){var E=S;if(typeof j=="function"){var z=j;j=function(){var J=Yf(E);z.call(J)}}Gf(c,E,o,j)}else E=YI(h,c,o,j,g);return Yf(E)}ar=function(o){switch(o.tag){case 3:var c=o.stateNode;if(c.current.memoizedState.isDehydrated){var h=ae(c.pendingLanes);h!==0&&(sr(c,h|1),Ys(c,tr()),(gr&6)===0&&(vc=tr()+500,Eo()))}break;case 13:gl(function(){var g=Ui(o,1);if(g!==null){var j=Ms();Ga(g,o,1,j)}}),Xg(o,1)}},Zt=function(o){if(o.tag===13){var c=Ui(o,134217728);if(c!==null){var h=Ms();Ga(c,o,134217728,h)}Xg(o,134217728)}},Gt=function(o){if(o.tag===13){var c=Do(o),h=Ui(o,c);if(h!==null){var g=Ms();Ga(h,o,c,g)}Xg(o,c)}},jn=function(){return ct},kr=function(o,c){var h=ct;try{return ct=o,c()}finally{ct=h}},Jt=function(o,c,h){switch(c){case"input":if(Qe(o,h),c=h.name,h.type==="radio"&&c!=null){for(h=o;h.parentNode;)h=h.parentNode;for(h=h.querySelectorAll("input[name="+JSON.stringify(""+c)+'][type="radio"]'),c=0;c<h.length;c++){var g=h[c];if(g!==o&&g.form===o.form){var j=pf(g);if(!j)throw Error(r(90));se(g),Qe(g,j)}}}break;case"textarea":we(o,h);break;case"select":c=h.value,c!=null&&L(o,!!h.multiple,c,!1)}},nr=Vg,mr=gl;var JI={usingClientEntryPoint:!1,Events:[$u,ac,pf,Nt,Kt,Vg]},Yu={findFiberByHostInstance:ll,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},XI={bundleType:Yu.bundleType,version:Yu.version,rendererPackageName:Yu.rendererPackageName,rendererConfig:Yu.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:T.ReactCurrentDispatcher,findHostInstanceByFiber:function(o){return o=qn(o),o===null?null:o.stateNode},findFiberByHostInstance:Yu.findFiberByHostInstance||GI,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Zf=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Zf.isDisabled&&Zf.supportsFiber)try{Br=Zf.inject(XI),_r=Zf}catch{}}return Js.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=JI,Js.createPortal=function(o,c){var h=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Zg(c))throw Error(r(200));return KI(o,c,null,h)},Js.createRoot=function(o,c){if(!Zg(o))throw Error(r(299));var h=!1,g="",j=Pj;return c!=null&&(c.unstable_strictMode===!0&&(h=!0),c.identifierPrefix!==void 0&&(g=c.identifierPrefix),c.onRecoverableError!==void 0&&(j=c.onRecoverableError)),c=Jg(o,1,!1,null,null,h,!1,g,j),o[Mi]=c.current,Tu(o.nodeType===8?o.parentNode:o),new Qg(c)},Js.findDOMNode=function(o){if(o==null)return null;if(o.nodeType===1)return o;var c=o._reactInternals;if(c===void 0)throw typeof o.render=="function"?Error(r(188)):(o=Object.keys(o).join(","),Error(r(268,o)));return o=qn(c),o=o===null?null:o.stateNode,o},Js.flushSync=function(o){return gl(o)},Js.hydrate=function(o,c,h){if(!Xf(c))throw Error(r(200));return Qf(null,o,c,!0,h)},Js.hydrateRoot=function(o,c,h){if(!Zg(o))throw Error(r(405));var g=h!=null&&h.hydratedSources||null,j=!1,S="",E=Pj;if(h!=null&&(h.unstable_strictMode===!0&&(j=!0),h.identifierPrefix!==void 0&&(S=h.identifierPrefix),h.onRecoverableError!==void 0&&(E=h.onRecoverableError)),c=Cj(c,null,o,1,h??null,j,!1,S,E),o[Mi]=c.current,Tu(o),g)for(o=0;o<g.length;o++)h=g[o],j=h._getVersion,j=j(h._source),c.mutableSourceEagerHydrationData==null?c.mutableSourceEagerHydrationData=[h,j]:c.mutableSourceEagerHydrationData.push(h,j);return new Jf(c)},Js.render=function(o,c,h){if(!Xf(c))throw Error(r(200));return Qf(null,o,c,!1,h)},Js.unmountComponentAtNode=function(o){if(!Xf(o))throw Error(r(40));return o._reactRootContainer?(gl(function(){Qf(null,null,o,!1,function(){o._reactRootContainer=null,o[Mi]=null})}),!0):!1},Js.unstable_batchedUpdates=Vg,Js.unstable_renderSubtreeIntoContainer=function(o,c,h,g){if(!Xf(h))throw Error(r(200));if(o==null||o._reactInternals===void 0)throw Error(r(38));return Qf(o,c,h,!1,g)},Js.version="18.3.1-next-f1338f8080-20240426",Js}var Fj;function DC(){if(Fj)return ny.exports;Fj=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),ny.exports=cD(),ny.exports}var Lj;function uD(){if(Lj)return eh;Lj=1;var e=DC();return eh.createRoot=e.createRoot,eh.hydrateRoot=e.hydrateRoot,eh}var dD=uD();const fD=ai(dD);/**
 * react-router v7.9.4
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var zj="popstate";function hD(e={}){function t(n,s){let{pathname:a,search:l,hash:u}=n.location;return t0("",{pathname:a,search:l,hash:u},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function r(n,s){return typeof s=="string"?s:jd(s)}return pD(t,r,null,e)}function Zr(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function Ra(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function mD(){return Math.random().toString(36).substring(2,10)}function Uj(e,t){return{usr:e.state,key:e.key,idx:t}}function t0(e,t,r=null,n){return{pathname:typeof e=="string"?e:e.pathname,search:"",hash:"",...typeof t=="string"?ou(t):t,state:r,key:t&&t.key||n||mD()}}function jd({pathname:e="/",search:t="",hash:r=""}){return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function ou(e){let t={};if(e){let r=e.indexOf("#");r>=0&&(t.hash=e.substring(r),e=e.substring(0,r));let n=e.indexOf("?");n>=0&&(t.search=e.substring(n),e=e.substring(0,n)),e&&(t.pathname=e)}return t}function pD(e,t,r,n={}){let{window:s=document.defaultView,v5Compat:a=!1}=n,l=s.history,u="POP",d=null,m=f();m==null&&(m=0,l.replaceState({...l.state,idx:m},""));function f(){return(l.state||{idx:null}).idx}function p(){u="POP";let b=f(),_=b==null?null:b-m;m=b,d&&d({action:u,location:k.location,delta:_})}function v(b,_){u="PUSH";let N=t0(k.location,b,_);m=f()+1;let C=Uj(N,m),T=k.createHref(N);try{l.pushState(C,"",T)}catch(P){if(P instanceof DOMException&&P.name==="DataCloneError")throw P;s.location.assign(T)}a&&d&&d({action:u,location:k.location,delta:1})}function x(b,_){u="REPLACE";let N=t0(k.location,b,_);m=f();let C=Uj(N,m),T=k.createHref(N);l.replaceState(C,"",T),a&&d&&d({action:u,location:k.location,delta:0})}function w(b){return gD(b)}let k={get action(){return u},get location(){return e(s,l)},listen(b){if(d)throw new Error("A history only accepts one active listener");return s.addEventListener(zj,p),d=b,()=>{s.removeEventListener(zj,p),d=null}},createHref(b){return t(s,b)},createURL:w,encodeLocation(b){let _=w(b);return{pathname:_.pathname,search:_.search,hash:_.hash}},push:v,replace:x,go(b){return l.go(b)}};return k}function gD(e,t=!1){let r="http://localhost";typeof window<"u"&&(r=window.location.origin!=="null"?window.location.origin:window.location.href),Zr(r,"No window.location.(origin|href) available to create URL");let n=typeof e=="string"?e:jd(e);return n=n.replace(/ $/,"%20"),!t&&n.startsWith("//")&&(n=r+n),new URL(n,r)}function $C(e,t,r="/"){return yD(e,t,r,!1)}function yD(e,t,r,n){let s=typeof t=="string"?ou(t):t,a=eo(s.pathname||"/",r);if(a==null)return null;let l=RC(e);vD(l);let u=null;for(let d=0;u==null&&d<l.length;++d){let m=PD(a);u=CD(l[d],m,n)}return u}function RC(e,t=[],r=[],n="",s=!1){let a=(l,u,d=s,m)=>{let f={relativePath:m===void 0?l.path||"":m,caseSensitive:l.caseSensitive===!0,childrenIndex:u,route:l};if(f.relativePath.startsWith("/")){if(!f.relativePath.startsWith(n)&&d)return;Zr(f.relativePath.startsWith(n),`Absolute route path "${f.relativePath}" nested under path "${n}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),f.relativePath=f.relativePath.slice(n.length)}let p=Xi([n,f.relativePath]),v=r.concat(f);l.children&&l.children.length>0&&(Zr(l.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${p}".`),RC(l.children,t,v,p,d)),!(l.path==null&&!l.index)&&t.push({path:p,score:_D(p,l.index),routesMeta:v})};return e.forEach((l,u)=>{var d;if(l.path===""||!((d=l.path)!=null&&d.includes("?")))a(l,u);else for(let m of MC(l.path))a(l,u,!0,m)}),t}function MC(e){let t=e.split("/");if(t.length===0)return[];let[r,...n]=t,s=r.endsWith("?"),a=r.replace(/\?$/,"");if(n.length===0)return s?[a,""]:[a];let l=MC(n.join("/")),u=[];return u.push(...l.map(d=>d===""?a:[a,d].join("/"))),s&&u.push(...l),u.map(d=>e.startsWith("/")&&d===""?"/":d)}function vD(e){e.sort((t,r)=>t.score!==r.score?r.score-t.score:ND(t.routesMeta.map(n=>n.childrenIndex),r.routesMeta.map(n=>n.childrenIndex)))}var xD=/^:[\w-]+$/,wD=3,bD=2,jD=1,kD=10,SD=-2,Bj=e=>e==="*";function _D(e,t){let r=e.split("/"),n=r.length;return r.some(Bj)&&(n+=SD),t&&(n+=bD),r.filter(s=>!Bj(s)).reduce((s,a)=>s+(xD.test(a)?wD:a===""?jD:kD),n)}function ND(e,t){return e.length===t.length&&e.slice(0,-1).every((n,s)=>n===t[s])?e[e.length-1]-t[t.length-1]:0}function CD(e,t,r=!1){let{routesMeta:n}=e,s={},a="/",l=[];for(let u=0;u<n.length;++u){let d=n[u],m=u===n.length-1,f=a==="/"?t:t.slice(a.length)||"/",p=$h({path:d.relativePath,caseSensitive:d.caseSensitive,end:m},f),v=d.route;if(!p&&m&&r&&!n[n.length-1].route.index&&(p=$h({path:d.relativePath,caseSensitive:d.caseSensitive,end:!1},f)),!p)return null;Object.assign(s,p.params),l.push({params:s,pathname:Xi([a,p.pathname]),pathnameBase:ID(Xi([a,p.pathnameBase])),route:v}),p.pathnameBase!=="/"&&(a=Xi([a,p.pathnameBase]))}return l}function $h(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[r,n]=ED(e.path,e.caseSensitive,e.end),s=t.match(r);if(!s)return null;let a=s[0],l=a.replace(/(.)\/+$/,"$1"),u=s.slice(1);return{params:n.reduce((m,{paramName:f,isOptional:p},v)=>{if(f==="*"){let w=u[v]||"";l=a.slice(0,a.length-w.length).replace(/(.)\/+$/,"$1")}const x=u[v];return p&&!x?m[f]=void 0:m[f]=(x||"").replace(/%2F/g,"/"),m},{}),pathname:a,pathnameBase:l,pattern:e}}function ED(e,t=!1,r=!0){Ra(e==="*"||!e.endsWith("*")||e.endsWith("/*"),`Route path "${e}" will be treated as if it were "${e.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${e.replace(/\*$/,"/*")}".`);let n=[],s="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(l,u,d)=>(n.push({paramName:u,isOptional:d!=null}),d?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return e.endsWith("*")?(n.push({paramName:"*"}),s+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?s+="\\/*$":e!==""&&e!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,t?void 0:"i"),n]}function PD(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return Ra(!1,`The URL path "${e}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${t}).`),e}}function eo(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let r=t.endsWith("/")?t.length-1:t.length,n=e.charAt(r);return n&&n!=="/"?null:e.slice(r)||"/"}function AD(e,t="/"){let{pathname:r,search:n="",hash:s=""}=typeof e=="string"?ou(e):e;return{pathname:r?r.startsWith("/")?r:OD(r,t):t,search:DD(n),hash:$D(s)}}function OD(e,t){let r=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(s=>{s===".."?r.length>1&&r.pop():s!=="."&&r.push(s)}),r.length>1?r.join("/"):"/"}function iy(e,t,r,n){return`Cannot include a '${e}' character in a manually specified \`to.${t}\` field [${JSON.stringify(n)}].  Please separate it out to the \`to.${r}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function TD(e){return e.filter((t,r)=>r===0||t.route.path&&t.route.path.length>0)}function xx(e){let t=TD(e);return t.map((r,n)=>n===t.length-1?r.pathname:r.pathnameBase)}function wx(e,t,r,n=!1){let s;typeof e=="string"?s=ou(e):(s={...e},Zr(!s.pathname||!s.pathname.includes("?"),iy("?","pathname","search",s)),Zr(!s.pathname||!s.pathname.includes("#"),iy("#","pathname","hash",s)),Zr(!s.search||!s.search.includes("#"),iy("#","search","hash",s)));let a=e===""||s.pathname==="",l=a?"/":s.pathname,u;if(l==null)u=r;else{let p=t.length-1;if(!n&&l.startsWith("..")){let v=l.split("/");for(;v[0]==="..";)v.shift(),p-=1;s.pathname=v.join("/")}u=p>=0?t[p]:"/"}let d=AD(s,u),m=l&&l!=="/"&&l.endsWith("/"),f=(a||l===".")&&r.endsWith("/");return!d.pathname.endsWith("/")&&(m||f)&&(d.pathname+="/"),d}var Xi=e=>e.join("/").replace(/\/\/+/g,"/"),ID=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),DD=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,$D=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function RD(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}var FC=["POST","PUT","PATCH","DELETE"];new Set(FC);var MD=["GET",...FC];new Set(MD);var lu=y.createContext(null);lu.displayName="DataRouter";var Mm=y.createContext(null);Mm.displayName="DataRouterState";y.createContext(!1);var LC=y.createContext({isTransitioning:!1});LC.displayName="ViewTransition";var FD=y.createContext(new Map);FD.displayName="Fetchers";var LD=y.createContext(null);LD.displayName="Await";var ii=y.createContext(null);ii.displayName="Navigation";var zd=y.createContext(null);zd.displayName="Location";var Oi=y.createContext({outlet:null,matches:[],isDataRoute:!1});Oi.displayName="Route";var bx=y.createContext(null);bx.displayName="RouteError";function zD(e,{relative:t}={}){Zr(cu(),"useHref() may be used only in the context of a <Router> component.");let{basename:r,navigator:n}=y.useContext(ii),{hash:s,pathname:a,search:l}=Ud(e,{relative:t}),u=a;return r!=="/"&&(u=a==="/"?r:Xi([r,a])),n.createHref({pathname:u,search:l,hash:s})}function cu(){return y.useContext(zd)!=null}function Ti(){return Zr(cu(),"useLocation() may be used only in the context of a <Router> component."),y.useContext(zd).location}var zC="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function UC(e){y.useContext(ii).static||y.useLayoutEffect(e)}function oi(){let{isDataRoute:e}=y.useContext(Oi);return e?ZD():UD()}function UD(){Zr(cu(),"useNavigate() may be used only in the context of a <Router> component.");let e=y.useContext(lu),{basename:t,navigator:r}=y.useContext(ii),{matches:n}=y.useContext(Oi),{pathname:s}=Ti(),a=JSON.stringify(xx(n)),l=y.useRef(!1);return UC(()=>{l.current=!0}),y.useCallback((d,m={})=>{if(Ra(l.current,zC),!l.current)return;if(typeof d=="number"){r.go(d);return}let f=wx(d,JSON.parse(a),s,m.relative==="path");e==null&&t!=="/"&&(f.pathname=f.pathname==="/"?t:Xi([t,f.pathname])),(m.replace?r.replace:r.push)(f,m.state,m)},[t,r,a,s,e])}y.createContext(null);function Ud(e,{relative:t}={}){let{matches:r}=y.useContext(Oi),{pathname:n}=Ti(),s=JSON.stringify(xx(r));return y.useMemo(()=>wx(e,JSON.parse(s),n,t==="path"),[e,s,n,t])}function BD(e,t){return BC(e,t)}function BC(e,t,r,n,s){var N;Zr(cu(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:a}=y.useContext(ii),{matches:l}=y.useContext(Oi),u=l[l.length-1],d=u?u.params:{},m=u?u.pathname:"/",f=u?u.pathnameBase:"/",p=u&&u.route;{let C=p&&p.path||"";WC(m,!p||C.endsWith("*")||C.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${m}" (under <Route path="${C}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${C}"> to <Route path="${C==="/"?"*":`${C}/*`}">.`)}let v=Ti(),x;if(t){let C=typeof t=="string"?ou(t):t;Zr(f==="/"||((N=C.pathname)==null?void 0:N.startsWith(f)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${f}" but pathname "${C.pathname}" was given in the \`location\` prop.`),x=C}else x=v;let w=x.pathname||"/",k=w;if(f!=="/"){let C=f.replace(/^\//,"").split("/");k="/"+w.replace(/^\//,"").split("/").slice(C.length).join("/")}let b=$C(e,{pathname:k});Ra(p||b!=null,`No routes matched location "${x.pathname}${x.search}${x.hash}" `),Ra(b==null||b[b.length-1].route.element!==void 0||b[b.length-1].route.Component!==void 0||b[b.length-1].route.lazy!==void 0,`Matched leaf route at location "${x.pathname}${x.search}${x.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let _=KD(b&&b.map(C=>Object.assign({},C,{params:Object.assign({},d,C.params),pathname:Xi([f,a.encodeLocation?a.encodeLocation(C.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:C.pathname]),pathnameBase:C.pathnameBase==="/"?f:Xi([f,a.encodeLocation?a.encodeLocation(C.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:C.pathnameBase])})),l,r,n,s);return t&&_?y.createElement(zd.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...x},navigationType:"POP"}},_):_}function WD(){let e=QD(),t=RD(e)?`${e.status} ${e.statusText}`:e instanceof Error?e.message:JSON.stringify(e),r=e instanceof Error?e.stack:null,n="rgba(200,200,200, 0.5)",s={padding:"0.5rem",backgroundColor:n},a={padding:"2px 4px",backgroundColor:n},l=null;return console.error("Error handled by React Router default ErrorBoundary:",e),l=y.createElement(y.Fragment,null,y.createElement("p",null," Hey developer "),y.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",y.createElement("code",{style:a},"ErrorBoundary")," or"," ",y.createElement("code",{style:a},"errorElement")," prop on your route.")),y.createElement(y.Fragment,null,y.createElement("h2",null,"Unexpected Application Error!"),y.createElement("h3",{style:{fontStyle:"italic"}},t),r?y.createElement("pre",{style:s},r):null,l)}var VD=y.createElement(WD,null),qD=class extends y.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){this.props.unstable_onError?this.props.unstable_onError(e,t):console.error("React Router caught the following error during render",e)}render(){return this.state.error!==void 0?y.createElement(Oi.Provider,{value:this.props.routeContext},y.createElement(bx.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function HD({routeContext:e,match:t,children:r}){let n=y.useContext(lu);return n&&n.static&&n.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(n.staticContext._deepestRenderedBoundaryId=t.route.id),y.createElement(Oi.Provider,{value:e},r)}function KD(e,t=[],r=null,n=null,s=null){if(e==null){if(!r)return null;if(r.errors)e=r.matches;else if(t.length===0&&!r.initialized&&r.matches.length>0)e=r.matches;else return null}let a=e,l=r==null?void 0:r.errors;if(l!=null){let m=a.findIndex(f=>f.route.id&&(l==null?void 0:l[f.route.id])!==void 0);Zr(m>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(l).join(",")}`),a=a.slice(0,Math.min(a.length,m+1))}let u=!1,d=-1;if(r)for(let m=0;m<a.length;m++){let f=a[m];if((f.route.HydrateFallback||f.route.hydrateFallbackElement)&&(d=m),f.route.id){let{loaderData:p,errors:v}=r,x=f.route.loader&&!p.hasOwnProperty(f.route.id)&&(!v||v[f.route.id]===void 0);if(f.route.lazy||x){u=!0,d>=0?a=a.slice(0,d+1):a=[a[0]];break}}}return a.reduceRight((m,f,p)=>{let v,x=!1,w=null,k=null;r&&(v=l&&f.route.id?l[f.route.id]:void 0,w=f.route.errorElement||VD,u&&(d<0&&p===0?(WC("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),x=!0,k=null):d===p&&(x=!0,k=f.route.hydrateFallbackElement||null)));let b=t.concat(a.slice(0,p+1)),_=()=>{let N;return v?N=w:x?N=k:f.route.Component?N=y.createElement(f.route.Component,null):f.route.element?N=f.route.element:N=m,y.createElement(HD,{match:f,routeContext:{outlet:m,matches:b,isDataRoute:r!=null},children:N})};return r&&(f.route.ErrorBoundary||f.route.errorElement||p===0)?y.createElement(qD,{location:r.location,revalidation:r.revalidation,component:w,error:v,children:_(),routeContext:{outlet:null,matches:b,isDataRoute:!0},unstable_onError:n}):_()},null)}function jx(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function GD(e){let t=y.useContext(lu);return Zr(t,jx(e)),t}function YD(e){let t=y.useContext(Mm);return Zr(t,jx(e)),t}function JD(e){let t=y.useContext(Oi);return Zr(t,jx(e)),t}function kx(e){let t=JD(e),r=t.matches[t.matches.length-1];return Zr(r.route.id,`${e} can only be used on routes that contain a unique "id"`),r.route.id}function XD(){return kx("useRouteId")}function QD(){var n;let e=y.useContext(bx),t=YD("useRouteError"),r=kx("useRouteError");return e!==void 0?e:(n=t.errors)==null?void 0:n[r]}function ZD(){let{router:e}=GD("useNavigate"),t=kx("useNavigate"),r=y.useRef(!1);return UC(()=>{r.current=!0}),y.useCallback(async(s,a={})=>{Ra(r.current,zC),r.current&&(typeof s=="number"?e.navigate(s):await e.navigate(s,{fromRouteId:t,...a}))},[e,t])}var Wj={};function WC(e,t,r){!t&&!Wj[e]&&(Wj[e]=!0,Ra(!1,r))}y.memo(e3);function e3({routes:e,future:t,state:r,unstable_onError:n}){return BC(e,void 0,r,n,t)}function t3({to:e,replace:t,state:r,relative:n}){Zr(cu(),"<Navigate> may be used only in the context of a <Router> component.");let{static:s}=y.useContext(ii);Ra(!s,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:a}=y.useContext(Oi),{pathname:l}=Ti(),u=oi(),d=wx(e,xx(a),l,n==="path"),m=JSON.stringify(d);return y.useEffect(()=>{u(JSON.parse(m),{replace:t,state:r,relative:n})},[u,m,n,t,r]),null}function vi(e){Zr(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function r3({basename:e="/",children:t=null,location:r,navigationType:n="POP",navigator:s,static:a=!1}){Zr(!cu(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let l=e.replace(/^\/*/,"/"),u=y.useMemo(()=>({basename:l,navigator:s,static:a,future:{}}),[l,s,a]);typeof r=="string"&&(r=ou(r));let{pathname:d="/",search:m="",hash:f="",state:p=null,key:v="default"}=r,x=y.useMemo(()=>{let w=eo(d,l);return w==null?null:{location:{pathname:w,search:m,hash:f,state:p,key:v},navigationType:n}},[l,d,m,f,p,v,n]);return Ra(x!=null,`<Router basename="${l}"> is not able to match the URL "${d}${m}${f}" because it does not start with the basename, so the <Router> won't render anything.`),x==null?null:y.createElement(ii.Provider,{value:u},y.createElement(zd.Provider,{children:t,value:x}))}function n3({children:e,location:t}){return BD(r0(e),t)}function r0(e,t=[]){let r=[];return y.Children.forEach(e,(n,s)=>{if(!y.isValidElement(n))return;let a=[...t,s];if(n.type===y.Fragment){r.push.apply(r,r0(n.props.children,a));return}Zr(n.type===vi,`[${typeof n.type=="string"?n.type:n.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Zr(!n.props.index||!n.props.children,"An index route cannot have child routes.");let l={id:n.props.id||a.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,middleware:n.props.middleware,loader:n.props.loader,action:n.props.action,hydrateFallbackElement:n.props.hydrateFallbackElement,HydrateFallback:n.props.HydrateFallback,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.hasErrorBoundary===!0||n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(l.children=r0(n.props.children,a)),r.push(l)}),r}var _h="get",Nh="application/x-www-form-urlencoded";function Fm(e){return e!=null&&typeof e.tagName=="string"}function s3(e){return Fm(e)&&e.tagName.toLowerCase()==="button"}function a3(e){return Fm(e)&&e.tagName.toLowerCase()==="form"}function i3(e){return Fm(e)&&e.tagName.toLowerCase()==="input"}function o3(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function l3(e,t){return e.button===0&&(!t||t==="_self")&&!o3(e)}function n0(e=""){return new URLSearchParams(typeof e=="string"||Array.isArray(e)||e instanceof URLSearchParams?e:Object.keys(e).reduce((t,r)=>{let n=e[r];return t.concat(Array.isArray(n)?n.map(s=>[r,s]):[[r,n]])},[]))}function c3(e,t){let r=n0(e);return t&&t.forEach((n,s)=>{r.has(s)||t.getAll(s).forEach(a=>{r.append(s,a)})}),r}var th=null;function u3(){if(th===null)try{new FormData(document.createElement("form"),0),th=!1}catch{th=!0}return th}var d3=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function oy(e){return e!=null&&!d3.has(e)?(Ra(!1,`"${e}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Nh}"`),null):e}function f3(e,t){let r,n,s,a,l;if(a3(e)){let u=e.getAttribute("action");n=u?eo(u,t):null,r=e.getAttribute("method")||_h,s=oy(e.getAttribute("enctype"))||Nh,a=new FormData(e)}else if(s3(e)||i3(e)&&(e.type==="submit"||e.type==="image")){let u=e.form;if(u==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let d=e.getAttribute("formaction")||u.getAttribute("action");if(n=d?eo(d,t):null,r=e.getAttribute("formmethod")||u.getAttribute("method")||_h,s=oy(e.getAttribute("formenctype"))||oy(u.getAttribute("enctype"))||Nh,a=new FormData(u,e),!u3()){let{name:m,type:f,value:p}=e;if(f==="image"){let v=m?`${m}.`:"";a.append(`${v}x`,"0"),a.append(`${v}y`,"0")}else m&&a.append(m,p)}}else{if(Fm(e))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');r=_h,n=null,s=Nh,l=e}return a&&s==="text/plain"&&(l=a,a=void 0),{action:n,method:r.toLowerCase(),encType:s,formData:a,body:l}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function Sx(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function h3(e,t,r){let n=typeof e=="string"?new URL(e,typeof window>"u"?"server://singlefetch/":window.location.origin):e;return n.pathname==="/"?n.pathname=`_root.${r}`:t&&eo(n.pathname,t)==="/"?n.pathname=`${t.replace(/\/$/,"")}/_root.${r}`:n.pathname=`${n.pathname.replace(/\/$/,"")}.${r}`,n}async function m3(e,t){if(e.id in t)return t[e.id];try{let r=await import(e.module);return t[e.id]=r,r}catch(r){return console.error(`Error loading route module \`${e.module}\`, reloading page...`),console.error(r),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function p3(e){return e==null?!1:e.href==null?e.rel==="preload"&&typeof e.imageSrcSet=="string"&&typeof e.imageSizes=="string":typeof e.rel=="string"&&typeof e.href=="string"}async function g3(e,t,r){let n=await Promise.all(e.map(async s=>{let a=t.routes[s.route.id];if(a){let l=await m3(a,r);return l.links?l.links():[]}return[]}));return w3(n.flat(1).filter(p3).filter(s=>s.rel==="stylesheet"||s.rel==="preload").map(s=>s.rel==="stylesheet"?{...s,rel:"prefetch",as:"style"}:{...s,rel:"prefetch"}))}function Vj(e,t,r,n,s,a){let l=(d,m)=>r[m]?d.route.id!==r[m].route.id:!0,u=(d,m)=>{var f;return r[m].pathname!==d.pathname||((f=r[m].route.path)==null?void 0:f.endsWith("*"))&&r[m].params["*"]!==d.params["*"]};return a==="assets"?t.filter((d,m)=>l(d,m)||u(d,m)):a==="data"?t.filter((d,m)=>{var p;let f=n.routes[d.route.id];if(!f||!f.hasLoader)return!1;if(l(d,m)||u(d,m))return!0;if(d.route.shouldRevalidate){let v=d.route.shouldRevalidate({currentUrl:new URL(s.pathname+s.search+s.hash,window.origin),currentParams:((p=r[0])==null?void 0:p.params)||{},nextUrl:new URL(e,window.origin),nextParams:d.params,defaultShouldRevalidate:!0});if(typeof v=="boolean")return v}return!0}):[]}function y3(e,t,{includeHydrateFallback:r}={}){return v3(e.map(n=>{let s=t.routes[n.route.id];if(!s)return[];let a=[s.module];return s.clientActionModule&&(a=a.concat(s.clientActionModule)),s.clientLoaderModule&&(a=a.concat(s.clientLoaderModule)),r&&s.hydrateFallbackModule&&(a=a.concat(s.hydrateFallbackModule)),s.imports&&(a=a.concat(s.imports)),a}).flat(1))}function v3(e){return[...new Set(e)]}function x3(e){let t={},r=Object.keys(e).sort();for(let n of r)t[n]=e[n];return t}function w3(e,t){let r=new Set;return new Set(t),e.reduce((n,s)=>{let a=JSON.stringify(x3(s));return r.has(a)||(r.add(a),n.push({key:a,link:s})),n},[])}function VC(){let e=y.useContext(lu);return Sx(e,"You must render this element inside a <DataRouterContext.Provider> element"),e}function b3(){let e=y.useContext(Mm);return Sx(e,"You must render this element inside a <DataRouterStateContext.Provider> element"),e}var _x=y.createContext(void 0);_x.displayName="FrameworkContext";function qC(){let e=y.useContext(_x);return Sx(e,"You must render this element inside a <HydratedRouter> element"),e}function j3(e,t){let r=y.useContext(_x),[n,s]=y.useState(!1),[a,l]=y.useState(!1),{onFocus:u,onBlur:d,onMouseEnter:m,onMouseLeave:f,onTouchStart:p}=t,v=y.useRef(null);y.useEffect(()=>{if(e==="render"&&l(!0),e==="viewport"){let k=_=>{_.forEach(N=>{l(N.isIntersecting)})},b=new IntersectionObserver(k,{threshold:.5});return v.current&&b.observe(v.current),()=>{b.disconnect()}}},[e]),y.useEffect(()=>{if(n){let k=setTimeout(()=>{l(!0)},100);return()=>{clearTimeout(k)}}},[n]);let x=()=>{s(!0)},w=()=>{s(!1),l(!1)};return r?e!=="intent"?[a,v,{}]:[a,v,{onFocus:Xu(u,x),onBlur:Xu(d,w),onMouseEnter:Xu(m,x),onMouseLeave:Xu(f,w),onTouchStart:Xu(p,x)}]:[!1,v,{}]}function Xu(e,t){return r=>{e&&e(r),r.defaultPrevented||t(r)}}function k3({page:e,...t}){let{router:r}=VC(),n=y.useMemo(()=>$C(r.routes,e,r.basename),[r.routes,e,r.basename]);return n?y.createElement(_3,{page:e,matches:n,...t}):null}function S3(e){let{manifest:t,routeModules:r}=qC(),[n,s]=y.useState([]);return y.useEffect(()=>{let a=!1;return g3(e,t,r).then(l=>{a||s(l)}),()=>{a=!0}},[e,t,r]),n}function _3({page:e,matches:t,...r}){let n=Ti(),{manifest:s,routeModules:a}=qC(),{basename:l}=VC(),{loaderData:u,matches:d}=b3(),m=y.useMemo(()=>Vj(e,t,d,s,n,"data"),[e,t,d,s,n]),f=y.useMemo(()=>Vj(e,t,d,s,n,"assets"),[e,t,d,s,n]),p=y.useMemo(()=>{if(e===n.pathname+n.search+n.hash)return[];let w=new Set,k=!1;if(t.forEach(_=>{var C;let N=s.routes[_.route.id];!N||!N.hasLoader||(!m.some(T=>T.route.id===_.route.id)&&_.route.id in u&&((C=a[_.route.id])!=null&&C.shouldRevalidate)||N.hasClientLoader?k=!0:w.add(_.route.id))}),w.size===0)return[];let b=h3(e,l,"data");return k&&w.size>0&&b.searchParams.set("_routes",t.filter(_=>w.has(_.route.id)).map(_=>_.route.id).join(",")),[b.pathname+b.search]},[l,u,n,s,m,t,e,a]),v=y.useMemo(()=>y3(f,s),[f,s]),x=S3(f);return y.createElement(y.Fragment,null,p.map(w=>y.createElement("link",{key:w,rel:"prefetch",as:"fetch",href:w,...r})),v.map(w=>y.createElement("link",{key:w,rel:"modulepreload",href:w,...r})),x.map(({key:w,link:k})=>y.createElement("link",{key:w,nonce:r.nonce,...k})))}function N3(...e){return t=>{e.forEach(r=>{typeof r=="function"?r(t):r!=null&&(r.current=t)})}}var HC=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{HC&&(window.__reactRouterVersion="7.9.4")}catch{}function C3({basename:e,children:t,window:r}){let n=y.useRef();n.current==null&&(n.current=hD({window:r,v5Compat:!0}));let s=n.current,[a,l]=y.useState({action:s.action,location:s.location}),u=y.useCallback(d=>{y.startTransition(()=>l(d))},[l]);return y.useLayoutEffect(()=>s.listen(u),[s,u]),y.createElement(r3,{basename:e,children:t,location:a.location,navigationType:a.action,navigator:s})}var KC=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,GC=y.forwardRef(function({onClick:t,discover:r="render",prefetch:n="none",relative:s,reloadDocument:a,replace:l,state:u,target:d,to:m,preventScrollReset:f,viewTransition:p,...v},x){let{basename:w}=y.useContext(ii),k=typeof m=="string"&&KC.test(m),b,_=!1;if(typeof m=="string"&&k&&(b=m,HC))try{let K=new URL(window.location.href),B=m.startsWith("//")?new URL(K.protocol+m):new URL(m),ie=eo(B.pathname,w);B.origin===K.origin&&ie!=null?m=ie+B.search+B.hash:_=!0}catch{Ra(!1,`<Link to="${m}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let N=zD(m,{relative:s}),[C,T,P]=j3(n,v),A=O3(m,{replace:l,state:u,target:d,preventScrollReset:f,relative:s,viewTransition:p});function M(K){t&&t(K),K.defaultPrevented||A(K)}let R=y.createElement("a",{...v,...P,href:b||N,onClick:_||a?t:M,ref:N3(x,T),target:d,"data-discover":!k&&r==="render"?"true":void 0});return C&&!k?y.createElement(y.Fragment,null,R,y.createElement(k3,{page:N})):R});GC.displayName="Link";var E3=y.forwardRef(function({"aria-current":t="page",caseSensitive:r=!1,className:n="",end:s=!1,style:a,to:l,viewTransition:u,children:d,...m},f){let p=Ud(l,{relative:m.relative}),v=Ti(),x=y.useContext(Mm),{navigator:w,basename:k}=y.useContext(ii),b=x!=null&&R3(p)&&u===!0,_=w.encodeLocation?w.encodeLocation(p).pathname:p.pathname,N=v.pathname,C=x&&x.navigation&&x.navigation.location?x.navigation.location.pathname:null;r||(N=N.toLowerCase(),C=C?C.toLowerCase():null,_=_.toLowerCase()),C&&k&&(C=eo(C,k)||C);const T=_!=="/"&&_.endsWith("/")?_.length-1:_.length;let P=N===_||!s&&N.startsWith(_)&&N.charAt(T)==="/",A=C!=null&&(C===_||!s&&C.startsWith(_)&&C.charAt(_.length)==="/"),M={isActive:P,isPending:A,isTransitioning:b},R=P?t:void 0,K;typeof n=="function"?K=n(M):K=[n,P?"active":null,A?"pending":null,b?"transitioning":null].filter(Boolean).join(" ");let B=typeof a=="function"?a(M):a;return y.createElement(GC,{...m,"aria-current":R,className:K,ref:f,style:B,to:l,viewTransition:u},typeof d=="function"?d(M):d)});E3.displayName="NavLink";var P3=y.forwardRef(({discover:e="render",fetcherKey:t,navigate:r,reloadDocument:n,replace:s,state:a,method:l=_h,action:u,onSubmit:d,relative:m,preventScrollReset:f,viewTransition:p,...v},x)=>{let w=D3(),k=$3(u,{relative:m}),b=l.toLowerCase()==="get"?"get":"post",_=typeof u=="string"&&KC.test(u),N=C=>{if(d&&d(C),C.defaultPrevented)return;C.preventDefault();let T=C.nativeEvent.submitter,P=(T==null?void 0:T.getAttribute("formmethod"))||l;w(T||C.currentTarget,{fetcherKey:t,method:P,navigate:r,replace:s,state:a,relative:m,preventScrollReset:f,viewTransition:p})};return y.createElement("form",{ref:x,method:b,action:k,onSubmit:n?d:N,...v,"data-discover":!_&&e==="render"?"true":void 0})});P3.displayName="Form";function A3(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function YC(e){let t=y.useContext(lu);return Zr(t,A3(e)),t}function O3(e,{target:t,replace:r,state:n,preventScrollReset:s,relative:a,viewTransition:l}={}){let u=oi(),d=Ti(),m=Ud(e,{relative:a});return y.useCallback(f=>{if(l3(f,t)){f.preventDefault();let p=r!==void 0?r:jd(d)===jd(m);u(e,{replace:p,state:n,preventScrollReset:s,relative:a,viewTransition:l})}},[d,u,m,r,n,t,e,s,a,l])}function Nx(e){Ra(typeof URLSearchParams<"u","You cannot use the `useSearchParams` hook in a browser that does not support the URLSearchParams API. If you need to support Internet Explorer 11, we recommend you load a polyfill such as https://github.com/ungap/url-search-params.");let t=y.useRef(n0(e)),r=y.useRef(!1),n=Ti(),s=y.useMemo(()=>c3(n.search,r.current?null:t.current),[n.search]),a=oi(),l=y.useCallback((u,d)=>{const m=n0(typeof u=="function"?u(new URLSearchParams(s)):u);r.current=!0,a("?"+m,d)},[a,s]);return[s,l]}var T3=0,I3=()=>`__${String(++T3)}__`;function D3(){let{router:e}=YC("useSubmit"),{basename:t}=y.useContext(ii),r=XD();return y.useCallback(async(n,s={})=>{let{action:a,method:l,encType:u,formData:d,body:m}=f3(n,t);if(s.navigate===!1){let f=s.fetcherKey||I3();await e.fetch(f,r,s.action||a,{preventScrollReset:s.preventScrollReset,formData:d,body:m,formMethod:s.method||l,formEncType:s.encType||u,flushSync:s.flushSync})}else await e.navigate(s.action||a,{preventScrollReset:s.preventScrollReset,formData:d,body:m,formMethod:s.method||l,formEncType:s.encType||u,replace:s.replace,state:s.state,fromRouteId:r,flushSync:s.flushSync,viewTransition:s.viewTransition})},[e,t,r])}function $3(e,{relative:t}={}){let{basename:r}=y.useContext(ii),n=y.useContext(Oi);Zr(n,"useFormAction must be used inside a RouteContext");let[s]=n.matches.slice(-1),a={...Ud(e||".",{relative:t})},l=Ti();if(e==null){a.search=l.search;let u=new URLSearchParams(a.search),d=u.getAll("index");if(d.some(f=>f==="")){u.delete("index"),d.filter(p=>p).forEach(p=>u.append("index",p));let f=u.toString();a.search=f?`?${f}`:""}}return(!e||e===".")&&s.route.index&&(a.search=a.search?a.search.replace(/^\?/,"?index&"):"?index"),r!=="/"&&(a.pathname=a.pathname==="/"?r:Xi([r,a.pathname])),jd(a)}function R3(e,{relative:t}={}){let r=y.useContext(LC);Zr(r!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:n}=YC("useViewTransitionState"),s=Ud(e,{relative:t});if(!r.isTransitioning)return!1;let a=eo(r.currentLocation.pathname,n)||r.currentLocation.pathname,l=eo(r.nextLocation.pathname,n)||r.nextLocation.pathname;return $h(s.pathname,l)!=null||$h(s.pathname,a)!=null}var JC=DC();const M3="modulepreload",F3=function(e){return"/feature-voting-app/"+e},qj={},uu=function(t,r,n){let s=Promise.resolve();if(r&&r.length>0){let l=function(m){return Promise.all(m.map(f=>Promise.resolve(f).then(p=>({status:"fulfilled",value:p}),p=>({status:"rejected",reason:p}))))};document.getElementsByTagName("link");const u=document.querySelector("meta[property=csp-nonce]"),d=(u==null?void 0:u.nonce)||(u==null?void 0:u.getAttribute("nonce"));s=l(r.map(m=>{if(m=F3(m),m in qj)return;qj[m]=!0;const f=m.endsWith(".css"),p=f?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${m}"]${p}`))return;const v=document.createElement("link");if(v.rel=f?"stylesheet":M3,f||(v.as="script"),v.crossOrigin="",v.href=m,d&&v.setAttribute("nonce",d),document.head.appendChild(v),f)return new Promise((x,w)=>{v.addEventListener("load",x),v.addEventListener("error",()=>w(new Error(`Unable to preload CSS for ${m}`)))})}))}function a(l){const u=new Event("vite:preloadError",{cancelable:!0});if(u.payload=l,window.dispatchEvent(u),!u.defaultPrevented)throw l}return s.then(l=>{for(const u of l||[])u.status==="rejected"&&a(u.reason);return t().catch(a)})},L3=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...r)=>uu(async()=>{const{default:n}=await Promise.resolve().then(()=>du);return{default:n}},[]).then(({default:n})=>n(...r)):t=fetch,(...r)=>t(...r)};class Cx extends Error{constructor(t,r="FunctionsError",n){super(t),this.name=r,this.context=n}}class Hj extends Cx{constructor(t){super("Failed to send a request to the Edge Function","FunctionsFetchError",t)}}class Kj extends Cx{constructor(t){super("Relay Error invoking the Edge Function","FunctionsRelayError",t)}}class Gj extends Cx{constructor(t){super("Edge Function returned a non-2xx status code","FunctionsHttpError",t)}}var s0;(function(e){e.Any="any",e.ApNortheast1="ap-northeast-1",e.ApNortheast2="ap-northeast-2",e.ApSouth1="ap-south-1",e.ApSoutheast1="ap-southeast-1",e.ApSoutheast2="ap-southeast-2",e.CaCentral1="ca-central-1",e.EuCentral1="eu-central-1",e.EuWest1="eu-west-1",e.EuWest2="eu-west-2",e.EuWest3="eu-west-3",e.SaEast1="sa-east-1",e.UsEast1="us-east-1",e.UsWest1="us-west-1",e.UsWest2="us-west-2"})(s0||(s0={}));var z3=function(e,t,r,n){function s(a){return a instanceof r?a:new r(function(l){l(a)})}return new(r||(r=Promise))(function(a,l){function u(f){try{m(n.next(f))}catch(p){l(p)}}function d(f){try{m(n.throw(f))}catch(p){l(p)}}function m(f){f.done?a(f.value):s(f.value).then(u,d)}m((n=n.apply(e,t||[])).next())})};class U3{constructor(t,{headers:r={},customFetch:n,region:s=s0.Any}={}){this.url=t,this.headers=r,this.region=s,this.fetch=L3(n)}setAuth(t){this.headers.Authorization=`Bearer ${t}`}invoke(t){return z3(this,arguments,void 0,function*(r,n={}){var s;try{const{headers:a,method:l,body:u,signal:d}=n;let m={},{region:f}=n;f||(f=this.region);const p=new URL(`${this.url}/${r}`);f&&f!=="any"&&(m["x-region"]=f,p.searchParams.set("forceFunctionRegion",f));let v;u&&(a&&!Object.prototype.hasOwnProperty.call(a,"Content-Type")||!a)&&(typeof Blob<"u"&&u instanceof Blob||u instanceof ArrayBuffer?(m["Content-Type"]="application/octet-stream",v=u):typeof u=="string"?(m["Content-Type"]="text/plain",v=u):typeof FormData<"u"&&u instanceof FormData?v=u:(m["Content-Type"]="application/json",v=JSON.stringify(u)));const x=yield this.fetch(p.toString(),{method:l||"POST",headers:Object.assign(Object.assign(Object.assign({},m),this.headers),a),body:v,signal:d}).catch(_=>{throw _.name==="AbortError"?_:new Hj(_)}),w=x.headers.get("x-relay-error");if(w&&w==="true")throw new Kj(x);if(!x.ok)throw new Gj(x);let k=((s=x.headers.get("Content-Type"))!==null&&s!==void 0?s:"text/plain").split(";")[0].trim(),b;return k==="application/json"?b=yield x.json():k==="application/octet-stream"?b=yield x.blob():k==="text/event-stream"?b=x:k==="multipart/form-data"?b=yield x.formData():b=yield x.text(),{data:b,error:null,response:x}}catch(a){return a instanceof Error&&a.name==="AbortError"?{data:null,error:new Hj(a)}:{data:null,error:a,response:a instanceof Gj||a instanceof Kj?a.context:void 0}}})}}var Qn={},wc={},bc={},jc={},kc={},Sc={},B3=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},Yc=B3();const W3=Yc.fetch,XC=Yc.fetch.bind(Yc),QC=Yc.Headers,V3=Yc.Request,q3=Yc.Response,du=Object.freeze(Object.defineProperty({__proto__:null,Headers:QC,Request:V3,Response:q3,default:XC,fetch:W3},Symbol.toStringTag,{value:"Module"})),H3=rD(du);var rh={},Yj;function ZC(){if(Yj)return rh;Yj=1,Object.defineProperty(rh,"__esModule",{value:!0});class e extends Error{constructor(r){super(r.message),this.name="PostgrestError",this.details=r.details,this.hint=r.hint,this.code=r.code}}return rh.default=e,rh}var Jj;function eE(){if(Jj)return Sc;Jj=1;var e=Sc&&Sc.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(Sc,"__esModule",{value:!0});const t=e(H3),r=e(ZC());class n{constructor(a){var l,u;this.shouldThrowOnError=!1,this.method=a.method,this.url=a.url,this.headers=new Headers(a.headers),this.schema=a.schema,this.body=a.body,this.shouldThrowOnError=(l=a.shouldThrowOnError)!==null&&l!==void 0?l:!1,this.signal=a.signal,this.isMaybeSingle=(u=a.isMaybeSingle)!==null&&u!==void 0?u:!1,a.fetch?this.fetch=a.fetch:typeof fetch>"u"?this.fetch=t.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(a,l){return this.headers=new Headers(this.headers),this.headers.set(a,l),this}then(a,l){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const u=this.fetch;let d=u(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async m=>{var f,p,v,x;let w=null,k=null,b=null,_=m.status,N=m.statusText;if(m.ok){if(this.method!=="HEAD"){const A=await m.text();A===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((f=this.headers.get("Accept"))===null||f===void 0)&&f.includes("application/vnd.pgrst.plan+text"))?k=A:k=JSON.parse(A))}const T=(p=this.headers.get("Prefer"))===null||p===void 0?void 0:p.match(/count=(exact|planned|estimated)/),P=(v=m.headers.get("content-range"))===null||v===void 0?void 0:v.split("/");T&&P&&P.length>1&&(b=parseInt(P[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(k)&&(k.length>1?(w={code:"PGRST116",details:`Results contain ${k.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},k=null,b=null,_=406,N="Not Acceptable"):k.length===1?k=k[0]:k=null)}else{const T=await m.text();try{w=JSON.parse(T),Array.isArray(w)&&m.status===404&&(k=[],w=null,_=200,N="OK")}catch{m.status===404&&T===""?(_=204,N="No Content"):w={message:T}}if(w&&this.isMaybeSingle&&(!((x=w==null?void 0:w.details)===null||x===void 0)&&x.includes("0 rows"))&&(w=null,_=200,N="OK"),w&&this.shouldThrowOnError)throw new r.default(w)}return{error:w,data:k,count:b,status:_,statusText:N}});return this.shouldThrowOnError||(d=d.catch(m=>{var f,p,v;return{error:{message:`${(f=m==null?void 0:m.name)!==null&&f!==void 0?f:"FetchError"}: ${m==null?void 0:m.message}`,details:`${(p=m==null?void 0:m.stack)!==null&&p!==void 0?p:""}`,hint:"",code:`${(v=m==null?void 0:m.code)!==null&&v!==void 0?v:""}`},data:null,count:null,status:0,statusText:""}})),d.then(a,l)}returns(){return this}overrideTypes(){return this}}return Sc.default=n,Sc}var Xj;function tE(){if(Xj)return kc;Xj=1;var e=kc&&kc.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(kc,"__esModule",{value:!0});const t=e(eE());class r extends t.default{select(s){let a=!1;const l=(s??"*").split("").map(u=>/\s/.test(u)&&!a?"":(u==='"'&&(a=!a),u)).join("");return this.url.searchParams.set("select",l),this.headers.append("Prefer","return=representation"),this}order(s,{ascending:a=!0,nullsFirst:l,foreignTable:u,referencedTable:d=u}={}){const m=d?`${d}.order`:"order",f=this.url.searchParams.get(m);return this.url.searchParams.set(m,`${f?`${f},`:""}${s}.${a?"asc":"desc"}${l===void 0?"":l?".nullsfirst":".nullslast"}`),this}limit(s,{foreignTable:a,referencedTable:l=a}={}){const u=typeof l>"u"?"limit":`${l}.limit`;return this.url.searchParams.set(u,`${s}`),this}range(s,a,{foreignTable:l,referencedTable:u=l}={}){const d=typeof u>"u"?"offset":`${u}.offset`,m=typeof u>"u"?"limit":`${u}.limit`;return this.url.searchParams.set(d,`${s}`),this.url.searchParams.set(m,`${a-s+1}`),this}abortSignal(s){return this.signal=s,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:s=!1,verbose:a=!1,settings:l=!1,buffers:u=!1,wal:d=!1,format:m="text"}={}){var f;const p=[s?"analyze":null,a?"verbose":null,l?"settings":null,u?"buffers":null,d?"wal":null].filter(Boolean).join("|"),v=(f=this.headers.get("Accept"))!==null&&f!==void 0?f:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${m}; for="${v}"; options=${p};`),m==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(s){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${s}`),this}}return kc.default=r,kc}var Qj;function Ex(){if(Qj)return jc;Qj=1;var e=jc&&jc.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(jc,"__esModule",{value:!0});const t=e(tE());class r extends t.default{eq(s,a){return this.url.searchParams.append(s,`eq.${a}`),this}neq(s,a){return this.url.searchParams.append(s,`neq.${a}`),this}gt(s,a){return this.url.searchParams.append(s,`gt.${a}`),this}gte(s,a){return this.url.searchParams.append(s,`gte.${a}`),this}lt(s,a){return this.url.searchParams.append(s,`lt.${a}`),this}lte(s,a){return this.url.searchParams.append(s,`lte.${a}`),this}like(s,a){return this.url.searchParams.append(s,`like.${a}`),this}likeAllOf(s,a){return this.url.searchParams.append(s,`like(all).{${a.join(",")}}`),this}likeAnyOf(s,a){return this.url.searchParams.append(s,`like(any).{${a.join(",")}}`),this}ilike(s,a){return this.url.searchParams.append(s,`ilike.${a}`),this}ilikeAllOf(s,a){return this.url.searchParams.append(s,`ilike(all).{${a.join(",")}}`),this}ilikeAnyOf(s,a){return this.url.searchParams.append(s,`ilike(any).{${a.join(",")}}`),this}is(s,a){return this.url.searchParams.append(s,`is.${a}`),this}in(s,a){const l=Array.from(new Set(a)).map(u=>typeof u=="string"&&new RegExp("[,()]").test(u)?`"${u}"`:`${u}`).join(",");return this.url.searchParams.append(s,`in.(${l})`),this}contains(s,a){return typeof a=="string"?this.url.searchParams.append(s,`cs.${a}`):Array.isArray(a)?this.url.searchParams.append(s,`cs.{${a.join(",")}}`):this.url.searchParams.append(s,`cs.${JSON.stringify(a)}`),this}containedBy(s,a){return typeof a=="string"?this.url.searchParams.append(s,`cd.${a}`):Array.isArray(a)?this.url.searchParams.append(s,`cd.{${a.join(",")}}`):this.url.searchParams.append(s,`cd.${JSON.stringify(a)}`),this}rangeGt(s,a){return this.url.searchParams.append(s,`sr.${a}`),this}rangeGte(s,a){return this.url.searchParams.append(s,`nxl.${a}`),this}rangeLt(s,a){return this.url.searchParams.append(s,`sl.${a}`),this}rangeLte(s,a){return this.url.searchParams.append(s,`nxr.${a}`),this}rangeAdjacent(s,a){return this.url.searchParams.append(s,`adj.${a}`),this}overlaps(s,a){return typeof a=="string"?this.url.searchParams.append(s,`ov.${a}`):this.url.searchParams.append(s,`ov.{${a.join(",")}}`),this}textSearch(s,a,{config:l,type:u}={}){let d="";u==="plain"?d="pl":u==="phrase"?d="ph":u==="websearch"&&(d="w");const m=l===void 0?"":`(${l})`;return this.url.searchParams.append(s,`${d}fts${m}.${a}`),this}match(s){return Object.entries(s).forEach(([a,l])=>{this.url.searchParams.append(a,`eq.${l}`)}),this}not(s,a,l){return this.url.searchParams.append(s,`not.${a}.${l}`),this}or(s,{foreignTable:a,referencedTable:l=a}={}){const u=l?`${l}.or`:"or";return this.url.searchParams.append(u,`(${s})`),this}filter(s,a,l){return this.url.searchParams.append(s,`${a}.${l}`),this}}return jc.default=r,jc}var Zj;function rE(){if(Zj)return bc;Zj=1;var e=bc&&bc.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(bc,"__esModule",{value:!0});const t=e(Ex());class r{constructor(s,{headers:a={},schema:l,fetch:u}){this.url=s,this.headers=new Headers(a),this.schema=l,this.fetch=u}select(s,a){const{head:l=!1,count:u}=a??{},d=l?"HEAD":"GET";let m=!1;const f=(s??"*").split("").map(p=>/\s/.test(p)&&!m?"":(p==='"'&&(m=!m),p)).join("");return this.url.searchParams.set("select",f),u&&this.headers.append("Prefer",`count=${u}`),new t.default({method:d,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(s,{count:a,defaultToNull:l=!0}={}){var u;const d="POST";if(a&&this.headers.append("Prefer",`count=${a}`),l||this.headers.append("Prefer","missing=default"),Array.isArray(s)){const m=s.reduce((f,p)=>f.concat(Object.keys(p)),[]);if(m.length>0){const f=[...new Set(m)].map(p=>`"${p}"`);this.url.searchParams.set("columns",f.join(","))}}return new t.default({method:d,url:this.url,headers:this.headers,schema:this.schema,body:s,fetch:(u=this.fetch)!==null&&u!==void 0?u:fetch})}upsert(s,{onConflict:a,ignoreDuplicates:l=!1,count:u,defaultToNull:d=!0}={}){var m;const f="POST";if(this.headers.append("Prefer",`resolution=${l?"ignore":"merge"}-duplicates`),a!==void 0&&this.url.searchParams.set("on_conflict",a),u&&this.headers.append("Prefer",`count=${u}`),d||this.headers.append("Prefer","missing=default"),Array.isArray(s)){const p=s.reduce((v,x)=>v.concat(Object.keys(x)),[]);if(p.length>0){const v=[...new Set(p)].map(x=>`"${x}"`);this.url.searchParams.set("columns",v.join(","))}}return new t.default({method:f,url:this.url,headers:this.headers,schema:this.schema,body:s,fetch:(m=this.fetch)!==null&&m!==void 0?m:fetch})}update(s,{count:a}={}){var l;const u="PATCH";return a&&this.headers.append("Prefer",`count=${a}`),new t.default({method:u,url:this.url,headers:this.headers,schema:this.schema,body:s,fetch:(l=this.fetch)!==null&&l!==void 0?l:fetch})}delete({count:s}={}){var a;const l="DELETE";return s&&this.headers.append("Prefer",`count=${s}`),new t.default({method:l,url:this.url,headers:this.headers,schema:this.schema,fetch:(a=this.fetch)!==null&&a!==void 0?a:fetch})}}return bc.default=r,bc}var ek;function K3(){if(ek)return wc;ek=1;var e=wc&&wc.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(wc,"__esModule",{value:!0});const t=e(rE()),r=e(Ex());class n{constructor(a,{headers:l={},schema:u,fetch:d}={}){this.url=a,this.headers=new Headers(l),this.schemaName=u,this.fetch=d}from(a){const l=new URL(`${this.url}/${a}`);return new t.default(l,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(a){return new n(this.url,{headers:this.headers,schema:a,fetch:this.fetch})}rpc(a,l={},{head:u=!1,get:d=!1,count:m}={}){var f;let p;const v=new URL(`${this.url}/rpc/${a}`);let x;u||d?(p=u?"HEAD":"GET",Object.entries(l).filter(([k,b])=>b!==void 0).map(([k,b])=>[k,Array.isArray(b)?`{${b.join(",")}}`:`${b}`]).forEach(([k,b])=>{v.searchParams.append(k,b)})):(p="POST",x=l);const w=new Headers(this.headers);return m&&w.set("Prefer",`count=${m}`),new r.default({method:p,url:v,headers:w,schema:this.schemaName,body:x,fetch:(f=this.fetch)!==null&&f!==void 0?f:fetch})}}return wc.default=n,wc}var tk;function G3(){if(tk)return Qn;tk=1;var e=Qn&&Qn.__importDefault||function(u){return u&&u.__esModule?u:{default:u}};Object.defineProperty(Qn,"__esModule",{value:!0}),Qn.PostgrestError=Qn.PostgrestBuilder=Qn.PostgrestTransformBuilder=Qn.PostgrestFilterBuilder=Qn.PostgrestQueryBuilder=Qn.PostgrestClient=void 0;const t=e(K3());Qn.PostgrestClient=t.default;const r=e(rE());Qn.PostgrestQueryBuilder=r.default;const n=e(Ex());Qn.PostgrestFilterBuilder=n.default;const s=e(tE());Qn.PostgrestTransformBuilder=s.default;const a=e(eE());Qn.PostgrestBuilder=a.default;const l=e(ZC());return Qn.PostgrestError=l.default,Qn.default={PostgrestClient:t.default,PostgrestQueryBuilder:r.default,PostgrestFilterBuilder:n.default,PostgrestTransformBuilder:s.default,PostgrestBuilder:a.default,PostgrestError:l.default},Qn}var Y3=G3();const J3=ai(Y3),{PostgrestClient:X3,PostgrestQueryBuilder:oee,PostgrestFilterBuilder:lee,PostgrestTransformBuilder:cee,PostgrestBuilder:uee,PostgrestError:dee}=J3;class Q3{static detectEnvironment(){var t;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((t=navigator.userAgent)===null||t===void 0)&&t.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const r=process.versions;if(r&&r.node){const n=r.node,s=parseInt(n.replace(/^v/,"").split(".")[0]);return s>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${s} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${s} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const t=this.detectEnvironment();if(t.constructor)return t.constructor;let r=t.error||"WebSocket not supported in this environment.";throw t.workaround&&(r+=`

Suggested solution: ${t.workaround}`),new Error(r)}static createWebSocket(t,r){const n=this.getWebSocketConstructor();return new n(t,r)}static isWebSocketSupported(){try{const t=this.detectEnvironment();return t.type==="native"||t.type==="ws"}catch{return!1}}}const Z3="2.74.0",e$=`realtime-js/${Z3}`,t$="1.0.0",a0=1e4,r$=1e3,n$=100;var gd;(function(e){e[e.connecting=0]="connecting",e[e.open=1]="open",e[e.closing=2]="closing",e[e.closed=3]="closed"})(gd||(gd={}));var Rn;(function(e){e.closed="closed",e.errored="errored",e.joined="joined",e.joining="joining",e.leaving="leaving"})(Rn||(Rn={}));var Xa;(function(e){e.close="phx_close",e.error="phx_error",e.join="phx_join",e.reply="phx_reply",e.leave="phx_leave",e.access_token="access_token"})(Xa||(Xa={}));var i0;(function(e){e.websocket="websocket"})(i0||(i0={}));var Nl;(function(e){e.Connecting="connecting",e.Open="open",e.Closing="closing",e.Closed="closed"})(Nl||(Nl={}));class s${constructor(){this.HEADER_LENGTH=1}decode(t,r){return t.constructor===ArrayBuffer?r(this._binaryDecode(t)):r(typeof t=="string"?JSON.parse(t):{})}_binaryDecode(t){const r=new DataView(t),n=new TextDecoder;return this._decodeBroadcast(t,r,n)}_decodeBroadcast(t,r,n){const s=r.getUint8(1),a=r.getUint8(2);let l=this.HEADER_LENGTH+2;const u=n.decode(t.slice(l,l+s));l=l+s;const d=n.decode(t.slice(l,l+a));l=l+a;const m=JSON.parse(n.decode(t.slice(l,t.byteLength)));return{ref:null,topic:u,event:d,payload:m}}}class nE{constructor(t,r){this.callback=t,this.timerCalc=r,this.timer=void 0,this.tries=0,this.callback=t,this.timerCalc=r}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var Fr;(function(e){e.abstime="abstime",e.bool="bool",e.date="date",e.daterange="daterange",e.float4="float4",e.float8="float8",e.int2="int2",e.int4="int4",e.int4range="int4range",e.int8="int8",e.int8range="int8range",e.json="json",e.jsonb="jsonb",e.money="money",e.numeric="numeric",e.oid="oid",e.reltime="reltime",e.text="text",e.time="time",e.timestamp="timestamp",e.timestamptz="timestamptz",e.timetz="timetz",e.tsrange="tsrange",e.tstzrange="tstzrange"})(Fr||(Fr={}));const rk=(e,t,r={})=>{var n;const s=(n=r.skipTypes)!==null&&n!==void 0?n:[];return t?Object.keys(t).reduce((a,l)=>(a[l]=a$(l,e,t,s),a),{}):{}},a$=(e,t,r,n)=>{const s=t.find(u=>u.name===e),a=s==null?void 0:s.type,l=r[e];return a&&!n.includes(a)?sE(a,l):o0(l)},sE=(e,t)=>{if(e.charAt(0)==="_"){const r=e.slice(1,e.length);return c$(t,r)}switch(e){case Fr.bool:return i$(t);case Fr.float4:case Fr.float8:case Fr.int2:case Fr.int4:case Fr.int8:case Fr.numeric:case Fr.oid:return o$(t);case Fr.json:case Fr.jsonb:return l$(t);case Fr.timestamp:return u$(t);case Fr.abstime:case Fr.date:case Fr.daterange:case Fr.int4range:case Fr.int8range:case Fr.money:case Fr.reltime:case Fr.text:case Fr.time:case Fr.timestamptz:case Fr.timetz:case Fr.tsrange:case Fr.tstzrange:return o0(t);default:return o0(t)}},o0=e=>e,i$=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},o$=e=>{if(typeof e=="string"){const t=parseFloat(e);if(!Number.isNaN(t))return t}return e},l$=e=>{if(typeof e=="string")try{return JSON.parse(e)}catch(t){return console.log(`JSON parse error: ${t}`),e}return e},c$=(e,t)=>{if(typeof e!="string")return e;const r=e.length-1,n=e[r];if(e[0]==="{"&&n==="}"){let a;const l=e.slice(1,r);try{a=JSON.parse("["+l+"]")}catch{a=l?l.split(","):[]}return a.map(u=>sE(t,u))}return e},u$=e=>typeof e=="string"?e.replace(" ","T"):e,aE=e=>{let t=e;return t=t.replace(/^ws/i,"http"),t=t.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),t.replace(/\/+$/,"")+"/api/broadcast"};class ly{constructor(t,r,n={},s=a0){this.channel=t,this.event=r,this.payload=n,this.timeout=s,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(t){this.timeout=t,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(t){this.payload=Object.assign(Object.assign({},this.payload),t)}receive(t,r){var n;return this._hasReceived(t)&&r((n=this.receivedResp)===null||n===void 0?void 0:n.response),this.recHooks.push({status:t,callback:r}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const t=r=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=r,this._matchReceive(r)};this.channel._on(this.refEvent,{},t),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(t,r){this.refEvent&&this.channel._trigger(this.refEvent,{status:t,response:r})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:t,response:r}){this.recHooks.filter(n=>n.status===t).forEach(n=>n.callback(r))}_hasReceived(t){return this.receivedResp&&this.receivedResp.status===t}}var nk;(function(e){e.SYNC="sync",e.JOIN="join",e.LEAVE="leave"})(nk||(nk={}));class yd{constructor(t,r){this.channel=t,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const n=(r==null?void 0:r.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(n.state,{},s=>{const{onJoin:a,onLeave:l,onSync:u}=this.caller;this.joinRef=this.channel._joinRef(),this.state=yd.syncState(this.state,s,a,l),this.pendingDiffs.forEach(d=>{this.state=yd.syncDiff(this.state,d,a,l)}),this.pendingDiffs=[],u()}),this.channel._on(n.diff,{},s=>{const{onJoin:a,onLeave:l,onSync:u}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(s):(this.state=yd.syncDiff(this.state,s,a,l),u())}),this.onJoin((s,a,l)=>{this.channel._trigger("presence",{event:"join",key:s,currentPresences:a,newPresences:l})}),this.onLeave((s,a,l)=>{this.channel._trigger("presence",{event:"leave",key:s,currentPresences:a,leftPresences:l})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(t,r,n,s){const a=this.cloneDeep(t),l=this.transformState(r),u={},d={};return this.map(a,(m,f)=>{l[m]||(d[m]=f)}),this.map(l,(m,f)=>{const p=a[m];if(p){const v=f.map(b=>b.presence_ref),x=p.map(b=>b.presence_ref),w=f.filter(b=>x.indexOf(b.presence_ref)<0),k=p.filter(b=>v.indexOf(b.presence_ref)<0);w.length>0&&(u[m]=w),k.length>0&&(d[m]=k)}else u[m]=f}),this.syncDiff(a,{joins:u,leaves:d},n,s)}static syncDiff(t,r,n,s){const{joins:a,leaves:l}={joins:this.transformState(r.joins),leaves:this.transformState(r.leaves)};return n||(n=()=>{}),s||(s=()=>{}),this.map(a,(u,d)=>{var m;const f=(m=t[u])!==null&&m!==void 0?m:[];if(t[u]=this.cloneDeep(d),f.length>0){const p=t[u].map(x=>x.presence_ref),v=f.filter(x=>p.indexOf(x.presence_ref)<0);t[u].unshift(...v)}n(u,f,d)}),this.map(l,(u,d)=>{let m=t[u];if(!m)return;const f=d.map(p=>p.presence_ref);m=m.filter(p=>f.indexOf(p.presence_ref)<0),t[u]=m,s(u,m,d),m.length===0&&delete t[u]}),t}static map(t,r){return Object.getOwnPropertyNames(t).map(n=>r(n,t[n]))}static transformState(t){return t=this.cloneDeep(t),Object.getOwnPropertyNames(t).reduce((r,n)=>{const s=t[n];return"metas"in s?r[n]=s.metas.map(a=>(a.presence_ref=a.phx_ref,delete a.phx_ref,delete a.phx_ref_prev,a)):r[n]=s,r},{})}static cloneDeep(t){return JSON.parse(JSON.stringify(t))}onJoin(t){this.caller.onJoin=t}onLeave(t){this.caller.onLeave=t}onSync(t){this.caller.onSync=t}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var sk;(function(e){e.ALL="*",e.INSERT="INSERT",e.UPDATE="UPDATE",e.DELETE="DELETE"})(sk||(sk={}));var vd;(function(e){e.BROADCAST="broadcast",e.PRESENCE="presence",e.POSTGRES_CHANGES="postgres_changes",e.SYSTEM="system"})(vd||(vd={}));var Hi;(function(e){e.SUBSCRIBED="SUBSCRIBED",e.TIMED_OUT="TIMED_OUT",e.CLOSED="CLOSED",e.CHANNEL_ERROR="CHANNEL_ERROR"})(Hi||(Hi={}));class Px{constructor(t,r={config:{}},n){var s,a;if(this.topic=t,this.params=r,this.socket=n,this.bindings={},this.state=Rn.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=t.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},r.config),this.timeout=this.socket.timeout,this.joinPush=new ly(this,Xa.join,this.params,this.timeout),this.rejoinTimer=new nE(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Rn.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(l=>l.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Rn.closed,this.socket._remove(this)}),this._onError(l=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,l),this.state=Rn.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Rn.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",l=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,l),this.state=Rn.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Xa.reply,{},(l,u)=>{this._trigger(this._replyEventName(u),l)}),this.presence=new yd(this),this.broadcastEndpointURL=aE(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((a=(s=this.params.config)===null||s===void 0?void 0:s.broadcast)===null||a===void 0)&&a.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(t,r=this.timeout){var n,s,a;if(this.socket.isConnected()||this.socket.connect(),this.state==Rn.closed){const{config:{broadcast:l,presence:u,private:d}}=this.params,m=(s=(n=this.bindings.postgres_changes)===null||n===void 0?void 0:n.map(x=>x.filter))!==null&&s!==void 0?s:[],f=!!this.bindings[vd.PRESENCE]&&this.bindings[vd.PRESENCE].length>0||((a=this.params.config.presence)===null||a===void 0?void 0:a.enabled)===!0,p={},v={broadcast:l,presence:Object.assign(Object.assign({},u),{enabled:f}),postgres_changes:m,private:d};this.socket.accessTokenValue&&(p.access_token=this.socket.accessTokenValue),this._onError(x=>t==null?void 0:t(Hi.CHANNEL_ERROR,x)),this._onClose(()=>t==null?void 0:t(Hi.CLOSED)),this.updateJoinPayload(Object.assign({config:v},p)),this.joinedOnce=!0,this._rejoin(r),this.joinPush.receive("ok",async({postgres_changes:x})=>{var w;if(this.socket.setAuth(),x===void 0){t==null||t(Hi.SUBSCRIBED);return}else{const k=this.bindings.postgres_changes,b=(w=k==null?void 0:k.length)!==null&&w!==void 0?w:0,_=[];for(let N=0;N<b;N++){const C=k[N],{filter:{event:T,schema:P,table:A,filter:M}}=C,R=x&&x[N];if(R&&R.event===T&&R.schema===P&&R.table===A&&R.filter===M)_.push(Object.assign(Object.assign({},C),{id:R.id}));else{this.unsubscribe(),this.state=Rn.errored,t==null||t(Hi.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=_,t&&t(Hi.SUBSCRIBED);return}}).receive("error",x=>{this.state=Rn.errored,t==null||t(Hi.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(x).join(", ")||"error")))}).receive("timeout",()=>{t==null||t(Hi.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(t,r={}){return await this.send({type:"presence",event:"track",payload:t},r.timeout||this.timeout)}async untrack(t={}){return await this.send({type:"presence",event:"untrack"},t)}on(t,r,n){return this.state===Rn.joined&&t===vd.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(t,r,n)}async send(t,r={}){var n,s;if(!this._canPush()&&t.type==="broadcast"){const{event:a,payload:l}=t,d={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:a,payload:l,private:this.private}]})};try{const m=await this._fetchWithTimeout(this.broadcastEndpointURL,d,(n=r.timeout)!==null&&n!==void 0?n:this.timeout);return await((s=m.body)===null||s===void 0?void 0:s.cancel()),m.ok?"ok":"error"}catch(m){return m.name==="AbortError"?"timed out":"error"}}else return new Promise(a=>{var l,u,d;const m=this._push(t.type,t,r.timeout||this.timeout);t.type==="broadcast"&&!(!((d=(u=(l=this.params)===null||l===void 0?void 0:l.config)===null||u===void 0?void 0:u.broadcast)===null||d===void 0)&&d.ack)&&a("ok"),m.receive("ok",()=>a("ok")),m.receive("error",()=>a("error")),m.receive("timeout",()=>a("timed out"))})}updateJoinPayload(t){this.joinPush.updatePayload(t)}unsubscribe(t=this.timeout){this.state=Rn.leaving;const r=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Xa.close,"leave",this._joinRef())};this.joinPush.destroy();let n=null;return new Promise(s=>{n=new ly(this,Xa.leave,{},t),n.receive("ok",()=>{r(),s("ok")}).receive("timeout",()=>{r(),s("timed out")}).receive("error",()=>{s("error")}),n.send(),this._canPush()||n.trigger("ok",{})}).finally(()=>{n==null||n.destroy()})}teardown(){this.pushBuffer.forEach(t=>t.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=Rn.closed,this.bindings={}}async _fetchWithTimeout(t,r,n){const s=new AbortController,a=setTimeout(()=>s.abort(),n),l=await this.socket.fetch(t,Object.assign(Object.assign({},r),{signal:s.signal}));return clearTimeout(a),l}_push(t,r,n=this.timeout){if(!this.joinedOnce)throw`tried to push '${t}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let s=new ly(this,t,r,n);return this._canPush()?s.send():this._addToPushBuffer(s),s}_addToPushBuffer(t){if(t.startTimeout(),this.pushBuffer.push(t),this.pushBuffer.length>n$){const r=this.pushBuffer.shift();r&&(r.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${r.event}`,r.payload))}}_onMessage(t,r,n){return r}_isMember(t){return this.topic===t}_joinRef(){return this.joinPush.ref}_trigger(t,r,n){var s,a;const l=t.toLocaleLowerCase(),{close:u,error:d,leave:m,join:f}=Xa;if(n&&[u,d,m,f].indexOf(l)>=0&&n!==this._joinRef())return;let v=this._onMessage(l,r,n);if(r&&!v)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(l)?(s=this.bindings.postgres_changes)===null||s===void 0||s.filter(x=>{var w,k,b;return((w=x.filter)===null||w===void 0?void 0:w.event)==="*"||((b=(k=x.filter)===null||k===void 0?void 0:k.event)===null||b===void 0?void 0:b.toLocaleLowerCase())===l}).map(x=>x.callback(v,n)):(a=this.bindings[l])===null||a===void 0||a.filter(x=>{var w,k,b,_,N,C;if(["broadcast","presence","postgres_changes"].includes(l))if("id"in x){const T=x.id,P=(w=x.filter)===null||w===void 0?void 0:w.event;return T&&((k=r.ids)===null||k===void 0?void 0:k.includes(T))&&(P==="*"||(P==null?void 0:P.toLocaleLowerCase())===((b=r.data)===null||b===void 0?void 0:b.type.toLocaleLowerCase()))}else{const T=(N=(_=x==null?void 0:x.filter)===null||_===void 0?void 0:_.event)===null||N===void 0?void 0:N.toLocaleLowerCase();return T==="*"||T===((C=r==null?void 0:r.event)===null||C===void 0?void 0:C.toLocaleLowerCase())}else return x.type.toLocaleLowerCase()===l}).map(x=>{if(typeof v=="object"&&"ids"in v){const w=v.data,{schema:k,table:b,commit_timestamp:_,type:N,errors:C}=w;v=Object.assign(Object.assign({},{schema:k,table:b,commit_timestamp:_,eventType:N,new:{},old:{},errors:C}),this._getPayloadRecords(w))}x.callback(v,n)})}_isClosed(){return this.state===Rn.closed}_isJoined(){return this.state===Rn.joined}_isJoining(){return this.state===Rn.joining}_isLeaving(){return this.state===Rn.leaving}_replyEventName(t){return`chan_reply_${t}`}_on(t,r,n){const s=t.toLocaleLowerCase(),a={type:s,filter:r,callback:n};return this.bindings[s]?this.bindings[s].push(a):this.bindings[s]=[a],this}_off(t,r){const n=t.toLocaleLowerCase();return this.bindings[n]&&(this.bindings[n]=this.bindings[n].filter(s=>{var a;return!(((a=s.type)===null||a===void 0?void 0:a.toLocaleLowerCase())===n&&Px.isEqual(s.filter,r))})),this}static isEqual(t,r){if(Object.keys(t).length!==Object.keys(r).length)return!1;for(const n in t)if(t[n]!==r[n])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(t){this._on(Xa.close,{},t)}_onError(t){this._on(Xa.error,{},r=>t(r))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(t=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Rn.joining,this.joinPush.resend(t))}_getPayloadRecords(t){const r={new:{},old:{}};return(t.type==="INSERT"||t.type==="UPDATE")&&(r.new=rk(t.columns,t.record)),(t.type==="UPDATE"||t.type==="DELETE")&&(r.old=rk(t.columns,t.old_record)),r}}const cy=()=>{},nh={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},d$=[1e3,2e3,5e3,1e4],f$=1e4,h$=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class m${constructor(t,r){var n;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=a0,this.transport=null,this.heartbeatIntervalMs=nh.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=cy,this.ref=0,this.reconnectTimer=null,this.logger=cy,this.conn=null,this.sendBuffer=[],this.serializer=new s$,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=s=>{let a;return s?a=s:typeof fetch>"u"?a=(...l)=>uu(async()=>{const{default:u}=await Promise.resolve().then(()=>du);return{default:u}},void 0).then(({default:u})=>u(...l)).catch(u=>{throw new Error(`Failed to load @supabase/node-fetch: ${u.message}. This is required for HTTP requests in Node.js environments without native fetch.`)}):a=fetch,(...l)=>a(...l)},!(!((n=r==null?void 0:r.params)===null||n===void 0)&&n.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=r.params.apikey,this.endPoint=`${t}/${i0.websocket}`,this.httpEndpoint=aE(t),this._initializeOptions(r),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(r==null?void 0:r.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=Q3.createWebSocket(this.endpointURL())}catch(t){this._setConnectionState("disconnected");const r=t.message;throw r.includes("Node.js")?new Error(`${r}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${r}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:t$}))}disconnect(t,r){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const n=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(n),this._setConnectionState("disconnected")},t?this.conn.close(t,r??""):this.conn.close(),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(t){const r=await t.unsubscribe();return this.channels.length===0&&this.disconnect(),r}async removeAllChannels(){const t=await Promise.all(this.channels.map(r=>r.unsubscribe()));return this.channels=[],this.disconnect(),t}log(t,r,n){this.logger(t,r,n)}connectionState(){switch(this.conn&&this.conn.readyState){case gd.connecting:return Nl.Connecting;case gd.open:return Nl.Open;case gd.closing:return Nl.Closing;default:return Nl.Closed}}isConnected(){return this.connectionState()===Nl.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(t,r={config:{}}){const n=`realtime:${t}`,s=this.getChannels().find(a=>a.topic===n);if(s)return s;{const a=new Px(`realtime:${t}`,r,this);return this.channels.push(a),a}}push(t){const{topic:r,event:n,payload:s,ref:a}=t,l=()=>{this.encode(t,u=>{var d;(d=this.conn)===null||d===void 0||d.send(u)})};this.log("push",`${r} ${n} (${a})`,s),this.isConnected()?l():this.sendBuffer.push(l)}async setAuth(t=null){this._authPromise=this._performAuth(t);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var t;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(r){this.log("error","error in heartbeat callback",r)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(r){this.log("error","error in heartbeat callback",r)}this._wasManualDisconnect=!1,(t=this.conn)===null||t===void 0||t.close(r$,"heartbeat timeout"),setTimeout(()=>{var r;this.isConnected()||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout()},nh.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(r){this.log("error","error in heartbeat callback",r)}this._setAuthSafely("heartbeat")}onHeartbeat(t){this.heartbeatCallback=t}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(t=>t()),this.sendBuffer=[])}_makeRef(){let t=this.ref+1;return t===this.ref?this.ref=0:this.ref=t,this.ref.toString()}_leaveOpenTopic(t){let r=this.channels.find(n=>n.topic===t&&(n._isJoined()||n._isJoining()));r&&(this.log("transport",`leaving duplicate topic "${t}"`),r.unsubscribe())}_remove(t){this.channels=this.channels.filter(r=>r.topic!==t.topic)}_onConnMessage(t){this.decode(t.data,r=>{if(r.topic==="phoenix"&&r.event==="phx_reply")try{this.heartbeatCallback(r.payload.status==="ok"?"ok":"error")}catch(m){this.log("error","error in heartbeat callback",m)}r.ref&&r.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:n,event:s,payload:a,ref:l}=r,u=l?`(${l})`:"",d=a.status||"";this.log("receive",`${d} ${n} ${s} ${u}`.trim(),a),this.channels.filter(m=>m._isMember(n)).forEach(m=>m._trigger(s,a,l)),this._triggerStateCallbacks("message",r)})}_clearTimer(t){var r;t==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):t==="reconnect"&&((r=this.reconnectTimer)===null||r===void 0||r.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=t=>this._onConnError(t),this.conn.onmessage=t=>this._onConnMessage(t),this.conn.onclose=t=>this._onConnClose(t))}_teardownConnection(){this.conn&&(this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null),this._clearAllTimers(),this.channels.forEach(t=>t.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const t=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(t),this.workerRef.onerror=r=>{this.log("worker","worker error",r.message),this.workerRef.terminate()},this.workerRef.onmessage=r=>{r.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(t){var r;this._setConnectionState("disconnected"),this.log("transport","close",t),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout(),this._triggerStateCallbacks("close",t)}_onConnError(t){this._setConnectionState("disconnected"),this.log("transport",`${t}`),this._triggerChanError(),this._triggerStateCallbacks("error",t)}_triggerChanError(){this.channels.forEach(t=>t._trigger(Xa.error))}_appendParams(t,r){if(Object.keys(r).length===0)return t;const n=t.match(/\?/)?"&":"?",s=new URLSearchParams(r);return`${t}${n}${s}`}_workerObjectUrl(t){let r;if(t)r=t;else{const n=new Blob([h$],{type:"application/javascript"});r=URL.createObjectURL(n)}return r}_setConnectionState(t,r=!1){this._connectionState=t,t==="connecting"?this._wasManualDisconnect=!1:t==="disconnecting"&&(this._wasManualDisconnect=r)}async _performAuth(t=null){let r;t?r=t:this.accessToken?r=await this.accessToken():r=this.accessTokenValue,this.accessTokenValue!=r&&(this.accessTokenValue=r,this.channels.forEach(n=>{const s={access_token:r,version:e$};r&&n.updateJoinPayload(s),n.joinedOnce&&n._isJoined()&&n._push(Xa.access_token,{access_token:r})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(t="general"){this.setAuth().catch(r=>{this.log("error",`error setting auth in ${t}`,r)})}_triggerStateCallbacks(t,r){try{this.stateChangeCallbacks[t].forEach(n=>{try{n(r)}catch(s){this.log("error",`error in ${t} callback`,s)}})}catch(n){this.log("error",`error triggering ${t} callbacks`,n)}}_setupReconnectionTimer(){this.reconnectTimer=new nE(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},nh.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(t){var r,n,s,a,l,u,d,m,f;if(this.transport=(r=t==null?void 0:t.transport)!==null&&r!==void 0?r:null,this.timeout=(n=t==null?void 0:t.timeout)!==null&&n!==void 0?n:a0,this.heartbeatIntervalMs=(s=t==null?void 0:t.heartbeatIntervalMs)!==null&&s!==void 0?s:nh.HEARTBEAT_INTERVAL,this.worker=(a=t==null?void 0:t.worker)!==null&&a!==void 0?a:!1,this.accessToken=(l=t==null?void 0:t.accessToken)!==null&&l!==void 0?l:null,this.heartbeatCallback=(u=t==null?void 0:t.heartbeatCallback)!==null&&u!==void 0?u:cy,t!=null&&t.params&&(this.params=t.params),t!=null&&t.logger&&(this.logger=t.logger),(t!=null&&t.logLevel||t!=null&&t.log_level)&&(this.logLevel=t.logLevel||t.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(d=t==null?void 0:t.reconnectAfterMs)!==null&&d!==void 0?d:(p=>d$[p-1]||f$),this.encode=(m=t==null?void 0:t.encode)!==null&&m!==void 0?m:((p,v)=>v(JSON.stringify(p))),this.decode=(f=t==null?void 0:t.decode)!==null&&f!==void 0?f:this.serializer.decode.bind(this.serializer),this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=t==null?void 0:t.workerUrl}}}class Ax extends Error{constructor(t){super(t),this.__isStorageError=!0,this.name="StorageError"}}function En(e){return typeof e=="object"&&e!==null&&"__isStorageError"in e}class p$ extends Ax{constructor(t,r,n){super(t),this.name="StorageApiError",this.status=r,this.statusCode=n}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class l0 extends Ax{constructor(t,r){super(t),this.name="StorageUnknownError",this.originalError=r}}var g$=function(e,t,r,n){function s(a){return a instanceof r?a:new r(function(l){l(a)})}return new(r||(r=Promise))(function(a,l){function u(f){try{m(n.next(f))}catch(p){l(p)}}function d(f){try{m(n.throw(f))}catch(p){l(p)}}function m(f){f.done?a(f.value):s(f.value).then(u,d)}m((n=n.apply(e,t||[])).next())})};const iE=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...r)=>uu(async()=>{const{default:n}=await Promise.resolve().then(()=>du);return{default:n}},void 0).then(({default:n})=>n(...r)):t=fetch,(...r)=>t(...r)},y$=()=>g$(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield uu(()=>Promise.resolve().then(()=>du),void 0)).Response:Response}),c0=e=>{if(Array.isArray(e))return e.map(r=>c0(r));if(typeof e=="function"||e!==Object(e))return e;const t={};return Object.entries(e).forEach(([r,n])=>{const s=r.replace(/([-_][a-z])/gi,a=>a.toUpperCase().replace(/[-_]/g,""));t[s]=c0(n)}),t},v$=e=>{if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)};var Hl=function(e,t,r,n){function s(a){return a instanceof r?a:new r(function(l){l(a)})}return new(r||(r=Promise))(function(a,l){function u(f){try{m(n.next(f))}catch(p){l(p)}}function d(f){try{m(n.throw(f))}catch(p){l(p)}}function m(f){f.done?a(f.value):s(f.value).then(u,d)}m((n=n.apply(e,t||[])).next())})};const uy=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),x$=(e,t,r)=>Hl(void 0,void 0,void 0,function*(){const n=yield y$();e instanceof n&&!(r!=null&&r.noResolveJson)?e.json().then(s=>{const a=e.status||500,l=(s==null?void 0:s.statusCode)||a+"";t(new p$(uy(s),a,l))}).catch(s=>{t(new l0(uy(s),s))}):t(new l0(uy(e),e))}),w$=(e,t,r,n)=>{const s={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"||!n?s:(v$(n)?(s.headers=Object.assign({"Content-Type":"application/json"},t==null?void 0:t.headers),s.body=JSON.stringify(n)):s.body=n,t!=null&&t.duplex&&(s.duplex=t.duplex),Object.assign(Object.assign({},s),r))};function Bd(e,t,r,n,s,a){return Hl(this,void 0,void 0,function*(){return new Promise((l,u)=>{e(r,w$(t,n,s,a)).then(d=>{if(!d.ok)throw d;return n!=null&&n.noResolveJson?d:d.json()}).then(d=>l(d)).catch(d=>x$(d,u,n))})})}function Rh(e,t,r,n){return Hl(this,void 0,void 0,function*(){return Bd(e,"GET",t,r,n)})}function bi(e,t,r,n,s){return Hl(this,void 0,void 0,function*(){return Bd(e,"POST",t,n,s,r)})}function u0(e,t,r,n,s){return Hl(this,void 0,void 0,function*(){return Bd(e,"PUT",t,n,s,r)})}function b$(e,t,r,n){return Hl(this,void 0,void 0,function*(){return Bd(e,"HEAD",t,Object.assign(Object.assign({},r),{noResolveJson:!0}),n)})}function oE(e,t,r,n,s){return Hl(this,void 0,void 0,function*(){return Bd(e,"DELETE",t,n,s,r)})}var j$=function(e,t,r,n){function s(a){return a instanceof r?a:new r(function(l){l(a)})}return new(r||(r=Promise))(function(a,l){function u(f){try{m(n.next(f))}catch(p){l(p)}}function d(f){try{m(n.throw(f))}catch(p){l(p)}}function m(f){f.done?a(f.value):s(f.value).then(u,d)}m((n=n.apply(e,t||[])).next())})};class k${constructor(t,r){this.downloadFn=t,this.shouldThrowOnError=r}then(t,r){return this.execute().then(t,r)}execute(){return j$(this,void 0,void 0,function*(){try{return{data:(yield this.downloadFn()).body,error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(En(t))return{data:null,error:t};throw t}})}}var S$=function(e,t,r,n){function s(a){return a instanceof r?a:new r(function(l){l(a)})}return new(r||(r=Promise))(function(a,l){function u(f){try{m(n.next(f))}catch(p){l(p)}}function d(f){try{m(n.throw(f))}catch(p){l(p)}}function m(f){f.done?a(f.value):s(f.value).then(u,d)}m((n=n.apply(e,t||[])).next())})};class _${constructor(t,r){this.downloadFn=t,this.shouldThrowOnError=r}asStream(){return new k$(this.downloadFn,this.shouldThrowOnError)}then(t,r){return this.execute().then(t,r)}execute(){return S$(this,void 0,void 0,function*(){try{return{data:yield(yield this.downloadFn()).blob(),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(En(t))return{data:null,error:t};throw t}})}}var Xs=function(e,t,r,n){function s(a){return a instanceof r?a:new r(function(l){l(a)})}return new(r||(r=Promise))(function(a,l){function u(f){try{m(n.next(f))}catch(p){l(p)}}function d(f){try{m(n.throw(f))}catch(p){l(p)}}function m(f){f.done?a(f.value):s(f.value).then(u,d)}m((n=n.apply(e,t||[])).next())})};const N$={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},ak={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class C${constructor(t,r={},n,s){this.shouldThrowOnError=!1,this.url=t,this.headers=r,this.bucketId=n,this.fetch=iE(s)}throwOnError(){return this.shouldThrowOnError=!0,this}uploadOrUpdate(t,r,n,s){return Xs(this,void 0,void 0,function*(){try{let a;const l=Object.assign(Object.assign({},ak),s);let u=Object.assign(Object.assign({},this.headers),t==="POST"&&{"x-upsert":String(l.upsert)});const d=l.metadata;typeof Blob<"u"&&n instanceof Blob?(a=new FormData,a.append("cacheControl",l.cacheControl),d&&a.append("metadata",this.encodeMetadata(d)),a.append("",n)):typeof FormData<"u"&&n instanceof FormData?(a=n,a.append("cacheControl",l.cacheControl),d&&a.append("metadata",this.encodeMetadata(d))):(a=n,u["cache-control"]=`max-age=${l.cacheControl}`,u["content-type"]=l.contentType,d&&(u["x-metadata"]=this.toBase64(this.encodeMetadata(d)))),s!=null&&s.headers&&(u=Object.assign(Object.assign({},u),s.headers));const m=this._removeEmptyFolders(r),f=this._getFinalPath(m),p=yield(t=="PUT"?u0:bi)(this.fetch,`${this.url}/object/${f}`,a,Object.assign({headers:u},l!=null&&l.duplex?{duplex:l.duplex}:{}));return{data:{path:m,id:p.Id,fullPath:p.Key},error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(En(a))return{data:null,error:a};throw a}})}upload(t,r,n){return Xs(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",t,r,n)})}uploadToSignedUrl(t,r,n,s){return Xs(this,void 0,void 0,function*(){const a=this._removeEmptyFolders(t),l=this._getFinalPath(a),u=new URL(this.url+`/object/upload/sign/${l}`);u.searchParams.set("token",r);try{let d;const m=Object.assign({upsert:ak.upsert},s),f=Object.assign(Object.assign({},this.headers),{"x-upsert":String(m.upsert)});typeof Blob<"u"&&n instanceof Blob?(d=new FormData,d.append("cacheControl",m.cacheControl),d.append("",n)):typeof FormData<"u"&&n instanceof FormData?(d=n,d.append("cacheControl",m.cacheControl)):(d=n,f["cache-control"]=`max-age=${m.cacheControl}`,f["content-type"]=m.contentType);const p=yield u0(this.fetch,u.toString(),d,{headers:f});return{data:{path:a,fullPath:p.Key},error:null}}catch(d){if(this.shouldThrowOnError)throw d;if(En(d))return{data:null,error:d};throw d}})}createSignedUploadUrl(t,r){return Xs(this,void 0,void 0,function*(){try{let n=this._getFinalPath(t);const s=Object.assign({},this.headers);r!=null&&r.upsert&&(s["x-upsert"]="true");const a=yield bi(this.fetch,`${this.url}/object/upload/sign/${n}`,{},{headers:s}),l=new URL(this.url+a.url),u=l.searchParams.get("token");if(!u)throw new Ax("No token returned by API");return{data:{signedUrl:l.toString(),path:t,token:u},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(En(n))return{data:null,error:n};throw n}})}update(t,r,n){return Xs(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",t,r,n)})}move(t,r,n){return Xs(this,void 0,void 0,function*(){try{return{data:yield bi(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:t,destinationKey:r,destinationBucket:n==null?void 0:n.destinationBucket},{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(En(s))return{data:null,error:s};throw s}})}copy(t,r,n){return Xs(this,void 0,void 0,function*(){try{return{data:{path:(yield bi(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:t,destinationKey:r,destinationBucket:n==null?void 0:n.destinationBucket},{headers:this.headers})).Key},error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(En(s))return{data:null,error:s};throw s}})}createSignedUrl(t,r,n){return Xs(this,void 0,void 0,function*(){try{let s=this._getFinalPath(t),a=yield bi(this.fetch,`${this.url}/object/sign/${s}`,Object.assign({expiresIn:r},n!=null&&n.transform?{transform:n.transform}:{}),{headers:this.headers});const l=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return a={signedUrl:encodeURI(`${this.url}${a.signedURL}${l}`)},{data:a,error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(En(s))return{data:null,error:s};throw s}})}createSignedUrls(t,r,n){return Xs(this,void 0,void 0,function*(){try{const s=yield bi(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:r,paths:t},{headers:this.headers}),a=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return{data:s.map(l=>Object.assign(Object.assign({},l),{signedUrl:l.signedURL?encodeURI(`${this.url}${l.signedURL}${a}`):null})),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(En(s))return{data:null,error:s};throw s}})}download(t,r){const s=typeof(r==null?void 0:r.transform)<"u"?"render/image/authenticated":"object",a=this.transformOptsToQueryString((r==null?void 0:r.transform)||{}),l=a?`?${a}`:"",u=this._getFinalPath(t),d=()=>Rh(this.fetch,`${this.url}/${s}/${u}${l}`,{headers:this.headers,noResolveJson:!0});return new _$(d,this.shouldThrowOnError)}info(t){return Xs(this,void 0,void 0,function*(){const r=this._getFinalPath(t);try{const n=yield Rh(this.fetch,`${this.url}/object/info/${r}`,{headers:this.headers});return{data:c0(n),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(En(n))return{data:null,error:n};throw n}})}exists(t){return Xs(this,void 0,void 0,function*(){const r=this._getFinalPath(t);try{return yield b$(this.fetch,`${this.url}/object/${r}`,{headers:this.headers}),{data:!0,error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(En(n)&&n instanceof l0){const s=n.originalError;if([400,404].includes(s==null?void 0:s.status))return{data:!1,error:n}}throw n}})}getPublicUrl(t,r){const n=this._getFinalPath(t),s=[],a=r!=null&&r.download?`download=${r.download===!0?"":r.download}`:"";a!==""&&s.push(a);const u=typeof(r==null?void 0:r.transform)<"u"?"render/image":"object",d=this.transformOptsToQueryString((r==null?void 0:r.transform)||{});d!==""&&s.push(d);let m=s.join("&");return m!==""&&(m=`?${m}`),{data:{publicUrl:encodeURI(`${this.url}/${u}/public/${n}${m}`)}}}remove(t){return Xs(this,void 0,void 0,function*(){try{return{data:yield oE(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:t},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(En(r))return{data:null,error:r};throw r}})}list(t,r,n){return Xs(this,void 0,void 0,function*(){try{const s=Object.assign(Object.assign(Object.assign({},N$),r),{prefix:t||""});return{data:yield bi(this.fetch,`${this.url}/object/list/${this.bucketId}`,s,{headers:this.headers},n),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(En(s))return{data:null,error:s};throw s}})}listV2(t,r){return Xs(this,void 0,void 0,function*(){try{const n=Object.assign({},t);return{data:yield bi(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,n,{headers:this.headers},r),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(En(n))return{data:null,error:n};throw n}})}encodeMetadata(t){return JSON.stringify(t)}toBase64(t){return typeof Buffer<"u"?Buffer.from(t).toString("base64"):btoa(t)}_getFinalPath(t){return`${this.bucketId}/${t.replace(/^\/+/,"")}`}_removeEmptyFolders(t){return t.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(t){const r=[];return t.width&&r.push(`width=${t.width}`),t.height&&r.push(`height=${t.height}`),t.resize&&r.push(`resize=${t.resize}`),t.format&&r.push(`format=${t.format}`),t.quality&&r.push(`quality=${t.quality}`),r.join("&")}}const E$="2.74.0",P$={"X-Client-Info":`storage-js/${E$}`};var _c=function(e,t,r,n){function s(a){return a instanceof r?a:new r(function(l){l(a)})}return new(r||(r=Promise))(function(a,l){function u(f){try{m(n.next(f))}catch(p){l(p)}}function d(f){try{m(n.throw(f))}catch(p){l(p)}}function m(f){f.done?a(f.value):s(f.value).then(u,d)}m((n=n.apply(e,t||[])).next())})};class A${constructor(t,r={},n,s){this.shouldThrowOnError=!1;const a=new URL(t);s!=null&&s.useNewHostname&&/supabase\.(co|in|red)$/.test(a.hostname)&&!a.hostname.includes("storage.supabase.")&&(a.hostname=a.hostname.replace("supabase.","storage.supabase.")),this.url=a.href.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},P$),r),this.fetch=iE(n)}throwOnError(){return this.shouldThrowOnError=!0,this}listBuckets(){return _c(this,void 0,void 0,function*(){try{return{data:yield Rh(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(En(t))return{data:null,error:t};throw t}})}getBucket(t){return _c(this,void 0,void 0,function*(){try{return{data:yield Rh(this.fetch,`${this.url}/bucket/${t}`,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(En(r))return{data:null,error:r};throw r}})}createBucket(t){return _c(this,arguments,void 0,function*(r,n={public:!1}){try{return{data:yield bi(this.fetch,`${this.url}/bucket`,{id:r,name:r,type:n.type,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(En(s))return{data:null,error:s};throw s}})}updateBucket(t,r){return _c(this,void 0,void 0,function*(){try{return{data:yield u0(this.fetch,`${this.url}/bucket/${t}`,{id:t,name:t,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(En(n))return{data:null,error:n};throw n}})}emptyBucket(t){return _c(this,void 0,void 0,function*(){try{return{data:yield bi(this.fetch,`${this.url}/bucket/${t}/empty`,{},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(En(r))return{data:null,error:r};throw r}})}deleteBucket(t){return _c(this,void 0,void 0,function*(){try{return{data:yield oE(this.fetch,`${this.url}/bucket/${t}`,{},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(En(r))return{data:null,error:r};throw r}})}}class O$ extends A${constructor(t,r={},n,s){super(t,r,n,s)}from(t){return new C$(this.url,this.headers,t,this.fetch)}}const T$="2.74.0";let cd="";typeof Deno<"u"?cd="deno":typeof document<"u"?cd="web":typeof navigator<"u"&&navigator.product==="ReactNative"?cd="react-native":cd="node";const I$={"X-Client-Info":`supabase-js-${cd}/${T$}`},D$={headers:I$},$$={schema:"public"},R$={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},M$={};var F$=function(e,t,r,n){function s(a){return a instanceof r?a:new r(function(l){l(a)})}return new(r||(r=Promise))(function(a,l){function u(f){try{m(n.next(f))}catch(p){l(p)}}function d(f){try{m(n.throw(f))}catch(p){l(p)}}function m(f){f.done?a(f.value):s(f.value).then(u,d)}m((n=n.apply(e,t||[])).next())})};const L$=e=>{let t;return e?t=e:typeof fetch>"u"?t=XC:t=fetch,(...r)=>t(...r)},z$=()=>typeof Headers>"u"?QC:Headers,U$=(e,t,r)=>{const n=L$(r),s=z$();return(a,l)=>F$(void 0,void 0,void 0,function*(){var u;const d=(u=yield t())!==null&&u!==void 0?u:e;let m=new s(l==null?void 0:l.headers);return m.has("apikey")||m.set("apikey",e),m.has("Authorization")||m.set("Authorization",`Bearer ${d}`),n(a,Object.assign(Object.assign({},l),{headers:m}))})};var B$=function(e,t,r,n){function s(a){return a instanceof r?a:new r(function(l){l(a)})}return new(r||(r=Promise))(function(a,l){function u(f){try{m(n.next(f))}catch(p){l(p)}}function d(f){try{m(n.throw(f))}catch(p){l(p)}}function m(f){f.done?a(f.value):s(f.value).then(u,d)}m((n=n.apply(e,t||[])).next())})};function W$(e){return e.endsWith("/")?e:e+"/"}function V$(e,t){var r,n;const{db:s,auth:a,realtime:l,global:u}=e,{db:d,auth:m,realtime:f,global:p}=t,v={db:Object.assign(Object.assign({},d),s),auth:Object.assign(Object.assign({},m),a),realtime:Object.assign(Object.assign({},f),l),storage:{},global:Object.assign(Object.assign(Object.assign({},p),u),{headers:Object.assign(Object.assign({},(r=p==null?void 0:p.headers)!==null&&r!==void 0?r:{}),(n=u==null?void 0:u.headers)!==null&&n!==void 0?n:{})}),accessToken:()=>B$(this,void 0,void 0,function*(){return""})};return e.accessToken?v.accessToken=e.accessToken:delete v.accessToken,v}function q$(e){const t=e==null?void 0:e.trim();if(!t)throw new Error("supabaseUrl is required.");if(!t.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(W$(t))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}const lE="2.74.0",Mc=30*1e3,d0=3,dy=d0*Mc,H$="http://localhost:9999",K$="supabase.auth.token",G$={"X-Client-Info":`gotrue-js/${lE}`},f0="X-Supabase-Api-Version",cE={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},Y$=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,J$=600*1e3;class kd extends Error{constructor(t,r,n){super(t),this.__isAuthError=!0,this.name="AuthError",this.status=r,this.code=n}}function Lt(e){return typeof e=="object"&&e!==null&&"__isAuthError"in e}class X$ extends kd{constructor(t,r,n){super(t,r,n),this.name="AuthApiError",this.status=r,this.code=n}}function Q$(e){return Lt(e)&&e.name==="AuthApiError"}class Cl extends kd{constructor(t,r){super(t),this.name="AuthUnknownError",this.originalError=r}}class tl extends kd{constructor(t,r,n,s){super(t,n,s),this.name=r,this.status=n}}class zo extends tl{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function Z$(e){return Lt(e)&&e.name==="AuthSessionMissingError"}class Nc extends tl{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class sh extends tl{constructor(t){super(t,"AuthInvalidCredentialsError",400,void 0)}}class ah extends tl{constructor(t,r=null){super(t,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function e6(e){return Lt(e)&&e.name==="AuthImplicitGrantRedirectError"}class ik extends tl{constructor(t,r=null){super(t,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class h0 extends tl{constructor(t,r){super(t,"AuthRetryableFetchError",r,void 0)}}function fy(e){return Lt(e)&&e.name==="AuthRetryableFetchError"}class ok extends tl{constructor(t,r,n){super(t,"AuthWeakPasswordError",r,"weak_password"),this.reasons=n}}class m0 extends tl{constructor(t){super(t,"AuthInvalidJwtError",400,"invalid_jwt")}}const Mh="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),lk=` 	
\r=`.split(""),t6=(()=>{const e=new Array(128);for(let t=0;t<e.length;t+=1)e[t]=-1;for(let t=0;t<lk.length;t+=1)e[lk[t].charCodeAt(0)]=-2;for(let t=0;t<Mh.length;t+=1)e[Mh[t].charCodeAt(0)]=t;return e})();function ck(e,t,r){if(e!==null)for(t.queue=t.queue<<8|e,t.queuedBits+=8;t.queuedBits>=6;){const n=t.queue>>t.queuedBits-6&63;r(Mh[n]),t.queuedBits-=6}else if(t.queuedBits>0)for(t.queue=t.queue<<6-t.queuedBits,t.queuedBits=6;t.queuedBits>=6;){const n=t.queue>>t.queuedBits-6&63;r(Mh[n]),t.queuedBits-=6}}function uE(e,t,r){const n=t6[e];if(n>-1)for(t.queue=t.queue<<6|n,t.queuedBits+=6;t.queuedBits>=8;)r(t.queue>>t.queuedBits-8&255),t.queuedBits-=8;else{if(n===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(e)}"`)}}function uk(e){const t=[],r=l=>{t.push(String.fromCodePoint(l))},n={utf8seq:0,codepoint:0},s={queue:0,queuedBits:0},a=l=>{s6(l,n,r)};for(let l=0;l<e.length;l+=1)uE(e.charCodeAt(l),s,a);return t.join("")}function r6(e,t){if(e<=127){t(e);return}else if(e<=2047){t(192|e>>6),t(128|e&63);return}else if(e<=65535){t(224|e>>12),t(128|e>>6&63),t(128|e&63);return}else if(e<=1114111){t(240|e>>18),t(128|e>>12&63),t(128|e>>6&63),t(128|e&63);return}throw new Error(`Unrecognized Unicode codepoint: ${e.toString(16)}`)}function n6(e,t){for(let r=0;r<e.length;r+=1){let n=e.charCodeAt(r);if(n>55295&&n<=56319){const s=(n-55296)*1024&65535;n=(e.charCodeAt(r+1)-56320&65535|s)+65536,r+=1}r6(n,t)}}function s6(e,t,r){if(t.utf8seq===0){if(e<=127){r(e);return}for(let n=1;n<6;n+=1)if((e>>7-n&1)===0){t.utf8seq=n;break}if(t.utf8seq===2)t.codepoint=e&31;else if(t.utf8seq===3)t.codepoint=e&15;else if(t.utf8seq===4)t.codepoint=e&7;else throw new Error("Invalid UTF-8 sequence");t.utf8seq-=1}else if(t.utf8seq>0){if(e<=127)throw new Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|e&63,t.utf8seq-=1,t.utf8seq===0&&r(t.codepoint)}}function Vc(e){const t=[],r={queue:0,queuedBits:0},n=s=>{t.push(s)};for(let s=0;s<e.length;s+=1)uE(e.charCodeAt(s),r,n);return new Uint8Array(t)}function a6(e){const t=[];return n6(e,r=>t.push(r)),new Uint8Array(t)}function El(e){const t=[],r={queue:0,queuedBits:0},n=s=>{t.push(s)};return e.forEach(s=>ck(s,r,n)),ck(null,r,n),t.join("")}function i6(e){return Math.round(Date.now()/1e3)+e}function o6(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){const t=Math.random()*16|0;return(e=="x"?t:t&3|8).toString(16)})}const oa=()=>typeof window<"u"&&typeof document<"u",wl={tested:!1,writable:!1},dE=()=>{if(!oa())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(wl.tested)return wl.writable;const e=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),wl.tested=!0,wl.writable=!0}catch{wl.tested=!0,wl.writable=!1}return wl.writable};function l6(e){const t={},r=new URL(e);if(r.hash&&r.hash[0]==="#")try{new URLSearchParams(r.hash.substring(1)).forEach((s,a)=>{t[a]=s})}catch{}return r.searchParams.forEach((n,s)=>{t[s]=n}),t}const fE=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...r)=>uu(async()=>{const{default:n}=await Promise.resolve().then(()=>du);return{default:n}},void 0).then(({default:n})=>n(...r)):t=fetch,(...r)=>t(...r)},c6=e=>typeof e=="object"&&e!==null&&"status"in e&&"ok"in e&&"json"in e&&typeof e.json=="function",Fc=async(e,t,r)=>{await e.setItem(t,JSON.stringify(r))},bl=async(e,t)=>{const r=await e.getItem(t);if(!r)return null;try{return JSON.parse(r)}catch{return r}},Fo=async(e,t)=>{await e.removeItem(t)};class Lm{constructor(){this.promise=new Lm.promiseConstructor((t,r)=>{this.resolve=t,this.reject=r})}}Lm.promiseConstructor=Promise;function hy(e){const t=e.split(".");if(t.length!==3)throw new m0("Invalid JWT structure");for(let n=0;n<t.length;n++)if(!Y$.test(t[n]))throw new m0("JWT not in base64url format");return{header:JSON.parse(uk(t[0])),payload:JSON.parse(uk(t[1])),signature:Vc(t[2]),raw:{header:t[0],payload:t[1]}}}async function u6(e){return await new Promise(t=>{setTimeout(()=>t(null),e)})}function d6(e,t){return new Promise((n,s)=>{(async()=>{for(let a=0;a<1/0;a++)try{const l=await e(a);if(!t(a,null,l)){n(l);return}}catch(l){if(!t(a,l)){s(l);return}}})()})}function f6(e){return("0"+e.toString(16)).substr(-2)}function h6(){const t=new Uint32Array(56);if(typeof crypto>"u"){const r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",n=r.length;let s="";for(let a=0;a<56;a++)s+=r.charAt(Math.floor(Math.random()*n));return s}return crypto.getRandomValues(t),Array.from(t,f6).join("")}async function m6(e){const r=new TextEncoder().encode(e),n=await crypto.subtle.digest("SHA-256",r),s=new Uint8Array(n);return Array.from(s).map(a=>String.fromCharCode(a)).join("")}async function p6(e){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),e;const r=await m6(e);return btoa(r).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Cc(e,t,r=!1){const n=h6();let s=n;r&&(s+="/PASSWORD_RECOVERY"),await Fc(e,`${t}-code-verifier`,s);const a=await p6(n);return[a,n===a?"plain":"s256"]}const g6=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function y6(e){const t=e.headers.get(f0);if(!t||!t.match(g6))return null;try{return new Date(`${t}T00:00:00.0Z`)}catch{return null}}function v6(e){if(!e)throw new Error("Missing exp claim");const t=Math.floor(Date.now()/1e3);if(e<=t)throw new Error("JWT has expired")}function x6(e){switch(e){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const w6=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Ec(e){if(!w6.test(e))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function my(){const e={};return new Proxy(e,{get:(t,r)=>{if(r==="__isUserNotAvailableProxy")return!0;if(typeof r=="symbol"){const n=r.toString();if(n==="Symbol(Symbol.toPrimitive)"||n==="Symbol(Symbol.toStringTag)"||n==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${r}" property of the session object is not supported. Please use getUser() instead.`)},set:(t,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(t,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function dk(e){return JSON.parse(JSON.stringify(e))}var b6=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(e);s<n.length;s++)t.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(e,n[s])&&(r[n[s]]=e[n[s]]);return r};const jl=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),j6=[502,503,504];async function fk(e){var t;if(!c6(e))throw new h0(jl(e),0);if(j6.includes(e.status))throw new h0(jl(e),e.status);let r;try{r=await e.json()}catch(a){throw new Cl(jl(a),a)}let n;const s=y6(e);if(s&&s.getTime()>=cE["2024-01-01"].timestamp&&typeof r=="object"&&r&&typeof r.code=="string"?n=r.code:typeof r=="object"&&r&&typeof r.error_code=="string"&&(n=r.error_code),n){if(n==="weak_password")throw new ok(jl(r),e.status,((t=r.weak_password)===null||t===void 0?void 0:t.reasons)||[]);if(n==="session_not_found")throw new zo}else if(typeof r=="object"&&r&&typeof r.weak_password=="object"&&r.weak_password&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.reasons.reduce((a,l)=>a&&typeof l=="string",!0))throw new ok(jl(r),e.status,r.weak_password.reasons);throw new X$(jl(r),e.status||500,n)}const k6=(e,t,r,n)=>{const s={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"?s:(s.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},t==null?void 0:t.headers),s.body=JSON.stringify(n),Object.assign(Object.assign({},s),r))};async function Xt(e,t,r,n){var s;const a=Object.assign({},n==null?void 0:n.headers);a[f0]||(a[f0]=cE["2024-01-01"].name),n!=null&&n.jwt&&(a.Authorization=`Bearer ${n.jwt}`);const l=(s=n==null?void 0:n.query)!==null&&s!==void 0?s:{};n!=null&&n.redirectTo&&(l.redirect_to=n.redirectTo);const u=Object.keys(l).length?"?"+new URLSearchParams(l).toString():"",d=await S6(e,t,r+u,{headers:a,noResolveJson:n==null?void 0:n.noResolveJson},{},n==null?void 0:n.body);return n!=null&&n.xform?n==null?void 0:n.xform(d):{data:Object.assign({},d),error:null}}async function S6(e,t,r,n,s,a){const l=k6(t,n,s,a);let u;try{u=await e(r,Object.assign({},l))}catch(d){throw console.error(d),new h0(jl(d),0)}if(u.ok||await fk(u),n!=null&&n.noResolveJson)return u;try{return await u.json()}catch(d){await fk(d)}}function Ja(e){var t;let r=null;C6(e)&&(r=Object.assign({},e),e.expires_at||(r.expires_at=i6(e.expires_in)));const n=(t=e.user)!==null&&t!==void 0?t:e;return{data:{session:r,user:n},error:null}}function hk(e){const t=Ja(e);return!t.error&&e.weak_password&&typeof e.weak_password=="object"&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.message&&typeof e.weak_password.message=="string"&&e.weak_password.reasons.reduce((r,n)=>r&&typeof n=="string",!0)&&(t.data.weak_password=e.weak_password),t}function qo(e){var t;return{data:{user:(t=e.user)!==null&&t!==void 0?t:e},error:null}}function _6(e){return{data:e,error:null}}function N6(e){const{action_link:t,email_otp:r,hashed_token:n,redirect_to:s,verification_type:a}=e,l=b6(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),u={action_link:t,email_otp:r,hashed_token:n,redirect_to:s,verification_type:a},d=Object.assign({},l);return{data:{properties:u,user:d},error:null}}function mk(e){return e}function C6(e){return e.access_token&&e.refresh_token&&e.expires_in}const py=["global","local","others"];var E6=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(e);s<n.length;s++)t.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(e,n[s])&&(r[n[s]]=e[n[s]]);return r};class P6{constructor({url:t="",headers:r={},fetch:n}){this.url=t,this.headers=r,this.fetch=fE(n),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(t,r=py[0]){if(py.indexOf(r)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${py.join(", ")}`);try{return await Xt(this.fetch,"POST",`${this.url}/logout?scope=${r}`,{headers:this.headers,jwt:t,noResolveJson:!0}),{data:null,error:null}}catch(n){if(Lt(n))return{data:null,error:n};throw n}}async inviteUserByEmail(t,r={}){try{return await Xt(this.fetch,"POST",`${this.url}/invite`,{body:{email:t,data:r.data},headers:this.headers,redirectTo:r.redirectTo,xform:qo})}catch(n){if(Lt(n))return{data:{user:null},error:n};throw n}}async generateLink(t){try{const{options:r}=t,n=E6(t,["options"]),s=Object.assign(Object.assign({},n),r);return"newEmail"in n&&(s.new_email=n==null?void 0:n.newEmail,delete s.newEmail),await Xt(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:s,headers:this.headers,xform:N6,redirectTo:r==null?void 0:r.redirectTo})}catch(r){if(Lt(r))return{data:{properties:null,user:null},error:r};throw r}}async createUser(t){try{return await Xt(this.fetch,"POST",`${this.url}/admin/users`,{body:t,headers:this.headers,xform:qo})}catch(r){if(Lt(r))return{data:{user:null},error:r};throw r}}async listUsers(t){var r,n,s,a,l,u,d;try{const m={nextPage:null,lastPage:0,total:0},f=await Xt(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(r=t==null?void 0:t.page)===null||r===void 0?void 0:r.toString())!==null&&n!==void 0?n:"",per_page:(a=(s=t==null?void 0:t.perPage)===null||s===void 0?void 0:s.toString())!==null&&a!==void 0?a:""},xform:mk});if(f.error)throw f.error;const p=await f.json(),v=(l=f.headers.get("x-total-count"))!==null&&l!==void 0?l:0,x=(d=(u=f.headers.get("link"))===null||u===void 0?void 0:u.split(","))!==null&&d!==void 0?d:[];return x.length>0&&(x.forEach(w=>{const k=parseInt(w.split(";")[0].split("=")[1].substring(0,1)),b=JSON.parse(w.split(";")[1].split("=")[1]);m[`${b}Page`]=k}),m.total=parseInt(v)),{data:Object.assign(Object.assign({},p),m),error:null}}catch(m){if(Lt(m))return{data:{users:[]},error:m};throw m}}async getUserById(t){Ec(t);try{return await Xt(this.fetch,"GET",`${this.url}/admin/users/${t}`,{headers:this.headers,xform:qo})}catch(r){if(Lt(r))return{data:{user:null},error:r};throw r}}async updateUserById(t,r){Ec(t);try{return await Xt(this.fetch,"PUT",`${this.url}/admin/users/${t}`,{body:r,headers:this.headers,xform:qo})}catch(n){if(Lt(n))return{data:{user:null},error:n};throw n}}async deleteUser(t,r=!1){Ec(t);try{return await Xt(this.fetch,"DELETE",`${this.url}/admin/users/${t}`,{headers:this.headers,body:{should_soft_delete:r},xform:qo})}catch(n){if(Lt(n))return{data:{user:null},error:n};throw n}}async _listFactors(t){Ec(t.userId);try{const{data:r,error:n}=await Xt(this.fetch,"GET",`${this.url}/admin/users/${t.userId}/factors`,{headers:this.headers,xform:s=>({data:{factors:s},error:null})});return{data:r,error:n}}catch(r){if(Lt(r))return{data:null,error:r};throw r}}async _deleteFactor(t){Ec(t.userId),Ec(t.id);try{return{data:await Xt(this.fetch,"DELETE",`${this.url}/admin/users/${t.userId}/factors/${t.id}`,{headers:this.headers}),error:null}}catch(r){if(Lt(r))return{data:null,error:r};throw r}}async _listOAuthClients(t){var r,n,s,a,l,u,d;try{const m={nextPage:null,lastPage:0,total:0},f=await Xt(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(r=t==null?void 0:t.page)===null||r===void 0?void 0:r.toString())!==null&&n!==void 0?n:"",per_page:(a=(s=t==null?void 0:t.perPage)===null||s===void 0?void 0:s.toString())!==null&&a!==void 0?a:""},xform:mk});if(f.error)throw f.error;const p=await f.json(),v=(l=f.headers.get("x-total-count"))!==null&&l!==void 0?l:0,x=(d=(u=f.headers.get("link"))===null||u===void 0?void 0:u.split(","))!==null&&d!==void 0?d:[];return x.length>0&&(x.forEach(w=>{const k=parseInt(w.split(";")[0].split("=")[1].substring(0,1)),b=JSON.parse(w.split(";")[1].split("=")[1]);m[`${b}Page`]=k}),m.total=parseInt(v)),{data:Object.assign(Object.assign({},p),m),error:null}}catch(m){if(Lt(m))return{data:{clients:[]},error:m};throw m}}async _createOAuthClient(t){try{return await Xt(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:t,headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(Lt(r))return{data:null,error:r};throw r}}async _getOAuthClient(t){try{return await Xt(this.fetch,"GET",`${this.url}/admin/oauth/clients/${t}`,{headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(Lt(r))return{data:null,error:r};throw r}}async _deleteOAuthClient(t){try{return await Xt(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${t}`,{headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(Lt(r))return{data:null,error:r};throw r}}async _regenerateOAuthClientSecret(t){try{return await Xt(this.fetch,"POST",`${this.url}/admin/oauth/clients/${t}/regenerate_secret`,{headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(Lt(r))return{data:null,error:r};throw r}}}function pk(e={}){return{getItem:t=>e[t]||null,setItem:(t,r)=>{e[t]=r},removeItem:t=>{delete e[t]}}}const Pc={debug:!!(globalThis&&dE()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class hE extends Error{constructor(t){super(t),this.isAcquireTimeout=!0}}class A6 extends hE{}async function O6(e,t,r){Pc.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",e,t);const n=new globalThis.AbortController;return t>0&&setTimeout(()=>{n.abort(),Pc.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",e)},t),await Promise.resolve().then(()=>globalThis.navigator.locks.request(e,t===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:n.signal},async s=>{if(s){Pc.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",e,s.name);try{return await r()}finally{Pc.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",e,s.name)}}else{if(t===0)throw Pc.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",e),new A6(`Acquiring an exclusive Navigator LockManager lock "${e}" immediately failed`);if(Pc.debug)try{const a=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(a,null,"  "))}catch(a){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",a)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await r()}}))}function T6(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function mE(e){if(!/^0x[a-fA-F0-9]{40}$/.test(e))throw new Error(`@supabase/auth-js: Address "${e}" is invalid.`);return e.toLowerCase()}function I6(e){return parseInt(e,16)}function D6(e){const t=new TextEncoder().encode(e);return"0x"+Array.from(t,n=>n.toString(16).padStart(2,"0")).join("")}function $6(e){var t;const{chainId:r,domain:n,expirationTime:s,issuedAt:a=new Date,nonce:l,notBefore:u,requestId:d,resources:m,scheme:f,uri:p,version:v}=e;{if(!Number.isInteger(r))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${r}`);if(!n)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(l&&l.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${l}`);if(!p)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(v!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${v}`);if(!((t=e.statement)===null||t===void 0)&&t.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${e.statement}`)}const x=mE(e.address),w=f?`${f}://${n}`:n,k=e.statement?`${e.statement}
`:"",b=`${w} wants you to sign in with your Ethereum account:
${x}

${k}`;let _=`URI: ${p}
Version: ${v}
Chain ID: ${r}${l?`
Nonce: ${l}`:""}
Issued At: ${a.toISOString()}`;if(s&&(_+=`
Expiration Time: ${s.toISOString()}`),u&&(_+=`
Not Before: ${u.toISOString()}`),d&&(_+=`
Request ID: ${d}`),m){let N=`
Resources:`;for(const C of m){if(!C||typeof C!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${C}`);N+=`
- ${C}`}_+=N}return`${b}
${_}`}class Nn extends Error{constructor({message:t,code:r,cause:n,name:s}){var a;super(t,{cause:n}),this.__isWebAuthnError=!0,this.name=(a=s??(n instanceof Error?n.name:void 0))!==null&&a!==void 0?a:"Unknown Error",this.code=r}}class Fh extends Nn{constructor(t,r){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:r,message:t}),this.name="WebAuthnUnknownError",this.originalError=r}}function R6({error:e,options:t}){var r,n,s;const{publicKey:a}=t;if(!a)throw Error("options was missing required publicKey property");if(e.name==="AbortError"){if(t.signal instanceof AbortSignal)return new Nn({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:e})}else if(e.name==="ConstraintError"){if(((r=a.authenticatorSelection)===null||r===void 0?void 0:r.requireResidentKey)===!0)return new Nn({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:e});if(t.mediation==="conditional"&&((n=a.authenticatorSelection)===null||n===void 0?void 0:n.userVerification)==="required")return new Nn({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:e});if(((s=a.authenticatorSelection)===null||s===void 0?void 0:s.userVerification)==="required")return new Nn({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:e})}else{if(e.name==="InvalidStateError")return new Nn({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:e});if(e.name==="NotAllowedError")return new Nn({message:e.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e});if(e.name==="NotSupportedError")return a.pubKeyCredParams.filter(u=>u.type==="public-key").length===0?new Nn({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:e}):new Nn({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:e});if(e.name==="SecurityError"){const l=window.location.hostname;if(gE(l)){if(a.rp.id!==l)return new Nn({message:`The RP ID "${a.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:e})}else return new Nn({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:e})}else if(e.name==="TypeError"){if(a.user.id.byteLength<1||a.user.id.byteLength>64)return new Nn({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:e})}else if(e.name==="UnknownError")return new Nn({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:e})}return new Nn({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e})}function M6({error:e,options:t}){const{publicKey:r}=t;if(!r)throw Error("options was missing required publicKey property");if(e.name==="AbortError"){if(t.signal instanceof AbortSignal)return new Nn({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:e})}else{if(e.name==="NotAllowedError")return new Nn({message:e.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e});if(e.name==="SecurityError"){const n=window.location.hostname;if(gE(n)){if(r.rpId!==n)return new Nn({message:`The RP ID "${r.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:e})}else return new Nn({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:e})}else if(e.name==="UnknownError")return new Nn({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:e})}return new Nn({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e})}var pE=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(e);s<n.length;s++)t.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(e,n[s])&&(r[n[s]]=e[n[s]]);return r};class F6{createNewAbortSignal(){if(this.controller){const r=new Error("Cancelling existing WebAuthn API call for new one");r.name="AbortError",this.controller.abort(r)}const t=new AbortController;return this.controller=t,t.signal}cancelCeremony(){if(this.controller){const t=new Error("Manually cancelling existing WebAuthn API call");t.name="AbortError",this.controller.abort(t),this.controller=void 0}}}const L6=new F6;function z6(e){if(!e)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(e);const{challenge:t,user:r,excludeCredentials:n}=e,s=pE(e,["challenge","user","excludeCredentials"]),a=Vc(t).buffer,l=Object.assign(Object.assign({},r),{id:Vc(r.id).buffer}),u=Object.assign(Object.assign({},s),{challenge:a,user:l});if(n&&n.length>0){u.excludeCredentials=new Array(n.length);for(let d=0;d<n.length;d++){const m=n[d];u.excludeCredentials[d]=Object.assign(Object.assign({},m),{id:Vc(m.id).buffer,type:m.type||"public-key",transports:m.transports})}}return u}function U6(e){if(!e)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(e);const{challenge:t,allowCredentials:r}=e,n=pE(e,["challenge","allowCredentials"]),s=Vc(t).buffer,a=Object.assign(Object.assign({},n),{challenge:s});if(r&&r.length>0){a.allowCredentials=new Array(r.length);for(let l=0;l<r.length;l++){const u=r[l];a.allowCredentials[l]=Object.assign(Object.assign({},u),{id:Vc(u.id).buffer,type:u.type||"public-key",transports:u.transports})}}return a}function B6(e){var t;if("toJSON"in e&&typeof e.toJSON=="function")return e.toJSON();const r=e;return{id:e.id,rawId:e.id,response:{attestationObject:El(new Uint8Array(e.response.attestationObject)),clientDataJSON:El(new Uint8Array(e.response.clientDataJSON))},type:"public-key",clientExtensionResults:e.getClientExtensionResults(),authenticatorAttachment:(t=r.authenticatorAttachment)!==null&&t!==void 0?t:void 0}}function W6(e){var t;if("toJSON"in e&&typeof e.toJSON=="function")return e.toJSON();const r=e,n=e.getClientExtensionResults(),s=e.response;return{id:e.id,rawId:e.id,response:{authenticatorData:El(new Uint8Array(s.authenticatorData)),clientDataJSON:El(new Uint8Array(s.clientDataJSON)),signature:El(new Uint8Array(s.signature)),userHandle:s.userHandle?El(new Uint8Array(s.userHandle)):void 0},type:"public-key",clientExtensionResults:n,authenticatorAttachment:(t=r.authenticatorAttachment)!==null&&t!==void 0?t:void 0}}function gE(e){return e==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(e)}function gk(){var e,t;return!!(oa()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((e=navigator==null?void 0:navigator.credentials)===null||e===void 0?void 0:e.create)=="function"&&typeof((t=navigator==null?void 0:navigator.credentials)===null||t===void 0?void 0:t.get)=="function")}async function V6(e){try{const t=await navigator.credentials.create(e);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new Fh("Browser returned unexpected credential type",t)}:{data:null,error:new Fh("Empty credential response",t)}}catch(t){return{data:null,error:R6({error:t,options:e})}}}async function q6(e){try{const t=await navigator.credentials.get(e);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new Fh("Browser returned unexpected credential type",t)}:{data:null,error:new Fh("Empty credential response",t)}}catch(t){return{data:null,error:M6({error:t,options:e})}}}const H6={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"none"},K6={userVerification:"preferred",hints:["security-key"]};function Lh(...e){const t=s=>s!==null&&typeof s=="object"&&!Array.isArray(s),r=s=>s instanceof ArrayBuffer||ArrayBuffer.isView(s),n={};for(const s of e)if(s)for(const a in s){const l=s[a];if(l!==void 0)if(Array.isArray(l))n[a]=l;else if(r(l))n[a]=l;else if(t(l)){const u=n[a];t(u)?n[a]=Lh(u,l):n[a]=Lh(l)}else n[a]=l}return n}function G6(e,t){return Lh(H6,e,t||{})}function Y6(e,t){return Lh(K6,e,t||{})}class J6{constructor(t){this.client=t,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(t){return this.client.mfa.enroll(Object.assign(Object.assign({},t),{factorType:"webauthn"}))}async _challenge({factorId:t,webauthn:r,friendlyName:n,signal:s},a){try{const{data:l,error:u}=await this.client.mfa.challenge({factorId:t,webauthn:r});if(!l)return{data:null,error:u};const d=s??L6.createNewAbortSignal();if(l.webauthn.type==="create"){const{user:m}=l.webauthn.credential_options.publicKey;m.name||(m.name=`${m.id}:${n}`),m.displayName||(m.displayName=m.name)}switch(l.webauthn.type){case"create":{const m=G6(l.webauthn.credential_options.publicKey,a==null?void 0:a.create),{data:f,error:p}=await V6({publicKey:m,signal:d});return f?{data:{factorId:t,challengeId:l.id,webauthn:{type:l.webauthn.type,credential_response:f}},error:null}:{data:null,error:p}}case"request":{const m=Y6(l.webauthn.credential_options.publicKey,a==null?void 0:a.request),{data:f,error:p}=await q6(Object.assign(Object.assign({},l.webauthn.credential_options),{publicKey:m,signal:d}));return f?{data:{factorId:t,challengeId:l.id,webauthn:{type:l.webauthn.type,credential_response:f}},error:null}:{data:null,error:p}}}}catch(l){return Lt(l)?{data:null,error:l}:{data:null,error:new Cl("Unexpected error in challenge",l)}}}async _verify({challengeId:t,factorId:r,webauthn:n}){return this.client.mfa.verify({factorId:r,challengeId:t,webauthn:n})}async _authenticate({factorId:t,webauthn:{rpId:r=typeof window<"u"?window.location.hostname:void 0,rpOrigins:n=typeof window<"u"?[window.location.origin]:void 0,signal:s}},a){if(!r)return{data:null,error:new kd("rpId is required for WebAuthn authentication")};try{if(!gk())return{data:null,error:new Cl("Browser does not support WebAuthn",null)};const{data:l,error:u}=await this.challenge({factorId:t,webauthn:{rpId:r,rpOrigins:n},signal:s},{request:a});if(!l)return{data:null,error:u};const{webauthn:d}=l;return this._verify({factorId:t,challengeId:l.challengeId,webauthn:{type:d.type,rpId:r,rpOrigins:n,credential_response:d.credential_response}})}catch(l){return Lt(l)?{data:null,error:l}:{data:null,error:new Cl("Unexpected error in authenticate",l)}}}async _register({friendlyName:t,rpId:r=typeof window<"u"?window.location.hostname:void 0,rpOrigins:n=typeof window<"u"?[window.location.origin]:void 0,signal:s},a){if(!r)return{data:null,error:new kd("rpId is required for WebAuthn registration")};try{if(!gk())return{data:null,error:new Cl("Browser does not support WebAuthn",null)};const{data:l,error:u}=await this._enroll({friendlyName:t});if(!l)return await this.client.mfa.listFactors().then(f=>{var p;return(p=f.data)===null||p===void 0?void 0:p.all.find(v=>v.factor_type==="webauthn"&&v.friendly_name===t&&v.status!=="unverified")}).then(f=>f?this.client.mfa.unenroll({factorId:f==null?void 0:f.id}):void 0),{data:null,error:u};const{data:d,error:m}=await this._challenge({factorId:l.id,friendlyName:l.friendly_name,webauthn:{rpId:r,rpOrigins:n},signal:s},{create:a});return d?this._verify({factorId:l.id,challengeId:d.challengeId,webauthn:{rpId:r,rpOrigins:n,type:d.webauthn.type,credential_response:d.webauthn.credential_response}}):{data:null,error:m}}catch(l){return Lt(l)?{data:null,error:l}:{data:null,error:new Cl("Unexpected error in register",l)}}}}T6();const X6={url:H$,storageKey:K$,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:G$,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function yk(e,t,r){return await r()}const Ac={};class Sd{get jwks(){var t,r;return(r=(t=Ac[this.storageKey])===null||t===void 0?void 0:t.jwks)!==null&&r!==void 0?r:{keys:[]}}set jwks(t){Ac[this.storageKey]=Object.assign(Object.assign({},Ac[this.storageKey]),{jwks:t})}get jwks_cached_at(){var t,r;return(r=(t=Ac[this.storageKey])===null||t===void 0?void 0:t.cachedAt)!==null&&r!==void 0?r:Number.MIN_SAFE_INTEGER}set jwks_cached_at(t){Ac[this.storageKey]=Object.assign(Object.assign({},Ac[this.storageKey]),{cachedAt:t})}constructor(t){var r,n;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=Sd.nextInstanceID,Sd.nextInstanceID+=1,this.instanceID>0&&oa()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const s=Object.assign(Object.assign({},X6),t);if(this.logDebugMessages=!!s.debug,typeof s.debug=="function"&&(this.logger=s.debug),this.persistSession=s.persistSession,this.storageKey=s.storageKey,this.autoRefreshToken=s.autoRefreshToken,this.admin=new P6({url:s.url,headers:s.headers,fetch:s.fetch}),this.url=s.url,this.headers=s.headers,this.fetch=fE(s.fetch),this.lock=s.lock||yk,this.detectSessionInUrl=s.detectSessionInUrl,this.flowType=s.flowType,this.hasCustomAuthorizationHeader=s.hasCustomAuthorizationHeader,s.lock?this.lock=s.lock:oa()&&(!((r=globalThis==null?void 0:globalThis.navigator)===null||r===void 0)&&r.locks)?this.lock=O6:this.lock=yk,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new J6(this)},this.persistSession?(s.storage?this.storage=s.storage:dE()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=pk(this.memoryStorage)),s.userStorage&&(this.userStorage=s.userStorage)):(this.memoryStorage={},this.storage=pk(this.memoryStorage)),oa()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(a){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",a)}(n=this.broadcastChannel)===null||n===void 0||n.addEventListener("message",async a=>{this._debug("received broadcast notification from other tab or client",a),await this._notifyAllSubscribers(a.data.event,a.data.session,!1)})}this.initialize()}_debug(...t){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${lE}) ${new Date().toISOString()}`,...t),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var t;try{const r=l6(window.location.href);let n="none";if(this._isImplicitGrantCallback(r)?n="implicit":await this._isPKCECallback(r)&&(n="pkce"),oa()&&this.detectSessionInUrl&&n!=="none"){const{data:s,error:a}=await this._getSessionFromURL(r,n);if(a){if(this._debug("#_initialize()","error detecting session from URL",a),e6(a)){const d=(t=a.details)===null||t===void 0?void 0:t.code;if(d==="identity_already_exists"||d==="identity_not_found"||d==="single_identity_not_deletable")return{error:a}}return await this._removeSession(),{error:a}}const{session:l,redirectType:u}=s;return this._debug("#_initialize()","detected session in URL",l,"redirect type",u),await this._saveSession(l),setTimeout(async()=>{u==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",l):await this._notifyAllSubscribers("SIGNED_IN",l)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(r){return Lt(r)?{error:r}:{error:new Cl("Unexpected error during initialization",r)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(t){var r,n,s;try{const a=await Xt(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(n=(r=t==null?void 0:t.options)===null||r===void 0?void 0:r.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:(s=t==null?void 0:t.options)===null||s===void 0?void 0:s.captchaToken}},xform:Ja}),{data:l,error:u}=a;if(u||!l)return{data:{user:null,session:null},error:u};const d=l.session,m=l.user;return l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",d)),{data:{user:m,session:d},error:null}}catch(a){if(Lt(a))return{data:{user:null,session:null},error:a};throw a}}async signUp(t){var r,n,s;try{let a;if("email"in t){const{email:f,password:p,options:v}=t;let x=null,w=null;this.flowType==="pkce"&&([x,w]=await Cc(this.storage,this.storageKey)),a=await Xt(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:v==null?void 0:v.emailRedirectTo,body:{email:f,password:p,data:(r=v==null?void 0:v.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:v==null?void 0:v.captchaToken},code_challenge:x,code_challenge_method:w},xform:Ja})}else if("phone"in t){const{phone:f,password:p,options:v}=t;a=await Xt(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:f,password:p,data:(n=v==null?void 0:v.data)!==null&&n!==void 0?n:{},channel:(s=v==null?void 0:v.channel)!==null&&s!==void 0?s:"sms",gotrue_meta_security:{captcha_token:v==null?void 0:v.captchaToken}},xform:Ja})}else throw new sh("You must provide either an email or phone number and a password");const{data:l,error:u}=a;if(u||!l)return{data:{user:null,session:null},error:u};const d=l.session,m=l.user;return l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",d)),{data:{user:m,session:d},error:null}}catch(a){if(Lt(a))return{data:{user:null,session:null},error:a};throw a}}async signInWithPassword(t){try{let r;if("email"in t){const{email:a,password:l,options:u}=t;r=await Xt(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:a,password:l,gotrue_meta_security:{captcha_token:u==null?void 0:u.captchaToken}},xform:hk})}else if("phone"in t){const{phone:a,password:l,options:u}=t;r=await Xt(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:a,password:l,gotrue_meta_security:{captcha_token:u==null?void 0:u.captchaToken}},xform:hk})}else throw new sh("You must provide either an email or phone number and a password");const{data:n,error:s}=r;return s?{data:{user:null,session:null},error:s}:!n||!n.session||!n.user?{data:{user:null,session:null},error:new Nc}:(n.session&&(await this._saveSession(n.session),await this._notifyAllSubscribers("SIGNED_IN",n.session)),{data:Object.assign({user:n.user,session:n.session},n.weak_password?{weakPassword:n.weak_password}:null),error:s})}catch(r){if(Lt(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithOAuth(t){var r,n,s,a;return await this._handleProviderSignIn(t.provider,{redirectTo:(r=t.options)===null||r===void 0?void 0:r.redirectTo,scopes:(n=t.options)===null||n===void 0?void 0:n.scopes,queryParams:(s=t.options)===null||s===void 0?void 0:s.queryParams,skipBrowserRedirect:(a=t.options)===null||a===void 0?void 0:a.skipBrowserRedirect})}async exchangeCodeForSession(t){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(t))}async signInWithWeb3(t){const{chain:r}=t;switch(r){case"ethereum":return await this.signInWithEthereum(t);case"solana":return await this.signInWithSolana(t);default:throw new Error(`@supabase/auth-js: Unsupported chain "${r}"`)}}async signInWithEthereum(t){var r,n,s,a,l,u,d,m,f,p,v;let x,w;if("message"in t)x=t.message,w=t.signature;else{const{chain:k,wallet:b,statement:_,options:N}=t;let C;if(oa())if(typeof b=="object")C=b;else{const K=window;if("ethereum"in K&&typeof K.ethereum=="object"&&"request"in K.ethereum&&typeof K.ethereum.request=="function")C=K.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof b!="object"||!(N!=null&&N.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");C=b}const T=new URL((r=N==null?void 0:N.url)!==null&&r!==void 0?r:window.location.href),P=await C.request({method:"eth_requestAccounts"}).then(K=>K).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!P||P.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const A=mE(P[0]);let M=(n=N==null?void 0:N.signInWithEthereum)===null||n===void 0?void 0:n.chainId;if(!M){const K=await C.request({method:"eth_chainId"});M=I6(K)}const R={domain:T.host,address:A,statement:_,uri:T.href,version:"1",chainId:M,nonce:(s=N==null?void 0:N.signInWithEthereum)===null||s===void 0?void 0:s.nonce,issuedAt:(l=(a=N==null?void 0:N.signInWithEthereum)===null||a===void 0?void 0:a.issuedAt)!==null&&l!==void 0?l:new Date,expirationTime:(u=N==null?void 0:N.signInWithEthereum)===null||u===void 0?void 0:u.expirationTime,notBefore:(d=N==null?void 0:N.signInWithEthereum)===null||d===void 0?void 0:d.notBefore,requestId:(m=N==null?void 0:N.signInWithEthereum)===null||m===void 0?void 0:m.requestId,resources:(f=N==null?void 0:N.signInWithEthereum)===null||f===void 0?void 0:f.resources};x=$6(R),w=await C.request({method:"personal_sign",params:[D6(x),A]})}try{const{data:k,error:b}=await Xt(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:x,signature:w},!((p=t.options)===null||p===void 0)&&p.captchaToken?{gotrue_meta_security:{captcha_token:(v=t.options)===null||v===void 0?void 0:v.captchaToken}}:null),xform:Ja});if(b)throw b;return!k||!k.session||!k.user?{data:{user:null,session:null},error:new Nc}:(k.session&&(await this._saveSession(k.session),await this._notifyAllSubscribers("SIGNED_IN",k.session)),{data:Object.assign({},k),error:b})}catch(k){if(Lt(k))return{data:{user:null,session:null},error:k};throw k}}async signInWithSolana(t){var r,n,s,a,l,u,d,m,f,p,v,x;let w,k;if("message"in t)w=t.message,k=t.signature;else{const{chain:b,wallet:_,statement:N,options:C}=t;let T;if(oa())if(typeof _=="object")T=_;else{const A=window;if("solana"in A&&typeof A.solana=="object"&&("signIn"in A.solana&&typeof A.solana.signIn=="function"||"signMessage"in A.solana&&typeof A.solana.signMessage=="function"))T=A.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof _!="object"||!(C!=null&&C.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");T=_}const P=new URL((r=C==null?void 0:C.url)!==null&&r!==void 0?r:window.location.href);if("signIn"in T&&T.signIn){const A=await T.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},C==null?void 0:C.signInWithSolana),{version:"1",domain:P.host,uri:P.href}),N?{statement:N}:null));let M;if(Array.isArray(A)&&A[0]&&typeof A[0]=="object")M=A[0];else if(A&&typeof A=="object"&&"signedMessage"in A&&"signature"in A)M=A;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in M&&"signature"in M&&(typeof M.signedMessage=="string"||M.signedMessage instanceof Uint8Array)&&M.signature instanceof Uint8Array)w=typeof M.signedMessage=="string"?M.signedMessage:new TextDecoder().decode(M.signedMessage),k=M.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in T)||typeof T.signMessage!="function"||!("publicKey"in T)||typeof T!="object"||!T.publicKey||!("toBase58"in T.publicKey)||typeof T.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");w=[`${P.host} wants you to sign in with your Solana account:`,T.publicKey.toBase58(),...N?["",N,""]:[""],"Version: 1",`URI: ${P.href}`,`Issued At: ${(s=(n=C==null?void 0:C.signInWithSolana)===null||n===void 0?void 0:n.issuedAt)!==null&&s!==void 0?s:new Date().toISOString()}`,...!((a=C==null?void 0:C.signInWithSolana)===null||a===void 0)&&a.notBefore?[`Not Before: ${C.signInWithSolana.notBefore}`]:[],...!((l=C==null?void 0:C.signInWithSolana)===null||l===void 0)&&l.expirationTime?[`Expiration Time: ${C.signInWithSolana.expirationTime}`]:[],...!((u=C==null?void 0:C.signInWithSolana)===null||u===void 0)&&u.chainId?[`Chain ID: ${C.signInWithSolana.chainId}`]:[],...!((d=C==null?void 0:C.signInWithSolana)===null||d===void 0)&&d.nonce?[`Nonce: ${C.signInWithSolana.nonce}`]:[],...!((m=C==null?void 0:C.signInWithSolana)===null||m===void 0)&&m.requestId?[`Request ID: ${C.signInWithSolana.requestId}`]:[],...!((p=(f=C==null?void 0:C.signInWithSolana)===null||f===void 0?void 0:f.resources)===null||p===void 0)&&p.length?["Resources",...C.signInWithSolana.resources.map(M=>`- ${M}`)]:[]].join(`
`);const A=await T.signMessage(new TextEncoder().encode(w),"utf8");if(!A||!(A instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");k=A}}try{const{data:b,error:_}=await Xt(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:w,signature:El(k)},!((v=t.options)===null||v===void 0)&&v.captchaToken?{gotrue_meta_security:{captcha_token:(x=t.options)===null||x===void 0?void 0:x.captchaToken}}:null),xform:Ja});if(_)throw _;return!b||!b.session||!b.user?{data:{user:null,session:null},error:new Nc}:(b.session&&(await this._saveSession(b.session),await this._notifyAllSubscribers("SIGNED_IN",b.session)),{data:Object.assign({},b),error:_})}catch(b){if(Lt(b))return{data:{user:null,session:null},error:b};throw b}}async _exchangeCodeForSession(t){const r=await bl(this.storage,`${this.storageKey}-code-verifier`),[n,s]=(r??"").split("/");try{const{data:a,error:l}=await Xt(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:t,code_verifier:n},xform:Ja});if(await Fo(this.storage,`${this.storageKey}-code-verifier`),l)throw l;return!a||!a.session||!a.user?{data:{user:null,session:null,redirectType:null},error:new Nc}:(a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",a.session)),{data:Object.assign(Object.assign({},a),{redirectType:s??null}),error:l})}catch(a){if(Lt(a))return{data:{user:null,session:null,redirectType:null},error:a};throw a}}async signInWithIdToken(t){try{const{options:r,provider:n,token:s,access_token:a,nonce:l}=t,u=await Xt(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:n,id_token:s,access_token:a,nonce:l,gotrue_meta_security:{captcha_token:r==null?void 0:r.captchaToken}},xform:Ja}),{data:d,error:m}=u;return m?{data:{user:null,session:null},error:m}:!d||!d.session||!d.user?{data:{user:null,session:null},error:new Nc}:(d.session&&(await this._saveSession(d.session),await this._notifyAllSubscribers("SIGNED_IN",d.session)),{data:d,error:m})}catch(r){if(Lt(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithOtp(t){var r,n,s,a,l;try{if("email"in t){const{email:u,options:d}=t;let m=null,f=null;this.flowType==="pkce"&&([m,f]=await Cc(this.storage,this.storageKey));const{error:p}=await Xt(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:u,data:(r=d==null?void 0:d.data)!==null&&r!==void 0?r:{},create_user:(n=d==null?void 0:d.shouldCreateUser)!==null&&n!==void 0?n:!0,gotrue_meta_security:{captcha_token:d==null?void 0:d.captchaToken},code_challenge:m,code_challenge_method:f},redirectTo:d==null?void 0:d.emailRedirectTo});return{data:{user:null,session:null},error:p}}if("phone"in t){const{phone:u,options:d}=t,{data:m,error:f}=await Xt(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:u,data:(s=d==null?void 0:d.data)!==null&&s!==void 0?s:{},create_user:(a=d==null?void 0:d.shouldCreateUser)!==null&&a!==void 0?a:!0,gotrue_meta_security:{captcha_token:d==null?void 0:d.captchaToken},channel:(l=d==null?void 0:d.channel)!==null&&l!==void 0?l:"sms"}});return{data:{user:null,session:null,messageId:m==null?void 0:m.message_id},error:f}}throw new sh("You must provide either an email or phone number.")}catch(u){if(Lt(u))return{data:{user:null,session:null},error:u};throw u}}async verifyOtp(t){var r,n;try{let s,a;"options"in t&&(s=(r=t.options)===null||r===void 0?void 0:r.redirectTo,a=(n=t.options)===null||n===void 0?void 0:n.captchaToken);const{data:l,error:u}=await Xt(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},t),{gotrue_meta_security:{captcha_token:a}}),redirectTo:s,xform:Ja});if(u)throw u;if(!l)throw new Error("An error occurred on token verification.");const d=l.session,m=l.user;return d!=null&&d.access_token&&(await this._saveSession(d),await this._notifyAllSubscribers(t.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",d)),{data:{user:m,session:d},error:null}}catch(s){if(Lt(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithSSO(t){var r,n,s;try{let a=null,l=null;return this.flowType==="pkce"&&([a,l]=await Cc(this.storage,this.storageKey)),await Xt(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in t?{provider_id:t.providerId}:null),"domain"in t?{domain:t.domain}:null),{redirect_to:(n=(r=t.options)===null||r===void 0?void 0:r.redirectTo)!==null&&n!==void 0?n:void 0}),!((s=t==null?void 0:t.options)===null||s===void 0)&&s.captchaToken?{gotrue_meta_security:{captcha_token:t.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:a,code_challenge_method:l}),headers:this.headers,xform:_6})}catch(a){if(Lt(a))return{data:null,error:a};throw a}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async t=>{const{data:{session:r},error:n}=t;if(n)throw n;if(!r)throw new zo;const{error:s}=await Xt(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:r.access_token});return{data:{user:null,session:null},error:s}})}catch(t){if(Lt(t))return{data:{user:null,session:null},error:t};throw t}}async resend(t){try{const r=`${this.url}/resend`;if("email"in t){const{email:n,type:s,options:a}=t,{error:l}=await Xt(this.fetch,"POST",r,{headers:this.headers,body:{email:n,type:s,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},redirectTo:a==null?void 0:a.emailRedirectTo});return{data:{user:null,session:null},error:l}}else if("phone"in t){const{phone:n,type:s,options:a}=t,{data:l,error:u}=await Xt(this.fetch,"POST",r,{headers:this.headers,body:{phone:n,type:s,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}}});return{data:{user:null,session:null,messageId:l==null?void 0:l.message_id},error:u}}throw new sh("You must provide either an email or phone number and a type")}catch(r){if(Lt(r))return{data:{user:null,session:null},error:r};throw r}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async r=>r))}async _acquireLock(t,r){this._debug("#_acquireLock","begin",t);try{if(this.lockAcquired){const n=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),s=(async()=>(await n,await r()))();return this.pendingInLock.push((async()=>{try{await s}catch{}})()),s}return await this.lock(`lock:${this.storageKey}`,t,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const n=r();for(this.pendingInLock.push((async()=>{try{await n}catch{}})()),await n;this.pendingInLock.length;){const s=[...this.pendingInLock];await Promise.all(s),this.pendingInLock.splice(0,s.length)}return await n}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(t){this._debug("#_useSession","begin");try{const r=await this.__loadSession();return await t(r)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let t=null;const r=await bl(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",r),r!==null&&(this._isValidSession(r)?t=r:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!t)return{data:{session:null},error:null};const n=t.expires_at?t.expires_at*1e3-Date.now()<dy:!1;if(this._debug("#__loadSession()",`session has${n?"":" not"} expired`,"expires_at",t.expires_at),!n){if(this.userStorage){const l=await bl(this.userStorage,this.storageKey+"-user");l!=null&&l.user?t.user=l.user:t.user=my()}if(this.storage.isServer&&t.user){let l=this.suppressGetSessionWarning;t=new Proxy(t,{get:(d,m,f)=>(!l&&m==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),l=!0,this.suppressGetSessionWarning=!0),Reflect.get(d,m,f))})}return{data:{session:t},error:null}}const{data:s,error:a}=await this._callRefreshToken(t.refresh_token);return a?{data:{session:null},error:a}:{data:{session:s},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(t){return t?await this._getUser(t):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(t){try{return t?await Xt(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:t,xform:qo}):await this._useSession(async r=>{var n,s,a;const{data:l,error:u}=r;if(u)throw u;return!(!((n=l.session)===null||n===void 0)&&n.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new zo}:await Xt(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(a=(s=l.session)===null||s===void 0?void 0:s.access_token)!==null&&a!==void 0?a:void 0,xform:qo})})}catch(r){if(Lt(r))return Z$(r)&&(await this._removeSession(),await Fo(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:r};throw r}}async updateUser(t,r={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(t,r))}async _updateUser(t,r={}){try{return await this._useSession(async n=>{const{data:s,error:a}=n;if(a)throw a;if(!s.session)throw new zo;const l=s.session;let u=null,d=null;this.flowType==="pkce"&&t.email!=null&&([u,d]=await Cc(this.storage,this.storageKey));const{data:m,error:f}=await Xt(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:r==null?void 0:r.emailRedirectTo,body:Object.assign(Object.assign({},t),{code_challenge:u,code_challenge_method:d}),jwt:l.access_token,xform:qo});if(f)throw f;return l.user=m.user,await this._saveSession(l),await this._notifyAllSubscribers("USER_UPDATED",l),{data:{user:l.user},error:null}})}catch(n){if(Lt(n))return{data:{user:null},error:n};throw n}}async setSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(t))}async _setSession(t){try{if(!t.access_token||!t.refresh_token)throw new zo;const r=Date.now()/1e3;let n=r,s=!0,a=null;const{payload:l}=hy(t.access_token);if(l.exp&&(n=l.exp,s=n<=r),s){const{data:u,error:d}=await this._callRefreshToken(t.refresh_token);if(d)return{data:{user:null,session:null},error:d};if(!u)return{data:{user:null,session:null},error:null};a=u}else{const{data:u,error:d}=await this._getUser(t.access_token);if(d)throw d;a={access_token:t.access_token,refresh_token:t.refresh_token,user:u.user,token_type:"bearer",expires_in:n-r,expires_at:n},await this._saveSession(a),await this._notifyAllSubscribers("SIGNED_IN",a)}return{data:{user:a.user,session:a},error:null}}catch(r){if(Lt(r))return{data:{session:null,user:null},error:r};throw r}}async refreshSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(t))}async _refreshSession(t){try{return await this._useSession(async r=>{var n;if(!t){const{data:l,error:u}=r;if(u)throw u;t=(n=l.session)!==null&&n!==void 0?n:void 0}if(!(t!=null&&t.refresh_token))throw new zo;const{data:s,error:a}=await this._callRefreshToken(t.refresh_token);return a?{data:{user:null,session:null},error:a}:s?{data:{user:s.user,session:s},error:null}:{data:{user:null,session:null},error:null}})}catch(r){if(Lt(r))return{data:{user:null,session:null},error:r};throw r}}async _getSessionFromURL(t,r){try{if(!oa())throw new ah("No browser detected.");if(t.error||t.error_description||t.error_code)throw new ah(t.error_description||"Error in URL with unspecified error_description",{error:t.error||"unspecified_error",code:t.error_code||"unspecified_code"});switch(r){case"implicit":if(this.flowType==="pkce")throw new ik("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new ah("Not a valid implicit grant flow url.");break;default:}if(r==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!t.code)throw new ik("No code detected.");const{data:N,error:C}=await this._exchangeCodeForSession(t.code);if(C)throw C;const T=new URL(window.location.href);return T.searchParams.delete("code"),window.history.replaceState(window.history.state,"",T.toString()),{data:{session:N.session,redirectType:null},error:null}}const{provider_token:n,provider_refresh_token:s,access_token:a,refresh_token:l,expires_in:u,expires_at:d,token_type:m}=t;if(!a||!u||!l||!m)throw new ah("No session defined in URL");const f=Math.round(Date.now()/1e3),p=parseInt(u);let v=f+p;d&&(v=parseInt(d));const x=v-f;x*1e3<=Mc&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${x}s, should have been closer to ${p}s`);const w=v-p;f-w>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",w,v,f):f-w<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",w,v,f);const{data:k,error:b}=await this._getUser(a);if(b)throw b;const _={provider_token:n,provider_refresh_token:s,access_token:a,expires_in:p,expires_at:v,refresh_token:l,token_type:m,user:k.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:_,redirectType:t.type},error:null}}catch(n){if(Lt(n))return{data:{session:null,redirectType:null},error:n};throw n}}_isImplicitGrantCallback(t){return!!(t.access_token||t.error_description)}async _isPKCECallback(t){const r=await bl(this.storage,`${this.storageKey}-code-verifier`);return!!(t.code&&r)}async signOut(t={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(t))}async _signOut({scope:t}={scope:"global"}){return await this._useSession(async r=>{var n;const{data:s,error:a}=r;if(a)return{error:a};const l=(n=s.session)===null||n===void 0?void 0:n.access_token;if(l){const{error:u}=await this.admin.signOut(l,t);if(u&&!(Q$(u)&&(u.status===404||u.status===401||u.status===403)))return{error:u}}return t!=="others"&&(await this._removeSession(),await Fo(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(t){const r=o6(),n={id:r,callback:t,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",r),this.stateChangeEmitters.delete(r)}};return this._debug("#onAuthStateChange()","registered callback with id",r),this.stateChangeEmitters.set(r,n),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(r)})))(),{data:{subscription:n}}}async _emitInitialSession(t){return await this._useSession(async r=>{var n,s;try{const{data:{session:a},error:l}=r;if(l)throw l;await((n=this.stateChangeEmitters.get(t))===null||n===void 0?void 0:n.callback("INITIAL_SESSION",a)),this._debug("INITIAL_SESSION","callback id",t,"session",a)}catch(a){await((s=this.stateChangeEmitters.get(t))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",t,"error",a),console.error(a)}})}async resetPasswordForEmail(t,r={}){let n=null,s=null;this.flowType==="pkce"&&([n,s]=await Cc(this.storage,this.storageKey,!0));try{return await Xt(this.fetch,"POST",`${this.url}/recover`,{body:{email:t,code_challenge:n,code_challenge_method:s,gotrue_meta_security:{captcha_token:r.captchaToken}},headers:this.headers,redirectTo:r.redirectTo})}catch(a){if(Lt(a))return{data:null,error:a};throw a}}async getUserIdentities(){var t;try{const{data:r,error:n}=await this.getUser();if(n)throw n;return{data:{identities:(t=r.user.identities)!==null&&t!==void 0?t:[]},error:null}}catch(r){if(Lt(r))return{data:null,error:r};throw r}}async linkIdentity(t){return"token"in t?this.linkIdentityIdToken(t):this.linkIdentityOAuth(t)}async linkIdentityOAuth(t){var r;try{const{data:n,error:s}=await this._useSession(async a=>{var l,u,d,m,f;const{data:p,error:v}=a;if(v)throw v;const x=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,t.provider,{redirectTo:(l=t.options)===null||l===void 0?void 0:l.redirectTo,scopes:(u=t.options)===null||u===void 0?void 0:u.scopes,queryParams:(d=t.options)===null||d===void 0?void 0:d.queryParams,skipBrowserRedirect:!0});return await Xt(this.fetch,"GET",x,{headers:this.headers,jwt:(f=(m=p.session)===null||m===void 0?void 0:m.access_token)!==null&&f!==void 0?f:void 0})});if(s)throw s;return oa()&&!(!((r=t.options)===null||r===void 0)&&r.skipBrowserRedirect)&&window.location.assign(n==null?void 0:n.url),{data:{provider:t.provider,url:n==null?void 0:n.url},error:null}}catch(n){if(Lt(n))return{data:{provider:t.provider,url:null},error:n};throw n}}async linkIdentityIdToken(t){return await this._useSession(async r=>{var n;try{const{error:s,data:{session:a}}=r;if(s)throw s;const{options:l,provider:u,token:d,access_token:m,nonce:f}=t,p=await Xt(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(n=a==null?void 0:a.access_token)!==null&&n!==void 0?n:void 0,body:{provider:u,id_token:d,access_token:m,nonce:f,link_identity:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:Ja}),{data:v,error:x}=p;return x?{data:{user:null,session:null},error:x}:!v||!v.session||!v.user?{data:{user:null,session:null},error:new Nc}:(v.session&&(await this._saveSession(v.session),await this._notifyAllSubscribers("USER_UPDATED",v.session)),{data:v,error:x})}catch(s){if(Lt(s))return{data:{user:null,session:null},error:s};throw s}})}async unlinkIdentity(t){try{return await this._useSession(async r=>{var n,s;const{data:a,error:l}=r;if(l)throw l;return await Xt(this.fetch,"DELETE",`${this.url}/user/identities/${t.identity_id}`,{headers:this.headers,jwt:(s=(n=a.session)===null||n===void 0?void 0:n.access_token)!==null&&s!==void 0?s:void 0})})}catch(r){if(Lt(r))return{data:null,error:r};throw r}}async _refreshAccessToken(t){const r=`#_refreshAccessToken(${t.substring(0,5)}...)`;this._debug(r,"begin");try{const n=Date.now();return await d6(async s=>(s>0&&await u6(200*Math.pow(2,s-1)),this._debug(r,"refreshing attempt",s),await Xt(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:t},headers:this.headers,xform:Ja})),(s,a)=>{const l=200*Math.pow(2,s);return a&&fy(a)&&Date.now()+l-n<Mc})}catch(n){if(this._debug(r,"error",n),Lt(n))return{data:{session:null,user:null},error:n};throw n}finally{this._debug(r,"end")}}_isValidSession(t){return typeof t=="object"&&t!==null&&"access_token"in t&&"refresh_token"in t&&"expires_at"in t}async _handleProviderSignIn(t,r){const n=await this._getUrlForProvider(`${this.url}/authorize`,t,{redirectTo:r.redirectTo,scopes:r.scopes,queryParams:r.queryParams});return this._debug("#_handleProviderSignIn()","provider",t,"options",r,"url",n),oa()&&!r.skipBrowserRedirect&&window.location.assign(n),{data:{provider:t,url:n},error:null}}async _recoverAndRefresh(){var t,r;const n="#_recoverAndRefresh()";this._debug(n,"begin");try{const s=await bl(this.storage,this.storageKey);if(s&&this.userStorage){let l=await bl(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!l&&(l={user:s.user},await Fc(this.userStorage,this.storageKey+"-user",l)),s.user=(t=l==null?void 0:l.user)!==null&&t!==void 0?t:my()}else if(s&&!s.user&&!s.user){const l=await bl(this.storage,this.storageKey+"-user");l&&(l!=null&&l.user)?(s.user=l.user,await Fo(this.storage,this.storageKey+"-user"),await Fc(this.storage,this.storageKey,s)):s.user=my()}if(this._debug(n,"session from storage",s),!this._isValidSession(s)){this._debug(n,"session is not valid"),s!==null&&await this._removeSession();return}const a=((r=s.expires_at)!==null&&r!==void 0?r:1/0)*1e3-Date.now()<dy;if(this._debug(n,`session has${a?"":" not"} expired with margin of ${dy}s`),a){if(this.autoRefreshToken&&s.refresh_token){const{error:l}=await this._callRefreshToken(s.refresh_token);l&&(console.error(l),fy(l)||(this._debug(n,"refresh failed with a non-retryable error, removing the session",l),await this._removeSession()))}}else if(s.user&&s.user.__isUserNotAvailableProxy===!0)try{const{data:l,error:u}=await this._getUser(s.access_token);!u&&(l!=null&&l.user)?(s.user=l.user,await this._saveSession(s),await this._notifyAllSubscribers("SIGNED_IN",s)):this._debug(n,"could not get user data, skipping SIGNED_IN notification")}catch(l){console.error("Error getting user data:",l),this._debug(n,"error getting user data, skipping SIGNED_IN notification",l)}else await this._notifyAllSubscribers("SIGNED_IN",s)}catch(s){this._debug(n,"error",s),console.error(s);return}finally{this._debug(n,"end")}}async _callRefreshToken(t){var r,n;if(!t)throw new zo;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const s=`#_callRefreshToken(${t.substring(0,5)}...)`;this._debug(s,"begin");try{this.refreshingDeferred=new Lm;const{data:a,error:l}=await this._refreshAccessToken(t);if(l)throw l;if(!a.session)throw new zo;await this._saveSession(a.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",a.session);const u={data:a.session,error:null};return this.refreshingDeferred.resolve(u),u}catch(a){if(this._debug(s,"error",a),Lt(a)){const l={data:null,error:a};return fy(a)||await this._removeSession(),(r=this.refreshingDeferred)===null||r===void 0||r.resolve(l),l}throw(n=this.refreshingDeferred)===null||n===void 0||n.reject(a),a}finally{this.refreshingDeferred=null,this._debug(s,"end")}}async _notifyAllSubscribers(t,r,n=!0){const s=`#_notifyAllSubscribers(${t})`;this._debug(s,"begin",r,`broadcast = ${n}`);try{this.broadcastChannel&&n&&this.broadcastChannel.postMessage({event:t,session:r});const a=[],l=Array.from(this.stateChangeEmitters.values()).map(async u=>{try{await u.callback(t,r)}catch(d){a.push(d)}});if(await Promise.all(l),a.length>0){for(let u=0;u<a.length;u+=1)console.error(a[u]);throw a[0]}}finally{this._debug(s,"end")}}async _saveSession(t){this._debug("#_saveSession()",t),this.suppressGetSessionWarning=!0;const r=Object.assign({},t),n=r.user&&r.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!n&&r.user&&await Fc(this.userStorage,this.storageKey+"-user",{user:r.user});const s=Object.assign({},r);delete s.user;const a=dk(s);await Fc(this.storage,this.storageKey,a)}else{const s=dk(r);await Fc(this.storage,this.storageKey,s)}}async _removeSession(){this._debug("#_removeSession()"),await Fo(this.storage,this.storageKey),await Fo(this.storage,this.storageKey+"-code-verifier"),await Fo(this.storage,this.storageKey+"-user"),this.userStorage&&await Fo(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const t=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{t&&oa()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",t)}catch(r){console.error("removing visibilitychange callback failed",r)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const t=setInterval(()=>this._autoRefreshTokenTick(),Mc);this.autoRefreshTicker=t,t&&typeof t=="object"&&typeof t.unref=="function"?t.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(t),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const t=this.autoRefreshTicker;this.autoRefreshTicker=null,t&&clearInterval(t)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const t=Date.now();try{return await this._useSession(async r=>{const{data:{session:n}}=r;if(!n||!n.refresh_token||!n.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const s=Math.floor((n.expires_at*1e3-t)/Mc);this._debug("#_autoRefreshTokenTick()",`access token expires in ${s} ticks, a tick lasts ${Mc}ms, refresh threshold is ${d0} ticks`),s<=d0&&await this._callRefreshToken(n.refresh_token)})}catch(r){console.error("Auto refresh tick failed with error. This is likely a transient error.",r)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(t){if(t.isAcquireTimeout||t instanceof hE)this._debug("auto refresh token tick lock not available");else throw t}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!oa()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(t){console.error("_handleVisibilityChange",t)}}async _onVisibilityChanged(t){const r=`#_onVisibilityChanged(${t})`;this._debug(r,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),t||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(r,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(t,r,n){const s=[`provider=${encodeURIComponent(r)}`];if(n!=null&&n.redirectTo&&s.push(`redirect_to=${encodeURIComponent(n.redirectTo)}`),n!=null&&n.scopes&&s.push(`scopes=${encodeURIComponent(n.scopes)}`),this.flowType==="pkce"){const[a,l]=await Cc(this.storage,this.storageKey),u=new URLSearchParams({code_challenge:`${encodeURIComponent(a)}`,code_challenge_method:`${encodeURIComponent(l)}`});s.push(u.toString())}if(n!=null&&n.queryParams){const a=new URLSearchParams(n.queryParams);s.push(a.toString())}return n!=null&&n.skipBrowserRedirect&&s.push(`skip_http_redirect=${n.skipBrowserRedirect}`),`${t}?${s.join("&")}`}async _unenroll(t){try{return await this._useSession(async r=>{var n;const{data:s,error:a}=r;return a?{data:null,error:a}:await Xt(this.fetch,"DELETE",`${this.url}/factors/${t.factorId}`,{headers:this.headers,jwt:(n=s==null?void 0:s.session)===null||n===void 0?void 0:n.access_token})})}catch(r){if(Lt(r))return{data:null,error:r};throw r}}async _enroll(t){try{return await this._useSession(async r=>{var n,s;const{data:a,error:l}=r;if(l)return{data:null,error:l};const u=Object.assign({friendly_name:t.friendlyName,factor_type:t.factorType},t.factorType==="phone"?{phone:t.phone}:t.factorType==="totp"?{issuer:t.issuer}:{}),{data:d,error:m}=await Xt(this.fetch,"POST",`${this.url}/factors`,{body:u,headers:this.headers,jwt:(n=a==null?void 0:a.session)===null||n===void 0?void 0:n.access_token});return m?{data:null,error:m}:(t.factorType==="totp"&&d.type==="totp"&&(!((s=d==null?void 0:d.totp)===null||s===void 0)&&s.qr_code)&&(d.totp.qr_code=`data:image/svg+xml;utf-8,${d.totp.qr_code}`),{data:d,error:null})})}catch(r){if(Lt(r))return{data:null,error:r};throw r}}async _verify(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var n;const{data:s,error:a}=r;if(a)return{data:null,error:a};const l=Object.assign({challenge_id:t.challengeId},"webauthn"in t?{webauthn:Object.assign(Object.assign({},t.webauthn),{credential_response:t.webauthn.type==="create"?B6(t.webauthn.credential_response):W6(t.webauthn.credential_response)})}:{code:t.code}),{data:u,error:d}=await Xt(this.fetch,"POST",`${this.url}/factors/${t.factorId}/verify`,{body:l,headers:this.headers,jwt:(n=s==null?void 0:s.session)===null||n===void 0?void 0:n.access_token});return d?{data:null,error:d}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+u.expires_in},u)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",u),{data:u,error:d})})}catch(r){if(Lt(r))return{data:null,error:r};throw r}})}async _challenge(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var n;const{data:s,error:a}=r;if(a)return{data:null,error:a};const l=await Xt(this.fetch,"POST",`${this.url}/factors/${t.factorId}/challenge`,{body:t,headers:this.headers,jwt:(n=s==null?void 0:s.session)===null||n===void 0?void 0:n.access_token});if(l.error)return l;const{data:u}=l;if(u.type!=="webauthn")return{data:u,error:null};switch(u.webauthn.type){case"create":return{data:Object.assign(Object.assign({},u),{webauthn:Object.assign(Object.assign({},u.webauthn),{credential_options:Object.assign(Object.assign({},u.webauthn.credential_options),{publicKey:z6(u.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},u),{webauthn:Object.assign(Object.assign({},u.webauthn),{credential_options:Object.assign(Object.assign({},u.webauthn.credential_options),{publicKey:U6(u.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(r){if(Lt(r))return{data:null,error:r};throw r}})}async _challengeAndVerify(t){const{data:r,error:n}=await this._challenge({factorId:t.factorId});return n?{data:null,error:n}:await this._verify({factorId:t.factorId,challengeId:r.id,code:t.code})}async _listFactors(){var t;const{data:{user:r},error:n}=await this.getUser();if(n)return{data:null,error:n};const s={all:[],phone:[],totp:[],webauthn:[]};for(const a of(t=r==null?void 0:r.factors)!==null&&t!==void 0?t:[])s.all.push(a),a.status==="verified"&&s[a.factor_type].push(a);return{data:s,error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async t=>{var r,n;const{data:{session:s},error:a}=t;if(a)return{data:null,error:a};if(!s)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:l}=hy(s.access_token);let u=null;l.aal&&(u=l.aal);let d=u;((n=(r=s.user.factors)===null||r===void 0?void 0:r.filter(p=>p.status==="verified"))!==null&&n!==void 0?n:[]).length>0&&(d="aal2");const f=l.amr||[];return{data:{currentLevel:u,nextLevel:d,currentAuthenticationMethods:f},error:null}}))}async fetchJwk(t,r={keys:[]}){let n=r.keys.find(u=>u.kid===t);if(n)return n;const s=Date.now();if(n=this.jwks.keys.find(u=>u.kid===t),n&&this.jwks_cached_at+J$>s)return n;const{data:a,error:l}=await Xt(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(l)throw l;return!a.keys||a.keys.length===0||(this.jwks=a,this.jwks_cached_at=s,n=a.keys.find(u=>u.kid===t),!n)?null:n}async getClaims(t,r={}){try{let n=t;if(!n){const{data:x,error:w}=await this.getSession();if(w||!x.session)return{data:null,error:w};n=x.session.access_token}const{header:s,payload:a,signature:l,raw:{header:u,payload:d}}=hy(n);r!=null&&r.allowExpired||v6(a.exp);const m=!s.alg||s.alg.startsWith("HS")||!s.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(s.kid,r!=null&&r.keys?{keys:r.keys}:r==null?void 0:r.jwks);if(!m){const{error:x}=await this.getUser(n);if(x)throw x;return{data:{claims:a,header:s,signature:l},error:null}}const f=x6(s.alg),p=await crypto.subtle.importKey("jwk",m,f,!0,["verify"]);if(!await crypto.subtle.verify(f,p,l,a6(`${u}.${d}`)))throw new m0("Invalid JWT signature");return{data:{claims:a,header:s,signature:l},error:null}}catch(n){if(Lt(n))return{data:null,error:n};throw n}}}Sd.nextInstanceID=0;const Q6=Sd;class Z6 extends Q6{constructor(t){super(t)}}var e5=function(e,t,r,n){function s(a){return a instanceof r?a:new r(function(l){l(a)})}return new(r||(r=Promise))(function(a,l){function u(f){try{m(n.next(f))}catch(p){l(p)}}function d(f){try{m(n.throw(f))}catch(p){l(p)}}function m(f){f.done?a(f.value):s(f.value).then(u,d)}m((n=n.apply(e,t||[])).next())})};class t5{constructor(t,r,n){var s,a,l;this.supabaseUrl=t,this.supabaseKey=r;const u=q$(t);if(!r)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",u),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",u),this.storageUrl=new URL("storage/v1",u),this.functionsUrl=new URL("functions/v1",u);const d=`sb-${u.hostname.split(".")[0]}-auth-token`,m={db:$$,realtime:M$,auth:Object.assign(Object.assign({},R$),{storageKey:d}),global:D$},f=V$(n??{},m);this.storageKey=(s=f.auth.storageKey)!==null&&s!==void 0?s:"",this.headers=(a=f.global.headers)!==null&&a!==void 0?a:{},f.accessToken?(this.accessToken=f.accessToken,this.auth=new Proxy({},{get:(p,v)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(v)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((l=f.auth)!==null&&l!==void 0?l:{},this.headers,f.global.fetch),this.fetch=U$(r,this._getAccessToken.bind(this),f.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},f.realtime)),this.rest=new X3(new URL("rest/v1",u).href,{headers:this.headers,schema:f.db.schema,fetch:this.fetch}),this.storage=new O$(this.storageUrl.href,this.headers,this.fetch,n==null?void 0:n.storage),f.accessToken||this._listenForAuthEvents()}get functions(){return new U3(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(t){return this.rest.from(t)}schema(t){return this.rest.schema(t)}rpc(t,r={},n={}){return this.rest.rpc(t,r,n)}channel(t,r={config:{}}){return this.realtime.channel(t,r)}getChannels(){return this.realtime.getChannels()}removeChannel(t){return this.realtime.removeChannel(t)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){return e5(this,void 0,void 0,function*(){var t,r;if(this.accessToken)return yield this.accessToken();const{data:n}=yield this.auth.getSession();return(r=(t=n.session)===null||t===void 0?void 0:t.access_token)!==null&&r!==void 0?r:this.supabaseKey})}_initSupabaseAuthClient({autoRefreshToken:t,persistSession:r,detectSessionInUrl:n,storage:s,userStorage:a,storageKey:l,flowType:u,lock:d,debug:m},f,p){const v={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new Z6({url:this.authUrl.href,headers:Object.assign(Object.assign({},v),f),storageKey:l,autoRefreshToken:t,persistSession:r,detectSessionInUrl:n,storage:s,userStorage:a,flowType:u,lock:d,debug:m,fetch:p,hasCustomAuthorizationHeader:Object.keys(this.headers).some(x=>x.toLowerCase()==="authorization")})}_initRealtimeClient(t){return new m$(this.realtimeUrl.href,Object.assign(Object.assign({},t),{params:Object.assign({apikey:this.supabaseKey},t==null?void 0:t.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((r,n)=>{this._handleTokenChanged(r,"CLIENT",n==null?void 0:n.access_token)})}_handleTokenChanged(t,r,n){(t==="TOKEN_REFRESHED"||t==="SIGNED_IN")&&this.changedAccessToken!==n?(this.changedAccessToken=n,this.realtime.setAuth(n)):t==="SIGNED_OUT"&&(this.realtime.setAuth(),r=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const r5=(e,t,r)=>new t5(e,t,r);function n5(){if(typeof window<"u"||typeof process>"u")return!1;const e=process.version;if(e==null)return!1;const t=e.match(/^v(\d+)\./);return t?parseInt(t[1],10)<=18:!1}n5()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const s5="https://okdzllfpsvltjqryslnn.supabase.co",a5="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im9rZHpsbGZwc3ZsdGpxcnlzbG5uIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTk3NTcxMTgsImV4cCI6MjA3NTMzMzExOH0.uLhMzo49-OMEp4ghFAFI31IpiDs1tjbyY2jZlk-vgUo",Ee=r5(s5,a5,{db:{schema:"public"},auth:{persistSession:!0,autoRefreshToken:!0}}),i5=Object.freeze(Object.defineProperty({__proto__:null,supabase:Ee},Symbol.toStringTag,{value:"Module"})),to="__FEATURE_SUGGESTION__",Ox="__feature_suggestion__",o5="__feature_future_session__";function zm(e){let t={};if(e!=null&&e.description)try{t=JSON.parse(e.description)}catch(s){console.warn("[databaseService] Unable to parse suggestion payload",s),t={}}const n=(Array.isArray(e==null?void 0:e.tags)?e.tags:[]).includes(o5)?"future":"pending";return{id:e.id,session_id:e.session_id,title:e.title,summary:t.summary??null,whatWouldItDo:t.whatWouldItDo??null,howWouldItWork:t.howWouldItWork??null,status:n,requester_id:t.requesterId??null,requester_name:t.requesterName??null,requester_email:t.requesterEmail??null,attachment_urls:t.attachmentUrls??null,created_at:e.created_at}}async function yE(e){try{if(!Ee||typeof Ee.from!="function")throw new Error("Supabase client is not properly initialized");const t=`${Ee.supabaseUrl}/rest/v1/users?email=eq.${encodeURIComponent(e)}&select=*&limit=1`,r={apikey:Ee.supabaseKey,Authorization:`Bearer ${Ee.supabaseKey}`,"Content-Type":"application/json",Prefer:"return=representation"},n=fetch(t,{method:"GET",headers:r}).then(async f=>{if(!f.ok){const v=await f.text();throw console.error("[databaseService] Direct fetch error:",v),new Error(`API error: ${f.status} - ${v}`)}const p=await f.json();return{data:p.length>0?p[0]:null,error:null}}).catch(f=>{throw console.error("[databaseService] Direct fetch exception:",f),f}),s=Promise.race([n,new Promise((f,p)=>{setTimeout(()=>p(new Error("Direct fetch timeout after 5 seconds")),5e3)})]);try{const f=await s;if(f.data)return f.data}catch{}const a=Ee.from("users").select("*").eq("email",e).single(),u=await Promise.race([a,new Promise((f,p)=>{setTimeout(()=>{console.error("[databaseService]  TIMEOUT: Query did not complete after 10 seconds"),p(new Error("Query timeout after 10 seconds"))},1e4)})]),{data:d,error:m}=u;if(m){if(m.code==="PGRST116")return null;throw m}return d}catch(t){throw console.error("[databaseService] getUserByEmail error:",t),t}}async function l5(e){const t="5e5482eb-82f0-4e76-8a6b-c6d74b01cd3a",{data:r,error:n}=await Ee.from("users").insert([{email:e.email,name:e.name,tenant_id:e.tenant_id||t}]).select().single();if(n)throw console.error("[databaseService] createUser error:",n),n;return r}async function Uc(e,t){try{let r=await yE(e);return r||(r=await l5({email:e,name:t})),r}catch(r){throw console.error("[databaseService] Error in getOrCreateUser:",r),r}}async function vE(){const{data:e,error:t}=await Ee.from("users").select("*").order("created_at",{ascending:!1});if(t)throw t;return e||[]}async function c5(e){var d;const[t,r,n]=await Promise.all([ro(e),Ee.from("product_product_owners").select("product_id").eq("user_id",e),Ee.from("users").select("email").eq("id",e).single()]),s=r.data||[],a=s.some(m=>m.applies_to_all_products===!0||m.product_id==null);let l=0;if(a)try{l=(await Tx()).length}catch{l=0}else l=s.length||0;let u=0;if((d=n.data)!=null&&d.email){const{data:m}=await Ee.from("product_stakeholders").select("product_id").eq("user_email",n.data.email.toLowerCase());u=(m==null?void 0:m.length)||0}return{userId:e,isSystemAdmin:t,sessionAdminCount:l,stakeholderSessionCount:u}}const Kl="PRODUCTS_TABLE_MISSING";function qc(e){return typeof e=="object"&&e!==null&&e.code===Kl}async function Tx(){const{data:e,error:t}=await Ee.from("products").select("*").order("name",{ascending:!0});if(t){if((t==null?void 0:t.code)==="PGRST205"){const r=new Error("Products table is missing");throw r.code=Kl,r}throw t}return e||[]}async function Ho(e){const{data:t,error:r}=await Ee.from("products").select("*").eq("tenant_id",e).order("name",{ascending:!0});if(r){if((r==null?void 0:r.code)==="PGRST205"){const n=new Error("Products table is missing");throw n.code=Kl,n}throw r}return t||[]}async function xE(e){const{data:t,error:r}=await Ee.from("product_product_owners").select("product_id").eq("user_id",e);if(r)throw r;if(!t||t.length===0)return[];if((t||[]).some(u=>u.applies_to_all_products===!0||u.product_id==null))return await Tx();const s=t.map(u=>u.product_id).filter(u=>!!u);if(s.length===0)return[];const{data:a,error:l}=await Ee.from("products").select("*").in("id",s).order("name",{ascending:!0});if(l){if((l==null?void 0:l.code)==="PGRST205"){const u=new Error("Products table is missing");throw u.code=Kl,u}throw l}return a||[]}async function wE(e,t){if(!e)throw new Error("Product ID is required");const r={};if(t.name!==void 0){const a=t.name.trim();if(!a)throw new Error("Product name cannot be empty");r.name=a}if(t.color_hex!==void 0&&(r.color_hex=t.color_hex),Object.keys(r).length===0)throw new Error("No updates provided");const{data:n,error:s}=await Ee.from("products").update(r).eq("id",e).select().single();if(s){if((s==null?void 0:s.code)==="PGRST205"){const a=new Error("Products table is missing");throw a.code=Kl,a}throw s}return n}async function vk(e,t,r){const n=t.trim();if(!n)throw new Error("Product name is required");const{data:s,error:a}=await Ee.from("products").insert([{name:n,tenant_id:e,color_hex:r||null}]).select().single();if(a){if((a==null?void 0:a.code)==="PGRST205"){const l=new Error("Products table is missing");throw l.code=Kl,l}if((a==null?void 0:a.code)==="23505"){const{data:l,error:u}=await Ee.from("products").select("*").eq("tenant_id",e).eq("name",n).maybeSingle();if(u)throw u;if(l)return l}throw a}return s}async function bE(e){const{error:t}=await Ee.from("products").delete().eq("id",e);if(t){if((t==null?void 0:t.code)==="PGRST205"){const r=new Error("Products table is missing");throw r.code=Kl,r}throw t}}const fu="*, product:products(name)";function Um(e){if(!e)throw new Error("Unexpected empty session row");const{product:t,...r}=e,n=r.product_name??(t==null?void 0:t.name)??null;return{...r,product_name:n}}function Ix(e){return!e||e.length===0?[]:e.map(t=>Um(t))}async function Wd(){try{const e=`${Ee.supabaseUrl}/rest/v1/voting_sessions?select=${encodeURIComponent(fu)}&order=created_at.desc`,t={apikey:Ee.supabaseKey,Authorization:`Bearer ${Ee.supabaseKey}`,"Content-Type":"application/json"},r=await fetch(e,{method:"GET",headers:t});if(!r.ok){const s=await r.text();throw console.error("[databaseService] getAllSessions API error:",r.status,s),new Error(`API error: ${r.status} - ${s}`)}const n=await r.json();return Ix(n)}catch(e){throw console.error("[databaseService] Exception in getAllSessions:",e),e}}async function Bm(e){const{data:t,error:r}=await Ee.from("voting_sessions").select(fu).eq("id",e).single();if(r){if(r.code==="PGRST116")return null;throw r}return t?Um(t):null}async function u5(e){const{data:t,error:r}=await Ee.from("voting_sessions").select(fu).eq("session_code",e).single();if(r){if(r.code==="PGRST116")return null;throw r}return t?Um(t):null}async function xk(e){try{const t=`${Ee.supabaseUrl}/rest/v1/voting_sessions?product_id=eq.${e}&select=${encodeURIComponent(fu)}&order=created_at.desc`,r={apikey:Ee.supabaseKey,Authorization:`Bearer ${Ee.supabaseKey}`,"Content-Type":"application/json"},n=await fetch(t,{method:"GET",headers:r});if(!n.ok){const a=await n.text();throw console.error("[databaseService] getSessionsByProduct API error:",n.status,a),new Error(`API error: ${n.status} - ${a}`)}const s=await n.json();return Ix(s)}catch(t){throw console.error("[databaseService] Exception in getSessionsByProduct:",t),t}}async function jE(e){try{if(await ro(e))return Wd();const{data:r,error:n}=await Ee.from("product_product_owners").select("product_id").eq("user_id",e);if(n)throw console.error("[databaseService] Error loading product product owners:",n),n;const s=(r==null?void 0:r.map(w=>w.product_id))||[],{data:a,error:l}=await Ee.from("users").select("email").eq("id",e).single();if(l)throw console.error("[databaseService] Error getting user email:",l),l;const u=a==null?void 0:a.email;if(!u)throw console.error("[databaseService] User email not found"),new Error("User email not found");const{data:d,error:m}=await Ee.from("product_stakeholders").select("product_id").eq("user_email",u.toLowerCase());if(m)throw console.error("[databaseService] Error loading product stakeholders:",m),m;const f=(d==null?void 0:d.map(w=>w.product_id))||[],p=[...new Set([...s,...f])];if(p.length===0)return[];const{data:v,error:x}=await Ee.from("voting_sessions").select(fu).in("product_id",p).order("created_at",{ascending:!1});if(x)throw console.error("[databaseService] Error loading voting sessions:",x),x;return Ix(v)}catch(t){throw console.error("[databaseService] Error in getSessionsForUser:",t),t}}async function d5(e){if(!e)return null;const{data:t,error:r}=await Ee.from("voting_sessions").select(fu).eq("product_id",e).eq("is_active",!0).maybeSingle();if(r){if(r.code==="PGRST116")return null;throw r}return t?Um(t):null}async function wk(e){const{data:t,error:r}=await Ee.from("voting_sessions").insert([e]).select().single();if(r)throw r;return t}async function kE(e,t){const{data:r,error:n}=await Ee.from("voting_sessions").update(t).eq("id",e).select().single();if(n)throw n;return r}async function f5(e){const{error:t}=await Ee.from("voting_sessions").delete().eq("id",e);if(t)throw t}async function h5(e,t){const{error:r}=await Ee.from("votes").delete().eq("session_id",e).eq("feature_id",t);if(r)throw r}async function Wm(e){const{data:t,error:r}=await Ee.from("product_owners").select(`
      *,
      users (*)
    `).eq("session_id",e);if(r)throw r;return(t||[]).map(n=>({id:n.id,session_id:n.session_id,user_id:n.user_id,created_at:n.created_at,user:n.users}))}async function m5(e){const t=`or(product_id.eq.${e},applies_to_all_products.eq.true)`,{data:r,error:n}=await Ee.from("product_product_owners").select(`
      *,
      users (*)
    `).or(t);if(n)throw n;return(r||[]).map(s=>({id:s.id,session_id:"",user_id:s.user_id,created_at:s.created_at,user:s.users}))}async function bk(e,t){const{data:r,error:n}=await Ee.from("voting_sessions").select("product_id").eq("id",e).single();if(n||!(r!=null&&r.product_id))throw new Error("Session not found or has no product_id");const{data:s,error:a}=await Ee.from("product_product_owners").insert([{product_id:r.product_id,user_id:t}]).select(`
      *,
      users (*)
    `).single();if(a)throw a;return{id:s.id,session_id:e,user_id:s.user_id,created_at:s.created_at,user:s.users}}async function Dx(e,t){try{if(await ro(t))return!0;const{data:n,error:s}=await Ee.from("voting_sessions").select("product_id").eq("id",e).single();if(s||!(n!=null&&n.product_id))return!1;const a=`or(product_id.eq.${n.product_id},applies_to_all_products.eq.true)`,{data:l,error:u}=await Ee.from("product_product_owners").select("id").or(a).eq("user_id",t).maybeSingle();return u?(console.error("Error checking admin status:",u),!1):!!l}catch(r){return console.error("Caught exception checking admin:",r),!1}}async function p0(e){const{data:t,error:r}=await Ee.from("voting_sessions").select("product_id").eq("id",e).single();if(r||!(t!=null&&t.product_id))return[];const{data:n,error:s}=await Ee.from("product_stakeholders").select("*").eq("product_id",t.product_id).order("user_name",{ascending:!0});if(s)throw s;return(n||[]).map(a=>({id:a.id,session_id:e,user_email:a.user_email,user_name:a.user_name,votes_allocated:a.votes_allocated,has_voted:a.has_voted,voted_at:a.voted_at,created_at:a.created_at}))}async function $x(e,t){try{const{data:r,error:n}=await Ee.from("voting_sessions").select("product_id").eq("id",e).single();if(n||!(r!=null&&r.product_id))return!1;const{data:s,error:a}=await Ee.from("product_stakeholders").select("id").eq("product_id",r.product_id).eq("user_email",t.toLowerCase()).maybeSingle();return a?(console.error("Error checking stakeholder status:",a),!1):!!s}catch(r){return console.error("Caught exception checking stakeholder:",r),!1}}async function xi(e){const t=`${Ee.supabaseUrl}/rest/v1/features?session_id=eq.${e}&select=*&order=created_at.desc`,r={apikey:Ee.supabaseKey,Authorization:`Bearer ${Ee.supabaseKey}`,"Content-Type":"application/json"},n=await fetch(t,{method:"GET",headers:r});if(!n.ok){const a=await n.text();throw new Error(`API error: ${n.status} - ${a}`)}return(await n.json()||[]).filter(a=>{const l=a.state===to,u=Array.isArray(a.tags)&&a.tags.includes(Ox);return!l&&!u}).map(a=>({...a,workItemType:a.work_item_type||a.workItemType||null,epic:a.epic||null,epicId:a.epic_id||a.epicId||null,areaPath:a.area_path||a.areaPath||null,azureDevOpsId:a.azure_devops_id||a.azureDevOpsId||null,azureDevOpsUrl:a.azure_devops_url||a.azureDevOpsUrl||null,attachmentUrls:a.attachment_urls||null,azure_devops_id:a.azure_devops_id||a.azureDevOpsId||null}))}async function ih(e){const{data:t,error:r}=await Ee.from("features").insert([{session_id:e.session_id,title:e.title,description:e.description,epic:e.epic,epic_id:e.epicId,state:e.state,area_path:e.areaPath,tags:e.tags,azure_devops_id:e.azure_devops_id,azure_devops_url:e.azure_devops_url,work_item_type:e.workItemType,attachment_urls:e.attachmentUrls}]).select().single();if(r)throw r;return{...t,workItemType:t.work_item_type||t.workItemType||null,epic:t.epic||null,epicId:t.epic_id||t.epicId||null,areaPath:t.area_path||t.areaPath||null,azureDevOpsId:t.azure_devops_id||t.azureDevOpsId||null,azureDevOpsUrl:t.azure_devops_url||t.azureDevOpsUrl||null,attachmentUrls:t.attachment_urls||null,azure_devops_id:t.azure_devops_id||t.azureDevOpsId||null}}async function Qu(e,t){const r={};t.title!==void 0&&(r.title=t.title),t.description!==void 0&&(r.description=t.description),t.epic!==void 0&&(r.epic=t.epic),t.epicId!==void 0&&(r.epic_id=t.epicId),t.state!==void 0&&(r.state=t.state),t.areaPath!==void 0&&(r.area_path=t.areaPath),t.tags!==void 0&&(r.tags=t.tags),t.azure_devops_id!==void 0&&(r.azure_devops_id=t.azure_devops_id),t.azure_devops_url!==void 0&&(r.azure_devops_url=t.azure_devops_url),t.workItemType!==void 0&&(r.work_item_type=t.workItemType),t.attachmentUrls!==void 0&&(r.attachment_urls=t.attachmentUrls);const{data:n,error:s}=await Ee.from("features").update(r).eq("id",e).select().single();if(s)throw s;return{...n,workItemType:n.work_item_type||n.workItemType||null,epic:n.epic||null,epicId:n.epic_id||n.epicId||null,areaPath:n.area_path||n.areaPath||null,azureDevOpsId:n.azure_devops_id||n.azureDevOpsId||null,azureDevOpsUrl:n.azure_devops_url||n.azureDevOpsUrl||null,attachmentUrls:n.attachment_urls||null,azure_devops_id:n.azure_devops_id||n.azureDevOpsId||null}}async function jk(e){const{error:t}=await Ee.from("features").delete().eq("id",e);if(t)throw t}function SE(e){return{id:e.id,sessionId:e.session_id,type:e.type,reason:e.reason,details:e.details??null,actorName:e.actor_name??"Admin",actorId:e.actor_id??null,createdAt:e.created_at}}async function p5(e){try{const{data:t,error:r}=await Ee.from("session_status_notes").select("*").eq("session_id",e).order("created_at",{ascending:!1});if(r)throw r;return(t||[]).map(SE)}catch(t){if((t==null?void 0:t.code)==="42P01")return console.warn("[databaseService] session_status_notes table not found; status notes will not persist.",t),[];throw t}}async function g5(e){try{const{data:t,error:r}=await Ee.from("session_status_notes").insert([{session_id:e.session_id,type:e.type,reason:e.reason,details:e.details??null,actor_id:e.actor_id??null,actor_name:e.actor_name}]).select("*").single();if(r)throw r;return SE(t)}catch(t){if((t==null?void 0:t.code)==="42P01")return console.warn("[databaseService] session_status_notes table not found; status notes will not persist.",t),{id:`temp-${Date.now()}`,sessionId:e.session_id,type:e.type,reason:e.reason,details:e.details??null,actorName:e.actor_name,actorId:e.actor_id??null,createdAt:new Date().toISOString()};throw t}}async function Uo(e){const t=`${Ee.supabaseUrl}/rest/v1/votes?session_id=eq.${e}&select=*`,r={apikey:Ee.supabaseKey,Authorization:`Bearer ${Ee.supabaseKey}`,"Content-Type":"application/json"},n=await fetch(t,{method:"GET",headers:r});if(!n.ok){const a=await n.text();throw new Error(`API error: ${n.status} - ${a}`)}return await n.json()||[]}async function y5(e){const{data:t}=await Ee.from("votes").select("*").eq("session_id",e.session_id).eq("feature_id",e.feature_id).eq("user_id",e.user_id).single();if(t){const{data:r,error:n}=await Ee.from("votes").update({vote_count:e.vote_count}).eq("session_id",e.session_id).eq("feature_id",e.feature_id).eq("user_id",e.user_id).select().single();if(n)throw n;return r}else{const{data:r,error:n}=await Ee.from("votes").insert([e]).select().single();if(n)throw n;return r}}async function v5(e,t){const{error:r}=await Ee.from("votes").delete().eq("session_id",e).eq("user_id",t);if(r)throw console.error("Error deleting user votes:",r),r}async function x5(e){const{error:t}=await Ee.from("votes").delete().eq("session_id",e);if(t)throw t}async function w5(e){try{const{data:t,error:r}=await Ee.from("azure_devops_config").select("*").eq("session_id",e).maybeSingle();if(r){if(r.code==="PGRST116")return null;throw r}return t}catch(t){return console.error("Error getting Azure DevOps config:",t),null}}async function Lo(e,t){try{const r={session_id:e,organization:t.organization,project:t.project,enabled:t.enabled,work_item_type:t.workItemType};t.accessToken!==void 0&&(r.access_token=t.accessToken),t.refreshToken!==void 0&&(r.refresh_token=t.refreshToken),t.tokenExpiresAt!==void 0&&(r.token_expires_at=t.tokenExpiresAt),t.tenantId!==void 0&&(r.tenant_id=t.tenantId),t.clientId!==void 0&&(r.client_id=t.clientId),t.query!==void 0&&(r.query=t.query),t.lastSyncTime!==void 0&&(r.last_sync_time=t.lastSyncTime),t.states!==void 0&&(r.states=t.states),t.areaPath!==void 0&&(r.area_path=t.areaPath),t.tags!==void 0&&(r.tags=t.tags);const{data:n,error:s}=await Ee.from("azure_devops_config").update(r).eq("session_id",e).select();if(!s&&n&&n.length>0)return n[0];const{data:a,error:l}=await Ee.from("azure_devops_config").upsert([r]).select().single();if(!l)return a;if((l==null?void 0:l.code)==="23505"){const{data:u,error:d}=await Ee.from("azure_devops_config").select("*").eq("session_id",e).maybeSingle();if(d)throw d;return u}throw l||s}catch(r){throw console.error("Error saving Azure DevOps config:",r),r}}async function b5(){return(await Wd())[0]||null}async function j5(e){const t=await b5();if(!t)throw new Error("No session found");return kE(t.id,e)}async function kk(e,t){return kE(e,t)}async function k5(e){const t={summary:e.description??null,whatWouldItDo:e.whatWouldItDo??null,howWouldItWork:e.howWouldItWork??null,requesterId:e.requester_id??null,requesterName:e.requester_name??null,requesterEmail:e.requester_email??null,attachmentUrls:e.attachment_urls??null},{data:r,error:n}=await Ee.from("features").insert([{session_id:e.session_id,title:e.title,description:JSON.stringify(t),epic:null,state:to,area_path:null,tags:[Ox],azure_devops_id:null,azure_devops_url:null}]).select("id, session_id, title, description, created_at").single();if(n)throw n;return zm(r)}async function S5(e,t){const{data:r,error:n}=await Ee.from("features").select("id, title, description, session_id, created_at").eq("id",e).eq("state",to).single();if(n)throw n;let s={};if(r!=null&&r.description)try{s=JSON.parse(r.description)}catch(d){console.warn("[databaseService] Unable to parse suggestion payload during update",d)}const a={summary:t.summary??s.summary??null,whatWouldItDo:t.whatWouldItDo??s.whatWouldItDo??null,howWouldItWork:t.howWouldItWork??s.howWouldItWork??null,requesterId:s.requesterId??null,requesterName:t.requester_name??s.requesterName??null,requesterEmail:t.requester_email??s.requesterEmail??null,attachmentUrls:t.attachment_urls!==void 0?t.attachment_urls:s.attachmentUrls??null},{data:l,error:u}=await Ee.from("features").update({title:t.title??r.title,description:JSON.stringify(a)}).eq("id",e).eq("state",to).select("id, session_id, title, description, created_at").single();if(u)throw u;return zm(l)}async function _5(e){const{error:t}=await Ee.from("features").delete().eq("id",e).eq("state",to);if(t)throw t}async function N5(e,t){const{data:r,error:n}=await Ee.from("features").update({session_id:t}).eq("id",e).eq("state",to).select("id, session_id, title, description, created_at").single();if(n)throw n;return zm(r)}async function C5(e){const{data:t,error:r}=await Ee.from("features").select("*").eq("id",e).eq("state",to).single();if(r)throw r;let n={};if(t!=null&&t.description)try{n=JSON.parse(t.description)}catch(d){console.warn("[databaseService] Unable to parse suggestion payload during promotion",d)}const s=[];n.summary&&s.push(n.summary),n.whatWouldItDo&&s.push(`What would it do?
${n.whatWouldItDo}`),n.howWouldItWork&&s.push(`How would it work?
${n.howWouldItWork}`);const a=Array.isArray(t.tags)?t.tags.filter(d=>d!==Ox):[],{data:l,error:u}=await Ee.from("features").update({description:s.join(`

`)||t.title,state:null,tags:a}).eq("id",e).eq("state",to).select("*").single();if(u)throw u;return l}async function Sk(e){const{data:t,error:r}=await Ee.from("features").select("id, session_id, title, description, created_at, state, tags").eq("session_id",e).eq("state",to).order("created_at",{ascending:!1});if(r)throw r;return(t||[]).map(zm)}async function _k(){const{data:e,error:t}=await Ee.from("system_admins").select(`
      *,
      users (*)
    `).order("created_at",{ascending:!1});if(t)throw t;return(e||[]).map(r=>({id:r.id,user_id:r.user_id,created_at:r.created_at,user:r.users}))}async function Nk(e){const{data:t,error:r}=await Ee.from("system_admins").insert([{user_id:e}]).select().single();if(r)throw r;return t}async function E5(e){const{error:t}=await Ee.from("system_admins").delete().eq("user_id",e);if(t)throw t}async function ro(e){try{const t=`${Ee.supabaseUrl}/rest/v1/system_admins?user_id=eq.${e}&select=id&limit=1`,r={apikey:Ee.supabaseKey,Authorization:`Bearer ${Ee.supabaseKey}`,"Content-Type":"application/json"},n=await fetch(t,{method:"GET",headers:r});if(!n.ok)return console.error("Error checking system admin status:",n.status),!1;const s=await n.json();return Array.isArray(s)&&s.length>0}catch(t){return console.error("Caught exception checking system admin:",t),!1}}const P5=["dave.hoffman@newmill.com"],A5="".split(",").map(e=>e.trim().toLowerCase()).filter(Boolean),O5=Array.from(new Set([...P5,...A5]));function zh(e){return e?O5.includes(e.toLowerCase()):!1}const _E=y.createContext(void 0);function T5({children:e}){const[t,r]=y.useState(null),[n,s]=y.useState([]),[a,l]=y.useState(null),[u,d]=y.useState(!1),[m,f]=y.useState(!1),[p,v]=y.useState(!1),[x,w]=y.useState(!0),[k,b]=y.useState(!1),[_,N]=y.useState(!1),C=y.useRef(!1),T=y.useCallback(async R=>{if(_)return;const K=R||a;if(!K){s([]),r(B=>{if(B)try{localStorage.removeItem("voting_system_current_session")}catch{}return null});return}N(!0);try{const B=zh(K.email);let ie;B?ie=await Wd():ie=await jE(K.id),s(ie),r(G=>{if(!G)return G;const ne=ie.find(W=>W.id===G.id);if(!ne){try{localStorage.removeItem("voting_system_current_session")}catch{}return null}if(ne.id!==G.id)return G;if(ne!==G){try{localStorage.setItem("voting_system_current_session",ne.id)}catch{}return ne}return G})}catch(B){console.error("Error loading sessions:",B),s([])}finally{N(!1)}},[a,_]);y.useEffect(()=>{if(C.current)return;C.current=!0;const R=setTimeout(()=>{w(!1)},5e3);(async()=>{var ie,G;try{if(window.location.search.includes("code=")||window.location.hash.includes("access_token")||window.location.search.includes("error=")){setTimeout(async()=>{var q,ve;try{const{data:{session:$}}=await Ee.auth.getSession();if($!=null&&$.user){const H=$.user.email;if(H){const ce=((q=$.user.user_metadata)==null?void 0:q.full_name)||((ve=$.user.user_metadata)==null?void 0:ve.name)||H.split("@")[0]||"User";try{const le=await Uc(H.toLowerCase(),ce);l(le),await T(le),setTimeout(()=>{if(window.location.hash){const U=window.location.pathname+window.location.search;window.history.replaceState(null,"",U)}},200)}catch(le){console.error("Error getting/creating user:",le)}}}}catch($){console.error("Error in OAuth callback handler:",$)}finally{w(!1),clearTimeout(R)}},1e3);return}const{data:{session:W}}=await Ee.auth.getSession();if(W!=null&&W.user){const q=W.user.email;if(q){const ve=((ie=W.user.user_metadata)==null?void 0:ie.full_name)||((G=W.user.user_metadata)==null?void 0:G.name)||q.split("@")[0]||"User";try{const $=await Uc(q.toLowerCase(),ve);l($),await T($)}catch($){console.error("Error getting/creating user:",$)}}}else{const q=localStorage.getItem("voting_system_user");if(q)try{const ve=JSON.parse(q);l(ve);try{await T(ve)}catch($){console.error("Error refreshing sessions:",$)}}catch(ve){console.error("Error loading stored user:",ve),localStorage.removeItem("voting_system_user")}}}catch(ne){console.error("Error checking Supabase auth:",ne);const W=localStorage.getItem("voting_system_user");if(W)try{const q=JSON.parse(W);l(q)}catch(q){console.error("Error loading stored user:",q),localStorage.removeItem("voting_system_user")}}finally{window.location.search.includes("code=")||window.location.hash.includes("access_token")||window.location.search.includes("error=")||(w(!1),clearTimeout(R))}})();const{data:{subscription:B}}=Ee.auth.onAuthStateChange(async(ie,G)=>{var ne,W,q,ve;if(ie==="SIGNED_IN"&&(G!=null&&G.user)){const $=G.user.email;if($){const H=((ne=G.user.user_metadata)==null?void 0:ne.full_name)||((W=G.user.user_metadata)==null?void 0:W.name)||$.split("@")[0]||"User",ce=await Uc($.toLowerCase(),H);l(ce),await T(ce),w(!1),setTimeout(()=>{if(window.location.hash){const le=window.location.pathname+window.location.search;window.history.replaceState(null,"",le)}},100)}}else if(ie==="SIGNED_OUT")l(null),s([]),r(null),localStorage.removeItem("voting_system_user"),localStorage.removeItem("voting_system_current_session"),w(!1);else if(ie==="TOKEN_REFRESHED"&&(G!=null&&G.user)){if(!a&&G.user.email){const $=G.user.email,H=((q=G.user.user_metadata)==null?void 0:q.full_name)||((ve=G.user.user_metadata)==null?void 0:ve.name)||$.split("@")[0]||"User",ce=await Uc($.toLowerCase(),H);l(ce),await T(ce)}w(!1)}});return()=>{B.unsubscribe(),clearTimeout(R)}},[]),y.useEffect(()=>{(async()=>{if(!t||!a){d(!1),f(!1),b(!1);return}if(!k)try{const[K,B]=await Promise.all([Dx(t.id,a.id),$x(t.id,a.email)]);d(K),f(B),b(!1)}catch(K){console.error("Error checking user roles:",K),d(!1),f(!1),b(!0)}})()},[t,a,k]),y.useEffect(()=>{(async()=>{if(!a){v(!1);return}if(zh(a.email)){v(!0);return}try{const B=await ro(a.id);v(B)}catch(B){console.error("Error checking system admin status:",B),v(!1)}})()},[a]);const P=y.useCallback(async R=>{l(R),b(!1),R?(localStorage.setItem("voting_system_user",JSON.stringify(R)),await T(R)):(localStorage.removeItem("voting_system_user"),s([]),r(null),v(!1))},[T]),A=y.useCallback(R=>{r(R),b(!1),R?localStorage.setItem("voting_system_current_session",R.id):localStorage.removeItem("voting_system_current_session")},[]);y.useEffect(()=>{(async()=>{if(!a||n.length===0)return;const K=localStorage.getItem("voting_system_current_session");if(K){const B=n.find(ie=>ie.id===K);B&&r(B)}})()},[a,n]),y.useEffect(()=>{const R=()=>{const ie=window.location.hash;if(ie==="#"||ie===""){const G=window.location.pathname+window.location.search;window.history.replaceState(null,"",G)}};R();const K=()=>{R()},B=setInterval(R,500);return window.addEventListener("hashchange",K),()=>{clearInterval(B),window.removeEventListener("hashchange",K)}},[]);const M={currentSession:t,sessions:n,currentUser:a,isAdmin:u,isStakeholder:m,isSystemAdmin:p,isLoading:x,setCurrentSession:A,refreshSessions:T,setCurrentUser:P};return x?i.jsx("div",{className:"min-h-screen w-full bg-gray-50 flex items-center justify-center",children:i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-[#2d4660] mx-auto mb-4"}),i.jsx("p",{className:"text-gray-600",children:"Loading..."})]})}):i.jsx(_E.Provider,{value:M,children:e})}function Gl(){const e=y.useContext(_E);if(e===void 0)throw new Error("useSession must be used within a SessionProvider");return e}function Rx(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function"){var s=0;for(n=Object.getOwnPropertySymbols(e);s<n.length;s++)t.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(e,n[s])&&(r[n[s]]=e[n[s]])}return r}function rl(e,t,r,n){return new(r||(r=Promise))((function(s,a){function l(m){try{d(n.next(m))}catch(f){a(f)}}function u(m){try{d(n.throw(m))}catch(f){a(f)}}function d(m){var f;m.done?s(m.value):(f=m.value,f instanceof r?f:new r((function(p){p(f)}))).then(l,u)}d((n=n.apply(e,[])).next())}))}var Ck,Ek,Pk,Uh,Ak,Ok,Tk,g0,Ik,Dk;function I5(e){return(e==null?void 0:e.errorCode)!==void 0}(function(e){e.Inline="inline",e.Desktop="desktop",e.Web="web"})(Ck||(Ck={})),(function(e){e.M365Content="m365content"})(Ek||(Ek={})),(function(e){e.DriveId="driveId",e.GroupId="groupId",e.SiteId="siteId",e.UserId="userId"})(Pk||(Pk={})),(function(e){e[e.NOT_SUPPORTED_ON_PLATFORM=100]="NOT_SUPPORTED_ON_PLATFORM",e[e.INTERNAL_ERROR=500]="INTERNAL_ERROR",e[e.NOT_SUPPORTED_IN_CURRENT_CONTEXT=501]="NOT_SUPPORTED_IN_CURRENT_CONTEXT",e[e.PERMISSION_DENIED=1e3]="PERMISSION_DENIED",e[e.NETWORK_ERROR=2e3]="NETWORK_ERROR",e[e.NO_HW_SUPPORT=3e3]="NO_HW_SUPPORT",e[e.INVALID_ARGUMENTS=4e3]="INVALID_ARGUMENTS",e[e.UNAUTHORIZED_USER_OPERATION=5e3]="UNAUTHORIZED_USER_OPERATION",e[e.INSUFFICIENT_RESOURCES=6e3]="INSUFFICIENT_RESOURCES",e[e.THROTTLE=7e3]="THROTTLE",e[e.USER_ABORT=8e3]="USER_ABORT",e[e.OPERATION_TIMED_OUT=8001]="OPERATION_TIMED_OUT",e[e.OLD_PLATFORM=9e3]="OLD_PLATFORM",e[e.FILE_NOT_FOUND=404]="FILE_NOT_FOUND",e[e.SIZE_EXCEEDED=1e4]="SIZE_EXCEEDED"})(Uh||(Uh={})),(function(e){e.GeoLocation="geolocation",e.Media="media"})(Ak||(Ak={})),(function(e){e.BCAIS="bcais",e.BCWAF="bcwaf",e.BCWBF="bcwbf"})(Ok||(Ok={})),(function(e){e.Faculty="faculty",e.Student="student",e.Other="other"})(Tk||(Tk={})),(function(e){e.Adult="adult",e.MinorNoParentalConsentRequired="minorNoParentalConsentRequired",e.MinorWithoutParentalConsent="minorWithoutParentalConsent",e.MinorWithParentalConsent="minorWithParentalConsent",e.NotAdult="notAdult",e.NonAdult="notAdult"})(g0||(g0={})),(function(e){e.HigherEducation="higherEducation",e.K12="k12",e.Other="other"})(Ik||(Ik={})),(function(e){e.TextPlain="text/plain",e.TextHtml="text/html",e.ImagePNG="image/png",e.ImageJPEG="image/jpeg"})(Dk||(Dk={}));var yr,y0,v0,$k,Rk,Mk,Fk,Lk;(function(e){e.desktop="desktop",e.web="web",e.android="android",e.ios="ios",e.ipados="ipados",e.macos="macos",e.visionOS="visionOS",e.rigel="rigel",e.surfaceHub="surfaceHub",e.teamsRoomsWindows="teamsRoomsWindows",e.teamsRoomsAndroid="teamsRoomsAndroid",e.teamsPhones="teamsPhones",e.teamsDisplays="teamsDisplays"})(yr||(yr={})),(function(e){e.office="Office",e.outlook="Outlook",e.outlookWin32="OutlookWin32",e.orange="Orange",e.places="Places",e.teams="Teams",e.teamsModern="TeamsModern"})(y0||(y0={})),(function(e){e.settings="settings",e.content="content",e.authentication="authentication",e.remove="remove",e.task="task",e.sidePanel="sidePanel",e.stage="stage",e.meetingStage="meetingStage"})(v0||(v0={})),(function(e){e.copilotSidePanel="copilotSidePanel",e.copilotMainPane="copilotMainPane",e.copilotFullScreen="copilotFullScreen"})($k||($k={})),(function(e){e[e.Standard=0]="Standard",e[e.Edu=1]="Edu",e[e.Class=2]="Class",e[e.Plc=3]="Plc",e[e.Staff=4]="Staff"})(Rk||(Rk={})),(function(e){e[e.Admin=0]="Admin",e[e.User=1]="User",e[e.Guest=2]="Guest"})(Mk||(Mk={})),(function(e){e.Large="large",e.Medium="medium",e.Small="small"})(Fk||(Fk={})),(function(e){e.Regular="Regular",e.Private="Private",e.Shared="Shared"})(Lk||(Lk={}));const D5={errorCode:Uh.NOT_SUPPORTED_ON_PLATFORM},$5={adaptiveCardSchemaVersion:{majorVersion:1,minorVersion:5}};var zk={randomUUID:typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};let oh;const R5=new Uint8Array(16);function M5(){if(!oh&&(oh=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!oh))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return oh(R5)}const ps=[];for(let e=0;e<256;++e)ps.push((e+256).toString(16).slice(1));function F5(e,t=0){return ps[e[t+0]]+ps[e[t+1]]+ps[e[t+2]]+ps[e[t+3]]+"-"+ps[e[t+4]]+ps[e[t+5]]+"-"+ps[e[t+6]]+ps[e[t+7]]+"-"+ps[e[t+8]]+ps[e[t+9]]+"-"+ps[e[t+10]]+ps[e[t+11]]+ps[e[t+12]]+ps[e[t+13]]+ps[e[t+14]]+ps[e[t+15]]}function L5(e,t,r){if(zk.randomUUID&&!e)return zk.randomUUID();const n=(e=e||{}).random||(e.rng||M5)();return n[6]=15&n[6]|64,n[8]=63&n[8]|128,F5(n)}var z5=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function U5(e){return typeof e=="string"&&z5.test(e)}function NE(e,t){if(typeof e!="string"||typeof t!="string")return NaN;const r=e.split("."),n=t.split(".");function s(a){return/^\d+$/.test(a)}if(!r.every(s)||!n.every(s))return NaN;for(;r.length<n.length;)r.push("0");for(;n.length<r.length;)n.push("0");for(let a=0;a<r.length;++a)if(Number(r[a])!=Number(n[a]))return Number(r[a])>Number(n[a])?1:-1;return 0}function B5(){return L5()}function CE(e){return Object.keys(e).forEach((t=>{e[t]!==null&&e[t]!==void 0&&typeof e[t]=="object"&&CE(e[t])})),Object.freeze(e)}function W5(e,t,r){return new Promise(((n,s)=>{const a=setTimeout(s,t,r);e().then((l=>{clearTimeout(a),n(l)})).catch((l=>{clearTimeout(a),s(l)}))}))}function V5(e){return e.protocol==="https:"}function q5(){if(Vm())throw new Error("window object undefined at SSR check");return window}function Vm(){return typeof window>"u"}function H5(e){return new RegExp(`${/<script[^>]*>|&lt;script[^&]*&gt;|%3Cscript[^%]*%3E/gi.source}|${/<\/script[^>]*>|&lt;\/script[^&]*&gt;|%3C\/script[^%]*%3E/gi.source}`,"gi").test(e)}function K5(e){if(!e)throw new Error("id must not be empty");if(U5(e)===!1)throw new Error("id must be a valid UUID")}const G5=!!performance&&"now"in performance;function Mx(){return G5?performance.now()+performance.timeOrigin:void 0}function Uk(e){var t,r;if(!(!((r=(t=e.hostVersionsInfo)===null||t===void 0?void 0:t.appEligibilityInformation)===null||r===void 0)&&r.ageGroup))return e;const n=e.hostVersionsInfo.appEligibilityInformation.ageGroup;return(n==null?void 0:n.toLowerCase())!=="nonadult"?e:Object.assign(Object.assign({},e),{hostVersionsInfo:Object.assign(Object.assign({},e.hostVersionsInfo),{appEligibilityInformation:Object.assign(Object.assign({},e.hostVersionsInfo.appEligibilityInformation),{ageGroup:g0.NotAdult})})})}let Vd=class{constructor(t=B5()){this.uuid=t,K5(t)}toString(){return this.uuid}serialize(){return this.toString()}};const EE=e=>{const{uuid:t}=e,r=Rx(e,["uuid"]),n=t==null?void 0:t.toString();return Object.assign(Object.assign({},r),{uuidAsString:n})},Y5=e=>{const{uuidAsString:t}=e,r=Rx(e,["uuidAsString"]);return Object.assign(Object.assign({},r),{uuid:t?new Vd(t):void 0})};var x0={exports:{}},Bk,Wk;function J5(){if(Wk)return Bk;Wk=1;var e=1e3,t=60*e,r=60*t,n=24*r,s=7*n,a=365.25*n;function l(u,d,m,f){var p=d>=1.5*m;return Math.round(u/m)+" "+f+(p?"s":"")}return Bk=function(u,d){d=d||{};var m=typeof u;if(m==="string"&&u.length>0)return(function(f){if(!((f=String(f)).length>100)){var p=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(f);if(p){var v=parseFloat(p[1]);switch((p[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return v*a;case"weeks":case"week":case"w":return v*s;case"days":case"day":case"d":return v*n;case"hours":case"hour":case"hrs":case"hr":case"h":return v*r;case"minutes":case"minute":case"mins":case"min":case"m":return v*t;case"seconds":case"second":case"secs":case"sec":case"s":return v*e;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return v;default:return}}}})(u);if(m==="number"&&isFinite(u))return d.long?(function(f){var p=Math.abs(f);return p>=n?l(f,p,n,"day"):p>=r?l(f,p,r,"hour"):p>=t?l(f,p,t,"minute"):p>=e?l(f,p,e,"second"):f+" ms"})(u):(function(f){var p=Math.abs(f);return p>=n?Math.round(f/n)+"d":p>=r?Math.round(f/r)+"h":p>=t?Math.round(f/t)+"m":p>=e?Math.round(f/e)+"s":f+"ms"})(u);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(u))}}var X5=function(e){function t(s){let a,l,u,d=null;function m(...f){if(!m.enabled)return;const p=m,v=Number(new Date),x=v-(a||v);p.diff=x,p.prev=a,p.curr=v,a=v,f[0]=t.coerce(f[0]),typeof f[0]!="string"&&f.unshift("%O");let w=0;f[0]=f[0].replace(/%([a-zA-Z%])/g,((k,b)=>{if(k==="%%")return"%";w++;const _=t.formatters[b];if(typeof _=="function"){const N=f[w];k=_.call(p,N),f.splice(w,1),w--}return k})),t.formatArgs.call(p,f),(p.log||t.log).apply(p,f)}return m.namespace=s,m.useColors=t.useColors(),m.color=t.selectColor(s),m.extend=r,m.destroy=t.destroy,Object.defineProperty(m,"enabled",{enumerable:!0,configurable:!1,get:()=>d!==null?d:(l!==t.namespaces&&(l=t.namespaces,u=t.enabled(s)),u),set:f=>{d=f}}),typeof t.init=="function"&&t.init(m),m}function r(s,a){const l=t(this.namespace+(a===void 0?":":a)+s);return l.log=this.log,l}function n(s){return s.toString().substring(2,s.toString().length-2).replace(/\.\*\?$/,"*")}return t.debug=t,t.default=t,t.coerce=function(s){return s instanceof Error?s.stack||s.message:s},t.disable=function(){const s=[...t.names.map(n),...t.skips.map(n).map((a=>"-"+a))].join(",");return t.enable(""),s},t.enable=function(s){let a;t.save(s),t.namespaces=s,t.names=[],t.skips=[];const l=(typeof s=="string"?s:"").split(/[\s,]+/),u=l.length;for(a=0;a<u;a++)l[a]&&((s=l[a].replace(/\*/g,".*?"))[0]==="-"?t.skips.push(new RegExp("^"+s.slice(1)+"$")):t.names.push(new RegExp("^"+s+"$")))},t.enabled=function(s){if(s[s.length-1]==="*")return!0;let a,l;for(a=0,l=t.skips.length;a<l;a++)if(t.skips[a].test(s))return!1;for(a=0,l=t.names.length;a<l;a++)if(t.names[a].test(s))return!0;return!1},t.humanize=J5(),t.destroy=function(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")},Object.keys(e).forEach((s=>{t[s]=e[s]})),t.names=[],t.skips=[],t.formatters={},t.selectColor=function(s){let a=0;for(let l=0;l<s.length;l++)a=(a<<5)-a+s.charCodeAt(l),a|=0;return t.colors[Math.abs(a)%t.colors.length]},t.enable(t.load()),t},Q5={};(function(e,t){t.formatArgs=function(n){if(n[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+n[0]+(this.useColors?"%c ":" ")+"+"+e.exports.humanize(this.diff),!this.useColors)return;const s="color: "+this.color;n.splice(1,0,s,"color: inherit");let a=0,l=0;n[0].replace(/%[a-zA-Z%]/g,(u=>{u!=="%%"&&(a++,u==="%c"&&(l=a))})),n.splice(l,0,s)},t.save=function(n){try{n?t.storage.setItem("debug",n):t.storage.removeItem("debug")}catch{}},t.load=function(){let n;try{n=t.storage.getItem("debug")}catch{}return!n&&typeof process<"u"&&"env"in process&&(n=Q5.DEBUG),n},t.useColors=function(){return typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs)?!0:typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/)?!1:typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)},t.storage=(function(){try{return localStorage}catch{}})(),t.destroy=(()=>{let n=!1;return()=>{n||(n=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),t.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],t.log=console.debug||console.log||(()=>{}),e.exports=X5(t);const{formatters:r}=e.exports;r.j=function(n){try{return JSON.stringify(n)}catch(s){return"[UnexpectedJSONParseError]: "+s.message}}})(x0,x0.exports);var Fx=x0.exports;const Z5=new Vd,eR=Fx.debug.formatArgs;Fx.debug.formatArgs=function(e){e[0]=`(${new Date().toISOString()}): ${e[0]} [${Z5.toString()}]`,eR.call(this,e)};const tR=Fx.debug("teamsJs");function Ii(e){return tR.extend(e)}function yn(e,t){return`${e}_${t}`}function PE(e){return/^v\d+_[\w.]+$/.test(e)}function Yo(e){return e.uuidAsString!==void 0?`${e.uuidAsString} (legacy id: ${e.id})`:e.uuid!==void 0?`${e.uuid.toString()} (legacy id: ${e.id})`:`legacy id: ${e.id} (no uuid)`}const rR=Ii("flushMessageQueue");function AE(e,t,r,n){if(e&&t&&r.length!==0)for(;r.length>0;){const s=r.shift();if(s){const a=EE(s);rR("Flushing message %s from %s message queue via postMessage.",Yo(a),n),e.postMessage(a,t)}}}var nR=["teams.microsoft.com","teams.microsoft.us","gov.teams.microsoft.us","dod.teams.microsoft.us","int.teams.microsoft.com","outlook.office.com","outlook-sdf.office.com","outlook.office365.com","outlook-sdf.office365.com","outlook.office365.us","outlook-dod.office365.us","webmail.apps.mil","outlook.live.com","outlook-sdf.live.com","teams.live.com","local.teams.live.com","local.teams.live.com:8080","local.teams.office.com","local.teams.office.com:8080","devspaces.skype.com","*.www.office.com","www.office.com","word.office.com","excel.office.com","powerpoint.office.com","www.officeppe.com","*.www.microsoft365.com","www.microsoft365.com","bing.com","edgeservices.bing.com","work.bing.com","www.bing.com","www.staging-bing-int.com","*.cloud.microsoft","*.m365.cloud.microsoft","*.outlook.cloud.microsoft","chatuxmanager.svc.cloud.microsoft","copilot.microsoft.com","windows.msn.com","fa000000125.resources.office.net","fa000000129.resources.office.net","fa000000124.resources.office.net","fa000000128.resources.office.net","fa000000136.resources.office.net","fa000000125.officeapps.live.com","fa000000129.officeapps.live.com","fa000000124.officeapps.live.com","fa000000128.officeapps.live.com"];const Vk="2.0.1",Ch=nR,qk=1500,sR=new URL("https://res.cdn.office.net/teams-js/validDomains/json/validDomains.json"),aR=/^https:\/\//,_d="The library has not yet been initialized",iR="The runtime has not yet been initialized",oR="The runtime version is not supported";let er=class{};er.initializeCalled=!1,er.initializeCompleted=!1,er.additionalValidOrigins=[],er.initializePromise=void 0,er.isFramelessWindow=!1,er.frameContext=void 0,er.hostClientType=void 0,er.printCapabilityEnabled=!1,er.teamsJsInstanceId=new Vd().toString();const OE=Ii("runtime"),qm=4;function TE(e){return e.apiVersion===qm}function lR(e){if(TE(e))return!0;throw e.apiVersion===-1?new Error(iR):new Error(oR)}let Ni={apiVersion:-1,supports:{}};const cR={supports:{appInstallDialog:{},appEntity:{},call:{},chat:{},conversations:{},dialog:{card:{bot:{}},url:{bot:{},parentCommunication:{}},update:{}},interactive:{},logs:{},meetingRoom:{},menus:{},monetization:{},notifications:{},pages:{config:{},backStack:{},fullTrust:{}},remoteCamera:{},teams:{fullTrust:{}},teamsCore:{},video:{sharedFrame:{}}}},IE=[yr.desktop,yr.web,yr.rigel,yr.surfaceHub,yr.teamsRoomsWindows,yr.teamsRoomsAndroid,yr.teamsPhones,yr.teamsDisplays],uR=[yr.android,yr.ios,yr.ipados,yr.visionOS],Hk=[...IE,...uR];function dR(e){let t=e;if(t.apiVersion<qm&&fR.forEach((r=>{t.apiVersion===r.versionToUpgradeFrom&&(t=r.upgradeToNextVersion(t))})),TE(t))return t;throw new Error("Received a runtime that could not be upgraded to the latest version")}const fR=[{versionToUpgradeFrom:1,upgradeToNextVersion:e=>{var t;return{apiVersion:2,hostVersionsInfo:void 0,isLegacyTeams:e.isLegacyTeams,supports:Object.assign(Object.assign({},e.supports),{dialog:e.supports.dialog?{card:void 0,url:e.supports.dialog,update:(t=e.supports.dialog)===null||t===void 0?void 0:t.update}:void 0})}}},{versionToUpgradeFrom:2,upgradeToNextVersion:e=>{const t=e.supports,r=Rx(t,["appNotification"]);return Object.assign(Object.assign({},e),{apiVersion:3,supports:r})}},{versionToUpgradeFrom:3,upgradeToNextVersion:e=>{var t,r,n,s,a;return{apiVersion:4,hostVersionsInfo:e.hostVersionsInfo,isNAAChannelRecommended:e.isNAAChannelRecommended,isLegacyTeams:e.isLegacyTeams,supports:Object.assign(Object.assign({},e.supports),{dialog:e.supports.dialog?{card:(t=e.supports.dialog)===null||t===void 0?void 0:t.card,url:{bot:(n=(r=e.supports.dialog)===null||r===void 0?void 0:r.url)===null||n===void 0?void 0:n.bot,parentCommunication:!((s=e.supports.dialog)===null||s===void 0)&&s.url?{}:void 0},update:(a=e.supports.dialog)===null||a===void 0?void 0:a.update}:void 0})}}}],hR={"1.0.0":[{capability:{pages:{appButton:{},tabs:{}},stageView:{}},hostClientTypes:IE}],"1.9.0":[{capability:{location:{}},hostClientTypes:Hk}],"2.0.0":[{capability:{people:{}},hostClientTypes:Hk},{capability:{sharing:{}},hostClientTypes:[yr.desktop,yr.web]}],"2.0.1":[{capability:{teams:{fullTrust:{joinedTeams:{}}}},hostClientTypes:[yr.android,yr.desktop,yr.ios,yr.teamsRoomsAndroid,yr.teamsPhones,yr.teamsDisplays,yr.web]},{capability:{webStorage:{}},hostClientTypes:[yr.desktop]}],"2.0.5":[{capability:{webStorage:{}},hostClientTypes:[yr.android,yr.ios]}],"2.0.8":[{capability:{sharing:{}},hostClientTypes:[yr.android,yr.ios]}],"2.1.1":[{capability:{nestedAppAuth:{}},hostClientTypes:[yr.android,yr.ios,yr.ipados,yr.visionOS]}],"2.1.2":[]},gy=OE.extend("generateBackCompatRuntimeConfig");function DE(e,t){const r=Object.assign({},e);for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&(typeof t[n]!="object"||Array.isArray(t[n])?n in e||(r[n]=t[n]):r[n]=DE(e[n]||{},t[n]));return r}function mR(e,t,r){gy("generating back compat runtime config for %s",e);let n=Object.assign({},t.supports);gy("Supported capabilities in config before updating based on highestSupportedVersion: %o",n),Object.keys(r).forEach((a=>{NE(e,a)>=0&&r[a].forEach((l=>{er.hostClientType!==void 0&&l.hostClientTypes.includes(er.hostClientType)&&(n=DE(n,l.capability))}))}));const s={apiVersion:qm,hostVersionsInfo:$5,isLegacyTeams:!0,supports:n};return gy("Runtime config after updating based on highestSupportedVersion: %o",s),s}const yy=OE.extend("applyRuntimeConfig");function vy(e){typeof e.apiVersion=="string"&&(yy("Trying to apply runtime with string apiVersion, processing as v1: %o",e),e=Object.assign(Object.assign({},e),{apiVersion:1})),yy("Fast-forwarding runtime %o",e);const t=dR(e);yy("Applying runtime %o",t),Ni=CE(t)}function pR(e){return e!=null&&e.serialize!==void 0&&typeof e.serialize=="function"}const Bh="2.46.0";let Wh=class Lc{static storeCallbackInformation(t,r){Lc.callbackInformation.set(t,r)}static clearMessages(){Lc.callbackInformation.clear()}static deleteMessageInformation(t){Lc.callbackInformation.delete(t)}static handleOneWayPerformanceMetrics(t,r,n){const s=t.monotonicTimestamp;s&&n?aS({actionName:t.func,messageDelay:n-s,requestStartedAt:s}):r("Unable to send performance metrics for event %s",t.func)}static handlePerformanceMetrics(t,r,n,s){const a=Lc.callbackInformation.get(t);a&&r.monotonicTimestamp&&s?(aS({actionName:a.name,messageDelay:s-r.monotonicTimestamp,requestStartedAt:a.calledAt}),Lc.deleteMessageInformation(t)):n("Unable to send performance metrics for callback %s with arguments %o",t.toString(),r.args)}};Wh.callbackInformation=new Map;const $E=Ii("nestedAppAuthUtils"),gR=$E.extend("tryPolyfillWithNestedAppAuthBridge"),yR="v2";function vR(e,t,r){var n;const s=gR;if(er.isFramelessWindow)return void s("Cannot polyfill nestedAppAuthBridge as current window is frameless");if(!t)return void s("Cannot polyfill nestedAppAuthBridge as current window does not exist");if(t.parent!==t.top)return void s("Default NAA bridge injection not supported in nested iframe. Use standalone NAA bridge instead.");const a=(()=>{try{return JSON.parse(e)}catch{return null}})();if(!a||!(!((n=a.supports)===null||n===void 0)&&n.nestedAppAuth))return void s("Cannot polyfill nestedAppAuthBridge as current hub does not support nested app auth");const l=t;if(l.nestedAppAuthBridge)return void s("nestedAppAuthBridge already exists on current window, skipping polyfill");const u=(function(d,m){const f=xR;if(!d)return f("nestedAppAuthBridge cannot be created as current window does not exist"),null;const{onMessage:p,sendPostMessage:v}=m,x=w=>k=>p(k,w);return{addEventListener:(w,k)=>{w==="message"?d.addEventListener(w,x(k)):f(`Event ${w} is not supported by nestedAppAuthBridge`)},postMessage:w=>{const k=(()=>{try{return JSON.parse(w)}catch{return null}})();if(!k||typeof k!="object"||k.messageType!=="NestedAppAuthRequest")return void f("Unrecognized data format received by app, message being ignored. Message: %o",w);const b=yn(yR,"nestedAppAuth.execute");v(w,b)},removeEventListener:(w,k)=>{d.removeEventListener(w,x(k))}}})(l,r);u&&(l.nestedAppAuthBridge=u)}const xR=$E.extend("createNestedAppAuthBridge");let Bo=[];const Ko=Ii("validateOrigin");let ud;function wR(){return rl(this,void 0,void 0,(function*(){ud||(yield ME())}))}function RE(){return Bo.length===0}function ME(e=!1){return rl(this,void 0,void 0,(function*(){if(!RE()&&!e)return Bo;if(ud)return ud;if(Vm())return Bo=Ch,Ch;{Ko("Initiating fetch call to acquire valid origins list from CDN");const t=new AbortController,r=setTimeout((()=>t.abort()),qk);return ud=fetch(sR,{signal:t.signal}).then((n=>{if(clearTimeout(r),!n.ok)throw new Error("Invalid Response from Fetch Call");return Ko("Fetch call completed and retrieved valid origins list from CDN"),n.json().then((s=>{if((function(a){let l=JSON.parse(a);try{l=JSON.parse(a)}catch{return!1}if(!l.validOrigins)return!1;for(const u of l.validOrigins)try{new URL("https://"+u)}catch{return Ko("isValidOriginsFromCDN call failed to validate origin: %s",u),!1}return!0})(JSON.stringify(s)))return Bo=s.validOrigins,Bo;throw new Error("Valid origins list retrieved from CDN is invalid")}))})).catch((n=>(n.name==="AbortError"?Ko(`validOrigins fetch call to CDN failed due to Timeout of ${qk} ms. Defaulting to fallback list`):Ko("validOrigins fetch call to CDN failed with error: %s. Defaulting to fallback list",n),Bo=Ch,Bo))),ud}}))}function Kk(e,t){if(e.substring(0,2)==="*."){const r=e.substring(1);if(t.length>r.length&&t.split(".").length===r.split(".").length&&t.substring(t.length-r.length)===r)return!0}else if(e===t)return!0;return!1}function bR(e,t){const r=RE()?Ch:Bo;return Gk(e,r)?Promise.resolve(!0):(Ko("Origin %s is not in the local valid origins list, fetching from CDN",e),ME(t).then((n=>Gk(e,n))))}function Gk(e,t){if(!V5(e))return Ko("Origin %s is invalid because it is not using https protocol. Protocol being used: %s",e,e.protocol),!1;const r=e.host;if(t.some((n=>Kk(n,r))))return!0;for(const n of er.additionalValidOrigins)if(Kk(n.substring(0,8)==="https://"?n.substring(8):n,r))return!0;return Ko(`Origin %s is invalid because it is not an origin approved by this library or included in the call to app.initialize.
Origins approved by this library: %o
Origins included in app.initialize: %o`,e,t,er.additionalValidOrigins),!1}wR();const Yl=Ii("communication");let Et=class{},wr=class{};function jR(e,t){if(wr.messageListener=r=>(function(n){return rl(this,void 0,void 0,(function*(){if(!n||!n.data||typeof n.data!="object")return void Yk("Unrecognized message format received by app, message being ignored. Message: %o",n);const s=n.source||n.originalEvent&&n.originalEvent.source,a=n.origin||n.originalEvent&&n.originalEvent.origin;return zE(s,a).then((l=>{l?((function(u,d){er.isFramelessWindow||Et.parentWindow&&!Et.parentWindow.closed&&u!==Et.parentWindow||(Et.parentWindow=u,Et.parentOrigin=d),Et.parentWindow&&Et.parentWindow.closed&&(Et.parentWindow=null,Et.parentOrigin=null),AE(Et.parentWindow,Et.parentOrigin,wr.parentMessageQueue,"parent")})(s,a),s!==Et.parentWindow?_M():Xk(n)):Yk("Message being ignored by app because it is either coming from the current window or a different window with an invalid origin, message: %o, source: %o, origin: %o",n,s,a)}))}))})(r),Et.currentWindow=Et.currentWindow||q5(),Et.parentWindow=Et.currentWindow.parent!==Et.currentWindow.self?Et.currentWindow.parent:Et.currentWindow.opener,Et.topWindow=Et.currentWindow.top,(Et.parentWindow||e)&&Et.currentWindow.addEventListener("message",wr.messageListener,!1),!Et.parentWindow){const r=Et.currentWindow;if(!r.nativeInterface)return Promise.reject(new Error("Initialization Failed. No Parent window found."));er.isFramelessWindow=!0,r.onNativeMessage=Xk}try{return Et.parentOrigin="*",Hm(t,"initialize",[Bh,qm,e]).then((([r,n,s,a])=>(vR(a,Et.currentWindow,{onMessage:TR,sendPostMessage:ER}),{context:r,clientType:n,runtimeConfig:s,clientSupportedSDKVersion:a})))}finally{Et.parentOrigin=null}}function kR(e,t,...r){return Hm(e,t,r).then((([n])=>n))}function SR(e,t,r,...n){return Hm(e,t,n).then((([s,a])=>{if(!s)throw new Error(a||r)}))}function Hm(e,t,r=void 0){if(!PE(e))throw Error(`apiVersionTag: ${e} passed in doesn't follow the pattern starting with 'v' followed by digits, then underscore with words, please check.`);return new Promise((n=>{const s=LE(e,t,r);var a;n((a=s.uuid,new Promise((l=>{wr.promiseCallbacks.set(a,l)}))))}))}function _R(e){return e.map((t=>pR(t)?t.serialize():t))}function NR(e,t,r,n,s){var a;return rl(this,void 0,void 0,(function*(){const l=_R(t),[u]=yield Hm(n,e,l);if(I5(u))throw new Error(`${u.errorCode}, message: ${(a=u.message)!==null&&a!==void 0?a:"None"}`);if(r.validate(u))return r.deserialize(u);throw new Error(`${Uh.INTERNAL_ERROR}, message: Invalid response from host - ${JSON.stringify(u)}`)}))}function ni(e,t,r,n){let s;if(r instanceof Function?n=r:r instanceof Array&&(s=r),!PE(e))throw Error(`apiVersionTag: ${e} passed in doesn't follow the pattern starting with 'v' followed by digits, then underscore with words, please check.`);const a=LE(e,t,s);n&&wr.callbacks.set(a.uuid,n)}wr.parentMessageQueue=[],wr.topMessageQueue=[],wr.nextMessageId=0,wr.callbacks=new Map,wr.promiseCallbacks=new Map,wr.portCallbacks=new Map,wr.legacyMessageIdsToUuidMap={};const CR=Yl.extend("sendNestedAuthRequestToTopWindow");function ER(e,t){const r=CR,n=Et.topWindow,s=(function(a,l){const u=wr.nextMessageId++,d=new Vd;return wr.legacyMessageIdsToUuidMap[u]=d,{id:u,uuid:d,func:"nestedAppAuth.execute",timestamp:Date.now(),monotonicTimestamp:Mx(),apiVersionTag:l,args:[],data:a}})(e,t);return r("Message %s information: %o",Yo(s),{actionName:s.func}),FE(n,s)}const PR=Yl.extend("sendRequestToTargetWindowHelper");function FE(e,t){const r=PR,n=(function(a){return a===Et.topWindow&&w0()?"top":a===Et.parentWindow?"parent":null})(e),s=EE(t);if(er.isFramelessWindow)Et.currentWindow&&Et.currentWindow.nativeInterface&&(r("Sending message %s to %s via framelessPostMessage interface",Yo(s),n),Et.currentWindow.nativeInterface.framelessPostMessage(JSON.stringify(s)));else{const a=(function(l){return l===Et.topWindow&&w0()?Et.topOrigin:l===Et.parentWindow?Et.parentOrigin:null})(e);e&&a?(r("Sending message %s to %s via postMessage",Yo(s),n),e.postMessage(s,a)):(r("Adding message %s to %s message queue",Yo(s),n),IR(e).push(t))}return t}const AR=Yl.extend("sendMessageToParentHelper");function LE(e,t,r,n,s){const a=AR,l=Et.parentWindow,u=(function(d,m,f,p,v){const x=wr.nextMessageId++,w=new Vd;wr.legacyMessageIdsToUuidMap[x]=w;const k=er.teamsJsInstanceId;return{id:x,uuid:w,func:m,timestamp:Date.now(),monotonicTimestamp:Mx(),args:f||[],apiVersionTag:d,isProxiedFromChild:p!=null,teamsJsInstanceId:k}})(e,t,r,n);return Wh.storeCallbackInformation(u.uuid,{name:t,calledAt:u.timestamp}),a("Message %s information: %o",Yo(u),{actionName:t,args:r}),FE(l,u)}const Yk=Yl.extend("processIncomingMessage"),OR=Yl.extend("processAuthBridgeMessage");function TR(e,t){var r,n;const s=OR;if(!e||!e.data||typeof e.data!="object")return void s("Unrecognized message format received by app, message being ignored. Message: %o",e);const{args:a}=e.data,[,l]=a??[],u=(()=>{try{return JSON.parse(l)}catch{return null}})();if(!u||typeof u!="object"||u.messageType!=="NestedAppAuthResponse")return void s("Unrecognized data format received by app, message being ignored. Message: %o",e);const d=e.source||((r=e==null?void 0:e.originalEvent)===null||r===void 0?void 0:r.source),m=e.origin||((n=e==null?void 0:e.originalEvent)===null||n===void 0?void 0:n.origin);d?zE(d,m)?(Et.topWindow&&!Et.topWindow.closed&&d!==Et.topWindow||(Et.topWindow=d,Et.topOrigin=m),Et.topWindow&&Et.topWindow.closed&&(Et.topWindow=null,Et.topOrigin=null),AE(Et.topWindow,Et.topOrigin,wr.topMessageQueue,"top"),t(l)):s("Message being ignored by app because it is either coming from the current window or a different window with an invalid origin"):s("Message being ignored by app because it is coming for a target that is null")}const xy=Yl.extend("shouldProcessIncomingMessage");function zE(e,t){return rl(this,void 0,void 0,(function*(){if(Et.currentWindow&&e===Et.currentWindow)return xy("Should not process message because it is coming from the current window"),!1;if(Et.currentWindow&&Et.currentWindow.location&&t&&t===Et.currentWindow.location.origin)return!0;{let r;try{r=new URL(t)}catch{return xy("Message has an invalid origin of %s",t),!1}const n=yield bR(r);return n||xy("Message has an invalid origin of %s",t),n}}))}const Jk=Yl.extend("handleIncomingMessageFromParent");function Eh(e,t){if(t){const r=[...e].find((([n,s])=>n.toString()===t.toString()));if(r)return r[0]}}function wy(e,t){const r=Eh(t,e.uuid);r&&t.delete(r),e.uuid?wr.legacyMessageIdsToUuidMap={}:delete wr.legacyMessageIdsToUuidMap[e.id]}function Xk(e){const t=Jk,r=Mx();if("id"in e.data&&typeof e.data.id=="number"){const n=e.data,s=Y5(n),a=(function(l){const u=Jk;if(!l.uuid)return wr.legacyMessageIdsToUuidMap[l.id];{const d=l.uuid,m=Eh(wr.callbacks,d);if(m)return m;const f=Eh(wr.promiseCallbacks,d);if(f)return f;const p=Eh(wr.portCallbacks,d);if(p)return p}u("Received message %s that failed to produce a callbackId",Yo(l))})(s);if(a){const l=wr.callbacks.get(a);t("Received a response from parent for message %s",a.toString()),Wh.handlePerformanceMetrics(a,s,t,r),l&&(t("Invoking the registered callback for message %s with arguments %o",a.toString(),s.args),l.apply(null,[...s.args,s.isPartialResponse]),(function(m){return m.data.isPartialResponse===!0})(e)||(t("Removing registered callback for message %s",a.toString()),wy(s,wr.callbacks)));const u=wr.promiseCallbacks.get(a);u&&(t("Invoking the registered promise callback for message %s with arguments %o",a.toString(),s.args),u(s.args),t("Removing registered promise callback for message %s",a.toString()),wy(s,wr.promiseCallbacks));const d=wr.portCallbacks.get(a);if(d){let m;t("Invoking the registered port callback for message %s with arguments %o",a.toString(),s.args),e.ports&&e.ports[0]instanceof MessagePort&&(m=e.ports[0]),d(m,s.args),t("Removing registered port callback for message %s",a.toString()),wy(s,wr.portCallbacks)}s.uuid&&(wr.legacyMessageIdsToUuidMap={})}}else if("func"in e.data&&typeof e.data.func=="string"){const n=e.data;Wh.handleOneWayPerformanceMetrics(n,t,r),t('Received a message from parent %s, action: "%s"',Yo(n),n.func),vM(n.func,n.args)}else t("Received an unknown message: %O",e)}function w0(){return Et.topWindow!==Et.parentWindow}function IR(e){return e===Et.topWindow&&w0()?wr.topMessageQueue:e===Et.parentWindow?wr.parentMessageQueue:[]}const UE=Ii("internal"),DR=UE.extend("ensureInitializeCalled"),$R=UE.extend("ensureInitialized");function BE(){if(!er.initializeCalled)throw DR(_d),new Error(_d)}function hu(e,...t){if(!er.initializeCompleted)throw $R("%s. initializeCalled: %s",_d,er.initializeCalled.toString()),new Error(_d);if(t&&t.length>0){let r=!1;for(let n=0;n<t.length;n++)if(t[n]===er.frameContext){r=!0;break}if(!r)throw new Error(`This call is only allowed in following contexts: ${JSON.stringify(t)}. Current context: "${er.frameContext}".`)}return lR(e)}function RR(e){let t=er.additionalValidOrigins.concat(e.filter((n=>typeof n=="string"&&aR.test(n))));const r={};t=t.filter((n=>!r[n]&&(r[n]=!0,!0))),er.additionalValidOrigins=t}function MR(e){if(!LR(e))throw new Error(`Potential app id (${e}) is invalid; its length ${e.length} is not within the length limits (${WE}-${VE}).`)}function FR(e){if(H5(e))throw new Error(`Potential app id (${e}) is invalid; it contains script tags.`);if(zR(e))throw new Error(`Potential app id (${e}) is invalid; it contains non-printable characters.`)}const WE=4,VE=256;function LR(e){return e.length<VE&&e.length>WE}function zR(e){return[...e].some((t=>{const r=t.charCodeAt(0);return r<32||r>126}))}let UR=class{constructor(t){this.idAsString=t,FR(t)}serialize(){return this.toString()}toString(){return this.idAsString}},BR=class extends UR{constructor(t){super(t),MR(t)}toJSON(){return{appIdAsString:this.toString()}}};function qE(e){return e==null}const Km="v2",by=Ii("app"),Qk={Success:"appInitialization.success"};var Zk,eS;function WR(e){return lM(yn(Km,"app.initialize"),e)}function VR(){return new Promise((e=>{BE(),e(kR(yn(Km,"app.getContext"),"getContext"))})).then((e=>(function(t){var r;return{actionInfo:t.actionInfo,app:{locale:t.locale,sessionId:t.appSessionId?t.appSessionId:"",theme:t.theme?t.theme:"default",iconPositionVertical:t.appIconPosition,osLocaleInfo:t.osLocaleInfo,messageId:t.messageId,parentMessageId:t.parentMessageId,userClickTime:t.userClickTime,userClickTimeV2:t.userClickTimeV2,userFileOpenPreference:t.userFileOpenPreference,host:{name:t.hostName?t.hostName:y0.teams,clientType:t.hostClientType?t.hostClientType:yr.web,sessionId:t.sessionId?t.sessionId:"",ringId:t.ringId},appLaunchId:t.appLaunchId,appId:t.appId?new BR(t.appId):void 0,manifestVersion:t.manifestVersion},page:{id:t.entityId,frameContext:t.frameContext?t.frameContext:er.frameContext,renderingSurface:t.renderingSurface?t.renderingSurface:void 0,subPageId:t.subEntityId,isFullScreen:t.isFullScreen,isMultiWindow:t.isMultiWindow,isBackgroundLoad:t.isBackgroundLoad,sourceOrigin:t.sourceOrigin},user:{id:(r=t.userObjectId)!==null&&r!==void 0?r:"",displayName:t.userDisplayName,isCallingAllowed:t.isCallingAllowed,isPSTNCallingAllowed:t.isPSTNCallingAllowed,licenseType:t.userLicenseType,loginHint:t.loginHint,userPrincipalName:t.userPrincipalName,tenant:t.tid?{id:t.tid,teamsSku:t.tenantSKU}:void 0},channel:t.channelId?{id:t.channelId,displayName:t.channelName,relativeUrl:t.channelRelativeUrl,membershipType:t.channelType,defaultOneNoteSectionId:t.defaultOneNoteSectionId,ownerGroupId:t.hostTeamGroupId,ownerTenantId:t.hostTeamTenantId}:void 0,chat:t.chatId?{id:t.chatId}:void 0,meeting:t.meetingId?{id:t.meetingId}:void 0,sharepoint:t.sharepoint,team:t.teamId?{internalId:t.teamId,displayName:t.teamName,type:t.teamType,groupId:t.groupId,templateId:t.teamTemplateId,isArchived:t.isTeamArchived,userRole:t.userTeamRole}:void 0,sharePointSite:t.teamSiteUrl||t.teamSiteDomain||t.teamSitePath||t.mySitePath||t.mySiteDomain?{teamSiteUrl:t.teamSiteUrl,teamSiteDomain:t.teamSiteDomain,teamSitePath:t.teamSitePath,teamSiteId:t.teamSiteId,mySitePath:t.mySitePath,mySiteDomain:t.mySiteDomain}:void 0,dialogParameters:t.dialogParameters||{}}})(e)))}function qR(){return cM(yn(Km,"app.notifySuccess"))}function HR(e){uM(yn(Km,"app.registerOnThemeChangeHandler"),e)}(function(e){e.AuthFailed="AuthFailed",e.Timeout="Timeout",e.Other="Other"})(Zk||(Zk={})),(function(e){e.PermissionError="PermissionError",e.NotFound="NotFound",e.Throttling="Throttling",e.Offline="Offline",e.Other="Other"})(eS||(eS={})),by("teamsjs instance is version %s, starting at %s UTC (%s local)",Bh,new Date().toISOString(),new Date().toLocaleString()),(function(){if(Vm())return;const e=document.getElementsByTagName("script"),t=e&&e[e.length-1]&&e[e.length-1].src,r="Today, teamsjs can only be used from a single script or you may see undefined behavior. This log line is used to help detect cases where teamsjs is loaded multiple times -- it is always written. The presence of the log itself does not indicate a multi-load situation, but multiples of these log lines will. If you would like to use teamjs from more than one script at the same time, please open an issue at https://github.com/OfficeDev/microsoft-teams-library-js/issues";t&&t.length!==0?by("teamsjs is being used from %s. %s",t,r):by("teamsjs is being used from a script tag embedded directly in your html. %s",r)})();const KR="v2",GR=[];function YR(e){er.frameContext&&(er.frameContext===v0.task?GR.push(e):xM("messageForChild"))}function JR(){Tl(yn(KR,"dialog.registerMessageForChildHandler"),"messageForChild",YR,!1)}const Hc="v2";var tS,rS;(function(e){e[e.ifRoom=0]="ifRoom",e[e.overflowOnly=1]="overflowOnly"})(tS||(tS={}));function XR(){Tl(yn(Hc,"menus.registerNavBarMenuItemPressHandler"),"navBarMenuItemPress",ZR,!1),Tl(yn(Hc,"menus.registerActionMenuItemPressHandler"),"actionMenuItemPress",eM,!1),Tl(yn(Hc,"menus.registerSetModuleViewHandler"),"setModuleView",QR,!1)}function QR(e){hu(Ni),ni(yn(Hc,"menus.handleViewConfigItemPress"),"viewConfigItemPress",[e])}function ZR(e){hu(Ni),ni(yn(Hc,"menus.handleNavBarMenuItemPress"),"handleNavBarMenuItemPress",[e])}function eM(e){hu(Ni),ni(yn(Hc,"menus.handleActionMenuItemPress"),"handleActionMenuItemPress",[e])}(function(e){e.dropDown="dropDown",e.popOver="popOver"})(rS||(rS={}));class tM{}let rM=class extends tM{validate(t){return!0}deserialize(t){return t}};function nM(){Tl(yn(Ml,"pages.config.registerSettingsSaveHandler"),"settings.save",sM,!1),Tl(yn(Ml,"pages.config.registerSettingsRemoveHandler"),"settings.remove",iM,!1)}function sM(e){new aM(e).notifySuccess()}let aM=class{constructor(t){this.notified=!1,this.result=t||{}}notifySuccess(){this.ensureNotNotified(),ni(yn(Ml,"pages.saveEvent.notifySuccess"),"settings.save.success"),this.notified=!0}notifyFailure(t){this.ensureNotNotified(),ni(yn(Ml,"pages.saveEvent.notifyFailure"),"settings.save.failure",[t]),this.notified=!0}ensureNotNotified(){if(this.notified)throw new Error("The SaveEvent may only notify success or failure once.")}};function iM(){new oM().notifySuccess()}let oM=class{constructor(){this.notified=!1}notifySuccess(){this.ensureNotNotified(),ni(yn(Ml,"pages.removeEvent.notifySuccess"),"settings.remove.success"),this.notified=!0}notifyFailure(t){this.ensureNotNotified(),ni(yn(Ml,"pages.removeEvent.notifyFailure"),"settings.remove.failure",[t]),this.notified=!0}ensureNotNotified(){if(this.notified)throw new Error("The removeEventType may only notify success or failure once.")}};const HE=Ii("app");function lM(e,t){return Vm()?(HE.extend("initialize")("window object undefined at initialization"),Promise.resolve()):W5((()=>(function(r,n){return new Promise((s=>{er.initializeCalled||(er.initializeCalled=!0,yM(),er.initializePromise=jR(n,r).then((({context:a,clientType:l,runtimeConfig:u,clientSupportedSDKVersion:d=Vk})=>{er.frameContext=a,er.hostClientType=l,er.clientSupportedSDKVersion=d;try{Zu("Parsing %s",u);let m=JSON.parse(u);if(Zu("Checking if %o is a valid runtime object",m??"null"),!m||!m.apiVersion)throw new Error("Received runtime config is invalid");m=Uk(m),u&&vy(m)}catch(m){if(!(m instanceof SyntaxError))throw m;try{Zu("Attempting to parse %s as an SDK version",u),isNaN(NE(u,Vk))||(er.clientSupportedSDKVersion=u);let f=JSON.parse(d);if(Zu("givenRuntimeConfig parsed to %o",f??"null"),!f)throw new Error("givenRuntimeConfig string was successfully parsed. However, it parsed to value of null");f=Uk(f),vy(f)}catch(f){if(!(f instanceof SyntaxError))throw f;vy(mR(er.clientSupportedSDKVersion,cR,hR))}}er.initializeCompleted=!0})),XR(),nM(),JR()),Array.isArray(n)&&RR(n),er.initializePromise!==void 0?s(er.initializePromise):Zu("GlobalVars.initializePromise is unexpectedly undefined")}))})(e,t)),6e4,new Error("SDK initialization timed out."))}function cM(e){return rl(this,void 0,void 0,(function*(){if(er.initializeCompleted)return nS(e);if(!er.initializePromise)throw new Error(_d);return er.initializePromise.then((()=>nS(e)))}))}function nS(e){return rl(this,void 0,void 0,(function*(){return hu(Ni)&&(!((t=Ni.supports.app)===null||t===void 0)&&t.notifySuccessResponse)?NR(Qk.Success,[Bh],new rM,e).then((()=>({hasFinishedSuccessfully:!0}))):(ni(e,Qk.Success,[Bh]),{hasFinishedSuccessfully:"unknown"});var t}))}const Zu=HE.extend("initializeHelper");function uM(e,t){!qE(t)&&BE(),wM(e,t)}function dM(){return hM(yn(Ml,"pages.backStack.navigateBack"))}function fM(){return!(!hu(Ni)||!Ni.supports.pages)&&!!Ni.supports.pages.backStack}const Ml="v2";function hM(e){return new Promise((t=>{if(hu(Ni),!fM())throw D5;t(SR(e,"navigateBack","Back navigation is not supported in the current client or context."))}))}function mM(){Tl(yn("v2","pages.backStack.registerBackButtonPressHandler"),"backButtonPress",pM,!1)}function pM(){dM()}const gM=Ii("handlers");let Gr=class wi{static initializeHandlers(){wi.handlers.themeChange=bM,wi.handlers.load=jM,wi.handlers.beforeUnload=kM,mM()}static uninitializeHandlers(){wi.handlers={},wi.themeChangeHandler=null,wi.loadHandler=null,wi.beforeUnloadHandler=null,wi.beforeSuspendOrTerminateHandler=null,wi.resumeHandler=null}};function yM(){Gr.initializeHandlers()}Gr.handlers={},Gr.themeChangeHandler=null,Gr.loadHandler=null,Gr.beforeUnloadHandler=null,Gr.beforeSuspendOrTerminateHandler=null,Gr.resumeHandler=null,Gr.hostToAppPerformanceMetricsHandler=null;const sS=gM.extend("callHandler");function vM(e,t){const r=Gr.handlers[e];return r?(sS("Invoking the registered handler for message %s with arguments %o",e,t),[!0,r.apply(this,t)]):(sS("Handler for action message %s not found.",e),[!1,void 0])}function Tl(e,t,r,n=!0,s=[]){r?(Gr.handlers[t]=r,n&&ni(e,"registerHandler",[t,...s])):delete Gr.handlers[t]}function xM(e){delete Gr.handlers[e]}function wM(e,t){Gr.themeChangeHandler=t,!qE(t)&&ni(e,"registerHandler",["themeChange"])}function bM(e){Gr.themeChangeHandler&&Gr.themeChangeHandler(e)}function aS(e){Gr.hostToAppPerformanceMetricsHandler&&Gr.hostToAppPerformanceMetricsHandler(e)}function jM(e){const t={entityId:(r=e).entityId,contentUrl:new URL(r.contentUrl)};var r;Gr.resumeHandler?(Gr.resumeHandler(t),iS()):Gr.loadHandler&&(Gr.loadHandler(e),iS())}function kM(){return rl(this,void 0,void 0,(function*(){const e=()=>{ni(yn("v2","handleBeforeUnload"),"readyToUnload",[])};Gr.beforeSuspendOrTerminateHandler?(yield Gr.beforeSuspendOrTerminateHandler(),e()):Gr.beforeUnloadHandler&&Gr.beforeUnloadHandler(e)||e()}))}const SM=Ii("childProxyingCommunication");function iS(){return!1}function _M(e,t){return!1}SM.extend("handleIncomingMessageFromChild");const NM=y.createContext({inTeams:!1,teamsContext:null,isInitialized:!1,teamsTheme:null}),CM=({children:e})=>{const[t,r]=y.useState(!1),[n,s]=y.useState(null),[a,l]=y.useState(!1),[u,d]=y.useState(null);return y.useEffect(()=>{(async()=>{try{if(new URLSearchParams(window.location.search).get("inTeams")==="true"||window.parent!==window){console.log(" Initializing Teams SDK..."),await WR();const v=await VR();console.log(" Teams context:",v),r(!0),s(v),d(v.app.theme),HR(x=>{d(x)}),qR()}}catch(f){console.error(" Teams initialization error:",f),r(!1)}finally{l(!0)}})()},[]),i.jsx(NM.Provider,{value:{inTeams:t,teamsContext:n,isInitialized:a,teamsTheme:u},children:e})},EM="service_idsx5cg",PM="template_4owif48",AM="OXfL2jaTJuDR5IThS";async function Jc(e){var t;try{const r=await fetch("https://api.emailjs.com/api/v1.0/email/send",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({service_id:EM,template_id:PM,user_id:AM,template_params:{email:e.to,to_email:e.to,to_name:e.to.split("@")[0],subject:e.subject,message_html:e.html||e.text||"",message_text:e.text||((t=e.html)==null?void 0:t.replace(/<[^>]*>/g,""))||""}})});if(!r.ok){const s=await r.text();console.error("EmailJS API error:",r.status,s);let a=`EmailJS API error: ${r.status}`;try{const l=JSON.parse(s);l.text?a=l.text:l.message?a=l.message:l.error&&(a=l.error)}catch{a=s||a}throw new Error(a)}let n;try{const s=await r.text();if(s==="OK"||s.trim()==="OK"){console.log("Email sent successfully via EmailJS");return}n=JSON.parse(s),console.log("Email sent successfully via EmailJS:",n)}catch(s){if(r.ok){console.log("Email sent successfully via EmailJS (non-JSON response)");return}throw s}return}catch(r){throw console.error("sendInvitationEmail error:",r),r.message?r:new Error(`Failed to send email: ${r.toString()}`)}}/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OM=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),TM=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(t,r,n)=>n?n.toUpperCase():r.toLowerCase()),oS=e=>{const t=TM(e);return t.charAt(0).toUpperCase()+t.slice(1)},KE=(...e)=>e.filter((t,r,n)=>!!t&&t.trim()!==""&&n.indexOf(t)===r).join(" ").trim(),IM=e=>{for(const t in e)if(t.startsWith("aria-")||t==="role"||t==="title")return!0};/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var DM={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $M=y.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:r=2,absoluteStrokeWidth:n,className:s="",children:a,iconNode:l,...u},d)=>y.createElement("svg",{ref:d,...DM,width:t,height:t,stroke:e,strokeWidth:n?Number(r)*24/Number(t):r,className:KE("lucide",s),...!a&&!IM(u)&&{"aria-hidden":"true"},...u},[...l.map(([m,f])=>y.createElement(m,f)),...Array.isArray(a)?a:[a]]));/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wt=(e,t)=>{const r=y.forwardRef(({className:n,...s},a)=>y.createElement($M,{ref:a,iconNode:t,className:KE(`lucide-${OM(oS(e))}`,`lucide-${e}`,n),...s}));return r.displayName=oS(e),r};/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RM=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],lS=Wt("arrow-left",RM);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MM=[["path",{d:"m16 3 4 4-4 4",key:"1x1c3m"}],["path",{d:"M20 7H4",key:"zbl0bi"}],["path",{d:"m8 21-4-4 4-4",key:"h9nckh"}],["path",{d:"M4 17h16",key:"g4d7ey"}]],GE=Wt("arrow-right-left",MM);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FM=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],LM=Wt("arrow-right",FM);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zM=[["path",{d:"M3.85 8.62a4 4 0 0 1 4.78-4.77 4 4 0 0 1 6.74 0 4 4 0 0 1 4.78 4.78 4 4 0 0 1 0 6.74 4 4 0 0 1-4.77 4.78 4 4 0 0 1-6.75 0 4 4 0 0 1-4.78-4.77 4 4 0 0 1 0-6.76Z",key:"3c2336"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],b0=Wt("badge-check",zM);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UM=[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]],YE=Wt("book-open",UM);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BM=[["path",{d:"M12 20v-9",key:"1qisl0"}],["path",{d:"M14 7a4 4 0 0 1 4 4v3a6 6 0 0 1-12 0v-3a4 4 0 0 1 4-4z",key:"uouzyp"}],["path",{d:"M14.12 3.88 16 2",key:"qol33r"}],["path",{d:"M21 21a4 4 0 0 0-3.81-4",key:"1b0z45"}],["path",{d:"M21 5a4 4 0 0 1-3.55 3.97",key:"5cxbf6"}],["path",{d:"M22 13h-4",key:"1jl80f"}],["path",{d:"M3 21a4 4 0 0 1 3.81-4",key:"1fjd4g"}],["path",{d:"M3 5a4 4 0 0 0 3.55 3.97",key:"1d7oge"}],["path",{d:"M6 13H2",key:"82j7cp"}],["path",{d:"m8 2 1.88 1.88",key:"fmnt4t"}],["path",{d:"M9 7.13V6a3 3 0 1 1 6 0v1.13",key:"1vgav8"}]],JE=Wt("bug",BM);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WM=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],Si=Wt("calendar",WM);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VM=[["path",{d:"M5 21v-6",key:"1hz6c0"}],["path",{d:"M12 21V3",key:"1lcnhd"}],["path",{d:"M19 21V9",key:"unv183"}]],Ph=Wt("chart-no-axes-column",VM);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qM=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],Da=Wt("chevron-down",qM);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HM=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],KM=Wt("chevron-left",HM);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GM=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],nn=Wt("circle-alert",GM);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YM=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],un=Wt("circle-check-big",YM);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JM=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],Lx=Wt("clock",JM);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XM=[["path",{d:"M11.562 3.266a.5.5 0 0 1 .876 0L15.39 8.87a1 1 0 0 0 1.516.294L21.183 5.5a.5.5 0 0 1 .798.519l-2.834 10.246a1 1 0 0 1-.956.734H5.81a1 1 0 0 1-.957-.734L2.02 6.02a.5.5 0 0 1 .798-.519l4.276 3.664a1 1 0 0 0 1.516-.294z",key:"1vdc57"}],["path",{d:"M5 21h14",key:"11awu3"}]],fn=Wt("crown",XM);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QM=[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]],ZM=Wt("database",QM);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eF=[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]],XE=Wt("ellipsis-vertical",eF);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tF=[["path",{d:"M14 2v6a2 2 0 0 0 .245.96l5.51 10.08A2 2 0 0 1 18 22H6a2 2 0 0 1-1.755-2.96l5.51-10.08A2 2 0 0 0 10 8V2",key:"18mbvz"}],["path",{d:"M6.453 15h11.094",key:"3shlmq"}],["path",{d:"M8.5 2h7",key:"csnxdl"}]],QE=Wt("flask-conical",tF);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rF=[["path",{d:"M12.531 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14v6a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341l.427-.473",key:"ol2ft2"}],["path",{d:"m16.5 3.5 5 5",key:"15e6fa"}],["path",{d:"m21.5 3.5-5 5",key:"m0lwru"}]],nF=Wt("funnel-x",rF);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sF=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]],aF=Wt("funnel",sF);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iF=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],lh=Wt("info",iF);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oF=[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]],Gm=Wt("lightbulb",oF);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lF=[["path",{d:"M3 5h.01",key:"18ugdj"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 19h.01",key:"noohij"}],["path",{d:"M8 5h13",key:"1pao27"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 19h13",key:"m83p4d"}]],ki=Wt("list",lF);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cF=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],uF=Wt("lock",cF);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dF=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],Ma=Wt("log-out",dF);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fF=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],Ym=Wt("mail",fF);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hF=[["path",{d:"M5 12h14",key:"1ays0h"}]],Nd=Wt("minus",hF);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mF=[["path",{d:"m16 6-8.414 8.586a2 2 0 0 0 2.829 2.829l8.414-8.586a4 4 0 1 0-5.657-5.657l-8.379 8.551a6 6 0 1 0 8.485 8.485l8.379-8.551",key:"1miecu"}]],ys=Wt("paperclip",mF);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pF=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]],Vh=Wt("pencil",pF);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gF=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],Cn=Wt("plus",gF);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yF=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],Xo=Wt("refresh-cw",yF);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vF=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],cS=Wt("search",vF);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xF=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],ma=Wt("settings",xF);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wF=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],uS=Wt("shield-check",wF);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bF=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],Hr=Wt("shield",bF);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jF=[["path",{d:"m18 14 4 4-4 4",key:"10pe0f"}],["path",{d:"m18 2 4 4-4 4",key:"pucp1d"}],["path",{d:"M2 18h1.973a4 4 0 0 0 3.3-1.7l5.454-8.6a4 4 0 0 1 3.3-1.7H22",key:"1ailkh"}],["path",{d:"M2 6h1.972a4 4 0 0 1 3.6 2.2",key:"km57vx"}],["path",{d:"M22 18h-6.041a4 4 0 0 1-3.3-1.8l-.359-.45",key:"os18l9"}]],kF=Wt("shuffle",jF);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SF=[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]],Oc=Wt("sparkles",SF);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _F=[["path",{d:"M21 10.656V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h12.344",key:"2acyp4"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],Fl=Wt("square-check-big",_F);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NF=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],j0=Wt("square-pen",NF);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CF=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]],Cd=Wt("square",CF);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EF=[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]],Tc=Wt("star",EF);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PF=[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]],dS=Wt("tag",PF);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AF=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],Qo=Wt("trash-2",AF);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OF=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],TF=Wt("triangle-alert",OF);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IF=[["path",{d:"M10 14.66v1.626a2 2 0 0 1-.976 1.696A5 5 0 0 0 7 21.978",key:"1n3hpd"}],["path",{d:"M14 14.66v1.626a2 2 0 0 0 .976 1.696A5 5 0 0 1 17 21.978",key:"rfe1zi"}],["path",{d:"M18 9h1.5a1 1 0 0 0 0-5H18",key:"7xy6bh"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M6 9a6 6 0 0 0 12 0V3a1 1 0 0 0-1-1H7a1 1 0 0 0-1 1z",key:"1mhfuq"}],["path",{d:"M6 9H4.5a1 1 0 0 1 0-5H6",key:"tex48p"}]],Jm=Wt("trophy",IF);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DF=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]],fS=Wt("user-plus",DF);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $F=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],vs=Wt("user",$F);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RF=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],es=Wt("users",RF);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MF=[["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}],["path",{d:"M5 7c0-1.1.9-2 2-2h10a2 2 0 0 1 2 2v12H5V7Z",key:"1ezoue"}],["path",{d:"M22 19H2",key:"nuriw5"}]],gn=Wt("vote",MF);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FF=[["rect",{width:"8",height:"8",x:"3",y:"3",rx:"2",key:"by2w9f"}],["path",{d:"M7 11v4a2 2 0 0 0 2 2h4",key:"xkn7yn"}],["rect",{width:"8",height:"8",x:"13",y:"13",rx:"2",key:"1cgmvn"}]],LF=Wt("workflow",FF);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zF=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],ts=Wt("x",zF),Di="/feature-voting-app/assets/New-Millennium-color-logo-C0dd35-E.svg",UF="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='UTF-8'?%3e%3csvg%20id='Layer_1'%20xmlns='http://www.w3.org/2000/svg'%20version='1.1'%20viewBox='0%200%2019%2019'%3e%3c!--%20Generator:%20Adobe%20Illustrator%2029.8.3,%20SVG%20Export%20Plug-In%20.%20SVG%20Version:%202.1.1%20Build%203)%20--%3e%3cdefs%3e%3cstyle%3e%20.st0%20{%20fill:%20%23f25022;%20}%20.st1%20{%20fill:%20%23ffb900;%20}%20.st2%20{%20fill:%20%237fba00;%20}%20.st3%20{%20fill:%20%2300a4ef;%20}%20%3c/style%3e%3c/defs%3e%3crect%20class='st0'%20width='9'%20height='9'/%3e%3crect%20class='st3'%20y='10'%20width='9'%20height='9'/%3e%3crect%20class='st2'%20x='10'%20width='9'%20height='9'/%3e%3crect%20class='st1'%20x='10'%20y='10'%20width='9'%20height='9'/%3e%3c/svg%3e";var qd=e=>e.type==="checkbox",Pl=e=>e instanceof Date,Zs=e=>e==null;const ZE=e=>typeof e=="object";var An=e=>!Zs(e)&&!Array.isArray(e)&&ZE(e)&&!Pl(e),eP=e=>An(e)&&e.target?qd(e.target)?e.target.checked:e.target.value:e,BF=e=>e.substring(0,e.search(/\.\d+(\.|$)/))||e,tP=(e,t)=>e.has(BF(t)),WF=e=>{const t=e.constructor&&e.constructor.prototype;return An(t)&&t.hasOwnProperty("isPrototypeOf")},zx=typeof window<"u"&&typeof window.HTMLElement<"u"&&typeof document<"u";function Mn(e){let t;const r=Array.isArray(e),n=typeof FileList<"u"?e instanceof FileList:!1;if(e instanceof Date)t=new Date(e);else if(!(zx&&(e instanceof Blob||n))&&(r||An(e)))if(t=r?[]:Object.create(Object.getPrototypeOf(e)),!r&&!WF(e))t=e;else for(const s in e)e.hasOwnProperty(s)&&(t[s]=Mn(e[s]));else return e;return t}var Xm=e=>/^\w*$/.test(e),dn=e=>e===void 0,Ux=e=>Array.isArray(e)?e.filter(Boolean):[],Bx=e=>Ux(e.replace(/["|']|\]/g,"").split(/\.|\[/)),at=(e,t,r)=>{if(!t||!An(e))return r;const n=(Xm(t)?[t]:Bx(t)).reduce((s,a)=>Zs(s)?s:s[a],e);return dn(n)||n===e?dn(e[t])?r:e[t]:n},ua=e=>typeof e=="boolean",Lr=(e,t,r)=>{let n=-1;const s=Xm(t)?[t]:Bx(t),a=s.length,l=a-1;for(;++n<a;){const u=s[n];let d=r;if(n!==l){const m=e[u];d=An(m)||Array.isArray(m)?m:isNaN(+s[n+1])?{}:[]}if(u==="__proto__"||u==="constructor"||u==="prototype")return;e[u]=d,e=e[u]}};const qh={BLUR:"blur",FOCUS_OUT:"focusout",CHANGE:"change"},Qa={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},qi={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"},rP=It.createContext(null);rP.displayName="HookFormContext";const Wx=()=>It.useContext(rP);var nP=(e,t,r,n=!0)=>{const s={defaultValues:t._defaultValues};for(const a in e)Object.defineProperty(s,a,{get:()=>{const l=a;return t._proxyFormState[l]!==Qa.all&&(t._proxyFormState[l]=!n||Qa.all),r&&(r[l]=!0),e[l]}});return s};const Vx=typeof window<"u"?It.useLayoutEffect:It.useEffect;function VF(e){const t=Wx(),{control:r=t.control,disabled:n,name:s,exact:a}=e||{},[l,u]=It.useState(r._formState),d=It.useRef({isDirty:!1,isLoading:!1,dirtyFields:!1,touchedFields:!1,validatingFields:!1,isValidating:!1,isValid:!1,errors:!1});return Vx(()=>r._subscribe({name:s,formState:d.current,exact:a,callback:m=>{!n&&u({...r._formState,...m})}}),[s,n,a]),It.useEffect(()=>{d.current.isValid&&r._setValid(!0)},[r]),It.useMemo(()=>nP(l,r,d.current,!1),[l,r])}var fa=e=>typeof e=="string",k0=(e,t,r,n,s)=>fa(e)?(n&&t.watch.add(e),at(r,e,s)):Array.isArray(e)?e.map(a=>(n&&t.watch.add(a),at(r,a))):(n&&(t.watchAll=!0),r),S0=e=>Zs(e)||!ZE(e);function Za(e,t,r=new WeakSet){if(S0(e)||S0(t))return e===t;if(Pl(e)&&Pl(t))return e.getTime()===t.getTime();const n=Object.keys(e),s=Object.keys(t);if(n.length!==s.length)return!1;if(r.has(e)||r.has(t))return!0;r.add(e),r.add(t);for(const a of n){const l=e[a];if(!s.includes(a))return!1;if(a!=="ref"){const u=t[a];if(Pl(l)&&Pl(u)||An(l)&&An(u)||Array.isArray(l)&&Array.isArray(u)?!Za(l,u,r):l!==u)return!1}}return!0}function qF(e){const t=Wx(),{control:r=t.control,name:n,defaultValue:s,disabled:a,exact:l,compute:u}=e||{},d=It.useRef(s),m=It.useRef(u),f=It.useRef(void 0),p=It.useRef(r),v=It.useRef(n);m.current=u;const[x,w]=It.useState(()=>{const T=r._getWatch(n,d.current);return m.current?m.current(T):T}),k=It.useCallback(T=>{const P=k0(n,r._names,T||r._formValues,!1,d.current);return m.current?m.current(P):P},[r._formValues,r._names,n]),b=It.useCallback(T=>{if(!a){const P=k0(n,r._names,T||r._formValues,!1,d.current);if(m.current){const A=m.current(P);Za(A,f.current)||(w(A),f.current=A)}else w(P)}},[r._formValues,r._names,a,n]);Vx(()=>((p.current!==r||!Za(v.current,n))&&(p.current=r,v.current=n,b()),r._subscribe({name:n,formState:{values:!0},exact:l,callback:T=>{b(T.values)}})),[r,l,n,b]),It.useEffect(()=>r._removeUnmounted());const _=p.current!==r,N=v.current,C=It.useMemo(()=>{if(a)return null;const T=!_&&!Za(N,n);return _||T?k():null},[a,_,n,N,k]);return C!==null?C:x}function HF(e){const t=Wx(),{name:r,disabled:n,control:s=t.control,shouldUnregister:a,defaultValue:l}=e,u=tP(s._names.array,r),d=It.useMemo(()=>at(s._formValues,r,at(s._defaultValues,r,l)),[s,r,l]),m=qF({control:s,name:r,defaultValue:d,exact:!0}),f=VF({control:s,name:r,exact:!0}),p=It.useRef(e),v=It.useRef(void 0),x=It.useRef(s.register(r,{...e.rules,value:m,...ua(e.disabled)?{disabled:e.disabled}:{}}));p.current=e;const w=It.useMemo(()=>Object.defineProperties({},{invalid:{enumerable:!0,get:()=>!!at(f.errors,r)},isDirty:{enumerable:!0,get:()=>!!at(f.dirtyFields,r)},isTouched:{enumerable:!0,get:()=>!!at(f.touchedFields,r)},isValidating:{enumerable:!0,get:()=>!!at(f.validatingFields,r)},error:{enumerable:!0,get:()=>at(f.errors,r)}}),[f,r]),k=It.useCallback(C=>x.current.onChange({target:{value:eP(C),name:r},type:qh.CHANGE}),[r]),b=It.useCallback(()=>x.current.onBlur({target:{value:at(s._formValues,r),name:r},type:qh.BLUR}),[r,s._formValues]),_=It.useCallback(C=>{const T=at(s._fields,r);T&&C&&(T._f.ref={focus:()=>C.focus&&C.focus(),select:()=>C.select&&C.select(),setCustomValidity:P=>C.setCustomValidity(P),reportValidity:()=>C.reportValidity()})},[s._fields,r]),N=It.useMemo(()=>({name:r,value:m,...ua(n)||f.disabled?{disabled:f.disabled||n}:{},onChange:k,onBlur:b,ref:_}),[r,n,f.disabled,k,b,_,m]);return It.useEffect(()=>{const C=s._options.shouldUnregister||a,T=v.current;T&&T!==r&&!u&&s.unregister(T),s.register(r,{...p.current.rules,...ua(p.current.disabled)?{disabled:p.current.disabled}:{}});const P=(A,M)=>{const R=at(s._fields,A);R&&R._f&&(R._f.mount=M)};if(P(r,!0),C){const A=Mn(at(s._options.defaultValues,r,p.current.defaultValue));Lr(s._defaultValues,r,A),dn(at(s._formValues,r))&&Lr(s._formValues,r,A)}return!u&&s.register(r),v.current=r,()=>{(u?C&&!s._state.action:C)?s.unregister(r):P(r,!1)}},[r,s,u,a]),It.useEffect(()=>{s._setDisabledField({disabled:n,name:r})},[n,r,s]),It.useMemo(()=>({field:N,formState:f,fieldState:w}),[N,f,w])}const dd=e=>e.render(HF(e));var KF=(e,t,r,n,s)=>t?{...r[e],types:{...r[e]&&r[e].types?r[e].types:{},[n]:s||!0}}:{},xd=e=>Array.isArray(e)?e:[e],hS=()=>{let e=[];return{get observers(){return e},next:s=>{for(const a of e)a.next&&a.next(s)},subscribe:s=>(e.push(s),{unsubscribe:()=>{e=e.filter(a=>a!==s)}}),unsubscribe:()=>{e=[]}}};function sP(e,t){const r={};for(const n in e)if(e.hasOwnProperty(n)){const s=e[n],a=t[n];if(s&&An(s)&&a){const l=sP(s,a);An(l)&&(r[n]=l)}else e[n]&&(r[n]=a)}return r}var Fs=e=>An(e)&&!Object.keys(e).length,qx=e=>e.type==="file",ei=e=>typeof e=="function",Hh=e=>{if(!zx)return!1;const t=e?e.ownerDocument:0;return e instanceof(t&&t.defaultView?t.defaultView.HTMLElement:HTMLElement)},aP=e=>e.type==="select-multiple",Hx=e=>e.type==="radio",GF=e=>Hx(e)||qd(e),jy=e=>Hh(e)&&e.isConnected;function YF(e,t){const r=t.slice(0,-1).length;let n=0;for(;n<r;)e=dn(e)?n++:e[t[n++]];return e}function JF(e){for(const t in e)if(e.hasOwnProperty(t)&&!dn(e[t]))return!1;return!0}function _n(e,t){const r=Array.isArray(t)?t:Xm(t)?[t]:Bx(t),n=r.length===1?e:YF(e,r),s=r.length-1,a=r[s];return n&&delete n[a],s!==0&&(An(n)&&Fs(n)||Array.isArray(n)&&JF(n))&&_n(e,r.slice(0,-1)),e}var XF=e=>{for(const t in e)if(ei(e[t]))return!0;return!1};function iP(e){return Array.isArray(e)||An(e)&&!XF(e)}function _0(e,t={}){for(const r in e)iP(e[r])?(t[r]=Array.isArray(e[r])?[]:{},_0(e[r],t[r])):dn(e[r])||(t[r]=!0);return t}function zc(e,t,r){r||(r=_0(t));for(const n in e)iP(e[n])?dn(t)||S0(r[n])?r[n]=_0(e[n],Array.isArray(e[n])?[]:{}):zc(e[n],Zs(t)?{}:t[n],r[n]):r[n]=!Za(e[n],t[n]);return r}const mS={value:!1,isValid:!1},pS={value:!0,isValid:!0};var oP=e=>{if(Array.isArray(e)){if(e.length>1){const t=e.filter(r=>r&&r.checked&&!r.disabled).map(r=>r.value);return{value:t,isValid:!!t.length}}return e[0].checked&&!e[0].disabled?e[0].attributes&&!dn(e[0].attributes.value)?dn(e[0].value)||e[0].value===""?pS:{value:e[0].value,isValid:!0}:pS:mS}return mS},lP=(e,{valueAsNumber:t,valueAsDate:r,setValueAs:n})=>dn(e)?e:t?e===""?NaN:e&&+e:r&&fa(e)?new Date(e):n?n(e):e;const gS={isValid:!1,value:null};var cP=e=>Array.isArray(e)?e.reduce((t,r)=>r&&r.checked&&!r.disabled?{isValid:!0,value:r.value}:t,gS):gS;function yS(e){const t=e.ref;return qx(t)?t.files:Hx(t)?cP(e.refs).value:aP(t)?[...t.selectedOptions].map(({value:r})=>r):qd(t)?oP(e.refs).value:lP(dn(t.value)?e.ref.value:t.value,e)}var QF=(e,t,r,n)=>{const s={};for(const a of e){const l=at(t,a);l&&Lr(s,a,l._f)}return{criteriaMode:r,names:[...e],fields:s,shouldUseNativeValidation:n}},Kh=e=>e instanceof RegExp,ed=e=>dn(e)?e:Kh(e)?e.source:An(e)?Kh(e.value)?e.value.source:e.value:e,vS=e=>({isOnSubmit:!e||e===Qa.onSubmit,isOnBlur:e===Qa.onBlur,isOnChange:e===Qa.onChange,isOnAll:e===Qa.all,isOnTouch:e===Qa.onTouched});const xS="AsyncFunction";var ZF=e=>!!e&&!!e.validate&&!!(ei(e.validate)&&e.validate.constructor.name===xS||An(e.validate)&&Object.values(e.validate).find(t=>t.constructor.name===xS)),eL=e=>e.mount&&(e.required||e.min||e.max||e.maxLength||e.minLength||e.pattern||e.validate),wS=(e,t,r)=>!r&&(t.watchAll||t.watch.has(e)||[...t.watch].some(n=>e.startsWith(n)&&/^\.\w+/.test(e.slice(n.length))));const wd=(e,t,r,n)=>{for(const s of r||Object.keys(e)){const a=at(e,s);if(a){const{_f:l,...u}=a;if(l){if(l.refs&&l.refs[0]&&t(l.refs[0],s)&&!n)return!0;if(l.ref&&t(l.ref,l.name)&&!n)return!0;if(wd(u,t))break}else if(An(u)&&wd(u,t))break}}};function bS(e,t,r){const n=at(e,r);if(n||Xm(r))return{error:n,name:r};const s=r.split(".");for(;s.length;){const a=s.join("."),l=at(t,a),u=at(e,a);if(l&&!Array.isArray(l)&&r!==a)return{name:r};if(u&&u.type)return{name:a,error:u};if(u&&u.root&&u.root.type)return{name:`${a}.root`,error:u.root};s.pop()}return{name:r}}var tL=(e,t,r,n)=>{r(e);const{name:s,...a}=e;return Fs(a)||Object.keys(a).length>=Object.keys(t).length||Object.keys(a).find(l=>t[l]===(!n||Qa.all))},rL=(e,t,r)=>!e||!t||e===t||xd(e).some(n=>n&&(r?n===t:n.startsWith(t)||t.startsWith(n))),nL=(e,t,r,n,s)=>s.isOnAll?!1:!r&&s.isOnTouch?!(t||e):(r?n.isOnBlur:s.isOnBlur)?!e:(r?n.isOnChange:s.isOnChange)?e:!0,sL=(e,t)=>!Ux(at(e,t)).length&&_n(e,t),aL=(e,t,r)=>{const n=xd(at(e,r));return Lr(n,"root",t[r]),Lr(e,r,n),e};function jS(e,t,r="validate"){if(fa(e)||Array.isArray(e)&&e.every(fa)||ua(e)&&!e)return{type:r,message:fa(e)?e:"",ref:t}}var Ic=e=>An(e)&&!Kh(e)?e:{value:e,message:""},kS=async(e,t,r,n,s,a)=>{const{ref:l,refs:u,required:d,maxLength:m,minLength:f,min:p,max:v,pattern:x,validate:w,name:k,valueAsNumber:b,mount:_}=e._f,N=at(r,k);if(!_||t.has(k))return{};const C=u?u[0]:l,T=G=>{s&&C.reportValidity&&(C.setCustomValidity(ua(G)?"":G||""),C.reportValidity())},P={},A=Hx(l),M=qd(l),R=A||M,K=(b||qx(l))&&dn(l.value)&&dn(N)||Hh(l)&&l.value===""||N===""||Array.isArray(N)&&!N.length,B=KF.bind(null,k,n,P),ie=(G,ne,W,q=qi.maxLength,ve=qi.minLength)=>{const $=G?ne:W;P[k]={type:G?q:ve,message:$,ref:l,...B(G?q:ve,$)}};if(a?!Array.isArray(N)||!N.length:d&&(!R&&(K||Zs(N))||ua(N)&&!N||M&&!oP(u).isValid||A&&!cP(u).isValid)){const{value:G,message:ne}=fa(d)?{value:!!d,message:d}:Ic(d);if(G&&(P[k]={type:qi.required,message:ne,ref:C,...B(qi.required,ne)},!n))return T(ne),P}if(!K&&(!Zs(p)||!Zs(v))){let G,ne;const W=Ic(v),q=Ic(p);if(!Zs(N)&&!isNaN(N)){const ve=l.valueAsNumber||N&&+N;Zs(W.value)||(G=ve>W.value),Zs(q.value)||(ne=ve<q.value)}else{const ve=l.valueAsDate||new Date(N),$=le=>new Date(new Date().toDateString()+" "+le),H=l.type=="time",ce=l.type=="week";fa(W.value)&&N&&(G=H?$(N)>$(W.value):ce?N>W.value:ve>new Date(W.value)),fa(q.value)&&N&&(ne=H?$(N)<$(q.value):ce?N<q.value:ve<new Date(q.value))}if((G||ne)&&(ie(!!G,W.message,q.message,qi.max,qi.min),!n))return T(P[k].message),P}if((m||f)&&!K&&(fa(N)||a&&Array.isArray(N))){const G=Ic(m),ne=Ic(f),W=!Zs(G.value)&&N.length>+G.value,q=!Zs(ne.value)&&N.length<+ne.value;if((W||q)&&(ie(W,G.message,ne.message),!n))return T(P[k].message),P}if(x&&!K&&fa(N)){const{value:G,message:ne}=Ic(x);if(Kh(G)&&!N.match(G)&&(P[k]={type:qi.pattern,message:ne,ref:l,...B(qi.pattern,ne)},!n))return T(ne),P}if(w){if(ei(w)){const G=await w(N,r),ne=jS(G,C);if(ne&&(P[k]={...ne,...B(qi.validate,ne.message)},!n))return T(ne.message),P}else if(An(w)){let G={};for(const ne in w){if(!Fs(G)&&!n)break;const W=jS(await w[ne](N,r),C,ne);W&&(G={...W,...B(ne,W.message)},T(W.message),n&&(P[k]=G))}if(!Fs(G)&&(P[k]={ref:C,...G},!n))return P}}return T(!0),P};const iL={mode:Qa.onSubmit,reValidateMode:Qa.onChange,shouldFocusError:!0};function oL(e={}){let t={...iL,...e},r={submitCount:0,isDirty:!1,isReady:!1,isLoading:ei(t.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},validatingFields:{},errors:t.errors||{},disabled:t.disabled||!1},n={},s=An(t.defaultValues)||An(t.values)?Mn(t.defaultValues||t.values)||{}:{},a=t.shouldUnregister?{}:Mn(s),l={action:!1,mount:!1,watch:!1},u={mount:new Set,disabled:new Set,unMount:new Set,array:new Set,watch:new Set},d,m=0;const f={isDirty:!1,dirtyFields:!1,validatingFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1};let p={...f};const v={array:hS(),state:hS()},x=t.criteriaMode===Qa.all,w=F=>L=>{clearTimeout(m),m=setTimeout(F,L)},k=async F=>{if(!t.disabled&&(f.isValid||p.isValid||F)){const L=t.resolver?Fs((await M()).errors):await K(n,!0);L!==r.isValid&&v.state.next({isValid:L})}},b=(F,L)=>{!t.disabled&&(f.isValidating||f.validatingFields||p.isValidating||p.validatingFields)&&((F||Array.from(u.mount)).forEach(V=>{V&&(L?Lr(r.validatingFields,V,L):_n(r.validatingFields,V))}),v.state.next({validatingFields:r.validatingFields,isValidating:!Fs(r.validatingFields)}))},_=(F,L=[],V,Se,we=!0,Ae=!0)=>{if(Se&&V&&!t.disabled){if(l.action=!0,Ae&&Array.isArray(at(n,F))){const Ke=V(at(n,F),Se.argA,Se.argB);we&&Lr(n,F,Ke)}if(Ae&&Array.isArray(at(r.errors,F))){const Ke=V(at(r.errors,F),Se.argA,Se.argB);we&&Lr(r.errors,F,Ke),sL(r.errors,F)}if((f.touchedFields||p.touchedFields)&&Ae&&Array.isArray(at(r.touchedFields,F))){const Ke=V(at(r.touchedFields,F),Se.argA,Se.argB);we&&Lr(r.touchedFields,F,Ke)}(f.dirtyFields||p.dirtyFields)&&(r.dirtyFields=zc(s,a)),v.state.next({name:F,isDirty:ie(F,L),dirtyFields:r.dirtyFields,errors:r.errors,isValid:r.isValid})}else Lr(a,F,L)},N=(F,L)=>{Lr(r.errors,F,L),v.state.next({errors:r.errors})},C=F=>{r.errors=F,v.state.next({errors:r.errors,isValid:!1})},T=(F,L,V,Se)=>{const we=at(n,F);if(we){const Ae=at(a,F,dn(V)?at(s,F):V);dn(Ae)||Se&&Se.defaultChecked||L?Lr(a,F,L?Ae:yS(we._f)):W(F,Ae),l.mount&&k()}},P=(F,L,V,Se,we)=>{let Ae=!1,Ke=!1;const wt={name:F};if(!t.disabled){if(!V||Se){(f.isDirty||p.isDirty)&&(Ke=r.isDirty,r.isDirty=wt.isDirty=ie(),Ae=Ke!==wt.isDirty);const vt=Za(at(s,F),L);Ke=!!at(r.dirtyFields,F),vt?_n(r.dirtyFields,F):Lr(r.dirtyFields,F,!0),wt.dirtyFields=r.dirtyFields,Ae=Ae||(f.dirtyFields||p.dirtyFields)&&Ke!==!vt}if(V){const vt=at(r.touchedFields,F);vt||(Lr(r.touchedFields,F,V),wt.touchedFields=r.touchedFields,Ae=Ae||(f.touchedFields||p.touchedFields)&&vt!==V)}Ae&&we&&v.state.next(wt)}return Ae?wt:{}},A=(F,L,V,Se)=>{const we=at(r.errors,F),Ae=(f.isValid||p.isValid)&&ua(L)&&r.isValid!==L;if(t.delayError&&V?(d=w(()=>N(F,V)),d(t.delayError)):(clearTimeout(m),d=null,V?Lr(r.errors,F,V):_n(r.errors,F)),(V?!Za(we,V):we)||!Fs(Se)||Ae){const Ke={...Se,...Ae&&ua(L)?{isValid:L}:{},errors:r.errors,name:F};r={...r,...Ke},v.state.next(Ke)}},M=async F=>{b(F,!0);const L=await t.resolver(a,t.context,QF(F||u.mount,n,t.criteriaMode,t.shouldUseNativeValidation));return b(F),L},R=async F=>{const{errors:L}=await M(F);if(F)for(const V of F){const Se=at(L,V);Se?Lr(r.errors,V,Se):_n(r.errors,V)}else r.errors=L;return L},K=async(F,L,V={valid:!0})=>{for(const Se in F){const we=F[Se];if(we){const{_f:Ae,...Ke}=we;if(Ae){const wt=u.array.has(Ae.name),vt=we._f&&ZF(we._f);vt&&f.validatingFields&&b([Ae.name],!0);const We=await kS(we,u.disabled,a,x,t.shouldUseNativeValidation&&!L,wt);if(vt&&f.validatingFields&&b([Ae.name]),We[Ae.name]&&(V.valid=!1,L))break;!L&&(at(We,Ae.name)?wt?aL(r.errors,We,Ae.name):Lr(r.errors,Ae.name,We[Ae.name]):_n(r.errors,Ae.name))}!Fs(Ke)&&await K(Ke,L,V)}}return V.valid},B=()=>{for(const F of u.unMount){const L=at(n,F);L&&(L._f.refs?L._f.refs.every(V=>!jy(V)):!jy(L._f.ref))&&De(F)}u.unMount=new Set},ie=(F,L)=>!t.disabled&&(F&&L&&Lr(a,F,L),!Za(le(),s)),G=(F,L,V)=>k0(F,u,{...l.mount?a:dn(L)?s:fa(F)?{[F]:L}:L},V,L),ne=F=>Ux(at(l.mount?a:s,F,t.shouldUnregister?at(s,F,[]):[])),W=(F,L,V={})=>{const Se=at(n,F);let we=L;if(Se){const Ae=Se._f;Ae&&(!Ae.disabled&&Lr(a,F,lP(L,Ae)),we=Hh(Ae.ref)&&Zs(L)?"":L,aP(Ae.ref)?[...Ae.ref.options].forEach(Ke=>Ke.selected=we.includes(Ke.value)):Ae.refs?qd(Ae.ref)?Ae.refs.forEach(Ke=>{(!Ke.defaultChecked||!Ke.disabled)&&(Array.isArray(we)?Ke.checked=!!we.find(wt=>wt===Ke.value):Ke.checked=we===Ke.value||!!we)}):Ae.refs.forEach(Ke=>Ke.checked=Ke.value===we):qx(Ae.ref)?Ae.ref.value="":(Ae.ref.value=we,Ae.ref.type||v.state.next({name:F,values:Mn(a)})))}(V.shouldDirty||V.shouldTouch)&&P(F,we,V.shouldTouch,V.shouldDirty,!0),V.shouldValidate&&ce(F)},q=(F,L,V)=>{for(const Se in L){if(!L.hasOwnProperty(Se))return;const we=L[Se],Ae=F+"."+Se,Ke=at(n,Ae);(u.array.has(F)||An(we)||Ke&&!Ke._f)&&!Pl(we)?q(Ae,we,V):W(Ae,we,V)}},ve=(F,L,V={})=>{const Se=at(n,F),we=u.array.has(F),Ae=Mn(L);Lr(a,F,Ae),we?(v.array.next({name:F,values:Mn(a)}),(f.isDirty||f.dirtyFields||p.isDirty||p.dirtyFields)&&V.shouldDirty&&v.state.next({name:F,dirtyFields:zc(s,a),isDirty:ie(F,Ae)})):Se&&!Se._f&&!Zs(Ae)?q(F,Ae,V):W(F,Ae,V),wS(F,u)&&v.state.next({...r,name:F}),v.state.next({name:l.mount?F:void 0,values:Mn(a)})},$=async F=>{l.mount=!0;const L=F.target;let V=L.name,Se=!0;const we=at(n,V),Ae=vt=>{Se=Number.isNaN(vt)||Pl(vt)&&isNaN(vt.getTime())||Za(vt,at(a,V,vt))},Ke=vS(t.mode),wt=vS(t.reValidateMode);if(we){let vt,We;const Oe=L.type?yS(we._f):eP(F),dt=F.type===qh.BLUR||F.type===qh.FOCUS_OUT,Qt=!eL(we._f)&&!t.resolver&&!at(r.errors,V)&&!we._f.deps||nL(dt,at(r.touchedFields,V),r.isSubmitted,wt,Ke),Dt=wS(V,u,dt);Lr(a,V,Oe),dt?(!L||!L.readOnly)&&(we._f.onBlur&&we._f.onBlur(F),d&&d(0)):we._f.onChange&&we._f.onChange(F);const ze=P(V,Oe,dt),Ye=!Fs(ze)||Dt;if(!dt&&v.state.next({name:V,type:F.type,values:Mn(a)}),Qt)return(f.isValid||p.isValid)&&(t.mode==="onBlur"?dt&&k():dt||k()),Ye&&v.state.next({name:V,...Dt?{}:ze});if(!dt&&Dt&&v.state.next({...r}),t.resolver){const{errors:it}=await M([V]);if(Ae(Oe),Se){const bt=bS(r.errors,n,V),jt=bS(it,n,bt.name||V);vt=jt.error,V=jt.name,We=Fs(it)}}else b([V],!0),vt=(await kS(we,u.disabled,a,x,t.shouldUseNativeValidation))[V],b([V]),Ae(Oe),Se&&(vt?We=!1:(f.isValid||p.isValid)&&(We=await K(n,!0)));Se&&(we._f.deps&&(!Array.isArray(we._f.deps)||we._f.deps.length>0)&&ce(we._f.deps),A(V,We,vt,ze))}},H=(F,L)=>{if(at(r.errors,L)&&F.focus)return F.focus(),1},ce=async(F,L={})=>{let V,Se;const we=xd(F);if(t.resolver){const Ae=await R(dn(F)?F:we);V=Fs(Ae),Se=F?!we.some(Ke=>at(Ae,Ke)):V}else F?(Se=(await Promise.all(we.map(async Ae=>{const Ke=at(n,Ae);return await K(Ke&&Ke._f?{[Ae]:Ke}:Ke)}))).every(Boolean),!(!Se&&!r.isValid)&&k()):Se=V=await K(n);return v.state.next({...!fa(F)||(f.isValid||p.isValid)&&V!==r.isValid?{}:{name:F},...t.resolver||!F?{isValid:V}:{},errors:r.errors}),L.shouldFocus&&!Se&&wd(n,H,F?we:u.mount),Se},le=(F,L)=>{let V={...l.mount?a:s};return L&&(V=sP(L.dirtyFields?r.dirtyFields:r.touchedFields,V)),dn(F)?V:fa(F)?at(V,F):F.map(Se=>at(V,Se))},U=(F,L)=>({invalid:!!at((L||r).errors,F),isDirty:!!at((L||r).dirtyFields,F),error:at((L||r).errors,F),isValidating:!!at(r.validatingFields,F),isTouched:!!at((L||r).touchedFields,F)}),te=F=>{F&&xd(F).forEach(L=>_n(r.errors,L)),v.state.next({errors:F?r.errors:{}})},he=(F,L,V)=>{const Se=(at(n,F,{_f:{}})._f||{}).ref,we=at(r.errors,F)||{},{ref:Ae,message:Ke,type:wt,...vt}=we;Lr(r.errors,F,{...vt,...L,ref:Se}),v.state.next({name:F,errors:r.errors,isValid:!1}),V&&V.shouldFocus&&Se&&Se.focus&&Se.focus()},$e=(F,L)=>ei(F)?v.state.subscribe({next:V=>"values"in V&&F(G(void 0,L),V)}):G(F,L,!0),Pe=F=>v.state.subscribe({next:L=>{rL(F.name,L.name,F.exact)&&tL(L,F.formState||f,Qe,F.reRenderRoot)&&F.callback({values:{...a},...r,...L,defaultValues:s})}}).unsubscribe,ke=F=>(l.mount=!0,p={...p,...F.formState},Pe({...F,formState:p})),De=(F,L={})=>{for(const V of F?xd(F):u.mount)u.mount.delete(V),u.array.delete(V),L.keepValue||(_n(n,V),_n(a,V)),!L.keepError&&_n(r.errors,V),!L.keepDirty&&_n(r.dirtyFields,V),!L.keepTouched&&_n(r.touchedFields,V),!L.keepIsValidating&&_n(r.validatingFields,V),!t.shouldUnregister&&!L.keepDefaultValue&&_n(s,V);v.state.next({values:Mn(a)}),v.state.next({...r,...L.keepDirty?{isDirty:ie()}:{}}),!L.keepIsValid&&k()},He=({disabled:F,name:L})=>{(ua(F)&&l.mount||F||u.disabled.has(L))&&(F?u.disabled.add(L):u.disabled.delete(L))},Y=(F,L={})=>{let V=at(n,F);const Se=ua(L.disabled)||ua(t.disabled);return Lr(n,F,{...V||{},_f:{...V&&V._f?V._f:{ref:{name:F}},name:F,mount:!0,...L}}),u.mount.add(F),V?He({disabled:ua(L.disabled)?L.disabled:t.disabled,name:F}):T(F,!0,L.value),{...Se?{disabled:L.disabled||t.disabled}:{},...t.progressive?{required:!!L.required,min:ed(L.min),max:ed(L.max),minLength:ed(L.minLength),maxLength:ed(L.maxLength),pattern:ed(L.pattern)}:{},name:F,onChange:$,onBlur:$,ref:we=>{if(we){Y(F,L),V=at(n,F);const Ae=dn(we.value)&&we.querySelectorAll&&we.querySelectorAll("input,select,textarea")[0]||we,Ke=GF(Ae),wt=V._f.refs||[];if(Ke?wt.find(vt=>vt===Ae):Ae===V._f.ref)return;Lr(n,F,{_f:{...V._f,...Ke?{refs:[...wt.filter(jy),Ae,...Array.isArray(at(s,F))?[{}]:[]],ref:{type:Ae.type,name:F}}:{ref:Ae}}}),T(F,!1,void 0,Ae)}else V=at(n,F,{}),V._f&&(V._f.mount=!1),(t.shouldUnregister||L.shouldUnregister)&&!(tP(u.array,F)&&l.action)&&u.unMount.add(F)}}},ge=()=>t.shouldFocusError&&wd(n,H,u.mount),oe=F=>{ua(F)&&(v.state.next({disabled:F}),wd(n,(L,V)=>{const Se=at(n,V);Se&&(L.disabled=Se._f.disabled||F,Array.isArray(Se._f.refs)&&Se._f.refs.forEach(we=>{we.disabled=Se._f.disabled||F}))},0,!1))},se=(F,L)=>async V=>{let Se;V&&(V.preventDefault&&V.preventDefault(),V.persist&&V.persist());let we=Mn(a);if(v.state.next({isSubmitting:!0}),t.resolver){const{errors:Ae,values:Ke}=await M();r.errors=Ae,we=Mn(Ke)}else await K(n);if(u.disabled.size)for(const Ae of u.disabled)_n(we,Ae);if(_n(r.errors,"root"),Fs(r.errors)){v.state.next({errors:{}});try{await F(we,V)}catch(Ae){Se=Ae}}else L&&await L({...r.errors},V),ge(),setTimeout(ge);if(v.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:Fs(r.errors)&&!Se,submitCount:r.submitCount+1,errors:r.errors}),Se)throw Se},Be=(F,L={})=>{at(n,F)&&(dn(L.defaultValue)?ve(F,Mn(at(s,F))):(ve(F,L.defaultValue),Lr(s,F,Mn(L.defaultValue))),L.keepTouched||_n(r.touchedFields,F),L.keepDirty||(_n(r.dirtyFields,F),r.isDirty=L.defaultValue?ie(F,Mn(at(s,F))):ie()),L.keepError||(_n(r.errors,F),f.isValid&&k()),v.state.next({...r}))},Xe=(F,L={})=>{const V=F?Mn(F):s,Se=Mn(V),we=Fs(F),Ae=we?s:Se;if(L.keepDefaultValues||(s=V),!L.keepValues){if(L.keepDirtyValues){const Ke=new Set([...u.mount,...Object.keys(zc(s,a))]);for(const wt of Array.from(Ke))at(r.dirtyFields,wt)?Lr(Ae,wt,at(a,wt)):ve(wt,at(Ae,wt))}else{if(zx&&dn(F))for(const Ke of u.mount){const wt=at(n,Ke);if(wt&&wt._f){const vt=Array.isArray(wt._f.refs)?wt._f.refs[0]:wt._f.ref;if(Hh(vt)){const We=vt.closest("form");if(We){We.reset();break}}}}if(L.keepFieldsRef)for(const Ke of u.mount)ve(Ke,at(Ae,Ke));else n={}}a=t.shouldUnregister?L.keepDefaultValues?Mn(s):{}:Mn(Ae),v.array.next({values:{...Ae}}),v.state.next({values:{...Ae}})}u={mount:L.keepDirtyValues?u.mount:new Set,unMount:new Set,array:new Set,disabled:new Set,watch:new Set,watchAll:!1,focus:""},l.mount=!f.isValid||!!L.keepIsValid||!!L.keepDirtyValues||!t.shouldUnregister&&!Fs(Ae),l.watch=!!t.shouldUnregister,v.state.next({submitCount:L.keepSubmitCount?r.submitCount:0,isDirty:we?!1:L.keepDirty?r.isDirty:!!(L.keepDefaultValues&&!Za(F,s)),isSubmitted:L.keepIsSubmitted?r.isSubmitted:!1,dirtyFields:we?{}:L.keepDirtyValues?L.keepDefaultValues&&a?zc(s,a):r.dirtyFields:L.keepDefaultValues&&F?zc(s,F):L.keepDirty?r.dirtyFields:{},touchedFields:L.keepTouched?r.touchedFields:{},errors:L.keepErrors?r.errors:{},isSubmitSuccessful:L.keepIsSubmitSuccessful?r.isSubmitSuccessful:!1,isSubmitting:!1,defaultValues:s})},mt=(F,L)=>Xe(ei(F)?F(a):F,L),zt=(F,L={})=>{const V=at(n,F),Se=V&&V._f;if(Se){const we=Se.refs?Se.refs[0]:Se.ref;we.focus&&(we.focus(),L.shouldSelect&&ei(we.select)&&we.select())}},Qe=F=>{r={...r,...F}},Vt={control:{register:Y,unregister:De,getFieldState:U,handleSubmit:se,setError:he,_subscribe:Pe,_runSchema:M,_focusError:ge,_getWatch:G,_getDirty:ie,_setValid:k,_setFieldArray:_,_setDisabledField:He,_setErrors:C,_getFieldArray:ne,_reset:Xe,_resetDefaultValues:()=>ei(t.defaultValues)&&t.defaultValues().then(F=>{mt(F,t.resetOptions),v.state.next({isLoading:!1})}),_removeUnmounted:B,_disableForm:oe,_subjects:v,_proxyFormState:f,get _fields(){return n},get _formValues(){return a},get _state(){return l},set _state(F){l=F},get _defaultValues(){return s},get _names(){return u},set _names(F){u=F},get _formState(){return r},get _options(){return t},set _options(F){t={...t,...F}}},subscribe:ke,trigger:ce,register:Y,handleSubmit:se,watch:$e,setValue:ve,getValues:le,reset:mt,resetField:Be,clearErrors:te,unregister:De,setError:he,setFocus:zt,getFieldState:U};return{...Vt,formControl:Vt}}function Ed(e={}){const t=It.useRef(void 0),r=It.useRef(void 0),[n,s]=It.useState({isDirty:!1,isValidating:!1,isLoading:ei(e.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},validatingFields:{},errors:e.errors||{},disabled:e.disabled||!1,isReady:!1,defaultValues:ei(e.defaultValues)?void 0:e.defaultValues});if(!t.current)if(e.formControl)t.current={...e.formControl,formState:n},e.defaultValues&&!ei(e.defaultValues)&&e.formControl.reset(e.defaultValues,e.resetOptions);else{const{formControl:l,...u}=oL(e);t.current={...u,formState:n}}const a=t.current.control;return a._options=e,Vx(()=>{const l=a._subscribe({formState:a._proxyFormState,callback:()=>s({...a._formState}),reRenderRoot:!0});return s(u=>({...u,isReady:!0})),a._formState.isReady=!0,l},[a]),It.useEffect(()=>a._disableForm(e.disabled),[a,e.disabled]),It.useEffect(()=>{e.mode&&(a._options.mode=e.mode),e.reValidateMode&&(a._options.reValidateMode=e.reValidateMode)},[a,e.mode,e.reValidateMode]),It.useEffect(()=>{e.errors&&(a._setErrors(e.errors),a._focusError())},[a,e.errors]),It.useEffect(()=>{e.shouldUnregister&&a._subjects.state.next({values:a._getWatch()})},[a,e.shouldUnregister]),It.useEffect(()=>{if(a._proxyFormState.isDirty){const l=a._getDirty();l!==n.isDirty&&a._subjects.state.next({isDirty:l})}},[a,n.isDirty]),It.useEffect(()=>{e.values&&!Za(e.values,r.current)?(a._reset(e.values,{keepFieldsRef:!0,...a._options.resetOptions}),r.current=e.values,s(l=>({...l}))):a._resetDefaultValues()},[a,e.values]),It.useEffect(()=>{a._state.mount||(a._setValid(),a._state.mount=!0),a._state.watch&&(a._state.watch=!1,a._subjects.state.next({...a._formState})),a._removeUnmounted()}),t.current.formState=nP(n,a),t.current}function uP(e){var t,r,n="";if(typeof e=="string"||typeof e=="number")n+=e;else if(typeof e=="object")if(Array.isArray(e)){var s=e.length;for(t=0;t<s;t++)e[t]&&(r=uP(e[t]))&&(n&&(n+=" "),n+=r)}else for(r in e)e[r]&&(n&&(n+=" "),n+=r);return n}function Yr(){for(var e,t,r=0,n="",s=arguments.length;r<s;r++)(e=arguments[r])&&(t=uP(e))&&(n&&(n+=" "),n+=t);return n}var lL=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"];function Kx(e){if(typeof e!="string")return!1;var t=lL;return t.includes(e)}var cL=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"];function dP(e){if(typeof e!="string")return!1;var t=cL;return t.includes(e)}function fP(e){return typeof e=="string"&&e.startsWith("data-")}function Zo(e){var t=Object.entries(e).filter(r=>{var[n]=r;return dP(n)||fP(n)});return Object.fromEntries(t)}function Gx(e){if(e==null)return null;if(y.isValidElement(e)&&typeof e.props=="object"&&e.props!==null){var t=e.props;return Zo(t)}return typeof e=="object"&&!Array.isArray(e)?Zo(e):null}function Fa(e){var t=Object.entries(e).filter(r=>{var[n]=r;return dP(n)||fP(n)||Kx(n)});return Object.fromEntries(t)}var uL=["children","width","height","viewBox","className","style","title","desc"];function N0(){return N0=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},N0.apply(null,arguments)}function dL(e,t){if(e==null)return{};var r,n,s=fL(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function fL(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var hP=y.forwardRef((e,t)=>{var{children:r,width:n,height:s,viewBox:a,className:l,style:u,title:d,desc:m}=e,f=dL(e,uL),p=a||{width:n,height:s,x:0,y:0},v=Yr("recharts-surface",l);return y.createElement("svg",N0({},Fa(f),{className:v,width:n,height:s,style:u,viewBox:"".concat(p.x," ").concat(p.y," ").concat(p.width," ").concat(p.height),ref:t}),y.createElement("title",null,d),y.createElement("desc",null,m),r)}),hL=["children","className"];function C0(){return C0=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},C0.apply(null,arguments)}function mL(e,t){if(e==null)return{};var r,n,s=pL(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function pL(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var no=y.forwardRef((e,t)=>{var{children:r,className:n}=e,s=mL(e,hL),a=Yr("recharts-layer",n);return y.createElement("g",C0({className:a},Fa(s),{ref:t}),r)}),gL=y.createContext(null);function zr(e){return function(){return e}}const mP=Math.cos,Gh=Math.sin,li=Math.sqrt,Yh=Math.PI,Qm=2*Yh,E0=Math.PI,P0=2*E0,kl=1e-6,yL=P0-kl;function pP(e){this._+=e[0];for(let t=1,r=e.length;t<r;++t)this._+=arguments[t]+e[t]}function vL(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return pP;const r=10**t;return function(n){this._+=n[0];for(let s=1,a=n.length;s<a;++s)this._+=Math.round(arguments[s]*r)/r+n[s]}}class xL{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?pP:vL(t)}moveTo(t,r){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+r}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,r){this._append`L${this._x1=+t},${this._y1=+r}`}quadraticCurveTo(t,r,n,s){this._append`Q${+t},${+r},${this._x1=+n},${this._y1=+s}`}bezierCurveTo(t,r,n,s,a,l){this._append`C${+t},${+r},${+n},${+s},${this._x1=+a},${this._y1=+l}`}arcTo(t,r,n,s,a){if(t=+t,r=+r,n=+n,s=+s,a=+a,a<0)throw new Error(`negative radius: ${a}`);let l=this._x1,u=this._y1,d=n-t,m=s-r,f=l-t,p=u-r,v=f*f+p*p;if(this._x1===null)this._append`M${this._x1=t},${this._y1=r}`;else if(v>kl)if(!(Math.abs(p*d-m*f)>kl)||!a)this._append`L${this._x1=t},${this._y1=r}`;else{let x=n-l,w=s-u,k=d*d+m*m,b=x*x+w*w,_=Math.sqrt(k),N=Math.sqrt(v),C=a*Math.tan((E0-Math.acos((k+v-b)/(2*_*N)))/2),T=C/N,P=C/_;Math.abs(T-1)>kl&&this._append`L${t+T*f},${r+T*p}`,this._append`A${a},${a},0,0,${+(p*x>f*w)},${this._x1=t+P*d},${this._y1=r+P*m}`}}arc(t,r,n,s,a,l){if(t=+t,r=+r,n=+n,l=!!l,n<0)throw new Error(`negative radius: ${n}`);let u=n*Math.cos(s),d=n*Math.sin(s),m=t+u,f=r+d,p=1^l,v=l?s-a:a-s;this._x1===null?this._append`M${m},${f}`:(Math.abs(this._x1-m)>kl||Math.abs(this._y1-f)>kl)&&this._append`L${m},${f}`,n&&(v<0&&(v=v%P0+P0),v>yL?this._append`A${n},${n},0,1,${p},${t-u},${r-d}A${n},${n},0,1,${p},${this._x1=m},${this._y1=f}`:v>kl&&this._append`A${n},${n},0,${+(v>=E0)},${p},${this._x1=t+n*Math.cos(a)},${this._y1=r+n*Math.sin(a)}`)}rect(t,r,n,s){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+r}h${n=+n}v${+s}h${-n}Z`}toString(){return this._}}function Yx(e){let t=3;return e.digits=function(r){if(!arguments.length)return t;if(r==null)t=null;else{const n=Math.floor(r);if(!(n>=0))throw new RangeError(`invalid digits: ${r}`);t=n}return e},()=>new xL(t)}function Jx(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function gP(e){this._context=e}gP.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function Zm(e){return new gP(e)}function yP(e){return e[0]}function vP(e){return e[1]}function xP(e,t){var r=zr(!0),n=null,s=Zm,a=null,l=Yx(u);e=typeof e=="function"?e:e===void 0?yP:zr(e),t=typeof t=="function"?t:t===void 0?vP:zr(t);function u(d){var m,f=(d=Jx(d)).length,p,v=!1,x;for(n==null&&(a=s(x=l())),m=0;m<=f;++m)!(m<f&&r(p=d[m],m,d))===v&&((v=!v)?a.lineStart():a.lineEnd()),v&&a.point(+e(p,m,d),+t(p,m,d));if(x)return a=null,x+""||null}return u.x=function(d){return arguments.length?(e=typeof d=="function"?d:zr(+d),u):e},u.y=function(d){return arguments.length?(t=typeof d=="function"?d:zr(+d),u):t},u.defined=function(d){return arguments.length?(r=typeof d=="function"?d:zr(!!d),u):r},u.curve=function(d){return arguments.length?(s=d,n!=null&&(a=s(n)),u):s},u.context=function(d){return arguments.length?(d==null?n=a=null:a=s(n=d),u):n},u}function ch(e,t,r){var n=null,s=zr(!0),a=null,l=Zm,u=null,d=Yx(m);e=typeof e=="function"?e:e===void 0?yP:zr(+e),t=typeof t=="function"?t:zr(t===void 0?0:+t),r=typeof r=="function"?r:r===void 0?vP:zr(+r);function m(p){var v,x,w,k=(p=Jx(p)).length,b,_=!1,N,C=new Array(k),T=new Array(k);for(a==null&&(u=l(N=d())),v=0;v<=k;++v){if(!(v<k&&s(b=p[v],v,p))===_)if(_=!_)x=v,u.areaStart(),u.lineStart();else{for(u.lineEnd(),u.lineStart(),w=v-1;w>=x;--w)u.point(C[w],T[w]);u.lineEnd(),u.areaEnd()}_&&(C[v]=+e(b,v,p),T[v]=+t(b,v,p),u.point(n?+n(b,v,p):C[v],r?+r(b,v,p):T[v]))}if(N)return u=null,N+""||null}function f(){return xP().defined(s).curve(l).context(a)}return m.x=function(p){return arguments.length?(e=typeof p=="function"?p:zr(+p),n=null,m):e},m.x0=function(p){return arguments.length?(e=typeof p=="function"?p:zr(+p),m):e},m.x1=function(p){return arguments.length?(n=p==null?null:typeof p=="function"?p:zr(+p),m):n},m.y=function(p){return arguments.length?(t=typeof p=="function"?p:zr(+p),r=null,m):t},m.y0=function(p){return arguments.length?(t=typeof p=="function"?p:zr(+p),m):t},m.y1=function(p){return arguments.length?(r=p==null?null:typeof p=="function"?p:zr(+p),m):r},m.lineX0=m.lineY0=function(){return f().x(e).y(t)},m.lineY1=function(){return f().x(e).y(r)},m.lineX1=function(){return f().x(n).y(t)},m.defined=function(p){return arguments.length?(s=typeof p=="function"?p:zr(!!p),m):s},m.curve=function(p){return arguments.length?(l=p,a!=null&&(u=l(a)),m):l},m.context=function(p){return arguments.length?(p==null?a=u=null:u=l(a=p),m):a},m}class wP{constructor(t,r){this._context=t,this._x=r}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(t,r){switch(t=+t,r=+r,this._point){case 0:{this._point=1,this._line?this._context.lineTo(t,r):this._context.moveTo(t,r);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+t)/2,this._y0,this._x0,r,t,r):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+r)/2,t,this._y0,t,r);break}}this._x0=t,this._y0=r}}function wL(e){return new wP(e,!0)}function bL(e){return new wP(e,!1)}const Xx={draw(e,t){const r=li(t/Yh);e.moveTo(r,0),e.arc(0,0,r,0,Qm)}},jL={draw(e,t){const r=li(t/5)/2;e.moveTo(-3*r,-r),e.lineTo(-r,-r),e.lineTo(-r,-3*r),e.lineTo(r,-3*r),e.lineTo(r,-r),e.lineTo(3*r,-r),e.lineTo(3*r,r),e.lineTo(r,r),e.lineTo(r,3*r),e.lineTo(-r,3*r),e.lineTo(-r,r),e.lineTo(-3*r,r),e.closePath()}},bP=li(1/3),kL=bP*2,SL={draw(e,t){const r=li(t/kL),n=r*bP;e.moveTo(0,-r),e.lineTo(n,0),e.lineTo(0,r),e.lineTo(-n,0),e.closePath()}},_L={draw(e,t){const r=li(t),n=-r/2;e.rect(n,n,r,r)}},NL=.8908130915292852,jP=Gh(Yh/10)/Gh(7*Yh/10),CL=Gh(Qm/10)*jP,EL=-mP(Qm/10)*jP,PL={draw(e,t){const r=li(t*NL),n=CL*r,s=EL*r;e.moveTo(0,-r),e.lineTo(n,s);for(let a=1;a<5;++a){const l=Qm*a/5,u=mP(l),d=Gh(l);e.lineTo(d*r,-u*r),e.lineTo(u*n-d*s,d*n+u*s)}e.closePath()}},ky=li(3),AL={draw(e,t){const r=-li(t/(ky*3));e.moveTo(0,r*2),e.lineTo(-ky*r,-r),e.lineTo(ky*r,-r),e.closePath()}},Oa=-.5,Ta=li(3)/2,A0=1/li(12),OL=(A0/2+1)*3,TL={draw(e,t){const r=li(t/OL),n=r/2,s=r*A0,a=n,l=r*A0+r,u=-a,d=l;e.moveTo(n,s),e.lineTo(a,l),e.lineTo(u,d),e.lineTo(Oa*n-Ta*s,Ta*n+Oa*s),e.lineTo(Oa*a-Ta*l,Ta*a+Oa*l),e.lineTo(Oa*u-Ta*d,Ta*u+Oa*d),e.lineTo(Oa*n+Ta*s,Oa*s-Ta*n),e.lineTo(Oa*a+Ta*l,Oa*l-Ta*a),e.lineTo(Oa*u+Ta*d,Oa*d-Ta*u),e.closePath()}};function IL(e,t){let r=null,n=Yx(s);e=typeof e=="function"?e:zr(e||Xx),t=typeof t=="function"?t:zr(t===void 0?64:+t);function s(){let a;if(r||(r=a=n()),e.apply(this,arguments).draw(r,+t.apply(this,arguments)),a)return r=null,a+""||null}return s.type=function(a){return arguments.length?(e=typeof a=="function"?a:zr(a),s):e},s.size=function(a){return arguments.length?(t=typeof a=="function"?a:zr(+a),s):t},s.context=function(a){return arguments.length?(r=a??null,s):r},s}function Jh(){}function Xh(e,t,r){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+r)/6)}function kP(e){this._context=e}kP.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:Xh(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:Xh(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function DL(e){return new kP(e)}function SP(e){this._context=e}SP.prototype={areaStart:Jh,areaEnd:Jh,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:Xh(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function $L(e){return new SP(e)}function _P(e){this._context=e}_P.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var r=(this._x0+4*this._x1+e)/6,n=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(r,n):this._context.moveTo(r,n);break;case 3:this._point=4;default:Xh(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function RL(e){return new _P(e)}function NP(e){this._context=e}NP.prototype={areaStart:Jh,areaEnd:Jh,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}};function ML(e){return new NP(e)}function SS(e){return e<0?-1:1}function _S(e,t,r){var n=e._x1-e._x0,s=t-e._x1,a=(e._y1-e._y0)/(n||s<0&&-0),l=(r-e._y1)/(s||n<0&&-0),u=(a*s+l*n)/(n+s);return(SS(a)+SS(l))*Math.min(Math.abs(a),Math.abs(l),.5*Math.abs(u))||0}function NS(e,t){var r=e._x1-e._x0;return r?(3*(e._y1-e._y0)/r-t)/2:t}function Sy(e,t,r){var n=e._x0,s=e._y0,a=e._x1,l=e._y1,u=(a-n)/3;e._context.bezierCurveTo(n+u,s+u*t,a-u,l-u*r,a,l)}function Qh(e){this._context=e}Qh.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:Sy(this,this._t0,NS(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var r=NaN;if(e=+e,t=+t,!(e===this._x1&&t===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,Sy(this,NS(this,r=_S(this,e,t)),r);break;default:Sy(this,this._t0,r=_S(this,e,t));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=r}}};function CP(e){this._context=new EP(e)}(CP.prototype=Object.create(Qh.prototype)).point=function(e,t){Qh.prototype.point.call(this,t,e)};function EP(e){this._context=e}EP.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,r,n,s,a){this._context.bezierCurveTo(t,e,n,r,a,s)}};function FL(e){return new Qh(e)}function LL(e){return new CP(e)}function PP(e){this._context=e}PP.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,r=e.length;if(r)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),r===2)this._context.lineTo(e[1],t[1]);else for(var n=CS(e),s=CS(t),a=0,l=1;l<r;++a,++l)this._context.bezierCurveTo(n[0][a],s[0][a],n[1][a],s[1][a],e[l],t[l]);(this._line||this._line!==0&&r===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}};function CS(e){var t,r=e.length-1,n,s=new Array(r),a=new Array(r),l=new Array(r);for(s[0]=0,a[0]=2,l[0]=e[0]+2*e[1],t=1;t<r-1;++t)s[t]=1,a[t]=4,l[t]=4*e[t]+2*e[t+1];for(s[r-1]=2,a[r-1]=7,l[r-1]=8*e[r-1]+e[r],t=1;t<r;++t)n=s[t]/a[t-1],a[t]-=n,l[t]-=n*l[t-1];for(s[r-1]=l[r-1]/a[r-1],t=r-2;t>=0;--t)s[t]=(l[t]-s[t+1])/a[t];for(a[r-1]=(e[r]+s[r-1])/2,t=0;t<r-1;++t)a[t]=2*e[t+1]-s[t+1];return[s,a]}function zL(e){return new PP(e)}function ep(e,t){this._context=e,this._t=t}ep.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var r=this._x*(1-this._t)+e*this._t;this._context.lineTo(r,this._y),this._context.lineTo(r,t)}break}}this._x=e,this._y=t}};function UL(e){return new ep(e,.5)}function BL(e){return new ep(e,0)}function WL(e){return new ep(e,1)}function Xc(e,t){if((l=e.length)>1)for(var r=1,n,s,a=e[t[0]],l,u=a.length;r<l;++r)for(s=a,a=e[t[r]],n=0;n<u;++n)a[n][1]+=a[n][0]=isNaN(s[n][1])?s[n][0]:s[n][1]}function O0(e){for(var t=e.length,r=new Array(t);--t>=0;)r[t]=t;return r}function VL(e,t){return e[t]}function qL(e){const t=[];return t.key=e,t}function HL(){var e=zr([]),t=O0,r=Xc,n=VL;function s(a){var l=Array.from(e.apply(this,arguments),qL),u,d=l.length,m=-1,f;for(const p of a)for(u=0,++m;u<d;++u)(l[u][m]=[0,+n(p,l[u].key,m,a)]).data=p;for(u=0,f=Jx(t(l));u<d;++u)l[f[u]].index=u;return r(l,f),l}return s.keys=function(a){return arguments.length?(e=typeof a=="function"?a:zr(Array.from(a)),s):e},s.value=function(a){return arguments.length?(n=typeof a=="function"?a:zr(+a),s):n},s.order=function(a){return arguments.length?(t=a==null?O0:typeof a=="function"?a:zr(Array.from(a)),s):t},s.offset=function(a){return arguments.length?(r=a??Xc,s):r},s}function KL(e,t){if((n=e.length)>0){for(var r,n,s=0,a=e[0].length,l;s<a;++s){for(l=r=0;r<n;++r)l+=e[r][s][1]||0;if(l)for(r=0;r<n;++r)e[r][s][1]/=l}Xc(e,t)}}function GL(e,t){if((s=e.length)>0){for(var r=0,n=e[t[0]],s,a=n.length;r<a;++r){for(var l=0,u=0;l<s;++l)u+=e[l][r][1]||0;n[r][1]+=n[r][0]=-u/2}Xc(e,t)}}function YL(e,t){if(!(!((l=e.length)>0)||!((a=(s=e[t[0]]).length)>0))){for(var r=0,n=1,s,a,l;n<a;++n){for(var u=0,d=0,m=0;u<l;++u){for(var f=e[t[u]],p=f[n][1]||0,v=f[n-1][1]||0,x=(p-v)/2,w=0;w<u;++w){var k=e[t[w]],b=k[n][1]||0,_=k[n-1][1]||0;x+=b-_}d+=p,m+=x*p}s[n-1][1]+=s[n-1][0]=r,d&&(r-=m/d)}s[n-1][1]+=s[n-1][0]=r,Xc(e,t)}}var _y={},Ny={},ES;function JL(){return ES||(ES=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r==="__proto__"}e.isUnsafeProperty=t})(Ny)),Ny}var Cy={},PS;function AP(){return PS||(PS=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){switch(typeof r){case"number":case"symbol":return!1;case"string":return r.includes(".")||r.includes("[")||r.includes("]")}}e.isDeepKey=t})(Cy)),Cy}var Ey={},AS;function Qx(){return AS||(AS=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){var n;return typeof r=="string"||typeof r=="symbol"?r:Object.is((n=r==null?void 0:r.valueOf)==null?void 0:n.call(r),-0)?"-0":String(r)}e.toKey=t})(Ey)),Ey}var Py={},Ay={},OS;function XL(){return OS||(OS=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){if(r==null)return"";if(typeof r=="string")return r;if(Array.isArray(r))return r.map(t).join(",");const n=String(r);return n==="0"&&Object.is(Number(r),-0)?"-0":n}e.toString=t})(Ay)),Ay}var TS;function Zx(){return TS||(TS=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=XL(),r=Qx();function n(s){if(Array.isArray(s))return s.map(r.toKey);if(typeof s=="symbol")return[s];s=t.toString(s);const a=[],l=s.length;if(l===0)return a;let u=0,d="",m="",f=!1;for(s.charCodeAt(0)===46&&(a.push(""),u++);u<l;){const p=s[u];m?p==="\\"&&u+1<l?(u++,d+=s[u]):p===m?m="":d+=p:f?p==='"'||p==="'"?m=p:p==="]"?(f=!1,a.push(d),d=""):d+=p:p==="["?(f=!0,d&&(a.push(d),d="")):p==="."?d&&(a.push(d),d=""):d+=p,u++}return d&&a.push(d),a}e.toPath=n})(Py)),Py}var IS;function ew(){return IS||(IS=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=JL(),r=AP(),n=Qx(),s=Zx();function a(u,d,m){if(u==null)return m;switch(typeof d){case"string":{if(t.isUnsafeProperty(d))return m;const f=u[d];return f===void 0?r.isDeepKey(d)?a(u,s.toPath(d),m):m:f}case"number":case"symbol":{typeof d=="number"&&(d=n.toKey(d));const f=u[d];return f===void 0?m:f}default:{if(Array.isArray(d))return l(u,d,m);if(Object.is(d==null?void 0:d.valueOf(),-0)?d="-0":d=String(d),t.isUnsafeProperty(d))return m;const f=u[d];return f===void 0?m:f}}}function l(u,d,m){if(d.length===0)return m;let f=u;for(let p=0;p<d.length;p++){if(f==null||t.isUnsafeProperty(d[p]))return m;f=f[d[p]]}return f===void 0?m:f}e.get=a})(_y)),_y}var Oy,DS;function QL(){return DS||(DS=1,Oy=ew().get),Oy}var ZL=QL();const Qc=ai(ZL);var pa=e=>e===0?0:e>0?1:-1,Ei=e=>typeof e=="number"&&e!=+e,so=e=>typeof e=="string"&&e.indexOf("%")===e.length-1,Ut=e=>(typeof e=="number"||e instanceof Number)&&!Ei(e),Pi=e=>Ut(e)||typeof e=="string",ez=0,Pd=e=>{var t=++ez;return"".concat(e||"").concat(t)},si=function(t,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!Ut(t)&&typeof t!="string")return n;var a;if(so(t)){if(r==null)return n;var l=t.indexOf("%");a=r*parseFloat(t.slice(0,l))/100}else a=+t;return Ei(a)&&(a=n),s&&r!=null&&a>r&&(a=r),a},OP=e=>{if(!Array.isArray(e))return!1;for(var t=e.length,r={},n=0;n<t;n++)if(!r[e[n]])r[e[n]]=!0;else return!0;return!1};function xs(e,t,r){return Ut(e)&&Ut(t)?e+r*(t-e):t}function tz(e,t,r){if(!(!e||!e.length))return e.find(n=>n&&(typeof t=="function"?t(n):Qc(n,t))===r)}var rs=e=>e===null||typeof e>"u",Hd=e=>rs(e)?e:"".concat(e.charAt(0).toUpperCase()).concat(e.slice(1));function rz(e){return e!=null}function mu(){}var nz=["type","size","sizeType"];function T0(){return T0=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},T0.apply(null,arguments)}function $S(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function RS(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?$S(Object(r),!0).forEach(function(n){sz(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):$S(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function sz(e,t,r){return(t=az(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function az(e){var t=iz(e,"string");return typeof t=="symbol"?t:t+""}function iz(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function oz(e,t){if(e==null)return{};var r,n,s=lz(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function lz(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var TP={symbolCircle:Xx,symbolCross:jL,symbolDiamond:SL,symbolSquare:_L,symbolStar:PL,symbolTriangle:AL,symbolWye:TL},cz=Math.PI/180,uz=e=>{var t="symbol".concat(Hd(e));return TP[t]||Xx},dz=(e,t,r)=>{if(t==="area")return e;switch(r){case"cross":return 5*e*e/9;case"diamond":return .5*e*e/Math.sqrt(3);case"square":return e*e;case"star":{var n=18*cz;return 1.25*e*e*(Math.tan(n)-Math.tan(n*2)*Math.tan(n)**2)}case"triangle":return Math.sqrt(3)*e*e/4;case"wye":return(21-10*Math.sqrt(3))*e*e/8;default:return Math.PI*e*e/4}},fz=(e,t)=>{TP["symbol".concat(Hd(e))]=t},IP=e=>{var{type:t="circle",size:r=64,sizeType:n="area"}=e,s=oz(e,nz),a=RS(RS({},s),{},{type:t,size:r,sizeType:n}),l="circle";typeof t=="string"&&(l=t);var u=()=>{var v=uz(l),x=IL().type(v).size(dz(r,n,l)),w=x();if(w!==null)return w},{className:d,cx:m,cy:f}=a,p=Fa(a);return Ut(m)&&Ut(f)&&Ut(r)?y.createElement("path",T0({},p,{className:Yr("recharts-symbols",d),transform:"translate(".concat(m,", ").concat(f,")"),d:u()})):null};IP.registerSymbol=fz;var DP=e=>"radius"in e&&"startAngle"in e&&"endAngle"in e,hz=(e,t)=>{if(!e||typeof e=="function"||typeof e=="boolean")return null;var r=e;if(y.isValidElement(e)&&(r=e.props),typeof r!="object"&&typeof r!="function")return null;var n={};return Object.keys(r).forEach(s=>{Kx(s)&&(n[s]=(a=>r[s](r,a)))}),n},mz=(e,t,r)=>n=>(e(t,r,n),null),tw=(e,t,r)=>{if(e===null||typeof e!="object"&&typeof e!="function")return null;var n=null;return Object.keys(e).forEach(s=>{var a=e[s];Kx(s)&&typeof a=="function"&&(n||(n={}),n[s]=mz(a,t,r))}),n};function MS(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function pz(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?MS(Object(r),!0).forEach(function(n){gz(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):MS(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function gz(e,t,r){return(t=yz(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function yz(e){var t=vz(e,"string");return typeof t=="symbol"?t:t+""}function vz(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Ua(e,t){var r=pz({},e),n=t,s=Object.keys(t),a=s.reduce((l,u)=>(l[u]===void 0&&n[u]!==void 0&&(l[u]=n[u]),l),r);return a}var Ty={},Iy={},FS;function xz(){return FS||(FS=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r,n){const s=new Map;for(let a=0;a<r.length;a++){const l=r[a],u=n(l);s.has(u)||s.set(u,l)}return Array.from(s.values())}e.uniqBy=t})(Iy)),Iy}var Dy={},LS;function $P(){return LS||(LS=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r}e.identity=t})(Dy)),Dy}var $y={},Ry={},My={},zS;function wz(){return zS||(zS=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return Number.isSafeInteger(r)&&r>=0}e.isLength=t})(My)),My}var US;function rw(){return US||(US=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=wz();function r(n){return n!=null&&typeof n!="function"&&t.isLength(n.length)}e.isArrayLike=r})(Ry)),Ry}var Fy={},BS;function bz(){return BS||(BS=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return typeof r=="object"&&r!==null}e.isObjectLike=t})(Fy)),Fy}var WS;function jz(){return WS||(WS=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=rw(),r=bz();function n(s){return r.isObjectLike(s)&&t.isArrayLike(s)}e.isArrayLikeObject=n})($y)),$y}var Ly={},zy={},VS;function kz(){return VS||(VS=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=ew();function r(n){return function(s){return t.get(s,n)}}e.property=r})(zy)),zy}var Uy={},By={},Wy={},Vy={},qS;function RP(){return qS||(qS=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r!==null&&(typeof r=="object"||typeof r=="function")}e.isObject=t})(Vy)),Vy}var qy={},HS;function MP(){return HS||(HS=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r==null||typeof r!="object"&&typeof r!="function"}e.isPrimitive=t})(qy)),qy}var Hy={},KS;function FP(){return KS||(KS=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r,n){return r===n||Number.isNaN(r)&&Number.isNaN(n)}e.eq=t})(Hy)),Hy}var GS;function Sz(){return GS||(GS=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=RP(),r=MP(),n=FP();function s(f,p,v){return typeof v!="function"?s(f,p,()=>{}):a(f,p,function x(w,k,b,_,N,C){const T=v(w,k,b,_,N,C);return T!==void 0?!!T:a(w,k,x,C)},new Map)}function a(f,p,v,x){if(p===f)return!0;switch(typeof p){case"object":return l(f,p,v,x);case"function":return Object.keys(p).length>0?a(f,{...p},v,x):n.eq(f,p);default:return t.isObject(f)?typeof p=="string"?p==="":!0:n.eq(f,p)}}function l(f,p,v,x){if(p==null)return!0;if(Array.isArray(p))return d(f,p,v,x);if(p instanceof Map)return u(f,p,v,x);if(p instanceof Set)return m(f,p,v,x);const w=Object.keys(p);if(f==null)return w.length===0;if(w.length===0)return!0;if(x!=null&&x.has(p))return x.get(p)===f;x==null||x.set(p,f);try{for(let k=0;k<w.length;k++){const b=w[k];if(!r.isPrimitive(f)&&!(b in f)||p[b]===void 0&&f[b]!==void 0||p[b]===null&&f[b]!==null||!v(f[b],p[b],b,f,p,x))return!1}return!0}finally{x==null||x.delete(p)}}function u(f,p,v,x){if(p.size===0)return!0;if(!(f instanceof Map))return!1;for(const[w,k]of p.entries()){const b=f.get(w);if(v(b,k,w,f,p,x)===!1)return!1}return!0}function d(f,p,v,x){if(p.length===0)return!0;if(!Array.isArray(f))return!1;const w=new Set;for(let k=0;k<p.length;k++){const b=p[k];let _=!1;for(let N=0;N<f.length;N++){if(w.has(N))continue;const C=f[N];let T=!1;if(v(C,b,k,f,p,x)&&(T=!0),T){w.add(N),_=!0;break}}if(!_)return!1}return!0}function m(f,p,v,x){return p.size===0?!0:f instanceof Set?d([...f],[...p],v,x):!1}e.isMatchWith=s,e.isSetMatch=m})(Wy)),Wy}var YS;function LP(){return YS||(YS=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Sz();function r(n,s){return t.isMatchWith(n,s,()=>{})}e.isMatch=r})(By)),By}var Ky={},Gy={},Yy={},JS;function _z(){return JS||(JS=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return Object.getOwnPropertySymbols(r).filter(n=>Object.prototype.propertyIsEnumerable.call(r,n))}e.getSymbols=t})(Yy)),Yy}var Jy={},XS;function zP(){return XS||(XS=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r==null?r===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(r)}e.getTag=t})(Jy)),Jy}var Xy={},QS;function UP(){return QS||(QS=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t="[object RegExp]",r="[object String]",n="[object Number]",s="[object Boolean]",a="[object Arguments]",l="[object Symbol]",u="[object Date]",d="[object Map]",m="[object Set]",f="[object Array]",p="[object Function]",v="[object ArrayBuffer]",x="[object Object]",w="[object Error]",k="[object DataView]",b="[object Uint8Array]",_="[object Uint8ClampedArray]",N="[object Uint16Array]",C="[object Uint32Array]",T="[object BigUint64Array]",P="[object Int8Array]",A="[object Int16Array]",M="[object Int32Array]",R="[object BigInt64Array]",K="[object Float32Array]",B="[object Float64Array]";e.argumentsTag=a,e.arrayBufferTag=v,e.arrayTag=f,e.bigInt64ArrayTag=R,e.bigUint64ArrayTag=T,e.booleanTag=s,e.dataViewTag=k,e.dateTag=u,e.errorTag=w,e.float32ArrayTag=K,e.float64ArrayTag=B,e.functionTag=p,e.int16ArrayTag=A,e.int32ArrayTag=M,e.int8ArrayTag=P,e.mapTag=d,e.numberTag=n,e.objectTag=x,e.regexpTag=t,e.setTag=m,e.stringTag=r,e.symbolTag=l,e.uint16ArrayTag=N,e.uint32ArrayTag=C,e.uint8ArrayTag=b,e.uint8ClampedArrayTag=_})(Xy)),Xy}var Qy={},ZS;function Nz(){return ZS||(ZS=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return ArrayBuffer.isView(r)&&!(r instanceof DataView)}e.isTypedArray=t})(Qy)),Qy}var e_;function BP(){return e_||(e_=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=_z(),r=zP(),n=UP(),s=MP(),a=Nz();function l(f,p){return u(f,void 0,f,new Map,p)}function u(f,p,v,x=new Map,w=void 0){const k=w==null?void 0:w(f,p,v,x);if(k!==void 0)return k;if(s.isPrimitive(f))return f;if(x.has(f))return x.get(f);if(Array.isArray(f)){const b=new Array(f.length);x.set(f,b);for(let _=0;_<f.length;_++)b[_]=u(f[_],_,v,x,w);return Object.hasOwn(f,"index")&&(b.index=f.index),Object.hasOwn(f,"input")&&(b.input=f.input),b}if(f instanceof Date)return new Date(f.getTime());if(f instanceof RegExp){const b=new RegExp(f.source,f.flags);return b.lastIndex=f.lastIndex,b}if(f instanceof Map){const b=new Map;x.set(f,b);for(const[_,N]of f)b.set(_,u(N,_,v,x,w));return b}if(f instanceof Set){const b=new Set;x.set(f,b);for(const _ of f)b.add(u(_,void 0,v,x,w));return b}if(typeof Buffer<"u"&&Buffer.isBuffer(f))return f.subarray();if(a.isTypedArray(f)){const b=new(Object.getPrototypeOf(f)).constructor(f.length);x.set(f,b);for(let _=0;_<f.length;_++)b[_]=u(f[_],_,v,x,w);return b}if(f instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&f instanceof SharedArrayBuffer)return f.slice(0);if(f instanceof DataView){const b=new DataView(f.buffer.slice(0),f.byteOffset,f.byteLength);return x.set(f,b),d(b,f,v,x,w),b}if(typeof File<"u"&&f instanceof File){const b=new File([f],f.name,{type:f.type});return x.set(f,b),d(b,f,v,x,w),b}if(typeof Blob<"u"&&f instanceof Blob){const b=new Blob([f],{type:f.type});return x.set(f,b),d(b,f,v,x,w),b}if(f instanceof Error){const b=new f.constructor;return x.set(f,b),b.message=f.message,b.name=f.name,b.stack=f.stack,b.cause=f.cause,d(b,f,v,x,w),b}if(f instanceof Boolean){const b=new Boolean(f.valueOf());return x.set(f,b),d(b,f,v,x,w),b}if(f instanceof Number){const b=new Number(f.valueOf());return x.set(f,b),d(b,f,v,x,w),b}if(f instanceof String){const b=new String(f.valueOf());return x.set(f,b),d(b,f,v,x,w),b}if(typeof f=="object"&&m(f)){const b=Object.create(Object.getPrototypeOf(f));return x.set(f,b),d(b,f,v,x,w),b}return f}function d(f,p,v=f,x,w){const k=[...Object.keys(p),...t.getSymbols(p)];for(let b=0;b<k.length;b++){const _=k[b],N=Object.getOwnPropertyDescriptor(f,_);(N==null||N.writable)&&(f[_]=u(p[_],_,v,x,w))}}function m(f){switch(r.getTag(f)){case n.argumentsTag:case n.arrayTag:case n.arrayBufferTag:case n.dataViewTag:case n.booleanTag:case n.dateTag:case n.float32ArrayTag:case n.float64ArrayTag:case n.int8ArrayTag:case n.int16ArrayTag:case n.int32ArrayTag:case n.mapTag:case n.numberTag:case n.objectTag:case n.regexpTag:case n.setTag:case n.stringTag:case n.symbolTag:case n.uint8ArrayTag:case n.uint8ClampedArrayTag:case n.uint16ArrayTag:case n.uint32ArrayTag:return!0;default:return!1}}e.cloneDeepWith=l,e.cloneDeepWithImpl=u,e.copyProperties=d})(Gy)),Gy}var t_;function Cz(){return t_||(t_=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=BP();function r(n){return t.cloneDeepWithImpl(n,void 0,n,new Map,void 0)}e.cloneDeep=r})(Ky)),Ky}var r_;function Ez(){return r_||(r_=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=LP(),r=Cz();function n(s){return s=r.cloneDeep(s),a=>t.isMatch(a,s)}e.matches=n})(Uy)),Uy}var Zy={},ev={},tv={},n_;function Pz(){return n_||(n_=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=BP(),r=UP();function n(s,a){return t.cloneDeepWith(s,(l,u,d,m)=>{const f=a==null?void 0:a(l,u,d,m);if(f!==void 0)return f;if(typeof s=="object")switch(Object.prototype.toString.call(s)){case r.numberTag:case r.stringTag:case r.booleanTag:{const p=new s.constructor(s==null?void 0:s.valueOf());return t.copyProperties(p,s),p}case r.argumentsTag:{const p={};return t.copyProperties(p,s),p.length=s.length,p[Symbol.iterator]=s[Symbol.iterator],p}default:return}})}e.cloneDeepWith=n})(tv)),tv}var s_;function Az(){return s_||(s_=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Pz();function r(n){return t.cloneDeepWith(n)}e.cloneDeep=r})(ev)),ev}var rv={},nv={},a_;function WP(){return a_||(a_=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=/^(?:0|[1-9]\d*)$/;function r(n,s=Number.MAX_SAFE_INTEGER){switch(typeof n){case"number":return Number.isInteger(n)&&n>=0&&n<s;case"symbol":return!1;case"string":return t.test(n)}}e.isIndex=r})(nv)),nv}var sv={},i_;function Oz(){return i_||(i_=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=zP();function r(n){return n!==null&&typeof n=="object"&&t.getTag(n)==="[object Arguments]"}e.isArguments=r})(sv)),sv}var o_;function Tz(){return o_||(o_=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=AP(),r=WP(),n=Oz(),s=Zx();function a(l,u){let d;if(Array.isArray(u)?d=u:typeof u=="string"&&t.isDeepKey(u)&&(l==null?void 0:l[u])==null?d=s.toPath(u):d=[u],d.length===0)return!1;let m=l;for(let f=0;f<d.length;f++){const p=d[f];if((m==null||!Object.hasOwn(m,p))&&!((Array.isArray(m)||n.isArguments(m))&&r.isIndex(p)&&p<m.length))return!1;m=m[p]}return!0}e.has=a})(rv)),rv}var l_;function Iz(){return l_||(l_=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=LP(),r=Qx(),n=Az(),s=ew(),a=Tz();function l(u,d){switch(typeof u){case"object":{Object.is(u==null?void 0:u.valueOf(),-0)&&(u="-0");break}case"number":{u=r.toKey(u);break}}return d=n.cloneDeep(d),function(m){const f=s.get(m,u);return f===void 0?a.has(m,u):d===void 0?f===void 0:t.isMatch(f,d)}}e.matchesProperty=l})(Zy)),Zy}var c_;function Dz(){return c_||(c_=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=$P(),r=kz(),n=Ez(),s=Iz();function a(l){if(l==null)return t.identity;switch(typeof l){case"function":return l;case"object":return Array.isArray(l)&&l.length===2?s.matchesProperty(l[0],l[1]):n.matches(l);case"string":case"symbol":case"number":return r.property(l)}}e.iteratee=a})(Ly)),Ly}var u_;function $z(){return u_||(u_=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=xz(),r=$P(),n=jz(),s=Dz();function a(l,u=r.identity){return n.isArrayLikeObject(l)?t.uniqBy(Array.from(l),s.iteratee(u)):[]}e.uniqBy=a})(Ty)),Ty}var av,d_;function Rz(){return d_||(d_=1,av=$z().uniqBy),av}var Mz=Rz();const f_=ai(Mz);function Fz(e,t,r){return t===!0?f_(e,r):typeof t=="function"?f_(e,t):e}var iv={exports:{}},ov={},lv={exports:{}},cv={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var h_;function Lz(){if(h_)return cv;h_=1;var e=iu();function t(p,v){return p===v&&(p!==0||1/p===1/v)||p!==p&&v!==v}var r=typeof Object.is=="function"?Object.is:t,n=e.useState,s=e.useEffect,a=e.useLayoutEffect,l=e.useDebugValue;function u(p,v){var x=v(),w=n({inst:{value:x,getSnapshot:v}}),k=w[0].inst,b=w[1];return a(function(){k.value=x,k.getSnapshot=v,d(k)&&b({inst:k})},[p,x,v]),s(function(){return d(k)&&b({inst:k}),p(function(){d(k)&&b({inst:k})})},[p]),l(x),x}function d(p){var v=p.getSnapshot;p=p.value;try{var x=v();return!r(p,x)}catch{return!0}}function m(p,v){return v()}var f=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?m:u;return cv.useSyncExternalStore=e.useSyncExternalStore!==void 0?e.useSyncExternalStore:f,cv}var m_;function zz(){return m_||(m_=1,lv.exports=Lz()),lv.exports}/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var p_;function Uz(){if(p_)return ov;p_=1;var e=iu(),t=zz();function r(m,f){return m===f&&(m!==0||1/m===1/f)||m!==m&&f!==f}var n=typeof Object.is=="function"?Object.is:r,s=t.useSyncExternalStore,a=e.useRef,l=e.useEffect,u=e.useMemo,d=e.useDebugValue;return ov.useSyncExternalStoreWithSelector=function(m,f,p,v,x){var w=a(null);if(w.current===null){var k={hasValue:!1,value:null};w.current=k}else k=w.current;w=u(function(){function _(A){if(!N){if(N=!0,C=A,A=v(A),x!==void 0&&k.hasValue){var M=k.value;if(x(M,A))return T=M}return T=A}if(M=T,n(C,A))return M;var R=v(A);return x!==void 0&&x(M,R)?(C=A,M):(C=A,T=R)}var N=!1,C,T,P=p===void 0?null:p;return[function(){return _(f())},P===null?void 0:function(){return _(P())}]},[f,p,v,x]);var b=s(m,w[0],w[1]);return l(function(){k.hasValue=!0,k.value=b},[b]),d(b),b},ov}var g_;function Bz(){return g_||(g_=1,iv.exports=Uz()),iv.exports}var Wz=Bz(),nw=y.createContext(null),Vz=e=>e,xn=()=>{var e=y.useContext(nw);return e?e.store.dispatch:Vz},Ah=()=>{},qz=()=>Ah,Hz=(e,t)=>e===t;function Rt(e){var t=y.useContext(nw);return Wz.useSyncExternalStoreWithSelector(t?t.subscription.addNestedSub:qz,t?t.store.getState:Ah,t?t.store.getState:Ah,t?e:Ah,Hz)}function Kz(e,t=`expected a function, instead received ${typeof e}`){if(typeof e!="function")throw new TypeError(t)}function Gz(e,t=`expected an object, instead received ${typeof e}`){if(typeof e!="object")throw new TypeError(t)}function Yz(e,t="expected all items to be functions, instead received the following types: "){if(!e.every(r=>typeof r=="function")){const r=e.map(n=>typeof n=="function"?`function ${n.name||"unnamed"}()`:typeof n).join(", ");throw new TypeError(`${t}[${r}]`)}}var y_=e=>Array.isArray(e)?e:[e];function Jz(e){const t=Array.isArray(e[0])?e[0]:e;return Yz(t,"createSelector expects all input-selectors to be functions, but received the following types: "),t}function Xz(e,t){const r=[],{length:n}=e;for(let s=0;s<n;s++)r.push(e[s].apply(null,t));return r}var Qz=class{constructor(e){this.value=e}deref(){return this.value}},Zz=typeof WeakRef<"u"?WeakRef:Qz,e8=0,v_=1;function uh(){return{s:e8,v:void 0,o:null,p:null}}function VP(e,t={}){let r=uh();const{resultEqualityCheck:n}=t;let s,a=0;function l(){var p;let u=r;const{length:d}=arguments;for(let v=0,x=d;v<x;v++){const w=arguments[v];if(typeof w=="function"||typeof w=="object"&&w!==null){let k=u.o;k===null&&(u.o=k=new WeakMap);const b=k.get(w);b===void 0?(u=uh(),k.set(w,u)):u=b}else{let k=u.p;k===null&&(u.p=k=new Map);const b=k.get(w);b===void 0?(u=uh(),k.set(w,u)):u=b}}const m=u;let f;if(u.s===v_)f=u.v;else if(f=e.apply(null,arguments),a++,n){const v=((p=s==null?void 0:s.deref)==null?void 0:p.call(s))??s;v!=null&&n(v,f)&&(f=v,a!==0&&a--),s=typeof f=="object"&&f!==null||typeof f=="function"?new Zz(f):f}return m.s=v_,m.v=f,f}return l.clearCache=()=>{r=uh(),l.resetResultsCount()},l.resultsCount=()=>a,l.resetResultsCount=()=>{a=0},l}function t8(e,...t){const r=typeof e=="function"?{memoize:e,memoizeOptions:t}:e,n=(...s)=>{let a=0,l=0,u,d={},m=s.pop();typeof m=="object"&&(d=m,m=s.pop()),Kz(m,`createSelector expects an output function after the inputs, but received: [${typeof m}]`);const f={...r,...d},{memoize:p,memoizeOptions:v=[],argsMemoize:x=VP,argsMemoizeOptions:w=[]}=f,k=y_(v),b=y_(w),_=Jz(s),N=p(function(){return a++,m.apply(null,arguments)},...k),C=x(function(){l++;const P=Xz(_,arguments);return u=N.apply(null,P),u},...b);return Object.assign(C,{resultFunc:m,memoizedResultFunc:N,dependencies:_,dependencyRecomputations:()=>l,resetDependencyRecomputations:()=>{l=0},lastResult:()=>u,recomputations:()=>a,resetRecomputations:()=>{a=0},memoize:p,argsMemoize:x})};return Object.assign(n,{withTypes:()=>n}),n}var je=t8(VP),r8=Object.assign((e,t=je)=>{Gz(e,`createStructuredSelector expects first argument to be an object where each property is a selector, instead received a ${typeof e}`);const r=Object.keys(e),n=r.map(a=>e[a]);return t(n,(...a)=>a.reduce((l,u,d)=>(l[r[d]]=u,l),{}))},{withTypes:()=>r8}),uv={},dv={},fv={},x_;function n8(){return x_||(x_=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return typeof n=="symbol"?1:n===null?2:n===void 0?3:n!==n?4:0}const r=(n,s,a)=>{if(n!==s){const l=t(n),u=t(s);if(l===u&&l===0){if(n<s)return a==="desc"?1:-1;if(n>s)return a==="desc"?-1:1}return a==="desc"?u-l:l-u}return 0};e.compareValues=r})(fv)),fv}var hv={},mv={},w_;function qP(){return w_||(w_=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return typeof r=="symbol"||r instanceof Symbol}e.isSymbol=t})(mv)),mv}var b_;function s8(){return b_||(b_=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=qP(),r=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,n=/^\w*$/;function s(a,l){return Array.isArray(a)?!1:typeof a=="number"||typeof a=="boolean"||a==null||t.isSymbol(a)?!0:typeof a=="string"&&(n.test(a)||!r.test(a))||l!=null&&Object.hasOwn(l,a)}e.isKey=s})(hv)),hv}var j_;function a8(){return j_||(j_=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=n8(),r=s8(),n=Zx();function s(a,l,u,d){if(a==null)return[];u=d?void 0:u,Array.isArray(a)||(a=Object.values(a)),Array.isArray(l)||(l=l==null?[null]:[l]),l.length===0&&(l=[null]),Array.isArray(u)||(u=u==null?[]:[u]),u=u.map(x=>String(x));const m=(x,w)=>{let k=x;for(let b=0;b<w.length&&k!=null;++b)k=k[w[b]];return k},f=(x,w)=>w==null||x==null?w:typeof x=="object"&&"key"in x?Object.hasOwn(w,x.key)?w[x.key]:m(w,x.path):typeof x=="function"?x(w):Array.isArray(x)?m(w,x):typeof w=="object"?w[x]:w,p=l.map(x=>(Array.isArray(x)&&x.length===1&&(x=x[0]),x==null||typeof x=="function"||Array.isArray(x)||r.isKey(x)?x:{key:x,path:n.toPath(x)}));return a.map(x=>({original:x,criteria:p.map(w=>f(w,x))})).slice().sort((x,w)=>{for(let k=0;k<p.length;k++){const b=t.compareValues(x.criteria[k],w.criteria[k],u[k]);if(b!==0)return b}return 0}).map(x=>x.original)}e.orderBy=s})(dv)),dv}var pv={},k_;function i8(){return k_||(k_=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r,n=1){const s=[],a=Math.floor(n),l=(u,d)=>{for(let m=0;m<u.length;m++){const f=u[m];Array.isArray(f)&&d<a?l(f,d+1):s.push(f)}};return l(r,0),s}e.flatten=t})(pv)),pv}var gv={},S_;function HP(){return S_||(S_=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=WP(),r=rw(),n=RP(),s=FP();function a(l,u,d){return n.isObject(d)&&(typeof u=="number"&&r.isArrayLike(d)&&t.isIndex(u)&&u<d.length||typeof u=="string"&&u in d)?s.eq(d[u],l):!1}e.isIterateeCall=a})(gv)),gv}var __;function o8(){return __||(__=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=a8(),r=i8(),n=HP();function s(a,...l){const u=l.length;return u>1&&n.isIterateeCall(a,l[0],l[1])?l=[]:u>2&&n.isIterateeCall(l[0],l[1],l[2])&&(l=[l[0]]),t.orderBy(a,r.flatten(l),["asc"])}e.sortBy=s})(uv)),uv}var yv,N_;function l8(){return N_||(N_=1,yv=o8().sortBy),yv}var c8=l8();const tp=ai(c8);var KP=e=>e.legend.settings,u8=e=>e.legend.size,d8=e=>e.legend.payload;je([d8,KP],(e,t)=>{var{itemSorter:r}=t,n=e.flat(1);return r?tp(n,r):n});var dh=1;function f8(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],[t,r]=y.useState({height:0,left:0,top:0,width:0}),n=y.useCallback(s=>{if(s!=null){var a=s.getBoundingClientRect(),l={height:a.height,left:a.left,top:a.top,width:a.width};(Math.abs(l.height-t.height)>dh||Math.abs(l.left-t.left)>dh||Math.abs(l.top-t.top)>dh||Math.abs(l.width-t.width)>dh)&&r({height:l.height,left:l.left,top:l.top,width:l.width})}},[t.width,t.height,t.top,t.left,...e]);return[t,n]}function gs(e){return`Minified Redux error #${e}; visit https://redux.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var h8=typeof Symbol=="function"&&Symbol.observable||"@@observable",C_=h8,vv=()=>Math.random().toString(36).substring(7).split("").join("."),m8={INIT:`@@redux/INIT${vv()}`,REPLACE:`@@redux/REPLACE${vv()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${vv()}`},Zh=m8;function sw(e){if(typeof e!="object"||e===null)return!1;let t=e;for(;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t||Object.getPrototypeOf(e)===null}function GP(e,t,r){if(typeof e!="function")throw new Error(gs(2));if(typeof t=="function"&&typeof r=="function"||typeof r=="function"&&typeof arguments[3]=="function")throw new Error(gs(0));if(typeof t=="function"&&typeof r>"u"&&(r=t,t=void 0),typeof r<"u"){if(typeof r!="function")throw new Error(gs(1));return r(GP)(e,t)}let n=e,s=t,a=new Map,l=a,u=0,d=!1;function m(){l===a&&(l=new Map,a.forEach((b,_)=>{l.set(_,b)}))}function f(){if(d)throw new Error(gs(3));return s}function p(b){if(typeof b!="function")throw new Error(gs(4));if(d)throw new Error(gs(5));let _=!0;m();const N=u++;return l.set(N,b),function(){if(_){if(d)throw new Error(gs(6));_=!1,m(),l.delete(N),a=null}}}function v(b){if(!sw(b))throw new Error(gs(7));if(typeof b.type>"u")throw new Error(gs(8));if(typeof b.type!="string")throw new Error(gs(17));if(d)throw new Error(gs(9));try{d=!0,s=n(s,b)}finally{d=!1}return(a=l).forEach(N=>{N()}),b}function x(b){if(typeof b!="function")throw new Error(gs(10));n=b,v({type:Zh.REPLACE})}function w(){const b=p;return{subscribe(_){if(typeof _!="object"||_===null)throw new Error(gs(11));function N(){const T=_;T.next&&T.next(f())}return N(),{unsubscribe:b(N)}},[C_](){return this}}}return v({type:Zh.INIT}),{dispatch:v,subscribe:p,getState:f,replaceReducer:x,[C_]:w}}function p8(e){Object.keys(e).forEach(t=>{const r=e[t];if(typeof r(void 0,{type:Zh.INIT})>"u")throw new Error(gs(12));if(typeof r(void 0,{type:Zh.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(gs(13))})}function YP(e){const t=Object.keys(e),r={};for(let a=0;a<t.length;a++){const l=t[a];typeof e[l]=="function"&&(r[l]=e[l])}const n=Object.keys(r);let s;try{p8(r)}catch(a){s=a}return function(l={},u){if(s)throw s;let d=!1;const m={};for(let f=0;f<n.length;f++){const p=n[f],v=r[p],x=l[p],w=v(x,u);if(typeof w>"u")throw u&&u.type,new Error(gs(14));m[p]=w,d=d||w!==x}return d=d||n.length!==Object.keys(l).length,d?m:l}}function em(...e){return e.length===0?t=>t:e.length===1?e[0]:e.reduce((t,r)=>(...n)=>t(r(...n)))}function g8(...e){return t=>(r,n)=>{const s=t(r,n);let a=()=>{throw new Error(gs(15))};const l={getState:s.getState,dispatch:(d,...m)=>a(d,...m)},u=e.map(d=>d(l));return a=em(...u)(s.dispatch),{...s,dispatch:a}}}function JP(e){return sw(e)&&"type"in e&&typeof e.type=="string"}var XP=Symbol.for("immer-nothing"),E_=Symbol.for("immer-draftable"),va=Symbol.for("immer-state");function ti(e,...t){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var Ad=Object.getPrototypeOf;function Ll(e){return!!e&&!!e[va]}function ao(e){var t;return e?QP(e)||Array.isArray(e)||!!e[E_]||!!((t=e.constructor)!=null&&t[E_])||Kd(e)||np(e):!1}var y8=Object.prototype.constructor.toString(),P_=new WeakMap;function QP(e){if(!e||typeof e!="object")return!1;const t=Object.getPrototypeOf(e);if(t===null||t===Object.prototype)return!0;const r=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;if(r===Object)return!0;if(typeof r!="function")return!1;let n=P_.get(r);return n===void 0&&(n=Function.toString.call(r),P_.set(r,n)),n===y8}function tm(e,t,r=!0){rp(e)===0?(r?Reflect.ownKeys(e):Object.keys(e)).forEach(s=>{t(s,e[s],e)}):e.forEach((n,s)=>t(s,n,e))}function rp(e){const t=e[va];return t?t.type_:Array.isArray(e)?1:Kd(e)?2:np(e)?3:0}function I0(e,t){return rp(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function ZP(e,t,r){const n=rp(e);n===2?e.set(t,r):n===3?e.add(r):e[t]=r}function v8(e,t){return e===t?e!==0||1/e===1/t:e!==e&&t!==t}function Kd(e){return e instanceof Map}function np(e){return e instanceof Set}function Sl(e){return e.copy_||e.base_}function D0(e,t){if(Kd(e))return new Map(e);if(np(e))return new Set(e);if(Array.isArray(e))return Array.prototype.slice.call(e);const r=QP(e);if(t===!0||t==="class_only"&&!r){const n=Object.getOwnPropertyDescriptors(e);delete n[va];let s=Reflect.ownKeys(n);for(let a=0;a<s.length;a++){const l=s[a],u=n[l];u.writable===!1&&(u.writable=!0,u.configurable=!0),(u.get||u.set)&&(n[l]={configurable:!0,writable:!0,enumerable:u.enumerable,value:e[l]})}return Object.create(Ad(e),n)}else{const n=Ad(e);if(n!==null&&r)return{...e};const s=Object.create(n);return Object.assign(s,e)}}function aw(e,t=!1){return sp(e)||Ll(e)||!ao(e)||(rp(e)>1&&Object.defineProperties(e,{set:fh,add:fh,clear:fh,delete:fh}),Object.freeze(e),t&&Object.values(e).forEach(r=>aw(r,!0))),e}function x8(){ti(2)}var fh={value:x8};function sp(e){return e===null||typeof e!="object"?!0:Object.isFrozen(e)}var w8={};function zl(e){const t=w8[e];return t||ti(0,e),t}var Od;function eA(){return Od}function b8(e,t){return{drafts_:[],parent_:e,immer_:t,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function A_(e,t){t&&(zl("Patches"),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function $0(e){R0(e),e.drafts_.forEach(j8),e.drafts_=null}function R0(e){e===Od&&(Od=e.parent_)}function O_(e){return Od=b8(Od,e)}function j8(e){const t=e[va];t.type_===0||t.type_===1?t.revoke_():t.revoked_=!0}function T_(e,t){t.unfinalizedDrafts_=t.drafts_.length;const r=t.drafts_[0];return e!==void 0&&e!==r?(r[va].modified_&&($0(t),ti(4)),ao(e)&&(e=rm(t,e),t.parent_||nm(t,e)),t.patches_&&zl("Patches").generateReplacementPatches_(r[va].base_,e,t.patches_,t.inversePatches_)):e=rm(t,r,[]),$0(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==XP?e:void 0}function rm(e,t,r){if(sp(t))return t;const n=e.immer_.shouldUseStrictIteration(),s=t[va];if(!s)return tm(t,(a,l)=>I_(e,s,t,a,l,r),n),t;if(s.scope_!==e)return t;if(!s.modified_)return nm(e,s.base_,!0),s.base_;if(!s.finalized_){s.finalized_=!0,s.scope_.unfinalizedDrafts_--;const a=s.copy_;let l=a,u=!1;s.type_===3&&(l=new Set(a),a.clear(),u=!0),tm(l,(d,m)=>I_(e,s,a,d,m,r,u),n),nm(e,a,!1),r&&e.patches_&&zl("Patches").generatePatches_(s,r,e.patches_,e.inversePatches_)}return s.copy_}function I_(e,t,r,n,s,a,l){if(s==null||typeof s!="object"&&!l)return;const u=sp(s);if(!(u&&!l)){if(Ll(s)){const d=a&&t&&t.type_!==3&&!I0(t.assigned_,n)?a.concat(n):void 0,m=rm(e,s,d);if(ZP(r,n,m),Ll(m))e.canAutoFreeze_=!1;else return}else l&&r.add(s);if(ao(s)&&!u){if(!e.immer_.autoFreeze_&&e.unfinalizedDrafts_<1||t&&t.base_&&t.base_[n]===s&&u)return;rm(e,s),(!t||!t.scope_.parent_)&&typeof n!="symbol"&&(Kd(r)?r.has(n):Object.prototype.propertyIsEnumerable.call(r,n))&&nm(e,s)}}}function nm(e,t,r=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&aw(t,r)}function k8(e,t){const r=Array.isArray(e),n={type_:r?1:0,scope_:t?t.scope_:eA(),modified_:!1,finalized_:!1,assigned_:{},parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1};let s=n,a=iw;r&&(s=[n],a=Td);const{revoke:l,proxy:u}=Proxy.revocable(s,a);return n.draft_=u,n.revoke_=l,u}var iw={get(e,t){if(t===va)return e;const r=Sl(e);if(!I0(r,t))return S8(e,r,t);const n=r[t];return e.finalized_||!ao(n)?n:n===xv(e.base_,t)?(wv(e),e.copy_[t]=F0(n,e)):n},has(e,t){return t in Sl(e)},ownKeys(e){return Reflect.ownKeys(Sl(e))},set(e,t,r){const n=tA(Sl(e),t);if(n!=null&&n.set)return n.set.call(e.draft_,r),!0;if(!e.modified_){const s=xv(Sl(e),t),a=s==null?void 0:s[va];if(a&&a.base_===r)return e.copy_[t]=r,e.assigned_[t]=!1,!0;if(v8(r,s)&&(r!==void 0||I0(e.base_,t)))return!0;wv(e),M0(e)}return e.copy_[t]===r&&(r!==void 0||t in e.copy_)||Number.isNaN(r)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=r,e.assigned_[t]=!0),!0},deleteProperty(e,t){return xv(e.base_,t)!==void 0||t in e.base_?(e.assigned_[t]=!1,wv(e),M0(e)):delete e.assigned_[t],e.copy_&&delete e.copy_[t],!0},getOwnPropertyDescriptor(e,t){const r=Sl(e),n=Reflect.getOwnPropertyDescriptor(r,t);return n&&{writable:!0,configurable:e.type_!==1||t!=="length",enumerable:n.enumerable,value:r[t]}},defineProperty(){ti(11)},getPrototypeOf(e){return Ad(e.base_)},setPrototypeOf(){ti(12)}},Td={};tm(iw,(e,t)=>{Td[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}});Td.deleteProperty=function(e,t){return Td.set.call(this,e,t,void 0)};Td.set=function(e,t,r){return iw.set.call(this,e[0],t,r,e[0])};function xv(e,t){const r=e[va];return(r?Sl(r):e)[t]}function S8(e,t,r){var s;const n=tA(t,r);return n?"value"in n?n.value:(s=n.get)==null?void 0:s.call(e.draft_):void 0}function tA(e,t){if(!(t in e))return;let r=Ad(e);for(;r;){const n=Object.getOwnPropertyDescriptor(r,t);if(n)return n;r=Ad(r)}}function M0(e){e.modified_||(e.modified_=!0,e.parent_&&M0(e.parent_))}function wv(e){e.copy_||(e.copy_=D0(e.base_,e.scope_.immer_.useStrictShallowCopy_))}var _8=class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.useStrictIteration_=!0,this.produce=(t,r,n)=>{if(typeof t=="function"&&typeof r!="function"){const a=r;r=t;const l=this;return function(d=a,...m){return l.produce(d,f=>r.call(this,f,...m))}}typeof r!="function"&&ti(6),n!==void 0&&typeof n!="function"&&ti(7);let s;if(ao(t)){const a=O_(this),l=F0(t,void 0);let u=!0;try{s=r(l),u=!1}finally{u?$0(a):R0(a)}return A_(a,n),T_(s,a)}else if(!t||typeof t!="object"){if(s=r(t),s===void 0&&(s=t),s===XP&&(s=void 0),this.autoFreeze_&&aw(s,!0),n){const a=[],l=[];zl("Patches").generateReplacementPatches_(t,s,a,l),n(a,l)}return s}else ti(1,t)},this.produceWithPatches=(t,r)=>{if(typeof t=="function")return(l,...u)=>this.produceWithPatches(l,d=>t(d,...u));let n,s;return[this.produce(t,r,(l,u)=>{n=l,s=u}),n,s]},typeof(e==null?void 0:e.autoFreeze)=="boolean"&&this.setAutoFreeze(e.autoFreeze),typeof(e==null?void 0:e.useStrictShallowCopy)=="boolean"&&this.setUseStrictShallowCopy(e.useStrictShallowCopy),typeof(e==null?void 0:e.useStrictIteration)=="boolean"&&this.setUseStrictIteration(e.useStrictIteration)}createDraft(e){ao(e)||ti(8),Ll(e)&&(e=Qi(e));const t=O_(this),r=F0(e,void 0);return r[va].isManual_=!0,R0(t),r}finishDraft(e,t){const r=e&&e[va];(!r||!r.isManual_)&&ti(9);const{scope_:n}=r;return A_(n,t),T_(void 0,n)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}setUseStrictIteration(e){this.useStrictIteration_=e}shouldUseStrictIteration(){return this.useStrictIteration_}applyPatches(e,t){let r;for(r=t.length-1;r>=0;r--){const s=t[r];if(s.path.length===0&&s.op==="replace"){e=s.value;break}}r>-1&&(t=t.slice(r+1));const n=zl("Patches").applyPatches_;return Ll(e)?n(e,t):this.produce(e,s=>n(s,t))}};function F0(e,t){const r=Kd(e)?zl("MapSet").proxyMap_(e,t):np(e)?zl("MapSet").proxySet_(e,t):k8(e,t);return(t?t.scope_:eA()).drafts_.push(r),r}function Qi(e){return Ll(e)||ti(10,e),rA(e)}function rA(e){if(!ao(e)||sp(e))return e;const t=e[va];let r,n=!0;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,r=D0(e,t.scope_.immer_.useStrictShallowCopy_),n=t.scope_.immer_.shouldUseStrictIteration()}else r=D0(e,!0);return tm(r,(s,a)=>{ZP(r,s,rA(a))},n),t&&(t.finalized_=!1),r}var L0=new _8,nA=L0.produce,N8=L0.setUseStrictIteration.bind(L0);function sA(e){return({dispatch:r,getState:n})=>s=>a=>typeof a=="function"?a(r,n,e):s(a)}var C8=sA(),E8=sA,P8=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?em:em.apply(null,arguments)};function La(e,t){function r(...n){if(t){let s=t(...n);if(!s)throw new Error(ya(0));return{type:e,payload:s.payload,..."meta"in s&&{meta:s.meta},..."error"in s&&{error:s.error}}}return{type:e,payload:n[0]}}return r.toString=()=>`${e}`,r.type=e,r.match=n=>JP(n)&&n.type===e,r}var aA=class fd extends Array{constructor(...t){super(...t),Object.setPrototypeOf(this,fd.prototype)}static get[Symbol.species](){return fd}concat(...t){return super.concat.apply(this,t)}prepend(...t){return t.length===1&&Array.isArray(t[0])?new fd(...t[0].concat(this)):new fd(...t.concat(this))}};function D_(e){return ao(e)?nA(e,()=>{}):e}function hh(e,t,r){return e.has(t)?e.get(t):e.set(t,r(t)).get(t)}function A8(e){return typeof e=="boolean"}var O8=()=>function(t){const{thunk:r=!0,immutableCheck:n=!0,serializableCheck:s=!0,actionCreatorCheck:a=!0}=t??{};let l=new aA;return r&&(A8(r)?l.push(C8):l.push(E8(r.extraArgument))),l},iA="RTK_autoBatch",Ln=()=>e=>({payload:e,meta:{[iA]:!0}}),$_=e=>t=>{setTimeout(t,e)},oA=(e={type:"raf"})=>t=>(...r)=>{const n=t(...r);let s=!0,a=!1,l=!1;const u=new Set,d=e.type==="tick"?queueMicrotask:e.type==="raf"?typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:$_(10):e.type==="callback"?e.queueNotification:$_(e.timeout),m=()=>{l=!1,a&&(a=!1,u.forEach(f=>f()))};return Object.assign({},n,{subscribe(f){const p=()=>s&&f(),v=n.subscribe(p);return u.add(f),()=>{v(),u.delete(f)}},dispatch(f){var p;try{return s=!((p=f==null?void 0:f.meta)!=null&&p[iA]),a=!s,a&&(l||(l=!0,d(m))),n.dispatch(f)}finally{s=!0}}})},T8=e=>function(r){const{autoBatch:n=!0}=r??{};let s=new aA(e);return n&&s.push(oA(typeof n=="object"?n:void 0)),s};function I8(e){const t=O8(),{reducer:r=void 0,middleware:n,devTools:s=!0,preloadedState:a=void 0,enhancers:l=void 0}=e||{};let u;if(typeof r=="function")u=r;else if(sw(r))u=YP(r);else throw new Error(ya(1));let d;typeof n=="function"?d=n(t):d=t();let m=em;s&&(m=P8({trace:!1,...typeof s=="object"&&s}));const f=g8(...d),p=T8(f);let v=typeof l=="function"?l(p):p();const x=m(...v);return GP(u,a,x)}function lA(e){const t={},r=[];let n;const s={addCase(a,l){const u=typeof a=="string"?a:a.type;if(!u)throw new Error(ya(28));if(u in t)throw new Error(ya(29));return t[u]=l,s},addAsyncThunk(a,l){return l.pending&&(t[a.pending.type]=l.pending),l.rejected&&(t[a.rejected.type]=l.rejected),l.fulfilled&&(t[a.fulfilled.type]=l.fulfilled),l.settled&&r.push({matcher:a.settled,reducer:l.settled}),s},addMatcher(a,l){return r.push({matcher:a,reducer:l}),s},addDefaultCase(a){return n=a,s}};return e(s),[t,r,n]}N8(!1);function D8(e){return typeof e=="function"}function $8(e,t){let[r,n,s]=lA(t),a;if(D8(e))a=()=>D_(e());else{const u=D_(e);a=()=>u}function l(u=a(),d){let m=[r[d.type],...n.filter(({matcher:f})=>f(d)).map(({reducer:f})=>f)];return m.filter(f=>!!f).length===0&&(m=[s]),m.reduce((f,p)=>{if(p)if(Ll(f)){const x=p(f,d);return x===void 0?f:x}else{if(ao(f))return nA(f,v=>p(v,d));{const v=p(f,d);if(v===void 0){if(f===null)return f;throw Error("A case reducer on a non-draftable value must not return undefined")}return v}}return f},u)}return l.getInitialState=a,l}var R8="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",M8=(e=21)=>{let t="",r=e;for(;r--;)t+=R8[Math.random()*64|0];return t},F8=Symbol.for("rtk-slice-createasyncthunk");function L8(e,t){return`${e}/${t}`}function z8({creators:e}={}){var r;const t=(r=e==null?void 0:e.asyncThunk)==null?void 0:r[F8];return function(s){const{name:a,reducerPath:l=a}=s;if(!a)throw new Error(ya(11));const u=(typeof s.reducers=="function"?s.reducers(B8()):s.reducers)||{},d=Object.keys(u),m={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},f={addCase(T,P){const A=typeof T=="string"?T:T.type;if(!A)throw new Error(ya(12));if(A in m.sliceCaseReducersByType)throw new Error(ya(13));return m.sliceCaseReducersByType[A]=P,f},addMatcher(T,P){return m.sliceMatchers.push({matcher:T,reducer:P}),f},exposeAction(T,P){return m.actionCreators[T]=P,f},exposeCaseReducer(T,P){return m.sliceCaseReducersByName[T]=P,f}};d.forEach(T=>{const P=u[T],A={reducerName:T,type:L8(a,T),createNotation:typeof s.reducers=="function"};V8(P)?H8(A,P,f,t):W8(A,P,f)});function p(){const[T={},P=[],A=void 0]=typeof s.extraReducers=="function"?lA(s.extraReducers):[s.extraReducers],M={...T,...m.sliceCaseReducersByType};return $8(s.initialState,R=>{for(let K in M)R.addCase(K,M[K]);for(let K of m.sliceMatchers)R.addMatcher(K.matcher,K.reducer);for(let K of P)R.addMatcher(K.matcher,K.reducer);A&&R.addDefaultCase(A)})}const v=T=>T,x=new Map,w=new WeakMap;let k;function b(T,P){return k||(k=p()),k(T,P)}function _(){return k||(k=p()),k.getInitialState()}function N(T,P=!1){function A(R){let K=R[T];return typeof K>"u"&&P&&(K=hh(w,A,_)),K}function M(R=v){const K=hh(x,P,()=>new WeakMap);return hh(K,R,()=>{const B={};for(const[ie,G]of Object.entries(s.selectors??{}))B[ie]=U8(G,R,()=>hh(w,R,_),P);return B})}return{reducerPath:T,getSelectors:M,get selectors(){return M(A)},selectSlice:A}}const C={name:a,reducer:b,actions:m.actionCreators,caseReducers:m.sliceCaseReducersByName,getInitialState:_,...N(l),injectInto(T,{reducerPath:P,...A}={}){const M=P??l;return T.inject({reducerPath:M,reducer:b},A),{...C,...N(M,!0)}}};return C}}function U8(e,t,r,n){function s(a,...l){let u=t(a);return typeof u>"u"&&n&&(u=r()),e(u,...l)}return s.unwrapped=e,s}var ra=z8();function B8(){function e(t,r){return{_reducerDefinitionType:"asyncThunk",payloadCreator:t,...r}}return e.withTypes=()=>e,{reducer(t){return Object.assign({[t.name](...r){return t(...r)}}[t.name],{_reducerDefinitionType:"reducer"})},preparedReducer(t,r){return{_reducerDefinitionType:"reducerWithPrepare",prepare:t,reducer:r}},asyncThunk:e}}function W8({type:e,reducerName:t,createNotation:r},n,s){let a,l;if("reducer"in n){if(r&&!q8(n))throw new Error(ya(17));a=n.reducer,l=n.prepare}else a=n;s.addCase(e,a).exposeCaseReducer(t,a).exposeAction(t,l?La(e,l):La(e))}function V8(e){return e._reducerDefinitionType==="asyncThunk"}function q8(e){return e._reducerDefinitionType==="reducerWithPrepare"}function H8({type:e,reducerName:t},r,n,s){if(!s)throw new Error(ya(18));const{payloadCreator:a,fulfilled:l,pending:u,rejected:d,settled:m,options:f}=r,p=s(e,a,f);n.exposeAction(t,p),l&&n.addCase(p.fulfilled,l),u&&n.addCase(p.pending,u),d&&n.addCase(p.rejected,d),m&&n.addMatcher(p.settled,m),n.exposeCaseReducer(t,{fulfilled:l||mh,pending:u||mh,rejected:d||mh,settled:m||mh})}function mh(){}var K8="task",cA="listener",uA="completed",ow="cancelled",G8=`task-${ow}`,Y8=`task-${uA}`,z0=`${cA}-${ow}`,J8=`${cA}-${uA}`,ap=class{constructor(e){ey(this,"name","TaskAbortError");ey(this,"message");this.code=e,this.message=`${K8} ${ow} (reason: ${e})`}},lw=(e,t)=>{if(typeof e!="function")throw new TypeError(ya(32))},sm=()=>{},dA=(e,t=sm)=>(e.catch(t),e),fA=(e,t)=>(e.addEventListener("abort",t,{once:!0}),()=>e.removeEventListener("abort",t)),Il=(e,t)=>{const r=e.signal;r.aborted||("reason"in r||Object.defineProperty(r,"reason",{enumerable:!0,value:t,configurable:!0,writable:!0}),e.abort(t))},Dl=e=>{if(e.aborted){const{reason:t}=e;throw new ap(t)}};function hA(e,t){let r=sm;return new Promise((n,s)=>{const a=()=>s(new ap(e.reason));if(e.aborted){a();return}r=fA(e,a),t.finally(()=>r()).then(n,s)}).finally(()=>{r=sm})}var X8=async(e,t)=>{try{return await Promise.resolve(),{status:"ok",value:await e()}}catch(r){return{status:r instanceof ap?"cancelled":"rejected",error:r}}finally{t==null||t()}},am=e=>t=>dA(hA(e,t).then(r=>(Dl(e),r))),mA=e=>{const t=am(e);return r=>t(new Promise(n=>setTimeout(n,r)))},{assign:Kc}=Object,R_={},ip="listenerMiddleware",Q8=(e,t)=>{const r=n=>fA(e,()=>Il(n,e.reason));return(n,s)=>{lw(n);const a=new AbortController;r(a);const l=X8(async()=>{Dl(e),Dl(a.signal);const u=await n({pause:am(a.signal),delay:mA(a.signal),signal:a.signal});return Dl(a.signal),u},()=>Il(a,Y8));return s!=null&&s.autoJoin&&t.push(l.catch(sm)),{result:am(e)(l),cancel(){Il(a,G8)}}}},Z8=(e,t)=>{const r=async(n,s)=>{Dl(t);let a=()=>{};const u=[new Promise((d,m)=>{let f=e({predicate:n,effect:(p,v)=>{v.unsubscribe(),d([p,v.getState(),v.getOriginalState()])}});a=()=>{f(),m()}})];s!=null&&u.push(new Promise(d=>setTimeout(d,s,null)));try{const d=await hA(t,Promise.race(u));return Dl(t),d}finally{a()}};return(n,s)=>dA(r(n,s))},pA=e=>{let{type:t,actionCreator:r,matcher:n,predicate:s,effect:a}=e;if(t)s=La(t).match;else if(r)t=r.type,s=r.match;else if(n)s=n;else if(!s)throw new Error(ya(21));return lw(a),{predicate:s,type:t,effect:a}},gA=Kc(e=>{const{type:t,predicate:r,effect:n}=pA(e);return{id:M8(),effect:n,type:t,predicate:r,pending:new Set,unsubscribe:()=>{throw new Error(ya(22))}}},{withTypes:()=>gA}),M_=(e,t)=>{const{type:r,effect:n,predicate:s}=pA(t);return Array.from(e.values()).find(a=>(typeof r=="string"?a.type===r:a.predicate===s)&&a.effect===n)},U0=e=>{e.pending.forEach(t=>{Il(t,z0)})},eU=(e,t)=>()=>{for(const r of t.keys())U0(r);e.clear()},F_=(e,t,r)=>{try{e(t,r)}catch(n){setTimeout(()=>{throw n},0)}},yA=Kc(La(`${ip}/add`),{withTypes:()=>yA}),tU=La(`${ip}/removeAll`),vA=Kc(La(`${ip}/remove`),{withTypes:()=>vA}),rU=(...e)=>{console.error(`${ip}/error`,...e)},Gd=(e={})=>{const t=new Map,r=new Map,n=x=>{const w=r.get(x)??0;r.set(x,w+1)},s=x=>{const w=r.get(x)??1;w===1?r.delete(x):r.set(x,w-1)},{extra:a,onError:l=rU}=e;lw(l);const u=x=>(x.unsubscribe=()=>t.delete(x.id),t.set(x.id,x),w=>{x.unsubscribe(),w!=null&&w.cancelActive&&U0(x)}),d=x=>{const w=M_(t,x)??gA(x);return u(w)};Kc(d,{withTypes:()=>d});const m=x=>{const w=M_(t,x);return w&&(w.unsubscribe(),x.cancelActive&&U0(w)),!!w};Kc(m,{withTypes:()=>m});const f=async(x,w,k,b)=>{const _=new AbortController,N=Z8(d,_.signal),C=[];try{x.pending.add(_),n(x),await Promise.resolve(x.effect(w,Kc({},k,{getOriginalState:b,condition:(T,P)=>N(T,P).then(Boolean),take:N,delay:mA(_.signal),pause:am(_.signal),extra:a,signal:_.signal,fork:Q8(_.signal,C),unsubscribe:x.unsubscribe,subscribe:()=>{t.set(x.id,x)},cancelActiveListeners:()=>{x.pending.forEach((T,P,A)=>{T!==_&&(Il(T,z0),A.delete(T))})},cancel:()=>{Il(_,z0),x.pending.delete(_)},throwIfCancelled:()=>{Dl(_.signal)}})))}catch(T){T instanceof ap||F_(l,T,{raisedBy:"effect"})}finally{await Promise.all(C),Il(_,J8),s(x),x.pending.delete(_)}},p=eU(t,r);return{middleware:x=>w=>k=>{if(!JP(k))return w(k);if(yA.match(k))return d(k.payload);if(tU.match(k)){p();return}if(vA.match(k))return m(k.payload);let b=x.getState();const _=()=>{if(b===R_)throw new Error(ya(23));return b};let N;try{if(N=w(k),t.size>0){const C=x.getState(),T=Array.from(t.values());for(const P of T){let A=!1;try{A=P.predicate(k,C,b)}catch(M){A=!1,F_(l,M,{raisedBy:"predicate"})}A&&f(P,k,x,_)}}}finally{b=R_}return N},startListening:d,stopListening:m,clearListeners:p}};function ya(e){return`Minified Redux Toolkit error #${e}; visit https://redux-toolkit.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var nU={layoutType:"horizontal",width:0,height:0,margin:{top:5,right:5,bottom:5,left:5},scale:1},xA=ra({name:"chartLayout",initialState:nU,reducers:{setLayout(e,t){e.layoutType=t.payload},setChartSize(e,t){e.width=t.payload.width,e.height=t.payload.height},setMargin(e,t){var r,n,s,a;e.margin.top=(r=t.payload.top)!==null&&r!==void 0?r:0,e.margin.right=(n=t.payload.right)!==null&&n!==void 0?n:0,e.margin.bottom=(s=t.payload.bottom)!==null&&s!==void 0?s:0,e.margin.left=(a=t.payload.left)!==null&&a!==void 0?a:0},setScale(e,t){e.scale=t.payload}}}),{setMargin:sU,setLayout:aU,setChartSize:iU,setScale:oU}=xA.actions,lU=xA.reducer;function wA(e,t,r){return Array.isArray(e)&&e&&t+r!==0?e.slice(t,r+1):e}function L_(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Bc(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?L_(Object(r),!0).forEach(function(n){cU(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):L_(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function cU(e,t,r){return(t=uU(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function uU(e){var t=dU(e,"string");return typeof t=="symbol"?t:t+""}function dU(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Us(e,t,r){return rs(e)||rs(t)?r:Pi(t)?Qc(e,t,r):typeof t=="function"?t(e):r}var fU=(e,t,r)=>{if(t&&r){var{width:n,height:s}=r,{align:a,verticalAlign:l,layout:u}=t;if((u==="vertical"||u==="horizontal"&&l==="middle")&&a!=="center"&&Ut(e[a]))return Bc(Bc({},e),{},{[a]:e[a]+(n||0)});if((u==="horizontal"||u==="vertical"&&a==="center")&&l!=="middle"&&Ut(e[l]))return Bc(Bc({},e),{},{[l]:e[l]+(s||0)})}return e},Jl=(e,t)=>e==="horizontal"&&t==="xAxis"||e==="vertical"&&t==="yAxis"||e==="centric"&&t==="angleAxis"||e==="radial"&&t==="radiusAxis",z_=1e-4,hU=e=>{var t=e.domain();if(!(!t||t.length<=2)){var r=t.length,n=e.range(),s=Math.min(n[0],n[1])-z_,a=Math.max(n[0],n[1])+z_,l=e(t[0]),u=e(t[r-1]);(l<s||l>a||u<s||u>a)&&e.domain([t[0],t[r-1]])}},mU=(e,t)=>{if(!t||t.length!==2||!Ut(t[0])||!Ut(t[1]))return e;var r=Math.min(t[0],t[1]),n=Math.max(t[0],t[1]),s=[e[0],e[1]];return(!Ut(e[0])||e[0]<r)&&(s[0]=r),(!Ut(e[1])||e[1]>n)&&(s[1]=n),s[0]>n&&(s[0]=n),s[1]<r&&(s[1]=r),s},pU=e=>{var t=e.length;if(!(t<=0))for(var r=0,n=e[0].length;r<n;++r)for(var s=0,a=0,l=0;l<t;++l){var u=Ei(e[l][r][1])?e[l][r][0]:e[l][r][1];u>=0?(e[l][r][0]=s,e[l][r][1]=s+u,s=e[l][r][1]):(e[l][r][0]=a,e[l][r][1]=a+u,a=e[l][r][1])}},gU=e=>{var t=e.length;if(!(t<=0))for(var r=0,n=e[0].length;r<n;++r)for(var s=0,a=0;a<t;++a){var l=Ei(e[a][r][1])?e[a][r][0]:e[a][r][1];l>=0?(e[a][r][0]=s,e[a][r][1]=s+l,s=e[a][r][1]):(e[a][r][0]=0,e[a][r][1]=0)}},yU={sign:pU,expand:KL,none:Xc,silhouette:GL,wiggle:YL,positive:gU},vU=(e,t,r)=>{var n=yU[r],s=HL().keys(t).value((a,l)=>Number(Us(a,l,0))).order(O0).offset(n);return s(e)};function xU(e){return e==null?void 0:String(e)}var U_=e=>{var{axis:t,ticks:r,offset:n,bandSize:s,entry:a,index:l}=e;if(t.type==="category")return r[l]?r[l].coordinate+n:null;var u=Us(a,t.dataKey,t.scale.domain()[l]);return rs(u)?null:t.scale(u)-s/2+n},wU=e=>{var{numericAxis:t}=e,r=t.scale.domain();if(t.type==="number"){var n=Math.min(r[0],r[1]),s=Math.max(r[0],r[1]);return n<=0&&s>=0?0:s<0?s:n}return r[0]},bU=e=>{var t=e.flat(2).filter(Ut);return[Math.min(...t),Math.max(...t)]},jU=e=>[e[0]===1/0?0:e[0],e[1]===-1/0?0:e[1]],kU=(e,t,r)=>{if(e!=null)return jU(Object.keys(e).reduce((n,s)=>{var a=e[s],{stackedData:l}=a,u=l.reduce((d,m)=>{var f=wA(m,t,r),p=bU(f);return[Math.min(d[0],p[0]),Math.max(d[1],p[1])]},[1/0,-1/0]);return[Math.min(u[0],n[0]),Math.max(u[1],n[1])]},[1/0,-1/0]))},B_=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,W_=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,im=(e,t,r)=>{if(e&&e.scale&&e.scale.bandwidth){var n=e.scale.bandwidth();if(!r||n>0)return n}if(e&&t&&t.length>=2){for(var s=tp(t,f=>f.coordinate),a=1/0,l=1,u=s.length;l<u;l++){var d=s[l],m=s[l-1];a=Math.min((d.coordinate||0)-(m.coordinate||0),a)}return a===1/0?0:a}return r?void 0:0};function V_(e){var{tooltipEntrySettings:t,dataKey:r,payload:n,value:s,name:a}=e;return Bc(Bc({},t),{},{dataKey:r,payload:n,value:s,name:a})}function bA(e,t){if(e)return String(e);if(typeof t=="string")return t}var SU=(e,t)=>{if(t==="horizontal")return e.chartX;if(t==="vertical")return e.chartY},_U=(e,t)=>t==="centric"?e.angle:e.radius,fo=e=>e.layout.width,ho=e=>e.layout.height,NU=e=>e.layout.scale,jA=e=>e.layout.margin,op=je(e=>e.cartesianAxis.xAxis,e=>Object.values(e)),lp=je(e=>e.cartesianAxis.yAxis,e=>Object.values(e)),CU="data-recharts-item-index",EU="data-recharts-item-data-key",Yd=60;function q_(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function ph(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?q_(Object(r),!0).forEach(function(n){PU(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):q_(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function PU(e,t,r){return(t=AU(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function AU(e){var t=OU(e,"string");return typeof t=="symbol"?t:t+""}function OU(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var TU=e=>e.brush.height;function IU(e){var t=lp(e);return t.reduce((r,n)=>{if(n.orientation==="left"&&!n.mirror&&!n.hide){var s=typeof n.width=="number"?n.width:Yd;return r+s}return r},0)}function DU(e){var t=lp(e);return t.reduce((r,n)=>{if(n.orientation==="right"&&!n.mirror&&!n.hide){var s=typeof n.width=="number"?n.width:Yd;return r+s}return r},0)}function $U(e){var t=op(e);return t.reduce((r,n)=>n.orientation==="top"&&!n.mirror&&!n.hide?r+n.height:r,0)}function RU(e){var t=op(e);return t.reduce((r,n)=>n.orientation==="bottom"&&!n.mirror&&!n.hide?r+n.height:r,0)}var ns=je([fo,ho,jA,TU,IU,DU,$U,RU,KP,u8],(e,t,r,n,s,a,l,u,d,m)=>{var f={left:(r.left||0)+s,right:(r.right||0)+a},p={top:(r.top||0)+l,bottom:(r.bottom||0)+u},v=ph(ph({},p),f),x=v.bottom;v.bottom+=n,v=fU(v,d,m);var w=e-v.left-v.right,k=t-v.top-v.bottom;return ph(ph({brushBottom:x},v),{},{width:Math.max(w,0),height:Math.max(k,0)})}),MU=je(ns,e=>({x:e.left,y:e.top,width:e.width,height:e.height})),cw=je(fo,ho,(e,t)=>({x:0,y:0,width:e,height:t})),FU=y.createContext(null),xa=()=>y.useContext(FU)!=null,cp=e=>e.brush,up=je([cp,ns,jA],(e,t,r)=>({height:e.height,x:Ut(e.x)?e.x:t.left,y:Ut(e.y)?e.y:t.top+t.height+t.brushBottom-((r==null?void 0:r.bottom)||0),width:Ut(e.width)?e.width:t.width})),bv={},jv={},kv={},H_;function LU(){return H_||(H_=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r,n,{signal:s,edges:a}={}){let l,u=null;const d=a!=null&&a.includes("leading"),m=a==null||a.includes("trailing"),f=()=>{u!==null&&(r.apply(l,u),l=void 0,u=null)},p=()=>{m&&f(),k()};let v=null;const x=()=>{v!=null&&clearTimeout(v),v=setTimeout(()=>{v=null,p()},n)},w=()=>{v!==null&&(clearTimeout(v),v=null)},k=()=>{w(),l=void 0,u=null},b=()=>{f()},_=function(...N){if(s!=null&&s.aborted)return;l=this,u=N;const C=v==null;x(),d&&C&&f()};return _.schedule=x,_.cancel=k,_.flush=b,s==null||s.addEventListener("abort",k,{once:!0}),_}e.debounce=t})(kv)),kv}var K_;function zU(){return K_||(K_=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=LU();function r(n,s=0,a={}){typeof a!="object"&&(a={});const{leading:l=!1,trailing:u=!0,maxWait:d}=a,m=Array(2);l&&(m[0]="leading"),u&&(m[1]="trailing");let f,p=null;const v=t.debounce(function(...k){f=n.apply(this,k),p=null},s,{edges:m}),x=function(...k){return d!=null&&(p===null&&(p=Date.now()),Date.now()-p>=d)?(f=n.apply(this,k),p=Date.now(),v.cancel(),v.schedule(),f):(v.apply(this,k),f)},w=()=>(v.flush(),f);return x.cancel=v.cancel,x.flush=w,x}e.debounce=r})(jv)),jv}var G_;function UU(){return G_||(G_=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=zU();function r(n,s=0,a={}){const{leading:l=!0,trailing:u=!0}=a;return t.debounce(n,s,{leading:l,maxWait:s,trailing:u})}e.throttle=r})(bv)),bv}var Sv,Y_;function BU(){return Y_||(Y_=1,Sv=UU().throttle),Sv}var WU=BU();const VU=ai(WU);var J_=function(t,r){for(var n=arguments.length,s=new Array(n>2?n-2:0),a=2;a<n;a++)s[a-2]=arguments[a]},kA=(e,t,r)=>{var{width:n="100%",height:s="100%",aspect:a,maxHeight:l}=r,u=so(n)?e:Number(n),d=so(s)?t:Number(s);return a&&a>0&&(u?d=u/a:d&&(u=d*a),l&&d!=null&&d>l&&(d=l)),{calculatedWidth:u,calculatedHeight:d}},qU={width:0,height:0,overflow:"visible"},HU={width:0,overflowX:"visible"},KU={height:0,overflowY:"visible"},GU={},YU=e=>{var{width:t,height:r}=e,n=so(t),s=so(r);return n&&s?qU:n?HU:s?KU:GU};function JU(e){var{width:t,height:r,aspect:n}=e,s=t,a=r;return s===void 0&&a===void 0?(s="100%",a="100%"):s===void 0?s=n&&n>0?void 0:"100%":a===void 0&&(a=n&&n>0?void 0:"100%"),{width:s,height:a}}function vn(e){return Number.isFinite(e)}function el(e){return typeof e=="number"&&e>0&&Number.isFinite(e)}function B0(){return B0=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},B0.apply(null,arguments)}function X_(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Q_(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?X_(Object(r),!0).forEach(function(n){XU(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):X_(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function XU(e,t,r){return(t=QU(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function QU(e){var t=ZU(e,"string");return typeof t=="symbol"?t:t+""}function ZU(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var SA=y.createContext({width:-1,height:-1});function eB(e){return el(e.width)&&el(e.height)}function _A(e){var{children:t,width:r,height:n}=e,s=y.useMemo(()=>({width:r,height:n}),[r,n]);return eB(s)?y.createElement(SA.Provider,{value:s},t):null}var uw=()=>y.useContext(SA),tB=y.forwardRef((e,t)=>{var{aspect:r,initialDimension:n={width:-1,height:-1},width:s,height:a,minWidth:l=0,minHeight:u,maxHeight:d,children:m,debounce:f=0,id:p,className:v,onResize:x,style:w={}}=e,k=y.useRef(null),b=y.useRef();b.current=x,y.useImperativeHandle(t,()=>k.current);var[_,N]=y.useState({containerWidth:n.width,containerHeight:n.height}),C=y.useCallback((R,K)=>{N(B=>{var ie=Math.round(R),G=Math.round(K);return B.containerWidth===ie&&B.containerHeight===G?B:{containerWidth:ie,containerHeight:G}})},[]);y.useEffect(()=>{if(k.current==null||typeof ResizeObserver>"u")return mu;var R=G=>{var ne,{width:W,height:q}=G[0].contentRect;C(W,q),(ne=b.current)===null||ne===void 0||ne.call(b,W,q)};f>0&&(R=VU(R,f,{trailing:!0,leading:!1}));var K=new ResizeObserver(R),{width:B,height:ie}=k.current.getBoundingClientRect();return C(B,ie),K.observe(k.current),()=>{K.disconnect()}},[C,f]);var{containerWidth:T,containerHeight:P}=_;J_(!r||r>0,"The aspect(%s) must be greater than zero.",r);var{calculatedWidth:A,calculatedHeight:M}=kA(T,P,{width:s,height:a,aspect:r,maxHeight:d});return J_(A!=null&&A>0||M!=null&&M>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,A,M,s,a,l,u,r),y.createElement("div",{id:p?"".concat(p):void 0,className:Yr("recharts-responsive-container",v),style:Q_(Q_({},w),{},{width:s,height:a,minWidth:l,minHeight:u,maxHeight:d}),ref:k},y.createElement("div",{style:YU({width:s,height:a})},y.createElement(_A,{width:A,height:M},m)))}),rB=y.forwardRef((e,t)=>{var r=uw();if(el(r.width)&&el(r.height))return e.children;var{width:n,height:s}=JU({width:e.width,height:e.height,aspect:e.aspect}),{calculatedWidth:a,calculatedHeight:l}=kA(void 0,void 0,{width:n,height:s,aspect:e.aspect,maxHeight:e.maxHeight});return Ut(a)&&Ut(l)?y.createElement(_A,{width:a,height:l},e.children):y.createElement(tB,B0({},e,{width:n,height:s,ref:t}))});function NA(e){if(e)return{x:e.x,y:e.y,upperWidth:"upperWidth"in e?e.upperWidth:e.width,lowerWidth:"lowerWidth"in e?e.lowerWidth:e.width,width:e.width,height:e.height}}var dp=()=>{var e,t=xa(),r=Rt(MU),n=Rt(up),s=(e=Rt(cp))===null||e===void 0?void 0:e.padding;return!t||!n||!s?r:{width:n.width-s.left-s.right,height:n.height-s.top-s.bottom,x:s.left,y:s.top}},nB={top:0,bottom:0,left:0,right:0,width:0,height:0,brushBottom:0},sB=()=>{var e;return(e=Rt(ns))!==null&&e!==void 0?e:nB},aB=()=>Rt(fo),iB=()=>Rt(ho),Er=e=>e.layout.layoutType,fp=()=>Rt(Er),oB=()=>{var e=fp();return e!==void 0},hp=e=>{var t=xn(),r=xa(),{width:n,height:s}=e,a=uw(),l=n,u=s;return a&&(l=a.width>0?a.width:n,u=a.height>0?a.height:s),y.useEffect(()=>{!r&&el(l)&&el(u)&&t(iU({width:l,height:u}))},[t,r,l,u]),null},lB={settings:{layout:"horizontal",align:"center",verticalAlign:"middle",itemSorter:"value"},size:{width:0,height:0},payload:[]},CA=ra({name:"legend",initialState:lB,reducers:{setLegendSize(e,t){e.size.width=t.payload.width,e.size.height=t.payload.height},setLegendSettings(e,t){e.settings.align=t.payload.align,e.settings.layout=t.payload.layout,e.settings.verticalAlign=t.payload.verticalAlign,e.settings.itemSorter=t.payload.itemSorter},addLegendPayload:{reducer(e,t){e.payload.push(t.payload)},prepare:Ln()},removeLegendPayload:{reducer(e,t){var r=Qi(e).payload.indexOf(t.payload);r>-1&&e.payload.splice(r,1)},prepare:Ln()}}}),{setLegendSize:bee,setLegendSettings:jee,addLegendPayload:cB,removeLegendPayload:uB}=CA.actions,dB=CA.reducer;function W0(){return W0=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},W0.apply(null,arguments)}function Z_(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function _v(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Z_(Object(r),!0).forEach(function(n){fB(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Z_(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function fB(e,t,r){return(t=hB(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function hB(e){var t=mB(e,"string");return typeof t=="symbol"?t:t+""}function mB(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function pB(e){return Array.isArray(e)&&Pi(e[0])&&Pi(e[1])?e.join(" ~ "):e}var gB=e=>{var{separator:t=" : ",contentStyle:r={},itemStyle:n={},labelStyle:s={},payload:a,formatter:l,itemSorter:u,wrapperClassName:d,labelClassName:m,label:f,labelFormatter:p,accessibilityLayer:v=!1}=e,x=()=>{if(a&&a.length){var P={padding:0,margin:0},A=(u?tp(a,u):a).map((M,R)=>{if(M.type==="none")return null;var K=M.formatter||l||pB,{value:B,name:ie}=M,G=B,ne=ie;if(K){var W=K(B,ie,M,R,a);if(Array.isArray(W))[G,ne]=W;else if(W!=null)G=W;else return null}var q=_v({display:"block",paddingTop:4,paddingBottom:4,color:M.color||"#000"},n);return y.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(R),style:q},Pi(ne)?y.createElement("span",{className:"recharts-tooltip-item-name"},ne):null,Pi(ne)?y.createElement("span",{className:"recharts-tooltip-item-separator"},t):null,y.createElement("span",{className:"recharts-tooltip-item-value"},G),y.createElement("span",{className:"recharts-tooltip-item-unit"},M.unit||""))});return y.createElement("ul",{className:"recharts-tooltip-item-list",style:P},A)}return null},w=_v({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},r),k=_v({margin:0},s),b=!rs(f),_=b?f:"",N=Yr("recharts-default-tooltip",d),C=Yr("recharts-tooltip-label",m);b&&p&&a!==void 0&&a!==null&&(_=p(f,a));var T=v?{role:"status","aria-live":"assertive"}:{};return y.createElement("div",W0({className:N,style:w},T),y.createElement("p",{className:C,style:k},y.isValidElement(_)?_:"".concat(_)),x())},td="recharts-tooltip-wrapper",yB={visibility:"hidden"};function vB(e){var{coordinate:t,translateX:r,translateY:n}=e;return Yr(td,{["".concat(td,"-right")]:Ut(r)&&t&&Ut(t.x)&&r>=t.x,["".concat(td,"-left")]:Ut(r)&&t&&Ut(t.x)&&r<t.x,["".concat(td,"-bottom")]:Ut(n)&&t&&Ut(t.y)&&n>=t.y,["".concat(td,"-top")]:Ut(n)&&t&&Ut(t.y)&&n<t.y})}function e2(e){var{allowEscapeViewBox:t,coordinate:r,key:n,offsetTopLeft:s,position:a,reverseDirection:l,tooltipDimension:u,viewBox:d,viewBoxDimension:m}=e;if(a&&Ut(a[n]))return a[n];var f=r[n]-u-(s>0?s:0),p=r[n]+s;if(t[n])return l[n]?f:p;var v=d[n];if(v==null)return 0;if(l[n]){var x=f,w=v;return x<w?Math.max(p,v):Math.max(f,v)}if(m==null)return 0;var k=p+u,b=v+m;return k>b?Math.max(f,v):Math.max(p,v)}function xB(e){var{translateX:t,translateY:r,useTranslate3d:n}=e;return{transform:n?"translate3d(".concat(t,"px, ").concat(r,"px, 0)"):"translate(".concat(t,"px, ").concat(r,"px)")}}function wB(e){var{allowEscapeViewBox:t,coordinate:r,offsetTopLeft:n,position:s,reverseDirection:a,tooltipBox:l,useTranslate3d:u,viewBox:d}=e,m,f,p;return l.height>0&&l.width>0&&r?(f=e2({allowEscapeViewBox:t,coordinate:r,key:"x",offsetTopLeft:n,position:s,reverseDirection:a,tooltipDimension:l.width,viewBox:d,viewBoxDimension:d.width}),p=e2({allowEscapeViewBox:t,coordinate:r,key:"y",offsetTopLeft:n,position:s,reverseDirection:a,tooltipDimension:l.height,viewBox:d,viewBoxDimension:d.height}),m=xB({translateX:f,translateY:p,useTranslate3d:u})):m=yB,{cssProperties:m,cssClasses:vB({translateX:f,translateY:p,coordinate:r})}}function t2(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function gh(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?t2(Object(r),!0).forEach(function(n){V0(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):t2(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function V0(e,t,r){return(t=bB(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function bB(e){var t=jB(e,"string");return typeof t=="symbol"?t:t+""}function jB(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class kB extends y.PureComponent{constructor(){super(...arguments),V0(this,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0}}),V0(this,"handleKeyDown",t=>{if(t.key==="Escape"){var r,n,s,a;this.setState({dismissed:!0,dismissedAtCoordinate:{x:(r=(n=this.props.coordinate)===null||n===void 0?void 0:n.x)!==null&&r!==void 0?r:0,y:(s=(a=this.props.coordinate)===null||a===void 0?void 0:a.y)!==null&&s!==void 0?s:0}})}})}componentDidMount(){document.addEventListener("keydown",this.handleKeyDown)}componentWillUnmount(){document.removeEventListener("keydown",this.handleKeyDown)}componentDidUpdate(){var t,r;this.state.dismissed&&(((t=this.props.coordinate)===null||t===void 0?void 0:t.x)!==this.state.dismissedAtCoordinate.x||((r=this.props.coordinate)===null||r===void 0?void 0:r.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}render(){var{active:t,allowEscapeViewBox:r,animationDuration:n,animationEasing:s,children:a,coordinate:l,hasPayload:u,isAnimationActive:d,offset:m,position:f,reverseDirection:p,useTranslate3d:v,viewBox:x,wrapperStyle:w,lastBoundingBox:k,innerRef:b,hasPortalFromProps:_}=this.props,{cssClasses:N,cssProperties:C}=wB({allowEscapeViewBox:r,coordinate:l,offsetTopLeft:m,position:f,reverseDirection:p,tooltipBox:{height:k.height,width:k.width},useTranslate3d:v,viewBox:x}),T=_?{}:gh(gh({transition:d&&t?"transform ".concat(n,"ms ").concat(s):void 0},C),{},{pointerEvents:"none",visibility:!this.state.dismissed&&t&&u?"visible":"hidden",position:"absolute",top:0,left:0}),P=gh(gh({},T),{},{visibility:!this.state.dismissed&&t&&u?"visible":"hidden"},w);return y.createElement("div",{xmlns:"http://www.w3.org/1999/xhtml",tabIndex:-1,className:N,style:P,ref:b},a)}}var SB=()=>!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout),pu={devToolsEnabled:!1,isSsr:SB()},EA=()=>{var e;return(e=Rt(t=>t.rootProps.accessibilityLayer))!==null&&e!==void 0?e:!0};function q0(){return q0=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},q0.apply(null,arguments)}function r2(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function n2(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?r2(Object(r),!0).forEach(function(n){_B(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):r2(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function _B(e,t,r){return(t=NB(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function NB(e){var t=CB(e,"string");return typeof t=="symbol"?t:t+""}function CB(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var s2={curveBasisClosed:$L,curveBasisOpen:RL,curveBasis:DL,curveBumpX:wL,curveBumpY:bL,curveLinearClosed:ML,curveLinear:Zm,curveMonotoneX:FL,curveMonotoneY:LL,curveNatural:zL,curveStep:UL,curveStepAfter:WL,curveStepBefore:BL},om=e=>vn(e.x)&&vn(e.y),a2=e=>e.base!=null&&om(e.base)&&om(e),rd=e=>e.x,nd=e=>e.y,EB=(e,t)=>{if(typeof e=="function")return e;var r="curve".concat(Hd(e));return(r==="curveMonotone"||r==="curveBump")&&t?s2["".concat(r).concat(t==="vertical"?"Y":"X")]:s2[r]||Zm},PB=e=>{var{type:t="linear",points:r=[],baseLine:n,layout:s,connectNulls:a=!1}=e,l=EB(t,s),u=a?r.filter(om):r,d;if(Array.isArray(n)){var m=r.map((x,w)=>n2(n2({},x),{},{base:n[w]}));s==="vertical"?d=ch().y(nd).x1(rd).x0(x=>x.base.x):d=ch().x(rd).y1(nd).y0(x=>x.base.y);var f=d.defined(a2).curve(l),p=a?m.filter(a2):m;return f(p)}s==="vertical"&&Ut(n)?d=ch().y(nd).x1(rd).x0(n):Ut(n)?d=ch().x(rd).y1(nd).y0(n):d=xP().x(rd).y(nd);var v=d.defined(om).curve(l);return v(u)},PA=e=>{var{className:t,points:r,path:n,pathRef:s}=e;if((!r||!r.length)&&!n)return null;var a=r&&r.length?PB(e):n;return y.createElement("path",q0({},Zo(e),hz(e),{className:Yr("recharts-curve",t),d:a===null?void 0:a,ref:s}))},AB=["x","y","top","left","width","height","className"];function H0(){return H0=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},H0.apply(null,arguments)}function i2(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function OB(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?i2(Object(r),!0).forEach(function(n){TB(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):i2(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function TB(e,t,r){return(t=IB(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function IB(e){var t=DB(e,"string");return typeof t=="symbol"?t:t+""}function DB(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function $B(e,t){if(e==null)return{};var r,n,s=RB(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function RB(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var MB=(e,t,r,n,s,a)=>"M".concat(e,",").concat(s,"v").concat(n,"M").concat(a,",").concat(t,"h").concat(r),FB=e=>{var{x:t=0,y:r=0,top:n=0,left:s=0,width:a=0,height:l=0,className:u}=e,d=$B(e,AB),m=OB({x:t,y:r,top:n,left:s,width:a,height:l},d);return!Ut(t)||!Ut(r)||!Ut(a)||!Ut(l)||!Ut(n)||!Ut(s)?null:y.createElement("path",H0({},Fa(m),{className:Yr("recharts-cross",u),d:MB(t,r,a,l,n,s)}))};function LB(e,t,r,n){var s=n/2;return{stroke:"none",fill:"#ccc",x:e==="horizontal"?t.x-s:r.left+.5,y:e==="horizontal"?r.top+.5:t.y-s,width:e==="horizontal"?n:r.width-1,height:e==="horizontal"?r.height-1:n}}function o2(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function l2(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?o2(Object(r),!0).forEach(function(n){zB(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):o2(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function zB(e,t,r){return(t=UB(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function UB(e){var t=BB(e,"string");return typeof t=="symbol"?t:t+""}function BB(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var WB=e=>e.replace(/([A-Z])/g,t=>"-".concat(t.toLowerCase())),AA=(e,t,r)=>e.map(n=>"".concat(WB(n)," ").concat(t,"ms ").concat(r)).join(","),VB=(e,t)=>[Object.keys(e),Object.keys(t)].reduce((r,n)=>r.filter(s=>n.includes(s))),Id=(e,t)=>Object.keys(t).reduce((r,n)=>l2(l2({},r),{},{[n]:e(n,t[n])}),{});function c2(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Fn(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?c2(Object(r),!0).forEach(function(n){qB(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):c2(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function qB(e,t,r){return(t=HB(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function HB(e){var t=KB(e,"string");return typeof t=="symbol"?t:t+""}function KB(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var lm=(e,t,r)=>e+(t-e)*r,K0=e=>{var{from:t,to:r}=e;return t!==r},OA=(e,t,r)=>{var n=Id((s,a)=>{if(K0(a)){var[l,u]=e(a.from,a.to,a.velocity);return Fn(Fn({},a),{},{from:l,velocity:u})}return a},t);return r<1?Id((s,a)=>K0(a)?Fn(Fn({},a),{},{velocity:lm(a.velocity,n[s].velocity,r),from:lm(a.from,n[s].from,r)}):a,t):OA(e,n,r-1)};function GB(e,t,r,n,s,a){var l,u=n.reduce((v,x)=>Fn(Fn({},v),{},{[x]:{from:e[x],velocity:0,to:t[x]}}),{}),d=()=>Id((v,x)=>x.from,u),m=()=>!Object.values(u).filter(K0).length,f=null,p=v=>{l||(l=v);var x=v-l,w=x/r.dt;u=OA(r,u,w),s(Fn(Fn(Fn({},e),t),d())),l=v,m()||(f=a.setTimeout(p))};return()=>(f=a.setTimeout(p),()=>{var v;(v=f)===null||v===void 0||v()})}function YB(e,t,r,n,s,a,l){var u=null,d=s.reduce((p,v)=>Fn(Fn({},p),{},{[v]:[e[v],t[v]]}),{}),m,f=p=>{m||(m=p);var v=(p-m)/n,x=Id((k,b)=>lm(...b,r(v)),d);if(a(Fn(Fn(Fn({},e),t),x)),v<1)u=l.setTimeout(f);else{var w=Id((k,b)=>lm(...b,r(1)),d);a(Fn(Fn(Fn({},e),t),w))}};return()=>(u=l.setTimeout(f),()=>{var p;(p=u)===null||p===void 0||p()})}const JB=(e,t,r,n,s,a)=>{var l=VB(e,t);return r==null?()=>(s(Fn(Fn({},e),t)),()=>{}):r.isStepper===!0?GB(e,t,r,l,s,a):YB(e,t,r,n,l,s,a)};var cm=1e-4,TA=(e,t)=>[0,3*e,3*t-6*e,3*e-3*t+1],IA=(e,t)=>e.map((r,n)=>r*t**n).reduce((r,n)=>r+n),u2=(e,t)=>r=>{var n=TA(e,t);return IA(n,r)},XB=(e,t)=>r=>{var n=TA(e,t),s=[...n.map((a,l)=>a*l).slice(1),0];return IA(s,r)},QB=function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];if(r.length===1)switch(r[0]){case"linear":return[0,0,1,1];case"ease":return[.25,.1,.25,1];case"ease-in":return[.42,0,1,1];case"ease-out":return[.42,0,.58,1];case"ease-in-out":return[0,0,.58,1];default:{var s,a=r[0].split("(");if(a[0]==="cubic-bezier"&&((s=a[1])===null||s===void 0?void 0:s.split(")")[0].split(",").length)===4){var l=a[1].split(")")[0].split(",").map(u=>parseFloat(u));return[l[0],l[1],l[2],l[3]]}}}return r.length===4?r:[0,0,1,1]},ZB=(e,t,r,n)=>{var s=u2(e,r),a=u2(t,n),l=XB(e,r),u=m=>m>1?1:m<0?0:m,d=m=>{for(var f=m>1?1:m,p=f,v=0;v<8;++v){var x=s(p)-f,w=l(p);if(Math.abs(x-f)<cm||w<cm)return a(p);p=u(p-x/w)}return a(p)};return d.isStepper=!1,d},d2=function(){return ZB(...QB(...arguments))},e7=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},{stiff:r=100,damping:n=8,dt:s=17}=t,a=(l,u,d)=>{var m=-(l-u)*r,f=d*n,p=d+(m-f)*s/1e3,v=d*s/1e3+l;return Math.abs(v-u)<cm&&Math.abs(p)<cm?[u,0]:[v,p]};return a.isStepper=!0,a.dt=s,a},t7=e=>{if(typeof e=="string")switch(e){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return d2(e);case"spring":return e7();default:if(e.split("(")[0]==="cubic-bezier")return d2(e)}return typeof e=="function"?e:null};function r7(e){var t,r=()=>null,n=!1,s=null,a=l=>{if(!n){if(Array.isArray(l)){if(!l.length)return;var u=l,[d,...m]=u;if(typeof d=="number"){s=e.setTimeout(a.bind(null,m),d);return}a(d),s=e.setTimeout(a.bind(null,m));return}typeof l=="string"&&(t=l,r(t)),typeof l=="object"&&(t=l,r(t)),typeof l=="function"&&l()}};return{stop:()=>{n=!0},start:l=>{n=!1,s&&(s(),s=null),a(l)},subscribe:l=>(r=l,()=>{r=()=>null}),getTimeoutController:()=>e}}class n7{setTimeout(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=performance.now(),s=null,a=l=>{l-n>=r?t(l):typeof requestAnimationFrame=="function"&&(s=requestAnimationFrame(a))};return s=requestAnimationFrame(a),()=>{s!=null&&cancelAnimationFrame(s)}}}function s7(){return r7(new n7)}var a7=y.createContext(s7);function i7(e,t){var r=y.useContext(a7);return y.useMemo(()=>t??r(e),[e,t,r])}var o7={begin:0,duration:1e3,easing:"ease",isActive:!0,canBegin:!0,onAnimationEnd:()=>{},onAnimationStart:()=>{}},f2={t:0},Nv={t:1};function dw(e){var t=Ua(e,o7),{isActive:r,canBegin:n,duration:s,easing:a,begin:l,onAnimationEnd:u,onAnimationStart:d,children:m}=t,f=i7(t.animationId,t.animationManager),[p,v]=y.useState(r?f2:Nv),x=y.useRef(null);return y.useEffect(()=>{r||v(Nv)},[r]),y.useEffect(()=>{if(!r||!n)return mu;var w=JB(f2,Nv,t7(a),s,v,f.getTimeoutController()),k=()=>{x.current=w()};return f.start([d,l,k,s,u]),()=>{f.stop(),x.current&&x.current(),u()}},[r,n,s,a,l,d,u,f]),m(p.t)}function fw(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"animation-",r=y.useRef(Pd(t)),n=y.useRef(e);return n.current!==e&&(r.current=Pd(t),n.current=e),r.current}var l7=["radius"],c7=["radius"];function h2(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function m2(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?h2(Object(r),!0).forEach(function(n){u7(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):h2(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function u7(e,t,r){return(t=d7(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function d7(e){var t=f7(e,"string");return typeof t=="symbol"?t:t+""}function f7(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function um(){return um=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},um.apply(null,arguments)}function p2(e,t){if(e==null)return{};var r,n,s=h7(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function h7(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var g2=(e,t,r,n,s)=>{var a=Math.min(Math.abs(r)/2,Math.abs(n)/2),l=n>=0?1:-1,u=r>=0?1:-1,d=n>=0&&r>=0||n<0&&r<0?1:0,m;if(a>0&&s instanceof Array){for(var f=[0,0,0,0],p=0,v=4;p<v;p++)f[p]=s[p]>a?a:s[p];m="M".concat(e,",").concat(t+l*f[0]),f[0]>0&&(m+="A ".concat(f[0],",").concat(f[0],",0,0,").concat(d,",").concat(e+u*f[0],",").concat(t)),m+="L ".concat(e+r-u*f[1],",").concat(t),f[1]>0&&(m+="A ".concat(f[1],",").concat(f[1],",0,0,").concat(d,`,
        `).concat(e+r,",").concat(t+l*f[1])),m+="L ".concat(e+r,",").concat(t+n-l*f[2]),f[2]>0&&(m+="A ".concat(f[2],",").concat(f[2],",0,0,").concat(d,`,
        `).concat(e+r-u*f[2],",").concat(t+n)),m+="L ".concat(e+u*f[3],",").concat(t+n),f[3]>0&&(m+="A ".concat(f[3],",").concat(f[3],",0,0,").concat(d,`,
        `).concat(e,",").concat(t+n-l*f[3])),m+="Z"}else if(a>0&&s===+s&&s>0){var x=Math.min(a,s);m="M ".concat(e,",").concat(t+l*x,`
            A `).concat(x,",").concat(x,",0,0,").concat(d,",").concat(e+u*x,",").concat(t,`
            L `).concat(e+r-u*x,",").concat(t,`
            A `).concat(x,",").concat(x,",0,0,").concat(d,",").concat(e+r,",").concat(t+l*x,`
            L `).concat(e+r,",").concat(t+n-l*x,`
            A `).concat(x,",").concat(x,",0,0,").concat(d,",").concat(e+r-u*x,",").concat(t+n,`
            L `).concat(e+u*x,",").concat(t+n,`
            A `).concat(x,",").concat(x,",0,0,").concat(d,",").concat(e,",").concat(t+n-l*x," Z")}else m="M ".concat(e,",").concat(t," h ").concat(r," v ").concat(n," h ").concat(-r," Z");return m},y2={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},DA=e=>{var t=Ua(e,y2),r=y.useRef(null),[n,s]=y.useState(-1);y.useEffect(()=>{if(r.current&&r.current.getTotalLength)try{var $=r.current.getTotalLength();$&&s($)}catch{}},[]);var{x:a,y:l,width:u,height:d,radius:m,className:f}=t,{animationEasing:p,animationDuration:v,animationBegin:x,isAnimationActive:w,isUpdateAnimationActive:k}=t,b=y.useRef(u),_=y.useRef(d),N=y.useRef(a),C=y.useRef(l),T=y.useMemo(()=>({x:a,y:l,width:u,height:d,radius:m}),[a,l,u,d,m]),P=fw(T,"rectangle-");if(a!==+a||l!==+l||u!==+u||d!==+d||u===0||d===0)return null;var A=Yr("recharts-rectangle",f);if(!k){var M=Fa(t),{radius:R}=M,K=p2(M,l7);return y.createElement("path",um({},K,{radius:typeof m=="number"?m:void 0,className:A,d:g2(a,l,u,d,m)}))}var B=b.current,ie=_.current,G=N.current,ne=C.current,W="0px ".concat(n===-1?1:n,"px"),q="".concat(n,"px 0px"),ve=AA(["strokeDasharray"],v,typeof p=="string"?p:y2.animationEasing);return y.createElement(dw,{animationId:P,key:P,canBegin:n>0,duration:v,easing:p,isActive:k,begin:x},$=>{var H=xs(B,u,$),ce=xs(ie,d,$),le=xs(G,a,$),U=xs(ne,l,$);r.current&&(b.current=H,_.current=ce,N.current=le,C.current=U);var te;w?$>0?te={transition:ve,strokeDasharray:q}:te={strokeDasharray:W}:te={strokeDasharray:q};var he=Fa(t),{radius:$e}=he,Pe=p2(he,c7);return y.createElement("path",um({},Pe,{radius:typeof m=="number"?m:void 0,className:A,d:g2(le,U,H,ce,m),ref:r,style:m2(m2({},te),t.style)}))})};function v2(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function x2(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?v2(Object(r),!0).forEach(function(n){m7(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):v2(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function m7(e,t,r){return(t=p7(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function p7(e){var t=g7(e,"string");return typeof t=="symbol"?t:t+""}function g7(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var dm=Math.PI/180,y7=e=>e*180/Math.PI,ws=(e,t,r,n)=>({x:e+Math.cos(-dm*n)*r,y:t+Math.sin(-dm*n)*r}),v7=function(t,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{top:0,right:0,bottom:0,left:0};return Math.min(Math.abs(t-(n.left||0)-(n.right||0)),Math.abs(r-(n.top||0)-(n.bottom||0)))/2},x7=(e,t)=>{var{x:r,y:n}=e,{x:s,y:a}=t;return Math.sqrt((r-s)**2+(n-a)**2)},w7=(e,t)=>{var{x:r,y:n}=e,{cx:s,cy:a}=t,l=x7({x:r,y:n},{x:s,y:a});if(l<=0)return{radius:l,angle:0};var u=(r-s)/l,d=Math.acos(u);return n>a&&(d=2*Math.PI-d),{radius:l,angle:y7(d),angleInRadian:d}},b7=e=>{var{startAngle:t,endAngle:r}=e,n=Math.floor(t/360),s=Math.floor(r/360),a=Math.min(n,s);return{startAngle:t-a*360,endAngle:r-a*360}},j7=(e,t)=>{var{startAngle:r,endAngle:n}=t,s=Math.floor(r/360),a=Math.floor(n/360),l=Math.min(s,a);return e+l*360},k7=(e,t)=>{var{chartX:r,chartY:n}=e,{radius:s,angle:a}=w7({x:r,y:n},t),{innerRadius:l,outerRadius:u}=t;if(s<l||s>u||s===0)return null;var{startAngle:d,endAngle:m}=b7(t),f=a,p;if(d<=m){for(;f>m;)f-=360;for(;f<d;)f+=360;p=f>=d&&f<=m}else{for(;f>d;)f-=360;for(;f<m;)f+=360;p=f>=m&&f<=d}return p?x2(x2({},t),{},{radius:s,angle:j7(f,t)}):null};function $A(e){var{cx:t,cy:r,radius:n,startAngle:s,endAngle:a}=e,l=ws(t,r,n,s),u=ws(t,r,n,a);return{points:[l,u],cx:t,cy:r,radius:n,startAngle:s,endAngle:a}}function G0(){return G0=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},G0.apply(null,arguments)}var S7=(e,t)=>{var r=pa(t-e),n=Math.min(Math.abs(t-e),359.999);return r*n},yh=e=>{var{cx:t,cy:r,radius:n,angle:s,sign:a,isExternal:l,cornerRadius:u,cornerIsExternal:d}=e,m=u*(l?1:-1)+n,f=Math.asin(u/m)/dm,p=d?s:s+a*f,v=ws(t,r,m,p),x=ws(t,r,n,p),w=d?s-a*f:s,k=ws(t,r,m*Math.cos(f*dm),w);return{center:v,circleTangency:x,lineTangency:k,theta:f}},RA=e=>{var{cx:t,cy:r,innerRadius:n,outerRadius:s,startAngle:a,endAngle:l}=e,u=S7(a,l),d=a+u,m=ws(t,r,s,a),f=ws(t,r,s,d),p="M ".concat(m.x,",").concat(m.y,`
    A `).concat(s,",").concat(s,`,0,
    `).concat(+(Math.abs(u)>180),",").concat(+(a>d),`,
    `).concat(f.x,",").concat(f.y,`
  `);if(n>0){var v=ws(t,r,n,a),x=ws(t,r,n,d);p+="L ".concat(x.x,",").concat(x.y,`
            A `).concat(n,",").concat(n,`,0,
            `).concat(+(Math.abs(u)>180),",").concat(+(a<=d),`,
            `).concat(v.x,",").concat(v.y," Z")}else p+="L ".concat(t,",").concat(r," Z");return p},_7=e=>{var{cx:t,cy:r,innerRadius:n,outerRadius:s,cornerRadius:a,forceCornerRadius:l,cornerIsExternal:u,startAngle:d,endAngle:m}=e,f=pa(m-d),{circleTangency:p,lineTangency:v,theta:x}=yh({cx:t,cy:r,radius:s,angle:d,sign:f,cornerRadius:a,cornerIsExternal:u}),{circleTangency:w,lineTangency:k,theta:b}=yh({cx:t,cy:r,radius:s,angle:m,sign:-f,cornerRadius:a,cornerIsExternal:u}),_=u?Math.abs(d-m):Math.abs(d-m)-x-b;if(_<0)return l?"M ".concat(v.x,",").concat(v.y,`
        a`).concat(a,",").concat(a,",0,0,1,").concat(a*2,`,0
        a`).concat(a,",").concat(a,",0,0,1,").concat(-a*2,`,0
      `):RA({cx:t,cy:r,innerRadius:n,outerRadius:s,startAngle:d,endAngle:m});var N="M ".concat(v.x,",").concat(v.y,`
    A`).concat(a,",").concat(a,",0,0,").concat(+(f<0),",").concat(p.x,",").concat(p.y,`
    A`).concat(s,",").concat(s,",0,").concat(+(_>180),",").concat(+(f<0),",").concat(w.x,",").concat(w.y,`
    A`).concat(a,",").concat(a,",0,0,").concat(+(f<0),",").concat(k.x,",").concat(k.y,`
  `);if(n>0){var{circleTangency:C,lineTangency:T,theta:P}=yh({cx:t,cy:r,radius:n,angle:d,sign:f,isExternal:!0,cornerRadius:a,cornerIsExternal:u}),{circleTangency:A,lineTangency:M,theta:R}=yh({cx:t,cy:r,radius:n,angle:m,sign:-f,isExternal:!0,cornerRadius:a,cornerIsExternal:u}),K=u?Math.abs(d-m):Math.abs(d-m)-P-R;if(K<0&&a===0)return"".concat(N,"L").concat(t,",").concat(r,"Z");N+="L".concat(M.x,",").concat(M.y,`
      A`).concat(a,",").concat(a,",0,0,").concat(+(f<0),",").concat(A.x,",").concat(A.y,`
      A`).concat(n,",").concat(n,",0,").concat(+(K>180),",").concat(+(f>0),",").concat(C.x,",").concat(C.y,`
      A`).concat(a,",").concat(a,",0,0,").concat(+(f<0),",").concat(T.x,",").concat(T.y,"Z")}else N+="L".concat(t,",").concat(r,"Z");return N},N7={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},MA=e=>{var t=Ua(e,N7),{cx:r,cy:n,innerRadius:s,outerRadius:a,cornerRadius:l,forceCornerRadius:u,cornerIsExternal:d,startAngle:m,endAngle:f,className:p}=t;if(a<s||m===f)return null;var v=Yr("recharts-sector",p),x=a-s,w=si(l,x,0,!0),k;return w>0&&Math.abs(m-f)<360?k=_7({cx:r,cy:n,innerRadius:s,outerRadius:a,cornerRadius:Math.min(w,x/2),forceCornerRadius:u,cornerIsExternal:d,startAngle:m,endAngle:f}):k=RA({cx:r,cy:n,innerRadius:s,outerRadius:a,startAngle:m,endAngle:f}),y.createElement("path",G0({},Fa(t),{className:v,d:k}))};function C7(e,t,r){if(e==="horizontal")return[{x:t.x,y:r.top},{x:t.x,y:r.top+r.height}];if(e==="vertical")return[{x:r.left,y:t.y},{x:r.left+r.width,y:t.y}];if(DP(t)){if(e==="centric"){var{cx:n,cy:s,innerRadius:a,outerRadius:l,angle:u}=t,d=ws(n,s,a,u),m=ws(n,s,l,u);return[{x:d.x,y:d.y},{x:m.x,y:m.y}]}return $A(t)}}var Cv={},Ev={},Pv={},w2;function E7(){return w2||(w2=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=qP();function r(n){return t.isSymbol(n)?NaN:Number(n)}e.toNumber=r})(Pv)),Pv}var b2;function P7(){return b2||(b2=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=E7();function r(n){return n?(n=t.toNumber(n),n===1/0||n===-1/0?(n<0?-1:1)*Number.MAX_VALUE:n===n?n:0):n===0?n:0}e.toFinite=r})(Ev)),Ev}var j2;function A7(){return j2||(j2=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=HP(),r=P7();function n(s,a,l){l&&typeof l!="number"&&t.isIterateeCall(s,a,l)&&(a=l=void 0),s=r.toFinite(s),a===void 0?(a=s,s=0):a=r.toFinite(a),l=l===void 0?s<a?1:-1:r.toFinite(l);const u=Math.max(Math.ceil((a-s)/(l||1)),0),d=new Array(u);for(let m=0;m<u;m++)d[m]=s,s+=l;return d}e.range=n})(Cv)),Cv}var Av,k2;function O7(){return k2||(k2=1,Av=A7().range),Av}var T7=O7();const FA=ai(T7);function Jo(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function I7(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function hw(e){let t,r,n;e.length!==2?(t=Jo,r=(u,d)=>Jo(e(u),d),n=(u,d)=>e(u)-d):(t=e===Jo||e===I7?e:D7,r=e,n=e);function s(u,d,m=0,f=u.length){if(m<f){if(t(d,d)!==0)return f;do{const p=m+f>>>1;r(u[p],d)<0?m=p+1:f=p}while(m<f)}return m}function a(u,d,m=0,f=u.length){if(m<f){if(t(d,d)!==0)return f;do{const p=m+f>>>1;r(u[p],d)<=0?m=p+1:f=p}while(m<f)}return m}function l(u,d,m=0,f=u.length){const p=s(u,d,m,f-1);return p>m&&n(u[p-1],d)>-n(u[p],d)?p-1:p}return{left:s,center:l,right:a}}function D7(){return 0}function LA(e){return e===null?NaN:+e}function*$7(e,t){for(let r of e)r!=null&&(r=+r)>=r&&(yield r)}const R7=hw(Jo),Jd=R7.right;hw(LA).center;class S2 extends Map{constructor(t,r=L7){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:r}}),t!=null)for(const[n,s]of t)this.set(n,s)}get(t){return super.get(_2(this,t))}has(t){return super.has(_2(this,t))}set(t,r){return super.set(M7(this,t),r)}delete(t){return super.delete(F7(this,t))}}function _2({_intern:e,_key:t},r){const n=t(r);return e.has(n)?e.get(n):r}function M7({_intern:e,_key:t},r){const n=t(r);return e.has(n)?e.get(n):(e.set(n,r),r)}function F7({_intern:e,_key:t},r){const n=t(r);return e.has(n)&&(r=e.get(n),e.delete(n)),r}function L7(e){return e!==null&&typeof e=="object"?e.valueOf():e}function z7(e=Jo){if(e===Jo)return zA;if(typeof e!="function")throw new TypeError("compare is not a function");return(t,r)=>{const n=e(t,r);return n||n===0?n:(e(r,r)===0)-(e(t,t)===0)}}function zA(e,t){return(e==null||!(e>=e))-(t==null||!(t>=t))||(e<t?-1:e>t?1:0)}const U7=Math.sqrt(50),B7=Math.sqrt(10),W7=Math.sqrt(2);function fm(e,t,r){const n=(t-e)/Math.max(0,r),s=Math.floor(Math.log10(n)),a=n/Math.pow(10,s),l=a>=U7?10:a>=B7?5:a>=W7?2:1;let u,d,m;return s<0?(m=Math.pow(10,-s)/l,u=Math.round(e*m),d=Math.round(t*m),u/m<e&&++u,d/m>t&&--d,m=-m):(m=Math.pow(10,s)*l,u=Math.round(e/m),d=Math.round(t/m),u*m<e&&++u,d*m>t&&--d),d<u&&.5<=r&&r<2?fm(e,t,r*2):[u,d,m]}function Y0(e,t,r){if(t=+t,e=+e,r=+r,!(r>0))return[];if(e===t)return[e];const n=t<e,[s,a,l]=n?fm(t,e,r):fm(e,t,r);if(!(a>=s))return[];const u=a-s+1,d=new Array(u);if(n)if(l<0)for(let m=0;m<u;++m)d[m]=(a-m)/-l;else for(let m=0;m<u;++m)d[m]=(a-m)*l;else if(l<0)for(let m=0;m<u;++m)d[m]=(s+m)/-l;else for(let m=0;m<u;++m)d[m]=(s+m)*l;return d}function J0(e,t,r){return t=+t,e=+e,r=+r,fm(e,t,r)[2]}function X0(e,t,r){t=+t,e=+e,r=+r;const n=t<e,s=n?J0(t,e,r):J0(e,t,r);return(n?-1:1)*(s<0?1/-s:s)}function N2(e,t){let r;for(const n of e)n!=null&&(r<n||r===void 0&&n>=n)&&(r=n);return r}function C2(e,t){let r;for(const n of e)n!=null&&(r>n||r===void 0&&n>=n)&&(r=n);return r}function UA(e,t,r=0,n=1/0,s){if(t=Math.floor(t),r=Math.floor(Math.max(0,r)),n=Math.floor(Math.min(e.length-1,n)),!(r<=t&&t<=n))return e;for(s=s===void 0?zA:z7(s);n>r;){if(n-r>600){const d=n-r+1,m=t-r+1,f=Math.log(d),p=.5*Math.exp(2*f/3),v=.5*Math.sqrt(f*p*(d-p)/d)*(m-d/2<0?-1:1),x=Math.max(r,Math.floor(t-m*p/d+v)),w=Math.min(n,Math.floor(t+(d-m)*p/d+v));UA(e,t,x,w,s)}const a=e[t];let l=r,u=n;for(sd(e,r,t),s(e[n],a)>0&&sd(e,r,n);l<u;){for(sd(e,l,u),++l,--u;s(e[l],a)<0;)++l;for(;s(e[u],a)>0;)--u}s(e[r],a)===0?sd(e,r,u):(++u,sd(e,u,n)),u<=t&&(r=u+1),t<=u&&(n=u-1)}return e}function sd(e,t,r){const n=e[t];e[t]=e[r],e[r]=n}function V7(e,t,r){if(e=Float64Array.from($7(e)),!(!(n=e.length)||isNaN(t=+t))){if(t<=0||n<2)return C2(e);if(t>=1)return N2(e);var n,s=(n-1)*t,a=Math.floor(s),l=N2(UA(e,a).subarray(0,a+1)),u=C2(e.subarray(a+1));return l+(u-l)*(s-a)}}function q7(e,t,r=LA){if(!(!(n=e.length)||isNaN(t=+t))){if(t<=0||n<2)return+r(e[0],0,e);if(t>=1)return+r(e[n-1],n-1,e);var n,s=(n-1)*t,a=Math.floor(s),l=+r(e[a],a,e),u=+r(e[a+1],a+1,e);return l+(u-l)*(s-a)}}function H7(e,t,r){e=+e,t=+t,r=(s=arguments.length)<2?(t=e,e=0,1):s<3?1:+r;for(var n=-1,s=Math.max(0,Math.ceil((t-e)/r))|0,a=new Array(s);++n<s;)a[n]=e+n*r;return a}function Ba(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}function mo(e,t){switch(arguments.length){case 0:break;case 1:{typeof e=="function"?this.interpolator(e):this.range(e);break}default:{this.domain(e),typeof t=="function"?this.interpolator(t):this.range(t);break}}return this}const Q0=Symbol("implicit");function mw(){var e=new S2,t=[],r=[],n=Q0;function s(a){let l=e.get(a);if(l===void 0){if(n!==Q0)return n;e.set(a,l=t.push(a)-1)}return r[l%r.length]}return s.domain=function(a){if(!arguments.length)return t.slice();t=[],e=new S2;for(const l of a)e.has(l)||e.set(l,t.push(l)-1);return s},s.range=function(a){return arguments.length?(r=Array.from(a),s):r.slice()},s.unknown=function(a){return arguments.length?(n=a,s):n},s.copy=function(){return mw(t,r).unknown(n)},Ba.apply(s,arguments),s}function pw(){var e=mw().unknown(void 0),t=e.domain,r=e.range,n=0,s=1,a,l,u=!1,d=0,m=0,f=.5;delete e.unknown;function p(){var v=t().length,x=s<n,w=x?s:n,k=x?n:s;a=(k-w)/Math.max(1,v-d+m*2),u&&(a=Math.floor(a)),w+=(k-w-a*(v-d))*f,l=a*(1-d),u&&(w=Math.round(w),l=Math.round(l));var b=H7(v).map(function(_){return w+a*_});return r(x?b.reverse():b)}return e.domain=function(v){return arguments.length?(t(v),p()):t()},e.range=function(v){return arguments.length?([n,s]=v,n=+n,s=+s,p()):[n,s]},e.rangeRound=function(v){return[n,s]=v,n=+n,s=+s,u=!0,p()},e.bandwidth=function(){return l},e.step=function(){return a},e.round=function(v){return arguments.length?(u=!!v,p()):u},e.padding=function(v){return arguments.length?(d=Math.min(1,m=+v),p()):d},e.paddingInner=function(v){return arguments.length?(d=Math.min(1,v),p()):d},e.paddingOuter=function(v){return arguments.length?(m=+v,p()):m},e.align=function(v){return arguments.length?(f=Math.max(0,Math.min(1,v)),p()):f},e.copy=function(){return pw(t(),[n,s]).round(u).paddingInner(d).paddingOuter(m).align(f)},Ba.apply(p(),arguments)}function BA(e){var t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,delete e.paddingOuter,e.copy=function(){return BA(t())},e}function K7(){return BA(pw.apply(null,arguments).paddingInner(1))}function gw(e,t,r){e.prototype=t.prototype=r,r.constructor=e}function WA(e,t){var r=Object.create(e.prototype);for(var n in t)r[n]=t[n];return r}function Xd(){}var Dd=.7,hm=1/Dd,Gc="\\s*([+-]?\\d+)\\s*",$d="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Ci="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",G7=/^#([0-9a-f]{3,8})$/,Y7=new RegExp(`^rgb\\(${Gc},${Gc},${Gc}\\)$`),J7=new RegExp(`^rgb\\(${Ci},${Ci},${Ci}\\)$`),X7=new RegExp(`^rgba\\(${Gc},${Gc},${Gc},${$d}\\)$`),Q7=new RegExp(`^rgba\\(${Ci},${Ci},${Ci},${$d}\\)$`),Z7=new RegExp(`^hsl\\(${$d},${Ci},${Ci}\\)$`),e9=new RegExp(`^hsla\\(${$d},${Ci},${Ci},${$d}\\)$`),E2={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};gw(Xd,Rd,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:P2,formatHex:P2,formatHex8:t9,formatHsl:r9,formatRgb:A2,toString:A2});function P2(){return this.rgb().formatHex()}function t9(){return this.rgb().formatHex8()}function r9(){return VA(this).formatHsl()}function A2(){return this.rgb().formatRgb()}function Rd(e){var t,r;return e=(e+"").trim().toLowerCase(),(t=G7.exec(e))?(r=t[1].length,t=parseInt(t[1],16),r===6?O2(t):r===3?new ea(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):r===8?vh(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):r===4?vh(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=Y7.exec(e))?new ea(t[1],t[2],t[3],1):(t=J7.exec(e))?new ea(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=X7.exec(e))?vh(t[1],t[2],t[3],t[4]):(t=Q7.exec(e))?vh(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=Z7.exec(e))?D2(t[1],t[2]/100,t[3]/100,1):(t=e9.exec(e))?D2(t[1],t[2]/100,t[3]/100,t[4]):E2.hasOwnProperty(e)?O2(E2[e]):e==="transparent"?new ea(NaN,NaN,NaN,0):null}function O2(e){return new ea(e>>16&255,e>>8&255,e&255,1)}function vh(e,t,r,n){return n<=0&&(e=t=r=NaN),new ea(e,t,r,n)}function n9(e){return e instanceof Xd||(e=Rd(e)),e?(e=e.rgb(),new ea(e.r,e.g,e.b,e.opacity)):new ea}function Z0(e,t,r,n){return arguments.length===1?n9(e):new ea(e,t,r,n??1)}function ea(e,t,r,n){this.r=+e,this.g=+t,this.b=+r,this.opacity=+n}gw(ea,Z0,WA(Xd,{brighter(e){return e=e==null?hm:Math.pow(hm,e),new ea(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?Dd:Math.pow(Dd,e),new ea(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new ea($l(this.r),$l(this.g),$l(this.b),mm(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:T2,formatHex:T2,formatHex8:s9,formatRgb:I2,toString:I2}));function T2(){return`#${Al(this.r)}${Al(this.g)}${Al(this.b)}`}function s9(){return`#${Al(this.r)}${Al(this.g)}${Al(this.b)}${Al((isNaN(this.opacity)?1:this.opacity)*255)}`}function I2(){const e=mm(this.opacity);return`${e===1?"rgb(":"rgba("}${$l(this.r)}, ${$l(this.g)}, ${$l(this.b)}${e===1?")":`, ${e})`}`}function mm(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function $l(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function Al(e){return e=$l(e),(e<16?"0":"")+e.toString(16)}function D2(e,t,r,n){return n<=0?e=t=r=NaN:r<=0||r>=1?e=t=NaN:t<=0&&(e=NaN),new ri(e,t,r,n)}function VA(e){if(e instanceof ri)return new ri(e.h,e.s,e.l,e.opacity);if(e instanceof Xd||(e=Rd(e)),!e)return new ri;if(e instanceof ri)return e;e=e.rgb();var t=e.r/255,r=e.g/255,n=e.b/255,s=Math.min(t,r,n),a=Math.max(t,r,n),l=NaN,u=a-s,d=(a+s)/2;return u?(t===a?l=(r-n)/u+(r<n)*6:r===a?l=(n-t)/u+2:l=(t-r)/u+4,u/=d<.5?a+s:2-a-s,l*=60):u=d>0&&d<1?0:l,new ri(l,u,d,e.opacity)}function a9(e,t,r,n){return arguments.length===1?VA(e):new ri(e,t,r,n??1)}function ri(e,t,r,n){this.h=+e,this.s=+t,this.l=+r,this.opacity=+n}gw(ri,a9,WA(Xd,{brighter(e){return e=e==null?hm:Math.pow(hm,e),new ri(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?Dd:Math.pow(Dd,e),new ri(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,r=this.l,n=r+(r<.5?r:1-r)*t,s=2*r-n;return new ea(Ov(e>=240?e-240:e+120,s,n),Ov(e,s,n),Ov(e<120?e+240:e-120,s,n),this.opacity)},clamp(){return new ri($2(this.h),xh(this.s),xh(this.l),mm(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=mm(this.opacity);return`${e===1?"hsl(":"hsla("}${$2(this.h)}, ${xh(this.s)*100}%, ${xh(this.l)*100}%${e===1?")":`, ${e})`}`}}));function $2(e){return e=(e||0)%360,e<0?e+360:e}function xh(e){return Math.max(0,Math.min(1,e||0))}function Ov(e,t,r){return(e<60?t+(r-t)*e/60:e<180?r:e<240?t+(r-t)*(240-e)/60:t)*255}const yw=e=>()=>e;function i9(e,t){return function(r){return e+r*t}}function o9(e,t,r){return e=Math.pow(e,r),t=Math.pow(t,r)-e,r=1/r,function(n){return Math.pow(e+n*t,r)}}function l9(e){return(e=+e)==1?qA:function(t,r){return r-t?o9(t,r,e):yw(isNaN(t)?r:t)}}function qA(e,t){var r=t-e;return r?i9(e,r):yw(isNaN(e)?t:e)}const R2=(function e(t){var r=l9(t);function n(s,a){var l=r((s=Z0(s)).r,(a=Z0(a)).r),u=r(s.g,a.g),d=r(s.b,a.b),m=qA(s.opacity,a.opacity);return function(f){return s.r=l(f),s.g=u(f),s.b=d(f),s.opacity=m(f),s+""}}return n.gamma=e,n})(1);function c9(e,t){t||(t=[]);var r=e?Math.min(t.length,e.length):0,n=t.slice(),s;return function(a){for(s=0;s<r;++s)n[s]=e[s]*(1-a)+t[s]*a;return n}}function u9(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function d9(e,t){var r=t?t.length:0,n=e?Math.min(r,e.length):0,s=new Array(n),a=new Array(r),l;for(l=0;l<n;++l)s[l]=gu(e[l],t[l]);for(;l<r;++l)a[l]=t[l];return function(u){for(l=0;l<n;++l)a[l]=s[l](u);return a}}function f9(e,t){var r=new Date;return e=+e,t=+t,function(n){return r.setTime(e*(1-n)+t*n),r}}function pm(e,t){return e=+e,t=+t,function(r){return e*(1-r)+t*r}}function h9(e,t){var r={},n={},s;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(s in t)s in e?r[s]=gu(e[s],t[s]):n[s]=t[s];return function(a){for(s in r)n[s]=r[s](a);return n}}var ex=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Tv=new RegExp(ex.source,"g");function m9(e){return function(){return e}}function p9(e){return function(t){return e(t)+""}}function g9(e,t){var r=ex.lastIndex=Tv.lastIndex=0,n,s,a,l=-1,u=[],d=[];for(e=e+"",t=t+"";(n=ex.exec(e))&&(s=Tv.exec(t));)(a=s.index)>r&&(a=t.slice(r,a),u[l]?u[l]+=a:u[++l]=a),(n=n[0])===(s=s[0])?u[l]?u[l]+=s:u[++l]=s:(u[++l]=null,d.push({i:l,x:pm(n,s)})),r=Tv.lastIndex;return r<t.length&&(a=t.slice(r),u[l]?u[l]+=a:u[++l]=a),u.length<2?d[0]?p9(d[0].x):m9(t):(t=d.length,function(m){for(var f=0,p;f<t;++f)u[(p=d[f]).i]=p.x(m);return u.join("")})}function gu(e,t){var r=typeof t,n;return t==null||r==="boolean"?yw(t):(r==="number"?pm:r==="string"?(n=Rd(t))?(t=n,R2):g9:t instanceof Rd?R2:t instanceof Date?f9:u9(t)?c9:Array.isArray(t)?d9:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?h9:pm)(e,t)}function vw(e,t){return e=+e,t=+t,function(r){return Math.round(e*(1-r)+t*r)}}function y9(e,t){t===void 0&&(t=e,e=gu);for(var r=0,n=t.length-1,s=t[0],a=new Array(n<0?0:n);r<n;)a[r]=e(s,s=t[++r]);return function(l){var u=Math.max(0,Math.min(n-1,Math.floor(l*=n)));return a[u](l-u)}}function v9(e){return function(){return e}}function gm(e){return+e}var M2=[0,1];function zs(e){return e}function tx(e,t){return(t-=e=+e)?function(r){return(r-e)/t}:v9(isNaN(t)?NaN:.5)}function x9(e,t){var r;return e>t&&(r=e,e=t,t=r),function(n){return Math.max(e,Math.min(t,n))}}function w9(e,t,r){var n=e[0],s=e[1],a=t[0],l=t[1];return s<n?(n=tx(s,n),a=r(l,a)):(n=tx(n,s),a=r(a,l)),function(u){return a(n(u))}}function b9(e,t,r){var n=Math.min(e.length,t.length)-1,s=new Array(n),a=new Array(n),l=-1;for(e[n]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++l<n;)s[l]=tx(e[l],e[l+1]),a[l]=r(t[l],t[l+1]);return function(u){var d=Jd(e,u,1,n)-1;return a[d](s[d](u))}}function Qd(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function mp(){var e=M2,t=M2,r=gu,n,s,a,l=zs,u,d,m;function f(){var v=Math.min(e.length,t.length);return l!==zs&&(l=x9(e[0],e[v-1])),u=v>2?b9:w9,d=m=null,p}function p(v){return v==null||isNaN(v=+v)?a:(d||(d=u(e.map(n),t,r)))(n(l(v)))}return p.invert=function(v){return l(s((m||(m=u(t,e.map(n),pm)))(v)))},p.domain=function(v){return arguments.length?(e=Array.from(v,gm),f()):e.slice()},p.range=function(v){return arguments.length?(t=Array.from(v),f()):t.slice()},p.rangeRound=function(v){return t=Array.from(v),r=vw,f()},p.clamp=function(v){return arguments.length?(l=v?!0:zs,f()):l!==zs},p.interpolate=function(v){return arguments.length?(r=v,f()):r},p.unknown=function(v){return arguments.length?(a=v,p):a},function(v,x){return n=v,s=x,f()}}function xw(){return mp()(zs,zs)}function j9(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function ym(e,t){if((r=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var r,n=e.slice(0,r);return[n.length>1?n[0]+n.slice(2):n,+e.slice(r+1)]}function Zc(e){return e=ym(Math.abs(e)),e?e[1]:NaN}function k9(e,t){return function(r,n){for(var s=r.length,a=[],l=0,u=e[0],d=0;s>0&&u>0&&(d+u+1>n&&(u=Math.max(1,n-d)),a.push(r.substring(s-=u,s+u)),!((d+=u+1)>n));)u=e[l=(l+1)%e.length];return a.reverse().join(t)}}function S9(e){return function(t){return t.replace(/[0-9]/g,function(r){return e[+r]})}}var _9=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Md(e){if(!(t=_9.exec(e)))throw new Error("invalid format: "+e);var t;return new ww({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}Md.prototype=ww.prototype;function ww(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}ww.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function N9(e){e:for(var t=e.length,r=1,n=-1,s;r<t;++r)switch(e[r]){case".":n=s=r;break;case"0":n===0&&(n=r),s=r;break;default:if(!+e[r])break e;n>0&&(n=0);break}return n>0?e.slice(0,n)+e.slice(s+1):e}var HA;function C9(e,t){var r=ym(e,t);if(!r)return e+"";var n=r[0],s=r[1],a=s-(HA=Math.max(-8,Math.min(8,Math.floor(s/3)))*3)+1,l=n.length;return a===l?n:a>l?n+new Array(a-l+1).join("0"):a>0?n.slice(0,a)+"."+n.slice(a):"0."+new Array(1-a).join("0")+ym(e,Math.max(0,t+a-1))[0]}function F2(e,t){var r=ym(e,t);if(!r)return e+"";var n=r[0],s=r[1];return s<0?"0."+new Array(-s).join("0")+n:n.length>s+1?n.slice(0,s+1)+"."+n.slice(s+1):n+new Array(s-n.length+2).join("0")}const L2={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:j9,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>F2(e*100,t),r:F2,s:C9,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function z2(e){return e}var U2=Array.prototype.map,B2=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function E9(e){var t=e.grouping===void 0||e.thousands===void 0?z2:k9(U2.call(e.grouping,Number),e.thousands+""),r=e.currency===void 0?"":e.currency[0]+"",n=e.currency===void 0?"":e.currency[1]+"",s=e.decimal===void 0?".":e.decimal+"",a=e.numerals===void 0?z2:S9(U2.call(e.numerals,String)),l=e.percent===void 0?"%":e.percent+"",u=e.minus===void 0?"":e.minus+"",d=e.nan===void 0?"NaN":e.nan+"";function m(p){p=Md(p);var v=p.fill,x=p.align,w=p.sign,k=p.symbol,b=p.zero,_=p.width,N=p.comma,C=p.precision,T=p.trim,P=p.type;P==="n"?(N=!0,P="g"):L2[P]||(C===void 0&&(C=12),T=!0,P="g"),(b||v==="0"&&x==="=")&&(b=!0,v="0",x="=");var A=k==="$"?r:k==="#"&&/[boxX]/.test(P)?"0"+P.toLowerCase():"",M=k==="$"?n:/[%p]/.test(P)?l:"",R=L2[P],K=/[defgprs%]/.test(P);C=C===void 0?6:/[gprs]/.test(P)?Math.max(1,Math.min(21,C)):Math.max(0,Math.min(20,C));function B(ie){var G=A,ne=M,W,q,ve;if(P==="c")ne=R(ie)+ne,ie="";else{ie=+ie;var $=ie<0||1/ie<0;if(ie=isNaN(ie)?d:R(Math.abs(ie),C),T&&(ie=N9(ie)),$&&+ie==0&&w!=="+"&&($=!1),G=($?w==="("?w:u:w==="-"||w==="("?"":w)+G,ne=(P==="s"?B2[8+HA/3]:"")+ne+($&&w==="("?")":""),K){for(W=-1,q=ie.length;++W<q;)if(ve=ie.charCodeAt(W),48>ve||ve>57){ne=(ve===46?s+ie.slice(W+1):ie.slice(W))+ne,ie=ie.slice(0,W);break}}}N&&!b&&(ie=t(ie,1/0));var H=G.length+ie.length+ne.length,ce=H<_?new Array(_-H+1).join(v):"";switch(N&&b&&(ie=t(ce+ie,ce.length?_-ne.length:1/0),ce=""),x){case"<":ie=G+ie+ne+ce;break;case"=":ie=G+ce+ie+ne;break;case"^":ie=ce.slice(0,H=ce.length>>1)+G+ie+ne+ce.slice(H);break;default:ie=ce+G+ie+ne;break}return a(ie)}return B.toString=function(){return p+""},B}function f(p,v){var x=m((p=Md(p),p.type="f",p)),w=Math.max(-8,Math.min(8,Math.floor(Zc(v)/3)))*3,k=Math.pow(10,-w),b=B2[8+w/3];return function(_){return x(k*_)+b}}return{format:m,formatPrefix:f}}var wh,bw,KA;P9({thousands:",",grouping:[3],currency:["$",""]});function P9(e){return wh=E9(e),bw=wh.format,KA=wh.formatPrefix,wh}function A9(e){return Math.max(0,-Zc(Math.abs(e)))}function O9(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(Zc(t)/3)))*3-Zc(Math.abs(e)))}function T9(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,Zc(t)-Zc(e))+1}function GA(e,t,r,n){var s=X0(e,t,r),a;switch(n=Md(n??",f"),n.type){case"s":{var l=Math.max(Math.abs(e),Math.abs(t));return n.precision==null&&!isNaN(a=O9(s,l))&&(n.precision=a),KA(n,l)}case"":case"e":case"g":case"p":case"r":{n.precision==null&&!isNaN(a=T9(s,Math.max(Math.abs(e),Math.abs(t))))&&(n.precision=a-(n.type==="e"));break}case"f":case"%":{n.precision==null&&!isNaN(a=A9(s))&&(n.precision=a-(n.type==="%")*2);break}}return bw(n)}function nl(e){var t=e.domain;return e.ticks=function(r){var n=t();return Y0(n[0],n[n.length-1],r??10)},e.tickFormat=function(r,n){var s=t();return GA(s[0],s[s.length-1],r??10,n)},e.nice=function(r){r==null&&(r=10);var n=t(),s=0,a=n.length-1,l=n[s],u=n[a],d,m,f=10;for(u<l&&(m=l,l=u,u=m,m=s,s=a,a=m);f-- >0;){if(m=J0(l,u,r),m===d)return n[s]=l,n[a]=u,t(n);if(m>0)l=Math.floor(l/m)*m,u=Math.ceil(u/m)*m;else if(m<0)l=Math.ceil(l*m)/m,u=Math.floor(u*m)/m;else break;d=m}return e},e}function YA(){var e=xw();return e.copy=function(){return Qd(e,YA())},Ba.apply(e,arguments),nl(e)}function JA(e){var t;function r(n){return n==null||isNaN(n=+n)?t:n}return r.invert=r,r.domain=r.range=function(n){return arguments.length?(e=Array.from(n,gm),r):e.slice()},r.unknown=function(n){return arguments.length?(t=n,r):t},r.copy=function(){return JA(e).unknown(t)},e=arguments.length?Array.from(e,gm):[0,1],nl(r)}function XA(e,t){e=e.slice();var r=0,n=e.length-1,s=e[r],a=e[n],l;return a<s&&(l=r,r=n,n=l,l=s,s=a,a=l),e[r]=t.floor(s),e[n]=t.ceil(a),e}function W2(e){return Math.log(e)}function V2(e){return Math.exp(e)}function I9(e){return-Math.log(-e)}function D9(e){return-Math.exp(-e)}function $9(e){return isFinite(e)?+("1e"+e):e<0?0:e}function R9(e){return e===10?$9:e===Math.E?Math.exp:t=>Math.pow(e,t)}function M9(e){return e===Math.E?Math.log:e===10&&Math.log10||e===2&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}function q2(e){return(t,r)=>-e(-t,r)}function jw(e){const t=e(W2,V2),r=t.domain;let n=10,s,a;function l(){return s=M9(n),a=R9(n),r()[0]<0?(s=q2(s),a=q2(a),e(I9,D9)):e(W2,V2),t}return t.base=function(u){return arguments.length?(n=+u,l()):n},t.domain=function(u){return arguments.length?(r(u),l()):r()},t.ticks=u=>{const d=r();let m=d[0],f=d[d.length-1];const p=f<m;p&&([m,f]=[f,m]);let v=s(m),x=s(f),w,k;const b=u==null?10:+u;let _=[];if(!(n%1)&&x-v<b){if(v=Math.floor(v),x=Math.ceil(x),m>0){for(;v<=x;++v)for(w=1;w<n;++w)if(k=v<0?w/a(-v):w*a(v),!(k<m)){if(k>f)break;_.push(k)}}else for(;v<=x;++v)for(w=n-1;w>=1;--w)if(k=v>0?w/a(-v):w*a(v),!(k<m)){if(k>f)break;_.push(k)}_.length*2<b&&(_=Y0(m,f,b))}else _=Y0(v,x,Math.min(x-v,b)).map(a);return p?_.reverse():_},t.tickFormat=(u,d)=>{if(u==null&&(u=10),d==null&&(d=n===10?"s":","),typeof d!="function"&&(!(n%1)&&(d=Md(d)).precision==null&&(d.trim=!0),d=bw(d)),u===1/0)return d;const m=Math.max(1,n*u/t.ticks().length);return f=>{let p=f/a(Math.round(s(f)));return p*n<n-.5&&(p*=n),p<=m?d(f):""}},t.nice=()=>r(XA(r(),{floor:u=>a(Math.floor(s(u))),ceil:u=>a(Math.ceil(s(u)))})),t}function QA(){const e=jw(mp()).domain([1,10]);return e.copy=()=>Qd(e,QA()).base(e.base()),Ba.apply(e,arguments),e}function H2(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function K2(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function kw(e){var t=1,r=e(H2(t),K2(t));return r.constant=function(n){return arguments.length?e(H2(t=+n),K2(t)):t},nl(r)}function ZA(){var e=kw(mp());return e.copy=function(){return Qd(e,ZA()).constant(e.constant())},Ba.apply(e,arguments)}function G2(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function F9(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function L9(e){return e<0?-e*e:e*e}function Sw(e){var t=e(zs,zs),r=1;function n(){return r===1?e(zs,zs):r===.5?e(F9,L9):e(G2(r),G2(1/r))}return t.exponent=function(s){return arguments.length?(r=+s,n()):r},nl(t)}function _w(){var e=Sw(mp());return e.copy=function(){return Qd(e,_w()).exponent(e.exponent())},Ba.apply(e,arguments),e}function z9(){return _w.apply(null,arguments).exponent(.5)}function Y2(e){return Math.sign(e)*e*e}function U9(e){return Math.sign(e)*Math.sqrt(Math.abs(e))}function eO(){var e=xw(),t=[0,1],r=!1,n;function s(a){var l=U9(e(a));return isNaN(l)?n:r?Math.round(l):l}return s.invert=function(a){return e.invert(Y2(a))},s.domain=function(a){return arguments.length?(e.domain(a),s):e.domain()},s.range=function(a){return arguments.length?(e.range((t=Array.from(a,gm)).map(Y2)),s):t.slice()},s.rangeRound=function(a){return s.range(a).round(!0)},s.round=function(a){return arguments.length?(r=!!a,s):r},s.clamp=function(a){return arguments.length?(e.clamp(a),s):e.clamp()},s.unknown=function(a){return arguments.length?(n=a,s):n},s.copy=function(){return eO(e.domain(),t).round(r).clamp(e.clamp()).unknown(n)},Ba.apply(s,arguments),nl(s)}function tO(){var e=[],t=[],r=[],n;function s(){var l=0,u=Math.max(1,t.length);for(r=new Array(u-1);++l<u;)r[l-1]=q7(e,l/u);return a}function a(l){return l==null||isNaN(l=+l)?n:t[Jd(r,l)]}return a.invertExtent=function(l){var u=t.indexOf(l);return u<0?[NaN,NaN]:[u>0?r[u-1]:e[0],u<r.length?r[u]:e[e.length-1]]},a.domain=function(l){if(!arguments.length)return e.slice();e=[];for(let u of l)u!=null&&!isNaN(u=+u)&&e.push(u);return e.sort(Jo),s()},a.range=function(l){return arguments.length?(t=Array.from(l),s()):t.slice()},a.unknown=function(l){return arguments.length?(n=l,a):n},a.quantiles=function(){return r.slice()},a.copy=function(){return tO().domain(e).range(t).unknown(n)},Ba.apply(a,arguments)}function rO(){var e=0,t=1,r=1,n=[.5],s=[0,1],a;function l(d){return d!=null&&d<=d?s[Jd(n,d,0,r)]:a}function u(){var d=-1;for(n=new Array(r);++d<r;)n[d]=((d+1)*t-(d-r)*e)/(r+1);return l}return l.domain=function(d){return arguments.length?([e,t]=d,e=+e,t=+t,u()):[e,t]},l.range=function(d){return arguments.length?(r=(s=Array.from(d)).length-1,u()):s.slice()},l.invertExtent=function(d){var m=s.indexOf(d);return m<0?[NaN,NaN]:m<1?[e,n[0]]:m>=r?[n[r-1],t]:[n[m-1],n[m]]},l.unknown=function(d){return arguments.length&&(a=d),l},l.thresholds=function(){return n.slice()},l.copy=function(){return rO().domain([e,t]).range(s).unknown(a)},Ba.apply(nl(l),arguments)}function nO(){var e=[.5],t=[0,1],r,n=1;function s(a){return a!=null&&a<=a?t[Jd(e,a,0,n)]:r}return s.domain=function(a){return arguments.length?(e=Array.from(a),n=Math.min(e.length,t.length-1),s):e.slice()},s.range=function(a){return arguments.length?(t=Array.from(a),n=Math.min(e.length,t.length-1),s):t.slice()},s.invertExtent=function(a){var l=t.indexOf(a);return[e[l-1],e[l]]},s.unknown=function(a){return arguments.length?(r=a,s):r},s.copy=function(){return nO().domain(e).range(t).unknown(r)},Ba.apply(s,arguments)}const Iv=new Date,Dv=new Date;function zn(e,t,r,n){function s(a){return e(a=arguments.length===0?new Date:new Date(+a)),a}return s.floor=a=>(e(a=new Date(+a)),a),s.ceil=a=>(e(a=new Date(a-1)),t(a,1),e(a),a),s.round=a=>{const l=s(a),u=s.ceil(a);return a-l<u-a?l:u},s.offset=(a,l)=>(t(a=new Date(+a),l==null?1:Math.floor(l)),a),s.range=(a,l,u)=>{const d=[];if(a=s.ceil(a),u=u==null?1:Math.floor(u),!(a<l)||!(u>0))return d;let m;do d.push(m=new Date(+a)),t(a,u),e(a);while(m<a&&a<l);return d},s.filter=a=>zn(l=>{if(l>=l)for(;e(l),!a(l);)l.setTime(l-1)},(l,u)=>{if(l>=l)if(u<0)for(;++u<=0;)for(;t(l,-1),!a(l););else for(;--u>=0;)for(;t(l,1),!a(l););}),r&&(s.count=(a,l)=>(Iv.setTime(+a),Dv.setTime(+l),e(Iv),e(Dv),Math.floor(r(Iv,Dv))),s.every=a=>(a=Math.floor(a),!isFinite(a)||!(a>0)?null:a>1?s.filter(n?l=>n(l)%a===0:l=>s.count(0,l)%a===0):s)),s}const vm=zn(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);vm.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?zn(t=>{t.setTime(Math.floor(t/e)*e)},(t,r)=>{t.setTime(+t+r*e)},(t,r)=>(r-t)/e):vm);vm.range;const Yi=1e3,$a=Yi*60,Ji=$a*60,io=Ji*24,Nw=io*7,J2=io*30,$v=io*365,Ol=zn(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*Yi)},(e,t)=>(t-e)/Yi,e=>e.getUTCSeconds());Ol.range;const Cw=zn(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*Yi)},(e,t)=>{e.setTime(+e+t*$a)},(e,t)=>(t-e)/$a,e=>e.getMinutes());Cw.range;const Ew=zn(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*$a)},(e,t)=>(t-e)/$a,e=>e.getUTCMinutes());Ew.range;const Pw=zn(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*Yi-e.getMinutes()*$a)},(e,t)=>{e.setTime(+e+t*Ji)},(e,t)=>(t-e)/Ji,e=>e.getHours());Pw.range;const Aw=zn(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*Ji)},(e,t)=>(t-e)/Ji,e=>e.getUTCHours());Aw.range;const Zd=zn(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*$a)/io,e=>e.getDate()-1);Zd.range;const pp=zn(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/io,e=>e.getUTCDate()-1);pp.range;const sO=zn(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/io,e=>Math.floor(e/io));sO.range;function Xl(e){return zn(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(t,r)=>{t.setDate(t.getDate()+r*7)},(t,r)=>(r-t-(r.getTimezoneOffset()-t.getTimezoneOffset())*$a)/Nw)}const gp=Xl(0),xm=Xl(1),B9=Xl(2),W9=Xl(3),eu=Xl(4),V9=Xl(5),q9=Xl(6);gp.range;xm.range;B9.range;W9.range;eu.range;V9.range;q9.range;function Ql(e){return zn(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(t,r)=>{t.setUTCDate(t.getUTCDate()+r*7)},(t,r)=>(r-t)/Nw)}const yp=Ql(0),wm=Ql(1),H9=Ql(2),K9=Ql(3),tu=Ql(4),G9=Ql(5),Y9=Ql(6);yp.range;wm.range;H9.range;K9.range;tu.range;G9.range;Y9.range;const Ow=zn(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12,e=>e.getMonth());Ow.range;const Tw=zn(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth());Tw.range;const oo=zn(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());oo.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:zn(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,r)=>{t.setFullYear(t.getFullYear()+r*e)});oo.range;const lo=zn(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());lo.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:zn(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,r)=>{t.setUTCFullYear(t.getUTCFullYear()+r*e)});lo.range;function aO(e,t,r,n,s,a){const l=[[Ol,1,Yi],[Ol,5,5*Yi],[Ol,15,15*Yi],[Ol,30,30*Yi],[a,1,$a],[a,5,5*$a],[a,15,15*$a],[a,30,30*$a],[s,1,Ji],[s,3,3*Ji],[s,6,6*Ji],[s,12,12*Ji],[n,1,io],[n,2,2*io],[r,1,Nw],[t,1,J2],[t,3,3*J2],[e,1,$v]];function u(m,f,p){const v=f<m;v&&([m,f]=[f,m]);const x=p&&typeof p.range=="function"?p:d(m,f,p),w=x?x.range(m,+f+1):[];return v?w.reverse():w}function d(m,f,p){const v=Math.abs(f-m)/p,x=hw(([,,b])=>b).right(l,v);if(x===l.length)return e.every(X0(m/$v,f/$v,p));if(x===0)return vm.every(Math.max(X0(m,f,p),1));const[w,k]=l[v/l[x-1][2]<l[x][2]/v?x-1:x];return w.every(k)}return[u,d]}const[J9,X9]=aO(lo,Tw,yp,sO,Aw,Ew),[Q9,Z9]=aO(oo,Ow,gp,Zd,Pw,Cw);function Rv(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function Mv(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function ad(e,t,r){return{y:e,m:t,d:r,H:0,M:0,S:0,L:0}}function eW(e){var t=e.dateTime,r=e.date,n=e.time,s=e.periods,a=e.days,l=e.shortDays,u=e.months,d=e.shortMonths,m=id(s),f=od(s),p=id(a),v=od(a),x=id(l),w=od(l),k=id(u),b=od(u),_=id(d),N=od(d),C={a:$,A:H,b:ce,B:le,c:null,d:rN,e:rN,f:kW,g:IW,G:$W,H:wW,I:bW,j:jW,L:iO,m:SW,M:_W,p:U,q:te,Q:aN,s:iN,S:NW,u:CW,U:EW,V:PW,w:AW,W:OW,x:null,X:null,y:TW,Y:DW,Z:RW,"%":sN},T={a:he,A:$e,b:Pe,B:ke,c:null,d:nN,e:nN,f:zW,g:JW,G:QW,H:MW,I:FW,j:LW,L:lO,m:UW,M:BW,p:De,q:He,Q:aN,s:iN,S:WW,u:VW,U:qW,V:HW,w:KW,W:GW,x:null,X:null,y:YW,Y:XW,Z:ZW,"%":sN},P={a:B,A:ie,b:G,B:ne,c:W,d:eN,e:eN,f:gW,g:Z2,G:Q2,H:tN,I:tN,j:fW,L:pW,m:dW,M:hW,p:K,q:uW,Q:vW,s:xW,S:mW,u:aW,U:iW,V:oW,w:sW,W:lW,x:q,X:ve,y:Z2,Y:Q2,Z:cW,"%":yW};C.x=A(r,C),C.X=A(n,C),C.c=A(t,C),T.x=A(r,T),T.X=A(n,T),T.c=A(t,T);function A(Y,ge){return function(oe){var se=[],Be=-1,Xe=0,mt=Y.length,zt,Qe,nt;for(oe instanceof Date||(oe=new Date(+oe));++Be<mt;)Y.charCodeAt(Be)===37&&(se.push(Y.slice(Xe,Be)),(Qe=X2[zt=Y.charAt(++Be)])!=null?zt=Y.charAt(++Be):Qe=zt==="e"?" ":"0",(nt=ge[zt])&&(zt=nt(oe,Qe)),se.push(zt),Xe=Be+1);return se.push(Y.slice(Xe,Be)),se.join("")}}function M(Y,ge){return function(oe){var se=ad(1900,void 0,1),Be=R(se,Y,oe+="",0),Xe,mt;if(Be!=oe.length)return null;if("Q"in se)return new Date(se.Q);if("s"in se)return new Date(se.s*1e3+("L"in se?se.L:0));if(ge&&!("Z"in se)&&(se.Z=0),"p"in se&&(se.H=se.H%12+se.p*12),se.m===void 0&&(se.m="q"in se?se.q:0),"V"in se){if(se.V<1||se.V>53)return null;"w"in se||(se.w=1),"Z"in se?(Xe=Mv(ad(se.y,0,1)),mt=Xe.getUTCDay(),Xe=mt>4||mt===0?wm.ceil(Xe):wm(Xe),Xe=pp.offset(Xe,(se.V-1)*7),se.y=Xe.getUTCFullYear(),se.m=Xe.getUTCMonth(),se.d=Xe.getUTCDate()+(se.w+6)%7):(Xe=Rv(ad(se.y,0,1)),mt=Xe.getDay(),Xe=mt>4||mt===0?xm.ceil(Xe):xm(Xe),Xe=Zd.offset(Xe,(se.V-1)*7),se.y=Xe.getFullYear(),se.m=Xe.getMonth(),se.d=Xe.getDate()+(se.w+6)%7)}else("W"in se||"U"in se)&&("w"in se||(se.w="u"in se?se.u%7:"W"in se?1:0),mt="Z"in se?Mv(ad(se.y,0,1)).getUTCDay():Rv(ad(se.y,0,1)).getDay(),se.m=0,se.d="W"in se?(se.w+6)%7+se.W*7-(mt+5)%7:se.w+se.U*7-(mt+6)%7);return"Z"in se?(se.H+=se.Z/100|0,se.M+=se.Z%100,Mv(se)):Rv(se)}}function R(Y,ge,oe,se){for(var Be=0,Xe=ge.length,mt=oe.length,zt,Qe;Be<Xe;){if(se>=mt)return-1;if(zt=ge.charCodeAt(Be++),zt===37){if(zt=ge.charAt(Be++),Qe=P[zt in X2?ge.charAt(Be++):zt],!Qe||(se=Qe(Y,oe,se))<0)return-1}else if(zt!=oe.charCodeAt(se++))return-1}return se}function K(Y,ge,oe){var se=m.exec(ge.slice(oe));return se?(Y.p=f.get(se[0].toLowerCase()),oe+se[0].length):-1}function B(Y,ge,oe){var se=x.exec(ge.slice(oe));return se?(Y.w=w.get(se[0].toLowerCase()),oe+se[0].length):-1}function ie(Y,ge,oe){var se=p.exec(ge.slice(oe));return se?(Y.w=v.get(se[0].toLowerCase()),oe+se[0].length):-1}function G(Y,ge,oe){var se=_.exec(ge.slice(oe));return se?(Y.m=N.get(se[0].toLowerCase()),oe+se[0].length):-1}function ne(Y,ge,oe){var se=k.exec(ge.slice(oe));return se?(Y.m=b.get(se[0].toLowerCase()),oe+se[0].length):-1}function W(Y,ge,oe){return R(Y,t,ge,oe)}function q(Y,ge,oe){return R(Y,r,ge,oe)}function ve(Y,ge,oe){return R(Y,n,ge,oe)}function $(Y){return l[Y.getDay()]}function H(Y){return a[Y.getDay()]}function ce(Y){return d[Y.getMonth()]}function le(Y){return u[Y.getMonth()]}function U(Y){return s[+(Y.getHours()>=12)]}function te(Y){return 1+~~(Y.getMonth()/3)}function he(Y){return l[Y.getUTCDay()]}function $e(Y){return a[Y.getUTCDay()]}function Pe(Y){return d[Y.getUTCMonth()]}function ke(Y){return u[Y.getUTCMonth()]}function De(Y){return s[+(Y.getUTCHours()>=12)]}function He(Y){return 1+~~(Y.getUTCMonth()/3)}return{format:function(Y){var ge=A(Y+="",C);return ge.toString=function(){return Y},ge},parse:function(Y){var ge=M(Y+="",!1);return ge.toString=function(){return Y},ge},utcFormat:function(Y){var ge=A(Y+="",T);return ge.toString=function(){return Y},ge},utcParse:function(Y){var ge=M(Y+="",!0);return ge.toString=function(){return Y},ge}}}var X2={"-":"",_:" ",0:"0"},ss=/^\s*\d+/,tW=/^%/,rW=/[\\^$*+?|[\]().{}]/g;function br(e,t,r){var n=e<0?"-":"",s=(n?-e:e)+"",a=s.length;return n+(a<r?new Array(r-a+1).join(t)+s:s)}function nW(e){return e.replace(rW,"\\$&")}function id(e){return new RegExp("^(?:"+e.map(nW).join("|")+")","i")}function od(e){return new Map(e.map((t,r)=>[t.toLowerCase(),r]))}function sW(e,t,r){var n=ss.exec(t.slice(r,r+1));return n?(e.w=+n[0],r+n[0].length):-1}function aW(e,t,r){var n=ss.exec(t.slice(r,r+1));return n?(e.u=+n[0],r+n[0].length):-1}function iW(e,t,r){var n=ss.exec(t.slice(r,r+2));return n?(e.U=+n[0],r+n[0].length):-1}function oW(e,t,r){var n=ss.exec(t.slice(r,r+2));return n?(e.V=+n[0],r+n[0].length):-1}function lW(e,t,r){var n=ss.exec(t.slice(r,r+2));return n?(e.W=+n[0],r+n[0].length):-1}function Q2(e,t,r){var n=ss.exec(t.slice(r,r+4));return n?(e.y=+n[0],r+n[0].length):-1}function Z2(e,t,r){var n=ss.exec(t.slice(r,r+2));return n?(e.y=+n[0]+(+n[0]>68?1900:2e3),r+n[0].length):-1}function cW(e,t,r){var n=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(r,r+6));return n?(e.Z=n[1]?0:-(n[2]+(n[3]||"00")),r+n[0].length):-1}function uW(e,t,r){var n=ss.exec(t.slice(r,r+1));return n?(e.q=n[0]*3-3,r+n[0].length):-1}function dW(e,t,r){var n=ss.exec(t.slice(r,r+2));return n?(e.m=n[0]-1,r+n[0].length):-1}function eN(e,t,r){var n=ss.exec(t.slice(r,r+2));return n?(e.d=+n[0],r+n[0].length):-1}function fW(e,t,r){var n=ss.exec(t.slice(r,r+3));return n?(e.m=0,e.d=+n[0],r+n[0].length):-1}function tN(e,t,r){var n=ss.exec(t.slice(r,r+2));return n?(e.H=+n[0],r+n[0].length):-1}function hW(e,t,r){var n=ss.exec(t.slice(r,r+2));return n?(e.M=+n[0],r+n[0].length):-1}function mW(e,t,r){var n=ss.exec(t.slice(r,r+2));return n?(e.S=+n[0],r+n[0].length):-1}function pW(e,t,r){var n=ss.exec(t.slice(r,r+3));return n?(e.L=+n[0],r+n[0].length):-1}function gW(e,t,r){var n=ss.exec(t.slice(r,r+6));return n?(e.L=Math.floor(n[0]/1e3),r+n[0].length):-1}function yW(e,t,r){var n=tW.exec(t.slice(r,r+1));return n?r+n[0].length:-1}function vW(e,t,r){var n=ss.exec(t.slice(r));return n?(e.Q=+n[0],r+n[0].length):-1}function xW(e,t,r){var n=ss.exec(t.slice(r));return n?(e.s=+n[0],r+n[0].length):-1}function rN(e,t){return br(e.getDate(),t,2)}function wW(e,t){return br(e.getHours(),t,2)}function bW(e,t){return br(e.getHours()%12||12,t,2)}function jW(e,t){return br(1+Zd.count(oo(e),e),t,3)}function iO(e,t){return br(e.getMilliseconds(),t,3)}function kW(e,t){return iO(e,t)+"000"}function SW(e,t){return br(e.getMonth()+1,t,2)}function _W(e,t){return br(e.getMinutes(),t,2)}function NW(e,t){return br(e.getSeconds(),t,2)}function CW(e){var t=e.getDay();return t===0?7:t}function EW(e,t){return br(gp.count(oo(e)-1,e),t,2)}function oO(e){var t=e.getDay();return t>=4||t===0?eu(e):eu.ceil(e)}function PW(e,t){return e=oO(e),br(eu.count(oo(e),e)+(oo(e).getDay()===4),t,2)}function AW(e){return e.getDay()}function OW(e,t){return br(xm.count(oo(e)-1,e),t,2)}function TW(e,t){return br(e.getFullYear()%100,t,2)}function IW(e,t){return e=oO(e),br(e.getFullYear()%100,t,2)}function DW(e,t){return br(e.getFullYear()%1e4,t,4)}function $W(e,t){var r=e.getDay();return e=r>=4||r===0?eu(e):eu.ceil(e),br(e.getFullYear()%1e4,t,4)}function RW(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+br(t/60|0,"0",2)+br(t%60,"0",2)}function nN(e,t){return br(e.getUTCDate(),t,2)}function MW(e,t){return br(e.getUTCHours(),t,2)}function FW(e,t){return br(e.getUTCHours()%12||12,t,2)}function LW(e,t){return br(1+pp.count(lo(e),e),t,3)}function lO(e,t){return br(e.getUTCMilliseconds(),t,3)}function zW(e,t){return lO(e,t)+"000"}function UW(e,t){return br(e.getUTCMonth()+1,t,2)}function BW(e,t){return br(e.getUTCMinutes(),t,2)}function WW(e,t){return br(e.getUTCSeconds(),t,2)}function VW(e){var t=e.getUTCDay();return t===0?7:t}function qW(e,t){return br(yp.count(lo(e)-1,e),t,2)}function cO(e){var t=e.getUTCDay();return t>=4||t===0?tu(e):tu.ceil(e)}function HW(e,t){return e=cO(e),br(tu.count(lo(e),e)+(lo(e).getUTCDay()===4),t,2)}function KW(e){return e.getUTCDay()}function GW(e,t){return br(wm.count(lo(e)-1,e),t,2)}function YW(e,t){return br(e.getUTCFullYear()%100,t,2)}function JW(e,t){return e=cO(e),br(e.getUTCFullYear()%100,t,2)}function XW(e,t){return br(e.getUTCFullYear()%1e4,t,4)}function QW(e,t){var r=e.getUTCDay();return e=r>=4||r===0?tu(e):tu.ceil(e),br(e.getUTCFullYear()%1e4,t,4)}function ZW(){return"+0000"}function sN(){return"%"}function aN(e){return+e}function iN(e){return Math.floor(+e/1e3)}var Dc,uO,dO;eV({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function eV(e){return Dc=eW(e),uO=Dc.format,Dc.parse,dO=Dc.utcFormat,Dc.utcParse,Dc}function tV(e){return new Date(e)}function rV(e){return e instanceof Date?+e:+new Date(+e)}function Iw(e,t,r,n,s,a,l,u,d,m){var f=xw(),p=f.invert,v=f.domain,x=m(".%L"),w=m(":%S"),k=m("%I:%M"),b=m("%I %p"),_=m("%a %d"),N=m("%b %d"),C=m("%B"),T=m("%Y");function P(A){return(d(A)<A?x:u(A)<A?w:l(A)<A?k:a(A)<A?b:n(A)<A?s(A)<A?_:N:r(A)<A?C:T)(A)}return f.invert=function(A){return new Date(p(A))},f.domain=function(A){return arguments.length?v(Array.from(A,rV)):v().map(tV)},f.ticks=function(A){var M=v();return e(M[0],M[M.length-1],A??10)},f.tickFormat=function(A,M){return M==null?P:m(M)},f.nice=function(A){var M=v();return(!A||typeof A.range!="function")&&(A=t(M[0],M[M.length-1],A??10)),A?v(XA(M,A)):f},f.copy=function(){return Qd(f,Iw(e,t,r,n,s,a,l,u,d,m))},f}function nV(){return Ba.apply(Iw(Q9,Z9,oo,Ow,gp,Zd,Pw,Cw,Ol,uO).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function sV(){return Ba.apply(Iw(J9,X9,lo,Tw,yp,pp,Aw,Ew,Ol,dO).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function vp(){var e=0,t=1,r,n,s,a,l=zs,u=!1,d;function m(p){return p==null||isNaN(p=+p)?d:l(s===0?.5:(p=(a(p)-r)*s,u?Math.max(0,Math.min(1,p)):p))}m.domain=function(p){return arguments.length?([e,t]=p,r=a(e=+e),n=a(t=+t),s=r===n?0:1/(n-r),m):[e,t]},m.clamp=function(p){return arguments.length?(u=!!p,m):u},m.interpolator=function(p){return arguments.length?(l=p,m):l};function f(p){return function(v){var x,w;return arguments.length?([x,w]=v,l=p(x,w),m):[l(0),l(1)]}}return m.range=f(gu),m.rangeRound=f(vw),m.unknown=function(p){return arguments.length?(d=p,m):d},function(p){return a=p,r=p(e),n=p(t),s=r===n?0:1/(n-r),m}}function sl(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function fO(){var e=nl(vp()(zs));return e.copy=function(){return sl(e,fO())},mo.apply(e,arguments)}function hO(){var e=jw(vp()).domain([1,10]);return e.copy=function(){return sl(e,hO()).base(e.base())},mo.apply(e,arguments)}function mO(){var e=kw(vp());return e.copy=function(){return sl(e,mO()).constant(e.constant())},mo.apply(e,arguments)}function Dw(){var e=Sw(vp());return e.copy=function(){return sl(e,Dw()).exponent(e.exponent())},mo.apply(e,arguments)}function aV(){return Dw.apply(null,arguments).exponent(.5)}function pO(){var e=[],t=zs;function r(n){if(n!=null&&!isNaN(n=+n))return t((Jd(e,n,1)-1)/(e.length-1))}return r.domain=function(n){if(!arguments.length)return e.slice();e=[];for(let s of n)s!=null&&!isNaN(s=+s)&&e.push(s);return e.sort(Jo),r},r.interpolator=function(n){return arguments.length?(t=n,r):t},r.range=function(){return e.map((n,s)=>t(s/(e.length-1)))},r.quantiles=function(n){return Array.from({length:n+1},(s,a)=>V7(e,a/n))},r.copy=function(){return pO(t).domain(e)},mo.apply(r,arguments)}function xp(){var e=0,t=.5,r=1,n=1,s,a,l,u,d,m=zs,f,p=!1,v;function x(k){return isNaN(k=+k)?v:(k=.5+((k=+f(k))-a)*(n*k<n*a?u:d),m(p?Math.max(0,Math.min(1,k)):k))}x.domain=function(k){return arguments.length?([e,t,r]=k,s=f(e=+e),a=f(t=+t),l=f(r=+r),u=s===a?0:.5/(a-s),d=a===l?0:.5/(l-a),n=a<s?-1:1,x):[e,t,r]},x.clamp=function(k){return arguments.length?(p=!!k,x):p},x.interpolator=function(k){return arguments.length?(m=k,x):m};function w(k){return function(b){var _,N,C;return arguments.length?([_,N,C]=b,m=y9(k,[_,N,C]),x):[m(0),m(.5),m(1)]}}return x.range=w(gu),x.rangeRound=w(vw),x.unknown=function(k){return arguments.length?(v=k,x):v},function(k){return f=k,s=k(e),a=k(t),l=k(r),u=s===a?0:.5/(a-s),d=a===l?0:.5/(l-a),n=a<s?-1:1,x}}function gO(){var e=nl(xp()(zs));return e.copy=function(){return sl(e,gO())},mo.apply(e,arguments)}function yO(){var e=jw(xp()).domain([.1,1,10]);return e.copy=function(){return sl(e,yO()).base(e.base())},mo.apply(e,arguments)}function vO(){var e=kw(xp());return e.copy=function(){return sl(e,vO()).constant(e.constant())},mo.apply(e,arguments)}function $w(){var e=Sw(xp());return e.copy=function(){return sl(e,$w()).exponent(e.exponent())},mo.apply(e,arguments)}function iV(){return $w.apply(null,arguments).exponent(.5)}const hd=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:pw,scaleDiverging:gO,scaleDivergingLog:yO,scaleDivergingPow:$w,scaleDivergingSqrt:iV,scaleDivergingSymlog:vO,scaleIdentity:JA,scaleImplicit:Q0,scaleLinear:YA,scaleLog:QA,scaleOrdinal:mw,scalePoint:K7,scalePow:_w,scaleQuantile:tO,scaleQuantize:rO,scaleRadial:eO,scaleSequential:fO,scaleSequentialLog:hO,scaleSequentialPow:Dw,scaleSequentialQuantile:pO,scaleSequentialSqrt:aV,scaleSequentialSymlog:mO,scaleSqrt:z9,scaleSymlog:ZA,scaleThreshold:nO,scaleTime:nV,scaleUtc:sV,tickFormat:GA},Symbol.toStringTag,{value:"Module"}));var al=e=>e.chartData,oV=je([al],e=>{var t=e.chartData!=null?e.chartData.length-1:0;return{chartData:e.chartData,computedData:e.computedData,dataEndIndex:t,dataStartIndex:0}}),Rw=(e,t,r,n)=>n?oV(e):al(e);function Ul(e){if(Array.isArray(e)&&e.length===2){var[t,r]=e;if(vn(t)&&vn(r))return!0}return!1}function oN(e,t,r){return r?e:[Math.min(e[0],t[0]),Math.max(e[1],t[1])]}function xO(e,t){if(t&&typeof e!="function"&&Array.isArray(e)&&e.length===2){var[r,n]=e,s,a;if(vn(r))s=r;else if(typeof r=="function")return;if(vn(n))a=n;else if(typeof n=="function")return;var l=[s,a];if(Ul(l))return l}}function lV(e,t,r){if(!(!r&&t==null)){if(typeof e=="function"&&t!=null)try{var n=e(t,r);if(Ul(n))return oN(n,t,r)}catch{}if(Array.isArray(e)&&e.length===2){var[s,a]=e,l,u;if(s==="auto")t!=null&&(l=Math.min(...t));else if(Ut(s))l=s;else if(typeof s=="function")try{t!=null&&(l=s(t==null?void 0:t[0]))}catch{}else if(typeof s=="string"&&B_.test(s)){var d=B_.exec(s);if(d==null||t==null)l=void 0;else{var m=+d[1];l=t[0]-m}}else l=t==null?void 0:t[0];if(a==="auto")t!=null&&(u=Math.max(...t));else if(Ut(a))u=a;else if(typeof a=="function")try{t!=null&&(u=a(t==null?void 0:t[1]))}catch{}else if(typeof a=="string"&&W_.test(a)){var f=W_.exec(a);if(f==null||t==null)u=void 0;else{var p=+f[1];u=t[1]+p}}else u=t==null?void 0:t[1];var v=[l,u];if(Ul(v))return t==null?v:oN(v,t,r)}}}var yu=1e9,cV={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},Fw,Qr=!0,za="[DecimalError] ",Rl=za+"Invalid argument: ",Mw=za+"Exponent out of range: ",vu=Math.floor,_l=Math.pow,uV=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,ha,Zn=1e7,Kr=7,wO=9007199254740991,bm=vu(wO/Kr),ht={};ht.absoluteValue=ht.abs=function(){var e=new this.constructor(this);return e.s&&(e.s=1),e};ht.comparedTo=ht.cmp=function(e){var t,r,n,s,a=this;if(e=new a.constructor(e),a.s!==e.s)return a.s||-e.s;if(a.e!==e.e)return a.e>e.e^a.s<0?1:-1;for(n=a.d.length,s=e.d.length,t=0,r=n<s?n:s;t<r;++t)if(a.d[t]!==e.d[t])return a.d[t]>e.d[t]^a.s<0?1:-1;return n===s?0:n>s^a.s<0?1:-1};ht.decimalPlaces=ht.dp=function(){var e=this,t=e.d.length-1,r=(t-e.e)*Kr;if(t=e.d[t],t)for(;t%10==0;t/=10)r--;return r<0?0:r};ht.dividedBy=ht.div=function(e){return Zi(this,new this.constructor(e))};ht.dividedToIntegerBy=ht.idiv=function(e){var t=this,r=t.constructor;return $r(Zi(t,new r(e),0,1),r.precision)};ht.equals=ht.eq=function(e){return!this.cmp(e)};ht.exponent=function(){return On(this)};ht.greaterThan=ht.gt=function(e){return this.cmp(e)>0};ht.greaterThanOrEqualTo=ht.gte=function(e){return this.cmp(e)>=0};ht.isInteger=ht.isint=function(){return this.e>this.d.length-2};ht.isNegative=ht.isneg=function(){return this.s<0};ht.isPositive=ht.ispos=function(){return this.s>0};ht.isZero=function(){return this.s===0};ht.lessThan=ht.lt=function(e){return this.cmp(e)<0};ht.lessThanOrEqualTo=ht.lte=function(e){return this.cmp(e)<1};ht.logarithm=ht.log=function(e){var t,r=this,n=r.constructor,s=n.precision,a=s+5;if(e===void 0)e=new n(10);else if(e=new n(e),e.s<1||e.eq(ha))throw Error(za+"NaN");if(r.s<1)throw Error(za+(r.s?"NaN":"-Infinity"));return r.eq(ha)?new n(0):(Qr=!1,t=Zi(Fd(r,a),Fd(e,a),a),Qr=!0,$r(t,s))};ht.minus=ht.sub=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?kO(t,e):bO(t,(e.s=-e.s,e))};ht.modulo=ht.mod=function(e){var t,r=this,n=r.constructor,s=n.precision;if(e=new n(e),!e.s)throw Error(za+"NaN");return r.s?(Qr=!1,t=Zi(r,e,0,1).times(e),Qr=!0,r.minus(t)):$r(new n(r),s)};ht.naturalExponential=ht.exp=function(){return jO(this)};ht.naturalLogarithm=ht.ln=function(){return Fd(this)};ht.negated=ht.neg=function(){var e=new this.constructor(this);return e.s=-e.s||0,e};ht.plus=ht.add=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?bO(t,e):kO(t,(e.s=-e.s,e))};ht.precision=ht.sd=function(e){var t,r,n,s=this;if(e!==void 0&&e!==!!e&&e!==1&&e!==0)throw Error(Rl+e);if(t=On(s)+1,n=s.d.length-1,r=n*Kr+1,n=s.d[n],n){for(;n%10==0;n/=10)r--;for(n=s.d[0];n>=10;n/=10)r++}return e&&t>r?t:r};ht.squareRoot=ht.sqrt=function(){var e,t,r,n,s,a,l,u=this,d=u.constructor;if(u.s<1){if(!u.s)return new d(0);throw Error(za+"NaN")}for(e=On(u),Qr=!1,s=Math.sqrt(+u),s==0||s==1/0?(t=_i(u.d),(t.length+e)%2==0&&(t+="0"),s=Math.sqrt(t),e=vu((e+1)/2)-(e<0||e%2),s==1/0?t="5e"+e:(t=s.toExponential(),t=t.slice(0,t.indexOf("e")+1)+e),n=new d(t)):n=new d(s.toString()),r=d.precision,s=l=r+3;;)if(a=n,n=a.plus(Zi(u,a,l+2)).times(.5),_i(a.d).slice(0,l)===(t=_i(n.d)).slice(0,l)){if(t=t.slice(l-3,l+1),s==l&&t=="4999"){if($r(a,r+1,0),a.times(a).eq(u)){n=a;break}}else if(t!="9999")break;l+=4}return Qr=!0,$r(n,r)};ht.times=ht.mul=function(e){var t,r,n,s,a,l,u,d,m,f=this,p=f.constructor,v=f.d,x=(e=new p(e)).d;if(!f.s||!e.s)return new p(0);for(e.s*=f.s,r=f.e+e.e,d=v.length,m=x.length,d<m&&(a=v,v=x,x=a,l=d,d=m,m=l),a=[],l=d+m,n=l;n--;)a.push(0);for(n=m;--n>=0;){for(t=0,s=d+n;s>n;)u=a[s]+x[n]*v[s-n-1]+t,a[s--]=u%Zn|0,t=u/Zn|0;a[s]=(a[s]+t)%Zn|0}for(;!a[--l];)a.pop();return t?++r:a.shift(),e.d=a,e.e=r,Qr?$r(e,p.precision):e};ht.toDecimalPlaces=ht.todp=function(e,t){var r=this,n=r.constructor;return r=new n(r),e===void 0?r:(Ai(e,0,yu),t===void 0?t=n.rounding:Ai(t,0,8),$r(r,e+On(r)+1,t))};ht.toExponential=function(e,t){var r,n=this,s=n.constructor;return e===void 0?r=Bl(n,!0):(Ai(e,0,yu),t===void 0?t=s.rounding:Ai(t,0,8),n=$r(new s(n),e+1,t),r=Bl(n,!0,e+1)),r};ht.toFixed=function(e,t){var r,n,s=this,a=s.constructor;return e===void 0?Bl(s):(Ai(e,0,yu),t===void 0?t=a.rounding:Ai(t,0,8),n=$r(new a(s),e+On(s)+1,t),r=Bl(n.abs(),!1,e+On(n)+1),s.isneg()&&!s.isZero()?"-"+r:r)};ht.toInteger=ht.toint=function(){var e=this,t=e.constructor;return $r(new t(e),On(e)+1,t.rounding)};ht.toNumber=function(){return+this};ht.toPower=ht.pow=function(e){var t,r,n,s,a,l,u=this,d=u.constructor,m=12,f=+(e=new d(e));if(!e.s)return new d(ha);if(u=new d(u),!u.s){if(e.s<1)throw Error(za+"Infinity");return u}if(u.eq(ha))return u;if(n=d.precision,e.eq(ha))return $r(u,n);if(t=e.e,r=e.d.length-1,l=t>=r,a=u.s,l){if((r=f<0?-f:f)<=wO){for(s=new d(ha),t=Math.ceil(n/Kr+4),Qr=!1;r%2&&(s=s.times(u),cN(s.d,t)),r=vu(r/2),r!==0;)u=u.times(u),cN(u.d,t);return Qr=!0,e.s<0?new d(ha).div(s):$r(s,n)}}else if(a<0)throw Error(za+"NaN");return a=a<0&&e.d[Math.max(t,r)]&1?-1:1,u.s=1,Qr=!1,s=e.times(Fd(u,n+m)),Qr=!0,s=jO(s),s.s=a,s};ht.toPrecision=function(e,t){var r,n,s=this,a=s.constructor;return e===void 0?(r=On(s),n=Bl(s,r<=a.toExpNeg||r>=a.toExpPos)):(Ai(e,1,yu),t===void 0?t=a.rounding:Ai(t,0,8),s=$r(new a(s),e,t),r=On(s),n=Bl(s,e<=r||r<=a.toExpNeg,e)),n};ht.toSignificantDigits=ht.tosd=function(e,t){var r=this,n=r.constructor;return e===void 0?(e=n.precision,t=n.rounding):(Ai(e,1,yu),t===void 0?t=n.rounding:Ai(t,0,8)),$r(new n(r),e,t)};ht.toString=ht.valueOf=ht.val=ht.toJSON=ht[Symbol.for("nodejs.util.inspect.custom")]=function(){var e=this,t=On(e),r=e.constructor;return Bl(e,t<=r.toExpNeg||t>=r.toExpPos)};function bO(e,t){var r,n,s,a,l,u,d,m,f=e.constructor,p=f.precision;if(!e.s||!t.s)return t.s||(t=new f(e)),Qr?$r(t,p):t;if(d=e.d,m=t.d,l=e.e,s=t.e,d=d.slice(),a=l-s,a){for(a<0?(n=d,a=-a,u=m.length):(n=m,s=l,u=d.length),l=Math.ceil(p/Kr),u=l>u?l+1:u+1,a>u&&(a=u,n.length=1),n.reverse();a--;)n.push(0);n.reverse()}for(u=d.length,a=m.length,u-a<0&&(a=u,n=m,m=d,d=n),r=0;a;)r=(d[--a]=d[a]+m[a]+r)/Zn|0,d[a]%=Zn;for(r&&(d.unshift(r),++s),u=d.length;d[--u]==0;)d.pop();return t.d=d,t.e=s,Qr?$r(t,p):t}function Ai(e,t,r){if(e!==~~e||e<t||e>r)throw Error(Rl+e)}function _i(e){var t,r,n,s=e.length-1,a="",l=e[0];if(s>0){for(a+=l,t=1;t<s;t++)n=e[t]+"",r=Kr-n.length,r&&(a+=Wo(r)),a+=n;l=e[t],n=l+"",r=Kr-n.length,r&&(a+=Wo(r))}else if(l===0)return"0";for(;l%10===0;)l/=10;return a+l}var Zi=(function(){function e(n,s){var a,l=0,u=n.length;for(n=n.slice();u--;)a=n[u]*s+l,n[u]=a%Zn|0,l=a/Zn|0;return l&&n.unshift(l),n}function t(n,s,a,l){var u,d;if(a!=l)d=a>l?1:-1;else for(u=d=0;u<a;u++)if(n[u]!=s[u]){d=n[u]>s[u]?1:-1;break}return d}function r(n,s,a){for(var l=0;a--;)n[a]-=l,l=n[a]<s[a]?1:0,n[a]=l*Zn+n[a]-s[a];for(;!n[0]&&n.length>1;)n.shift()}return function(n,s,a,l){var u,d,m,f,p,v,x,w,k,b,_,N,C,T,P,A,M,R,K=n.constructor,B=n.s==s.s?1:-1,ie=n.d,G=s.d;if(!n.s)return new K(n);if(!s.s)throw Error(za+"Division by zero");for(d=n.e-s.e,M=G.length,P=ie.length,x=new K(B),w=x.d=[],m=0;G[m]==(ie[m]||0);)++m;if(G[m]>(ie[m]||0)&&--d,a==null?N=a=K.precision:l?N=a+(On(n)-On(s))+1:N=a,N<0)return new K(0);if(N=N/Kr+2|0,m=0,M==1)for(f=0,G=G[0],N++;(m<P||f)&&N--;m++)C=f*Zn+(ie[m]||0),w[m]=C/G|0,f=C%G|0;else{for(f=Zn/(G[0]+1)|0,f>1&&(G=e(G,f),ie=e(ie,f),M=G.length,P=ie.length),T=M,k=ie.slice(0,M),b=k.length;b<M;)k[b++]=0;R=G.slice(),R.unshift(0),A=G[0],G[1]>=Zn/2&&++A;do f=0,u=t(G,k,M,b),u<0?(_=k[0],M!=b&&(_=_*Zn+(k[1]||0)),f=_/A|0,f>1?(f>=Zn&&(f=Zn-1),p=e(G,f),v=p.length,b=k.length,u=t(p,k,v,b),u==1&&(f--,r(p,M<v?R:G,v))):(f==0&&(u=f=1),p=G.slice()),v=p.length,v<b&&p.unshift(0),r(k,p,b),u==-1&&(b=k.length,u=t(G,k,M,b),u<1&&(f++,r(k,M<b?R:G,b))),b=k.length):u===0&&(f++,k=[0]),w[m++]=f,u&&k[0]?k[b++]=ie[T]||0:(k=[ie[T]],b=1);while((T++<P||k[0]!==void 0)&&N--)}return w[0]||w.shift(),x.e=d,$r(x,l?a+On(x)+1:a)}})();function jO(e,t){var r,n,s,a,l,u,d=0,m=0,f=e.constructor,p=f.precision;if(On(e)>16)throw Error(Mw+On(e));if(!e.s)return new f(ha);for(Qr=!1,u=p,l=new f(.03125);e.abs().gte(.1);)e=e.times(l),m+=5;for(n=Math.log(_l(2,m))/Math.LN10*2+5|0,u+=n,r=s=a=new f(ha),f.precision=u;;){if(s=$r(s.times(e),u),r=r.times(++d),l=a.plus(Zi(s,r,u)),_i(l.d).slice(0,u)===_i(a.d).slice(0,u)){for(;m--;)a=$r(a.times(a),u);return f.precision=p,t==null?(Qr=!0,$r(a,p)):a}a=l}}function On(e){for(var t=e.e*Kr,r=e.d[0];r>=10;r/=10)t++;return t}function Fv(e,t,r){if(t>e.LN10.sd())throw Qr=!0,r&&(e.precision=r),Error(za+"LN10 precision limit exceeded");return $r(new e(e.LN10),t)}function Wo(e){for(var t="";e--;)t+="0";return t}function Fd(e,t){var r,n,s,a,l,u,d,m,f,p=1,v=10,x=e,w=x.d,k=x.constructor,b=k.precision;if(x.s<1)throw Error(za+(x.s?"NaN":"-Infinity"));if(x.eq(ha))return new k(0);if(t==null?(Qr=!1,m=b):m=t,x.eq(10))return t==null&&(Qr=!0),Fv(k,m);if(m+=v,k.precision=m,r=_i(w),n=r.charAt(0),a=On(x),Math.abs(a)<15e14){for(;n<7&&n!=1||n==1&&r.charAt(1)>3;)x=x.times(e),r=_i(x.d),n=r.charAt(0),p++;a=On(x),n>1?(x=new k("0."+r),a++):x=new k(n+"."+r.slice(1))}else return d=Fv(k,m+2,b).times(a+""),x=Fd(new k(n+"."+r.slice(1)),m-v).plus(d),k.precision=b,t==null?(Qr=!0,$r(x,b)):x;for(u=l=x=Zi(x.minus(ha),x.plus(ha),m),f=$r(x.times(x),m),s=3;;){if(l=$r(l.times(f),m),d=u.plus(Zi(l,new k(s),m)),_i(d.d).slice(0,m)===_i(u.d).slice(0,m))return u=u.times(2),a!==0&&(u=u.plus(Fv(k,m+2,b).times(a+""))),u=Zi(u,new k(p),m),k.precision=b,t==null?(Qr=!0,$r(u,b)):u;u=d,s+=2}}function lN(e,t){var r,n,s;for((r=t.indexOf("."))>-1&&(t=t.replace(".","")),(n=t.search(/e/i))>0?(r<0&&(r=n),r+=+t.slice(n+1),t=t.substring(0,n)):r<0&&(r=t.length),n=0;t.charCodeAt(n)===48;)++n;for(s=t.length;t.charCodeAt(s-1)===48;)--s;if(t=t.slice(n,s),t){if(s-=n,r=r-n-1,e.e=vu(r/Kr),e.d=[],n=(r+1)%Kr,r<0&&(n+=Kr),n<s){for(n&&e.d.push(+t.slice(0,n)),s-=Kr;n<s;)e.d.push(+t.slice(n,n+=Kr));t=t.slice(n),n=Kr-t.length}else n-=s;for(;n--;)t+="0";if(e.d.push(+t),Qr&&(e.e>bm||e.e<-bm))throw Error(Mw+r)}else e.s=0,e.e=0,e.d=[0];return e}function $r(e,t,r){var n,s,a,l,u,d,m,f,p=e.d;for(l=1,a=p[0];a>=10;a/=10)l++;if(n=t-l,n<0)n+=Kr,s=t,m=p[f=0];else{if(f=Math.ceil((n+1)/Kr),a=p.length,f>=a)return e;for(m=a=p[f],l=1;a>=10;a/=10)l++;n%=Kr,s=n-Kr+l}if(r!==void 0&&(a=_l(10,l-s-1),u=m/a%10|0,d=t<0||p[f+1]!==void 0||m%a,d=r<4?(u||d)&&(r==0||r==(e.s<0?3:2)):u>5||u==5&&(r==4||d||r==6&&(n>0?s>0?m/_l(10,l-s):0:p[f-1])%10&1||r==(e.s<0?8:7))),t<1||!p[0])return d?(a=On(e),p.length=1,t=t-a-1,p[0]=_l(10,(Kr-t%Kr)%Kr),e.e=vu(-t/Kr)||0):(p.length=1,p[0]=e.e=e.s=0),e;if(n==0?(p.length=f,a=1,f--):(p.length=f+1,a=_l(10,Kr-n),p[f]=s>0?(m/_l(10,l-s)%_l(10,s)|0)*a:0),d)for(;;)if(f==0){(p[0]+=a)==Zn&&(p[0]=1,++e.e);break}else{if(p[f]+=a,p[f]!=Zn)break;p[f--]=0,a=1}for(n=p.length;p[--n]===0;)p.pop();if(Qr&&(e.e>bm||e.e<-bm))throw Error(Mw+On(e));return e}function kO(e,t){var r,n,s,a,l,u,d,m,f,p,v=e.constructor,x=v.precision;if(!e.s||!t.s)return t.s?t.s=-t.s:t=new v(e),Qr?$r(t,x):t;if(d=e.d,p=t.d,n=t.e,m=e.e,d=d.slice(),l=m-n,l){for(f=l<0,f?(r=d,l=-l,u=p.length):(r=p,n=m,u=d.length),s=Math.max(Math.ceil(x/Kr),u)+2,l>s&&(l=s,r.length=1),r.reverse(),s=l;s--;)r.push(0);r.reverse()}else{for(s=d.length,u=p.length,f=s<u,f&&(u=s),s=0;s<u;s++)if(d[s]!=p[s]){f=d[s]<p[s];break}l=0}for(f&&(r=d,d=p,p=r,t.s=-t.s),u=d.length,s=p.length-u;s>0;--s)d[u++]=0;for(s=p.length;s>l;){if(d[--s]<p[s]){for(a=s;a&&d[--a]===0;)d[a]=Zn-1;--d[a],d[s]+=Zn}d[s]-=p[s]}for(;d[--u]===0;)d.pop();for(;d[0]===0;d.shift())--n;return d[0]?(t.d=d,t.e=n,Qr?$r(t,x):t):new v(0)}function Bl(e,t,r){var n,s=On(e),a=_i(e.d),l=a.length;return t?(r&&(n=r-l)>0?a=a.charAt(0)+"."+a.slice(1)+Wo(n):l>1&&(a=a.charAt(0)+"."+a.slice(1)),a=a+(s<0?"e":"e+")+s):s<0?(a="0."+Wo(-s-1)+a,r&&(n=r-l)>0&&(a+=Wo(n))):s>=l?(a+=Wo(s+1-l),r&&(n=r-s-1)>0&&(a=a+"."+Wo(n))):((n=s+1)<l&&(a=a.slice(0,n)+"."+a.slice(n)),r&&(n=r-l)>0&&(s+1===l&&(a+="."),a+=Wo(n))),e.s<0?"-"+a:a}function cN(e,t){if(e.length>t)return e.length=t,!0}function SO(e){var t,r,n;function s(a){var l=this;if(!(l instanceof s))return new s(a);if(l.constructor=s,a instanceof s){l.s=a.s,l.e=a.e,l.d=(a=a.d)?a.slice():a;return}if(typeof a=="number"){if(a*0!==0)throw Error(Rl+a);if(a>0)l.s=1;else if(a<0)a=-a,l.s=-1;else{l.s=0,l.e=0,l.d=[0];return}if(a===~~a&&a<1e7){l.e=0,l.d=[a];return}return lN(l,a.toString())}else if(typeof a!="string")throw Error(Rl+a);if(a.charCodeAt(0)===45?(a=a.slice(1),l.s=-1):l.s=1,uV.test(a))lN(l,a);else throw Error(Rl+a)}if(s.prototype=ht,s.ROUND_UP=0,s.ROUND_DOWN=1,s.ROUND_CEIL=2,s.ROUND_FLOOR=3,s.ROUND_HALF_UP=4,s.ROUND_HALF_DOWN=5,s.ROUND_HALF_EVEN=6,s.ROUND_HALF_CEIL=7,s.ROUND_HALF_FLOOR=8,s.clone=SO,s.config=s.set=dV,e===void 0&&(e={}),e)for(n=["precision","rounding","toExpNeg","toExpPos","LN10"],t=0;t<n.length;)e.hasOwnProperty(r=n[t++])||(e[r]=this[r]);return s.config(e),s}function dV(e){if(!e||typeof e!="object")throw Error(za+"Object expected");var t,r,n,s=["precision",1,yu,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(t=0;t<s.length;t+=3)if((n=e[r=s[t]])!==void 0)if(vu(n)===n&&n>=s[t+1]&&n<=s[t+2])this[r]=n;else throw Error(Rl+r+": "+n);if((n=e[r="LN10"])!==void 0)if(n==Math.LN10)this[r]=new this(n);else throw Error(Rl+r+": "+n);return this}var Fw=SO(cV);ha=new Fw(1);const Cr=Fw;var fV=e=>e,_O={},NO=e=>e===_O,uN=e=>function t(){return arguments.length===0||arguments.length===1&&NO(arguments.length<=0?void 0:arguments[0])?t:e(...arguments)},CO=(e,t)=>e===1?t:uN(function(){for(var r=arguments.length,n=new Array(r),s=0;s<r;s++)n[s]=arguments[s];var a=n.filter(l=>l!==_O).length;return a>=e?t(...n):CO(e-a,uN(function(){for(var l=arguments.length,u=new Array(l),d=0;d<l;d++)u[d]=arguments[d];var m=n.map(f=>NO(f)?u.shift():f);return t(...m,...u)}))}),wp=e=>CO(e.length,e),rx=(e,t)=>{for(var r=[],n=e;n<t;++n)r[n-e]=n;return r},hV=wp((e,t)=>Array.isArray(t)?t.map(e):Object.keys(t).map(r=>t[r]).map(e)),mV=function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];if(!r.length)return fV;var s=r.reverse(),a=s[0],l=s.slice(1);return function(){return l.reduce((u,d)=>d(u),a(...arguments))}},nx=e=>Array.isArray(e)?e.reverse():e.split("").reverse().join(""),EO=e=>{var t=null,r=null;return function(){for(var n=arguments.length,s=new Array(n),a=0;a<n;a++)s[a]=arguments[a];return t&&s.every((l,u)=>{var d;return l===((d=t)===null||d===void 0?void 0:d[u])})||(t=s,r=e(...s)),r}};function PO(e){var t;return e===0?t=1:t=Math.floor(new Cr(e).abs().log(10).toNumber())+1,t}function AO(e,t,r){for(var n=new Cr(e),s=0,a=[];n.lt(t)&&s<1e5;)a.push(n.toNumber()),n=n.add(r),s++;return a}wp((e,t,r)=>{var n=+e,s=+t;return n+r*(s-n)});wp((e,t,r)=>{var n=t-+e;return n=n||1/0,(r-e)/n});wp((e,t,r)=>{var n=t-+e;return n=n||1/0,Math.max(0,Math.min(1,(r-e)/n))});var OO=e=>{var[t,r]=e,[n,s]=[t,r];return t>r&&([n,s]=[r,t]),[n,s]},TO=(e,t,r)=>{if(e.lte(0))return new Cr(0);var n=PO(e.toNumber()),s=new Cr(10).pow(n),a=e.div(s),l=n!==1?.05:.1,u=new Cr(Math.ceil(a.div(l).toNumber())).add(r).mul(l),d=u.mul(s);return t?new Cr(d.toNumber()):new Cr(Math.ceil(d.toNumber()))},pV=(e,t,r)=>{var n=new Cr(1),s=new Cr(e);if(!s.isint()&&r){var a=Math.abs(e);a<1?(n=new Cr(10).pow(PO(e)-1),s=new Cr(Math.floor(s.div(n).toNumber())).mul(n)):a>1&&(s=new Cr(Math.floor(e)))}else e===0?s=new Cr(Math.floor((t-1)/2)):r||(s=new Cr(Math.floor(e)));var l=Math.floor((t-1)/2),u=mV(hV(d=>s.add(new Cr(d-l).mul(n)).toNumber()),rx);return u(0,t)},IO=function(t,r,n,s){var a=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((r-t)/(n-1)))return{step:new Cr(0),tickMin:new Cr(0),tickMax:new Cr(0)};var l=TO(new Cr(r).sub(t).div(n-1),s,a),u;t<=0&&r>=0?u=new Cr(0):(u=new Cr(t).add(r).div(2),u=u.sub(new Cr(u).mod(l)));var d=Math.ceil(u.sub(t).div(l).toNumber()),m=Math.ceil(new Cr(r).sub(u).div(l).toNumber()),f=d+m+1;return f>n?IO(t,r,n,s,a+1):(f<n&&(m=r>0?m+(n-f):m,d=r>0?d:d+(n-f)),{step:l,tickMin:u.sub(new Cr(d).mul(l)),tickMax:u.add(new Cr(m).mul(l))})};function gV(e){var[t,r]=e,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,a=Math.max(n,2),[l,u]=OO([t,r]);if(l===-1/0||u===1/0){var d=u===1/0?[l,...rx(0,n-1).map(()=>1/0)]:[...rx(0,n-1).map(()=>-1/0),u];return t>r?nx(d):d}if(l===u)return pV(l,n,s);var{step:m,tickMin:f,tickMax:p}=IO(l,u,a,s,0),v=AO(f,p.add(new Cr(.1).mul(m)),m);return t>r?nx(v):v}function yV(e,t){var[r,n]=e,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,[a,l]=OO([r,n]);if(a===-1/0||l===1/0)return[r,n];if(a===l)return[a];var u=Math.max(t,2),d=TO(new Cr(l).sub(a).div(u-1),s,0),m=[...AO(new Cr(a),new Cr(l),d),l];return s===!1&&(m=m.map(f=>Math.round(f))),r>n?nx(m):m}var vV=EO(gV),xV=EO(yV),DO=e=>e.rootProps.maxBarSize,wV=e=>e.rootProps.barGap,$O=e=>e.rootProps.barCategoryGap,bV=e=>e.rootProps.barSize,bp=e=>e.rootProps.stackOffset,Lw=e=>e.options.chartName,zw=e=>e.rootProps.syncId,RO=e=>e.rootProps.syncMethod,Uw=e=>e.options.eventEmitter,ta={grid:-100,barBackground:-50,area:100,cursorRectangle:200,bar:300,line:400,axis:500,scatter:600,activeBar:1e3,cursorLine:1100,activeDot:1200,label:2e3},Ki={allowDuplicatedCategory:!0,angleAxisId:0,reversed:!1,scale:"auto",tick:!0,type:"category"},da={allowDataOverflow:!1,allowDuplicatedCategory:!0,radiusAxisId:0,scale:"auto",tick:!0,tickCount:5,type:"number"},jp=(e,t)=>{if(!(!e||!t))return e!=null&&e.reversed?[t[1],t[0]]:t},jV={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:!1,dataKey:void 0,domain:void 0,id:Ki.angleAxisId,includeHidden:!1,name:void 0,reversed:Ki.reversed,scale:Ki.scale,tick:Ki.tick,tickCount:void 0,ticks:void 0,type:Ki.type,unit:void 0},kV={allowDataOverflow:da.allowDataOverflow,allowDecimals:!1,allowDuplicatedCategory:da.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:da.radiusAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:da.scale,tick:da.tick,tickCount:da.tickCount,ticks:void 0,type:da.type,unit:void 0},SV={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:Ki.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:Ki.angleAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:Ki.scale,tick:Ki.tick,tickCount:void 0,ticks:void 0,type:"number",unit:void 0},_V={allowDataOverflow:da.allowDataOverflow,allowDecimals:!1,allowDuplicatedCategory:da.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:da.radiusAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:da.scale,tick:da.tick,tickCount:da.tickCount,ticks:void 0,type:"category",unit:void 0},Bw=(e,t)=>e.polarAxis.angleAxis[t]!=null?e.polarAxis.angleAxis[t]:e.layout.layoutType==="radial"?SV:jV,Ww=(e,t)=>e.polarAxis.radiusAxis[t]!=null?e.polarAxis.radiusAxis[t]:e.layout.layoutType==="radial"?_V:kV,kp=e=>e.polarOptions,Vw=je([fo,ho,ns],v7),MO=je([kp,Vw],(e,t)=>{if(e!=null)return si(e.innerRadius,t,0)}),FO=je([kp,Vw],(e,t)=>{if(e!=null)return si(e.outerRadius,t,t*.8)}),NV=e=>{if(e==null)return[0,0];var{startAngle:t,endAngle:r}=e;return[t,r]},LO=je([kp],NV);je([Bw,LO],jp);var zO=je([Vw,MO,FO],(e,t,r)=>{if(!(e==null||t==null||r==null))return[t,r]});je([Ww,zO],jp);var UO=je([Er,kp,MO,FO,fo,ho],(e,t,r,n,s,a)=>{if(!(e!=="centric"&&e!=="radial"||t==null||r==null||n==null)){var{cx:l,cy:u,startAngle:d,endAngle:m}=t;return{cx:si(l,s,s/2),cy:si(u,a,a/2),innerRadius:r,outerRadius:n,startAngle:d,endAngle:m,clockWise:!1}}}),Un=(e,t)=>t,Sp=(e,t,r)=>r;function qw(e){return e==null?void 0:e.id}function BO(e,t,r){var{chartData:n=[]}=t,{allowDuplicatedCategory:s,dataKey:a}=r,l=new Map;return e.forEach(u=>{var d,m=(d=u.data)!==null&&d!==void 0?d:n;if(!(m==null||m.length===0)){var f=qw(u);m.forEach((p,v)=>{var x=a==null||s?v:String(Us(p,a,null)),w=Us(p,u.dataKey,0),k;l.has(x)?k=l.get(x):k={},Object.assign(k,{[f]:w}),l.set(x,k)})}}),Array.from(l.values())}function _p(e){return e.stackId!=null&&e.dataKey!=null}var Np=(e,t)=>e===t?!0:e==null||t==null?!1:e[0]===t[0]&&e[1]===t[1];function Cp(e,t){return Array.isArray(e)&&Array.isArray(t)&&e.length===0&&t.length===0?!0:e===t}function CV(e,t){if(e.length===t.length){for(var r=0;r<e.length;r++)if(e[r]!==t[r])return!1;return!0}return!1}var Bn=e=>{var t=Er(e);return t==="horizontal"?"xAxis":t==="vertical"?"yAxis":t==="centric"?"angleAxis":"radiusAxis"},xu=e=>e.tooltip.settings.axisId;function dN(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function jm(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?dN(Object(r),!0).forEach(function(n){EV(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):dN(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function EV(e,t,r){return(t=PV(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function PV(e){var t=AV(e,"string");return typeof t=="symbol"?t:t+""}function AV(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var sx=[0,"auto"],la={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:void 0,height:30,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"bottom",padding:{left:0,right:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"category",unit:void 0},WO=(e,t)=>e.cartesianAxis.xAxis[t],po=(e,t)=>{var r=WO(e,t);return r??la},ca={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:sx,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"left",padding:{top:0,bottom:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"number",unit:void 0,width:Yd},VO=(e,t)=>e.cartesianAxis.yAxis[t],go=(e,t)=>{var r=VO(e,t);return r??ca},OV={domain:[0,"auto"],includeHidden:!1,reversed:!1,allowDataOverflow:!1,allowDuplicatedCategory:!1,dataKey:void 0,id:0,name:"",range:[64,64],scale:"auto",type:"number",unit:""},Hw=(e,t)=>{var r=e.cartesianAxis.zAxis[t];return r??OV},Bs=(e,t,r)=>{switch(t){case"xAxis":return po(e,r);case"yAxis":return go(e,r);case"zAxis":return Hw(e,r);case"angleAxis":return Bw(e,r);case"radiusAxis":return Ww(e,r);default:throw new Error("Unexpected axis type: ".concat(t))}},TV=(e,t,r)=>{switch(t){case"xAxis":return po(e,r);case"yAxis":return go(e,r);default:throw new Error("Unexpected axis type: ".concat(t))}},ef=(e,t,r)=>{switch(t){case"xAxis":return po(e,r);case"yAxis":return go(e,r);case"angleAxis":return Bw(e,r);case"radiusAxis":return Ww(e,r);default:throw new Error("Unexpected axis type: ".concat(t))}},qO=e=>e.graphicalItems.cartesianItems.some(t=>t.type==="bar")||e.graphicalItems.polarItems.some(t=>t.type==="radialBar");function HO(e,t){return r=>{switch(e){case"xAxis":return"xAxisId"in r&&r.xAxisId===t;case"yAxis":return"yAxisId"in r&&r.yAxisId===t;case"zAxis":return"zAxisId"in r&&r.zAxisId===t;case"angleAxis":return"angleAxisId"in r&&r.angleAxisId===t;case"radiusAxis":return"radiusAxisId"in r&&r.radiusAxisId===t;default:return!1}}}var Kw=e=>e.graphicalItems.cartesianItems,IV=je([Un,Sp],HO),KO=(e,t,r)=>e.filter(r).filter(n=>(t==null?void 0:t.includeHidden)===!0?!0:!n.hide),tf=je([Kw,Bs,IV],KO,{memoizeOptions:{resultEqualityCheck:Cp}}),GO=je([tf],e=>e.filter(t=>t.type==="area"||t.type==="bar").filter(_p)),YO=e=>e.filter(t=>!("stackId"in t)||t.stackId===void 0),DV=je([tf],YO),JO=e=>e.map(t=>t.data).filter(Boolean).flat(1),$V=je([tf],JO,{memoizeOptions:{resultEqualityCheck:Cp}}),XO=(e,t)=>{var{chartData:r=[],dataStartIndex:n,dataEndIndex:s}=t;return e.length>0?e:r.slice(n,s+1)},Gw=je([$V,Rw],XO),QO=(e,t,r)=>(t==null?void 0:t.dataKey)!=null?e.map(n=>({value:Us(n,t.dataKey)})):r.length>0?r.map(n=>n.dataKey).flatMap(n=>e.map(s=>({value:Us(s,n)}))):e.map(n=>({value:n})),Ep=je([Gw,Bs,tf],QO);function ZO(e,t){switch(e){case"xAxis":return t.direction==="x";case"yAxis":return t.direction==="y";default:return!1}}function Oh(e){if(Pi(e)||e instanceof Date){var t=Number(e);if(vn(t))return t}}function fN(e){if(Array.isArray(e)){var t=[Oh(e[0]),Oh(e[1])];return Ul(t)?t:void 0}var r=Oh(e);if(r!=null)return[r,r]}function co(e){return e.map(Oh).filter(rz)}function RV(e,t,r){return!r||typeof t!="number"||Ei(t)?[]:r.length?co(r.flatMap(n=>{var s=Us(e,n.dataKey),a,l;if(Array.isArray(s)?[a,l]=s:a=l=s,!(!vn(a)||!vn(l)))return[t-a,t+l]})):[]}var Wn=e=>{var t=Bn(e),r=xu(e);return ef(e,t,r)},eT=je([Wn],e=>e==null?void 0:e.dataKey),MV=je([GO,Rw,Wn],BO),tT=(e,t,r)=>{var n={},s=t.reduce((a,l)=>(l.stackId==null||(a[l.stackId]==null&&(a[l.stackId]=[]),a[l.stackId].push(l)),a),n);return Object.fromEntries(Object.entries(s).map(a=>{var[l,u]=a,d=u.map(qw);return[l,{stackedData:vU(e,d,r),graphicalItems:u}]}))},ax=je([MV,GO,bp],tT),rT=(e,t,r,n)=>{var{dataStartIndex:s,dataEndIndex:a}=t;if(n==null&&r!=="zAxis"){var l=kU(e,s,a);if(!(l!=null&&l[0]===0&&l[1]===0))return l}},FV=je([Bs],e=>e.allowDataOverflow),Yw=e=>{var t;if(e==null||!("domain"in e))return sx;if(e.domain!=null)return e.domain;if(e.ticks!=null){if(e.type==="number"){var r=co(e.ticks);return[Math.min(...r),Math.max(...r)]}if(e.type==="category")return e.ticks.map(String)}return(t=e==null?void 0:e.domain)!==null&&t!==void 0?t:sx},nT=je([Bs],Yw),sT=je([nT,FV],xO),LV=je([ax,al,Un,sT],rT,{memoizeOptions:{resultEqualityCheck:Np}}),Jw=e=>e.errorBars,zV=(e,t,r)=>e.flatMap(n=>t[n.id]).filter(Boolean).filter(n=>ZO(r,n)),km=function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];var s=r.filter(Boolean);if(s.length!==0){var a=s.flat(),l=Math.min(...a),u=Math.max(...a);return[l,u]}},aT=(e,t,r,n,s)=>{var a,l;if(r.length>0&&e.forEach(u=>{r.forEach(d=>{var m,f,p=(m=n[d.id])===null||m===void 0?void 0:m.filter(_=>ZO(s,_)),v=Us(u,(f=t.dataKey)!==null&&f!==void 0?f:d.dataKey),x=RV(u,v,p);if(x.length>=2){var w=Math.min(...x),k=Math.max(...x);(a==null||w<a)&&(a=w),(l==null||k>l)&&(l=k)}var b=fN(v);b!=null&&(a=a==null?b[0]:Math.min(a,b[0]),l=l==null?b[1]:Math.max(l,b[1]))})}),(t==null?void 0:t.dataKey)!=null&&e.forEach(u=>{var d=fN(Us(u,t.dataKey));d!=null&&(a=a==null?d[0]:Math.min(a,d[0]),l=l==null?d[1]:Math.max(l,d[1]))}),vn(a)&&vn(l))return[a,l]},UV=je([Gw,Bs,DV,Jw,Un],aT,{memoizeOptions:{resultEqualityCheck:Np}});function BV(e){var{value:t}=e;if(Pi(t)||t instanceof Date)return t}var WV=(e,t,r)=>{var n=e.map(BV).filter(s=>s!=null);return r&&(t.dataKey==null||t.allowDuplicatedCategory&&OP(n))?FA(0,e.length):t.allowDuplicatedCategory?n:Array.from(new Set(n))},iT=e=>e.referenceElements.dots,wu=(e,t,r)=>e.filter(n=>n.ifOverflow==="extendDomain").filter(n=>t==="xAxis"?n.xAxisId===r:n.yAxisId===r),VV=je([iT,Un,Sp],wu),oT=e=>e.referenceElements.areas,qV=je([oT,Un,Sp],wu),lT=e=>e.referenceElements.lines,HV=je([lT,Un,Sp],wu),cT=(e,t)=>{var r=co(e.map(n=>t==="xAxis"?n.x:n.y));if(r.length!==0)return[Math.min(...r),Math.max(...r)]},KV=je(VV,Un,cT),uT=(e,t)=>{var r=co(e.flatMap(n=>[t==="xAxis"?n.x1:n.y1,t==="xAxis"?n.x2:n.y2]));if(r.length!==0)return[Math.min(...r),Math.max(...r)]},GV=je([qV,Un],uT);function YV(e){var t;if(e.x!=null)return co([e.x]);var r=(t=e.segment)===null||t===void 0?void 0:t.map(n=>n.x);return r==null||r.length===0?[]:co(r)}function JV(e){var t;if(e.y!=null)return co([e.y]);var r=(t=e.segment)===null||t===void 0?void 0:t.map(n=>n.y);return r==null||r.length===0?[]:co(r)}var dT=(e,t)=>{var r=e.flatMap(n=>t==="xAxis"?YV(n):JV(n));if(r.length!==0)return[Math.min(...r),Math.max(...r)]},XV=je([HV,Un],dT),QV=je(KV,XV,GV,(e,t,r)=>km(e,r,t)),fT=(e,t,r,n,s,a,l,u)=>{if(r!=null)return r;var d=l==="vertical"&&u==="xAxis"||l==="horizontal"&&u==="yAxis",m=d?km(n,a,s):km(a,s);return lV(t,m,e.allowDataOverflow)},ZV=je([Bs,nT,sT,LV,UV,QV,Er,Un],fT,{memoizeOptions:{resultEqualityCheck:Np}}),eq=[0,1],hT=(e,t,r,n,s,a,l)=>{if(!((e==null||r==null||r.length===0)&&l===void 0)){var{dataKey:u,type:d}=e,m=Jl(t,a);if(m&&u==null){var f;return FA(0,(f=r==null?void 0:r.length)!==null&&f!==void 0?f:0)}return d==="category"?WV(n,e,m):s==="expand"?eq:l}},Xw=je([Bs,Er,Gw,Ep,bp,Un,ZV],hT),mT=(e,t,r,n,s)=>{if(e!=null){var{scale:a,type:l}=e;if(a==="auto")return t==="radial"&&s==="radiusAxis"?"band":t==="radial"&&s==="angleAxis"?"linear":l==="category"&&n&&(n.indexOf("LineChart")>=0||n.indexOf("AreaChart")>=0||n.indexOf("ComposedChart")>=0&&!r)?"point":l==="category"?"band":"linear";if(typeof a=="string"){var u="scale".concat(Hd(a));return u in hd?u:"point"}}},rf=je([Bs,Er,qO,Lw,Un],mT);function tq(e){if(e!=null){if(e in hd)return hd[e]();var t="scale".concat(Hd(e));if(t in hd)return hd[t]()}}function Qw(e,t,r,n){if(!(r==null||n==null)){if(typeof e.scale=="function")return e.scale.copy().domain(r).range(n);var s=tq(t);if(s!=null){var a=s.domain(r).range(n);return hU(a),a}}}var pT=(e,t,r)=>{var n=Yw(t);if(!(r!=="auto"&&r!=="linear")){if(t!=null&&t.tickCount&&Array.isArray(n)&&(n[0]==="auto"||n[1]==="auto")&&Ul(e))return vV(e,t.tickCount,t.allowDecimals);if(t!=null&&t.tickCount&&t.type==="number"&&Ul(e))return xV(e,t.tickCount,t.allowDecimals)}},Zw=je([Xw,ef,rf],pT),gT=(e,t,r,n)=>{if(n!=="angleAxis"&&(e==null?void 0:e.type)==="number"&&Ul(t)&&Array.isArray(r)&&r.length>0){var s=t[0],a=r[0],l=t[1],u=r[r.length-1];return[Math.min(s,a),Math.max(l,u)]}return t},rq=je([Bs,Xw,Zw,Un],gT),nq=je(Ep,Bs,(e,t)=>{if(!(!t||t.type!=="number")){var r=1/0,n=Array.from(co(e.map(u=>u.value))).sort((u,d)=>u-d);if(n.length<2)return 1/0;var s=n[n.length-1]-n[0];if(s===0)return 1/0;for(var a=0;a<n.length-1;a++){var l=n[a+1]-n[a];r=Math.min(r,l)}return r/s}}),yT=je(nq,Er,$O,ns,(e,t,r,n)=>n,(e,t,r,n,s)=>{if(!vn(e))return 0;var a=t==="vertical"?n.height:n.width;if(s==="gap")return e*a/2;if(s==="no-gap"){var l=si(r,e*a),u=e*a/2;return u-l-(u-l)/a*l}return 0}),sq=(e,t)=>{var r=po(e,t);return r==null||typeof r.padding!="string"?0:yT(e,"xAxis",t,r.padding)},aq=(e,t)=>{var r=go(e,t);return r==null||typeof r.padding!="string"?0:yT(e,"yAxis",t,r.padding)},iq=je(po,sq,(e,t)=>{var r,n;if(e==null)return{left:0,right:0};var{padding:s}=e;return typeof s=="string"?{left:t,right:t}:{left:((r=s.left)!==null&&r!==void 0?r:0)+t,right:((n=s.right)!==null&&n!==void 0?n:0)+t}}),oq=je(go,aq,(e,t)=>{var r,n;if(e==null)return{top:0,bottom:0};var{padding:s}=e;return typeof s=="string"?{top:t,bottom:t}:{top:((r=s.top)!==null&&r!==void 0?r:0)+t,bottom:((n=s.bottom)!==null&&n!==void 0?n:0)+t}}),lq=je([ns,iq,up,cp,(e,t,r)=>r],(e,t,r,n,s)=>{var{padding:a}=n;return s?[a.left,r.width-a.right]:[e.left+t.left,e.left+e.width-t.right]}),cq=je([ns,Er,oq,up,cp,(e,t,r)=>r],(e,t,r,n,s,a)=>{var{padding:l}=s;return a?[n.height-l.bottom,l.top]:t==="horizontal"?[e.top+e.height-r.bottom,e.top+r.top]:[e.top+r.top,e.top+e.height-r.bottom]}),nf=(e,t,r,n)=>{var s;switch(t){case"xAxis":return lq(e,r,n);case"yAxis":return cq(e,r,n);case"zAxis":return(s=Hw(e,r))===null||s===void 0?void 0:s.range;case"angleAxis":return LO(e);case"radiusAxis":return zO(e,r);default:return}},vT=je([Bs,nf],jp),bu=je([Bs,rf,rq,vT],Qw);je([tf,Jw,Un],zV);function xT(e,t){return e.id<t.id?-1:e.id>t.id?1:0}var Pp=(e,t)=>t,Ap=(e,t,r)=>r,uq=je(op,Pp,Ap,(e,t,r)=>e.filter(n=>n.orientation===t).filter(n=>n.mirror===r).sort(xT)),dq=je(lp,Pp,Ap,(e,t,r)=>e.filter(n=>n.orientation===t).filter(n=>n.mirror===r).sort(xT)),wT=(e,t)=>({width:e.width,height:t.height}),fq=(e,t)=>{var r=typeof t.width=="number"?t.width:Yd;return{width:r,height:e.height}},bT=je(ns,po,wT),hq=(e,t,r)=>{switch(t){case"top":return e.top;case"bottom":return r-e.bottom;default:return 0}},mq=(e,t,r)=>{switch(t){case"left":return e.left;case"right":return r-e.right;default:return 0}},pq=je(ho,ns,uq,Pp,Ap,(e,t,r,n,s)=>{var a={},l;return r.forEach(u=>{var d=wT(t,u);l==null&&(l=hq(t,n,e));var m=n==="top"&&!s||n==="bottom"&&s;a[u.id]=l-Number(m)*d.height,l+=(m?-1:1)*d.height}),a}),gq=je(fo,ns,dq,Pp,Ap,(e,t,r,n,s)=>{var a={},l;return r.forEach(u=>{var d=fq(t,u);l==null&&(l=mq(t,n,e));var m=n==="left"&&!s||n==="right"&&s;a[u.id]=l-Number(m)*d.width,l+=(m?-1:1)*d.width}),a}),yq=(e,t)=>{var r=po(e,t);if(r!=null)return pq(e,r.orientation,r.mirror)},vq=je([ns,po,yq,(e,t)=>t],(e,t,r,n)=>{if(t!=null){var s=r==null?void 0:r[n];return s==null?{x:e.left,y:0}:{x:e.left,y:s}}}),xq=(e,t)=>{var r=go(e,t);if(r!=null)return gq(e,r.orientation,r.mirror)},wq=je([ns,go,xq,(e,t)=>t],(e,t,r,n)=>{if(t!=null){var s=r==null?void 0:r[n];return s==null?{x:0,y:e.top}:{x:s,y:e.top}}}),jT=je(ns,go,(e,t)=>{var r=typeof t.width=="number"?t.width:Yd;return{width:r,height:e.height}}),hN=(e,t,r)=>{switch(t){case"xAxis":return bT(e,r).width;case"yAxis":return jT(e,r).height;default:return}},kT=(e,t,r,n)=>{if(r!=null){var{allowDuplicatedCategory:s,type:a,dataKey:l}=r,u=Jl(e,n),d=t.map(m=>m.value);if(l&&u&&a==="category"&&s&&OP(d))return d}},eb=je([Er,Ep,Bs,Un],kT),ST=(e,t,r,n)=>{if(!(r==null||r.dataKey==null)){var{type:s,scale:a}=r,l=Jl(e,n);if(l&&(s==="number"||a!=="auto"))return t.map(u=>u.value)}},tb=je([Er,Ep,ef,Un],ST);je([Er,TV,rf,bu,eb,tb,nf,Zw,Un],(e,t,r,n,s,a,l,u,d)=>{if(t!=null){var m=Jl(e,d);return{angle:t.angle,interval:t.interval,minTickGap:t.minTickGap,orientation:t.orientation,tick:t.tick,tickCount:t.tickCount,tickFormatter:t.tickFormatter,ticks:t.ticks,type:t.type,unit:t.unit,axisType:d,categoricalDomain:a,duplicateDomain:s,isCategorical:m,niceTicks:u,range:l,realScaleType:r,scale:n}}});var bq=(e,t,r,n,s,a,l,u,d)=>{if(!(t==null||n==null)){var m=Jl(e,d),{type:f,ticks:p,tickCount:v}=t,x=r==="scaleBand"&&typeof n.bandwidth=="function"?n.bandwidth()/2:2,w=f==="category"&&n.bandwidth?n.bandwidth()/x:0;w=d==="angleAxis"&&a!=null&&a.length>=2?pa(a[0]-a[1])*2*w:w;var k=p||s;if(k){var b=k.map((_,N)=>{var C=l?l.indexOf(_):_;return{index:N,coordinate:n(C)+w,value:_,offset:w}});return b.filter(_=>vn(_.coordinate))}return m&&u?u.map((_,N)=>({coordinate:n(_)+w,value:_,index:N,offset:w})).filter(_=>vn(_.coordinate)):n.ticks?n.ticks(v).map(_=>({coordinate:n(_)+w,value:_,offset:w})):n.domain().map((_,N)=>({coordinate:n(_)+w,value:l?l[_]:_,index:N,offset:w}))}},_T=je([Er,ef,rf,bu,Zw,nf,eb,tb,Un],bq),jq=(e,t,r,n,s,a,l)=>{if(!(t==null||r==null||n==null||n[0]===n[1])){var u=Jl(e,l),{tickCount:d}=t,m=0;return m=l==="angleAxis"&&(n==null?void 0:n.length)>=2?pa(n[0]-n[1])*2*m:m,u&&a?a.map((f,p)=>({coordinate:r(f)+m,value:f,index:p,offset:m})):r.ticks?r.ticks(d).map(f=>({coordinate:r(f)+m,value:f,offset:m})):r.domain().map((f,p)=>({coordinate:r(f)+m,value:s?s[f]:f,index:p,offset:m}))}},ru=je([Er,ef,bu,nf,eb,tb,Un],jq),nu=je(Bs,bu,(e,t)=>{if(!(e==null||t==null))return jm(jm({},e),{},{scale:t})}),kq=je([Bs,rf,Xw,vT],Qw);je((e,t,r)=>Hw(e,r),kq,(e,t)=>{if(!(e==null||t==null))return jm(jm({},e),{},{scale:t})});var Sq=je([Er,op,lp],(e,t,r)=>{switch(e){case"horizontal":return t.some(n=>n.reversed)?"right-to-left":"left-to-right";case"vertical":return r.some(n=>n.reversed)?"bottom-to-top":"top-to-bottom";case"centric":case"radial":return"left-to-right";default:return}}),NT=e=>e.options.defaultTooltipEventType,CT=e=>e.options.validateTooltipEventTypes;function ET(e,t,r){if(e==null)return t;var n=e?"axis":"item";return r==null?t:r.includes(n)?n:t}function rb(e,t){var r=NT(e),n=CT(e);return ET(t,r,n)}function _q(e){return Rt(t=>rb(t,e))}var PT=(e,t)=>{var r,n=Number(t);if(!(Ei(n)||t==null))return n>=0?e==null||(r=e[n])===null||r===void 0?void 0:r.value:void 0},Nq=e=>e.tooltip.settings,Go={active:!1,index:null,dataKey:void 0,coordinate:void 0},Cq={itemInteraction:{click:Go,hover:Go},axisInteraction:{click:Go,hover:Go},keyboardInteraction:Go,syncInteraction:{active:!1,index:null,dataKey:void 0,label:void 0,coordinate:void 0,sourceViewBox:void 0},tooltipItemPayloads:[],settings:{shared:void 0,trigger:"hover",axisId:0,active:!1,defaultIndex:void 0}},AT=ra({name:"tooltip",initialState:Cq,reducers:{addTooltipEntrySettings:{reducer(e,t){e.tooltipItemPayloads.push(t.payload)},prepare:Ln()},removeTooltipEntrySettings:{reducer(e,t){var r=Qi(e).tooltipItemPayloads.indexOf(t.payload);r>-1&&e.tooltipItemPayloads.splice(r,1)},prepare:Ln()},setTooltipSettingsState(e,t){e.settings=t.payload},setActiveMouseOverItemIndex(e,t){e.syncInteraction.active=!1,e.keyboardInteraction.active=!1,e.itemInteraction.hover.active=!0,e.itemInteraction.hover.index=t.payload.activeIndex,e.itemInteraction.hover.dataKey=t.payload.activeDataKey,e.itemInteraction.hover.coordinate=t.payload.activeCoordinate},mouseLeaveChart(e){e.itemInteraction.hover.active=!1,e.axisInteraction.hover.active=!1},mouseLeaveItem(e){e.itemInteraction.hover.active=!1},setActiveClickItemIndex(e,t){e.syncInteraction.active=!1,e.itemInteraction.click.active=!0,e.keyboardInteraction.active=!1,e.itemInteraction.click.index=t.payload.activeIndex,e.itemInteraction.click.dataKey=t.payload.activeDataKey,e.itemInteraction.click.coordinate=t.payload.activeCoordinate},setMouseOverAxisIndex(e,t){e.syncInteraction.active=!1,e.axisInteraction.hover.active=!0,e.keyboardInteraction.active=!1,e.axisInteraction.hover.index=t.payload.activeIndex,e.axisInteraction.hover.dataKey=t.payload.activeDataKey,e.axisInteraction.hover.coordinate=t.payload.activeCoordinate},setMouseClickAxisIndex(e,t){e.syncInteraction.active=!1,e.keyboardInteraction.active=!1,e.axisInteraction.click.active=!0,e.axisInteraction.click.index=t.payload.activeIndex,e.axisInteraction.click.dataKey=t.payload.activeDataKey,e.axisInteraction.click.coordinate=t.payload.activeCoordinate},setSyncInteraction(e,t){e.syncInteraction=t.payload},setKeyboardInteraction(e,t){e.keyboardInteraction.active=t.payload.active,e.keyboardInteraction.index=t.payload.activeIndex,e.keyboardInteraction.coordinate=t.payload.activeCoordinate,e.keyboardInteraction.dataKey=t.payload.activeDataKey}}}),{addTooltipEntrySettings:Eq,removeTooltipEntrySettings:Pq,setTooltipSettingsState:Aq,setActiveMouseOverItemIndex:OT,mouseLeaveItem:Oq,mouseLeaveChart:TT,setActiveClickItemIndex:Tq,setMouseOverAxisIndex:IT,setMouseClickAxisIndex:Iq,setSyncInteraction:ix,setKeyboardInteraction:ox}=AT.actions,Dq=AT.reducer;function mN(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function bh(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?mN(Object(r),!0).forEach(function(n){$q(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):mN(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function $q(e,t,r){return(t=Rq(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Rq(e){var t=Mq(e,"string");return typeof t=="symbol"?t:t+""}function Mq(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Fq(e,t,r){return t==="axis"?r==="click"?e.axisInteraction.click:e.axisInteraction.hover:r==="click"?e.itemInteraction.click:e.itemInteraction.hover}function Lq(e){return e.index!=null}var DT=(e,t,r,n)=>{if(t==null)return Go;var s=Fq(e,t,r);if(s==null)return Go;if(s.active)return s;if(e.keyboardInteraction.active)return e.keyboardInteraction;if(e.syncInteraction.active&&e.syncInteraction.index!=null)return e.syncInteraction;var a=e.settings.active===!0;if(Lq(s)){if(a)return bh(bh({},s),{},{active:!0})}else if(n!=null)return{active:!0,coordinate:void 0,dataKey:void 0,index:n};return bh(bh({},Go),{},{coordinate:s.coordinate})},nb=(e,t)=>{var r=e==null?void 0:e.index;if(r==null)return null;var n=Number(r);if(!vn(n))return r;var s=0,a=1/0;return t.length>0&&(a=t.length-1),String(Math.max(s,Math.min(n,a)))},$T=(e,t,r,n,s,a,l,u)=>{if(!(a==null||u==null)){var d=l[0],m=d==null?void 0:u(d.positions,a);if(m!=null)return m;var f=s==null?void 0:s[Number(a)];if(f)switch(r){case"horizontal":return{x:f.coordinate,y:(n.top+t)/2};default:return{x:(n.left+e)/2,y:f.coordinate}}}},RT=(e,t,r,n)=>{if(t==="axis")return e.tooltipItemPayloads;if(e.tooltipItemPayloads.length===0)return[];var s;return r==="hover"?s=e.itemInteraction.hover.dataKey:s=e.itemInteraction.click.dataKey,s==null&&n!=null?[e.tooltipItemPayloads[0]]:e.tooltipItemPayloads.filter(a=>{var l;return((l=a.settings)===null||l===void 0?void 0:l.dataKey)===s})},sf=e=>e.options.tooltipPayloadSearcher,ju=e=>e.tooltip;function pN(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function gN(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?pN(Object(r),!0).forEach(function(n){zq(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):pN(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function zq(e,t,r){return(t=Uq(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Uq(e){var t=Bq(e,"string");return typeof t=="symbol"?t:t+""}function Bq(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Wq(e,t){return e??t}var MT=(e,t,r,n,s,a,l)=>{if(!(t==null||a==null)){var{chartData:u,computedData:d,dataStartIndex:m,dataEndIndex:f}=r,p=[];return e.reduce((v,x)=>{var w,{dataDefinedOnItem:k,settings:b}=x,_=Wq(k,u),N=Array.isArray(_)?wA(_,m,f):_,C=(w=b==null?void 0:b.dataKey)!==null&&w!==void 0?w:n,T=b==null?void 0:b.nameKey,P;if(n&&Array.isArray(N)&&!Array.isArray(N[0])&&l==="axis"?P=tz(N,n,s):P=a(N,t,d,T),Array.isArray(P))P.forEach(M=>{var R=gN(gN({},b),{},{name:M.name,unit:M.unit,color:void 0,fill:void 0});v.push(V_({tooltipEntrySettings:R,dataKey:M.dataKey,payload:M.payload,value:Us(M.payload,M.dataKey),name:M.name}))});else{var A;v.push(V_({tooltipEntrySettings:b,dataKey:C,payload:P,value:Us(P,C),name:(A=Us(P,T))!==null&&A!==void 0?A:b==null?void 0:b.name}))}return v},p)}},sb=je([Wn,Er,qO,Lw,Bn],mT),Vq=je([e=>e.graphicalItems.cartesianItems,e=>e.graphicalItems.polarItems],(e,t)=>[...e,...t]),qq=je([Bn,xu],HO),af=je([Vq,Wn,qq],KO,{memoizeOptions:{resultEqualityCheck:Cp}}),Hq=je([af],e=>e.filter(_p)),Kq=je([af],JO,{memoizeOptions:{resultEqualityCheck:Cp}}),ku=je([Kq,al],XO),Gq=je([Hq,al,Wn],BO),ab=je([ku,Wn,af],QO),FT=je([Wn],Yw),Yq=je([Wn],e=>e.allowDataOverflow),LT=je([FT,Yq],xO),Jq=je([af],e=>e.filter(_p)),Xq=je([Gq,Jq,bp],tT),Qq=je([Xq,al,Bn,LT],rT),Zq=je([af],YO),eH=je([ku,Wn,Zq,Jw,Bn],aT,{memoizeOptions:{resultEqualityCheck:Np}}),tH=je([iT,Bn,xu],wu),rH=je([tH,Bn],cT),nH=je([oT,Bn,xu],wu),sH=je([nH,Bn],uT),aH=je([lT,Bn,xu],wu),iH=je([aH,Bn],dT),oH=je([rH,iH,sH],km),lH=je([Wn,FT,LT,Qq,eH,oH,Er,Bn],fT),zT=je([Wn,Er,ku,ab,bp,Bn,lH],hT),cH=je([zT,Wn,sb],pT),uH=je([Wn,zT,cH,Bn],gT),UT=e=>{var t=Bn(e),r=xu(e),n=!1;return nf(e,t,r,n)},BT=je([Wn,UT],jp),WT=je([Wn,sb,uH,BT],Qw),dH=je([Er,ab,Wn,Bn],kT),fH=je([Er,ab,Wn,Bn],ST),hH=(e,t,r,n,s,a,l,u)=>{if(t){var{type:d}=t,m=Jl(e,u);if(n){var f=r==="scaleBand"&&n.bandwidth?n.bandwidth()/2:2,p=d==="category"&&n.bandwidth?n.bandwidth()/f:0;return p=u==="angleAxis"&&s!=null&&(s==null?void 0:s.length)>=2?pa(s[0]-s[1])*2*p:p,m&&l?l.map((v,x)=>({coordinate:n(v)+p,value:v,index:x,offset:p})):n.domain().map((v,x)=>({coordinate:n(v)+p,value:a?a[v]:v,index:x,offset:p}))}}},yo=je([Er,Wn,sb,WT,UT,dH,fH,Bn],hH),ib=je([NT,CT,Nq],(e,t,r)=>ET(r.shared,e,t)),VT=e=>e.tooltip.settings.trigger,ob=e=>e.tooltip.settings.defaultIndex,Op=je([ju,ib,VT,ob],DT),su=je([Op,ku],nb),qT=je([yo,su],PT),HT=je([Op],e=>{if(e)return e.dataKey}),KT=je([ju,ib,VT,ob],RT),mH=je([fo,ho,Er,ns,yo,ob,KT,sf],$T),pH=je([Op,mH],(e,t)=>e!=null&&e.coordinate?e.coordinate:t),gH=je([Op],e=>e.active),yH=je([KT,su,al,eT,qT,sf,ib],MT);je([yH],e=>{if(e!=null){var t=e.map(r=>r.payload).filter(r=>r!=null);return Array.from(new Set(t))}});function yN(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function vN(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?yN(Object(r),!0).forEach(function(n){vH(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):yN(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function vH(e,t,r){return(t=xH(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function xH(e){var t=wH(e,"string");return typeof t=="symbol"?t:t+""}function wH(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var bH=()=>Rt(Wn),jH=()=>{var e=bH(),t=Rt(yo),r=Rt(WT);return im(!e||!r?void 0:vN(vN({},e),{},{scale:r}),t)};function xN(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function $c(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?xN(Object(r),!0).forEach(function(n){kH(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):xN(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function kH(e,t,r){return(t=SH(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function SH(e){var t=_H(e,"string");return typeof t=="symbol"?t:t+""}function _H(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var NH=(e,t,r,n)=>{var s=t.find(a=>a&&a.index===r);if(s){if(e==="horizontal")return{x:s.coordinate,y:n.chartY};if(e==="vertical")return{x:n.chartX,y:s.coordinate}}return{x:0,y:0}},CH=(e,t,r,n)=>{var s=t.find(m=>m&&m.index===r);if(s){if(e==="centric"){var a=s.coordinate,{radius:l}=n;return $c($c($c({},n),ws(n.cx,n.cy,l,a)),{},{angle:a,radius:l})}var u=s.coordinate,{angle:d}=n;return $c($c($c({},n),ws(n.cx,n.cy,u,d)),{},{angle:d,radius:u})}return{angle:0,clockWise:!1,cx:0,cy:0,endAngle:0,innerRadius:0,outerRadius:0,radius:0,startAngle:0,x:0,y:0}};function EH(e,t){var{chartX:r,chartY:n}=e;return r>=t.left&&r<=t.left+t.width&&n>=t.top&&n<=t.top+t.height}var GT=(e,t,r,n,s)=>{var a,l=-1,u=(a=t==null?void 0:t.length)!==null&&a!==void 0?a:0;if(u<=1||e==null)return 0;if(n==="angleAxis"&&s!=null&&Math.abs(Math.abs(s[1]-s[0])-360)<=1e-6)for(var d=0;d<u;d++){var m=d>0?r[d-1].coordinate:r[u-1].coordinate,f=r[d].coordinate,p=d>=u-1?r[0].coordinate:r[d+1].coordinate,v=void 0;if(pa(f-m)!==pa(p-f)){var x=[];if(pa(p-f)===pa(s[1]-s[0])){v=p;var w=f+s[1]-s[0];x[0]=Math.min(w,(w+m)/2),x[1]=Math.max(w,(w+m)/2)}else{v=m;var k=p+s[1]-s[0];x[0]=Math.min(f,(k+f)/2),x[1]=Math.max(f,(k+f)/2)}var b=[Math.min(f,(v+f)/2),Math.max(f,(v+f)/2)];if(e>b[0]&&e<=b[1]||e>=x[0]&&e<=x[1]){({index:l}=r[d]);break}}else{var _=Math.min(m,p),N=Math.max(m,p);if(e>(_+f)/2&&e<=(N+f)/2){({index:l}=r[d]);break}}}else if(t){for(var C=0;C<u;C++)if(C===0&&e<=(t[C].coordinate+t[C+1].coordinate)/2||C>0&&C<u-1&&e>(t[C].coordinate+t[C-1].coordinate)/2&&e<=(t[C].coordinate+t[C+1].coordinate)/2||C===u-1&&e>(t[C].coordinate+t[C-1].coordinate)/2){({index:l}=t[C]);break}}return l},PH=()=>Rt(Lw),lb=(e,t)=>t,YT=(e,t,r)=>r,cb=(e,t,r,n)=>n,AH=je(yo,e=>tp(e,t=>t.coordinate)),ub=je([ju,lb,YT,cb],DT),JT=je([ub,ku],nb),OH=(e,t,r)=>{if(t!=null){var n=ju(e);return t==="axis"?r==="hover"?n.axisInteraction.hover.dataKey:n.axisInteraction.click.dataKey:r==="hover"?n.itemInteraction.hover.dataKey:n.itemInteraction.click.dataKey}},XT=je([ju,lb,YT,cb],RT),Sm=je([fo,ho,Er,ns,yo,cb,XT,sf],$T),TH=je([ub,Sm],(e,t)=>{var r;return(r=e.coordinate)!==null&&r!==void 0?r:t}),QT=je([yo,JT],PT),IH=je([XT,JT,al,eT,QT,sf,lb],MT),DH=je([ub],e=>({isActive:e.active,activeIndex:e.index})),$H=(e,t,r,n,s,a,l)=>{if(!(!e||!r||!n||!s)&&EH(e,l)){var u=SU(e,t),d=GT(u,a,s,r,n),m=NH(t,s,d,e);return{activeIndex:String(d),activeCoordinate:m}}},RH=(e,t,r,n,s,a,l)=>{if(!(!e||!n||!s||!a||!r)){var u=k7(e,r);if(u){var d=_U(u,t),m=GT(d,l,a,n,s),f=CH(t,a,m,u);return{activeIndex:String(m),activeCoordinate:f}}}},MH=(e,t,r,n,s,a,l,u)=>{if(!(!e||!t||!n||!s||!a))return t==="horizontal"||t==="vertical"?$H(e,t,n,s,a,l,u):RH(e,t,r,n,s,a,l)},FH=je(e=>e.zIndex.zIndexMap,(e,t)=>t,(e,t,r)=>r,(e,t,r)=>{if(t!=null){var n=e[t];if(n!=null)return r?n.panoramaElementId:n.elementId}}),LH=je(e=>e.zIndex.zIndexMap,e=>{var t=Object.keys(e).map(n=>parseInt(n,10)).concat(Object.values(ta)),r=Array.from(new Set(t));return r.sort((n,s)=>n-s)},{memoizeOptions:{resultEqualityCheck:CV}});function wN(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function bN(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?wN(Object(r),!0).forEach(function(n){zH(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):wN(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function zH(e,t,r){return(t=UH(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function UH(e){var t=BH(e,"string");return typeof t=="symbol"?t:t+""}function BH(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var WH={},VH={zIndexMap:Object.values(ta).reduce((e,t)=>bN(bN({},e),{},{[t]:{elementId:void 0,panoramaElementId:void 0,consumers:0}}),WH)},qH=new Set(Object.values(ta));function HH(e){return qH.has(e)}var ZT=ra({name:"zIndex",initialState:VH,reducers:{registerZIndexPortal:{reducer:(e,t)=>{var{zIndex:r}=t.payload;e.zIndexMap[r]?e.zIndexMap[r].consumers+=1:e.zIndexMap[r]={consumers:1,elementId:void 0,panoramaElementId:void 0}},prepare:Ln()},unregisterZIndexPortal:{reducer:(e,t)=>{var{zIndex:r}=t.payload;e.zIndexMap[r]&&(e.zIndexMap[r].consumers-=1,e.zIndexMap[r].consumers<=0&&!HH(r)&&delete e.zIndexMap[r])},prepare:Ln()},registerZIndexPortalId:{reducer:(e,t)=>{var{zIndex:r,elementId:n,isPanorama:s}=t.payload;e.zIndexMap[r]?s?e.zIndexMap[r].panoramaElementId=n:e.zIndexMap[r].elementId=n:e.zIndexMap[r]={consumers:0,elementId:s?void 0:n,panoramaElementId:s?n:void 0}},prepare:Ln()},unregisterZIndexPortalId:{reducer:(e,t)=>{var{zIndex:r}=t.payload;e.zIndexMap[r]&&(t.payload.isPanorama?e.zIndexMap[r].panoramaElementId=void 0:e.zIndexMap[r].elementId=void 0)},prepare:Ln()}}}),{registerZIndexPortal:KH,unregisterZIndexPortal:GH,registerZIndexPortalId:YH,unregisterZIndexPortalId:JH}=ZT.actions,XH=ZT.reducer;function il(e){var{zIndex:t,children:r}=e,n=oB(),s=n&&t!==void 0&&t!==0,a=xa(),l=xn();y.useLayoutEffect(()=>s?(l(KH({zIndex:t})),()=>{l(GH({zIndex:t}))}):mu,[l,t,s]);var u=Rt(m=>FH(m,t,a));if(!s)return r;if(!u)return null;var d=document.getElementById(u);return d?JC.createPortal(r,d):null}function lx(){return lx=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},lx.apply(null,arguments)}function jN(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function jh(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?jN(Object(r),!0).forEach(function(n){QH(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):jN(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function QH(e,t,r){return(t=ZH(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ZH(e){var t=eK(e,"string");return typeof t=="symbol"?t:t+""}function eK(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function tK(e){var{cursor:t,cursorComp:r,cursorProps:n}=e;return y.isValidElement(t)?y.cloneElement(t,n):y.createElement(r,n)}function rK(e){var t,{coordinate:r,payload:n,index:s,offset:a,tooltipAxisBandSize:l,layout:u,cursor:d,tooltipEventType:m,chartName:f}=e,p=r,v=n,x=s;if(!d||!p||f!=="ScatterChart"&&m!=="axis")return null;var w,k,b;if(f==="ScatterChart")w=p,k=FB,b=ta.cursorLine;else if(f==="BarChart")w=LB(u,p,a,l),k=DA,b=ta.cursorRectangle;else if(u==="radial"&&DP(p)){var{cx:_,cy:N,radius:C,startAngle:T,endAngle:P}=$A(p);w={cx:_,cy:N,startAngle:T,endAngle:P,innerRadius:C,outerRadius:C},k=MA,b=ta.cursorLine}else w={points:C7(u,p,a)},k=PA,b=ta.cursorLine;var A=typeof d=="object"&&"className"in d?d.className:void 0,M=jh(jh(jh(jh({stroke:"#ccc",pointerEvents:"none"},a),w),Gx(d)),{},{payload:v,payloadIndex:x,className:Yr("recharts-tooltip-cursor",A)});return y.createElement(il,{zIndex:(t=e.zIndex)!==null&&t!==void 0?t:b},y.createElement(tK,{cursor:d,cursorComp:k,cursorProps:M}))}function nK(e){var t=jH(),r=sB(),n=fp(),s=PH();return t==null||r==null||n==null||s==null?null:y.createElement(rK,lx({},e,{offset:r,layout:n,tooltipAxisBandSize:t,chartName:s}))}var e4=y.createContext(null),sK=()=>y.useContext(e4),Lv={exports:{}},kN;function aK(){return kN||(kN=1,(function(e){var t=Object.prototype.hasOwnProperty,r="~";function n(){}Object.create&&(n.prototype=Object.create(null),new n().__proto__||(r=!1));function s(d,m,f){this.fn=d,this.context=m,this.once=f||!1}function a(d,m,f,p,v){if(typeof f!="function")throw new TypeError("The listener must be a function");var x=new s(f,p||d,v),w=r?r+m:m;return d._events[w]?d._events[w].fn?d._events[w]=[d._events[w],x]:d._events[w].push(x):(d._events[w]=x,d._eventsCount++),d}function l(d,m){--d._eventsCount===0?d._events=new n:delete d._events[m]}function u(){this._events=new n,this._eventsCount=0}u.prototype.eventNames=function(){var m=[],f,p;if(this._eventsCount===0)return m;for(p in f=this._events)t.call(f,p)&&m.push(r?p.slice(1):p);return Object.getOwnPropertySymbols?m.concat(Object.getOwnPropertySymbols(f)):m},u.prototype.listeners=function(m){var f=r?r+m:m,p=this._events[f];if(!p)return[];if(p.fn)return[p.fn];for(var v=0,x=p.length,w=new Array(x);v<x;v++)w[v]=p[v].fn;return w},u.prototype.listenerCount=function(m){var f=r?r+m:m,p=this._events[f];return p?p.fn?1:p.length:0},u.prototype.emit=function(m,f,p,v,x,w){var k=r?r+m:m;if(!this._events[k])return!1;var b=this._events[k],_=arguments.length,N,C;if(b.fn){switch(b.once&&this.removeListener(m,b.fn,void 0,!0),_){case 1:return b.fn.call(b.context),!0;case 2:return b.fn.call(b.context,f),!0;case 3:return b.fn.call(b.context,f,p),!0;case 4:return b.fn.call(b.context,f,p,v),!0;case 5:return b.fn.call(b.context,f,p,v,x),!0;case 6:return b.fn.call(b.context,f,p,v,x,w),!0}for(C=1,N=new Array(_-1);C<_;C++)N[C-1]=arguments[C];b.fn.apply(b.context,N)}else{var T=b.length,P;for(C=0;C<T;C++)switch(b[C].once&&this.removeListener(m,b[C].fn,void 0,!0),_){case 1:b[C].fn.call(b[C].context);break;case 2:b[C].fn.call(b[C].context,f);break;case 3:b[C].fn.call(b[C].context,f,p);break;case 4:b[C].fn.call(b[C].context,f,p,v);break;default:if(!N)for(P=1,N=new Array(_-1);P<_;P++)N[P-1]=arguments[P];b[C].fn.apply(b[C].context,N)}}return!0},u.prototype.on=function(m,f,p){return a(this,m,f,p,!1)},u.prototype.once=function(m,f,p){return a(this,m,f,p,!0)},u.prototype.removeListener=function(m,f,p,v){var x=r?r+m:m;if(!this._events[x])return this;if(!f)return l(this,x),this;var w=this._events[x];if(w.fn)w.fn===f&&(!v||w.once)&&(!p||w.context===p)&&l(this,x);else{for(var k=0,b=[],_=w.length;k<_;k++)(w[k].fn!==f||v&&!w[k].once||p&&w[k].context!==p)&&b.push(w[k]);b.length?this._events[x]=b.length===1?b[0]:b:l(this,x)}return this},u.prototype.removeAllListeners=function(m){var f;return m?(f=r?r+m:m,this._events[f]&&l(this,f)):(this._events=new n,this._eventsCount=0),this},u.prototype.off=u.prototype.removeListener,u.prototype.addListener=u.prototype.on,u.prefixed=r,u.EventEmitter=u,e.exports=u})(Lv)),Lv.exports}var iK=aK();const oK=ai(iK);var Ld=new oK,cx="recharts.syncEvent.tooltip",SN="recharts.syncEvent.brush";function lK(e,t){if(t){var r=Number.parseInt(t,10);if(!Ei(r))return e==null?void 0:e[r]}}var cK={chartName:"",tooltipPayloadSearcher:void 0,eventEmitter:void 0,defaultTooltipEventType:"axis"},t4=ra({name:"options",initialState:cK,reducers:{createEventEmitter:e=>{e.eventEmitter==null&&(e.eventEmitter=Symbol("rechartsEventEmitter"))}}}),uK=t4.reducer,{createEventEmitter:dK}=t4.actions;function fK(e){return e.tooltip.syncInteraction}var hK={chartData:void 0,computedData:void 0,dataStartIndex:0,dataEndIndex:0},r4=ra({name:"chartData",initialState:hK,reducers:{setChartData(e,t){if(e.chartData=t.payload,t.payload==null){e.dataStartIndex=0,e.dataEndIndex=0;return}t.payload.length>0&&e.dataEndIndex!==t.payload.length-1&&(e.dataEndIndex=t.payload.length-1)},setComputedData(e,t){e.computedData=t.payload},setDataStartEndIndexes(e,t){var{startIndex:r,endIndex:n}=t.payload;r!=null&&(e.dataStartIndex=r),n!=null&&(e.dataEndIndex=n)}}}),{setChartData:_N,setDataStartEndIndexes:mK,setComputedData:kee}=r4.actions,pK=r4.reducer,gK=["x","y"];function NN(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Rc(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?NN(Object(r),!0).forEach(function(n){yK(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):NN(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function yK(e,t,r){return(t=vK(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function vK(e){var t=xK(e,"string");return typeof t=="symbol"?t:t+""}function xK(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function wK(e,t){if(e==null)return{};var r,n,s=bK(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function bK(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function jK(){var e=Rt(zw),t=Rt(Uw),r=xn(),n=Rt(RO),s=Rt(yo),a=fp(),l=dp(),u=Rt(d=>d.rootProps.className);y.useEffect(()=>{if(e==null)return mu;var d=(m,f,p)=>{if(t!==p&&e===m){if(n==="index"){var v;if(l&&f!==null&&f!==void 0&&(v=f.payload)!==null&&v!==void 0&&v.coordinate&&f.payload.sourceViewBox){var x=f.payload.coordinate,{x:w,y:k}=x,b=wK(x,gK),{x:_,y:N,width:C,height:T}=f.payload.sourceViewBox,P=Rc(Rc({},b),{},{x:l.x+(C?(w-_)/C:0)*l.width,y:l.y+(T?(k-N)/T:0)*l.height});r(Rc(Rc({},f),{},{payload:Rc(Rc({},f.payload),{},{coordinate:P})}))}else r(f);return}if(s!=null){var A;if(typeof n=="function"){var M={activeTooltipIndex:f.payload.index==null?void 0:Number(f.payload.index),isTooltipActive:f.payload.active,activeIndex:f.payload.index==null?void 0:Number(f.payload.index),activeLabel:f.payload.label,activeDataKey:f.payload.dataKey,activeCoordinate:f.payload.coordinate},R=n(s,M);A=s[R]}else n==="value"&&(A=s.find(ve=>String(ve.value)===f.payload.label));var{coordinate:K}=f.payload;if(A==null||f.payload.active===!1||K==null||l==null){r(ix({active:!1,coordinate:void 0,dataKey:void 0,index:null,label:void 0,sourceViewBox:void 0}));return}var{x:B,y:ie}=K,G=Math.min(B,l.x+l.width),ne=Math.min(ie,l.y+l.height),W={x:a==="horizontal"?A.coordinate:G,y:a==="horizontal"?ne:A.coordinate},q=ix({active:f.payload.active,coordinate:W,dataKey:f.payload.dataKey,index:String(A.index),label:f.payload.label,sourceViewBox:f.payload.sourceViewBox});r(q)}}};return Ld.on(cx,d),()=>{Ld.off(cx,d)}},[u,r,t,e,n,s,a,l])}function kK(){var e=Rt(zw),t=Rt(Uw),r=xn();y.useEffect(()=>{if(e==null)return mu;var n=(s,a,l)=>{t!==l&&e===s&&r(mK(a))};return Ld.on(SN,n),()=>{Ld.off(SN,n)}},[r,t,e])}function SK(){var e=xn();y.useEffect(()=>{e(dK())},[e]),jK(),kK()}function _K(e,t,r,n,s,a){var l=Rt(x=>OH(x,e,t)),u=Rt(Uw),d=Rt(zw),m=Rt(RO),f=Rt(fK),p=f==null?void 0:f.active,v=dp();y.useEffect(()=>{if(!p&&d!=null&&u!=null){var x=ix({active:a,coordinate:r,dataKey:l,index:s,label:typeof n=="number"?String(n):n,sourceViewBox:v});Ld.emit(cx,d,x,u)}},[p,r,l,s,n,u,d,m,a,v])}function CN(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function EN(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?CN(Object(r),!0).forEach(function(n){NK(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):CN(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function NK(e,t,r){return(t=CK(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function CK(e){var t=EK(e,"string");return typeof t=="symbol"?t:t+""}function EK(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function PK(e){return e.dataKey}function AK(e,t){return y.isValidElement(e)?y.cloneElement(e,t):typeof e=="function"?y.createElement(e,t):y.createElement(gB,t)}var PN=[],OK={allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",axisId:0,contentStyle:{},cursor:!0,filterNull:!0,isAnimationActive:!pu.isSsr,itemSorter:"name",itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,wrapperStyle:{}};function TK(e){var t,r,n=Ua(e,OK),{active:s,allowEscapeViewBox:a,animationDuration:l,animationEasing:u,content:d,filterNull:m,isAnimationActive:f,offset:p,payloadUniqBy:v,position:x,reverseDirection:w,useTranslate3d:k,wrapperStyle:b,cursor:_,shared:N,trigger:C,defaultIndex:T,portal:P,axisId:A}=n,M=xn(),R=typeof T=="number"?String(T):T;y.useEffect(()=>{M(Aq({shared:N,trigger:C,axisId:A,active:s,defaultIndex:R}))},[M,N,C,A,s,R]);var K=dp(),B=EA(),ie=_q(N),{activeIndex:G,isActive:ne}=(t=Rt(De=>DH(De,ie,C,R)))!==null&&t!==void 0?t:{},W=Rt(De=>IH(De,ie,C,R)),q=Rt(De=>QT(De,ie,C,R)),ve=Rt(De=>TH(De,ie,C,R)),$=W,H=sK(),ce=(r=s??ne)!==null&&r!==void 0?r:!1,[le,U]=f8([$,ce]),te=ie==="axis"?q:void 0;_K(ie,C,ve,te,G,ce);var he=P??H;if(he==null||K==null||ie==null)return null;var $e=$??PN;ce||($e=PN),m&&$e.length&&($e=Fz($e.filter(De=>De.value!=null&&(De.hide!==!0||n.includeHidden)),v,PK));var Pe=$e.length>0,ke=y.createElement(kB,{allowEscapeViewBox:a,animationDuration:l,animationEasing:u,isAnimationActive:f,active:ce,coordinate:ve,hasPayload:Pe,offset:p,position:x,reverseDirection:w,useTranslate3d:k,viewBox:K,wrapperStyle:b,lastBoundingBox:le,innerRef:U,hasPortalFromProps:!!P},AK(d,EN(EN({},n),{},{payload:$e,label:te,active:ce,activeIndex:G,coordinate:ve,accessibilityLayer:B})));return y.createElement(y.Fragment,null,JC.createPortal(ke,he),ce&&y.createElement(nK,{cursor:_,tooltipEventType:ie,coordinate:ve,payload:$e,index:G}))}var db=e=>null;db.displayName="Cell";function IK(e,t,r){return(t=DK(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function DK(e){var t=$K(e,"string");return typeof t=="symbol"?t:t+""}function $K(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class RK{constructor(t){IK(this,"cache",new Map),this.maxSize=t}get(t){var r=this.cache.get(t);return r!==void 0&&(this.cache.delete(t),this.cache.set(t,r)),r}set(t,r){if(this.cache.has(t))this.cache.delete(t);else if(this.cache.size>=this.maxSize){var n=this.cache.keys().next().value;this.cache.delete(n)}this.cache.set(t,r)}clear(){this.cache.clear()}size(){return this.cache.size}}function AN(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function MK(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?AN(Object(r),!0).forEach(function(n){FK(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):AN(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function FK(e,t,r){return(t=LK(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function LK(e){var t=zK(e,"string");return typeof t=="symbol"?t:t+""}function zK(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var UK={cacheSize:2e3,enableCache:!0},n4=MK({},UK),ON=new RK(n4.cacheSize),BK={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},TN="recharts_measurement_span";function WK(e,t){var r=t.fontSize||"",n=t.fontFamily||"",s=t.fontWeight||"",a=t.fontStyle||"",l=t.letterSpacing||"",u=t.textTransform||"";return"".concat(e,"|").concat(r,"|").concat(n,"|").concat(s,"|").concat(a,"|").concat(l,"|").concat(u)}var IN=(e,t)=>{try{var r=document.getElementById(TN);r||(r=document.createElement("span"),r.setAttribute("id",TN),r.setAttribute("aria-hidden","true"),document.body.appendChild(r)),Object.assign(r.style,BK,t),r.textContent="".concat(e);var n=r.getBoundingClientRect();return{width:n.width,height:n.height}}catch{return{width:0,height:0}}},bd=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(t==null||pu.isSsr)return{width:0,height:0};if(!n4.enableCache)return IN(t,r);var n=WK(t,r),s=ON.get(n);if(s)return s;var a=IN(t,r);return ON.set(n,a),a},DN=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,$N=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,VK=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,qK=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,s4={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},HK=Object.keys(s4),Wc="NaN";function KK(e,t){return e*s4[t]}class Qs{static parse(t){var r,[,n,s]=(r=qK.exec(t))!==null&&r!==void 0?r:[];return new Qs(parseFloat(n),s??"")}constructor(t,r){this.num=t,this.unit=r,this.num=t,this.unit=r,Ei(t)&&(this.unit=""),r!==""&&!VK.test(r)&&(this.num=NaN,this.unit=""),HK.includes(r)&&(this.num=KK(t,r),this.unit="px")}add(t){return this.unit!==t.unit?new Qs(NaN,""):new Qs(this.num+t.num,this.unit)}subtract(t){return this.unit!==t.unit?new Qs(NaN,""):new Qs(this.num-t.num,this.unit)}multiply(t){return this.unit!==""&&t.unit!==""&&this.unit!==t.unit?new Qs(NaN,""):new Qs(this.num*t.num,this.unit||t.unit)}divide(t){return this.unit!==""&&t.unit!==""&&this.unit!==t.unit?new Qs(NaN,""):new Qs(this.num/t.num,this.unit||t.unit)}toString(){return"".concat(this.num).concat(this.unit)}isNaN(){return Ei(this.num)}}function a4(e){if(e.includes(Wc))return Wc;for(var t=e;t.includes("*")||t.includes("/");){var r,[,n,s,a]=(r=DN.exec(t))!==null&&r!==void 0?r:[],l=Qs.parse(n??""),u=Qs.parse(a??""),d=s==="*"?l.multiply(u):l.divide(u);if(d.isNaN())return Wc;t=t.replace(DN,d.toString())}for(;t.includes("+")||/.-\d+(?:\.\d+)?/.test(t);){var m,[,f,p,v]=(m=$N.exec(t))!==null&&m!==void 0?m:[],x=Qs.parse(f??""),w=Qs.parse(v??""),k=p==="+"?x.add(w):x.subtract(w);if(k.isNaN())return Wc;t=t.replace($N,k.toString())}return t}var RN=/\(([^()]*)\)/;function GK(e){for(var t=e,r;(r=RN.exec(t))!=null;){var[,n]=r;t=t.replace(RN,a4(n))}return t}function YK(e){var t=e.replace(/\s+/g,"");return t=GK(t),t=a4(t),t}function JK(e){try{return YK(e)}catch{return Wc}}function zv(e){var t=JK(e.slice(5,-1));return t===Wc?"":t}var XK=["x","y","lineHeight","capHeight","fill","scaleToFit","textAnchor","verticalAnchor"],QK=["dx","dy","angle","className","breakAll"];function ux(){return ux=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},ux.apply(null,arguments)}function MN(e,t){if(e==null)return{};var r,n,s=ZK(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function ZK(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var i4=/[ \f\n\r\t\v\u2028\u2029]+/,o4=e=>{var{children:t,breakAll:r,style:n}=e;try{var s=[];rs(t)||(r?s=t.toString().split(""):s=t.toString().split(i4));var a=s.map(u=>({word:u,width:bd(u,n).width})),l=r?0:bd("",n).width;return{wordsWithComputedWidth:a,spaceWidth:l}}catch{return null}};function eG(e){return e==="start"||e==="middle"||e==="end"||e==="inherit"}var l4=(e,t,r,n)=>e.reduce((s,a)=>{var{word:l,width:u}=a,d=s[s.length-1];if(d&&u!=null&&(t==null||n||d.width+u+r<Number(t)))d.words.push(l),d.width+=u+r;else{var m={words:[l],width:u};s.push(m)}return s},[]),c4=e=>e.reduce((t,r)=>t.width>r.width?t:r),tG="",FN=(e,t,r,n,s,a,l,u)=>{var d=e.slice(0,t),m=o4({breakAll:r,style:n,children:d+tG});if(!m)return[!1,[]];var f=l4(m.wordsWithComputedWidth,a,l,u),p=f.length>s||c4(f).width>Number(a);return[p,f]},rG=(e,t,r,n,s)=>{var{maxLines:a,children:l,style:u,breakAll:d}=e,m=Ut(a),f=String(l),p=l4(t,n,r,s);if(!m||s)return p;var v=p.length>a||c4(p).width>Number(n);if(!v)return p;for(var x=0,w=f.length-1,k=0,b;x<=w&&k<=f.length-1;){var _=Math.floor((x+w)/2),N=_-1,[C,T]=FN(f,N,d,u,a,n,r,s),[P]=FN(f,_,d,u,a,n,r,s);if(!C&&!P&&(x=_+1),C&&P&&(w=_-1),!C&&P){b=T;break}k++}return b||p},LN=e=>{var t=rs(e)?[]:e.toString().split(i4);return[{words:t,width:void 0}]},nG=e=>{var{width:t,scaleToFit:r,children:n,style:s,breakAll:a,maxLines:l}=e;if((t||r)&&!pu.isSsr){var u,d,m=o4({breakAll:a,children:n,style:s});if(m){var{wordsWithComputedWidth:f,spaceWidth:p}=m;u=f,d=p}else return LN(n);return rG({breakAll:a,children:n,maxLines:l,style:s},u,d,t,!!r)}return LN(n)},u4="#808080",sG={breakAll:!1,capHeight:"0.71em",fill:u4,lineHeight:"1em",scaleToFit:!1,textAnchor:"start",verticalAnchor:"end",x:0,y:0},fb=y.forwardRef((e,t)=>{var r=Ua(e,sG),{x:n,y:s,lineHeight:a,capHeight:l,fill:u,scaleToFit:d,textAnchor:m,verticalAnchor:f}=r,p=MN(r,XK),v=y.useMemo(()=>nG({breakAll:p.breakAll,children:p.children,maxLines:p.maxLines,scaleToFit:d,style:p.style,width:p.width}),[p.breakAll,p.children,p.maxLines,d,p.style,p.width]),{dx:x,dy:w,angle:k,className:b,breakAll:_}=p,N=MN(p,QK);if(!Pi(n)||!Pi(s)||v.length===0)return null;var C=Number(n)+(Ut(x)?x:0),T=Number(s)+(Ut(w)?w:0);if(!vn(C)||!vn(T))return null;var P;switch(f){case"start":P=zv("calc(".concat(l,")"));break;case"middle":P=zv("calc(".concat((v.length-1)/2," * -").concat(a," + (").concat(l," / 2))"));break;default:P=zv("calc(".concat(v.length-1," * -").concat(a,")"));break}var A=[];if(d){var M=v[0].width,{width:R}=p;A.push("scale(".concat(Ut(R)&&Ut(M)?R/M:1,")"))}return k&&A.push("rotate(".concat(k,", ").concat(C,", ").concat(T,")")),A.length&&(N.transform=A.join(" ")),y.createElement("text",ux({},Fa(N),{ref:t,x:C,y:T,className:Yr("recharts-text",b),textAnchor:m,fill:u.includes("url")?u4:u}),v.map((K,B)=>{var ie=K.words.join(_?"":" ");return y.createElement("tspan",{x:C,dy:B===0?P:a,key:"".concat(ie,"-").concat(B)},ie)}))});fb.displayName="Text";var aG=["labelRef"];function iG(e,t){if(e==null)return{};var r,n,s=oG(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function oG(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function zN(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function pn(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?zN(Object(r),!0).forEach(function(n){lG(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):zN(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function lG(e,t,r){return(t=cG(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function cG(e){var t=uG(e,"string");return typeof t=="symbol"?t:t+""}function uG(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Gi(){return Gi=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Gi.apply(null,arguments)}var d4=y.createContext(null),dG=e=>{var{x:t,y:r,upperWidth:n,lowerWidth:s,width:a,height:l,children:u}=e,d=y.useMemo(()=>({x:t,y:r,upperWidth:n,lowerWidth:s,width:a,height:l}),[t,r,n,s,a,l]);return y.createElement(d4.Provider,{value:d},u)},f4=()=>{var e=y.useContext(d4),t=dp();return e||NA(t)},fG=y.createContext(null),hG=()=>{var e=y.useContext(fG),t=Rt(UO);return e||t},mG=e=>{var{value:t,formatter:r}=e,n=rs(e.children)?t:e.children;return typeof r=="function"?r(n):n},hb=e=>e!=null&&typeof e=="function",pG=(e,t)=>{var r=pa(t-e),n=Math.min(Math.abs(t-e),360);return r*n},gG=(e,t,r,n,s)=>{var{offset:a,className:l}=e,{cx:u,cy:d,innerRadius:m,outerRadius:f,startAngle:p,endAngle:v,clockWise:x}=s,w=(m+f)/2,k=pG(p,v),b=k>=0?1:-1,_,N;switch(t){case"insideStart":_=p+b*a,N=x;break;case"insideEnd":_=v-b*a,N=!x;break;case"end":_=v+b*a,N=x;break;default:throw new Error("Unsupported position ".concat(t))}N=k<=0?N:!N;var C=ws(u,d,w,_),T=ws(u,d,w,_+(N?1:-1)*359),P="M".concat(C.x,",").concat(C.y,`
    A`).concat(w,",").concat(w,",0,1,").concat(N?0:1,`,
    `).concat(T.x,",").concat(T.y),A=rs(e.id)?Pd("recharts-radial-line-"):e.id;return y.createElement("text",Gi({},n,{dominantBaseline:"central",className:Yr("recharts-radial-bar-label",l)}),y.createElement("defs",null,y.createElement("path",{id:A,d:P})),y.createElement("textPath",{xlinkHref:"#".concat(A)},r))},yG=(e,t,r)=>{var{cx:n,cy:s,innerRadius:a,outerRadius:l,startAngle:u,endAngle:d}=e,m=(u+d)/2;if(r==="outside"){var{x:f,y:p}=ws(n,s,l+t,m);return{x:f,y:p,textAnchor:f>=n?"start":"end",verticalAnchor:"middle"}}if(r==="center")return{x:n,y:s,textAnchor:"middle",verticalAnchor:"middle"};if(r==="centerTop")return{x:n,y:s,textAnchor:"middle",verticalAnchor:"start"};if(r==="centerBottom")return{x:n,y:s,textAnchor:"middle",verticalAnchor:"end"};var v=(a+l)/2,{x,y:w}=ws(n,s,v,m);return{x,y:w,textAnchor:"middle",verticalAnchor:"middle"}},dx=e=>"cx"in e&&Ut(e.cx),vG=(e,t)=>{var{parentViewBox:r,offset:n,position:s}=e,a;r!=null&&!dx(r)&&(a=r);var{x:l,y:u,upperWidth:d,lowerWidth:m,height:f}=t,p=l,v=l+(d-m)/2,x=(p+v)/2,w=(d+m)/2,k=p+d/2,b=f>=0?1:-1,_=b*n,N=b>0?"end":"start",C=b>0?"start":"end",T=d>=0?1:-1,P=T*n,A=T>0?"end":"start",M=T>0?"start":"end";if(s==="top"){var R={x:p+d/2,y:u-_,textAnchor:"middle",verticalAnchor:N};return pn(pn({},R),a?{height:Math.max(u-a.y,0),width:d}:{})}if(s==="bottom"){var K={x:v+m/2,y:u+f+_,textAnchor:"middle",verticalAnchor:C};return pn(pn({},K),a?{height:Math.max(a.y+a.height-(u+f),0),width:m}:{})}if(s==="left"){var B={x:x-P,y:u+f/2,textAnchor:A,verticalAnchor:"middle"};return pn(pn({},B),a?{width:Math.max(B.x-a.x,0),height:f}:{})}if(s==="right"){var ie={x:x+w+P,y:u+f/2,textAnchor:M,verticalAnchor:"middle"};return pn(pn({},ie),a?{width:Math.max(a.x+a.width-ie.x,0),height:f}:{})}var G=a?{width:w,height:f}:{};return s==="insideLeft"?pn({x:x+P,y:u+f/2,textAnchor:M,verticalAnchor:"middle"},G):s==="insideRight"?pn({x:x+w-P,y:u+f/2,textAnchor:A,verticalAnchor:"middle"},G):s==="insideTop"?pn({x:p+d/2,y:u+_,textAnchor:"middle",verticalAnchor:C},G):s==="insideBottom"?pn({x:v+m/2,y:u+f-_,textAnchor:"middle",verticalAnchor:N},G):s==="insideTopLeft"?pn({x:p+P,y:u+_,textAnchor:M,verticalAnchor:C},G):s==="insideTopRight"?pn({x:p+d-P,y:u+_,textAnchor:A,verticalAnchor:C},G):s==="insideBottomLeft"?pn({x:v+P,y:u+f-_,textAnchor:M,verticalAnchor:N},G):s==="insideBottomRight"?pn({x:v+m-P,y:u+f-_,textAnchor:A,verticalAnchor:N},G):s&&typeof s=="object"&&(Ut(s.x)||so(s.x))&&(Ut(s.y)||so(s.y))?pn({x:l+si(s.x,w),y:u+si(s.y,f),textAnchor:"end",verticalAnchor:"end"},G):pn({x:k,y:u+f/2,textAnchor:"middle",verticalAnchor:"middle"},G)},xG={offset:5,zIndex:ta.label};function Vo(e){var t=Ua(e,xG),{viewBox:r,position:n,value:s,children:a,content:l,className:u="",textBreakAll:d,labelRef:m}=t,f=hG(),p=f4(),v=n==="center"?p:f??p,x,w,k;if(r==null?x=v:dx(r)?x=r:x=NA(r),!x||rs(s)&&rs(a)&&!y.isValidElement(l)&&typeof l!="function")return null;var b=pn(pn({},t),{},{viewBox:x});if(y.isValidElement(l)){var{labelRef:_}=b,N=iG(b,aG);return y.cloneElement(l,N)}if(typeof l=="function"){if(w=y.createElement(l,b),y.isValidElement(w))return w}else w=mG(t);var C=Fa(t);if(dx(x)){if(n==="insideStart"||n==="insideEnd"||n==="end")return gG(t,n,w,C,x);k=yG(x,t.offset,t.position)}else k=vG(t,x);return y.createElement(il,{zIndex:t.zIndex},y.createElement(fb,Gi({ref:m,className:Yr("recharts-label",u)},C,k,{textAnchor:eG(C.textAnchor)?C.textAnchor:k.textAnchor,breakAll:d}),w))}Vo.displayName="Label";var wG=(e,t,r)=>{if(!e)return null;var n={viewBox:t,labelRef:r};return e===!0?y.createElement(Vo,Gi({key:"label-implicit"},n)):Pi(e)?y.createElement(Vo,Gi({key:"label-implicit",value:e},n)):y.isValidElement(e)?e.type===Vo?y.cloneElement(e,pn({key:"label-implicit"},n)):y.createElement(Vo,Gi({key:"label-implicit",content:e},n)):hb(e)?y.createElement(Vo,Gi({key:"label-implicit",content:e},n)):e&&typeof e=="object"?y.createElement(Vo,Gi({},e,{key:"label-implicit"},n)):null};function bG(e){var{label:t,labelRef:r}=e,n=f4();return wG(t,n,r)||null}var Uv={},Bv={},UN;function jG(){return UN||(UN=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r[r.length-1]}e.last=t})(Bv)),Bv}var Wv={},BN;function kG(){return BN||(BN=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return Array.isArray(r)?r:Array.from(r)}e.toArray=t})(Wv)),Wv}var WN;function SG(){return WN||(WN=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=jG(),r=kG(),n=rw();function s(a){if(n.isArrayLike(a))return t.last(r.toArray(a))}e.last=s})(Uv)),Uv}var Vv,VN;function _G(){return VN||(VN=1,Vv=SG().last),Vv}var NG=_G();const CG=ai(NG);var EG=["valueAccessor"],PG=["dataKey","clockWise","id","textBreakAll","zIndex"];function _m(){return _m=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},_m.apply(null,arguments)}function qN(e,t){if(e==null)return{};var r,n,s=AG(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function AG(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var OG=e=>Array.isArray(e.value)?CG(e.value):e.value,h4=y.createContext(void 0),TG=h4.Provider,m4=y.createContext(void 0);m4.Provider;function IG(){return y.useContext(h4)}function DG(){return y.useContext(m4)}function Th(e){var{valueAccessor:t=OG}=e,r=qN(e,EG),{dataKey:n,clockWise:s,id:a,textBreakAll:l,zIndex:u}=r,d=qN(r,PG),m=IG(),f=DG(),p=m||f;return!p||!p.length?null:y.createElement(il,{zIndex:u??ta.label},y.createElement(no,{className:"recharts-label-list"},p.map((v,x)=>{var w,k=rs(n)?t(v,x):Us(v&&v.payload,n),b=rs(a)?{}:{id:"".concat(a,"-").concat(x)};return y.createElement(Vo,_m({key:"label-".concat(x)},Fa(v),d,b,{fill:(w=r.fill)!==null&&w!==void 0?w:v.fill,parentViewBox:v.parentViewBox,value:k,textBreakAll:l,viewBox:v.viewBox,index:x,zIndex:0}))})))}Th.displayName="LabelList";function $G(e){var{label:t}=e;return t?t===!0?y.createElement(Th,{key:"labelList-implicit"}):y.isValidElement(t)||hb(t)?y.createElement(Th,{key:"labelList-implicit",content:t}):typeof t=="object"?y.createElement(Th,_m({key:"labelList-implicit"},t,{type:String(t.type)})):null:null}var RG={radiusAxis:{},angleAxis:{}},p4=ra({name:"polarAxis",initialState:RG,reducers:{addRadiusAxis(e,t){e.radiusAxis[t.payload.id]=t.payload},removeRadiusAxis(e,t){delete e.radiusAxis[t.payload.id]},addAngleAxis(e,t){e.angleAxis[t.payload.id]=t.payload},removeAngleAxis(e,t){delete e.angleAxis[t.payload.id]}}}),{addRadiusAxis:See,removeRadiusAxis:_ee,addAngleAxis:Nee,removeAngleAxis:Cee}=p4.actions,MG=p4.reducer,qv={exports:{}},Tr={};/**
 * @license React
 * react-is.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var HN;function FG(){if(HN)return Tr;HN=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),a=Symbol.for("react.consumer"),l=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),m=Symbol.for("react.suspense_list"),f=Symbol.for("react.memo"),p=Symbol.for("react.lazy"),v=Symbol.for("react.view_transition"),x=Symbol.for("react.client.reference");function w(k){if(typeof k=="object"&&k!==null){var b=k.$$typeof;switch(b){case e:switch(k=k.type,k){case r:case s:case n:case d:case m:case v:return k;default:switch(k=k&&k.$$typeof,k){case l:case u:case p:case f:return k;case a:return k;default:return b}}case t:return b}}}return Tr.ContextConsumer=a,Tr.ContextProvider=l,Tr.Element=e,Tr.ForwardRef=u,Tr.Fragment=r,Tr.Lazy=p,Tr.Memo=f,Tr.Portal=t,Tr.Profiler=s,Tr.StrictMode=n,Tr.Suspense=d,Tr.SuspenseList=m,Tr.isContextConsumer=function(k){return w(k)===a},Tr.isContextProvider=function(k){return w(k)===l},Tr.isElement=function(k){return typeof k=="object"&&k!==null&&k.$$typeof===e},Tr.isForwardRef=function(k){return w(k)===u},Tr.isFragment=function(k){return w(k)===r},Tr.isLazy=function(k){return w(k)===p},Tr.isMemo=function(k){return w(k)===f},Tr.isPortal=function(k){return w(k)===t},Tr.isProfiler=function(k){return w(k)===s},Tr.isStrictMode=function(k){return w(k)===n},Tr.isSuspense=function(k){return w(k)===d},Tr.isSuspenseList=function(k){return w(k)===m},Tr.isValidElementType=function(k){return typeof k=="string"||typeof k=="function"||k===r||k===s||k===n||k===d||k===m||typeof k=="object"&&k!==null&&(k.$$typeof===p||k.$$typeof===f||k.$$typeof===l||k.$$typeof===a||k.$$typeof===u||k.$$typeof===x||k.getModuleId!==void 0)},Tr.typeOf=w,Tr}var KN;function LG(){return KN||(KN=1,qv.exports=FG()),qv.exports}var zG=LG(),GN=e=>typeof e=="string"?e:e?e.displayName||e.name||"Component":"",YN=null,Hv=null,g4=e=>{if(e===YN&&Array.isArray(Hv))return Hv;var t=[];return y.Children.forEach(e,r=>{rs(r)||(zG.isFragment(r)?t=t.concat(g4(r.props.children)):t.push(r))}),Hv=t,YN=e,t};function UG(e,t){var r=[],n=[];return Array.isArray(t)?n=t.map(s=>GN(s)):n=[GN(t)],g4(e).forEach(s=>{var a=Qc(s,"type.displayName")||Qc(s,"type.name");a&&n.indexOf(a)!==-1&&r.push(s)}),r}var Kv={},JN;function BG(){return JN||(JN=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){var s;if(typeof r!="object"||r==null)return!1;if(Object.getPrototypeOf(r)===null)return!0;if(Object.prototype.toString.call(r)!=="[object Object]"){const a=r[Symbol.toStringTag];return a==null||!((s=Object.getOwnPropertyDescriptor(r,Symbol.toStringTag))!=null&&s.writable)?!1:r.toString()===`[object ${a}]`}let n=r;for(;Object.getPrototypeOf(n)!==null;)n=Object.getPrototypeOf(n);return Object.getPrototypeOf(r)===n}e.isPlainObject=t})(Kv)),Kv}var Gv,XN;function WG(){return XN||(XN=1,Gv=BG().isPlainObject),Gv}var VG=WG();const qG=ai(VG);function QN(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function ZN(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?QN(Object(r),!0).forEach(function(n){HG(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):QN(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function HG(e,t,r){return(t=KG(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function KG(e){var t=GG(e,"string");return typeof t=="symbol"?t:t+""}function GG(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Nm(){return Nm=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Nm.apply(null,arguments)}var eC=(e,t,r,n,s)=>{var a=r-n,l;return l="M ".concat(e,",").concat(t),l+="L ".concat(e+r,",").concat(t),l+="L ".concat(e+r-a/2,",").concat(t+s),l+="L ".concat(e+r-a/2-n,",").concat(t+s),l+="L ".concat(e,",").concat(t," Z"),l},YG={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},JG=e=>{var t=Ua(e,YG),{x:r,y:n,upperWidth:s,lowerWidth:a,height:l,className:u}=t,{animationEasing:d,animationDuration:m,animationBegin:f,isUpdateAnimationActive:p}=t,v=y.useRef(null),[x,w]=y.useState(-1),k=y.useRef(s),b=y.useRef(a),_=y.useRef(l),N=y.useRef(r),C=y.useRef(n),T=fw(e,"trapezoid-");if(y.useEffect(()=>{if(v.current&&v.current.getTotalLength)try{var W=v.current.getTotalLength();W&&w(W)}catch{}},[]),r!==+r||n!==+n||s!==+s||a!==+a||l!==+l||s===0&&a===0||l===0)return null;var P=Yr("recharts-trapezoid",u);if(!p)return y.createElement("g",null,y.createElement("path",Nm({},Fa(t),{className:P,d:eC(r,n,s,a,l)})));var A=k.current,M=b.current,R=_.current,K=N.current,B=C.current,ie="0px ".concat(x===-1?1:x,"px"),G="".concat(x,"px 0px"),ne=AA(["strokeDasharray"],m,d);return y.createElement(dw,{animationId:T,key:T,canBegin:x>0,duration:m,easing:d,isActive:p,begin:f},W=>{var q=xs(A,s,W),ve=xs(M,a,W),$=xs(R,l,W),H=xs(K,r,W),ce=xs(B,n,W);v.current&&(k.current=q,b.current=ve,_.current=$,N.current=H,C.current=ce);var le=W>0?{transition:ne,strokeDasharray:G}:{strokeDasharray:ie};return y.createElement("path",Nm({},Fa(t),{className:P,d:eC(H,ce,q,ve,$),ref:v,style:ZN(ZN({},le),t.style)}))})},XG=["option","shapeType","propTransformer","activeClassName","isActive"];function QG(e,t){if(e==null)return{};var r,n,s=ZG(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function ZG(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function tC(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Cm(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?tC(Object(r),!0).forEach(function(n){eY(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):tC(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function eY(e,t,r){return(t=tY(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function tY(e){var t=rY(e,"string");return typeof t=="symbol"?t:t+""}function rY(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function nY(e,t){return Cm(Cm({},t),e)}function sY(e,t){return e==="symbols"}function rC(e){var{shapeType:t,elementProps:r}=e;switch(t){case"rectangle":return y.createElement(DA,r);case"trapezoid":return y.createElement(JG,r);case"sector":return y.createElement(MA,r);case"symbols":if(sY(t))return y.createElement(IP,r);break;case"curve":return y.createElement(PA,r);default:return null}}function aY(e){return y.isValidElement(e)?e.props:e}function iY(e){var{option:t,shapeType:r,propTransformer:n=nY,activeClassName:s="recharts-active-shape",isActive:a}=e,l=QG(e,XG),u;if(y.isValidElement(t))u=y.cloneElement(t,Cm(Cm({},l),aY(t)));else if(typeof t=="function")u=t(l);else if(qG(t)&&typeof t!="boolean"){var d=n(t,l);u=y.createElement(rC,{shapeType:r,elementProps:d})}else{var m=l;u=y.createElement(rC,{shapeType:r,elementProps:m})}return a?y.createElement(no,{className:s},u):u}var y4=(e,t)=>{var r=xn();return(n,s)=>a=>{e==null||e(n,s,a),r(OT({activeIndex:String(s),activeDataKey:t,activeCoordinate:n.tooltipPosition}))}},v4=e=>{var t=xn();return(r,n)=>s=>{e==null||e(r,n,s),t(Oq())}},x4=(e,t)=>{var r=xn();return(n,s)=>a=>{e==null||e(n,s,a),r(Tq({activeIndex:String(s),activeDataKey:t,activeCoordinate:n.tooltipPosition}))}};function oY(e){var{fn:t,args:r}=e,n=xn(),s=xa();return y.useLayoutEffect(()=>{if(!s){var a=t(r);return n(Eq(a)),()=>{n(Pq(a))}}},[t,r,n,s]),null}function lY(e){var{legendPayload:t}=e,r=xn(),n=xa();return y.useLayoutEffect(()=>n?mu:(r(cB(t)),()=>{r(uB(t))}),[r,n,t]),null}var Yv,cY=()=>{var[e]=y.useState(()=>Pd("uid-"));return e},uY=(Yv=iD.useId)!==null&&Yv!==void 0?Yv:cY;function w4(e,t){var r=uY();return t||(e?"".concat(e,"-").concat(r):r)}var dY=y.createContext(void 0),fY=e=>{var{id:t,type:r,children:n}=e,s=w4("recharts-".concat(r),t);return y.createElement(dY.Provider,{value:s},n(s))},hY={cartesianItems:[],polarItems:[]},b4=ra({name:"graphicalItems",initialState:hY,reducers:{addCartesianGraphicalItem:{reducer(e,t){e.cartesianItems.push(t.payload)},prepare:Ln()},replaceCartesianGraphicalItem:{reducer(e,t){var{prev:r,next:n}=t.payload,s=Qi(e).cartesianItems.indexOf(r);s>-1&&(e.cartesianItems[s]=n)},prepare:Ln()},removeCartesianGraphicalItem:{reducer(e,t){var r=Qi(e).cartesianItems.indexOf(t.payload);r>-1&&e.cartesianItems.splice(r,1)},prepare:Ln()},addPolarGraphicalItem:{reducer(e,t){e.polarItems.push(t.payload)},prepare:Ln()},removePolarGraphicalItem:{reducer(e,t){var r=Qi(e).polarItems.indexOf(t.payload);r>-1&&e.polarItems.splice(r,1)},prepare:Ln()}}}),{addCartesianGraphicalItem:mY,replaceCartesianGraphicalItem:pY,removeCartesianGraphicalItem:gY,addPolarGraphicalItem:Eee,removePolarGraphicalItem:Pee}=b4.actions,yY=b4.reducer;function vY(e){var t=xn(),r=y.useRef(null);return y.useLayoutEffect(()=>{r.current===null?t(mY(e)):r.current!==e&&t(pY({prev:r.current,next:e})),r.current=e},[t,e]),y.useLayoutEffect(()=>()=>{r.current&&(t(gY(r.current)),r.current=null)},[t]),null}function nC(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function sC(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?nC(Object(r),!0).forEach(function(n){xY(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):nC(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function xY(e,t,r){return(t=wY(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function wY(e){var t=bY(e,"string");return typeof t=="symbol"?t:t+""}function bY(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var jY={xAxis:{},yAxis:{},zAxis:{}},j4=ra({name:"cartesianAxis",initialState:jY,reducers:{addXAxis:{reducer(e,t){e.xAxis[t.payload.id]=t.payload},prepare:Ln()},removeXAxis:{reducer(e,t){delete e.xAxis[t.payload.id]},prepare:Ln()},addYAxis:{reducer(e,t){e.yAxis[t.payload.id]=t.payload},prepare:Ln()},removeYAxis:{reducer(e,t){delete e.yAxis[t.payload.id]},prepare:Ln()},addZAxis:{reducer(e,t){e.zAxis[t.payload.id]=t.payload},prepare:Ln()},removeZAxis:{reducer(e,t){delete e.zAxis[t.payload.id]},prepare:Ln()},updateYAxisWidth(e,t){var{id:r,width:n}=t.payload,s=e.yAxis[r];if(s){var a=s.widthHistory||[];if(a.length===3&&a[0]===a[2]&&n===a[1]&&n!==s.width&&Math.abs(n-a[0])<=1)return;var l=[...a,n].slice(-3);e.yAxis[r]=sC(sC({},e.yAxis[r]),{},{width:n,widthHistory:l})}}}}),{addXAxis:kY,removeXAxis:SY,addYAxis:_Y,removeYAxis:NY,addZAxis:Aee,removeZAxis:Oee,updateYAxisWidth:CY}=j4.actions,EY=j4.reducer,PY=je([ns],e=>({top:e.top,bottom:e.bottom,left:e.left,right:e.right})),AY=je([PY,fo,ho],(e,t,r)=>{if(!(!e||t==null||r==null))return{x:e.left,y:e.top,width:Math.max(0,t-e.left-e.right),height:Math.max(0,r-e.top-e.bottom)}}),k4=()=>Rt(AY),OY="Invariant failed";function TY(e,t){throw new Error(OY)}var IY=["x","y"];function fx(){return fx=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},fx.apply(null,arguments)}function aC(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function ld(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?aC(Object(r),!0).forEach(function(n){DY(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):aC(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function DY(e,t,r){return(t=$Y(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function $Y(e){var t=RY(e,"string");return typeof t=="symbol"?t:t+""}function RY(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function MY(e,t){if(e==null)return{};var r,n,s=FY(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function FY(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function LY(e,t){var{x:r,y:n}=e,s=MY(e,IY),a="".concat(r),l=parseInt(a,10),u="".concat(n),d=parseInt(u,10),m="".concat(t.height||s.height),f=parseInt(m,10),p="".concat(t.width||s.width),v=parseInt(p,10);return ld(ld(ld(ld(ld({},t),s),l?{x:l}:{}),d?{y:d}:{}),{},{height:f,width:v,name:t.name,radius:t.radius})}function Em(e){return y.createElement(iY,fx({shapeType:"rectangle",propTransformer:LY,activeClassName:"recharts-active-bar"},e))}var zY=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return(n,s)=>{if(Ut(t))return t;var a=Ut(n)||rs(n);return a?t(n,s):(a||TY(),r)}},UY={},S4=ra({name:"errorBars",initialState:UY,reducers:{addErrorBar:(e,t)=>{var{itemId:r,errorBar:n}=t.payload;e[r]||(e[r]=[]),e[r].push(n)},replaceErrorBar:(e,t)=>{var{itemId:r,prev:n,next:s}=t.payload;e[r]&&(e[r]=e[r].map(a=>a.dataKey===n.dataKey&&a.direction===n.direction?s:a))},removeErrorBar:(e,t)=>{var{itemId:r,errorBar:n}=t.payload;e[r]&&(e[r]=e[r].filter(s=>s.dataKey!==n.dataKey||s.direction!==n.direction))}}}),{addErrorBar:Tee,replaceErrorBar:Iee,removeErrorBar:Dee}=S4.actions,BY=S4.reducer,WY=["children"];function VY(e,t){if(e==null)return{};var r,n,s=qY(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function qY(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var HY={data:[],xAxisId:"xAxis-0",yAxisId:"yAxis-0",dataPointFormatter:()=>({x:0,y:0,value:0}),errorBarOffset:0},KY=y.createContext(HY);function GY(e){var{children:t}=e,r=VY(e,WY);return y.createElement(KY.Provider,{value:r},t)}function _4(e,t){var r,n,s=Rt(m=>po(m,e)),a=Rt(m=>go(m,t)),l=(r=s==null?void 0:s.allowDataOverflow)!==null&&r!==void 0?r:la.allowDataOverflow,u=(n=a==null?void 0:a.allowDataOverflow)!==null&&n!==void 0?n:ca.allowDataOverflow,d=l||u;return{needClip:d,needClipX:l,needClipY:u}}function YY(e){var{xAxisId:t,yAxisId:r,clipPathId:n}=e,s=k4(),{needClipX:a,needClipY:l,needClip:u}=_4(t,r);if(!u||!s)return null;var{x:d,y:m,width:f,height:p}=s;return y.createElement("clipPath",{id:"clipPath-".concat(n)},y.createElement("rect",{x:a?d:d-f/2,y:l?m:m-p/2,width:a?f:f*2,height:l?p:p*2}))}function JY(e,t){return e&&typeof e=="object"&&"zIndex"in e&&typeof e.zIndex=="number"&&vn(e.zIndex)?e.zIndex:t}var XY=["onMouseEnter","onMouseLeave","onClick"],QY=["value","background","tooltipPosition"],ZY=["id"],eJ=["onMouseEnter","onClick","onMouseLeave"];function uo(){return uo=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},uo.apply(null,arguments)}function iC(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Ls(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?iC(Object(r),!0).forEach(function(n){tJ(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):iC(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function tJ(e,t,r){return(t=rJ(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function rJ(e){var t=nJ(e,"string");return typeof t=="symbol"?t:t+""}function nJ(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Pm(e,t){if(e==null)return{};var r,n,s=sJ(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function sJ(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var aJ=e=>{var{dataKey:t,name:r,fill:n,legendType:s,hide:a}=e;return[{inactive:a,dataKey:t,type:s,color:n,value:bA(r,t),payload:e}]};function iJ(e){var{dataKey:t,stroke:r,strokeWidth:n,fill:s,name:a,hide:l,unit:u}=e;return{dataDefinedOnItem:void 0,positions:void 0,settings:{stroke:r,strokeWidth:n,fill:s,dataKey:t,nameKey:void 0,name:bA(a,t),hide:l,type:e.tooltipType,color:e.fill,unit:u}}}function oJ(e){var t=Rt(su),{data:r,dataKey:n,background:s,allOtherBarProps:a}=e,{onMouseEnter:l,onMouseLeave:u,onClick:d}=a,m=Pm(a,XY),f=y4(l,n),p=v4(u),v=x4(d,n);if(!s||r==null)return null;var x=Gx(s);return y.createElement(il,{zIndex:JY(s,ta.barBackground)},r.map((w,k)=>{var{value:b,background:_,tooltipPosition:N}=w,C=Pm(w,QY);if(!_)return null;var T=f(w,k),P=p(w,k),A=v(w,k),M=Ls(Ls(Ls(Ls(Ls({option:s,isActive:String(k)===t},C),{},{fill:"#eee"},_),x),tw(m,w,k)),{},{onMouseEnter:T,onMouseLeave:P,onClick:A,dataKey:n,index:k,className:"recharts-bar-background-rectangle"});return y.createElement(Em,uo({key:"background-bar-".concat(k)},M))}))}function lJ(e){var{showLabels:t,children:r,rects:n}=e,s=n==null?void 0:n.map(a=>{var l={x:a.x,y:a.y,width:a.width,lowerWidth:a.width,upperWidth:a.width,height:a.height};return Ls(Ls({},l),{},{value:a.value,payload:a.payload,parentViewBox:a.parentViewBox,viewBox:l,fill:a.fill})});return y.createElement(TG,{value:t?s:void 0},r)}function cJ(e){var{shape:t,activeBar:r,baseProps:n,entry:s,index:a,dataKey:l}=e,u=Rt(su),d=Rt(HT),m=r&&String(a)===u&&(d==null||l===d),f=m?r:t;return m?y.createElement(il,{zIndex:ta.activeBar},y.createElement(Em,uo({},n,{name:String(n.name)},s,{isActive:m,option:f,index:a,dataKey:l}))):y.createElement(Em,uo({},n,{name:String(n.name)},s,{isActive:m,option:f,index:a,dataKey:l}))}function uJ(e){var{shape:t,baseProps:r,entry:n,index:s,dataKey:a}=e;return y.createElement(Em,uo({},r,{name:String(r.name)},n,{isActive:!1,option:t,index:s,dataKey:a}))}function dJ(e){var t,{data:r,props:n}=e,s=(t=Zo(n))!==null&&t!==void 0?t:{},{id:a}=s,l=Pm(s,ZY),{shape:u,dataKey:d,activeBar:m}=n,{onMouseEnter:f,onClick:p,onMouseLeave:v}=n,x=Pm(n,eJ),w=y4(f,d),k=v4(v),b=x4(p,d);return r?y.createElement(y.Fragment,null,r.map((_,N)=>y.createElement(no,uo({key:"rectangle-".concat(_==null?void 0:_.x,"-").concat(_==null?void 0:_.y,"-").concat(_==null?void 0:_.value,"-").concat(N),className:"recharts-bar-rectangle"},tw(x,_,N),{onMouseEnter:w(_,N),onMouseLeave:k(_,N),onClick:b(_,N)}),m?y.createElement(cJ,{shape:u,activeBar:m,baseProps:l,entry:_,index:N,dataKey:d}):y.createElement(uJ,{shape:u,baseProps:l,entry:_,index:N,dataKey:d})))):null}function fJ(e){var{props:t,previousRectanglesRef:r}=e,{data:n,layout:s,isAnimationActive:a,animationBegin:l,animationDuration:u,animationEasing:d,onAnimationEnd:m,onAnimationStart:f}=t,p=r.current,v=fw(t,"recharts-bar-"),[x,w]=y.useState(!1),k=!x,b=y.useCallback(()=>{typeof m=="function"&&m(),w(!1)},[m]),_=y.useCallback(()=>{typeof f=="function"&&f(),w(!0)},[f]);return y.createElement(lJ,{showLabels:k,rects:n},y.createElement(dw,{animationId:v,begin:l,duration:u,isActive:a,easing:d,onAnimationEnd:b,onAnimationStart:_,key:v},N=>{var C=N===1?n:n==null?void 0:n.map((T,P)=>{var A=p&&p[P];if(A)return Ls(Ls({},T),{},{x:xs(A.x,T.x,N),y:xs(A.y,T.y,N),width:xs(A.width,T.width,N),height:xs(A.height,T.height,N)});if(s==="horizontal"){var M=xs(0,T.height,N),R=xs(T.stackedBarStart,T.y,N);return Ls(Ls({},T),{},{y:R,height:M})}var K=xs(0,T.width,N),B=xs(T.stackedBarStart,T.x,N);return Ls(Ls({},T),{},{width:K,x:B})});return N>0&&(r.current=C??null),C==null?null:y.createElement(no,null,y.createElement(dJ,{props:t,data:C}))}),y.createElement($G,{label:t.label}),t.children)}function hJ(e){var t=y.useRef(null);return y.createElement(fJ,{previousRectanglesRef:t,props:e})}var N4=0,mJ=(e,t)=>{var r=Array.isArray(e.value)?e.value[1]:e.value;return{x:e.x,y:e.y,value:r,errorVal:Us(e,t)}};class pJ extends y.PureComponent{render(){var{hide:t,data:r,dataKey:n,className:s,xAxisId:a,yAxisId:l,needClip:u,background:d,id:m}=this.props;if(t||r==null)return null;var f=Yr("recharts-bar",s),p=m;return y.createElement(no,{className:f,id:m},u&&y.createElement("defs",null,y.createElement(YY,{clipPathId:p,xAxisId:a,yAxisId:l})),y.createElement(no,{className:"recharts-bar-rectangles",clipPath:u?"url(#clipPath-".concat(p,")"):void 0},y.createElement(oJ,{data:r,dataKey:n,background:d,allOtherBarProps:this.props}),y.createElement(hJ,this.props)))}}var gJ={activeBar:!1,animationBegin:0,animationDuration:400,animationEasing:"ease",hide:!1,isAnimationActive:!pu.isSsr,legendType:"rect",minPointSize:N4,xAxisId:0,yAxisId:0,zIndex:ta.bar};function yJ(e){var{xAxisId:t,yAxisId:r,hide:n,legendType:s,minPointSize:a,activeBar:l,animationBegin:u,animationDuration:d,animationEasing:m,isAnimationActive:f}=e,{needClip:p}=_4(t,r),v=fp(),x=xa(),w=UG(e.children,db),k=Rt(N=>qJ(N,t,r,x,e.id,w));if(v!=="vertical"&&v!=="horizontal")return null;var b,_=k==null?void 0:k[0];return _==null||_.height==null||_.width==null?b=0:b=v==="vertical"?_.height/2:_.width/2,y.createElement(GY,{xAxisId:t,yAxisId:r,data:k,dataPointFormatter:mJ,errorBarOffset:b},y.createElement(pJ,uo({},e,{layout:v,needClip:p,data:k,xAxisId:t,yAxisId:r,hide:n,legendType:s,minPointSize:a,activeBar:l,animationBegin:u,animationDuration:d,animationEasing:m,isAnimationActive:f})))}function vJ(e){var{layout:t,barSettings:{dataKey:r,minPointSize:n},pos:s,bandSize:a,xAxis:l,yAxis:u,xAxisTicks:d,yAxisTicks:m,stackedData:f,displayedData:p,offset:v,cells:x,parentViewBox:w,dataStartIndex:k}=e,b=t==="horizontal"?u:l,_=f?b.scale.domain():null,N=wU({numericAxis:b}),C=b.scale(N);return p.map((T,P)=>{var A,M,R,K,B,ie;f?A=mU(f[P+k],_):(A=Us(T,r),Array.isArray(A)||(A=[N,A]));var G=zY(n,N4)(A[1],P);if(t==="horizontal"){var ne,[W,q]=[u.scale(A[0]),u.scale(A[1])];M=U_({axis:l,ticks:d,bandSize:a,offset:s.offset,entry:T,index:P}),R=(ne=q??W)!==null&&ne!==void 0?ne:void 0,K=s.size;var ve=W-q;if(B=Ei(ve)?0:ve,ie={x:M,y:v.top,width:K,height:v.height},Math.abs(G)>0&&Math.abs(B)<Math.abs(G)){var $=pa(B||G)*(Math.abs(G)-Math.abs(B));R-=$,B+=$}}else{var[H,ce]=[l.scale(A[0]),l.scale(A[1])];if(M=H,R=U_({axis:u,ticks:m,bandSize:a,offset:s.offset,entry:T,index:P}),K=ce-H,B=s.size,ie={x:v.left,y:R,width:v.width,height:B},Math.abs(G)>0&&Math.abs(K)<Math.abs(G)){var le=pa(K||G)*(Math.abs(G)-Math.abs(K));K+=le}}if(M==null||R==null||K==null||B==null)return null;var U=Ls(Ls({},T),{},{stackedBarStart:C,x:M,y:R,width:K,height:B,value:f?A:A[1],payload:T,background:ie,tooltipPosition:{x:M+K/2,y:R+B/2},parentViewBox:w},x&&x[P]&&x[P].props);return U}).filter(Boolean)}function xJ(e){var t=Ua(e,gJ),r=xa();return y.createElement(fY,{id:t.id,type:"bar"},n=>y.createElement(y.Fragment,null,y.createElement(lY,{legendPayload:aJ(t)}),y.createElement(oY,{fn:iJ,args:t}),y.createElement(vY,{type:"bar",id:n,data:void 0,xAxisId:t.xAxisId,yAxisId:t.yAxisId,zAxisId:0,dataKey:t.dataKey,stackId:xU(t.stackId),hide:t.hide,barSize:t.barSize,minPointSize:t.minPointSize,maxBarSize:t.maxBarSize,isPanorama:r}),y.createElement(il,{zIndex:t.zIndex},y.createElement(yJ,uo({},t,{id:n})))))}var C4=y.memo(xJ);C4.displayName="Bar";function oC(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function kh(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?oC(Object(r),!0).forEach(function(n){wJ(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):oC(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function wJ(e,t,r){return(t=bJ(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function bJ(e){var t=jJ(e,"string");return typeof t=="symbol"?t:t+""}function jJ(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var kJ=(e,t)=>t,SJ=(e,t,r)=>r,_J=(e,t,r,n)=>n,NJ=(e,t,r,n,s)=>s,of=je([Kw,NJ],(e,t)=>e.filter(r=>r.type==="bar").find(r=>r.id===t)),CJ=je([of],e=>e==null?void 0:e.maxBarSize),EJ=(e,t,r,n,s,a)=>a,lC=(e,t,r)=>{var n=r??e;if(!rs(n))return si(n,t,0)},PJ=je([Er,Kw,kJ,SJ,_J],(e,t,r,n,s)=>t.filter(a=>e==="horizontal"?a.xAxisId===r:a.yAxisId===n).filter(a=>a.isPanorama===s).filter(a=>a.hide===!1).filter(a=>a.type==="bar")),AJ=(e,t,r,n)=>{var s=Er(e);return s==="horizontal"?ax(e,"yAxis",r,n):ax(e,"xAxis",t,n)},OJ=(e,t,r)=>{var n=Er(e);return n==="horizontal"?hN(e,"xAxis",t):hN(e,"yAxis",r)},TJ=(e,t,r)=>{var n={},s=e.filter(_p),a=e.filter(m=>m.stackId==null),l=s.reduce((m,f)=>(m[f.stackId]||(m[f.stackId]=[]),m[f.stackId].push(f),m),n),u=Object.entries(l).map(m=>{var[f,p]=m,v=p.map(w=>w.dataKey),x=lC(t,r,p[0].barSize);return{stackId:f,dataKeys:v,barSize:x}}),d=a.map(m=>{var f=[m.dataKey].filter(v=>v!=null),p=lC(t,r,m.barSize);return{stackId:void 0,dataKeys:f,barSize:p}});return[...u,...d]},IJ=je([PJ,bV,OJ],TJ),DJ=(e,t,r,n,s)=>{var a,l,u=of(e,t,r,n,s);if(u!=null){var d=Er(e),m=DO(e),{maxBarSize:f}=u,p=rs(f)?m:f,v,x;return d==="horizontal"?(v=nu(e,"xAxis",t,n),x=ru(e,"xAxis",t,n)):(v=nu(e,"yAxis",r,n),x=ru(e,"yAxis",r,n)),(a=(l=im(v,x,!0))!==null&&l!==void 0?l:p)!==null&&a!==void 0?a:0}},E4=(e,t,r,n)=>{var s=Er(e),a,l;return s==="horizontal"?(a=nu(e,"xAxis",t,n),l=ru(e,"xAxis",t,n)):(a=nu(e,"yAxis",r,n),l=ru(e,"yAxis",r,n)),im(a,l)};function $J(e,t,r,n,s){var a=n.length;if(!(a<1)){var l=si(e,r,0,!0),u,d=[];if(vn(n[0].barSize)){var m=!1,f=r/a,p=n.reduce((_,N)=>_+(N.barSize||0),0);p+=(a-1)*l,p>=r&&(p-=(a-1)*l,l=0),p>=r&&f>0&&(m=!0,f*=.9,p=a*f);var v=(r-p)/2>>0,x={offset:v-l,size:0};u=n.reduce((_,N)=>{var C,T={stackId:N.stackId,dataKeys:N.dataKeys,position:{offset:x.offset+x.size+l,size:m?f:(C=N.barSize)!==null&&C!==void 0?C:0}},P=[..._,T];return x=P[P.length-1].position,P},d)}else{var w=si(t,r,0,!0);r-2*w-(a-1)*l<=0&&(l=0);var k=(r-2*w-(a-1)*l)/a;k>1&&(k>>=0);var b=vn(s)?Math.min(k,s):k;u=n.reduce((_,N,C)=>[..._,{stackId:N.stackId,dataKeys:N.dataKeys,position:{offset:w+(k+l)*C+(k-b)/2,size:b}}],d)}return u}}var RJ=(e,t,r,n,s,a,l)=>{var u=rs(l)?t:l,d=$J(r,n,s!==a?s:a,e,u);return s!==a&&d!=null&&(d=d.map(m=>kh(kh({},m),{},{position:kh(kh({},m.position),{},{offset:m.position.offset-s/2})}))),d},MJ=je([IJ,DO,wV,$O,DJ,E4,CJ],RJ),FJ=(e,t,r,n)=>nu(e,"xAxis",t,n),LJ=(e,t,r,n)=>nu(e,"yAxis",r,n),zJ=(e,t,r,n)=>ru(e,"xAxis",t,n),UJ=(e,t,r,n)=>ru(e,"yAxis",r,n),BJ=je([MJ,of],(e,t)=>{if(!(e==null||t==null)){var r=e.find(n=>n.stackId===t.stackId&&t.dataKey!=null&&n.dataKeys.includes(t.dataKey));if(r!=null)return r.position}}),WJ=(e,t)=>{var r=qw(t);if(!(!e||r==null||t==null)){var{stackId:n}=t;if(n!=null){var s=e[n];if(s){var{stackedData:a}=s;if(a)return a.find(l=>l.key===r)}}}},VJ=je([AJ,of],WJ),qJ=je([ns,cw,FJ,LJ,zJ,UJ,BJ,Er,Rw,E4,VJ,of,EJ],(e,t,r,n,s,a,l,u,d,m,f,p,v)=>{var{chartData:x,dataStartIndex:w,dataEndIndex:k}=d;if(!(p==null||l==null||t==null||u!=="horizontal"&&u!=="vertical"||r==null||n==null||s==null||a==null||m==null)){var{data:b}=p,_;if(b!=null&&b.length>0?_=b:_=x==null?void 0:x.slice(w,k+1),_!=null)return vJ({layout:u,barSettings:p,pos:l,parentViewBox:t,bandSize:m,xAxis:r,yAxis:n,xAxisTicks:s,yAxisTicks:a,stackedData:f,displayedData:_,offset:e,cells:v,dataStartIndex:w})}}),HJ=e=>{var{chartData:t}=e,r=xn(),n=xa();return y.useEffect(()=>n?()=>{}:(r(_N(t)),()=>{r(_N(void 0))}),[t,r,n]),null},cC={x:0,y:0,width:0,height:0,padding:{top:0,right:0,bottom:0,left:0}},P4=ra({name:"brush",initialState:cC,reducers:{setBrushSettings(e,t){return t.payload==null?cC:t.payload}}}),{setBrushSettings:$ee}=P4.actions,KJ=P4.reducer;function GJ(e,t,r){return(t=YJ(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function YJ(e){var t=JJ(e,"string");return typeof t=="symbol"?t:t+""}function JJ(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class mb{static create(t){return new mb(t)}constructor(t){this.scale=t}get domain(){return this.scale.domain}get range(){return this.scale.range}get rangeMin(){return this.range()[0]}get rangeMax(){return this.range()[1]}get bandwidth(){return this.scale.bandwidth}apply(t){var{bandAware:r,position:n}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(t!==void 0){if(n)switch(n){case"start":return this.scale(t);case"middle":{var s=this.bandwidth?this.bandwidth()/2:0;return this.scale(t)+s}case"end":{var a=this.bandwidth?this.bandwidth():0;return this.scale(t)+a}default:return this.scale(t)}if(r){var l=this.bandwidth?this.bandwidth()/2:0;return this.scale(t)+l}return this.scale(t)}}isInRange(t){var r=this.range(),n=r[0],s=r[r.length-1];return n<=s?t>=n&&t<=s:t>=s&&t<=n}}GJ(mb,"EPS",1e-4);function XJ(e){return(e%180+180)%180}var QJ=function(t){var{width:r,height:n}=t,s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,a=XJ(s),l=a*Math.PI/180,u=Math.atan(n/r),d=l>u&&l<Math.PI-u?n/Math.sin(l):r/Math.cos(l);return Math.abs(d)},ZJ={dots:[],areas:[],lines:[]},A4=ra({name:"referenceElements",initialState:ZJ,reducers:{addDot:(e,t)=>{e.dots.push(t.payload)},removeDot:(e,t)=>{var r=Qi(e).dots.findIndex(n=>n===t.payload);r!==-1&&e.dots.splice(r,1)},addArea:(e,t)=>{e.areas.push(t.payload)},removeArea:(e,t)=>{var r=Qi(e).areas.findIndex(n=>n===t.payload);r!==-1&&e.areas.splice(r,1)},addLine:(e,t)=>{e.lines.push(t.payload)},removeLine:(e,t)=>{var r=Qi(e).lines.findIndex(n=>n===t.payload);r!==-1&&e.lines.splice(r,1)}}}),{addDot:Ree,removeDot:Mee,addArea:Fee,removeArea:Lee,addLine:zee,removeLine:Uee}=A4.actions,eX=A4.reducer,tX=y.createContext(void 0),rX=e=>{var{children:t}=e,[r]=y.useState("".concat(Pd("recharts"),"-clip")),n=k4();if(n==null)return null;var{x:s,y:a,width:l,height:u}=n;return y.createElement(tX.Provider,{value:r},y.createElement("defs",null,y.createElement("clipPath",{id:r},y.createElement("rect",{x:s,y:a,height:u,width:l}))),t)};function au(e,t){for(var r in e)if({}.hasOwnProperty.call(e,r)&&(!{}.hasOwnProperty.call(t,r)||e[r]!==t[r]))return!1;for(var n in t)if({}.hasOwnProperty.call(t,n)&&!{}.hasOwnProperty.call(e,n))return!1;return!0}function O4(e,t){if(t<1)return[];if(t===1)return e;for(var r=[],n=0;n<e.length;n+=t)r.push(e[n]);return r}function nX(e,t,r){var n={width:e.width+t.width,height:e.height+t.height};return QJ(n,r)}function sX(e,t,r){var n=r==="width",{x:s,y:a,width:l,height:u}=e;return t===1?{start:n?s:a,end:n?s+l:a+u}:{start:n?s+l:a+u,end:n?s:a}}function Am(e,t,r,n,s){if(e*t<e*n||e*t>e*s)return!1;var a=r();return e*(t-e*a/2-n)>=0&&e*(t+e*a/2-s)<=0}function aX(e,t){return O4(e,t+1)}function iX(e,t,r,n,s){for(var a=(n||[]).slice(),{start:l,end:u}=t,d=0,m=1,f=l,p=function(){var w=n==null?void 0:n[d];if(w===void 0)return{v:O4(n,m)};var k=d,b,_=()=>(b===void 0&&(b=r(w,k)),b),N=w.coordinate,C=d===0||Am(e,N,_,f,u);C||(d=0,f=l,m+=1),C&&(f=N+e*(_()/2+s),d+=m)},v;m<=a.length;)if(v=p(),v)return v.v;return[]}function uC(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function As(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?uC(Object(r),!0).forEach(function(n){oX(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):uC(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function oX(e,t,r){return(t=lX(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function lX(e){var t=cX(e,"string");return typeof t=="symbol"?t:t+""}function cX(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function uX(e,t,r,n,s){for(var a=(n||[]).slice(),l=a.length,{start:u}=t,{end:d}=t,m=function(v){var x=a[v],w,k=()=>(w===void 0&&(w=r(x,v)),w);if(v===l-1){var b=e*(x.coordinate+e*k()/2-d);a[v]=x=As(As({},x),{},{tickCoord:b>0?x.coordinate-b*e:x.coordinate})}else a[v]=x=As(As({},x),{},{tickCoord:x.coordinate});if(x.tickCoord!=null){var _=Am(e,x.tickCoord,k,u,d);_&&(d=x.tickCoord-e*(k()/2+s),a[v]=As(As({},x),{},{isShow:!0}))}},f=l-1;f>=0;f--)m(f);return a}function dX(e,t,r,n,s,a){var l=(n||[]).slice(),u=l.length,{start:d,end:m}=t;if(a){var f=n[u-1],p=r(f,u-1),v=e*(f.coordinate+e*p/2-m);if(l[u-1]=f=As(As({},f),{},{tickCoord:v>0?f.coordinate-v*e:f.coordinate}),f.tickCoord!=null){var x=Am(e,f.tickCoord,()=>p,d,m);x&&(m=f.tickCoord-e*(p/2+s),l[u-1]=As(As({},f),{},{isShow:!0}))}}for(var w=a?u-1:u,k=function(N){var C=l[N],T,P=()=>(T===void 0&&(T=r(C,N)),T);if(N===0){var A=e*(C.coordinate-e*P()/2-d);l[N]=C=As(As({},C),{},{tickCoord:A<0?C.coordinate-A*e:C.coordinate})}else l[N]=C=As(As({},C),{},{tickCoord:C.coordinate});if(C.tickCoord!=null){var M=Am(e,C.tickCoord,P,d,m);M&&(d=C.tickCoord+e*(P()/2+s),l[N]=As(As({},C),{},{isShow:!0}))}},b=0;b<w;b++)k(b);return l}function fX(e,t,r){var{tick:n,ticks:s,viewBox:a,minTickGap:l,orientation:u,interval:d,tickFormatter:m,unit:f,angle:p}=e;if(!s||!s.length||!n)return[];if(Ut(d)||pu.isSsr){var v;return(v=aX(s,Ut(d)?d:0))!==null&&v!==void 0?v:[]}var x=[],w=u==="top"||u==="bottom"?"width":"height",k=f&&w==="width"?bd(f,{fontSize:t,letterSpacing:r}):{width:0,height:0},b=(C,T)=>{var P=typeof m=="function"?m(C.value,T):C.value;return w==="width"?nX(bd(P,{fontSize:t,letterSpacing:r}),k,p):bd(P,{fontSize:t,letterSpacing:r})[w]},_=s.length>=2?pa(s[1].coordinate-s[0].coordinate):1,N=sX(a,_,w);return d==="equidistantPreserveStart"?iX(_,N,b,s,l):(d==="preserveStart"||d==="preserveStartEnd"?x=dX(_,N,b,s,l,d==="preserveStartEnd"):x=uX(_,N,b,s,l),x.filter(C=>C.isShow))}var hX=e=>{var{ticks:t,label:r,labelGapWithTick:n=5,tickSize:s=0,tickMargin:a=0}=e,l=0;if(t){Array.from(t).forEach(f=>{if(f){var p=f.getBoundingClientRect();p.width>l&&(l=p.width)}});var u=r?r.getBoundingClientRect().width:0,d=s+a,m=l+d+u+(r?n:0);return Math.round(m)}return 0},mX=["axisLine","width","height","className","hide","ticks","axisType"],pX=["viewBox"],gX=["viewBox"];function hx(e,t){if(e==null)return{};var r,n,s=yX(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function yX(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function Wl(){return Wl=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Wl.apply(null,arguments)}function dC(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Pn(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?dC(Object(r),!0).forEach(function(n){vX(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):dC(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function vX(e,t,r){return(t=xX(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function xX(e){var t=wX(e,"string");return typeof t=="symbol"?t:t+""}function wX(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var bX={x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd",zIndex:ta.axis};function jX(e){var{x:t,y:r,width:n,height:s,orientation:a,mirror:l,axisLine:u,otherSvgProps:d}=e;if(!u)return null;var m=Pn(Pn(Pn({},d),Zo(u)),{},{fill:"none"});if(a==="top"||a==="bottom"){var f=+(a==="top"&&!l||a==="bottom"&&l);m=Pn(Pn({},m),{},{x1:t,y1:r+f*s,x2:t+n,y2:r+f*s})}else{var p=+(a==="left"&&!l||a==="right"&&l);m=Pn(Pn({},m),{},{x1:t+p*n,y1:r,x2:t+p*n,y2:r+s})}return y.createElement("line",Wl({},m,{className:Yr("recharts-cartesian-axis-line",Qc(u,"className"))}))}function kX(e,t,r,n,s,a,l,u,d){var m,f,p,v,x,w,k=u?-1:1,b=e.tickSize||l,_=Ut(e.tickCoord)?e.tickCoord:e.coordinate;switch(a){case"top":m=f=e.coordinate,v=r+ +!u*s,p=v-k*b,w=p-k*d,x=_;break;case"left":p=v=e.coordinate,f=t+ +!u*n,m=f-k*b,x=m-k*d,w=_;break;case"right":p=v=e.coordinate,f=t+ +u*n,m=f+k*b,x=m+k*d,w=_;break;default:m=f=e.coordinate,v=r+ +u*s,p=v+k*b,w=p+k*d,x=_;break}return{line:{x1:m,y1:p,x2:f,y2:v},tick:{x,y:w}}}function SX(e,t){switch(e){case"left":return t?"start":"end";case"right":return t?"end":"start";default:return"middle"}}function _X(e,t){switch(e){case"left":case"right":return"middle";case"top":return t?"start":"end";default:return t?"end":"start"}}function NX(e){var{option:t,tickProps:r,value:n}=e,s,a=Yr(r.className,"recharts-cartesian-axis-tick-value");if(y.isValidElement(t))s=y.cloneElement(t,Pn(Pn({},r),{},{className:a}));else if(typeof t=="function")s=t(Pn(Pn({},r),{},{className:a}));else{var l="recharts-cartesian-axis-tick-value";typeof t!="boolean"&&(l=Yr(l,t==null?void 0:t.className)),s=y.createElement(fb,Wl({},r,{className:l}),n)}return s}var CX=y.forwardRef((e,t)=>{var{ticks:r=[],tick:n,tickLine:s,stroke:a,tickFormatter:l,unit:u,padding:d,tickTextProps:m,orientation:f,mirror:p,x:v,y:x,width:w,height:k,tickSize:b,tickMargin:_,fontSize:N,letterSpacing:C,getTicksConfig:T,events:P,axisType:A}=e,M=fX(Pn(Pn({},T),{},{ticks:r}),N,C),R=SX(f,p),K=_X(f,p),B=Zo(T),ie=Gx(n),G={};typeof s=="object"&&(G=s);var ne=Pn(Pn({},B),{},{fill:"none"},G),W=M.map($=>Pn({entry:$},kX($,v,x,w,k,f,b,p,_))),q=W.map($=>{var{entry:H,line:ce}=$;return y.createElement(no,{className:"recharts-cartesian-axis-tick",key:"tick-".concat(H.value,"-").concat(H.coordinate,"-").concat(H.tickCoord)},s&&y.createElement("line",Wl({},ne,ce,{className:Yr("recharts-cartesian-axis-tick-line",Qc(s,"className"))})))}),ve=W.map(($,H)=>{var{entry:ce,tick:le}=$,U=Pn(Pn(Pn(Pn({textAnchor:R,verticalAnchor:K},B),{},{stroke:"none",fill:a},ie),le),{},{index:H,payload:ce,visibleTicksCount:M.length,tickFormatter:l,padding:d},m);return y.createElement(no,Wl({className:"recharts-cartesian-axis-tick-label",key:"tick-label-".concat(ce.value,"-").concat(ce.coordinate,"-").concat(ce.tickCoord)},tw(P,ce,H)),n&&y.createElement(NX,{option:n,tickProps:U,value:"".concat(typeof l=="function"?l(ce.value,H):ce.value).concat(u||"")}))});return y.createElement("g",{className:"recharts-cartesian-axis-ticks recharts-".concat(A,"-ticks")},ve.length>0&&y.createElement(il,{zIndex:ta.label},y.createElement("g",{className:"recharts-cartesian-axis-tick-labels recharts-".concat(A,"-tick-labels"),ref:t},ve)),q.length>0&&y.createElement("g",{className:"recharts-cartesian-axis-tick-lines recharts-".concat(A,"-tick-lines")},q))}),EX=y.forwardRef((e,t)=>{var{axisLine:r,width:n,height:s,className:a,hide:l,ticks:u,axisType:d}=e,m=hx(e,mX),[f,p]=y.useState(""),[v,x]=y.useState(""),w=y.useRef(null);y.useImperativeHandle(t,()=>({getCalculatedWidth:()=>{var b;return hX({ticks:w.current,label:(b=e.labelRef)===null||b===void 0?void 0:b.current,labelGapWithTick:5,tickSize:e.tickSize,tickMargin:e.tickMargin})}}));var k=y.useCallback(b=>{if(b){var _=b.getElementsByClassName("recharts-cartesian-axis-tick-value");w.current=_;var N=_[0];if(N){var C=window.getComputedStyle(N),T=C.fontSize,P=C.letterSpacing;(T!==f||P!==v)&&(p(T),x(P))}}},[f,v]);return l||n!=null&&n<=0||s!=null&&s<=0?null:y.createElement(il,{zIndex:e.zIndex},y.createElement(no,{className:Yr("recharts-cartesian-axis",a)},y.createElement(jX,{x:e.x,y:e.y,width:n,height:s,orientation:e.orientation,mirror:e.mirror,axisLine:r,otherSvgProps:Zo(e)}),y.createElement(CX,{ref:k,axisType:d,events:m,fontSize:f,getTicksConfig:e,height:e.height,letterSpacing:v,mirror:e.mirror,orientation:e.orientation,padding:e.padding,stroke:e.stroke,tick:e.tick,tickFormatter:e.tickFormatter,tickLine:e.tickLine,tickMargin:e.tickMargin,tickSize:e.tickSize,tickTextProps:e.tickTextProps,ticks:u,unit:e.unit,width:e.width,x:e.x,y:e.y}),y.createElement(dG,{x:e.x,y:e.y,width:e.width,height:e.height,lowerWidth:e.width,upperWidth:e.width},y.createElement(bG,{label:e.label,labelRef:e.labelRef}),e.children)))}),PX=y.memo(EX,(e,t)=>{var{viewBox:r}=e,n=hx(e,pX),{viewBox:s}=t,a=hx(t,gX);return au(r,s)&&au(n,a)}),pb=y.forwardRef((e,t)=>{var r=Ua(e,bX);return y.createElement(PX,Wl({},r,{ref:t}))});pb.displayName="CartesianAxis";var AX=["dangerouslySetInnerHTML","ticks"],OX=["id"],TX=["domain"],IX=["domain"];function mx(){return mx=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},mx.apply(null,arguments)}function Om(e,t){if(e==null)return{};var r,n,s=DX(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function DX(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function $X(e){var t=xn();return y.useLayoutEffect(()=>(t(kY(e)),()=>{t(SY(e))}),[e,t]),null}var RX=e=>{var{xAxisId:t,className:r}=e,n=Rt(cw),s=xa(),a="xAxis",l=Rt(b=>bu(b,a,t,s)),u=Rt(b=>_T(b,a,t,s)),d=Rt(b=>bT(b,t)),m=Rt(b=>vq(b,t)),f=Rt(b=>WO(b,t));if(d==null||m==null||f==null)return null;var{dangerouslySetInnerHTML:p,ticks:v}=e,x=Om(e,AX),{id:w}=f,k=Om(f,OX);return y.createElement(pb,mx({},x,k,{scale:l,x:m.x,y:m.y,width:d.width,height:d.height,className:Yr("recharts-".concat(a," ").concat(a),r),viewBox:n,ticks:u,axisType:a}))},MX={allowDataOverflow:la.allowDataOverflow,allowDecimals:la.allowDecimals,allowDuplicatedCategory:la.allowDuplicatedCategory,height:la.height,hide:!1,mirror:la.mirror,orientation:la.orientation,padding:la.padding,reversed:la.reversed,scale:la.scale,tickCount:la.tickCount,type:la.type,xAxisId:0},FX=e=>{var t,r,n,s,a,l=Ua(e,MX);return y.createElement(y.Fragment,null,y.createElement($X,{interval:(t=l.interval)!==null&&t!==void 0?t:"preserveEnd",id:l.xAxisId,scale:l.scale,type:l.type,padding:l.padding,allowDataOverflow:l.allowDataOverflow,domain:l.domain,dataKey:l.dataKey,allowDuplicatedCategory:l.allowDuplicatedCategory,allowDecimals:l.allowDecimals,tickCount:l.tickCount,includeHidden:(r=l.includeHidden)!==null&&r!==void 0?r:!1,reversed:l.reversed,ticks:l.ticks,height:l.height,orientation:l.orientation,mirror:l.mirror,hide:l.hide,unit:l.unit,name:l.name,angle:(n=l.angle)!==null&&n!==void 0?n:0,minTickGap:(s=l.minTickGap)!==null&&s!==void 0?s:5,tick:(a=l.tick)!==null&&a!==void 0?a:!0,tickFormatter:l.tickFormatter}),y.createElement(RX,l))},LX=(e,t)=>{var{domain:r}=e,n=Om(e,TX),{domain:s}=t,a=Om(t,IX);return au(n,a)?Array.isArray(r)&&r.length===2&&Array.isArray(s)&&s.length===2?r[0]===s[0]&&r[1]===s[1]:au({domain:r},{domain:s}):!1},T4=y.memo(FX,LX);T4.displayName="XAxis";var zX=["dangerouslySetInnerHTML","ticks"],UX=["id"],BX=["domain"],WX=["domain"];function px(){return px=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},px.apply(null,arguments)}function Tm(e,t){if(e==null)return{};var r,n,s=VX(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function VX(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function qX(e){var t=xn();return y.useLayoutEffect(()=>(t(_Y(e)),()=>{t(NY(e))}),[e,t]),null}var HX=e=>{var{yAxisId:t,className:r,width:n,label:s}=e,a=y.useRef(null),l=y.useRef(null),u=Rt(cw),d=xa(),m=xn(),f="yAxis",p=Rt(P=>bu(P,f,t,d)),v=Rt(P=>jT(P,t)),x=Rt(P=>wq(P,t)),w=Rt(P=>_T(P,f,t,d)),k=Rt(P=>VO(P,t));if(y.useLayoutEffect(()=>{if(!(n!=="auto"||!v||hb(s)||y.isValidElement(s)||k==null)){var P=a.current;if(P){var A=P.getCalculatedWidth();Math.round(v.width)!==Math.round(A)&&m(CY({id:t,width:A}))}}},[w,v,m,s,t,n,k]),v==null||x==null||k==null)return null;var{dangerouslySetInnerHTML:b,ticks:_}=e,N=Tm(e,zX),{id:C}=k,T=Tm(k,UX);return y.createElement(pb,px({},N,T,{ref:a,labelRef:l,scale:p,x:x.x,y:x.y,tickTextProps:n==="auto"?{width:void 0}:{width:n},width:v.width,height:v.height,className:Yr("recharts-".concat(f," ").concat(f),r),viewBox:u,ticks:w,axisType:f}))},KX={allowDataOverflow:ca.allowDataOverflow,allowDecimals:ca.allowDecimals,allowDuplicatedCategory:ca.allowDuplicatedCategory,hide:!1,mirror:ca.mirror,orientation:ca.orientation,padding:ca.padding,reversed:ca.reversed,scale:ca.scale,tickCount:ca.tickCount,type:ca.type,width:ca.width,yAxisId:0},GX=e=>{var t,r,n,s,a,l=Ua(e,KX);return y.createElement(y.Fragment,null,y.createElement(qX,{interval:(t=l.interval)!==null&&t!==void 0?t:"preserveEnd",id:l.yAxisId,scale:l.scale,type:l.type,domain:l.domain,allowDataOverflow:l.allowDataOverflow,dataKey:l.dataKey,allowDuplicatedCategory:l.allowDuplicatedCategory,allowDecimals:l.allowDecimals,tickCount:l.tickCount,padding:l.padding,includeHidden:(r=l.includeHidden)!==null&&r!==void 0?r:!1,reversed:l.reversed,ticks:l.ticks,width:l.width,orientation:l.orientation,mirror:l.mirror,hide:l.hide,unit:l.unit,name:l.name,angle:(n=l.angle)!==null&&n!==void 0?n:0,minTickGap:(s=l.minTickGap)!==null&&s!==void 0?s:5,tick:(a=l.tick)!==null&&a!==void 0?a:!0,tickFormatter:l.tickFormatter}),y.createElement(HX,l))},YX=(e,t)=>{var{domain:r}=e,n=Tm(e,BX),{domain:s}=t,a=Tm(t,WX);return au(n,a)?Array.isArray(r)&&r.length===2&&Array.isArray(s)&&s.length===2?r[0]===s[0]&&r[1]===s[1]:au({domain:r},{domain:s}):!1},I4=y.memo(GX,YX);I4.displayName="YAxis";var Jv={exports:{}},Xv={};/**
 * @license React
 * use-sync-external-store-with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var fC;function JX(){if(fC)return Xv;fC=1;var e=iu();function t(d,m){return d===m&&(d!==0||1/d===1/m)||d!==d&&m!==m}var r=typeof Object.is=="function"?Object.is:t,n=e.useSyncExternalStore,s=e.useRef,a=e.useEffect,l=e.useMemo,u=e.useDebugValue;return Xv.useSyncExternalStoreWithSelector=function(d,m,f,p,v){var x=s(null);if(x.current===null){var w={hasValue:!1,value:null};x.current=w}else w=x.current;x=l(function(){function b(P){if(!_){if(_=!0,N=P,P=p(P),v!==void 0&&w.hasValue){var A=w.value;if(v(A,P))return C=A}return C=P}if(A=C,r(N,P))return A;var M=p(P);return v!==void 0&&v(A,M)?(N=P,A):(N=P,C=M)}var _=!1,N,C,T=f===void 0?null:f;return[function(){return b(m())},T===null?void 0:function(){return b(T())}]},[m,f,p,v]);var k=n(d,x[0],x[1]);return a(function(){w.hasValue=!0,w.value=k},[k]),u(k),k},Xv}var hC;function XX(){return hC||(hC=1,Jv.exports=JX()),Jv.exports}XX();function QX(e){e()}function ZX(){let e=null,t=null;return{clear(){e=null,t=null},notify(){QX(()=>{let r=e;for(;r;)r.callback(),r=r.next})},get(){const r=[];let n=e;for(;n;)r.push(n),n=n.next;return r},subscribe(r){let n=!0;const s=t={callback:r,next:null,prev:t};return s.prev?s.prev.next=s:e=s,function(){!n||e===null||(n=!1,s.next?s.next.prev=s.prev:t=s.prev,s.prev?s.prev.next=s.next:e=s.next)}}}}var mC={notify(){},get:()=>[]};function eQ(e,t){let r,n=mC,s=0,a=!1;function l(k){f();const b=n.subscribe(k);let _=!1;return()=>{_||(_=!0,b(),p())}}function u(){n.notify()}function d(){w.onStateChange&&w.onStateChange()}function m(){return a}function f(){s++,r||(r=e.subscribe(d),n=ZX())}function p(){s--,r&&s===0&&(r(),r=void 0,n.clear(),n=mC)}function v(){a||(a=!0,f())}function x(){a&&(a=!1,p())}const w={addNestedSub:l,notifyNestedSubs:u,handleChangeWrapper:d,isSubscribed:m,trySubscribe:v,tryUnsubscribe:x,getListeners:()=>n};return w}var tQ=()=>typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",rQ=tQ(),nQ=()=>typeof navigator<"u"&&navigator.product==="ReactNative",sQ=nQ(),aQ=()=>rQ||sQ?y.useLayoutEffect:y.useEffect,iQ=aQ(),Qv=Symbol.for("react-redux-context"),Zv=typeof globalThis<"u"?globalThis:{};function oQ(){if(!y.createContext)return{};const e=Zv[Qv]??(Zv[Qv]=new Map);let t=e.get(y.createContext);return t||(t=y.createContext(null),e.set(y.createContext,t)),t}var lQ=oQ();function cQ(e){const{children:t,context:r,serverState:n,store:s}=e,a=y.useMemo(()=>{const d=eQ(s);return{store:s,subscription:d,getServerState:n?()=>n:void 0}},[s,n]),l=y.useMemo(()=>s.getState(),[s]);iQ(()=>{const{subscription:d}=a;return d.onStateChange=d.notifyNestedSubs,d.trySubscribe(),l!==s.getState()&&d.notifyNestedSubs(),()=>{d.tryUnsubscribe(),d.onStateChange=void 0}},[a,l]);const u=r||lQ;return y.createElement(u.Provider,{value:a},t)}var uQ=cQ,dQ=(e,t)=>t,gb=je([dQ,Er,UO,Bn,BT,yo,AH,ns],MH),yb=e=>{var t=e.currentTarget.getBoundingClientRect(),r=t.width/e.currentTarget.offsetWidth,n=t.height/e.currentTarget.offsetHeight;return{chartX:Math.round((e.clientX-t.left)/r),chartY:Math.round((e.clientY-t.top)/n)}},D4=La("mouseClick"),$4=Gd();$4.startListening({actionCreator:D4,effect:(e,t)=>{var r=e.payload,n=gb(t.getState(),yb(r));(n==null?void 0:n.activeIndex)!=null&&t.dispatch(Iq({activeIndex:n.activeIndex,activeDataKey:void 0,activeCoordinate:n.activeCoordinate}))}});var gx=La("mouseMove"),R4=Gd();R4.startListening({actionCreator:gx,effect:(e,t)=>{var r=e.payload,n=t.getState(),s=rb(n,n.tooltip.settings.shared),a=gb(n,yb(r));s==="axis"&&((a==null?void 0:a.activeIndex)!=null?t.dispatch(IT({activeIndex:a.activeIndex,activeDataKey:void 0,activeCoordinate:a.activeCoordinate})):t.dispatch(TT()))}});var pC={accessibilityLayer:!0,barCategoryGap:"10%",barGap:4,barSize:void 0,className:void 0,maxBarSize:void 0,stackOffset:"none",syncId:void 0,syncMethod:"index",baseValue:void 0},M4=ra({name:"rootProps",initialState:pC,reducers:{updateOptions:(e,t)=>{var r;e.accessibilityLayer=t.payload.accessibilityLayer,e.barCategoryGap=t.payload.barCategoryGap,e.barGap=(r=t.payload.barGap)!==null&&r!==void 0?r:pC.barGap,e.barSize=t.payload.barSize,e.maxBarSize=t.payload.maxBarSize,e.stackOffset=t.payload.stackOffset,e.syncId=t.payload.syncId,e.syncMethod=t.payload.syncMethod,e.className=t.payload.className,e.baseValue=t.payload.baseValue}}}),fQ=M4.reducer,{updateOptions:hQ}=M4.actions,F4=ra({name:"polarOptions",initialState:null,reducers:{updatePolarOptions:(e,t)=>t.payload}}),{updatePolarOptions:Bee}=F4.actions,mQ=F4.reducer,L4=La("keyDown"),z4=La("focus"),vb=Gd();vb.startListening({actionCreator:L4,effect:(e,t)=>{var r=t.getState(),n=r.rootProps.accessibilityLayer!==!1;if(n){var{keyboardInteraction:s}=r.tooltip,a=e.payload;if(!(a!=="ArrowRight"&&a!=="ArrowLeft"&&a!=="Enter")){var l=Number(nb(s,ku(r))),u=yo(r);if(a==="Enter"){var d=Sm(r,"axis","hover",String(s.index));t.dispatch(ox({active:!s.active,activeIndex:s.index,activeDataKey:s.dataKey,activeCoordinate:d}));return}var m=Sq(r),f=m==="left-to-right"?1:-1,p=a==="ArrowRight"?1:-1,v=l+p*f;if(!(u==null||v>=u.length||v<0)){var x=Sm(r,"axis","hover",String(v));t.dispatch(ox({active:!0,activeIndex:v.toString(),activeDataKey:void 0,activeCoordinate:x}))}}}}});vb.startListening({actionCreator:z4,effect:(e,t)=>{var r=t.getState(),n=r.rootProps.accessibilityLayer!==!1;if(n){var{keyboardInteraction:s}=r.tooltip;if(!s.active&&s.index==null){var a="0",l=Sm(r,"axis","hover",String(a));t.dispatch(ox({activeDataKey:void 0,active:!0,activeIndex:a,activeCoordinate:l}))}}}});var Ia=La("externalEvent"),U4=Gd();U4.startListening({actionCreator:Ia,effect:(e,t)=>{if(e.payload.handler!=null){var r=t.getState(),n={activeCoordinate:pH(r),activeDataKey:HT(r),activeIndex:su(r),activeLabel:qT(r),activeTooltipIndex:su(r),isTooltipActive:gH(r)};e.payload.handler(n,e.payload.reactEvent)}}});var pQ=je([ju],e=>e.tooltipItemPayloads),gQ=je([pQ,sf,(e,t,r)=>t,(e,t,r)=>r],(e,t,r,n)=>{var s=e.find(u=>u.settings.dataKey===n);if(s!=null){var{positions:a}=s;if(a!=null){var l=t(a,r);return l}}}),B4=La("touchMove"),W4=Gd();W4.startListening({actionCreator:B4,effect:(e,t)=>{var r=e.payload;if(!(r.touches==null||r.touches.length===0)){var n=t.getState(),s=rb(n,n.tooltip.settings.shared);if(s==="axis"){var a=gb(n,yb({clientX:r.touches[0].clientX,clientY:r.touches[0].clientY,currentTarget:r.currentTarget}));(a==null?void 0:a.activeIndex)!=null&&t.dispatch(IT({activeIndex:a.activeIndex,activeDataKey:void 0,activeCoordinate:a.activeCoordinate}))}else if(s==="item"){var l,u=r.touches[0];if(document.elementFromPoint==null)return;var d=document.elementFromPoint(u.clientX,u.clientY);if(!d||!d.getAttribute)return;var m=d.getAttribute(CU),f=(l=d.getAttribute(EU))!==null&&l!==void 0?l:void 0,p=gQ(t.getState(),m,f);t.dispatch(OT({activeDataKey:f,activeIndex:m,activeCoordinate:p}))}}}});var yQ=YP({brush:KJ,cartesianAxis:EY,chartData:pK,errorBars:BY,graphicalItems:yY,layout:lU,legend:dB,options:uK,polarAxis:MG,polarOptions:mQ,referenceElements:eX,rootProps:fQ,tooltip:Dq,zIndex:XH}),vQ=function(t){return I8({reducer:yQ,preloadedState:t,middleware:r=>r({serializableCheck:!1}).concat([$4.middleware,R4.middleware,vb.middleware,U4.middleware,W4.middleware]),enhancers:r=>{var n=r;return typeof r=="function"&&(n=r()),n.concat(oA({type:"raf"}))},devTools:pu.devToolsEnabled})};function xQ(e){var{preloadedState:t,children:r,reduxStoreName:n}=e,s=xa(),a=y.useRef(null);if(s)return r;a.current==null&&(a.current=vQ(t));var l=nw;return y.createElement(uQ,{context:l,store:a.current},r)}function wQ(e){var{layout:t,margin:r}=e,n=xn(),s=xa();return y.useEffect(()=>{s||(n(aU(t)),n(sU(r)))},[n,s,t,r]),null}function bQ(e){var t=xn();return y.useEffect(()=>{t(hQ(e))},[t,e]),null}function gC(e){var{zIndex:t,isPanorama:r}=e,n=r?"recharts-zindex-panorama-":"recharts-zindex-",s=w4("".concat(n).concat(t)),a=xn();return y.useLayoutEffect(()=>(a(YH({zIndex:t,elementId:s,isPanorama:r})),()=>{a(JH({zIndex:t,isPanorama:r}))}),[a,t,s,r]),y.createElement("g",{id:s})}function yC(e){var{children:t,isPanorama:r}=e,n=Rt(LH);if(!n||n.length===0)return t;var s=n.filter(l=>l<0),a=n.filter(l=>l>0);return y.createElement(y.Fragment,null,s.map(l=>y.createElement(gC,{key:l,zIndex:l,isPanorama:r})),t,a.map(l=>y.createElement(gC,{key:l,zIndex:l,isPanorama:r})))}var jQ=["children"];function kQ(e,t){if(e==null)return{};var r,n,s=SQ(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function SQ(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function Im(){return Im=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Im.apply(null,arguments)}var _Q={width:"100%",height:"100%",display:"block"},NQ=y.forwardRef((e,t)=>{var r=aB(),n=iB(),s=EA();if(!el(r)||!el(n))return null;var{children:a,otherAttributes:l,title:u,desc:d}=e,m,f;return l!=null&&(typeof l.tabIndex=="number"?m=l.tabIndex:m=s?0:void 0,typeof l.role=="string"?f=l.role:f=s?"application":void 0),y.createElement(hP,Im({},l,{title:u,desc:d,role:f,tabIndex:m,width:r,height:n,style:_Q,ref:t}),a)}),CQ=e=>{var{children:t}=e,r=Rt(up);if(!r)return null;var{width:n,height:s,y:a,x:l}=r;return y.createElement(hP,{width:n,height:s,x:l,y:a},t)},vC=y.forwardRef((e,t)=>{var{children:r}=e,n=kQ(e,jQ),s=xa();return s?y.createElement(CQ,null,y.createElement(yC,{isPanorama:!0},r)):y.createElement(NQ,Im({ref:t},n),y.createElement(yC,{isPanorama:!1},r))});function EQ(){var e=xn(),[t,r]=y.useState(null),n=Rt(NU);return y.useEffect(()=>{if(t!=null){var s=t.getBoundingClientRect(),a=s.width/t.offsetWidth;vn(a)&&a!==n&&e(oU(a))}},[t,e,n]),r}function xC(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function PQ(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?xC(Object(r),!0).forEach(function(n){AQ(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):xC(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function AQ(e,t,r){return(t=OQ(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function OQ(e){var t=TQ(e,"string");return typeof t=="symbol"?t:t+""}function TQ(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Vl(){return Vl=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Vl.apply(null,arguments)}var IQ=()=>(SK(),null);function Dm(e){if(typeof e=="number")return e;if(typeof e=="string"){var t=parseFloat(e);if(!Number.isNaN(t))return t}return 0}var DQ=y.forwardRef((e,t)=>{var r,n,s=y.useRef(null),[a,l]=y.useState({containerWidth:Dm((r=e.style)===null||r===void 0?void 0:r.width),containerHeight:Dm((n=e.style)===null||n===void 0?void 0:n.height)}),u=y.useCallback((m,f)=>{l(p=>{var v=Math.round(m),x=Math.round(f);return p.containerWidth===v&&p.containerHeight===x?p:{containerWidth:v,containerHeight:x}})},[]),d=y.useCallback(m=>{if(typeof t=="function"&&t(m),m!=null&&typeof ResizeObserver<"u"){var{width:f,height:p}=m.getBoundingClientRect();u(f,p);var v=w=>{var{width:k,height:b}=w[0].contentRect;u(k,b)},x=new ResizeObserver(v);x.observe(m),s.current=x}},[t,u]);return y.useEffect(()=>()=>{var m=s.current;m!=null&&m.disconnect()},[u]),y.createElement(y.Fragment,null,y.createElement(hp,{width:a.containerWidth,height:a.containerHeight}),y.createElement("div",Vl({ref:d},e)))}),$Q=y.forwardRef((e,t)=>{var{width:r,height:n}=e,[s,a]=y.useState({containerWidth:Dm(r),containerHeight:Dm(n)}),l=y.useCallback((d,m)=>{a(f=>{var p=Math.round(d),v=Math.round(m);return f.containerWidth===p&&f.containerHeight===v?f:{containerWidth:p,containerHeight:v}})},[]),u=y.useCallback(d=>{if(typeof t=="function"&&t(d),d!=null){var{width:m,height:f}=d.getBoundingClientRect();l(m,f)}},[t,l]);return y.createElement(y.Fragment,null,y.createElement(hp,{width:s.containerWidth,height:s.containerHeight}),y.createElement("div",Vl({ref:u},e)))}),RQ=y.forwardRef((e,t)=>{var{width:r,height:n}=e;return y.createElement(y.Fragment,null,y.createElement(hp,{width:r,height:n}),y.createElement("div",Vl({ref:t},e)))}),MQ=y.forwardRef((e,t)=>{var{width:r,height:n}=e;return so(r)||so(n)?y.createElement($Q,Vl({},e,{ref:t})):y.createElement(RQ,Vl({},e,{ref:t}))});function FQ(e){return e===!0?DQ:MQ}var LQ=y.forwardRef((e,t)=>{var{children:r,className:n,height:s,onClick:a,onContextMenu:l,onDoubleClick:u,onMouseDown:d,onMouseEnter:m,onMouseLeave:f,onMouseMove:p,onMouseUp:v,onTouchEnd:x,onTouchMove:w,onTouchStart:k,style:b,width:_,responsive:N,dispatchTouchEvents:C=!0}=e,T=y.useRef(null),P=xn(),[A,M]=y.useState(null),[R,K]=y.useState(null),B=EQ(),ie=uw(),G=(ie==null?void 0:ie.width)>0?ie.width:_,ne=(ie==null?void 0:ie.height)>0?ie.height:s,W=y.useCallback(Y=>{B(Y),typeof t=="function"&&t(Y),M(Y),K(Y),Y!=null&&(T.current=Y)},[B,t,M,K]),q=y.useCallback(Y=>{P(D4(Y)),P(Ia({handler:a,reactEvent:Y}))},[P,a]),ve=y.useCallback(Y=>{P(gx(Y)),P(Ia({handler:m,reactEvent:Y}))},[P,m]),$=y.useCallback(Y=>{P(TT()),P(Ia({handler:f,reactEvent:Y}))},[P,f]),H=y.useCallback(Y=>{P(gx(Y)),P(Ia({handler:p,reactEvent:Y}))},[P,p]),ce=y.useCallback(()=>{P(z4())},[P]),le=y.useCallback(Y=>{P(L4(Y.key))},[P]),U=y.useCallback(Y=>{P(Ia({handler:l,reactEvent:Y}))},[P,l]),te=y.useCallback(Y=>{P(Ia({handler:u,reactEvent:Y}))},[P,u]),he=y.useCallback(Y=>{P(Ia({handler:d,reactEvent:Y}))},[P,d]),$e=y.useCallback(Y=>{P(Ia({handler:v,reactEvent:Y}))},[P,v]),Pe=y.useCallback(Y=>{P(Ia({handler:k,reactEvent:Y}))},[P,k]),ke=y.useCallback(Y=>{C&&P(B4(Y)),P(Ia({handler:w,reactEvent:Y}))},[P,C,w]),De=y.useCallback(Y=>{P(Ia({handler:x,reactEvent:Y}))},[P,x]),He=FQ(N);return y.createElement(e4.Provider,{value:A},y.createElement(gL.Provider,{value:R},y.createElement(He,{width:G??(b==null?void 0:b.width),height:ne??(b==null?void 0:b.height),className:Yr("recharts-wrapper",n),style:PQ({position:"relative",cursor:"default",width:G,height:ne},b),onClick:q,onContextMenu:U,onDoubleClick:te,onFocus:ce,onKeyDown:le,onMouseDown:he,onMouseEnter:ve,onMouseLeave:$,onMouseMove:H,onMouseUp:$e,onTouchEnd:De,onTouchMove:ke,onTouchStart:Pe,ref:W},y.createElement(IQ,null),r)))}),zQ=["width","height","responsive","children","className","style","compact","title","desc"];function UQ(e,t){if(e==null)return{};var r,n,s=BQ(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function BQ(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var WQ=y.forwardRef((e,t)=>{var{width:r,height:n,responsive:s,children:a,className:l,style:u,compact:d,title:m,desc:f}=e,p=UQ(e,zQ),v=Zo(p);return d?y.createElement(y.Fragment,null,y.createElement(hp,{width:r,height:n}),y.createElement(vC,{otherAttributes:v,title:m,desc:f},a)):y.createElement(LQ,{className:l,style:u,width:r,height:n,responsive:s??!1,onClick:e.onClick,onMouseLeave:e.onMouseLeave,onMouseEnter:e.onMouseEnter,onMouseMove:e.onMouseMove,onMouseDown:e.onMouseDown,onMouseUp:e.onMouseUp,onContextMenu:e.onContextMenu,onDoubleClick:e.onDoubleClick,onTouchStart:e.onTouchStart,onTouchMove:e.onTouchMove,onTouchEnd:e.onTouchEnd},y.createElement(vC,{otherAttributes:v,title:m,desc:f,ref:t},y.createElement(rX,null,a)))});function yx(){return yx=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},yx.apply(null,arguments)}var VQ={top:5,right:5,bottom:5,left:5},qQ={accessibilityLayer:!0,layout:"horizontal",stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:VQ,reverseStackOrder:!1,syncMethod:"index",responsive:!1},HQ=y.forwardRef(function(t,r){var n,s=Ua(t.categoricalChartProps,qQ),{chartName:a,defaultTooltipEventType:l,validateTooltipEventTypes:u,tooltipPayloadSearcher:d,categoricalChartProps:m}=t,f={chartName:a,defaultTooltipEventType:l,validateTooltipEventTypes:u,tooltipPayloadSearcher:d,eventEmitter:void 0};return y.createElement(xQ,{preloadedState:{options:f},reduxStoreName:(n=m.id)!==null&&n!==void 0?n:a},y.createElement(HJ,{chartData:m.data}),y.createElement(wQ,{layout:s.layout,margin:s.margin}),y.createElement(bQ,{baseValue:s.baseValue,accessibilityLayer:s.accessibilityLayer,barCategoryGap:s.barCategoryGap,maxBarSize:s.maxBarSize,stackOffset:s.stackOffset,barGap:s.barGap,barSize:s.barSize,syncId:s.syncId,syncMethod:s.syncMethod,className:s.className}),y.createElement(WQ,yx({},s,{ref:r})))}),KQ=["axis","item"],GQ=y.forwardRef((e,t)=>y.createElement(HQ,{chartName:"BarChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:KQ,tooltipPayloadSearcher:lK,categoricalChartProps:e,ref:t}));const Zl="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='UTF-8'?%3e%3csvg%20id='icons'%20xmlns='http://www.w3.org/2000/svg'%20version='1.1'%20viewBox='0%200%20288%20288'%3e%3c!--%20Generator:%20Adobe%20Illustrator%2029.8.3,%20SVG%20Export%20Plug-In%20.%20SVG%20Version:%202.1.1%20Build%203)%20--%3e%3cdefs%3e%3cstyle%3e%20.st0%20{%20fill:%20%23c89211;%20}%20.st1%20{%20fill:%20%232e4760;%20}%20%3c/style%3e%3c/defs%3e%3crect%20class='st1'%20x='-.18'%20y='.13'%20width='288'%20height='287.75'%20rx='29.77'%20ry='29.77'/%3e%3cg%3e%3cpath%20class='st0'%20d='M255.27,97.14c-1.15-2.2-2.46-4.34-3.89-6.42-9.61-13.92-24.44-23.22-38.72-24.23-9.72-.86-15.97,1.42-30.41,10.99l-69.64,46.23-.72.49-27.78,32.23.56.79,5.22,7.56.54.8.73-.5,67.68-44.93c13.39-8.89,18.9-11.26,25.65-11.06,10.45.25,23.48,8.33,31.01,19.24,1.09,1.57,2.08,3.22,2.96,4.92,3.7,7.05,5.56,14.86,5.4,21.79l-61.49,40.82-.72.48-27.77,32.24.56.78,5.22,7.56.54.8.73-.48,69.63-46.23c7.75-5.15,12.63-8.93,15.92-12.75l27.76-32.24c-.11.12-.25.25-.35.37,3.04-3.42,4.8-6.83,6.16-11.25,3.68-11.38,1.81-25.42-4.79-38.01Z'/%3e%3cpath%20class='st0'%20d='M32.37,187.15c1.15,2.2,2.45,4.34,3.89,6.43,9.61,13.92,24.45,23.21,38.71,24.23,9.72.87,15.97-1.42,30.41-11l69.63-46.23.73-.49,27.77-32.24-.57-.78-5.22-7.57-.53-.8-.73.5-67.68,44.93c-13.39,8.89-18.9,11.26-25.65,11.06-10.44-.24-23.48-8.33-31-19.23-1.08-1.58-2.08-3.22-2.96-4.92-3.71-7.05-5.57-14.86-5.41-21.79l61.49-40.82.72-.48,27.77-32.24-.56-.79-5.21-7.56-.54-.79-.74.48-69.62,46.23c-7.75,5.14-12.63,8.93-15.92,12.75l-27.76,32.24c.11-.12.26-.25.36-.37-3.04,3.42-4.81,6.83-6.16,11.25-3.68,11.37-1.82,25.42,4.79,38Z'/%3e%3c/g%3e%3c/svg%3e",V4=["Bug","Change Request","Data Correction","Epic","Feature","Group","Issue","Other","Spike","Task","Test Case","User Story"];function YQ(){const e=window.location.origin,t=window.location.pathname,r=t.includes("/admin")?t.substring(0,t.indexOf("/admin")):t.includes("/voter")?t.substring(0,t.indexOf("/voter")):t;return`${e}${r}/admin`}const ga={clientId:"a6283b6c-2210-4d6c-bade-651acfdb6703",tenantId:"3bb4e039-9a0f-4671-9733-a9ae03d39395",get redirectUri(){return YQ()},scopes:["https://app.vssps.visualstudio.com/user_impersonation","offline_access"]};function JQ(){const e=new Uint8Array(32);return crypto.getRandomValues(e),q4(e)}async function XQ(e){const r=new TextEncoder().encode(e),n=await crypto.subtle.digest("SHA-256",r);return q4(new Uint8Array(n))}function q4(e){return btoa(String.fromCharCode(...e)).replace(/\+/g,"-").replace(/\//g,"_").replace(/=/g,"")}async function QQ(e){const t=JQ(),r=await XQ(t);sessionStorage.setItem("pkce_verifier",t);const n=new URLSearchParams({client_id:ga.clientId,response_type:"code",redirect_uri:ga.redirectUri,response_mode:"query",scope:ga.scopes.join(" "),state:e,code_challenge:r,code_challenge_method:"S256"});return`https://login.microsoftonline.com/${ga.tenantId}/oauth2/v2.0/authorize?${n}`}async function ZQ(e){const t=`https://login.microsoftonline.com/${ga.tenantId}/oauth2/v2.0/token`,r=sessionStorage.getItem("pkce_verifier");if(!r)throw new Error("Code verifier not found - PKCE flow incomplete");const n=new URLSearchParams({client_id:ga.clientId,scope:ga.scopes.join(" "),code:e,redirect_uri:ga.redirectUri,grant_type:"authorization_code",code_verifier:r}),s=await fetch(t,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:n.toString()});if(!s.ok){const l=await s.json();throw console.error("Token exchange error:",l),new Error(`Failed to exchange code for tokens: ${l.error_description||l.error}`)}const a=await s.json();return sessionStorage.removeItem("pkce_verifier"),{accessToken:a.access_token,refreshToken:a.refresh_token,expiresIn:a.expires_in}}async function eZ(e){const t=`https://login.microsoftonline.com/${ga.tenantId}/oauth2/v2.0/token`,r=new URLSearchParams({client_id:ga.clientId,scope:ga.scopes.join(" "),refresh_token:e,grant_type:"refresh_token"}),n=await fetch(t,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:r.toString()});if(!n.ok){const a=await n.json();throw console.error("Token refresh error:",a),new Error(`Failed to refresh access token: ${a.error_description||a.error}`)}const s=await n.json();return{accessToken:s.access_token,expiresIn:s.expires_in}}async function H4(e,t){if(!e.accessToken||!e.organization||!e.project)throw new Error("Missing required configuration");const r=t||e.workItemType;if(!r)throw new Error("Missing work item type for state fetch");const n=encodeURIComponent(r),s=`https://dev.azure.com/${e.organization}/${e.project}/_apis/wit/workitemtypes/${n}?api-version=7.1`,a=await fetch(s,{headers:{Authorization:`Bearer ${e.accessToken}`,"Content-Type":"application/json"}});if(!a.ok)throw new Error(`Failed to fetch states: ${a.statusText}`);const l=await a.json();return l.states&&Array.isArray(l.states)?l.states.map(u=>u.name):[]}async function wC(e){const t=new Set;for(const r of V4)try{(await H4({...e,workItemType:r},r)).forEach(s=>{s&&t.add(s)})}catch(n){console.warn(`Failed to fetch states for type ${r}:`,n)}return Array.from(t).sort((r,n)=>r.localeCompare(n))}async function vx(e){if(!e.accessToken||!e.organization||!e.project)throw new Error("Missing required configuration");const t=`https://dev.azure.com/${e.organization}/${e.project}/_apis/wit/classificationnodes/areas?$depth=10&api-version=7.1`,r=await fetch(t,{headers:{Authorization:`Bearer ${e.accessToken}`,"Content-Type":"application/json"}});if(!r.ok)throw new Error(`Failed to fetch area paths: ${r.statusText}`);const n=await r.json(),s=(a,l="")=>{const u=l?`${l}\\${a.name}`:a.name;let d=[u];return a.children&&a.children.length>0&&a.children.forEach(m=>{d=d.concat(s(m,u))}),d};return s(n)}async function tZ(e,t,r=[]){var n;if(!e.accessToken||!e.organization||!e.project)throw new Error("Missing required configuration");if(!t)return vx(e);try{const s=[`[System.WorkItemType] = '${t}'`];if(r&&r.length>0)if(r.length===1)s.push(`[System.State] = '${r[0]}'`);else{const k=r.map(b=>`'${b}'`).join(", ");s.push(`[System.State] IN (${k})`)}const a=`SELECT [System.Id] FROM WorkItems WHERE ${s.join(" AND ")} ORDER BY [System.ChangedDate] DESC`,l=`https://dev.azure.com/${e.organization}/${e.project}/_apis/wit/wiql?api-version=7.1`,u=await fetch(l,{method:"POST",headers:{Authorization:`Bearer ${e.accessToken}`,"Content-Type":"application/json"},body:JSON.stringify({query:a})});if(!u.ok)return console.warn("Failed to fetch area paths by type/state, returning empty list"),[];const d=await u.json();if(!d.workItems||d.workItems.length===0)return[];const m=d.workItems.map(k=>k.id).slice(0,200);if(m.length===0)return[];const f=`https://dev.azure.com/${e.organization}/${e.project}/_apis/wit/workitems?ids=${m.join(",")}&fields=System.AreaPath,System.TeamProject&api-version=7.1`,p=await fetch(f,{headers:{Authorization:`Bearer ${e.accessToken}`,"Content-Type":"application/json"}});if(!p.ok)return console.warn("Failed to fetch work item area paths for filtered request"),[];const v=await p.json(),x=new Set,w=((n=e.project)==null?void 0:n.toLowerCase())||"";return v.value&&Array.isArray(v.value)&&v.value.forEach(k=>{var N,C,T;if((((C=(N=k.fields)==null?void 0:N["System.TeamProject"])==null?void 0:C.toLowerCase())||"")!==w)return;const _=(T=k.fields)==null?void 0:T["System.AreaPath"];_&&x.add(_)}),Array.from(x).sort()}catch(s){return console.error("Error fetching area paths for type/state:",s),[]}}async function rZ(e,t){var r;if(!e.accessToken||!e.organization||!e.project)throw new Error("Missing required configuration");if(!t||t.length===0)return{types:[],areaPaths:[],tags:[]};try{const s=`SELECT [System.Id], [System.WorkItemType], [System.AreaPath] FROM WorkItems WHERE ${t.length===1?`[System.State] = '${t[0]}'`:`[System.State] IN (${t.map(b=>`'${b}'`).join(", ")})`} ORDER BY [System.ChangedDate] DESC`,a=`https://dev.azure.com/${e.organization}/${e.project}/_apis/wit/wiql?api-version=7.1`,l=await fetch(a,{method:"POST",headers:{Authorization:`Bearer ${e.accessToken}`,"Content-Type":"application/json"},body:JSON.stringify({query:s})});if(!l.ok)throw new Error(`Failed to fetch work items by state: ${l.statusText}`);const u=await l.json();if(!u.workItems||u.workItems.length===0)return{types:[],areaPaths:[],tags:[]};const d=u.workItems.map(b=>b.id).slice(0,200);if(d.length===0)return{types:[],areaPaths:[],tags:[]};const m=`https://dev.azure.com/${e.organization}/${e.project}/_apis/wit/workitems?ids=${d.join(",")}&fields=System.WorkItemType,System.AreaPath,System.Tags,System.TeamProject&api-version=7.1`,f=await fetch(m,{headers:{Authorization:`Bearer ${e.accessToken}`,"Content-Type":"application/json"}});if(!f.ok)return console.warn("Failed to fetch work item details for states filter"),{types:[],areaPaths:[],tags:[]};const p=await f.json(),v=new Set,x=new Set,w=new Set,k=((r=e.project)==null?void 0:r.toLowerCase())||"";return p.value&&Array.isArray(p.value)&&p.value.forEach(b=>{var P,A,M,R,K;if((((A=(P=b.fields)==null?void 0:P["System.TeamProject"])==null?void 0:A.toLowerCase())||"")!==k)return;const N=(M=b.fields)==null?void 0:M["System.WorkItemType"],C=(R=b.fields)==null?void 0:R["System.AreaPath"],T=(K=b.fields)==null?void 0:K["System.Tags"];N&&v.add(N),C&&x.add(C),T&&T.split(";").map(B=>B.trim()).forEach(B=>{B&&w.add(B)})}),{types:Array.from(v).sort((b,_)=>b.localeCompare(_)),areaPaths:Array.from(x).sort((b,_)=>b.localeCompare(_)),tags:Array.from(w).sort((b,_)=>b.localeCompare(_))}}catch(n){return console.error("Error fetching types and area paths for states:",n),{types:[],areaPaths:[],tags:[]}}}async function nZ(e){if(!e.accessToken||!e.organization)throw new Error("Missing required configuration");const t=`https://dev.azure.com/${e.organization}/_apis/projects?stateFilter=All&api-version=7.1`,r=await fetch(t,{headers:{Authorization:`Bearer ${e.accessToken}`,"Content-Type":"application/json"}});if(!r.ok)throw new Error(`Failed to fetch projects: ${r.statusText}`);const n=await r.json();return!(n!=null&&n.value)||!Array.isArray(n.value)?[]:n.value.map(s=>s==null?void 0:s.name).filter(s=>typeof s=="string"&&s.trim().length>0).map(s=>s.trim()).sort((s,a)=>s.localeCompare(a))}async function sZ(e,t){var r;if(!e.accessToken||!e.organization||!e.project)throw new Error("Missing required configuration");try{const s=`SELECT [System.Id], [System.WorkItemType], [System.State] FROM WorkItems WHERE (${t.map(k=>`[System.AreaPath] UNDER '${k}'`).join(" OR ")}) ORDER BY [System.ChangedDate] DESC`,a=`https://dev.azure.com/${e.organization}/${e.project}/_apis/wit/wiql?api-version=7.1`,l=await fetch(a,{method:"POST",headers:{Authorization:`Bearer ${e.accessToken}`,"Content-Type":"application/json"},body:JSON.stringify({query:s})});if(!l.ok)throw new Error(`Failed to fetch work items: ${l.statusText}`);const u=await l.json();if(!u.workItems||u.workItems.length===0)return{types:[],states:[]};const d=u.workItems.map(k=>k.id).slice(0,200),m=`https://dev.azure.com/${e.organization}/${e.project}/_apis/wit/workitems?ids=${d.join(",")}&fields=System.WorkItemType,System.State,System.TeamProject&api-version=7.1`,f=await fetch(m,{headers:{Authorization:`Bearer ${e.accessToken}`,"Content-Type":"application/json"}});if(!f.ok)return console.warn("Failed to fetch work item details"),{types:[],states:[]};const p=await f.json(),v=new Set,x=new Set,w=((r=e.project)==null?void 0:r.toLowerCase())||"";return p.value&&Array.isArray(p.value)&&p.value.forEach(k=>{var b;if(k.fields){if((((b=k.fields["System.TeamProject"])==null?void 0:b.toLowerCase())||"")!==w)return;k.fields["System.WorkItemType"]&&v.add(k.fields["System.WorkItemType"]),k.fields["System.State"]&&x.add(k.fields["System.State"])}}),{types:Array.from(v).sort(),states:Array.from(x).sort()}}catch(n){return console.error("Error fetching types and states for area path:",n),{types:[],states:[]}}}async function aZ(e,t){var r;if(!e.accessToken||!e.organization||!e.project)throw new Error("Missing required configuration");try{const s=`SELECT [System.Id], [System.WorkItemType], [System.State] FROM WorkItems WHERE (${t.map(b=>`[System.Tags] CONTAINS '${b}'`).join(" OR ")}) ORDER BY [System.ChangedDate] DESC`,a=`https://dev.azure.com/${e.organization}/${e.project}/_apis/wit/wiql?api-version=7.1`,l=await fetch(a,{method:"POST",headers:{Authorization:`Bearer ${e.accessToken}`,"Content-Type":"application/json"},body:JSON.stringify({query:s})});if(!l.ok)throw new Error(`Failed to fetch work items: ${l.statusText}`);const u=await l.json();if(!u.workItems||u.workItems.length===0)return{types:[],states:[],areaPaths:[]};const d=u.workItems.map(b=>b.id).slice(0,200),m=`https://dev.azure.com/${e.organization}/${e.project}/_apis/wit/workitems?ids=${d.join(",")}&fields=System.WorkItemType,System.State,System.AreaPath,System.TeamProject&api-version=7.1`,f=await fetch(m,{headers:{Authorization:`Bearer ${e.accessToken}`,"Content-Type":"application/json"}});if(!f.ok)return console.warn("Failed to fetch work item details"),{types:[],states:[],areaPaths:[]};const p=await f.json(),v=new Set,x=new Set,w=new Set,k=((r=e.project)==null?void 0:r.toLowerCase())||"";return p.value&&Array.isArray(p.value)&&p.value.forEach(b=>{var _;if(b.fields){if((((_=b.fields["System.TeamProject"])==null?void 0:_.toLowerCase())||"")!==k)return;b.fields["System.WorkItemType"]&&v.add(b.fields["System.WorkItemType"]),b.fields["System.State"]&&x.add(b.fields["System.State"]),b.fields["System.AreaPath"]&&w.add(b.fields["System.AreaPath"])}}),{types:Array.from(v).sort(),states:Array.from(x).sort(),areaPaths:Array.from(w).sort()}}catch(n){return console.error("Error fetching types and states for tags:",n),{types:[],states:[],areaPaths:[]}}}async function iZ(e,t,r,n){if(!e.accessToken||!e.organization||!e.project)throw new Error("Missing required configuration");try{const s=[];if(s.push(`[System.WorkItemType] = '${t}'`),r&&r.length>0)if(r.length===1)s.push(`[System.State] = '${r[0]}'`);else{const w=r.map(k=>`'${k}'`).join(", ");s.push(`[System.State] IN (${w})`)}if(n&&n.length>0)if(n.length===1)s.push(`[System.AreaPath] UNDER '${n[0]}'`);else{const w=n.map(k=>`[System.AreaPath] UNDER '${k}'`);s.push(`(${w.join(" OR ")})`)}const a=`SELECT [System.Id] FROM WorkItems WHERE ${s.join(" AND ")} ORDER BY [System.ChangedDate] DESC`,l=`https://dev.azure.com/${e.organization}/${e.project}/_apis/wit/wiql?api-version=7.1`,u=await fetch(l,{method:"POST",headers:{Authorization:`Bearer ${e.accessToken}`,"Content-Type":"application/json"},body:JSON.stringify({query:a})});if(!u.ok)return console.warn("Failed to fetch tags, returning empty array"),[];const d=await u.json();if(!d.workItems||d.workItems.length===0)return[];const m=d.workItems.map(w=>w.id).slice(0,200),f=`https://dev.azure.com/${e.organization}/${e.project}/_apis/wit/workitems?ids=${m.join(",")}&fields=System.Tags&api-version=7.1`,p=await fetch(f,{headers:{Authorization:`Bearer ${e.accessToken}`,"Content-Type":"application/json"}});if(!p.ok)return console.warn("Failed to fetch work item details for tags"),[];const v=await p.json(),x=new Set;return v.value&&Array.isArray(v.value)&&v.value.forEach(w=>{w.fields&&w.fields["System.Tags"]&&w.fields["System.Tags"].split(";").map(b=>b.trim()).forEach(b=>{b&&x.add(b)})}),Array.from(x).sort()}catch(s){return console.warn("Error fetching tags, returning empty array:",s),[]}}async function bC(e){if(!e.accessToken||!e.organization||!e.project)throw new Error("Missing required configuration");const t=new Set;try{const r=[];let n=null;do{let s=`https://dev.azure.com/${e.organization}/${e.project}/_apis/wit/tags?api-version=7.1`;n&&(s+=`&continuationToken=${encodeURIComponent(n)}`);const a=await fetch(s,{headers:{Authorization:`Bearer ${e.accessToken}`,"Content-Type":"application/json"}});if(!a.ok){console.warn("Failed to fetch tags page, aborting remaining pages");break}const l=await a.json();l.value&&Array.isArray(l.value)&&l.value.forEach(u=>{u&&u.name&&r.push(u.name)}),n=a.headers.get("x-ms-continuationtoken")}while(n);r.forEach(s=>t.add(s))}catch(r){console.warn("Error fetching tags, returning empty array:",r)}try{(await oZ(e)).forEach(n=>t.add(n))}catch(r){console.warn("Error fetching tags via WIQL fallback:",r)}return Array.from(t).sort((r,n)=>r.localeCompare(n))}async function oZ(e){const t={query:"SELECT [System.Id] FROM WorkItems WHERE [System.TeamProject] = @project ORDER BY [System.ChangedDate] DESC"},r=`https://dev.azure.com/${e.organization}/${e.project}/_apis/wit/wiql?api-version=7.1`,n=await fetch(r,{method:"POST",headers:{Authorization:`Bearer ${e.accessToken}`,"Content-Type":"application/json"},body:JSON.stringify(t)});if(!n.ok)throw new Error(`Failed to fetch tags via WIQL: ${n.status}`);const s=await n.json();if(!s.workItems||s.workItems.length===0)return[];const a=s.workItems.map(f=>f.id).slice(0,200);if(a.length===0)return[];const l=`https://dev.azure.com/${e.organization}/${e.project}/_apis/wit/workitems?ids=${a.join(",")}&fields=System.Tags&api-version=7.1`,u=await fetch(l,{headers:{Authorization:`Bearer ${e.accessToken}`,"Content-Type":"application/json"}});if(!u.ok)throw new Error(`Failed to fetch work item details for tags via WIQL fallback: ${u.status}`);const d=await u.json(),m=new Set;return d.value&&Array.isArray(d.value)&&d.value.forEach(f=>{f.fields&&f.fields["System.Tags"]&&f.fields["System.Tags"].split(";").map(v=>v.trim()).forEach(v=>{v&&m.add(v)})}),Array.from(m)}function lZ(e){const t=new Date(e).getTime(),r=Date.now(),n=300*1e3;return t-r<n}async function cZ(){const e=new URLSearchParams(window.location.search),t=e.get("code"),r=e.get("state");if(!t)return null;const n=sessionStorage.getItem("oauth_state");if(r!==n)throw new Error("State mismatch - possible CSRF attack");const s=await ZQ(t);return sessionStorage.removeItem("oauth_state"),s}async function uZ(){const e=Math.random().toString(36).substring(7);sessionStorage.setItem("oauth_state",e);const t=sessionStorage.getItem("currentSession");t&&sessionStorage.setItem("oauth_session_backup",t);const r=await QQ(e);window.location.href=r}async function jC(e){const{organization:t,project:r,workItemType:n,query:s,accessToken:a}=e;if(!a)throw new Error("Not authenticated with Azure DevOps");try{let l;s?l=`SELECT [System.Id] FROM WorkItems WHERE ${s}`:l=`SELECT [System.Id] FROM WorkItems WHERE [System.WorkItemType] = '${n}' AND [System.State] = 'Active'`;const u=`https://dev.azure.com/${t}/${r}/_apis/wit/wiql?api-version=7.0`,d=await fetch(u,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${a}`},body:JSON.stringify({query:l})});if(!d.ok)throw new Error(`Azure DevOps query failed: ${d.status} ${d.statusText}`);const f=(await d.json()).workItems.map(R=>R.id);if(f.length===0)return[];const p=["System.Id","System.Title","System.Description","System.Tags","System.WorkItemType","System.State","Microsoft.VSTS.Common.Priority","System.AreaPath","System.IterationPath"].join(","),v=200,x=[];for(let R=0;R<f.length;R+=v){const B=f.slice(R,R+v).join(","),ie=`https://dev.azure.com/${t}/${r}/_apis/wit/workitems?ids=${B}&fields=${p}&api-version=7.0`,G=await fetch(ie,{headers:{Authorization:`Bearer ${a}`}});if(!G.ok)throw new Error(`Failed to fetch work items: ${G.status} ${G.statusText}`);const ne=await G.json();ne.value&&Array.isArray(ne.value)&&x.push(...ne.value)}if(x.length===0)return[];const w=new Map,k=new Map,b=new Map,_=new Map,N=10;for(let R=0;R<x.length;R+=N){const K=x.slice(R,R+N);await Promise.all(K.map(async B=>{try{const ie=`https://dev.azure.com/${t}/${r}/_apis/wit/workitems/${B.id}?$expand=relations&api-version=7.0`,G=await fetch(ie,{headers:{Authorization:`Bearer ${a}`}});if(G.ok){const ne=await G.json(),W=B.fields["System.WorkItemType"]||"",q=W&&W.toLowerCase()==="epic";if(ne.relations){for(const ve of ne.relations)if(ve.rel==="System.LinkTypes.Hierarchy-Forward"){const $=ve.url.match(/\/work[iI]tems\/(\d+)(?:\?|$|\/)/i);if($){const H=parseInt($[1],10);q?w.has(H)||(w.set(H,B.id),console.log(`[Epic Detection] Epic ${B.id} "${B.fields["System.Title"]}" has child ${H}, storing as parent of ${H}`)):w.has(B.id)?console.log(`[Epic Detection] Work item ${B.id} already has parent ${w.get(B.id)}, ignoring additional parent ${H}`):(w.set(B.id,H),console.log(`[Epic Detection] Work item ${B.id} "${B.fields["System.Title"]}" (type: ${W}) has parent ${H}`))}}else if(ve.rel==="System.LinkTypes.Hierarchy-Reverse"){const $=ve.url.match(/\/work[iI]tems\/(\d+)(?:\?|$|\/)/i);if($){const H=parseInt($[1],10);w.has(H)||(w.set(H,B.id),console.log(`[Epic Detection] Work item ${B.id} "${B.fields["System.Title"]}" (type: ${W}) has child ${H}, storing as parent of ${H}`))}}}}}catch(ie){console.error(`Error fetching relations for work item ${B.id}:`,ie)}}))}const C=Array.from(new Set(w.values()));if(C.length>0)for(let K=0;K<C.length;K+=200){const ie=C.slice(K,K+200).join(","),G=["System.Id","System.Title","System.WorkItemType"].join(","),ne=`https://dev.azure.com/${t}/${r}/_apis/wit/workitems?ids=${ie}&fields=${G}&api-version=7.0`;try{const W=await fetch(ne,{headers:{Authorization:`Bearer ${a}`}});if(W.ok){const q=await W.json(),ve=[];for(const $ of q.value){const H=$.fields["System.Title"]||"",ce=$.fields["System.WorkItemType"]||"";b.set($.id,H),_.set($.id,ce),console.log(`[Epic Detection] Fetched parent ${$.id}: type="${ce}", title="${H}"`),ce&&ce.toLowerCase()==="epic"?(k.set($.id,H),console.log(`[Epic Detection]  Found Epic ${$.id}: "${H}"`)):(console.log(`[Epic Detection] Parent ${$.id} is type "${ce}", not an Epic - will check for grandparent`),ve.push($.id))}ve.length>0&&await Promise.all(ve.map(async $=>{try{const H=`https://dev.azure.com/${t}/${r}/_apis/wit/workitems/${$}?$expand=relations&api-version=7.0`,ce=await fetch(H,{headers:{Authorization:`Bearer ${a}`}});if(ce.ok){const le=await ce.json();if(le.relations){for(const U of le.relations)if(U.rel==="System.LinkTypes.Hierarchy-Forward"){const te=U.url.match(/\/work[iI]tems\/(\d+)(?:\?|$|\/)/i);if(te){const he=parseInt(te[1],10);w.has($)||(w.set($,he),console.log(`[Epic Detection] Parent ${$} has grandparent ${he}`))}}}}}catch(H){console.error(`Error fetching relations for parent ${$}:`,H)}}))}}catch(W){console.error("Error fetching parent work items:",W)}}let T=Array.from(new Set(w.values())).filter(R=>!b.has(R)),P=new Set,A=5,M=0;for(b.forEach((R,K)=>P.add(K));T.length>0&&M<A;){M++,console.log(`[Epic Detection] Fetching ancestor level ${M}, ${T.length} ancestors to fetch`);const R=200;for(let K=0;K<T.length;K+=R){const ie=T.slice(K,K+R).join(","),G=["System.Id","System.Title","System.WorkItemType"].join(","),ne=`https://dev.azure.com/${t}/${r}/_apis/wit/workitems?ids=${ie}&fields=${G}&api-version=7.0`;try{const W=await fetch(ne,{headers:{Authorization:`Bearer ${a}`}});if(W.ok){const q=await W.json(),ve=[];for(const $ of q.value){if(P.has($.id))continue;P.add($.id);const H=$.fields["System.Title"]||"",ce=$.fields["System.WorkItemType"]||"";b.set($.id,H),_.set($.id,ce),console.log(`[Epic Detection] Fetched ancestor ${$.id}: type="${ce}", title="${H}"`),ce&&ce.toLowerCase()==="epic"?(k.set($.id,H),console.log(`[Epic Detection]  Found Epic ancestor ${$.id}: "${H}"`)):console.log(`[Epic Detection] Ancestor ${$.id} is type "${ce}", checking for its parent...`)}await Promise.all(q.value.map(async $=>{if(P.has($.id))return;const H=$.fields["System.WorkItemType"]||"";if(H&&H.toLowerCase()!=="epic")try{const ce=`https://dev.azure.com/${t}/${r}/_apis/wit/workitems/${$.id}?$expand=relations&api-version=7.0`,le=await fetch(ce,{headers:{Authorization:`Bearer ${a}`}});if(le.ok){const U=await le.json();if(U.relations){for(const te of U.relations)if(te.rel==="System.LinkTypes.Hierarchy-Forward"){const he=te.url.match(/\/work[iI]tems\/(\d+)(?:\?|$|\/)/i);if(he){const $e=parseInt(he[1],10);P.has($e)||(w.set($.id,$e),ve.push($e),console.log(`[Epic Detection] Ancestor ${$.id} has parent ${$e}`))}}}}}catch(ce){console.error(`Error fetching relations for ancestor ${$.id}:`,ce)}})),T=ve}}catch(W){console.error("Error fetching ancestor work items:",W)}}}return x.map(R=>{let K=null,B=null;const ie=R.fields["System.WorkItemType"]||"",G=ie&&ie.toLowerCase()==="epic";if(G){const W=w.get(R.id);W&&(console.warn(`[Epic Detection]  Work item ${R.id} "${R.fields["System.Title"]}" is an Epic but has a parent ${W} stored. This is likely incorrect - Epics are at the top of the hierarchy.`),w.delete(R.id)),console.log(`[Epic Detection] Work item ${R.id} "${R.fields["System.Title"]}" is itself an Epic (type: ${ie}), skipping Epic parent lookup`)}else{let W=w.get(R.id),q=[];for(;W&&!q.includes(W);){if(q.push(W),console.log(`[Epic Detection] Work item ${R.id} "${R.fields["System.Title"]}" (type: ${ie}) checking parent ${W}`),K=k.get(W)||null,K){B=W,console.log(`[Epic Detection]  Work item ${R.id} "${R.fields["System.Title"]}" has Epic parent ${W}: "${K}"`);break}const ve=b.get(W),$=_.get(W);if($)if($.toLowerCase()==="epic"){K=ve||null,B=W,K&&k.set(W,K),console.log(`[Epic Detection]  Work item ${R.id} "${R.fields["System.Title"]}" has Epic parent ${W}: "${K}"`);break}else console.log(`[Epic Detection] Parent ${W} "${ve}" is type "${$}", traversing up to find Epic...`),W=w.get(W);else{console.warn(`[Epic Detection]  Work item ${R.id} "${R.fields["System.Title"]}" has parent ${W} but parent wasn't fetched`);break}}}if(!K&&!G){const W=w.get(R.id);if(W){const q=b.get(W),ve=_.get(W)||"Unknown";q?console.log(`[Epic Detection]  Work item ${R.id} "${R.fields["System.Title"]}" has parent ${W} "${q}" (type: "${ve}") but no Epic found in hierarchy`):console.warn(`[Epic Detection]  Work item ${R.id} "${R.fields["System.Title"]}" has parent ${W} but parent wasn't fetched`)}else console.log(`[Epic Detection] Work item ${R.id} "${R.fields["System.Title"]}" has no parent`)}if(!K&&R.fields){const q=["System.Epic","Epic","Microsoft.VSTS.Common.Epic","Custom.Epic","EpicLink","EpicName",...Object.keys(R.fields).filter(ve=>ve.toLowerCase().includes("epic")&&!["System.Epic","Epic","Microsoft.VSTS.Common.Epic","Custom.Epic","EpicLink","EpicName"].includes(ve))];for(const ve of q){const $=R.fields[ve];if($!=null){if(typeof $=="string"&&$.trim()!==""){const H=parseInt($.trim());if(!isNaN(H)&&H>0){if(K=k.get(H)||null,K){B=H;break}}else{K=$.trim();break}}else if(typeof $=="number"&&(K=k.get($)||null,K)){B=$;break}}}}if(!K){const W=w.get(R.id);console.log(W?`[Epic Detection] Work item ${R.id} "${R.fields["System.Title"]}" has parent ${W} but no Epic title found`:`[Epic Detection] Work item ${R.id} "${R.fields["System.Title"]}" has no Epic found (no parent)`)}const ne={id:R.id,fields:{"System.Title":R.fields["System.Title"],"System.Description":R.fields["System.Description"],"System.Tags":R.fields["System.Tags"],"System.WorkItemType":R.fields["System.WorkItemType"],"System.State":R.fields["System.State"],"Microsoft.VSTS.Common.Priority":R.fields["Microsoft.VSTS.Common.Priority"],"System.AreaPath":R.fields["System.AreaPath"],"System.IterationPath":R.fields["System.IterationPath"],Epic:K||void 0,EpicId:B?B.toString():void 0},url:`https://dev.azure.com/${t}/${r}/_workitems/edit/${R.id}`};return console.log(`[Map] Work item ${R.id} "${R.fields["System.Title"]}" mapped with Epic: "${K||"none"}", EpicId: "${B||"none"}"`),ne})}catch(l){throw console.error("Error fetching from Azure DevOps:",l),l}}function dZ(e){if(!e)return[];const t=/<img[^>]+src="([^"]+)"/gi,r=[];let n;for(;(n=t.exec(e))!==null;)r.push(n[1]);return r}async function fZ(e,t,r){if(e.length===0)return[];const{supabase:n}=await uu(async()=>{const{supabase:a}=await Promise.resolve().then(()=>i5);return{supabase:a}},void 0),s=[];for(let a=0;a<e.length;a++)try{const l=e[a],u=await fetch(l,{headers:{Authorization:`Bearer ${r}`}});if(!u.ok){console.warn(`Failed to fetch image from Azure DevOps: ${l}`);continue}const d=await u.blob();let m="png";d.type.includes("jpeg")||d.type.includes("jpg")?m="jpg":d.type.includes("png")?m="png":d.type.includes("gif")?m="gif":d.type.includes("webp")&&(m="webp");const p=`${Date.now()}-${a+1}.${m}`,v=`features/${t}/${p}`,{data:x,error:w}=await n.storage.from("feature-attachments").upload(v,d,{contentType:d.type,upsert:!1});if(w){console.error("Error uploading image to Supabase:",w);continue}const{data:{publicUrl:k}}=n.storage.from("feature-attachments").getPublicUrl(v);s.push(k)}catch(l){console.error("Error processing Azure DevOps image:",l)}return s}function kC(e){return e.map(t=>{let r,n;const s=t.fields.Epic,a=t.fields.EpicId,l=t.fields["System.WorkItemType"];if(console.log(`[Convert] Work item ${t.id} "${t.fields["System.Title"]}": epicField="${s}", epicIdField="${a}", workItemType="${l}"`),s&&typeof s=="string"&&s.trim()!==""){const p=s.trim();p!==l&&p!=="Epic"&&p.toLowerCase()!=="epic"?(r=p,console.log(`[Convert] Work item ${t.id} converted - Epic: "${r}"`)):console.warn(`[Convert] Work item ${t.id} has epic field "${p}" which matches work item type "${l}" - ignoring`)}a&&typeof a=="string"&&a.trim()!==""&&(n=a.trim(),console.log(`[Convert] Work item ${t.id} - Epic ID: "${n}"`)),!r&&l!=="Epic"&&console.log(`[Convert] Work item ${t.id} "${t.fields["System.Title"]}" has no Epic assigned`);const u=t.fields["System.Description"]||"",d=dZ(u),m=u.replace(/<[^>]*>/g,"").trim(),f=t.fields["System.Title"]||"Untitled";return r&&f===r&&console.warn(`Work item ${t.id}: Title "${f}" matches Epic name "${r}" - this may indicate a data issue`),{id:`ado-${t.id}`,title:f,description:m,votes:0,voters:[],epic:r||void 0,epicId:n||void 0,state:t.fields["System.State"]||void 0,areaPath:t.fields["System.AreaPath"]||void 0,tags:t.fields["System.Tags"]?t.fields["System.Tags"].split(";").map(p=>p.trim()).filter(p=>p):[],azureDevOpsId:t.id.toString(),azureDevOpsUrl:t.url,workItemType:l||void 0,azureImageUrls:d.length>0?d:void 0}})}function SC(){return"Product".split(",").map(t=>t.trim()).filter(t=>t.length>0)}const Os=e=>{const r=e.split("T")[0].split(" ")[0].split("-");if(r.length!==3)return new Date(e).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"});const n=parseInt(r[0],10),s=parseInt(r[1],10)-1,a=parseInt(r[2],10);return new Date(n,s,a).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})},ji=e=>new Date(e)<new Date,K4="/feature-voting-app/assets/colorpicker-CmB9zXJh.png",_C=[{bg:"#2D4660",text:"#FFFFFF",border:"#1D3144"},{bg:"#1E5461",text:"#FFFFFF",border:"#133742"},{bg:"#C89212",text:"#FFFFFF",border:"#A67810"},{bg:"#173B65",text:"#FFFFFF",border:"#0F2844"},{bg:"#2E5A8F",text:"#FFFFFF",border:"#1F4468"},{bg:"#4A6A8F",text:"#FFFFFF",border:"#3D5A7D"},{bg:"#5479A1",text:"#FFFFFF",border:"#4A6A8F"},{bg:"#6B8FBF",text:"#FFFFFF",border:"#5479A1"},{bg:"#3D7BAD",text:"#FFFFFF",border:"#2E5A8F"},{bg:"#258799",text:"#FFFFFF",border:"#145668"},{bg:"#36849B",text:"#FFFFFF",border:"#2A7489"},{bg:"#4098B3",text:"#FFFFFF",border:"#36849B"},{bg:"#2B9BAD",text:"#FFFFFF",border:"#1E7A89"},{bg:"#1FA3B5",text:"#FFFFFF",border:"#178290"},{bg:"#2D7A4E",text:"#FFFFFF",border:"#1E5A38"},{bg:"#3A9B5C",text:"#FFFFFF",border:"#2D7A4E"},{bg:"#52B876",text:"#FFFFFF",border:"#3A9B5C"},{bg:"#6FD492",text:"#FFFFFF",border:"#52B876"},{bg:"#4CAF7A",text:"#FFFFFF",border:"#3A9B5C"},{bg:"#7CB342",text:"#FFFFFF",border:"#689F38"},{bg:"#9CCC65",text:"#111827",border:"#7CB342"},{bg:"#E0A925",text:"#111827",border:"#C89212"},{bg:"#F4B729",text:"#111827",border:"#E0A925"},{bg:"#FFC940",text:"#111827",border:"#F4B729"},{bg:"#D4A017",text:"#FFFFFF",border:"#B8890F"},{bg:"#D87A35",text:"#FFFFFF",border:"#C4681F"},{bg:"#E88F3A",text:"#FFFFFF",border:"#D87A35"},{bg:"#FF9F4A",text:"#FFFFFF",border:"#E88F3A"},{bg:"#FF8C42",text:"#FFFFFF",border:"#E88F3A"},{bg:"#B83A2F",text:"#FFFFFF",border:"#9F2A21"},{bg:"#D44638",text:"#FFFFFF",border:"#B83A2F"},{bg:"#E85240",text:"#FFFFFF",border:"#D44638"},{bg:"#591D0F",text:"#FFFFFF",border:"#3C130A"},{bg:"#8A3420",text:"#FFFFFF",border:"#6F2818"},{bg:"#6B4C9A",text:"#FFFFFF",border:"#573A7F"},{bg:"#8E6BB5",text:"#FFFFFF",border:"#7556A1"},{bg:"#9B7AC7",text:"#FFFFFF",border:"#8E6BB5"},{bg:"#5D3F7A",text:"#FFFFFF",border:"#4A2F61"},{bg:"#492434",text:"#FFFFFF",border:"#311823"},{bg:"#5D2F43",text:"#FFFFFF",border:"#492434"},{bg:"#8B3A62",text:"#FFFFFF",border:"#6F2A4D"},{bg:"#A14A76",text:"#FFFFFF",border:"#8B3A62"},{bg:"#6A4234",text:"#FFFFFF",border:"#4B2D23"},{bg:"#8B5A3C",text:"#FFFFFF",border:"#6A4234"},{bg:"#A0694B",text:"#FFFFFF",border:"#8B5A3C"},{bg:"#7D5A3A",text:"#FFFFFF",border:"#6A4234"},{bg:"#3A3638",text:"#FFFFFF",border:"#2A2628"},{bg:"#4A4548",text:"#FFFFFF",border:"#3A3638"},{bg:"#5C5A5D",text:"#FFFFFF",border:"#4A4548"},{bg:"#7A8590",text:"#FFFFFF",border:"#5F6A74"},{bg:"#8F959B",text:"#111827",border:"#72777C"}],hZ=e=>e?e.trim().toLowerCase():"",mZ=e=>{let t=0;for(let r=0;r<e.length;r+=1)t=t*31+e.charCodeAt(r)>>>0;return t},Ih=(e,t,r)=>Math.min(Math.max(e,t),r),pZ=e=>{if(!e)return null;let t=e.trim();return!t||(t.startsWith("#")||(t=`#${t}`),t.length===4&&(t=`#${t[1]}${t[1]}${t[2]}${t[2]}${t[3]}${t[3]}`),t.length!==7)?null:t.toUpperCase()},xb=e=>{const t=e.replace("#",""),r=parseInt(t,16);return{r:r>>16&255,g:r>>8&255,b:r&255}},gZ=({r:e,g:t,b:r})=>{const n=[e,t,r].map(s=>{const a=s/255;return a<=.03928?a/12.92:Math.pow((a+.055)/1.055,2.4)});return .2126*n[0]+.7152*n[1]+.0722*n[2]},yZ=e=>gZ(xb(e))>.6?"#111827":"#FFFFFF",NC=(e,t)=>{const{r,g:n,b:s}=xb(e),a=1+t/100,l=Ih(Math.round(r*a),0,255),u=Ih(Math.round(n*a),0,255),d=Ih(Math.round(s*a),0,255);return`#${l.toString(16).padStart(2,"0")}${u.toString(16).padStart(2,"0")}${d.toString(16).padStart(2,"0")}`.toUpperCase()},vZ=(e,t)=>{const{r,g:n,b:s}=xb(e);return`rgba(${r}, ${n}, ${s}, ${Ih(t,0,1)})`},cr=(e,t)=>{const r=pZ(t);if(r){const l=yZ(r);return{background:r,text:l,border:NC(r,-20),badgeBackground:vZ(r,.15),badgeText:l,hoverBackground:NC(r,-5),hoverText:l}}const n=hZ(e),s=n?mZ(n)%_C.length:0,a=_C[s];return{background:a.bg,text:a.text,border:a.border,badgeBackground:`${a.bg}1A`,badgeText:a.text,hoverBackground:a.bg,hoverText:a.text}};function xZ({label:e="Product",products:t,value:r,onChange:n,fallbackName:s=null,isLoading:a=!1,error:l=null,disabled:u=!1,placeholder:d="Select a product",helperText:m,className:f="",allowAdd:p=!1,newProductName:v="",onNewProductNameChange:x,newProductColor:w,onNewProductColorChange:k,onCreateProduct:b,isCreatingProduct:_=!1,addHelperText:N,addButtonLabel:C="Add Product",addInputPlaceholder:T="e.g., Catalyst Cloud",allowDelete:P=!1,onRequestDeleteProduct:A}){const[M,R]=y.useState(!1),K=y.useRef(null),B=y.useRef(null),[ie,G]=y.useState(!1),[ne,W]=y.useState(!1),q=y.useMemo(()=>t.find(ke=>ke.id===r)??null,[t,r]),ve=(q==null?void 0:q.name)??s??"",$=ve?cr(ve,(q==null?void 0:q.color_hex)??null):null,H=u||a||t.length===0;y.useEffect(()=>{if(!M)return;function ke(He){K.current&&!K.current.contains(He.target)&&R(!1)}function De(He){He.key==="Escape"&&R(!1)}return document.addEventListener("mousedown",ke),document.addEventListener("keydown",De),()=>{document.removeEventListener("mousedown",ke),document.removeEventListener("keydown",De)}},[M]);const ce=ke=>{n(ke),R(!1)},le=!!(p&&x&&b),U=le&&ie,te=!!k,he=w??"#2D4660",$e=!!(e&&e.trim().length>0),Pe=$e||le;return i.jsxs("div",{className:`space-y-3 ${f}`,children:[i.jsx("style",{children:`
        .product-picker__menu {
          box-shadow: 0px 12px 28px rgba(45, 70, 96, 0.18);
          width: 100%;
          background-color: #ffffff;
          overflow: hidden;
        }

        .product-picker__item {
          display: flex;
          width: 100%;
          align-items: center;
          justify-content: flex-start;
          gap: 0.75rem;
          padding: 0.65rem 0.75rem;
          font-size: 0.875rem;
          background: #ffffff;
          border: none;
          border-top: 1px solid rgba(203, 213, 225, 0.4);
          cursor: pointer;
          color: var(--product-color, #2D4660);
          transition: color 0.3s ease;
          text-align: left;
        }

        .product-picker__item:first-child {
          border-top: none;
        }

        .product-picker__item:hover,
        .product-picker__item:focus-visible {
          background-color: var(--product-light-bg, rgba(45, 70, 96, 0.1));
          outline: none;
        }

        .product-color-badge {
          width: 1.5rem;
          height: 1.5rem;
          border-radius: 0.35rem;
          flex-shrink: 0;
          background-color: var(--product-color, #2D4660);
          border: 1px solid var(--product-border-color, rgba(0,0,0,0.12));
          box-shadow: inset 0 0 0 1px rgba(255,255,255,0.35);
        }
      `}),i.jsxs("div",{className:"relative",ref:K,style:Pe?void 0:{marginTop:"-12px"},children:[Pe&&i.jsxs("div",{className:"flex items-center justify-between mb-1 gap-3",children:[$e&&i.jsx("label",{className:"block text-sm font-medium text-gray-700",children:e}),le&&i.jsx("div",{className:"flex-1 flex items-center justify-end gap-2",children:U?i.jsxs("div",{className:"flex items-center gap-2 transition-all duration-300",children:[i.jsx("input",{type:"text",value:v,onChange:ke=>{W(!1),x==null||x(ke.target.value)},placeholder:"Product name",className:"flex-1 h-10 px-3 border rounded-md text-sm focus:outline-none focus:ring-0",style:{borderColor:w&&v.trim().length>0?w:"#D1D5DB"}}),te&&v.trim().length>0&&i.jsxs(i.Fragment,{children:[i.jsx("button",{type:"button",onClick:()=>{var ke;return(ke=B.current)==null?void 0:ke.click()},className:`relative h-10 w-10 rounded-md border shadow-sm flex items-center justify-center focus:outline-none focus:ring-2 focus:ring-offset-1 focus:ring-[#2d4660] ${w?"":"border-gray-300 bg-white"}`,style:w?{backgroundColor:w,borderColor:w}:void 0,"aria-label":"Choose product color",children:!w&&i.jsx("img",{src:"https://icon-library.com/images/color-wheel-icon-png/color-wheel-icon-png-25.jpg",alt:"",className:"h-7 w-7 object-contain pointer-events-none"})}),i.jsx("input",{ref:B,type:"color",value:he,onChange:ke=>{W(!1),k==null||k(ke.target.value)},className:"sr-only"}),v.trim().length>0&&i.jsx("button",{type:"button",onClick:()=>W(!0),className:`h-10 px-3 rounded-md text-sm font-medium border transition-colors ${ne?"bg-green-50 border-green-500 text-green-700":"bg-white border-gray-300 text-gray-700 hover:bg-gray-50"}`,children:"Looks Great"})]}),v.trim().length>0&&w&&ne&&i.jsx("button",{type:"button",onClick:b,className:"h-10 px-4 bg-[#C89212] text-white rounded-md text-sm font-semibold hover:bg-[#A67810] transition-colors",children:_?"Creating":"Create New Product"})]}):i.jsx("button",{type:"button",onClick:()=>G(!0),className:"text-sm font-medium text-blue-600 hover:text-blue-700 whitespace-nowrap",children:"+ Create New Product"})})]}),i.jsxs("button",{type:"button",onClick:()=>!H&&R(ke=>!ke),className:`relative flex w-full items-center justify-between rounded-md border px-3 py-2 text-left text-sm ${H?"cursor-not-allowed bg-gray-100 text-gray-400 border-gray-200":"bg-white text-gray-900 border-gray-300 hover:border-[#2D4660]"}`,style:!H&&$?{borderColor:$.border}:void 0,"aria-expanded":M,"aria-haspopup":"listbox",children:[i.jsxs("div",{className:"flex items-center gap-2 truncate",children:[$&&i.jsx("span",{className:"inline-flex h-3.5 w-3.5 rounded-sm border border-white/60 shadow-inner",style:{backgroundColor:$.background,borderColor:$.border},"aria-hidden":"true"}),i.jsx("span",{className:`truncate ${ve?"":"text-gray-400"}`,style:$?{color:$.background}:void 0,children:ve||(t.length===0?"No products available":d)})]}),i.jsx(Da,{className:`ml-2 h-4 w-4 transition-transform ${M?"rotate-180":""} ${H?"text-gray-300":"text-gray-500"}`})]}),M&&!H&&i.jsx("div",{className:"product-picker__menu absolute left-0 z-50 mt-2 w-full overflow-hidden rounded-md border border-gray-200 bg-white",style:{marginTop:"-10px"},role:"listbox",children:i.jsx("div",{className:"max-h-60 overflow-y-auto py-1",children:t.map(ke=>{const De=cr(ke.name,ke.color_hex??null),He=r===ke.id;return i.jsxs("div",{className:"product-picker__item",style:{"--product-color":De.background,"--product-light-bg":De.badgeBackground,"--product-border-color":De.border},children:[i.jsxs("button",{type:"button",className:"flex flex-1 items-center gap-3 text-left",onClick:()=>ce(ke.id),"aria-selected":He,children:[i.jsx("span",{className:"product-color-badge","aria-hidden":"true"}),i.jsx("span",{className:"flex-1 truncate font-medium",children:ke.name}),He&&i.jsx(un,{className:"h-4 w-4 text-gray-400"})]}),P&&A&&i.jsx("button",{type:"button",onClick:Y=>{Y.stopPropagation(),R(!1),A(ke)},className:"ml-2 text-gray-400 hover:text-[#B83A2F]","aria-label":`Delete ${ke.name}`,title:"Delete product",children:i.jsx(Qo,{className:"h-4 w-4"})})]},ke.id)})})}),a&&i.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"Loading products"}),l&&i.jsx("p",{className:"mt-1 text-xs text-[#591D0F]",children:l}),!a&&!l&&m&&i.jsx("p",{className:"mt-1 text-xs text-gray-500",children:m})]}),le&&N&&U&&i.jsx("p",{className:"text-xs text-gray-500",children:N})]})}const CC=["OpsVision Portal","MillTrack Insight","Quality Compass","Supply Sync","Roadmap Nexus","Fabricator Hub","Blueprint Studio","Velocity Forge","Navigator Suite","Catalyst Cloud"],EC=e=>{if(!e)return null;const t=e.trim();return t.length===0?null:t},wZ=e=>{let t=0;for(let r=0;r<e.length;r+=1)t=t*31+e.charCodeAt(r)>>>0;return CC[t%CC.length]};function Ir(e,t){const r=e.product_id??e.productId??null;if(r&&t){const a=EC(t[r]);if(a)return a}const n=EC(e.product_name??e.productName);if(n)return n;const s=r||e.id||e.title||"default-product";return wZ(s)}const bZ=["Stakeholders need more time","New backlog items require votes","Clarify previous results","Technical issue resolved","Other"],PC="https://cdn.iconscout.com/icon/free/png-512/azure-devops-3628645-3029870.png";function jZ({options:e,value:t,onChange:r,placeholder:n="Select...",label:s,disabled:a=!1,variant:l="default"}){const[u,d]=y.useState(!1),m=y.useRef(null);y.useEffect(()=>{function b(_){m.current&&!m.current.contains(_.target)&&d(!1)}return document.addEventListener("mousedown",b),()=>document.removeEventListener("mousedown",b)},[]);const f=b=>{r(b),d(!1)},p=t||n,v=l==="green"?"border-green-600":"border-gray-300",x=l==="green"?"text-green-600":"text-gray-400",w=l==="green"?"bg-green-50":"bg-blue-50",k=l==="green"?"text-green-600":"text-[#1E5461]";return i.jsxs("div",{ref:m,className:"relative",children:[s&&i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:s}),i.jsxs("div",{onClick:()=>!a&&d(!u),className:`w-full px-3 py-2 border ${v} rounded-md min-h-[38px] flex items-center justify-between ${a?"bg-gray-100 cursor-not-allowed":"bg-white cursor-pointer"}`,children:[i.jsx("span",{className:`text-sm ${t?"text-gray-900":"text-gray-400"}`,children:p}),i.jsx(Da,{className:`h-4 w-4 ${x} transition-transform ${u?"transform rotate-180":""}`})]}),u&&!a&&i.jsx("div",{className:"absolute z-50 w-full mt-1 bg-white border border-gray-300 rounded-md shadow-lg max-h-60 overflow-y-auto",children:e.map(b=>i.jsxs("div",{onClick:()=>f(b),className:`px-3 py-2 cursor-pointer hover:bg-gray-50 flex items-center justify-between ${t===b?w:""}`,children:[i.jsx("span",{className:"text-sm text-gray-900",children:b}),t===b&&i.jsx(un,{className:`h-4 w-4 ${k}`})]},b))})]})}function G4(e){if(!e)return null;const t=e.toLowerCase();return t==="epic"?{icon:fn,color:"rgb(51, 153, 71)"}:t==="feature"?{icon:Jm,color:"#773b93"}:t==="user story"||t==="story"?{icon:YE,color:"#007acc"}:t==="bug"?{icon:JE,color:"#cc293d"}:t==="task"?{icon:Fl,color:"#007acc"}:t==="change request"?{icon:GE,color:"#ff8c00"}:t==="test case"||t==="test"?{icon:QE,color:"#007acc"}:t==="issue"?{icon:nn,color:"#cc293d"}:null}function md({options:e,value:t,onChange:r,placeholder:n="Select...",label:s,searchable:a=!1,disabled:l=!1}){const[u,d]=y.useState(!1),[m,f]=y.useState(""),p=y.useRef(null),v=y.useRef(null);y.useEffect(()=>{function _(N){p.current&&!p.current.contains(N.target)&&(d(!1),f(""))}return document.addEventListener("mousedown",_),()=>document.removeEventListener("mousedown",_)},[]),y.useEffect(()=>{u&&a&&v.current&&v.current.focus()},[u,a]);const x=_=>{t.includes(_)?r(t.filter(N=>N!==_)):r([...t,_])},w=(_,N)=>{N.stopPropagation(),r(t.filter(C=>C!==_))},k=_=>{_.stopPropagation(),r([])},b=a&&m?e.filter(_=>_.toLowerCase().includes(m.toLowerCase())):e;return i.jsxs("div",{ref:p,className:"relative",children:[s&&i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:s}),i.jsxs("div",{onClick:()=>!l&&d(!u),className:`w-full px-3 py-2 border border-gray-300 rounded-md min-h-[38px] flex items-center justify-between ${l?"bg-gray-100 cursor-not-allowed":"bg-white cursor-pointer"}`,children:[i.jsx("div",{className:"flex-1 flex flex-wrap gap-1",children:t.length===0?i.jsx("span",{className:"text-sm text-gray-400",children:n}):t.map(_=>i.jsxs("span",{className:"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-[#2D4660]/10 text-[#2D4660]",children:[_,!l&&i.jsx("button",{type:"button",onClick:N=>w(_,N),className:"ml-1 hover:text-[#173B65]",children:i.jsx(ts,{className:"h-3 w-3"})})]},_))}),i.jsxs("div",{className:"flex items-center gap-1 ml-2",children:[t.length>0&&!l&&i.jsx("button",{type:"button",onClick:k,className:"text-gray-400 hover:text-gray-600",children:i.jsx(ts,{className:"h-4 w-4"})}),i.jsx(Da,{className:`h-4 w-4 text-gray-400 transition-transform ${u?"transform rotate-180":""}`})]})]}),u&&!l&&i.jsxs("div",{className:"absolute z-50 w-full mt-1 bg-white border border-gray-300 rounded-md shadow-lg max-h-60 overflow-hidden flex flex-col",children:[a&&i.jsx("div",{className:"p-2 border-b border-gray-200",children:i.jsx("input",{ref:v,type:"text",value:m,onChange:_=>f(_.target.value),onClick:_=>_.stopPropagation(),placeholder:"Type to search...",className:"w-full px-3 py-1.5 text-sm border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[#2D4660]"})}),i.jsx("div",{className:"overflow-y-auto",children:b.length>0?b.map(_=>i.jsxs("div",{onClick:()=>x(_),className:`px-3 py-2 cursor-pointer hover:bg-gray-50 flex items-center justify-between ${t.includes(_)?"bg-[#2D4660]/5":""}`,children:[i.jsx("span",{className:"text-sm",children:_}),t.includes(_)&&i.jsx(un,{className:"h-4 w-4 text-[#1E5461]"})]},_)):i.jsx("div",{className:"px-3 py-2 text-sm text-gray-500 text-center",children:"No matches found"})})]})]})}function kZ({isOpen:e,onClose:t,previewFeatures:r,onConfirmSync:n,onReplaceAll:s,isFetching:a=!1,config:l}){const[u,d]=y.useState(new Set);y.useEffect(()=>{if(e&&r&&r.length>0){const w=r.map(k=>k.id).filter(k=>k);console.log("PreviewFeaturesModal: Selecting all features by default",w.length,"features"),console.log("PreviewFeaturesModal: Feature IDs:",w),w.length>0&&d(new Set(w))}else e||d(new Set)},[e,r]);const m=w=>{d(k=>{const b=new Set(k);return b.has(w)?b.delete(w):b.add(w),b})},f=()=>{r&&(u.size===r.length?d(new Set):d(new Set(r.map(w=>w.id))))},p=async()=>{if(!r||r.length===0){console.warn("handleAddSelected: No preview features available");return}if(u.size===0){console.log("handleAddSelected: No features selected, selecting all by default");const k=r.map(b=>b.id).filter(b=>b);d(new Set(k)),setTimeout(()=>{p()},100);return}console.log("handleAddSelected: Preview features count:",r.length),console.log("handleAddSelected: Selected features count:",u.size),console.log("handleAddSelected: Selected feature IDs:",Array.from(u)),console.log("handleAddSelected: Preview feature IDs:",r.map(k=>k.id));const w=r.filter(k=>{const b=k.id&&u.has(k.id);return b||console.warn("handleAddSelected: Feature not selected:",k.id,k.title),b});if(w.length===0){if(console.warn("handleAddSelected: No features selected after filtering"),console.warn("handleAddSelected: Preview features:",r),console.warn("handleAddSelected: Selected set:",u),r.map(b=>b.id).filter(b=>b).length>0){console.log("handleAddSelected: Fallback - selecting all features");const b=r.filter(_=>_.id);if(b.length>0)try{await n(b),console.log("handleAddSelected: Sync completed with all features, closing modal"),t()}catch(_){console.error("handleAddSelected: Error during sync",_)}}return}console.log("handleAddSelected: Adding",w.length,"features");try{await n(w),console.log("handleAddSelected: Sync completed, closing modal"),t()}catch(k){console.error("handleAddSelected: Error during sync",k)}},v=async()=>{!r||!s||(await s(),t())},x=u.size;return i.jsx(cn,{isOpen:e,onClose:t,title:"Preview Azure DevOps Features",maxWidth:"max-w-6xl",children:i.jsx("div",{className:"space-y-4",children:r&&r.length>0?i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"bg-[#1E5461]/5 border border-[#1E5461]/20 rounded-lg p-4",children:i.jsx("p",{className:"text-[#1E5461] font-medium",children:"Select the work items you want to add to your voting session."})}),i.jsx("div",{className:"border border-gray-200 rounded-lg overflow-hidden",children:i.jsx("div",{className:"max-h-96 overflow-y-auto",children:i.jsxs("table",{className:"w-full",children:[i.jsx("thead",{className:"bg-gray-50 sticky top-0",children:i.jsxs("tr",{children:[i.jsx("th",{className:"px-4 py-3 text-left",children:i.jsx("button",{type:"button",onClick:w=>{w.stopPropagation(),f()},className:"flex items-center justify-center w-5 h-5",children:r.length>0&&u.size===r.length?i.jsx(Fl,{className:"w-5 h-5 text-green-600"}):i.jsx(Cd,{className:"w-5 h-5 text-gray-400"})})}),i.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-gray-700 uppercase",children:"Title"}),i.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-gray-700 uppercase",children:"Type"}),i.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-gray-700 uppercase",children:"State"}),i.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-gray-700 uppercase",children:"Epic"}),i.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-gray-700 uppercase",children:"Area Path"})]})}),i.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:r.map(w=>{const k=u.has(w.id);return console.log(`[PreviewModal] Rendering feature ${w.id} "${w.title}": epic="${w.epic}", epicId="${w.epicId}"`),i.jsxs("tr",{className:`hover:bg-gray-50 cursor-pointer ${k?"bg-blue-50":""}`,onClick:()=>m(w.id),children:[i.jsx("td",{className:"px-4 py-3",children:i.jsx("button",{type:"button",onClick:b=>{b.stopPropagation(),m(w.id)},className:"flex items-center justify-center w-5 h-5",children:k?i.jsx(Fl,{className:"w-5 h-5 text-green-600"}):i.jsx(Cd,{className:"w-5 h-5 text-gray-400"})})}),i.jsx("td",{className:"px-4 py-3",children:i.jsx("div",{className:"flex items-start gap-2",children:i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsx("div",{className:"text-sm font-medium text-gray-900",children:w.title}),w.description&&w.description.trim()&&i.jsxs("div",{className:"text-xs text-gray-500 mt-1 line-clamp-2",children:[w.description.replace(/<[^>]*>/g,"").substring(0,100),w.description.replace(/<[^>]*>/g,"").length>100?"...":""]}),w.attachmentUrls&&w.attachmentUrls.length>0&&i.jsxs("div",{className:"flex flex-wrap gap-1 mt-2",children:[w.attachmentUrls.slice(0,3).map((b,_)=>i.jsx("div",{className:"relative border border-gray-300 rounded overflow-hidden",style:{width:"32px",height:"32px"},title:"Image from work item",children:i.jsx("img",{src:b,alt:`Attachment ${_+1}`,className:"w-full h-full object-cover",onError:N=>{N.currentTarget.style.display="none"}})},_)),w.attachmentUrls.length>3&&i.jsx("div",{className:"flex items-center justify-center",style:{width:"32px",height:"32px"},children:i.jsxs("span",{className:"text-xs text-gray-500",children:["+",w.attachmentUrls.length-3]})})]}),w.tags&&w.tags.length>0&&i.jsxs("div",{className:"flex flex-wrap gap-1 mt-1",children:[w.tags.slice(0,3).map((b,_)=>i.jsx("span",{className:"px-1.5 py-0.5 text-xs bg-gray-100 text-gray-600 rounded",children:b},_)),w.tags.length>3&&i.jsxs("span",{className:"px-1.5 py-0.5 text-xs text-gray-500",children:["+",w.tags.length-3]})]})]})})}),i.jsx("td",{className:"px-4 py-3 align-middle",children:i.jsx("div",{className:"flex items-center gap-2",children:(()=>{const b=G4(w.workItemType);if(b&&w.azureDevOpsId){const _=b.icon,C=(A=>{const M=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(A);return M?{r:parseInt(M[1],16),g:parseInt(M[2],16),b:parseInt(M[3],16)}:null})(b.color),T=C?`rgba(${C.r}, ${C.g}, ${C.b}, 0.1)`:`${b.color}20`,P=C?`rgba(${C.r}, ${C.g}, ${C.b}, 0.2)`:`${b.color}40`;return i.jsxs("a",{href:w.azureDevOpsUrl||"",target:"_blank",rel:"noopener noreferrer",onClick:A=>A.stopPropagation(),className:"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium cursor-pointer border",style:{backgroundColor:T,color:b.color,borderColor:b.color},onMouseEnter:A=>{A.currentTarget.style.backgroundColor=P},onMouseLeave:A=>{A.currentTarget.style.backgroundColor=T},title:"View in Azure DevOps",children:[i.jsx(_,{className:"h-3 w-3 mr-1",style:{color:b.color}}),w.azureDevOpsId.replace(/^ado-/,"#")]})}else{if(w.workItemType&&w.azureDevOpsId)return i.jsxs("a",{href:w.azureDevOpsUrl||"",target:"_blank",rel:"noopener noreferrer",onClick:_=>_.stopPropagation(),className:"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-[#492434]/10 text-[#492434] hover:bg-[#492434]/20 cursor-pointer border border-[#492434]/30",title:"View in Azure DevOps",children:[i.jsx("span",{className:"mr-1 text-xs",children:w.workItemType}),w.azureDevOpsId.replace(/^ado-/,"#")]});if(b){const _=b.icon;return i.jsx(_,{className:"w-5 h-5",style:{color:b.color}})}else if(w.workItemType)return i.jsx("span",{className:"px-2 py-1 text-xs font-medium bg-[#492434]/10 text-[#492434] rounded",children:w.workItemType})}return null})()})}),i.jsx("td",{className:"px-4 py-3 align-middle",children:w.state&&i.jsx("span",{className:"px-2 py-1 text-xs font-medium bg-[#1E5461]/10 text-[#1E5461] rounded",children:w.state})}),i.jsx("td",{className:`px-4 py-3 align-middle ${w.epic||w.workItemType&&w.workItemType.toLowerCase()==="epic"?"w-64":"w-32"}`,children:w.workItemType&&w.workItemType.toLowerCase()==="epic"?i.jsx("span",{className:"text-xs text-gray-600 italic",children:"This Work Item is an Epic"}):w.epic?w.epicId?i.jsx("a",{href:`https://dev.azure.com/${l.organization}/${l.project}/_workitems/edit/${w.epicId}`,target:"_blank",rel:"noopener noreferrer",onClick:b=>b.stopPropagation(),className:"inline-block w-full",children:i.jsx(ql,{name:w.epic,epicId:w.epicId,description:w.description,className:"hover:opacity-80"})}):i.jsx(ql,{name:w.epic,description:w.description}):i.jsx("span",{className:"text-xs text-gray-400 italic",children:"no Epic assigned"})}),i.jsx("td",{className:"px-4 py-3 align-middle",children:w.areaPath?i.jsx("div",{className:"text-xs text-gray-700 max-w-xs truncate",title:w.areaPath,children:w.areaPath}):i.jsx("span",{className:"text-xs text-gray-400",children:""})})]},w.id)})})]})})}),i.jsxs("div",{className:"flex justify-between items-center pt-4 border-t",children:[i.jsxs("div",{className:"text-sm text-gray-600",children:[x," of ",r.length," selected"]}),i.jsxs("div",{className:"flex space-x-2",children:[i.jsx(_t,{variant:"primary",onClick:p,disabled:x===0||a,className:"flex items-center",children:a?i.jsxs(i.Fragment,{children:[i.jsx(Xo,{className:"h-4 w-4 mr-2 animate-spin"}),"Adding..."]}):i.jsxs(i.Fragment,{children:[i.jsx(Cn,{className:"h-4 w-4 mr-2"}),"Add ",x," Feature",x!==1?"s":""]})}),s&&i.jsxs(_t,{variant:"danger",onClick:v,className:"flex items-center",children:[i.jsx(Xo,{className:"h-4 w-4 mr-2"}),"Replace All Features"]})]})]})]}):i.jsxs("div",{className:"text-center py-8",children:[i.jsx(nn,{className:"h-12 w-12 text-gray-400 mx-auto mb-3"}),i.jsx("p",{className:"text-gray-600",children:"No features found to sync"})]})})})}function SZ({config:e,onUpdateConfig:t,onPreview:r,isFetching:n,availableStates:s,availableAreaPaths:a,availableTags:l,previewFeatures:u,showPreviewModal:d,onFetchStatesForType:m,onFetchAreaPathsForTypeAndState:f,onFetchTagsForTypeStateAndAreaPath:p,onFetchTypesAndStatesForAreaPath:v,onFetchTypesAndStatesForTags:x,onFetchTypesAndAreaPathsForStates:w,resetSignal:k}){const b=V4,[_,N]=y.useState(!1),[C,T]=y.useState(null),[P,A]=y.useState(!1),[M,R]=y.useState(!1),[K,B]=y.useState(!1),[ie,G]=y.useState(0),ne=y.useRef(null),W=y.useRef(!1),q=y.useRef(!1),ve=y.useRef(null),$=y.useRef(e),H=y.useRef(null),ce=y.useRef(!1),le=y.useRef(!1),U=y.useRef(!1),te=y.useRef(null),he=y.useRef(!1),$e=y.useRef(!1),Pe=y.useRef([]),ke=y.useRef([]),De=y.useRef([]),He=y.useRef(null),Y=y.useRef(null),ge=y.useRef([]),oe=y.useRef([]),se=y.useRef([]),Be={workItemTypes:[],states:[],areaPaths:[],tags:[],query:""},{register:Xe,handleSubmit:mt,watch:zt,control:Qe,setValue:nt,reset:Vt}=Ed({defaultValues:Be}),F=y.useCallback(()=>{$e.current=!0,Vt({...Be}),N(!1),ce.current=!1,le.current=!1,U.current=!1,he.current=!1,q.current=!1,ve.current=null,te.current!==null&&(clearTimeout(te.current),te.current=null),He.current!==null&&(clearTimeout(He.current),He.current=null),Y.current=null,ge.current=[],oe.current=[],se.current=[],setTimeout(()=>{$e.current=!1},500)},[Vt]);y.useEffect(()=>{F()},[k,F]);const L=zt("workItemTypes"),V=zt("states"),Se=zt("areaPaths"),we=zt("tags");y.useEffect(()=>{if(le.current||he.current||ce.current||U.current||$e.current){Pe.current=L||[],ke.current=V||[],De.current=Se||[];return}const We=L.length<Pe.current.length,Oe=V.length<ke.current.length,dt=Se.length<De.current.length;if(We||Oe||dt){Y.current=Date.now(),Pe.current=L||[],ke.current=V||[],De.current=Se||[],$e.current=!0,He.current!==null&&clearTimeout(He.current);const Qt=async()=>{We&&(ge.current=[]),Oe&&(oe.current=[]),dt&&(se.current=[]),L&&L.length>0?(m&&await m(L[0]),f&&await f(L[0],V||[]),p&&await p(L[0],V||[],Se||[])):V&&V.length>0&&w?await w(V):Se&&Se.length>0&&v&&await v(Se),setTimeout(()=>{He.current=null,setTimeout(()=>{$e.current=!1,setTimeout(()=>{Y.current=null},2e3)},1e3)},500)};He.current=window.setTimeout(()=>{Qt()},100)}else Pe.current=L||[],ke.current=V||[],De.current=Se||[]},[L,V,Se,we,m,f,p,w,v]);const Ae=zt("query"),Ke=y.useCallback((We,Oe,dt,Qt,Dt,ze)=>{const Ye=[];if(We&&We.length>0)if(We.length===1)Ye.push(`[System.WorkItemType] = '${We[0]}'`);else{const it=We.map(bt=>`'${bt}'`).join(", ");Ye.push(`[System.WorkItemType] IN (${it})`)}if(Oe&&Oe.length>0)if(Oe.length===1)Ye.push(`[System.State] = '${Oe[0]}'`);else{const it=Oe.map(bt=>`'${bt}'`).join(", ");Ye.push(`[System.State] IN (${it})`)}if(dt&&dt.length>0)if(dt.length===1)Ye.push(`[System.AreaPath] UNDER '${dt[0]}'`);else{const it=dt.map(bt=>`[System.AreaPath] UNDER '${bt}'`);Ye.push(`(${it.join(" OR ")})`)}if(Qt&&Qt.length>0){const it=Qt.map(bt=>`[System.Tags] CONTAINS '${bt}'`);Ye.push(`(${it.join(" OR ")})`)}return ze&&Dt&&Ye.push(`(${Dt})`),Ye.length>0?Ye.join(" AND "):void 0},[]);y.useEffect(()=>{if(!(ce.current||le.current||U.current||he.current||te.current!==null)&&m){if(!L||L.length===0){m(void 0);return}m(L[0])}},[L,m]),y.useEffect(()=>{if(ce.current||le.current||he.current||!f)return;(async()=>{R(!0);try{await f(L&&L.length>0?L[0]:void 0,V||[])}finally{R(!1)}})()},[L,V,f]),y.useEffect(()=>{if(le.current||ce.current||U.current||te.current!==null||he.current||!p||!L||L.length===0)return;const We=async()=>{B(!0);try{await p(L[0],V||[],Se||[])}finally{B(!1)}},Oe=setTimeout(()=>{We()},100);return()=>{clearTimeout(Oe),B(!1)}},[L,V,Se,p]),y.useEffect(()=>{var Dt,ze;if(!v||$e.current||He.current!==null||le.current||he.current||!Se||Se.length===0)return;if(Y.current!==null){if(Date.now()-Y.current<5e3)return;Y.current=null}const We=L&&L.length>0,Oe=V&&V.length>0;if(We&&Oe)return;const dt=((L==null?void 0:L.length)||0)<(((Dt=Pe.current)==null?void 0:Dt.length)||0),Qt=((V==null?void 0:V.length)||0)<(((ze=ke.current)==null?void 0:ze.length)||0);if(dt||Qt){Pe.current=L||[],ke.current=V||[],Y.current=Date.now();return}ce.current=!0,v(Se).then(({types:Ye,states:it})=>{Ye.length>0&&!We&&(nt("workItemTypes",Ye,{shouldDirty:!1}),Pe.current=Ye),it.length>0&&!Oe&&(nt("states",it,{shouldDirty:!1}),ke.current=it)}).finally(()=>{setTimeout(()=>{ce.current=!1},300)})},[Se,L,V,v,nt]),y.useEffect(()=>{var rr,or,ur;if(!x||$e.current||He.current!==null||ce.current||U.current)return;if(Y.current!==null){if(Date.now()-Y.current<5e3)return;Y.current=null}const We=((L==null?void 0:L.length)||0)<(((rr=Pe.current)==null?void 0:rr.length)||0),Oe=((V==null?void 0:V.length)||0)<(((or=ke.current)==null?void 0:or.length)||0),dt=((Se==null?void 0:Se.length)||0)<(((ur=De.current)==null?void 0:ur.length)||0),Qt=L||[],Dt=V||[],ze=Se||[],Ye=ge.current||[],it=oe.current||[],bt=se.current||[],jt=Ye.length>0&&Qt.length<Ye.length&&Qt.every(Nt=>Ye.includes(Nt)),Yt=it.length>0&&Dt.length<it.length&&Dt.every(Nt=>it.includes(Nt)),Jt=bt.length>0&&ze.length<bt.length&&ze.every(Nt=>bt.includes(Nt));if(We||Oe||dt||jt||Yt||Jt){Pe.current=L||[],ke.current=V||[],De.current=Se||[],Y.current=Date.now();return}if(!we||we.length===0){te.current!==null&&(clearTimeout(te.current),te.current=null),he.current=!1,ve.current=null,q.current=!1,Y.current=null,ge.current=[],oe.current=[],se.current=[];return}le.current=!0,he.current=!0,ve.current=Date.now(),te.current!==null&&clearTimeout(te.current),te.current=window.setTimeout(()=>{te.current=null,setTimeout(()=>{he.current=!1,ve.current=null,q.current=!0,G(Nt=>Nt+1)},500)},1500),x(we).then(({types:Nt,states:Kt,areaPaths:nr})=>{Nt.length>0,Kt.length>0,nr.length>0,Nt.length>0&&(nt("workItemTypes",Nt,{shouldDirty:!1}),Pe.current=Nt,ge.current=Nt),Kt.length>0&&(nt("states",Kt,{shouldDirty:!1}),ke.current=Kt,oe.current=Kt),nr.length>0&&(nt("areaPaths",nr,{shouldDirty:!1}),De.current=nr,se.current=nr),Nt.length>0&&(q.current=!0,setTimeout(()=>{const mr=$.current,Ur=H.current;!he.current&&!le.current&&te.current===null&&mr.enabled&&mr.accessToken&&Ur?(ne.current!==null&&(window.clearTimeout(ne.current),ne.current=null),Ur(),q.current=!1):G(jr=>jr+1)},2100))}).finally(()=>{setTimeout(()=>{le.current=!1},500)})},[we,x,nt]),y.useEffect(()=>{!w||ce.current||le.current||!V||V.length===0||L&&L.length>0||(U.current=!0,w(V).then(({types:Oe})=>{Oe.length>0&&nt("workItemTypes",Oe,{shouldDirty:!1})}).finally(()=>{setTimeout(()=>{U.current=!1},300)}))},[V,L,w,nt]),y.useEffect(()=>{if(V&&V.length>0&&s.length>0){const We=V.filter(Oe=>s.includes(Oe));We.length!==V.length&&nt("states",We)}},[s,V,nt]),y.useEffect(()=>{if(Se&&Se.length>0&&a.length>0){const We=Se.filter(Oe=>a.includes(Oe));We.length!==Se.length&&(nt("areaPaths",We),We.length===0&&nt("tags",[]))}},[a,Se,nt]),y.useEffect(()=>{if(we&&we.length>0&&l.length>0){const We=we.filter(Oe=>l.includes(Oe));We.length!==we.length&&nt("tags",We)}},[l,we,nt]);const wt=y.useCallback(async()=>{if(!e.enabled||!e.accessToken||!L||L.length===0){T(null);return}try{A(!0);const We=L[0],Oe=Ke(L||[],V||[],Se||[],we||[],Ae||"",_);let dt="";Oe?dt=`SELECT [System.Id] FROM WorkItems WHERE ${Oe}`:dt=`SELECT [System.Id] FROM WorkItems WHERE [System.WorkItemType] = '${We}' AND [System.State] = 'Active'`;const Qt=`https://dev.azure.com/${e.organization}/${e.project}/_apis/wit/wiql?api-version=7.0`,Dt=await fetch(Qt,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${e.accessToken}`},body:JSON.stringify({query:dt})});if(!Dt.ok)throw new Error(`Azure DevOps query failed: ${Dt.status} ${Dt.statusText}`);const ze=await Dt.json(),Ye=ze.workItems?ze.workItems.length:0;T(Ye)}catch(We){console.error("[FilterForm] Error fetching feature count:",We),T(null)}finally{A(!1)}},[e,L,V,Se,we,Ae,_,Ke]);y.useEffect(()=>{$.current=e,H.current=wt},[e,wt]),y.useEffect(()=>{if(ne.current!==null&&(window.clearTimeout(ne.current),ne.current=null),!L||L.length===0){T(null);return}if(q.current&&L&&L.length>0){const We=!he.current&&!le.current&&te.current===null,Oe=ve.current===null||Date.now()-ve.current>=2100;if(We||Oe){q.current=!1;const dt=$.current,Qt=H.current;dt.enabled&&dt.accessToken&&Qt&&Qt();return}return}if(he.current||le.current||te.current!==null){q.current=!0;return}return e.enabled&&e.accessToken?ne.current=window.setTimeout(()=>{wt()},300):T(null),()=>{ne.current!==null&&(window.clearTimeout(ne.current),ne.current=null)}},[L,V,Se,we,Ae,_,e.enabled,e.accessToken,wt,ie]),y.useEffect(()=>{if(d&&!W.current&&u){const We=u.length;T(We)}W.current=d||!1},[d,u]),y.useEffect(()=>{u&&u.length>0?T(u.length):u&&u.length===0&&T(0)},[u]),y.useEffect(()=>{const We=Ke(L||[],V||[],Se||[],we||[],Ae||"",_),Oe={...e,workItemType:L&&L.length>0?L[0]:e.workItemType||"Feature",query:We,states:V&&V.length>0?V:void 0,areaPath:Se&&Se.length>0?Se[0]:void 0,tags:we&&we.length>0?we:void 0},dt=window.setTimeout(()=>{t(Oe)},100);return()=>{window.clearTimeout(dt)}},[L,V,Se,we,Ae,_,Ke,t]);const vt=async We=>{await r()};return i.jsxs("form",{onSubmit:mt(vt),className:"bg-gray-50 p-4 rounded-lg border border-gray-200",children:[i.jsxs("div",{className:"flex items-center justify-between mb-4",children:[i.jsxs("h3",{className:"text-lg font-medium text-[#2D4660] flex items-center",children:[i.jsx(aF,{className:"h-5 w-5 mr-2"}),"Filter Work Items"]}),i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("button",{type:"button",onClick:F,className:"text-xs text-[#576C71] hover:text-[#2D4660] font-medium border border-transparent hover:border-[#576C71] rounded-full px-2 py-0.5 transition",children:"Clear All Filters"}),i.jsx("button",{type:"button",onClick:()=>N(!_),className:"text-xs text-[#1E5461] hover:text-[#2D4660] font-medium",children:_?" Hide Advanced WIQL":"Show Advanced WIQL "})]})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-4",children:[i.jsxs("div",{children:[i.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[i.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Work Item Type"}),i.jsx("span",{className:"px-2 py-0.5 rounded-full text-xs font-semibold text-white bg-[#2D4660]",children:b.length})]}),i.jsx(dd,{name:"workItemTypes",control:Qe,render:({field:We})=>i.jsx(md,{options:b,value:We.value,onChange:We.onChange,placeholder:"Select types..."})}),i.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"Click to select multiple types"})]}),i.jsxs("div",{children:[i.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[i.jsx("span",{className:"text-sm font-medium text-gray-700",children:"State (Optional)"}),i.jsx("span",{className:"px-2 py-0.5 rounded-full text-xs font-semibold text-white bg-[#1E5461]",children:(s==null?void 0:s.length)||0})]}),i.jsx(dd,{name:"states",control:Qe,render:({field:We})=>i.jsx(md,{options:s,value:We.value,onChange:We.onChange,placeholder:"Select states...",disabled:s.length===0})}),i.jsx("p",{className:"mt-1 text-xs text-gray-500",children:s.length===0?"Loading states...":"Filtered by work item type"})]}),i.jsxs("div",{children:[i.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[i.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Area Path (Optional)"}),i.jsx("span",{className:"px-2 py-0.5 rounded-full text-xs font-semibold text-white bg-[#576C71]",children:(a==null?void 0:a.length)||0})]}),i.jsx(dd,{name:"areaPaths",control:Qe,render:({field:We})=>i.jsx(md,{options:a,value:We.value,onChange:We.onChange,placeholder:"Select area paths...",searchable:!0,disabled:a.length===0})}),i.jsx("p",{className:"mt-1 text-xs text-gray-500",children:M?"Loading area paths...":a.length===0?"No area paths found for current filters":"Filtered by type & state"})]}),i.jsxs("div",{children:[i.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[i.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Tags (Optional)"}),i.jsx("span",{className:"px-2 py-0.5 rounded-full text-xs font-semibold text-white bg-[#C89212]",children:(l==null?void 0:l.length)||0})]}),i.jsx(dd,{name:"tags",control:Qe,render:({field:We})=>i.jsx(md,{options:l,value:We.value,onChange:We.onChange,placeholder:"Select tags...",searchable:!0,disabled:l.length===0&&!K})}),i.jsx("p",{className:"mt-1 text-xs text-gray-500",children:!L||L.length===0?"Select work item type to see tags":K?"Loading tags...":l.length===0?"No tags found for current filters":"Filtered by type, state & area"})]})]}),_&&i.jsxs("div",{className:"mb-4",children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Advanced WIQL Query (Optional)"}),i.jsx("input",{...Xe("query"),placeholder:"e.g., [System.Priority] = 1",className:"w-full px-3 py-2 border border-gray-300 rounded-md text-sm"}),i.jsxs("p",{className:"mt-1 text-xs text-gray-500",children:["Will be combined with above filters using AND."," ",i.jsx("a",{href:"https://learn.microsoft.com/en-us/azure/devops/boards/queries/wiql-syntax",target:"_blank",rel:"noopener noreferrer",className:"text-[#1E5461] hover:text-[#2D4660]",children:"WIQL syntax reference "})]})]}),i.jsx("div",{className:"flex justify-end",children:i.jsxs(_t,{variant:"gold",type:"submit",disabled:(()=>{const We=((L==null?void 0:L.length)??0)>0,Oe=((V==null?void 0:V.length)??0)>0,dt=((Se==null?void 0:Se.length)??0)>0,Qt=((we==null?void 0:we.length)??0)>0,Dt=Ae&&Ae.trim().length>0;return n||P||!(We||Oe||dt||Qt||Dt)})(),className:"flex items-center",children:[n&&i.jsx(Xo,{className:"animate-spin h-4 w-4 mr-2"}),n?"Loading...":(()=>{const We=C!==null?C:(u==null?void 0:u.length)??null;return We!==null?`Preview ${We} Feature${We!==1?"s":""}`:"Preview Features"})()]})})]})}function _Z({session:e,featureCount:t,onSubmit:r,onCancel:n,onRequestDeleteSession:s,isDeletingSession:a,productName:l,products:u,isLoadingProducts:d,productError:m,onRequestDeleteProduct:f,onProductColorUpdated:p}){const[v,x]=y.useState(null),[w,k]=y.useState(!1),[b,_]=y.useState("#2D4660"),[N,C]=y.useState(null),[T,P]=y.useState(!1);y.useRef(null);const A="2099-12-31",M=oe=>oe?oe.split("T")[0]===A:!1,R=oe=>{if(!oe||typeof oe!="string")return new Date;const Be=oe.split("T")[0].split(" ")[0].split("-");if(Be.length!==3)return new Date;const Xe=parseInt(Be[0],10),mt=parseInt(Be[1],10),zt=parseInt(Be[2],10);if(isNaN(Xe)||isNaN(mt)||isNaN(zt))return new Date;const Qe=new Date(Xe,mt-1,zt,0,0,0,0);return isNaN(Qe.getTime())?new Date:Qe},K=oe=>{if(!oe||isNaN(oe.getTime()))return new Date().toISOString().split("T")[0];const se=oe.getFullYear(),Be=String(oe.getMonth()+1).padStart(2,"0"),Xe=String(oe.getDate()).padStart(2,"0");return`${se}-${Be}-${Xe}`},B=(oe,se)=>{const Be=oe.getFullYear(),Xe=oe.getMonth(),mt=oe.getDate();return new Date(Be,Xe,mt+se,0,0,0,0)},ie=y.useMemo(()=>{const oe={};return u.forEach(se=>{se.id&&se.name&&(oe[se.id]=se.name)}),oe},[u]),{register:G,handleSubmit:ne,watch:W,reset:q,control:ve,setValue:$,formState:{errors:H}}=Ed({defaultValues:{productId:e.productId??e.product_id??"",title:e.title,goal:e.goal,startDate:M(e.startDate)?"":e.startDate.split("T")[0],endDate:M(e.endDate)?"":e.endDate.split("T")[0],useAutoVotes:e.useAutoVotes||!1,votesPerUser:e.votesPerUser}});y.useEffect(()=>{const oe=M(e.startDate)?"":e.startDate.split("T")[0],se=M(e.endDate)?"":e.endDate.split("T")[0];q({productId:e.productId??e.product_id??"",title:e.title,goal:e.goal,startDate:oe,endDate:se,useAutoVotes:e.useAutoVotes||!1,votesPerUser:e.votesPerUser}),Pe.current=oe},[e,q]);const ce=e.productName??e.product_name??l??"",le=e.productId??e.product_id??"";y.useEffect(()=>{if(!u.length)return;if(le){u.some(Be=>Be.id===le)&&$("productId",le,{shouldDirty:!1,shouldTouch:!1});return}if(!ce)return;const oe=u.find(se=>se.name.toLowerCase()===ce.toLowerCase());oe&&$("productId",oe.id,{shouldDirty:!1,shouldTouch:!1})},[u,le,ce,$]);const U=W("useAutoVotes"),te=W("productId"),he=W("startDate"),$e=W("endDate"),Pe=y.useRef(""),ke=y.useCallback(async oe=>{const se=he,Be=$e;if(oe==="startDate"&&!se){let Xe;if(te)try{const Qe=(await xk(te)).filter(nt=>nt.id!==e.id);if(Qe.length>0){let nt=null;Qe.forEach(Vt=>{const F=Vt.end_date||Vt.endDate;if(F&&!M(F)){const L=R(F);(!nt||L>nt)&&(nt=L)}}),nt?Xe=B(nt,1):Xe=new Date}else Xe=new Date}catch(zt){console.error("Error calculating dates for product:",zt),Xe=new Date}else Xe=new Date;const mt=B(Xe,14);$("startDate",K(Xe),{shouldDirty:!0}),Be||$("endDate",K(mt),{shouldDirty:!0})}else if(oe==="endDate"&&!Be){let Xe;if(se)Xe=R(se);else{if(te)try{const Qe=(await xk(te)).filter(nt=>nt.id!==e.id);if(Qe.length>0){let nt=null;Qe.forEach(Vt=>{const F=Vt.end_date||Vt.endDate;if(F&&!M(F)){const L=R(F);(!nt||L>nt)&&(nt=L)}}),nt?Xe=B(nt,1):Xe=new Date}else Xe=new Date}catch(zt){console.error("Error calculating dates for product:",zt),Xe=new Date}else Xe=new Date;$("startDate",K(Xe),{shouldDirty:!0})}const mt=B(Xe,14);$("endDate",K(mt),{shouldDirty:!0})}},[he,$e,te,$]);y.useEffect(()=>{if(he&&he!==Pe.current&&$e){Pe.current=he;const oe=R(he),se=B(oe,14);$("endDate",K(se),{shouldDirty:!0})}},[he,$e,$]);const De=y.useMemo(()=>!N||!te?u:u.map(oe=>oe.id===te?{...oe,color_hex:N}:oe),[u,N,te]);y.useEffect(()=>{if(!te)return;u.some(se=>se.id===te)||$("productId","",{shouldDirty:!0,shouldTouch:!0})},[te,u,$]),y.useEffect(()=>{if(te&&u.length>0){const oe=u.find(se=>se.id===te);if(oe){const se=oe.color_hex??null;x(se),_(se||"#2D4660"),C(null),k(!1)}}else te||(x(null),_("#2D4660"),C(null),k(!1))},[te,u]);const He=U?Math.max(1,Math.floor(t/2)):W("votesPerUser"),Y=async(oe,se=!1)=>{try{r({...oe,isDraft:se})}catch(Be){throw console.error("ERROR in handleFormSubmit:",Be),Be}},ge=async()=>{const oe=W();await Y(oe,!0)};return i.jsxs("form",{onSubmit:ne(oe=>Y(oe),oe=>{}),children:[i.jsxs("div",{className:"mb-4",children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Product"}),i.jsx("div",{className:"flex items-center gap-2",children:(()=>{const oe=De.find(Qe=>Qe.id===te)??null,se=te?ie[te]??null:null,Be=(oe==null?void 0:oe.name)??se??ce??"No Product",Xe=(oe==null?void 0:oe.color_hex)||null,mt=oe?cr(oe.name,Xe??null):null,zt=(mt==null?void 0:mt.background)||null;return i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"w-4 h-4 rounded-sm flex-shrink-0",style:{backgroundColor:zt||"#2D4660"}}),i.jsx("span",{className:"text-gray-900",children:Be})]})})()})]}),i.jsxs("div",{className:"mb-4",children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Session Title"}),i.jsx("input",{...G("title",{required:"Title is required"}),className:"w-full px-3 py-2 border border-gray-300 rounded-md"}),H.title&&i.jsx("p",{className:"mt-1 text-sm text-red-600",children:H.title.message})]}),i.jsxs("div",{className:"mb-4",children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Goal"}),i.jsx("textarea",{...G("goal",{required:"Goal is required"}),rows:2,className:"w-full px-3 py-2 border border-gray-300 rounded-md"}),H.goal&&i.jsx("p",{className:"mt-1 text-sm text-red-600",children:H.goal.message})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Start Date"}),i.jsx("input",{type:"date",...G("startDate",{required:!M(e.startDate)&&!M(e.endDate)?"Start date is required":!1}),value:W("startDate")||"",onFocus:oe=>{W("startDate")||ke("startDate")},autoComplete:"off",className:`w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-0 focus:border-[#2d4660] [&::-webkit-calendar-picker-indicator]:cursor-pointer ${H.startDate?"border-red-500":"border-gray-300"}`,style:W("startDate")?{}:{color:"transparent"},onBlur:oe=>{oe.target.value?oe.target.style.color="":oe.target.style.color="transparent"}}),H.startDate&&i.jsx("p",{className:"mt-1 text-sm text-red-600",children:H.startDate.message})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"End Date"}),i.jsx("input",{type:"date",...G("endDate",{required:!M(e.startDate)&&!M(e.endDate)?"End date is required":!1}),value:W("endDate")||"",onFocus:oe=>{W("endDate")||ke("endDate")},autoComplete:"off",className:`w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-0 focus:border-[#2d4660] [&::-webkit-calendar-picker-indicator]:cursor-pointer ${H.endDate?"border-red-500":"border-gray-300"}`,style:W("endDate")?{}:{color:"transparent",position:"relative"},onBlur:oe=>{oe.target.value?oe.target.style.color="":oe.target.style.color="transparent"}}),H.endDate&&i.jsx("p",{className:"mt-1 text-sm text-red-600",children:H.endDate.message})]})]}),i.jsxs("div",{className:"mb-4 bg-[#1E5461]/5 border border-[#1E5461]/20 rounded-lg p-4",children:[i.jsxs("div",{className:"flex items-start",children:[i.jsx("input",{type:"checkbox",...G("useAutoVotes"),className:"hidden"}),i.jsx("button",{type:"button",onClick:()=>$("useAutoVotes",!U,{shouldDirty:!0}),className:"flex-shrink-0 cursor-pointer mt-0.5 w-5 h-5 flex items-center justify-center",children:U?i.jsx(Fl,{className:"w-5 h-5 text-green-600"}):i.jsx(Cd,{className:"w-5 h-5 text-gray-400"})}),i.jsxs("div",{className:"ml-3",children:[i.jsx("label",{onClick:()=>$("useAutoVotes",!U,{shouldDirty:!0}),className:"text-sm font-medium text-gray-700 cursor-pointer",children:"Automatically calculate votes per user"}),i.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:["Each user gets half the number of features (minimum 1 vote). Currently: ",He," votes"]})]})]}),!U&&i.jsxs("div",{className:"mt-3",children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Votes Per User"}),i.jsx("input",{type:"number",min:"1",...G("votesPerUser",{required:U?!1:"Votes per user is required",min:{value:1,message:"Must be at least 1"}}),className:"w-full px-3 py-2 border border-gray-300 rounded-md"}),H.votesPerUser&&i.jsx("p",{className:"mt-1 text-sm text-red-600",children:H.votesPerUser.message})]})]}),i.jsxs("div",{className:"mt-6 flex flex-col gap-3 border-t border-gray-200 pt-4 sm:flex-row sm:items-center sm:justify-between",children:[i.jsxs(_t,{variant:"danger",type:"button",onClick:()=>s(),disabled:a,className:"flex items-center gap-2",children:[i.jsx(Qo,{className:"h-4 w-4"}),a?"Deleting...":"Delete Session"]}),i.jsxs("div",{className:"flex w-full justify-end gap-2 sm:w-auto",children:[i.jsx(_t,{variant:"secondary",type:"button",onClick:ge,children:"Save Draft"}),i.jsx(_t,{variant:"primary",type:"button",onClick:async oe=>{oe.preventDefault(),oe.stopPropagation(),W(),await ne(se=>Y(se,!1),se=>{alert("Please fix form errors: "+JSON.stringify(se))})()},children:"Save Changes"})]})]}),w&&te&&(()=>{const oe=De.find(se=>se.id===te);return oe?i.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",onClick:()=>{k(!1),x(oe.color_hex??null),_(oe.color_hex??"#2D4660"),C(null)},children:i.jsx("div",{className:"bg-white rounded-lg shadow-xl px-3 py-2 w-auto mx-4",onClick:se=>se.stopPropagation(),children:i.jsxs("div",{className:"flex gap-3 items-stretch",children:[i.jsxs("div",{className:"flex-shrink-0",style:{width:"240px",height:"260px"},children:[i.jsx("input",{id:"native-color-input",type:"color",value:b,onChange:se=>{_(se.target.value),x(se.target.value)},ref:se=>{se&&w&&setTimeout(()=>se.click(),50)},className:"opacity-0 absolute",style:{width:"1px",height:"1px"}}),i.jsx("div",{className:"w-full h-full"})]}),i.jsx("button",{type:"button",onClick:()=>{if(!te||!b)return;const se=De.find(Xe=>Xe.id===te);if(!se)return;if((se.color_hex||null)===b){k(!1);return}C(b),x(b),k(!1)},disabled:T,className:"px-6 rounded-lg text-white font-bold shadow-lg hover:shadow-xl transition-all flex flex-col items-center justify-center gap-3 text-lg flex-shrink-0 disabled:opacity-50 disabled:cursor-not-allowed",style:{backgroundColor:b,height:"260px",minWidth:"100px"},children:T?i.jsx(Xo,{className:"h-8 w-8 animate-spin"}):i.jsxs(i.Fragment,{children:[i.jsx(un,{className:"h-8 w-8"}),i.jsxs("div",{className:"text-center leading-tight",children:[i.jsx("div",{children:"Looks"}),i.jsx("div",{children:"Good"})]})]})})]})})}):null})()]})}function NZ({features:e,onAddFeature:t,onUpdateFeature:r,onDeleteFeature:n,onShowResults:s,onRequestDeleteSession:a,isDeletingSession:l,showAddForm:u,setShowAddForm:d,editingFeature:m,setEditingFeature:f,onLogout:p,onShowVoterView:v,votingSession:x,azureDevOpsConfig:w,onUpdateAzureDevOpsConfig:k,onPreviewAzureDevOpsFeatures:b,onDisconnectAzureDevOps:_,isFetchingAzureDevOps:N,azureFetchError:C,onInitiateOAuth:T,availableStates:P,availableAreaPaths:A,availableTags:M,previewFeatures:R,showPreviewModal:K,setShowPreviewModal:B,onConfirmSync:ie,onReplaceAll:G,onUpdateVotingSession:ne,onFetchStatesForType:W,onFetchAreaPathsForTypeAndState:q,onFetchTagsForTypeStateAndAreaPath:ve,onFetchTypesAndStatesForAreaPath:$,onFetchTypesAndStatesForTags:H,onFetchTypesAndAreaPathsForStates:ce,suggestedFeatures:le,otherSessions:U,onPromoteSuggestion:te,onMoveSuggestion:he,onEditSuggestion:$e,onDeleteSuggestion:Pe,adminPerspective:ke="session",projectOptions:De}){const He=oi(),{currentUser:Y,currentSession:ge,setCurrentSession:oe}=Gl(),[se,Be]=y.useState(()=>w.project?[w.project]:De[0]?[De[0]]:[]),[Xe,mt]=y.useState(0);y.useEffect(()=>{w.project?Be([w.project]):De.length>0?Be([De[0]]):Be([])},[w.project,De]);const[zt,Qe]=y.useState(!1),[nt,Vt]=y.useState(!1),[F,L]=y.useState(!1),[V,Se]=y.useState(!1),we=y.useRef(null),[Ae,Ke]=y.useState(!1),[wt,vt]=y.useState(!1),[We,Oe]=y.useState(!1),dt=ke==="system"&&wt,Qt=ke==="session"||ke==="system"&&!wt&&We,[Dt,ze]=y.useState(0),[Ye,it]=y.useState(0),bt=y.useRef(null),[jt,Yt]=y.useState(null),[Jt,rr]=y.useState(null),[or,ur]=y.useState(!1),[Nt,Kt]=y.useState(null),[nr,mr]=y.useState([]),[Ur,Sr]=y.useState([]),[jr,sn]=y.useState(!1),[Vn,wn]=y.useState(null),fr=y.useRef(null),[pr,Pr]=y.useState(null),[bn,as]=y.useState(null),[Rr,is]=y.useState(!1),[an,bs]=y.useState(null),[os,js]=y.useState(null),[qn,vr]=y.useState(""),[Ts,Hn]=y.useState(null),[ks,Kn]=y.useState(!1),[tr,Tn]=y.useState(null),[Ar,ls]=y.useState({title:"",summary:"",whatWouldItDo:"",howWouldItWork:""}),[hn,cs]=y.useState([]),[Ws,Br]=y.useState(null),[_r,X]=y.useState(!1),[ye,Fe]=y.useState(null),[Ce,rt]=y.useState(!1),[Le,I]=y.useState(null),[ae,Q]=y.useState(!1),[Z,Ie]=y.useState([]),[Tt,dr]=y.useState(!1),[Ve,$t]=y.useState([]),[Pt,sr]=y.useState(!1),[ct,hr]=y.useState(null),[ar,Zt]=y.useState(null),[Gt,jn]=y.useState(null),[kr,on]=y.useState(""),[Nr,Or]=y.useState(null),[Gn,Ss]=y.useState(!1),[Dr,In]=y.useState(!1),[Jr,kn]=y.useState("#2D4660"),[us,Vs]=y.useState(!1),[vo,ol]=y.useState(!1),ci=y.useMemo(()=>{const O={};return Ve.forEach(fe=>{fe.id&&fe.name&&(O[fe.id]=fe.name)}),O},[Ve]),xo=y.useMemo(()=>{const O={};return Ve.forEach(fe=>{fe.id&&fe.color_hex&&(O[fe.id]=fe.color_hex)}),O},[Ve]),ui=y.useMemo(()=>Ir({...x,product_id:x.product_id??(ge==null?void 0:ge.product_id)??x.productId??null,product_name:null},ci),[x,ge,ci]),di=y.useMemo(()=>{const O=x.product_id??x.productId??null;return O?xo[O]??null:null},[x,xo]),wa=y.useMemo(()=>cr(ui,di),[ui,di]),Is=y.useRef(null);y.useEffect(()=>{(async()=>{if(!Y)return;const fe=await ro(Y.id);vt(fe);const{data:_e}=await Ee.from("product_owners").select("session_id").eq("user_id",Y.id).limit(1);Oe(_e&&_e.length>0)})()},[Y]);const ba=y.useCallback(async()=>{const O=(ge==null?void 0:ge.id)||(x==null?void 0:x.id);if(!O){ze(0),it(0);return}try{const[fe,_e]=await Promise.all([Wm(O).catch(Ze=>(console.error("[AdminDashboard] Error loading admins:",Ze),[])),p0(O).catch(Ze=>(console.error("[AdminDashboard] Error loading stakeholders:",Ze),[]))]);ze(fe.length),it(_e.length)}catch(fe){console.error("[AdminDashboard] Error loading admin/stakeholder counts:",fe),ze(0),it(0)}},[ge==null?void 0:ge.id,x]);y.useEffect(()=>{ba()},[ba]),y.useEffect(()=>{const O=()=>{ba()};return window.addEventListener("focus",O),()=>window.removeEventListener("focus",O)},[ba]),y.useEffect(()=>{const O=(Y==null?void 0:Y.tenant_id)??(Y==null?void 0:Y.tenantId)??null;if(!O){Is.current=null,$t([]),hr(null);return}if(Is.current===O)return;let fe=!1;return(async()=>{sr(!0),hr(null);try{const Ze=await Ho(O);if(fe)return;$t(Ze),Is.current=O}catch(Ze){if(fe)return;console.error("Error loading products for admin dashboard:",Ze),qc!=null&&qc(Ze)?hr("Products are not configured yet. Please create the `products` table in Supabase."):hr("Unable to load products. Please try again."),$t([]),Is.current=null}finally{fe||sr(!1)}})(),()=>{fe=!0}},[Y==null?void 0:Y.tenant_id,Y==null?void 0:Y.tenantId]);const Su=y.useCallback(async()=>{if(ar){Vs(!0);try{await bE(ar.id),$t(O=>O.filter(fe=>fe.id!==ar.id)),Zt(null)}catch(O){console.error("Error deleting product from admin dashboard:",O),hr("Failed to delete product. Please try again.")}finally{Vs(!1)}}},[ar]),_u=y.useCallback(O=>{const fe=O.filter(_e=>_e==null?void 0:_e.trim()).map(_e=>_e.trim());if(Be(fe),fe.length>0&&fe[0]!==(w.project||"")){const _e={...w,project:fe[0]};k(_e)}mt(_e=>_e+1)},[w,k]),{register:wo,handleSubmit:bo,reset:fi}=Ed({defaultValues:{reason:"",details:""}}),{control:$i,handleSubmit:_s,reset:hi,register:Ds,formState:{errors:jo}}=Ed({defaultValues:{reason:"",details:""}}),Ri="2099-12-31",$s=O=>O?O.split("T")[0]===Ri:!1,ko=O=>{if(!O.is_active){const fe=!O.title||O.title==="Untitled Session"||O.title.trim()==="",_e=!O.goal||O.goal.trim()==="";return fe||_e}return!1},fs=(O=>{if(ko(O))return{text:"Draft",color:"text-yellow-900 bg-yellow-200",icon:Vh};const fe=new Date,_e=O.startDate||O.start_date,Ze=O.endDate||O.end_date,gt=new Date(_e),ir=new Date(Ze);return fe<gt?{text:"Upcoming",color:"text-yellow-600 bg-yellow-50",icon:Lx}:fe>ir?{text:"Closed",color:"text-gray-600 bg-gray-100",icon:nn}:{text:"Active",color:"text-[#1E6154] bg-[#1E6154]/10",icon:un}})(x),ja=fs.icon,ka=i.jsxs("span",{className:`inline-flex items-center ${fs.text==="Active"?"px-3 py-1 text-sm":"px-2 py-0.5 text-xs"} rounded-full font-medium ${fs.color}`,children:[i.jsx(ja,{className:`${fs.text==="Active"?"h-4 w-4":"h-3 w-3"} mr-1`}),fs.text]}),D=y.useMemo(()=>{const O=_e=>{const Ze=_e.type==="reopen",gt=_e.createdAt||null,ir=_e.actorName||"Admin",Wr=gt?` ${Os(gt)}`:"";return{id:_e.id,type:_e.type,reason:_e.reason,details:_e.details??null,title:Ze?`Reopened${Wr} by ${ir}`:`Ended early${Wr} by ${ir}`,description:`${_e.reason}${_e.details?": "+_e.details:""}`,iconBgClass:Ze?"bg-[#1E5461]/10":"bg-[#C89212]/10",iconBorderClass:Ze?"border-[#1E5461]/20":"border-[#C89212]/20",iconColorClass:Ze?"text-[#1E5461]":"text-[#C89212]",textColorClass:Ze?"text-[#1E5461]":"text-[#6A4234]"}};if(Z.length>0)return Z.map(_e=>O(_e));const fe=[];return x.reopenReason&&fe.push({id:"fallback-reopen",sessionId:(ge==null?void 0:ge.id)||"",type:"reopen",reason:x.reopenReason,details:x.reopenDetails??null,actorName:x.reopenedBy||"Admin",actorId:null,createdAt:x.reopenedAt||x.endDate}),x.endedEarlyReason&&fe.push({id:"fallback-ended-early",sessionId:(ge==null?void 0:ge.id)||"",type:"ended-early",reason:x.endedEarlyReason,details:x.endedEarlyDetails??null,actorName:x.endedEarlyBy||"Admin",actorId:null,createdAt:x.originalEndDate||x.endDate}),fe.map(_e=>O(_e))},[Z,x.reopenReason,x.reopenDetails,x.reopenedAt,x.reopenedBy,x.endedEarlyReason,x.endedEarlyDetails,x.originalEndDate,x.endDate,x.endedEarlyBy,ge==null?void 0:ge.id]);y.useEffect(()=>{D.length<=2&&dr(!1)},[D.length]);const re=y.useCallback(async()=>{if(!(ge!=null&&ge.id)){Ie([]);return}try{const O=await p5(ge.id);Ie(O)}catch(O){console.error("Error loading session status notes:",O)}},[ge==null?void 0:ge.id]);y.useEffect(()=>{re()},[re]);const de=y.useCallback(O=>{O.stopPropagation(),ge&&oe(ge);const fe=(x==null?void 0:x.product_id)??(x==null?void 0:x.productId)??(ge==null?void 0:ge.product_id)??(ge==null?void 0:ge.productId)??null,_e=`/users?filter=product-owner&perspective=${ke}${fe?`&product=${fe}`:""}`;He(_e)},[ge,oe,He,ke,x]),Ne=y.useCallback(O=>{O.stopPropagation(),ge&&oe(ge);const fe=(x==null?void 0:x.product_id)??(x==null?void 0:x.productId)??(ge==null?void 0:ge.product_id)??(ge==null?void 0:ge.productId)??null,_e=`/users?filter=stakeholder&perspective=${ke}${fe?`&product=${fe}`:""}`;He(_e)},[ge,oe,He,ke,x]),Ge=y.useCallback(async O=>{if(ge!=null&&ge.id)try{const fe=await g5({session_id:ge.id,type:O.type,reason:O.reason,details:O.details??null,actor_id:O.actorId??null,actor_name:O.actorName||"Admin"});Ie(_e=>{const Ze=_e.findIndex(gt=>gt.id===fe.id);if(Ze!==-1){const gt=[..._e];return gt[Ze]=fe,gt}return[fe,..._e]})}catch(fe){console.error("Error logging session status note:",fe)}},[ge==null?void 0:ge.id]);y.useEffect(()=>{tr&&(ls({title:tr.title,summary:tr.summary??"",whatWouldItDo:tr.whatWouldItDo??"",howWouldItWork:tr.howWouldItWork??""}),cs(tr.attachment_urls?[...tr.attachment_urls]:[]),Br(null))},[tr]),y.useEffect(()=>{os&&U.length>0?vr(U[0].id):vr(""),Hn(null)},[os,U]);const Je=O=>{const fe=O.isDraft||!1,_e="2099-12-31",Ze=O.startDate&&O.startDate.trim()?O.startDate:_e,gt=O.endDate&&O.endDate.trim()?O.endDate:_e,ir=O.productId&&O.productId.trim()!==""?O.productId:null,Wr=ir&&Ve.find(en=>en.id===ir)||null,na={...x,title:O.title.trim()||"Untitled Session",goal:O.goal.trim()||"",votesPerUser:O.useAutoVotes?Math.max(1,Math.floor(e.length/2)):Number(O.votesPerUser),useAutoVotes:O.useAutoVotes,startDate:new Date(Ze).toISOString(),endDate:new Date(gt+"T23:59:59").toISOString(),isActive:fe?!1:x.isActive,product_id:(Wr==null?void 0:Wr.id)??null,product_name:null};ne(na),Qe(!1)},be=O=>{var Ze,gt;const fe=new Date().toISOString(),_e={...x,originalEndDate:x.endDate,endDate:fe,isActive:!1,endedEarlyBy:(Y==null?void 0:Y.name)||"Admin",endedEarlyReason:O.reason,endedEarlyDetails:(Ze=O.details)!=null&&Ze.trim()?O.details.trim():null,reopenReason:null,reopenDetails:null,reopenedBy:null,reopenedAt:null};ne(_e),Ge({type:"ended-early",reason:O.reason,details:(gt=O.details)!=null&&gt.trim()?O.details.trim():null,actorName:(Y==null?void 0:Y.name)||"Admin",actorId:(Y==null?void 0:Y.id)??null}),Vt(!1),fi()},pe=O=>{var Ze,gt;const fe=new Date;fe.setDate(fe.getDate()+7);const _e={...x,endDate:fe.toISOString(),isActive:!0,originalEndDate:null,endedEarlyBy:null,endedEarlyReason:null,endedEarlyDetails:null,reopenReason:O.reason,reopenDetails:(Ze=O.details)!=null&&Ze.trim()?O.details.trim():null,reopenedBy:(Y==null?void 0:Y.name)||"Admin",reopenedAt:new Date().toISOString()};ne(_e),Ge({type:"reopen",reason:O.reason,details:(gt=O.details)!=null&&gt.trim()?O.details.trim():null,actorName:(Y==null?void 0:Y.name)||"Admin",actorId:(Y==null?void 0:Y.id)??null}),L(!1),hi()},st=async(O,fe)=>{const _e={...w,organization:O,project:fe};k(_e),T()},At=O=>{Tn(O)},ot=async()=>{if(!tr)return;const O=Ar.title.trim();if(!O){Br("Title is required.");return}X(!0),Br(null);try{await $e(tr.id,{title:O,summary:Ar.summary.trim()?Ar.summary.trim():null,whatWouldItDo:Ar.whatWouldItDo.trim()?Ar.whatWouldItDo.trim():null,howWouldItWork:Ar.howWouldItWork.trim()?Ar.howWouldItWork.trim():null,attachment_urls:hn.length>0?hn:null}),Tn(null),cs([])}catch(fe){console.error("Error updating suggestion:",fe),Br("Failed to update the suggestion. Please try again.")}finally{X(!1)}},kt=async()=>{if(os){if(!qn){Hn("Please select a session.");return}try{if(!await Bm(qn)){Hn("The selected session no longer exists. Please refresh and try again.");return}}catch{Hn("The selected session no longer exists. Please refresh and try again.");return}Kn(!0),Hn(null);try{await he(os.id,qn),js(null)}catch(O){console.error("Error moving suggestion:",O),Hn("Failed to move the suggestion. Please try again.")}finally{Kn(!1)}}},Ot=async()=>{if(bn){is(!0),bs(null);try{await te(bn.id),as(null)}catch(O){console.error("Error promoting suggestion:",O),bs("Failed to move the suggestion into the current session.")}finally{is(!1)}}},Te=async()=>{if(ye){rt(!0),I(null);try{await Pe(ye.id),Fe(null)}catch(O){console.error("Error deleting suggestion:",O),I("Failed to delete the suggestion. Please try again.")}finally{rt(!1)}}},Bt=y.useCallback(()=>{Qe(!1),a()},[a]),et=y.useCallback(O=>{const fe=Array.from(O.target.files||[]),_e=[],Ze=[],gt=["image/jpeg","image/jpg","image/png","image/gif","image/webp","application/pdf"];fe.forEach(en=>{gt.includes(en.type)&&(_e.push(en),en.type.startsWith("image/")?Ze.push(URL.createObjectURL(en)):Ze.push(""))});const ir=3-nr.length,Wr=_e.slice(0,ir),na=Ze.slice(0,ir);mr(en=>[...en,...Wr]),Sr(en=>[...en,...na]),fr.current&&(fr.current.value="")},[nr.length]),tt=y.useCallback(O=>{mr(fe=>{const _e=fe[O];return _e&&_e.type.startsWith("image/")?Sr(Ze=>{const gt=Ze[O];return gt&&URL.revokeObjectURL(gt),Ze.filter((ir,Wr)=>Wr!==O)}):Sr(Ze=>Ze.filter((gt,ir)=>ir!==O)),fe.filter((Ze,gt)=>gt!==O)})},[]),Ct=y.useCallback(O=>{Kt(O),wn(null),ur(!0)},[]),lt=y.useCallback(()=>{jr||(Ur.forEach(O=>{O&&URL.revokeObjectURL(O)}),ur(!1),Kt(null),mr([]),Sr([]),wn(null),fr.current&&(fr.current.value=""))},[jr,Ur]),qt=y.useCallback(async()=>{var O;if(!Nt||nr.length===0){wn("Please select at least one file to upload.");return}try{sn(!0),wn(null);const fe=[];for(let gt=0;gt<nr.length;gt++){const ir=nr[gt],Wr=ir.name.split(".").pop(),na=`${Date.now()}-${gt}.${Wr}`,en=`features/${Nt.id}/${na}`;try{const{error:Sa}=await Ee.storage.from("feature-attachments").upload(en,ir,{cacheControl:"3600",upsert:!1});if(Sa)console.error("Error uploading file:",Sa),(O=Sa.message)!=null&&O.includes("Bucket not found")&&console.warn('Storage bucket "feature-attachments" not found. Please create it in Supabase Storage.');else{const{data:{publicUrl:Ip}}=Ee.storage.from("feature-attachments").getPublicUrl(en);fe.push(Ip)}}catch(Sa){console.error("Error uploading file:",Sa)}}if(fe.length===0){wn("Failed to upload files. Please try again."),sn(!1);return}const _e=Nt.attachmentUrls||[],Ze={...Nt,attachmentUrls:[..._e,...fe]};r(Ze),lt()}catch(fe){console.error("Error submitting attachment:",fe),wn("Failed to upload attachments. Please try again.")}finally{sn(!1)}},[Nt,nr,r,lt]),pt=y.useCallback((O,fe)=>{const _e=(O.attachmentUrls||[]).filter(ir=>ir!==fe),Ze={...O,attachmentUrls:_e};r(Ze);const gt=fe.match(/features\/[^\/]+\/[^\/]+$/);gt&&Ee.storage.from("feature-attachments").remove([gt[0]]).catch(ir=>console.error("Error deleting file from storage:",ir))},[r]);return y.useEffect(()=>{if(!V)return;const O=fe=>{we.current&&!we.current.contains(fe.target)&&Se(!1)};return document.addEventListener("mousedown",O),document.addEventListener("touchstart",O,{passive:!0}),()=>{document.removeEventListener("mousedown",O),document.removeEventListener("touchstart",O)}},[V]),y.useEffect(()=>{if(!Ae)return;const O=fe=>{bt.current&&!bt.current.contains(fe.target)&&Ke(!1)};return document.addEventListener("mousedown",O),document.addEventListener("touchstart",O,{passive:!0}),()=>{document.removeEventListener("mousedown",O),document.removeEventListener("touchstart",O)}},[Ae]),y.useEffect(()=>{if(!Jt)return;const O=fe=>{fe.target.closest(".feature-actions-dropdown-container")||rr(null)};return document.addEventListener("mousedown",O),document.addEventListener("touchstart",O,{passive:!0}),()=>{document.removeEventListener("mousedown",O),document.removeEventListener("touchstart",O)}},[Jt]),i.jsxs("div",{className:"container mx-auto p-4 max-w-6xl min-h-screen pb-8",children:[i.jsx("div",{className:"hidden md:flex md:justify-center mb-2",children:i.jsx("img",{src:Di,alt:"New Millennium Building Systems Logo",className:"-mt-4 cursor-pointer hover:opacity-80 transition-opacity",style:{height:"96px",width:"auto"},onClick:()=>He("/sessions")})}),i.jsxs("div",{className:"flex justify-between items-center mb-6",children:[i.jsxs("div",{className:"flex items-center",children:[i.jsx(Tp,{src:Zl,alt:"New Millennium Building Systems Logo",className:"mr-4 md:hidden",style:{width:"40px",height:"40px",objectFit:"contain"}}),i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsx("h1",{className:"text-2xl font-bold text-[#2D4660] md:text-3xl",children:"Admin Dashboard"}),Y&&i.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:["Welcome, ",Y.name,(()=>{const O=wt?"system-admin":We?"product-owner":"stakeholder",fe=O==="system-admin"?i.jsxs("span",{className:"inline-flex items-baseline text-[#C89212]",children:[i.jsx("span",{className:"inline-flex items-center",children:i.jsx(fn,{className:"h-3.5 w-3.5"})}),i.jsx("span",{className:"ml-1 text-sm",children:"System Admin"})]}):O==="product-owner"?i.jsxs("span",{className:"inline-flex items-baseline text-[#576C71]",children:[i.jsx("span",{className:"inline-flex items-center",children:i.jsx(Hr,{className:"h-3.5 w-3.5"})}),i.jsx("span",{className:"ml-1 text-sm",children:"Product Owner"})]}):i.jsxs("span",{className:"inline-flex items-baseline text-[#8B5A4A]",children:[i.jsx("span",{className:"inline-flex items-center",children:i.jsx(vs,{className:"h-3.5 w-3.5"})}),i.jsx("span",{className:"ml-1 text-sm",children:"Stakeholder"})]}),_e=dt?"system-admin":Qt?"product-owner":"stakeholder";if(_e===O)return i.jsxs("span",{className:"text-sm text-gray-600",children:[", ",fe]});const Ze=_e==="system-admin"?i.jsxs("span",{className:"inline-flex items-baseline text-[#C89212]",children:[i.jsx("span",{className:"inline-flex items-center",children:i.jsx(fn,{className:"h-3.5 w-3.5"})}),i.jsx("span",{className:"ml-1 text-sm",children:"System Admin"})]}):_e==="product-owner"?i.jsxs("span",{className:"inline-flex items-baseline text-[#576C71]",children:[i.jsx("span",{className:"inline-flex items-center",children:i.jsx(Hr,{className:"h-3.5 w-3.5"})}),i.jsx("span",{className:"ml-1 text-sm",children:"Product Owner"})]}):i.jsxs("span",{className:"inline-flex items-baseline text-[#8B5A4A]",children:[i.jsx("span",{className:"inline-flex items-center",children:i.jsx(vs,{className:"h-3.5 w-3.5"})}),i.jsx("span",{className:"ml-1 text-sm",children:"Stakeholder"})]});return i.jsxs("span",{className:"text-sm text-gray-600",children:[", ",fe,i.jsx("span",{className:"md:inline hidden",children:", "}),i.jsxs("span",{className:"whitespace-nowrap md:inline inline-block",children:[i.jsx("span",{className:"md:hidden",children:", "}),"viewing this page as a ",Ze]})]})})()]})]})]}),i.jsxs("div",{ref:we,className:"relative z-40",children:[i.jsxs("div",{className:"hidden md:flex space-x-2",children:[x.isActive&&i.jsxs("button",{onClick:v,className:"flex items-center px-4 py-2 bg-[#576C71] text-white rounded-lg hover:bg-[#1E5461] transition-colors",children:[i.jsx(gn,{className:"mr-2 h-[26px] w-[26px]"}),"Vote!"]}),i.jsxs("button",{onClick:()=>He(dt||Qt?`/users?perspective=${ke}&filter=all`:"/users?filter=stakeholder"),className:"flex items-center px-4 py-2 bg-[#2D4660] text-white rounded-lg hover:bg-[#173B65] transition-colors",children:[dt||Qt?i.jsx(Hr,{className:"mr-2 h-4 w-4"}):i.jsx(es,{className:"mr-2 h-4 w-4"}),dt||Qt?"User Management":"Stakeholders"]}),i.jsxs("button",{onClick:()=>He("/sessions"),className:"flex items-center px-4 py-2 bg-[#4f6d8e] text-white rounded-lg hover:bg-[#3d5670] transition-colors",children:[i.jsx(es,{className:"mr-2 h-4 w-4"}),"All Sessions"]}),i.jsx("button",{onClick:p,className:"flex items-center justify-center p-2 w-10 h-10 bg-[#576C71] text-white rounded-lg hover:bg-[#1E5461] transition-colors",title:"Logout",children:i.jsx(Ma,{className:"h-4 w-4"})})]}),i.jsx("div",{className:"flex md:hidden",children:i.jsx("button",{onClick:()=>Se(!V),className:"p-2 rounded-md border border-gray-200 bg-white shadow-sm","aria-label":"Open menu",children:i.jsx(ki,{className:"h-5 w-5 text-gray-700"})})}),V&&i.jsx("div",{className:"absolute right-0 mt-2 w-56 bg-white border border-gray-200 rounded-lg shadow-lg md:hidden z-50",children:i.jsxs("div",{className:"py-1",children:[x.isActive&&i.jsxs("button",{onClick:()=>{Se(!1),v()},className:"w-full px-3 py-2 flex items-center text-left hover:bg-gray-50",children:[i.jsx(gn,{className:"h-[26px] w-[26px] mr-2 text-gray-700"}),"Vote!"]}),i.jsxs("button",{onClick:()=>{Se(!1),He(dt||Qt?`/users?perspective=${ke}&filter=all`:"/users?filter=stakeholder")},className:"w-full px-3 py-2 flex items-center text-left hover:bg-gray-50",children:[dt||Qt?i.jsx(Hr,{className:"h-4 w-4 mr-2 text-gray-700"}):i.jsx(es,{className:"h-4 w-4 mr-2 text-gray-700"}),dt||Qt?"User Management":"Stakeholders"]}),i.jsxs("button",{onClick:()=>{Se(!1),He("/sessions")},className:"w-full px-3 py-2 flex items-center text-left hover:bg-gray-50",children:[i.jsx(es,{className:"h-4 w-4 mr-2 text-gray-700"}),"All Sessions"]}),!(x.isActive===!1&&!ji(x.endDate))&&i.jsxs("button",{onClick:()=>{Se(!1),s()},className:"w-full px-3 py-2 flex items-center text-left hover:bg-gray-50",children:[i.jsx(Ph,{className:"h-4 w-4 mr-2 text-gray-700"}),ji(x.endDate)?"Final Results":"Current Results"]}),i.jsxs("button",{onClick:()=>{Se(!1),Qe(!0)},className:"w-full px-3 py-2 flex items-center text-left hover:bg-gray-50",children:[i.jsx(ma,{className:"h-4 w-4 mr-2 text-gray-700"}),"Edit Session"]}),i.jsx("button",{onClick:()=>{Se(!1),p()},className:"w-full px-3 py-2 flex items-center justify-center hover:bg-gray-50",title:"Logout",children:i.jsx(Ma,{className:"h-4 w-4 text-gray-700"})})]})})]})]}),i.jsxs("div",{className:"relative bg-white rounded-lg shadow-md p-4 mb-6",style:{marginTop:ui?"3.5rem":"0"},children:[ui&&i.jsxs("div",{className:"absolute left-0 px-4 py-1 pr-8 rounded-t-md border-b-0 text-sm font-semibold shadow-sm z-20 flex items-center gap-2 whitespace-nowrap group cursor-pointer",style:{top:"0",left:"-1px",transform:"translateY(-100%)",backgroundColor:wa.background,color:wa.text,borderColor:wa.border,borderWidth:"1px",borderBottomWidth:"0",boxShadow:"0 4px 8px rgba(16,24,40,0.06)",borderTopLeftRadius:"0.9rem",borderTopRightRadius:"0.9rem",overflow:"visible"},onMouseEnter:()=>{(x.product_id||x.productId)&&ol(!0)},onMouseLeave:()=>ol(!1),onClick:O=>{const fe=x.product_id||x.productId;if(!fe)return;O.stopPropagation(),O.preventDefault();const _e=Ve.find(Ze=>Ze.id===fe);_e&&(jn(_e),on(_e.name||""),Or(_e.color_hex||null),kn(_e.color_hex||"#2D4660"))},children:[i.jsx(b0,{className:"h-4 w-4 flex-shrink-0"}),i.jsx("span",{className:"overflow-hidden text-ellipsis flex-1 min-w-0",children:ui}),(x.product_id||x.productId)&&vo&&i.jsx("div",{className:"absolute right-2 flex-shrink-0 opacity-80",children:i.jsx(Vh,{className:"h-4 w-4",style:{color:wa.text}})})]}),i.jsxs("div",{className:"pt-1",children:[i.jsxs("div",{className:"flex items-center justify-between mb-4",children:[i.jsxs("h2",{className:"text-xl font-semibold text-[#2D4660]",children:["Current Session: ",i.jsx("span",{className:"text-[#1E5461]",children:x.title})]}),i.jsxs("div",{ref:bt,className:"relative z-40",children:[i.jsxs("div",{className:"hidden md:flex space-x-2",children:[i.jsxs("button",{onClick:de,className:"relative inline-flex items-center px-4 py-2 rounded-lg text-sm font-medium transition-colors bg-[#576C71] text-white hover:bg-[#1E5461]",children:[i.jsx(Hr,{className:"h-4 w-4 mr-2"}),"Admins",i.jsx("span",{className:"absolute -top-1 -right-1 bg-red-500 text-white text-[10px] font-bold rounded-full min-w-[18px] h-[18px] flex items-center justify-center px-1 z-10",children:Dt})]}),i.jsxs("button",{onClick:Ne,className:"relative inline-flex items-center px-4 py-2 rounded-lg text-sm font-medium transition-colors bg-[#1E5461] text-white hover:bg-[#576C71]",children:[i.jsx(es,{className:"h-4 w-4 mr-2"}),"Stakeholders",i.jsx("span",{className:"absolute -top-1 -right-1 bg-red-500 text-white text-[10px] font-bold rounded-full min-w-[18px] h-[18px] flex items-center justify-center px-1 z-10",children:Ye})]}),!(x.isActive===!1&&!ji(x.endDate))&&i.jsxs(_t,{variant:"gold",onClick:s,className:"flex items-center",children:[i.jsx(Ph,{className:"h-4 w-4 mr-2"}),ji(x.endDate)?"Final Results":"Current Results"]}),i.jsxs(_t,{variant:"primary",onClick:()=>Qe(!0),className:"flex items-center",children:[i.jsx(ma,{className:"h-4 w-4 mr-2"}),"Edit Session"]})]}),i.jsx("div",{className:"flex md:hidden",children:i.jsx("button",{onClick:()=>Ke(!Ae),className:"p-2 rounded-md border border-gray-200 bg-white shadow-sm","aria-label":"Open session actions menu",children:i.jsx(ki,{className:"h-5 w-5 text-gray-700"})})}),Ae&&i.jsx("div",{className:"absolute right-0 mt-2 w-56 bg-white border border-gray-200 rounded-lg shadow-lg md:hidden z-50",children:i.jsxs("div",{className:"py-1",children:[i.jsxs("button",{onClick:O=>{Ke(!1),de(O)},className:"relative w-full px-3 py-2 flex items-center text-left hover:bg-gray-50",children:[i.jsx(Hr,{className:"h-4 w-4 mr-2 text-gray-700"}),"Admins",i.jsx("span",{className:"absolute right-3 top-1/2 -translate-y-1/2 bg-red-500 text-white text-[10px] font-bold rounded-full min-w-[18px] h-[18px] flex items-center justify-center px-1 z-10",children:Dt})]}),i.jsxs("button",{onClick:O=>{Ke(!1),Ne(O)},className:"relative w-full px-3 py-2 flex items-center text-left hover:bg-gray-50",children:[i.jsx(es,{className:"h-4 w-4 mr-2 text-gray-700"}),"Stakeholders",i.jsx("span",{className:"absolute right-3 top-1/2 -translate-y-1/2 bg-red-500 text-white text-[10px] font-bold rounded-full min-w-[18px] h-[18px] flex items-center justify-center px-1 z-10",children:Ye})]}),!(x.isActive===!1&&!ji(x.endDate))&&i.jsxs("button",{onClick:()=>{Ke(!1),s()},className:"w-full px-3 py-2 flex items-center text-left hover:bg-gray-50",children:[i.jsx(Ph,{className:"h-4 w-4 mr-2 text-gray-700"}),ji(x.endDate)?"Final Results":"Current Results"]}),i.jsxs("button",{onClick:()=>{Ke(!1),Qe(!0)},className:"w-full px-3 py-2 flex items-center text-left hover:bg-gray-50",children:[i.jsx(ma,{className:"h-4 w-4 mr-2 text-gray-700"}),"Edit Session"]})]})})]})]}),Pt&&i.jsx("p",{className:"text-xs text-gray-500 mb-4",children:"Loading products"}),ct&&i.jsx("p",{className:"text-xs text-[#591D0F] mb-4",children:ct}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4",children:[i.jsxs("div",{children:[i.jsx("h3",{className:"text-sm font-medium text-gray-700 mb-1",children:"Voting Period"}),$s(x.startDate)||$s(x.endDate)?i.jsx("p",{className:"text-gray-400 italic",children:"Dates not set"}):i.jsxs("p",{className:`text-[#2D4660] font-medium ${x.originalEndDate?"line-through text-gray-400":""}`,children:[Os(x.startDate)," - ",Os(x.originalEndDate||x.endDate)]}),x.originalEndDate&&x.endedEarlyBy&&i.jsxs("div",{className:"flex items-center mt-1 text-xs text-[#591D0F]",children:[i.jsxs("span",{children:["Ended Early by ",x.endedEarlyBy]}),x.endedEarlyReason&&i.jsxs("div",{className:"group relative ml-1",children:[i.jsx(nn,{className:"h-3 w-3 cursor-help"}),i.jsxs("div",{className:"absolute bottom-full left-1/2 -translate-x-1/2 mb-2 px-3 py-2 bg-gray-900 text-white text-xs rounded-lg opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-200 whitespace-nowrap z-10 pointer-events-none max-w-xs",children:[i.jsxs("div",{className:"font-semibold mb-1",children:["Reason: ",x.endedEarlyReason]}),x.endedEarlyDetails&&i.jsx("div",{className:"whitespace-normal",children:x.endedEarlyDetails}),i.jsx("div",{className:"absolute top-full left-1/2 -translate-x-1/2 -mt-1 border-4 border-transparent border-t-gray-900"})]})]})]})]}),i.jsxs("div",{children:[i.jsx("h3",{className:"text-sm font-medium text-gray-700 mb-1",children:"Votes Per User"}),i.jsx("p",{className:"text-[#2D4660] font-medium",children:x.useAutoVotes?`${Math.max(1,Math.floor(e.length/2))} (Auto: ${e.length} features  2)`:x.votesPerUser})]}),i.jsxs("div",{children:[i.jsx("h3",{className:"text-sm font-medium text-gray-700 mb-1",children:"Status"}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("div",{className:"flex items-center",children:ka}),(x.isActive||ji(x.endDate))&&i.jsx(_t,{variant:x.isActive?"danger":"primary",onClick:()=>{x.isActive?Vt(!0):(hi(),L(!0))},className:"text-xs px-2 py-1 ml-2",children:x.isActive?"End Early":"Reopen"})]})]})]}),x.goal&&x.goal.trim()||D.length>0?i.jsx("div",{className:"pt-3",children:i.jsxs("div",{className:"flex flex-col md:flex-row md:items-start gap-4",children:[x.goal&&x.goal.trim()&&i.jsxs("div",{className:"flex-[2] relative overflow-hidden rounded-2xl border border-[#C89212]/30 bg-gradient-to-r from-[#FFF6E3] via-[#FFF9ED] to-white shadow-sm p-5 md:p-6",children:[i.jsx("span",{className:"pointer-events-none absolute -top-10 left-4 h-32 w-32 rounded-full bg-[#C89212]/25 blur-3xl"}),i.jsx("span",{className:"pointer-events-none absolute -bottom-16 right-6 h-40 w-40 rounded-full bg-[#F4C66C]/20 blur-3xl"}),i.jsx("span",{className:"pointer-events-none absolute top-6 right-10 text-[#F4B400] text-xl animate-ping",children:""}),i.jsx("span",{className:"pointer-events-none absolute bottom-8 left-10 text-[#C89212] text-lg animate-pulse",children:""}),i.jsxs("div",{className:"relative flex items-start gap-5",children:[i.jsxs("div",{className:"relative",children:[i.jsx("div",{className:"h-16 w-16 md:h-20 md:w-20 rounded-full bg-white shadow-lg shadow-[#C89212]/30 border border-[#C89212]/40 flex items-center justify-center text-[#C89212]",children:i.jsx(Jm,{className:"h-8 w-8 md:h-10 md:w-10"})}),i.jsx("span",{className:"pointer-events-none absolute -top-3 -left-2 text-[#C89212] text-base animate-ping",children:""}),i.jsx("span",{className:"pointer-events-none absolute bottom-0 -right-3 text-[#F5D79E] text-xl animate-pulse",children:""})]}),i.jsxs("div",{children:[i.jsx("p",{className:"text-xs font-semibold uppercase tracking-[0.2em] text-[#C89212]/80 mb-1",children:"Session Goal"}),i.jsx("h3",{className:"text-lg md:text-xl font-semibold text-[#2D4660] leading-relaxed",children:x.goal})]})]})]}),D.length>0&&i.jsxs("div",{className:"flex-[1] rounded-xl border border-white/70 bg-white/80 backdrop-blur-sm shadow-inner p-4",children:[(D.length===1||D.length>2)&&i.jsxs("div",{className:"flex items-center justify-between mb-3",children:[D.length===1&&i.jsx("h3",{className:"text-sm font-semibold text-[#2D4660]",children:"Status Notes"}),D.length>2&&i.jsxs("span",{className:"inline-flex items-center justify-between text-xs text-[#1E5461] w-[90px] ml-auto",children:[i.jsx("span",{className:"flex items-center justify-center w-4 h-4 border border-current rounded",children:Tt?i.jsx(Nd,{className:"h-2.5 w-2.5"}):i.jsx(Cn,{className:"h-2.5 w-2.5"})}),i.jsx("button",{type:"button",onClick:()=>dr(O=>!O),className:"ml-1 hover:text-[#173B65] transition-colors text-left flex-1",children:Tt?"Show Less":"Show More"})]})]}),i.jsx("div",{className:"space-y-3",children:D.slice(0,Tt?D.length:2).map(O=>{const fe=O.type==="reopen"?Xo:nn;return i.jsxs("div",{className:`flex items-start gap-3 text-sm ${O.textColorClass}`,children:[i.jsx("div",{className:`mt-0.5 flex items-center justify-center w-8 h-8 ${O.iconBgClass} ${O.iconBorderClass} border rounded-lg`,children:i.jsx(fe,{className:`h-3.5 w-3.5 ${O.iconColorClass}`})}),i.jsxs("div",{children:[i.jsx("p",{className:"font-semibold text-gray-800",children:O.title}),i.jsx("p",{className:"text-xs text-gray-600 leading-relaxed",children:O.description})]})]},O.id)})}),D.length>2&&!Tt&&i.jsx("p",{className:"text-xs text-gray-500 mt-3",children:'Showing newest notes. Select "Show More" to view all updates.'})]})]})}):null]})]}),i.jsxs("div",{className:"relative bg-white rounded-lg shadow-md p-4 mb-6",children:[i.jsxs("div",{className:"flex items-center justify-between mb-0",children:[i.jsxs("div",{className:"flex items-center pb-[20px]",children:[i.jsx("img",{src:PC,alt:"Azure DevOps logo",className:"h-5 w-5 mr-2"}),i.jsx("h2",{className:"text-xl font-semibold text-[#2D4660]",children:"Azure DevOps Integration"})]}),w.enabled&&i.jsxs("button",{onClick:_,className:"text-sm text-[#591D0F] hover:text-[#6A4234] font-medium flex items-center flex-shrink-0 pr-[10px] mb-[-15px]",children:[i.jsx(ts,{className:"h-4 w-4 mr-1"}),"Disconnect"]})]}),w.enabled?i.jsxs("div",{className:"space-y-4",children:[i.jsx("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4",children:i.jsxs("div",{className:"flex flex-col",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(un,{className:"h-5 w-5 text-green-600 flex-shrink-0"}),i.jsx("span",{className:"font-medium text-green-900",children:"Connected to Azure DevOps"}),i.jsx("span",{className:"text-green-500",children:""}),i.jsxs("span",{className:"text-sm text-green-700 whitespace-nowrap",children:[i.jsx("span",{className:"font-medium",children:"Organization:"})," ",w.organization]}),i.jsx("span",{className:"text-green-500",children:""}),i.jsx("span",{className:"text-sm text-green-700 font-medium whitespace-nowrap",children:"Project:"}),i.jsx("div",{className:"min-w-[150px]",children:i.jsx(md,{options:De,value:se,onChange:_u,placeholder:"Select projects..."})})]}),i.jsxs("div",{className:"flex items-start mt-1",children:[w.lastSyncTime&&i.jsxs("div",{className:"text-sm text-green-700 ml-7 mt-[-5px]",children:[i.jsx("span",{className:"font-medium",children:"Last Sync:"})," ",Os(w.lastSyncTime)]}),i.jsx("div",{className:"text-xs text-green-700 ml-[300px]",children:"Switching projects will clear the filters below."})]})]})}),i.jsx(SZ,{config:w,onUpdateConfig:k,onPreview:b,isFetching:N,availableStates:P,availableAreaPaths:A,availableTags:M,previewFeatures:R,showPreviewModal:K,onFetchStatesForType:W,onFetchAreaPathsForTypeAndState:q,onFetchTagsForTypeStateAndAreaPath:ve,onFetchTypesAndStatesForAreaPath:$,onFetchTypesAndStatesForTags:H,onFetchTypesAndAreaPathsForStates:ce,resetSignal:Xe})]}):i.jsxs("div",{className:"bg-gray-50 rounded-lg p-6 text-center border border-dashed border-gray-300",children:[i.jsx("img",{src:PC,alt:"Azure DevOps logo",className:"h-10 w-10 mx-auto mb-3 opacity-80"}),i.jsx("h3",{className:"text-lg font-medium text-gray-700 mb-2",children:"Not Connected"}),i.jsx("p",{className:"text-gray-600 mb-4",children:"Connect to Azure DevOps to import work items as features for voting."}),i.jsx(_t,{variant:"primary",onClick:()=>st("newmill",se[0]||De[0]||"Product"),className:"inline-flex items-center",disabled:N,children:N?i.jsxs(i.Fragment,{children:[i.jsx(Xo,{className:"h-4 w-4 mr-2 animate-spin"}),"Connecting..."]}):i.jsxs(i.Fragment,{children:[i.jsx(ma,{className:"h-4 w-4 mr-2"}),"Connect to Azure DevOps"]})}),C&&i.jsx("p",{className:"mt-3 text-sm text-[#591D0F]",children:C})]})]}),i.jsxs("div",{className:"relative bg-white rounded-lg shadow-md p-4 mb-6",children:[i.jsxs("div",{className:"flex flex-wrap justify-between items-center gap-2 mb-4",children:[i.jsxs("div",{children:[i.jsx("h2",{className:"text-xl font-semibold text-[#2D4660]",children:"Suggested Features"}),i.jsx("p",{className:"text-sm text-gray-600",children:"Ideas submitted from the voting experience for future consideration."})]}),i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsxs("span",{className:"inline-flex items-center px-3 py-1 rounded-full bg-[#1E5461]/10 text-[#1E5461] text-sm font-medium",children:[le.length," ",le.length===1?"suggestion":"suggestions"]}),le.length>1&&i.jsx(_t,{variant:"gold",onClick:()=>Q(!ae),className:"text-xs px-3 py-1 flex items-center gap-1",children:ae?i.jsxs(i.Fragment,{children:[i.jsx(Nd,{className:"h-3.5 w-3.5"}),"Show Less"]}):i.jsxs(i.Fragment,{children:[i.jsx(Cn,{className:"h-3.5 w-3.5"}),"Show All"]})})]})]}),le.length===0?i.jsx("div",{className:"bg-gray-50 border border-dashed border-gray-200 rounded-lg p-6 text-center text-gray-500 text-sm",children:'No feature suggestions have been submitted yet. Encourage voters to use the "Suggest a Feature" button in the voting experience.'}):i.jsx("div",{className:`space-y-4 pr-1 ${ae?"":"max-h-[360px] overflow-y-auto"}`,children:le.map(O=>{const fe=O.requester_name||O.requester_email||"Anonymous";return i.jsx("div",{className:"border border-gray-200 rounded-lg p-4 hover:border-[#1E5461]/40 transition-colors",children:i.jsxs("div",{className:"flex flex-col gap-4",children:[i.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4",children:[i.jsxs("div",{className:"md:flex-1",children:[i.jsx("h3",{className:"text-lg font-semibold text-[#2D4660]",children:O.title}),i.jsxs("p",{className:"text-xs text-gray-500 mt-[14px]",children:["Submitted by ",i.jsx("span",{className:"font-medium text-[#1E5461]",children:fe}),O.requester_email&&i.jsxs(i.Fragment,{children:[" ","(",i.jsx("a",{href:`mailto:${O.requester_email}`,className:"text-[#1E5461] hover:underline",children:O.requester_email}),")"]})," on ",Os(O.created_at)]})]}),i.jsxs("div",{className:"flex flex-col items-end gap-2 self-start md:min-w-[360px]",children:[i.jsxs("div",{className:"flex flex-wrap justify-end gap-2",children:[i.jsxs(_t,{variant:"primary",onClick:()=>{bs(null),as(O)},className:"text-xs px-3 py-1 flex items-center",children:[i.jsx(LM,{className:"h-3.5 w-3.5 mr-2"}),"Move to Current Session"]}),i.jsxs(_t,{variant:"secondary",onClick:()=>{U.length>0&&js(O)},disabled:U.length===0,className:"text-xs px-3 py-1 flex items-center",children:[i.jsx(Si,{className:"h-3.5 w-3.5 mr-2"}),"Move to Future Session"]}),i.jsxs(_t,{variant:"secondary",onClick:()=>At(O),className:"text-xs px-3 py-1 flex items-center",children:[i.jsx(j0,{className:"h-3.5 w-3.5 mr-2"}),"Edit"]}),i.jsxs(_t,{variant:"danger",onClick:()=>{I(null),Fe(O)},className:"text-xs px-3 py-1 flex items-center",children:[i.jsx(Qo,{className:"h-3.5 w-3.5 mr-2"}),"Delete"]})]}),U.length===0&&i.jsx("p",{className:"text-xs text-gray-500 text-right",children:"No upcoming sessions are available yet. Create a future session to enable this action."})]})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3",children:[i.jsxs("div",{className:"border border-gray-200 rounded-lg p-3 bg-gray-50 max-h-48 overflow-y-auto",children:[i.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[i.jsx(nn,{className:"h-4 w-4 text-[#2D4660]"}),i.jsx("p",{className:"text-sm font-semibold text-[#2D4660]",children:"Problem it solves"})]}),i.jsx("p",{className:"text-sm text-gray-700 whitespace-pre-line",children:O.summary&&O.summary.length>0?O.summary:"No summary provided."})]}),i.jsxs("div",{className:"border border-gray-200 rounded-lg p-3 bg-gray-50 max-h-48 overflow-y-auto",children:[i.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[i.jsx(Gm,{className:"h-4 w-4 text-[#2D4660]"}),i.jsx("p",{className:"text-sm font-semibold text-[#2D4660]",children:"What would it do?"})]}),i.jsx("p",{className:"text-sm text-gray-700 whitespace-pre-line",children:O.whatWouldItDo&&O.whatWouldItDo.length>0?O.whatWouldItDo:"No details provided."})]}),i.jsxs("div",{className:"border border-gray-200 rounded-lg p-3 bg-gray-50 max-h-48 overflow-y-auto",children:[i.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[i.jsx(LF,{className:"h-4 w-4 text-[#2D4660]"}),i.jsx("p",{className:"text-sm font-semibold text-[#2D4660]",children:"How would it work?"})]}),i.jsx("p",{className:"text-sm text-gray-700 whitespace-pre-line",children:O.howWouldItWork&&O.howWouldItWork.length>0?O.howWouldItWork:"No implementation details provided."})]})]}),O.attachment_urls&&O.attachment_urls.length>0&&i.jsxs("div",{className:"border-t border-gray-200 pt-4",children:[i.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[i.jsx(ys,{className:"h-4 w-4 text-[#2D4660]"}),i.jsxs("p",{className:"text-sm font-semibold text-[#2D4660]",children:["Attachments (",O.attachment_urls.length,")"]})]}),i.jsx("div",{className:"flex flex-wrap gap-3",children:O.attachment_urls.map((_e,Ze)=>{const gt=_e.match(/\.(jpg|jpeg|png|gif|webp)$/i),ir=_e.match(/\.pdf$/i),Wr=_e.split("/").pop()||`attachment-${Ze+1}`;return i.jsxs("div",{className:"relative group border border-gray-300 rounded-md overflow-hidden",style:{width:"120px",height:"120px"},children:[gt?i.jsx("a",{href:_e,target:"_blank",rel:"noopener noreferrer",className:"block w-full h-full",children:i.jsx("img",{src:_e,alt:Wr,className:"w-full h-full object-cover"})}):ir?i.jsx("a",{href:_e,target:"_blank",rel:"noopener noreferrer",className:"block w-full h-full flex items-center justify-center bg-red-50 hover:bg-red-100 transition-colors",children:i.jsx(ys,{className:"h-10 w-10 text-red-600"})}):i.jsx("a",{href:_e,target:"_blank",rel:"noopener noreferrer",className:"block w-full h-full flex items-center justify-center bg-gray-100 hover:bg-gray-200 transition-colors",children:i.jsx(ys,{className:"h-8 w-8 text-gray-600"})}),i.jsx("div",{className:"absolute bottom-0 left-0 right-0 bg-black bg-opacity-70 text-white text-xs p-1.5 truncate",children:Wr.length>18?`${Wr.substring(0,18)}...`:Wr})]},Ze)})})]})]})},O.id)})})]}),i.jsxs("div",{className:"relative bg-white rounded-lg shadow-md p-4 mb-6",children:[i.jsxs("div",{className:"flex justify-between items-center mb-4",children:[i.jsx("h2",{className:"text-xl font-semibold text-[#2D4660]",children:"Feature Management"}),i.jsxs(_t,{variant:"gold",onClick:()=>d(!0),className:"flex items-center w-44",children:[i.jsx(Cn,{className:"mr-2 h-4 w-4"}),"Add Feature"]})]}),i.jsx("div",{className:"w-full overflow-x-auto max-h-[600px] overflow-y-auto",children:i.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[i.jsx("thead",{className:"bg-gray-50",children:i.jsxs("tr",{children:[i.jsx("th",{scope:"col",className:"sticky left-0 top-0 bg-gray-50 px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider z-30",children:"Title"}),i.jsx("th",{scope:"col",className:"sticky top-0 bg-gray-50 hidden md:table-cell px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider z-20",children:"Type"}),i.jsx("th",{scope:"col",className:"sticky top-0 bg-gray-50 hidden md:table-cell px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider z-20",children:"Epic"}),i.jsx("th",{scope:"col",className:"sticky top-0 bg-gray-50 hidden md:table-cell px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider z-20",children:"State"}),i.jsx("th",{scope:"col",className:"sticky top-0 bg-gray-50 hidden lg:table-cell px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider z-20",children:"Area Path"}),i.jsx("th",{scope:"col",className:"sticky top-0 bg-gray-50 px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider z-20",children:"Votes"}),i.jsx("th",{scope:"col",className:"sticky top-0 bg-gray-50 px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider z-20",children:"Actions"})]})}),i.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:e.map(O=>i.jsxs("tr",{className:"align-top group hover:bg-gray-50 bg-white",onMouseEnter:()=>{Jt||Yt(O.id)},onMouseLeave:()=>Yt(null),children:[i.jsx("td",{className:"sticky left-0 bg-white group-hover:bg-gray-50 px-4 py-3 z-10",children:i.jsx("div",{className:"flex items-start gap-2",children:i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsx("div",{className:"text-sm font-medium text-gray-900",children:O.title}),O.description&&O.description.trim()&&i.jsxs("div",{className:"text-xs text-gray-500 mt-1 line-clamp-2",children:[O.description.replace(/<[^>]*>/g,"").substring(0,100),O.description.replace(/<[^>]*>/g,"").length>100?"...":""]}),O.attachmentUrls&&O.attachmentUrls.length>0&&i.jsx("div",{className:"flex flex-wrap gap-1 mt-2",children:O.attachmentUrls.map((fe,_e)=>{const Ze=fe.match(/\.(jpg|jpeg|png|gif|webp)$/i),gt=fe.match(/\.pdf$/i);return i.jsxs("div",{className:"relative group/thumb border border-gray-300 rounded overflow-hidden cursor-pointer hover:border-[#C89212] transition-colors",style:{width:"40px",height:"40px"},onClick:()=>Pr(fe),children:[Ze?i.jsx("img",{src:fe,alt:`Attachment ${_e+1}`,className:"w-full h-full object-cover"}):gt?i.jsx("div",{className:"w-full h-full flex items-center justify-center bg-red-50",children:i.jsx(ys,{className:"h-4 w-4 text-red-600"})}):i.jsx("div",{className:"w-full h-full flex items-center justify-center bg-gray-100",children:i.jsx(ys,{className:"h-4 w-4 text-gray-600"})}),i.jsx("button",{type:"button",onClick:ir=>{ir.stopPropagation(),pt(O,fe)},className:"absolute top-0.5 right-0.5 bg-red-500 text-white rounded-full opacity-0 group-hover/thumb:opacity-100 transition-opacity flex items-center justify-center",style:{width:"16px",height:"16px"},title:"Remove attachment",children:i.jsx(ts,{className:"h-2.5 w-2.5"})})]},_e)})}),O.tags&&O.tags.length>0&&i.jsxs("div",{className:"flex flex-wrap gap-1 mt-1 items-center",children:[O.tags.slice(0,3).map((fe,_e)=>i.jsxs("span",{className:"inline-flex items-center px-1.5 py-0.5 text-xs bg-[#C89212]/10 text-[#C89212] rounded border border-[#C89212]/30",children:[i.jsx(dS,{className:"h-3 w-3 mr-1"}),fe]},_e)),O.tags.length>3&&i.jsxs("span",{className:"inline-flex items-center px-1.5 py-0.5 text-xs bg-[#C89212]/10 text-[#C89212] rounded border border-[#C89212]/30",children:[i.jsx(dS,{className:"h-3 w-3 mr-1"}),"+",O.tags.length-3]})]})]})})}),i.jsx("td",{className:"hidden md:table-cell px-4 py-3 align-middle",children:(()=>{const fe=O.workItemType||O.work_item_type,_e=G4(fe);if(_e&&O.azureDevOpsId){const Ze=_e.icon,ir=(en=>{const Sa=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(en);return Sa?{r:parseInt(Sa[1],16),g:parseInt(Sa[2],16),b:parseInt(Sa[3],16)}:null})(_e.color),Wr=ir?`rgba(${ir.r}, ${ir.g}, ${ir.b}, 0.1)`:`${_e.color}20`,na=ir?`rgba(${ir.r}, ${ir.g}, ${ir.b}, 0.2)`:`${_e.color}40`;return i.jsxs("a",{href:O.azureDevOpsUrl||"",target:"_blank",rel:"noopener noreferrer",onClick:en=>en.stopPropagation(),className:"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium cursor-pointer border",style:{backgroundColor:Wr,color:_e.color,borderColor:_e.color},onMouseEnter:en=>{en.currentTarget.style.backgroundColor=na},onMouseLeave:en=>{en.currentTarget.style.backgroundColor=Wr},title:"View in Azure DevOps",children:[i.jsx(Ze,{className:"h-3 w-3 mr-1",style:{color:_e.color}}),O.azureDevOpsId.replace(/^ado-/,"#")]})}else{if(fe&&O.azureDevOpsId)return i.jsxs("a",{href:O.azureDevOpsUrl||"",target:"_blank",rel:"noopener noreferrer",onClick:Ze=>Ze.stopPropagation(),className:"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-[#492434]/10 text-[#492434] hover:bg-[#492434]/20 cursor-pointer border border-[#492434]/30",title:"View in Azure DevOps",children:[i.jsx("span",{className:"mr-1 text-xs",children:fe}),O.azureDevOpsId.replace(/^ado-/,"#")]});if(_e){const Ze=_e.icon;return i.jsxs("div",{className:"flex items-center gap-1",children:[i.jsx(Ze,{className:"w-4 h-4",style:{color:_e.color}}),O.azureDevOpsId&&i.jsx("span",{className:"text-xs text-gray-600",children:O.azureDevOpsId.replace(/^ado-/,"#")})]})}else if(fe)return i.jsx("span",{className:"px-2 py-1 text-xs font-medium bg-[#492434]/10 text-[#492434] rounded",children:fe})}return i.jsx("span",{className:"text-gray-400 text-xs",children:"-"})})()}),i.jsx("td",{className:`hidden md:table-cell px-4 py-3 align-middle ${O.epic||O.workItemType&&O.workItemType.toLowerCase()==="epic"?"w-64":"w-32"}`,onMouseEnter:fe=>fe.stopPropagation(),onMouseLeave:fe=>fe.stopPropagation(),children:O.workItemType&&O.workItemType.toLowerCase()==="epic"?i.jsx("span",{className:"text-xs text-gray-600 italic",children:"This Work Item is an Epic"}):O.epic?O.epicId?i.jsx("a",{href:`https://dev.azure.com/${w.organization}/${w.project}/_workitems/edit/${O.epicId}`,target:"_blank",rel:"noopener noreferrer",onClick:fe=>fe.stopPropagation(),className:"inline-block w-full",children:i.jsx(ql,{name:O.epic,epicId:String(O.epicId),description:O.description,className:"hover:opacity-80"})}):i.jsx(ql,{name:O.epic,description:O.description}):i.jsx("span",{className:"text-xs text-gray-400 italic",children:"no Epic assigned"})}),i.jsx("td",{className:"hidden md:table-cell px-4 py-3 align-middle",children:O.state&&i.jsx("span",{className:"px-2 py-1 text-xs font-medium bg-[#1E5461]/10 text-[#1E5461] rounded",children:O.state})}),i.jsx("td",{className:"hidden lg:table-cell px-4 py-3 text-sm",children:i.jsx("div",{className:"text-gray-600",children:O.areaPath&&typeof O.areaPath=="string"&&O.areaPath.trim()!==""?i.jsx("div",{className:"max-w-xs break-words text-xs",children:O.areaPath}):i.jsx("span",{className:"text-gray-400 text-xs",children:"-"})})}),i.jsx("td",{className:"px-4 py-3 whitespace-nowrap text-sm",children:O.votes}),i.jsx("td",{className:"px-4 py-3 whitespace-nowrap text-sm text-gray-500",children:i.jsx("div",{className:"flex items-center justify-end feature-actions-dropdown-container",children:i.jsxs("div",{className:"relative inline-block",children:[(jt===O.id&&!Jt||Jt===O.id)&&i.jsx("button",{onClick:()=>rr(Jt===O.id?null:O.id),className:"p-2 rounded-md hover:bg-gray-100 transition-colors",title:"Feature actions",children:i.jsx(XE,{className:"h-5 w-5 text-gray-600"})}),Jt===O.id&&i.jsx("div",{className:"absolute right-0 w-56 bg-white border border-gray-200 rounded-lg shadow-lg overflow-visible",style:{zIndex:1e3,top:"auto",bottom:"auto",marginTop:"0.25rem",maxHeight:"calc(100vh - 100px)",overflowY:"auto"},children:i.jsxs("div",{children:[i.jsx("div",{className:"px-4 py-2 text-xs font-semibold text-gray-500 uppercase border-b border-gray-200",children:"Feature Actions"}),i.jsxs("button",{onClick:()=>{f(O),rr(null)},className:"w-full px-4 py-3 text-left flex items-center hover:bg-blue-50 text-[#2D4660] transition-colors cursor-pointer",children:[i.jsx(j0,{className:"h-5 w-5 mr-3 flex-shrink-0"}),i.jsxs("div",{children:[i.jsx("div",{className:"font-medium text-base",children:"Edit Feature"}),i.jsx("div",{className:"text-xs text-gray-500",children:"Modify feature details"})]})]}),i.jsxs("button",{onClick:()=>{Ct(O),rr(null)},className:"w-full px-4 py-3 text-left flex items-center hover:bg-green-50 text-green-700 border-t border-gray-200 transition-colors cursor-pointer",children:[i.jsx(ys,{className:"h-5 w-5 mr-3 flex-shrink-0"}),i.jsxs("div",{children:[i.jsx("div",{className:"font-medium text-base",children:"Add Attachment"}),i.jsx("div",{className:"text-xs text-gray-500",children:"Upload a file"})]})]}),i.jsxs("button",{onClick:()=>{n(O.id),rr(null)},className:"w-full px-4 py-3 text-left flex items-center hover:bg-red-50 text-red-700 border-t border-gray-200 transition-colors cursor-pointer",children:[i.jsx(Qo,{className:"h-5 w-5 mr-3 flex-shrink-0"}),i.jsxs("div",{children:[i.jsx("div",{className:"font-medium text-base",children:"Delete Feature"}),i.jsx("div",{className:"text-xs text-gray-500",children:"Remove from session"})]})]})]})})]})})})]},O.id))})]})})]}),i.jsx(cn,{isOpen:bn!==null,onClose:()=>{Rr||(as(null),bs(null))},title:"Move Suggestion to Current Session",children:i.jsxs("div",{className:"space-y-4",children:[i.jsxs("p",{className:"text-sm text-gray-700",children:["Move ",i.jsx("span",{className:"font-semibold text-[#2D4660]",children:bn==null?void 0:bn.title})," into the current session so it can be managed and voted on."]}),an&&i.jsx("div",{className:"bg-[#591D0F]/5 border border-[#591D0F]/20 text-[#591D0F] text-sm rounded-md px-3 py-2",children:an}),i.jsxs("div",{className:"flex justify-end gap-2",children:[i.jsx(_t,{variant:"secondary",onClick:()=>{Rr||(as(null),bs(null))},disabled:Rr,children:"Cancel"}),i.jsx(_t,{variant:"primary",onClick:Ot,disabled:Rr,children:Rr?"Moving...":"Move to Current Session"})]})]})}),i.jsx(cn,{isOpen:os!==null,onClose:()=>{ks||(js(null),Hn(null))},title:"Move to Future Session",children:i.jsxs("div",{className:"space-y-4",children:[i.jsxs("p",{className:"text-sm text-gray-700",children:["Choose the upcoming session where you would like to queue ",i.jsx("span",{className:"font-semibold text-[#2D4660]",children:os==null?void 0:os.title}),"."]}),U.length>0?i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Destination Session"}),i.jsx("select",{value:qn,onChange:O=>vr(O.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md text-sm bg-white",disabled:ks,children:U.map(O=>i.jsxs("option",{value:O.id,children:[O.title," (Starts ",Os(O.startDate),")"]},O.id))})]}):i.jsx("div",{className:"bg-[#1E5461]/5 border border-[#1E5461]/20 text-[#1E5461] text-sm rounded-md px-3 py-2",children:"No future sessions are available yet. Create a new session to enable this action."}),Ts&&i.jsx("div",{className:"bg-[#591D0F]/5 border border-[#591D0F]/20 text-[#591D0F] text-sm rounded-md px-3 py-2",children:Ts}),i.jsxs("div",{className:"flex justify-end gap-2",children:[i.jsx(_t,{variant:"secondary",onClick:()=>{ks||(js(null),Hn(null))},disabled:ks,children:"Cancel"}),i.jsx(_t,{variant:"primary",onClick:kt,disabled:ks||U.length===0,children:ks?"Moving...":"Move to Session"})]})]})}),i.jsx(cn,{isOpen:tr!==null,onClose:()=>{_r||(Tn(null),Br(null))},title:"Edit Suggested Feature",children:i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Title"}),i.jsx("input",{type:"text",value:Ar.title,onChange:O=>ls(fe=>({...fe,title:O.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md",disabled:_r})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Problem it solves"}),i.jsx("textarea",{value:Ar.summary,onChange:O=>ls(fe=>({...fe,summary:O.target.value})),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-md",disabled:_r})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"What would it do?"}),i.jsx("textarea",{value:Ar.whatWouldItDo,onChange:O=>ls(fe=>({...fe,whatWouldItDo:O.target.value})),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-md",disabled:_r})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"How would it work?"}),i.jsx("textarea",{value:Ar.howWouldItWork,onChange:O=>ls(fe=>({...fe,howWouldItWork:O.target.value})),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-md",disabled:_r})]}),hn.length>0&&i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Attachments"}),i.jsx("div",{className:"flex flex-wrap gap-3",children:hn.map((O,fe)=>{const _e=O.match(/\.(jpg|jpeg|png|gif|webp)$/i),Ze=O.match(/\.pdf$/i),gt=O.split("/").pop()||`attachment-${fe+1}`;return i.jsxs("div",{className:"relative group border border-gray-300 rounded-md overflow-hidden",style:{width:"120px",height:"120px"},children:[_e?i.jsx("a",{href:O,target:"_blank",rel:"noopener noreferrer",className:"block w-full h-full",children:i.jsx("img",{src:O,alt:gt,className:"w-full h-full object-cover"})}):Ze?i.jsx("a",{href:O,target:"_blank",rel:"noopener noreferrer",className:"block w-full h-full flex items-center justify-center bg-red-50 hover:bg-red-100 transition-colors",children:i.jsx(ys,{className:"h-10 w-10 text-red-600"})}):i.jsx("a",{href:O,target:"_blank",rel:"noopener noreferrer",className:"block w-full h-full flex items-center justify-center bg-gray-100 hover:bg-gray-200 transition-colors",children:i.jsx(ys,{className:"h-8 w-8 text-gray-600"})}),i.jsx("button",{type:"button",onClick:()=>{cs(ir=>ir.filter((Wr,na)=>na!==fe))},className:"absolute top-1 right-1 bg-red-500 text-white rounded-full p-1 opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center",style:{width:"20px",height:"20px"},disabled:_r,"aria-label":`Remove ${gt}`,children:i.jsx(ts,{className:"h-3 w-3"})}),i.jsx("div",{className:"absolute bottom-0 left-0 right-0 bg-black bg-opacity-70 text-white text-xs p-1.5 truncate",children:gt.length>18?`${gt.substring(0,18)}...`:gt})]},fe)})}),i.jsx("p",{className:"mt-2 text-xs text-gray-500",children:"Click the X icon on hover to remove attachments"})]}),Ws&&i.jsx("div",{className:"bg-[#591D0F]/5 border border-[#591D0F]/20 text-[#591D0F] text-sm rounded-md px-3 py-2",children:Ws}),i.jsx("div",{className:"flex justify-end gap-2",children:i.jsx(_t,{variant:"primary",onClick:ot,disabled:_r,children:_r?"Saving...":"Save Changes"})})]})}),i.jsx(cn,{isOpen:ye!==null,onClose:()=>{Ce||(Fe(null),I(null))},title:"Delete Suggested Feature",children:i.jsxs("div",{className:"space-y-4",children:[i.jsxs("p",{className:"text-sm text-gray-700",children:["Are you sure you want to delete ",i.jsx("span",{className:"font-semibold text-[#591D0F]",children:ye==null?void 0:ye.title}),"? This action cannot be undone."]}),Le&&i.jsx("div",{className:"bg-[#591D0F]/5 border border-[#591D0F]/20 text-[#591D0F] text-sm rounded-md px-3 py-2",children:Le}),i.jsxs("div",{className:"flex justify-end gap-2",children:[i.jsx(_t,{variant:"secondary",onClick:()=>{Ce||(Fe(null),I(null))},disabled:Ce,children:"Cancel"}),i.jsx(_t,{variant:"danger",onClick:Te,disabled:Ce,children:Ce?"Deleting...":"Delete"})]})]})}),i.jsx(cn,{isOpen:u,onClose:()=>d(!1),title:"Add New Feature",children:i.jsx(OC,{onSubmit:O=>{t(O),d(!1)},onCancel:()=>d(!1)})}),i.jsx(cn,{isOpen:m!==null,onClose:()=>f(null),title:"Edit Feature",children:m&&i.jsx(OC,{feature:m,onSubmit:O=>{r({...m,...O}),f(null)},onCancel:()=>f(null)})}),i.jsx(cn,{isOpen:zt,onClose:()=>Qe(!1),title:"Edit Session Settings",children:i.jsx(_Z,{session:x,featureCount:e.length,onSubmit:Je,onCancel:()=>Qe(!1),onRequestDeleteSession:Bt,isDeletingSession:l,productName:ui,products:Ve,isLoadingProducts:Pt,productError:ct,onRequestDeleteProduct:O=>Zt(O),onProductColorUpdated:async()=>{const O=(Y==null?void 0:Y.tenant_id)??(Y==null?void 0:Y.tenantId)??null;if(O)try{const fe=await Ho(O);$t(fe)}catch(fe){console.error("Error refreshing products after color update:",fe)}}})}),ar&&i.jsxs(cn,{isOpen:!0,onClose:()=>Zt(null),title:"Delete Product",children:[i.jsxs("p",{className:"text-sm text-gray-700 mb-4",children:["Are you sure you want to delete ",i.jsx("span",{className:"font-semibold",children:ar.name}),"? This will remove it for everyone in your tenant."]}),i.jsxs("div",{className:"flex justify-end gap-3",children:[i.jsx(_t,{variant:"secondary",onClick:()=>Zt(null),disabled:us,children:"Cancel"}),i.jsx(_t,{variant:"danger",onClick:Su,disabled:us,children:us?"Deleting...":"Delete"})]})]}),i.jsx(kZ,{isOpen:K,onClose:()=>B(!1),previewFeatures:R,onConfirmSync:ie,onReplaceAll:G,isFetching:N,config:w}),i.jsx(cn,{isOpen:F,onClose:()=>{L(!1),hi()},title:"Reopen Session",children:i.jsxs("form",{onSubmit:_s(pe),className:"space-y-4",children:[i.jsx("p",{className:"text-gray-600",children:"Capture a brief note so other admins understand why this session is being reopened."}),i.jsx(dd,{control:$i,name:"reason",rules:{required:"Please select a reason"},render:({field:O})=>i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Reason *"}),i.jsx(jZ,{options:bZ,value:O.value,onChange:O.onChange,placeholder:"Select a reason..."}),jo.reason&&i.jsx("p",{className:"mt-1 text-sm text-[#591D0F]",children:jo.reason.message})]})}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Additional Details (Optional)"}),i.jsx("textarea",{...Ds("details"),rows:3,placeholder:"Add any context you'd like to share with other admins...",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-[#2D4660] focus:border-transparent"})]}),i.jsx("div",{className:"bg-[#1E5461]/5 border border-[#1E5461]/20 rounded-lg p-3 text-sm text-[#1E5461]",children:"This information will appear in the Current Session summary so every admin sees why voting resumed."}),i.jsxs("div",{className:"flex justify-end space-x-2 pt-4",children:[i.jsx(_t,{variant:"secondary",type:"button",onClick:()=>{L(!1),hi()},children:"Cancel"}),i.jsx(_t,{variant:"primary",type:"submit",children:"Save & Reopen"})]})]})}),i.jsx(cn,{isOpen:nt,onClose:()=>{Vt(!1),fi()},title:"End Session Early",children:i.jsxs("form",{onSubmit:bo(be),className:"space-y-4",children:[i.jsx("p",{className:"text-gray-600",children:"You are about to end this voting session early. Please select a reason:"}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Reason *"}),i.jsxs("select",{...wo("reason",{required:"Please select a reason"}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-[#2D4660] focus:border-transparent",children:[i.jsx("option",{value:"",children:"Select a reason..."}),i.jsx("option",{value:"Sufficient Responses",children:"Sufficient responses received"}),i.jsx("option",{value:"Project Cancelled",children:"Project or initiative cancelled"}),i.jsx("option",{value:"Timeline Changed",children:"Timeline or priorities changed"}),i.jsx("option",{value:"Technical Issues",children:"Technical issues or data concerns"}),i.jsx("option",{value:"Stakeholder Request",children:"Stakeholder request"}),i.jsx("option",{value:"Low Participation",children:"Low participation rate"}),i.jsx("option",{value:"Other",children:"Other"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Additional Details (Optional)"}),i.jsx("textarea",{...wo("details"),rows:3,placeholder:"Add any additional context or notes...",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-[#2D4660] focus:border-transparent"})]}),i.jsxs("div",{className:"bg-[#C89212]/5 border border-[#C89212]/20 rounded-lg p-3 text-sm text-[#6A4234]",children:[i.jsx("p",{className:"font-medium mb-1",children:"Note:"}),i.jsx("p",{children:"Ending the session will close voting immediately. This action will be logged and visible to all admins."})]}),i.jsxs("div",{className:"flex justify-end space-x-2 pt-4",children:[i.jsx(_t,{variant:"secondary",type:"button",onClick:()=>{Vt(!1),fi()},children:"Cancel"}),i.jsx(_t,{variant:"danger",type:"submit",children:"End Session Now"})]})]})}),Gt&&i.jsx(cn,{isOpen:!0,onClose:()=>{jn(null),on(""),Or(null),In(!1)},title:"Edit Product",children:i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Product Name *"}),i.jsx("input",{type:"text",value:kr,onChange:O=>on(O.target.value),placeholder:"Enter product name",className:"w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-0 focus:border-[#2D4660]"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Product Color"}),i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("button",{type:"button",onClick:()=>{kn(Nr||"#2D4660"),In(!0)},className:"block w-12 h-12 rounded-md border-2 border-gray-300 hover:border-gray-400 transition-all flex items-center justify-center overflow-hidden",style:Nr?{backgroundColor:Nr}:{backgroundColor:"#ffffff"},children:!Nr&&i.jsx("img",{src:K4,alt:"Color Picker",className:"w-8 h-8 object-contain"})}),i.jsx("span",{className:"text-sm text-gray-600",children:Nr||"No color selected"})]})]}),i.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t",children:[i.jsx(_t,{variant:"secondary",onClick:()=>{jn(null),on(""),Or(null),In(!1)},disabled:Gn,children:"Cancel"}),i.jsx(_t,{variant:"primary",onClick:async()=>{if(!(!(Gt!=null&&Gt.id)||!kr.trim())){Ss(!0);try{await wE(Gt.id,{name:kr.trim(),color_hex:Nr});const O=(Y==null?void 0:Y.tenant_id)??(Y==null?void 0:Y.tenantId);if(O){const fe=await Ho(O);$t(fe.sort((_e,Ze)=>_e.name.localeCompare(Ze.name)))}jn(null),on(""),Or(null),In(!1),onProductColorUpdated&&onProductColorUpdated()}catch(O){console.error("Error updating product:",O),alert("Failed to update product. Please try again.")}finally{Ss(!1)}}},disabled:Gn||!kr.trim(),children:Gn?"Updating...":"Update Product"})]})]})}),Dr&&i.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",onClick:()=>In(!1),children:i.jsx("div",{className:"bg-white rounded-lg shadow-xl px-3 py-2 w-auto mx-4",onClick:O=>O.stopPropagation(),children:i.jsxs("div",{className:"flex gap-3 items-stretch",children:[i.jsxs("div",{className:"flex-shrink-0",style:{width:"240px",height:"260px"},children:[i.jsx("input",{id:"edit-native-color-input",type:"color",value:Jr,onChange:O=>kn(O.target.value),ref:O=>{O&&Dr&&setTimeout(()=>O.click(),50)},className:"opacity-0 absolute",style:{width:"1px",height:"1px"}}),i.jsx("div",{className:"w-full h-full"})]}),i.jsxs("button",{type:"button",onClick:()=>{Or(Jr),In(!1)},className:"px-6 rounded-lg text-white font-bold shadow-lg hover:shadow-xl transition-all flex flex-col items-center justify-center gap-3 text-lg flex-shrink-0",style:{backgroundColor:Jr,height:"260px",minWidth:"100px"},children:[i.jsx(un,{className:"h-8 w-8"}),i.jsxs("div",{className:"text-center leading-tight",children:[i.jsx("div",{children:"Looks"}),i.jsx("div",{children:"Good"})]})]})]})})}),i.jsx(cn,{isOpen:or,onClose:lt,title:`Add Attachment - ${(Nt==null?void 0:Nt.title)||""}`,children:i.jsxs("div",{className:"space-y-4",children:[i.jsx("p",{className:"text-sm text-gray-700",children:"Upload images or PDF files to attach to this feature (maximum 3 files)."}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Attach Images or PDFs (optional, up to 3)"}),i.jsx("input",{ref:fr,type:"file",accept:"image/*,.pdf",multiple:!0,onChange:et,disabled:jr||nr.length>=3,className:"hidden",id:"attachment-file-input"}),i.jsxs("label",{htmlFor:"attachment-file-input",className:`inline-flex items-center px-4 py-2 border border-gray-300 rounded-md cursor-pointer ${jr||nr.length>=3?"bg-gray-100 text-gray-400 cursor-not-allowed":"bg-white text-gray-700 hover:bg-gray-50"}`,children:[i.jsx(ys,{className:"h-4 w-4 mr-2"}),nr.length>=3?"Maximum 3 files":"Attach Files"]}),nr.length>0&&i.jsx("div",{className:"mt-3 flex flex-wrap gap-3",children:nr.map((O,fe)=>{const _e=O.type.startsWith("image/"),Ze=O.type==="application/pdf",gt=Ur[fe]||null;return i.jsxs("div",{className:"relative group border border-gray-300 rounded-md overflow-hidden",style:{width:"100px",height:"100px"},children:[_e&&gt?i.jsx("img",{src:gt,alt:O.name,className:"w-full h-full object-cover"}):Ze?i.jsx("div",{className:"w-full h-full flex items-center justify-center bg-red-50",children:i.jsx(ys,{className:"h-8 w-8 text-red-600"})}):null,i.jsx("button",{type:"button",onClick:()=>tt(fe),className:"absolute top-1 right-1 bg-red-500 text-white rounded-full p-1 opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center",style:{width:"20px",height:"20px"},"aria-label":`Remove ${O.name}`,children:i.jsx(ts,{className:"h-3 w-3"})}),i.jsx("div",{className:"absolute bottom-0 left-0 right-0 bg-black bg-opacity-50 text-white text-xs p-1 truncate",children:O.name.length>15?`${O.name.substring(0,15)}...`:O.name})]},fe)})})]}),Vn&&i.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 text-sm rounded-md px-3 py-2",children:Vn}),i.jsxs("div",{className:"flex justify-end gap-2 mt-6",children:[i.jsx(_t,{variant:"secondary",onClick:lt,disabled:jr,children:"Cancel"}),i.jsx(_t,{variant:"gold",onClick:qt,disabled:jr||nr.length===0,children:jr?"Uploading...":"Upload"})]})]})}),pr&&i.jsxs("div",{className:"fixed inset-0 bg-black bg-opacity-90 z-50 flex items-center justify-center p-4",onClick:()=>Pr(null),children:[i.jsx("button",{onClick:()=>Pr(null),className:"absolute top-4 right-4 text-white hover:text-gray-300 transition-colors z-10",title:"Close",children:i.jsx(ts,{className:"h-8 w-8"})}),i.jsx("div",{className:"max-w-7xl max-h-full w-full h-full flex items-center justify-center",onClick:O=>O.stopPropagation(),children:pr.match(/\.(jpg|jpeg|png|gif|webp)$/i)?i.jsx("img",{src:pr,alt:"Attachment",className:"max-w-full max-h-full object-contain"}):pr.match(/\.pdf$/i)?i.jsx("iframe",{src:pr,className:"w-full h-full bg-white",title:"PDF Viewer"}):i.jsxs("div",{className:"text-white text-center",children:[i.jsx(ys,{className:"h-16 w-16 mx-auto mb-4"}),i.jsx("p",{className:"mb-4",children:"Unable to preview this file type"}),i.jsx("a",{href:pr,target:"_blank",rel:"noopener noreferrer",className:"text-[#C89212] hover:text-[#A07810] underline",children:"Open in new tab"})]})})]})]})}const AC=["User Experience","Vendor Management","Analytics & Reporting","Operational Efficiency","Compliance & Risk","Mobile Access","Integration","Sustainability","Budget Management"],CZ={title:"Q2 Product Roadmap",goal:"Prioritize features for the Purchasing Dashboard redesign",votesPerUser:10,useAutoVotes:!0,startDate:new Date().toISOString(),endDate:new Date(Date.now()+10080*60*1e3).toISOString(),isActive:!0,originalEndDate:null,endedEarlyBy:null,endedEarlyReason:null,endedEarlyDetails:null,reopenReason:null,reopenDetails:null,reopenedBy:null,reopenedAt:null,productId:null,productName:null,product_id:null,product_name:null},EZ={organization:"newmill",project:"Product",enabled:!1,workItemType:"Feature"},PZ=[{id:"u1",name:"John Doe",email:"john@example.com",totalVotes:10,usedVotes:0,votesPerFeature:{}},{id:"u2",name:"Jane Smith",email:"jane@example.com",totalVotes:10,usedVotes:0,votesPerFeature:{}},{id:"u3",name:"Robert Johnson",email:"robert@example.com",totalVotes:10,usedVotes:0,votesPerFeature:{}}],AZ=(e,t,r)=>e?{label:"System Admin",className:"text-[#C89212]",icon:i.jsx(fn,{className:"h-3.5 w-3.5"})}:t?{label:"Product Owner",className:"text-[#576C71]",icon:i.jsx(Hr,{className:"h-3.5 w-3.5"})}:r?{label:"Stakeholder",className:"text-[#8B5A4A]",icon:i.jsx(vs,{className:"h-3.5 w-3.5"})}:null,OZ=e=>{switch(e){case"system-admin":return{label:"System Admin",className:"text-[#C89212]",icon:i.jsx(fn,{className:"h-3.5 w-3.5"})};case"product-owner":return{label:"Product Owner",className:"text-[#576C71]",icon:i.jsx(Hr,{className:"h-3.5 w-3.5"})};case"stakeholder":return{label:"Stakeholder",className:"text-[#8B5A4A]",icon:i.jsx(vs,{className:"h-3.5 w-3.5"})};default:return null}},TZ=(e,t,r)=>e?"system-admin":t?"product-owner":"stakeholder",wb=(e,t,r,n)=>{const s=TZ(e,t),a=AZ(e,t,r);if(!a)return null;if(n===s)return i.jsxs("span",{className:"text-sm text-gray-600",children:[","," ",i.jsxs("span",{className:`inline-flex items-baseline ${a.className}`,children:[i.jsx("span",{className:"inline-flex items-center",children:a.icon}),i.jsx("span",{className:"ml-1 text-sm",children:a.label})]})]});const l=OZ(n);return l?i.jsxs("span",{className:"text-sm text-gray-600",children:[","," ",i.jsxs("span",{className:`inline-flex items-baseline ${a.className}`,children:[i.jsx("span",{className:"inline-flex items-center",children:a.icon}),i.jsx("span",{className:"ml-1 text-sm",children:a.label})]}),i.jsx("span",{className:"md:inline hidden",children:", "}),i.jsxs("span",{className:"whitespace-nowrap md:inline inline-block",children:[i.jsx("span",{className:"md:hidden",children:", "}),"viewing this page as a"," ",i.jsxs("span",{className:`inline-flex items-baseline ${l.className}`,children:[i.jsx("span",{className:"inline-flex items-center",children:l.icon}),i.jsx("span",{className:"ml-1 text-sm",children:l.label})]})]})]}):null},$m=e=>{const t=new Date(e),r=new Date;t.setHours(0,0,0,0),r.setHours(0,0,0,0);const n=t.getTime()-r.getTime();return Math.ceil(n/(1e3*60*60*24))},Rm=e=>e<=0?"text-[#591D0F]":e<=2?"text-[#6A4234]":e<=4?"text-[#C89212]":"text-[#1E5461]",bb=e=>e<=0?"bg-[#591D0F]/10":e<=2?"bg-[#6A4234]/10":e<=4?"bg-[#C89212]/10":"bg-[#1E5461]/10",IZ=e=>e<=0?"bg-[#EEE8E7]":e<=2?"bg-[#F0ECEB]":e<=4?"bg-[#FAF4E7]":"bg-[#E9EEEF]",DZ=(e,t)=>{const r=new Date(e),n=new Date(t),s=new Date;return r<=s&&s<=n},$Z=e=>{const t=[...e];for(let r=t.length-1;r>0;r--){const n=Math.floor(Math.random()*(r+1));[t[r],t[n]]=[t[n],t[r]]}return t},pd=(e,t)=>e?e.length>t?`${e.substring(0,t-3)}...`:e:"",Sh=e=>{if(!e)return"";const t=document.createElement("div");t.innerHTML=e;let r=t.textContent||t.innerText||"";return r=r.replace(/\s+/g," ").trim(),r},RZ=e=>{const t=e.split("");for(let r=0;r<3;r++){const n=Math.floor(Math.random()*t.length),s=Math.floor(Math.random()*t.length);n!==s&&([t[n],t[s]]=[t[s],t[n]])}return t.join("")};function Tp({src:e,alt:t,style:r,className:n,...s}){const[a,l]=y.useState(!1);return a?i.jsx("div",{className:`inline-block bg-gray-100 text-center align-middle ${n??""}`,style:r,children:i.jsx("div",{className:"flex items-center justify-center w-full h-full",children:i.jsx("img",{src:"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iODgiIGhlaWdodD0iODgiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgc3Ryb2tlPSIjMDAwIiBzdHJva2UtbGluZWpvaW49InJvdW5kIiBvcGFjaXR5PSIuMyIgZmlsbD0ibm9uZSIgc3Ryb2tlLXdpZHRoPSIzLjciPjxyZWN0IHg9IjE2IiB5PSIxNiIgd2lkdGg9IjU2IiBoZWlnaHQ9IjU2IiByeD0iNiIvPjxwYXRoIGQ9Im0xNiA1OCAxNi0xOCAzMiAzMiIvPjxjaXJjbGUgY3g9IjUzIiBjeT0iMzUiIHI9IjciLz48L3N2Zz4KCg==",alt:"Error loading image",...s,"data-original-url":e})})}):i.jsx("img",{src:e,alt:t,className:n,style:r,...s,onError:()=>l(!0)})}const _t=It.memo(function({children:t,onClick:r,variant:n="primary",disabled:s=!1,className:a="",...l}){const u="py-2 px-4 rounded-lg flex items-center transition-colors cursor-pointer",d={primary:"bg-[#2d4660] text-white hover:bg-[#173B65]",secondary:"border border-gray-300 text-gray-700 hover:bg-gray-50",danger:"bg-[#591D0F] text-white hover:bg-[#492434]",gold:"bg-[#C89212] text-white hover:bg-[#E0A814]",blue:"bg-[#173B65] text-white hover:bg-[#1D2C49]",gray:"bg-[#576C71] text-white hover:bg-[#1E5461]"};return i.jsx("button",{onClick:r,disabled:s,className:`${u} ${d[n]} ${s?"opacity-60 cursor-not-allowed":""} ${a}`,...l,children:t})}),cn=({isOpen:e,onClose:t,title:r,children:n,maxWidth:s="max-w-2xl",hideCloseButton:a=!1,hideHeader:l=!1})=>(y.useEffect(()=>{if(e){const u=window.scrollY;return document.body.style.position="fixed",document.body.style.top=`-${u}px`,document.body.style.width="100%",document.body.style.overflow="hidden",()=>{document.body.style.position="",document.body.style.top="",document.body.style.width="",document.body.style.overflow="",window.scrollTo(0,u)}}},[e]),e?i.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:i.jsxs("div",{className:"flex items-start justify-center min-h-screen p-4 text-center pt-8 sm:pt-16",children:[i.jsx("div",{className:"fixed inset-0 transition-opacity bg-black/50",onClick:a?void 0:t,"aria-hidden":"true"}),i.jsxs("div",{className:`inline-block w-full ${s} p-6 mb-8 overflow-visible text-left align-middle transition-all transform bg-white shadow-xl rounded-lg relative z-10`,children:[l?!a&&i.jsx("div",{className:"flex justify-end -mt-2 -mr-2",children:i.jsx("button",{onClick:t,className:"text-gray-400 hover:text-gray-500 focus:outline-none",children:i.jsx(ts,{className:"h-5 w-5"})})}):i.jsxs("div",{className:"flex items-start justify-between mb-5",children:[i.jsxs("div",{className:"flex items-center gap-3 bg-[#FFF7E2] border border-[#C89212]/40 rounded-xl px-6 py-3 shadow-sm w-full mr-4",children:[i.jsx("div",{className:"flex items-center justify-center h-10 w-10 rounded-full bg-[#C89212]/15 text-[#C89212]",children:i.jsx(Gm,{className:"h-6 w-6"})}),i.jsxs("div",{children:[i.jsx("h3",{className:"text-lg font-semibold text-[#2d4660] tracking-tight",children:r}),i.jsx("p",{className:"text-xs text-[#8A6D3B] font-medium mt-1 uppercase tracking-widest",children:"Spark the roadmap with your ideas"})]})]}),!a&&i.jsx("button",{onClick:t,className:"ml-3 text-gray-400 hover:text-gray-500 focus:outline-none",children:i.jsx(ts,{className:"h-5 w-5"})})]}),i.jsx("div",{className:l?"-mt-4":"mt-2 overflow-visible",children:n})]})]})}):null),ql=It.memo(function({name:t,epicId:r,description:n,truncateAt:s=null,className:a}){if(!t)return null;const l=s===null?t:pd(t,s),u=["flex items-center text-xs text-gray-600",a].filter(Boolean).join(" "),d=n;return i.jsxs("div",{className:`${u} relative group/epic`,children:[i.jsxs("div",{className:"flex items-start gap-1.5 min-w-0",children:[i.jsx(fn,{className:"h-4 w-4 flex-shrink-0 mt-0.5",style:{color:"rgba(51, 153, 71, 0.6)"}}),i.jsxs("span",{className:"font-normal leading-tight break-words min-w-0 text-gray-600",children:[l,r&&i.jsxs("span",{className:"text-gray-500 ml-1",children:["#",r]})]})]}),d&&i.jsxs("div",{className:"absolute left-0 bottom-full mb-2 opacity-0 group-hover/epic:opacity-100 transition-opacity z-50 w-64 p-3 bg-gray-900 text-white text-xs rounded-lg shadow-lg pointer-events-none",children:[i.jsx("div",{className:"font-semibold mb-1",children:t}),n&&i.jsx("div",{className:"text-gray-300 mt-2 line-clamp-4",children:n.replace(/<[^>]*>/g,"").trim()}),i.jsx("div",{className:"absolute top-full left-4 w-0 h-0 border-l-4 border-r-4 border-t-4 border-transparent border-t-gray-900"})]})]})});function MZ(e){if(!e)return null;const t=e.toLowerCase();return t==="epic"?{icon:fn,color:"rgb(51, 153, 71)"}:t==="feature"?{icon:Jm,color:"rgb(119, 59, 147)"}:t==="user story"||t==="story"?{icon:YE,color:"#007acc"}:t==="bug"?{icon:JE,color:"#cc293d"}:t==="task"?{icon:Fl,color:"#007acc"}:t==="change request"?{icon:GE,color:"#ff8c00"}:t==="test case"||t==="test"?{icon:QE,color:"#007acc"}:t==="issue"?{icon:nn,color:"#cc293d"}:null}const FZ=It.memo(function({id:t,url:r,workItemType:n}){if(!t)return null;const s=MZ(n),a=(s==null?void 0:s.icon)||ZM,l=(s==null?void 0:s.color)||"#007acc",u=(v,x)=>{if(v.startsWith("rgb(")){const w=v.match(/\d+/g);if(w&&w.length>=3)return`rgba(${w[0]}, ${w[1]}, ${w[2]}, ${x})`}if(v.startsWith("#")){const w=v.replace("#",""),k=parseInt(w.substring(0,2),16),b=parseInt(w.substring(2,4),16),_=parseInt(w.substring(4,6),16);return`rgba(${k}, ${b}, ${_}, ${x})`}return v},d=s?u(l,.2):"rgb(219, 234, 254)",m=s?u(l,.6):"rgb(147, 197, 254)",f=s?u(l,.3):"rgb(191, 219, 254)",p=s?u(l,.8):"rgb(147, 197, 254)";return i.jsxs("a",{href:r,target:"_blank",rel:"noreferrer",className:"inline-flex items-center gap-1.5 px-1.5 py-1 rounded-md text-xs font-semibold border-2 shadow-sm hover:shadow-md cursor-pointer transition-all duration-200",style:{backgroundColor:d,color:l,borderColor:m},onMouseEnter:v=>{v.currentTarget.style.backgroundColor=f,v.currentTarget.style.borderColor=p},onMouseLeave:v=>{v.currentTarget.style.backgroundColor=d,v.currentTarget.style.borderColor=m},title:"View in Azure DevOps",children:[i.jsx(a,{className:"h-3.5 w-3.5 flex-shrink-0",style:s?{color:l}:{}}),i.jsxs("span",{className:"font-mono",children:["#",t]})]})});It.memo(function({endDate:t}){const r=$m(t),n=Rm(r),s=bb(r);return i.jsx("div",{className:`${s} rounded-md p-3 border ${r<=2?"border-[#6A4234]/20":r<=4?"border-[#C89212]/20":"border-[#1E5461]/20"}`,children:i.jsxs("div",{className:"flex items-center",children:[i.jsx(Si,{className:`h-5 w-5 mr-2 ${n}`}),i.jsxs("div",{children:[i.jsxs("span",{className:`font-medium ${n}`,children:["Voting ends: ",Os(t)]}),i.jsx("div",{className:"text-sm mt-1",children:r<=0?i.jsx("span",{className:"text-red-600 font-medium",children:"Voting ends today!"}):i.jsxs("span",{className:`${n}`,children:[r," ",r===1?"day":"days"," remaining"]})})]})]})})});function LZ({isShuffling:e,onShuffle:t}){const[r,n]=y.useState("Shuffle Features"),s=y.useRef(null);return y.useEffect(()=>(e?s.current=window.setInterval(()=>{n(RZ("Shuffle Features"))},100):s.current!==null&&(window.clearInterval(s.current),n("Shuffle Features")),()=>{s.current!==null&&window.clearInterval(s.current)}),[e]),i.jsxs("button",{onClick:t,className:`py-2 px-4 rounded-lg flex items-center justify-center transition-all duration-300 w-full md:w-auto ${e?"bg-[#C89212] text-white scale-95":"bg-[#C89212] hover:bg-[#A67810] text-white hover:scale-105"}`,disabled:e,children:[i.jsx("span",{className:`transition-transform duration-500 ${e?"mr-2 animate-spin":"mr-2"}`,children:i.jsx(kF,{className:"h-4 w-4"})}),i.jsx("span",{className:"font-medium tracking-wide whitespace-nowrap",children:r})]})}const Dh=It.memo(function({show:t,title:r,message:n,onConfirm:s,onCancel:a,confirmText:l="Confirm",cancelText:u="Cancel",type:d="delete"}){if(!t)return null;const m=d==="delete"?"bg-[#591D0F]/10":"bg-[#C89212]/10",f=d==="delete"?"text-[#591D0F]":"text-[#C89212]",p=d==="delete"?"bg-[#591D0F] hover:bg-[#492434]":"bg-[#C89212] hover:bg-[#A67810]";return i.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:i.jsxs("div",{className:"relative z-10 bg-white rounded-lg shadow-xl max-w-md w-full mx-auto overflow-hidden",children:[i.jsxs("div",{className:`${m} p-4 flex items-start space-x-4`,children:[i.jsx("div",{className:f,children:d==="delete"?i.jsx(Qo,{className:"h-5 w-5"}):i.jsx(nn,{className:"h-5 w-5"})}),i.jsxs("div",{children:[i.jsx("h3",{className:"text-lg font-medium text-gray-900",children:r}),i.jsx("p",{className:"mt-1 text-sm text-gray-500",children:n})]})]}),i.jsx("div",{className:"p-4 bg-white space-y-4",children:i.jsxs("div",{className:"flex items-center justify-end space-x-3",children:[i.jsx("button",{type:"button",onClick:a,className:"px-4 py-2 border border-gray-300 rounded-md text-sm font-medium text-gray-700 hover:bg-gray-50 cursor-pointer",children:u}),i.jsx("button",{type:"button",onClick:()=>{s(),a()},className:`px-4 py-2 rounded-md text-sm font-medium text-white ${p} cursor-pointer`,children:l})]})})]})})}),zZ=It.memo(function({feature:t,userVoteCount:r=0,remainingVotes:n=0,votingIsActive:s=!1,onVote:a,isShuffling:l=!1,shuffleStage:u="idle",currentUser:d,onRequestInfo:m,onViewAttachment:f}){const[p,v]=y.useState(!1),[x,w]=y.useState(!1),k=async()=>{if(!(!m||x)){w(!0);try{await m(t.id),v(!0)}catch(_){console.error("Error requesting info:",_)}finally{w(!1)}}},b=()=>{switch(u){case"fadeOut":return"opacity-0 scale-95 blur-sm";case"rearranging":return"opacity-0 scale-90";case"fadeIn":return"opacity-100 scale-100 blur-0";default:return"opacity-100 scale-100 blur-0"}};return i.jsx("div",{className:`relative z-10 bg-white rounded-lg shadow-md overflow-hidden transition-all duration-400 ease-in-out ${r>0?"border-2 border-[#1E5461]":""} ${b()}`,children:i.jsxs("div",{className:"p-6 flex flex-col h-full",children:[i.jsx("h3",{className:"text-lg font-semibold mb-2 text-[#2d4660]",children:t.title}),i.jsxs("div",{className:"flex items-center justify-between mb-4",children:[t.areaPath&&i.jsx("span",{className:"text-sm text-gray-600",children:t.areaPath}),t.azureDevOpsId&&i.jsx("div",{className:"mt-2",children:i.jsx(FZ,{id:t.azureDevOpsId,url:t.azureDevOpsUrl||"",workItemType:t.workItemType})})]}),t.description?i.jsxs(i.Fragment,{children:[i.jsx("p",{className:"text-gray-600 mb-4 flex-grow",children:t.description}),t.attachmentUrls&&t.attachmentUrls.length>0&&i.jsx("div",{className:"flex flex-wrap gap-2 mb-4",children:t.attachmentUrls.map((_,N)=>{const C=_.match(/\.(jpg|jpeg|png|gif|webp)$/i),T=_.match(/\.pdf$/i);return i.jsx("button",{onClick:()=>f==null?void 0:f(_),className:"relative border border-gray-300 rounded overflow-hidden hover:border-[#C89212] transition-colors cursor-pointer",style:{width:"60px",height:"60px"},title:`View attachment ${N+1}`,children:C?i.jsx("img",{src:_,alt:`Attachment ${N+1}`,className:"w-full h-full object-cover"}):T?i.jsx("div",{className:"w-full h-full flex items-center justify-center bg-red-50",children:i.jsx(ys,{className:"h-6 w-6 text-red-600"})}):i.jsx("div",{className:"w-full h-full flex items-center justify-center bg-gray-100",children:i.jsx(ys,{className:"h-6 w-6 text-gray-600"})})},N)})})]}):i.jsxs("div",{className:"mb-4 flex-grow",children:[i.jsx("p",{className:"text-gray-400 italic mb-3",children:"No description provided"}),d&&m&&i.jsx("div",{className:"transition-all duration-300",children:p?i.jsxs("div",{className:"text-sm px-3 py-2 bg-green-50 text-green-700 rounded-md font-medium flex items-center animate-fadeIn",children:[i.jsx(un,{className:"h-4 w-4 mr-2 flex-shrink-0"}),i.jsx("span",{children:"Thank you! Your request has been sent."})]}):i.jsxs("button",{onClick:k,disabled:x,className:"text-sm px-3 py-2 bg-blue-50 hover:bg-blue-100 text-[#2d4660] rounded-md font-medium flex items-center transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:[i.jsx(nn,{className:"h-4 w-4 mr-2 flex-shrink-0"}),i.jsx("span",{children:x?"Sending...":"Ask Product Owner for more info"})]})})]}),a&&i.jsx("div",{className:"mt-auto pt-3",children:i.jsxs("div",{className:`flex items-center mb-3 gap-2 ${t.epic?"justify-between":"justify-end"}`,children:[t.epic&&t.epic.trim()&&i.jsx(ql,{name:t.epic,epicId:t.epicId,truncateAt:null,className:"text-sm bg-gray-100 px-2 py-1 rounded-md"}),i.jsx("div",{className:"flex items-center space-x-2",children:r===0?i.jsxs("button",{onClick:()=>a(t.id,!0),className:`px-6 py-2.5 rounded-lg text-base font-semibold cursor-pointer transition-colors flex items-center ${s&&n>0?"bg-[#2d4660] text-white hover:bg-[#C89212]":"bg-gray-300 text-gray-600 cursor-not-allowed"}`,disabled:!s||n<=0,children:[i.jsx(gn,{className:"h-6 w-6 mr-2"}),"Vote"]}):i.jsxs(i.Fragment,{children:[i.jsx("button",{onClick:()=>a(t.id,!1),className:"p-2 rounded-full bg-gray-100 hover:bg-gray-200 text-gray-700 cursor-pointer transition-colors","aria-label":"Remove vote",disabled:!s,children:i.jsx(Nd,{className:"h-6 w-6"})}),i.jsx("span",{className:"px-4 py-2 bg-[#1E5461]/10 text-[#1E5461] rounded-full font-semibold text-base min-w-[3rem] text-center",children:r}),i.jsx("button",{onClick:()=>a(t.id,!0),className:`p-2 rounded-full cursor-pointer transition-colors ${s&&n>0?"bg-[#2d4660]/10 hover:bg-[#C89212]/30 text-[#2d4660]":"bg-gray-100 text-gray-400 cursor-not-allowed"}`,disabled:!s||n<=0,"aria-label":"Add vote",children:i.jsx(Cn,{className:"h-6 w-6"})})]})})]})})]})})});function UZ({feature:e,onClose:t}){return y.useEffect(()=>{const r=window.scrollY;return document.body.style.position="fixed",document.body.style.top=`-${r}px`,document.body.style.width="100%",document.body.style.overflow="hidden",()=>{document.body.style.position="",document.body.style.top="",document.body.style.width="",document.body.style.overflow="",window.scrollTo(0,r)}},[]),i.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:i.jsxs("div",{className:"relative z-10 bg-white rounded-lg p-6 max-w-md w-full max-h-[80vh] overflow-y-auto",children:[i.jsxs("div",{className:"flex justify-between items-center mb-4",children:[i.jsxs("h3",{className:"text-lg font-medium text-[#2d4660]",children:['Voters for "',e.title,'"']}),i.jsx("button",{onClick:t,className:"text-gray-500 hover:text-gray-700 cursor-pointer",children:i.jsx(ts,{className:"h-5 w-5"})})]}),e.voters.length===0?i.jsx("p",{className:"text-gray-500",children:"No votes yet"}):i.jsx("ul",{className:"divide-y divide-gray-200",children:e.voters.map(r=>i.jsxs("li",{className:"py-3 flex justify-between items-center",children:[i.jsxs("div",{children:[i.jsx("p",{className:"font-medium",children:r.name}),i.jsx("p",{className:"text-sm text-gray-500",children:r.email})]}),i.jsxs("div",{className:"bg-[#2d4660]/10 text-[#2d4660] rounded-full px-3 py-1",children:[r.voteCount," ",r.voteCount===1?"vote":"votes"]})]},r.userId))})]})})}function BZ({features:e,onResetVotes:t,onResetAllVotes:r,onBack:n,showVotersList:s,setShowVotersList:a,votingSession:l,effectiveVotesPerUser:u,onLogout:d,currentUser:m,isSystemAdmin:f,isSessionAdmin:p,isStakeholder:v,currentRole:x=f?"system-admin":p?"product-owner":"stakeholder"}){const w=oi(),[k,b]=y.useState(!1),_=y.useRef(null);y.useEffect(()=>{if(!k)return;const A=M=>{_.current&&!_.current.contains(M.target)&&b(!1)};return document.addEventListener("mousedown",A),document.addEventListener("touchstart",A,{passive:!0}),()=>{document.removeEventListener("mousedown",A),document.removeEventListener("touchstart",A)}},[k]);const N=y.useMemo(()=>[...e].sort((A,M)=>M.votes-A.votes),[e]),C=y.useMemo(()=>N.slice(0,10).map(A=>({name:A.title,votes:A.votes,id:A.id})),[N]),T=$m(l.endDate),P=Rm(T);return i.jsxs("div",{className:"container mx-auto p-4 max-w-6xl pb-8",children:[i.jsx("div",{className:"hidden md:flex md:justify-center mb-2",children:i.jsx("img",{src:Di,alt:"New Millennium Building Systems Logo",className:"-mt-4 cursor-pointer hover:opacity-80 transition-opacity",style:{height:"96px",width:"auto"},onClick:()=>w("/sessions")})}),i.jsxs("div",{className:"flex justify-between items-center mb-6",children:[i.jsxs("div",{className:"flex items-center",children:[i.jsx(Tp,{src:Zl,alt:"New Millennium Building Systems Logo",className:"mr-4 md:hidden cursor-pointer hover:opacity-80 transition-opacity",style:{width:"40px",height:"40px",objectFit:"contain"},onClick:()=>w("/sessions")}),i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsx("h1",{className:"text-2xl font-bold text-[#2d4660] md:text-3xl",children:ji(l.endDate)?"Final Voting Results":"Current Voting Results"}),m&&i.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:[m.name,wb(f,p,v,x)]})]})]}),i.jsxs("div",{ref:_,className:"relative z-40",children:[i.jsxs("div",{className:"hidden md:flex space-x-2",children:[i.jsxs(_t,{variant:"primary",onClick:n,className:"flex items-center",children:[i.jsx(ma,{className:"mr-2 h-4 w-4"}),"Admin Dashboard"]}),i.jsx(_t,{variant:"danger",onClick:r,children:"Reset All Votes"}),i.jsxs("button",{onClick:d,className:`flex items-center justify-center bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-colors ${x==="stakeholder"?"px-4 py-2":"p-2 w-10 h-10"}`,title:"Logout",children:[i.jsx(Ma,{className:"h-4 w-4"}),x==="stakeholder"&&i.jsx("span",{className:"ml-2",children:"Logout"})]})]}),i.jsx("div",{className:"flex md:hidden",children:i.jsx("button",{onClick:()=>b(!k),className:"p-2 rounded-md border border-gray-200 bg-white shadow-sm","aria-label":"Open menu",children:i.jsx(ki,{className:"h-5 w-5 text-gray-700"})})}),k&&i.jsx("div",{className:"absolute right-0 mt-2 w-56 bg-white border border-gray-200 rounded-lg shadow-lg md:hidden z-50",children:i.jsxs("div",{className:"py-1",children:[i.jsxs("button",{onClick:()=>{b(!1),n()},className:"w-full px-3 py-2 flex items-center text-left hover:bg-gray-50",children:[i.jsx(ma,{className:"h-4 w-4 mr-2 text-gray-700"}),"Admin Dashboard"]}),i.jsxs("button",{onClick:()=>{b(!1),r()},className:"w-full px-3 py-2 flex items-center text-left hover:bg-gray-50 text-red-600",children:[i.jsx(Qo,{className:"h-4 w-4 mr-2"}),"Reset All Votes"]}),i.jsxs("button",{onClick:()=>{b(!1),d()},className:`w-full px-3 py-2 flex items-center hover:bg-gray-50 ${x==="stakeholder"?"text-left":"justify-center"}`,title:"Logout",children:[i.jsx(Ma,{className:"h-4 w-4 text-gray-700"}),x==="stakeholder"&&i.jsx("span",{className:"ml-2 text-base text-gray-700",children:"Logout"})]})]})})]})]}),i.jsxs("div",{className:"relative z-10 mb-6",children:[i.jsxs("div",{className:"flex items-center justify-between mb-4",children:[i.jsx("div",{children:i.jsxs("h2",{className:"text-xl font-semibold text-[#2D4660]",children:["Current Session: ",l.product_name&&i.jsxs("span",{className:"text-[#1E5461]",children:[l.product_name," - "]}),i.jsx("span",{className:"text-[#1E5461]",children:l.title})]})}),l.isActive&&i.jsx("div",{className:`${bb(T)} relative z-10 rounded-md p-3 inline-block border ${T<=2?"border-[#6A4234]/20":T<=4?"border-[#C89212]/20":"border-[#1E5461]/20"}`,children:i.jsxs("div",{className:"flex items-center justify-between gap-4",children:[i.jsxs("div",{className:"flex items-center",children:[i.jsx(Si,{className:`h-4 w-4 mr-2 ${P}`}),i.jsx("span",{className:`${P} font-medium`,children:T<=0?"Voting ends today!":`${T} ${T===1?"day":"days"} remaining until ${Os(l.endDate)}`})]}),i.jsx("span",{className:`${P} font-medium`,children:"Voting Active"})]})})]}),i.jsx("div",{className:"text-sm text-gray-600 mb-4",children:i.jsxs("span",{children:["Votes per user: ",u]})}),i.jsx("div",{className:"h-72",children:i.jsx(rB,{width:"100%",height:"100%",children:i.jsxs(GQ,{data:C,margin:{top:20,right:30,left:20,bottom:60},children:[i.jsx(T4,{dataKey:"name",angle:-45,textAnchor:"end",height:80,tick:{fontSize:12}}),i.jsx(I4,{}),i.jsx(TK,{}),i.jsx(C4,{dataKey:"votes",fill:"#3B82F6",children:C.map((A,M)=>i.jsx(db,{fill:M%2===0?"#2d4660":"#4f6d8e"},`cell-${M}`))})]})})})]}),i.jsxs("div",{className:"relative z-10 bg-white rounded-lg shadow-md p-4",children:[i.jsx("h2",{className:"text-xl font-semibold mb-4 text-[#2d4660]",children:"Feature Details"}),i.jsx("div",{className:"w-full overflow-x-auto",children:i.jsxs("table",{className:"min-w-full divide-y divide-gray-200 table-fixed",children:[i.jsx("thead",{className:"bg-gray-50",children:i.jsxs("tr",{children:[i.jsx("th",{scope:"col",className:"w-12 px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Rank"}),i.jsx("th",{scope:"col",className:"w-1/2 px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Title"}),i.jsx("th",{scope:"col",className:"hidden sm:table-cell px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Epic"}),i.jsx("th",{scope:"col",className:"w-14 px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Votes"}),i.jsx("th",{scope:"col",className:"hidden md:table-cell w-20 px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Voters"}),i.jsx("th",{scope:"col",className:"w-20 px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),i.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:N.map((A,M)=>i.jsxs("tr",{className:"align-top group",children:[i.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm font-medium",children:M+1}),i.jsx("td",{className:"px-4 py-4 whitespace-normal break-words text-sm font-medium",children:A.title}),i.jsx("td",{className:`hidden sm:table-cell px-4 py-4 text-sm ${A.epic||A.workItemType&&A.workItemType.toLowerCase()==="epic"?"w-64":"w-32"}`,children:A.workItemType&&A.workItemType.toLowerCase()==="epic"?i.jsx("span",{className:"text-xs text-gray-600 italic",children:"This Work Item is an Epic"}):A.epic?i.jsx(ql,{name:A.epic,epicId:A.epicId,description:A.description}):null}),i.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm",children:A.votes}),i.jsx("td",{className:"hidden md:table-cell px-4 py-4 whitespace-nowrap text-sm",children:i.jsxs("button",{onClick:()=>a(A.id),className:"text-[#2d4660] hover:text-[#C89212] flex items-center cursor-pointer",disabled:A.voters.length===0,children:[i.jsx(es,{className:"h-4 w-4 mr-1"}),A.voters.length," ",A.voters.length===1?"user":"users"]})}),i.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm md:opacity-0 md:group-hover:opacity-100 transition-opacity",children:i.jsx("button",{onClick:()=>t(A.id),className:"text-[#591D0F] hover:text-[#492434] cursor-pointer",disabled:A.votes===0,children:"Reset Votes"})})]},A.id))})]})})]}),s&&i.jsx(UZ,{feature:e.find(A=>A.id===s),onClose:()=>a(null)})]})}function WZ({navigate:e,votingSession:t}){return i.jsx("div",{className:"relative z-10 flex flex-col items-center justify-center min-h-[80vh] p-6",children:i.jsxs("div",{className:"relative z-10 w-full max-w-md bg-white rounded-lg shadow-lg p-8 text-center",children:[i.jsx("img",{src:Di,alt:"New Millennium Building Systems Logo",className:"mx-auto mb-6",style:{maxWidth:"200px",height:"auto"}}),i.jsx("div",{className:"w-20 h-20 bg-[#1E5461]/10 rounded-full flex items-center justify-center mx-auto mb-6",children:i.jsx(un,{className:"h-12 w-12 text-[#1E5461]"})}),i.jsx("h1",{className:"text-3xl font-bold text-[#1E5461] mb-4",children:"Thank You!"}),i.jsxs("p",{className:"text-gray-700 text-lg mb-6",children:["Your votes for ",i.jsx("span",{className:"font-semibold",children:t.title})," have been submitted successfully."]}),i.jsx("p",{className:"text-gray-600 mb-8",children:"We appreciate your input in helping prioritize features for our product roadmap."}),i.jsx(_t,{variant:"primary",onClick:()=>e("/sessions"),className:"mx-auto",children:"View All Voting Sessions"})]})})}function jb({currentRole:e="stakeholder",onSelectStakeholder:t,onSelectProductOwner:r,onSelectSystemAdmin:n,showRoleToggle:s=!0,isSessionAdmin:a=!1}){const l=new Date().getFullYear(),u=[];(t||e==="stakeholder")&&u.push({key:"stakeholder",label:"Stakeholder View",icon:i.jsx(es,{className:"h-4 w-4 inline mr-2"}),onClick:t}),(r||e==="product-owner")&&u.push({key:"product-owner",label:"Product Owner",icon:i.jsx(Hr,{className:"h-4 w-4 inline mr-2"}),onClick:r}),!a&&(n||e==="system-admin")&&u.push({key:"system-admin",label:"System Admin",icon:i.jsx(fn,{className:"h-4 w-4 inline mr-2"}),onClick:n});const d=["stakeholder","product-owner","system-admin"];u.sort((f,p)=>{const v=d.indexOf(f.key),x=d.indexOf(p.key);return v-x});const m=s&&u.length>0;return i.jsx("footer",{className:"mt-auto bg-gray-50 border-t border-gray-200",children:i.jsxs("div",{className:"container mx-auto px-4 py-6 max-w-6xl",children:[m&&i.jsx("div",{className:"flex justify-center mb-6",children:i.jsx("div",{className:"inline-flex items-center bg-gray-100 rounded-lg p-1",children:u.map(({key:f,label:p,icon:v,onClick:x})=>{const w=e===f,k=!x;return i.jsxs("button",{onClick:x,disabled:k,className:`px-4 py-2 rounded-md text-sm font-medium transition-colors flex items-center ${w?"bg-white text-[#2d4660] shadow-sm":"text-gray-600 hover:text-gray-900"} ${k&&!w?"opacity-60 cursor-not-allowed":""}`,children:[v,i.jsx("span",{children:p})]},f)})})}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 text-sm text-gray-600",children:[i.jsxs("div",{children:[i.jsx("h3",{className:"font-semibold text-gray-900 mb-2",children:"New Millennium Building Systems"}),i.jsxs("p",{className:"text-xs leading-relaxed",children:["A Steel Dynamics Company",i.jsx("br",{}),"Innovation in structural steel manufacturing"]})]}),i.jsxs("div",{children:[i.jsx("h3",{className:"font-semibold text-gray-900 mb-2",children:"Quick Links"}),i.jsxs("ul",{className:"space-y-1 text-xs",children:[i.jsx("li",{children:i.jsx("a",{href:"https://www.steeldynamics.com",target:"_blank",rel:"noopener noreferrer",className:"hover:text-[#2d4660] transition-colors",children:"Steel Dynamics Inc."})}),i.jsx("li",{children:i.jsx("a",{href:"https://www.newmill.com",target:"_blank",rel:"noopener noreferrer",className:"hover:text-[#2d4660] transition-colors",children:"New Millennium"})})]})]}),i.jsxs("div",{children:[i.jsx("h3",{className:"font-semibold text-gray-900 mb-2",children:"Need Help?"}),i.jsx("p",{className:"text-xs",children:"Contact your Product Owner or Product Owneristrator for assistance with voting."})]})]}),i.jsx("div",{className:"mt-6 pt-6 border-t border-gray-200 text-center text-xs text-gray-500",children:i.jsxs("p",{children:[" ",l," New Millennium Building Systems, LLC. All rights reserved."]})})]})})}function OC({feature:e,onSubmit:t,onCancel:r}){const{register:n,handleSubmit:s,formState:{errors:a}}=Ed({defaultValues:e?{title:e.title,description:e.description,epic:e.epic}:{epic:AC[0]}});return i.jsxs("form",{onSubmit:s(t),children:[i.jsxs("div",{className:"mb-4",children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Title"}),i.jsx("input",{...n("title",{required:"Title is required"}),className:"w-full px-3 py-2 border border-gray-300 rounded-md"}),a.title&&i.jsx("p",{className:"mt-1 text-sm text-red-600",children:a.title.message})]}),i.jsxs("div",{className:"mb-4",children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),i.jsx("textarea",{...n("description",{required:"Description is required"}),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-md"}),a.description&&i.jsx("p",{className:"mt-1 text-sm text-red-600",children:a.description.message})]}),i.jsxs("div",{className:"mb-4",children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Epic"}),i.jsx("select",{...n("epic",{required:"Epic is required"}),className:"w-full px-3 py-2 border border-gray-300 rounded-md bg-white",children:AC.map(l=>i.jsx("option",{value:l,children:l},l))}),a.epic&&i.jsx("p",{className:"mt-1 text-sm text-red-600",children:a.epic.message})]}),i.jsxs("div",{className:"flex justify-end space-x-2 mt-6",children:[i.jsx(_t,{variant:"secondary",type:"button",onClick:r,children:"Cancel"}),i.jsxs(_t,{variant:"primary",type:"submit",children:[e?"Update":"Add"," Feature"]})]})]})}function VZ({currentUser:e,votingSession:t,onChangeVotes:r,onToggleAdmin:n,isAdmin:s,navigate:a,userVotes:l,features:u,isSystemAdmin:d,isSessionAdmin:m,isStakeholder:f,currentRole:p=d?"system-admin":m?"product-owner":"stakeholder"}){const[v,x]=y.useState(!1),w=Object.values(l).reduce((b,_)=>b+_,0),k=u.filter(b=>l[b.id]>0);return i.jsxs("div",{className:"container mx-auto p-4 max-w-6xl min-h-screen pb-8",children:[i.jsx("div",{className:"hidden md:flex md:justify-center mb-2",children:i.jsx("img",{src:Di,alt:"New Millennium Building Systems Logo",className:"-mt-4 cursor-pointer hover:opacity-80 transition-opacity",style:{height:"96px",width:"auto"},onClick:()=>a("/sessions")})}),i.jsxs("div",{className:"flex flex-col md:flex-row md:justify-between md:items-center mb-6",children:[i.jsxs("div",{className:"flex items-start md:items-center",children:[i.jsx(Tp,{src:Zl,alt:"New Millennium Building Systems Logo",className:"mr-4 md:hidden",style:{width:"40px",height:"40px",objectFit:"contain"}}),i.jsxs("div",{children:[i.jsx("h1",{className:"text-2xl font-bold text-[#2d4660] md:text-3xl",children:"Feature Voting"}),i.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:["Welcome, ",e==null?void 0:e.name,wb(d,m,f,p)]})]})]}),i.jsxs("div",{className:"relative z-10 flex items-center space-x-2 mt-3 md:mt-0 md:justify-end",children:[s&&i.jsxs(_t,{variant:"primary",onClick:n,className:"flex items-center",children:[i.jsx(ma,{className:"mr-2 h-4 w-4"}),i.jsx("span",{className:"hidden md:inline",children:"Admin Dashboard"}),i.jsx("span",{className:"md:hidden",children:"Admin"})]}),i.jsxs(_t,{variant:"gray",onClick:()=>a("/sessions"),className:"flex items-center",children:[i.jsx(Ma,{className:"mr-2 h-4 w-4"}),i.jsx("span",{className:"hidden md:inline",children:"All Sessions"}),i.jsx("span",{className:"md:hidden",children:"Sessions"})]})]})]}),i.jsx("div",{className:"max-w-3xl mx-auto",children:i.jsxs("div",{className:"relative z-10 bg-white rounded-lg shadow-lg p-8 text-center",children:[i.jsx("div",{className:"w-20 h-20 bg-[#1E5461]/10 rounded-full flex items-center justify-center mx-auto mb-6",children:i.jsx(un,{className:"h-12 w-12 text-[#1E5461]"})}),i.jsx("h2",{className:"text-3xl font-bold text-[#1E5461] mb-4",children:"Votes Already Submitted"}),i.jsxs("p",{className:"text-gray-700 text-lg mb-2",children:["Welcome back, ",i.jsx("span",{className:"font-semibold",children:e.name}),"!"]}),i.jsxs("p",{className:"text-gray-600 mb-6",children:["You have already submitted your votes for ",i.jsx("span",{className:"font-semibold",children:t.title}),"."]}),i.jsxs("div",{className:"bg-gray-50 rounded-lg p-6 mb-6",children:[i.jsx("h3",{className:"text-lg font-semibold text-[#2d4660] mb-4",children:"Your Current Votes"}),i.jsxs("div",{className:"space-y-3",children:[k.map(b=>i.jsxs("div",{className:"flex justify-between items-start gap-4",children:[i.jsxs("div",{children:[i.jsx("span",{className:"block text-gray-700 font-medium",children:b.title}),b.epic&&i.jsx("div",{className:"mt-1",children:i.jsx(ql,{name:b.epic,truncateAt:null,className:"text-xs bg-[#1E5461]/10 px-2 py-0.5 rounded"})})]}),i.jsxs("span",{className:"bg-[#1E5461]/10 text-[#1E5461] rounded-full px-3 py-1 font-medium self-center",children:[l[b.id]," ",l[b.id]===1?"vote":"votes"]})]},b.id)),i.jsx("div",{className:"border-t border-gray-200 pt-3 mt-3",children:i.jsxs("div",{className:"flex justify-between items-center font-semibold",children:[i.jsx("span",{className:"text-[#2d4660]",children:"Total Votes"}),i.jsx("span",{className:"text-[#2d4660]",children:w})]})})]})]}),i.jsx("div",{className:"bg-[#C89212]/10 border border-[#C89212]/20 rounded-lg p-4 mb-6",children:i.jsxs("div",{className:"flex items-start text-left",children:[i.jsx(TF,{className:"h-5 w-5 text-[#C89212] mr-3 mt-0.5 flex-shrink-0"}),i.jsx("div",{children:i.jsxs("p",{className:"text-sm text-gray-700",children:["If you'd like to change your votes, you can do so below. However, please note that this will",i.jsx("span",{className:"font-semibold",children:" permanently remove your previous votes"})," and allow you to vote again. This action cannot be undone."]})})]})}),i.jsxs(_t,{variant:"gold",onClick:()=>x(!0),className:"mx-auto text-lg py-3 px-8",children:[i.jsx(Xo,{className:"mr-2 h-5 w-5"}),"Change My Votes"]})]})}),i.jsx(Dh,{show:v,title:"Change Your Votes?",message:"This will permanently remove all your previous votes for this session and allow you to vote again. This action cannot be undone. Are you sure you want to continue?",onConfirm:r,onCancel:()=>x(!1),confirmText:"Yes, Change My Votes",cancelText:"Cancel",type:"reset"})]})}const TC=It.memo(function({features:t,currentUser:r,pendingVotes:n,pendingUsedVotes:s,onVote:a,onSubmitVotes:l,onToggleAdmin:u,isAdmin:d,votingSession:m,navigate:f,effectiveVotesPerUser:p,sessionId:v,onLogout:x,onSuggestionSubmitted:w,isSystemAdmin:k,isSessionAdmin:b,isStakeholder:_,currentRole:N=k?"system-admin":b?"product-owner":"stakeholder"}){const[C,T]=y.useState([...t]),[P,A]=y.useState(!1),[M,R]=y.useState("idle"),[K,B]=y.useState(!1),[ie,G]=y.useState({}),[ne,W]=y.useState(!0),[q,ve]=y.useState(!1),[$,H]=y.useState(!1),[ce,le]=y.useState(""),[U,te]=y.useState(""),[he,$e]=y.useState(""),[Pe,ke]=y.useState(""),[De,He]=y.useState(!1),[Y,ge]=y.useState(null),[oe,se]=y.useState(!1),[Be,Xe]=y.useState(!1),[mt,zt]=y.useState([]),[Qe,nt]=y.useState([]),[Vt,F]=y.useState(null),L=y.useRef(null),V=y.useRef(null);y.useEffect(()=>{if(!q)return;const ze=Ye=>{V.current&&!V.current.contains(Ye.target)&&ve(!1)};return document.addEventListener("mousedown",ze),document.addEventListener("touchstart",ze,{passive:!0}),()=>{document.removeEventListener("mousedown",ze),document.removeEventListener("touchstart",ze)}},[q]),y.useEffect(()=>{T([...t])},[t]),y.useEffect(()=>{async function ze(){if(!r||!v){W(!1);return}try{const it=(await Uo(v)).filter(bt=>bt.user_id===r.id);if(it.length>0){const bt={};it.forEach(jt=>{bt[jt.feature_id]=jt.vote_count}),G(bt),B(!0)}else B(!1),G({})}catch(Ye){console.error("Error checking existing votes:",Ye),B(!1)}finally{W(!1)}}ze()},[r,v]);const Se=y.useCallback(async()=>{if(!(!r||!v))try{await v5(v,r.id),B(!1),G({})}catch(ze){console.error("Error changing votes:",ze),alert("Failed to reset votes. Please try again.")}},[r,v]),we=y.useCallback(()=>{P||(A(!0),R("fadeOut"),setTimeout(()=>{R("rearranging"),setTimeout(()=>{T($Z(t)),R("fadeIn"),setTimeout(()=>{R("idle"),A(!1)},400)},200)},400))},[t,P]),Ae=y.useCallback(async ze=>{const Ye=t.find(it=>it.id===ze);if(!(!Ye||!r||!v))try{const it=Ee.supabaseUrl,bt=Ee.supabaseKey,jt=await fetch(`${it}/functions/v1/create-info-request`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${bt}`},body:JSON.stringify({session_id:v,feature_id:ze,feature_title:Ye.title,requester_id:r.id,requester_name:r.name||"",requester_email:r.email||"",session_name:m.title,feature_description:Ye.description})});if(!jt.ok){const Jt=await jt.json().catch(()=>({error:"Unknown error"}));throw new Error(Jt.error||`HTTP ${jt.status}`)}const Yt=await jt.json();if(console.log("Info request created successfully:",Yt),Yt.adminEmails&&Yt.adminEmails.length>0&&Yt.emailContent){const Jt=window.location.pathname.startsWith("/feature-voting-app")?"/feature-voting-app":"",rr=`${window.location.origin}${Jt}/admin?session=${Yt.emailContent.sessionId}&feature=${Yt.emailContent.featureId}`,or=Yt.emailContent.html.replace("{{ADMIN_DASHBOARD_URL}}",rr),ur=Yt.emailContent.text.replace("{{ADMIN_DASHBOARD_URL}}",rr),Nt=Yt.adminEmails.map(Kt=>Jc({to:Kt,subject:Yt.emailContent.subject,html:or,text:ur}).catch(nr=>(console.error(`Failed to send email to ${Kt}:`,nr),null)));await Promise.all(Nt),console.log(`Emails sent to ${Yt.adminEmails.length} Product Owner(s)`)}}catch(it){console.error("Error submitting info request:",it);const bt=(it==null?void 0:it.message)||(it==null?void 0:it.toString())||"Unknown error";throw console.error("Full error details:",it),alert(`Failed to submit request: ${bt}. Please try again.`),it}},[t,r,v,m]),Ke=y.useCallback(()=>{ge(null),se(!1),H(!0)},[]),wt=y.useCallback(()=>{De||(Qe.forEach(ze=>{ze&&URL.revokeObjectURL(ze)}),H(!1),ge(null),se(!1),le(""),te(""),$e(""),ke(""),zt([]),nt([]),L.current&&(L.current.value=""))},[De,Qe]),vt=y.useCallback(ze=>{const Ye=Array.from(ze.target.files||[]),it=[],bt=[],jt=["image/jpeg","image/jpg","image/png","image/gif","image/webp","application/pdf"];Ye.forEach(or=>{jt.includes(or.type)&&(it.push(or),or.type.startsWith("image/")?bt.push(URL.createObjectURL(or)):bt.push(""))});const Yt=3-mt.length,Jt=it.slice(0,Yt),rr=bt.slice(0,Yt);zt(or=>[...or,...Jt]),nt(or=>[...or,...rr]),L.current&&(L.current.value="")},[mt]),We=y.useCallback(ze=>{zt(Ye=>{const it=Ye[ze];return it&&it.type.startsWith("image/")?nt(bt=>{const jt=bt[ze];return jt&&URL.revokeObjectURL(jt),bt.filter((Yt,Jt)=>Jt!==ze)}):nt(bt=>bt.filter((jt,Yt)=>Yt!==ze)),Ye.filter((bt,jt)=>jt!==ze)})},[]);y.useEffect(()=>()=>{Qe.forEach(ze=>{ze&&URL.revokeObjectURL(ze)})},[Qe]);const Oe=y.useCallback(async ze=>{var Yt,Jt;ze.preventDefault();const Ye=ce.trim(),it=U.trim(),bt=he.trim(),jt=Pe.trim();if(!Ye){ge("Please provide a brief title for your suggestion.");return}if(!v){ge("Unable to link this suggestion to the current session.");return}try{He(!0),ge(null);const rr=[];if(mt.length>0)for(let ur=0;ur<mt.length;ur++){const Nt=mt[ur],Kt=Nt.name.split(".").pop(),nr=`${Date.now()}-${ur}.${Kt}`,mr=`suggestions/${v}/${nr}`;try{const{data:Ur,error:Sr}=await Ee.storage.from("feature-attachments").upload(mr,Nt,{cacheControl:"3600",upsert:!1});if(Sr)console.error("Error uploading file:",Sr),((Yt=Sr.message)!=null&&Yt.includes("Bucket not found")||(Jt=Sr.message)!=null&&Jt.includes("not found"))&&console.warn('Storage bucket "feature-attachments" not found. Please create it in Supabase Storage.');else{const{data:{publicUrl:jr}}=Ee.storage.from("feature-attachments").getPublicUrl(mr);rr.push(jr)}}catch(Ur){console.error("Error uploading file:",Ur)}}const or=await k5({session_id:v,title:Ye,description:it||null,requester_id:(r==null?void 0:r.id)??null,requester_name:(r==null?void 0:r.name)??null,requester_email:(r==null?void 0:r.email)??null,whatWouldItDo:bt||null,howWouldItWork:jt||null,attachment_urls:rr.length>0?rr:null});try{const Nt=(await Wm(v)).map(Kt=>{var nr;return(nr=Kt.user)==null?void 0:nr.email}).filter(Kt=>!!Kt);if(Nt.length>0){const Kt=(m==null?void 0:m.title)||"this session",nr=(r==null?void 0:r.name)||"A user",mr=(r==null?void 0:r.email)||"",Ur="https://dcchoffman.github.io/feature-voting-app/New-Millennium-color-logo1.png",Sr=window.location.pathname.startsWith("/feature-voting-app")?"/feature-voting-app":"",jr=`${window.location.origin}${Sr}/admin`,sn=fr=>fr.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;"),Vn=fr=>sn(fr).replace(/\n/g,"<br />"),wn=`
<table width="100%" cellpadding="0" cellspacing="0" border="0" style="background-color: #f9fafb; font-family: Arial, sans-serif;">
  <tr>
    <td align="center" style="padding: 48px 20px;">
      <table width="600" cellpadding="0" cellspacing="0" border="0" style="background-color: #ffffff; border-radius: 8px; box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);">
        <!-- Logo Header -->
        <tr>
          <td style="background-color: #ffffff; padding: 32px 40px 24px 40px; text-align: center;">
            <img src="${Ur}" alt="New Millennium Building Systems" width="300" height="96" style="height: 96px; width: auto; max-width: 300px; display: block; margin: 0 auto; border: 0;" />
            <div style="font-size: 20px; font-weight: bold; color: #2d4660; margin-top: 16px;">Feature Voting System</div>
            <div style="font-size: 11px; color: #6b7280; margin-top: 4px;">has a</div>
            <div style="font-size: 25px; font-weight: bold; color: #2d4660; margin-top: 4px;">New Feature Suggestion</div>
            <div style="font-size: 11px; color: #6b7280; margin-top: 4px;">for the</div>
            <div style="font-size: 30px; font-weight: bold; color: #2d4660; margin-top: 4px;">${sn(Kt)}</div>
          </td>
        </tr>
        
        <!-- Main Content -->
        <tr>
          <td style="background-color: #ffffff; padding: 40px;">
            <p style="margin: 0 0 16px 0; font-size: 16px; color: #333; line-height: 1.6;">
              <strong style="color: #2d4660;">${sn(nr)}</strong>${mr?` (${sn(mr)})`:""} has submitted a new feature suggestion.
            </p>
            
            <!-- Suggestion Details Box -->
            <div style="background-color: #f3f4f6; padding: 20px; border-radius: 6px; margin: 24px 0; border-left: 4px solid #C89212;">
              <h3 style="color: #2d4660; margin: 0 0 16px 0; font-size: 18px; font-weight: bold;">${sn(Ye)}</h3>
              
              ${it?`
              <p style="margin: 0 0 12px 0; font-size: 14px; color: #111827; line-height: 1.6;">
                <strong style="color: #2d4660;">Problem it solves:</strong><br />
                <span style="color: #374151;">${Vn(it)}</span>
              </p>
              `:""}
              
              ${bt?`
              <p style="margin: 0 0 12px 0; font-size: 14px; color: #111827; line-height: 1.6;">
                <strong style="color: #2d4660;">What it would do:</strong><br />
                <span style="color: #374151;">${Vn(bt)}</span>
              </p>
              `:""}
              
              ${jt?`
              <p style="margin: 0 0 12px 0; font-size: 14px; color: #111827; line-height: 1.6;">
                <strong style="color: #2d4660;">How it would work:</strong><br />
                <span style="color: #374151;">${Vn(jt)}</span>
              </p>
              `:""}
              
              ${rr.length>0?`
              <p style="margin: 12px 0 0 0; font-size: 14px; color: #111827; line-height: 1.6;">
                <strong style="color: #2d4660;">Attachments:</strong> ${rr.length} file(s) - View on admin page
              </p>
              `:""}
            </div>
            
            <!-- Go to Admin Dashboard Button -->
            <table width="100%" cellpadding="0" cellspacing="0" border="0" style="margin: 32px 0;">
              <tr>
                <td align="center">
                  <a href="${jr}" style="display: inline-block; padding: 12px 24px; background-color: #C89212; color: white; text-decoration: none; border-radius: 6px; font-weight: 600; font-size: 16px; box-shadow: 0 1px 2px 0 rgba(0, 0, 0, 0.05);">Go to Admin Dashboard</a>
                </td>
              </tr>
            </table>
            
            <p style="margin: 24px 0 0 0; font-size: 14px; color: #6b7280; line-height: 1.6;">
              You can review and manage this suggestion from the admin dashboard.
            </p>
          </td>
        </tr>
        
        <!-- Footer -->
        <tr>
          <td style="background-color: #f9fafb; padding: 20px; text-align: center; border-top: 1px solid #e5e7eb; font-size: 12px; color: #6b7280;">
            <p style="margin: 0 0 8px 0;">This is an automated message from the Feature Voting System.</p>
            <p style="margin: 0; color: #9ca3af;"> ${new Date().getFullYear()} New Millennium Building Systems</p>
          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>`;await Promise.all(Nt.map(fr=>Jc({to:fr,subject:`New Feature Suggestion: ${Ye}`,html:wn}).catch(pr=>{console.error(`Failed to send email to ${fr}:`,pr)})))}}catch(ur){console.error("Error sending admin emails:",ur)}w==null||w(or),H(!1),le(""),te(""),$e(""),ke(""),zt([]),nt([]),L.current&&(L.current.value=""),Xe(!0)}catch(rr){console.error("Error submitting feature suggestion:",rr),ge("We were unable to submit your suggestion. Please try again in a moment.")}finally{He(!1)}},[U,ce,he,Pe,mt,r,v,m,w]);if(!r)return null;if(ne)return i.jsx("div",{className:"container mx-auto p-4 max-w-6xl min-h-screen flex items-center justify-center",children:i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-[#2d4660] mx-auto mb-4"}),i.jsx("p",{className:"text-gray-600",children:"Loading your voting status..."})]})});if(K)return i.jsx(VZ,{currentUser:r,votingSession:m,onChangeVotes:Se,onToggleAdmin:u,isAdmin:d,navigate:f,userVotes:ie,features:t,isSystemAdmin:k,isSessionAdmin:b,isStakeholder:_,currentRole:N});const dt=p-s,Qt=dt===0,Dt=m.isActive;return i.jsxs("div",{className:"container mx-auto p-4 max-w-6xl pb-8",children:[i.jsx("div",{className:"hidden md:flex md:justify-center mb-2",children:i.jsx("img",{src:Di,alt:"New Millennium Building Systems Logo",className:"-mt-4 cursor-pointer hover:opacity-80 transition-opacity",style:{height:"96px",width:"auto"},onClick:()=>f("/sessions")})}),i.jsxs("div",{className:"flex justify-between items-start md:items-center mb-6",children:[i.jsxs("div",{className:"flex items-start md:items-center",children:[i.jsx(Tp,{src:Zl,alt:"New Millennium Building Systems Logo",className:"mr-4 md:hidden",style:{width:"40px",height:"40px",objectFit:"contain"}}),i.jsxs("div",{children:[i.jsx("h1",{className:"text-2xl font-bold text-[#2d4660] md:text-3xl",children:"Feature Voting"}),i.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:["Welcome, ",r==null?void 0:r.name,wb(k,b,_,N)]})]})]}),i.jsxs("div",{ref:V,className:"relative z-40 flex items-start md:items-center",children:[i.jsxs("div",{className:"hidden md:flex items-center space-x-2",children:[d&&i.jsxs(_t,{variant:"primary",onClick:u,className:"flex items-center",children:[i.jsx(ma,{className:"mr-2 h-4 w-4"}),"Admin Dashboard"]}),i.jsx(_t,{variant:"gray",onClick:()=>f("/sessions"),className:"flex items-center",children:"All Sessions"}),i.jsxs("button",{onClick:x,className:`flex items-center justify-center bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-colors ${N==="stakeholder"?"px-4 py-2":"p-2 w-10 h-10"}`,title:"Logout",children:[i.jsx(Ma,{className:"h-4 w-4"}),N==="stakeholder"&&i.jsx("span",{className:"ml-2",children:"Logout"})]})]}),i.jsx("div",{className:"flex md:hidden",children:i.jsx("button",{onClick:()=>ve(!q),className:"p-2 rounded-md border border-gray-200 bg-white shadow-sm","aria-label":"Open menu",children:i.jsx(ki,{className:"h-5 w-5 text-gray-700"})})}),q&&i.jsx("div",{className:"absolute right-0 mt-2 w-56 bg-white border border-gray-200 rounded-lg shadow-lg md:hidden z-50",children:i.jsxs("div",{className:"py-1",children:[d&&i.jsxs("button",{onClick:()=>{ve(!1),u()},className:"w-full px-3 py-2 flex items-center text-left hover:bg-gray-50",children:[i.jsx(ma,{className:"h-4 w-4 mr-2 text-gray-700"}),"Admin Dashboard"]}),i.jsx("button",{onClick:()=>{ve(!1),f("/sessions")},className:"w-full px-3 py-2 flex items-center text-left hover:bg-gray-50",children:"All Sessions"}),i.jsxs("button",{onClick:()=>{ve(!1),x()},className:`w-full px-3 py-2 flex items-center hover:bg-gray-50 ${N==="stakeholder"?"text-left":"justify-center"}`,title:"Logout",children:[i.jsx(Ma,{className:"h-4 w-4 text-gray-700"}),N==="stakeholder"&&i.jsx("span",{className:"ml-2 text-base text-gray-700",children:"Logout"})]})]})})]})]}),i.jsxs("div",{className:"relative z-10 mb-6",children:[i.jsx("div",{className:"flex items-center justify-between mb-4",children:i.jsx("div",{children:i.jsxs("h2",{className:"text-xl font-semibold text-[#2D4660]",children:["Current Session: ",m.product_name&&i.jsxs("span",{className:"text-[#1E5461]",children:[m.product_name," - "]}),i.jsx("span",{className:"text-[#1E5461]",children:m.title})]})})}),m.goal&&m.goal.trim()&&i.jsx("div",{className:"pt-3 mb-4",children:i.jsxs("div",{className:"relative overflow-hidden rounded-2xl border border-[#C89212]/30 bg-gradient-to-r from-[#FFF6E3] via-[#FFF9ED] to-white shadow-sm p-5 md:p-6",children:[i.jsx("span",{className:"pointer-events-none absolute -top-10 left-4 h-32 w-32 rounded-full bg-[#C89212]/25 blur-3xl"}),i.jsx("span",{className:"pointer-events-none absolute -bottom-16 right-6 h-40 w-40 rounded-full bg-[#F4C66C]/20 blur-3xl"}),i.jsx("span",{className:"pointer-events-none absolute top-6 right-10 text-[#F4B400] text-xl animate-ping",children:""}),i.jsx("span",{className:"pointer-events-none absolute bottom-8 left-10 text-[#C89212] text-lg animate-pulse",children:""}),i.jsx("div",{className:"relative flex flex-col gap-6 md:flex-row md:items-start md:justify-between",children:i.jsxs("div",{className:"flex items-start gap-5 md:pr-8 lg:pr-12",children:[i.jsxs("div",{className:"relative",children:[i.jsx("div",{className:"h-16 w-16 md:h-20 md:w-20 rounded-full bg-white shadow-lg shadow-[#C89212]/30 border border-[#C89212]/40 flex items-center justify-center text-[#C89212]",children:i.jsx(Jm,{className:"h-8 w-8 md:h-10 md:w-10"})}),i.jsx("span",{className:"pointer-events-none absolute -top-3 -left-2 text-[#C89212] text-base animate-ping",children:""}),i.jsx("span",{className:"pointer-events-none absolute bottom-0 -right-3 text-[#F5D79E] text-xl animate-pulse",children:""})]}),i.jsxs("div",{children:[i.jsx("p",{className:"text-xs font-semibold uppercase tracking-[0.2em] text-[#C89212]/80 mb-1",children:"Session Goal"}),i.jsx("h3",{className:"text-lg md:text-xl font-semibold text-[#2D4660] leading-relaxed",children:m.goal})]})]})})]})}),(()=>{const ze=$m(m.endDate),Ye=Rm(ze),it=bb(ze);return i.jsx("div",{className:`${it} rounded-md p-3 md:p-4 border ${ze<=2?"border-[#6A4234]/20":ze<=4?"border-[#C89212]/20":"border-[#1E5461]/20"}`,children:i.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-3 md:gap-4",children:[i.jsxs("div",{className:"flex items-center flex-shrink-0",children:[i.jsx(Si,{className:`h-5 w-5 mr-2 ${Ye}`}),i.jsxs("div",{className:"leading-tight",style:{marginTop:"10px"},children:[i.jsxs("span",{className:`font-medium ${Ye}`,children:["Voting ends: ",Os(m.endDate)]}),i.jsx("div",{className:"text-sm -mt-0.5",style:{marginLeft:"100px",marginTop:"-6px"},children:ze<=0?i.jsx("span",{className:"text-red-600 font-medium",children:"Voting ends today!"}):i.jsxs("span",{className:`${Ye}`,children:[i.jsx("span",{className:"font-semibold text-lg",children:ze})," ",ze===1?"day":"days"," remaining"]})})]})]}),i.jsx("div",{className:"flex items-center justify-center md:justify-end flex-1 min-w-0",children:i.jsx("div",{className:"leading-tight",children:i.jsxs("div",{className:"flex items-center justify-center md:justify-start",children:[i.jsx(gn,{className:`h-[30px] w-[30px] mr-2 ${Ye}`}),i.jsxs("div",{className:"text-sm -mt-0.5 leading-none",children:[i.jsxs("div",{className:"flex items-baseline justify-center md:justify-start",style:{marginRight:"60px"},children:[i.jsx("span",{className:`${Ye} mr-1`,style:{fontSize:"14px"},children:"You have"}),i.jsx("span",{className:`${Ye} font-semibold text-2xl`,children:dt}),i.jsxs("span",{className:`${Ye} font-semibold text-lg ml-1`,children:["/ ",p]})]}),i.jsx("span",{className:`${Ye} block -mt-0.5 text-center`,style:{fontSize:"14px"},children:"votes remaining"})]})]})})})]})})})()]}),!Dt&&i.jsx("div",{className:"mb-6 bg-[#C89212]/10 p-4 rounded-lg border border-[#C89212]/20",children:i.jsxs("div",{className:"flex items-center text-[#6A4234]",children:[i.jsx(Lx,{className:"h-5 w-5 mr-2"}),i.jsxs("span",{className:"font-medium",children:["Voting is currently ",ji(m.endDate)?"closed":"not yet open",".",ji(m.endDate)?` Voting ended on ${Os(m.endDate)}.`:` Voting will open on ${Os(m.startDate)}.`]})]})}),i.jsxs("div",{className:"flex flex-col md:flex-row md:justify-between md:items-center mb-4 gap-3",children:[i.jsx("h2",{className:"text-xl font-semibold text-[#2d4660]",children:"Available Features"}),i.jsxs("div",{className:"flex flex-col md:flex-row items-stretch md:items-center gap-3",children:[i.jsxs(_t,{variant:"gold",onClick:Ke,className:"flex items-center justify-center w-full md:w-auto",children:[i.jsx(Gm,{className:"h-4 w-4 mr-2"}),"Suggest a Feature"]}),t.length>6&&i.jsx(LZ,{isShuffling:P,onShuffle:we})]})]}),i.jsx("div",{className:`grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 ${s>0?"mb-32":""}`,children:C.map(ze=>{const Ye=n[ze.id]||0;return i.jsx(zZ,{feature:ze,userVoteCount:Ye,remainingVotes:dt,votingIsActive:Dt,onVote:a,isShuffling:P,shuffleStage:M,currentUser:r,onRequestInfo:Ae,onViewAttachment:F},ze.id)})}),s>0&&(()=>{const ze=$m(m.endDate),Ye=Rm(ze),it=IZ(ze);return i.jsx("div",{className:`fixed bottom-0 left-0 right-0 ${it} rounded-t-md border-t ${ze<=2?"border-[#6A4234]/20":ze<=4?"border-[#C89212]/20":"border-[#1E5461]/20"} p-3 md:p-4 z-50`,children:i.jsxs("div",{className:"container mx-auto max-w-6xl flex items-center justify-center",children:[i.jsx("div",{className:"flex items-center flex-1 min-w-0 justify-center",style:{paddingLeft:"60px",width:"100px"},children:i.jsx("div",{className:"leading-tight w-full",style:{width:"120px"},children:i.jsxs("div",{className:"flex items-center",children:[i.jsx(gn,{className:`h-[30px] w-[30px] mr-2 ${Ye}`,style:{marginLeft:"-88px"}}),i.jsxs("div",{className:"text-sm -mt-0.5 leading-none flex-1",children:[i.jsxs("div",{className:"flex items-baseline justify-center",style:{marginLeft:"-12px"},children:[i.jsx("span",{className:`${Ye} mr-1`,style:{fontSize:"14px",marginLeft:"-48px"},children:"You have"}),i.jsx("span",{className:`${Ye} font-semibold text-2xl`,children:dt}),i.jsxs("span",{className:`${Ye} font-semibold text-lg ml-1`,children:["/ ",p]})]}),i.jsx("span",{className:`${Ye} block -mt-0.5 text-center`,style:{fontSize:"14px"},children:"votes remaining"})]})]})})}),i.jsx("button",{onClick:l,className:`py-3 px-6 rounded-lg font-medium cursor-pointer ${Qt?"bg-[#1E5461] hover:bg-[#173B65] text-white":"bg-gray-300 text-gray-600 cursor-not-allowed"}`,disabled:!Qt,children:"Submit Votes"})]})})})(),i.jsx(cn,{isOpen:$,onClose:wt,title:"Suggest a Feature",maxWidth:"max-w-lg",children:i.jsxs("form",{onSubmit:Oe,className:"space-y-4",children:[i.jsxs("div",{className:"bg-[#1E5461]/10 border border-[#1E5461]/30 text-sm text-[#1E5461] rounded-md px-3 py-2",children:["All suggested features will be reviewed for ",i.jsx("strong",{children:"future sessions"}),".",i.jsx("br",{}),"Suggestions will not be added to the current session."]}),Y&&i.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 text-sm rounded-md px-3 py-2",children:Y}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Feature title"}),i.jsx("input",{type:"text",value:ce,onChange:ze=>le(ze.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md",placeholder:"Give your feature a name",disabled:De})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"What problem would this solve? (optional)"}),i.jsx("textarea",{value:U,onChange:ze=>te(ze.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md",rows:4,placeholder:"Share a few details so we understand the request.",disabled:De})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"What would it do? (optional)"}),i.jsx("textarea",{value:he,onChange:ze=>$e(ze.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md",rows:3,placeholder:"Describe the functionality or outcome users would experience.",disabled:De})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"How would it work? (optional)"}),i.jsx("textarea",{value:Pe,onChange:ze=>ke(ze.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md",rows:3,placeholder:"Share any ideas on workflow, technical approach, or integration.",disabled:De})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Attach Images or PDFs (optional, up to 3)"}),i.jsx("input",{ref:L,type:"file",accept:"image/*,.pdf",multiple:!0,onChange:vt,disabled:De||mt.length>=3,className:"hidden",id:"suggestion-file-input"}),i.jsxs("label",{htmlFor:"suggestion-file-input",className:`inline-flex items-center px-4 py-2 border border-gray-300 rounded-md cursor-pointer ${De||mt.length>=3?"bg-gray-100 text-gray-400 cursor-not-allowed":"bg-white text-gray-700 hover:bg-gray-50"}`,children:[i.jsx(ys,{className:"h-4 w-4 mr-2"}),mt.length>=3?"Maximum 3 files":"Attach Files"]}),mt.length>0&&i.jsx("div",{className:"mt-3 flex flex-wrap gap-3",children:mt.map((ze,Ye)=>{const it=ze.type.startsWith("image/"),bt=ze.type==="application/pdf",jt=Qe[Ye]||null;return i.jsxs("div",{className:"relative group border border-gray-300 rounded-md overflow-hidden",style:{width:"100px",height:"100px"},children:[it&&jt?i.jsx("img",{src:jt,alt:ze.name,className:"w-full h-full object-cover"}):bt?i.jsx("div",{className:"w-full h-full flex items-center justify-center bg-red-50",children:i.jsx(ys,{className:"h-8 w-8 text-red-600"})}):null,i.jsx("button",{type:"button",onClick:()=>We(Ye),className:"absolute top-1 right-1 bg-red-500 text-white rounded-full p-1 opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center",style:{width:"20px",height:"20px"},"aria-label":`Remove ${ze.name}`,children:i.jsx(ts,{className:"h-3 w-3"})}),i.jsx("div",{className:"absolute bottom-0 left-0 right-0 bg-black bg-opacity-50 text-white text-xs p-1 truncate",children:ze.name.length>15?`${ze.name.substring(0,15)}...`:ze.name})]},Ye)})})]}),i.jsxs("div",{className:"flex justify-end gap-2",children:[i.jsx(_t,{type:"button",variant:"secondary",onClick:wt,disabled:De,children:"Close"}),i.jsxs(_t,{type:"submit",variant:"primary",disabled:De,className:"flex items-center",children:[De&&i.jsx(Xo,{className:"h-4 w-4 animate-spin mr-2"}),"Submit Suggestion"]})]})]})}),i.jsx(cn,{isOpen:Be,onClose:()=>Xe(!1),title:"",maxWidth:"max-w-md",hideHeader:!0,children:i.jsxs("div",{className:"text-center py-6",children:[i.jsx("div",{className:"mx-auto flex items-center justify-center h-16 w-16 rounded-full bg-green-100 mb-4",children:i.jsx(un,{className:"h-10 w-10 text-green-600"})}),i.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Thank You!"}),i.jsx("p",{className:"text-gray-600 mb-1",children:"Your feature suggestion has been submitted successfully."}),i.jsx("p",{className:"text-sm text-gray-500",children:"The Product Owners have been notified and will review your suggestion."})]})}),Vt&&i.jsxs("div",{className:"fixed inset-0 bg-black bg-opacity-90 z-50 flex items-center justify-center p-4",onClick:()=>F(null),children:[i.jsx("button",{onClick:()=>F(null),className:"absolute top-4 right-4 text-white hover:text-gray-300 transition-colors z-10",title:"Close",children:i.jsx(ts,{className:"h-8 w-8"})}),i.jsx("div",{className:"max-w-7xl max-h-full w-full h-full flex items-center justify-center",onClick:ze=>ze.stopPropagation(),children:Vt.match(/\.(jpg|jpeg|png|gif|webp)$/i)?i.jsx("img",{src:Vt,alt:"Attachment",className:"max-w-full max-h-full object-contain"}):Vt.match(/\.pdf$/i)?i.jsx("iframe",{src:Vt,className:"w-full h-full bg-white",title:"PDF Viewer"}):i.jsxs("div",{className:"text-white text-center",children:[i.jsx(ys,{className:"h-16 w-16 mx-auto mb-4"}),i.jsx("p",{className:"mb-4",children:"Unable to preview this file type"}),i.jsx("a",{href:Vt,target:"_blank",rel:"noopener noreferrer",className:"text-[#C89212] hover:text-[#A07810] underline",children:"Open in new tab"})]})})]})]})});function e0({defaultVotesPerUser:e=10,adminMode:t=!1,resultsMode:r=!1}){const{currentSession:n,currentUser:s,setCurrentUser:a,setCurrentSession:l,refreshSessions:u,isSystemAdmin:d,isAdmin:m,isStakeholder:f}=Gl(),p=oi(),[v]=Nx(),x=async()=>{try{await Ee.auth.signOut()}catch{}try{l(null)}catch{}a(null);try{localStorage.removeItem("voting_system_current_session"),localStorage.removeItem("azureDevOpsAuthInProgress"),sessionStorage.removeItem("oauth_return_path"),sessionStorage.removeItem("oauth_action")}catch{}p("/login",{replace:!0})};y.useEffect(()=>{const X=new URLSearchParams(window.location.search),ye=X.has("code")||X.has("error"),Fe=localStorage.getItem("voting_system_current_session");!n&&!ye&&!Fe&&p("/sessions")},[n,p]);const w=y.useMemo(()=>{const X=new URLSearchParams(window.location.search);return X.has("code")||X.has("error")},[]),[k,b]=y.useState([]),[_,N]=y.useState(!0),[C,T]=y.useState(PZ),[P,A]=y.useState(r?"results":t||w?"admin":"voting"),[M,R]=y.useState(t||w||r),[K,B]=y.useState(null),[ie,G]=y.useState(!1),[ne,W]=y.useState(null),[q,ve]=y.useState({...CZ,votesPerUser:e}),[$,H]=y.useState(EZ),[ce,le]=y.useState(SC()),[U,te]=y.useState([]),[he,$e]=y.useState([]),[Pe,ke]=y.useState([]),[De,He]=y.useState(!1),[Y,ge]=y.useState(null),[oe,se]=y.useState(null),[Be,Xe]=y.useState(!1),[mt,zt]=y.useState([]),[Qe,nt]=y.useState([]),[Vt,F]=y.useState(null),L=()=>{const X=v.get("perspective");if(X)return sessionStorage.setItem("adminPerspective",X),X;const ye=sessionStorage.getItem("adminPerspective");if(ye)return ye;const Fe=sessionStorage.getItem("viewMode");return Fe==="system-admin"?(sessionStorage.setItem("adminPerspective","system"),"system"):Fe==="admin"?(sessionStorage.setItem("adminPerspective","session"),"session"):d?"system":"session"},[V,Se]=y.useState(L());y.useEffect(()=>{const X=v.get("perspective");X&&X!==V&&(Se(X),sessionStorage.setItem("adminPerspective",X))},[v,V]);const[we,Ae]=y.useState({}),[Ke,wt]=y.useState(0),[vt,We]=y.useState({showReset:!1,showResetAll:!1,showDeleteSession:!1,targetId:null}),[Oe,dt]=y.useState(!1),Qt=y.useRef(!1),Dt=y.useRef(!1),ze=y.useRef(null),Ye=y.useMemo(()=>q.useAutoVotes?Math.max(1,Math.floor(k.length/2)):q.votesPerUser,[q.useAutoVotes,q.votesPerUser,k.length]),it=y.useRef(!1);y.useEffect(()=>{if(it.current){console.log("OAuth processing already in progress, skipping...");return}(async()=>{const ye=new URLSearchParams(window.location.search),Fe=ye.has("code")||ye.has("error");if(Fe&&!n){console.log("OAuth callback detected, waiting for session to load..."),localStorage.getItem("voting_system_current_session")&&console.log("Found stored session ID, waiting for SessionContext to restore it...");return}if(localStorage.getItem("azureDevOpsAuthInProgress")&&localStorage.removeItem("azureDevOpsAuthInProgress"),!(!Fe||Qt.current)){if(!n){console.log("No session available yet, waiting...");return}it.current=!0,Qt.current=!0,console.log("Processing OAuth callback with session:",n.id);try{const rt=await cZ();if(rt){const Le=new Date(Date.now()+rt.expiresIn*1e3).toISOString(),I={...$,accessToken:rt.accessToken,refreshToken:rt.refreshToken,tokenExpiresAt:Le,enabled:!0,clientId:ga.clientId,tenantId:ga.tenantId};await Lo(n.id,I),H(I);const ae=sessionStorage.getItem("oauth_return_path")||"/admin";sessionStorage.removeItem("oauth_return_path"),console.log("OAuth successful, navigating to:",ae),p(ae,{replace:!0})}}catch(rt){console.error("OAuth callback error:",rt),ge("Failed to authenticate with Azure DevOps");const Le="/admin";sessionStorage.removeItem("oauth_return_path"),p(Le,{replace:!0})}finally{it.current=!1}}})()},[n,p,$]),y.useEffect(()=>{r&&P!=="results"?A("results"):t&&P!=="admin"?A("admin"):!t&&!r&&P==="admin"&&A("voting")},[t,r,P]);const bt=y.useCallback(X=>{localStorage.setItem("azureDevOpsAuthInProgress","true"),X&&sessionStorage.setItem("oauth_action",X),sessionStorage.getItem("oauth_return_path")||sessionStorage.setItem("oauth_return_path","/admin"),uZ()},[]),jt=y.useCallback(async X=>{if(!X.accessToken||!X.refreshToken||!X.tokenExpiresAt)throw new Error("Not authenticated");if(lZ(X.tokenExpiresAt))try{const ye=await eZ(X.refreshToken),Fe=new Date(Date.now()+ye.expiresIn*1e3).toISOString(),Ce={...X,accessToken:ye.accessToken,tokenExpiresAt:Fe};return n&&(await Lo(n.id,Ce),H(Ce)),ye.accessToken}catch(ye){const Fe=ye instanceof Error?ye.message:String(ye);throw(Fe.includes("AADSTS700084")||Fe.includes("refresh token"))&&(console.log("Refresh token expired, redirecting to login..."),n&&await Lo(n.id,{enabled:!1,organization:X.organization,project:X.project,accessToken:null,refreshToken:null,tokenExpiresAt:null}),p("/login")),ye}return X.accessToken},[n,p]),Yt=y.useCallback(async()=>{if(!n)return[];const[X,ye]=await Promise.all([xi(n.id),Uo(n.id)]);return X.map(Ce=>{const Le=ye.filter(Q=>Q.feature_id===Ce.id).map(Q=>({userId:Q.user_id,name:Q.user_name,email:Q.user_email,voteCount:Q.vote_count})),I=Le.reduce((Q,Z)=>Q+Z.voteCount,0);return{id:Ce.id,title:Ce.title,description:Ce.description,epic:Ce.epic||null,epicId:Ce.epic_id||Ce.epicId||null,state:Ce.state,areaPath:Ce.area_path||Ce.areaPath||null,tags:Ce.tags||[],azureDevOpsId:Ce.azure_devops_id||Ce.azureDevOpsId||null,azureDevOpsUrl:Ce.azure_devops_url||Ce.azureDevOpsUrl||null,workItemType:Ce.workItemType||Ce.work_item_type||null,attachmentUrls:Ce.attachmentUrls||Ce.attachment_urls||null,votes:I,voters:Le}})},[n]),Jt=y.useCallback(async()=>{if(n)try{const X=await Sk(n.id);zt(X)}catch(X){console.error("Error loading feature suggestions:",X)}},[n]),rr=y.useCallback(async()=>{if(n)try{const X=await Wd(),ye=new Date,Fe=[];for(const Ce of X)if(!(Ce.id===n.id||new Date(Ce.start_date)<=ye))try{await Bm(Ce.id)&&Fe.push({id:Ce.id,title:Ce.title,startDate:Ce.start_date})}catch{console.warn(`Session ${Ce.id} no longer exists, skipping from future sessions list`)}nt(Fe)}catch(X){console.error("Error loading future sessions:",X),nt([])}},[n]),or=y.useCallback(X=>{zt(ye=>[X,...ye]),Jt(),rr()},[Jt,rr]),ur=y.useCallback(async(X,ye)=>{await S5(X,ye),await Jt()},[Jt]),Nt=y.useCallback(async X=>{await _5(X),await Jt()},[Jt]),Kt=y.useCallback(async(X,ye)=>{await N5(X,ye),await Jt()},[Jt]),nr=y.useCallback(async X=>{await C5(X);const ye=await Yt();b(ye),await Jt()},[Yt,Jt]);y.useEffect(()=>{async function X(){if(n&&!(Dt.current&&ze.current===n.id)){ze.current=n.id,Dt.current=!0;try{N(!0);const[ye,Fe]=await Promise.all([xi(n.id),Uo(n.id)]),Ce=ye.map(Le=>{const ae=Fe.filter(Z=>Z.feature_id===Le.id).map(Z=>({userId:Z.user_id,name:Z.user_name,email:Z.user_email,voteCount:Z.vote_count})),Q=ae.reduce((Z,Ie)=>Z+Ie.voteCount,0);return{id:Le.id,title:Le.title,description:Le.description,epic:Le.epic||null,epicId:Le.epic_id||Le.epicId||null,state:Le.state,areaPath:Le.area_path||Le.areaPath||null,tags:Le.tags||[],azureDevOpsId:Le.azure_devops_id||Le.azureDevOpsId||null,azureDevOpsUrl:Le.azure_devops_url||Le.azureDevOpsUrl||null,workItemType:Le.workItemType||Le.work_item_type||null,attachmentUrls:Le.attachmentUrls||Le.attachment_urls||null,votes:Q,voters:ae}});b(Ce),ve({title:n.title,goal:n.goal,votesPerUser:n.votes_per_user,useAutoVotes:n.use_auto_votes||!1,startDate:n.start_date,endDate:n.end_date,isActive:n.is_active,originalEndDate:n.original_end_date??void 0,endedEarlyBy:n.ended_early_by??void 0,endedEarlyReason:n.ended_early_reason??void 0,endedEarlyDetails:n.ended_early_details??void 0,reopenReason:n.reopen_reason??void 0,reopenDetails:n.reopen_details??void 0,reopenedBy:n.reopened_by??void 0,reopenedAt:n.reopened_at??void 0,productId:n.product_id??null,productName:n.product_name??null,product_id:n.product_id??null,product_name:n.product_name??null});const rt=await w5(n.id);H(rt?{organization:rt.organization||"newmill",project:rt.project||"Product",accessToken:rt.access_token,refreshToken:rt.refresh_token,tokenExpiresAt:rt.token_expires_at,tenantId:rt.tenant_id,clientId:rt.client_id,enabled:rt.enabled,workItemType:rt.work_item_type||"Feature",query:rt.query,lastSyncTime:rt.last_sync_time}:{organization:"newmill",project:"Product",enabled:!1,workItemType:"Feature"});try{const Le=await Sk(n.id);zt(Le)}catch(Le){console.error("Error loading feature suggestions:",Le)}}catch(ye){console.error("Error loading data:",ye),b([])}finally{N(!1),Dt.current=!1}}}X()},[n==null?void 0:n.id]),y.useEffect(()=>{async function X(){const ye=SC(),Fe=$.project;if(le(ye),te([]),$e([]),ke([]),$.enabled&&$.accessToken&&Fe)try{const Ce=await jt($),rt={...$,accessToken:Ce,project:Fe},[Le,I,ae,Q]=await Promise.all([nZ(rt).catch(Z=>(console.error("Error loading Azure DevOps projects:",Z),ye)),wC(rt),vx(rt),bC(rt)]);$.project===Fe&&(le(Le.length>0?Le:ye),te(I),$e(ae),ke(Q))}catch(Ce){console.error("Error loading filter options:",Ce),$.project===Fe&&le(ye)}}X()},[$.enabled,$.accessToken,$.project,jt]);const mr=y.useCallback(async(X,ye)=>{if(!(!$.enabled||!$.accessToken))try{const Fe=await jt($),Ce={...$,accessToken:Fe},rt=X?await H4(Ce,X):await wC(Ce);te(rt)}catch(Fe){console.error("Error loading states for work item type:",Fe)}},[$,jt]),Ur=y.useCallback(async X=>{if(!$.enabled||!$.accessToken)return{types:[],states:[]};try{const ye=await jt($),Fe={...$,accessToken:ye};return await sZ(Fe,X)}catch(ye){return console.error("Error fetching types and states for area path:",ye),{types:[],states:[]}}},[$,jt]),Sr=y.useCallback(async X=>{if(!$.enabled||!$.accessToken)return{types:[],areaPaths:[]};try{const ye=await jt($),Fe={...$,accessToken:ye},Ce=await rZ(Fe,X);return Ce.areaPaths.length>0&&$e(Ce.areaPaths),Ce}catch(ye){return console.error("Error fetching types and area paths for states:",ye),{types:[],areaPaths:[]}}},[$,jt]),jr=y.useCallback(async X=>{if(!$.enabled||!$.accessToken)return{types:[],states:[],areaPaths:[]};try{const ye=await jt($),Fe={...$,accessToken:ye},Ce=await aZ(Fe,X);return Ce.states.length>0&&te(Ce.states),Ce.areaPaths.length>0&&$e(Ce.areaPaths),Ce}catch(ye){return console.error("Error fetching types, states, and area paths for tags:",ye),{types:[],states:[],areaPaths:[]}}},[$,jt]),sn=y.useCallback(async(X,ye=[],Fe=[])=>{if(!(!$.enabled||!$.accessToken))try{const Ce=await jt($),rt={...$,accessToken:Ce},Le=X?await iZ(rt,X,ye,Fe):await bC(rt);ke(Le)}catch(Ce){console.error("Error loading tags for type, state, and area path:",Ce)}},[$,jt]),Vn=y.useCallback(async(X,ye=[])=>{if(!(!$.enabled||!$.accessToken))try{const Fe=await jt($),Ce={...$,accessToken:Fe},rt=X?await tZ(Ce,X,ye):await vx(Ce);$e(rt)}catch(Fe){console.error("Error loading area paths for type and state:",Fe)}},[$,jt]);y.useEffect(()=>{const X=async()=>{const Fe=DZ(q.startDate,q.endDate);if(q.isActive!==Fe){const Ce={...q,isActive:Fe};ve(Ce);try{n!=null&&n.id&&await kk(n.id,{title:Ce.title,goal:Ce.goal,votes_per_user:Ce.votesPerUser,start_date:Ce.startDate,end_date:Ce.endDate,is_active:Ce.isActive})}catch(rt){console.error("Error updating voting session status:",rt)}}};X();const ye=setInterval(X,6e5);return()=>clearInterval(ye)},[q,n==null?void 0:n.id]),y.useEffect(()=>{document.body.style.overflow="",document.body.style.position="",document.body.style.width="",P==="admin"&&(Jt(),rr())},[P,Jt,rr]),y.useEffect(()=>(document.body.style.overflow="",()=>{document.body.style.overflow=""}),[]);const wn=y.useCallback(async(X=$)=>{if(!X.organization||!X.project||!n){ge("Organization and project name are required");return}try{He(!0),ge(null);const ye=await jt(X),Fe={...X,accessToken:ye},Ce=await jC(Fe),rt=kC(Ce);for(const Z of rt){const Tt=(await xi(n.id)).find($t=>$t.azure_devops_id===Z.azureDevOpsId),dr=Sh(Z.description),Ve=pd(dr,300);Tt?await Qu(Tt.id,{title:Z.title,description:Ve,epic:Z.epic||null,epicId:Z.epicId||null,state:Z.state,areaPath:Z.areaPath,tags:Z.tags,azure_devops_id:Z.azureDevOpsId,azure_devops_url:Z.azureDevOpsUrl,workItemType:Z.workItemType||null}):await ih({session_id:n.id,title:Z.title,description:Ve,epic:Z.epic||null,epicId:Z.epicId||null,state:Z.state,areaPath:Z.areaPath,tags:Z.tags,azure_devops_id:Z.azureDevOpsId,azure_devops_url:Z.azureDevOpsUrl,workItemType:Z.workItemType||null})}const Le=await xi(n.id),I=await Uo(n.id),ae=Le.map(Z=>{const Tt=I.filter(Ve=>Ve.feature_id===Z.id).map(Ve=>({userId:Ve.user_id,name:Ve.user_name,email:Ve.user_email,voteCount:Ve.vote_count})),dr=Tt.reduce((Ve,$t)=>Ve+$t.voteCount,0);return{id:Z.id,title:Z.title,description:Z.description,epic:Z.epic||null,epicId:Z.epic_id||Z.epicId||null,state:Z.state,areaPath:Z.area_path||Z.areaPath||null,tags:Z.tags||[],azureDevOpsId:Z.azure_devops_id||Z.azureDevOpsId||null,azureDevOpsUrl:Z.azure_devops_url||Z.azureDevOpsUrl||null,workItemType:Z.workItemType||Z.work_item_type||null,votes:dr,voters:Tt}});b(ae);const Q={...Fe,lastSyncTime:new Date().toISOString()};await Lo(n.id,Q),H(Q)}catch(ye){console.error("Azure DevOps sync error:",ye),ye instanceof Error&&ye.message==="Not authenticated"?(ge("Please authenticate with Azure DevOps"),bt()):ge("Failed to fetch features from Azure DevOps. Please try reconnecting.")}finally{He(!1)}},[$,n,jt,bt]),fr=y.useCallback(async()=>{if(!$.organization||!$.project){ge("Organization and project name are required");return}try{He(!0),ge(null);const X=await jt($),ye={...$,accessToken:X},Fe=await jC(ye),Ce=kC(Fe),Le=(await Promise.all(Ce.map(async I=>{if(I.azureImageUrls&&I.azureImageUrls.length>0)try{const ae=await fZ(I.azureImageUrls,I.id,X);return{...I,attachmentUrls:ae.length>0?ae:void 0,azureImageUrls:void 0}}catch(ae){return console.error("Error uploading Azure images for preview:",I.title,ae),I}return I}))).map(I=>(console.log(`[Preview] Feature ${I.id} "${I.title}": epic="${I.epic}", epicId="${I.epicId}"`),{...I,description:pd(Sh(I.description),300)}));console.log(`[Preview] Setting ${Le.length} preview features`),se(Le),Xe(!0)}catch(X){console.error("Azure DevOps preview error:",X),X instanceof Error&&X.message==="Not authenticated"?(ge("Please authenticate with Azure DevOps"),bt()):ge("Failed to fetch features from Azure DevOps. Please try reconnecting.")}finally{He(!1)}},[$,jt,bt]),pr=y.useCallback(async()=>{if(!(!oe||!n))try{He(!0);const X=await xi(n.id);for(const Le of X)await jk(Le.id);for(const Le of oe){const I=Sh(Le.description),ae=pd(I,300);await ih({session_id:n.id,title:Le.title,description:ae,epic:Le.epic||null,state:Le.state,areaPath:Le.areaPath,tags:Le.tags,azure_devops_id:Le.azureDevOpsId,azure_devops_url:Le.azureDevOpsUrl})}const ye=await xi(n.id),Fe=await Uo(n.id),Ce=ye.map(Le=>{const ae=Fe.filter(Z=>Z.feature_id===Le.id).map(Z=>({userId:Z.user_id,name:Z.user_name,email:Z.user_email,voteCount:Z.vote_count})),Q=ae.reduce((Z,Ie)=>Z+Ie.voteCount,0);return{id:Le.id,title:Le.title,description:Le.description,epic:Le.epic||null,epicId:Le.epic_id||Le.epicId||null,state:Le.state,areaPath:Le.area_path||Le.areaPath||null,tags:Le.tags||[],azureDevOpsId:Le.azure_devops_id||Le.azureDevOpsId||null,azureDevOpsUrl:Le.azure_devops_url||Le.azureDevOpsUrl||null,workItemType:Le.workItemType||Le.work_item_type||null,votes:Q,voters:ae}});b(Ce);const rt={...$,lastSyncTime:new Date().toISOString()};await Lo(n.id,rt),H(rt)}catch(X){console.error("Azure DevOps replace all error:",X),ge("Failed to replace all features from Azure DevOps.")}finally{He(!1),se(null)}},[oe,n,$]),[Pr,bn]=y.useState({isOpen:!1,feature:null,existingFeature:null,onResolve:()=>{}}),as=y.useCallback(async X=>{if(!X||X.length===0||!n){console.error("handleConfirmSync: Invalid input",{selectedFeatures:X,currentSession:n});return}try{He(!0),console.log("handleConfirmSync: Starting sync for",X.length,"features");const ye=await xi(n.id),Fe=[];let Ce=!1,rt=!1;for(let Z=0;Z<X.length;Z++){const Ie=X[Z];try{const Tt=ye.find($t=>{const Pt=$t.azureDevOpsId||$t.azure_devops_id,sr=Ie.azureDevOpsId;return Pt&&sr&&Pt.toString()===sr.toString()}),dr=Sh(Ie.description),Ve=pd(dr,300);if(Tt){if(rt){console.log("handleConfirmSync: Auto-replacing existing feature (replace-all)",Tt.id,Ie.title);const Pt=[...Tt.attachmentUrls||[],...Ie.attachmentUrls||[]];await Qu(Tt.id,{title:Ie.title,description:Ve,epic:Ie.epic||null,epicId:Ie.epicId||null,state:Ie.state,areaPath:Ie.areaPath,tags:Ie.tags,azure_devops_id:Ie.azureDevOpsId,azure_devops_url:Ie.azureDevOpsUrl,workItemType:Ie.workItemType||null,attachmentUrls:Pt.length>0?Pt:null}),Fe.push(Ie);continue}const $t=await new Promise(Pt=>{bn({isOpen:!0,feature:Ie,existingFeature:Tt,onResolve:sr=>{bn({isOpen:!1,feature:null,existingFeature:null,onResolve:()=>{}}),Pt(sr)}})});if($t==="cancel"){Ce=!0;break}else if($t==="skip"){console.log("handleConfirmSync: Skipping existing feature",Tt.id,Ie.title);continue}else if($t==="replace-all"){rt=!0,console.log("handleConfirmSync: Replace-all selected, replacing current and all future conflicts");const Pt=[...Tt.attachmentUrls||[],...Ie.attachmentUrls||[]];await Qu(Tt.id,{title:Ie.title,description:Ve,epic:Ie.epic||null,epicId:Ie.epicId||null,state:Ie.state,areaPath:Ie.areaPath,tags:Ie.tags,azure_devops_id:Ie.azureDevOpsId,azure_devops_url:Ie.azureDevOpsUrl,workItemType:Ie.workItemType||null,attachmentUrls:Pt.length>0?Pt:null}),Fe.push(Ie)}else if($t==="replace"){console.log("handleConfirmSync: Replacing existing feature",Tt.id,Ie.title);const Pt=[...Tt.attachmentUrls||[],...Ie.attachmentUrls||[]];await Qu(Tt.id,{title:Ie.title,description:Ve,epic:Ie.epic||null,epicId:Ie.epicId||null,state:Ie.state,areaPath:Ie.areaPath,tags:Ie.tags,azure_devops_id:Ie.azureDevOpsId,azure_devops_url:Ie.azureDevOpsUrl,workItemType:Ie.workItemType||null,attachmentUrls:Pt.length>0?Pt:null}),Fe.push(Ie)}}else{console.log("handleConfirmSync: Creating new feature",Ie.title,Ie.azureDevOpsId);const $t=await ih({session_id:n.id,title:Ie.title,description:Ve,epic:Ie.epic||null,epicId:Ie.epicId||null,state:Ie.state,areaPath:Ie.areaPath,tags:Ie.tags,azure_devops_id:Ie.azureDevOpsId,azure_devops_url:Ie.azureDevOpsUrl,workItemType:Ie.workItemType||null,attachmentUrls:Ie.attachmentUrls||null});console.log("handleConfirmSync: Created feature",$t),Fe.push(Ie)}}catch(Tt){throw console.error("handleConfirmSync: Error processing feature",Ie.title,Tt),Tt}}if(Ce){console.log("handleConfirmSync: Sync cancelled by user");return}console.log("handleConfirmSync: Fetching all features after sync"),await new Promise(Z=>setTimeout(Z,200));const Le=await xi(n.id);console.log("handleConfirmSync: Retrieved",Le.length,"features from database"),console.log("handleConfirmSync: Feature IDs:",Le.map(Z=>({id:Z.id,title:Z.title,azureId:Z.azure_devops_id||Z.azureDevOpsId})));const I=await Uo(n.id),ae=Le.map(Z=>{const Tt=I.filter(Ve=>Ve.feature_id===Z.id).map(Ve=>({userId:Ve.user_id,name:Ve.user_name,email:Ve.user_email,voteCount:Ve.vote_count})),dr=Tt.reduce((Ve,$t)=>Ve+$t.voteCount,0);return{id:Z.id,title:Z.title,description:Z.description,epic:Z.epic||null,epicId:Z.epic_id||Z.epicId||null,state:Z.state,areaPath:Z.area_path||Z.areaPath||null,tags:Z.tags||[],azureDevOpsId:Z.azure_devops_id||Z.azureDevOpsId||null,azureDevOpsUrl:Z.azure_devops_url||Z.azureDevOpsUrl||null,workItemType:Z.workItemType||Z.work_item_type||null,attachmentUrls:Z.attachmentUrls||Z.attachment_urls||null,votes:dr,voters:Tt}});console.log("handleConfirmSync: Setting features with votes",ae.length),b(()=>ae),await new Promise(Z=>setTimeout(Z,200));const Q={...$,lastSyncTime:new Date().toISOString()};await Lo(n.id,Q),H(Q),console.log("handleConfirmSync: Sync completed successfully")}catch(ye){throw console.error("Azure DevOps sync error:",ye),ge("Failed to sync features from Azure DevOps."),ye}finally{He(!1),se(null)}},[n,$]),Rr=y.useCallback(async()=>{if(n)try{const X={organization:$.organization||"newmill",project:$.project||"Product",workItemType:$.workItemType||"Feature",query:$.query,accessToken:void 0,refreshToken:void 0,tokenExpiresAt:void 0,enabled:!1};await Lo(n.id,X),H(X),ge(null)}catch(X){console.error("Error disconnecting Azure DevOps:",X),ge("Failed to disconnect from Azure DevOps")}},[$,n]);y.useEffect(()=>{(async()=>{const ye=sessionStorage.getItem("oauth_action");if(ye&&!(!$.enabled||!$.accessToken))try{ye==="preview"?await fr():ye==="sync"&&await wn()}finally{sessionStorage.removeItem("oauth_action")}})()},[$.enabled,$.accessToken,fr,wn]);const is=y.useCallback(()=>{p("/admin")},[p]),an=y.useCallback(()=>{if(t){p("/vote");return}R(!1);const X=d?"system":"session";Se(X),sessionStorage.setItem("adminPerspective",X),sessionStorage.setItem("viewMode","stakeholder"),A("voting")},[d,t,p]),bs=y.useCallback(()=>{R(!0),Se("session"),sessionStorage.setItem("adminPerspective","session"),sessionStorage.setItem("viewMode","admin"),t?P!=="admin"&&A("admin"):P!=="voting"&&A("voting")},[t,P]),os=y.useCallback(()=>{d&&(R(!0),Se("system"),sessionStorage.setItem("adminPerspective","system"),sessionStorage.setItem("viewMode","system-admin"),t?P!=="admin"&&A("admin"):P!=="voting"&&A("voting"))},[P,d,t]),js=y.useCallback(async X=>{if(n)try{const ye=await ih({session_id:n.id,title:X.title,description:X.description,epic:X.epic});b(Fe=>[...Fe,{id:ye.id,title:ye.title,description:ye.description,epic:ye.epic,votes:0,voters:[]}]),G(!1)}catch(ye){console.error("Error adding feature:",ye),alert("Failed to add feature")}},[n]),qn=y.useCallback(async X=>{try{await Qu(X.id,{title:X.title,description:X.description,epic:X.epic,epicId:X.epicId||null,attachmentUrls:X.attachmentUrls||null}),b(ye=>ye.map(Fe=>Fe.id===X.id?X:Fe)),B(null)}catch(ye){console.error("Error updating feature:",ye),alert("Failed to update feature: "+(ye instanceof Error?ye.message:String(ye)))}},[]),vr=y.useCallback(async X=>{try{await jk(X),b(ye=>ye.filter(Fe=>Fe.id!==X))}catch(ye){console.error("Error deleting feature:",ye),alert("Failed to delete feature")}},[]),Ts=y.useCallback(X=>{We(ye=>({...ye,showReset:!0,showResetAll:!1,showDeleteSession:!1,targetId:X}))},[]),Hn=y.useCallback(async()=>{const X=vt.targetId;if(!(!X||!n))try{await h5(n.id,X);const ye=await Yt();b(ye)}catch(ye){console.error("Error resetting votes:",ye),alert("Failed to reset votes")}},[vt.targetId,n,Yt]),ks=y.useCallback(()=>{We(X=>({...X,showReset:!1,showResetAll:!0,showDeleteSession:!1,targetId:null}))},[]),Kn=y.useCallback(()=>{We(X=>({...X,showReset:!1,showResetAll:!1,showDeleteSession:!0,targetId:null}))},[]),tr=y.useCallback(async()=>{if(n){dt(!0);try{await f5(n.id),l(null);try{localStorage.removeItem("voting_system_current_session")}catch{}await u(),p("/sessions",{replace:!0})}catch(X){console.error("Error deleting session:",X),alert("Failed to delete session. Please try again.")}finally{dt(!1),We(X=>({...X,showDeleteSession:!1}))}}},[n,p,l,u]),Tn=y.useCallback(async()=>{if(n)try{await x5(n.id);const X=await Yt();b(X)}catch(X){console.error("Error resetting all votes:",X),alert("Failed to reset all votes")}},[n,Yt]),Ar=y.useCallback((X,ye)=>{if(!s||!q.isActive)return;const Fe=we[X]||0;let Ce=Fe;if(ye)if(Ke<Ye)Ce=Fe+1;else return;else if(Fe>0)Ce=Fe-1;else return;Ae(rt=>{const Le={...rt};return Ce===0?delete Le[X]:Le[X]=Ce,Le}),wt(rt=>ye?rt+1:rt-1)},[s,we,Ke,q.isActive,Ye]),ls=y.useCallback(async()=>{if(!(!s||!q.isActive||!n)&&!(Ke<Ye))try{for(const[Ce,rt]of Object.entries(we))rt>0&&await y5({session_id:n.id,feature_id:Ce,user_id:s.id,user_name:s.name,user_email:s.email,vote_count:rt});const X=await xi(n.id),ye=await Uo(n.id),Fe=X.map(Ce=>{const Le=ye.filter(ae=>ae.feature_id===Ce.id).map(ae=>({userId:ae.user_id,name:ae.user_name,email:ae.user_email,voteCount:ae.vote_count})),I=Le.reduce((ae,Q)=>ae+Q.voteCount,0);return{id:Ce.id,title:Ce.title,description:Ce.description,epic:Ce.epic,state:Ce.state,areaPath:Ce.area_path,tags:Ce.tags||[],azureDevOpsId:Ce.azure_devops_id,azureDevOpsUrl:Ce.azure_devops_url,votes:I,voters:Le}});b(Fe),A("thankyou")}catch(X){console.error("Error submitting votes:",X),alert("Failed to submit votes. Please try again.")}},[s,n,Ke,we,q.isActive,Ye]),hn=y.useCallback(async X=>{var I,ae;const ye={title:X.title,goal:X.goal,votes_per_user:X.votesPerUser,start_date:X.startDate,end_date:X.endDate,is_active:X.isActive,use_auto_votes:X.useAutoVotes,product_id:X.product_id??null,product_name:null},Fe={},Ce=(Q,Z)=>{Q!==void 0&&(Fe[Z]=Q)};Ce(X.originalEndDate,"original_end_date"),Ce(X.endedEarlyBy,"ended_early_by"),Ce(X.endedEarlyReason,"ended_early_reason"),Ce(X.endedEarlyDetails,"ended_early_details"),Ce(X.reopenReason,"reopen_reason"),Ce(X.reopenDetails,"reopen_details"),Ce(X.reopenedBy,"reopened_by"),Ce(X.reopenedAt,"reopened_at");const rt={...ye,...Fe},Le=async Q=>{n!=null&&n.id?await kk(n.id,Q):await j5(Q)};try{await Le(rt),ve(X),n!=null&&n.id&&l({...n,title:ye.title??n.title,goal:ye.goal??n.goal,votes_per_user:ye.votes_per_user??n.votes_per_user,use_auto_votes:ye.use_auto_votes??n.use_auto_votes,start_date:ye.start_date??n.start_date,end_date:ye.end_date??n.end_date,is_active:ye.is_active??n.is_active,product_id:ye.product_id!==void 0?ye.product_id??null:X.product_id??n.product_id??null,product_name:null,original_end_date:Fe.original_end_date??n.original_end_date??null,ended_early_by:Fe.ended_early_by??n.ended_early_by??null,ended_early_reason:Fe.ended_early_reason??n.ended_early_reason??null,ended_early_details:Fe.ended_early_details??n.ended_early_details??null,reopen_reason:Fe.reopen_reason??n.reopen_reason??null,reopen_details:Fe.reopen_details??n.reopen_details??null,reopened_by:Fe.reopened_by??n.reopened_by??null,reopened_at:Fe.reopened_at??n.reopened_at??null})}catch(Q){const Z=((ae=(I=Q==null?void 0:Q.message)==null?void 0:I.toLowerCase)==null?void 0:ae.call(I))??"",Ie=Z.includes("column")&&(Z.includes("reopen_reason")||Z.includes("reopen_details")||Z.includes("reopened_by")||Z.includes("reopened_at")||Z.includes("original_end_date")||Z.includes("ended_early_by")||Z.includes("ended_early_reason")||Z.includes("ended_early_details")),Tt=Z.includes("product_name")||Z.includes('"product_name"'),dr=Z.includes("product_id")||Z.includes('"product_id"');if(Ie||Tt||dr){console.warn("[FeatureVoting] Voting session metadata/product columns missing, falling back to basic update.",Q);try{const Ve={...ye};Tt&&delete Ve.product_name,dr&&delete Ve.product_id,await Le(Ve),ve(X),n!=null&&n.id&&l({...n,title:Ve.title??n.title,goal:Ve.goal??n.goal,votes_per_user:Ve.votes_per_user??n.votes_per_user,use_auto_votes:Ve.use_auto_votes??n.use_auto_votes,start_date:Ve.start_date??n.start_date,end_date:Ve.end_date??n.end_date,is_active:Ve.is_active??n.is_active,product_id:Ve.product_id!==void 0?Ve.product_id??null:X.productId??n.product_id??null,product_name:null,original_end_date:X.originalEndDate??n.original_end_date??null,ended_early_by:X.endedEarlyBy??n.ended_early_by??null,ended_early_reason:X.endedEarlyReason??n.ended_early_reason??null,ended_early_details:X.endedEarlyDetails??n.ended_early_details??null,reopen_reason:X.reopenReason??n.reopen_reason??null,reopen_details:X.reopenDetails??n.reopen_details??null,reopened_by:X.reopenedBy??n.reopened_by??null,reopened_at:X.reopenedAt??n.reopened_at??null})}catch(Ve){console.error("Error updating voting session (fallback):",Ve),alert("Failed to update voting session settings")}}else console.error("Error updating voting session:",Q),alert("Failed to update voting session settings")}},[n,l]),cs=y.useCallback(async X=>{if(n){H(X);try{await Lo(n.id,{organization:X.organization,project:X.project,accessToken:X.accessToken,refreshToken:X.refreshToken,tokenExpiresAt:X.tokenExpiresAt,tenantId:X.tenantId,clientId:X.clientId,enabled:X.enabled,workItemType:X.workItemType,query:X.query,lastSyncTime:X.lastSyncTime})}catch(ye){console.error("Error saving config:",ye)}}},[n]),Ws=y.useCallback(()=>{t||n?p("/results"):A("results")},[t,n,p]),Br=y.useMemo(()=>{if(t)return i.jsx(NZ,{features:k,onAddFeature:js,onUpdateFeature:qn,onDeleteFeature:vr,onShowResults:Ws,onRequestDeleteSession:Kn,isDeletingSession:Oe,showAddForm:ie,setShowAddForm:G,editingFeature:K,setEditingFeature:B,onLogout:x,onShowVoterView:an,votingSession:q,azureDevOpsConfig:$,onUpdateAzureDevOpsConfig:cs,onPreviewAzureDevOpsFeatures:fr,onDisconnectAzureDevOps:Rr,isFetchingAzureDevOps:De,azureFetchError:Y,onInitiateOAuth:bt,availableStates:U,availableAreaPaths:he,availableTags:Pe,previewFeatures:oe,showPreviewModal:Be,setShowPreviewModal:Xe,onConfirmSync:as,onReplaceAll:pr,onUpdateVotingSession:hn,onFetchStatesForType:mr,onFetchAreaPathsForTypeAndState:Vn,onFetchTagsForTypeStateAndAreaPath:sn,onFetchTypesAndStatesForAreaPath:Ur,onFetchTypesAndStatesForTags:jr,onFetchTypesAndAreaPathsForStates:Sr,suggestedFeatures:mt,otherSessions:Qe,onPromoteSuggestion:nr,onMoveSuggestion:Kt,onEditSuggestion:ur,onDeleteSuggestion:Nt,adminPerspective:V,projectOptions:ce});switch(P==="admin"&&!t?"voting":P){case"voting":return i.jsx(TC,{features:k,currentUser:s,pendingVotes:we,pendingUsedVotes:Ke,onVote:Ar,onSubmitVotes:ls,onToggleAdmin:is,isAdmin:M,votingSession:q,navigate:p,effectiveVotesPerUser:Ye,sessionId:(n==null?void 0:n.id)||"",onLogout:x,onSuggestionSubmitted:or,isSystemAdmin:d,isSessionAdmin:m,isStakeholder:f,currentRole:M?V==="system"?"system-admin":"product-owner":"stakeholder"});case"results":return i.jsx(BZ,{features:k,onResetVotes:Ts,onResetAllVotes:ks,onBack:r?()=>p("../admin"):()=>A("admin"),showVotersList:ne,setShowVotersList:W,votingSession:q,effectiveVotesPerUser:Ye,onLogout:x,currentUser:s,isSystemAdmin:d,isSessionAdmin:m,isStakeholder:f,currentRole:M?V==="system"?"system-admin":"product-owner":"stakeholder"});case"thankyou":return i.jsx(WZ,{navigate:p,votingSession:q});default:return i.jsx(TC,{features:k,currentUser:s,pendingVotes:we,pendingUsedVotes:Ke,onVote:Ar,onSubmitVotes:ls,onToggleAdmin:is,isAdmin:M,votingSession:q,navigate:p,effectiveVotesPerUser:Ye,sessionId:(n==null?void 0:n.id)||"",onLogout:x,onSuggestionSubmitted:or,isSystemAdmin:d,isSessionAdmin:m,isStakeholder:f,currentRole:M?V==="system"?"system-admin":"product-owner":"stakeholder"})}},[P,k,s,we,Ke,Ar,ls,is,M,q,Ts,ks,ne,W,js,qn,vr,ie,G,K,B,$,cs,wn,fr,Rr,De,Y,bt,oe,Be,Xe,as,p,Ye,t,U,he,Pe,mr,n,an,or,mt,Qe,nr,Kt,ur,Nt,V,ce,Ws]),_r=()=>{const{feature:X,existingFeature:ye}=Pr;return y.useEffect(()=>{if(Pr.isOpen){const Fe=window.scrollY;return document.body.style.position="fixed",document.body.style.top=`-${Fe}px`,document.body.style.width="100%",document.body.style.overflow="hidden",()=>{document.body.style.position="",document.body.style.top="",document.body.style.width="",document.body.style.overflow="",window.scrollTo(0,Fe)}}},[Pr.isOpen]),!Pr.isOpen||!X||!ye?null:i.jsx("div",{className:"fixed inset-0 z-[60] overflow-y-auto",children:i.jsxs("div",{className:"flex items-start justify-center min-h-screen p-4 text-center pt-8 sm:pt-16",children:[i.jsx("div",{className:"fixed inset-0 transition-opacity bg-black/50",onClick:()=>Pr.onResolve("cancel"),"aria-hidden":"true"}),i.jsxs("div",{className:"inline-block w-full max-w-2xl mb-8 overflow-visible text-left align-middle transition-all transform bg-white shadow-xl rounded-lg relative z-10",children:[i.jsxs("div",{className:"flex items-start justify-between mb-5 p-6 pb-0",children:[i.jsxs("div",{className:"flex items-center gap-3 bg-[#FFF7E2] border border-[#C89212]/40 rounded-xl px-6 py-3 shadow-sm w-full mr-4",children:[i.jsx("div",{className:"flex items-center justify-center h-10 w-10 rounded-full bg-[#C89212]/15 text-[#C89212]",children:i.jsx(Gm,{className:"h-6 w-6"})}),i.jsxs("div",{children:[i.jsx("h3",{className:"text-lg font-semibold text-[#2d4660] tracking-tight",children:"Work Item Already Exists"}),i.jsx("p",{className:"text-xs text-[#8A6D3B] font-medium mt-1 uppercase tracking-widest",children:"Spark the roadmap with your ideas"})]})]}),i.jsx("button",{onClick:()=>Pr.onResolve("cancel"),className:"ml-3 text-gray-400 hover:text-gray-500 focus:outline-none",children:i.jsx(ts,{className:"h-5 w-5"})})]}),i.jsx("div",{className:"p-6",children:i.jsxs("div",{className:"space-y-4",children:[i.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:i.jsx("p",{className:"text-sm text-yellow-800 mb-2",children:"This work item already exists in your voting session. What would you like to do?"})}),i.jsxs("div",{className:"space-y-3",children:[i.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[i.jsx("h4",{className:"font-semibold text-gray-900 mb-2",children:"Existing Work Item:"}),i.jsx("p",{className:"text-sm text-gray-700",children:ye.title}),ye.azureDevOpsId&&i.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Azure DevOps ID: ",ye.azureDevOpsId]})]}),i.jsxs("div",{className:"border border-blue-200 rounded-lg p-4 bg-blue-50",children:[i.jsx("h4",{className:"font-semibold text-blue-900 mb-2",children:"New Work Item:"}),i.jsx("p",{className:"text-sm text-blue-700",children:X.title}),X.azureDevOpsId&&i.jsxs("p",{className:"text-xs text-blue-600 mt-1",children:["Azure DevOps ID: ",X.azureDevOpsId]})]})]}),i.jsxs("div",{className:"flex justify-between items-center pt-4 border-t",children:[i.jsx(_t,{variant:"primary",onClick:()=>Pr.onResolve("replace-all"),children:"Replace All Selected"}),i.jsxs("div",{className:"flex gap-3",children:[i.jsx(_t,{variant:"secondary",onClick:()=>Pr.onResolve("cancel"),children:"Cancel"}),i.jsx(_t,{variant:"secondary",onClick:()=>Pr.onResolve("skip"),children:"Skip"}),i.jsx(_t,{variant:"primary",onClick:()=>Pr.onResolve("replace"),children:"Replace"})]})]})]})})]})]})})};return n?_?i.jsx("div",{className:"min-h-screen w-full bg-gray-50 flex items-center justify-center",children:i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-[#2d4660] mx-auto mb-4"}),i.jsx("p",{className:"text-gray-600",children:"Loading..."})]})}):!M&&P!=="voting"&&P!=="thankyou"?i.jsx("div",{className:"min-h-screen w-full bg-gray-50 flex items-center justify-center",children:i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-[#2d4660] mx-auto mb-4"}),i.jsx("p",{className:"text-gray-600",children:"Loading voting experience..."})]})}):i.jsxs(i.Fragment,{children:[i.jsx(_r,{}),i.jsxs("div",{className:"w-full bg-gray-50 text-gray-900 font-sans min-h-screen flex flex-col",children:[i.jsx("div",{className:"flex-grow",children:Br}),i.jsx(jb,{currentRole:M?V==="system"?"system-admin":"product-owner":"stakeholder",onSelectStakeholder:an,onSelectProductOwner:M||d?bs:void 0,onSelectSystemAdmin:d?os:void 0,showRoleToggle:d||m,isSessionAdmin:m&&!d}),i.jsx(Dh,{show:vt.showReset,title:"Reset Votes",message:"Are you sure you want to reset all votes for this feature? This will remove all voting data for this feature.",onConfirm:Hn,onCancel:()=>We(X=>({...X,showReset:!1})),confirmText:"Reset",type:"reset"}),i.jsx(Dh,{show:vt.showResetAll,title:"Reset All Votes",message:"Are you sure you want to reset all votes for all features? This will remove all voting data and cannot be undone.",onConfirm:Tn,onCancel:()=>We(X=>({...X,showResetAll:!1})),confirmText:"Reset All",type:"reset"}),i.jsx(Dh,{show:vt.showDeleteSession,title:"Delete Voting Session",message:"This will permanently delete the current voting session for all admins and stakeholders. Votes, notes, and settings for this session will be removed. This action cannot be undone.",onConfirm:tr,onCancel:()=>We(X=>({...X,showDeleteSession:!1})),confirmText:Oe?"Deleting":"Delete Session",type:"delete"}),Vt&&i.jsxs("div",{className:"fixed inset-0 bg-black bg-opacity-90 z-50 flex items-center justify-center p-4",onClick:()=>F(null),children:[i.jsx("button",{onClick:()=>F(null),className:"absolute top-4 right-4 text-white hover:text-gray-300 transition-colors z-10",title:"Close",children:i.jsx(ts,{className:"h-8 w-8"})}),i.jsx("div",{className:"max-w-7xl max-h-full w-full h-full flex items-center justify-center",onClick:X=>X.stopPropagation(),children:Vt.match(/\.(jpg|jpeg|png|gif|webp)$/i)?i.jsx("img",{src:Vt,alt:"Attachment",className:"max-w-full max-h-full object-contain"}):Vt.match(/\.pdf$/i)?i.jsx("iframe",{src:Vt,className:"w-full h-full bg-white",title:"PDF Viewer"}):i.jsxs("div",{className:"text-white text-center",children:[i.jsx(ys,{className:"h-16 w-16 mx-auto mb-4"}),i.jsx("p",{className:"mb-4",children:"Unable to preview this file type"}),i.jsx("a",{href:Vt,target:"_blank",rel:"noopener noreferrer",className:"text-[#C89212] hover:text-[#A07810] underline",children:"Open in new tab"})]})})]})]})]}):i.jsxs(i.Fragment,{children:[i.jsx(_r,{}),i.jsx("div",{className:"min-h-screen w-full bg-gray-50 flex items-center justify-center",children:i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-[#2d4660] mx-auto mb-4"}),i.jsx("p",{className:"text-gray-600",children:"Loading session..."})]})})]})}async function IC(e,t,r){const s=`${e}:${t}:${r}:default-secret-change-in-production`,l=new TextEncoder().encode(s),u=await crypto.subtle.digest("SHA-256",l);return Array.from(new Uint8Array(u)).map(f=>f.toString(16).padStart(2,"0")).join("").substring(0,32)}function qZ(){const[e,t]=y.useState(!1),[r,n]=y.useState(!1),[s,a]=y.useState(""),[l,u]=y.useState(!1),[d,m]=y.useState(null),[f,p]=y.useState(""),[v,x]=y.useState(""),{currentUser:w,setCurrentUser:k,setCurrentSession:b}=Gl(),_=oi(),[N]=Nx(),C=async P=>{P.preventDefault(),a(""),t(!0);try{const A=await Uc(f.toLowerCase(),v);console.log("[LoginScreen] User created/retrieved:",A),k(A);const M=N.get("session");if(M){console.log("[LoginScreen] Session code found, loading session...");const R=await u5(M);if(R){b(R),console.log("[LoginScreen] Checking user roles...");const[K,B,ie]=await Promise.all([ro(A.id),Dx(R.id,A.id),$x(R.id,A.email)]);if(K||B)_("/admin");else if(ie)_("/vote");else{a("You are not authorized to access this voting session."),t(!1);return}}else{a("Invalid session code."),t(!1);return}}else console.log("[LoginScreen] No session code, navigating to /sessions"),_("/sessions")}catch(A){console.error("[LoginScreen] Login error:",A),a(`Failed to log in: ${A instanceof Error?A.message:"Unknown error"}. Please try again.`),t(!1)}};y.useEffect(()=>{const P=sessionStorage.getItem("oauth_error");P&&(a(P),sessionStorage.removeItem("oauth_error"));const A=N.get("error"),M=N.get("error_description"),R=N.get("error_code");if(A){const K=M?decodeURIComponent(M):"An authentication error occurred.";A==="invalid_request"&&K.includes("AADSTS9002325")?a('Azure AD authentication requires PKCE. Please ensure your Azure AD app is configured correctly. The redirect URI must be registered under the "Web" platform in Azure AD.'):R==="unexpected_failure"&&K.includes("email")?a("Azure AD did not return your email address. Please ensure your Azure AD app has the correct API permissions (User.Read or email) and that your account has an email address."):a(`Authentication failed: ${K}`),_("/login",{replace:!0})}},[N,_]),y.useEffect(()=>{const P=N.get("token"),A=N.get("action"),M=N.get("email"),R=N.get("product");P&&A&&M&&R&&(A==="grant-admin"||A==="grant-stakeholder")&&(async()=>{var B,ie;try{t(!0),a("");const ne=`${Ee.supabaseUrl}/functions/v1/grant-access`;let W;try{W=await fetch(ne,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${Ee.supabaseKey}`},body:JSON.stringify({token:P,action:A,email:M,productId:R})})}catch(Pe){throw(B=Pe.message)!=null&&B.includes("CORS")||(ie=Pe.message)!=null&&ie.includes("Failed to fetch")?new Error("The grant access function is not available. Please ensure the Edge Function is deployed. Error: "+Pe.message):Pe}if(!W.ok){let Pe="Failed to grant access";try{Pe=(await W.json()).error||Pe}catch{Pe=`Server returned ${W.status}: ${W.statusText}`}throw new Error(Pe)}const q=await W.json(),ve=M.split("@")[0].replace(/\./g," "),$=q.productName||"the product",H=A==="grant-admin"?"Product Owner":"Stakeholder";let ce=ve;try{const Pe=await yE(M);Pe&&(ce=Pe.name)}catch{}const le=window.location.pathname.startsWith("/feature-voting-app")?"/feature-voting-app":"",U=`${window.location.origin}${le}/login`,he=`
<table width="100%" cellpadding="0" cellspacing="0" border="0" style="background-color: #f9fafb; font-family: Arial, sans-serif;">
  <tr>
    <td align="center" style="padding: 48px 20px;">
      <table width="600" cellpadding="0" cellspacing="0" border="0" style="background-color: #ffffff; border-radius: 8px; box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);">
        <!-- Logo Header -->
        <tr>
          <td style="background-color: #ffffff; padding: 32px 40px 24px 40px; text-align: center;">
            <img src="https://dcchoffman.github.io/feature-voting-app/New-Millennium-color-logo1.png" alt="New Millennium Building Systems" width="300" height="96" style="height: 96px; width: auto; max-width: 300px; display: block; margin: 0 auto; border: 0;" />
            <div style="font-size: 24px; font-weight: bold; color: #2d4660; margin-top: 16px;">Access Granted</div>
          </td>
        </tr>
        
        <!-- Main Content -->
        <tr>
          <td style="background-color: #ffffff; padding: 40px;">
            <p style="margin: 0 0 16px 0; font-size: 16px; color: #333;">Hello ${ce},</p>
            <p style="margin: 0 0 24px 0; font-size: 16px; color: #333; line-height: 1.6;">Your access request has been approved! You have been granted <strong style="color: #2d4660;">${H}</strong> access to all voting sessions for <strong style="color: #2d4660;">${$}</strong>.</p>
            
            <p style="margin: 24px 0; font-size: 16px; color: #333; line-height: 1.6;">You can now log in to the Feature Voting System to access your sessions.</p>
            
            <!-- Login Button -->
            <table width="100%" cellpadding="0" cellspacing="0" border="0" style="margin: 32px 0;">
              <tr>
                <td align="center">
                  <a href="${U}" style="display: inline-block; padding: 12px 24px; background-color: #2d4660; color: white; text-decoration: none; border-radius: 6px; font-weight: 500; font-size: 14px; box-shadow: 0 1px 2px 0 rgba(0, 0, 0, 0.05);">Log In to Feature Voting System</a>
                </td>
              </tr>
            </table>
          </td>
        </tr>
        
        <!-- Footer -->
        <tr>
          <td style="background-color: #f9fafb; padding: 20px; text-align: center; border-top: 1px solid #e5e7eb; font-size: 12px; color: #6b7280; position: relative;">
            <p style="margin: 0 0 8px 0;">This is an automated message from the Feature Voting System.</p>
            <p style="margin: 0; color: #9ca3af;"> ${new Date().getFullYear()} New Millennium Building Systems</p>
          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>`,$e=`
Access Granted - Feature Voting System

Hello ${ce},

Your access request has been approved! You have been granted ${H} access to all voting sessions for ${$}.

You can now log in to the Feature Voting System to access your sessions.

Login: ${U}

This is an automated message from the Feature Voting System.
          `;try{await Jc({to:M,subject:`Access Granted - ${$} - Feature Voting System`,text:$e,html:he})}catch(Pe){console.error("Error sending email to requester:",Pe)}m({roleName:H,productName:$,requesterName:ce,requesterEmail:M}),_("/login",{replace:!0})}catch(G){console.error("Error granting access:",G),a(G.message||"Failed to grant access. Please try again."),_("/login",{replace:!0})}finally{t(!1)}})()},[N,_]);const T=async()=>{a(""),n(!0);try{const P=window.location.pathname.startsWith("/feature-voting-app")?"/feature-voting-app":"",A=`${window.location.origin}${P}/sessions`,{error:M}=await Ee.auth.signInWithOAuth({provider:"azure",options:{redirectTo:A,scopes:"email openid profile User.ReadBasic.All",queryParams:{redirect_to:A}}});M&&(a("Failed to sign in with Azure AD. Please try again."),n(!1))}catch(P){console.error("Azure login error:",P),a("Failed to sign in with Azure AD. Please try again."),n(!1)}};return i.jsxs("div",{className:"min-h-screen bg-gray-50 flex flex-col justify-center py-12 sm:px-6 lg:px-8",children:[i.jsx("div",{className:"sm:mx-auto sm:w-full sm:max-w-md",children:i.jsxs("div",{className:"bg-white shadow-lg sm:rounded-lg overflow-hidden relative z-10",children:[i.jsxs("div",{className:"relative",children:[i.jsx("div",{className:"px-10 pt-8 pb-6 text-center",children:i.jsx("img",{src:Di,alt:"New Millennium Building Systems Logo",className:"mx-auto h-24 w-auto"})}),i.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-12 pointer-events-none",style:{background:"linear-gradient(to bottom, transparent, rgba(255, 255, 255, 0.8), rgba(255, 255, 255, 1))"}})]}),i.jsxs("div",{className:"px-4 sm:px-10 pb-8",children:[i.jsxs("div",{className:"text-center mb-6",children:[i.jsx("h2",{className:"text-3xl font-bold text-[#2d4660]",children:"Feature Voting System"}),i.jsx("p",{className:"mt-2 text-sm text-gray-600",children:"Sign in to access your voting sessions"})]}),i.jsxs("form",{onSubmit:C,className:"space-y-6",children:[i.jsxs("div",{children:[i.jsx("label",{htmlFor:"login-name",className:"block text-sm font-medium text-gray-700",children:"Full Name"}),i.jsx("div",{className:"mt-1",children:i.jsx("input",{id:"login-name",name:"name",type:"text",autoComplete:"name",required:!0,value:v,onChange:P=>x(P.target.value),className:"appearance-none block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-[#2d4660] focus:border-[#2d4660]",placeholder:"John Doe"})})]}),i.jsxs("div",{children:[i.jsx("label",{htmlFor:"login-email",className:"block text-sm font-medium text-gray-700",children:"Email Address"}),i.jsx("div",{className:"mt-1",children:i.jsx("input",{id:"login-email",name:"email",type:"email",autoComplete:"email",required:!0,value:f,onChange:P=>p(P.target.value),className:"appearance-none block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-[#2d4660] focus:border-[#2d4660]",placeholder:"your.email@company.com"})})]}),i.jsx("div",{children:i.jsx("button",{type:"submit",disabled:e,className:"w-full flex justify-center items-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-[#2d4660] hover:bg-[#1d3a53] focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-[#2d4660] disabled:opacity-50 disabled:cursor-not-allowed",children:e?i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Signing in..."]}):i.jsxs(i.Fragment,{children:[i.jsx("svg",{className:"h-6 w-6 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M11 16l-4-4m0 0l4-4m-4 4h14m-5 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h7a3 3 0 013 3v1"})}),"Sign In"]})})})]}),s&&i.jsx("div",{className:"rounded-md bg-red-50 p-4 mt-6",children:i.jsx("div",{className:"flex",children:i.jsx("div",{className:"ml-3",children:i.jsx("h3",{className:"text-sm font-medium text-red-800",children:s})})})}),i.jsx("div",{className:"mt-4",children:i.jsx("button",{type:"button",onClick:T,disabled:r,className:"microsoft-signin-button",style:{width:"100%",height:"41px",display:"flex",alignItems:"center",justifyContent:"center",paddingLeft:"12px",paddingRight:"12px",cursor:r?"not-allowed":"pointer",opacity:r?.5:1},onMouseEnter:P=>{r||(P.currentTarget.style.backgroundColor="#F5F5F5")},onMouseLeave:P=>{r||(P.currentTarget.style.backgroundColor="#FFFFFF")},children:r?i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2",style:{borderColor:"#5E5E5E",marginRight:"12px"}}),i.jsx("span",{style:{color:"#5E5E5E"},children:"Signing in..."})]}):i.jsxs(i.Fragment,{children:[i.jsx("img",{src:UF,alt:"Microsoft",style:{width:"21px",height:"21px",marginRight:"12px",flexShrink:0}}),i.jsx("span",{style:{color:"#5E5E5E",fontFamily:'"Segoe UI", system-ui, -apple-system, BlinkMacSystemFont, "Roboto", "Helvetica Neue", Arial, sans-serif',fontSize:"15px",fontWeight:600},children:"Sign in with Microsoft"})]})})}),i.jsxs("div",{className:"mt-6",children:[i.jsxs("div",{className:"relative",children:[i.jsx("div",{className:"absolute inset-0 flex items-center",children:i.jsx("div",{className:"w-full border-t border-gray-300"})}),i.jsx("div",{className:"relative flex justify-center text-sm",children:i.jsx("span",{className:"px-2 bg-white text-gray-500",children:"No registration required"})})]}),i.jsxs("div",{className:"mt-6 text-center text-xs text-gray-500",children:[i.jsx("p",{children:"Simply enter your name and email to access"}),i.jsx("p",{children:"voting sessions you've been invited to"})]}),i.jsx("div",{className:"mt-4",children:i.jsx("button",{type:"button",onClick:()=>u(!0),className:"w-full text-sm text-[#2d4660] hover:text-[#1d3a53] underline",children:"Request Access"})})]})]})]})}),i.jsx(HZ,{isOpen:l,onClose:It.useCallback(()=>u(!1),[])}),d&&i.jsx(cn,{isOpen:!0,onClose:()=>m(null),title:"",maxWidth:"max-w-md",hideHeader:!0,hideCloseButton:!1,children:i.jsxs("div",{className:"text-center pb-6",children:[i.jsx(un,{className:"h-16 w-16 text-green-600 mx-auto mb-4"}),i.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Access Granted Successfully!"}),i.jsxs("p",{className:"text-sm text-gray-600 mb-1",children:["Successfully granted ",i.jsx("span",{className:"font-semibold text-green-700",children:d.roleName})," access to"]}),i.jsx("p",{className:"text-base font-semibold text-gray-900 mb-1",children:d.requesterName}),i.jsx("p",{className:"text-xs text-gray-500 mb-3",children:d.requesterEmail}),i.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"for all sessions in"}),i.jsx("p",{className:"text-lg font-semibold text-green-700 mb-4",children:d.productName}),i.jsx("p",{className:"text-sm text-gray-600",children:"Emails have been sent to both the requester and admin."})]})})]})}const HZ=It.memo(function({isOpen:t,onClose:r}){const[n,s]=y.useState(""),[a,l]=y.useState(""),[u,d]=y.useState(""),[m,f]=y.useState([]),[p,v]=y.useState(!1),[x,w]=y.useState(!1),[k,b]=y.useState(!1),[_,N]=y.useState(""),[C,T]=y.useState(!1),P=It.useRef(null),A=It.useRef(!1),M=It.useRef(null),R=It.useRef(null);y.useEffect(()=>{t&&!A.current?(async()=>{v(!0);try{const q=await Tx();f(q),A.current=!0}catch(q){console.error("Error loading products:",q),N("Failed to load products. Please try again.")}finally{v(!1)}})():t||(s(""),l(""),d(""),b(!1),N(""),A.current=!1)},[t]),y.useEffect(()=>{function W(q){P.current&&!P.current.contains(q.target)&&T(!1)}return document.addEventListener("mousedown",W),()=>document.removeEventListener("mousedown",W)},[]);const K=It.useCallback(W=>{s(W.target.value)},[]),B=It.useCallback(W=>{l(W.target.value)},[]),ie=async W=>{if(W.preventDefault(),N(""),!n.trim()){N("Name is required");return}if(!a.trim()){N("Email is required");return}if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(a)){N("Please enter a valid email address");return}if(!u){N("Please select a product");return}w(!0);try{const q=await m5(u);if(q.length===0){N("No administrators found for this product. Please contact your system administrator."),w(!1);return}const ve=m.find(ke=>ke.id===u),$=(ve==null?void 0:ve.name)||"the selected product",H=Array.from(new Set(q.map(ke=>{var De;return(De=ke.user)==null?void 0:De.email}).filter(Boolean))),ce=window.location.pathname.startsWith("/feature-voting-app")?"/feature-voting-app":"",le=`${window.location.origin}${ce}/login`,U=await IC(a,u,"grant-admin"),te=await IC(a,u,"grant-stakeholder"),$e=`
<table width="100%" cellpadding="0" cellspacing="0" border="0" style="background-color: #f9fafb; font-family: Arial, sans-serif;">
  <tr>
    <td align="center" style="padding: 48px 20px;">
      <table width="600" cellpadding="0" cellspacing="0" border="0" style="background-color: #ffffff; border-radius: 8px; box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);">
        <!-- Logo Header - Matching Login Page -->
        <tr>
          <td style="background-color: #ffffff; padding: 32px 40px 24px 40px; text-align: center;">
            <img src="https://dcchoffman.github.io/feature-voting-app/New-Millennium-color-logo1.png" alt="New Millennium Building Systems" width="300" height="96" style="height: 96px; width: auto; max-width: 300px; display: block; margin: 0 auto; border: 0;" />
            <div style="font-size: 20px; font-weight: bold; color: #2d4660; margin-top: 16px; margin-bottom: 4px;">Feature Voting System</div>
            <div style="font-size: 11px; color: #6b7280; margin-bottom: 2px;">has a</div>
            <div style="font-size: 25px; font-weight: bold; color: #2d4660; margin-bottom: 2px;">Access Request Notification</div>
            <div style="font-size: 11px; color: #6b7280; margin-bottom: 2px;">for the</div>
            <div style="font-size: 30px; font-weight: bold; color: #2d4660; margin-bottom: 8px;">${$}</div>
          </td>
        </tr>
        
        <!-- Main Content -->
        <tr>
          <td style="background-color: #ffffff; padding: 40px;">
            <p style="margin: 0 0 16px 0; font-size: 16px; color: #333;">Hello,</p>
            <p style="margin: 0 0 24px 0; font-size: 16px; color: #333;">A new access request has been submitted for <strong style="color: #2d4660;">${$}</strong>.</p>
            
            <!-- User Details - Labels less prominent, values emphasized -->
            <table width="100%" cellpadding="0" cellspacing="0" border="0" style="background-color: white; border-left: 4px solid #2d4660; border-radius: 4px; margin: 20px 0;">
              <tr>
                <td style="padding: 20px;">
                  <div style="margin: 10px 0;">
                    <span style="font-weight: normal; color: #6b7280; font-size: 13px;">Requester Name:</span> <span style="color: #1f2937; font-weight: 600; font-size: 15px;">${n}</span>
                  </div>
                  <div style="margin: 10px 0;">
                    <span style="font-weight: normal; color: #6b7280; font-size: 13px;">Requester Email:</span> <span style="color: #1f2937; font-weight: 600; font-size: 15px;">${a}</span>
                  </div>
                  <div style="margin: 10px 0;">
                    <span style="font-weight: normal; color: #6b7280; font-size: 13px;">Product:</span> <span style="color: #1f2937; font-weight: 600; font-size: 15px;">${$}</span>
                  </div>
                </td>
              </tr>
            </table>

            <p style="margin: 24px 0; font-size: 16px; color: #333; line-height: 1.6;">To grant access, click one of the buttons below.<br />Access will be granted <b>immediately</b> to all sessions for this product,<br /><b>and an email notification will be sent to the requester.</b></p>
            
            <!-- Action Buttons - Gold buttons for granting access (same size) -->
            <table width="100%" cellpadding="0" cellspacing="0" border="0" style="margin: 32px 0;">
              <tr>
                <td width="50%" align="left" valign="top" style="padding-right: 10px;">
                  <a href="${le}?token=${U}&action=grant-admin&email=${encodeURIComponent(a)}&product=${encodeURIComponent(u)}" style="display: inline-block; padding: 12px 20px; background-color: #C89212; color: white; text-decoration: none; border-radius: 6px; font-weight: 600; font-size: 13px; box-shadow: 0 1px 2px 0 rgba(0, 0, 0, 0.05); text-align: center; line-height: 1.5; width: 100%; max-width: 240px; min-width: 240px;">
                    Grant Access as<br /><span style="font-size: 18px; font-weight: 700;">Product Owner</span>
                  </a>
                </td>
                <td width="50%" align="right" valign="top" style="padding-left: 10px;">
                  <a href="${le}?token=${te}&action=grant-stakeholder&email=${encodeURIComponent(a)}&product=${encodeURIComponent(u)}" style="display: inline-block; padding: 12px 20px; background-color: #C89212; color: white; text-decoration: none; border-radius: 6px; font-weight: 600; font-size: 13px; box-shadow: 0 1px 2px 0 rgba(0, 0, 0, 0.05); text-align: center; line-height: 1.5; width: 100%; max-width: 240px; min-width: 240px;">
                    Grant Access as<br /><span style="font-size: 18px; font-weight: 700;">Stakeholder</span>
                  </a>
                </td>
              </tr>
            </table>
            
            <!-- Helpful Text -->
            <p style="margin: 24px 0 16px 0; font-size: 14px; color: #6b7280; line-height: 1.6; text-align: center;">
              Click either button above to quickly grant access,<br />or use the link below to manage sessions and users in the system.
            </p>
            
            <!-- Go to System Button -->
            <table width="100%" cellpadding="0" cellspacing="0" border="0" style="margin: 24px 0;">
              <tr>
                <td align="center">
                  <a href="${le}" style="display: inline-block; padding: 12px 24px; background-color: #2d4660; color: white; text-decoration: none; border-radius: 6px; font-weight: 500; font-size: 14px; box-shadow: 0 1px 2px 0 rgba(0, 0, 0, 0.05);">Go to Feature Voting System</a>
                </td>
              </tr>
            </table>
          </td>
        </tr>
        
        <!-- Footer -->
        <tr>
          <td style="background-color: #f9fafb; padding: 20px; text-align: center; border-top: 1px solid #e5e7eb; font-size: 12px; color: #6b7280;">
            <p style="margin: 0 0 8px 0;">This is an automated message from the Feature Voting System.</p>
            <p style="margin: 0; color: #9ca3af;"> ${new Date().getFullYear()} New Millennium Building Systems</p>
          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>`,Pe=`
Access Request - Feature Voting System

Hello,

A new access request has been submitted for ${$}.

Requester Name: ${n}
Requester Email: ${a}
Product: ${$}

To grant access, please add this user as a stakeholder or admin to the relevant voting sessions for this product.

Login: ${le}

This is an automated message from the Feature Voting System.
      `;try{const ke=H.map(De=>Jc({to:De,subject:`Access Request for ${$} - Feature Voting System`,text:Pe,html:$e}));await Promise.all(ke),b(!0)}catch(ke){console.error("Email service failed:",ke);let De="Failed to send email through the system.";ke instanceof Error||ke!=null&&ke.message?De=ke.message:typeof ke=="string"&&(De=ke),(De.includes("validation_error")||De.includes("403"))&&(De="Domain verification required. Please verify your domain in Resend and update FROM_EMAIL in Supabase secrets."),N(`Failed to send access request: ${De}. Please check the Supabase Edge Function logs for details.`),w(!1);return}}catch(q){console.error("Error sending access request:",q),N("Failed to send access request. Please try again or contact your administrator.")}finally{w(!1)}},G=m.find(W=>W.id===u),ne=G?cr(G.name,G.color_hex??null):null;return i.jsx(cn,{isOpen:t,onClose:r,title:k?"":"Request Access",maxWidth:"max-w-lg",hideHeader:k,children:k?i.jsxs("div",{className:"text-center pb-6",children:[i.jsx(un,{className:"h-16 w-16 text-green-600 mx-auto mb-3"}),i.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-3",children:"Thank You!"}),i.jsx("p",{className:"text-sm text-gray-600 mb-2",children:"Your access request has been sent to the administrators for"}),i.jsx("p",{className:"text-xl font-semibold text-[#2d4660] mb-4",children:G==null?void 0:G.name}),i.jsx("p",{className:"text-sm text-gray-600",children:"You will be notified once your access has been granted."})]}):i.jsxs("form",{onSubmit:ie,className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{htmlFor:"requestName",className:"block text-sm font-medium text-gray-700 mb-1",children:"Full Name *"}),i.jsx("input",{ref:M,id:"requestName",type:"text",required:!0,autoComplete:"off","data-lpignore":"true","data-form-type":"other",value:n,onChange:K,className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-[#2d4660] focus:border-[#2d4660]",placeholder:"John Doe"})]}),i.jsxs("div",{children:[i.jsx("label",{htmlFor:"requestEmail",className:"block text-sm font-medium text-gray-700 mb-1",children:"Email Address *"}),i.jsx("input",{ref:R,id:"requestEmail",type:"email",required:!0,autoComplete:"off","data-lpignore":"true","data-form-type":"other",value:a,onChange:B,className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-[#2d4660] focus:border-[#2d4660]",placeholder:"your.email@company.com"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Product *"}),i.jsxs("div",{ref:P,className:"relative",children:[i.jsxs("button",{type:"button",onClick:()=>T(!C),className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm bg-white text-left flex items-center justify-between hover:border-gray-400 focus:outline-none focus:ring-[#2d4660] focus:border-[#2d4660]",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[G&&ne&&i.jsx("div",{className:"w-4 h-4 rounded flex-shrink-0",style:{backgroundColor:ne.background}}),i.jsx("span",{className:G?"text-gray-900":"text-gray-400",children:G?G.name:"Select a product..."})]}),i.jsx(Da,{className:`h-4 w-4 text-gray-400 transition-transform ${C?"transform rotate-180":""}`})]}),C&&i.jsx("div",{className:"absolute z-[100] w-full mt-1 bg-white border border-gray-300 rounded-md shadow-lg max-h-96 overflow-y-auto",children:p?i.jsx("div",{className:"px-3 py-2 text-sm text-gray-500 text-center",children:"Loading products..."}):m.length===0?i.jsx("div",{className:"px-3 py-2 text-sm text-gray-500 text-center",children:"No products available"}):m.map(W=>{const q=cr(W.name,W.color_hex??null),ve=u===W.id;return i.jsxs("div",{onClick:()=>{d(W.id),T(!1)},className:`px-3 py-2 cursor-pointer hover:bg-gray-50 flex items-center gap-2 ${ve?"bg-[#2d4660]/5":""}`,children:[q&&i.jsx("div",{className:"w-4 h-4 rounded flex-shrink-0",style:{backgroundColor:q.background}}),i.jsx("span",{className:"text-sm text-gray-900",children:W.name})]},W.id)})})]})]}),_&&i.jsx("div",{className:"rounded-md bg-red-50 p-4",children:i.jsx("div",{className:"flex",children:i.jsx("div",{className:"ml-3",children:i.jsx("h3",{className:"text-sm font-medium text-red-800",children:_})})})}),i.jsxs("div",{className:"flex justify-end space-x-2 pt-4 border-t",children:[i.jsx(_t,{variant:"secondary",onClick:r,disabled:x,children:"Cancel"}),i.jsx(_t,{variant:"primary",type:"submit",disabled:x,className:"flex items-center",children:x?i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Sending..."]}):i.jsxs(i.Fragment,{children:[i.jsx(Ym,{className:"h-4 w-4 mr-2"}),"Send Request"]})})]})]})})});function KZ(){const{currentUser:e,setCurrentSession:t,refreshSessions:r,setCurrentUser:n,isLoading:s}=Gl(),a=oi(),[l]=Nx(),[u,d]=y.useState(!0),[m,f]=y.useState(!1),p=y.useRef(!1),[v,x]=y.useState([]),[w,k]=y.useState({}),[b,_]=y.useState({}),[N,C]=y.useState({}),[T,P]=y.useState({}),[A,M]=y.useState({}),[R,K]=y.useState(!1),[B,ie]=y.useState(()=>sessionStorage.getItem("viewMode")||"admin"),[G,ne]=y.useState(!1),W=y.useRef(null),[q,ve]=y.useState({}),[$,H]=y.useState({}),[ce,le]=y.useState(!1),[U,te]=y.useState(!0),[he,$e]=y.useState({title:"",goal:"",votesPerUser:10,useAutoVotes:!0,startDate:"",endDate:""}),[Pe,ke]=y.useState({}),[De,He]=y.useState(!1),[Y,ge]=y.useState([]),[oe,se]=y.useState(""),[Be,Xe]=y.useState(""),[mt,zt]=y.useState(null),[Qe,nt]=y.useState(null),[Vt,F]=y.useState(!1),[L,V]=y.useState(!1),[Se,we]=y.useState(!1),[Ae,Ke]=y.useState(null),[wt,vt]=y.useState(!1),[We,Oe]=y.useState(!1),[dt,Qt]=y.useState(!1),[Dt,ze]=y.useState(null),[Ye,it]=y.useState(!1),[bt,jt]=y.useState("#2D4660"),Yt=y.useRef(null),[Jt,rr]=y.useState(new Set),[or,ur]=y.useState(null),[Nt,Kt]=y.useState(null),[nr,mr]=y.useState(!1),[Ur,Sr]=y.useState(!1),[jr,sn]=y.useState(null),[Vn,wn]=y.useState(null),[fr,pr]=y.useState(null),[Pr,bn]=y.useState(null),[as,Rr]=y.useState(""),[is,an]=y.useState(null),[bs,os]=y.useState(!1),[js,qn]=y.useState(!1),[vr,Ts]=y.useState("#2D4660"),[Hn,ks]=y.useState(!1),[Kn,tr]=y.useState([]),[Tn,Ar]=y.useState([]),[ls,hn]=y.useState(""),[cs,Ws]=y.useState(""),[Br,_r]=y.useState(""),[X,ye]=y.useState(!1),[Fe,Ce]=y.useState(""),[rt,Le]=y.useState(null),[I,ae]=y.useState(!1),[Q,Z]=y.useState(null),Ie=()=>Z(null),Tt=Kn.map(D=>D.user_email.toLowerCase()),dr=Tt.length>0&&Tt.every(D=>Tn.includes(D));y.useEffect(()=>{const D=l.get("error"),re=l.get("error_description"),de=l.get("error_code");if(D){let Ne="Authentication failed.";de==="unexpected_failure"&&(re!=null&&re.includes("email"))?Ne="Azure AD did not return your email address. Please ensure your Azure AD app has the correct API permissions (User.Read or email) and that your account has an email address.":re&&(Ne=decodeURIComponent(re)),sessionStorage.setItem("oauth_error",Ne),a("/login",{replace:!0})}},[l,a]),y.useEffect(()=>{(async()=>{if(!ce||!e)return;const re=e.tenant_id??e.tenantId??null;if(!re){ge([]),se(""),Ke("No tenant assigned. Products cannot be loaded.");return}V(!0),Ke(null);try{let de;zh(e.email)||await ro(e.id)?de=await Ho(re):de=await xE(e.id);const Je=de;ge(Je),se(be=>{if(nr&&be&&Je.some(st=>st.id===be))return be;if(or){const pe=Je.find(st=>{var At;return((At=st.name)==null?void 0:At.toLowerCase().trim())===or.toLowerCase().trim()});if(pe!=null&&pe.id)return ur(null),pe.id}return nr&&be||""}),ve(be=>{const pe={...be};return Je.forEach(st=>{st.id&&st.name&&(pe[st.id]=st.name)}),pe}),H(be=>{const pe={...be};return Je.forEach(st=>{st.id&&st.color_hex&&(pe[st.id]=st.color_hex)}),pe})}catch(de){console.error("Error loading products for modal:",de),qc!=null&&qc(de)?Ke("Products are not configured yet. Please create the `products` table in Supabase."):Ke("Unable to load products. You can still create a session without a product tag."),ge([]),se("")}finally{V(!1)}})()},[ce,e]);const Ve=D=>{if(!D||typeof D!="string")return console.error("[parseLocalDate] Invalid date string:",D),new Date;const de=D.split("T")[0].split(" ")[0].split("-");if(de.length!==3)return console.error("[parseLocalDate] Invalid date format:",D),new Date;const Ne=parseInt(de[0],10),Ge=parseInt(de[1],10),Je=parseInt(de[2],10);if(isNaN(Ne)||isNaN(Ge)||isNaN(Je))return console.error("[parseLocalDate] Invalid date components:",{year:Ne,month:Ge,day:Je}),new Date;const be=new Date(Ne,Ge-1,Je,0,0,0,0);return isNaN(be.getTime())?(console.error("[parseLocalDate] Invalid date created:",{year:Ne,month:Ge,day:Je,dateString:D}),new Date):be},$t=D=>{if(!D||isNaN(D.getTime()))return console.error("[formatDateToISO] Invalid date:",D),new Date().toISOString().split("T")[0];const re=D.getFullYear(),de=String(D.getMonth()+1).padStart(2,"0"),Ne=String(D.getDate()).padStart(2,"0");return`${re}-${de}-${Ne}`},Pt=(D,re)=>{const de=D.getFullYear(),Ne=D.getMonth(),Ge=D.getDate();return new Date(de,Ne,Ge+re,0,0,0,0)},sr=()=>{const D="ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";let re="";for(let de=0;de<8;de++)re+=D.charAt(Math.floor(Math.random()*D.length));return re},ct=()=>{$e({title:"",goal:"",votesPerUser:10,useAutoVotes:!0,startDate:"",endDate:""}),ke({}),Xe(""),zt(null),Ke(null),vt(!1),Oe(!1),Qt(!1),ze(null),it(!1),jt("#2D4660"),ur(null),te(!0),mr(!1),Sr(!1)},hr=(D=!1)=>{const re={};if(D||(he.title.trim()||(re.title="Session title is required"),he.goal.trim()||(re.goal="Session goal is required")),he.useAutoVotes||(he.votesPerUser<1&&(re.votesPerUser="Votes per user must be at least 1"),he.votesPerUser>100&&(re.votesPerUser="Votes per user cannot exceed 100")),D){if(he.startDate&&he.endDate){const de=Ve(he.startDate);Ve(he.endDate)<=de&&(re.endDate="End date must be after start date")}}else if((!he.startDate||!he.startDate.trim())&&(re.startDate="Start date is required"),(!he.endDate||!he.endDate.trim())&&(re.endDate="End date is required"),he.startDate&&he.endDate&&he.startDate.trim()&&he.endDate.trim()){const de=Ve(he.startDate);Ve(he.endDate)<=de&&(re.endDate="End date must be after start date")}if(!D){const de=Be.trim().length>0;!Ae&&Y.length>0&&!oe&&!Dt&&!wt&&!de&&(re.product="Please select a product or enter a new product name"),wt&&!de&&(re.product="Please enter a product name or select an existing product")}return ke(re),Object.keys(re).length===0},ar=D=>{const{name:re,value:de}=D.target;$e(Ne=>{const Ge={...Ne,[re]:re==="votesPerUser"?parseInt(de)||0:de};if(re==="startDate"&&de){const Je=Ve(de),be=Pt(Je,14);Ge.endDate=$t(be)}return Ge}),Pe[re]&&ke(Ne=>{const Ge={...Ne};return delete Ge[re],Ge})},Zt=async D=>{if(D==="startDate"&&!he.startDate){let re;if(oe)try{const Je=v.filter(be=>be.product_id===oe);if(Je.length>0){let be=Ve(Je[0].end_date);Je.forEach(pe=>{const st=Ve(pe.end_date);st>be&&(be=st)}),re=Pt(be,1)}else re=new Date}catch(Je){console.error("Error calculating dates for product:",Je),re=new Date}else re=new Date;const de=$t(re),Ne=Ve(de),Ge=Pt(Ne,14);$e(Je=>({...Je,startDate:de,endDate:Je.endDate||$t(Ge)}))}else if(D==="endDate"&&!he.endDate){let re;if(he.startDate)re=Ve(he.startDate);else if(oe)try{const Ne=v.filter(Ge=>Ge.product_id===oe);if(Ne.length>0){let Ge=Ve(Ne[0].end_date);Ne.forEach(Je=>{const be=Ve(Je.end_date);be>Ge&&(Ge=be)}),re=Pt(Ge,1)}else re=new Date}catch(Ne){console.error("Error calculating dates for product:",Ne),re=new Date}else re=new Date;const de=Pt(re,14);$e(Ne=>({...Ne,endDate:$t(de),startDate:Ne.startDate||$t(re)}))}},Gt=async()=>{if(!(!Qe||!e)){F(!0);try{await bE(Qe.id),ge(D=>D.filter(re=>re.id!==Qe.id)),ve(D=>{const re={...D};return delete re[Qe.id],re}),H(D=>{const re={...D};return delete re[Qe.id],re}),oe===Qe.id&&se("")}catch(D){console.error("Error deleting product:",D),alert("Failed to delete product. Please try again.")}finally{F(!1),nt(null)}}},jn=async()=>{if(e&&hr(!0)){He(!0);try{const D=sr(),re=e.tenant_id??e.tenantId??null;let de=oe&&oe.trim()!==""?oe:null;const Ne=Be.trim(),Ge=Ne.length>0;let Je=null,be=null;if(Dt?(Je=Dt.name,be=Dt.color):Ge&&(Je=Ne,be=mt),Je&&re)try{const Ot=Y.find(Te=>Te.name.toLowerCase().trim()===Je.toLowerCase().trim());if(Ot)de=Ot.id;else{const Te=await vk(re,Je,be||void 0);de=Te.id,ge(Bt=>[...Bt,Te].sort((et,tt)=>et.name.localeCompare(tt.name))),ve(Bt=>({...Bt,[Te.id]:Te.name})),H(Bt=>{const et={...Bt};return Te.color_hex&&(et[Te.id]=Te.color_hex),et})}}catch(Ot){console.error("Error creating product during draft save:",Ot)}const pe=he.startDate&&he.startDate.trim()?he.startDate:In,st=he.endDate&&he.endDate.trim()?he.endDate:In,At=`${pe}T00:00:00`,ot=`${st}T23:59:59`,kt=await wk({title:he.title.trim()||"Untitled Session",goal:he.goal.trim()||"",votes_per_user:he.votesPerUser||10,use_auto_votes:he.useAutoVotes,start_date:At,end_date:ot,is_active:!1,session_code:D,access_type:"invite-only",product_id:de??null,product_name:null});try{await bk(kt.id,e.id)}catch(Ot){console.error("Error adding product owner for draft:",Ot)}await r(),p.current=!1,await on(),fi()}catch(D){console.error("Error saving draft:",D),ke(re=>({...re,submit:D.message||"Failed to save draft. Please try again."}))}finally{He(!1)}}},kr=async D=>{if(D.preventDefault(),!!e&&hr(!1)){He(!0);try{const re=sr(),de=e.tenant_id??e.tenantId??null;let Ne=oe&&oe.trim()!==""?oe:null;const Ge=Be.trim(),Je=Ge.length>0,be=oe&&oe.trim()!=="";let pe=null,st=null;if(Dt?(pe=Dt.name,st=Dt.color):Je&&(pe=Ge,st=mt),pe){const et=Y.find(tt=>tt.name.toLowerCase().trim()===pe.toLowerCase().trim());if(et)Ne=et.id;else if(de)try{const tt=await vk(de,pe,st||void 0);Ne=tt.id,ge(Ct=>[...Ct,tt].sort((lt,qt)=>lt.name.localeCompare(qt.name))),ve(Ct=>({...Ct,[tt.id]:tt.name})),H(Ct=>{const lt={...Ct};return tt.color_hex&&(lt[tt.id]=tt.color_hex),lt})}catch(tt){console.error("Error creating product during session creation:",tt),ke(Ct=>({...Ct,submit:"Failed to create product. Please try again."})),He(!1);return}else{console.error("No tenantId available to create product"),ke(tt=>({...tt,submit:"Unable to create product: No tenant assigned."})),He(!1);return}}if(Ne&&he.startDate&&he.endDate&&he.startDate.trim()&&he.endDate.trim()){const et=v.filter(pt=>pt.product_id===Ne),tt=he.startDate.split("T")[0],Ct=he.endDate.split("T")[0];if(et.find(pt=>{const O=pt.start_date.split("T")[0],fe=pt.end_date.split("T")[0];return O===tt&&fe===Ct})){const pt=q[Ne]||"this product";ke(O=>({...O,submit:`A session with the same dates (${Dr(he.startDate)} - ${Dr(he.endDate)}) already exists for ${pt}. Please choose different dates.`})),He(!1);return}const qt=await d5(Ne);if(qt){const pt=Ve(qt.end_date);if(Ve(he.startDate)<=pt){const fe=q[Ne]||"this product";ke(_e=>({..._e,submit:`There is already an active session for ${fe}. The new session must start after ${Dr(qt.end_date)}.`})),He(!1);return}}}const At=`${he.startDate}T00:00:00`,ot=`${he.endDate}T23:59:59`,kt=await wk({title:he.title,goal:he.goal,votes_per_user:he.votesPerUser,use_auto_votes:he.useAutoVotes,start_date:At,end_date:ot,is_active:!0,session_code:re,access_type:"invite-only",product_id:Ne??null,product_name:null});try{await bk(kt.id,e.id)}catch(et){console.error("Error adding product owner (session was created successfully):",et),(et==null?void 0:et.code)==="42501"&&(console.warn("RLS policy violation when adding product owner. The session was created but admin assignment failed."),console.warn("This may require updating RLS policies for the product_owners table."))}const Te=await Bm(kt.id)||kt;if(Te.product_id&&de)try{const tt=(await Ho(de)).find(Ct=>Ct.id===Te.product_id);tt&&(ve(Ct=>({...Ct,[tt.id]:tt.name})),tt.color_hex&&tt.color_hex.trim()!==""&&H(Ct=>({...Ct,[tt.id]:tt.color_hex})))}catch(et){console.error("Error loading product for lookup:",et)}t(Te),await r(),await on(),le(!1),ct();const Bt=B==="system-admin"?"system":"session";setTimeout(()=>{a(`/admin?perspective=${Bt}`)},100)}catch(re){console.error("Error creating session from modal:",re),ke(de=>({...de,submit:"Failed to create session. Please try again."}))}finally{He(!1)}}};y.useEffect(()=>{if(!G)return;const D=re=>{W.current&&!W.current.contains(re.target)&&ne(!1)};return document.addEventListener("mousedown",D),document.addEventListener("touchstart",D,{passive:!0}),()=>{document.removeEventListener("mousedown",D),document.removeEventListener("touchstart",D)}},[G]);const on=y.useCallback(async()=>{var D;if(!e){console.log("[SessionSelectionScreen] No current user, skipping loadUserSessions");return}if(p.current){console.log("[SessionSelectionScreen] Sessions already loading, skipping duplicate call");return}p.current=!0,d(!0);try{const de=zh(e.email)||await ro(e.id);K(de);let Ne;de?Ne=await Wd():Ne=await jE(e.id);const Ge=(e==null?void 0:e.tenant_id)??(e==null?void 0:e.tenantId)??null;let Je={},be={};if(Ge)try{const Ot=await Ho(Ge);Je=Ot.reduce((Te,Bt)=>(Bt.id&&Bt.name&&(Te[Bt.id]=Bt.name),Te),{}),be=Ot.reduce((Te,Bt)=>(Bt.id&&Bt.color_hex&&(Te[Bt.id]=Bt.color_hex),Te),{})}catch(Ot){console.error("Error loading products for session selection:",Ot)}const pe={},st={},At={},ot={},kt={};for(let Ot=0;Ot<Ne.length;Ot++){const Te=Ne[Ot];try{const[Bt,et,tt,Ct,lt,qt]=await Promise.all([de?Promise.resolve(!0):Dx(Te.id,e.id),$x(Te.id,e.email),xi(Te.id),Uo(Te.id).catch(O=>(console.warn(`Failed to load votes for session ${Te.id}:`,O),[])),Wm(Te.id).catch(()=>[]),p0(Te.id).catch(()=>[])]);pe[Te.id]={isAdmin:Bt,isStakeholder:et},st[Te.id]=tt.length,ot[Te.id]=lt.length,kt[Te.id]=qt.length;const pt=Ct.some(O=>O.user_id===e.id);At[Te.id]=pt}catch(Bt){console.warn(`Error loading data for session ${Te.id}:`,Bt),pe[Te.id]={isAdmin:!1,isStakeholder:!1},st[Te.id]=0,ot[Te.id]=0,kt[Te.id]=0,At[Te.id]=!1}}await r(),x(Ne),k(pe),_(st),C(At),P(ot),M(kt),ve(Je),H(be)}catch(re){console.error("Error loading sessions:",re),(D=re==null?void 0:re.message)!=null&&D.includes("Failed to fetch")||(re==null?void 0:re.code)==="ERR_FAILED"?(console.warn("Network error loading sessions - will retry. This is usually temporary."),x([]),k({}),_({}),C({})):(x([]),k({}),_({}),C({})),p.current=!1}finally{d(!1)}},[e,r]);y.useEffect(()=>{if(s)return;if((window.location.search.includes("code=")||window.location.hash.includes("access_token")||window.location.search.includes("error="))&&!e&&!m){f(!0);const re=setTimeout(()=>{f(!1),e||a("/login",{replace:!0})},3e3);return()=>clearTimeout(re)}if(m&&e&&f(!1),!m){if(!e&&!s){a("/login",{replace:!0});return}e&&!s&&!p.current&&on()}},[e,s,a,m]);const Nr=D=>{const re=b[D.id]||0;if(D.use_auto_votes){const de=Math.max(1,Math.floor(re/2));return{votes:de,displayText:`${de} votes/user`,isAuto:!0,formula:`Auto: ${re} ${re===1?"feature":"features"}  2 = ${de}`}}else return{votes:D.votes_per_user,displayText:`${D.votes_per_user} votes/user`,isAuto:!1,formula:""}},Or=D=>{t(D);const re=w[D.id],de=B==="system-admin"?"system":"session";B==="stakeholder"?a("/vote"):re!=null&&re.isAdmin?a(`/admin?perspective=${de}`):a("/vote")},Gn=D=>{t(D),a("/vote")},Ss=async()=>{try{await Ee.auth.signOut()}catch{}try{t(null)}catch{}n(null);try{localStorage.removeItem("voting_system_current_session"),localStorage.removeItem("azureDevOpsAuthInProgress"),sessionStorage.removeItem("oauth_return_path"),sessionStorage.removeItem("oauth_action")}catch{}ne(!1),a("/login",{replace:!0})},Dr=D=>{const de=D.split("T")[0].split(" ")[0].split("-");if(de.length!==3)return new Date(D).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}).replace(/\b(\d{4})\b/g,ot=>`'${ot.slice(-2)}`);const Ne=parseInt(de[0],10),Ge=parseInt(de[1],10)-1,Je=parseInt(de[2],10);return new Date(Ne,Ge,Je).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}).replace(/\b(\d{4})\b/g,st=>`'${st.slice(-2)}`)},In="2099-12-31",Jr=D=>D?D.split("T")[0]===In:!1,kn=D=>{if(!D.is_active){const re=!D.title||D.title==="Untitled Session"||D.title.trim()==="",de=!D.goal||D.goal.trim()==="";return re||de}return!1},us=D=>{if(kn(D))return{text:"Draft",color:"text-yellow-900 bg-yellow-200",icon:Vh};const re=new Date,de=new Date(D.start_date),Ne=new Date(D.end_date);return re<de?{text:"Upcoming",color:"text-yellow-600 bg-yellow-50",icon:Lx}:re>Ne?{text:"Closed",color:"text-gray-600 bg-gray-100",icon:nn}:{text:"Active",color:"text-[#1E6154] bg-[#1E6154]/10",icon:un}},Vs=D=>[...D].sort((re,de)=>{const Ne=re!=null&&re.end_date?Date.parse(re.end_date):0;return(de!=null&&de.end_date?Date.parse(de.end_date):0)-Ne}),vo=D=>D.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;"),ol=D=>vo(D).replace(/\n/g,"<br />"),ci=D=>{const re=Ir(D,q);return re?`${re}  ${D.title}`:`You're invited to vote: ${D.title}`},xo=(D,re)=>{const de=Ir(D,q);return`Hello,

You're invited to participate in the "${de?`${de}  ${D.title}`:D.title}" feature voting session.

`+(D.goal?`Goal: ${D.goal}

`:"")+`Voting Period: ${Jr(D.start_date)||Jr(D.end_date)?"Dates not set":`${Dr(D.start_date)} - ${Dr(D.end_date)}`}

Click the "Go Vote!" button below to sign in and cast your votes.

Need help? Reach out to the product owner team.

Thanks,
${(e==null?void 0:e.name)||"Feature Voting System"}`},ui=(D,re)=>{const de="https://dcchoffman.github.io/feature-voting-app/New-Millennium-color-logo1.png";window.location.pathname.startsWith("/feature-voting-app");const Ne=Ir(D,q),Ge=Ne?`${Ne}  ${D.title}`:D.title;return`
<table width="100%" cellpadding="0" cellspacing="0" border="0" style="background-color: #f9fafb; font-family: Arial, sans-serif;">
  <tr>
    <td align="center" style="padding: 48px 20px;">
      <table width="600" cellpadding="0" cellspacing="0" border="0" style="background-color: #ffffff; border-radius: 8px; box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);">
        <!-- Logo Header -->
        <tr>
          <td style="background-color: #ffffff; padding: 32px 40px 24px 40px; text-align: center;">
            <img src="${de}" alt="New Millennium Building Systems" width="300" height="96" style="height: 96px; width: auto; max-width: 300px; display: block; margin: 0 auto; border: 0;" />
            <div style="font-size: 24px; font-weight: bold; color: #2d4660; margin-top: 16px;">You're Invited to Vote</div>
          </td>
        </tr>
        
        <!-- Main Content -->
        <tr>
          <td style="background-color: #ffffff; padding: 40px;">
            <p style="margin: 0 0 16px 0; font-size: 16px; color: #333;">Hello,</p>
            <p style="margin: 0 0 24px 0; font-size: 16px; color: #333; line-height: 1.6;">You're invited to participate in the <strong style="color: #2d4660;">"${Ge}"</strong> feature voting session.</p>
            
            ${D.goal?`<p style="margin: 0 0 24px 0; font-size: 16px; color: #333; line-height: 1.6;"><strong style="color: #2d4660;">Goal:</strong> ${vo(D.goal)}</p>`:""}
            
            <p style="margin: 0 0 24px 0; font-size: 16px; color: #333; line-height: 1.6;"><strong style="color: #2d4660;">Voting Period:</strong> ${Jr(D.start_date)||Jr(D.end_date)?"Dates not set":`${Dr(D.start_date)} - ${Dr(D.end_date)}`}</p>
            
            <p style="margin: 24px 0; font-size: 16px; color: #333; line-height: 1.6;">Click the button below to sign in and cast your votes.</p>
            
            <!-- Go Vote Button - Gold styling like admin email -->
            <table width="100%" cellpadding="0" cellspacing="0" border="0" style="margin: 32px 0;">
              <tr>
                <td align="center">
                  <a href="${re}" style="display: inline-block; padding: 12px 24px; background-color: #C89212; color: white; text-decoration: none; border-radius: 6px; font-weight: 600; font-size: 16px; box-shadow: 0 1px 2px 0 rgba(0, 0, 0, 0.05);">Go Vote!</a>
                </td>
              </tr>
            </table>
            
            <p style="margin: 24px 0 0 0; font-size: 14px; color: #6b7280; line-height: 1.6;">Need help? Reach out to the product owner team.</p>
            
            <p style="margin: 24px 0 0 0; font-size: 16px; color: #333; line-height: 1.6;">Thanks,<br />${(e==null?void 0:e.name)||"Feature Voting System"}</p>
          </td>
        </tr>
        
        <!-- Footer -->
        <tr>
          <td style="background-color: #f9fafb; padding: 20px; text-align: center; border-top: 1px solid #e5e7eb; font-size: 12px; color: #6b7280;">
            <p style="margin: 0 0 8px 0;">This is an automated message from the Feature Voting System.</p>
            <p style="margin: 0; color: #9ca3af;"> ${new Date().getFullYear()} New Millennium Building Systems</p>
          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>`},di=async(D,re)=>{D.stopPropagation();const de=window.location.pathname.startsWith("/feature-voting-app")?"/feature-voting-app":"",Ne=`${window.location.origin}${de}/login?session=${re.session_code}`;Ce(""),Le(re),_r(Ne),hn(ci(re)),Ws(xo(re)),ks(!0),ye(!0),tr([]),Ar([]);try{const Je=(await p0(re.id)).filter(At=>!!At.user_email),be=await vE(),pe=new Set(be.map(At=>At.email.toLowerCase())),st=Je.filter(At=>pe.has(At.user_email.toLowerCase()));tr(st),Ar(st.map(At=>At.user_email.toLowerCase())),st.length===0&&(Je.length>0?Ce("No active stakeholders found for this session. Some stakeholders may have been deleted. Add stakeholders first, then send invites."):Ce("No stakeholders found for this session. Add stakeholders first, then send invites."))}catch(Ge){console.error("Error loading stakeholders:",Ge),Ce(Ge.message||"Failed to load stakeholders for this session.")}finally{ye(!1)}},wa=(D,re)=>{D.stopPropagation(),t(re),a(`/results?perspective=${B==="system-admin"?"system":"session"}`)},Is=()=>{ks(!1),tr([]),Ar([]),Le(null),Ce("")},ba=D=>{Ar(re=>{const de=D.toLowerCase();return re.includes(de)?re.filter(Ne=>Ne!==de):[...re,de]})},Su=()=>{Ar(dr?[]:Tt)},_u=async()=>{if(!rt)return;if(Tn.length===0){Ce("Select at least one stakeholder to email.");return}Ce(""),ae(!0);const D=Tn.length,re=rt.title,de=cs||xo(rt),Ne=ls||ci(rt),Ge=`
      <table width="100%" cellpadding="0" cellspacing="0" border="0" style="margin: 24px 0;">
        <tr>
          <td align="center">
            <a href="${Br}" style="display: inline-block; padding: 12px 24px; background-color: #C89212; color: white; text-decoration: none; border-radius: 6px; font-weight: 600; font-size: 16px; box-shadow: 0 1px 2px 0 rgba(0, 0, 0, 0.05);">Go Vote!</a>
          </td>
        </tr>
      </table>
    `;let Je;if(cs){const be="https://dcchoffman.github.io/feature-voting-app/New-Millennium-color-logo1.png";let pe=ol(de);Br&&pe.includes(vo(Br))&&(pe=pe.replace(new RegExp(vo(Br),"g"),"")),pe=pe+Ge,Je=`
<table width="100%" cellpadding="0" cellspacing="0" border="0" style="background-color: #f9fafb; font-family: Arial, sans-serif;">
  <tr>
    <td align="center" style="padding: 48px 20px;">
      <table width="600" cellpadding="0" cellspacing="0" border="0" style="background-color: #ffffff; border-radius: 8px; box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);">
        <!-- Logo Header -->
        <tr>
          <td style="background-color: #ffffff; padding: 32px 40px 24px 40px; text-align: center;">
            <img src="${be}" alt="New Millennium Building Systems" width="300" height="96" style="height: 96px; width: auto; max-width: 300px; display: block; margin: 0 auto; border: 0;" />
            <div style="font-size: 24px; font-weight: bold; color: #2d4660; margin-top: 16px;">You're Invited to Vote</div>
          </td>
        </tr>
        
        <!-- Main Content -->
        <tr>
          <td style="background-color: #ffffff; padding: 40px;">
            <div style="font-family: Arial, sans-serif; font-size: 14px; color: #111827; line-height: 1.6;">${pe}</div>
          </td>
        </tr>
        
        <!-- Footer -->
        <tr>
          <td style="background-color: #f9fafb; padding: 20px; text-align: center; border-top: 1px solid #e5e7eb; font-size: 12px; color: #6b7280;">
            <p style="margin: 0 0 8px 0;">This is an automated message from the Feature Voting System.</p>
            <p style="margin: 0; color: #9ca3af;"> ${new Date().getFullYear()} New Millennium Building Systems</p>
          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>`}else Je=ui(rt,Br);try{await Promise.all(Tn.map(pe=>Jc({to:pe,subject:Ne,text:de,html:Je})));const be=Kn.filter(pe=>Tn.includes(pe.user_email.toLowerCase())).map(pe=>({name:pe.user_name||"Unnamed Stakeholder",email:pe.user_email}));Is(),Z({sessionTitle:re,count:D,stakeholders:be})}catch(be){console.error("Error sending stakeholder invites:",be),Ce(be.message||"Failed to send invites. Please try again.")}finally{ae(!1)}},wo=(D,re)=>{D.stopPropagation(),t(re);const de=re.product_id||re.productId||"",Ne=de?`/users?filter=product-owner&product=${de}`:"/users?filter=product-owner";a(Ne)},bo=(D,re)=>{D.stopPropagation(),t(re);const de=re.product_id||re.productId||"",Ne=de?`/users?filter=stakeholder&product=${de}`:"/users?filter=stakeholder";a(Ne)},fi=()=>{le(!1),mr(!1),Sr(!1),ct(),se("")};if(u)return i.jsx("div",{className:"min-h-screen w-full bg-gray-50 flex items-center justify-center",children:i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-[#2D4660] mx-auto mb-4"}),i.jsx("p",{className:"text-gray-600",children:"Loading sessions..."})]})});const $i=Vs(v),_s=R?$i:$i.filter(D=>{var re;return(re=w[D.id])==null?void 0:re.isAdmin}),hi=R?[]:$i.filter(D=>{var re,de;return((re=w[D.id])==null?void 0:re.isStakeholder)&&!((de=w[D.id])!=null&&de.isAdmin)}),Ds=R||_s.length>0,jo=R&&B==="system-admin",Ri=B==="stakeholder"?$i.filter(D=>us(D).text==="Active"):[],$s=B==="admin"||B==="system-admin"?_s:[],ko=B==="admin"?hi:[],ds=(D,re)=>{const de={};return D.forEach(Ne=>{const Ge=Ir(Ne,re);if(!Ge||Ge==="No Product"||Ge.trim()==="")return;const Je=Ge.toLowerCase().trim();de[Je]||(de[Je]=[]),de[Je].push(Ne)}),de},fs=D=>{rr(re=>{const de=new Set(re);return de.has(D)?de.delete(D):de.add(D),de})},ja=(D,re,de,Ne)=>{const Ge=Ne||de||D,Je=async be=>{if(!de)return;be.stopPropagation();let pe=Y.find(st=>st.id===de);if(!pe){const st=(e==null?void 0:e.tenant_id)??(e==null?void 0:e.tenantId);if(st)try{pe=(await Ho(st)).find(ot=>ot.id===de),pe&&ge(ot=>ot.find(Ot=>Ot.id===de)?ot:[...ot,pe].sort((Ot,Te)=>Ot.name.localeCompare(Te.name)))}catch(At){console.error("Error loading product for edit:",At)}}pe&&(bn(pe),Rr(pe.name||""),an(pe.color_hex||null),Ts(pe.color_hex||"#2D4660"))};return i.jsxs("div",{className:"absolute left-0 px-4 py-1 pr-8 rounded-t-md border-b-0 text-sm font-semibold shadow-sm z-20 flex items-center gap-2 whitespace-nowrap group cursor-pointer",style:{top:"0",left:"-1px",transform:"translateY(-100%)",backgroundColor:re.background,color:re.text,borderColor:re.border,borderWidth:"1px",borderBottomWidth:"0",boxShadow:"0 4px 8px rgba(16,24,40,0.06)",borderTopLeftRadius:"0.9rem",borderTopRightRadius:"0.9rem",overflow:"visible"},onMouseEnter:()=>{de&&B!=="stakeholder"&&Ds&&wn(Ge)},onMouseLeave:()=>wn(null),onClick:B!=="stakeholder"&&Ds?Je:void 0,children:[i.jsx(b0,{className:"h-4 w-4 flex-shrink-0"}),i.jsx("span",{className:"overflow-hidden text-ellipsis flex-1 min-w-0",children:D}),de&&Vn===Ge&&B!=="stakeholder"&&Ds&&i.jsx("div",{className:"absolute right-2 flex-shrink-0 opacity-80",children:i.jsx(Vh,{className:"h-4 w-4",style:{color:re.text}})})]})},ka=(D,re,de,Ne,Ge,Je,be,pe=!0,st)=>i.jsxs(i.Fragment,{children:[pe&&ja(re,de,st),i.jsxs("div",{className:"flex flex-col h-full",children:[i.jsx("div",{className:"w-full px-6 py-2 rounded-t-md border-b border-gray-200",style:{backgroundColor:de.background,color:de.text},children:i.jsx("h3",{className:"text-lg font-semibold",children:D.title})}),i.jsxs("div",{className:"flex flex-col flex-1",style:{padding:"15px"},children:[B!=="stakeholder"&&(()=>{const At=Ot=>{if(!Ot||Jr(Ot))return 0;const Te=new Date(Ot),Bt=new Date;Bt.setHours(0,0,0,0),Te.setHours(0,0,0,0);const et=Te.getTime()-Bt.getTime();return Math.ceil(et/(1e3*60*60*24))};let ot="Cast your Votes",kt=!1;if(Ne.text==="Upcoming"){const Ot=At(D.start_date);ot=`Cast your Vote in ${Ot} ${Ot===1?"day":"days"}`,kt=!0}else Ne.text==="Closed"||Ne.text==="Draft"?(ot="Voting Session Closed",kt=!0):Ne.text==="Active"?(ot="Cast your Votes",kt=!1):(ot="Voting Session Closed",kt=!0);return i.jsxs("button",{onClick:Ot=>{Ot.stopPropagation(),kt||Gn(D)},disabled:kt,className:`w-full flex items-center justify-center px-3 py-2 rounded-md transition-colors mb-4 ${kt?"bg-gray-200 text-gray-500 cursor-not-allowed":"bg-[#1E6154]/10 hover:bg-[#1E6154]/20 text-[#1E6154]"}`,style:kt?{cursor:"not-allowed"}:{},children:[i.jsx(gn,{className:`h-4 w-4 mr-2 ${kt?"text-gray-500":"text-[#1E6154]"}`}),i.jsx("span",{className:`text-sm font-medium ${kt?"text-gray-500":"text-[#1E6154]"}`,children:ot})]})})(),i.jsx("p",{className:"text-sm text-gray-600 mb-4 line-clamp-2",children:D.goal}),i.jsx("div",{className:"flex-1"}),i.jsxs("div",{className:"space-y-2 text-sm text-gray-500",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center",children:[i.jsx(Si,{className:"h-4 w-4 mr-2"}),Jr(D.start_date)||Jr(D.end_date)?i.jsx("span",{className:"text-gray-400 italic",children:"Dates not set"}):i.jsxs("span",{children:[Dr(D.start_date)," - ",Dr(D.end_date)]})]}),i.jsxs("span",{className:`inline-flex items-center ${Ne.text==="Active"?"px-3 py-1 text-sm":"px-2 py-0.5 text-xs"} rounded-full font-medium ${Ne.color}`,children:[i.jsx(Ge,{className:`${Ne.text==="Active"?"h-4 w-4":"h-3 w-3"} mr-1`}),Ne.text]})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center",children:[i.jsx(ki,{className:"h-4 w-4 mr-2"}),i.jsxs("span",{children:[b[D.id]||0," ",b[D.id]===1?"feature":"features"]})]}),i.jsx("span",{className:"text-sm font-medium text-[#2D4660]",children:re})]}),i.jsxs("div",{className:"flex items-start",children:[i.jsx(gn,{className:"h-4 w-4 mr-2 mt-0.5 flex-shrink-0"}),i.jsxs("div",{className:"flex-1 flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center",children:[i.jsx("span",{className:"break-words",children:Je.displayText}),Je.isAuto&&i.jsxs("div",{className:"group relative ml-1 mt-0.5",children:[i.jsx(lh,{className:"h-4 w-4 text-blue-500 cursor-help"}),i.jsxs("div",{className:"absolute bottom-full left-1/2 -translate-x-1/2 mb-2 px-3 py-2 bg-gray-900 text-white text-xs rounded-lg opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-200 whitespace-nowrap z-10 pointer-events-none",children:[Je.formula,i.jsx("div",{className:"absolute top-full left-1/2 -translate-x-1/2 -mt-1 border-4 border-transparent border-t-gray-900"})]})]})]}),Ne.text!=="Upcoming"&&Ne.text!=="Draft"&&B!=="stakeholder"&&i.jsxs("button",{onClick:At=>wa(At,D),className:"ml-4 inline-flex items-center px-3 py-1 rounded-full text-xs font-medium bg-[#C89212] text-white hover:bg-[#E0A814] transition-colors cursor-pointer flex-shrink-0",children:[i.jsx(Ph,{className:"h-3 w-3 mr-1"}),Ne.text==="Closed"?"Final Results":"Current Results"]})]})]}),B!=="stakeholder"&&i.jsxs("div",{className:"flex items-center justify-center min-h-[48px] border-t border-gray-200 text-sm text-gray-600",children:[i.jsxs("button",{onClick:At=>{At.stopPropagation(),wo(At,D)},className:"flex items-center mr-3 text-[#2D4660] hover:text-[#1D3144] hover:underline cursor-pointer",children:[i.jsx(Hr,{className:"h-4 w-4 mr-1.5"}),T[D.id]!==void 0?T[D.id]:0," Product Owner",T[D.id]!==1?"s":""]}),i.jsx("span",{className:"text-gray-400",children:""}),i.jsxs("button",{onClick:At=>{At.stopPropagation(),bo(At,D)},className:"flex items-center ml-3 text-[#1E5461] hover:text-[#576C71] hover:underline cursor-pointer",children:[i.jsx(es,{className:"h-4 w-4 mr-1.5"}),A[D.id]!==void 0?A[D.id]:0," Stakeholder",A[D.id]!==1?"s":""]})]}),B==="stakeholder"&&(()=>{const At=Ot=>{if(!Ot||Jr(Ot))return 0;const Te=new Date(Ot),Bt=new Date;Bt.setHours(0,0,0,0),Te.setHours(0,0,0,0);const et=Te.getTime()-Bt.getTime();return Math.ceil(et/(1e3*60*60*24))};let ot="Cast your Votes",kt=!1;if(Ne.text==="Upcoming"){const Ot=At(D.start_date);ot=`Cast your Vote in ${Ot} ${Ot===1?"day":"days"}`,kt=!0}else Ne.text==="Closed"||Ne.text==="Draft"?(ot="Voting Session Closed",kt=!0):Ne.text==="Active"?(ot="Cast your Votes",kt=!1):(ot="Voting Session Closed",kt=!0);return i.jsxs("button",{onClick:Ot=>{Ot.stopPropagation(),kt||Gn(D)},disabled:kt,className:`w-full flex items-center justify-center px-3 py-2 rounded-md transition-colors mt-4 ${kt?"bg-gray-200 text-gray-500 cursor-not-allowed":"bg-[#1E6154]/10 hover:bg-[#1E6154]/20 text-[#1E6154]"}`,style:kt?{cursor:"not-allowed"}:{},children:[i.jsx(gn,{className:`h-6 w-6 mr-2 ${kt?"text-gray-500":"text-[#1E6154]"}`}),i.jsx("span",{className:`text-sm font-medium ${kt?"text-gray-500":"text-[#1E6154]"}`,children:ot})]})})()]}),B!=="stakeholder"&&i.jsx("div",{className:"pt-4 border-t border-gray-200",children:(()=>{const At=kn(D),ot=be||At;return i.jsxs("div",{className:`relative inline-block w-full ${ot?"group":""}`,children:[i.jsxs("button",{onClick:kt=>di(kt,D),disabled:ot,className:`w-full flex items-center justify-center px-3 py-2 rounded-md transition-colors ${ot?"bg-gray-200 text-gray-500":"bg-blue-50 hover:bg-blue-100"}`,style:ot?{cursor:"not-allowed"}:{},children:[i.jsx(Ym,{className:`h-4 w-4 mr-2 ${ot?"text-gray-500":"text-blue-600"}`}),i.jsx("span",{className:`text-sm font-medium ${ot?"text-gray-500":"text-blue-600"}`,children:"Email Invite to Stakeholders"})]}),ot&&i.jsxs("div",{className:"absolute top-full left-1/2 -translate-x-1/2 mt-2 px-2 py-1 bg-gray-100 text-gray-800 text-xs rounded shadow-sm opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-200 whitespace-nowrap z-10 pointer-events-none",children:[At?"Draft Session":"Session Closed",i.jsx("div",{className:"absolute -top-1 left-1/2 -translate-x-1/2 w-2 h-2 bg-gray-100 rotate-45 transform"})]})]})})()})]})]})]});return s||m||u&&!e?i.jsx("div",{className:"min-h-screen w-full bg-gray-50 flex items-center justify-center",children:i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-[#2d4660] mx-auto mb-4"}),i.jsx("p",{className:"text-gray-600",children:"Signing you in..."})]})}):i.jsxs("div",{className:"container mx-auto p-4 max-w-6xl min-h-screen pb-8",children:[i.jsx("div",{className:"hidden md:flex md:justify-center mb-2",children:i.jsx("img",{src:Di,alt:"New Millennium Building Systems Logo",className:"-mt-4 cursor-pointer hover:opacity-80 transition-opacity",style:{height:"96px",width:"auto"},onClick:()=>a("/sessions")})}),i.jsxs("div",{className:"flex justify-between items-center mb-6",children:[i.jsxs("div",{className:"flex items-center",children:[i.jsx("img",{src:Zl,alt:"New Millennium Building Systems Logo",className:"mr-4 md:hidden cursor-pointer hover:opacity-80 transition-opacity",style:{width:"40px",height:"40px",objectFit:"contain"},onClick:()=>a("/sessions")}),i.jsxs("div",{children:[i.jsx("h1",{className:"text-2xl font-bold text-[#2D4660] md:text-3xl",children:"My Voting Sessions"}),i.jsxs("p",{className:"text-sm text-gray-600",children:["Welcome, ",e==null?void 0:e.name,(()=>{const D=R?"system-admin":_s.length>0?"product-owner":"stakeholder",re=D==="system-admin"?i.jsxs("span",{className:"inline-flex items-baseline text-[#C89212]",children:[i.jsx("span",{className:"inline-flex items-center",children:i.jsx(fn,{className:"h-3.5 w-3.5"})}),i.jsx("span",{className:"ml-1 text-sm",children:"System Admin"})]}):D==="product-owner"?i.jsxs("span",{className:"inline-flex items-baseline text-[#576C71]",children:[i.jsx("span",{className:"inline-flex items-center",children:i.jsx(Hr,{className:"h-3.5 w-3.5"})}),i.jsx("span",{className:"ml-1 text-sm",children:"Product Owner"})]}):i.jsxs("span",{className:"inline-flex items-baseline text-[#8B5A4A]",children:[i.jsx("span",{className:"inline-flex items-center",children:i.jsx(vs,{className:"h-3.5 w-3.5"})}),i.jsx("span",{className:"ml-1 text-sm",children:"Stakeholder"})]}),de=R&&B==="system-admin"?"system-admin":B==="admin"?"product-owner":"stakeholder";if(de===D)return i.jsxs("span",{className:"text-sm text-gray-600",children:[", ",re]});const Ne=de==="system-admin"?i.jsxs("span",{className:"inline-flex items-baseline text-[#C89212]",children:[i.jsx("span",{className:"inline-flex items-center",children:i.jsx(fn,{className:"h-3.5 w-3.5"})}),i.jsx("span",{className:"ml-1 text-sm",children:"System Admin"})]}):de==="product-owner"?i.jsxs("span",{className:"inline-flex items-baseline text-[#576C71]",children:[i.jsx("span",{className:"inline-flex items-center",children:i.jsx(Hr,{className:"h-3.5 w-3.5"})}),i.jsx("span",{className:"ml-1 text-sm",children:"Product Owner"})]}):i.jsxs("span",{className:"inline-flex items-baseline text-[#8B5A4A]",children:[i.jsx("span",{className:"inline-flex items-center",children:i.jsx(vs,{className:"h-3.5 w-3.5"})}),i.jsx("span",{className:"ml-1 text-sm",children:"Stakeholder"})]});return i.jsxs("span",{className:"text-sm text-gray-600",children:[", ",re,i.jsx("span",{className:"md:inline hidden",children:", "}),i.jsxs("span",{className:"whitespace-nowrap md:inline inline-block",children:[i.jsx("span",{className:"md:hidden",children:", "}),"viewing this page as a ",Ne]})]})})()]})]})]}),i.jsxs("div",{ref:W,className:"relative z-40 md:justify-end",children:[i.jsxs("div",{className:"hidden md:flex space-x-2",children:[R&&(B==="admin"||B==="system-admin")&&i.jsx(i.Fragment,{children:i.jsxs("button",{onClick:()=>a("/users"),className:"flex items-center px-4 py-2 bg-[#2D4660] text-white rounded-lg hover:bg-[#173B65] transition-colors",children:[i.jsx(es,{className:"h-4 w-4 mr-2"}),"User Management"]})}),(R||_s.length>0)&&(B==="admin"||B==="system-admin")&&i.jsx(i.Fragment,{children:i.jsxs("button",{onClick:()=>{ct(),mr(!1),te(!0),se(""),le(!0)},className:"flex items-center px-4 py-2 bg-[#C89212] text-white rounded-lg hover:bg-[#6A4234] transition-colors",children:[i.jsx(Cn,{className:"h-4 w-4 mr-2"}),i.jsx("span",{className:"hidden sm:inline",children:"Create Session"}),i.jsx("span",{className:"sm:hidden",children:"Create"})]})}),i.jsxs("button",{onClick:Ss,className:`flex items-center justify-center bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-colors ${B==="stakeholder"?"px-4 py-2":"p-2 w-10 h-10"}`,title:"Logout",children:[i.jsx(Ma,{className:"h-4 w-4"}),B==="stakeholder"&&i.jsx("span",{className:"ml-2",children:"Logout"})]})]}),i.jsx("div",{className:"flex md:hidden justify-end",children:i.jsx("button",{onClick:()=>ne(!G),className:"p-2 rounded-md border border-gray-200 bg-white shadow-sm","aria-label":"Open menu",children:i.jsx(ki,{className:"h-5 w-5 text-gray-700"})})}),G&&i.jsx("div",{className:"absolute right-0 mt-2 w-56 bg-white border border-gray-200 rounded-lg shadow-lg md:hidden z-50",children:i.jsxs("div",{className:"py-1",children:[R&&(B==="admin"||B==="system-admin")&&i.jsx(i.Fragment,{children:i.jsxs("button",{onClick:()=>{ne(!1),a("/users")},className:"w-full px-3 py-2 flex items-center text-left hover:bg-gray-50",children:[i.jsx(es,{className:"h-4 w-4 mr-2 text-gray-700"}),"User Management"]})}),(R||_s.length>0)&&(B==="admin"||B==="system-admin")&&i.jsx(i.Fragment,{children:i.jsxs("button",{onClick:()=>{ct(),ne(!1),te(!0),le(!0)},className:"w-full px-3 py-2 flex items-center text-left hover:bg-gray-50",children:[i.jsx(Cn,{className:"h-4 w-4 mr-2 text-gray-700"}),"Create Session"]})}),i.jsxs("button",{onClick:()=>{ne(!1),Ss()},className:`w-full px-3 py-2 flex items-center hover:bg-gray-50 ${B==="stakeholder"?"text-left":"justify-center"}`,title:"Logout",children:[i.jsx(Ma,{className:"h-4 w-4 text-gray-700"}),B==="stakeholder"&&i.jsx("span",{className:"ml-2 text-base text-gray-700",children:"Logout"})]})]})})]})]}),v.length===0?i.jsxs("div",{className:"bg-white rounded-lg shadow-md p-12 text-center",children:[i.jsx(gn,{className:"mx-auto h-12 w-12 text-gray-400 mb-4"}),i.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No voting sessions"}),i.jsx("p",{className:"text-sm text-gray-500 mb-6",children:"You are not part of any voting sessions yet."}),R&&i.jsxs("button",{onClick:()=>{ct(),te(!0),le(!0)},className:"inline-flex items-center px-4 py-2 bg-[#2D4660] text-white rounded-lg hover:bg-[#173B65] transition-colors",children:[i.jsx(Cn,{className:"h-5 w-5 mr-2"}),"Create Your First Session"]})]}):i.jsxs("div",{className:"space-y-8",children:[B==="stakeholder"&&i.jsxs("div",{children:[i.jsxs("h2",{className:"text-xl font-semibold text-[#2D4660] mb-4 flex items-center",children:[i.jsx(gn,{className:"h-5 w-5 mr-2"}),"All Your Voting Sessions"]}),(()=>{const D=Ri.filter(be=>{const pe=Ir(be,q);return pe&&pe!=="No Product"&&pe.trim()!==""}),re=Ri.filter(be=>{const pe=Ir(be,q);return!pe||pe==="No Product"||pe.trim()===""}),de=ds(D,q),Ne=[],Ge=[],Je=[];return Object.entries(de).forEach(([be,pe])=>{pe.length>=2?Ne.push({key:be,sessions:pe}):pe.length===1?Ge.push({key:be,sessions:pe}):Je.push(...pe)}),i.jsxs("div",{className:"space-y-8",children:[Ne.map(({key:be,sessions:pe})=>{var tt,Ct;const st=Jt.has(be),At=st?pe:pe.slice(0,3),ot=pe.length>3?pe.length-3:0,kt=Ir(pe[0],q),Ot=(tt=pe[0])!=null&&tt.product_id?$[pe[0].product_id]:void 0,Te=cr(kt,Ot),Bt=(lt,qt)=>{const pt=lt.replace("#",""),O=parseInt(pt.substring(0,2),16),fe=parseInt(pt.substring(2,4),16),_e=parseInt(pt.substring(4,6),16);return`rgba(${O}, ${fe}, ${_e}, ${qt})`},et=Te.background?Bt(Te.background,.1):"#F9FAFB";return i.jsx("div",{className:"relative",style:{marginTop:"50px"},children:i.jsxs("div",{className:"rounded-lg rounded-tl-none border border-gray-200 relative overflow-visible",style:{backgroundColor:et,borderColor:Te.border||"#E5E7EB",padding:"24px",marginTop:B==="stakeholder"?"25px":void 0},children:[ja(kt,Te,(Ct=pe[0])==null?void 0:Ct.product_id,be),ot>0&&i.jsx("div",{className:"absolute right-0 z-20 hidden md:block",style:{top:"0",transform:"translateY(calc(-100% - 3px))"},children:i.jsx("button",{onClick:()=>fs(be),className:"flex items-center gap-1 text-sm text-[#2D4660] hover:text-[#173B65] transition-colors cursor-pointer",children:st?i.jsxs(i.Fragment,{children:["Show Less",i.jsx(Da,{className:"h-4 w-4 rotate-180"})]}):i.jsxs(i.Fragment,{children:["Show More (",ot,")",i.jsx(Da,{className:"h-4 w-4"})]})})}),Ds&&B!=="stakeholder"&&i.jsx("div",{className:"absolute z-20 bottom-[-20px] left-1/2 -translate-x-1/2 md:bottom-auto md:left-auto md:translate-x-0 md:right-[-20px] md:top-1/2 md:-translate-y-1/2",children:i.jsx("button",{onClick:lt=>{var _e;lt.stopPropagation();const qt=(_e=pe[0])==null?void 0:_e.product_id,pt=Ir(pe[0],q);qt&&se(qt),pt&&pt!=="No Product"&&ur(pt);let O=pe.length>0?Ve(pe[0].end_date):new Date;pe.forEach(Ze=>{const gt=Ve(Ze.end_date);gt>O&&(O=gt)});const fe=Pt(O,1);Pt(fe,14),ct(),se(qt),mr(!0),te(!1),Sr(!0),le(!0)},onMouseEnter:()=>Kt(be),onMouseLeave:()=>Kt(null),className:"flex items-center justify-center w-10 h-10 rounded-full shadow-md",style:{backgroundColor:Te.background||"#C89212",color:Te.text||"#FFFFFF"},title:`Create new session for ${kt}`,children:i.jsx(Cn,{className:"h-5 w-5"})})}),i.jsx("div",{className:"grid grid-cols-1 gap-6 sm:grid-cols-2 lg:grid-cols-3",children:At.map((lt,qt)=>{const pt=us(lt),O=pt.text==="Closed",fe=pt.icon,_e=Nr(lt),Ze=N[lt.id],gt=Ir(lt,q),ir=lt.product_id?$[lt.product_id]:void 0,Wr=cr(gt,ir);return i.jsx("div",{className:"relative z-10 bg-white overflow-visible shadow-md rounded-lg hover:shadow-lg transition-shadow cursor-pointer border",style:{borderColor:Wr.border,borderWidth:"1px",opacity:O&&fr!==lt.id?.75:1},onMouseEnter:()=>pr(lt.id),onMouseLeave:()=>pr(null),onClick:()=>Or(lt),children:i.jsxs("div",{className:"flex flex-col h-full",style:{padding:"15px"},children:[i.jsx("div",{className:"flex justify-end items-start mb-4",children:Ze?i.jsxs("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-xs font-medium bg-green-100 text-green-800",children:[i.jsx(un,{className:"h-3 w-3 mr-1"}),"Voted"]}):pt.text==="Active"?i.jsxs("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:[i.jsx(nn,{className:"h-3 w-3 mr-1"}),"Needs Your Vote"]}):null}),i.jsx("h3",{className:"text-lg font-semibold text-[#2D4660] mb-2",children:lt.title}),i.jsx("p",{className:"text-sm text-gray-600 mb-4 line-clamp-2",children:lt.goal}),i.jsx("div",{className:"flex-1"}),i.jsxs("div",{className:"space-y-2 text-sm text-gray-500",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center",children:[i.jsx(Si,{className:"h-4 w-4 mr-2"}),i.jsxs("span",{children:[Dr(lt.start_date)," - ",Dr(lt.end_date)]})]}),i.jsxs("span",{className:`inline-flex items-center ${pt.text==="Active"?"px-3 py-1 text-sm":"px-2 py-0.5 text-xs"} rounded-full font-medium ${pt.color}`,children:[i.jsx(fe,{className:`${pt.text==="Active"?"h-4 w-4":"h-3 w-3"} mr-1`}),pt.text]})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center",children:[i.jsx(ki,{className:"h-4 w-4 mr-2"}),i.jsxs("span",{children:[b[lt.id]||0," ",b[lt.id]===1?"feature":"features"," to vote on"]})]}),i.jsx("span",{className:"text-sm font-medium text-[#2D4660]",children:gt})]}),i.jsxs("div",{className:"flex items-center",children:[i.jsx(gn,{className:"h-4 w-4 mr-2"}),i.jsx("span",{children:_e.displayText}),_e.isAuto&&i.jsxs("div",{className:"group relative ml-1",children:[i.jsx(lh,{className:"h-4 w-4 text-blue-500 cursor-help"}),i.jsxs("div",{className:"absolute bottom-full left-1/2 -translate-x-1/2 mb-2 px-3 py-2 bg-gray-900 text-white text-xs rounded-lg opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-200 whitespace-nowrap z-10 pointer-events-none",children:[_e.formula,i.jsx("div",{className:"absolute top-full left-1/2 -translate-x-1/2 -mt-1 border-4 border-transparent border-t-gray-900"})]})]})]})]}),i.jsx("div",{className:"mt-4 pt-4 border-t border-gray-200",children:i.jsxs("button",{onClick:na=>{na.stopPropagation(),O||Or(lt)},disabled:O,className:`w-full flex items-center justify-center px-4 py-2 rounded-lg transition-colors font-medium ${O?"bg-gray-100 text-gray-500 cursor-not-allowed":Ze?"bg-gray-100 text-gray-700 hover:bg-gray-200":"bg-[#2D4660] text-white hover:bg-[#173B65]"}`,style:O?{cursor:"not-allowed"}:{},children:[i.jsx(gn,{className:"h-4 w-4 mr-2"}),Ze?"View or Change Votes":"Cast Your Votes"]})})]})},lt.id)})}),ot>0&&i.jsx("div",{className:"mt-4 md:hidden",children:i.jsx("button",{onClick:()=>fs(be),className:"w-full flex items-center justify-center gap-1 px-4 py-2 text-sm font-medium text-[#2D4660] bg-white hover:bg-gray-50 rounded-md border border-gray-300 transition-colors",children:st?i.jsxs(i.Fragment,{children:["Show Less",i.jsx(Da,{className:"h-4 w-4 rotate-180"})]}):i.jsxs(i.Fragment,{children:["Show More (",ot,")",i.jsx(Da,{className:"h-4 w-4"})]})})})]})},be)}),Ge.length>0&&i.jsx("div",{className:"grid grid-cols-1 gap-6 sm:grid-cols-2 lg:grid-cols-3",style:{marginTop:B==="stakeholder"?"30px":"50px"},children:Ge.map(({key:be,sessions:pe})=>{var Te,Bt;const st=Ir(pe[0],q),At=(Te=pe[0])!=null&&Te.product_id?$[pe[0].product_id]:void 0,ot=cr(st,At),kt=(et,tt)=>{const Ct=et.replace("#",""),lt=parseInt(Ct.substring(0,2),16),qt=parseInt(Ct.substring(2,4),16),pt=parseInt(Ct.substring(4,6),16);return`rgba(${lt}, ${qt}, ${pt}, ${tt})`},Ot=ot.background?kt(ot.background,.1):"#F9FAFB";return i.jsx("div",{className:"relative",children:i.jsxs("div",{className:"rounded-lg rounded-tl-none border border-gray-200 relative overflow-visible",style:{backgroundColor:Ot,borderColor:ot.border||"#E5E7EB",padding:"24px",marginTop:B==="stakeholder"?"25px":void 0},children:[ja(st,ot,(Bt=pe[0])==null?void 0:Bt.product_id,be),Ds&&B!=="stakeholder"&&i.jsx("div",{className:"absolute z-20 bottom-[-20px] left-1/2 -translate-x-1/2 md:bottom-auto md:left-auto md:translate-x-0 md:right-[-20px] md:top-1/2 md:-translate-y-1/2",children:i.jsx("button",{onClick:et=>{var pt;et.stopPropagation();const tt=(pt=pe[0])==null?void 0:pt.product_id,Ct=Ir(pe[0],q);tt&&se(tt),Ct&&Ct!=="No Product"&&ur(Ct);let lt=Ve(pe[0].end_date);const qt=Pt(lt,1);Pt(qt,14),ct(),se(tt),mr(!0),te(!1),Sr(!0),le(!0)},onMouseEnter:()=>Kt(be),onMouseLeave:()=>Kt(null),className:"flex items-center justify-center w-10 h-10 rounded-full shadow-md",style:{backgroundColor:ot.background||"#C89212",color:ot.text||"#FFFFFF"},title:`Create new session for ${st}`,children:i.jsx(Cn,{className:"h-5 w-5"})})}),pe.map(et=>{const tt=us(et),Ct=tt.text==="Closed",lt=tt.icon,qt=Nr(et);N[et.id];const pt=Ir(et,q),O=et.product_id?$[et.product_id]:void 0,fe=cr(pt,O);return i.jsx("div",{className:"relative z-10 bg-white overflow-visible shadow-md rounded-lg hover:shadow-lg transition-shadow cursor-pointer border",style:{borderColor:fe.border,borderWidth:"1px",opacity:Ct&&fr!==et.id?.75:1},onMouseEnter:()=>pr(et.id),onMouseLeave:()=>pr(null),onClick:()=>Or(et),children:ka(et,pt,fe,tt,lt,qt,Ct,!1,et.product_id)},et.id)})]})},be)})}),(Je.length>0||re.length>0)&&i.jsx("div",{className:"grid grid-cols-1 gap-0 sm:gap-6 sm:grid-cols-2 lg:grid-cols-3",children:[...Je,...re].map(be=>{const pe=us(be),st=pe.text==="Closed",At=pe.icon,ot=Nr(be),kt=N[be.id],Ot=Ir(be,q),Te=be.product_id?$[be.product_id]:void 0,Bt=cr(Ot,Te),et=Je.includes(be);return i.jsxs("div",{className:"relative z-10 bg-white overflow-visible shadow-md rounded-lg rounded-tl-none hover:shadow-lg transition-shadow cursor-pointer mt-6 border",style:{borderColor:Bt.border,borderWidth:"1px",opacity:st&&fr!==be.id?.75:1},onMouseEnter:()=>pr(be.id),onMouseLeave:()=>pr(null),onClick:()=>Or(be),children:[ja(Ot,Bt,be.product_id),et&&Ds&&B!=="stakeholder"&&i.jsx("div",{className:"absolute z-20 bottom-[-20px] left-1/2 -translate-x-1/2 md:bottom-auto md:left-auto md:translate-x-0 md:right-[-20px] md:top-1/2 md:-translate-y-1/2",children:i.jsx("button",{onClick:tt=>{tt.stopPropagation();const Ct=be.product_id,lt=Ir(be,q);Ct&&se(Ct),lt&&lt!=="No Product"&&ur(lt);const qt=Ve(be.end_date),pt=Pt(qt,1);Pt(pt,14),ct(),se(Ct),mr(!0),te(!1),Sr(!0),le(!0)},className:"flex items-center justify-center w-10 h-10 rounded-full transition-colors shadow-md hover:shadow-lg",style:{backgroundColor:Bt.background||"#C89212",color:Bt.text||"#FFFFFF"},onMouseEnter:tt=>{const Ct=Bt.background||"#C89212";tt.currentTarget.style.backgroundColor=Ct,tt.currentTarget.style.filter="brightness(0.8)"},onMouseLeave:tt=>{tt.currentTarget.style.backgroundColor=Bt.background||"#C89212",tt.currentTarget.style.filter="brightness(1)"},title:`Create new session for ${Ot}`,children:i.jsx(Cn,{className:"h-5 w-5"})})}),i.jsxs("div",{className:"flex flex-col h-full",style:{padding:"15px"},children:[i.jsx("div",{className:"flex justify-end items-start mb-4",children:kt?i.jsxs("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-xs font-medium bg-green-100 text-green-800",children:[i.jsx(un,{className:"h-3 w-3 mr-1"}),"Voted"]}):pe.text==="Active"?i.jsxs("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:[i.jsx(nn,{className:"h-3 w-3 mr-1"}),"Needs Your Vote"]}):null}),i.jsx("h3",{className:"text-lg font-semibold text-[#2D4660] mb-2",children:be.title}),i.jsx("p",{className:"text-sm text-gray-600 mb-4 line-clamp-2",children:be.goal}),i.jsx("div",{className:"flex-1"}),i.jsxs("div",{className:"space-y-2 text-sm text-gray-500",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center",children:[i.jsx(Si,{className:"h-4 w-4 mr-2"}),i.jsxs("span",{children:[Dr(be.start_date)," - ",Dr(be.end_date)]})]}),i.jsxs("span",{className:`inline-flex items-center ${pe.text==="Active"?"px-3 py-1 text-sm":"px-2 py-0.5 text-xs"} rounded-full font-medium ${pe.color}`,children:[i.jsx(At,{className:`${pe.text==="Active"?"h-4 w-4":"h-3 w-3"} mr-1`}),pe.text]})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center",children:[i.jsx(ki,{className:"h-4 w-4 mr-2"}),i.jsxs("span",{children:[b[be.id]||0," ",b[be.id]===1?"feature":"features"," to vote on"]})]}),i.jsx("span",{className:"text-sm font-medium text-[#2D4660]",children:Ot})]}),i.jsxs("div",{className:"flex items-center",children:[i.jsx(gn,{className:"h-4 w-4 mr-2"}),i.jsx("span",{children:ot.displayText}),ot.isAuto&&i.jsxs("div",{className:"group relative ml-1",children:[i.jsx(lh,{className:"h-4 w-4 text-blue-500 cursor-help"}),i.jsxs("div",{className:"absolute bottom-full left-1/2 -translate-x-1/2 mb-2 px-3 py-2 bg-gray-900 text-white text-xs rounded-lg opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-200 whitespace-nowrap z-10 pointer-events-none",children:[ot.formula,i.jsx("div",{className:"absolute top-full left-1/2 -translate-x-1/2 -mt-1 border-4 border-transparent border-t-gray-900"})]})]})]})]}),i.jsx("div",{className:"mt-4 pt-4 border-t border-gray-200",children:i.jsxs("button",{onClick:tt=>{tt.stopPropagation(),st||Or(be)},disabled:st,className:`w-full flex items-center justify-center px-4 py-2 rounded-lg transition-colors font-medium ${st?"bg-gray-100 text-gray-500 cursor-not-allowed":kt?"bg-gray-100 text-gray-700 hover:bg-gray-200":"bg-[#2D4660] text-white hover:bg-[#173B65]"}`,style:st?{cursor:"not-allowed"}:{},children:[i.jsx(gn,{className:"h-4 w-4 mr-2"}),kt?"View or Change Votes":"Cast Your Votes"]})})]})]},be.id)})})]})})()]}),(B==="admin"||B==="system-admin")&&i.jsxs(i.Fragment,{children:[B==="admin"&&ko.length>0&&i.jsxs("div",{children:[i.jsxs("h2",{className:"text-xl font-semibold text-[#2D4660] mb-4 flex items-center",children:[i.jsx(gn,{className:"h-5 w-5 mr-2"}),"Your Voting Sessions"]}),i.jsx("div",{className:"grid grid-cols-1 gap-6 sm:grid-cols-2 lg:grid-cols-3",children:ko.map(D=>{const re=us(D),de=re.text==="Closed",Ne=re.icon,Ge=Nr(D),Je=N[D.id],be=Ir(D,q),pe=D.product_id?$[D.product_id]:void 0,st=cr(be,pe);return i.jsxs("div",{className:"relative z-10 bg-white overflow-visible shadow-md rounded-lg rounded-tl-none hover:shadow-lg transition-shadow cursor-pointer mt-6 border",style:{borderColor:st.border,borderWidth:"1px",opacity:de&&fr!==D.id?.75:1},onMouseEnter:()=>pr(D.id),onMouseLeave:()=>pr(null),onClick:()=>Or(D),children:[i.jsxs("div",{className:"absolute left-0 px-4 py-1 rounded-t-md border-b-0 text-sm font-semibold shadow-sm z-20 flex items-center gap-2 whitespace-nowrap overflow-hidden",style:{top:"0",left:"-1px",transform:"translateY(-100%)",backgroundColor:st.background,color:st.text,borderColor:st.border,borderWidth:"1px",borderBottomWidth:"0",boxShadow:"0 4px 8px rgba(16,24,40,0.06)",borderTopLeftRadius:"0.9rem",borderTopRightRadius:"0.9rem"},children:[i.jsx(b0,{className:"h-4 w-4 flex-shrink-0"}),i.jsx("span",{className:"overflow-hidden text-ellipsis",children:be})]}),i.jsxs("div",{className:"flex flex-col h-full",style:{padding:"15px"},children:[i.jsx("div",{className:"flex justify-end items-start mb-4",children:Je?i.jsxs("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-xs font-medium bg-green-100 text-green-800",children:[i.jsx(un,{className:"h-3 w-3 mr-1"}),"Voted"]}):re.text==="Active"?i.jsxs("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:[i.jsx(nn,{className:"h-3 w-3 mr-1"}),"Needs Your Vote"]}):null}),i.jsx("h3",{className:"text-lg font-semibold text-[#2D4660] mb-2",children:D.title}),i.jsx("p",{className:"text-sm text-gray-600 mb-4 line-clamp-2",children:D.goal}),i.jsx("div",{className:"flex-1"}),i.jsxs("div",{className:"space-y-2 text-sm text-gray-500",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center",children:[i.jsx(Si,{className:"h-4 w-4 mr-2"}),i.jsxs("span",{children:[Dr(D.start_date)," - ",Dr(D.end_date)]})]}),i.jsxs("span",{className:`inline-flex items-center ${re.text==="Active"?"px-3 py-1 text-sm":"px-2 py-0.5 text-xs"} rounded-full font-medium ${re.color}`,children:[i.jsx(Ne,{className:`${re.text==="Active"?"h-4 w-4":"h-3 w-3"} mr-1`}),re.text]})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center",children:[i.jsx(ki,{className:"h-4 w-4 mr-2"}),i.jsxs("span",{children:[b[D.id]||0," ",b[D.id]===1?"feature":"features"," to vote on"]})]}),i.jsx("span",{className:"text-sm font-medium text-[#2D4660]",children:be})]}),i.jsxs("div",{className:"flex items-center",children:[i.jsx(gn,{className:"h-4 w-4 mr-2"}),i.jsx("span",{children:Ge.displayText}),Ge.isAuto&&i.jsxs("div",{className:"group relative ml-1",children:[i.jsx(lh,{className:"h-4 w-4 text-blue-500 cursor-help"}),i.jsxs("div",{className:"absolute bottom-full left-1/2 -translate-x-1/2 mb-2 px-3 py-2 bg-gray-900 text-white text-xs rounded-lg opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-200 whitespace-nowrap z-10 pointer-events-none",children:[Ge.formula,i.jsx("div",{className:"absolute top-full left-1/2 -translate-x-1/2 -mt-1 border-4 border-transparent border-t-gray-900"})]})]})]})]}),i.jsx("div",{className:"mt-4 pt-4 border-t border-gray-200",children:i.jsxs("button",{onClick:At=>{At.stopPropagation(),de||Or(D)},disabled:de,className:`w-full flex items-center justify-center px-4 py-2 rounded-lg transition-colors font-medium ${de?"bg-gray-100 text-gray-500 cursor-not-allowed":Je?"bg-gray-100 text-gray-700 hover:bg-gray-200":"bg-[#2D4660] text-white hover:bg-[#173B65]"}`,style:de?{cursor:"not-allowed"}:{},children:[i.jsx(gn,{className:"h-4 w-4 mr-2"}),Je?"View or Change Votes":"Cast Your Votes"]})})]})]},D.id)})})]}),$s.length>0&&i.jsxs("div",{children:[i.jsxs("div",{className:"flex flex-col gap-3 sm:flex-row sm:items-center sm:justify-between mb-4",children:[i.jsxs("h2",{className:"text-xl font-semibold text-[#2D4660] flex items-center",children:[i.jsx(ma,{className:"h-5 w-5 mr-2"}),jo?"All Sessions (System Admin)":"Sessions You Manage"]}),jo&&i.jsxs("p",{className:"text-sm text-gray-600",children:["Showing ",$s.length," total sessions across the organization."]})]}),(()=>{const D=$s.filter(be=>{const pe=Ir(be,q);return pe&&pe!=="No Product"&&pe.trim()!==""}),re=$s.filter(be=>{const pe=Ir(be,q);return!pe||pe==="No Product"||pe.trim()===""}),de=ds(D,q),Ne=[],Ge=[],Je=[];return Object.entries(de).forEach(([be,pe])=>{pe.length>=2?Ne.push({key:be,sessions:pe}):pe.length===1?Ge.push({key:be,sessions:pe}):Je.push(...pe)}),i.jsxs("div",{className:"space-y-8",children:[Ne.map(({key:be,sessions:pe})=>{var tt,Ct;const st=Jt.has(be),At=st?pe:pe.slice(0,3),ot=pe.length>3?pe.length-3:0,kt=Ir(pe[0],q),Ot=(tt=pe[0])!=null&&tt.product_id?$[pe[0].product_id]:void 0,Te=cr(kt,Ot),Bt=(lt,qt)=>{const pt=lt.replace("#",""),O=parseInt(pt.substring(0,2),16),fe=parseInt(pt.substring(2,4),16),_e=parseInt(pt.substring(4,6),16);return`rgba(${O}, ${fe}, ${_e}, ${qt})`},et=Te.background?Bt(Te.background,.1):"#F9FAFB";return i.jsx("div",{className:"relative",style:{marginTop:"50px"},children:i.jsxs("div",{className:"rounded-lg rounded-tl-none border border-gray-200 relative overflow-visible",style:{backgroundColor:et,borderColor:Te.border||"#E5E7EB",padding:"24px"},children:[ja(kt,Te,(Ct=pe[0])==null?void 0:Ct.product_id,be),ot>0&&i.jsx("div",{className:"absolute right-0 z-20 hidden md:block",style:{top:"0",transform:"translateY(calc(-100% - 3px))"},children:i.jsx("button",{onClick:()=>fs(be),className:"flex items-center gap-1 text-sm text-[#2D4660] hover:text-[#173B65] transition-colors cursor-pointer",children:st?i.jsxs(i.Fragment,{children:["Show Less",i.jsx(Da,{className:"h-4 w-4 rotate-180"})]}):i.jsxs(i.Fragment,{children:["Show More (",ot,")",i.jsx(Da,{className:"h-4 w-4"})]})})}),(R||B==="admin"||B==="system-admin")&&i.jsx("div",{className:"absolute z-20 bottom-[-20px] left-1/2 -translate-x-1/2 md:bottom-auto md:left-auto md:translate-x-0 md:right-[-20px] md:top-1/2 md:-translate-y-1/2",children:i.jsx("button",{onClick:lt=>{var _e;lt.stopPropagation();const qt=(_e=pe[0])==null?void 0:_e.product_id,pt=Ir(pe[0],q);qt&&se(qt),pt&&pt!=="No Product"&&ur(pt);let O=pe.length>0?Ve(pe[0].end_date):new Date;pe.forEach(Ze=>{const gt=Ve(Ze.end_date);gt>O&&(O=gt)});const fe=Pt(O,1);Pt(fe,14),ct(),se(qt),mr(!0),te(!1),Sr(!0),le(!0)},onMouseEnter:()=>Kt(be),onMouseLeave:()=>Kt(null),className:"flex items-center justify-center w-10 h-10 rounded-full shadow-md",style:{backgroundColor:Te.background||"#C89212",color:Te.text||"#FFFFFF"},title:`Create new session for ${kt}`,children:i.jsx(Cn,{className:"h-5 w-5"})})}),i.jsxs("div",{className:"grid grid-cols-1 gap-6 sm:grid-cols-2 lg:grid-cols-3",children:[At.map(lt=>{const qt=us(lt),pt=qt.icon,O=Nr(lt),fe=qt.text==="Closed",_e=Ir(lt,q),Ze=lt.product_id?$[lt.product_id]:void 0,gt=cr(_e,Ze);return i.jsx("div",{className:"relative z-10 bg-white overflow-visible shadow-md rounded-lg hover:shadow-lg transition-shadow cursor-pointer border",style:{borderColor:gt.border,borderWidth:"1px",opacity:fe&&fr!==lt.id?.75:1},onMouseEnter:()=>pr(lt.id),onMouseLeave:()=>pr(null),onClick:()=>Or(lt),children:ka(lt,_e,gt,qt,pt,O,fe,!1,lt.product_id)},lt.id)}),pe.length===2&&i.jsxs(i.Fragment,{children:[i.jsx("style",{children:`
                                        @keyframes growFromCenter {
                                          from {
                                            opacity: 0;
                                            transform: scale(0.3);
                                          }
                                          to {
                                            opacity: 1;
                                            transform: scale(1);
                                          }
                                        }
                                        @keyframes sparkle {
                                          0%, 100% {
                                            opacity: 0.1;
                                            transform: scale(0.7) rotate(0deg);
                                          }
                                          50% {
                                            opacity: 0.25;
                                            transform: scale(1.3) rotate(180deg);
                                          }
                                        }
                                        @keyframes sparkleSlow {
                                          0%, 100% {
                                            opacity: 0.08;
                                            transform: scale(0.6);
                                          }
                                          50% {
                                            opacity: 0.2;
                                            transform: scale(1.4);
                                          }
                                        }
                                        @keyframes starTwinkle {
                                          0%, 100% {
                                            opacity: 0.12;
                                            transform: scale(0.8) rotate(0deg);
                                          }
                                          25% {
                                            opacity: 0.22;
                                            transform: scale(1.1) rotate(90deg);
                                          }
                                          50% {
                                            opacity: 0.18;
                                            transform: scale(1.3) rotate(180deg);
                                          }
                                          75% {
                                            opacity: 0.22;
                                            transform: scale(1.1) rotate(270deg);
                                          }
                                        }
                                      `}),i.jsx("div",{className:"hidden lg:block relative z-10 overflow-hidden shadow-md rounded-lg mt-6 border cursor-pointer transition-all",style:{borderColor:Te.border||"#E5E7EB",borderWidth:"1px",backgroundColor:"rgba(255, 255, 255, 0.7)"},onMouseEnter:()=>sn(be),onMouseLeave:()=>sn(null),onClick:lt=>{var _e;lt.stopPropagation();const qt=(_e=pe[0])==null?void 0:_e.product_id,pt=Ir(pe[0],q);qt&&se(qt),pt&&pt!=="No Product"&&ur(pt);let O=pe.length>0?Ve(pe[0].end_date):new Date;pe.forEach(Ze=>{const gt=Ve(Ze.end_date);gt>O&&(O=gt)});const fe=Pt(O,1);Pt(fe,14),ct(),se(qt),mr(!0),te(!1),Sr(!0),le(!0)},children:i.jsxs("div",{className:"flex flex-col h-full items-center justify-center relative rounded-lg transition-all duration-300",style:{padding:"15px",backgroundColor:"transparent",backgroundImage:Nt===be||jr===be?`radial-gradient(circle at center, ${Te.badgeBackground||"rgba(200, 146, 18, 0.15)"}, transparent 70%)`:"none"},children:[(Nt===be||jr===be)&&i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"absolute top-3 left-3 w-1.5 h-1.5 rounded-full",style:{backgroundColor:Te.background||"#C89212",animation:"sparkle 1.8s ease-in-out infinite",animationDelay:"0ms",opacity:.12}}),i.jsx("div",{className:"absolute top-5 left-8 w-1 h-1 rounded-full",style:{backgroundColor:Te.background||"#C89212",animation:"sparkleSlow 2.5s ease-in-out infinite",animationDelay:"200ms",opacity:.1}}),i.jsx("div",{className:"absolute top-8 left-5 w-2 h-2 rounded-full",style:{backgroundColor:Te.background||"#C89212",animation:"sparkle 2.2s ease-in-out infinite",animationDelay:"400ms",opacity:.15}}),i.jsx("div",{className:"absolute top-4 right-6 w-1 h-1 rounded-full",style:{backgroundColor:Te.background||"#C89212",animation:"sparkleSlow 2.8s ease-in-out infinite",animationDelay:"600ms",opacity:.1}}),i.jsx("div",{className:"absolute top-7 right-4 w-1.5 h-1.5 rounded-full",style:{backgroundColor:Te.background||"#C89212",animation:"sparkle 2s ease-in-out infinite",animationDelay:"800ms",opacity:.12}}),i.jsx("div",{className:"absolute top-10 right-9 w-1 h-1 rounded-full",style:{backgroundColor:Te.background||"#C89212",animation:"sparkleSlow 2.3s ease-in-out infinite",animationDelay:"1000ms",opacity:.1}}),i.jsx("div",{className:"absolute bottom-5 left-4 w-2 h-2 rounded-full",style:{backgroundColor:Te.background||"#C89212",animation:"sparkle 2.1s ease-in-out infinite",animationDelay:"1200ms",opacity:.15}}),i.jsx("div",{className:"absolute bottom-7 left-9 w-1 h-1 rounded-full",style:{backgroundColor:Te.background||"#C89212",animation:"sparkleSlow 2.6s ease-in-out infinite",animationDelay:"1400ms",opacity:.1}}),i.jsx("div",{className:"absolute bottom-4 left-12 w-1.5 h-1.5 rounded-full",style:{backgroundColor:Te.background||"#C89212",animation:"sparkle 1.9s ease-in-out infinite",animationDelay:"1600ms",opacity:.12}}),i.jsx("div",{className:"absolute bottom-8 right-5 w-1 h-1 rounded-full",style:{backgroundColor:Te.background||"#C89212",animation:"sparkleSlow 2.4s ease-in-out infinite",animationDelay:"1800ms",opacity:.1}}),i.jsx("div",{className:"absolute bottom-6 right-10 w-1.5 h-1.5 rounded-full",style:{backgroundColor:Te.background||"#C89212",animation:"sparkle 2.2s ease-in-out infinite",animationDelay:"2000ms",opacity:.12}}),i.jsx("div",{className:"absolute bottom-3 right-7 w-1 h-1 rounded-full",style:{backgroundColor:Te.background||"#C89212",animation:"sparkleSlow 2.7s ease-in-out infinite",animationDelay:"2200ms",opacity:.1}}),i.jsx(Tc,{className:"absolute top-6 left-12",size:8,style:{color:Te.background||"#C89212",animation:"starTwinkle 3s ease-in-out infinite",animationDelay:"300ms",opacity:.15}}),i.jsx(Tc,{className:"absolute top-9 right-12",size:6,style:{color:Te.background||"#C89212",animation:"starTwinkle 3.5s ease-in-out infinite",animationDelay:"700ms",opacity:.12}}),i.jsx(Tc,{className:"absolute bottom-9 left-6",size:7,style:{color:Te.background||"#C89212",animation:"starTwinkle 2.8s ease-in-out infinite",animationDelay:"1100ms",opacity:.13}}),i.jsx(Tc,{className:"absolute bottom-5 right-12",size:5,style:{color:Te.background||"#C89212",animation:"starTwinkle 3.2s ease-in-out infinite",animationDelay:"1500ms",opacity:.1}}),i.jsx(Tc,{className:"absolute top-12 left-1/2 -translate-x-1/2",size:6,style:{color:Te.background||"#C89212",animation:"starTwinkle 2.9s ease-in-out infinite",animationDelay:"500ms",opacity:.12}}),i.jsx(Tc,{className:"absolute bottom-12 left-1/2 -translate-x-1/2",size:7,style:{color:Te.background||"#C89212",animation:"starTwinkle 3.3s ease-in-out infinite",animationDelay:"1300ms",opacity:.13}}),i.jsx(Oc,{className:"absolute top-2 left-6",size:6,style:{color:Te.background||"#C89212",animation:"sparkle 2.1s ease-in-out infinite",animationDelay:"250ms",opacity:.12}}),i.jsx(Oc,{className:"absolute top-11 right-6",size:5,style:{color:Te.background||"#C89212",animation:"sparkleSlow 2.7s ease-in-out infinite",animationDelay:"750ms",opacity:.1}}),i.jsx(Oc,{className:"absolute bottom-10 left-10",size:7,style:{color:Te.background||"#C89212",animation:"sparkle 2.4s ease-in-out infinite",animationDelay:"1150ms",opacity:.13}}),i.jsx(Oc,{className:"absolute bottom-2 right-8",size:6,style:{color:Te.background||"#C89212",animation:"sparkleSlow 2.9s ease-in-out infinite",animationDelay:"1550ms",opacity:.11}}),i.jsx(Oc,{className:"absolute top-1/2 left-2",size:5,style:{color:Te.background||"#C89212",animation:"sparkle 2.6s ease-in-out infinite",animationDelay:"450ms",opacity:.1}}),i.jsx(Oc,{className:"absolute top-1/2 right-2",size:6,style:{color:Te.background||"#C89212",animation:"sparkleSlow 2.8s ease-in-out infinite",animationDelay:"950ms",opacity:.12}}),i.jsx("div",{className:"absolute top-1/4 left-1/4 w-1 h-1 rounded-full",style:{backgroundColor:Te.background||"#C89212",animation:"sparkleSlow 2.2s ease-in-out infinite",animationDelay:"300ms",opacity:.1}}),i.jsx("div",{className:"absolute top-1/3 right-1/4 w-1.5 h-1.5 rounded-full",style:{backgroundColor:Te.background||"#C89212",animation:"sparkle 2.3s ease-in-out infinite",animationDelay:"900ms",opacity:.12}}),i.jsx("div",{className:"absolute bottom-1/4 left-1/3 w-1 h-1 rounded-full",style:{backgroundColor:Te.background||"#C89212",animation:"sparkleSlow 2.5s ease-in-out infinite",animationDelay:"1500ms",opacity:.1}}),i.jsx("div",{className:"absolute bottom-1/3 right-1/3 w-1.5 h-1.5 rounded-full",style:{backgroundColor:Te.background||"#C89212",animation:"sparkle 2.1s ease-in-out infinite",animationDelay:"600ms",opacity:.12}})]}),i.jsxs("div",{className:"flex flex-col items-center justify-center gap-2 z-10",style:{opacity:Nt===be||jr===be?1:0,transformOrigin:"center center",animation:Nt===be||jr===be?"growFromCenter 0.3s ease-out forwards":"none"},children:[i.jsx(Cn,{className:"h-8 w-8",style:{color:Te.background||"#C89212"}}),i.jsxs("div",{className:"flex flex-col items-center justify-center text-base font-semibold",style:{color:Te.background||"#C89212"},children:[i.jsx("span",{children:"Create"}),i.jsx("span",{children:"New Session"})]})]})]})})]})]}),ot>0&&i.jsx("div",{className:"mt-4 md:hidden",children:i.jsx("button",{onClick:()=>fs(be),className:"w-full flex items-center justify-center gap-1 px-4 py-2 text-sm font-medium text-[#2D4660] bg-white hover:bg-gray-50 rounded-md border border-gray-300 transition-colors",children:st?i.jsxs(i.Fragment,{children:["Show Less",i.jsx(Da,{className:"h-4 w-4 rotate-180"})]}):i.jsxs(i.Fragment,{children:["Show More (",ot,")",i.jsx(Da,{className:"h-4 w-4"})]})})})]})},be)}),Ge.length>0&&i.jsx("div",{className:"grid grid-cols-1 gap-6 sm:grid-cols-2 lg:grid-cols-3",style:{marginTop:"50px"},children:Ge.map(({key:be,sessions:pe})=>{var Te,Bt;const st=Ir(pe[0],q),At=(Te=pe[0])!=null&&Te.product_id?$[pe[0].product_id]:void 0,ot=cr(st,At),kt=(et,tt)=>{const Ct=et.replace("#",""),lt=parseInt(Ct.substring(0,2),16),qt=parseInt(Ct.substring(2,4),16),pt=parseInt(Ct.substring(4,6),16);return`rgba(${lt}, ${qt}, ${pt}, ${tt})`},Ot=ot.background?kt(ot.background,.1):"#F9FAFB";return i.jsx("div",{className:"relative",children:i.jsxs("div",{className:"rounded-lg rounded-tl-none border border-gray-200 relative overflow-visible",style:{backgroundColor:Ot,borderColor:ot.border||"#E5E7EB",padding:"24px"},children:[ja(st,ot,(Bt=pe[0])==null?void 0:Bt.product_id,be),(R||B==="admin"||B==="system-admin")&&i.jsx("div",{className:"absolute z-20 bottom-[-20px] left-1/2 -translate-x-1/2 md:bottom-auto md:left-auto md:translate-x-0 md:right-[-20px] md:top-1/2 md:-translate-y-1/2",children:i.jsx("button",{onClick:et=>{var pt;et.stopPropagation();const tt=(pt=pe[0])==null?void 0:pt.product_id,Ct=Ir(pe[0],q);tt&&se(tt),Ct&&Ct!=="No Product"&&ur(Ct);let lt=Ve(pe[0].end_date);const qt=Pt(lt,1);Pt(qt,14),ct(),se(tt),mr(!0),te(!1),Sr(!0),le(!0)},onMouseEnter:()=>Kt(be),onMouseLeave:()=>Kt(null),className:"flex items-center justify-center w-10 h-10 rounded-full shadow-md",style:{backgroundColor:ot.background||"#C89212",color:ot.text||"#FFFFFF"},title:`Create new session for ${st}`,children:i.jsx(Cn,{className:"h-5 w-5"})})}),pe.map(et=>{const tt=us(et),Ct=tt.text==="Closed",lt=tt.icon,qt=Nr(et);N[et.id];const pt=Ir(et,q),O=et.product_id?$[et.product_id]:void 0,fe=cr(pt,O);return i.jsx("div",{className:"relative z-10 bg-white overflow-visible shadow-md rounded-lg hover:shadow-lg transition-shadow cursor-pointer border",style:{borderColor:fe.border,borderWidth:"1px",opacity:Ct&&fr!==et.id?.75:1},onMouseEnter:()=>pr(et.id),onMouseLeave:()=>pr(null),onClick:()=>Or(et),children:ka(et,pt,fe,tt,lt,qt,Ct,!1,et.product_id)},et.id)})]})},be)})}),(Je.length>0||re.length>0)&&i.jsxs("div",{className:"grid grid-cols-1 gap-6 sm:grid-cols-2 lg:grid-cols-3",children:[[...Je,...re].map(be=>{const pe=us(be),st=pe.icon,At=Nr(be),ot=pe.text==="Closed",kt=Ir(be,q),Ot=be.product_id?$[be.product_id]:void 0,Te=cr(kt,Ot),Bt=Je.includes(be);return i.jsxs("div",{className:"relative z-10 bg-white overflow-visible shadow-md rounded-lg rounded-tl-none hover:shadow-lg transition-shadow cursor-pointer border",style:{borderColor:Te.border,borderWidth:"1px",opacity:ot&&fr!==be.id?.75:1},onMouseEnter:()=>pr(be.id),onMouseLeave:()=>pr(null),onClick:()=>Or(be),children:[Bt&&(R||B==="admin"||B==="system-admin")&&i.jsx("div",{className:"absolute z-20 bottom-[-20px] left-1/2 -translate-x-1/2 md:bottom-auto md:left-auto md:translate-x-0 md:right-[-20px] md:top-1/2 md:-translate-y-1/2",children:i.jsx("button",{onClick:et=>{et.stopPropagation();const tt=be.product_id,Ct=Ir(be,q);tt&&se(tt),Ct&&Ct!=="No Product"&&ur(Ct);const lt=Ve(be.end_date),qt=Pt(lt,1);Pt(qt,14),ct(),se(tt),mr(!0),te(!1),Sr(!0),le(!0)},className:"flex items-center justify-center w-10 h-10 rounded-full transition-colors shadow-md hover:shadow-lg",style:{backgroundColor:Te.background||"#C89212",color:Te.text||"#FFFFFF"},onMouseEnter:et=>{const tt=Te.background||"#C89212";et.currentTarget.style.backgroundColor=tt,et.currentTarget.style.filter="brightness(0.8)"},onMouseLeave:et=>{et.currentTarget.style.backgroundColor=Te.background||"#C89212",et.currentTarget.style.filter="brightness(1)"},title:`Create new session for ${kt}`,children:i.jsx(Cn,{className:"h-5 w-5"})})}),ka(be,kt,Te,pe,st,At,ot,!0,be.product_id)]},be.id)}),$s.length===2&&Je.length+re.length>0&&i.jsx("div",{className:"hidden lg:block relative z-10 bg-white overflow-visible shadow-md rounded-lg hover:shadow-lg transition-shadow border border-gray-200",children:i.jsx("div",{className:"flex flex-col h-full items-end justify-center",style:{padding:"15px"},children:i.jsxs("button",{onClick:()=>{te(!0),le(!0)},className:"flex items-center px-6 py-3 bg-[#C89212] text-white rounded-lg hover:bg-[#6A4234] transition-colors font-semibold",children:[i.jsx(Cn,{className:"h-5 w-5 mr-2"}),"Create Session"]})})})]})]})})()]})]})]}),i.jsx(cn,{isOpen:ce,onClose:fi,title:"Create Voting Session",maxWidth:"max-w-3xl",children:i.jsxs("form",{onSubmit:kr,className:"space-y-6",children:[i.jsxs("div",{className:"space-y-1",children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Product *"}),!wt&&!Dt?nr&&oe?i.jsx("div",{className:"flex items-center gap-3 px-4 py-2 border border-gray-300 rounded-md bg-gray-50",children:(()=>{const D=Y.find(Ge=>Ge.id===oe),re=(D==null?void 0:D.name)||q[oe]||"Unknown Product",de=(D==null?void 0:D.color_hex)||$[oe],Ne=cr(re,de);return i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"w-6 h-6 rounded-md border flex-shrink-0",style:{backgroundColor:Ne.background||"#2D4660",borderColor:Ne.border||"#2D4660"}}),i.jsx("span",{className:"font-medium text-gray-900 flex-1",children:re})]})})()}):i.jsx("div",{className:"space-y-3",style:{marginTop:0},children:i.jsxs("div",{className:"flex flex-col gap-3 sm:flex-row sm:items-end",style:{marginTop:0},children:[i.jsx("div",{className:"flex-1 w-full",children:i.jsx(xZ,{label:"",products:Y,value:oe,onChange:async D=>{if(se(D),D){Xe("");try{const re=v.filter(de=>de.product_id===D);if(re.length>0){let de=Ve(re[0].end_date);re.forEach(Je=>{const be=Ve(Je.end_date);be>de&&(de=be)});const Ne=Pt(de,1),Ge=Pt(Ne,14);$e(Je=>({...Je,startDate:$t(Ne),endDate:$t(Ge)}))}else{const de=new Date,Ne=Pt(de,14);$e(Ge=>({...Ge,startDate:$t(de),endDate:$t(Ne)}))}}catch(re){console.error("Error calculating dates for selected product:",re);const de=new Date,Ne=Pt(de,14);$e(Ge=>({...Ge,startDate:$t(de),endDate:$t(Ne)}))}}Pe.product&&ke(re=>{const de={...re};return delete de.product,de})},isLoading:L,error:Ae,disabled:L||Y.length===0||Ur,placeholder:"Select a product",helperText:!L&&Y.length===0&&!Ae&&U?"No products found yet. Enter a product name below to create one.":void 0,allowDelete:U,onRequestDeleteProduct:U?(D=>{nt(D)}):void 0,className:"w-full"})}),U&&i.jsxs("div",{className:"flex items-center gap-2 sm:flex-none",children:[i.jsx("span",{className:"text-gray-500 font-medium px-2",children:"or"}),i.jsxs("button",{type:"button",onClick:()=>vt(!0),disabled:L,className:"px-4 py-2 bg-[#1E5461] text-white rounded-md hover:bg-[#576C71] transition-colors font-medium whitespace-nowrap disabled:opacity-50 disabled:cursor-not-allowed",children:[i.jsx(Cn,{className:"h-4 w-4 inline mr-2"}),"Create New Product"]})]})]})}):Dt?i.jsxs("div",{className:"flex items-center gap-3 px-4 py-2 border border-gray-300 rounded-md cursor-pointer hover:border-[#2D4660] transition-colors animate-in fade-in duration-300",onClick:()=>{ze(null),Xe(Dt.name),zt(Dt.color),vt(!0),Oe(!0),Qt(!1)},children:[i.jsx("div",{className:"w-6 h-6 rounded-md border flex-shrink-0",style:{backgroundColor:Dt.color||"#2D4660",borderColor:Dt.color||"#2D4660"}}),i.jsx("span",{className:"font-medium text-gray-900 flex-1",children:Dt.name}),i.jsx("span",{className:"text-xs text-gray-500",children:"Click to edit"})]}):U&&wt?i.jsx("div",{className:"space-y-3",children:i.jsxs("div",{className:"flex gap-3 items-center",children:[i.jsxs("div",{className:"flex-1",style:{animation:"dramaticSlideIn 1.2s cubic-bezier(0.34, 1.56, 0.64, 1) forwards"},children:[i.jsx("style",{children:`
                      @keyframes dramaticSlideIn {
                        from {
                          opacity: 0;
                          transform: translateX(150px) scale(0.9);
                        }
                        to {
                          opacity: 1;
                          transform: translateX(0) scale(1);
                        }
                      }
                    `}),i.jsx("input",{type:"text",value:Be,onChange:D=>{Xe(D.target.value),D.target.value.trim()&&!We&&setTimeout(()=>Oe(!0),200),Ae&&Ke(null)},placeholder:"Enter product name...",autoFocus:!0,className:"w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-0 focus:border-[#2D4660]"})]}),We&&i.jsxs("div",{className:"flex items-center gap-2 overflow-hidden",style:{animation:"slideInFromRight 1s ease-out forwards"},children:[i.jsx("style",{children:`
                        @keyframes slideInFromRight {
                          from {
                            opacity: 0;
                            transform: translateX(100px);
                          }
                          to {
                            opacity: 1;
                            transform: translateX(0);
                          }
                        }
                      `}),i.jsx("label",{className:"text-sm font-medium text-gray-700 whitespace-nowrap",children:"Product Color"}),i.jsx("button",{type:"button",onClick:()=>{jt(mt||"#2D4660"),it(!0),setTimeout(()=>{var D;(D=document.getElementById("native-color-input"))==null||D.click()},100)},className:"block w-10 h-10 rounded-md border-2 border-gray-300 hover:border-gray-400 transition-all flex items-center justify-center overflow-hidden",style:mt?{backgroundColor:mt}:{backgroundColor:"#ffffff"},children:!mt&&i.jsx("img",{src:K4,alt:"Color Picker",className:"w-8 h-8 object-contain"})})]})]})}):null,Pe.product&&i.jsxs("p",{className:"text-sm text-red-600 flex items-center",children:[i.jsx(nn,{className:"h-4 w-4 mr-1"}),Pe.product]}),Ae&&(wt||!!Dt)&&i.jsxs("p",{className:"text-sm text-red-600 flex items-center",children:[i.jsx(nn,{className:"h-4 w-4 mr-1"}),Ae]})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Session Title *"}),i.jsx("input",{ref:Yt,type:"text",name:"title",value:he.title,onChange:ar,placeholder:"e.g., Q3 Product Priorities, Sprint 5, Sprint 5: Mobile Updates",className:`w-full px-4 py-2 border rounded-md focus:outline-none focus:ring-0 focus:border-[#2d4660] ${Pe.title?"border-red-500":"border-gray-300"}`}),Pe.title&&i.jsxs("p",{className:"mt-1 text-sm text-red-600 flex items-center",children:[i.jsx(nn,{className:"h-4 w-4 mr-1"}),Pe.title]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Session Goal *"}),i.jsx("textarea",{name:"goal",value:he.goal,onChange:ar,rows:2,placeholder:"Describe the purpose of this voting session...",className:`w-full px-4 py-2 border rounded-md focus:outline-none focus:ring-0 focus:border-[#2d4660] ${Pe.goal?"border-red-500":"border-gray-300"}`}),Pe.goal&&i.jsxs("p",{className:"mt-1 text-sm text-red-600 flex items-center",children:[i.jsx(nn,{className:"h-4 w-4 mr-1"}),Pe.goal]})]})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Votes Per User *"}),i.jsxs("div",{className:"flex items-center mb-3",children:[i.jsx("button",{type:"button",onClick:()=>$e(D=>({...D,useAutoVotes:!D.useAutoVotes})),className:"flex-shrink-0 cursor-pointer w-5 h-5 flex items-center justify-center",children:he.useAutoVotes?i.jsx(Fl,{className:"w-5 h-5 text-green-600"}):i.jsx(Cd,{className:"w-5 h-5 text-gray-400"})}),i.jsxs("label",{onClick:()=>$e(D=>({...D,useAutoVotes:!D.useAutoVotes})),className:"ml-2 text-sm text-gray-700 cursor-pointer",children:["Auto-calculate votes",i.jsx("br",{}),"(half of feature count, minimum 1)"]})]}),!he.useAutoVotes&&i.jsxs(i.Fragment,{children:[i.jsx("input",{type:"number",name:"votesPerUser",value:he.votesPerUser,onChange:ar,min:"1",max:"100",className:`w-full px-4 py-2 border rounded-md focus:outline-none focus:ring-0 focus:border-[#2d4660] ${Pe.votesPerUser?"border-red-500":"border-gray-300"}`}),Pe.votesPerUser&&i.jsxs("p",{className:"mt-1 text-sm text-red-600 flex items-center",children:[i.jsx(nn,{className:"h-4 w-4 mr-1"}),Pe.votesPerUser]})]}),i.jsx("p",{className:"mt-2 text-xs text-gray-500",children:he.useAutoVotes?"Votes will automatically be set to half the number of features (minimum 1).":"Each stakeholder receives this many votes."})]}),i.jsxs("div",{children:[i.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Start Date *"}),i.jsx("input",{type:"date",name:"startDate",value:he.startDate||"",onChange:ar,onFocus:D=>{he.startDate||Zt("startDate")},autoComplete:"off",className:`w-full px-4 py-2 border rounded-md focus:outline-none focus:ring-0 focus:border-[#2d4660] [&::-webkit-calendar-picker-indicator]:cursor-pointer ${Pe.startDate?"border-red-500":"border-gray-300"}`,style:he.startDate?{}:{color:"transparent"},onBlur:D=>{D.target.value?D.target.style.color="":D.target.style.color="transparent"}}),Pe.startDate&&i.jsxs("p",{className:"mt-1 text-sm text-red-600 flex items-center",children:[i.jsx(nn,{className:"h-4 w-4 mr-1"}),Pe.startDate]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"End Date *"}),i.jsx("input",{type:"date",name:"endDate",value:he.endDate||"",onChange:ar,onFocus:D=>{he.endDate||Zt("endDate")},autoComplete:"off",className:`w-full px-4 py-2 border rounded-md focus:outline-none focus:ring-0 focus:border-[#2d4660] [&::-webkit-calendar-picker-indicator]:cursor-pointer ${Pe.endDate?"border-red-500":"border-gray-300"}`,style:he.endDate?{}:{color:"transparent",position:"relative"},onBlur:D=>{D.target.value?D.target.style.color="":D.target.style.color="transparent"}}),Pe.endDate&&i.jsxs("p",{className:"mt-1 text-sm text-red-600 flex items-center",children:[i.jsx(nn,{className:"h-4 w-4 mr-1"}),Pe.endDate]})]})]}),(he.startDate||he.endDate)&&i.jsxs("div",{className:"mt-1 grid grid-cols-1 sm:grid-cols-2 gap-3",children:[i.jsx("div",{}),i.jsx("div",{className:"flex justify-end",children:i.jsx("button",{type:"button",onClick:()=>{$e(D=>({...D,startDate:"",endDate:""}))},className:"text-sm text-[#2D4660] hover:text-[#173B65] underline",children:"Clear Dates"})})]})]})]}),Pe.submit&&i.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-3 text-sm text-red-700 flex items-center",children:[i.jsx(nn,{className:"h-4 w-4 mr-2"}),Pe.submit]}),i.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t",children:[i.jsx(_t,{type:"button",variant:"secondary",onClick:jn,disabled:De||!Ur&&!oe&&!(wt&&Be.trim()&&mt)&&!Dt,children:De?"Saving...":"Save Draft"}),i.jsx(_t,{type:"submit",variant:wt&&Be.trim()&&mt?"gold":"primary",disabled:De||!Ur&&!oe&&!(wt&&Be.trim()&&mt)&&!Dt,className:`transition-all duration-500 ease-in-out ${wt&&Be.trim()&&mt?"relative overflow-hidden":""}`,children:De?"Creating...":wt&&Be.trim()&&mt?i.jsxs(i.Fragment,{children:[i.jsxs("span",{className:"relative z-10 flex items-center",children:[i.jsx(Cn,{className:"h-4 w-4 mr-2"}),"Create New Product and Session"]}),i.jsx("span",{className:"absolute top-1 left-1/4 w-1 h-1 bg-white rounded-full animate-ping opacity-75",style:{animationDelay:"0ms",animationDuration:"1.5s"}}),i.jsx("span",{className:"absolute top-2 right-1/3 w-1 h-1 bg-white rounded-full animate-ping opacity-75",style:{animationDelay:"300ms",animationDuration:"1.5s"}}),i.jsx("span",{className:"absolute bottom-2 left-1/3 w-1 h-1 bg-white rounded-full animate-ping opacity-75",style:{animationDelay:"600ms",animationDuration:"1.5s"}}),i.jsx("span",{className:"absolute bottom-1 right-1/4 w-1 h-1 bg-white rounded-full animate-ping opacity-75",style:{animationDelay:"900ms",animationDuration:"1.5s"}})]}):"Create Session"})]})]})}),Ye&&i.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",onClick:()=>it(!1),children:i.jsx("div",{className:"bg-white rounded-lg shadow-xl px-3 py-2 w-auto mx-4",onClick:D=>D.stopPropagation(),children:i.jsxs("div",{className:"flex gap-3 items-stretch",children:[i.jsxs("div",{className:"flex-shrink-0",style:{width:"240px",height:"260px"},children:[i.jsx("input",{id:"native-color-input",type:"color",value:bt,onChange:D=>jt(D.target.value),ref:D=>{D&&Ye&&setTimeout(()=>D.click(),50)},className:"opacity-0 absolute",style:{width:"1px",height:"1px"}}),i.jsx("div",{className:"w-full h-full"})]}),i.jsxs("button",{type:"button",onClick:()=>{zt(bt),it(!1),setTimeout(()=>{var D;(D=Yt.current)==null||D.focus()},100)},className:"px-6 rounded-lg text-white font-bold shadow-lg hover:shadow-xl transition-all flex flex-col items-center justify-center gap-3 text-lg flex-shrink-0",style:{backgroundColor:bt,height:"260px",minWidth:"100px"},children:[i.jsx(un,{className:"h-8 w-8"}),i.jsxs("div",{className:"text-center leading-tight",children:[i.jsx("div",{children:"Looks"}),i.jsx("div",{children:"Good"})]})]})]})})}),B==="stakeholder"&&v.length>0&&i.jsx("div",{className:"relative z-10 mt-8 bg-blue-50 border border-blue-200 rounded-lg p-4",children:i.jsxs("div",{className:"flex items-start",children:[i.jsx(gn,{className:"h-5 w-5 text-blue-600 mr-3 mt-0.5"}),i.jsxs("div",{className:"text-sm text-blue-800",children:[i.jsx("p",{className:"font-medium mb-1",children:"About Voting Sessions:"}),i.jsx("p",{children:"Click on any session card to cast your votes. You can change your votes at any time before the voting period ends."})]})]})}),B==="admin"&&ko.length>0&&$s.length===0&&i.jsx("div",{className:"relative z-10 mt-8 bg-blue-50 border border-blue-200 rounded-lg p-4",children:i.jsxs("div",{className:"flex items-start",children:[i.jsx(gn,{className:"h-5 w-5 text-blue-600 mr-3 mt-0.5"}),i.jsxs("div",{className:"text-sm text-blue-800",children:[i.jsx("p",{className:"font-medium mb-1",children:"About Voting Sessions:"}),i.jsx("p",{children:"Click on any session card to cast your votes. You can change your votes at any time before the voting period ends."})]})]})}),B==="admin"&&$s.length>0&&i.jsx("div",{className:"relative z-10 mt-8 bg-blue-50 border border-blue-200 rounded-lg p-4",children:i.jsxs("div",{className:"flex items-start",children:[i.jsx(es,{className:"h-5 w-5 text-blue-600 mr-3 mt-0.5"}),i.jsxs("div",{className:"text-sm text-blue-800",children:[i.jsx("p",{className:"font-medium mb-1",children:"Managing Sessions:"}),i.jsx("p",{children:'Click "Email Invite to Stakeholders" on any session card to send invitation links. Use the Admins and Stakeholders buttons to manage access.'})]})]})}),B==="system-admin"&&i.jsx("div",{className:"relative z-10 mt-8 bg-purple-50 border border-purple-200 rounded-lg p-4",children:i.jsxs("div",{className:"flex items-start",children:[i.jsx(Hr,{className:"h-5 w-5 text-purple-600 mr-3 mt-0.5"}),i.jsxs("div",{className:"text-sm text-purple-900",children:[i.jsx("p",{className:"font-medium mb-1",children:"System Admin Tips:"}),i.jsxs("ul",{className:"list-disc list-inside space-y-1",children:[i.jsx("li",{children:"Use this view to audit every session across the tenant without switching teams."}),i.jsx("li",{children:"Jump into any card to open the admin dashboard and assist local admins."}),i.jsx("li",{children:"Need a quick rollout? Click Create Session above to spin up a new voting round for any product."})]})]})]})}),i.jsx(jb,{currentRole:R&&B==="system-admin"?"system-admin":B==="admin"?"product-owner":"stakeholder",onSelectStakeholder:()=>{ie("stakeholder"),sessionStorage.setItem("viewMode","stakeholder"),sessionStorage.setItem("adminPerspective","session")},onSelectSessionAdmin:()=>{ie("admin"),sessionStorage.setItem("viewMode","admin"),sessionStorage.setItem("adminPerspective","session")},onSelectSystemAdmin:R?()=>{ie("system-admin"),sessionStorage.setItem("viewMode","system-admin"),sessionStorage.setItem("adminPerspective","system")}:void 0,showRoleToggle:Ds,isSessionAdmin:Ds&&!R}),i.jsxs(cn,{isOpen:Hn,onClose:()=>{I||Is()},title:rt?(()=>{const D=Ir(rt,q);return D?`${D}  ${rt.title}`:`Email Stakeholders  ${rt.title}`})():"Email Stakeholders",maxWidth:"max-w-3xl",children:[i.jsxs("div",{className:"space-y-6",children:[Fe&&i.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 text-sm rounded-lg p-3",children:Fe}),X?i.jsxs("div",{className:"py-12 flex flex-col items-center justify-center text-gray-600",children:[i.jsx("div",{className:"animate-spin rounded-full h-10 w-10 border-b-2 border-[#2D4660] mb-3"}),"Loading stakeholders..."]}):i.jsxs(i.Fragment,{children:[i.jsxs("div",{children:[i.jsxs("div",{className:"flex items-center justify-between mb-2",children:[i.jsxs("h4",{className:"text-sm font-semibold text-gray-900",children:["Stakeholders (",Kn.length,")"]}),Kn.length>0&&i.jsx("button",{type:"button",onClick:Su,className:"text-sm font-medium text-blue-600 hover:text-blue-700",children:dr?"Deselect All":"Select All"})]}),i.jsx("div",{className:"border border-gray-200 rounded-lg max-h-64 overflow-y-auto divide-y divide-gray-100",children:Kn.length===0?i.jsx("div",{className:"p-4 text-sm text-gray-500 text-center",children:"No stakeholders are assigned to this session yet."}):Kn.map(D=>{const re=D.user_email.toLowerCase(),de=Tn.includes(re);return i.jsxs("div",{className:"flex items-center justify-between px-4 py-3 hover:bg-gray-50",children:[i.jsxs("div",{className:"flex-1 cursor-pointer",onClick:()=>ba(D.user_email),children:[i.jsx("p",{className:"text-sm font-medium text-gray-900",children:D.user_name||"Unnamed Stakeholder"}),i.jsx("p",{className:"text-xs text-gray-500",children:D.user_email})]}),i.jsx("button",{type:"button",onClick:Ne=>{Ne.stopPropagation(),ba(D.user_email)},className:"flex-shrink-0 ml-4 w-5 h-5 flex items-center justify-center",children:de?i.jsx(Fl,{className:"w-5 h-5 text-green-600"}):i.jsx(Cd,{className:"w-5 h-5 text-gray-400"})})]},D.id)})})]}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Subject"}),i.jsx("input",{type:"text",value:ls,onChange:D=>hn(D.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-1 focus:ring-[#2D4660]",placeholder:"Email subject"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email Body"}),i.jsx("textarea",{value:cs,onChange:D=>Ws(D.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-1 focus:ring-[#2D4660]",rows:10,placeholder:"Enter your custom message here. A 'Go Vote!' button will be automatically added below your message."}),i.jsx("div",{className:"mt-2 p-3 bg-blue-50 border border-blue-200 rounded-md",children:i.jsxs("p",{className:"text-xs text-blue-800",children:[i.jsx("strong",{children:"Note:"}),` A gold "Go Vote!" button will be automatically added to the email below your message. You don't need to include the link in your text.`]})})]})]})]})]}),i.jsxs("div",{className:"flex justify-end gap-3 pt-6 border-t mt-6",children:[i.jsx(_t,{variant:"secondary",onClick:Is,disabled:I,children:"Cancel"}),i.jsx(_t,{variant:"primary",onClick:_u,disabled:I||Kn.length===0||Tn.length===0,children:I?"Sending...":`Send to ${Tn.length} Stakeholder${Tn.length===1?"":"s"}`})]})]}),i.jsx(cn,{isOpen:!!Q,onClose:Ie,title:"",hideHeader:!0,maxWidth:"max-w-md",hideCloseButton:!1,children:i.jsxs("div",{className:"py-6 px-4",children:[i.jsxs("div",{className:"text-center mb-6",children:[i.jsx("div",{className:"mx-auto h-16 w-16 rounded-full bg-green-100 flex items-center justify-center mb-4",children:i.jsx(un,{className:"h-10 w-10 text-green-600"})}),i.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-1",children:"Invites Sent!"}),i.jsxs("p",{className:"text-sm text-gray-600",children:["Successfully emailed ",(Q==null?void 0:Q.count)??0," stakeholder",(Q==null?void 0:Q.count)===1?"":"s"," for"," ",i.jsx("span",{className:"font-semibold text-gray-900",children:Q==null?void 0:Q.sessionTitle}),"."]})]}),(Q==null?void 0:Q.stakeholders)&&Q.stakeholders.length>0&&i.jsxs("div",{className:"mt-6 border-t border-gray-200 pt-6",children:[i.jsx("h4",{className:"text-sm font-semibold text-gray-900 mb-3",children:"Recipients:"}),i.jsx("div",{className:"max-h-64 overflow-y-auto space-y-2",children:Q.stakeholders.map((D,re)=>i.jsxs("div",{className:"flex items-start py-2 px-3 bg-gray-50 rounded-md",children:[i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsx("p",{className:"text-sm font-medium text-gray-900 truncate",children:D.name}),i.jsx("p",{className:"text-xs text-gray-500 truncate",children:D.email})]}),i.jsx(un,{className:"h-4 w-4 text-green-600 flex-shrink-0 ml-2 mt-1"})]},re))})]})]})}),Qe&&i.jsxs(cn,{isOpen:!0,onClose:()=>nt(null),title:"Delete Product",children:[i.jsxs("p",{className:"text-sm text-gray-700 mb-4",children:["Are you sure you want to delete ",i.jsx("span",{className:"font-semibold",children:Qe.name}),"? This will remove it for everyone in your tenant."]}),i.jsxs("div",{className:"flex justify-end gap-3",children:[i.jsx(_t,{variant:"secondary",onClick:()=>nt(null),disabled:Vt,children:"Cancel"}),i.jsx(_t,{variant:"danger",onClick:Gt,disabled:Vt,children:Vt?"Deleting":"Delete"})]})]}),Pr&&i.jsx(cn,{isOpen:!0,onClose:()=>{bn(null),Rr(""),an(null),qn(!1)},title:"Edit Product",children:i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Product Name *"}),i.jsx("input",{type:"text",value:as,onChange:D=>Rr(D.target.value),placeholder:"Enter product name",className:"w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-0 focus:border-[#2D4660]"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Product Color"}),i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("button",{type:"button",onClick:()=>{Ts(is||"#2D4660"),qn(!0)},className:"block w-12 h-12 rounded-md border-2 border-gray-300 hover:border-gray-400 transition-all flex items-center justify-center overflow-hidden",style:is?{backgroundColor:is}:{backgroundColor:"#ffffff"},children:!is&&i.jsx("img",{src:"/colorpicker.png",alt:"Color Picker",className:"w-8 h-8 object-contain"})}),i.jsx("span",{className:"text-sm text-gray-600",children:is||"No color selected"})]})]}),i.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t",children:[i.jsx(_t,{variant:"secondary",onClick:()=>{bn(null),Rr(""),an(null),qn(!1)},disabled:bs,children:"Cancel"}),i.jsx(_t,{variant:"primary",onClick:async()=>{if(!(!(Pr!=null&&Pr.id)||!as.trim())){os(!0);try{await wE(Pr.id,{name:as.trim(),color_hex:is});const D=(e==null?void 0:e.tenant_id)??(e==null?void 0:e.tenantId);if(D){const re=await Ho(D);ge(re.sort((Ge,Je)=>Ge.name.localeCompare(Je.name)));const de={},Ne={};re.forEach(Ge=>{de[Ge.id]=Ge.name||"",Ge.color_hex&&(Ne[Ge.id]=Ge.color_hex)}),ve(de),H(Ne)}bn(null),Rr(""),an(null),qn(!1),await r(),await on()}catch(D){console.error("Error updating product:",D),alert("Failed to update product. Please try again.")}finally{os(!1)}}},disabled:bs||!as.trim(),children:bs?"Updating...":"Update Product"})]})]})}),js&&i.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",onClick:()=>qn(!1),children:i.jsx("div",{className:"bg-white rounded-lg shadow-xl px-3 py-2 w-auto mx-4",onClick:D=>D.stopPropagation(),children:i.jsxs("div",{className:"flex gap-3 items-stretch",children:[i.jsxs("div",{className:"flex-shrink-0",style:{width:"240px",height:"260px"},children:[i.jsx("input",{id:"edit-native-color-input",type:"color",value:vr,onChange:D=>Ts(D.target.value),ref:D=>{D&&js&&setTimeout(()=>D.click(),50)},className:"opacity-0 absolute",style:{width:"1px",height:"1px"}}),i.jsx("div",{className:"w-full h-full"})]}),i.jsxs("button",{type:"button",onClick:()=>{an(vr),qn(!1)},className:"px-6 rounded-lg text-white font-bold shadow-lg hover:shadow-xl transition-all flex flex-col items-center justify-center gap-3 text-lg flex-shrink-0",style:{backgroundColor:vr,height:"260px",minWidth:"100px"},children:[i.jsx(un,{className:"h-8 w-8"}),i.jsxs("div",{className:"text-center leading-tight",children:[i.jsx("div",{children:"Looks"}),i.jsx("div",{children:"Good"})]})]})]})})})]})}function GZ(){const{currentUser:e,sessions:t}=Gl(),r=oi(),[n,s]=y.useState([]),[a,l]=y.useState(!0),[u,d]=y.useState(!1);y.useEffect(()=>{m()},[t]);const m=async()=>{l(!0);try{const v=new Set;for(const x of t)(await Wm(x.id)).forEach(k=>{k.user&&k.user.email&&v.add(k.user.email)});s(Array.from(v))}catch(v){console.error("Error loading admin emails:",v)}finally{l(!1)}},f=()=>{const v=encodeURIComponent(" Request: Add me to Feature Voting System"),x=encodeURIComponent(`Hi Team,

I tried to access the Feature Voting System but don't have admin permissions yet.

Could you please add me to the system so I can participate in voting?

My details:
Name: ${(e==null?void 0:e.name)||"Unknown"}
Email: ${(e==null?void 0:e.email)||"Unknown"}

Thanks!
${(e==null?void 0:e.name)||"A hopeful voter"} `),w=n.length>0?`mailto:${n.join(",")}?subject=${v}&body=${x}`:`mailto:?subject=${v}&body=${x}`;window.location.href=w,d(!0)},p=()=>{r("/login")};return a?i.jsx("div",{className:"min-h-screen w-full bg-gray-50 flex items-center justify-center",children:i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-[#2d4660] mx-auto mb-4"}),i.jsx("p",{className:"text-gray-600",children:"Loading..."})]})}):i.jsx("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 to-gray-100 flex items-center justify-center p-4",children:i.jsxs("div",{className:"max-w-md w-full",children:[i.jsx("div",{className:"text-center mb-8",children:i.jsx("img",{src:Di,alt:"New Millennium Building Systems Logo",className:"mx-auto cursor-pointer hover:opacity-80 transition-opacity",style:{height:"80px",width:"auto"},onClick:()=>r("/sessions")})}),i.jsxs("div",{className:"relative z-10 bg-white rounded-xl shadow-lg overflow-hidden",children:[i.jsxs("div",{className:"bg-gradient-to-r from-[#2d4660] to-[#1d3a53] p-6 text-center",children:[i.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-white/10 rounded-full mb-4",children:i.jsx(uF,{className:"h-8 w-8 text-white"})}),i.jsx("h1",{className:"text-2xl font-bold text-white mb-2",children:"Whoa There, Speedracer! "}),i.jsx("p",{className:"text-blue-100 text-sm",children:"You need access to the Feature Voting System"})]}),i.jsx("div",{className:"p-6",children:u?i.jsx(i.Fragment,{children:i.jsxs("div",{className:"text-center py-4",children:[i.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-green-100 rounded-full mb-4",children:i.jsx(un,{className:"h-8 w-8 text-green-600"})}),i.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-2",children:"Email Sent! "}),i.jsx("p",{className:"text-gray-600 mb-6",children:"Your access request has been sent to the admin team. They'll get you set up soon!"}),i.jsxs("button",{onClick:p,className:"inline-flex items-center px-4 py-2 bg-[#2d4660] text-white rounded-lg hover:bg-[#1d3a53] transition-colors",children:[i.jsx(lS,{className:"h-4 w-4 mr-2"}),"Back to Login"]})]})}):i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"mb-6",children:[i.jsx("p",{className:"text-gray-600 mb-4",children:"Looks like you're trying to access the Feature Voting System, but you haven't been added yet."}),i.jsx("p",{className:"text-gray-600 mb-4",children:"No worries! Click the button below to send a quick message to the admins asking to be added."}),i.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:i.jsxs("div",{className:"flex items-start",children:[i.jsx(es,{className:"h-5 w-5 text-blue-600 mr-2 mt-0.5 flex-shrink-0"}),i.jsx("div",{className:"text-sm text-blue-800",children:n.length>0?i.jsxs(i.Fragment,{children:[i.jsx("p",{className:"font-medium mb-1",children:"Your message will be sent to:"}),i.jsx("p",{className:"text-xs",children:n.join(", ")})]}):i.jsx("p",{children:"Your message will help the admin team get you set up!"})})]})})]}),i.jsxs("div",{className:"space-y-3",children:[i.jsxs("button",{onClick:f,className:"w-full flex items-center justify-center px-4 py-3 bg-[#c59f2d] text-white rounded-lg hover:bg-[#a88a26] transition-colors font-medium",children:[i.jsx(Ym,{className:"h-5 w-5 mr-2"}),"Request Access from Admins"]}),i.jsxs("button",{onClick:p,className:"w-full flex items-center justify-center px-4 py-3 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-colors",children:[i.jsx(lS,{className:"h-4 w-4 mr-2"}),"Back to Login"]})]})]})})]}),i.jsx("div",{className:"mt-6 text-center",children:i.jsx("p",{className:"text-sm text-gray-500",children:"Once you're added to the system, you'll be able to participate in voting sessions."})})]})})}function YZ(){const{currentUser:e,setCurrentUser:t,setCurrentSession:r}=Gl(),n=oi(),s=async()=>{try{await Ee.auth.signOut()}catch{}try{r(null)}catch{}t(null);try{localStorage.removeItem("voting_system_current_session"),localStorage.removeItem("azureDevOpsAuthInProgress"),sessionStorage.removeItem("oauth_return_path"),sessionStorage.removeItem("oauth_action")}catch{}N(!1),n("/login",{replace:!0})},[a,l]=y.useState([]),[u,d]=y.useState(!0),[m,f]=y.useState(!1),[p,v]=y.useState({email:""}),[x,w]=y.useState({}),[k,b]=y.useState(!1),[_,N]=y.useState(!1),C=y.useRef(null),[T,P]=y.useState(!1),[A,M]=y.useState(!1);y.useEffect(()=>{if(!_)return;const ne=W=>{C.current&&!C.current.contains(W.target)&&N(!1)};return document.addEventListener("mousedown",ne),document.addEventListener("touchstart",ne,{passive:!0}),()=>{document.removeEventListener("mousedown",ne),document.removeEventListener("touchstart",ne)}},[_]),y.useEffect(()=>{R()},[]),y.useEffect(()=>{(async()=>{if(!e)return;const W=await ro(e.id);P(W);try{const q=await xE(e.id);M(Array.isArray(q)&&q.length>0)}catch(q){console.error("Error checking product owner status:",q),M(!1)}})()},[e]);const R=async()=>{d(!0);try{let ne=await _k();ne.length===0&&e&&(console.log("No system admins found. Adding current user as first system admin..."),await Nk(e.id),ne=await _k()),l(ne)}catch(ne){console.error("Error loading system admins:",ne)}finally{d(!1)}},K=ne=>/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(ne),B=async ne=>{ne.preventDefault();const W={};if(p.email.trim()?K(p.email)||(W.email="Invalid email address"):W.email="Email is required",a.some(q=>q.user.email.toLowerCase()===p.email.toLowerCase())&&(W.email="This user is already a system admin"),w(W),!(Object.keys(W).length>0)){b(!0);try{const q=p.email.split("@")[0].replace(/\./g," "),ve=await Uc(p.email,q);await Nk(ve.id);try{const $=window.location.pathname.startsWith("/feature-voting-app")?"/feature-voting-app":"",H=`${window.location.origin}${$}/login`;await Jc({to:p.email,subject:"You're a System Admin: Feature Voting System",text:`Hi,

You've been granted System Admin access to the Feature Voting System.

Login: ${H}

Best regards,
System`,html:`<p>Hi,</p><p>You've been granted <strong>System Admin</strong> access to the Feature Voting System.</p><p><a href="${H}">Login</a></p><p>Best regards,<br/>System</p>`})}catch{try{const $=window.location.pathname.startsWith("/feature-voting-app")?"/feature-voting-app":"",H=`${window.location.origin}${$}/login`,ce=encodeURIComponent("You're a System Admin: Feature Voting System"),le=encodeURIComponent(`Hi,

You've been granted System Admin access to the Feature Voting System.

To sign in, use this link:

${H}

Best regards,
System`);window.location.href=`mailto:${encodeURIComponent(p.email)}?subject=${ce}&body=${le}`}catch{}}await R(),v({email:""}),f(!1)}catch(q){console.error("Error adding system admin:",q),w({submit:"Failed to add system admin. Please try again."})}finally{b(!1)}}},ie=async ne=>{const W=a.reduce((q,ve)=>new Date(ve.created_at)<new Date(q.created_at)?ve:q);if(ne===W.user_id){alert("Cannot remove the original system admin. This protects against accidentally locking everyone out of the system.");return}if(a.length===1){alert("Cannot remove the last system admin. The system must have at least one admin.");return}if(ne===(e==null?void 0:e.id)){alert("You cannot remove yourself as a system admin.");return}if(confirm("Are you sure you want to remove this system admin?"))try{await E5(ne),await R()}catch(q){console.error("Error removing system admin:",q),alert("Failed to remove system admin")}},G=ne=>{const q=ne.split("T")[0].split(" ")[0].split("-");let ve;if(q.length===3){const $=parseInt(q[0],10),H=parseInt(q[1],10)-1,ce=parseInt(q[2],10);ve=new Date($,H,ce);const le=ne.match(/T(\d{2}):(\d{2}):(\d{2})/);le&&ve.setHours(parseInt(le[1],10),parseInt(le[2],10),parseInt(le[3],10))}else ve=new Date(ne);return ve.toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})};return u?i.jsx("div",{className:"min-h-screen w-full bg-gray-50 flex items-center justify-center",children:i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-[#2d4660] mx-auto mb-4"}),i.jsx("p",{className:"text-gray-600",children:"Loading system admins..."})]})}):i.jsxs("div",{className:"container mx-auto p-4 max-w-6xl min-h-screen pb-8",children:[i.jsx("div",{className:"hidden md:flex md:justify-center mb-2",children:i.jsx("img",{src:Di,alt:"New Millennium Building Systems Logo",className:"-mt-4 cursor-pointer hover:opacity-80 transition-opacity",style:{height:"96px",width:"auto"},onClick:()=>n("/sessions")})}),i.jsxs("div",{className:"flex justify-between items-center mb-6",children:[i.jsxs("div",{className:"flex items-center",children:[i.jsx("img",{src:Zl,alt:"New Millennium Building Systems Logo",className:"mr-4 md:hidden",style:{width:"40px",height:"40px",objectFit:"contain"}}),i.jsx("button",{onClick:()=>n("/sessions"),className:"mr-2 p-1 rounded-full hover:bg-gray-200 cursor-pointer",children:i.jsx(KM,{className:"h-6 w-6"})}),i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsx("h1",{className:"text-2xl font-bold text-[#2d4660] md:text-3xl",children:"System Admins"}),e&&i.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:[e.name,T&&i.jsx("span",{className:"ml-2 inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium bg-[#C89212] text-white",children:"System Admin"}),!T&&A&&i.jsx("span",{className:"ml-2 inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium bg-[#576C71] text-white",children:"Product Owner"})]})]})]}),i.jsxs("div",{ref:C,className:"relative z-40",children:[i.jsxs("div",{className:"hidden md:flex space-x-2",children:[i.jsxs("button",{onClick:()=>n("/sessions"),className:"flex items-center px-4 py-2 bg-[#4f6d8e] text-white rounded-lg hover:bg-[#3d5670] transition-colors",children:[i.jsx(ma,{className:"h-4 w-4 mr-2"}),"My Sessions"]}),i.jsxs("button",{onClick:()=>f(!0),className:"flex items-center px-4 py-2 bg-[#c59f2d] text-white rounded-lg hover:bg-[#a88a26] transition-colors",children:[i.jsx(fS,{className:"h-4 w-4 mr-2"}),"Add System Admin"]}),i.jsx("button",{onClick:s,className:"flex items-center justify-center p-2 w-10 h-10 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-colors",title:"Logout",children:i.jsx(Ma,{className:"h-4 w-4"})})]}),i.jsx("div",{className:"flex md:hidden",children:i.jsx("button",{onClick:()=>N(!_),className:"p-2 rounded-md border border-gray-200 bg-white shadow-sm","aria-label":"Open menu",children:i.jsx(ki,{className:"h-5 w-5 text-gray-700"})})}),_&&i.jsx("div",{className:"absolute right-0 mt-2 w-56 bg-white border border-gray-200 rounded-lg shadow-lg md:hidden z-50",children:i.jsxs("div",{className:"py-1",children:[i.jsxs("button",{onClick:()=>{N(!1),n("/sessions")},className:"w-full px-3 py-2 flex items-center text-left hover:bg-gray-50",children:[i.jsx(ma,{className:"h-4 w-4 mr-2 text-gray-700"}),"My Sessions"]}),i.jsxs("button",{onClick:()=>{N(!1),f(!0)},className:"w-full px-3 py-2 flex items-center text-left hover:bg-gray-50",children:[i.jsx(fS,{className:"h-4 w-4 mr-2 text-gray-700"}),"Add System Admin"]}),i.jsx("button",{onClick:()=>{N(!1),s()},className:"w-full px-3 py-2 flex items-center justify-center hover:bg-gray-50",title:"Logout",children:i.jsx(Ma,{className:"h-4 w-4 text-gray-700"})})]})})]})]}),i.jsx("div",{className:"relative z-10 bg-gradient-to-r from-[#2d4660] to-[#1d3a53] rounded-lg shadow-md p-6 mb-6 text-white",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center",children:[i.jsx(fn,{className:"h-8 w-8 mr-3"}),i.jsxs("div",{children:[i.jsx("h2",{className:"text-xl font-semibold",children:"Feature Voting System"}),i.jsx("p",{className:"text-blue-100 mt-1",children:"Global administrator management"})]})]}),i.jsxs("div",{className:"text-right",children:[i.jsx("p",{className:"text-sm text-blue-100",children:"Total System Admins"}),i.jsx("p",{className:"text-3xl font-bold",children:a.length})]})]})}),i.jsxs("div",{className:"relative z-10 bg-white rounded-lg shadow-md overflow-hidden",children:[i.jsxs("div",{className:"p-6 border-b border-gray-200",children:[i.jsxs("h2",{className:"text-lg font-semibold text-[#2d4660]",children:["System Administrators (",a.length,")"]}),i.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Manage who has full access to the Feature Voting System"})]}),i.jsx("div",{className:"overflow-x-auto",children:i.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[i.jsx("thead",{className:"bg-gray-50",children:i.jsxs("tr",{children:[i.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Name"}),i.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Email"}),i.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Added"}),i.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),i.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:(()=>{const ne=a.reduce((W,q)=>new Date(q.created_at)<new Date(W.created_at)?q:W);return a.map(W=>{const q=W.user_id===ne.user_id;return i.jsxs("tr",{className:"hover:bg-gray-50",children:[i.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:i.jsxs("div",{className:"flex items-center",children:[i.jsx(fn,{className:"h-5 w-5 text-[#c59f2d] mr-2"}),i.jsxs("span",{className:"text-sm font-medium text-gray-900",children:[W.user.name,W.user.id===(e==null?void 0:e.id)&&i.jsx("span",{className:"ml-2 text-xs text-gray-500",children:"(You)"}),q&&i.jsx("span",{className:"ml-2 text-xs text-[#c59f2d] font-semibold",children:"(Original Admin)"})]})]})}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:i.jsxs("div",{className:"flex items-center text-sm text-gray-500",children:[i.jsx(Ym,{className:"h-4 w-4 mr-2"}),W.user.email]})}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:G(W.created_at)}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:i.jsx("button",{onClick:()=>ie(W.user_id),className:`text-red-600 hover:text-red-900 ${W.user.id===(e==null?void 0:e.id)||a.length===1||q?"opacity-50 cursor-not-allowed":""}`,disabled:W.user.id===(e==null?void 0:e.id)||a.length===1||q,title:q?"Cannot remove the original system admin":W.user.id===(e==null?void 0:e.id)?"You cannot remove yourself":a.length===1?"Cannot remove the last system admin":"Remove system admin",children:i.jsx(Qo,{className:"h-5 w-5"})})})]},W.id)})})()})]})})]}),i.jsx("div",{className:"relative z-10 mt-6 bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:i.jsxs("div",{className:"flex items-start",children:[i.jsx(fn,{className:"h-5 w-5 text-yellow-600 mr-3 mt-0.5"}),i.jsxs("div",{className:"text-sm text-yellow-800",children:[i.jsx("p",{className:"font-medium mb-1",children:"System Admin Permissions:"}),i.jsxs("ul",{className:"list-disc list-inside space-y-1",children:[i.jsx("li",{children:"Full access to all voting sessions across the system"}),i.jsx("li",{children:"Create and manage any voting session"}),i.jsx("li",{children:"Add and remove other system administrators"}),i.jsx("li",{children:"Manage Product Owners and stakeholders for any session"}),i.jsx("li",{children:"View all results and analytics system-wide"})]}),i.jsx("p",{className:"mt-3 text-xs font-medium",children:"Note: The original system admin (first person to access this page) cannot be removed to prevent system lockout."})]})]})}),m&&i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:i.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-md w-full",children:[i.jsxs("div",{className:"flex justify-between items-center mb-4",children:[i.jsx("h3",{className:"text-lg font-medium text-[#2d4660]",children:"Add System Admin"}),i.jsx("button",{onClick:()=>{f(!1),v({email:""}),w({})},className:"text-gray-400 hover:text-gray-500",children:i.jsx(ts,{className:"h-5 w-5"})})]}),i.jsxs("form",{onSubmit:B,className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email Address *"}),i.jsx("input",{type:"email",value:p.email,onChange:ne=>v(W=>({...W,email:ne.target.value})),className:`w-full px-3 py-2 border rounded-md focus:ring-2 focus:ring-[#2d4660] focus:border-transparent ${x.email?"border-red-500":"border-gray-300"}`,placeholder:"admin@example.com"}),x.email&&i.jsxs("p",{className:"mt-1 text-sm text-red-600 flex items-center",children:[i.jsx(nn,{className:"h-4 w-4 mr-1"}),x.email]})]}),x.submit&&i.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-3",children:i.jsxs("p",{className:"text-sm text-red-800 flex items-center",children:[i.jsx(nn,{className:"h-4 w-4 mr-2"}),x.submit]})}),i.jsxs("div",{className:"flex justify-end space-x-2 pt-4",children:[i.jsx("button",{type:"button",onClick:()=>{f(!1),v({email:""}),w({})},className:"px-4 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50",disabled:k,children:"Cancel"}),i.jsx("button",{type:"submit",className:"px-4 py-2 bg-[#2d4660] text-white rounded-md hover:bg-[#1d3a53] disabled:opacity-50",disabled:k,children:k?"Adding...":"Add System Admin"})]})]})]})})]})}async function JZ(e){var t,r,n,s;if(!e||e.trim().length<2)return[];try{const{data:{session:a},error:l}=await Ee.auth.getSession();if(l)throw console.error("Error getting session:",l),new Error("Unable to access your session. Please sign in again.");if(!a)throw console.warn("No session available for Azure AD search"),new Error("You must be signed in to search company users.");if(!(((r=(t=a.user)==null?void 0:t.app_metadata)==null?void 0:r.provider)==="azure"||((s=(n=a.user)==null?void 0:n.identities)==null?void 0:s.some(k=>k.provider==="azure"))))throw console.warn("User not signed in with Azure AD"),new Error("You must sign in with Microsoft to search company users.");const d=a.provider_token||a.access_token;if(!d)throw console.warn("No provider token available for Azure AD search"),new Error("Unable to access Microsoft Graph. Please sign out and sign in again with Microsoft.");const m=e.trim(),f=`startswith(displayName,'${m}') or startswith(mail,'${m}') or startswith(userPrincipalName,'${m}') or startswith(givenName,'${m}') or startswith(surname,'${m}')`,p=`https://graph.microsoft.com/v1.0/users?$filter=${encodeURIComponent(f)}&$select=id,displayName,mail,userPrincipalName,givenName,surname,jobTitle,department&$top=20`,v=await fetch(p,{headers:{Authorization:`Bearer ${d}`,"Content-Type":"application/json"}});if(!v.ok){const k=await v.text();let b="";throw v.status===401?(b="Authentication failed. Please sign out and sign in again with Microsoft.",console.warn("Azure AD search 401:",k)):v.status===403?(b='Your Azure AD app needs "User.ReadBasic.All" or "User.Read.All" permission to search users. An administrator must grant this permission in Azure Portal.',console.warn("Azure AD search 403 - Insufficient permissions:",k)):v.status===400?(b="Invalid search query. Please try a different search term.",console.warn("Azure AD search 400:",k)):(b=`Unable to search users (${v.status}). Please try again.`,console.error("Azure AD search error:",v.status,k)),new Error(b)}return((await v.json()).value||[]).map(k=>({id:k.id,displayName:k.displayName||"",mail:k.mail||k.userPrincipalName||"",userPrincipalName:k.userPrincipalName||"",givenName:k.givenName,surname:k.surname,jobTitle:k.jobTitle,department:k.department})).sort((k,b)=>{const _=k.displayName.toLowerCase(),N=b.displayName.toLowerCase();return _.localeCompare(N)})}catch(a){throw console.error("Error searching Azure AD users:",a),a}}const XZ=e=>{if(!e.start_date||!e.end_date)return"No dates set";const t=Os(e.start_date),r=Os(e.end_date);return`${t} - ${r}`},Ya=e=>{if(!e)return"";const t=e.trim();if(!t)return"";if(t.includes(",")){const r=t.split(",").map(n=>n.trim()).filter(n=>n);return r.length===2?`${r[1]} ${r[0]}`:r.reverse().join(" ")}return t},QZ=(e,t,r)=>e?{label:"System Admin",className:"text-[#C89212]",icon:i.jsx(fn,{className:"h-3.5 w-3.5"})}:t?{label:"Product Owner",className:"text-[#576C71]",icon:i.jsx(Hr,{className:"h-3.5 w-3.5"})}:r?{label:"Stakeholder",className:"text-[#8B5A4A]",icon:i.jsx(vs,{className:"h-3.5 w-3.5"})}:null,ZZ=e=>{switch(e){case"system-admin":return{label:"System Admin",className:"text-[#C89212]",icon:i.jsx(fn,{className:"h-3.5 w-3.5"})};case"product-owner":return{label:"Product Owner",className:"text-[#576C71]",icon:i.jsx(Hr,{className:"h-3.5 w-3.5"})};case"stakeholder":return{label:"Stakeholder",className:"text-[#8B5A4A]",icon:i.jsx(vs,{className:"h-3.5 w-3.5"})};default:return null}},eee=(e,t,r)=>e?"system-admin":t?"product-owner":"stakeholder",tee=(e,t,r,n)=>{const s=eee(e,t),a=QZ(e,t,r);if(!a)return null;if(n===s)return i.jsxs("span",{className:"text-sm text-gray-600",children:[","," ",i.jsxs("span",{className:`inline-flex items-baseline ${a.className}`,children:[i.jsx("span",{className:"inline-flex items-center",children:a.icon}),i.jsx("span",{className:"ml-1 text-sm",children:a.label})]})]});const l=ZZ(n);return l?i.jsxs("span",{className:"text-sm text-gray-600",children:[","," ",i.jsxs("span",{className:`inline-flex items-baseline ${a.className}`,children:[i.jsx("span",{className:"inline-flex items-center",children:a.icon}),i.jsx("span",{className:"ml-1 text-sm",children:a.label})]}),i.jsx("span",{className:"md:inline hidden",children:", "}),i.jsxs("span",{className:"whitespace-nowrap md:inline inline-block",children:[i.jsx("span",{className:"md:hidden",children:", "}),"viewing this page as a"," ",i.jsxs("span",{className:`inline-flex items-baseline ${l.className}`,children:[i.jsx("span",{className:"inline-flex items-center",children:l.icon}),i.jsx("span",{className:"ml-1 text-sm",children:l.label})]})]})]}):null};function ree(){var Ce,rt,Le;const e=oi(),t=Ti(),{setCurrentSession:r,currentUser:n}=Gl(),s=new URLSearchParams(t.search),a=s.get("filter"),l=s.get("product"),[u,d]=y.useState([]),[m,f]=y.useState([]),[p,v]=y.useState([]),[x,w]=y.useState(!0),[k,b]=y.useState(null),[_,N]=y.useState(new Set),[C,T]=y.useState(""),[P,A]=y.useState(a==="product-owner"?"product-owner":a==="stakeholder"?"stakeholder":a==="system-admin"?"system-admin":"all"),[M,R]=y.useState(l||""),[K,B]=y.useState(()=>sessionStorage.getItem("usersViewMode")||"system-admin"),[ie,G]=y.useState(null),[ne,W]=y.useState(!1),[q,ve]=y.useState(!1),[$,H]=y.useState([]),[ce,le]=y.useState(new Set),[U,te]=y.useState(null),[he,$e]=y.useState(null),[Pe,ke]=y.useState(null),[De,He]=y.useState(new Set),[Y,ge]=y.useState(!1),[oe,se]=y.useState(null),[Be,Xe]=y.useState(null),[mt,zt]=y.useState({adminSessions:[],stakeholderSessions:[]}),[Qe,nt]=y.useState(""),[Vt,F]=y.useState(!1),L=y.useRef(null),[V,Se]=y.useState(null),[we,Ae]=y.useState(null),[Ke,wt]=y.useState(!1),[vt,We]=y.useState(!1),[Oe,dt]=y.useState({name:"",email:"",isSystemAdmin:!1,isProductOwner:!1,isStakeholder:!1,productOwnerProductId:"",stakeholderProductId:""}),[Qt,Dt]=y.useState(!1),[ze,Ye]=y.useState(!1),it=y.useRef(null),bt=y.useRef(null),[jt,Yt]=y.useState(!1),Jt=y.useRef(null),[rr,or]=y.useState(!1),ur=y.useRef(null),[Nt,Kt]=y.useState({searchTerm:"",results:[],isSearching:!1,showResults:!1,error:""}),[nr,mr]=y.useState(!0),Ur=y.useRef(null),[Sr,jr]=y.useState(!1),[sn,Vn]=y.useState(null),[wn,fr]=y.useState(""),[pr,Pr]=y.useState(""),[bn,as]=y.useState(!1),[Rr,is]=y.useState({title:"",message:"",type:"info"}),an=new Set(["spencer.faull@newmill.com","chris.rodes@newmill.com","dave.hoffman@newmill.com"]),[bs,os]=y.useState(null),[js,qn]=y.useState(new Set);y.useRef({}),y.useEffect(()=>{hn()},[]),y.useEffect(()=>{const I=ae=>{Pe&&!ae.target.closest(".actions-dropdown-container")&&ke(null),Qt&&it.current&&!it.current.contains(ae.target)&&Dt(!1),ze&&bt.current&&!bt.current.contains(ae.target)&&Ye(!1),Vt&&L.current&&!L.current.contains(ae.target)&&F(!1),jt&&Jt.current&&!Jt.current.contains(ae.target)&&Yt(!1),rr&&ur.current&&!ur.current.contains(ae.target)&&or(!1),Nt.showResults&&Ur.current&&!Ur.current.contains(ae.target)&&Kt(Q=>({...Q,showResults:!1}))};return document.addEventListener("mousedown",I),()=>{document.removeEventListener("mousedown",I)}},[Pe,Qt,ze,Vt,jt,rr,Nt.showResults]);const vr=(I,ae,Q="info")=>{is({title:I,message:ae,type:Q}),as(!0)},Ts=I=>{if(I.id===bs)return"Original Admin";const ae=I.email.toLowerCase();return ae==="chris.rodes@newmill.com"?"Manager":ae==="spencer.faull@newmill.com"?"Portfolio Owner":null},Hn=async(I,ae)=>{Xe(I),se(ae),nt(""),Se(null),Ae(null),ge(!0),ke(null)},ks=async()=>{if(we!=="system-admin"&&(!Be||!oe||!Qe)){vr("Missing Information","Please select a product to continue.","error");return}if(we==="system-admin"&&(!Be||!oe)){vr("Missing Information","Unable to process request.","error");return}if(oe==="remove-stakeholder"&&!V){vr("Missing Information","Please select a role to remove.","error");return}if((oe==="product-owner"||oe==="stakeholder"||oe==="system-admin")&&!we){vr("Missing Information","Please select a role to add.","error");return}try{const I=m.filter(ae=>ae.product_id===Qe);if((we==="product-owner"||we==="stakeholder")&&I.length===0){vr("No Sessions Found","There are no sessions available for this product.","error");return}if(oe==="remove-stakeholder"){if(V==="system-admin"){const{error:ae}=await Ee.from("system_admins").delete().eq("user_id",Be.id);if(ae)throw ae;vr("Role Removed Successfully",`${Ya(Be.name)} has been removed as System Admin.`,"success")}else if(V==="product-owner"){const{error:ae}=await Ee.from("product_product_owners").delete().eq("user_id",Be.id).eq("product_id",Qe);if(ae)throw ae;vr("Role Removed Successfully",`${Ya(Be.name)} has been removed as Product Owner from this product.`,"success")}else if(V==="stakeholder"){const ae=I.map(Z=>Z.id),{error:Q}=await Ee.from("product_stakeholders").delete().eq("user_id",Be.id).in("session_id",ae);if(Q)throw Q;vr("Role Removed Successfully",`${Ya(Be.name)} has been removed as Stakeholder from ${I.length} session(s).`,"success")}}else if(we==="system-admin"){const{error:ae}=await Ee.from("system_admins").insert({user_id:Be.id});if(ae)throw ae;vr("Role Added Successfully",`${Ya(Be.name)} has been granted System Admin privileges.`,"success")}else if(we==="product-owner"){const{data:ae,error:Q}=await Ee.from("product_product_owners").select("id").eq("product_id",Qe).eq("user_id",Be.id).maybeSingle();if(Q&&Q.code!=="PGRST116")throw Q;if(ae)vr("Already Assigned",`${Ya(Be.name)} is already a Product Owner for this product.`,"info");else{const{error:Z}=await Ee.from("product_product_owners").insert({product_id:Qe,user_id:Be.id});if(Z)throw Z;vr("Role Added Successfully",`${Ya(Be.name)} has been added as Product Owner to this product.`,"success")}}else if(we==="stakeholder"){const ae=I.map(Q=>Q.id);for(const Q of ae)await Ee.from("product_stakeholders").insert({session_id:Q,user_id:Be.id,user_email:Be.email,user_name:Be.name});vr("Role Added Successfully",`${Ya(Be.name)} has been added as Stakeholder to ${I.length} session(s).`,"success")}ge(!1),await hn()}catch(I){console.error("Error with role operation:",I),vr(`Failed to ${oe==="remove-stakeholder"?"Remove":"Add"} Role`,I.message||"An unknown error occurred. Please try again.","error")}},Kn=()=>{wt(!1),dt({name:"",email:"",isSystemAdmin:!1,isProductOwner:!1,isStakeholder:!1,productOwnerProductId:"",stakeholderProductId:""}),mr(!0),Kt({searchTerm:"",results:[],isSearching:!1,showResults:!1,error:""})},tr=async I=>{if(Kt(ae=>({...ae,searchTerm:I,isSearching:!0,showResults:!1,error:""})),!I||I.trim().length<2){Kt(ae=>({...ae,results:[],isSearching:!1,error:""}));return}try{const ae=await JZ(I);Kt(Q=>({...Q,results:ae,isSearching:!1,showResults:ae.length>0,error:""}))}catch(ae){console.error("Error searching Azure AD users:",ae);const Q=(ae==null?void 0:ae.message)||"Failed to search company users. Please try again.";Kt(Z=>({...Z,results:[],isSearching:!1,showResults:!1,error:Q}))}},Tn=I=>{let ae="";if(I.givenName&&I.surname)ae=`${I.givenName} ${I.surname}`;else if(I.displayName){const Q=I.displayName.trim();if(Q.includes(",")){const Z=Q.split(",").map(Ie=>Ie.trim());Z.length===2?ae=`${Z[1]} ${Z[0]}`:ae=Q}else ae=Q}else ae=I.mail||I.userPrincipalName||"";dt({...Oe,name:ae,email:I.mail||I.userPrincipalName}),Kt({searchTerm:"",results:[],isSearching:!1,showResults:!1,error:""}),mr(!1)},Ar=async()=>{if(!Oe.name.trim()||!Oe.email.trim()){vr("Missing Required Fields","Please provide both name and email address.","error");return}We(!0);try{const{data:I,error:ae}=await Ee.from("users").insert({name:Oe.name.trim(),email:Oe.email.trim().toLowerCase(),created_by:n==null?void 0:n.id,created_by_name:n==null?void 0:n.name}).select().single();if(ae)throw ae;if(!I)throw new Error("User creation failed");const Q=I.id;if(Oe.isSystemAdmin){const{error:Z}=await Ee.from("system_admins").insert({user_id:Q});if(Z)throw console.error("Error adding system admin:",Z),new Error(`Failed to assign System Admin role: ${Z.message}`)}if(Oe.isProductOwner&&Oe.productOwnerProductId){const Z=m.filter(Ie=>Ie.product_id===Oe.productOwnerProductId);for(const Ie of Z)await Ee.from("product_product_owners").insert({session_id:Ie.id,user_id:Q})}if(Oe.isStakeholder&&Oe.stakeholderProductId){const Z=m.filter(Ie=>Ie.product_id===Oe.stakeholderProductId);for(const Ie of Z)await Ee.from("product_stakeholders").insert({session_id:Ie.id,user_id:Q,user_email:Oe.email.trim().toLowerCase(),user_name:Oe.name.trim()})}Kn(),await hn(),vr("User Created Successfully",`${Ya(Oe.name)} has been added to the system.`,"success")}catch(I){console.error("Error creating user:",I),vr("Failed to Create User",I.message||"An unknown error occurred. Please try again.","error")}finally{We(!1)}},ls=async(I,ae)=>{const Q=u.find(Z=>Z.id===I);if(Q&&confirm(`Are you sure you want to delete ${ae}? This cannot be undone.`))try{await Ee.from("system_admins").delete().eq("user_id",I),await Ee.from("product_product_owners").delete().eq("user_id",I),await Ee.from("product_stakeholders").delete().eq("user_email",Q.email),await Ee.from("users").delete().eq("id",I),ke(null),await hn()}catch(Z){console.error("Error deleting user:",Z),vr("Failed to Delete User","An error occurred while deleting the user. Please try again.","error")}},hn=async()=>{var I,ae,Q;try{w(!0),b(null);const{data:{user:Z}}=await Ee.auth.getUser();if(!Z){e("/login");return}const[Ie,Tt,dr,Ve,$t,Pt]=await Promise.all([vE(),Ee.from("voting_sessions").select("*").order("created_at",{ascending:!1}),Ee.from("products").select("*").order("name"),Ee.from("votes").select("user_id, session_id"),Ee.from("product_product_owners").select("user_id, product_id, created_at"),Ee.from("product_stakeholders").select("user_email, product_id, created_at")]),sr=new Map;($t.data||[]).forEach(Zt=>{sr.has(Zt.user_id)||sr.set(Zt.user_id,[]),sr.get(Zt.user_id).push({product_id:Zt.product_id,created_at:Zt.created_at})});const ct=new Map;(Pt.data||[]).forEach(Zt=>{var jn;const Gt=((jn=Zt.user_email)==null?void 0:jn.toLowerCase())||"";Gt&&(ct.has(Gt)||ct.set(Gt,[]),ct.get(Gt).push({product_id:Zt.product_id,created_at:Zt.created_at}))});const hr=new Map((Tt.data||[]).map(Zt=>[Zt.id,Zt])),ar=new Map;if((Tt.data||[]).forEach(Zt=>{const Gt=Zt.product_id||"unknown";ar.has(Gt)||ar.set(Gt,[]),ar.get(Gt).push(Zt)}),Ie){const Zt=await Promise.all(Ie.map(async kr=>{const on=await c5(kr.id),Nr=[],Or=[],Gn=sr.get(kr.id)||[];Gn.forEach(kn=>{(ar.get(kn.product_id)||[]).forEach(Vs=>{Nr.push({...Vs,assignedAt:kn.created_at,assignedBy:"System",assignedByName:"System"})})});const Ss=kr.email.toLowerCase(),Dr=ct.get(Ss)||[];Dr.forEach(kn=>{(ar.get(kn.product_id)||[]).forEach(Vs=>{Or.push({...Vs,assignedAt:kn.created_at,assignedBy:"System",assignedByName:"System"})})});const In=new Set;Gn.forEach(kn=>{kn.product_id&&In.add(kn.product_id)});const Jr=new Set;return Dr.forEach(kn=>{kn.product_id&&Jr.add(kn.product_id)}),{...kr,roles:on,adminInSessions:Nr,stakeholderInSessions:Or,productOwnerProductIds:In,stakeholderProductIds:Jr}}));d(Zt);const Gt=n?Zt.find(kr=>kr.email.toLowerCase()===n.email.toLowerCase()):null;if(G(Gt||null),Gt&&sr.has(Gt.id)){const kr=new Set;(sr.get(Gt.id)||[]).forEach(Nr=>{Nr.product_id&&kr.add(Nr.product_id)}),console.log("[UsersManagementScreen] Current user product IDs:",Array.from(kr)),N(kr)}else console.log("[UsersManagementScreen] Current user not found or has no product assignments"),N(new Set);if(Gt){const kr=((I=Gt.roles)==null?void 0:I.isSystemAdmin)||!1,on=(((ae=Gt.roles)==null?void 0:ae.productOwnerCount)||0)>0;W(kr),ve(on);const Nr=sessionStorage.getItem("usersViewMode");Nr?Nr==="system-admin"&&kr?B("system-admin"):Nr==="product-owner"&&(kr||on)?B("product-owner"):!kr&&on?(B("product-owner"),sessionStorage.setItem("usersViewMode","product-owner")):kr&&(B("system-admin"),sessionStorage.setItem("usersViewMode","system-admin")):!kr&&on?(B("product-owner"),sessionStorage.setItem("usersViewMode","product-owner")):kr&&(B("system-admin"),sessionStorage.setItem("usersViewMode","system-admin"))}const jn=((Q=Gt==null?void 0:Gt.adminInSessions)==null?void 0:Q.map(kr=>kr.id))||[];H(jn)}if(Tt.data&&f(Tt.data),dr.data&&v(dr.data),Ve.data){const Zt=new Set(Ve.data.map(Gt=>`${Gt.user_id}-${Gt.session_id}`));He(Zt)}}catch(Z){console.error("UsersManagementScreenMultiRow: Error loading data:",Z),b(Z instanceof Error?Z.message:"An error occurred loading data")}finally{w(!1)}},cs=I=>{const ae=new Map;return I.forEach(Q=>{const Z=Q.product_id||"unknown";ae.has(Z)||ae.set(Z,[]),ae.get(Z).push(Q)}),ae},Ws=I=>{if(!I)return[];let ae=I;if(M&&(ae=ae.filter(Q=>Q.product_id===M)),K==="product-owner")if(_.size>0)ae=ae.filter(Q=>Q.product_id&&_.has(Q.product_id));else return[];return ae},Br=()=>ne&&K==="system-admin"?p:K==="product-owner"?_.size===0?[]:p.filter(I=>_.has(I.id)):[],_r=()=>{var ae,Q;const I=Br();if(oe==="remove-stakeholder"&&Be&&V){const Z=new Set;return V==="product-owner"?(ae=Be.adminInSessions)==null||ae.forEach(Ie=>{Ie.product_id&&Z.add(Ie.product_id)}):V==="stakeholder"&&((Q=Be.stakeholderInSessions)==null||Q.forEach(Ie=>{Ie.product_id&&Z.add(Ie.product_id)})),I.filter(Ie=>Z.has(Ie.id))}return I},X=I=>{const ae=[],Q=Ws(I.adminInSessions),Z=Ws(I.stakeholderInSessions);if(I.roles.isSystemAdmin&&ae.push({type:"system-admin",badge:i.jsxs("span",{className:"inline-flex items-center px-2.5 py-1 rounded text-xs font-medium bg-[#C89212] text-white",children:[i.jsx(fn,{className:"h-3.5 w-3.5 mr-1"}),"System Admin"]}),sessions:null,createdDate:I.created_at}),Q.length>0){const Ie=cs(Q);ae.push({type:"admin",badge:i.jsxs("span",{className:"inline-flex items-center px-2.5 py-1 rounded text-xs font-medium bg-[#576C71] text-white",children:[i.jsx(Hr,{className:"h-3.5 w-3.5 mr-1"}),"Product Owner (",Ie.size,")"]}),sessions:Q,createdDate:I.created_at,productCount:Ie.size})}if(Z.length>0){const Ie=cs(Z);ae.push({type:"stakeholder",badge:i.jsxs("span",{className:"inline-flex items-center px-2.5 py-1 rounded text-xs font-medium bg-[#8B5A4A] text-white",children:[i.jsx(vs,{className:"h-3.5 w-3.5 mr-1"}),"Stakeholder (",Ie.size,")"]}),sessions:Z,createdDate:I.created_at,productCount:Ie.size})}return ae.length===0&&ae.push({type:"system-admin",badge:i.jsx("span",{className:"text-gray-400 text-xs",children:"No roles"}),sessions:null,createdDate:I.created_at}),ae},ye=(I,ae)=>{if(!ae.sessions)return{isExpanded:!1,content:i.jsx("span",{className:"text-gray-600 text-xs font-medium",children:"All sessions"})};const Q=ae.sessions.length,Z=Q>1,Ie=ce.has(`${I.id}-${ae.type}`),Tt=cs(ae.sessions),dr=new Set(Array.from(Tt.values()).map($t=>{var Pt;return(Pt=$t[0])==null?void 0:Pt.id}).filter(Boolean)),Ve=()=>i.jsxs("div",{className:"inline-flex items-center gap-1.5 px-2.5 py-1 rounded border text-xs font-medium group",style:{borderColor:ae.type==="admin"?"#576C71":"#8B5A4A",color:ae.type==="admin"?"#576C71":"#8B5A4A"},children:[ae.type==="admin"?i.jsx(uS,{className:"h-3.5 w-3.5 flex-shrink-0",style:{fill:"#576C71",color:"#576C71"}}):i.jsx(vs,{className:"h-3.5 w-3.5 flex-shrink-0",style:{fill:"#8B5A4A",color:"#8B5A4A"}}),i.jsxs("span",{children:[ae.type==="admin"?"Product Owner":"Stakeholder"," in ",Q," session",Q!==1?"s":""]}),Z&&i.jsxs("span",{className:"inline-flex items-baseline gap-0.5",children:[Ie?i.jsx(Nd,{className:"h-2.5 w-2.5 transition-all group-hover:brightness-150 mt-[3px]"}):i.jsx(Cn,{className:"h-2.5 w-2.5 transition-all group-hover:brightness-150 mt-[3px]"}),i.jsx("span",{className:"text-[10px] transition-all group-hover:brightness-150",children:Ie?"Hide":"Show"})]})]});return{isExpanded:Ie,content:i.jsxs("div",{children:[i.jsx("div",{className:"mb-2",children:Z?i.jsx("button",{onClick:$t=>{$t.stopPropagation();const Pt=`${I.id}-${ae.type}`;le(sr=>{const ct=new Set(sr);return ct.has(Pt)?ct.delete(Pt):ct.add(Pt),ct})},className:"text-left",children:i.jsx(Ve,{})}):i.jsx(Ve,{})}),Ie&&i.jsx("div",{children:Array.from(Tt.entries()).flatMap(([$t,Pt],sr)=>{const ct=[];return sr>0&&ct.push(i.jsx("div",{className:"border-t border-gray-200",style:{marginTop:"8px",marginBottom:"8px"}},`divider-${$t}`)),Pt.forEach((hr,ar)=>{ct.push(i.jsxs("div",{className:"relative cursor-pointer",style:{marginTop:ar===0&&sr===0?"8px":ar===0?"0":"12px",marginLeft:"1.25rem",marginBottom:"18px"},onMouseEnter:()=>$e(`${I.id}-${ae.type}-${hr.id}`),onMouseLeave:()=>$e(null),onClick:async Zt=>{Zt.stopPropagation();try{const Gt=await Bm(hr.id);Gt?(await r(Gt),e("/admin")):(console.error("Session not found:",hr.id),await r(hr),e("/admin"))}catch(Gt){console.error("Error loading session:",Gt),await r(hr),e("/admin")}},children:[he===`${I.id}-${ae.type}-${hr.id}`&&i.jsx("div",{className:"absolute bg-blue-50 pointer-events-none rounded",style:{left:dr.has(hr.id)?"calc(-240px - 2rem - 1rem)":"-1.25rem",right:"-9rem",top:"-0.375rem",bottom:"-0.375rem",boxShadow:"0 0 0 1px rgb(191 219 254)",outline:"none",zIndex:1}}),i.jsxs("div",{className:"block text-sm text-left text-gray-700 hover:text-gray-900 relative z-10",style:{padding:0,margin:0,lineHeight:"1.25rem"},children:[i.jsxs("div",{className:"flex items-center gap-2 whitespace-nowrap",style:{height:"20px",lineHeight:"20px"},children:[De.has(`${I.id}-${hr.id}`)?i.jsxs("div",{className:"relative group",children:[i.jsx(gn,{className:"h-5 w-5 text-green-600 flex-shrink-0"}),i.jsx("div",{className:"absolute left-0 bottom-full mb-1 hidden group-hover:block w-max bg-gray-900 text-white text-xs rounded py-1 px-2 z-50",children:"Voted!"})]}):i.jsxs("div",{className:"relative group",children:[i.jsx(gn,{className:"h-5 w-5 text-gray-300 flex-shrink-0"}),i.jsx("div",{className:"absolute left-0 bottom-full mb-1 hidden group-hover:block w-max bg-gray-900 text-white text-xs rounded py-1 px-2 z-50",children:"No Votes"})]}),i.jsx("span",{children:hr.title||"Unnamed Session"})]}),i.jsx("div",{className:"text-xs text-gray-500",style:{height:"16px",lineHeight:"16px",marginTop:"2px",marginLeft:"28px"},children:XZ(hr)})]})]},hr.id))}),ct})})]})}},Fe=u.filter(I=>{var Ie,Tt;const ae=C===""||I.name.toLowerCase().includes(C.toLowerCase())||I.email.toLowerCase().includes(C.toLowerCase()),Q=P==="all"||P==="system-admin"&&I.roles.isSystemAdmin||P==="product-owner"&&I.roles.productOwnerCount>0||P==="stakeholder"&&I.roles.stakeholderSessionCount>0,Z=!M||((Ie=I.adminInSessions)==null?void 0:Ie.some(dr=>dr.product_id===M))||((Tt=I.stakeholderInSessions)==null?void 0:Tt.some(dr=>dr.product_id===M));if(K==="product-owner"){if(_.size===0)return!1;const dr=n&&I.email.toLowerCase()===n.email.toLowerCase();if(I.roles.isSystemAdmin&&!dr)return!1;const Ve=I.productOwnerProductIds||new Set,$t=I.stakeholderProductIds||new Set,Pt=Array.from(Ve).some(hr=>_.has(hr)),sr=Array.from($t).some(hr=>_.has(hr)),ct=ae&&(Pt||sr);return!ct&&(I.roles.productOwnerCount>0||I.roles.stakeholderSessionCount>0)&&console.log(`[Filter] Hiding user ${I.name}:`,{userProductOwnerProducts:Array.from(Ve),userStakeholderProducts:Array.from($t),currentUserProducts:Array.from(_),hasProductOwnerOverlap:Pt,hasStakeholderOverlap:sr}),ct}return ae&&Q&&Z}).sort((I,ae)=>{const Q=Tt=>{const dr=Tt.trim().split(" ");return dr[dr.length-1].toLowerCase()},Z=Q(I.name),Ie=Q(ae.name);return Z.localeCompare(Ie)});return x?i.jsx("div",{className:"flex items-center justify-center min-h-screen",children:i.jsx("div",{className:"text-gray-600",children:"Loading users..."})}):k?i.jsx("div",{className:"flex items-center justify-center min-h-screen",children:i.jsxs("div",{className:"text-red-600",children:[i.jsx("p",{className:"font-bold",children:"Error:"}),i.jsx("p",{children:k}),i.jsx("button",{onClick:()=>hn(),className:"mt-4 px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600",children:"Retry"})]})}):i.jsxs("div",{className:"min-h-screen bg-gray-50 flex flex-col",children:[i.jsxs("div",{className:"container mx-auto p-4 max-w-6xl flex-1",children:[i.jsx("div",{className:"hidden md:flex md:justify-center mb-2",children:i.jsx("img",{src:Di,alt:"New Millennium Building Systems Logo",className:"-mt-4 cursor-pointer hover:opacity-80 transition-opacity",style:{height:"96px",width:"auto"},onClick:()=>e("/sessions")})}),i.jsxs("div",{className:"flex justify-between items-center mb-4 md:mb-6",children:[i.jsxs("div",{className:"flex items-center flex-1 min-w-0",children:[i.jsx("img",{src:Zl,alt:"New Millennium Building Systems Logo",className:"mr-3 md:hidden flex-shrink-0 cursor-pointer hover:opacity-80 transition-opacity",style:{width:"36px",height:"36px",objectFit:"contain"},onClick:()=>e("/sessions")}),i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsx("h1",{className:"text-xl md:text-3xl font-bold text-[#2d4660] truncate",children:"User Management"}),i.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:["Welcome, ",Ya(n==null?void 0:n.name)||"Guest",n&&(()=>{var Q;const I=(((Q=ie==null?void 0:ie.roles)==null?void 0:Q.stakeholderSessionCount)||0)>0;return tee(ne,q,I,K==="system-admin"?"system-admin":"product-owner")})()]})]})]}),i.jsx("div",{className:"relative z-40 flex-shrink-0 ml-2",children:i.jsxs("div",{className:"hidden md:flex space-x-2",children:[i.jsxs("button",{onClick:()=>wt(!0),className:"flex items-center px-4 py-2 bg-[#2D4660] text-white rounded-lg hover:bg-[#173B65] transition-colors",children:[i.jsx(es,{className:"h-4 w-4 mr-2"}),"Add User"]}),i.jsxs("button",{onClick:()=>e("/admin"),className:"flex items-center px-4 py-2 bg-[#1E5461] text-white rounded-lg hover:bg-[#145668] transition-colors",children:[i.jsx(Hr,{className:"h-4 w-4 mr-2"}),"Admin Dashboard"]}),i.jsxs("button",{onClick:()=>e("/sessions"),className:"flex items-center px-4 py-2 bg-[#4f6d8e] text-white rounded-lg hover:bg-[#3d5670] transition-colors",children:[i.jsx(ma,{className:"h-4 w-4 mr-2"}),"My Sessions"]}),i.jsx("button",{onClick:()=>e("/login"),className:"flex items-center justify-center p-2 w-10 h-10 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-colors",title:"Logout",children:i.jsx(Ma,{className:"h-4 w-4"})})]})})]}),i.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 overflow-visible",children:[i.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:i.jsxs("div",{className:"flex gap-4 items-center flex-wrap",children:[i.jsx("div",{className:"flex-1 min-w-[200px]",children:i.jsxs("div",{className:"relative",children:[i.jsx(cS,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),i.jsx("input",{type:"text",placeholder:"Search users...",value:C,onChange:I=>T(I.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})}),i.jsxs("div",{className:"relative",ref:ur,children:[i.jsx("button",{type:"button",onClick:()=>or(!rr),className:"px-4 py-2 pl-12 pr-10 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent bg-white text-left min-w-[200px]",children:P==="system-admin"?"System Admin":P==="product-owner"?"Product Owner":P==="stakeholder"?"Stakeholder":"All Roles"}),i.jsxs("div",{className:"absolute left-3 top-1/2 -translate-y-1/2 pointer-events-none",children:[P==="system-admin"&&i.jsx(fn,{className:"h-5 w-5 text-[#C89212]"}),P==="product-owner"&&i.jsx(Hr,{className:"h-5 w-5 text-[#576C71]"}),P==="stakeholder"&&i.jsx(vs,{className:"h-5 w-5 text-[#8B5A4A]"}),P==="all"&&i.jsx(es,{className:"h-5 w-5 text-gray-400"})]}),i.jsx("svg",{className:"absolute right-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400 pointer-events-none",fill:"none",viewBox:"0 0 20 20",children:i.jsx("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"1.5",d:"M6 8l4 4 4-4"})}),rr&&i.jsxs("div",{className:"absolute z-50 w-full mt-1 bg-white border border-gray-300 rounded-lg shadow-lg",children:[i.jsxs("button",{type:"button",onClick:()=>{A("all"),or(!1)},className:"w-full px-4 py-2 pl-12 text-left hover:bg-gray-50 border-b border-gray-100 relative whitespace-nowrap",children:[i.jsx(es,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-5 w-5 text-gray-400"}),"All Roles"]}),K==="system-admin"&&i.jsxs("button",{type:"button",onClick:()=>{A("system-admin"),or(!1)},className:"w-full px-4 py-2 pl-12 text-left hover:bg-gray-50 border-b border-gray-100 relative whitespace-nowrap",children:[i.jsx(fn,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-5 w-5 text-[#C89212]"}),"System Admin"]}),i.jsxs("button",{type:"button",onClick:()=>{A("product-owner"),or(!1)},className:"w-full px-4 py-2 pl-12 text-left hover:bg-gray-50 border-b border-gray-100 relative whitespace-nowrap",children:[i.jsx(Hr,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-5 w-5 text-[#576C71]"}),"Product Owner"]}),i.jsxs("button",{type:"button",onClick:()=>{A("stakeholder"),or(!1)},className:"w-full px-4 py-2 pl-12 text-left hover:bg-gray-50 last:border-b-0 relative whitespace-nowrap",children:[i.jsx(vs,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-5 w-5 text-[#8B5A4A]"}),"Stakeholder"]})]})]}),i.jsxs("div",{className:"relative",ref:Jt,children:[i.jsx("button",{type:"button",onClick:()=>Yt(!jt),className:"px-4 py-2 pl-12 pr-10 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent bg-white text-left min-w-[200px]",children:M&&((Ce=Br().find(I=>I.id===M))==null?void 0:Ce.name)||"All Products"}),i.jsx("div",{className:"absolute left-3 top-1/2 -translate-y-1/2 w-6 h-6 rounded-md pointer-events-none",style:{backgroundColor:(()=>{const I=Br().find(ae=>ae.id===M);return I?cr(I.name,I.color_hex??null).background:"transparent"})()}}),i.jsx("svg",{className:"absolute right-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400 pointer-events-none",fill:"none",viewBox:"0 0 20 20",children:i.jsx("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"1.5",d:"M6 8l4 4 4-4"})}),jt&&i.jsxs("div",{className:"absolute z-50 w-full mt-1 bg-white border border-gray-300 rounded-lg shadow-lg max-h-60 overflow-y-auto overflow-x-hidden",children:[i.jsx("button",{type:"button",onClick:()=>{R(""),Yt(!1)},className:"w-full px-4 py-2 text-left hover:bg-gray-50 text-gray-500 border-b border-gray-100",children:"All Products"}),Br().map(I=>{const ae=cr(I.name,I.color_hex??null);return i.jsxs("button",{type:"button",onClick:()=>{R(I.id),Yt(!1)},className:"w-full px-4 py-2 pl-12 text-left hover:bg-gray-50 border-b border-gray-100 last:border-b-0 relative whitespace-nowrap",children:[i.jsx("div",{className:"absolute left-3 top-1/2 -translate-y-1/2 w-6 h-6 rounded-md",style:{backgroundColor:ae.background}}),I.name]},I.id)})]})]}),i.jsx("button",{onClick:()=>{T(""),A("all"),R("")},className:"p-2 rounded-md border border-gray-300 hover:bg-gray-50 transition-colors",title:"Clear all filters",children:i.jsx(nF,{className:"h-5 w-5 text-gray-600"})})]})}),i.jsx("div",{children:i.jsxs("table",{className:"min-w-full divide-y divide-gray-200 table-fixed",children:[i.jsx("thead",{className:"bg-gray-50",children:i.jsxs("tr",{children:[i.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",style:{width:"20%"},children:"User"}),i.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",style:{width:"20%"},children:"Role"}),i.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",style:{width:"35%"},children:"Sessions"}),i.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",style:{width:"15%"},children:"Created"}),i.jsx("th",{className:"px-2 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",style:{width:"10%"},children:"Actions"})]})}),i.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:Fe.length===0?i.jsx("tr",{children:i.jsx("td",{colSpan:5,className:"px-6 py-8 text-center text-gray-500",children:C||P!=="all"||M?"No users found matching your filters.":"No users found."})}):Fe.flatMap(I=>{const ae=X(I);return ae.map((Q,Z)=>{const Ie=ye(I,Q),{isExpanded:Tt,content:dr}=Ie,Ve=Q.sessions||[],$t=cs(Ve),Pt=Tt?Array.from($t.values()).flatMap(sr=>sr):[];return i.jsxs("tr",{className:`${U===I.id&&!Pe?"bg-gray-50":""} cursor-pointer`,onMouseEnter:()=>{Pe||te(I.id)},onMouseLeave:()=>te(null),onClick:sr=>{if(sr.target.closest(".actions-dropdown-container"))return;const ct=`${I.id}-${Q.type}`;le(hr=>{const ar=new Set(hr);return ar.has(ct)?ar.delete(ct):ar.add(ct),ar})},children:[Z===0&&i.jsx("td",{className:"px-4 py-4 align-top",rowSpan:ae.length,children:i.jsxs("div",{children:[i.jsxs("div",{className:"text-sm font-medium text-gray-900",children:[Ya(I.name),I.email.toLowerCase()===(n==null?void 0:n.email.toLowerCase())&&i.jsx("span",{className:"ml-2 text-xs text-[#c59f2d] font-semibold",children:"(You)"})]}),i.jsx("div",{className:"text-sm text-gray-500",children:I.email})]})}),i.jsx("td",{className:"px-4 py-4 align-top",children:Q.type==="system-admin"?Q.badge:i.jsxs("div",{children:[i.jsx("div",{className:"mb-2",children:Q.badge}),Tt&&Ve.length>0?i.jsxs("div",{children:[i.jsx("div",{style:{height:"8px"}}),i.jsx("div",{children:Array.from($t.entries()).flatMap(([sr,ct],hr)=>{const ar=p.find(jn=>jn.id===sr),Zt=ar?cr(ar.name,ar.color_hex??null):{background:"#666666"},Gt=[];hr>0&&Gt.push(i.jsx("div",{className:"border-t border-gray-200",style:{marginTop:"8px",marginBottom:"8px",position:"relative",zIndex:2}},`divider-${sr}`)),Gt.push(i.jsxs("div",{className:"flex items-start gap-1.5",style:{marginTop:"0",height:"38px",lineHeight:"20px",marginBottom:"18px",position:"relative",zIndex:2},children:[i.jsx("div",{className:"w-3 h-3 rounded-sm flex-shrink-0",style:{backgroundColor:Zt.background}}),i.jsx("span",{className:"text-xs font-medium text-gray-700",children:(ar==null?void 0:ar.name)||"Unknown Product"})]},sr));for(let jn=1;jn<ct.length;jn++)Gt.push(i.jsx("div",{style:{height:"38px",marginTop:"12px",marginBottom:"18px"}},`spacer-${sr}-${jn}`));return Gt})})]}):null]})}),i.jsx("td",{className:"px-4 py-4 text-sm text-gray-500 align-top relative overflow-visible min-w-[240px]",children:dr}),i.jsx("td",{className:"px-4 py-4 text-sm text-gray-500 align-top",children:i.jsxs("div",{children:[i.jsxs("div",{className:"flex items-center gap-1.5 mb-2",children:[i.jsx(Si,{className:"h-4 w-4 text-gray-400 flex-shrink-0"}),i.jsx("span",{className:"font-medium",children:Q.createdDate?Os(Q.createdDate):"N/A"})]}),Tt&&Pt.length>0&&i.jsxs("div",{children:[i.jsx("div",{style:{height:"8px"}}),i.jsx("div",{children:Array.from($t.entries()).flatMap(([sr,ct],hr)=>{const ar=[];return hr>0&&ar.push(i.jsx("div",{className:"border-t border-gray-200",style:{marginTop:"8px",marginBottom:"8px",position:"relative",zIndex:2}},`divider-${sr}`)),ct.forEach((Zt,Gt)=>{ar.push(i.jsxs("div",{className:"flex items-start gap-1.5",style:{marginTop:Gt===0?"0":"12px",height:"38px",lineHeight:"20px",marginBottom:"18px",position:"relative",zIndex:2},children:[i.jsx(Si,{className:"h-3.5 w-3.5 text-gray-400 flex-shrink-0"}),i.jsx("span",{className:"text-xs text-gray-500",children:Zt.assignedAt?Os(Zt.assignedAt):Zt.created_at?Os(Zt.created_at):"N/A"})]},Zt.id))}),ar})})]})]})}),Z===0&&i.jsx("td",{className:"px-2 py-4 text-right text-sm font-medium align-top",rowSpan:ae.length,style:{position:"relative",zIndex:3},children:i.jsx("div",{className:"flex items-center justify-end actions-dropdown-container",children:i.jsxs("div",{className:"relative inline-block",children:[(U===I.id&&!Pe||Pe===I.id)&&i.jsx("button",{onClick:()=>ke(Pe===I.id?null:I.id),className:"p-2 rounded-md hover:bg-gray-100 transition-colors",title:"Change user role",children:i.jsx(XE,{className:"h-5 w-5 text-gray-600"})}),Pe===I.id&&i.jsx("div",{className:"absolute right-0 w-64 bg-white border border-gray-200 rounded-lg shadow-lg",style:{zIndex:1e3,top:"auto",bottom:"auto",marginTop:"0.25rem",maxHeight:"calc(100vh - 100px)",overflowY:"auto"},children:i.jsxs("div",{children:[i.jsx("div",{className:"px-4 py-2 text-xs font-semibold text-gray-500 uppercase border-b border-gray-200",children:"Manage User Roles"}),i.jsxs("button",{onClick:()=>Hn(I,"product-owner"),className:"w-full px-4 py-3 text-left flex items-center hover:bg-green-50 text-green-700 transition-colors cursor-pointer",children:[i.jsx(Cn,{className:"h-5 w-5 mr-3 flex-shrink-0"}),i.jsxs("div",{children:[i.jsx("div",{className:"font-medium text-base",children:"Add Role"}),i.jsx("div",{className:"text-xs text-gray-500",children:"Add Role Permissions"})]})]}),(I.roles.isSystemAdmin||I.roles.productOwnerCount>0||I.roles.stakeholderSessionCount>0)&&i.jsxs("button",{onClick:()=>Hn(I,"remove-stakeholder"),className:"w-full px-4 py-3 text-left flex items-center hover:bg-red-50 text-red-700 border-t border-gray-200 transition-colors cursor-pointer",children:[i.jsx(Nd,{className:"h-5 w-5 mr-3 flex-shrink-0"}),i.jsxs("div",{children:[i.jsx("div",{className:"font-medium text-base",children:"Remove Role"}),i.jsx("div",{className:"text-xs text-gray-500",children:"Remove Role Permissions"})]})]}),K==="system-admin"&&i.jsx("div",{className:"px-4 py-2 text-xs font-semibold text-gray-500 uppercase border-t border-gray-200",children:"User Functions"}),K==="system-admin"&&i.jsxs("button",{onClick:()=>{Vn(I),fr(I.name),Pr(I.email),jr(!0),ke(null)},className:"w-full px-4 py-3 text-left flex items-center hover:bg-[#1E5461]/10 text-[#1E5461] border-t border-gray-200 transition-colors cursor-pointer",children:[i.jsx(j0,{className:"h-5 w-5 mr-3 flex-shrink-0"}),i.jsxs("div",{children:[i.jsx("div",{className:"font-medium text-base",children:"Edit User Profile"}),i.jsx("div",{className:"text-xs text-gray-500",children:"Update name and email"})]})]}),K==="system-admin"&&!an.has(I.email)&&i.jsxs("button",{onClick:()=>{ke(null),ls(I.id,I.name)},className:`w-full px-4 py-3 text-left flex items-center hover:bg-[#8B5A4A]/10 text-[#8B5A4A] border-t border-gray-200 transition-colors ${js.has(I.id)?"opacity-50 cursor-not-allowed":"cursor-pointer"}`,disabled:js.has(I.id),children:[i.jsx(Qo,{className:"h-5 w-5 mr-3 flex-shrink-0"}),i.jsxs("div",{children:[i.jsx("div",{className:"font-medium text-base",children:"Delete User"}),i.jsx("div",{className:"text-xs text-gray-500",children:js.has(I.id)?`Cannot delete protected account${Ts(I)?` (${Ts(I)})`:""}`:"Permanently delete this user"})]})]})]})})]})})})]},`${I.id}-${Q.type}`)})})})]})}),i.jsx("div",{className:"bg-gray-50 px-6 py-4 border-t border-gray-200",children:i.jsxs("div",{className:"flex flex-wrap gap-4 text-sm",children:[i.jsxs("div",{className:"flex items-center",children:[i.jsx(es,{className:"h-4 w-4 mr-2 text-gray-500"}),i.jsxs("span",{className:"text-gray-600",children:["Total Users: ",i.jsx("strong",{children:Fe.length})]})]}),K==="system-admin"&&i.jsxs("div",{className:"flex items-center",children:[i.jsx(fn,{className:"h-4 w-4 mr-2 text-[#C89212]"}),i.jsxs("span",{className:"text-gray-600",children:["System Admins: ",i.jsx("strong",{children:Fe.filter(I=>I.roles.isSystemAdmin).length})]})]}),i.jsxs("div",{className:"flex items-center",children:[i.jsx(Hr,{className:"h-4 w-4 mr-2 text-[#576C71]"}),i.jsxs("span",{className:"text-gray-600",children:["Product Owners: ",i.jsx("strong",{children:Fe.filter(I=>I.roles.productOwnerCount>0).length})]})]}),i.jsxs("div",{className:"flex items-center",children:[i.jsx(vs,{className:"h-4 w-4 mr-2 text-[#8B5A4A]"}),i.jsxs("span",{className:"text-gray-600",children:["Stakeholders: ",i.jsx("strong",{children:Fe.filter(I=>I.roles.stakeholderSessionCount>0).length})]})]})]})})]})]}),Y&&Be&&i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4 overflow-y-auto",onClick:()=>ge(!1),children:i.jsx("div",{className:"bg-white rounded-lg shadow-xl max-w-2xl w-full my-8",onClick:I=>I.stopPropagation(),style:{maxHeight:"calc(100vh - 4rem)"},children:i.jsxs("div",{className:"p-6",children:[i.jsxs("div",{className:"flex items-start mb-6",children:[i.jsx("div",{className:"flex-shrink-0 w-12 h-12 rounded-full bg-[#8B5A4A]/10 flex items-center justify-center",children:oe==="product-owner"?i.jsx(Hr,{className:"h-6 w-6 text-[#576C71]"}):i.jsx(vs,{className:"h-6 w-6 text-[#8B5A4A]"})}),i.jsxs("div",{className:"ml-4 flex-1",children:[i.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-1",children:oe==="remove-stakeholder"?"Remove Role":"Add Role"}),i.jsxs("p",{className:"text-sm text-gray-600",children:[oe==="remove-stakeholder"?"Remove":"Add"," ",Ya(Be.name)," (",Be.email,") ",oe==="remove-stakeholder"?"from":"to"," sessions"]})]}),i.jsx("button",{onClick:()=>ge(!1),className:"flex-shrink-0 ml-4 p-1 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-lg transition-colors","aria-label":"Close modal",children:i.jsx(ts,{className:"h-5 w-5"})})]}),i.jsxs("div",{className:"space-y-4",children:[oe==="remove-stakeholder"&&i.jsxs("div",{className:"space-y-4",children:[i.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Select Role to Remove ",i.jsx("span",{className:"text-red-500",children:"*"})]}),Be.roles.isSystemAdmin&&i.jsx("div",{className:"border-t border-gray-200 pt-4",children:i.jsxs("div",{className:"flex items-center gap-3 cursor-pointer flex-shrink-0",onClick:()=>{Se(V==="system-admin"?null:"system-admin")},children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("span",{className:"flex-shrink-0 w-6 h-6 flex items-center justify-center",children:i.jsx(fn,{className:"h-4 w-4 text-[#D4AF37] transition-transform",style:{transform:V==="system-admin"?"scale(2)":"scale(1)",transformOrigin:"center"}})}),i.jsx("span",{className:"text-sm font-medium text-gray-700",children:"System Admin"})]}),i.jsx("span",{className:"flex items-center justify-center w-6 h-6 border rounded-md transition-colors",style:{borderColor:"#D4AF37",backgroundColor:V==="system-admin"?"#D4AF37":"#ffffff"},children:V==="system-admin"&&i.jsx("svg",{viewBox:"0 0 24 24",className:"w-4 h-4",stroke:"#ffffff",strokeWidth:"3",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",children:i.jsx("polyline",{points:"4 12 10 18 20 6"})})})]})}),Be.roles.productOwnerCount>0&&i.jsx("div",{className:"border-t border-gray-200 pt-4",children:i.jsxs("div",{className:"flex items-start gap-3",children:[i.jsxs("div",{className:"flex items-center gap-3 cursor-pointer flex-shrink-0",onClick:()=>{Se(V==="product-owner"?null:"product-owner"),nt("")},children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("span",{className:"flex-shrink-0 w-6 h-6 flex items-center justify-center",children:i.jsx(Hr,{className:"h-4 w-4 text-[#576C71] transition-transform",style:{transform:V==="product-owner"?"scale(2)":"scale(1)",transformOrigin:"center"}})}),i.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Product Owner"})]}),i.jsx("span",{className:"flex items-center justify-center w-6 h-6 border rounded-md transition-colors",style:{borderColor:"#576C71",backgroundColor:V==="product-owner"?"#576C71":"#ffffff"},children:V==="product-owner"&&i.jsx("svg",{viewBox:"0 0 24 24",className:"w-4 h-4",stroke:"#ffffff",strokeWidth:"3",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",children:i.jsx("polyline",{points:"4 12 10 18 20 6"})})})]}),V==="product-owner"&&(()=>{var ae;const I=_r();if(I.length===1){const Q=I[0],Z=cr(Q.name,Q.color_hex??null);return Qe!==Q.id&&nt(Q.id),i.jsx("div",{className:"flex-1 pt-0.5",children:i.jsxs("div",{className:"flex items-center gap-2 px-4 py-2 border border-gray-200 rounded-lg bg-gray-50",style:{marginTop:"-11px"},children:[i.jsx("div",{className:"w-6 h-6 rounded-md flex-shrink-0",style:{backgroundColor:Z.background}}),i.jsx("span",{className:"text-sm text-gray-700",children:Q.name})]})})}else return i.jsx("div",{className:"flex-1 pt-0.5",ref:L,children:i.jsxs("div",{className:"relative",style:{marginTop:"-11px"},children:[i.jsx("button",{type:"button",onClick:()=>F(!Vt),className:"w-full px-4 py-2 pl-12 pr-10 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#2D4660] focus:border-transparent bg-white text-left",children:Qe&&((ae=I.find(Q=>Q.id===Qe))==null?void 0:ae.name)||"Select a product..."}),i.jsx("div",{className:"absolute left-3 top-1/2 -translate-y-1/2 w-6 h-6 rounded-md pointer-events-none",style:{backgroundColor:(()=>{const Q=I.find(Z=>Z.id===Qe);return Q?cr(Q.name,Q.color_hex??null).background:"transparent"})()}}),i.jsx("svg",{className:"absolute right-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400 pointer-events-none",fill:"none",viewBox:"0 0 20 20",children:i.jsx("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"1.5",d:"M6 8l4 4 4-4"})}),Vt&&i.jsxs("div",{className:"absolute z-50 w-full mt-1 bg-white border border-gray-300 rounded-lg shadow-lg max-h-60 overflow-y-auto",children:[i.jsx("button",{type:"button",onClick:()=>{nt(""),F(!1)},className:"w-full px-4 py-2 text-left hover:bg-gray-50 text-gray-500 border-b border-gray-100",children:"Select a product..."}),I.map(Q=>{const Z=cr(Q.name,Q.color_hex??null);return i.jsxs("button",{type:"button",onClick:()=>{nt(Q.id),F(!1)},className:"w-full px-4 py-2 pl-12 text-left hover:bg-gray-50 border-b border-gray-100 last:border-b-0 relative",children:[i.jsx("div",{className:"absolute left-3 top-1/2 -translate-y-1/2 w-6 h-6 rounded-md",style:{backgroundColor:Z.background}}),Q.name]},Q.id)})]})]})})})()]})}),Be.roles.stakeholderSessionCount>0&&i.jsx("div",{className:"border-t border-gray-200 pt-4",children:i.jsxs("div",{className:"flex items-start gap-3",children:[i.jsxs("div",{className:"flex items-center gap-3 cursor-pointer flex-shrink-0",onClick:()=>{Se(V==="stakeholder"?null:"stakeholder"),nt("")},children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("span",{className:"flex-shrink-0 w-6 h-6 flex items-center justify-center",children:i.jsx(vs,{className:"h-4 w-4 text-[#8B5A4A] transition-transform",style:{transform:V==="stakeholder"?"scale(2)":"scale(1)",transformOrigin:"center"}})}),i.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Stakeholder"})]}),i.jsx("span",{className:"flex items-center justify-center w-6 h-6 border rounded-md transition-colors",style:{borderColor:"#8B5A4A",backgroundColor:V==="stakeholder"?"#8B5A4A":"#ffffff"},children:V==="stakeholder"&&i.jsx("svg",{viewBox:"0 0 24 24",className:"w-4 h-4",stroke:"#ffffff",strokeWidth:"3",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",children:i.jsx("polyline",{points:"4 12 10 18 20 6"})})})]}),V==="stakeholder"&&(()=>{var ae;const I=_r();if(I.length===1){const Q=I[0],Z=cr(Q.name,Q.color_hex??null);return Qe!==Q.id&&nt(Q.id),i.jsx("div",{className:"flex-1 pt-0.5",children:i.jsxs("div",{className:"flex items-center gap-2 px-4 py-2 border border-gray-200 rounded-lg bg-gray-50",style:{marginTop:"-11px"},children:[i.jsx("div",{className:"w-6 h-6 rounded-md flex-shrink-0",style:{backgroundColor:Z.background}}),i.jsx("span",{className:"text-sm text-gray-700",children:Q.name})]})})}else return i.jsx("div",{className:"flex-1 pt-0.5",ref:L,children:i.jsxs("div",{className:"relative",style:{marginTop:"-11px"},children:[i.jsx("button",{type:"button",onClick:()=>F(!Vt),className:"w-full px-4 py-2 pl-12 pr-10 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#2D4660] focus:border-transparent bg-white text-left",children:Qe&&((ae=I.find(Q=>Q.id===Qe))==null?void 0:ae.name)||"Select a product..."}),i.jsx("div",{className:"absolute left-3 top-1/2 -translate-y-1/2 w-6 h-6 rounded-md pointer-events-none",style:{backgroundColor:(()=>{const Q=I.find(Z=>Z.id===Qe);return Q?cr(Q.name,Q.color_hex??null).background:"transparent"})()}}),i.jsx("svg",{className:"absolute right-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400 pointer-events-none",fill:"none",viewBox:"0 0 20 20",children:i.jsx("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"1.5",d:"M6 8l4 4 4-4"})}),Vt&&i.jsxs("div",{className:"absolute z-50 w-full mt-1 bg-white border border-gray-300 rounded-lg shadow-lg max-h-60 overflow-y-auto",children:[i.jsx("button",{type:"button",onClick:()=>{nt(""),F(!1)},className:"w-full px-4 py-2 text-left hover:bg-gray-50 text-gray-500 border-b border-gray-100",children:"Select a product..."}),I.map(Q=>{const Z=cr(Q.name,Q.color_hex??null);return i.jsxs("button",{type:"button",onClick:()=>{nt(Q.id),F(!1)},className:"w-full px-4 py-2 pl-12 text-left hover:bg-gray-50 border-b border-gray-100 last:border-b-0 relative",children:[i.jsx("div",{className:"absolute left-3 top-1/2 -translate-y-1/2 w-6 h-6 rounded-md",style:{backgroundColor:Z.background}}),Q.name]},Q.id)})]})]})})})()]})})]}),(oe==="product-owner"||oe==="stakeholder"||oe==="system-admin")&&i.jsxs("div",{className:"space-y-4",children:[i.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Select Role to Add ",i.jsx("span",{className:"text-red-500",children:"*"})]}),ne&&!(Be!=null&&Be.roles.isSystemAdmin)&&i.jsx("div",{className:"border-t border-gray-200 pt-4",children:i.jsxs("div",{className:"flex items-center gap-3 cursor-pointer flex-shrink-0",onClick:()=>{Ae(we==="system-admin"?null:"system-admin")},children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("span",{className:"flex-shrink-0 w-6 h-6 flex items-center justify-center",children:i.jsx(fn,{className:"h-4 w-4 text-[#D4AF37] transition-transform",style:{transform:we==="system-admin"?"scale(2)":"scale(1)",transformOrigin:"center"}})}),i.jsx("span",{className:"text-sm font-medium text-gray-700",children:"System Admin"})]}),i.jsx("span",{className:"flex items-center justify-center w-6 h-6 border rounded-md transition-colors",style:{borderColor:"#D4AF37",backgroundColor:we==="system-admin"?"#D4AF37":"#ffffff"},children:we==="system-admin"&&i.jsx("svg",{viewBox:"0 0 24 24",className:"w-4 h-4",stroke:"#ffffff",strokeWidth:"3",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",children:i.jsx("polyline",{points:"4 12 10 18 20 6"})})})]})}),ne&&i.jsx("div",{className:"border-t border-gray-200 pt-4",children:i.jsxs("div",{className:"flex items-start gap-3",children:[i.jsxs("div",{className:"flex items-center gap-3 cursor-pointer flex-shrink-0",onClick:()=>{Ae(we==="product-owner"?null:"product-owner"),nt("")},children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("span",{className:"flex-shrink-0 w-6 h-6 flex items-center justify-center",children:i.jsx(Hr,{className:"h-4 w-4 text-[#576C71] transition-transform",style:{transform:we==="product-owner"?"scale(2)":"scale(1)",transformOrigin:"center"}})}),i.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Product Owner"})]}),i.jsx("span",{className:"flex items-center justify-center w-6 h-6 border rounded-md transition-colors",style:{borderColor:"#576C71",backgroundColor:we==="product-owner"?"#576C71":"#ffffff"},children:we==="product-owner"&&i.jsx("svg",{viewBox:"0 0 24 24",className:"w-4 h-4",stroke:"#ffffff",strokeWidth:"3",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",children:i.jsx("polyline",{points:"4 12 10 18 20 6"})})})]}),we==="product-owner"&&(()=>{var ae;const I=_r();if(I.length===1){const Q=I[0],Z=cr(Q.name,Q.color_hex??null);return Qe!==Q.id&&nt(Q.id),i.jsx("div",{className:"flex-1 pt-0.5",children:i.jsxs("div",{className:"flex items-center gap-2 px-4 py-2 border border-gray-200 rounded-lg bg-gray-50",style:{marginTop:"-11px"},children:[i.jsx("div",{className:"w-6 h-6 rounded-md flex-shrink-0",style:{backgroundColor:Z.background}}),i.jsx("span",{className:"text-sm text-gray-700",children:Q.name})]})})}else return i.jsx("div",{className:"flex-1 pt-0.5",ref:L,children:i.jsxs("div",{className:"relative",style:{marginTop:"-11px"},children:[i.jsx("button",{type:"button",onClick:()=>F(!Vt),className:"w-full px-4 py-2 pl-12 pr-10 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#2D4660] focus:border-transparent bg-white text-left",children:Qe&&((ae=I.find(Q=>Q.id===Qe))==null?void 0:ae.name)||"Select a product..."}),i.jsx("div",{className:"absolute left-3 top-1/2 -translate-y-1/2 w-6 h-6 rounded-md pointer-events-none",style:{backgroundColor:(()=>{const Q=I.find(Z=>Z.id===Qe);return Q?cr(Q.name,Q.color_hex??null).background:"transparent"})()}}),i.jsx("svg",{className:"absolute right-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400 pointer-events-none",fill:"none",viewBox:"0 0 20 20",children:i.jsx("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"1.5",d:"M6 8l4 4 4-4"})}),Vt&&i.jsxs("div",{className:"absolute z-50 w-full mt-1 bg-white border border-gray-300 rounded-lg shadow-lg max-h-60 overflow-y-auto",children:[i.jsx("button",{type:"button",onClick:()=>{nt(""),F(!1)},className:"w-full px-4 py-2 text-left hover:bg-gray-50 text-gray-500 border-b border-gray-100",children:"Select a product..."}),I.map(Q=>{const Z=cr(Q.name,Q.color_hex??null);return i.jsxs("button",{type:"button",onClick:()=>{nt(Q.id),F(!1)},className:"w-full px-4 py-2 pl-12 text-left hover:bg-gray-50 border-b border-gray-100 last:border-b-0 relative",children:[i.jsx("div",{className:"absolute left-3 top-1/2 -translate-y-1/2 w-6 h-6 rounded-md",style:{backgroundColor:Z.background}}),Q.name]},Q.id)})]})]})})})()]})}),i.jsx("div",{className:"border-t border-gray-200 pt-4",children:i.jsxs("div",{className:"flex items-start gap-3",children:[i.jsxs("div",{className:"flex items-center gap-3 cursor-pointer flex-shrink-0",onClick:()=>{Ae(we==="stakeholder"?null:"stakeholder"),nt("")},children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("span",{className:"flex-shrink-0 w-6 h-6 flex items-center justify-center",children:i.jsx(vs,{className:"h-4 w-4 text-[#8B5A4A] transition-transform",style:{transform:we==="stakeholder"?"scale(2)":"scale(1)",transformOrigin:"center"}})}),i.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Stakeholder"})]}),i.jsx("span",{className:"flex items-center justify-center w-6 h-6 border rounded-md transition-colors",style:{borderColor:"#8B5A4A",backgroundColor:we==="stakeholder"?"#8B5A4A":"#ffffff"},children:we==="stakeholder"&&i.jsx("svg",{viewBox:"0 0 24 24",className:"w-4 h-4",stroke:"#ffffff",strokeWidth:"3",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",children:i.jsx("polyline",{points:"4 12 10 18 20 6"})})})]}),we==="stakeholder"&&(()=>{var ae;const I=_r();if(I.length===1){const Q=I[0],Z=cr(Q.name,Q.color_hex??null);return Qe!==Q.id&&nt(Q.id),i.jsx("div",{className:"flex-1 pt-0.5",children:i.jsxs("div",{className:"flex items-center gap-2 px-4 py-2 border border-gray-200 rounded-lg bg-gray-50",style:{marginTop:"-11px"},children:[i.jsx("div",{className:"w-6 h-6 rounded-md flex-shrink-0",style:{backgroundColor:Z.background}}),i.jsx("span",{className:"text-sm text-gray-700",children:Q.name})]})})}else return i.jsx("div",{className:"flex-1 pt-0.5",ref:L,children:i.jsxs("div",{className:"relative",style:{marginTop:"-11px"},children:[i.jsx("button",{type:"button",onClick:()=>F(!Vt),className:"w-full px-4 py-2 pl-12 pr-10 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#2D4660] focus:border-transparent bg-white text-left",children:Qe&&((ae=I.find(Q=>Q.id===Qe))==null?void 0:ae.name)||"Select a product..."}),i.jsx("div",{className:"absolute left-3 top-1/2 -translate-y-1/2 w-6 h-6 rounded-md pointer-events-none",style:{backgroundColor:(()=>{const Q=I.find(Z=>Z.id===Qe);return Q?cr(Q.name,Q.color_hex??null).background:"transparent"})()}}),i.jsx("svg",{className:"absolute right-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400 pointer-events-none",fill:"none",viewBox:"0 0 20 20",children:i.jsx("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"1.5",d:"M6 8l4 4 4-4"})}),Vt&&i.jsxs("div",{className:"absolute z-50 w-full mt-1 bg-white border border-gray-300 rounded-lg shadow-lg max-h-60 overflow-y-auto",children:[i.jsx("button",{type:"button",onClick:()=>{nt(""),F(!1)},className:"w-full px-4 py-2 text-left hover:bg-gray-50 text-gray-500 border-b border-gray-100",children:"Select a product..."}),I.map(Q=>{const Z=cr(Q.name,Q.color_hex??null);return i.jsxs("button",{type:"button",onClick:()=>{nt(Q.id),F(!1)},className:"w-full px-4 py-2 pl-12 text-left hover:bg-gray-50 border-b border-gray-100 last:border-b-0 relative",children:[i.jsx("div",{className:"absolute left-3 top-1/2 -translate-y-1/2 w-6 h-6 rounded-md",style:{backgroundColor:Z.background}}),Q.name]},Q.id)})]})]})})})()]})})]})]}),i.jsxs("div",{className:"flex gap-3 justify-end mt-6 pt-4 border-t border-gray-200",children:[i.jsx("button",{onClick:()=>ge(!1),className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50 transition-colors",children:"Cancel"}),i.jsx("button",{onClick:ks,disabled:V!=="system-admin"&&we!=="system-admin"&&!Qe||oe==="remove-stakeholder"&&!V||(oe==="product-owner"||oe==="stakeholder"||oe==="system-admin")&&!we,className:`px-4 py-2 text-sm font-medium text-white rounded-md transition-colors disabled:opacity-50 disabled:cursor-not-allowed ${oe==="remove-stakeholder"?"bg-red-600 hover:bg-red-700":"bg-[#2d4660] hover:bg-[#1E5461]"}`,children:oe==="remove-stakeholder"?"Remove Role":"Add Role"})]})]})})}),Sr&&sn&&i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:i.jsxs("div",{className:"bg-white rounded-lg max-w-md w-full p-6",children:[i.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Edit User"}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Name"}),i.jsx("input",{type:"text",value:wn,onChange:I=>fr(I.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email"}),i.jsx("input",{type:"email",value:pr,onChange:I=>Pr(I.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md"})]})]}),i.jsxs("div",{className:"flex gap-3 justify-end mt-6",children:[i.jsx("button",{onClick:()=>jr(!1),className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50",children:"Cancel"}),i.jsx("button",{onClick:async()=>{if(sn)try{await Ee.from("users").update({name:wn,email:pr}).eq("id",sn.id),jr(!1),await hn()}catch(I){console.error("Error updating user:",I),vr("Failed to Update User","An error occurred while updating the user information. Please try again.","error")}},className:"px-4 py-2 text-sm font-medium text-white bg-[#2d4660] rounded-md hover:bg-[#1E5461]",children:"Save"})]})]})}),Ke&&i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4 overflow-y-auto",onClick:Kn,children:i.jsx("div",{className:"bg-white rounded-lg shadow-xl max-w-2xl w-full my-8",onClick:I=>I.stopPropagation(),children:i.jsxs("div",{className:"p-6",children:[i.jsxs("div",{className:"flex items-start mb-6",children:[i.jsx("div",{className:"flex-shrink-0 w-12 h-12 rounded-full bg-[#2D4660]/10 flex items-center justify-center",children:i.jsx(es,{className:"h-6 w-6 text-[#2D4660]"})}),i.jsxs("div",{className:"ml-4 flex-1",children:[i.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-1",children:"Add New User"}),i.jsx("p",{className:"text-sm text-gray-600",children:"Create a new user account and optionally assign roles"})]}),i.jsx("button",{onClick:Kn,disabled:vt,className:"flex-shrink-0 ml-4 p-1 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed","aria-label":"Close modal",children:i.jsx(ts,{className:"h-5 w-5"})})]}),i.jsxs("div",{className:"space-y-4",children:[nr?i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Search Company Users (Optional)"}),i.jsxs("div",{className:"relative",ref:Ur,children:[i.jsx("div",{className:"flex gap-2",children:i.jsxs("div",{className:"flex-1 relative",children:[i.jsx(cS,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),i.jsx("input",{type:"text",value:Nt.searchTerm,onChange:I=>{const ae=I.target.value;Kt(Q=>({...Q,searchTerm:ae})),tr(ae)},onFocus:()=>{Nt.results.length>0&&Kt(I=>({...I,showResults:!0}))},className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#2D4660] focus:border-transparent",placeholder:"Search by name or email (min 2 characters)...",disabled:vt}),Nt.isSearching&&i.jsx("div",{className:"absolute right-3 top-1/2 transform -translate-y-1/2",children:i.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-[#2D4660]"})})]})}),Nt.showResults&&Nt.results.length>0&&i.jsx("div",{className:"absolute z-10 w-full mt-1 bg-white border border-gray-300 rounded-lg shadow-lg max-h-60 overflow-y-auto",children:Nt.results.map(I=>i.jsxs("button",{type:"button",onClick:()=>Tn(I),className:"w-full px-4 py-3 text-left hover:bg-gray-50 border-b border-gray-100 last:border-b-0 transition-colors",children:[i.jsx("div",{className:"font-medium text-gray-900",children:I.displayName}),i.jsx("div",{className:"text-sm text-gray-500",children:I.mail||I.userPrincipalName}),I.jobTitle&&i.jsx("div",{className:"text-xs text-gray-400 mt-0.5",children:I.jobTitle})]},I.id))}),Nt.error&&i.jsxs("div",{className:"absolute z-10 w-full mt-1 bg-red-50 border border-red-200 rounded-lg shadow-lg p-4 text-sm text-red-700",children:[i.jsx("div",{className:"font-medium mb-1",children:"Search Error"}),i.jsx("div",{children:Nt.error}),i.jsx("div",{className:"mt-2 text-xs text-red-600",children:"You can still enter the email manually below."})]}),Nt.searchTerm.length>=2&&!Nt.isSearching&&Nt.results.length===0&&!Nt.error&&i.jsx("div",{className:"absolute z-10 w-full mt-1 bg-white border border-gray-300 rounded-lg shadow-lg p-4 text-sm text-gray-500 text-center",children:"No users found. You can still enter the email manually below."})]}),i.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"Search for users in your organization by name or email, or enter manually below"})]}):i.jsx("div",{children:i.jsx("button",{type:"button",className:"text-sm font-semibold text-[#2D4660] hover:underline focus:outline-none",onClick:()=>{mr(!0),Kt({searchTerm:"",results:[],isSearching:!1,showResults:!1,error:""})},disabled:vt,children:"Search Company Users again"})}),i.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[i.jsxs("div",{children:[i.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Full Name ",i.jsx("span",{className:"text-red-500",children:"*"})]}),i.jsx("input",{type:"text",value:Oe.name,onChange:I=>dt({...Oe,name:I.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#2D4660] focus:border-transparent",placeholder:"John Doe",disabled:vt})]}),i.jsxs("div",{children:[i.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Email Address ",i.jsx("span",{className:"text-red-500",children:"*"})]}),i.jsx("input",{type:"email",value:Oe.email,onChange:I=>dt({...Oe,email:I.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#2D4660] focus:border-transparent",placeholder:"john.doe@newmill.com",disabled:vt})]})]}),K==="system-admin"&&i.jsx("div",{className:"border-t border-gray-200 pt-4",children:i.jsxs("label",{className:"flex items-center gap-3 cursor-pointer",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("span",{className:"flex-shrink-0 w-6 h-6 flex items-center justify-center",children:i.jsx(fn,{className:"h-4 w-4 text-[#C89212] transition-transform",style:{transform:Oe.isSystemAdmin?"scale(2)":"scale(1)",transformOrigin:"center"}})}),i.jsx("span",{className:"text-sm font-medium text-gray-700",children:"System Administrator"})]}),i.jsx("input",{type:"checkbox",checked:Oe.isSystemAdmin,onChange:I=>dt({...Oe,isSystemAdmin:I.target.checked}),className:"sr-only",disabled:vt}),i.jsx("span",{className:"flex items-center justify-center w-6 h-6 border rounded-md transition-colors",style:{borderColor:"#C89212",backgroundColor:Oe.isSystemAdmin?"#C89212":"#ffffff"},children:Oe.isSystemAdmin&&i.jsx("svg",{viewBox:"0 0 24 24",className:"w-4 h-4",stroke:"#ffffff",strokeWidth:"3",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",children:i.jsx("polyline",{points:"4 12 10 18 20 6"})})})]})}),K==="system-admin"&&i.jsx("div",{className:"border-t border-gray-200 pt-4",children:i.jsxs("div",{className:"flex items-start gap-3",children:[i.jsxs("label",{className:"flex items-center gap-3 cursor-pointer flex-shrink-0",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("span",{className:"flex-shrink-0 w-6 h-6 flex items-center justify-center",children:i.jsx(Hr,{className:"h-4 w-4 text-[#576C71] transition-transform",style:{transform:Oe.isProductOwner?"scale(2)":"scale(1)",transformOrigin:"center"}})}),i.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Product Owner"})]}),i.jsx("input",{type:"checkbox",checked:Oe.isProductOwner,onChange:I=>dt({...Oe,isProductOwner:I.target.checked,productOwnerProductId:I.target.checked?Oe.productOwnerProductId:""}),className:"sr-only",disabled:vt}),i.jsx("span",{className:"flex items-center justify-center w-6 h-6 border rounded-md transition-colors",style:{borderColor:"#576C71",backgroundColor:Oe.isProductOwner?"#576C71":"#ffffff"},children:Oe.isProductOwner&&i.jsx("svg",{viewBox:"0 0 24 24",className:"w-4 h-4",stroke:"#ffffff",strokeWidth:"3",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",children:i.jsx("polyline",{points:"4 12 10 18 20 6"})})})]}),Oe.isProductOwner&&i.jsxs("div",{className:"flex-1 pt-0.5",ref:it,children:[i.jsxs("div",{className:"relative",style:{marginTop:"-11px"},children:[i.jsx("button",{type:"button",onClick:()=>!vt&&Dt(!Qt),disabled:vt,className:"w-full px-4 py-2 pl-12 pr-10 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#2D4660] focus:border-transparent bg-white text-left disabled:opacity-50 disabled:cursor-not-allowed",children:Oe.productOwnerProductId&&((rt=p.find(I=>I.id===Oe.productOwnerProductId))==null?void 0:rt.name)||"Select a product..."}),i.jsx("div",{className:"absolute left-3 top-1/2 -translate-y-1/2 w-6 h-6 rounded-md pointer-events-none",style:{backgroundColor:Oe.productOwnerProductId?(()=>{const I=p.find(ae=>ae.id===Oe.productOwnerProductId);return I?cr(I.name,I.color_hex??null).background:"transparent"})():"transparent"}}),i.jsx("svg",{className:"absolute right-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400 pointer-events-none",fill:"none",viewBox:"0 0 20 20",children:i.jsx("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"1.5",d:"M6 8l4 4 4-4"})}),Qt&&i.jsxs("div",{className:"absolute z-50 w-full mt-1 bg-white border border-gray-300 rounded-lg shadow-lg max-h-60 overflow-y-auto",children:[i.jsx("button",{type:"button",onClick:()=>{dt({...Oe,productOwnerProductId:""}),Dt(!1)},className:"w-full px-4 py-2 text-left hover:bg-gray-50 text-gray-500 border-b border-gray-100",children:"Select a product..."}),Br().map(I=>{const ae=cr(I.name,I.color_hex??null);return i.jsxs("button",{type:"button",onClick:()=>{dt({...Oe,productOwnerProductId:I.id}),Dt(!1)},className:"w-full px-4 py-2 pl-12 text-left hover:bg-gray-50 border-b border-gray-100 last:border-b-0 relative",children:[i.jsx("div",{className:"absolute left-3 top-1/2 -translate-y-1/2 w-6 h-6 rounded-md",style:{backgroundColor:ae.background}}),I.name]},I.id)})]})]}),i.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"Add to all current and future sessions for this product"})]})]})}),i.jsx("div",{className:"border-t border-gray-200 pt-4",children:i.jsxs("div",{className:"flex items-start gap-3",children:[i.jsxs("label",{className:"flex items-center gap-3 cursor-pointer flex-shrink-0",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("span",{className:"flex-shrink-0 w-6 h-6 flex items-center justify-center",children:i.jsx(vs,{className:"h-4 w-4 text-[#8B5A4A] transition-transform",style:{transform:Oe.isStakeholder?"scale(2)":"scale(1)",transformOrigin:"center"}})}),i.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Stakeholder"})]}),i.jsx("input",{type:"checkbox",checked:Oe.isStakeholder,onChange:I=>dt({...Oe,isStakeholder:I.target.checked,stakeholderProductId:I.target.checked?Oe.stakeholderProductId:""}),className:"sr-only",disabled:vt}),i.jsx("span",{className:"flex items-center justify-center w-6 h-6 border rounded-md transition-colors",style:{borderColor:"#8B5A4A",backgroundColor:Oe.isStakeholder?"#8B5A4A":"#ffffff"},children:Oe.isStakeholder&&i.jsx("svg",{viewBox:"0 0 24 24",className:"w-4 h-4",stroke:"#ffffff",strokeWidth:"3",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",children:i.jsx("polyline",{points:"4 12 10 18 20 6"})})})]}),Oe.isStakeholder&&i.jsxs("div",{className:"flex-1 pt-0.5",ref:bt,children:[i.jsxs("div",{className:"relative",style:{marginTop:"-11px"},children:[i.jsx("button",{type:"button",onClick:()=>!vt&&Ye(!ze),disabled:vt,className:"w-full px-4 py-2 pl-12 pr-10 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#2D4660] focus:border-transparent bg-white text-left disabled:opacity-50 disabled:cursor-not-allowed",children:Oe.stakeholderProductId&&((Le=p.find(I=>I.id===Oe.stakeholderProductId))==null?void 0:Le.name)||"Select a product..."}),i.jsx("div",{className:"absolute left-3 top-1/2 -translate-y-1/2 w-6 h-6 rounded-md pointer-events-none",style:{backgroundColor:Oe.stakeholderProductId?(()=>{const I=p.find(ae=>ae.id===Oe.stakeholderProductId);return I?cr(I.name,I.color_hex??null).background:"transparent"})():"transparent"}}),i.jsx("svg",{className:"absolute right-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400 pointer-events-none",fill:"none",viewBox:"0 0 20 20",children:i.jsx("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"1.5",d:"M6 8l4 4 4-4"})}),ze&&i.jsxs("div",{className:"absolute z-50 w-full mt-1 bg-white border border-gray-300 rounded-lg shadow-lg max-h-60 overflow-y-auto",children:[i.jsx("button",{type:"button",onClick:()=>{dt({...Oe,stakeholderProductId:""}),Ye(!1)},className:"w-full px-4 py-2 text-left hover:bg-gray-50 text-gray-500 border-b border-gray-100",children:"Select a product..."}),Br().map(I=>{const ae=cr(I.name,I.color_hex??null);return i.jsxs("button",{type:"button",onClick:()=>{dt({...Oe,stakeholderProductId:I.id}),Ye(!1)},className:"w-full px-4 py-2 pl-12 text-left hover:bg-gray-50 border-b border-gray-100 last:border-b-0 relative",children:[i.jsx("div",{className:"absolute left-3 top-1/2 -translate-y-1/2 w-6 h-6 rounded-md",style:{backgroundColor:ae.background}}),I.name]},I.id)})]})]}),i.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"Add to all current and future sessions for this product"})]})]})})]}),i.jsx("div",{className:"flex gap-3 justify-end mt-6 pt-4 border-gray-200",children:i.jsx("button",{onClick:Ar,disabled:vt||!Oe.name.trim()||!Oe.email.trim(),className:"px-4 py-2 text-sm font-medium text-white bg-[#2d4660] rounded-md hover:bg-[#1E5461] transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:(()=>{const I=[];if(Oe.isSystemAdmin&&I.push("System Admin"),Oe.isProductOwner&&Oe.productOwnerProductId&&I.push("Product Owner"),Oe.isStakeholder&&Oe.stakeholderProductId&&I.push("Stakeholder"),I.length===0)return vt?"Creating User...":"Create User";const ae=I.join(" & ");return vt?`Adding ${ae}...`:`Add ${ae}`})()})})]})})}),bn&&i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-[60] p-4",children:i.jsx("div",{className:"bg-white rounded-lg shadow-xl max-w-md w-full",children:i.jsxs("div",{className:"p-6",children:[i.jsxs("div",{className:"flex items-start mb-4",children:[i.jsxs("div",{className:`flex-shrink-0 w-12 h-12 rounded-full flex items-center justify-center ${Rr.type==="success"?"bg-green-100":Rr.type==="error"?"bg-red-100":"bg-blue-100"}`,children:[Rr.type==="success"&&i.jsx(uS,{className:"h-6 w-6 text-green-600"}),Rr.type==="error"&&i.jsx(ts,{className:"h-6 w-6 text-red-600"}),Rr.type==="info"&&i.jsx(Hr,{className:"h-6 w-6 text-blue-600"})]}),i.jsxs("div",{className:"ml-4 flex-1",children:[i.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-1",children:Rr.title}),i.jsx("p",{className:"text-sm text-gray-600",children:Rr.message})]})]}),i.jsx("div",{className:"flex justify-end mt-6",children:i.jsx("button",{onClick:()=>as(!1),className:`px-4 py-2 text-sm font-medium text-white rounded-md transition-colors ${Rr.type==="success"?"bg-green-600 hover:bg-green-700":Rr.type==="error"?"bg-red-600 hover:bg-red-700":"bg-blue-600 hover:bg-blue-700"}`,children:"OK"})})]})})}),!x&&!k&&i.jsx(jb,{currentRole:K==="system-admin"?"system-admin":"product-owner",onSelectSystemAdmin:ne?()=>{B("system-admin"),sessionStorage.setItem("usersViewMode","system-admin")}:void 0,onSelectProductOwner:ne||q?()=>{B("product-owner"),sessionStorage.setItem("usersViewMode","product-owner")}:void 0,showRoleToggle:ne||q,isSessionAdmin:q&&!ne,helpText:"Contact your Product Owner or IT administrator for assistance with user management."},"users-page-footer")]})}const nee="/feature-voting-app/assets/bottom-left-curve-T4fflHT3.png",see=()=>i.jsx("div",{className:"fixed bottom-0 left-0 pointer-events-none z-0",children:i.jsx("img",{src:nee,alt:"",style:{maxWidth:"600px",height:"auto",opacity:.2}})});function aee(){return i.jsx(CM,{children:i.jsxs(T5,{children:[i.jsx(see,{}),i.jsx(C3,{basename:"/feature-voting-app",children:i.jsxs(n3,{children:[i.jsx(vi,{path:"/",element:i.jsx(t3,{to:"/login",replace:!0})}),i.jsx(vi,{path:"/login",element:i.jsx(qZ,{})}),i.jsx(vi,{path:"/sessions",element:i.jsx(KZ,{})}),i.jsx(vi,{path:"/vote",element:i.jsx(e0,{adminMode:!1})}),i.jsx(vi,{path:"/admin",element:i.jsx(e0,{adminMode:!0})}),i.jsx(vi,{path:"/results",element:i.jsx(e0,{resultsMode:!0})}),i.jsx(vi,{path:"/unauthorized",element:i.jsx(GZ,{})}),i.jsx(vi,{path:"/system-admins",element:i.jsx(YZ,{})}),i.jsx(vi,{path:"/users",element:i.jsx(ree,{})})]})})]})})}if(typeof window<"u"){const e=console.error;console.error=(...t)=>{var n;const r=((n=t[0])==null?void 0:n.toString())||"";r.includes("runtime.lastError")||r.includes("message channel closed")||e.apply(console,t)}}fD.createRoot(document.getElementById("root")).render(i.jsx(aee,{}));
