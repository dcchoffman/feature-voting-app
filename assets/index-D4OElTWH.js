var qI=Object.defineProperty;var HI=(e,t,r)=>t in e?qI(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;var ug=(e,t,r)=>HI(e,typeof t!="symbol"?t+"":t,r);function KI(e,t){for(var r=0;r<t.length;r++){const n=t[r];if(typeof n!="string"&&!Array.isArray(n)){for(const s in n)if(s!=="default"&&!(s in e)){const i=Object.getOwnPropertyDescriptor(n,s);i&&Object.defineProperty(e,s,i.get?i:{enumerable:!0,get:()=>n[s]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const l of i.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&n(l)}).observe(document,{childList:!0,subtree:!0});function r(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(s){if(s.ep)return;s.ep=!0;const i=r(s);fetch(s.href,i)}})();function wi(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function GI(e){if(Object.prototype.hasOwnProperty.call(e,"__esModule"))return e;var t=e.default;if(typeof t=="function"){var r=function n(){return this instanceof n?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};r.prototype=t.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(e).forEach(function(n){var s=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(r,n,s.get?s:{enumerable:!0,get:function(){return e[n]}})}),r}var dg={exports:{}},Qc={},fg={exports:{}},Nt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Q1;function YI(){if(Q1)return Nt;Q1=1;var e=Symbol.for("react.element"),t=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),i=Symbol.for("react.provider"),l=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),m=Symbol.for("react.memo"),f=Symbol.for("react.lazy"),p=Symbol.iterator;function y(I){return I===null||typeof I!="object"?null:(I=p&&I[p]||I["@@iterator"],typeof I=="function"?I:null)}var x={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},b=Object.assign,j={};function S(I,V,Ae){this.props=I,this.context=V,this.refs=j,this.updater=Ae||x}S.prototype.isReactComponent={},S.prototype.setState=function(I,V){if(typeof I!="object"&&typeof I!="function"&&I!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,I,V,"setState")},S.prototype.forceUpdate=function(I){this.updater.enqueueForceUpdate(this,I,"forceUpdate")};function k(){}k.prototype=S.prototype;function C(I,V,Ae){this.props=I,this.context=V,this.refs=j,this.updater=Ae||x}var N=C.prototype=new k;N.constructor=C,b(N,S.prototype),N.isPureReactComponent=!0;var O=Array.isArray,P=Object.prototype.hasOwnProperty,T={current:null},D={key:!0,ref:!0,__self:!0,__source:!0};function q(I,V,Ae){var X,re={},de=null,xe=null;if(V!=null)for(X in V.ref!==void 0&&(xe=V.ref),V.key!==void 0&&(de=""+V.key),V)P.call(V,X)&&!D.hasOwnProperty(X)&&(re[X]=V[X]);var ye=arguments.length-2;if(ye===1)re.children=Ae;else if(1<ye){for(var U=Array(ye),$e=0;$e<ye;$e++)U[$e]=arguments[$e+2];re.children=U}if(I&&I.defaultProps)for(X in ye=I.defaultProps,ye)re[X]===void 0&&(re[X]=ye[X]);return{$$typeof:e,type:I,key:de,ref:xe,props:re,_owner:T.current}}function F(I,V){return{$$typeof:e,type:I.type,key:V,ref:I.ref,props:I.props,_owner:I._owner}}function K(I){return typeof I=="object"&&I!==null&&I.$$typeof===e}function B(I){var V={"=":"=0",":":"=2"};return"$"+I.replace(/[=:]/g,function(Ae){return V[Ae]})}var Q=/\/+/g;function oe(I,V){return typeof I=="object"&&I!==null&&I.key!=null?B(""+I.key):V.toString(36)}function ae(I,V,Ae,X,re){var de=typeof I;(de==="undefined"||de==="boolean")&&(I=null);var xe=!1;if(I===null)xe=!0;else switch(de){case"string":case"number":xe=!0;break;case"object":switch(I.$$typeof){case e:case t:xe=!0}}if(xe)return xe=I,re=re(xe),I=X===""?"."+oe(xe,0):X,O(re)?(Ae="",I!=null&&(Ae=I.replace(Q,"$&/")+"/"),ae(re,V,Ae,"",function($e){return $e})):re!=null&&(K(re)&&(re=F(re,Ae+(!re.key||xe&&xe.key===re.key?"":(""+re.key).replace(Q,"$&/")+"/")+I)),V.push(re)),1;if(xe=0,X=X===""?".":X+":",O(I))for(var ye=0;ye<I.length;ye++){de=I[ye];var U=X+oe(de,ye);xe+=ae(de,V,Ae,U,re)}else if(U=y(I),typeof U=="function")for(I=U.call(I),ye=0;!(de=I.next()).done;)de=de.value,U=X+oe(de,ye++),xe+=ae(de,V,Ae,U,re);else if(de==="object")throw V=String(I),Error("Objects are not valid as a React child (found: "+(V==="[object Object]"?"object with keys {"+Object.keys(I).join(", ")+"}":V)+"). If you meant to render a collection of children, use an array instead.");return xe}function J(I,V,Ae){if(I==null)return I;var X=[],re=0;return ae(I,X,"","",function(de){return V.call(Ae,de,re++)}),X}function H(I){if(I._status===-1){var V=I._result;V=V(),V.then(function(Ae){(I._status===0||I._status===-1)&&(I._status=1,I._result=Ae)},function(Ae){(I._status===0||I._status===-1)&&(I._status=2,I._result=Ae)}),I._status===-1&&(I._status=0,I._result=V)}if(I._status===1)return I._result.default;throw I._result}var ne={current:null},ie={transition:null},ge={ReactCurrentDispatcher:ne,ReactCurrentBatchConfig:ie,ReactCurrentOwner:T};function ve(){throw Error("act(...) is not supported in production builds of React.")}return Nt.Children={map:J,forEach:function(I,V,Ae){J(I,function(){V.apply(this,arguments)},Ae)},count:function(I){var V=0;return J(I,function(){V++}),V},toArray:function(I){return J(I,function(V){return V})||[]},only:function(I){if(!K(I))throw Error("React.Children.only expected to receive a single React element child.");return I}},Nt.Component=S,Nt.Fragment=r,Nt.Profiler=s,Nt.PureComponent=C,Nt.StrictMode=n,Nt.Suspense=d,Nt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ge,Nt.act=ve,Nt.cloneElement=function(I,V,Ae){if(I==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+I+".");var X=b({},I.props),re=I.key,de=I.ref,xe=I._owner;if(V!=null){if(V.ref!==void 0&&(de=V.ref,xe=T.current),V.key!==void 0&&(re=""+V.key),I.type&&I.type.defaultProps)var ye=I.type.defaultProps;for(U in V)P.call(V,U)&&!D.hasOwnProperty(U)&&(X[U]=V[U]===void 0&&ye!==void 0?ye[U]:V[U])}var U=arguments.length-2;if(U===1)X.children=Ae;else if(1<U){ye=Array(U);for(var $e=0;$e<U;$e++)ye[$e]=arguments[$e+2];X.children=ye}return{$$typeof:e,type:I.type,key:re,ref:de,props:X,_owner:xe}},Nt.createContext=function(I){return I={$$typeof:l,_currentValue:I,_currentValue2:I,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},I.Provider={$$typeof:i,_context:I},I.Consumer=I},Nt.createElement=q,Nt.createFactory=function(I){var V=q.bind(null,I);return V.type=I,V},Nt.createRef=function(){return{current:null}},Nt.forwardRef=function(I){return{$$typeof:u,render:I}},Nt.isValidElement=K,Nt.lazy=function(I){return{$$typeof:f,_payload:{_status:-1,_result:I},_init:H}},Nt.memo=function(I,V){return{$$typeof:m,type:I,compare:V===void 0?null:V}},Nt.startTransition=function(I){var V=ie.transition;ie.transition={};try{I()}finally{ie.transition=V}},Nt.unstable_act=ve,Nt.useCallback=function(I,V){return ne.current.useCallback(I,V)},Nt.useContext=function(I){return ne.current.useContext(I)},Nt.useDebugValue=function(){},Nt.useDeferredValue=function(I){return ne.current.useDeferredValue(I)},Nt.useEffect=function(I,V){return ne.current.useEffect(I,V)},Nt.useId=function(){return ne.current.useId()},Nt.useImperativeHandle=function(I,V,Ae){return ne.current.useImperativeHandle(I,V,Ae)},Nt.useInsertionEffect=function(I,V){return ne.current.useInsertionEffect(I,V)},Nt.useLayoutEffect=function(I,V){return ne.current.useLayoutEffect(I,V)},Nt.useMemo=function(I,V){return ne.current.useMemo(I,V)},Nt.useReducer=function(I,V,Ae){return ne.current.useReducer(I,V,Ae)},Nt.useRef=function(I){return ne.current.useRef(I)},Nt.useState=function(I){return ne.current.useState(I)},Nt.useSyncExternalStore=function(I,V,Ae){return ne.current.useSyncExternalStore(I,V,Ae)},Nt.useTransition=function(){return ne.current.useTransition()},Nt.version="18.3.1",Nt}var X1;function ic(){return X1||(X1=1,fg.exports=YI()),fg.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Z1;function JI(){if(Z1)return Qc;Z1=1;var e=ic(),t=Symbol.for("react.element"),r=Symbol.for("react.fragment"),n=Object.prototype.hasOwnProperty,s=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,i={key:!0,ref:!0,__self:!0,__source:!0};function l(u,d,m){var f,p={},y=null,x=null;m!==void 0&&(y=""+m),d.key!==void 0&&(y=""+d.key),d.ref!==void 0&&(x=d.ref);for(f in d)n.call(d,f)&&!i.hasOwnProperty(f)&&(p[f]=d[f]);if(u&&u.defaultProps)for(f in d=u.defaultProps,d)p[f]===void 0&&(p[f]=d[f]);return{$$typeof:t,type:u,key:y,ref:x,props:p,_owner:s.current}}return Qc.Fragment=r,Qc.jsx=l,Qc.jsxs=l,Qc}var ej;function QI(){return ej||(ej=1,dg.exports=JI()),dg.exports}var o=QI(),v=ic();const dt=wi(v),XI=KI({__proto__:null,default:dt},[v]);var of={},hg={exports:{}},os={},mg={exports:{}},pg={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var tj;function ZI(){return tj||(tj=1,(function(e){function t(ie,ge){var ve=ie.length;ie.push(ge);e:for(;0<ve;){var I=ve-1>>>1,V=ie[I];if(0<s(V,ge))ie[I]=ge,ie[ve]=V,ve=I;else break e}}function r(ie){return ie.length===0?null:ie[0]}function n(ie){if(ie.length===0)return null;var ge=ie[0],ve=ie.pop();if(ve!==ge){ie[0]=ve;e:for(var I=0,V=ie.length,Ae=V>>>1;I<Ae;){var X=2*(I+1)-1,re=ie[X],de=X+1,xe=ie[de];if(0>s(re,ve))de<V&&0>s(xe,re)?(ie[I]=xe,ie[de]=ve,I=de):(ie[I]=re,ie[X]=ve,I=X);else if(de<V&&0>s(xe,ve))ie[I]=xe,ie[de]=ve,I=de;else break e}}return ge}function s(ie,ge){var ve=ie.sortIndex-ge.sortIndex;return ve!==0?ve:ie.id-ge.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;e.unstable_now=function(){return i.now()}}else{var l=Date,u=l.now();e.unstable_now=function(){return l.now()-u}}var d=[],m=[],f=1,p=null,y=3,x=!1,b=!1,j=!1,S=typeof setTimeout=="function"?setTimeout:null,k=typeof clearTimeout=="function"?clearTimeout:null,C=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function N(ie){for(var ge=r(m);ge!==null;){if(ge.callback===null)n(m);else if(ge.startTime<=ie)n(m),ge.sortIndex=ge.expirationTime,t(d,ge);else break;ge=r(m)}}function O(ie){if(j=!1,N(ie),!b)if(r(d)!==null)b=!0,H(P);else{var ge=r(m);ge!==null&&ne(O,ge.startTime-ie)}}function P(ie,ge){b=!1,j&&(j=!1,k(q),q=-1),x=!0;var ve=y;try{for(N(ge),p=r(d);p!==null&&(!(p.expirationTime>ge)||ie&&!B());){var I=p.callback;if(typeof I=="function"){p.callback=null,y=p.priorityLevel;var V=I(p.expirationTime<=ge);ge=e.unstable_now(),typeof V=="function"?p.callback=V:p===r(d)&&n(d),N(ge)}else n(d);p=r(d)}if(p!==null)var Ae=!0;else{var X=r(m);X!==null&&ne(O,X.startTime-ge),Ae=!1}return Ae}finally{p=null,y=ve,x=!1}}var T=!1,D=null,q=-1,F=5,K=-1;function B(){return!(e.unstable_now()-K<F)}function Q(){if(D!==null){var ie=e.unstable_now();K=ie;var ge=!0;try{ge=D(!0,ie)}finally{ge?oe():(T=!1,D=null)}}else T=!1}var oe;if(typeof C=="function")oe=function(){C(Q)};else if(typeof MessageChannel<"u"){var ae=new MessageChannel,J=ae.port2;ae.port1.onmessage=Q,oe=function(){J.postMessage(null)}}else oe=function(){S(Q,0)};function H(ie){D=ie,T||(T=!0,oe())}function ne(ie,ge){q=S(function(){ie(e.unstable_now())},ge)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(ie){ie.callback=null},e.unstable_continueExecution=function(){b||x||(b=!0,H(P))},e.unstable_forceFrameRate=function(ie){0>ie||125<ie?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):F=0<ie?Math.floor(1e3/ie):5},e.unstable_getCurrentPriorityLevel=function(){return y},e.unstable_getFirstCallbackNode=function(){return r(d)},e.unstable_next=function(ie){switch(y){case 1:case 2:case 3:var ge=3;break;default:ge=y}var ve=y;y=ge;try{return ie()}finally{y=ve}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(ie,ge){switch(ie){case 1:case 2:case 3:case 4:case 5:break;default:ie=3}var ve=y;y=ie;try{return ge()}finally{y=ve}},e.unstable_scheduleCallback=function(ie,ge,ve){var I=e.unstable_now();switch(typeof ve=="object"&&ve!==null?(ve=ve.delay,ve=typeof ve=="number"&&0<ve?I+ve:I):ve=I,ie){case 1:var V=-1;break;case 2:V=250;break;case 5:V=1073741823;break;case 4:V=1e4;break;default:V=5e3}return V=ve+V,ie={id:f++,callback:ge,priorityLevel:ie,startTime:ve,expirationTime:V,sortIndex:-1},ve>I?(ie.sortIndex=ve,t(m,ie),r(d)===null&&ie===r(m)&&(j?(k(q),q=-1):j=!0,ne(O,ve-I))):(ie.sortIndex=V,t(d,ie),b||x||(b=!0,H(P))),ie},e.unstable_shouldYield=B,e.unstable_wrapCallback=function(ie){var ge=y;return function(){var ve=y;y=ge;try{return ie.apply(this,arguments)}finally{y=ve}}}})(pg)),pg}var rj;function eD(){return rj||(rj=1,mg.exports=ZI()),mg.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var nj;function tD(){if(nj)return os;nj=1;var e=ic(),t=eD();function r(a){for(var c="https://reactjs.org/docs/error-decoder.html?invariant="+a,h=1;h<arguments.length;h++)c+="&args[]="+encodeURIComponent(arguments[h]);return"Minified React error #"+a+"; visit "+c+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var n=new Set,s={};function i(a,c){l(a,c),l(a+"Capture",c)}function l(a,c){for(s[a]=c,a=0;a<c.length;a++)n.add(c[a])}var u=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),d=Object.prototype.hasOwnProperty,m=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,f={},p={};function y(a){return d.call(p,a)?!0:d.call(f,a)?!1:m.test(a)?p[a]=!0:(f[a]=!0,!1)}function x(a,c,h,g){if(h!==null&&h.type===0)return!1;switch(typeof c){case"function":case"symbol":return!0;case"boolean":return g?!1:h!==null?!h.acceptsBooleans:(a=a.toLowerCase().slice(0,5),a!=="data-"&&a!=="aria-");default:return!1}}function b(a,c,h,g){if(c===null||typeof c>"u"||x(a,c,h,g))return!0;if(g)return!1;if(h!==null)switch(h.type){case 3:return!c;case 4:return c===!1;case 5:return isNaN(c);case 6:return isNaN(c)||1>c}return!1}function j(a,c,h,g,w,_,E){this.acceptsBooleans=c===2||c===3||c===4,this.attributeName=g,this.attributeNamespace=w,this.mustUseProperty=h,this.propertyName=a,this.type=c,this.sanitizeURL=_,this.removeEmptyString=E}var S={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(a){S[a]=new j(a,0,!1,a,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(a){var c=a[0];S[c]=new j(c,1,!1,a[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(a){S[a]=new j(a,2,!1,a.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(a){S[a]=new j(a,2,!1,a,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(a){S[a]=new j(a,3,!1,a.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(a){S[a]=new j(a,3,!0,a,null,!1,!1)}),["capture","download"].forEach(function(a){S[a]=new j(a,4,!1,a,null,!1,!1)}),["cols","rows","size","span"].forEach(function(a){S[a]=new j(a,6,!1,a,null,!1,!1)}),["rowSpan","start"].forEach(function(a){S[a]=new j(a,5,!1,a.toLowerCase(),null,!1,!1)});var k=/[\-:]([a-z])/g;function C(a){return a[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(a){var c=a.replace(k,C);S[c]=new j(c,1,!1,a,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(a){var c=a.replace(k,C);S[c]=new j(c,1,!1,a,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(a){var c=a.replace(k,C);S[c]=new j(c,1,!1,a,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(a){S[a]=new j(a,1,!1,a.toLowerCase(),null,!1,!1)}),S.xlinkHref=new j("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(a){S[a]=new j(a,1,!1,a.toLowerCase(),null,!0,!0)});function N(a,c,h,g){var w=S.hasOwnProperty(c)?S[c]:null;(w!==null?w.type!==0:g||!(2<c.length)||c[0]!=="o"&&c[0]!=="O"||c[1]!=="n"&&c[1]!=="N")&&(b(c,h,w,g)&&(h=null),g||w===null?y(c)&&(h===null?a.removeAttribute(c):a.setAttribute(c,""+h)):w.mustUseProperty?a[w.propertyName]=h===null?w.type===3?!1:"":h:(c=w.attributeName,g=w.attributeNamespace,h===null?a.removeAttribute(c):(w=w.type,h=w===3||w===4&&h===!0?"":""+h,g?a.setAttributeNS(g,c,h):a.setAttribute(c,h))))}var O=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,P=Symbol.for("react.element"),T=Symbol.for("react.portal"),D=Symbol.for("react.fragment"),q=Symbol.for("react.strict_mode"),F=Symbol.for("react.profiler"),K=Symbol.for("react.provider"),B=Symbol.for("react.context"),Q=Symbol.for("react.forward_ref"),oe=Symbol.for("react.suspense"),ae=Symbol.for("react.suspense_list"),J=Symbol.for("react.memo"),H=Symbol.for("react.lazy"),ne=Symbol.for("react.offscreen"),ie=Symbol.iterator;function ge(a){return a===null||typeof a!="object"?null:(a=ie&&a[ie]||a["@@iterator"],typeof a=="function"?a:null)}var ve=Object.assign,I;function V(a){if(I===void 0)try{throw Error()}catch(h){var c=h.stack.trim().match(/\n( *(at )?)/);I=c&&c[1]||""}return`
`+I+a}var Ae=!1;function X(a,c){if(!a||Ae)return"";Ae=!0;var h=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(c)if(c=function(){throw Error()},Object.defineProperty(c.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(c,[])}catch(le){var g=le}Reflect.construct(a,[],c)}else{try{c.call()}catch(le){g=le}a.call(c.prototype)}else{try{throw Error()}catch(le){g=le}a()}}catch(le){if(le&&g&&typeof le.stack=="string"){for(var w=le.stack.split(`
`),_=g.stack.split(`
`),E=w.length-1,R=_.length-1;1<=E&&0<=R&&w[E]!==_[R];)R--;for(;1<=E&&0<=R;E--,R--)if(w[E]!==_[R]){if(E!==1||R!==1)do if(E--,R--,0>R||w[E]!==_[R]){var z=`
`+w[E].replace(" at new "," at ");return a.displayName&&z.includes("<anonymous>")&&(z=z.replace("<anonymous>",a.displayName)),z}while(1<=E&&0<=R);break}}}finally{Ae=!1,Error.prepareStackTrace=h}return(a=a?a.displayName||a.name:"")?V(a):""}function re(a){switch(a.tag){case 5:return V(a.type);case 16:return V("Lazy");case 13:return V("Suspense");case 19:return V("SuspenseList");case 0:case 2:case 15:return a=X(a.type,!1),a;case 11:return a=X(a.type.render,!1),a;case 1:return a=X(a.type,!0),a;default:return""}}function de(a){if(a==null)return null;if(typeof a=="function")return a.displayName||a.name||null;if(typeof a=="string")return a;switch(a){case D:return"Fragment";case T:return"Portal";case F:return"Profiler";case q:return"StrictMode";case oe:return"Suspense";case ae:return"SuspenseList"}if(typeof a=="object")switch(a.$$typeof){case B:return(a.displayName||"Context")+".Consumer";case K:return(a._context.displayName||"Context")+".Provider";case Q:var c=a.render;return a=a.displayName,a||(a=c.displayName||c.name||"",a=a!==""?"ForwardRef("+a+")":"ForwardRef"),a;case J:return c=a.displayName||null,c!==null?c:de(a.type)||"Memo";case H:c=a._payload,a=a._init;try{return de(a(c))}catch{}}return null}function xe(a){var c=a.type;switch(a.tag){case 24:return"Cache";case 9:return(c.displayName||"Context")+".Consumer";case 10:return(c._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return a=c.render,a=a.displayName||a.name||"",c.displayName||(a!==""?"ForwardRef("+a+")":"ForwardRef");case 7:return"Fragment";case 5:return c;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return de(c);case 8:return c===q?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof c=="function")return c.displayName||c.name||null;if(typeof c=="string")return c}return null}function ye(a){switch(typeof a){case"boolean":case"number":case"string":case"undefined":return a;case"object":return a;default:return""}}function U(a){var c=a.type;return(a=a.nodeName)&&a.toLowerCase()==="input"&&(c==="checkbox"||c==="radio")}function $e(a){var c=U(a)?"checked":"value",h=Object.getOwnPropertyDescriptor(a.constructor.prototype,c),g=""+a[c];if(!a.hasOwnProperty(c)&&typeof h<"u"&&typeof h.get=="function"&&typeof h.set=="function"){var w=h.get,_=h.set;return Object.defineProperty(a,c,{configurable:!0,get:function(){return w.call(this)},set:function(E){g=""+E,_.call(this,E)}}),Object.defineProperty(a,c,{enumerable:h.enumerable}),{getValue:function(){return g},setValue:function(E){g=""+E},stopTracking:function(){a._valueTracker=null,delete a[c]}}}}function Ze(a){a._valueTracker||(a._valueTracker=$e(a))}function Z(a){if(!a)return!1;var c=a._valueTracker;if(!c)return!0;var h=c.getValue(),g="";return a&&(g=U(a)?a.checked?"true":"false":a.value),a=g,a!==h?(c.setValue(a),!0):!1}function Pe(a){if(a=a||(typeof document<"u"?document:void 0),typeof a>"u")return null;try{return a.activeElement||a.body}catch{return a.body}}function Ve(a,c){var h=c.checked;return ve({},c,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:h??a._wrapperState.initialChecked})}function ft(a,c){var h=c.defaultValue==null?"":c.defaultValue,g=c.checked!=null?c.checked:c.defaultChecked;h=ye(c.value!=null?c.value:h),a._wrapperState={initialChecked:g,initialValue:h,controlled:c.type==="checkbox"||c.type==="radio"?c.checked!=null:c.value!=null}}function gt(a,c){c=c.checked,c!=null&&N(a,"checked",c,!1)}function Ct(a,c){gt(a,c);var h=ye(c.value),g=c.type;if(h!=null)g==="number"?(h===0&&a.value===""||a.value!=h)&&(a.value=""+h):a.value!==""+h&&(a.value=""+h);else if(g==="submit"||g==="reset"){a.removeAttribute("value");return}c.hasOwnProperty("value")?kt(a,c.type,h):c.hasOwnProperty("defaultValue")&&kt(a,c.type,ye(c.defaultValue)),c.checked==null&&c.defaultChecked!=null&&(a.defaultChecked=!!c.defaultChecked)}function _t(a,c,h){if(c.hasOwnProperty("value")||c.hasOwnProperty("defaultValue")){var g=c.type;if(!(g!=="submit"&&g!=="reset"||c.value!==void 0&&c.value!==null))return;c=""+a._wrapperState.initialValue,h||c===a.value||(a.value=c),a.defaultValue=c}h=a.name,h!==""&&(a.name=""),a.defaultChecked=!!a._wrapperState.initialChecked,h!==""&&(a.name=h)}function kt(a,c,h){(c!=="number"||Pe(a.ownerDocument)!==a)&&(h==null?a.defaultValue=""+a._wrapperState.initialValue:a.defaultValue!==""+h&&(a.defaultValue=""+h))}var $=Array.isArray;function G(a,c,h,g){if(a=a.options,c){c={};for(var w=0;w<h.length;w++)c["$"+h[w]]=!0;for(h=0;h<a.length;h++)w=c.hasOwnProperty("$"+a[h].value),a[h].selected!==w&&(a[h].selected=w),w&&g&&(a[h].defaultSelected=!0)}else{for(h=""+ye(h),c=null,w=0;w<a.length;w++){if(a[w].value===h){a[w].selected=!0,g&&(a[w].defaultSelected=!0);return}c!==null||a[w].disabled||(c=a[w])}c!==null&&(c.selected=!0)}}function ue(a,c){if(c.dangerouslySetInnerHTML!=null)throw Error(r(91));return ve({},c,{value:void 0,defaultValue:void 0,children:""+a._wrapperState.initialValue})}function _e(a,c){var h=c.value;if(h==null){if(h=c.children,c=c.defaultValue,h!=null){if(c!=null)throw Error(r(92));if($(h)){if(1<h.length)throw Error(r(93));h=h[0]}c=h}c==null&&(c=""),h=c}a._wrapperState={initialValue:ye(h)}}function be(a,c){var h=ye(c.value),g=ye(c.defaultValue);h!=null&&(h=""+h,h!==a.value&&(a.value=h),c.defaultValue==null&&a.defaultValue!==h&&(a.defaultValue=h)),g!=null&&(a.defaultValue=""+g)}function je(a){var c=a.textContent;c===a._wrapperState.initialValue&&c!==""&&c!==null&&(a.value=c)}function Fe(a){switch(a){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ke(a,c){return a==null||a==="http://www.w3.org/1999/xhtml"?Fe(c):a==="http://www.w3.org/2000/svg"&&c==="foreignObject"?"http://www.w3.org/1999/xhtml":a}var Ke,ct=(function(a){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(c,h,g,w){MSApp.execUnsafeLocalFunction(function(){return a(c,h,g,w)})}:a})(function(a,c){if(a.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in a)a.innerHTML=c;else{for(Ke=Ke||document.createElement("div"),Ke.innerHTML="<svg>"+c.valueOf().toString()+"</svg>",c=Ke.firstChild;a.firstChild;)a.removeChild(a.firstChild);for(;c.firstChild;)a.appendChild(c.firstChild)}});function ir(a,c){if(c){var h=a.firstChild;if(h&&h===a.lastChild&&h.nodeType===3){h.nodeValue=c;return}}a.textContent=c}var Mt={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Et=["Webkit","ms","Moz","O"];Object.keys(Mt).forEach(function(a){Et.forEach(function(c){c=c+a.charAt(0).toUpperCase()+a.substring(1),Mt[c]=Mt[a]})});function Qt(a,c,h){return c==null||typeof c=="boolean"||c===""?"":h||typeof c!="number"||c===0||Mt.hasOwnProperty(a)&&Mt[a]?(""+c).trim():c+"px"}function Tt(a,c){a=a.style;for(var h in c)if(c.hasOwnProperty(h)){var g=h.indexOf("--")===0,w=Qt(h,c[h],g);h==="float"&&(h="cssFloat"),g?a.setProperty(h,w):a[h]=w}}var Wt=ve({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function _r(a,c){if(c){if(Wt[a]&&(c.children!=null||c.dangerouslySetInnerHTML!=null))throw Error(r(137,a));if(c.dangerouslySetInnerHTML!=null){if(c.children!=null)throw Error(r(60));if(typeof c.dangerouslySetInnerHTML!="object"||!("__html"in c.dangerouslySetInnerHTML))throw Error(r(61))}if(c.style!=null&&typeof c.style!="object")throw Error(r(62))}}function er(a,c){if(a.indexOf("-")===-1)return typeof c.is=="string";switch(a){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ar=null;function Ur(a){return a=a.target||a.srcElement||window,a.correspondingUseElement&&(a=a.correspondingUseElement),a.nodeType===3?a.parentNode:a}var xr=null,hr=null,At=null;function un(a){if(a=$c(a)){if(typeof xr!="function")throw Error(r(280));var c=a.stateNode;c&&(c=bd(c),xr(a.stateNode,a.type,c))}}function Rn(a){hr?At?At.push(a):At=[a]:hr=a}function kr(){if(hr){var a=hr,c=At;if(At=hr=null,un(a),c)for(a=0;a<c.length;a++)un(c[a])}}function mr(a,c){return a(c)}function Ft(){}var qt=!1;function Nr(a,c,h){if(qt)return a(c,h);qt=!0;try{return mr(a,c,h)}finally{qt=!1,(hr!==null||At!==null)&&(Ft(),kr())}}function Cr(a,c){var h=a.stateNode;if(h===null)return null;var g=bd(h);if(g===null)return null;h=g[c];e:switch(c){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(g=!g.disabled)||(a=a.type,g=!(a==="button"||a==="input"||a==="select"||a==="textarea")),a=!g;break e;default:a=!1}if(a)return null;if(h&&typeof h!="function")throw Error(r(231,c,typeof h));return h}var Vn=!1;if(u)try{var Tr={};Object.defineProperty(Tr,"passive",{get:function(){Vn=!0}}),window.addEventListener("test",Tr,Tr),window.removeEventListener("test",Tr,Tr)}catch{Vn=!1}function qn(a,c,h,g,w,_,E,R,z){var le=Array.prototype.slice.call(arguments,3);try{c.apply(h,le)}catch(Ee){this.onError(Ee)}}var Sn=!1,Er=null,_n=!1,gs=null,Ht={onError:function(a){Sn=!0,Er=a}};function Hn(a,c,h,g,w,_,E,R,z){Sn=!1,Er=null,qn.apply(Ht,arguments)}function Fs(a,c,h,g,w,_,E,R,z){if(Hn.apply(this,arguments),Sn){if(Sn){var le=Er;Sn=!1,Er=null}else throw Error(r(198));_n||(_n=!0,gs=le)}}function dn(a){var c=a,h=a;if(a.alternate)for(;c.return;)c=c.return;else{a=c;do c=a,(c.flags&4098)!==0&&(h=c.return),a=c.return;while(a)}return c.tag===3?h:null}function $n(a){if(a.tag===13){var c=a.memoizedState;if(c===null&&(a=a.alternate,a!==null&&(c=a.memoizedState)),c!==null)return c.dehydrated}return null}function Xt(a){if(dn(a)!==a)throw Error(r(188))}function kn(a){var c=a.alternate;if(!c){if(c=dn(a),c===null)throw Error(r(188));return c!==a?null:a}for(var h=a,g=c;;){var w=h.return;if(w===null)break;var _=w.alternate;if(_===null){if(g=w.return,g!==null){h=g;continue}break}if(w.child===_.child){for(_=w.child;_;){if(_===h)return Xt(w),a;if(_===g)return Xt(w),c;_=_.sibling}throw Error(r(188))}if(h.return!==g.return)h=w,g=_;else{for(var E=!1,R=w.child;R;){if(R===h){E=!0,h=w,g=_;break}if(R===g){E=!0,g=w,h=_;break}R=R.sibling}if(!E){for(R=_.child;R;){if(R===h){E=!0,h=_,g=w;break}if(R===g){E=!0,g=_,h=w;break}R=R.sibling}if(!E)throw Error(r(189))}}if(h.alternate!==g)throw Error(r(190))}if(h.tag!==3)throw Error(r(188));return h.stateNode.current===h?a:c}function wr(a){return a=kn(a),a!==null?Br(a):null}function Br(a){if(a.tag===5||a.tag===6)return a;for(a=a.child;a!==null;){var c=Br(a);if(c!==null)return c;a=a.sibling}return null}var ys=t.unstable_scheduleCallback,Ls=t.unstable_cancelCallback,Si=t.unstable_shouldYield,Y=t.unstable_requestPaint,me=t.unstable_now,Ce=t.unstable_getCurrentPriorityLevel,Oe=t.unstable_ImmediatePriority,tt=t.unstable_UserBlockingPriority,We=t.unstable_NormalPriority,St=t.unstable_LowPriority,bt=t.unstable_IdlePriority,xt=null,Me=null;function Qr(a){if(Me&&typeof Me.onCommitFiberRoot=="function")try{Me.onCommitFiberRoot(xt,a,void 0,(a.current.flags&128)===128)}catch{}}var Vt=Math.clz32?Math.clz32:he,or=Math.log,A=Math.LN2;function he(a){return a>>>=0,a===0?32:31-(or(a)/A|0)|0}var M=64,te=4194304;function ce(a){switch(a&-a){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return a&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return a}}function Ie(a,c){var h=a.pendingLanes;if(h===0)return 0;var g=0,w=a.suspendedLanes,_=a.pingedLanes,E=h&268435455;if(E!==0){var R=E&~w;R!==0?g=ce(R):(_&=E,_!==0&&(g=ce(_)))}else E=h&~w,E!==0?g=ce(E):_!==0&&(g=ce(_));if(g===0)return 0;if(c!==0&&c!==g&&(c&w)===0&&(w=g&-g,_=c&-c,w>=_||w===16&&(_&4194240)!==0))return c;if((g&4)!==0&&(g|=h&16),c=a.entangledLanes,c!==0)for(a=a.entanglements,c&=g;0<c;)h=31-Vt(c),w=1<<h,g|=a[h],c&=~w;return g}function Se(a,c){switch(a){case 1:case 2:case 4:return c+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return c+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function fe(a,c){for(var h=a.suspendedLanes,g=a.pingedLanes,w=a.expirationTimes,_=a.pendingLanes;0<_;){var E=31-Vt(_),R=1<<E,z=w[E];z===-1?((R&h)===0||(R&g)!==0)&&(w[E]=Se(R,c)):z<=c&&(a.expiredLanes|=R),_&=~R}}function we(a){return a=a.pendingLanes&-1073741825,a!==0?a:a&1073741824?1073741824:0}function rt(){var a=M;return M<<=1,(M&4194240)===0&&(M=64),a}function wt(a){for(var c=[],h=0;31>h;h++)c.push(a);return c}function Je(a,c,h){a.pendingLanes|=c,c!==536870912&&(a.suspendedLanes=0,a.pingedLanes=0),a=a.eventTimes,c=31-Vt(c),a[c]=h}function Pt(a,c){var h=a.pendingLanes&~c;a.pendingLanes=c,a.suspendedLanes=0,a.pingedLanes=0,a.expiredLanes&=c,a.mutableReadLanes&=c,a.entangledLanes&=c,c=a.entanglements;var g=a.eventTimes;for(a=a.expirationTimes;0<h;){var w=31-Vt(h),_=1<<w;c[w]=0,g[w]=-1,a[w]=-1,h&=~_}}function ht(a,c){var h=a.entangledLanes|=c;for(a=a.entanglements;h;){var g=31-Vt(h),w=1<<g;w&c|a[g]&c&&(a[g]|=c),h&=~w}}var Re=0;function ut(a){return a&=-a,1<a?4<a?(a&268435455)!==0?16:536870912:4:1}var Ot,It,Ir,mt,Kt,Dt=!1,br=[],Dr=null,Rr=null,Kn=null,L=new Map,Le=new Map,Qe=[],pr="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function fn(a,c){switch(a){case"focusin":case"focusout":Dr=null;break;case"dragenter":case"dragleave":Rr=null;break;case"mouseover":case"mouseout":Kn=null;break;case"pointerover":case"pointerout":L.delete(c.pointerId);break;case"gotpointercapture":case"lostpointercapture":Le.delete(c.pointerId)}}function Sa(a,c,h,g,w,_){return a===null||a.nativeEvent!==_?(a={blockedOn:c,domEventName:h,eventSystemFlags:g,nativeEvent:_,targetContainers:[w]},c!==null&&(c=$c(c),c!==null&&It(c)),a):(a.eventSystemFlags|=g,c=a.targetContainers,w!==null&&c.indexOf(w)===-1&&c.push(w),a)}function ad(a,c,h,g,w){switch(c){case"focusin":return Dr=Sa(Dr,a,c,h,g,w),!0;case"dragenter":return Rr=Sa(Rr,a,c,h,g,w),!0;case"mouseover":return Kn=Sa(Kn,a,c,h,g,w),!0;case"pointerover":var _=w.pointerId;return L.set(_,Sa(L.get(_)||null,a,c,h,g,w)),!0;case"gotpointercapture":return _=w.pointerId,Le.set(_,Sa(Le.get(_)||null,a,c,h,g,w)),!0}return!1}function Rw(a){var c=so(a.target);if(c!==null){var h=dn(c);if(h!==null){if(c=h.tag,c===13){if(c=$n(h),c!==null){a.blockedOn=c,Kt(a.priority,function(){Ir(h)});return}}else if(c===3&&h.stateNode.current.memoizedState.isDehydrated){a.blockedOn=h.tag===3?h.stateNode.containerInfo:null;return}}}a.blockedOn=null}function od(a){if(a.blockedOn!==null)return!1;for(var c=a.targetContainers;0<c.length;){var h=Mm(a.domEventName,a.eventSystemFlags,c[0],a.nativeEvent);if(h===null){h=a.nativeEvent;var g=new h.constructor(h.type,h);ar=g,h.target.dispatchEvent(g),ar=null}else return c=$c(h),c!==null&&It(c),a.blockedOn=h,!1;c.shift()}return!0}function $w(a,c,h){od(a)&&h.delete(c)}function p4(){Dt=!1,Dr!==null&&od(Dr)&&(Dr=null),Rr!==null&&od(Rr)&&(Rr=null),Kn!==null&&od(Kn)&&(Kn=null),L.forEach($w),Le.forEach($w)}function Sc(a,c){a.blockedOn===c&&(a.blockedOn=null,Dt||(Dt=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,p4)))}function _c(a){function c(w){return Sc(w,a)}if(0<br.length){Sc(br[0],a);for(var h=1;h<br.length;h++){var g=br[h];g.blockedOn===a&&(g.blockedOn=null)}}for(Dr!==null&&Sc(Dr,a),Rr!==null&&Sc(Rr,a),Kn!==null&&Sc(Kn,a),L.forEach(c),Le.forEach(c),h=0;h<Qe.length;h++)g=Qe[h],g.blockedOn===a&&(g.blockedOn=null);for(;0<Qe.length&&(h=Qe[0],h.blockedOn===null);)Rw(h),h.blockedOn===null&&Qe.shift()}var Yo=O.ReactCurrentBatchConfig,ld=!0;function g4(a,c,h,g){var w=Re,_=Yo.transition;Yo.transition=null;try{Re=1,$m(a,c,h,g)}finally{Re=w,Yo.transition=_}}function y4(a,c,h,g){var w=Re,_=Yo.transition;Yo.transition=null;try{Re=4,$m(a,c,h,g)}finally{Re=w,Yo.transition=_}}function $m(a,c,h,g){if(ld){var w=Mm(a,c,h,g);if(w===null)ep(a,c,g,cd,h),fn(a,g);else if(ad(w,a,c,h,g))g.stopPropagation();else if(fn(a,g),c&4&&-1<pr.indexOf(a)){for(;w!==null;){var _=$c(w);if(_!==null&&Ot(_),_=Mm(a,c,h,g),_===null&&ep(a,c,g,cd,h),_===w)break;w=_}w!==null&&g.stopPropagation()}else ep(a,c,g,null,h)}}var cd=null;function Mm(a,c,h,g){if(cd=null,a=Ur(g),a=so(a),a!==null)if(c=dn(a),c===null)a=null;else if(h=c.tag,h===13){if(a=$n(c),a!==null)return a;a=null}else if(h===3){if(c.stateNode.current.memoizedState.isDehydrated)return c.tag===3?c.stateNode.containerInfo:null;a=null}else c!==a&&(a=null);return cd=a,null}function Mw(a){switch(a){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Ce()){case Oe:return 1;case tt:return 4;case We:case St:return 16;case bt:return 536870912;default:return 16}default:return 16}}var _a=null,Fm=null,ud=null;function Fw(){if(ud)return ud;var a,c=Fm,h=c.length,g,w="value"in _a?_a.value:_a.textContent,_=w.length;for(a=0;a<h&&c[a]===w[a];a++);var E=h-a;for(g=1;g<=E&&c[h-g]===w[_-g];g++);return ud=w.slice(a,1<g?1-g:void 0)}function dd(a){var c=a.keyCode;return"charCode"in a?(a=a.charCode,a===0&&c===13&&(a=13)):a=c,a===10&&(a=13),32<=a||a===13?a:0}function fd(){return!0}function Lw(){return!1}function vs(a){function c(h,g,w,_,E){this._reactName=h,this._targetInst=w,this.type=g,this.nativeEvent=_,this.target=E,this.currentTarget=null;for(var R in a)a.hasOwnProperty(R)&&(h=a[R],this[R]=h?h(_):_[R]);return this.isDefaultPrevented=(_.defaultPrevented!=null?_.defaultPrevented:_.returnValue===!1)?fd:Lw,this.isPropagationStopped=Lw,this}return ve(c.prototype,{preventDefault:function(){this.defaultPrevented=!0;var h=this.nativeEvent;h&&(h.preventDefault?h.preventDefault():typeof h.returnValue!="unknown"&&(h.returnValue=!1),this.isDefaultPrevented=fd)},stopPropagation:function(){var h=this.nativeEvent;h&&(h.stopPropagation?h.stopPropagation():typeof h.cancelBubble!="unknown"&&(h.cancelBubble=!0),this.isPropagationStopped=fd)},persist:function(){},isPersistent:fd}),c}var Jo={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(a){return a.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Lm=vs(Jo),kc=ve({},Jo,{view:0,detail:0}),v4=vs(kc),zm,Um,Nc,hd=ve({},kc,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Wm,button:0,buttons:0,relatedTarget:function(a){return a.relatedTarget===void 0?a.fromElement===a.srcElement?a.toElement:a.fromElement:a.relatedTarget},movementX:function(a){return"movementX"in a?a.movementX:(a!==Nc&&(Nc&&a.type==="mousemove"?(zm=a.screenX-Nc.screenX,Um=a.screenY-Nc.screenY):Um=zm=0,Nc=a),zm)},movementY:function(a){return"movementY"in a?a.movementY:Um}}),zw=vs(hd),x4=ve({},hd,{dataTransfer:0}),w4=vs(x4),b4=ve({},kc,{relatedTarget:0}),Bm=vs(b4),j4=ve({},Jo,{animationName:0,elapsedTime:0,pseudoElement:0}),S4=vs(j4),_4=ve({},Jo,{clipboardData:function(a){return"clipboardData"in a?a.clipboardData:window.clipboardData}}),k4=vs(_4),N4=ve({},Jo,{data:0}),Uw=vs(N4),C4={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},E4={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},A4={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function P4(a){var c=this.nativeEvent;return c.getModifierState?c.getModifierState(a):(a=A4[a])?!!c[a]:!1}function Wm(){return P4}var O4=ve({},kc,{key:function(a){if(a.key){var c=C4[a.key]||a.key;if(c!=="Unidentified")return c}return a.type==="keypress"?(a=dd(a),a===13?"Enter":String.fromCharCode(a)):a.type==="keydown"||a.type==="keyup"?E4[a.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Wm,charCode:function(a){return a.type==="keypress"?dd(a):0},keyCode:function(a){return a.type==="keydown"||a.type==="keyup"?a.keyCode:0},which:function(a){return a.type==="keypress"?dd(a):a.type==="keydown"||a.type==="keyup"?a.keyCode:0}}),T4=vs(O4),I4=ve({},hd,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Bw=vs(I4),D4=ve({},kc,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Wm}),R4=vs(D4),$4=ve({},Jo,{propertyName:0,elapsedTime:0,pseudoElement:0}),M4=vs($4),F4=ve({},hd,{deltaX:function(a){return"deltaX"in a?a.deltaX:"wheelDeltaX"in a?-a.wheelDeltaX:0},deltaY:function(a){return"deltaY"in a?a.deltaY:"wheelDeltaY"in a?-a.wheelDeltaY:"wheelDelta"in a?-a.wheelDelta:0},deltaZ:0,deltaMode:0}),L4=vs(F4),z4=[9,13,27,32],Vm=u&&"CompositionEvent"in window,Cc=null;u&&"documentMode"in document&&(Cc=document.documentMode);var U4=u&&"TextEvent"in window&&!Cc,Ww=u&&(!Vm||Cc&&8<Cc&&11>=Cc),Vw=" ",qw=!1;function Hw(a,c){switch(a){case"keyup":return z4.indexOf(c.keyCode)!==-1;case"keydown":return c.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Kw(a){return a=a.detail,typeof a=="object"&&"data"in a?a.data:null}var Qo=!1;function B4(a,c){switch(a){case"compositionend":return Kw(c);case"keypress":return c.which!==32?null:(qw=!0,Vw);case"textInput":return a=c.data,a===Vw&&qw?null:a;default:return null}}function W4(a,c){if(Qo)return a==="compositionend"||!Vm&&Hw(a,c)?(a=Fw(),ud=Fm=_a=null,Qo=!1,a):null;switch(a){case"paste":return null;case"keypress":if(!(c.ctrlKey||c.altKey||c.metaKey)||c.ctrlKey&&c.altKey){if(c.char&&1<c.char.length)return c.char;if(c.which)return String.fromCharCode(c.which)}return null;case"compositionend":return Ww&&c.locale!=="ko"?null:c.data;default:return null}}var V4={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Gw(a){var c=a&&a.nodeName&&a.nodeName.toLowerCase();return c==="input"?!!V4[a.type]:c==="textarea"}function Yw(a,c,h,g){Rn(g),c=vd(c,"onChange"),0<c.length&&(h=new Lm("onChange","change",null,h,g),a.push({event:h,listeners:c}))}var Ec=null,Ac=null;function q4(a){hb(a,0)}function md(a){var c=rl(a);if(Z(c))return a}function H4(a,c){if(a==="change")return c}var Jw=!1;if(u){var qm;if(u){var Hm="oninput"in document;if(!Hm){var Qw=document.createElement("div");Qw.setAttribute("oninput","return;"),Hm=typeof Qw.oninput=="function"}qm=Hm}else qm=!1;Jw=qm&&(!document.documentMode||9<document.documentMode)}function Xw(){Ec&&(Ec.detachEvent("onpropertychange",Zw),Ac=Ec=null)}function Zw(a){if(a.propertyName==="value"&&md(Ac)){var c=[];Yw(c,Ac,a,Ur(a)),Nr(q4,c)}}function K4(a,c,h){a==="focusin"?(Xw(),Ec=c,Ac=h,Ec.attachEvent("onpropertychange",Zw)):a==="focusout"&&Xw()}function G4(a){if(a==="selectionchange"||a==="keyup"||a==="keydown")return md(Ac)}function Y4(a,c){if(a==="click")return md(c)}function J4(a,c){if(a==="input"||a==="change")return md(c)}function Q4(a,c){return a===c&&(a!==0||1/a===1/c)||a!==a&&c!==c}var ni=typeof Object.is=="function"?Object.is:Q4;function Pc(a,c){if(ni(a,c))return!0;if(typeof a!="object"||a===null||typeof c!="object"||c===null)return!1;var h=Object.keys(a),g=Object.keys(c);if(h.length!==g.length)return!1;for(g=0;g<h.length;g++){var w=h[g];if(!d.call(c,w)||!ni(a[w],c[w]))return!1}return!0}function eb(a){for(;a&&a.firstChild;)a=a.firstChild;return a}function tb(a,c){var h=eb(a);a=0;for(var g;h;){if(h.nodeType===3){if(g=a+h.textContent.length,a<=c&&g>=c)return{node:h,offset:c-a};a=g}e:{for(;h;){if(h.nextSibling){h=h.nextSibling;break e}h=h.parentNode}h=void 0}h=eb(h)}}function rb(a,c){return a&&c?a===c?!0:a&&a.nodeType===3?!1:c&&c.nodeType===3?rb(a,c.parentNode):"contains"in a?a.contains(c):a.compareDocumentPosition?!!(a.compareDocumentPosition(c)&16):!1:!1}function nb(){for(var a=window,c=Pe();c instanceof a.HTMLIFrameElement;){try{var h=typeof c.contentWindow.location.href=="string"}catch{h=!1}if(h)a=c.contentWindow;else break;c=Pe(a.document)}return c}function Km(a){var c=a&&a.nodeName&&a.nodeName.toLowerCase();return c&&(c==="input"&&(a.type==="text"||a.type==="search"||a.type==="tel"||a.type==="url"||a.type==="password")||c==="textarea"||a.contentEditable==="true")}function X4(a){var c=nb(),h=a.focusedElem,g=a.selectionRange;if(c!==h&&h&&h.ownerDocument&&rb(h.ownerDocument.documentElement,h)){if(g!==null&&Km(h)){if(c=g.start,a=g.end,a===void 0&&(a=c),"selectionStart"in h)h.selectionStart=c,h.selectionEnd=Math.min(a,h.value.length);else if(a=(c=h.ownerDocument||document)&&c.defaultView||window,a.getSelection){a=a.getSelection();var w=h.textContent.length,_=Math.min(g.start,w);g=g.end===void 0?_:Math.min(g.end,w),!a.extend&&_>g&&(w=g,g=_,_=w),w=tb(h,_);var E=tb(h,g);w&&E&&(a.rangeCount!==1||a.anchorNode!==w.node||a.anchorOffset!==w.offset||a.focusNode!==E.node||a.focusOffset!==E.offset)&&(c=c.createRange(),c.setStart(w.node,w.offset),a.removeAllRanges(),_>g?(a.addRange(c),a.extend(E.node,E.offset)):(c.setEnd(E.node,E.offset),a.addRange(c)))}}for(c=[],a=h;a=a.parentNode;)a.nodeType===1&&c.push({element:a,left:a.scrollLeft,top:a.scrollTop});for(typeof h.focus=="function"&&h.focus(),h=0;h<c.length;h++)a=c[h],a.element.scrollLeft=a.left,a.element.scrollTop=a.top}}var Z4=u&&"documentMode"in document&&11>=document.documentMode,Xo=null,Gm=null,Oc=null,Ym=!1;function sb(a,c,h){var g=h.window===h?h.document:h.nodeType===9?h:h.ownerDocument;Ym||Xo==null||Xo!==Pe(g)||(g=Xo,"selectionStart"in g&&Km(g)?g={start:g.selectionStart,end:g.selectionEnd}:(g=(g.ownerDocument&&g.ownerDocument.defaultView||window).getSelection(),g={anchorNode:g.anchorNode,anchorOffset:g.anchorOffset,focusNode:g.focusNode,focusOffset:g.focusOffset}),Oc&&Pc(Oc,g)||(Oc=g,g=vd(Gm,"onSelect"),0<g.length&&(c=new Lm("onSelect","select",null,c,h),a.push({event:c,listeners:g}),c.target=Xo)))}function pd(a,c){var h={};return h[a.toLowerCase()]=c.toLowerCase(),h["Webkit"+a]="webkit"+c,h["Moz"+a]="moz"+c,h}var Zo={animationend:pd("Animation","AnimationEnd"),animationiteration:pd("Animation","AnimationIteration"),animationstart:pd("Animation","AnimationStart"),transitionend:pd("Transition","TransitionEnd")},Jm={},ib={};u&&(ib=document.createElement("div").style,"AnimationEvent"in window||(delete Zo.animationend.animation,delete Zo.animationiteration.animation,delete Zo.animationstart.animation),"TransitionEvent"in window||delete Zo.transitionend.transition);function gd(a){if(Jm[a])return Jm[a];if(!Zo[a])return a;var c=Zo[a],h;for(h in c)if(c.hasOwnProperty(h)&&h in ib)return Jm[a]=c[h];return a}var ab=gd("animationend"),ob=gd("animationiteration"),lb=gd("animationstart"),cb=gd("transitionend"),ub=new Map,db="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ka(a,c){ub.set(a,c),i(c,[a])}for(var Qm=0;Qm<db.length;Qm++){var Xm=db[Qm],eI=Xm.toLowerCase(),tI=Xm[0].toUpperCase()+Xm.slice(1);ka(eI,"on"+tI)}ka(ab,"onAnimationEnd"),ka(ob,"onAnimationIteration"),ka(lb,"onAnimationStart"),ka("dblclick","onDoubleClick"),ka("focusin","onFocus"),ka("focusout","onBlur"),ka(cb,"onTransitionEnd"),l("onMouseEnter",["mouseout","mouseover"]),l("onMouseLeave",["mouseout","mouseover"]),l("onPointerEnter",["pointerout","pointerover"]),l("onPointerLeave",["pointerout","pointerover"]),i("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),i("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),i("onBeforeInput",["compositionend","keypress","textInput","paste"]),i("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),i("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),i("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Tc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),rI=new Set("cancel close invalid load scroll toggle".split(" ").concat(Tc));function fb(a,c,h){var g=a.type||"unknown-event";a.currentTarget=h,Fs(g,c,void 0,a),a.currentTarget=null}function hb(a,c){c=(c&4)!==0;for(var h=0;h<a.length;h++){var g=a[h],w=g.event;g=g.listeners;e:{var _=void 0;if(c)for(var E=g.length-1;0<=E;E--){var R=g[E],z=R.instance,le=R.currentTarget;if(R=R.listener,z!==_&&w.isPropagationStopped())break e;fb(w,R,le),_=z}else for(E=0;E<g.length;E++){if(R=g[E],z=R.instance,le=R.currentTarget,R=R.listener,z!==_&&w.isPropagationStopped())break e;fb(w,R,le),_=z}}}if(_n)throw a=gs,_n=!1,gs=null,a}function lr(a,c){var h=c[ap];h===void 0&&(h=c[ap]=new Set);var g=a+"__bubble";h.has(g)||(mb(c,a,2,!1),h.add(g))}function Zm(a,c,h){var g=0;c&&(g|=4),mb(h,a,g,c)}var yd="_reactListening"+Math.random().toString(36).slice(2);function Ic(a){if(!a[yd]){a[yd]=!0,n.forEach(function(h){h!=="selectionchange"&&(rI.has(h)||Zm(h,!1,a),Zm(h,!0,a))});var c=a.nodeType===9?a:a.ownerDocument;c===null||c[yd]||(c[yd]=!0,Zm("selectionchange",!1,c))}}function mb(a,c,h,g){switch(Mw(c)){case 1:var w=g4;break;case 4:w=y4;break;default:w=$m}h=w.bind(null,c,h,a),w=void 0,!Vn||c!=="touchstart"&&c!=="touchmove"&&c!=="wheel"||(w=!0),g?w!==void 0?a.addEventListener(c,h,{capture:!0,passive:w}):a.addEventListener(c,h,!0):w!==void 0?a.addEventListener(c,h,{passive:w}):a.addEventListener(c,h,!1)}function ep(a,c,h,g,w){var _=g;if((c&1)===0&&(c&2)===0&&g!==null)e:for(;;){if(g===null)return;var E=g.tag;if(E===3||E===4){var R=g.stateNode.containerInfo;if(R===w||R.nodeType===8&&R.parentNode===w)break;if(E===4)for(E=g.return;E!==null;){var z=E.tag;if((z===3||z===4)&&(z=E.stateNode.containerInfo,z===w||z.nodeType===8&&z.parentNode===w))return;E=E.return}for(;R!==null;){if(E=so(R),E===null)return;if(z=E.tag,z===5||z===6){g=_=E;continue e}R=R.parentNode}}g=g.return}Nr(function(){var le=_,Ee=Ur(h),Te=[];e:{var Ne=ub.get(a);if(Ne!==void 0){var Be=Lm,Ge=a;switch(a){case"keypress":if(dd(h)===0)break e;case"keydown":case"keyup":Be=T4;break;case"focusin":Ge="focus",Be=Bm;break;case"focusout":Ge="blur",Be=Bm;break;case"beforeblur":case"afterblur":Be=Bm;break;case"click":if(h.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Be=zw;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Be=w4;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Be=R4;break;case ab:case ob:case lb:Be=S4;break;case cb:Be=M4;break;case"scroll":Be=v4;break;case"wheel":Be=L4;break;case"copy":case"cut":case"paste":Be=k4;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Be=Bw}var Ye=(c&4)!==0,$r=!Ye&&a==="scroll",ee=Ye?Ne!==null?Ne+"Capture":null:Ne;Ye=[];for(var W=le,se;W!==null;){se=W;var De=se.stateNode;if(se.tag===5&&De!==null&&(se=De,ee!==null&&(De=Cr(W,ee),De!=null&&Ye.push(Dc(W,De,se)))),$r)break;W=W.return}0<Ye.length&&(Ne=new Be(Ne,Ge,null,h,Ee),Te.push({event:Ne,listeners:Ye}))}}if((c&7)===0){e:{if(Ne=a==="mouseover"||a==="pointerover",Be=a==="mouseout"||a==="pointerout",Ne&&h!==ar&&(Ge=h.relatedTarget||h.fromElement)&&(so(Ge)||Ge[zi]))break e;if((Be||Ne)&&(Ne=Ee.window===Ee?Ee:(Ne=Ee.ownerDocument)?Ne.defaultView||Ne.parentWindow:window,Be?(Ge=h.relatedTarget||h.toElement,Be=le,Ge=Ge?so(Ge):null,Ge!==null&&($r=dn(Ge),Ge!==$r||Ge.tag!==5&&Ge.tag!==6)&&(Ge=null)):(Be=null,Ge=le),Be!==Ge)){if(Ye=zw,De="onMouseLeave",ee="onMouseEnter",W="mouse",(a==="pointerout"||a==="pointerover")&&(Ye=Bw,De="onPointerLeave",ee="onPointerEnter",W="pointer"),$r=Be==null?Ne:rl(Be),se=Ge==null?Ne:rl(Ge),Ne=new Ye(De,W+"leave",Be,h,Ee),Ne.target=$r,Ne.relatedTarget=se,De=null,so(Ee)===le&&(Ye=new Ye(ee,W+"enter",Ge,h,Ee),Ye.target=se,Ye.relatedTarget=$r,De=Ye),$r=De,Be&&Ge)t:{for(Ye=Be,ee=Ge,W=0,se=Ye;se;se=el(se))W++;for(se=0,De=ee;De;De=el(De))se++;for(;0<W-se;)Ye=el(Ye),W--;for(;0<se-W;)ee=el(ee),se--;for(;W--;){if(Ye===ee||ee!==null&&Ye===ee.alternate)break t;Ye=el(Ye),ee=el(ee)}Ye=null}else Ye=null;Be!==null&&pb(Te,Ne,Be,Ye,!1),Ge!==null&&$r!==null&&pb(Te,$r,Ge,Ye,!0)}}e:{if(Ne=le?rl(le):window,Be=Ne.nodeName&&Ne.nodeName.toLowerCase(),Be==="select"||Be==="input"&&Ne.type==="file")var Xe=H4;else if(Gw(Ne))if(Jw)Xe=J4;else{Xe=G4;var it=K4}else(Be=Ne.nodeName)&&Be.toLowerCase()==="input"&&(Ne.type==="checkbox"||Ne.type==="radio")&&(Xe=Y4);if(Xe&&(Xe=Xe(a,le))){Yw(Te,Xe,h,Ee);break e}it&&it(a,Ne,le),a==="focusout"&&(it=Ne._wrapperState)&&it.controlled&&Ne.type==="number"&&kt(Ne,"number",Ne.value)}switch(it=le?rl(le):window,a){case"focusin":(Gw(it)||it.contentEditable==="true")&&(Xo=it,Gm=le,Oc=null);break;case"focusout":Oc=Gm=Xo=null;break;case"mousedown":Ym=!0;break;case"contextmenu":case"mouseup":case"dragend":Ym=!1,sb(Te,h,Ee);break;case"selectionchange":if(Z4)break;case"keydown":case"keyup":sb(Te,h,Ee)}var at;if(Vm)e:{switch(a){case"compositionstart":var pt="onCompositionStart";break e;case"compositionend":pt="onCompositionEnd";break e;case"compositionupdate":pt="onCompositionUpdate";break e}pt=void 0}else Qo?Hw(a,h)&&(pt="onCompositionEnd"):a==="keydown"&&h.keyCode===229&&(pt="onCompositionStart");pt&&(Ww&&h.locale!=="ko"&&(Qo||pt!=="onCompositionStart"?pt==="onCompositionEnd"&&Qo&&(at=Fw()):(_a=Ee,Fm="value"in _a?_a.value:_a.textContent,Qo=!0)),it=vd(le,pt),0<it.length&&(pt=new Uw(pt,a,null,h,Ee),Te.push({event:pt,listeners:it}),at?pt.data=at:(at=Kw(h),at!==null&&(pt.data=at)))),(at=U4?B4(a,h):W4(a,h))&&(le=vd(le,"onBeforeInput"),0<le.length&&(Ee=new Uw("onBeforeInput","beforeinput",null,h,Ee),Te.push({event:Ee,listeners:le}),Ee.data=at))}hb(Te,c)})}function Dc(a,c,h){return{instance:a,listener:c,currentTarget:h}}function vd(a,c){for(var h=c+"Capture",g=[];a!==null;){var w=a,_=w.stateNode;w.tag===5&&_!==null&&(w=_,_=Cr(a,h),_!=null&&g.unshift(Dc(a,_,w)),_=Cr(a,c),_!=null&&g.push(Dc(a,_,w))),a=a.return}return g}function el(a){if(a===null)return null;do a=a.return;while(a&&a.tag!==5);return a||null}function pb(a,c,h,g,w){for(var _=c._reactName,E=[];h!==null&&h!==g;){var R=h,z=R.alternate,le=R.stateNode;if(z!==null&&z===g)break;R.tag===5&&le!==null&&(R=le,w?(z=Cr(h,_),z!=null&&E.unshift(Dc(h,z,R))):w||(z=Cr(h,_),z!=null&&E.push(Dc(h,z,R)))),h=h.return}E.length!==0&&a.push({event:c,listeners:E})}var nI=/\r\n?/g,sI=/\u0000|\uFFFD/g;function gb(a){return(typeof a=="string"?a:""+a).replace(nI,`
`).replace(sI,"")}function xd(a,c,h){if(c=gb(c),gb(a)!==c&&h)throw Error(r(425))}function wd(){}var tp=null,rp=null;function np(a,c){return a==="textarea"||a==="noscript"||typeof c.children=="string"||typeof c.children=="number"||typeof c.dangerouslySetInnerHTML=="object"&&c.dangerouslySetInnerHTML!==null&&c.dangerouslySetInnerHTML.__html!=null}var sp=typeof setTimeout=="function"?setTimeout:void 0,iI=typeof clearTimeout=="function"?clearTimeout:void 0,yb=typeof Promise=="function"?Promise:void 0,aI=typeof queueMicrotask=="function"?queueMicrotask:typeof yb<"u"?function(a){return yb.resolve(null).then(a).catch(oI)}:sp;function oI(a){setTimeout(function(){throw a})}function ip(a,c){var h=c,g=0;do{var w=h.nextSibling;if(a.removeChild(h),w&&w.nodeType===8)if(h=w.data,h==="/$"){if(g===0){a.removeChild(w),_c(c);return}g--}else h!=="$"&&h!=="$?"&&h!=="$!"||g++;h=w}while(h);_c(c)}function Na(a){for(;a!=null;a=a.nextSibling){var c=a.nodeType;if(c===1||c===3)break;if(c===8){if(c=a.data,c==="$"||c==="$!"||c==="$?")break;if(c==="/$")return null}}return a}function vb(a){a=a.previousSibling;for(var c=0;a;){if(a.nodeType===8){var h=a.data;if(h==="$"||h==="$!"||h==="$?"){if(c===0)return a;c--}else h==="/$"&&c++}a=a.previousSibling}return null}var tl=Math.random().toString(36).slice(2),_i="__reactFiber$"+tl,Rc="__reactProps$"+tl,zi="__reactContainer$"+tl,ap="__reactEvents$"+tl,lI="__reactListeners$"+tl,cI="__reactHandles$"+tl;function so(a){var c=a[_i];if(c)return c;for(var h=a.parentNode;h;){if(c=h[zi]||h[_i]){if(h=c.alternate,c.child!==null||h!==null&&h.child!==null)for(a=vb(a);a!==null;){if(h=a[_i])return h;a=vb(a)}return c}a=h,h=a.parentNode}return null}function $c(a){return a=a[_i]||a[zi],!a||a.tag!==5&&a.tag!==6&&a.tag!==13&&a.tag!==3?null:a}function rl(a){if(a.tag===5||a.tag===6)return a.stateNode;throw Error(r(33))}function bd(a){return a[Rc]||null}var op=[],nl=-1;function Ca(a){return{current:a}}function cr(a){0>nl||(a.current=op[nl],op[nl]=null,nl--)}function tr(a,c){nl++,op[nl]=a.current,a.current=c}var Ea={},Mn=Ca(Ea),rs=Ca(!1),io=Ea;function sl(a,c){var h=a.type.contextTypes;if(!h)return Ea;var g=a.stateNode;if(g&&g.__reactInternalMemoizedUnmaskedChildContext===c)return g.__reactInternalMemoizedMaskedChildContext;var w={},_;for(_ in h)w[_]=c[_];return g&&(a=a.stateNode,a.__reactInternalMemoizedUnmaskedChildContext=c,a.__reactInternalMemoizedMaskedChildContext=w),w}function ns(a){return a=a.childContextTypes,a!=null}function jd(){cr(rs),cr(Mn)}function xb(a,c,h){if(Mn.current!==Ea)throw Error(r(168));tr(Mn,c),tr(rs,h)}function wb(a,c,h){var g=a.stateNode;if(c=c.childContextTypes,typeof g.getChildContext!="function")return h;g=g.getChildContext();for(var w in g)if(!(w in c))throw Error(r(108,xe(a)||"Unknown",w));return ve({},h,g)}function Sd(a){return a=(a=a.stateNode)&&a.__reactInternalMemoizedMergedChildContext||Ea,io=Mn.current,tr(Mn,a),tr(rs,rs.current),!0}function bb(a,c,h){var g=a.stateNode;if(!g)throw Error(r(169));h?(a=wb(a,c,io),g.__reactInternalMemoizedMergedChildContext=a,cr(rs),cr(Mn),tr(Mn,a)):cr(rs),tr(rs,h)}var Ui=null,_d=!1,lp=!1;function jb(a){Ui===null?Ui=[a]:Ui.push(a)}function uI(a){_d=!0,jb(a)}function Aa(){if(!lp&&Ui!==null){lp=!0;var a=0,c=Re;try{var h=Ui;for(Re=1;a<h.length;a++){var g=h[a];do g=g(!0);while(g!==null)}Ui=null,_d=!1}catch(w){throw Ui!==null&&(Ui=Ui.slice(a+1)),ys(Oe,Aa),w}finally{Re=c,lp=!1}}return null}var il=[],al=0,kd=null,Nd=0,zs=[],Us=0,ao=null,Bi=1,Wi="";function oo(a,c){il[al++]=Nd,il[al++]=kd,kd=a,Nd=c}function Sb(a,c,h){zs[Us++]=Bi,zs[Us++]=Wi,zs[Us++]=ao,ao=a;var g=Bi;a=Wi;var w=32-Vt(g)-1;g&=~(1<<w),h+=1;var _=32-Vt(c)+w;if(30<_){var E=w-w%5;_=(g&(1<<E)-1).toString(32),g>>=E,w-=E,Bi=1<<32-Vt(c)+w|h<<w|g,Wi=_+a}else Bi=1<<_|h<<w|g,Wi=a}function cp(a){a.return!==null&&(oo(a,1),Sb(a,1,0))}function up(a){for(;a===kd;)kd=il[--al],il[al]=null,Nd=il[--al],il[al]=null;for(;a===ao;)ao=zs[--Us],zs[Us]=null,Wi=zs[--Us],zs[Us]=null,Bi=zs[--Us],zs[Us]=null}var xs=null,ws=null,gr=!1,si=null;function _b(a,c){var h=qs(5,null,null,0);h.elementType="DELETED",h.stateNode=c,h.return=a,c=a.deletions,c===null?(a.deletions=[h],a.flags|=16):c.push(h)}function kb(a,c){switch(a.tag){case 5:var h=a.type;return c=c.nodeType!==1||h.toLowerCase()!==c.nodeName.toLowerCase()?null:c,c!==null?(a.stateNode=c,xs=a,ws=Na(c.firstChild),!0):!1;case 6:return c=a.pendingProps===""||c.nodeType!==3?null:c,c!==null?(a.stateNode=c,xs=a,ws=null,!0):!1;case 13:return c=c.nodeType!==8?null:c,c!==null?(h=ao!==null?{id:Bi,overflow:Wi}:null,a.memoizedState={dehydrated:c,treeContext:h,retryLane:1073741824},h=qs(18,null,null,0),h.stateNode=c,h.return=a,a.child=h,xs=a,ws=null,!0):!1;default:return!1}}function dp(a){return(a.mode&1)!==0&&(a.flags&128)===0}function fp(a){if(gr){var c=ws;if(c){var h=c;if(!kb(a,c)){if(dp(a))throw Error(r(418));c=Na(h.nextSibling);var g=xs;c&&kb(a,c)?_b(g,h):(a.flags=a.flags&-4097|2,gr=!1,xs=a)}}else{if(dp(a))throw Error(r(418));a.flags=a.flags&-4097|2,gr=!1,xs=a}}}function Nb(a){for(a=a.return;a!==null&&a.tag!==5&&a.tag!==3&&a.tag!==13;)a=a.return;xs=a}function Cd(a){if(a!==xs)return!1;if(!gr)return Nb(a),gr=!0,!1;var c;if((c=a.tag!==3)&&!(c=a.tag!==5)&&(c=a.type,c=c!=="head"&&c!=="body"&&!np(a.type,a.memoizedProps)),c&&(c=ws)){if(dp(a))throw Cb(),Error(r(418));for(;c;)_b(a,c),c=Na(c.nextSibling)}if(Nb(a),a.tag===13){if(a=a.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(r(317));e:{for(a=a.nextSibling,c=0;a;){if(a.nodeType===8){var h=a.data;if(h==="/$"){if(c===0){ws=Na(a.nextSibling);break e}c--}else h!=="$"&&h!=="$!"&&h!=="$?"||c++}a=a.nextSibling}ws=null}}else ws=xs?Na(a.stateNode.nextSibling):null;return!0}function Cb(){for(var a=ws;a;)a=Na(a.nextSibling)}function ol(){ws=xs=null,gr=!1}function hp(a){si===null?si=[a]:si.push(a)}var dI=O.ReactCurrentBatchConfig;function Mc(a,c,h){if(a=h.ref,a!==null&&typeof a!="function"&&typeof a!="object"){if(h._owner){if(h=h._owner,h){if(h.tag!==1)throw Error(r(309));var g=h.stateNode}if(!g)throw Error(r(147,a));var w=g,_=""+a;return c!==null&&c.ref!==null&&typeof c.ref=="function"&&c.ref._stringRef===_?c.ref:(c=function(E){var R=w.refs;E===null?delete R[_]:R[_]=E},c._stringRef=_,c)}if(typeof a!="string")throw Error(r(284));if(!h._owner)throw Error(r(290,a))}return a}function Ed(a,c){throw a=Object.prototype.toString.call(c),Error(r(31,a==="[object Object]"?"object with keys {"+Object.keys(c).join(", ")+"}":a))}function Eb(a){var c=a._init;return c(a._payload)}function Ab(a){function c(ee,W){if(a){var se=ee.deletions;se===null?(ee.deletions=[W],ee.flags|=16):se.push(W)}}function h(ee,W){if(!a)return null;for(;W!==null;)c(ee,W),W=W.sibling;return null}function g(ee,W){for(ee=new Map;W!==null;)W.key!==null?ee.set(W.key,W):ee.set(W.index,W),W=W.sibling;return ee}function w(ee,W){return ee=Ma(ee,W),ee.index=0,ee.sibling=null,ee}function _(ee,W,se){return ee.index=se,a?(se=ee.alternate,se!==null?(se=se.index,se<W?(ee.flags|=2,W):se):(ee.flags|=2,W)):(ee.flags|=1048576,W)}function E(ee){return a&&ee.alternate===null&&(ee.flags|=2),ee}function R(ee,W,se,De){return W===null||W.tag!==6?(W=sg(se,ee.mode,De),W.return=ee,W):(W=w(W,se),W.return=ee,W)}function z(ee,W,se,De){var Xe=se.type;return Xe===D?Ee(ee,W,se.props.children,De,se.key):W!==null&&(W.elementType===Xe||typeof Xe=="object"&&Xe!==null&&Xe.$$typeof===H&&Eb(Xe)===W.type)?(De=w(W,se.props),De.ref=Mc(ee,W,se),De.return=ee,De):(De=Xd(se.type,se.key,se.props,null,ee.mode,De),De.ref=Mc(ee,W,se),De.return=ee,De)}function le(ee,W,se,De){return W===null||W.tag!==4||W.stateNode.containerInfo!==se.containerInfo||W.stateNode.implementation!==se.implementation?(W=ig(se,ee.mode,De),W.return=ee,W):(W=w(W,se.children||[]),W.return=ee,W)}function Ee(ee,W,se,De,Xe){return W===null||W.tag!==7?(W=go(se,ee.mode,De,Xe),W.return=ee,W):(W=w(W,se),W.return=ee,W)}function Te(ee,W,se){if(typeof W=="string"&&W!==""||typeof W=="number")return W=sg(""+W,ee.mode,se),W.return=ee,W;if(typeof W=="object"&&W!==null){switch(W.$$typeof){case P:return se=Xd(W.type,W.key,W.props,null,ee.mode,se),se.ref=Mc(ee,null,W),se.return=ee,se;case T:return W=ig(W,ee.mode,se),W.return=ee,W;case H:var De=W._init;return Te(ee,De(W._payload),se)}if($(W)||ge(W))return W=go(W,ee.mode,se,null),W.return=ee,W;Ed(ee,W)}return null}function Ne(ee,W,se,De){var Xe=W!==null?W.key:null;if(typeof se=="string"&&se!==""||typeof se=="number")return Xe!==null?null:R(ee,W,""+se,De);if(typeof se=="object"&&se!==null){switch(se.$$typeof){case P:return se.key===Xe?z(ee,W,se,De):null;case T:return se.key===Xe?le(ee,W,se,De):null;case H:return Xe=se._init,Ne(ee,W,Xe(se._payload),De)}if($(se)||ge(se))return Xe!==null?null:Ee(ee,W,se,De,null);Ed(ee,se)}return null}function Be(ee,W,se,De,Xe){if(typeof De=="string"&&De!==""||typeof De=="number")return ee=ee.get(se)||null,R(W,ee,""+De,Xe);if(typeof De=="object"&&De!==null){switch(De.$$typeof){case P:return ee=ee.get(De.key===null?se:De.key)||null,z(W,ee,De,Xe);case T:return ee=ee.get(De.key===null?se:De.key)||null,le(W,ee,De,Xe);case H:var it=De._init;return Be(ee,W,se,it(De._payload),Xe)}if($(De)||ge(De))return ee=ee.get(se)||null,Ee(W,ee,De,Xe,null);Ed(W,De)}return null}function Ge(ee,W,se,De){for(var Xe=null,it=null,at=W,pt=W=0,pn=null;at!==null&&pt<se.length;pt++){at.index>pt?(pn=at,at=null):pn=at.sibling;var Lt=Ne(ee,at,se[pt],De);if(Lt===null){at===null&&(at=pn);break}a&&at&&Lt.alternate===null&&c(ee,at),W=_(Lt,W,pt),it===null?Xe=Lt:it.sibling=Lt,it=Lt,at=pn}if(pt===se.length)return h(ee,at),gr&&oo(ee,pt),Xe;if(at===null){for(;pt<se.length;pt++)at=Te(ee,se[pt],De),at!==null&&(W=_(at,W,pt),it===null?Xe=at:it.sibling=at,it=at);return gr&&oo(ee,pt),Xe}for(at=g(ee,at);pt<se.length;pt++)pn=Be(at,ee,pt,se[pt],De),pn!==null&&(a&&pn.alternate!==null&&at.delete(pn.key===null?pt:pn.key),W=_(pn,W,pt),it===null?Xe=pn:it.sibling=pn,it=pn);return a&&at.forEach(function(Fa){return c(ee,Fa)}),gr&&oo(ee,pt),Xe}function Ye(ee,W,se,De){var Xe=ge(se);if(typeof Xe!="function")throw Error(r(150));if(se=Xe.call(se),se==null)throw Error(r(151));for(var it=Xe=null,at=W,pt=W=0,pn=null,Lt=se.next();at!==null&&!Lt.done;pt++,Lt=se.next()){at.index>pt?(pn=at,at=null):pn=at.sibling;var Fa=Ne(ee,at,Lt.value,De);if(Fa===null){at===null&&(at=pn);break}a&&at&&Fa.alternate===null&&c(ee,at),W=_(Fa,W,pt),it===null?Xe=Fa:it.sibling=Fa,it=Fa,at=pn}if(Lt.done)return h(ee,at),gr&&oo(ee,pt),Xe;if(at===null){for(;!Lt.done;pt++,Lt=se.next())Lt=Te(ee,Lt.value,De),Lt!==null&&(W=_(Lt,W,pt),it===null?Xe=Lt:it.sibling=Lt,it=Lt);return gr&&oo(ee,pt),Xe}for(at=g(ee,at);!Lt.done;pt++,Lt=se.next())Lt=Be(at,ee,pt,Lt.value,De),Lt!==null&&(a&&Lt.alternate!==null&&at.delete(Lt.key===null?pt:Lt.key),W=_(Lt,W,pt),it===null?Xe=Lt:it.sibling=Lt,it=Lt);return a&&at.forEach(function(VI){return c(ee,VI)}),gr&&oo(ee,pt),Xe}function $r(ee,W,se,De){if(typeof se=="object"&&se!==null&&se.type===D&&se.key===null&&(se=se.props.children),typeof se=="object"&&se!==null){switch(se.$$typeof){case P:e:{for(var Xe=se.key,it=W;it!==null;){if(it.key===Xe){if(Xe=se.type,Xe===D){if(it.tag===7){h(ee,it.sibling),W=w(it,se.props.children),W.return=ee,ee=W;break e}}else if(it.elementType===Xe||typeof Xe=="object"&&Xe!==null&&Xe.$$typeof===H&&Eb(Xe)===it.type){h(ee,it.sibling),W=w(it,se.props),W.ref=Mc(ee,it,se),W.return=ee,ee=W;break e}h(ee,it);break}else c(ee,it);it=it.sibling}se.type===D?(W=go(se.props.children,ee.mode,De,se.key),W.return=ee,ee=W):(De=Xd(se.type,se.key,se.props,null,ee.mode,De),De.ref=Mc(ee,W,se),De.return=ee,ee=De)}return E(ee);case T:e:{for(it=se.key;W!==null;){if(W.key===it)if(W.tag===4&&W.stateNode.containerInfo===se.containerInfo&&W.stateNode.implementation===se.implementation){h(ee,W.sibling),W=w(W,se.children||[]),W.return=ee,ee=W;break e}else{h(ee,W);break}else c(ee,W);W=W.sibling}W=ig(se,ee.mode,De),W.return=ee,ee=W}return E(ee);case H:return it=se._init,$r(ee,W,it(se._payload),De)}if($(se))return Ge(ee,W,se,De);if(ge(se))return Ye(ee,W,se,De);Ed(ee,se)}return typeof se=="string"&&se!==""||typeof se=="number"?(se=""+se,W!==null&&W.tag===6?(h(ee,W.sibling),W=w(W,se),W.return=ee,ee=W):(h(ee,W),W=sg(se,ee.mode,De),W.return=ee,ee=W),E(ee)):h(ee,W)}return $r}var ll=Ab(!0),Pb=Ab(!1),Ad=Ca(null),Pd=null,cl=null,mp=null;function pp(){mp=cl=Pd=null}function gp(a){var c=Ad.current;cr(Ad),a._currentValue=c}function yp(a,c,h){for(;a!==null;){var g=a.alternate;if((a.childLanes&c)!==c?(a.childLanes|=c,g!==null&&(g.childLanes|=c)):g!==null&&(g.childLanes&c)!==c&&(g.childLanes|=c),a===h)break;a=a.return}}function ul(a,c){Pd=a,mp=cl=null,a=a.dependencies,a!==null&&a.firstContext!==null&&((a.lanes&c)!==0&&(ss=!0),a.firstContext=null)}function Bs(a){var c=a._currentValue;if(mp!==a)if(a={context:a,memoizedValue:c,next:null},cl===null){if(Pd===null)throw Error(r(308));cl=a,Pd.dependencies={lanes:0,firstContext:a}}else cl=cl.next=a;return c}var lo=null;function vp(a){lo===null?lo=[a]:lo.push(a)}function Ob(a,c,h,g){var w=c.interleaved;return w===null?(h.next=h,vp(c)):(h.next=w.next,w.next=h),c.interleaved=h,Vi(a,g)}function Vi(a,c){a.lanes|=c;var h=a.alternate;for(h!==null&&(h.lanes|=c),h=a,a=a.return;a!==null;)a.childLanes|=c,h=a.alternate,h!==null&&(h.childLanes|=c),h=a,a=a.return;return h.tag===3?h.stateNode:null}var Pa=!1;function xp(a){a.updateQueue={baseState:a.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Tb(a,c){a=a.updateQueue,c.updateQueue===a&&(c.updateQueue={baseState:a.baseState,firstBaseUpdate:a.firstBaseUpdate,lastBaseUpdate:a.lastBaseUpdate,shared:a.shared,effects:a.effects})}function qi(a,c){return{eventTime:a,lane:c,tag:0,payload:null,callback:null,next:null}}function Oa(a,c,h){var g=a.updateQueue;if(g===null)return null;if(g=g.shared,(Rt&2)!==0){var w=g.pending;return w===null?c.next=c:(c.next=w.next,w.next=c),g.pending=c,Vi(a,h)}return w=g.interleaved,w===null?(c.next=c,vp(g)):(c.next=w.next,w.next=c),g.interleaved=c,Vi(a,h)}function Od(a,c,h){if(c=c.updateQueue,c!==null&&(c=c.shared,(h&4194240)!==0)){var g=c.lanes;g&=a.pendingLanes,h|=g,c.lanes=h,ht(a,h)}}function Ib(a,c){var h=a.updateQueue,g=a.alternate;if(g!==null&&(g=g.updateQueue,h===g)){var w=null,_=null;if(h=h.firstBaseUpdate,h!==null){do{var E={eventTime:h.eventTime,lane:h.lane,tag:h.tag,payload:h.payload,callback:h.callback,next:null};_===null?w=_=E:_=_.next=E,h=h.next}while(h!==null);_===null?w=_=c:_=_.next=c}else w=_=c;h={baseState:g.baseState,firstBaseUpdate:w,lastBaseUpdate:_,shared:g.shared,effects:g.effects},a.updateQueue=h;return}a=h.lastBaseUpdate,a===null?h.firstBaseUpdate=c:a.next=c,h.lastBaseUpdate=c}function Td(a,c,h,g){var w=a.updateQueue;Pa=!1;var _=w.firstBaseUpdate,E=w.lastBaseUpdate,R=w.shared.pending;if(R!==null){w.shared.pending=null;var z=R,le=z.next;z.next=null,E===null?_=le:E.next=le,E=z;var Ee=a.alternate;Ee!==null&&(Ee=Ee.updateQueue,R=Ee.lastBaseUpdate,R!==E&&(R===null?Ee.firstBaseUpdate=le:R.next=le,Ee.lastBaseUpdate=z))}if(_!==null){var Te=w.baseState;E=0,Ee=le=z=null,R=_;do{var Ne=R.lane,Be=R.eventTime;if((g&Ne)===Ne){Ee!==null&&(Ee=Ee.next={eventTime:Be,lane:0,tag:R.tag,payload:R.payload,callback:R.callback,next:null});e:{var Ge=a,Ye=R;switch(Ne=c,Be=h,Ye.tag){case 1:if(Ge=Ye.payload,typeof Ge=="function"){Te=Ge.call(Be,Te,Ne);break e}Te=Ge;break e;case 3:Ge.flags=Ge.flags&-65537|128;case 0:if(Ge=Ye.payload,Ne=typeof Ge=="function"?Ge.call(Be,Te,Ne):Ge,Ne==null)break e;Te=ve({},Te,Ne);break e;case 2:Pa=!0}}R.callback!==null&&R.lane!==0&&(a.flags|=64,Ne=w.effects,Ne===null?w.effects=[R]:Ne.push(R))}else Be={eventTime:Be,lane:Ne,tag:R.tag,payload:R.payload,callback:R.callback,next:null},Ee===null?(le=Ee=Be,z=Te):Ee=Ee.next=Be,E|=Ne;if(R=R.next,R===null){if(R=w.shared.pending,R===null)break;Ne=R,R=Ne.next,Ne.next=null,w.lastBaseUpdate=Ne,w.shared.pending=null}}while(!0);if(Ee===null&&(z=Te),w.baseState=z,w.firstBaseUpdate=le,w.lastBaseUpdate=Ee,c=w.shared.interleaved,c!==null){w=c;do E|=w.lane,w=w.next;while(w!==c)}else _===null&&(w.shared.lanes=0);fo|=E,a.lanes=E,a.memoizedState=Te}}function Db(a,c,h){if(a=c.effects,c.effects=null,a!==null)for(c=0;c<a.length;c++){var g=a[c],w=g.callback;if(w!==null){if(g.callback=null,g=h,typeof w!="function")throw Error(r(191,w));w.call(g)}}}var Fc={},ki=Ca(Fc),Lc=Ca(Fc),zc=Ca(Fc);function co(a){if(a===Fc)throw Error(r(174));return a}function wp(a,c){switch(tr(zc,c),tr(Lc,a),tr(ki,Fc),a=c.nodeType,a){case 9:case 11:c=(c=c.documentElement)?c.namespaceURI:ke(null,"");break;default:a=a===8?c.parentNode:c,c=a.namespaceURI||null,a=a.tagName,c=ke(c,a)}cr(ki),tr(ki,c)}function dl(){cr(ki),cr(Lc),cr(zc)}function Rb(a){co(zc.current);var c=co(ki.current),h=ke(c,a.type);c!==h&&(tr(Lc,a),tr(ki,h))}function bp(a){Lc.current===a&&(cr(ki),cr(Lc))}var jr=Ca(0);function Id(a){for(var c=a;c!==null;){if(c.tag===13){var h=c.memoizedState;if(h!==null&&(h=h.dehydrated,h===null||h.data==="$?"||h.data==="$!"))return c}else if(c.tag===19&&c.memoizedProps.revealOrder!==void 0){if((c.flags&128)!==0)return c}else if(c.child!==null){c.child.return=c,c=c.child;continue}if(c===a)break;for(;c.sibling===null;){if(c.return===null||c.return===a)return null;c=c.return}c.sibling.return=c.return,c=c.sibling}return null}var jp=[];function Sp(){for(var a=0;a<jp.length;a++)jp[a]._workInProgressVersionPrimary=null;jp.length=0}var Dd=O.ReactCurrentDispatcher,_p=O.ReactCurrentBatchConfig,uo=0,Sr=null,Xr=null,hn=null,Rd=!1,Uc=!1,Bc=0,fI=0;function Fn(){throw Error(r(321))}function kp(a,c){if(c===null)return!1;for(var h=0;h<c.length&&h<a.length;h++)if(!ni(a[h],c[h]))return!1;return!0}function Np(a,c,h,g,w,_){if(uo=_,Sr=c,c.memoizedState=null,c.updateQueue=null,c.lanes=0,Dd.current=a===null||a.memoizedState===null?gI:yI,a=h(g,w),Uc){_=0;do{if(Uc=!1,Bc=0,25<=_)throw Error(r(301));_+=1,hn=Xr=null,c.updateQueue=null,Dd.current=vI,a=h(g,w)}while(Uc)}if(Dd.current=Fd,c=Xr!==null&&Xr.next!==null,uo=0,hn=Xr=Sr=null,Rd=!1,c)throw Error(r(300));return a}function Cp(){var a=Bc!==0;return Bc=0,a}function Ni(){var a={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return hn===null?Sr.memoizedState=hn=a:hn=hn.next=a,hn}function Ws(){if(Xr===null){var a=Sr.alternate;a=a!==null?a.memoizedState:null}else a=Xr.next;var c=hn===null?Sr.memoizedState:hn.next;if(c!==null)hn=c,Xr=a;else{if(a===null)throw Error(r(310));Xr=a,a={memoizedState:Xr.memoizedState,baseState:Xr.baseState,baseQueue:Xr.baseQueue,queue:Xr.queue,next:null},hn===null?Sr.memoizedState=hn=a:hn=hn.next=a}return hn}function Wc(a,c){return typeof c=="function"?c(a):c}function Ep(a){var c=Ws(),h=c.queue;if(h===null)throw Error(r(311));h.lastRenderedReducer=a;var g=Xr,w=g.baseQueue,_=h.pending;if(_!==null){if(w!==null){var E=w.next;w.next=_.next,_.next=E}g.baseQueue=w=_,h.pending=null}if(w!==null){_=w.next,g=g.baseState;var R=E=null,z=null,le=_;do{var Ee=le.lane;if((uo&Ee)===Ee)z!==null&&(z=z.next={lane:0,action:le.action,hasEagerState:le.hasEagerState,eagerState:le.eagerState,next:null}),g=le.hasEagerState?le.eagerState:a(g,le.action);else{var Te={lane:Ee,action:le.action,hasEagerState:le.hasEagerState,eagerState:le.eagerState,next:null};z===null?(R=z=Te,E=g):z=z.next=Te,Sr.lanes|=Ee,fo|=Ee}le=le.next}while(le!==null&&le!==_);z===null?E=g:z.next=R,ni(g,c.memoizedState)||(ss=!0),c.memoizedState=g,c.baseState=E,c.baseQueue=z,h.lastRenderedState=g}if(a=h.interleaved,a!==null){w=a;do _=w.lane,Sr.lanes|=_,fo|=_,w=w.next;while(w!==a)}else w===null&&(h.lanes=0);return[c.memoizedState,h.dispatch]}function Ap(a){var c=Ws(),h=c.queue;if(h===null)throw Error(r(311));h.lastRenderedReducer=a;var g=h.dispatch,w=h.pending,_=c.memoizedState;if(w!==null){h.pending=null;var E=w=w.next;do _=a(_,E.action),E=E.next;while(E!==w);ni(_,c.memoizedState)||(ss=!0),c.memoizedState=_,c.baseQueue===null&&(c.baseState=_),h.lastRenderedState=_}return[_,g]}function $b(){}function Mb(a,c){var h=Sr,g=Ws(),w=c(),_=!ni(g.memoizedState,w);if(_&&(g.memoizedState=w,ss=!0),g=g.queue,Pp(zb.bind(null,h,g,a),[a]),g.getSnapshot!==c||_||hn!==null&&hn.memoizedState.tag&1){if(h.flags|=2048,Vc(9,Lb.bind(null,h,g,w,c),void 0,null),mn===null)throw Error(r(349));(uo&30)!==0||Fb(h,c,w)}return w}function Fb(a,c,h){a.flags|=16384,a={getSnapshot:c,value:h},c=Sr.updateQueue,c===null?(c={lastEffect:null,stores:null},Sr.updateQueue=c,c.stores=[a]):(h=c.stores,h===null?c.stores=[a]:h.push(a))}function Lb(a,c,h,g){c.value=h,c.getSnapshot=g,Ub(c)&&Bb(a)}function zb(a,c,h){return h(function(){Ub(c)&&Bb(a)})}function Ub(a){var c=a.getSnapshot;a=a.value;try{var h=c();return!ni(a,h)}catch{return!0}}function Bb(a){var c=Vi(a,1);c!==null&&li(c,a,1,-1)}function Wb(a){var c=Ni();return typeof a=="function"&&(a=a()),c.memoizedState=c.baseState=a,a={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Wc,lastRenderedState:a},c.queue=a,a=a.dispatch=pI.bind(null,Sr,a),[c.memoizedState,a]}function Vc(a,c,h,g){return a={tag:a,create:c,destroy:h,deps:g,next:null},c=Sr.updateQueue,c===null?(c={lastEffect:null,stores:null},Sr.updateQueue=c,c.lastEffect=a.next=a):(h=c.lastEffect,h===null?c.lastEffect=a.next=a:(g=h.next,h.next=a,a.next=g,c.lastEffect=a)),a}function Vb(){return Ws().memoizedState}function $d(a,c,h,g){var w=Ni();Sr.flags|=a,w.memoizedState=Vc(1|c,h,void 0,g===void 0?null:g)}function Md(a,c,h,g){var w=Ws();g=g===void 0?null:g;var _=void 0;if(Xr!==null){var E=Xr.memoizedState;if(_=E.destroy,g!==null&&kp(g,E.deps)){w.memoizedState=Vc(c,h,_,g);return}}Sr.flags|=a,w.memoizedState=Vc(1|c,h,_,g)}function qb(a,c){return $d(8390656,8,a,c)}function Pp(a,c){return Md(2048,8,a,c)}function Hb(a,c){return Md(4,2,a,c)}function Kb(a,c){return Md(4,4,a,c)}function Gb(a,c){if(typeof c=="function")return a=a(),c(a),function(){c(null)};if(c!=null)return a=a(),c.current=a,function(){c.current=null}}function Yb(a,c,h){return h=h!=null?h.concat([a]):null,Md(4,4,Gb.bind(null,c,a),h)}function Op(){}function Jb(a,c){var h=Ws();c=c===void 0?null:c;var g=h.memoizedState;return g!==null&&c!==null&&kp(c,g[1])?g[0]:(h.memoizedState=[a,c],a)}function Qb(a,c){var h=Ws();c=c===void 0?null:c;var g=h.memoizedState;return g!==null&&c!==null&&kp(c,g[1])?g[0]:(a=a(),h.memoizedState=[a,c],a)}function Xb(a,c,h){return(uo&21)===0?(a.baseState&&(a.baseState=!1,ss=!0),a.memoizedState=h):(ni(h,c)||(h=rt(),Sr.lanes|=h,fo|=h,a.baseState=!0),c)}function hI(a,c){var h=Re;Re=h!==0&&4>h?h:4,a(!0);var g=_p.transition;_p.transition={};try{a(!1),c()}finally{Re=h,_p.transition=g}}function Zb(){return Ws().memoizedState}function mI(a,c,h){var g=Ra(a);if(h={lane:g,action:h,hasEagerState:!1,eagerState:null,next:null},e1(a))t1(c,h);else if(h=Ob(a,c,h,g),h!==null){var w=Yn();li(h,a,g,w),r1(h,c,g)}}function pI(a,c,h){var g=Ra(a),w={lane:g,action:h,hasEagerState:!1,eagerState:null,next:null};if(e1(a))t1(c,w);else{var _=a.alternate;if(a.lanes===0&&(_===null||_.lanes===0)&&(_=c.lastRenderedReducer,_!==null))try{var E=c.lastRenderedState,R=_(E,h);if(w.hasEagerState=!0,w.eagerState=R,ni(R,E)){var z=c.interleaved;z===null?(w.next=w,vp(c)):(w.next=z.next,z.next=w),c.interleaved=w;return}}catch{}finally{}h=Ob(a,c,w,g),h!==null&&(w=Yn(),li(h,a,g,w),r1(h,c,g))}}function e1(a){var c=a.alternate;return a===Sr||c!==null&&c===Sr}function t1(a,c){Uc=Rd=!0;var h=a.pending;h===null?c.next=c:(c.next=h.next,h.next=c),a.pending=c}function r1(a,c,h){if((h&4194240)!==0){var g=c.lanes;g&=a.pendingLanes,h|=g,c.lanes=h,ht(a,h)}}var Fd={readContext:Bs,useCallback:Fn,useContext:Fn,useEffect:Fn,useImperativeHandle:Fn,useInsertionEffect:Fn,useLayoutEffect:Fn,useMemo:Fn,useReducer:Fn,useRef:Fn,useState:Fn,useDebugValue:Fn,useDeferredValue:Fn,useTransition:Fn,useMutableSource:Fn,useSyncExternalStore:Fn,useId:Fn,unstable_isNewReconciler:!1},gI={readContext:Bs,useCallback:function(a,c){return Ni().memoizedState=[a,c===void 0?null:c],a},useContext:Bs,useEffect:qb,useImperativeHandle:function(a,c,h){return h=h!=null?h.concat([a]):null,$d(4194308,4,Gb.bind(null,c,a),h)},useLayoutEffect:function(a,c){return $d(4194308,4,a,c)},useInsertionEffect:function(a,c){return $d(4,2,a,c)},useMemo:function(a,c){var h=Ni();return c=c===void 0?null:c,a=a(),h.memoizedState=[a,c],a},useReducer:function(a,c,h){var g=Ni();return c=h!==void 0?h(c):c,g.memoizedState=g.baseState=c,a={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:a,lastRenderedState:c},g.queue=a,a=a.dispatch=mI.bind(null,Sr,a),[g.memoizedState,a]},useRef:function(a){var c=Ni();return a={current:a},c.memoizedState=a},useState:Wb,useDebugValue:Op,useDeferredValue:function(a){return Ni().memoizedState=a},useTransition:function(){var a=Wb(!1),c=a[0];return a=hI.bind(null,a[1]),Ni().memoizedState=a,[c,a]},useMutableSource:function(){},useSyncExternalStore:function(a,c,h){var g=Sr,w=Ni();if(gr){if(h===void 0)throw Error(r(407));h=h()}else{if(h=c(),mn===null)throw Error(r(349));(uo&30)!==0||Fb(g,c,h)}w.memoizedState=h;var _={value:h,getSnapshot:c};return w.queue=_,qb(zb.bind(null,g,_,a),[a]),g.flags|=2048,Vc(9,Lb.bind(null,g,_,h,c),void 0,null),h},useId:function(){var a=Ni(),c=mn.identifierPrefix;if(gr){var h=Wi,g=Bi;h=(g&~(1<<32-Vt(g)-1)).toString(32)+h,c=":"+c+"R"+h,h=Bc++,0<h&&(c+="H"+h.toString(32)),c+=":"}else h=fI++,c=":"+c+"r"+h.toString(32)+":";return a.memoizedState=c},unstable_isNewReconciler:!1},yI={readContext:Bs,useCallback:Jb,useContext:Bs,useEffect:Pp,useImperativeHandle:Yb,useInsertionEffect:Hb,useLayoutEffect:Kb,useMemo:Qb,useReducer:Ep,useRef:Vb,useState:function(){return Ep(Wc)},useDebugValue:Op,useDeferredValue:function(a){var c=Ws();return Xb(c,Xr.memoizedState,a)},useTransition:function(){var a=Ep(Wc)[0],c=Ws().memoizedState;return[a,c]},useMutableSource:$b,useSyncExternalStore:Mb,useId:Zb,unstable_isNewReconciler:!1},vI={readContext:Bs,useCallback:Jb,useContext:Bs,useEffect:Pp,useImperativeHandle:Yb,useInsertionEffect:Hb,useLayoutEffect:Kb,useMemo:Qb,useReducer:Ap,useRef:Vb,useState:function(){return Ap(Wc)},useDebugValue:Op,useDeferredValue:function(a){var c=Ws();return Xr===null?c.memoizedState=a:Xb(c,Xr.memoizedState,a)},useTransition:function(){var a=Ap(Wc)[0],c=Ws().memoizedState;return[a,c]},useMutableSource:$b,useSyncExternalStore:Mb,useId:Zb,unstable_isNewReconciler:!1};function ii(a,c){if(a&&a.defaultProps){c=ve({},c),a=a.defaultProps;for(var h in a)c[h]===void 0&&(c[h]=a[h]);return c}return c}function Tp(a,c,h,g){c=a.memoizedState,h=h(g,c),h=h==null?c:ve({},c,h),a.memoizedState=h,a.lanes===0&&(a.updateQueue.baseState=h)}var Ld={isMounted:function(a){return(a=a._reactInternals)?dn(a)===a:!1},enqueueSetState:function(a,c,h){a=a._reactInternals;var g=Yn(),w=Ra(a),_=qi(g,w);_.payload=c,h!=null&&(_.callback=h),c=Oa(a,_,w),c!==null&&(li(c,a,w,g),Od(c,a,w))},enqueueReplaceState:function(a,c,h){a=a._reactInternals;var g=Yn(),w=Ra(a),_=qi(g,w);_.tag=1,_.payload=c,h!=null&&(_.callback=h),c=Oa(a,_,w),c!==null&&(li(c,a,w,g),Od(c,a,w))},enqueueForceUpdate:function(a,c){a=a._reactInternals;var h=Yn(),g=Ra(a),w=qi(h,g);w.tag=2,c!=null&&(w.callback=c),c=Oa(a,w,g),c!==null&&(li(c,a,g,h),Od(c,a,g))}};function n1(a,c,h,g,w,_,E){return a=a.stateNode,typeof a.shouldComponentUpdate=="function"?a.shouldComponentUpdate(g,_,E):c.prototype&&c.prototype.isPureReactComponent?!Pc(h,g)||!Pc(w,_):!0}function s1(a,c,h){var g=!1,w=Ea,_=c.contextType;return typeof _=="object"&&_!==null?_=Bs(_):(w=ns(c)?io:Mn.current,g=c.contextTypes,_=(g=g!=null)?sl(a,w):Ea),c=new c(h,_),a.memoizedState=c.state!==null&&c.state!==void 0?c.state:null,c.updater=Ld,a.stateNode=c,c._reactInternals=a,g&&(a=a.stateNode,a.__reactInternalMemoizedUnmaskedChildContext=w,a.__reactInternalMemoizedMaskedChildContext=_),c}function i1(a,c,h,g){a=c.state,typeof c.componentWillReceiveProps=="function"&&c.componentWillReceiveProps(h,g),typeof c.UNSAFE_componentWillReceiveProps=="function"&&c.UNSAFE_componentWillReceiveProps(h,g),c.state!==a&&Ld.enqueueReplaceState(c,c.state,null)}function Ip(a,c,h,g){var w=a.stateNode;w.props=h,w.state=a.memoizedState,w.refs={},xp(a);var _=c.contextType;typeof _=="object"&&_!==null?w.context=Bs(_):(_=ns(c)?io:Mn.current,w.context=sl(a,_)),w.state=a.memoizedState,_=c.getDerivedStateFromProps,typeof _=="function"&&(Tp(a,c,_,h),w.state=a.memoizedState),typeof c.getDerivedStateFromProps=="function"||typeof w.getSnapshotBeforeUpdate=="function"||typeof w.UNSAFE_componentWillMount!="function"&&typeof w.componentWillMount!="function"||(c=w.state,typeof w.componentWillMount=="function"&&w.componentWillMount(),typeof w.UNSAFE_componentWillMount=="function"&&w.UNSAFE_componentWillMount(),c!==w.state&&Ld.enqueueReplaceState(w,w.state,null),Td(a,h,w,g),w.state=a.memoizedState),typeof w.componentDidMount=="function"&&(a.flags|=4194308)}function fl(a,c){try{var h="",g=c;do h+=re(g),g=g.return;while(g);var w=h}catch(_){w=`
Error generating stack: `+_.message+`
`+_.stack}return{value:a,source:c,stack:w,digest:null}}function Dp(a,c,h){return{value:a,source:null,stack:h??null,digest:c??null}}function Rp(a,c){try{console.error(c.value)}catch(h){setTimeout(function(){throw h})}}var xI=typeof WeakMap=="function"?WeakMap:Map;function a1(a,c,h){h=qi(-1,h),h.tag=3,h.payload={element:null};var g=c.value;return h.callback=function(){Hd||(Hd=!0,Jp=g),Rp(a,c)},h}function o1(a,c,h){h=qi(-1,h),h.tag=3;var g=a.type.getDerivedStateFromError;if(typeof g=="function"){var w=c.value;h.payload=function(){return g(w)},h.callback=function(){Rp(a,c)}}var _=a.stateNode;return _!==null&&typeof _.componentDidCatch=="function"&&(h.callback=function(){Rp(a,c),typeof g!="function"&&(Ia===null?Ia=new Set([this]):Ia.add(this));var E=c.stack;this.componentDidCatch(c.value,{componentStack:E!==null?E:""})}),h}function l1(a,c,h){var g=a.pingCache;if(g===null){g=a.pingCache=new xI;var w=new Set;g.set(c,w)}else w=g.get(c),w===void 0&&(w=new Set,g.set(c,w));w.has(h)||(w.add(h),a=II.bind(null,a,c,h),c.then(a,a))}function c1(a){do{var c;if((c=a.tag===13)&&(c=a.memoizedState,c=c!==null?c.dehydrated!==null:!0),c)return a;a=a.return}while(a!==null);return null}function u1(a,c,h,g,w){return(a.mode&1)===0?(a===c?a.flags|=65536:(a.flags|=128,h.flags|=131072,h.flags&=-52805,h.tag===1&&(h.alternate===null?h.tag=17:(c=qi(-1,1),c.tag=2,Oa(h,c,1))),h.lanes|=1),a):(a.flags|=65536,a.lanes=w,a)}var wI=O.ReactCurrentOwner,ss=!1;function Gn(a,c,h,g){c.child=a===null?Pb(c,null,h,g):ll(c,a.child,h,g)}function d1(a,c,h,g,w){h=h.render;var _=c.ref;return ul(c,w),g=Np(a,c,h,g,_,w),h=Cp(),a!==null&&!ss?(c.updateQueue=a.updateQueue,c.flags&=-2053,a.lanes&=~w,Hi(a,c,w)):(gr&&h&&cp(c),c.flags|=1,Gn(a,c,g,w),c.child)}function f1(a,c,h,g,w){if(a===null){var _=h.type;return typeof _=="function"&&!ng(_)&&_.defaultProps===void 0&&h.compare===null&&h.defaultProps===void 0?(c.tag=15,c.type=_,h1(a,c,_,g,w)):(a=Xd(h.type,null,g,c,c.mode,w),a.ref=c.ref,a.return=c,c.child=a)}if(_=a.child,(a.lanes&w)===0){var E=_.memoizedProps;if(h=h.compare,h=h!==null?h:Pc,h(E,g)&&a.ref===c.ref)return Hi(a,c,w)}return c.flags|=1,a=Ma(_,g),a.ref=c.ref,a.return=c,c.child=a}function h1(a,c,h,g,w){if(a!==null){var _=a.memoizedProps;if(Pc(_,g)&&a.ref===c.ref)if(ss=!1,c.pendingProps=g=_,(a.lanes&w)!==0)(a.flags&131072)!==0&&(ss=!0);else return c.lanes=a.lanes,Hi(a,c,w)}return $p(a,c,h,g,w)}function m1(a,c,h){var g=c.pendingProps,w=g.children,_=a!==null?a.memoizedState:null;if(g.mode==="hidden")if((c.mode&1)===0)c.memoizedState={baseLanes:0,cachePool:null,transitions:null},tr(ml,bs),bs|=h;else{if((h&1073741824)===0)return a=_!==null?_.baseLanes|h:h,c.lanes=c.childLanes=1073741824,c.memoizedState={baseLanes:a,cachePool:null,transitions:null},c.updateQueue=null,tr(ml,bs),bs|=a,null;c.memoizedState={baseLanes:0,cachePool:null,transitions:null},g=_!==null?_.baseLanes:h,tr(ml,bs),bs|=g}else _!==null?(g=_.baseLanes|h,c.memoizedState=null):g=h,tr(ml,bs),bs|=g;return Gn(a,c,w,h),c.child}function p1(a,c){var h=c.ref;(a===null&&h!==null||a!==null&&a.ref!==h)&&(c.flags|=512,c.flags|=2097152)}function $p(a,c,h,g,w){var _=ns(h)?io:Mn.current;return _=sl(c,_),ul(c,w),h=Np(a,c,h,g,_,w),g=Cp(),a!==null&&!ss?(c.updateQueue=a.updateQueue,c.flags&=-2053,a.lanes&=~w,Hi(a,c,w)):(gr&&g&&cp(c),c.flags|=1,Gn(a,c,h,w),c.child)}function g1(a,c,h,g,w){if(ns(h)){var _=!0;Sd(c)}else _=!1;if(ul(c,w),c.stateNode===null)Ud(a,c),s1(c,h,g),Ip(c,h,g,w),g=!0;else if(a===null){var E=c.stateNode,R=c.memoizedProps;E.props=R;var z=E.context,le=h.contextType;typeof le=="object"&&le!==null?le=Bs(le):(le=ns(h)?io:Mn.current,le=sl(c,le));var Ee=h.getDerivedStateFromProps,Te=typeof Ee=="function"||typeof E.getSnapshotBeforeUpdate=="function";Te||typeof E.UNSAFE_componentWillReceiveProps!="function"&&typeof E.componentWillReceiveProps!="function"||(R!==g||z!==le)&&i1(c,E,g,le),Pa=!1;var Ne=c.memoizedState;E.state=Ne,Td(c,g,E,w),z=c.memoizedState,R!==g||Ne!==z||rs.current||Pa?(typeof Ee=="function"&&(Tp(c,h,Ee,g),z=c.memoizedState),(R=Pa||n1(c,h,R,g,Ne,z,le))?(Te||typeof E.UNSAFE_componentWillMount!="function"&&typeof E.componentWillMount!="function"||(typeof E.componentWillMount=="function"&&E.componentWillMount(),typeof E.UNSAFE_componentWillMount=="function"&&E.UNSAFE_componentWillMount()),typeof E.componentDidMount=="function"&&(c.flags|=4194308)):(typeof E.componentDidMount=="function"&&(c.flags|=4194308),c.memoizedProps=g,c.memoizedState=z),E.props=g,E.state=z,E.context=le,g=R):(typeof E.componentDidMount=="function"&&(c.flags|=4194308),g=!1)}else{E=c.stateNode,Tb(a,c),R=c.memoizedProps,le=c.type===c.elementType?R:ii(c.type,R),E.props=le,Te=c.pendingProps,Ne=E.context,z=h.contextType,typeof z=="object"&&z!==null?z=Bs(z):(z=ns(h)?io:Mn.current,z=sl(c,z));var Be=h.getDerivedStateFromProps;(Ee=typeof Be=="function"||typeof E.getSnapshotBeforeUpdate=="function")||typeof E.UNSAFE_componentWillReceiveProps!="function"&&typeof E.componentWillReceiveProps!="function"||(R!==Te||Ne!==z)&&i1(c,E,g,z),Pa=!1,Ne=c.memoizedState,E.state=Ne,Td(c,g,E,w);var Ge=c.memoizedState;R!==Te||Ne!==Ge||rs.current||Pa?(typeof Be=="function"&&(Tp(c,h,Be,g),Ge=c.memoizedState),(le=Pa||n1(c,h,le,g,Ne,Ge,z)||!1)?(Ee||typeof E.UNSAFE_componentWillUpdate!="function"&&typeof E.componentWillUpdate!="function"||(typeof E.componentWillUpdate=="function"&&E.componentWillUpdate(g,Ge,z),typeof E.UNSAFE_componentWillUpdate=="function"&&E.UNSAFE_componentWillUpdate(g,Ge,z)),typeof E.componentDidUpdate=="function"&&(c.flags|=4),typeof E.getSnapshotBeforeUpdate=="function"&&(c.flags|=1024)):(typeof E.componentDidUpdate!="function"||R===a.memoizedProps&&Ne===a.memoizedState||(c.flags|=4),typeof E.getSnapshotBeforeUpdate!="function"||R===a.memoizedProps&&Ne===a.memoizedState||(c.flags|=1024),c.memoizedProps=g,c.memoizedState=Ge),E.props=g,E.state=Ge,E.context=z,g=le):(typeof E.componentDidUpdate!="function"||R===a.memoizedProps&&Ne===a.memoizedState||(c.flags|=4),typeof E.getSnapshotBeforeUpdate!="function"||R===a.memoizedProps&&Ne===a.memoizedState||(c.flags|=1024),g=!1)}return Mp(a,c,h,g,_,w)}function Mp(a,c,h,g,w,_){p1(a,c);var E=(c.flags&128)!==0;if(!g&&!E)return w&&bb(c,h,!1),Hi(a,c,_);g=c.stateNode,wI.current=c;var R=E&&typeof h.getDerivedStateFromError!="function"?null:g.render();return c.flags|=1,a!==null&&E?(c.child=ll(c,a.child,null,_),c.child=ll(c,null,R,_)):Gn(a,c,R,_),c.memoizedState=g.state,w&&bb(c,h,!0),c.child}function y1(a){var c=a.stateNode;c.pendingContext?xb(a,c.pendingContext,c.pendingContext!==c.context):c.context&&xb(a,c.context,!1),wp(a,c.containerInfo)}function v1(a,c,h,g,w){return ol(),hp(w),c.flags|=256,Gn(a,c,h,g),c.child}var Fp={dehydrated:null,treeContext:null,retryLane:0};function Lp(a){return{baseLanes:a,cachePool:null,transitions:null}}function x1(a,c,h){var g=c.pendingProps,w=jr.current,_=!1,E=(c.flags&128)!==0,R;if((R=E)||(R=a!==null&&a.memoizedState===null?!1:(w&2)!==0),R?(_=!0,c.flags&=-129):(a===null||a.memoizedState!==null)&&(w|=1),tr(jr,w&1),a===null)return fp(c),a=c.memoizedState,a!==null&&(a=a.dehydrated,a!==null)?((c.mode&1)===0?c.lanes=1:a.data==="$!"?c.lanes=8:c.lanes=1073741824,null):(E=g.children,a=g.fallback,_?(g=c.mode,_=c.child,E={mode:"hidden",children:E},(g&1)===0&&_!==null?(_.childLanes=0,_.pendingProps=E):_=Zd(E,g,0,null),a=go(a,g,h,null),_.return=c,a.return=c,_.sibling=a,c.child=_,c.child.memoizedState=Lp(h),c.memoizedState=Fp,a):zp(c,E));if(w=a.memoizedState,w!==null&&(R=w.dehydrated,R!==null))return bI(a,c,E,g,R,w,h);if(_){_=g.fallback,E=c.mode,w=a.child,R=w.sibling;var z={mode:"hidden",children:g.children};return(E&1)===0&&c.child!==w?(g=c.child,g.childLanes=0,g.pendingProps=z,c.deletions=null):(g=Ma(w,z),g.subtreeFlags=w.subtreeFlags&14680064),R!==null?_=Ma(R,_):(_=go(_,E,h,null),_.flags|=2),_.return=c,g.return=c,g.sibling=_,c.child=g,g=_,_=c.child,E=a.child.memoizedState,E=E===null?Lp(h):{baseLanes:E.baseLanes|h,cachePool:null,transitions:E.transitions},_.memoizedState=E,_.childLanes=a.childLanes&~h,c.memoizedState=Fp,g}return _=a.child,a=_.sibling,g=Ma(_,{mode:"visible",children:g.children}),(c.mode&1)===0&&(g.lanes=h),g.return=c,g.sibling=null,a!==null&&(h=c.deletions,h===null?(c.deletions=[a],c.flags|=16):h.push(a)),c.child=g,c.memoizedState=null,g}function zp(a,c){return c=Zd({mode:"visible",children:c},a.mode,0,null),c.return=a,a.child=c}function zd(a,c,h,g){return g!==null&&hp(g),ll(c,a.child,null,h),a=zp(c,c.pendingProps.children),a.flags|=2,c.memoizedState=null,a}function bI(a,c,h,g,w,_,E){if(h)return c.flags&256?(c.flags&=-257,g=Dp(Error(r(422))),zd(a,c,E,g)):c.memoizedState!==null?(c.child=a.child,c.flags|=128,null):(_=g.fallback,w=c.mode,g=Zd({mode:"visible",children:g.children},w,0,null),_=go(_,w,E,null),_.flags|=2,g.return=c,_.return=c,g.sibling=_,c.child=g,(c.mode&1)!==0&&ll(c,a.child,null,E),c.child.memoizedState=Lp(E),c.memoizedState=Fp,_);if((c.mode&1)===0)return zd(a,c,E,null);if(w.data==="$!"){if(g=w.nextSibling&&w.nextSibling.dataset,g)var R=g.dgst;return g=R,_=Error(r(419)),g=Dp(_,g,void 0),zd(a,c,E,g)}if(R=(E&a.childLanes)!==0,ss||R){if(g=mn,g!==null){switch(E&-E){case 4:w=2;break;case 16:w=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:w=32;break;case 536870912:w=268435456;break;default:w=0}w=(w&(g.suspendedLanes|E))!==0?0:w,w!==0&&w!==_.retryLane&&(_.retryLane=w,Vi(a,w),li(g,a,w,-1))}return rg(),g=Dp(Error(r(421))),zd(a,c,E,g)}return w.data==="$?"?(c.flags|=128,c.child=a.child,c=DI.bind(null,a),w._reactRetry=c,null):(a=_.treeContext,ws=Na(w.nextSibling),xs=c,gr=!0,si=null,a!==null&&(zs[Us++]=Bi,zs[Us++]=Wi,zs[Us++]=ao,Bi=a.id,Wi=a.overflow,ao=c),c=zp(c,g.children),c.flags|=4096,c)}function w1(a,c,h){a.lanes|=c;var g=a.alternate;g!==null&&(g.lanes|=c),yp(a.return,c,h)}function Up(a,c,h,g,w){var _=a.memoizedState;_===null?a.memoizedState={isBackwards:c,rendering:null,renderingStartTime:0,last:g,tail:h,tailMode:w}:(_.isBackwards=c,_.rendering=null,_.renderingStartTime=0,_.last=g,_.tail=h,_.tailMode=w)}function b1(a,c,h){var g=c.pendingProps,w=g.revealOrder,_=g.tail;if(Gn(a,c,g.children,h),g=jr.current,(g&2)!==0)g=g&1|2,c.flags|=128;else{if(a!==null&&(a.flags&128)!==0)e:for(a=c.child;a!==null;){if(a.tag===13)a.memoizedState!==null&&w1(a,h,c);else if(a.tag===19)w1(a,h,c);else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===c)break e;for(;a.sibling===null;){if(a.return===null||a.return===c)break e;a=a.return}a.sibling.return=a.return,a=a.sibling}g&=1}if(tr(jr,g),(c.mode&1)===0)c.memoizedState=null;else switch(w){case"forwards":for(h=c.child,w=null;h!==null;)a=h.alternate,a!==null&&Id(a)===null&&(w=h),h=h.sibling;h=w,h===null?(w=c.child,c.child=null):(w=h.sibling,h.sibling=null),Up(c,!1,w,h,_);break;case"backwards":for(h=null,w=c.child,c.child=null;w!==null;){if(a=w.alternate,a!==null&&Id(a)===null){c.child=w;break}a=w.sibling,w.sibling=h,h=w,w=a}Up(c,!0,h,null,_);break;case"together":Up(c,!1,null,null,void 0);break;default:c.memoizedState=null}return c.child}function Ud(a,c){(c.mode&1)===0&&a!==null&&(a.alternate=null,c.alternate=null,c.flags|=2)}function Hi(a,c,h){if(a!==null&&(c.dependencies=a.dependencies),fo|=c.lanes,(h&c.childLanes)===0)return null;if(a!==null&&c.child!==a.child)throw Error(r(153));if(c.child!==null){for(a=c.child,h=Ma(a,a.pendingProps),c.child=h,h.return=c;a.sibling!==null;)a=a.sibling,h=h.sibling=Ma(a,a.pendingProps),h.return=c;h.sibling=null}return c.child}function jI(a,c,h){switch(c.tag){case 3:y1(c),ol();break;case 5:Rb(c);break;case 1:ns(c.type)&&Sd(c);break;case 4:wp(c,c.stateNode.containerInfo);break;case 10:var g=c.type._context,w=c.memoizedProps.value;tr(Ad,g._currentValue),g._currentValue=w;break;case 13:if(g=c.memoizedState,g!==null)return g.dehydrated!==null?(tr(jr,jr.current&1),c.flags|=128,null):(h&c.child.childLanes)!==0?x1(a,c,h):(tr(jr,jr.current&1),a=Hi(a,c,h),a!==null?a.sibling:null);tr(jr,jr.current&1);break;case 19:if(g=(h&c.childLanes)!==0,(a.flags&128)!==0){if(g)return b1(a,c,h);c.flags|=128}if(w=c.memoizedState,w!==null&&(w.rendering=null,w.tail=null,w.lastEffect=null),tr(jr,jr.current),g)break;return null;case 22:case 23:return c.lanes=0,m1(a,c,h)}return Hi(a,c,h)}var j1,Bp,S1,_1;j1=function(a,c){for(var h=c.child;h!==null;){if(h.tag===5||h.tag===6)a.appendChild(h.stateNode);else if(h.tag!==4&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===c)break;for(;h.sibling===null;){if(h.return===null||h.return===c)return;h=h.return}h.sibling.return=h.return,h=h.sibling}},Bp=function(){},S1=function(a,c,h,g){var w=a.memoizedProps;if(w!==g){a=c.stateNode,co(ki.current);var _=null;switch(h){case"input":w=Ve(a,w),g=Ve(a,g),_=[];break;case"select":w=ve({},w,{value:void 0}),g=ve({},g,{value:void 0}),_=[];break;case"textarea":w=ue(a,w),g=ue(a,g),_=[];break;default:typeof w.onClick!="function"&&typeof g.onClick=="function"&&(a.onclick=wd)}_r(h,g);var E;h=null;for(le in w)if(!g.hasOwnProperty(le)&&w.hasOwnProperty(le)&&w[le]!=null)if(le==="style"){var R=w[le];for(E in R)R.hasOwnProperty(E)&&(h||(h={}),h[E]="")}else le!=="dangerouslySetInnerHTML"&&le!=="children"&&le!=="suppressContentEditableWarning"&&le!=="suppressHydrationWarning"&&le!=="autoFocus"&&(s.hasOwnProperty(le)?_||(_=[]):(_=_||[]).push(le,null));for(le in g){var z=g[le];if(R=w!=null?w[le]:void 0,g.hasOwnProperty(le)&&z!==R&&(z!=null||R!=null))if(le==="style")if(R){for(E in R)!R.hasOwnProperty(E)||z&&z.hasOwnProperty(E)||(h||(h={}),h[E]="");for(E in z)z.hasOwnProperty(E)&&R[E]!==z[E]&&(h||(h={}),h[E]=z[E])}else h||(_||(_=[]),_.push(le,h)),h=z;else le==="dangerouslySetInnerHTML"?(z=z?z.__html:void 0,R=R?R.__html:void 0,z!=null&&R!==z&&(_=_||[]).push(le,z)):le==="children"?typeof z!="string"&&typeof z!="number"||(_=_||[]).push(le,""+z):le!=="suppressContentEditableWarning"&&le!=="suppressHydrationWarning"&&(s.hasOwnProperty(le)?(z!=null&&le==="onScroll"&&lr("scroll",a),_||R===z||(_=[])):(_=_||[]).push(le,z))}h&&(_=_||[]).push("style",h);var le=_;(c.updateQueue=le)&&(c.flags|=4)}},_1=function(a,c,h,g){h!==g&&(c.flags|=4)};function qc(a,c){if(!gr)switch(a.tailMode){case"hidden":c=a.tail;for(var h=null;c!==null;)c.alternate!==null&&(h=c),c=c.sibling;h===null?a.tail=null:h.sibling=null;break;case"collapsed":h=a.tail;for(var g=null;h!==null;)h.alternate!==null&&(g=h),h=h.sibling;g===null?c||a.tail===null?a.tail=null:a.tail.sibling=null:g.sibling=null}}function Ln(a){var c=a.alternate!==null&&a.alternate.child===a.child,h=0,g=0;if(c)for(var w=a.child;w!==null;)h|=w.lanes|w.childLanes,g|=w.subtreeFlags&14680064,g|=w.flags&14680064,w.return=a,w=w.sibling;else for(w=a.child;w!==null;)h|=w.lanes|w.childLanes,g|=w.subtreeFlags,g|=w.flags,w.return=a,w=w.sibling;return a.subtreeFlags|=g,a.childLanes=h,c}function SI(a,c,h){var g=c.pendingProps;switch(up(c),c.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ln(c),null;case 1:return ns(c.type)&&jd(),Ln(c),null;case 3:return g=c.stateNode,dl(),cr(rs),cr(Mn),Sp(),g.pendingContext&&(g.context=g.pendingContext,g.pendingContext=null),(a===null||a.child===null)&&(Cd(c)?c.flags|=4:a===null||a.memoizedState.isDehydrated&&(c.flags&256)===0||(c.flags|=1024,si!==null&&(Zp(si),si=null))),Bp(a,c),Ln(c),null;case 5:bp(c);var w=co(zc.current);if(h=c.type,a!==null&&c.stateNode!=null)S1(a,c,h,g,w),a.ref!==c.ref&&(c.flags|=512,c.flags|=2097152);else{if(!g){if(c.stateNode===null)throw Error(r(166));return Ln(c),null}if(a=co(ki.current),Cd(c)){g=c.stateNode,h=c.type;var _=c.memoizedProps;switch(g[_i]=c,g[Rc]=_,a=(c.mode&1)!==0,h){case"dialog":lr("cancel",g),lr("close",g);break;case"iframe":case"object":case"embed":lr("load",g);break;case"video":case"audio":for(w=0;w<Tc.length;w++)lr(Tc[w],g);break;case"source":lr("error",g);break;case"img":case"image":case"link":lr("error",g),lr("load",g);break;case"details":lr("toggle",g);break;case"input":ft(g,_),lr("invalid",g);break;case"select":g._wrapperState={wasMultiple:!!_.multiple},lr("invalid",g);break;case"textarea":_e(g,_),lr("invalid",g)}_r(h,_),w=null;for(var E in _)if(_.hasOwnProperty(E)){var R=_[E];E==="children"?typeof R=="string"?g.textContent!==R&&(_.suppressHydrationWarning!==!0&&xd(g.textContent,R,a),w=["children",R]):typeof R=="number"&&g.textContent!==""+R&&(_.suppressHydrationWarning!==!0&&xd(g.textContent,R,a),w=["children",""+R]):s.hasOwnProperty(E)&&R!=null&&E==="onScroll"&&lr("scroll",g)}switch(h){case"input":Ze(g),_t(g,_,!0);break;case"textarea":Ze(g),je(g);break;case"select":case"option":break;default:typeof _.onClick=="function"&&(g.onclick=wd)}g=w,c.updateQueue=g,g!==null&&(c.flags|=4)}else{E=w.nodeType===9?w:w.ownerDocument,a==="http://www.w3.org/1999/xhtml"&&(a=Fe(h)),a==="http://www.w3.org/1999/xhtml"?h==="script"?(a=E.createElement("div"),a.innerHTML="<script><\/script>",a=a.removeChild(a.firstChild)):typeof g.is=="string"?a=E.createElement(h,{is:g.is}):(a=E.createElement(h),h==="select"&&(E=a,g.multiple?E.multiple=!0:g.size&&(E.size=g.size))):a=E.createElementNS(a,h),a[_i]=c,a[Rc]=g,j1(a,c,!1,!1),c.stateNode=a;e:{switch(E=er(h,g),h){case"dialog":lr("cancel",a),lr("close",a),w=g;break;case"iframe":case"object":case"embed":lr("load",a),w=g;break;case"video":case"audio":for(w=0;w<Tc.length;w++)lr(Tc[w],a);w=g;break;case"source":lr("error",a),w=g;break;case"img":case"image":case"link":lr("error",a),lr("load",a),w=g;break;case"details":lr("toggle",a),w=g;break;case"input":ft(a,g),w=Ve(a,g),lr("invalid",a);break;case"option":w=g;break;case"select":a._wrapperState={wasMultiple:!!g.multiple},w=ve({},g,{value:void 0}),lr("invalid",a);break;case"textarea":_e(a,g),w=ue(a,g),lr("invalid",a);break;default:w=g}_r(h,w),R=w;for(_ in R)if(R.hasOwnProperty(_)){var z=R[_];_==="style"?Tt(a,z):_==="dangerouslySetInnerHTML"?(z=z?z.__html:void 0,z!=null&&ct(a,z)):_==="children"?typeof z=="string"?(h!=="textarea"||z!=="")&&ir(a,z):typeof z=="number"&&ir(a,""+z):_!=="suppressContentEditableWarning"&&_!=="suppressHydrationWarning"&&_!=="autoFocus"&&(s.hasOwnProperty(_)?z!=null&&_==="onScroll"&&lr("scroll",a):z!=null&&N(a,_,z,E))}switch(h){case"input":Ze(a),_t(a,g,!1);break;case"textarea":Ze(a),je(a);break;case"option":g.value!=null&&a.setAttribute("value",""+ye(g.value));break;case"select":a.multiple=!!g.multiple,_=g.value,_!=null?G(a,!!g.multiple,_,!1):g.defaultValue!=null&&G(a,!!g.multiple,g.defaultValue,!0);break;default:typeof w.onClick=="function"&&(a.onclick=wd)}switch(h){case"button":case"input":case"select":case"textarea":g=!!g.autoFocus;break e;case"img":g=!0;break e;default:g=!1}}g&&(c.flags|=4)}c.ref!==null&&(c.flags|=512,c.flags|=2097152)}return Ln(c),null;case 6:if(a&&c.stateNode!=null)_1(a,c,a.memoizedProps,g);else{if(typeof g!="string"&&c.stateNode===null)throw Error(r(166));if(h=co(zc.current),co(ki.current),Cd(c)){if(g=c.stateNode,h=c.memoizedProps,g[_i]=c,(_=g.nodeValue!==h)&&(a=xs,a!==null))switch(a.tag){case 3:xd(g.nodeValue,h,(a.mode&1)!==0);break;case 5:a.memoizedProps.suppressHydrationWarning!==!0&&xd(g.nodeValue,h,(a.mode&1)!==0)}_&&(c.flags|=4)}else g=(h.nodeType===9?h:h.ownerDocument).createTextNode(g),g[_i]=c,c.stateNode=g}return Ln(c),null;case 13:if(cr(jr),g=c.memoizedState,a===null||a.memoizedState!==null&&a.memoizedState.dehydrated!==null){if(gr&&ws!==null&&(c.mode&1)!==0&&(c.flags&128)===0)Cb(),ol(),c.flags|=98560,_=!1;else if(_=Cd(c),g!==null&&g.dehydrated!==null){if(a===null){if(!_)throw Error(r(318));if(_=c.memoizedState,_=_!==null?_.dehydrated:null,!_)throw Error(r(317));_[_i]=c}else ol(),(c.flags&128)===0&&(c.memoizedState=null),c.flags|=4;Ln(c),_=!1}else si!==null&&(Zp(si),si=null),_=!0;if(!_)return c.flags&65536?c:null}return(c.flags&128)!==0?(c.lanes=h,c):(g=g!==null,g!==(a!==null&&a.memoizedState!==null)&&g&&(c.child.flags|=8192,(c.mode&1)!==0&&(a===null||(jr.current&1)!==0?Zr===0&&(Zr=3):rg())),c.updateQueue!==null&&(c.flags|=4),Ln(c),null);case 4:return dl(),Bp(a,c),a===null&&Ic(c.stateNode.containerInfo),Ln(c),null;case 10:return gp(c.type._context),Ln(c),null;case 17:return ns(c.type)&&jd(),Ln(c),null;case 19:if(cr(jr),_=c.memoizedState,_===null)return Ln(c),null;if(g=(c.flags&128)!==0,E=_.rendering,E===null)if(g)qc(_,!1);else{if(Zr!==0||a!==null&&(a.flags&128)!==0)for(a=c.child;a!==null;){if(E=Id(a),E!==null){for(c.flags|=128,qc(_,!1),g=E.updateQueue,g!==null&&(c.updateQueue=g,c.flags|=4),c.subtreeFlags=0,g=h,h=c.child;h!==null;)_=h,a=g,_.flags&=14680066,E=_.alternate,E===null?(_.childLanes=0,_.lanes=a,_.child=null,_.subtreeFlags=0,_.memoizedProps=null,_.memoizedState=null,_.updateQueue=null,_.dependencies=null,_.stateNode=null):(_.childLanes=E.childLanes,_.lanes=E.lanes,_.child=E.child,_.subtreeFlags=0,_.deletions=null,_.memoizedProps=E.memoizedProps,_.memoizedState=E.memoizedState,_.updateQueue=E.updateQueue,_.type=E.type,a=E.dependencies,_.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext}),h=h.sibling;return tr(jr,jr.current&1|2),c.child}a=a.sibling}_.tail!==null&&me()>pl&&(c.flags|=128,g=!0,qc(_,!1),c.lanes=4194304)}else{if(!g)if(a=Id(E),a!==null){if(c.flags|=128,g=!0,h=a.updateQueue,h!==null&&(c.updateQueue=h,c.flags|=4),qc(_,!0),_.tail===null&&_.tailMode==="hidden"&&!E.alternate&&!gr)return Ln(c),null}else 2*me()-_.renderingStartTime>pl&&h!==1073741824&&(c.flags|=128,g=!0,qc(_,!1),c.lanes=4194304);_.isBackwards?(E.sibling=c.child,c.child=E):(h=_.last,h!==null?h.sibling=E:c.child=E,_.last=E)}return _.tail!==null?(c=_.tail,_.rendering=c,_.tail=c.sibling,_.renderingStartTime=me(),c.sibling=null,h=jr.current,tr(jr,g?h&1|2:h&1),c):(Ln(c),null);case 22:case 23:return tg(),g=c.memoizedState!==null,a!==null&&a.memoizedState!==null!==g&&(c.flags|=8192),g&&(c.mode&1)!==0?(bs&1073741824)!==0&&(Ln(c),c.subtreeFlags&6&&(c.flags|=8192)):Ln(c),null;case 24:return null;case 25:return null}throw Error(r(156,c.tag))}function _I(a,c){switch(up(c),c.tag){case 1:return ns(c.type)&&jd(),a=c.flags,a&65536?(c.flags=a&-65537|128,c):null;case 3:return dl(),cr(rs),cr(Mn),Sp(),a=c.flags,(a&65536)!==0&&(a&128)===0?(c.flags=a&-65537|128,c):null;case 5:return bp(c),null;case 13:if(cr(jr),a=c.memoizedState,a!==null&&a.dehydrated!==null){if(c.alternate===null)throw Error(r(340));ol()}return a=c.flags,a&65536?(c.flags=a&-65537|128,c):null;case 19:return cr(jr),null;case 4:return dl(),null;case 10:return gp(c.type._context),null;case 22:case 23:return tg(),null;case 24:return null;default:return null}}var Bd=!1,zn=!1,kI=typeof WeakSet=="function"?WeakSet:Set,qe=null;function hl(a,c){var h=a.ref;if(h!==null)if(typeof h=="function")try{h(null)}catch(g){Ar(a,c,g)}else h.current=null}function Wp(a,c,h){try{h()}catch(g){Ar(a,c,g)}}var k1=!1;function NI(a,c){if(tp=ld,a=nb(),Km(a)){if("selectionStart"in a)var h={start:a.selectionStart,end:a.selectionEnd};else e:{h=(h=a.ownerDocument)&&h.defaultView||window;var g=h.getSelection&&h.getSelection();if(g&&g.rangeCount!==0){h=g.anchorNode;var w=g.anchorOffset,_=g.focusNode;g=g.focusOffset;try{h.nodeType,_.nodeType}catch{h=null;break e}var E=0,R=-1,z=-1,le=0,Ee=0,Te=a,Ne=null;t:for(;;){for(var Be;Te!==h||w!==0&&Te.nodeType!==3||(R=E+w),Te!==_||g!==0&&Te.nodeType!==3||(z=E+g),Te.nodeType===3&&(E+=Te.nodeValue.length),(Be=Te.firstChild)!==null;)Ne=Te,Te=Be;for(;;){if(Te===a)break t;if(Ne===h&&++le===w&&(R=E),Ne===_&&++Ee===g&&(z=E),(Be=Te.nextSibling)!==null)break;Te=Ne,Ne=Te.parentNode}Te=Be}h=R===-1||z===-1?null:{start:R,end:z}}else h=null}h=h||{start:0,end:0}}else h=null;for(rp={focusedElem:a,selectionRange:h},ld=!1,qe=c;qe!==null;)if(c=qe,a=c.child,(c.subtreeFlags&1028)!==0&&a!==null)a.return=c,qe=a;else for(;qe!==null;){c=qe;try{var Ge=c.alternate;if((c.flags&1024)!==0)switch(c.tag){case 0:case 11:case 15:break;case 1:if(Ge!==null){var Ye=Ge.memoizedProps,$r=Ge.memoizedState,ee=c.stateNode,W=ee.getSnapshotBeforeUpdate(c.elementType===c.type?Ye:ii(c.type,Ye),$r);ee.__reactInternalSnapshotBeforeUpdate=W}break;case 3:var se=c.stateNode.containerInfo;se.nodeType===1?se.textContent="":se.nodeType===9&&se.documentElement&&se.removeChild(se.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(r(163))}}catch(De){Ar(c,c.return,De)}if(a=c.sibling,a!==null){a.return=c.return,qe=a;break}qe=c.return}return Ge=k1,k1=!1,Ge}function Hc(a,c,h){var g=c.updateQueue;if(g=g!==null?g.lastEffect:null,g!==null){var w=g=g.next;do{if((w.tag&a)===a){var _=w.destroy;w.destroy=void 0,_!==void 0&&Wp(c,h,_)}w=w.next}while(w!==g)}}function Wd(a,c){if(c=c.updateQueue,c=c!==null?c.lastEffect:null,c!==null){var h=c=c.next;do{if((h.tag&a)===a){var g=h.create;h.destroy=g()}h=h.next}while(h!==c)}}function Vp(a){var c=a.ref;if(c!==null){var h=a.stateNode;switch(a.tag){case 5:a=h;break;default:a=h}typeof c=="function"?c(a):c.current=a}}function N1(a){var c=a.alternate;c!==null&&(a.alternate=null,N1(c)),a.child=null,a.deletions=null,a.sibling=null,a.tag===5&&(c=a.stateNode,c!==null&&(delete c[_i],delete c[Rc],delete c[ap],delete c[lI],delete c[cI])),a.stateNode=null,a.return=null,a.dependencies=null,a.memoizedProps=null,a.memoizedState=null,a.pendingProps=null,a.stateNode=null,a.updateQueue=null}function C1(a){return a.tag===5||a.tag===3||a.tag===4}function E1(a){e:for(;;){for(;a.sibling===null;){if(a.return===null||C1(a.return))return null;a=a.return}for(a.sibling.return=a.return,a=a.sibling;a.tag!==5&&a.tag!==6&&a.tag!==18;){if(a.flags&2||a.child===null||a.tag===4)continue e;a.child.return=a,a=a.child}if(!(a.flags&2))return a.stateNode}}function qp(a,c,h){var g=a.tag;if(g===5||g===6)a=a.stateNode,c?h.nodeType===8?h.parentNode.insertBefore(a,c):h.insertBefore(a,c):(h.nodeType===8?(c=h.parentNode,c.insertBefore(a,h)):(c=h,c.appendChild(a)),h=h._reactRootContainer,h!=null||c.onclick!==null||(c.onclick=wd));else if(g!==4&&(a=a.child,a!==null))for(qp(a,c,h),a=a.sibling;a!==null;)qp(a,c,h),a=a.sibling}function Hp(a,c,h){var g=a.tag;if(g===5||g===6)a=a.stateNode,c?h.insertBefore(a,c):h.appendChild(a);else if(g!==4&&(a=a.child,a!==null))for(Hp(a,c,h),a=a.sibling;a!==null;)Hp(a,c,h),a=a.sibling}var Nn=null,ai=!1;function Ta(a,c,h){for(h=h.child;h!==null;)A1(a,c,h),h=h.sibling}function A1(a,c,h){if(Me&&typeof Me.onCommitFiberUnmount=="function")try{Me.onCommitFiberUnmount(xt,h)}catch{}switch(h.tag){case 5:zn||hl(h,c);case 6:var g=Nn,w=ai;Nn=null,Ta(a,c,h),Nn=g,ai=w,Nn!==null&&(ai?(a=Nn,h=h.stateNode,a.nodeType===8?a.parentNode.removeChild(h):a.removeChild(h)):Nn.removeChild(h.stateNode));break;case 18:Nn!==null&&(ai?(a=Nn,h=h.stateNode,a.nodeType===8?ip(a.parentNode,h):a.nodeType===1&&ip(a,h),_c(a)):ip(Nn,h.stateNode));break;case 4:g=Nn,w=ai,Nn=h.stateNode.containerInfo,ai=!0,Ta(a,c,h),Nn=g,ai=w;break;case 0:case 11:case 14:case 15:if(!zn&&(g=h.updateQueue,g!==null&&(g=g.lastEffect,g!==null))){w=g=g.next;do{var _=w,E=_.destroy;_=_.tag,E!==void 0&&((_&2)!==0||(_&4)!==0)&&Wp(h,c,E),w=w.next}while(w!==g)}Ta(a,c,h);break;case 1:if(!zn&&(hl(h,c),g=h.stateNode,typeof g.componentWillUnmount=="function"))try{g.props=h.memoizedProps,g.state=h.memoizedState,g.componentWillUnmount()}catch(R){Ar(h,c,R)}Ta(a,c,h);break;case 21:Ta(a,c,h);break;case 22:h.mode&1?(zn=(g=zn)||h.memoizedState!==null,Ta(a,c,h),zn=g):Ta(a,c,h);break;default:Ta(a,c,h)}}function P1(a){var c=a.updateQueue;if(c!==null){a.updateQueue=null;var h=a.stateNode;h===null&&(h=a.stateNode=new kI),c.forEach(function(g){var w=RI.bind(null,a,g);h.has(g)||(h.add(g),g.then(w,w))})}}function oi(a,c){var h=c.deletions;if(h!==null)for(var g=0;g<h.length;g++){var w=h[g];try{var _=a,E=c,R=E;e:for(;R!==null;){switch(R.tag){case 5:Nn=R.stateNode,ai=!1;break e;case 3:Nn=R.stateNode.containerInfo,ai=!0;break e;case 4:Nn=R.stateNode.containerInfo,ai=!0;break e}R=R.return}if(Nn===null)throw Error(r(160));A1(_,E,w),Nn=null,ai=!1;var z=w.alternate;z!==null&&(z.return=null),w.return=null}catch(le){Ar(w,c,le)}}if(c.subtreeFlags&12854)for(c=c.child;c!==null;)O1(c,a),c=c.sibling}function O1(a,c){var h=a.alternate,g=a.flags;switch(a.tag){case 0:case 11:case 14:case 15:if(oi(c,a),Ci(a),g&4){try{Hc(3,a,a.return),Wd(3,a)}catch(Ye){Ar(a,a.return,Ye)}try{Hc(5,a,a.return)}catch(Ye){Ar(a,a.return,Ye)}}break;case 1:oi(c,a),Ci(a),g&512&&h!==null&&hl(h,h.return);break;case 5:if(oi(c,a),Ci(a),g&512&&h!==null&&hl(h,h.return),a.flags&32){var w=a.stateNode;try{ir(w,"")}catch(Ye){Ar(a,a.return,Ye)}}if(g&4&&(w=a.stateNode,w!=null)){var _=a.memoizedProps,E=h!==null?h.memoizedProps:_,R=a.type,z=a.updateQueue;if(a.updateQueue=null,z!==null)try{R==="input"&&_.type==="radio"&&_.name!=null&&gt(w,_),er(R,E);var le=er(R,_);for(E=0;E<z.length;E+=2){var Ee=z[E],Te=z[E+1];Ee==="style"?Tt(w,Te):Ee==="dangerouslySetInnerHTML"?ct(w,Te):Ee==="children"?ir(w,Te):N(w,Ee,Te,le)}switch(R){case"input":Ct(w,_);break;case"textarea":be(w,_);break;case"select":var Ne=w._wrapperState.wasMultiple;w._wrapperState.wasMultiple=!!_.multiple;var Be=_.value;Be!=null?G(w,!!_.multiple,Be,!1):Ne!==!!_.multiple&&(_.defaultValue!=null?G(w,!!_.multiple,_.defaultValue,!0):G(w,!!_.multiple,_.multiple?[]:"",!1))}w[Rc]=_}catch(Ye){Ar(a,a.return,Ye)}}break;case 6:if(oi(c,a),Ci(a),g&4){if(a.stateNode===null)throw Error(r(162));w=a.stateNode,_=a.memoizedProps;try{w.nodeValue=_}catch(Ye){Ar(a,a.return,Ye)}}break;case 3:if(oi(c,a),Ci(a),g&4&&h!==null&&h.memoizedState.isDehydrated)try{_c(c.containerInfo)}catch(Ye){Ar(a,a.return,Ye)}break;case 4:oi(c,a),Ci(a);break;case 13:oi(c,a),Ci(a),w=a.child,w.flags&8192&&(_=w.memoizedState!==null,w.stateNode.isHidden=_,!_||w.alternate!==null&&w.alternate.memoizedState!==null||(Yp=me())),g&4&&P1(a);break;case 22:if(Ee=h!==null&&h.memoizedState!==null,a.mode&1?(zn=(le=zn)||Ee,oi(c,a),zn=le):oi(c,a),Ci(a),g&8192){if(le=a.memoizedState!==null,(a.stateNode.isHidden=le)&&!Ee&&(a.mode&1)!==0)for(qe=a,Ee=a.child;Ee!==null;){for(Te=qe=Ee;qe!==null;){switch(Ne=qe,Be=Ne.child,Ne.tag){case 0:case 11:case 14:case 15:Hc(4,Ne,Ne.return);break;case 1:hl(Ne,Ne.return);var Ge=Ne.stateNode;if(typeof Ge.componentWillUnmount=="function"){g=Ne,h=Ne.return;try{c=g,Ge.props=c.memoizedProps,Ge.state=c.memoizedState,Ge.componentWillUnmount()}catch(Ye){Ar(g,h,Ye)}}break;case 5:hl(Ne,Ne.return);break;case 22:if(Ne.memoizedState!==null){D1(Te);continue}}Be!==null?(Be.return=Ne,qe=Be):D1(Te)}Ee=Ee.sibling}e:for(Ee=null,Te=a;;){if(Te.tag===5){if(Ee===null){Ee=Te;try{w=Te.stateNode,le?(_=w.style,typeof _.setProperty=="function"?_.setProperty("display","none","important"):_.display="none"):(R=Te.stateNode,z=Te.memoizedProps.style,E=z!=null&&z.hasOwnProperty("display")?z.display:null,R.style.display=Qt("display",E))}catch(Ye){Ar(a,a.return,Ye)}}}else if(Te.tag===6){if(Ee===null)try{Te.stateNode.nodeValue=le?"":Te.memoizedProps}catch(Ye){Ar(a,a.return,Ye)}}else if((Te.tag!==22&&Te.tag!==23||Te.memoizedState===null||Te===a)&&Te.child!==null){Te.child.return=Te,Te=Te.child;continue}if(Te===a)break e;for(;Te.sibling===null;){if(Te.return===null||Te.return===a)break e;Ee===Te&&(Ee=null),Te=Te.return}Ee===Te&&(Ee=null),Te.sibling.return=Te.return,Te=Te.sibling}}break;case 19:oi(c,a),Ci(a),g&4&&P1(a);break;case 21:break;default:oi(c,a),Ci(a)}}function Ci(a){var c=a.flags;if(c&2){try{e:{for(var h=a.return;h!==null;){if(C1(h)){var g=h;break e}h=h.return}throw Error(r(160))}switch(g.tag){case 5:var w=g.stateNode;g.flags&32&&(ir(w,""),g.flags&=-33);var _=E1(a);Hp(a,_,w);break;case 3:case 4:var E=g.stateNode.containerInfo,R=E1(a);qp(a,R,E);break;default:throw Error(r(161))}}catch(z){Ar(a,a.return,z)}a.flags&=-3}c&4096&&(a.flags&=-4097)}function CI(a,c,h){qe=a,T1(a)}function T1(a,c,h){for(var g=(a.mode&1)!==0;qe!==null;){var w=qe,_=w.child;if(w.tag===22&&g){var E=w.memoizedState!==null||Bd;if(!E){var R=w.alternate,z=R!==null&&R.memoizedState!==null||zn;R=Bd;var le=zn;if(Bd=E,(zn=z)&&!le)for(qe=w;qe!==null;)E=qe,z=E.child,E.tag===22&&E.memoizedState!==null?R1(w):z!==null?(z.return=E,qe=z):R1(w);for(;_!==null;)qe=_,T1(_),_=_.sibling;qe=w,Bd=R,zn=le}I1(a)}else(w.subtreeFlags&8772)!==0&&_!==null?(_.return=w,qe=_):I1(a)}}function I1(a){for(;qe!==null;){var c=qe;if((c.flags&8772)!==0){var h=c.alternate;try{if((c.flags&8772)!==0)switch(c.tag){case 0:case 11:case 15:zn||Wd(5,c);break;case 1:var g=c.stateNode;if(c.flags&4&&!zn)if(h===null)g.componentDidMount();else{var w=c.elementType===c.type?h.memoizedProps:ii(c.type,h.memoizedProps);g.componentDidUpdate(w,h.memoizedState,g.__reactInternalSnapshotBeforeUpdate)}var _=c.updateQueue;_!==null&&Db(c,_,g);break;case 3:var E=c.updateQueue;if(E!==null){if(h=null,c.child!==null)switch(c.child.tag){case 5:h=c.child.stateNode;break;case 1:h=c.child.stateNode}Db(c,E,h)}break;case 5:var R=c.stateNode;if(h===null&&c.flags&4){h=R;var z=c.memoizedProps;switch(c.type){case"button":case"input":case"select":case"textarea":z.autoFocus&&h.focus();break;case"img":z.src&&(h.src=z.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(c.memoizedState===null){var le=c.alternate;if(le!==null){var Ee=le.memoizedState;if(Ee!==null){var Te=Ee.dehydrated;Te!==null&&_c(Te)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(r(163))}zn||c.flags&512&&Vp(c)}catch(Ne){Ar(c,c.return,Ne)}}if(c===a){qe=null;break}if(h=c.sibling,h!==null){h.return=c.return,qe=h;break}qe=c.return}}function D1(a){for(;qe!==null;){var c=qe;if(c===a){qe=null;break}var h=c.sibling;if(h!==null){h.return=c.return,qe=h;break}qe=c.return}}function R1(a){for(;qe!==null;){var c=qe;try{switch(c.tag){case 0:case 11:case 15:var h=c.return;try{Wd(4,c)}catch(z){Ar(c,h,z)}break;case 1:var g=c.stateNode;if(typeof g.componentDidMount=="function"){var w=c.return;try{g.componentDidMount()}catch(z){Ar(c,w,z)}}var _=c.return;try{Vp(c)}catch(z){Ar(c,_,z)}break;case 5:var E=c.return;try{Vp(c)}catch(z){Ar(c,E,z)}}}catch(z){Ar(c,c.return,z)}if(c===a){qe=null;break}var R=c.sibling;if(R!==null){R.return=c.return,qe=R;break}qe=c.return}}var EI=Math.ceil,Vd=O.ReactCurrentDispatcher,Kp=O.ReactCurrentOwner,Vs=O.ReactCurrentBatchConfig,Rt=0,mn=null,Wr=null,Cn=0,bs=0,ml=Ca(0),Zr=0,Kc=null,fo=0,qd=0,Gp=0,Gc=null,is=null,Yp=0,pl=1/0,Ki=null,Hd=!1,Jp=null,Ia=null,Kd=!1,Da=null,Gd=0,Yc=0,Qp=null,Yd=-1,Jd=0;function Yn(){return(Rt&6)!==0?me():Yd!==-1?Yd:Yd=me()}function Ra(a){return(a.mode&1)===0?1:(Rt&2)!==0&&Cn!==0?Cn&-Cn:dI.transition!==null?(Jd===0&&(Jd=rt()),Jd):(a=Re,a!==0||(a=window.event,a=a===void 0?16:Mw(a.type)),a)}function li(a,c,h,g){if(50<Yc)throw Yc=0,Qp=null,Error(r(185));Je(a,h,g),((Rt&2)===0||a!==mn)&&(a===mn&&((Rt&2)===0&&(qd|=h),Zr===4&&$a(a,Cn)),as(a,g),h===1&&Rt===0&&(c.mode&1)===0&&(pl=me()+500,_d&&Aa()))}function as(a,c){var h=a.callbackNode;fe(a,c);var g=Ie(a,a===mn?Cn:0);if(g===0)h!==null&&Ls(h),a.callbackNode=null,a.callbackPriority=0;else if(c=g&-g,a.callbackPriority!==c){if(h!=null&&Ls(h),c===1)a.tag===0?uI(M1.bind(null,a)):jb(M1.bind(null,a)),aI(function(){(Rt&6)===0&&Aa()}),h=null;else{switch(ut(g)){case 1:h=Oe;break;case 4:h=tt;break;case 16:h=We;break;case 536870912:h=bt;break;default:h=We}h=q1(h,$1.bind(null,a))}a.callbackPriority=c,a.callbackNode=h}}function $1(a,c){if(Yd=-1,Jd=0,(Rt&6)!==0)throw Error(r(327));var h=a.callbackNode;if(gl()&&a.callbackNode!==h)return null;var g=Ie(a,a===mn?Cn:0);if(g===0)return null;if((g&30)!==0||(g&a.expiredLanes)!==0||c)c=Qd(a,g);else{c=g;var w=Rt;Rt|=2;var _=L1();(mn!==a||Cn!==c)&&(Ki=null,pl=me()+500,mo(a,c));do try{OI();break}catch(R){F1(a,R)}while(!0);pp(),Vd.current=_,Rt=w,Wr!==null?c=0:(mn=null,Cn=0,c=Zr)}if(c!==0){if(c===2&&(w=we(a),w!==0&&(g=w,c=Xp(a,w))),c===1)throw h=Kc,mo(a,0),$a(a,g),as(a,me()),h;if(c===6)$a(a,g);else{if(w=a.current.alternate,(g&30)===0&&!AI(w)&&(c=Qd(a,g),c===2&&(_=we(a),_!==0&&(g=_,c=Xp(a,_))),c===1))throw h=Kc,mo(a,0),$a(a,g),as(a,me()),h;switch(a.finishedWork=w,a.finishedLanes=g,c){case 0:case 1:throw Error(r(345));case 2:po(a,is,Ki);break;case 3:if($a(a,g),(g&130023424)===g&&(c=Yp+500-me(),10<c)){if(Ie(a,0)!==0)break;if(w=a.suspendedLanes,(w&g)!==g){Yn(),a.pingedLanes|=a.suspendedLanes&w;break}a.timeoutHandle=sp(po.bind(null,a,is,Ki),c);break}po(a,is,Ki);break;case 4:if($a(a,g),(g&4194240)===g)break;for(c=a.eventTimes,w=-1;0<g;){var E=31-Vt(g);_=1<<E,E=c[E],E>w&&(w=E),g&=~_}if(g=w,g=me()-g,g=(120>g?120:480>g?480:1080>g?1080:1920>g?1920:3e3>g?3e3:4320>g?4320:1960*EI(g/1960))-g,10<g){a.timeoutHandle=sp(po.bind(null,a,is,Ki),g);break}po(a,is,Ki);break;case 5:po(a,is,Ki);break;default:throw Error(r(329))}}}return as(a,me()),a.callbackNode===h?$1.bind(null,a):null}function Xp(a,c){var h=Gc;return a.current.memoizedState.isDehydrated&&(mo(a,c).flags|=256),a=Qd(a,c),a!==2&&(c=is,is=h,c!==null&&Zp(c)),a}function Zp(a){is===null?is=a:is.push.apply(is,a)}function AI(a){for(var c=a;;){if(c.flags&16384){var h=c.updateQueue;if(h!==null&&(h=h.stores,h!==null))for(var g=0;g<h.length;g++){var w=h[g],_=w.getSnapshot;w=w.value;try{if(!ni(_(),w))return!1}catch{return!1}}}if(h=c.child,c.subtreeFlags&16384&&h!==null)h.return=c,c=h;else{if(c===a)break;for(;c.sibling===null;){if(c.return===null||c.return===a)return!0;c=c.return}c.sibling.return=c.return,c=c.sibling}}return!0}function $a(a,c){for(c&=~Gp,c&=~qd,a.suspendedLanes|=c,a.pingedLanes&=~c,a=a.expirationTimes;0<c;){var h=31-Vt(c),g=1<<h;a[h]=-1,c&=~g}}function M1(a){if((Rt&6)!==0)throw Error(r(327));gl();var c=Ie(a,0);if((c&1)===0)return as(a,me()),null;var h=Qd(a,c);if(a.tag!==0&&h===2){var g=we(a);g!==0&&(c=g,h=Xp(a,g))}if(h===1)throw h=Kc,mo(a,0),$a(a,c),as(a,me()),h;if(h===6)throw Error(r(345));return a.finishedWork=a.current.alternate,a.finishedLanes=c,po(a,is,Ki),as(a,me()),null}function eg(a,c){var h=Rt;Rt|=1;try{return a(c)}finally{Rt=h,Rt===0&&(pl=me()+500,_d&&Aa())}}function ho(a){Da!==null&&Da.tag===0&&(Rt&6)===0&&gl();var c=Rt;Rt|=1;var h=Vs.transition,g=Re;try{if(Vs.transition=null,Re=1,a)return a()}finally{Re=g,Vs.transition=h,Rt=c,(Rt&6)===0&&Aa()}}function tg(){bs=ml.current,cr(ml)}function mo(a,c){a.finishedWork=null,a.finishedLanes=0;var h=a.timeoutHandle;if(h!==-1&&(a.timeoutHandle=-1,iI(h)),Wr!==null)for(h=Wr.return;h!==null;){var g=h;switch(up(g),g.tag){case 1:g=g.type.childContextTypes,g!=null&&jd();break;case 3:dl(),cr(rs),cr(Mn),Sp();break;case 5:bp(g);break;case 4:dl();break;case 13:cr(jr);break;case 19:cr(jr);break;case 10:gp(g.type._context);break;case 22:case 23:tg()}h=h.return}if(mn=a,Wr=a=Ma(a.current,null),Cn=bs=c,Zr=0,Kc=null,Gp=qd=fo=0,is=Gc=null,lo!==null){for(c=0;c<lo.length;c++)if(h=lo[c],g=h.interleaved,g!==null){h.interleaved=null;var w=g.next,_=h.pending;if(_!==null){var E=_.next;_.next=w,g.next=E}h.pending=g}lo=null}return a}function F1(a,c){do{var h=Wr;try{if(pp(),Dd.current=Fd,Rd){for(var g=Sr.memoizedState;g!==null;){var w=g.queue;w!==null&&(w.pending=null),g=g.next}Rd=!1}if(uo=0,hn=Xr=Sr=null,Uc=!1,Bc=0,Kp.current=null,h===null||h.return===null){Zr=1,Kc=c,Wr=null;break}e:{var _=a,E=h.return,R=h,z=c;if(c=Cn,R.flags|=32768,z!==null&&typeof z=="object"&&typeof z.then=="function"){var le=z,Ee=R,Te=Ee.tag;if((Ee.mode&1)===0&&(Te===0||Te===11||Te===15)){var Ne=Ee.alternate;Ne?(Ee.updateQueue=Ne.updateQueue,Ee.memoizedState=Ne.memoizedState,Ee.lanes=Ne.lanes):(Ee.updateQueue=null,Ee.memoizedState=null)}var Be=c1(E);if(Be!==null){Be.flags&=-257,u1(Be,E,R,_,c),Be.mode&1&&l1(_,le,c),c=Be,z=le;var Ge=c.updateQueue;if(Ge===null){var Ye=new Set;Ye.add(z),c.updateQueue=Ye}else Ge.add(z);break e}else{if((c&1)===0){l1(_,le,c),rg();break e}z=Error(r(426))}}else if(gr&&R.mode&1){var $r=c1(E);if($r!==null){($r.flags&65536)===0&&($r.flags|=256),u1($r,E,R,_,c),hp(fl(z,R));break e}}_=z=fl(z,R),Zr!==4&&(Zr=2),Gc===null?Gc=[_]:Gc.push(_),_=E;do{switch(_.tag){case 3:_.flags|=65536,c&=-c,_.lanes|=c;var ee=a1(_,z,c);Ib(_,ee);break e;case 1:R=z;var W=_.type,se=_.stateNode;if((_.flags&128)===0&&(typeof W.getDerivedStateFromError=="function"||se!==null&&typeof se.componentDidCatch=="function"&&(Ia===null||!Ia.has(se)))){_.flags|=65536,c&=-c,_.lanes|=c;var De=o1(_,R,c);Ib(_,De);break e}}_=_.return}while(_!==null)}U1(h)}catch(Xe){c=Xe,Wr===h&&h!==null&&(Wr=h=h.return);continue}break}while(!0)}function L1(){var a=Vd.current;return Vd.current=Fd,a===null?Fd:a}function rg(){(Zr===0||Zr===3||Zr===2)&&(Zr=4),mn===null||(fo&268435455)===0&&(qd&268435455)===0||$a(mn,Cn)}function Qd(a,c){var h=Rt;Rt|=2;var g=L1();(mn!==a||Cn!==c)&&(Ki=null,mo(a,c));do try{PI();break}catch(w){F1(a,w)}while(!0);if(pp(),Rt=h,Vd.current=g,Wr!==null)throw Error(r(261));return mn=null,Cn=0,Zr}function PI(){for(;Wr!==null;)z1(Wr)}function OI(){for(;Wr!==null&&!Si();)z1(Wr)}function z1(a){var c=V1(a.alternate,a,bs);a.memoizedProps=a.pendingProps,c===null?U1(a):Wr=c,Kp.current=null}function U1(a){var c=a;do{var h=c.alternate;if(a=c.return,(c.flags&32768)===0){if(h=SI(h,c,bs),h!==null){Wr=h;return}}else{if(h=_I(h,c),h!==null){h.flags&=32767,Wr=h;return}if(a!==null)a.flags|=32768,a.subtreeFlags=0,a.deletions=null;else{Zr=6,Wr=null;return}}if(c=c.sibling,c!==null){Wr=c;return}Wr=c=a}while(c!==null);Zr===0&&(Zr=5)}function po(a,c,h){var g=Re,w=Vs.transition;try{Vs.transition=null,Re=1,TI(a,c,h,g)}finally{Vs.transition=w,Re=g}return null}function TI(a,c,h,g){do gl();while(Da!==null);if((Rt&6)!==0)throw Error(r(327));h=a.finishedWork;var w=a.finishedLanes;if(h===null)return null;if(a.finishedWork=null,a.finishedLanes=0,h===a.current)throw Error(r(177));a.callbackNode=null,a.callbackPriority=0;var _=h.lanes|h.childLanes;if(Pt(a,_),a===mn&&(Wr=mn=null,Cn=0),(h.subtreeFlags&2064)===0&&(h.flags&2064)===0||Kd||(Kd=!0,q1(We,function(){return gl(),null})),_=(h.flags&15990)!==0,(h.subtreeFlags&15990)!==0||_){_=Vs.transition,Vs.transition=null;var E=Re;Re=1;var R=Rt;Rt|=4,Kp.current=null,NI(a,h),O1(h,a),X4(rp),ld=!!tp,rp=tp=null,a.current=h,CI(h),Y(),Rt=R,Re=E,Vs.transition=_}else a.current=h;if(Kd&&(Kd=!1,Da=a,Gd=w),_=a.pendingLanes,_===0&&(Ia=null),Qr(h.stateNode),as(a,me()),c!==null)for(g=a.onRecoverableError,h=0;h<c.length;h++)w=c[h],g(w.value,{componentStack:w.stack,digest:w.digest});if(Hd)throw Hd=!1,a=Jp,Jp=null,a;return(Gd&1)!==0&&a.tag!==0&&gl(),_=a.pendingLanes,(_&1)!==0?a===Qp?Yc++:(Yc=0,Qp=a):Yc=0,Aa(),null}function gl(){if(Da!==null){var a=ut(Gd),c=Vs.transition,h=Re;try{if(Vs.transition=null,Re=16>a?16:a,Da===null)var g=!1;else{if(a=Da,Da=null,Gd=0,(Rt&6)!==0)throw Error(r(331));var w=Rt;for(Rt|=4,qe=a.current;qe!==null;){var _=qe,E=_.child;if((qe.flags&16)!==0){var R=_.deletions;if(R!==null){for(var z=0;z<R.length;z++){var le=R[z];for(qe=le;qe!==null;){var Ee=qe;switch(Ee.tag){case 0:case 11:case 15:Hc(8,Ee,_)}var Te=Ee.child;if(Te!==null)Te.return=Ee,qe=Te;else for(;qe!==null;){Ee=qe;var Ne=Ee.sibling,Be=Ee.return;if(N1(Ee),Ee===le){qe=null;break}if(Ne!==null){Ne.return=Be,qe=Ne;break}qe=Be}}}var Ge=_.alternate;if(Ge!==null){var Ye=Ge.child;if(Ye!==null){Ge.child=null;do{var $r=Ye.sibling;Ye.sibling=null,Ye=$r}while(Ye!==null)}}qe=_}}if((_.subtreeFlags&2064)!==0&&E!==null)E.return=_,qe=E;else e:for(;qe!==null;){if(_=qe,(_.flags&2048)!==0)switch(_.tag){case 0:case 11:case 15:Hc(9,_,_.return)}var ee=_.sibling;if(ee!==null){ee.return=_.return,qe=ee;break e}qe=_.return}}var W=a.current;for(qe=W;qe!==null;){E=qe;var se=E.child;if((E.subtreeFlags&2064)!==0&&se!==null)se.return=E,qe=se;else e:for(E=W;qe!==null;){if(R=qe,(R.flags&2048)!==0)try{switch(R.tag){case 0:case 11:case 15:Wd(9,R)}}catch(Xe){Ar(R,R.return,Xe)}if(R===E){qe=null;break e}var De=R.sibling;if(De!==null){De.return=R.return,qe=De;break e}qe=R.return}}if(Rt=w,Aa(),Me&&typeof Me.onPostCommitFiberRoot=="function")try{Me.onPostCommitFiberRoot(xt,a)}catch{}g=!0}return g}finally{Re=h,Vs.transition=c}}return!1}function B1(a,c,h){c=fl(h,c),c=a1(a,c,1),a=Oa(a,c,1),c=Yn(),a!==null&&(Je(a,1,c),as(a,c))}function Ar(a,c,h){if(a.tag===3)B1(a,a,h);else for(;c!==null;){if(c.tag===3){B1(c,a,h);break}else if(c.tag===1){var g=c.stateNode;if(typeof c.type.getDerivedStateFromError=="function"||typeof g.componentDidCatch=="function"&&(Ia===null||!Ia.has(g))){a=fl(h,a),a=o1(c,a,1),c=Oa(c,a,1),a=Yn(),c!==null&&(Je(c,1,a),as(c,a));break}}c=c.return}}function II(a,c,h){var g=a.pingCache;g!==null&&g.delete(c),c=Yn(),a.pingedLanes|=a.suspendedLanes&h,mn===a&&(Cn&h)===h&&(Zr===4||Zr===3&&(Cn&130023424)===Cn&&500>me()-Yp?mo(a,0):Gp|=h),as(a,c)}function W1(a,c){c===0&&((a.mode&1)===0?c=1:(c=te,te<<=1,(te&130023424)===0&&(te=4194304)));var h=Yn();a=Vi(a,c),a!==null&&(Je(a,c,h),as(a,h))}function DI(a){var c=a.memoizedState,h=0;c!==null&&(h=c.retryLane),W1(a,h)}function RI(a,c){var h=0;switch(a.tag){case 13:var g=a.stateNode,w=a.memoizedState;w!==null&&(h=w.retryLane);break;case 19:g=a.stateNode;break;default:throw Error(r(314))}g!==null&&g.delete(c),W1(a,h)}var V1;V1=function(a,c,h){if(a!==null)if(a.memoizedProps!==c.pendingProps||rs.current)ss=!0;else{if((a.lanes&h)===0&&(c.flags&128)===0)return ss=!1,jI(a,c,h);ss=(a.flags&131072)!==0}else ss=!1,gr&&(c.flags&1048576)!==0&&Sb(c,Nd,c.index);switch(c.lanes=0,c.tag){case 2:var g=c.type;Ud(a,c),a=c.pendingProps;var w=sl(c,Mn.current);ul(c,h),w=Np(null,c,g,a,w,h);var _=Cp();return c.flags|=1,typeof w=="object"&&w!==null&&typeof w.render=="function"&&w.$$typeof===void 0?(c.tag=1,c.memoizedState=null,c.updateQueue=null,ns(g)?(_=!0,Sd(c)):_=!1,c.memoizedState=w.state!==null&&w.state!==void 0?w.state:null,xp(c),w.updater=Ld,c.stateNode=w,w._reactInternals=c,Ip(c,g,a,h),c=Mp(null,c,g,!0,_,h)):(c.tag=0,gr&&_&&cp(c),Gn(null,c,w,h),c=c.child),c;case 16:g=c.elementType;e:{switch(Ud(a,c),a=c.pendingProps,w=g._init,g=w(g._payload),c.type=g,w=c.tag=MI(g),a=ii(g,a),w){case 0:c=$p(null,c,g,a,h);break e;case 1:c=g1(null,c,g,a,h);break e;case 11:c=d1(null,c,g,a,h);break e;case 14:c=f1(null,c,g,ii(g.type,a),h);break e}throw Error(r(306,g,""))}return c;case 0:return g=c.type,w=c.pendingProps,w=c.elementType===g?w:ii(g,w),$p(a,c,g,w,h);case 1:return g=c.type,w=c.pendingProps,w=c.elementType===g?w:ii(g,w),g1(a,c,g,w,h);case 3:e:{if(y1(c),a===null)throw Error(r(387));g=c.pendingProps,_=c.memoizedState,w=_.element,Tb(a,c),Td(c,g,null,h);var E=c.memoizedState;if(g=E.element,_.isDehydrated)if(_={element:g,isDehydrated:!1,cache:E.cache,pendingSuspenseBoundaries:E.pendingSuspenseBoundaries,transitions:E.transitions},c.updateQueue.baseState=_,c.memoizedState=_,c.flags&256){w=fl(Error(r(423)),c),c=v1(a,c,g,h,w);break e}else if(g!==w){w=fl(Error(r(424)),c),c=v1(a,c,g,h,w);break e}else for(ws=Na(c.stateNode.containerInfo.firstChild),xs=c,gr=!0,si=null,h=Pb(c,null,g,h),c.child=h;h;)h.flags=h.flags&-3|4096,h=h.sibling;else{if(ol(),g===w){c=Hi(a,c,h);break e}Gn(a,c,g,h)}c=c.child}return c;case 5:return Rb(c),a===null&&fp(c),g=c.type,w=c.pendingProps,_=a!==null?a.memoizedProps:null,E=w.children,np(g,w)?E=null:_!==null&&np(g,_)&&(c.flags|=32),p1(a,c),Gn(a,c,E,h),c.child;case 6:return a===null&&fp(c),null;case 13:return x1(a,c,h);case 4:return wp(c,c.stateNode.containerInfo),g=c.pendingProps,a===null?c.child=ll(c,null,g,h):Gn(a,c,g,h),c.child;case 11:return g=c.type,w=c.pendingProps,w=c.elementType===g?w:ii(g,w),d1(a,c,g,w,h);case 7:return Gn(a,c,c.pendingProps,h),c.child;case 8:return Gn(a,c,c.pendingProps.children,h),c.child;case 12:return Gn(a,c,c.pendingProps.children,h),c.child;case 10:e:{if(g=c.type._context,w=c.pendingProps,_=c.memoizedProps,E=w.value,tr(Ad,g._currentValue),g._currentValue=E,_!==null)if(ni(_.value,E)){if(_.children===w.children&&!rs.current){c=Hi(a,c,h);break e}}else for(_=c.child,_!==null&&(_.return=c);_!==null;){var R=_.dependencies;if(R!==null){E=_.child;for(var z=R.firstContext;z!==null;){if(z.context===g){if(_.tag===1){z=qi(-1,h&-h),z.tag=2;var le=_.updateQueue;if(le!==null){le=le.shared;var Ee=le.pending;Ee===null?z.next=z:(z.next=Ee.next,Ee.next=z),le.pending=z}}_.lanes|=h,z=_.alternate,z!==null&&(z.lanes|=h),yp(_.return,h,c),R.lanes|=h;break}z=z.next}}else if(_.tag===10)E=_.type===c.type?null:_.child;else if(_.tag===18){if(E=_.return,E===null)throw Error(r(341));E.lanes|=h,R=E.alternate,R!==null&&(R.lanes|=h),yp(E,h,c),E=_.sibling}else E=_.child;if(E!==null)E.return=_;else for(E=_;E!==null;){if(E===c){E=null;break}if(_=E.sibling,_!==null){_.return=E.return,E=_;break}E=E.return}_=E}Gn(a,c,w.children,h),c=c.child}return c;case 9:return w=c.type,g=c.pendingProps.children,ul(c,h),w=Bs(w),g=g(w),c.flags|=1,Gn(a,c,g,h),c.child;case 14:return g=c.type,w=ii(g,c.pendingProps),w=ii(g.type,w),f1(a,c,g,w,h);case 15:return h1(a,c,c.type,c.pendingProps,h);case 17:return g=c.type,w=c.pendingProps,w=c.elementType===g?w:ii(g,w),Ud(a,c),c.tag=1,ns(g)?(a=!0,Sd(c)):a=!1,ul(c,h),s1(c,g,w),Ip(c,g,w,h),Mp(null,c,g,!0,a,h);case 19:return b1(a,c,h);case 22:return m1(a,c,h)}throw Error(r(156,c.tag))};function q1(a,c){return ys(a,c)}function $I(a,c,h,g){this.tag=a,this.key=h,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=c,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=g,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function qs(a,c,h,g){return new $I(a,c,h,g)}function ng(a){return a=a.prototype,!(!a||!a.isReactComponent)}function MI(a){if(typeof a=="function")return ng(a)?1:0;if(a!=null){if(a=a.$$typeof,a===Q)return 11;if(a===J)return 14}return 2}function Ma(a,c){var h=a.alternate;return h===null?(h=qs(a.tag,c,a.key,a.mode),h.elementType=a.elementType,h.type=a.type,h.stateNode=a.stateNode,h.alternate=a,a.alternate=h):(h.pendingProps=c,h.type=a.type,h.flags=0,h.subtreeFlags=0,h.deletions=null),h.flags=a.flags&14680064,h.childLanes=a.childLanes,h.lanes=a.lanes,h.child=a.child,h.memoizedProps=a.memoizedProps,h.memoizedState=a.memoizedState,h.updateQueue=a.updateQueue,c=a.dependencies,h.dependencies=c===null?null:{lanes:c.lanes,firstContext:c.firstContext},h.sibling=a.sibling,h.index=a.index,h.ref=a.ref,h}function Xd(a,c,h,g,w,_){var E=2;if(g=a,typeof a=="function")ng(a)&&(E=1);else if(typeof a=="string")E=5;else e:switch(a){case D:return go(h.children,w,_,c);case q:E=8,w|=8;break;case F:return a=qs(12,h,c,w|2),a.elementType=F,a.lanes=_,a;case oe:return a=qs(13,h,c,w),a.elementType=oe,a.lanes=_,a;case ae:return a=qs(19,h,c,w),a.elementType=ae,a.lanes=_,a;case ne:return Zd(h,w,_,c);default:if(typeof a=="object"&&a!==null)switch(a.$$typeof){case K:E=10;break e;case B:E=9;break e;case Q:E=11;break e;case J:E=14;break e;case H:E=16,g=null;break e}throw Error(r(130,a==null?a:typeof a,""))}return c=qs(E,h,c,w),c.elementType=a,c.type=g,c.lanes=_,c}function go(a,c,h,g){return a=qs(7,a,g,c),a.lanes=h,a}function Zd(a,c,h,g){return a=qs(22,a,g,c),a.elementType=ne,a.lanes=h,a.stateNode={isHidden:!1},a}function sg(a,c,h){return a=qs(6,a,null,c),a.lanes=h,a}function ig(a,c,h){return c=qs(4,a.children!==null?a.children:[],a.key,c),c.lanes=h,c.stateNode={containerInfo:a.containerInfo,pendingChildren:null,implementation:a.implementation},c}function FI(a,c,h,g,w){this.tag=c,this.containerInfo=a,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=wt(0),this.expirationTimes=wt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=wt(0),this.identifierPrefix=g,this.onRecoverableError=w,this.mutableSourceEagerHydrationData=null}function ag(a,c,h,g,w,_,E,R,z){return a=new FI(a,c,h,R,z),c===1?(c=1,_===!0&&(c|=8)):c=0,_=qs(3,null,null,c),a.current=_,_.stateNode=a,_.memoizedState={element:g,isDehydrated:h,cache:null,transitions:null,pendingSuspenseBoundaries:null},xp(_),a}function LI(a,c,h){var g=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:T,key:g==null?null:""+g,children:a,containerInfo:c,implementation:h}}function H1(a){if(!a)return Ea;a=a._reactInternals;e:{if(dn(a)!==a||a.tag!==1)throw Error(r(170));var c=a;do{switch(c.tag){case 3:c=c.stateNode.context;break e;case 1:if(ns(c.type)){c=c.stateNode.__reactInternalMemoizedMergedChildContext;break e}}c=c.return}while(c!==null);throw Error(r(171))}if(a.tag===1){var h=a.type;if(ns(h))return wb(a,h,c)}return c}function K1(a,c,h,g,w,_,E,R,z){return a=ag(h,g,!0,a,w,_,E,R,z),a.context=H1(null),h=a.current,g=Yn(),w=Ra(h),_=qi(g,w),_.callback=c??null,Oa(h,_,w),a.current.lanes=w,Je(a,w,g),as(a,g),a}function ef(a,c,h,g){var w=c.current,_=Yn(),E=Ra(w);return h=H1(h),c.context===null?c.context=h:c.pendingContext=h,c=qi(_,E),c.payload={element:a},g=g===void 0?null:g,g!==null&&(c.callback=g),a=Oa(w,c,E),a!==null&&(li(a,w,E,_),Od(a,w,E)),E}function tf(a){if(a=a.current,!a.child)return null;switch(a.child.tag){case 5:return a.child.stateNode;default:return a.child.stateNode}}function G1(a,c){if(a=a.memoizedState,a!==null&&a.dehydrated!==null){var h=a.retryLane;a.retryLane=h!==0&&h<c?h:c}}function og(a,c){G1(a,c),(a=a.alternate)&&G1(a,c)}function zI(){return null}var Y1=typeof reportError=="function"?reportError:function(a){console.error(a)};function lg(a){this._internalRoot=a}rf.prototype.render=lg.prototype.render=function(a){var c=this._internalRoot;if(c===null)throw Error(r(409));ef(a,c,null,null)},rf.prototype.unmount=lg.prototype.unmount=function(){var a=this._internalRoot;if(a!==null){this._internalRoot=null;var c=a.containerInfo;ho(function(){ef(null,a,null,null)}),c[zi]=null}};function rf(a){this._internalRoot=a}rf.prototype.unstable_scheduleHydration=function(a){if(a){var c=mt();a={blockedOn:null,target:a,priority:c};for(var h=0;h<Qe.length&&c!==0&&c<Qe[h].priority;h++);Qe.splice(h,0,a),h===0&&Rw(a)}};function cg(a){return!(!a||a.nodeType!==1&&a.nodeType!==9&&a.nodeType!==11)}function nf(a){return!(!a||a.nodeType!==1&&a.nodeType!==9&&a.nodeType!==11&&(a.nodeType!==8||a.nodeValue!==" react-mount-point-unstable "))}function J1(){}function UI(a,c,h,g,w){if(w){if(typeof g=="function"){var _=g;g=function(){var le=tf(E);_.call(le)}}var E=K1(c,g,a,0,null,!1,!1,"",J1);return a._reactRootContainer=E,a[zi]=E.current,Ic(a.nodeType===8?a.parentNode:a),ho(),E}for(;w=a.lastChild;)a.removeChild(w);if(typeof g=="function"){var R=g;g=function(){var le=tf(z);R.call(le)}}var z=ag(a,0,!1,null,null,!1,!1,"",J1);return a._reactRootContainer=z,a[zi]=z.current,Ic(a.nodeType===8?a.parentNode:a),ho(function(){ef(c,z,h,g)}),z}function sf(a,c,h,g,w){var _=h._reactRootContainer;if(_){var E=_;if(typeof w=="function"){var R=w;w=function(){var z=tf(E);R.call(z)}}ef(c,E,a,w)}else E=UI(h,c,a,w,g);return tf(E)}Ot=function(a){switch(a.tag){case 3:var c=a.stateNode;if(c.current.memoizedState.isDehydrated){var h=ce(c.pendingLanes);h!==0&&(ht(c,h|1),as(c,me()),(Rt&6)===0&&(pl=me()+500,Aa()))}break;case 13:ho(function(){var g=Vi(a,1);if(g!==null){var w=Yn();li(g,a,1,w)}}),og(a,1)}},It=function(a){if(a.tag===13){var c=Vi(a,134217728);if(c!==null){var h=Yn();li(c,a,134217728,h)}og(a,134217728)}},Ir=function(a){if(a.tag===13){var c=Ra(a),h=Vi(a,c);if(h!==null){var g=Yn();li(h,a,c,g)}og(a,c)}},mt=function(){return Re},Kt=function(a,c){var h=Re;try{return Re=a,c()}finally{Re=h}},xr=function(a,c,h){switch(c){case"input":if(Ct(a,h),c=h.name,h.type==="radio"&&c!=null){for(h=a;h.parentNode;)h=h.parentNode;for(h=h.querySelectorAll("input[name="+JSON.stringify(""+c)+'][type="radio"]'),c=0;c<h.length;c++){var g=h[c];if(g!==a&&g.form===a.form){var w=bd(g);if(!w)throw Error(r(90));Z(g),Ct(g,w)}}}break;case"textarea":be(a,h);break;case"select":c=h.value,c!=null&&G(a,!!h.multiple,c,!1)}},mr=eg,Ft=ho;var BI={usingClientEntryPoint:!1,Events:[$c,rl,bd,Rn,kr,eg]},Jc={findFiberByHostInstance:so,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},WI={bundleType:Jc.bundleType,version:Jc.version,rendererPackageName:Jc.rendererPackageName,rendererConfig:Jc.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:O.ReactCurrentDispatcher,findHostInstanceByFiber:function(a){return a=wr(a),a===null?null:a.stateNode},findFiberByHostInstance:Jc.findFiberByHostInstance||zI,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var af=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!af.isDisabled&&af.supportsFiber)try{xt=af.inject(WI),Me=af}catch{}}return os.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=BI,os.createPortal=function(a,c){var h=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!cg(c))throw Error(r(200));return LI(a,c,null,h)},os.createRoot=function(a,c){if(!cg(a))throw Error(r(299));var h=!1,g="",w=Y1;return c!=null&&(c.unstable_strictMode===!0&&(h=!0),c.identifierPrefix!==void 0&&(g=c.identifierPrefix),c.onRecoverableError!==void 0&&(w=c.onRecoverableError)),c=ag(a,1,!1,null,null,h,!1,g,w),a[zi]=c.current,Ic(a.nodeType===8?a.parentNode:a),new lg(c)},os.findDOMNode=function(a){if(a==null)return null;if(a.nodeType===1)return a;var c=a._reactInternals;if(c===void 0)throw typeof a.render=="function"?Error(r(188)):(a=Object.keys(a).join(","),Error(r(268,a)));return a=wr(c),a=a===null?null:a.stateNode,a},os.flushSync=function(a){return ho(a)},os.hydrate=function(a,c,h){if(!nf(c))throw Error(r(200));return sf(null,a,c,!0,h)},os.hydrateRoot=function(a,c,h){if(!cg(a))throw Error(r(405));var g=h!=null&&h.hydratedSources||null,w=!1,_="",E=Y1;if(h!=null&&(h.unstable_strictMode===!0&&(w=!0),h.identifierPrefix!==void 0&&(_=h.identifierPrefix),h.onRecoverableError!==void 0&&(E=h.onRecoverableError)),c=K1(c,null,a,1,h??null,w,!1,_,E),a[zi]=c.current,Ic(a),g)for(a=0;a<g.length;a++)h=g[a],w=h._getVersion,w=w(h._source),c.mutableSourceEagerHydrationData==null?c.mutableSourceEagerHydrationData=[h,w]:c.mutableSourceEagerHydrationData.push(h,w);return new rf(c)},os.render=function(a,c,h){if(!nf(c))throw Error(r(200));return sf(null,a,c,!1,h)},os.unmountComponentAtNode=function(a){if(!nf(a))throw Error(r(40));return a._reactRootContainer?(ho(function(){sf(null,null,a,!1,function(){a._reactRootContainer=null,a[zi]=null})}),!0):!1},os.unstable_batchedUpdates=eg,os.unstable_renderSubtreeIntoContainer=function(a,c,h,g){if(!nf(h))throw Error(r(200));if(a==null||a._reactInternals===void 0)throw Error(r(38));return sf(a,c,h,!1,g)},os.version="18.3.1-next-f1338f8080-20240426",os}var sj;function K2(){if(sj)return hg.exports;sj=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),hg.exports=tD(),hg.exports}var ij;function rD(){if(ij)return of;ij=1;var e=K2();return of.createRoot=e.createRoot,of.hydrateRoot=e.hydrateRoot,of}var nD=rD();const sD=wi(nD);/**
 * react-router v7.9.4
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var aj="popstate";function iD(e={}){function t(n,s){let{pathname:i,search:l,hash:u}=n.location;return gv("",{pathname:i,search:l,hash:u},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function r(n,s){return typeof s=="string"?s:wu(s)}return oD(t,r,null,e)}function vr(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function Qs(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function aD(){return Math.random().toString(36).substring(2,10)}function oj(e,t){return{usr:e.state,key:e.key,idx:t}}function gv(e,t,r=null,n){return{pathname:typeof e=="string"?e:e.pathname,search:"",hash:"",...typeof t=="string"?ac(t):t,state:r,key:t&&t.key||n||aD()}}function wu({pathname:e="/",search:t="",hash:r=""}){return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function ac(e){let t={};if(e){let r=e.indexOf("#");r>=0&&(t.hash=e.substring(r),e=e.substring(0,r));let n=e.indexOf("?");n>=0&&(t.search=e.substring(n),e=e.substring(0,n)),e&&(t.pathname=e)}return t}function oD(e,t,r,n={}){let{window:s=document.defaultView,v5Compat:i=!1}=n,l=s.history,u="POP",d=null,m=f();m==null&&(m=0,l.replaceState({...l.state,idx:m},""));function f(){return(l.state||{idx:null}).idx}function p(){u="POP";let S=f(),k=S==null?null:S-m;m=S,d&&d({action:u,location:j.location,delta:k})}function y(S,k){u="PUSH";let C=gv(j.location,S,k);m=f()+1;let N=oj(C,m),O=j.createHref(C);try{l.pushState(N,"",O)}catch(P){if(P instanceof DOMException&&P.name==="DataCloneError")throw P;s.location.assign(O)}i&&d&&d({action:u,location:j.location,delta:1})}function x(S,k){u="REPLACE";let C=gv(j.location,S,k);m=f();let N=oj(C,m),O=j.createHref(C);l.replaceState(N,"",O),i&&d&&d({action:u,location:j.location,delta:0})}function b(S){return lD(S)}let j={get action(){return u},get location(){return e(s,l)},listen(S){if(d)throw new Error("A history only accepts one active listener");return s.addEventListener(aj,p),d=S,()=>{s.removeEventListener(aj,p),d=null}},createHref(S){return t(s,S)},createURL:b,encodeLocation(S){let k=b(S);return{pathname:k.pathname,search:k.search,hash:k.hash}},push:y,replace:x,go(S){return l.go(S)}};return j}function lD(e,t=!1){let r="http://localhost";typeof window<"u"&&(r=window.location.origin!=="null"?window.location.origin:window.location.href),vr(r,"No window.location.(origin|href) available to create URL");let n=typeof e=="string"?e:wu(e);return n=n.replace(/ $/,"%20"),!t&&n.startsWith("//")&&(n=r+n),new URL(n,r)}function G2(e,t,r="/"){return cD(e,t,r,!1)}function cD(e,t,r,n){let s=typeof t=="string"?ac(t):t,i=ia(s.pathname||"/",r);if(i==null)return null;let l=Y2(e);uD(l);let u=null;for(let d=0;u==null&&d<l.length;++d){let m=bD(i);u=xD(l[d],m,n)}return u}function Y2(e,t=[],r=[],n="",s=!1){let i=(l,u,d=s,m)=>{let f={relativePath:m===void 0?l.path||"":m,caseSensitive:l.caseSensitive===!0,childrenIndex:u,route:l};if(f.relativePath.startsWith("/")){if(!f.relativePath.startsWith(n)&&d)return;vr(f.relativePath.startsWith(n),`Absolute route path "${f.relativePath}" nested under path "${n}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),f.relativePath=f.relativePath.slice(n.length)}let p=ta([n,f.relativePath]),y=r.concat(f);l.children&&l.children.length>0&&(vr(l.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${p}".`),Y2(l.children,t,y,p,d)),!(l.path==null&&!l.index)&&t.push({path:p,score:yD(p,l.index),routesMeta:y})};return e.forEach((l,u)=>{var d;if(l.path===""||!((d=l.path)!=null&&d.includes("?")))i(l,u);else for(let m of J2(l.path))i(l,u,!0,m)}),t}function J2(e){let t=e.split("/");if(t.length===0)return[];let[r,...n]=t,s=r.endsWith("?"),i=r.replace(/\?$/,"");if(n.length===0)return s?[i,""]:[i];let l=J2(n.join("/")),u=[];return u.push(...l.map(d=>d===""?i:[i,d].join("/"))),s&&u.push(...l),u.map(d=>e.startsWith("/")&&d===""?"/":d)}function uD(e){e.sort((t,r)=>t.score!==r.score?r.score-t.score:vD(t.routesMeta.map(n=>n.childrenIndex),r.routesMeta.map(n=>n.childrenIndex)))}var dD=/^:[\w-]+$/,fD=3,hD=2,mD=1,pD=10,gD=-2,lj=e=>e==="*";function yD(e,t){let r=e.split("/"),n=r.length;return r.some(lj)&&(n+=gD),t&&(n+=hD),r.filter(s=>!lj(s)).reduce((s,i)=>s+(dD.test(i)?fD:i===""?mD:pD),n)}function vD(e,t){return e.length===t.length&&e.slice(0,-1).every((n,s)=>n===t[s])?e[e.length-1]-t[t.length-1]:0}function xD(e,t,r=!1){let{routesMeta:n}=e,s={},i="/",l=[];for(let u=0;u<n.length;++u){let d=n[u],m=u===n.length-1,f=i==="/"?t:t.slice(i.length)||"/",p=Vf({path:d.relativePath,caseSensitive:d.caseSensitive,end:m},f),y=d.route;if(!p&&m&&r&&!n[n.length-1].route.index&&(p=Vf({path:d.relativePath,caseSensitive:d.caseSensitive,end:!1},f)),!p)return null;Object.assign(s,p.params),l.push({params:s,pathname:ta([i,p.pathname]),pathnameBase:kD(ta([i,p.pathnameBase])),route:y}),p.pathnameBase!=="/"&&(i=ta([i,p.pathnameBase]))}return l}function Vf(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[r,n]=wD(e.path,e.caseSensitive,e.end),s=t.match(r);if(!s)return null;let i=s[0],l=i.replace(/(.)\/+$/,"$1"),u=s.slice(1);return{params:n.reduce((m,{paramName:f,isOptional:p},y)=>{if(f==="*"){let b=u[y]||"";l=i.slice(0,i.length-b.length).replace(/(.)\/+$/,"$1")}const x=u[y];return p&&!x?m[f]=void 0:m[f]=(x||"").replace(/%2F/g,"/"),m},{}),pathname:i,pathnameBase:l,pattern:e}}function wD(e,t=!1,r=!0){Qs(e==="*"||!e.endsWith("*")||e.endsWith("/*"),`Route path "${e}" will be treated as if it were "${e.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${e.replace(/\*$/,"/*")}".`);let n=[],s="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(l,u,d)=>(n.push({paramName:u,isOptional:d!=null}),d?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return e.endsWith("*")?(n.push({paramName:"*"}),s+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?s+="\\/*$":e!==""&&e!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,t?void 0:"i"),n]}function bD(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return Qs(!1,`The URL path "${e}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${t}).`),e}}function ia(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let r=t.endsWith("/")?t.length-1:t.length,n=e.charAt(r);return n&&n!=="/"?null:e.slice(r)||"/"}function jD(e,t="/"){let{pathname:r,search:n="",hash:s=""}=typeof e=="string"?ac(e):e;return{pathname:r?r.startsWith("/")?r:SD(r,t):t,search:ND(n),hash:CD(s)}}function SD(e,t){let r=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(s=>{s===".."?r.length>1&&r.pop():s!=="."&&r.push(s)}),r.length>1?r.join("/"):"/"}function gg(e,t,r,n){return`Cannot include a '${e}' character in a manually specified \`to.${t}\` field [${JSON.stringify(n)}].  Please separate it out to the \`to.${r}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function _D(e){return e.filter((t,r)=>r===0||t.route.path&&t.route.path.length>0)}function R0(e){let t=_D(e);return t.map((r,n)=>n===t.length-1?r.pathname:r.pathnameBase)}function $0(e,t,r,n=!1){let s;typeof e=="string"?s=ac(e):(s={...e},vr(!s.pathname||!s.pathname.includes("?"),gg("?","pathname","search",s)),vr(!s.pathname||!s.pathname.includes("#"),gg("#","pathname","hash",s)),vr(!s.search||!s.search.includes("#"),gg("#","search","hash",s)));let i=e===""||s.pathname==="",l=i?"/":s.pathname,u;if(l==null)u=r;else{let p=t.length-1;if(!n&&l.startsWith("..")){let y=l.split("/");for(;y[0]==="..";)y.shift(),p-=1;s.pathname=y.join("/")}u=p>=0?t[p]:"/"}let d=jD(s,u),m=l&&l!=="/"&&l.endsWith("/"),f=(i||l===".")&&r.endsWith("/");return!d.pathname.endsWith("/")&&(m||f)&&(d.pathname+="/"),d}var ta=e=>e.join("/").replace(/\/\/+/g,"/"),kD=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),ND=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,CD=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function ED(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}var Q2=["POST","PUT","PATCH","DELETE"];new Set(Q2);var AD=["GET",...Q2];new Set(AD);var oc=v.createContext(null);oc.displayName="DataRouter";var Vh=v.createContext(null);Vh.displayName="DataRouterState";v.createContext(!1);var X2=v.createContext({isTransitioning:!1});X2.displayName="ViewTransition";var PD=v.createContext(new Map);PD.displayName="Fetchers";var OD=v.createContext(null);OD.displayName="Await";var bi=v.createContext(null);bi.displayName="Navigation";var Mu=v.createContext(null);Mu.displayName="Location";var Mi=v.createContext({outlet:null,matches:[],isDataRoute:!1});Mi.displayName="Route";var M0=v.createContext(null);M0.displayName="RouteError";function TD(e,{relative:t}={}){vr(lc(),"useHref() may be used only in the context of a <Router> component.");let{basename:r,navigator:n}=v.useContext(bi),{hash:s,pathname:i,search:l}=Fu(e,{relative:t}),u=i;return r!=="/"&&(u=i==="/"?r:ta([r,i])),n.createHref({pathname:u,search:l,hash:s})}function lc(){return v.useContext(Mu)!=null}function ga(){return vr(lc(),"useLocation() may be used only in the context of a <Router> component."),v.useContext(Mu).location}var Z2="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function eC(e){v.useContext(bi).static||v.useLayoutEffect(e)}function $s(){let{isDataRoute:e}=v.useContext(Mi);return e?qD():ID()}function ID(){vr(lc(),"useNavigate() may be used only in the context of a <Router> component.");let e=v.useContext(oc),{basename:t,navigator:r}=v.useContext(bi),{matches:n}=v.useContext(Mi),{pathname:s}=ga(),i=JSON.stringify(R0(n)),l=v.useRef(!1);return eC(()=>{l.current=!0}),v.useCallback((d,m={})=>{if(Qs(l.current,Z2),!l.current)return;if(typeof d=="number"){r.go(d);return}let f=$0(d,JSON.parse(i),s,m.relative==="path");e==null&&t!=="/"&&(f.pathname=f.pathname==="/"?t:ta([t,f.pathname])),(m.replace?r.replace:r.push)(f,m.state,m)},[t,r,i,s,e])}v.createContext(null);function Fu(e,{relative:t}={}){let{matches:r}=v.useContext(Mi),{pathname:n}=ga(),s=JSON.stringify(R0(r));return v.useMemo(()=>$0(e,JSON.parse(s),n,t==="path"),[e,s,n,t])}function DD(e,t){return tC(e,t)}function tC(e,t,r,n,s){var C;vr(lc(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:i}=v.useContext(bi),{matches:l}=v.useContext(Mi),u=l[l.length-1],d=u?u.params:{},m=u?u.pathname:"/",f=u?u.pathnameBase:"/",p=u&&u.route;{let N=p&&p.path||"";rC(m,!p||N.endsWith("*")||N.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${m}" (under <Route path="${N}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${N}"> to <Route path="${N==="/"?"*":`${N}/*`}">.`)}let y=ga(),x;if(t){let N=typeof t=="string"?ac(t):t;vr(f==="/"||((C=N.pathname)==null?void 0:C.startsWith(f)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${f}" but pathname "${N.pathname}" was given in the \`location\` prop.`),x=N}else x=y;let b=x.pathname||"/",j=b;if(f!=="/"){let N=f.replace(/^\//,"").split("/");j="/"+b.replace(/^\//,"").split("/").slice(N.length).join("/")}let S=G2(e,{pathname:j});Qs(p||S!=null,`No routes matched location "${x.pathname}${x.search}${x.hash}" `),Qs(S==null||S[S.length-1].route.element!==void 0||S[S.length-1].route.Component!==void 0||S[S.length-1].route.lazy!==void 0,`Matched leaf route at location "${x.pathname}${x.search}${x.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let k=LD(S&&S.map(N=>Object.assign({},N,{params:Object.assign({},d,N.params),pathname:ta([f,i.encodeLocation?i.encodeLocation(N.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:N.pathname]),pathnameBase:N.pathnameBase==="/"?f:ta([f,i.encodeLocation?i.encodeLocation(N.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:N.pathnameBase])})),l,r,n,s);return t&&k?v.createElement(Mu.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...x},navigationType:"POP"}},k):k}function RD(){let e=VD(),t=ED(e)?`${e.status} ${e.statusText}`:e instanceof Error?e.message:JSON.stringify(e),r=e instanceof Error?e.stack:null,n="rgba(200,200,200, 0.5)",s={padding:"0.5rem",backgroundColor:n},i={padding:"2px 4px",backgroundColor:n},l=null;return console.error("Error handled by React Router default ErrorBoundary:",e),l=v.createElement(v.Fragment,null,v.createElement("p",null," Hey developer "),v.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",v.createElement("code",{style:i},"ErrorBoundary")," or"," ",v.createElement("code",{style:i},"errorElement")," prop on your route.")),v.createElement(v.Fragment,null,v.createElement("h2",null,"Unexpected Application Error!"),v.createElement("h3",{style:{fontStyle:"italic"}},t),r?v.createElement("pre",{style:s},r):null,l)}var $D=v.createElement(RD,null),MD=class extends v.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){this.props.unstable_onError?this.props.unstable_onError(e,t):console.error("React Router caught the following error during render",e)}render(){return this.state.error!==void 0?v.createElement(Mi.Provider,{value:this.props.routeContext},v.createElement(M0.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function FD({routeContext:e,match:t,children:r}){let n=v.useContext(oc);return n&&n.static&&n.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(n.staticContext._deepestRenderedBoundaryId=t.route.id),v.createElement(Mi.Provider,{value:e},r)}function LD(e,t=[],r=null,n=null,s=null){if(e==null){if(!r)return null;if(r.errors)e=r.matches;else if(t.length===0&&!r.initialized&&r.matches.length>0)e=r.matches;else return null}let i=e,l=r==null?void 0:r.errors;if(l!=null){let m=i.findIndex(f=>f.route.id&&(l==null?void 0:l[f.route.id])!==void 0);vr(m>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(l).join(",")}`),i=i.slice(0,Math.min(i.length,m+1))}let u=!1,d=-1;if(r)for(let m=0;m<i.length;m++){let f=i[m];if((f.route.HydrateFallback||f.route.hydrateFallbackElement)&&(d=m),f.route.id){let{loaderData:p,errors:y}=r,x=f.route.loader&&!p.hasOwnProperty(f.route.id)&&(!y||y[f.route.id]===void 0);if(f.route.lazy||x){u=!0,d>=0?i=i.slice(0,d+1):i=[i[0]];break}}}return i.reduceRight((m,f,p)=>{let y,x=!1,b=null,j=null;r&&(y=l&&f.route.id?l[f.route.id]:void 0,b=f.route.errorElement||$D,u&&(d<0&&p===0?(rC("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),x=!0,j=null):d===p&&(x=!0,j=f.route.hydrateFallbackElement||null)));let S=t.concat(i.slice(0,p+1)),k=()=>{let C;return y?C=b:x?C=j:f.route.Component?C=v.createElement(f.route.Component,null):f.route.element?C=f.route.element:C=m,v.createElement(FD,{match:f,routeContext:{outlet:m,matches:S,isDataRoute:r!=null},children:C})};return r&&(f.route.ErrorBoundary||f.route.errorElement||p===0)?v.createElement(MD,{location:r.location,revalidation:r.revalidation,component:b,error:y,children:k(),routeContext:{outlet:null,matches:S,isDataRoute:!0},unstable_onError:n}):k()},null)}function F0(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function zD(e){let t=v.useContext(oc);return vr(t,F0(e)),t}function UD(e){let t=v.useContext(Vh);return vr(t,F0(e)),t}function BD(e){let t=v.useContext(Mi);return vr(t,F0(e)),t}function L0(e){let t=BD(e),r=t.matches[t.matches.length-1];return vr(r.route.id,`${e} can only be used on routes that contain a unique "id"`),r.route.id}function WD(){return L0("useRouteId")}function VD(){var n;let e=v.useContext(M0),t=UD("useRouteError"),r=L0("useRouteError");return e!==void 0?e:(n=t.errors)==null?void 0:n[r]}function qD(){let{router:e}=zD("useNavigate"),t=L0("useNavigate"),r=v.useRef(!1);return eC(()=>{r.current=!0}),v.useCallback(async(s,i={})=>{Qs(r.current,Z2),r.current&&(typeof s=="number"?e.navigate(s):await e.navigate(s,{fromRouteId:t,...i}))},[e,t])}var cj={};function rC(e,t,r){!t&&!cj[e]&&(cj[e]=!0,Qs(!1,r))}v.memo(HD);function HD({routes:e,future:t,state:r,unstable_onError:n}){return tC(e,void 0,r,n,t)}function KD({to:e,replace:t,state:r,relative:n}){vr(lc(),"<Navigate> may be used only in the context of a <Router> component.");let{static:s}=v.useContext(bi);Qs(!s,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:i}=v.useContext(Mi),{pathname:l}=ga(),u=$s(),d=$0(e,R0(i),l,n==="path"),m=JSON.stringify(d);return v.useEffect(()=>{u(JSON.parse(m),{replace:t,state:r,relative:n})},[u,m,n,t,r]),null}function js(e){vr(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function GD({basename:e="/",children:t=null,location:r,navigationType:n="POP",navigator:s,static:i=!1}){vr(!lc(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let l=e.replace(/^\/*/,"/"),u=v.useMemo(()=>({basename:l,navigator:s,static:i,future:{}}),[l,s,i]);typeof r=="string"&&(r=ac(r));let{pathname:d="/",search:m="",hash:f="",state:p=null,key:y="default"}=r,x=v.useMemo(()=>{let b=ia(d,l);return b==null?null:{location:{pathname:b,search:m,hash:f,state:p,key:y},navigationType:n}},[l,d,m,f,p,y,n]);return Qs(x!=null,`<Router basename="${l}"> is not able to match the URL "${d}${m}${f}" because it does not start with the basename, so the <Router> won't render anything.`),x==null?null:v.createElement(bi.Provider,{value:u},v.createElement(Mu.Provider,{children:t,value:x}))}function YD({children:e,location:t}){return DD(yv(e),t)}function yv(e,t=[]){let r=[];return v.Children.forEach(e,(n,s)=>{if(!v.isValidElement(n))return;let i=[...t,s];if(n.type===v.Fragment){r.push.apply(r,yv(n.props.children,i));return}vr(n.type===js,`[${typeof n.type=="string"?n.type:n.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),vr(!n.props.index||!n.props.children,"An index route cannot have child routes.");let l={id:n.props.id||i.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,middleware:n.props.middleware,loader:n.props.loader,action:n.props.action,hydrateFallbackElement:n.props.hydrateFallbackElement,HydrateFallback:n.props.HydrateFallback,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.hasErrorBoundary===!0||n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(l.children=yv(n.props.children,i)),r.push(l)}),r}var Of="get",Tf="application/x-www-form-urlencoded";function qh(e){return e!=null&&typeof e.tagName=="string"}function JD(e){return qh(e)&&e.tagName.toLowerCase()==="button"}function QD(e){return qh(e)&&e.tagName.toLowerCase()==="form"}function XD(e){return qh(e)&&e.tagName.toLowerCase()==="input"}function ZD(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function e3(e,t){return e.button===0&&(!t||t==="_self")&&!ZD(e)}function vv(e=""){return new URLSearchParams(typeof e=="string"||Array.isArray(e)||e instanceof URLSearchParams?e:Object.keys(e).reduce((t,r)=>{let n=e[r];return t.concat(Array.isArray(n)?n.map(s=>[r,s]):[[r,n]])},[]))}function t3(e,t){let r=vv(e);return t&&t.forEach((n,s)=>{r.has(s)||t.getAll(s).forEach(i=>{r.append(s,i)})}),r}var lf=null;function r3(){if(lf===null)try{new FormData(document.createElement("form"),0),lf=!1}catch{lf=!0}return lf}var n3=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function yg(e){return e!=null&&!n3.has(e)?(Qs(!1,`"${e}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Tf}"`),null):e}function s3(e,t){let r,n,s,i,l;if(QD(e)){let u=e.getAttribute("action");n=u?ia(u,t):null,r=e.getAttribute("method")||Of,s=yg(e.getAttribute("enctype"))||Tf,i=new FormData(e)}else if(JD(e)||XD(e)&&(e.type==="submit"||e.type==="image")){let u=e.form;if(u==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let d=e.getAttribute("formaction")||u.getAttribute("action");if(n=d?ia(d,t):null,r=e.getAttribute("formmethod")||u.getAttribute("method")||Of,s=yg(e.getAttribute("formenctype"))||yg(u.getAttribute("enctype"))||Tf,i=new FormData(u,e),!r3()){let{name:m,type:f,value:p}=e;if(f==="image"){let y=m?`${m}.`:"";i.append(`${y}x`,"0"),i.append(`${y}y`,"0")}else m&&i.append(m,p)}}else{if(qh(e))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');r=Of,n=null,s=Tf,l=e}return i&&s==="text/plain"&&(l=i,i=void 0),{action:n,method:r.toLowerCase(),encType:s,formData:i,body:l}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function z0(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function i3(e,t,r){let n=typeof e=="string"?new URL(e,typeof window>"u"?"server://singlefetch/":window.location.origin):e;return n.pathname==="/"?n.pathname=`_root.${r}`:t&&ia(n.pathname,t)==="/"?n.pathname=`${t.replace(/\/$/,"")}/_root.${r}`:n.pathname=`${n.pathname.replace(/\/$/,"")}.${r}`,n}async function a3(e,t){if(e.id in t)return t[e.id];try{let r=await import(e.module);return t[e.id]=r,r}catch(r){return console.error(`Error loading route module \`${e.module}\`, reloading page...`),console.error(r),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function o3(e){return e==null?!1:e.href==null?e.rel==="preload"&&typeof e.imageSrcSet=="string"&&typeof e.imageSizes=="string":typeof e.rel=="string"&&typeof e.href=="string"}async function l3(e,t,r){let n=await Promise.all(e.map(async s=>{let i=t.routes[s.route.id];if(i){let l=await a3(i,r);return l.links?l.links():[]}return[]}));return f3(n.flat(1).filter(o3).filter(s=>s.rel==="stylesheet"||s.rel==="preload").map(s=>s.rel==="stylesheet"?{...s,rel:"prefetch",as:"style"}:{...s,rel:"prefetch"}))}function uj(e,t,r,n,s,i){let l=(d,m)=>r[m]?d.route.id!==r[m].route.id:!0,u=(d,m)=>{var f;return r[m].pathname!==d.pathname||((f=r[m].route.path)==null?void 0:f.endsWith("*"))&&r[m].params["*"]!==d.params["*"]};return i==="assets"?t.filter((d,m)=>l(d,m)||u(d,m)):i==="data"?t.filter((d,m)=>{var p;let f=n.routes[d.route.id];if(!f||!f.hasLoader)return!1;if(l(d,m)||u(d,m))return!0;if(d.route.shouldRevalidate){let y=d.route.shouldRevalidate({currentUrl:new URL(s.pathname+s.search+s.hash,window.origin),currentParams:((p=r[0])==null?void 0:p.params)||{},nextUrl:new URL(e,window.origin),nextParams:d.params,defaultShouldRevalidate:!0});if(typeof y=="boolean")return y}return!0}):[]}function c3(e,t,{includeHydrateFallback:r}={}){return u3(e.map(n=>{let s=t.routes[n.route.id];if(!s)return[];let i=[s.module];return s.clientActionModule&&(i=i.concat(s.clientActionModule)),s.clientLoaderModule&&(i=i.concat(s.clientLoaderModule)),r&&s.hydrateFallbackModule&&(i=i.concat(s.hydrateFallbackModule)),s.imports&&(i=i.concat(s.imports)),i}).flat(1))}function u3(e){return[...new Set(e)]}function d3(e){let t={},r=Object.keys(e).sort();for(let n of r)t[n]=e[n];return t}function f3(e,t){let r=new Set;return new Set(t),e.reduce((n,s)=>{let i=JSON.stringify(d3(s));return r.has(i)||(r.add(i),n.push({key:i,link:s})),n},[])}function nC(){let e=v.useContext(oc);return z0(e,"You must render this element inside a <DataRouterContext.Provider> element"),e}function h3(){let e=v.useContext(Vh);return z0(e,"You must render this element inside a <DataRouterStateContext.Provider> element"),e}var U0=v.createContext(void 0);U0.displayName="FrameworkContext";function sC(){let e=v.useContext(U0);return z0(e,"You must render this element inside a <HydratedRouter> element"),e}function m3(e,t){let r=v.useContext(U0),[n,s]=v.useState(!1),[i,l]=v.useState(!1),{onFocus:u,onBlur:d,onMouseEnter:m,onMouseLeave:f,onTouchStart:p}=t,y=v.useRef(null);v.useEffect(()=>{if(e==="render"&&l(!0),e==="viewport"){let j=k=>{k.forEach(C=>{l(C.isIntersecting)})},S=new IntersectionObserver(j,{threshold:.5});return y.current&&S.observe(y.current),()=>{S.disconnect()}}},[e]),v.useEffect(()=>{if(n){let j=setTimeout(()=>{l(!0)},100);return()=>{clearTimeout(j)}}},[n]);let x=()=>{s(!0)},b=()=>{s(!1),l(!1)};return r?e!=="intent"?[i,y,{}]:[i,y,{onFocus:Xc(u,x),onBlur:Xc(d,b),onMouseEnter:Xc(m,x),onMouseLeave:Xc(f,b),onTouchStart:Xc(p,x)}]:[!1,y,{}]}function Xc(e,t){return r=>{e&&e(r),r.defaultPrevented||t(r)}}function p3({page:e,...t}){let{router:r}=nC(),n=v.useMemo(()=>G2(r.routes,e,r.basename),[r.routes,e,r.basename]);return n?v.createElement(y3,{page:e,matches:n,...t}):null}function g3(e){let{manifest:t,routeModules:r}=sC(),[n,s]=v.useState([]);return v.useEffect(()=>{let i=!1;return l3(e,t,r).then(l=>{i||s(l)}),()=>{i=!0}},[e,t,r]),n}function y3({page:e,matches:t,...r}){let n=ga(),{manifest:s,routeModules:i}=sC(),{basename:l}=nC(),{loaderData:u,matches:d}=h3(),m=v.useMemo(()=>uj(e,t,d,s,n,"data"),[e,t,d,s,n]),f=v.useMemo(()=>uj(e,t,d,s,n,"assets"),[e,t,d,s,n]),p=v.useMemo(()=>{if(e===n.pathname+n.search+n.hash)return[];let b=new Set,j=!1;if(t.forEach(k=>{var N;let C=s.routes[k.route.id];!C||!C.hasLoader||(!m.some(O=>O.route.id===k.route.id)&&k.route.id in u&&((N=i[k.route.id])!=null&&N.shouldRevalidate)||C.hasClientLoader?j=!0:b.add(k.route.id))}),b.size===0)return[];let S=i3(e,l,"data");return j&&b.size>0&&S.searchParams.set("_routes",t.filter(k=>b.has(k.route.id)).map(k=>k.route.id).join(",")),[S.pathname+S.search]},[l,u,n,s,m,t,e,i]),y=v.useMemo(()=>c3(f,s),[f,s]),x=g3(f);return v.createElement(v.Fragment,null,p.map(b=>v.createElement("link",{key:b,rel:"prefetch",as:"fetch",href:b,...r})),y.map(b=>v.createElement("link",{key:b,rel:"modulepreload",href:b,...r})),x.map(({key:b,link:j})=>v.createElement("link",{key:b,nonce:r.nonce,...j})))}function v3(...e){return t=>{e.forEach(r=>{typeof r=="function"?r(t):r!=null&&(r.current=t)})}}var iC=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{iC&&(window.__reactRouterVersion="7.9.4")}catch{}function x3({basename:e,children:t,window:r}){let n=v.useRef();n.current==null&&(n.current=iD({window:r,v5Compat:!0}));let s=n.current,[i,l]=v.useState({action:s.action,location:s.location}),u=v.useCallback(d=>{v.startTransition(()=>l(d))},[l]);return v.useLayoutEffect(()=>s.listen(u),[s,u]),v.createElement(GD,{basename:e,children:t,location:i.location,navigationType:i.action,navigator:s})}var aC=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,oC=v.forwardRef(function({onClick:t,discover:r="render",prefetch:n="none",relative:s,reloadDocument:i,replace:l,state:u,target:d,to:m,preventScrollReset:f,viewTransition:p,...y},x){let{basename:b}=v.useContext(bi),j=typeof m=="string"&&aC.test(m),S,k=!1;if(typeof m=="string"&&j&&(S=m,iC))try{let F=new URL(window.location.href),K=m.startsWith("//")?new URL(F.protocol+m):new URL(m),B=ia(K.pathname,b);K.origin===F.origin&&B!=null?m=B+K.search+K.hash:k=!0}catch{Qs(!1,`<Link to="${m}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let C=TD(m,{relative:s}),[N,O,P]=m3(n,y),T=S3(m,{replace:l,state:u,target:d,preventScrollReset:f,relative:s,viewTransition:p});function D(F){t&&t(F),F.defaultPrevented||T(F)}let q=v.createElement("a",{...y,...P,href:S||C,onClick:k||i?t:D,ref:v3(x,O),target:d,"data-discover":!j&&r==="render"?"true":void 0});return N&&!j?v.createElement(v.Fragment,null,q,v.createElement(p3,{page:C})):q});oC.displayName="Link";var w3=v.forwardRef(function({"aria-current":t="page",caseSensitive:r=!1,className:n="",end:s=!1,style:i,to:l,viewTransition:u,children:d,...m},f){let p=Fu(l,{relative:m.relative}),y=ga(),x=v.useContext(Vh),{navigator:b,basename:j}=v.useContext(bi),S=x!=null&&E3(p)&&u===!0,k=b.encodeLocation?b.encodeLocation(p).pathname:p.pathname,C=y.pathname,N=x&&x.navigation&&x.navigation.location?x.navigation.location.pathname:null;r||(C=C.toLowerCase(),N=N?N.toLowerCase():null,k=k.toLowerCase()),N&&j&&(N=ia(N,j)||N);const O=k!=="/"&&k.endsWith("/")?k.length-1:k.length;let P=C===k||!s&&C.startsWith(k)&&C.charAt(O)==="/",T=N!=null&&(N===k||!s&&N.startsWith(k)&&N.charAt(k.length)==="/"),D={isActive:P,isPending:T,isTransitioning:S},q=P?t:void 0,F;typeof n=="function"?F=n(D):F=[n,P?"active":null,T?"pending":null,S?"transitioning":null].filter(Boolean).join(" ");let K=typeof i=="function"?i(D):i;return v.createElement(oC,{...m,"aria-current":q,className:F,ref:f,style:K,to:l,viewTransition:u},typeof d=="function"?d(D):d)});w3.displayName="NavLink";var b3=v.forwardRef(({discover:e="render",fetcherKey:t,navigate:r,reloadDocument:n,replace:s,state:i,method:l=Of,action:u,onSubmit:d,relative:m,preventScrollReset:f,viewTransition:p,...y},x)=>{let b=N3(),j=C3(u,{relative:m}),S=l.toLowerCase()==="get"?"get":"post",k=typeof u=="string"&&aC.test(u),C=N=>{if(d&&d(N),N.defaultPrevented)return;N.preventDefault();let O=N.nativeEvent.submitter,P=(O==null?void 0:O.getAttribute("formmethod"))||l;b(O||N.currentTarget,{fetcherKey:t,method:P,navigate:r,replace:s,state:i,relative:m,preventScrollReset:f,viewTransition:p})};return v.createElement("form",{ref:x,method:S,action:j,onSubmit:n?d:C,...y,"data-discover":!k&&e==="render"?"true":void 0})});b3.displayName="Form";function j3(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function lC(e){let t=v.useContext(oc);return vr(t,j3(e)),t}function S3(e,{target:t,replace:r,state:n,preventScrollReset:s,relative:i,viewTransition:l}={}){let u=$s(),d=ga(),m=Fu(e,{relative:i});return v.useCallback(f=>{if(e3(f,t)){f.preventDefault();let p=r!==void 0?r:wu(d)===wu(m);u(e,{replace:p,state:n,preventScrollReset:s,relative:i,viewTransition:l})}},[d,u,m,r,n,t,e,s,i,l])}function cC(e){Qs(typeof URLSearchParams<"u","You cannot use the `useSearchParams` hook in a browser that does not support the URLSearchParams API. If you need to support Internet Explorer 11, we recommend you load a polyfill such as https://github.com/ungap/url-search-params.");let t=v.useRef(vv(e)),r=v.useRef(!1),n=ga(),s=v.useMemo(()=>t3(n.search,r.current?null:t.current),[n.search]),i=$s(),l=v.useCallback((u,d)=>{const m=vv(typeof u=="function"?u(new URLSearchParams(s)):u);r.current=!0,i("?"+m,d)},[i,s]);return[s,l]}var _3=0,k3=()=>`__${String(++_3)}__`;function N3(){let{router:e}=lC("useSubmit"),{basename:t}=v.useContext(bi),r=WD();return v.useCallback(async(n,s={})=>{let{action:i,method:l,encType:u,formData:d,body:m}=s3(n,t);if(s.navigate===!1){let f=s.fetcherKey||k3();await e.fetch(f,r,s.action||i,{preventScrollReset:s.preventScrollReset,formData:d,body:m,formMethod:s.method||l,formEncType:s.encType||u,flushSync:s.flushSync})}else await e.navigate(s.action||i,{preventScrollReset:s.preventScrollReset,formData:d,body:m,formMethod:s.method||l,formEncType:s.encType||u,replace:s.replace,state:s.state,fromRouteId:r,flushSync:s.flushSync,viewTransition:s.viewTransition})},[e,t,r])}function C3(e,{relative:t}={}){let{basename:r}=v.useContext(bi),n=v.useContext(Mi);vr(n,"useFormAction must be used inside a RouteContext");let[s]=n.matches.slice(-1),i={...Fu(e||".",{relative:t})},l=ga();if(e==null){i.search=l.search;let u=new URLSearchParams(i.search),d=u.getAll("index");if(d.some(f=>f==="")){u.delete("index"),d.filter(p=>p).forEach(p=>u.append("index",p));let f=u.toString();i.search=f?`?${f}`:""}}return(!e||e===".")&&s.route.index&&(i.search=i.search?i.search.replace(/^\?/,"?index&"):"?index"),r!=="/"&&(i.pathname=i.pathname==="/"?r:ta([r,i.pathname])),wu(i)}function E3(e,{relative:t}={}){let r=v.useContext(X2);vr(r!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:n}=lC("useViewTransitionState"),s=Fu(e,{relative:t});if(!r.isTransitioning)return!1;let i=ia(r.currentLocation.pathname,n)||r.currentLocation.pathname,l=ia(r.nextLocation.pathname,n)||r.nextLocation.pathname;return Vf(s.pathname,l)!=null||Vf(s.pathname,i)!=null}var uC=K2();const A3="modulepreload",P3=function(e,t){return new URL(e,t).href},dj={},Lu=function(t,r,n){let s=Promise.resolve();if(r&&r.length>0){let l=function(f){return Promise.all(f.map(p=>Promise.resolve(p).then(y=>({status:"fulfilled",value:y}),y=>({status:"rejected",reason:y}))))};const u=document.getElementsByTagName("link"),d=document.querySelector("meta[property=csp-nonce]"),m=(d==null?void 0:d.nonce)||(d==null?void 0:d.getAttribute("nonce"));s=l(r.map(f=>{if(f=P3(f,n),f in dj)return;dj[f]=!0;const p=f.endsWith(".css"),y=p?'[rel="stylesheet"]':"";if(!!n)for(let j=u.length-1;j>=0;j--){const S=u[j];if(S.href===f&&(!p||S.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${f}"]${y}`))return;const b=document.createElement("link");if(b.rel=p?"stylesheet":A3,p||(b.as="script"),b.crossOrigin="",b.href=f,m&&b.setAttribute("nonce",m),document.head.appendChild(b),p)return new Promise((j,S)=>{b.addEventListener("load",j),b.addEventListener("error",()=>S(new Error(`Unable to preload CSS for ${f}`)))})}))}function i(l){const u=new Event("vite:preloadError",{cancelable:!0});if(u.payload=l,window.dispatchEvent(u),!u.defaultPrevented)throw l}return s.then(l=>{for(const u of l||[])u.status==="rejected"&&i(u.reason);return t().catch(i)})},O3=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...r)=>Lu(async()=>{const{default:n}=await Promise.resolve().then(()=>cc);return{default:n}},[],import.meta.url).then(({default:n})=>n(...r)):t=fetch,(...r)=>t(...r)};class B0 extends Error{constructor(t,r="FunctionsError",n){super(t),this.name=r,this.context=n}}class fj extends B0{constructor(t){super("Failed to send a request to the Edge Function","FunctionsFetchError",t)}}class hj extends B0{constructor(t){super("Relay Error invoking the Edge Function","FunctionsRelayError",t)}}class mj extends B0{constructor(t){super("Edge Function returned a non-2xx status code","FunctionsHttpError",t)}}var xv;(function(e){e.Any="any",e.ApNortheast1="ap-northeast-1",e.ApNortheast2="ap-northeast-2",e.ApSouth1="ap-south-1",e.ApSoutheast1="ap-southeast-1",e.ApSoutheast2="ap-southeast-2",e.CaCentral1="ca-central-1",e.EuCentral1="eu-central-1",e.EuWest1="eu-west-1",e.EuWest2="eu-west-2",e.EuWest3="eu-west-3",e.SaEast1="sa-east-1",e.UsEast1="us-east-1",e.UsWest1="us-west-1",e.UsWest2="us-west-2"})(xv||(xv={}));var T3=function(e,t,r,n){function s(i){return i instanceof r?i:new r(function(l){l(i)})}return new(r||(r=Promise))(function(i,l){function u(f){try{m(n.next(f))}catch(p){l(p)}}function d(f){try{m(n.throw(f))}catch(p){l(p)}}function m(f){f.done?i(f.value):s(f.value).then(u,d)}m((n=n.apply(e,t||[])).next())})};class I3{constructor(t,{headers:r={},customFetch:n,region:s=xv.Any}={}){this.url=t,this.headers=r,this.region=s,this.fetch=O3(n)}setAuth(t){this.headers.Authorization=`Bearer ${t}`}invoke(t){return T3(this,arguments,void 0,function*(r,n={}){var s;try{const{headers:i,method:l,body:u,signal:d}=n;let m={},{region:f}=n;f||(f=this.region);const p=new URL(`${this.url}/${r}`);f&&f!=="any"&&(m["x-region"]=f,p.searchParams.set("forceFunctionRegion",f));let y;u&&(i&&!Object.prototype.hasOwnProperty.call(i,"Content-Type")||!i)&&(typeof Blob<"u"&&u instanceof Blob||u instanceof ArrayBuffer?(m["Content-Type"]="application/octet-stream",y=u):typeof u=="string"?(m["Content-Type"]="text/plain",y=u):typeof FormData<"u"&&u instanceof FormData?y=u:(m["Content-Type"]="application/json",y=JSON.stringify(u)));const x=yield this.fetch(p.toString(),{method:l||"POST",headers:Object.assign(Object.assign(Object.assign({},m),this.headers),i),body:y,signal:d}).catch(k=>{throw k.name==="AbortError"?k:new fj(k)}),b=x.headers.get("x-relay-error");if(b&&b==="true")throw new hj(x);if(!x.ok)throw new mj(x);let j=((s=x.headers.get("Content-Type"))!==null&&s!==void 0?s:"text/plain").split(";")[0].trim(),S;return j==="application/json"?S=yield x.json():j==="application/octet-stream"?S=yield x.blob():j==="text/event-stream"?S=x:j==="multipart/form-data"?S=yield x.formData():S=yield x.text(),{data:S,error:null,response:x}}catch(i){return i instanceof Error&&i.name==="AbortError"?{data:null,error:new fj(i)}:{data:null,error:i,response:i instanceof mj||i instanceof hj?i.context:void 0}}})}}var gn={},yl={},vl={},xl={},wl={},bl={},D3=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},Yl=D3();const R3=Yl.fetch,dC=Yl.fetch.bind(Yl),fC=Yl.Headers,$3=Yl.Request,M3=Yl.Response,cc=Object.freeze(Object.defineProperty({__proto__:null,Headers:fC,Request:$3,Response:M3,default:dC,fetch:R3},Symbol.toStringTag,{value:"Module"})),F3=GI(cc);var cf={},pj;function hC(){if(pj)return cf;pj=1,Object.defineProperty(cf,"__esModule",{value:!0});class e extends Error{constructor(r){super(r.message),this.name="PostgrestError",this.details=r.details,this.hint=r.hint,this.code=r.code}}return cf.default=e,cf}var gj;function mC(){if(gj)return bl;gj=1;var e=bl&&bl.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(bl,"__esModule",{value:!0});const t=e(F3),r=e(hC());class n{constructor(i){var l,u;this.shouldThrowOnError=!1,this.method=i.method,this.url=i.url,this.headers=new Headers(i.headers),this.schema=i.schema,this.body=i.body,this.shouldThrowOnError=(l=i.shouldThrowOnError)!==null&&l!==void 0?l:!1,this.signal=i.signal,this.isMaybeSingle=(u=i.isMaybeSingle)!==null&&u!==void 0?u:!1,i.fetch?this.fetch=i.fetch:typeof fetch>"u"?this.fetch=t.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(i,l){return this.headers=new Headers(this.headers),this.headers.set(i,l),this}then(i,l){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const u=this.fetch;let d=u(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async m=>{var f,p,y,x;let b=null,j=null,S=null,k=m.status,C=m.statusText;if(m.ok){if(this.method!=="HEAD"){const T=await m.text();T===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((f=this.headers.get("Accept"))===null||f===void 0)&&f.includes("application/vnd.pgrst.plan+text"))?j=T:j=JSON.parse(T))}const O=(p=this.headers.get("Prefer"))===null||p===void 0?void 0:p.match(/count=(exact|planned|estimated)/),P=(y=m.headers.get("content-range"))===null||y===void 0?void 0:y.split("/");O&&P&&P.length>1&&(S=parseInt(P[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(j)&&(j.length>1?(b={code:"PGRST116",details:`Results contain ${j.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},j=null,S=null,k=406,C="Not Acceptable"):j.length===1?j=j[0]:j=null)}else{const O=await m.text();try{b=JSON.parse(O),Array.isArray(b)&&m.status===404&&(j=[],b=null,k=200,C="OK")}catch{m.status===404&&O===""?(k=204,C="No Content"):b={message:O}}if(b&&this.isMaybeSingle&&(!((x=b==null?void 0:b.details)===null||x===void 0)&&x.includes("0 rows"))&&(b=null,k=200,C="OK"),b&&this.shouldThrowOnError)throw new r.default(b)}return{error:b,data:j,count:S,status:k,statusText:C}});return this.shouldThrowOnError||(d=d.catch(m=>{var f,p,y;return{error:{message:`${(f=m==null?void 0:m.name)!==null&&f!==void 0?f:"FetchError"}: ${m==null?void 0:m.message}`,details:`${(p=m==null?void 0:m.stack)!==null&&p!==void 0?p:""}`,hint:"",code:`${(y=m==null?void 0:m.code)!==null&&y!==void 0?y:""}`},data:null,count:null,status:0,statusText:""}})),d.then(i,l)}returns(){return this}overrideTypes(){return this}}return bl.default=n,bl}var yj;function pC(){if(yj)return wl;yj=1;var e=wl&&wl.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(wl,"__esModule",{value:!0});const t=e(mC());class r extends t.default{select(s){let i=!1;const l=(s??"*").split("").map(u=>/\s/.test(u)&&!i?"":(u==='"'&&(i=!i),u)).join("");return this.url.searchParams.set("select",l),this.headers.append("Prefer","return=representation"),this}order(s,{ascending:i=!0,nullsFirst:l,foreignTable:u,referencedTable:d=u}={}){const m=d?`${d}.order`:"order",f=this.url.searchParams.get(m);return this.url.searchParams.set(m,`${f?`${f},`:""}${s}.${i?"asc":"desc"}${l===void 0?"":l?".nullsfirst":".nullslast"}`),this}limit(s,{foreignTable:i,referencedTable:l=i}={}){const u=typeof l>"u"?"limit":`${l}.limit`;return this.url.searchParams.set(u,`${s}`),this}range(s,i,{foreignTable:l,referencedTable:u=l}={}){const d=typeof u>"u"?"offset":`${u}.offset`,m=typeof u>"u"?"limit":`${u}.limit`;return this.url.searchParams.set(d,`${s}`),this.url.searchParams.set(m,`${i-s+1}`),this}abortSignal(s){return this.signal=s,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:s=!1,verbose:i=!1,settings:l=!1,buffers:u=!1,wal:d=!1,format:m="text"}={}){var f;const p=[s?"analyze":null,i?"verbose":null,l?"settings":null,u?"buffers":null,d?"wal":null].filter(Boolean).join("|"),y=(f=this.headers.get("Accept"))!==null&&f!==void 0?f:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${m}; for="${y}"; options=${p};`),m==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(s){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${s}`),this}}return wl.default=r,wl}var vj;function W0(){if(vj)return xl;vj=1;var e=xl&&xl.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(xl,"__esModule",{value:!0});const t=e(pC());class r extends t.default{eq(s,i){return this.url.searchParams.append(s,`eq.${i}`),this}neq(s,i){return this.url.searchParams.append(s,`neq.${i}`),this}gt(s,i){return this.url.searchParams.append(s,`gt.${i}`),this}gte(s,i){return this.url.searchParams.append(s,`gte.${i}`),this}lt(s,i){return this.url.searchParams.append(s,`lt.${i}`),this}lte(s,i){return this.url.searchParams.append(s,`lte.${i}`),this}like(s,i){return this.url.searchParams.append(s,`like.${i}`),this}likeAllOf(s,i){return this.url.searchParams.append(s,`like(all).{${i.join(",")}}`),this}likeAnyOf(s,i){return this.url.searchParams.append(s,`like(any).{${i.join(",")}}`),this}ilike(s,i){return this.url.searchParams.append(s,`ilike.${i}`),this}ilikeAllOf(s,i){return this.url.searchParams.append(s,`ilike(all).{${i.join(",")}}`),this}ilikeAnyOf(s,i){return this.url.searchParams.append(s,`ilike(any).{${i.join(",")}}`),this}is(s,i){return this.url.searchParams.append(s,`is.${i}`),this}in(s,i){const l=Array.from(new Set(i)).map(u=>typeof u=="string"&&new RegExp("[,()]").test(u)?`"${u}"`:`${u}`).join(",");return this.url.searchParams.append(s,`in.(${l})`),this}contains(s,i){return typeof i=="string"?this.url.searchParams.append(s,`cs.${i}`):Array.isArray(i)?this.url.searchParams.append(s,`cs.{${i.join(",")}}`):this.url.searchParams.append(s,`cs.${JSON.stringify(i)}`),this}containedBy(s,i){return typeof i=="string"?this.url.searchParams.append(s,`cd.${i}`):Array.isArray(i)?this.url.searchParams.append(s,`cd.{${i.join(",")}}`):this.url.searchParams.append(s,`cd.${JSON.stringify(i)}`),this}rangeGt(s,i){return this.url.searchParams.append(s,`sr.${i}`),this}rangeGte(s,i){return this.url.searchParams.append(s,`nxl.${i}`),this}rangeLt(s,i){return this.url.searchParams.append(s,`sl.${i}`),this}rangeLte(s,i){return this.url.searchParams.append(s,`nxr.${i}`),this}rangeAdjacent(s,i){return this.url.searchParams.append(s,`adj.${i}`),this}overlaps(s,i){return typeof i=="string"?this.url.searchParams.append(s,`ov.${i}`):this.url.searchParams.append(s,`ov.{${i.join(",")}}`),this}textSearch(s,i,{config:l,type:u}={}){let d="";u==="plain"?d="pl":u==="phrase"?d="ph":u==="websearch"&&(d="w");const m=l===void 0?"":`(${l})`;return this.url.searchParams.append(s,`${d}fts${m}.${i}`),this}match(s){return Object.entries(s).forEach(([i,l])=>{this.url.searchParams.append(i,`eq.${l}`)}),this}not(s,i,l){return this.url.searchParams.append(s,`not.${i}.${l}`),this}or(s,{foreignTable:i,referencedTable:l=i}={}){const u=l?`${l}.or`:"or";return this.url.searchParams.append(u,`(${s})`),this}filter(s,i,l){return this.url.searchParams.append(s,`${i}.${l}`),this}}return xl.default=r,xl}var xj;function gC(){if(xj)return vl;xj=1;var e=vl&&vl.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(vl,"__esModule",{value:!0});const t=e(W0());class r{constructor(s,{headers:i={},schema:l,fetch:u}){this.url=s,this.headers=new Headers(i),this.schema=l,this.fetch=u}select(s,i){const{head:l=!1,count:u}=i??{},d=l?"HEAD":"GET";let m=!1;const f=(s??"*").split("").map(p=>/\s/.test(p)&&!m?"":(p==='"'&&(m=!m),p)).join("");return this.url.searchParams.set("select",f),u&&this.headers.append("Prefer",`count=${u}`),new t.default({method:d,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(s,{count:i,defaultToNull:l=!0}={}){var u;const d="POST";if(i&&this.headers.append("Prefer",`count=${i}`),l||this.headers.append("Prefer","missing=default"),Array.isArray(s)){const m=s.reduce((f,p)=>f.concat(Object.keys(p)),[]);if(m.length>0){const f=[...new Set(m)].map(p=>`"${p}"`);this.url.searchParams.set("columns",f.join(","))}}return new t.default({method:d,url:this.url,headers:this.headers,schema:this.schema,body:s,fetch:(u=this.fetch)!==null&&u!==void 0?u:fetch})}upsert(s,{onConflict:i,ignoreDuplicates:l=!1,count:u,defaultToNull:d=!0}={}){var m;const f="POST";if(this.headers.append("Prefer",`resolution=${l?"ignore":"merge"}-duplicates`),i!==void 0&&this.url.searchParams.set("on_conflict",i),u&&this.headers.append("Prefer",`count=${u}`),d||this.headers.append("Prefer","missing=default"),Array.isArray(s)){const p=s.reduce((y,x)=>y.concat(Object.keys(x)),[]);if(p.length>0){const y=[...new Set(p)].map(x=>`"${x}"`);this.url.searchParams.set("columns",y.join(","))}}return new t.default({method:f,url:this.url,headers:this.headers,schema:this.schema,body:s,fetch:(m=this.fetch)!==null&&m!==void 0?m:fetch})}update(s,{count:i}={}){var l;const u="PATCH";return i&&this.headers.append("Prefer",`count=${i}`),new t.default({method:u,url:this.url,headers:this.headers,schema:this.schema,body:s,fetch:(l=this.fetch)!==null&&l!==void 0?l:fetch})}delete({count:s}={}){var i;const l="DELETE";return s&&this.headers.append("Prefer",`count=${s}`),new t.default({method:l,url:this.url,headers:this.headers,schema:this.schema,fetch:(i=this.fetch)!==null&&i!==void 0?i:fetch})}}return vl.default=r,vl}var wj;function L3(){if(wj)return yl;wj=1;var e=yl&&yl.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(yl,"__esModule",{value:!0});const t=e(gC()),r=e(W0());class n{constructor(i,{headers:l={},schema:u,fetch:d}={}){this.url=i,this.headers=new Headers(l),this.schemaName=u,this.fetch=d}from(i){const l=new URL(`${this.url}/${i}`);return new t.default(l,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(i){return new n(this.url,{headers:this.headers,schema:i,fetch:this.fetch})}rpc(i,l={},{head:u=!1,get:d=!1,count:m}={}){var f;let p;const y=new URL(`${this.url}/rpc/${i}`);let x;u||d?(p=u?"HEAD":"GET",Object.entries(l).filter(([j,S])=>S!==void 0).map(([j,S])=>[j,Array.isArray(S)?`{${S.join(",")}}`:`${S}`]).forEach(([j,S])=>{y.searchParams.append(j,S)})):(p="POST",x=l);const b=new Headers(this.headers);return m&&b.set("Prefer",`count=${m}`),new r.default({method:p,url:y,headers:b,schema:this.schemaName,body:x,fetch:(f=this.fetch)!==null&&f!==void 0?f:fetch})}}return yl.default=n,yl}var bj;function z3(){if(bj)return gn;bj=1;var e=gn&&gn.__importDefault||function(u){return u&&u.__esModule?u:{default:u}};Object.defineProperty(gn,"__esModule",{value:!0}),gn.PostgrestError=gn.PostgrestBuilder=gn.PostgrestTransformBuilder=gn.PostgrestFilterBuilder=gn.PostgrestQueryBuilder=gn.PostgrestClient=void 0;const t=e(L3());gn.PostgrestClient=t.default;const r=e(gC());gn.PostgrestQueryBuilder=r.default;const n=e(W0());gn.PostgrestFilterBuilder=n.default;const s=e(pC());gn.PostgrestTransformBuilder=s.default;const i=e(mC());gn.PostgrestBuilder=i.default;const l=e(hC());return gn.PostgrestError=l.default,gn.default={PostgrestClient:t.default,PostgrestQueryBuilder:r.default,PostgrestFilterBuilder:n.default,PostgrestTransformBuilder:s.default,PostgrestBuilder:i.default,PostgrestError:l.default},gn}var U3=z3();const B3=wi(U3),{PostgrestClient:W3,PostgrestQueryBuilder:$Z,PostgrestFilterBuilder:MZ,PostgrestTransformBuilder:FZ,PostgrestBuilder:LZ,PostgrestError:zZ}=B3;class V3{static detectEnvironment(){var t;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((t=navigator.userAgent)===null||t===void 0)&&t.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const r=process.versions;if(r&&r.node){const n=r.node,s=parseInt(n.replace(/^v/,"").split(".")[0]);return s>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${s} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${s} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const t=this.detectEnvironment();if(t.constructor)return t.constructor;let r=t.error||"WebSocket not supported in this environment.";throw t.workaround&&(r+=`

Suggested solution: ${t.workaround}`),new Error(r)}static createWebSocket(t,r){const n=this.getWebSocketConstructor();return new n(t,r)}static isWebSocketSupported(){try{const t=this.detectEnvironment();return t.type==="native"||t.type==="ws"}catch{return!1}}}const q3="2.74.0",H3=`realtime-js/${q3}`,K3="1.0.0",wv=1e4,G3=1e3,Y3=100;var mu;(function(e){e[e.connecting=0]="connecting",e[e.open=1]="open",e[e.closing=2]="closing",e[e.closed=3]="closed"})(mu||(mu={}));var en;(function(e){e.closed="closed",e.errored="errored",e.joined="joined",e.joining="joining",e.leaving="leaving"})(en||(en={}));var ui;(function(e){e.close="phx_close",e.error="phx_error",e.join="phx_join",e.reply="phx_reply",e.leave="phx_leave",e.access_token="access_token"})(ui||(ui={}));var bv;(function(e){e.websocket="websocket"})(bv||(bv={}));var So;(function(e){e.Connecting="connecting",e.Open="open",e.Closing="closing",e.Closed="closed"})(So||(So={}));class J3{constructor(){this.HEADER_LENGTH=1}decode(t,r){return t.constructor===ArrayBuffer?r(this._binaryDecode(t)):r(typeof t=="string"?JSON.parse(t):{})}_binaryDecode(t){const r=new DataView(t),n=new TextDecoder;return this._decodeBroadcast(t,r,n)}_decodeBroadcast(t,r,n){const s=r.getUint8(1),i=r.getUint8(2);let l=this.HEADER_LENGTH+2;const u=n.decode(t.slice(l,l+s));l=l+s;const d=n.decode(t.slice(l,l+i));l=l+i;const m=JSON.parse(n.decode(t.slice(l,t.byteLength)));return{ref:null,topic:u,event:d,payload:m}}}class yC{constructor(t,r){this.callback=t,this.timerCalc=r,this.timer=void 0,this.tries=0,this.callback=t,this.timerCalc=r}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var rr;(function(e){e.abstime="abstime",e.bool="bool",e.date="date",e.daterange="daterange",e.float4="float4",e.float8="float8",e.int2="int2",e.int4="int4",e.int4range="int4range",e.int8="int8",e.int8range="int8range",e.json="json",e.jsonb="jsonb",e.money="money",e.numeric="numeric",e.oid="oid",e.reltime="reltime",e.text="text",e.time="time",e.timestamp="timestamp",e.timestamptz="timestamptz",e.timetz="timetz",e.tsrange="tsrange",e.tstzrange="tstzrange"})(rr||(rr={}));const jj=(e,t,r={})=>{var n;const s=(n=r.skipTypes)!==null&&n!==void 0?n:[];return t?Object.keys(t).reduce((i,l)=>(i[l]=Q3(l,e,t,s),i),{}):{}},Q3=(e,t,r,n)=>{const s=t.find(u=>u.name===e),i=s==null?void 0:s.type,l=r[e];return i&&!n.includes(i)?vC(i,l):jv(l)},vC=(e,t)=>{if(e.charAt(0)==="_"){const r=e.slice(1,e.length);return tR(t,r)}switch(e){case rr.bool:return X3(t);case rr.float4:case rr.float8:case rr.int2:case rr.int4:case rr.int8:case rr.numeric:case rr.oid:return Z3(t);case rr.json:case rr.jsonb:return eR(t);case rr.timestamp:return rR(t);case rr.abstime:case rr.date:case rr.daterange:case rr.int4range:case rr.int8range:case rr.money:case rr.reltime:case rr.text:case rr.time:case rr.timestamptz:case rr.timetz:case rr.tsrange:case rr.tstzrange:return jv(t);default:return jv(t)}},jv=e=>e,X3=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},Z3=e=>{if(typeof e=="string"){const t=parseFloat(e);if(!Number.isNaN(t))return t}return e},eR=e=>{if(typeof e=="string")try{return JSON.parse(e)}catch(t){return console.log(`JSON parse error: ${t}`),e}return e},tR=(e,t)=>{if(typeof e!="string")return e;const r=e.length-1,n=e[r];if(e[0]==="{"&&n==="}"){let i;const l=e.slice(1,r);try{i=JSON.parse("["+l+"]")}catch{i=l?l.split(","):[]}return i.map(u=>vC(t,u))}return e},rR=e=>typeof e=="string"?e.replace(" ","T"):e,xC=e=>{let t=e;return t=t.replace(/^ws/i,"http"),t=t.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),t.replace(/\/+$/,"")+"/api/broadcast"};class vg{constructor(t,r,n={},s=wv){this.channel=t,this.event=r,this.payload=n,this.timeout=s,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(t){this.timeout=t,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(t){this.payload=Object.assign(Object.assign({},this.payload),t)}receive(t,r){var n;return this._hasReceived(t)&&r((n=this.receivedResp)===null||n===void 0?void 0:n.response),this.recHooks.push({status:t,callback:r}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const t=r=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=r,this._matchReceive(r)};this.channel._on(this.refEvent,{},t),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(t,r){this.refEvent&&this.channel._trigger(this.refEvent,{status:t,response:r})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:t,response:r}){this.recHooks.filter(n=>n.status===t).forEach(n=>n.callback(r))}_hasReceived(t){return this.receivedResp&&this.receivedResp.status===t}}var Sj;(function(e){e.SYNC="sync",e.JOIN="join",e.LEAVE="leave"})(Sj||(Sj={}));class pu{constructor(t,r){this.channel=t,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const n=(r==null?void 0:r.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(n.state,{},s=>{const{onJoin:i,onLeave:l,onSync:u}=this.caller;this.joinRef=this.channel._joinRef(),this.state=pu.syncState(this.state,s,i,l),this.pendingDiffs.forEach(d=>{this.state=pu.syncDiff(this.state,d,i,l)}),this.pendingDiffs=[],u()}),this.channel._on(n.diff,{},s=>{const{onJoin:i,onLeave:l,onSync:u}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(s):(this.state=pu.syncDiff(this.state,s,i,l),u())}),this.onJoin((s,i,l)=>{this.channel._trigger("presence",{event:"join",key:s,currentPresences:i,newPresences:l})}),this.onLeave((s,i,l)=>{this.channel._trigger("presence",{event:"leave",key:s,currentPresences:i,leftPresences:l})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(t,r,n,s){const i=this.cloneDeep(t),l=this.transformState(r),u={},d={};return this.map(i,(m,f)=>{l[m]||(d[m]=f)}),this.map(l,(m,f)=>{const p=i[m];if(p){const y=f.map(S=>S.presence_ref),x=p.map(S=>S.presence_ref),b=f.filter(S=>x.indexOf(S.presence_ref)<0),j=p.filter(S=>y.indexOf(S.presence_ref)<0);b.length>0&&(u[m]=b),j.length>0&&(d[m]=j)}else u[m]=f}),this.syncDiff(i,{joins:u,leaves:d},n,s)}static syncDiff(t,r,n,s){const{joins:i,leaves:l}={joins:this.transformState(r.joins),leaves:this.transformState(r.leaves)};return n||(n=()=>{}),s||(s=()=>{}),this.map(i,(u,d)=>{var m;const f=(m=t[u])!==null&&m!==void 0?m:[];if(t[u]=this.cloneDeep(d),f.length>0){const p=t[u].map(x=>x.presence_ref),y=f.filter(x=>p.indexOf(x.presence_ref)<0);t[u].unshift(...y)}n(u,f,d)}),this.map(l,(u,d)=>{let m=t[u];if(!m)return;const f=d.map(p=>p.presence_ref);m=m.filter(p=>f.indexOf(p.presence_ref)<0),t[u]=m,s(u,m,d),m.length===0&&delete t[u]}),t}static map(t,r){return Object.getOwnPropertyNames(t).map(n=>r(n,t[n]))}static transformState(t){return t=this.cloneDeep(t),Object.getOwnPropertyNames(t).reduce((r,n)=>{const s=t[n];return"metas"in s?r[n]=s.metas.map(i=>(i.presence_ref=i.phx_ref,delete i.phx_ref,delete i.phx_ref_prev,i)):r[n]=s,r},{})}static cloneDeep(t){return JSON.parse(JSON.stringify(t))}onJoin(t){this.caller.onJoin=t}onLeave(t){this.caller.onLeave=t}onSync(t){this.caller.onSync=t}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var _j;(function(e){e.ALL="*",e.INSERT="INSERT",e.UPDATE="UPDATE",e.DELETE="DELETE"})(_j||(_j={}));var gu;(function(e){e.BROADCAST="broadcast",e.PRESENCE="presence",e.POSTGRES_CHANGES="postgres_changes",e.SYSTEM="system"})(gu||(gu={}));var Yi;(function(e){e.SUBSCRIBED="SUBSCRIBED",e.TIMED_OUT="TIMED_OUT",e.CLOSED="CLOSED",e.CHANNEL_ERROR="CHANNEL_ERROR"})(Yi||(Yi={}));class V0{constructor(t,r={config:{}},n){var s,i;if(this.topic=t,this.params=r,this.socket=n,this.bindings={},this.state=en.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=t.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},r.config),this.timeout=this.socket.timeout,this.joinPush=new vg(this,ui.join,this.params,this.timeout),this.rejoinTimer=new yC(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=en.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(l=>l.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=en.closed,this.socket._remove(this)}),this._onError(l=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,l),this.state=en.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=en.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",l=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,l),this.state=en.errored,this.rejoinTimer.scheduleTimeout())}),this._on(ui.reply,{},(l,u)=>{this._trigger(this._replyEventName(u),l)}),this.presence=new pu(this),this.broadcastEndpointURL=xC(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((i=(s=this.params.config)===null||s===void 0?void 0:s.broadcast)===null||i===void 0)&&i.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(t,r=this.timeout){var n,s,i;if(this.socket.isConnected()||this.socket.connect(),this.state==en.closed){const{config:{broadcast:l,presence:u,private:d}}=this.params,m=(s=(n=this.bindings.postgres_changes)===null||n===void 0?void 0:n.map(x=>x.filter))!==null&&s!==void 0?s:[],f=!!this.bindings[gu.PRESENCE]&&this.bindings[gu.PRESENCE].length>0||((i=this.params.config.presence)===null||i===void 0?void 0:i.enabled)===!0,p={},y={broadcast:l,presence:Object.assign(Object.assign({},u),{enabled:f}),postgres_changes:m,private:d};this.socket.accessTokenValue&&(p.access_token=this.socket.accessTokenValue),this._onError(x=>t==null?void 0:t(Yi.CHANNEL_ERROR,x)),this._onClose(()=>t==null?void 0:t(Yi.CLOSED)),this.updateJoinPayload(Object.assign({config:y},p)),this.joinedOnce=!0,this._rejoin(r),this.joinPush.receive("ok",async({postgres_changes:x})=>{var b;if(this.socket.setAuth(),x===void 0){t==null||t(Yi.SUBSCRIBED);return}else{const j=this.bindings.postgres_changes,S=(b=j==null?void 0:j.length)!==null&&b!==void 0?b:0,k=[];for(let C=0;C<S;C++){const N=j[C],{filter:{event:O,schema:P,table:T,filter:D}}=N,q=x&&x[C];if(q&&q.event===O&&q.schema===P&&q.table===T&&q.filter===D)k.push(Object.assign(Object.assign({},N),{id:q.id}));else{this.unsubscribe(),this.state=en.errored,t==null||t(Yi.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=k,t&&t(Yi.SUBSCRIBED);return}}).receive("error",x=>{this.state=en.errored,t==null||t(Yi.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(x).join(", ")||"error")))}).receive("timeout",()=>{t==null||t(Yi.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(t,r={}){return await this.send({type:"presence",event:"track",payload:t},r.timeout||this.timeout)}async untrack(t={}){return await this.send({type:"presence",event:"untrack"},t)}on(t,r,n){return this.state===en.joined&&t===gu.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(t,r,n)}async send(t,r={}){var n,s;if(!this._canPush()&&t.type==="broadcast"){const{event:i,payload:l}=t,d={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:i,payload:l,private:this.private}]})};try{const m=await this._fetchWithTimeout(this.broadcastEndpointURL,d,(n=r.timeout)!==null&&n!==void 0?n:this.timeout);return await((s=m.body)===null||s===void 0?void 0:s.cancel()),m.ok?"ok":"error"}catch(m){return m.name==="AbortError"?"timed out":"error"}}else return new Promise(i=>{var l,u,d;const m=this._push(t.type,t,r.timeout||this.timeout);t.type==="broadcast"&&!(!((d=(u=(l=this.params)===null||l===void 0?void 0:l.config)===null||u===void 0?void 0:u.broadcast)===null||d===void 0)&&d.ack)&&i("ok"),m.receive("ok",()=>i("ok")),m.receive("error",()=>i("error")),m.receive("timeout",()=>i("timed out"))})}updateJoinPayload(t){this.joinPush.updatePayload(t)}unsubscribe(t=this.timeout){this.state=en.leaving;const r=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(ui.close,"leave",this._joinRef())};this.joinPush.destroy();let n=null;return new Promise(s=>{n=new vg(this,ui.leave,{},t),n.receive("ok",()=>{r(),s("ok")}).receive("timeout",()=>{r(),s("timed out")}).receive("error",()=>{s("error")}),n.send(),this._canPush()||n.trigger("ok",{})}).finally(()=>{n==null||n.destroy()})}teardown(){this.pushBuffer.forEach(t=>t.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=en.closed,this.bindings={}}async _fetchWithTimeout(t,r,n){const s=new AbortController,i=setTimeout(()=>s.abort(),n),l=await this.socket.fetch(t,Object.assign(Object.assign({},r),{signal:s.signal}));return clearTimeout(i),l}_push(t,r,n=this.timeout){if(!this.joinedOnce)throw`tried to push '${t}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let s=new vg(this,t,r,n);return this._canPush()?s.send():this._addToPushBuffer(s),s}_addToPushBuffer(t){if(t.startTimeout(),this.pushBuffer.push(t),this.pushBuffer.length>Y3){const r=this.pushBuffer.shift();r&&(r.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${r.event}`,r.payload))}}_onMessage(t,r,n){return r}_isMember(t){return this.topic===t}_joinRef(){return this.joinPush.ref}_trigger(t,r,n){var s,i;const l=t.toLocaleLowerCase(),{close:u,error:d,leave:m,join:f}=ui;if(n&&[u,d,m,f].indexOf(l)>=0&&n!==this._joinRef())return;let y=this._onMessage(l,r,n);if(r&&!y)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(l)?(s=this.bindings.postgres_changes)===null||s===void 0||s.filter(x=>{var b,j,S;return((b=x.filter)===null||b===void 0?void 0:b.event)==="*"||((S=(j=x.filter)===null||j===void 0?void 0:j.event)===null||S===void 0?void 0:S.toLocaleLowerCase())===l}).map(x=>x.callback(y,n)):(i=this.bindings[l])===null||i===void 0||i.filter(x=>{var b,j,S,k,C,N;if(["broadcast","presence","postgres_changes"].includes(l))if("id"in x){const O=x.id,P=(b=x.filter)===null||b===void 0?void 0:b.event;return O&&((j=r.ids)===null||j===void 0?void 0:j.includes(O))&&(P==="*"||(P==null?void 0:P.toLocaleLowerCase())===((S=r.data)===null||S===void 0?void 0:S.type.toLocaleLowerCase()))}else{const O=(C=(k=x==null?void 0:x.filter)===null||k===void 0?void 0:k.event)===null||C===void 0?void 0:C.toLocaleLowerCase();return O==="*"||O===((N=r==null?void 0:r.event)===null||N===void 0?void 0:N.toLocaleLowerCase())}else return x.type.toLocaleLowerCase()===l}).map(x=>{if(typeof y=="object"&&"ids"in y){const b=y.data,{schema:j,table:S,commit_timestamp:k,type:C,errors:N}=b;y=Object.assign(Object.assign({},{schema:j,table:S,commit_timestamp:k,eventType:C,new:{},old:{},errors:N}),this._getPayloadRecords(b))}x.callback(y,n)})}_isClosed(){return this.state===en.closed}_isJoined(){return this.state===en.joined}_isJoining(){return this.state===en.joining}_isLeaving(){return this.state===en.leaving}_replyEventName(t){return`chan_reply_${t}`}_on(t,r,n){const s=t.toLocaleLowerCase(),i={type:s,filter:r,callback:n};return this.bindings[s]?this.bindings[s].push(i):this.bindings[s]=[i],this}_off(t,r){const n=t.toLocaleLowerCase();return this.bindings[n]&&(this.bindings[n]=this.bindings[n].filter(s=>{var i;return!(((i=s.type)===null||i===void 0?void 0:i.toLocaleLowerCase())===n&&V0.isEqual(s.filter,r))})),this}static isEqual(t,r){if(Object.keys(t).length!==Object.keys(r).length)return!1;for(const n in t)if(t[n]!==r[n])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(t){this._on(ui.close,{},t)}_onError(t){this._on(ui.error,{},r=>t(r))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(t=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=en.joining,this.joinPush.resend(t))}_getPayloadRecords(t){const r={new:{},old:{}};return(t.type==="INSERT"||t.type==="UPDATE")&&(r.new=jj(t.columns,t.record)),(t.type==="UPDATE"||t.type==="DELETE")&&(r.old=jj(t.columns,t.old_record)),r}}const xg=()=>{},uf={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},nR=[1e3,2e3,5e3,1e4],sR=1e4,iR=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class aR{constructor(t,r){var n;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=wv,this.transport=null,this.heartbeatIntervalMs=uf.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=xg,this.ref=0,this.reconnectTimer=null,this.logger=xg,this.conn=null,this.sendBuffer=[],this.serializer=new J3,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=s=>{let i;return s?i=s:typeof fetch>"u"?i=(...l)=>Lu(async()=>{const{default:u}=await Promise.resolve().then(()=>cc);return{default:u}},void 0,import.meta.url).then(({default:u})=>u(...l)).catch(u=>{throw new Error(`Failed to load @supabase/node-fetch: ${u.message}. This is required for HTTP requests in Node.js environments without native fetch.`)}):i=fetch,(...l)=>i(...l)},!(!((n=r==null?void 0:r.params)===null||n===void 0)&&n.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=r.params.apikey,this.endPoint=`${t}/${bv.websocket}`,this.httpEndpoint=xC(t),this._initializeOptions(r),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(r==null?void 0:r.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=V3.createWebSocket(this.endpointURL())}catch(t){this._setConnectionState("disconnected");const r=t.message;throw r.includes("Node.js")?new Error(`${r}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${r}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:K3}))}disconnect(t,r){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const n=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(n),this._setConnectionState("disconnected")},t?this.conn.close(t,r??""):this.conn.close(),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(t){const r=await t.unsubscribe();return this.channels.length===0&&this.disconnect(),r}async removeAllChannels(){const t=await Promise.all(this.channels.map(r=>r.unsubscribe()));return this.channels=[],this.disconnect(),t}log(t,r,n){this.logger(t,r,n)}connectionState(){switch(this.conn&&this.conn.readyState){case mu.connecting:return So.Connecting;case mu.open:return So.Open;case mu.closing:return So.Closing;default:return So.Closed}}isConnected(){return this.connectionState()===So.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(t,r={config:{}}){const n=`realtime:${t}`,s=this.getChannels().find(i=>i.topic===n);if(s)return s;{const i=new V0(`realtime:${t}`,r,this);return this.channels.push(i),i}}push(t){const{topic:r,event:n,payload:s,ref:i}=t,l=()=>{this.encode(t,u=>{var d;(d=this.conn)===null||d===void 0||d.send(u)})};this.log("push",`${r} ${n} (${i})`,s),this.isConnected()?l():this.sendBuffer.push(l)}async setAuth(t=null){this._authPromise=this._performAuth(t);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var t;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(r){this.log("error","error in heartbeat callback",r)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(r){this.log("error","error in heartbeat callback",r)}this._wasManualDisconnect=!1,(t=this.conn)===null||t===void 0||t.close(G3,"heartbeat timeout"),setTimeout(()=>{var r;this.isConnected()||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout()},uf.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(r){this.log("error","error in heartbeat callback",r)}this._setAuthSafely("heartbeat")}onHeartbeat(t){this.heartbeatCallback=t}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(t=>t()),this.sendBuffer=[])}_makeRef(){let t=this.ref+1;return t===this.ref?this.ref=0:this.ref=t,this.ref.toString()}_leaveOpenTopic(t){let r=this.channels.find(n=>n.topic===t&&(n._isJoined()||n._isJoining()));r&&(this.log("transport",`leaving duplicate topic "${t}"`),r.unsubscribe())}_remove(t){this.channels=this.channels.filter(r=>r.topic!==t.topic)}_onConnMessage(t){this.decode(t.data,r=>{if(r.topic==="phoenix"&&r.event==="phx_reply")try{this.heartbeatCallback(r.payload.status==="ok"?"ok":"error")}catch(m){this.log("error","error in heartbeat callback",m)}r.ref&&r.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:n,event:s,payload:i,ref:l}=r,u=l?`(${l})`:"",d=i.status||"";this.log("receive",`${d} ${n} ${s} ${u}`.trim(),i),this.channels.filter(m=>m._isMember(n)).forEach(m=>m._trigger(s,i,l)),this._triggerStateCallbacks("message",r)})}_clearTimer(t){var r;t==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):t==="reconnect"&&((r=this.reconnectTimer)===null||r===void 0||r.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=t=>this._onConnError(t),this.conn.onmessage=t=>this._onConnMessage(t),this.conn.onclose=t=>this._onConnClose(t))}_teardownConnection(){this.conn&&(this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null),this._clearAllTimers(),this.channels.forEach(t=>t.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const t=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(t),this.workerRef.onerror=r=>{this.log("worker","worker error",r.message),this.workerRef.terminate()},this.workerRef.onmessage=r=>{r.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(t){var r;this._setConnectionState("disconnected"),this.log("transport","close",t),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout(),this._triggerStateCallbacks("close",t)}_onConnError(t){this._setConnectionState("disconnected"),this.log("transport",`${t}`),this._triggerChanError(),this._triggerStateCallbacks("error",t)}_triggerChanError(){this.channels.forEach(t=>t._trigger(ui.error))}_appendParams(t,r){if(Object.keys(r).length===0)return t;const n=t.match(/\?/)?"&":"?",s=new URLSearchParams(r);return`${t}${n}${s}`}_workerObjectUrl(t){let r;if(t)r=t;else{const n=new Blob([iR],{type:"application/javascript"});r=URL.createObjectURL(n)}return r}_setConnectionState(t,r=!1){this._connectionState=t,t==="connecting"?this._wasManualDisconnect=!1:t==="disconnecting"&&(this._wasManualDisconnect=r)}async _performAuth(t=null){let r;t?r=t:this.accessToken?r=await this.accessToken():r=this.accessTokenValue,this.accessTokenValue!=r&&(this.accessTokenValue=r,this.channels.forEach(n=>{const s={access_token:r,version:H3};r&&n.updateJoinPayload(s),n.joinedOnce&&n._isJoined()&&n._push(ui.access_token,{access_token:r})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(t="general"){this.setAuth().catch(r=>{this.log("error",`error setting auth in ${t}`,r)})}_triggerStateCallbacks(t,r){try{this.stateChangeCallbacks[t].forEach(n=>{try{n(r)}catch(s){this.log("error",`error in ${t} callback`,s)}})}catch(n){this.log("error",`error triggering ${t} callbacks`,n)}}_setupReconnectionTimer(){this.reconnectTimer=new yC(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},uf.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(t){var r,n,s,i,l,u,d,m,f;if(this.transport=(r=t==null?void 0:t.transport)!==null&&r!==void 0?r:null,this.timeout=(n=t==null?void 0:t.timeout)!==null&&n!==void 0?n:wv,this.heartbeatIntervalMs=(s=t==null?void 0:t.heartbeatIntervalMs)!==null&&s!==void 0?s:uf.HEARTBEAT_INTERVAL,this.worker=(i=t==null?void 0:t.worker)!==null&&i!==void 0?i:!1,this.accessToken=(l=t==null?void 0:t.accessToken)!==null&&l!==void 0?l:null,this.heartbeatCallback=(u=t==null?void 0:t.heartbeatCallback)!==null&&u!==void 0?u:xg,t!=null&&t.params&&(this.params=t.params),t!=null&&t.logger&&(this.logger=t.logger),(t!=null&&t.logLevel||t!=null&&t.log_level)&&(this.logLevel=t.logLevel||t.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(d=t==null?void 0:t.reconnectAfterMs)!==null&&d!==void 0?d:(p=>nR[p-1]||sR),this.encode=(m=t==null?void 0:t.encode)!==null&&m!==void 0?m:((p,y)=>y(JSON.stringify(p))),this.decode=(f=t==null?void 0:t.decode)!==null&&f!==void 0?f:this.serializer.decode.bind(this.serializer),this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=t==null?void 0:t.workerUrl}}}class q0 extends Error{constructor(t){super(t),this.__isStorageError=!0,this.name="StorageError"}}function Kr(e){return typeof e=="object"&&e!==null&&"__isStorageError"in e}class oR extends q0{constructor(t,r,n){super(t),this.name="StorageApiError",this.status=r,this.statusCode=n}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class Sv extends q0{constructor(t,r){super(t),this.name="StorageUnknownError",this.originalError=r}}var lR=function(e,t,r,n){function s(i){return i instanceof r?i:new r(function(l){l(i)})}return new(r||(r=Promise))(function(i,l){function u(f){try{m(n.next(f))}catch(p){l(p)}}function d(f){try{m(n.throw(f))}catch(p){l(p)}}function m(f){f.done?i(f.value):s(f.value).then(u,d)}m((n=n.apply(e,t||[])).next())})};const wC=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...r)=>Lu(async()=>{const{default:n}=await Promise.resolve().then(()=>cc);return{default:n}},void 0,import.meta.url).then(({default:n})=>n(...r)):t=fetch,(...r)=>t(...r)},cR=()=>lR(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield Lu(()=>Promise.resolve().then(()=>cc),void 0,import.meta.url)).Response:Response}),_v=e=>{if(Array.isArray(e))return e.map(r=>_v(r));if(typeof e=="function"||e!==Object(e))return e;const t={};return Object.entries(e).forEach(([r,n])=>{const s=r.replace(/([-_][a-z])/gi,i=>i.toUpperCase().replace(/[-_]/g,""));t[s]=_v(n)}),t},uR=e=>{if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)};var Wo=function(e,t,r,n){function s(i){return i instanceof r?i:new r(function(l){l(i)})}return new(r||(r=Promise))(function(i,l){function u(f){try{m(n.next(f))}catch(p){l(p)}}function d(f){try{m(n.throw(f))}catch(p){l(p)}}function m(f){f.done?i(f.value):s(f.value).then(u,d)}m((n=n.apply(e,t||[])).next())})};const wg=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),dR=(e,t,r)=>Wo(void 0,void 0,void 0,function*(){const n=yield cR();e instanceof n&&!(r!=null&&r.noResolveJson)?e.json().then(s=>{const i=e.status||500,l=(s==null?void 0:s.statusCode)||i+"";t(new oR(wg(s),i,l))}).catch(s=>{t(new Sv(wg(s),s))}):t(new Sv(wg(e),e))}),fR=(e,t,r,n)=>{const s={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"||!n?s:(uR(n)?(s.headers=Object.assign({"Content-Type":"application/json"},t==null?void 0:t.headers),s.body=JSON.stringify(n)):s.body=n,t!=null&&t.duplex&&(s.duplex=t.duplex),Object.assign(Object.assign({},s),r))};function zu(e,t,r,n,s,i){return Wo(this,void 0,void 0,function*(){return new Promise((l,u)=>{e(r,fR(t,n,s,i)).then(d=>{if(!d.ok)throw d;return n!=null&&n.noResolveJson?d:d.json()}).then(d=>l(d)).catch(d=>dR(d,u,n))})})}function qf(e,t,r,n){return Wo(this,void 0,void 0,function*(){return zu(e,"GET",t,r,n)})}function Ai(e,t,r,n,s){return Wo(this,void 0,void 0,function*(){return zu(e,"POST",t,n,s,r)})}function kv(e,t,r,n,s){return Wo(this,void 0,void 0,function*(){return zu(e,"PUT",t,n,s,r)})}function hR(e,t,r,n){return Wo(this,void 0,void 0,function*(){return zu(e,"HEAD",t,Object.assign(Object.assign({},r),{noResolveJson:!0}),n)})}function bC(e,t,r,n,s){return Wo(this,void 0,void 0,function*(){return zu(e,"DELETE",t,n,s,r)})}var mR=function(e,t,r,n){function s(i){return i instanceof r?i:new r(function(l){l(i)})}return new(r||(r=Promise))(function(i,l){function u(f){try{m(n.next(f))}catch(p){l(p)}}function d(f){try{m(n.throw(f))}catch(p){l(p)}}function m(f){f.done?i(f.value):s(f.value).then(u,d)}m((n=n.apply(e,t||[])).next())})};class pR{constructor(t,r){this.downloadFn=t,this.shouldThrowOnError=r}then(t,r){return this.execute().then(t,r)}execute(){return mR(this,void 0,void 0,function*(){try{return{data:(yield this.downloadFn()).body,error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Kr(t))return{data:null,error:t};throw t}})}}var gR=function(e,t,r,n){function s(i){return i instanceof r?i:new r(function(l){l(i)})}return new(r||(r=Promise))(function(i,l){function u(f){try{m(n.next(f))}catch(p){l(p)}}function d(f){try{m(n.throw(f))}catch(p){l(p)}}function m(f){f.done?i(f.value):s(f.value).then(u,d)}m((n=n.apply(e,t||[])).next())})};class yR{constructor(t,r){this.downloadFn=t,this.shouldThrowOnError=r}asStream(){return new pR(this.downloadFn,this.shouldThrowOnError)}then(t,r){return this.execute().then(t,r)}execute(){return gR(this,void 0,void 0,function*(){try{return{data:yield(yield this.downloadFn()).blob(),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Kr(t))return{data:null,error:t};throw t}})}}var ls=function(e,t,r,n){function s(i){return i instanceof r?i:new r(function(l){l(i)})}return new(r||(r=Promise))(function(i,l){function u(f){try{m(n.next(f))}catch(p){l(p)}}function d(f){try{m(n.throw(f))}catch(p){l(p)}}function m(f){f.done?i(f.value):s(f.value).then(u,d)}m((n=n.apply(e,t||[])).next())})};const vR={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},kj={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class xR{constructor(t,r={},n,s){this.shouldThrowOnError=!1,this.url=t,this.headers=r,this.bucketId=n,this.fetch=wC(s)}throwOnError(){return this.shouldThrowOnError=!0,this}uploadOrUpdate(t,r,n,s){return ls(this,void 0,void 0,function*(){try{let i;const l=Object.assign(Object.assign({},kj),s);let u=Object.assign(Object.assign({},this.headers),t==="POST"&&{"x-upsert":String(l.upsert)});const d=l.metadata;typeof Blob<"u"&&n instanceof Blob?(i=new FormData,i.append("cacheControl",l.cacheControl),d&&i.append("metadata",this.encodeMetadata(d)),i.append("",n)):typeof FormData<"u"&&n instanceof FormData?(i=n,i.append("cacheControl",l.cacheControl),d&&i.append("metadata",this.encodeMetadata(d))):(i=n,u["cache-control"]=`max-age=${l.cacheControl}`,u["content-type"]=l.contentType,d&&(u["x-metadata"]=this.toBase64(this.encodeMetadata(d)))),s!=null&&s.headers&&(u=Object.assign(Object.assign({},u),s.headers));const m=this._removeEmptyFolders(r),f=this._getFinalPath(m),p=yield(t=="PUT"?kv:Ai)(this.fetch,`${this.url}/object/${f}`,i,Object.assign({headers:u},l!=null&&l.duplex?{duplex:l.duplex}:{}));return{data:{path:m,id:p.Id,fullPath:p.Key},error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Kr(i))return{data:null,error:i};throw i}})}upload(t,r,n){return ls(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",t,r,n)})}uploadToSignedUrl(t,r,n,s){return ls(this,void 0,void 0,function*(){const i=this._removeEmptyFolders(t),l=this._getFinalPath(i),u=new URL(this.url+`/object/upload/sign/${l}`);u.searchParams.set("token",r);try{let d;const m=Object.assign({upsert:kj.upsert},s),f=Object.assign(Object.assign({},this.headers),{"x-upsert":String(m.upsert)});typeof Blob<"u"&&n instanceof Blob?(d=new FormData,d.append("cacheControl",m.cacheControl),d.append("",n)):typeof FormData<"u"&&n instanceof FormData?(d=n,d.append("cacheControl",m.cacheControl)):(d=n,f["cache-control"]=`max-age=${m.cacheControl}`,f["content-type"]=m.contentType);const p=yield kv(this.fetch,u.toString(),d,{headers:f});return{data:{path:i,fullPath:p.Key},error:null}}catch(d){if(this.shouldThrowOnError)throw d;if(Kr(d))return{data:null,error:d};throw d}})}createSignedUploadUrl(t,r){return ls(this,void 0,void 0,function*(){try{let n=this._getFinalPath(t);const s=Object.assign({},this.headers);r!=null&&r.upsert&&(s["x-upsert"]="true");const i=yield Ai(this.fetch,`${this.url}/object/upload/sign/${n}`,{},{headers:s}),l=new URL(this.url+i.url),u=l.searchParams.get("token");if(!u)throw new q0("No token returned by API");return{data:{signedUrl:l.toString(),path:t,token:u},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Kr(n))return{data:null,error:n};throw n}})}update(t,r,n){return ls(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",t,r,n)})}move(t,r,n){return ls(this,void 0,void 0,function*(){try{return{data:yield Ai(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:t,destinationKey:r,destinationBucket:n==null?void 0:n.destinationBucket},{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Kr(s))return{data:null,error:s};throw s}})}copy(t,r,n){return ls(this,void 0,void 0,function*(){try{return{data:{path:(yield Ai(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:t,destinationKey:r,destinationBucket:n==null?void 0:n.destinationBucket},{headers:this.headers})).Key},error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Kr(s))return{data:null,error:s};throw s}})}createSignedUrl(t,r,n){return ls(this,void 0,void 0,function*(){try{let s=this._getFinalPath(t),i=yield Ai(this.fetch,`${this.url}/object/sign/${s}`,Object.assign({expiresIn:r},n!=null&&n.transform?{transform:n.transform}:{}),{headers:this.headers});const l=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return i={signedUrl:encodeURI(`${this.url}${i.signedURL}${l}`)},{data:i,error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Kr(s))return{data:null,error:s};throw s}})}createSignedUrls(t,r,n){return ls(this,void 0,void 0,function*(){try{const s=yield Ai(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:r,paths:t},{headers:this.headers}),i=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return{data:s.map(l=>Object.assign(Object.assign({},l),{signedUrl:l.signedURL?encodeURI(`${this.url}${l.signedURL}${i}`):null})),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Kr(s))return{data:null,error:s};throw s}})}download(t,r){const s=typeof(r==null?void 0:r.transform)<"u"?"render/image/authenticated":"object",i=this.transformOptsToQueryString((r==null?void 0:r.transform)||{}),l=i?`?${i}`:"",u=this._getFinalPath(t),d=()=>qf(this.fetch,`${this.url}/${s}/${u}${l}`,{headers:this.headers,noResolveJson:!0});return new yR(d,this.shouldThrowOnError)}info(t){return ls(this,void 0,void 0,function*(){const r=this._getFinalPath(t);try{const n=yield qf(this.fetch,`${this.url}/object/info/${r}`,{headers:this.headers});return{data:_v(n),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Kr(n))return{data:null,error:n};throw n}})}exists(t){return ls(this,void 0,void 0,function*(){const r=this._getFinalPath(t);try{return yield hR(this.fetch,`${this.url}/object/${r}`,{headers:this.headers}),{data:!0,error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Kr(n)&&n instanceof Sv){const s=n.originalError;if([400,404].includes(s==null?void 0:s.status))return{data:!1,error:n}}throw n}})}getPublicUrl(t,r){const n=this._getFinalPath(t),s=[],i=r!=null&&r.download?`download=${r.download===!0?"":r.download}`:"";i!==""&&s.push(i);const u=typeof(r==null?void 0:r.transform)<"u"?"render/image":"object",d=this.transformOptsToQueryString((r==null?void 0:r.transform)||{});d!==""&&s.push(d);let m=s.join("&");return m!==""&&(m=`?${m}`),{data:{publicUrl:encodeURI(`${this.url}/${u}/public/${n}${m}`)}}}remove(t){return ls(this,void 0,void 0,function*(){try{return{data:yield bC(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:t},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Kr(r))return{data:null,error:r};throw r}})}list(t,r,n){return ls(this,void 0,void 0,function*(){try{const s=Object.assign(Object.assign(Object.assign({},vR),r),{prefix:t||""});return{data:yield Ai(this.fetch,`${this.url}/object/list/${this.bucketId}`,s,{headers:this.headers},n),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Kr(s))return{data:null,error:s};throw s}})}listV2(t,r){return ls(this,void 0,void 0,function*(){try{const n=Object.assign({},t);return{data:yield Ai(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,n,{headers:this.headers},r),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Kr(n))return{data:null,error:n};throw n}})}encodeMetadata(t){return JSON.stringify(t)}toBase64(t){return typeof Buffer<"u"?Buffer.from(t).toString("base64"):btoa(t)}_getFinalPath(t){return`${this.bucketId}/${t.replace(/^\/+/,"")}`}_removeEmptyFolders(t){return t.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(t){const r=[];return t.width&&r.push(`width=${t.width}`),t.height&&r.push(`height=${t.height}`),t.resize&&r.push(`resize=${t.resize}`),t.format&&r.push(`format=${t.format}`),t.quality&&r.push(`quality=${t.quality}`),r.join("&")}}const wR="2.74.0",bR={"X-Client-Info":`storage-js/${wR}`};var jl=function(e,t,r,n){function s(i){return i instanceof r?i:new r(function(l){l(i)})}return new(r||(r=Promise))(function(i,l){function u(f){try{m(n.next(f))}catch(p){l(p)}}function d(f){try{m(n.throw(f))}catch(p){l(p)}}function m(f){f.done?i(f.value):s(f.value).then(u,d)}m((n=n.apply(e,t||[])).next())})};class jR{constructor(t,r={},n,s){this.shouldThrowOnError=!1;const i=new URL(t);s!=null&&s.useNewHostname&&/supabase\.(co|in|red)$/.test(i.hostname)&&!i.hostname.includes("storage.supabase.")&&(i.hostname=i.hostname.replace("supabase.","storage.supabase.")),this.url=i.href.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},bR),r),this.fetch=wC(n)}throwOnError(){return this.shouldThrowOnError=!0,this}listBuckets(){return jl(this,void 0,void 0,function*(){try{return{data:yield qf(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Kr(t))return{data:null,error:t};throw t}})}getBucket(t){return jl(this,void 0,void 0,function*(){try{return{data:yield qf(this.fetch,`${this.url}/bucket/${t}`,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Kr(r))return{data:null,error:r};throw r}})}createBucket(t){return jl(this,arguments,void 0,function*(r,n={public:!1}){try{return{data:yield Ai(this.fetch,`${this.url}/bucket`,{id:r,name:r,type:n.type,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Kr(s))return{data:null,error:s};throw s}})}updateBucket(t,r){return jl(this,void 0,void 0,function*(){try{return{data:yield kv(this.fetch,`${this.url}/bucket/${t}`,{id:t,name:t,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Kr(n))return{data:null,error:n};throw n}})}emptyBucket(t){return jl(this,void 0,void 0,function*(){try{return{data:yield Ai(this.fetch,`${this.url}/bucket/${t}/empty`,{},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Kr(r))return{data:null,error:r};throw r}})}deleteBucket(t){return jl(this,void 0,void 0,function*(){try{return{data:yield bC(this.fetch,`${this.url}/bucket/${t}`,{},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Kr(r))return{data:null,error:r};throw r}})}}class SR extends jR{constructor(t,r={},n,s){super(t,r,n,s)}from(t){return new xR(this.url,this.headers,t,this.fetch)}}const _R="2.74.0";let uu="";typeof Deno<"u"?uu="deno":typeof document<"u"?uu="web":typeof navigator<"u"&&navigator.product==="ReactNative"?uu="react-native":uu="node";const kR={"X-Client-Info":`supabase-js-${uu}/${_R}`},NR={headers:kR},CR={schema:"public"},ER={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},AR={};var PR=function(e,t,r,n){function s(i){return i instanceof r?i:new r(function(l){l(i)})}return new(r||(r=Promise))(function(i,l){function u(f){try{m(n.next(f))}catch(p){l(p)}}function d(f){try{m(n.throw(f))}catch(p){l(p)}}function m(f){f.done?i(f.value):s(f.value).then(u,d)}m((n=n.apply(e,t||[])).next())})};const OR=e=>{let t;return e?t=e:typeof fetch>"u"?t=dC:t=fetch,(...r)=>t(...r)},TR=()=>typeof Headers>"u"?fC:Headers,IR=(e,t,r)=>{const n=OR(r),s=TR();return(i,l)=>PR(void 0,void 0,void 0,function*(){var u;const d=(u=yield t())!==null&&u!==void 0?u:e;let m=new s(l==null?void 0:l.headers);return m.has("apikey")||m.set("apikey",e),m.has("Authorization")||m.set("Authorization",`Bearer ${d}`),n(i,Object.assign(Object.assign({},l),{headers:m}))})};var DR=function(e,t,r,n){function s(i){return i instanceof r?i:new r(function(l){l(i)})}return new(r||(r=Promise))(function(i,l){function u(f){try{m(n.next(f))}catch(p){l(p)}}function d(f){try{m(n.throw(f))}catch(p){l(p)}}function m(f){f.done?i(f.value):s(f.value).then(u,d)}m((n=n.apply(e,t||[])).next())})};function RR(e){return e.endsWith("/")?e:e+"/"}function $R(e,t){var r,n;const{db:s,auth:i,realtime:l,global:u}=e,{db:d,auth:m,realtime:f,global:p}=t,y={db:Object.assign(Object.assign({},d),s),auth:Object.assign(Object.assign({},m),i),realtime:Object.assign(Object.assign({},f),l),storage:{},global:Object.assign(Object.assign(Object.assign({},p),u),{headers:Object.assign(Object.assign({},(r=p==null?void 0:p.headers)!==null&&r!==void 0?r:{}),(n=u==null?void 0:u.headers)!==null&&n!==void 0?n:{})}),accessToken:()=>DR(this,void 0,void 0,function*(){return""})};return e.accessToken?y.accessToken=e.accessToken:delete y.accessToken,y}function MR(e){const t=e==null?void 0:e.trim();if(!t)throw new Error("supabaseUrl is required.");if(!t.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(RR(t))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}const jC="2.74.0",Rl=30*1e3,Nv=3,bg=Nv*Rl,FR="http://localhost:9999",LR="supabase.auth.token",zR={"X-Client-Info":`gotrue-js/${jC}`},Cv="X-Supabase-Api-Version",SC={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},UR=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,BR=600*1e3;class bu extends Error{constructor(t,r,n){super(t),this.__isAuthError=!0,this.name="AuthError",this.status=r,this.code=n}}function ot(e){return typeof e=="object"&&e!==null&&"__isAuthError"in e}class WR extends bu{constructor(t,r,n){super(t,r,n),this.name="AuthApiError",this.status=r,this.code=n}}function VR(e){return ot(e)&&e.name==="AuthApiError"}class _o extends bu{constructor(t,r){super(t),this.name="AuthUnknownError",this.originalError=r}}class Xa extends bu{constructor(t,r,n,s){super(t,n,s),this.name=r,this.status=n}}class za extends Xa{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function qR(e){return ot(e)&&e.name==="AuthSessionMissingError"}class Sl extends Xa{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class df extends Xa{constructor(t){super(t,"AuthInvalidCredentialsError",400,void 0)}}class ff extends Xa{constructor(t,r=null){super(t,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function HR(e){return ot(e)&&e.name==="AuthImplicitGrantRedirectError"}class Nj extends Xa{constructor(t,r=null){super(t,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Ev extends Xa{constructor(t,r){super(t,"AuthRetryableFetchError",r,void 0)}}function jg(e){return ot(e)&&e.name==="AuthRetryableFetchError"}class Cj extends Xa{constructor(t,r,n){super(t,"AuthWeakPasswordError",r,"weak_password"),this.reasons=n}}class Av extends Xa{constructor(t){super(t,"AuthInvalidJwtError",400,"invalid_jwt")}}const Hf="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),Ej=` 	
\r=`.split(""),KR=(()=>{const e=new Array(128);for(let t=0;t<e.length;t+=1)e[t]=-1;for(let t=0;t<Ej.length;t+=1)e[Ej[t].charCodeAt(0)]=-2;for(let t=0;t<Hf.length;t+=1)e[Hf[t].charCodeAt(0)]=t;return e})();function Aj(e,t,r){if(e!==null)for(t.queue=t.queue<<8|e,t.queuedBits+=8;t.queuedBits>=6;){const n=t.queue>>t.queuedBits-6&63;r(Hf[n]),t.queuedBits-=6}else if(t.queuedBits>0)for(t.queue=t.queue<<6-t.queuedBits,t.queuedBits=6;t.queuedBits>=6;){const n=t.queue>>t.queuedBits-6&63;r(Hf[n]),t.queuedBits-=6}}function _C(e,t,r){const n=KR[e];if(n>-1)for(t.queue=t.queue<<6|n,t.queuedBits+=6;t.queuedBits>=8;)r(t.queue>>t.queuedBits-8&255),t.queuedBits-=8;else{if(n===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(e)}"`)}}function Pj(e){const t=[],r=l=>{t.push(String.fromCodePoint(l))},n={utf8seq:0,codepoint:0},s={queue:0,queuedBits:0},i=l=>{JR(l,n,r)};for(let l=0;l<e.length;l+=1)_C(e.charCodeAt(l),s,i);return t.join("")}function GR(e,t){if(e<=127){t(e);return}else if(e<=2047){t(192|e>>6),t(128|e&63);return}else if(e<=65535){t(224|e>>12),t(128|e>>6&63),t(128|e&63);return}else if(e<=1114111){t(240|e>>18),t(128|e>>12&63),t(128|e>>6&63),t(128|e&63);return}throw new Error(`Unrecognized Unicode codepoint: ${e.toString(16)}`)}function YR(e,t){for(let r=0;r<e.length;r+=1){let n=e.charCodeAt(r);if(n>55295&&n<=56319){const s=(n-55296)*1024&65535;n=(e.charCodeAt(r+1)-56320&65535|s)+65536,r+=1}GR(n,t)}}function JR(e,t,r){if(t.utf8seq===0){if(e<=127){r(e);return}for(let n=1;n<6;n+=1)if((e>>7-n&1)===0){t.utf8seq=n;break}if(t.utf8seq===2)t.codepoint=e&31;else if(t.utf8seq===3)t.codepoint=e&15;else if(t.utf8seq===4)t.codepoint=e&7;else throw new Error("Invalid UTF-8 sequence");t.utf8seq-=1}else if(t.utf8seq>0){if(e<=127)throw new Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|e&63,t.utf8seq-=1,t.utf8seq===0&&r(t.codepoint)}}function Wl(e){const t=[],r={queue:0,queuedBits:0},n=s=>{t.push(s)};for(let s=0;s<e.length;s+=1)_C(e.charCodeAt(s),r,n);return new Uint8Array(t)}function QR(e){const t=[];return YR(e,r=>t.push(r)),new Uint8Array(t)}function ko(e){const t=[],r={queue:0,queuedBits:0},n=s=>{t.push(s)};return e.forEach(s=>Aj(s,r,n)),Aj(null,r,n),t.join("")}function XR(e){return Math.round(Date.now()/1e3)+e}function ZR(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){const t=Math.random()*16|0;return(e=="x"?t:t&3|8).toString(16)})}const Ss=()=>typeof window<"u"&&typeof document<"u",yo={tested:!1,writable:!1},kC=()=>{if(!Ss())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(yo.tested)return yo.writable;const e=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),yo.tested=!0,yo.writable=!0}catch{yo.tested=!0,yo.writable=!1}return yo.writable};function e6(e){const t={},r=new URL(e);if(r.hash&&r.hash[0]==="#")try{new URLSearchParams(r.hash.substring(1)).forEach((s,i)=>{t[i]=s})}catch{}return r.searchParams.forEach((n,s)=>{t[s]=n}),t}const NC=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...r)=>Lu(async()=>{const{default:n}=await Promise.resolve().then(()=>cc);return{default:n}},void 0,import.meta.url).then(({default:n})=>n(...r)):t=fetch,(...r)=>t(...r)},t6=e=>typeof e=="object"&&e!==null&&"status"in e&&"ok"in e&&"json"in e&&typeof e.json=="function",$l=async(e,t,r)=>{await e.setItem(t,JSON.stringify(r))},vo=async(e,t)=>{const r=await e.getItem(t);if(!r)return null;try{return JSON.parse(r)}catch{return r}},La=async(e,t)=>{await e.removeItem(t)};class Hh{constructor(){this.promise=new Hh.promiseConstructor((t,r)=>{this.resolve=t,this.reject=r})}}Hh.promiseConstructor=Promise;function Sg(e){const t=e.split(".");if(t.length!==3)throw new Av("Invalid JWT structure");for(let n=0;n<t.length;n++)if(!UR.test(t[n]))throw new Av("JWT not in base64url format");return{header:JSON.parse(Pj(t[0])),payload:JSON.parse(Pj(t[1])),signature:Wl(t[2]),raw:{header:t[0],payload:t[1]}}}async function r6(e){return await new Promise(t=>{setTimeout(()=>t(null),e)})}function n6(e,t){return new Promise((n,s)=>{(async()=>{for(let i=0;i<1/0;i++)try{const l=await e(i);if(!t(i,null,l)){n(l);return}}catch(l){if(!t(i,l)){s(l);return}}})()})}function s6(e){return("0"+e.toString(16)).substr(-2)}function i6(){const t=new Uint32Array(56);if(typeof crypto>"u"){const r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",n=r.length;let s="";for(let i=0;i<56;i++)s+=r.charAt(Math.floor(Math.random()*n));return s}return crypto.getRandomValues(t),Array.from(t,s6).join("")}async function a6(e){const r=new TextEncoder().encode(e),n=await crypto.subtle.digest("SHA-256",r),s=new Uint8Array(n);return Array.from(s).map(i=>String.fromCharCode(i)).join("")}async function o6(e){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),e;const r=await a6(e);return btoa(r).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function _l(e,t,r=!1){const n=i6();let s=n;r&&(s+="/PASSWORD_RECOVERY"),await $l(e,`${t}-code-verifier`,s);const i=await o6(n);return[i,n===i?"plain":"s256"]}const l6=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function c6(e){const t=e.headers.get(Cv);if(!t||!t.match(l6))return null;try{return new Date(`${t}T00:00:00.0Z`)}catch{return null}}function u6(e){if(!e)throw new Error("Missing exp claim");const t=Math.floor(Date.now()/1e3);if(e<=t)throw new Error("JWT has expired")}function d6(e){switch(e){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const f6=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function kl(e){if(!f6.test(e))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function _g(){const e={};return new Proxy(e,{get:(t,r)=>{if(r==="__isUserNotAvailableProxy")return!0;if(typeof r=="symbol"){const n=r.toString();if(n==="Symbol(Symbol.toPrimitive)"||n==="Symbol(Symbol.toStringTag)"||n==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${r}" property of the session object is not supported. Please use getUser() instead.`)},set:(t,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(t,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function Oj(e){return JSON.parse(JSON.stringify(e))}var h6=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(e);s<n.length;s++)t.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(e,n[s])&&(r[n[s]]=e[n[s]]);return r};const xo=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),m6=[502,503,504];async function Tj(e){var t;if(!t6(e))throw new Ev(xo(e),0);if(m6.includes(e.status))throw new Ev(xo(e),e.status);let r;try{r=await e.json()}catch(i){throw new _o(xo(i),i)}let n;const s=c6(e);if(s&&s.getTime()>=SC["2024-01-01"].timestamp&&typeof r=="object"&&r&&typeof r.code=="string"?n=r.code:typeof r=="object"&&r&&typeof r.error_code=="string"&&(n=r.error_code),n){if(n==="weak_password")throw new Cj(xo(r),e.status,((t=r.weak_password)===null||t===void 0?void 0:t.reasons)||[]);if(n==="session_not_found")throw new za}else if(typeof r=="object"&&r&&typeof r.weak_password=="object"&&r.weak_password&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.reasons.reduce((i,l)=>i&&typeof l=="string",!0))throw new Cj(xo(r),e.status,r.weak_password.reasons);throw new WR(xo(r),e.status||500,n)}const p6=(e,t,r,n)=>{const s={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"?s:(s.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},t==null?void 0:t.headers),s.body=JSON.stringify(n),Object.assign(Object.assign({},s),r))};async function yt(e,t,r,n){var s;const i=Object.assign({},n==null?void 0:n.headers);i[Cv]||(i[Cv]=SC["2024-01-01"].name),n!=null&&n.jwt&&(i.Authorization=`Bearer ${n.jwt}`);const l=(s=n==null?void 0:n.query)!==null&&s!==void 0?s:{};n!=null&&n.redirectTo&&(l.redirect_to=n.redirectTo);const u=Object.keys(l).length?"?"+new URLSearchParams(l).toString():"",d=await g6(e,t,r+u,{headers:i,noResolveJson:n==null?void 0:n.noResolveJson},{},n==null?void 0:n.body);return n!=null&&n.xform?n==null?void 0:n.xform(d):{data:Object.assign({},d),error:null}}async function g6(e,t,r,n,s,i){const l=p6(t,n,s,i);let u;try{u=await e(r,Object.assign({},l))}catch(d){throw console.error(d),new Ev(xo(d),0)}if(u.ok||await Tj(u),n!=null&&n.noResolveJson)return u;try{return await u.json()}catch(d){await Tj(d)}}function ci(e){var t;let r=null;x6(e)&&(r=Object.assign({},e),e.expires_at||(r.expires_at=XR(e.expires_in)));const n=(t=e.user)!==null&&t!==void 0?t:e;return{data:{session:r,user:n},error:null}}function Ij(e){const t=ci(e);return!t.error&&e.weak_password&&typeof e.weak_password=="object"&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.message&&typeof e.weak_password.message=="string"&&e.weak_password.reasons.reduce((r,n)=>r&&typeof n=="string",!0)&&(t.data.weak_password=e.weak_password),t}function qa(e){var t;return{data:{user:(t=e.user)!==null&&t!==void 0?t:e},error:null}}function y6(e){return{data:e,error:null}}function v6(e){const{action_link:t,email_otp:r,hashed_token:n,redirect_to:s,verification_type:i}=e,l=h6(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),u={action_link:t,email_otp:r,hashed_token:n,redirect_to:s,verification_type:i},d=Object.assign({},l);return{data:{properties:u,user:d},error:null}}function Dj(e){return e}function x6(e){return e.access_token&&e.refresh_token&&e.expires_in}const kg=["global","local","others"];var w6=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(e);s<n.length;s++)t.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(e,n[s])&&(r[n[s]]=e[n[s]]);return r};class b6{constructor({url:t="",headers:r={},fetch:n}){this.url=t,this.headers=r,this.fetch=NC(n),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(t,r=kg[0]){if(kg.indexOf(r)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${kg.join(", ")}`);try{return await yt(this.fetch,"POST",`${this.url}/logout?scope=${r}`,{headers:this.headers,jwt:t,noResolveJson:!0}),{data:null,error:null}}catch(n){if(ot(n))return{data:null,error:n};throw n}}async inviteUserByEmail(t,r={}){try{return await yt(this.fetch,"POST",`${this.url}/invite`,{body:{email:t,data:r.data},headers:this.headers,redirectTo:r.redirectTo,xform:qa})}catch(n){if(ot(n))return{data:{user:null},error:n};throw n}}async generateLink(t){try{const{options:r}=t,n=w6(t,["options"]),s=Object.assign(Object.assign({},n),r);return"newEmail"in n&&(s.new_email=n==null?void 0:n.newEmail,delete s.newEmail),await yt(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:s,headers:this.headers,xform:v6,redirectTo:r==null?void 0:r.redirectTo})}catch(r){if(ot(r))return{data:{properties:null,user:null},error:r};throw r}}async createUser(t){try{return await yt(this.fetch,"POST",`${this.url}/admin/users`,{body:t,headers:this.headers,xform:qa})}catch(r){if(ot(r))return{data:{user:null},error:r};throw r}}async listUsers(t){var r,n,s,i,l,u,d;try{const m={nextPage:null,lastPage:0,total:0},f=await yt(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(r=t==null?void 0:t.page)===null||r===void 0?void 0:r.toString())!==null&&n!==void 0?n:"",per_page:(i=(s=t==null?void 0:t.perPage)===null||s===void 0?void 0:s.toString())!==null&&i!==void 0?i:""},xform:Dj});if(f.error)throw f.error;const p=await f.json(),y=(l=f.headers.get("x-total-count"))!==null&&l!==void 0?l:0,x=(d=(u=f.headers.get("link"))===null||u===void 0?void 0:u.split(","))!==null&&d!==void 0?d:[];return x.length>0&&(x.forEach(b=>{const j=parseInt(b.split(";")[0].split("=")[1].substring(0,1)),S=JSON.parse(b.split(";")[1].split("=")[1]);m[`${S}Page`]=j}),m.total=parseInt(y)),{data:Object.assign(Object.assign({},p),m),error:null}}catch(m){if(ot(m))return{data:{users:[]},error:m};throw m}}async getUserById(t){kl(t);try{return await yt(this.fetch,"GET",`${this.url}/admin/users/${t}`,{headers:this.headers,xform:qa})}catch(r){if(ot(r))return{data:{user:null},error:r};throw r}}async updateUserById(t,r){kl(t);try{return await yt(this.fetch,"PUT",`${this.url}/admin/users/${t}`,{body:r,headers:this.headers,xform:qa})}catch(n){if(ot(n))return{data:{user:null},error:n};throw n}}async deleteUser(t,r=!1){kl(t);try{return await yt(this.fetch,"DELETE",`${this.url}/admin/users/${t}`,{headers:this.headers,body:{should_soft_delete:r},xform:qa})}catch(n){if(ot(n))return{data:{user:null},error:n};throw n}}async _listFactors(t){kl(t.userId);try{const{data:r,error:n}=await yt(this.fetch,"GET",`${this.url}/admin/users/${t.userId}/factors`,{headers:this.headers,xform:s=>({data:{factors:s},error:null})});return{data:r,error:n}}catch(r){if(ot(r))return{data:null,error:r};throw r}}async _deleteFactor(t){kl(t.userId),kl(t.id);try{return{data:await yt(this.fetch,"DELETE",`${this.url}/admin/users/${t.userId}/factors/${t.id}`,{headers:this.headers}),error:null}}catch(r){if(ot(r))return{data:null,error:r};throw r}}async _listOAuthClients(t){var r,n,s,i,l,u,d;try{const m={nextPage:null,lastPage:0,total:0},f=await yt(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(r=t==null?void 0:t.page)===null||r===void 0?void 0:r.toString())!==null&&n!==void 0?n:"",per_page:(i=(s=t==null?void 0:t.perPage)===null||s===void 0?void 0:s.toString())!==null&&i!==void 0?i:""},xform:Dj});if(f.error)throw f.error;const p=await f.json(),y=(l=f.headers.get("x-total-count"))!==null&&l!==void 0?l:0,x=(d=(u=f.headers.get("link"))===null||u===void 0?void 0:u.split(","))!==null&&d!==void 0?d:[];return x.length>0&&(x.forEach(b=>{const j=parseInt(b.split(";")[0].split("=")[1].substring(0,1)),S=JSON.parse(b.split(";")[1].split("=")[1]);m[`${S}Page`]=j}),m.total=parseInt(y)),{data:Object.assign(Object.assign({},p),m),error:null}}catch(m){if(ot(m))return{data:{clients:[]},error:m};throw m}}async _createOAuthClient(t){try{return await yt(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:t,headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(ot(r))return{data:null,error:r};throw r}}async _getOAuthClient(t){try{return await yt(this.fetch,"GET",`${this.url}/admin/oauth/clients/${t}`,{headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(ot(r))return{data:null,error:r};throw r}}async _deleteOAuthClient(t){try{return await yt(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${t}`,{headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(ot(r))return{data:null,error:r};throw r}}async _regenerateOAuthClientSecret(t){try{return await yt(this.fetch,"POST",`${this.url}/admin/oauth/clients/${t}/regenerate_secret`,{headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(ot(r))return{data:null,error:r};throw r}}}function Rj(e={}){return{getItem:t=>e[t]||null,setItem:(t,r)=>{e[t]=r},removeItem:t=>{delete e[t]}}}const Nl={debug:!!(globalThis&&kC()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class CC extends Error{constructor(t){super(t),this.isAcquireTimeout=!0}}class j6 extends CC{}async function S6(e,t,r){Nl.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",e,t);const n=new globalThis.AbortController;return t>0&&setTimeout(()=>{n.abort(),Nl.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",e)},t),await Promise.resolve().then(()=>globalThis.navigator.locks.request(e,t===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:n.signal},async s=>{if(s){Nl.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",e,s.name);try{return await r()}finally{Nl.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",e,s.name)}}else{if(t===0)throw Nl.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",e),new j6(`Acquiring an exclusive Navigator LockManager lock "${e}" immediately failed`);if(Nl.debug)try{const i=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(i,null,"  "))}catch(i){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",i)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await r()}}))}function _6(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function EC(e){if(!/^0x[a-fA-F0-9]{40}$/.test(e))throw new Error(`@supabase/auth-js: Address "${e}" is invalid.`);return e.toLowerCase()}function k6(e){return parseInt(e,16)}function N6(e){const t=new TextEncoder().encode(e);return"0x"+Array.from(t,n=>n.toString(16).padStart(2,"0")).join("")}function C6(e){var t;const{chainId:r,domain:n,expirationTime:s,issuedAt:i=new Date,nonce:l,notBefore:u,requestId:d,resources:m,scheme:f,uri:p,version:y}=e;{if(!Number.isInteger(r))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${r}`);if(!n)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(l&&l.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${l}`);if(!p)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(y!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${y}`);if(!((t=e.statement)===null||t===void 0)&&t.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${e.statement}`)}const x=EC(e.address),b=f?`${f}://${n}`:n,j=e.statement?`${e.statement}
`:"",S=`${b} wants you to sign in with your Ethereum account:
${x}

${j}`;let k=`URI: ${p}
Version: ${y}
Chain ID: ${r}${l?`
Nonce: ${l}`:""}
Issued At: ${i.toISOString()}`;if(s&&(k+=`
Expiration Time: ${s.toISOString()}`),u&&(k+=`
Not Before: ${u.toISOString()}`),d&&(k+=`
Request ID: ${d}`),m){let C=`
Resources:`;for(const N of m){if(!N||typeof N!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${N}`);C+=`
- ${N}`}k+=C}return`${S}
${k}`}class qr extends Error{constructor({message:t,code:r,cause:n,name:s}){var i;super(t,{cause:n}),this.__isWebAuthnError=!0,this.name=(i=s??(n instanceof Error?n.name:void 0))!==null&&i!==void 0?i:"Unknown Error",this.code=r}}class Kf extends qr{constructor(t,r){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:r,message:t}),this.name="WebAuthnUnknownError",this.originalError=r}}function E6({error:e,options:t}){var r,n,s;const{publicKey:i}=t;if(!i)throw Error("options was missing required publicKey property");if(e.name==="AbortError"){if(t.signal instanceof AbortSignal)return new qr({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:e})}else if(e.name==="ConstraintError"){if(((r=i.authenticatorSelection)===null||r===void 0?void 0:r.requireResidentKey)===!0)return new qr({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:e});if(t.mediation==="conditional"&&((n=i.authenticatorSelection)===null||n===void 0?void 0:n.userVerification)==="required")return new qr({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:e});if(((s=i.authenticatorSelection)===null||s===void 0?void 0:s.userVerification)==="required")return new qr({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:e})}else{if(e.name==="InvalidStateError")return new qr({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:e});if(e.name==="NotAllowedError")return new qr({message:e.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e});if(e.name==="NotSupportedError")return i.pubKeyCredParams.filter(u=>u.type==="public-key").length===0?new qr({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:e}):new qr({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:e});if(e.name==="SecurityError"){const l=window.location.hostname;if(PC(l)){if(i.rp.id!==l)return new qr({message:`The RP ID "${i.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:e})}else return new qr({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:e})}else if(e.name==="TypeError"){if(i.user.id.byteLength<1||i.user.id.byteLength>64)return new qr({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:e})}else if(e.name==="UnknownError")return new qr({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:e})}return new qr({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e})}function A6({error:e,options:t}){const{publicKey:r}=t;if(!r)throw Error("options was missing required publicKey property");if(e.name==="AbortError"){if(t.signal instanceof AbortSignal)return new qr({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:e})}else{if(e.name==="NotAllowedError")return new qr({message:e.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e});if(e.name==="SecurityError"){const n=window.location.hostname;if(PC(n)){if(r.rpId!==n)return new qr({message:`The RP ID "${r.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:e})}else return new qr({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:e})}else if(e.name==="UnknownError")return new qr({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:e})}return new qr({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e})}var AC=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(e);s<n.length;s++)t.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(e,n[s])&&(r[n[s]]=e[n[s]]);return r};class P6{createNewAbortSignal(){if(this.controller){const r=new Error("Cancelling existing WebAuthn API call for new one");r.name="AbortError",this.controller.abort(r)}const t=new AbortController;return this.controller=t,t.signal}cancelCeremony(){if(this.controller){const t=new Error("Manually cancelling existing WebAuthn API call");t.name="AbortError",this.controller.abort(t),this.controller=void 0}}}const O6=new P6;function T6(e){if(!e)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(e);const{challenge:t,user:r,excludeCredentials:n}=e,s=AC(e,["challenge","user","excludeCredentials"]),i=Wl(t).buffer,l=Object.assign(Object.assign({},r),{id:Wl(r.id).buffer}),u=Object.assign(Object.assign({},s),{challenge:i,user:l});if(n&&n.length>0){u.excludeCredentials=new Array(n.length);for(let d=0;d<n.length;d++){const m=n[d];u.excludeCredentials[d]=Object.assign(Object.assign({},m),{id:Wl(m.id).buffer,type:m.type||"public-key",transports:m.transports})}}return u}function I6(e){if(!e)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(e);const{challenge:t,allowCredentials:r}=e,n=AC(e,["challenge","allowCredentials"]),s=Wl(t).buffer,i=Object.assign(Object.assign({},n),{challenge:s});if(r&&r.length>0){i.allowCredentials=new Array(r.length);for(let l=0;l<r.length;l++){const u=r[l];i.allowCredentials[l]=Object.assign(Object.assign({},u),{id:Wl(u.id).buffer,type:u.type||"public-key",transports:u.transports})}}return i}function D6(e){var t;if("toJSON"in e&&typeof e.toJSON=="function")return e.toJSON();const r=e;return{id:e.id,rawId:e.id,response:{attestationObject:ko(new Uint8Array(e.response.attestationObject)),clientDataJSON:ko(new Uint8Array(e.response.clientDataJSON))},type:"public-key",clientExtensionResults:e.getClientExtensionResults(),authenticatorAttachment:(t=r.authenticatorAttachment)!==null&&t!==void 0?t:void 0}}function R6(e){var t;if("toJSON"in e&&typeof e.toJSON=="function")return e.toJSON();const r=e,n=e.getClientExtensionResults(),s=e.response;return{id:e.id,rawId:e.id,response:{authenticatorData:ko(new Uint8Array(s.authenticatorData)),clientDataJSON:ko(new Uint8Array(s.clientDataJSON)),signature:ko(new Uint8Array(s.signature)),userHandle:s.userHandle?ko(new Uint8Array(s.userHandle)):void 0},type:"public-key",clientExtensionResults:n,authenticatorAttachment:(t=r.authenticatorAttachment)!==null&&t!==void 0?t:void 0}}function PC(e){return e==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(e)}function $j(){var e,t;return!!(Ss()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((e=navigator==null?void 0:navigator.credentials)===null||e===void 0?void 0:e.create)=="function"&&typeof((t=navigator==null?void 0:navigator.credentials)===null||t===void 0?void 0:t.get)=="function")}async function $6(e){try{const t=await navigator.credentials.create(e);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new Kf("Browser returned unexpected credential type",t)}:{data:null,error:new Kf("Empty credential response",t)}}catch(t){return{data:null,error:E6({error:t,options:e})}}}async function M6(e){try{const t=await navigator.credentials.get(e);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new Kf("Browser returned unexpected credential type",t)}:{data:null,error:new Kf("Empty credential response",t)}}catch(t){return{data:null,error:A6({error:t,options:e})}}}const F6={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"none"},L6={userVerification:"preferred",hints:["security-key"]};function Gf(...e){const t=s=>s!==null&&typeof s=="object"&&!Array.isArray(s),r=s=>s instanceof ArrayBuffer||ArrayBuffer.isView(s),n={};for(const s of e)if(s)for(const i in s){const l=s[i];if(l!==void 0)if(Array.isArray(l))n[i]=l;else if(r(l))n[i]=l;else if(t(l)){const u=n[i];t(u)?n[i]=Gf(u,l):n[i]=Gf(l)}else n[i]=l}return n}function z6(e,t){return Gf(F6,e,t||{})}function U6(e,t){return Gf(L6,e,t||{})}class B6{constructor(t){this.client=t,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(t){return this.client.mfa.enroll(Object.assign(Object.assign({},t),{factorType:"webauthn"}))}async _challenge({factorId:t,webauthn:r,friendlyName:n,signal:s},i){try{const{data:l,error:u}=await this.client.mfa.challenge({factorId:t,webauthn:r});if(!l)return{data:null,error:u};const d=s??O6.createNewAbortSignal();if(l.webauthn.type==="create"){const{user:m}=l.webauthn.credential_options.publicKey;m.name||(m.name=`${m.id}:${n}`),m.displayName||(m.displayName=m.name)}switch(l.webauthn.type){case"create":{const m=z6(l.webauthn.credential_options.publicKey,i==null?void 0:i.create),{data:f,error:p}=await $6({publicKey:m,signal:d});return f?{data:{factorId:t,challengeId:l.id,webauthn:{type:l.webauthn.type,credential_response:f}},error:null}:{data:null,error:p}}case"request":{const m=U6(l.webauthn.credential_options.publicKey,i==null?void 0:i.request),{data:f,error:p}=await M6(Object.assign(Object.assign({},l.webauthn.credential_options),{publicKey:m,signal:d}));return f?{data:{factorId:t,challengeId:l.id,webauthn:{type:l.webauthn.type,credential_response:f}},error:null}:{data:null,error:p}}}}catch(l){return ot(l)?{data:null,error:l}:{data:null,error:new _o("Unexpected error in challenge",l)}}}async _verify({challengeId:t,factorId:r,webauthn:n}){return this.client.mfa.verify({factorId:r,challengeId:t,webauthn:n})}async _authenticate({factorId:t,webauthn:{rpId:r=typeof window<"u"?window.location.hostname:void 0,rpOrigins:n=typeof window<"u"?[window.location.origin]:void 0,signal:s}},i){if(!r)return{data:null,error:new bu("rpId is required for WebAuthn authentication")};try{if(!$j())return{data:null,error:new _o("Browser does not support WebAuthn",null)};const{data:l,error:u}=await this.challenge({factorId:t,webauthn:{rpId:r,rpOrigins:n},signal:s},{request:i});if(!l)return{data:null,error:u};const{webauthn:d}=l;return this._verify({factorId:t,challengeId:l.challengeId,webauthn:{type:d.type,rpId:r,rpOrigins:n,credential_response:d.credential_response}})}catch(l){return ot(l)?{data:null,error:l}:{data:null,error:new _o("Unexpected error in authenticate",l)}}}async _register({friendlyName:t,rpId:r=typeof window<"u"?window.location.hostname:void 0,rpOrigins:n=typeof window<"u"?[window.location.origin]:void 0,signal:s},i){if(!r)return{data:null,error:new bu("rpId is required for WebAuthn registration")};try{if(!$j())return{data:null,error:new _o("Browser does not support WebAuthn",null)};const{data:l,error:u}=await this._enroll({friendlyName:t});if(!l)return await this.client.mfa.listFactors().then(f=>{var p;return(p=f.data)===null||p===void 0?void 0:p.all.find(y=>y.factor_type==="webauthn"&&y.friendly_name===t&&y.status!=="unverified")}).then(f=>f?this.client.mfa.unenroll({factorId:f==null?void 0:f.id}):void 0),{data:null,error:u};const{data:d,error:m}=await this._challenge({factorId:l.id,friendlyName:l.friendly_name,webauthn:{rpId:r,rpOrigins:n},signal:s},{create:i});return d?this._verify({factorId:l.id,challengeId:d.challengeId,webauthn:{rpId:r,rpOrigins:n,type:d.webauthn.type,credential_response:d.webauthn.credential_response}}):{data:null,error:m}}catch(l){return ot(l)?{data:null,error:l}:{data:null,error:new _o("Unexpected error in register",l)}}}}_6();const W6={url:FR,storageKey:LR,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:zR,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function Mj(e,t,r){return await r()}const Cl={};class ju{get jwks(){var t,r;return(r=(t=Cl[this.storageKey])===null||t===void 0?void 0:t.jwks)!==null&&r!==void 0?r:{keys:[]}}set jwks(t){Cl[this.storageKey]=Object.assign(Object.assign({},Cl[this.storageKey]),{jwks:t})}get jwks_cached_at(){var t,r;return(r=(t=Cl[this.storageKey])===null||t===void 0?void 0:t.cachedAt)!==null&&r!==void 0?r:Number.MIN_SAFE_INTEGER}set jwks_cached_at(t){Cl[this.storageKey]=Object.assign(Object.assign({},Cl[this.storageKey]),{cachedAt:t})}constructor(t){var r,n;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=ju.nextInstanceID,ju.nextInstanceID+=1,this.instanceID>0&&Ss()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const s=Object.assign(Object.assign({},W6),t);if(this.logDebugMessages=!!s.debug,typeof s.debug=="function"&&(this.logger=s.debug),this.persistSession=s.persistSession,this.storageKey=s.storageKey,this.autoRefreshToken=s.autoRefreshToken,this.admin=new b6({url:s.url,headers:s.headers,fetch:s.fetch}),this.url=s.url,this.headers=s.headers,this.fetch=NC(s.fetch),this.lock=s.lock||Mj,this.detectSessionInUrl=s.detectSessionInUrl,this.flowType=s.flowType,this.hasCustomAuthorizationHeader=s.hasCustomAuthorizationHeader,s.lock?this.lock=s.lock:Ss()&&(!((r=globalThis==null?void 0:globalThis.navigator)===null||r===void 0)&&r.locks)?this.lock=S6:this.lock=Mj,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new B6(this)},this.persistSession?(s.storage?this.storage=s.storage:kC()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=Rj(this.memoryStorage)),s.userStorage&&(this.userStorage=s.userStorage)):(this.memoryStorage={},this.storage=Rj(this.memoryStorage)),Ss()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(i){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",i)}(n=this.broadcastChannel)===null||n===void 0||n.addEventListener("message",async i=>{this._debug("received broadcast notification from other tab or client",i),await this._notifyAllSubscribers(i.data.event,i.data.session,!1)})}this.initialize()}_debug(...t){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${jC}) ${new Date().toISOString()}`,...t),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var t;try{const r=e6(window.location.href);let n="none";if(this._isImplicitGrantCallback(r)?n="implicit":await this._isPKCECallback(r)&&(n="pkce"),Ss()&&this.detectSessionInUrl&&n!=="none"){const{data:s,error:i}=await this._getSessionFromURL(r,n);if(i){if(this._debug("#_initialize()","error detecting session from URL",i),HR(i)){const d=(t=i.details)===null||t===void 0?void 0:t.code;if(d==="identity_already_exists"||d==="identity_not_found"||d==="single_identity_not_deletable")return{error:i}}return await this._removeSession(),{error:i}}const{session:l,redirectType:u}=s;return this._debug("#_initialize()","detected session in URL",l,"redirect type",u),await this._saveSession(l),setTimeout(async()=>{u==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",l):await this._notifyAllSubscribers("SIGNED_IN",l)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(r){return ot(r)?{error:r}:{error:new _o("Unexpected error during initialization",r)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(t){var r,n,s;try{const i=await yt(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(n=(r=t==null?void 0:t.options)===null||r===void 0?void 0:r.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:(s=t==null?void 0:t.options)===null||s===void 0?void 0:s.captchaToken}},xform:ci}),{data:l,error:u}=i;if(u||!l)return{data:{user:null,session:null},error:u};const d=l.session,m=l.user;return l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",d)),{data:{user:m,session:d},error:null}}catch(i){if(ot(i))return{data:{user:null,session:null},error:i};throw i}}async signUp(t){var r,n,s;try{let i;if("email"in t){const{email:f,password:p,options:y}=t;let x=null,b=null;this.flowType==="pkce"&&([x,b]=await _l(this.storage,this.storageKey)),i=await yt(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:y==null?void 0:y.emailRedirectTo,body:{email:f,password:p,data:(r=y==null?void 0:y.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:y==null?void 0:y.captchaToken},code_challenge:x,code_challenge_method:b},xform:ci})}else if("phone"in t){const{phone:f,password:p,options:y}=t;i=await yt(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:f,password:p,data:(n=y==null?void 0:y.data)!==null&&n!==void 0?n:{},channel:(s=y==null?void 0:y.channel)!==null&&s!==void 0?s:"sms",gotrue_meta_security:{captcha_token:y==null?void 0:y.captchaToken}},xform:ci})}else throw new df("You must provide either an email or phone number and a password");const{data:l,error:u}=i;if(u||!l)return{data:{user:null,session:null},error:u};const d=l.session,m=l.user;return l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",d)),{data:{user:m,session:d},error:null}}catch(i){if(ot(i))return{data:{user:null,session:null},error:i};throw i}}async signInWithPassword(t){try{let r;if("email"in t){const{email:i,password:l,options:u}=t;r=await yt(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:i,password:l,gotrue_meta_security:{captcha_token:u==null?void 0:u.captchaToken}},xform:Ij})}else if("phone"in t){const{phone:i,password:l,options:u}=t;r=await yt(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:i,password:l,gotrue_meta_security:{captcha_token:u==null?void 0:u.captchaToken}},xform:Ij})}else throw new df("You must provide either an email or phone number and a password");const{data:n,error:s}=r;return s?{data:{user:null,session:null},error:s}:!n||!n.session||!n.user?{data:{user:null,session:null},error:new Sl}:(n.session&&(await this._saveSession(n.session),await this._notifyAllSubscribers("SIGNED_IN",n.session)),{data:Object.assign({user:n.user,session:n.session},n.weak_password?{weakPassword:n.weak_password}:null),error:s})}catch(r){if(ot(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithOAuth(t){var r,n,s,i;return await this._handleProviderSignIn(t.provider,{redirectTo:(r=t.options)===null||r===void 0?void 0:r.redirectTo,scopes:(n=t.options)===null||n===void 0?void 0:n.scopes,queryParams:(s=t.options)===null||s===void 0?void 0:s.queryParams,skipBrowserRedirect:(i=t.options)===null||i===void 0?void 0:i.skipBrowserRedirect})}async exchangeCodeForSession(t){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(t))}async signInWithWeb3(t){const{chain:r}=t;switch(r){case"ethereum":return await this.signInWithEthereum(t);case"solana":return await this.signInWithSolana(t);default:throw new Error(`@supabase/auth-js: Unsupported chain "${r}"`)}}async signInWithEthereum(t){var r,n,s,i,l,u,d,m,f,p,y;let x,b;if("message"in t)x=t.message,b=t.signature;else{const{chain:j,wallet:S,statement:k,options:C}=t;let N;if(Ss())if(typeof S=="object")N=S;else{const F=window;if("ethereum"in F&&typeof F.ethereum=="object"&&"request"in F.ethereum&&typeof F.ethereum.request=="function")N=F.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof S!="object"||!(C!=null&&C.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");N=S}const O=new URL((r=C==null?void 0:C.url)!==null&&r!==void 0?r:window.location.href),P=await N.request({method:"eth_requestAccounts"}).then(F=>F).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!P||P.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const T=EC(P[0]);let D=(n=C==null?void 0:C.signInWithEthereum)===null||n===void 0?void 0:n.chainId;if(!D){const F=await N.request({method:"eth_chainId"});D=k6(F)}const q={domain:O.host,address:T,statement:k,uri:O.href,version:"1",chainId:D,nonce:(s=C==null?void 0:C.signInWithEthereum)===null||s===void 0?void 0:s.nonce,issuedAt:(l=(i=C==null?void 0:C.signInWithEthereum)===null||i===void 0?void 0:i.issuedAt)!==null&&l!==void 0?l:new Date,expirationTime:(u=C==null?void 0:C.signInWithEthereum)===null||u===void 0?void 0:u.expirationTime,notBefore:(d=C==null?void 0:C.signInWithEthereum)===null||d===void 0?void 0:d.notBefore,requestId:(m=C==null?void 0:C.signInWithEthereum)===null||m===void 0?void 0:m.requestId,resources:(f=C==null?void 0:C.signInWithEthereum)===null||f===void 0?void 0:f.resources};x=C6(q),b=await N.request({method:"personal_sign",params:[N6(x),T]})}try{const{data:j,error:S}=await yt(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:x,signature:b},!((p=t.options)===null||p===void 0)&&p.captchaToken?{gotrue_meta_security:{captcha_token:(y=t.options)===null||y===void 0?void 0:y.captchaToken}}:null),xform:ci});if(S)throw S;return!j||!j.session||!j.user?{data:{user:null,session:null},error:new Sl}:(j.session&&(await this._saveSession(j.session),await this._notifyAllSubscribers("SIGNED_IN",j.session)),{data:Object.assign({},j),error:S})}catch(j){if(ot(j))return{data:{user:null,session:null},error:j};throw j}}async signInWithSolana(t){var r,n,s,i,l,u,d,m,f,p,y,x;let b,j;if("message"in t)b=t.message,j=t.signature;else{const{chain:S,wallet:k,statement:C,options:N}=t;let O;if(Ss())if(typeof k=="object")O=k;else{const T=window;if("solana"in T&&typeof T.solana=="object"&&("signIn"in T.solana&&typeof T.solana.signIn=="function"||"signMessage"in T.solana&&typeof T.solana.signMessage=="function"))O=T.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof k!="object"||!(N!=null&&N.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");O=k}const P=new URL((r=N==null?void 0:N.url)!==null&&r!==void 0?r:window.location.href);if("signIn"in O&&O.signIn){const T=await O.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},N==null?void 0:N.signInWithSolana),{version:"1",domain:P.host,uri:P.href}),C?{statement:C}:null));let D;if(Array.isArray(T)&&T[0]&&typeof T[0]=="object")D=T[0];else if(T&&typeof T=="object"&&"signedMessage"in T&&"signature"in T)D=T;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in D&&"signature"in D&&(typeof D.signedMessage=="string"||D.signedMessage instanceof Uint8Array)&&D.signature instanceof Uint8Array)b=typeof D.signedMessage=="string"?D.signedMessage:new TextDecoder().decode(D.signedMessage),j=D.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in O)||typeof O.signMessage!="function"||!("publicKey"in O)||typeof O!="object"||!O.publicKey||!("toBase58"in O.publicKey)||typeof O.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");b=[`${P.host} wants you to sign in with your Solana account:`,O.publicKey.toBase58(),...C?["",C,""]:[""],"Version: 1",`URI: ${P.href}`,`Issued At: ${(s=(n=N==null?void 0:N.signInWithSolana)===null||n===void 0?void 0:n.issuedAt)!==null&&s!==void 0?s:new Date().toISOString()}`,...!((i=N==null?void 0:N.signInWithSolana)===null||i===void 0)&&i.notBefore?[`Not Before: ${N.signInWithSolana.notBefore}`]:[],...!((l=N==null?void 0:N.signInWithSolana)===null||l===void 0)&&l.expirationTime?[`Expiration Time: ${N.signInWithSolana.expirationTime}`]:[],...!((u=N==null?void 0:N.signInWithSolana)===null||u===void 0)&&u.chainId?[`Chain ID: ${N.signInWithSolana.chainId}`]:[],...!((d=N==null?void 0:N.signInWithSolana)===null||d===void 0)&&d.nonce?[`Nonce: ${N.signInWithSolana.nonce}`]:[],...!((m=N==null?void 0:N.signInWithSolana)===null||m===void 0)&&m.requestId?[`Request ID: ${N.signInWithSolana.requestId}`]:[],...!((p=(f=N==null?void 0:N.signInWithSolana)===null||f===void 0?void 0:f.resources)===null||p===void 0)&&p.length?["Resources",...N.signInWithSolana.resources.map(D=>`- ${D}`)]:[]].join(`
`);const T=await O.signMessage(new TextEncoder().encode(b),"utf8");if(!T||!(T instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");j=T}}try{const{data:S,error:k}=await yt(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:b,signature:ko(j)},!((y=t.options)===null||y===void 0)&&y.captchaToken?{gotrue_meta_security:{captcha_token:(x=t.options)===null||x===void 0?void 0:x.captchaToken}}:null),xform:ci});if(k)throw k;return!S||!S.session||!S.user?{data:{user:null,session:null},error:new Sl}:(S.session&&(await this._saveSession(S.session),await this._notifyAllSubscribers("SIGNED_IN",S.session)),{data:Object.assign({},S),error:k})}catch(S){if(ot(S))return{data:{user:null,session:null},error:S};throw S}}async _exchangeCodeForSession(t){const r=await vo(this.storage,`${this.storageKey}-code-verifier`),[n,s]=(r??"").split("/");try{const{data:i,error:l}=await yt(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:t,code_verifier:n},xform:ci});if(await La(this.storage,`${this.storageKey}-code-verifier`),l)throw l;return!i||!i.session||!i.user?{data:{user:null,session:null,redirectType:null},error:new Sl}:(i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),{data:Object.assign(Object.assign({},i),{redirectType:s??null}),error:l})}catch(i){if(ot(i))return{data:{user:null,session:null,redirectType:null},error:i};throw i}}async signInWithIdToken(t){try{const{options:r,provider:n,token:s,access_token:i,nonce:l}=t,u=await yt(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:n,id_token:s,access_token:i,nonce:l,gotrue_meta_security:{captcha_token:r==null?void 0:r.captchaToken}},xform:ci}),{data:d,error:m}=u;return m?{data:{user:null,session:null},error:m}:!d||!d.session||!d.user?{data:{user:null,session:null},error:new Sl}:(d.session&&(await this._saveSession(d.session),await this._notifyAllSubscribers("SIGNED_IN",d.session)),{data:d,error:m})}catch(r){if(ot(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithOtp(t){var r,n,s,i,l;try{if("email"in t){const{email:u,options:d}=t;let m=null,f=null;this.flowType==="pkce"&&([m,f]=await _l(this.storage,this.storageKey));const{error:p}=await yt(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:u,data:(r=d==null?void 0:d.data)!==null&&r!==void 0?r:{},create_user:(n=d==null?void 0:d.shouldCreateUser)!==null&&n!==void 0?n:!0,gotrue_meta_security:{captcha_token:d==null?void 0:d.captchaToken},code_challenge:m,code_challenge_method:f},redirectTo:d==null?void 0:d.emailRedirectTo});return{data:{user:null,session:null},error:p}}if("phone"in t){const{phone:u,options:d}=t,{data:m,error:f}=await yt(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:u,data:(s=d==null?void 0:d.data)!==null&&s!==void 0?s:{},create_user:(i=d==null?void 0:d.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:d==null?void 0:d.captchaToken},channel:(l=d==null?void 0:d.channel)!==null&&l!==void 0?l:"sms"}});return{data:{user:null,session:null,messageId:m==null?void 0:m.message_id},error:f}}throw new df("You must provide either an email or phone number.")}catch(u){if(ot(u))return{data:{user:null,session:null},error:u};throw u}}async verifyOtp(t){var r,n;try{let s,i;"options"in t&&(s=(r=t.options)===null||r===void 0?void 0:r.redirectTo,i=(n=t.options)===null||n===void 0?void 0:n.captchaToken);const{data:l,error:u}=await yt(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},t),{gotrue_meta_security:{captcha_token:i}}),redirectTo:s,xform:ci});if(u)throw u;if(!l)throw new Error("An error occurred on token verification.");const d=l.session,m=l.user;return d!=null&&d.access_token&&(await this._saveSession(d),await this._notifyAllSubscribers(t.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",d)),{data:{user:m,session:d},error:null}}catch(s){if(ot(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithSSO(t){var r,n,s;try{let i=null,l=null;return this.flowType==="pkce"&&([i,l]=await _l(this.storage,this.storageKey)),await yt(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in t?{provider_id:t.providerId}:null),"domain"in t?{domain:t.domain}:null),{redirect_to:(n=(r=t.options)===null||r===void 0?void 0:r.redirectTo)!==null&&n!==void 0?n:void 0}),!((s=t==null?void 0:t.options)===null||s===void 0)&&s.captchaToken?{gotrue_meta_security:{captcha_token:t.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:i,code_challenge_method:l}),headers:this.headers,xform:y6})}catch(i){if(ot(i))return{data:null,error:i};throw i}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async t=>{const{data:{session:r},error:n}=t;if(n)throw n;if(!r)throw new za;const{error:s}=await yt(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:r.access_token});return{data:{user:null,session:null},error:s}})}catch(t){if(ot(t))return{data:{user:null,session:null},error:t};throw t}}async resend(t){try{const r=`${this.url}/resend`;if("email"in t){const{email:n,type:s,options:i}=t,{error:l}=await yt(this.fetch,"POST",r,{headers:this.headers,body:{email:n,type:s,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}},redirectTo:i==null?void 0:i.emailRedirectTo});return{data:{user:null,session:null},error:l}}else if("phone"in t){const{phone:n,type:s,options:i}=t,{data:l,error:u}=await yt(this.fetch,"POST",r,{headers:this.headers,body:{phone:n,type:s,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}}});return{data:{user:null,session:null,messageId:l==null?void 0:l.message_id},error:u}}throw new df("You must provide either an email or phone number and a type")}catch(r){if(ot(r))return{data:{user:null,session:null},error:r};throw r}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async r=>r))}async _acquireLock(t,r){this._debug("#_acquireLock","begin",t);try{if(this.lockAcquired){const n=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),s=(async()=>(await n,await r()))();return this.pendingInLock.push((async()=>{try{await s}catch{}})()),s}return await this.lock(`lock:${this.storageKey}`,t,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const n=r();for(this.pendingInLock.push((async()=>{try{await n}catch{}})()),await n;this.pendingInLock.length;){const s=[...this.pendingInLock];await Promise.all(s),this.pendingInLock.splice(0,s.length)}return await n}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(t){this._debug("#_useSession","begin");try{const r=await this.__loadSession();return await t(r)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let t=null;const r=await vo(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",r),r!==null&&(this._isValidSession(r)?t=r:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!t)return{data:{session:null},error:null};const n=t.expires_at?t.expires_at*1e3-Date.now()<bg:!1;if(this._debug("#__loadSession()",`session has${n?"":" not"} expired`,"expires_at",t.expires_at),!n){if(this.userStorage){const l=await vo(this.userStorage,this.storageKey+"-user");l!=null&&l.user?t.user=l.user:t.user=_g()}if(this.storage.isServer&&t.user){let l=this.suppressGetSessionWarning;t=new Proxy(t,{get:(d,m,f)=>(!l&&m==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),l=!0,this.suppressGetSessionWarning=!0),Reflect.get(d,m,f))})}return{data:{session:t},error:null}}const{data:s,error:i}=await this._callRefreshToken(t.refresh_token);return i?{data:{session:null},error:i}:{data:{session:s},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(t){return t?await this._getUser(t):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(t){try{return t?await yt(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:t,xform:qa}):await this._useSession(async r=>{var n,s,i;const{data:l,error:u}=r;if(u)throw u;return!(!((n=l.session)===null||n===void 0)&&n.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new za}:await yt(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(i=(s=l.session)===null||s===void 0?void 0:s.access_token)!==null&&i!==void 0?i:void 0,xform:qa})})}catch(r){if(ot(r))return qR(r)&&(await this._removeSession(),await La(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:r};throw r}}async updateUser(t,r={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(t,r))}async _updateUser(t,r={}){try{return await this._useSession(async n=>{const{data:s,error:i}=n;if(i)throw i;if(!s.session)throw new za;const l=s.session;let u=null,d=null;this.flowType==="pkce"&&t.email!=null&&([u,d]=await _l(this.storage,this.storageKey));const{data:m,error:f}=await yt(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:r==null?void 0:r.emailRedirectTo,body:Object.assign(Object.assign({},t),{code_challenge:u,code_challenge_method:d}),jwt:l.access_token,xform:qa});if(f)throw f;return l.user=m.user,await this._saveSession(l),await this._notifyAllSubscribers("USER_UPDATED",l),{data:{user:l.user},error:null}})}catch(n){if(ot(n))return{data:{user:null},error:n};throw n}}async setSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(t))}async _setSession(t){try{if(!t.access_token||!t.refresh_token)throw new za;const r=Date.now()/1e3;let n=r,s=!0,i=null;const{payload:l}=Sg(t.access_token);if(l.exp&&(n=l.exp,s=n<=r),s){const{data:u,error:d}=await this._callRefreshToken(t.refresh_token);if(d)return{data:{user:null,session:null},error:d};if(!u)return{data:{user:null,session:null},error:null};i=u}else{const{data:u,error:d}=await this._getUser(t.access_token);if(d)throw d;i={access_token:t.access_token,refresh_token:t.refresh_token,user:u.user,token_type:"bearer",expires_in:n-r,expires_at:n},await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)}return{data:{user:i.user,session:i},error:null}}catch(r){if(ot(r))return{data:{session:null,user:null},error:r};throw r}}async refreshSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(t))}async _refreshSession(t){try{return await this._useSession(async r=>{var n;if(!t){const{data:l,error:u}=r;if(u)throw u;t=(n=l.session)!==null&&n!==void 0?n:void 0}if(!(t!=null&&t.refresh_token))throw new za;const{data:s,error:i}=await this._callRefreshToken(t.refresh_token);return i?{data:{user:null,session:null},error:i}:s?{data:{user:s.user,session:s},error:null}:{data:{user:null,session:null},error:null}})}catch(r){if(ot(r))return{data:{user:null,session:null},error:r};throw r}}async _getSessionFromURL(t,r){try{if(!Ss())throw new ff("No browser detected.");if(t.error||t.error_description||t.error_code)throw new ff(t.error_description||"Error in URL with unspecified error_description",{error:t.error||"unspecified_error",code:t.error_code||"unspecified_code"});switch(r){case"implicit":if(this.flowType==="pkce")throw new Nj("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new ff("Not a valid implicit grant flow url.");break;default:}if(r==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!t.code)throw new Nj("No code detected.");const{data:C,error:N}=await this._exchangeCodeForSession(t.code);if(N)throw N;const O=new URL(window.location.href);return O.searchParams.delete("code"),window.history.replaceState(window.history.state,"",O.toString()),{data:{session:C.session,redirectType:null},error:null}}const{provider_token:n,provider_refresh_token:s,access_token:i,refresh_token:l,expires_in:u,expires_at:d,token_type:m}=t;if(!i||!u||!l||!m)throw new ff("No session defined in URL");const f=Math.round(Date.now()/1e3),p=parseInt(u);let y=f+p;d&&(y=parseInt(d));const x=y-f;x*1e3<=Rl&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${x}s, should have been closer to ${p}s`);const b=y-p;f-b>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",b,y,f):f-b<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",b,y,f);const{data:j,error:S}=await this._getUser(i);if(S)throw S;const k={provider_token:n,provider_refresh_token:s,access_token:i,expires_in:p,expires_at:y,refresh_token:l,token_type:m,user:j.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:k,redirectType:t.type},error:null}}catch(n){if(ot(n))return{data:{session:null,redirectType:null},error:n};throw n}}_isImplicitGrantCallback(t){return!!(t.access_token||t.error_description)}async _isPKCECallback(t){const r=await vo(this.storage,`${this.storageKey}-code-verifier`);return!!(t.code&&r)}async signOut(t={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(t))}async _signOut({scope:t}={scope:"global"}){return await this._useSession(async r=>{var n;const{data:s,error:i}=r;if(i)return{error:i};const l=(n=s.session)===null||n===void 0?void 0:n.access_token;if(l){const{error:u}=await this.admin.signOut(l,t);if(u&&!(VR(u)&&(u.status===404||u.status===401||u.status===403)))return{error:u}}return t!=="others"&&(await this._removeSession(),await La(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(t){const r=ZR(),n={id:r,callback:t,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",r),this.stateChangeEmitters.delete(r)}};return this._debug("#onAuthStateChange()","registered callback with id",r),this.stateChangeEmitters.set(r,n),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(r)})))(),{data:{subscription:n}}}async _emitInitialSession(t){return await this._useSession(async r=>{var n,s;try{const{data:{session:i},error:l}=r;if(l)throw l;await((n=this.stateChangeEmitters.get(t))===null||n===void 0?void 0:n.callback("INITIAL_SESSION",i)),this._debug("INITIAL_SESSION","callback id",t,"session",i)}catch(i){await((s=this.stateChangeEmitters.get(t))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",t,"error",i),console.error(i)}})}async resetPasswordForEmail(t,r={}){let n=null,s=null;this.flowType==="pkce"&&([n,s]=await _l(this.storage,this.storageKey,!0));try{return await yt(this.fetch,"POST",`${this.url}/recover`,{body:{email:t,code_challenge:n,code_challenge_method:s,gotrue_meta_security:{captcha_token:r.captchaToken}},headers:this.headers,redirectTo:r.redirectTo})}catch(i){if(ot(i))return{data:null,error:i};throw i}}async getUserIdentities(){var t;try{const{data:r,error:n}=await this.getUser();if(n)throw n;return{data:{identities:(t=r.user.identities)!==null&&t!==void 0?t:[]},error:null}}catch(r){if(ot(r))return{data:null,error:r};throw r}}async linkIdentity(t){return"token"in t?this.linkIdentityIdToken(t):this.linkIdentityOAuth(t)}async linkIdentityOAuth(t){var r;try{const{data:n,error:s}=await this._useSession(async i=>{var l,u,d,m,f;const{data:p,error:y}=i;if(y)throw y;const x=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,t.provider,{redirectTo:(l=t.options)===null||l===void 0?void 0:l.redirectTo,scopes:(u=t.options)===null||u===void 0?void 0:u.scopes,queryParams:(d=t.options)===null||d===void 0?void 0:d.queryParams,skipBrowserRedirect:!0});return await yt(this.fetch,"GET",x,{headers:this.headers,jwt:(f=(m=p.session)===null||m===void 0?void 0:m.access_token)!==null&&f!==void 0?f:void 0})});if(s)throw s;return Ss()&&!(!((r=t.options)===null||r===void 0)&&r.skipBrowserRedirect)&&window.location.assign(n==null?void 0:n.url),{data:{provider:t.provider,url:n==null?void 0:n.url},error:null}}catch(n){if(ot(n))return{data:{provider:t.provider,url:null},error:n};throw n}}async linkIdentityIdToken(t){return await this._useSession(async r=>{var n;try{const{error:s,data:{session:i}}=r;if(s)throw s;const{options:l,provider:u,token:d,access_token:m,nonce:f}=t,p=await yt(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(n=i==null?void 0:i.access_token)!==null&&n!==void 0?n:void 0,body:{provider:u,id_token:d,access_token:m,nonce:f,link_identity:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:ci}),{data:y,error:x}=p;return x?{data:{user:null,session:null},error:x}:!y||!y.session||!y.user?{data:{user:null,session:null},error:new Sl}:(y.session&&(await this._saveSession(y.session),await this._notifyAllSubscribers("USER_UPDATED",y.session)),{data:y,error:x})}catch(s){if(ot(s))return{data:{user:null,session:null},error:s};throw s}})}async unlinkIdentity(t){try{return await this._useSession(async r=>{var n,s;const{data:i,error:l}=r;if(l)throw l;return await yt(this.fetch,"DELETE",`${this.url}/user/identities/${t.identity_id}`,{headers:this.headers,jwt:(s=(n=i.session)===null||n===void 0?void 0:n.access_token)!==null&&s!==void 0?s:void 0})})}catch(r){if(ot(r))return{data:null,error:r};throw r}}async _refreshAccessToken(t){const r=`#_refreshAccessToken(${t.substring(0,5)}...)`;this._debug(r,"begin");try{const n=Date.now();return await n6(async s=>(s>0&&await r6(200*Math.pow(2,s-1)),this._debug(r,"refreshing attempt",s),await yt(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:t},headers:this.headers,xform:ci})),(s,i)=>{const l=200*Math.pow(2,s);return i&&jg(i)&&Date.now()+l-n<Rl})}catch(n){if(this._debug(r,"error",n),ot(n))return{data:{session:null,user:null},error:n};throw n}finally{this._debug(r,"end")}}_isValidSession(t){return typeof t=="object"&&t!==null&&"access_token"in t&&"refresh_token"in t&&"expires_at"in t}async _handleProviderSignIn(t,r){const n=await this._getUrlForProvider(`${this.url}/authorize`,t,{redirectTo:r.redirectTo,scopes:r.scopes,queryParams:r.queryParams});return this._debug("#_handleProviderSignIn()","provider",t,"options",r,"url",n),Ss()&&!r.skipBrowserRedirect&&window.location.assign(n),{data:{provider:t,url:n},error:null}}async _recoverAndRefresh(){var t,r;const n="#_recoverAndRefresh()";this._debug(n,"begin");try{const s=await vo(this.storage,this.storageKey);if(s&&this.userStorage){let l=await vo(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!l&&(l={user:s.user},await $l(this.userStorage,this.storageKey+"-user",l)),s.user=(t=l==null?void 0:l.user)!==null&&t!==void 0?t:_g()}else if(s&&!s.user&&!s.user){const l=await vo(this.storage,this.storageKey+"-user");l&&(l!=null&&l.user)?(s.user=l.user,await La(this.storage,this.storageKey+"-user"),await $l(this.storage,this.storageKey,s)):s.user=_g()}if(this._debug(n,"session from storage",s),!this._isValidSession(s)){this._debug(n,"session is not valid"),s!==null&&await this._removeSession();return}const i=((r=s.expires_at)!==null&&r!==void 0?r:1/0)*1e3-Date.now()<bg;if(this._debug(n,`session has${i?"":" not"} expired with margin of ${bg}s`),i){if(this.autoRefreshToken&&s.refresh_token){const{error:l}=await this._callRefreshToken(s.refresh_token);l&&(console.error(l),jg(l)||(this._debug(n,"refresh failed with a non-retryable error, removing the session",l),await this._removeSession()))}}else if(s.user&&s.user.__isUserNotAvailableProxy===!0)try{const{data:l,error:u}=await this._getUser(s.access_token);!u&&(l!=null&&l.user)?(s.user=l.user,await this._saveSession(s),await this._notifyAllSubscribers("SIGNED_IN",s)):this._debug(n,"could not get user data, skipping SIGNED_IN notification")}catch(l){console.error("Error getting user data:",l),this._debug(n,"error getting user data, skipping SIGNED_IN notification",l)}else await this._notifyAllSubscribers("SIGNED_IN",s)}catch(s){this._debug(n,"error",s),console.error(s);return}finally{this._debug(n,"end")}}async _callRefreshToken(t){var r,n;if(!t)throw new za;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const s=`#_callRefreshToken(${t.substring(0,5)}...)`;this._debug(s,"begin");try{this.refreshingDeferred=new Hh;const{data:i,error:l}=await this._refreshAccessToken(t);if(l)throw l;if(!i.session)throw new za;await this._saveSession(i.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",i.session);const u={data:i.session,error:null};return this.refreshingDeferred.resolve(u),u}catch(i){if(this._debug(s,"error",i),ot(i)){const l={data:null,error:i};return jg(i)||await this._removeSession(),(r=this.refreshingDeferred)===null||r===void 0||r.resolve(l),l}throw(n=this.refreshingDeferred)===null||n===void 0||n.reject(i),i}finally{this.refreshingDeferred=null,this._debug(s,"end")}}async _notifyAllSubscribers(t,r,n=!0){const s=`#_notifyAllSubscribers(${t})`;this._debug(s,"begin",r,`broadcast = ${n}`);try{this.broadcastChannel&&n&&this.broadcastChannel.postMessage({event:t,session:r});const i=[],l=Array.from(this.stateChangeEmitters.values()).map(async u=>{try{await u.callback(t,r)}catch(d){i.push(d)}});if(await Promise.all(l),i.length>0){for(let u=0;u<i.length;u+=1)console.error(i[u]);throw i[0]}}finally{this._debug(s,"end")}}async _saveSession(t){this._debug("#_saveSession()",t),this.suppressGetSessionWarning=!0;const r=Object.assign({},t),n=r.user&&r.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!n&&r.user&&await $l(this.userStorage,this.storageKey+"-user",{user:r.user});const s=Object.assign({},r);delete s.user;const i=Oj(s);await $l(this.storage,this.storageKey,i)}else{const s=Oj(r);await $l(this.storage,this.storageKey,s)}}async _removeSession(){this._debug("#_removeSession()"),await La(this.storage,this.storageKey),await La(this.storage,this.storageKey+"-code-verifier"),await La(this.storage,this.storageKey+"-user"),this.userStorage&&await La(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const t=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{t&&Ss()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",t)}catch(r){console.error("removing visibilitychange callback failed",r)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const t=setInterval(()=>this._autoRefreshTokenTick(),Rl);this.autoRefreshTicker=t,t&&typeof t=="object"&&typeof t.unref=="function"?t.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(t),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const t=this.autoRefreshTicker;this.autoRefreshTicker=null,t&&clearInterval(t)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const t=Date.now();try{return await this._useSession(async r=>{const{data:{session:n}}=r;if(!n||!n.refresh_token||!n.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const s=Math.floor((n.expires_at*1e3-t)/Rl);this._debug("#_autoRefreshTokenTick()",`access token expires in ${s} ticks, a tick lasts ${Rl}ms, refresh threshold is ${Nv} ticks`),s<=Nv&&await this._callRefreshToken(n.refresh_token)})}catch(r){console.error("Auto refresh tick failed with error. This is likely a transient error.",r)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(t){if(t.isAcquireTimeout||t instanceof CC)this._debug("auto refresh token tick lock not available");else throw t}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Ss()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(t){console.error("_handleVisibilityChange",t)}}async _onVisibilityChanged(t){const r=`#_onVisibilityChanged(${t})`;this._debug(r,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),t||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(r,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(t,r,n){const s=[`provider=${encodeURIComponent(r)}`];if(n!=null&&n.redirectTo&&s.push(`redirect_to=${encodeURIComponent(n.redirectTo)}`),n!=null&&n.scopes&&s.push(`scopes=${encodeURIComponent(n.scopes)}`),this.flowType==="pkce"){const[i,l]=await _l(this.storage,this.storageKey),u=new URLSearchParams({code_challenge:`${encodeURIComponent(i)}`,code_challenge_method:`${encodeURIComponent(l)}`});s.push(u.toString())}if(n!=null&&n.queryParams){const i=new URLSearchParams(n.queryParams);s.push(i.toString())}return n!=null&&n.skipBrowserRedirect&&s.push(`skip_http_redirect=${n.skipBrowserRedirect}`),`${t}?${s.join("&")}`}async _unenroll(t){try{return await this._useSession(async r=>{var n;const{data:s,error:i}=r;return i?{data:null,error:i}:await yt(this.fetch,"DELETE",`${this.url}/factors/${t.factorId}`,{headers:this.headers,jwt:(n=s==null?void 0:s.session)===null||n===void 0?void 0:n.access_token})})}catch(r){if(ot(r))return{data:null,error:r};throw r}}async _enroll(t){try{return await this._useSession(async r=>{var n,s;const{data:i,error:l}=r;if(l)return{data:null,error:l};const u=Object.assign({friendly_name:t.friendlyName,factor_type:t.factorType},t.factorType==="phone"?{phone:t.phone}:t.factorType==="totp"?{issuer:t.issuer}:{}),{data:d,error:m}=await yt(this.fetch,"POST",`${this.url}/factors`,{body:u,headers:this.headers,jwt:(n=i==null?void 0:i.session)===null||n===void 0?void 0:n.access_token});return m?{data:null,error:m}:(t.factorType==="totp"&&d.type==="totp"&&(!((s=d==null?void 0:d.totp)===null||s===void 0)&&s.qr_code)&&(d.totp.qr_code=`data:image/svg+xml;utf-8,${d.totp.qr_code}`),{data:d,error:null})})}catch(r){if(ot(r))return{data:null,error:r};throw r}}async _verify(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var n;const{data:s,error:i}=r;if(i)return{data:null,error:i};const l=Object.assign({challenge_id:t.challengeId},"webauthn"in t?{webauthn:Object.assign(Object.assign({},t.webauthn),{credential_response:t.webauthn.type==="create"?D6(t.webauthn.credential_response):R6(t.webauthn.credential_response)})}:{code:t.code}),{data:u,error:d}=await yt(this.fetch,"POST",`${this.url}/factors/${t.factorId}/verify`,{body:l,headers:this.headers,jwt:(n=s==null?void 0:s.session)===null||n===void 0?void 0:n.access_token});return d?{data:null,error:d}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+u.expires_in},u)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",u),{data:u,error:d})})}catch(r){if(ot(r))return{data:null,error:r};throw r}})}async _challenge(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var n;const{data:s,error:i}=r;if(i)return{data:null,error:i};const l=await yt(this.fetch,"POST",`${this.url}/factors/${t.factorId}/challenge`,{body:t,headers:this.headers,jwt:(n=s==null?void 0:s.session)===null||n===void 0?void 0:n.access_token});if(l.error)return l;const{data:u}=l;if(u.type!=="webauthn")return{data:u,error:null};switch(u.webauthn.type){case"create":return{data:Object.assign(Object.assign({},u),{webauthn:Object.assign(Object.assign({},u.webauthn),{credential_options:Object.assign(Object.assign({},u.webauthn.credential_options),{publicKey:T6(u.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},u),{webauthn:Object.assign(Object.assign({},u.webauthn),{credential_options:Object.assign(Object.assign({},u.webauthn.credential_options),{publicKey:I6(u.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(r){if(ot(r))return{data:null,error:r};throw r}})}async _challengeAndVerify(t){const{data:r,error:n}=await this._challenge({factorId:t.factorId});return n?{data:null,error:n}:await this._verify({factorId:t.factorId,challengeId:r.id,code:t.code})}async _listFactors(){var t;const{data:{user:r},error:n}=await this.getUser();if(n)return{data:null,error:n};const s={all:[],phone:[],totp:[],webauthn:[]};for(const i of(t=r==null?void 0:r.factors)!==null&&t!==void 0?t:[])s.all.push(i),i.status==="verified"&&s[i.factor_type].push(i);return{data:s,error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async t=>{var r,n;const{data:{session:s},error:i}=t;if(i)return{data:null,error:i};if(!s)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:l}=Sg(s.access_token);let u=null;l.aal&&(u=l.aal);let d=u;((n=(r=s.user.factors)===null||r===void 0?void 0:r.filter(p=>p.status==="verified"))!==null&&n!==void 0?n:[]).length>0&&(d="aal2");const f=l.amr||[];return{data:{currentLevel:u,nextLevel:d,currentAuthenticationMethods:f},error:null}}))}async fetchJwk(t,r={keys:[]}){let n=r.keys.find(u=>u.kid===t);if(n)return n;const s=Date.now();if(n=this.jwks.keys.find(u=>u.kid===t),n&&this.jwks_cached_at+BR>s)return n;const{data:i,error:l}=await yt(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(l)throw l;return!i.keys||i.keys.length===0||(this.jwks=i,this.jwks_cached_at=s,n=i.keys.find(u=>u.kid===t),!n)?null:n}async getClaims(t,r={}){try{let n=t;if(!n){const{data:x,error:b}=await this.getSession();if(b||!x.session)return{data:null,error:b};n=x.session.access_token}const{header:s,payload:i,signature:l,raw:{header:u,payload:d}}=Sg(n);r!=null&&r.allowExpired||u6(i.exp);const m=!s.alg||s.alg.startsWith("HS")||!s.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(s.kid,r!=null&&r.keys?{keys:r.keys}:r==null?void 0:r.jwks);if(!m){const{error:x}=await this.getUser(n);if(x)throw x;return{data:{claims:i,header:s,signature:l},error:null}}const f=d6(s.alg),p=await crypto.subtle.importKey("jwk",m,f,!0,["verify"]);if(!await crypto.subtle.verify(f,p,l,QR(`${u}.${d}`)))throw new Av("Invalid JWT signature");return{data:{claims:i,header:s,signature:l},error:null}}catch(n){if(ot(n))return{data:null,error:n};throw n}}}ju.nextInstanceID=0;const V6=ju;class q6 extends V6{constructor(t){super(t)}}var H6=function(e,t,r,n){function s(i){return i instanceof r?i:new r(function(l){l(i)})}return new(r||(r=Promise))(function(i,l){function u(f){try{m(n.next(f))}catch(p){l(p)}}function d(f){try{m(n.throw(f))}catch(p){l(p)}}function m(f){f.done?i(f.value):s(f.value).then(u,d)}m((n=n.apply(e,t||[])).next())})};class K6{constructor(t,r,n){var s,i,l;this.supabaseUrl=t,this.supabaseKey=r;const u=MR(t);if(!r)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",u),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",u),this.storageUrl=new URL("storage/v1",u),this.functionsUrl=new URL("functions/v1",u);const d=`sb-${u.hostname.split(".")[0]}-auth-token`,m={db:CR,realtime:AR,auth:Object.assign(Object.assign({},ER),{storageKey:d}),global:NR},f=$R(n??{},m);this.storageKey=(s=f.auth.storageKey)!==null&&s!==void 0?s:"",this.headers=(i=f.global.headers)!==null&&i!==void 0?i:{},f.accessToken?(this.accessToken=f.accessToken,this.auth=new Proxy({},{get:(p,y)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(y)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((l=f.auth)!==null&&l!==void 0?l:{},this.headers,f.global.fetch),this.fetch=IR(r,this._getAccessToken.bind(this),f.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},f.realtime)),this.rest=new W3(new URL("rest/v1",u).href,{headers:this.headers,schema:f.db.schema,fetch:this.fetch}),this.storage=new SR(this.storageUrl.href,this.headers,this.fetch,n==null?void 0:n.storage),f.accessToken||this._listenForAuthEvents()}get functions(){return new I3(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(t){return this.rest.from(t)}schema(t){return this.rest.schema(t)}rpc(t,r={},n={}){return this.rest.rpc(t,r,n)}channel(t,r={config:{}}){return this.realtime.channel(t,r)}getChannels(){return this.realtime.getChannels()}removeChannel(t){return this.realtime.removeChannel(t)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){return H6(this,void 0,void 0,function*(){var t,r;if(this.accessToken)return yield this.accessToken();const{data:n}=yield this.auth.getSession();return(r=(t=n.session)===null||t===void 0?void 0:t.access_token)!==null&&r!==void 0?r:this.supabaseKey})}_initSupabaseAuthClient({autoRefreshToken:t,persistSession:r,detectSessionInUrl:n,storage:s,userStorage:i,storageKey:l,flowType:u,lock:d,debug:m},f,p){const y={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new q6({url:this.authUrl.href,headers:Object.assign(Object.assign({},y),f),storageKey:l,autoRefreshToken:t,persistSession:r,detectSessionInUrl:n,storage:s,userStorage:i,flowType:u,lock:d,debug:m,fetch:p,hasCustomAuthorizationHeader:Object.keys(this.headers).some(x=>x.toLowerCase()==="authorization")})}_initRealtimeClient(t){return new aR(this.realtimeUrl.href,Object.assign(Object.assign({},t),{params:Object.assign({apikey:this.supabaseKey},t==null?void 0:t.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((r,n)=>{this._handleTokenChanged(r,"CLIENT",n==null?void 0:n.access_token)})}_handleTokenChanged(t,r,n){(t==="TOKEN_REFRESHED"||t==="SIGNED_IN")&&this.changedAccessToken!==n?(this.changedAccessToken=n,this.realtime.setAuth(n)):t==="SIGNED_OUT"&&(this.realtime.setAuth(),r=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const G6=(e,t,r)=>new K6(e,t,r);function Y6(){if(typeof window<"u"||typeof process>"u")return!1;const e=process.version;if(e==null)return!1;const t=e.match(/^v(\d+)\./);return t?parseInt(t[1],10)<=18:!1}Y6()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const J6="https://okdzllfpsvltjqryslnn.supabase.co",Q6="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im9rZHpsbGZwc3ZsdGpxcnlzbG5uIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTk3NTcxMTgsImV4cCI6MjA3NTMzMzExOH0.uLhMzo49-OMEp4ghFAFI31IpiDs1tjbyY2jZlk-vgUo",ze=G6(J6,Q6),aa="__FEATURE_SUGGESTION__",H0="__feature_suggestion__",X6="__feature_future_session__";function Kh(e){let t={};if(e!=null&&e.description)try{t=JSON.parse(e.description)}catch(s){console.warn("[databaseService] Unable to parse suggestion payload",s),t={}}const n=(Array.isArray(e==null?void 0:e.tags)?e.tags:[]).includes(X6)?"future":"pending";return{id:e.id,session_id:e.session_id,title:e.title,summary:t.summary??null,whatWouldItDo:t.whatWouldItDo??null,howWouldItWork:t.howWouldItWork??null,status:n,requester_id:t.requesterId??null,requester_name:t.requesterName??null,requester_email:t.requesterEmail??null,created_at:e.created_at}}async function Z6(e){const{data:t,error:r}=await ze.from("users").select("*").eq("email",e).single();if(r){if(r.code==="PGRST116")return null;throw r}return t}async function e5(e){const t="5e5482eb-82f0-4e76-8a6b-c6d74b01cd3a",{data:r,error:n}=await ze.from("users").insert([{email:e.email,name:e.name,tenant_id:e.tenant_id||t}]).select().single();if(n)throw n;return r}async function K0(e,t){let r=await Z6(e);return r||(r=await e5({email:e,name:t})),r}async function Fj(){const{data:e,error:t}=await ze.from("users").select("*").order("created_at",{ascending:!1});if(t)throw t;return e||[]}async function t5(e){var l,u;const[t,r,n]=await Promise.all([Vo(e),ze.from("session_admins").select("session_id").eq("user_id",e),ze.from("users").select("email").eq("id",e).single()]),s=((l=r.data)==null?void 0:l.length)||0;let i=0;if((u=n.data)!=null&&u.email){const{data:d}=await ze.from("session_stakeholders").select("session_id").eq("user_email",n.data.email);i=(d==null?void 0:d.length)||0}return{userId:e,isSystemAdmin:t,sessionAdminCount:s,stakeholderSessionCount:i}}const uc="PRODUCTS_TABLE_MISSING";function ra(e){return typeof e=="object"&&e!==null&&e.code===uc}async function OC(){const{data:e,error:t}=await ze.from("products").select("*").order("name",{ascending:!0});if(t){if((t==null?void 0:t.code)==="PGRST205"){const r=new Error("Products table is missing");throw r.code=uc,r}throw t}return e||[]}async function Ji(e){const{data:t,error:r}=await ze.from("products").select("*").eq("tenant_id",e).order("name",{ascending:!0});if(r){if((r==null?void 0:r.code)==="PGRST205"){const n=new Error("Products table is missing");throw n.code=uc,n}throw r}return t||[]}async function G0(e,t){if(!e)throw new Error("Product ID is required");const r={};if(t.name!==void 0){const i=t.name.trim();if(!i)throw new Error("Product name cannot be empty");r.name=i}if(t.color_hex!==void 0&&(r.color_hex=t.color_hex),Object.keys(r).length===0)throw new Error("No updates provided");const{data:n,error:s}=await ze.from("products").update(r).eq("id",e).select().single();if(s){if((s==null?void 0:s.code)==="PGRST205"){const i=new Error("Products table is missing");throw i.code=uc,i}throw s}return n}async function TC(e,t,r){const n=t.trim();if(!n)throw new Error("Product name is required");const{data:s,error:i}=await ze.from("products").insert([{name:n,tenant_id:e,color_hex:r||null}]).select().single();if(i){if((i==null?void 0:i.code)==="PGRST205"){const l=new Error("Products table is missing");throw l.code=uc,l}if((i==null?void 0:i.code)==="23505"){const{data:l,error:u}=await ze.from("products").select("*").eq("tenant_id",e).eq("name",n).maybeSingle();if(u)throw u;if(l)return l}throw i}return s}async function IC(e){const{error:t}=await ze.from("products").delete().eq("id",e);if(t){if((t==null?void 0:t.code)==="PGRST205"){const r=new Error("Products table is missing");throw r.code=uc,r}throw t}}const Uu="*, product:products(name)";function Gh(e){if(!e)throw new Error("Unexpected empty session row");const{product:t,...r}=e,n=r.product_name??(t==null?void 0:t.name)??null;return{...r,product_name:n}}function DC(e){return!e||e.length===0?[]:e.map(t=>Gh(t))}async function oa(){const{data:e,error:t}=await ze.from("voting_sessions").select(Uu).order("created_at",{ascending:!1});if(t)throw t;return DC(e)}async function r5(e){const{data:t,error:r}=await ze.from("voting_sessions").select(Uu).eq("id",e).single();if(r){if(r.code==="PGRST116")return null;throw r}return t?Gh(t):null}async function n5(e){const{data:t,error:r}=await ze.from("voting_sessions").select(Uu).eq("session_code",e).single();if(r){if(r.code==="PGRST116")return null;throw r}return t?Gh(t):null}async function RC(e){if(await Vo(e))return oa();const{data:r,error:n}=await ze.from("session_admins").select("session_id").eq("user_id",e);if(n)throw n;const s=(r==null?void 0:r.map(y=>y.session_id))||[],i=await ze.from("users").select("email").eq("id",e).single();if(i.error)throw i.error;const{data:l,error:u}=await ze.from("session_stakeholders").select("session_id").eq("user_email",i.data.email);if(u)throw u;const d=(l==null?void 0:l.map(y=>y.session_id))||[],m=[...new Set([...s,...d])];if(m.length===0)return[];const{data:f,error:p}=await ze.from("voting_sessions").select(Uu).in("id",m).order("created_at",{ascending:!1});if(p)throw p;return DC(f)}async function $C(e){if(!e)return null;const{data:t,error:r}=await ze.from("voting_sessions").select(Uu).eq("product_id",e).eq("is_active",!0).maybeSingle();if(r){if(r.code==="PGRST116")return null;throw r}return t?Gh(t):null}async function MC(e){const{data:t,error:r}=await ze.from("voting_sessions").insert([e]).select().single();if(r)throw r;return t}async function FC(e,t){const{data:r,error:n}=await ze.from("voting_sessions").update(t).eq("id",e).select().single();if(n)throw n;return r}async function s5(e){const{error:t}=await ze.from("voting_sessions").delete().eq("id",e);if(t)throw t}async function i5(e,t){const{error:r}=await ze.from("votes").delete().eq("session_id",e).eq("feature_id",t);if(r)throw r}async function LC(e){const{data:t,error:r}=await ze.from("session_admins").select(`
      *,
      users (*)
    `).eq("session_id",e);if(r)throw r;return(t||[]).map(n=>({id:n.id,session_id:n.session_id,user_id:n.user_id,created_at:n.created_at,user:n.users}))}async function Vl(e,t){const{data:r,error:n}=await ze.from("session_admins").insert([{session_id:e,user_id:t}]).select().single();if(n)throw n;return r}async function a5(e,t,r){const n=await K0(t,r);return Vl(e,n.id)}async function If(e,t){const{error:r}=await ze.from("session_admins").delete().eq("session_id",e).eq("user_id",t);if(r)throw r}async function Su(e,t){try{if(await Vo(t))return!0;const{data:n,error:s}=await ze.from("session_admins").select("id").eq("session_id",e).eq("user_id",t).maybeSingle();return s?(console.error("Error checking admin status:",s),!1):!!n}catch(r){return console.error("Caught exception checking admin:",r),!1}}async function zC(e){const{data:t,error:r}=await ze.from("session_stakeholders").select("*").eq("session_id",e).order("user_name",{ascending:!0});if(r)throw r;return t||[]}async function UC(e){const{data:t,error:r}=await ze.from("session_stakeholders").insert([e]).select().single();if(r)throw r;return t}async function Lj(e,t,r){return UC({session_id:e,user_email:t,user_name:r,votes_allocated:0,has_voted:!1})}function BC(e,t,r){const n=`${window.location.origin}/login?session=${e.session_code??""}`,s=encodeURIComponent(`You're invited to vote: ${e.title}`),i=encodeURIComponent(`Hi,

You've been invited to participate in a feature voting session.

Session: ${e.title}
Goal: ${e.goal}

To get started, copy and paste this link into your browser:

${n}

Voting Period: ${e.start_date?zj(e.start_date):""} - ${e.end_date?zj(e.end_date):""}

Best regards,
${r}`);return`mailto:${encodeURIComponent(t)}?subject=${s}&body=${i}`}function zj(e){return new Date(e).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})}async function Pv(e,t){const{error:r}=await ze.from("session_stakeholders").delete().eq("session_id",e).eq("user_email",t);if(r)throw r}async function Y0(e,t){try{const{data:r,error:n}=await ze.from("session_stakeholders").select("id").eq("session_id",e).eq("user_email",t).maybeSingle();return n?(console.error("Error checking stakeholder status:",n),!1):!!r}catch(r){return console.error("Caught exception checking stakeholder:",r),!1}}async function o5(e,t){const{data:r,error:n}=await ze.from("session_stakeholders").select("id").eq("session_id",e).eq("user_email",t.toLowerCase()).maybeSingle();return n?(console.error("Error checking stakeholder status:",n),!1):!!r}async function Ng(e,t){const{error:r}=await ze.from("session_stakeholders").delete().eq("session_id",e).eq("user_email",t.toLowerCase());if(r)throw r}async function Ua(e){const{data:t,error:r}=await ze.from("features").select("*").eq("session_id",e).order("created_at",{ascending:!1});if(r)throw r;return(t||[]).filter(n=>{const s=n.state===aa,i=Array.isArray(n.tags)&&n.tags.includes(H0);return!s&&!i})}async function Cg(e){const{data:t,error:r}=await ze.from("features").insert([{session_id:e.session_id,title:e.title,description:e.description,epic:e.epic,state:e.state,area_path:e.areaPath,tags:e.tags,azure_devops_id:e.azure_devops_id,azure_devops_url:e.azure_devops_url}]).select().single();if(r)throw r;return t}async function Eg(e,t){const r={};t.title!==void 0&&(r.title=t.title),t.description!==void 0&&(r.description=t.description),t.epic!==void 0&&(r.epic=t.epic),t.state!==void 0&&(r.state=t.state),t.areaPath!==void 0&&(r.area_path=t.areaPath),t.tags!==void 0&&(r.tags=t.tags),t.azure_devops_id!==void 0&&(r.azure_devops_id=t.azure_devops_id),t.azure_devops_url!==void 0&&(r.azure_devops_url=t.azure_devops_url);const{data:n,error:s}=await ze.from("features").update(r).eq("id",e).select().single();if(s)throw s;return n}async function Uj(e){const{error:t}=await ze.from("features").delete().eq("id",e);if(t)throw t}function WC(e){return{id:e.id,sessionId:e.session_id,type:e.type,reason:e.reason,details:e.details??null,actorName:e.actor_name??"Admin",actorId:e.actor_id??null,createdAt:e.created_at}}async function l5(e){try{const{data:t,error:r}=await ze.from("session_status_notes").select("*").eq("session_id",e).order("created_at",{ascending:!1});if(r)throw r;return(t||[]).map(WC)}catch(t){if((t==null?void 0:t.code)==="42P01")return console.warn("[databaseService] session_status_notes table not found; status notes will not persist.",t),[];throw t}}async function c5(e){try{const{data:t,error:r}=await ze.from("session_status_notes").insert([{session_id:e.session_id,type:e.type,reason:e.reason,details:e.details??null,actor_id:e.actor_id??null,actor_name:e.actor_name}]).select("*").single();if(r)throw r;return WC(t)}catch(t){if((t==null?void 0:t.code)==="42P01")return console.warn("[databaseService] session_status_notes table not found; status notes will not persist.",t),{id:`temp-${Date.now()}`,sessionId:e.session_id,type:e.type,reason:e.reason,details:e.details??null,actorName:e.actor_name,actorId:e.actor_id??null,createdAt:new Date().toISOString()};throw t}}async function Ll(e){const{data:t,error:r}=await ze.from("votes").select("*").eq("session_id",e);if(r)throw r;return t||[]}async function u5(e){const{data:t}=await ze.from("votes").select("*").eq("session_id",e.session_id).eq("feature_id",e.feature_id).eq("user_id",e.user_id).single();if(t){const{data:r,error:n}=await ze.from("votes").update({vote_count:e.vote_count}).eq("session_id",e.session_id).eq("feature_id",e.feature_id).eq("user_id",e.user_id).select().single();if(n)throw n;return r}else{const{data:r,error:n}=await ze.from("votes").insert([e]).select().single();if(n)throw n;return r}}async function d5(e,t){const{error:r}=await ze.from("votes").delete().eq("session_id",e).eq("user_id",t);if(r)throw console.error("Error deleting user votes:",r),r}async function f5(e){const{error:t}=await ze.from("votes").delete().eq("session_id",e);if(t)throw t}async function h5(e){try{const{data:t,error:r}=await ze.from("azure_devops_config").select("*").eq("session_id",e).maybeSingle();if(r){if(r.code==="PGRST116")return null;throw r}return t}catch(t){return console.error("Error getting Azure DevOps config:",t),null}}async function El(e,t){try{const r={session_id:e,organization:t.organization,project:t.project,enabled:t.enabled,work_item_type:t.workItemType};t.accessToken!==void 0&&(r.access_token=t.accessToken),t.refreshToken!==void 0&&(r.refresh_token=t.refreshToken),t.tokenExpiresAt!==void 0&&(r.token_expires_at=t.tokenExpiresAt),t.tenantId!==void 0&&(r.tenant_id=t.tenantId),t.clientId!==void 0&&(r.client_id=t.clientId),t.query!==void 0&&(r.query=t.query),t.lastSyncTime!==void 0&&(r.last_sync_time=t.lastSyncTime),t.states!==void 0&&(r.states=t.states),t.areaPath!==void 0&&(r.area_path=t.areaPath),t.tags!==void 0&&(r.tags=t.tags);const{data:n,error:s}=await ze.from("azure_devops_config").update(r).eq("session_id",e).select();if(!s&&n&&n.length>0)return n[0];const{data:i,error:l}=await ze.from("azure_devops_config").upsert([r]).select().single();if(!l)return i;if((l==null?void 0:l.code)==="23505"){const{data:u,error:d}=await ze.from("azure_devops_config").select("*").eq("session_id",e).maybeSingle();if(d)throw d;return u}throw l||s}catch(r){throw console.error("Error saving Azure DevOps config:",r),r}}async function m5(){return(await oa())[0]||null}async function p5(e){const t=await m5();if(!t)throw new Error("No session found");return FC(t.id,e)}async function Bj(e,t){return FC(e,t)}async function g5(e){const{data:t,error:r}=await ze.from("info_requests").insert([{session_id:e.session_id,feature_id:e.feature_id,feature_title:e.feature_title,requester_id:e.requester_id,requester_name:e.requester_name,requester_email:e.requester_email,created_at:e.created_at}]).select().single();if(r)throw r;return t}async function y5(e){const t={summary:e.description??null,whatWouldItDo:e.whatWouldItDo??null,howWouldItWork:e.howWouldItWork??null,requesterId:e.requester_id??null,requesterName:e.requester_name??null,requesterEmail:e.requester_email??null},{data:r,error:n}=await ze.from("features").insert([{session_id:e.session_id,title:e.title,description:JSON.stringify(t),epic:null,state:aa,area_path:null,tags:[H0],azure_devops_id:null,azure_devops_url:null}]).select("id, session_id, title, description, created_at").single();if(n)throw n;return Kh(r)}async function v5(e,t){const{data:r,error:n}=await ze.from("features").select("id, title, description, session_id, created_at").eq("id",e).eq("state",aa).single();if(n)throw n;let s={};if(r!=null&&r.description)try{s=JSON.parse(r.description)}catch(d){console.warn("[databaseService] Unable to parse suggestion payload during update",d)}const i={summary:t.summary??s.summary??null,whatWouldItDo:t.whatWouldItDo??s.whatWouldItDo??null,howWouldItWork:t.howWouldItWork??s.howWouldItWork??null,requesterId:s.requesterId??null,requesterName:t.requester_name??s.requesterName??null,requesterEmail:t.requester_email??s.requesterEmail??null},{data:l,error:u}=await ze.from("features").update({title:t.title??r.title,description:JSON.stringify(i)}).eq("id",e).eq("state",aa).select("id, session_id, title, description, created_at").single();if(u)throw u;return Kh(l)}async function x5(e){const{error:t}=await ze.from("features").delete().eq("id",e).eq("state",aa);if(t)throw t}async function w5(e,t){const{data:r,error:n}=await ze.from("features").update({session_id:t}).eq("id",e).eq("state",aa).select("id, session_id, title, description, created_at").single();if(n)throw n;return Kh(r)}async function b5(e){const{data:t,error:r}=await ze.from("features").select("*").eq("id",e).eq("state",aa).single();if(r)throw r;let n={};if(t!=null&&t.description)try{n=JSON.parse(t.description)}catch(d){console.warn("[databaseService] Unable to parse suggestion payload during promotion",d)}const s=[];n.summary&&s.push(n.summary),n.whatWouldItDo&&s.push(`What would it do?
${n.whatWouldItDo}`),n.howWouldItWork&&s.push(`How would it work?
${n.howWouldItWork}`);const i=Array.isArray(t.tags)?t.tags.filter(d=>d!==H0):[],{data:l,error:u}=await ze.from("features").update({description:s.join(`

`)||t.title,state:null,tags:i}).eq("id",e).eq("state",aa).select("*").single();if(u)throw u;return l}async function j5(e){const{data:t,error:r}=await ze.from("features").select("id, session_id, title, description, created_at, state, tags").eq("session_id",e).eq("state",aa).order("created_at",{ascending:!1});if(r)throw r;return(t||[]).map(Kh)}async function Ov(){const{data:e,error:t}=await ze.from("system_admins").select(`
      *,
      users (*)
    `).order("created_at",{ascending:!1});if(t)throw t;return(e||[]).map(r=>({id:r.id,user_id:r.user_id,created_at:r.created_at,user:r.users}))}async function Yf(e){const{data:t,error:r}=await ze.from("system_admins").insert([{user_id:e}]).select().single();if(r)throw r;return t}async function Df(e){const{error:t}=await ze.from("system_admins").delete().eq("user_id",e);if(t)throw t}async function Vo(e){try{const{data:t,error:r}=await ze.from("system_admins").select("id").eq("user_id",e).maybeSingle();return r?(console.error("Error checking system admin status:",r),!1):!!t}catch(t){return console.error("Caught exception checking system admin:",t),!1}}const S5=["dave.hoffman@newmill.com"],_5="".split(",").map(e=>e.trim().toLowerCase()).filter(Boolean),k5=Array.from(new Set([...S5,..._5]));function Tv(e){return e?k5.includes(e.toLowerCase()):!1}const VC=v.createContext(void 0);function N5({children:e}){const[t,r]=v.useState(null),[n,s]=v.useState([]),[i,l]=v.useState(null),[u,d]=v.useState(!1),[m,f]=v.useState(!1),[p,y]=v.useState(!1),[x,b]=v.useState(!0),[j,S]=v.useState(!1);v.useEffect(()=>{(async()=>{const T=localStorage.getItem("voting_system_user");if(T)try{const D=JSON.parse(T);l(D),await k(D)}catch(D){console.error("Error loading stored user:",D),localStorage.removeItem("voting_system_user")}b(!1)})()},[]),v.useEffect(()=>{(async()=>{if(!t||!i){d(!1),f(!1),S(!1);return}if(!j)try{const[T,D]=await Promise.all([Su(t.id,i.id),Y0(t.id,i.email)]);d(T),f(D),S(!1)}catch(T){console.error("Error checking user roles:",T),d(!1),f(!1),S(!0)}})()},[t,i,j]),v.useEffect(()=>{(async()=>{if(!i){y(!1);return}if(Tv(i.email)){y(!0);return}try{const D=await Vo(i.id);y(D)}catch(D){console.error("Error checking system admin status:",D),y(!1)}})()},[i]);const k=v.useCallback(async P=>{const T=P||i;if(!T){s([]),r(D=>{if(D)try{localStorage.removeItem("voting_system_current_session")}catch{}return null});return}try{const q=Tv(T.email)?await oa():await RC(T.id);s(q),r(F=>{if(!F)return F;const K=q.find(B=>B.id===F.id);if(!K){try{localStorage.removeItem("voting_system_current_session")}catch{}return null}if(K.id!==F.id)return F;if(K!==F){try{localStorage.setItem("voting_system_current_session",K.id)}catch{}return K}return F})}catch(D){console.error("Error loading sessions:",D),s([])}},[i]),C=v.useCallback(async P=>{l(P),S(!1),P?(localStorage.setItem("voting_system_user",JSON.stringify(P)),await k(P)):(localStorage.removeItem("voting_system_user"),s([]),r(null),y(!1))},[k]),N=v.useCallback(P=>{r(P),S(!1),P?localStorage.setItem("voting_system_current_session",P.id):localStorage.removeItem("voting_system_current_session")},[]);v.useEffect(()=>{(async()=>{if(!i||n.length===0)return;const T=localStorage.getItem("voting_system_current_session");if(T){const D=n.find(q=>q.id===T);D&&r(D)}})()},[i,n]);const O={currentSession:t,sessions:n,currentUser:i,isAdmin:u,isStakeholder:m,isSystemAdmin:p,setCurrentSession:N,refreshSessions:k,setCurrentUser:C};return x?o.jsx("div",{className:"min-h-screen w-full bg-gray-50 flex items-center justify-center",children:o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-[#2d4660] mx-auto mb-4"}),o.jsx("p",{className:"text-gray-600",children:"Loading..."})]})}):o.jsx(VC.Provider,{value:O,children:e})}function Fi(){const e=v.useContext(VC);if(e===void 0)throw new Error("useSession must be used within a SessionProvider");return e}function J0(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function"){var s=0;for(n=Object.getOwnPropertySymbols(e);s<n.length;s++)t.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(e,n[s])&&(r[n[s]]=e[n[s]])}return r}function Za(e,t,r,n){return new(r||(r=Promise))((function(s,i){function l(m){try{d(n.next(m))}catch(f){i(f)}}function u(m){try{d(n.throw(m))}catch(f){i(f)}}function d(m){var f;m.done?s(m.value):(f=m.value,f instanceof r?f:new r((function(p){p(f)}))).then(l,u)}d((n=n.apply(e,[])).next())}))}var Wj,Vj,qj,Jf,Hj,Kj,Gj,Iv,Yj,Jj;function C5(e){return(e==null?void 0:e.errorCode)!==void 0}(function(e){e.Inline="inline",e.Desktop="desktop",e.Web="web"})(Wj||(Wj={})),(function(e){e.M365Content="m365content"})(Vj||(Vj={})),(function(e){e.DriveId="driveId",e.GroupId="groupId",e.SiteId="siteId",e.UserId="userId"})(qj||(qj={})),(function(e){e[e.NOT_SUPPORTED_ON_PLATFORM=100]="NOT_SUPPORTED_ON_PLATFORM",e[e.INTERNAL_ERROR=500]="INTERNAL_ERROR",e[e.NOT_SUPPORTED_IN_CURRENT_CONTEXT=501]="NOT_SUPPORTED_IN_CURRENT_CONTEXT",e[e.PERMISSION_DENIED=1e3]="PERMISSION_DENIED",e[e.NETWORK_ERROR=2e3]="NETWORK_ERROR",e[e.NO_HW_SUPPORT=3e3]="NO_HW_SUPPORT",e[e.INVALID_ARGUMENTS=4e3]="INVALID_ARGUMENTS",e[e.UNAUTHORIZED_USER_OPERATION=5e3]="UNAUTHORIZED_USER_OPERATION",e[e.INSUFFICIENT_RESOURCES=6e3]="INSUFFICIENT_RESOURCES",e[e.THROTTLE=7e3]="THROTTLE",e[e.USER_ABORT=8e3]="USER_ABORT",e[e.OPERATION_TIMED_OUT=8001]="OPERATION_TIMED_OUT",e[e.OLD_PLATFORM=9e3]="OLD_PLATFORM",e[e.FILE_NOT_FOUND=404]="FILE_NOT_FOUND",e[e.SIZE_EXCEEDED=1e4]="SIZE_EXCEEDED"})(Jf||(Jf={})),(function(e){e.GeoLocation="geolocation",e.Media="media"})(Hj||(Hj={})),(function(e){e.BCAIS="bcais",e.BCWAF="bcwaf",e.BCWBF="bcwbf"})(Kj||(Kj={})),(function(e){e.Faculty="faculty",e.Student="student",e.Other="other"})(Gj||(Gj={})),(function(e){e.Adult="adult",e.MinorNoParentalConsentRequired="minorNoParentalConsentRequired",e.MinorWithoutParentalConsent="minorWithoutParentalConsent",e.MinorWithParentalConsent="minorWithParentalConsent",e.NotAdult="notAdult",e.NonAdult="notAdult"})(Iv||(Iv={})),(function(e){e.HigherEducation="higherEducation",e.K12="k12",e.Other="other"})(Yj||(Yj={})),(function(e){e.TextPlain="text/plain",e.TextHtml="text/html",e.ImagePNG="image/png",e.ImageJPEG="image/jpeg"})(Jj||(Jj={}));var $t,Dv,Rv,Qj,Xj,Zj,eS,tS;(function(e){e.desktop="desktop",e.web="web",e.android="android",e.ios="ios",e.ipados="ipados",e.macos="macos",e.visionOS="visionOS",e.rigel="rigel",e.surfaceHub="surfaceHub",e.teamsRoomsWindows="teamsRoomsWindows",e.teamsRoomsAndroid="teamsRoomsAndroid",e.teamsPhones="teamsPhones",e.teamsDisplays="teamsDisplays"})($t||($t={})),(function(e){e.office="Office",e.outlook="Outlook",e.outlookWin32="OutlookWin32",e.orange="Orange",e.places="Places",e.teams="Teams",e.teamsModern="TeamsModern"})(Dv||(Dv={})),(function(e){e.settings="settings",e.content="content",e.authentication="authentication",e.remove="remove",e.task="task",e.sidePanel="sidePanel",e.stage="stage",e.meetingStage="meetingStage"})(Rv||(Rv={})),(function(e){e.copilotSidePanel="copilotSidePanel",e.copilotMainPane="copilotMainPane",e.copilotFullScreen="copilotFullScreen"})(Qj||(Qj={})),(function(e){e[e.Standard=0]="Standard",e[e.Edu=1]="Edu",e[e.Class=2]="Class",e[e.Plc=3]="Plc",e[e.Staff=4]="Staff"})(Xj||(Xj={})),(function(e){e[e.Admin=0]="Admin",e[e.User=1]="User",e[e.Guest=2]="Guest"})(Zj||(Zj={})),(function(e){e.Large="large",e.Medium="medium",e.Small="small"})(eS||(eS={})),(function(e){e.Regular="Regular",e.Private="Private",e.Shared="Shared"})(tS||(tS={}));const E5={errorCode:Jf.NOT_SUPPORTED_ON_PLATFORM},A5={adaptiveCardSchemaVersion:{majorVersion:1,minorVersion:5}};var rS={randomUUID:typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};let hf;const P5=new Uint8Array(16);function O5(){if(!hf&&(hf=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!hf))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return hf(P5)}const En=[];for(let e=0;e<256;++e)En.push((e+256).toString(16).slice(1));function T5(e,t=0){return En[e[t+0]]+En[e[t+1]]+En[e[t+2]]+En[e[t+3]]+"-"+En[e[t+4]]+En[e[t+5]]+"-"+En[e[t+6]]+En[e[t+7]]+"-"+En[e[t+8]]+En[e[t+9]]+"-"+En[e[t+10]]+En[e[t+11]]+En[e[t+12]]+En[e[t+13]]+En[e[t+14]]+En[e[t+15]]}function I5(e,t,r){if(rS.randomUUID&&!e)return rS.randomUUID();const n=(e=e||{}).random||(e.rng||O5)();return n[6]=15&n[6]|64,n[8]=63&n[8]|128,T5(n)}var D5=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function R5(e){return typeof e=="string"&&D5.test(e)}function qC(e,t){if(typeof e!="string"||typeof t!="string")return NaN;const r=e.split("."),n=t.split(".");function s(i){return/^\d+$/.test(i)}if(!r.every(s)||!n.every(s))return NaN;for(;r.length<n.length;)r.push("0");for(;n.length<r.length;)n.push("0");for(let i=0;i<r.length;++i)if(Number(r[i])!=Number(n[i]))return Number(r[i])>Number(n[i])?1:-1;return 0}function $5(){return I5()}function HC(e){return Object.keys(e).forEach((t=>{e[t]!==null&&e[t]!==void 0&&typeof e[t]=="object"&&HC(e[t])})),Object.freeze(e)}function M5(e,t,r){return new Promise(((n,s)=>{const i=setTimeout(s,t,r);e().then((l=>{clearTimeout(i),n(l)})).catch((l=>{clearTimeout(i),s(l)}))}))}function F5(e){return e.protocol==="https:"}function L5(){if(Yh())throw new Error("window object undefined at SSR check");return window}function Yh(){return typeof window>"u"}function z5(e){return new RegExp(`${/<script[^>]*>|&lt;script[^&]*&gt;|%3Cscript[^%]*%3E/gi.source}|${/<\/script[^>]*>|&lt;\/script[^&]*&gt;|%3C\/script[^%]*%3E/gi.source}`,"gi").test(e)}function U5(e){if(!e)throw new Error("id must not be empty");if(R5(e)===!1)throw new Error("id must be a valid UUID")}const B5=!!performance&&"now"in performance;function Q0(){return B5?performance.now()+performance.timeOrigin:void 0}function nS(e){var t,r;if(!(!((r=(t=e.hostVersionsInfo)===null||t===void 0?void 0:t.appEligibilityInformation)===null||r===void 0)&&r.ageGroup))return e;const n=e.hostVersionsInfo.appEligibilityInformation.ageGroup;return(n==null?void 0:n.toLowerCase())!=="nonadult"?e:Object.assign(Object.assign({},e),{hostVersionsInfo:Object.assign(Object.assign({},e.hostVersionsInfo),{appEligibilityInformation:Object.assign(Object.assign({},e.hostVersionsInfo.appEligibilityInformation),{ageGroup:Iv.NotAdult})})})}let Bu=class{constructor(t=$5()){this.uuid=t,U5(t)}toString(){return this.uuid}serialize(){return this.toString()}};const KC=e=>{const{uuid:t}=e,r=J0(e,["uuid"]),n=t==null?void 0:t.toString();return Object.assign(Object.assign({},r),{uuidAsString:n})},W5=e=>{const{uuidAsString:t}=e,r=J0(e,["uuidAsString"]);return Object.assign(Object.assign({},r),{uuid:t?new Bu(t):void 0})};var $v={exports:{}},sS,iS;function V5(){if(iS)return sS;iS=1;var e=1e3,t=60*e,r=60*t,n=24*r,s=7*n,i=365.25*n;function l(u,d,m,f){var p=d>=1.5*m;return Math.round(u/m)+" "+f+(p?"s":"")}return sS=function(u,d){d=d||{};var m=typeof u;if(m==="string"&&u.length>0)return(function(f){if(!((f=String(f)).length>100)){var p=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(f);if(p){var y=parseFloat(p[1]);switch((p[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return y*i;case"weeks":case"week":case"w":return y*s;case"days":case"day":case"d":return y*n;case"hours":case"hour":case"hrs":case"hr":case"h":return y*r;case"minutes":case"minute":case"mins":case"min":case"m":return y*t;case"seconds":case"second":case"secs":case"sec":case"s":return y*e;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return y;default:return}}}})(u);if(m==="number"&&isFinite(u))return d.long?(function(f){var p=Math.abs(f);return p>=n?l(f,p,n,"day"):p>=r?l(f,p,r,"hour"):p>=t?l(f,p,t,"minute"):p>=e?l(f,p,e,"second"):f+" ms"})(u):(function(f){var p=Math.abs(f);return p>=n?Math.round(f/n)+"d":p>=r?Math.round(f/r)+"h":p>=t?Math.round(f/t)+"m":p>=e?Math.round(f/e)+"s":f+"ms"})(u);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(u))}}var q5=function(e){function t(s){let i,l,u,d=null;function m(...f){if(!m.enabled)return;const p=m,y=Number(new Date),x=y-(i||y);p.diff=x,p.prev=i,p.curr=y,i=y,f[0]=t.coerce(f[0]),typeof f[0]!="string"&&f.unshift("%O");let b=0;f[0]=f[0].replace(/%([a-zA-Z%])/g,((j,S)=>{if(j==="%%")return"%";b++;const k=t.formatters[S];if(typeof k=="function"){const C=f[b];j=k.call(p,C),f.splice(b,1),b--}return j})),t.formatArgs.call(p,f),(p.log||t.log).apply(p,f)}return m.namespace=s,m.useColors=t.useColors(),m.color=t.selectColor(s),m.extend=r,m.destroy=t.destroy,Object.defineProperty(m,"enabled",{enumerable:!0,configurable:!1,get:()=>d!==null?d:(l!==t.namespaces&&(l=t.namespaces,u=t.enabled(s)),u),set:f=>{d=f}}),typeof t.init=="function"&&t.init(m),m}function r(s,i){const l=t(this.namespace+(i===void 0?":":i)+s);return l.log=this.log,l}function n(s){return s.toString().substring(2,s.toString().length-2).replace(/\.\*\?$/,"*")}return t.debug=t,t.default=t,t.coerce=function(s){return s instanceof Error?s.stack||s.message:s},t.disable=function(){const s=[...t.names.map(n),...t.skips.map(n).map((i=>"-"+i))].join(",");return t.enable(""),s},t.enable=function(s){let i;t.save(s),t.namespaces=s,t.names=[],t.skips=[];const l=(typeof s=="string"?s:"").split(/[\s,]+/),u=l.length;for(i=0;i<u;i++)l[i]&&((s=l[i].replace(/\*/g,".*?"))[0]==="-"?t.skips.push(new RegExp("^"+s.slice(1)+"$")):t.names.push(new RegExp("^"+s+"$")))},t.enabled=function(s){if(s[s.length-1]==="*")return!0;let i,l;for(i=0,l=t.skips.length;i<l;i++)if(t.skips[i].test(s))return!1;for(i=0,l=t.names.length;i<l;i++)if(t.names[i].test(s))return!0;return!1},t.humanize=V5(),t.destroy=function(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")},Object.keys(e).forEach((s=>{t[s]=e[s]})),t.names=[],t.skips=[],t.formatters={},t.selectColor=function(s){let i=0;for(let l=0;l<s.length;l++)i=(i<<5)-i+s.charCodeAt(l),i|=0;return t.colors[Math.abs(i)%t.colors.length]},t.enable(t.load()),t},H5={};(function(e,t){t.formatArgs=function(n){if(n[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+n[0]+(this.useColors?"%c ":" ")+"+"+e.exports.humanize(this.diff),!this.useColors)return;const s="color: "+this.color;n.splice(1,0,s,"color: inherit");let i=0,l=0;n[0].replace(/%[a-zA-Z%]/g,(u=>{u!=="%%"&&(i++,u==="%c"&&(l=i))})),n.splice(l,0,s)},t.save=function(n){try{n?t.storage.setItem("debug",n):t.storage.removeItem("debug")}catch{}},t.load=function(){let n;try{n=t.storage.getItem("debug")}catch{}return!n&&typeof process<"u"&&"env"in process&&(n=H5.DEBUG),n},t.useColors=function(){return typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs)?!0:typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/)?!1:typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)},t.storage=(function(){try{return localStorage}catch{}})(),t.destroy=(()=>{let n=!1;return()=>{n||(n=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),t.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],t.log=console.debug||console.log||(()=>{}),e.exports=q5(t);const{formatters:r}=e.exports;r.j=function(n){try{return JSON.stringify(n)}catch(s){return"[UnexpectedJSONParseError]: "+s.message}}})($v,$v.exports);var X0=$v.exports;const K5=new Bu,G5=X0.debug.formatArgs;X0.debug.formatArgs=function(e){e[0]=`(${new Date().toISOString()}): ${e[0]} [${K5.toString()}]`,G5.call(this,e)};const Y5=X0.debug("teamsJs");function Li(e){return Y5.extend(e)}function Fr(e,t){return`${e}_${t}`}function GC(e){return/^v\d+_[\w.]+$/.test(e)}function Ga(e){return e.uuidAsString!==void 0?`${e.uuidAsString} (legacy id: ${e.id})`:e.uuid!==void 0?`${e.uuid.toString()} (legacy id: ${e.id})`:`legacy id: ${e.id} (no uuid)`}const J5=Li("flushMessageQueue");function YC(e,t,r,n){if(e&&t&&r.length!==0)for(;r.length>0;){const s=r.shift();if(s){const i=KC(s);J5("Flushing message %s from %s message queue via postMessage.",Ga(i),n),e.postMessage(i,t)}}}var Q5=["teams.microsoft.com","teams.microsoft.us","gov.teams.microsoft.us","dod.teams.microsoft.us","int.teams.microsoft.com","outlook.office.com","outlook-sdf.office.com","outlook.office365.com","outlook-sdf.office365.com","outlook.office365.us","outlook-dod.office365.us","webmail.apps.mil","outlook.live.com","outlook-sdf.live.com","teams.live.com","local.teams.live.com","local.teams.live.com:8080","local.teams.office.com","local.teams.office.com:8080","devspaces.skype.com","*.www.office.com","www.office.com","word.office.com","excel.office.com","powerpoint.office.com","www.officeppe.com","*.www.microsoft365.com","www.microsoft365.com","bing.com","edgeservices.bing.com","work.bing.com","www.bing.com","www.staging-bing-int.com","*.cloud.microsoft","*.m365.cloud.microsoft","*.outlook.cloud.microsoft","chatuxmanager.svc.cloud.microsoft","copilot.microsoft.com","windows.msn.com","fa000000125.resources.office.net","fa000000129.resources.office.net","fa000000124.resources.office.net","fa000000128.resources.office.net","fa000000136.resources.office.net","fa000000125.officeapps.live.com","fa000000129.officeapps.live.com","fa000000124.officeapps.live.com","fa000000128.officeapps.live.com"];const aS="2.0.1",Rf=Q5,oS=1500,X5=new URL("https://res.cdn.office.net/teams-js/validDomains/json/validDomains.json"),Z5=/^https:\/\//,_u="The library has not yet been initialized",e$="The runtime has not yet been initialized",t$="The runtime version is not supported";let jt=class{};jt.initializeCalled=!1,jt.initializeCompleted=!1,jt.additionalValidOrigins=[],jt.initializePromise=void 0,jt.isFramelessWindow=!1,jt.frameContext=void 0,jt.hostClientType=void 0,jt.printCapabilityEnabled=!1,jt.teamsJsInstanceId=new Bu().toString();const JC=Li("runtime"),Jh=4;function QC(e){return e.apiVersion===Jh}function r$(e){if(QC(e))return!0;throw e.apiVersion===-1?new Error(e$):new Error(t$)}let Ti={apiVersion:-1,supports:{}};const n$={supports:{appInstallDialog:{},appEntity:{},call:{},chat:{},conversations:{},dialog:{card:{bot:{}},url:{bot:{},parentCommunication:{}},update:{}},interactive:{},logs:{},meetingRoom:{},menus:{},monetization:{},notifications:{},pages:{config:{},backStack:{},fullTrust:{}},remoteCamera:{},teams:{fullTrust:{}},teamsCore:{},video:{sharedFrame:{}}}},XC=[$t.desktop,$t.web,$t.rigel,$t.surfaceHub,$t.teamsRoomsWindows,$t.teamsRoomsAndroid,$t.teamsPhones,$t.teamsDisplays],s$=[$t.android,$t.ios,$t.ipados,$t.visionOS],lS=[...XC,...s$];function i$(e){let t=e;if(t.apiVersion<Jh&&a$.forEach((r=>{t.apiVersion===r.versionToUpgradeFrom&&(t=r.upgradeToNextVersion(t))})),QC(t))return t;throw new Error("Received a runtime that could not be upgraded to the latest version")}const a$=[{versionToUpgradeFrom:1,upgradeToNextVersion:e=>{var t;return{apiVersion:2,hostVersionsInfo:void 0,isLegacyTeams:e.isLegacyTeams,supports:Object.assign(Object.assign({},e.supports),{dialog:e.supports.dialog?{card:void 0,url:e.supports.dialog,update:(t=e.supports.dialog)===null||t===void 0?void 0:t.update}:void 0})}}},{versionToUpgradeFrom:2,upgradeToNextVersion:e=>{const t=e.supports,r=J0(t,["appNotification"]);return Object.assign(Object.assign({},e),{apiVersion:3,supports:r})}},{versionToUpgradeFrom:3,upgradeToNextVersion:e=>{var t,r,n,s,i;return{apiVersion:4,hostVersionsInfo:e.hostVersionsInfo,isNAAChannelRecommended:e.isNAAChannelRecommended,isLegacyTeams:e.isLegacyTeams,supports:Object.assign(Object.assign({},e.supports),{dialog:e.supports.dialog?{card:(t=e.supports.dialog)===null||t===void 0?void 0:t.card,url:{bot:(n=(r=e.supports.dialog)===null||r===void 0?void 0:r.url)===null||n===void 0?void 0:n.bot,parentCommunication:!((s=e.supports.dialog)===null||s===void 0)&&s.url?{}:void 0},update:(i=e.supports.dialog)===null||i===void 0?void 0:i.update}:void 0})}}}],o$={"1.0.0":[{capability:{pages:{appButton:{},tabs:{}},stageView:{}},hostClientTypes:XC}],"1.9.0":[{capability:{location:{}},hostClientTypes:lS}],"2.0.0":[{capability:{people:{}},hostClientTypes:lS},{capability:{sharing:{}},hostClientTypes:[$t.desktop,$t.web]}],"2.0.1":[{capability:{teams:{fullTrust:{joinedTeams:{}}}},hostClientTypes:[$t.android,$t.desktop,$t.ios,$t.teamsRoomsAndroid,$t.teamsPhones,$t.teamsDisplays,$t.web]},{capability:{webStorage:{}},hostClientTypes:[$t.desktop]}],"2.0.5":[{capability:{webStorage:{}},hostClientTypes:[$t.android,$t.ios]}],"2.0.8":[{capability:{sharing:{}},hostClientTypes:[$t.android,$t.ios]}],"2.1.1":[{capability:{nestedAppAuth:{}},hostClientTypes:[$t.android,$t.ios,$t.ipados,$t.visionOS]}],"2.1.2":[]},Ag=JC.extend("generateBackCompatRuntimeConfig");function ZC(e,t){const r=Object.assign({},e);for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&(typeof t[n]!="object"||Array.isArray(t[n])?n in e||(r[n]=t[n]):r[n]=ZC(e[n]||{},t[n]));return r}function l$(e,t,r){Ag("generating back compat runtime config for %s",e);let n=Object.assign({},t.supports);Ag("Supported capabilities in config before updating based on highestSupportedVersion: %o",n),Object.keys(r).forEach((i=>{qC(e,i)>=0&&r[i].forEach((l=>{jt.hostClientType!==void 0&&l.hostClientTypes.includes(jt.hostClientType)&&(n=ZC(n,l.capability))}))}));const s={apiVersion:Jh,hostVersionsInfo:A5,isLegacyTeams:!0,supports:n};return Ag("Runtime config after updating based on highestSupportedVersion: %o",s),s}const Pg=JC.extend("applyRuntimeConfig");function Og(e){typeof e.apiVersion=="string"&&(Pg("Trying to apply runtime with string apiVersion, processing as v1: %o",e),e=Object.assign(Object.assign({},e),{apiVersion:1})),Pg("Fast-forwarding runtime %o",e);const t=i$(e);Pg("Applying runtime %o",t),Ti=HC(t)}function c$(e){return e!=null&&e.serialize!==void 0&&typeof e.serialize=="function"}const Qf="2.46.0";let Xf=class Ml{static storeCallbackInformation(t,r){Ml.callbackInformation.set(t,r)}static clearMessages(){Ml.callbackInformation.clear()}static deleteMessageInformation(t){Ml.callbackInformation.delete(t)}static handleOneWayPerformanceMetrics(t,r,n){const s=t.monotonicTimestamp;s&&n?bS({actionName:t.func,messageDelay:n-s,requestStartedAt:s}):r("Unable to send performance metrics for event %s",t.func)}static handlePerformanceMetrics(t,r,n,s){const i=Ml.callbackInformation.get(t);i&&r.monotonicTimestamp&&s?(bS({actionName:i.name,messageDelay:s-r.monotonicTimestamp,requestStartedAt:i.calledAt}),Ml.deleteMessageInformation(t)):n("Unable to send performance metrics for callback %s with arguments %o",t.toString(),r.args)}};Xf.callbackInformation=new Map;const eE=Li("nestedAppAuthUtils"),u$=eE.extend("tryPolyfillWithNestedAppAuthBridge"),d$="v2";function f$(e,t,r){var n;const s=u$;if(jt.isFramelessWindow)return void s("Cannot polyfill nestedAppAuthBridge as current window is frameless");if(!t)return void s("Cannot polyfill nestedAppAuthBridge as current window does not exist");if(t.parent!==t.top)return void s("Default NAA bridge injection not supported in nested iframe. Use standalone NAA bridge instead.");const i=(()=>{try{return JSON.parse(e)}catch{return null}})();if(!i||!(!((n=i.supports)===null||n===void 0)&&n.nestedAppAuth))return void s("Cannot polyfill nestedAppAuthBridge as current hub does not support nested app auth");const l=t;if(l.nestedAppAuthBridge)return void s("nestedAppAuthBridge already exists on current window, skipping polyfill");const u=(function(d,m){const f=h$;if(!d)return f("nestedAppAuthBridge cannot be created as current window does not exist"),null;const{onMessage:p,sendPostMessage:y}=m,x=b=>j=>p(j,b);return{addEventListener:(b,j)=>{b==="message"?d.addEventListener(b,x(j)):f(`Event ${b} is not supported by nestedAppAuthBridge`)},postMessage:b=>{const j=(()=>{try{return JSON.parse(b)}catch{return null}})();if(!j||typeof j!="object"||j.messageType!=="NestedAppAuthRequest")return void f("Unrecognized data format received by app, message being ignored. Message: %o",b);const S=Fr(d$,"nestedAppAuth.execute");y(b,S)},removeEventListener:(b,j)=>{d.removeEventListener(b,x(j))}}})(l,r);u&&(l.nestedAppAuthBridge=u)}const h$=eE.extend("createNestedAppAuthBridge");let Ba=[];const Ha=Li("validateOrigin");let du;function m$(){return Za(this,void 0,void 0,(function*(){du||(yield rE())}))}function tE(){return Ba.length===0}function rE(e=!1){return Za(this,void 0,void 0,(function*(){if(!tE()&&!e)return Ba;if(du)return du;if(Yh())return Ba=Rf,Rf;{Ha("Initiating fetch call to acquire valid origins list from CDN");const t=new AbortController,r=setTimeout((()=>t.abort()),oS);return du=fetch(X5,{signal:t.signal}).then((n=>{if(clearTimeout(r),!n.ok)throw new Error("Invalid Response from Fetch Call");return Ha("Fetch call completed and retrieved valid origins list from CDN"),n.json().then((s=>{if((function(i){let l=JSON.parse(i);try{l=JSON.parse(i)}catch{return!1}if(!l.validOrigins)return!1;for(const u of l.validOrigins)try{new URL("https://"+u)}catch{return Ha("isValidOriginsFromCDN call failed to validate origin: %s",u),!1}return!0})(JSON.stringify(s)))return Ba=s.validOrigins,Ba;throw new Error("Valid origins list retrieved from CDN is invalid")}))})).catch((n=>(n.name==="AbortError"?Ha(`validOrigins fetch call to CDN failed due to Timeout of ${oS} ms. Defaulting to fallback list`):Ha("validOrigins fetch call to CDN failed with error: %s. Defaulting to fallback list",n),Ba=Rf,Ba))),du}}))}function cS(e,t){if(e.substring(0,2)==="*."){const r=e.substring(1);if(t.length>r.length&&t.split(".").length===r.split(".").length&&t.substring(t.length-r.length)===r)return!0}else if(e===t)return!0;return!1}function p$(e,t){const r=tE()?Rf:Ba;return uS(e,r)?Promise.resolve(!0):(Ha("Origin %s is not in the local valid origins list, fetching from CDN",e),rE(t).then((n=>uS(e,n))))}function uS(e,t){if(!F5(e))return Ha("Origin %s is invalid because it is not using https protocol. Protocol being used: %s",e,e.protocol),!1;const r=e.host;if(t.some((n=>cS(n,r))))return!0;for(const n of jt.additionalValidOrigins)if(cS(n.substring(0,8)==="https://"?n.substring(8):n,r))return!0;return Ha(`Origin %s is invalid because it is not an origin approved by this library or included in the call to app.initialize.
Origins approved by this library: %o
Origins included in app.initialize: %o`,e,t,jt.additionalValidOrigins),!1}m$();const qo=Li("communication");let et=class{},zt=class{};function g$(e,t){if(zt.messageListener=r=>(function(n){return Za(this,void 0,void 0,(function*(){if(!n||!n.data||typeof n.data!="object")return void dS("Unrecognized message format received by app, message being ignored. Message: %o",n);const s=n.source||n.originalEvent&&n.originalEvent.source,i=n.origin||n.originalEvent&&n.originalEvent.origin;return iE(s,i).then((l=>{l?((function(u,d){jt.isFramelessWindow||et.parentWindow&&!et.parentWindow.closed&&u!==et.parentWindow||(et.parentWindow=u,et.parentOrigin=d),et.parentWindow&&et.parentWindow.closed&&(et.parentWindow=null,et.parentOrigin=null),YC(et.parentWindow,et.parentOrigin,zt.parentMessageQueue,"parent")})(s,i),s!==et.parentWindow?xM():hS(n)):dS("Message being ignored by app because it is either coming from the current window or a different window with an invalid origin, message: %o, source: %o, origin: %o",n,s,i)}))}))})(r),et.currentWindow=et.currentWindow||L5(),et.parentWindow=et.currentWindow.parent!==et.currentWindow.self?et.currentWindow.parent:et.currentWindow.opener,et.topWindow=et.currentWindow.top,(et.parentWindow||e)&&et.currentWindow.addEventListener("message",zt.messageListener,!1),!et.parentWindow){const r=et.currentWindow;if(!r.nativeInterface)return Promise.reject(new Error("Initialization Failed. No Parent window found."));jt.isFramelessWindow=!0,r.onNativeMessage=hS}try{return et.parentOrigin="*",Qh(t,"initialize",[Qf,Jh,e]).then((([r,n,s,i])=>(f$(i,et.currentWindow,{onMessage:N$,sendPostMessage:j$}),{context:r,clientType:n,runtimeConfig:s,clientSupportedSDKVersion:i})))}finally{et.parentOrigin=null}}function y$(e,t,...r){return Qh(e,t,r).then((([n])=>n))}function v$(e,t,r,...n){return Qh(e,t,n).then((([s,i])=>{if(!s)throw new Error(i||r)}))}function Qh(e,t,r=void 0){if(!GC(e))throw Error(`apiVersionTag: ${e} passed in doesn't follow the pattern starting with 'v' followed by digits, then underscore with words, please check.`);return new Promise((n=>{const s=sE(e,t,r);var i;n((i=s.uuid,new Promise((l=>{zt.promiseCallbacks.set(i,l)}))))}))}function x$(e){return e.map((t=>c$(t)?t.serialize():t))}function w$(e,t,r,n,s){var i;return Za(this,void 0,void 0,(function*(){const l=x$(t),[u]=yield Qh(n,e,l);if(C5(u))throw new Error(`${u.errorCode}, message: ${(i=u.message)!==null&&i!==void 0?i:"None"}`);if(r.validate(u))return r.deserialize(u);throw new Error(`${Jf.INTERNAL_ERROR}, message: Invalid response from host - ${JSON.stringify(u)}`)}))}function yi(e,t,r,n){let s;if(r instanceof Function?n=r:r instanceof Array&&(s=r),!GC(e))throw Error(`apiVersionTag: ${e} passed in doesn't follow the pattern starting with 'v' followed by digits, then underscore with words, please check.`);const i=sE(e,t,s);n&&zt.callbacks.set(i.uuid,n)}zt.parentMessageQueue=[],zt.topMessageQueue=[],zt.nextMessageId=0,zt.callbacks=new Map,zt.promiseCallbacks=new Map,zt.portCallbacks=new Map,zt.legacyMessageIdsToUuidMap={};const b$=qo.extend("sendNestedAuthRequestToTopWindow");function j$(e,t){const r=b$,n=et.topWindow,s=(function(i,l){const u=zt.nextMessageId++,d=new Bu;return zt.legacyMessageIdsToUuidMap[u]=d,{id:u,uuid:d,func:"nestedAppAuth.execute",timestamp:Date.now(),monotonicTimestamp:Q0(),apiVersionTag:l,args:[],data:i}})(e,t);return r("Message %s information: %o",Ga(s),{actionName:s.func}),nE(n,s)}const S$=qo.extend("sendRequestToTargetWindowHelper");function nE(e,t){const r=S$,n=(function(i){return i===et.topWindow&&Mv()?"top":i===et.parentWindow?"parent":null})(e),s=KC(t);if(jt.isFramelessWindow)et.currentWindow&&et.currentWindow.nativeInterface&&(r("Sending message %s to %s via framelessPostMessage interface",Ga(s),n),et.currentWindow.nativeInterface.framelessPostMessage(JSON.stringify(s)));else{const i=(function(l){return l===et.topWindow&&Mv()?et.topOrigin:l===et.parentWindow?et.parentOrigin:null})(e);e&&i?(r("Sending message %s to %s via postMessage",Ga(s),n),e.postMessage(s,i)):(r("Adding message %s to %s message queue",Ga(s),n),C$(e).push(t))}return t}const _$=qo.extend("sendMessageToParentHelper");function sE(e,t,r,n,s){const i=_$,l=et.parentWindow,u=(function(d,m,f,p,y){const x=zt.nextMessageId++,b=new Bu;zt.legacyMessageIdsToUuidMap[x]=b;const j=jt.teamsJsInstanceId;return{id:x,uuid:b,func:m,timestamp:Date.now(),monotonicTimestamp:Q0(),args:f||[],apiVersionTag:d,isProxiedFromChild:p!=null,teamsJsInstanceId:j}})(e,t,r,n);return Xf.storeCallbackInformation(u.uuid,{name:t,calledAt:u.timestamp}),i("Message %s information: %o",Ga(u),{actionName:t,args:r}),nE(l,u)}const dS=qo.extend("processIncomingMessage"),k$=qo.extend("processAuthBridgeMessage");function N$(e,t){var r,n;const s=k$;if(!e||!e.data||typeof e.data!="object")return void s("Unrecognized message format received by app, message being ignored. Message: %o",e);const{args:i}=e.data,[,l]=i??[],u=(()=>{try{return JSON.parse(l)}catch{return null}})();if(!u||typeof u!="object"||u.messageType!=="NestedAppAuthResponse")return void s("Unrecognized data format received by app, message being ignored. Message: %o",e);const d=e.source||((r=e==null?void 0:e.originalEvent)===null||r===void 0?void 0:r.source),m=e.origin||((n=e==null?void 0:e.originalEvent)===null||n===void 0?void 0:n.origin);d?iE(d,m)?(et.topWindow&&!et.topWindow.closed&&d!==et.topWindow||(et.topWindow=d,et.topOrigin=m),et.topWindow&&et.topWindow.closed&&(et.topWindow=null,et.topOrigin=null),YC(et.topWindow,et.topOrigin,zt.topMessageQueue,"top"),t(l)):s("Message being ignored by app because it is either coming from the current window or a different window with an invalid origin"):s("Message being ignored by app because it is coming for a target that is null")}const Tg=qo.extend("shouldProcessIncomingMessage");function iE(e,t){return Za(this,void 0,void 0,(function*(){if(et.currentWindow&&e===et.currentWindow)return Tg("Should not process message because it is coming from the current window"),!1;if(et.currentWindow&&et.currentWindow.location&&t&&t===et.currentWindow.location.origin)return!0;{let r;try{r=new URL(t)}catch{return Tg("Message has an invalid origin of %s",t),!1}const n=yield p$(r);return n||Tg("Message has an invalid origin of %s",t),n}}))}const fS=qo.extend("handleIncomingMessageFromParent");function $f(e,t){if(t){const r=[...e].find((([n,s])=>n.toString()===t.toString()));if(r)return r[0]}}function Ig(e,t){const r=$f(t,e.uuid);r&&t.delete(r),e.uuid?zt.legacyMessageIdsToUuidMap={}:delete zt.legacyMessageIdsToUuidMap[e.id]}function hS(e){const t=fS,r=Q0();if("id"in e.data&&typeof e.data.id=="number"){const n=e.data,s=W5(n),i=(function(l){const u=fS;if(!l.uuid)return zt.legacyMessageIdsToUuidMap[l.id];{const d=l.uuid,m=$f(zt.callbacks,d);if(m)return m;const f=$f(zt.promiseCallbacks,d);if(f)return f;const p=$f(zt.portCallbacks,d);if(p)return p}u("Received message %s that failed to produce a callbackId",Ga(l))})(s);if(i){const l=zt.callbacks.get(i);t("Received a response from parent for message %s",i.toString()),Xf.handlePerformanceMetrics(i,s,t,r),l&&(t("Invoking the registered callback for message %s with arguments %o",i.toString(),s.args),l.apply(null,[...s.args,s.isPartialResponse]),(function(m){return m.data.isPartialResponse===!0})(e)||(t("Removing registered callback for message %s",i.toString()),Ig(s,zt.callbacks)));const u=zt.promiseCallbacks.get(i);u&&(t("Invoking the registered promise callback for message %s with arguments %o",i.toString(),s.args),u(s.args),t("Removing registered promise callback for message %s",i.toString()),Ig(s,zt.promiseCallbacks));const d=zt.portCallbacks.get(i);if(d){let m;t("Invoking the registered port callback for message %s with arguments %o",i.toString(),s.args),e.ports&&e.ports[0]instanceof MessagePort&&(m=e.ports[0]),d(m,s.args),t("Removing registered port callback for message %s",i.toString()),Ig(s,zt.portCallbacks)}s.uuid&&(zt.legacyMessageIdsToUuidMap={})}}else if("func"in e.data&&typeof e.data.func=="string"){const n=e.data;Xf.handleOneWayPerformanceMetrics(n,t,r),t('Received a message from parent %s, action: "%s"',Ga(n),n.func),fM(n.func,n.args)}else t("Received an unknown message: %O",e)}function Mv(){return et.topWindow!==et.parentWindow}function C$(e){return e===et.topWindow&&Mv()?zt.topMessageQueue:e===et.parentWindow?zt.parentMessageQueue:[]}const aE=Li("internal"),E$=aE.extend("ensureInitializeCalled"),A$=aE.extend("ensureInitialized");function oE(){if(!jt.initializeCalled)throw E$(_u),new Error(_u)}function dc(e,...t){if(!jt.initializeCompleted)throw A$("%s. initializeCalled: %s",_u,jt.initializeCalled.toString()),new Error(_u);if(t&&t.length>0){let r=!1;for(let n=0;n<t.length;n++)if(t[n]===jt.frameContext){r=!0;break}if(!r)throw new Error(`This call is only allowed in following contexts: ${JSON.stringify(t)}. Current context: "${jt.frameContext}".`)}return r$(e)}function P$(e){let t=jt.additionalValidOrigins.concat(e.filter((n=>typeof n=="string"&&Z5.test(n))));const r={};t=t.filter((n=>!r[n]&&(r[n]=!0,!0))),jt.additionalValidOrigins=t}function O$(e){if(!I$(e))throw new Error(`Potential app id (${e}) is invalid; its length ${e.length} is not within the length limits (${lE}-${cE}).`)}function T$(e){if(z5(e))throw new Error(`Potential app id (${e}) is invalid; it contains script tags.`);if(D$(e))throw new Error(`Potential app id (${e}) is invalid; it contains non-printable characters.`)}const lE=4,cE=256;function I$(e){return e.length<cE&&e.length>lE}function D$(e){return[...e].some((t=>{const r=t.charCodeAt(0);return r<32||r>126}))}let R$=class{constructor(t){this.idAsString=t,T$(t)}serialize(){return this.toString()}toString(){return this.idAsString}},$$=class extends R${constructor(t){super(t),O$(t)}toJSON(){return{appIdAsString:this.toString()}}};function uE(e){return e==null}const Xh="v2",Dg=Li("app"),mS={Success:"appInitialization.success"};var pS,gS;function M$(e){return rM(Fr(Xh,"app.initialize"),e)}function F$(){return new Promise((e=>{oE(),e(y$(Fr(Xh,"app.getContext"),"getContext"))})).then((e=>(function(t){var r;return{actionInfo:t.actionInfo,app:{locale:t.locale,sessionId:t.appSessionId?t.appSessionId:"",theme:t.theme?t.theme:"default",iconPositionVertical:t.appIconPosition,osLocaleInfo:t.osLocaleInfo,messageId:t.messageId,parentMessageId:t.parentMessageId,userClickTime:t.userClickTime,userClickTimeV2:t.userClickTimeV2,userFileOpenPreference:t.userFileOpenPreference,host:{name:t.hostName?t.hostName:Dv.teams,clientType:t.hostClientType?t.hostClientType:$t.web,sessionId:t.sessionId?t.sessionId:"",ringId:t.ringId},appLaunchId:t.appLaunchId,appId:t.appId?new $$(t.appId):void 0,manifestVersion:t.manifestVersion},page:{id:t.entityId,frameContext:t.frameContext?t.frameContext:jt.frameContext,renderingSurface:t.renderingSurface?t.renderingSurface:void 0,subPageId:t.subEntityId,isFullScreen:t.isFullScreen,isMultiWindow:t.isMultiWindow,isBackgroundLoad:t.isBackgroundLoad,sourceOrigin:t.sourceOrigin},user:{id:(r=t.userObjectId)!==null&&r!==void 0?r:"",displayName:t.userDisplayName,isCallingAllowed:t.isCallingAllowed,isPSTNCallingAllowed:t.isPSTNCallingAllowed,licenseType:t.userLicenseType,loginHint:t.loginHint,userPrincipalName:t.userPrincipalName,tenant:t.tid?{id:t.tid,teamsSku:t.tenantSKU}:void 0},channel:t.channelId?{id:t.channelId,displayName:t.channelName,relativeUrl:t.channelRelativeUrl,membershipType:t.channelType,defaultOneNoteSectionId:t.defaultOneNoteSectionId,ownerGroupId:t.hostTeamGroupId,ownerTenantId:t.hostTeamTenantId}:void 0,chat:t.chatId?{id:t.chatId}:void 0,meeting:t.meetingId?{id:t.meetingId}:void 0,sharepoint:t.sharepoint,team:t.teamId?{internalId:t.teamId,displayName:t.teamName,type:t.teamType,groupId:t.groupId,templateId:t.teamTemplateId,isArchived:t.isTeamArchived,userRole:t.userTeamRole}:void 0,sharePointSite:t.teamSiteUrl||t.teamSiteDomain||t.teamSitePath||t.mySitePath||t.mySiteDomain?{teamSiteUrl:t.teamSiteUrl,teamSiteDomain:t.teamSiteDomain,teamSitePath:t.teamSitePath,teamSiteId:t.teamSiteId,mySitePath:t.mySitePath,mySiteDomain:t.mySiteDomain}:void 0,dialogParameters:t.dialogParameters||{}}})(e)))}function L$(){return nM(Fr(Xh,"app.notifySuccess"))}function z$(e){sM(Fr(Xh,"app.registerOnThemeChangeHandler"),e)}(function(e){e.AuthFailed="AuthFailed",e.Timeout="Timeout",e.Other="Other"})(pS||(pS={})),(function(e){e.PermissionError="PermissionError",e.NotFound="NotFound",e.Throttling="Throttling",e.Offline="Offline",e.Other="Other"})(gS||(gS={})),Dg("teamsjs instance is version %s, starting at %s UTC (%s local)",Qf,new Date().toISOString(),new Date().toLocaleString()),(function(){if(Yh())return;const e=document.getElementsByTagName("script"),t=e&&e[e.length-1]&&e[e.length-1].src,r="Today, teamsjs can only be used from a single script or you may see undefined behavior. This log line is used to help detect cases where teamsjs is loaded multiple times -- it is always written. The presence of the log itself does not indicate a multi-load situation, but multiples of these log lines will. If you would like to use teamjs from more than one script at the same time, please open an issue at https://github.com/OfficeDev/microsoft-teams-library-js/issues";t&&t.length!==0?Dg("teamsjs is being used from %s. %s",t,r):Dg("teamsjs is being used from a script tag embedded directly in your html. %s",r)})();const U$="v2",B$=[];function W$(e){jt.frameContext&&(jt.frameContext===Rv.task?B$.push(e):hM("messageForChild"))}function V$(){Ao(Fr(U$,"dialog.registerMessageForChildHandler"),"messageForChild",W$,!1)}const ql="v2";var yS,vS;(function(e){e[e.ifRoom=0]="ifRoom",e[e.overflowOnly=1]="overflowOnly"})(yS||(yS={}));function q$(){Ao(Fr(ql,"menus.registerNavBarMenuItemPressHandler"),"navBarMenuItemPress",K$,!1),Ao(Fr(ql,"menus.registerActionMenuItemPressHandler"),"actionMenuItemPress",G$,!1),Ao(Fr(ql,"menus.registerSetModuleViewHandler"),"setModuleView",H$,!1)}function H$(e){dc(Ti),yi(Fr(ql,"menus.handleViewConfigItemPress"),"viewConfigItemPress",[e])}function K$(e){dc(Ti),yi(Fr(ql,"menus.handleNavBarMenuItemPress"),"handleNavBarMenuItemPress",[e])}function G$(e){dc(Ti),yi(Fr(ql,"menus.handleActionMenuItemPress"),"handleActionMenuItemPress",[e])}(function(e){e.dropDown="dropDown",e.popOver="popOver"})(vS||(vS={}));class Y${}let J$=class extends Y${validate(t){return!0}deserialize(t){return t}};function Q$(){Ao(Fr($o,"pages.config.registerSettingsSaveHandler"),"settings.save",X$,!1),Ao(Fr($o,"pages.config.registerSettingsRemoveHandler"),"settings.remove",eM,!1)}function X$(e){new Z$(e).notifySuccess()}let Z$=class{constructor(t){this.notified=!1,this.result=t||{}}notifySuccess(){this.ensureNotNotified(),yi(Fr($o,"pages.saveEvent.notifySuccess"),"settings.save.success"),this.notified=!0}notifyFailure(t){this.ensureNotNotified(),yi(Fr($o,"pages.saveEvent.notifyFailure"),"settings.save.failure",[t]),this.notified=!0}ensureNotNotified(){if(this.notified)throw new Error("The SaveEvent may only notify success or failure once.")}};function eM(){new tM().notifySuccess()}let tM=class{constructor(){this.notified=!1}notifySuccess(){this.ensureNotNotified(),yi(Fr($o,"pages.removeEvent.notifySuccess"),"settings.remove.success"),this.notified=!0}notifyFailure(t){this.ensureNotNotified(),yi(Fr($o,"pages.removeEvent.notifyFailure"),"settings.remove.failure",[t]),this.notified=!0}ensureNotNotified(){if(this.notified)throw new Error("The removeEventType may only notify success or failure once.")}};const dE=Li("app");function rM(e,t){return Yh()?(dE.extend("initialize")("window object undefined at initialization"),Promise.resolve()):M5((()=>(function(r,n){return new Promise((s=>{jt.initializeCalled||(jt.initializeCalled=!0,dM(),jt.initializePromise=g$(n,r).then((({context:i,clientType:l,runtimeConfig:u,clientSupportedSDKVersion:d=aS})=>{jt.frameContext=i,jt.hostClientType=l,jt.clientSupportedSDKVersion=d;try{Zc("Parsing %s",u);let m=JSON.parse(u);if(Zc("Checking if %o is a valid runtime object",m??"null"),!m||!m.apiVersion)throw new Error("Received runtime config is invalid");m=nS(m),u&&Og(m)}catch(m){if(!(m instanceof SyntaxError))throw m;try{Zc("Attempting to parse %s as an SDK version",u),isNaN(qC(u,aS))||(jt.clientSupportedSDKVersion=u);let f=JSON.parse(d);if(Zc("givenRuntimeConfig parsed to %o",f??"null"),!f)throw new Error("givenRuntimeConfig string was successfully parsed. However, it parsed to value of null");f=nS(f),Og(f)}catch(f){if(!(f instanceof SyntaxError))throw f;Og(l$(jt.clientSupportedSDKVersion,n$,o$))}}jt.initializeCompleted=!0})),q$(),Q$(),V$()),Array.isArray(n)&&P$(n),jt.initializePromise!==void 0?s(jt.initializePromise):Zc("GlobalVars.initializePromise is unexpectedly undefined")}))})(e,t)),6e4,new Error("SDK initialization timed out."))}function nM(e){return Za(this,void 0,void 0,(function*(){if(jt.initializeCompleted)return xS(e);if(!jt.initializePromise)throw new Error(_u);return jt.initializePromise.then((()=>xS(e)))}))}function xS(e){return Za(this,void 0,void 0,(function*(){return dc(Ti)&&(!((t=Ti.supports.app)===null||t===void 0)&&t.notifySuccessResponse)?w$(mS.Success,[Qf],new J$,e).then((()=>({hasFinishedSuccessfully:!0}))):(yi(e,mS.Success,[Qf]),{hasFinishedSuccessfully:"unknown"});var t}))}const Zc=dE.extend("initializeHelper");function sM(e,t){!uE(t)&&oE(),mM(e,t)}function iM(){return oM(Fr($o,"pages.backStack.navigateBack"))}function aM(){return!(!dc(Ti)||!Ti.supports.pages)&&!!Ti.supports.pages.backStack}const $o="v2";function oM(e){return new Promise((t=>{if(dc(Ti),!aM())throw E5;t(v$(e,"navigateBack","Back navigation is not supported in the current client or context."))}))}function lM(){Ao(Fr("v2","pages.backStack.registerBackButtonPressHandler"),"backButtonPress",cM,!1)}function cM(){iM()}const uM=Li("handlers");let dr=class Ei{static initializeHandlers(){Ei.handlers.themeChange=pM,Ei.handlers.load=gM,Ei.handlers.beforeUnload=yM,lM()}static uninitializeHandlers(){Ei.handlers={},Ei.themeChangeHandler=null,Ei.loadHandler=null,Ei.beforeUnloadHandler=null,Ei.beforeSuspendOrTerminateHandler=null,Ei.resumeHandler=null}};function dM(){dr.initializeHandlers()}dr.handlers={},dr.themeChangeHandler=null,dr.loadHandler=null,dr.beforeUnloadHandler=null,dr.beforeSuspendOrTerminateHandler=null,dr.resumeHandler=null,dr.hostToAppPerformanceMetricsHandler=null;const wS=uM.extend("callHandler");function fM(e,t){const r=dr.handlers[e];return r?(wS("Invoking the registered handler for message %s with arguments %o",e,t),[!0,r.apply(this,t)]):(wS("Handler for action message %s not found.",e),[!1,void 0])}function Ao(e,t,r,n=!0,s=[]){r?(dr.handlers[t]=r,n&&yi(e,"registerHandler",[t,...s])):delete dr.handlers[t]}function hM(e){delete dr.handlers[e]}function mM(e,t){dr.themeChangeHandler=t,!uE(t)&&yi(e,"registerHandler",["themeChange"])}function pM(e){dr.themeChangeHandler&&dr.themeChangeHandler(e)}function bS(e){dr.hostToAppPerformanceMetricsHandler&&dr.hostToAppPerformanceMetricsHandler(e)}function gM(e){const t={entityId:(r=e).entityId,contentUrl:new URL(r.contentUrl)};var r;dr.resumeHandler?(dr.resumeHandler(t),jS()):dr.loadHandler&&(dr.loadHandler(e),jS())}function yM(){return Za(this,void 0,void 0,(function*(){const e=()=>{yi(Fr("v2","handleBeforeUnload"),"readyToUnload",[])};dr.beforeSuspendOrTerminateHandler?(yield dr.beforeSuspendOrTerminateHandler(),e()):dr.beforeUnloadHandler&&dr.beforeUnloadHandler(e)||e()}))}const vM=Li("childProxyingCommunication");function jS(){return!1}function xM(e,t){return!1}vM.extend("handleIncomingMessageFromChild");const wM=v.createContext({inTeams:!1,teamsContext:null,isInitialized:!1,teamsTheme:null}),bM=({children:e})=>{const[t,r]=v.useState(!1),[n,s]=v.useState(null),[i,l]=v.useState(!1),[u,d]=v.useState(null);return v.useEffect(()=>{(async()=>{try{if(new URLSearchParams(window.location.search).get("inTeams")==="true"||window.parent!==window){console.log(" Initializing Teams SDK..."),await M$();const y=await F$();console.log(" Teams context:",y),r(!0),s(y),d(y.app.theme),z$(x=>{d(x)}),L$()}else console.log(" Running in browser (not Teams)")}catch(f){console.error(" Teams initialization error:",f),r(!1)}finally{l(!0)}})()},[]),o.jsx(wM.Provider,{value:{inTeams:t,teamsContext:n,isInitialized:i,teamsTheme:u},children:e})};/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jM=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),SM=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(t,r,n)=>n?n.toUpperCase():r.toLowerCase()),SS=e=>{const t=SM(e);return t.charAt(0).toUpperCase()+t.slice(1)},fE=(...e)=>e.filter((t,r,n)=>!!t&&t.trim()!==""&&n.indexOf(t)===r).join(" ").trim(),_M=e=>{for(const t in e)if(t.startsWith("aria-")||t==="role"||t==="title")return!0};/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var kM={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NM=v.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:r=2,absoluteStrokeWidth:n,className:s="",children:i,iconNode:l,...u},d)=>v.createElement("svg",{ref:d,...kM,width:t,height:t,stroke:e,strokeWidth:n?Number(r)*24/Number(t):r,className:fE("lucide",s),...!i&&!_M(u)&&{"aria-hidden":"true"},...u},[...l.map(([m,f])=>v.createElement(m,f)),...Array.isArray(i)?i:[i]]));/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vt=(e,t)=>{const r=v.forwardRef(({className:n,...s},i)=>v.createElement(NM,{ref:i,iconNode:t,className:fE(`lucide-${jM(SS(e))}`,`lucide-${e}`,n),...s}));return r.displayName=SS(e),r};/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CM=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],_S=vt("arrow-left",CM);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EM=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],AM=vt("arrow-right",EM);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PM=[["path",{d:"M3.85 8.62a4 4 0 0 1 4.78-4.77 4 4 0 0 1 6.74 0 4 4 0 0 1 4.78 4.78 4 4 0 0 1 0 6.74 4 4 0 0 1-4.77 4.78 4 4 0 0 1-6.75 0 4 4 0 0 1-4.78-4.77 4 4 0 0 1 0-6.76Z",key:"3c2336"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],Fv=vt("badge-check",PM);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OM=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],Os=vt("calendar",OM);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TM=[["path",{d:"M5 21v-6",key:"1hz6c0"}],["path",{d:"M12 21V3",key:"1lcnhd"}],["path",{d:"M19 21V9",key:"unv183"}]],Mf=vt("chart-no-axes-column",TM);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IM=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],On=vt("chevron-down",IM);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DM=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],fc=vt("chevron-left",DM);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RM=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],$M=vt("chevron-up",RM);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MM=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],Ut=vt("circle-alert",MM);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FM=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],Or=vt("circle-check-big",FM);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LM=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],Zh=vt("clock",LM);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zM=[["path",{d:"M11.562 3.266a.5.5 0 0 1 .876 0L15.39 8.87a1 1 0 0 0 1.516.294L21.183 5.5a.5.5 0 0 1 .798.519l-2.834 10.246a1 1 0 0 1-.956.734H5.81a1 1 0 0 1-.957-.734L2.02 6.02a.5.5 0 0 1 .798-.519l4.276 3.664a1 1 0 0 0 1.516-.294z",key:"1vdc57"}],["path",{d:"M5 21h14",key:"11awu3"}]],us=vt("crown",zM);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UM=[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]],BM=vt("database",UM);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WM=[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]],kS=vt("ellipsis-vertical",WM);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VM=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]],qM=vt("funnel",VM);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HM=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],mf=vt("info",HM);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KM=[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]],Z0=vt("lightbulb",KM);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GM=[["path",{d:"M3 5h.01",key:"18ugdj"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 19h.01",key:"noohij"}],["path",{d:"M8 5h13",key:"1pao27"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 19h13",key:"m83p4d"}]],Es=vt("list",GM);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YM=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],JM=vt("lock",YM);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QM=[["path",{d:"m10 17 5-5-5-5",key:"1bsop3"}],["path",{d:"M15 12H3",key:"6jk70r"}],["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}]],XM=vt("log-in",QM);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZM=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],xn=vt("log-out",ZM);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eF=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],Wu=vt("mail",eF);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tF=[["path",{d:"M5 12h14",key:"1ays0h"}]],rF=vt("minus",tF);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nF=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]],hE=vt("pencil",nF);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sF=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],cs=vt("plus",sF);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iF=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],Po=vt("refresh-cw",iF);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aF=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],oF=vt("search",aF);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lF=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],sn=vt("settings",lF);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cF=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],Hr=vt("shield",cF);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uF=[["path",{d:"m18 14 4 4-4 4",key:"10pe0f"}],["path",{d:"m18 2 4 4-4 4",key:"pucp1d"}],["path",{d:"M2 18h1.973a4 4 0 0 0 3.3-1.7l5.454-8.6a4 4 0 0 1 3.3-1.7H22",key:"1ailkh"}],["path",{d:"M2 6h1.972a4 4 0 0 1 3.6 2.2",key:"km57vx"}],["path",{d:"M22 18h-6.041a4 4 0 0 1-3.3-1.8l-.359-.45",key:"os18l9"}]],dF=vt("shuffle",uF);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fF=[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]],Al=vt("sparkles",fF);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hF=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],NS=vt("square-pen",hF);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mF=[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]],Pl=vt("star",mF);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pF=[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]],gF=vt("tag",pF);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yF=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],vi=vt("trash-2",yF);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vF=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],mE=vt("triangle-alert",vF);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xF=[["path",{d:"M10 14.66v1.626a2 2 0 0 1-.976 1.696A5 5 0 0 0 7 21.978",key:"1n3hpd"}],["path",{d:"M14 14.66v1.626a2 2 0 0 0 .976 1.696A5 5 0 0 1 17 21.978",key:"rfe1zi"}],["path",{d:"M18 9h1.5a1 1 0 0 0 0-5H18",key:"7xy6bh"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M6 9a6 6 0 0 0 12 0V3a1 1 0 0 0-1-1H7a1 1 0 0 0-1 1z",key:"1mhfuq"}],["path",{d:"M6 9H4.5a1 1 0 0 1 0-5H6",key:"tex48p"}]],wF=vt("trophy",xF);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bF=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]],Oo=vt("user-plus",bF);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jF=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"17",x2:"22",y1:"8",y2:"13",key:"3nzzx3"}],["line",{x1:"22",x2:"17",y1:"8",y2:"13",key:"1swrse"}]],eu=vt("user-x",jF);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SF=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],Un=vt("user",SF);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _F=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],In=vt("users",_F);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kF=[["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}],["path",{d:"M5 7c0-1.1.9-2 2-2h10a2 2 0 0 1 2 2v12H5V7Z",key:"1ezoue"}],["path",{d:"M22 19H2",key:"nuriw5"}]],An=vt("vote",kF);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NF=[["rect",{width:"8",height:"8",x:"3",y:"3",rx:"2",key:"by2w9f"}],["path",{d:"M7 11v4a2 2 0 0 0 2 2h4",key:"xkn7yn"}],["rect",{width:"8",height:"8",x:"13",y:"13",rx:"2",key:"1cgmvn"}]],CF=vt("workflow",NF);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EF=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],gi=vt("x",EF);function AF(){const[e,t]=v.useState(""),[r,n]=v.useState(""),[s,i]=v.useState(!1),[l,u]=v.useState(""),{setCurrentUser:d,setCurrentSession:m}=Fi(),f=$s(),[p]=cC(),y=async x=>{x.preventDefault(),u(""),i(!0);try{const b=await K0(e.trim().toLowerCase(),r.trim());d(b);const j=p.get("session");if(j){const S=await n5(j);if(S){m(S);const[k,C,N]=await Promise.all([Vo(b.id),Su(S.id,b.id),Y0(S.id,b.email)]);if(k||C)f("/admin");else if(N)f("/vote");else{u("You are not authorized to access this voting session."),i(!1);return}}else{u("Invalid session code."),i(!1);return}}else f("/sessions")}catch(b){console.error("Login error:",b),u("Failed to log in. Please try again."),i(!1)}};return o.jsxs("div",{className:"min-h-screen bg-gray-50 flex flex-col justify-center py-12 sm:px-6 lg:px-8",children:[o.jsxs("div",{className:"sm:mx-auto sm:w-full sm:max-w-md",children:[o.jsx("img",{src:"https://www.steeldynamics.com/wp-content/uploads/2024/05/New-Millennium-color-logo1.png",alt:"New Millennium Building Systems Logo",className:"mx-auto h-24 w-auto"}),o.jsx("h2",{className:"mt-6 text-center text-3xl font-bold text-[#2d4660]",children:"Feature Voting System"}),o.jsx("p",{className:"mt-2 text-center text-sm text-gray-600",children:"Sign in to access your voting sessions"})]}),o.jsx("div",{className:"relative z-10 mt-8 sm:mx-auto sm:w-full sm:max-w-md",children:o.jsxs("div",{className:"bg-white py-8 px-4 shadow-lg sm:rounded-lg sm:px-10",children:[o.jsxs("form",{onSubmit:y,className:"space-y-6",children:[o.jsxs("div",{children:[o.jsx("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700",children:"Full Name"}),o.jsx("div",{className:"mt-1",children:o.jsx("input",{id:"name",name:"name",type:"text",autoComplete:"name",required:!0,value:r,onChange:x=>n(x.target.value),className:"appearance-none block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-[#2d4660] focus:border-[#2d4660]",placeholder:"John Doe"})})]}),o.jsxs("div",{children:[o.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700",children:"Email Address"}),o.jsx("div",{className:"mt-1",children:o.jsx("input",{id:"email",name:"email",type:"email",autoComplete:"email",required:!0,value:e,onChange:x=>t(x.target.value),className:"appearance-none block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-[#2d4660] focus:border-[#2d4660]",placeholder:"your.email@company.com"})})]}),l&&o.jsx("div",{className:"rounded-md bg-red-50 p-4",children:o.jsx("div",{className:"flex",children:o.jsx("div",{className:"ml-3",children:o.jsx("h3",{className:"text-sm font-medium text-red-800",children:l})})})}),o.jsx("div",{children:o.jsx("button",{type:"submit",disabled:s,className:"w-full flex justify-center items-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-[#2d4660] hover:bg-[#1d3a53] focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-[#2d4660] disabled:opacity-50 disabled:cursor-not-allowed",children:s?o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Signing in..."]}):o.jsxs(o.Fragment,{children:[o.jsx(XM,{className:"h-4 w-4 mr-2"}),"Sign In"]})})})]}),o.jsxs("div",{className:"mt-6",children:[o.jsxs("div",{className:"relative",children:[o.jsx("div",{className:"absolute inset-0 flex items-center",children:o.jsx("div",{className:"w-full border-t border-gray-300"})}),o.jsx("div",{className:"relative flex justify-center text-sm",children:o.jsx("span",{className:"px-2 bg-white text-gray-500",children:"No registration required"})})]}),o.jsxs("div",{className:"mt-6 text-center text-xs text-gray-500",children:[o.jsx("p",{children:"Simply enter your name and email to access"}),o.jsx("p",{children:"voting sessions you've been invited to"})]})]})]})})]})}var Vu=e=>e.type==="checkbox",No=e=>e instanceof Date,fs=e=>e==null;const pE=e=>typeof e=="object";var Yr=e=>!fs(e)&&!Array.isArray(e)&&pE(e)&&!No(e),gE=e=>Yr(e)&&e.target?Vu(e.target)?e.target.checked:e.target.value:e,PF=e=>e.substring(0,e.search(/\.\d+(\.|$)/))||e,yE=(e,t)=>e.has(PF(t)),OF=e=>{const t=e.constructor&&e.constructor.prototype;return Yr(t)&&t.hasOwnProperty("isPrototypeOf")},ex=typeof window<"u"&&typeof window.HTMLElement<"u"&&typeof document<"u";function tn(e){let t;const r=Array.isArray(e),n=typeof FileList<"u"?e instanceof FileList:!1;if(e instanceof Date)t=new Date(e);else if(!(ex&&(e instanceof Blob||n))&&(r||Yr(e)))if(t=r?[]:Object.create(Object.getPrototypeOf(e)),!r&&!OF(e))t=e;else for(const s in e)e.hasOwnProperty(s)&&(t[s]=tn(e[s]));else return e;return t}var em=e=>/^\w*$/.test(e),Pr=e=>e===void 0,tx=e=>Array.isArray(e)?e.filter(Boolean):[],rx=e=>tx(e.replace(/["|']|\]/g,"").split(/\.|\[/)),Ue=(e,t,r)=>{if(!t||!Yr(e))return r;const n=(em(t)?[t]:rx(t)).reduce((s,i)=>fs(s)?s:s[i],e);return Pr(n)||n===e?Pr(e[t])?r:e[t]:n},Ns=e=>typeof e=="boolean",nr=(e,t,r)=>{let n=-1;const s=em(t)?[t]:rx(t),i=s.length,l=i-1;for(;++n<i;){const u=s[n];let d=r;if(n!==l){const m=e[u];d=Yr(m)||Array.isArray(m)?m:isNaN(+s[n+1])?{}:[]}if(u==="__proto__"||u==="constructor"||u==="prototype")return;e[u]=d,e=e[u]}};const Zf={BLUR:"blur",FOCUS_OUT:"focusout",CHANGE:"change"},di={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},Gi={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"},vE=dt.createContext(null);vE.displayName="HookFormContext";const nx=()=>dt.useContext(vE);var xE=(e,t,r,n=!0)=>{const s={defaultValues:t._defaultValues};for(const i in e)Object.defineProperty(s,i,{get:()=>{const l=i;return t._proxyFormState[l]!==di.all&&(t._proxyFormState[l]=!n||di.all),r&&(r[l]=!0),e[l]}});return s};const sx=typeof window<"u"?dt.useLayoutEffect:dt.useEffect;function TF(e){const t=nx(),{control:r=t.control,disabled:n,name:s,exact:i}=e||{},[l,u]=dt.useState(r._formState),d=dt.useRef({isDirty:!1,isLoading:!1,dirtyFields:!1,touchedFields:!1,validatingFields:!1,isValidating:!1,isValid:!1,errors:!1});return sx(()=>r._subscribe({name:s,formState:d.current,exact:i,callback:m=>{!n&&u({...r._formState,...m})}}),[s,n,i]),dt.useEffect(()=>{d.current.isValid&&r._setValid(!0)},[r]),dt.useMemo(()=>xE(l,r,d.current,!1),[l,r])}var As=e=>typeof e=="string",Lv=(e,t,r,n,s)=>As(e)?(n&&t.watch.add(e),Ue(r,e,s)):Array.isArray(e)?e.map(i=>(n&&t.watch.add(i),Ue(r,i))):(n&&(t.watchAll=!0),r),zv=e=>fs(e)||!pE(e);function fi(e,t,r=new WeakSet){if(zv(e)||zv(t))return e===t;if(No(e)&&No(t))return e.getTime()===t.getTime();const n=Object.keys(e),s=Object.keys(t);if(n.length!==s.length)return!1;if(r.has(e)||r.has(t))return!0;r.add(e),r.add(t);for(const i of n){const l=e[i];if(!s.includes(i))return!1;if(i!=="ref"){const u=t[i];if(No(l)&&No(u)||Yr(l)&&Yr(u)||Array.isArray(l)&&Array.isArray(u)?!fi(l,u,r):l!==u)return!1}}return!0}function IF(e){const t=nx(),{control:r=t.control,name:n,defaultValue:s,disabled:i,exact:l,compute:u}=e||{},d=dt.useRef(s),m=dt.useRef(u),f=dt.useRef(void 0),p=dt.useRef(r),y=dt.useRef(n);m.current=u;const[x,b]=dt.useState(()=>{const O=r._getWatch(n,d.current);return m.current?m.current(O):O}),j=dt.useCallback(O=>{const P=Lv(n,r._names,O||r._formValues,!1,d.current);return m.current?m.current(P):P},[r._formValues,r._names,n]),S=dt.useCallback(O=>{if(!i){const P=Lv(n,r._names,O||r._formValues,!1,d.current);if(m.current){const T=m.current(P);fi(T,f.current)||(b(T),f.current=T)}else b(P)}},[r._formValues,r._names,i,n]);sx(()=>((p.current!==r||!fi(y.current,n))&&(p.current=r,y.current=n,S()),r._subscribe({name:n,formState:{values:!0},exact:l,callback:O=>{S(O.values)}})),[r,l,n,S]),dt.useEffect(()=>r._removeUnmounted());const k=p.current!==r,C=y.current,N=dt.useMemo(()=>{if(i)return null;const O=!k&&!fi(C,n);return k||O?j():null},[i,k,n,C,j]);return N!==null?N:x}function DF(e){const t=nx(),{name:r,disabled:n,control:s=t.control,shouldUnregister:i,defaultValue:l}=e,u=yE(s._names.array,r),d=dt.useMemo(()=>Ue(s._formValues,r,Ue(s._defaultValues,r,l)),[s,r,l]),m=IF({control:s,name:r,defaultValue:d,exact:!0}),f=TF({control:s,name:r,exact:!0}),p=dt.useRef(e),y=dt.useRef(void 0),x=dt.useRef(s.register(r,{...e.rules,value:m,...Ns(e.disabled)?{disabled:e.disabled}:{}}));p.current=e;const b=dt.useMemo(()=>Object.defineProperties({},{invalid:{enumerable:!0,get:()=>!!Ue(f.errors,r)},isDirty:{enumerable:!0,get:()=>!!Ue(f.dirtyFields,r)},isTouched:{enumerable:!0,get:()=>!!Ue(f.touchedFields,r)},isValidating:{enumerable:!0,get:()=>!!Ue(f.validatingFields,r)},error:{enumerable:!0,get:()=>Ue(f.errors,r)}}),[f,r]),j=dt.useCallback(N=>x.current.onChange({target:{value:gE(N),name:r},type:Zf.CHANGE}),[r]),S=dt.useCallback(()=>x.current.onBlur({target:{value:Ue(s._formValues,r),name:r},type:Zf.BLUR}),[r,s._formValues]),k=dt.useCallback(N=>{const O=Ue(s._fields,r);O&&N&&(O._f.ref={focus:()=>N.focus&&N.focus(),select:()=>N.select&&N.select(),setCustomValidity:P=>N.setCustomValidity(P),reportValidity:()=>N.reportValidity()})},[s._fields,r]),C=dt.useMemo(()=>({name:r,value:m,...Ns(n)||f.disabled?{disabled:f.disabled||n}:{},onChange:j,onBlur:S,ref:k}),[r,n,f.disabled,j,S,k,m]);return dt.useEffect(()=>{const N=s._options.shouldUnregister||i,O=y.current;O&&O!==r&&!u&&s.unregister(O),s.register(r,{...p.current.rules,...Ns(p.current.disabled)?{disabled:p.current.disabled}:{}});const P=(T,D)=>{const q=Ue(s._fields,T);q&&q._f&&(q._f.mount=D)};if(P(r,!0),N){const T=tn(Ue(s._options.defaultValues,r,p.current.defaultValue));nr(s._defaultValues,r,T),Pr(Ue(s._formValues,r))&&nr(s._formValues,r,T)}return!u&&s.register(r),y.current=r,()=>{(u?N&&!s._state.action:N)?s.unregister(r):P(r,!1)}},[r,s,u,i]),dt.useEffect(()=>{s._setDisabledField({disabled:n,name:r})},[n,r,s]),dt.useMemo(()=>({field:C,formState:f,fieldState:b}),[C,f,b])}const zl=e=>e.render(DF(e));var RF=(e,t,r,n,s)=>t?{...r[e],types:{...r[e]&&r[e].types?r[e].types:{},[n]:s||!0}}:{},yu=e=>Array.isArray(e)?e:[e],CS=()=>{let e=[];return{get observers(){return e},next:s=>{for(const i of e)i.next&&i.next(s)},subscribe:s=>(e.push(s),{unsubscribe:()=>{e=e.filter(i=>i!==s)}}),unsubscribe:()=>{e=[]}}};function wE(e,t){const r={};for(const n in e)if(e.hasOwnProperty(n)){const s=e[n],i=t[n];if(s&&Yr(s)&&i){const l=wE(s,i);Yr(l)&&(r[n]=l)}else e[n]&&(r[n]=i)}return r}var Jn=e=>Yr(e)&&!Object.keys(e).length,ix=e=>e.type==="file",hi=e=>typeof e=="function",eh=e=>{if(!ex)return!1;const t=e?e.ownerDocument:0;return e instanceof(t&&t.defaultView?t.defaultView.HTMLElement:HTMLElement)},bE=e=>e.type==="select-multiple",ax=e=>e.type==="radio",$F=e=>ax(e)||Vu(e),Rg=e=>eh(e)&&e.isConnected;function MF(e,t){const r=t.slice(0,-1).length;let n=0;for(;n<r;)e=Pr(e)?n++:e[t[n++]];return e}function FF(e){for(const t in e)if(e.hasOwnProperty(t)&&!Pr(e[t]))return!1;return!0}function Vr(e,t){const r=Array.isArray(t)?t:em(t)?[t]:rx(t),n=r.length===1?e:MF(e,r),s=r.length-1,i=r[s];return n&&delete n[i],s!==0&&(Yr(n)&&Jn(n)||Array.isArray(n)&&FF(n))&&Vr(e,r.slice(0,-1)),e}var LF=e=>{for(const t in e)if(hi(e[t]))return!0;return!1};function jE(e){return Array.isArray(e)||Yr(e)&&!LF(e)}function Uv(e,t={}){for(const r in e)jE(e[r])?(t[r]=Array.isArray(e[r])?[]:{},Uv(e[r],t[r])):Pr(e[r])||(t[r]=!0);return t}function Fl(e,t,r){r||(r=Uv(t));for(const n in e)jE(e[n])?Pr(t)||zv(r[n])?r[n]=Uv(e[n],Array.isArray(e[n])?[]:{}):Fl(e[n],fs(t)?{}:t[n],r[n]):r[n]=!fi(e[n],t[n]);return r}const ES={value:!1,isValid:!1},AS={value:!0,isValid:!0};var SE=e=>{if(Array.isArray(e)){if(e.length>1){const t=e.filter(r=>r&&r.checked&&!r.disabled).map(r=>r.value);return{value:t,isValid:!!t.length}}return e[0].checked&&!e[0].disabled?e[0].attributes&&!Pr(e[0].attributes.value)?Pr(e[0].value)||e[0].value===""?AS:{value:e[0].value,isValid:!0}:AS:ES}return ES},_E=(e,{valueAsNumber:t,valueAsDate:r,setValueAs:n})=>Pr(e)?e:t?e===""?NaN:e&&+e:r&&As(e)?new Date(e):n?n(e):e;const PS={isValid:!1,value:null};var kE=e=>Array.isArray(e)?e.reduce((t,r)=>r&&r.checked&&!r.disabled?{isValid:!0,value:r.value}:t,PS):PS;function OS(e){const t=e.ref;return ix(t)?t.files:ax(t)?kE(e.refs).value:bE(t)?[...t.selectedOptions].map(({value:r})=>r):Vu(t)?SE(e.refs).value:_E(Pr(t.value)?e.ref.value:t.value,e)}var zF=(e,t,r,n)=>{const s={};for(const i of e){const l=Ue(t,i);l&&nr(s,i,l._f)}return{criteriaMode:r,names:[...e],fields:s,shouldUseNativeValidation:n}},th=e=>e instanceof RegExp,tu=e=>Pr(e)?e:th(e)?e.source:Yr(e)?th(e.value)?e.value.source:e.value:e,TS=e=>({isOnSubmit:!e||e===di.onSubmit,isOnBlur:e===di.onBlur,isOnChange:e===di.onChange,isOnAll:e===di.all,isOnTouch:e===di.onTouched});const IS="AsyncFunction";var UF=e=>!!e&&!!e.validate&&!!(hi(e.validate)&&e.validate.constructor.name===IS||Yr(e.validate)&&Object.values(e.validate).find(t=>t.constructor.name===IS)),BF=e=>e.mount&&(e.required||e.min||e.max||e.maxLength||e.minLength||e.pattern||e.validate),DS=(e,t,r)=>!r&&(t.watchAll||t.watch.has(e)||[...t.watch].some(n=>e.startsWith(n)&&/^\.\w+/.test(e.slice(n.length))));const vu=(e,t,r,n)=>{for(const s of r||Object.keys(e)){const i=Ue(e,s);if(i){const{_f:l,...u}=i;if(l){if(l.refs&&l.refs[0]&&t(l.refs[0],s)&&!n)return!0;if(l.ref&&t(l.ref,l.name)&&!n)return!0;if(vu(u,t))break}else if(Yr(u)&&vu(u,t))break}}};function RS(e,t,r){const n=Ue(e,r);if(n||em(r))return{error:n,name:r};const s=r.split(".");for(;s.length;){const i=s.join("."),l=Ue(t,i),u=Ue(e,i);if(l&&!Array.isArray(l)&&r!==i)return{name:r};if(u&&u.type)return{name:i,error:u};if(u&&u.root&&u.root.type)return{name:`${i}.root`,error:u.root};s.pop()}return{name:r}}var WF=(e,t,r,n)=>{r(e);const{name:s,...i}=e;return Jn(i)||Object.keys(i).length>=Object.keys(t).length||Object.keys(i).find(l=>t[l]===(!n||di.all))},VF=(e,t,r)=>!e||!t||e===t||yu(e).some(n=>n&&(r?n===t:n.startsWith(t)||t.startsWith(n))),qF=(e,t,r,n,s)=>s.isOnAll?!1:!r&&s.isOnTouch?!(t||e):(r?n.isOnBlur:s.isOnBlur)?!e:(r?n.isOnChange:s.isOnChange)?e:!0,HF=(e,t)=>!tx(Ue(e,t)).length&&Vr(e,t),KF=(e,t,r)=>{const n=yu(Ue(e,r));return nr(n,"root",t[r]),nr(e,r,n),e};function $S(e,t,r="validate"){if(As(e)||Array.isArray(e)&&e.every(As)||Ns(e)&&!e)return{type:r,message:As(e)?e:"",ref:t}}var Ol=e=>Yr(e)&&!th(e)?e:{value:e,message:""},MS=async(e,t,r,n,s,i)=>{const{ref:l,refs:u,required:d,maxLength:m,minLength:f,min:p,max:y,pattern:x,validate:b,name:j,valueAsNumber:S,mount:k}=e._f,C=Ue(r,j);if(!k||t.has(j))return{};const N=u?u[0]:l,O=Q=>{s&&N.reportValidity&&(N.setCustomValidity(Ns(Q)?"":Q||""),N.reportValidity())},P={},T=ax(l),D=Vu(l),q=T||D,F=(S||ix(l))&&Pr(l.value)&&Pr(C)||eh(l)&&l.value===""||C===""||Array.isArray(C)&&!C.length,K=RF.bind(null,j,n,P),B=(Q,oe,ae,J=Gi.maxLength,H=Gi.minLength)=>{const ne=Q?oe:ae;P[j]={type:Q?J:H,message:ne,ref:l,...K(Q?J:H,ne)}};if(i?!Array.isArray(C)||!C.length:d&&(!q&&(F||fs(C))||Ns(C)&&!C||D&&!SE(u).isValid||T&&!kE(u).isValid)){const{value:Q,message:oe}=As(d)?{value:!!d,message:d}:Ol(d);if(Q&&(P[j]={type:Gi.required,message:oe,ref:N,...K(Gi.required,oe)},!n))return O(oe),P}if(!F&&(!fs(p)||!fs(y))){let Q,oe;const ae=Ol(y),J=Ol(p);if(!fs(C)&&!isNaN(C)){const H=l.valueAsNumber||C&&+C;fs(ae.value)||(Q=H>ae.value),fs(J.value)||(oe=H<J.value)}else{const H=l.valueAsDate||new Date(C),ne=ve=>new Date(new Date().toDateString()+" "+ve),ie=l.type=="time",ge=l.type=="week";As(ae.value)&&C&&(Q=ie?ne(C)>ne(ae.value):ge?C>ae.value:H>new Date(ae.value)),As(J.value)&&C&&(oe=ie?ne(C)<ne(J.value):ge?C<J.value:H<new Date(J.value))}if((Q||oe)&&(B(!!Q,ae.message,J.message,Gi.max,Gi.min),!n))return O(P[j].message),P}if((m||f)&&!F&&(As(C)||i&&Array.isArray(C))){const Q=Ol(m),oe=Ol(f),ae=!fs(Q.value)&&C.length>+Q.value,J=!fs(oe.value)&&C.length<+oe.value;if((ae||J)&&(B(ae,Q.message,oe.message),!n))return O(P[j].message),P}if(x&&!F&&As(C)){const{value:Q,message:oe}=Ol(x);if(th(Q)&&!C.match(Q)&&(P[j]={type:Gi.pattern,message:oe,ref:l,...K(Gi.pattern,oe)},!n))return O(oe),P}if(b){if(hi(b)){const Q=await b(C,r),oe=$S(Q,N);if(oe&&(P[j]={...oe,...K(Gi.validate,oe.message)},!n))return O(oe.message),P}else if(Yr(b)){let Q={};for(const oe in b){if(!Jn(Q)&&!n)break;const ae=$S(await b[oe](C,r),N,oe);ae&&(Q={...ae,...K(oe,ae.message)},O(ae.message),n&&(P[j]=Q))}if(!Jn(Q)&&(P[j]={ref:N,...Q},!n))return P}}return O(!0),P};const GF={mode:di.onSubmit,reValidateMode:di.onChange,shouldFocusError:!0};function YF(e={}){let t={...GF,...e},r={submitCount:0,isDirty:!1,isReady:!1,isLoading:hi(t.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},validatingFields:{},errors:t.errors||{},disabled:t.disabled||!1},n={},s=Yr(t.defaultValues)||Yr(t.values)?tn(t.defaultValues||t.values)||{}:{},i=t.shouldUnregister?{}:tn(s),l={action:!1,mount:!1,watch:!1},u={mount:new Set,disabled:new Set,unMount:new Set,array:new Set,watch:new Set},d,m=0;const f={isDirty:!1,dirtyFields:!1,validatingFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1};let p={...f};const y={array:CS(),state:CS()},x=t.criteriaMode===di.all,b=$=>G=>{clearTimeout(m),m=setTimeout($,G)},j=async $=>{if(!t.disabled&&(f.isValid||p.isValid||$)){const G=t.resolver?Jn((await D()).errors):await F(n,!0);G!==r.isValid&&y.state.next({isValid:G})}},S=($,G)=>{!t.disabled&&(f.isValidating||f.validatingFields||p.isValidating||p.validatingFields)&&(($||Array.from(u.mount)).forEach(ue=>{ue&&(G?nr(r.validatingFields,ue,G):Vr(r.validatingFields,ue))}),y.state.next({validatingFields:r.validatingFields,isValidating:!Jn(r.validatingFields)}))},k=($,G=[],ue,_e,be=!0,je=!0)=>{if(_e&&ue&&!t.disabled){if(l.action=!0,je&&Array.isArray(Ue(n,$))){const Fe=ue(Ue(n,$),_e.argA,_e.argB);be&&nr(n,$,Fe)}if(je&&Array.isArray(Ue(r.errors,$))){const Fe=ue(Ue(r.errors,$),_e.argA,_e.argB);be&&nr(r.errors,$,Fe),HF(r.errors,$)}if((f.touchedFields||p.touchedFields)&&je&&Array.isArray(Ue(r.touchedFields,$))){const Fe=ue(Ue(r.touchedFields,$),_e.argA,_e.argB);be&&nr(r.touchedFields,$,Fe)}(f.dirtyFields||p.dirtyFields)&&(r.dirtyFields=Fl(s,i)),y.state.next({name:$,isDirty:B($,G),dirtyFields:r.dirtyFields,errors:r.errors,isValid:r.isValid})}else nr(i,$,G)},C=($,G)=>{nr(r.errors,$,G),y.state.next({errors:r.errors})},N=$=>{r.errors=$,y.state.next({errors:r.errors,isValid:!1})},O=($,G,ue,_e)=>{const be=Ue(n,$);if(be){const je=Ue(i,$,Pr(ue)?Ue(s,$):ue);Pr(je)||_e&&_e.defaultChecked||G?nr(i,$,G?je:OS(be._f)):ae($,je),l.mount&&j()}},P=($,G,ue,_e,be)=>{let je=!1,Fe=!1;const ke={name:$};if(!t.disabled){if(!ue||_e){(f.isDirty||p.isDirty)&&(Fe=r.isDirty,r.isDirty=ke.isDirty=B(),je=Fe!==ke.isDirty);const Ke=fi(Ue(s,$),G);Fe=!!Ue(r.dirtyFields,$),Ke?Vr(r.dirtyFields,$):nr(r.dirtyFields,$,!0),ke.dirtyFields=r.dirtyFields,je=je||(f.dirtyFields||p.dirtyFields)&&Fe!==!Ke}if(ue){const Ke=Ue(r.touchedFields,$);Ke||(nr(r.touchedFields,$,ue),ke.touchedFields=r.touchedFields,je=je||(f.touchedFields||p.touchedFields)&&Ke!==ue)}je&&be&&y.state.next(ke)}return je?ke:{}},T=($,G,ue,_e)=>{const be=Ue(r.errors,$),je=(f.isValid||p.isValid)&&Ns(G)&&r.isValid!==G;if(t.delayError&&ue?(d=b(()=>C($,ue)),d(t.delayError)):(clearTimeout(m),d=null,ue?nr(r.errors,$,ue):Vr(r.errors,$)),(ue?!fi(be,ue):be)||!Jn(_e)||je){const Fe={..._e,...je&&Ns(G)?{isValid:G}:{},errors:r.errors,name:$};r={...r,...Fe},y.state.next(Fe)}},D=async $=>{S($,!0);const G=await t.resolver(i,t.context,zF($||u.mount,n,t.criteriaMode,t.shouldUseNativeValidation));return S($),G},q=async $=>{const{errors:G}=await D($);if($)for(const ue of $){const _e=Ue(G,ue);_e?nr(r.errors,ue,_e):Vr(r.errors,ue)}else r.errors=G;return G},F=async($,G,ue={valid:!0})=>{for(const _e in $){const be=$[_e];if(be){const{_f:je,...Fe}=be;if(je){const ke=u.array.has(je.name),Ke=be._f&&UF(be._f);Ke&&f.validatingFields&&S([je.name],!0);const ct=await MS(be,u.disabled,i,x,t.shouldUseNativeValidation&&!G,ke);if(Ke&&f.validatingFields&&S([je.name]),ct[je.name]&&(ue.valid=!1,G))break;!G&&(Ue(ct,je.name)?ke?KF(r.errors,ct,je.name):nr(r.errors,je.name,ct[je.name]):Vr(r.errors,je.name))}!Jn(Fe)&&await F(Fe,G,ue)}}return ue.valid},K=()=>{for(const $ of u.unMount){const G=Ue(n,$);G&&(G._f.refs?G._f.refs.every(ue=>!Rg(ue)):!Rg(G._f.ref))&&xe($)}u.unMount=new Set},B=($,G)=>!t.disabled&&($&&G&&nr(i,$,G),!fi(ve(),s)),Q=($,G,ue)=>Lv($,u,{...l.mount?i:Pr(G)?s:As($)?{[$]:G}:G},ue,G),oe=$=>tx(Ue(l.mount?i:s,$,t.shouldUnregister?Ue(s,$,[]):[])),ae=($,G,ue={})=>{const _e=Ue(n,$);let be=G;if(_e){const je=_e._f;je&&(!je.disabled&&nr(i,$,_E(G,je)),be=eh(je.ref)&&fs(G)?"":G,bE(je.ref)?[...je.ref.options].forEach(Fe=>Fe.selected=be.includes(Fe.value)):je.refs?Vu(je.ref)?je.refs.forEach(Fe=>{(!Fe.defaultChecked||!Fe.disabled)&&(Array.isArray(be)?Fe.checked=!!be.find(ke=>ke===Fe.value):Fe.checked=be===Fe.value||!!be)}):je.refs.forEach(Fe=>Fe.checked=Fe.value===be):ix(je.ref)?je.ref.value="":(je.ref.value=be,je.ref.type||y.state.next({name:$,values:tn(i)})))}(ue.shouldDirty||ue.shouldTouch)&&P($,be,ue.shouldTouch,ue.shouldDirty,!0),ue.shouldValidate&&ge($)},J=($,G,ue)=>{for(const _e in G){if(!G.hasOwnProperty(_e))return;const be=G[_e],je=$+"."+_e,Fe=Ue(n,je);(u.array.has($)||Yr(be)||Fe&&!Fe._f)&&!No(be)?J(je,be,ue):ae(je,be,ue)}},H=($,G,ue={})=>{const _e=Ue(n,$),be=u.array.has($),je=tn(G);nr(i,$,je),be?(y.array.next({name:$,values:tn(i)}),(f.isDirty||f.dirtyFields||p.isDirty||p.dirtyFields)&&ue.shouldDirty&&y.state.next({name:$,dirtyFields:Fl(s,i),isDirty:B($,je)})):_e&&!_e._f&&!fs(je)?J($,je,ue):ae($,je,ue),DS($,u)&&y.state.next({...r,name:$}),y.state.next({name:l.mount?$:void 0,values:tn(i)})},ne=async $=>{l.mount=!0;const G=$.target;let ue=G.name,_e=!0;const be=Ue(n,ue),je=Ke=>{_e=Number.isNaN(Ke)||No(Ke)&&isNaN(Ke.getTime())||fi(Ke,Ue(i,ue,Ke))},Fe=TS(t.mode),ke=TS(t.reValidateMode);if(be){let Ke,ct;const ir=G.type?OS(be._f):gE($),Mt=$.type===Zf.BLUR||$.type===Zf.FOCUS_OUT,Et=!BF(be._f)&&!t.resolver&&!Ue(r.errors,ue)&&!be._f.deps||qF(Mt,Ue(r.touchedFields,ue),r.isSubmitted,ke,Fe),Qt=DS(ue,u,Mt);nr(i,ue,ir),Mt?(!G||!G.readOnly)&&(be._f.onBlur&&be._f.onBlur($),d&&d(0)):be._f.onChange&&be._f.onChange($);const Tt=P(ue,ir,Mt),Wt=!Jn(Tt)||Qt;if(!Mt&&y.state.next({name:ue,type:$.type,values:tn(i)}),Et)return(f.isValid||p.isValid)&&(t.mode==="onBlur"?Mt&&j():Mt||j()),Wt&&y.state.next({name:ue,...Qt?{}:Tt});if(!Mt&&Qt&&y.state.next({...r}),t.resolver){const{errors:_r}=await D([ue]);if(je(ir),_e){const er=RS(r.errors,n,ue),ar=RS(_r,n,er.name||ue);Ke=ar.error,ue=ar.name,ct=Jn(_r)}}else S([ue],!0),Ke=(await MS(be,u.disabled,i,x,t.shouldUseNativeValidation))[ue],S([ue]),je(ir),_e&&(Ke?ct=!1:(f.isValid||p.isValid)&&(ct=await F(n,!0)));_e&&(be._f.deps&&(!Array.isArray(be._f.deps)||be._f.deps.length>0)&&ge(be._f.deps),T(ue,ct,Ke,Tt))}},ie=($,G)=>{if(Ue(r.errors,G)&&$.focus)return $.focus(),1},ge=async($,G={})=>{let ue,_e;const be=yu($);if(t.resolver){const je=await q(Pr($)?$:be);ue=Jn(je),_e=$?!be.some(Fe=>Ue(je,Fe)):ue}else $?(_e=(await Promise.all(be.map(async je=>{const Fe=Ue(n,je);return await F(Fe&&Fe._f?{[je]:Fe}:Fe)}))).every(Boolean),!(!_e&&!r.isValid)&&j()):_e=ue=await F(n);return y.state.next({...!As($)||(f.isValid||p.isValid)&&ue!==r.isValid?{}:{name:$},...t.resolver||!$?{isValid:ue}:{},errors:r.errors}),G.shouldFocus&&!_e&&vu(n,ie,$?be:u.mount),_e},ve=($,G)=>{let ue={...l.mount?i:s};return G&&(ue=wE(G.dirtyFields?r.dirtyFields:r.touchedFields,ue)),Pr($)?ue:As($)?Ue(ue,$):$.map(_e=>Ue(ue,_e))},I=($,G)=>({invalid:!!Ue((G||r).errors,$),isDirty:!!Ue((G||r).dirtyFields,$),error:Ue((G||r).errors,$),isValidating:!!Ue(r.validatingFields,$),isTouched:!!Ue((G||r).touchedFields,$)}),V=$=>{$&&yu($).forEach(G=>Vr(r.errors,G)),y.state.next({errors:$?r.errors:{}})},Ae=($,G,ue)=>{const _e=(Ue(n,$,{_f:{}})._f||{}).ref,be=Ue(r.errors,$)||{},{ref:je,message:Fe,type:ke,...Ke}=be;nr(r.errors,$,{...Ke,...G,ref:_e}),y.state.next({name:$,errors:r.errors,isValid:!1}),ue&&ue.shouldFocus&&_e&&_e.focus&&_e.focus()},X=($,G)=>hi($)?y.state.subscribe({next:ue=>"values"in ue&&$(Q(void 0,G),ue)}):Q($,G,!0),re=$=>y.state.subscribe({next:G=>{VF($.name,G.name,$.exact)&&WF(G,$.formState||f,Ct,$.reRenderRoot)&&$.callback({values:{...i},...r,...G,defaultValues:s})}}).unsubscribe,de=$=>(l.mount=!0,p={...p,...$.formState},re({...$,formState:p})),xe=($,G={})=>{for(const ue of $?yu($):u.mount)u.mount.delete(ue),u.array.delete(ue),G.keepValue||(Vr(n,ue),Vr(i,ue)),!G.keepError&&Vr(r.errors,ue),!G.keepDirty&&Vr(r.dirtyFields,ue),!G.keepTouched&&Vr(r.touchedFields,ue),!G.keepIsValidating&&Vr(r.validatingFields,ue),!t.shouldUnregister&&!G.keepDefaultValue&&Vr(s,ue);y.state.next({values:tn(i)}),y.state.next({...r,...G.keepDirty?{isDirty:B()}:{}}),!G.keepIsValid&&j()},ye=({disabled:$,name:G})=>{(Ns($)&&l.mount||$||u.disabled.has(G))&&($?u.disabled.add(G):u.disabled.delete(G))},U=($,G={})=>{let ue=Ue(n,$);const _e=Ns(G.disabled)||Ns(t.disabled);return nr(n,$,{...ue||{},_f:{...ue&&ue._f?ue._f:{ref:{name:$}},name:$,mount:!0,...G}}),u.mount.add($),ue?ye({disabled:Ns(G.disabled)?G.disabled:t.disabled,name:$}):O($,!0,G.value),{..._e?{disabled:G.disabled||t.disabled}:{},...t.progressive?{required:!!G.required,min:tu(G.min),max:tu(G.max),minLength:tu(G.minLength),maxLength:tu(G.maxLength),pattern:tu(G.pattern)}:{},name:$,onChange:ne,onBlur:ne,ref:be=>{if(be){U($,G),ue=Ue(n,$);const je=Pr(be.value)&&be.querySelectorAll&&be.querySelectorAll("input,select,textarea")[0]||be,Fe=$F(je),ke=ue._f.refs||[];if(Fe?ke.find(Ke=>Ke===je):je===ue._f.ref)return;nr(n,$,{_f:{...ue._f,...Fe?{refs:[...ke.filter(Rg),je,...Array.isArray(Ue(s,$))?[{}]:[]],ref:{type:je.type,name:$}}:{ref:je}}}),O($,!1,void 0,je)}else ue=Ue(n,$,{}),ue._f&&(ue._f.mount=!1),(t.shouldUnregister||G.shouldUnregister)&&!(yE(u.array,$)&&l.action)&&u.unMount.add($)}}},$e=()=>t.shouldFocusError&&vu(n,ie,u.mount),Ze=$=>{Ns($)&&(y.state.next({disabled:$}),vu(n,(G,ue)=>{const _e=Ue(n,ue);_e&&(G.disabled=_e._f.disabled||$,Array.isArray(_e._f.refs)&&_e._f.refs.forEach(be=>{be.disabled=_e._f.disabled||$}))},0,!1))},Z=($,G)=>async ue=>{let _e;ue&&(ue.preventDefault&&ue.preventDefault(),ue.persist&&ue.persist());let be=tn(i);if(y.state.next({isSubmitting:!0}),t.resolver){const{errors:je,values:Fe}=await D();r.errors=je,be=tn(Fe)}else await F(n);if(u.disabled.size)for(const je of u.disabled)Vr(be,je);if(Vr(r.errors,"root"),Jn(r.errors)){y.state.next({errors:{}});try{await $(be,ue)}catch(je){_e=je}}else G&&await G({...r.errors},ue),$e(),setTimeout($e);if(y.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:Jn(r.errors)&&!_e,submitCount:r.submitCount+1,errors:r.errors}),_e)throw _e},Pe=($,G={})=>{Ue(n,$)&&(Pr(G.defaultValue)?H($,tn(Ue(s,$))):(H($,G.defaultValue),nr(s,$,tn(G.defaultValue))),G.keepTouched||Vr(r.touchedFields,$),G.keepDirty||(Vr(r.dirtyFields,$),r.isDirty=G.defaultValue?B($,tn(Ue(s,$))):B()),G.keepError||(Vr(r.errors,$),f.isValid&&j()),y.state.next({...r}))},Ve=($,G={})=>{const ue=$?tn($):s,_e=tn(ue),be=Jn($),je=be?s:_e;if(G.keepDefaultValues||(s=ue),!G.keepValues){if(G.keepDirtyValues){const Fe=new Set([...u.mount,...Object.keys(Fl(s,i))]);for(const ke of Array.from(Fe))Ue(r.dirtyFields,ke)?nr(je,ke,Ue(i,ke)):H(ke,Ue(je,ke))}else{if(ex&&Pr($))for(const Fe of u.mount){const ke=Ue(n,Fe);if(ke&&ke._f){const Ke=Array.isArray(ke._f.refs)?ke._f.refs[0]:ke._f.ref;if(eh(Ke)){const ct=Ke.closest("form");if(ct){ct.reset();break}}}}if(G.keepFieldsRef)for(const Fe of u.mount)H(Fe,Ue(je,Fe));else n={}}i=t.shouldUnregister?G.keepDefaultValues?tn(s):{}:tn(je),y.array.next({values:{...je}}),y.state.next({values:{...je}})}u={mount:G.keepDirtyValues?u.mount:new Set,unMount:new Set,array:new Set,disabled:new Set,watch:new Set,watchAll:!1,focus:""},l.mount=!f.isValid||!!G.keepIsValid||!!G.keepDirtyValues||!t.shouldUnregister&&!Jn(je),l.watch=!!t.shouldUnregister,y.state.next({submitCount:G.keepSubmitCount?r.submitCount:0,isDirty:be?!1:G.keepDirty?r.isDirty:!!(G.keepDefaultValues&&!fi($,s)),isSubmitted:G.keepIsSubmitted?r.isSubmitted:!1,dirtyFields:be?{}:G.keepDirtyValues?G.keepDefaultValues&&i?Fl(s,i):r.dirtyFields:G.keepDefaultValues&&$?Fl(s,$):G.keepDirty?r.dirtyFields:{},touchedFields:G.keepTouched?r.touchedFields:{},errors:G.keepErrors?r.errors:{},isSubmitSuccessful:G.keepIsSubmitSuccessful?r.isSubmitSuccessful:!1,isSubmitting:!1,defaultValues:s})},ft=($,G)=>Ve(hi($)?$(i):$,G),gt=($,G={})=>{const ue=Ue(n,$),_e=ue&&ue._f;if(_e){const be=_e.refs?_e.refs[0]:_e.ref;be.focus&&(be.focus(),G.shouldSelect&&hi(be.select)&&be.select())}},Ct=$=>{r={...r,...$}},kt={control:{register:U,unregister:xe,getFieldState:I,handleSubmit:Z,setError:Ae,_subscribe:re,_runSchema:D,_focusError:$e,_getWatch:Q,_getDirty:B,_setValid:j,_setFieldArray:k,_setDisabledField:ye,_setErrors:N,_getFieldArray:oe,_reset:Ve,_resetDefaultValues:()=>hi(t.defaultValues)&&t.defaultValues().then($=>{ft($,t.resetOptions),y.state.next({isLoading:!1})}),_removeUnmounted:K,_disableForm:Ze,_subjects:y,_proxyFormState:f,get _fields(){return n},get _formValues(){return i},get _state(){return l},set _state($){l=$},get _defaultValues(){return s},get _names(){return u},set _names($){u=$},get _formState(){return r},get _options(){return t},set _options($){t={...t,...$}}},subscribe:de,trigger:ge,register:U,handleSubmit:Z,watch:X,setValue:H,getValues:ve,reset:ft,resetField:Pe,clearErrors:V,unregister:xe,setError:Ae,setFocus:gt,getFieldState:I};return{...kt,formControl:kt}}function ku(e={}){const t=dt.useRef(void 0),r=dt.useRef(void 0),[n,s]=dt.useState({isDirty:!1,isValidating:!1,isLoading:hi(e.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},validatingFields:{},errors:e.errors||{},disabled:e.disabled||!1,isReady:!1,defaultValues:hi(e.defaultValues)?void 0:e.defaultValues});if(!t.current)if(e.formControl)t.current={...e.formControl,formState:n},e.defaultValues&&!hi(e.defaultValues)&&e.formControl.reset(e.defaultValues,e.resetOptions);else{const{formControl:l,...u}=YF(e);t.current={...u,formState:n}}const i=t.current.control;return i._options=e,sx(()=>{const l=i._subscribe({formState:i._proxyFormState,callback:()=>s({...i._formState}),reRenderRoot:!0});return s(u=>({...u,isReady:!0})),i._formState.isReady=!0,l},[i]),dt.useEffect(()=>i._disableForm(e.disabled),[i,e.disabled]),dt.useEffect(()=>{e.mode&&(i._options.mode=e.mode),e.reValidateMode&&(i._options.reValidateMode=e.reValidateMode)},[i,e.mode,e.reValidateMode]),dt.useEffect(()=>{e.errors&&(i._setErrors(e.errors),i._focusError())},[i,e.errors]),dt.useEffect(()=>{e.shouldUnregister&&i._subjects.state.next({values:i._getWatch()})},[i,e.shouldUnregister]),dt.useEffect(()=>{if(i._proxyFormState.isDirty){const l=i._getDirty();l!==n.isDirty&&i._subjects.state.next({isDirty:l})}},[i,n.isDirty]),dt.useEffect(()=>{e.values&&!fi(e.values,r.current)?(i._reset(e.values,{keepFieldsRef:!0,...i._options.resetOptions}),r.current=e.values,s(l=>({...l}))):i._resetDefaultValues()},[i,e.values]),dt.useEffect(()=>{i._state.mount||(i._setValid(),i._state.mount=!0),i._state.watch&&(i._state.watch=!1,i._subjects.state.next({...i._formState})),i._removeUnmounted()}),t.current.formState=xE(n,i),t.current}function NE(e){var t,r,n="";if(typeof e=="string"||typeof e=="number")n+=e;else if(typeof e=="object")if(Array.isArray(e)){var s=e.length;for(t=0;t<s;t++)e[t]&&(r=NE(e[t]))&&(n&&(n+=" "),n+=r)}else for(r in e)e[r]&&(n&&(n+=" "),n+=r);return n}function fr(){for(var e,t,r=0,n="",s=arguments.length;r<s;r++)(e=arguments[r])&&(t=NE(e))&&(n&&(n+=" "),n+=t);return n}var JF=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"];function ox(e){if(typeof e!="string")return!1;var t=JF;return t.includes(e)}var QF=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"];function CE(e){if(typeof e!="string")return!1;var t=QF;return t.includes(e)}function EE(e){return typeof e=="string"&&e.startsWith("data-")}function Ja(e){var t=Object.entries(e).filter(r=>{var[n]=r;return CE(n)||EE(n)});return Object.fromEntries(t)}function lx(e){if(e==null)return null;if(v.isValidElement(e)&&typeof e.props=="object"&&e.props!==null){var t=e.props;return Ja(t)}return typeof e=="object"&&!Array.isArray(e)?Ja(e):null}function Xs(e){var t=Object.entries(e).filter(r=>{var[n]=r;return CE(n)||EE(n)||ox(n)});return Object.fromEntries(t)}var XF=["children","width","height","viewBox","className","style","title","desc"];function Bv(){return Bv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Bv.apply(null,arguments)}function ZF(e,t){if(e==null)return{};var r,n,s=eL(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function eL(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var AE=v.forwardRef((e,t)=>{var{children:r,width:n,height:s,viewBox:i,className:l,style:u,title:d,desc:m}=e,f=ZF(e,XF),p=i||{width:n,height:s,x:0,y:0},y=fr("recharts-surface",l);return v.createElement("svg",Bv({},Xs(f),{className:y,width:n,height:s,style:u,viewBox:"".concat(p.x," ").concat(p.y," ").concat(p.width," ").concat(p.height),ref:t}),v.createElement("title",null,d),v.createElement("desc",null,m),r)}),tL=["children","className"];function Wv(){return Wv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Wv.apply(null,arguments)}function rL(e,t){if(e==null)return{};var r,n,s=nL(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function nL(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var la=v.forwardRef((e,t)=>{var{children:r,className:n}=e,s=rL(e,tL),i=fr("recharts-layer",n);return v.createElement("g",Wv({className:i},Xs(s),{ref:t}),r)}),sL=v.createContext(null);function sr(e){return function(){return e}}const PE=Math.cos,rh=Math.sin,ji=Math.sqrt,nh=Math.PI,tm=2*nh,Vv=Math.PI,qv=2*Vv,wo=1e-6,iL=qv-wo;function OE(e){this._+=e[0];for(let t=1,r=e.length;t<r;++t)this._+=arguments[t]+e[t]}function aL(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return OE;const r=10**t;return function(n){this._+=n[0];for(let s=1,i=n.length;s<i;++s)this._+=Math.round(arguments[s]*r)/r+n[s]}}class oL{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?OE:aL(t)}moveTo(t,r){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+r}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,r){this._append`L${this._x1=+t},${this._y1=+r}`}quadraticCurveTo(t,r,n,s){this._append`Q${+t},${+r},${this._x1=+n},${this._y1=+s}`}bezierCurveTo(t,r,n,s,i,l){this._append`C${+t},${+r},${+n},${+s},${this._x1=+i},${this._y1=+l}`}arcTo(t,r,n,s,i){if(t=+t,r=+r,n=+n,s=+s,i=+i,i<0)throw new Error(`negative radius: ${i}`);let l=this._x1,u=this._y1,d=n-t,m=s-r,f=l-t,p=u-r,y=f*f+p*p;if(this._x1===null)this._append`M${this._x1=t},${this._y1=r}`;else if(y>wo)if(!(Math.abs(p*d-m*f)>wo)||!i)this._append`L${this._x1=t},${this._y1=r}`;else{let x=n-l,b=s-u,j=d*d+m*m,S=x*x+b*b,k=Math.sqrt(j),C=Math.sqrt(y),N=i*Math.tan((Vv-Math.acos((j+y-S)/(2*k*C)))/2),O=N/C,P=N/k;Math.abs(O-1)>wo&&this._append`L${t+O*f},${r+O*p}`,this._append`A${i},${i},0,0,${+(p*x>f*b)},${this._x1=t+P*d},${this._y1=r+P*m}`}}arc(t,r,n,s,i,l){if(t=+t,r=+r,n=+n,l=!!l,n<0)throw new Error(`negative radius: ${n}`);let u=n*Math.cos(s),d=n*Math.sin(s),m=t+u,f=r+d,p=1^l,y=l?s-i:i-s;this._x1===null?this._append`M${m},${f}`:(Math.abs(this._x1-m)>wo||Math.abs(this._y1-f)>wo)&&this._append`L${m},${f}`,n&&(y<0&&(y=y%qv+qv),y>iL?this._append`A${n},${n},0,1,${p},${t-u},${r-d}A${n},${n},0,1,${p},${this._x1=m},${this._y1=f}`:y>wo&&this._append`A${n},${n},0,${+(y>=Vv)},${p},${this._x1=t+n*Math.cos(i)},${this._y1=r+n*Math.sin(i)}`)}rect(t,r,n,s){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+r}h${n=+n}v${+s}h${-n}Z`}toString(){return this._}}function cx(e){let t=3;return e.digits=function(r){if(!arguments.length)return t;if(r==null)t=null;else{const n=Math.floor(r);if(!(n>=0))throw new RangeError(`invalid digits: ${r}`);t=n}return e},()=>new oL(t)}function ux(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function TE(e){this._context=e}TE.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function rm(e){return new TE(e)}function IE(e){return e[0]}function DE(e){return e[1]}function RE(e,t){var r=sr(!0),n=null,s=rm,i=null,l=cx(u);e=typeof e=="function"?e:e===void 0?IE:sr(e),t=typeof t=="function"?t:t===void 0?DE:sr(t);function u(d){var m,f=(d=ux(d)).length,p,y=!1,x;for(n==null&&(i=s(x=l())),m=0;m<=f;++m)!(m<f&&r(p=d[m],m,d))===y&&((y=!y)?i.lineStart():i.lineEnd()),y&&i.point(+e(p,m,d),+t(p,m,d));if(x)return i=null,x+""||null}return u.x=function(d){return arguments.length?(e=typeof d=="function"?d:sr(+d),u):e},u.y=function(d){return arguments.length?(t=typeof d=="function"?d:sr(+d),u):t},u.defined=function(d){return arguments.length?(r=typeof d=="function"?d:sr(!!d),u):r},u.curve=function(d){return arguments.length?(s=d,n!=null&&(i=s(n)),u):s},u.context=function(d){return arguments.length?(d==null?n=i=null:i=s(n=d),u):n},u}function pf(e,t,r){var n=null,s=sr(!0),i=null,l=rm,u=null,d=cx(m);e=typeof e=="function"?e:e===void 0?IE:sr(+e),t=typeof t=="function"?t:sr(t===void 0?0:+t),r=typeof r=="function"?r:r===void 0?DE:sr(+r);function m(p){var y,x,b,j=(p=ux(p)).length,S,k=!1,C,N=new Array(j),O=new Array(j);for(i==null&&(u=l(C=d())),y=0;y<=j;++y){if(!(y<j&&s(S=p[y],y,p))===k)if(k=!k)x=y,u.areaStart(),u.lineStart();else{for(u.lineEnd(),u.lineStart(),b=y-1;b>=x;--b)u.point(N[b],O[b]);u.lineEnd(),u.areaEnd()}k&&(N[y]=+e(S,y,p),O[y]=+t(S,y,p),u.point(n?+n(S,y,p):N[y],r?+r(S,y,p):O[y]))}if(C)return u=null,C+""||null}function f(){return RE().defined(s).curve(l).context(i)}return m.x=function(p){return arguments.length?(e=typeof p=="function"?p:sr(+p),n=null,m):e},m.x0=function(p){return arguments.length?(e=typeof p=="function"?p:sr(+p),m):e},m.x1=function(p){return arguments.length?(n=p==null?null:typeof p=="function"?p:sr(+p),m):n},m.y=function(p){return arguments.length?(t=typeof p=="function"?p:sr(+p),r=null,m):t},m.y0=function(p){return arguments.length?(t=typeof p=="function"?p:sr(+p),m):t},m.y1=function(p){return arguments.length?(r=p==null?null:typeof p=="function"?p:sr(+p),m):r},m.lineX0=m.lineY0=function(){return f().x(e).y(t)},m.lineY1=function(){return f().x(e).y(r)},m.lineX1=function(){return f().x(n).y(t)},m.defined=function(p){return arguments.length?(s=typeof p=="function"?p:sr(!!p),m):s},m.curve=function(p){return arguments.length?(l=p,i!=null&&(u=l(i)),m):l},m.context=function(p){return arguments.length?(p==null?i=u=null:u=l(i=p),m):i},m}class $E{constructor(t,r){this._context=t,this._x=r}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(t,r){switch(t=+t,r=+r,this._point){case 0:{this._point=1,this._line?this._context.lineTo(t,r):this._context.moveTo(t,r);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+t)/2,this._y0,this._x0,r,t,r):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+r)/2,t,this._y0,t,r);break}}this._x0=t,this._y0=r}}function lL(e){return new $E(e,!0)}function cL(e){return new $E(e,!1)}const dx={draw(e,t){const r=ji(t/nh);e.moveTo(r,0),e.arc(0,0,r,0,tm)}},uL={draw(e,t){const r=ji(t/5)/2;e.moveTo(-3*r,-r),e.lineTo(-r,-r),e.lineTo(-r,-3*r),e.lineTo(r,-3*r),e.lineTo(r,-r),e.lineTo(3*r,-r),e.lineTo(3*r,r),e.lineTo(r,r),e.lineTo(r,3*r),e.lineTo(-r,3*r),e.lineTo(-r,r),e.lineTo(-3*r,r),e.closePath()}},ME=ji(1/3),dL=ME*2,fL={draw(e,t){const r=ji(t/dL),n=r*ME;e.moveTo(0,-r),e.lineTo(n,0),e.lineTo(0,r),e.lineTo(-n,0),e.closePath()}},hL={draw(e,t){const r=ji(t),n=-r/2;e.rect(n,n,r,r)}},mL=.8908130915292852,FE=rh(nh/10)/rh(7*nh/10),pL=rh(tm/10)*FE,gL=-PE(tm/10)*FE,yL={draw(e,t){const r=ji(t*mL),n=pL*r,s=gL*r;e.moveTo(0,-r),e.lineTo(n,s);for(let i=1;i<5;++i){const l=tm*i/5,u=PE(l),d=rh(l);e.lineTo(d*r,-u*r),e.lineTo(u*n-d*s,d*n+u*s)}e.closePath()}},$g=ji(3),vL={draw(e,t){const r=-ji(t/($g*3));e.moveTo(0,r*2),e.lineTo(-$g*r,-r),e.lineTo($g*r,-r),e.closePath()}},Hs=-.5,Ks=ji(3)/2,Hv=1/ji(12),xL=(Hv/2+1)*3,wL={draw(e,t){const r=ji(t/xL),n=r/2,s=r*Hv,i=n,l=r*Hv+r,u=-i,d=l;e.moveTo(n,s),e.lineTo(i,l),e.lineTo(u,d),e.lineTo(Hs*n-Ks*s,Ks*n+Hs*s),e.lineTo(Hs*i-Ks*l,Ks*i+Hs*l),e.lineTo(Hs*u-Ks*d,Ks*u+Hs*d),e.lineTo(Hs*n+Ks*s,Hs*s-Ks*n),e.lineTo(Hs*i+Ks*l,Hs*l-Ks*i),e.lineTo(Hs*u+Ks*d,Hs*d-Ks*u),e.closePath()}};function bL(e,t){let r=null,n=cx(s);e=typeof e=="function"?e:sr(e||dx),t=typeof t=="function"?t:sr(t===void 0?64:+t);function s(){let i;if(r||(r=i=n()),e.apply(this,arguments).draw(r,+t.apply(this,arguments)),i)return r=null,i+""||null}return s.type=function(i){return arguments.length?(e=typeof i=="function"?i:sr(i),s):e},s.size=function(i){return arguments.length?(t=typeof i=="function"?i:sr(+i),s):t},s.context=function(i){return arguments.length?(r=i??null,s):r},s}function sh(){}function ih(e,t,r){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+r)/6)}function LE(e){this._context=e}LE.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:ih(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:ih(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function jL(e){return new LE(e)}function zE(e){this._context=e}zE.prototype={areaStart:sh,areaEnd:sh,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:ih(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function SL(e){return new zE(e)}function UE(e){this._context=e}UE.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var r=(this._x0+4*this._x1+e)/6,n=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(r,n):this._context.moveTo(r,n);break;case 3:this._point=4;default:ih(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function _L(e){return new UE(e)}function BE(e){this._context=e}BE.prototype={areaStart:sh,areaEnd:sh,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}};function kL(e){return new BE(e)}function FS(e){return e<0?-1:1}function LS(e,t,r){var n=e._x1-e._x0,s=t-e._x1,i=(e._y1-e._y0)/(n||s<0&&-0),l=(r-e._y1)/(s||n<0&&-0),u=(i*s+l*n)/(n+s);return(FS(i)+FS(l))*Math.min(Math.abs(i),Math.abs(l),.5*Math.abs(u))||0}function zS(e,t){var r=e._x1-e._x0;return r?(3*(e._y1-e._y0)/r-t)/2:t}function Mg(e,t,r){var n=e._x0,s=e._y0,i=e._x1,l=e._y1,u=(i-n)/3;e._context.bezierCurveTo(n+u,s+u*t,i-u,l-u*r,i,l)}function ah(e){this._context=e}ah.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:Mg(this,this._t0,zS(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var r=NaN;if(e=+e,t=+t,!(e===this._x1&&t===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,Mg(this,zS(this,r=LS(this,e,t)),r);break;default:Mg(this,this._t0,r=LS(this,e,t));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=r}}};function WE(e){this._context=new VE(e)}(WE.prototype=Object.create(ah.prototype)).point=function(e,t){ah.prototype.point.call(this,t,e)};function VE(e){this._context=e}VE.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,r,n,s,i){this._context.bezierCurveTo(t,e,n,r,i,s)}};function NL(e){return new ah(e)}function CL(e){return new WE(e)}function qE(e){this._context=e}qE.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,r=e.length;if(r)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),r===2)this._context.lineTo(e[1],t[1]);else for(var n=US(e),s=US(t),i=0,l=1;l<r;++i,++l)this._context.bezierCurveTo(n[0][i],s[0][i],n[1][i],s[1][i],e[l],t[l]);(this._line||this._line!==0&&r===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}};function US(e){var t,r=e.length-1,n,s=new Array(r),i=new Array(r),l=new Array(r);for(s[0]=0,i[0]=2,l[0]=e[0]+2*e[1],t=1;t<r-1;++t)s[t]=1,i[t]=4,l[t]=4*e[t]+2*e[t+1];for(s[r-1]=2,i[r-1]=7,l[r-1]=8*e[r-1]+e[r],t=1;t<r;++t)n=s[t]/i[t-1],i[t]-=n,l[t]-=n*l[t-1];for(s[r-1]=l[r-1]/i[r-1],t=r-2;t>=0;--t)s[t]=(l[t]-s[t+1])/i[t];for(i[r-1]=(e[r]+s[r-1])/2,t=0;t<r-1;++t)i[t]=2*e[t+1]-s[t+1];return[s,i]}function EL(e){return new qE(e)}function nm(e,t){this._context=e,this._t=t}nm.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var r=this._x*(1-this._t)+e*this._t;this._context.lineTo(r,this._y),this._context.lineTo(r,t)}break}}this._x=e,this._y=t}};function AL(e){return new nm(e,.5)}function PL(e){return new nm(e,0)}function OL(e){return new nm(e,1)}function Jl(e,t){if((l=e.length)>1)for(var r=1,n,s,i=e[t[0]],l,u=i.length;r<l;++r)for(s=i,i=e[t[r]],n=0;n<u;++n)i[n][1]+=i[n][0]=isNaN(s[n][1])?s[n][0]:s[n][1]}function Kv(e){for(var t=e.length,r=new Array(t);--t>=0;)r[t]=t;return r}function TL(e,t){return e[t]}function IL(e){const t=[];return t.key=e,t}function DL(){var e=sr([]),t=Kv,r=Jl,n=TL;function s(i){var l=Array.from(e.apply(this,arguments),IL),u,d=l.length,m=-1,f;for(const p of i)for(u=0,++m;u<d;++u)(l[u][m]=[0,+n(p,l[u].key,m,i)]).data=p;for(u=0,f=ux(t(l));u<d;++u)l[f[u]].index=u;return r(l,f),l}return s.keys=function(i){return arguments.length?(e=typeof i=="function"?i:sr(Array.from(i)),s):e},s.value=function(i){return arguments.length?(n=typeof i=="function"?i:sr(+i),s):n},s.order=function(i){return arguments.length?(t=i==null?Kv:typeof i=="function"?i:sr(Array.from(i)),s):t},s.offset=function(i){return arguments.length?(r=i??Jl,s):r},s}function RL(e,t){if((n=e.length)>0){for(var r,n,s=0,i=e[0].length,l;s<i;++s){for(l=r=0;r<n;++r)l+=e[r][s][1]||0;if(l)for(r=0;r<n;++r)e[r][s][1]/=l}Jl(e,t)}}function $L(e,t){if((s=e.length)>0){for(var r=0,n=e[t[0]],s,i=n.length;r<i;++r){for(var l=0,u=0;l<s;++l)u+=e[l][r][1]||0;n[r][1]+=n[r][0]=-u/2}Jl(e,t)}}function ML(e,t){if(!(!((l=e.length)>0)||!((i=(s=e[t[0]]).length)>0))){for(var r=0,n=1,s,i,l;n<i;++n){for(var u=0,d=0,m=0;u<l;++u){for(var f=e[t[u]],p=f[n][1]||0,y=f[n-1][1]||0,x=(p-y)/2,b=0;b<u;++b){var j=e[t[b]],S=j[n][1]||0,k=j[n-1][1]||0;x+=S-k}d+=p,m+=x*p}s[n-1][1]+=s[n-1][0]=r,d&&(r-=m/d)}s[n-1][1]+=s[n-1][0]=r,Jl(e,t)}}var Fg={},Lg={},BS;function FL(){return BS||(BS=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r==="__proto__"}e.isUnsafeProperty=t})(Lg)),Lg}var zg={},WS;function HE(){return WS||(WS=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){switch(typeof r){case"number":case"symbol":return!1;case"string":return r.includes(".")||r.includes("[")||r.includes("]")}}e.isDeepKey=t})(zg)),zg}var Ug={},VS;function fx(){return VS||(VS=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){var n;return typeof r=="string"||typeof r=="symbol"?r:Object.is((n=r==null?void 0:r.valueOf)==null?void 0:n.call(r),-0)?"-0":String(r)}e.toKey=t})(Ug)),Ug}var Bg={},Wg={},qS;function LL(){return qS||(qS=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){if(r==null)return"";if(typeof r=="string")return r;if(Array.isArray(r))return r.map(t).join(",");const n=String(r);return n==="0"&&Object.is(Number(r),-0)?"-0":n}e.toString=t})(Wg)),Wg}var HS;function hx(){return HS||(HS=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=LL(),r=fx();function n(s){if(Array.isArray(s))return s.map(r.toKey);if(typeof s=="symbol")return[s];s=t.toString(s);const i=[],l=s.length;if(l===0)return i;let u=0,d="",m="",f=!1;for(s.charCodeAt(0)===46&&(i.push(""),u++);u<l;){const p=s[u];m?p==="\\"&&u+1<l?(u++,d+=s[u]):p===m?m="":d+=p:f?p==='"'||p==="'"?m=p:p==="]"?(f=!1,i.push(d),d=""):d+=p:p==="["?(f=!0,d&&(i.push(d),d="")):p==="."?d&&(i.push(d),d=""):d+=p,u++}return d&&i.push(d),i}e.toPath=n})(Bg)),Bg}var KS;function mx(){return KS||(KS=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=FL(),r=HE(),n=fx(),s=hx();function i(u,d,m){if(u==null)return m;switch(typeof d){case"string":{if(t.isUnsafeProperty(d))return m;const f=u[d];return f===void 0?r.isDeepKey(d)?i(u,s.toPath(d),m):m:f}case"number":case"symbol":{typeof d=="number"&&(d=n.toKey(d));const f=u[d];return f===void 0?m:f}default:{if(Array.isArray(d))return l(u,d,m);if(Object.is(d==null?void 0:d.valueOf(),-0)?d="-0":d=String(d),t.isUnsafeProperty(d))return m;const f=u[d];return f===void 0?m:f}}}function l(u,d,m){if(d.length===0)return m;let f=u;for(let p=0;p<d.length;p++){if(f==null||t.isUnsafeProperty(d[p]))return m;f=f[d[p]]}return f===void 0?m:f}e.get=i})(Fg)),Fg}var Vg,GS;function zL(){return GS||(GS=1,Vg=mx().get),Vg}var UL=zL();const Ql=wi(UL);var Ts=e=>e===0?0:e>0?1:-1,Di=e=>typeof e=="number"&&e!=+e,ca=e=>typeof e=="string"&&e.indexOf("%")===e.length-1,lt=e=>(typeof e=="number"||e instanceof Number)&&!Di(e),Ri=e=>lt(e)||typeof e=="string",BL=0,Nu=e=>{var t=++BL;return"".concat(e||"").concat(t)},xi=function(t,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!lt(t)&&typeof t!="string")return n;var i;if(ca(t)){if(r==null)return n;var l=t.indexOf("%");i=r*parseFloat(t.slice(0,l))/100}else i=+t;return Di(i)&&(i=n),s&&r!=null&&i>r&&(i=r),i},KE=e=>{if(!Array.isArray(e))return!1;for(var t=e.length,r={},n=0;n<t;n++)if(!r[e[n]])r[e[n]]=!0;else return!0;return!1};function Tn(e,t,r){return lt(e)&&lt(t)?e+r*(t-e):t}function WL(e,t,r){if(!(!e||!e.length))return e.find(n=>n&&(typeof t=="function"?t(n):Ql(n,t))===r)}var wn=e=>e===null||typeof e>"u",qu=e=>wn(e)?e:"".concat(e.charAt(0).toUpperCase()).concat(e.slice(1));function VL(e){return e!=null}function hc(){}var qL=["type","size","sizeType"];function Gv(){return Gv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Gv.apply(null,arguments)}function YS(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function JS(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?YS(Object(r),!0).forEach(function(n){HL(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):YS(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function HL(e,t,r){return(t=KL(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function KL(e){var t=GL(e,"string");return typeof t=="symbol"?t:t+""}function GL(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function YL(e,t){if(e==null)return{};var r,n,s=JL(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function JL(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var GE={symbolCircle:dx,symbolCross:uL,symbolDiamond:fL,symbolSquare:hL,symbolStar:yL,symbolTriangle:vL,symbolWye:wL},QL=Math.PI/180,XL=e=>{var t="symbol".concat(qu(e));return GE[t]||dx},ZL=(e,t,r)=>{if(t==="area")return e;switch(r){case"cross":return 5*e*e/9;case"diamond":return .5*e*e/Math.sqrt(3);case"square":return e*e;case"star":{var n=18*QL;return 1.25*e*e*(Math.tan(n)-Math.tan(n*2)*Math.tan(n)**2)}case"triangle":return Math.sqrt(3)*e*e/4;case"wye":return(21-10*Math.sqrt(3))*e*e/8;default:return Math.PI*e*e/4}},ez=(e,t)=>{GE["symbol".concat(qu(e))]=t},YE=e=>{var{type:t="circle",size:r=64,sizeType:n="area"}=e,s=YL(e,qL),i=JS(JS({},s),{},{type:t,size:r,sizeType:n}),l="circle";typeof t=="string"&&(l=t);var u=()=>{var y=XL(l),x=bL().type(y).size(ZL(r,n,l)),b=x();if(b!==null)return b},{className:d,cx:m,cy:f}=i,p=Xs(i);return lt(m)&&lt(f)&&lt(r)?v.createElement("path",Gv({},p,{className:fr("recharts-symbols",d),transform:"translate(".concat(m,", ").concat(f,")"),d:u()})):null};YE.registerSymbol=ez;var JE=e=>"radius"in e&&"startAngle"in e&&"endAngle"in e,tz=(e,t)=>{if(!e||typeof e=="function"||typeof e=="boolean")return null;var r=e;if(v.isValidElement(e)&&(r=e.props),typeof r!="object"&&typeof r!="function")return null;var n={};return Object.keys(r).forEach(s=>{ox(s)&&(n[s]=(i=>r[s](r,i)))}),n},rz=(e,t,r)=>n=>(e(t,r,n),null),px=(e,t,r)=>{if(e===null||typeof e!="object"&&typeof e!="function")return null;var n=null;return Object.keys(e).forEach(s=>{var i=e[s];ox(s)&&typeof i=="function"&&(n||(n={}),n[s]=rz(i,t,r))}),n};function QS(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function nz(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?QS(Object(r),!0).forEach(function(n){sz(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):QS(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function sz(e,t,r){return(t=iz(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function iz(e){var t=az(e,"string");return typeof t=="symbol"?t:t+""}function az(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function ti(e,t){var r=nz({},e),n=t,s=Object.keys(t),i=s.reduce((l,u)=>(l[u]===void 0&&n[u]!==void 0&&(l[u]=n[u]),l),r);return i}var qg={},Hg={},XS;function oz(){return XS||(XS=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r,n){const s=new Map;for(let i=0;i<r.length;i++){const l=r[i],u=n(l);s.has(u)||s.set(u,l)}return Array.from(s.values())}e.uniqBy=t})(Hg)),Hg}var Kg={},ZS;function QE(){return ZS||(ZS=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r}e.identity=t})(Kg)),Kg}var Gg={},Yg={},Jg={},e_;function lz(){return e_||(e_=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return Number.isSafeInteger(r)&&r>=0}e.isLength=t})(Jg)),Jg}var t_;function gx(){return t_||(t_=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=lz();function r(n){return n!=null&&typeof n!="function"&&t.isLength(n.length)}e.isArrayLike=r})(Yg)),Yg}var Qg={},r_;function cz(){return r_||(r_=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return typeof r=="object"&&r!==null}e.isObjectLike=t})(Qg)),Qg}var n_;function uz(){return n_||(n_=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=gx(),r=cz();function n(s){return r.isObjectLike(s)&&t.isArrayLike(s)}e.isArrayLikeObject=n})(Gg)),Gg}var Xg={},Zg={},s_;function dz(){return s_||(s_=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=mx();function r(n){return function(s){return t.get(s,n)}}e.property=r})(Zg)),Zg}var ey={},ty={},ry={},ny={},i_;function XE(){return i_||(i_=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r!==null&&(typeof r=="object"||typeof r=="function")}e.isObject=t})(ny)),ny}var sy={},a_;function ZE(){return a_||(a_=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r==null||typeof r!="object"&&typeof r!="function"}e.isPrimitive=t})(sy)),sy}var iy={},o_;function eA(){return o_||(o_=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r,n){return r===n||Number.isNaN(r)&&Number.isNaN(n)}e.eq=t})(iy)),iy}var l_;function fz(){return l_||(l_=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=XE(),r=ZE(),n=eA();function s(f,p,y){return typeof y!="function"?s(f,p,()=>{}):i(f,p,function x(b,j,S,k,C,N){const O=y(b,j,S,k,C,N);return O!==void 0?!!O:i(b,j,x,N)},new Map)}function i(f,p,y,x){if(p===f)return!0;switch(typeof p){case"object":return l(f,p,y,x);case"function":return Object.keys(p).length>0?i(f,{...p},y,x):n.eq(f,p);default:return t.isObject(f)?typeof p=="string"?p==="":!0:n.eq(f,p)}}function l(f,p,y,x){if(p==null)return!0;if(Array.isArray(p))return d(f,p,y,x);if(p instanceof Map)return u(f,p,y,x);if(p instanceof Set)return m(f,p,y,x);const b=Object.keys(p);if(f==null)return b.length===0;if(b.length===0)return!0;if(x!=null&&x.has(p))return x.get(p)===f;x==null||x.set(p,f);try{for(let j=0;j<b.length;j++){const S=b[j];if(!r.isPrimitive(f)&&!(S in f)||p[S]===void 0&&f[S]!==void 0||p[S]===null&&f[S]!==null||!y(f[S],p[S],S,f,p,x))return!1}return!0}finally{x==null||x.delete(p)}}function u(f,p,y,x){if(p.size===0)return!0;if(!(f instanceof Map))return!1;for(const[b,j]of p.entries()){const S=f.get(b);if(y(S,j,b,f,p,x)===!1)return!1}return!0}function d(f,p,y,x){if(p.length===0)return!0;if(!Array.isArray(f))return!1;const b=new Set;for(let j=0;j<p.length;j++){const S=p[j];let k=!1;for(let C=0;C<f.length;C++){if(b.has(C))continue;const N=f[C];let O=!1;if(y(N,S,j,f,p,x)&&(O=!0),O){b.add(C),k=!0;break}}if(!k)return!1}return!0}function m(f,p,y,x){return p.size===0?!0:f instanceof Set?d([...f],[...p],y,x):!1}e.isMatchWith=s,e.isSetMatch=m})(ry)),ry}var c_;function tA(){return c_||(c_=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=fz();function r(n,s){return t.isMatchWith(n,s,()=>{})}e.isMatch=r})(ty)),ty}var ay={},oy={},ly={},u_;function hz(){return u_||(u_=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return Object.getOwnPropertySymbols(r).filter(n=>Object.prototype.propertyIsEnumerable.call(r,n))}e.getSymbols=t})(ly)),ly}var cy={},d_;function rA(){return d_||(d_=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r==null?r===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(r)}e.getTag=t})(cy)),cy}var uy={},f_;function nA(){return f_||(f_=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t="[object RegExp]",r="[object String]",n="[object Number]",s="[object Boolean]",i="[object Arguments]",l="[object Symbol]",u="[object Date]",d="[object Map]",m="[object Set]",f="[object Array]",p="[object Function]",y="[object ArrayBuffer]",x="[object Object]",b="[object Error]",j="[object DataView]",S="[object Uint8Array]",k="[object Uint8ClampedArray]",C="[object Uint16Array]",N="[object Uint32Array]",O="[object BigUint64Array]",P="[object Int8Array]",T="[object Int16Array]",D="[object Int32Array]",q="[object BigInt64Array]",F="[object Float32Array]",K="[object Float64Array]";e.argumentsTag=i,e.arrayBufferTag=y,e.arrayTag=f,e.bigInt64ArrayTag=q,e.bigUint64ArrayTag=O,e.booleanTag=s,e.dataViewTag=j,e.dateTag=u,e.errorTag=b,e.float32ArrayTag=F,e.float64ArrayTag=K,e.functionTag=p,e.int16ArrayTag=T,e.int32ArrayTag=D,e.int8ArrayTag=P,e.mapTag=d,e.numberTag=n,e.objectTag=x,e.regexpTag=t,e.setTag=m,e.stringTag=r,e.symbolTag=l,e.uint16ArrayTag=C,e.uint32ArrayTag=N,e.uint8ArrayTag=S,e.uint8ClampedArrayTag=k})(uy)),uy}var dy={},h_;function mz(){return h_||(h_=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return ArrayBuffer.isView(r)&&!(r instanceof DataView)}e.isTypedArray=t})(dy)),dy}var m_;function sA(){return m_||(m_=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=hz(),r=rA(),n=nA(),s=ZE(),i=mz();function l(f,p){return u(f,void 0,f,new Map,p)}function u(f,p,y,x=new Map,b=void 0){const j=b==null?void 0:b(f,p,y,x);if(j!==void 0)return j;if(s.isPrimitive(f))return f;if(x.has(f))return x.get(f);if(Array.isArray(f)){const S=new Array(f.length);x.set(f,S);for(let k=0;k<f.length;k++)S[k]=u(f[k],k,y,x,b);return Object.hasOwn(f,"index")&&(S.index=f.index),Object.hasOwn(f,"input")&&(S.input=f.input),S}if(f instanceof Date)return new Date(f.getTime());if(f instanceof RegExp){const S=new RegExp(f.source,f.flags);return S.lastIndex=f.lastIndex,S}if(f instanceof Map){const S=new Map;x.set(f,S);for(const[k,C]of f)S.set(k,u(C,k,y,x,b));return S}if(f instanceof Set){const S=new Set;x.set(f,S);for(const k of f)S.add(u(k,void 0,y,x,b));return S}if(typeof Buffer<"u"&&Buffer.isBuffer(f))return f.subarray();if(i.isTypedArray(f)){const S=new(Object.getPrototypeOf(f)).constructor(f.length);x.set(f,S);for(let k=0;k<f.length;k++)S[k]=u(f[k],k,y,x,b);return S}if(f instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&f instanceof SharedArrayBuffer)return f.slice(0);if(f instanceof DataView){const S=new DataView(f.buffer.slice(0),f.byteOffset,f.byteLength);return x.set(f,S),d(S,f,y,x,b),S}if(typeof File<"u"&&f instanceof File){const S=new File([f],f.name,{type:f.type});return x.set(f,S),d(S,f,y,x,b),S}if(typeof Blob<"u"&&f instanceof Blob){const S=new Blob([f],{type:f.type});return x.set(f,S),d(S,f,y,x,b),S}if(f instanceof Error){const S=new f.constructor;return x.set(f,S),S.message=f.message,S.name=f.name,S.stack=f.stack,S.cause=f.cause,d(S,f,y,x,b),S}if(f instanceof Boolean){const S=new Boolean(f.valueOf());return x.set(f,S),d(S,f,y,x,b),S}if(f instanceof Number){const S=new Number(f.valueOf());return x.set(f,S),d(S,f,y,x,b),S}if(f instanceof String){const S=new String(f.valueOf());return x.set(f,S),d(S,f,y,x,b),S}if(typeof f=="object"&&m(f)){const S=Object.create(Object.getPrototypeOf(f));return x.set(f,S),d(S,f,y,x,b),S}return f}function d(f,p,y=f,x,b){const j=[...Object.keys(p),...t.getSymbols(p)];for(let S=0;S<j.length;S++){const k=j[S],C=Object.getOwnPropertyDescriptor(f,k);(C==null||C.writable)&&(f[k]=u(p[k],k,y,x,b))}}function m(f){switch(r.getTag(f)){case n.argumentsTag:case n.arrayTag:case n.arrayBufferTag:case n.dataViewTag:case n.booleanTag:case n.dateTag:case n.float32ArrayTag:case n.float64ArrayTag:case n.int8ArrayTag:case n.int16ArrayTag:case n.int32ArrayTag:case n.mapTag:case n.numberTag:case n.objectTag:case n.regexpTag:case n.setTag:case n.stringTag:case n.symbolTag:case n.uint8ArrayTag:case n.uint8ClampedArrayTag:case n.uint16ArrayTag:case n.uint32ArrayTag:return!0;default:return!1}}e.cloneDeepWith=l,e.cloneDeepWithImpl=u,e.copyProperties=d})(oy)),oy}var p_;function pz(){return p_||(p_=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=sA();function r(n){return t.cloneDeepWithImpl(n,void 0,n,new Map,void 0)}e.cloneDeep=r})(ay)),ay}var g_;function gz(){return g_||(g_=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=tA(),r=pz();function n(s){return s=r.cloneDeep(s),i=>t.isMatch(i,s)}e.matches=n})(ey)),ey}var fy={},hy={},my={},y_;function yz(){return y_||(y_=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=sA(),r=nA();function n(s,i){return t.cloneDeepWith(s,(l,u,d,m)=>{const f=i==null?void 0:i(l,u,d,m);if(f!==void 0)return f;if(typeof s=="object")switch(Object.prototype.toString.call(s)){case r.numberTag:case r.stringTag:case r.booleanTag:{const p=new s.constructor(s==null?void 0:s.valueOf());return t.copyProperties(p,s),p}case r.argumentsTag:{const p={};return t.copyProperties(p,s),p.length=s.length,p[Symbol.iterator]=s[Symbol.iterator],p}default:return}})}e.cloneDeepWith=n})(my)),my}var v_;function vz(){return v_||(v_=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=yz();function r(n){return t.cloneDeepWith(n)}e.cloneDeep=r})(hy)),hy}var py={},gy={},x_;function iA(){return x_||(x_=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=/^(?:0|[1-9]\d*)$/;function r(n,s=Number.MAX_SAFE_INTEGER){switch(typeof n){case"number":return Number.isInteger(n)&&n>=0&&n<s;case"symbol":return!1;case"string":return t.test(n)}}e.isIndex=r})(gy)),gy}var yy={},w_;function xz(){return w_||(w_=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=rA();function r(n){return n!==null&&typeof n=="object"&&t.getTag(n)==="[object Arguments]"}e.isArguments=r})(yy)),yy}var b_;function wz(){return b_||(b_=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=HE(),r=iA(),n=xz(),s=hx();function i(l,u){let d;if(Array.isArray(u)?d=u:typeof u=="string"&&t.isDeepKey(u)&&(l==null?void 0:l[u])==null?d=s.toPath(u):d=[u],d.length===0)return!1;let m=l;for(let f=0;f<d.length;f++){const p=d[f];if((m==null||!Object.hasOwn(m,p))&&!((Array.isArray(m)||n.isArguments(m))&&r.isIndex(p)&&p<m.length))return!1;m=m[p]}return!0}e.has=i})(py)),py}var j_;function bz(){return j_||(j_=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=tA(),r=fx(),n=vz(),s=mx(),i=wz();function l(u,d){switch(typeof u){case"object":{Object.is(u==null?void 0:u.valueOf(),-0)&&(u="-0");break}case"number":{u=r.toKey(u);break}}return d=n.cloneDeep(d),function(m){const f=s.get(m,u);return f===void 0?i.has(m,u):d===void 0?f===void 0:t.isMatch(f,d)}}e.matchesProperty=l})(fy)),fy}var S_;function jz(){return S_||(S_=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=QE(),r=dz(),n=gz(),s=bz();function i(l){if(l==null)return t.identity;switch(typeof l){case"function":return l;case"object":return Array.isArray(l)&&l.length===2?s.matchesProperty(l[0],l[1]):n.matches(l);case"string":case"symbol":case"number":return r.property(l)}}e.iteratee=i})(Xg)),Xg}var __;function Sz(){return __||(__=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=oz(),r=QE(),n=uz(),s=jz();function i(l,u=r.identity){return n.isArrayLikeObject(l)?t.uniqBy(Array.from(l),s.iteratee(u)):[]}e.uniqBy=i})(qg)),qg}var vy,k_;function _z(){return k_||(k_=1,vy=Sz().uniqBy),vy}var kz=_z();const N_=wi(kz);function Nz(e,t,r){return t===!0?N_(e,r):typeof t=="function"?N_(e,t):e}var xy={exports:{}},wy={},by={exports:{}},jy={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var C_;function Cz(){if(C_)return jy;C_=1;var e=ic();function t(p,y){return p===y&&(p!==0||1/p===1/y)||p!==p&&y!==y}var r=typeof Object.is=="function"?Object.is:t,n=e.useState,s=e.useEffect,i=e.useLayoutEffect,l=e.useDebugValue;function u(p,y){var x=y(),b=n({inst:{value:x,getSnapshot:y}}),j=b[0].inst,S=b[1];return i(function(){j.value=x,j.getSnapshot=y,d(j)&&S({inst:j})},[p,x,y]),s(function(){return d(j)&&S({inst:j}),p(function(){d(j)&&S({inst:j})})},[p]),l(x),x}function d(p){var y=p.getSnapshot;p=p.value;try{var x=y();return!r(p,x)}catch{return!0}}function m(p,y){return y()}var f=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?m:u;return jy.useSyncExternalStore=e.useSyncExternalStore!==void 0?e.useSyncExternalStore:f,jy}var E_;function Ez(){return E_||(E_=1,by.exports=Cz()),by.exports}/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var A_;function Az(){if(A_)return wy;A_=1;var e=ic(),t=Ez();function r(m,f){return m===f&&(m!==0||1/m===1/f)||m!==m&&f!==f}var n=typeof Object.is=="function"?Object.is:r,s=t.useSyncExternalStore,i=e.useRef,l=e.useEffect,u=e.useMemo,d=e.useDebugValue;return wy.useSyncExternalStoreWithSelector=function(m,f,p,y,x){var b=i(null);if(b.current===null){var j={hasValue:!1,value:null};b.current=j}else j=b.current;b=u(function(){function k(T){if(!C){if(C=!0,N=T,T=y(T),x!==void 0&&j.hasValue){var D=j.value;if(x(D,T))return O=D}return O=T}if(D=O,n(N,T))return D;var q=y(T);return x!==void 0&&x(D,q)?(N=T,D):(N=T,O=q)}var C=!1,N,O,P=p===void 0?null:p;return[function(){return k(f())},P===null?void 0:function(){return k(P())}]},[f,p,y,x]);var S=s(m,b[0],b[1]);return l(function(){j.hasValue=!0,j.value=S},[S]),d(S),S},wy}var P_;function Pz(){return P_||(P_=1,xy.exports=Az()),xy.exports}var Oz=Pz(),yx=v.createContext(null),Tz=e=>e,zr=()=>{var e=v.useContext(yx);return e?e.store.dispatch:Tz},Ff=()=>{},Iz=()=>Ff,Dz=(e,t)=>e===t;function st(e){var t=v.useContext(yx);return Oz.useSyncExternalStoreWithSelector(t?t.subscription.addNestedSub:Iz,t?t.store.getState:Ff,t?t.store.getState:Ff,t?e:Ff,Dz)}function Rz(e,t=`expected a function, instead received ${typeof e}`){if(typeof e!="function")throw new TypeError(t)}function $z(e,t=`expected an object, instead received ${typeof e}`){if(typeof e!="object")throw new TypeError(t)}function Mz(e,t="expected all items to be functions, instead received the following types: "){if(!e.every(r=>typeof r=="function")){const r=e.map(n=>typeof n=="function"?`function ${n.name||"unnamed"}()`:typeof n).join(", ");throw new TypeError(`${t}[${r}]`)}}var O_=e=>Array.isArray(e)?e:[e];function Fz(e){const t=Array.isArray(e[0])?e[0]:e;return Mz(t,"createSelector expects all input-selectors to be functions, but received the following types: "),t}function Lz(e,t){const r=[],{length:n}=e;for(let s=0;s<n;s++)r.push(e[s].apply(null,t));return r}var zz=class{constructor(e){this.value=e}deref(){return this.value}},Uz=typeof WeakRef<"u"?WeakRef:zz,Bz=0,T_=1;function gf(){return{s:Bz,v:void 0,o:null,p:null}}function aA(e,t={}){let r=gf();const{resultEqualityCheck:n}=t;let s,i=0;function l(){var p;let u=r;const{length:d}=arguments;for(let y=0,x=d;y<x;y++){const b=arguments[y];if(typeof b=="function"||typeof b=="object"&&b!==null){let j=u.o;j===null&&(u.o=j=new WeakMap);const S=j.get(b);S===void 0?(u=gf(),j.set(b,u)):u=S}else{let j=u.p;j===null&&(u.p=j=new Map);const S=j.get(b);S===void 0?(u=gf(),j.set(b,u)):u=S}}const m=u;let f;if(u.s===T_)f=u.v;else if(f=e.apply(null,arguments),i++,n){const y=((p=s==null?void 0:s.deref)==null?void 0:p.call(s))??s;y!=null&&n(y,f)&&(f=y,i!==0&&i--),s=typeof f=="object"&&f!==null||typeof f=="function"?new Uz(f):f}return m.s=T_,m.v=f,f}return l.clearCache=()=>{r=gf(),l.resetResultsCount()},l.resultsCount=()=>i,l.resetResultsCount=()=>{i=0},l}function Wz(e,...t){const r=typeof e=="function"?{memoize:e,memoizeOptions:t}:e,n=(...s)=>{let i=0,l=0,u,d={},m=s.pop();typeof m=="object"&&(d=m,m=s.pop()),Rz(m,`createSelector expects an output function after the inputs, but received: [${typeof m}]`);const f={...r,...d},{memoize:p,memoizeOptions:y=[],argsMemoize:x=aA,argsMemoizeOptions:b=[]}=f,j=O_(y),S=O_(b),k=Fz(s),C=p(function(){return i++,m.apply(null,arguments)},...j),N=x(function(){l++;const P=Lz(k,arguments);return u=C.apply(null,P),u},...S);return Object.assign(N,{resultFunc:m,memoizedResultFunc:C,dependencies:k,dependencyRecomputations:()=>l,resetDependencyRecomputations:()=>{l=0},lastResult:()=>u,recomputations:()=>i,resetRecomputations:()=>{i=0},memoize:p,argsMemoize:x})};return Object.assign(n,{withTypes:()=>n}),n}var pe=Wz(aA),Vz=Object.assign((e,t=pe)=>{$z(e,`createStructuredSelector expects first argument to be an object where each property is a selector, instead received a ${typeof e}`);const r=Object.keys(e),n=r.map(i=>e[i]);return t(n,(...i)=>i.reduce((l,u,d)=>(l[r[d]]=u,l),{}))},{withTypes:()=>Vz}),Sy={},_y={},ky={},I_;function qz(){return I_||(I_=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return typeof n=="symbol"?1:n===null?2:n===void 0?3:n!==n?4:0}const r=(n,s,i)=>{if(n!==s){const l=t(n),u=t(s);if(l===u&&l===0){if(n<s)return i==="desc"?1:-1;if(n>s)return i==="desc"?-1:1}return i==="desc"?u-l:l-u}return 0};e.compareValues=r})(ky)),ky}var Ny={},Cy={},D_;function oA(){return D_||(D_=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return typeof r=="symbol"||r instanceof Symbol}e.isSymbol=t})(Cy)),Cy}var R_;function Hz(){return R_||(R_=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=oA(),r=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,n=/^\w*$/;function s(i,l){return Array.isArray(i)?!1:typeof i=="number"||typeof i=="boolean"||i==null||t.isSymbol(i)?!0:typeof i=="string"&&(n.test(i)||!r.test(i))||l!=null&&Object.hasOwn(l,i)}e.isKey=s})(Ny)),Ny}var $_;function Kz(){return $_||($_=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=qz(),r=Hz(),n=hx();function s(i,l,u,d){if(i==null)return[];u=d?void 0:u,Array.isArray(i)||(i=Object.values(i)),Array.isArray(l)||(l=l==null?[null]:[l]),l.length===0&&(l=[null]),Array.isArray(u)||(u=u==null?[]:[u]),u=u.map(x=>String(x));const m=(x,b)=>{let j=x;for(let S=0;S<b.length&&j!=null;++S)j=j[b[S]];return j},f=(x,b)=>b==null||x==null?b:typeof x=="object"&&"key"in x?Object.hasOwn(b,x.key)?b[x.key]:m(b,x.path):typeof x=="function"?x(b):Array.isArray(x)?m(b,x):typeof b=="object"?b[x]:b,p=l.map(x=>(Array.isArray(x)&&x.length===1&&(x=x[0]),x==null||typeof x=="function"||Array.isArray(x)||r.isKey(x)?x:{key:x,path:n.toPath(x)}));return i.map(x=>({original:x,criteria:p.map(b=>f(b,x))})).slice().sort((x,b)=>{for(let j=0;j<p.length;j++){const S=t.compareValues(x.criteria[j],b.criteria[j],u[j]);if(S!==0)return S}return 0}).map(x=>x.original)}e.orderBy=s})(_y)),_y}var Ey={},M_;function Gz(){return M_||(M_=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r,n=1){const s=[],i=Math.floor(n),l=(u,d)=>{for(let m=0;m<u.length;m++){const f=u[m];Array.isArray(f)&&d<i?l(f,d+1):s.push(f)}};return l(r,0),s}e.flatten=t})(Ey)),Ey}var Ay={},F_;function lA(){return F_||(F_=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=iA(),r=gx(),n=XE(),s=eA();function i(l,u,d){return n.isObject(d)&&(typeof u=="number"&&r.isArrayLike(d)&&t.isIndex(u)&&u<d.length||typeof u=="string"&&u in d)?s.eq(d[u],l):!1}e.isIterateeCall=i})(Ay)),Ay}var L_;function Yz(){return L_||(L_=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Kz(),r=Gz(),n=lA();function s(i,...l){const u=l.length;return u>1&&n.isIterateeCall(i,l[0],l[1])?l=[]:u>2&&n.isIterateeCall(l[0],l[1],l[2])&&(l=[l[0]]),t.orderBy(i,r.flatten(l),["asc"])}e.sortBy=s})(Sy)),Sy}var Py,z_;function Jz(){return z_||(z_=1,Py=Yz().sortBy),Py}var Qz=Jz();const sm=wi(Qz);var cA=e=>e.legend.settings,Xz=e=>e.legend.size,Zz=e=>e.legend.payload;pe([Zz,cA],(e,t)=>{var{itemSorter:r}=t,n=e.flat(1);return r?sm(n,r):n});var yf=1;function eU(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],[t,r]=v.useState({height:0,left:0,top:0,width:0}),n=v.useCallback(s=>{if(s!=null){var i=s.getBoundingClientRect(),l={height:i.height,left:i.left,top:i.top,width:i.width};(Math.abs(l.height-t.height)>yf||Math.abs(l.left-t.left)>yf||Math.abs(l.top-t.top)>yf||Math.abs(l.width-t.width)>yf)&&r({height:l.height,left:l.left,top:l.top,width:l.width})}},[t.width,t.height,t.top,t.left,...e]);return[t,n]}function Pn(e){return`Minified Redux error #${e}; visit https://redux.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var tU=typeof Symbol=="function"&&Symbol.observable||"@@observable",U_=tU,Oy=()=>Math.random().toString(36).substring(7).split("").join("."),rU={INIT:`@@redux/INIT${Oy()}`,REPLACE:`@@redux/REPLACE${Oy()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${Oy()}`},oh=rU;function vx(e){if(typeof e!="object"||e===null)return!1;let t=e;for(;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t||Object.getPrototypeOf(e)===null}function uA(e,t,r){if(typeof e!="function")throw new Error(Pn(2));if(typeof t=="function"&&typeof r=="function"||typeof r=="function"&&typeof arguments[3]=="function")throw new Error(Pn(0));if(typeof t=="function"&&typeof r>"u"&&(r=t,t=void 0),typeof r<"u"){if(typeof r!="function")throw new Error(Pn(1));return r(uA)(e,t)}let n=e,s=t,i=new Map,l=i,u=0,d=!1;function m(){l===i&&(l=new Map,i.forEach((S,k)=>{l.set(k,S)}))}function f(){if(d)throw new Error(Pn(3));return s}function p(S){if(typeof S!="function")throw new Error(Pn(4));if(d)throw new Error(Pn(5));let k=!0;m();const C=u++;return l.set(C,S),function(){if(k){if(d)throw new Error(Pn(6));k=!1,m(),l.delete(C),i=null}}}function y(S){if(!vx(S))throw new Error(Pn(7));if(typeof S.type>"u")throw new Error(Pn(8));if(typeof S.type!="string")throw new Error(Pn(17));if(d)throw new Error(Pn(9));try{d=!0,s=n(s,S)}finally{d=!1}return(i=l).forEach(C=>{C()}),S}function x(S){if(typeof S!="function")throw new Error(Pn(10));n=S,y({type:oh.REPLACE})}function b(){const S=p;return{subscribe(k){if(typeof k!="object"||k===null)throw new Error(Pn(11));function C(){const O=k;O.next&&O.next(f())}return C(),{unsubscribe:S(C)}},[U_](){return this}}}return y({type:oh.INIT}),{dispatch:y,subscribe:p,getState:f,replaceReducer:x,[U_]:b}}function nU(e){Object.keys(e).forEach(t=>{const r=e[t];if(typeof r(void 0,{type:oh.INIT})>"u")throw new Error(Pn(12));if(typeof r(void 0,{type:oh.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(Pn(13))})}function dA(e){const t=Object.keys(e),r={};for(let i=0;i<t.length;i++){const l=t[i];typeof e[l]=="function"&&(r[l]=e[l])}const n=Object.keys(r);let s;try{nU(r)}catch(i){s=i}return function(l={},u){if(s)throw s;let d=!1;const m={};for(let f=0;f<n.length;f++){const p=n[f],y=r[p],x=l[p],b=y(x,u);if(typeof b>"u")throw u&&u.type,new Error(Pn(14));m[p]=b,d=d||b!==x}return d=d||n.length!==Object.keys(l).length,d?m:l}}function lh(...e){return e.length===0?t=>t:e.length===1?e[0]:e.reduce((t,r)=>(...n)=>t(r(...n)))}function sU(...e){return t=>(r,n)=>{const s=t(r,n);let i=()=>{throw new Error(Pn(15))};const l={getState:s.getState,dispatch:(d,...m)=>i(d,...m)},u=e.map(d=>d(l));return i=lh(...u)(s.dispatch),{...s,dispatch:i}}}function fA(e){return vx(e)&&"type"in e&&typeof e.type=="string"}var hA=Symbol.for("immer-nothing"),B_=Symbol.for("immer-draftable"),Rs=Symbol.for("immer-state");function mi(e,...t){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var Cu=Object.getPrototypeOf;function Mo(e){return!!e&&!!e[Rs]}function ua(e){var t;return e?mA(e)||Array.isArray(e)||!!e[B_]||!!((t=e.constructor)!=null&&t[B_])||Hu(e)||am(e):!1}var iU=Object.prototype.constructor.toString(),W_=new WeakMap;function mA(e){if(!e||typeof e!="object")return!1;const t=Object.getPrototypeOf(e);if(t===null||t===Object.prototype)return!0;const r=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;if(r===Object)return!0;if(typeof r!="function")return!1;let n=W_.get(r);return n===void 0&&(n=Function.toString.call(r),W_.set(r,n)),n===iU}function ch(e,t,r=!0){im(e)===0?(r?Reflect.ownKeys(e):Object.keys(e)).forEach(s=>{t(s,e[s],e)}):e.forEach((n,s)=>t(s,n,e))}function im(e){const t=e[Rs];return t?t.type_:Array.isArray(e)?1:Hu(e)?2:am(e)?3:0}function Yv(e,t){return im(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function pA(e,t,r){const n=im(e);n===2?e.set(t,r):n===3?e.add(r):e[t]=r}function aU(e,t){return e===t?e!==0||1/e===1/t:e!==e&&t!==t}function Hu(e){return e instanceof Map}function am(e){return e instanceof Set}function bo(e){return e.copy_||e.base_}function Jv(e,t){if(Hu(e))return new Map(e);if(am(e))return new Set(e);if(Array.isArray(e))return Array.prototype.slice.call(e);const r=mA(e);if(t===!0||t==="class_only"&&!r){const n=Object.getOwnPropertyDescriptors(e);delete n[Rs];let s=Reflect.ownKeys(n);for(let i=0;i<s.length;i++){const l=s[i],u=n[l];u.writable===!1&&(u.writable=!0,u.configurable=!0),(u.get||u.set)&&(n[l]={configurable:!0,writable:!0,enumerable:u.enumerable,value:e[l]})}return Object.create(Cu(e),n)}else{const n=Cu(e);if(n!==null&&r)return{...e};const s=Object.create(n);return Object.assign(s,e)}}function xx(e,t=!1){return om(e)||Mo(e)||!ua(e)||(im(e)>1&&Object.defineProperties(e,{set:vf,add:vf,clear:vf,delete:vf}),Object.freeze(e),t&&Object.values(e).forEach(r=>xx(r,!0))),e}function oU(){mi(2)}var vf={value:oU};function om(e){return e===null||typeof e!="object"?!0:Object.isFrozen(e)}var lU={};function Fo(e){const t=lU[e];return t||mi(0,e),t}var Eu;function gA(){return Eu}function cU(e,t){return{drafts_:[],parent_:e,immer_:t,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function V_(e,t){t&&(Fo("Patches"),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function Qv(e){Xv(e),e.drafts_.forEach(uU),e.drafts_=null}function Xv(e){e===Eu&&(Eu=e.parent_)}function q_(e){return Eu=cU(Eu,e)}function uU(e){const t=e[Rs];t.type_===0||t.type_===1?t.revoke_():t.revoked_=!0}function H_(e,t){t.unfinalizedDrafts_=t.drafts_.length;const r=t.drafts_[0];return e!==void 0&&e!==r?(r[Rs].modified_&&(Qv(t),mi(4)),ua(e)&&(e=uh(t,e),t.parent_||dh(t,e)),t.patches_&&Fo("Patches").generateReplacementPatches_(r[Rs].base_,e,t.patches_,t.inversePatches_)):e=uh(t,r,[]),Qv(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==hA?e:void 0}function uh(e,t,r){if(om(t))return t;const n=e.immer_.shouldUseStrictIteration(),s=t[Rs];if(!s)return ch(t,(i,l)=>K_(e,s,t,i,l,r),n),t;if(s.scope_!==e)return t;if(!s.modified_)return dh(e,s.base_,!0),s.base_;if(!s.finalized_){s.finalized_=!0,s.scope_.unfinalizedDrafts_--;const i=s.copy_;let l=i,u=!1;s.type_===3&&(l=new Set(i),i.clear(),u=!0),ch(l,(d,m)=>K_(e,s,i,d,m,r,u),n),dh(e,i,!1),r&&e.patches_&&Fo("Patches").generatePatches_(s,r,e.patches_,e.inversePatches_)}return s.copy_}function K_(e,t,r,n,s,i,l){if(s==null||typeof s!="object"&&!l)return;const u=om(s);if(!(u&&!l)){if(Mo(s)){const d=i&&t&&t.type_!==3&&!Yv(t.assigned_,n)?i.concat(n):void 0,m=uh(e,s,d);if(pA(r,n,m),Mo(m))e.canAutoFreeze_=!1;else return}else l&&r.add(s);if(ua(s)&&!u){if(!e.immer_.autoFreeze_&&e.unfinalizedDrafts_<1||t&&t.base_&&t.base_[n]===s&&u)return;uh(e,s),(!t||!t.scope_.parent_)&&typeof n!="symbol"&&(Hu(r)?r.has(n):Object.prototype.propertyIsEnumerable.call(r,n))&&dh(e,s)}}}function dh(e,t,r=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&xx(t,r)}function dU(e,t){const r=Array.isArray(e),n={type_:r?1:0,scope_:t?t.scope_:gA(),modified_:!1,finalized_:!1,assigned_:{},parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1};let s=n,i=wx;r&&(s=[n],i=Au);const{revoke:l,proxy:u}=Proxy.revocable(s,i);return n.draft_=u,n.revoke_=l,u}var wx={get(e,t){if(t===Rs)return e;const r=bo(e);if(!Yv(r,t))return fU(e,r,t);const n=r[t];return e.finalized_||!ua(n)?n:n===Ty(e.base_,t)?(Iy(e),e.copy_[t]=e0(n,e)):n},has(e,t){return t in bo(e)},ownKeys(e){return Reflect.ownKeys(bo(e))},set(e,t,r){const n=yA(bo(e),t);if(n!=null&&n.set)return n.set.call(e.draft_,r),!0;if(!e.modified_){const s=Ty(bo(e),t),i=s==null?void 0:s[Rs];if(i&&i.base_===r)return e.copy_[t]=r,e.assigned_[t]=!1,!0;if(aU(r,s)&&(r!==void 0||Yv(e.base_,t)))return!0;Iy(e),Zv(e)}return e.copy_[t]===r&&(r!==void 0||t in e.copy_)||Number.isNaN(r)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=r,e.assigned_[t]=!0),!0},deleteProperty(e,t){return Ty(e.base_,t)!==void 0||t in e.base_?(e.assigned_[t]=!1,Iy(e),Zv(e)):delete e.assigned_[t],e.copy_&&delete e.copy_[t],!0},getOwnPropertyDescriptor(e,t){const r=bo(e),n=Reflect.getOwnPropertyDescriptor(r,t);return n&&{writable:!0,configurable:e.type_!==1||t!=="length",enumerable:n.enumerable,value:r[t]}},defineProperty(){mi(11)},getPrototypeOf(e){return Cu(e.base_)},setPrototypeOf(){mi(12)}},Au={};ch(wx,(e,t)=>{Au[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}});Au.deleteProperty=function(e,t){return Au.set.call(this,e,t,void 0)};Au.set=function(e,t,r){return wx.set.call(this,e[0],t,r,e[0])};function Ty(e,t){const r=e[Rs];return(r?bo(r):e)[t]}function fU(e,t,r){var s;const n=yA(t,r);return n?"value"in n?n.value:(s=n.get)==null?void 0:s.call(e.draft_):void 0}function yA(e,t){if(!(t in e))return;let r=Cu(e);for(;r;){const n=Object.getOwnPropertyDescriptor(r,t);if(n)return n;r=Cu(r)}}function Zv(e){e.modified_||(e.modified_=!0,e.parent_&&Zv(e.parent_))}function Iy(e){e.copy_||(e.copy_=Jv(e.base_,e.scope_.immer_.useStrictShallowCopy_))}var hU=class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.useStrictIteration_=!0,this.produce=(t,r,n)=>{if(typeof t=="function"&&typeof r!="function"){const i=r;r=t;const l=this;return function(d=i,...m){return l.produce(d,f=>r.call(this,f,...m))}}typeof r!="function"&&mi(6),n!==void 0&&typeof n!="function"&&mi(7);let s;if(ua(t)){const i=q_(this),l=e0(t,void 0);let u=!0;try{s=r(l),u=!1}finally{u?Qv(i):Xv(i)}return V_(i,n),H_(s,i)}else if(!t||typeof t!="object"){if(s=r(t),s===void 0&&(s=t),s===hA&&(s=void 0),this.autoFreeze_&&xx(s,!0),n){const i=[],l=[];Fo("Patches").generateReplacementPatches_(t,s,i,l),n(i,l)}return s}else mi(1,t)},this.produceWithPatches=(t,r)=>{if(typeof t=="function")return(l,...u)=>this.produceWithPatches(l,d=>t(d,...u));let n,s;return[this.produce(t,r,(l,u)=>{n=l,s=u}),n,s]},typeof(e==null?void 0:e.autoFreeze)=="boolean"&&this.setAutoFreeze(e.autoFreeze),typeof(e==null?void 0:e.useStrictShallowCopy)=="boolean"&&this.setUseStrictShallowCopy(e.useStrictShallowCopy),typeof(e==null?void 0:e.useStrictIteration)=="boolean"&&this.setUseStrictIteration(e.useStrictIteration)}createDraft(e){ua(e)||mi(8),Mo(e)&&(e=na(e));const t=q_(this),r=e0(e,void 0);return r[Rs].isManual_=!0,Xv(t),r}finishDraft(e,t){const r=e&&e[Rs];(!r||!r.isManual_)&&mi(9);const{scope_:n}=r;return V_(n,t),H_(void 0,n)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}setUseStrictIteration(e){this.useStrictIteration_=e}shouldUseStrictIteration(){return this.useStrictIteration_}applyPatches(e,t){let r;for(r=t.length-1;r>=0;r--){const s=t[r];if(s.path.length===0&&s.op==="replace"){e=s.value;break}}r>-1&&(t=t.slice(r+1));const n=Fo("Patches").applyPatches_;return Mo(e)?n(e,t):this.produce(e,s=>n(s,t))}};function e0(e,t){const r=Hu(e)?Fo("MapSet").proxyMap_(e,t):am(e)?Fo("MapSet").proxySet_(e,t):dU(e,t);return(t?t.scope_:gA()).drafts_.push(r),r}function na(e){return Mo(e)||mi(10,e),vA(e)}function vA(e){if(!ua(e)||om(e))return e;const t=e[Rs];let r,n=!0;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,r=Jv(e,t.scope_.immer_.useStrictShallowCopy_),n=t.scope_.immer_.shouldUseStrictIteration()}else r=Jv(e,!0);return ch(r,(s,i)=>{pA(r,s,vA(i))},n),t&&(t.finalized_=!1),r}var t0=new hU,xA=t0.produce,mU=t0.setUseStrictIteration.bind(t0);function wA(e){return({dispatch:r,getState:n})=>s=>i=>typeof i=="function"?i(r,n,e):s(i)}var pU=wA(),gU=wA,yU=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?lh:lh.apply(null,arguments)};function Zs(e,t){function r(...n){if(t){let s=t(...n);if(!s)throw new Error(Ds(0));return{type:e,payload:s.payload,..."meta"in s&&{meta:s.meta},..."error"in s&&{error:s.error}}}return{type:e,payload:n[0]}}return r.toString=()=>`${e}`,r.type=e,r.match=n=>fA(n)&&n.type===e,r}var bA=class fu extends Array{constructor(...t){super(...t),Object.setPrototypeOf(this,fu.prototype)}static get[Symbol.species](){return fu}concat(...t){return super.concat.apply(this,t)}prepend(...t){return t.length===1&&Array.isArray(t[0])?new fu(...t[0].concat(this)):new fu(...t.concat(this))}};function G_(e){return ua(e)?xA(e,()=>{}):e}function xf(e,t,r){return e.has(t)?e.get(t):e.set(t,r(t)).get(t)}function vU(e){return typeof e=="boolean"}var xU=()=>function(t){const{thunk:r=!0,immutableCheck:n=!0,serializableCheck:s=!0,actionCreatorCheck:i=!0}=t??{};let l=new bA;return r&&(vU(r)?l.push(pU):l.push(gU(r.extraArgument))),l},jA="RTK_autoBatch",nn=()=>e=>({payload:e,meta:{[jA]:!0}}),Y_=e=>t=>{setTimeout(t,e)},SA=(e={type:"raf"})=>t=>(...r)=>{const n=t(...r);let s=!0,i=!1,l=!1;const u=new Set,d=e.type==="tick"?queueMicrotask:e.type==="raf"?typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:Y_(10):e.type==="callback"?e.queueNotification:Y_(e.timeout),m=()=>{l=!1,i&&(i=!1,u.forEach(f=>f()))};return Object.assign({},n,{subscribe(f){const p=()=>s&&f(),y=n.subscribe(p);return u.add(f),()=>{y(),u.delete(f)}},dispatch(f){var p;try{return s=!((p=f==null?void 0:f.meta)!=null&&p[jA]),i=!s,i&&(l||(l=!0,d(m))),n.dispatch(f)}finally{s=!0}}})},wU=e=>function(r){const{autoBatch:n=!0}=r??{};let s=new bA(e);return n&&s.push(SA(typeof n=="object"?n:void 0)),s};function bU(e){const t=xU(),{reducer:r=void 0,middleware:n,devTools:s=!0,preloadedState:i=void 0,enhancers:l=void 0}=e||{};let u;if(typeof r=="function")u=r;else if(vx(r))u=dA(r);else throw new Error(Ds(1));let d;typeof n=="function"?d=n(t):d=t();let m=lh;s&&(m=yU({trace:!1,...typeof s=="object"&&s}));const f=sU(...d),p=wU(f);let y=typeof l=="function"?l(p):p();const x=m(...y);return uA(u,i,x)}function _A(e){const t={},r=[];let n;const s={addCase(i,l){const u=typeof i=="string"?i:i.type;if(!u)throw new Error(Ds(28));if(u in t)throw new Error(Ds(29));return t[u]=l,s},addAsyncThunk(i,l){return l.pending&&(t[i.pending.type]=l.pending),l.rejected&&(t[i.rejected.type]=l.rejected),l.fulfilled&&(t[i.fulfilled.type]=l.fulfilled),l.settled&&r.push({matcher:i.settled,reducer:l.settled}),s},addMatcher(i,l){return r.push({matcher:i,reducer:l}),s},addDefaultCase(i){return n=i,s}};return e(s),[t,r,n]}mU(!1);function jU(e){return typeof e=="function"}function SU(e,t){let[r,n,s]=_A(t),i;if(jU(e))i=()=>G_(e());else{const u=G_(e);i=()=>u}function l(u=i(),d){let m=[r[d.type],...n.filter(({matcher:f})=>f(d)).map(({reducer:f})=>f)];return m.filter(f=>!!f).length===0&&(m=[s]),m.reduce((f,p)=>{if(p)if(Mo(f)){const x=p(f,d);return x===void 0?f:x}else{if(ua(f))return xA(f,y=>p(y,d));{const y=p(f,d);if(y===void 0){if(f===null)return f;throw Error("A case reducer on a non-draftable value must not return undefined")}return y}}return f},u)}return l.getInitialState=i,l}var _U="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",kU=(e=21)=>{let t="",r=e;for(;r--;)t+=_U[Math.random()*64|0];return t},NU=Symbol.for("rtk-slice-createasyncthunk");function CU(e,t){return`${e}/${t}`}function EU({creators:e}={}){var r;const t=(r=e==null?void 0:e.asyncThunk)==null?void 0:r[NU];return function(s){const{name:i,reducerPath:l=i}=s;if(!i)throw new Error(Ds(11));const u=(typeof s.reducers=="function"?s.reducers(PU()):s.reducers)||{},d=Object.keys(u),m={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},f={addCase(O,P){const T=typeof O=="string"?O:O.type;if(!T)throw new Error(Ds(12));if(T in m.sliceCaseReducersByType)throw new Error(Ds(13));return m.sliceCaseReducersByType[T]=P,f},addMatcher(O,P){return m.sliceMatchers.push({matcher:O,reducer:P}),f},exposeAction(O,P){return m.actionCreators[O]=P,f},exposeCaseReducer(O,P){return m.sliceCaseReducersByName[O]=P,f}};d.forEach(O=>{const P=u[O],T={reducerName:O,type:CU(i,O),createNotation:typeof s.reducers=="function"};TU(P)?DU(T,P,f,t):OU(T,P,f)});function p(){const[O={},P=[],T=void 0]=typeof s.extraReducers=="function"?_A(s.extraReducers):[s.extraReducers],D={...O,...m.sliceCaseReducersByType};return SU(s.initialState,q=>{for(let F in D)q.addCase(F,D[F]);for(let F of m.sliceMatchers)q.addMatcher(F.matcher,F.reducer);for(let F of P)q.addMatcher(F.matcher,F.reducer);T&&q.addDefaultCase(T)})}const y=O=>O,x=new Map,b=new WeakMap;let j;function S(O,P){return j||(j=p()),j(O,P)}function k(){return j||(j=p()),j.getInitialState()}function C(O,P=!1){function T(q){let F=q[O];return typeof F>"u"&&P&&(F=xf(b,T,k)),F}function D(q=y){const F=xf(x,P,()=>new WeakMap);return xf(F,q,()=>{const K={};for(const[B,Q]of Object.entries(s.selectors??{}))K[B]=AU(Q,q,()=>xf(b,q,k),P);return K})}return{reducerPath:O,getSelectors:D,get selectors(){return D(T)},selectSlice:T}}const N={name:i,reducer:S,actions:m.actionCreators,caseReducers:m.sliceCaseReducersByName,getInitialState:k,...C(l),injectInto(O,{reducerPath:P,...T}={}){const D=P??l;return O.inject({reducerPath:D,reducer:S},T),{...N,...C(D,!0)}}};return N}}function AU(e,t,r,n){function s(i,...l){let u=t(i);return typeof u>"u"&&n&&(u=r()),e(u,...l)}return s.unwrapped=e,s}var ps=EU();function PU(){function e(t,r){return{_reducerDefinitionType:"asyncThunk",payloadCreator:t,...r}}return e.withTypes=()=>e,{reducer(t){return Object.assign({[t.name](...r){return t(...r)}}[t.name],{_reducerDefinitionType:"reducer"})},preparedReducer(t,r){return{_reducerDefinitionType:"reducerWithPrepare",prepare:t,reducer:r}},asyncThunk:e}}function OU({type:e,reducerName:t,createNotation:r},n,s){let i,l;if("reducer"in n){if(r&&!IU(n))throw new Error(Ds(17));i=n.reducer,l=n.prepare}else i=n;s.addCase(e,i).exposeCaseReducer(t,i).exposeAction(t,l?Zs(e,l):Zs(e))}function TU(e){return e._reducerDefinitionType==="asyncThunk"}function IU(e){return e._reducerDefinitionType==="reducerWithPrepare"}function DU({type:e,reducerName:t},r,n,s){if(!s)throw new Error(Ds(18));const{payloadCreator:i,fulfilled:l,pending:u,rejected:d,settled:m,options:f}=r,p=s(e,i,f);n.exposeAction(t,p),l&&n.addCase(p.fulfilled,l),u&&n.addCase(p.pending,u),d&&n.addCase(p.rejected,d),m&&n.addMatcher(p.settled,m),n.exposeCaseReducer(t,{fulfilled:l||wf,pending:u||wf,rejected:d||wf,settled:m||wf})}function wf(){}var RU="task",kA="listener",NA="completed",bx="cancelled",$U=`task-${bx}`,MU=`task-${NA}`,r0=`${kA}-${bx}`,FU=`${kA}-${NA}`,lm=class{constructor(e){ug(this,"name","TaskAbortError");ug(this,"message");this.code=e,this.message=`${RU} ${bx} (reason: ${e})`}},jx=(e,t)=>{if(typeof e!="function")throw new TypeError(Ds(32))},fh=()=>{},CA=(e,t=fh)=>(e.catch(t),e),EA=(e,t)=>(e.addEventListener("abort",t,{once:!0}),()=>e.removeEventListener("abort",t)),To=(e,t)=>{const r=e.signal;r.aborted||("reason"in r||Object.defineProperty(r,"reason",{enumerable:!0,value:t,configurable:!0,writable:!0}),e.abort(t))},Io=e=>{if(e.aborted){const{reason:t}=e;throw new lm(t)}};function AA(e,t){let r=fh;return new Promise((n,s)=>{const i=()=>s(new lm(e.reason));if(e.aborted){i();return}r=EA(e,i),t.finally(()=>r()).then(n,s)}).finally(()=>{r=fh})}var LU=async(e,t)=>{try{return await Promise.resolve(),{status:"ok",value:await e()}}catch(r){return{status:r instanceof lm?"cancelled":"rejected",error:r}}finally{t==null||t()}},hh=e=>t=>CA(AA(e,t).then(r=>(Io(e),r))),PA=e=>{const t=hh(e);return r=>t(new Promise(n=>setTimeout(n,r)))},{assign:Hl}=Object,J_={},cm="listenerMiddleware",zU=(e,t)=>{const r=n=>EA(e,()=>To(n,e.reason));return(n,s)=>{jx(n);const i=new AbortController;r(i);const l=LU(async()=>{Io(e),Io(i.signal);const u=await n({pause:hh(i.signal),delay:PA(i.signal),signal:i.signal});return Io(i.signal),u},()=>To(i,MU));return s!=null&&s.autoJoin&&t.push(l.catch(fh)),{result:hh(e)(l),cancel(){To(i,$U)}}}},UU=(e,t)=>{const r=async(n,s)=>{Io(t);let i=()=>{};const u=[new Promise((d,m)=>{let f=e({predicate:n,effect:(p,y)=>{y.unsubscribe(),d([p,y.getState(),y.getOriginalState()])}});i=()=>{f(),m()}})];s!=null&&u.push(new Promise(d=>setTimeout(d,s,null)));try{const d=await AA(t,Promise.race(u));return Io(t),d}finally{i()}};return(n,s)=>CA(r(n,s))},OA=e=>{let{type:t,actionCreator:r,matcher:n,predicate:s,effect:i}=e;if(t)s=Zs(t).match;else if(r)t=r.type,s=r.match;else if(n)s=n;else if(!s)throw new Error(Ds(21));return jx(i),{predicate:s,type:t,effect:i}},TA=Hl(e=>{const{type:t,predicate:r,effect:n}=OA(e);return{id:kU(),effect:n,type:t,predicate:r,pending:new Set,unsubscribe:()=>{throw new Error(Ds(22))}}},{withTypes:()=>TA}),Q_=(e,t)=>{const{type:r,effect:n,predicate:s}=OA(t);return Array.from(e.values()).find(i=>(typeof r=="string"?i.type===r:i.predicate===s)&&i.effect===n)},n0=e=>{e.pending.forEach(t=>{To(t,r0)})},BU=(e,t)=>()=>{for(const r of t.keys())n0(r);e.clear()},X_=(e,t,r)=>{try{e(t,r)}catch(n){setTimeout(()=>{throw n},0)}},IA=Hl(Zs(`${cm}/add`),{withTypes:()=>IA}),WU=Zs(`${cm}/removeAll`),DA=Hl(Zs(`${cm}/remove`),{withTypes:()=>DA}),VU=(...e)=>{console.error(`${cm}/error`,...e)},Ku=(e={})=>{const t=new Map,r=new Map,n=x=>{const b=r.get(x)??0;r.set(x,b+1)},s=x=>{const b=r.get(x)??1;b===1?r.delete(x):r.set(x,b-1)},{extra:i,onError:l=VU}=e;jx(l);const u=x=>(x.unsubscribe=()=>t.delete(x.id),t.set(x.id,x),b=>{x.unsubscribe(),b!=null&&b.cancelActive&&n0(x)}),d=x=>{const b=Q_(t,x)??TA(x);return u(b)};Hl(d,{withTypes:()=>d});const m=x=>{const b=Q_(t,x);return b&&(b.unsubscribe(),x.cancelActive&&n0(b)),!!b};Hl(m,{withTypes:()=>m});const f=async(x,b,j,S)=>{const k=new AbortController,C=UU(d,k.signal),N=[];try{x.pending.add(k),n(x),await Promise.resolve(x.effect(b,Hl({},j,{getOriginalState:S,condition:(O,P)=>C(O,P).then(Boolean),take:C,delay:PA(k.signal),pause:hh(k.signal),extra:i,signal:k.signal,fork:zU(k.signal,N),unsubscribe:x.unsubscribe,subscribe:()=>{t.set(x.id,x)},cancelActiveListeners:()=>{x.pending.forEach((O,P,T)=>{O!==k&&(To(O,r0),T.delete(O))})},cancel:()=>{To(k,r0),x.pending.delete(k)},throwIfCancelled:()=>{Io(k.signal)}})))}catch(O){O instanceof lm||X_(l,O,{raisedBy:"effect"})}finally{await Promise.all(N),To(k,FU),s(x),x.pending.delete(k)}},p=BU(t,r);return{middleware:x=>b=>j=>{if(!fA(j))return b(j);if(IA.match(j))return d(j.payload);if(WU.match(j)){p();return}if(DA.match(j))return m(j.payload);let S=x.getState();const k=()=>{if(S===J_)throw new Error(Ds(23));return S};let C;try{if(C=b(j),t.size>0){const N=x.getState(),O=Array.from(t.values());for(const P of O){let T=!1;try{T=P.predicate(j,N,S)}catch(D){T=!1,X_(l,D,{raisedBy:"predicate"})}T&&f(P,j,x,k)}}}finally{S=J_}return C},startListening:d,stopListening:m,clearListeners:p}};function Ds(e){return`Minified Redux Toolkit error #${e}; visit https://redux-toolkit.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var qU={layoutType:"horizontal",width:0,height:0,margin:{top:5,right:5,bottom:5,left:5},scale:1},RA=ps({name:"chartLayout",initialState:qU,reducers:{setLayout(e,t){e.layoutType=t.payload},setChartSize(e,t){e.width=t.payload.width,e.height=t.payload.height},setMargin(e,t){var r,n,s,i;e.margin.top=(r=t.payload.top)!==null&&r!==void 0?r:0,e.margin.right=(n=t.payload.right)!==null&&n!==void 0?n:0,e.margin.bottom=(s=t.payload.bottom)!==null&&s!==void 0?s:0,e.margin.left=(i=t.payload.left)!==null&&i!==void 0?i:0},setScale(e,t){e.scale=t.payload}}}),{setMargin:HU,setLayout:KU,setChartSize:GU,setScale:YU}=RA.actions,JU=RA.reducer;function $A(e,t,r){return Array.isArray(e)&&e&&t+r!==0?e.slice(t,r+1):e}function Z_(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Ul(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Z_(Object(r),!0).forEach(function(n){QU(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Z_(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function QU(e,t,r){return(t=XU(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function XU(e){var t=ZU(e,"string");return typeof t=="symbol"?t:t+""}function ZU(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function es(e,t,r){return wn(e)||wn(t)?r:Ri(t)?Ql(e,t,r):typeof t=="function"?t(e):r}var eB=(e,t,r)=>{if(t&&r){var{width:n,height:s}=r,{align:i,verticalAlign:l,layout:u}=t;if((u==="vertical"||u==="horizontal"&&l==="middle")&&i!=="center"&&lt(e[i]))return Ul(Ul({},e),{},{[i]:e[i]+(n||0)});if((u==="horizontal"||u==="vertical"&&i==="center")&&l!=="middle"&&lt(e[l]))return Ul(Ul({},e),{},{[l]:e[l]+(s||0)})}return e},Ho=(e,t)=>e==="horizontal"&&t==="xAxis"||e==="vertical"&&t==="yAxis"||e==="centric"&&t==="angleAxis"||e==="radial"&&t==="radiusAxis",ek=1e-4,tB=e=>{var t=e.domain();if(!(!t||t.length<=2)){var r=t.length,n=e.range(),s=Math.min(n[0],n[1])-ek,i=Math.max(n[0],n[1])+ek,l=e(t[0]),u=e(t[r-1]);(l<s||l>i||u<s||u>i)&&e.domain([t[0],t[r-1]])}},rB=(e,t)=>{if(!t||t.length!==2||!lt(t[0])||!lt(t[1]))return e;var r=Math.min(t[0],t[1]),n=Math.max(t[0],t[1]),s=[e[0],e[1]];return(!lt(e[0])||e[0]<r)&&(s[0]=r),(!lt(e[1])||e[1]>n)&&(s[1]=n),s[0]>n&&(s[0]=n),s[1]<r&&(s[1]=r),s},nB=e=>{var t=e.length;if(!(t<=0))for(var r=0,n=e[0].length;r<n;++r)for(var s=0,i=0,l=0;l<t;++l){var u=Di(e[l][r][1])?e[l][r][0]:e[l][r][1];u>=0?(e[l][r][0]=s,e[l][r][1]=s+u,s=e[l][r][1]):(e[l][r][0]=i,e[l][r][1]=i+u,i=e[l][r][1])}},sB=e=>{var t=e.length;if(!(t<=0))for(var r=0,n=e[0].length;r<n;++r)for(var s=0,i=0;i<t;++i){var l=Di(e[i][r][1])?e[i][r][0]:e[i][r][1];l>=0?(e[i][r][0]=s,e[i][r][1]=s+l,s=e[i][r][1]):(e[i][r][0]=0,e[i][r][1]=0)}},iB={sign:nB,expand:RL,none:Jl,silhouette:$L,wiggle:ML,positive:sB},aB=(e,t,r)=>{var n=iB[r],s=DL().keys(t).value((i,l)=>Number(es(i,l,0))).order(Kv).offset(n);return s(e)};function oB(e){return e==null?void 0:String(e)}var tk=e=>{var{axis:t,ticks:r,offset:n,bandSize:s,entry:i,index:l}=e;if(t.type==="category")return r[l]?r[l].coordinate+n:null;var u=es(i,t.dataKey,t.scale.domain()[l]);return wn(u)?null:t.scale(u)-s/2+n},lB=e=>{var{numericAxis:t}=e,r=t.scale.domain();if(t.type==="number"){var n=Math.min(r[0],r[1]),s=Math.max(r[0],r[1]);return n<=0&&s>=0?0:s<0?s:n}return r[0]},cB=e=>{var t=e.flat(2).filter(lt);return[Math.min(...t),Math.max(...t)]},uB=e=>[e[0]===1/0?0:e[0],e[1]===-1/0?0:e[1]],dB=(e,t,r)=>{if(e!=null)return uB(Object.keys(e).reduce((n,s)=>{var i=e[s],{stackedData:l}=i,u=l.reduce((d,m)=>{var f=$A(m,t,r),p=cB(f);return[Math.min(d[0],p[0]),Math.max(d[1],p[1])]},[1/0,-1/0]);return[Math.min(u[0],n[0]),Math.max(u[1],n[1])]},[1/0,-1/0]))},rk=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,nk=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,mh=(e,t,r)=>{if(e&&e.scale&&e.scale.bandwidth){var n=e.scale.bandwidth();if(!r||n>0)return n}if(e&&t&&t.length>=2){for(var s=sm(t,f=>f.coordinate),i=1/0,l=1,u=s.length;l<u;l++){var d=s[l],m=s[l-1];i=Math.min((d.coordinate||0)-(m.coordinate||0),i)}return i===1/0?0:i}return r?void 0:0};function sk(e){var{tooltipEntrySettings:t,dataKey:r,payload:n,value:s,name:i}=e;return Ul(Ul({},t),{},{dataKey:r,payload:n,value:s,name:i})}function MA(e,t){if(e)return String(e);if(typeof t=="string")return t}var fB=(e,t)=>{if(t==="horizontal")return e.chartX;if(t==="vertical")return e.chartY},hB=(e,t)=>t==="centric"?e.angle:e.radius,ya=e=>e.layout.width,va=e=>e.layout.height,mB=e=>e.layout.scale,FA=e=>e.layout.margin,um=pe(e=>e.cartesianAxis.xAxis,e=>Object.values(e)),dm=pe(e=>e.cartesianAxis.yAxis,e=>Object.values(e)),pB="data-recharts-item-index",gB="data-recharts-item-data-key",Gu=60;function ik(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function bf(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?ik(Object(r),!0).forEach(function(n){yB(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ik(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function yB(e,t,r){return(t=vB(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function vB(e){var t=xB(e,"string");return typeof t=="symbol"?t:t+""}function xB(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var wB=e=>e.brush.height;function bB(e){var t=dm(e);return t.reduce((r,n)=>{if(n.orientation==="left"&&!n.mirror&&!n.hide){var s=typeof n.width=="number"?n.width:Gu;return r+s}return r},0)}function jB(e){var t=dm(e);return t.reduce((r,n)=>{if(n.orientation==="right"&&!n.mirror&&!n.hide){var s=typeof n.width=="number"?n.width:Gu;return r+s}return r},0)}function SB(e){var t=um(e);return t.reduce((r,n)=>n.orientation==="top"&&!n.mirror&&!n.hide?r+n.height:r,0)}function _B(e){var t=um(e);return t.reduce((r,n)=>n.orientation==="bottom"&&!n.mirror&&!n.hide?r+n.height:r,0)}var bn=pe([ya,va,FA,wB,bB,jB,SB,_B,cA,Xz],(e,t,r,n,s,i,l,u,d,m)=>{var f={left:(r.left||0)+s,right:(r.right||0)+i},p={top:(r.top||0)+l,bottom:(r.bottom||0)+u},y=bf(bf({},p),f),x=y.bottom;y.bottom+=n,y=eB(y,d,m);var b=e-y.left-y.right,j=t-y.top-y.bottom;return bf(bf({brushBottom:x},y),{},{width:Math.max(b,0),height:Math.max(j,0)})}),kB=pe(bn,e=>({x:e.left,y:e.top,width:e.width,height:e.height})),Sx=pe(ya,va,(e,t)=>({x:0,y:0,width:e,height:t})),NB=v.createContext(null),Ms=()=>v.useContext(NB)!=null,fm=e=>e.brush,hm=pe([fm,bn,FA],(e,t,r)=>({height:e.height,x:lt(e.x)?e.x:t.left,y:lt(e.y)?e.y:t.top+t.height+t.brushBottom-((r==null?void 0:r.bottom)||0),width:lt(e.width)?e.width:t.width})),Dy={},Ry={},$y={},ak;function CB(){return ak||(ak=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r,n,{signal:s,edges:i}={}){let l,u=null;const d=i!=null&&i.includes("leading"),m=i==null||i.includes("trailing"),f=()=>{u!==null&&(r.apply(l,u),l=void 0,u=null)},p=()=>{m&&f(),j()};let y=null;const x=()=>{y!=null&&clearTimeout(y),y=setTimeout(()=>{y=null,p()},n)},b=()=>{y!==null&&(clearTimeout(y),y=null)},j=()=>{b(),l=void 0,u=null},S=()=>{f()},k=function(...C){if(s!=null&&s.aborted)return;l=this,u=C;const N=y==null;x(),d&&N&&f()};return k.schedule=x,k.cancel=j,k.flush=S,s==null||s.addEventListener("abort",j,{once:!0}),k}e.debounce=t})($y)),$y}var ok;function EB(){return ok||(ok=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=CB();function r(n,s=0,i={}){typeof i!="object"&&(i={});const{leading:l=!1,trailing:u=!0,maxWait:d}=i,m=Array(2);l&&(m[0]="leading"),u&&(m[1]="trailing");let f,p=null;const y=t.debounce(function(...j){f=n.apply(this,j),p=null},s,{edges:m}),x=function(...j){return d!=null&&(p===null&&(p=Date.now()),Date.now()-p>=d)?(f=n.apply(this,j),p=Date.now(),y.cancel(),y.schedule(),f):(y.apply(this,j),f)},b=()=>(y.flush(),f);return x.cancel=y.cancel,x.flush=b,x}e.debounce=r})(Ry)),Ry}var lk;function AB(){return lk||(lk=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=EB();function r(n,s=0,i={}){const{leading:l=!0,trailing:u=!0}=i;return t.debounce(n,s,{leading:l,maxWait:s,trailing:u})}e.throttle=r})(Dy)),Dy}var My,ck;function PB(){return ck||(ck=1,My=AB().throttle),My}var OB=PB();const TB=wi(OB);var uk=function(t,r){for(var n=arguments.length,s=new Array(n>2?n-2:0),i=2;i<n;i++)s[i-2]=arguments[i]},LA=(e,t,r)=>{var{width:n="100%",height:s="100%",aspect:i,maxHeight:l}=r,u=ca(n)?e:Number(n),d=ca(s)?t:Number(s);return i&&i>0&&(u?d=u/i:d&&(u=d*i),l&&d!=null&&d>l&&(d=l)),{calculatedWidth:u,calculatedHeight:d}},IB={width:0,height:0,overflow:"visible"},DB={width:0,overflowX:"visible"},RB={height:0,overflowY:"visible"},$B={},MB=e=>{var{width:t,height:r}=e,n=ca(t),s=ca(r);return n&&s?IB:n?DB:s?RB:$B};function FB(e){var{width:t,height:r,aspect:n}=e,s=t,i=r;return s===void 0&&i===void 0?(s="100%",i="100%"):s===void 0?s=n&&n>0?void 0:"100%":i===void 0&&(i=n&&n>0?void 0:"100%"),{width:s,height:i}}function Lr(e){return Number.isFinite(e)}function Qa(e){return typeof e=="number"&&e>0&&Number.isFinite(e)}function s0(){return s0=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},s0.apply(null,arguments)}function dk(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function fk(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?dk(Object(r),!0).forEach(function(n){LB(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):dk(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function LB(e,t,r){return(t=zB(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function zB(e){var t=UB(e,"string");return typeof t=="symbol"?t:t+""}function UB(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var zA=v.createContext({width:-1,height:-1});function BB(e){return Qa(e.width)&&Qa(e.height)}function UA(e){var{children:t,width:r,height:n}=e,s=v.useMemo(()=>({width:r,height:n}),[r,n]);return BB(s)?v.createElement(zA.Provider,{value:s},t):null}var _x=()=>v.useContext(zA),WB=v.forwardRef((e,t)=>{var{aspect:r,initialDimension:n={width:-1,height:-1},width:s,height:i,minWidth:l=0,minHeight:u,maxHeight:d,children:m,debounce:f=0,id:p,className:y,onResize:x,style:b={}}=e,j=v.useRef(null),S=v.useRef();S.current=x,v.useImperativeHandle(t,()=>j.current);var[k,C]=v.useState({containerWidth:n.width,containerHeight:n.height}),N=v.useCallback((q,F)=>{C(K=>{var B=Math.round(q),Q=Math.round(F);return K.containerWidth===B&&K.containerHeight===Q?K:{containerWidth:B,containerHeight:Q}})},[]);v.useEffect(()=>{if(j.current==null||typeof ResizeObserver>"u")return hc;var q=Q=>{var oe,{width:ae,height:J}=Q[0].contentRect;N(ae,J),(oe=S.current)===null||oe===void 0||oe.call(S,ae,J)};f>0&&(q=TB(q,f,{trailing:!0,leading:!1}));var F=new ResizeObserver(q),{width:K,height:B}=j.current.getBoundingClientRect();return N(K,B),F.observe(j.current),()=>{F.disconnect()}},[N,f]);var{containerWidth:O,containerHeight:P}=k;uk(!r||r>0,"The aspect(%s) must be greater than zero.",r);var{calculatedWidth:T,calculatedHeight:D}=LA(O,P,{width:s,height:i,aspect:r,maxHeight:d});return uk(T!=null&&T>0||D!=null&&D>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,T,D,s,i,l,u,r),v.createElement("div",{id:p?"".concat(p):void 0,className:fr("recharts-responsive-container",y),style:fk(fk({},b),{},{width:s,height:i,minWidth:l,minHeight:u,maxHeight:d}),ref:j},v.createElement("div",{style:MB({width:s,height:i})},v.createElement(UA,{width:T,height:D},m)))}),VB=v.forwardRef((e,t)=>{var r=_x();if(Qa(r.width)&&Qa(r.height))return e.children;var{width:n,height:s}=FB({width:e.width,height:e.height,aspect:e.aspect}),{calculatedWidth:i,calculatedHeight:l}=LA(void 0,void 0,{width:n,height:s,aspect:e.aspect,maxHeight:e.maxHeight});return lt(i)&&lt(l)?v.createElement(UA,{width:i,height:l},e.children):v.createElement(WB,s0({},e,{width:n,height:s,ref:t}))});function BA(e){if(e)return{x:e.x,y:e.y,upperWidth:"upperWidth"in e?e.upperWidth:e.width,lowerWidth:"lowerWidth"in e?e.lowerWidth:e.width,width:e.width,height:e.height}}var mm=()=>{var e,t=Ms(),r=st(kB),n=st(hm),s=(e=st(fm))===null||e===void 0?void 0:e.padding;return!t||!n||!s?r:{width:n.width-s.left-s.right,height:n.height-s.top-s.bottom,x:s.left,y:s.top}},qB={top:0,bottom:0,left:0,right:0,width:0,height:0,brushBottom:0},HB=()=>{var e;return(e=st(bn))!==null&&e!==void 0?e:qB},KB=()=>st(ya),GB=()=>st(va),Yt=e=>e.layout.layoutType,pm=()=>st(Yt),YB=()=>{var e=pm();return e!==void 0},gm=e=>{var t=zr(),r=Ms(),{width:n,height:s}=e,i=_x(),l=n,u=s;return i&&(l=i.width>0?i.width:n,u=i.height>0?i.height:s),v.useEffect(()=>{!r&&Qa(l)&&Qa(u)&&t(GU({width:l,height:u}))},[t,r,l,u]),null},JB={settings:{layout:"horizontal",align:"center",verticalAlign:"middle",itemSorter:"value"},size:{width:0,height:0},payload:[]},WA=ps({name:"legend",initialState:JB,reducers:{setLegendSize(e,t){e.size.width=t.payload.width,e.size.height=t.payload.height},setLegendSettings(e,t){e.settings.align=t.payload.align,e.settings.layout=t.payload.layout,e.settings.verticalAlign=t.payload.verticalAlign,e.settings.itemSorter=t.payload.itemSorter},addLegendPayload:{reducer(e,t){e.payload.push(t.payload)},prepare:nn()},removeLegendPayload:{reducer(e,t){var r=na(e).payload.indexOf(t.payload);r>-1&&e.payload.splice(r,1)},prepare:nn()}}}),{setLegendSize:JZ,setLegendSettings:QZ,addLegendPayload:QB,removeLegendPayload:XB}=WA.actions,ZB=WA.reducer;function i0(){return i0=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},i0.apply(null,arguments)}function hk(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Fy(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?hk(Object(r),!0).forEach(function(n){e8(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):hk(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function e8(e,t,r){return(t=t8(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function t8(e){var t=r8(e,"string");return typeof t=="symbol"?t:t+""}function r8(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function n8(e){return Array.isArray(e)&&Ri(e[0])&&Ri(e[1])?e.join(" ~ "):e}var s8=e=>{var{separator:t=" : ",contentStyle:r={},itemStyle:n={},labelStyle:s={},payload:i,formatter:l,itemSorter:u,wrapperClassName:d,labelClassName:m,label:f,labelFormatter:p,accessibilityLayer:y=!1}=e,x=()=>{if(i&&i.length){var P={padding:0,margin:0},T=(u?sm(i,u):i).map((D,q)=>{if(D.type==="none")return null;var F=D.formatter||l||n8,{value:K,name:B}=D,Q=K,oe=B;if(F){var ae=F(K,B,D,q,i);if(Array.isArray(ae))[Q,oe]=ae;else if(ae!=null)Q=ae;else return null}var J=Fy({display:"block",paddingTop:4,paddingBottom:4,color:D.color||"#000"},n);return v.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(q),style:J},Ri(oe)?v.createElement("span",{className:"recharts-tooltip-item-name"},oe):null,Ri(oe)?v.createElement("span",{className:"recharts-tooltip-item-separator"},t):null,v.createElement("span",{className:"recharts-tooltip-item-value"},Q),v.createElement("span",{className:"recharts-tooltip-item-unit"},D.unit||""))});return v.createElement("ul",{className:"recharts-tooltip-item-list",style:P},T)}return null},b=Fy({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},r),j=Fy({margin:0},s),S=!wn(f),k=S?f:"",C=fr("recharts-default-tooltip",d),N=fr("recharts-tooltip-label",m);S&&p&&i!==void 0&&i!==null&&(k=p(f,i));var O=y?{role:"status","aria-live":"assertive"}:{};return v.createElement("div",i0({className:C,style:b},O),v.createElement("p",{className:N,style:j},v.isValidElement(k)?k:"".concat(k)),x())},ru="recharts-tooltip-wrapper",i8={visibility:"hidden"};function a8(e){var{coordinate:t,translateX:r,translateY:n}=e;return fr(ru,{["".concat(ru,"-right")]:lt(r)&&t&&lt(t.x)&&r>=t.x,["".concat(ru,"-left")]:lt(r)&&t&&lt(t.x)&&r<t.x,["".concat(ru,"-bottom")]:lt(n)&&t&&lt(t.y)&&n>=t.y,["".concat(ru,"-top")]:lt(n)&&t&&lt(t.y)&&n<t.y})}function mk(e){var{allowEscapeViewBox:t,coordinate:r,key:n,offsetTopLeft:s,position:i,reverseDirection:l,tooltipDimension:u,viewBox:d,viewBoxDimension:m}=e;if(i&&lt(i[n]))return i[n];var f=r[n]-u-(s>0?s:0),p=r[n]+s;if(t[n])return l[n]?f:p;var y=d[n];if(y==null)return 0;if(l[n]){var x=f,b=y;return x<b?Math.max(p,y):Math.max(f,y)}if(m==null)return 0;var j=p+u,S=y+m;return j>S?Math.max(f,y):Math.max(p,y)}function o8(e){var{translateX:t,translateY:r,useTranslate3d:n}=e;return{transform:n?"translate3d(".concat(t,"px, ").concat(r,"px, 0)"):"translate(".concat(t,"px, ").concat(r,"px)")}}function l8(e){var{allowEscapeViewBox:t,coordinate:r,offsetTopLeft:n,position:s,reverseDirection:i,tooltipBox:l,useTranslate3d:u,viewBox:d}=e,m,f,p;return l.height>0&&l.width>0&&r?(f=mk({allowEscapeViewBox:t,coordinate:r,key:"x",offsetTopLeft:n,position:s,reverseDirection:i,tooltipDimension:l.width,viewBox:d,viewBoxDimension:d.width}),p=mk({allowEscapeViewBox:t,coordinate:r,key:"y",offsetTopLeft:n,position:s,reverseDirection:i,tooltipDimension:l.height,viewBox:d,viewBoxDimension:d.height}),m=o8({translateX:f,translateY:p,useTranslate3d:u})):m=i8,{cssProperties:m,cssClasses:a8({translateX:f,translateY:p,coordinate:r})}}function pk(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function jf(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?pk(Object(r),!0).forEach(function(n){a0(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):pk(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function a0(e,t,r){return(t=c8(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function c8(e){var t=u8(e,"string");return typeof t=="symbol"?t:t+""}function u8(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class d8 extends v.PureComponent{constructor(){super(...arguments),a0(this,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0}}),a0(this,"handleKeyDown",t=>{if(t.key==="Escape"){var r,n,s,i;this.setState({dismissed:!0,dismissedAtCoordinate:{x:(r=(n=this.props.coordinate)===null||n===void 0?void 0:n.x)!==null&&r!==void 0?r:0,y:(s=(i=this.props.coordinate)===null||i===void 0?void 0:i.y)!==null&&s!==void 0?s:0}})}})}componentDidMount(){document.addEventListener("keydown",this.handleKeyDown)}componentWillUnmount(){document.removeEventListener("keydown",this.handleKeyDown)}componentDidUpdate(){var t,r;this.state.dismissed&&(((t=this.props.coordinate)===null||t===void 0?void 0:t.x)!==this.state.dismissedAtCoordinate.x||((r=this.props.coordinate)===null||r===void 0?void 0:r.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}render(){var{active:t,allowEscapeViewBox:r,animationDuration:n,animationEasing:s,children:i,coordinate:l,hasPayload:u,isAnimationActive:d,offset:m,position:f,reverseDirection:p,useTranslate3d:y,viewBox:x,wrapperStyle:b,lastBoundingBox:j,innerRef:S,hasPortalFromProps:k}=this.props,{cssClasses:C,cssProperties:N}=l8({allowEscapeViewBox:r,coordinate:l,offsetTopLeft:m,position:f,reverseDirection:p,tooltipBox:{height:j.height,width:j.width},useTranslate3d:y,viewBox:x}),O=k?{}:jf(jf({transition:d&&t?"transform ".concat(n,"ms ").concat(s):void 0},N),{},{pointerEvents:"none",visibility:!this.state.dismissed&&t&&u?"visible":"hidden",position:"absolute",top:0,left:0}),P=jf(jf({},O),{},{visibility:!this.state.dismissed&&t&&u?"visible":"hidden"},b);return v.createElement("div",{xmlns:"http://www.w3.org/1999/xhtml",tabIndex:-1,className:C,style:P,ref:S},i)}}var f8=()=>!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout),mc={devToolsEnabled:!1,isSsr:f8()},VA=()=>{var e;return(e=st(t=>t.rootProps.accessibilityLayer))!==null&&e!==void 0?e:!0};function o0(){return o0=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},o0.apply(null,arguments)}function gk(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function yk(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?gk(Object(r),!0).forEach(function(n){h8(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):gk(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function h8(e,t,r){return(t=m8(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function m8(e){var t=p8(e,"string");return typeof t=="symbol"?t:t+""}function p8(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var vk={curveBasisClosed:SL,curveBasisOpen:_L,curveBasis:jL,curveBumpX:lL,curveBumpY:cL,curveLinearClosed:kL,curveLinear:rm,curveMonotoneX:NL,curveMonotoneY:CL,curveNatural:EL,curveStep:AL,curveStepAfter:OL,curveStepBefore:PL},ph=e=>Lr(e.x)&&Lr(e.y),xk=e=>e.base!=null&&ph(e.base)&&ph(e),nu=e=>e.x,su=e=>e.y,g8=(e,t)=>{if(typeof e=="function")return e;var r="curve".concat(qu(e));return(r==="curveMonotone"||r==="curveBump")&&t?vk["".concat(r).concat(t==="vertical"?"Y":"X")]:vk[r]||rm},y8=e=>{var{type:t="linear",points:r=[],baseLine:n,layout:s,connectNulls:i=!1}=e,l=g8(t,s),u=i?r.filter(ph):r,d;if(Array.isArray(n)){var m=r.map((x,b)=>yk(yk({},x),{},{base:n[b]}));s==="vertical"?d=pf().y(su).x1(nu).x0(x=>x.base.x):d=pf().x(nu).y1(su).y0(x=>x.base.y);var f=d.defined(xk).curve(l),p=i?m.filter(xk):m;return f(p)}s==="vertical"&&lt(n)?d=pf().y(su).x1(nu).x0(n):lt(n)?d=pf().x(nu).y1(su).y0(n):d=RE().x(nu).y(su);var y=d.defined(ph).curve(l);return y(u)},qA=e=>{var{className:t,points:r,path:n,pathRef:s}=e;if((!r||!r.length)&&!n)return null;var i=r&&r.length?y8(e):n;return v.createElement("path",o0({},Ja(e),tz(e),{className:fr("recharts-curve",t),d:i===null?void 0:i,ref:s}))},v8=["x","y","top","left","width","height","className"];function l0(){return l0=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},l0.apply(null,arguments)}function wk(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function x8(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?wk(Object(r),!0).forEach(function(n){w8(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):wk(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function w8(e,t,r){return(t=b8(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function b8(e){var t=j8(e,"string");return typeof t=="symbol"?t:t+""}function j8(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function S8(e,t){if(e==null)return{};var r,n,s=_8(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function _8(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var k8=(e,t,r,n,s,i)=>"M".concat(e,",").concat(s,"v").concat(n,"M").concat(i,",").concat(t,"h").concat(r),N8=e=>{var{x:t=0,y:r=0,top:n=0,left:s=0,width:i=0,height:l=0,className:u}=e,d=S8(e,v8),m=x8({x:t,y:r,top:n,left:s,width:i,height:l},d);return!lt(t)||!lt(r)||!lt(i)||!lt(l)||!lt(n)||!lt(s)?null:v.createElement("path",l0({},Xs(m),{className:fr("recharts-cross",u),d:k8(t,r,i,l,n,s)}))};function C8(e,t,r,n){var s=n/2;return{stroke:"none",fill:"#ccc",x:e==="horizontal"?t.x-s:r.left+.5,y:e==="horizontal"?r.top+.5:t.y-s,width:e==="horizontal"?n:r.width-1,height:e==="horizontal"?r.height-1:n}}function bk(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function jk(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?bk(Object(r),!0).forEach(function(n){E8(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):bk(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function E8(e,t,r){return(t=A8(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function A8(e){var t=P8(e,"string");return typeof t=="symbol"?t:t+""}function P8(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var O8=e=>e.replace(/([A-Z])/g,t=>"-".concat(t.toLowerCase())),HA=(e,t,r)=>e.map(n=>"".concat(O8(n)," ").concat(t,"ms ").concat(r)).join(","),T8=(e,t)=>[Object.keys(e),Object.keys(t)].reduce((r,n)=>r.filter(s=>n.includes(s))),Pu=(e,t)=>Object.keys(t).reduce((r,n)=>jk(jk({},r),{},{[n]:e(n,t[n])}),{});function Sk(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function rn(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Sk(Object(r),!0).forEach(function(n){I8(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Sk(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function I8(e,t,r){return(t=D8(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function D8(e){var t=R8(e,"string");return typeof t=="symbol"?t:t+""}function R8(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var gh=(e,t,r)=>e+(t-e)*r,c0=e=>{var{from:t,to:r}=e;return t!==r},KA=(e,t,r)=>{var n=Pu((s,i)=>{if(c0(i)){var[l,u]=e(i.from,i.to,i.velocity);return rn(rn({},i),{},{from:l,velocity:u})}return i},t);return r<1?Pu((s,i)=>c0(i)?rn(rn({},i),{},{velocity:gh(i.velocity,n[s].velocity,r),from:gh(i.from,n[s].from,r)}):i,t):KA(e,n,r-1)};function $8(e,t,r,n,s,i){var l,u=n.reduce((y,x)=>rn(rn({},y),{},{[x]:{from:e[x],velocity:0,to:t[x]}}),{}),d=()=>Pu((y,x)=>x.from,u),m=()=>!Object.values(u).filter(c0).length,f=null,p=y=>{l||(l=y);var x=y-l,b=x/r.dt;u=KA(r,u,b),s(rn(rn(rn({},e),t),d())),l=y,m()||(f=i.setTimeout(p))};return()=>(f=i.setTimeout(p),()=>{var y;(y=f)===null||y===void 0||y()})}function M8(e,t,r,n,s,i,l){var u=null,d=s.reduce((p,y)=>rn(rn({},p),{},{[y]:[e[y],t[y]]}),{}),m,f=p=>{m||(m=p);var y=(p-m)/n,x=Pu((j,S)=>gh(...S,r(y)),d);if(i(rn(rn(rn({},e),t),x)),y<1)u=l.setTimeout(f);else{var b=Pu((j,S)=>gh(...S,r(1)),d);i(rn(rn(rn({},e),t),b))}};return()=>(u=l.setTimeout(f),()=>{var p;(p=u)===null||p===void 0||p()})}const F8=(e,t,r,n,s,i)=>{var l=T8(e,t);return r==null?()=>(s(rn(rn({},e),t)),()=>{}):r.isStepper===!0?$8(e,t,r,l,s,i):M8(e,t,r,n,l,s,i)};var yh=1e-4,GA=(e,t)=>[0,3*e,3*t-6*e,3*e-3*t+1],YA=(e,t)=>e.map((r,n)=>r*t**n).reduce((r,n)=>r+n),_k=(e,t)=>r=>{var n=GA(e,t);return YA(n,r)},L8=(e,t)=>r=>{var n=GA(e,t),s=[...n.map((i,l)=>i*l).slice(1),0];return YA(s,r)},z8=function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];if(r.length===1)switch(r[0]){case"linear":return[0,0,1,1];case"ease":return[.25,.1,.25,1];case"ease-in":return[.42,0,1,1];case"ease-out":return[.42,0,.58,1];case"ease-in-out":return[0,0,.58,1];default:{var s,i=r[0].split("(");if(i[0]==="cubic-bezier"&&((s=i[1])===null||s===void 0?void 0:s.split(")")[0].split(",").length)===4){var l=i[1].split(")")[0].split(",").map(u=>parseFloat(u));return[l[0],l[1],l[2],l[3]]}}}return r.length===4?r:[0,0,1,1]},U8=(e,t,r,n)=>{var s=_k(e,r),i=_k(t,n),l=L8(e,r),u=m=>m>1?1:m<0?0:m,d=m=>{for(var f=m>1?1:m,p=f,y=0;y<8;++y){var x=s(p)-f,b=l(p);if(Math.abs(x-f)<yh||b<yh)return i(p);p=u(p-x/b)}return i(p)};return d.isStepper=!1,d},kk=function(){return U8(...z8(...arguments))},B8=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},{stiff:r=100,damping:n=8,dt:s=17}=t,i=(l,u,d)=>{var m=-(l-u)*r,f=d*n,p=d+(m-f)*s/1e3,y=d*s/1e3+l;return Math.abs(y-u)<yh&&Math.abs(p)<yh?[u,0]:[y,p]};return i.isStepper=!0,i.dt=s,i},W8=e=>{if(typeof e=="string")switch(e){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return kk(e);case"spring":return B8();default:if(e.split("(")[0]==="cubic-bezier")return kk(e)}return typeof e=="function"?e:null};function V8(e){var t,r=()=>null,n=!1,s=null,i=l=>{if(!n){if(Array.isArray(l)){if(!l.length)return;var u=l,[d,...m]=u;if(typeof d=="number"){s=e.setTimeout(i.bind(null,m),d);return}i(d),s=e.setTimeout(i.bind(null,m));return}typeof l=="string"&&(t=l,r(t)),typeof l=="object"&&(t=l,r(t)),typeof l=="function"&&l()}};return{stop:()=>{n=!0},start:l=>{n=!1,s&&(s(),s=null),i(l)},subscribe:l=>(r=l,()=>{r=()=>null}),getTimeoutController:()=>e}}class q8{setTimeout(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=performance.now(),s=null,i=l=>{l-n>=r?t(l):typeof requestAnimationFrame=="function"&&(s=requestAnimationFrame(i))};return s=requestAnimationFrame(i),()=>{s!=null&&cancelAnimationFrame(s)}}}function H8(){return V8(new q8)}var K8=v.createContext(H8);function G8(e,t){var r=v.useContext(K8);return v.useMemo(()=>t??r(e),[e,t,r])}var Y8={begin:0,duration:1e3,easing:"ease",isActive:!0,canBegin:!0,onAnimationEnd:()=>{},onAnimationStart:()=>{}},Nk={t:0},Ly={t:1};function kx(e){var t=ti(e,Y8),{isActive:r,canBegin:n,duration:s,easing:i,begin:l,onAnimationEnd:u,onAnimationStart:d,children:m}=t,f=G8(t.animationId,t.animationManager),[p,y]=v.useState(r?Nk:Ly),x=v.useRef(null);return v.useEffect(()=>{r||y(Ly)},[r]),v.useEffect(()=>{if(!r||!n)return hc;var b=F8(Nk,Ly,W8(i),s,y,f.getTimeoutController()),j=()=>{x.current=b()};return f.start([d,l,j,s,u]),()=>{f.stop(),x.current&&x.current(),u()}},[r,n,s,i,l,d,u,f]),m(p.t)}function Nx(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"animation-",r=v.useRef(Nu(t)),n=v.useRef(e);return n.current!==e&&(r.current=Nu(t),n.current=e),r.current}var J8=["radius"],Q8=["radius"];function Ck(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Ek(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Ck(Object(r),!0).forEach(function(n){X8(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ck(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function X8(e,t,r){return(t=Z8(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Z8(e){var t=e7(e,"string");return typeof t=="symbol"?t:t+""}function e7(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function vh(){return vh=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},vh.apply(null,arguments)}function Ak(e,t){if(e==null)return{};var r,n,s=t7(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function t7(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var Pk=(e,t,r,n,s)=>{var i=Math.min(Math.abs(r)/2,Math.abs(n)/2),l=n>=0?1:-1,u=r>=0?1:-1,d=n>=0&&r>=0||n<0&&r<0?1:0,m;if(i>0&&s instanceof Array){for(var f=[0,0,0,0],p=0,y=4;p<y;p++)f[p]=s[p]>i?i:s[p];m="M".concat(e,",").concat(t+l*f[0]),f[0]>0&&(m+="A ".concat(f[0],",").concat(f[0],",0,0,").concat(d,",").concat(e+u*f[0],",").concat(t)),m+="L ".concat(e+r-u*f[1],",").concat(t),f[1]>0&&(m+="A ".concat(f[1],",").concat(f[1],",0,0,").concat(d,`,
        `).concat(e+r,",").concat(t+l*f[1])),m+="L ".concat(e+r,",").concat(t+n-l*f[2]),f[2]>0&&(m+="A ".concat(f[2],",").concat(f[2],",0,0,").concat(d,`,
        `).concat(e+r-u*f[2],",").concat(t+n)),m+="L ".concat(e+u*f[3],",").concat(t+n),f[3]>0&&(m+="A ".concat(f[3],",").concat(f[3],",0,0,").concat(d,`,
        `).concat(e,",").concat(t+n-l*f[3])),m+="Z"}else if(i>0&&s===+s&&s>0){var x=Math.min(i,s);m="M ".concat(e,",").concat(t+l*x,`
            A `).concat(x,",").concat(x,",0,0,").concat(d,",").concat(e+u*x,",").concat(t,`
            L `).concat(e+r-u*x,",").concat(t,`
            A `).concat(x,",").concat(x,",0,0,").concat(d,",").concat(e+r,",").concat(t+l*x,`
            L `).concat(e+r,",").concat(t+n-l*x,`
            A `).concat(x,",").concat(x,",0,0,").concat(d,",").concat(e+r-u*x,",").concat(t+n,`
            L `).concat(e+u*x,",").concat(t+n,`
            A `).concat(x,",").concat(x,",0,0,").concat(d,",").concat(e,",").concat(t+n-l*x," Z")}else m="M ".concat(e,",").concat(t," h ").concat(r," v ").concat(n," h ").concat(-r," Z");return m},Ok={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},JA=e=>{var t=ti(e,Ok),r=v.useRef(null),[n,s]=v.useState(-1);v.useEffect(()=>{if(r.current&&r.current.getTotalLength)try{var ne=r.current.getTotalLength();ne&&s(ne)}catch{}},[]);var{x:i,y:l,width:u,height:d,radius:m,className:f}=t,{animationEasing:p,animationDuration:y,animationBegin:x,isAnimationActive:b,isUpdateAnimationActive:j}=t,S=v.useRef(u),k=v.useRef(d),C=v.useRef(i),N=v.useRef(l),O=v.useMemo(()=>({x:i,y:l,width:u,height:d,radius:m}),[i,l,u,d,m]),P=Nx(O,"rectangle-");if(i!==+i||l!==+l||u!==+u||d!==+d||u===0||d===0)return null;var T=fr("recharts-rectangle",f);if(!j){var D=Xs(t),{radius:q}=D,F=Ak(D,J8);return v.createElement("path",vh({},F,{radius:typeof m=="number"?m:void 0,className:T,d:Pk(i,l,u,d,m)}))}var K=S.current,B=k.current,Q=C.current,oe=N.current,ae="0px ".concat(n===-1?1:n,"px"),J="".concat(n,"px 0px"),H=HA(["strokeDasharray"],y,typeof p=="string"?p:Ok.animationEasing);return v.createElement(kx,{animationId:P,key:P,canBegin:n>0,duration:y,easing:p,isActive:j,begin:x},ne=>{var ie=Tn(K,u,ne),ge=Tn(B,d,ne),ve=Tn(Q,i,ne),I=Tn(oe,l,ne);r.current&&(S.current=ie,k.current=ge,C.current=ve,N.current=I);var V;b?ne>0?V={transition:H,strokeDasharray:J}:V={strokeDasharray:ae}:V={strokeDasharray:J};var Ae=Xs(t),{radius:X}=Ae,re=Ak(Ae,Q8);return v.createElement("path",vh({},re,{radius:typeof m=="number"?m:void 0,className:T,d:Pk(ve,I,ie,ge,m),ref:r,style:Ek(Ek({},V),t.style)}))})};function Tk(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Ik(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Tk(Object(r),!0).forEach(function(n){r7(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Tk(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function r7(e,t,r){return(t=n7(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function n7(e){var t=s7(e,"string");return typeof t=="symbol"?t:t+""}function s7(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var xh=Math.PI/180,i7=e=>e*180/Math.PI,Dn=(e,t,r,n)=>({x:e+Math.cos(-xh*n)*r,y:t+Math.sin(-xh*n)*r}),a7=function(t,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{top:0,right:0,bottom:0,left:0};return Math.min(Math.abs(t-(n.left||0)-(n.right||0)),Math.abs(r-(n.top||0)-(n.bottom||0)))/2},o7=(e,t)=>{var{x:r,y:n}=e,{x:s,y:i}=t;return Math.sqrt((r-s)**2+(n-i)**2)},l7=(e,t)=>{var{x:r,y:n}=e,{cx:s,cy:i}=t,l=o7({x:r,y:n},{x:s,y:i});if(l<=0)return{radius:l,angle:0};var u=(r-s)/l,d=Math.acos(u);return n>i&&(d=2*Math.PI-d),{radius:l,angle:i7(d),angleInRadian:d}},c7=e=>{var{startAngle:t,endAngle:r}=e,n=Math.floor(t/360),s=Math.floor(r/360),i=Math.min(n,s);return{startAngle:t-i*360,endAngle:r-i*360}},u7=(e,t)=>{var{startAngle:r,endAngle:n}=t,s=Math.floor(r/360),i=Math.floor(n/360),l=Math.min(s,i);return e+l*360},d7=(e,t)=>{var{chartX:r,chartY:n}=e,{radius:s,angle:i}=l7({x:r,y:n},t),{innerRadius:l,outerRadius:u}=t;if(s<l||s>u||s===0)return null;var{startAngle:d,endAngle:m}=c7(t),f=i,p;if(d<=m){for(;f>m;)f-=360;for(;f<d;)f+=360;p=f>=d&&f<=m}else{for(;f>d;)f-=360;for(;f<m;)f+=360;p=f>=m&&f<=d}return p?Ik(Ik({},t),{},{radius:s,angle:u7(f,t)}):null};function QA(e){var{cx:t,cy:r,radius:n,startAngle:s,endAngle:i}=e,l=Dn(t,r,n,s),u=Dn(t,r,n,i);return{points:[l,u],cx:t,cy:r,radius:n,startAngle:s,endAngle:i}}function u0(){return u0=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},u0.apply(null,arguments)}var f7=(e,t)=>{var r=Ts(t-e),n=Math.min(Math.abs(t-e),359.999);return r*n},Sf=e=>{var{cx:t,cy:r,radius:n,angle:s,sign:i,isExternal:l,cornerRadius:u,cornerIsExternal:d}=e,m=u*(l?1:-1)+n,f=Math.asin(u/m)/xh,p=d?s:s+i*f,y=Dn(t,r,m,p),x=Dn(t,r,n,p),b=d?s-i*f:s,j=Dn(t,r,m*Math.cos(f*xh),b);return{center:y,circleTangency:x,lineTangency:j,theta:f}},XA=e=>{var{cx:t,cy:r,innerRadius:n,outerRadius:s,startAngle:i,endAngle:l}=e,u=f7(i,l),d=i+u,m=Dn(t,r,s,i),f=Dn(t,r,s,d),p="M ".concat(m.x,",").concat(m.y,`
    A `).concat(s,",").concat(s,`,0,
    `).concat(+(Math.abs(u)>180),",").concat(+(i>d),`,
    `).concat(f.x,",").concat(f.y,`
  `);if(n>0){var y=Dn(t,r,n,i),x=Dn(t,r,n,d);p+="L ".concat(x.x,",").concat(x.y,`
            A `).concat(n,",").concat(n,`,0,
            `).concat(+(Math.abs(u)>180),",").concat(+(i<=d),`,
            `).concat(y.x,",").concat(y.y," Z")}else p+="L ".concat(t,",").concat(r," Z");return p},h7=e=>{var{cx:t,cy:r,innerRadius:n,outerRadius:s,cornerRadius:i,forceCornerRadius:l,cornerIsExternal:u,startAngle:d,endAngle:m}=e,f=Ts(m-d),{circleTangency:p,lineTangency:y,theta:x}=Sf({cx:t,cy:r,radius:s,angle:d,sign:f,cornerRadius:i,cornerIsExternal:u}),{circleTangency:b,lineTangency:j,theta:S}=Sf({cx:t,cy:r,radius:s,angle:m,sign:-f,cornerRadius:i,cornerIsExternal:u}),k=u?Math.abs(d-m):Math.abs(d-m)-x-S;if(k<0)return l?"M ".concat(y.x,",").concat(y.y,`
        a`).concat(i,",").concat(i,",0,0,1,").concat(i*2,`,0
        a`).concat(i,",").concat(i,",0,0,1,").concat(-i*2,`,0
      `):XA({cx:t,cy:r,innerRadius:n,outerRadius:s,startAngle:d,endAngle:m});var C="M ".concat(y.x,",").concat(y.y,`
    A`).concat(i,",").concat(i,",0,0,").concat(+(f<0),",").concat(p.x,",").concat(p.y,`
    A`).concat(s,",").concat(s,",0,").concat(+(k>180),",").concat(+(f<0),",").concat(b.x,",").concat(b.y,`
    A`).concat(i,",").concat(i,",0,0,").concat(+(f<0),",").concat(j.x,",").concat(j.y,`
  `);if(n>0){var{circleTangency:N,lineTangency:O,theta:P}=Sf({cx:t,cy:r,radius:n,angle:d,sign:f,isExternal:!0,cornerRadius:i,cornerIsExternal:u}),{circleTangency:T,lineTangency:D,theta:q}=Sf({cx:t,cy:r,radius:n,angle:m,sign:-f,isExternal:!0,cornerRadius:i,cornerIsExternal:u}),F=u?Math.abs(d-m):Math.abs(d-m)-P-q;if(F<0&&i===0)return"".concat(C,"L").concat(t,",").concat(r,"Z");C+="L".concat(D.x,",").concat(D.y,`
      A`).concat(i,",").concat(i,",0,0,").concat(+(f<0),",").concat(T.x,",").concat(T.y,`
      A`).concat(n,",").concat(n,",0,").concat(+(F>180),",").concat(+(f>0),",").concat(N.x,",").concat(N.y,`
      A`).concat(i,",").concat(i,",0,0,").concat(+(f<0),",").concat(O.x,",").concat(O.y,"Z")}else C+="L".concat(t,",").concat(r,"Z");return C},m7={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},ZA=e=>{var t=ti(e,m7),{cx:r,cy:n,innerRadius:s,outerRadius:i,cornerRadius:l,forceCornerRadius:u,cornerIsExternal:d,startAngle:m,endAngle:f,className:p}=t;if(i<s||m===f)return null;var y=fr("recharts-sector",p),x=i-s,b=xi(l,x,0,!0),j;return b>0&&Math.abs(m-f)<360?j=h7({cx:r,cy:n,innerRadius:s,outerRadius:i,cornerRadius:Math.min(b,x/2),forceCornerRadius:u,cornerIsExternal:d,startAngle:m,endAngle:f}):j=XA({cx:r,cy:n,innerRadius:s,outerRadius:i,startAngle:m,endAngle:f}),v.createElement("path",u0({},Xs(t),{className:y,d:j}))};function p7(e,t,r){if(e==="horizontal")return[{x:t.x,y:r.top},{x:t.x,y:r.top+r.height}];if(e==="vertical")return[{x:r.left,y:t.y},{x:r.left+r.width,y:t.y}];if(JE(t)){if(e==="centric"){var{cx:n,cy:s,innerRadius:i,outerRadius:l,angle:u}=t,d=Dn(n,s,i,u),m=Dn(n,s,l,u);return[{x:d.x,y:d.y},{x:m.x,y:m.y}]}return QA(t)}}var zy={},Uy={},By={},Dk;function g7(){return Dk||(Dk=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=oA();function r(n){return t.isSymbol(n)?NaN:Number(n)}e.toNumber=r})(By)),By}var Rk;function y7(){return Rk||(Rk=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=g7();function r(n){return n?(n=t.toNumber(n),n===1/0||n===-1/0?(n<0?-1:1)*Number.MAX_VALUE:n===n?n:0):n===0?n:0}e.toFinite=r})(Uy)),Uy}var $k;function v7(){return $k||($k=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=lA(),r=y7();function n(s,i,l){l&&typeof l!="number"&&t.isIterateeCall(s,i,l)&&(i=l=void 0),s=r.toFinite(s),i===void 0?(i=s,s=0):i=r.toFinite(i),l=l===void 0?s<i?1:-1:r.toFinite(l);const u=Math.max(Math.ceil((i-s)/(l||1)),0),d=new Array(u);for(let m=0;m<u;m++)d[m]=s,s+=l;return d}e.range=n})(zy)),zy}var Wy,Mk;function x7(){return Mk||(Mk=1,Wy=v7().range),Wy}var w7=x7();const eP=wi(w7);function Ya(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function b7(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function Cx(e){let t,r,n;e.length!==2?(t=Ya,r=(u,d)=>Ya(e(u),d),n=(u,d)=>e(u)-d):(t=e===Ya||e===b7?e:j7,r=e,n=e);function s(u,d,m=0,f=u.length){if(m<f){if(t(d,d)!==0)return f;do{const p=m+f>>>1;r(u[p],d)<0?m=p+1:f=p}while(m<f)}return m}function i(u,d,m=0,f=u.length){if(m<f){if(t(d,d)!==0)return f;do{const p=m+f>>>1;r(u[p],d)<=0?m=p+1:f=p}while(m<f)}return m}function l(u,d,m=0,f=u.length){const p=s(u,d,m,f-1);return p>m&&n(u[p-1],d)>-n(u[p],d)?p-1:p}return{left:s,center:l,right:i}}function j7(){return 0}function tP(e){return e===null?NaN:+e}function*S7(e,t){for(let r of e)r!=null&&(r=+r)>=r&&(yield r)}const _7=Cx(Ya),Yu=_7.right;Cx(tP).center;class Fk extends Map{constructor(t,r=C7){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:r}}),t!=null)for(const[n,s]of t)this.set(n,s)}get(t){return super.get(Lk(this,t))}has(t){return super.has(Lk(this,t))}set(t,r){return super.set(k7(this,t),r)}delete(t){return super.delete(N7(this,t))}}function Lk({_intern:e,_key:t},r){const n=t(r);return e.has(n)?e.get(n):r}function k7({_intern:e,_key:t},r){const n=t(r);return e.has(n)?e.get(n):(e.set(n,r),r)}function N7({_intern:e,_key:t},r){const n=t(r);return e.has(n)&&(r=e.get(n),e.delete(n)),r}function C7(e){return e!==null&&typeof e=="object"?e.valueOf():e}function E7(e=Ya){if(e===Ya)return rP;if(typeof e!="function")throw new TypeError("compare is not a function");return(t,r)=>{const n=e(t,r);return n||n===0?n:(e(r,r)===0)-(e(t,t)===0)}}function rP(e,t){return(e==null||!(e>=e))-(t==null||!(t>=t))||(e<t?-1:e>t?1:0)}const A7=Math.sqrt(50),P7=Math.sqrt(10),O7=Math.sqrt(2);function wh(e,t,r){const n=(t-e)/Math.max(0,r),s=Math.floor(Math.log10(n)),i=n/Math.pow(10,s),l=i>=A7?10:i>=P7?5:i>=O7?2:1;let u,d,m;return s<0?(m=Math.pow(10,-s)/l,u=Math.round(e*m),d=Math.round(t*m),u/m<e&&++u,d/m>t&&--d,m=-m):(m=Math.pow(10,s)*l,u=Math.round(e/m),d=Math.round(t/m),u*m<e&&++u,d*m>t&&--d),d<u&&.5<=r&&r<2?wh(e,t,r*2):[u,d,m]}function d0(e,t,r){if(t=+t,e=+e,r=+r,!(r>0))return[];if(e===t)return[e];const n=t<e,[s,i,l]=n?wh(t,e,r):wh(e,t,r);if(!(i>=s))return[];const u=i-s+1,d=new Array(u);if(n)if(l<0)for(let m=0;m<u;++m)d[m]=(i-m)/-l;else for(let m=0;m<u;++m)d[m]=(i-m)*l;else if(l<0)for(let m=0;m<u;++m)d[m]=(s+m)/-l;else for(let m=0;m<u;++m)d[m]=(s+m)*l;return d}function f0(e,t,r){return t=+t,e=+e,r=+r,wh(e,t,r)[2]}function h0(e,t,r){t=+t,e=+e,r=+r;const n=t<e,s=n?f0(t,e,r):f0(e,t,r);return(n?-1:1)*(s<0?1/-s:s)}function zk(e,t){let r;for(const n of e)n!=null&&(r<n||r===void 0&&n>=n)&&(r=n);return r}function Uk(e,t){let r;for(const n of e)n!=null&&(r>n||r===void 0&&n>=n)&&(r=n);return r}function nP(e,t,r=0,n=1/0,s){if(t=Math.floor(t),r=Math.floor(Math.max(0,r)),n=Math.floor(Math.min(e.length-1,n)),!(r<=t&&t<=n))return e;for(s=s===void 0?rP:E7(s);n>r;){if(n-r>600){const d=n-r+1,m=t-r+1,f=Math.log(d),p=.5*Math.exp(2*f/3),y=.5*Math.sqrt(f*p*(d-p)/d)*(m-d/2<0?-1:1),x=Math.max(r,Math.floor(t-m*p/d+y)),b=Math.min(n,Math.floor(t+(d-m)*p/d+y));nP(e,t,x,b,s)}const i=e[t];let l=r,u=n;for(iu(e,r,t),s(e[n],i)>0&&iu(e,r,n);l<u;){for(iu(e,l,u),++l,--u;s(e[l],i)<0;)++l;for(;s(e[u],i)>0;)--u}s(e[r],i)===0?iu(e,r,u):(++u,iu(e,u,n)),u<=t&&(r=u+1),t<=u&&(n=u-1)}return e}function iu(e,t,r){const n=e[t];e[t]=e[r],e[r]=n}function T7(e,t,r){if(e=Float64Array.from(S7(e)),!(!(n=e.length)||isNaN(t=+t))){if(t<=0||n<2)return Uk(e);if(t>=1)return zk(e);var n,s=(n-1)*t,i=Math.floor(s),l=zk(nP(e,i).subarray(0,i+1)),u=Uk(e.subarray(i+1));return l+(u-l)*(s-i)}}function I7(e,t,r=tP){if(!(!(n=e.length)||isNaN(t=+t))){if(t<=0||n<2)return+r(e[0],0,e);if(t>=1)return+r(e[n-1],n-1,e);var n,s=(n-1)*t,i=Math.floor(s),l=+r(e[i],i,e),u=+r(e[i+1],i+1,e);return l+(u-l)*(s-i)}}function D7(e,t,r){e=+e,t=+t,r=(s=arguments.length)<2?(t=e,e=0,1):s<3?1:+r;for(var n=-1,s=Math.max(0,Math.ceil((t-e)/r))|0,i=new Array(s);++n<s;)i[n]=e+n*r;return i}function ri(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}function xa(e,t){switch(arguments.length){case 0:break;case 1:{typeof e=="function"?this.interpolator(e):this.range(e);break}default:{this.domain(e),typeof t=="function"?this.interpolator(t):this.range(t);break}}return this}const m0=Symbol("implicit");function Ex(){var e=new Fk,t=[],r=[],n=m0;function s(i){let l=e.get(i);if(l===void 0){if(n!==m0)return n;e.set(i,l=t.push(i)-1)}return r[l%r.length]}return s.domain=function(i){if(!arguments.length)return t.slice();t=[],e=new Fk;for(const l of i)e.has(l)||e.set(l,t.push(l)-1);return s},s.range=function(i){return arguments.length?(r=Array.from(i),s):r.slice()},s.unknown=function(i){return arguments.length?(n=i,s):n},s.copy=function(){return Ex(t,r).unknown(n)},ri.apply(s,arguments),s}function Ax(){var e=Ex().unknown(void 0),t=e.domain,r=e.range,n=0,s=1,i,l,u=!1,d=0,m=0,f=.5;delete e.unknown;function p(){var y=t().length,x=s<n,b=x?s:n,j=x?n:s;i=(j-b)/Math.max(1,y-d+m*2),u&&(i=Math.floor(i)),b+=(j-b-i*(y-d))*f,l=i*(1-d),u&&(b=Math.round(b),l=Math.round(l));var S=D7(y).map(function(k){return b+i*k});return r(x?S.reverse():S)}return e.domain=function(y){return arguments.length?(t(y),p()):t()},e.range=function(y){return arguments.length?([n,s]=y,n=+n,s=+s,p()):[n,s]},e.rangeRound=function(y){return[n,s]=y,n=+n,s=+s,u=!0,p()},e.bandwidth=function(){return l},e.step=function(){return i},e.round=function(y){return arguments.length?(u=!!y,p()):u},e.padding=function(y){return arguments.length?(d=Math.min(1,m=+y),p()):d},e.paddingInner=function(y){return arguments.length?(d=Math.min(1,y),p()):d},e.paddingOuter=function(y){return arguments.length?(m=+y,p()):m},e.align=function(y){return arguments.length?(f=Math.max(0,Math.min(1,y)),p()):f},e.copy=function(){return Ax(t(),[n,s]).round(u).paddingInner(d).paddingOuter(m).align(f)},ri.apply(p(),arguments)}function sP(e){var t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,delete e.paddingOuter,e.copy=function(){return sP(t())},e}function R7(){return sP(Ax.apply(null,arguments).paddingInner(1))}function Px(e,t,r){e.prototype=t.prototype=r,r.constructor=e}function iP(e,t){var r=Object.create(e.prototype);for(var n in t)r[n]=t[n];return r}function Ju(){}var Ou=.7,bh=1/Ou,Kl="\\s*([+-]?\\d+)\\s*",Tu="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Ii="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",$7=/^#([0-9a-f]{3,8})$/,M7=new RegExp(`^rgb\\(${Kl},${Kl},${Kl}\\)$`),F7=new RegExp(`^rgb\\(${Ii},${Ii},${Ii}\\)$`),L7=new RegExp(`^rgba\\(${Kl},${Kl},${Kl},${Tu}\\)$`),z7=new RegExp(`^rgba\\(${Ii},${Ii},${Ii},${Tu}\\)$`),U7=new RegExp(`^hsl\\(${Tu},${Ii},${Ii}\\)$`),B7=new RegExp(`^hsla\\(${Tu},${Ii},${Ii},${Tu}\\)$`),Bk={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Px(Ju,Iu,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:Wk,formatHex:Wk,formatHex8:W7,formatHsl:V7,formatRgb:Vk,toString:Vk});function Wk(){return this.rgb().formatHex()}function W7(){return this.rgb().formatHex8()}function V7(){return aP(this).formatHsl()}function Vk(){return this.rgb().formatRgb()}function Iu(e){var t,r;return e=(e+"").trim().toLowerCase(),(t=$7.exec(e))?(r=t[1].length,t=parseInt(t[1],16),r===6?qk(t):r===3?new hs(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):r===8?_f(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):r===4?_f(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=M7.exec(e))?new hs(t[1],t[2],t[3],1):(t=F7.exec(e))?new hs(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=L7.exec(e))?_f(t[1],t[2],t[3],t[4]):(t=z7.exec(e))?_f(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=U7.exec(e))?Gk(t[1],t[2]/100,t[3]/100,1):(t=B7.exec(e))?Gk(t[1],t[2]/100,t[3]/100,t[4]):Bk.hasOwnProperty(e)?qk(Bk[e]):e==="transparent"?new hs(NaN,NaN,NaN,0):null}function qk(e){return new hs(e>>16&255,e>>8&255,e&255,1)}function _f(e,t,r,n){return n<=0&&(e=t=r=NaN),new hs(e,t,r,n)}function q7(e){return e instanceof Ju||(e=Iu(e)),e?(e=e.rgb(),new hs(e.r,e.g,e.b,e.opacity)):new hs}function p0(e,t,r,n){return arguments.length===1?q7(e):new hs(e,t,r,n??1)}function hs(e,t,r,n){this.r=+e,this.g=+t,this.b=+r,this.opacity=+n}Px(hs,p0,iP(Ju,{brighter(e){return e=e==null?bh:Math.pow(bh,e),new hs(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?Ou:Math.pow(Ou,e),new hs(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new hs(Do(this.r),Do(this.g),Do(this.b),jh(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Hk,formatHex:Hk,formatHex8:H7,formatRgb:Kk,toString:Kk}));function Hk(){return`#${Co(this.r)}${Co(this.g)}${Co(this.b)}`}function H7(){return`#${Co(this.r)}${Co(this.g)}${Co(this.b)}${Co((isNaN(this.opacity)?1:this.opacity)*255)}`}function Kk(){const e=jh(this.opacity);return`${e===1?"rgb(":"rgba("}${Do(this.r)}, ${Do(this.g)}, ${Do(this.b)}${e===1?")":`, ${e})`}`}function jh(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function Do(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function Co(e){return e=Do(e),(e<16?"0":"")+e.toString(16)}function Gk(e,t,r,n){return n<=0?e=t=r=NaN:r<=0||r>=1?e=t=NaN:t<=0&&(e=NaN),new pi(e,t,r,n)}function aP(e){if(e instanceof pi)return new pi(e.h,e.s,e.l,e.opacity);if(e instanceof Ju||(e=Iu(e)),!e)return new pi;if(e instanceof pi)return e;e=e.rgb();var t=e.r/255,r=e.g/255,n=e.b/255,s=Math.min(t,r,n),i=Math.max(t,r,n),l=NaN,u=i-s,d=(i+s)/2;return u?(t===i?l=(r-n)/u+(r<n)*6:r===i?l=(n-t)/u+2:l=(t-r)/u+4,u/=d<.5?i+s:2-i-s,l*=60):u=d>0&&d<1?0:l,new pi(l,u,d,e.opacity)}function K7(e,t,r,n){return arguments.length===1?aP(e):new pi(e,t,r,n??1)}function pi(e,t,r,n){this.h=+e,this.s=+t,this.l=+r,this.opacity=+n}Px(pi,K7,iP(Ju,{brighter(e){return e=e==null?bh:Math.pow(bh,e),new pi(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?Ou:Math.pow(Ou,e),new pi(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,r=this.l,n=r+(r<.5?r:1-r)*t,s=2*r-n;return new hs(Vy(e>=240?e-240:e+120,s,n),Vy(e,s,n),Vy(e<120?e+240:e-120,s,n),this.opacity)},clamp(){return new pi(Yk(this.h),kf(this.s),kf(this.l),jh(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=jh(this.opacity);return`${e===1?"hsl(":"hsla("}${Yk(this.h)}, ${kf(this.s)*100}%, ${kf(this.l)*100}%${e===1?")":`, ${e})`}`}}));function Yk(e){return e=(e||0)%360,e<0?e+360:e}function kf(e){return Math.max(0,Math.min(1,e||0))}function Vy(e,t,r){return(e<60?t+(r-t)*e/60:e<180?r:e<240?t+(r-t)*(240-e)/60:t)*255}const Ox=e=>()=>e;function G7(e,t){return function(r){return e+r*t}}function Y7(e,t,r){return e=Math.pow(e,r),t=Math.pow(t,r)-e,r=1/r,function(n){return Math.pow(e+n*t,r)}}function J7(e){return(e=+e)==1?oP:function(t,r){return r-t?Y7(t,r,e):Ox(isNaN(t)?r:t)}}function oP(e,t){var r=t-e;return r?G7(e,r):Ox(isNaN(e)?t:e)}const Jk=(function e(t){var r=J7(t);function n(s,i){var l=r((s=p0(s)).r,(i=p0(i)).r),u=r(s.g,i.g),d=r(s.b,i.b),m=oP(s.opacity,i.opacity);return function(f){return s.r=l(f),s.g=u(f),s.b=d(f),s.opacity=m(f),s+""}}return n.gamma=e,n})(1);function Q7(e,t){t||(t=[]);var r=e?Math.min(t.length,e.length):0,n=t.slice(),s;return function(i){for(s=0;s<r;++s)n[s]=e[s]*(1-i)+t[s]*i;return n}}function X7(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function Z7(e,t){var r=t?t.length:0,n=e?Math.min(r,e.length):0,s=new Array(n),i=new Array(r),l;for(l=0;l<n;++l)s[l]=pc(e[l],t[l]);for(;l<r;++l)i[l]=t[l];return function(u){for(l=0;l<n;++l)i[l]=s[l](u);return i}}function eW(e,t){var r=new Date;return e=+e,t=+t,function(n){return r.setTime(e*(1-n)+t*n),r}}function Sh(e,t){return e=+e,t=+t,function(r){return e*(1-r)+t*r}}function tW(e,t){var r={},n={},s;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(s in t)s in e?r[s]=pc(e[s],t[s]):n[s]=t[s];return function(i){for(s in r)n[s]=r[s](i);return n}}var g0=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,qy=new RegExp(g0.source,"g");function rW(e){return function(){return e}}function nW(e){return function(t){return e(t)+""}}function sW(e,t){var r=g0.lastIndex=qy.lastIndex=0,n,s,i,l=-1,u=[],d=[];for(e=e+"",t=t+"";(n=g0.exec(e))&&(s=qy.exec(t));)(i=s.index)>r&&(i=t.slice(r,i),u[l]?u[l]+=i:u[++l]=i),(n=n[0])===(s=s[0])?u[l]?u[l]+=s:u[++l]=s:(u[++l]=null,d.push({i:l,x:Sh(n,s)})),r=qy.lastIndex;return r<t.length&&(i=t.slice(r),u[l]?u[l]+=i:u[++l]=i),u.length<2?d[0]?nW(d[0].x):rW(t):(t=d.length,function(m){for(var f=0,p;f<t;++f)u[(p=d[f]).i]=p.x(m);return u.join("")})}function pc(e,t){var r=typeof t,n;return t==null||r==="boolean"?Ox(t):(r==="number"?Sh:r==="string"?(n=Iu(t))?(t=n,Jk):sW:t instanceof Iu?Jk:t instanceof Date?eW:X7(t)?Q7:Array.isArray(t)?Z7:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?tW:Sh)(e,t)}function Tx(e,t){return e=+e,t=+t,function(r){return Math.round(e*(1-r)+t*r)}}function iW(e,t){t===void 0&&(t=e,e=pc);for(var r=0,n=t.length-1,s=t[0],i=new Array(n<0?0:n);r<n;)i[r]=e(s,s=t[++r]);return function(l){var u=Math.max(0,Math.min(n-1,Math.floor(l*=n)));return i[u](l-u)}}function aW(e){return function(){return e}}function _h(e){return+e}var Qk=[0,1];function Zn(e){return e}function y0(e,t){return(t-=e=+e)?function(r){return(r-e)/t}:aW(isNaN(t)?NaN:.5)}function oW(e,t){var r;return e>t&&(r=e,e=t,t=r),function(n){return Math.max(e,Math.min(t,n))}}function lW(e,t,r){var n=e[0],s=e[1],i=t[0],l=t[1];return s<n?(n=y0(s,n),i=r(l,i)):(n=y0(n,s),i=r(i,l)),function(u){return i(n(u))}}function cW(e,t,r){var n=Math.min(e.length,t.length)-1,s=new Array(n),i=new Array(n),l=-1;for(e[n]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++l<n;)s[l]=y0(e[l],e[l+1]),i[l]=r(t[l],t[l+1]);return function(u){var d=Yu(e,u,1,n)-1;return i[d](s[d](u))}}function Qu(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function ym(){var e=Qk,t=Qk,r=pc,n,s,i,l=Zn,u,d,m;function f(){var y=Math.min(e.length,t.length);return l!==Zn&&(l=oW(e[0],e[y-1])),u=y>2?cW:lW,d=m=null,p}function p(y){return y==null||isNaN(y=+y)?i:(d||(d=u(e.map(n),t,r)))(n(l(y)))}return p.invert=function(y){return l(s((m||(m=u(t,e.map(n),Sh)))(y)))},p.domain=function(y){return arguments.length?(e=Array.from(y,_h),f()):e.slice()},p.range=function(y){return arguments.length?(t=Array.from(y),f()):t.slice()},p.rangeRound=function(y){return t=Array.from(y),r=Tx,f()},p.clamp=function(y){return arguments.length?(l=y?!0:Zn,f()):l!==Zn},p.interpolate=function(y){return arguments.length?(r=y,f()):r},p.unknown=function(y){return arguments.length?(i=y,p):i},function(y,x){return n=y,s=x,f()}}function Ix(){return ym()(Zn,Zn)}function uW(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function kh(e,t){if((r=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var r,n=e.slice(0,r);return[n.length>1?n[0]+n.slice(2):n,+e.slice(r+1)]}function Xl(e){return e=kh(Math.abs(e)),e?e[1]:NaN}function dW(e,t){return function(r,n){for(var s=r.length,i=[],l=0,u=e[0],d=0;s>0&&u>0&&(d+u+1>n&&(u=Math.max(1,n-d)),i.push(r.substring(s-=u,s+u)),!((d+=u+1)>n));)u=e[l=(l+1)%e.length];return i.reverse().join(t)}}function fW(e){return function(t){return t.replace(/[0-9]/g,function(r){return e[+r]})}}var hW=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Du(e){if(!(t=hW.exec(e)))throw new Error("invalid format: "+e);var t;return new Dx({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}Du.prototype=Dx.prototype;function Dx(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}Dx.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function mW(e){e:for(var t=e.length,r=1,n=-1,s;r<t;++r)switch(e[r]){case".":n=s=r;break;case"0":n===0&&(n=r),s=r;break;default:if(!+e[r])break e;n>0&&(n=0);break}return n>0?e.slice(0,n)+e.slice(s+1):e}var lP;function pW(e,t){var r=kh(e,t);if(!r)return e+"";var n=r[0],s=r[1],i=s-(lP=Math.max(-8,Math.min(8,Math.floor(s/3)))*3)+1,l=n.length;return i===l?n:i>l?n+new Array(i-l+1).join("0"):i>0?n.slice(0,i)+"."+n.slice(i):"0."+new Array(1-i).join("0")+kh(e,Math.max(0,t+i-1))[0]}function Xk(e,t){var r=kh(e,t);if(!r)return e+"";var n=r[0],s=r[1];return s<0?"0."+new Array(-s).join("0")+n:n.length>s+1?n.slice(0,s+1)+"."+n.slice(s+1):n+new Array(s-n.length+2).join("0")}const Zk={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:uW,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>Xk(e*100,t),r:Xk,s:pW,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function eN(e){return e}var tN=Array.prototype.map,rN=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function gW(e){var t=e.grouping===void 0||e.thousands===void 0?eN:dW(tN.call(e.grouping,Number),e.thousands+""),r=e.currency===void 0?"":e.currency[0]+"",n=e.currency===void 0?"":e.currency[1]+"",s=e.decimal===void 0?".":e.decimal+"",i=e.numerals===void 0?eN:fW(tN.call(e.numerals,String)),l=e.percent===void 0?"%":e.percent+"",u=e.minus===void 0?"":e.minus+"",d=e.nan===void 0?"NaN":e.nan+"";function m(p){p=Du(p);var y=p.fill,x=p.align,b=p.sign,j=p.symbol,S=p.zero,k=p.width,C=p.comma,N=p.precision,O=p.trim,P=p.type;P==="n"?(C=!0,P="g"):Zk[P]||(N===void 0&&(N=12),O=!0,P="g"),(S||y==="0"&&x==="=")&&(S=!0,y="0",x="=");var T=j==="$"?r:j==="#"&&/[boxX]/.test(P)?"0"+P.toLowerCase():"",D=j==="$"?n:/[%p]/.test(P)?l:"",q=Zk[P],F=/[defgprs%]/.test(P);N=N===void 0?6:/[gprs]/.test(P)?Math.max(1,Math.min(21,N)):Math.max(0,Math.min(20,N));function K(B){var Q=T,oe=D,ae,J,H;if(P==="c")oe=q(B)+oe,B="";else{B=+B;var ne=B<0||1/B<0;if(B=isNaN(B)?d:q(Math.abs(B),N),O&&(B=mW(B)),ne&&+B==0&&b!=="+"&&(ne=!1),Q=(ne?b==="("?b:u:b==="-"||b==="("?"":b)+Q,oe=(P==="s"?rN[8+lP/3]:"")+oe+(ne&&b==="("?")":""),F){for(ae=-1,J=B.length;++ae<J;)if(H=B.charCodeAt(ae),48>H||H>57){oe=(H===46?s+B.slice(ae+1):B.slice(ae))+oe,B=B.slice(0,ae);break}}}C&&!S&&(B=t(B,1/0));var ie=Q.length+B.length+oe.length,ge=ie<k?new Array(k-ie+1).join(y):"";switch(C&&S&&(B=t(ge+B,ge.length?k-oe.length:1/0),ge=""),x){case"<":B=Q+B+oe+ge;break;case"=":B=Q+ge+B+oe;break;case"^":B=ge.slice(0,ie=ge.length>>1)+Q+B+oe+ge.slice(ie);break;default:B=ge+Q+B+oe;break}return i(B)}return K.toString=function(){return p+""},K}function f(p,y){var x=m((p=Du(p),p.type="f",p)),b=Math.max(-8,Math.min(8,Math.floor(Xl(y)/3)))*3,j=Math.pow(10,-b),S=rN[8+b/3];return function(k){return x(j*k)+S}}return{format:m,formatPrefix:f}}var Nf,Rx,cP;yW({thousands:",",grouping:[3],currency:["$",""]});function yW(e){return Nf=gW(e),Rx=Nf.format,cP=Nf.formatPrefix,Nf}function vW(e){return Math.max(0,-Xl(Math.abs(e)))}function xW(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(Xl(t)/3)))*3-Xl(Math.abs(e)))}function wW(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,Xl(t)-Xl(e))+1}function uP(e,t,r,n){var s=h0(e,t,r),i;switch(n=Du(n??",f"),n.type){case"s":{var l=Math.max(Math.abs(e),Math.abs(t));return n.precision==null&&!isNaN(i=xW(s,l))&&(n.precision=i),cP(n,l)}case"":case"e":case"g":case"p":case"r":{n.precision==null&&!isNaN(i=wW(s,Math.max(Math.abs(e),Math.abs(t))))&&(n.precision=i-(n.type==="e"));break}case"f":case"%":{n.precision==null&&!isNaN(i=vW(s))&&(n.precision=i-(n.type==="%")*2);break}}return Rx(n)}function eo(e){var t=e.domain;return e.ticks=function(r){var n=t();return d0(n[0],n[n.length-1],r??10)},e.tickFormat=function(r,n){var s=t();return uP(s[0],s[s.length-1],r??10,n)},e.nice=function(r){r==null&&(r=10);var n=t(),s=0,i=n.length-1,l=n[s],u=n[i],d,m,f=10;for(u<l&&(m=l,l=u,u=m,m=s,s=i,i=m);f-- >0;){if(m=f0(l,u,r),m===d)return n[s]=l,n[i]=u,t(n);if(m>0)l=Math.floor(l/m)*m,u=Math.ceil(u/m)*m;else if(m<0)l=Math.ceil(l*m)/m,u=Math.floor(u*m)/m;else break;d=m}return e},e}function dP(){var e=Ix();return e.copy=function(){return Qu(e,dP())},ri.apply(e,arguments),eo(e)}function fP(e){var t;function r(n){return n==null||isNaN(n=+n)?t:n}return r.invert=r,r.domain=r.range=function(n){return arguments.length?(e=Array.from(n,_h),r):e.slice()},r.unknown=function(n){return arguments.length?(t=n,r):t},r.copy=function(){return fP(e).unknown(t)},e=arguments.length?Array.from(e,_h):[0,1],eo(r)}function hP(e,t){e=e.slice();var r=0,n=e.length-1,s=e[r],i=e[n],l;return i<s&&(l=r,r=n,n=l,l=s,s=i,i=l),e[r]=t.floor(s),e[n]=t.ceil(i),e}function nN(e){return Math.log(e)}function sN(e){return Math.exp(e)}function bW(e){return-Math.log(-e)}function jW(e){return-Math.exp(-e)}function SW(e){return isFinite(e)?+("1e"+e):e<0?0:e}function _W(e){return e===10?SW:e===Math.E?Math.exp:t=>Math.pow(e,t)}function kW(e){return e===Math.E?Math.log:e===10&&Math.log10||e===2&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}function iN(e){return(t,r)=>-e(-t,r)}function $x(e){const t=e(nN,sN),r=t.domain;let n=10,s,i;function l(){return s=kW(n),i=_W(n),r()[0]<0?(s=iN(s),i=iN(i),e(bW,jW)):e(nN,sN),t}return t.base=function(u){return arguments.length?(n=+u,l()):n},t.domain=function(u){return arguments.length?(r(u),l()):r()},t.ticks=u=>{const d=r();let m=d[0],f=d[d.length-1];const p=f<m;p&&([m,f]=[f,m]);let y=s(m),x=s(f),b,j;const S=u==null?10:+u;let k=[];if(!(n%1)&&x-y<S){if(y=Math.floor(y),x=Math.ceil(x),m>0){for(;y<=x;++y)for(b=1;b<n;++b)if(j=y<0?b/i(-y):b*i(y),!(j<m)){if(j>f)break;k.push(j)}}else for(;y<=x;++y)for(b=n-1;b>=1;--b)if(j=y>0?b/i(-y):b*i(y),!(j<m)){if(j>f)break;k.push(j)}k.length*2<S&&(k=d0(m,f,S))}else k=d0(y,x,Math.min(x-y,S)).map(i);return p?k.reverse():k},t.tickFormat=(u,d)=>{if(u==null&&(u=10),d==null&&(d=n===10?"s":","),typeof d!="function"&&(!(n%1)&&(d=Du(d)).precision==null&&(d.trim=!0),d=Rx(d)),u===1/0)return d;const m=Math.max(1,n*u/t.ticks().length);return f=>{let p=f/i(Math.round(s(f)));return p*n<n-.5&&(p*=n),p<=m?d(f):""}},t.nice=()=>r(hP(r(),{floor:u=>i(Math.floor(s(u))),ceil:u=>i(Math.ceil(s(u)))})),t}function mP(){const e=$x(ym()).domain([1,10]);return e.copy=()=>Qu(e,mP()).base(e.base()),ri.apply(e,arguments),e}function aN(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function oN(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function Mx(e){var t=1,r=e(aN(t),oN(t));return r.constant=function(n){return arguments.length?e(aN(t=+n),oN(t)):t},eo(r)}function pP(){var e=Mx(ym());return e.copy=function(){return Qu(e,pP()).constant(e.constant())},ri.apply(e,arguments)}function lN(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function NW(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function CW(e){return e<0?-e*e:e*e}function Fx(e){var t=e(Zn,Zn),r=1;function n(){return r===1?e(Zn,Zn):r===.5?e(NW,CW):e(lN(r),lN(1/r))}return t.exponent=function(s){return arguments.length?(r=+s,n()):r},eo(t)}function Lx(){var e=Fx(ym());return e.copy=function(){return Qu(e,Lx()).exponent(e.exponent())},ri.apply(e,arguments),e}function EW(){return Lx.apply(null,arguments).exponent(.5)}function cN(e){return Math.sign(e)*e*e}function AW(e){return Math.sign(e)*Math.sqrt(Math.abs(e))}function gP(){var e=Ix(),t=[0,1],r=!1,n;function s(i){var l=AW(e(i));return isNaN(l)?n:r?Math.round(l):l}return s.invert=function(i){return e.invert(cN(i))},s.domain=function(i){return arguments.length?(e.domain(i),s):e.domain()},s.range=function(i){return arguments.length?(e.range((t=Array.from(i,_h)).map(cN)),s):t.slice()},s.rangeRound=function(i){return s.range(i).round(!0)},s.round=function(i){return arguments.length?(r=!!i,s):r},s.clamp=function(i){return arguments.length?(e.clamp(i),s):e.clamp()},s.unknown=function(i){return arguments.length?(n=i,s):n},s.copy=function(){return gP(e.domain(),t).round(r).clamp(e.clamp()).unknown(n)},ri.apply(s,arguments),eo(s)}function yP(){var e=[],t=[],r=[],n;function s(){var l=0,u=Math.max(1,t.length);for(r=new Array(u-1);++l<u;)r[l-1]=I7(e,l/u);return i}function i(l){return l==null||isNaN(l=+l)?n:t[Yu(r,l)]}return i.invertExtent=function(l){var u=t.indexOf(l);return u<0?[NaN,NaN]:[u>0?r[u-1]:e[0],u<r.length?r[u]:e[e.length-1]]},i.domain=function(l){if(!arguments.length)return e.slice();e=[];for(let u of l)u!=null&&!isNaN(u=+u)&&e.push(u);return e.sort(Ya),s()},i.range=function(l){return arguments.length?(t=Array.from(l),s()):t.slice()},i.unknown=function(l){return arguments.length?(n=l,i):n},i.quantiles=function(){return r.slice()},i.copy=function(){return yP().domain(e).range(t).unknown(n)},ri.apply(i,arguments)}function vP(){var e=0,t=1,r=1,n=[.5],s=[0,1],i;function l(d){return d!=null&&d<=d?s[Yu(n,d,0,r)]:i}function u(){var d=-1;for(n=new Array(r);++d<r;)n[d]=((d+1)*t-(d-r)*e)/(r+1);return l}return l.domain=function(d){return arguments.length?([e,t]=d,e=+e,t=+t,u()):[e,t]},l.range=function(d){return arguments.length?(r=(s=Array.from(d)).length-1,u()):s.slice()},l.invertExtent=function(d){var m=s.indexOf(d);return m<0?[NaN,NaN]:m<1?[e,n[0]]:m>=r?[n[r-1],t]:[n[m-1],n[m]]},l.unknown=function(d){return arguments.length&&(i=d),l},l.thresholds=function(){return n.slice()},l.copy=function(){return vP().domain([e,t]).range(s).unknown(i)},ri.apply(eo(l),arguments)}function xP(){var e=[.5],t=[0,1],r,n=1;function s(i){return i!=null&&i<=i?t[Yu(e,i,0,n)]:r}return s.domain=function(i){return arguments.length?(e=Array.from(i),n=Math.min(e.length,t.length-1),s):e.slice()},s.range=function(i){return arguments.length?(t=Array.from(i),n=Math.min(e.length,t.length-1),s):t.slice()},s.invertExtent=function(i){var l=t.indexOf(i);return[e[l-1],e[l]]},s.unknown=function(i){return arguments.length?(r=i,s):r},s.copy=function(){return xP().domain(e).range(t).unknown(r)},ri.apply(s,arguments)}const Hy=new Date,Ky=new Date;function an(e,t,r,n){function s(i){return e(i=arguments.length===0?new Date:new Date(+i)),i}return s.floor=i=>(e(i=new Date(+i)),i),s.ceil=i=>(e(i=new Date(i-1)),t(i,1),e(i),i),s.round=i=>{const l=s(i),u=s.ceil(i);return i-l<u-i?l:u},s.offset=(i,l)=>(t(i=new Date(+i),l==null?1:Math.floor(l)),i),s.range=(i,l,u)=>{const d=[];if(i=s.ceil(i),u=u==null?1:Math.floor(u),!(i<l)||!(u>0))return d;let m;do d.push(m=new Date(+i)),t(i,u),e(i);while(m<i&&i<l);return d},s.filter=i=>an(l=>{if(l>=l)for(;e(l),!i(l);)l.setTime(l-1)},(l,u)=>{if(l>=l)if(u<0)for(;++u<=0;)for(;t(l,-1),!i(l););else for(;--u>=0;)for(;t(l,1),!i(l););}),r&&(s.count=(i,l)=>(Hy.setTime(+i),Ky.setTime(+l),e(Hy),e(Ky),Math.floor(r(Hy,Ky))),s.every=i=>(i=Math.floor(i),!isFinite(i)||!(i>0)?null:i>1?s.filter(n?l=>n(l)%i===0:l=>s.count(0,l)%i===0):s)),s}const Nh=an(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);Nh.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?an(t=>{t.setTime(Math.floor(t/e)*e)},(t,r)=>{t.setTime(+t+r*e)},(t,r)=>(r-t)/e):Nh);Nh.range;const Zi=1e3,Js=Zi*60,ea=Js*60,da=ea*24,zx=da*7,uN=da*30,Gy=da*365,Eo=an(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*Zi)},(e,t)=>(t-e)/Zi,e=>e.getUTCSeconds());Eo.range;const Ux=an(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*Zi)},(e,t)=>{e.setTime(+e+t*Js)},(e,t)=>(t-e)/Js,e=>e.getMinutes());Ux.range;const Bx=an(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*Js)},(e,t)=>(t-e)/Js,e=>e.getUTCMinutes());Bx.range;const Wx=an(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*Zi-e.getMinutes()*Js)},(e,t)=>{e.setTime(+e+t*ea)},(e,t)=>(t-e)/ea,e=>e.getHours());Wx.range;const Vx=an(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*ea)},(e,t)=>(t-e)/ea,e=>e.getUTCHours());Vx.range;const Xu=an(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*Js)/da,e=>e.getDate()-1);Xu.range;const vm=an(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/da,e=>e.getUTCDate()-1);vm.range;const wP=an(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/da,e=>Math.floor(e/da));wP.range;function Ko(e){return an(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(t,r)=>{t.setDate(t.getDate()+r*7)},(t,r)=>(r-t-(r.getTimezoneOffset()-t.getTimezoneOffset())*Js)/zx)}const xm=Ko(0),Ch=Ko(1),PW=Ko(2),OW=Ko(3),Zl=Ko(4),TW=Ko(5),IW=Ko(6);xm.range;Ch.range;PW.range;OW.range;Zl.range;TW.range;IW.range;function Go(e){return an(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(t,r)=>{t.setUTCDate(t.getUTCDate()+r*7)},(t,r)=>(r-t)/zx)}const wm=Go(0),Eh=Go(1),DW=Go(2),RW=Go(3),ec=Go(4),$W=Go(5),MW=Go(6);wm.range;Eh.range;DW.range;RW.range;ec.range;$W.range;MW.range;const qx=an(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12,e=>e.getMonth());qx.range;const Hx=an(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth());Hx.range;const fa=an(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());fa.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:an(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,r)=>{t.setFullYear(t.getFullYear()+r*e)});fa.range;const ha=an(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());ha.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:an(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,r)=>{t.setUTCFullYear(t.getUTCFullYear()+r*e)});ha.range;function bP(e,t,r,n,s,i){const l=[[Eo,1,Zi],[Eo,5,5*Zi],[Eo,15,15*Zi],[Eo,30,30*Zi],[i,1,Js],[i,5,5*Js],[i,15,15*Js],[i,30,30*Js],[s,1,ea],[s,3,3*ea],[s,6,6*ea],[s,12,12*ea],[n,1,da],[n,2,2*da],[r,1,zx],[t,1,uN],[t,3,3*uN],[e,1,Gy]];function u(m,f,p){const y=f<m;y&&([m,f]=[f,m]);const x=p&&typeof p.range=="function"?p:d(m,f,p),b=x?x.range(m,+f+1):[];return y?b.reverse():b}function d(m,f,p){const y=Math.abs(f-m)/p,x=Cx(([,,S])=>S).right(l,y);if(x===l.length)return e.every(h0(m/Gy,f/Gy,p));if(x===0)return Nh.every(Math.max(h0(m,f,p),1));const[b,j]=l[y/l[x-1][2]<l[x][2]/y?x-1:x];return b.every(j)}return[u,d]}const[FW,LW]=bP(ha,Hx,wm,wP,Vx,Bx),[zW,UW]=bP(fa,qx,xm,Xu,Wx,Ux);function Yy(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function Jy(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function au(e,t,r){return{y:e,m:t,d:r,H:0,M:0,S:0,L:0}}function BW(e){var t=e.dateTime,r=e.date,n=e.time,s=e.periods,i=e.days,l=e.shortDays,u=e.months,d=e.shortMonths,m=ou(s),f=lu(s),p=ou(i),y=lu(i),x=ou(l),b=lu(l),j=ou(u),S=lu(u),k=ou(d),C=lu(d),N={a:ne,A:ie,b:ge,B:ve,c:null,d:gN,e:gN,f:d9,g:b9,G:S9,H:l9,I:c9,j:u9,L:jP,m:f9,M:h9,p:I,q:V,Q:xN,s:wN,S:m9,u:p9,U:g9,V:y9,w:v9,W:x9,x:null,X:null,y:w9,Y:j9,Z:_9,"%":vN},O={a:Ae,A:X,b:re,B:de,c:null,d:yN,e:yN,f:E9,g:F9,G:z9,H:k9,I:N9,j:C9,L:_P,m:A9,M:P9,p:xe,q:ye,Q:xN,s:wN,S:O9,u:T9,U:I9,V:D9,w:R9,W:$9,x:null,X:null,y:M9,Y:L9,Z:U9,"%":vN},P={a:K,A:B,b:Q,B:oe,c:ae,d:mN,e:mN,f:s9,g:hN,G:fN,H:pN,I:pN,j:e9,L:n9,m:ZW,M:t9,p:F,q:XW,Q:a9,s:o9,S:r9,u:KW,U:GW,V:YW,w:HW,W:JW,x:J,X:H,y:hN,Y:fN,Z:QW,"%":i9};N.x=T(r,N),N.X=T(n,N),N.c=T(t,N),O.x=T(r,O),O.X=T(n,O),O.c=T(t,O);function T(U,$e){return function(Ze){var Z=[],Pe=-1,Ve=0,ft=U.length,gt,Ct,_t;for(Ze instanceof Date||(Ze=new Date(+Ze));++Pe<ft;)U.charCodeAt(Pe)===37&&(Z.push(U.slice(Ve,Pe)),(Ct=dN[gt=U.charAt(++Pe)])!=null?gt=U.charAt(++Pe):Ct=gt==="e"?" ":"0",(_t=$e[gt])&&(gt=_t(Ze,Ct)),Z.push(gt),Ve=Pe+1);return Z.push(U.slice(Ve,Pe)),Z.join("")}}function D(U,$e){return function(Ze){var Z=au(1900,void 0,1),Pe=q(Z,U,Ze+="",0),Ve,ft;if(Pe!=Ze.length)return null;if("Q"in Z)return new Date(Z.Q);if("s"in Z)return new Date(Z.s*1e3+("L"in Z?Z.L:0));if($e&&!("Z"in Z)&&(Z.Z=0),"p"in Z&&(Z.H=Z.H%12+Z.p*12),Z.m===void 0&&(Z.m="q"in Z?Z.q:0),"V"in Z){if(Z.V<1||Z.V>53)return null;"w"in Z||(Z.w=1),"Z"in Z?(Ve=Jy(au(Z.y,0,1)),ft=Ve.getUTCDay(),Ve=ft>4||ft===0?Eh.ceil(Ve):Eh(Ve),Ve=vm.offset(Ve,(Z.V-1)*7),Z.y=Ve.getUTCFullYear(),Z.m=Ve.getUTCMonth(),Z.d=Ve.getUTCDate()+(Z.w+6)%7):(Ve=Yy(au(Z.y,0,1)),ft=Ve.getDay(),Ve=ft>4||ft===0?Ch.ceil(Ve):Ch(Ve),Ve=Xu.offset(Ve,(Z.V-1)*7),Z.y=Ve.getFullYear(),Z.m=Ve.getMonth(),Z.d=Ve.getDate()+(Z.w+6)%7)}else("W"in Z||"U"in Z)&&("w"in Z||(Z.w="u"in Z?Z.u%7:"W"in Z?1:0),ft="Z"in Z?Jy(au(Z.y,0,1)).getUTCDay():Yy(au(Z.y,0,1)).getDay(),Z.m=0,Z.d="W"in Z?(Z.w+6)%7+Z.W*7-(ft+5)%7:Z.w+Z.U*7-(ft+6)%7);return"Z"in Z?(Z.H+=Z.Z/100|0,Z.M+=Z.Z%100,Jy(Z)):Yy(Z)}}function q(U,$e,Ze,Z){for(var Pe=0,Ve=$e.length,ft=Ze.length,gt,Ct;Pe<Ve;){if(Z>=ft)return-1;if(gt=$e.charCodeAt(Pe++),gt===37){if(gt=$e.charAt(Pe++),Ct=P[gt in dN?$e.charAt(Pe++):gt],!Ct||(Z=Ct(U,Ze,Z))<0)return-1}else if(gt!=Ze.charCodeAt(Z++))return-1}return Z}function F(U,$e,Ze){var Z=m.exec($e.slice(Ze));return Z?(U.p=f.get(Z[0].toLowerCase()),Ze+Z[0].length):-1}function K(U,$e,Ze){var Z=x.exec($e.slice(Ze));return Z?(U.w=b.get(Z[0].toLowerCase()),Ze+Z[0].length):-1}function B(U,$e,Ze){var Z=p.exec($e.slice(Ze));return Z?(U.w=y.get(Z[0].toLowerCase()),Ze+Z[0].length):-1}function Q(U,$e,Ze){var Z=k.exec($e.slice(Ze));return Z?(U.m=C.get(Z[0].toLowerCase()),Ze+Z[0].length):-1}function oe(U,$e,Ze){var Z=j.exec($e.slice(Ze));return Z?(U.m=S.get(Z[0].toLowerCase()),Ze+Z[0].length):-1}function ae(U,$e,Ze){return q(U,t,$e,Ze)}function J(U,$e,Ze){return q(U,r,$e,Ze)}function H(U,$e,Ze){return q(U,n,$e,Ze)}function ne(U){return l[U.getDay()]}function ie(U){return i[U.getDay()]}function ge(U){return d[U.getMonth()]}function ve(U){return u[U.getMonth()]}function I(U){return s[+(U.getHours()>=12)]}function V(U){return 1+~~(U.getMonth()/3)}function Ae(U){return l[U.getUTCDay()]}function X(U){return i[U.getUTCDay()]}function re(U){return d[U.getUTCMonth()]}function de(U){return u[U.getUTCMonth()]}function xe(U){return s[+(U.getUTCHours()>=12)]}function ye(U){return 1+~~(U.getUTCMonth()/3)}return{format:function(U){var $e=T(U+="",N);return $e.toString=function(){return U},$e},parse:function(U){var $e=D(U+="",!1);return $e.toString=function(){return U},$e},utcFormat:function(U){var $e=T(U+="",O);return $e.toString=function(){return U},$e},utcParse:function(U){var $e=D(U+="",!0);return $e.toString=function(){return U},$e}}}var dN={"-":"",_:" ",0:"0"},jn=/^\s*\d+/,WW=/^%/,VW=/[\\^$*+?|[\]().{}]/g;function Bt(e,t,r){var n=e<0?"-":"",s=(n?-e:e)+"",i=s.length;return n+(i<r?new Array(r-i+1).join(t)+s:s)}function qW(e){return e.replace(VW,"\\$&")}function ou(e){return new RegExp("^(?:"+e.map(qW).join("|")+")","i")}function lu(e){return new Map(e.map((t,r)=>[t.toLowerCase(),r]))}function HW(e,t,r){var n=jn.exec(t.slice(r,r+1));return n?(e.w=+n[0],r+n[0].length):-1}function KW(e,t,r){var n=jn.exec(t.slice(r,r+1));return n?(e.u=+n[0],r+n[0].length):-1}function GW(e,t,r){var n=jn.exec(t.slice(r,r+2));return n?(e.U=+n[0],r+n[0].length):-1}function YW(e,t,r){var n=jn.exec(t.slice(r,r+2));return n?(e.V=+n[0],r+n[0].length):-1}function JW(e,t,r){var n=jn.exec(t.slice(r,r+2));return n?(e.W=+n[0],r+n[0].length):-1}function fN(e,t,r){var n=jn.exec(t.slice(r,r+4));return n?(e.y=+n[0],r+n[0].length):-1}function hN(e,t,r){var n=jn.exec(t.slice(r,r+2));return n?(e.y=+n[0]+(+n[0]>68?1900:2e3),r+n[0].length):-1}function QW(e,t,r){var n=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(r,r+6));return n?(e.Z=n[1]?0:-(n[2]+(n[3]||"00")),r+n[0].length):-1}function XW(e,t,r){var n=jn.exec(t.slice(r,r+1));return n?(e.q=n[0]*3-3,r+n[0].length):-1}function ZW(e,t,r){var n=jn.exec(t.slice(r,r+2));return n?(e.m=n[0]-1,r+n[0].length):-1}function mN(e,t,r){var n=jn.exec(t.slice(r,r+2));return n?(e.d=+n[0],r+n[0].length):-1}function e9(e,t,r){var n=jn.exec(t.slice(r,r+3));return n?(e.m=0,e.d=+n[0],r+n[0].length):-1}function pN(e,t,r){var n=jn.exec(t.slice(r,r+2));return n?(e.H=+n[0],r+n[0].length):-1}function t9(e,t,r){var n=jn.exec(t.slice(r,r+2));return n?(e.M=+n[0],r+n[0].length):-1}function r9(e,t,r){var n=jn.exec(t.slice(r,r+2));return n?(e.S=+n[0],r+n[0].length):-1}function n9(e,t,r){var n=jn.exec(t.slice(r,r+3));return n?(e.L=+n[0],r+n[0].length):-1}function s9(e,t,r){var n=jn.exec(t.slice(r,r+6));return n?(e.L=Math.floor(n[0]/1e3),r+n[0].length):-1}function i9(e,t,r){var n=WW.exec(t.slice(r,r+1));return n?r+n[0].length:-1}function a9(e,t,r){var n=jn.exec(t.slice(r));return n?(e.Q=+n[0],r+n[0].length):-1}function o9(e,t,r){var n=jn.exec(t.slice(r));return n?(e.s=+n[0],r+n[0].length):-1}function gN(e,t){return Bt(e.getDate(),t,2)}function l9(e,t){return Bt(e.getHours(),t,2)}function c9(e,t){return Bt(e.getHours()%12||12,t,2)}function u9(e,t){return Bt(1+Xu.count(fa(e),e),t,3)}function jP(e,t){return Bt(e.getMilliseconds(),t,3)}function d9(e,t){return jP(e,t)+"000"}function f9(e,t){return Bt(e.getMonth()+1,t,2)}function h9(e,t){return Bt(e.getMinutes(),t,2)}function m9(e,t){return Bt(e.getSeconds(),t,2)}function p9(e){var t=e.getDay();return t===0?7:t}function g9(e,t){return Bt(xm.count(fa(e)-1,e),t,2)}function SP(e){var t=e.getDay();return t>=4||t===0?Zl(e):Zl.ceil(e)}function y9(e,t){return e=SP(e),Bt(Zl.count(fa(e),e)+(fa(e).getDay()===4),t,2)}function v9(e){return e.getDay()}function x9(e,t){return Bt(Ch.count(fa(e)-1,e),t,2)}function w9(e,t){return Bt(e.getFullYear()%100,t,2)}function b9(e,t){return e=SP(e),Bt(e.getFullYear()%100,t,2)}function j9(e,t){return Bt(e.getFullYear()%1e4,t,4)}function S9(e,t){var r=e.getDay();return e=r>=4||r===0?Zl(e):Zl.ceil(e),Bt(e.getFullYear()%1e4,t,4)}function _9(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+Bt(t/60|0,"0",2)+Bt(t%60,"0",2)}function yN(e,t){return Bt(e.getUTCDate(),t,2)}function k9(e,t){return Bt(e.getUTCHours(),t,2)}function N9(e,t){return Bt(e.getUTCHours()%12||12,t,2)}function C9(e,t){return Bt(1+vm.count(ha(e),e),t,3)}function _P(e,t){return Bt(e.getUTCMilliseconds(),t,3)}function E9(e,t){return _P(e,t)+"000"}function A9(e,t){return Bt(e.getUTCMonth()+1,t,2)}function P9(e,t){return Bt(e.getUTCMinutes(),t,2)}function O9(e,t){return Bt(e.getUTCSeconds(),t,2)}function T9(e){var t=e.getUTCDay();return t===0?7:t}function I9(e,t){return Bt(wm.count(ha(e)-1,e),t,2)}function kP(e){var t=e.getUTCDay();return t>=4||t===0?ec(e):ec.ceil(e)}function D9(e,t){return e=kP(e),Bt(ec.count(ha(e),e)+(ha(e).getUTCDay()===4),t,2)}function R9(e){return e.getUTCDay()}function $9(e,t){return Bt(Eh.count(ha(e)-1,e),t,2)}function M9(e,t){return Bt(e.getUTCFullYear()%100,t,2)}function F9(e,t){return e=kP(e),Bt(e.getUTCFullYear()%100,t,2)}function L9(e,t){return Bt(e.getUTCFullYear()%1e4,t,4)}function z9(e,t){var r=e.getUTCDay();return e=r>=4||r===0?ec(e):ec.ceil(e),Bt(e.getUTCFullYear()%1e4,t,4)}function U9(){return"+0000"}function vN(){return"%"}function xN(e){return+e}function wN(e){return Math.floor(+e/1e3)}var Tl,NP,CP;B9({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function B9(e){return Tl=BW(e),NP=Tl.format,Tl.parse,CP=Tl.utcFormat,Tl.utcParse,Tl}function W9(e){return new Date(e)}function V9(e){return e instanceof Date?+e:+new Date(+e)}function Kx(e,t,r,n,s,i,l,u,d,m){var f=Ix(),p=f.invert,y=f.domain,x=m(".%L"),b=m(":%S"),j=m("%I:%M"),S=m("%I %p"),k=m("%a %d"),C=m("%b %d"),N=m("%B"),O=m("%Y");function P(T){return(d(T)<T?x:u(T)<T?b:l(T)<T?j:i(T)<T?S:n(T)<T?s(T)<T?k:C:r(T)<T?N:O)(T)}return f.invert=function(T){return new Date(p(T))},f.domain=function(T){return arguments.length?y(Array.from(T,V9)):y().map(W9)},f.ticks=function(T){var D=y();return e(D[0],D[D.length-1],T??10)},f.tickFormat=function(T,D){return D==null?P:m(D)},f.nice=function(T){var D=y();return(!T||typeof T.range!="function")&&(T=t(D[0],D[D.length-1],T??10)),T?y(hP(D,T)):f},f.copy=function(){return Qu(f,Kx(e,t,r,n,s,i,l,u,d,m))},f}function q9(){return ri.apply(Kx(zW,UW,fa,qx,xm,Xu,Wx,Ux,Eo,NP).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function H9(){return ri.apply(Kx(FW,LW,ha,Hx,wm,vm,Vx,Bx,Eo,CP).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function bm(){var e=0,t=1,r,n,s,i,l=Zn,u=!1,d;function m(p){return p==null||isNaN(p=+p)?d:l(s===0?.5:(p=(i(p)-r)*s,u?Math.max(0,Math.min(1,p)):p))}m.domain=function(p){return arguments.length?([e,t]=p,r=i(e=+e),n=i(t=+t),s=r===n?0:1/(n-r),m):[e,t]},m.clamp=function(p){return arguments.length?(u=!!p,m):u},m.interpolator=function(p){return arguments.length?(l=p,m):l};function f(p){return function(y){var x,b;return arguments.length?([x,b]=y,l=p(x,b),m):[l(0),l(1)]}}return m.range=f(pc),m.rangeRound=f(Tx),m.unknown=function(p){return arguments.length?(d=p,m):d},function(p){return i=p,r=p(e),n=p(t),s=r===n?0:1/(n-r),m}}function to(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function EP(){var e=eo(bm()(Zn));return e.copy=function(){return to(e,EP())},xa.apply(e,arguments)}function AP(){var e=$x(bm()).domain([1,10]);return e.copy=function(){return to(e,AP()).base(e.base())},xa.apply(e,arguments)}function PP(){var e=Mx(bm());return e.copy=function(){return to(e,PP()).constant(e.constant())},xa.apply(e,arguments)}function Gx(){var e=Fx(bm());return e.copy=function(){return to(e,Gx()).exponent(e.exponent())},xa.apply(e,arguments)}function K9(){return Gx.apply(null,arguments).exponent(.5)}function OP(){var e=[],t=Zn;function r(n){if(n!=null&&!isNaN(n=+n))return t((Yu(e,n,1)-1)/(e.length-1))}return r.domain=function(n){if(!arguments.length)return e.slice();e=[];for(let s of n)s!=null&&!isNaN(s=+s)&&e.push(s);return e.sort(Ya),r},r.interpolator=function(n){return arguments.length?(t=n,r):t},r.range=function(){return e.map((n,s)=>t(s/(e.length-1)))},r.quantiles=function(n){return Array.from({length:n+1},(s,i)=>T7(e,i/n))},r.copy=function(){return OP(t).domain(e)},xa.apply(r,arguments)}function jm(){var e=0,t=.5,r=1,n=1,s,i,l,u,d,m=Zn,f,p=!1,y;function x(j){return isNaN(j=+j)?y:(j=.5+((j=+f(j))-i)*(n*j<n*i?u:d),m(p?Math.max(0,Math.min(1,j)):j))}x.domain=function(j){return arguments.length?([e,t,r]=j,s=f(e=+e),i=f(t=+t),l=f(r=+r),u=s===i?0:.5/(i-s),d=i===l?0:.5/(l-i),n=i<s?-1:1,x):[e,t,r]},x.clamp=function(j){return arguments.length?(p=!!j,x):p},x.interpolator=function(j){return arguments.length?(m=j,x):m};function b(j){return function(S){var k,C,N;return arguments.length?([k,C,N]=S,m=iW(j,[k,C,N]),x):[m(0),m(.5),m(1)]}}return x.range=b(pc),x.rangeRound=b(Tx),x.unknown=function(j){return arguments.length?(y=j,x):y},function(j){return f=j,s=j(e),i=j(t),l=j(r),u=s===i?0:.5/(i-s),d=i===l?0:.5/(l-i),n=i<s?-1:1,x}}function TP(){var e=eo(jm()(Zn));return e.copy=function(){return to(e,TP())},xa.apply(e,arguments)}function IP(){var e=$x(jm()).domain([.1,1,10]);return e.copy=function(){return to(e,IP()).base(e.base())},xa.apply(e,arguments)}function DP(){var e=Mx(jm());return e.copy=function(){return to(e,DP()).constant(e.constant())},xa.apply(e,arguments)}function Yx(){var e=Fx(jm());return e.copy=function(){return to(e,Yx()).exponent(e.exponent())},xa.apply(e,arguments)}function G9(){return Yx.apply(null,arguments).exponent(.5)}const hu=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:Ax,scaleDiverging:TP,scaleDivergingLog:IP,scaleDivergingPow:Yx,scaleDivergingSqrt:G9,scaleDivergingSymlog:DP,scaleIdentity:fP,scaleImplicit:m0,scaleLinear:dP,scaleLog:mP,scaleOrdinal:Ex,scalePoint:R7,scalePow:Lx,scaleQuantile:yP,scaleQuantize:vP,scaleRadial:gP,scaleSequential:EP,scaleSequentialLog:AP,scaleSequentialPow:Gx,scaleSequentialQuantile:OP,scaleSequentialSqrt:K9,scaleSequentialSymlog:PP,scaleSqrt:EW,scaleSymlog:pP,scaleThreshold:xP,scaleTime:q9,scaleUtc:H9,tickFormat:uP},Symbol.toStringTag,{value:"Module"}));var ro=e=>e.chartData,Y9=pe([ro],e=>{var t=e.chartData!=null?e.chartData.length-1:0;return{chartData:e.chartData,computedData:e.computedData,dataEndIndex:t,dataStartIndex:0}}),Jx=(e,t,r,n)=>n?Y9(e):ro(e);function Lo(e){if(Array.isArray(e)&&e.length===2){var[t,r]=e;if(Lr(t)&&Lr(r))return!0}return!1}function bN(e,t,r){return r?e:[Math.min(e[0],t[0]),Math.max(e[1],t[1])]}function RP(e,t){if(t&&typeof e!="function"&&Array.isArray(e)&&e.length===2){var[r,n]=e,s,i;if(Lr(r))s=r;else if(typeof r=="function")return;if(Lr(n))i=n;else if(typeof n=="function")return;var l=[s,i];if(Lo(l))return l}}function J9(e,t,r){if(!(!r&&t==null)){if(typeof e=="function"&&t!=null)try{var n=e(t,r);if(Lo(n))return bN(n,t,r)}catch{}if(Array.isArray(e)&&e.length===2){var[s,i]=e,l,u;if(s==="auto")t!=null&&(l=Math.min(...t));else if(lt(s))l=s;else if(typeof s=="function")try{t!=null&&(l=s(t==null?void 0:t[0]))}catch{}else if(typeof s=="string"&&rk.test(s)){var d=rk.exec(s);if(d==null||t==null)l=void 0;else{var m=+d[1];l=t[0]-m}}else l=t==null?void 0:t[0];if(i==="auto")t!=null&&(u=Math.max(...t));else if(lt(i))u=i;else if(typeof i=="function")try{t!=null&&(u=i(t==null?void 0:t[1]))}catch{}else if(typeof i=="string"&&nk.test(i)){var f=nk.exec(i);if(f==null||t==null)u=void 0;else{var p=+f[1];u=t[1]+p}}else u=t==null?void 0:t[1];var y=[l,u];if(Lo(y))return t==null?y:bN(y,t,r)}}}var gc=1e9,Q9={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},Xx,yr=!0,ei="[DecimalError] ",Ro=ei+"Invalid argument: ",Qx=ei+"Exponent out of range: ",yc=Math.floor,jo=Math.pow,X9=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,Ps,vn=1e7,ur=7,$P=9007199254740991,Ah=yc($P/ur),He={};He.absoluteValue=He.abs=function(){var e=new this.constructor(this);return e.s&&(e.s=1),e};He.comparedTo=He.cmp=function(e){var t,r,n,s,i=this;if(e=new i.constructor(e),i.s!==e.s)return i.s||-e.s;if(i.e!==e.e)return i.e>e.e^i.s<0?1:-1;for(n=i.d.length,s=e.d.length,t=0,r=n<s?n:s;t<r;++t)if(i.d[t]!==e.d[t])return i.d[t]>e.d[t]^i.s<0?1:-1;return n===s?0:n>s^i.s<0?1:-1};He.decimalPlaces=He.dp=function(){var e=this,t=e.d.length-1,r=(t-e.e)*ur;if(t=e.d[t],t)for(;t%10==0;t/=10)r--;return r<0?0:r};He.dividedBy=He.div=function(e){return sa(this,new this.constructor(e))};He.dividedToIntegerBy=He.idiv=function(e){var t=this,r=t.constructor;return Zt(sa(t,new r(e),0,1),r.precision)};He.equals=He.eq=function(e){return!this.cmp(e)};He.exponent=function(){return Jr(this)};He.greaterThan=He.gt=function(e){return this.cmp(e)>0};He.greaterThanOrEqualTo=He.gte=function(e){return this.cmp(e)>=0};He.isInteger=He.isint=function(){return this.e>this.d.length-2};He.isNegative=He.isneg=function(){return this.s<0};He.isPositive=He.ispos=function(){return this.s>0};He.isZero=function(){return this.s===0};He.lessThan=He.lt=function(e){return this.cmp(e)<0};He.lessThanOrEqualTo=He.lte=function(e){return this.cmp(e)<1};He.logarithm=He.log=function(e){var t,r=this,n=r.constructor,s=n.precision,i=s+5;if(e===void 0)e=new n(10);else if(e=new n(e),e.s<1||e.eq(Ps))throw Error(ei+"NaN");if(r.s<1)throw Error(ei+(r.s?"NaN":"-Infinity"));return r.eq(Ps)?new n(0):(yr=!1,t=sa(Ru(r,i),Ru(e,i),i),yr=!0,Zt(t,s))};He.minus=He.sub=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?LP(t,e):MP(t,(e.s=-e.s,e))};He.modulo=He.mod=function(e){var t,r=this,n=r.constructor,s=n.precision;if(e=new n(e),!e.s)throw Error(ei+"NaN");return r.s?(yr=!1,t=sa(r,e,0,1).times(e),yr=!0,r.minus(t)):Zt(new n(r),s)};He.naturalExponential=He.exp=function(){return FP(this)};He.naturalLogarithm=He.ln=function(){return Ru(this)};He.negated=He.neg=function(){var e=new this.constructor(this);return e.s=-e.s||0,e};He.plus=He.add=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?MP(t,e):LP(t,(e.s=-e.s,e))};He.precision=He.sd=function(e){var t,r,n,s=this;if(e!==void 0&&e!==!!e&&e!==1&&e!==0)throw Error(Ro+e);if(t=Jr(s)+1,n=s.d.length-1,r=n*ur+1,n=s.d[n],n){for(;n%10==0;n/=10)r--;for(n=s.d[0];n>=10;n/=10)r++}return e&&t>r?t:r};He.squareRoot=He.sqrt=function(){var e,t,r,n,s,i,l,u=this,d=u.constructor;if(u.s<1){if(!u.s)return new d(0);throw Error(ei+"NaN")}for(e=Jr(u),yr=!1,s=Math.sqrt(+u),s==0||s==1/0?(t=Oi(u.d),(t.length+e)%2==0&&(t+="0"),s=Math.sqrt(t),e=yc((e+1)/2)-(e<0||e%2),s==1/0?t="5e"+e:(t=s.toExponential(),t=t.slice(0,t.indexOf("e")+1)+e),n=new d(t)):n=new d(s.toString()),r=d.precision,s=l=r+3;;)if(i=n,n=i.plus(sa(u,i,l+2)).times(.5),Oi(i.d).slice(0,l)===(t=Oi(n.d)).slice(0,l)){if(t=t.slice(l-3,l+1),s==l&&t=="4999"){if(Zt(i,r+1,0),i.times(i).eq(u)){n=i;break}}else if(t!="9999")break;l+=4}return yr=!0,Zt(n,r)};He.times=He.mul=function(e){var t,r,n,s,i,l,u,d,m,f=this,p=f.constructor,y=f.d,x=(e=new p(e)).d;if(!f.s||!e.s)return new p(0);for(e.s*=f.s,r=f.e+e.e,d=y.length,m=x.length,d<m&&(i=y,y=x,x=i,l=d,d=m,m=l),i=[],l=d+m,n=l;n--;)i.push(0);for(n=m;--n>=0;){for(t=0,s=d+n;s>n;)u=i[s]+x[n]*y[s-n-1]+t,i[s--]=u%vn|0,t=u/vn|0;i[s]=(i[s]+t)%vn|0}for(;!i[--l];)i.pop();return t?++r:i.shift(),e.d=i,e.e=r,yr?Zt(e,p.precision):e};He.toDecimalPlaces=He.todp=function(e,t){var r=this,n=r.constructor;return r=new n(r),e===void 0?r:($i(e,0,gc),t===void 0?t=n.rounding:$i(t,0,8),Zt(r,e+Jr(r)+1,t))};He.toExponential=function(e,t){var r,n=this,s=n.constructor;return e===void 0?r=zo(n,!0):($i(e,0,gc),t===void 0?t=s.rounding:$i(t,0,8),n=Zt(new s(n),e+1,t),r=zo(n,!0,e+1)),r};He.toFixed=function(e,t){var r,n,s=this,i=s.constructor;return e===void 0?zo(s):($i(e,0,gc),t===void 0?t=i.rounding:$i(t,0,8),n=Zt(new i(s),e+Jr(s)+1,t),r=zo(n.abs(),!1,e+Jr(n)+1),s.isneg()&&!s.isZero()?"-"+r:r)};He.toInteger=He.toint=function(){var e=this,t=e.constructor;return Zt(new t(e),Jr(e)+1,t.rounding)};He.toNumber=function(){return+this};He.toPower=He.pow=function(e){var t,r,n,s,i,l,u=this,d=u.constructor,m=12,f=+(e=new d(e));if(!e.s)return new d(Ps);if(u=new d(u),!u.s){if(e.s<1)throw Error(ei+"Infinity");return u}if(u.eq(Ps))return u;if(n=d.precision,e.eq(Ps))return Zt(u,n);if(t=e.e,r=e.d.length-1,l=t>=r,i=u.s,l){if((r=f<0?-f:f)<=$P){for(s=new d(Ps),t=Math.ceil(n/ur+4),yr=!1;r%2&&(s=s.times(u),SN(s.d,t)),r=yc(r/2),r!==0;)u=u.times(u),SN(u.d,t);return yr=!0,e.s<0?new d(Ps).div(s):Zt(s,n)}}else if(i<0)throw Error(ei+"NaN");return i=i<0&&e.d[Math.max(t,r)]&1?-1:1,u.s=1,yr=!1,s=e.times(Ru(u,n+m)),yr=!0,s=FP(s),s.s=i,s};He.toPrecision=function(e,t){var r,n,s=this,i=s.constructor;return e===void 0?(r=Jr(s),n=zo(s,r<=i.toExpNeg||r>=i.toExpPos)):($i(e,1,gc),t===void 0?t=i.rounding:$i(t,0,8),s=Zt(new i(s),e,t),r=Jr(s),n=zo(s,e<=r||r<=i.toExpNeg,e)),n};He.toSignificantDigits=He.tosd=function(e,t){var r=this,n=r.constructor;return e===void 0?(e=n.precision,t=n.rounding):($i(e,1,gc),t===void 0?t=n.rounding:$i(t,0,8)),Zt(new n(r),e,t)};He.toString=He.valueOf=He.val=He.toJSON=He[Symbol.for("nodejs.util.inspect.custom")]=function(){var e=this,t=Jr(e),r=e.constructor;return zo(e,t<=r.toExpNeg||t>=r.toExpPos)};function MP(e,t){var r,n,s,i,l,u,d,m,f=e.constructor,p=f.precision;if(!e.s||!t.s)return t.s||(t=new f(e)),yr?Zt(t,p):t;if(d=e.d,m=t.d,l=e.e,s=t.e,d=d.slice(),i=l-s,i){for(i<0?(n=d,i=-i,u=m.length):(n=m,s=l,u=d.length),l=Math.ceil(p/ur),u=l>u?l+1:u+1,i>u&&(i=u,n.length=1),n.reverse();i--;)n.push(0);n.reverse()}for(u=d.length,i=m.length,u-i<0&&(i=u,n=m,m=d,d=n),r=0;i;)r=(d[--i]=d[i]+m[i]+r)/vn|0,d[i]%=vn;for(r&&(d.unshift(r),++s),u=d.length;d[--u]==0;)d.pop();return t.d=d,t.e=s,yr?Zt(t,p):t}function $i(e,t,r){if(e!==~~e||e<t||e>r)throw Error(Ro+e)}function Oi(e){var t,r,n,s=e.length-1,i="",l=e[0];if(s>0){for(i+=l,t=1;t<s;t++)n=e[t]+"",r=ur-n.length,r&&(i+=Wa(r)),i+=n;l=e[t],n=l+"",r=ur-n.length,r&&(i+=Wa(r))}else if(l===0)return"0";for(;l%10===0;)l/=10;return i+l}var sa=(function(){function e(n,s){var i,l=0,u=n.length;for(n=n.slice();u--;)i=n[u]*s+l,n[u]=i%vn|0,l=i/vn|0;return l&&n.unshift(l),n}function t(n,s,i,l){var u,d;if(i!=l)d=i>l?1:-1;else for(u=d=0;u<i;u++)if(n[u]!=s[u]){d=n[u]>s[u]?1:-1;break}return d}function r(n,s,i){for(var l=0;i--;)n[i]-=l,l=n[i]<s[i]?1:0,n[i]=l*vn+n[i]-s[i];for(;!n[0]&&n.length>1;)n.shift()}return function(n,s,i,l){var u,d,m,f,p,y,x,b,j,S,k,C,N,O,P,T,D,q,F=n.constructor,K=n.s==s.s?1:-1,B=n.d,Q=s.d;if(!n.s)return new F(n);if(!s.s)throw Error(ei+"Division by zero");for(d=n.e-s.e,D=Q.length,P=B.length,x=new F(K),b=x.d=[],m=0;Q[m]==(B[m]||0);)++m;if(Q[m]>(B[m]||0)&&--d,i==null?C=i=F.precision:l?C=i+(Jr(n)-Jr(s))+1:C=i,C<0)return new F(0);if(C=C/ur+2|0,m=0,D==1)for(f=0,Q=Q[0],C++;(m<P||f)&&C--;m++)N=f*vn+(B[m]||0),b[m]=N/Q|0,f=N%Q|0;else{for(f=vn/(Q[0]+1)|0,f>1&&(Q=e(Q,f),B=e(B,f),D=Q.length,P=B.length),O=D,j=B.slice(0,D),S=j.length;S<D;)j[S++]=0;q=Q.slice(),q.unshift(0),T=Q[0],Q[1]>=vn/2&&++T;do f=0,u=t(Q,j,D,S),u<0?(k=j[0],D!=S&&(k=k*vn+(j[1]||0)),f=k/T|0,f>1?(f>=vn&&(f=vn-1),p=e(Q,f),y=p.length,S=j.length,u=t(p,j,y,S),u==1&&(f--,r(p,D<y?q:Q,y))):(f==0&&(u=f=1),p=Q.slice()),y=p.length,y<S&&p.unshift(0),r(j,p,S),u==-1&&(S=j.length,u=t(Q,j,D,S),u<1&&(f++,r(j,D<S?q:Q,S))),S=j.length):u===0&&(f++,j=[0]),b[m++]=f,u&&j[0]?j[S++]=B[O]||0:(j=[B[O]],S=1);while((O++<P||j[0]!==void 0)&&C--)}return b[0]||b.shift(),x.e=d,Zt(x,l?i+Jr(x)+1:i)}})();function FP(e,t){var r,n,s,i,l,u,d=0,m=0,f=e.constructor,p=f.precision;if(Jr(e)>16)throw Error(Qx+Jr(e));if(!e.s)return new f(Ps);for(yr=!1,u=p,l=new f(.03125);e.abs().gte(.1);)e=e.times(l),m+=5;for(n=Math.log(jo(2,m))/Math.LN10*2+5|0,u+=n,r=s=i=new f(Ps),f.precision=u;;){if(s=Zt(s.times(e),u),r=r.times(++d),l=i.plus(sa(s,r,u)),Oi(l.d).slice(0,u)===Oi(i.d).slice(0,u)){for(;m--;)i=Zt(i.times(i),u);return f.precision=p,t==null?(yr=!0,Zt(i,p)):i}i=l}}function Jr(e){for(var t=e.e*ur,r=e.d[0];r>=10;r/=10)t++;return t}function Qy(e,t,r){if(t>e.LN10.sd())throw yr=!0,r&&(e.precision=r),Error(ei+"LN10 precision limit exceeded");return Zt(new e(e.LN10),t)}function Wa(e){for(var t="";e--;)t+="0";return t}function Ru(e,t){var r,n,s,i,l,u,d,m,f,p=1,y=10,x=e,b=x.d,j=x.constructor,S=j.precision;if(x.s<1)throw Error(ei+(x.s?"NaN":"-Infinity"));if(x.eq(Ps))return new j(0);if(t==null?(yr=!1,m=S):m=t,x.eq(10))return t==null&&(yr=!0),Qy(j,m);if(m+=y,j.precision=m,r=Oi(b),n=r.charAt(0),i=Jr(x),Math.abs(i)<15e14){for(;n<7&&n!=1||n==1&&r.charAt(1)>3;)x=x.times(e),r=Oi(x.d),n=r.charAt(0),p++;i=Jr(x),n>1?(x=new j("0."+r),i++):x=new j(n+"."+r.slice(1))}else return d=Qy(j,m+2,S).times(i+""),x=Ru(new j(n+"."+r.slice(1)),m-y).plus(d),j.precision=S,t==null?(yr=!0,Zt(x,S)):x;for(u=l=x=sa(x.minus(Ps),x.plus(Ps),m),f=Zt(x.times(x),m),s=3;;){if(l=Zt(l.times(f),m),d=u.plus(sa(l,new j(s),m)),Oi(d.d).slice(0,m)===Oi(u.d).slice(0,m))return u=u.times(2),i!==0&&(u=u.plus(Qy(j,m+2,S).times(i+""))),u=sa(u,new j(p),m),j.precision=S,t==null?(yr=!0,Zt(u,S)):u;u=d,s+=2}}function jN(e,t){var r,n,s;for((r=t.indexOf("."))>-1&&(t=t.replace(".","")),(n=t.search(/e/i))>0?(r<0&&(r=n),r+=+t.slice(n+1),t=t.substring(0,n)):r<0&&(r=t.length),n=0;t.charCodeAt(n)===48;)++n;for(s=t.length;t.charCodeAt(s-1)===48;)--s;if(t=t.slice(n,s),t){if(s-=n,r=r-n-1,e.e=yc(r/ur),e.d=[],n=(r+1)%ur,r<0&&(n+=ur),n<s){for(n&&e.d.push(+t.slice(0,n)),s-=ur;n<s;)e.d.push(+t.slice(n,n+=ur));t=t.slice(n),n=ur-t.length}else n-=s;for(;n--;)t+="0";if(e.d.push(+t),yr&&(e.e>Ah||e.e<-Ah))throw Error(Qx+r)}else e.s=0,e.e=0,e.d=[0];return e}function Zt(e,t,r){var n,s,i,l,u,d,m,f,p=e.d;for(l=1,i=p[0];i>=10;i/=10)l++;if(n=t-l,n<0)n+=ur,s=t,m=p[f=0];else{if(f=Math.ceil((n+1)/ur),i=p.length,f>=i)return e;for(m=i=p[f],l=1;i>=10;i/=10)l++;n%=ur,s=n-ur+l}if(r!==void 0&&(i=jo(10,l-s-1),u=m/i%10|0,d=t<0||p[f+1]!==void 0||m%i,d=r<4?(u||d)&&(r==0||r==(e.s<0?3:2)):u>5||u==5&&(r==4||d||r==6&&(n>0?s>0?m/jo(10,l-s):0:p[f-1])%10&1||r==(e.s<0?8:7))),t<1||!p[0])return d?(i=Jr(e),p.length=1,t=t-i-1,p[0]=jo(10,(ur-t%ur)%ur),e.e=yc(-t/ur)||0):(p.length=1,p[0]=e.e=e.s=0),e;if(n==0?(p.length=f,i=1,f--):(p.length=f+1,i=jo(10,ur-n),p[f]=s>0?(m/jo(10,l-s)%jo(10,s)|0)*i:0),d)for(;;)if(f==0){(p[0]+=i)==vn&&(p[0]=1,++e.e);break}else{if(p[f]+=i,p[f]!=vn)break;p[f--]=0,i=1}for(n=p.length;p[--n]===0;)p.pop();if(yr&&(e.e>Ah||e.e<-Ah))throw Error(Qx+Jr(e));return e}function LP(e,t){var r,n,s,i,l,u,d,m,f,p,y=e.constructor,x=y.precision;if(!e.s||!t.s)return t.s?t.s=-t.s:t=new y(e),yr?Zt(t,x):t;if(d=e.d,p=t.d,n=t.e,m=e.e,d=d.slice(),l=m-n,l){for(f=l<0,f?(r=d,l=-l,u=p.length):(r=p,n=m,u=d.length),s=Math.max(Math.ceil(x/ur),u)+2,l>s&&(l=s,r.length=1),r.reverse(),s=l;s--;)r.push(0);r.reverse()}else{for(s=d.length,u=p.length,f=s<u,f&&(u=s),s=0;s<u;s++)if(d[s]!=p[s]){f=d[s]<p[s];break}l=0}for(f&&(r=d,d=p,p=r,t.s=-t.s),u=d.length,s=p.length-u;s>0;--s)d[u++]=0;for(s=p.length;s>l;){if(d[--s]<p[s]){for(i=s;i&&d[--i]===0;)d[i]=vn-1;--d[i],d[s]+=vn}d[s]-=p[s]}for(;d[--u]===0;)d.pop();for(;d[0]===0;d.shift())--n;return d[0]?(t.d=d,t.e=n,yr?Zt(t,x):t):new y(0)}function zo(e,t,r){var n,s=Jr(e),i=Oi(e.d),l=i.length;return t?(r&&(n=r-l)>0?i=i.charAt(0)+"."+i.slice(1)+Wa(n):l>1&&(i=i.charAt(0)+"."+i.slice(1)),i=i+(s<0?"e":"e+")+s):s<0?(i="0."+Wa(-s-1)+i,r&&(n=r-l)>0&&(i+=Wa(n))):s>=l?(i+=Wa(s+1-l),r&&(n=r-s-1)>0&&(i=i+"."+Wa(n))):((n=s+1)<l&&(i=i.slice(0,n)+"."+i.slice(n)),r&&(n=r-l)>0&&(s+1===l&&(i+="."),i+=Wa(n))),e.s<0?"-"+i:i}function SN(e,t){if(e.length>t)return e.length=t,!0}function zP(e){var t,r,n;function s(i){var l=this;if(!(l instanceof s))return new s(i);if(l.constructor=s,i instanceof s){l.s=i.s,l.e=i.e,l.d=(i=i.d)?i.slice():i;return}if(typeof i=="number"){if(i*0!==0)throw Error(Ro+i);if(i>0)l.s=1;else if(i<0)i=-i,l.s=-1;else{l.s=0,l.e=0,l.d=[0];return}if(i===~~i&&i<1e7){l.e=0,l.d=[i];return}return jN(l,i.toString())}else if(typeof i!="string")throw Error(Ro+i);if(i.charCodeAt(0)===45?(i=i.slice(1),l.s=-1):l.s=1,X9.test(i))jN(l,i);else throw Error(Ro+i)}if(s.prototype=He,s.ROUND_UP=0,s.ROUND_DOWN=1,s.ROUND_CEIL=2,s.ROUND_FLOOR=3,s.ROUND_HALF_UP=4,s.ROUND_HALF_DOWN=5,s.ROUND_HALF_EVEN=6,s.ROUND_HALF_CEIL=7,s.ROUND_HALF_FLOOR=8,s.clone=zP,s.config=s.set=Z9,e===void 0&&(e={}),e)for(n=["precision","rounding","toExpNeg","toExpPos","LN10"],t=0;t<n.length;)e.hasOwnProperty(r=n[t++])||(e[r]=this[r]);return s.config(e),s}function Z9(e){if(!e||typeof e!="object")throw Error(ei+"Object expected");var t,r,n,s=["precision",1,gc,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(t=0;t<s.length;t+=3)if((n=e[r=s[t]])!==void 0)if(yc(n)===n&&n>=s[t+1]&&n<=s[t+2])this[r]=n;else throw Error(Ro+r+": "+n);if((n=e[r="LN10"])!==void 0)if(n==Math.LN10)this[r]=new this(n);else throw Error(Ro+r+": "+n);return this}var Xx=zP(Q9);Ps=new Xx(1);const Gt=Xx;var eV=e=>e,UP={},BP=e=>e===UP,_N=e=>function t(){return arguments.length===0||arguments.length===1&&BP(arguments.length<=0?void 0:arguments[0])?t:e(...arguments)},WP=(e,t)=>e===1?t:_N(function(){for(var r=arguments.length,n=new Array(r),s=0;s<r;s++)n[s]=arguments[s];var i=n.filter(l=>l!==UP).length;return i>=e?t(...n):WP(e-i,_N(function(){for(var l=arguments.length,u=new Array(l),d=0;d<l;d++)u[d]=arguments[d];var m=n.map(f=>BP(f)?u.shift():f);return t(...m,...u)}))}),Sm=e=>WP(e.length,e),v0=(e,t)=>{for(var r=[],n=e;n<t;++n)r[n-e]=n;return r},tV=Sm((e,t)=>Array.isArray(t)?t.map(e):Object.keys(t).map(r=>t[r]).map(e)),rV=function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];if(!r.length)return eV;var s=r.reverse(),i=s[0],l=s.slice(1);return function(){return l.reduce((u,d)=>d(u),i(...arguments))}},x0=e=>Array.isArray(e)?e.reverse():e.split("").reverse().join(""),VP=e=>{var t=null,r=null;return function(){for(var n=arguments.length,s=new Array(n),i=0;i<n;i++)s[i]=arguments[i];return t&&s.every((l,u)=>{var d;return l===((d=t)===null||d===void 0?void 0:d[u])})||(t=s,r=e(...s)),r}};function qP(e){var t;return e===0?t=1:t=Math.floor(new Gt(e).abs().log(10).toNumber())+1,t}function HP(e,t,r){for(var n=new Gt(e),s=0,i=[];n.lt(t)&&s<1e5;)i.push(n.toNumber()),n=n.add(r),s++;return i}Sm((e,t,r)=>{var n=+e,s=+t;return n+r*(s-n)});Sm((e,t,r)=>{var n=t-+e;return n=n||1/0,(r-e)/n});Sm((e,t,r)=>{var n=t-+e;return n=n||1/0,Math.max(0,Math.min(1,(r-e)/n))});var KP=e=>{var[t,r]=e,[n,s]=[t,r];return t>r&&([n,s]=[r,t]),[n,s]},GP=(e,t,r)=>{if(e.lte(0))return new Gt(0);var n=qP(e.toNumber()),s=new Gt(10).pow(n),i=e.div(s),l=n!==1?.05:.1,u=new Gt(Math.ceil(i.div(l).toNumber())).add(r).mul(l),d=u.mul(s);return t?new Gt(d.toNumber()):new Gt(Math.ceil(d.toNumber()))},nV=(e,t,r)=>{var n=new Gt(1),s=new Gt(e);if(!s.isint()&&r){var i=Math.abs(e);i<1?(n=new Gt(10).pow(qP(e)-1),s=new Gt(Math.floor(s.div(n).toNumber())).mul(n)):i>1&&(s=new Gt(Math.floor(e)))}else e===0?s=new Gt(Math.floor((t-1)/2)):r||(s=new Gt(Math.floor(e)));var l=Math.floor((t-1)/2),u=rV(tV(d=>s.add(new Gt(d-l).mul(n)).toNumber()),v0);return u(0,t)},YP=function(t,r,n,s){var i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((r-t)/(n-1)))return{step:new Gt(0),tickMin:new Gt(0),tickMax:new Gt(0)};var l=GP(new Gt(r).sub(t).div(n-1),s,i),u;t<=0&&r>=0?u=new Gt(0):(u=new Gt(t).add(r).div(2),u=u.sub(new Gt(u).mod(l)));var d=Math.ceil(u.sub(t).div(l).toNumber()),m=Math.ceil(new Gt(r).sub(u).div(l).toNumber()),f=d+m+1;return f>n?YP(t,r,n,s,i+1):(f<n&&(m=r>0?m+(n-f):m,d=r>0?d:d+(n-f)),{step:l,tickMin:u.sub(new Gt(d).mul(l)),tickMax:u.add(new Gt(m).mul(l))})};function sV(e){var[t,r]=e,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,i=Math.max(n,2),[l,u]=KP([t,r]);if(l===-1/0||u===1/0){var d=u===1/0?[l,...v0(0,n-1).map(()=>1/0)]:[...v0(0,n-1).map(()=>-1/0),u];return t>r?x0(d):d}if(l===u)return nV(l,n,s);var{step:m,tickMin:f,tickMax:p}=YP(l,u,i,s,0),y=HP(f,p.add(new Gt(.1).mul(m)),m);return t>r?x0(y):y}function iV(e,t){var[r,n]=e,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,[i,l]=KP([r,n]);if(i===-1/0||l===1/0)return[r,n];if(i===l)return[i];var u=Math.max(t,2),d=GP(new Gt(l).sub(i).div(u-1),s,0),m=[...HP(new Gt(i),new Gt(l),d),l];return s===!1&&(m=m.map(f=>Math.round(f))),r>n?x0(m):m}var aV=VP(sV),oV=VP(iV),JP=e=>e.rootProps.maxBarSize,lV=e=>e.rootProps.barGap,QP=e=>e.rootProps.barCategoryGap,cV=e=>e.rootProps.barSize,_m=e=>e.rootProps.stackOffset,Zx=e=>e.options.chartName,ew=e=>e.rootProps.syncId,XP=e=>e.rootProps.syncMethod,tw=e=>e.options.eventEmitter,ms={grid:-100,barBackground:-50,area:100,cursorRectangle:200,bar:300,line:400,axis:500,scatter:600,activeBar:1e3,cursorLine:1100,activeDot:1200,label:2e3},Qi={allowDuplicatedCategory:!0,angleAxisId:0,reversed:!1,scale:"auto",tick:!0,type:"category"},Cs={allowDataOverflow:!1,allowDuplicatedCategory:!0,radiusAxisId:0,scale:"auto",tick:!0,tickCount:5,type:"number"},km=(e,t)=>{if(!(!e||!t))return e!=null&&e.reversed?[t[1],t[0]]:t},uV={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:!1,dataKey:void 0,domain:void 0,id:Qi.angleAxisId,includeHidden:!1,name:void 0,reversed:Qi.reversed,scale:Qi.scale,tick:Qi.tick,tickCount:void 0,ticks:void 0,type:Qi.type,unit:void 0},dV={allowDataOverflow:Cs.allowDataOverflow,allowDecimals:!1,allowDuplicatedCategory:Cs.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:Cs.radiusAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:Cs.scale,tick:Cs.tick,tickCount:Cs.tickCount,ticks:void 0,type:Cs.type,unit:void 0},fV={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:Qi.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:Qi.angleAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:Qi.scale,tick:Qi.tick,tickCount:void 0,ticks:void 0,type:"number",unit:void 0},hV={allowDataOverflow:Cs.allowDataOverflow,allowDecimals:!1,allowDuplicatedCategory:Cs.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:Cs.radiusAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:Cs.scale,tick:Cs.tick,tickCount:Cs.tickCount,ticks:void 0,type:"category",unit:void 0},rw=(e,t)=>e.polarAxis.angleAxis[t]!=null?e.polarAxis.angleAxis[t]:e.layout.layoutType==="radial"?fV:uV,nw=(e,t)=>e.polarAxis.radiusAxis[t]!=null?e.polarAxis.radiusAxis[t]:e.layout.layoutType==="radial"?hV:dV,Nm=e=>e.polarOptions,sw=pe([ya,va,bn],a7),ZP=pe([Nm,sw],(e,t)=>{if(e!=null)return xi(e.innerRadius,t,0)}),eO=pe([Nm,sw],(e,t)=>{if(e!=null)return xi(e.outerRadius,t,t*.8)}),mV=e=>{if(e==null)return[0,0];var{startAngle:t,endAngle:r}=e;return[t,r]},tO=pe([Nm],mV);pe([rw,tO],km);var rO=pe([sw,ZP,eO],(e,t,r)=>{if(!(e==null||t==null||r==null))return[t,r]});pe([nw,rO],km);var nO=pe([Yt,Nm,ZP,eO,ya,va],(e,t,r,n,s,i)=>{if(!(e!=="centric"&&e!=="radial"||t==null||r==null||n==null)){var{cx:l,cy:u,startAngle:d,endAngle:m}=t;return{cx:xi(l,s,s/2),cy:xi(u,i,i/2),innerRadius:r,outerRadius:n,startAngle:d,endAngle:m,clockWise:!1}}}),on=(e,t)=>t,Cm=(e,t,r)=>r;function iw(e){return e==null?void 0:e.id}function sO(e,t,r){var{chartData:n=[]}=t,{allowDuplicatedCategory:s,dataKey:i}=r,l=new Map;return e.forEach(u=>{var d,m=(d=u.data)!==null&&d!==void 0?d:n;if(!(m==null||m.length===0)){var f=iw(u);m.forEach((p,y)=>{var x=i==null||s?y:String(es(p,i,null)),b=es(p,u.dataKey,0),j;l.has(x)?j=l.get(x):j={},Object.assign(j,{[f]:b}),l.set(x,j)})}}),Array.from(l.values())}function Em(e){return e.stackId!=null&&e.dataKey!=null}var Am=(e,t)=>e===t?!0:e==null||t==null?!1:e[0]===t[0]&&e[1]===t[1];function Pm(e,t){return Array.isArray(e)&&Array.isArray(t)&&e.length===0&&t.length===0?!0:e===t}function pV(e,t){if(e.length===t.length){for(var r=0;r<e.length;r++)if(e[r]!==t[r])return!1;return!0}return!1}var ln=e=>{var t=Yt(e);return t==="horizontal"?"xAxis":t==="vertical"?"yAxis":t==="centric"?"angleAxis":"radiusAxis"},vc=e=>e.tooltip.settings.axisId;function kN(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Ph(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?kN(Object(r),!0).forEach(function(n){gV(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):kN(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function gV(e,t,r){return(t=yV(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function yV(e){var t=vV(e,"string");return typeof t=="symbol"?t:t+""}function vV(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var w0=[0,"auto"],_s={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:void 0,height:30,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"bottom",padding:{left:0,right:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"category",unit:void 0},iO=(e,t)=>e.cartesianAxis.xAxis[t],wa=(e,t)=>{var r=iO(e,t);return r??_s},ks={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:w0,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"left",padding:{top:0,bottom:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"number",unit:void 0,width:Gu},aO=(e,t)=>e.cartesianAxis.yAxis[t],ba=(e,t)=>{var r=aO(e,t);return r??ks},xV={domain:[0,"auto"],includeHidden:!1,reversed:!1,allowDataOverflow:!1,allowDuplicatedCategory:!1,dataKey:void 0,id:0,name:"",range:[64,64],scale:"auto",type:"number",unit:""},aw=(e,t)=>{var r=e.cartesianAxis.zAxis[t];return r??xV},ts=(e,t,r)=>{switch(t){case"xAxis":return wa(e,r);case"yAxis":return ba(e,r);case"zAxis":return aw(e,r);case"angleAxis":return rw(e,r);case"radiusAxis":return nw(e,r);default:throw new Error("Unexpected axis type: ".concat(t))}},wV=(e,t,r)=>{switch(t){case"xAxis":return wa(e,r);case"yAxis":return ba(e,r);default:throw new Error("Unexpected axis type: ".concat(t))}},Zu=(e,t,r)=>{switch(t){case"xAxis":return wa(e,r);case"yAxis":return ba(e,r);case"angleAxis":return rw(e,r);case"radiusAxis":return nw(e,r);default:throw new Error("Unexpected axis type: ".concat(t))}},oO=e=>e.graphicalItems.cartesianItems.some(t=>t.type==="bar")||e.graphicalItems.polarItems.some(t=>t.type==="radialBar");function lO(e,t){return r=>{switch(e){case"xAxis":return"xAxisId"in r&&r.xAxisId===t;case"yAxis":return"yAxisId"in r&&r.yAxisId===t;case"zAxis":return"zAxisId"in r&&r.zAxisId===t;case"angleAxis":return"angleAxisId"in r&&r.angleAxisId===t;case"radiusAxis":return"radiusAxisId"in r&&r.radiusAxisId===t;default:return!1}}}var ow=e=>e.graphicalItems.cartesianItems,bV=pe([on,Cm],lO),cO=(e,t,r)=>e.filter(r).filter(n=>(t==null?void 0:t.includeHidden)===!0?!0:!n.hide),ed=pe([ow,ts,bV],cO,{memoizeOptions:{resultEqualityCheck:Pm}}),uO=pe([ed],e=>e.filter(t=>t.type==="area"||t.type==="bar").filter(Em)),dO=e=>e.filter(t=>!("stackId"in t)||t.stackId===void 0),jV=pe([ed],dO),fO=e=>e.map(t=>t.data).filter(Boolean).flat(1),SV=pe([ed],fO,{memoizeOptions:{resultEqualityCheck:Pm}}),hO=(e,t)=>{var{chartData:r=[],dataStartIndex:n,dataEndIndex:s}=t;return e.length>0?e:r.slice(n,s+1)},lw=pe([SV,Jx],hO),mO=(e,t,r)=>(t==null?void 0:t.dataKey)!=null?e.map(n=>({value:es(n,t.dataKey)})):r.length>0?r.map(n=>n.dataKey).flatMap(n=>e.map(s=>({value:es(s,n)}))):e.map(n=>({value:n})),Om=pe([lw,ts,ed],mO);function pO(e,t){switch(e){case"xAxis":return t.direction==="x";case"yAxis":return t.direction==="y";default:return!1}}function Lf(e){if(Ri(e)||e instanceof Date){var t=Number(e);if(Lr(t))return t}}function NN(e){if(Array.isArray(e)){var t=[Lf(e[0]),Lf(e[1])];return Lo(t)?t:void 0}var r=Lf(e);if(r!=null)return[r,r]}function ma(e){return e.map(Lf).filter(VL)}function _V(e,t,r){return!r||typeof t!="number"||Di(t)?[]:r.length?ma(r.flatMap(n=>{var s=es(e,n.dataKey),i,l;if(Array.isArray(s)?[i,l]=s:i=l=s,!(!Lr(i)||!Lr(l)))return[t-i,t+l]})):[]}var cn=e=>{var t=ln(e),r=vc(e);return Zu(e,t,r)},gO=pe([cn],e=>e==null?void 0:e.dataKey),kV=pe([uO,Jx,cn],sO),yO=(e,t,r)=>{var n={},s=t.reduce((i,l)=>(l.stackId==null||(i[l.stackId]==null&&(i[l.stackId]=[]),i[l.stackId].push(l)),i),n);return Object.fromEntries(Object.entries(s).map(i=>{var[l,u]=i,d=u.map(iw);return[l,{stackedData:aB(e,d,r),graphicalItems:u}]}))},b0=pe([kV,uO,_m],yO),vO=(e,t,r,n)=>{var{dataStartIndex:s,dataEndIndex:i}=t;if(n==null&&r!=="zAxis"){var l=dB(e,s,i);if(!(l!=null&&l[0]===0&&l[1]===0))return l}},NV=pe([ts],e=>e.allowDataOverflow),cw=e=>{var t;if(e==null||!("domain"in e))return w0;if(e.domain!=null)return e.domain;if(e.ticks!=null){if(e.type==="number"){var r=ma(e.ticks);return[Math.min(...r),Math.max(...r)]}if(e.type==="category")return e.ticks.map(String)}return(t=e==null?void 0:e.domain)!==null&&t!==void 0?t:w0},xO=pe([ts],cw),wO=pe([xO,NV],RP),CV=pe([b0,ro,on,wO],vO,{memoizeOptions:{resultEqualityCheck:Am}}),uw=e=>e.errorBars,EV=(e,t,r)=>e.flatMap(n=>t[n.id]).filter(Boolean).filter(n=>pO(r,n)),Oh=function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];var s=r.filter(Boolean);if(s.length!==0){var i=s.flat(),l=Math.min(...i),u=Math.max(...i);return[l,u]}},bO=(e,t,r,n,s)=>{var i,l;if(r.length>0&&e.forEach(u=>{r.forEach(d=>{var m,f,p=(m=n[d.id])===null||m===void 0?void 0:m.filter(k=>pO(s,k)),y=es(u,(f=t.dataKey)!==null&&f!==void 0?f:d.dataKey),x=_V(u,y,p);if(x.length>=2){var b=Math.min(...x),j=Math.max(...x);(i==null||b<i)&&(i=b),(l==null||j>l)&&(l=j)}var S=NN(y);S!=null&&(i=i==null?S[0]:Math.min(i,S[0]),l=l==null?S[1]:Math.max(l,S[1]))})}),(t==null?void 0:t.dataKey)!=null&&e.forEach(u=>{var d=NN(es(u,t.dataKey));d!=null&&(i=i==null?d[0]:Math.min(i,d[0]),l=l==null?d[1]:Math.max(l,d[1]))}),Lr(i)&&Lr(l))return[i,l]},AV=pe([lw,ts,jV,uw,on],bO,{memoizeOptions:{resultEqualityCheck:Am}});function PV(e){var{value:t}=e;if(Ri(t)||t instanceof Date)return t}var OV=(e,t,r)=>{var n=e.map(PV).filter(s=>s!=null);return r&&(t.dataKey==null||t.allowDuplicatedCategory&&KE(n))?eP(0,e.length):t.allowDuplicatedCategory?n:Array.from(new Set(n))},jO=e=>e.referenceElements.dots,xc=(e,t,r)=>e.filter(n=>n.ifOverflow==="extendDomain").filter(n=>t==="xAxis"?n.xAxisId===r:n.yAxisId===r),TV=pe([jO,on,Cm],xc),SO=e=>e.referenceElements.areas,IV=pe([SO,on,Cm],xc),_O=e=>e.referenceElements.lines,DV=pe([_O,on,Cm],xc),kO=(e,t)=>{var r=ma(e.map(n=>t==="xAxis"?n.x:n.y));if(r.length!==0)return[Math.min(...r),Math.max(...r)]},RV=pe(TV,on,kO),NO=(e,t)=>{var r=ma(e.flatMap(n=>[t==="xAxis"?n.x1:n.y1,t==="xAxis"?n.x2:n.y2]));if(r.length!==0)return[Math.min(...r),Math.max(...r)]},$V=pe([IV,on],NO);function MV(e){var t;if(e.x!=null)return ma([e.x]);var r=(t=e.segment)===null||t===void 0?void 0:t.map(n=>n.x);return r==null||r.length===0?[]:ma(r)}function FV(e){var t;if(e.y!=null)return ma([e.y]);var r=(t=e.segment)===null||t===void 0?void 0:t.map(n=>n.y);return r==null||r.length===0?[]:ma(r)}var CO=(e,t)=>{var r=e.flatMap(n=>t==="xAxis"?MV(n):FV(n));if(r.length!==0)return[Math.min(...r),Math.max(...r)]},LV=pe([DV,on],CO),zV=pe(RV,LV,$V,(e,t,r)=>Oh(e,r,t)),EO=(e,t,r,n,s,i,l,u)=>{if(r!=null)return r;var d=l==="vertical"&&u==="xAxis"||l==="horizontal"&&u==="yAxis",m=d?Oh(n,i,s):Oh(i,s);return J9(t,m,e.allowDataOverflow)},UV=pe([ts,xO,wO,CV,AV,zV,Yt,on],EO,{memoizeOptions:{resultEqualityCheck:Am}}),BV=[0,1],AO=(e,t,r,n,s,i,l)=>{if(!((e==null||r==null||r.length===0)&&l===void 0)){var{dataKey:u,type:d}=e,m=Ho(t,i);if(m&&u==null){var f;return eP(0,(f=r==null?void 0:r.length)!==null&&f!==void 0?f:0)}return d==="category"?OV(n,e,m):s==="expand"?BV:l}},dw=pe([ts,Yt,lw,Om,_m,on,UV],AO),PO=(e,t,r,n,s)=>{if(e!=null){var{scale:i,type:l}=e;if(i==="auto")return t==="radial"&&s==="radiusAxis"?"band":t==="radial"&&s==="angleAxis"?"linear":l==="category"&&n&&(n.indexOf("LineChart")>=0||n.indexOf("AreaChart")>=0||n.indexOf("ComposedChart")>=0&&!r)?"point":l==="category"?"band":"linear";if(typeof i=="string"){var u="scale".concat(qu(i));return u in hu?u:"point"}}},td=pe([ts,Yt,oO,Zx,on],PO);function WV(e){if(e!=null){if(e in hu)return hu[e]();var t="scale".concat(qu(e));if(t in hu)return hu[t]()}}function fw(e,t,r,n){if(!(r==null||n==null)){if(typeof e.scale=="function")return e.scale.copy().domain(r).range(n);var s=WV(t);if(s!=null){var i=s.domain(r).range(n);return tB(i),i}}}var OO=(e,t,r)=>{var n=cw(t);if(!(r!=="auto"&&r!=="linear")){if(t!=null&&t.tickCount&&Array.isArray(n)&&(n[0]==="auto"||n[1]==="auto")&&Lo(e))return aV(e,t.tickCount,t.allowDecimals);if(t!=null&&t.tickCount&&t.type==="number"&&Lo(e))return oV(e,t.tickCount,t.allowDecimals)}},hw=pe([dw,Zu,td],OO),TO=(e,t,r,n)=>{if(n!=="angleAxis"&&(e==null?void 0:e.type)==="number"&&Lo(t)&&Array.isArray(r)&&r.length>0){var s=t[0],i=r[0],l=t[1],u=r[r.length-1];return[Math.min(s,i),Math.max(l,u)]}return t},VV=pe([ts,dw,hw,on],TO),qV=pe(Om,ts,(e,t)=>{if(!(!t||t.type!=="number")){var r=1/0,n=Array.from(ma(e.map(u=>u.value))).sort((u,d)=>u-d);if(n.length<2)return 1/0;var s=n[n.length-1]-n[0];if(s===0)return 1/0;for(var i=0;i<n.length-1;i++){var l=n[i+1]-n[i];r=Math.min(r,l)}return r/s}}),IO=pe(qV,Yt,QP,bn,(e,t,r,n)=>n,(e,t,r,n,s)=>{if(!Lr(e))return 0;var i=t==="vertical"?n.height:n.width;if(s==="gap")return e*i/2;if(s==="no-gap"){var l=xi(r,e*i),u=e*i/2;return u-l-(u-l)/i*l}return 0}),HV=(e,t)=>{var r=wa(e,t);return r==null||typeof r.padding!="string"?0:IO(e,"xAxis",t,r.padding)},KV=(e,t)=>{var r=ba(e,t);return r==null||typeof r.padding!="string"?0:IO(e,"yAxis",t,r.padding)},GV=pe(wa,HV,(e,t)=>{var r,n;if(e==null)return{left:0,right:0};var{padding:s}=e;return typeof s=="string"?{left:t,right:t}:{left:((r=s.left)!==null&&r!==void 0?r:0)+t,right:((n=s.right)!==null&&n!==void 0?n:0)+t}}),YV=pe(ba,KV,(e,t)=>{var r,n;if(e==null)return{top:0,bottom:0};var{padding:s}=e;return typeof s=="string"?{top:t,bottom:t}:{top:((r=s.top)!==null&&r!==void 0?r:0)+t,bottom:((n=s.bottom)!==null&&n!==void 0?n:0)+t}}),JV=pe([bn,GV,hm,fm,(e,t,r)=>r],(e,t,r,n,s)=>{var{padding:i}=n;return s?[i.left,r.width-i.right]:[e.left+t.left,e.left+e.width-t.right]}),QV=pe([bn,Yt,YV,hm,fm,(e,t,r)=>r],(e,t,r,n,s,i)=>{var{padding:l}=s;return i?[n.height-l.bottom,l.top]:t==="horizontal"?[e.top+e.height-r.bottom,e.top+r.top]:[e.top+r.top,e.top+e.height-r.bottom]}),rd=(e,t,r,n)=>{var s;switch(t){case"xAxis":return JV(e,r,n);case"yAxis":return QV(e,r,n);case"zAxis":return(s=aw(e,r))===null||s===void 0?void 0:s.range;case"angleAxis":return tO(e);case"radiusAxis":return rO(e,r);default:return}},DO=pe([ts,rd],km),wc=pe([ts,td,VV,DO],fw);pe([ed,uw,on],EV);function RO(e,t){return e.id<t.id?-1:e.id>t.id?1:0}var Tm=(e,t)=>t,Im=(e,t,r)=>r,XV=pe(um,Tm,Im,(e,t,r)=>e.filter(n=>n.orientation===t).filter(n=>n.mirror===r).sort(RO)),ZV=pe(dm,Tm,Im,(e,t,r)=>e.filter(n=>n.orientation===t).filter(n=>n.mirror===r).sort(RO)),$O=(e,t)=>({width:e.width,height:t.height}),eq=(e,t)=>{var r=typeof t.width=="number"?t.width:Gu;return{width:r,height:e.height}},MO=pe(bn,wa,$O),tq=(e,t,r)=>{switch(t){case"top":return e.top;case"bottom":return r-e.bottom;default:return 0}},rq=(e,t,r)=>{switch(t){case"left":return e.left;case"right":return r-e.right;default:return 0}},nq=pe(va,bn,XV,Tm,Im,(e,t,r,n,s)=>{var i={},l;return r.forEach(u=>{var d=$O(t,u);l==null&&(l=tq(t,n,e));var m=n==="top"&&!s||n==="bottom"&&s;i[u.id]=l-Number(m)*d.height,l+=(m?-1:1)*d.height}),i}),sq=pe(ya,bn,ZV,Tm,Im,(e,t,r,n,s)=>{var i={},l;return r.forEach(u=>{var d=eq(t,u);l==null&&(l=rq(t,n,e));var m=n==="left"&&!s||n==="right"&&s;i[u.id]=l-Number(m)*d.width,l+=(m?-1:1)*d.width}),i}),iq=(e,t)=>{var r=wa(e,t);if(r!=null)return nq(e,r.orientation,r.mirror)},aq=pe([bn,wa,iq,(e,t)=>t],(e,t,r,n)=>{if(t!=null){var s=r==null?void 0:r[n];return s==null?{x:e.left,y:0}:{x:e.left,y:s}}}),oq=(e,t)=>{var r=ba(e,t);if(r!=null)return sq(e,r.orientation,r.mirror)},lq=pe([bn,ba,oq,(e,t)=>t],(e,t,r,n)=>{if(t!=null){var s=r==null?void 0:r[n];return s==null?{x:0,y:e.top}:{x:s,y:e.top}}}),FO=pe(bn,ba,(e,t)=>{var r=typeof t.width=="number"?t.width:Gu;return{width:r,height:e.height}}),CN=(e,t,r)=>{switch(t){case"xAxis":return MO(e,r).width;case"yAxis":return FO(e,r).height;default:return}},LO=(e,t,r,n)=>{if(r!=null){var{allowDuplicatedCategory:s,type:i,dataKey:l}=r,u=Ho(e,n),d=t.map(m=>m.value);if(l&&u&&i==="category"&&s&&KE(d))return d}},mw=pe([Yt,Om,ts,on],LO),zO=(e,t,r,n)=>{if(!(r==null||r.dataKey==null)){var{type:s,scale:i}=r,l=Ho(e,n);if(l&&(s==="number"||i!=="auto"))return t.map(u=>u.value)}},pw=pe([Yt,Om,Zu,on],zO);pe([Yt,wV,td,wc,mw,pw,rd,hw,on],(e,t,r,n,s,i,l,u,d)=>{if(t!=null){var m=Ho(e,d);return{angle:t.angle,interval:t.interval,minTickGap:t.minTickGap,orientation:t.orientation,tick:t.tick,tickCount:t.tickCount,tickFormatter:t.tickFormatter,ticks:t.ticks,type:t.type,unit:t.unit,axisType:d,categoricalDomain:i,duplicateDomain:s,isCategorical:m,niceTicks:u,range:l,realScaleType:r,scale:n}}});var cq=(e,t,r,n,s,i,l,u,d)=>{if(!(t==null||n==null)){var m=Ho(e,d),{type:f,ticks:p,tickCount:y}=t,x=r==="scaleBand"&&typeof n.bandwidth=="function"?n.bandwidth()/2:2,b=f==="category"&&n.bandwidth?n.bandwidth()/x:0;b=d==="angleAxis"&&i!=null&&i.length>=2?Ts(i[0]-i[1])*2*b:b;var j=p||s;if(j){var S=j.map((k,C)=>{var N=l?l.indexOf(k):k;return{index:C,coordinate:n(N)+b,value:k,offset:b}});return S.filter(k=>Lr(k.coordinate))}return m&&u?u.map((k,C)=>({coordinate:n(k)+b,value:k,index:C,offset:b})).filter(k=>Lr(k.coordinate)):n.ticks?n.ticks(y).map(k=>({coordinate:n(k)+b,value:k,offset:b})):n.domain().map((k,C)=>({coordinate:n(k)+b,value:l?l[k]:k,index:C,offset:b}))}},UO=pe([Yt,Zu,td,wc,hw,rd,mw,pw,on],cq),uq=(e,t,r,n,s,i,l)=>{if(!(t==null||r==null||n==null||n[0]===n[1])){var u=Ho(e,l),{tickCount:d}=t,m=0;return m=l==="angleAxis"&&(n==null?void 0:n.length)>=2?Ts(n[0]-n[1])*2*m:m,u&&i?i.map((f,p)=>({coordinate:r(f)+m,value:f,index:p,offset:m})):r.ticks?r.ticks(d).map(f=>({coordinate:r(f)+m,value:f,offset:m})):r.domain().map((f,p)=>({coordinate:r(f)+m,value:s?s[f]:f,index:p,offset:m}))}},tc=pe([Yt,Zu,wc,rd,mw,pw,on],uq),rc=pe(ts,wc,(e,t)=>{if(!(e==null||t==null))return Ph(Ph({},e),{},{scale:t})}),dq=pe([ts,td,dw,DO],fw);pe((e,t,r)=>aw(e,r),dq,(e,t)=>{if(!(e==null||t==null))return Ph(Ph({},e),{},{scale:t})});var fq=pe([Yt,um,dm],(e,t,r)=>{switch(e){case"horizontal":return t.some(n=>n.reversed)?"right-to-left":"left-to-right";case"vertical":return r.some(n=>n.reversed)?"bottom-to-top":"top-to-bottom";case"centric":case"radial":return"left-to-right";default:return}}),BO=e=>e.options.defaultTooltipEventType,WO=e=>e.options.validateTooltipEventTypes;function VO(e,t,r){if(e==null)return t;var n=e?"axis":"item";return r==null?t:r.includes(n)?n:t}function gw(e,t){var r=BO(e),n=WO(e);return VO(t,r,n)}function hq(e){return st(t=>gw(t,e))}var qO=(e,t)=>{var r,n=Number(t);if(!(Di(n)||t==null))return n>=0?e==null||(r=e[n])===null||r===void 0?void 0:r.value:void 0},mq=e=>e.tooltip.settings,Ka={active:!1,index:null,dataKey:void 0,coordinate:void 0},pq={itemInteraction:{click:Ka,hover:Ka},axisInteraction:{click:Ka,hover:Ka},keyboardInteraction:Ka,syncInteraction:{active:!1,index:null,dataKey:void 0,label:void 0,coordinate:void 0,sourceViewBox:void 0},tooltipItemPayloads:[],settings:{shared:void 0,trigger:"hover",axisId:0,active:!1,defaultIndex:void 0}},HO=ps({name:"tooltip",initialState:pq,reducers:{addTooltipEntrySettings:{reducer(e,t){e.tooltipItemPayloads.push(t.payload)},prepare:nn()},removeTooltipEntrySettings:{reducer(e,t){var r=na(e).tooltipItemPayloads.indexOf(t.payload);r>-1&&e.tooltipItemPayloads.splice(r,1)},prepare:nn()},setTooltipSettingsState(e,t){e.settings=t.payload},setActiveMouseOverItemIndex(e,t){e.syncInteraction.active=!1,e.keyboardInteraction.active=!1,e.itemInteraction.hover.active=!0,e.itemInteraction.hover.index=t.payload.activeIndex,e.itemInteraction.hover.dataKey=t.payload.activeDataKey,e.itemInteraction.hover.coordinate=t.payload.activeCoordinate},mouseLeaveChart(e){e.itemInteraction.hover.active=!1,e.axisInteraction.hover.active=!1},mouseLeaveItem(e){e.itemInteraction.hover.active=!1},setActiveClickItemIndex(e,t){e.syncInteraction.active=!1,e.itemInteraction.click.active=!0,e.keyboardInteraction.active=!1,e.itemInteraction.click.index=t.payload.activeIndex,e.itemInteraction.click.dataKey=t.payload.activeDataKey,e.itemInteraction.click.coordinate=t.payload.activeCoordinate},setMouseOverAxisIndex(e,t){e.syncInteraction.active=!1,e.axisInteraction.hover.active=!0,e.keyboardInteraction.active=!1,e.axisInteraction.hover.index=t.payload.activeIndex,e.axisInteraction.hover.dataKey=t.payload.activeDataKey,e.axisInteraction.hover.coordinate=t.payload.activeCoordinate},setMouseClickAxisIndex(e,t){e.syncInteraction.active=!1,e.keyboardInteraction.active=!1,e.axisInteraction.click.active=!0,e.axisInteraction.click.index=t.payload.activeIndex,e.axisInteraction.click.dataKey=t.payload.activeDataKey,e.axisInteraction.click.coordinate=t.payload.activeCoordinate},setSyncInteraction(e,t){e.syncInteraction=t.payload},setKeyboardInteraction(e,t){e.keyboardInteraction.active=t.payload.active,e.keyboardInteraction.index=t.payload.activeIndex,e.keyboardInteraction.coordinate=t.payload.activeCoordinate,e.keyboardInteraction.dataKey=t.payload.activeDataKey}}}),{addTooltipEntrySettings:gq,removeTooltipEntrySettings:yq,setTooltipSettingsState:vq,setActiveMouseOverItemIndex:KO,mouseLeaveItem:xq,mouseLeaveChart:GO,setActiveClickItemIndex:wq,setMouseOverAxisIndex:YO,setMouseClickAxisIndex:bq,setSyncInteraction:j0,setKeyboardInteraction:S0}=HO.actions,jq=HO.reducer;function EN(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Cf(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?EN(Object(r),!0).forEach(function(n){Sq(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):EN(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Sq(e,t,r){return(t=_q(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function _q(e){var t=kq(e,"string");return typeof t=="symbol"?t:t+""}function kq(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Nq(e,t,r){return t==="axis"?r==="click"?e.axisInteraction.click:e.axisInteraction.hover:r==="click"?e.itemInteraction.click:e.itemInteraction.hover}function Cq(e){return e.index!=null}var JO=(e,t,r,n)=>{if(t==null)return Ka;var s=Nq(e,t,r);if(s==null)return Ka;if(s.active)return s;if(e.keyboardInteraction.active)return e.keyboardInteraction;if(e.syncInteraction.active&&e.syncInteraction.index!=null)return e.syncInteraction;var i=e.settings.active===!0;if(Cq(s)){if(i)return Cf(Cf({},s),{},{active:!0})}else if(n!=null)return{active:!0,coordinate:void 0,dataKey:void 0,index:n};return Cf(Cf({},Ka),{},{coordinate:s.coordinate})},yw=(e,t)=>{var r=e==null?void 0:e.index;if(r==null)return null;var n=Number(r);if(!Lr(n))return r;var s=0,i=1/0;return t.length>0&&(i=t.length-1),String(Math.max(s,Math.min(n,i)))},QO=(e,t,r,n,s,i,l,u)=>{if(!(i==null||u==null)){var d=l[0],m=d==null?void 0:u(d.positions,i);if(m!=null)return m;var f=s==null?void 0:s[Number(i)];if(f)switch(r){case"horizontal":return{x:f.coordinate,y:(n.top+t)/2};default:return{x:(n.left+e)/2,y:f.coordinate}}}},XO=(e,t,r,n)=>{if(t==="axis")return e.tooltipItemPayloads;if(e.tooltipItemPayloads.length===0)return[];var s;return r==="hover"?s=e.itemInteraction.hover.dataKey:s=e.itemInteraction.click.dataKey,s==null&&n!=null?[e.tooltipItemPayloads[0]]:e.tooltipItemPayloads.filter(i=>{var l;return((l=i.settings)===null||l===void 0?void 0:l.dataKey)===s})},nd=e=>e.options.tooltipPayloadSearcher,bc=e=>e.tooltip;function AN(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function PN(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?AN(Object(r),!0).forEach(function(n){Eq(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):AN(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Eq(e,t,r){return(t=Aq(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Aq(e){var t=Pq(e,"string");return typeof t=="symbol"?t:t+""}function Pq(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Oq(e,t){return e??t}var ZO=(e,t,r,n,s,i,l)=>{if(!(t==null||i==null)){var{chartData:u,computedData:d,dataStartIndex:m,dataEndIndex:f}=r,p=[];return e.reduce((y,x)=>{var b,{dataDefinedOnItem:j,settings:S}=x,k=Oq(j,u),C=Array.isArray(k)?$A(k,m,f):k,N=(b=S==null?void 0:S.dataKey)!==null&&b!==void 0?b:n,O=S==null?void 0:S.nameKey,P;if(n&&Array.isArray(C)&&!Array.isArray(C[0])&&l==="axis"?P=WL(C,n,s):P=i(C,t,d,O),Array.isArray(P))P.forEach(D=>{var q=PN(PN({},S),{},{name:D.name,unit:D.unit,color:void 0,fill:void 0});y.push(sk({tooltipEntrySettings:q,dataKey:D.dataKey,payload:D.payload,value:es(D.payload,D.dataKey),name:D.name}))});else{var T;y.push(sk({tooltipEntrySettings:S,dataKey:N,payload:P,value:es(P,N),name:(T=es(P,O))!==null&&T!==void 0?T:S==null?void 0:S.name}))}return y},p)}},vw=pe([cn,Yt,oO,Zx,ln],PO),Tq=pe([e=>e.graphicalItems.cartesianItems,e=>e.graphicalItems.polarItems],(e,t)=>[...e,...t]),Iq=pe([ln,vc],lO),sd=pe([Tq,cn,Iq],cO,{memoizeOptions:{resultEqualityCheck:Pm}}),Dq=pe([sd],e=>e.filter(Em)),Rq=pe([sd],fO,{memoizeOptions:{resultEqualityCheck:Pm}}),jc=pe([Rq,ro],hO),$q=pe([Dq,ro,cn],sO),xw=pe([jc,cn,sd],mO),eT=pe([cn],cw),Mq=pe([cn],e=>e.allowDataOverflow),tT=pe([eT,Mq],RP),Fq=pe([sd],e=>e.filter(Em)),Lq=pe([$q,Fq,_m],yO),zq=pe([Lq,ro,ln,tT],vO),Uq=pe([sd],dO),Bq=pe([jc,cn,Uq,uw,ln],bO,{memoizeOptions:{resultEqualityCheck:Am}}),Wq=pe([jO,ln,vc],xc),Vq=pe([Wq,ln],kO),qq=pe([SO,ln,vc],xc),Hq=pe([qq,ln],NO),Kq=pe([_O,ln,vc],xc),Gq=pe([Kq,ln],CO),Yq=pe([Vq,Gq,Hq],Oh),Jq=pe([cn,eT,tT,zq,Bq,Yq,Yt,ln],EO),rT=pe([cn,Yt,jc,xw,_m,ln,Jq],AO),Qq=pe([rT,cn,vw],OO),Xq=pe([cn,rT,Qq,ln],TO),nT=e=>{var t=ln(e),r=vc(e),n=!1;return rd(e,t,r,n)},sT=pe([cn,nT],km),iT=pe([cn,vw,Xq,sT],fw),Zq=pe([Yt,xw,cn,ln],LO),eH=pe([Yt,xw,cn,ln],zO),tH=(e,t,r,n,s,i,l,u)=>{if(t){var{type:d}=t,m=Ho(e,u);if(n){var f=r==="scaleBand"&&n.bandwidth?n.bandwidth()/2:2,p=d==="category"&&n.bandwidth?n.bandwidth()/f:0;return p=u==="angleAxis"&&s!=null&&(s==null?void 0:s.length)>=2?Ts(s[0]-s[1])*2*p:p,m&&l?l.map((y,x)=>({coordinate:n(y)+p,value:y,index:x,offset:p})):n.domain().map((y,x)=>({coordinate:n(y)+p,value:i?i[y]:y,index:x,offset:p}))}}},ja=pe([Yt,cn,vw,iT,nT,Zq,eH,ln],tH),ww=pe([BO,WO,mq],(e,t,r)=>VO(r.shared,e,t)),aT=e=>e.tooltip.settings.trigger,bw=e=>e.tooltip.settings.defaultIndex,Dm=pe([bc,ww,aT,bw],JO),nc=pe([Dm,jc],yw),oT=pe([ja,nc],qO),lT=pe([Dm],e=>{if(e)return e.dataKey}),cT=pe([bc,ww,aT,bw],XO),rH=pe([ya,va,Yt,bn,ja,bw,cT,nd],QO),nH=pe([Dm,rH],(e,t)=>e!=null&&e.coordinate?e.coordinate:t),sH=pe([Dm],e=>e.active),iH=pe([cT,nc,ro,gO,oT,nd,ww],ZO);pe([iH],e=>{if(e!=null){var t=e.map(r=>r.payload).filter(r=>r!=null);return Array.from(new Set(t))}});function ON(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function TN(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?ON(Object(r),!0).forEach(function(n){aH(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ON(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function aH(e,t,r){return(t=oH(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function oH(e){var t=lH(e,"string");return typeof t=="symbol"?t:t+""}function lH(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var cH=()=>st(cn),uH=()=>{var e=cH(),t=st(ja),r=st(iT);return mh(!e||!r?void 0:TN(TN({},e),{},{scale:r}),t)};function IN(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Il(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?IN(Object(r),!0).forEach(function(n){dH(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):IN(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function dH(e,t,r){return(t=fH(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function fH(e){var t=hH(e,"string");return typeof t=="symbol"?t:t+""}function hH(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var mH=(e,t,r,n)=>{var s=t.find(i=>i&&i.index===r);if(s){if(e==="horizontal")return{x:s.coordinate,y:n.chartY};if(e==="vertical")return{x:n.chartX,y:s.coordinate}}return{x:0,y:0}},pH=(e,t,r,n)=>{var s=t.find(m=>m&&m.index===r);if(s){if(e==="centric"){var i=s.coordinate,{radius:l}=n;return Il(Il(Il({},n),Dn(n.cx,n.cy,l,i)),{},{angle:i,radius:l})}var u=s.coordinate,{angle:d}=n;return Il(Il(Il({},n),Dn(n.cx,n.cy,u,d)),{},{angle:d,radius:u})}return{angle:0,clockWise:!1,cx:0,cy:0,endAngle:0,innerRadius:0,outerRadius:0,radius:0,startAngle:0,x:0,y:0}};function gH(e,t){var{chartX:r,chartY:n}=e;return r>=t.left&&r<=t.left+t.width&&n>=t.top&&n<=t.top+t.height}var uT=(e,t,r,n,s)=>{var i,l=-1,u=(i=t==null?void 0:t.length)!==null&&i!==void 0?i:0;if(u<=1||e==null)return 0;if(n==="angleAxis"&&s!=null&&Math.abs(Math.abs(s[1]-s[0])-360)<=1e-6)for(var d=0;d<u;d++){var m=d>0?r[d-1].coordinate:r[u-1].coordinate,f=r[d].coordinate,p=d>=u-1?r[0].coordinate:r[d+1].coordinate,y=void 0;if(Ts(f-m)!==Ts(p-f)){var x=[];if(Ts(p-f)===Ts(s[1]-s[0])){y=p;var b=f+s[1]-s[0];x[0]=Math.min(b,(b+m)/2),x[1]=Math.max(b,(b+m)/2)}else{y=m;var j=p+s[1]-s[0];x[0]=Math.min(f,(j+f)/2),x[1]=Math.max(f,(j+f)/2)}var S=[Math.min(f,(y+f)/2),Math.max(f,(y+f)/2)];if(e>S[0]&&e<=S[1]||e>=x[0]&&e<=x[1]){({index:l}=r[d]);break}}else{var k=Math.min(m,p),C=Math.max(m,p);if(e>(k+f)/2&&e<=(C+f)/2){({index:l}=r[d]);break}}}else if(t){for(var N=0;N<u;N++)if(N===0&&e<=(t[N].coordinate+t[N+1].coordinate)/2||N>0&&N<u-1&&e>(t[N].coordinate+t[N-1].coordinate)/2&&e<=(t[N].coordinate+t[N+1].coordinate)/2||N===u-1&&e>(t[N].coordinate+t[N-1].coordinate)/2){({index:l}=t[N]);break}}return l},yH=()=>st(Zx),jw=(e,t)=>t,dT=(e,t,r)=>r,Sw=(e,t,r,n)=>n,vH=pe(ja,e=>sm(e,t=>t.coordinate)),_w=pe([bc,jw,dT,Sw],JO),fT=pe([_w,jc],yw),xH=(e,t,r)=>{if(t!=null){var n=bc(e);return t==="axis"?r==="hover"?n.axisInteraction.hover.dataKey:n.axisInteraction.click.dataKey:r==="hover"?n.itemInteraction.hover.dataKey:n.itemInteraction.click.dataKey}},hT=pe([bc,jw,dT,Sw],XO),Th=pe([ya,va,Yt,bn,ja,Sw,hT,nd],QO),wH=pe([_w,Th],(e,t)=>{var r;return(r=e.coordinate)!==null&&r!==void 0?r:t}),mT=pe([ja,fT],qO),bH=pe([hT,fT,ro,gO,mT,nd,jw],ZO),jH=pe([_w],e=>({isActive:e.active,activeIndex:e.index})),SH=(e,t,r,n,s,i,l)=>{if(!(!e||!r||!n||!s)&&gH(e,l)){var u=fB(e,t),d=uT(u,i,s,r,n),m=mH(t,s,d,e);return{activeIndex:String(d),activeCoordinate:m}}},_H=(e,t,r,n,s,i,l)=>{if(!(!e||!n||!s||!i||!r)){var u=d7(e,r);if(u){var d=hB(u,t),m=uT(d,l,i,n,s),f=pH(t,i,m,u);return{activeIndex:String(m),activeCoordinate:f}}}},kH=(e,t,r,n,s,i,l,u)=>{if(!(!e||!t||!n||!s||!i))return t==="horizontal"||t==="vertical"?SH(e,t,n,s,i,l,u):_H(e,t,r,n,s,i,l)},NH=pe(e=>e.zIndex.zIndexMap,(e,t)=>t,(e,t,r)=>r,(e,t,r)=>{if(t!=null){var n=e[t];if(n!=null)return r?n.panoramaElementId:n.elementId}}),CH=pe(e=>e.zIndex.zIndexMap,e=>{var t=Object.keys(e).map(n=>parseInt(n,10)).concat(Object.values(ms)),r=Array.from(new Set(t));return r.sort((n,s)=>n-s)},{memoizeOptions:{resultEqualityCheck:pV}});function DN(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function RN(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?DN(Object(r),!0).forEach(function(n){EH(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):DN(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function EH(e,t,r){return(t=AH(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function AH(e){var t=PH(e,"string");return typeof t=="symbol"?t:t+""}function PH(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var OH={},TH={zIndexMap:Object.values(ms).reduce((e,t)=>RN(RN({},e),{},{[t]:{elementId:void 0,panoramaElementId:void 0,consumers:0}}),OH)},IH=new Set(Object.values(ms));function DH(e){return IH.has(e)}var pT=ps({name:"zIndex",initialState:TH,reducers:{registerZIndexPortal:{reducer:(e,t)=>{var{zIndex:r}=t.payload;e.zIndexMap[r]?e.zIndexMap[r].consumers+=1:e.zIndexMap[r]={consumers:1,elementId:void 0,panoramaElementId:void 0}},prepare:nn()},unregisterZIndexPortal:{reducer:(e,t)=>{var{zIndex:r}=t.payload;e.zIndexMap[r]&&(e.zIndexMap[r].consumers-=1,e.zIndexMap[r].consumers<=0&&!DH(r)&&delete e.zIndexMap[r])},prepare:nn()},registerZIndexPortalId:{reducer:(e,t)=>{var{zIndex:r,elementId:n,isPanorama:s}=t.payload;e.zIndexMap[r]?s?e.zIndexMap[r].panoramaElementId=n:e.zIndexMap[r].elementId=n:e.zIndexMap[r]={consumers:0,elementId:s?void 0:n,panoramaElementId:s?n:void 0}},prepare:nn()},unregisterZIndexPortalId:{reducer:(e,t)=>{var{zIndex:r}=t.payload;e.zIndexMap[r]&&(t.payload.isPanorama?e.zIndexMap[r].panoramaElementId=void 0:e.zIndexMap[r].elementId=void 0)},prepare:nn()}}}),{registerZIndexPortal:RH,unregisterZIndexPortal:$H,registerZIndexPortalId:MH,unregisterZIndexPortalId:FH}=pT.actions,LH=pT.reducer;function no(e){var{zIndex:t,children:r}=e,n=YB(),s=n&&t!==void 0&&t!==0,i=Ms(),l=zr();v.useLayoutEffect(()=>s?(l(RH({zIndex:t})),()=>{l($H({zIndex:t}))}):hc,[l,t,s]);var u=st(m=>NH(m,t,i));if(!s)return r;if(!u)return null;var d=document.getElementById(u);return d?uC.createPortal(r,d):null}function _0(){return _0=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},_0.apply(null,arguments)}function $N(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Ef(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?$N(Object(r),!0).forEach(function(n){zH(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):$N(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function zH(e,t,r){return(t=UH(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function UH(e){var t=BH(e,"string");return typeof t=="symbol"?t:t+""}function BH(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function WH(e){var{cursor:t,cursorComp:r,cursorProps:n}=e;return v.isValidElement(t)?v.cloneElement(t,n):v.createElement(r,n)}function VH(e){var t,{coordinate:r,payload:n,index:s,offset:i,tooltipAxisBandSize:l,layout:u,cursor:d,tooltipEventType:m,chartName:f}=e,p=r,y=n,x=s;if(!d||!p||f!=="ScatterChart"&&m!=="axis")return null;var b,j,S;if(f==="ScatterChart")b=p,j=N8,S=ms.cursorLine;else if(f==="BarChart")b=C8(u,p,i,l),j=JA,S=ms.cursorRectangle;else if(u==="radial"&&JE(p)){var{cx:k,cy:C,radius:N,startAngle:O,endAngle:P}=QA(p);b={cx:k,cy:C,startAngle:O,endAngle:P,innerRadius:N,outerRadius:N},j=ZA,S=ms.cursorLine}else b={points:p7(u,p,i)},j=qA,S=ms.cursorLine;var T=typeof d=="object"&&"className"in d?d.className:void 0,D=Ef(Ef(Ef(Ef({stroke:"#ccc",pointerEvents:"none"},i),b),lx(d)),{},{payload:y,payloadIndex:x,className:fr("recharts-tooltip-cursor",T)});return v.createElement(no,{zIndex:(t=e.zIndex)!==null&&t!==void 0?t:S},v.createElement(WH,{cursor:d,cursorComp:j,cursorProps:D}))}function qH(e){var t=uH(),r=HB(),n=pm(),s=yH();return t==null||r==null||n==null||s==null?null:v.createElement(VH,_0({},e,{offset:r,layout:n,tooltipAxisBandSize:t,chartName:s}))}var gT=v.createContext(null),HH=()=>v.useContext(gT),Xy={exports:{}},MN;function KH(){return MN||(MN=1,(function(e){var t=Object.prototype.hasOwnProperty,r="~";function n(){}Object.create&&(n.prototype=Object.create(null),new n().__proto__||(r=!1));function s(d,m,f){this.fn=d,this.context=m,this.once=f||!1}function i(d,m,f,p,y){if(typeof f!="function")throw new TypeError("The listener must be a function");var x=new s(f,p||d,y),b=r?r+m:m;return d._events[b]?d._events[b].fn?d._events[b]=[d._events[b],x]:d._events[b].push(x):(d._events[b]=x,d._eventsCount++),d}function l(d,m){--d._eventsCount===0?d._events=new n:delete d._events[m]}function u(){this._events=new n,this._eventsCount=0}u.prototype.eventNames=function(){var m=[],f,p;if(this._eventsCount===0)return m;for(p in f=this._events)t.call(f,p)&&m.push(r?p.slice(1):p);return Object.getOwnPropertySymbols?m.concat(Object.getOwnPropertySymbols(f)):m},u.prototype.listeners=function(m){var f=r?r+m:m,p=this._events[f];if(!p)return[];if(p.fn)return[p.fn];for(var y=0,x=p.length,b=new Array(x);y<x;y++)b[y]=p[y].fn;return b},u.prototype.listenerCount=function(m){var f=r?r+m:m,p=this._events[f];return p?p.fn?1:p.length:0},u.prototype.emit=function(m,f,p,y,x,b){var j=r?r+m:m;if(!this._events[j])return!1;var S=this._events[j],k=arguments.length,C,N;if(S.fn){switch(S.once&&this.removeListener(m,S.fn,void 0,!0),k){case 1:return S.fn.call(S.context),!0;case 2:return S.fn.call(S.context,f),!0;case 3:return S.fn.call(S.context,f,p),!0;case 4:return S.fn.call(S.context,f,p,y),!0;case 5:return S.fn.call(S.context,f,p,y,x),!0;case 6:return S.fn.call(S.context,f,p,y,x,b),!0}for(N=1,C=new Array(k-1);N<k;N++)C[N-1]=arguments[N];S.fn.apply(S.context,C)}else{var O=S.length,P;for(N=0;N<O;N++)switch(S[N].once&&this.removeListener(m,S[N].fn,void 0,!0),k){case 1:S[N].fn.call(S[N].context);break;case 2:S[N].fn.call(S[N].context,f);break;case 3:S[N].fn.call(S[N].context,f,p);break;case 4:S[N].fn.call(S[N].context,f,p,y);break;default:if(!C)for(P=1,C=new Array(k-1);P<k;P++)C[P-1]=arguments[P];S[N].fn.apply(S[N].context,C)}}return!0},u.prototype.on=function(m,f,p){return i(this,m,f,p,!1)},u.prototype.once=function(m,f,p){return i(this,m,f,p,!0)},u.prototype.removeListener=function(m,f,p,y){var x=r?r+m:m;if(!this._events[x])return this;if(!f)return l(this,x),this;var b=this._events[x];if(b.fn)b.fn===f&&(!y||b.once)&&(!p||b.context===p)&&l(this,x);else{for(var j=0,S=[],k=b.length;j<k;j++)(b[j].fn!==f||y&&!b[j].once||p&&b[j].context!==p)&&S.push(b[j]);S.length?this._events[x]=S.length===1?S[0]:S:l(this,x)}return this},u.prototype.removeAllListeners=function(m){var f;return m?(f=r?r+m:m,this._events[f]&&l(this,f)):(this._events=new n,this._eventsCount=0),this},u.prototype.off=u.prototype.removeListener,u.prototype.addListener=u.prototype.on,u.prefixed=r,u.EventEmitter=u,e.exports=u})(Xy)),Xy.exports}var GH=KH();const YH=wi(GH);var $u=new YH,k0="recharts.syncEvent.tooltip",FN="recharts.syncEvent.brush";function JH(e,t){if(t){var r=Number.parseInt(t,10);if(!Di(r))return e==null?void 0:e[r]}}var QH={chartName:"",tooltipPayloadSearcher:void 0,eventEmitter:void 0,defaultTooltipEventType:"axis"},yT=ps({name:"options",initialState:QH,reducers:{createEventEmitter:e=>{e.eventEmitter==null&&(e.eventEmitter=Symbol("rechartsEventEmitter"))}}}),XH=yT.reducer,{createEventEmitter:ZH}=yT.actions;function eK(e){return e.tooltip.syncInteraction}var tK={chartData:void 0,computedData:void 0,dataStartIndex:0,dataEndIndex:0},vT=ps({name:"chartData",initialState:tK,reducers:{setChartData(e,t){if(e.chartData=t.payload,t.payload==null){e.dataStartIndex=0,e.dataEndIndex=0;return}t.payload.length>0&&e.dataEndIndex!==t.payload.length-1&&(e.dataEndIndex=t.payload.length-1)},setComputedData(e,t){e.computedData=t.payload},setDataStartEndIndexes(e,t){var{startIndex:r,endIndex:n}=t.payload;r!=null&&(e.dataStartIndex=r),n!=null&&(e.dataEndIndex=n)}}}),{setChartData:LN,setDataStartEndIndexes:rK,setComputedData:XZ}=vT.actions,nK=vT.reducer,sK=["x","y"];function zN(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Dl(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?zN(Object(r),!0).forEach(function(n){iK(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):zN(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function iK(e,t,r){return(t=aK(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function aK(e){var t=oK(e,"string");return typeof t=="symbol"?t:t+""}function oK(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function lK(e,t){if(e==null)return{};var r,n,s=cK(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function cK(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function uK(){var e=st(ew),t=st(tw),r=zr(),n=st(XP),s=st(ja),i=pm(),l=mm(),u=st(d=>d.rootProps.className);v.useEffect(()=>{if(e==null)return hc;var d=(m,f,p)=>{if(t!==p&&e===m){if(n==="index"){var y;if(l&&f!==null&&f!==void 0&&(y=f.payload)!==null&&y!==void 0&&y.coordinate&&f.payload.sourceViewBox){var x=f.payload.coordinate,{x:b,y:j}=x,S=lK(x,sK),{x:k,y:C,width:N,height:O}=f.payload.sourceViewBox,P=Dl(Dl({},S),{},{x:l.x+(N?(b-k)/N:0)*l.width,y:l.y+(O?(j-C)/O:0)*l.height});r(Dl(Dl({},f),{},{payload:Dl(Dl({},f.payload),{},{coordinate:P})}))}else r(f);return}if(s!=null){var T;if(typeof n=="function"){var D={activeTooltipIndex:f.payload.index==null?void 0:Number(f.payload.index),isTooltipActive:f.payload.active,activeIndex:f.payload.index==null?void 0:Number(f.payload.index),activeLabel:f.payload.label,activeDataKey:f.payload.dataKey,activeCoordinate:f.payload.coordinate},q=n(s,D);T=s[q]}else n==="value"&&(T=s.find(H=>String(H.value)===f.payload.label));var{coordinate:F}=f.payload;if(T==null||f.payload.active===!1||F==null||l==null){r(j0({active:!1,coordinate:void 0,dataKey:void 0,index:null,label:void 0,sourceViewBox:void 0}));return}var{x:K,y:B}=F,Q=Math.min(K,l.x+l.width),oe=Math.min(B,l.y+l.height),ae={x:i==="horizontal"?T.coordinate:Q,y:i==="horizontal"?oe:T.coordinate},J=j0({active:f.payload.active,coordinate:ae,dataKey:f.payload.dataKey,index:String(T.index),label:f.payload.label,sourceViewBox:f.payload.sourceViewBox});r(J)}}};return $u.on(k0,d),()=>{$u.off(k0,d)}},[u,r,t,e,n,s,i,l])}function dK(){var e=st(ew),t=st(tw),r=zr();v.useEffect(()=>{if(e==null)return hc;var n=(s,i,l)=>{t!==l&&e===s&&r(rK(i))};return $u.on(FN,n),()=>{$u.off(FN,n)}},[r,t,e])}function fK(){var e=zr();v.useEffect(()=>{e(ZH())},[e]),uK(),dK()}function hK(e,t,r,n,s,i){var l=st(x=>xH(x,e,t)),u=st(tw),d=st(ew),m=st(XP),f=st(eK),p=f==null?void 0:f.active,y=mm();v.useEffect(()=>{if(!p&&d!=null&&u!=null){var x=j0({active:i,coordinate:r,dataKey:l,index:s,label:typeof n=="number"?String(n):n,sourceViewBox:y});$u.emit(k0,d,x,u)}},[p,r,l,s,n,u,d,m,i,y])}function UN(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function BN(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?UN(Object(r),!0).forEach(function(n){mK(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):UN(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function mK(e,t,r){return(t=pK(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function pK(e){var t=gK(e,"string");return typeof t=="symbol"?t:t+""}function gK(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function yK(e){return e.dataKey}function vK(e,t){return v.isValidElement(e)?v.cloneElement(e,t):typeof e=="function"?v.createElement(e,t):v.createElement(s8,t)}var WN=[],xK={allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",axisId:0,contentStyle:{},cursor:!0,filterNull:!0,isAnimationActive:!mc.isSsr,itemSorter:"name",itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,wrapperStyle:{}};function wK(e){var t,r,n=ti(e,xK),{active:s,allowEscapeViewBox:i,animationDuration:l,animationEasing:u,content:d,filterNull:m,isAnimationActive:f,offset:p,payloadUniqBy:y,position:x,reverseDirection:b,useTranslate3d:j,wrapperStyle:S,cursor:k,shared:C,trigger:N,defaultIndex:O,portal:P,axisId:T}=n,D=zr(),q=typeof O=="number"?String(O):O;v.useEffect(()=>{D(vq({shared:C,trigger:N,axisId:T,active:s,defaultIndex:q}))},[D,C,N,T,s,q]);var F=mm(),K=VA(),B=hq(C),{activeIndex:Q,isActive:oe}=(t=st(xe=>jH(xe,B,N,q)))!==null&&t!==void 0?t:{},ae=st(xe=>bH(xe,B,N,q)),J=st(xe=>mT(xe,B,N,q)),H=st(xe=>wH(xe,B,N,q)),ne=ae,ie=HH(),ge=(r=s??oe)!==null&&r!==void 0?r:!1,[ve,I]=eU([ne,ge]),V=B==="axis"?J:void 0;hK(B,N,H,V,Q,ge);var Ae=P??ie;if(Ae==null||F==null||B==null)return null;var X=ne??WN;ge||(X=WN),m&&X.length&&(X=Nz(X.filter(xe=>xe.value!=null&&(xe.hide!==!0||n.includeHidden)),y,yK));var re=X.length>0,de=v.createElement(d8,{allowEscapeViewBox:i,animationDuration:l,animationEasing:u,isAnimationActive:f,active:ge,coordinate:H,hasPayload:re,offset:p,position:x,reverseDirection:b,useTranslate3d:j,viewBox:F,wrapperStyle:S,lastBoundingBox:ve,innerRef:I,hasPortalFromProps:!!P},vK(d,BN(BN({},n),{},{payload:X,label:V,active:ge,activeIndex:Q,coordinate:H,accessibilityLayer:K})));return v.createElement(v.Fragment,null,uC.createPortal(de,Ae),ge&&v.createElement(qH,{cursor:k,tooltipEventType:B,coordinate:H,payload:X,index:Q}))}var kw=e=>null;kw.displayName="Cell";function bK(e,t,r){return(t=jK(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function jK(e){var t=SK(e,"string");return typeof t=="symbol"?t:t+""}function SK(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class _K{constructor(t){bK(this,"cache",new Map),this.maxSize=t}get(t){var r=this.cache.get(t);return r!==void 0&&(this.cache.delete(t),this.cache.set(t,r)),r}set(t,r){if(this.cache.has(t))this.cache.delete(t);else if(this.cache.size>=this.maxSize){var n=this.cache.keys().next().value;this.cache.delete(n)}this.cache.set(t,r)}clear(){this.cache.clear()}size(){return this.cache.size}}function VN(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function kK(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?VN(Object(r),!0).forEach(function(n){NK(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):VN(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function NK(e,t,r){return(t=CK(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function CK(e){var t=EK(e,"string");return typeof t=="symbol"?t:t+""}function EK(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var AK={cacheSize:2e3,enableCache:!0},xT=kK({},AK),qN=new _K(xT.cacheSize),PK={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},HN="recharts_measurement_span";function OK(e,t){var r=t.fontSize||"",n=t.fontFamily||"",s=t.fontWeight||"",i=t.fontStyle||"",l=t.letterSpacing||"",u=t.textTransform||"";return"".concat(e,"|").concat(r,"|").concat(n,"|").concat(s,"|").concat(i,"|").concat(l,"|").concat(u)}var KN=(e,t)=>{try{var r=document.getElementById(HN);r||(r=document.createElement("span"),r.setAttribute("id",HN),r.setAttribute("aria-hidden","true"),document.body.appendChild(r)),Object.assign(r.style,PK,t),r.textContent="".concat(e);var n=r.getBoundingClientRect();return{width:n.width,height:n.height}}catch{return{width:0,height:0}}},xu=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(t==null||mc.isSsr)return{width:0,height:0};if(!xT.enableCache)return KN(t,r);var n=OK(t,r),s=qN.get(n);if(s)return s;var i=KN(t,r);return qN.set(n,i),i},GN=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,YN=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,TK=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,IK=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,wT={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},DK=Object.keys(wT),Bl="NaN";function RK(e,t){return e*wT[t]}class ds{static parse(t){var r,[,n,s]=(r=IK.exec(t))!==null&&r!==void 0?r:[];return new ds(parseFloat(n),s??"")}constructor(t,r){this.num=t,this.unit=r,this.num=t,this.unit=r,Di(t)&&(this.unit=""),r!==""&&!TK.test(r)&&(this.num=NaN,this.unit=""),DK.includes(r)&&(this.num=RK(t,r),this.unit="px")}add(t){return this.unit!==t.unit?new ds(NaN,""):new ds(this.num+t.num,this.unit)}subtract(t){return this.unit!==t.unit?new ds(NaN,""):new ds(this.num-t.num,this.unit)}multiply(t){return this.unit!==""&&t.unit!==""&&this.unit!==t.unit?new ds(NaN,""):new ds(this.num*t.num,this.unit||t.unit)}divide(t){return this.unit!==""&&t.unit!==""&&this.unit!==t.unit?new ds(NaN,""):new ds(this.num/t.num,this.unit||t.unit)}toString(){return"".concat(this.num).concat(this.unit)}isNaN(){return Di(this.num)}}function bT(e){if(e.includes(Bl))return Bl;for(var t=e;t.includes("*")||t.includes("/");){var r,[,n,s,i]=(r=GN.exec(t))!==null&&r!==void 0?r:[],l=ds.parse(n??""),u=ds.parse(i??""),d=s==="*"?l.multiply(u):l.divide(u);if(d.isNaN())return Bl;t=t.replace(GN,d.toString())}for(;t.includes("+")||/.-\d+(?:\.\d+)?/.test(t);){var m,[,f,p,y]=(m=YN.exec(t))!==null&&m!==void 0?m:[],x=ds.parse(f??""),b=ds.parse(y??""),j=p==="+"?x.add(b):x.subtract(b);if(j.isNaN())return Bl;t=t.replace(YN,j.toString())}return t}var JN=/\(([^()]*)\)/;function $K(e){for(var t=e,r;(r=JN.exec(t))!=null;){var[,n]=r;t=t.replace(JN,bT(n))}return t}function MK(e){var t=e.replace(/\s+/g,"");return t=$K(t),t=bT(t),t}function FK(e){try{return MK(e)}catch{return Bl}}function Zy(e){var t=FK(e.slice(5,-1));return t===Bl?"":t}var LK=["x","y","lineHeight","capHeight","fill","scaleToFit","textAnchor","verticalAnchor"],zK=["dx","dy","angle","className","breakAll"];function N0(){return N0=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},N0.apply(null,arguments)}function QN(e,t){if(e==null)return{};var r,n,s=UK(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function UK(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var jT=/[ \f\n\r\t\v\u2028\u2029]+/,ST=e=>{var{children:t,breakAll:r,style:n}=e;try{var s=[];wn(t)||(r?s=t.toString().split(""):s=t.toString().split(jT));var i=s.map(u=>({word:u,width:xu(u,n).width})),l=r?0:xu("",n).width;return{wordsWithComputedWidth:i,spaceWidth:l}}catch{return null}};function BK(e){return e==="start"||e==="middle"||e==="end"||e==="inherit"}var _T=(e,t,r,n)=>e.reduce((s,i)=>{var{word:l,width:u}=i,d=s[s.length-1];if(d&&u!=null&&(t==null||n||d.width+u+r<Number(t)))d.words.push(l),d.width+=u+r;else{var m={words:[l],width:u};s.push(m)}return s},[]),kT=e=>e.reduce((t,r)=>t.width>r.width?t:r),WK="",XN=(e,t,r,n,s,i,l,u)=>{var d=e.slice(0,t),m=ST({breakAll:r,style:n,children:d+WK});if(!m)return[!1,[]];var f=_T(m.wordsWithComputedWidth,i,l,u),p=f.length>s||kT(f).width>Number(i);return[p,f]},VK=(e,t,r,n,s)=>{var{maxLines:i,children:l,style:u,breakAll:d}=e,m=lt(i),f=String(l),p=_T(t,n,r,s);if(!m||s)return p;var y=p.length>i||kT(p).width>Number(n);if(!y)return p;for(var x=0,b=f.length-1,j=0,S;x<=b&&j<=f.length-1;){var k=Math.floor((x+b)/2),C=k-1,[N,O]=XN(f,C,d,u,i,n,r,s),[P]=XN(f,k,d,u,i,n,r,s);if(!N&&!P&&(x=k+1),N&&P&&(b=k-1),!N&&P){S=O;break}j++}return S||p},ZN=e=>{var t=wn(e)?[]:e.toString().split(jT);return[{words:t,width:void 0}]},qK=e=>{var{width:t,scaleToFit:r,children:n,style:s,breakAll:i,maxLines:l}=e;if((t||r)&&!mc.isSsr){var u,d,m=ST({breakAll:i,children:n,style:s});if(m){var{wordsWithComputedWidth:f,spaceWidth:p}=m;u=f,d=p}else return ZN(n);return VK({breakAll:i,children:n,maxLines:l,style:s},u,d,t,!!r)}return ZN(n)},NT="#808080",HK={breakAll:!1,capHeight:"0.71em",fill:NT,lineHeight:"1em",scaleToFit:!1,textAnchor:"start",verticalAnchor:"end",x:0,y:0},Nw=v.forwardRef((e,t)=>{var r=ti(e,HK),{x:n,y:s,lineHeight:i,capHeight:l,fill:u,scaleToFit:d,textAnchor:m,verticalAnchor:f}=r,p=QN(r,LK),y=v.useMemo(()=>qK({breakAll:p.breakAll,children:p.children,maxLines:p.maxLines,scaleToFit:d,style:p.style,width:p.width}),[p.breakAll,p.children,p.maxLines,d,p.style,p.width]),{dx:x,dy:b,angle:j,className:S,breakAll:k}=p,C=QN(p,zK);if(!Ri(n)||!Ri(s)||y.length===0)return null;var N=Number(n)+(lt(x)?x:0),O=Number(s)+(lt(b)?b:0);if(!Lr(N)||!Lr(O))return null;var P;switch(f){case"start":P=Zy("calc(".concat(l,")"));break;case"middle":P=Zy("calc(".concat((y.length-1)/2," * -").concat(i," + (").concat(l," / 2))"));break;default:P=Zy("calc(".concat(y.length-1," * -").concat(i,")"));break}var T=[];if(d){var D=y[0].width,{width:q}=p;T.push("scale(".concat(lt(q)&&lt(D)?q/D:1,")"))}return j&&T.push("rotate(".concat(j,", ").concat(N,", ").concat(O,")")),T.length&&(C.transform=T.join(" ")),v.createElement("text",N0({},Xs(C),{ref:t,x:N,y:O,className:fr("recharts-text",S),textAnchor:m,fill:u.includes("url")?NT:u}),y.map((F,K)=>{var B=F.words.join(k?"":" ");return v.createElement("tspan",{x:N,dy:K===0?P:i,key:"".concat(B,"-").concat(K)},B)}))});Nw.displayName="Text";var KK=["labelRef"];function GK(e,t){if(e==null)return{};var r,n,s=YK(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function YK(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function e2(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Mr(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?e2(Object(r),!0).forEach(function(n){JK(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):e2(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function JK(e,t,r){return(t=QK(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function QK(e){var t=XK(e,"string");return typeof t=="symbol"?t:t+""}function XK(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Xi(){return Xi=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Xi.apply(null,arguments)}var CT=v.createContext(null),ZK=e=>{var{x:t,y:r,upperWidth:n,lowerWidth:s,width:i,height:l,children:u}=e,d=v.useMemo(()=>({x:t,y:r,upperWidth:n,lowerWidth:s,width:i,height:l}),[t,r,n,s,i,l]);return v.createElement(CT.Provider,{value:d},u)},ET=()=>{var e=v.useContext(CT),t=mm();return e||BA(t)},eG=v.createContext(null),tG=()=>{var e=v.useContext(eG),t=st(nO);return e||t},rG=e=>{var{value:t,formatter:r}=e,n=wn(e.children)?t:e.children;return typeof r=="function"?r(n):n},Cw=e=>e!=null&&typeof e=="function",nG=(e,t)=>{var r=Ts(t-e),n=Math.min(Math.abs(t-e),360);return r*n},sG=(e,t,r,n,s)=>{var{offset:i,className:l}=e,{cx:u,cy:d,innerRadius:m,outerRadius:f,startAngle:p,endAngle:y,clockWise:x}=s,b=(m+f)/2,j=nG(p,y),S=j>=0?1:-1,k,C;switch(t){case"insideStart":k=p+S*i,C=x;break;case"insideEnd":k=y-S*i,C=!x;break;case"end":k=y+S*i,C=x;break;default:throw new Error("Unsupported position ".concat(t))}C=j<=0?C:!C;var N=Dn(u,d,b,k),O=Dn(u,d,b,k+(C?1:-1)*359),P="M".concat(N.x,",").concat(N.y,`
    A`).concat(b,",").concat(b,",0,1,").concat(C?0:1,`,
    `).concat(O.x,",").concat(O.y),T=wn(e.id)?Nu("recharts-radial-line-"):e.id;return v.createElement("text",Xi({},n,{dominantBaseline:"central",className:fr("recharts-radial-bar-label",l)}),v.createElement("defs",null,v.createElement("path",{id:T,d:P})),v.createElement("textPath",{xlinkHref:"#".concat(T)},r))},iG=(e,t,r)=>{var{cx:n,cy:s,innerRadius:i,outerRadius:l,startAngle:u,endAngle:d}=e,m=(u+d)/2;if(r==="outside"){var{x:f,y:p}=Dn(n,s,l+t,m);return{x:f,y:p,textAnchor:f>=n?"start":"end",verticalAnchor:"middle"}}if(r==="center")return{x:n,y:s,textAnchor:"middle",verticalAnchor:"middle"};if(r==="centerTop")return{x:n,y:s,textAnchor:"middle",verticalAnchor:"start"};if(r==="centerBottom")return{x:n,y:s,textAnchor:"middle",verticalAnchor:"end"};var y=(i+l)/2,{x,y:b}=Dn(n,s,y,m);return{x,y:b,textAnchor:"middle",verticalAnchor:"middle"}},C0=e=>"cx"in e&&lt(e.cx),aG=(e,t)=>{var{parentViewBox:r,offset:n,position:s}=e,i;r!=null&&!C0(r)&&(i=r);var{x:l,y:u,upperWidth:d,lowerWidth:m,height:f}=t,p=l,y=l+(d-m)/2,x=(p+y)/2,b=(d+m)/2,j=p+d/2,S=f>=0?1:-1,k=S*n,C=S>0?"end":"start",N=S>0?"start":"end",O=d>=0?1:-1,P=O*n,T=O>0?"end":"start",D=O>0?"start":"end";if(s==="top"){var q={x:p+d/2,y:u-k,textAnchor:"middle",verticalAnchor:C};return Mr(Mr({},q),i?{height:Math.max(u-i.y,0),width:d}:{})}if(s==="bottom"){var F={x:y+m/2,y:u+f+k,textAnchor:"middle",verticalAnchor:N};return Mr(Mr({},F),i?{height:Math.max(i.y+i.height-(u+f),0),width:m}:{})}if(s==="left"){var K={x:x-P,y:u+f/2,textAnchor:T,verticalAnchor:"middle"};return Mr(Mr({},K),i?{width:Math.max(K.x-i.x,0),height:f}:{})}if(s==="right"){var B={x:x+b+P,y:u+f/2,textAnchor:D,verticalAnchor:"middle"};return Mr(Mr({},B),i?{width:Math.max(i.x+i.width-B.x,0),height:f}:{})}var Q=i?{width:b,height:f}:{};return s==="insideLeft"?Mr({x:x+P,y:u+f/2,textAnchor:D,verticalAnchor:"middle"},Q):s==="insideRight"?Mr({x:x+b-P,y:u+f/2,textAnchor:T,verticalAnchor:"middle"},Q):s==="insideTop"?Mr({x:p+d/2,y:u+k,textAnchor:"middle",verticalAnchor:N},Q):s==="insideBottom"?Mr({x:y+m/2,y:u+f-k,textAnchor:"middle",verticalAnchor:C},Q):s==="insideTopLeft"?Mr({x:p+P,y:u+k,textAnchor:D,verticalAnchor:N},Q):s==="insideTopRight"?Mr({x:p+d-P,y:u+k,textAnchor:T,verticalAnchor:N},Q):s==="insideBottomLeft"?Mr({x:y+P,y:u+f-k,textAnchor:D,verticalAnchor:C},Q):s==="insideBottomRight"?Mr({x:y+m-P,y:u+f-k,textAnchor:T,verticalAnchor:C},Q):s&&typeof s=="object"&&(lt(s.x)||ca(s.x))&&(lt(s.y)||ca(s.y))?Mr({x:l+xi(s.x,b),y:u+xi(s.y,f),textAnchor:"end",verticalAnchor:"end"},Q):Mr({x:j,y:u+f/2,textAnchor:"middle",verticalAnchor:"middle"},Q)},oG={offset:5,zIndex:ms.label};function Va(e){var t=ti(e,oG),{viewBox:r,position:n,value:s,children:i,content:l,className:u="",textBreakAll:d,labelRef:m}=t,f=tG(),p=ET(),y=n==="center"?p:f??p,x,b,j;if(r==null?x=y:C0(r)?x=r:x=BA(r),!x||wn(s)&&wn(i)&&!v.isValidElement(l)&&typeof l!="function")return null;var S=Mr(Mr({},t),{},{viewBox:x});if(v.isValidElement(l)){var{labelRef:k}=S,C=GK(S,KK);return v.cloneElement(l,C)}if(typeof l=="function"){if(b=v.createElement(l,S),v.isValidElement(b))return b}else b=rG(t);var N=Xs(t);if(C0(x)){if(n==="insideStart"||n==="insideEnd"||n==="end")return sG(t,n,b,N,x);j=iG(x,t.offset,t.position)}else j=aG(t,x);return v.createElement(no,{zIndex:t.zIndex},v.createElement(Nw,Xi({ref:m,className:fr("recharts-label",u)},N,j,{textAnchor:BK(N.textAnchor)?N.textAnchor:j.textAnchor,breakAll:d}),b))}Va.displayName="Label";var lG=(e,t,r)=>{if(!e)return null;var n={viewBox:t,labelRef:r};return e===!0?v.createElement(Va,Xi({key:"label-implicit"},n)):Ri(e)?v.createElement(Va,Xi({key:"label-implicit",value:e},n)):v.isValidElement(e)?e.type===Va?v.cloneElement(e,Mr({key:"label-implicit"},n)):v.createElement(Va,Xi({key:"label-implicit",content:e},n)):Cw(e)?v.createElement(Va,Xi({key:"label-implicit",content:e},n)):e&&typeof e=="object"?v.createElement(Va,Xi({},e,{key:"label-implicit"},n)):null};function cG(e){var{label:t,labelRef:r}=e,n=ET();return lG(t,n,r)||null}var ev={},tv={},t2;function uG(){return t2||(t2=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r[r.length-1]}e.last=t})(tv)),tv}var rv={},r2;function dG(){return r2||(r2=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return Array.isArray(r)?r:Array.from(r)}e.toArray=t})(rv)),rv}var n2;function fG(){return n2||(n2=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=uG(),r=dG(),n=gx();function s(i){if(n.isArrayLike(i))return t.last(r.toArray(i))}e.last=s})(ev)),ev}var nv,s2;function hG(){return s2||(s2=1,nv=fG().last),nv}var mG=hG();const pG=wi(mG);var gG=["valueAccessor"],yG=["dataKey","clockWise","id","textBreakAll","zIndex"];function Ih(){return Ih=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Ih.apply(null,arguments)}function i2(e,t){if(e==null)return{};var r,n,s=vG(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function vG(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var xG=e=>Array.isArray(e.value)?pG(e.value):e.value,AT=v.createContext(void 0),wG=AT.Provider,PT=v.createContext(void 0);PT.Provider;function bG(){return v.useContext(AT)}function jG(){return v.useContext(PT)}function zf(e){var{valueAccessor:t=xG}=e,r=i2(e,gG),{dataKey:n,clockWise:s,id:i,textBreakAll:l,zIndex:u}=r,d=i2(r,yG),m=bG(),f=jG(),p=m||f;return!p||!p.length?null:v.createElement(no,{zIndex:u??ms.label},v.createElement(la,{className:"recharts-label-list"},p.map((y,x)=>{var b,j=wn(n)?t(y,x):es(y&&y.payload,n),S=wn(i)?{}:{id:"".concat(i,"-").concat(x)};return v.createElement(Va,Ih({key:"label-".concat(x)},Xs(y),d,S,{fill:(b=r.fill)!==null&&b!==void 0?b:y.fill,parentViewBox:y.parentViewBox,value:j,textBreakAll:l,viewBox:y.viewBox,index:x,zIndex:0}))})))}zf.displayName="LabelList";function SG(e){var{label:t}=e;return t?t===!0?v.createElement(zf,{key:"labelList-implicit"}):v.isValidElement(t)||Cw(t)?v.createElement(zf,{key:"labelList-implicit",content:t}):typeof t=="object"?v.createElement(zf,Ih({key:"labelList-implicit"},t,{type:String(t.type)})):null:null}var _G={radiusAxis:{},angleAxis:{}},OT=ps({name:"polarAxis",initialState:_G,reducers:{addRadiusAxis(e,t){e.radiusAxis[t.payload.id]=t.payload},removeRadiusAxis(e,t){delete e.radiusAxis[t.payload.id]},addAngleAxis(e,t){e.angleAxis[t.payload.id]=t.payload},removeAngleAxis(e,t){delete e.angleAxis[t.payload.id]}}}),{addRadiusAxis:ZZ,removeRadiusAxis:eee,addAngleAxis:tee,removeAngleAxis:ree}=OT.actions,kG=OT.reducer,sv={exports:{}},Jt={};/**
 * @license React
 * react-is.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var a2;function NG(){if(a2)return Jt;a2=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),i=Symbol.for("react.consumer"),l=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),m=Symbol.for("react.suspense_list"),f=Symbol.for("react.memo"),p=Symbol.for("react.lazy"),y=Symbol.for("react.view_transition"),x=Symbol.for("react.client.reference");function b(j){if(typeof j=="object"&&j!==null){var S=j.$$typeof;switch(S){case e:switch(j=j.type,j){case r:case s:case n:case d:case m:case y:return j;default:switch(j=j&&j.$$typeof,j){case l:case u:case p:case f:return j;case i:return j;default:return S}}case t:return S}}}return Jt.ContextConsumer=i,Jt.ContextProvider=l,Jt.Element=e,Jt.ForwardRef=u,Jt.Fragment=r,Jt.Lazy=p,Jt.Memo=f,Jt.Portal=t,Jt.Profiler=s,Jt.StrictMode=n,Jt.Suspense=d,Jt.SuspenseList=m,Jt.isContextConsumer=function(j){return b(j)===i},Jt.isContextProvider=function(j){return b(j)===l},Jt.isElement=function(j){return typeof j=="object"&&j!==null&&j.$$typeof===e},Jt.isForwardRef=function(j){return b(j)===u},Jt.isFragment=function(j){return b(j)===r},Jt.isLazy=function(j){return b(j)===p},Jt.isMemo=function(j){return b(j)===f},Jt.isPortal=function(j){return b(j)===t},Jt.isProfiler=function(j){return b(j)===s},Jt.isStrictMode=function(j){return b(j)===n},Jt.isSuspense=function(j){return b(j)===d},Jt.isSuspenseList=function(j){return b(j)===m},Jt.isValidElementType=function(j){return typeof j=="string"||typeof j=="function"||j===r||j===s||j===n||j===d||j===m||typeof j=="object"&&j!==null&&(j.$$typeof===p||j.$$typeof===f||j.$$typeof===l||j.$$typeof===i||j.$$typeof===u||j.$$typeof===x||j.getModuleId!==void 0)},Jt.typeOf=b,Jt}var o2;function CG(){return o2||(o2=1,sv.exports=NG()),sv.exports}var EG=CG(),l2=e=>typeof e=="string"?e:e?e.displayName||e.name||"Component":"",c2=null,iv=null,TT=e=>{if(e===c2&&Array.isArray(iv))return iv;var t=[];return v.Children.forEach(e,r=>{wn(r)||(EG.isFragment(r)?t=t.concat(TT(r.props.children)):t.push(r))}),iv=t,c2=e,t};function AG(e,t){var r=[],n=[];return Array.isArray(t)?n=t.map(s=>l2(s)):n=[l2(t)],TT(e).forEach(s=>{var i=Ql(s,"type.displayName")||Ql(s,"type.name");i&&n.indexOf(i)!==-1&&r.push(s)}),r}var av={},u2;function PG(){return u2||(u2=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){var s;if(typeof r!="object"||r==null)return!1;if(Object.getPrototypeOf(r)===null)return!0;if(Object.prototype.toString.call(r)!=="[object Object]"){const i=r[Symbol.toStringTag];return i==null||!((s=Object.getOwnPropertyDescriptor(r,Symbol.toStringTag))!=null&&s.writable)?!1:r.toString()===`[object ${i}]`}let n=r;for(;Object.getPrototypeOf(n)!==null;)n=Object.getPrototypeOf(n);return Object.getPrototypeOf(r)===n}e.isPlainObject=t})(av)),av}var ov,d2;function OG(){return d2||(d2=1,ov=PG().isPlainObject),ov}var TG=OG();const IG=wi(TG);function f2(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function h2(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?f2(Object(r),!0).forEach(function(n){DG(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):f2(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function DG(e,t,r){return(t=RG(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function RG(e){var t=$G(e,"string");return typeof t=="symbol"?t:t+""}function $G(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Dh(){return Dh=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Dh.apply(null,arguments)}var m2=(e,t,r,n,s)=>{var i=r-n,l;return l="M ".concat(e,",").concat(t),l+="L ".concat(e+r,",").concat(t),l+="L ".concat(e+r-i/2,",").concat(t+s),l+="L ".concat(e+r-i/2-n,",").concat(t+s),l+="L ".concat(e,",").concat(t," Z"),l},MG={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},FG=e=>{var t=ti(e,MG),{x:r,y:n,upperWidth:s,lowerWidth:i,height:l,className:u}=t,{animationEasing:d,animationDuration:m,animationBegin:f,isUpdateAnimationActive:p}=t,y=v.useRef(null),[x,b]=v.useState(-1),j=v.useRef(s),S=v.useRef(i),k=v.useRef(l),C=v.useRef(r),N=v.useRef(n),O=Nx(e,"trapezoid-");if(v.useEffect(()=>{if(y.current&&y.current.getTotalLength)try{var ae=y.current.getTotalLength();ae&&b(ae)}catch{}},[]),r!==+r||n!==+n||s!==+s||i!==+i||l!==+l||s===0&&i===0||l===0)return null;var P=fr("recharts-trapezoid",u);if(!p)return v.createElement("g",null,v.createElement("path",Dh({},Xs(t),{className:P,d:m2(r,n,s,i,l)})));var T=j.current,D=S.current,q=k.current,F=C.current,K=N.current,B="0px ".concat(x===-1?1:x,"px"),Q="".concat(x,"px 0px"),oe=HA(["strokeDasharray"],m,d);return v.createElement(kx,{animationId:O,key:O,canBegin:x>0,duration:m,easing:d,isActive:p,begin:f},ae=>{var J=Tn(T,s,ae),H=Tn(D,i,ae),ne=Tn(q,l,ae),ie=Tn(F,r,ae),ge=Tn(K,n,ae);y.current&&(j.current=J,S.current=H,k.current=ne,C.current=ie,N.current=ge);var ve=ae>0?{transition:oe,strokeDasharray:Q}:{strokeDasharray:B};return v.createElement("path",Dh({},Xs(t),{className:P,d:m2(ie,ge,J,H,ne),ref:y,style:h2(h2({},ve),t.style)}))})},LG=["option","shapeType","propTransformer","activeClassName","isActive"];function zG(e,t){if(e==null)return{};var r,n,s=UG(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function UG(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function p2(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Rh(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?p2(Object(r),!0).forEach(function(n){BG(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):p2(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function BG(e,t,r){return(t=WG(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function WG(e){var t=VG(e,"string");return typeof t=="symbol"?t:t+""}function VG(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function qG(e,t){return Rh(Rh({},t),e)}function HG(e,t){return e==="symbols"}function g2(e){var{shapeType:t,elementProps:r}=e;switch(t){case"rectangle":return v.createElement(JA,r);case"trapezoid":return v.createElement(FG,r);case"sector":return v.createElement(ZA,r);case"symbols":if(HG(t))return v.createElement(YE,r);break;case"curve":return v.createElement(qA,r);default:return null}}function KG(e){return v.isValidElement(e)?e.props:e}function GG(e){var{option:t,shapeType:r,propTransformer:n=qG,activeClassName:s="recharts-active-shape",isActive:i}=e,l=zG(e,LG),u;if(v.isValidElement(t))u=v.cloneElement(t,Rh(Rh({},l),KG(t)));else if(typeof t=="function")u=t(l);else if(IG(t)&&typeof t!="boolean"){var d=n(t,l);u=v.createElement(g2,{shapeType:r,elementProps:d})}else{var m=l;u=v.createElement(g2,{shapeType:r,elementProps:m})}return i?v.createElement(la,{className:s},u):u}var IT=(e,t)=>{var r=zr();return(n,s)=>i=>{e==null||e(n,s,i),r(KO({activeIndex:String(s),activeDataKey:t,activeCoordinate:n.tooltipPosition}))}},DT=e=>{var t=zr();return(r,n)=>s=>{e==null||e(r,n,s),t(xq())}},RT=(e,t)=>{var r=zr();return(n,s)=>i=>{e==null||e(n,s,i),r(wq({activeIndex:String(s),activeDataKey:t,activeCoordinate:n.tooltipPosition}))}};function YG(e){var{fn:t,args:r}=e,n=zr(),s=Ms();return v.useLayoutEffect(()=>{if(!s){var i=t(r);return n(gq(i)),()=>{n(yq(i))}}},[t,r,n,s]),null}function JG(e){var{legendPayload:t}=e,r=zr(),n=Ms();return v.useLayoutEffect(()=>n?hc:(r(QB(t)),()=>{r(XB(t))}),[r,n,t]),null}var lv,QG=()=>{var[e]=v.useState(()=>Nu("uid-"));return e},XG=(lv=XI.useId)!==null&&lv!==void 0?lv:QG;function $T(e,t){var r=XG();return t||(e?"".concat(e,"-").concat(r):r)}var ZG=v.createContext(void 0),eY=e=>{var{id:t,type:r,children:n}=e,s=$T("recharts-".concat(r),t);return v.createElement(ZG.Provider,{value:s},n(s))},tY={cartesianItems:[],polarItems:[]},MT=ps({name:"graphicalItems",initialState:tY,reducers:{addCartesianGraphicalItem:{reducer(e,t){e.cartesianItems.push(t.payload)},prepare:nn()},replaceCartesianGraphicalItem:{reducer(e,t){var{prev:r,next:n}=t.payload,s=na(e).cartesianItems.indexOf(r);s>-1&&(e.cartesianItems[s]=n)},prepare:nn()},removeCartesianGraphicalItem:{reducer(e,t){var r=na(e).cartesianItems.indexOf(t.payload);r>-1&&e.cartesianItems.splice(r,1)},prepare:nn()},addPolarGraphicalItem:{reducer(e,t){e.polarItems.push(t.payload)},prepare:nn()},removePolarGraphicalItem:{reducer(e,t){var r=na(e).polarItems.indexOf(t.payload);r>-1&&e.polarItems.splice(r,1)},prepare:nn()}}}),{addCartesianGraphicalItem:rY,replaceCartesianGraphicalItem:nY,removeCartesianGraphicalItem:sY,addPolarGraphicalItem:nee,removePolarGraphicalItem:see}=MT.actions,iY=MT.reducer;function aY(e){var t=zr(),r=v.useRef(null);return v.useLayoutEffect(()=>{r.current===null?t(rY(e)):r.current!==e&&t(nY({prev:r.current,next:e})),r.current=e},[t,e]),v.useLayoutEffect(()=>()=>{r.current&&(t(sY(r.current)),r.current=null)},[t]),null}function y2(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function v2(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?y2(Object(r),!0).forEach(function(n){oY(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):y2(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function oY(e,t,r){return(t=lY(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function lY(e){var t=cY(e,"string");return typeof t=="symbol"?t:t+""}function cY(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var uY={xAxis:{},yAxis:{},zAxis:{}},FT=ps({name:"cartesianAxis",initialState:uY,reducers:{addXAxis:{reducer(e,t){e.xAxis[t.payload.id]=t.payload},prepare:nn()},removeXAxis:{reducer(e,t){delete e.xAxis[t.payload.id]},prepare:nn()},addYAxis:{reducer(e,t){e.yAxis[t.payload.id]=t.payload},prepare:nn()},removeYAxis:{reducer(e,t){delete e.yAxis[t.payload.id]},prepare:nn()},addZAxis:{reducer(e,t){e.zAxis[t.payload.id]=t.payload},prepare:nn()},removeZAxis:{reducer(e,t){delete e.zAxis[t.payload.id]},prepare:nn()},updateYAxisWidth(e,t){var{id:r,width:n}=t.payload,s=e.yAxis[r];if(s){var i=s.widthHistory||[];if(i.length===3&&i[0]===i[2]&&n===i[1]&&n!==s.width&&Math.abs(n-i[0])<=1)return;var l=[...i,n].slice(-3);e.yAxis[r]=v2(v2({},e.yAxis[r]),{},{width:n,widthHistory:l})}}}}),{addXAxis:dY,removeXAxis:fY,addYAxis:hY,removeYAxis:mY,addZAxis:iee,removeZAxis:aee,updateYAxisWidth:pY}=FT.actions,gY=FT.reducer,yY=pe([bn],e=>({top:e.top,bottom:e.bottom,left:e.left,right:e.right})),vY=pe([yY,ya,va],(e,t,r)=>{if(!(!e||t==null||r==null))return{x:e.left,y:e.top,width:Math.max(0,t-e.left-e.right),height:Math.max(0,r-e.top-e.bottom)}}),LT=()=>st(vY),xY="Invariant failed";function wY(e,t){throw new Error(xY)}var bY=["x","y"];function E0(){return E0=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},E0.apply(null,arguments)}function x2(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function cu(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?x2(Object(r),!0).forEach(function(n){jY(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):x2(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function jY(e,t,r){return(t=SY(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function SY(e){var t=_Y(e,"string");return typeof t=="symbol"?t:t+""}function _Y(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function kY(e,t){if(e==null)return{};var r,n,s=NY(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function NY(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function CY(e,t){var{x:r,y:n}=e,s=kY(e,bY),i="".concat(r),l=parseInt(i,10),u="".concat(n),d=parseInt(u,10),m="".concat(t.height||s.height),f=parseInt(m,10),p="".concat(t.width||s.width),y=parseInt(p,10);return cu(cu(cu(cu(cu({},t),s),l?{x:l}:{}),d?{y:d}:{}),{},{height:f,width:y,name:t.name,radius:t.radius})}function $h(e){return v.createElement(GG,E0({shapeType:"rectangle",propTransformer:CY,activeClassName:"recharts-active-bar"},e))}var EY=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return(n,s)=>{if(lt(t))return t;var i=lt(n)||wn(n);return i?t(n,s):(i||wY(),r)}},AY={},zT=ps({name:"errorBars",initialState:AY,reducers:{addErrorBar:(e,t)=>{var{itemId:r,errorBar:n}=t.payload;e[r]||(e[r]=[]),e[r].push(n)},replaceErrorBar:(e,t)=>{var{itemId:r,prev:n,next:s}=t.payload;e[r]&&(e[r]=e[r].map(i=>i.dataKey===n.dataKey&&i.direction===n.direction?s:i))},removeErrorBar:(e,t)=>{var{itemId:r,errorBar:n}=t.payload;e[r]&&(e[r]=e[r].filter(s=>s.dataKey!==n.dataKey||s.direction!==n.direction))}}}),{addErrorBar:oee,replaceErrorBar:lee,removeErrorBar:cee}=zT.actions,PY=zT.reducer,OY=["children"];function TY(e,t){if(e==null)return{};var r,n,s=IY(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function IY(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var DY={data:[],xAxisId:"xAxis-0",yAxisId:"yAxis-0",dataPointFormatter:()=>({x:0,y:0,value:0}),errorBarOffset:0},RY=v.createContext(DY);function $Y(e){var{children:t}=e,r=TY(e,OY);return v.createElement(RY.Provider,{value:r},t)}function UT(e,t){var r,n,s=st(m=>wa(m,e)),i=st(m=>ba(m,t)),l=(r=s==null?void 0:s.allowDataOverflow)!==null&&r!==void 0?r:_s.allowDataOverflow,u=(n=i==null?void 0:i.allowDataOverflow)!==null&&n!==void 0?n:ks.allowDataOverflow,d=l||u;return{needClip:d,needClipX:l,needClipY:u}}function MY(e){var{xAxisId:t,yAxisId:r,clipPathId:n}=e,s=LT(),{needClipX:i,needClipY:l,needClip:u}=UT(t,r);if(!u||!s)return null;var{x:d,y:m,width:f,height:p}=s;return v.createElement("clipPath",{id:"clipPath-".concat(n)},v.createElement("rect",{x:i?d:d-f/2,y:l?m:m-p/2,width:i?f:f*2,height:l?p:p*2}))}function FY(e,t){return e&&typeof e=="object"&&"zIndex"in e&&typeof e.zIndex=="number"&&Lr(e.zIndex)?e.zIndex:t}var LY=["onMouseEnter","onMouseLeave","onClick"],zY=["value","background","tooltipPosition"],UY=["id"],BY=["onMouseEnter","onClick","onMouseLeave"];function pa(){return pa=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},pa.apply(null,arguments)}function w2(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Xn(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?w2(Object(r),!0).forEach(function(n){WY(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):w2(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function WY(e,t,r){return(t=VY(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function VY(e){var t=qY(e,"string");return typeof t=="symbol"?t:t+""}function qY(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Mh(e,t){if(e==null)return{};var r,n,s=HY(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function HY(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var KY=e=>{var{dataKey:t,name:r,fill:n,legendType:s,hide:i}=e;return[{inactive:i,dataKey:t,type:s,color:n,value:MA(r,t),payload:e}]};function GY(e){var{dataKey:t,stroke:r,strokeWidth:n,fill:s,name:i,hide:l,unit:u}=e;return{dataDefinedOnItem:void 0,positions:void 0,settings:{stroke:r,strokeWidth:n,fill:s,dataKey:t,nameKey:void 0,name:MA(i,t),hide:l,type:e.tooltipType,color:e.fill,unit:u}}}function YY(e){var t=st(nc),{data:r,dataKey:n,background:s,allOtherBarProps:i}=e,{onMouseEnter:l,onMouseLeave:u,onClick:d}=i,m=Mh(i,LY),f=IT(l,n),p=DT(u),y=RT(d,n);if(!s||r==null)return null;var x=lx(s);return v.createElement(no,{zIndex:FY(s,ms.barBackground)},r.map((b,j)=>{var{value:S,background:k,tooltipPosition:C}=b,N=Mh(b,zY);if(!k)return null;var O=f(b,j),P=p(b,j),T=y(b,j),D=Xn(Xn(Xn(Xn(Xn({option:s,isActive:String(j)===t},N),{},{fill:"#eee"},k),x),px(m,b,j)),{},{onMouseEnter:O,onMouseLeave:P,onClick:T,dataKey:n,index:j,className:"recharts-bar-background-rectangle"});return v.createElement($h,pa({key:"background-bar-".concat(j)},D))}))}function JY(e){var{showLabels:t,children:r,rects:n}=e,s=n==null?void 0:n.map(i=>{var l={x:i.x,y:i.y,width:i.width,lowerWidth:i.width,upperWidth:i.width,height:i.height};return Xn(Xn({},l),{},{value:i.value,payload:i.payload,parentViewBox:i.parentViewBox,viewBox:l,fill:i.fill})});return v.createElement(wG,{value:t?s:void 0},r)}function QY(e){var{shape:t,activeBar:r,baseProps:n,entry:s,index:i,dataKey:l}=e,u=st(nc),d=st(lT),m=r&&String(i)===u&&(d==null||l===d),f=m?r:t;return m?v.createElement(no,{zIndex:ms.activeBar},v.createElement($h,pa({},n,{name:String(n.name)},s,{isActive:m,option:f,index:i,dataKey:l}))):v.createElement($h,pa({},n,{name:String(n.name)},s,{isActive:m,option:f,index:i,dataKey:l}))}function XY(e){var{shape:t,baseProps:r,entry:n,index:s,dataKey:i}=e;return v.createElement($h,pa({},r,{name:String(r.name)},n,{isActive:!1,option:t,index:s,dataKey:i}))}function ZY(e){var t,{data:r,props:n}=e,s=(t=Ja(n))!==null&&t!==void 0?t:{},{id:i}=s,l=Mh(s,UY),{shape:u,dataKey:d,activeBar:m}=n,{onMouseEnter:f,onClick:p,onMouseLeave:y}=n,x=Mh(n,BY),b=IT(f,d),j=DT(y),S=RT(p,d);return r?v.createElement(v.Fragment,null,r.map((k,C)=>v.createElement(la,pa({key:"rectangle-".concat(k==null?void 0:k.x,"-").concat(k==null?void 0:k.y,"-").concat(k==null?void 0:k.value,"-").concat(C),className:"recharts-bar-rectangle"},px(x,k,C),{onMouseEnter:b(k,C),onMouseLeave:j(k,C),onClick:S(k,C)}),m?v.createElement(QY,{shape:u,activeBar:m,baseProps:l,entry:k,index:C,dataKey:d}):v.createElement(XY,{shape:u,baseProps:l,entry:k,index:C,dataKey:d})))):null}function eJ(e){var{props:t,previousRectanglesRef:r}=e,{data:n,layout:s,isAnimationActive:i,animationBegin:l,animationDuration:u,animationEasing:d,onAnimationEnd:m,onAnimationStart:f}=t,p=r.current,y=Nx(t,"recharts-bar-"),[x,b]=v.useState(!1),j=!x,S=v.useCallback(()=>{typeof m=="function"&&m(),b(!1)},[m]),k=v.useCallback(()=>{typeof f=="function"&&f(),b(!0)},[f]);return v.createElement(JY,{showLabels:j,rects:n},v.createElement(kx,{animationId:y,begin:l,duration:u,isActive:i,easing:d,onAnimationEnd:S,onAnimationStart:k,key:y},C=>{var N=C===1?n:n==null?void 0:n.map((O,P)=>{var T=p&&p[P];if(T)return Xn(Xn({},O),{},{x:Tn(T.x,O.x,C),y:Tn(T.y,O.y,C),width:Tn(T.width,O.width,C),height:Tn(T.height,O.height,C)});if(s==="horizontal"){var D=Tn(0,O.height,C),q=Tn(O.stackedBarStart,O.y,C);return Xn(Xn({},O),{},{y:q,height:D})}var F=Tn(0,O.width,C),K=Tn(O.stackedBarStart,O.x,C);return Xn(Xn({},O),{},{width:F,x:K})});return C>0&&(r.current=N??null),N==null?null:v.createElement(la,null,v.createElement(ZY,{props:t,data:N}))}),v.createElement(SG,{label:t.label}),t.children)}function tJ(e){var t=v.useRef(null);return v.createElement(eJ,{previousRectanglesRef:t,props:e})}var BT=0,rJ=(e,t)=>{var r=Array.isArray(e.value)?e.value[1]:e.value;return{x:e.x,y:e.y,value:r,errorVal:es(e,t)}};class nJ extends v.PureComponent{render(){var{hide:t,data:r,dataKey:n,className:s,xAxisId:i,yAxisId:l,needClip:u,background:d,id:m}=this.props;if(t||r==null)return null;var f=fr("recharts-bar",s),p=m;return v.createElement(la,{className:f,id:m},u&&v.createElement("defs",null,v.createElement(MY,{clipPathId:p,xAxisId:i,yAxisId:l})),v.createElement(la,{className:"recharts-bar-rectangles",clipPath:u?"url(#clipPath-".concat(p,")"):void 0},v.createElement(YY,{data:r,dataKey:n,background:d,allOtherBarProps:this.props}),v.createElement(tJ,this.props)))}}var sJ={activeBar:!1,animationBegin:0,animationDuration:400,animationEasing:"ease",hide:!1,isAnimationActive:!mc.isSsr,legendType:"rect",minPointSize:BT,xAxisId:0,yAxisId:0,zIndex:ms.bar};function iJ(e){var{xAxisId:t,yAxisId:r,hide:n,legendType:s,minPointSize:i,activeBar:l,animationBegin:u,animationDuration:d,animationEasing:m,isAnimationActive:f}=e,{needClip:p}=UT(t,r),y=pm(),x=Ms(),b=AG(e.children,kw),j=st(C=>IJ(C,t,r,x,e.id,b));if(y!=="vertical"&&y!=="horizontal")return null;var S,k=j==null?void 0:j[0];return k==null||k.height==null||k.width==null?S=0:S=y==="vertical"?k.height/2:k.width/2,v.createElement($Y,{xAxisId:t,yAxisId:r,data:j,dataPointFormatter:rJ,errorBarOffset:S},v.createElement(nJ,pa({},e,{layout:y,needClip:p,data:j,xAxisId:t,yAxisId:r,hide:n,legendType:s,minPointSize:i,activeBar:l,animationBegin:u,animationDuration:d,animationEasing:m,isAnimationActive:f})))}function aJ(e){var{layout:t,barSettings:{dataKey:r,minPointSize:n},pos:s,bandSize:i,xAxis:l,yAxis:u,xAxisTicks:d,yAxisTicks:m,stackedData:f,displayedData:p,offset:y,cells:x,parentViewBox:b,dataStartIndex:j}=e,S=t==="horizontal"?u:l,k=f?S.scale.domain():null,C=lB({numericAxis:S}),N=S.scale(C);return p.map((O,P)=>{var T,D,q,F,K,B;f?T=rB(f[P+j],k):(T=es(O,r),Array.isArray(T)||(T=[C,T]));var Q=EY(n,BT)(T[1],P);if(t==="horizontal"){var oe,[ae,J]=[u.scale(T[0]),u.scale(T[1])];D=tk({axis:l,ticks:d,bandSize:i,offset:s.offset,entry:O,index:P}),q=(oe=J??ae)!==null&&oe!==void 0?oe:void 0,F=s.size;var H=ae-J;if(K=Di(H)?0:H,B={x:D,y:y.top,width:F,height:y.height},Math.abs(Q)>0&&Math.abs(K)<Math.abs(Q)){var ne=Ts(K||Q)*(Math.abs(Q)-Math.abs(K));q-=ne,K+=ne}}else{var[ie,ge]=[l.scale(T[0]),l.scale(T[1])];if(D=ie,q=tk({axis:u,ticks:m,bandSize:i,offset:s.offset,entry:O,index:P}),F=ge-ie,K=s.size,B={x:y.left,y:q,width:y.width,height:K},Math.abs(Q)>0&&Math.abs(F)<Math.abs(Q)){var ve=Ts(F||Q)*(Math.abs(Q)-Math.abs(F));F+=ve}}if(D==null||q==null||F==null||K==null)return null;var I=Xn(Xn({},O),{},{stackedBarStart:N,x:D,y:q,width:F,height:K,value:f?T:T[1],payload:O,background:B,tooltipPosition:{x:D+F/2,y:q+K/2},parentViewBox:b},x&&x[P]&&x[P].props);return I}).filter(Boolean)}function oJ(e){var t=ti(e,sJ),r=Ms();return v.createElement(eY,{id:t.id,type:"bar"},n=>v.createElement(v.Fragment,null,v.createElement(JG,{legendPayload:KY(t)}),v.createElement(YG,{fn:GY,args:t}),v.createElement(aY,{type:"bar",id:n,data:void 0,xAxisId:t.xAxisId,yAxisId:t.yAxisId,zAxisId:0,dataKey:t.dataKey,stackId:oB(t.stackId),hide:t.hide,barSize:t.barSize,minPointSize:t.minPointSize,maxBarSize:t.maxBarSize,isPanorama:r}),v.createElement(no,{zIndex:t.zIndex},v.createElement(iJ,pa({},t,{id:n})))))}var WT=v.memo(oJ);WT.displayName="Bar";function b2(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Af(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?b2(Object(r),!0).forEach(function(n){lJ(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):b2(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function lJ(e,t,r){return(t=cJ(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function cJ(e){var t=uJ(e,"string");return typeof t=="symbol"?t:t+""}function uJ(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var dJ=(e,t)=>t,fJ=(e,t,r)=>r,hJ=(e,t,r,n)=>n,mJ=(e,t,r,n,s)=>s,id=pe([ow,mJ],(e,t)=>e.filter(r=>r.type==="bar").find(r=>r.id===t)),pJ=pe([id],e=>e==null?void 0:e.maxBarSize),gJ=(e,t,r,n,s,i)=>i,j2=(e,t,r)=>{var n=r??e;if(!wn(n))return xi(n,t,0)},yJ=pe([Yt,ow,dJ,fJ,hJ],(e,t,r,n,s)=>t.filter(i=>e==="horizontal"?i.xAxisId===r:i.yAxisId===n).filter(i=>i.isPanorama===s).filter(i=>i.hide===!1).filter(i=>i.type==="bar")),vJ=(e,t,r,n)=>{var s=Yt(e);return s==="horizontal"?b0(e,"yAxis",r,n):b0(e,"xAxis",t,n)},xJ=(e,t,r)=>{var n=Yt(e);return n==="horizontal"?CN(e,"xAxis",t):CN(e,"yAxis",r)},wJ=(e,t,r)=>{var n={},s=e.filter(Em),i=e.filter(m=>m.stackId==null),l=s.reduce((m,f)=>(m[f.stackId]||(m[f.stackId]=[]),m[f.stackId].push(f),m),n),u=Object.entries(l).map(m=>{var[f,p]=m,y=p.map(b=>b.dataKey),x=j2(t,r,p[0].barSize);return{stackId:f,dataKeys:y,barSize:x}}),d=i.map(m=>{var f=[m.dataKey].filter(y=>y!=null),p=j2(t,r,m.barSize);return{stackId:void 0,dataKeys:f,barSize:p}});return[...u,...d]},bJ=pe([yJ,cV,xJ],wJ),jJ=(e,t,r,n,s)=>{var i,l,u=id(e,t,r,n,s);if(u!=null){var d=Yt(e),m=JP(e),{maxBarSize:f}=u,p=wn(f)?m:f,y,x;return d==="horizontal"?(y=rc(e,"xAxis",t,n),x=tc(e,"xAxis",t,n)):(y=rc(e,"yAxis",r,n),x=tc(e,"yAxis",r,n)),(i=(l=mh(y,x,!0))!==null&&l!==void 0?l:p)!==null&&i!==void 0?i:0}},VT=(e,t,r,n)=>{var s=Yt(e),i,l;return s==="horizontal"?(i=rc(e,"xAxis",t,n),l=tc(e,"xAxis",t,n)):(i=rc(e,"yAxis",r,n),l=tc(e,"yAxis",r,n)),mh(i,l)};function SJ(e,t,r,n,s){var i=n.length;if(!(i<1)){var l=xi(e,r,0,!0),u,d=[];if(Lr(n[0].barSize)){var m=!1,f=r/i,p=n.reduce((k,C)=>k+(C.barSize||0),0);p+=(i-1)*l,p>=r&&(p-=(i-1)*l,l=0),p>=r&&f>0&&(m=!0,f*=.9,p=i*f);var y=(r-p)/2>>0,x={offset:y-l,size:0};u=n.reduce((k,C)=>{var N,O={stackId:C.stackId,dataKeys:C.dataKeys,position:{offset:x.offset+x.size+l,size:m?f:(N=C.barSize)!==null&&N!==void 0?N:0}},P=[...k,O];return x=P[P.length-1].position,P},d)}else{var b=xi(t,r,0,!0);r-2*b-(i-1)*l<=0&&(l=0);var j=(r-2*b-(i-1)*l)/i;j>1&&(j>>=0);var S=Lr(s)?Math.min(j,s):j;u=n.reduce((k,C,N)=>[...k,{stackId:C.stackId,dataKeys:C.dataKeys,position:{offset:b+(j+l)*N+(j-S)/2,size:S}}],d)}return u}}var _J=(e,t,r,n,s,i,l)=>{var u=wn(l)?t:l,d=SJ(r,n,s!==i?s:i,e,u);return s!==i&&d!=null&&(d=d.map(m=>Af(Af({},m),{},{position:Af(Af({},m.position),{},{offset:m.position.offset-s/2})}))),d},kJ=pe([bJ,JP,lV,QP,jJ,VT,pJ],_J),NJ=(e,t,r,n)=>rc(e,"xAxis",t,n),CJ=(e,t,r,n)=>rc(e,"yAxis",r,n),EJ=(e,t,r,n)=>tc(e,"xAxis",t,n),AJ=(e,t,r,n)=>tc(e,"yAxis",r,n),PJ=pe([kJ,id],(e,t)=>{if(!(e==null||t==null)){var r=e.find(n=>n.stackId===t.stackId&&t.dataKey!=null&&n.dataKeys.includes(t.dataKey));if(r!=null)return r.position}}),OJ=(e,t)=>{var r=iw(t);if(!(!e||r==null||t==null)){var{stackId:n}=t;if(n!=null){var s=e[n];if(s){var{stackedData:i}=s;if(i)return i.find(l=>l.key===r)}}}},TJ=pe([vJ,id],OJ),IJ=pe([bn,Sx,NJ,CJ,EJ,AJ,PJ,Yt,Jx,VT,TJ,id,gJ],(e,t,r,n,s,i,l,u,d,m,f,p,y)=>{var{chartData:x,dataStartIndex:b,dataEndIndex:j}=d;if(!(p==null||l==null||t==null||u!=="horizontal"&&u!=="vertical"||r==null||n==null||s==null||i==null||m==null)){var{data:S}=p,k;if(S!=null&&S.length>0?k=S:k=x==null?void 0:x.slice(b,j+1),k!=null)return aJ({layout:u,barSettings:p,pos:l,parentViewBox:t,bandSize:m,xAxis:r,yAxis:n,xAxisTicks:s,yAxisTicks:i,stackedData:f,displayedData:k,offset:e,cells:y,dataStartIndex:b})}}),DJ=e=>{var{chartData:t}=e,r=zr(),n=Ms();return v.useEffect(()=>n?()=>{}:(r(LN(t)),()=>{r(LN(void 0))}),[t,r,n]),null},S2={x:0,y:0,width:0,height:0,padding:{top:0,right:0,bottom:0,left:0}},qT=ps({name:"brush",initialState:S2,reducers:{setBrushSettings(e,t){return t.payload==null?S2:t.payload}}}),{setBrushSettings:uee}=qT.actions,RJ=qT.reducer;function $J(e,t,r){return(t=MJ(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function MJ(e){var t=FJ(e,"string");return typeof t=="symbol"?t:t+""}function FJ(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class Ew{static create(t){return new Ew(t)}constructor(t){this.scale=t}get domain(){return this.scale.domain}get range(){return this.scale.range}get rangeMin(){return this.range()[0]}get rangeMax(){return this.range()[1]}get bandwidth(){return this.scale.bandwidth}apply(t){var{bandAware:r,position:n}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(t!==void 0){if(n)switch(n){case"start":return this.scale(t);case"middle":{var s=this.bandwidth?this.bandwidth()/2:0;return this.scale(t)+s}case"end":{var i=this.bandwidth?this.bandwidth():0;return this.scale(t)+i}default:return this.scale(t)}if(r){var l=this.bandwidth?this.bandwidth()/2:0;return this.scale(t)+l}return this.scale(t)}}isInRange(t){var r=this.range(),n=r[0],s=r[r.length-1];return n<=s?t>=n&&t<=s:t>=s&&t<=n}}$J(Ew,"EPS",1e-4);function LJ(e){return(e%180+180)%180}var zJ=function(t){var{width:r,height:n}=t,s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,i=LJ(s),l=i*Math.PI/180,u=Math.atan(n/r),d=l>u&&l<Math.PI-u?n/Math.sin(l):r/Math.cos(l);return Math.abs(d)},UJ={dots:[],areas:[],lines:[]},HT=ps({name:"referenceElements",initialState:UJ,reducers:{addDot:(e,t)=>{e.dots.push(t.payload)},removeDot:(e,t)=>{var r=na(e).dots.findIndex(n=>n===t.payload);r!==-1&&e.dots.splice(r,1)},addArea:(e,t)=>{e.areas.push(t.payload)},removeArea:(e,t)=>{var r=na(e).areas.findIndex(n=>n===t.payload);r!==-1&&e.areas.splice(r,1)},addLine:(e,t)=>{e.lines.push(t.payload)},removeLine:(e,t)=>{var r=na(e).lines.findIndex(n=>n===t.payload);r!==-1&&e.lines.splice(r,1)}}}),{addDot:dee,removeDot:fee,addArea:hee,removeArea:mee,addLine:pee,removeLine:gee}=HT.actions,BJ=HT.reducer,WJ=v.createContext(void 0),VJ=e=>{var{children:t}=e,[r]=v.useState("".concat(Nu("recharts"),"-clip")),n=LT();if(n==null)return null;var{x:s,y:i,width:l,height:u}=n;return v.createElement(WJ.Provider,{value:r},v.createElement("defs",null,v.createElement("clipPath",{id:r},v.createElement("rect",{x:s,y:i,height:u,width:l}))),t)};function sc(e,t){for(var r in e)if({}.hasOwnProperty.call(e,r)&&(!{}.hasOwnProperty.call(t,r)||e[r]!==t[r]))return!1;for(var n in t)if({}.hasOwnProperty.call(t,n)&&!{}.hasOwnProperty.call(e,n))return!1;return!0}function KT(e,t){if(t<1)return[];if(t===1)return e;for(var r=[],n=0;n<e.length;n+=t)r.push(e[n]);return r}function qJ(e,t,r){var n={width:e.width+t.width,height:e.height+t.height};return zJ(n,r)}function HJ(e,t,r){var n=r==="width",{x:s,y:i,width:l,height:u}=e;return t===1?{start:n?s:i,end:n?s+l:i+u}:{start:n?s+l:i+u,end:n?s:i}}function Fh(e,t,r,n,s){if(e*t<e*n||e*t>e*s)return!1;var i=r();return e*(t-e*i/2-n)>=0&&e*(t+e*i/2-s)<=0}function KJ(e,t){return KT(e,t+1)}function GJ(e,t,r,n,s){for(var i=(n||[]).slice(),{start:l,end:u}=t,d=0,m=1,f=l,p=function(){var b=n==null?void 0:n[d];if(b===void 0)return{v:KT(n,m)};var j=d,S,k=()=>(S===void 0&&(S=r(b,j)),S),C=b.coordinate,N=d===0||Fh(e,C,k,f,u);N||(d=0,f=l,m+=1),N&&(f=C+e*(k()/2+s),d+=m)},y;m<=i.length;)if(y=p(),y)return y.v;return[]}function _2(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Wn(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?_2(Object(r),!0).forEach(function(n){YJ(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):_2(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function YJ(e,t,r){return(t=JJ(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function JJ(e){var t=QJ(e,"string");return typeof t=="symbol"?t:t+""}function QJ(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function XJ(e,t,r,n,s){for(var i=(n||[]).slice(),l=i.length,{start:u}=t,{end:d}=t,m=function(y){var x=i[y],b,j=()=>(b===void 0&&(b=r(x,y)),b);if(y===l-1){var S=e*(x.coordinate+e*j()/2-d);i[y]=x=Wn(Wn({},x),{},{tickCoord:S>0?x.coordinate-S*e:x.coordinate})}else i[y]=x=Wn(Wn({},x),{},{tickCoord:x.coordinate});if(x.tickCoord!=null){var k=Fh(e,x.tickCoord,j,u,d);k&&(d=x.tickCoord-e*(j()/2+s),i[y]=Wn(Wn({},x),{},{isShow:!0}))}},f=l-1;f>=0;f--)m(f);return i}function ZJ(e,t,r,n,s,i){var l=(n||[]).slice(),u=l.length,{start:d,end:m}=t;if(i){var f=n[u-1],p=r(f,u-1),y=e*(f.coordinate+e*p/2-m);if(l[u-1]=f=Wn(Wn({},f),{},{tickCoord:y>0?f.coordinate-y*e:f.coordinate}),f.tickCoord!=null){var x=Fh(e,f.tickCoord,()=>p,d,m);x&&(m=f.tickCoord-e*(p/2+s),l[u-1]=Wn(Wn({},f),{},{isShow:!0}))}}for(var b=i?u-1:u,j=function(C){var N=l[C],O,P=()=>(O===void 0&&(O=r(N,C)),O);if(C===0){var T=e*(N.coordinate-e*P()/2-d);l[C]=N=Wn(Wn({},N),{},{tickCoord:T<0?N.coordinate-T*e:N.coordinate})}else l[C]=N=Wn(Wn({},N),{},{tickCoord:N.coordinate});if(N.tickCoord!=null){var D=Fh(e,N.tickCoord,P,d,m);D&&(d=N.tickCoord+e*(P()/2+s),l[C]=Wn(Wn({},N),{},{isShow:!0}))}},S=0;S<b;S++)j(S);return l}function eQ(e,t,r){var{tick:n,ticks:s,viewBox:i,minTickGap:l,orientation:u,interval:d,tickFormatter:m,unit:f,angle:p}=e;if(!s||!s.length||!n)return[];if(lt(d)||mc.isSsr){var y;return(y=KJ(s,lt(d)?d:0))!==null&&y!==void 0?y:[]}var x=[],b=u==="top"||u==="bottom"?"width":"height",j=f&&b==="width"?xu(f,{fontSize:t,letterSpacing:r}):{width:0,height:0},S=(N,O)=>{var P=typeof m=="function"?m(N.value,O):N.value;return b==="width"?qJ(xu(P,{fontSize:t,letterSpacing:r}),j,p):xu(P,{fontSize:t,letterSpacing:r})[b]},k=s.length>=2?Ts(s[1].coordinate-s[0].coordinate):1,C=HJ(i,k,b);return d==="equidistantPreserveStart"?GJ(k,C,S,s,l):(d==="preserveStart"||d==="preserveStartEnd"?x=ZJ(k,C,S,s,l,d==="preserveStartEnd"):x=XJ(k,C,S,s,l),x.filter(N=>N.isShow))}var tQ=e=>{var{ticks:t,label:r,labelGapWithTick:n=5,tickSize:s=0,tickMargin:i=0}=e,l=0;if(t){Array.from(t).forEach(f=>{if(f){var p=f.getBoundingClientRect();p.width>l&&(l=p.width)}});var u=r?r.getBoundingClientRect().width:0,d=s+i,m=l+d+u+(r?n:0);return Math.round(m)}return 0},rQ=["axisLine","width","height","className","hide","ticks","axisType"],nQ=["viewBox"],sQ=["viewBox"];function A0(e,t){if(e==null)return{};var r,n,s=iQ(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function iQ(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function Uo(){return Uo=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Uo.apply(null,arguments)}function k2(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Gr(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?k2(Object(r),!0).forEach(function(n){aQ(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):k2(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function aQ(e,t,r){return(t=oQ(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function oQ(e){var t=lQ(e,"string");return typeof t=="symbol"?t:t+""}function lQ(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var cQ={x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd",zIndex:ms.axis};function uQ(e){var{x:t,y:r,width:n,height:s,orientation:i,mirror:l,axisLine:u,otherSvgProps:d}=e;if(!u)return null;var m=Gr(Gr(Gr({},d),Ja(u)),{},{fill:"none"});if(i==="top"||i==="bottom"){var f=+(i==="top"&&!l||i==="bottom"&&l);m=Gr(Gr({},m),{},{x1:t,y1:r+f*s,x2:t+n,y2:r+f*s})}else{var p=+(i==="left"&&!l||i==="right"&&l);m=Gr(Gr({},m),{},{x1:t+p*n,y1:r,x2:t+p*n,y2:r+s})}return v.createElement("line",Uo({},m,{className:fr("recharts-cartesian-axis-line",Ql(u,"className"))}))}function dQ(e,t,r,n,s,i,l,u,d){var m,f,p,y,x,b,j=u?-1:1,S=e.tickSize||l,k=lt(e.tickCoord)?e.tickCoord:e.coordinate;switch(i){case"top":m=f=e.coordinate,y=r+ +!u*s,p=y-j*S,b=p-j*d,x=k;break;case"left":p=y=e.coordinate,f=t+ +!u*n,m=f-j*S,x=m-j*d,b=k;break;case"right":p=y=e.coordinate,f=t+ +u*n,m=f+j*S,x=m+j*d,b=k;break;default:m=f=e.coordinate,y=r+ +u*s,p=y+j*S,b=p+j*d,x=k;break}return{line:{x1:m,y1:p,x2:f,y2:y},tick:{x,y:b}}}function fQ(e,t){switch(e){case"left":return t?"start":"end";case"right":return t?"end":"start";default:return"middle"}}function hQ(e,t){switch(e){case"left":case"right":return"middle";case"top":return t?"start":"end";default:return t?"end":"start"}}function mQ(e){var{option:t,tickProps:r,value:n}=e,s,i=fr(r.className,"recharts-cartesian-axis-tick-value");if(v.isValidElement(t))s=v.cloneElement(t,Gr(Gr({},r),{},{className:i}));else if(typeof t=="function")s=t(Gr(Gr({},r),{},{className:i}));else{var l="recharts-cartesian-axis-tick-value";typeof t!="boolean"&&(l=fr(l,t==null?void 0:t.className)),s=v.createElement(Nw,Uo({},r,{className:l}),n)}return s}var pQ=v.forwardRef((e,t)=>{var{ticks:r=[],tick:n,tickLine:s,stroke:i,tickFormatter:l,unit:u,padding:d,tickTextProps:m,orientation:f,mirror:p,x:y,y:x,width:b,height:j,tickSize:S,tickMargin:k,fontSize:C,letterSpacing:N,getTicksConfig:O,events:P,axisType:T}=e,D=eQ(Gr(Gr({},O),{},{ticks:r}),C,N),q=fQ(f,p),F=hQ(f,p),K=Ja(O),B=lx(n),Q={};typeof s=="object"&&(Q=s);var oe=Gr(Gr({},K),{},{fill:"none"},Q),ae=D.map(ne=>Gr({entry:ne},dQ(ne,y,x,b,j,f,S,p,k))),J=ae.map(ne=>{var{entry:ie,line:ge}=ne;return v.createElement(la,{className:"recharts-cartesian-axis-tick",key:"tick-".concat(ie.value,"-").concat(ie.coordinate,"-").concat(ie.tickCoord)},s&&v.createElement("line",Uo({},oe,ge,{className:fr("recharts-cartesian-axis-tick-line",Ql(s,"className"))})))}),H=ae.map((ne,ie)=>{var{entry:ge,tick:ve}=ne,I=Gr(Gr(Gr(Gr({textAnchor:q,verticalAnchor:F},K),{},{stroke:"none",fill:i},B),ve),{},{index:ie,payload:ge,visibleTicksCount:D.length,tickFormatter:l,padding:d},m);return v.createElement(la,Uo({className:"recharts-cartesian-axis-tick-label",key:"tick-label-".concat(ge.value,"-").concat(ge.coordinate,"-").concat(ge.tickCoord)},px(P,ge,ie)),n&&v.createElement(mQ,{option:n,tickProps:I,value:"".concat(typeof l=="function"?l(ge.value,ie):ge.value).concat(u||"")}))});return v.createElement("g",{className:"recharts-cartesian-axis-ticks recharts-".concat(T,"-ticks")},H.length>0&&v.createElement(no,{zIndex:ms.label},v.createElement("g",{className:"recharts-cartesian-axis-tick-labels recharts-".concat(T,"-tick-labels"),ref:t},H)),J.length>0&&v.createElement("g",{className:"recharts-cartesian-axis-tick-lines recharts-".concat(T,"-tick-lines")},J))}),gQ=v.forwardRef((e,t)=>{var{axisLine:r,width:n,height:s,className:i,hide:l,ticks:u,axisType:d}=e,m=A0(e,rQ),[f,p]=v.useState(""),[y,x]=v.useState(""),b=v.useRef(null);v.useImperativeHandle(t,()=>({getCalculatedWidth:()=>{var S;return tQ({ticks:b.current,label:(S=e.labelRef)===null||S===void 0?void 0:S.current,labelGapWithTick:5,tickSize:e.tickSize,tickMargin:e.tickMargin})}}));var j=v.useCallback(S=>{if(S){var k=S.getElementsByClassName("recharts-cartesian-axis-tick-value");b.current=k;var C=k[0];if(C){var N=window.getComputedStyle(C),O=N.fontSize,P=N.letterSpacing;(O!==f||P!==y)&&(p(O),x(P))}}},[f,y]);return l||n!=null&&n<=0||s!=null&&s<=0?null:v.createElement(no,{zIndex:e.zIndex},v.createElement(la,{className:fr("recharts-cartesian-axis",i)},v.createElement(uQ,{x:e.x,y:e.y,width:n,height:s,orientation:e.orientation,mirror:e.mirror,axisLine:r,otherSvgProps:Ja(e)}),v.createElement(pQ,{ref:j,axisType:d,events:m,fontSize:f,getTicksConfig:e,height:e.height,letterSpacing:y,mirror:e.mirror,orientation:e.orientation,padding:e.padding,stroke:e.stroke,tick:e.tick,tickFormatter:e.tickFormatter,tickLine:e.tickLine,tickMargin:e.tickMargin,tickSize:e.tickSize,tickTextProps:e.tickTextProps,ticks:u,unit:e.unit,width:e.width,x:e.x,y:e.y}),v.createElement(ZK,{x:e.x,y:e.y,width:e.width,height:e.height,lowerWidth:e.width,upperWidth:e.width},v.createElement(cG,{label:e.label,labelRef:e.labelRef}),e.children)))}),yQ=v.memo(gQ,(e,t)=>{var{viewBox:r}=e,n=A0(e,nQ),{viewBox:s}=t,i=A0(t,sQ);return sc(r,s)&&sc(n,i)}),Aw=v.forwardRef((e,t)=>{var r=ti(e,cQ);return v.createElement(yQ,Uo({},r,{ref:t}))});Aw.displayName="CartesianAxis";var vQ=["dangerouslySetInnerHTML","ticks"],xQ=["id"],wQ=["domain"],bQ=["domain"];function P0(){return P0=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},P0.apply(null,arguments)}function Lh(e,t){if(e==null)return{};var r,n,s=jQ(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function jQ(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function SQ(e){var t=zr();return v.useLayoutEffect(()=>(t(dY(e)),()=>{t(fY(e))}),[e,t]),null}var _Q=e=>{var{xAxisId:t,className:r}=e,n=st(Sx),s=Ms(),i="xAxis",l=st(S=>wc(S,i,t,s)),u=st(S=>UO(S,i,t,s)),d=st(S=>MO(S,t)),m=st(S=>aq(S,t)),f=st(S=>iO(S,t));if(d==null||m==null||f==null)return null;var{dangerouslySetInnerHTML:p,ticks:y}=e,x=Lh(e,vQ),{id:b}=f,j=Lh(f,xQ);return v.createElement(Aw,P0({},x,j,{scale:l,x:m.x,y:m.y,width:d.width,height:d.height,className:fr("recharts-".concat(i," ").concat(i),r),viewBox:n,ticks:u,axisType:i}))},kQ={allowDataOverflow:_s.allowDataOverflow,allowDecimals:_s.allowDecimals,allowDuplicatedCategory:_s.allowDuplicatedCategory,height:_s.height,hide:!1,mirror:_s.mirror,orientation:_s.orientation,padding:_s.padding,reversed:_s.reversed,scale:_s.scale,tickCount:_s.tickCount,type:_s.type,xAxisId:0},NQ=e=>{var t,r,n,s,i,l=ti(e,kQ);return v.createElement(v.Fragment,null,v.createElement(SQ,{interval:(t=l.interval)!==null&&t!==void 0?t:"preserveEnd",id:l.xAxisId,scale:l.scale,type:l.type,padding:l.padding,allowDataOverflow:l.allowDataOverflow,domain:l.domain,dataKey:l.dataKey,allowDuplicatedCategory:l.allowDuplicatedCategory,allowDecimals:l.allowDecimals,tickCount:l.tickCount,includeHidden:(r=l.includeHidden)!==null&&r!==void 0?r:!1,reversed:l.reversed,ticks:l.ticks,height:l.height,orientation:l.orientation,mirror:l.mirror,hide:l.hide,unit:l.unit,name:l.name,angle:(n=l.angle)!==null&&n!==void 0?n:0,minTickGap:(s=l.minTickGap)!==null&&s!==void 0?s:5,tick:(i=l.tick)!==null&&i!==void 0?i:!0,tickFormatter:l.tickFormatter}),v.createElement(_Q,l))},CQ=(e,t)=>{var{domain:r}=e,n=Lh(e,wQ),{domain:s}=t,i=Lh(t,bQ);return sc(n,i)?Array.isArray(r)&&r.length===2&&Array.isArray(s)&&s.length===2?r[0]===s[0]&&r[1]===s[1]:sc({domain:r},{domain:s}):!1},GT=v.memo(NQ,CQ);GT.displayName="XAxis";var EQ=["dangerouslySetInnerHTML","ticks"],AQ=["id"],PQ=["domain"],OQ=["domain"];function O0(){return O0=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},O0.apply(null,arguments)}function zh(e,t){if(e==null)return{};var r,n,s=TQ(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function TQ(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function IQ(e){var t=zr();return v.useLayoutEffect(()=>(t(hY(e)),()=>{t(mY(e))}),[e,t]),null}var DQ=e=>{var{yAxisId:t,className:r,width:n,label:s}=e,i=v.useRef(null),l=v.useRef(null),u=st(Sx),d=Ms(),m=zr(),f="yAxis",p=st(P=>wc(P,f,t,d)),y=st(P=>FO(P,t)),x=st(P=>lq(P,t)),b=st(P=>UO(P,f,t,d)),j=st(P=>aO(P,t));if(v.useLayoutEffect(()=>{if(!(n!=="auto"||!y||Cw(s)||v.isValidElement(s)||j==null)){var P=i.current;if(P){var T=P.getCalculatedWidth();Math.round(y.width)!==Math.round(T)&&m(pY({id:t,width:T}))}}},[b,y,m,s,t,n,j]),y==null||x==null||j==null)return null;var{dangerouslySetInnerHTML:S,ticks:k}=e,C=zh(e,EQ),{id:N}=j,O=zh(j,AQ);return v.createElement(Aw,O0({},C,O,{ref:i,labelRef:l,scale:p,x:x.x,y:x.y,tickTextProps:n==="auto"?{width:void 0}:{width:n},width:y.width,height:y.height,className:fr("recharts-".concat(f," ").concat(f),r),viewBox:u,ticks:b,axisType:f}))},RQ={allowDataOverflow:ks.allowDataOverflow,allowDecimals:ks.allowDecimals,allowDuplicatedCategory:ks.allowDuplicatedCategory,hide:!1,mirror:ks.mirror,orientation:ks.orientation,padding:ks.padding,reversed:ks.reversed,scale:ks.scale,tickCount:ks.tickCount,type:ks.type,width:ks.width,yAxisId:0},$Q=e=>{var t,r,n,s,i,l=ti(e,RQ);return v.createElement(v.Fragment,null,v.createElement(IQ,{interval:(t=l.interval)!==null&&t!==void 0?t:"preserveEnd",id:l.yAxisId,scale:l.scale,type:l.type,domain:l.domain,allowDataOverflow:l.allowDataOverflow,dataKey:l.dataKey,allowDuplicatedCategory:l.allowDuplicatedCategory,allowDecimals:l.allowDecimals,tickCount:l.tickCount,padding:l.padding,includeHidden:(r=l.includeHidden)!==null&&r!==void 0?r:!1,reversed:l.reversed,ticks:l.ticks,width:l.width,orientation:l.orientation,mirror:l.mirror,hide:l.hide,unit:l.unit,name:l.name,angle:(n=l.angle)!==null&&n!==void 0?n:0,minTickGap:(s=l.minTickGap)!==null&&s!==void 0?s:5,tick:(i=l.tick)!==null&&i!==void 0?i:!0,tickFormatter:l.tickFormatter}),v.createElement(DQ,l))},MQ=(e,t)=>{var{domain:r}=e,n=zh(e,PQ),{domain:s}=t,i=zh(t,OQ);return sc(n,i)?Array.isArray(r)&&r.length===2&&Array.isArray(s)&&s.length===2?r[0]===s[0]&&r[1]===s[1]:sc({domain:r},{domain:s}):!1},YT=v.memo($Q,MQ);YT.displayName="YAxis";var cv={exports:{}},uv={};/**
 * @license React
 * use-sync-external-store-with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var N2;function FQ(){if(N2)return uv;N2=1;var e=ic();function t(d,m){return d===m&&(d!==0||1/d===1/m)||d!==d&&m!==m}var r=typeof Object.is=="function"?Object.is:t,n=e.useSyncExternalStore,s=e.useRef,i=e.useEffect,l=e.useMemo,u=e.useDebugValue;return uv.useSyncExternalStoreWithSelector=function(d,m,f,p,y){var x=s(null);if(x.current===null){var b={hasValue:!1,value:null};x.current=b}else b=x.current;x=l(function(){function S(P){if(!k){if(k=!0,C=P,P=p(P),y!==void 0&&b.hasValue){var T=b.value;if(y(T,P))return N=T}return N=P}if(T=N,r(C,P))return T;var D=p(P);return y!==void 0&&y(T,D)?(C=P,T):(C=P,N=D)}var k=!1,C,N,O=f===void 0?null:f;return[function(){return S(m())},O===null?void 0:function(){return S(O())}]},[m,f,p,y]);var j=n(d,x[0],x[1]);return i(function(){b.hasValue=!0,b.value=j},[j]),u(j),j},uv}var C2;function LQ(){return C2||(C2=1,cv.exports=FQ()),cv.exports}LQ();function zQ(e){e()}function UQ(){let e=null,t=null;return{clear(){e=null,t=null},notify(){zQ(()=>{let r=e;for(;r;)r.callback(),r=r.next})},get(){const r=[];let n=e;for(;n;)r.push(n),n=n.next;return r},subscribe(r){let n=!0;const s=t={callback:r,next:null,prev:t};return s.prev?s.prev.next=s:e=s,function(){!n||e===null||(n=!1,s.next?s.next.prev=s.prev:t=s.prev,s.prev?s.prev.next=s.next:e=s.next)}}}}var E2={notify(){},get:()=>[]};function BQ(e,t){let r,n=E2,s=0,i=!1;function l(j){f();const S=n.subscribe(j);let k=!1;return()=>{k||(k=!0,S(),p())}}function u(){n.notify()}function d(){b.onStateChange&&b.onStateChange()}function m(){return i}function f(){s++,r||(r=e.subscribe(d),n=UQ())}function p(){s--,r&&s===0&&(r(),r=void 0,n.clear(),n=E2)}function y(){i||(i=!0,f())}function x(){i&&(i=!1,p())}const b={addNestedSub:l,notifyNestedSubs:u,handleChangeWrapper:d,isSubscribed:m,trySubscribe:y,tryUnsubscribe:x,getListeners:()=>n};return b}var WQ=()=>typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",VQ=WQ(),qQ=()=>typeof navigator<"u"&&navigator.product==="ReactNative",HQ=qQ(),KQ=()=>VQ||HQ?v.useLayoutEffect:v.useEffect,GQ=KQ(),dv=Symbol.for("react-redux-context"),fv=typeof globalThis<"u"?globalThis:{};function YQ(){if(!v.createContext)return{};const e=fv[dv]??(fv[dv]=new Map);let t=e.get(v.createContext);return t||(t=v.createContext(null),e.set(v.createContext,t)),t}var JQ=YQ();function QQ(e){const{children:t,context:r,serverState:n,store:s}=e,i=v.useMemo(()=>{const d=BQ(s);return{store:s,subscription:d,getServerState:n?()=>n:void 0}},[s,n]),l=v.useMemo(()=>s.getState(),[s]);GQ(()=>{const{subscription:d}=i;return d.onStateChange=d.notifyNestedSubs,d.trySubscribe(),l!==s.getState()&&d.notifyNestedSubs(),()=>{d.tryUnsubscribe(),d.onStateChange=void 0}},[i,l]);const u=r||JQ;return v.createElement(u.Provider,{value:i},t)}var XQ=QQ,ZQ=(e,t)=>t,Pw=pe([ZQ,Yt,nO,ln,sT,ja,vH,bn],kH),Ow=e=>{var t=e.currentTarget.getBoundingClientRect(),r=t.width/e.currentTarget.offsetWidth,n=t.height/e.currentTarget.offsetHeight;return{chartX:Math.round((e.clientX-t.left)/r),chartY:Math.round((e.clientY-t.top)/n)}},JT=Zs("mouseClick"),QT=Ku();QT.startListening({actionCreator:JT,effect:(e,t)=>{var r=e.payload,n=Pw(t.getState(),Ow(r));(n==null?void 0:n.activeIndex)!=null&&t.dispatch(bq({activeIndex:n.activeIndex,activeDataKey:void 0,activeCoordinate:n.activeCoordinate}))}});var T0=Zs("mouseMove"),XT=Ku();XT.startListening({actionCreator:T0,effect:(e,t)=>{var r=e.payload,n=t.getState(),s=gw(n,n.tooltip.settings.shared),i=Pw(n,Ow(r));s==="axis"&&((i==null?void 0:i.activeIndex)!=null?t.dispatch(YO({activeIndex:i.activeIndex,activeDataKey:void 0,activeCoordinate:i.activeCoordinate})):t.dispatch(GO()))}});var A2={accessibilityLayer:!0,barCategoryGap:"10%",barGap:4,barSize:void 0,className:void 0,maxBarSize:void 0,stackOffset:"none",syncId:void 0,syncMethod:"index",baseValue:void 0},ZT=ps({name:"rootProps",initialState:A2,reducers:{updateOptions:(e,t)=>{var r;e.accessibilityLayer=t.payload.accessibilityLayer,e.barCategoryGap=t.payload.barCategoryGap,e.barGap=(r=t.payload.barGap)!==null&&r!==void 0?r:A2.barGap,e.barSize=t.payload.barSize,e.maxBarSize=t.payload.maxBarSize,e.stackOffset=t.payload.stackOffset,e.syncId=t.payload.syncId,e.syncMethod=t.payload.syncMethod,e.className=t.payload.className,e.baseValue=t.payload.baseValue}}}),eX=ZT.reducer,{updateOptions:tX}=ZT.actions,e4=ps({name:"polarOptions",initialState:null,reducers:{updatePolarOptions:(e,t)=>t.payload}}),{updatePolarOptions:yee}=e4.actions,rX=e4.reducer,t4=Zs("keyDown"),r4=Zs("focus"),Tw=Ku();Tw.startListening({actionCreator:t4,effect:(e,t)=>{var r=t.getState(),n=r.rootProps.accessibilityLayer!==!1;if(n){var{keyboardInteraction:s}=r.tooltip,i=e.payload;if(!(i!=="ArrowRight"&&i!=="ArrowLeft"&&i!=="Enter")){var l=Number(yw(s,jc(r))),u=ja(r);if(i==="Enter"){var d=Th(r,"axis","hover",String(s.index));t.dispatch(S0({active:!s.active,activeIndex:s.index,activeDataKey:s.dataKey,activeCoordinate:d}));return}var m=fq(r),f=m==="left-to-right"?1:-1,p=i==="ArrowRight"?1:-1,y=l+p*f;if(!(u==null||y>=u.length||y<0)){var x=Th(r,"axis","hover",String(y));t.dispatch(S0({active:!0,activeIndex:y.toString(),activeDataKey:void 0,activeCoordinate:x}))}}}}});Tw.startListening({actionCreator:r4,effect:(e,t)=>{var r=t.getState(),n=r.rootProps.accessibilityLayer!==!1;if(n){var{keyboardInteraction:s}=r.tooltip;if(!s.active&&s.index==null){var i="0",l=Th(r,"axis","hover",String(i));t.dispatch(S0({activeDataKey:void 0,active:!0,activeIndex:i,activeCoordinate:l}))}}}});var Gs=Zs("externalEvent"),n4=Ku();n4.startListening({actionCreator:Gs,effect:(e,t)=>{if(e.payload.handler!=null){var r=t.getState(),n={activeCoordinate:nH(r),activeDataKey:lT(r),activeIndex:nc(r),activeLabel:oT(r),activeTooltipIndex:nc(r),isTooltipActive:sH(r)};e.payload.handler(n,e.payload.reactEvent)}}});var nX=pe([bc],e=>e.tooltipItemPayloads),sX=pe([nX,nd,(e,t,r)=>t,(e,t,r)=>r],(e,t,r,n)=>{var s=e.find(u=>u.settings.dataKey===n);if(s!=null){var{positions:i}=s;if(i!=null){var l=t(i,r);return l}}}),s4=Zs("touchMove"),i4=Ku();i4.startListening({actionCreator:s4,effect:(e,t)=>{var r=e.payload;if(!(r.touches==null||r.touches.length===0)){var n=t.getState(),s=gw(n,n.tooltip.settings.shared);if(s==="axis"){var i=Pw(n,Ow({clientX:r.touches[0].clientX,clientY:r.touches[0].clientY,currentTarget:r.currentTarget}));(i==null?void 0:i.activeIndex)!=null&&t.dispatch(YO({activeIndex:i.activeIndex,activeDataKey:void 0,activeCoordinate:i.activeCoordinate}))}else if(s==="item"){var l,u=r.touches[0];if(document.elementFromPoint==null)return;var d=document.elementFromPoint(u.clientX,u.clientY);if(!d||!d.getAttribute)return;var m=d.getAttribute(pB),f=(l=d.getAttribute(gB))!==null&&l!==void 0?l:void 0,p=sX(t.getState(),m,f);t.dispatch(KO({activeDataKey:f,activeIndex:m,activeCoordinate:p}))}}}});var iX=dA({brush:RJ,cartesianAxis:gY,chartData:nK,errorBars:PY,graphicalItems:iY,layout:JU,legend:ZB,options:XH,polarAxis:kG,polarOptions:rX,referenceElements:BJ,rootProps:eX,tooltip:jq,zIndex:LH}),aX=function(t){return bU({reducer:iX,preloadedState:t,middleware:r=>r({serializableCheck:!1}).concat([QT.middleware,XT.middleware,Tw.middleware,n4.middleware,i4.middleware]),enhancers:r=>{var n=r;return typeof r=="function"&&(n=r()),n.concat(SA({type:"raf"}))},devTools:mc.devToolsEnabled})};function oX(e){var{preloadedState:t,children:r,reduxStoreName:n}=e,s=Ms(),i=v.useRef(null);if(s)return r;i.current==null&&(i.current=aX(t));var l=yx;return v.createElement(XQ,{context:l,store:i.current},r)}function lX(e){var{layout:t,margin:r}=e,n=zr(),s=Ms();return v.useEffect(()=>{s||(n(KU(t)),n(HU(r)))},[n,s,t,r]),null}function cX(e){var t=zr();return v.useEffect(()=>{t(tX(e))},[t,e]),null}function P2(e){var{zIndex:t,isPanorama:r}=e,n=r?"recharts-zindex-panorama-":"recharts-zindex-",s=$T("".concat(n).concat(t)),i=zr();return v.useLayoutEffect(()=>(i(MH({zIndex:t,elementId:s,isPanorama:r})),()=>{i(FH({zIndex:t,isPanorama:r}))}),[i,t,s,r]),v.createElement("g",{id:s})}function O2(e){var{children:t,isPanorama:r}=e,n=st(CH);if(!n||n.length===0)return t;var s=n.filter(l=>l<0),i=n.filter(l=>l>0);return v.createElement(v.Fragment,null,s.map(l=>v.createElement(P2,{key:l,zIndex:l,isPanorama:r})),t,i.map(l=>v.createElement(P2,{key:l,zIndex:l,isPanorama:r})))}var uX=["children"];function dX(e,t){if(e==null)return{};var r,n,s=fX(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function fX(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function Uh(){return Uh=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Uh.apply(null,arguments)}var hX={width:"100%",height:"100%",display:"block"},mX=v.forwardRef((e,t)=>{var r=KB(),n=GB(),s=VA();if(!Qa(r)||!Qa(n))return null;var{children:i,otherAttributes:l,title:u,desc:d}=e,m,f;return l!=null&&(typeof l.tabIndex=="number"?m=l.tabIndex:m=s?0:void 0,typeof l.role=="string"?f=l.role:f=s?"application":void 0),v.createElement(AE,Uh({},l,{title:u,desc:d,role:f,tabIndex:m,width:r,height:n,style:hX,ref:t}),i)}),pX=e=>{var{children:t}=e,r=st(hm);if(!r)return null;var{width:n,height:s,y:i,x:l}=r;return v.createElement(AE,{width:n,height:s,x:l,y:i},t)},T2=v.forwardRef((e,t)=>{var{children:r}=e,n=dX(e,uX),s=Ms();return s?v.createElement(pX,null,v.createElement(O2,{isPanorama:!0},r)):v.createElement(mX,Uh({ref:t},n),v.createElement(O2,{isPanorama:!1},r))});function gX(){var e=zr(),[t,r]=v.useState(null),n=st(mB);return v.useEffect(()=>{if(t!=null){var s=t.getBoundingClientRect(),i=s.width/t.offsetWidth;Lr(i)&&i!==n&&e(YU(i))}},[t,e,n]),r}function I2(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function yX(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?I2(Object(r),!0).forEach(function(n){vX(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):I2(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function vX(e,t,r){return(t=xX(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function xX(e){var t=wX(e,"string");return typeof t=="symbol"?t:t+""}function wX(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Bo(){return Bo=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Bo.apply(null,arguments)}var bX=()=>(fK(),null);function Bh(e){if(typeof e=="number")return e;if(typeof e=="string"){var t=parseFloat(e);if(!Number.isNaN(t))return t}return 0}var jX=v.forwardRef((e,t)=>{var r,n,s=v.useRef(null),[i,l]=v.useState({containerWidth:Bh((r=e.style)===null||r===void 0?void 0:r.width),containerHeight:Bh((n=e.style)===null||n===void 0?void 0:n.height)}),u=v.useCallback((m,f)=>{l(p=>{var y=Math.round(m),x=Math.round(f);return p.containerWidth===y&&p.containerHeight===x?p:{containerWidth:y,containerHeight:x}})},[]),d=v.useCallback(m=>{if(typeof t=="function"&&t(m),m!=null&&typeof ResizeObserver<"u"){var{width:f,height:p}=m.getBoundingClientRect();u(f,p);var y=b=>{var{width:j,height:S}=b[0].contentRect;u(j,S)},x=new ResizeObserver(y);x.observe(m),s.current=x}},[t,u]);return v.useEffect(()=>()=>{var m=s.current;m!=null&&m.disconnect()},[u]),v.createElement(v.Fragment,null,v.createElement(gm,{width:i.containerWidth,height:i.containerHeight}),v.createElement("div",Bo({ref:d},e)))}),SX=v.forwardRef((e,t)=>{var{width:r,height:n}=e,[s,i]=v.useState({containerWidth:Bh(r),containerHeight:Bh(n)}),l=v.useCallback((d,m)=>{i(f=>{var p=Math.round(d),y=Math.round(m);return f.containerWidth===p&&f.containerHeight===y?f:{containerWidth:p,containerHeight:y}})},[]),u=v.useCallback(d=>{if(typeof t=="function"&&t(d),d!=null){var{width:m,height:f}=d.getBoundingClientRect();l(m,f)}},[t,l]);return v.createElement(v.Fragment,null,v.createElement(gm,{width:s.containerWidth,height:s.containerHeight}),v.createElement("div",Bo({ref:u},e)))}),_X=v.forwardRef((e,t)=>{var{width:r,height:n}=e;return v.createElement(v.Fragment,null,v.createElement(gm,{width:r,height:n}),v.createElement("div",Bo({ref:t},e)))}),kX=v.forwardRef((e,t)=>{var{width:r,height:n}=e;return ca(r)||ca(n)?v.createElement(SX,Bo({},e,{ref:t})):v.createElement(_X,Bo({},e,{ref:t}))});function NX(e){return e===!0?jX:kX}var CX=v.forwardRef((e,t)=>{var{children:r,className:n,height:s,onClick:i,onContextMenu:l,onDoubleClick:u,onMouseDown:d,onMouseEnter:m,onMouseLeave:f,onMouseMove:p,onMouseUp:y,onTouchEnd:x,onTouchMove:b,onTouchStart:j,style:S,width:k,responsive:C,dispatchTouchEvents:N=!0}=e,O=v.useRef(null),P=zr(),[T,D]=v.useState(null),[q,F]=v.useState(null),K=gX(),B=_x(),Q=(B==null?void 0:B.width)>0?B.width:k,oe=(B==null?void 0:B.height)>0?B.height:s,ae=v.useCallback(U=>{K(U),typeof t=="function"&&t(U),D(U),F(U),U!=null&&(O.current=U)},[K,t,D,F]),J=v.useCallback(U=>{P(JT(U)),P(Gs({handler:i,reactEvent:U}))},[P,i]),H=v.useCallback(U=>{P(T0(U)),P(Gs({handler:m,reactEvent:U}))},[P,m]),ne=v.useCallback(U=>{P(GO()),P(Gs({handler:f,reactEvent:U}))},[P,f]),ie=v.useCallback(U=>{P(T0(U)),P(Gs({handler:p,reactEvent:U}))},[P,p]),ge=v.useCallback(()=>{P(r4())},[P]),ve=v.useCallback(U=>{P(t4(U.key))},[P]),I=v.useCallback(U=>{P(Gs({handler:l,reactEvent:U}))},[P,l]),V=v.useCallback(U=>{P(Gs({handler:u,reactEvent:U}))},[P,u]),Ae=v.useCallback(U=>{P(Gs({handler:d,reactEvent:U}))},[P,d]),X=v.useCallback(U=>{P(Gs({handler:y,reactEvent:U}))},[P,y]),re=v.useCallback(U=>{P(Gs({handler:j,reactEvent:U}))},[P,j]),de=v.useCallback(U=>{N&&P(s4(U)),P(Gs({handler:b,reactEvent:U}))},[P,N,b]),xe=v.useCallback(U=>{P(Gs({handler:x,reactEvent:U}))},[P,x]),ye=NX(C);return v.createElement(gT.Provider,{value:T},v.createElement(sL.Provider,{value:q},v.createElement(ye,{width:Q??(S==null?void 0:S.width),height:oe??(S==null?void 0:S.height),className:fr("recharts-wrapper",n),style:yX({position:"relative",cursor:"default",width:Q,height:oe},S),onClick:J,onContextMenu:I,onDoubleClick:V,onFocus:ge,onKeyDown:ve,onMouseDown:Ae,onMouseEnter:H,onMouseLeave:ne,onMouseMove:ie,onMouseUp:X,onTouchEnd:xe,onTouchMove:de,onTouchStart:re,ref:ae},v.createElement(bX,null),r)))}),EX=["width","height","responsive","children","className","style","compact","title","desc"];function AX(e,t){if(e==null)return{};var r,n,s=PX(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function PX(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var OX=v.forwardRef((e,t)=>{var{width:r,height:n,responsive:s,children:i,className:l,style:u,compact:d,title:m,desc:f}=e,p=AX(e,EX),y=Ja(p);return d?v.createElement(v.Fragment,null,v.createElement(gm,{width:r,height:n}),v.createElement(T2,{otherAttributes:y,title:m,desc:f},i)):v.createElement(CX,{className:l,style:u,width:r,height:n,responsive:s??!1,onClick:e.onClick,onMouseLeave:e.onMouseLeave,onMouseEnter:e.onMouseEnter,onMouseMove:e.onMouseMove,onMouseDown:e.onMouseDown,onMouseUp:e.onMouseUp,onContextMenu:e.onContextMenu,onDoubleClick:e.onDoubleClick,onTouchStart:e.onTouchStart,onTouchMove:e.onTouchMove,onTouchEnd:e.onTouchEnd},v.createElement(T2,{otherAttributes:y,title:m,desc:f,ref:t},v.createElement(VJ,null,i)))});function I0(){return I0=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},I0.apply(null,arguments)}var TX={top:5,right:5,bottom:5,left:5},IX={accessibilityLayer:!0,layout:"horizontal",stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:TX,reverseStackOrder:!1,syncMethod:"index",responsive:!1},DX=v.forwardRef(function(t,r){var n,s=ti(t.categoricalChartProps,IX),{chartName:i,defaultTooltipEventType:l,validateTooltipEventTypes:u,tooltipPayloadSearcher:d,categoricalChartProps:m}=t,f={chartName:i,defaultTooltipEventType:l,validateTooltipEventTypes:u,tooltipPayloadSearcher:d,eventEmitter:void 0};return v.createElement(oX,{preloadedState:{options:f},reduxStoreName:(n=m.id)!==null&&n!==void 0?n:i},v.createElement(DJ,{chartData:m.data}),v.createElement(lX,{layout:s.layout,margin:s.margin}),v.createElement(cX,{baseValue:s.baseValue,accessibilityLayer:s.accessibilityLayer,barCategoryGap:s.barCategoryGap,maxBarSize:s.maxBarSize,stackOffset:s.stackOffset,barGap:s.barGap,barSize:s.barSize,syncId:s.syncId,syncMethod:s.syncMethod,className:s.className}),v.createElement(OX,I0({},s,{ref:r})))}),RX=["axis","item"],$X=v.forwardRef((e,t)=>v.createElement(DX,{chartName:"BarChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:RX,tooltipPayloadSearcher:JH,categoricalChartProps:e,ref:t}));const a4=["Bug","Change Request","Data Correction","Epic","Feature","Group","Issue","Other","Spike","Task","Test Case","User Story"];function MX(){const e=window.location.origin,t=window.location.pathname,r=t.includes("/admin")?t.substring(0,t.indexOf("/admin")):t.includes("/voter")?t.substring(0,t.indexOf("/voter")):t;return`${e}${r}/admin`}const Is={clientId:"a6283b6c-2210-4d6c-bade-651acfdb6703",tenantId:"3bb4e039-9a0f-4671-9733-a9ae03d39395",get redirectUri(){return MX()},scopes:["https://app.vssps.visualstudio.com/user_impersonation","offline_access"]};function FX(){const e=new Uint8Array(32);return crypto.getRandomValues(e),o4(e)}async function LX(e){const r=new TextEncoder().encode(e),n=await crypto.subtle.digest("SHA-256",r);return o4(new Uint8Array(n))}function o4(e){return btoa(String.fromCharCode(...e)).replace(/\+/g,"-").replace(/\//g,"_").replace(/=/g,"")}async function zX(e){const t=FX(),r=await LX(t);sessionStorage.setItem("pkce_verifier",t);const n=new URLSearchParams({client_id:Is.clientId,response_type:"code",redirect_uri:Is.redirectUri,response_mode:"query",scope:Is.scopes.join(" "),state:e,code_challenge:r,code_challenge_method:"S256"});return`https://login.microsoftonline.com/${Is.tenantId}/oauth2/v2.0/authorize?${n}`}async function UX(e){const t=`https://login.microsoftonline.com/${Is.tenantId}/oauth2/v2.0/token`,r=sessionStorage.getItem("pkce_verifier");if(!r)throw new Error("Code verifier not found - PKCE flow incomplete");const n=new URLSearchParams({client_id:Is.clientId,scope:Is.scopes.join(" "),code:e,redirect_uri:Is.redirectUri,grant_type:"authorization_code",code_verifier:r}),s=await fetch(t,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:n.toString()});if(!s.ok){const l=await s.json();throw console.error("Token exchange error:",l),new Error(`Failed to exchange code for tokens: ${l.error_description||l.error}`)}const i=await s.json();return sessionStorage.removeItem("pkce_verifier"),{accessToken:i.access_token,refreshToken:i.refresh_token,expiresIn:i.expires_in}}async function BX(e){const t=`https://login.microsoftonline.com/${Is.tenantId}/oauth2/v2.0/token`,r=new URLSearchParams({client_id:Is.clientId,scope:Is.scopes.join(" "),refresh_token:e,grant_type:"refresh_token"}),n=await fetch(t,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:r.toString()});if(!n.ok){const i=await n.json();throw console.error("Token refresh error:",i),new Error(`Failed to refresh access token: ${i.error_description||i.error}`)}const s=await n.json();return{accessToken:s.access_token,expiresIn:s.expires_in}}async function l4(e,t){if(!e.accessToken||!e.organization||!e.project)throw new Error("Missing required configuration");const r=t||e.workItemType;if(!r)throw new Error("Missing work item type for state fetch");const n=encodeURIComponent(r),s=`https://dev.azure.com/${e.organization}/${e.project}/_apis/wit/workitemtypes/${n}?api-version=7.1`,i=await fetch(s,{headers:{Authorization:`Bearer ${e.accessToken}`,"Content-Type":"application/json"}});if(!i.ok)throw new Error(`Failed to fetch states: ${i.statusText}`);const l=await i.json();return l.states&&Array.isArray(l.states)?l.states.map(u=>u.name):[]}async function D2(e){const t=new Set;for(const r of a4)try{(await l4({...e,workItemType:r},r)).forEach(s=>{s&&t.add(s)})}catch(n){console.warn(`Failed to fetch states for type ${r}:`,n)}return Array.from(t).sort((r,n)=>r.localeCompare(n))}async function D0(e){if(!e.accessToken||!e.organization||!e.project)throw new Error("Missing required configuration");const t=`https://dev.azure.com/${e.organization}/${e.project}/_apis/wit/classificationnodes/areas?$depth=10&api-version=7.1`,r=await fetch(t,{headers:{Authorization:`Bearer ${e.accessToken}`,"Content-Type":"application/json"}});if(!r.ok)throw new Error(`Failed to fetch area paths: ${r.statusText}`);const n=await r.json(),s=(i,l="")=>{const u=l?`${l}\\${i.name}`:i.name;let d=[u];return i.children&&i.children.length>0&&i.children.forEach(m=>{d=d.concat(s(m,u))}),d};return s(n)}async function WX(e,t,r=[]){if(!e.accessToken||!e.organization||!e.project)throw new Error("Missing required configuration");if(!t)return D0(e);try{const n=[`[System.WorkItemType] = '${t}'`];if(r&&r.length>0)if(r.length===1)n.push(`[System.State] = '${r[0]}'`);else{const x=r.map(b=>`'${b}'`).join(", ");n.push(`[System.State] IN (${x})`)}const s=`SELECT [System.Id] FROM WorkItems WHERE ${n.join(" AND ")} ORDER BY [System.ChangedDate] DESC`,i=`https://dev.azure.com/${e.organization}/${e.project}/_apis/wit/wiql?api-version=7.1`,l=await fetch(i,{method:"POST",headers:{Authorization:`Bearer ${e.accessToken}`,"Content-Type":"application/json"},body:JSON.stringify({query:s})});if(!l.ok)return console.warn("Failed to fetch area paths by type/state, returning empty list"),[];const u=await l.json();if(!u.workItems||u.workItems.length===0)return[];const d=u.workItems.map(x=>x.id).slice(0,200);if(d.length===0)return[];const m=`https://dev.azure.com/${e.organization}/${e.project}/_apis/wit/workitems?ids=${d.join(",")}&fields=System.AreaPath&api-version=7.1`,f=await fetch(m,{headers:{Authorization:`Bearer ${e.accessToken}`,"Content-Type":"application/json"}});if(!f.ok)return console.warn("Failed to fetch work item area paths for filtered request"),[];const p=await f.json(),y=new Set;return p.value&&Array.isArray(p.value)&&p.value.forEach(x=>{var j;const b=(j=x.fields)==null?void 0:j["System.AreaPath"];b&&y.add(b)}),Array.from(y).sort()}catch(n){return console.error("Error fetching area paths for type/state:",n),[]}}async function VX(e,t){if(!e.accessToken||!e.organization||!e.project)throw new Error("Missing required configuration");if(!t||t.length===0)return{types:[],areaPaths:[],tags:[]};try{const n=`SELECT [System.Id], [System.WorkItemType], [System.AreaPath] FROM WorkItems WHERE ${t.length===1?`[System.State] = '${t[0]}'`:`[System.State] IN (${t.map(b=>`'${b}'`).join(", ")})`} ORDER BY [System.ChangedDate] DESC`,s=`https://dev.azure.com/${e.organization}/${e.project}/_apis/wit/wiql?api-version=7.1`,i=await fetch(s,{method:"POST",headers:{Authorization:`Bearer ${e.accessToken}`,"Content-Type":"application/json"},body:JSON.stringify({query:n})});if(!i.ok)throw new Error(`Failed to fetch work items by state: ${i.statusText}`);const l=await i.json();if(!l.workItems||l.workItems.length===0)return{types:[],areaPaths:[],tags:[]};const u=l.workItems.map(b=>b.id).slice(0,200);if(u.length===0)return{types:[],areaPaths:[],tags:[]};const d=`https://dev.azure.com/${e.organization}/${e.project}/_apis/wit/workitems?ids=${u.join(",")}&fields=System.WorkItemType,System.AreaPath,System.Tags&api-version=7.1`,m=await fetch(d,{headers:{Authorization:`Bearer ${e.accessToken}`,"Content-Type":"application/json"}});if(!m.ok)return console.warn("Failed to fetch work item details for states filter"),{types:[],areaPaths:[],tags:[]};const f=await m.json(),p=new Set,y=new Set,x=new Set;return f.value&&Array.isArray(f.value)&&f.value.forEach(b=>{var C,N,O;const j=(C=b.fields)==null?void 0:C["System.WorkItemType"],S=(N=b.fields)==null?void 0:N["System.AreaPath"],k=(O=b.fields)==null?void 0:O["System.Tags"];j&&p.add(j),S&&y.add(S),k&&k.split(";").map(P=>P.trim()).forEach(P=>{P&&x.add(P)})}),{types:Array.from(p).sort((b,j)=>b.localeCompare(j)),areaPaths:Array.from(y).sort((b,j)=>b.localeCompare(j)),tags:Array.from(x).sort((b,j)=>b.localeCompare(j))}}catch(r){return console.error("Error fetching types and area paths for states:",r),{types:[],areaPaths:[],tags:[]}}}async function qX(e){if(!e.accessToken||!e.organization)throw new Error("Missing required configuration");const t=`https://dev.azure.com/${e.organization}/_apis/projects?stateFilter=All&api-version=7.1`,r=await fetch(t,{headers:{Authorization:`Bearer ${e.accessToken}`,"Content-Type":"application/json"}});if(!r.ok)throw new Error(`Failed to fetch projects: ${r.statusText}`);const n=await r.json();return!(n!=null&&n.value)||!Array.isArray(n.value)?[]:n.value.map(s=>s==null?void 0:s.name).filter(s=>typeof s=="string"&&s.trim().length>0).map(s=>s.trim()).sort((s,i)=>s.localeCompare(i))}async function HX(e,t){if(!e.accessToken||!e.organization||!e.project)throw new Error("Missing required configuration");try{const n=`SELECT [System.Id], [System.WorkItemType], [System.State] FROM WorkItems WHERE (${t.map(x=>`[System.AreaPath] UNDER '${x}'`).join(" OR ")}) ORDER BY [System.ChangedDate] DESC`,s=`https://dev.azure.com/${e.organization}/${e.project}/_apis/wit/wiql?api-version=7.1`,i=await fetch(s,{method:"POST",headers:{Authorization:`Bearer ${e.accessToken}`,"Content-Type":"application/json"},body:JSON.stringify({query:n})});if(!i.ok)throw new Error(`Failed to fetch work items: ${i.statusText}`);const l=await i.json();if(!l.workItems||l.workItems.length===0)return{types:[],states:[]};const u=l.workItems.map(x=>x.id).slice(0,200),d=`https://dev.azure.com/${e.organization}/${e.project}/_apis/wit/workitems?ids=${u.join(",")}&fields=System.WorkItemType,System.State&api-version=7.1`,m=await fetch(d,{headers:{Authorization:`Bearer ${e.accessToken}`,"Content-Type":"application/json"}});if(!m.ok)return console.warn("Failed to fetch work item details"),{types:[],states:[]};const f=await m.json(),p=new Set,y=new Set;return f.value&&Array.isArray(f.value)&&f.value.forEach(x=>{x.fields&&(x.fields["System.WorkItemType"]&&p.add(x.fields["System.WorkItemType"]),x.fields["System.State"]&&y.add(x.fields["System.State"]))}),{types:Array.from(p).sort(),states:Array.from(y).sort()}}catch(r){return console.error("Error fetching types and states for area path:",r),{types:[],states:[]}}}async function KX(e,t){if(!e.accessToken||!e.organization||!e.project)throw new Error("Missing required configuration");try{const n=`SELECT [System.Id], [System.WorkItemType], [System.State] FROM WorkItems WHERE (${t.map(b=>`[System.Tags] CONTAINS '${b}'`).join(" OR ")}) ORDER BY [System.ChangedDate] DESC`,s=`https://dev.azure.com/${e.organization}/${e.project}/_apis/wit/wiql?api-version=7.1`,i=await fetch(s,{method:"POST",headers:{Authorization:`Bearer ${e.accessToken}`,"Content-Type":"application/json"},body:JSON.stringify({query:n})});if(!i.ok)throw new Error(`Failed to fetch work items: ${i.statusText}`);const l=await i.json();if(!l.workItems||l.workItems.length===0)return{types:[],states:[],areaPaths:[]};const u=l.workItems.map(b=>b.id).slice(0,200),d=`https://dev.azure.com/${e.organization}/${e.project}/_apis/wit/workitems?ids=${u.join(",")}&fields=System.WorkItemType,System.State,System.AreaPath&api-version=7.1`,m=await fetch(d,{headers:{Authorization:`Bearer ${e.accessToken}`,"Content-Type":"application/json"}});if(!m.ok)return console.warn("Failed to fetch work item details"),{types:[],states:[],areaPaths:[]};const f=await m.json(),p=new Set,y=new Set,x=new Set;return f.value&&Array.isArray(f.value)&&f.value.forEach(b=>{b.fields&&(b.fields["System.WorkItemType"]&&p.add(b.fields["System.WorkItemType"]),b.fields["System.State"]&&y.add(b.fields["System.State"]),b.fields["System.AreaPath"]&&x.add(b.fields["System.AreaPath"]))}),{types:Array.from(p).sort(),states:Array.from(y).sort(),areaPaths:Array.from(x).sort()}}catch(r){return console.error("Error fetching types and states for tags:",r),{types:[],states:[],areaPaths:[]}}}async function GX(e,t,r,n){if(!e.accessToken||!e.organization||!e.project)throw new Error("Missing required configuration");try{const s=[];if(s.push(`[System.WorkItemType] = '${t}'`),r&&r.length>0)if(r.length===1)s.push(`[System.State] = '${r[0]}'`);else{const b=r.map(j=>`'${j}'`).join(", ");s.push(`[System.State] IN (${b})`)}if(n&&n.length>0)if(n.length===1)s.push(`[System.AreaPath] UNDER '${n[0]}'`);else{const b=n.map(j=>`[System.AreaPath] UNDER '${j}'`);s.push(`(${b.join(" OR ")})`)}const i=`SELECT [System.Id] FROM WorkItems WHERE ${s.join(" AND ")} ORDER BY [System.ChangedDate] DESC`,l=`https://dev.azure.com/${e.organization}/${e.project}/_apis/wit/wiql?api-version=7.1`,u=await fetch(l,{method:"POST",headers:{Authorization:`Bearer ${e.accessToken}`,"Content-Type":"application/json"},body:JSON.stringify({query:i})});if(!u.ok)return console.warn("Failed to fetch tags, returning empty array"),[];const d=await u.json();if(!d.workItems||d.workItems.length===0)return[];const m=d.workItems.map(b=>b.id).slice(0,200),f=`https://dev.azure.com/${e.organization}/${e.project}/_apis/wit/workitems?ids=${m.join(",")}&fields=System.Tags&api-version=7.1`,p=await fetch(f,{headers:{Authorization:`Bearer ${e.accessToken}`,"Content-Type":"application/json"}});if(!p.ok)return console.warn("Failed to fetch work item details for tags"),[];const y=await p.json(),x=new Set;return y.value&&Array.isArray(y.value)&&y.value.forEach(b=>{b.fields&&b.fields["System.Tags"]&&b.fields["System.Tags"].split(";").map(S=>S.trim()).forEach(S=>{S&&x.add(S)})}),Array.from(x).sort()}catch(s){return console.warn("Error fetching tags, returning empty array:",s),[]}}async function R2(e){if(!e.accessToken||!e.organization||!e.project)throw new Error("Missing required configuration");const t=new Set;try{const r=[];let n=null;do{let s=`https://dev.azure.com/${e.organization}/${e.project}/_apis/wit/tags?api-version=7.1`;n&&(s+=`&continuationToken=${encodeURIComponent(n)}`);const i=await fetch(s,{headers:{Authorization:`Bearer ${e.accessToken}`,"Content-Type":"application/json"}});if(!i.ok){console.warn("Failed to fetch tags page, aborting remaining pages");break}const l=await i.json();l.value&&Array.isArray(l.value)&&l.value.forEach(u=>{u&&u.name&&r.push(u.name)}),n=i.headers.get("x-ms-continuationtoken")}while(n);r.forEach(s=>t.add(s))}catch(r){console.warn("Error fetching tags, returning empty array:",r)}try{(await YX(e)).forEach(n=>t.add(n))}catch(r){console.warn("Error fetching tags via WIQL fallback:",r)}return Array.from(t).sort((r,n)=>r.localeCompare(n))}async function YX(e){const t={query:"SELECT [System.Id] FROM WorkItems WHERE [System.TeamProject] = @project ORDER BY [System.ChangedDate] DESC"},r=`https://dev.azure.com/${e.organization}/${e.project}/_apis/wit/wiql?api-version=7.1`,n=await fetch(r,{method:"POST",headers:{Authorization:`Bearer ${e.accessToken}`,"Content-Type":"application/json"},body:JSON.stringify(t)});if(!n.ok)throw new Error(`Failed to fetch tags via WIQL: ${n.status}`);const s=await n.json();if(!s.workItems||s.workItems.length===0)return[];const i=s.workItems.map(f=>f.id).slice(0,200);if(i.length===0)return[];const l=`https://dev.azure.com/${e.organization}/${e.project}/_apis/wit/workitems?ids=${i.join(",")}&fields=System.Tags&api-version=7.1`,u=await fetch(l,{headers:{Authorization:`Bearer ${e.accessToken}`,"Content-Type":"application/json"}});if(!u.ok)throw new Error(`Failed to fetch work item details for tags via WIQL fallback: ${u.status}`);const d=await u.json(),m=new Set;return d.value&&Array.isArray(d.value)&&d.value.forEach(f=>{f.fields&&f.fields["System.Tags"]&&f.fields["System.Tags"].split(";").map(y=>y.trim()).forEach(y=>{y&&m.add(y)})}),Array.from(m)}function JX(e){const t=new Date(e).getTime(),r=Date.now(),n=300*1e3;return t-r<n}async function QX(){const e=new URLSearchParams(window.location.search),t=e.get("code"),r=e.get("state");if(!t)return null;const n=sessionStorage.getItem("oauth_state");if(r!==n)throw new Error("State mismatch - possible CSRF attack");const s=await UX(t);return sessionStorage.removeItem("oauth_state"),s}async function XX(){const e=Math.random().toString(36).substring(7);sessionStorage.setItem("oauth_state",e);const t=sessionStorage.getItem("currentSession");t&&sessionStorage.setItem("oauth_session_backup",t);const r=await zX(e);window.location.href=r}async function $2(e){const{organization:t,project:r,workItemType:n,query:s,accessToken:i}=e;if(!i)throw new Error("Not authenticated with Azure DevOps");try{let l;s?l=`SELECT [System.Id] FROM WorkItems WHERE ${s}`:l=`SELECT [System.Id] FROM WorkItems WHERE [System.WorkItemType] = '${n}' AND [System.State] = 'Active'`;const u=`https://dev.azure.com/${t}/${r}/_apis/wit/wiql?api-version=7.0`,d=await fetch(u,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${i}`},body:JSON.stringify({query:l})});if(!d.ok)throw new Error(`Azure DevOps query failed: ${d.status} ${d.statusText}`);const f=(await d.json()).workItems.map(N=>N.id);if(f.length===0)return[];const p=["System.Id","System.Title","System.Description","System.Tags","System.WorkItemType","System.State","Microsoft.VSTS.Common.Priority","System.AreaPath","System.IterationPath"].join(","),y=200,x=[];for(let N=0;N<f.length;N+=y){const P=f.slice(N,N+y).join(","),T=`https://dev.azure.com/${t}/${r}/_apis/wit/workitems?ids=${P}&fields=${p}&api-version=7.0`,D=await fetch(T,{headers:{Authorization:`Bearer ${i}`}});if(!D.ok)throw new Error(`Failed to fetch work items: ${D.status} ${D.statusText}`);const q=await D.json();q.value&&Array.isArray(q.value)&&x.push(...q.value)}if(x.length===0)return[];const b=new Map,j=new Map,S=new Map,k=10;for(let N=0;N<x.length;N+=k){const O=x.slice(N,N+k);await Promise.all(O.map(async P=>{try{const T=`https://dev.azure.com/${t}/${r}/_apis/wit/workitems/${P.id}?$expand=relations&api-version=7.0`,D=await fetch(T,{headers:{Authorization:`Bearer ${i}`}});if(D.ok){const q=await D.json();if(q.relations){for(const F of q.relations)if(F.rel==="System.LinkTypes.Hierarchy-Forward"){const K=F.url.match(/\/work[iI]tems\/(\d+)(?:\?|$|\/)/i);if(K){const B=parseInt(K[1],10);b.set(P.id,B),console.log(`Work item ${P.id} has parent ${B}`)}}}}}catch(T){console.error(`Error fetching relations for work item ${P.id}:`,T)}}))}const C=Array.from(new Set(b.values()));if(C.length>0){const N=C.slice(0,200).join(","),O=["System.Id","System.Title","System.WorkItemType"].join(","),P=`https://dev.azure.com/${t}/${r}/_apis/wit/workitems?ids=${N}&fields=${O}&api-version=7.0`;try{const T=await fetch(P,{headers:{Authorization:`Bearer ${i}`}});if(T.ok){const D=await T.json();for(const q of D.value)S.set(q.id,q.fields["System.Title"]||""),q.fields["System.WorkItemType"]==="Epic"&&(j.set(q.id,q.fields["System.Title"]||""),console.log(`Found Epic ${q.id}: ${q.fields["System.Title"]}`))}}catch(T){console.error("Error fetching parent work items:",T)}}return x.map(N=>{let O=null;const P=b.get(N.id);if(P)if(O=j.get(P)||null,O)console.log(`Work item ${N.id} has Epic from parent ${P}: ${O}`);else{const T=S.get(P);console.log(`Work item ${N.id} has parent ${P} (${T}) but it's not an Epic type`)}if(!O&&N.fields){const D=["System.Epic","Epic","Microsoft.VSTS.Common.Epic","Custom.Epic","EpicLink","EpicName",...Object.keys(N.fields).filter(q=>q.toLowerCase().includes("epic")&&!["System.Epic","Epic","Microsoft.VSTS.Common.Epic","Custom.Epic","EpicLink","EpicName"].includes(q))];for(const q of D){const F=N.fields[q];if(F!=null){if(typeof F=="string"&&F.trim()!==""){const K=parseInt(F.trim());if(!isNaN(K)&&K>0){if(O=j.get(K)||null,O){console.log(`Work item ${N.id} has Epic ID ${K} from field ${q}: ${O}`);break}}else{O=F.trim(),console.log(`Work item ${N.id} has Epic name from field ${q}: ${O}`);break}}else if(typeof F=="number"&&(O=j.get(F)||null,O)){console.log(`Work item ${N.id} has Epic ID ${F} from field ${q}: ${O}`);break}}}}return O||console.log(`Work item ${N.id} (${N.fields["System.Title"]}) has no Epic found`),{id:N.id,fields:{"System.Title":N.fields["System.Title"],"System.Description":N.fields["System.Description"],"System.Tags":N.fields["System.Tags"],"System.WorkItemType":N.fields["System.WorkItemType"],"System.State":N.fields["System.State"],"Microsoft.VSTS.Common.Priority":N.fields["Microsoft.VSTS.Common.Priority"],"System.AreaPath":N.fields["System.AreaPath"],"System.IterationPath":N.fields["System.IterationPath"],Epic:O||void 0},url:`https://dev.azure.com/${t}/${r}/_workitems/edit/${N.id}`}})}catch(l){throw console.error("Error fetching from Azure DevOps:",l),l}}function M2(e){return e.map(t=>{let r;const n=t.fields.Epic,s=t.fields["System.WorkItemType"];if(n&&typeof n=="string"&&n.trim()!==""){const d=n.trim();d!==s&&d!=="Epic"&&d.toLowerCase()!=="epic"?(r=d,console.log(`Work item ${t.id} converted - Epic: "${r}"`)):console.warn(`Work item ${t.id} has epic field "${d}" which matches work item type "${s}" - ignoring`)}!r&&s!=="Epic"&&console.log(`Work item ${t.id} (${t.fields["System.Title"]}) has no Epic assigned`);const l=(t.fields["System.Description"]||"").replace(/<[^>]*>/g,"").trim(),u=t.fields["System.Title"]||"Untitled";return r&&u===r&&console.warn(`Work item ${t.id}: Title "${u}" matches Epic name "${r}" - this may indicate a data issue`),{id:`ado-${t.id}`,title:u,description:l,votes:0,voters:[],epic:r||void 0,state:t.fields["System.State"]||void 0,areaPath:t.fields["System.AreaPath"]||void 0,tags:t.fields["System.Tags"]?t.fields["System.Tags"].split(";").map(d=>d.trim()).filter(d=>d):[],azureDevOpsId:t.id.toString(),azureDevOpsUrl:t.url,workItemType:s||void 0}})}function F2(){return"Product".split(",").map(t=>t.trim()).filter(t=>t.length>0)}const Pi=e=>new Date(e).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}),Ys=e=>new Date(e)<new Date,L2=[{bg:"#2D4660",text:"#FFFFFF",border:"#1D3144"},{bg:"#1E5461",text:"#FFFFFF",border:"#133742"},{bg:"#C89212",text:"#FFFFFF",border:"#A67810"},{bg:"#173B65",text:"#FFFFFF",border:"#0F2844"},{bg:"#2E5A8F",text:"#FFFFFF",border:"#1F4468"},{bg:"#4A6A8F",text:"#FFFFFF",border:"#3D5A7D"},{bg:"#5479A1",text:"#FFFFFF",border:"#4A6A8F"},{bg:"#6B8FBF",text:"#FFFFFF",border:"#5479A1"},{bg:"#3D7BAD",text:"#FFFFFF",border:"#2E5A8F"},{bg:"#258799",text:"#FFFFFF",border:"#145668"},{bg:"#36849B",text:"#FFFFFF",border:"#2A7489"},{bg:"#4098B3",text:"#FFFFFF",border:"#36849B"},{bg:"#2B9BAD",text:"#FFFFFF",border:"#1E7A89"},{bg:"#1FA3B5",text:"#FFFFFF",border:"#178290"},{bg:"#2D7A4E",text:"#FFFFFF",border:"#1E5A38"},{bg:"#3A9B5C",text:"#FFFFFF",border:"#2D7A4E"},{bg:"#52B876",text:"#FFFFFF",border:"#3A9B5C"},{bg:"#6FD492",text:"#FFFFFF",border:"#52B876"},{bg:"#4CAF7A",text:"#FFFFFF",border:"#3A9B5C"},{bg:"#7CB342",text:"#FFFFFF",border:"#689F38"},{bg:"#9CCC65",text:"#111827",border:"#7CB342"},{bg:"#E0A925",text:"#111827",border:"#C89212"},{bg:"#F4B729",text:"#111827",border:"#E0A925"},{bg:"#FFC940",text:"#111827",border:"#F4B729"},{bg:"#D4A017",text:"#FFFFFF",border:"#B8890F"},{bg:"#D87A35",text:"#FFFFFF",border:"#C4681F"},{bg:"#E88F3A",text:"#FFFFFF",border:"#D87A35"},{bg:"#FF9F4A",text:"#FFFFFF",border:"#E88F3A"},{bg:"#FF8C42",text:"#FFFFFF",border:"#E88F3A"},{bg:"#B83A2F",text:"#FFFFFF",border:"#9F2A21"},{bg:"#D44638",text:"#FFFFFF",border:"#B83A2F"},{bg:"#E85240",text:"#FFFFFF",border:"#D44638"},{bg:"#591D0F",text:"#FFFFFF",border:"#3C130A"},{bg:"#8A3420",text:"#FFFFFF",border:"#6F2818"},{bg:"#6B4C9A",text:"#FFFFFF",border:"#573A7F"},{bg:"#8E6BB5",text:"#FFFFFF",border:"#7556A1"},{bg:"#9B7AC7",text:"#FFFFFF",border:"#8E6BB5"},{bg:"#5D3F7A",text:"#FFFFFF",border:"#4A2F61"},{bg:"#492434",text:"#FFFFFF",border:"#311823"},{bg:"#5D2F43",text:"#FFFFFF",border:"#492434"},{bg:"#8B3A62",text:"#FFFFFF",border:"#6F2A4D"},{bg:"#A14A76",text:"#FFFFFF",border:"#8B3A62"},{bg:"#6A4234",text:"#FFFFFF",border:"#4B2D23"},{bg:"#8B5A3C",text:"#FFFFFF",border:"#6A4234"},{bg:"#A0694B",text:"#FFFFFF",border:"#8B5A3C"},{bg:"#7D5A3A",text:"#FFFFFF",border:"#6A4234"},{bg:"#3A3638",text:"#FFFFFF",border:"#2A2628"},{bg:"#4A4548",text:"#FFFFFF",border:"#3A3638"},{bg:"#5C5A5D",text:"#FFFFFF",border:"#4A4548"},{bg:"#7A8590",text:"#FFFFFF",border:"#5F6A74"},{bg:"#8F959B",text:"#111827",border:"#72777C"}],ZX=e=>e?e.trim().toLowerCase():"",eZ=e=>{let t=0;for(let r=0;r<e.length;r+=1)t=t*31+e.charCodeAt(r)>>>0;return t},Uf=(e,t,r)=>Math.min(Math.max(e,t),r),tZ=e=>{if(!e)return null;let t=e.trim();return!t||(t.startsWith("#")||(t=`#${t}`),t.length===4&&(t=`#${t[1]}${t[1]}${t[2]}${t[2]}${t[3]}${t[3]}`),t.length!==7)?null:t.toUpperCase()},Iw=e=>{const t=e.replace("#",""),r=parseInt(t,16);return{r:r>>16&255,g:r>>8&255,b:r&255}},rZ=({r:e,g:t,b:r})=>{const n=[e,t,r].map(s=>{const i=s/255;return i<=.03928?i/12.92:Math.pow((i+.055)/1.055,2.4)});return .2126*n[0]+.7152*n[1]+.0722*n[2]},nZ=e=>rZ(Iw(e))>.6?"#111827":"#FFFFFF",z2=(e,t)=>{const{r,g:n,b:s}=Iw(e),i=1+t/100,l=Uf(Math.round(r*i),0,255),u=Uf(Math.round(n*i),0,255),d=Uf(Math.round(s*i),0,255);return`#${l.toString(16).padStart(2,"0")}${u.toString(16).padStart(2,"0")}${d.toString(16).padStart(2,"0")}`.toUpperCase()},sZ=(e,t)=>{const{r,g:n,b:s}=Iw(e);return`rgba(${r}, ${n}, ${s}, ${Uf(t,0,1)})`},Qn=(e,t)=>{const r=tZ(t);if(r){const l=nZ(r);return{background:r,text:l,border:z2(r,-20),badgeBackground:sZ(r,.15),badgeText:l,hoverBackground:z2(r,-5),hoverText:l}}const n=ZX(e),s=n?eZ(n)%L2.length:0,i=L2[s];return{background:i.bg,text:i.text,border:i.border,badgeBackground:`${i.bg}1A`,badgeText:i.text,hoverBackground:i.bg,hoverText:i.text}};function c4({label:e="Product",products:t,value:r,onChange:n,fallbackName:s=null,isLoading:i=!1,error:l=null,disabled:u=!1,placeholder:d="Select a product",helperText:m,className:f="",allowAdd:p=!1,newProductName:y="",onNewProductNameChange:x,newProductColor:b,onNewProductColorChange:j,onCreateProduct:S,isCreatingProduct:k=!1,addHelperText:C,addButtonLabel:N="Add Product",addInputPlaceholder:O="e.g., Catalyst Cloud",allowDelete:P=!1,onRequestDeleteProduct:T}){const[D,q]=v.useState(!1),F=v.useRef(null),K=v.useRef(null),[B,Q]=v.useState(!1),[oe,ae]=v.useState(!1),J=v.useMemo(()=>t.find(de=>de.id===r)??null,[t,r]),H=(J==null?void 0:J.name)??s??"",ne=H?Qn(H,(J==null?void 0:J.color_hex)??null):null,ie=u||i||t.length===0;v.useEffect(()=>{if(!D)return;function de(ye){F.current&&!F.current.contains(ye.target)&&q(!1)}function xe(ye){ye.key==="Escape"&&q(!1)}return document.addEventListener("mousedown",de),document.addEventListener("keydown",xe),()=>{document.removeEventListener("mousedown",de),document.removeEventListener("keydown",xe)}},[D]);const ge=de=>{n(de),q(!1)},ve=!!(p&&x&&S),I=ve&&B,V=!!j,Ae=b??"#2D4660",X=!!(e&&e.trim().length>0),re=X||ve;return o.jsxs("div",{className:`space-y-3 ${f}`,children:[o.jsx("style",{children:`
        .product-picker__menu {
          box-shadow: 0px 12px 28px rgba(45, 70, 96, 0.18);
          width: 100%;
          background-color: #ffffff;
          overflow: hidden;
        }

        .product-picker__item {
          display: flex;
          width: 100%;
          align-items: center;
          justify-content: flex-start;
          gap: 0.75rem;
          padding: 0.65rem 0.75rem;
          font-size: 0.875rem;
          background: #ffffff;
          border: none;
          border-top: 1px solid rgba(203, 213, 225, 0.4);
          cursor: pointer;
          color: var(--product-color, #2D4660);
          transition: color 0.3s ease;
          text-align: left;
        }

        .product-picker__item:first-child {
          border-top: none;
        }

        .product-picker__item:hover,
        .product-picker__item:focus-visible {
          background-color: var(--product-light-bg, rgba(45, 70, 96, 0.1));
          outline: none;
        }

        .product-color-badge {
          width: 1.5rem;
          height: 1.5rem;
          border-radius: 0.35rem;
          flex-shrink: 0;
          background-color: var(--product-color, #2D4660);
          border: 1px solid var(--product-border-color, rgba(0,0,0,0.12));
          box-shadow: inset 0 0 0 1px rgba(255,255,255,0.35);
        }
      `}),o.jsxs("div",{className:"relative",ref:F,children:[re&&o.jsxs("div",{className:"flex items-center justify-between mb-1 gap-3",children:[X&&o.jsx("label",{className:"block text-sm font-medium text-gray-700",children:e}),ve&&o.jsx("div",{className:"flex-1 flex items-center justify-end gap-2",children:I?o.jsxs("div",{className:"flex items-center gap-2 transition-all duration-300",children:[o.jsx("input",{type:"text",value:y,onChange:de=>{ae(!1),x==null||x(de.target.value)},placeholder:"Product name",className:"flex-1 h-10 px-3 border rounded-md text-sm focus:outline-none focus:ring-0",style:{borderColor:b&&y.trim().length>0?b:"#D1D5DB"}}),V&&y.trim().length>0&&o.jsxs(o.Fragment,{children:[o.jsx("button",{type:"button",onClick:()=>{var de;return(de=K.current)==null?void 0:de.click()},className:`relative h-10 w-10 rounded-md border shadow-sm flex items-center justify-center focus:outline-none focus:ring-2 focus:ring-offset-1 focus:ring-[#2d4660] ${b?"":"border-gray-300 bg-white"}`,style:b?{backgroundColor:b,borderColor:b}:void 0,"aria-label":"Choose product color",children:!b&&o.jsx("img",{src:"https://icon-library.com/images/color-wheel-icon-png/color-wheel-icon-png-25.jpg",alt:"",className:"h-7 w-7 object-contain pointer-events-none"})}),o.jsx("input",{ref:K,type:"color",value:Ae,onChange:de=>{ae(!1),j==null||j(de.target.value)},className:"sr-only"}),y.trim().length>0&&o.jsx("button",{type:"button",onClick:()=>ae(!0),className:`h-10 px-3 rounded-md text-sm font-medium border transition-colors ${oe?"bg-green-50 border-green-500 text-green-700":"bg-white border-gray-300 text-gray-700 hover:bg-gray-50"}`,children:"Looks Great"})]}),y.trim().length>0&&b&&oe&&o.jsx("button",{type:"button",onClick:S,className:"h-10 px-4 bg-[#C89212] text-white rounded-md text-sm font-semibold hover:bg-[#A67810] transition-colors",children:k?"Creating":"Create New Product"})]}):o.jsx("button",{type:"button",onClick:()=>Q(!0),className:"text-sm font-medium text-blue-600 hover:text-blue-700 whitespace-nowrap",children:"+ Create New Product"})})]}),o.jsxs("button",{type:"button",onClick:()=>!ie&&q(de=>!de),className:`relative flex w-full items-center justify-between rounded-md border px-3 py-2 text-left text-sm ${ie?"cursor-not-allowed bg-gray-100 text-gray-400 border-gray-200":"bg-white text-gray-900 border-gray-300 hover:border-[#2D4660]"}`,style:!ie&&ne?{borderColor:ne.border}:void 0,"aria-expanded":D,"aria-haspopup":"listbox",children:[o.jsxs("div",{className:"flex items-center gap-2 truncate",children:[ne&&o.jsx("span",{className:"inline-flex h-3.5 w-3.5 rounded-sm border border-white/60 shadow-inner",style:{backgroundColor:ne.background,borderColor:ne.border},"aria-hidden":"true"}),o.jsx("span",{className:`truncate ${H?"":"text-gray-400"}`,style:ne?{color:ne.background}:void 0,children:H||(t.length===0?"No products available":d)})]}),o.jsx(On,{className:`ml-2 h-4 w-4 transition-transform ${D?"rotate-180":""} ${ie?"text-gray-300":"text-gray-500"}`})]}),D&&!ie&&o.jsx("div",{className:"product-picker__menu absolute left-0 z-50 mt-2 w-full overflow-hidden rounded-md border border-gray-200 bg-white",role:"listbox",children:o.jsx("div",{className:"max-h-60 overflow-y-auto py-1",children:t.map(de=>{const xe=Qn(de.name,de.color_hex??null),ye=r===de.id;return o.jsxs("div",{className:"product-picker__item",style:{"--product-color":xe.background,"--product-light-bg":xe.badgeBackground,"--product-border-color":xe.border},children:[o.jsxs("button",{type:"button",className:"flex flex-1 items-center gap-3 text-left",onClick:()=>ge(de.id),"aria-selected":ye,children:[o.jsx("span",{className:"product-color-badge","aria-hidden":"true"}),o.jsx("span",{className:"flex-1 truncate font-medium",children:de.name}),ye&&o.jsx(Or,{className:"h-4 w-4 text-gray-400"})]}),P&&T&&o.jsx("button",{type:"button",onClick:U=>{U.stopPropagation(),q(!1),T(de)},className:"ml-2 text-gray-400 hover:text-[#B83A2F]","aria-label":`Delete ${de.name}`,title:"Delete product",children:o.jsx(vi,{className:"h-4 w-4"})})]},de.id)})})}),i&&o.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"Loading products"}),l&&o.jsx("p",{className:"mt-1 text-xs text-[#591D0F]",children:l}),!i&&!l&&m&&o.jsx("p",{className:"mt-1 text-xs text-gray-500",children:m})]}),ve&&C&&I&&o.jsx("p",{className:"text-xs text-gray-500",children:C})]})}const U2=["OpsVision Portal","MillTrack Insight","Quality Compass","Supply Sync","Roadmap Nexus","Fabricator Hub","Blueprint Studio","Velocity Forge","Navigator Suite","Catalyst Cloud"],B2=e=>{if(!e)return null;const t=e.trim();return t.length===0?null:t},iZ=e=>{let t=0;for(let r=0;r<e.length;r+=1)t=t*31+e.charCodeAt(r)>>>0;return U2[t%U2.length]};function yn(e,t){const r=e.product_id??e.productId??null;if(r&&t){const i=B2(t[r]);if(i)return i}const n=B2(e.product_name??e.productName);if(n)return n;const s=r||e.id||e.title||"default-product";return iZ(s)}const aZ=["Stakeholders need more time","New backlog items require votes","Clarify previous results","Technical issue resolved","Other"],W2="https://cdn.iconscout.com/icon/free/png-512/azure-devops-3628645-3029870.png";function V2({options:e,value:t,onChange:r,placeholder:n="Select...",label:s,disabled:i=!1,variant:l="default"}){const[u,d]=v.useState(!1),m=v.useRef(null);v.useEffect(()=>{function S(k){m.current&&!m.current.contains(k.target)&&d(!1)}return document.addEventListener("mousedown",S),()=>document.removeEventListener("mousedown",S)},[]);const f=S=>{r(S),d(!1)},p=t||n,y=l==="green"?"border-green-600":"border-gray-300",x=l==="green"?"text-green-600":"text-gray-400",b=l==="green"?"bg-green-50":"bg-blue-50",j=l==="green"?"text-green-600":"text-[#1E5461]";return o.jsxs("div",{ref:m,className:"relative",children:[s&&o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:s}),o.jsxs("div",{onClick:()=>!i&&d(!u),className:`w-full px-3 py-2 border ${y} rounded-md min-h-[38px] flex items-center justify-between ${i?"bg-gray-100 cursor-not-allowed":"bg-white cursor-pointer"}`,children:[o.jsx("span",{className:`text-sm ${t?"text-gray-900":"text-gray-400"}`,children:p}),o.jsx(On,{className:`h-4 w-4 ${x} transition-transform ${u?"transform rotate-180":""}`})]}),u&&!i&&o.jsx("div",{className:"absolute z-50 w-full mt-1 bg-white border border-gray-300 rounded-md shadow-lg max-h-60 overflow-y-auto",children:e.map(S=>o.jsxs("div",{onClick:()=>f(S),className:`px-3 py-2 cursor-pointer hover:bg-gray-50 flex items-center justify-between ${t===S?b:""}`,children:[o.jsx("span",{className:"text-sm text-gray-900",children:S}),t===S&&o.jsx(Or,{className:`h-4 w-4 ${j}`})]},S))})]})}function Pf({options:e,value:t,onChange:r,placeholder:n="Select...",label:s,searchable:i=!1,disabled:l=!1}){const[u,d]=v.useState(!1),[m,f]=v.useState(""),p=v.useRef(null),y=v.useRef(null);v.useEffect(()=>{function k(C){p.current&&!p.current.contains(C.target)&&(d(!1),f(""))}return document.addEventListener("mousedown",k),()=>document.removeEventListener("mousedown",k)},[]),v.useEffect(()=>{u&&i&&y.current&&y.current.focus()},[u,i]);const x=k=>{t.includes(k)?r(t.filter(C=>C!==k)):r([...t,k])},b=(k,C)=>{C.stopPropagation(),r(t.filter(N=>N!==k))},j=k=>{k.stopPropagation(),r([])},S=i&&m?e.filter(k=>k.toLowerCase().includes(m.toLowerCase())):e;return o.jsxs("div",{ref:p,className:"relative",children:[s&&o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:s}),o.jsxs("div",{onClick:()=>!l&&d(!u),className:`w-full px-3 py-2 border border-gray-300 rounded-md min-h-[38px] flex items-center justify-between ${l?"bg-gray-100 cursor-not-allowed":"bg-white cursor-pointer"}`,children:[o.jsx("div",{className:"flex-1 flex flex-wrap gap-1",children:t.length===0?o.jsx("span",{className:"text-sm text-gray-400",children:n}):t.map(k=>o.jsxs("span",{className:"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-[#2D4660]/10 text-[#2D4660]",children:[k,!l&&o.jsx("button",{type:"button",onClick:C=>b(k,C),className:"ml-1 hover:text-[#173B65]",children:o.jsx(gi,{className:"h-3 w-3"})})]},k))}),o.jsxs("div",{className:"flex items-center gap-1 ml-2",children:[t.length>0&&!l&&o.jsx("button",{type:"button",onClick:j,className:"text-gray-400 hover:text-gray-600",children:o.jsx(gi,{className:"h-4 w-4"})}),o.jsx(On,{className:`h-4 w-4 text-gray-400 transition-transform ${u?"transform rotate-180":""}`})]})]}),u&&!l&&o.jsxs("div",{className:"absolute z-50 w-full mt-1 bg-white border border-gray-300 rounded-md shadow-lg max-h-60 overflow-hidden flex flex-col",children:[i&&o.jsx("div",{className:"p-2 border-b border-gray-200",children:o.jsx("input",{ref:y,type:"text",value:m,onChange:k=>f(k.target.value),onClick:k=>k.stopPropagation(),placeholder:"Type to search...",className:"w-full px-3 py-1.5 text-sm border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[#2D4660]"})}),o.jsx("div",{className:"overflow-y-auto",children:S.length>0?S.map(k=>o.jsxs("div",{onClick:()=>x(k),className:`px-3 py-2 cursor-pointer hover:bg-gray-50 flex items-center justify-between ${t.includes(k)?"bg-[#2D4660]/5":""}`,children:[o.jsx("span",{className:"text-sm",children:k}),t.includes(k)&&o.jsx(Or,{className:"h-4 w-4 text-[#1E5461]"})]},k)):o.jsx("div",{className:"px-3 py-2 text-sm text-gray-500 text-center",children:"No matches found"})})]})]})}function oZ({config:e,onUpdateConfig:t,onPreview:r,isFetching:n,availableStates:s,availableAreaPaths:i,availableTags:l,previewFeatures:u,showPreviewModal:d,onFetchStatesForType:m,onFetchAreaPathsForTypeAndState:f,onFetchTagsForTypeStateAndAreaPath:p,onFetchTypesAndStatesForAreaPath:y,onFetchTypesAndStatesForTags:x,onFetchTypesAndAreaPathsForStates:b,resetSignal:j}){const S=a4,[k,C]=v.useState(!1),[N,O]=v.useState(null),[P,T]=v.useState(!1),[D,q]=v.useState(!1),[F,K]=v.useState(!1),B=v.useRef(null),Q=v.useRef(!1),oe=v.useRef(!1),ae=v.useRef(!1),J=v.useRef(!1),H={workItemTypes:[],states:[],areaPaths:[],tags:[],query:""},{register:ne,handleSubmit:ie,watch:ge,control:ve,setValue:I,reset:V}=ku({defaultValues:H}),Ae=v.useCallback(()=>{V({...H}),C(!1),oe.current=!1,ae.current=!1,J.current=!1},[V]);v.useEffect(()=>{Ae()},[j,Ae]);const X=ge("workItemTypes"),re=ge("states"),de=ge("areaPaths"),xe=ge("tags"),ye=ge("query"),U=v.useCallback((Z,Pe,Ve,ft,gt,Ct)=>{const _t=[];if(Z&&Z.length>0)if(Z.length===1)_t.push(`[System.WorkItemType] = '${Z[0]}'`);else{const kt=Z.map($=>`'${$}'`).join(", ");_t.push(`[System.WorkItemType] IN (${kt})`)}if(Pe&&Pe.length>0)if(Pe.length===1)_t.push(`[System.State] = '${Pe[0]}'`);else{const kt=Pe.map($=>`'${$}'`).join(", ");_t.push(`[System.State] IN (${kt})`)}if(Ve&&Ve.length>0)if(Ve.length===1)_t.push(`[System.AreaPath] UNDER '${Ve[0]}'`);else{const kt=Ve.map($=>`[System.AreaPath] UNDER '${$}'`);_t.push(`(${kt.join(" OR ")})`)}if(ft&&ft.length>0){const kt=ft.map($=>`[System.Tags] CONTAINS '${$}'`);_t.push(`(${kt.join(" OR ")})`)}return Ct&&gt&&_t.push(`(${gt})`),_t.length>0?_t.join(" AND "):void 0},[]);v.useEffect(()=>{if(!(oe.current||ae.current||J.current)&&m){if(!X||X.length===0){m(void 0);return}m(X[0])}},[X,m]),v.useEffect(()=>{if(oe.current||ae.current||!f)return;(async()=>{q(!0);try{await f(X&&X.length>0?X[0]:void 0,re||[])}finally{q(!1)}})()},[X,re,f]),v.useEffect(()=>{if(ae.current||!p||!X||X.length===0)return;const Z=async()=>{K(!0);try{await p(X[0],re||[],de||[])}finally{K(!1)}},Pe=setTimeout(()=>{Z()},100);return()=>{clearTimeout(Pe),K(!1)}},[X,re,de,p]),v.useEffect(()=>{if(!y||ae.current||J.current||!de||de.length===0)return;const Z=X&&X.length>0,Pe=re&&re.length>0;Z&&Pe||(oe.current=!0,y(de).then(({types:Ve,states:ft})=>{Ve.length>0&&!Z&&I("workItemTypes",Ve,{shouldDirty:!1}),ft.length>0&&!Pe&&I("states",ft,{shouldDirty:!1})}).finally(()=>{setTimeout(()=>{oe.current=!1},300)}))},[de,X,re,y,I]),v.useEffect(()=>{x&&(oe.current||J.current||!xe||xe.length===0||(ae.current=!0,x(xe).then(({types:Z,states:Pe,areaPaths:Ve})=>{Z.length>0&&I("workItemTypes",Z,{shouldDirty:!1}),Pe.length>0&&I("states",Pe,{shouldDirty:!1}),Ve.length>0&&I("areaPaths",Ve,{shouldDirty:!1})}).finally(()=>{setTimeout(()=>{ae.current=!1},300)})))},[xe,x,I]),v.useEffect(()=>{!b||oe.current||ae.current||!re||re.length===0||X&&X.length>0||(J.current=!0,b(re).then(({types:Pe})=>{Pe.length>0&&I("workItemTypes",Pe,{shouldDirty:!1})}).finally(()=>{setTimeout(()=>{J.current=!1},300)}))},[re,X,b,I]),v.useEffect(()=>{if(re&&re.length>0&&s.length>0){const Z=re.filter(Pe=>s.includes(Pe));Z.length!==re.length&&I("states",Z)}},[s,re,I]),v.useEffect(()=>{if(de&&de.length>0&&i.length>0){const Z=de.filter(Pe=>i.includes(Pe));Z.length!==de.length&&(I("areaPaths",Z),Z.length===0&&I("tags",[]))}},[i,de,I]),v.useEffect(()=>{if(xe&&xe.length>0&&l.length>0){const Z=xe.filter(Pe=>l.includes(Pe));Z.length!==xe.length&&I("tags",Z)}},[l,xe,I]);const $e=v.useCallback(async()=>{if(!e.enabled||!e.accessToken||!X||X.length===0){O(null);return}try{T(!0);const Z=X[0],Pe=U(X||[],re||[],de||[],xe||[],ye||"",k);let Ve="";Pe?Ve=`SELECT [System.Id] FROM WorkItems WHERE ${Pe}`:Ve=`SELECT [System.Id] FROM WorkItems WHERE [System.WorkItemType] = '${Z}' AND [System.State] = 'Active'`;const ft=`https://dev.azure.com/${e.organization}/${e.project}/_apis/wit/wiql?api-version=7.0`,gt=await fetch(ft,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${e.accessToken}`},body:JSON.stringify({query:Ve})});if(!gt.ok)throw new Error(`Azure DevOps query failed: ${gt.status} ${gt.statusText}`);const Ct=await gt.json(),_t=Ct.workItems?Ct.workItems.length:0;O(_t)}catch(Z){console.error("[FilterForm] Error fetching feature count:",Z),O(null)}finally{T(!1)}},[e,X,re,de,xe,ye,k,U]);v.useEffect(()=>(B.current!==null&&window.clearTimeout(B.current),O(null),X&&X.length>0&&e.enabled&&e.accessToken&&(B.current=window.setTimeout(()=>{$e()},300)),()=>{B.current!==null&&window.clearTimeout(B.current)}),[X,re,de,xe,ye,k,e.enabled,e.accessToken,$e]),v.useEffect(()=>{if(d&&!Q.current&&u){const Z=u.length;O(Z)}Q.current=d||!1},[d,u]),v.useEffect(()=>{u&&u.length>0&&!P&&O(u.length)},[u,P]),v.useEffect(()=>{const Z=U(X||[],re||[],de||[],xe||[],ye||"",k),Pe={...e,workItemType:X&&X.length>0?X[0]:e.workItemType||"Feature",query:Z,states:re&&re.length>0?re:void 0,areaPath:de&&de.length>0?de[0]:void 0,tags:xe&&xe.length>0?xe:void 0},Ve=window.setTimeout(()=>{t(Pe)},100);return()=>{window.clearTimeout(Ve)}},[X,re,de,xe,ye,k,U,t]);const Ze=async Z=>{await r()};return o.jsxs("form",{onSubmit:ie(Ze),className:"bg-gray-50 p-4 rounded-lg border border-gray-200",children:[o.jsxs("div",{className:"flex items-center justify-between mb-4",children:[o.jsxs("h3",{className:"text-lg font-medium text-[#2D4660] flex items-center",children:[o.jsx(qM,{className:"h-5 w-5 mr-2"}),"Filter Work Items"]}),o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("button",{type:"button",onClick:Ae,className:"text-xs text-[#576C71] hover:text-[#2D4660] font-medium border border-transparent hover:border-[#576C71] rounded-full px-2 py-0.5 transition",children:"Clear All Filters"}),o.jsx("button",{type:"button",onClick:()=>C(!k),className:"text-xs text-[#1E5461] hover:text-[#2D4660] font-medium",children:k?" Hide Advanced WIQL":"Show Advanced WIQL "})]})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-4",children:[o.jsxs("div",{children:[o.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[o.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Work Item Type"}),o.jsx("span",{className:"px-2 py-0.5 rounded-full text-xs font-semibold text-white bg-[#2D4660]",children:S.length})]}),o.jsx(zl,{name:"workItemTypes",control:ve,render:({field:Z})=>o.jsx(Pf,{options:S,value:Z.value,onChange:Z.onChange,placeholder:"Select types..."})}),o.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"Click to select multiple types"})]}),o.jsxs("div",{children:[o.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[o.jsx("span",{className:"text-sm font-medium text-gray-700",children:"State (Optional)"}),o.jsx("span",{className:"px-2 py-0.5 rounded-full text-xs font-semibold text-white bg-[#1E5461]",children:(s==null?void 0:s.length)||0})]}),o.jsx(zl,{name:"states",control:ve,render:({field:Z})=>o.jsx(Pf,{options:s,value:Z.value,onChange:Z.onChange,placeholder:"Select states...",disabled:s.length===0})}),o.jsx("p",{className:"mt-1 text-xs text-gray-500",children:s.length===0?"Loading states...":"Filtered by work item type"})]}),o.jsxs("div",{children:[o.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[o.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Area Path (Optional)"}),o.jsx("span",{className:"px-2 py-0.5 rounded-full text-xs font-semibold text-white bg-[#576C71]",children:(i==null?void 0:i.length)||0})]}),o.jsx(zl,{name:"areaPaths",control:ve,render:({field:Z})=>o.jsx(Pf,{options:i,value:Z.value,onChange:Z.onChange,placeholder:"Select area paths...",searchable:!0,disabled:i.length===0})}),o.jsx("p",{className:"mt-1 text-xs text-gray-500",children:D?"Loading area paths...":i.length===0?"No area paths found for current filters":"Filtered by type & state"})]}),o.jsxs("div",{children:[o.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[o.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Tags (Optional)"}),o.jsx("span",{className:"px-2 py-0.5 rounded-full text-xs font-semibold text-white bg-[#C89212]",children:(l==null?void 0:l.length)||0})]}),o.jsx(zl,{name:"tags",control:ve,render:({field:Z})=>o.jsx(Pf,{options:l,value:Z.value,onChange:Z.onChange,placeholder:"Select tags...",searchable:!0,disabled:l.length===0&&!F})}),o.jsx("p",{className:"mt-1 text-xs text-gray-500",children:!X||X.length===0?"Select work item type to see tags":F?"Loading tags...":l.length===0?"No tags found for current filters":"Filtered by type, state & area"})]})]}),k&&o.jsxs("div",{className:"mb-4",children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Advanced WIQL Query (Optional)"}),o.jsx("input",{...ne("query"),placeholder:"e.g., [System.Priority] = 1",className:"w-full px-3 py-2 border border-gray-300 rounded-md text-sm"}),o.jsxs("p",{className:"mt-1 text-xs text-gray-500",children:["Will be combined with above filters using AND."," ",o.jsx("a",{href:"https://learn.microsoft.com/en-us/azure/devops/boards/queries/wiql-syntax",target:"_blank",rel:"noopener noreferrer",className:"text-[#1E5461] hover:text-[#2D4660]",children:"WIQL syntax reference "})]})]}),o.jsx("div",{className:"flex justify-end",children:o.jsxs(nt,{variant:"gold",type:"submit",disabled:(()=>{const Z=((X==null?void 0:X.length)??0)>0,Pe=((re==null?void 0:re.length)??0)>0,Ve=((de==null?void 0:de.length)??0)>0,ft=((xe==null?void 0:xe.length)??0)>0,gt=ye&&ye.trim().length>0;return n||P||!(Z||Pe||Ve||ft||gt)})(),className:"flex items-center",children:[n&&o.jsx(Po,{className:"animate-spin h-4 w-4 mr-2"}),n?"Loading...":N!==null&&!P?`Preview ${N} Feature${N!==1?"s":""}`:"Preview Features"]})})]})}function lZ({session:e,featureCount:t,onSubmit:r,onCancel:n,onRequestDeleteSession:s,isDeletingSession:i,productName:l,products:u,isLoadingProducts:d,productError:m,onRequestDeleteProduct:f,onProductColorUpdated:p}){const[y,x]=v.useState(null),[b,j]=v.useState(!1),[S,k]=v.useState("#2D4660"),[C,N]=v.useState(null),[O,P]=v.useState(!1);v.useRef(null);const T=v.useMemo(()=>{const I={};return u.forEach(V=>{V.id&&V.name&&(I[V.id]=V.name)}),I},[u]),{register:D,handleSubmit:q,watch:F,reset:K,control:B,setValue:Q,formState:{errors:oe}}=ku({defaultValues:{productId:e.productId??e.product_id??"",title:e.title,goal:e.goal,startDate:e.startDate.split("T")[0],endDate:e.endDate.split("T")[0],useAutoVotes:e.useAutoVotes||!1,votesPerUser:e.votesPerUser}});v.useEffect(()=>{K({productId:e.productId??e.product_id??"",title:e.title,goal:e.goal,startDate:e.startDate.split("T")[0],endDate:e.endDate.split("T")[0],useAutoVotes:e.useAutoVotes||!1,votesPerUser:e.votesPerUser})},[e,K]);const ae=e.productName??e.product_name??l??"",J=e.productId??e.product_id??"";v.useEffect(()=>{if(!u.length)return;if(J){u.some(Ae=>Ae.id===J)&&Q("productId",J,{shouldDirty:!1,shouldTouch:!1});return}if(!ae)return;const I=u.find(V=>V.name.toLowerCase()===ae.toLowerCase());I&&Q("productId",I.id,{shouldDirty:!1,shouldTouch:!1})},[u,J,ae,Q]);const H=F("useAutoVotes"),ne=F("productId"),ie=v.useMemo(()=>!C||!ne?u:u.map(I=>I.id===ne?{...I,color_hex:C}:I),[u,C,ne]);v.useEffect(()=>{if(!ne)return;u.some(V=>V.id===ne)||Q("productId","",{shouldDirty:!0,shouldTouch:!0})},[ne,u,Q]),v.useEffect(()=>{if(ne&&u.length>0){const I=u.find(V=>V.id===ne);if(I){const V=I.color_hex??null;x(V),k(V||"#2D4660"),N(null),j(!1)}}else ne||(x(null),k("#2D4660"),N(null),j(!1))},[ne,u]);const ge=H?Math.max(1,Math.floor(t/2)):F("votesPerUser"),ve=async I=>{try{if(console.log("=== FORM SUBMISSION STARTED ==="),console.log("handleFormSubmit called with form data:",I),console.log("data.productId:",I.productId),console.log("selectedProductId from watch:",ne),console.log("Form errors:",oe),C&&ne){console.log("Updating product color:",C,"for product:",ne),P(!0);try{await G0(ne,{color_hex:C}),p&&p(),N(null),x(C),console.log("Product color updated successfully")}catch(V){console.error("Error updating product color:",V)}finally{P(!1)}}console.log("Calling onSubmit with data:",I),r(I),console.log("=== FORM SUBMISSION COMPLETED ===")}catch(V){throw console.error("ERROR in handleFormSubmit:",V),V}};return o.jsxs("form",{onSubmit:q(I=>(console.log("FORM onSubmit triggered via handleSubmit"),ve(I)),I=>{console.log("FORM VALIDATION ERRORS:",I)}),children:[o.jsx(zl,{control:B,name:"productId",render:({field:I})=>{const V=ie.find(U=>U.id===I.value)??null,Ae=I.value?T[I.value]??null:null,X=V?null:Ae??(ae||null),re=!!I.value,de=(V==null?void 0:V.color_hex)||null,xe=V?Qn(V.name,de??null):null,ye=(xe==null?void 0:xe.background)||null;return o.jsx("div",{className:"mb-4",children:o.jsxs("div",{className:"flex items-start gap-3",children:[o.jsx("div",{className:"flex-1",children:o.jsx(c4,{products:ie,value:I.value,onChange:U=>{console.log("ProductPicker onChange called with value:",U),I.onChange(U)},fallbackName:X,isLoading:d,error:m,disabled:d||ie.length===0,helperText:!d&&ie.length===0&&!m?"No products found yet. Create products from the session creation modal.":void 0,allowDelete:!!f,onRequestDeleteProduct:f})}),re&&o.jsxs("div",{className:"flex items-center gap-2 mt-6",children:[o.jsx("label",{className:"text-sm font-medium text-gray-700 whitespace-nowrap",children:"Product Color"}),o.jsx("button",{type:"button",onClick:()=>{const U=ye||"#2D4660";k(U),x(U),j(!0)},className:"block w-10 h-10 rounded-md border-2 border-gray-300 hover:border-gray-400 transition-all shadow-sm",style:{backgroundColor:ye||"#2D4660",borderColor:(xe==null?void 0:xe.border)||"#D1D5DB"},title:"Change product color"})]})]})})}}),o.jsxs("div",{className:"mb-4",children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Session Title"}),o.jsx("input",{...D("title",{required:"Title is required"}),className:"w-full px-3 py-2 border border-gray-300 rounded-md"}),oe.title&&o.jsx("p",{className:"mt-1 text-sm text-red-600",children:oe.title.message})]}),o.jsxs("div",{className:"mb-4",children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Goal"}),o.jsx("textarea",{...D("goal",{required:"Goal is required"}),rows:2,className:"w-full px-3 py-2 border border-gray-300 rounded-md"}),oe.goal&&o.jsx("p",{className:"mt-1 text-sm text-red-600",children:oe.goal.message})]}),o.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Start Date"}),o.jsx("input",{type:"date",...D("startDate",{required:"Start date is required"}),className:"w-full px-3 py-2 border border-gray-300 rounded-md"}),oe.startDate&&o.jsx("p",{className:"mt-1 text-sm text-red-600",children:oe.startDate.message})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"End Date"}),o.jsx("input",{type:"date",...D("endDate",{required:"End date is required"}),className:"w-full px-3 py-2 border border-gray-300 rounded-md"}),oe.endDate&&o.jsx("p",{className:"mt-1 text-sm text-red-600",children:oe.endDate.message})]})]}),o.jsxs("div",{className:"mb-4 bg-[#1E5461]/5 border border-[#1E5461]/20 rounded-lg p-4",children:[o.jsxs("div",{className:"flex items-start",children:[o.jsx("input",{type:"checkbox",...D("useAutoVotes"),className:"mt-1 h-4 w-4 text-[#399E5A] border-gray-300 rounded accent-[#399E5A]"}),o.jsxs("div",{className:"ml-3",children:[o.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Automatically calculate votes per user"}),o.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:["Each user gets half the number of features (minimum 1 vote). Currently: ",ge," votes"]})]})]}),!H&&o.jsxs("div",{className:"mt-3",children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Votes Per User"}),o.jsx("input",{type:"number",min:"1",...D("votesPerUser",{required:H?!1:"Votes per user is required",min:{value:1,message:"Must be at least 1"}}),className:"w-full px-3 py-2 border border-gray-300 rounded-md"}),oe.votesPerUser&&o.jsx("p",{className:"mt-1 text-sm text-red-600",children:oe.votesPerUser.message})]})]}),o.jsxs("div",{className:"mt-6 flex flex-col gap-3 border-t border-gray-200 pt-4 sm:flex-row sm:items-center sm:justify-between",children:[o.jsxs(nt,{variant:"danger",type:"button",onClick:()=>s(),disabled:i,className:"flex items-center gap-2",children:[o.jsx(vi,{className:"h-4 w-4"}),i?"Deleting...":"Delete Session"]}),o.jsxs("div",{className:"flex w-full justify-end gap-2 sm:w-auto",children:[o.jsx(nt,{variant:"secondary",type:"button",onClick:n,children:"Cancel"}),o.jsx(nt,{variant:"primary",type:"button",onClick:async I=>{I.preventDefault(),I.stopPropagation(),console.log("SAVE BUTTON CLICKED - Manual trigger");const V=F();console.log("Form data:",V),console.log("Form errors:",oe);const Ae=await q(X=>(console.log("Manual handleFormSubmit called with:",X),ve(X)),X=>{console.log("Form validation failed:",X),alert("Please fix form errors: "+JSON.stringify(X))})();console.log("Form submission result:",Ae)},children:"Save Changes"})]})]}),b&&ne&&(()=>{const I=ie.find(V=>V.id===ne);return I?o.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",onClick:()=>{j(!1),x(I.color_hex??null),k(I.color_hex??"#2D4660"),N(null)},children:o.jsx("div",{className:"bg-white rounded-lg shadow-xl px-3 py-2 w-auto mx-4",onClick:V=>V.stopPropagation(),children:o.jsxs("div",{className:"flex gap-3 items-stretch",children:[o.jsxs("div",{className:"flex-shrink-0",style:{width:"240px",height:"260px"},children:[o.jsx("input",{id:"native-color-input",type:"color",value:S,onChange:V=>{k(V.target.value),x(V.target.value)},ref:V=>{V&&b&&setTimeout(()=>V.click(),50)},className:"opacity-0 absolute",style:{width:"1px",height:"1px"}}),o.jsx("div",{className:"w-full h-full"})]}),o.jsx("button",{type:"button",onClick:()=>{if(!ne||!S)return;const V=ie.find(X=>X.id===ne);if(!V)return;if((V.color_hex||null)===S){j(!1);return}N(S),x(S),j(!1)},disabled:O,className:"px-6 rounded-lg text-white font-bold shadow-lg hover:shadow-xl transition-all flex flex-col items-center justify-center gap-3 text-lg flex-shrink-0 disabled:opacity-50 disabled:cursor-not-allowed",style:{backgroundColor:S,height:"260px",minWidth:"100px"},children:O?o.jsx(Po,{className:"h-8 w-8 animate-spin"}):o.jsxs(o.Fragment,{children:[o.jsx(Or,{className:"h-8 w-8"}),o.jsxs("div",{className:"text-center leading-tight",children:[o.jsx("div",{children:"Looks"}),o.jsx("div",{children:"Good"})]})]})})]})})}):null})()]})}function cZ({features:e,onAddFeature:t,onUpdateFeature:r,onDeleteFeature:n,onShowResults:s,onRequestDeleteSession:i,isDeletingSession:l,showAddForm:u,setShowAddForm:d,editingFeature:m,setEditingFeature:f,onLogout:p,onShowVoterView:y,votingSession:x,azureDevOpsConfig:b,onUpdateAzureDevOpsConfig:j,onPreviewAzureDevOpsFeatures:S,onDisconnectAzureDevOps:k,isFetchingAzureDevOps:C,azureFetchError:N,onInitiateOAuth:O,availableStates:P,availableAreaPaths:T,availableTags:D,previewFeatures:q,showPreviewModal:F,setShowPreviewModal:K,onConfirmSync:B,onUpdateVotingSession:Q,onFetchStatesForType:oe,onFetchAreaPathsForTypeAndState:ae,onFetchTagsForTypeStateAndAreaPath:J,onFetchTypesAndStatesForAreaPath:H,onFetchTypesAndStatesForTags:ne,onFetchTypesAndAreaPathsForStates:ie,suggestedFeatures:ge,otherSessions:ve,onPromoteSuggestion:I,onMoveSuggestion:V,onEditSuggestion:Ae,onDeleteSuggestion:X,adminPerspective:re="session",projectOptions:de}){const xe=$s(),{currentUser:ye,currentSession:U}=Fi(),[$e,Ze]=v.useState(()=>b.project?b.project:de[0]??""),[Z,Pe]=v.useState(0);v.useEffect(()=>{b.project?Ze(b.project):de.length>0?Ze(de[0]):Ze("")},[b.project,de]);const[Ve,ft]=v.useState(!1),[gt,Ct]=v.useState(!1),[_t,kt]=v.useState(!1),[$,G]=v.useState(!1),ue=v.useRef(null),[_e,be]=v.useState(!1),je=v.useRef(null),[Fe,ke]=v.useState(null),[Ke,ct]=v.useState(!1),[ir,Mt]=v.useState(null),[Et,Qt]=v.useState(null),[Tt,Wt]=v.useState(""),[_r,er]=v.useState(null),[ar,Ur]=v.useState(!1),[xr,hr]=v.useState(null),[At,un]=v.useState({title:"",summary:"",whatWouldItDo:"",howWouldItWork:""}),[Rn,kr]=v.useState(null),[mr,Ft]=v.useState(!1),[qt,Nr]=v.useState(null),[Cr,Vn]=v.useState(!1),[Tr,qn]=v.useState(null),[Sn,Er]=v.useState([]),[_n,gs]=v.useState(!1),[Ht,Hn]=v.useState([]),[Fs,dn]=v.useState(!1),[$n,Xt]=v.useState(null),[kn,wr]=v.useState(null),[Br,ys]=v.useState(!1),[Ls,Si]=v.useState(!1),[Y,me]=v.useState(null),[Ce,Oe]=v.useState(""),[tt,We]=v.useState(!1),[St,bt]=v.useState(!1),[xt,Me]=v.useState("#2D4660"),Qr=v.useMemo(()=>{const L={};return Ht.forEach(Le=>{Le.id&&Le.name&&(L[Le.id]=Le.name)}),L},[Ht]),Vt=v.useMemo(()=>{const L={};return Ht.forEach(Le=>{Le.id&&Le.color_hex&&(L[Le.id]=Le.color_hex)}),L},[Ht]),or=v.useMemo(()=>yn({...x,product_id:x.product_id??(U==null?void 0:U.product_id)??x.productId??null,product_name:null},Qr),[x,U,Qr]),A=v.useMemo(()=>{const L=x.product_id??x.productId??null;return L?Vt[L]??null:null},[x,Vt]),he=v.useMemo(()=>Qn(or,A),[or,A]);v.useEffect(()=>{(async()=>{const Le=(ye==null?void 0:ye.tenant_id)??(ye==null?void 0:ye.tenantId)??null;if(!Le){Hn([]),Xt(null);return}dn(!0),Xt(null);try{const Qe=await Ji(Le);Hn(Qe)}catch(Qe){console.error("Error loading products for admin dashboard:",Qe),ra!=null&&ra(Qe)?Xt("Products are not configured yet. Please create the `products` table in Supabase."):Xt("Unable to load products. Please try again."),Hn([])}finally{dn(!1)}})()},[ye==null?void 0:ye.tenant_id,ye==null?void 0:ye.tenantId]);const M=v.useCallback(async()=>{if(kn){ys(!0);try{await IC(kn.id),Hn(L=>L.filter(Le=>Le.id!==kn.id)),wr(null)}catch(L){console.error("Error deleting product from admin dashboard:",L),Xt("Failed to delete product. Please try again.")}finally{ys(!1)}}},[kn]),te=v.useCallback(L=>{const Le=L==null?void 0:L.trim();if(Le){if(Ze(Le),Le!==(b.project||"")){const Qe={...b,project:Le};j(Qe)}Pe(Qe=>Qe+1)}},[b,j]),{register:ce,handleSubmit:Ie,reset:Se}=ku({defaultValues:{reason:"",details:""}}),{control:fe,handleSubmit:we,reset:rt,register:wt,formState:{errors:Je}}=ku({defaultValues:{reason:"",details:""}}),Pt=x.isActive?o.jsx("span",{className:"text-[#1E5461] font-medium",children:"Active"}):Ys(x.endDate)?o.jsx("span",{className:"text-[#591D0F] font-medium",children:"Closed"}):o.jsx("span",{className:"text-[#C89212] font-medium",children:"Upcoming"}),ht=v.useMemo(()=>{const L=Qe=>{const pr=Qe.type==="reopen",fn=Qe.createdAt||null,Sa=Qe.actorName||"Admin",ad=fn?` ${Pi(fn)}`:"";return{id:Qe.id,type:Qe.type,reason:Qe.reason,details:Qe.details??null,title:pr?`Reopened${ad} by ${Sa}`:`Ended early${ad} by ${Sa}`,description:`${Qe.reason}${Qe.details?": "+Qe.details:""}`,iconBgClass:pr?"bg-[#1E5461]/10":"bg-[#C89212]/10",iconBorderClass:pr?"border-[#1E5461]/20":"border-[#C89212]/20",iconColorClass:pr?"text-[#1E5461]":"text-[#C89212]",textColorClass:pr?"text-[#1E5461]":"text-[#6A4234]"}};if(Sn.length>0)return Sn.map(Qe=>L(Qe));const Le=[];return x.reopenReason&&Le.push({id:"fallback-reopen",sessionId:(U==null?void 0:U.id)||"",type:"reopen",reason:x.reopenReason,details:x.reopenDetails??null,actorName:x.reopenedBy||"Admin",actorId:null,createdAt:x.reopenedAt||x.endDate}),x.endedEarlyReason&&Le.push({id:"fallback-ended-early",sessionId:(U==null?void 0:U.id)||"",type:"ended-early",reason:x.endedEarlyReason,details:x.endedEarlyDetails??null,actorName:x.endedEarlyBy||"Admin",actorId:null,createdAt:x.originalEndDate||x.endDate}),Le.map(Qe=>L(Qe))},[Sn,x.reopenReason,x.reopenDetails,x.reopenedAt,x.reopenedBy,x.endedEarlyReason,x.endedEarlyDetails,x.originalEndDate,x.endDate,x.endedEarlyBy,U==null?void 0:U.id]);v.useEffect(()=>{ht.length<=2&&gs(!1)},[ht.length]);const Re=v.useCallback(async()=>{if(!(U!=null&&U.id)){Er([]);return}try{const L=await l5(U.id);Er(L)}catch(L){console.error("Error loading session status notes:",L)}},[U==null?void 0:U.id]);v.useEffect(()=>{Re()},[Re]);const ut=v.useCallback(async L=>{if(U!=null&&U.id)try{const Le=await c5({session_id:U.id,type:L.type,reason:L.reason,details:L.details??null,actor_id:L.actorId??null,actor_name:L.actorName||"Admin"});Er(Qe=>{const pr=Qe.findIndex(fn=>fn.id===Le.id);if(pr!==-1){const fn=[...Qe];return fn[pr]=Le,fn}return[Le,...Qe]})}catch(Le){console.error("Error logging session status note:",Le)}},[U==null?void 0:U.id]);v.useEffect(()=>{xr&&(un({title:xr.title,summary:xr.summary??"",whatWouldItDo:xr.whatWouldItDo??"",howWouldItWork:xr.howWouldItWork??""}),kr(null))},[xr]),v.useEffect(()=>{Et&&ve.length>0?Wt(ve[0].id):Wt(""),er(null)},[Et,ve]);const Ot=L=>{console.log("handleSessionUpdate called with data:",L),console.log("Current products:",Ht),console.log("Current votingSession.product_id:",x.product_id);const Le=L.productId&&L.productId.trim()!==""?L.productId:null;console.log("Extracted productId:",Le);const Qe=Le&&Ht.find(fn=>fn.id===Le)||null;console.log("Found selectedProduct:",Qe);const pr={...x,title:L.title,goal:L.goal,votesPerUser:L.useAutoVotes?Math.max(1,Math.floor(e.length/2)):Number(L.votesPerUser),useAutoVotes:L.useAutoVotes,startDate:new Date(L.startDate).toISOString(),endDate:new Date(L.endDate+"T23:59:59").toISOString(),isActive:x.isActive,product_id:(Qe==null?void 0:Qe.id)??null,product_name:null};console.log("Updated session product_id:",pr.product_id),console.log("Full updatedSession:",pr),Q(pr),ft(!1)},It=L=>{var pr,fn;const Le=new Date().toISOString(),Qe={...x,originalEndDate:x.endDate,endDate:Le,isActive:!1,endedEarlyBy:(ye==null?void 0:ye.name)||"Admin",endedEarlyReason:L.reason,endedEarlyDetails:(pr=L.details)!=null&&pr.trim()?L.details.trim():null,reopenReason:null,reopenDetails:null,reopenedBy:null,reopenedAt:null};Q(Qe),ut({type:"ended-early",reason:L.reason,details:(fn=L.details)!=null&&fn.trim()?L.details.trim():null,actorName:(ye==null?void 0:ye.name)||"Admin",actorId:(ye==null?void 0:ye.id)??null}),Ct(!1),Se()},Ir=L=>{var pr,fn;const Le=new Date;Le.setDate(Le.getDate()+7);const Qe={...x,endDate:Le.toISOString(),isActive:!0,originalEndDate:null,endedEarlyBy:null,endedEarlyReason:null,endedEarlyDetails:null,reopenReason:L.reason,reopenDetails:(pr=L.details)!=null&&pr.trim()?L.details.trim():null,reopenedBy:(ye==null?void 0:ye.name)||"Admin",reopenedAt:new Date().toISOString()};Q(Qe),ut({type:"reopen",reason:L.reason,details:(fn=L.details)!=null&&fn.trim()?L.details.trim():null,actorName:(ye==null?void 0:ye.name)||"Admin",actorId:(ye==null?void 0:ye.id)??null}),kt(!1),rt()},mt=async(L,Le)=>{const Qe={...b,organization:L,project:Le};j(Qe),O()},Kt=L=>{hr(L)},Dt=async()=>{if(!xr)return;const L=At.title.trim();if(!L){kr("Title is required.");return}Ft(!0),kr(null);try{await Ae(xr.id,{title:L,summary:At.summary.trim()?At.summary.trim():null,whatWouldItDo:At.whatWouldItDo.trim()?At.whatWouldItDo.trim():null,howWouldItWork:At.howWouldItWork.trim()?At.howWouldItWork.trim():null}),hr(null)}catch(Le){console.error("Error updating suggestion:",Le),kr("Failed to update the suggestion. Please try again.")}finally{Ft(!1)}},br=async()=>{if(Et){if(!Tt){er("Please select a session.");return}Ur(!0),er(null);try{await V(Et.id,Tt),Qt(null)}catch(L){console.error("Error moving suggestion:",L),er("Failed to move the suggestion. Please try again.")}finally{Ur(!1)}}},Dr=async()=>{if(Fe){ct(!0),Mt(null);try{await I(Fe.id),ke(null)}catch(L){console.error("Error promoting suggestion:",L),Mt("Failed to move the suggestion into the current session.")}finally{ct(!1)}}},Rr=async()=>{if(qt){Vn(!0),qn(null);try{await X(qt.id),Nr(null)}catch(L){console.error("Error deleting suggestion:",L),qn("Failed to delete the suggestion. Please try again.")}finally{Vn(!1)}}},Kn=v.useCallback(()=>{ft(!1),i()},[i]);return v.useEffect(()=>{if(!$)return;const L=Le=>{ue.current&&!ue.current.contains(Le.target)&&G(!1)};return document.addEventListener("mousedown",L),document.addEventListener("touchstart",L,{passive:!0}),()=>{document.removeEventListener("mousedown",L),document.removeEventListener("touchstart",L)}},[$]),v.useEffect(()=>{if(!_e)return;const L=Le=>{je.current&&!je.current.contains(Le.target)&&be(!1)};return document.addEventListener("mousedown",L),document.addEventListener("touchstart",L,{passive:!0}),()=>{document.removeEventListener("mousedown",L),document.removeEventListener("touchstart",L)}},[_e]),o.jsxs("div",{className:"container mx-auto p-4 max-w-6xl min-h-screen pb-8",children:[o.jsx("div",{className:"hidden md:flex md:justify-center mb-2 cursor-pointer",onClick:()=>xe("/sessions"),children:o.jsx("img",{src:"https://www.steeldynamics.com/wp-content/uploads/2024/05/New-Millennium-color-logo1.png",alt:"New Millennium Building Systems Logo",className:"-mt-4",style:{height:"96px",width:"auto"}})}),o.jsxs("div",{className:"flex justify-between items-center mb-6",children:[o.jsxs("div",{className:"flex items-center",children:[o.jsx(Rm,{src:"https://media.licdn.com/dms/image/C4D0BAQEC3OhRqehrKg/company-logo_200_200/0/1630518354793/new_millennium_building_systems_logo?e=2147483647&v=beta&t=LM3sJTmQZet5NshZ-RNHXW1MMG9xSi1asp-VUeSA9NA",alt:"New Millennium Building Systems Logo",className:"mr-4 md:hidden",style:{width:"40px",height:"40px"}}),o.jsx("h1",{className:"text-2xl font-bold text-[#2D4660] md:text-3xl",children:"Admin Dashboard"})]}),o.jsxs("div",{ref:ue,className:"relative z-40",children:[o.jsxs("div",{className:"hidden md:flex space-x-2",children:[o.jsxs("button",{onClick:y,className:"flex items-center px-4 py-2 bg-[#576C71] text-white rounded-lg hover:bg-[#1E5461] transition-colors",children:[o.jsx(An,{className:"mr-2 h-4 w-4"}),"Vote!"]}),o.jsxs("button",{onClick:()=>xe(re==="system"?"/users":"/users?filter=stakeholder"),className:"flex items-center px-4 py-2 bg-[#2D4660] text-white rounded-lg hover:bg-[#173B65] transition-colors",children:[re==="system"?o.jsx(Hr,{className:"mr-2 h-4 w-4"}):o.jsx(In,{className:"mr-2 h-4 w-4"}),re==="system"?"User Management":"Stakeholders"]}),o.jsxs("button",{onClick:()=>xe("/sessions"),className:"flex items-center px-4 py-2 bg-[#4f6d8e] text-white rounded-lg hover:bg-[#3d5670] transition-colors",children:[o.jsx(In,{className:"mr-2 h-4 w-4"}),"All Sessions"]}),o.jsxs("button",{onClick:p,className:"flex items-center px-4 py-2 bg-[#576C71] text-white rounded-lg hover:bg-[#1E5461] transition-colors",children:[o.jsx(xn,{className:"mr-2 h-4 w-4"}),"Logout"]})]}),o.jsx("div",{className:"flex md:hidden",children:o.jsx("button",{onClick:()=>G(!$),className:"p-2 rounded-md border border-gray-200 bg-white shadow-sm","aria-label":"Open menu",children:o.jsx(Es,{className:"h-5 w-5 text-gray-700"})})}),$&&o.jsx("div",{className:"absolute right-0 mt-2 w-56 bg-white border border-gray-200 rounded-lg shadow-lg md:hidden z-50",children:o.jsxs("div",{className:"py-1",children:[o.jsxs("button",{onClick:()=>{G(!1),y()},className:"w-full px-3 py-2 flex items-center text-left hover:bg-gray-50",children:[o.jsx(An,{className:"h-4 w-4 mr-2 text-gray-700"}),"Vote!"]}),o.jsxs("button",{onClick:()=>{G(!1),xe(re==="system"?"/users":"/users?filter=stakeholder")},className:"w-full px-3 py-2 flex items-center text-left hover:bg-gray-50",children:[re==="system"?o.jsx(Hr,{className:"h-4 w-4 mr-2 text-gray-700"}):o.jsx(In,{className:"h-4 w-4 mr-2 text-gray-700"}),re==="system"?"User Management":"Stakeholders"]}),o.jsxs("button",{onClick:()=>{G(!1),xe("/sessions")},className:"w-full px-3 py-2 flex items-center text-left hover:bg-gray-50",children:[o.jsx(In,{className:"h-4 w-4 mr-2 text-gray-700"}),"All Sessions"]}),!(x.isActive===!1&&!Ys(x.endDate))&&o.jsxs("button",{onClick:()=>{G(!1),s()},className:"w-full px-3 py-2 flex items-center text-left hover:bg-gray-50",children:[o.jsx(Mf,{className:"h-4 w-4 mr-2 text-gray-700"}),Ys(x.endDate)?"Final Results":"Current Results"]}),o.jsxs("button",{onClick:()=>{G(!1),ft(!0)},className:"w-full px-3 py-2 flex items-center text-left hover:bg-gray-50",children:[o.jsx(sn,{className:"h-4 w-4 mr-2 text-gray-700"}),"Edit Session"]}),o.jsxs("button",{onClick:()=>{G(!1),p()},className:"w-full px-3 py-2 flex items-center text-left hover:bg-gray-50",children:[o.jsx(xn,{className:"h-4 w-4 mr-2 text-gray-700"}),"Logout"]})]})})]})]}),o.jsxs("div",{className:"relative bg-white rounded-lg shadow-md p-4 mb-6",style:{marginTop:or?"3.5rem":"0"},children:[or&&o.jsxs("div",{className:"absolute left-0 px-4 py-1 pr-8 rounded-t-md border-b-0 text-sm font-semibold shadow-sm z-20 flex items-center gap-2 whitespace-nowrap group cursor-pointer",style:{top:"0",left:"-1px",transform:"translateY(-100%)",backgroundColor:he.background,color:he.text,borderColor:he.border,borderWidth:"1px",borderBottomWidth:"0",boxShadow:"0 4px 8px rgba(16,24,40,0.06)",borderTopLeftRadius:"0.9rem",borderTopRightRadius:"0.9rem",overflow:"visible"},onMouseEnter:()=>{(x.product_id||x.productId)&&Si(!0)},onMouseLeave:()=>Si(!1),onClick:async L=>{const Le=x.product_id||x.productId;if(!Le)return;L.stopPropagation();const Qe=Ht.find(pr=>pr.id===Le);Qe&&(me(Qe),Oe(Qe.name||""),setEditingProductColor(Qe.color_hex||null),Me(Qe.color_hex||"#2D4660"))},children:[o.jsx(Fv,{className:"h-4 w-4 flex-shrink-0"}),o.jsx("span",{className:"overflow-hidden text-ellipsis flex-1 min-w-0",children:or}),(x.product_id||x.productId)&&Ls&&o.jsx("div",{className:"absolute right-2 flex-shrink-0 opacity-80",children:o.jsx(hE,{className:"h-4 w-4",style:{color:he.text}})})]}),o.jsxs("div",{className:"pt-1",children:[o.jsxs("div",{className:"flex items-center justify-between mb-4",children:[o.jsxs("h2",{className:"text-xl font-semibold text-[#2D4660]",children:["Current Session: ",o.jsx("span",{className:"text-[#1E5461]",children:x.title})]}),o.jsxs("div",{ref:je,className:"relative z-40",children:[o.jsxs("div",{className:"hidden md:flex space-x-2",children:[!(x.isActive===!1&&!Ys(x.endDate))&&o.jsxs(nt,{variant:"gold",onClick:s,className:"flex items-center",children:[o.jsx(Mf,{className:"h-4 w-4 mr-2"}),Ys(x.endDate)?"Final Results":"Current Results"]}),o.jsxs(nt,{variant:"primary",onClick:()=>ft(!0),className:"flex items-center",children:[o.jsx(sn,{className:"h-4 w-4 mr-2"}),"Edit Session"]})]}),o.jsx("div",{className:"flex md:hidden",children:o.jsx("button",{onClick:()=>be(!_e),className:"p-2 rounded-md border border-gray-200 bg-white shadow-sm","aria-label":"Open session actions menu",children:o.jsx(Es,{className:"h-5 w-5 text-gray-700"})})}),_e&&o.jsx("div",{className:"absolute right-0 mt-2 w-56 bg-white border border-gray-200 rounded-lg shadow-lg md:hidden z-50",children:o.jsxs("div",{className:"py-1",children:[!(x.isActive===!1&&!Ys(x.endDate))&&o.jsxs("button",{onClick:()=>{be(!1),s()},className:"w-full px-3 py-2 flex items-center text-left hover:bg-gray-50",children:[o.jsx(Mf,{className:"h-4 w-4 mr-2 text-gray-700"}),Ys(x.endDate)?"Final Results":"Current Results"]}),o.jsxs("button",{onClick:()=>{be(!1),ft(!0)},className:"w-full px-3 py-2 flex items-center text-left hover:bg-gray-50",children:[o.jsx(sn,{className:"h-4 w-4 mr-2 text-gray-700"}),"Edit Session"]})]})})]})]}),Fs&&o.jsx("p",{className:"text-xs text-gray-500 mb-4",children:"Loading products"}),$n&&o.jsx("p",{className:"text-xs text-[#591D0F] mb-4",children:$n}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4",children:[o.jsxs("div",{children:[o.jsx("h3",{className:"text-sm font-medium text-gray-700 mb-1",children:"Voting Period"}),o.jsxs("p",{className:`text-[#2D4660] font-medium ${x.originalEndDate?"line-through text-gray-400":""}`,children:[Pi(x.startDate)," - ",Pi(x.originalEndDate||x.endDate)]}),x.originalEndDate&&x.endedEarlyBy&&o.jsxs("div",{className:"flex items-center mt-1 text-xs text-[#591D0F]",children:[o.jsxs("span",{children:["Ended Early by ",x.endedEarlyBy]}),x.endedEarlyReason&&o.jsxs("div",{className:"group relative ml-1",children:[o.jsx(Ut,{className:"h-3 w-3 cursor-help"}),o.jsxs("div",{className:"absolute bottom-full left-1/2 -translate-x-1/2 mb-2 px-3 py-2 bg-gray-900 text-white text-xs rounded-lg opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-200 whitespace-nowrap z-10 pointer-events-none max-w-xs",children:[o.jsxs("div",{className:"font-semibold mb-1",children:["Reason: ",x.endedEarlyReason]}),x.endedEarlyDetails&&o.jsx("div",{className:"whitespace-normal",children:x.endedEarlyDetails}),o.jsx("div",{className:"absolute top-full left-1/2 -translate-x-1/2 -mt-1 border-4 border-transparent border-t-gray-900"})]})]})]})]}),o.jsxs("div",{children:[o.jsx("h3",{className:"text-sm font-medium text-gray-700 mb-1",children:"Votes Per User"}),o.jsx("p",{className:"text-[#2D4660] font-medium",children:x.useAutoVotes?`${Math.max(1,Math.floor(e.length/2))} (Auto: ${e.length} features  2)`:x.votesPerUser})]}),o.jsxs("div",{children:[o.jsx("h3",{className:"text-sm font-medium text-gray-700 mb-1",children:"Status"}),o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center",children:[o.jsx(Zh,{className:"h-4 w-4 mr-1 text-gray-600"}),Pt]}),(x.isActive||Ys(x.endDate))&&o.jsx(nt,{variant:x.isActive?"danger":"primary",onClick:()=>{x.isActive?Ct(!0):(rt(),kt(!0))},className:"text-xs px-2 py-1 ml-2",children:x.isActive?"End Early":"Reopen"})]})]})]}),o.jsx("div",{className:"pt-3 border-t border-gray-200",children:o.jsxs("div",{className:"relative overflow-hidden rounded-2xl border border-[#C89212]/30 bg-gradient-to-r from-[#FFF6E3] via-[#FFF9ED] to-white shadow-sm p-5 md:p-6",children:[o.jsx("span",{className:"pointer-events-none absolute -top-10 left-4 h-32 w-32 rounded-full bg-[#C89212]/25 blur-3xl"}),o.jsx("span",{className:"pointer-events-none absolute -bottom-16 right-6 h-40 w-40 rounded-full bg-[#F4C66C]/20 blur-3xl"}),o.jsx("span",{className:"pointer-events-none absolute top-6 right-10 text-[#F4B400] text-xl animate-ping",children:""}),o.jsx("span",{className:"pointer-events-none absolute bottom-8 left-10 text-[#C89212] text-lg animate-pulse",children:""}),o.jsxs("div",{className:"relative flex flex-col gap-6 md:flex-row md:items-start md:justify-between",children:[o.jsxs("div",{className:"flex items-start gap-5 md:pr-8 lg:pr-12",children:[o.jsxs("div",{className:"relative",children:[o.jsx("div",{className:"h-16 w-16 md:h-20 md:w-20 rounded-full bg-white shadow-lg shadow-[#C89212]/30 border border-[#C89212]/40 flex items-center justify-center text-[#C89212]",children:o.jsx(wF,{className:"h-8 w-8 md:h-10 md:w-10"})}),o.jsx("span",{className:"pointer-events-none absolute -top-3 -left-2 text-[#C89212] text-base animate-ping",children:""}),o.jsx("span",{className:"pointer-events-none absolute bottom-0 -right-3 text-[#F5D79E] text-xl animate-pulse",children:""})]}),o.jsxs("div",{children:[o.jsx("p",{className:"text-xs font-semibold uppercase tracking-[0.2em] text-[#C89212]/80 mb-1",children:"Session Goal"}),o.jsx("h3",{className:"text-lg md:text-xl font-semibold text-[#2D4660] leading-relaxed",children:x.goal})]})]}),o.jsxs("div",{className:"md:w-80 lg:w-96 rounded-xl border border-white/70 bg-white/80 backdrop-blur-sm shadow-inner p-4",children:[o.jsxs("div",{className:"flex items-center justify-between mb-3",children:[o.jsx("h3",{className:"text-sm font-semibold text-[#2D4660]",children:"Status Notes"}),ht.length>2&&o.jsxs("span",{className:"inline-flex items-center justify-between text-xs text-[#1E5461] w-[90px]",children:[o.jsx("span",{className:"flex items-center justify-center w-4 h-4 border border-current rounded",children:_n?o.jsx(rF,{className:"h-2.5 w-2.5"}):o.jsx(cs,{className:"h-2.5 w-2.5"})}),o.jsx("button",{type:"button",onClick:()=>gs(L=>!L),className:"ml-1 hover:text-[#173B65] transition-colors text-left flex-1",children:_n?"Show Less":"Show More"})]})]}),ht.length>0?o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"space-y-3",children:ht.slice(0,_n?ht.length:2).map(L=>{const Le=L.type==="reopen"?Po:Ut;return o.jsxs("div",{className:`flex items-start gap-3 text-sm ${L.textColorClass}`,children:[o.jsx("div",{className:`mt-0.5 flex items-center justify-center w-8 h-8 ${L.iconBgClass} ${L.iconBorderClass} border rounded-lg`,children:o.jsx(Le,{className:`h-3.5 w-3.5 ${L.iconColorClass}`})}),o.jsxs("div",{children:[o.jsx("p",{className:"font-semibold text-gray-800",children:L.title}),o.jsx("p",{className:"text-xs text-gray-600 leading-relaxed",children:L.description})]})]},L.id)})}),ht.length>2&&!_n&&o.jsx("p",{className:"text-xs text-gray-500 mt-3",children:'Showing newest notes. Select "Show More" to view all updates.'})]}):o.jsx("p",{className:"text-sm text-gray-500",children:"No status updates yet."})]})]})]})})]})]}),o.jsxs("div",{className:"relative bg-white rounded-lg shadow-md p-4 mb-6",children:[o.jsx("div",{className:"flex items-center justify-between mb-4",children:o.jsxs("div",{className:"flex items-center",children:[o.jsx("img",{src:W2,alt:"Azure DevOps logo",className:"h-5 w-5 mr-2"}),o.jsx("h2",{className:"text-xl font-semibold text-[#2D4660]",children:"Azure DevOps Integration"})]})}),b.enabled?o.jsxs("div",{className:"space-y-4",children:[o.jsx("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:gap-4",children:[o.jsx(Or,{className:"h-5 w-5 text-green-600 mr-2"}),o.jsxs("div",{className:"flex flex-col gap-2",children:[o.jsxs("div",{className:"flex flex-wrap items-center gap-x-2 text-sm text-green-700",children:[o.jsx("span",{className:"font-medium text-green-900",children:"Connected to Azure DevOps"}),o.jsx("span",{className:"hidden sm:inline mx-1 text-green-500",children:""}),o.jsxs("span",{children:[o.jsx("span",{className:"font-medium",children:"Organization:"})," ",b.organization]}),o.jsx("span",{className:"hidden sm:inline mx-1 text-green-500",children:""}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("span",{className:"font-medium",children:"Project:"}),o.jsx("div",{className:"min-w-[150px]",children:o.jsx(V2,{options:de,value:$e,onChange:te,variant:"green"})})]}),b.lastSyncTime&&o.jsxs(o.Fragment,{children:[o.jsx("span",{className:"hidden sm:inline mx-1 text-green-500",children:""}),o.jsxs("span",{children:[o.jsx("span",{className:"font-medium",children:"Last Sync:"})," ",Pi(b.lastSyncTime)]})]})]}),o.jsx("span",{className:"text-xs text-green-700",children:"Switching projects will clear the filters below."})]})]}),o.jsxs("button",{onClick:k,className:"text-sm text-[#591D0F] hover:text-[#6A4234] font-medium flex items-center",children:[o.jsx(gi,{className:"h-4 w-4 mr-1"}),"Disconnect"]})]})}),o.jsx(oZ,{config:b,onUpdateConfig:j,onPreview:S,isFetching:C,availableStates:P,availableAreaPaths:T,availableTags:D,previewFeatures:q,showPreviewModal:F,onFetchStatesForType:oe,onFetchAreaPathsForTypeAndState:ae,onFetchTagsForTypeStateAndAreaPath:J,onFetchTypesAndStatesForAreaPath:H,onFetchTypesAndStatesForTags:ne,onFetchTypesAndAreaPathsForStates:ie,resetSignal:Z})]}):o.jsxs("div",{className:"bg-gray-50 rounded-lg p-6 text-center border border-dashed border-gray-300",children:[o.jsx("img",{src:W2,alt:"Azure DevOps logo",className:"h-10 w-10 mx-auto mb-3 opacity-80"}),o.jsx("h3",{className:"text-lg font-medium text-gray-700 mb-2",children:"Not Connected"}),o.jsx("p",{className:"text-gray-600 mb-4",children:"Connect to Azure DevOps to import work items as features for voting."}),o.jsx(nt,{variant:"primary",onClick:()=>mt("newmill",$e||de[0]||"Product"),className:"inline-flex items-center",disabled:C,children:C?o.jsxs(o.Fragment,{children:[o.jsx(Po,{className:"h-4 w-4 mr-2 animate-spin"}),"Connecting..."]}):o.jsxs(o.Fragment,{children:[o.jsx(sn,{className:"h-4 w-4 mr-2"}),"Connect to Azure DevOps"]})}),N&&o.jsx("p",{className:"mt-3 text-sm text-[#591D0F]",children:N})]})]}),o.jsxs("div",{className:"relative bg-white rounded-lg shadow-md p-4 mb-6",children:[o.jsxs("div",{className:"flex flex-wrap justify-between items-center gap-2 mb-4",children:[o.jsxs("div",{children:[o.jsx("h2",{className:"text-xl font-semibold text-[#2D4660]",children:"Suggested Features"}),o.jsx("p",{className:"text-sm text-gray-600",children:"Ideas submitted from the voting experience for future consideration."})]}),o.jsxs("span",{className:"inline-flex items-center px-3 py-1 rounded-full bg-[#1E5461]/10 text-[#1E5461] text-sm font-medium",children:[ge.length," ",ge.length===1?"suggestion":"suggestions"]})]}),ge.length===0?o.jsx("div",{className:"bg-gray-50 border border-dashed border-gray-200 rounded-lg p-6 text-center text-gray-500 text-sm",children:'No feature suggestions have been submitted yet. Encourage voters to use the "Suggest a Feature" button in the voting experience.'}):o.jsx("div",{className:"space-y-4 max-h-[360px] overflow-y-auto pr-1",children:ge.map(L=>{const Le=L.requester_name||L.requester_email||"Anonymous";return o.jsx("div",{className:"border border-gray-200 rounded-lg p-4 hover:border-[#1E5461]/40 transition-colors",children:o.jsxs("div",{className:"flex flex-col gap-4",children:[o.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4",children:[o.jsxs("div",{className:"md:flex-1",children:[o.jsx("h3",{className:"text-lg font-semibold text-[#2D4660]",children:L.title}),o.jsxs("p",{className:"text-xs text-gray-500 mt-[14px]",children:["Submitted by ",o.jsx("span",{className:"font-medium text-[#1E5461]",children:Le}),L.requester_email&&o.jsxs(o.Fragment,{children:[" ","(",o.jsx("a",{href:`mailto:${L.requester_email}`,className:"text-[#1E5461] hover:underline",children:L.requester_email}),")"]})," on ",Pi(L.created_at)]})]}),o.jsxs("div",{className:"flex flex-col items-end gap-2 self-start md:min-w-[360px]",children:[o.jsxs("div",{className:"flex flex-wrap justify-end gap-2",children:[o.jsxs(nt,{variant:"primary",onClick:()=>{Mt(null),ke(L)},className:"text-xs px-3 py-1 flex items-center",children:[o.jsx(AM,{className:"h-3.5 w-3.5 mr-2"}),"Move to Current Session"]}),o.jsxs(nt,{variant:"secondary",onClick:()=>{ve.length>0&&Qt(L)},disabled:ve.length===0,className:"text-xs px-3 py-1 flex items-center",children:[o.jsx(Os,{className:"h-3.5 w-3.5 mr-2"}),"Move to Future Session"]}),o.jsxs(nt,{variant:"secondary",onClick:()=>Kt(L),className:"text-xs px-3 py-1 flex items-center",children:[o.jsx(NS,{className:"h-3.5 w-3.5 mr-2"}),"Edit"]}),o.jsxs(nt,{variant:"danger",onClick:()=>{qn(null),Nr(L)},className:"text-xs px-3 py-1 flex items-center",children:[o.jsx(vi,{className:"h-3.5 w-3.5 mr-2"}),"Delete"]})]}),ve.length===0&&o.jsx("p",{className:"text-xs text-gray-500 text-right",children:"No upcoming sessions are available yet. Create a future session to enable this action."})]})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3",children:[o.jsxs("div",{className:"border border-gray-200 rounded-lg p-3 bg-gray-50 max-h-48 overflow-y-auto",children:[o.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[o.jsx(Ut,{className:"h-4 w-4 text-[#2D4660]"}),o.jsx("p",{className:"text-sm font-semibold text-[#2D4660]",children:"Problem it solves"})]}),o.jsx("p",{className:"text-sm text-gray-700 whitespace-pre-line",children:L.summary&&L.summary.length>0?L.summary:"No summary provided."})]}),o.jsxs("div",{className:"border border-gray-200 rounded-lg p-3 bg-gray-50 max-h-48 overflow-y-auto",children:[o.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[o.jsx(Z0,{className:"h-4 w-4 text-[#2D4660]"}),o.jsx("p",{className:"text-sm font-semibold text-[#2D4660]",children:"What would it do?"})]}),o.jsx("p",{className:"text-sm text-gray-700 whitespace-pre-line",children:L.whatWouldItDo&&L.whatWouldItDo.length>0?L.whatWouldItDo:"No details provided."})]}),o.jsxs("div",{className:"border border-gray-200 rounded-lg p-3 bg-gray-50 max-h-48 overflow-y-auto",children:[o.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[o.jsx(CF,{className:"h-4 w-4 text-[#2D4660]"}),o.jsx("p",{className:"text-sm font-semibold text-[#2D4660]",children:"How would it work?"})]}),o.jsx("p",{className:"text-sm text-gray-700 whitespace-pre-line",children:L.howWouldItWork&&L.howWouldItWork.length>0?L.howWouldItWork:"No implementation details provided."})]})]})]})},L.id)})})]}),o.jsxs("div",{className:"relative bg-white rounded-lg shadow-md p-4 mb-6",children:[o.jsxs("div",{className:"flex justify-between items-center mb-4",children:[o.jsx("h2",{className:"text-xl font-semibold text-[#2D4660]",children:"Feature Management"}),o.jsxs(nt,{variant:"gold",onClick:()=>d(!0),className:"flex items-center w-44",children:[o.jsx(cs,{className:"mr-2 h-4 w-4"}),"Add Feature"]})]}),o.jsx("div",{className:"w-full overflow-x-auto",children:o.jsxs("table",{className:"min-w-full divide-y divide-gray-200 table-fixed",children:[o.jsx("thead",{className:"bg-gray-50",children:o.jsxs("tr",{children:[o.jsx("th",{scope:"col",className:"w-[20%] px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Title"}),o.jsx("th",{scope:"col",className:"hidden lg:table-cell w-[25%] px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Description"}),o.jsx("th",{scope:"col",className:"hidden md:table-cell w-[10%] px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Epic"}),o.jsx("th",{scope:"col",className:"hidden md:table-cell w-[8%] px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"State"}),o.jsx("th",{scope:"col",className:"hidden lg:table-cell w-[12%] px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Area Path"}),o.jsx("th",{scope:"col",className:"hidden xl:table-cell w-[10%] px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Tags"}),o.jsx("th",{scope:"col",className:"w-[8%] px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Votes"}),o.jsx("th",{scope:"col",className:"w-[7%] px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),o.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:e.map(L=>o.jsxs("tr",{className:"align-top group",children:[o.jsx("td",{className:"px-4 py-4 whitespace-normal break-words text-sm font-medium text-left",children:o.jsxs("div",{className:"max-w-xs overflow-hidden text-left",children:[L.title,L.azureDevOpsId&&o.jsx("div",{className:"mt-1",children:o.jsx(Wh,{id:L.azureDevOpsId,url:L.azureDevOpsUrl||""})})]})}),o.jsx("td",{className:"hidden lg:table-cell px-4 py-4 text-sm text-gray-500 text-left",children:o.jsx("div",{className:"max-w-md overflow-hidden break-words text-left",children:L.description||o.jsx("span",{className:"italic text-gray-400",children:"No description provided"})})}),o.jsx("td",{className:"hidden md:table-cell px-4 py-4 whitespace-nowrap text-sm",children:L.epic&&o.jsx(Gl,{name:L.epic})}),o.jsx("td",{className:"hidden md:table-cell px-4 py-4 whitespace-nowrap text-sm",children:L.state&&o.jsx("span",{className:"px-2 py-1 text-xs font-medium bg-[#1E5461]/10 text-[#1E5461] rounded",children:L.state})}),o.jsx("td",{className:"hidden lg:table-cell px-4 py-4 text-sm",children:o.jsx("div",{className:"text-gray-600",children:L.areaPath&&typeof L.areaPath=="string"&&L.areaPath.trim()!==""?o.jsx("div",{className:"max-w-xs break-words",children:L.areaPath}):o.jsx("span",{className:"text-gray-400",children:"-"})})}),o.jsx("td",{className:"hidden xl:table-cell px-4 py-4 text-sm",children:L.tags&&L.tags.length>0?o.jsxs("div",{className:"flex flex-wrap gap-1",children:[L.tags.slice(0,3).map((Le,Qe)=>o.jsx("span",{className:"px-2 py-0.5 text-xs bg-gray-100 text-gray-700 rounded",children:Le},Qe)),L.tags.length>3&&o.jsxs("span",{className:"px-2 py-0.5 text-xs text-gray-500",children:["+",L.tags.length-3]})]}):o.jsx("span",{className:"text-gray-400",children:"-"})}),o.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm",children:L.votes}),o.jsxs("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-gray-500 space-x-3 md:opacity-0 md:group-hover:opacity-100 transition-opacity",children:[o.jsx("button",{onClick:()=>f(L),className:"text-[#2D4660] hover:text-[#C89212] inline-block cursor-pointer",title:"Edit Feature",children:o.jsx(NS,{className:"h-5 w-5"})}),o.jsx("button",{onClick:()=>n(L.id),className:"text-[#2D4660] hover:text-[#591D0F] inline-block cursor-pointer",title:"Delete Feature",children:o.jsx(vi,{className:"h-5 w-5"})})]})]},L.id))})]})})]}),o.jsx(Bn,{isOpen:Fe!==null,onClose:()=>{Ke||(ke(null),Mt(null))},title:"Move Suggestion to Current Session",children:o.jsxs("div",{className:"space-y-4",children:[o.jsxs("p",{className:"text-sm text-gray-700",children:["Move ",o.jsx("span",{className:"font-semibold text-[#2D4660]",children:Fe==null?void 0:Fe.title})," into the current session so it can be managed and voted on."]}),ir&&o.jsx("div",{className:"bg-[#591D0F]/5 border border-[#591D0F]/20 text-[#591D0F] text-sm rounded-md px-3 py-2",children:ir}),o.jsxs("div",{className:"flex justify-end gap-2",children:[o.jsx(nt,{variant:"secondary",onClick:()=>{Ke||(ke(null),Mt(null))},disabled:Ke,children:"Cancel"}),o.jsx(nt,{variant:"primary",onClick:Dr,disabled:Ke,children:Ke?"Moving...":"Move to Current Session"})]})]})}),o.jsx(Bn,{isOpen:Et!==null,onClose:()=>{ar||(Qt(null),er(null))},title:"Move to Future Session",children:o.jsxs("div",{className:"space-y-4",children:[o.jsxs("p",{className:"text-sm text-gray-700",children:["Choose the upcoming session where you would like to queue ",o.jsx("span",{className:"font-semibold text-[#2D4660]",children:Et==null?void 0:Et.title}),"."]}),ve.length>0?o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Destination Session"}),o.jsx("select",{value:Tt,onChange:L=>Wt(L.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md text-sm bg-white",disabled:ar,children:ve.map(L=>o.jsxs("option",{value:L.id,children:[L.title," (Starts ",Pi(L.startDate),")"]},L.id))})]}):o.jsx("div",{className:"bg-[#1E5461]/5 border border-[#1E5461]/20 text-[#1E5461] text-sm rounded-md px-3 py-2",children:"No future sessions are available yet. Create a new session to enable this action."}),_r&&o.jsx("div",{className:"bg-[#591D0F]/5 border border-[#591D0F]/20 text-[#591D0F] text-sm rounded-md px-3 py-2",children:_r}),o.jsxs("div",{className:"flex justify-end gap-2",children:[o.jsx(nt,{variant:"secondary",onClick:()=>{ar||(Qt(null),er(null))},disabled:ar,children:"Cancel"}),o.jsx(nt,{variant:"primary",onClick:br,disabled:ar||ve.length===0,children:ar?"Moving...":"Move to Session"})]})]})}),o.jsx(Bn,{isOpen:xr!==null,onClose:()=>{mr||(hr(null),kr(null))},title:"Edit Suggested Feature",children:o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Title"}),o.jsx("input",{type:"text",value:At.title,onChange:L=>un(Le=>({...Le,title:L.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md",disabled:mr})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Problem it solves"}),o.jsx("textarea",{value:At.summary,onChange:L=>un(Le=>({...Le,summary:L.target.value})),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-md",disabled:mr})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"What would it do?"}),o.jsx("textarea",{value:At.whatWouldItDo,onChange:L=>un(Le=>({...Le,whatWouldItDo:L.target.value})),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-md",disabled:mr})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"How would it work?"}),o.jsx("textarea",{value:At.howWouldItWork,onChange:L=>un(Le=>({...Le,howWouldItWork:L.target.value})),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-md",disabled:mr})]}),Rn&&o.jsx("div",{className:"bg-[#591D0F]/5 border border-[#591D0F]/20 text-[#591D0F] text-sm rounded-md px-3 py-2",children:Rn}),o.jsxs("div",{className:"flex justify-end gap-2",children:[o.jsx(nt,{variant:"secondary",onClick:()=>{mr||(hr(null),kr(null))},disabled:mr,children:"Cancel"}),o.jsx(nt,{variant:"primary",onClick:Dt,disabled:mr,children:mr?"Saving...":"Save Changes"})]})]})}),o.jsx(Bn,{isOpen:qt!==null,onClose:()=>{Cr||(Nr(null),qn(null))},title:"Delete Suggested Feature",children:o.jsxs("div",{className:"space-y-4",children:[o.jsxs("p",{className:"text-sm text-gray-700",children:["Are you sure you want to delete ",o.jsx("span",{className:"font-semibold text-[#591D0F]",children:qt==null?void 0:qt.title}),"? This action cannot be undone."]}),Tr&&o.jsx("div",{className:"bg-[#591D0F]/5 border border-[#591D0F]/20 text-[#591D0F] text-sm rounded-md px-3 py-2",children:Tr}),o.jsxs("div",{className:"flex justify-end gap-2",children:[o.jsx(nt,{variant:"secondary",onClick:()=>{Cr||(Nr(null),qn(null))},disabled:Cr,children:"Cancel"}),o.jsx(nt,{variant:"danger",onClick:Rr,disabled:Cr,children:Cr?"Deleting...":"Delete"})]})]})}),o.jsx(Bn,{isOpen:u,onClose:()=>d(!1),title:"Add New Feature",children:o.jsx(H2,{onSubmit:L=>{t(L),d(!1)},onCancel:()=>d(!1)})}),o.jsx(Bn,{isOpen:m!==null,onClose:()=>f(null),title:"Edit Feature",children:m&&o.jsx(H2,{feature:m,onSubmit:L=>{r({...m,...L}),f(null)},onCancel:()=>f(null)})}),o.jsx(Bn,{isOpen:Ve,onClose:()=>ft(!1),title:"Edit Session Settings",children:o.jsx(lZ,{session:x,featureCount:e.length,onSubmit:Ot,onCancel:()=>ft(!1),onRequestDeleteSession:Kn,isDeletingSession:l,productName:or,products:Ht,isLoadingProducts:Fs,productError:$n,onRequestDeleteProduct:L=>wr(L),onProductColorUpdated:async()=>{const L=(ye==null?void 0:ye.tenant_id)??(ye==null?void 0:ye.tenantId)??null;if(L)try{const Le=await Ji(L);Hn(Le)}catch(Le){console.error("Error refreshing products after color update:",Le)}}})}),kn&&o.jsxs(Bn,{isOpen:!0,onClose:()=>wr(null),title:"Delete Product",children:[o.jsxs("p",{className:"text-sm text-gray-700 mb-4",children:["Are you sure you want to delete ",o.jsx("span",{className:"font-semibold",children:kn.name}),"? This will remove it for everyone in your tenant."]}),o.jsxs("div",{className:"flex justify-end gap-3",children:[o.jsx(nt,{variant:"secondary",onClick:()=>wr(null),disabled:Br,children:"Cancel"}),o.jsx(nt,{variant:"danger",onClick:M,disabled:Br,children:Br?"Deleting...":"Delete"})]})]}),o.jsx(Bn,{isOpen:F,onClose:()=>K(!1),title:"Preview Azure DevOps Features",maxWidth:"max-w-4xl",children:o.jsx("div",{className:"space-y-4",children:q&&q.length>0?o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"bg-[#1E5461]/5 border border-[#1E5461]/20 rounded-lg p-4",children:o.jsx("p",{className:"text-[#1E5461] font-medium",children:"Review the work items below. If they look correct, add them to your voting session."})}),o.jsx("div",{className:"max-h-96 overflow-y-auto",children:o.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:q.map(L=>o.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-4 shadow-sm hover:shadow-md transition-shadow",children:[o.jsx("div",{className:"mb-3",children:o.jsx("h4",{className:"text-base font-semibold text-gray-900",children:L.title})}),L.workItemType!=="Feature"&&L.epic&&o.jsxs("div",{className:"mb-3",children:[o.jsx("p",{className:"text-xs text-gray-500 mb-1",children:"Epic"}),o.jsx(Gl,{name:L.epic})]}),L.description&&L.description.trim()!==""?o.jsxs("div",{className:"mb-3",children:[o.jsx("p",{className:"text-xs text-gray-500 mb-1",children:"Description"}),o.jsx("p",{className:"text-xs text-gray-700 line-clamp-3",children:L.description})]}):null,L.state&&o.jsxs("div",{className:"mb-3",children:[o.jsx("p",{className:"text-xs text-gray-500 mb-1",children:"State"}),o.jsx("span",{className:"px-2 py-1 text-xs font-medium bg-[#1E5461]/10 text-[#1E5461] rounded",children:L.state})]}),L.workItemType==="Feature"&&L.epic&&o.jsxs("div",{className:"mb-3",children:[o.jsx("p",{className:"text-xs text-gray-500 mb-1",children:"Epic"}),o.jsx(Gl,{name:L.epic})]}),o.jsxs("div",{className:"mb-3",children:[o.jsx("p",{className:"text-xs text-gray-500 mb-1",children:"Work Item Type"}),o.jsxs("div",{className:"flex items-center gap-2",children:[L.workItemType&&o.jsx("span",{className:"px-2 py-1 text-xs font-medium bg-[#492434]/10 text-[#492434] rounded",children:L.workItemType}),L.azureDevOpsId&&o.jsx(Wh,{id:L.azureDevOpsId,url:L.azureDevOpsUrl||""})]})]}),L.areaPath&&o.jsxs("div",{children:[o.jsx("p",{className:"text-xs text-gray-500 mb-1",children:"Area Path"}),o.jsx("p",{className:"text-xs text-gray-700 break-words",children:L.areaPath})]}),L.tags&&L.tags.length>0&&o.jsxs("div",{className:"mt-2 pt-2 border-t border-gray-100",children:[o.jsx("p",{className:"text-xs text-gray-500 mb-1",children:"Tags"}),o.jsx("div",{className:"flex flex-wrap gap-1",children:L.tags.map((Le,Qe)=>o.jsx("span",{className:"px-2 py-0.5 text-xs bg-gray-100 text-gray-700 rounded",children:Le},Qe))})]})]},L.id))})}),o.jsxs("div",{className:"flex justify-end space-x-2 pt-4 border-t",children:[o.jsx(nt,{variant:"secondary",onClick:()=>K(!1),children:"Cancel"}),o.jsxs(nt,{variant:"primary",onClick:async()=>{await B(!1),K(!1)},className:"flex items-center",children:[o.jsx(cs,{className:"h-4 w-4 mr-2"}),"Add ",q.length," Feature",q.length!==1?"s":""]}),o.jsxs(nt,{variant:"danger",onClick:async()=>{await B(!0),K(!1)},className:"flex items-center",children:[o.jsx(Po,{className:"h-4 w-4 mr-2"}),"Replace All Features"]})]})]}):o.jsxs("div",{className:"text-center py-8",children:[o.jsx(Ut,{className:"h-12 w-12 text-gray-400 mx-auto mb-3"}),o.jsx("p",{className:"text-gray-600",children:"No features found to sync"})]})})}),o.jsx(Bn,{isOpen:_t,onClose:()=>{kt(!1),rt()},title:"Reopen Session",children:o.jsxs("form",{onSubmit:we(Ir),className:"space-y-4",children:[o.jsx("p",{className:"text-gray-600",children:"Capture a brief note so other admins understand why this session is being reopened."}),o.jsx(zl,{control:fe,name:"reason",rules:{required:"Please select a reason"},render:({field:L})=>o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Reason *"}),o.jsx(V2,{options:aZ,value:L.value,onChange:L.onChange,placeholder:"Select a reason..."}),Je.reason&&o.jsx("p",{className:"mt-1 text-sm text-[#591D0F]",children:Je.reason.message})]})}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Additional Details (Optional)"}),o.jsx("textarea",{...wt("details"),rows:3,placeholder:"Add any context you'd like to share with other admins...",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-[#2D4660] focus:border-transparent"})]}),o.jsx("div",{className:"bg-[#1E5461]/5 border border-[#1E5461]/20 rounded-lg p-3 text-sm text-[#1E5461]",children:"This information will appear in the Current Session summary so every admin sees why voting resumed."}),o.jsxs("div",{className:"flex justify-end space-x-2 pt-4",children:[o.jsx(nt,{variant:"secondary",type:"button",onClick:()=>{kt(!1),rt()},children:"Cancel"}),o.jsx(nt,{variant:"primary",type:"submit",children:"Save & Reopen"})]})]})}),o.jsx(Bn,{isOpen:gt,onClose:()=>{Ct(!1),Se()},title:"End Session Early",children:o.jsxs("form",{onSubmit:Ie(It),className:"space-y-4",children:[o.jsx("p",{className:"text-gray-600",children:"You are about to end this voting session early. Please select a reason:"}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Reason *"}),o.jsxs("select",{...ce("reason",{required:"Please select a reason"}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-[#2D4660] focus:border-transparent",children:[o.jsx("option",{value:"",children:"Select a reason..."}),o.jsx("option",{value:"Sufficient Responses",children:"Sufficient responses received"}),o.jsx("option",{value:"Project Cancelled",children:"Project or initiative cancelled"}),o.jsx("option",{value:"Timeline Changed",children:"Timeline or priorities changed"}),o.jsx("option",{value:"Technical Issues",children:"Technical issues or data concerns"}),o.jsx("option",{value:"Stakeholder Request",children:"Stakeholder request"}),o.jsx("option",{value:"Low Participation",children:"Low participation rate"}),o.jsx("option",{value:"Other",children:"Other"})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Additional Details (Optional)"}),o.jsx("textarea",{...ce("details"),rows:3,placeholder:"Add any additional context or notes...",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-[#2D4660] focus:border-transparent"})]}),o.jsxs("div",{className:"bg-[#C89212]/5 border border-[#C89212]/20 rounded-lg p-3 text-sm text-[#6A4234]",children:[o.jsx("p",{className:"font-medium mb-1",children:"Note:"}),o.jsx("p",{children:"Ending the session will close voting immediately. This action will be logged and visible to all admins."})]}),o.jsxs("div",{className:"flex justify-end space-x-2 pt-4",children:[o.jsx(nt,{variant:"secondary",type:"button",onClick:()=>{Ct(!1),Se()},children:"Cancel"}),o.jsx(nt,{variant:"danger",type:"submit",children:"End Session Now"})]})]})}),Y&&o.jsx(Bn,{isOpen:!0,onClose:()=>{me(null),Oe(""),setEditingProductColor(null),bt(!1)},title:"Edit Product",children:o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Product Name *"}),o.jsx("input",{type:"text",value:Ce,onChange:L=>Oe(L.target.value),placeholder:"Enter product name",className:"w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-0 focus:border-[#2D4660]"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Product Color"}),o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("button",{type:"button",onClick:()=>{Me(editingProductColor||"#2D4660"),bt(!0)},className:"block w-12 h-12 rounded-md border-2 border-gray-300 hover:border-gray-400 transition-all flex items-center justify-center overflow-hidden",style:editingProductColor?{backgroundColor:editingProductColor}:{backgroundColor:"#ffffff"},children:!editingProductColor&&o.jsx("img",{src:"/colorpicker.png",alt:"Color Picker",className:"w-8 h-8 object-contain"})}),o.jsx("span",{className:"text-sm text-gray-600",children:editingProductColor||"No color selected"})]})]}),o.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t",children:[o.jsx(nt,{variant:"secondary",onClick:()=>{me(null),Oe(""),setEditingProductColor(null),bt(!1)},disabled:tt,children:"Cancel"}),o.jsx(nt,{variant:"primary",onClick:async()=>{if(!(!(Y!=null&&Y.id)||!Ce.trim())){We(!0);try{await G0(Y.id,{name:Ce.trim(),color_hex:editingProductColor});const L=(ye==null?void 0:ye.tenant_id)??(ye==null?void 0:ye.tenantId);if(L){const Le=await Ji(L);Hn(Le.sort((Qe,pr)=>Qe.name.localeCompare(pr.name)))}me(null),Oe(""),setEditingProductColor(null),bt(!1),onProductColorUpdated&&onProductColorUpdated()}catch(L){console.error("Error updating product:",L),alert("Failed to update product. Please try again.")}finally{We(!1)}}},disabled:tt||!Ce.trim(),children:tt?"Updating...":"Update Product"})]})]})}),St&&o.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",onClick:()=>bt(!1),children:o.jsx("div",{className:"bg-white rounded-lg shadow-xl px-3 py-2 w-auto mx-4",onClick:L=>L.stopPropagation(),children:o.jsxs("div",{className:"flex gap-3 items-stretch",children:[o.jsxs("div",{className:"flex-shrink-0",style:{width:"240px",height:"260px"},children:[o.jsx("input",{id:"edit-native-color-input",type:"color",value:xt,onChange:L=>Me(L.target.value),ref:L=>{L&&St&&setTimeout(()=>L.click(),50)},className:"opacity-0 absolute",style:{width:"1px",height:"1px"}}),o.jsx("div",{className:"w-full h-full"})]}),o.jsxs("button",{type:"button",onClick:()=>{setEditingProductColor(xt),bt(!1)},className:"px-6 rounded-lg text-white font-bold shadow-lg hover:shadow-xl transition-all flex flex-col items-center justify-center gap-3 text-lg flex-shrink-0",style:{backgroundColor:xt,height:"260px",minWidth:"100px"},children:[o.jsx(Or,{className:"h-8 w-8"}),o.jsxs("div",{className:"text-center leading-tight",children:[o.jsx("div",{children:"Looks"}),o.jsx("div",{children:"Good"})]})]})]})})})]})}const q2=["User Experience","Vendor Management","Analytics & Reporting","Operational Efficiency","Compliance & Risk","Mobile Access","Integration","Sustainability","Budget Management"],uZ={title:"Q2 Product Roadmap",goal:"Prioritize features for the Purchasing Dashboard redesign",votesPerUser:10,useAutoVotes:!0,startDate:new Date().toISOString(),endDate:new Date(Date.now()+10080*60*1e3).toISOString(),isActive:!0,originalEndDate:null,endedEarlyBy:null,endedEarlyReason:null,endedEarlyDetails:null,reopenReason:null,reopenDetails:null,reopenedBy:null,reopenedAt:null,productId:null,productName:null,product_id:null,product_name:null},dZ={organization:"newmill",project:"Product",enabled:!1,workItemType:"Feature"},fZ=[{id:"u1",name:"John Doe",email:"john@example.com",totalVotes:10,usedVotes:0,votesPerFeature:{}},{id:"u2",name:"Jane Smith",email:"jane@example.com",totalVotes:10,usedVotes:0,votesPerFeature:{}},{id:"u3",name:"Robert Johnson",email:"robert@example.com",totalVotes:10,usedVotes:0,votesPerFeature:{}}],u4=(e,t,r)=>e?{label:"System Admin",className:"bg-purple-100 text-purple-800"}:t?{label:"Session Admin",className:"bg-blue-100 text-blue-800"}:r?{label:"Stakeholder",className:"bg-green-100 text-green-800"}:null,d4=e=>{const t=new Date(e),r=new Date;t.setHours(0,0,0,0),r.setHours(0,0,0,0);const n=t.getTime()-r.getTime();return Math.ceil(n/(1e3*60*60*24))},f4=e=>e<=0?"text-[#591D0F]":e<=2?"text-[#6A4234]":e<=4?"text-[#C89212]":"text-[#1E5461]",h4=e=>e<=0?"bg-[#591D0F]/10":e<=2?"bg-[#6A4234]/10":e<=4?"bg-[#C89212]/10":"bg-[#1E5461]/10",hZ=(e,t)=>{const r=new Date(e),n=new Date(t),s=new Date;return r<=s&&s<=n},mZ=e=>{const t=[...e];for(let r=t.length-1;r>0;r--){const n=Math.floor(Math.random()*(r+1));[t[r],t[n]]=[t[n],t[r]]}return t},Bf=(e,t)=>e?e.length>t?`${e.substring(0,t-3)}...`:e:"",hv=e=>{if(!e)return"";const t=document.createElement("div");t.innerHTML=e;let r=t.textContent||t.innerText||"";return r=r.replace(/\s+/g," ").trim(),r},pZ=e=>{const t=e.split("");for(let r=0;r<3;r++){const n=Math.floor(Math.random()*t.length),s=Math.floor(Math.random()*t.length);n!==s&&([t[n],t[s]]=[t[s],t[n]])}return t.join("")};function Rm({src:e,alt:t,style:r,className:n,...s}){const[i,l]=v.useState(!1);return i?o.jsx("div",{className:`inline-block bg-gray-100 text-center align-middle ${n??""}`,style:r,children:o.jsx("div",{className:"flex items-center justify-center w-full h-full",children:o.jsx("img",{src:"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iODgiIGhlaWdodD0iODgiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgc3Ryb2tlPSIjMDAwIiBzdHJva2UtbGluZWpvaW49InJvdW5kIiBvcGFjaXR5PSIuMyIgZmlsbD0ibm9uZSIgc3Ryb2tlLXdpZHRoPSIzLjciPjxyZWN0IHg9IjE2IiB5PSIxNiIgd2lkdGg9IjU2IiBoZWlnaHQ9IjU2IiByeD0iNiIvPjxwYXRoIGQ9Im0xNiA1OCAxNi0xOCAzMiAzMiIvPjxjaXJjbGUgY3g9IjUzIiBjeT0iMzUiIHI9IjciLz48L3N2Zz4KCg==",alt:"Error loading image",...s,"data-original-url":e})})}):o.jsx("img",{src:e,alt:t,className:n,style:r,...s,onError:()=>l(!0)})}const nt=dt.memo(function({children:t,onClick:r,variant:n="primary",disabled:s=!1,className:i="",...l}){const u="py-2 px-4 rounded-lg flex items-center transition-colors cursor-pointer",d={primary:"bg-[#2d4660] text-white hover:bg-[#173B65]",secondary:"border border-gray-300 text-gray-700 hover:bg-gray-50",danger:"bg-[#591D0F] text-white hover:bg-[#492434]",gold:"bg-[#C89212] text-white hover:bg-[#E0A814]",blue:"bg-[#173B65] text-white hover:bg-[#1D2C49]",gray:"bg-[#576C71] text-white hover:bg-[#1E5461]"};return o.jsx("button",{onClick:r,disabled:s,className:`${u} ${d[n]} ${s?"opacity-60 cursor-not-allowed":""} ${i}`,...l,children:t})});class Bn extends v.Component{render(){const{isOpen:t,onClose:r,title:n,children:s,maxWidth:i="max-w-2xl"}=this.props;return t?o.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:o.jsxs("div",{className:"flex items-center justify-center min-h-screen p-4 text-center",children:[o.jsx("div",{className:"fixed inset-0 transition-opacity bg-black/50",onClick:r,"aria-hidden":"true"}),o.jsxs("div",{className:`inline-block w-full ${i} p-6 my-8 overflow-hidden text-left align-middle transition-all transform bg-white shadow-xl rounded-lg`,children:[o.jsxs("div",{className:"flex items-start justify-between mb-5",children:[o.jsxs("div",{className:"flex items-center gap-3 bg-[#FFF7E2] border border-[#C89212]/40 rounded-xl px-6 py-3 shadow-sm w-full mr-4",children:[o.jsx("div",{className:"flex items-center justify-center h-10 w-10 rounded-full bg-[#C89212]/15 text-[#C89212]",children:o.jsx(Z0,{className:"h-6 w-6"})}),o.jsxs("div",{children:[o.jsx("h3",{className:"text-lg font-semibold text-[#2d4660] tracking-tight",children:n}),o.jsx("p",{className:"text-xs text-[#8A6D3B] font-medium mt-1 uppercase tracking-widest",children:"Spark the roadmap with your ideas"})]})]}),o.jsx("button",{onClick:r,className:"ml-3 text-gray-400 hover:text-gray-500 focus:outline-none",children:o.jsx(gi,{className:"h-5 w-5"})})]}),o.jsx("div",{className:"mt-2",children:s})]})]})}):null}}const Gl=dt.memo(function({name:t,truncateAt:r=30,className:n}){if(!t)return null;const s=r===null?t:Bf(t,r),i=["flex items-center text-xs text-[#2d4660]",n].filter(Boolean).join(" ");return o.jsxs("div",{className:i,children:[o.jsx(gF,{className:"h-3 w-3 mr-1 text-[#2d4660]"}),o.jsx("span",{className:"font-medium leading-tight break-words",children:s})]})}),Wh=dt.memo(function({id:t,url:r}){return t?o.jsxs("a",{href:r,target:"_blank",rel:"noreferrer",className:"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-blue-100 text-blue-800 hover:bg-blue-200 cursor-pointer",title:"View in Azure DevOps",children:[o.jsx(BM,{className:"h-3 w-3 mr-1"}),"#",t]}):null}),gZ=dt.memo(function({endDate:t}){const r=d4(t),n=f4(r),s=h4(r);return o.jsx("div",{className:`${s} rounded-md p-3 border ${r<=2?"border-[#6A4234]/20":r<=4?"border-[#C89212]/20":"border-[#1E5461]/20"}`,children:o.jsxs("div",{className:"flex items-center",children:[o.jsx(Os,{className:`h-5 w-5 mr-2 ${n}`}),o.jsxs("div",{children:[o.jsxs("span",{className:`font-medium ${n}`,children:["Voting ends: ",Pi(t)]}),o.jsx("div",{className:"text-sm mt-1",children:r<=0?o.jsx("span",{className:"text-red-600 font-medium",children:"Voting ends today!"}):o.jsxs("span",{className:`${n}`,children:[r," ",r===1?"day":"days"," remaining"]})})]})]})})});function yZ({isShuffling:e,onShuffle:t}){const[r,n]=v.useState("Shuffle Features"),s=v.useRef(null);return v.useEffect(()=>(e?s.current=window.setInterval(()=>{n(pZ("Shuffle Features"))},100):s.current!==null&&(window.clearInterval(s.current),n("Shuffle Features")),()=>{s.current!==null&&window.clearInterval(s.current)}),[e]),o.jsxs("button",{onClick:t,className:`py-2 px-4 rounded-lg flex items-center justify-center transition-all duration-300 w-full md:w-auto ${e?"bg-[#C89212] text-white scale-95":"bg-[#C89212] hover:bg-[#A67810] text-white hover:scale-105"}`,disabled:e,children:[o.jsx("span",{className:`transition-transform duration-500 ${e?"mr-2 animate-spin":"mr-2"}`,children:o.jsx(dF,{className:"h-4 w-4"})}),o.jsx("span",{className:"font-medium tracking-wide whitespace-nowrap",children:r})]})}const Wf=dt.memo(function({show:t,title:r,message:n,onConfirm:s,onCancel:i,confirmText:l="Confirm",cancelText:u="Cancel",type:d="delete"}){if(!t)return null;const m=d==="delete"?"bg-[#591D0F]/10":"bg-[#C89212]/10",f=d==="delete"?"text-[#591D0F]":"text-[#C89212]",p=d==="delete"?"bg-[#591D0F] hover:bg-[#492434]":"bg-[#C89212] hover:bg-[#A67810]";return o.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:o.jsxs("div",{className:"relative z-10 bg-white rounded-lg shadow-xl max-w-md w-full mx-auto overflow-hidden",children:[o.jsxs("div",{className:`${m} p-4 flex items-start space-x-4`,children:[o.jsx("div",{className:f,children:d==="delete"?o.jsx(vi,{className:"h-5 w-5"}):o.jsx(Ut,{className:"h-5 w-5"})}),o.jsxs("div",{children:[o.jsx("h3",{className:"text-lg font-medium text-gray-900",children:r}),o.jsx("p",{className:"mt-1 text-sm text-gray-500",children:n})]})]}),o.jsx("div",{className:"p-4 bg-white space-y-4",children:o.jsxs("div",{className:"flex items-center justify-end space-x-3",children:[o.jsx("button",{type:"button",onClick:i,className:"px-4 py-2 border border-gray-300 rounded-md text-sm font-medium text-gray-700 hover:bg-gray-50 cursor-pointer",children:u}),o.jsx("button",{type:"button",onClick:()=>{s(),i()},className:`px-4 py-2 rounded-md text-sm font-medium text-white ${p} cursor-pointer`,children:l})]})})]})})}),vZ=dt.memo(function({feature:t,userVoteCount:r=0,remainingVotes:n=0,votingIsActive:s=!1,onVote:i,isShuffling:l=!1,shuffleStage:u="idle",currentUser:d,onRequestInfo:m}){const[f,p]=v.useState(!1),[y,x]=v.useState(!1),b=async()=>{if(!(!m||y)){x(!0);try{await m(t.id),p(!0)}catch(S){console.error("Error requesting info:",S)}finally{x(!1)}}},j=()=>{switch(u){case"fadeOut":return"opacity-0 scale-95 blur-sm";case"rearranging":return"opacity-0 scale-90";case"fadeIn":return"opacity-100 scale-100 blur-0";default:return"opacity-100 scale-100 blur-0"}};return o.jsx("div",{className:`relative z-10 bg-white rounded-lg shadow-md overflow-hidden transition-all duration-400 ease-in-out ${r>0?"border-2 border-[#1E5461]":""} ${j()}`,children:o.jsxs("div",{className:"p-6 flex flex-col h-full",children:[o.jsx("h3",{className:"text-lg font-semibold mb-2 text-[#2d4660]",children:t.title}),t.azureDevOpsId&&o.jsx("div",{className:"flex justify-end mb-4",children:o.jsx(Wh,{id:t.azureDevOpsId,url:t.azureDevOpsUrl||""})}),t.description?o.jsx("p",{className:"text-gray-600 mb-4 flex-grow",children:t.description}):o.jsxs("div",{className:"mb-4 flex-grow",children:[o.jsx("p",{className:"text-gray-400 italic mb-3",children:"No description provided"}),d&&m&&o.jsx("div",{className:"transition-all duration-300",children:f?o.jsxs("div",{className:"text-sm px-3 py-2 bg-green-50 text-green-700 rounded-md font-medium flex items-center animate-fadeIn",children:[o.jsx(Or,{className:"h-4 w-4 mr-2 flex-shrink-0"}),o.jsx("span",{children:"Thank you! Your request has been sent."})]}):o.jsxs("button",{onClick:b,disabled:y,className:"text-sm px-3 py-2 bg-blue-50 hover:bg-blue-100 text-[#2d4660] rounded-md font-medium flex items-center transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:[o.jsx(Ut,{className:"h-4 w-4 mr-2 flex-shrink-0"}),o.jsx("span",{children:y?"Sending...":"Ask Product Owner for more info"})]})})]}),i&&o.jsx("div",{className:"mt-auto pt-3",children:o.jsxs("div",{className:`flex items-center mb-3 ${t.epic?"justify-between":"justify-end"}`,children:[t.epic&&o.jsx(Gl,{name:t.epic,truncateAt:null,className:"text-sm bg-[#1E5461]/10 px-2 py-1 rounded-md"}),o.jsx("div",{className:"flex items-center space-x-2",children:r===0?o.jsx("button",{onClick:()=>i(t.id,!0),className:`px-6 py-2.5 rounded-lg text-base font-semibold cursor-pointer transition-colors ${s&&n>0?"bg-[#2d4660] text-white hover:bg-[#C89212]":"bg-gray-300 text-gray-600 cursor-not-allowed"}`,disabled:!s||n<=0,children:"Vote"}):o.jsxs(o.Fragment,{children:[o.jsx("button",{onClick:()=>i(t.id,!1),className:"p-2 rounded-full bg-gray-100 hover:bg-gray-200 text-gray-700 cursor-pointer transition-colors","aria-label":"Remove vote",disabled:!s,children:o.jsx(On,{className:"h-6 w-6"})}),o.jsx("span",{className:"px-4 py-2 bg-[#1E5461]/10 text-[#1E5461] rounded-full font-semibold text-base min-w-[3rem] text-center",children:r}),o.jsx("button",{onClick:()=>i(t.id,!0),className:`p-2 rounded-full cursor-pointer transition-colors ${s&&n>0?"bg-[#2d4660]/10 hover:bg-[#C89212]/30 text-[#2d4660]":"bg-gray-100 text-gray-400 cursor-not-allowed"}`,disabled:!s||n<=0,"aria-label":"Add vote",children:o.jsx($M,{className:"h-6 w-6"})})]})})]})})]})})});function xZ({feature:e,onClose:t}){return o.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:o.jsxs("div",{className:"relative z-10 bg-white rounded-lg p-6 max-w-md w-full max-h-[80vh] overflow-y-auto",children:[o.jsxs("div",{className:"flex justify-between items-center mb-4",children:[o.jsxs("h3",{className:"text-lg font-medium text-[#2d4660]",children:['Voters for "',e.title,'"']}),o.jsx("button",{onClick:t,className:"text-gray-500 hover:text-gray-700 cursor-pointer",children:o.jsx(gi,{className:"h-5 w-5"})})]}),e.voters.length===0?o.jsx("p",{className:"text-gray-500",children:"No votes yet"}):o.jsx("ul",{className:"divide-y divide-gray-200",children:e.voters.map(r=>o.jsxs("li",{className:"py-3 flex justify-between items-center",children:[o.jsxs("div",{children:[o.jsx("p",{className:"font-medium",children:r.name}),o.jsx("p",{className:"text-sm text-gray-500",children:r.email})]}),o.jsxs("div",{className:"bg-[#2d4660]/10 text-[#2d4660] rounded-full px-3 py-1",children:[r.voteCount," ",r.voteCount===1?"vote":"votes"]})]},r.userId))})]})})}function wZ({features:e,onResetVotes:t,onResetAllVotes:r,onBack:n,showVotersList:s,setShowVotersList:i,votingSession:l,effectiveVotesPerUser:u,onLogout:d}){const[m,f]=v.useState(!1),p=v.useRef(null);v.useEffect(()=>{if(!m)return;const S=k=>{p.current&&!p.current.contains(k.target)&&f(!1)};return document.addEventListener("mousedown",S),document.addEventListener("touchstart",S,{passive:!0}),()=>{document.removeEventListener("mousedown",S),document.removeEventListener("touchstart",S)}},[m]);const y=v.useMemo(()=>[...e].sort((S,k)=>k.votes-S.votes),[e]),x=v.useMemo(()=>y.slice(0,10).map(S=>({name:S.title,votes:S.votes,id:S.id})),[y]),b=d4(l.endDate),j=f4(b);return o.jsxs("div",{className:"container mx-auto p-4 max-w-6xl pb-8",children:[o.jsx("div",{className:"hidden md:flex md:justify-center mb-2",children:o.jsx("img",{src:"https://www.steeldynamics.com/wp-content/uploads/2024/05/New-Millennium-color-logo1.png",alt:"New Millennium Building Systems Logo",className:"-mt-4",style:{height:"96px",width:"auto"}})}),o.jsxs("div",{className:"flex justify-between items-center mb-6",children:[o.jsxs("div",{className:"flex items-center",children:[o.jsx(Rm,{src:"https://media.licdn.com/dms/image/C4D0BAQEC3OhRqehrKg/company-logo_200_200/0/1630518354793/new_millennium_building_systems_logo?e=2147483647&v=beta&t=LM3sJTmQZet5NshZ-RNHXW1MMG9xSi1asp-VUeSA9NA",alt:"New Millennium Building Systems Logo",className:"mr-4 md:hidden",style:{width:"40px",height:"40px"}}),o.jsx("button",{onClick:n,className:"mr-2 p-1 rounded-full hover:bg-gray-200 cursor-pointer",children:o.jsx(fc,{className:"h-6 w-6"})}),o.jsx("h1",{className:"text-2xl font-bold text-[#2d4660] md:text-3xl",children:Ys(l.endDate)?"Final Voting Results":"Current Voting Results"})]}),o.jsxs("div",{ref:p,className:"relative z-40",children:[o.jsxs("div",{className:"hidden md:flex space-x-2",children:[o.jsxs(nt,{variant:"primary",onClick:n,className:"flex items-center",children:[o.jsx(sn,{className:"mr-2 h-4 w-4"}),"Admin Dashboard"]}),o.jsx(nt,{variant:"danger",onClick:r,children:"Reset All Votes"}),o.jsxs(nt,{variant:"gray",onClick:d,className:"flex items-center",children:[o.jsx(xn,{className:"mr-2 h-4 w-4"}),"Logout"]})]}),o.jsx("div",{className:"flex md:hidden",children:o.jsx("button",{onClick:()=>f(!m),className:"p-2 rounded-md border border-gray-200 bg-white shadow-sm","aria-label":"Open menu",children:o.jsx(Es,{className:"h-5 w-5 text-gray-700"})})}),m&&o.jsx("div",{className:"absolute right-0 mt-2 w-56 bg-white border border-gray-200 rounded-lg shadow-lg md:hidden z-50",children:o.jsxs("div",{className:"py-1",children:[o.jsxs("button",{onClick:()=>{f(!1),n()},className:"w-full px-3 py-2 flex items-center text-left hover:bg-gray-50",children:[o.jsx(sn,{className:"h-4 w-4 mr-2 text-gray-700"}),"Admin Dashboard"]}),o.jsxs("button",{onClick:()=>{f(!1),r()},className:"w-full px-3 py-2 flex items-center text-left hover:bg-gray-50 text-red-600",children:[o.jsx(vi,{className:"h-4 w-4 mr-2"}),"Reset All Votes"]}),o.jsxs("button",{onClick:()=>{f(!1),d()},className:"w-full px-3 py-2 flex items-center text-left hover:bg-gray-50",children:[o.jsx(xn,{className:"h-4 w-4 mr-2 text-gray-700"}),"Logout"]})]})})]})]}),o.jsxs("div",{className:"relative z-10 bg-white rounded-lg shadow-md p-4 mb-6",children:[o.jsxs("div",{className:"flex justify-between items-center mb-4",children:[o.jsx("h2",{className:"text-xl font-semibold text-[#2d4660]",children:l.title}),o.jsxs("div",{className:"text-sm text-gray-600",children:[o.jsxs("span",{className:"mr-2",children:["Votes per user: ",u]}),l.isActive?o.jsx("span",{className:"text-[#1E5461] font-medium",children:"Voting Active"}):Ys(l.endDate)?o.jsx("span",{className:"text-[#591D0F] font-medium",children:"Voting Closed"}):o.jsx("span",{className:"text-[#C89212] font-medium",children:"Voting Upcoming"})]})]}),o.jsx("p",{className:"text-gray-600 mb-4",children:l.goal}),l.isActive&&o.jsx("div",{className:`${h4(b)} relative z-10 rounded-md p-3 mb-4 inline-block border ${b<=2?"border-[#6A4234]/20":b<=4?"border-[#C89212]/20":"border-[#1E5461]/20"}`,children:o.jsxs("div",{className:"flex items-center",children:[o.jsx(Os,{className:`h-4 w-4 mr-2 ${j}`}),o.jsx("span",{className:`${j} font-medium`,children:b<=0?"Voting ends today!":`${b} ${b===1?"day":"days"} remaining until ${Pi(l.endDate)}`})]})}),o.jsx("div",{className:"h-72",children:o.jsx(VB,{width:"100%",height:"100%",children:o.jsxs($X,{data:x,margin:{top:20,right:30,left:20,bottom:60},children:[o.jsx(GT,{dataKey:"name",angle:-45,textAnchor:"end",height:80,tick:{fontSize:12}}),o.jsx(YT,{}),o.jsx(wK,{}),o.jsx(WT,{dataKey:"votes",fill:"#3B82F6",children:x.map((S,k)=>o.jsx(kw,{fill:k%2===0?"#2d4660":"#4f6d8e"},`cell-${k}`))})]})})})]}),o.jsxs("div",{className:"relative z-10 bg-white rounded-lg shadow-md p-4",children:[o.jsx("h2",{className:"text-xl font-semibold mb-4 text-[#2d4660]",children:"Feature Details"}),o.jsx("div",{className:"w-full overflow-x-auto",children:o.jsxs("table",{className:"min-w-full divide-y divide-gray-200 table-fixed",children:[o.jsx("thead",{className:"bg-gray-50",children:o.jsxs("tr",{children:[o.jsx("th",{scope:"col",className:"w-12 px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Rank"}),o.jsx("th",{scope:"col",className:"w-1/2 px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Title"}),o.jsx("th",{scope:"col",className:"hidden sm:table-cell w-1/4 px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Epic"}),o.jsx("th",{scope:"col",className:"w-14 px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Votes"}),o.jsx("th",{scope:"col",className:"hidden md:table-cell w-20 px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Voters"}),o.jsx("th",{scope:"col",className:"w-20 px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),o.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:y.map((S,k)=>o.jsxs("tr",{className:"align-top group",children:[o.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm font-medium",children:k+1}),o.jsxs("td",{className:"px-4 py-4 whitespace-normal break-words text-sm font-medium",children:[S.title,S.azureDevOpsId&&o.jsx("div",{className:"mt-1",children:o.jsx(Wh,{id:S.azureDevOpsId,url:S.azureDevOpsUrl||""})})]}),o.jsx("td",{className:"hidden sm:table-cell px-4 py-4 whitespace-nowrap text-sm",children:S.epic&&o.jsx(Gl,{name:S.epic})}),o.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm",children:S.votes}),o.jsx("td",{className:"hidden md:table-cell px-4 py-4 whitespace-nowrap text-sm",children:o.jsxs("button",{onClick:()=>i(S.id),className:"text-[#2d4660] hover:text-[#C89212] flex items-center cursor-pointer",disabled:S.voters.length===0,children:[o.jsx(In,{className:"h-4 w-4 mr-1"}),S.voters.length," ",S.voters.length===1?"user":"users"]})}),o.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm md:opacity-0 md:group-hover:opacity-100 transition-opacity",children:o.jsx("button",{onClick:()=>t(S.id),className:"text-[#591D0F] hover:text-[#492434] cursor-pointer",disabled:S.votes===0,children:"Reset Votes"})})]},S.id))})]})})]}),s&&o.jsx(xZ,{feature:e.find(S=>S.id===s),onClose:()=>i(null)})]})}function bZ({navigate:e,votingSession:t}){return o.jsx("div",{className:"relative z-10 flex flex-col items-center justify-center min-h-[80vh] p-6",children:o.jsxs("div",{className:"relative z-10 w-full max-w-md bg-white rounded-lg shadow-lg p-8 text-center",children:[o.jsx("img",{src:"https://www.steeldynamics.com/wp-content/uploads/2024/05/New-Millennium-color-logo1.png",alt:"New Millennium Building Systems Logo",className:"mx-auto mb-6",style:{maxWidth:"200px",height:"auto"}}),o.jsx("div",{className:"w-20 h-20 bg-[#1E5461]/10 rounded-full flex items-center justify-center mx-auto mb-6",children:o.jsx(Or,{className:"h-12 w-12 text-[#1E5461]"})}),o.jsx("h1",{className:"text-3xl font-bold text-[#1E5461] mb-4",children:"Thank You!"}),o.jsxs("p",{className:"text-gray-700 text-lg mb-6",children:["Your votes for ",o.jsx("span",{className:"font-semibold",children:t.title})," have been submitted successfully."]}),o.jsx("p",{className:"text-gray-600 mb-8",children:"We appreciate your input in helping prioritize features for our product roadmap."}),o.jsx(nt,{variant:"primary",onClick:()=>e("/sessions"),className:"mx-auto",children:"View All Voting Sessions"})]})})}function m4({currentRole:e="stakeholder",onSelectStakeholder:t,onSelectSessionAdmin:r,onSelectSystemAdmin:n,showRoleToggle:s=!0}){const i=new Date().getFullYear(),l=[];(t||e==="stakeholder")&&l.push({key:"stakeholder",label:"Stakeholder View",icon:o.jsx(In,{className:"h-4 w-4 inline mr-2"}),onClick:t}),(r||e==="session-admin")&&l.push({key:"session-admin",label:"Session Admin",icon:o.jsx(Hr,{className:"h-4 w-4 inline mr-2"}),onClick:r}),(n||e==="system-admin")&&l.push({key:"system-admin",label:"System Admin",icon:o.jsx(us,{className:"h-4 w-4 inline mr-2"}),onClick:n});const u=["stakeholder","session-admin","system-admin"];l.sort((m,f)=>{const p=u.indexOf(m.key),y=u.indexOf(f.key);return p-y});const d=s&&l.length>0;return o.jsx("footer",{className:"mt-auto bg-gray-50 border-t border-gray-200",children:o.jsxs("div",{className:"container mx-auto px-4 py-6 max-w-6xl",children:[d&&o.jsx("div",{className:"flex justify-center mb-6",children:o.jsx("div",{className:"inline-flex items-center bg-gray-100 rounded-lg p-1",children:l.map(({key:m,label:f,icon:p,onClick:y})=>{const x=e===m,b=!y;return o.jsxs("button",{onClick:y,disabled:b,className:`px-4 py-2 rounded-md text-sm font-medium transition-colors flex items-center ${x?"bg-white text-[#2d4660] shadow-sm":"text-gray-600 hover:text-gray-900"} ${b&&!x?"opacity-60 cursor-not-allowed":""}`,children:[p,o.jsx("span",{children:f})]},m)})})}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 text-sm text-gray-600",children:[o.jsxs("div",{children:[o.jsx("h3",{className:"font-semibold text-gray-900 mb-2",children:"New Millennium Building Systems"}),o.jsxs("p",{className:"text-xs leading-relaxed",children:["A Steel Dynamics Company",o.jsx("br",{}),"Innovation in structural steel manufacturing"]})]}),o.jsxs("div",{children:[o.jsx("h3",{className:"font-semibold text-gray-900 mb-2",children:"Quick Links"}),o.jsxs("ul",{className:"space-y-1 text-xs",children:[o.jsx("li",{children:o.jsx("a",{href:"https://www.steeldynamics.com",target:"_blank",rel:"noopener noreferrer",className:"hover:text-[#2d4660] transition-colors",children:"Steel Dynamics Inc."})}),o.jsx("li",{children:o.jsx("a",{href:"https://www.newmill.com",target:"_blank",rel:"noopener noreferrer",className:"hover:text-[#2d4660] transition-colors",children:"New Millennium"})})]})]}),o.jsxs("div",{children:[o.jsx("h3",{className:"font-semibold text-gray-900 mb-2",children:"Need Help?"}),o.jsx("p",{className:"text-xs",children:"Contact your Product Owner or session administrator for assistance with voting."})]})]}),o.jsx("div",{className:"mt-6 pt-6 border-t border-gray-200 text-center text-xs text-gray-500",children:o.jsxs("p",{children:[" ",i," New Millennium Building Systems, LLC. All rights reserved."]})})]})})}function H2({feature:e,onSubmit:t,onCancel:r}){const{register:n,handleSubmit:s,formState:{errors:i}}=ku({defaultValues:e?{title:e.title,description:e.description,epic:e.epic}:{epic:q2[0]}});return o.jsxs("form",{onSubmit:s(t),children:[o.jsxs("div",{className:"mb-4",children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Title"}),o.jsx("input",{...n("title",{required:"Title is required"}),className:"w-full px-3 py-2 border border-gray-300 rounded-md"}),i.title&&o.jsx("p",{className:"mt-1 text-sm text-red-600",children:i.title.message})]}),o.jsxs("div",{className:"mb-4",children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),o.jsx("textarea",{...n("description",{required:"Description is required"}),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-md"}),i.description&&o.jsx("p",{className:"mt-1 text-sm text-red-600",children:i.description.message})]}),o.jsxs("div",{className:"mb-4",children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Epic"}),o.jsx("select",{...n("epic",{required:"Epic is required"}),className:"w-full px-3 py-2 border border-gray-300 rounded-md bg-white",children:q2.map(l=>o.jsx("option",{value:l,children:l},l))}),i.epic&&o.jsx("p",{className:"mt-1 text-sm text-red-600",children:i.epic.message})]}),o.jsxs("div",{className:"flex justify-end space-x-2 mt-6",children:[o.jsx(nt,{variant:"secondary",type:"button",onClick:r,children:"Cancel"}),o.jsxs(nt,{variant:"primary",type:"submit",children:[e?"Update":"Add"," Feature"]})]})]})}function jZ({currentUser:e,votingSession:t,onChangeVotes:r,onToggleAdmin:n,isAdmin:s,navigate:i,userVotes:l,features:u,isSystemAdmin:d,isSessionAdmin:m,isStakeholder:f}){const[p,y]=v.useState(!1),x=Object.values(l).reduce((S,k)=>S+k,0),b=u.filter(S=>l[S.id]>0),j=u4(d,m,f);return o.jsxs("div",{className:"container mx-auto p-4 max-w-6xl min-h-screen pb-8",children:[o.jsx("div",{className:"hidden md:flex md:justify-center mb-2",children:o.jsx("img",{src:"https://www.steeldynamics.com/wp-content/uploads/2024/05/New-Millennium-color-logo1.png",alt:"New Millennium Building Systems Logo",className:"-mt-4",style:{height:"96px",width:"auto"}})}),o.jsxs("div",{className:"flex flex-col md:flex-row md:justify-between md:items-center mb-6",children:[o.jsxs("div",{className:"flex items-start md:items-center",children:[o.jsx(Rm,{src:"https://media.licdn.com/dms/image/C4D0BAQEC3OhRqehrKg/company-logo_200_200/0/1630518354793/new_millennium_building_systems_logo?e=2147483647&v=beta&t=LM3sJTmQZet5NshZ-RNHXW1MMG9xSi1asp-VUeSA9NA",alt:"New Millennium Building Systems Logo",className:"mr-4 md:hidden",style:{width:"40px",height:"40px"}}),o.jsxs("div",{children:[o.jsx("h1",{className:"text-2xl font-bold text-[#2d4660] md:text-3xl",children:"Feature Voting"}),o.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:["Welcome, ",e==null?void 0:e.name,(e==null?void 0:e.email)&&o.jsxs("a",{href:`mailto:${e.email}`,className:"ml-2 text-[#2D4660] hover:underline",children:["(",e.email,")"]}),j&&o.jsx("span",{className:`ml-2 inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium ${j.className}`,children:j.label})]})]})]}),o.jsxs("div",{className:"relative z-10 flex items-center space-x-2 mt-3 md:mt-0 md:justify-end",children:[s&&o.jsxs(nt,{variant:"primary",onClick:n,className:"flex items-center",children:[o.jsx(sn,{className:"mr-2 h-4 w-4"}),o.jsx("span",{className:"hidden md:inline",children:"Admin Dashboard"}),o.jsx("span",{className:"md:hidden",children:"Admin"})]}),o.jsxs(nt,{variant:"gray",onClick:()=>i("/sessions"),className:"flex items-center",children:[o.jsx(xn,{className:"mr-2 h-4 w-4"}),o.jsx("span",{className:"hidden md:inline",children:"All Sessions"}),o.jsx("span",{className:"md:hidden",children:"Sessions"})]})]})]}),o.jsx("div",{className:"max-w-3xl mx-auto",children:o.jsxs("div",{className:"relative z-10 bg-white rounded-lg shadow-lg p-8 text-center",children:[o.jsx("div",{className:"w-20 h-20 bg-[#1E5461]/10 rounded-full flex items-center justify-center mx-auto mb-6",children:o.jsx(Or,{className:"h-12 w-12 text-[#1E5461]"})}),o.jsx("h2",{className:"text-3xl font-bold text-[#1E5461] mb-4",children:"Votes Already Submitted"}),o.jsxs("p",{className:"text-gray-700 text-lg mb-2",children:["Welcome back, ",o.jsx("span",{className:"font-semibold",children:e.name}),"!"]}),o.jsxs("p",{className:"text-gray-600 mb-6",children:["You have already submitted your votes for ",o.jsx("span",{className:"font-semibold",children:t.title}),"."]}),o.jsxs("div",{className:"bg-gray-50 rounded-lg p-6 mb-6",children:[o.jsx("h3",{className:"text-lg font-semibold text-[#2d4660] mb-4",children:"Your Current Votes"}),o.jsxs("div",{className:"space-y-3",children:[b.map(S=>o.jsxs("div",{className:"flex justify-between items-start gap-4",children:[o.jsxs("div",{children:[o.jsx("span",{className:"block text-gray-700 font-medium",children:S.title}),S.epic&&o.jsx("div",{className:"mt-1",children:o.jsx(Gl,{name:S.epic,truncateAt:null,className:"text-xs bg-[#1E5461]/10 px-2 py-0.5 rounded"})})]}),o.jsxs("span",{className:"bg-[#1E5461]/10 text-[#1E5461] rounded-full px-3 py-1 font-medium self-center",children:[l[S.id]," ",l[S.id]===1?"vote":"votes"]})]},S.id)),o.jsx("div",{className:"border-t border-gray-200 pt-3 mt-3",children:o.jsxs("div",{className:"flex justify-between items-center font-semibold",children:[o.jsx("span",{className:"text-[#2d4660]",children:"Total Votes"}),o.jsx("span",{className:"text-[#2d4660]",children:x})]})})]})]}),o.jsx("div",{className:"bg-[#C89212]/10 border border-[#C89212]/20 rounded-lg p-4 mb-6",children:o.jsxs("div",{className:"flex items-start text-left",children:[o.jsx(mE,{className:"h-5 w-5 text-[#C89212] mr-3 mt-0.5 flex-shrink-0"}),o.jsx("div",{children:o.jsxs("p",{className:"text-sm text-gray-700",children:["If you'd like to change your votes, you can do so below. However, please note that this will",o.jsx("span",{className:"font-semibold",children:" permanently remove your previous votes"})," and allow you to vote again. This action cannot be undone."]})})]})}),o.jsxs(nt,{variant:"gold",onClick:()=>y(!0),className:"mx-auto text-lg py-3 px-8",children:[o.jsx(Po,{className:"mr-2 h-5 w-5"}),"Change My Votes"]})]})}),o.jsx(Wf,{show:p,title:"Change Your Votes?",message:"This will permanently remove all your previous votes for this session and allow you to vote again. This action cannot be undone. Are you sure you want to continue?",onConfirm:r,onCancel:()=>y(!1),confirmText:"Yes, Change My Votes",cancelText:"Cancel",type:"reset"})]})}const SZ=dt.memo(function({features:t,currentUser:r,pendingVotes:n,pendingUsedVotes:s,onVote:i,onSubmitVotes:l,onToggleAdmin:u,isAdmin:d,votingSession:m,navigate:f,effectiveVotesPerUser:p,sessionId:y,onLogout:x,onSuggestionSubmitted:b,isSystemAdmin:j,isSessionAdmin:S,isStakeholder:k}){const[C,N]=v.useState([...t]),[O,P]=v.useState(!1),[T,D]=v.useState("idle"),[q,F]=v.useState(!1),[K,B]=v.useState({}),[Q,oe]=v.useState(!0),[ae,J]=v.useState(!1),[H,ne]=v.useState(!1),[ie,ge]=v.useState(""),[ve,I]=v.useState(""),[V,Ae]=v.useState(""),[X,re]=v.useState(""),[de,xe]=v.useState(!1),[ye,U]=v.useState(null),[$e,Ze]=v.useState(!1),Z=v.useRef(null),Pe=u4(j,S,k);v.useEffect(()=>{if(!ae)return;const _e=be=>{Z.current&&!Z.current.contains(be.target)&&J(!1)};return document.addEventListener("mousedown",_e),document.addEventListener("touchstart",_e,{passive:!0}),()=>{document.removeEventListener("mousedown",_e),document.removeEventListener("touchstart",_e)}},[ae]),v.useEffect(()=>{N([...t])},[t]),v.useEffect(()=>{async function _e(){if(!r||!y){oe(!1);return}try{const je=(await Ll(y)).filter(Fe=>Fe.user_id===r.id);if(je.length>0){const Fe={};je.forEach(ke=>{Fe[ke.feature_id]=ke.vote_count}),B(Fe),F(!0)}else F(!1),B({})}catch(be){console.error("Error checking existing votes:",be),F(!1)}finally{oe(!1)}}_e()},[r,y]);const Ve=v.useCallback(async()=>{if(!(!r||!y))try{await d5(y,r.id),F(!1),B({})}catch(_e){console.error("Error changing votes:",_e),alert("Failed to reset votes. Please try again.")}},[r,y]),ft=v.useCallback(()=>{O||(P(!0),D("fadeOut"),setTimeout(()=>{D("rearranging"),setTimeout(()=>{N(mZ(t)),D("fadeIn"),setTimeout(()=>{D("idle"),P(!1)},400)},200)},400))},[t,O]),gt=v.useCallback(async _e=>{const be=t.find(je=>je.id===_e);if(!(!be||!r))try{await g5({session_id:y,feature_id:_e,feature_title:be.title,requester_id:r.id,requester_name:r.name,requester_email:r.email,created_at:new Date().toISOString()})}catch(je){throw console.error("Error submitting info request:",je),alert("Failed to submit request. Please try again."),je}},[t,r,y]),Ct=v.useCallback(()=>{U(null),Ze(!1),ne(!0)},[]),_t=v.useCallback(()=>{de||(ne(!1),U(null),Ze(!1),ge(""),I(""),Ae(""),re(""))},[de]),kt=v.useCallback(async _e=>{_e.preventDefault();const be=ie.trim(),je=ve.trim(),Fe=V.trim(),ke=X.trim();if(!be){U("Please provide a brief title for your suggestion.");return}if(!y){U("Unable to link this suggestion to the current session.");return}try{xe(!0),U(null);const Ke=await y5({session_id:y,title:be,description:je||null,requester_id:(r==null?void 0:r.id)??null,requester_name:(r==null?void 0:r.name)??null,requester_email:(r==null?void 0:r.email)??null,whatWouldItDo:Fe||null,howWouldItWork:ke||null});b==null||b(Ke),Ze(!0),ge(""),I(""),Ae(""),re("")}catch(Ke){console.error("Error submitting feature suggestion:",Ke),U("We were unable to submit your suggestion. Please try again in a moment.")}finally{xe(!1)}},[ve,ie,V,X,r,y,de,b]);if(!r)return null;if(Q)return o.jsx("div",{className:"container mx-auto p-4 max-w-6xl min-h-screen flex items-center justify-center",children:o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-[#2d4660] mx-auto mb-4"}),o.jsx("p",{className:"text-gray-600",children:"Loading your voting status..."})]})});if(q)return o.jsx(jZ,{currentUser:r,votingSession:m,onChangeVotes:Ve,onToggleAdmin:u,isAdmin:d,navigate:f,userVotes:K,features:t,isSystemAdmin:j,isSessionAdmin:S,isStakeholder:k});const $=p-s,G=$===0,ue=m.isActive;return o.jsxs("div",{className:"container mx-auto p-4 max-w-6xl pb-8",children:[o.jsx("div",{className:"hidden md:flex md:justify-center mb-2",children:o.jsx("img",{src:"https://www.steeldynamics.com/wp-content/uploads/2024/05/New-Millennium-color-logo1.png",alt:"New Millennium Building Systems Logo",className:"-mt-4",style:{height:"96px",width:"auto"}})}),o.jsxs("div",{className:"flex justify-between items-center mb-6",children:[o.jsxs("div",{className:"flex items-start md:items-center",children:[o.jsx(Rm,{src:"https://media.licdn.com/dms/image/C4D0BAQEC3OhRqehrKg/company-logo_200_200/0/1630518354793/new_millennium_building_systems_logo?e=2147483647&v=beta&t=LM3sJTmQZet5NshZ-RNHXW1MMG9xSi1asp-VUeSA9NA",alt:"New Millennium Building Systems Logo",className:"mr-4 md:hidden",style:{width:"40px",height:"40px"}}),o.jsxs("div",{children:[o.jsx("h1",{className:"text-2xl font-bold text-[#2d4660] md:text-3xl",children:"Feature Voting"}),o.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:["Welcome, ",r==null?void 0:r.name,(r==null?void 0:r.email)&&o.jsxs("a",{href:`mailto:${r.email}`,className:"ml-2 text-[#2D4660] hover:underline",children:["(",r.email,")"]}),Pe&&o.jsx("span",{className:`ml-2 inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium ${Pe.className}`,children:Pe.label})]})]})]}),o.jsxs("div",{ref:Z,className:"relative z-40",children:[o.jsxs("div",{className:"hidden md:flex items-center space-x-2",children:[d&&o.jsxs(nt,{variant:"primary",onClick:u,className:"flex items-center",children:[o.jsx(sn,{className:"mr-2 h-4 w-4"}),"Admin Dashboard"]}),o.jsx(nt,{variant:"gray",onClick:()=>f("/sessions"),className:"flex items-center",children:"All Sessions"}),o.jsxs(nt,{variant:"gray",onClick:x,className:"flex items-center",children:[o.jsx(xn,{className:"mr-2 h-4 w-4"}),"Logout"]})]}),o.jsx("div",{className:"flex md:hidden",children:o.jsx("button",{onClick:()=>J(!ae),className:"p-2 rounded-md border border-gray-200 bg-white shadow-sm","aria-label":"Open menu",children:o.jsx(Es,{className:"h-5 w-5 text-gray-700"})})}),ae&&o.jsx("div",{className:"absolute right-0 mt-2 w-56 bg-white border border-gray-200 rounded-lg shadow-lg md:hidden z-50",children:o.jsxs("div",{className:"py-1",children:[d&&o.jsxs("button",{onClick:()=>{J(!1),u()},className:"w-full px-3 py-2 flex items-center text-left hover:bg-gray-50",children:[o.jsx(sn,{className:"h-4 w-4 mr-2 text-gray-700"}),"Admin Dashboard"]}),o.jsx("button",{onClick:()=>{J(!1),f("/sessions")},className:"w-full px-3 py-2 flex items-center text-left hover:bg-gray-50",children:"All Sessions"}),o.jsxs("button",{onClick:()=>{J(!1),x()},className:"w-full px-3 py-2 flex items-center text-left hover:bg-gray-50",children:[o.jsx(xn,{className:"h-4 w-4 mr-2 text-gray-700"}),"Logout"]})]})})]})]}),o.jsx("div",{className:"relative z-10 mb-6 bg-white rounded-lg shadow-md p-4",children:o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[o.jsxs("div",{className:"md:col-span-2",children:[o.jsx("h2",{className:"text-xl font-semibold text-[#2d4660] mb-2",children:m.title}),o.jsx("p",{className:"text-gray-600",children:m.goal})]}),o.jsxs("div",{className:"flex flex-col justify-center",children:[o.jsx(gZ,{endDate:m.endDate}),o.jsxs("div",{className:"flex items-center mt-3",children:[o.jsx(An,{className:"h-4 w-4 mr-2 text-[#2d4660]"}),o.jsxs("p",{className:"text-gray-700",children:["You have ",o.jsxs("span",{className:"font-bold text-[#2d4660]",children:[$," / ",p]})," votes remaining"]})]})]})]})}),!ue&&o.jsx("div",{className:"mb-6 bg-[#C89212]/10 p-4 rounded-lg border border-[#C89212]/20",children:o.jsxs("div",{className:"flex items-center text-[#6A4234]",children:[o.jsx(Zh,{className:"h-5 w-5 mr-2"}),o.jsxs("span",{className:"font-medium",children:["Voting is currently ",Ys(m.endDate)?"closed":"not yet open",".",Ys(m.endDate)?` Voting ended on ${Pi(m.endDate)}.`:` Voting will open on ${Pi(m.startDate)}.`]})]})}),o.jsxs("div",{className:"flex flex-col md:flex-row md:justify-between md:items-center mb-4 gap-3",children:[o.jsx("h2",{className:"text-xl font-semibold text-[#2d4660]",children:"Available Features"}),o.jsxs("div",{className:"flex flex-col md:flex-row items-stretch md:items-center gap-3",children:[o.jsxs(nt,{variant:"gold",onClick:Ct,className:"flex items-center justify-center w-full md:w-auto",children:[o.jsx(Z0,{className:"h-4 w-4 mr-2"}),"Suggest a Feature"]}),t.length>6&&o.jsx(yZ,{isShuffling:O,onShuffle:ft})]})]}),o.jsx("div",{className:`grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 ${s>0?"mb-32":""}`,children:C.map(_e=>{const be=n[_e.id]||0;return o.jsx(vZ,{feature:_e,userVoteCount:be,remainingVotes:$,votingIsActive:ue,onVote:i,isShuffling:O,shuffleStage:T,currentUser:r,onRequestInfo:gt},_e.id)})}),s>0&&o.jsx("div",{className:"fixed bottom-0 left-0 right-0 bg-white shadow-lg border-t border-gray-200 p-4",children:o.jsxs("div",{className:"container mx-auto max-w-6xl flex items-center justify-between",children:[o.jsxs("div",{children:[!G&&o.jsxs("div",{className:"flex items-center",children:[o.jsx(mE,{className:"h-5 w-5 text-[#C89212] mr-2"}),o.jsxs("span",{className:"text-gray-700",children:["You still have ",o.jsx("span",{className:"font-semibold text-[#C89212]",children:$})," votes remaining."]})]}),G&&o.jsxs("div",{className:"flex items-center",children:[o.jsx(Or,{className:"h-5 w-5 text-[#1E5461] mr-2"}),o.jsx("span",{className:"text-gray-700",children:"All votes allocated! You can now submit your votes."})]})]}),o.jsx("button",{onClick:l,className:`py-3 px-6 rounded-lg font-medium cursor-pointer ${G?"bg-[#1E5461] hover:bg-[#173B65] text-white":"bg-gray-300 text-gray-600 cursor-not-allowed"}`,disabled:!G,children:"Submit Votes"})]})}),o.jsx(Bn,{isOpen:H,onClose:_t,title:"Suggest a Feature",maxWidth:"max-w-lg",children:o.jsxs("form",{onSubmit:kt,className:"space-y-4",children:[o.jsxs("div",{className:"bg-[#1E5461]/10 border border-[#1E5461]/30 text-sm text-[#1E5461] rounded-md px-3 py-2",children:["All suggested features will be reviewed for ",o.jsx("strong",{children:"future sessions"}),".",o.jsx("br",{}),"Suggestions will not be added to the current session."]}),ye&&o.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 text-sm rounded-md px-3 py-2",children:ye}),$e&&o.jsx("div",{className:"bg-green-50 border border-green-200 text-green-700 text-sm rounded-md px-3 py-2",children:"Thank you! Your suggestion has been recorded."}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Feature title"}),o.jsx("input",{type:"text",value:ie,onChange:_e=>ge(_e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md",placeholder:"Give your feature a name",disabled:de||$e})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"What problem would this solve? (optional)"}),o.jsx("textarea",{value:ve,onChange:_e=>I(_e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md",rows:4,placeholder:"Share a few details so we understand the request.",disabled:de||$e})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"What would it do? (optional)"}),o.jsx("textarea",{value:V,onChange:_e=>Ae(_e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md",rows:3,placeholder:"Describe the functionality or outcome users would experience.",disabled:de||$e})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"How would it work? (optional)"}),o.jsx("textarea",{value:X,onChange:_e=>re(_e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md",rows:3,placeholder:"Share any ideas on workflow, technical approach, or integration.",disabled:de||$e})]}),o.jsxs("div",{className:"flex justify-end gap-2",children:[o.jsx(nt,{type:"button",variant:"secondary",onClick:_t,disabled:de,children:"Close"}),!$e&&o.jsxs(nt,{type:"submit",variant:"primary",disabled:de,className:"flex items-center",children:[de&&o.jsx(Po,{className:"h-4 w-4 animate-spin mr-2"}),"Submit Suggestion"]})]})]})})]})});function mv({defaultVotesPerUser:e=10,adminMode:t=!1,resultsMode:r=!1}){const{currentSession:n,currentUser:s,setCurrentUser:i,setCurrentSession:l,refreshSessions:u,isSystemAdmin:d,isAdmin:m,isStakeholder:f}=Fi(),p=$s(),y=async()=>{try{await ze.auth.signOut()}catch{}try{l(null)}catch{}i(null);try{localStorage.removeItem("voting_system_current_session"),localStorage.removeItem("azureDevOpsAuthInProgress"),sessionStorage.removeItem("oauth_return_path"),sessionStorage.removeItem("oauth_action")}catch{}p("/login",{replace:!0})};v.useEffect(()=>{const Y=new URLSearchParams(window.location.search),me=Y.has("code")||Y.has("error"),Ce=localStorage.getItem("voting_system_current_session");!n&&!me&&!Ce&&p("/sessions")},[n,p]);const x=v.useMemo(()=>{const Y=new URLSearchParams(window.location.search);return Y.has("code")||Y.has("error")},[]),[b,j]=v.useState([]),[S,k]=v.useState(!0),[C,N]=v.useState(fZ),[O,P]=v.useState(r?"results":t||x?"admin":"voting"),[T,D]=v.useState(t||x||r),[q,F]=v.useState(null),[K,B]=v.useState(!1),[Q,oe]=v.useState(null),[ae,J]=v.useState({...uZ,votesPerUser:e}),[H,ne]=v.useState(dZ),[ie,ge]=v.useState(F2()),[ve,I]=v.useState([]),[V,Ae]=v.useState([]),[X,re]=v.useState([]),[de,xe]=v.useState(!1),[ye,U]=v.useState(null),[$e,Ze]=v.useState(null),[Z,Pe]=v.useState(!1),[Ve,ft]=v.useState([]),[gt,Ct]=v.useState([]),[_t,kt]=v.useState(d?"system":"session"),[$,G]=v.useState({}),[ue,_e]=v.useState(0),[be,je]=v.useState({showReset:!1,showResetAll:!1,showDeleteSession:!1,targetId:null}),[Fe,ke]=v.useState(!1),Ke=v.useRef(!1),ct=v.useMemo(()=>ae.useAutoVotes?Math.max(1,Math.floor(b.length/2)):ae.votesPerUser,[ae.useAutoVotes,ae.votesPerUser,b.length]),ir=v.useRef(!1);v.useEffect(()=>{if(ir.current){console.log("OAuth processing already in progress, skipping...");return}(async()=>{const me=new URLSearchParams(window.location.search),Ce=me.has("code")||me.has("error");if(Ce&&!n){console.log("OAuth callback detected, waiting for session to load..."),localStorage.getItem("voting_system_current_session")&&console.log("Found stored session ID, waiting for SessionContext to restore it...");return}if(localStorage.getItem("azureDevOpsAuthInProgress")&&localStorage.removeItem("azureDevOpsAuthInProgress"),!(!Ce||Ke.current)){if(!n){console.log("No session available yet, waiting...");return}ir.current=!0,Ke.current=!0,console.log("Processing OAuth callback with session:",n.id);try{const tt=await QX();if(tt){const We=new Date(Date.now()+tt.expiresIn*1e3).toISOString(),St={...H,accessToken:tt.accessToken,refreshToken:tt.refreshToken,tokenExpiresAt:We,enabled:!0,clientId:Is.clientId,tenantId:Is.tenantId};await El(n.id,St),ne(St);const bt=sessionStorage.getItem("oauth_return_path")||"/admin";sessionStorage.removeItem("oauth_return_path"),console.log("OAuth successful, navigating to:",bt),p(bt,{replace:!0})}}catch(tt){console.error("OAuth callback error:",tt),U("Failed to authenticate with Azure DevOps");const We="/admin";sessionStorage.removeItem("oauth_return_path"),p(We,{replace:!0})}finally{ir.current=!1}}})()},[n,p,H]);const Mt=v.useCallback(Y=>{localStorage.setItem("azureDevOpsAuthInProgress","true"),Y&&sessionStorage.setItem("oauth_action",Y),sessionStorage.getItem("oauth_return_path")||sessionStorage.setItem("oauth_return_path","/admin"),XX()},[]),Et=v.useCallback(async Y=>{if(!Y.accessToken||!Y.refreshToken||!Y.tokenExpiresAt)throw new Error("Not authenticated");if(JX(Y.tokenExpiresAt)){const me=await BX(Y.refreshToken),Ce=new Date(Date.now()+me.expiresIn*1e3).toISOString(),Oe={...Y,accessToken:me.accessToken,tokenExpiresAt:Ce};return n&&(await El(n.id,Oe),ne(Oe)),me.accessToken}return Y.accessToken},[n]),Qt=v.useCallback(async()=>{if(!n)return[];const[Y,me]=await Promise.all([Ua(n.id),Ll(n.id)]);return Y.map(Ce=>{const tt=me.filter(St=>St.feature_id===Ce.id).map(St=>({userId:St.user_id,name:St.user_name,email:St.user_email,voteCount:St.vote_count})),We=tt.reduce((St,bt)=>St+bt.voteCount,0);return{id:Ce.id,title:Ce.title,description:Ce.description,epic:Ce.epic,state:Ce.state,areaPath:Ce.area_path,tags:Ce.tags||[],azureDevOpsId:Ce.azure_devops_id,azureDevOpsUrl:Ce.azure_devops_url,votes:We,voters:tt}})},[n]),Tt=v.useCallback(async()=>{if(n)try{const Y=await j5(n.id);ft(Y)}catch(Y){console.error("Error loading feature suggestions:",Y)}},[n]),Wt=v.useCallback(async()=>{if(n)try{const Y=await oa(),me=new Date,Ce=Y.filter(Oe=>Oe.id!==n.id&&new Date(Oe.start_date)>me).map(Oe=>({id:Oe.id,title:Oe.title,startDate:Oe.start_date}));Ct(Ce)}catch(Y){console.error("Error loading future sessions:",Y)}},[n]),_r=v.useCallback(Y=>{ft(me=>[Y,...me]),Tt(),Wt()},[Tt,Wt]),er=v.useCallback(async(Y,me)=>{await v5(Y,me),await Tt()},[Tt]),ar=v.useCallback(async Y=>{await x5(Y),await Tt()},[Tt]),Ur=v.useCallback(async(Y,me)=>{await w5(Y,me),await Tt()},[Tt]),xr=v.useCallback(async Y=>{await b5(Y);const me=await Qt();j(me),await Tt()},[Qt,Tt]);v.useEffect(()=>{async function Y(){if(n)try{console.log("Loading data from Supabase for session:",n.id),k(!0);const me=await Qt();console.log(`Loaded ${me.length} features from database`),j(me),console.log("Features with votes loaded:",me.map(Oe=>Oe.title)),J({title:n.title,goal:n.goal,votesPerUser:n.votes_per_user,useAutoVotes:n.use_auto_votes||!1,startDate:n.start_date,endDate:n.end_date,isActive:n.is_active,originalEndDate:n.original_end_date??void 0,endedEarlyBy:n.ended_early_by??void 0,endedEarlyReason:n.ended_early_reason??void 0,endedEarlyDetails:n.ended_early_details??void 0,reopenReason:n.reopen_reason??void 0,reopenDetails:n.reopen_details??void 0,reopenedBy:n.reopened_by??void 0,reopenedAt:n.reopened_at??void 0,productId:n.product_id??null,productName:n.product_name??null,product_id:n.product_id??null,product_name:n.product_name??null});const Ce=await h5(n.id);ne(Ce?{organization:Ce.organization||"newmill",project:Ce.project||"Product",accessToken:Ce.access_token,refreshToken:Ce.refresh_token,tokenExpiresAt:Ce.token_expires_at,tenantId:Ce.tenant_id,clientId:Ce.client_id,enabled:Ce.enabled,workItemType:Ce.work_item_type||"Feature",query:Ce.query,lastSyncTime:Ce.last_sync_time}:{organization:"newmill",project:"Product",enabled:!1,workItemType:"Feature"}),await Tt()}catch(me){console.error("Error loading data:",me),j([])}finally{k(!1)}}Y()},[n==null?void 0:n.id,Tt,Qt]),v.useEffect(()=>{async function Y(){const me=F2();if(ge(me),I([]),Ae([]),re([]),H.enabled&&H.accessToken&&H.project)try{const Ce=await Et(H),Oe={...H,accessToken:Ce},[tt,We,St,bt]=await Promise.all([qX(Oe).catch(xt=>(console.error("Error loading Azure DevOps projects:",xt),me)),D2(Oe),D0(Oe),R2(Oe)]);ge(tt.length>0?tt:me),I(We),Ae(St),re(bt)}catch(Ce){console.error("Error loading filter options:",Ce),ge(me)}}Y()},[H.enabled,H.accessToken,H.project,Et]);const hr=v.useCallback(async(Y,me)=>{if(!(!H.enabled||!H.accessToken))try{const Ce=await Et(H),Oe={...H,accessToken:Ce},tt=Y?await l4(Oe,Y):await D2(Oe);I(tt)}catch(Ce){console.error("Error loading states for work item type:",Ce)}},[H,Et]),At=v.useCallback(async Y=>{if(!H.enabled||!H.accessToken)return{types:[],states:[]};try{const me=await Et(H),Ce={...H,accessToken:me};return await HX(Ce,Y)}catch(me){return console.error("Error fetching types and states for area path:",me),{types:[],states:[]}}},[H,Et]),un=v.useCallback(async Y=>{if(!H.enabled||!H.accessToken)return{types:[],areaPaths:[]};try{const me=await Et(H),Ce={...H,accessToken:me},Oe=await VX(Ce,Y);return Oe.areaPaths.length>0&&Ae(Oe.areaPaths),Oe}catch(me){return console.error("Error fetching types and area paths for states:",me),{types:[],areaPaths:[]}}},[H,Et]),Rn=v.useCallback(async Y=>{if(!H.enabled||!H.accessToken)return{types:[],states:[],areaPaths:[]};try{const me=await Et(H),Ce={...H,accessToken:me},Oe=await KX(Ce,Y);return Oe.states.length>0&&I(Oe.states),Oe.areaPaths.length>0&&Ae(Oe.areaPaths),Oe}catch(me){return console.error("Error fetching types, states, and area paths for tags:",me),{types:[],states:[],areaPaths:[]}}},[H,Et]),kr=v.useCallback(async(Y,me=[],Ce=[])=>{if(!(!H.enabled||!H.accessToken))try{const Oe=await Et(H),tt={...H,accessToken:Oe},We=Y?await GX(tt,Y,me,Ce):await R2(tt);re(We)}catch(Oe){console.error("Error loading tags for type, state, and area path:",Oe)}},[H,Et]),mr=v.useCallback(async(Y,me=[])=>{if(!(!H.enabled||!H.accessToken))try{const Ce=await Et(H),Oe={...H,accessToken:Ce},tt=Y?await WX(Oe,Y,me):await D0(Oe);Ae(tt)}catch(Ce){console.error("Error loading area paths for type and state:",Ce)}},[H,Et]);v.useEffect(()=>{const Y=async()=>{const Ce=hZ(ae.startDate,ae.endDate);if(ae.isActive!==Ce){const Oe={...ae,isActive:Ce};J(Oe);try{n!=null&&n.id&&await Bj(n.id,{title:Oe.title,goal:Oe.goal,votes_per_user:Oe.votesPerUser,start_date:Oe.startDate,end_date:Oe.endDate,is_active:Oe.isActive})}catch(tt){console.error("Error updating voting session status:",tt)}}};Y();const me=setInterval(Y,6e5);return()=>clearInterval(me)},[ae,n==null?void 0:n.id]),v.useEffect(()=>{document.body.style.overflow="",document.body.style.position="",document.body.style.width="",O==="admin"&&(Tt(),Wt())},[O,Tt,Wt]),v.useEffect(()=>(document.body.style.overflow="",()=>{document.body.style.overflow=""}),[]);const Ft=v.useCallback(async(Y=H)=>{if(!Y.organization||!Y.project||!n){U("Organization and project name are required");return}try{xe(!0),U(null);const me=await Et(Y),Ce={...Y,accessToken:me},Oe=await $2(Ce),tt=M2(Oe);for(const Me of tt){const Vt=(await Ua(n.id)).find(he=>he.azure_devops_id===Me.azureDevOpsId),or=hv(Me.description),A=Bf(or,300);Vt?await Eg(Vt.id,{title:Me.title,description:A,epic:Me.epic||null,state:Me.state,areaPath:Me.areaPath,tags:Me.tags,azure_devops_id:Me.azureDevOpsId,azure_devops_url:Me.azureDevOpsUrl}):await Cg({session_id:n.id,title:Me.title,description:A,epic:Me.epic||null,state:Me.state,areaPath:Me.areaPath,tags:Me.tags,azure_devops_id:Me.azureDevOpsId,azure_devops_url:Me.azureDevOpsUrl})}const We=await Ua(n.id),St=await Ll(n.id),bt=We.map(Me=>{const Vt=St.filter(A=>A.feature_id===Me.id).map(A=>({userId:A.user_id,name:A.user_name,email:A.user_email,voteCount:A.vote_count})),or=Vt.reduce((A,he)=>A+he.voteCount,0);return{id:Me.id,title:Me.title,description:Me.description,epic:Me.epic,state:Me.state,areaPath:Me.area_path,tags:Me.tags||[],azureDevOpsId:Me.azure_devops_id,azureDevOpsUrl:Me.azure_devops_url,votes:or,voters:Vt}});j(bt);const xt={...Ce,lastSyncTime:new Date().toISOString()};await El(n.id,xt),ne(xt)}catch(me){console.error("Azure DevOps sync error:",me),me instanceof Error&&me.message==="Not authenticated"?(U("Please authenticate with Azure DevOps"),Mt()):U("Failed to fetch features from Azure DevOps. Please try reconnecting.")}finally{xe(!1)}},[H,n,Et,Mt]),qt=v.useCallback(async()=>{if(!H.organization||!H.project){U("Organization and project name are required");return}try{xe(!0),U(null);const Y=await Et(H),me={...H,accessToken:Y},Ce=await $2(me),tt=M2(Ce).map(We=>({...We,description:Bf(hv(We.description),300)}));Ze(tt),Pe(!0)}catch(Y){console.error("Azure DevOps preview error:",Y),Y instanceof Error&&Y.message==="Not authenticated"?(U("Please authenticate with Azure DevOps"),Mt()):U("Failed to fetch features from Azure DevOps. Please try reconnecting.")}finally{xe(!1)}},[H,Et,Mt]),Nr=v.useCallback(async(Y=!1)=>{if(!(!$e||!n))try{if(xe(!0),Y){const We=await Ua(n.id);for(const St of We)await Uj(St.id)}for(const We of $e){const bt=(await Ua(n.id)).find(Qr=>Qr.azure_devops_id===We.azureDevOpsId),xt=hv(We.description),Me=Bf(xt,300);bt?await Eg(bt.id,{title:We.title,description:Me,epic:We.epic||null,state:We.state,areaPath:We.areaPath,tags:We.tags,azure_devops_id:We.azureDevOpsId,azure_devops_url:We.azureDevOpsUrl}):await Cg({session_id:n.id,title:We.title,description:Me,epic:We.epic||null,state:We.state,areaPath:We.areaPath,tags:We.tags,azure_devops_id:We.azureDevOpsId,azure_devops_url:We.azureDevOpsUrl})}const me=await Ua(n.id),Ce=await Ll(n.id),Oe=me.map(We=>{const bt=Ce.filter(Me=>Me.feature_id===We.id).map(Me=>({userId:Me.user_id,name:Me.user_name,email:Me.user_email,voteCount:Me.vote_count})),xt=bt.reduce((Me,Qr)=>Me+Qr.voteCount,0);return{id:We.id,title:We.title,description:We.description,epic:We.epic,state:We.state,areaPath:We.area_path,tags:We.tags||[],azureDevOpsId:We.azure_devops_id,azureDevOpsUrl:We.azure_devops_url,votes:xt,voters:bt}});j(Oe);const tt={...H,lastSyncTime:new Date().toISOString()};await El(n.id,tt),ne(tt)}catch(me){console.error("Azure DevOps sync error:",me),U("Failed to sync features from Azure DevOps.")}finally{xe(!1),Ze(null)}},[$e,n,H]),Cr=v.useCallback(async()=>{if(n)try{const Y={organization:H.organization||"newmill",project:H.project||"Product",workItemType:H.workItemType||"Feature",query:H.query,accessToken:void 0,refreshToken:void 0,tokenExpiresAt:void 0,enabled:!1};await El(n.id,Y),ne(Y),U(null)}catch(Y){console.error("Error disconnecting Azure DevOps:",Y),U("Failed to disconnect from Azure DevOps")}},[H,n]);v.useEffect(()=>{(async()=>{const me=sessionStorage.getItem("oauth_action");if(me&&!(!H.enabled||!H.accessToken))try{me==="preview"?await qt():me==="sync"&&await Ft()}finally{sessionStorage.removeItem("oauth_action")}})()},[H.enabled,H.accessToken,qt,Ft]);const Vn=v.useCallback(()=>{D(!0),kt(d?"system":"session"),P("admin")},[d]),Tr=v.useCallback(()=>{D(!1),kt(d?"system":"session"),P("voting")},[d]),qn=v.useCallback(()=>{D(!0),kt("session"),t?O!=="admin"&&P("admin"):O!=="voting"&&P("voting")},[t,O]),Sn=v.useCallback(()=>{d&&(D(!0),kt("system"),t?O!=="admin"&&P("admin"):O!=="voting"&&P("voting"))},[O,d,t]),Er=v.useCallback(async Y=>{if(n)try{const me=await Cg({session_id:n.id,title:Y.title,description:Y.description,epic:Y.epic});j(Ce=>[...Ce,{id:me.id,title:me.title,description:me.description,epic:me.epic,votes:0,voters:[]}]),B(!1)}catch(me){console.error("Error adding feature:",me),alert("Failed to add feature")}},[n]),_n=v.useCallback(async Y=>{try{await Eg(Y.id,{title:Y.title,description:Y.description,epic:Y.epic}),j(me=>me.map(Ce=>Ce.id===Y.id?Y:Ce)),F(null)}catch(me){console.error("Error updating feature:",me),alert("Failed to update feature")}},[]),gs=v.useCallback(async Y=>{try{await Uj(Y),j(me=>me.filter(Ce=>Ce.id!==Y))}catch(me){console.error("Error deleting feature:",me),alert("Failed to delete feature")}},[]),Ht=v.useCallback(Y=>{je(me=>({...me,showReset:!0,showResetAll:!1,showDeleteSession:!1,targetId:Y}))},[]),Hn=v.useCallback(async()=>{const Y=be.targetId;if(!(!Y||!n))try{await i5(n.id,Y);const me=await Qt();j(me)}catch(me){console.error("Error resetting votes:",me),alert("Failed to reset votes")}},[be.targetId,n,Qt]),Fs=v.useCallback(()=>{je(Y=>({...Y,showReset:!1,showResetAll:!0,showDeleteSession:!1,targetId:null}))},[]),dn=v.useCallback(()=>{je(Y=>({...Y,showReset:!1,showResetAll:!1,showDeleteSession:!0,targetId:null}))},[]),$n=v.useCallback(async()=>{if(n){ke(!0);try{await s5(n.id),l(null);try{localStorage.removeItem("voting_system_current_session")}catch{}await u(),p("/sessions",{replace:!0})}catch(Y){console.error("Error deleting session:",Y),alert("Failed to delete session. Please try again.")}finally{ke(!1),je(Y=>({...Y,showDeleteSession:!1}))}}},[n,p,l,u]),Xt=v.useCallback(async()=>{if(n)try{await f5(n.id);const Y=await Qt();j(Y)}catch(Y){console.error("Error resetting all votes:",Y),alert("Failed to reset all votes")}},[n,Qt]),kn=v.useCallback((Y,me)=>{if(!s||!ae.isActive)return;const Ce=$[Y]||0;let Oe=Ce;if(me)if(ue<ct)Oe=Ce+1;else return;else if(Ce>0)Oe=Ce-1;else return;G(tt=>{const We={...tt};return Oe===0?delete We[Y]:We[Y]=Oe,We}),_e(tt=>me?tt+1:tt-1)},[s,$,ue,ae.isActive,ct]),wr=v.useCallback(async()=>{if(!(!s||!ae.isActive||!n)&&!(ue<ct))try{for(const[Oe,tt]of Object.entries($))tt>0&&await u5({session_id:n.id,feature_id:Oe,user_id:s.id,user_name:s.name,user_email:s.email,vote_count:tt});const Y=await Ua(n.id),me=await Ll(n.id),Ce=Y.map(Oe=>{const We=me.filter(bt=>bt.feature_id===Oe.id).map(bt=>({userId:bt.user_id,name:bt.user_name,email:bt.user_email,voteCount:bt.vote_count})),St=We.reduce((bt,xt)=>bt+xt.voteCount,0);return{id:Oe.id,title:Oe.title,description:Oe.description,epic:Oe.epic,state:Oe.state,areaPath:Oe.area_path,tags:Oe.tags||[],azureDevOpsId:Oe.azure_devops_id,azureDevOpsUrl:Oe.azure_devops_url,votes:St,voters:We}});j(Ce),P("thankyou")}catch(Y){console.error("Error submitting votes:",Y),alert("Failed to submit votes. Please try again.")}},[s,n,ue,$,ae.isActive,ct]),Br=v.useCallback(async Y=>{var St,bt;console.log("handleUpdateVotingSession called with:",Y),console.log("updatedSession.productId:",Y.productId),console.log("updatedSession.product_id:",Y.product_id);const me={title:Y.title,goal:Y.goal,votes_per_user:Y.votesPerUser,start_date:Y.startDate,end_date:Y.endDate,is_active:Y.isActive,use_auto_votes:Y.useAutoVotes,product_id:Y.product_id??null,product_name:null};console.log("baseUpdates.product_id:",me.product_id);const Ce={},Oe=(xt,Me)=>{xt!==void 0&&(Ce[Me]=xt)};Oe(Y.originalEndDate,"original_end_date"),Oe(Y.endedEarlyBy,"ended_early_by"),Oe(Y.endedEarlyReason,"ended_early_reason"),Oe(Y.endedEarlyDetails,"ended_early_details"),Oe(Y.reopenReason,"reopen_reason"),Oe(Y.reopenDetails,"reopen_details"),Oe(Y.reopenedBy,"reopened_by"),Oe(Y.reopenedAt,"reopened_at");const tt={...me,...Ce};console.log("Full updates being sent to database:",tt),console.log("product_id in fullUpdates:",tt.product_id);const We=async xt=>{console.log("runUpdate called with updates:",xt),console.log("product_id in updates:",xt.product_id),n!=null&&n.id?(console.log("Updating session by ID:",n.id),await Bj(n.id,xt)):(console.log("Updating session without ID"),await p5(xt))};try{await We(tt),console.log("Database update completed successfully"),J(Y),n!=null&&n.id&&l({...n,title:me.title??n.title,goal:me.goal??n.goal,votes_per_user:me.votes_per_user??n.votes_per_user,use_auto_votes:me.use_auto_votes??n.use_auto_votes,start_date:me.start_date??n.start_date,end_date:me.end_date??n.end_date,is_active:me.is_active??n.is_active,product_id:me.product_id!==void 0?me.product_id??null:Y.product_id??n.product_id??null,product_name:null,original_end_date:Ce.original_end_date??n.original_end_date??null,ended_early_by:Ce.ended_early_by??n.ended_early_by??null,ended_early_reason:Ce.ended_early_reason??n.ended_early_reason??null,ended_early_details:Ce.ended_early_details??n.ended_early_details??null,reopen_reason:Ce.reopen_reason??n.reopen_reason??null,reopen_details:Ce.reopen_details??n.reopen_details??null,reopened_by:Ce.reopened_by??n.reopened_by??null,reopened_at:Ce.reopened_at??n.reopened_at??null})}catch(xt){const Me=((bt=(St=xt==null?void 0:xt.message)==null?void 0:St.toLowerCase)==null?void 0:bt.call(St))??"",Qr=Me.includes("column")&&(Me.includes("reopen_reason")||Me.includes("reopen_details")||Me.includes("reopened_by")||Me.includes("reopened_at")||Me.includes("original_end_date")||Me.includes("ended_early_by")||Me.includes("ended_early_reason")||Me.includes("ended_early_details")),Vt=Me.includes("product_name")||Me.includes('"product_name"'),or=Me.includes("product_id")||Me.includes('"product_id"');if(Qr||Vt||or){console.warn("[FeatureVoting] Voting session metadata/product columns missing, falling back to basic update.",xt);try{const A={...me};Vt&&delete A.product_name,or&&delete A.product_id,await We(A),J(Y),n!=null&&n.id&&l({...n,title:A.title??n.title,goal:A.goal??n.goal,votes_per_user:A.votes_per_user??n.votes_per_user,use_auto_votes:A.use_auto_votes??n.use_auto_votes,start_date:A.start_date??n.start_date,end_date:A.end_date??n.end_date,is_active:A.is_active??n.is_active,product_id:A.product_id!==void 0?A.product_id??null:Y.productId??n.product_id??null,product_name:null,original_end_date:Y.originalEndDate??n.original_end_date??null,ended_early_by:Y.endedEarlyBy??n.ended_early_by??null,ended_early_reason:Y.endedEarlyReason??n.ended_early_reason??null,ended_early_details:Y.endedEarlyDetails??n.ended_early_details??null,reopen_reason:Y.reopenReason??n.reopen_reason??null,reopen_details:Y.reopenDetails??n.reopen_details??null,reopened_by:Y.reopenedBy??n.reopened_by??null,reopened_at:Y.reopenedAt??n.reopened_at??null})}catch(A){console.error("Error updating voting session (fallback):",A),alert("Failed to update voting session settings")}}else console.error("Error updating voting session:",xt),alert("Failed to update voting session settings")}},[n,l]),ys=v.useCallback(async Y=>{if(n){ne(Y);try{await El(n.id,{organization:Y.organization,project:Y.project,accessToken:Y.accessToken,refreshToken:Y.refreshToken,tokenExpiresAt:Y.tokenExpiresAt,tenantId:Y.tenantId,clientId:Y.clientId,enabled:Y.enabled,workItemType:Y.workItemType,query:Y.query,lastSyncTime:Y.lastSyncTime})}catch(me){console.error("Error saving config:",me)}}},[n]),Ls=v.useCallback(()=>{n?p("/results"):P("results")},[n,p]),Si=v.useMemo(()=>{switch(O){case"voting":return o.jsx(SZ,{features:b,currentUser:s,pendingVotes:$,pendingUsedVotes:ue,onVote:kn,onSubmitVotes:wr,onToggleAdmin:Vn,isAdmin:T,votingSession:ae,navigate:p,effectiveVotesPerUser:ct,sessionId:(n==null?void 0:n.id)||"",onLogout:y,onSuggestionSubmitted:_r,isSystemAdmin:d,isSessionAdmin:m,isStakeholder:f});case"results":return o.jsx(wZ,{features:b,onResetVotes:Ht,onResetAllVotes:Fs,onBack:r?()=>p("../admin"):()=>P("admin"),showVotersList:Q,setShowVotersList:oe,votingSession:ae,effectiveVotesPerUser:ct,onLogout:y});case"thankyou":return o.jsx(bZ,{navigate:p,votingSession:ae});case"admin":default:return t?o.jsx(cZ,{features:b,onAddFeature:Er,onUpdateFeature:_n,onDeleteFeature:gs,onShowResults:Ls,onRequestDeleteSession:dn,isDeletingSession:Fe,showAddForm:K,setShowAddForm:B,editingFeature:q,setEditingFeature:F,onLogout:y,onShowVoterView:Tr,votingSession:ae,azureDevOpsConfig:H,onUpdateAzureDevOpsConfig:ys,onPreviewAzureDevOpsFeatures:qt,onDisconnectAzureDevOps:Cr,isFetchingAzureDevOps:de,azureFetchError:ye,onInitiateOAuth:Mt,availableStates:ve,availableAreaPaths:V,availableTags:X,previewFeatures:$e,showPreviewModal:Z,setShowPreviewModal:Pe,onConfirmSync:Nr,onUpdateVotingSession:Br,onFetchStatesForType:hr,onFetchAreaPathsForTypeAndState:mr,onFetchTagsForTypeStateAndAreaPath:kr,onFetchTypesAndStatesForAreaPath:At,onFetchTypesAndStatesForTags:Rn,onFetchTypesAndAreaPathsForStates:un,suggestedFeatures:Ve,otherSessions:gt,onPromoteSuggestion:xr,onMoveSuggestion:Ur,onEditSuggestion:er,onDeleteSuggestion:ar,adminPerspective:_t,projectOptions:ie}):o.jsxs("div",{className:"max-w-3xl mx-auto text-center py-20 px-6",children:[o.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 rounded-full bg-[#2d4660]/10 text-[#2d4660] mb-6",children:o.jsx(Hr,{className:"h-8 w-8"})}),o.jsx("h2",{className:"text-2xl font-semibold text-[#2d4660] mb-4",children:"Admin tools live on the Admin Dashboard"}),o.jsx("p",{className:"text-gray-600 mb-6",children:"You are viewing the voting experience. To manage sessions, stakeholders, or Azure DevOps connections, open the Admin dashboard from the Admin application."}),o.jsx(nt,{variant:"primary",onClick:()=>p("/admin"),children:"Go to Admin Dashboard"})]})}},[O,b,s,$,ue,kn,wr,Vn,T,ae,Ht,Fs,Q,oe,Er,_n,gs,K,B,q,F,H,ys,Ft,qt,Cr,de,ye,Mt,$e,Z,Pe,Nr,p,ct,t,ve,V,X,hr,n,Tr,_r,Ve,gt,xr,Ur,er,ar,_t,ie,Ls]);return n?S?o.jsx("div",{className:"min-h-screen w-full bg-gray-50 flex items-center justify-center",children:o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-[#2d4660] mx-auto mb-4"}),o.jsx("p",{className:"text-gray-600",children:"Loading..."})]})}):!T&&O!=="voting"&&O!=="thankyou"?o.jsx("div",{className:"min-h-screen w-full bg-gray-50 flex items-center justify-center",children:o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-[#2d4660] mx-auto mb-4"}),o.jsx("p",{className:"text-gray-600",children:"Loading voting experience..."})]})}):o.jsxs("div",{className:"w-full bg-gray-50 text-gray-900 font-sans min-h-screen flex flex-col",children:[o.jsx("div",{className:"flex-grow",children:Si}),o.jsx(m4,{currentRole:T?_t==="system"?"system-admin":"session-admin":"stakeholder",onSelectStakeholder:T?void 0:Tr,onSelectSessionAdmin:T||d?qn:void 0,onSelectSystemAdmin:d?Sn:void 0,showRoleToggle:d||T&&_t==="system"}),o.jsx(Wf,{show:be.showReset,title:"Reset Votes",message:"Are you sure you want to reset all votes for this feature? This will remove all voting data for this feature.",onConfirm:Hn,onCancel:()=>je(Y=>({...Y,showReset:!1})),confirmText:"Reset",type:"reset"}),o.jsx(Wf,{show:be.showResetAll,title:"Reset All Votes",message:"Are you sure you want to reset all votes for all features? This will remove all voting data and cannot be undone.",onConfirm:Xt,onCancel:()=>je(Y=>({...Y,showResetAll:!1})),confirmText:"Reset All",type:"reset"}),o.jsx(Wf,{show:be.showDeleteSession,title:"Delete Voting Session",message:"This will permanently delete the current voting session for all admins and stakeholders. Votes, notes, and settings for this session will be removed. This action cannot be undone.",onConfirm:$n,onCancel:()=>je(Y=>({...Y,showDeleteSession:!1})),confirmText:Fe?"Deleting":"Delete Session",type:"delete"})]}):o.jsx("div",{className:"min-h-screen w-full bg-gray-50 flex items-center justify-center",children:o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-[#2d4660] mx-auto mb-4"}),o.jsx("p",{className:"text-gray-600",children:"Loading session..."})]})})}function _Z(){const{currentUser:e,setCurrentSession:t,refreshSessions:r,setCurrentUser:n}=Fi(),s=$s(),[i,l]=v.useState(!0),[u,d]=v.useState([]),[m,f]=v.useState({}),[p,y]=v.useState({}),[x,b]=v.useState({}),[j,S]=v.useState(!1),[k,C]=v.useState("admin"),[N,O]=v.useState(!1),P=v.useRef(null),[T,D]=v.useState({}),[q,F]=v.useState({}),[K,B]=v.useState(!1),[Q,oe]=v.useState(!0),[ae,J]=v.useState({title:"",goal:"",votesPerUser:10,useAutoVotes:!0,startDate:new Date().toISOString().split("T")[0],endDate:new Date(Date.now()+10080*60*1e3).toISOString().split("T")[0]}),[H,ne]=v.useState({}),[ie,ge]=v.useState(!1),[ve,I]=v.useState([]),[V,Ae]=v.useState(""),[X,re]=v.useState(""),[de,xe]=v.useState(null),[ye,U]=v.useState(null),[$e,Ze]=v.useState(!1),[Z,Pe]=v.useState(!1),[Ve,ft]=v.useState(!1),[gt,Ct]=v.useState(null),[_t,kt]=v.useState(!1),[$,G]=v.useState(!1),[ue,_e]=v.useState(!1),[be,je]=v.useState(null),[Fe,ke]=v.useState(!1),[Ke,ct]=v.useState("#2D4660"),ir=v.useRef(null),[Mt,Et]=v.useState(new Set),[Qt,Tt]=v.useState(null),[Wt,_r]=v.useState(null),[er,ar]=v.useState(null),[Ur,xr]=v.useState(null),[hr,At]=v.useState(null),[un,Rn]=v.useState(null),[kr,mr]=v.useState(""),[Ft,qt]=v.useState(null),[Nr,Cr]=v.useState(!1),[Vn,Tr]=v.useState(!1),[qn,Sn]=v.useState("#2D4660");v.useEffect(()=>{(async()=>{if(!K||!e)return;const te=e.tenant_id??e.tenantId??null;if(!te){I([]),Ae(""),Ct("No tenant assigned. Products cannot be loaded.");return}Pe(!0),Ct(null);try{const ce=await Ji(te);console.log(`Loaded ${ce.length} products from products table for tenant ${te}`),console.log("Products:",ce.map(Se=>Se.name));const Ie=ce;I(Ie),Ae(Se=>{var fe;if(Se&&Ie.some(rt=>rt.id===Se))return Se;if(Qt){const we=Ie.find(rt=>{var wt;return((wt=rt.name)==null?void 0:wt.toLowerCase().trim())===Qt.toLowerCase().trim()});if(we!=null&&we.id)return Tt(null),we.id}return((fe=Ie[0])==null?void 0:fe.id)??""}),D(Se=>{const fe={...Se};return Ie.forEach(we=>{we.id&&we.name&&(fe[we.id]=we.name)}),fe}),F(Se=>{const fe={...Se};return Ie.forEach(we=>{we.id&&we.color_hex&&(fe[we.id]=we.color_hex)}),fe})}catch(ce){console.error("Error loading products for modal:",ce),ra!=null&&ra(ce)?Ct("Products are not configured yet. Please create the `products` table in Supabase."):Ct("Unable to load products. You can still create a session without a product tag."),I([]),Ae("")}finally{Pe(!1)}})()},[K,e]);const Er=()=>{const M="ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";let te="";for(let ce=0;ce<8;ce++)te+=M.charAt(Math.floor(Math.random()*M.length));return te},_n=()=>{J({title:"",goal:"",votesPerUser:10,useAutoVotes:!0,startDate:new Date().toISOString().split("T")[0],endDate:new Date(Date.now()+10080*60*1e3).toISOString().split("T")[0]}),ne({}),re(""),xe(null),Ct(null),kt(!1),G(!1),_e(!1),je(null),ke(!1),ct("#2D4660"),Tt(null),oe(!0)},gs=()=>{const M={};ae.title.trim()||(M.title="Session title is required"),ae.goal.trim()||(M.goal="Session goal is required"),ae.useAutoVotes||(ae.votesPerUser<1&&(M.votesPerUser="Votes per user must be at least 1"),ae.votesPerUser>100&&(M.votesPerUser="Votes per user cannot exceed 100"));const te=new Date(ae.startDate);new Date(ae.endDate)<=te&&(M.endDate="End date must be after start date");const Ie=X.trim().length>0;return!gt&&ve.length>0&&!V&&!be&&!_t&&!Ie&&(M.product="Please select a product or enter a new product name"),_t&&!Ie&&(M.product="Please enter a product name or select an existing product"),ne(M),Object.keys(M).length===0},Ht=M=>{const{name:te,value:ce}=M.target;J(Ie=>({...Ie,[te]:te==="votesPerUser"?parseInt(ce)||0:ce})),H[te]&&ne(Ie=>{const Se={...Ie};return delete Se[te],Se})},Hn=async()=>{if(!(!ye||!e)){Ze(!0);try{await IC(ye.id),I(M=>M.filter(te=>te.id!==ye.id)),D(M=>{const te={...M};return delete te[ye.id],te}),F(M=>{const te={...M};return delete te[ye.id],te}),V===ye.id&&Ae("")}catch(M){console.error("Error deleting product:",M),alert("Failed to delete product. Please try again.")}finally{Ze(!1),U(null)}}},Fs=async M=>{if(M.preventDefault(),!!e&&gs()){ge(!0);try{const te=Er(),ce=e.tenant_id??e.tenantId??null;let Ie=V&&V.trim()!==""?V:null;const Se=X.trim(),fe=Se.length>0,we=V&&V.trim()!=="";console.log("Product creation check:",{pendingProduct:be,newProductName:Se,hasNewProductName:fe,selectedProductId:V,hasSelectedProduct:we});let rt=null,wt=null;if(be?(rt=be.name,wt=be.color,console.log("Using pendingProduct:",rt)):fe&&(rt=Se,wt=de,console.log("Using newProductName:",rt)),rt){console.log("Will create/find product:",rt);const Re=ve.find(ut=>ut.name.toLowerCase().trim()===rt.toLowerCase().trim());if(Re)console.log("Product already exists, using:",Re.id),Ie=Re.id;else if(ce){console.log("Creating new product:",rt);try{const ut=await TC(ce,rt,wt||void 0);console.log("Product created successfully:",ut.id),Ie=ut.id,I(Ot=>[...Ot,ut].sort((It,Ir)=>It.name.localeCompare(Ir.name))),D(Ot=>({...Ot,[ut.id]:ut.name})),F(Ot=>{const It={...Ot};return ut.color_hex&&(It[ut.id]=ut.color_hex),It})}catch(ut){console.error("Error creating product during session creation:",ut),ne(Ot=>({...Ot,submit:"Failed to create product. Please try again."})),ge(!1);return}}else{console.error("No tenantId available to create product"),ne(ut=>({...ut,submit:"Unable to create product: No tenant assigned."})),ge(!1);return}}if(Ie&&await $C(Ie)){const ut=T[Ie]||"this product";ne(Ot=>({...Ot,submit:`There is already an active session for ${ut}. Each product can only have one active session at a time.`})),ge(!1);return}const Je=await MC({title:ae.title,goal:ae.goal,votes_per_user:ae.votesPerUser,use_auto_votes:ae.useAutoVotes,start_date:ae.startDate,end_date:ae.endDate,is_active:!0,session_code:te,access_type:"invite-only",product_id:Ie??null,product_name:null});await Vl(Je.id,e.id);const ht=await r5(Je.id)||Je;if(ht.product_id&&ce)try{const ut=(await Ji(ce)).find(Ot=>Ot.id===ht.product_id);ut&&(D(Ot=>({...Ot,[ut.id]:ut.name})),ut.color_hex&&ut.color_hex.trim()!==""&&F(Ot=>({...Ot,[ut.id]:ut.color_hex})))}catch(Re){console.error("Error loading product for lookup:",Re)}t(ht),await r(),await dn(),B(!1),_n(),setTimeout(()=>{s("/admin")},100)}catch(te){console.error("Error creating session from modal:",te),ne(ce=>({...ce,submit:"Failed to create session. Please try again."}))}finally{ge(!1)}}};v.useEffect(()=>{if(!N)return;const M=te=>{P.current&&!P.current.contains(te.target)&&O(!1)};return document.addEventListener("mousedown",M),document.addEventListener("touchstart",M,{passive:!0}),()=>{document.removeEventListener("mousedown",M),document.removeEventListener("touchstart",M)}},[N]),v.useEffect(()=>{if(!e){s("/login");return}dn()},[e]);const dn=async()=>{if(e){l(!0);try{const te=Tv(e.email)||await Vo(e.id);S(te);const ce=te?await oa():await RC(e.id),Ie=(e==null?void 0:e.tenant_id)??(e==null?void 0:e.tenantId)??null;let Se={},fe={};if(Ie)try{const Je=await Ji(Ie);Se=Je.reduce((Pt,ht)=>(ht.id&&ht.name&&(Pt[ht.id]=ht.name),Pt),{}),fe=Je.reduce((Pt,ht)=>(ht.id&&ht.color_hex&&(Pt[ht.id]=ht.color_hex),Pt),{})}catch(Je){console.error("Error loading products for session selection:",Je)}const we={},rt={},wt={};for(const Je of ce){const[Pt,ht,Re,ut]=await Promise.all([te?Promise.resolve(!0):Su(Je.id,e.id),Y0(Je.id,e.email),Ua(Je.id),Ll(Je.id)]);we[Je.id]={isAdmin:Pt,isStakeholder:ht},rt[Je.id]=Re.length;const Ot=ut.some(It=>It.user_id===e.id);wt[Je.id]=Ot}await r(),d(ce),f(we),y(rt),b(wt),D(Se),F(fe)}catch(M){console.error("Error loading sessions:",M)}finally{l(!1)}}},$n=M=>{const te=p[M.id]||0;if(M.use_auto_votes){const ce=Math.max(1,Math.floor(te/2));return{votes:ce,displayText:`${ce} votes/user`,isAuto:!0,formula:`Auto: ${te} ${te===1?"feature":"features"}  2 = ${ce}`}}else return{votes:M.votes_per_user,displayText:`${M.votes_per_user} votes/user`,isAuto:!1,formula:""}},Xt=M=>{t(M);const te=m[M.id];k==="stakeholder"?s("/vote"):te!=null&&te.isAdmin?s("/admin"):s("/vote")},kn=async()=>{try{await ze.auth.signOut()}catch{}try{t(null)}catch{}n(null);try{localStorage.removeItem("voting_system_current_session"),localStorage.removeItem("azureDevOpsAuthInProgress"),sessionStorage.removeItem("oauth_return_path"),sessionStorage.removeItem("oauth_action")}catch{}O(!1),s("/login",{replace:!0})},wr=M=>new Date(M).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}).replace(/\b(\d{4})\b/g,Ie=>`'${Ie.slice(-2)}`),Br=M=>{const te=new Date,ce=new Date(M.start_date),Ie=new Date(M.end_date);return te<ce?{text:"Upcoming",color:"text-yellow-600 bg-yellow-50",icon:Zh}:te>Ie?{text:"Closed",color:"text-gray-600 bg-gray-100",icon:Ut}:{text:"Active",color:"text-[#1E6154] bg-[#1E6154]/10",icon:Or}},ys=M=>[...M].sort((te,ce)=>{const Ie=te!=null&&te.end_date?Date.parse(te.end_date):0;return(ce!=null&&ce.end_date?Date.parse(ce.end_date):0)-Ie}),Ls=(M,te)=>{M.stopPropagation();const ce=`${window.location.origin}/login?session=${te.session_code}`,Ie=encodeURIComponent(`You're invited to vote: ${te.title}`),Se=encodeURIComponent(`Hi,

You've been invited to participate in a feature voting session.

Session: ${te.title}
Goal: ${te.goal}

To get started, copy and paste this link into your browser:

${ce}

Voting Period: ${wr(te.start_date)} - ${wr(te.end_date)}

Best regards,
${e==null?void 0:e.name}`);window.location.href=`mailto:?subject=${Ie}&body=${Se}`},Si=(M,te)=>{M.stopPropagation(),t(te),s("/results")},Y=(M,te)=>{M.stopPropagation(),t(te),s("/users?filter=session-admin")},me=(M,te)=>{M.stopPropagation(),t(te),s("/users?filter=stakeholder")},Ce=()=>{B(!1),_n()};if(i)return o.jsx("div",{className:"min-h-screen w-full bg-gray-50 flex items-center justify-center",children:o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-[#2D4660] mx-auto mb-4"}),o.jsx("p",{className:"text-gray-600",children:"Loading sessions..."})]})});const Oe=ys(u),tt=j?Oe:Oe.filter(M=>{var te;return(te=m[M.id])==null?void 0:te.isAdmin}),We=j?[]:Oe.filter(M=>{var te,ce;return((te=m[M.id])==null?void 0:te.isStakeholder)&&!((ce=m[M.id])!=null&&ce.isAdmin)}),St=j||tt.length>0,bt=j&&k==="system-admin",xt=k==="stakeholder"?Oe.filter(M=>Br(M).text==="Active"):[],Me=k==="admin"||k==="system-admin"?tt:[],Qr=k==="admin"?We:[],Vt=(M,te)=>{const ce={};return M.forEach(Ie=>{const Se=yn(Ie,te);if(!Se||Se==="No Product"||Se.trim()==="")return;const fe=Se.toLowerCase().trim();ce[fe]||(ce[fe]=[]),ce[fe].push(Ie)}),console.log(" Product grouping:",Object.entries(ce).map(([Ie,Se])=>({product:Ie,count:Se.length,sessionTitles:Se.map(fe=>fe.title)}))),ce},or=M=>{Et(te=>{const ce=new Set(te);return ce.has(M)?ce.delete(M):ce.add(M),ce})},A=(M,te,ce,Ie)=>{const Se=Ie||ce||M,fe=async we=>{if(!ce)return;we.stopPropagation();let rt=ve.find(wt=>wt.id===ce);if(!rt){const wt=(e==null?void 0:e.tenant_id)??(e==null?void 0:e.tenantId);if(wt)try{rt=(await Ji(wt)).find(Pt=>Pt.id===ce),rt&&I(Pt=>Pt.find(Re=>Re.id===ce)?Pt:[...Pt,rt].sort((Re,ut)=>Re.name.localeCompare(ut.name)))}catch(Je){console.error("Error loading product for edit:",Je)}}rt&&(Rn(rt),mr(rt.name||""),qt(rt.color_hex||null),Sn(rt.color_hex||"#2D4660"))};return o.jsxs("div",{className:"absolute left-0 px-4 py-1 pr-8 rounded-t-md border-b-0 text-sm font-semibold shadow-sm z-20 flex items-center gap-2 whitespace-nowrap group cursor-pointer",style:{top:"0",left:"-1px",transform:"translateY(-100%)",backgroundColor:te.background,color:te.text,borderColor:te.border,borderWidth:"1px",borderBottomWidth:"0",boxShadow:"0 4px 8px rgba(16,24,40,0.06)",borderTopLeftRadius:"0.9rem",borderTopRightRadius:"0.9rem",overflow:"visible"},onMouseEnter:()=>{ce&&k!=="stakeholder"&&St&&xr(Se)},onMouseLeave:()=>xr(null),onClick:k!=="stakeholder"&&St?fe:void 0,children:[o.jsx(Fv,{className:"h-4 w-4 flex-shrink-0"}),o.jsx("span",{className:"overflow-hidden text-ellipsis flex-1 min-w-0",children:M}),ce&&Ur===Se&&k!=="stakeholder"&&St&&o.jsx("div",{className:"absolute right-2 flex-shrink-0 opacity-80",children:o.jsx(hE,{className:"h-4 w-4",style:{color:te.text}})})]})},he=(M,te,ce,Ie,Se,fe,we,rt=!0,wt)=>o.jsxs(o.Fragment,{children:[rt&&A(te,ce,wt),o.jsxs("div",{className:"p-6 flex flex-col h-full",children:[o.jsxs("div",{className:"flex justify-between items-start mb-4",children:[o.jsx("div",{children:o.jsxs("div",{className:`relative inline-block ${we?"group":""}`,children:[o.jsxs("button",{onClick:Je=>{Je.stopPropagation(),we||Xt(M)},disabled:we,className:`inline-flex items-center px-3 py-1 rounded-full text-xs font-semibold transition-colors ${we?"bg-gray-200 text-gray-500":"bg-[#576C71] text-white hover:bg-[#1E5461]"}`,style:we?{cursor:"not-allowed"}:{},children:[o.jsx(An,{className:"h-3 w-3 mr-1"}),"Vote!"]}),we&&o.jsxs("div",{className:"absolute top-full left-1/2 -translate-x-1/2 mt-2 px-2 py-1 bg-gray-100 text-gray-800 text-xs rounded shadow-sm opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-200 whitespace-nowrap z-10 pointer-events-none",children:["Session Closed",o.jsx("div",{className:"absolute -top-1 left-1/2 -translate-x-1/2 w-2 h-2 bg-gray-100 rotate-45 transform"})]})]})}),o.jsxs("div",{className:"flex items-center gap-1",children:[o.jsxs("div",{className:`relative inline-block ${we?"group":""}`,children:[o.jsxs("button",{onClick:Je=>Y(Je,M),disabled:we,className:`inline-flex items-center px-3 py-1 rounded-full text-xs font-medium transition-colors ${we?"bg-gray-200 text-gray-500":"bg-[#2D4660] text-white hover:bg-[#1D3144]"}`,style:we?{cursor:"not-allowed"}:{},children:[o.jsx(sn,{className:"h-3 w-3 mr-1"}),"Admins"]}),we&&o.jsxs("div",{className:"absolute top-full left-1/2 -translate-x-1/2 mt-2 px-2 py-1 bg-gray-100 text-gray-800 text-xs rounded shadow-sm opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-200 whitespace-nowrap z-10 pointer-events-none",children:["Session Closed",o.jsx("div",{className:"absolute -top-1 left-1/2 -translate-x-1/2 w-2 h-2 bg-gray-100 rotate-45 transform"})]})]}),o.jsxs("div",{className:`relative inline-block ${we?"group":""}`,children:[o.jsxs("button",{onClick:Je=>me(Je,M),disabled:we,className:`inline-flex items-center px-3 py-1 rounded-full text-xs font-medium transition-colors ${we?"bg-gray-200 text-gray-500":"bg-[#1E5461] text-white hover:bg-[#576C71]"}`,style:we?{cursor:"not-allowed"}:{},children:[o.jsx(In,{className:"h-3 w-3 mr-1"}),"Stakeholders"]}),we&&o.jsxs("div",{className:"absolute top-full left-1/2 -translate-x-1/2 mt-2 px-2 py-1 bg-gray-100 text-gray-800 text-xs rounded shadow-sm opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-200 whitespace-nowrap z-10 pointer-events-none",children:["Session Closed",o.jsx("div",{className:"absolute -top-1 left-1/2 -translate-x-1/2 w-2 h-2 bg-gray-100 rotate-45 transform"})]})]})]})]}),o.jsx("h3",{className:"text-lg font-semibold text-[#2D4660] mb-2",children:M.title}),o.jsx("p",{className:"text-sm text-gray-600 mb-4 line-clamp-2",children:M.goal}),o.jsx("div",{className:"flex-1"}),o.jsxs("div",{className:"space-y-2 text-sm text-gray-500",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center",children:[o.jsx(Os,{className:"h-4 w-4 mr-2"}),o.jsxs("span",{children:[wr(M.start_date)," - ",wr(M.end_date)]})]}),o.jsxs("span",{className:`inline-flex items-center ${Ie.text==="Active"?"px-3 py-1 text-sm":"px-2 py-0.5 text-xs"} rounded-full font-medium ${Ie.color}`,children:[o.jsx(Se,{className:`${Ie.text==="Active"?"h-4 w-4":"h-3 w-3"} mr-1`}),Ie.text]})]}),o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center",children:[o.jsx(Es,{className:"h-4 w-4 mr-2"}),o.jsxs("span",{children:[p[M.id]||0," ",p[M.id]===1?"feature":"features"]})]}),o.jsx("span",{className:"text-sm font-medium text-[#2D4660]",children:te})]}),o.jsxs("div",{className:"flex items-start",children:[o.jsx(An,{className:"h-4 w-4 mr-2 mt-0.5 flex-shrink-0"}),o.jsxs("div",{className:"flex-1 flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center",children:[o.jsx("span",{className:"break-words",children:fe.displayText}),fe.isAuto&&o.jsxs("div",{className:"group relative ml-1 mt-0.5",children:[o.jsx(mf,{className:"h-4 w-4 text-blue-500 cursor-help"}),o.jsxs("div",{className:"absolute bottom-full left-1/2 -translate-x-1/2 mb-2 px-3 py-2 bg-gray-900 text-white text-xs rounded-lg opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-200 whitespace-nowrap z-10 pointer-events-none",children:[fe.formula,o.jsx("div",{className:"absolute top-full left-1/2 -translate-x-1/2 -mt-1 border-4 border-transparent border-t-gray-900"})]})]})]}),Ie.text!=="Upcoming"&&o.jsxs("button",{onClick:Je=>Si(Je,M),className:"ml-4 inline-flex items-center px-3 py-1 rounded-full text-xs font-medium bg-[#C89212] text-white hover:bg-[#E0A814] transition-colors cursor-pointer flex-shrink-0",children:[o.jsx(Mf,{className:"h-3 w-3 mr-1"}),Ie.text==="Closed"?"Final Results":"Current Results"]})]})]})]}),o.jsx("div",{className:"mt-4 pt-4 border-t border-gray-200",children:o.jsxs("div",{className:`relative inline-block w-full ${we?"group":""}`,children:[o.jsxs("button",{onClick:Je=>Ls(Je,M),disabled:we,className:`w-full flex items-center justify-center px-3 py-2 rounded-md transition-colors ${we?"bg-gray-200 text-gray-500":"bg-blue-50 hover:bg-blue-100"}`,style:we?{cursor:"not-allowed"}:{},children:[o.jsx(Wu,{className:`h-4 w-4 mr-2 ${we?"text-gray-500":"text-blue-600"}`}),o.jsx("span",{className:`text-sm font-medium ${we?"text-gray-500":"text-blue-600"}`,children:"Email Invite to Stakeholders"})]}),we&&o.jsxs("div",{className:"absolute top-full left-1/2 -translate-x-1/2 mt-2 px-2 py-1 bg-gray-100 text-gray-800 text-xs rounded shadow-sm opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-200 whitespace-nowrap z-10 pointer-events-none",children:["Session Closed",o.jsx("div",{className:"absolute -top-1 left-1/2 -translate-x-1/2 w-2 h-2 bg-gray-100 rotate-45 transform"})]})]})})]})]});return o.jsxs("div",{className:"container mx-auto p-4 max-w-6xl min-h-screen pb-8",children:[o.jsx("div",{className:"hidden md:flex md:justify-center mb-2",children:o.jsx("img",{src:"https://www.steeldynamics.com/wp-content/uploads/2024/05/New-Millennium-color-logo1.png",alt:"New Millennium Building Systems Logo",className:"-mt-4",style:{height:"96px",width:"auto"}})}),o.jsxs("div",{className:"flex justify-between items-center mb-6",children:[o.jsxs("div",{className:"flex items-center",children:[o.jsx("img",{src:"https://media.licdn.com/dms/image/C4D0BAQEC3OhRqehrKg/company-logo_200_200/0/1630518354793/new_millennium_building_systems_logo?e=2147483647&v=beta&t=LM3sJTmQZet5NshZ-RNHXW1MMG9xSi1asp-VUeSA9NA",alt:"New Millennium Building Systems Logo",className:"mr-4 md:hidden",style:{width:"40px",height:"40px"}}),o.jsxs("div",{children:[o.jsx("h1",{className:"text-2xl font-bold text-[#2D4660] md:text-3xl",children:"My Voting Sessions"}),o.jsxs("p",{className:"text-sm text-gray-600",children:["Welcome, ",e==null?void 0:e.name,j&&o.jsx("span",{className:"ml-2 inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium bg-purple-100 text-purple-800",children:"System Admin"}),!j&&tt.length>0&&o.jsx("span",{className:"ml-2 inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:"Session Admin"}),!j&&tt.length===0&&We.length>0&&o.jsx("span",{className:"ml-2 inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800",children:"Stakeholder"})]})]})]}),o.jsxs("div",{ref:P,className:"relative z-40 md:justify-end",children:[o.jsxs("div",{className:"hidden md:flex space-x-2",children:[j&&(k==="admin"||k==="system-admin")&&o.jsx(o.Fragment,{children:o.jsxs("button",{onClick:()=>s("/users"),className:"flex items-center px-4 py-2 bg-[#2D4660] text-white rounded-lg hover:bg-[#173B65] transition-colors",children:[o.jsx(In,{className:"h-4 w-4 mr-2"}),"User Management"]})}),(j||tt.length>0)&&(k==="admin"||k==="system-admin")&&o.jsx(o.Fragment,{children:o.jsxs("button",{onClick:()=>{oe(!0),B(!0)},className:"flex items-center px-4 py-2 bg-[#C89212] text-white rounded-lg hover:bg-[#6A4234] transition-colors",children:[o.jsx(cs,{className:"h-4 w-4 mr-2"}),o.jsx("span",{className:"hidden sm:inline",children:"Create Session"}),o.jsx("span",{className:"sm:hidden",children:"Create"})]})}),o.jsxs("button",{onClick:kn,className:"flex items-center px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-colors",children:[o.jsx(xn,{className:"h-4 w-4 mr-2"}),o.jsx("span",{className:"hidden sm:inline",children:"Logout"})]})]}),o.jsx("div",{className:"flex md:hidden justify-end",children:o.jsx("button",{onClick:()=>O(!N),className:"p-2 rounded-md border border-gray-200 bg-white shadow-sm","aria-label":"Open menu",children:o.jsx(Es,{className:"h-5 w-5 text-gray-700"})})}),N&&o.jsx("div",{className:"absolute right-0 mt-2 w-56 bg-white border border-gray-200 rounded-lg shadow-lg md:hidden z-50",children:o.jsxs("div",{className:"py-1",children:[j&&(k==="admin"||k==="system-admin")&&o.jsx(o.Fragment,{children:o.jsxs("button",{onClick:()=>{O(!1),s("/users")},className:"w-full px-3 py-2 flex items-center text-left hover:bg-gray-50",children:[o.jsx(In,{className:"h-4 w-4 mr-2 text-gray-700"}),"User Management"]})}),(j||tt.length>0)&&(k==="admin"||k==="system-admin")&&o.jsx(o.Fragment,{children:o.jsxs("button",{onClick:()=>{O(!1),oe(!0),B(!0)},className:"w-full px-3 py-2 flex items-center text-left hover:bg-gray-50",children:[o.jsx(cs,{className:"h-4 w-4 mr-2 text-gray-700"}),"Create Session"]})}),o.jsxs("button",{onClick:()=>{O(!1),kn()},className:"w-full px-3 py-2 flex items-center text-left hover:bg-gray-50",children:[o.jsx(xn,{className:"h-4 w-4 mr-2 text-gray-700"}),"Logout"]})]})})]})]}),u.length===0?o.jsxs("div",{className:"bg-white rounded-lg shadow-md p-12 text-center",children:[o.jsx(An,{className:"mx-auto h-12 w-12 text-gray-400 mb-4"}),o.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No voting sessions"}),o.jsx("p",{className:"text-sm text-gray-500 mb-6",children:"You are not part of any voting sessions yet."}),j&&o.jsxs("button",{onClick:()=>{oe(!0),B(!0)},className:"inline-flex items-center px-4 py-2 bg-[#2D4660] text-white rounded-lg hover:bg-[#173B65] transition-colors",children:[o.jsx(cs,{className:"h-5 w-5 mr-2"}),"Create Your First Session"]})]}):o.jsxs("div",{className:"space-y-8",children:[k==="stakeholder"&&o.jsxs("div",{children:[o.jsxs("h2",{className:"text-xl font-semibold text-[#2D4660] mb-4 flex items-center",children:[o.jsx(An,{className:"h-5 w-5 mr-2"}),"All Your Voting Sessions"]}),(()=>{const M=xt.filter(fe=>{const we=yn(fe,T);return we&&we!=="No Product"&&we.trim()!==""}),te=xt.filter(fe=>{const we=yn(fe,T);return!we||we==="No Product"||we.trim()===""}),ce=Vt(M,T),Ie=[],Se=[];return Object.entries(ce).forEach(([fe,we])=>{we.length>=2?Ie.push({key:fe,sessions:we}):Se.push(...we)}),o.jsxs("div",{className:"space-y-8",children:[Ie.map(({key:fe,sessions:we})=>{var It,Ir;const rt=Mt.has(fe),wt=rt?we:we.slice(0,3),Je=we.length>3?we.length-3:0,Pt=yn(we[0],T),ht=(It=we[0])!=null&&It.product_id?q[we[0].product_id]:void 0,Re=Qn(Pt,ht),ut=(mt,Kt)=>{const Dt=mt.replace("#",""),br=parseInt(Dt.substring(0,2),16),Dr=parseInt(Dt.substring(2,4),16),Rr=parseInt(Dt.substring(4,6),16);return`rgba(${br}, ${Dr}, ${Rr}, ${Kt})`},Ot=Re.background?ut(Re.background,.1):"#F9FAFB";return o.jsx("div",{className:"relative",style:{marginTop:"50px"},children:o.jsxs("div",{className:"rounded-lg rounded-tl-none border border-gray-200 pt-2 px-6 pb-6 relative overflow-visible",style:{backgroundColor:Ot,borderColor:Re.border||"#E5E7EB"},children:[A(Pt,Re,(Ir=we[0])==null?void 0:Ir.product_id,fe),Je>0&&o.jsx("div",{className:"absolute right-0 z-20 hidden md:block",style:{top:"0",transform:"translateY(calc(-100% - 3px))"},children:o.jsx("button",{onClick:()=>or(fe),className:"flex items-center gap-1 text-sm text-[#2D4660] hover:text-[#173B65] transition-colors cursor-pointer",children:rt?o.jsxs(o.Fragment,{children:["Show Less",o.jsx(On,{className:"h-4 w-4 rotate-180"})]}):o.jsxs(o.Fragment,{children:["Show More (",Je,")",o.jsx(On,{className:"h-4 w-4"})]})})}),St&&k!=="stakeholder"&&o.jsx("div",{className:"absolute z-20 bottom-[-20px] left-1/2 -translate-x-1/2 md:bottom-auto md:left-auto md:translate-x-0 md:right-[-20px] md:top-1/2 md:-translate-y-1/2",children:o.jsx("button",{onClick:mt=>{var br;mt.stopPropagation();const Kt=(br=we[0])==null?void 0:br.product_id,Dt=yn(we[0],T);Kt&&Ae(Kt),Dt&&Dt!=="No Product"&&Tt(Dt),oe(!1),B(!0)},onMouseEnter:()=>_r(fe),onMouseLeave:()=>_r(null),className:"flex items-center justify-center w-10 h-10 rounded-full shadow-md",style:{backgroundColor:Re.background||"#C89212",color:Re.text||"#FFFFFF"},title:`Create new session for ${Pt}`,children:o.jsx(cs,{className:"h-5 w-5"})})}),o.jsx("div",{className:"grid grid-cols-1 gap-0 sm:gap-6 sm:grid-cols-2 lg:grid-cols-3",children:wt.map(mt=>{const Kt=Br(mt),Dt=Kt.text==="Closed",br=Kt.icon,Dr=$n(mt),Rr=x[mt.id],Kn=yn(mt,T),L=mt.product_id?q[mt.product_id]:void 0,Le=Qn(Kn,L);return o.jsx("div",{className:"relative z-10 bg-white overflow-visible shadow-md rounded-lg hover:shadow-lg transition-shadow cursor-pointer mt-6 border",style:{borderColor:Le.border,borderWidth:"1px",opacity:Dt&&hr!==mt.id?.75:1},onMouseEnter:()=>At(mt.id),onMouseLeave:()=>At(null),onClick:()=>Xt(mt),children:o.jsxs("div",{className:"p-6 flex flex-col h-full",children:[o.jsx("div",{className:"flex justify-end items-start mb-4",children:Rr?o.jsxs("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-xs font-medium bg-green-100 text-green-800",children:[o.jsx(Or,{className:"h-3 w-3 mr-1"}),"Voted"]}):Kt.text==="Active"?o.jsxs("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:[o.jsx(Ut,{className:"h-3 w-3 mr-1"}),"Needs Your Vote"]}):null}),o.jsx("h3",{className:"text-lg font-semibold text-[#2D4660] mb-2",children:mt.title}),o.jsx("p",{className:"text-sm text-gray-600 mb-4 line-clamp-2",children:mt.goal}),o.jsx("div",{className:"flex-1"}),o.jsxs("div",{className:"space-y-2 text-sm text-gray-500",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center",children:[o.jsx(Os,{className:"h-4 w-4 mr-2"}),o.jsxs("span",{children:[wr(mt.start_date)," - ",wr(mt.end_date)]})]}),o.jsxs("span",{className:`inline-flex items-center ${Kt.text==="Active"?"px-3 py-1 text-sm":"px-2 py-0.5 text-xs"} rounded-full font-medium ${Kt.color}`,children:[o.jsx(br,{className:`${Kt.text==="Active"?"h-4 w-4":"h-3 w-3"} mr-1`}),Kt.text]})]}),o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center",children:[o.jsx(Es,{className:"h-4 w-4 mr-2"}),o.jsxs("span",{children:[p[mt.id]||0," ",p[mt.id]===1?"feature":"features"," to vote on"]})]}),o.jsx("span",{className:"text-sm font-medium text-[#2D4660]",children:Kn})]}),o.jsxs("div",{className:"flex items-center",children:[o.jsx(An,{className:"h-4 w-4 mr-2"}),o.jsx("span",{children:Dr.displayText}),Dr.isAuto&&o.jsxs("div",{className:"group relative ml-1",children:[o.jsx(mf,{className:"h-4 w-4 text-blue-500 cursor-help"}),o.jsxs("div",{className:"absolute bottom-full left-1/2 -translate-x-1/2 mb-2 px-3 py-2 bg-gray-900 text-white text-xs rounded-lg opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-200 whitespace-nowrap z-10 pointer-events-none",children:[Dr.formula,o.jsx("div",{className:"absolute top-full left-1/2 -translate-x-1/2 -mt-1 border-4 border-transparent border-t-gray-900"})]})]})]})]}),o.jsx("div",{className:"mt-4 pt-4 border-t border-gray-200",children:o.jsxs("button",{onClick:Qe=>{Qe.stopPropagation(),Dt||Xt(mt)},disabled:Dt,className:`w-full flex items-center justify-center px-4 py-2 rounded-lg transition-colors font-medium ${Dt?"bg-gray-100 text-gray-500 cursor-not-allowed":Rr?"bg-gray-100 text-gray-700 hover:bg-gray-200":"bg-[#2D4660] text-white hover:bg-[#173B65]"}`,style:Dt?{cursor:"not-allowed"}:{},children:[o.jsx(An,{className:"h-4 w-4 mr-2"}),Rr?"View or Change Votes":"Cast Your Votes"]})})]})},mt.id)})}),Je>0&&o.jsx("div",{className:"mt-4 md:hidden",children:o.jsx("button",{onClick:()=>or(fe),className:"w-full flex items-center justify-center gap-1 px-4 py-2 text-sm font-medium text-[#2D4660] bg-white hover:bg-gray-50 rounded-md border border-gray-300 transition-colors",children:rt?o.jsxs(o.Fragment,{children:["Show Less",o.jsx(On,{className:"h-4 w-4 rotate-180"})]}):o.jsxs(o.Fragment,{children:["Show More (",Je,")",o.jsx(On,{className:"h-4 w-4"})]})})})]})},fe)}),(Se.length>0||te.length>0)&&o.jsx("div",{className:"grid grid-cols-1 gap-0 sm:gap-6 sm:grid-cols-2 lg:grid-cols-3",children:[...Se,...te].map(fe=>{const we=Br(fe),rt=we.text==="Closed",wt=we.icon,Je=$n(fe),Pt=x[fe.id],ht=yn(fe,T),Re=fe.product_id?q[fe.product_id]:void 0,ut=Qn(ht,Re),Ot=Se.includes(fe);return o.jsxs("div",{className:"relative z-10 bg-white overflow-visible shadow-md rounded-lg rounded-tl-none hover:shadow-lg transition-shadow cursor-pointer mt-6 border",style:{borderColor:ut.border,borderWidth:"1px",opacity:rt&&hr!==fe.id?.75:1},onMouseEnter:()=>At(fe.id),onMouseLeave:()=>At(null),onClick:()=>Xt(fe),children:[A(ht,ut,fe.product_id),Ot&&St&&k!=="stakeholder"&&o.jsx("div",{className:"absolute z-20 bottom-[-20px] left-1/2 -translate-x-1/2 md:bottom-auto md:left-auto md:translate-x-0 md:right-[-20px] md:top-1/2 md:-translate-y-1/2",children:o.jsx("button",{onClick:It=>{It.stopPropagation();const Ir=fe.product_id,mt=yn(fe,T);Ir&&Ae(Ir),mt&&mt!=="No Product"&&Tt(mt),oe(!1),B(!0)},className:"flex items-center justify-center w-10 h-10 rounded-full transition-colors shadow-md hover:shadow-lg",style:{backgroundColor:ut.background||"#C89212",color:ut.text||"#FFFFFF"},onMouseEnter:It=>{const Ir=ut.background||"#C89212";It.currentTarget.style.backgroundColor=Ir,It.currentTarget.style.filter="brightness(0.8)"},onMouseLeave:It=>{It.currentTarget.style.backgroundColor=ut.background||"#C89212",It.currentTarget.style.filter="brightness(1)"},title:`Create new session for ${ht}`,children:o.jsx(cs,{className:"h-5 w-5"})})}),o.jsxs("div",{className:"p-6 flex flex-col h-full",children:[o.jsx("div",{className:"flex justify-end items-start mb-4",children:Pt?o.jsxs("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-xs font-medium bg-green-100 text-green-800",children:[o.jsx(Or,{className:"h-3 w-3 mr-1"}),"Voted"]}):we.text==="Active"?o.jsxs("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:[o.jsx(Ut,{className:"h-3 w-3 mr-1"}),"Needs Your Vote"]}):null}),o.jsx("h3",{className:"text-lg font-semibold text-[#2D4660] mb-2",children:fe.title}),o.jsx("p",{className:"text-sm text-gray-600 mb-4 line-clamp-2",children:fe.goal}),o.jsx("div",{className:"flex-1"}),o.jsxs("div",{className:"space-y-2 text-sm text-gray-500",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center",children:[o.jsx(Os,{className:"h-4 w-4 mr-2"}),o.jsxs("span",{children:[wr(fe.start_date)," - ",wr(fe.end_date)]})]}),o.jsxs("span",{className:`inline-flex items-center ${we.text==="Active"?"px-3 py-1 text-sm":"px-2 py-0.5 text-xs"} rounded-full font-medium ${we.color}`,children:[o.jsx(wt,{className:`${we.text==="Active"?"h-4 w-4":"h-3 w-3"} mr-1`}),we.text]})]}),o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center",children:[o.jsx(Es,{className:"h-4 w-4 mr-2"}),o.jsxs("span",{children:[p[fe.id]||0," ",p[fe.id]===1?"feature":"features"," to vote on"]})]}),o.jsx("span",{className:"text-sm font-medium text-[#2D4660]",children:ht})]}),o.jsxs("div",{className:"flex items-center",children:[o.jsx(An,{className:"h-4 w-4 mr-2"}),o.jsx("span",{children:Je.displayText}),Je.isAuto&&o.jsxs("div",{className:"group relative ml-1",children:[o.jsx(mf,{className:"h-4 w-4 text-blue-500 cursor-help"}),o.jsxs("div",{className:"absolute bottom-full left-1/2 -translate-x-1/2 mb-2 px-3 py-2 bg-gray-900 text-white text-xs rounded-lg opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-200 whitespace-nowrap z-10 pointer-events-none",children:[Je.formula,o.jsx("div",{className:"absolute top-full left-1/2 -translate-x-1/2 -mt-1 border-4 border-transparent border-t-gray-900"})]})]})]})]}),o.jsx("div",{className:"mt-4 pt-4 border-t border-gray-200",children:o.jsxs("button",{onClick:It=>{It.stopPropagation(),rt||Xt(fe)},disabled:rt,className:`w-full flex items-center justify-center px-4 py-2 rounded-lg transition-colors font-medium ${rt?"bg-gray-100 text-gray-500 cursor-not-allowed":Pt?"bg-gray-100 text-gray-700 hover:bg-gray-200":"bg-[#2D4660] text-white hover:bg-[#173B65]"}`,style:rt?{cursor:"not-allowed"}:{},children:[o.jsx(An,{className:"h-4 w-4 mr-2"}),Pt?"View or Change Votes":"Cast Your Votes"]})})]})]},fe.id)})})]})})()]}),(k==="admin"||k==="system-admin")&&o.jsxs(o.Fragment,{children:[k==="admin"&&Qr.length>0&&o.jsxs("div",{children:[o.jsxs("h2",{className:"text-xl font-semibold text-[#2D4660] mb-4 flex items-center",children:[o.jsx(An,{className:"h-5 w-5 mr-2"}),"Your Voting Sessions"]}),o.jsx("div",{className:"grid grid-cols-1 gap-6 sm:grid-cols-2 lg:grid-cols-3",children:Qr.map(M=>{const te=Br(M),ce=te.text==="Closed",Ie=te.icon,Se=$n(M),fe=x[M.id],we=yn(M,T),rt=M.product_id?q[M.product_id]:void 0,wt=Qn(we,rt);return o.jsxs("div",{className:"relative z-10 bg-white overflow-visible shadow-md rounded-lg rounded-tl-none hover:shadow-lg transition-shadow cursor-pointer mt-6 border",style:{borderColor:wt.border,borderWidth:"1px",opacity:ce&&hr!==M.id?.75:1},onMouseEnter:()=>At(M.id),onMouseLeave:()=>At(null),onClick:()=>Xt(M),children:[o.jsxs("div",{className:"absolute left-0 px-4 py-1 rounded-t-md border-b-0 text-sm font-semibold shadow-sm z-20 flex items-center gap-2 whitespace-nowrap overflow-hidden",style:{top:"0",left:"-1px",transform:"translateY(-100%)",backgroundColor:wt.background,color:wt.text,borderColor:wt.border,borderWidth:"1px",borderBottomWidth:"0",boxShadow:"0 4px 8px rgba(16,24,40,0.06)",borderTopLeftRadius:"0.9rem",borderTopRightRadius:"0.9rem"},children:[o.jsx(Fv,{className:"h-4 w-4 flex-shrink-0"}),o.jsx("span",{className:"overflow-hidden text-ellipsis",children:we})]}),o.jsxs("div",{className:"p-6 flex flex-col h-full",children:[o.jsx("div",{className:"flex justify-end items-start mb-4",children:fe?o.jsxs("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-xs font-medium bg-green-100 text-green-800",children:[o.jsx(Or,{className:"h-3 w-3 mr-1"}),"Voted"]}):te.text==="Active"?o.jsxs("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:[o.jsx(Ut,{className:"h-3 w-3 mr-1"}),"Needs Your Vote"]}):null}),o.jsx("h3",{className:"text-lg font-semibold text-[#2D4660] mb-2",children:M.title}),o.jsx("p",{className:"text-sm text-gray-600 mb-4 line-clamp-2",children:M.goal}),o.jsx("div",{className:"flex-1"}),o.jsxs("div",{className:"space-y-2 text-sm text-gray-500",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center",children:[o.jsx(Os,{className:"h-4 w-4 mr-2"}),o.jsxs("span",{children:[wr(M.start_date)," - ",wr(M.end_date)]})]}),o.jsxs("span",{className:`inline-flex items-center ${te.text==="Active"?"px-3 py-1 text-sm":"px-2 py-0.5 text-xs"} rounded-full font-medium ${te.color}`,children:[o.jsx(Ie,{className:`${te.text==="Active"?"h-4 w-4":"h-3 w-3"} mr-1`}),te.text]})]}),o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center",children:[o.jsx(Es,{className:"h-4 w-4 mr-2"}),o.jsxs("span",{children:[p[M.id]||0," ",p[M.id]===1?"feature":"features"," to vote on"]})]}),o.jsx("span",{className:"text-sm font-medium text-[#2D4660]",children:we})]}),o.jsxs("div",{className:"flex items-center",children:[o.jsx(An,{className:"h-4 w-4 mr-2"}),o.jsx("span",{children:Se.displayText}),Se.isAuto&&o.jsxs("div",{className:"group relative ml-1",children:[o.jsx(mf,{className:"h-4 w-4 text-blue-500 cursor-help"}),o.jsxs("div",{className:"absolute bottom-full left-1/2 -translate-x-1/2 mb-2 px-3 py-2 bg-gray-900 text-white text-xs rounded-lg opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-200 whitespace-nowrap z-10 pointer-events-none",children:[Se.formula,o.jsx("div",{className:"absolute top-full left-1/2 -translate-x-1/2 -mt-1 border-4 border-transparent border-t-gray-900"})]})]})]})]}),o.jsx("div",{className:"mt-4 pt-4 border-t border-gray-200",children:o.jsxs("button",{onClick:Je=>{Je.stopPropagation(),ce||Xt(M)},disabled:ce,className:`w-full flex items-center justify-center px-4 py-2 rounded-lg transition-colors font-medium ${ce?"bg-gray-100 text-gray-500 cursor-not-allowed":fe?"bg-gray-100 text-gray-700 hover:bg-gray-200":"bg-[#2D4660] text-white hover:bg-[#173B65]"}`,style:ce?{cursor:"not-allowed"}:{},children:[o.jsx(An,{className:"h-4 w-4 mr-2"}),fe?"View or Change Votes":"Cast Your Votes"]})})]})]},M.id)})})]}),Me.length>0&&o.jsxs("div",{children:[o.jsxs("div",{className:"flex flex-col gap-3 sm:flex-row sm:items-center sm:justify-between mb-4",children:[o.jsxs("h2",{className:"text-xl font-semibold text-[#2D4660] flex items-center",children:[o.jsx(sn,{className:"h-5 w-5 mr-2"}),bt?"All Sessions (System Admin)":"Sessions You Manage"]}),bt&&o.jsxs("p",{className:"text-sm text-gray-600",children:["Showing ",Me.length," total sessions across the organization."]})]}),(()=>{const M=Me.filter(fe=>{const we=yn(fe,T);return we&&we!=="No Product"&&we.trim()!==""}),te=Me.filter(fe=>{const we=yn(fe,T);return!we||we==="No Product"||we.trim()===""}),ce=Vt(M,T),Ie=[],Se=[];return Object.entries(ce).forEach(([fe,we])=>{we.length>=2?Ie.push({key:fe,sessions:we}):Se.push(...we)}),o.jsxs("div",{className:"space-y-8",children:[Ie.map(({key:fe,sessions:we})=>{var It,Ir;const rt=Mt.has(fe),wt=rt?we:we.slice(0,3),Je=we.length>3?we.length-3:0,Pt=yn(we[0],T),ht=(It=we[0])!=null&&It.product_id?q[we[0].product_id]:void 0,Re=Qn(Pt,ht),ut=(mt,Kt)=>{const Dt=mt.replace("#",""),br=parseInt(Dt.substring(0,2),16),Dr=parseInt(Dt.substring(2,4),16),Rr=parseInt(Dt.substring(4,6),16);return`rgba(${br}, ${Dr}, ${Rr}, ${Kt})`},Ot=Re.background?ut(Re.background,.1):"#F9FAFB";return o.jsx("div",{className:"relative",style:{marginTop:"50px"},children:o.jsxs("div",{className:"rounded-lg rounded-tl-none border border-gray-200 pt-2 px-6 pb-6 relative overflow-visible",style:{backgroundColor:Ot,borderColor:Re.border||"#E5E7EB"},children:[A(Pt,Re,(Ir=we[0])==null?void 0:Ir.product_id,fe),Je>0&&o.jsx("div",{className:"absolute right-0 z-20 hidden md:block",style:{top:"0",transform:"translateY(calc(-100% - 3px))"},children:o.jsx("button",{onClick:()=>or(fe),className:"flex items-center gap-1 text-sm text-[#2D4660] hover:text-[#173B65] transition-colors cursor-pointer",children:rt?o.jsxs(o.Fragment,{children:["Show Less",o.jsx(On,{className:"h-4 w-4 rotate-180"})]}):o.jsxs(o.Fragment,{children:["Show More (",Je,")",o.jsx(On,{className:"h-4 w-4"})]})})}),(j||k==="admin"||k==="system-admin")&&o.jsx("div",{className:"absolute z-20 bottom-[-20px] left-1/2 -translate-x-1/2 md:bottom-auto md:left-auto md:translate-x-0 md:right-[-20px] md:top-1/2 md:-translate-y-1/2",children:o.jsx("button",{onClick:mt=>{var br;mt.stopPropagation();const Kt=(br=we[0])==null?void 0:br.product_id,Dt=yn(we[0],T);Kt&&Ae(Kt),Dt&&Dt!=="No Product"&&Tt(Dt),oe(!1),B(!0)},onMouseEnter:()=>_r(fe),onMouseLeave:()=>_r(null),className:"flex items-center justify-center w-10 h-10 rounded-full shadow-md",style:{backgroundColor:Re.background||"#C89212",color:Re.text||"#FFFFFF"},title:`Create new session for ${Pt}`,children:o.jsx(cs,{className:"h-5 w-5"})})}),o.jsxs("div",{className:"grid grid-cols-1 gap-0 sm:gap-6 sm:grid-cols-2 lg:grid-cols-3",children:[wt.map(mt=>{const Kt=Br(mt),Dt=Kt.icon,br=$n(mt),Dr=Kt.text==="Closed",Rr=yn(mt,T),Kn=mt.product_id?q[mt.product_id]:void 0,L=Qn(Rr,Kn);return o.jsx("div",{className:"relative z-10 bg-white overflow-visible shadow-md rounded-lg hover:shadow-lg transition-shadow cursor-pointer mt-6 border",style:{borderColor:L.border,borderWidth:"1px",opacity:Dr&&hr!==mt.id?.75:1},onMouseEnter:()=>At(mt.id),onMouseLeave:()=>At(null),onClick:()=>Xt(mt),children:he(mt,Rr,L,Kt,Dt,br,Dr,!1,mt.product_id)},mt.id)}),we.length===2&&o.jsxs(o.Fragment,{children:[o.jsx("style",{children:`
                                        @keyframes fadeIn {
                                          from {
                                            opacity: 0;
                                          }
                                          to {
                                            opacity: 1;
                                          }
                                        }
                                        @keyframes sparkle {
                                          0% {
                                            opacity: 0.2;
                                            transform: scale(0.6) rotate(0deg);
                                            filter: brightness(0.8);
                                          }
                                          15% {
                                            opacity: 1;
                                            transform: scale(1.4) rotate(120deg);
                                            filter: brightness(1.5);
                                          }
                                          30% {
                                            opacity: 0.3;
                                            transform: scale(0.7) rotate(240deg);
                                            filter: brightness(0.6);
                                          }
                                          45% {
                                            opacity: 1;
                                            transform: scale(1.5) rotate(360deg);
                                            filter: brightness(1.8);
                                          }
                                          60% {
                                            opacity: 0.4;
                                            transform: scale(0.8) rotate(480deg);
                                            filter: brightness(0.7);
                                          }
                                          75% {
                                            opacity: 1;
                                            transform: scale(1.3) rotate(600deg);
                                            filter: brightness(1.6);
                                          }
                                          90% {
                                            opacity: 0.3;
                                            transform: scale(0.65) rotate(720deg);
                                            filter: brightness(0.5);
                                          }
                                          100% {
                                            opacity: 0.2;
                                            transform: scale(0.6) rotate(720deg);
                                            filter: brightness(0.8);
                                          }
                                        }
                                        @keyframes twinkle {
                                          0% {
                                            opacity: 0.1;
                                            transform: scale(0.5);
                                            filter: brightness(0.5);
                                          }
                                          10% {
                                            opacity: 1;
                                            transform: scale(1.6);
                                            filter: brightness(2);
                                          }
                                          20% {
                                            opacity: 0.2;
                                            transform: scale(0.6);
                                            filter: brightness(0.4);
                                          }
                                          35% {
                                            opacity: 1;
                                            transform: scale(1.7);
                                            filter: brightness(2.2);
                                          }
                                          50% {
                                            opacity: 0.15;
                                            transform: scale(0.55);
                                            filter: brightness(0.3);
                                          }
                                          65% {
                                            opacity: 1;
                                            transform: scale(1.5);
                                            filter: brightness(1.9);
                                          }
                                          80% {
                                            opacity: 0.25;
                                            transform: scale(0.7);
                                            filter: brightness(0.6);
                                          }
                                          95% {
                                            opacity: 1;
                                            transform: scale(1.4);
                                            filter: brightness(1.8);
                                          }
                                          100% {
                                            opacity: 0.1;
                                            transform: scale(0.5);
                                            filter: brightness(0.5);
                                          }
                                        }
                                        @keyframes gentlePulse {
                                          0% {
                                            opacity: 0.3;
                                            transform: scale(0.8);
                                            filter: brightness(0.7);
                                          }
                                          25% {
                                            opacity: 1;
                                            transform: scale(1.4);
                                            filter: brightness(1.6);
                                          }
                                          50% {
                                            opacity: 0.2;
                                            transform: scale(0.6);
                                            filter: brightness(0.5);
                                          }
                                          75% {
                                            opacity: 1;
                                            transform: scale(1.3);
                                            filter: brightness(1.5);
                                          }
                                          100% {
                                            opacity: 0.3;
                                            transform: scale(0.8);
                                            filter: brightness(0.7);
                                          }
                                        }
                                      `}),o.jsx("div",{className:"hidden lg:block relative z-10 overflow-hidden shadow-md rounded-lg mt-6 border cursor-pointer transition-all",style:{borderColor:Re.border||"#E5E7EB",borderWidth:"1px",backgroundColor:"rgba(255, 255, 255, 0.7)"},onMouseEnter:()=>ar(fe),onMouseLeave:()=>ar(null),onClick:mt=>{var br;mt.stopPropagation();const Kt=(br=we[0])==null?void 0:br.product_id,Dt=yn(we[0],T);Kt&&Ae(Kt),Dt&&Dt!=="No Product"&&Tt(Dt),oe(!1),B(!0)},children:o.jsxs("div",{className:"p-6 flex flex-col h-full items-center justify-center min-h-[200px] relative rounded-lg transition-all duration-300",style:{backgroundColor:"transparent",backgroundImage:Wt===fe||er===fe?`radial-gradient(circle at center, ${Re.badgeBackground||"rgba(200, 146, 18, 0.15)"}, transparent 70%)`:"none"},children:[(Wt===fe||er===fe)&&o.jsxs(o.Fragment,{children:[o.jsx(Pl,{className:"absolute top-4 left-4 w-3 h-3",style:{color:Re.background||"#C89212",animationDelay:"0ms",animation:"fadeIn 1.2s ease-in forwards, sparkle 2.8s ease-in-out infinite",filter:"drop-shadow(0 0 4px currentColor) drop-shadow(0 0 8px currentColor)"}}),o.jsx(Al,{className:"absolute top-6 right-6 w-4 h-4",style:{color:Re.background||"#C89212",animationDelay:"300ms",animation:"fadeIn 1.2s ease-in 0.3s forwards, twinkle 2.4s ease-in-out infinite",filter:"drop-shadow(0 0 5px currentColor) drop-shadow(0 0 10px currentColor)"}}),o.jsx(Pl,{className:"absolute bottom-8 left-8 w-3.5 h-3.5",style:{color:Re.background||"#C89212",animationDelay:"600ms",animation:"fadeIn 1.2s ease-in 0.6s forwards, gentlePulse 3.2s ease-in-out infinite",filter:"drop-shadow(0 0 4px currentColor) drop-shadow(0 0 8px currentColor)"}}),o.jsx(Al,{className:"absolute bottom-4 right-4 w-3 h-3",style:{color:Re.background||"#C89212",animationDelay:"900ms",animation:"fadeIn 1.2s ease-in 0.9s forwards, sparkle 3.5s ease-in-out infinite",filter:"drop-shadow(0 0 4px currentColor) drop-shadow(0 0 8px currentColor)"}}),o.jsx(Pl,{className:"absolute top-1/2 left-2 w-4 h-4",style:{color:Re.background||"#C89212",animationDelay:"150ms",animation:"fadeIn 1.2s ease-in 0.15s forwards, twinkle 2.1s ease-in-out infinite",filter:"drop-shadow(0 0 5px currentColor) drop-shadow(0 0 10px currentColor)"}}),o.jsx(Al,{className:"absolute top-1/2 right-2 w-3 h-3",style:{color:Re.background||"#C89212",animationDelay:"450ms",animation:"fadeIn 1.2s ease-in 0.45s forwards, gentlePulse 2.9s ease-in-out infinite",filter:"drop-shadow(0 0 4px currentColor) drop-shadow(0 0 8px currentColor)"}}),o.jsx(Pl,{className:"absolute top-4 left-1/2 w-3.5 h-3.5",style:{color:Re.background||"#C89212",animationDelay:"750ms",animation:"fadeIn 1.2s ease-in 0.75s forwards, sparkle 2.6s ease-in-out infinite",filter:"drop-shadow(0 0 4px currentColor) drop-shadow(0 0 8px currentColor)"}}),o.jsx(Al,{className:"absolute bottom-2 left-1/2 w-3 h-3",style:{color:Re.background||"#C89212",animationDelay:"1050ms",animation:"fadeIn 1.2s ease-in 1.05s forwards, twinkle 3.1s ease-in-out infinite",filter:"drop-shadow(0 0 5px currentColor) drop-shadow(0 0 10px currentColor)"}}),o.jsx(Pl,{className:"absolute top-1/4 right-1/4 w-2.5 h-2.5",style:{color:Re.background||"#C89212",animationDelay:"200ms",animation:"fadeIn 1.2s ease-in 0.2s forwards, gentlePulse 3.4s ease-in-out infinite",filter:"drop-shadow(0 0 3px currentColor) drop-shadow(0 0 6px currentColor)"}}),o.jsx(Al,{className:"absolute bottom-1/4 left-1/4 w-3.5 h-3.5",style:{color:Re.background||"#C89212",animationDelay:"800ms",animation:"fadeIn 1.2s ease-in 0.8s forwards, sparkle 3.0s ease-in-out infinite",filter:"drop-shadow(0 0 4px currentColor) drop-shadow(0 0 8px currentColor)"}}),o.jsx(Pl,{className:"absolute top-3/4 right-1/3 w-3 h-3",style:{color:Re.background||"#C89212",animationDelay:"500ms",animation:"fadeIn 1.2s ease-in 0.5s forwards, twinkle 2.7s ease-in-out infinite",filter:"drop-shadow(0 0 4px currentColor) drop-shadow(0 0 8px currentColor)"}}),o.jsx(Al,{className:"absolute bottom-1/3 left-1/3 w-4 h-4",style:{color:Re.background||"#C89212",animationDelay:"1100ms",animation:"fadeIn 1.2s ease-in 1.1s forwards, gentlePulse 3.3s ease-in-out infinite",filter:"drop-shadow(0 0 5px currentColor) drop-shadow(0 0 10px currentColor)"}})]}),o.jsxs("div",{className:`flex flex-col items-center justify-center gap-2 z-10 ${Wt===fe||er===fe?"opacity-100 transition-opacity duration-[1200ms] ease-in":"opacity-0"}`,children:[o.jsx(cs,{className:"h-8 w-8",style:{color:Re.background||"#C89212"}}),o.jsxs("div",{className:"flex flex-col items-center justify-center text-base font-semibold",style:{color:Re.background||"#C89212"},children:[o.jsx("span",{children:"Create"}),o.jsx("span",{children:"New Session"})]})]})]})})]})]}),Je>0&&o.jsx("div",{className:"mt-4 md:hidden",children:o.jsx("button",{onClick:()=>or(fe),className:"w-full flex items-center justify-center gap-1 px-4 py-2 text-sm font-medium text-[#2D4660] bg-white hover:bg-gray-50 rounded-md border border-gray-300 transition-colors",children:rt?o.jsxs(o.Fragment,{children:["Show Less",o.jsx(On,{className:"h-4 w-4 rotate-180"})]}):o.jsxs(o.Fragment,{children:["Show More (",Je,")",o.jsx(On,{className:"h-4 w-4"})]})})})]})},fe)}),(Se.length>0||te.length>0)&&o.jsxs("div",{className:"grid grid-cols-1 gap-0 sm:gap-6 sm:grid-cols-2 lg:grid-cols-3",children:[[...Se,...te].map(fe=>{const we=Br(fe),rt=we.icon,wt=$n(fe),Je=we.text==="Closed",Pt=yn(fe,T),ht=fe.product_id?q[fe.product_id]:void 0,Re=Qn(Pt,ht),ut=Se.includes(fe);return o.jsxs("div",{className:"relative z-10 bg-white overflow-visible shadow-md rounded-lg rounded-tl-none hover:shadow-lg transition-shadow cursor-pointer mt-6 border",style:{borderColor:Re.border,borderWidth:"1px",opacity:Je&&hr!==fe.id?.75:1},onMouseEnter:()=>At(fe.id),onMouseLeave:()=>At(null),onClick:()=>Xt(fe),children:[ut&&(j||k==="admin"||k==="system-admin")&&o.jsx("div",{className:"absolute z-20 bottom-[-20px] left-1/2 -translate-x-1/2 md:bottom-auto md:left-auto md:translate-x-0 md:right-[-20px] md:top-1/2 md:-translate-y-1/2",children:o.jsx("button",{onClick:Ot=>{Ot.stopPropagation();const It=fe.product_id,Ir=yn(fe,T);It&&Ae(It),Ir&&Ir!=="No Product"&&Tt(Ir),oe(!1),B(!0)},className:"flex items-center justify-center w-10 h-10 rounded-full transition-colors shadow-md hover:shadow-lg",style:{backgroundColor:Re.background||"#C89212",color:Re.text||"#FFFFFF"},onMouseEnter:Ot=>{const It=Re.background||"#C89212";Ot.currentTarget.style.backgroundColor=It,Ot.currentTarget.style.filter="brightness(0.8)"},onMouseLeave:Ot=>{Ot.currentTarget.style.backgroundColor=Re.background||"#C89212",Ot.currentTarget.style.filter="brightness(1)"},title:`Create new session for ${Pt}`,children:o.jsx(cs,{className:"h-5 w-5"})})}),he(fe,Pt,Re,we,rt,wt,Je,!0,fe.product_id)]},fe.id)}),Me.length===2&&Se.length+te.length>0&&o.jsx("div",{className:"hidden lg:block relative z-10 bg-white overflow-visible shadow-md rounded-lg hover:shadow-lg transition-shadow mt-6 border border-gray-200",children:o.jsx("div",{className:"p-6 flex flex-col h-full items-end justify-center min-h-[200px]",children:o.jsxs("button",{onClick:()=>{oe(!0),B(!0)},className:"flex items-center px-6 py-3 bg-[#C89212] text-white rounded-lg hover:bg-[#6A4234] transition-colors font-semibold",children:[o.jsx(cs,{className:"h-5 w-5 mr-2"}),"Create Session"]})})})]})]})})()]})]})]}),o.jsx(Bn,{isOpen:K,onClose:Ce,title:"Create Voting Session",maxWidth:"max-w-3xl",children:o.jsxs("form",{onSubmit:Fs,className:"space-y-6",children:[o.jsxs("div",{className:"space-y-1",children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Product *"}),!_t&&!be?o.jsx("div",{className:"space-y-3",children:o.jsxs("div",{className:"flex flex-col gap-3 sm:flex-row sm:items-end",children:[o.jsx("div",{className:"flex-1 w-full",children:o.jsx(c4,{label:"",products:ve,value:V,onChange:M=>{Ae(M),M&&re(""),H.product&&ne(te=>{const ce={...te};return delete ce.product,ce})},isLoading:Z,error:gt,disabled:Z||ve.length===0,placeholder:"Select a product",helperText:!Z&&ve.length===0&&!gt&&Q?"No products found yet. Enter a product name below to create one.":void 0,allowDelete:Q,onRequestDeleteProduct:Q?(M=>{U(M)}):void 0,className:"w-full"})}),Q&&o.jsxs("div",{className:"flex items-center gap-2 sm:flex-none",children:[o.jsx("span",{className:"text-gray-500 font-medium px-2",children:"or"}),o.jsxs("button",{type:"button",onClick:()=>kt(!0),disabled:Z,className:"px-4 py-2 bg-[#1E5461] text-white rounded-md hover:bg-[#576C71] transition-colors font-medium whitespace-nowrap disabled:opacity-50 disabled:cursor-not-allowed",children:[o.jsx(cs,{className:"h-4 w-4 inline mr-2"}),"Create New Product"]})]})]})}):be?o.jsxs("div",{className:"flex items-center gap-3 px-4 py-2 border border-gray-300 rounded-md cursor-pointer hover:border-[#2D4660] transition-colors animate-in fade-in duration-300",onClick:()=>{je(null),re(be.name),xe(be.color),kt(!0),G(!0),_e(!1)},children:[o.jsx("div",{className:"w-6 h-6 rounded-md border flex-shrink-0",style:{backgroundColor:be.color||"#2D4660",borderColor:be.color||"#2D4660"}}),o.jsx("span",{className:"font-medium text-gray-900 flex-1",children:be.name}),o.jsx("span",{className:"text-xs text-gray-500",children:"Click to edit"})]}):Q&&_t?o.jsx("div",{className:"space-y-3",children:o.jsxs("div",{className:"flex gap-3 items-center",children:[o.jsxs("div",{className:"flex-1",style:{animation:"dramaticSlideIn 1.2s cubic-bezier(0.34, 1.56, 0.64, 1) forwards"},children:[o.jsx("style",{children:`
                      @keyframes dramaticSlideIn {
                        from {
                          opacity: 0;
                          transform: translateX(150px) scale(0.9);
                        }
                        to {
                          opacity: 1;
                          transform: translateX(0) scale(1);
                        }
                      }
                    `}),o.jsx("input",{type:"text",value:X,onChange:M=>{re(M.target.value),M.target.value.trim()&&!$&&setTimeout(()=>G(!0),200),gt&&Ct(null)},placeholder:"Enter product name...",autoFocus:!0,className:"w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-0 focus:border-[#2D4660]"})]}),$&&o.jsxs("div",{className:"flex items-center gap-2 overflow-hidden",style:{animation:"slideInFromRight 1s ease-out forwards"},children:[o.jsx("style",{children:`
                        @keyframes slideInFromRight {
                          from {
                            opacity: 0;
                            transform: translateX(100px);
                          }
                          to {
                            opacity: 1;
                            transform: translateX(0);
                          }
                        }
                      `}),o.jsx("label",{className:"text-sm font-medium text-gray-700 whitespace-nowrap",children:"Product Color"}),o.jsx("button",{type:"button",onClick:()=>{ct(de||"#2D4660"),ke(!0),setTimeout(()=>{var M;(M=document.getElementById("native-color-input"))==null||M.click()},100)},className:"block w-10 h-10 rounded-md border-2 border-gray-300 hover:border-gray-400 transition-all flex items-center justify-center overflow-hidden",style:de?{backgroundColor:de}:{backgroundColor:"#ffffff"},children:!de&&o.jsx("img",{src:"/colorpicker.png",alt:"Color Picker",className:"w-8 h-8 object-contain"})})]})]})}):null,H.product&&o.jsxs("p",{className:"text-sm text-red-600 flex items-center",children:[o.jsx(Ut,{className:"h-4 w-4 mr-1"}),H.product]}),gt&&(_t||!!be)&&o.jsxs("p",{className:"text-sm text-red-600 flex items-center",children:[o.jsx(Ut,{className:"h-4 w-4 mr-1"}),gt]})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Session Title *"}),o.jsx("input",{ref:ir,type:"text",name:"title",value:ae.title,onChange:Ht,placeholder:"e.g., Q3 Product Priorities, Sprint 5, Sprint 5: Mobile Updates",className:`w-full px-4 py-2 border rounded-md focus:outline-none focus:ring-0 focus:border-[#2d4660] ${H.title?"border-red-500":"border-gray-300"}`}),H.title&&o.jsxs("p",{className:"mt-1 text-sm text-red-600 flex items-center",children:[o.jsx(Ut,{className:"h-4 w-4 mr-1"}),H.title]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Session Goal *"}),o.jsx("textarea",{name:"goal",value:ae.goal,onChange:Ht,rows:2,placeholder:"Describe the purpose of this voting session...",className:`w-full px-4 py-2 border rounded-md focus:outline-none focus:ring-0 focus:border-[#2d4660] ${H.goal?"border-red-500":"border-gray-300"}`}),H.goal&&o.jsxs("p",{className:"mt-1 text-sm text-red-600 flex items-center",children:[o.jsx(Ut,{className:"h-4 w-4 mr-1"}),H.goal]})]})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Votes Per User *"}),o.jsxs("div",{className:"flex items-center mb-3",children:[o.jsx("input",{type:"checkbox",id:"modalAutoVotes",checked:ae.useAutoVotes,onChange:M=>J(te=>({...te,useAutoVotes:M.target.checked})),className:"h-4 w-4 cursor-pointer rounded border-gray-300 accent-[#3A9B5C] focus:outline-none focus:ring-0"}),o.jsx("label",{htmlFor:"modalAutoVotes",className:"ml-2 text-sm text-gray-700 cursor-pointer",children:"Auto-calculate votes (half of feature count, minimum 1)"})]}),!ae.useAutoVotes&&o.jsxs(o.Fragment,{children:[o.jsx("input",{type:"number",name:"votesPerUser",value:ae.votesPerUser,onChange:Ht,min:"1",max:"100",className:`w-full px-4 py-2 border rounded-md focus:outline-none focus:ring-0 focus:border-[#2d4660] ${H.votesPerUser?"border-red-500":"border-gray-300"}`}),H.votesPerUser&&o.jsxs("p",{className:"mt-1 text-sm text-red-600 flex items-center",children:[o.jsx(Ut,{className:"h-4 w-4 mr-1"}),H.votesPerUser]})]}),o.jsx("p",{className:"mt-2 text-xs text-gray-500",children:ae.useAutoVotes?"Votes will automatically be set to half the number of features (minimum 1).":"Each stakeholder receives this many votes."})]}),o.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Start Date *"}),o.jsx("input",{type:"date",name:"startDate",value:ae.startDate,onChange:Ht,className:"w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-0 focus:border-[#2d4660]"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"End Date *"}),o.jsx("input",{type:"date",name:"endDate",value:ae.endDate,onChange:Ht,className:`w-full px-4 py-2 border rounded-md focus:outline-none focus:ring-0 focus:border-[#2d4660] ${H.endDate?"border-red-500":"border-gray-300"}`}),H.endDate&&o.jsxs("p",{className:"mt-1 text-sm text-red-600 flex items-center",children:[o.jsx(Ut,{className:"h-4 w-4 mr-1"}),H.endDate]})]})]})]}),H.submit&&o.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-3 text-sm text-red-700 flex items-center",children:[o.jsx(Ut,{className:"h-4 w-4 mr-2"}),H.submit]}),o.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t",children:[o.jsx(nt,{type:"button",variant:"secondary",onClick:Ce,disabled:ie,children:"Cancel"}),o.jsx(nt,{type:"submit",variant:_t&&X.trim()&&de?"gold":"primary",disabled:ie,className:`transition-all duration-500 ease-in-out ${_t&&X.trim()&&de?"relative overflow-hidden":""}`,children:ie?"Creating...":_t&&X.trim()&&de?o.jsxs(o.Fragment,{children:[o.jsxs("span",{className:"relative z-10 flex items-center",children:[o.jsx(cs,{className:"h-4 w-4 mr-2"}),"Create New Product and Session"]}),o.jsx("span",{className:"absolute top-1 left-1/4 w-1 h-1 bg-white rounded-full animate-ping opacity-75",style:{animationDelay:"0ms",animationDuration:"1.5s"}}),o.jsx("span",{className:"absolute top-2 right-1/3 w-1 h-1 bg-white rounded-full animate-ping opacity-75",style:{animationDelay:"300ms",animationDuration:"1.5s"}}),o.jsx("span",{className:"absolute bottom-2 left-1/3 w-1 h-1 bg-white rounded-full animate-ping opacity-75",style:{animationDelay:"600ms",animationDuration:"1.5s"}}),o.jsx("span",{className:"absolute bottom-1 right-1/4 w-1 h-1 bg-white rounded-full animate-ping opacity-75",style:{animationDelay:"900ms",animationDuration:"1.5s"}})]}):"Create Session"})]})]})}),Fe&&o.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",onClick:()=>ke(!1),children:o.jsx("div",{className:"bg-white rounded-lg shadow-xl px-3 py-2 w-auto mx-4",onClick:M=>M.stopPropagation(),children:o.jsxs("div",{className:"flex gap-3 items-stretch",children:[o.jsxs("div",{className:"flex-shrink-0",style:{width:"240px",height:"260px"},children:[o.jsx("input",{id:"native-color-input",type:"color",value:Ke,onChange:M=>ct(M.target.value),ref:M=>{M&&Fe&&setTimeout(()=>M.click(),50)},className:"opacity-0 absolute",style:{width:"1px",height:"1px"}}),o.jsx("div",{className:"w-full h-full"})]}),o.jsxs("button",{type:"button",onClick:()=>{xe(Ke),ke(!1),setTimeout(()=>{var M;(M=ir.current)==null||M.focus()},100)},className:"px-6 rounded-lg text-white font-bold shadow-lg hover:shadow-xl transition-all flex flex-col items-center justify-center gap-3 text-lg flex-shrink-0",style:{backgroundColor:Ke,height:"260px",minWidth:"100px"},children:[o.jsx(Or,{className:"h-8 w-8"}),o.jsxs("div",{className:"text-center leading-tight",children:[o.jsx("div",{children:"Looks"}),o.jsx("div",{children:"Good"})]})]})]})})}),k==="stakeholder"&&u.length>0&&o.jsx("div",{className:"relative z-10 mt-8 bg-blue-50 border border-blue-200 rounded-lg p-4",children:o.jsxs("div",{className:"flex items-start",children:[o.jsx(An,{className:"h-5 w-5 text-blue-600 mr-3 mt-0.5"}),o.jsxs("div",{className:"text-sm text-blue-800",children:[o.jsx("p",{className:"font-medium mb-1",children:"About Voting Sessions:"}),o.jsx("p",{children:"Click on any session card to cast your votes. You can change your votes at any time before the voting period ends."})]})]})}),k==="admin"&&Qr.length>0&&Me.length===0&&o.jsx("div",{className:"relative z-10 mt-8 bg-blue-50 border border-blue-200 rounded-lg p-4",children:o.jsxs("div",{className:"flex items-start",children:[o.jsx(An,{className:"h-5 w-5 text-blue-600 mr-3 mt-0.5"}),o.jsxs("div",{className:"text-sm text-blue-800",children:[o.jsx("p",{className:"font-medium mb-1",children:"About Voting Sessions:"}),o.jsx("p",{children:"Click on any session card to cast your votes. You can change your votes at any time before the voting period ends."})]})]})}),k==="admin"&&Me.length>0&&o.jsx("div",{className:"relative z-10 mt-8 bg-blue-50 border border-blue-200 rounded-lg p-4",children:o.jsxs("div",{className:"flex items-start",children:[o.jsx(In,{className:"h-5 w-5 text-blue-600 mr-3 mt-0.5"}),o.jsxs("div",{className:"text-sm text-blue-800",children:[o.jsx("p",{className:"font-medium mb-1",children:"Managing Sessions:"}),o.jsx("p",{children:'Click "Email Invite to Stakeholders" on any session card to send invitation links. Use the Admins and Stakeholders buttons to manage access.'})]})]})}),k==="system-admin"&&o.jsx("div",{className:"relative z-10 mt-8 bg-purple-50 border border-purple-200 rounded-lg p-4",children:o.jsxs("div",{className:"flex items-start",children:[o.jsx(Hr,{className:"h-5 w-5 text-purple-600 mr-3 mt-0.5"}),o.jsxs("div",{className:"text-sm text-purple-900",children:[o.jsx("p",{className:"font-medium mb-1",children:"System Admin Tips:"}),o.jsxs("ul",{className:"list-disc list-inside space-y-1",children:[o.jsx("li",{children:"Use this view to audit every session across the tenant without switching teams."}),o.jsx("li",{children:"Jump into any card to open the admin dashboard and assist local admins."}),o.jsx("li",{children:"Need a quick rollout? Click Create Session above to spin up a new voting round for any product."})]})]})]})}),o.jsx(m4,{currentRole:j&&k==="system-admin"?"system-admin":k==="admin"?"session-admin":"stakeholder",onSelectStakeholder:()=>C("stakeholder"),onSelectSessionAdmin:()=>C("admin"),onSelectSystemAdmin:j?()=>C("system-admin"):void 0,showRoleToggle:St||j}),ye&&o.jsxs(Bn,{isOpen:!0,onClose:()=>U(null),title:"Delete Product",children:[o.jsxs("p",{className:"text-sm text-gray-700 mb-4",children:["Are you sure you want to delete ",o.jsx("span",{className:"font-semibold",children:ye.name}),"? This will remove it for everyone in your tenant."]}),o.jsxs("div",{className:"flex justify-end gap-3",children:[o.jsx(nt,{variant:"secondary",onClick:()=>U(null),disabled:$e,children:"Cancel"}),o.jsx(nt,{variant:"danger",onClick:Hn,disabled:$e,children:$e?"Deleting":"Delete"})]})]}),un&&o.jsx(Bn,{isOpen:!0,onClose:()=>{Rn(null),mr(""),qt(null),Tr(!1)},title:"Edit Product",children:o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Product Name *"}),o.jsx("input",{type:"text",value:kr,onChange:M=>mr(M.target.value),placeholder:"Enter product name",className:"w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-0 focus:border-[#2D4660]"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Product Color"}),o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("button",{type:"button",onClick:()=>{Sn(Ft||"#2D4660"),Tr(!0)},className:"block w-12 h-12 rounded-md border-2 border-gray-300 hover:border-gray-400 transition-all flex items-center justify-center overflow-hidden",style:Ft?{backgroundColor:Ft}:{backgroundColor:"#ffffff"},children:!Ft&&o.jsx("img",{src:"/colorpicker.png",alt:"Color Picker",className:"w-8 h-8 object-contain"})}),o.jsx("span",{className:"text-sm text-gray-600",children:Ft||"No color selected"})]})]}),o.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t",children:[o.jsx(nt,{variant:"secondary",onClick:()=>{Rn(null),mr(""),qt(null),Tr(!1)},disabled:Nr,children:"Cancel"}),o.jsx(nt,{variant:"primary",onClick:async()=>{if(!(!(un!=null&&un.id)||!kr.trim())){Cr(!0);try{await G0(un.id,{name:kr.trim(),color_hex:Ft});const M=(e==null?void 0:e.tenant_id)??(e==null?void 0:e.tenantId);if(M){const te=await Ji(M);I(te.sort((Se,fe)=>Se.name.localeCompare(fe.name)));const ce={},Ie={};te.forEach(Se=>{ce[Se.id]=Se.name||"",Se.color_hex&&(Ie[Se.id]=Se.color_hex)}),D(ce),F(Ie)}Rn(null),mr(""),qt(null),Tr(!1),await r(),await dn()}catch(M){console.error("Error updating product:",M),alert("Failed to update product. Please try again.")}finally{Cr(!1)}}},disabled:Nr||!kr.trim(),children:Nr?"Updating...":"Update Product"})]})]})}),Vn&&o.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",onClick:()=>Tr(!1),children:o.jsx("div",{className:"bg-white rounded-lg shadow-xl px-3 py-2 w-auto mx-4",onClick:M=>M.stopPropagation(),children:o.jsxs("div",{className:"flex gap-3 items-stretch",children:[o.jsxs("div",{className:"flex-shrink-0",style:{width:"240px",height:"260px"},children:[o.jsx("input",{id:"edit-native-color-input",type:"color",value:qn,onChange:M=>Sn(M.target.value),ref:M=>{M&&Vn&&setTimeout(()=>M.click(),50)},className:"opacity-0 absolute",style:{width:"1px",height:"1px"}}),o.jsx("div",{className:"w-full h-full"})]}),o.jsxs("button",{type:"button",onClick:()=>{qt(qn),Tr(!1)},className:"px-6 rounded-lg text-white font-bold shadow-lg hover:shadow-xl transition-all flex flex-col items-center justify-center gap-3 text-lg flex-shrink-0",style:{backgroundColor:qn,height:"260px",minWidth:"100px"},children:[o.jsx(Or,{className:"h-8 w-8"}),o.jsxs("div",{className:"text-center leading-tight",children:[o.jsx("div",{children:"Looks"}),o.jsx("div",{children:"Good"})]})]})]})})})]})}function kZ(){const{currentUser:e,setCurrentSession:t,refreshSessions:r,setCurrentUser:n}=Fi(),s=$s(),i=async()=>{try{await ze.auth.signOut()}catch{}try{t(null)}catch{}n(null);try{localStorage.removeItem("voting_system_current_session"),localStorage.removeItem("azureDevOpsAuthInProgress"),sessionStorage.removeItem("oauth_return_path"),sessionStorage.removeItem("oauth_action")}catch{}s("/login",{replace:!0})},[l,u]=v.useState({title:"",goal:"",votesPerUser:10,useAutoVotes:!0,startDate:new Date().toISOString().split("T")[0],endDate:new Date(Date.now()+10080*60*1e3).toISOString().split("T")[0]}),[d,m]=v.useState({}),[f,p]=v.useState(!1),[y,x]=v.useState(!1),[b,j]=v.useState([]),[S,k]=v.useState(""),[C,N]=v.useState(""),[O,P]=v.useState(!1),[T,D]=v.useState(!1),[q,F]=v.useState(null);v.useEffect(()=>{(async()=>{var ne;if(!e){j([]),k("");return}const H=e.tenant_id??e.tenantId??null;if(!H){j([]),k(""),F("No tenant assigned. Products cannot be loaded.");return}P(!0),F(null);try{const ie=await Ji(H);j(ie),k(((ne=ie[0])==null?void 0:ne.id)??"")}catch(ie){console.error("Error loading products for create session:",ie),ra!=null&&ra(ie)?F("Products are not configured yet. Please create the `products` table in Supabase."):F("Unable to load products. You can still create a session without a product tag."),j([]),k("")}finally{P(!1)}})()},[e]);const K=()=>{const J="ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";let H="";for(let ne=0;ne<8;ne++)H+=J.charAt(Math.floor(Math.random()*J.length));return H},B=()=>{const J={};l.title.trim()||(J.title="Session title is required"),l.goal.trim()||(J.goal="Session goal is required"),l.useAutoVotes||(l.votesPerUser<1&&(J.votesPerUser="Votes per user must be at least 1"),l.votesPerUser>100&&(J.votesPerUser="Votes per user cannot exceed 100"));const H=new Date(l.startDate);return new Date(l.endDate)<=H&&(J.endDate="End date must be after start date"),!q&&b.length>0&&!S&&(J.product="Please select a product for this session"),m(J),Object.keys(J).length===0},Q=async J=>{if(J.preventDefault(),!(!B()||!e)){p(!0);try{const H=K(),ne=b.find(ge=>ge.id===S)||null;if(ne!=null&&ne.id&&await $C(ne.id)){m({submit:`There is already an active session for ${ne.name}. Each product can only have one active session at a time.`}),p(!1);return}const ie=await MC({title:l.title,goal:l.goal,votes_per_user:l.votesPerUser,use_auto_votes:l.useAutoVotes,start_date:l.startDate,end_date:l.endDate,is_active:!0,session_code:H,product_id:(ne==null?void 0:ne.id)??null,product_name:null});await Vl(ie.id,e.id),await r(),x(!0),setTimeout(()=>{t(ie),s("/admin")},3e3)}catch(H){console.error("Error creating session:",H),m({submit:"Failed to create session. Please try again."})}finally{p(!1)}}},oe=async()=>{if(!e)return;const J=e.tenant_id??e.tenantId??null;if(!J){F("Cannot create products because no tenant is associated with your account.");return}const H=C.trim();if(!H){F("Product name is required.");return}D(!0),F(null);try{const ne=await TC(J,H);j(ie=>[...ie,ne].sort((ve,I)=>ve.name.localeCompare(I.name))),k(ne.id),N("")}catch(ne){console.error("Error creating product:",ne),F(ne instanceof Error?ne.message:"Unable to create product. Please try again.")}finally{D(!1)}},ae=J=>{const{name:H,value:ne}=J.target;u(ie=>({...ie,[H]:H==="votesPerUser"?parseInt(ne)||0:ne})),d[H]&&m(ie=>{const ge={...ie};return delete ge[H],ge})};return y?o.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center p-4",children:o.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-8 max-w-md w-full text-center",children:[o.jsx("div",{className:"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4",children:o.jsx(Or,{className:"h-10 w-10 text-green-600"})}),o.jsx("h2",{className:"text-2xl font-bold text-[#2d4660] mb-2",children:"Session Created!"}),o.jsx("p",{className:"text-gray-600 mb-6",children:"Your voting session has been created successfully."}),o.jsxs("div",{className:"bg-blue-50 border-2 border-blue-200 rounded-lg p-4 mb-6",children:[o.jsx("p",{className:"text-sm text-gray-600 mb-2",children:"Success!"}),o.jsx("p",{className:"text-base text-[#2d4660] font-medium",children:"Your session has been created."}),o.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"You can now invite stakeholders from your session dashboard."})]}),o.jsx("p",{className:"text-sm text-gray-500",children:"Redirecting to admin dashboard..."})]})}):o.jsxs("div",{className:"container mx-auto p-4 max-w-6xl min-h-screen pb-8",children:[o.jsx("div",{className:"hidden md:flex md:justify-center mb-2",children:o.jsx("img",{src:"https://www.steeldynamics.com/wp-content/uploads/2024/05/New-Millennium-color-logo1.png",alt:"New Millennium Building Systems Logo",className:"-mt-4",style:{height:"96px",width:"auto"}})}),o.jsxs("div",{className:"flex justify-between items-center mb-6",children:[o.jsxs("div",{className:"flex items-center",children:[o.jsx("img",{src:"https://media.licdn.com/dms/image/C4D0BAQEC3OhRqehrKg/company-logo_200_200/0/1630518354793/new_millennium_building_systems_logo?e=2147483647&v=beta&t=LM3sJTmQZet5NshZ-RNHXW1MMG9xSi1asp-VUeSA9NA",alt:"New Millennium Building Systems Logo",className:"mr-4 md:hidden",style:{width:"40px",height:"40px"}}),o.jsx("button",{onClick:()=>s("/sessions"),className:"mr-2 p-1 rounded-full hover:bg-gray-200 cursor-pointer",children:o.jsx(fc,{className:"h-6 w-6"})}),o.jsx("h1",{className:"text-2xl font-bold text-[#2d4660] md:text-3xl",children:"Create Voting Session"})]}),o.jsxs("button",{onClick:i,className:"flex items-center px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-colors",children:[o.jsx(xn,{className:"h-4 w-4 mr-2"}),o.jsx("span",{className:"hidden sm:inline",children:"Logout"})]})]}),o.jsx("div",{className:"relative z-10 bg-white rounded-lg shadow-md p-6",children:o.jsxs("form",{onSubmit:Q,className:"space-y-6",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Session Title *"}),o.jsx("input",{type:"text",name:"title",value:l.title,onChange:ae,placeholder:"e.g., Q2 2025 Product Roadmap",className:`w-full px-4 py-2 border rounded-md focus:ring-2 focus:ring-[#2d4660] focus:border-transparent ${d.title?"border-red-500":"border-gray-300"}`}),d.title&&o.jsxs("p",{className:"mt-1 text-sm text-red-600 flex items-center",children:[o.jsx(Ut,{className:"h-4 w-4 mr-1"}),d.title]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Session Goal *"}),o.jsx("textarea",{name:"goal",value:l.goal,onChange:ae,rows:3,placeholder:"Describe the purpose of this voting session...",className:`w-full px-4 py-2 border rounded-md focus:ring-2 focus:ring-[#2d4660] focus:border-transparent ${d.goal?"border-red-500":"border-gray-300"}`}),d.goal&&o.jsxs("p",{className:"mt-1 text-sm text-red-600 flex items-center",children:[o.jsx(Ut,{className:"h-4 w-4 mr-1"}),d.goal]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Product *"}),O?o.jsx("p",{className:"text-sm text-gray-500",children:"Loading products..."}):b.length>0?o.jsxs("select",{value:S,onChange:J=>{k(J.target.value),d.product&&m(H=>{const ne={...H};return delete ne.product,ne})},className:`w-full px-4 py-2 border rounded-md focus:ring-2 focus:ring-[#2d4660] focus:border-transparent ${d.product?"border-red-500":"border-gray-300"}`,children:[o.jsx("option",{value:"",children:"Select a product"}),b.map(J=>o.jsx("option",{value:J.id,children:J.name},J.id))]}):o.jsx("p",{className:"text-sm text-gray-500",children:q??"No products found. Add a product below to associate this session."}),d.product&&o.jsxs("p",{className:"mt-1 text-sm text-red-600 flex items-center",children:[o.jsx(Ut,{className:"h-4 w-4 mr-1"}),d.product]}),q&&b.length>0&&o.jsx("p",{className:"mt-1 text-sm text-red-600",children:q}),o.jsxs("div",{className:"mt-4",children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Add a new product"}),o.jsxs("div",{className:"flex flex-col sm:flex-row gap-2",children:[o.jsx("input",{type:"text",value:C,onChange:J=>{N(J.target.value),q&&F(null)},placeholder:"e.g., Catalyst Cloud",className:"w-full px-4 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-[#2d4660] focus:border-transparent"}),o.jsx("button",{type:"button",onClick:oe,disabled:T,className:"px-4 py-2 bg-[#2d4660] text-white rounded-md hover:bg-[#1d3a53] transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:T?"Adding...":"Add Product"})]}),o.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"New products become available immediately for all session admins in your tenant."})]})]}),o.jsxs("div",{children:[o.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[o.jsx(An,{className:"h-4 w-4 inline mr-1"}),"Votes Per User *"]}),o.jsxs("div",{className:"flex items-center mb-3",children:[o.jsx("input",{type:"checkbox",id:"useAutoVotes",checked:l.useAutoVotes,onChange:J=>u(H=>({...H,useAutoVotes:J.target.checked})),className:"h-4 w-4 cursor-pointer rounded border-gray-300 accent-[#3A9B5C] focus:outline-none focus:ring-0"}),o.jsx("label",{htmlFor:"useAutoVotes",className:"ml-2 text-sm text-gray-700 cursor-pointer",children:"Auto-calculate votes (half of feature count, minimum 1)"})]}),!l.useAutoVotes&&o.jsxs(o.Fragment,{children:[o.jsx("input",{type:"number",name:"votesPerUser",value:l.votesPerUser,onChange:ae,min:"1",max:"100",className:`w-full px-4 py-2 border rounded-md focus:ring-2 focus:ring-[#2d4660] focus:border-transparent ${d.votesPerUser?"border-red-500":"border-gray-300"}`}),d.votesPerUser&&o.jsxs("p",{className:"mt-1 text-sm text-red-600 flex items-center",children:[o.jsx(Ut,{className:"h-4 w-4 mr-1"}),d.votesPerUser]})]}),o.jsx("p",{className:"mt-2 text-sm text-gray-500",children:l.useAutoVotes?"Votes will automatically be set to half the number of features (1 feature = 1 vote, 2 features = 1 vote, 4 features = 2 votes, etc.)":"Each stakeholder will have this many votes to distribute across features"})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[o.jsx(Os,{className:"h-4 w-4 inline mr-1"}),"Start Date *"]}),o.jsx("input",{type:"date",name:"startDate",value:l.startDate,onChange:ae,className:"w-full px-4 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-[#2d4660] focus:border-transparent"})]}),o.jsxs("div",{children:[o.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[o.jsx(Os,{className:"h-4 w-4 inline mr-1"}),"End Date *"]}),o.jsx("input",{type:"date",name:"endDate",value:l.endDate,onChange:ae,className:`w-full px-4 py-2 border rounded-md focus:ring-2 focus:ring-[#2d4660] focus:border-transparent ${d.endDate?"border-red-500":"border-gray-300"}`}),d.endDate&&o.jsxs("p",{className:"mt-1 text-sm text-red-600 flex items-center",children:[o.jsx(Ut,{className:"h-4 w-4 mr-1"}),d.endDate]})]})]}),o.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:o.jsxs("div",{className:"flex items-start",children:[o.jsx(In,{className:"h-5 w-5 text-blue-600 mr-3 mt-0.5"}),o.jsxs("div",{className:"text-sm text-blue-800",children:[o.jsx("p",{className:"font-medium mb-1",children:"Next Steps:"}),o.jsxs("ul",{className:"list-disc list-inside space-y-1",children:[o.jsx("li",{children:"After creating the session, you'll be assigned as the admin"}),o.jsx("li",{children:"You can add stakeholders and other admins from the admin dashboard"}),o.jsx("li",{children:'Use the "Email Invite" button to send stakeholders a link to join'})]})]})]})}),d.submit&&o.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:o.jsxs("p",{className:"text-sm text-red-800 flex items-center",children:[o.jsx(Ut,{className:"h-4 w-4 mr-2"}),d.submit]})}),o.jsxs("div",{className:"flex justify-end space-x-3 pt-4 border-t",children:[o.jsx("button",{type:"button",onClick:()=>s("/sessions"),className:"px-6 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50 transition-colors",disabled:f,children:"Cancel"}),o.jsx("button",{type:"submit",className:"px-6 py-2 bg-[#2d4660] text-white rounded-md hover:bg-[#1d3a53] transition-colors disabled:opacity-50 disabled:cursor-not-allowed",disabled:f,children:f?"Creating...":"Create Session"})]})]})})]})}async function Dw(e){const{error:t}=await ze.functions.invoke("send-invitation-email",{body:e});if(t)throw t}function NZ({products:e,value:t,onChange:r,label:n,error:s}){const[i,l]=v.useState(!1),u=v.useRef(null);v.useEffect(()=>{function f(p){u.current&&!u.current.contains(p.target)&&l(!1)}return document.addEventListener("mousedown",f),()=>document.removeEventListener("mousedown",f)},[]);const d=e.find(f=>f.id===t),m=d?Qn(d.name,d.color_hex??null):null;return o.jsxs("div",{ref:u,className:"relative",children:[n&&o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:n}),o.jsxs("div",{onClick:()=>l(!i),className:`w-full px-3 py-2 border rounded-md bg-white cursor-pointer flex items-center justify-between hover:border-gray-400 ${s?"border-red-500":"border-gray-300"}`,children:[o.jsxs("div",{className:"flex items-center gap-2 flex-1 min-w-0",children:[d&&m&&o.jsx("div",{className:"w-4 h-4 rounded flex-shrink-0",style:{backgroundColor:m.background}}),o.jsx("span",{className:`text-sm truncate ${t?"text-gray-900":"text-gray-400"}`,children:d?d.name:"Select a Product"})]}),o.jsx(On,{className:`h-4 w-4 text-gray-400 transition-transform flex-shrink-0 ${i?"transform rotate-180":""}`})]}),i&&o.jsx("div",{className:"absolute z-50 w-full mt-1 bg-white border border-gray-300 rounded-md shadow-lg max-h-60 overflow-y-auto",children:e.length===0?o.jsx("div",{className:"px-3 py-2 text-sm text-gray-500 text-center",children:"No products available"}):e.map(f=>{const p=Qn(f.name,f.color_hex??null),y=t===f.id;return o.jsxs("div",{onClick:()=>{r(f.id),l(!1)},className:`px-3 py-2 cursor-pointer hover:bg-gray-50 flex items-center gap-2 ${y?"bg-gray-50":""}`,children:[o.jsx("div",{className:"w-4 h-4 rounded flex-shrink-0",style:{backgroundColor:p.background}}),o.jsx("span",{className:"text-sm text-gray-900 flex-1",children:f.name}),y&&o.jsx(Or,{className:"h-4 w-4 text-gray-400 flex-shrink-0"})]},f.id)})})]})}function CZ(){const{currentSession:e,currentUser:t,setCurrentUser:r,setCurrentSession:n}=Fi(),s=$s(),i=async()=>{try{await ze.auth.signOut()}catch{}try{n(null)}catch{}r(null);try{localStorage.removeItem("voting_system_current_session"),localStorage.removeItem("azureDevOpsAuthInProgress"),sessionStorage.removeItem("oauth_return_path"),sessionStorage.removeItem("oauth_action")}catch{}N(!1),s("/login",{replace:!0})},[l,u]=v.useState([]),[d,m]=v.useState(!0),[f,p]=v.useState(!1),[y,x]=v.useState({name:"",email:""}),[b,j]=v.useState({}),[S,k]=v.useState(!1),[C,N]=v.useState(!1),O=v.useRef(null),[P,T]=v.useState([]),[D,q]=v.useState(""),[F,K]=v.useState([]),[B,Q]=v.useState([]),[oe,ae]=v.useState({});v.useEffect(()=>{if(!C)return;const X=re=>{O.current&&!O.current.contains(re.target)&&N(!1)};return document.addEventListener("mousedown",X),document.addEventListener("touchstart",X,{passive:!0}),()=>{document.removeEventListener("mousedown",X),document.removeEventListener("touchstart",X)}},[C]),v.useEffect(()=>{if(!e){s("/sessions");return}ne(),J()},[e,s]);const J=async()=>{try{const X=await OC(),re=await oa(),de=new Date,xe=X.filter(U=>re.some($e=>$e.product_id!==U.id?!1:new Date($e.end_date)>=de));T(xe);const ye={};xe.forEach(U=>{ye[U.id]=U.name}),ae(ye)}catch(X){console.error("Error loading products:",X)}},H=async X=>{try{const re=await oa(),de=new Date,xe=re.filter(ye=>ye.product_id!==X?!1:new Date(ye.end_date)>=de);K(xe)}catch(re){console.error("Error loading sessions:",re),K([])}};v.useEffect(()=>{D?(H(D),Q([])):(K([]),Q([]))},[D]);const ne=async()=>{if(e){m(!0);try{const X=await zC(e.id);u(X)}catch(X){console.error("Error loading stakeholders:",X)}finally{m(!1)}}},ie=X=>/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(X),ge=X=>{const re=new Date,de=new Date(X.start_date),xe=new Date(X.end_date);return X.is_active&&re>=de&&re<=xe?{text:"Active",color:"text-green-600"}:re<de?{text:"Upcoming",color:"text-blue-600"}:{text:"Ended",color:"text-gray-500"}},ve=X=>{const re=new Date(X.start_date),de=new Date(X.end_date),xe=re.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}),ye=de.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"});return`${xe} - ${ye}`},I=async X=>{X.preventDefault();const re={};if(y.name.trim()||(re.name="Name is required"),y.email.trim()?ie(y.email)||(re.email="Invalid email address"):re.email="Email is required",D||(re.product="Please select a product"),B.length===0&&(re.sessions="Please select at least one session"),j(re),!(Object.keys(re).length>0)){k(!0);try{for(const de of B)await UC({session_id:de,user_name:y.name,user_email:y.email,has_voted:!1});for(const de of B){const xe=F.find(ye=>ye.id===de);if(xe)try{const ye=`${window.location.origin}/login?session=${xe.session_code}`;await Dw({to:y.email,subject:`You're invited to vote: ${xe.title}`,text:`Hi,

You've been invited to vote in "${xe.title}".

Open: ${ye}

Best regards,
${(t==null?void 0:t.name)||""}`,html:`<p>Hi,</p><p>You've been invited to vote in <strong>${xe.title}</strong>.</p><p><a href="${ye}">Open the Feature Voting System</a></p><p>Best regards,<br/>${(t==null?void 0:t.name)||""}</p>`})}catch{try{const ye=BC(xe,y.email,(t==null?void 0:t.name)||"");window.location.href=ye}catch{}}}await ne(),x({name:"",email:""}),q(""),Q([]),p(!1),j({})}catch(de){console.error("Error adding stakeholder:",de),j({submit:"Failed to add stakeholder. Please try again."})}finally{k(!1)}}},V=async X=>{if(e&&confirm("Are you sure you want to remove this stakeholder?"))try{await Pv(e.id,X),await ne()}catch(re){console.error("Error removing stakeholder:",re),alert("Failed to remove stakeholder")}},Ae=X=>new Date(X).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"});return e?d?o.jsx("div",{className:"min-h-screen w-full bg-gray-50 flex items-center justify-center",children:o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-[#2d4660] mx-auto mb-4"}),o.jsx("p",{className:"text-gray-600",children:"Loading stakeholders..."})]})}):o.jsxs("div",{className:"container mx-auto p-4 max-w-6xl min-h-screen pb-8",children:[o.jsx("div",{className:"hidden md:flex md:justify-center mb-2",children:o.jsx("img",{src:"https://www.steeldynamics.com/wp-content/uploads/2024/05/New-Millennium-color-logo1.png",alt:"New Millennium Building Systems Logo",className:"-mt-4",style:{height:"96px",width:"auto"}})}),o.jsxs("div",{className:"flex justify-between items-center mb-6",children:[o.jsxs("div",{className:"flex items-center",children:[o.jsx("img",{src:"https://media.licdn.com/dms/image/C4D0BAQEC3OhRqehrKg/company-logo_200_200/0/1630518354793/new_millennium_building_systems_logo?e=2147483647&v=beta&t=LM3sJTmQZet5NshZ-RNHXW1MMG9xSi1asp-VUeSA9NA",alt:"New Millennium Building Systems Logo",className:"mr-4 md:hidden",style:{width:"40px",height:"40px"}}),o.jsx("button",{onClick:()=>s("/admin"),className:"mr-2 p-1 rounded-full hover:bg-gray-200 cursor-pointer",children:o.jsx(fc,{className:"h-6 w-6"})}),o.jsx("h1",{className:"text-2xl font-bold text-[#2d4660] md:text-3xl",children:"Manage Stakeholders"})]}),o.jsxs("div",{ref:O,className:"relative z-40",children:[o.jsxs("div",{className:"hidden md:flex space-x-2",children:[o.jsxs("button",{onClick:()=>s("/admin"),className:"flex items-center px-4 py-2 bg-[#4f6d8e] text-white rounded-lg hover:bg-[#3d5670] transition-colors",children:[o.jsx(sn,{className:"h-4 w-4 mr-2"}),"Admin Dashboard"]}),o.jsxs("button",{onClick:()=>p(!0),className:"flex items-center px-4 py-2 bg-[#c59f2d] text-white rounded-lg hover:bg-[#a88a26] transition-colors",children:[o.jsx(Oo,{className:"h-4 w-4 mr-2"}),"Add Stakeholder"]}),o.jsxs("button",{onClick:i,className:"flex items-center px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-colors",children:[o.jsx(xn,{className:"h-4 w-4 mr-2"}),"Logout"]})]}),o.jsx("div",{className:"flex md:hidden",children:o.jsx("button",{onClick:()=>N(!C),className:"p-2 rounded-md border border-gray-200 bg-white shadow-sm","aria-label":"Open menu",children:o.jsx(Es,{className:"h-5 w-5 text-gray-700"})})}),C&&o.jsx("div",{className:"absolute right-0 mt-2 w-56 bg-white border border-gray-200 rounded-lg shadow-lg md:hidden z-50",children:o.jsxs("div",{className:"py-1",children:[o.jsxs("button",{onClick:()=>{N(!1),s("/admin")},className:"w-full px-3 py-2 flex items-center text-left hover:bg-gray-50",children:[o.jsx(sn,{className:"h-4 w-4 mr-2 text-gray-700"}),"Admin Dashboard"]}),o.jsxs("button",{onClick:()=>{N(!1),p(!0)},className:"w-full px-3 py-2 flex items-center text-left hover:bg-gray-50",children:[o.jsx(Oo,{className:"h-4 w-4 mr-2 text-gray-700"}),"Add Stakeholder"]}),o.jsxs("button",{onClick:()=>{N(!1),i()},className:"w-full px-3 py-2 flex items-center text-left hover:bg-gray-50",children:[o.jsx(xn,{className:"h-4 w-4 mr-2 text-gray-700"}),"Logout"]})]})})]})]}),o.jsx("div",{className:"relative z-10 bg-white rounded-lg shadow-md p-4 mb-6",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx("h2",{className:"text-lg font-semibold text-[#2d4660]",children:"Current Session"}),o.jsx("p",{className:"text-gray-600 mt-1",children:e.title})]}),o.jsxs("div",{className:"text-right",children:[o.jsx("p",{className:"text-sm text-gray-600",children:"Total Stakeholders"}),o.jsx("p",{className:"text-2xl font-bold text-[#2d4660]",children:l.length})]})]})}),o.jsxs("div",{className:"relative z-10 bg-white rounded-lg shadow-md overflow-hidden",children:[o.jsxs("div",{className:"p-6 border-b border-gray-200",children:[o.jsxs("h2",{className:"text-lg font-semibold text-[#2d4660]",children:["Stakeholders (",l.length,")"]}),o.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Manage who can vote in this session"})]}),l.length===0?o.jsxs("div",{className:"p-12 text-center",children:[o.jsx(Un,{className:"mx-auto h-12 w-12 text-gray-400"}),o.jsx("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"No stakeholders"}),o.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Get started by adding stakeholders to this voting session."}),o.jsx("div",{className:"mt-6",children:o.jsxs("button",{onClick:()=>p(!0),className:"inline-flex items-center px-4 py-2 bg-[#2d4660] text-white rounded-md hover:bg-[#1d3a53] transition-colors",children:[o.jsx(Oo,{className:"h-5 w-5 mr-2"}),"Add First Stakeholder"]})})]}):o.jsx("div",{className:"overflow-x-auto",children:o.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[o.jsx("thead",{className:"bg-gray-50",children:o.jsxs("tr",{children:[o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Name"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Email"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Voting Status"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Added"}),o.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),o.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:l.map(X=>o.jsxs("tr",{className:"hover:bg-gray-50",children:[o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:o.jsxs("div",{className:"flex items-center",children:[o.jsx(Un,{className:"h-5 w-5 text-gray-400 mr-2"}),o.jsx("span",{className:"text-sm font-medium text-gray-900",children:X.user_name})]})}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:o.jsxs("div",{className:"flex items-center text-sm text-gray-500",children:[o.jsx(Wu,{className:"h-4 w-4 mr-2"}),X.user_email]})}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:X.has_voted?o.jsxs("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800",children:[o.jsx(Or,{className:"h-3 w-3 mr-1"}),"Voted"]}):o.jsxs("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-gray-100 text-gray-800",children:[o.jsx(Zh,{className:"h-3 w-3 mr-1"}),"Pending"]})}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:Ae(X.created_at)}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:o.jsx("button",{onClick:()=>V(X.user_email),className:"text-red-600 hover:text-red-900",children:o.jsx(vi,{className:"h-5 w-5"})})})]},X.id))})]})})]}),f&&o.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:o.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-md w-full max-h-[90vh] overflow-y-auto",children:[o.jsxs("div",{className:"flex justify-between items-center mb-4",children:[o.jsx("h3",{className:"text-lg font-medium text-[#2d4660]",children:"Add Stakeholder"}),o.jsx("button",{onClick:()=>{p(!1),x({name:"",email:""}),q(""),Q([]),j({})},className:"text-gray-400 hover:text-gray-500",children:o.jsx(gi,{className:"h-5 w-5"})})]}),o.jsxs("form",{onSubmit:I,className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Name *"}),o.jsx("input",{type:"text",value:y.name,onChange:X=>x(re=>({...re,name:X.target.value})),className:`w-full px-3 py-2 border rounded-md focus:ring-2 focus:ring-[#2d4660] focus:border-transparent ${b.name?"border-red-500":"border-gray-300"}`,placeholder:"John Doe"}),b.name&&o.jsxs("p",{className:"mt-1 text-sm text-red-600 flex items-center",children:[o.jsx(Ut,{className:"h-4 w-4 mr-1"}),b.name]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email *"}),o.jsx("input",{type:"email",value:y.email,onChange:X=>x(re=>({...re,email:X.target.value})),className:`w-full px-3 py-2 border rounded-md focus:ring-2 focus:ring-[#2d4660] focus:border-transparent ${b.email?"border-red-500":"border-gray-300"}`,placeholder:"john@example.com"}),b.email&&o.jsxs("p",{className:"mt-1 text-sm text-red-600 flex items-center",children:[o.jsx(Ut,{className:"h-4 w-4 mr-1"}),b.email]})]}),o.jsxs("div",{children:[o.jsx(NZ,{products:P,value:D,onChange:q,label:"Product *",error:!!b.product}),b.product&&o.jsxs("p",{className:"mt-1 text-sm text-red-600 flex items-center",children:[o.jsx(Ut,{className:"h-4 w-4 mr-1"}),b.product]})]}),D&&o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Sessions * (Current and Future)"}),F.length===0?o.jsx("p",{className:"text-sm text-gray-500",children:"No current or future sessions found for this product."}):o.jsx("div",{className:"max-h-48 overflow-y-auto border border-gray-300 rounded-md p-2",children:F.map(X=>o.jsxs("label",{className:"flex items-start px-3 py-2 hover:bg-gray-50 cursor-pointer border-b border-gray-100 last:border-b-0",children:[o.jsx("input",{type:"checkbox",checked:B.includes(X.id),onChange:re=>{re.target.checked?Q(de=>[...de,X.id]):Q(de=>de.filter(xe=>xe!==X.id))},className:"w-4 h-4 border-gray-300 rounded focus:ring-[#2D4660] accent-green-600 mt-1",style:{accentColor:"#16a34a"}}),o.jsxs("div",{className:"ml-3 flex-1",children:[o.jsx("div",{className:"text-sm font-medium text-gray-900",children:X.title}),o.jsx("div",{className:"text-xs text-gray-500 mt-0.5",children:ve(X)}),o.jsx("div",{className:"text-xs mt-0.5",children:o.jsx("span",{className:`font-medium ${ge(X).color}`,children:ge(X).text})})]})]},X.id))}),b.sessions&&o.jsxs("p",{className:"mt-1 text-sm text-red-600 flex items-center",children:[o.jsx(Ut,{className:"h-4 w-4 mr-1"}),b.sessions]})]}),b.submit&&o.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-3",children:o.jsxs("p",{className:"text-sm text-red-800 flex items-center",children:[o.jsx(Ut,{className:"h-4 w-4 mr-2"}),b.submit]})}),o.jsxs("div",{className:"flex justify-end space-x-2 pt-4",children:[o.jsx("button",{type:"button",onClick:()=>{p(!1),x({name:"",email:""}),q(""),Q([]),j({})},className:"px-4 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50",disabled:S,children:"Cancel"}),o.jsx("button",{type:"submit",className:"px-4 py-2 bg-[#2d4660] text-white rounded-md hover:bg-[#1d3a53] disabled:opacity-50",disabled:S,children:S?"Adding...":"Add Stakeholder"})]})]})]})})]}):null}function EZ(){const{currentSession:e,currentUser:t,setCurrentUser:r,setCurrentSession:n}=Fi(),s=$s(),i=async()=>{try{await ze.auth.signOut()}catch{}try{n(null)}catch{}r(null);try{localStorage.removeItem("voting_system_current_session"),localStorage.removeItem("azureDevOpsAuthInProgress"),sessionStorage.removeItem("oauth_return_path"),sessionStorage.removeItem("oauth_action")}catch{}N(!1),s("/login",{replace:!0})},[l,u]=v.useState([]),[d,m]=v.useState(!0),[f,p]=v.useState(!1),[y,x]=v.useState({email:""}),[b,j]=v.useState({}),[S,k]=v.useState(!1),[C,N]=v.useState(!1),O=v.useRef(null);v.useEffect(()=>{if(!C)return;const K=B=>{O.current&&!O.current.contains(B.target)&&N(!1)};return document.addEventListener("mousedown",K),document.addEventListener("touchstart",K,{passive:!0}),()=>{document.removeEventListener("mousedown",K),document.removeEventListener("touchstart",K)}},[C]),v.useEffect(()=>{if(!e){s("/sessions");return}P()},[e,s]);const P=async()=>{if(e){m(!0);try{const K=await LC(e.id);u(K)}catch(K){console.error("Error loading admins:",K)}finally{m(!1)}}},T=K=>/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(K),D=async K=>{K.preventDefault();const B={};if(y.email.trim()?T(y.email)||(B.email="Invalid email address"):B.email="Email is required",l.some(Q=>Q.user.email.toLowerCase()===y.email.toLowerCase())&&(B.email="This user is already an admin"),j(B),!(Object.keys(B).length>0)&&e){k(!0);try{const Q=y.email.split("@")[0].replace(/\./g," ");await a5(e.id,y.email,Q);try{const oe=`${window.location.origin}/login?session=${e.session_code}`;await Dw({to:y.email,subject:`You're invited to administer: ${e.title}`,text:`Hi,

You've been added as an admin for "${e.title}".

Open: ${oe}

Best regards,
${(t==null?void 0:t.name)||""}`,html:`<p>Hi,</p><p>You've been added as an admin for <strong>${e.title}</strong>.</p><p><a href="${oe}">Open the Feature Voting System</a></p><p>Best regards,<br/>${(t==null?void 0:t.name)||""}</p>`})}catch{try{const oe=BC(e,y.email,(t==null?void 0:t.name)||"");window.location.href=oe}catch{}}await P(),x({email:""}),p(!1)}catch(Q){console.error("Error adding admin:",Q),j({submit:"Failed to add admin. Please try again."})}finally{k(!1)}}},q=async K=>{if(e){if(l.length===1){alert("Cannot remove the last admin. Sessions must have at least one admin.");return}if(K===(t==null?void 0:t.id)){alert("You cannot remove yourself as an admin.");return}if(confirm("Are you sure you want to remove this admin?"))try{await If(e.id,K),await P()}catch(B){console.error("Error removing admin:",B),alert("Failed to remove admin")}}},F=K=>new Date(K).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"});return e?d?o.jsx("div",{className:"min-h-screen w-full bg-gray-50 flex items-center justify-center",children:o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-[#2d4660] mx-auto mb-4"}),o.jsx("p",{className:"text-gray-600",children:"Loading admins..."})]})}):o.jsxs("div",{className:"container mx-auto p-4 max-w-6xl min-h-screen pb-8",children:[o.jsx("div",{className:"hidden md:flex md:justify-center mb-2",children:o.jsx("img",{src:"https://www.steeldynamics.com/wp-content/uploads/2024/05/New-Millennium-color-logo1.png",alt:"New Millennium Building Systems Logo",className:"-mt-4",style:{height:"96px",width:"auto"}})}),o.jsxs("div",{className:"flex justify-between items-center mb-6",children:[o.jsxs("div",{className:"flex items-center",children:[o.jsx("img",{src:"https://media.licdn.com/dms/image/C4D0BAQEC3OhRqehrKg/company-logo_200_200/0/1630518354793/new_millennium_building_systems_logo?e=2147483647&v=beta&t=LM3sJTmQZet5NshZ-RNHXW1MMG9xSi1asp-VUeSA9NA",alt:"New Millennium Building Systems Logo",className:"mr-4 md:hidden",style:{width:"40px",height:"40px"}}),o.jsx("button",{onClick:()=>s("/admin"),className:"mr-2 p-1 rounded-full hover:bg-gray-200 cursor-pointer",children:o.jsx(fc,{className:"h-6 w-6"})}),o.jsx("h1",{className:"text-2xl font-bold text-[#2d4660] md:text-3xl",children:"Session Admins"})]}),o.jsxs("div",{ref:O,className:"relative z-40",children:[o.jsxs("div",{className:"hidden md:flex space-x-2",children:[o.jsxs("button",{onClick:()=>s("/admin"),className:"flex items-center px-4 py-2 bg-[#4f6d8e] text-white rounded-lg hover:bg-[#3d5670] transition-colors",children:[o.jsx(sn,{className:"h-4 w-4 mr-2"}),"Admin Dashboard"]}),o.jsxs("button",{onClick:()=>p(!0),className:"flex items-center px-4 py-2 bg-[#c59f2d] text-white rounded-lg hover:bg-[#a88a26] transition-colors",children:[o.jsx(Oo,{className:"h-4 w-4 mr-2"}),"Add Admin"]}),o.jsxs("button",{onClick:i,className:"flex items-center px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-colors",children:[o.jsx(xn,{className:"h-4 w-4 mr-2"}),"Logout"]})]}),o.jsx("div",{className:"flex md:hidden",children:o.jsx("button",{onClick:()=>N(!C),className:"p-2 rounded-md border border-gray-200 bg-white shadow-sm","aria-label":"Open menu",children:o.jsx(Es,{className:"h-5 w-5 text-gray-700"})})}),C&&o.jsx("div",{className:"absolute right-0 mt-2 w-56 bg-white border border-gray-200 rounded-lg shadow-lg md:hidden z-50",children:o.jsxs("div",{className:"py-1",children:[o.jsxs("button",{onClick:()=>{N(!1),s("/admin")},className:"w-full px-3 py-2 flex items-center text-left hover:bg-gray-50",children:[o.jsx(sn,{className:"h-4 w-4 mr-2 text-gray-700"}),"Admin Dashboard"]}),o.jsxs("button",{onClick:()=>{N(!1),p(!0)},className:"w-full px-3 py-2 flex items-center text-left hover:bg-gray-50",children:[o.jsx(Oo,{className:"h-4 w-4 mr-2 text-gray-700"}),"Add Admin"]}),o.jsxs("button",{onClick:()=>{N(!1),i()},className:"w-full px-3 py-2 flex items-center text-left hover:bg-gray-50",children:[o.jsx(xn,{className:"h-4 w-4 mr-2 text-gray-700"}),"Logout"]})]})})]})]}),o.jsx("div",{className:"relative z-10 bg-white rounded-lg shadow-md p-4 mb-6",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx("h2",{className:"text-lg font-semibold text-[#2d4660]",children:"Current Session"}),o.jsx("p",{className:"text-gray-600 mt-1",children:e.title})]}),o.jsxs("div",{className:"text-right",children:[o.jsx("p",{className:"text-sm text-gray-600",children:"Total Admins"}),o.jsx("p",{className:"text-2xl font-bold text-[#2d4660]",children:l.length})]})]})}),o.jsxs("div",{className:"relative z-10 bg-white rounded-lg shadow-md overflow-hidden",children:[o.jsxs("div",{className:"p-6 border-b border-gray-200",children:[o.jsxs("h2",{className:"text-lg font-semibold text-[#2d4660]",children:["Session Admins (",l.length,")"]}),o.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Manage who can administer this voting session"})]}),o.jsx("div",{className:"overflow-x-auto",children:o.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[o.jsx("thead",{className:"bg-gray-50",children:o.jsxs("tr",{children:[o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Name"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Email"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Added"}),o.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),o.jsx("tbody",{className:"relative z-10 bg-white divide-y divide-gray-200",children:l.map(K=>o.jsxs("tr",{className:"hover:bg-gray-50",children:[o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:o.jsxs("div",{className:"flex items-center",children:[o.jsx(Hr,{className:"h-5 w-5 text-blue-500 mr-2"}),o.jsxs("span",{className:"text-sm font-medium text-gray-900",children:[K.user.name,K.user.id===(t==null?void 0:t.id)&&o.jsx("span",{className:"ml-2 text-xs text-gray-500",children:"(You)"})]})]})}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:o.jsxs("div",{className:"flex items-center text-sm text-gray-500",children:[o.jsx(Wu,{className:"h-4 w-4 mr-2"}),K.user.email]})}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:F(K.created_at)}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:o.jsx("button",{onClick:()=>q(K.user_id),className:`text-red-600 hover:text-red-900 ${K.user.id===(t==null?void 0:t.id)||l.length===1?"opacity-50 cursor-not-allowed":""}`,disabled:K.user.id===(t==null?void 0:t.id)||l.length===1,title:K.user.id===(t==null?void 0:t.id)?"You cannot remove yourself":l.length===1?"Cannot remove the last admin":"Remove admin",children:o.jsx(vi,{className:"h-5 w-5"})})})]},K.id))})]})})]}),o.jsx("div",{className:"relative z-10 mt-6 bg-blue-50 border border-blue-200 rounded-lg p-4",children:o.jsxs("div",{className:"flex items-start",children:[o.jsx(Hr,{className:"h-5 w-5 text-blue-600 mr-3 mt-0.5"}),o.jsxs("div",{className:"text-sm text-blue-800",children:[o.jsx("p",{className:"font-medium mb-1",children:"Session Admin Permissions:"}),o.jsxs("ul",{className:"list-disc list-inside space-y-1",children:[o.jsx("li",{children:"Manage features and voting settings for this session"}),o.jsx("li",{children:"Add and remove stakeholders for this session"}),o.jsx("li",{children:"View voting results and analytics for this session"}),o.jsx("li",{children:"Add and remove other session admins"})]}),o.jsx("p",{className:"mt-2 text-xs italic",children:"Note: System Admins have full admin access to all sessions in the system."})]})]})}),f&&o.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:o.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-md w-full",children:[o.jsxs("div",{className:"flex justify-between items-center mb-4",children:[o.jsx("h3",{className:"text-lg font-medium text-[#2d4660]",children:"Add Session Admin"}),o.jsx("button",{onClick:()=>{p(!1),x({email:""}),j({})},className:"text-gray-400 hover:text-gray-500",children:o.jsx(gi,{className:"h-5 w-5"})})]}),o.jsxs("form",{onSubmit:D,className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email Address *"}),o.jsx("input",{type:"email",value:y.email,onChange:K=>x(B=>({...B,email:K.target.value})),className:`w-full px-3 py-2 border rounded-md focus:ring-2 focus:ring-[#2d4660] focus:border-transparent ${b.email?"border-red-500":"border-gray-300"}`,placeholder:"admin@example.com"}),b.email&&o.jsxs("p",{className:"mt-1 text-sm text-red-600 flex items-center",children:[o.jsx(Ut,{className:"h-4 w-4 mr-1"}),b.email]})]}),b.submit&&o.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-3",children:o.jsxs("p",{className:"text-sm text-red-800 flex items-center",children:[o.jsx(Ut,{className:"h-4 w-4 mr-2"}),b.submit]})}),o.jsxs("div",{className:"flex justify-end space-x-2 pt-4",children:[o.jsx("button",{type:"button",onClick:()=>{p(!1),x({email:""}),j({})},className:"px-4 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50",disabled:S,children:"Cancel"}),o.jsx("button",{type:"submit",className:"px-4 py-2 bg-[#2d4660] text-white rounded-md hover:bg-[#1d3a53] disabled:opacity-50",disabled:S,children:S?"Adding...":"Add Admin"})]})]})]})})]}):null}function AZ(){const{currentUser:e,sessions:t}=Fi(),r=$s(),[n,s]=v.useState([]),[i,l]=v.useState(!0),[u,d]=v.useState(!1);v.useEffect(()=>{m()},[t]);const m=async()=>{l(!0);try{const y=new Set;for(const x of t)(await LC(x.id)).forEach(j=>{j.user&&j.user.email&&y.add(j.user.email)});s(Array.from(y))}catch(y){console.error("Error loading admin emails:",y)}finally{l(!1)}},f=()=>{const y=encodeURIComponent(" Request: Add me to Feature Voting System"),x=encodeURIComponent(`Hi Team,

I tried to access the Feature Voting System but don't have admin permissions yet.

Could you please add me to the system so I can participate in voting?

My details:
Name: ${(e==null?void 0:e.name)||"Unknown"}
Email: ${(e==null?void 0:e.email)||"Unknown"}

Thanks!
${(e==null?void 0:e.name)||"A hopeful voter"} `),b=n.length>0?`mailto:${n.join(",")}?subject=${y}&body=${x}`:`mailto:?subject=${y}&body=${x}`;window.location.href=b,d(!0)},p=()=>{r("/login")};return i?o.jsx("div",{className:"min-h-screen w-full bg-gray-50 flex items-center justify-center",children:o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-[#2d4660] mx-auto mb-4"}),o.jsx("p",{className:"text-gray-600",children:"Loading..."})]})}):o.jsx("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 to-gray-100 flex items-center justify-center p-4",children:o.jsxs("div",{className:"max-w-md w-full",children:[o.jsx("div",{className:"text-center mb-8",children:o.jsx("img",{src:"https://www.steeldynamics.com/wp-content/uploads/2024/05/New-Millennium-color-logo1.png",alt:"New Millennium Building Systems Logo",className:"mx-auto",style:{height:"80px",width:"auto"}})}),o.jsxs("div",{className:"relative z-10 bg-white rounded-xl shadow-lg overflow-hidden",children:[o.jsxs("div",{className:"bg-gradient-to-r from-[#2d4660] to-[#1d3a53] p-6 text-center",children:[o.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-white/10 rounded-full mb-4",children:o.jsx(JM,{className:"h-8 w-8 text-white"})}),o.jsx("h1",{className:"text-2xl font-bold text-white mb-2",children:"Whoa There, Speedracer! "}),o.jsx("p",{className:"text-blue-100 text-sm",children:"You need access to the Feature Voting System"})]}),o.jsx("div",{className:"p-6",children:u?o.jsx(o.Fragment,{children:o.jsxs("div",{className:"text-center py-4",children:[o.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-green-100 rounded-full mb-4",children:o.jsx(Or,{className:"h-8 w-8 text-green-600"})}),o.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-2",children:"Email Sent! "}),o.jsx("p",{className:"text-gray-600 mb-6",children:"Your access request has been sent to the admin team. They'll get you set up soon!"}),o.jsxs("button",{onClick:p,className:"inline-flex items-center px-4 py-2 bg-[#2d4660] text-white rounded-lg hover:bg-[#1d3a53] transition-colors",children:[o.jsx(_S,{className:"h-4 w-4 mr-2"}),"Back to Login"]})]})}):o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"mb-6",children:[o.jsx("p",{className:"text-gray-600 mb-4",children:"Looks like you're trying to access the Feature Voting System, but you haven't been added yet."}),o.jsx("p",{className:"text-gray-600 mb-4",children:"No worries! Click the button below to send a quick message to the admins asking to be added."}),o.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:o.jsxs("div",{className:"flex items-start",children:[o.jsx(In,{className:"h-5 w-5 text-blue-600 mr-2 mt-0.5 flex-shrink-0"}),o.jsx("div",{className:"text-sm text-blue-800",children:n.length>0?o.jsxs(o.Fragment,{children:[o.jsx("p",{className:"font-medium mb-1",children:"Your message will be sent to:"}),o.jsx("p",{className:"text-xs",children:n.join(", ")})]}):o.jsx("p",{children:"Your message will help the admin team get you set up!"})})]})})]}),o.jsxs("div",{className:"space-y-3",children:[o.jsxs("button",{onClick:f,className:"w-full flex items-center justify-center px-4 py-3 bg-[#c59f2d] text-white rounded-lg hover:bg-[#a88a26] transition-colors font-medium",children:[o.jsx(Wu,{className:"h-5 w-5 mr-2"}),"Request Access from Admins"]}),o.jsxs("button",{onClick:p,className:"w-full flex items-center justify-center px-4 py-3 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-colors",children:[o.jsx(_S,{className:"h-4 w-4 mr-2"}),"Back to Login"]})]})]})})]}),o.jsx("div",{className:"mt-6 text-center",children:o.jsx("p",{className:"text-sm text-gray-500",children:"Once you're added to the system, you'll be able to participate in voting sessions."})})]})})}function PZ(){const{currentUser:e,setCurrentUser:t,setCurrentSession:r}=Fi(),n=$s(),s=async()=>{try{await ze.auth.signOut()}catch{}try{r(null)}catch{}t(null);try{localStorage.removeItem("voting_system_current_session"),localStorage.removeItem("azureDevOpsAuthInProgress"),sessionStorage.removeItem("oauth_return_path"),sessionStorage.removeItem("oauth_action")}catch{}C(!1),n("/login",{replace:!0})},[i,l]=v.useState([]),[u,d]=v.useState(!0),[m,f]=v.useState(!1),[p,y]=v.useState({email:""}),[x,b]=v.useState({}),[j,S]=v.useState(!1),[k,C]=v.useState(!1),N=v.useRef(null);v.useEffect(()=>{if(!k)return;const F=K=>{N.current&&!N.current.contains(K.target)&&C(!1)};return document.addEventListener("mousedown",F),document.addEventListener("touchstart",F,{passive:!0}),()=>{document.removeEventListener("mousedown",F),document.removeEventListener("touchstart",F)}},[k]),v.useEffect(()=>{O()},[]);const O=async()=>{d(!0);try{let F=await Ov();F.length===0&&e&&(console.log("No system admins found. Adding current user as first system admin..."),await Yf(e.id),F=await Ov()),l(F)}catch(F){console.error("Error loading system admins:",F)}finally{d(!1)}},P=F=>/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(F),T=async F=>{F.preventDefault();const K={};if(p.email.trim()?P(p.email)||(K.email="Invalid email address"):K.email="Email is required",i.some(B=>B.user.email.toLowerCase()===p.email.toLowerCase())&&(K.email="This user is already a system admin"),b(K),!(Object.keys(K).length>0)){S(!0);try{const B=p.email.split("@")[0].replace(/\./g," "),Q=await K0(p.email,B);await Yf(Q.id);try{const oe=`${window.location.origin}/login`;await Dw({to:p.email,subject:"You're a System Admin: Feature Voting System",text:`Hi,

You've been granted System Admin access to the Feature Voting System.

Login: ${oe}

Best regards,
System`,html:`<p>Hi,</p><p>You've been granted <strong>System Admin</strong> access to the Feature Voting System.</p><p><a href="${oe}">Login</a></p><p>Best regards,<br/>System</p>`})}catch{try{const oe=`${window.location.origin}/login`,ae=encodeURIComponent("You're a System Admin: Feature Voting System"),J=encodeURIComponent(`Hi,

You've been granted System Admin access to the Feature Voting System.

To sign in, use this link:

${oe}

Best regards,
System`);window.location.href=`mailto:${encodeURIComponent(p.email)}?subject=${ae}&body=${J}`}catch{}}await O(),y({email:""}),f(!1)}catch(B){console.error("Error adding system admin:",B),b({submit:"Failed to add system admin. Please try again."})}finally{S(!1)}}},D=async F=>{const K=i.reduce((B,Q)=>new Date(Q.created_at)<new Date(B.created_at)?Q:B);if(F===K.user_id){alert("Cannot remove the original system admin. This protects against accidentally locking everyone out of the system.");return}if(i.length===1){alert("Cannot remove the last system admin. The system must have at least one admin.");return}if(F===(e==null?void 0:e.id)){alert("You cannot remove yourself as a system admin.");return}if(confirm("Are you sure you want to remove this system admin?"))try{await Df(F),await O()}catch(B){console.error("Error removing system admin:",B),alert("Failed to remove system admin")}},q=F=>new Date(F).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"});return u?o.jsx("div",{className:"min-h-screen w-full bg-gray-50 flex items-center justify-center",children:o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-[#2d4660] mx-auto mb-4"}),o.jsx("p",{className:"text-gray-600",children:"Loading system admins..."})]})}):o.jsxs("div",{className:"container mx-auto p-4 max-w-6xl min-h-screen pb-8",children:[o.jsx("div",{className:"hidden md:flex md:justify-center mb-2",children:o.jsx("img",{src:"https://www.steeldynamics.com/wp-content/uploads/2024/05/New-Millennium-color-logo1.png",alt:"New Millennium Building Systems Logo",className:"-mt-4",style:{height:"96px",width:"auto"}})}),o.jsxs("div",{className:"flex justify-between items-center mb-6",children:[o.jsxs("div",{className:"flex items-center",children:[o.jsx("img",{src:"https://media.licdn.com/dms/image/C4D0BAQEC3OhRqehrKg/company-logo_200_200/0/1630518354793/new_millennium_building_systems_logo?e=2147483647&v=beta&t=LM3sJTmQZet5NshZ-RNHXW1MMG9xSi1asp-VUeSA9NA",alt:"New Millennium Building Systems Logo",className:"mr-4 md:hidden",style:{width:"40px",height:"40px"}}),o.jsx("button",{onClick:()=>n("/sessions"),className:"mr-2 p-1 rounded-full hover:bg-gray-200 cursor-pointer",children:o.jsx(fc,{className:"h-6 w-6"})}),o.jsx("h1",{className:"text-2xl font-bold text-[#2d4660] md:text-3xl",children:"System Admins"})]}),o.jsxs("div",{ref:N,className:"relative z-40",children:[o.jsxs("div",{className:"hidden md:flex space-x-2",children:[o.jsxs("button",{onClick:()=>n("/sessions"),className:"flex items-center px-4 py-2 bg-[#4f6d8e] text-white rounded-lg hover:bg-[#3d5670] transition-colors",children:[o.jsx(sn,{className:"h-4 w-4 mr-2"}),"My Sessions"]}),o.jsxs("button",{onClick:()=>f(!0),className:"flex items-center px-4 py-2 bg-[#c59f2d] text-white rounded-lg hover:bg-[#a88a26] transition-colors",children:[o.jsx(Oo,{className:"h-4 w-4 mr-2"}),"Add System Admin"]}),o.jsxs("button",{onClick:s,className:"flex items-center px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-colors",children:[o.jsx(xn,{className:"h-4 w-4 mr-2"}),"Logout"]})]}),o.jsx("div",{className:"flex md:hidden",children:o.jsx("button",{onClick:()=>C(!k),className:"p-2 rounded-md border border-gray-200 bg-white shadow-sm","aria-label":"Open menu",children:o.jsx(Es,{className:"h-5 w-5 text-gray-700"})})}),k&&o.jsx("div",{className:"absolute right-0 mt-2 w-56 bg-white border border-gray-200 rounded-lg shadow-lg md:hidden z-50",children:o.jsxs("div",{className:"py-1",children:[o.jsxs("button",{onClick:()=>{C(!1),n("/sessions")},className:"w-full px-3 py-2 flex items-center text-left hover:bg-gray-50",children:[o.jsx(sn,{className:"h-4 w-4 mr-2 text-gray-700"}),"My Sessions"]}),o.jsxs("button",{onClick:()=>{C(!1),f(!0)},className:"w-full px-3 py-2 flex items-center text-left hover:bg-gray-50",children:[o.jsx(Oo,{className:"h-4 w-4 mr-2 text-gray-700"}),"Add System Admin"]}),o.jsxs("button",{onClick:()=>{C(!1),s()},className:"w-full px-3 py-2 flex items-center text-left hover:bg-gray-50",children:[o.jsx(xn,{className:"h-4 w-4 mr-2 text-gray-700"}),"Logout"]})]})})]})]}),o.jsx("div",{className:"relative z-10 bg-gradient-to-r from-[#2d4660] to-[#1d3a53] rounded-lg shadow-md p-6 mb-6 text-white",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center",children:[o.jsx(us,{className:"h-8 w-8 mr-3"}),o.jsxs("div",{children:[o.jsx("h2",{className:"text-xl font-semibold",children:"Feature Voting System"}),o.jsx("p",{className:"text-blue-100 mt-1",children:"Global administrator management"})]})]}),o.jsxs("div",{className:"text-right",children:[o.jsx("p",{className:"text-sm text-blue-100",children:"Total System Admins"}),o.jsx("p",{className:"text-3xl font-bold",children:i.length})]})]})}),o.jsxs("div",{className:"relative z-10 bg-white rounded-lg shadow-md overflow-hidden",children:[o.jsxs("div",{className:"p-6 border-b border-gray-200",children:[o.jsxs("h2",{className:"text-lg font-semibold text-[#2d4660]",children:["System Administrators (",i.length,")"]}),o.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Manage who has full access to the Feature Voting System"})]}),o.jsx("div",{className:"overflow-x-auto",children:o.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[o.jsx("thead",{className:"bg-gray-50",children:o.jsxs("tr",{children:[o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Name"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Email"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Added"}),o.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),o.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:(()=>{const F=i.reduce((K,B)=>new Date(B.created_at)<new Date(K.created_at)?B:K);return i.map(K=>{const B=K.user_id===F.user_id;return o.jsxs("tr",{className:"hover:bg-gray-50",children:[o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:o.jsxs("div",{className:"flex items-center",children:[o.jsx(us,{className:"h-5 w-5 text-[#c59f2d] mr-2"}),o.jsxs("span",{className:"text-sm font-medium text-gray-900",children:[K.user.name,K.user.id===(e==null?void 0:e.id)&&o.jsx("span",{className:"ml-2 text-xs text-gray-500",children:"(You)"}),B&&o.jsx("span",{className:"ml-2 text-xs text-[#c59f2d] font-semibold",children:"(Original Admin)"})]})]})}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:o.jsxs("div",{className:"flex items-center text-sm text-gray-500",children:[o.jsx(Wu,{className:"h-4 w-4 mr-2"}),K.user.email]})}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:q(K.created_at)}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:o.jsx("button",{onClick:()=>D(K.user_id),className:`text-red-600 hover:text-red-900 ${K.user.id===(e==null?void 0:e.id)||i.length===1||B?"opacity-50 cursor-not-allowed":""}`,disabled:K.user.id===(e==null?void 0:e.id)||i.length===1||B,title:B?"Cannot remove the original system admin":K.user.id===(e==null?void 0:e.id)?"You cannot remove yourself":i.length===1?"Cannot remove the last system admin":"Remove system admin",children:o.jsx(vi,{className:"h-5 w-5"})})})]},K.id)})})()})]})})]}),o.jsx("div",{className:"relative z-10 mt-6 bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:o.jsxs("div",{className:"flex items-start",children:[o.jsx(us,{className:"h-5 w-5 text-yellow-600 mr-3 mt-0.5"}),o.jsxs("div",{className:"text-sm text-yellow-800",children:[o.jsx("p",{className:"font-medium mb-1",children:"System Admin Permissions:"}),o.jsxs("ul",{className:"list-disc list-inside space-y-1",children:[o.jsx("li",{children:"Full access to all voting sessions across the system"}),o.jsx("li",{children:"Create and manage any voting session"}),o.jsx("li",{children:"Add and remove other system administrators"}),o.jsx("li",{children:"Manage session admins and stakeholders for any session"}),o.jsx("li",{children:"View all results and analytics system-wide"})]}),o.jsx("p",{className:"mt-3 text-xs font-medium",children:"Note: The original system admin (first person to access this page) cannot be removed to prevent system lockout."})]})]})}),m&&o.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:o.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-md w-full",children:[o.jsxs("div",{className:"flex justify-between items-center mb-4",children:[o.jsx("h3",{className:"text-lg font-medium text-[#2d4660]",children:"Add System Admin"}),o.jsx("button",{onClick:()=>{f(!1),y({email:""}),b({})},className:"text-gray-400 hover:text-gray-500",children:o.jsx(gi,{className:"h-5 w-5"})})]}),o.jsxs("form",{onSubmit:T,className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email Address *"}),o.jsx("input",{type:"email",value:p.email,onChange:F=>y(K=>({...K,email:F.target.value})),className:`w-full px-3 py-2 border rounded-md focus:ring-2 focus:ring-[#2d4660] focus:border-transparent ${x.email?"border-red-500":"border-gray-300"}`,placeholder:"admin@example.com"}),x.email&&o.jsxs("p",{className:"mt-1 text-sm text-red-600 flex items-center",children:[o.jsx(Ut,{className:"h-4 w-4 mr-1"}),x.email]})]}),x.submit&&o.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-3",children:o.jsxs("p",{className:"text-sm text-red-800 flex items-center",children:[o.jsx(Ut,{className:"h-4 w-4 mr-2"}),x.submit]})}),o.jsxs("div",{className:"flex justify-end space-x-2 pt-4",children:[o.jsx("button",{type:"button",onClick:()=>{f(!1),y({email:""}),b({})},className:"px-4 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50",disabled:j,children:"Cancel"}),o.jsx("button",{type:"submit",className:"px-4 py-2 bg-[#2d4660] text-white rounded-md hover:bg-[#1d3a53] disabled:opacity-50",disabled:j,children:j?"Adding...":"Add System Admin"})]})]})]})})]})}function pv({products:e,value:t,onChange:r,label:n,error:s,onProductChange:i}){const[l,u]=v.useState(!1),d=v.useRef(null);v.useEffect(()=>{function p(y){d.current&&!d.current.contains(y.target)&&u(!1)}return document.addEventListener("mousedown",p),()=>document.removeEventListener("mousedown",p)},[]);const m=e.find(p=>p.id===t),f=m?Qn(m.name,m.color_hex??null):null;return o.jsxs("div",{ref:d,className:"relative",children:[n&&o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:n}),o.jsxs("div",{onClick:()=>u(!l),className:`w-full px-3 py-2 border rounded-md bg-white cursor-pointer flex items-center justify-between hover:border-gray-400 ${s?"border-red-500":"border-gray-300"}`,children:[o.jsxs("div",{className:"flex items-center gap-2 flex-1 min-w-0",children:[m&&f&&o.jsx("div",{className:"w-4 h-4 rounded flex-shrink-0",style:{backgroundColor:f.background}}),o.jsx("span",{className:`text-sm truncate ${t?"text-gray-900":"text-gray-400"}`,children:m?m.name:"Select a Product"})]}),o.jsx(On,{className:`h-4 w-4 text-gray-400 transition-transform flex-shrink-0 ${l?"transform rotate-180":""}`})]}),l&&o.jsx("div",{className:"absolute z-50 w-full mt-1 bg-white border border-gray-300 rounded-md shadow-lg max-h-60 overflow-y-auto",children:e.length===0?o.jsx("div",{className:"px-3 py-2 text-sm text-gray-500 text-center",children:"No products available"}):e.map(p=>{const y=Qn(p.name,p.color_hex??null),x=t===p.id;return o.jsxs("div",{onClick:()=>{r(p.id),u(!1),i&&i()},className:`px-3 py-2 cursor-pointer hover:bg-gray-50 flex items-center gap-2 ${x?"bg-gray-50":""}`,children:[o.jsx("div",{className:"w-4 h-4 rounded flex-shrink-0",style:{backgroundColor:y.background}}),o.jsx("span",{className:"text-sm text-gray-900 flex-1",children:p.name}),x&&o.jsx(Or,{className:"h-4 w-4 text-gray-400 flex-shrink-0"})]},p.id)})})]})}function OZ(){const{currentUser:e,setCurrentUser:t,setCurrentSession:r,currentSession:n}=Fi(),s=$s(),[i]=cC(),[l,u]=v.useState([]),[d,m]=v.useState([]),[f,p]=v.useState(!0),[y,x]=v.useState(""),[b,j]=v.useState("all"),[S,k]=v.useState(!1),[C,N]=v.useState(null),[O,P]=v.useState(null),T=v.useRef(null),D=v.useRef({}),q=v.useRef(!1),[F,K]=v.useState(!1),[B,Q]=v.useState(!1),[oe,ae]=v.useState([]),[J,H]=v.useState("system-admin"),[ne,ie]=v.useState(!0),[ge,ve]=v.useState(!1),[I,V]=v.useState(null),[Ae,X]=v.useState(null),[re,de]=v.useState([]),[xe,ye]=v.useState(""),[U,$e]=v.useState({adminSessions:[],stakeholderSessions:[]}),[Ze,Z]=v.useState(!1),[Pe,Ve]=v.useState(null),[ft,gt]=v.useState(!1),[Ct,_t]=v.useState(null),[kt,$]=v.useState(new Set),[G,ue]=v.useState(new Map),[_e,be]=v.useState(!1),[je,Fe]=v.useState(!1),[ke,Ke]=v.useState({name:"",email:"",password:"",isSystemAdmin:!1,sessionAdminIds:[],stakeholderSessionIds:[]}),[ct,ir]=v.useState({systemAdmin:!1,sessionAdmin:!1,stakeholder:!1}),[Mt,Et]=v.useState("User Management"),[Qt,Tt]=v.useState([]),[Wt,_r]=v.useState(""),[er,ar]=v.useState([]),[Ur,xr]=v.useState(""),[hr,At]=v.useState([]),[un,Rn]=v.useState(!1),[kr,mr]=v.useState(null),[Ft,qt]=v.useState(!0),[Nr,Cr]=v.useState(!0),Vn=async()=>{try{await ze.auth.signOut()}catch{}try{r(null)}catch{}t(null);try{localStorage.removeItem("voting_system_current_session"),localStorage.removeItem("azureDevOpsAuthInProgress"),sessionStorage.removeItem("oauth_return_path"),sessionStorage.removeItem("oauth_action")}catch{}k(!1),s("/login",{replace:!0})};v.useEffect(()=>{if(!S)return;const A=he=>{T.current&&!T.current.contains(he.target)&&k(!1)};return document.addEventListener("mousedown",A),document.addEventListener("touchstart",A,{passive:!0}),()=>{document.removeEventListener("mousedown",A),document.removeEventListener("touchstart",A)}},[S]),v.useEffect(()=>{if(!C)return;const A=he=>{const M=D.current[C];M&&!M.contains(he.target)&&N(null)};return document.addEventListener("mousedown",A),document.addEventListener("touchstart",A,{passive:!0}),()=>{document.removeEventListener("mousedown",A),document.removeEventListener("touchstart",A)}},[C]);const Tr=async()=>{try{const A=await OC(),he=await oa(),M=new Date,te=A.filter(ce=>he.some(Ie=>Ie.product_id!==ce.id?!1:new Date(Ie.end_date)>=M));Tt(te)}catch(A){console.error("Error loading products:",A)}},qn=A=>{if(!A){ar([]);return}const he=new Date,M=re.filter(te=>te.product_id!==A?!1:new Date(te.end_date)>=he);ar(M)};v.useEffect(()=>{Wt?qn(Wt):ar([])},[Wt,re]);const Sn=A=>{if(!A){At([]);return}const he=new Date,M=re.filter(te=>te.product_id!==A?!1:new Date(te.end_date)>=he);At(M)};v.useEffect(()=>{Ur?Sn(Ur):At([])},[Ur,re]),v.useEffect(()=>{const A=i.get("filter");A==="session-admin"?(Et("Session Admin Management"),j("session-admin")):A==="stakeholder"?(Et("Stakeholder Management"),j("stakeholder")):Et("User Management")},[i]);const Er=async A=>{p(!0),console.log("=== CHECKING USERS TABLE SCHEMA ===");try{const{data:he,error:M}=await ze.from("users").select("*").limit(1).single();he?(console.log(" Sample user record:",he),console.log(" Available fields:",Object.keys(he)),console.log(" Has created_by?","created_by"in he),console.log(" Has created_by_name?","created_by_name"in he),console.log(" Has created_by_user_id?","created_by_user_id"in he)):console.log(" No users found or error:",M)}catch(he){console.log(" Error checking schema:",he)}console.log(`=== END SCHEMA CHECK ===
`);try{const he=await Fj(),M=new Map;await Promise.all(A.map(async Se=>{try{const fe=await zC(Se.id);M.set(Se.id,fe)}catch(fe){console.error(`Error loading stakeholders for session ${Se.id}:`,fe),M.set(Se.id,[])}}));const te=await Promise.all(he.map(async Se=>{const fe=await t5(Se.id),we=[],rt=[];if(fe.sessionAdminCount>0)try{const{data:wt,error:Je}=await ze.from("session_admins").select("session_id").eq("user_id",Se.id);if(Je)console.error("Error fetching admin sessions:",Je);else if(wt){const Pt=wt.map(ht=>ht.session_id);we.push(...A.filter(ht=>Pt.includes(ht.id)))}}catch(wt){console.error("Error querying session_admins:",wt)}for(const wt of A)(M.get(wt.id)||[]).some(ht=>{const Re=ht.user_email&&Se.email&&ht.user_email.toLowerCase()===Se.email.toLowerCase(),ut=ht.user_id===Se.id||ht.id===Se.id;return Re||ut})&&rt.push(wt);return{...Se,roles:fe,adminInSessions:we,stakeholderInSessions:rt}}));u(te);const ce=new Map;te.forEach(Se=>{const fe=Se.email.toLowerCase().trim();ce.has(fe)||ce.set(fe,[]),ce.get(fe).push(Se.id)});const Ie=new Map;ce.forEach((Se,fe)=>{Se.length>1&&Ie.set(fe,Se)}),ue(Ie)}catch(he){console.error("Error loading users:",he)}finally{p(!1)}},_n=async()=>{if(e){ie(!0);try{const A=await Vo(e.id);K(A);const he=await oa();let M=[];if(A)de(he),await gs(),await Er(he);else{const te=await Promise.all(he.map(Se=>Su(Se.id,e.id)));he.forEach((Se,fe)=>{te[fe]&&M.push(Se.id)});const ce=M.length>0;if(Q(ce),ae(M),!ce){s("/sessions");return}const Ie=he.filter(Se=>M.includes(Se.id));de(Ie),H("session-admin"),await Er(Ie)}}catch(A){console.error("Error checking access:",A),s("/sessions")}finally{ie(!1)}}},gs=async()=>{try{const A=["chris.rodes@newmill.com","spencer.faull@newmill.com"],he=new Set,M=await Ov();if(M.length>0){const ce=M.reduce((Ie,Se)=>new Date(Se.created_at)<new Date(Ie.created_at)?Se:Ie);_t(ce.user_id),he.add(ce.user_id)}(await Fj()).forEach(ce=>{A.includes(ce.email.toLowerCase())&&he.add(ce.id)}),$(he)}catch(A){console.error("Error loading protected accounts:",A)}},Ht=A=>{if(A.id===Ct)return"Original Admin";const he=A.email.toLowerCase();return he==="chris.rodes@newmill.com"?"Manager":he==="spencer.faull@newmill.com"?"Portfolio Owner":null},Hn=A=>{const he=A.email.toLowerCase().trim(),M=G.get(he);return M?M.length>1:!1},Fs=A=>{const he=A.email.toLowerCase().trim(),M=G.get(he);return M?M.length:1},dn=()=>{let A=[...l];if(J==="session-admin"&&re.length>0){const he=new Set(re.map(M=>M.id));A=A.filter(M=>{var Ie,Se;if(M.id===(e==null?void 0:e.id))return!0;const te=(Ie=M.adminInSessions)==null?void 0:Ie.some(fe=>fe&&he.has(fe.id)),ce=(Se=M.stakeholderInSessions)==null?void 0:Se.some(fe=>fe&&he.has(fe.id));return!!te||!!ce})}if(y.trim()){const he=y.toLowerCase();A=A.filter(M=>M.name.toLowerCase().includes(he)||M.email.toLowerCase().includes(he))}b!=="all"&&(A=A.filter(he=>{switch(b){case"system-admin":return he.roles.isSystemAdmin;case"session-admin":return he.roles.sessionAdminCount>0&&!he.roles.isSystemAdmin;case"stakeholder":return he.roles.stakeholderSessionCount>0&&he.roles.sessionAdminCount===0&&!he.roles.isSystemAdmin;case"none":return!he.roles.isSystemAdmin&&he.roles.sessionAdminCount===0&&he.roles.stakeholderSessionCount===0;default:return!0}})),m(A)};v.useEffect(()=>{if(!e){s("/login");return}if(!q.current)return q.current=!0,_n(),()=>{}},[e]),v.useEffect(()=>{const A=i.get("filter");A&&["system-admin","session-admin","stakeholder","none"].includes(A)&&j(A)},[i]),v.useEffect(()=>{J==="session-admin"&&(b==="system-admin"||b==="session-admin"||b==="all")&&j("stakeholder")},[J,b]),v.useEffect(()=>{dn()},[l,y,b,J,re,e]);const $n=async A=>{try{const he=[],M=[];for(const te of re)await Su(A,te.id)&&he.push(te.id),await o5(A,te.id)&&M.push(te.id);$e({adminSessions:he,stakeholderSessions:M})}catch(he){console.error("Error loading user session memberships:",he)}},Xt=async(A,he)=>{X(A),V(he),ye(""),ve(!0),N(null),await $n(A.id)},kn=()=>{ve(!1),V(null),X(null),ye(""),$e({adminSessions:[],stakeholderSessions:[]})},wr=async()=>{if(!(!Ae||!xe||!I))try{I==="session-admin"?await Vl(xe,Ae.id):I==="stakeholder"?await Lj(xe,Ae.email,Ae.name):I==="remove-stakeholder"&&await Pv(xe,Ae.email),kn(),await Er(re)}catch(A){console.error("Error modifying user session role:",A);const he=(A==null?void 0:A.message)||(A==null?void 0:A.toString())||"Unknown error";console.error("Full error details:",A),alert(`Failed to ${I==="remove-stakeholder"?"remove stakeholder from":"add user to"} session.

Error: ${he}

Please check the console for more details.`)}},Br=async(A,he)=>{if(N(null),!!confirm(`Are you sure you want to ${he?"remove":"grant"} system admin access for this user?`))try{he?await Df(A):await Yf(A),await Er(re)}catch(M){console.error("Error toggling system admin:",M),alert("Failed to update system admin status. Please try again.")}},ys=async(A,he)=>{N(null);const M=J==="session-admin"?`Are you sure you want to remove ${he} from all sessions you manage? This will remove them as a stakeholder or session admin from your sessions only.`:`Are you sure you want to remove all roles from ${he}? This will remove them from all sessions and revoke system admin access.`;if(confirm(M))try{if(J==="system-admin"&&await Df(A),J==="session-admin"){for(const te of oe)try{await If(te,A)}catch(ce){console.error(`Error removing session admin from ${te}:`,ce)}for(const te of oe)try{await Ng(te,A)}catch(ce){console.error(`Error removing stakeholder from ${te}:`,ce)}}else for(const te of re)try{await If(te.id,A),await Ng(te.id,A)}catch{}await Er(re)}catch(te){console.error("Error removing roles:",te),alert("Failed to remove roles. Please try again.")}},Ls=async(A,he)=>{const M=l.find(te=>te.id===A);if(M){if(J==="session-admin"){if(M.roles.stakeholderSessionCount===0){alert("This user is not a stakeholder in any sessions.");return}const te=`Are you sure you want to remove ${he} as a stakeholder from all sessions you manage?`;if(!confirm(te))return;try{let ce=0;for(const Ie of re)try{await Pv(Ie.id,M.email),ce++}catch(Se){console.error(`Error removing stakeholder from session ${Ie.id}:`,Se)}await Er(re),ce>0?alert(`${he} has been removed as a stakeholder from ${ce} session(s) you manage.`):alert(`${he} was not a stakeholder in any of the sessions you manage.`)}catch(ce){console.error("Error removing stakeholder:",ce),alert("Failed to remove stakeholder. Please try again.")}return}Ve(M),Z(!0)}},Si=async()=>{if(Pe){if(kt.has(Pe.id)){const A=Ht(Pe);alert(`Cannot delete this protected account${A?` (${A})`:""}. This protects against accidentally locking important users out of the system.`),Z(!1),Ve(null);return}gt(!0);try{for(const he of re)try{await If(he.id,Pe.id),await Ng(he.id,Pe.id)}catch{}if(Pe.roles.isSystemAdmin)try{await Df(Pe.id)}catch(he){console.error("Error removing system admin role:",he)}const{error:A}=await ze.from("users").delete().eq("id",Pe.id);if(A)throw A;await Er(re),Z(!1),Ve(null)}catch(A){console.error("Error deleting user:",A),alert("Failed to delete user. Please try again.")}finally{gt(!1)}}},Y=()=>{Z(!1),Ve(null)},me=()=>{Ke({name:"",email:"",password:Oe(),isSystemAdmin:!1,sessionAdminIds:[],stakeholderSessionIds:[]}),_r(""),ar([]),xr(""),At([]),Tr(),be(!0)},Ce=()=>{be(!1),Ke({name:"",email:"",password:"",isSystemAdmin:!1,sessionAdminIds:[],stakeholderSessionIds:[]}),_r(""),ar([]),xr(""),At([]),qt(!0),Cr(!0),ir({systemAdmin:!1,sessionAdmin:!1,stakeholder:!1})},Oe=()=>{const he="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789!@#$%^&*";let M="";for(let te=0;te<12;te++)M+=he.charAt(Math.floor(Math.random()*he.length));return M},tt=async()=>{if(!ke.name.trim()||!ke.email.trim()||!ke.password.trim()){alert("Please fill in all required fields (Name, Email, Password)");return}Fe(!0);try{const{data:A,error:he}=await ze.auth.signUp({email:ke.email,password:ke.password,options:{data:{name:ke.name}}});if(he)throw he;if(!A.user)throw new Error("User creation failed");const M=A.user.id,{error:te}=await ze.from("users").insert({id:M,name:ke.name,email:ke.email,created_by:e==null?void 0:e.id,created_by_name:e==null?void 0:e.name});if(te)throw te;if(J==="system-admin"&&ke.isSystemAdmin&&await Yf(M),J==="system-admin"&&ct.sessionAdmin&&Ur)if(Nr)for(const Se of hr)try{await Vl(Se.id,M)}catch(fe){console.error(`Error adding session admin role to session ${Se.id}:`,fe)}else for(const Se of ke.sessionAdminIds)try{await Vl(Se,M)}catch(fe){console.error("Error adding session admin role:",fe)}console.log("Adding stakeholder to sessions:",ke.stakeholderSessionIds),console.log("View mode:",J),console.log("User admin sessions:",oe),console.log("All sessions:",re.map(Se=>({id:Se.id,title:Se.title})));let ce=[];if(J==="session-admin"?Wt&&Ft?ce=er.map(Se=>Se.id):Wt&&!Ft&&(ce=ke.stakeholderSessionIds):J==="system-admin"&&ct.stakeholder&&Wt&&(Ft?ce=er.map(Se=>Se.id):ce=ke.stakeholderSessionIds),ce.length===0)console.log("No stakeholder sessions to add");else{for(const Se of ce){if(J==="session-admin"&&!re.some(we=>we.id===Se)){console.warn(`Skipping session ${Se} - not in managed sessions`);continue}try{console.log(`Adding ${ke.email} as stakeholder to session ${Se}`);const fe=await Lj(Se,ke.email,ke.name);console.log(`Successfully added stakeholder to session ${Se}:`,fe)}catch(fe){console.error(`Error adding stakeholder role to session ${Se}:`,fe);const we=(fe==null?void 0:fe.message)||(fe==null?void 0:fe.toString())||"Unknown error";alert(`Warning: Failed to add ${ke.email} to session ${Se}.

Error: ${we}`)}}console.log("Finished adding stakeholder roles")}let Ie="User";ke.isSystemAdmin?Ie="System Admin":ct.sessionAdmin&&Ur&&(Nr||ke.sessionAdminIds.length>0)?Ie="Session Admin":(J==="session-admin"&&Wt&&(Ft||ke.stakeholderSessionIds.length>0)||J==="system-admin"&&ct.stakeholder&&Wt&&(Ft||ke.stakeholderSessionIds.length>0))&&(Ie="Stakeholder"),Ce(),await Er(re),mr({email:ke.email,password:ke.password,userType:Ie}),Rn(!0)}catch(A){console.error("Error creating user:",A),alert(`Failed to create user: ${A.message||"Unknown error"}`)}finally{Fe(!1)}},We=A=>{Ke(he=>({...he,sessionAdminIds:he.sessionAdminIds.includes(A)?he.sessionAdminIds.filter(M=>M!==A):[...he.sessionAdminIds,A]}))},St=A=>{Ke(he=>({...he,stakeholderSessionIds:he.stakeholderSessionIds.includes(A)?he.stakeholderSessionIds.filter(M=>M!==A):[...he.stakeholderSessionIds,A]}))},bt=A=>new Date(A).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}),xt=A=>{const he=new Date,M=new Date(A.start_date),te=new Date(A.end_date);return A.is_active&&he>=M&&he<=te?{text:"Active",color:"text-green-600"}:he<M?{text:"Upcoming",color:"text-blue-600"}:{text:"Ended",color:"text-gray-500"}},Me=A=>{const he=new Date(A.start_date),M=new Date(A.end_date),te=he.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}),ce=M.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"});return`${te} - ${ce}`},Qr=A=>A.roles.isSystemAdmin?o.jsxs("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-purple-100 text-purple-800",children:[o.jsx(us,{className:"h-3 w-3 mr-1"}),"System Admin"]}):A.roles.sessionAdminCount>0?o.jsxs("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-[#173B65] text-white",children:[o.jsx(Hr,{className:"h-3 w-3 mr-1"}),"Session Admin (",A.roles.sessionAdminCount,")"]}):A.roles.stakeholderSessionCount>0?o.jsxs("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-green-100 text-green-800",children:[o.jsx(Un,{className:"h-3 w-3 mr-1"}),"Stakeholder (",A.roles.stakeholderSessionCount,")"]}):o.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-gray-100 text-gray-600",children:"No Role"}),Vt=A=>A?A==="session-admin"?re.filter(he=>!U.adminSessions.includes(he.id)):A==="remove-stakeholder"?re.filter(he=>U.stakeholderSessions.includes(he.id)&&(J==="system-admin"||oe.includes(he.id))):re.filter(he=>!U.stakeholderSessions.includes(he.id)):[],or=(A,he)=>he?he==="session-admin"?A.roles.sessionAdminCount<re.length:A.roles.stakeholderSessionCount<re.length:!1;return ne||f?o.jsx("div",{className:"min-h-screen w-full bg-gray-50 flex items-center justify-center",children:o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-[#2d4660] mx-auto mb-4"}),o.jsx("p",{className:"text-gray-600",children:ne?"Checking access...":"Loading users..."})]})}):F?o.jsxs("div",{className:"min-h-screen bg-gray-50 pb-20",children:[o.jsxs("div",{className:"container mx-auto p-4 max-w-6xl",children:[o.jsx("div",{className:"hidden md:flex md:justify-center mb-2",children:o.jsx("img",{src:"https://www.steeldynamics.com/wp-content/uploads/2024/05/New-Millennium-color-logo1.png",alt:"New Millennium Building Systems Logo",className:"-mt-4",style:{height:"96px",width:"auto"}})}),o.jsxs("div",{className:"flex justify-between items-center mb-4 md:mb-6",children:[o.jsxs("div",{className:"flex items-center flex-1 min-w-0",children:[o.jsx("img",{src:"https://media.licdn.com/dms/image/C4D0BAQEC3OhRqehrKg/company-logo_200_200/0/1630518354793/new_millennium_building_systems_logo?e=2147483647&v=beta&t=LM3sJTmQZet5NshZ-RNHXW1MMG9xSi1asp-VUeSA9NA",alt:"New Millennium Building Systems Logo",className:"mr-3 md:hidden flex-shrink-0",style:{width:"36px",height:"36px"}}),o.jsx("button",{onClick:()=>{n!=null&&n.id?s("/admin"):s("/sessions")},className:"mr-2 p-1 rounded-full hover:bg-gray-200 cursor-pointer flex-shrink-0",children:o.jsx(fc,{className:"h-6 w-6"})}),o.jsx("h1",{className:"text-xl md:text-3xl font-bold text-[#2d4660] truncate",children:Mt})]}),o.jsxs("div",{ref:T,className:"relative z-40 flex-shrink-0 ml-2",children:[o.jsxs("div",{className:"hidden md:flex space-x-2",children:[(F||B)&&o.jsxs("button",{onClick:me,className:"flex items-center px-4 py-2 bg-[#2D4660] text-white rounded-lg hover:bg-[#173B65] transition-colors",children:[o.jsx(In,{className:"h-4 w-4 mr-2"}),J==="session-admin"?"Add Stakeholder":"Add User"]}),(F||B)&&n&&o.jsxs("button",{onClick:()=>s("/admin"),className:"flex items-center px-4 py-2 bg-[#1E5461] text-white rounded-lg hover:bg-[#145668] transition-colors",children:[o.jsx(Hr,{className:"h-4 w-4 mr-2"}),"Admin Dashboard"]}),o.jsxs("button",{onClick:()=>s("/sessions"),className:"flex items-center px-4 py-2 bg-[#4f6d8e] text-white rounded-lg hover:bg-[#3d5670] transition-colors",children:[o.jsx(sn,{className:"h-4 w-4 mr-2"}),"My Sessions"]}),o.jsxs("button",{onClick:Vn,className:"flex items-center px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-colors",children:[o.jsx(xn,{className:"h-4 w-4 mr-2"}),"Logout"]})]}),o.jsx("div",{className:"flex md:hidden",children:o.jsx("button",{onClick:()=>k(!S),className:"p-2 rounded-md border border-gray-200 bg-white shadow-sm","aria-label":"Open menu",children:o.jsx(Es,{className:"h-5 w-5 text-gray-700"})})}),S&&o.jsx("div",{className:"absolute right-0 mt-2 w-56 bg-white border border-gray-200 rounded-lg shadow-lg md:hidden z-50",children:o.jsxs("div",{className:"py-1",children:[(F||B)&&o.jsxs("button",{onClick:()=>{k(!1),me()},className:"w-full px-4 py-3 flex items-center text-left hover:bg-gray-50",children:[o.jsx(In,{className:"h-5 w-5 mr-3 text-green-600"}),o.jsx("span",{className:"text-base",children:J==="session-admin"?"Add Stakeholder":"Add User"})]}),(F||B)&&n&&o.jsxs("button",{onClick:()=>{k(!1),s("/admin")},className:"w-full px-4 py-3 flex items-center text-left hover:bg-gray-50",children:[o.jsx(Hr,{className:"h-5 w-5 mr-3 text-[#1E5461]"}),o.jsx("span",{className:"text-base",children:"Admin Dashboard"})]}),o.jsxs("button",{onClick:()=>{k(!1),s("/sessions")},className:"w-full px-4 py-3 flex items-center text-left hover:bg-gray-50",children:[o.jsx(sn,{className:"h-5 w-5 mr-3 text-gray-700"}),o.jsx("span",{className:"text-base",children:"My Sessions"})]}),o.jsxs("button",{onClick:()=>{k(!1),Vn()},className:"w-full px-4 py-3 flex items-center text-left hover:bg-gray-50",children:[o.jsx(xn,{className:"h-5 w-5 mr-3 text-gray-700"}),o.jsx("span",{className:"text-base",children:"Logout"})]})]})})]})]}),o.jsx("div",{className:"relative z-10 bg-white rounded-lg shadow-md p-3 md:p-4 mb-4 md:mb-6",children:o.jsxs("div",{className:"flex flex-col gap-3 md:flex-row md:gap-4",children:[o.jsxs("div",{className:"flex-1 relative",children:[o.jsx(oF,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"}),o.jsx("input",{type:"text",placeholder:"Search by name or email...",value:y,onChange:A=>x(A.target.value),className:"w-full pl-10 pr-10 py-2.5 md:py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#2d4660] focus:border-transparent text-base"}),y&&o.jsx("button",{onClick:()=>x(""),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600",children:o.jsx(gi,{className:"h-5 w-5"})})]}),o.jsxs("select",{value:b==="system-admin"&&J==="session-admin"?"session-admin":b,onChange:A=>j(A.target.value),className:"px-4 py-2.5 md:py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#2d4660] focus:border-transparent text-base",children:[J!=="session-admin"&&o.jsx("option",{value:"all",children:"All Roles"}),J!=="session-admin"&&o.jsx("option",{value:"system-admin",children:"System Admin"}),J!=="session-admin"&&o.jsx("option",{value:"session-admin",children:"Session Admin"}),o.jsx("option",{value:"stakeholder",children:"Stakeholder"}),o.jsx("option",{value:"none",children:"No Role"})]})]})}),o.jsx("div",{className:"md:hidden space-y-3 relative z-10",children:d.length===0?o.jsx("div",{className:"bg-white rounded-lg shadow-md p-8 text-center text-gray-500",children:y||b!=="all"?"No users found matching your filters.":"No users found."}):d.map(A=>{var he;return o.jsxs("div",{className:"bg-white rounded-lg shadow-md overflow-hidden",children:[o.jsxs("div",{className:"p-4 border-b border-gray-100",children:[o.jsxs("div",{className:"flex justify-between items-start mb-2",children:[o.jsxs("div",{className:"flex-1 min-w-0 pr-2",children:[o.jsxs("h3",{className:"text-base font-semibold text-gray-900 truncate",children:[A.name,A.id===(e==null?void 0:e.id)&&o.jsx("span",{className:"ml-2 text-xs text-[#c59f2d] font-semibold",children:"(You)"}),Ht(A)&&o.jsxs("span",{className:"ml-2 text-xs text-[#c59f2d] font-semibold",children:["(",Ht(A),")"]}),Hn(A)&&o.jsxs("span",{className:"ml-2 px-2 py-0.5 bg-red-100 text-red-700 text-xs font-medium rounded",children:["Duplicate (",Fs(A),")"]})]}),o.jsx("p",{className:"text-sm text-gray-500 truncate",children:A.email})]}),o.jsxs("div",{className:"flex items-center gap-2 flex-shrink-0",children:[(J==="system-admin"||J==="session-admin"&&A.roles.stakeholderSessionCount>0&&((he=A.stakeholderInSessions)==null?void 0:he.some(M=>re.some(te=>te.id===M.id))))&&o.jsx("button",{onClick:()=>Ls(A.id,A.name),className:`p-2 rounded-md hover:bg-red-50 transition-colors ${A.id===(e==null?void 0:e.id)||J==="system-admin"&&kt.has(A.id)?"opacity-50 cursor-not-allowed":""}`,disabled:A.id===(e==null?void 0:e.id)||J==="system-admin"&&kt.has(A.id),title:J==="session-admin"?"Remove stakeholder from all your sessions":kt.has(A.id)?`Cannot delete protected account${Ht(A)?` (${Ht(A)})`:""}`:A.id===(e==null?void 0:e.id)?"Cannot delete your own account":"Delete user",children:o.jsx(vi,{className:"h-5 w-5 text-red-600"})}),o.jsxs("div",{className:"relative",ref:M=>{D.current[A.id]=M},children:[o.jsx("button",{onClick:()=>N(C===A.id?null:A.id),className:`p-2 rounded-md hover:bg-gray-100 transition-colors ${A.id===(e==null?void 0:e.id)?"opacity-50 cursor-not-allowed":""}`,disabled:A.id===(e==null?void 0:e.id),title:A.id===(e==null?void 0:e.id)?"Cannot modify your own permissions":"Change user role",children:o.jsx(kS,{className:"h-5 w-5 text-gray-600"})}),C===A.id&&A.id!==(e==null?void 0:e.id)&&o.jsx("div",{className:"absolute right-0 mt-1 w-64 bg-white border border-gray-200 rounded-lg shadow-lg z-50",children:o.jsxs("div",{className:"py-1",children:[o.jsx("div",{className:"px-3 py-2 text-xs font-semibold text-gray-500 uppercase border-b border-gray-200",children:"Change User Role"}),J==="system-admin"&&o.jsxs(o.Fragment,{children:[A.roles.isSystemAdmin?o.jsxs("button",{onClick:()=>Br(A.id,!0),className:"w-full px-4 py-3 text-left flex items-center hover:bg-red-50 text-red-700",children:[o.jsx(us,{className:"h-5 w-5 mr-3 flex-shrink-0"}),o.jsxs("div",{children:[o.jsx("div",{className:"font-medium text-base",children:"Remove System Admin"}),o.jsx("div",{className:"text-xs text-gray-500",children:"Revoke global admin access"})]})]}):o.jsxs("button",{onClick:()=>Br(A.id,!1),className:"w-full px-4 py-3 text-left flex items-center hover:bg-purple-50 text-purple-700",children:[o.jsx(us,{className:"h-5 w-5 mr-3 flex-shrink-0"}),o.jsxs("div",{children:[o.jsx("div",{className:"font-medium text-base",children:"Make System Admin"}),o.jsx("div",{className:"text-xs text-gray-500",children:"Grant global admin access"})]})]}),or(A,"session-admin")&&o.jsxs("button",{onClick:()=>Xt(A,"session-admin"),className:"w-full px-4 py-3 text-left flex items-center hover:bg-[#E8EDF2] text-[#2D4660] border-t border-gray-200",children:[o.jsx(Hr,{className:"h-5 w-5 mr-3 flex-shrink-0"}),o.jsxs("div",{children:[o.jsx("div",{className:"font-medium text-base",children:"Make Session Admin"}),o.jsx("div",{className:"text-xs text-gray-500",children:"Add to a session as admin"})]})]})]}),or(A,"stakeholder")&&o.jsxs("button",{onClick:()=>Xt(A,"stakeholder"),className:"w-full px-4 py-3 text-left flex items-center hover:bg-green-50 text-green-700 border-t border-gray-200",children:[o.jsx(Un,{className:"h-5 w-5 mr-3 flex-shrink-0"}),o.jsxs("div",{children:[o.jsx("div",{className:"font-medium text-base",children:"Make Stakeholder"}),o.jsx("div",{className:"text-xs text-gray-500",children:"Add to a session as stakeholder"})]})]}),J==="session-admin"&&A.stakeholderInSessions&&A.stakeholderInSessions.length>0&&A.stakeholderInSessions.some(M=>oe.includes(M.id))&&o.jsxs("button",{onClick:()=>Xt(A,"remove-stakeholder"),className:"w-full px-4 py-3 text-left flex items-center hover:bg-red-50 text-red-700 border-t border-gray-200",children:[o.jsx(eu,{className:"h-5 w-5 mr-3 flex-shrink-0"}),o.jsxs("div",{children:[o.jsx("div",{className:"font-medium text-base",children:"Remove Stakeholder"}),o.jsx("div",{className:"text-xs text-gray-500",children:"Remove from a session you manage"})]})]}),(A.roles.isSystemAdmin||A.roles.sessionAdminCount>0||A.roles.stakeholderSessionCount>0)&&o.jsxs("button",{onClick:()=>ys(A.id,A.name),className:"w-full px-4 py-3 text-left flex items-center hover:bg-gray-50 text-gray-700 border-t border-gray-200",children:[o.jsx(eu,{className:"h-5 w-5 mr-3 flex-shrink-0"}),o.jsxs("div",{children:[o.jsx("div",{className:"font-medium text-base",children:"Remove All Roles"}),o.jsx("div",{className:"text-xs text-gray-500",children:"Remove from all sessions"})]})]})]})})]})]})]}),o.jsx("div",{className:"mt-2",children:Qr(A)})]}),o.jsxs("div",{className:"p-4 space-y-3",children:[o.jsxs("div",{children:[o.jsx("div",{className:"text-xs font-semibold text-gray-500 uppercase mb-1",children:"Sessions"}),o.jsxs("div",{className:"space-y-1",children:[A.roles.sessionAdminCount>0&&o.jsxs("div",{className:"flex items-center text-sm cursor-help",title:A.adminInSessions&&A.adminInSessions.length>0?`Admin in: ${A.adminInSessions.map(M=>M.title||M.name||"Unnamed Session").join(", ")}`:"Loading session details...",children:[o.jsx(Hr,{className:"h-4 w-4 mr-2 text-[#2D4660] flex-shrink-0"}),o.jsxs("span",{className:"text-gray-700",children:[A.roles.sessionAdminCount," as Admin"]})]}),A.roles.stakeholderSessionCount>0&&o.jsxs("div",{className:"flex items-center text-sm cursor-help",title:A.stakeholderInSessions&&A.stakeholderInSessions.length>0?`Stakeholder in: ${A.stakeholderInSessions.map(M=>M.title||M.name||"Unnamed Session").join(", ")}`:"Loading session details...",children:[o.jsx(Un,{className:"h-4 w-4 mr-2 text-green-500 flex-shrink-0"}),o.jsxs("span",{className:"text-gray-700",children:[A.roles.stakeholderSessionCount," as Stakeholder"]})]}),A.roles.sessionAdminCount===0&&A.roles.stakeholderSessionCount===0&&o.jsx("span",{className:"text-sm text-gray-400",children:"No session roles"})]})]}),o.jsxs("div",{children:[o.jsx("div",{className:"text-xs font-semibold text-gray-500 uppercase mb-1",children:"Created"}),o.jsxs("div",{className:"flex items-center text-sm text-gray-700",children:[o.jsx(Os,{className:"h-4 w-4 mr-2 text-gray-400 flex-shrink-0"}),A.created_at?bt(A.created_at):"N/A"]})]}),o.jsxs("div",{children:[o.jsx("div",{className:"text-xs font-semibold text-gray-500 uppercase mb-1",children:"Created By"}),o.jsxs("div",{className:"flex items-center text-sm text-gray-700",children:[o.jsx(Un,{className:"h-4 w-4 mr-2 text-gray-400 flex-shrink-0"}),A.created_by_name||"System"]})]})]})]},A.id)})}),o.jsxs("div",{className:"hidden md:block relative z-10 bg-white rounded-lg shadow-md overflow-visible",children:[o.jsxs("table",{className:"min-w-full divide-y divide-gray-200 rounded-t-lg",children:[o.jsx("thead",{className:"bg-gray-50",children:o.jsxs("tr",{children:[o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"User"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Role"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Sessions"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Created"}),o.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),o.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:d.length===0?o.jsx("tr",{children:o.jsx("td",{colSpan:5,className:"px-6 py-8 text-center text-gray-500",children:y||b!=="all"?"No users found matching your filters.":"No users found."})}):d.map(A=>{var he,M,te;return o.jsxs("tr",{className:"hover:bg-gray-50",onMouseEnter:()=>P(A.id),onMouseLeave:()=>P(null),children:[o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:o.jsxs("div",{children:[o.jsxs("div",{className:"text-sm font-medium text-gray-900",children:[A.name,A.id===(e==null?void 0:e.id)&&o.jsx("span",{className:"ml-2 text-xs text-[#c59f2d] font-semibold",children:"(You)"}),Ht(A)&&o.jsxs("span",{className:"ml-2 text-xs text-[#c59f2d] font-semibold",children:["(",Ht(A),")"]}),Hn(A)&&o.jsxs("span",{className:"ml-2 px-2 py-0.5 bg-red-100 text-red-700 text-xs font-medium rounded",children:["Duplicate (",Fs(A),")"]})]}),o.jsx("div",{className:"text-sm text-gray-500",children:A.email})]})}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:Qr(A)}),o.jsx("td",{className:"px-6 py-4 text-sm text-gray-500",children:o.jsxs("div",{className:"space-y-2",children:[A.roles.sessionAdminCount===0&&A.roles.stakeholderSessionCount===0&&o.jsx("span",{className:"text-gray-400",children:"None"}),A.adminInSessions&&A.adminInSessions.length>0&&o.jsxs("div",{children:[o.jsxs("div",{className:"flex items-center text-sm font-medium text-gray-700 mb-1.5",children:[o.jsx(Hr,{className:"h-4 w-4 mr-1.5 text-[#173B65]"}),"Admin in ",A.adminInSessions.length," session",A.adminInSessions.length!==1?"s":"",":"]}),o.jsx("div",{className:"space-y-1.5 ml-5",children:A.adminInSessions.map(ce=>o.jsx("div",{className:"flex items-start",children:o.jsxs("div",{className:"text-xs text-gray-600",children:[o.jsx("div",{className:"font-medium text-gray-900",children:ce.title||ce.name||"Unnamed Session"}),ce.created_at&&o.jsxs("div",{className:"flex items-center text-gray-500 mt-0.5",children:[o.jsx(Os,{className:"h-3 w-3 mr-1"}),new Date(ce.created_at).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})]})]})},ce.id))})]}),A.stakeholderInSessions&&A.stakeholderInSessions.length>0&&o.jsxs("div",{className:A.adminInSessions&&A.adminInSessions.length>0?"pt-2 border-t border-gray-100":"",children:[o.jsxs("div",{className:"flex items-center text-sm font-medium text-gray-700 mb-1.5",children:[o.jsx(Un,{className:"h-4 w-4 mr-1.5 text-green-600"}),"Stakeholder in ",A.stakeholderInSessions.length," session",A.stakeholderInSessions.length!==1?"s":"",":"]}),o.jsx("div",{className:"space-y-1.5 ml-5",children:A.stakeholderInSessions.map(ce=>o.jsx("div",{className:"flex items-start",children:o.jsxs("div",{className:"text-xs text-gray-600",children:[o.jsx("div",{className:"font-medium text-gray-900",children:ce.title||ce.name||"Unnamed Session"}),ce.created_at&&o.jsxs("div",{className:"flex items-center text-gray-500 mt-0.5",children:[o.jsx(Os,{className:"h-3 w-3 mr-1"}),new Date(ce.created_at).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})]})]})},ce.id))})]})]})}),o.jsx("td",{className:"px-6 py-4 text-sm text-gray-500",children:o.jsxs("div",{children:[o.jsxs("div",{className:"flex items-center text-gray-700",children:[o.jsx(Os,{className:"h-4 w-4 mr-1.5 text-gray-400"}),A.created_at?bt(A.created_at):"N/A"]}),o.jsxs("div",{className:"flex items-center text-gray-500 text-xs mt-1",children:[o.jsx(Un,{className:"h-3.5 w-3.5 mr-1.5 text-gray-400"}),A.created_by_name||"System"]})]})}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:o.jsxs("div",{className:"flex items-center justify-end gap-2",children:[(J==="system-admin"||J==="session-admin"&&A.roles.stakeholderSessionCount>0&&((he=A.stakeholderInSessions)==null?void 0:he.some(ce=>re.some(Ie=>Ie.id===ce.id))))&&o.jsx("button",{onClick:()=>Ls(A.id,A.name),className:`p-2 rounded-md hover:bg-red-50 transition-all md:transition-opacity ${A.id===(e==null?void 0:e.id)||J==="system-admin"&&kt.has(A.id)?"opacity-50 cursor-not-allowed":O===A.id?"opacity-100 visible":"md:opacity-0 md:invisible opacity-100 visible"}`,disabled:A.id===(e==null?void 0:e.id)||J==="system-admin"&&kt.has(A.id),title:J==="session-admin"?"Remove stakeholder from all your sessions":kt.has(A.id)?`Cannot delete protected account${Ht(A)?` (${Ht(A)})`:""}`:A.id===(e==null?void 0:e.id)?"Cannot delete your own account":"Delete user",children:o.jsx(vi,{className:"h-5 w-5 text-red-600"})}),o.jsxs("div",{className:`relative inline-block transition-all md:transition-opacity ${A.id===(e==null?void 0:e.id)?"opacity-50":O===A.id?"opacity-100 visible":"md:opacity-0 md:invisible opacity-100 visible"}`,ref:ce=>{D.current[A.id]=ce},children:[o.jsx("button",{onClick:()=>N(C===A.id?null:A.id),className:"p-2 rounded-md hover:bg-gray-100 transition-colors",disabled:A.id===(e==null?void 0:e.id),title:A.id===(e==null?void 0:e.id)?"Cannot modify your own permissions":"Change user role",children:o.jsx(kS,{className:"h-5 w-5 text-gray-600"})}),C===A.id&&A.id!==(e==null?void 0:e.id)&&o.jsx("div",{className:"fixed mt-1 w-64 bg-white border border-gray-200 rounded-lg shadow-lg z-[100]",style:{top:((M=D.current[A.id])==null?void 0:M.getBoundingClientRect().bottom)??0,right:window.innerWidth-(((te=D.current[A.id])==null?void 0:te.getBoundingClientRect().right)??0)},children:o.jsxs("div",{className:"py-1",children:[o.jsx("div",{className:"px-3 py-2 text-xs font-semibold text-gray-500 uppercase border-b border-gray-200",children:"Change User Role"}),J==="system-admin"&&o.jsxs(o.Fragment,{children:[A.roles.isSystemAdmin?o.jsxs("button",{onClick:()=>Br(A.id,!0),className:"w-full px-4 py-2 text-left flex items-center hover:bg-red-50 text-red-700",children:[o.jsx(us,{className:"h-4 w-4 mr-3"}),o.jsxs("div",{children:[o.jsx("div",{className:"font-medium",children:"Remove System Admin"}),o.jsx("div",{className:"text-xs text-gray-500",children:"Revoke global admin access"})]})]}):o.jsxs("button",{onClick:()=>Br(A.id,!1),className:"w-full px-4 py-2 text-left flex items-center hover:bg-purple-50 text-purple-700",children:[o.jsx(us,{className:"h-4 w-4 mr-3"}),o.jsxs("div",{children:[o.jsx("div",{className:"font-medium",children:"Make System Admin"}),o.jsx("div",{className:"text-xs text-gray-500",children:"Grant global admin access"})]})]}),or(A,"session-admin")&&o.jsxs("button",{onClick:()=>Xt(A,"session-admin"),className:"w-full px-4 py-2 text-left flex items-center hover:bg-[#E8EDF2] text-[#2D4660] border-t border-gray-200",children:[o.jsx(Hr,{className:"h-4 w-4 mr-3"}),o.jsxs("div",{children:[o.jsx("div",{className:"font-medium",children:"Make Session Admin"}),o.jsx("div",{className:"text-xs text-gray-500",children:"Add to a session as admin"})]})]})]}),or(A,"stakeholder")&&o.jsxs("button",{onClick:()=>Xt(A,"stakeholder"),className:"w-full px-4 py-2 text-left flex items-center hover:bg-green-50 text-green-700 border-t border-gray-200",children:[o.jsx(Un,{className:"h-4 w-4 mr-3"}),o.jsxs("div",{children:[o.jsx("div",{className:"font-medium",children:"Make Stakeholder"}),o.jsx("div",{className:"text-xs text-gray-500",children:"Add to a session as stakeholder"})]})]}),J==="session-admin"&&A.stakeholderInSessions&&A.stakeholderInSessions.length>0&&A.stakeholderInSessions.some(ce=>oe.includes(ce.id))&&o.jsxs("button",{onClick:()=>Xt(A,"remove-stakeholder"),className:"w-full px-4 py-2 text-left flex items-center hover:bg-red-50 text-red-700 border-t border-gray-200",children:[o.jsx(eu,{className:"h-4 w-4 mr-3"}),o.jsxs("div",{children:[o.jsx("div",{className:"font-medium",children:"Remove Stakeholder"}),o.jsx("div",{className:"text-xs text-gray-500",children:"Remove from a session you manage"})]})]}),(A.roles.isSystemAdmin||A.roles.sessionAdminCount>0||A.roles.stakeholderSessionCount>0)&&o.jsxs("button",{onClick:()=>ys(A.id,A.name),className:"w-full px-4 py-2 text-left flex items-center hover:bg-gray-50 text-gray-700 border-t border-gray-200",children:[o.jsx(eu,{className:"h-4 w-4 mr-3"}),o.jsxs("div",{children:[o.jsx("div",{className:"font-medium",children:"Remove All Roles"}),o.jsx("div",{className:"text-xs text-gray-500",children:"Remove from all sessions"})]})]})]})})]})]})})]},A.id)})})]}),o.jsx("div",{className:"bg-gray-50 px-6 py-4 border-t border-gray-200",children:o.jsxs("div",{className:"flex flex-wrap gap-4 text-sm",children:[o.jsxs("div",{className:"flex items-center",children:[o.jsx(In,{className:"h-4 w-4 mr-2 text-gray-500"}),o.jsxs("span",{className:"text-gray-600",children:["Total Users: ",o.jsx("strong",{children:l.length})]})]}),o.jsxs("div",{className:"flex items-center",children:[o.jsx(us,{className:"h-4 w-4 mr-2 text-purple-500"}),o.jsxs("span",{className:"text-gray-600",children:["System Admins: ",o.jsx("strong",{children:l.filter(A=>A.roles.isSystemAdmin).length})]})]}),o.jsxs("div",{className:"flex items-center",children:[o.jsx(Hr,{className:"h-4 w-4 mr-2 text-[#2D4660]"}),o.jsxs("span",{className:"text-gray-600",children:["Session Admins: ",o.jsx("strong",{children:l.filter(A=>A.roles.sessionAdminCount>0).length})]})]}),o.jsxs("div",{className:"flex items-center",children:[o.jsx(Un,{className:"h-4 w-4 mr-2 text-green-500"}),o.jsxs("span",{className:"text-gray-600",children:["Stakeholders: ",o.jsx("strong",{children:l.filter(A=>A.roles.stakeholderSessionCount>0).length})]})]})]})})]}),o.jsx("div",{className:"md:hidden mt-4 bg-white rounded-lg shadow-md p-4",children:o.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[o.jsxs("div",{className:"flex items-center",children:[o.jsx(In,{className:"h-5 w-5 mr-2 text-gray-500 flex-shrink-0"}),o.jsxs("div",{children:[o.jsx("div",{className:"text-xs text-gray-500",children:"Total"}),o.jsx("div",{className:"text-lg font-bold text-gray-900",children:l.length})]})]}),o.jsxs("div",{className:"flex items-center",children:[o.jsx(us,{className:"h-5 w-5 mr-2 text-purple-500 flex-shrink-0"}),o.jsxs("div",{children:[o.jsx("div",{className:"text-xs text-gray-500",children:"Sys Admins"}),o.jsx("div",{className:"text-lg font-bold text-gray-900",children:l.filter(A=>A.roles.isSystemAdmin).length})]})]}),o.jsxs("div",{className:"flex items-center",children:[o.jsx(Hr,{className:"h-5 w-5 mr-2 text-[#2D4660] flex-shrink-0"}),o.jsxs("div",{children:[o.jsx("div",{className:"text-xs text-gray-500",children:"Session Admins"}),o.jsx("div",{className:"text-lg font-bold text-gray-900",children:l.filter(A=>A.roles.sessionAdminCount>0).length})]})]}),o.jsxs("div",{className:"flex items-center",children:[o.jsx(Un,{className:"h-5 w-5 mr-2 text-green-500 flex-shrink-0"}),o.jsxs("div",{children:[o.jsx("div",{className:"text-xs text-gray-500",children:"Stakeholders"}),o.jsx("div",{className:"text-lg font-bold text-gray-900",children:l.filter(A=>A.roles.stakeholderSessionCount>0).length})]})]})]})}),(F||B)&&o.jsx("div",{className:"mt-8 flex justify-center",children:o.jsxs("div",{className:"inline-flex items-center bg-gray-100 rounded-lg p-1",children:[o.jsxs("button",{onClick:()=>{(B||F)&&H("session-admin")},className:`px-4 py-2 rounded-md text-sm font-medium transition-colors flex items-center ${J==="session-admin"?"bg-white text-[#2d4660] shadow-sm":"text-gray-600 hover:text-gray-900"}`,title:"Session Admin View",children:[o.jsx(Hr,{className:"h-4 w-4 inline mr-2"}),"Session Admin"]}),o.jsxs("button",{onClick:()=>{F&&H("system-admin")},className:`px-4 py-2 rounded-md text-sm font-medium transition-colors flex items-center ${J==="system-admin"?"bg-white text-[#2d4660] shadow-sm":"text-gray-600 hover:text-gray-900"}`,disabled:!F,title:F?"System Admin View":"Only available for System Admins",children:[o.jsx(us,{className:"h-4 w-4 inline mr-2"}),"System Admin"]})]})})]}),o.jsx("footer",{className:"mt-12 bg-gray-50 border-t border-gray-200",children:o.jsxs("div",{className:"container mx-auto px-4 py-6 max-w-6xl",children:[o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 text-sm text-gray-600",children:[o.jsxs("div",{children:[o.jsx("h3",{className:"font-semibold text-gray-900 mb-2",children:"New Millennium Building Systems"}),o.jsxs("p",{className:"text-xs leading-relaxed",children:["A Steel Dynamics Company",o.jsx("br",{}),"Innovation in structural steel manufacturing"]})]}),o.jsxs("div",{children:[o.jsx("h3",{className:"font-semibold text-gray-900 mb-2",children:"Quick Links"}),o.jsxs("ul",{className:"space-y-1 text-xs",children:[o.jsx("li",{children:o.jsx("a",{href:"https://www.steeldynamics.com",target:"_blank",rel:"noopener noreferrer",className:"hover:text-[#2d4660] transition-colors",children:"Steel Dynamics Inc."})}),o.jsx("li",{children:o.jsx("a",{href:"https://www.newmill.com",target:"_blank",rel:"noopener noreferrer",className:"hover:text-[#2d4660] transition-colors",children:"New Millennium"})})]})]}),o.jsxs("div",{children:[o.jsx("h3",{className:"font-semibold text-gray-900 mb-2",children:"Need Help?"}),o.jsx("p",{className:"text-xs",children:"Contact your Product Owner or IT administrator for assistance with user management."})]})]}),o.jsx("div",{className:"mt-6 pt-6 border-t border-gray-200 text-center text-xs text-gray-500",children:o.jsx("p",{children:" 2025 New Millennium Building Systems, LLC. All rights reserved."})})]})}),ge&&Ae&&I&&o.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:o.jsx("div",{className:"bg-white rounded-lg shadow-xl max-w-md w-full",children:o.jsxs("div",{className:"p-6",children:[o.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-2",children:I==="session-admin"?"Add Session Admin":I==="remove-stakeholder"?"Remove Stakeholder":"Add Stakeholder"}),o.jsx("p",{className:"text-sm text-gray-600 mb-4",children:I==="remove-stakeholder"?o.jsxs(o.Fragment,{children:["Select a session to remove ",o.jsx("strong",{children:Ae.name})," as a stakeholder."]}):o.jsxs(o.Fragment,{children:["Select a session to add ",o.jsx("strong",{children:Ae.name})," as ",I==="session-admin"?"an admin":"a stakeholder","."]})}),o.jsxs("div",{className:"mb-6",children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Choose Session"}),o.jsxs("select",{value:xe,onChange:A=>ye(A.target.value),className:"w-full px-4 py-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#2d4660] focus:border-transparent",children:[o.jsx("option",{value:"",children:"-- Select a session --"}),Vt(I).map(A=>{const he=A.title||A.name||A.session_name||"Unnamed Session",M=A.created_at?new Date(A.created_at).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}):"",te=M?`${he} (${M})`:he;return o.jsx("option",{value:A.id,children:te},A.id)})]}),re.length===0&&o.jsx("p",{className:"mt-2 text-sm text-red-500",children:"No sessions found in the system. Create a session first."}),re.length>0&&Vt(I).length===0&&o.jsx("p",{className:"mt-2 text-sm text-gray-500",children:I==="remove-stakeholder"?"This user is not a stakeholder in any sessions you manage.":`This user is already ${I==="session-admin"?"an admin":"a stakeholder"} in all ${re.length} session(s).`}),re.length>0&&Vt(I).length>0&&o.jsxs("p",{className:"mt-2 text-sm text-gray-500",children:[Vt(I).length," session(s) available"]})]}),o.jsxs("div",{className:"flex gap-3",children:[o.jsx("button",{onClick:kn,className:"flex-1 px-4 py-2.5 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:"Cancel"}),o.jsx("button",{onClick:wr,disabled:!xe,className:`flex-1 px-4 py-2.5 rounded-lg transition-colors ${xe?I==="remove-stakeholder"?"bg-red-600 text-white hover:bg-red-700":"bg-[#4f6d8e] text-white hover:bg-[#3d5670]":"bg-gray-300 text-gray-500 cursor-not-allowed"}`,children:I==="remove-stakeholder"?"Remove from Session":"Add to Session"})]})]})})}),Ze&&Pe&&o.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:o.jsx("div",{className:"bg-white rounded-lg shadow-xl max-w-lg w-full",children:o.jsxs("div",{className:"p-6",children:[o.jsxs("div",{className:"flex items-start mb-4",children:[o.jsx("div",{className:"flex-shrink-0 w-12 h-12 rounded-full bg-red-100 flex items-center justify-center",children:o.jsx(eu,{className:"h-6 w-6 text-red-600"})}),o.jsxs("div",{className:"ml-4 flex-1",children:[o.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-1",children:"Delete User Account"}),o.jsx("p",{className:"text-sm text-gray-600",children:"This action cannot be undone. Please review the details below."})]})]}),o.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 mb-4",children:[o.jsxs("div",{className:"flex items-center mb-3",children:[o.jsx(Un,{className:"h-5 w-5 text-gray-400 mr-2"}),o.jsxs("div",{children:[o.jsx("div",{className:"font-medium text-gray-900",children:Pe.name}),o.jsx("div",{className:"text-sm text-gray-500",children:Pe.email})]})]}),o.jsxs("div",{className:"space-y-2 border-t border-gray-200 pt-3",children:[o.jsx("div",{className:"text-xs font-semibold text-gray-500 uppercase",children:"Current Roles"}),Pe.roles.isSystemAdmin&&o.jsxs("div",{className:"flex items-center text-sm",children:[o.jsx(us,{className:"h-4 w-4 mr-2 text-purple-500"}),o.jsx("span",{className:"text-gray-700",children:"System Admin"})]}),Pe.roles.sessionAdminCount>0&&o.jsxs("div",{className:"flex items-center text-sm",children:[o.jsx(Hr,{className:"h-4 w-4 mr-2 text-[#2D4660]"}),o.jsxs("span",{className:"text-gray-700",children:["Session Admin in ",Pe.roles.sessionAdminCount," session",Pe.roles.sessionAdminCount!==1?"s":""]})]}),Pe.roles.stakeholderSessionCount>0&&o.jsxs("div",{className:"flex items-center text-sm",children:[o.jsx(Un,{className:"h-4 w-4 mr-2 text-green-500"}),o.jsxs("span",{className:"text-gray-700",children:["Stakeholder in ",Pe.roles.stakeholderSessionCount," session",Pe.roles.stakeholderSessionCount!==1?"s":""]})]}),!Pe.roles.isSystemAdmin&&Pe.roles.sessionAdminCount===0&&Pe.roles.stakeholderSessionCount===0&&o.jsx("div",{className:"text-sm text-gray-500",children:"No roles assigned"})]})]}),Pe.adminInSessions&&Pe.adminInSessions.length>0||Pe.stakeholderInSessions&&Pe.stakeholderInSessions.length>0?o.jsxs("div",{className:"mb-4",children:[o.jsx("div",{className:"text-sm font-semibold text-gray-700 mb-2",children:"User will be removed from these sessions:"}),o.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-3 max-h-48 overflow-y-auto",children:[Pe.adminInSessions&&Pe.adminInSessions.length>0&&o.jsxs("div",{className:"mb-3",children:[o.jsxs("div",{className:"text-xs font-semibold text-gray-600 mb-1.5 flex items-center",children:[o.jsx(Hr,{className:"h-3.5 w-3.5 mr-1.5 text-[#173B65]"}),"Admin Sessions (",Pe.adminInSessions.length,")"]}),o.jsx("div",{className:"space-y-1 ml-5",children:Pe.adminInSessions.map(A=>o.jsxs("div",{className:"text-sm text-gray-700",children:[" ",A.title||A.name||"Unnamed Session"]},A.id))})]}),Pe.stakeholderInSessions&&Pe.stakeholderInSessions.length>0&&o.jsxs("div",{children:[o.jsxs("div",{className:"text-xs font-semibold text-gray-600 mb-1.5 flex items-center",children:[o.jsx(Un,{className:"h-3.5 w-3.5 mr-1.5 text-green-600"}),"Stakeholder Sessions (",Pe.stakeholderInSessions.length,")"]}),o.jsx("div",{className:"space-y-1 ml-5",children:Pe.stakeholderInSessions.map(A=>o.jsxs("div",{className:"text-sm text-gray-700",children:[" ",A.title||A.name||"Unnamed Session"]},A.id))})]})]})]}):null,o.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-3 mb-4",children:o.jsxs("div",{className:"flex",children:[o.jsx("div",{className:"flex-shrink-0",children:o.jsx("svg",{className:"h-5 w-5 text-yellow-600",fill:"currentColor",viewBox:"0 0 20 20",children:o.jsx("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})})}),o.jsxs("div",{className:"ml-3",children:[o.jsx("h3",{className:"text-sm font-medium text-yellow-800",children:"Warning: This action is permanent"}),o.jsx("div",{className:"mt-1 text-sm text-yellow-700",children:o.jsxs("ul",{className:"list-disc pl-5 space-y-1",children:[o.jsx("li",{children:"User account will be permanently deleted"}),o.jsx("li",{children:"All authentication access will be revoked"}),o.jsx("li",{children:"User will be removed from all sessions"}),o.jsx("li",{children:"This action cannot be undone"})]})})]})]})}),o.jsxs("div",{className:"flex gap-3",children:[o.jsx("button",{onClick:Y,disabled:ft,className:"flex-1 px-4 py-2.5 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:"Cancel"}),o.jsx("button",{onClick:Si,disabled:ft,className:"flex-1 px-4 py-2.5 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center",children:ft?o.jsxs(o.Fragment,{children:[o.jsxs("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",fill:"none",viewBox:"0 0 24 24",children:[o.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),o.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Deleting..."]}):"Delete User Permanently"})]})]})})}),_e&&o.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4 overflow-y-auto",onClick:Ce,children:o.jsx("div",{className:"bg-white rounded-lg shadow-xl max-w-2xl w-full my-8",onClick:A=>A.stopPropagation(),children:o.jsxs("div",{className:"p-6",children:[o.jsxs("div",{className:"flex items-start mb-6",children:[o.jsx("div",{className:"flex-shrink-0 w-12 h-12 rounded-full bg-green-100 flex items-center justify-center",children:o.jsx(In,{className:"h-6 w-6 text-green-600"})}),o.jsxs("div",{className:"ml-4 flex-1",children:[o.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-1",children:J==="session-admin"?"Add New Stakeholder":"Add New User"}),o.jsx("p",{className:"text-sm text-gray-600",children:J==="session-admin"?"Create a new user account and add as stakeholder to your sessions":"Create a new user account and assign roles"})]}),o.jsx("button",{onClick:Ce,disabled:je,className:"flex-shrink-0 ml-4 p-1 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed","aria-label":"Close modal",children:o.jsx(gi,{className:"h-5 w-5"})})]}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{children:[o.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Full Name ",o.jsx("span",{className:"text-red-500",children:"*"})]}),o.jsx("input",{type:"text",value:ke.name,onChange:A=>Ke({...ke,name:A.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#2D4660] focus:border-transparent",placeholder:"John Doe"})]}),o.jsxs("div",{children:[o.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Email Address ",o.jsx("span",{className:"text-red-500",children:"*"})]}),o.jsx("input",{type:"email",value:ke.email,onChange:A=>Ke({...ke,email:A.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#2D4660] focus:border-transparent",placeholder:"john.doe@newmill.com"})]}),o.jsxs("div",{children:[o.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Temporary Password ",o.jsx("span",{className:"text-red-500",children:"*"})]}),o.jsxs("div",{className:"flex gap-2",children:[o.jsx("input",{type:"text",value:ke.password,onChange:A=>Ke({...ke,password:A.target.value}),className:"flex-1 px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#2D4660] focus:border-transparent font-mono text-sm",placeholder:"Auto-generated password"}),o.jsx("button",{onClick:()=>Ke({...ke,password:Oe()}),className:"px-4 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-colors whitespace-nowrap",children:"Regenerate"})]}),o.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"Save this password to share with the user securely"})]}),J==="system-admin"&&o.jsxs("div",{className:"border-t border-gray-200 pt-4",children:[o.jsxs("button",{type:"button",onClick:()=>ir({...ct,systemAdmin:!ct.systemAdmin}),className:"w-full flex items-center justify-between py-2 hover:bg-gray-50 rounded-lg px-2 -ml-2 transition-colors",children:[o.jsxs("div",{className:"flex items-center",children:[o.jsx(us,{className:"h-4 w-4 mr-2 text-purple-500"}),o.jsx("span",{className:"text-sm font-medium text-gray-700",children:"System Administrator"})]}),o.jsx(On,{className:`h-4 w-4 text-gray-500 transition-transform ${ct.systemAdmin?"rotate-180":""}`})]}),ct.systemAdmin&&o.jsxs("div",{className:"mt-3 ml-6 space-y-3",children:[o.jsxs("label",{className:"flex items-center cursor-pointer",children:[o.jsx("input",{type:"checkbox",checked:ke.isSystemAdmin,onChange:A=>Ke({...ke,isSystemAdmin:A.target.checked}),className:"w-4 h-4 text-purple-600 border-gray-300 rounded focus:ring-purple-500 accent-green-600"}),o.jsx("span",{className:"ml-3 text-sm text-gray-700",children:"Grant system administrator privileges"})]}),o.jsx("p",{className:"text-xs text-gray-500",children:"Full access to all sessions and user management"})]})]}),J==="system-admin"&&o.jsxs("div",{className:"border-t border-gray-200 pt-4",children:[o.jsxs("button",{type:"button",onClick:()=>ir({...ct,sessionAdmin:!ct.sessionAdmin}),className:"w-full flex items-center justify-between py-2 hover:bg-gray-50 rounded-lg px-2 -ml-2 transition-colors",children:[o.jsxs("div",{className:"flex items-center",children:[o.jsx(Hr,{className:"h-4 w-4 mr-2 text-[#2D4660]"}),o.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Session Admin"}),ke.sessionAdminIds.length>0&&o.jsx("span",{className:"ml-2 px-2 py-0.5 bg-[#E8EDF2] text-[#173B65] text-xs rounded-full",children:ke.sessionAdminIds.length})]}),o.jsx(On,{className:`h-4 w-4 text-gray-500 transition-transform ${ct.sessionAdmin?"rotate-180":""}`})]}),ct.sessionAdmin&&o.jsxs("div",{className:"mt-3 ml-6 space-y-3",children:[o.jsx("div",{children:o.jsx(pv,{products:Qt,value:Ur,onChange:A=>{xr(A),Ke(he=>({...he,sessionAdminIds:[]})),Cr(!0)},label:"Product *"})}),Ur&&o.jsxs("div",{className:"space-y-3",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Session Selection *"}),o.jsxs("div",{className:"inline-flex items-center bg-gray-100 rounded-lg p-1",children:[o.jsx("button",{type:"button",onClick:()=>{Cr(!1)},className:`px-4 py-2 rounded-md text-sm font-medium transition-colors flex items-center ${Nr?"text-gray-600 hover:text-gray-900":"bg-white text-[#2d4660] shadow-sm"}`,children:"Select Sessions"}),o.jsx("button",{type:"button",onClick:()=>{Cr(!0),Ke(A=>({...A,sessionAdminIds:[]}))},className:`px-4 py-2 rounded-md text-sm font-medium transition-colors flex items-center ${Nr?"bg-white text-[#2d4660] shadow-sm":"text-gray-600 hover:text-gray-900"}`,children:"All Sessions"})]}),Nr&&o.jsx("p",{className:"mt-2 text-xs text-gray-500",children:"User will be added to all current and future sessions for this product"})]}),!Nr&&o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Sessions * (Current and Future)"}),hr.length===0?o.jsx("p",{className:"text-sm text-gray-500",children:"No current or future sessions found for this product."}):o.jsx("div",{className:"max-h-48 overflow-y-auto border border-gray-300 rounded-md p-2",children:hr.map(A=>o.jsxs("label",{className:"flex items-start px-3 py-2 hover:bg-gray-50 cursor-pointer border-b border-gray-100 last:border-b-0",children:[o.jsx("input",{type:"checkbox",checked:ke.sessionAdminIds.includes(A.id),onChange:()=>We(A.id),className:"w-4 h-4 border-gray-300 rounded focus:ring-[#2D4660] accent-green-600 mt-1",style:{accentColor:"#16a34a"}}),o.jsxs("div",{className:"ml-3 flex-1",children:[o.jsx("div",{className:"text-sm font-medium text-gray-900",children:A.title||A.name||"Unnamed Session"}),o.jsx("div",{className:"text-xs text-gray-500 mt-0.5",children:Me(A)}),o.jsx("div",{className:"text-xs mt-0.5",children:o.jsx("span",{className:`font-medium ${xt(A).color}`,children:xt(A).text})})]})]},A.id))})]})]})]})]}),J==="session-admin"?o.jsxs("div",{className:"border-t border-gray-200 pt-4",children:[o.jsxs("div",{className:"flex items-center mb-3",children:[o.jsx(Un,{className:"h-4 w-4 mr-2 text-green-500"}),o.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Add as Stakeholder"}),ke.stakeholderSessionIds.length>0&&o.jsx("span",{className:"ml-2 px-2 py-0.5 bg-green-100 text-green-700 text-xs rounded-full",children:ke.stakeholderSessionIds.length})]}),o.jsxs("div",{className:"space-y-3",children:[o.jsx("div",{children:o.jsx(pv,{products:Qt,value:Wt,onChange:A=>{_r(A),Ke(he=>({...he,stakeholderSessionIds:[]})),qt(!0)},label:"Product *"})}),Wt&&o.jsxs("div",{className:"space-y-3",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Session Selection *"}),o.jsxs("div",{className:"inline-flex items-center bg-gray-100 rounded-lg p-1",children:[o.jsx("button",{type:"button",onClick:()=>{qt(!1)},className:`px-4 py-2 rounded-md text-sm font-medium transition-colors flex items-center ${Ft?"text-gray-600 hover:text-gray-900":"bg-white text-[#2d4660] shadow-sm"}`,children:"Select Sessions"}),o.jsx("button",{type:"button",onClick:()=>{qt(!0),Ke(A=>({...A,stakeholderSessionIds:[]}))},className:`px-4 py-2 rounded-md text-sm font-medium transition-colors flex items-center ${Ft?"bg-white text-[#2d4660] shadow-sm":"text-gray-600 hover:text-gray-900"}`,children:"All Sessions"})]}),Ft&&o.jsx("p",{className:"mt-2 text-xs text-gray-500",children:"User will be added to all current and future sessions for this product"})]}),!Ft&&o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Sessions * (Current and Future)"}),er.length===0?o.jsx("p",{className:"text-sm text-gray-500",children:"No current or future sessions found for this product."}):o.jsx("div",{className:"max-h-48 overflow-y-auto border border-gray-300 rounded-md p-2",children:er.map(A=>o.jsxs("label",{className:"flex items-start px-3 py-2 hover:bg-gray-50 cursor-pointer border-b border-gray-100 last:border-b-0",children:[o.jsx("input",{type:"checkbox",checked:ke.stakeholderSessionIds.includes(A.id),onChange:()=>St(A.id),className:"w-4 h-4 border-gray-300 rounded focus:ring-[#2D4660] accent-green-600 mt-1",style:{accentColor:"#16a34a"}}),o.jsxs("div",{className:"ml-3 flex-1",children:[o.jsx("div",{className:"text-sm font-medium text-gray-900",children:A.title||A.name||"Unnamed Session"}),o.jsx("div",{className:"text-xs text-gray-500 mt-0.5",children:Me(A)}),o.jsx("div",{className:"text-xs mt-0.5",children:o.jsx("span",{className:`font-medium ${xt(A).color}`,children:xt(A).text})})]})]},A.id))})]})]})]})]}):o.jsxs("div",{className:"border-t border-gray-200 pt-4",children:[o.jsxs("button",{type:"button",onClick:()=>ir({...ct,stakeholder:!ct.stakeholder}),className:"w-full flex items-center justify-between py-2 hover:bg-gray-50 rounded-lg px-2 -ml-2 transition-colors",children:[o.jsxs("div",{className:"flex items-center",children:[o.jsx(Un,{className:"h-4 w-4 mr-2 text-green-500"}),o.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Stakeholder"}),ke.stakeholderSessionIds.length>0&&o.jsx("span",{className:"ml-2 px-2 py-0.5 bg-green-100 text-green-700 text-xs rounded-full",children:ke.stakeholderSessionIds.length})]}),o.jsx(On,{className:`h-4 w-4 text-gray-500 transition-transform ${ct.stakeholder?"rotate-180":""}`})]}),ct.stakeholder&&o.jsxs("div",{className:"mt-3 ml-6 space-y-3",children:[o.jsx("div",{children:o.jsx(pv,{products:Qt,value:Wt,onChange:A=>{_r(A),Ke(he=>({...he,stakeholderSessionIds:[]})),qt(!0)},label:"Product *"})}),Wt&&o.jsxs("div",{className:"space-y-3",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Session Selection *"}),o.jsxs("div",{className:"inline-flex items-center bg-gray-100 rounded-lg p-1",children:[o.jsx("button",{type:"button",onClick:()=>{qt(!1)},className:`px-4 py-2 rounded-md text-sm font-medium transition-colors flex items-center ${Ft?"text-gray-600 hover:text-gray-900":"bg-white text-[#2d4660] shadow-sm"}`,children:"Select Sessions"}),o.jsx("button",{type:"button",onClick:()=>{qt(!0),Ke(A=>({...A,stakeholderSessionIds:[]}))},className:`px-4 py-2 rounded-md text-sm font-medium transition-colors flex items-center ${Ft?"bg-white text-[#2d4660] shadow-sm":"text-gray-600 hover:text-gray-900"}`,children:"All Sessions"})]}),Ft&&o.jsx("p",{className:"mt-2 text-xs text-gray-500",children:"User will be added to all current and future sessions for this product"})]}),!Ft&&o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Sessions * (Current and Future)"}),er.length===0?o.jsx("p",{className:"text-sm text-gray-500",children:"No current or future sessions found for this product."}):o.jsx("div",{className:"max-h-48 overflow-y-auto border border-gray-300 rounded-md p-2",children:er.map(A=>o.jsxs("label",{className:"flex items-start px-3 py-2 hover:bg-gray-50 cursor-pointer border-b border-gray-100 last:border-b-0",children:[o.jsx("input",{type:"checkbox",checked:ke.stakeholderSessionIds.includes(A.id),onChange:()=>St(A.id),className:"w-4 h-4 border-gray-300 rounded focus:ring-[#2D4660] accent-green-600 mt-1",style:{accentColor:"#16a34a"}}),o.jsxs("div",{className:"ml-3 flex-1",children:[o.jsx("div",{className:"text-sm font-medium text-gray-900",children:A.title||A.name||"Unnamed Session"}),o.jsx("div",{className:"text-xs text-gray-500 mt-0.5",children:Me(A)}),o.jsx("div",{className:"text-xs mt-0.5",children:o.jsx("span",{className:`font-medium ${xt(A).color}`,children:xt(A).text})})]})]},A.id))})]})]})]})]})]}),o.jsxs("div",{className:"flex gap-3 mt-6 pt-6 border-t border-gray-200",children:[o.jsx("button",{onClick:Ce,disabled:je,className:"flex-1 px-4 py-2.5 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:"Cancel"}),o.jsx("button",{onClick:tt,disabled:je||!ke.name.trim()||!ke.email.trim()||!ke.password.trim()||J==="session-admin"&&(!Wt||!Ft&&ke.stakeholderSessionIds.length===0)||J==="system-admin"&&ct.sessionAdmin&&Ur&&!Nr&&ke.sessionAdminIds.length===0||J==="system-admin"&&ct.stakeholder&&Wt&&!Ft&&ke.stakeholderSessionIds.length===0,className:"flex-1 px-4 py-2.5 bg-[#2D4660] text-white rounded-lg hover:bg-[#173B65] transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center",children:je?o.jsxs(o.Fragment,{children:[o.jsxs("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",fill:"none",viewBox:"0 0 24 24",children:[o.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),o.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),ke.isSystemAdmin?"Adding System Admin...":ke.sessionAdminIds.length>0?"Adding Session Admin...":ke.stakeholderSessionIds.length>0?"Adding Stakeholder...":"Creating User..."]}):ke.isSystemAdmin?"Add System Admin":ke.sessionAdminIds.length>0?"Add Session Admin":ke.stakeholderSessionIds.length>0?"Add Stakeholder":"Create User"})]})]})})}),un&&kr&&o.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:o.jsx("div",{className:"bg-white rounded-lg shadow-xl max-w-md w-full",children:o.jsxs("div",{className:"p-6",children:[o.jsxs("div",{className:"flex items-start mb-4",children:[o.jsx("div",{className:"flex-shrink-0 w-12 h-12 rounded-full bg-green-100 flex items-center justify-center",children:o.jsx(Or,{className:"h-6 w-6 text-green-600"})}),o.jsxs("div",{className:"ml-4 flex-1",children:[o.jsxs("h2",{className:"text-xl font-bold text-gray-900 mb-1",children:[kr.userType," Created Successfully!"]}),o.jsx("p",{className:"text-sm text-gray-600",children:"The user account has been created and roles have been assigned."})]}),o.jsx("button",{onClick:()=>{Rn(!1),mr(null)},className:"flex-shrink-0 ml-4 p-1 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-lg transition-colors","aria-label":"Close modal",children:o.jsx(gi,{className:"h-5 w-5"})})]}),o.jsx("div",{className:"bg-gray-50 rounded-lg p-4 mb-4",children:o.jsxs("div",{className:"space-y-3",children:[o.jsxs("div",{children:[o.jsx("div",{className:"text-xs font-semibold text-gray-500 uppercase mb-1",children:"Email Address"}),o.jsx("div",{className:"text-sm font-medium text-gray-900",children:kr.email})]}),o.jsxs("div",{children:[o.jsx("div",{className:"text-xs font-semibold text-gray-500 uppercase mb-1",children:"Temporary Password"}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("code",{className:"flex-1 px-3 py-2 bg-white border border-gray-300 rounded-md font-mono text-sm text-gray-900",children:kr.password}),o.jsx("button",{onClick:()=>{navigator.clipboard.writeText(kr.password)},className:"px-3 py-2 bg-gray-200 text-gray-700 rounded-md hover:bg-gray-300 transition-colors text-sm",title:"Copy password",children:"Copy"})]})]})]})}),o.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-3 mb-4",children:o.jsxs("div",{className:"flex",children:[o.jsx("div",{className:"flex-shrink-0",children:o.jsx("svg",{className:"h-5 w-5 text-yellow-600",fill:"currentColor",viewBox:"0 0 20 20",children:o.jsx("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})})}),o.jsxs("div",{className:"ml-3",children:[o.jsx("h3",{className:"text-sm font-medium text-yellow-800",children:"Important: Save This Password"}),o.jsx("div",{className:"mt-1 text-sm text-yellow-700",children:"Please save this password and share it with the user securely. They will need it to log in for the first time."})]})]})}),o.jsx("div",{className:"flex justify-end",children:o.jsx("button",{onClick:()=>{Rn(!1),mr(null)},className:"px-4 py-2.5 bg-[#2D4660] text-white rounded-lg hover:bg-[#173B65] transition-colors",children:"Done"})})]})})})]}):null}const TZ=""+new URL("bottom-left-curve-T4fflHT3.png",import.meta.url).href,IZ=()=>o.jsx("div",{className:"fixed bottom-0 left-0 pointer-events-none z-0",children:o.jsx("img",{src:TZ,alt:"",style:{maxWidth:"600px",height:"auto",opacity:.2}})});function DZ(){return o.jsx(bM,{children:o.jsxs(N5,{children:[o.jsx(IZ,{}),o.jsx(x3,{basename:"/feature-voting-app",children:o.jsxs(YD,{children:[o.jsx(js,{path:"/",element:o.jsx(KD,{to:"/login",replace:!0})}),o.jsx(js,{path:"/login",element:o.jsx(AF,{})}),o.jsx(js,{path:"/sessions",element:o.jsx(_Z,{})}),o.jsx(js,{path:"/create-session",element:o.jsx(kZ,{})}),o.jsx(js,{path:"/manage-stakeholders",element:o.jsx(CZ,{})}),o.jsx(js,{path:"/manage-admins",element:o.jsx(EZ,{})}),o.jsx(js,{path:"/vote",element:o.jsx(mv,{adminMode:!1})}),o.jsx(js,{path:"/admin",element:o.jsx(mv,{adminMode:!0})}),o.jsx(js,{path:"/results",element:o.jsx(mv,{resultsMode:!0})}),o.jsx(js,{path:"/unauthorized",element:o.jsx(AZ,{})}),o.jsx(js,{path:"/system-admins",element:o.jsx(PZ,{})}),o.jsx(js,{path:"/users",element:o.jsx(OZ,{})})]})})]})})}if(typeof window<"u"){const e=console.error;console.error=(...t)=>{var n;const r=((n=t[0])==null?void 0:n.toString())||"";r.includes("runtime.lastError")||r.includes("message channel closed")||e.apply(console,t)}}sD.createRoot(document.getElementById("root")).render(o.jsx(dt.StrictMode,{children:o.jsx(DZ,{})}));
