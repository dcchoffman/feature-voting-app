var lD=Object.defineProperty;var cD=(e,t,r)=>t in e?lD(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;var Gg=(e,t,r)=>cD(e,typeof t!="symbol"?t+"":t,r);function uD(e,t){for(var r=0;r<t.length;r++){const n=t[r];if(typeof n!="string"&&!Array.isArray(n)){for(const s in n)if(s!=="default"&&!(s in e)){const a=Object.getOwnPropertyDescriptor(n,s);a&&Object.defineProperty(e,s,a.get?a:{enumerable:!0,get:()=>n[s]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const a of s)if(a.type==="childList")for(const l of a.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&n(l)}).observe(document,{childList:!0,subtree:!0});function r(s){const a={};return s.integrity&&(a.integrity=s.integrity),s.referrerPolicy&&(a.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?a.credentials="include":s.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function n(s){if(s.ep)return;s.ep=!0;const a=r(s);fetch(s.href,a)}})();function ia(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function dD(e){if(Object.prototype.hasOwnProperty.call(e,"__esModule"))return e;var t=e.default;if(typeof t=="function"){var r=function n(){return this instanceof n?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};r.prototype=t.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(e).forEach(function(n){var s=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(r,n,s.get?s:{enumerable:!0,get:function(){return e[n]}})}),r}var Yg={exports:{}},Uu={},Jg={exports:{}},Kt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Dj;function fD(){if(Dj)return Kt;Dj=1;var e=Symbol.for("react.element"),t=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),a=Symbol.for("react.provider"),l=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),m=Symbol.for("react.memo"),f=Symbol.for("react.lazy"),p=Symbol.iterator;function y(I){return I===null||typeof I!="object"?null:(I=p&&I[p]||I["@@iterator"],typeof I=="function"?I:null)}var x={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},j=Object.assign,w={};function S(I,B,Me){this.props=I,this.context=B,this.refs=w,this.updater=Me||x}S.prototype.isReactComponent={},S.prototype.setState=function(I,B){if(typeof I!="object"&&typeof I!="function"&&I!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,I,B,"setState")},S.prototype.forceUpdate=function(I){this.updater.enqueueForceUpdate(this,I,"forceUpdate")};function _(){}_.prototype=S.prototype;function E(I,B,Me){this.props=I,this.context=B,this.refs=w,this.updater=Me||x}var C=E.prototype=new _;C.constructor=E,j(C,S.prototype),C.isPureReactComponent=!0;var A=Array.isArray,T=Object.prototype.hasOwnProperty,P={current:null},z={key:!0,ref:!0,__self:!0,__source:!0};function J(I,B,Me){var Se,Ie={},je=null,Ne=null;if(B!=null)for(Se in B.ref!==void 0&&(Ne=B.ref),B.key!==void 0&&(je=""+B.key),B)T.call(B,Se)&&!z.hasOwnProperty(Se)&&(Ie[Se]=B[Se]);var Z=arguments.length-2;if(Z===1)Ie.children=Me;else if(1<Z){for(var $=Array(Z),xe=0;xe<Z;xe++)$[xe]=arguments[xe+2];Ie.children=$}if(I&&I.defaultProps)for(Se in Z=I.defaultProps,Z)Ie[Se]===void 0&&(Ie[Se]=Z[Se]);return{$$typeof:e,type:I,key:je,ref:Ne,props:Ie,_owner:P.current}}function H(I,B){return{$$typeof:e,type:I.type,key:B,ref:I.ref,props:I.props,_owner:I._owner}}function fe(I){return typeof I=="object"&&I!==null&&I.$$typeof===e}function X(I){var B={"=":"=0",":":"=2"};return"$"+I.replace(/[=:]/g,function(Me){return B[Me]})}var K=/\/+/g;function ae(I,B){return typeof I=="object"&&I!==null&&I.key!=null?X(""+I.key):B.toString(36)}function U(I,B,Me,Se,Ie){var je=typeof I;(je==="undefined"||je==="boolean")&&(I=null);var Ne=!1;if(I===null)Ne=!0;else switch(je){case"string":case"number":Ne=!0;break;case"object":switch(I.$$typeof){case e:case t:Ne=!0}}if(Ne)return Ne=I,Ie=Ie(Ne),I=Se===""?"."+ae(Ne,0):Se,A(Ie)?(Me="",I!=null&&(Me=I.replace(K,"$&/")+"/"),U(Ie,B,Me,"",function(xe){return xe})):Ie!=null&&(fe(Ie)&&(Ie=H(Ie,Me+(!Ie.key||Ne&&Ne.key===Ie.key?"":(""+Ie.key).replace(K,"$&/")+"/")+I)),B.push(Ie)),1;if(Ne=0,Se=Se===""?".":Se+":",A(I))for(var Z=0;Z<I.length;Z++){je=I[Z];var $=Se+ae(je,Z);Ne+=U(je,B,Me,$,Ie)}else if($=y(I),typeof $=="function")for(I=$.call(I),Z=0;!(je=I.next()).done;)je=je.value,$=Se+ae(je,Z++),Ne+=U(je,B,Me,$,Ie);else if(je==="object")throw B=String(I),Error("Objects are not valid as a React child (found: "+(B==="[object Object]"?"object with keys {"+Object.keys(I).join(", ")+"}":B)+"). If you meant to render a collection of children, use an array instead.");return Ne}function ne(I,B,Me){if(I==null)return I;var Se=[],Ie=0;return U(I,Se,"","",function(je){return B.call(Me,je,Ie++)}),Se}function G(I){if(I._status===-1){var B=I._result;B=B(),B.then(function(Me){(I._status===0||I._status===-1)&&(I._status=1,I._result=Me)},function(Me){(I._status===0||I._status===-1)&&(I._status=2,I._result=Me)}),I._status===-1&&(I._status=0,I._result=B)}if(I._status===1)return I._result.default;throw I._result}var ie={current:null},te={transition:null},W={ReactCurrentDispatcher:ie,ReactCurrentBatchConfig:te,ReactCurrentOwner:P};function se(){throw Error("act(...) is not supported in production builds of React.")}return Kt.Children={map:ne,forEach:function(I,B,Me){ne(I,function(){B.apply(this,arguments)},Me)},count:function(I){var B=0;return ne(I,function(){B++}),B},toArray:function(I){return ne(I,function(B){return B})||[]},only:function(I){if(!fe(I))throw Error("React.Children.only expected to receive a single React element child.");return I}},Kt.Component=S,Kt.Fragment=r,Kt.Profiler=s,Kt.PureComponent=E,Kt.StrictMode=n,Kt.Suspense=d,Kt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=W,Kt.act=se,Kt.cloneElement=function(I,B,Me){if(I==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+I+".");var Se=j({},I.props),Ie=I.key,je=I.ref,Ne=I._owner;if(B!=null){if(B.ref!==void 0&&(je=B.ref,Ne=P.current),B.key!==void 0&&(Ie=""+B.key),I.type&&I.type.defaultProps)var Z=I.type.defaultProps;for($ in B)T.call(B,$)&&!z.hasOwnProperty($)&&(Se[$]=B[$]===void 0&&Z!==void 0?Z[$]:B[$])}var $=arguments.length-2;if($===1)Se.children=Me;else if(1<$){Z=Array($);for(var xe=0;xe<$;xe++)Z[xe]=arguments[xe+2];Se.children=Z}return{$$typeof:e,type:I.type,key:Ie,ref:je,props:Se,_owner:Ne}},Kt.createContext=function(I){return I={$$typeof:l,_currentValue:I,_currentValue2:I,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},I.Provider={$$typeof:a,_context:I},I.Consumer=I},Kt.createElement=J,Kt.createFactory=function(I){var B=J.bind(null,I);return B.type=I,B},Kt.createRef=function(){return{current:null}},Kt.forwardRef=function(I){return{$$typeof:u,render:I}},Kt.isValidElement=fe,Kt.lazy=function(I){return{$$typeof:f,_payload:{_status:-1,_result:I},_init:G}},Kt.memo=function(I,B){return{$$typeof:m,type:I,compare:B===void 0?null:B}},Kt.startTransition=function(I){var B=te.transition;te.transition={};try{I()}finally{te.transition=B}},Kt.unstable_act=se,Kt.useCallback=function(I,B){return ie.current.useCallback(I,B)},Kt.useContext=function(I){return ie.current.useContext(I)},Kt.useDebugValue=function(){},Kt.useDeferredValue=function(I){return ie.current.useDeferredValue(I)},Kt.useEffect=function(I,B){return ie.current.useEffect(I,B)},Kt.useId=function(){return ie.current.useId()},Kt.useImperativeHandle=function(I,B,Me){return ie.current.useImperativeHandle(I,B,Me)},Kt.useInsertionEffect=function(I,B){return ie.current.useInsertionEffect(I,B)},Kt.useLayoutEffect=function(I,B){return ie.current.useLayoutEffect(I,B)},Kt.useMemo=function(I,B){return ie.current.useMemo(I,B)},Kt.useReducer=function(I,B,Me){return ie.current.useReducer(I,B,Me)},Kt.useRef=function(I){return ie.current.useRef(I)},Kt.useState=function(I){return ie.current.useState(I)},Kt.useSyncExternalStore=function(I,B,Me){return ie.current.useSyncExternalStore(I,B,Me)},Kt.useTransition=function(){return ie.current.useTransition()},Kt.version="18.3.1",Kt}var $j;function Qc(){return $j||($j=1,Jg.exports=fD()),Jg.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Rj;function hD(){if(Rj)return Uu;Rj=1;var e=Qc(),t=Symbol.for("react.element"),r=Symbol.for("react.fragment"),n=Object.prototype.hasOwnProperty,s=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,a={key:!0,ref:!0,__self:!0,__source:!0};function l(u,d,m){var f,p={},y=null,x=null;m!==void 0&&(y=""+m),d.key!==void 0&&(y=""+d.key),d.ref!==void 0&&(x=d.ref);for(f in d)n.call(d,f)&&!a.hasOwnProperty(f)&&(p[f]=d[f]);if(u&&u.defaultProps)for(f in d=u.defaultProps,d)p[f]===void 0&&(p[f]=d[f]);return{$$typeof:t,type:u,key:y,ref:x,props:p,_owner:s.current}}return Uu.Fragment=r,Uu.jsx=l,Uu.jsxs=l,Uu}var Mj;function mD(){return Mj||(Mj=1,Yg.exports=hD()),Yg.exports}var i=mD(),v=Qc();const pt=ia(v),pD=uD({__proto__:null,default:pt},[v]);var Yf={},Xg={exports:{}},Vs={},Qg={exports:{}},Zg={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Fj;function gD(){return Fj||(Fj=1,(function(e){function t(te,W){var se=te.length;te.push(W);e:for(;0<se;){var I=se-1>>>1,B=te[I];if(0<s(B,W))te[I]=W,te[se]=B,se=I;else break e}}function r(te){return te.length===0?null:te[0]}function n(te){if(te.length===0)return null;var W=te[0],se=te.pop();if(se!==W){te[0]=se;e:for(var I=0,B=te.length,Me=B>>>1;I<Me;){var Se=2*(I+1)-1,Ie=te[Se],je=Se+1,Ne=te[je];if(0>s(Ie,se))je<B&&0>s(Ne,Ie)?(te[I]=Ne,te[je]=se,I=je):(te[I]=Ie,te[Se]=se,I=Se);else if(je<B&&0>s(Ne,se))te[I]=Ne,te[je]=se,I=je;else break e}}return W}function s(te,W){var se=te.sortIndex-W.sortIndex;return se!==0?se:te.id-W.id}if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;e.unstable_now=function(){return a.now()}}else{var l=Date,u=l.now();e.unstable_now=function(){return l.now()-u}}var d=[],m=[],f=1,p=null,y=3,x=!1,j=!1,w=!1,S=typeof setTimeout=="function"?setTimeout:null,_=typeof clearTimeout=="function"?clearTimeout:null,E=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function C(te){for(var W=r(m);W!==null;){if(W.callback===null)n(m);else if(W.startTime<=te)n(m),W.sortIndex=W.expirationTime,t(d,W);else break;W=r(m)}}function A(te){if(w=!1,C(te),!j)if(r(d)!==null)j=!0,G(T);else{var W=r(m);W!==null&&ie(A,W.startTime-te)}}function T(te,W){j=!1,w&&(w=!1,_(J),J=-1),x=!0;var se=y;try{for(C(W),p=r(d);p!==null&&(!(p.expirationTime>W)||te&&!X());){var I=p.callback;if(typeof I=="function"){p.callback=null,y=p.priorityLevel;var B=I(p.expirationTime<=W);W=e.unstable_now(),typeof B=="function"?p.callback=B:p===r(d)&&n(d),C(W)}else n(d);p=r(d)}if(p!==null)var Me=!0;else{var Se=r(m);Se!==null&&ie(A,Se.startTime-W),Me=!1}return Me}finally{p=null,y=se,x=!1}}var P=!1,z=null,J=-1,H=5,fe=-1;function X(){return!(e.unstable_now()-fe<H)}function K(){if(z!==null){var te=e.unstable_now();fe=te;var W=!0;try{W=z(!0,te)}finally{W?ae():(P=!1,z=null)}}else P=!1}var ae;if(typeof E=="function")ae=function(){E(K)};else if(typeof MessageChannel<"u"){var U=new MessageChannel,ne=U.port2;U.port1.onmessage=K,ae=function(){ne.postMessage(null)}}else ae=function(){S(K,0)};function G(te){z=te,P||(P=!0,ae())}function ie(te,W){J=S(function(){te(e.unstable_now())},W)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(te){te.callback=null},e.unstable_continueExecution=function(){j||x||(j=!0,G(T))},e.unstable_forceFrameRate=function(te){0>te||125<te?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):H=0<te?Math.floor(1e3/te):5},e.unstable_getCurrentPriorityLevel=function(){return y},e.unstable_getFirstCallbackNode=function(){return r(d)},e.unstable_next=function(te){switch(y){case 1:case 2:case 3:var W=3;break;default:W=y}var se=y;y=W;try{return te()}finally{y=se}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(te,W){switch(te){case 1:case 2:case 3:case 4:case 5:break;default:te=3}var se=y;y=te;try{return W()}finally{y=se}},e.unstable_scheduleCallback=function(te,W,se){var I=e.unstable_now();switch(typeof se=="object"&&se!==null?(se=se.delay,se=typeof se=="number"&&0<se?I+se:I):se=I,te){case 1:var B=-1;break;case 2:B=250;break;case 5:B=1073741823;break;case 4:B=1e4;break;default:B=5e3}return B=se+B,te={id:f++,callback:W,priorityLevel:te,startTime:se,expirationTime:B,sortIndex:-1},se>I?(te.sortIndex=se,t(m,te),r(d)===null&&te===r(m)&&(w?(_(J),J=-1):w=!0,ie(A,se-I))):(te.sortIndex=B,t(d,te),j||x||(j=!0,G(T))),te},e.unstable_shouldYield=X,e.unstable_wrapCallback=function(te){var W=y;return function(){var se=y;y=W;try{return te.apply(this,arguments)}finally{y=se}}}})(Zg)),Zg}var Lj;function yD(){return Lj||(Lj=1,Qg.exports=gD()),Qg.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var zj;function vD(){if(zj)return Vs;zj=1;var e=Qc(),t=yD();function r(o){for(var c="https://reactjs.org/docs/error-decoder.html?invariant="+o,h=1;h<arguments.length;h++)c+="&args[]="+encodeURIComponent(arguments[h]);return"Minified React error #"+o+"; visit "+c+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var n=new Set,s={};function a(o,c){l(o,c),l(o+"Capture",c)}function l(o,c){for(s[o]=c,o=0;o<c.length;o++)n.add(c[o])}var u=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),d=Object.prototype.hasOwnProperty,m=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,f={},p={};function y(o){return d.call(p,o)?!0:d.call(f,o)?!1:m.test(o)?p[o]=!0:(f[o]=!0,!1)}function x(o,c,h,g){if(h!==null&&h.type===0)return!1;switch(typeof c){case"function":case"symbol":return!0;case"boolean":return g?!1:h!==null?!h.acceptsBooleans:(o=o.toLowerCase().slice(0,5),o!=="data-"&&o!=="aria-");default:return!1}}function j(o,c,h,g){if(c===null||typeof c>"u"||x(o,c,h,g))return!0;if(g)return!1;if(h!==null)switch(h.type){case 3:return!c;case 4:return c===!1;case 5:return isNaN(c);case 6:return isNaN(c)||1>c}return!1}function w(o,c,h,g,b,k,O){this.acceptsBooleans=c===2||c===3||c===4,this.attributeName=g,this.attributeNamespace=b,this.mustUseProperty=h,this.propertyName=o,this.type=c,this.sanitizeURL=k,this.removeEmptyString=O}var S={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(o){S[o]=new w(o,0,!1,o,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(o){var c=o[0];S[c]=new w(c,1,!1,o[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(o){S[o]=new w(o,2,!1,o.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(o){S[o]=new w(o,2,!1,o,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(o){S[o]=new w(o,3,!1,o.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(o){S[o]=new w(o,3,!0,o,null,!1,!1)}),["capture","download"].forEach(function(o){S[o]=new w(o,4,!1,o,null,!1,!1)}),["cols","rows","size","span"].forEach(function(o){S[o]=new w(o,6,!1,o,null,!1,!1)}),["rowSpan","start"].forEach(function(o){S[o]=new w(o,5,!1,o.toLowerCase(),null,!1,!1)});var _=/[\-:]([a-z])/g;function E(o){return o[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(o){var c=o.replace(_,E);S[c]=new w(c,1,!1,o,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(o){var c=o.replace(_,E);S[c]=new w(c,1,!1,o,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(o){var c=o.replace(_,E);S[c]=new w(c,1,!1,o,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(o){S[o]=new w(o,1,!1,o.toLowerCase(),null,!1,!1)}),S.xlinkHref=new w("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(o){S[o]=new w(o,1,!1,o.toLowerCase(),null,!0,!0)});function C(o,c,h,g){var b=S.hasOwnProperty(c)?S[c]:null;(b!==null?b.type!==0:g||!(2<c.length)||c[0]!=="o"&&c[0]!=="O"||c[1]!=="n"&&c[1]!=="N")&&(j(c,h,b,g)&&(h=null),g||b===null?y(c)&&(h===null?o.removeAttribute(c):o.setAttribute(c,""+h)):b.mustUseProperty?o[b.propertyName]=h===null?b.type===3?!1:"":h:(c=b.attributeName,g=b.attributeNamespace,h===null?o.removeAttribute(c):(b=b.type,h=b===3||b===4&&h===!0?"":""+h,g?o.setAttributeNS(g,c,h):o.setAttribute(c,h))))}var A=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,T=Symbol.for("react.element"),P=Symbol.for("react.portal"),z=Symbol.for("react.fragment"),J=Symbol.for("react.strict_mode"),H=Symbol.for("react.profiler"),fe=Symbol.for("react.provider"),X=Symbol.for("react.context"),K=Symbol.for("react.forward_ref"),ae=Symbol.for("react.suspense"),U=Symbol.for("react.suspense_list"),ne=Symbol.for("react.memo"),G=Symbol.for("react.lazy"),ie=Symbol.for("react.offscreen"),te=Symbol.iterator;function W(o){return o===null||typeof o!="object"?null:(o=te&&o[te]||o["@@iterator"],typeof o=="function"?o:null)}var se=Object.assign,I;function B(o){if(I===void 0)try{throw Error()}catch(h){var c=h.stack.trim().match(/\n( *(at )?)/);I=c&&c[1]||""}return`
`+I+o}var Me=!1;function Se(o,c){if(!o||Me)return"";Me=!0;var h=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(c)if(c=function(){throw Error()},Object.defineProperty(c.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(c,[])}catch(ge){var g=ge}Reflect.construct(o,[],c)}else{try{c.call()}catch(ge){g=ge}o.call(c.prototype)}else{try{throw Error()}catch(ge){g=ge}o()}}catch(ge){if(ge&&g&&typeof ge.stack=="string"){for(var b=ge.stack.split(`
`),k=g.stack.split(`
`),O=b.length-1,L=k.length-1;1<=O&&0<=L&&b[O]!==k[L];)L--;for(;1<=O&&0<=L;O--,L--)if(b[O]!==k[L]){if(O!==1||L!==1)do if(O--,L--,0>L||b[O]!==k[L]){var Y=`
`+b[O].replace(" at new "," at ");return o.displayName&&Y.includes("<anonymous>")&&(Y=Y.replace("<anonymous>",o.displayName)),Y}while(1<=O&&0<=L);break}}}finally{Me=!1,Error.prepareStackTrace=h}return(o=o?o.displayName||o.name:"")?B(o):""}function Ie(o){switch(o.tag){case 5:return B(o.type);case 16:return B("Lazy");case 13:return B("Suspense");case 19:return B("SuspenseList");case 0:case 2:case 15:return o=Se(o.type,!1),o;case 11:return o=Se(o.type.render,!1),o;case 1:return o=Se(o.type,!0),o;default:return""}}function je(o){if(o==null)return null;if(typeof o=="function")return o.displayName||o.name||null;if(typeof o=="string")return o;switch(o){case z:return"Fragment";case P:return"Portal";case H:return"Profiler";case J:return"StrictMode";case ae:return"Suspense";case U:return"SuspenseList"}if(typeof o=="object")switch(o.$$typeof){case X:return(o.displayName||"Context")+".Consumer";case fe:return(o._context.displayName||"Context")+".Provider";case K:var c=o.render;return o=o.displayName,o||(o=c.displayName||c.name||"",o=o!==""?"ForwardRef("+o+")":"ForwardRef"),o;case ne:return c=o.displayName||null,c!==null?c:je(o.type)||"Memo";case G:c=o._payload,o=o._init;try{return je(o(c))}catch{}}return null}function Ne(o){var c=o.type;switch(o.tag){case 24:return"Cache";case 9:return(c.displayName||"Context")+".Consumer";case 10:return(c._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return o=c.render,o=o.displayName||o.name||"",c.displayName||(o!==""?"ForwardRef("+o+")":"ForwardRef");case 7:return"Fragment";case 5:return c;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return je(c);case 8:return c===J?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof c=="function")return c.displayName||c.name||null;if(typeof c=="string")return c}return null}function Z(o){switch(typeof o){case"boolean":case"number":case"string":case"undefined":return o;case"object":return o;default:return""}}function $(o){var c=o.type;return(o=o.nodeName)&&o.toLowerCase()==="input"&&(c==="checkbox"||c==="radio")}function xe(o){var c=$(o)?"checked":"value",h=Object.getOwnPropertyDescriptor(o.constructor.prototype,c),g=""+o[c];if(!o.hasOwnProperty(c)&&typeof h<"u"&&typeof h.get=="function"&&typeof h.set=="function"){var b=h.get,k=h.set;return Object.defineProperty(o,c,{configurable:!0,get:function(){return b.call(this)},set:function(O){g=""+O,k.call(this,O)}}),Object.defineProperty(o,c,{enumerable:h.enumerable}),{getValue:function(){return g},setValue:function(O){g=""+O},stopTracking:function(){o._valueTracker=null,delete o[c]}}}}function le(o){o._valueTracker||(o._valueTracker=xe(o))}function M(o){if(!o)return!1;var c=o._valueTracker;if(!c)return!0;var h=c.getValue(),g="";return o&&(g=$(o)?o.checked?"true":"false":o.value),o=g,o!==h?(c.setValue(o),!0):!1}function De(o){if(o=o||(typeof document<"u"?document:void 0),typeof o>"u")return null;try{return o.activeElement||o.body}catch{return o.body}}function Pe(o,c){var h=c.checked;return se({},c,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:h??o._wrapperState.initialChecked})}function et(o,c){var h=c.defaultValue==null?"":c.defaultValue,g=c.checked!=null?c.checked:c.defaultChecked;h=Z(c.value!=null?c.value:h),o._wrapperState={initialChecked:g,initialValue:h,controlled:c.type==="checkbox"||c.type==="radio"?c.checked!=null:c.value!=null}}function rt(o,c){c=c.checked,c!=null&&C(o,"checked",c,!1)}function kt(o,c){rt(o,c);var h=Z(c.value),g=c.type;if(h!=null)g==="number"?(h===0&&o.value===""||o.value!=h)&&(o.value=""+h):o.value!==""+h&&(o.value=""+h);else if(g==="submit"||g==="reset"){o.removeAttribute("value");return}c.hasOwnProperty("value")?Yt(o,c.type,h):c.hasOwnProperty("defaultValue")&&Yt(o,c.type,Z(c.defaultValue)),c.checked==null&&c.defaultChecked!=null&&(o.defaultChecked=!!c.defaultChecked)}function lt(o,c,h){if(c.hasOwnProperty("value")||c.hasOwnProperty("defaultValue")){var g=c.type;if(!(g!=="submit"&&g!=="reset"||c.value!==void 0&&c.value!==null))return;c=""+o._wrapperState.initialValue,h||c===o.value||(o.value=c),o.defaultValue=c}h=o.name,h!==""&&(o.name=""),o.defaultChecked=!!o._wrapperState.initialChecked,h!==""&&(o.name=h)}function Yt(o,c,h){(c!=="number"||De(o.ownerDocument)!==o)&&(h==null?o.defaultValue=""+o._wrapperState.initialValue:o.defaultValue!==""+h&&(o.defaultValue=""+h))}var R=Array.isArray;function re(o,c,h,g){if(o=o.options,c){c={};for(var b=0;b<h.length;b++)c["$"+h[b]]=!0;for(h=0;h<o.length;h++)b=c.hasOwnProperty("$"+o[h].value),o[h].selected!==b&&(o[h].selected=b),b&&g&&(o[h].defaultSelected=!0)}else{for(h=""+Z(h),c=null,b=0;b<o.length;b++){if(o[b].value===h){o[b].selected=!0,g&&(o[b].defaultSelected=!0);return}c!==null||o[b].disabled||(c=o[b])}c!==null&&(c.selected=!0)}}function de(o,c){if(c.dangerouslySetInnerHTML!=null)throw Error(r(91));return se({},c,{value:void 0,defaultValue:void 0,children:""+o._wrapperState.initialValue})}function Fe(o,c){var h=c.value;if(h==null){if(h=c.children,c=c.defaultValue,h!=null){if(c!=null)throw Error(r(92));if(R(h)){if(1<h.length)throw Error(r(93));h=h[0]}c=h}c==null&&(c=""),h=c}o._wrapperState={initialValue:Z(h)}}function we(o,c){var h=Z(c.value),g=Z(c.defaultValue);h!=null&&(h=""+h,h!==o.value&&(o.value=h),c.defaultValue==null&&o.defaultValue!==h&&(o.defaultValue=h)),g!=null&&(o.defaultValue=""+g)}function Ae(o){var c=o.textContent;c===o._wrapperState.initialValue&&c!==""&&c!==null&&(o.value=c)}function Ke(o){switch(o){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function It(o,c){return o==null||o==="http://www.w3.org/1999/xhtml"?Ke(c):o==="http://www.w3.org/2000/svg"&&c==="foreignObject"?"http://www.w3.org/1999/xhtml":o}var Rt,Pt=(function(o){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(c,h,g,b){MSApp.execUnsafeLocalFunction(function(){return o(c,h,g,b)})}:o})(function(o,c){if(o.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in o)o.innerHTML=c;else{for(Rt=Rt||document.createElement("div"),Rt.innerHTML="<svg>"+c.valueOf().toString()+"</svg>",c=Rt.firstChild;o.firstChild;)o.removeChild(o.firstChild);for(;c.firstChild;)o.appendChild(c.firstChild)}});function rr(o,c){if(c){var h=o.firstChild;if(h&&h===o.lastChild&&h.nodeType===3){h.nodeValue=c;return}}o.textContent=c}var Ht={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},He=["Webkit","ms","Moz","O"];Object.keys(Ht).forEach(function(o){He.forEach(function(c){c=c+o.charAt(0).toUpperCase()+o.substring(1),Ht[c]=Ht[o]})});function ft(o,c,h){return c==null||typeof c=="boolean"||c===""?"":h||typeof c!="number"||c===0||Ht.hasOwnProperty(o)&&Ht[o]?(""+c).trim():c+"px"}function gt(o,c){o=o.style;for(var h in c)if(c.hasOwnProperty(h)){var g=h.indexOf("--")===0,b=ft(h,c[h],g);h==="float"&&(h="cssFloat"),g?o.setProperty(h,b):o[h]=b}}var Lt=se({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function _t(o,c){if(c){if(Lt[o]&&(c.children!=null||c.dangerouslySetInnerHTML!=null))throw Error(r(137,o));if(c.dangerouslySetInnerHTML!=null){if(c.children!=null)throw Error(r(60));if(typeof c.dangerouslySetInnerHTML!="object"||!("__html"in c.dangerouslySetInnerHTML))throw Error(r(61))}if(c.style!=null&&typeof c.style!="object")throw Error(r(62))}}function nr(o,c){if(o.indexOf("-")===-1)return typeof c.is=="string";switch(o){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ze=null;function Ot(o){return o=o.target||o.srcElement||window,o.correspondingUseElement&&(o=o.correspondingUseElement),o.nodeType===3?o.parentNode:o}var zt=null,Vt=null,hr=null;function Zt(o){if(o=_u(o)){if(typeof zt!="function")throw Error(r(280));var c=o.stateNode;c&&(c=uf(c),zt(o.stateNode,o.type,c))}}function gn(o){Vt?hr?hr.push(o):hr=[o]:Vt=o}function Jt(){if(Vt){var o=Vt,c=hr;if(hr=Vt=null,Zt(o),c)for(o=0;o<c.length;o++)Zt(c[o])}}function mr(o,c){return o(c)}function or(){}var En=!1;function zr(o,c,h){if(En)return o(c,h);En=!0;try{return mr(o,c,h)}finally{En=!1,(Vt!==null||hr!==null)&&(or(),Jt())}}function lr(o,c){var h=o.stateNode;if(h===null)return null;var g=uf(h);if(g===null)return null;h=g[c];e:switch(c){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(g=!g.disabled)||(o=o.type,g=!(o==="button"||o==="input"||o==="select"||o==="textarea")),o=!g;break e;default:o=!1}if(o)return null;if(h&&typeof h!="function")throw Error(r(231,c,typeof h));return h}var Gr=!1;if(u)try{var Dt={};Object.defineProperty(Dt,"passive",{get:function(){Gr=!0}}),window.addEventListener("test",Dt,Dt),window.removeEventListener("test",Dt,Dt)}catch{Gr=!1}function _r(o,c,h,g,b,k,O,L,Y){var ge=Array.prototype.slice.call(arguments,3);try{c.apply(h,ge)}catch(Re){this.onError(Re)}}var Ur=!1,Sr=null,pr=!1,Zr=null,Ss={onError:function(o){Ur=!0,Sr=o}};function es(o,c,h,g,b,k,O,L,Y){Ur=!1,Sr=null,_r.apply(Ss,arguments)}function Ns(o,c,h,g,b,k,O,L,Y){if(es.apply(this,arguments),Ur){if(Ur){var ge=Sr;Ur=!1,Sr=null}else throw Error(r(198));pr||(pr=!0,Zr=ge)}}function Ir(o){var c=o,h=o;if(o.alternate)for(;c.return;)c=c.return;else{o=c;do c=o,(c.flags&4098)!==0&&(h=c.return),o=c.return;while(o)}return c.tag===3?h:null}function Rs(o){if(o.tag===13){var c=o.memoizedState;if(c===null&&(o=o.alternate,o!==null&&(c=o.memoizedState)),c!==null)return c.dehydrated}return null}function ts(o){if(Ir(o)!==o)throw Error(r(188))}function Nr(o){var c=o.alternate;if(!c){if(c=Ir(o),c===null)throw Error(r(188));return c!==o?null:o}for(var h=o,g=c;;){var b=h.return;if(b===null)break;var k=b.alternate;if(k===null){if(g=b.return,g!==null){h=g;continue}break}if(b.child===k.child){for(k=b.child;k;){if(k===h)return ts(b),o;if(k===g)return ts(b),c;k=k.sibling}throw Error(r(188))}if(h.return!==g.return)h=b,g=k;else{for(var O=!1,L=b.child;L;){if(L===h){O=!0,h=b,g=k;break}if(L===g){O=!0,g=b,h=k;break}L=L.sibling}if(!O){for(L=k.child;L;){if(L===h){O=!0,h=k,g=b;break}if(L===g){O=!0,g=k,h=b;break}L=L.sibling}if(!O)throw Error(r(189))}}if(h.alternate!==g)throw Error(r(190))}if(h.tag!==3)throw Error(r(188));return h.stateNode.current===h?o:c}function on(o){return o=Nr(o),o!==null?Dr(o):null}function Dr(o){if(o.tag===5||o.tag===6)return o;for(o=o.child;o!==null;){var c=Dr(o);if(c!==null)return c;o=o.sibling}return null}var Br=t.unstable_scheduleCallback,gr=t.unstable_cancelCallback,An=t.unstable_shouldYield,bi=t.unstable_requestPaint,sr=t.unstable_now,ps=t.unstable_getCurrentPriorityLevel,ee=t.unstable_ImmediatePriority,Ce=t.unstable_UserBlockingPriority,ze=t.unstable_NormalPriority,Be=t.unstable_LowPriority,Je=t.unstable_IdlePriority,Oe=null,ct=null;function ht(o){if(ct&&typeof ct.onCommitFiberRoot=="function")try{ct.onCommitFiberRoot(Oe,o,void 0,(o.current.flags&128)===128)}catch{}}var St=Math.clz32?Math.clz32:Ut,We=Math.log,Cr=Math.LN2;function Ut(o){return o>>>=0,o===0?32:31-(We(o)/Cr|0)|0}var Wr=64,Bt=4194304;function yn(o){switch(o&-o){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return o&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return o}}function Qs(o,c){var h=o.pendingLanes;if(h===0)return 0;var g=0,b=o.suspendedLanes,k=o.pingedLanes,O=h&268435455;if(O!==0){var L=O&~b;L!==0?g=yn(L):(k&=O,k!==0&&(g=yn(k)))}else O=h&~b,O!==0?g=yn(O):k!==0&&(g=yn(k));if(g===0)return 0;if(c!==0&&c!==g&&(c&b)===0&&(b=g&-g,k=c&-c,b>=k||b===16&&(k&4194240)!==0))return c;if((g&4)!==0&&(g|=h&16),c=o.entangledLanes,c!==0)for(o=o.entanglements,c&=g;0<c;)h=31-St(c),b=1<<h,g|=o[h],c&=~b;return g}function yr(o,c){switch(o){case 1:case 2:case 4:return c+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return c+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Bn(o,c){for(var h=o.suspendedLanes,g=o.pingedLanes,b=o.expirationTimes,k=o.pendingLanes;0<k;){var O=31-St(k),L=1<<O,Y=b[O];Y===-1?((L&h)===0||(L&g)!==0)&&(b[O]=yr(L,c)):Y<=c&&(o.expiredLanes|=L),k&=~L}}function br(o){return o=o.pendingLanes&-1073741825,o!==0?o:o&1073741824?1073741824:0}function la(){var o=Wr;return Wr<<=1,(Wr&4194240)===0&&(Wr=64),o}function fr(o){for(var c=[],h=0;31>h;h++)c.push(o);return c}function Zs(o,c,h){o.pendingLanes|=c,c!==536870912&&(o.suspendedLanes=0,o.pingedLanes=0),o=o.eventTimes,c=31-St(c),o[c]=h}function Ms(o,c){var h=o.pendingLanes&~c;o.pendingLanes=c,o.suspendedLanes=0,o.pingedLanes=0,o.expiredLanes&=c,o.mutableReadLanes&=c,o.entangledLanes&=c,c=o.entanglements;var g=o.eventTimes;for(o=o.expirationTimes;0<h;){var b=31-St(h),k=1<<b;c[b]=0,g[b]=-1,o[b]=-1,h&=~k}}function ln(o,c){var h=o.entangledLanes|=c;for(o=o.entanglements;h;){var g=31-St(h),b=1<<g;b&c|o[g]&c&&(o[g]|=c),h&=~b}}var Xt=0;function Oa(o){return o&=-o,1<o?4<o?(o&268435455)!==0?16:536870912:4:1}var Ta,ei,Fs,vn,ca,ks=!1,Vr=[],xn=null,bn=null,rs=null,gs=new Map,ua=new Map,cn=[],vo="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Li(o,c){switch(o){case"focusin":case"focusout":xn=null;break;case"dragenter":case"dragleave":bn=null;break;case"mouseover":case"mouseout":rs=null;break;case"pointerover":case"pointerout":gs.delete(c.pointerId);break;case"gotpointercapture":case"lostpointercapture":ua.delete(c.pointerId)}}function Wn(o,c,h,g,b,k){return o===null||o.nativeEvent!==k?(o={blockedOn:c,domEventName:h,eventSystemFlags:g,nativeEvent:k,targetContainers:[b]},c!==null&&(c=_u(c),c!==null&&ei(c)),o):(o.eventSystemFlags|=g,c=o.targetContainers,b!==null&&c.indexOf(b)===-1&&c.push(b),o)}function xo(o,c,h,g,b){switch(c){case"focusin":return xn=Wn(xn,o,c,h,g,b),!0;case"dragenter":return bn=Wn(bn,o,c,h,g,b),!0;case"mouseover":return rs=Wn(rs,o,c,h,g,b),!0;case"pointerover":var k=b.pointerId;return gs.set(k,Wn(gs.get(k)||null,o,c,h,g,b)),!0;case"gotpointercapture":return k=b.pointerId,ua.set(k,Wn(ua.get(k)||null,o,c,h,g,b)),!0}return!1}function Ia(o){var c=tl(o.target);if(c!==null){var h=Ir(c);if(h!==null){if(c=h.tag,c===13){if(c=Rs(h),c!==null){o.blockedOn=c,ca(o.priority,function(){Fs(h)});return}}else if(c===3&&h.stateNode.current.memoizedState.isDehydrated){o.blockedOn=h.tag===3?h.stateNode.containerInfo:null;return}}}o.blockedOn=null}function da(o){if(o.blockedOn!==null)return!1;for(var c=o.targetContainers;0<c.length;){var h=N(o.domEventName,o.eventSystemFlags,c[0],o.nativeEvent);if(h===null){h=o.nativeEvent;var g=new h.constructor(h.type,h);Ze=g,h.target.dispatchEvent(g),Ze=null}else return c=_u(h),c!==null&&ei(c),o.blockedOn=h,!1;c.shift()}return!0}function fa(o,c,h){da(o)&&h.delete(c)}function Da(){ks=!1,xn!==null&&da(xn)&&(xn=null),bn!==null&&da(bn)&&(bn=null),rs!==null&&da(rs)&&(rs=null),gs.forEach(fa),ua.forEach(fa)}function en(o,c){o.blockedOn===c&&(o.blockedOn=null,ks||(ks=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,Da)))}function ns(o){function c(b){return en(b,o)}if(0<Vr.length){en(Vr[0],o);for(var h=1;h<Vr.length;h++){var g=Vr[h];g.blockedOn===o&&(g.blockedOn=null)}}for(xn!==null&&en(xn,o),bn!==null&&en(bn,o),rs!==null&&en(rs,o),gs.forEach(c),ua.forEach(c),h=0;h<cn.length;h++)g=cn[h],g.blockedOn===o&&(g.blockedOn=null);for(;0<cn.length&&(h=cn[0],h.blockedOn===null);)Ia(h),h.blockedOn===null&&cn.shift()}var Yr=A.ReactCurrentBatchConfig,zi=!0;function ha(o,c,h,g){var b=Xt,k=Yr.transition;Yr.transition=null;try{Xt=1,_s(o,c,h,g)}finally{Xt=b,Yr.transition=k}}function ti(o,c,h,g){var b=Xt,k=Yr.transition;Yr.transition=null;try{Xt=4,_s(o,c,h,g)}finally{Xt=b,Yr.transition=k}}function _s(o,c,h,g){if(zi){var b=N(o,c,h,g);if(b===null)Fp(o,c,g,V,h),Li(o,g);else if(xo(b,o,c,h,g))g.stopPropagation();else if(Li(o,g),c&4&&-1<vo.indexOf(o)){for(;b!==null;){var k=_u(b);if(k!==null&&Ta(k),k=N(o,c,h,g),k===null&&Fp(o,c,g,V,h),k===b)break;b=k}b!==null&&g.stopPropagation()}else Fp(o,c,g,null,h)}}var V=null;function N(o,c,h,g){if(V=null,o=Ot(g),o=tl(o),o!==null)if(c=Ir(o),c===null)o=null;else if(h=c.tag,h===13){if(o=Rs(c),o!==null)return o;o=null}else if(h===3){if(c.stateNode.current.memoizedState.isDehydrated)return c.tag===3?c.stateNode.containerInfo:null;o=null}else c!==o&&(o=null);return V=o,null}function F(o){switch(o){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(ps()){case ee:return 1;case Ce:return 4;case ze:case Be:return 16;case Je:return 536870912;default:return 16}default:return 16}}var pe=null,he=null,ke=null;function Te(){if(ke)return ke;var o,c=he,h=c.length,g,b="value"in pe?pe.value:pe.textContent,k=b.length;for(o=0;o<h&&c[o]===b[o];o++);var O=h-o;for(g=1;g<=O&&c[h-g]===b[k-g];g++);return ke=b.slice(o,1<g?1-g:void 0)}function ve(o){var c=o.keyCode;return"charCode"in o?(o=o.charCode,o===0&&c===13&&(o=13)):o=c,o===10&&(o=13),32<=o||o===13?o:0}function Ye(){return!0}function tt(){return!1}function D(o){function c(h,g,b,k,O){this._reactName=h,this._targetInst=b,this.type=g,this.nativeEvent=k,this.target=O,this.currentTarget=null;for(var L in o)o.hasOwnProperty(L)&&(h=o[L],this[L]=h?h(k):k[L]);return this.isDefaultPrevented=(k.defaultPrevented!=null?k.defaultPrevented:k.returnValue===!1)?Ye:tt,this.isPropagationStopped=tt,this}return se(c.prototype,{preventDefault:function(){this.defaultPrevented=!0;var h=this.nativeEvent;h&&(h.preventDefault?h.preventDefault():typeof h.returnValue!="unknown"&&(h.returnValue=!1),this.isDefaultPrevented=Ye)},stopPropagation:function(){var h=this.nativeEvent;h&&(h.stopPropagation?h.stopPropagation():typeof h.cancelBubble!="unknown"&&(h.cancelBubble=!0),this.isPropagationStopped=Ye)},persist:function(){},isPersistent:Ye}),c}var q={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(o){return o.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ce=D(q),Ee=se({},q,{view:0,detail:0}),Ue=D(Ee),me,ye,Xe,Ct=se({},Ee,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ss,button:0,buttons:0,relatedTarget:function(o){return o.relatedTarget===void 0?o.fromElement===o.srcElement?o.toElement:o.fromElement:o.relatedTarget},movementX:function(o){return"movementX"in o?o.movementX:(o!==Xe&&(Xe&&o.type==="mousemove"?(me=o.screenX-Xe.screenX,ye=o.screenY-Xe.screenY):ye=me=0,Xe=o),me)},movementY:function(o){return"movementY"in o?o.movementY:ye}}),at=D(Ct),Tt=se({},Ct,{dataTransfer:0}),Wt=D(Tt),qe=se({},Ee,{relatedTarget:0}),er=D(qe),Qt=se({},q,{animationName:0,elapsedTime:0,pseudoElement:0}),vt=D(Qt),Gt=se({},q,{clipboardData:function(o){return"clipboardData"in o?o.clipboardData:window.clipboardData}}),mt=D(Gt),qt=se({},q,{data:0}),Ft=D(qt),Er={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},tn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Jr={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function wi(o){var c=this.nativeEvent;return c.getModifierState?c.getModifierState(o):(o=Jr[o])?!!c[o]:!1}function ss(){return wi}var _p=se({},Ee,{key:function(o){if(o.key){var c=Er[o.key]||o.key;if(c!=="Unidentified")return c}return o.type==="keypress"?(o=ve(o),o===13?"Enter":String.fromCharCode(o)):o.type==="keydown"||o.type==="keyup"?tn[o.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ss,charCode:function(o){return o.type==="keypress"?ve(o):0},keyCode:function(o){return o.type==="keydown"||o.type==="keyup"?o.keyCode:0},which:function(o){return o.type==="keypress"?ve(o):o.type==="keydown"||o.type==="keyup"?o.keyCode:0}}),Cp=D(_p),JT=se({},Ct,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),kw=D(JT),XT=se({},Ee,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ss}),QT=D(XT),ZT=se({},q,{propertyName:0,elapsedTime:0,pseudoElement:0}),eI=D(ZT),tI=se({},Ct,{deltaX:function(o){return"deltaX"in o?o.deltaX:"wheelDeltaX"in o?-o.wheelDeltaX:0},deltaY:function(o){return"deltaY"in o?o.deltaY:"wheelDeltaY"in o?-o.wheelDeltaY:"wheelDelta"in o?-o.wheelDelta:0},deltaZ:0,deltaMode:0}),rI=D(tI),nI=[9,13,27,32],Ep=u&&"CompositionEvent"in window,yu=null;u&&"documentMode"in document&&(yu=document.documentMode);var sI=u&&"TextEvent"in window&&!yu,_w=u&&(!Ep||yu&&8<yu&&11>=yu),Cw=" ",Ew=!1;function Aw(o,c){switch(o){case"keyup":return nI.indexOf(c.keyCode)!==-1;case"keydown":return c.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Pw(o){return o=o.detail,typeof o=="object"&&"data"in o?o.data:null}var Gl=!1;function iI(o,c){switch(o){case"compositionend":return Pw(c);case"keypress":return c.which!==32?null:(Ew=!0,Cw);case"textInput":return o=c.data,o===Cw&&Ew?null:o;default:return null}}function aI(o,c){if(Gl)return o==="compositionend"||!Ep&&Aw(o,c)?(o=Te(),ke=he=pe=null,Gl=!1,o):null;switch(o){case"paste":return null;case"keypress":if(!(c.ctrlKey||c.altKey||c.metaKey)||c.ctrlKey&&c.altKey){if(c.char&&1<c.char.length)return c.char;if(c.which)return String.fromCharCode(c.which)}return null;case"compositionend":return _w&&c.locale!=="ko"?null:c.data;default:return null}}var oI={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Ow(o){var c=o&&o.nodeName&&o.nodeName.toLowerCase();return c==="input"?!!oI[o.type]:c==="textarea"}function Tw(o,c,h,g){gn(g),c=of(c,"onChange"),0<c.length&&(h=new ce("onChange","change",null,h,g),o.push({event:h,listeners:c}))}var vu=null,xu=null;function lI(o){Jw(o,0)}function rf(o){var c=Zl(o);if(M(c))return o}function cI(o,c){if(o==="change")return c}var Iw=!1;if(u){var Ap;if(u){var Pp="oninput"in document;if(!Pp){var Dw=document.createElement("div");Dw.setAttribute("oninput","return;"),Pp=typeof Dw.oninput=="function"}Ap=Pp}else Ap=!1;Iw=Ap&&(!document.documentMode||9<document.documentMode)}function $w(){vu&&(vu.detachEvent("onpropertychange",Rw),xu=vu=null)}function Rw(o){if(o.propertyName==="value"&&rf(xu)){var c=[];Tw(c,xu,o,Ot(o)),zr(lI,c)}}function uI(o,c,h){o==="focusin"?($w(),vu=c,xu=h,vu.attachEvent("onpropertychange",Rw)):o==="focusout"&&$w()}function dI(o){if(o==="selectionchange"||o==="keyup"||o==="keydown")return rf(xu)}function fI(o,c){if(o==="click")return rf(c)}function hI(o,c){if(o==="input"||o==="change")return rf(c)}function mI(o,c){return o===c&&(o!==0||1/o===1/c)||o!==o&&c!==c}var Ui=typeof Object.is=="function"?Object.is:mI;function bu(o,c){if(Ui(o,c))return!0;if(typeof o!="object"||o===null||typeof c!="object"||c===null)return!1;var h=Object.keys(o),g=Object.keys(c);if(h.length!==g.length)return!1;for(g=0;g<h.length;g++){var b=h[g];if(!d.call(c,b)||!Ui(o[b],c[b]))return!1}return!0}function Mw(o){for(;o&&o.firstChild;)o=o.firstChild;return o}function Fw(o,c){var h=Mw(o);o=0;for(var g;h;){if(h.nodeType===3){if(g=o+h.textContent.length,o<=c&&g>=c)return{node:h,offset:c-o};o=g}e:{for(;h;){if(h.nextSibling){h=h.nextSibling;break e}h=h.parentNode}h=void 0}h=Mw(h)}}function Lw(o,c){return o&&c?o===c?!0:o&&o.nodeType===3?!1:c&&c.nodeType===3?Lw(o,c.parentNode):"contains"in o?o.contains(c):o.compareDocumentPosition?!!(o.compareDocumentPosition(c)&16):!1:!1}function zw(){for(var o=window,c=De();c instanceof o.HTMLIFrameElement;){try{var h=typeof c.contentWindow.location.href=="string"}catch{h=!1}if(h)o=c.contentWindow;else break;c=De(o.document)}return c}function Op(o){var c=o&&o.nodeName&&o.nodeName.toLowerCase();return c&&(c==="input"&&(o.type==="text"||o.type==="search"||o.type==="tel"||o.type==="url"||o.type==="password")||c==="textarea"||o.contentEditable==="true")}function pI(o){var c=zw(),h=o.focusedElem,g=o.selectionRange;if(c!==h&&h&&h.ownerDocument&&Lw(h.ownerDocument.documentElement,h)){if(g!==null&&Op(h)){if(c=g.start,o=g.end,o===void 0&&(o=c),"selectionStart"in h)h.selectionStart=c,h.selectionEnd=Math.min(o,h.value.length);else if(o=(c=h.ownerDocument||document)&&c.defaultView||window,o.getSelection){o=o.getSelection();var b=h.textContent.length,k=Math.min(g.start,b);g=g.end===void 0?k:Math.min(g.end,b),!o.extend&&k>g&&(b=g,g=k,k=b),b=Fw(h,k);var O=Fw(h,g);b&&O&&(o.rangeCount!==1||o.anchorNode!==b.node||o.anchorOffset!==b.offset||o.focusNode!==O.node||o.focusOffset!==O.offset)&&(c=c.createRange(),c.setStart(b.node,b.offset),o.removeAllRanges(),k>g?(o.addRange(c),o.extend(O.node,O.offset)):(c.setEnd(O.node,O.offset),o.addRange(c)))}}for(c=[],o=h;o=o.parentNode;)o.nodeType===1&&c.push({element:o,left:o.scrollLeft,top:o.scrollTop});for(typeof h.focus=="function"&&h.focus(),h=0;h<c.length;h++)o=c[h],o.element.scrollLeft=o.left,o.element.scrollTop=o.top}}var gI=u&&"documentMode"in document&&11>=document.documentMode,Yl=null,Tp=null,wu=null,Ip=!1;function Uw(o,c,h){var g=h.window===h?h.document:h.nodeType===9?h:h.ownerDocument;Ip||Yl==null||Yl!==De(g)||(g=Yl,"selectionStart"in g&&Op(g)?g={start:g.selectionStart,end:g.selectionEnd}:(g=(g.ownerDocument&&g.ownerDocument.defaultView||window).getSelection(),g={anchorNode:g.anchorNode,anchorOffset:g.anchorOffset,focusNode:g.focusNode,focusOffset:g.focusOffset}),wu&&bu(wu,g)||(wu=g,g=of(Tp,"onSelect"),0<g.length&&(c=new ce("onSelect","select",null,c,h),o.push({event:c,listeners:g}),c.target=Yl)))}function nf(o,c){var h={};return h[o.toLowerCase()]=c.toLowerCase(),h["Webkit"+o]="webkit"+c,h["Moz"+o]="moz"+c,h}var Jl={animationend:nf("Animation","AnimationEnd"),animationiteration:nf("Animation","AnimationIteration"),animationstart:nf("Animation","AnimationStart"),transitionend:nf("Transition","TransitionEnd")},Dp={},Bw={};u&&(Bw=document.createElement("div").style,"AnimationEvent"in window||(delete Jl.animationend.animation,delete Jl.animationiteration.animation,delete Jl.animationstart.animation),"TransitionEvent"in window||delete Jl.transitionend.transition);function sf(o){if(Dp[o])return Dp[o];if(!Jl[o])return o;var c=Jl[o],h;for(h in c)if(c.hasOwnProperty(h)&&h in Bw)return Dp[o]=c[h];return o}var Ww=sf("animationend"),Vw=sf("animationiteration"),qw=sf("animationstart"),Hw=sf("transitionend"),Kw=new Map,Gw="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function bo(o,c){Kw.set(o,c),a(c,[o])}for(var $p=0;$p<Gw.length;$p++){var Rp=Gw[$p],yI=Rp.toLowerCase(),vI=Rp[0].toUpperCase()+Rp.slice(1);bo(yI,"on"+vI)}bo(Ww,"onAnimationEnd"),bo(Vw,"onAnimationIteration"),bo(qw,"onAnimationStart"),bo("dblclick","onDoubleClick"),bo("focusin","onFocus"),bo("focusout","onBlur"),bo(Hw,"onTransitionEnd"),l("onMouseEnter",["mouseout","mouseover"]),l("onMouseLeave",["mouseout","mouseover"]),l("onPointerEnter",["pointerout","pointerover"]),l("onPointerLeave",["pointerout","pointerover"]),a("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),a("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),a("onBeforeInput",["compositionend","keypress","textInput","paste"]),a("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),a("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),a("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ju="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),xI=new Set("cancel close invalid load scroll toggle".split(" ").concat(ju));function Yw(o,c,h){var g=o.type||"unknown-event";o.currentTarget=h,Ns(g,c,void 0,o),o.currentTarget=null}function Jw(o,c){c=(c&4)!==0;for(var h=0;h<o.length;h++){var g=o[h],b=g.event;g=g.listeners;e:{var k=void 0;if(c)for(var O=g.length-1;0<=O;O--){var L=g[O],Y=L.instance,ge=L.currentTarget;if(L=L.listener,Y!==k&&b.isPropagationStopped())break e;Yw(b,L,ge),k=Y}else for(O=0;O<g.length;O++){if(L=g[O],Y=L.instance,ge=L.currentTarget,L=L.listener,Y!==k&&b.isPropagationStopped())break e;Yw(b,L,ge),k=Y}}}if(pr)throw o=Zr,pr=!1,Zr=null,o}function $r(o,c){var h=c[Vp];h===void 0&&(h=c[Vp]=new Set);var g=o+"__bubble";h.has(g)||(Xw(c,o,2,!1),h.add(g))}function Mp(o,c,h){var g=0;c&&(g|=4),Xw(h,o,g,c)}var af="_reactListening"+Math.random().toString(36).slice(2);function Su(o){if(!o[af]){o[af]=!0,n.forEach(function(h){h!=="selectionchange"&&(xI.has(h)||Mp(h,!1,o),Mp(h,!0,o))});var c=o.nodeType===9?o:o.ownerDocument;c===null||c[af]||(c[af]=!0,Mp("selectionchange",!1,c))}}function Xw(o,c,h,g){switch(F(c)){case 1:var b=ha;break;case 4:b=ti;break;default:b=_s}h=b.bind(null,c,h,o),b=void 0,!Gr||c!=="touchstart"&&c!=="touchmove"&&c!=="wheel"||(b=!0),g?b!==void 0?o.addEventListener(c,h,{capture:!0,passive:b}):o.addEventListener(c,h,!0):b!==void 0?o.addEventListener(c,h,{passive:b}):o.addEventListener(c,h,!1)}function Fp(o,c,h,g,b){var k=g;if((c&1)===0&&(c&2)===0&&g!==null)e:for(;;){if(g===null)return;var O=g.tag;if(O===3||O===4){var L=g.stateNode.containerInfo;if(L===b||L.nodeType===8&&L.parentNode===b)break;if(O===4)for(O=g.return;O!==null;){var Y=O.tag;if((Y===3||Y===4)&&(Y=O.stateNode.containerInfo,Y===b||Y.nodeType===8&&Y.parentNode===b))return;O=O.return}for(;L!==null;){if(O=tl(L),O===null)return;if(Y=O.tag,Y===5||Y===6){g=k=O;continue e}L=L.parentNode}}g=g.return}zr(function(){var ge=k,Re=Ot(h),Le=[];e:{var $e=Kw.get(o);if($e!==void 0){var Qe=ce,it=o;switch(o){case"keypress":if(ve(h)===0)break e;case"keydown":case"keyup":Qe=Cp;break;case"focusin":it="focus",Qe=er;break;case"focusout":it="blur",Qe=er;break;case"beforeblur":case"afterblur":Qe=er;break;case"click":if(h.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Qe=at;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Qe=Wt;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Qe=QT;break;case Ww:case Vw:case qw:Qe=vt;break;case Hw:Qe=eI;break;case"scroll":Qe=Ue;break;case"wheel":Qe=rI;break;case"copy":case"cut":case"paste":Qe=mt;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Qe=kw}var ot=(c&4)!==0,un=!ot&&o==="scroll",oe=ot?$e!==null?$e+"Capture":null:$e;ot=[];for(var Q=ge,ue;Q!==null;){ue=Q;var Ve=ue.stateNode;if(ue.tag===5&&Ve!==null&&(ue=Ve,oe!==null&&(Ve=lr(Q,oe),Ve!=null&&ot.push(Nu(Q,Ve,ue)))),un)break;Q=Q.return}0<ot.length&&($e=new Qe($e,it,null,h,Re),Le.push({event:$e,listeners:ot}))}}if((c&7)===0){e:{if($e=o==="mouseover"||o==="pointerover",Qe=o==="mouseout"||o==="pointerout",$e&&h!==Ze&&(it=h.relatedTarget||h.fromElement)&&(tl(it)||it[$a]))break e;if((Qe||$e)&&($e=Re.window===Re?Re:($e=Re.ownerDocument)?$e.defaultView||$e.parentWindow:window,Qe?(it=h.relatedTarget||h.toElement,Qe=ge,it=it?tl(it):null,it!==null&&(un=Ir(it),it!==un||it.tag!==5&&it.tag!==6)&&(it=null)):(Qe=null,it=ge),Qe!==it)){if(ot=at,Ve="onMouseLeave",oe="onMouseEnter",Q="mouse",(o==="pointerout"||o==="pointerover")&&(ot=kw,Ve="onPointerLeave",oe="onPointerEnter",Q="pointer"),un=Qe==null?$e:Zl(Qe),ue=it==null?$e:Zl(it),$e=new ot(Ve,Q+"leave",Qe,h,Re),$e.target=un,$e.relatedTarget=ue,Ve=null,tl(Re)===ge&&(ot=new ot(oe,Q+"enter",it,h,Re),ot.target=ue,ot.relatedTarget=un,Ve=ot),un=Ve,Qe&&it)t:{for(ot=Qe,oe=it,Q=0,ue=ot;ue;ue=Xl(ue))Q++;for(ue=0,Ve=oe;Ve;Ve=Xl(Ve))ue++;for(;0<Q-ue;)ot=Xl(ot),Q--;for(;0<ue-Q;)oe=Xl(oe),ue--;for(;Q--;){if(ot===oe||oe!==null&&ot===oe.alternate)break t;ot=Xl(ot),oe=Xl(oe)}ot=null}else ot=null;Qe!==null&&Qw(Le,$e,Qe,ot,!1),it!==null&&un!==null&&Qw(Le,un,it,ot,!0)}}e:{if($e=ge?Zl(ge):window,Qe=$e.nodeName&&$e.nodeName.toLowerCase(),Qe==="select"||Qe==="input"&&$e.type==="file")var ut=cI;else if(Ow($e))if(Iw)ut=hI;else{ut=dI;var bt=uI}else(Qe=$e.nodeName)&&Qe.toLowerCase()==="input"&&($e.type==="checkbox"||$e.type==="radio")&&(ut=fI);if(ut&&(ut=ut(o,ge))){Tw(Le,ut,h,Re);break e}bt&&bt(o,$e,ge),o==="focusout"&&(bt=$e._wrapperState)&&bt.controlled&&$e.type==="number"&&Yt($e,"number",$e.value)}switch(bt=ge?Zl(ge):window,o){case"focusin":(Ow(bt)||bt.contentEditable==="true")&&(Yl=bt,Tp=ge,wu=null);break;case"focusout":wu=Tp=Yl=null;break;case"mousedown":Ip=!0;break;case"contextmenu":case"mouseup":case"dragend":Ip=!1,Uw(Le,h,Re);break;case"selectionchange":if(gI)break;case"keydown":case"keyup":Uw(Le,h,Re)}var wt;if(Ep)e:{switch(o){case"compositionstart":var At="onCompositionStart";break e;case"compositionend":At="onCompositionEnd";break e;case"compositionupdate":At="onCompositionUpdate";break e}At=void 0}else Gl?Aw(o,h)&&(At="onCompositionEnd"):o==="keydown"&&h.keyCode===229&&(At="onCompositionStart");At&&(_w&&h.locale!=="ko"&&(Gl||At!=="onCompositionStart"?At==="onCompositionEnd"&&Gl&&(wt=Te()):(pe=Re,he="value"in pe?pe.value:pe.textContent,Gl=!0)),bt=of(ge,At),0<bt.length&&(At=new Ft(At,o,null,h,Re),Le.push({event:At,listeners:bt}),wt?At.data=wt:(wt=Pw(h),wt!==null&&(At.data=wt)))),(wt=sI?iI(o,h):aI(o,h))&&(ge=of(ge,"onBeforeInput"),0<ge.length&&(Re=new Ft("onBeforeInput","beforeinput",null,h,Re),Le.push({event:Re,listeners:ge}),Re.data=wt))}Jw(Le,c)})}function Nu(o,c,h){return{instance:o,listener:c,currentTarget:h}}function of(o,c){for(var h=c+"Capture",g=[];o!==null;){var b=o,k=b.stateNode;b.tag===5&&k!==null&&(b=k,k=lr(o,h),k!=null&&g.unshift(Nu(o,k,b)),k=lr(o,c),k!=null&&g.push(Nu(o,k,b))),o=o.return}return g}function Xl(o){if(o===null)return null;do o=o.return;while(o&&o.tag!==5);return o||null}function Qw(o,c,h,g,b){for(var k=c._reactName,O=[];h!==null&&h!==g;){var L=h,Y=L.alternate,ge=L.stateNode;if(Y!==null&&Y===g)break;L.tag===5&&ge!==null&&(L=ge,b?(Y=lr(h,k),Y!=null&&O.unshift(Nu(h,Y,L))):b||(Y=lr(h,k),Y!=null&&O.push(Nu(h,Y,L)))),h=h.return}O.length!==0&&o.push({event:c,listeners:O})}var bI=/\r\n?/g,wI=/\u0000|\uFFFD/g;function Zw(o){return(typeof o=="string"?o:""+o).replace(bI,`
`).replace(wI,"")}function lf(o,c,h){if(c=Zw(c),Zw(o)!==c&&h)throw Error(r(425))}function cf(){}var Lp=null,zp=null;function Up(o,c){return o==="textarea"||o==="noscript"||typeof c.children=="string"||typeof c.children=="number"||typeof c.dangerouslySetInnerHTML=="object"&&c.dangerouslySetInnerHTML!==null&&c.dangerouslySetInnerHTML.__html!=null}var Bp=typeof setTimeout=="function"?setTimeout:void 0,jI=typeof clearTimeout=="function"?clearTimeout:void 0,e1=typeof Promise=="function"?Promise:void 0,SI=typeof queueMicrotask=="function"?queueMicrotask:typeof e1<"u"?function(o){return e1.resolve(null).then(o).catch(NI)}:Bp;function NI(o){setTimeout(function(){throw o})}function Wp(o,c){var h=c,g=0;do{var b=h.nextSibling;if(o.removeChild(h),b&&b.nodeType===8)if(h=b.data,h==="/$"){if(g===0){o.removeChild(b),ns(c);return}g--}else h!=="$"&&h!=="$?"&&h!=="$!"||g++;h=b}while(h);ns(c)}function wo(o){for(;o!=null;o=o.nextSibling){var c=o.nodeType;if(c===1||c===3)break;if(c===8){if(c=o.data,c==="$"||c==="$!"||c==="$?")break;if(c==="/$")return null}}return o}function t1(o){o=o.previousSibling;for(var c=0;o;){if(o.nodeType===8){var h=o.data;if(h==="$"||h==="$!"||h==="$?"){if(c===0)return o;c--}else h==="/$"&&c++}o=o.previousSibling}return null}var Ql=Math.random().toString(36).slice(2),ma="__reactFiber$"+Ql,ku="__reactProps$"+Ql,$a="__reactContainer$"+Ql,Vp="__reactEvents$"+Ql,kI="__reactListeners$"+Ql,_I="__reactHandles$"+Ql;function tl(o){var c=o[ma];if(c)return c;for(var h=o.parentNode;h;){if(c=h[$a]||h[ma]){if(h=c.alternate,c.child!==null||h!==null&&h.child!==null)for(o=t1(o);o!==null;){if(h=o[ma])return h;o=t1(o)}return c}o=h,h=o.parentNode}return null}function _u(o){return o=o[ma]||o[$a],!o||o.tag!==5&&o.tag!==6&&o.tag!==13&&o.tag!==3?null:o}function Zl(o){if(o.tag===5||o.tag===6)return o.stateNode;throw Error(r(33))}function uf(o){return o[ku]||null}var qp=[],ec=-1;function jo(o){return{current:o}}function Rr(o){0>ec||(o.current=qp[ec],qp[ec]=null,ec--)}function Ar(o,c){ec++,qp[ec]=o.current,o.current=c}var So={},ys=jo(So),Ls=jo(!1),rl=So;function tc(o,c){var h=o.type.contextTypes;if(!h)return So;var g=o.stateNode;if(g&&g.__reactInternalMemoizedUnmaskedChildContext===c)return g.__reactInternalMemoizedMaskedChildContext;var b={},k;for(k in h)b[k]=c[k];return g&&(o=o.stateNode,o.__reactInternalMemoizedUnmaskedChildContext=c,o.__reactInternalMemoizedMaskedChildContext=b),b}function zs(o){return o=o.childContextTypes,o!=null}function df(){Rr(Ls),Rr(ys)}function r1(o,c,h){if(ys.current!==So)throw Error(r(168));Ar(ys,c),Ar(Ls,h)}function n1(o,c,h){var g=o.stateNode;if(c=c.childContextTypes,typeof g.getChildContext!="function")return h;g=g.getChildContext();for(var b in g)if(!(b in c))throw Error(r(108,Ne(o)||"Unknown",b));return se({},h,g)}function ff(o){return o=(o=o.stateNode)&&o.__reactInternalMemoizedMergedChildContext||So,rl=ys.current,Ar(ys,o),Ar(Ls,Ls.current),!0}function s1(o,c,h){var g=o.stateNode;if(!g)throw Error(r(169));h?(o=n1(o,c,rl),g.__reactInternalMemoizedMergedChildContext=o,Rr(Ls),Rr(ys),Ar(ys,o)):Rr(Ls),Ar(Ls,h)}var Ra=null,hf=!1,Hp=!1;function i1(o){Ra===null?Ra=[o]:Ra.push(o)}function CI(o){hf=!0,i1(o)}function No(){if(!Hp&&Ra!==null){Hp=!0;var o=0,c=Xt;try{var h=Ra;for(Xt=1;o<h.length;o++){var g=h[o];do g=g(!0);while(g!==null)}Ra=null,hf=!1}catch(b){throw Ra!==null&&(Ra=Ra.slice(o+1)),Br(ee,No),b}finally{Xt=c,Hp=!1}}return null}var rc=[],nc=0,mf=null,pf=0,ji=[],Si=0,nl=null,Ma=1,Fa="";function sl(o,c){rc[nc++]=pf,rc[nc++]=mf,mf=o,pf=c}function a1(o,c,h){ji[Si++]=Ma,ji[Si++]=Fa,ji[Si++]=nl,nl=o;var g=Ma;o=Fa;var b=32-St(g)-1;g&=~(1<<b),h+=1;var k=32-St(c)+b;if(30<k){var O=b-b%5;k=(g&(1<<O)-1).toString(32),g>>=O,b-=O,Ma=1<<32-St(c)+b|h<<b|g,Fa=k+o}else Ma=1<<k|h<<b|g,Fa=o}function Kp(o){o.return!==null&&(sl(o,1),a1(o,1,0))}function Gp(o){for(;o===mf;)mf=rc[--nc],rc[nc]=null,pf=rc[--nc],rc[nc]=null;for(;o===nl;)nl=ji[--Si],ji[Si]=null,Fa=ji[--Si],ji[Si]=null,Ma=ji[--Si],ji[Si]=null}var ri=null,ni=null,qr=!1,Bi=null;function o1(o,c){var h=Ci(5,null,null,0);h.elementType="DELETED",h.stateNode=c,h.return=o,c=o.deletions,c===null?(o.deletions=[h],o.flags|=16):c.push(h)}function l1(o,c){switch(o.tag){case 5:var h=o.type;return c=c.nodeType!==1||h.toLowerCase()!==c.nodeName.toLowerCase()?null:c,c!==null?(o.stateNode=c,ri=o,ni=wo(c.firstChild),!0):!1;case 6:return c=o.pendingProps===""||c.nodeType!==3?null:c,c!==null?(o.stateNode=c,ri=o,ni=null,!0):!1;case 13:return c=c.nodeType!==8?null:c,c!==null?(h=nl!==null?{id:Ma,overflow:Fa}:null,o.memoizedState={dehydrated:c,treeContext:h,retryLane:1073741824},h=Ci(18,null,null,0),h.stateNode=c,h.return=o,o.child=h,ri=o,ni=null,!0):!1;default:return!1}}function Yp(o){return(o.mode&1)!==0&&(o.flags&128)===0}function Jp(o){if(qr){var c=ni;if(c){var h=c;if(!l1(o,c)){if(Yp(o))throw Error(r(418));c=wo(h.nextSibling);var g=ri;c&&l1(o,c)?o1(g,h):(o.flags=o.flags&-4097|2,qr=!1,ri=o)}}else{if(Yp(o))throw Error(r(418));o.flags=o.flags&-4097|2,qr=!1,ri=o}}}function c1(o){for(o=o.return;o!==null&&o.tag!==5&&o.tag!==3&&o.tag!==13;)o=o.return;ri=o}function gf(o){if(o!==ri)return!1;if(!qr)return c1(o),qr=!0,!1;var c;if((c=o.tag!==3)&&!(c=o.tag!==5)&&(c=o.type,c=c!=="head"&&c!=="body"&&!Up(o.type,o.memoizedProps)),c&&(c=ni)){if(Yp(o))throw u1(),Error(r(418));for(;c;)o1(o,c),c=wo(c.nextSibling)}if(c1(o),o.tag===13){if(o=o.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(r(317));e:{for(o=o.nextSibling,c=0;o;){if(o.nodeType===8){var h=o.data;if(h==="/$"){if(c===0){ni=wo(o.nextSibling);break e}c--}else h!=="$"&&h!=="$!"&&h!=="$?"||c++}o=o.nextSibling}ni=null}}else ni=ri?wo(o.stateNode.nextSibling):null;return!0}function u1(){for(var o=ni;o;)o=wo(o.nextSibling)}function sc(){ni=ri=null,qr=!1}function Xp(o){Bi===null?Bi=[o]:Bi.push(o)}var EI=A.ReactCurrentBatchConfig;function Cu(o,c,h){if(o=h.ref,o!==null&&typeof o!="function"&&typeof o!="object"){if(h._owner){if(h=h._owner,h){if(h.tag!==1)throw Error(r(309));var g=h.stateNode}if(!g)throw Error(r(147,o));var b=g,k=""+o;return c!==null&&c.ref!==null&&typeof c.ref=="function"&&c.ref._stringRef===k?c.ref:(c=function(O){var L=b.refs;O===null?delete L[k]:L[k]=O},c._stringRef=k,c)}if(typeof o!="string")throw Error(r(284));if(!h._owner)throw Error(r(290,o))}return o}function yf(o,c){throw o=Object.prototype.toString.call(c),Error(r(31,o==="[object Object]"?"object with keys {"+Object.keys(c).join(", ")+"}":o))}function d1(o){var c=o._init;return c(o._payload)}function f1(o){function c(oe,Q){if(o){var ue=oe.deletions;ue===null?(oe.deletions=[Q],oe.flags|=16):ue.push(Q)}}function h(oe,Q){if(!o)return null;for(;Q!==null;)c(oe,Q),Q=Q.sibling;return null}function g(oe,Q){for(oe=new Map;Q!==null;)Q.key!==null?oe.set(Q.key,Q):oe.set(Q.index,Q),Q=Q.sibling;return oe}function b(oe,Q){return oe=To(oe,Q),oe.index=0,oe.sibling=null,oe}function k(oe,Q,ue){return oe.index=ue,o?(ue=oe.alternate,ue!==null?(ue=ue.index,ue<Q?(oe.flags|=2,Q):ue):(oe.flags|=2,Q)):(oe.flags|=1048576,Q)}function O(oe){return o&&oe.alternate===null&&(oe.flags|=2),oe}function L(oe,Q,ue,Ve){return Q===null||Q.tag!==6?(Q=Bg(ue,oe.mode,Ve),Q.return=oe,Q):(Q=b(Q,ue),Q.return=oe,Q)}function Y(oe,Q,ue,Ve){var ut=ue.type;return ut===z?Re(oe,Q,ue.props.children,Ve,ue.key):Q!==null&&(Q.elementType===ut||typeof ut=="object"&&ut!==null&&ut.$$typeof===G&&d1(ut)===Q.type)?(Ve=b(Q,ue.props),Ve.ref=Cu(oe,Q,ue),Ve.return=oe,Ve):(Ve=Uf(ue.type,ue.key,ue.props,null,oe.mode,Ve),Ve.ref=Cu(oe,Q,ue),Ve.return=oe,Ve)}function ge(oe,Q,ue,Ve){return Q===null||Q.tag!==4||Q.stateNode.containerInfo!==ue.containerInfo||Q.stateNode.implementation!==ue.implementation?(Q=Wg(ue,oe.mode,Ve),Q.return=oe,Q):(Q=b(Q,ue.children||[]),Q.return=oe,Q)}function Re(oe,Q,ue,Ve,ut){return Q===null||Q.tag!==7?(Q=fl(ue,oe.mode,Ve,ut),Q.return=oe,Q):(Q=b(Q,ue),Q.return=oe,Q)}function Le(oe,Q,ue){if(typeof Q=="string"&&Q!==""||typeof Q=="number")return Q=Bg(""+Q,oe.mode,ue),Q.return=oe,Q;if(typeof Q=="object"&&Q!==null){switch(Q.$$typeof){case T:return ue=Uf(Q.type,Q.key,Q.props,null,oe.mode,ue),ue.ref=Cu(oe,null,Q),ue.return=oe,ue;case P:return Q=Wg(Q,oe.mode,ue),Q.return=oe,Q;case G:var Ve=Q._init;return Le(oe,Ve(Q._payload),ue)}if(R(Q)||W(Q))return Q=fl(Q,oe.mode,ue,null),Q.return=oe,Q;yf(oe,Q)}return null}function $e(oe,Q,ue,Ve){var ut=Q!==null?Q.key:null;if(typeof ue=="string"&&ue!==""||typeof ue=="number")return ut!==null?null:L(oe,Q,""+ue,Ve);if(typeof ue=="object"&&ue!==null){switch(ue.$$typeof){case T:return ue.key===ut?Y(oe,Q,ue,Ve):null;case P:return ue.key===ut?ge(oe,Q,ue,Ve):null;case G:return ut=ue._init,$e(oe,Q,ut(ue._payload),Ve)}if(R(ue)||W(ue))return ut!==null?null:Re(oe,Q,ue,Ve,null);yf(oe,ue)}return null}function Qe(oe,Q,ue,Ve,ut){if(typeof Ve=="string"&&Ve!==""||typeof Ve=="number")return oe=oe.get(ue)||null,L(Q,oe,""+Ve,ut);if(typeof Ve=="object"&&Ve!==null){switch(Ve.$$typeof){case T:return oe=oe.get(Ve.key===null?ue:Ve.key)||null,Y(Q,oe,Ve,ut);case P:return oe=oe.get(Ve.key===null?ue:Ve.key)||null,ge(Q,oe,Ve,ut);case G:var bt=Ve._init;return Qe(oe,Q,ue,bt(Ve._payload),ut)}if(R(Ve)||W(Ve))return oe=oe.get(ue)||null,Re(Q,oe,Ve,ut,null);yf(Q,Ve)}return null}function it(oe,Q,ue,Ve){for(var ut=null,bt=null,wt=Q,At=Q=0,Hn=null;wt!==null&&At<ue.length;At++){wt.index>At?(Hn=wt,wt=null):Hn=wt.sibling;var cr=$e(oe,wt,ue[At],Ve);if(cr===null){wt===null&&(wt=Hn);break}o&&wt&&cr.alternate===null&&c(oe,wt),Q=k(cr,Q,At),bt===null?ut=cr:bt.sibling=cr,bt=cr,wt=Hn}if(At===ue.length)return h(oe,wt),qr&&sl(oe,At),ut;if(wt===null){for(;At<ue.length;At++)wt=Le(oe,ue[At],Ve),wt!==null&&(Q=k(wt,Q,At),bt===null?ut=wt:bt.sibling=wt,bt=wt);return qr&&sl(oe,At),ut}for(wt=g(oe,wt);At<ue.length;At++)Hn=Qe(wt,oe,At,ue[At],Ve),Hn!==null&&(o&&Hn.alternate!==null&&wt.delete(Hn.key===null?At:Hn.key),Q=k(Hn,Q,At),bt===null?ut=Hn:bt.sibling=Hn,bt=Hn);return o&&wt.forEach(function(Io){return c(oe,Io)}),qr&&sl(oe,At),ut}function ot(oe,Q,ue,Ve){var ut=W(ue);if(typeof ut!="function")throw Error(r(150));if(ue=ut.call(ue),ue==null)throw Error(r(151));for(var bt=ut=null,wt=Q,At=Q=0,Hn=null,cr=ue.next();wt!==null&&!cr.done;At++,cr=ue.next()){wt.index>At?(Hn=wt,wt=null):Hn=wt.sibling;var Io=$e(oe,wt,cr.value,Ve);if(Io===null){wt===null&&(wt=Hn);break}o&&wt&&Io.alternate===null&&c(oe,wt),Q=k(Io,Q,At),bt===null?ut=Io:bt.sibling=Io,bt=Io,wt=Hn}if(cr.done)return h(oe,wt),qr&&sl(oe,At),ut;if(wt===null){for(;!cr.done;At++,cr=ue.next())cr=Le(oe,cr.value,Ve),cr!==null&&(Q=k(cr,Q,At),bt===null?ut=cr:bt.sibling=cr,bt=cr);return qr&&sl(oe,At),ut}for(wt=g(oe,wt);!cr.done;At++,cr=ue.next())cr=Qe(wt,oe,At,cr.value,Ve),cr!==null&&(o&&cr.alternate!==null&&wt.delete(cr.key===null?At:cr.key),Q=k(cr,Q,At),bt===null?ut=cr:bt.sibling=cr,bt=cr);return o&&wt.forEach(function(oD){return c(oe,oD)}),qr&&sl(oe,At),ut}function un(oe,Q,ue,Ve){if(typeof ue=="object"&&ue!==null&&ue.type===z&&ue.key===null&&(ue=ue.props.children),typeof ue=="object"&&ue!==null){switch(ue.$$typeof){case T:e:{for(var ut=ue.key,bt=Q;bt!==null;){if(bt.key===ut){if(ut=ue.type,ut===z){if(bt.tag===7){h(oe,bt.sibling),Q=b(bt,ue.props.children),Q.return=oe,oe=Q;break e}}else if(bt.elementType===ut||typeof ut=="object"&&ut!==null&&ut.$$typeof===G&&d1(ut)===bt.type){h(oe,bt.sibling),Q=b(bt,ue.props),Q.ref=Cu(oe,bt,ue),Q.return=oe,oe=Q;break e}h(oe,bt);break}else c(oe,bt);bt=bt.sibling}ue.type===z?(Q=fl(ue.props.children,oe.mode,Ve,ue.key),Q.return=oe,oe=Q):(Ve=Uf(ue.type,ue.key,ue.props,null,oe.mode,Ve),Ve.ref=Cu(oe,Q,ue),Ve.return=oe,oe=Ve)}return O(oe);case P:e:{for(bt=ue.key;Q!==null;){if(Q.key===bt)if(Q.tag===4&&Q.stateNode.containerInfo===ue.containerInfo&&Q.stateNode.implementation===ue.implementation){h(oe,Q.sibling),Q=b(Q,ue.children||[]),Q.return=oe,oe=Q;break e}else{h(oe,Q);break}else c(oe,Q);Q=Q.sibling}Q=Wg(ue,oe.mode,Ve),Q.return=oe,oe=Q}return O(oe);case G:return bt=ue._init,un(oe,Q,bt(ue._payload),Ve)}if(R(ue))return it(oe,Q,ue,Ve);if(W(ue))return ot(oe,Q,ue,Ve);yf(oe,ue)}return typeof ue=="string"&&ue!==""||typeof ue=="number"?(ue=""+ue,Q!==null&&Q.tag===6?(h(oe,Q.sibling),Q=b(Q,ue),Q.return=oe,oe=Q):(h(oe,Q),Q=Bg(ue,oe.mode,Ve),Q.return=oe,oe=Q),O(oe)):h(oe,Q)}return un}var ic=f1(!0),h1=f1(!1),vf=jo(null),xf=null,ac=null,Qp=null;function Zp(){Qp=ac=xf=null}function eg(o){var c=vf.current;Rr(vf),o._currentValue=c}function tg(o,c,h){for(;o!==null;){var g=o.alternate;if((o.childLanes&c)!==c?(o.childLanes|=c,g!==null&&(g.childLanes|=c)):g!==null&&(g.childLanes&c)!==c&&(g.childLanes|=c),o===h)break;o=o.return}}function oc(o,c){xf=o,Qp=ac=null,o=o.dependencies,o!==null&&o.firstContext!==null&&((o.lanes&c)!==0&&(Us=!0),o.firstContext=null)}function Ni(o){var c=o._currentValue;if(Qp!==o)if(o={context:o,memoizedValue:c,next:null},ac===null){if(xf===null)throw Error(r(308));ac=o,xf.dependencies={lanes:0,firstContext:o}}else ac=ac.next=o;return c}var il=null;function rg(o){il===null?il=[o]:il.push(o)}function m1(o,c,h,g){var b=c.interleaved;return b===null?(h.next=h,rg(c)):(h.next=b.next,b.next=h),c.interleaved=h,La(o,g)}function La(o,c){o.lanes|=c;var h=o.alternate;for(h!==null&&(h.lanes|=c),h=o,o=o.return;o!==null;)o.childLanes|=c,h=o.alternate,h!==null&&(h.childLanes|=c),h=o,o=o.return;return h.tag===3?h.stateNode:null}var ko=!1;function ng(o){o.updateQueue={baseState:o.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function p1(o,c){o=o.updateQueue,c.updateQueue===o&&(c.updateQueue={baseState:o.baseState,firstBaseUpdate:o.firstBaseUpdate,lastBaseUpdate:o.lastBaseUpdate,shared:o.shared,effects:o.effects})}function za(o,c){return{eventTime:o,lane:c,tag:0,payload:null,callback:null,next:null}}function _o(o,c,h){var g=o.updateQueue;if(g===null)return null;if(g=g.shared,(ir&2)!==0){var b=g.pending;return b===null?c.next=c:(c.next=b.next,b.next=c),g.pending=c,La(o,h)}return b=g.interleaved,b===null?(c.next=c,rg(g)):(c.next=b.next,b.next=c),g.interleaved=c,La(o,h)}function bf(o,c,h){if(c=c.updateQueue,c!==null&&(c=c.shared,(h&4194240)!==0)){var g=c.lanes;g&=o.pendingLanes,h|=g,c.lanes=h,ln(o,h)}}function g1(o,c){var h=o.updateQueue,g=o.alternate;if(g!==null&&(g=g.updateQueue,h===g)){var b=null,k=null;if(h=h.firstBaseUpdate,h!==null){do{var O={eventTime:h.eventTime,lane:h.lane,tag:h.tag,payload:h.payload,callback:h.callback,next:null};k===null?b=k=O:k=k.next=O,h=h.next}while(h!==null);k===null?b=k=c:k=k.next=c}else b=k=c;h={baseState:g.baseState,firstBaseUpdate:b,lastBaseUpdate:k,shared:g.shared,effects:g.effects},o.updateQueue=h;return}o=h.lastBaseUpdate,o===null?h.firstBaseUpdate=c:o.next=c,h.lastBaseUpdate=c}function wf(o,c,h,g){var b=o.updateQueue;ko=!1;var k=b.firstBaseUpdate,O=b.lastBaseUpdate,L=b.shared.pending;if(L!==null){b.shared.pending=null;var Y=L,ge=Y.next;Y.next=null,O===null?k=ge:O.next=ge,O=Y;var Re=o.alternate;Re!==null&&(Re=Re.updateQueue,L=Re.lastBaseUpdate,L!==O&&(L===null?Re.firstBaseUpdate=ge:L.next=ge,Re.lastBaseUpdate=Y))}if(k!==null){var Le=b.baseState;O=0,Re=ge=Y=null,L=k;do{var $e=L.lane,Qe=L.eventTime;if((g&$e)===$e){Re!==null&&(Re=Re.next={eventTime:Qe,lane:0,tag:L.tag,payload:L.payload,callback:L.callback,next:null});e:{var it=o,ot=L;switch($e=c,Qe=h,ot.tag){case 1:if(it=ot.payload,typeof it=="function"){Le=it.call(Qe,Le,$e);break e}Le=it;break e;case 3:it.flags=it.flags&-65537|128;case 0:if(it=ot.payload,$e=typeof it=="function"?it.call(Qe,Le,$e):it,$e==null)break e;Le=se({},Le,$e);break e;case 2:ko=!0}}L.callback!==null&&L.lane!==0&&(o.flags|=64,$e=b.effects,$e===null?b.effects=[L]:$e.push(L))}else Qe={eventTime:Qe,lane:$e,tag:L.tag,payload:L.payload,callback:L.callback,next:null},Re===null?(ge=Re=Qe,Y=Le):Re=Re.next=Qe,O|=$e;if(L=L.next,L===null){if(L=b.shared.pending,L===null)break;$e=L,L=$e.next,$e.next=null,b.lastBaseUpdate=$e,b.shared.pending=null}}while(!0);if(Re===null&&(Y=Le),b.baseState=Y,b.firstBaseUpdate=ge,b.lastBaseUpdate=Re,c=b.shared.interleaved,c!==null){b=c;do O|=b.lane,b=b.next;while(b!==c)}else k===null&&(b.shared.lanes=0);ll|=O,o.lanes=O,o.memoizedState=Le}}function y1(o,c,h){if(o=c.effects,c.effects=null,o!==null)for(c=0;c<o.length;c++){var g=o[c],b=g.callback;if(b!==null){if(g.callback=null,g=h,typeof b!="function")throw Error(r(191,b));b.call(g)}}}var Eu={},pa=jo(Eu),Au=jo(Eu),Pu=jo(Eu);function al(o){if(o===Eu)throw Error(r(174));return o}function sg(o,c){switch(Ar(Pu,c),Ar(Au,o),Ar(pa,Eu),o=c.nodeType,o){case 9:case 11:c=(c=c.documentElement)?c.namespaceURI:It(null,"");break;default:o=o===8?c.parentNode:c,c=o.namespaceURI||null,o=o.tagName,c=It(c,o)}Rr(pa),Ar(pa,c)}function lc(){Rr(pa),Rr(Au),Rr(Pu)}function v1(o){al(Pu.current);var c=al(pa.current),h=It(c,o.type);c!==h&&(Ar(Au,o),Ar(pa,h))}function ig(o){Au.current===o&&(Rr(pa),Rr(Au))}var Xr=jo(0);function jf(o){for(var c=o;c!==null;){if(c.tag===13){var h=c.memoizedState;if(h!==null&&(h=h.dehydrated,h===null||h.data==="$?"||h.data==="$!"))return c}else if(c.tag===19&&c.memoizedProps.revealOrder!==void 0){if((c.flags&128)!==0)return c}else if(c.child!==null){c.child.return=c,c=c.child;continue}if(c===o)break;for(;c.sibling===null;){if(c.return===null||c.return===o)return null;c=c.return}c.sibling.return=c.return,c=c.sibling}return null}var ag=[];function og(){for(var o=0;o<ag.length;o++)ag[o]._workInProgressVersionPrimary=null;ag.length=0}var Sf=A.ReactCurrentDispatcher,lg=A.ReactCurrentBatchConfig,ol=0,Qr=null,Pn=null,Vn=null,Nf=!1,Ou=!1,Tu=0,AI=0;function vs(){throw Error(r(321))}function cg(o,c){if(c===null)return!1;for(var h=0;h<c.length&&h<o.length;h++)if(!Ui(o[h],c[h]))return!1;return!0}function ug(o,c,h,g,b,k){if(ol=k,Qr=c,c.memoizedState=null,c.updateQueue=null,c.lanes=0,Sf.current=o===null||o.memoizedState===null?II:DI,o=h(g,b),Ou){k=0;do{if(Ou=!1,Tu=0,25<=k)throw Error(r(301));k+=1,Vn=Pn=null,c.updateQueue=null,Sf.current=$I,o=h(g,b)}while(Ou)}if(Sf.current=Cf,c=Pn!==null&&Pn.next!==null,ol=0,Vn=Pn=Qr=null,Nf=!1,c)throw Error(r(300));return o}function dg(){var o=Tu!==0;return Tu=0,o}function ga(){var o={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Vn===null?Qr.memoizedState=Vn=o:Vn=Vn.next=o,Vn}function ki(){if(Pn===null){var o=Qr.alternate;o=o!==null?o.memoizedState:null}else o=Pn.next;var c=Vn===null?Qr.memoizedState:Vn.next;if(c!==null)Vn=c,Pn=o;else{if(o===null)throw Error(r(310));Pn=o,o={memoizedState:Pn.memoizedState,baseState:Pn.baseState,baseQueue:Pn.baseQueue,queue:Pn.queue,next:null},Vn===null?Qr.memoizedState=Vn=o:Vn=Vn.next=o}return Vn}function Iu(o,c){return typeof c=="function"?c(o):c}function fg(o){var c=ki(),h=c.queue;if(h===null)throw Error(r(311));h.lastRenderedReducer=o;var g=Pn,b=g.baseQueue,k=h.pending;if(k!==null){if(b!==null){var O=b.next;b.next=k.next,k.next=O}g.baseQueue=b=k,h.pending=null}if(b!==null){k=b.next,g=g.baseState;var L=O=null,Y=null,ge=k;do{var Re=ge.lane;if((ol&Re)===Re)Y!==null&&(Y=Y.next={lane:0,action:ge.action,hasEagerState:ge.hasEagerState,eagerState:ge.eagerState,next:null}),g=ge.hasEagerState?ge.eagerState:o(g,ge.action);else{var Le={lane:Re,action:ge.action,hasEagerState:ge.hasEagerState,eagerState:ge.eagerState,next:null};Y===null?(L=Y=Le,O=g):Y=Y.next=Le,Qr.lanes|=Re,ll|=Re}ge=ge.next}while(ge!==null&&ge!==k);Y===null?O=g:Y.next=L,Ui(g,c.memoizedState)||(Us=!0),c.memoizedState=g,c.baseState=O,c.baseQueue=Y,h.lastRenderedState=g}if(o=h.interleaved,o!==null){b=o;do k=b.lane,Qr.lanes|=k,ll|=k,b=b.next;while(b!==o)}else b===null&&(h.lanes=0);return[c.memoizedState,h.dispatch]}function hg(o){var c=ki(),h=c.queue;if(h===null)throw Error(r(311));h.lastRenderedReducer=o;var g=h.dispatch,b=h.pending,k=c.memoizedState;if(b!==null){h.pending=null;var O=b=b.next;do k=o(k,O.action),O=O.next;while(O!==b);Ui(k,c.memoizedState)||(Us=!0),c.memoizedState=k,c.baseQueue===null&&(c.baseState=k),h.lastRenderedState=k}return[k,g]}function x1(){}function b1(o,c){var h=Qr,g=ki(),b=c(),k=!Ui(g.memoizedState,b);if(k&&(g.memoizedState=b,Us=!0),g=g.queue,mg(S1.bind(null,h,g,o),[o]),g.getSnapshot!==c||k||Vn!==null&&Vn.memoizedState.tag&1){if(h.flags|=2048,Du(9,j1.bind(null,h,g,b,c),void 0,null),qn===null)throw Error(r(349));(ol&30)!==0||w1(h,c,b)}return b}function w1(o,c,h){o.flags|=16384,o={getSnapshot:c,value:h},c=Qr.updateQueue,c===null?(c={lastEffect:null,stores:null},Qr.updateQueue=c,c.stores=[o]):(h=c.stores,h===null?c.stores=[o]:h.push(o))}function j1(o,c,h,g){c.value=h,c.getSnapshot=g,N1(c)&&k1(o)}function S1(o,c,h){return h(function(){N1(c)&&k1(o)})}function N1(o){var c=o.getSnapshot;o=o.value;try{var h=c();return!Ui(o,h)}catch{return!0}}function k1(o){var c=La(o,1);c!==null&&Hi(c,o,1,-1)}function _1(o){var c=ga();return typeof o=="function"&&(o=o()),c.memoizedState=c.baseState=o,o={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Iu,lastRenderedState:o},c.queue=o,o=o.dispatch=TI.bind(null,Qr,o),[c.memoizedState,o]}function Du(o,c,h,g){return o={tag:o,create:c,destroy:h,deps:g,next:null},c=Qr.updateQueue,c===null?(c={lastEffect:null,stores:null},Qr.updateQueue=c,c.lastEffect=o.next=o):(h=c.lastEffect,h===null?c.lastEffect=o.next=o:(g=h.next,h.next=o,o.next=g,c.lastEffect=o)),o}function C1(){return ki().memoizedState}function kf(o,c,h,g){var b=ga();Qr.flags|=o,b.memoizedState=Du(1|c,h,void 0,g===void 0?null:g)}function _f(o,c,h,g){var b=ki();g=g===void 0?null:g;var k=void 0;if(Pn!==null){var O=Pn.memoizedState;if(k=O.destroy,g!==null&&cg(g,O.deps)){b.memoizedState=Du(c,h,k,g);return}}Qr.flags|=o,b.memoizedState=Du(1|c,h,k,g)}function E1(o,c){return kf(8390656,8,o,c)}function mg(o,c){return _f(2048,8,o,c)}function A1(o,c){return _f(4,2,o,c)}function P1(o,c){return _f(4,4,o,c)}function O1(o,c){if(typeof c=="function")return o=o(),c(o),function(){c(null)};if(c!=null)return o=o(),c.current=o,function(){c.current=null}}function T1(o,c,h){return h=h!=null?h.concat([o]):null,_f(4,4,O1.bind(null,c,o),h)}function pg(){}function I1(o,c){var h=ki();c=c===void 0?null:c;var g=h.memoizedState;return g!==null&&c!==null&&cg(c,g[1])?g[0]:(h.memoizedState=[o,c],o)}function D1(o,c){var h=ki();c=c===void 0?null:c;var g=h.memoizedState;return g!==null&&c!==null&&cg(c,g[1])?g[0]:(o=o(),h.memoizedState=[o,c],o)}function $1(o,c,h){return(ol&21)===0?(o.baseState&&(o.baseState=!1,Us=!0),o.memoizedState=h):(Ui(h,c)||(h=la(),Qr.lanes|=h,ll|=h,o.baseState=!0),c)}function PI(o,c){var h=Xt;Xt=h!==0&&4>h?h:4,o(!0);var g=lg.transition;lg.transition={};try{o(!1),c()}finally{Xt=h,lg.transition=g}}function R1(){return ki().memoizedState}function OI(o,c,h){var g=Po(o);if(h={lane:g,action:h,hasEagerState:!1,eagerState:null,next:null},M1(o))F1(c,h);else if(h=m1(o,c,h,g),h!==null){var b=Es();Hi(h,o,g,b),L1(h,c,g)}}function TI(o,c,h){var g=Po(o),b={lane:g,action:h,hasEagerState:!1,eagerState:null,next:null};if(M1(o))F1(c,b);else{var k=o.alternate;if(o.lanes===0&&(k===null||k.lanes===0)&&(k=c.lastRenderedReducer,k!==null))try{var O=c.lastRenderedState,L=k(O,h);if(b.hasEagerState=!0,b.eagerState=L,Ui(L,O)){var Y=c.interleaved;Y===null?(b.next=b,rg(c)):(b.next=Y.next,Y.next=b),c.interleaved=b;return}}catch{}finally{}h=m1(o,c,b,g),h!==null&&(b=Es(),Hi(h,o,g,b),L1(h,c,g))}}function M1(o){var c=o.alternate;return o===Qr||c!==null&&c===Qr}function F1(o,c){Ou=Nf=!0;var h=o.pending;h===null?c.next=c:(c.next=h.next,h.next=c),o.pending=c}function L1(o,c,h){if((h&4194240)!==0){var g=c.lanes;g&=o.pendingLanes,h|=g,c.lanes=h,ln(o,h)}}var Cf={readContext:Ni,useCallback:vs,useContext:vs,useEffect:vs,useImperativeHandle:vs,useInsertionEffect:vs,useLayoutEffect:vs,useMemo:vs,useReducer:vs,useRef:vs,useState:vs,useDebugValue:vs,useDeferredValue:vs,useTransition:vs,useMutableSource:vs,useSyncExternalStore:vs,useId:vs,unstable_isNewReconciler:!1},II={readContext:Ni,useCallback:function(o,c){return ga().memoizedState=[o,c===void 0?null:c],o},useContext:Ni,useEffect:E1,useImperativeHandle:function(o,c,h){return h=h!=null?h.concat([o]):null,kf(4194308,4,O1.bind(null,c,o),h)},useLayoutEffect:function(o,c){return kf(4194308,4,o,c)},useInsertionEffect:function(o,c){return kf(4,2,o,c)},useMemo:function(o,c){var h=ga();return c=c===void 0?null:c,o=o(),h.memoizedState=[o,c],o},useReducer:function(o,c,h){var g=ga();return c=h!==void 0?h(c):c,g.memoizedState=g.baseState=c,o={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:o,lastRenderedState:c},g.queue=o,o=o.dispatch=OI.bind(null,Qr,o),[g.memoizedState,o]},useRef:function(o){var c=ga();return o={current:o},c.memoizedState=o},useState:_1,useDebugValue:pg,useDeferredValue:function(o){return ga().memoizedState=o},useTransition:function(){var o=_1(!1),c=o[0];return o=PI.bind(null,o[1]),ga().memoizedState=o,[c,o]},useMutableSource:function(){},useSyncExternalStore:function(o,c,h){var g=Qr,b=ga();if(qr){if(h===void 0)throw Error(r(407));h=h()}else{if(h=c(),qn===null)throw Error(r(349));(ol&30)!==0||w1(g,c,h)}b.memoizedState=h;var k={value:h,getSnapshot:c};return b.queue=k,E1(S1.bind(null,g,k,o),[o]),g.flags|=2048,Du(9,j1.bind(null,g,k,h,c),void 0,null),h},useId:function(){var o=ga(),c=qn.identifierPrefix;if(qr){var h=Fa,g=Ma;h=(g&~(1<<32-St(g)-1)).toString(32)+h,c=":"+c+"R"+h,h=Tu++,0<h&&(c+="H"+h.toString(32)),c+=":"}else h=AI++,c=":"+c+"r"+h.toString(32)+":";return o.memoizedState=c},unstable_isNewReconciler:!1},DI={readContext:Ni,useCallback:I1,useContext:Ni,useEffect:mg,useImperativeHandle:T1,useInsertionEffect:A1,useLayoutEffect:P1,useMemo:D1,useReducer:fg,useRef:C1,useState:function(){return fg(Iu)},useDebugValue:pg,useDeferredValue:function(o){var c=ki();return $1(c,Pn.memoizedState,o)},useTransition:function(){var o=fg(Iu)[0],c=ki().memoizedState;return[o,c]},useMutableSource:x1,useSyncExternalStore:b1,useId:R1,unstable_isNewReconciler:!1},$I={readContext:Ni,useCallback:I1,useContext:Ni,useEffect:mg,useImperativeHandle:T1,useInsertionEffect:A1,useLayoutEffect:P1,useMemo:D1,useReducer:hg,useRef:C1,useState:function(){return hg(Iu)},useDebugValue:pg,useDeferredValue:function(o){var c=ki();return Pn===null?c.memoizedState=o:$1(c,Pn.memoizedState,o)},useTransition:function(){var o=hg(Iu)[0],c=ki().memoizedState;return[o,c]},useMutableSource:x1,useSyncExternalStore:b1,useId:R1,unstable_isNewReconciler:!1};function Wi(o,c){if(o&&o.defaultProps){c=se({},c),o=o.defaultProps;for(var h in o)c[h]===void 0&&(c[h]=o[h]);return c}return c}function gg(o,c,h,g){c=o.memoizedState,h=h(g,c),h=h==null?c:se({},c,h),o.memoizedState=h,o.lanes===0&&(o.updateQueue.baseState=h)}var Ef={isMounted:function(o){return(o=o._reactInternals)?Ir(o)===o:!1},enqueueSetState:function(o,c,h){o=o._reactInternals;var g=Es(),b=Po(o),k=za(g,b);k.payload=c,h!=null&&(k.callback=h),c=_o(o,k,b),c!==null&&(Hi(c,o,b,g),bf(c,o,b))},enqueueReplaceState:function(o,c,h){o=o._reactInternals;var g=Es(),b=Po(o),k=za(g,b);k.tag=1,k.payload=c,h!=null&&(k.callback=h),c=_o(o,k,b),c!==null&&(Hi(c,o,b,g),bf(c,o,b))},enqueueForceUpdate:function(o,c){o=o._reactInternals;var h=Es(),g=Po(o),b=za(h,g);b.tag=2,c!=null&&(b.callback=c),c=_o(o,b,g),c!==null&&(Hi(c,o,g,h),bf(c,o,g))}};function z1(o,c,h,g,b,k,O){return o=o.stateNode,typeof o.shouldComponentUpdate=="function"?o.shouldComponentUpdate(g,k,O):c.prototype&&c.prototype.isPureReactComponent?!bu(h,g)||!bu(b,k):!0}function U1(o,c,h){var g=!1,b=So,k=c.contextType;return typeof k=="object"&&k!==null?k=Ni(k):(b=zs(c)?rl:ys.current,g=c.contextTypes,k=(g=g!=null)?tc(o,b):So),c=new c(h,k),o.memoizedState=c.state!==null&&c.state!==void 0?c.state:null,c.updater=Ef,o.stateNode=c,c._reactInternals=o,g&&(o=o.stateNode,o.__reactInternalMemoizedUnmaskedChildContext=b,o.__reactInternalMemoizedMaskedChildContext=k),c}function B1(o,c,h,g){o=c.state,typeof c.componentWillReceiveProps=="function"&&c.componentWillReceiveProps(h,g),typeof c.UNSAFE_componentWillReceiveProps=="function"&&c.UNSAFE_componentWillReceiveProps(h,g),c.state!==o&&Ef.enqueueReplaceState(c,c.state,null)}function yg(o,c,h,g){var b=o.stateNode;b.props=h,b.state=o.memoizedState,b.refs={},ng(o);var k=c.contextType;typeof k=="object"&&k!==null?b.context=Ni(k):(k=zs(c)?rl:ys.current,b.context=tc(o,k)),b.state=o.memoizedState,k=c.getDerivedStateFromProps,typeof k=="function"&&(gg(o,c,k,h),b.state=o.memoizedState),typeof c.getDerivedStateFromProps=="function"||typeof b.getSnapshotBeforeUpdate=="function"||typeof b.UNSAFE_componentWillMount!="function"&&typeof b.componentWillMount!="function"||(c=b.state,typeof b.componentWillMount=="function"&&b.componentWillMount(),typeof b.UNSAFE_componentWillMount=="function"&&b.UNSAFE_componentWillMount(),c!==b.state&&Ef.enqueueReplaceState(b,b.state,null),wf(o,h,b,g),b.state=o.memoizedState),typeof b.componentDidMount=="function"&&(o.flags|=4194308)}function cc(o,c){try{var h="",g=c;do h+=Ie(g),g=g.return;while(g);var b=h}catch(k){b=`
Error generating stack: `+k.message+`
`+k.stack}return{value:o,source:c,stack:b,digest:null}}function vg(o,c,h){return{value:o,source:null,stack:h??null,digest:c??null}}function xg(o,c){try{console.error(c.value)}catch(h){setTimeout(function(){throw h})}}var RI=typeof WeakMap=="function"?WeakMap:Map;function W1(o,c,h){h=za(-1,h),h.tag=3,h.payload={element:null};var g=c.value;return h.callback=function(){$f||($f=!0,Dg=g),xg(o,c)},h}function V1(o,c,h){h=za(-1,h),h.tag=3;var g=o.type.getDerivedStateFromError;if(typeof g=="function"){var b=c.value;h.payload=function(){return g(b)},h.callback=function(){xg(o,c)}}var k=o.stateNode;return k!==null&&typeof k.componentDidCatch=="function"&&(h.callback=function(){xg(o,c),typeof g!="function"&&(Eo===null?Eo=new Set([this]):Eo.add(this));var O=c.stack;this.componentDidCatch(c.value,{componentStack:O!==null?O:""})}),h}function q1(o,c,h){var g=o.pingCache;if(g===null){g=o.pingCache=new RI;var b=new Set;g.set(c,b)}else b=g.get(c),b===void 0&&(b=new Set,g.set(c,b));b.has(h)||(b.add(h),o=JI.bind(null,o,c,h),c.then(o,o))}function H1(o){do{var c;if((c=o.tag===13)&&(c=o.memoizedState,c=c!==null?c.dehydrated!==null:!0),c)return o;o=o.return}while(o!==null);return null}function K1(o,c,h,g,b){return(o.mode&1)===0?(o===c?o.flags|=65536:(o.flags|=128,h.flags|=131072,h.flags&=-52805,h.tag===1&&(h.alternate===null?h.tag=17:(c=za(-1,1),c.tag=2,_o(h,c,1))),h.lanes|=1),o):(o.flags|=65536,o.lanes=b,o)}var MI=A.ReactCurrentOwner,Us=!1;function Cs(o,c,h,g){c.child=o===null?h1(c,null,h,g):ic(c,o.child,h,g)}function G1(o,c,h,g,b){h=h.render;var k=c.ref;return oc(c,b),g=ug(o,c,h,g,k,b),h=dg(),o!==null&&!Us?(c.updateQueue=o.updateQueue,c.flags&=-2053,o.lanes&=~b,Ua(o,c,b)):(qr&&h&&Kp(c),c.flags|=1,Cs(o,c,g,b),c.child)}function Y1(o,c,h,g,b){if(o===null){var k=h.type;return typeof k=="function"&&!Ug(k)&&k.defaultProps===void 0&&h.compare===null&&h.defaultProps===void 0?(c.tag=15,c.type=k,J1(o,c,k,g,b)):(o=Uf(h.type,null,g,c,c.mode,b),o.ref=c.ref,o.return=c,c.child=o)}if(k=o.child,(o.lanes&b)===0){var O=k.memoizedProps;if(h=h.compare,h=h!==null?h:bu,h(O,g)&&o.ref===c.ref)return Ua(o,c,b)}return c.flags|=1,o=To(k,g),o.ref=c.ref,o.return=c,c.child=o}function J1(o,c,h,g,b){if(o!==null){var k=o.memoizedProps;if(bu(k,g)&&o.ref===c.ref)if(Us=!1,c.pendingProps=g=k,(o.lanes&b)!==0)(o.flags&131072)!==0&&(Us=!0);else return c.lanes=o.lanes,Ua(o,c,b)}return bg(o,c,h,g,b)}function X1(o,c,h){var g=c.pendingProps,b=g.children,k=o!==null?o.memoizedState:null;if(g.mode==="hidden")if((c.mode&1)===0)c.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ar(dc,si),si|=h;else{if((h&1073741824)===0)return o=k!==null?k.baseLanes|h:h,c.lanes=c.childLanes=1073741824,c.memoizedState={baseLanes:o,cachePool:null,transitions:null},c.updateQueue=null,Ar(dc,si),si|=o,null;c.memoizedState={baseLanes:0,cachePool:null,transitions:null},g=k!==null?k.baseLanes:h,Ar(dc,si),si|=g}else k!==null?(g=k.baseLanes|h,c.memoizedState=null):g=h,Ar(dc,si),si|=g;return Cs(o,c,b,h),c.child}function Q1(o,c){var h=c.ref;(o===null&&h!==null||o!==null&&o.ref!==h)&&(c.flags|=512,c.flags|=2097152)}function bg(o,c,h,g,b){var k=zs(h)?rl:ys.current;return k=tc(c,k),oc(c,b),h=ug(o,c,h,g,k,b),g=dg(),o!==null&&!Us?(c.updateQueue=o.updateQueue,c.flags&=-2053,o.lanes&=~b,Ua(o,c,b)):(qr&&g&&Kp(c),c.flags|=1,Cs(o,c,h,b),c.child)}function Z1(o,c,h,g,b){if(zs(h)){var k=!0;ff(c)}else k=!1;if(oc(c,b),c.stateNode===null)Pf(o,c),U1(c,h,g),yg(c,h,g,b),g=!0;else if(o===null){var O=c.stateNode,L=c.memoizedProps;O.props=L;var Y=O.context,ge=h.contextType;typeof ge=="object"&&ge!==null?ge=Ni(ge):(ge=zs(h)?rl:ys.current,ge=tc(c,ge));var Re=h.getDerivedStateFromProps,Le=typeof Re=="function"||typeof O.getSnapshotBeforeUpdate=="function";Le||typeof O.UNSAFE_componentWillReceiveProps!="function"&&typeof O.componentWillReceiveProps!="function"||(L!==g||Y!==ge)&&B1(c,O,g,ge),ko=!1;var $e=c.memoizedState;O.state=$e,wf(c,g,O,b),Y=c.memoizedState,L!==g||$e!==Y||Ls.current||ko?(typeof Re=="function"&&(gg(c,h,Re,g),Y=c.memoizedState),(L=ko||z1(c,h,L,g,$e,Y,ge))?(Le||typeof O.UNSAFE_componentWillMount!="function"&&typeof O.componentWillMount!="function"||(typeof O.componentWillMount=="function"&&O.componentWillMount(),typeof O.UNSAFE_componentWillMount=="function"&&O.UNSAFE_componentWillMount()),typeof O.componentDidMount=="function"&&(c.flags|=4194308)):(typeof O.componentDidMount=="function"&&(c.flags|=4194308),c.memoizedProps=g,c.memoizedState=Y),O.props=g,O.state=Y,O.context=ge,g=L):(typeof O.componentDidMount=="function"&&(c.flags|=4194308),g=!1)}else{O=c.stateNode,p1(o,c),L=c.memoizedProps,ge=c.type===c.elementType?L:Wi(c.type,L),O.props=ge,Le=c.pendingProps,$e=O.context,Y=h.contextType,typeof Y=="object"&&Y!==null?Y=Ni(Y):(Y=zs(h)?rl:ys.current,Y=tc(c,Y));var Qe=h.getDerivedStateFromProps;(Re=typeof Qe=="function"||typeof O.getSnapshotBeforeUpdate=="function")||typeof O.UNSAFE_componentWillReceiveProps!="function"&&typeof O.componentWillReceiveProps!="function"||(L!==Le||$e!==Y)&&B1(c,O,g,Y),ko=!1,$e=c.memoizedState,O.state=$e,wf(c,g,O,b);var it=c.memoizedState;L!==Le||$e!==it||Ls.current||ko?(typeof Qe=="function"&&(gg(c,h,Qe,g),it=c.memoizedState),(ge=ko||z1(c,h,ge,g,$e,it,Y)||!1)?(Re||typeof O.UNSAFE_componentWillUpdate!="function"&&typeof O.componentWillUpdate!="function"||(typeof O.componentWillUpdate=="function"&&O.componentWillUpdate(g,it,Y),typeof O.UNSAFE_componentWillUpdate=="function"&&O.UNSAFE_componentWillUpdate(g,it,Y)),typeof O.componentDidUpdate=="function"&&(c.flags|=4),typeof O.getSnapshotBeforeUpdate=="function"&&(c.flags|=1024)):(typeof O.componentDidUpdate!="function"||L===o.memoizedProps&&$e===o.memoizedState||(c.flags|=4),typeof O.getSnapshotBeforeUpdate!="function"||L===o.memoizedProps&&$e===o.memoizedState||(c.flags|=1024),c.memoizedProps=g,c.memoizedState=it),O.props=g,O.state=it,O.context=Y,g=ge):(typeof O.componentDidUpdate!="function"||L===o.memoizedProps&&$e===o.memoizedState||(c.flags|=4),typeof O.getSnapshotBeforeUpdate!="function"||L===o.memoizedProps&&$e===o.memoizedState||(c.flags|=1024),g=!1)}return wg(o,c,h,g,k,b)}function wg(o,c,h,g,b,k){Q1(o,c);var O=(c.flags&128)!==0;if(!g&&!O)return b&&s1(c,h,!1),Ua(o,c,k);g=c.stateNode,MI.current=c;var L=O&&typeof h.getDerivedStateFromError!="function"?null:g.render();return c.flags|=1,o!==null&&O?(c.child=ic(c,o.child,null,k),c.child=ic(c,null,L,k)):Cs(o,c,L,k),c.memoizedState=g.state,b&&s1(c,h,!0),c.child}function ej(o){var c=o.stateNode;c.pendingContext?r1(o,c.pendingContext,c.pendingContext!==c.context):c.context&&r1(o,c.context,!1),sg(o,c.containerInfo)}function tj(o,c,h,g,b){return sc(),Xp(b),c.flags|=256,Cs(o,c,h,g),c.child}var jg={dehydrated:null,treeContext:null,retryLane:0};function Sg(o){return{baseLanes:o,cachePool:null,transitions:null}}function rj(o,c,h){var g=c.pendingProps,b=Xr.current,k=!1,O=(c.flags&128)!==0,L;if((L=O)||(L=o!==null&&o.memoizedState===null?!1:(b&2)!==0),L?(k=!0,c.flags&=-129):(o===null||o.memoizedState!==null)&&(b|=1),Ar(Xr,b&1),o===null)return Jp(c),o=c.memoizedState,o!==null&&(o=o.dehydrated,o!==null)?((c.mode&1)===0?c.lanes=1:o.data==="$!"?c.lanes=8:c.lanes=1073741824,null):(O=g.children,o=g.fallback,k?(g=c.mode,k=c.child,O={mode:"hidden",children:O},(g&1)===0&&k!==null?(k.childLanes=0,k.pendingProps=O):k=Bf(O,g,0,null),o=fl(o,g,h,null),k.return=c,o.return=c,k.sibling=o,c.child=k,c.child.memoizedState=Sg(h),c.memoizedState=jg,o):Ng(c,O));if(b=o.memoizedState,b!==null&&(L=b.dehydrated,L!==null))return FI(o,c,O,g,L,b,h);if(k){k=g.fallback,O=c.mode,b=o.child,L=b.sibling;var Y={mode:"hidden",children:g.children};return(O&1)===0&&c.child!==b?(g=c.child,g.childLanes=0,g.pendingProps=Y,c.deletions=null):(g=To(b,Y),g.subtreeFlags=b.subtreeFlags&14680064),L!==null?k=To(L,k):(k=fl(k,O,h,null),k.flags|=2),k.return=c,g.return=c,g.sibling=k,c.child=g,g=k,k=c.child,O=o.child.memoizedState,O=O===null?Sg(h):{baseLanes:O.baseLanes|h,cachePool:null,transitions:O.transitions},k.memoizedState=O,k.childLanes=o.childLanes&~h,c.memoizedState=jg,g}return k=o.child,o=k.sibling,g=To(k,{mode:"visible",children:g.children}),(c.mode&1)===0&&(g.lanes=h),g.return=c,g.sibling=null,o!==null&&(h=c.deletions,h===null?(c.deletions=[o],c.flags|=16):h.push(o)),c.child=g,c.memoizedState=null,g}function Ng(o,c){return c=Bf({mode:"visible",children:c},o.mode,0,null),c.return=o,o.child=c}function Af(o,c,h,g){return g!==null&&Xp(g),ic(c,o.child,null,h),o=Ng(c,c.pendingProps.children),o.flags|=2,c.memoizedState=null,o}function FI(o,c,h,g,b,k,O){if(h)return c.flags&256?(c.flags&=-257,g=vg(Error(r(422))),Af(o,c,O,g)):c.memoizedState!==null?(c.child=o.child,c.flags|=128,null):(k=g.fallback,b=c.mode,g=Bf({mode:"visible",children:g.children},b,0,null),k=fl(k,b,O,null),k.flags|=2,g.return=c,k.return=c,g.sibling=k,c.child=g,(c.mode&1)!==0&&ic(c,o.child,null,O),c.child.memoizedState=Sg(O),c.memoizedState=jg,k);if((c.mode&1)===0)return Af(o,c,O,null);if(b.data==="$!"){if(g=b.nextSibling&&b.nextSibling.dataset,g)var L=g.dgst;return g=L,k=Error(r(419)),g=vg(k,g,void 0),Af(o,c,O,g)}if(L=(O&o.childLanes)!==0,Us||L){if(g=qn,g!==null){switch(O&-O){case 4:b=2;break;case 16:b=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:b=32;break;case 536870912:b=268435456;break;default:b=0}b=(b&(g.suspendedLanes|O))!==0?0:b,b!==0&&b!==k.retryLane&&(k.retryLane=b,La(o,b),Hi(g,o,b,-1))}return zg(),g=vg(Error(r(421))),Af(o,c,O,g)}return b.data==="$?"?(c.flags|=128,c.child=o.child,c=XI.bind(null,o),b._reactRetry=c,null):(o=k.treeContext,ni=wo(b.nextSibling),ri=c,qr=!0,Bi=null,o!==null&&(ji[Si++]=Ma,ji[Si++]=Fa,ji[Si++]=nl,Ma=o.id,Fa=o.overflow,nl=c),c=Ng(c,g.children),c.flags|=4096,c)}function nj(o,c,h){o.lanes|=c;var g=o.alternate;g!==null&&(g.lanes|=c),tg(o.return,c,h)}function kg(o,c,h,g,b){var k=o.memoizedState;k===null?o.memoizedState={isBackwards:c,rendering:null,renderingStartTime:0,last:g,tail:h,tailMode:b}:(k.isBackwards=c,k.rendering=null,k.renderingStartTime=0,k.last=g,k.tail=h,k.tailMode=b)}function sj(o,c,h){var g=c.pendingProps,b=g.revealOrder,k=g.tail;if(Cs(o,c,g.children,h),g=Xr.current,(g&2)!==0)g=g&1|2,c.flags|=128;else{if(o!==null&&(o.flags&128)!==0)e:for(o=c.child;o!==null;){if(o.tag===13)o.memoizedState!==null&&nj(o,h,c);else if(o.tag===19)nj(o,h,c);else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===c)break e;for(;o.sibling===null;){if(o.return===null||o.return===c)break e;o=o.return}o.sibling.return=o.return,o=o.sibling}g&=1}if(Ar(Xr,g),(c.mode&1)===0)c.memoizedState=null;else switch(b){case"forwards":for(h=c.child,b=null;h!==null;)o=h.alternate,o!==null&&jf(o)===null&&(b=h),h=h.sibling;h=b,h===null?(b=c.child,c.child=null):(b=h.sibling,h.sibling=null),kg(c,!1,b,h,k);break;case"backwards":for(h=null,b=c.child,c.child=null;b!==null;){if(o=b.alternate,o!==null&&jf(o)===null){c.child=b;break}o=b.sibling,b.sibling=h,h=b,b=o}kg(c,!0,h,null,k);break;case"together":kg(c,!1,null,null,void 0);break;default:c.memoizedState=null}return c.child}function Pf(o,c){(c.mode&1)===0&&o!==null&&(o.alternate=null,c.alternate=null,c.flags|=2)}function Ua(o,c,h){if(o!==null&&(c.dependencies=o.dependencies),ll|=c.lanes,(h&c.childLanes)===0)return null;if(o!==null&&c.child!==o.child)throw Error(r(153));if(c.child!==null){for(o=c.child,h=To(o,o.pendingProps),c.child=h,h.return=c;o.sibling!==null;)o=o.sibling,h=h.sibling=To(o,o.pendingProps),h.return=c;h.sibling=null}return c.child}function LI(o,c,h){switch(c.tag){case 3:ej(c),sc();break;case 5:v1(c);break;case 1:zs(c.type)&&ff(c);break;case 4:sg(c,c.stateNode.containerInfo);break;case 10:var g=c.type._context,b=c.memoizedProps.value;Ar(vf,g._currentValue),g._currentValue=b;break;case 13:if(g=c.memoizedState,g!==null)return g.dehydrated!==null?(Ar(Xr,Xr.current&1),c.flags|=128,null):(h&c.child.childLanes)!==0?rj(o,c,h):(Ar(Xr,Xr.current&1),o=Ua(o,c,h),o!==null?o.sibling:null);Ar(Xr,Xr.current&1);break;case 19:if(g=(h&c.childLanes)!==0,(o.flags&128)!==0){if(g)return sj(o,c,h);c.flags|=128}if(b=c.memoizedState,b!==null&&(b.rendering=null,b.tail=null,b.lastEffect=null),Ar(Xr,Xr.current),g)break;return null;case 22:case 23:return c.lanes=0,X1(o,c,h)}return Ua(o,c,h)}var ij,_g,aj,oj;ij=function(o,c){for(var h=c.child;h!==null;){if(h.tag===5||h.tag===6)o.appendChild(h.stateNode);else if(h.tag!==4&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===c)break;for(;h.sibling===null;){if(h.return===null||h.return===c)return;h=h.return}h.sibling.return=h.return,h=h.sibling}},_g=function(){},aj=function(o,c,h,g){var b=o.memoizedProps;if(b!==g){o=c.stateNode,al(pa.current);var k=null;switch(h){case"input":b=Pe(o,b),g=Pe(o,g),k=[];break;case"select":b=se({},b,{value:void 0}),g=se({},g,{value:void 0}),k=[];break;case"textarea":b=de(o,b),g=de(o,g),k=[];break;default:typeof b.onClick!="function"&&typeof g.onClick=="function"&&(o.onclick=cf)}_t(h,g);var O;h=null;for(ge in b)if(!g.hasOwnProperty(ge)&&b.hasOwnProperty(ge)&&b[ge]!=null)if(ge==="style"){var L=b[ge];for(O in L)L.hasOwnProperty(O)&&(h||(h={}),h[O]="")}else ge!=="dangerouslySetInnerHTML"&&ge!=="children"&&ge!=="suppressContentEditableWarning"&&ge!=="suppressHydrationWarning"&&ge!=="autoFocus"&&(s.hasOwnProperty(ge)?k||(k=[]):(k=k||[]).push(ge,null));for(ge in g){var Y=g[ge];if(L=b!=null?b[ge]:void 0,g.hasOwnProperty(ge)&&Y!==L&&(Y!=null||L!=null))if(ge==="style")if(L){for(O in L)!L.hasOwnProperty(O)||Y&&Y.hasOwnProperty(O)||(h||(h={}),h[O]="");for(O in Y)Y.hasOwnProperty(O)&&L[O]!==Y[O]&&(h||(h={}),h[O]=Y[O])}else h||(k||(k=[]),k.push(ge,h)),h=Y;else ge==="dangerouslySetInnerHTML"?(Y=Y?Y.__html:void 0,L=L?L.__html:void 0,Y!=null&&L!==Y&&(k=k||[]).push(ge,Y)):ge==="children"?typeof Y!="string"&&typeof Y!="number"||(k=k||[]).push(ge,""+Y):ge!=="suppressContentEditableWarning"&&ge!=="suppressHydrationWarning"&&(s.hasOwnProperty(ge)?(Y!=null&&ge==="onScroll"&&$r("scroll",o),k||L===Y||(k=[])):(k=k||[]).push(ge,Y))}h&&(k=k||[]).push("style",h);var ge=k;(c.updateQueue=ge)&&(c.flags|=4)}},oj=function(o,c,h,g){h!==g&&(c.flags|=4)};function $u(o,c){if(!qr)switch(o.tailMode){case"hidden":c=o.tail;for(var h=null;c!==null;)c.alternate!==null&&(h=c),c=c.sibling;h===null?o.tail=null:h.sibling=null;break;case"collapsed":h=o.tail;for(var g=null;h!==null;)h.alternate!==null&&(g=h),h=h.sibling;g===null?c||o.tail===null?o.tail=null:o.tail.sibling=null:g.sibling=null}}function xs(o){var c=o.alternate!==null&&o.alternate.child===o.child,h=0,g=0;if(c)for(var b=o.child;b!==null;)h|=b.lanes|b.childLanes,g|=b.subtreeFlags&14680064,g|=b.flags&14680064,b.return=o,b=b.sibling;else for(b=o.child;b!==null;)h|=b.lanes|b.childLanes,g|=b.subtreeFlags,g|=b.flags,b.return=o,b=b.sibling;return o.subtreeFlags|=g,o.childLanes=h,c}function zI(o,c,h){var g=c.pendingProps;switch(Gp(c),c.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return xs(c),null;case 1:return zs(c.type)&&df(),xs(c),null;case 3:return g=c.stateNode,lc(),Rr(Ls),Rr(ys),og(),g.pendingContext&&(g.context=g.pendingContext,g.pendingContext=null),(o===null||o.child===null)&&(gf(c)?c.flags|=4:o===null||o.memoizedState.isDehydrated&&(c.flags&256)===0||(c.flags|=1024,Bi!==null&&(Mg(Bi),Bi=null))),_g(o,c),xs(c),null;case 5:ig(c);var b=al(Pu.current);if(h=c.type,o!==null&&c.stateNode!=null)aj(o,c,h,g,b),o.ref!==c.ref&&(c.flags|=512,c.flags|=2097152);else{if(!g){if(c.stateNode===null)throw Error(r(166));return xs(c),null}if(o=al(pa.current),gf(c)){g=c.stateNode,h=c.type;var k=c.memoizedProps;switch(g[ma]=c,g[ku]=k,o=(c.mode&1)!==0,h){case"dialog":$r("cancel",g),$r("close",g);break;case"iframe":case"object":case"embed":$r("load",g);break;case"video":case"audio":for(b=0;b<ju.length;b++)$r(ju[b],g);break;case"source":$r("error",g);break;case"img":case"image":case"link":$r("error",g),$r("load",g);break;case"details":$r("toggle",g);break;case"input":et(g,k),$r("invalid",g);break;case"select":g._wrapperState={wasMultiple:!!k.multiple},$r("invalid",g);break;case"textarea":Fe(g,k),$r("invalid",g)}_t(h,k),b=null;for(var O in k)if(k.hasOwnProperty(O)){var L=k[O];O==="children"?typeof L=="string"?g.textContent!==L&&(k.suppressHydrationWarning!==!0&&lf(g.textContent,L,o),b=["children",L]):typeof L=="number"&&g.textContent!==""+L&&(k.suppressHydrationWarning!==!0&&lf(g.textContent,L,o),b=["children",""+L]):s.hasOwnProperty(O)&&L!=null&&O==="onScroll"&&$r("scroll",g)}switch(h){case"input":le(g),lt(g,k,!0);break;case"textarea":le(g),Ae(g);break;case"select":case"option":break;default:typeof k.onClick=="function"&&(g.onclick=cf)}g=b,c.updateQueue=g,g!==null&&(c.flags|=4)}else{O=b.nodeType===9?b:b.ownerDocument,o==="http://www.w3.org/1999/xhtml"&&(o=Ke(h)),o==="http://www.w3.org/1999/xhtml"?h==="script"?(o=O.createElement("div"),o.innerHTML="<script><\/script>",o=o.removeChild(o.firstChild)):typeof g.is=="string"?o=O.createElement(h,{is:g.is}):(o=O.createElement(h),h==="select"&&(O=o,g.multiple?O.multiple=!0:g.size&&(O.size=g.size))):o=O.createElementNS(o,h),o[ma]=c,o[ku]=g,ij(o,c,!1,!1),c.stateNode=o;e:{switch(O=nr(h,g),h){case"dialog":$r("cancel",o),$r("close",o),b=g;break;case"iframe":case"object":case"embed":$r("load",o),b=g;break;case"video":case"audio":for(b=0;b<ju.length;b++)$r(ju[b],o);b=g;break;case"source":$r("error",o),b=g;break;case"img":case"image":case"link":$r("error",o),$r("load",o),b=g;break;case"details":$r("toggle",o),b=g;break;case"input":et(o,g),b=Pe(o,g),$r("invalid",o);break;case"option":b=g;break;case"select":o._wrapperState={wasMultiple:!!g.multiple},b=se({},g,{value:void 0}),$r("invalid",o);break;case"textarea":Fe(o,g),b=de(o,g),$r("invalid",o);break;default:b=g}_t(h,b),L=b;for(k in L)if(L.hasOwnProperty(k)){var Y=L[k];k==="style"?gt(o,Y):k==="dangerouslySetInnerHTML"?(Y=Y?Y.__html:void 0,Y!=null&&Pt(o,Y)):k==="children"?typeof Y=="string"?(h!=="textarea"||Y!=="")&&rr(o,Y):typeof Y=="number"&&rr(o,""+Y):k!=="suppressContentEditableWarning"&&k!=="suppressHydrationWarning"&&k!=="autoFocus"&&(s.hasOwnProperty(k)?Y!=null&&k==="onScroll"&&$r("scroll",o):Y!=null&&C(o,k,Y,O))}switch(h){case"input":le(o),lt(o,g,!1);break;case"textarea":le(o),Ae(o);break;case"option":g.value!=null&&o.setAttribute("value",""+Z(g.value));break;case"select":o.multiple=!!g.multiple,k=g.value,k!=null?re(o,!!g.multiple,k,!1):g.defaultValue!=null&&re(o,!!g.multiple,g.defaultValue,!0);break;default:typeof b.onClick=="function"&&(o.onclick=cf)}switch(h){case"button":case"input":case"select":case"textarea":g=!!g.autoFocus;break e;case"img":g=!0;break e;default:g=!1}}g&&(c.flags|=4)}c.ref!==null&&(c.flags|=512,c.flags|=2097152)}return xs(c),null;case 6:if(o&&c.stateNode!=null)oj(o,c,o.memoizedProps,g);else{if(typeof g!="string"&&c.stateNode===null)throw Error(r(166));if(h=al(Pu.current),al(pa.current),gf(c)){if(g=c.stateNode,h=c.memoizedProps,g[ma]=c,(k=g.nodeValue!==h)&&(o=ri,o!==null))switch(o.tag){case 3:lf(g.nodeValue,h,(o.mode&1)!==0);break;case 5:o.memoizedProps.suppressHydrationWarning!==!0&&lf(g.nodeValue,h,(o.mode&1)!==0)}k&&(c.flags|=4)}else g=(h.nodeType===9?h:h.ownerDocument).createTextNode(g),g[ma]=c,c.stateNode=g}return xs(c),null;case 13:if(Rr(Xr),g=c.memoizedState,o===null||o.memoizedState!==null&&o.memoizedState.dehydrated!==null){if(qr&&ni!==null&&(c.mode&1)!==0&&(c.flags&128)===0)u1(),sc(),c.flags|=98560,k=!1;else if(k=gf(c),g!==null&&g.dehydrated!==null){if(o===null){if(!k)throw Error(r(318));if(k=c.memoizedState,k=k!==null?k.dehydrated:null,!k)throw Error(r(317));k[ma]=c}else sc(),(c.flags&128)===0&&(c.memoizedState=null),c.flags|=4;xs(c),k=!1}else Bi!==null&&(Mg(Bi),Bi=null),k=!0;if(!k)return c.flags&65536?c:null}return(c.flags&128)!==0?(c.lanes=h,c):(g=g!==null,g!==(o!==null&&o.memoizedState!==null)&&g&&(c.child.flags|=8192,(c.mode&1)!==0&&(o===null||(Xr.current&1)!==0?On===0&&(On=3):zg())),c.updateQueue!==null&&(c.flags|=4),xs(c),null);case 4:return lc(),_g(o,c),o===null&&Su(c.stateNode.containerInfo),xs(c),null;case 10:return eg(c.type._context),xs(c),null;case 17:return zs(c.type)&&df(),xs(c),null;case 19:if(Rr(Xr),k=c.memoizedState,k===null)return xs(c),null;if(g=(c.flags&128)!==0,O=k.rendering,O===null)if(g)$u(k,!1);else{if(On!==0||o!==null&&(o.flags&128)!==0)for(o=c.child;o!==null;){if(O=jf(o),O!==null){for(c.flags|=128,$u(k,!1),g=O.updateQueue,g!==null&&(c.updateQueue=g,c.flags|=4),c.subtreeFlags=0,g=h,h=c.child;h!==null;)k=h,o=g,k.flags&=14680066,O=k.alternate,O===null?(k.childLanes=0,k.lanes=o,k.child=null,k.subtreeFlags=0,k.memoizedProps=null,k.memoizedState=null,k.updateQueue=null,k.dependencies=null,k.stateNode=null):(k.childLanes=O.childLanes,k.lanes=O.lanes,k.child=O.child,k.subtreeFlags=0,k.deletions=null,k.memoizedProps=O.memoizedProps,k.memoizedState=O.memoizedState,k.updateQueue=O.updateQueue,k.type=O.type,o=O.dependencies,k.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext}),h=h.sibling;return Ar(Xr,Xr.current&1|2),c.child}o=o.sibling}k.tail!==null&&sr()>fc&&(c.flags|=128,g=!0,$u(k,!1),c.lanes=4194304)}else{if(!g)if(o=jf(O),o!==null){if(c.flags|=128,g=!0,h=o.updateQueue,h!==null&&(c.updateQueue=h,c.flags|=4),$u(k,!0),k.tail===null&&k.tailMode==="hidden"&&!O.alternate&&!qr)return xs(c),null}else 2*sr()-k.renderingStartTime>fc&&h!==1073741824&&(c.flags|=128,g=!0,$u(k,!1),c.lanes=4194304);k.isBackwards?(O.sibling=c.child,c.child=O):(h=k.last,h!==null?h.sibling=O:c.child=O,k.last=O)}return k.tail!==null?(c=k.tail,k.rendering=c,k.tail=c.sibling,k.renderingStartTime=sr(),c.sibling=null,h=Xr.current,Ar(Xr,g?h&1|2:h&1),c):(xs(c),null);case 22:case 23:return Lg(),g=c.memoizedState!==null,o!==null&&o.memoizedState!==null!==g&&(c.flags|=8192),g&&(c.mode&1)!==0?(si&1073741824)!==0&&(xs(c),c.subtreeFlags&6&&(c.flags|=8192)):xs(c),null;case 24:return null;case 25:return null}throw Error(r(156,c.tag))}function UI(o,c){switch(Gp(c),c.tag){case 1:return zs(c.type)&&df(),o=c.flags,o&65536?(c.flags=o&-65537|128,c):null;case 3:return lc(),Rr(Ls),Rr(ys),og(),o=c.flags,(o&65536)!==0&&(o&128)===0?(c.flags=o&-65537|128,c):null;case 5:return ig(c),null;case 13:if(Rr(Xr),o=c.memoizedState,o!==null&&o.dehydrated!==null){if(c.alternate===null)throw Error(r(340));sc()}return o=c.flags,o&65536?(c.flags=o&-65537|128,c):null;case 19:return Rr(Xr),null;case 4:return lc(),null;case 10:return eg(c.type._context),null;case 22:case 23:return Lg(),null;case 24:return null;default:return null}}var Of=!1,bs=!1,BI=typeof WeakSet=="function"?WeakSet:Set,nt=null;function uc(o,c){var h=o.ref;if(h!==null)if(typeof h=="function")try{h(null)}catch(g){rn(o,c,g)}else h.current=null}function Cg(o,c,h){try{h()}catch(g){rn(o,c,g)}}var lj=!1;function WI(o,c){if(Lp=zi,o=zw(),Op(o)){if("selectionStart"in o)var h={start:o.selectionStart,end:o.selectionEnd};else e:{h=(h=o.ownerDocument)&&h.defaultView||window;var g=h.getSelection&&h.getSelection();if(g&&g.rangeCount!==0){h=g.anchorNode;var b=g.anchorOffset,k=g.focusNode;g=g.focusOffset;try{h.nodeType,k.nodeType}catch{h=null;break e}var O=0,L=-1,Y=-1,ge=0,Re=0,Le=o,$e=null;t:for(;;){for(var Qe;Le!==h||b!==0&&Le.nodeType!==3||(L=O+b),Le!==k||g!==0&&Le.nodeType!==3||(Y=O+g),Le.nodeType===3&&(O+=Le.nodeValue.length),(Qe=Le.firstChild)!==null;)$e=Le,Le=Qe;for(;;){if(Le===o)break t;if($e===h&&++ge===b&&(L=O),$e===k&&++Re===g&&(Y=O),(Qe=Le.nextSibling)!==null)break;Le=$e,$e=Le.parentNode}Le=Qe}h=L===-1||Y===-1?null:{start:L,end:Y}}else h=null}h=h||{start:0,end:0}}else h=null;for(zp={focusedElem:o,selectionRange:h},zi=!1,nt=c;nt!==null;)if(c=nt,o=c.child,(c.subtreeFlags&1028)!==0&&o!==null)o.return=c,nt=o;else for(;nt!==null;){c=nt;try{var it=c.alternate;if((c.flags&1024)!==0)switch(c.tag){case 0:case 11:case 15:break;case 1:if(it!==null){var ot=it.memoizedProps,un=it.memoizedState,oe=c.stateNode,Q=oe.getSnapshotBeforeUpdate(c.elementType===c.type?ot:Wi(c.type,ot),un);oe.__reactInternalSnapshotBeforeUpdate=Q}break;case 3:var ue=c.stateNode.containerInfo;ue.nodeType===1?ue.textContent="":ue.nodeType===9&&ue.documentElement&&ue.removeChild(ue.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(r(163))}}catch(Ve){rn(c,c.return,Ve)}if(o=c.sibling,o!==null){o.return=c.return,nt=o;break}nt=c.return}return it=lj,lj=!1,it}function Ru(o,c,h){var g=c.updateQueue;if(g=g!==null?g.lastEffect:null,g!==null){var b=g=g.next;do{if((b.tag&o)===o){var k=b.destroy;b.destroy=void 0,k!==void 0&&Cg(c,h,k)}b=b.next}while(b!==g)}}function Tf(o,c){if(c=c.updateQueue,c=c!==null?c.lastEffect:null,c!==null){var h=c=c.next;do{if((h.tag&o)===o){var g=h.create;h.destroy=g()}h=h.next}while(h!==c)}}function Eg(o){var c=o.ref;if(c!==null){var h=o.stateNode;switch(o.tag){case 5:o=h;break;default:o=h}typeof c=="function"?c(o):c.current=o}}function cj(o){var c=o.alternate;c!==null&&(o.alternate=null,cj(c)),o.child=null,o.deletions=null,o.sibling=null,o.tag===5&&(c=o.stateNode,c!==null&&(delete c[ma],delete c[ku],delete c[Vp],delete c[kI],delete c[_I])),o.stateNode=null,o.return=null,o.dependencies=null,o.memoizedProps=null,o.memoizedState=null,o.pendingProps=null,o.stateNode=null,o.updateQueue=null}function uj(o){return o.tag===5||o.tag===3||o.tag===4}function dj(o){e:for(;;){for(;o.sibling===null;){if(o.return===null||uj(o.return))return null;o=o.return}for(o.sibling.return=o.return,o=o.sibling;o.tag!==5&&o.tag!==6&&o.tag!==18;){if(o.flags&2||o.child===null||o.tag===4)continue e;o.child.return=o,o=o.child}if(!(o.flags&2))return o.stateNode}}function Ag(o,c,h){var g=o.tag;if(g===5||g===6)o=o.stateNode,c?h.nodeType===8?h.parentNode.insertBefore(o,c):h.insertBefore(o,c):(h.nodeType===8?(c=h.parentNode,c.insertBefore(o,h)):(c=h,c.appendChild(o)),h=h._reactRootContainer,h!=null||c.onclick!==null||(c.onclick=cf));else if(g!==4&&(o=o.child,o!==null))for(Ag(o,c,h),o=o.sibling;o!==null;)Ag(o,c,h),o=o.sibling}function Pg(o,c,h){var g=o.tag;if(g===5||g===6)o=o.stateNode,c?h.insertBefore(o,c):h.appendChild(o);else if(g!==4&&(o=o.child,o!==null))for(Pg(o,c,h),o=o.sibling;o!==null;)Pg(o,c,h),o=o.sibling}var is=null,Vi=!1;function Co(o,c,h){for(h=h.child;h!==null;)fj(o,c,h),h=h.sibling}function fj(o,c,h){if(ct&&typeof ct.onCommitFiberUnmount=="function")try{ct.onCommitFiberUnmount(Oe,h)}catch{}switch(h.tag){case 5:bs||uc(h,c);case 6:var g=is,b=Vi;is=null,Co(o,c,h),is=g,Vi=b,is!==null&&(Vi?(o=is,h=h.stateNode,o.nodeType===8?o.parentNode.removeChild(h):o.removeChild(h)):is.removeChild(h.stateNode));break;case 18:is!==null&&(Vi?(o=is,h=h.stateNode,o.nodeType===8?Wp(o.parentNode,h):o.nodeType===1&&Wp(o,h),ns(o)):Wp(is,h.stateNode));break;case 4:g=is,b=Vi,is=h.stateNode.containerInfo,Vi=!0,Co(o,c,h),is=g,Vi=b;break;case 0:case 11:case 14:case 15:if(!bs&&(g=h.updateQueue,g!==null&&(g=g.lastEffect,g!==null))){b=g=g.next;do{var k=b,O=k.destroy;k=k.tag,O!==void 0&&((k&2)!==0||(k&4)!==0)&&Cg(h,c,O),b=b.next}while(b!==g)}Co(o,c,h);break;case 1:if(!bs&&(uc(h,c),g=h.stateNode,typeof g.componentWillUnmount=="function"))try{g.props=h.memoizedProps,g.state=h.memoizedState,g.componentWillUnmount()}catch(L){rn(h,c,L)}Co(o,c,h);break;case 21:Co(o,c,h);break;case 22:h.mode&1?(bs=(g=bs)||h.memoizedState!==null,Co(o,c,h),bs=g):Co(o,c,h);break;default:Co(o,c,h)}}function hj(o){var c=o.updateQueue;if(c!==null){o.updateQueue=null;var h=o.stateNode;h===null&&(h=o.stateNode=new BI),c.forEach(function(g){var b=QI.bind(null,o,g);h.has(g)||(h.add(g),g.then(b,b))})}}function qi(o,c){var h=c.deletions;if(h!==null)for(var g=0;g<h.length;g++){var b=h[g];try{var k=o,O=c,L=O;e:for(;L!==null;){switch(L.tag){case 5:is=L.stateNode,Vi=!1;break e;case 3:is=L.stateNode.containerInfo,Vi=!0;break e;case 4:is=L.stateNode.containerInfo,Vi=!0;break e}L=L.return}if(is===null)throw Error(r(160));fj(k,O,b),is=null,Vi=!1;var Y=b.alternate;Y!==null&&(Y.return=null),b.return=null}catch(ge){rn(b,c,ge)}}if(c.subtreeFlags&12854)for(c=c.child;c!==null;)mj(c,o),c=c.sibling}function mj(o,c){var h=o.alternate,g=o.flags;switch(o.tag){case 0:case 11:case 14:case 15:if(qi(c,o),ya(o),g&4){try{Ru(3,o,o.return),Tf(3,o)}catch(ot){rn(o,o.return,ot)}try{Ru(5,o,o.return)}catch(ot){rn(o,o.return,ot)}}break;case 1:qi(c,o),ya(o),g&512&&h!==null&&uc(h,h.return);break;case 5:if(qi(c,o),ya(o),g&512&&h!==null&&uc(h,h.return),o.flags&32){var b=o.stateNode;try{rr(b,"")}catch(ot){rn(o,o.return,ot)}}if(g&4&&(b=o.stateNode,b!=null)){var k=o.memoizedProps,O=h!==null?h.memoizedProps:k,L=o.type,Y=o.updateQueue;if(o.updateQueue=null,Y!==null)try{L==="input"&&k.type==="radio"&&k.name!=null&&rt(b,k),nr(L,O);var ge=nr(L,k);for(O=0;O<Y.length;O+=2){var Re=Y[O],Le=Y[O+1];Re==="style"?gt(b,Le):Re==="dangerouslySetInnerHTML"?Pt(b,Le):Re==="children"?rr(b,Le):C(b,Re,Le,ge)}switch(L){case"input":kt(b,k);break;case"textarea":we(b,k);break;case"select":var $e=b._wrapperState.wasMultiple;b._wrapperState.wasMultiple=!!k.multiple;var Qe=k.value;Qe!=null?re(b,!!k.multiple,Qe,!1):$e!==!!k.multiple&&(k.defaultValue!=null?re(b,!!k.multiple,k.defaultValue,!0):re(b,!!k.multiple,k.multiple?[]:"",!1))}b[ku]=k}catch(ot){rn(o,o.return,ot)}}break;case 6:if(qi(c,o),ya(o),g&4){if(o.stateNode===null)throw Error(r(162));b=o.stateNode,k=o.memoizedProps;try{b.nodeValue=k}catch(ot){rn(o,o.return,ot)}}break;case 3:if(qi(c,o),ya(o),g&4&&h!==null&&h.memoizedState.isDehydrated)try{ns(c.containerInfo)}catch(ot){rn(o,o.return,ot)}break;case 4:qi(c,o),ya(o);break;case 13:qi(c,o),ya(o),b=o.child,b.flags&8192&&(k=b.memoizedState!==null,b.stateNode.isHidden=k,!k||b.alternate!==null&&b.alternate.memoizedState!==null||(Ig=sr())),g&4&&hj(o);break;case 22:if(Re=h!==null&&h.memoizedState!==null,o.mode&1?(bs=(ge=bs)||Re,qi(c,o),bs=ge):qi(c,o),ya(o),g&8192){if(ge=o.memoizedState!==null,(o.stateNode.isHidden=ge)&&!Re&&(o.mode&1)!==0)for(nt=o,Re=o.child;Re!==null;){for(Le=nt=Re;nt!==null;){switch($e=nt,Qe=$e.child,$e.tag){case 0:case 11:case 14:case 15:Ru(4,$e,$e.return);break;case 1:uc($e,$e.return);var it=$e.stateNode;if(typeof it.componentWillUnmount=="function"){g=$e,h=$e.return;try{c=g,it.props=c.memoizedProps,it.state=c.memoizedState,it.componentWillUnmount()}catch(ot){rn(g,h,ot)}}break;case 5:uc($e,$e.return);break;case 22:if($e.memoizedState!==null){yj(Le);continue}}Qe!==null?(Qe.return=$e,nt=Qe):yj(Le)}Re=Re.sibling}e:for(Re=null,Le=o;;){if(Le.tag===5){if(Re===null){Re=Le;try{b=Le.stateNode,ge?(k=b.style,typeof k.setProperty=="function"?k.setProperty("display","none","important"):k.display="none"):(L=Le.stateNode,Y=Le.memoizedProps.style,O=Y!=null&&Y.hasOwnProperty("display")?Y.display:null,L.style.display=ft("display",O))}catch(ot){rn(o,o.return,ot)}}}else if(Le.tag===6){if(Re===null)try{Le.stateNode.nodeValue=ge?"":Le.memoizedProps}catch(ot){rn(o,o.return,ot)}}else if((Le.tag!==22&&Le.tag!==23||Le.memoizedState===null||Le===o)&&Le.child!==null){Le.child.return=Le,Le=Le.child;continue}if(Le===o)break e;for(;Le.sibling===null;){if(Le.return===null||Le.return===o)break e;Re===Le&&(Re=null),Le=Le.return}Re===Le&&(Re=null),Le.sibling.return=Le.return,Le=Le.sibling}}break;case 19:qi(c,o),ya(o),g&4&&hj(o);break;case 21:break;default:qi(c,o),ya(o)}}function ya(o){var c=o.flags;if(c&2){try{e:{for(var h=o.return;h!==null;){if(uj(h)){var g=h;break e}h=h.return}throw Error(r(160))}switch(g.tag){case 5:var b=g.stateNode;g.flags&32&&(rr(b,""),g.flags&=-33);var k=dj(o);Pg(o,k,b);break;case 3:case 4:var O=g.stateNode.containerInfo,L=dj(o);Ag(o,L,O);break;default:throw Error(r(161))}}catch(Y){rn(o,o.return,Y)}o.flags&=-3}c&4096&&(o.flags&=-4097)}function VI(o,c,h){nt=o,pj(o)}function pj(o,c,h){for(var g=(o.mode&1)!==0;nt!==null;){var b=nt,k=b.child;if(b.tag===22&&g){var O=b.memoizedState!==null||Of;if(!O){var L=b.alternate,Y=L!==null&&L.memoizedState!==null||bs;L=Of;var ge=bs;if(Of=O,(bs=Y)&&!ge)for(nt=b;nt!==null;)O=nt,Y=O.child,O.tag===22&&O.memoizedState!==null?vj(b):Y!==null?(Y.return=O,nt=Y):vj(b);for(;k!==null;)nt=k,pj(k),k=k.sibling;nt=b,Of=L,bs=ge}gj(o)}else(b.subtreeFlags&8772)!==0&&k!==null?(k.return=b,nt=k):gj(o)}}function gj(o){for(;nt!==null;){var c=nt;if((c.flags&8772)!==0){var h=c.alternate;try{if((c.flags&8772)!==0)switch(c.tag){case 0:case 11:case 15:bs||Tf(5,c);break;case 1:var g=c.stateNode;if(c.flags&4&&!bs)if(h===null)g.componentDidMount();else{var b=c.elementType===c.type?h.memoizedProps:Wi(c.type,h.memoizedProps);g.componentDidUpdate(b,h.memoizedState,g.__reactInternalSnapshotBeforeUpdate)}var k=c.updateQueue;k!==null&&y1(c,k,g);break;case 3:var O=c.updateQueue;if(O!==null){if(h=null,c.child!==null)switch(c.child.tag){case 5:h=c.child.stateNode;break;case 1:h=c.child.stateNode}y1(c,O,h)}break;case 5:var L=c.stateNode;if(h===null&&c.flags&4){h=L;var Y=c.memoizedProps;switch(c.type){case"button":case"input":case"select":case"textarea":Y.autoFocus&&h.focus();break;case"img":Y.src&&(h.src=Y.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(c.memoizedState===null){var ge=c.alternate;if(ge!==null){var Re=ge.memoizedState;if(Re!==null){var Le=Re.dehydrated;Le!==null&&ns(Le)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(r(163))}bs||c.flags&512&&Eg(c)}catch($e){rn(c,c.return,$e)}}if(c===o){nt=null;break}if(h=c.sibling,h!==null){h.return=c.return,nt=h;break}nt=c.return}}function yj(o){for(;nt!==null;){var c=nt;if(c===o){nt=null;break}var h=c.sibling;if(h!==null){h.return=c.return,nt=h;break}nt=c.return}}function vj(o){for(;nt!==null;){var c=nt;try{switch(c.tag){case 0:case 11:case 15:var h=c.return;try{Tf(4,c)}catch(Y){rn(c,h,Y)}break;case 1:var g=c.stateNode;if(typeof g.componentDidMount=="function"){var b=c.return;try{g.componentDidMount()}catch(Y){rn(c,b,Y)}}var k=c.return;try{Eg(c)}catch(Y){rn(c,k,Y)}break;case 5:var O=c.return;try{Eg(c)}catch(Y){rn(c,O,Y)}}}catch(Y){rn(c,c.return,Y)}if(c===o){nt=null;break}var L=c.sibling;if(L!==null){L.return=c.return,nt=L;break}nt=c.return}}var qI=Math.ceil,If=A.ReactCurrentDispatcher,Og=A.ReactCurrentOwner,_i=A.ReactCurrentBatchConfig,ir=0,qn=null,wn=null,as=0,si=0,dc=jo(0),On=0,Mu=null,ll=0,Df=0,Tg=0,Fu=null,Bs=null,Ig=0,fc=1/0,Ba=null,$f=!1,Dg=null,Eo=null,Rf=!1,Ao=null,Mf=0,Lu=0,$g=null,Ff=-1,Lf=0;function Es(){return(ir&6)!==0?sr():Ff!==-1?Ff:Ff=sr()}function Po(o){return(o.mode&1)===0?1:(ir&2)!==0&&as!==0?as&-as:EI.transition!==null?(Lf===0&&(Lf=la()),Lf):(o=Xt,o!==0||(o=window.event,o=o===void 0?16:F(o.type)),o)}function Hi(o,c,h,g){if(50<Lu)throw Lu=0,$g=null,Error(r(185));Zs(o,h,g),((ir&2)===0||o!==qn)&&(o===qn&&((ir&2)===0&&(Df|=h),On===4&&Oo(o,as)),Ws(o,g),h===1&&ir===0&&(c.mode&1)===0&&(fc=sr()+500,hf&&No()))}function Ws(o,c){var h=o.callbackNode;Bn(o,c);var g=Qs(o,o===qn?as:0);if(g===0)h!==null&&gr(h),o.callbackNode=null,o.callbackPriority=0;else if(c=g&-g,o.callbackPriority!==c){if(h!=null&&gr(h),c===1)o.tag===0?CI(bj.bind(null,o)):i1(bj.bind(null,o)),SI(function(){(ir&6)===0&&No()}),h=null;else{switch(Oa(g)){case 1:h=ee;break;case 4:h=Ce;break;case 16:h=ze;break;case 536870912:h=Je;break;default:h=ze}h=Ej(h,xj.bind(null,o))}o.callbackPriority=c,o.callbackNode=h}}function xj(o,c){if(Ff=-1,Lf=0,(ir&6)!==0)throw Error(r(327));var h=o.callbackNode;if(hc()&&o.callbackNode!==h)return null;var g=Qs(o,o===qn?as:0);if(g===0)return null;if((g&30)!==0||(g&o.expiredLanes)!==0||c)c=zf(o,g);else{c=g;var b=ir;ir|=2;var k=jj();(qn!==o||as!==c)&&(Ba=null,fc=sr()+500,ul(o,c));do try{GI();break}catch(L){wj(o,L)}while(!0);Zp(),If.current=k,ir=b,wn!==null?c=0:(qn=null,as=0,c=On)}if(c!==0){if(c===2&&(b=br(o),b!==0&&(g=b,c=Rg(o,b))),c===1)throw h=Mu,ul(o,0),Oo(o,g),Ws(o,sr()),h;if(c===6)Oo(o,g);else{if(b=o.current.alternate,(g&30)===0&&!HI(b)&&(c=zf(o,g),c===2&&(k=br(o),k!==0&&(g=k,c=Rg(o,k))),c===1))throw h=Mu,ul(o,0),Oo(o,g),Ws(o,sr()),h;switch(o.finishedWork=b,o.finishedLanes=g,c){case 0:case 1:throw Error(r(345));case 2:dl(o,Bs,Ba);break;case 3:if(Oo(o,g),(g&130023424)===g&&(c=Ig+500-sr(),10<c)){if(Qs(o,0)!==0)break;if(b=o.suspendedLanes,(b&g)!==g){Es(),o.pingedLanes|=o.suspendedLanes&b;break}o.timeoutHandle=Bp(dl.bind(null,o,Bs,Ba),c);break}dl(o,Bs,Ba);break;case 4:if(Oo(o,g),(g&4194240)===g)break;for(c=o.eventTimes,b=-1;0<g;){var O=31-St(g);k=1<<O,O=c[O],O>b&&(b=O),g&=~k}if(g=b,g=sr()-g,g=(120>g?120:480>g?480:1080>g?1080:1920>g?1920:3e3>g?3e3:4320>g?4320:1960*qI(g/1960))-g,10<g){o.timeoutHandle=Bp(dl.bind(null,o,Bs,Ba),g);break}dl(o,Bs,Ba);break;case 5:dl(o,Bs,Ba);break;default:throw Error(r(329))}}}return Ws(o,sr()),o.callbackNode===h?xj.bind(null,o):null}function Rg(o,c){var h=Fu;return o.current.memoizedState.isDehydrated&&(ul(o,c).flags|=256),o=zf(o,c),o!==2&&(c=Bs,Bs=h,c!==null&&Mg(c)),o}function Mg(o){Bs===null?Bs=o:Bs.push.apply(Bs,o)}function HI(o){for(var c=o;;){if(c.flags&16384){var h=c.updateQueue;if(h!==null&&(h=h.stores,h!==null))for(var g=0;g<h.length;g++){var b=h[g],k=b.getSnapshot;b=b.value;try{if(!Ui(k(),b))return!1}catch{return!1}}}if(h=c.child,c.subtreeFlags&16384&&h!==null)h.return=c,c=h;else{if(c===o)break;for(;c.sibling===null;){if(c.return===null||c.return===o)return!0;c=c.return}c.sibling.return=c.return,c=c.sibling}}return!0}function Oo(o,c){for(c&=~Tg,c&=~Df,o.suspendedLanes|=c,o.pingedLanes&=~c,o=o.expirationTimes;0<c;){var h=31-St(c),g=1<<h;o[h]=-1,c&=~g}}function bj(o){if((ir&6)!==0)throw Error(r(327));hc();var c=Qs(o,0);if((c&1)===0)return Ws(o,sr()),null;var h=zf(o,c);if(o.tag!==0&&h===2){var g=br(o);g!==0&&(c=g,h=Rg(o,g))}if(h===1)throw h=Mu,ul(o,0),Oo(o,c),Ws(o,sr()),h;if(h===6)throw Error(r(345));return o.finishedWork=o.current.alternate,o.finishedLanes=c,dl(o,Bs,Ba),Ws(o,sr()),null}function Fg(o,c){var h=ir;ir|=1;try{return o(c)}finally{ir=h,ir===0&&(fc=sr()+500,hf&&No())}}function cl(o){Ao!==null&&Ao.tag===0&&(ir&6)===0&&hc();var c=ir;ir|=1;var h=_i.transition,g=Xt;try{if(_i.transition=null,Xt=1,o)return o()}finally{Xt=g,_i.transition=h,ir=c,(ir&6)===0&&No()}}function Lg(){si=dc.current,Rr(dc)}function ul(o,c){o.finishedWork=null,o.finishedLanes=0;var h=o.timeoutHandle;if(h!==-1&&(o.timeoutHandle=-1,jI(h)),wn!==null)for(h=wn.return;h!==null;){var g=h;switch(Gp(g),g.tag){case 1:g=g.type.childContextTypes,g!=null&&df();break;case 3:lc(),Rr(Ls),Rr(ys),og();break;case 5:ig(g);break;case 4:lc();break;case 13:Rr(Xr);break;case 19:Rr(Xr);break;case 10:eg(g.type._context);break;case 22:case 23:Lg()}h=h.return}if(qn=o,wn=o=To(o.current,null),as=si=c,On=0,Mu=null,Tg=Df=ll=0,Bs=Fu=null,il!==null){for(c=0;c<il.length;c++)if(h=il[c],g=h.interleaved,g!==null){h.interleaved=null;var b=g.next,k=h.pending;if(k!==null){var O=k.next;k.next=b,g.next=O}h.pending=g}il=null}return o}function wj(o,c){do{var h=wn;try{if(Zp(),Sf.current=Cf,Nf){for(var g=Qr.memoizedState;g!==null;){var b=g.queue;b!==null&&(b.pending=null),g=g.next}Nf=!1}if(ol=0,Vn=Pn=Qr=null,Ou=!1,Tu=0,Og.current=null,h===null||h.return===null){On=1,Mu=c,wn=null;break}e:{var k=o,O=h.return,L=h,Y=c;if(c=as,L.flags|=32768,Y!==null&&typeof Y=="object"&&typeof Y.then=="function"){var ge=Y,Re=L,Le=Re.tag;if((Re.mode&1)===0&&(Le===0||Le===11||Le===15)){var $e=Re.alternate;$e?(Re.updateQueue=$e.updateQueue,Re.memoizedState=$e.memoizedState,Re.lanes=$e.lanes):(Re.updateQueue=null,Re.memoizedState=null)}var Qe=H1(O);if(Qe!==null){Qe.flags&=-257,K1(Qe,O,L,k,c),Qe.mode&1&&q1(k,ge,c),c=Qe,Y=ge;var it=c.updateQueue;if(it===null){var ot=new Set;ot.add(Y),c.updateQueue=ot}else it.add(Y);break e}else{if((c&1)===0){q1(k,ge,c),zg();break e}Y=Error(r(426))}}else if(qr&&L.mode&1){var un=H1(O);if(un!==null){(un.flags&65536)===0&&(un.flags|=256),K1(un,O,L,k,c),Xp(cc(Y,L));break e}}k=Y=cc(Y,L),On!==4&&(On=2),Fu===null?Fu=[k]:Fu.push(k),k=O;do{switch(k.tag){case 3:k.flags|=65536,c&=-c,k.lanes|=c;var oe=W1(k,Y,c);g1(k,oe);break e;case 1:L=Y;var Q=k.type,ue=k.stateNode;if((k.flags&128)===0&&(typeof Q.getDerivedStateFromError=="function"||ue!==null&&typeof ue.componentDidCatch=="function"&&(Eo===null||!Eo.has(ue)))){k.flags|=65536,c&=-c,k.lanes|=c;var Ve=V1(k,L,c);g1(k,Ve);break e}}k=k.return}while(k!==null)}Nj(h)}catch(ut){c=ut,wn===h&&h!==null&&(wn=h=h.return);continue}break}while(!0)}function jj(){var o=If.current;return If.current=Cf,o===null?Cf:o}function zg(){(On===0||On===3||On===2)&&(On=4),qn===null||(ll&268435455)===0&&(Df&268435455)===0||Oo(qn,as)}function zf(o,c){var h=ir;ir|=2;var g=jj();(qn!==o||as!==c)&&(Ba=null,ul(o,c));do try{KI();break}catch(b){wj(o,b)}while(!0);if(Zp(),ir=h,If.current=g,wn!==null)throw Error(r(261));return qn=null,as=0,On}function KI(){for(;wn!==null;)Sj(wn)}function GI(){for(;wn!==null&&!An();)Sj(wn)}function Sj(o){var c=Cj(o.alternate,o,si);o.memoizedProps=o.pendingProps,c===null?Nj(o):wn=c,Og.current=null}function Nj(o){var c=o;do{var h=c.alternate;if(o=c.return,(c.flags&32768)===0){if(h=zI(h,c,si),h!==null){wn=h;return}}else{if(h=UI(h,c),h!==null){h.flags&=32767,wn=h;return}if(o!==null)o.flags|=32768,o.subtreeFlags=0,o.deletions=null;else{On=6,wn=null;return}}if(c=c.sibling,c!==null){wn=c;return}wn=c=o}while(c!==null);On===0&&(On=5)}function dl(o,c,h){var g=Xt,b=_i.transition;try{_i.transition=null,Xt=1,YI(o,c,h,g)}finally{_i.transition=b,Xt=g}return null}function YI(o,c,h,g){do hc();while(Ao!==null);if((ir&6)!==0)throw Error(r(327));h=o.finishedWork;var b=o.finishedLanes;if(h===null)return null;if(o.finishedWork=null,o.finishedLanes=0,h===o.current)throw Error(r(177));o.callbackNode=null,o.callbackPriority=0;var k=h.lanes|h.childLanes;if(Ms(o,k),o===qn&&(wn=qn=null,as=0),(h.subtreeFlags&2064)===0&&(h.flags&2064)===0||Rf||(Rf=!0,Ej(ze,function(){return hc(),null})),k=(h.flags&15990)!==0,(h.subtreeFlags&15990)!==0||k){k=_i.transition,_i.transition=null;var O=Xt;Xt=1;var L=ir;ir|=4,Og.current=null,WI(o,h),mj(h,o),pI(zp),zi=!!Lp,zp=Lp=null,o.current=h,VI(h),bi(),ir=L,Xt=O,_i.transition=k}else o.current=h;if(Rf&&(Rf=!1,Ao=o,Mf=b),k=o.pendingLanes,k===0&&(Eo=null),ht(h.stateNode),Ws(o,sr()),c!==null)for(g=o.onRecoverableError,h=0;h<c.length;h++)b=c[h],g(b.value,{componentStack:b.stack,digest:b.digest});if($f)throw $f=!1,o=Dg,Dg=null,o;return(Mf&1)!==0&&o.tag!==0&&hc(),k=o.pendingLanes,(k&1)!==0?o===$g?Lu++:(Lu=0,$g=o):Lu=0,No(),null}function hc(){if(Ao!==null){var o=Oa(Mf),c=_i.transition,h=Xt;try{if(_i.transition=null,Xt=16>o?16:o,Ao===null)var g=!1;else{if(o=Ao,Ao=null,Mf=0,(ir&6)!==0)throw Error(r(331));var b=ir;for(ir|=4,nt=o.current;nt!==null;){var k=nt,O=k.child;if((nt.flags&16)!==0){var L=k.deletions;if(L!==null){for(var Y=0;Y<L.length;Y++){var ge=L[Y];for(nt=ge;nt!==null;){var Re=nt;switch(Re.tag){case 0:case 11:case 15:Ru(8,Re,k)}var Le=Re.child;if(Le!==null)Le.return=Re,nt=Le;else for(;nt!==null;){Re=nt;var $e=Re.sibling,Qe=Re.return;if(cj(Re),Re===ge){nt=null;break}if($e!==null){$e.return=Qe,nt=$e;break}nt=Qe}}}var it=k.alternate;if(it!==null){var ot=it.child;if(ot!==null){it.child=null;do{var un=ot.sibling;ot.sibling=null,ot=un}while(ot!==null)}}nt=k}}if((k.subtreeFlags&2064)!==0&&O!==null)O.return=k,nt=O;else e:for(;nt!==null;){if(k=nt,(k.flags&2048)!==0)switch(k.tag){case 0:case 11:case 15:Ru(9,k,k.return)}var oe=k.sibling;if(oe!==null){oe.return=k.return,nt=oe;break e}nt=k.return}}var Q=o.current;for(nt=Q;nt!==null;){O=nt;var ue=O.child;if((O.subtreeFlags&2064)!==0&&ue!==null)ue.return=O,nt=ue;else e:for(O=Q;nt!==null;){if(L=nt,(L.flags&2048)!==0)try{switch(L.tag){case 0:case 11:case 15:Tf(9,L)}}catch(ut){rn(L,L.return,ut)}if(L===O){nt=null;break e}var Ve=L.sibling;if(Ve!==null){Ve.return=L.return,nt=Ve;break e}nt=L.return}}if(ir=b,No(),ct&&typeof ct.onPostCommitFiberRoot=="function")try{ct.onPostCommitFiberRoot(Oe,o)}catch{}g=!0}return g}finally{Xt=h,_i.transition=c}}return!1}function kj(o,c,h){c=cc(h,c),c=W1(o,c,1),o=_o(o,c,1),c=Es(),o!==null&&(Zs(o,1,c),Ws(o,c))}function rn(o,c,h){if(o.tag===3)kj(o,o,h);else for(;c!==null;){if(c.tag===3){kj(c,o,h);break}else if(c.tag===1){var g=c.stateNode;if(typeof c.type.getDerivedStateFromError=="function"||typeof g.componentDidCatch=="function"&&(Eo===null||!Eo.has(g))){o=cc(h,o),o=V1(c,o,1),c=_o(c,o,1),o=Es(),c!==null&&(Zs(c,1,o),Ws(c,o));break}}c=c.return}}function JI(o,c,h){var g=o.pingCache;g!==null&&g.delete(c),c=Es(),o.pingedLanes|=o.suspendedLanes&h,qn===o&&(as&h)===h&&(On===4||On===3&&(as&130023424)===as&&500>sr()-Ig?ul(o,0):Tg|=h),Ws(o,c)}function _j(o,c){c===0&&((o.mode&1)===0?c=1:(c=Bt,Bt<<=1,(Bt&130023424)===0&&(Bt=4194304)));var h=Es();o=La(o,c),o!==null&&(Zs(o,c,h),Ws(o,h))}function XI(o){var c=o.memoizedState,h=0;c!==null&&(h=c.retryLane),_j(o,h)}function QI(o,c){var h=0;switch(o.tag){case 13:var g=o.stateNode,b=o.memoizedState;b!==null&&(h=b.retryLane);break;case 19:g=o.stateNode;break;default:throw Error(r(314))}g!==null&&g.delete(c),_j(o,h)}var Cj;Cj=function(o,c,h){if(o!==null)if(o.memoizedProps!==c.pendingProps||Ls.current)Us=!0;else{if((o.lanes&h)===0&&(c.flags&128)===0)return Us=!1,LI(o,c,h);Us=(o.flags&131072)!==0}else Us=!1,qr&&(c.flags&1048576)!==0&&a1(c,pf,c.index);switch(c.lanes=0,c.tag){case 2:var g=c.type;Pf(o,c),o=c.pendingProps;var b=tc(c,ys.current);oc(c,h),b=ug(null,c,g,o,b,h);var k=dg();return c.flags|=1,typeof b=="object"&&b!==null&&typeof b.render=="function"&&b.$$typeof===void 0?(c.tag=1,c.memoizedState=null,c.updateQueue=null,zs(g)?(k=!0,ff(c)):k=!1,c.memoizedState=b.state!==null&&b.state!==void 0?b.state:null,ng(c),b.updater=Ef,c.stateNode=b,b._reactInternals=c,yg(c,g,o,h),c=wg(null,c,g,!0,k,h)):(c.tag=0,qr&&k&&Kp(c),Cs(null,c,b,h),c=c.child),c;case 16:g=c.elementType;e:{switch(Pf(o,c),o=c.pendingProps,b=g._init,g=b(g._payload),c.type=g,b=c.tag=eD(g),o=Wi(g,o),b){case 0:c=bg(null,c,g,o,h);break e;case 1:c=Z1(null,c,g,o,h);break e;case 11:c=G1(null,c,g,o,h);break e;case 14:c=Y1(null,c,g,Wi(g.type,o),h);break e}throw Error(r(306,g,""))}return c;case 0:return g=c.type,b=c.pendingProps,b=c.elementType===g?b:Wi(g,b),bg(o,c,g,b,h);case 1:return g=c.type,b=c.pendingProps,b=c.elementType===g?b:Wi(g,b),Z1(o,c,g,b,h);case 3:e:{if(ej(c),o===null)throw Error(r(387));g=c.pendingProps,k=c.memoizedState,b=k.element,p1(o,c),wf(c,g,null,h);var O=c.memoizedState;if(g=O.element,k.isDehydrated)if(k={element:g,isDehydrated:!1,cache:O.cache,pendingSuspenseBoundaries:O.pendingSuspenseBoundaries,transitions:O.transitions},c.updateQueue.baseState=k,c.memoizedState=k,c.flags&256){b=cc(Error(r(423)),c),c=tj(o,c,g,h,b);break e}else if(g!==b){b=cc(Error(r(424)),c),c=tj(o,c,g,h,b);break e}else for(ni=wo(c.stateNode.containerInfo.firstChild),ri=c,qr=!0,Bi=null,h=h1(c,null,g,h),c.child=h;h;)h.flags=h.flags&-3|4096,h=h.sibling;else{if(sc(),g===b){c=Ua(o,c,h);break e}Cs(o,c,g,h)}c=c.child}return c;case 5:return v1(c),o===null&&Jp(c),g=c.type,b=c.pendingProps,k=o!==null?o.memoizedProps:null,O=b.children,Up(g,b)?O=null:k!==null&&Up(g,k)&&(c.flags|=32),Q1(o,c),Cs(o,c,O,h),c.child;case 6:return o===null&&Jp(c),null;case 13:return rj(o,c,h);case 4:return sg(c,c.stateNode.containerInfo),g=c.pendingProps,o===null?c.child=ic(c,null,g,h):Cs(o,c,g,h),c.child;case 11:return g=c.type,b=c.pendingProps,b=c.elementType===g?b:Wi(g,b),G1(o,c,g,b,h);case 7:return Cs(o,c,c.pendingProps,h),c.child;case 8:return Cs(o,c,c.pendingProps.children,h),c.child;case 12:return Cs(o,c,c.pendingProps.children,h),c.child;case 10:e:{if(g=c.type._context,b=c.pendingProps,k=c.memoizedProps,O=b.value,Ar(vf,g._currentValue),g._currentValue=O,k!==null)if(Ui(k.value,O)){if(k.children===b.children&&!Ls.current){c=Ua(o,c,h);break e}}else for(k=c.child,k!==null&&(k.return=c);k!==null;){var L=k.dependencies;if(L!==null){O=k.child;for(var Y=L.firstContext;Y!==null;){if(Y.context===g){if(k.tag===1){Y=za(-1,h&-h),Y.tag=2;var ge=k.updateQueue;if(ge!==null){ge=ge.shared;var Re=ge.pending;Re===null?Y.next=Y:(Y.next=Re.next,Re.next=Y),ge.pending=Y}}k.lanes|=h,Y=k.alternate,Y!==null&&(Y.lanes|=h),tg(k.return,h,c),L.lanes|=h;break}Y=Y.next}}else if(k.tag===10)O=k.type===c.type?null:k.child;else if(k.tag===18){if(O=k.return,O===null)throw Error(r(341));O.lanes|=h,L=O.alternate,L!==null&&(L.lanes|=h),tg(O,h,c),O=k.sibling}else O=k.child;if(O!==null)O.return=k;else for(O=k;O!==null;){if(O===c){O=null;break}if(k=O.sibling,k!==null){k.return=O.return,O=k;break}O=O.return}k=O}Cs(o,c,b.children,h),c=c.child}return c;case 9:return b=c.type,g=c.pendingProps.children,oc(c,h),b=Ni(b),g=g(b),c.flags|=1,Cs(o,c,g,h),c.child;case 14:return g=c.type,b=Wi(g,c.pendingProps),b=Wi(g.type,b),Y1(o,c,g,b,h);case 15:return J1(o,c,c.type,c.pendingProps,h);case 17:return g=c.type,b=c.pendingProps,b=c.elementType===g?b:Wi(g,b),Pf(o,c),c.tag=1,zs(g)?(o=!0,ff(c)):o=!1,oc(c,h),U1(c,g,b),yg(c,g,b,h),wg(null,c,g,!0,o,h);case 19:return sj(o,c,h);case 22:return X1(o,c,h)}throw Error(r(156,c.tag))};function Ej(o,c){return Br(o,c)}function ZI(o,c,h,g){this.tag=o,this.key=h,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=c,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=g,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ci(o,c,h,g){return new ZI(o,c,h,g)}function Ug(o){return o=o.prototype,!(!o||!o.isReactComponent)}function eD(o){if(typeof o=="function")return Ug(o)?1:0;if(o!=null){if(o=o.$$typeof,o===K)return 11;if(o===ne)return 14}return 2}function To(o,c){var h=o.alternate;return h===null?(h=Ci(o.tag,c,o.key,o.mode),h.elementType=o.elementType,h.type=o.type,h.stateNode=o.stateNode,h.alternate=o,o.alternate=h):(h.pendingProps=c,h.type=o.type,h.flags=0,h.subtreeFlags=0,h.deletions=null),h.flags=o.flags&14680064,h.childLanes=o.childLanes,h.lanes=o.lanes,h.child=o.child,h.memoizedProps=o.memoizedProps,h.memoizedState=o.memoizedState,h.updateQueue=o.updateQueue,c=o.dependencies,h.dependencies=c===null?null:{lanes:c.lanes,firstContext:c.firstContext},h.sibling=o.sibling,h.index=o.index,h.ref=o.ref,h}function Uf(o,c,h,g,b,k){var O=2;if(g=o,typeof o=="function")Ug(o)&&(O=1);else if(typeof o=="string")O=5;else e:switch(o){case z:return fl(h.children,b,k,c);case J:O=8,b|=8;break;case H:return o=Ci(12,h,c,b|2),o.elementType=H,o.lanes=k,o;case ae:return o=Ci(13,h,c,b),o.elementType=ae,o.lanes=k,o;case U:return o=Ci(19,h,c,b),o.elementType=U,o.lanes=k,o;case ie:return Bf(h,b,k,c);default:if(typeof o=="object"&&o!==null)switch(o.$$typeof){case fe:O=10;break e;case X:O=9;break e;case K:O=11;break e;case ne:O=14;break e;case G:O=16,g=null;break e}throw Error(r(130,o==null?o:typeof o,""))}return c=Ci(O,h,c,b),c.elementType=o,c.type=g,c.lanes=k,c}function fl(o,c,h,g){return o=Ci(7,o,g,c),o.lanes=h,o}function Bf(o,c,h,g){return o=Ci(22,o,g,c),o.elementType=ie,o.lanes=h,o.stateNode={isHidden:!1},o}function Bg(o,c,h){return o=Ci(6,o,null,c),o.lanes=h,o}function Wg(o,c,h){return c=Ci(4,o.children!==null?o.children:[],o.key,c),c.lanes=h,c.stateNode={containerInfo:o.containerInfo,pendingChildren:null,implementation:o.implementation},c}function tD(o,c,h,g,b){this.tag=c,this.containerInfo=o,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=fr(0),this.expirationTimes=fr(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=fr(0),this.identifierPrefix=g,this.onRecoverableError=b,this.mutableSourceEagerHydrationData=null}function Vg(o,c,h,g,b,k,O,L,Y){return o=new tD(o,c,h,L,Y),c===1?(c=1,k===!0&&(c|=8)):c=0,k=Ci(3,null,null,c),o.current=k,k.stateNode=o,k.memoizedState={element:g,isDehydrated:h,cache:null,transitions:null,pendingSuspenseBoundaries:null},ng(k),o}function rD(o,c,h){var g=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:P,key:g==null?null:""+g,children:o,containerInfo:c,implementation:h}}function Aj(o){if(!o)return So;o=o._reactInternals;e:{if(Ir(o)!==o||o.tag!==1)throw Error(r(170));var c=o;do{switch(c.tag){case 3:c=c.stateNode.context;break e;case 1:if(zs(c.type)){c=c.stateNode.__reactInternalMemoizedMergedChildContext;break e}}c=c.return}while(c!==null);throw Error(r(171))}if(o.tag===1){var h=o.type;if(zs(h))return n1(o,h,c)}return c}function Pj(o,c,h,g,b,k,O,L,Y){return o=Vg(h,g,!0,o,b,k,O,L,Y),o.context=Aj(null),h=o.current,g=Es(),b=Po(h),k=za(g,b),k.callback=c??null,_o(h,k,b),o.current.lanes=b,Zs(o,b,g),Ws(o,g),o}function Wf(o,c,h,g){var b=c.current,k=Es(),O=Po(b);return h=Aj(h),c.context===null?c.context=h:c.pendingContext=h,c=za(k,O),c.payload={element:o},g=g===void 0?null:g,g!==null&&(c.callback=g),o=_o(b,c,O),o!==null&&(Hi(o,b,O,k),bf(o,b,O)),O}function Vf(o){if(o=o.current,!o.child)return null;switch(o.child.tag){case 5:return o.child.stateNode;default:return o.child.stateNode}}function Oj(o,c){if(o=o.memoizedState,o!==null&&o.dehydrated!==null){var h=o.retryLane;o.retryLane=h!==0&&h<c?h:c}}function qg(o,c){Oj(o,c),(o=o.alternate)&&Oj(o,c)}function nD(){return null}var Tj=typeof reportError=="function"?reportError:function(o){console.error(o)};function Hg(o){this._internalRoot=o}qf.prototype.render=Hg.prototype.render=function(o){var c=this._internalRoot;if(c===null)throw Error(r(409));Wf(o,c,null,null)},qf.prototype.unmount=Hg.prototype.unmount=function(){var o=this._internalRoot;if(o!==null){this._internalRoot=null;var c=o.containerInfo;cl(function(){Wf(null,o,null,null)}),c[$a]=null}};function qf(o){this._internalRoot=o}qf.prototype.unstable_scheduleHydration=function(o){if(o){var c=vn();o={blockedOn:null,target:o,priority:c};for(var h=0;h<cn.length&&c!==0&&c<cn[h].priority;h++);cn.splice(h,0,o),h===0&&Ia(o)}};function Kg(o){return!(!o||o.nodeType!==1&&o.nodeType!==9&&o.nodeType!==11)}function Hf(o){return!(!o||o.nodeType!==1&&o.nodeType!==9&&o.nodeType!==11&&(o.nodeType!==8||o.nodeValue!==" react-mount-point-unstable "))}function Ij(){}function sD(o,c,h,g,b){if(b){if(typeof g=="function"){var k=g;g=function(){var ge=Vf(O);k.call(ge)}}var O=Pj(c,g,o,0,null,!1,!1,"",Ij);return o._reactRootContainer=O,o[$a]=O.current,Su(o.nodeType===8?o.parentNode:o),cl(),O}for(;b=o.lastChild;)o.removeChild(b);if(typeof g=="function"){var L=g;g=function(){var ge=Vf(Y);L.call(ge)}}var Y=Vg(o,0,!1,null,null,!1,!1,"",Ij);return o._reactRootContainer=Y,o[$a]=Y.current,Su(o.nodeType===8?o.parentNode:o),cl(function(){Wf(c,Y,h,g)}),Y}function Kf(o,c,h,g,b){var k=h._reactRootContainer;if(k){var O=k;if(typeof b=="function"){var L=b;b=function(){var Y=Vf(O);L.call(Y)}}Wf(c,O,o,b)}else O=sD(h,c,o,b,g);return Vf(O)}Ta=function(o){switch(o.tag){case 3:var c=o.stateNode;if(c.current.memoizedState.isDehydrated){var h=yn(c.pendingLanes);h!==0&&(ln(c,h|1),Ws(c,sr()),(ir&6)===0&&(fc=sr()+500,No()))}break;case 13:cl(function(){var g=La(o,1);if(g!==null){var b=Es();Hi(g,o,1,b)}}),qg(o,1)}},ei=function(o){if(o.tag===13){var c=La(o,134217728);if(c!==null){var h=Es();Hi(c,o,134217728,h)}qg(o,134217728)}},Fs=function(o){if(o.tag===13){var c=Po(o),h=La(o,c);if(h!==null){var g=Es();Hi(h,o,c,g)}qg(o,c)}},vn=function(){return Xt},ca=function(o,c){var h=Xt;try{return Xt=o,c()}finally{Xt=h}},zt=function(o,c,h){switch(c){case"input":if(kt(o,h),c=h.name,h.type==="radio"&&c!=null){for(h=o;h.parentNode;)h=h.parentNode;for(h=h.querySelectorAll("input[name="+JSON.stringify(""+c)+'][type="radio"]'),c=0;c<h.length;c++){var g=h[c];if(g!==o&&g.form===o.form){var b=uf(g);if(!b)throw Error(r(90));M(g),kt(g,b)}}}break;case"textarea":we(o,h);break;case"select":c=h.value,c!=null&&re(o,!!h.multiple,c,!1)}},mr=Fg,or=cl;var iD={usingClientEntryPoint:!1,Events:[_u,Zl,uf,gn,Jt,Fg]},zu={findFiberByHostInstance:tl,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},aD={bundleType:zu.bundleType,version:zu.version,rendererPackageName:zu.rendererPackageName,rendererConfig:zu.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:A.ReactCurrentDispatcher,findHostInstanceByFiber:function(o){return o=on(o),o===null?null:o.stateNode},findFiberByHostInstance:zu.findFiberByHostInstance||nD,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Gf=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Gf.isDisabled&&Gf.supportsFiber)try{Oe=Gf.inject(aD),ct=Gf}catch{}}return Vs.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=iD,Vs.createPortal=function(o,c){var h=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Kg(c))throw Error(r(200));return rD(o,c,null,h)},Vs.createRoot=function(o,c){if(!Kg(o))throw Error(r(299));var h=!1,g="",b=Tj;return c!=null&&(c.unstable_strictMode===!0&&(h=!0),c.identifierPrefix!==void 0&&(g=c.identifierPrefix),c.onRecoverableError!==void 0&&(b=c.onRecoverableError)),c=Vg(o,1,!1,null,null,h,!1,g,b),o[$a]=c.current,Su(o.nodeType===8?o.parentNode:o),new Hg(c)},Vs.findDOMNode=function(o){if(o==null)return null;if(o.nodeType===1)return o;var c=o._reactInternals;if(c===void 0)throw typeof o.render=="function"?Error(r(188)):(o=Object.keys(o).join(","),Error(r(268,o)));return o=on(c),o=o===null?null:o.stateNode,o},Vs.flushSync=function(o){return cl(o)},Vs.hydrate=function(o,c,h){if(!Hf(c))throw Error(r(200));return Kf(null,o,c,!0,h)},Vs.hydrateRoot=function(o,c,h){if(!Kg(o))throw Error(r(405));var g=h!=null&&h.hydratedSources||null,b=!1,k="",O=Tj;if(h!=null&&(h.unstable_strictMode===!0&&(b=!0),h.identifierPrefix!==void 0&&(k=h.identifierPrefix),h.onRecoverableError!==void 0&&(O=h.onRecoverableError)),c=Pj(c,null,o,1,h??null,b,!1,k,O),o[$a]=c.current,Su(o),g)for(o=0;o<g.length;o++)h=g[o],b=h._getVersion,b=b(h._source),c.mutableSourceEagerHydrationData==null?c.mutableSourceEagerHydrationData=[h,b]:c.mutableSourceEagerHydrationData.push(h,b);return new qf(c)},Vs.render=function(o,c,h){if(!Hf(c))throw Error(r(200));return Kf(null,o,c,!1,h)},Vs.unmountComponentAtNode=function(o){if(!Hf(o))throw Error(r(40));return o._reactRootContainer?(cl(function(){Kf(null,null,o,!1,function(){o._reactRootContainer=null,o[$a]=null})}),!0):!1},Vs.unstable_batchedUpdates=Fg,Vs.unstable_renderSubtreeIntoContainer=function(o,c,h,g){if(!Hf(h))throw Error(r(200));if(o==null||o._reactInternals===void 0)throw Error(r(38));return Kf(o,c,h,!1,g)},Vs.version="18.3.1-next-f1338f8080-20240426",Vs}var Uj;function $C(){if(Uj)return Xg.exports;Uj=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),Xg.exports=vD(),Xg.exports}var Bj;function xD(){if(Bj)return Yf;Bj=1;var e=$C();return Yf.createRoot=e.createRoot,Yf.hydrateRoot=e.hydrateRoot,Yf}var bD=xD();const wD=ia(bD);/**
 * react-router v7.9.4
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var Wj="popstate";function jD(e={}){function t(n,s){let{pathname:a,search:l,hash:u}=n.location;return J0("",{pathname:a,search:l,hash:u},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function r(n,s){return typeof s=="string"?s:pd(s)}return ND(t,r,null,e)}function Kr(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function Ti(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function SD(){return Math.random().toString(36).substring(2,10)}function Vj(e,t){return{usr:e.state,key:e.key,idx:t}}function J0(e,t,r=null,n){return{pathname:typeof e=="string"?e:e.pathname,search:"",hash:"",...typeof t=="string"?Zc(t):t,state:r,key:t&&t.key||n||SD()}}function pd({pathname:e="/",search:t="",hash:r=""}){return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function Zc(e){let t={};if(e){let r=e.indexOf("#");r>=0&&(t.hash=e.substring(r),e=e.substring(0,r));let n=e.indexOf("?");n>=0&&(t.search=e.substring(n),e=e.substring(0,n)),e&&(t.pathname=e)}return t}function ND(e,t,r,n={}){let{window:s=document.defaultView,v5Compat:a=!1}=n,l=s.history,u="POP",d=null,m=f();m==null&&(m=0,l.replaceState({...l.state,idx:m},""));function f(){return(l.state||{idx:null}).idx}function p(){u="POP";let S=f(),_=S==null?null:S-m;m=S,d&&d({action:u,location:w.location,delta:_})}function y(S,_){u="PUSH";let E=J0(w.location,S,_);m=f()+1;let C=Vj(E,m),A=w.createHref(E);try{l.pushState(C,"",A)}catch(T){if(T instanceof DOMException&&T.name==="DataCloneError")throw T;s.location.assign(A)}a&&d&&d({action:u,location:w.location,delta:1})}function x(S,_){u="REPLACE";let E=J0(w.location,S,_);m=f();let C=Vj(E,m),A=w.createHref(E);l.replaceState(C,"",A),a&&d&&d({action:u,location:w.location,delta:0})}function j(S){return kD(S)}let w={get action(){return u},get location(){return e(s,l)},listen(S){if(d)throw new Error("A history only accepts one active listener");return s.addEventListener(Wj,p),d=S,()=>{s.removeEventListener(Wj,p),d=null}},createHref(S){return t(s,S)},createURL:j,encodeLocation(S){let _=j(S);return{pathname:_.pathname,search:_.search,hash:_.hash}},push:y,replace:x,go(S){return l.go(S)}};return w}function kD(e,t=!1){let r="http://localhost";typeof window<"u"&&(r=window.location.origin!=="null"?window.location.origin:window.location.href),Kr(r,"No window.location.(origin|href) available to create URL");let n=typeof e=="string"?e:pd(e);return n=n.replace(/ $/,"%20"),!t&&n.startsWith("//")&&(n=r+n),new URL(n,r)}function RC(e,t,r="/"){return _D(e,t,r,!1)}function _D(e,t,r,n){let s=typeof t=="string"?Zc(t):t,a=eo(s.pathname||"/",r);if(a==null)return null;let l=MC(e);CD(l);let u=null;for(let d=0;u==null&&d<l.length;++d){let m=FD(a);u=RD(l[d],m,n)}return u}function MC(e,t=[],r=[],n="",s=!1){let a=(l,u,d=s,m)=>{let f={relativePath:m===void 0?l.path||"":m,caseSensitive:l.caseSensitive===!0,childrenIndex:u,route:l};if(f.relativePath.startsWith("/")){if(!f.relativePath.startsWith(n)&&d)return;Kr(f.relativePath.startsWith(n),`Absolute route path "${f.relativePath}" nested under path "${n}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),f.relativePath=f.relativePath.slice(n.length)}let p=Ja([n,f.relativePath]),y=r.concat(f);l.children&&l.children.length>0&&(Kr(l.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${p}".`),MC(l.children,t,y,p,d)),!(l.path==null&&!l.index)&&t.push({path:p,score:DD(p,l.index),routesMeta:y})};return e.forEach((l,u)=>{var d;if(l.path===""||!((d=l.path)!=null&&d.includes("?")))a(l,u);else for(let m of FC(l.path))a(l,u,!0,m)}),t}function FC(e){let t=e.split("/");if(t.length===0)return[];let[r,...n]=t,s=r.endsWith("?"),a=r.replace(/\?$/,"");if(n.length===0)return s?[a,""]:[a];let l=FC(n.join("/")),u=[];return u.push(...l.map(d=>d===""?a:[a,d].join("/"))),s&&u.push(...l),u.map(d=>e.startsWith("/")&&d===""?"/":d)}function CD(e){e.sort((t,r)=>t.score!==r.score?r.score-t.score:$D(t.routesMeta.map(n=>n.childrenIndex),r.routesMeta.map(n=>n.childrenIndex)))}var ED=/^:[\w-]+$/,AD=3,PD=2,OD=1,TD=10,ID=-2,qj=e=>e==="*";function DD(e,t){let r=e.split("/"),n=r.length;return r.some(qj)&&(n+=ID),t&&(n+=PD),r.filter(s=>!qj(s)).reduce((s,a)=>s+(ED.test(a)?AD:a===""?OD:TD),n)}function $D(e,t){return e.length===t.length&&e.slice(0,-1).every((n,s)=>n===t[s])?e[e.length-1]-t[t.length-1]:0}function RD(e,t,r=!1){let{routesMeta:n}=e,s={},a="/",l=[];for(let u=0;u<n.length;++u){let d=n[u],m=u===n.length-1,f=a==="/"?t:t.slice(a.length)||"/",p=Oh({path:d.relativePath,caseSensitive:d.caseSensitive,end:m},f),y=d.route;if(!p&&m&&r&&!n[n.length-1].route.index&&(p=Oh({path:d.relativePath,caseSensitive:d.caseSensitive,end:!1},f)),!p)return null;Object.assign(s,p.params),l.push({params:s,pathname:Ja([a,p.pathname]),pathnameBase:BD(Ja([a,p.pathnameBase])),route:y}),p.pathnameBase!=="/"&&(a=Ja([a,p.pathnameBase]))}return l}function Oh(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[r,n]=MD(e.path,e.caseSensitive,e.end),s=t.match(r);if(!s)return null;let a=s[0],l=a.replace(/(.)\/+$/,"$1"),u=s.slice(1);return{params:n.reduce((m,{paramName:f,isOptional:p},y)=>{if(f==="*"){let j=u[y]||"";l=a.slice(0,a.length-j.length).replace(/(.)\/+$/,"$1")}const x=u[y];return p&&!x?m[f]=void 0:m[f]=(x||"").replace(/%2F/g,"/"),m},{}),pathname:a,pathnameBase:l,pattern:e}}function MD(e,t=!1,r=!0){Ti(e==="*"||!e.endsWith("*")||e.endsWith("/*"),`Route path "${e}" will be treated as if it were "${e.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${e.replace(/\*$/,"/*")}".`);let n=[],s="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(l,u,d)=>(n.push({paramName:u,isOptional:d!=null}),d?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return e.endsWith("*")?(n.push({paramName:"*"}),s+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?s+="\\/*$":e!==""&&e!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,t?void 0:"i"),n]}function FD(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return Ti(!1,`The URL path "${e}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${t}).`),e}}function eo(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let r=t.endsWith("/")?t.length-1:t.length,n=e.charAt(r);return n&&n!=="/"?null:e.slice(r)||"/"}function LD(e,t="/"){let{pathname:r,search:n="",hash:s=""}=typeof e=="string"?Zc(e):e;return{pathname:r?r.startsWith("/")?r:zD(r,t):t,search:WD(n),hash:VD(s)}}function zD(e,t){let r=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(s=>{s===".."?r.length>1&&r.pop():s!=="."&&r.push(s)}),r.length>1?r.join("/"):"/"}function ey(e,t,r,n){return`Cannot include a '${e}' character in a manually specified \`to.${t}\` field [${JSON.stringify(n)}].  Please separate it out to the \`to.${r}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function UD(e){return e.filter((t,r)=>r===0||t.route.path&&t.route.path.length>0)}function bx(e){let t=UD(e);return t.map((r,n)=>n===t.length-1?r.pathname:r.pathnameBase)}function wx(e,t,r,n=!1){let s;typeof e=="string"?s=Zc(e):(s={...e},Kr(!s.pathname||!s.pathname.includes("?"),ey("?","pathname","search",s)),Kr(!s.pathname||!s.pathname.includes("#"),ey("#","pathname","hash",s)),Kr(!s.search||!s.search.includes("#"),ey("#","search","hash",s)));let a=e===""||s.pathname==="",l=a?"/":s.pathname,u;if(l==null)u=r;else{let p=t.length-1;if(!n&&l.startsWith("..")){let y=l.split("/");for(;y[0]==="..";)y.shift(),p-=1;s.pathname=y.join("/")}u=p>=0?t[p]:"/"}let d=LD(s,u),m=l&&l!=="/"&&l.endsWith("/"),f=(a||l===".")&&r.endsWith("/");return!d.pathname.endsWith("/")&&(m||f)&&(d.pathname+="/"),d}var Ja=e=>e.join("/").replace(/\/\/+/g,"/"),BD=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),WD=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,VD=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function qD(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}var LC=["POST","PUT","PATCH","DELETE"];new Set(LC);var HD=["GET",...LC];new Set(HD);var eu=v.createContext(null);eu.displayName="DataRouter";var Om=v.createContext(null);Om.displayName="DataRouterState";v.createContext(!1);var zC=v.createContext({isTransitioning:!1});zC.displayName="ViewTransition";var KD=v.createContext(new Map);KD.displayName="Fetchers";var GD=v.createContext(null);GD.displayName="Await";var aa=v.createContext(null);aa.displayName="Navigation";var Id=v.createContext(null);Id.displayName="Location";var Ca=v.createContext({outlet:null,matches:[],isDataRoute:!1});Ca.displayName="Route";var jx=v.createContext(null);jx.displayName="RouteError";function YD(e,{relative:t}={}){Kr(tu(),"useHref() may be used only in the context of a <Router> component.");let{basename:r,navigator:n}=v.useContext(aa),{hash:s,pathname:a,search:l}=Dd(e,{relative:t}),u=a;return r!=="/"&&(u=a==="/"?r:Ja([r,a])),n.createHref({pathname:u,search:l,hash:s})}function tu(){return v.useContext(Id)!=null}function uo(){return Kr(tu(),"useLocation() may be used only in the context of a <Router> component."),v.useContext(Id).location}var UC="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function BC(e){v.useContext(aa).static||v.useLayoutEffect(e)}function Js(){let{isDataRoute:e}=v.useContext(Ca);return e?l5():JD()}function JD(){Kr(tu(),"useNavigate() may be used only in the context of a <Router> component.");let e=v.useContext(eu),{basename:t,navigator:r}=v.useContext(aa),{matches:n}=v.useContext(Ca),{pathname:s}=uo(),a=JSON.stringify(bx(n)),l=v.useRef(!1);return BC(()=>{l.current=!0}),v.useCallback((d,m={})=>{if(Ti(l.current,UC),!l.current)return;if(typeof d=="number"){r.go(d);return}let f=wx(d,JSON.parse(a),s,m.relative==="path");e==null&&t!=="/"&&(f.pathname=f.pathname==="/"?t:Ja([t,f.pathname])),(m.replace?r.replace:r.push)(f,m.state,m)},[t,r,a,s,e])}v.createContext(null);function Dd(e,{relative:t}={}){let{matches:r}=v.useContext(Ca),{pathname:n}=uo(),s=JSON.stringify(bx(r));return v.useMemo(()=>wx(e,JSON.parse(s),n,t==="path"),[e,s,n,t])}function XD(e,t){return WC(e,t)}function WC(e,t,r,n,s){var E;Kr(tu(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:a}=v.useContext(aa),{matches:l}=v.useContext(Ca),u=l[l.length-1],d=u?u.params:{},m=u?u.pathname:"/",f=u?u.pathnameBase:"/",p=u&&u.route;{let C=p&&p.path||"";VC(m,!p||C.endsWith("*")||C.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${m}" (under <Route path="${C}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${C}"> to <Route path="${C==="/"?"*":`${C}/*`}">.`)}let y=uo(),x;if(t){let C=typeof t=="string"?Zc(t):t;Kr(f==="/"||((E=C.pathname)==null?void 0:E.startsWith(f)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${f}" but pathname "${C.pathname}" was given in the \`location\` prop.`),x=C}else x=y;let j=x.pathname||"/",w=j;if(f!=="/"){let C=f.replace(/^\//,"").split("/");w="/"+j.replace(/^\//,"").split("/").slice(C.length).join("/")}let S=RC(e,{pathname:w});Ti(p||S!=null,`No routes matched location "${x.pathname}${x.search}${x.hash}" `),Ti(S==null||S[S.length-1].route.element!==void 0||S[S.length-1].route.Component!==void 0||S[S.length-1].route.lazy!==void 0,`Matched leaf route at location "${x.pathname}${x.search}${x.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let _=r5(S&&S.map(C=>Object.assign({},C,{params:Object.assign({},d,C.params),pathname:Ja([f,a.encodeLocation?a.encodeLocation(C.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:C.pathname]),pathnameBase:C.pathnameBase==="/"?f:Ja([f,a.encodeLocation?a.encodeLocation(C.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:C.pathnameBase])})),l,r,n,s);return t&&_?v.createElement(Id.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...x},navigationType:"POP"}},_):_}function QD(){let e=o5(),t=qD(e)?`${e.status} ${e.statusText}`:e instanceof Error?e.message:JSON.stringify(e),r=e instanceof Error?e.stack:null,n="rgba(200,200,200, 0.5)",s={padding:"0.5rem",backgroundColor:n},a={padding:"2px 4px",backgroundColor:n},l=null;return console.error("Error handled by React Router default ErrorBoundary:",e),l=v.createElement(v.Fragment,null,v.createElement("p",null," Hey developer "),v.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",v.createElement("code",{style:a},"ErrorBoundary")," or"," ",v.createElement("code",{style:a},"errorElement")," prop on your route.")),v.createElement(v.Fragment,null,v.createElement("h2",null,"Unexpected Application Error!"),v.createElement("h3",{style:{fontStyle:"italic"}},t),r?v.createElement("pre",{style:s},r):null,l)}var ZD=v.createElement(QD,null),e5=class extends v.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){this.props.unstable_onError?this.props.unstable_onError(e,t):console.error("React Router caught the following error during render",e)}render(){return this.state.error!==void 0?v.createElement(Ca.Provider,{value:this.props.routeContext},v.createElement(jx.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function t5({routeContext:e,match:t,children:r}){let n=v.useContext(eu);return n&&n.static&&n.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(n.staticContext._deepestRenderedBoundaryId=t.route.id),v.createElement(Ca.Provider,{value:e},r)}function r5(e,t=[],r=null,n=null,s=null){if(e==null){if(!r)return null;if(r.errors)e=r.matches;else if(t.length===0&&!r.initialized&&r.matches.length>0)e=r.matches;else return null}let a=e,l=r==null?void 0:r.errors;if(l!=null){let m=a.findIndex(f=>f.route.id&&(l==null?void 0:l[f.route.id])!==void 0);Kr(m>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(l).join(",")}`),a=a.slice(0,Math.min(a.length,m+1))}let u=!1,d=-1;if(r)for(let m=0;m<a.length;m++){let f=a[m];if((f.route.HydrateFallback||f.route.hydrateFallbackElement)&&(d=m),f.route.id){let{loaderData:p,errors:y}=r,x=f.route.loader&&!p.hasOwnProperty(f.route.id)&&(!y||y[f.route.id]===void 0);if(f.route.lazy||x){u=!0,d>=0?a=a.slice(0,d+1):a=[a[0]];break}}}return a.reduceRight((m,f,p)=>{let y,x=!1,j=null,w=null;r&&(y=l&&f.route.id?l[f.route.id]:void 0,j=f.route.errorElement||ZD,u&&(d<0&&p===0?(VC("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),x=!0,w=null):d===p&&(x=!0,w=f.route.hydrateFallbackElement||null)));let S=t.concat(a.slice(0,p+1)),_=()=>{let E;return y?E=j:x?E=w:f.route.Component?E=v.createElement(f.route.Component,null):f.route.element?E=f.route.element:E=m,v.createElement(t5,{match:f,routeContext:{outlet:m,matches:S,isDataRoute:r!=null},children:E})};return r&&(f.route.ErrorBoundary||f.route.errorElement||p===0)?v.createElement(e5,{location:r.location,revalidation:r.revalidation,component:j,error:y,children:_(),routeContext:{outlet:null,matches:S,isDataRoute:!0},unstable_onError:n}):_()},null)}function Sx(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function n5(e){let t=v.useContext(eu);return Kr(t,Sx(e)),t}function s5(e){let t=v.useContext(Om);return Kr(t,Sx(e)),t}function i5(e){let t=v.useContext(Ca);return Kr(t,Sx(e)),t}function Nx(e){let t=i5(e),r=t.matches[t.matches.length-1];return Kr(r.route.id,`${e} can only be used on routes that contain a unique "id"`),r.route.id}function a5(){return Nx("useRouteId")}function o5(){var n;let e=v.useContext(jx),t=s5("useRouteError"),r=Nx("useRouteError");return e!==void 0?e:(n=t.errors)==null?void 0:n[r]}function l5(){let{router:e}=n5("useNavigate"),t=Nx("useNavigate"),r=v.useRef(!1);return BC(()=>{r.current=!0}),v.useCallback(async(s,a={})=>{Ti(r.current,UC),r.current&&(typeof s=="number"?e.navigate(s):await e.navigate(s,{fromRouteId:t,...a}))},[e,t])}var Hj={};function VC(e,t,r){!t&&!Hj[e]&&(Hj[e]=!0,Ti(!1,r))}v.memo(c5);function c5({routes:e,future:t,state:r,unstable_onError:n}){return WC(e,void 0,r,n,t)}function u5({to:e,replace:t,state:r,relative:n}){Kr(tu(),"<Navigate> may be used only in the context of a <Router> component.");let{static:s}=v.useContext(aa);Ti(!s,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:a}=v.useContext(Ca),{pathname:l}=uo(),u=Js(),d=wx(e,bx(a),l,n==="path"),m=JSON.stringify(d);return v.useEffect(()=>{u(JSON.parse(m),{replace:t,state:r,relative:n})},[u,m,n,t,r]),null}function ii(e){Kr(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function d5({basename:e="/",children:t=null,location:r,navigationType:n="POP",navigator:s,static:a=!1}){Kr(!tu(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let l=e.replace(/^\/*/,"/"),u=v.useMemo(()=>({basename:l,navigator:s,static:a,future:{}}),[l,s,a]);typeof r=="string"&&(r=Zc(r));let{pathname:d="/",search:m="",hash:f="",state:p=null,key:y="default"}=r,x=v.useMemo(()=>{let j=eo(d,l);return j==null?null:{location:{pathname:j,search:m,hash:f,state:p,key:y},navigationType:n}},[l,d,m,f,p,y,n]);return Ti(x!=null,`<Router basename="${l}"> is not able to match the URL "${d}${m}${f}" because it does not start with the basename, so the <Router> won't render anything.`),x==null?null:v.createElement(aa.Provider,{value:u},v.createElement(Id.Provider,{children:t,value:x}))}function f5({children:e,location:t}){return XD(X0(e),t)}function X0(e,t=[]){let r=[];return v.Children.forEach(e,(n,s)=>{if(!v.isValidElement(n))return;let a=[...t,s];if(n.type===v.Fragment){r.push.apply(r,X0(n.props.children,a));return}Kr(n.type===ii,`[${typeof n.type=="string"?n.type:n.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Kr(!n.props.index||!n.props.children,"An index route cannot have child routes.");let l={id:n.props.id||a.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,middleware:n.props.middleware,loader:n.props.loader,action:n.props.action,hydrateFallbackElement:n.props.hydrateFallbackElement,HydrateFallback:n.props.HydrateFallback,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.hasErrorBoundary===!0||n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(l.children=X0(n.props.children,a)),r.push(l)}),r}var bh="get",wh="application/x-www-form-urlencoded";function Tm(e){return e!=null&&typeof e.tagName=="string"}function h5(e){return Tm(e)&&e.tagName.toLowerCase()==="button"}function m5(e){return Tm(e)&&e.tagName.toLowerCase()==="form"}function p5(e){return Tm(e)&&e.tagName.toLowerCase()==="input"}function g5(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function y5(e,t){return e.button===0&&(!t||t==="_self")&&!g5(e)}function Q0(e=""){return new URLSearchParams(typeof e=="string"||Array.isArray(e)||e instanceof URLSearchParams?e:Object.keys(e).reduce((t,r)=>{let n=e[r];return t.concat(Array.isArray(n)?n.map(s=>[r,s]):[[r,n]])},[]))}function v5(e,t){let r=Q0(e);return t&&t.forEach((n,s)=>{r.has(s)||t.getAll(s).forEach(a=>{r.append(s,a)})}),r}var Jf=null;function x5(){if(Jf===null)try{new FormData(document.createElement("form"),0),Jf=!1}catch{Jf=!0}return Jf}var b5=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function ty(e){return e!=null&&!b5.has(e)?(Ti(!1,`"${e}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${wh}"`),null):e}function w5(e,t){let r,n,s,a,l;if(m5(e)){let u=e.getAttribute("action");n=u?eo(u,t):null,r=e.getAttribute("method")||bh,s=ty(e.getAttribute("enctype"))||wh,a=new FormData(e)}else if(h5(e)||p5(e)&&(e.type==="submit"||e.type==="image")){let u=e.form;if(u==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let d=e.getAttribute("formaction")||u.getAttribute("action");if(n=d?eo(d,t):null,r=e.getAttribute("formmethod")||u.getAttribute("method")||bh,s=ty(e.getAttribute("formenctype"))||ty(u.getAttribute("enctype"))||wh,a=new FormData(u,e),!x5()){let{name:m,type:f,value:p}=e;if(f==="image"){let y=m?`${m}.`:"";a.append(`${y}x`,"0"),a.append(`${y}y`,"0")}else m&&a.append(m,p)}}else{if(Tm(e))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');r=bh,n=null,s=wh,l=e}return a&&s==="text/plain"&&(l=a,a=void 0),{action:n,method:r.toLowerCase(),encType:s,formData:a,body:l}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function kx(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function j5(e,t,r){let n=typeof e=="string"?new URL(e,typeof window>"u"?"server://singlefetch/":window.location.origin):e;return n.pathname==="/"?n.pathname=`_root.${r}`:t&&eo(n.pathname,t)==="/"?n.pathname=`${t.replace(/\/$/,"")}/_root.${r}`:n.pathname=`${n.pathname.replace(/\/$/,"")}.${r}`,n}async function S5(e,t){if(e.id in t)return t[e.id];try{let r=await import(e.module);return t[e.id]=r,r}catch(r){return console.error(`Error loading route module \`${e.module}\`, reloading page...`),console.error(r),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function N5(e){return e==null?!1:e.href==null?e.rel==="preload"&&typeof e.imageSrcSet=="string"&&typeof e.imageSizes=="string":typeof e.rel=="string"&&typeof e.href=="string"}async function k5(e,t,r){let n=await Promise.all(e.map(async s=>{let a=t.routes[s.route.id];if(a){let l=await S5(a,r);return l.links?l.links():[]}return[]}));return A5(n.flat(1).filter(N5).filter(s=>s.rel==="stylesheet"||s.rel==="preload").map(s=>s.rel==="stylesheet"?{...s,rel:"prefetch",as:"style"}:{...s,rel:"prefetch"}))}function Kj(e,t,r,n,s,a){let l=(d,m)=>r[m]?d.route.id!==r[m].route.id:!0,u=(d,m)=>{var f;return r[m].pathname!==d.pathname||((f=r[m].route.path)==null?void 0:f.endsWith("*"))&&r[m].params["*"]!==d.params["*"]};return a==="assets"?t.filter((d,m)=>l(d,m)||u(d,m)):a==="data"?t.filter((d,m)=>{var p;let f=n.routes[d.route.id];if(!f||!f.hasLoader)return!1;if(l(d,m)||u(d,m))return!0;if(d.route.shouldRevalidate){let y=d.route.shouldRevalidate({currentUrl:new URL(s.pathname+s.search+s.hash,window.origin),currentParams:((p=r[0])==null?void 0:p.params)||{},nextUrl:new URL(e,window.origin),nextParams:d.params,defaultShouldRevalidate:!0});if(typeof y=="boolean")return y}return!0}):[]}function _5(e,t,{includeHydrateFallback:r}={}){return C5(e.map(n=>{let s=t.routes[n.route.id];if(!s)return[];let a=[s.module];return s.clientActionModule&&(a=a.concat(s.clientActionModule)),s.clientLoaderModule&&(a=a.concat(s.clientLoaderModule)),r&&s.hydrateFallbackModule&&(a=a.concat(s.hydrateFallbackModule)),s.imports&&(a=a.concat(s.imports)),a}).flat(1))}function C5(e){return[...new Set(e)]}function E5(e){let t={},r=Object.keys(e).sort();for(let n of r)t[n]=e[n];return t}function A5(e,t){let r=new Set;return new Set(t),e.reduce((n,s)=>{let a=JSON.stringify(E5(s));return r.has(a)||(r.add(a),n.push({key:a,link:s})),n},[])}function qC(){let e=v.useContext(eu);return kx(e,"You must render this element inside a <DataRouterContext.Provider> element"),e}function P5(){let e=v.useContext(Om);return kx(e,"You must render this element inside a <DataRouterStateContext.Provider> element"),e}var _x=v.createContext(void 0);_x.displayName="FrameworkContext";function HC(){let e=v.useContext(_x);return kx(e,"You must render this element inside a <HydratedRouter> element"),e}function O5(e,t){let r=v.useContext(_x),[n,s]=v.useState(!1),[a,l]=v.useState(!1),{onFocus:u,onBlur:d,onMouseEnter:m,onMouseLeave:f,onTouchStart:p}=t,y=v.useRef(null);v.useEffect(()=>{if(e==="render"&&l(!0),e==="viewport"){let w=_=>{_.forEach(E=>{l(E.isIntersecting)})},S=new IntersectionObserver(w,{threshold:.5});return y.current&&S.observe(y.current),()=>{S.disconnect()}}},[e]),v.useEffect(()=>{if(n){let w=setTimeout(()=>{l(!0)},100);return()=>{clearTimeout(w)}}},[n]);let x=()=>{s(!0)},j=()=>{s(!1),l(!1)};return r?e!=="intent"?[a,y,{}]:[a,y,{onFocus:Bu(u,x),onBlur:Bu(d,j),onMouseEnter:Bu(m,x),onMouseLeave:Bu(f,j),onTouchStart:Bu(p,x)}]:[!1,y,{}]}function Bu(e,t){return r=>{e&&e(r),r.defaultPrevented||t(r)}}function T5({page:e,...t}){let{router:r}=qC(),n=v.useMemo(()=>RC(r.routes,e,r.basename),[r.routes,e,r.basename]);return n?v.createElement(D5,{page:e,matches:n,...t}):null}function I5(e){let{manifest:t,routeModules:r}=HC(),[n,s]=v.useState([]);return v.useEffect(()=>{let a=!1;return k5(e,t,r).then(l=>{a||s(l)}),()=>{a=!0}},[e,t,r]),n}function D5({page:e,matches:t,...r}){let n=uo(),{manifest:s,routeModules:a}=HC(),{basename:l}=qC(),{loaderData:u,matches:d}=P5(),m=v.useMemo(()=>Kj(e,t,d,s,n,"data"),[e,t,d,s,n]),f=v.useMemo(()=>Kj(e,t,d,s,n,"assets"),[e,t,d,s,n]),p=v.useMemo(()=>{if(e===n.pathname+n.search+n.hash)return[];let j=new Set,w=!1;if(t.forEach(_=>{var C;let E=s.routes[_.route.id];!E||!E.hasLoader||(!m.some(A=>A.route.id===_.route.id)&&_.route.id in u&&((C=a[_.route.id])!=null&&C.shouldRevalidate)||E.hasClientLoader?w=!0:j.add(_.route.id))}),j.size===0)return[];let S=j5(e,l,"data");return w&&j.size>0&&S.searchParams.set("_routes",t.filter(_=>j.has(_.route.id)).map(_=>_.route.id).join(",")),[S.pathname+S.search]},[l,u,n,s,m,t,e,a]),y=v.useMemo(()=>_5(f,s),[f,s]),x=I5(f);return v.createElement(v.Fragment,null,p.map(j=>v.createElement("link",{key:j,rel:"prefetch",as:"fetch",href:j,...r})),y.map(j=>v.createElement("link",{key:j,rel:"modulepreload",href:j,...r})),x.map(({key:j,link:w})=>v.createElement("link",{key:j,nonce:r.nonce,...w})))}function $5(...e){return t=>{e.forEach(r=>{typeof r=="function"?r(t):r!=null&&(r.current=t)})}}var KC=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{KC&&(window.__reactRouterVersion="7.9.4")}catch{}function R5({basename:e,children:t,window:r}){let n=v.useRef();n.current==null&&(n.current=jD({window:r,v5Compat:!0}));let s=n.current,[a,l]=v.useState({action:s.action,location:s.location}),u=v.useCallback(d=>{v.startTransition(()=>l(d))},[l]);return v.useLayoutEffect(()=>s.listen(u),[s,u]),v.createElement(d5,{basename:e,children:t,location:a.location,navigationType:a.action,navigator:s})}var GC=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,YC=v.forwardRef(function({onClick:t,discover:r="render",prefetch:n="none",relative:s,reloadDocument:a,replace:l,state:u,target:d,to:m,preventScrollReset:f,viewTransition:p,...y},x){let{basename:j}=v.useContext(aa),w=typeof m=="string"&&GC.test(m),S,_=!1;if(typeof m=="string"&&w&&(S=m,KC))try{let H=new URL(window.location.href),fe=m.startsWith("//")?new URL(H.protocol+m):new URL(m),X=eo(fe.pathname,j);fe.origin===H.origin&&X!=null?m=X+fe.search+fe.hash:_=!0}catch{Ti(!1,`<Link to="${m}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let E=YD(m,{relative:s}),[C,A,T]=O5(n,y),P=z5(m,{replace:l,state:u,target:d,preventScrollReset:f,relative:s,viewTransition:p});function z(H){t&&t(H),H.defaultPrevented||P(H)}let J=v.createElement("a",{...y,...T,href:S||E,onClick:_||a?t:z,ref:$5(x,A),target:d,"data-discover":!w&&r==="render"?"true":void 0});return C&&!w?v.createElement(v.Fragment,null,J,v.createElement(T5,{page:E})):J});YC.displayName="Link";var M5=v.forwardRef(function({"aria-current":t="page",caseSensitive:r=!1,className:n="",end:s=!1,style:a,to:l,viewTransition:u,children:d,...m},f){let p=Dd(l,{relative:m.relative}),y=uo(),x=v.useContext(Om),{navigator:j,basename:w}=v.useContext(aa),S=x!=null&&q5(p)&&u===!0,_=j.encodeLocation?j.encodeLocation(p).pathname:p.pathname,E=y.pathname,C=x&&x.navigation&&x.navigation.location?x.navigation.location.pathname:null;r||(E=E.toLowerCase(),C=C?C.toLowerCase():null,_=_.toLowerCase()),C&&w&&(C=eo(C,w)||C);const A=_!=="/"&&_.endsWith("/")?_.length-1:_.length;let T=E===_||!s&&E.startsWith(_)&&E.charAt(A)==="/",P=C!=null&&(C===_||!s&&C.startsWith(_)&&C.charAt(_.length)==="/"),z={isActive:T,isPending:P,isTransitioning:S},J=T?t:void 0,H;typeof n=="function"?H=n(z):H=[n,T?"active":null,P?"pending":null,S?"transitioning":null].filter(Boolean).join(" ");let fe=typeof a=="function"?a(z):a;return v.createElement(YC,{...m,"aria-current":J,className:H,ref:f,style:fe,to:l,viewTransition:u},typeof d=="function"?d(z):d)});M5.displayName="NavLink";var F5=v.forwardRef(({discover:e="render",fetcherKey:t,navigate:r,reloadDocument:n,replace:s,state:a,method:l=bh,action:u,onSubmit:d,relative:m,preventScrollReset:f,viewTransition:p,...y},x)=>{let j=W5(),w=V5(u,{relative:m}),S=l.toLowerCase()==="get"?"get":"post",_=typeof u=="string"&&GC.test(u),E=C=>{if(d&&d(C),C.defaultPrevented)return;C.preventDefault();let A=C.nativeEvent.submitter,T=(A==null?void 0:A.getAttribute("formmethod"))||l;j(A||C.currentTarget,{fetcherKey:t,method:T,navigate:r,replace:s,state:a,relative:m,preventScrollReset:f,viewTransition:p})};return v.createElement("form",{ref:x,method:S,action:w,onSubmit:n?d:E,...y,"data-discover":!_&&e==="render"?"true":void 0})});F5.displayName="Form";function L5(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function JC(e){let t=v.useContext(eu);return Kr(t,L5(e)),t}function z5(e,{target:t,replace:r,state:n,preventScrollReset:s,relative:a,viewTransition:l}={}){let u=Js(),d=uo(),m=Dd(e,{relative:a});return v.useCallback(f=>{if(y5(f,t)){f.preventDefault();let p=r!==void 0?r:pd(d)===pd(m);u(e,{replace:p,state:n,preventScrollReset:s,relative:a,viewTransition:l})}},[d,u,m,r,n,t,e,s,a,l])}function Cx(e){Ti(typeof URLSearchParams<"u","You cannot use the `useSearchParams` hook in a browser that does not support the URLSearchParams API. If you need to support Internet Explorer 11, we recommend you load a polyfill such as https://github.com/ungap/url-search-params.");let t=v.useRef(Q0(e)),r=v.useRef(!1),n=uo(),s=v.useMemo(()=>v5(n.search,r.current?null:t.current),[n.search]),a=Js(),l=v.useCallback((u,d)=>{const m=Q0(typeof u=="function"?u(new URLSearchParams(s)):u);r.current=!0,a("?"+m,d)},[a,s]);return[s,l]}var U5=0,B5=()=>`__${String(++U5)}__`;function W5(){let{router:e}=JC("useSubmit"),{basename:t}=v.useContext(aa),r=a5();return v.useCallback(async(n,s={})=>{let{action:a,method:l,encType:u,formData:d,body:m}=w5(n,t);if(s.navigate===!1){let f=s.fetcherKey||B5();await e.fetch(f,r,s.action||a,{preventScrollReset:s.preventScrollReset,formData:d,body:m,formMethod:s.method||l,formEncType:s.encType||u,flushSync:s.flushSync})}else await e.navigate(s.action||a,{preventScrollReset:s.preventScrollReset,formData:d,body:m,formMethod:s.method||l,formEncType:s.encType||u,replace:s.replace,state:s.state,fromRouteId:r,flushSync:s.flushSync,viewTransition:s.viewTransition})},[e,t,r])}function V5(e,{relative:t}={}){let{basename:r}=v.useContext(aa),n=v.useContext(Ca);Kr(n,"useFormAction must be used inside a RouteContext");let[s]=n.matches.slice(-1),a={...Dd(e||".",{relative:t})},l=uo();if(e==null){a.search=l.search;let u=new URLSearchParams(a.search),d=u.getAll("index");if(d.some(f=>f==="")){u.delete("index"),d.filter(p=>p).forEach(p=>u.append("index",p));let f=u.toString();a.search=f?`?${f}`:""}}return(!e||e===".")&&s.route.index&&(a.search=a.search?a.search.replace(/^\?/,"?index&"):"?index"),r!=="/"&&(a.pathname=a.pathname==="/"?r:Ja([r,a.pathname])),pd(a)}function q5(e,{relative:t}={}){let r=v.useContext(zC);Kr(r!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:n}=JC("useViewTransitionState"),s=Dd(e,{relative:t});if(!r.isTransitioning)return!1;let a=eo(r.currentLocation.pathname,n)||r.currentLocation.pathname,l=eo(r.nextLocation.pathname,n)||r.nextLocation.pathname;return Oh(s.pathname,l)!=null||Oh(s.pathname,a)!=null}var XC=$C();const H5="modulepreload",K5=function(e){return"/feature-voting-app/"+e},Gj={},$d=function(t,r,n){let s=Promise.resolve();if(r&&r.length>0){let l=function(m){return Promise.all(m.map(f=>Promise.resolve(f).then(p=>({status:"fulfilled",value:p}),p=>({status:"rejected",reason:p}))))};document.getElementsByTagName("link");const u=document.querySelector("meta[property=csp-nonce]"),d=(u==null?void 0:u.nonce)||(u==null?void 0:u.getAttribute("nonce"));s=l(r.map(m=>{if(m=K5(m),m in Gj)return;Gj[m]=!0;const f=m.endsWith(".css"),p=f?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${m}"]${p}`))return;const y=document.createElement("link");if(y.rel=f?"stylesheet":H5,f||(y.as="script"),y.crossOrigin="",y.href=m,d&&y.setAttribute("nonce",d),document.head.appendChild(y),f)return new Promise((x,j)=>{y.addEventListener("load",x),y.addEventListener("error",()=>j(new Error(`Unable to preload CSS for ${m}`)))})}))}function a(l){const u=new Event("vite:preloadError",{cancelable:!0});if(u.payload=l,window.dispatchEvent(u),!u.defaultPrevented)throw l}return s.then(l=>{for(const u of l||[])u.status==="rejected"&&a(u.reason);return t().catch(a)})},G5=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...r)=>$d(async()=>{const{default:n}=await Promise.resolve().then(()=>ru);return{default:n}},[]).then(({default:n})=>n(...r)):t=fetch,(...r)=>t(...r)};class Ex extends Error{constructor(t,r="FunctionsError",n){super(t),this.name=r,this.context=n}}class Yj extends Ex{constructor(t){super("Failed to send a request to the Edge Function","FunctionsFetchError",t)}}class Jj extends Ex{constructor(t){super("Relay Error invoking the Edge Function","FunctionsRelayError",t)}}class Xj extends Ex{constructor(t){super("Edge Function returned a non-2xx status code","FunctionsHttpError",t)}}var Z0;(function(e){e.Any="any",e.ApNortheast1="ap-northeast-1",e.ApNortheast2="ap-northeast-2",e.ApSouth1="ap-south-1",e.ApSoutheast1="ap-southeast-1",e.ApSoutheast2="ap-southeast-2",e.CaCentral1="ca-central-1",e.EuCentral1="eu-central-1",e.EuWest1="eu-west-1",e.EuWest2="eu-west-2",e.EuWest3="eu-west-3",e.SaEast1="sa-east-1",e.UsEast1="us-east-1",e.UsWest1="us-west-1",e.UsWest2="us-west-2"})(Z0||(Z0={}));var Y5=function(e,t,r,n){function s(a){return a instanceof r?a:new r(function(l){l(a)})}return new(r||(r=Promise))(function(a,l){function u(f){try{m(n.next(f))}catch(p){l(p)}}function d(f){try{m(n.throw(f))}catch(p){l(p)}}function m(f){f.done?a(f.value):s(f.value).then(u,d)}m((n=n.apply(e,t||[])).next())})};class J5{constructor(t,{headers:r={},customFetch:n,region:s=Z0.Any}={}){this.url=t,this.headers=r,this.region=s,this.fetch=G5(n)}setAuth(t){this.headers.Authorization=`Bearer ${t}`}invoke(t){return Y5(this,arguments,void 0,function*(r,n={}){var s;try{const{headers:a,method:l,body:u,signal:d}=n;let m={},{region:f}=n;f||(f=this.region);const p=new URL(`${this.url}/${r}`);f&&f!=="any"&&(m["x-region"]=f,p.searchParams.set("forceFunctionRegion",f));let y;u&&(a&&!Object.prototype.hasOwnProperty.call(a,"Content-Type")||!a)&&(typeof Blob<"u"&&u instanceof Blob||u instanceof ArrayBuffer?(m["Content-Type"]="application/octet-stream",y=u):typeof u=="string"?(m["Content-Type"]="text/plain",y=u):typeof FormData<"u"&&u instanceof FormData?y=u:(m["Content-Type"]="application/json",y=JSON.stringify(u)));const x=yield this.fetch(p.toString(),{method:l||"POST",headers:Object.assign(Object.assign(Object.assign({},m),this.headers),a),body:y,signal:d}).catch(_=>{throw _.name==="AbortError"?_:new Yj(_)}),j=x.headers.get("x-relay-error");if(j&&j==="true")throw new Jj(x);if(!x.ok)throw new Xj(x);let w=((s=x.headers.get("Content-Type"))!==null&&s!==void 0?s:"text/plain").split(";")[0].trim(),S;return w==="application/json"?S=yield x.json():w==="application/octet-stream"?S=yield x.blob():w==="text/event-stream"?S=x:w==="multipart/form-data"?S=yield x.formData():S=yield x.text(),{data:S,error:null,response:x}}catch(a){return a instanceof Error&&a.name==="AbortError"?{data:null,error:new Yj(a)}:{data:null,error:a,response:a instanceof Xj||a instanceof Jj?a.context:void 0}}})}}var Kn={},mc={},pc={},gc={},yc={},vc={},X5=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},Bc=X5();const Q5=Bc.fetch,QC=Bc.fetch.bind(Bc),ZC=Bc.Headers,Z5=Bc.Request,e6=Bc.Response,ru=Object.freeze(Object.defineProperty({__proto__:null,Headers:ZC,Request:Z5,Response:e6,default:QC,fetch:Q5},Symbol.toStringTag,{value:"Module"})),t6=dD(ru);var Xf={},Qj;function eE(){if(Qj)return Xf;Qj=1,Object.defineProperty(Xf,"__esModule",{value:!0});class e extends Error{constructor(r){super(r.message),this.name="PostgrestError",this.details=r.details,this.hint=r.hint,this.code=r.code}}return Xf.default=e,Xf}var Zj;function tE(){if(Zj)return vc;Zj=1;var e=vc&&vc.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(vc,"__esModule",{value:!0});const t=e(t6),r=e(eE());class n{constructor(a){var l,u;this.shouldThrowOnError=!1,this.method=a.method,this.url=a.url,this.headers=new Headers(a.headers),this.schema=a.schema,this.body=a.body,this.shouldThrowOnError=(l=a.shouldThrowOnError)!==null&&l!==void 0?l:!1,this.signal=a.signal,this.isMaybeSingle=(u=a.isMaybeSingle)!==null&&u!==void 0?u:!1,a.fetch?this.fetch=a.fetch:typeof fetch>"u"?this.fetch=t.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(a,l){return this.headers=new Headers(this.headers),this.headers.set(a,l),this}then(a,l){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const u=this.fetch;let d=u(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async m=>{var f,p,y,x;let j=null,w=null,S=null,_=m.status,E=m.statusText;if(m.ok){if(this.method!=="HEAD"){const P=await m.text();P===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((f=this.headers.get("Accept"))===null||f===void 0)&&f.includes("application/vnd.pgrst.plan+text"))?w=P:w=JSON.parse(P))}const A=(p=this.headers.get("Prefer"))===null||p===void 0?void 0:p.match(/count=(exact|planned|estimated)/),T=(y=m.headers.get("content-range"))===null||y===void 0?void 0:y.split("/");A&&T&&T.length>1&&(S=parseInt(T[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(w)&&(w.length>1?(j={code:"PGRST116",details:`Results contain ${w.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},w=null,S=null,_=406,E="Not Acceptable"):w.length===1?w=w[0]:w=null)}else{const A=await m.text();try{j=JSON.parse(A),Array.isArray(j)&&m.status===404&&(w=[],j=null,_=200,E="OK")}catch{m.status===404&&A===""?(_=204,E="No Content"):j={message:A}}if(j&&this.isMaybeSingle&&(!((x=j==null?void 0:j.details)===null||x===void 0)&&x.includes("0 rows"))&&(j=null,_=200,E="OK"),j&&this.shouldThrowOnError)throw new r.default(j)}return{error:j,data:w,count:S,status:_,statusText:E}});return this.shouldThrowOnError||(d=d.catch(m=>{var f,p,y;return{error:{message:`${(f=m==null?void 0:m.name)!==null&&f!==void 0?f:"FetchError"}: ${m==null?void 0:m.message}`,details:`${(p=m==null?void 0:m.stack)!==null&&p!==void 0?p:""}`,hint:"",code:`${(y=m==null?void 0:m.code)!==null&&y!==void 0?y:""}`},data:null,count:null,status:0,statusText:""}})),d.then(a,l)}returns(){return this}overrideTypes(){return this}}return vc.default=n,vc}var eS;function rE(){if(eS)return yc;eS=1;var e=yc&&yc.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(yc,"__esModule",{value:!0});const t=e(tE());class r extends t.default{select(s){let a=!1;const l=(s??"*").split("").map(u=>/\s/.test(u)&&!a?"":(u==='"'&&(a=!a),u)).join("");return this.url.searchParams.set("select",l),this.headers.append("Prefer","return=representation"),this}order(s,{ascending:a=!0,nullsFirst:l,foreignTable:u,referencedTable:d=u}={}){const m=d?`${d}.order`:"order",f=this.url.searchParams.get(m);return this.url.searchParams.set(m,`${f?`${f},`:""}${s}.${a?"asc":"desc"}${l===void 0?"":l?".nullsfirst":".nullslast"}`),this}limit(s,{foreignTable:a,referencedTable:l=a}={}){const u=typeof l>"u"?"limit":`${l}.limit`;return this.url.searchParams.set(u,`${s}`),this}range(s,a,{foreignTable:l,referencedTable:u=l}={}){const d=typeof u>"u"?"offset":`${u}.offset`,m=typeof u>"u"?"limit":`${u}.limit`;return this.url.searchParams.set(d,`${s}`),this.url.searchParams.set(m,`${a-s+1}`),this}abortSignal(s){return this.signal=s,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:s=!1,verbose:a=!1,settings:l=!1,buffers:u=!1,wal:d=!1,format:m="text"}={}){var f;const p=[s?"analyze":null,a?"verbose":null,l?"settings":null,u?"buffers":null,d?"wal":null].filter(Boolean).join("|"),y=(f=this.headers.get("Accept"))!==null&&f!==void 0?f:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${m}; for="${y}"; options=${p};`),m==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(s){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${s}`),this}}return yc.default=r,yc}var tS;function Ax(){if(tS)return gc;tS=1;var e=gc&&gc.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(gc,"__esModule",{value:!0});const t=e(rE());class r extends t.default{eq(s,a){return this.url.searchParams.append(s,`eq.${a}`),this}neq(s,a){return this.url.searchParams.append(s,`neq.${a}`),this}gt(s,a){return this.url.searchParams.append(s,`gt.${a}`),this}gte(s,a){return this.url.searchParams.append(s,`gte.${a}`),this}lt(s,a){return this.url.searchParams.append(s,`lt.${a}`),this}lte(s,a){return this.url.searchParams.append(s,`lte.${a}`),this}like(s,a){return this.url.searchParams.append(s,`like.${a}`),this}likeAllOf(s,a){return this.url.searchParams.append(s,`like(all).{${a.join(",")}}`),this}likeAnyOf(s,a){return this.url.searchParams.append(s,`like(any).{${a.join(",")}}`),this}ilike(s,a){return this.url.searchParams.append(s,`ilike.${a}`),this}ilikeAllOf(s,a){return this.url.searchParams.append(s,`ilike(all).{${a.join(",")}}`),this}ilikeAnyOf(s,a){return this.url.searchParams.append(s,`ilike(any).{${a.join(",")}}`),this}is(s,a){return this.url.searchParams.append(s,`is.${a}`),this}in(s,a){const l=Array.from(new Set(a)).map(u=>typeof u=="string"&&new RegExp("[,()]").test(u)?`"${u}"`:`${u}`).join(",");return this.url.searchParams.append(s,`in.(${l})`),this}contains(s,a){return typeof a=="string"?this.url.searchParams.append(s,`cs.${a}`):Array.isArray(a)?this.url.searchParams.append(s,`cs.{${a.join(",")}}`):this.url.searchParams.append(s,`cs.${JSON.stringify(a)}`),this}containedBy(s,a){return typeof a=="string"?this.url.searchParams.append(s,`cd.${a}`):Array.isArray(a)?this.url.searchParams.append(s,`cd.{${a.join(",")}}`):this.url.searchParams.append(s,`cd.${JSON.stringify(a)}`),this}rangeGt(s,a){return this.url.searchParams.append(s,`sr.${a}`),this}rangeGte(s,a){return this.url.searchParams.append(s,`nxl.${a}`),this}rangeLt(s,a){return this.url.searchParams.append(s,`sl.${a}`),this}rangeLte(s,a){return this.url.searchParams.append(s,`nxr.${a}`),this}rangeAdjacent(s,a){return this.url.searchParams.append(s,`adj.${a}`),this}overlaps(s,a){return typeof a=="string"?this.url.searchParams.append(s,`ov.${a}`):this.url.searchParams.append(s,`ov.{${a.join(",")}}`),this}textSearch(s,a,{config:l,type:u}={}){let d="";u==="plain"?d="pl":u==="phrase"?d="ph":u==="websearch"&&(d="w");const m=l===void 0?"":`(${l})`;return this.url.searchParams.append(s,`${d}fts${m}.${a}`),this}match(s){return Object.entries(s).forEach(([a,l])=>{this.url.searchParams.append(a,`eq.${l}`)}),this}not(s,a,l){return this.url.searchParams.append(s,`not.${a}.${l}`),this}or(s,{foreignTable:a,referencedTable:l=a}={}){const u=l?`${l}.or`:"or";return this.url.searchParams.append(u,`(${s})`),this}filter(s,a,l){return this.url.searchParams.append(s,`${a}.${l}`),this}}return gc.default=r,gc}var rS;function nE(){if(rS)return pc;rS=1;var e=pc&&pc.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(pc,"__esModule",{value:!0});const t=e(Ax());class r{constructor(s,{headers:a={},schema:l,fetch:u}){this.url=s,this.headers=new Headers(a),this.schema=l,this.fetch=u}select(s,a){const{head:l=!1,count:u}=a??{},d=l?"HEAD":"GET";let m=!1;const f=(s??"*").split("").map(p=>/\s/.test(p)&&!m?"":(p==='"'&&(m=!m),p)).join("");return this.url.searchParams.set("select",f),u&&this.headers.append("Prefer",`count=${u}`),new t.default({method:d,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(s,{count:a,defaultToNull:l=!0}={}){var u;const d="POST";if(a&&this.headers.append("Prefer",`count=${a}`),l||this.headers.append("Prefer","missing=default"),Array.isArray(s)){const m=s.reduce((f,p)=>f.concat(Object.keys(p)),[]);if(m.length>0){const f=[...new Set(m)].map(p=>`"${p}"`);this.url.searchParams.set("columns",f.join(","))}}return new t.default({method:d,url:this.url,headers:this.headers,schema:this.schema,body:s,fetch:(u=this.fetch)!==null&&u!==void 0?u:fetch})}upsert(s,{onConflict:a,ignoreDuplicates:l=!1,count:u,defaultToNull:d=!0}={}){var m;const f="POST";if(this.headers.append("Prefer",`resolution=${l?"ignore":"merge"}-duplicates`),a!==void 0&&this.url.searchParams.set("on_conflict",a),u&&this.headers.append("Prefer",`count=${u}`),d||this.headers.append("Prefer","missing=default"),Array.isArray(s)){const p=s.reduce((y,x)=>y.concat(Object.keys(x)),[]);if(p.length>0){const y=[...new Set(p)].map(x=>`"${x}"`);this.url.searchParams.set("columns",y.join(","))}}return new t.default({method:f,url:this.url,headers:this.headers,schema:this.schema,body:s,fetch:(m=this.fetch)!==null&&m!==void 0?m:fetch})}update(s,{count:a}={}){var l;const u="PATCH";return a&&this.headers.append("Prefer",`count=${a}`),new t.default({method:u,url:this.url,headers:this.headers,schema:this.schema,body:s,fetch:(l=this.fetch)!==null&&l!==void 0?l:fetch})}delete({count:s}={}){var a;const l="DELETE";return s&&this.headers.append("Prefer",`count=${s}`),new t.default({method:l,url:this.url,headers:this.headers,schema:this.schema,fetch:(a=this.fetch)!==null&&a!==void 0?a:fetch})}}return pc.default=r,pc}var nS;function r6(){if(nS)return mc;nS=1;var e=mc&&mc.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(mc,"__esModule",{value:!0});const t=e(nE()),r=e(Ax());class n{constructor(a,{headers:l={},schema:u,fetch:d}={}){this.url=a,this.headers=new Headers(l),this.schemaName=u,this.fetch=d}from(a){const l=new URL(`${this.url}/${a}`);return new t.default(l,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(a){return new n(this.url,{headers:this.headers,schema:a,fetch:this.fetch})}rpc(a,l={},{head:u=!1,get:d=!1,count:m}={}){var f;let p;const y=new URL(`${this.url}/rpc/${a}`);let x;u||d?(p=u?"HEAD":"GET",Object.entries(l).filter(([w,S])=>S!==void 0).map(([w,S])=>[w,Array.isArray(S)?`{${S.join(",")}}`:`${S}`]).forEach(([w,S])=>{y.searchParams.append(w,S)})):(p="POST",x=l);const j=new Headers(this.headers);return m&&j.set("Prefer",`count=${m}`),new r.default({method:p,url:y,headers:j,schema:this.schemaName,body:x,fetch:(f=this.fetch)!==null&&f!==void 0?f:fetch})}}return mc.default=n,mc}var sS;function n6(){if(sS)return Kn;sS=1;var e=Kn&&Kn.__importDefault||function(u){return u&&u.__esModule?u:{default:u}};Object.defineProperty(Kn,"__esModule",{value:!0}),Kn.PostgrestError=Kn.PostgrestBuilder=Kn.PostgrestTransformBuilder=Kn.PostgrestFilterBuilder=Kn.PostgrestQueryBuilder=Kn.PostgrestClient=void 0;const t=e(r6());Kn.PostgrestClient=t.default;const r=e(nE());Kn.PostgrestQueryBuilder=r.default;const n=e(Ax());Kn.PostgrestFilterBuilder=n.default;const s=e(rE());Kn.PostgrestTransformBuilder=s.default;const a=e(tE());Kn.PostgrestBuilder=a.default;const l=e(eE());return Kn.PostgrestError=l.default,Kn.default={PostgrestClient:t.default,PostgrestQueryBuilder:r.default,PostgrestFilterBuilder:n.default,PostgrestTransformBuilder:s.default,PostgrestBuilder:a.default,PostgrestError:l.default},Kn}var s6=n6();const i6=ia(s6),{PostgrestClient:a6,PostgrestQueryBuilder:see,PostgrestFilterBuilder:iee,PostgrestTransformBuilder:aee,PostgrestBuilder:oee,PostgrestError:lee}=i6;class o6{static detectEnvironment(){var t;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((t=navigator.userAgent)===null||t===void 0)&&t.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const r=process.versions;if(r&&r.node){const n=r.node,s=parseInt(n.replace(/^v/,"").split(".")[0]);return s>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${s} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${s} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const t=this.detectEnvironment();if(t.constructor)return t.constructor;let r=t.error||"WebSocket not supported in this environment.";throw t.workaround&&(r+=`

Suggested solution: ${t.workaround}`),new Error(r)}static createWebSocket(t,r){const n=this.getWebSocketConstructor();return new n(t,r)}static isWebSocketSupported(){try{const t=this.detectEnvironment();return t.type==="native"||t.type==="ws"}catch{return!1}}}const l6="2.74.0",c6=`realtime-js/${l6}`,u6="1.0.0",ev=1e4,d6=1e3,f6=100;var ld;(function(e){e[e.connecting=0]="connecting",e[e.open=1]="open",e[e.closing=2]="closing",e[e.closed=3]="closed"})(ld||(ld={}));var Tn;(function(e){e.closed="closed",e.errored="errored",e.joined="joined",e.joining="joining",e.leaving="leaving"})(Tn||(Tn={}));var Gi;(function(e){e.close="phx_close",e.error="phx_error",e.join="phx_join",e.reply="phx_reply",e.leave="phx_leave",e.access_token="access_token"})(Gi||(Gi={}));var tv;(function(e){e.websocket="websocket"})(tv||(tv={}));var bl;(function(e){e.Connecting="connecting",e.Open="open",e.Closing="closing",e.Closed="closed"})(bl||(bl={}));class h6{constructor(){this.HEADER_LENGTH=1}decode(t,r){return t.constructor===ArrayBuffer?r(this._binaryDecode(t)):r(typeof t=="string"?JSON.parse(t):{})}_binaryDecode(t){const r=new DataView(t),n=new TextDecoder;return this._decodeBroadcast(t,r,n)}_decodeBroadcast(t,r,n){const s=r.getUint8(1),a=r.getUint8(2);let l=this.HEADER_LENGTH+2;const u=n.decode(t.slice(l,l+s));l=l+s;const d=n.decode(t.slice(l,l+a));l=l+a;const m=JSON.parse(n.decode(t.slice(l,t.byteLength)));return{ref:null,topic:u,event:d,payload:m}}}class sE{constructor(t,r){this.callback=t,this.timerCalc=r,this.timer=void 0,this.tries=0,this.callback=t,this.timerCalc=r}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var Pr;(function(e){e.abstime="abstime",e.bool="bool",e.date="date",e.daterange="daterange",e.float4="float4",e.float8="float8",e.int2="int2",e.int4="int4",e.int4range="int4range",e.int8="int8",e.int8range="int8range",e.json="json",e.jsonb="jsonb",e.money="money",e.numeric="numeric",e.oid="oid",e.reltime="reltime",e.text="text",e.time="time",e.timestamp="timestamp",e.timestamptz="timestamptz",e.timetz="timetz",e.tsrange="tsrange",e.tstzrange="tstzrange"})(Pr||(Pr={}));const iS=(e,t,r={})=>{var n;const s=(n=r.skipTypes)!==null&&n!==void 0?n:[];return t?Object.keys(t).reduce((a,l)=>(a[l]=m6(l,e,t,s),a),{}):{}},m6=(e,t,r,n)=>{const s=t.find(u=>u.name===e),a=s==null?void 0:s.type,l=r[e];return a&&!n.includes(a)?iE(a,l):rv(l)},iE=(e,t)=>{if(e.charAt(0)==="_"){const r=e.slice(1,e.length);return v6(t,r)}switch(e){case Pr.bool:return p6(t);case Pr.float4:case Pr.float8:case Pr.int2:case Pr.int4:case Pr.int8:case Pr.numeric:case Pr.oid:return g6(t);case Pr.json:case Pr.jsonb:return y6(t);case Pr.timestamp:return x6(t);case Pr.abstime:case Pr.date:case Pr.daterange:case Pr.int4range:case Pr.int8range:case Pr.money:case Pr.reltime:case Pr.text:case Pr.time:case Pr.timestamptz:case Pr.timetz:case Pr.tsrange:case Pr.tstzrange:return rv(t);default:return rv(t)}},rv=e=>e,p6=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},g6=e=>{if(typeof e=="string"){const t=parseFloat(e);if(!Number.isNaN(t))return t}return e},y6=e=>{if(typeof e=="string")try{return JSON.parse(e)}catch(t){return console.log(`JSON parse error: ${t}`),e}return e},v6=(e,t)=>{if(typeof e!="string")return e;const r=e.length-1,n=e[r];if(e[0]==="{"&&n==="}"){let a;const l=e.slice(1,r);try{a=JSON.parse("["+l+"]")}catch{a=l?l.split(","):[]}return a.map(u=>iE(t,u))}return e},x6=e=>typeof e=="string"?e.replace(" ","T"):e,aE=e=>{let t=e;return t=t.replace(/^ws/i,"http"),t=t.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),t.replace(/\/+$/,"")+"/api/broadcast"};class ry{constructor(t,r,n={},s=ev){this.channel=t,this.event=r,this.payload=n,this.timeout=s,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(t){this.timeout=t,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(t){this.payload=Object.assign(Object.assign({},this.payload),t)}receive(t,r){var n;return this._hasReceived(t)&&r((n=this.receivedResp)===null||n===void 0?void 0:n.response),this.recHooks.push({status:t,callback:r}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const t=r=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=r,this._matchReceive(r)};this.channel._on(this.refEvent,{},t),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(t,r){this.refEvent&&this.channel._trigger(this.refEvent,{status:t,response:r})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:t,response:r}){this.recHooks.filter(n=>n.status===t).forEach(n=>n.callback(r))}_hasReceived(t){return this.receivedResp&&this.receivedResp.status===t}}var aS;(function(e){e.SYNC="sync",e.JOIN="join",e.LEAVE="leave"})(aS||(aS={}));class cd{constructor(t,r){this.channel=t,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const n=(r==null?void 0:r.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(n.state,{},s=>{const{onJoin:a,onLeave:l,onSync:u}=this.caller;this.joinRef=this.channel._joinRef(),this.state=cd.syncState(this.state,s,a,l),this.pendingDiffs.forEach(d=>{this.state=cd.syncDiff(this.state,d,a,l)}),this.pendingDiffs=[],u()}),this.channel._on(n.diff,{},s=>{const{onJoin:a,onLeave:l,onSync:u}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(s):(this.state=cd.syncDiff(this.state,s,a,l),u())}),this.onJoin((s,a,l)=>{this.channel._trigger("presence",{event:"join",key:s,currentPresences:a,newPresences:l})}),this.onLeave((s,a,l)=>{this.channel._trigger("presence",{event:"leave",key:s,currentPresences:a,leftPresences:l})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(t,r,n,s){const a=this.cloneDeep(t),l=this.transformState(r),u={},d={};return this.map(a,(m,f)=>{l[m]||(d[m]=f)}),this.map(l,(m,f)=>{const p=a[m];if(p){const y=f.map(S=>S.presence_ref),x=p.map(S=>S.presence_ref),j=f.filter(S=>x.indexOf(S.presence_ref)<0),w=p.filter(S=>y.indexOf(S.presence_ref)<0);j.length>0&&(u[m]=j),w.length>0&&(d[m]=w)}else u[m]=f}),this.syncDiff(a,{joins:u,leaves:d},n,s)}static syncDiff(t,r,n,s){const{joins:a,leaves:l}={joins:this.transformState(r.joins),leaves:this.transformState(r.leaves)};return n||(n=()=>{}),s||(s=()=>{}),this.map(a,(u,d)=>{var m;const f=(m=t[u])!==null&&m!==void 0?m:[];if(t[u]=this.cloneDeep(d),f.length>0){const p=t[u].map(x=>x.presence_ref),y=f.filter(x=>p.indexOf(x.presence_ref)<0);t[u].unshift(...y)}n(u,f,d)}),this.map(l,(u,d)=>{let m=t[u];if(!m)return;const f=d.map(p=>p.presence_ref);m=m.filter(p=>f.indexOf(p.presence_ref)<0),t[u]=m,s(u,m,d),m.length===0&&delete t[u]}),t}static map(t,r){return Object.getOwnPropertyNames(t).map(n=>r(n,t[n]))}static transformState(t){return t=this.cloneDeep(t),Object.getOwnPropertyNames(t).reduce((r,n)=>{const s=t[n];return"metas"in s?r[n]=s.metas.map(a=>(a.presence_ref=a.phx_ref,delete a.phx_ref,delete a.phx_ref_prev,a)):r[n]=s,r},{})}static cloneDeep(t){return JSON.parse(JSON.stringify(t))}onJoin(t){this.caller.onJoin=t}onLeave(t){this.caller.onLeave=t}onSync(t){this.caller.onSync=t}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var oS;(function(e){e.ALL="*",e.INSERT="INSERT",e.UPDATE="UPDATE",e.DELETE="DELETE"})(oS||(oS={}));var ud;(function(e){e.BROADCAST="broadcast",e.PRESENCE="presence",e.POSTGRES_CHANGES="postgres_changes",e.SYSTEM="system"})(ud||(ud={}));var Va;(function(e){e.SUBSCRIBED="SUBSCRIBED",e.TIMED_OUT="TIMED_OUT",e.CLOSED="CLOSED",e.CHANNEL_ERROR="CHANNEL_ERROR"})(Va||(Va={}));class Px{constructor(t,r={config:{}},n){var s,a;if(this.topic=t,this.params=r,this.socket=n,this.bindings={},this.state=Tn.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=t.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},r.config),this.timeout=this.socket.timeout,this.joinPush=new ry(this,Gi.join,this.params,this.timeout),this.rejoinTimer=new sE(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Tn.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(l=>l.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Tn.closed,this.socket._remove(this)}),this._onError(l=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,l),this.state=Tn.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Tn.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",l=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,l),this.state=Tn.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Gi.reply,{},(l,u)=>{this._trigger(this._replyEventName(u),l)}),this.presence=new cd(this),this.broadcastEndpointURL=aE(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((a=(s=this.params.config)===null||s===void 0?void 0:s.broadcast)===null||a===void 0)&&a.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(t,r=this.timeout){var n,s,a;if(this.socket.isConnected()||this.socket.connect(),this.state==Tn.closed){const{config:{broadcast:l,presence:u,private:d}}=this.params,m=(s=(n=this.bindings.postgres_changes)===null||n===void 0?void 0:n.map(x=>x.filter))!==null&&s!==void 0?s:[],f=!!this.bindings[ud.PRESENCE]&&this.bindings[ud.PRESENCE].length>0||((a=this.params.config.presence)===null||a===void 0?void 0:a.enabled)===!0,p={},y={broadcast:l,presence:Object.assign(Object.assign({},u),{enabled:f}),postgres_changes:m,private:d};this.socket.accessTokenValue&&(p.access_token=this.socket.accessTokenValue),this._onError(x=>t==null?void 0:t(Va.CHANNEL_ERROR,x)),this._onClose(()=>t==null?void 0:t(Va.CLOSED)),this.updateJoinPayload(Object.assign({config:y},p)),this.joinedOnce=!0,this._rejoin(r),this.joinPush.receive("ok",async({postgres_changes:x})=>{var j;if(this.socket.setAuth(),x===void 0){t==null||t(Va.SUBSCRIBED);return}else{const w=this.bindings.postgres_changes,S=(j=w==null?void 0:w.length)!==null&&j!==void 0?j:0,_=[];for(let E=0;E<S;E++){const C=w[E],{filter:{event:A,schema:T,table:P,filter:z}}=C,J=x&&x[E];if(J&&J.event===A&&J.schema===T&&J.table===P&&J.filter===z)_.push(Object.assign(Object.assign({},C),{id:J.id}));else{this.unsubscribe(),this.state=Tn.errored,t==null||t(Va.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=_,t&&t(Va.SUBSCRIBED);return}}).receive("error",x=>{this.state=Tn.errored,t==null||t(Va.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(x).join(", ")||"error")))}).receive("timeout",()=>{t==null||t(Va.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(t,r={}){return await this.send({type:"presence",event:"track",payload:t},r.timeout||this.timeout)}async untrack(t={}){return await this.send({type:"presence",event:"untrack"},t)}on(t,r,n){return this.state===Tn.joined&&t===ud.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(t,r,n)}async send(t,r={}){var n,s;if(!this._canPush()&&t.type==="broadcast"){const{event:a,payload:l}=t,d={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:a,payload:l,private:this.private}]})};try{const m=await this._fetchWithTimeout(this.broadcastEndpointURL,d,(n=r.timeout)!==null&&n!==void 0?n:this.timeout);return await((s=m.body)===null||s===void 0?void 0:s.cancel()),m.ok?"ok":"error"}catch(m){return m.name==="AbortError"?"timed out":"error"}}else return new Promise(a=>{var l,u,d;const m=this._push(t.type,t,r.timeout||this.timeout);t.type==="broadcast"&&!(!((d=(u=(l=this.params)===null||l===void 0?void 0:l.config)===null||u===void 0?void 0:u.broadcast)===null||d===void 0)&&d.ack)&&a("ok"),m.receive("ok",()=>a("ok")),m.receive("error",()=>a("error")),m.receive("timeout",()=>a("timed out"))})}updateJoinPayload(t){this.joinPush.updatePayload(t)}unsubscribe(t=this.timeout){this.state=Tn.leaving;const r=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Gi.close,"leave",this._joinRef())};this.joinPush.destroy();let n=null;return new Promise(s=>{n=new ry(this,Gi.leave,{},t),n.receive("ok",()=>{r(),s("ok")}).receive("timeout",()=>{r(),s("timed out")}).receive("error",()=>{s("error")}),n.send(),this._canPush()||n.trigger("ok",{})}).finally(()=>{n==null||n.destroy()})}teardown(){this.pushBuffer.forEach(t=>t.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=Tn.closed,this.bindings={}}async _fetchWithTimeout(t,r,n){const s=new AbortController,a=setTimeout(()=>s.abort(),n),l=await this.socket.fetch(t,Object.assign(Object.assign({},r),{signal:s.signal}));return clearTimeout(a),l}_push(t,r,n=this.timeout){if(!this.joinedOnce)throw`tried to push '${t}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let s=new ry(this,t,r,n);return this._canPush()?s.send():this._addToPushBuffer(s),s}_addToPushBuffer(t){if(t.startTimeout(),this.pushBuffer.push(t),this.pushBuffer.length>f6){const r=this.pushBuffer.shift();r&&(r.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${r.event}`,r.payload))}}_onMessage(t,r,n){return r}_isMember(t){return this.topic===t}_joinRef(){return this.joinPush.ref}_trigger(t,r,n){var s,a;const l=t.toLocaleLowerCase(),{close:u,error:d,leave:m,join:f}=Gi;if(n&&[u,d,m,f].indexOf(l)>=0&&n!==this._joinRef())return;let y=this._onMessage(l,r,n);if(r&&!y)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(l)?(s=this.bindings.postgres_changes)===null||s===void 0||s.filter(x=>{var j,w,S;return((j=x.filter)===null||j===void 0?void 0:j.event)==="*"||((S=(w=x.filter)===null||w===void 0?void 0:w.event)===null||S===void 0?void 0:S.toLocaleLowerCase())===l}).map(x=>x.callback(y,n)):(a=this.bindings[l])===null||a===void 0||a.filter(x=>{var j,w,S,_,E,C;if(["broadcast","presence","postgres_changes"].includes(l))if("id"in x){const A=x.id,T=(j=x.filter)===null||j===void 0?void 0:j.event;return A&&((w=r.ids)===null||w===void 0?void 0:w.includes(A))&&(T==="*"||(T==null?void 0:T.toLocaleLowerCase())===((S=r.data)===null||S===void 0?void 0:S.type.toLocaleLowerCase()))}else{const A=(E=(_=x==null?void 0:x.filter)===null||_===void 0?void 0:_.event)===null||E===void 0?void 0:E.toLocaleLowerCase();return A==="*"||A===((C=r==null?void 0:r.event)===null||C===void 0?void 0:C.toLocaleLowerCase())}else return x.type.toLocaleLowerCase()===l}).map(x=>{if(typeof y=="object"&&"ids"in y){const j=y.data,{schema:w,table:S,commit_timestamp:_,type:E,errors:C}=j;y=Object.assign(Object.assign({},{schema:w,table:S,commit_timestamp:_,eventType:E,new:{},old:{},errors:C}),this._getPayloadRecords(j))}x.callback(y,n)})}_isClosed(){return this.state===Tn.closed}_isJoined(){return this.state===Tn.joined}_isJoining(){return this.state===Tn.joining}_isLeaving(){return this.state===Tn.leaving}_replyEventName(t){return`chan_reply_${t}`}_on(t,r,n){const s=t.toLocaleLowerCase(),a={type:s,filter:r,callback:n};return this.bindings[s]?this.bindings[s].push(a):this.bindings[s]=[a],this}_off(t,r){const n=t.toLocaleLowerCase();return this.bindings[n]&&(this.bindings[n]=this.bindings[n].filter(s=>{var a;return!(((a=s.type)===null||a===void 0?void 0:a.toLocaleLowerCase())===n&&Px.isEqual(s.filter,r))})),this}static isEqual(t,r){if(Object.keys(t).length!==Object.keys(r).length)return!1;for(const n in t)if(t[n]!==r[n])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(t){this._on(Gi.close,{},t)}_onError(t){this._on(Gi.error,{},r=>t(r))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(t=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Tn.joining,this.joinPush.resend(t))}_getPayloadRecords(t){const r={new:{},old:{}};return(t.type==="INSERT"||t.type==="UPDATE")&&(r.new=iS(t.columns,t.record)),(t.type==="UPDATE"||t.type==="DELETE")&&(r.old=iS(t.columns,t.old_record)),r}}const ny=()=>{},Qf={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},b6=[1e3,2e3,5e3,1e4],w6=1e4,j6=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class S6{constructor(t,r){var n;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=ev,this.transport=null,this.heartbeatIntervalMs=Qf.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=ny,this.ref=0,this.reconnectTimer=null,this.logger=ny,this.conn=null,this.sendBuffer=[],this.serializer=new h6,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=s=>{let a;return s?a=s:typeof fetch>"u"?a=(...l)=>$d(async()=>{const{default:u}=await Promise.resolve().then(()=>ru);return{default:u}},void 0).then(({default:u})=>u(...l)).catch(u=>{throw new Error(`Failed to load @supabase/node-fetch: ${u.message}. This is required for HTTP requests in Node.js environments without native fetch.`)}):a=fetch,(...l)=>a(...l)},!(!((n=r==null?void 0:r.params)===null||n===void 0)&&n.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=r.params.apikey,this.endPoint=`${t}/${tv.websocket}`,this.httpEndpoint=aE(t),this._initializeOptions(r),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(r==null?void 0:r.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=o6.createWebSocket(this.endpointURL())}catch(t){this._setConnectionState("disconnected");const r=t.message;throw r.includes("Node.js")?new Error(`${r}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${r}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:u6}))}disconnect(t,r){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const n=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(n),this._setConnectionState("disconnected")},t?this.conn.close(t,r??""):this.conn.close(),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(t){const r=await t.unsubscribe();return this.channels.length===0&&this.disconnect(),r}async removeAllChannels(){const t=await Promise.all(this.channels.map(r=>r.unsubscribe()));return this.channels=[],this.disconnect(),t}log(t,r,n){this.logger(t,r,n)}connectionState(){switch(this.conn&&this.conn.readyState){case ld.connecting:return bl.Connecting;case ld.open:return bl.Open;case ld.closing:return bl.Closing;default:return bl.Closed}}isConnected(){return this.connectionState()===bl.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(t,r={config:{}}){const n=`realtime:${t}`,s=this.getChannels().find(a=>a.topic===n);if(s)return s;{const a=new Px(`realtime:${t}`,r,this);return this.channels.push(a),a}}push(t){const{topic:r,event:n,payload:s,ref:a}=t,l=()=>{this.encode(t,u=>{var d;(d=this.conn)===null||d===void 0||d.send(u)})};this.log("push",`${r} ${n} (${a})`,s),this.isConnected()?l():this.sendBuffer.push(l)}async setAuth(t=null){this._authPromise=this._performAuth(t);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var t;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(r){this.log("error","error in heartbeat callback",r)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(r){this.log("error","error in heartbeat callback",r)}this._wasManualDisconnect=!1,(t=this.conn)===null||t===void 0||t.close(d6,"heartbeat timeout"),setTimeout(()=>{var r;this.isConnected()||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout()},Qf.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(r){this.log("error","error in heartbeat callback",r)}this._setAuthSafely("heartbeat")}onHeartbeat(t){this.heartbeatCallback=t}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(t=>t()),this.sendBuffer=[])}_makeRef(){let t=this.ref+1;return t===this.ref?this.ref=0:this.ref=t,this.ref.toString()}_leaveOpenTopic(t){let r=this.channels.find(n=>n.topic===t&&(n._isJoined()||n._isJoining()));r&&(this.log("transport",`leaving duplicate topic "${t}"`),r.unsubscribe())}_remove(t){this.channels=this.channels.filter(r=>r.topic!==t.topic)}_onConnMessage(t){this.decode(t.data,r=>{if(r.topic==="phoenix"&&r.event==="phx_reply")try{this.heartbeatCallback(r.payload.status==="ok"?"ok":"error")}catch(m){this.log("error","error in heartbeat callback",m)}r.ref&&r.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:n,event:s,payload:a,ref:l}=r,u=l?`(${l})`:"",d=a.status||"";this.log("receive",`${d} ${n} ${s} ${u}`.trim(),a),this.channels.filter(m=>m._isMember(n)).forEach(m=>m._trigger(s,a,l)),this._triggerStateCallbacks("message",r)})}_clearTimer(t){var r;t==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):t==="reconnect"&&((r=this.reconnectTimer)===null||r===void 0||r.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=t=>this._onConnError(t),this.conn.onmessage=t=>this._onConnMessage(t),this.conn.onclose=t=>this._onConnClose(t))}_teardownConnection(){this.conn&&(this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null),this._clearAllTimers(),this.channels.forEach(t=>t.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const t=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(t),this.workerRef.onerror=r=>{this.log("worker","worker error",r.message),this.workerRef.terminate()},this.workerRef.onmessage=r=>{r.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(t){var r;this._setConnectionState("disconnected"),this.log("transport","close",t),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout(),this._triggerStateCallbacks("close",t)}_onConnError(t){this._setConnectionState("disconnected"),this.log("transport",`${t}`),this._triggerChanError(),this._triggerStateCallbacks("error",t)}_triggerChanError(){this.channels.forEach(t=>t._trigger(Gi.error))}_appendParams(t,r){if(Object.keys(r).length===0)return t;const n=t.match(/\?/)?"&":"?",s=new URLSearchParams(r);return`${t}${n}${s}`}_workerObjectUrl(t){let r;if(t)r=t;else{const n=new Blob([j6],{type:"application/javascript"});r=URL.createObjectURL(n)}return r}_setConnectionState(t,r=!1){this._connectionState=t,t==="connecting"?this._wasManualDisconnect=!1:t==="disconnecting"&&(this._wasManualDisconnect=r)}async _performAuth(t=null){let r;t?r=t:this.accessToken?r=await this.accessToken():r=this.accessTokenValue,this.accessTokenValue!=r&&(this.accessTokenValue=r,this.channels.forEach(n=>{const s={access_token:r,version:c6};r&&n.updateJoinPayload(s),n.joinedOnce&&n._isJoined()&&n._push(Gi.access_token,{access_token:r})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(t="general"){this.setAuth().catch(r=>{this.log("error",`error setting auth in ${t}`,r)})}_triggerStateCallbacks(t,r){try{this.stateChangeCallbacks[t].forEach(n=>{try{n(r)}catch(s){this.log("error",`error in ${t} callback`,s)}})}catch(n){this.log("error",`error triggering ${t} callbacks`,n)}}_setupReconnectionTimer(){this.reconnectTimer=new sE(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},Qf.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(t){var r,n,s,a,l,u,d,m,f;if(this.transport=(r=t==null?void 0:t.transport)!==null&&r!==void 0?r:null,this.timeout=(n=t==null?void 0:t.timeout)!==null&&n!==void 0?n:ev,this.heartbeatIntervalMs=(s=t==null?void 0:t.heartbeatIntervalMs)!==null&&s!==void 0?s:Qf.HEARTBEAT_INTERVAL,this.worker=(a=t==null?void 0:t.worker)!==null&&a!==void 0?a:!1,this.accessToken=(l=t==null?void 0:t.accessToken)!==null&&l!==void 0?l:null,this.heartbeatCallback=(u=t==null?void 0:t.heartbeatCallback)!==null&&u!==void 0?u:ny,t!=null&&t.params&&(this.params=t.params),t!=null&&t.logger&&(this.logger=t.logger),(t!=null&&t.logLevel||t!=null&&t.log_level)&&(this.logLevel=t.logLevel||t.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(d=t==null?void 0:t.reconnectAfterMs)!==null&&d!==void 0?d:(p=>b6[p-1]||w6),this.encode=(m=t==null?void 0:t.encode)!==null&&m!==void 0?m:((p,y)=>y(JSON.stringify(p))),this.decode=(f=t==null?void 0:t.decode)!==null&&f!==void 0?f:this.serializer.decode.bind(this.serializer),this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=t==null?void 0:t.workerUrl}}}class Ox extends Error{constructor(t){super(t),this.__isStorageError=!0,this.name="StorageError"}}function Nn(e){return typeof e=="object"&&e!==null&&"__isStorageError"in e}class N6 extends Ox{constructor(t,r,n){super(t),this.name="StorageApiError",this.status=r,this.statusCode=n}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class nv extends Ox{constructor(t,r){super(t),this.name="StorageUnknownError",this.originalError=r}}var k6=function(e,t,r,n){function s(a){return a instanceof r?a:new r(function(l){l(a)})}return new(r||(r=Promise))(function(a,l){function u(f){try{m(n.next(f))}catch(p){l(p)}}function d(f){try{m(n.throw(f))}catch(p){l(p)}}function m(f){f.done?a(f.value):s(f.value).then(u,d)}m((n=n.apply(e,t||[])).next())})};const oE=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...r)=>$d(async()=>{const{default:n}=await Promise.resolve().then(()=>ru);return{default:n}},void 0).then(({default:n})=>n(...r)):t=fetch,(...r)=>t(...r)},_6=()=>k6(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield $d(()=>Promise.resolve().then(()=>ru),void 0)).Response:Response}),sv=e=>{if(Array.isArray(e))return e.map(r=>sv(r));if(typeof e=="function"||e!==Object(e))return e;const t={};return Object.entries(e).forEach(([r,n])=>{const s=r.replace(/([-_][a-z])/gi,a=>a.toUpperCase().replace(/[-_]/g,""));t[s]=sv(n)}),t},C6=e=>{if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)};var Wl=function(e,t,r,n){function s(a){return a instanceof r?a:new r(function(l){l(a)})}return new(r||(r=Promise))(function(a,l){function u(f){try{m(n.next(f))}catch(p){l(p)}}function d(f){try{m(n.throw(f))}catch(p){l(p)}}function m(f){f.done?a(f.value):s(f.value).then(u,d)}m((n=n.apply(e,t||[])).next())})};const sy=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),E6=(e,t,r)=>Wl(void 0,void 0,void 0,function*(){const n=yield _6();e instanceof n&&!(r!=null&&r.noResolveJson)?e.json().then(s=>{const a=e.status||500,l=(s==null?void 0:s.statusCode)||a+"";t(new N6(sy(s),a,l))}).catch(s=>{t(new nv(sy(s),s))}):t(new nv(sy(e),e))}),A6=(e,t,r,n)=>{const s={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"||!n?s:(C6(n)?(s.headers=Object.assign({"Content-Type":"application/json"},t==null?void 0:t.headers),s.body=JSON.stringify(n)):s.body=n,t!=null&&t.duplex&&(s.duplex=t.duplex),Object.assign(Object.assign({},s),r))};function Rd(e,t,r,n,s,a){return Wl(this,void 0,void 0,function*(){return new Promise((l,u)=>{e(r,A6(t,n,s,a)).then(d=>{if(!d.ok)throw d;return n!=null&&n.noResolveJson?d:d.json()}).then(d=>l(d)).catch(d=>E6(d,u,n))})})}function Th(e,t,r,n){return Wl(this,void 0,void 0,function*(){return Rd(e,"GET",t,r,n)})}function ba(e,t,r,n,s){return Wl(this,void 0,void 0,function*(){return Rd(e,"POST",t,n,s,r)})}function iv(e,t,r,n,s){return Wl(this,void 0,void 0,function*(){return Rd(e,"PUT",t,n,s,r)})}function P6(e,t,r,n){return Wl(this,void 0,void 0,function*(){return Rd(e,"HEAD",t,Object.assign(Object.assign({},r),{noResolveJson:!0}),n)})}function lE(e,t,r,n,s){return Wl(this,void 0,void 0,function*(){return Rd(e,"DELETE",t,n,s,r)})}var O6=function(e,t,r,n){function s(a){return a instanceof r?a:new r(function(l){l(a)})}return new(r||(r=Promise))(function(a,l){function u(f){try{m(n.next(f))}catch(p){l(p)}}function d(f){try{m(n.throw(f))}catch(p){l(p)}}function m(f){f.done?a(f.value):s(f.value).then(u,d)}m((n=n.apply(e,t||[])).next())})};class T6{constructor(t,r){this.downloadFn=t,this.shouldThrowOnError=r}then(t,r){return this.execute().then(t,r)}execute(){return O6(this,void 0,void 0,function*(){try{return{data:(yield this.downloadFn()).body,error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Nn(t))return{data:null,error:t};throw t}})}}var I6=function(e,t,r,n){function s(a){return a instanceof r?a:new r(function(l){l(a)})}return new(r||(r=Promise))(function(a,l){function u(f){try{m(n.next(f))}catch(p){l(p)}}function d(f){try{m(n.throw(f))}catch(p){l(p)}}function m(f){f.done?a(f.value):s(f.value).then(u,d)}m((n=n.apply(e,t||[])).next())})};class D6{constructor(t,r){this.downloadFn=t,this.shouldThrowOnError=r}asStream(){return new T6(this.downloadFn,this.shouldThrowOnError)}then(t,r){return this.execute().then(t,r)}execute(){return I6(this,void 0,void 0,function*(){try{return{data:yield(yield this.downloadFn()).blob(),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Nn(t))return{data:null,error:t};throw t}})}}var qs=function(e,t,r,n){function s(a){return a instanceof r?a:new r(function(l){l(a)})}return new(r||(r=Promise))(function(a,l){function u(f){try{m(n.next(f))}catch(p){l(p)}}function d(f){try{m(n.throw(f))}catch(p){l(p)}}function m(f){f.done?a(f.value):s(f.value).then(u,d)}m((n=n.apply(e,t||[])).next())})};const $6={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},lS={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class R6{constructor(t,r={},n,s){this.shouldThrowOnError=!1,this.url=t,this.headers=r,this.bucketId=n,this.fetch=oE(s)}throwOnError(){return this.shouldThrowOnError=!0,this}uploadOrUpdate(t,r,n,s){return qs(this,void 0,void 0,function*(){try{let a;const l=Object.assign(Object.assign({},lS),s);let u=Object.assign(Object.assign({},this.headers),t==="POST"&&{"x-upsert":String(l.upsert)});const d=l.metadata;typeof Blob<"u"&&n instanceof Blob?(a=new FormData,a.append("cacheControl",l.cacheControl),d&&a.append("metadata",this.encodeMetadata(d)),a.append("",n)):typeof FormData<"u"&&n instanceof FormData?(a=n,a.append("cacheControl",l.cacheControl),d&&a.append("metadata",this.encodeMetadata(d))):(a=n,u["cache-control"]=`max-age=${l.cacheControl}`,u["content-type"]=l.contentType,d&&(u["x-metadata"]=this.toBase64(this.encodeMetadata(d)))),s!=null&&s.headers&&(u=Object.assign(Object.assign({},u),s.headers));const m=this._removeEmptyFolders(r),f=this._getFinalPath(m),p=yield(t=="PUT"?iv:ba)(this.fetch,`${this.url}/object/${f}`,a,Object.assign({headers:u},l!=null&&l.duplex?{duplex:l.duplex}:{}));return{data:{path:m,id:p.Id,fullPath:p.Key},error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(Nn(a))return{data:null,error:a};throw a}})}upload(t,r,n){return qs(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",t,r,n)})}uploadToSignedUrl(t,r,n,s){return qs(this,void 0,void 0,function*(){const a=this._removeEmptyFolders(t),l=this._getFinalPath(a),u=new URL(this.url+`/object/upload/sign/${l}`);u.searchParams.set("token",r);try{let d;const m=Object.assign({upsert:lS.upsert},s),f=Object.assign(Object.assign({},this.headers),{"x-upsert":String(m.upsert)});typeof Blob<"u"&&n instanceof Blob?(d=new FormData,d.append("cacheControl",m.cacheControl),d.append("",n)):typeof FormData<"u"&&n instanceof FormData?(d=n,d.append("cacheControl",m.cacheControl)):(d=n,f["cache-control"]=`max-age=${m.cacheControl}`,f["content-type"]=m.contentType);const p=yield iv(this.fetch,u.toString(),d,{headers:f});return{data:{path:a,fullPath:p.Key},error:null}}catch(d){if(this.shouldThrowOnError)throw d;if(Nn(d))return{data:null,error:d};throw d}})}createSignedUploadUrl(t,r){return qs(this,void 0,void 0,function*(){try{let n=this._getFinalPath(t);const s=Object.assign({},this.headers);r!=null&&r.upsert&&(s["x-upsert"]="true");const a=yield ba(this.fetch,`${this.url}/object/upload/sign/${n}`,{},{headers:s}),l=new URL(this.url+a.url),u=l.searchParams.get("token");if(!u)throw new Ox("No token returned by API");return{data:{signedUrl:l.toString(),path:t,token:u},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Nn(n))return{data:null,error:n};throw n}})}update(t,r,n){return qs(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",t,r,n)})}move(t,r,n){return qs(this,void 0,void 0,function*(){try{return{data:yield ba(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:t,destinationKey:r,destinationBucket:n==null?void 0:n.destinationBucket},{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Nn(s))return{data:null,error:s};throw s}})}copy(t,r,n){return qs(this,void 0,void 0,function*(){try{return{data:{path:(yield ba(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:t,destinationKey:r,destinationBucket:n==null?void 0:n.destinationBucket},{headers:this.headers})).Key},error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Nn(s))return{data:null,error:s};throw s}})}createSignedUrl(t,r,n){return qs(this,void 0,void 0,function*(){try{let s=this._getFinalPath(t),a=yield ba(this.fetch,`${this.url}/object/sign/${s}`,Object.assign({expiresIn:r},n!=null&&n.transform?{transform:n.transform}:{}),{headers:this.headers});const l=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return a={signedUrl:encodeURI(`${this.url}${a.signedURL}${l}`)},{data:a,error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Nn(s))return{data:null,error:s};throw s}})}createSignedUrls(t,r,n){return qs(this,void 0,void 0,function*(){try{const s=yield ba(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:r,paths:t},{headers:this.headers}),a=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return{data:s.map(l=>Object.assign(Object.assign({},l),{signedUrl:l.signedURL?encodeURI(`${this.url}${l.signedURL}${a}`):null})),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Nn(s))return{data:null,error:s};throw s}})}download(t,r){const s=typeof(r==null?void 0:r.transform)<"u"?"render/image/authenticated":"object",a=this.transformOptsToQueryString((r==null?void 0:r.transform)||{}),l=a?`?${a}`:"",u=this._getFinalPath(t),d=()=>Th(this.fetch,`${this.url}/${s}/${u}${l}`,{headers:this.headers,noResolveJson:!0});return new D6(d,this.shouldThrowOnError)}info(t){return qs(this,void 0,void 0,function*(){const r=this._getFinalPath(t);try{const n=yield Th(this.fetch,`${this.url}/object/info/${r}`,{headers:this.headers});return{data:sv(n),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Nn(n))return{data:null,error:n};throw n}})}exists(t){return qs(this,void 0,void 0,function*(){const r=this._getFinalPath(t);try{return yield P6(this.fetch,`${this.url}/object/${r}`,{headers:this.headers}),{data:!0,error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Nn(n)&&n instanceof nv){const s=n.originalError;if([400,404].includes(s==null?void 0:s.status))return{data:!1,error:n}}throw n}})}getPublicUrl(t,r){const n=this._getFinalPath(t),s=[],a=r!=null&&r.download?`download=${r.download===!0?"":r.download}`:"";a!==""&&s.push(a);const u=typeof(r==null?void 0:r.transform)<"u"?"render/image":"object",d=this.transformOptsToQueryString((r==null?void 0:r.transform)||{});d!==""&&s.push(d);let m=s.join("&");return m!==""&&(m=`?${m}`),{data:{publicUrl:encodeURI(`${this.url}/${u}/public/${n}${m}`)}}}remove(t){return qs(this,void 0,void 0,function*(){try{return{data:yield lE(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:t},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Nn(r))return{data:null,error:r};throw r}})}list(t,r,n){return qs(this,void 0,void 0,function*(){try{const s=Object.assign(Object.assign(Object.assign({},$6),r),{prefix:t||""});return{data:yield ba(this.fetch,`${this.url}/object/list/${this.bucketId}`,s,{headers:this.headers},n),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Nn(s))return{data:null,error:s};throw s}})}listV2(t,r){return qs(this,void 0,void 0,function*(){try{const n=Object.assign({},t);return{data:yield ba(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,n,{headers:this.headers},r),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Nn(n))return{data:null,error:n};throw n}})}encodeMetadata(t){return JSON.stringify(t)}toBase64(t){return typeof Buffer<"u"?Buffer.from(t).toString("base64"):btoa(t)}_getFinalPath(t){return`${this.bucketId}/${t.replace(/^\/+/,"")}`}_removeEmptyFolders(t){return t.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(t){const r=[];return t.width&&r.push(`width=${t.width}`),t.height&&r.push(`height=${t.height}`),t.resize&&r.push(`resize=${t.resize}`),t.format&&r.push(`format=${t.format}`),t.quality&&r.push(`quality=${t.quality}`),r.join("&")}}const M6="2.74.0",F6={"X-Client-Info":`storage-js/${M6}`};var xc=function(e,t,r,n){function s(a){return a instanceof r?a:new r(function(l){l(a)})}return new(r||(r=Promise))(function(a,l){function u(f){try{m(n.next(f))}catch(p){l(p)}}function d(f){try{m(n.throw(f))}catch(p){l(p)}}function m(f){f.done?a(f.value):s(f.value).then(u,d)}m((n=n.apply(e,t||[])).next())})};class L6{constructor(t,r={},n,s){this.shouldThrowOnError=!1;const a=new URL(t);s!=null&&s.useNewHostname&&/supabase\.(co|in|red)$/.test(a.hostname)&&!a.hostname.includes("storage.supabase.")&&(a.hostname=a.hostname.replace("supabase.","storage.supabase.")),this.url=a.href.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},F6),r),this.fetch=oE(n)}throwOnError(){return this.shouldThrowOnError=!0,this}listBuckets(){return xc(this,void 0,void 0,function*(){try{return{data:yield Th(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Nn(t))return{data:null,error:t};throw t}})}getBucket(t){return xc(this,void 0,void 0,function*(){try{return{data:yield Th(this.fetch,`${this.url}/bucket/${t}`,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Nn(r))return{data:null,error:r};throw r}})}createBucket(t){return xc(this,arguments,void 0,function*(r,n={public:!1}){try{return{data:yield ba(this.fetch,`${this.url}/bucket`,{id:r,name:r,type:n.type,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Nn(s))return{data:null,error:s};throw s}})}updateBucket(t,r){return xc(this,void 0,void 0,function*(){try{return{data:yield iv(this.fetch,`${this.url}/bucket/${t}`,{id:t,name:t,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Nn(n))return{data:null,error:n};throw n}})}emptyBucket(t){return xc(this,void 0,void 0,function*(){try{return{data:yield ba(this.fetch,`${this.url}/bucket/${t}/empty`,{},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Nn(r))return{data:null,error:r};throw r}})}deleteBucket(t){return xc(this,void 0,void 0,function*(){try{return{data:yield lE(this.fetch,`${this.url}/bucket/${t}`,{},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Nn(r))return{data:null,error:r};throw r}})}}class z6 extends L6{constructor(t,r={},n,s){super(t,r,n,s)}from(t){return new R6(this.url,this.headers,t,this.fetch)}}const U6="2.74.0";let td="";typeof Deno<"u"?td="deno":typeof document<"u"?td="web":typeof navigator<"u"&&navigator.product==="ReactNative"?td="react-native":td="node";const B6={"X-Client-Info":`supabase-js-${td}/${U6}`},W6={headers:B6},V6={schema:"public"},q6={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},H6={};var K6=function(e,t,r,n){function s(a){return a instanceof r?a:new r(function(l){l(a)})}return new(r||(r=Promise))(function(a,l){function u(f){try{m(n.next(f))}catch(p){l(p)}}function d(f){try{m(n.throw(f))}catch(p){l(p)}}function m(f){f.done?a(f.value):s(f.value).then(u,d)}m((n=n.apply(e,t||[])).next())})};const G6=e=>{let t;return e?t=e:typeof fetch>"u"?t=QC:t=fetch,(...r)=>t(...r)},Y6=()=>typeof Headers>"u"?ZC:Headers,J6=(e,t,r)=>{const n=G6(r),s=Y6();return(a,l)=>K6(void 0,void 0,void 0,function*(){var u;const d=(u=yield t())!==null&&u!==void 0?u:e;let m=new s(l==null?void 0:l.headers);return m.has("apikey")||m.set("apikey",e),m.has("Authorization")||m.set("Authorization",`Bearer ${d}`),n(a,Object.assign(Object.assign({},l),{headers:m}))})};var X6=function(e,t,r,n){function s(a){return a instanceof r?a:new r(function(l){l(a)})}return new(r||(r=Promise))(function(a,l){function u(f){try{m(n.next(f))}catch(p){l(p)}}function d(f){try{m(n.throw(f))}catch(p){l(p)}}function m(f){f.done?a(f.value):s(f.value).then(u,d)}m((n=n.apply(e,t||[])).next())})};function Q6(e){return e.endsWith("/")?e:e+"/"}function Z6(e,t){var r,n;const{db:s,auth:a,realtime:l,global:u}=e,{db:d,auth:m,realtime:f,global:p}=t,y={db:Object.assign(Object.assign({},d),s),auth:Object.assign(Object.assign({},m),a),realtime:Object.assign(Object.assign({},f),l),storage:{},global:Object.assign(Object.assign(Object.assign({},p),u),{headers:Object.assign(Object.assign({},(r=p==null?void 0:p.headers)!==null&&r!==void 0?r:{}),(n=u==null?void 0:u.headers)!==null&&n!==void 0?n:{})}),accessToken:()=>X6(this,void 0,void 0,function*(){return""})};return e.accessToken?y.accessToken=e.accessToken:delete y.accessToken,y}function e3(e){const t=e==null?void 0:e.trim();if(!t)throw new Error("supabaseUrl is required.");if(!t.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(Q6(t))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}const cE="2.74.0",Oc=30*1e3,av=3,iy=av*Oc,t3="http://localhost:9999",r3="supabase.auth.token",n3={"X-Client-Info":`gotrue-js/${cE}`},ov="X-Supabase-Api-Version",uE={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},s3=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,i3=600*1e3;class gd extends Error{constructor(t,r,n){super(t),this.__isAuthError=!0,this.name="AuthError",this.status=r,this.code=n}}function jt(e){return typeof e=="object"&&e!==null&&"__isAuthError"in e}class a3 extends gd{constructor(t,r,n){super(t,r,n),this.name="AuthApiError",this.status=r,this.code=n}}function o3(e){return jt(e)&&e.name==="AuthApiError"}class wl extends gd{constructor(t,r){super(t),this.name="AuthUnknownError",this.originalError=r}}class Yo extends gd{constructor(t,r,n,s){super(t,n,s),this.name=r,this.status=n}}class $o extends Yo{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function l3(e){return jt(e)&&e.name==="AuthSessionMissingError"}class bc extends Yo{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Zf extends Yo{constructor(t){super(t,"AuthInvalidCredentialsError",400,void 0)}}class eh extends Yo{constructor(t,r=null){super(t,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function c3(e){return jt(e)&&e.name==="AuthImplicitGrantRedirectError"}class cS extends Yo{constructor(t,r=null){super(t,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class lv extends Yo{constructor(t,r){super(t,"AuthRetryableFetchError",r,void 0)}}function ay(e){return jt(e)&&e.name==="AuthRetryableFetchError"}class uS extends Yo{constructor(t,r,n){super(t,"AuthWeakPasswordError",r,"weak_password"),this.reasons=n}}class cv extends Yo{constructor(t){super(t,"AuthInvalidJwtError",400,"invalid_jwt")}}const Ih="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),dS=` 	
\r=`.split(""),u3=(()=>{const e=new Array(128);for(let t=0;t<e.length;t+=1)e[t]=-1;for(let t=0;t<dS.length;t+=1)e[dS[t].charCodeAt(0)]=-2;for(let t=0;t<Ih.length;t+=1)e[Ih[t].charCodeAt(0)]=t;return e})();function fS(e,t,r){if(e!==null)for(t.queue=t.queue<<8|e,t.queuedBits+=8;t.queuedBits>=6;){const n=t.queue>>t.queuedBits-6&63;r(Ih[n]),t.queuedBits-=6}else if(t.queuedBits>0)for(t.queue=t.queue<<6-t.queuedBits,t.queuedBits=6;t.queuedBits>=6;){const n=t.queue>>t.queuedBits-6&63;r(Ih[n]),t.queuedBits-=6}}function dE(e,t,r){const n=u3[e];if(n>-1)for(t.queue=t.queue<<6|n,t.queuedBits+=6;t.queuedBits>=8;)r(t.queue>>t.queuedBits-8&255),t.queuedBits-=8;else{if(n===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(e)}"`)}}function hS(e){const t=[],r=l=>{t.push(String.fromCodePoint(l))},n={utf8seq:0,codepoint:0},s={queue:0,queuedBits:0},a=l=>{h3(l,n,r)};for(let l=0;l<e.length;l+=1)dE(e.charCodeAt(l),s,a);return t.join("")}function d3(e,t){if(e<=127){t(e);return}else if(e<=2047){t(192|e>>6),t(128|e&63);return}else if(e<=65535){t(224|e>>12),t(128|e>>6&63),t(128|e&63);return}else if(e<=1114111){t(240|e>>18),t(128|e>>12&63),t(128|e>>6&63),t(128|e&63);return}throw new Error(`Unrecognized Unicode codepoint: ${e.toString(16)}`)}function f3(e,t){for(let r=0;r<e.length;r+=1){let n=e.charCodeAt(r);if(n>55295&&n<=56319){const s=(n-55296)*1024&65535;n=(e.charCodeAt(r+1)-56320&65535|s)+65536,r+=1}d3(n,t)}}function h3(e,t,r){if(t.utf8seq===0){if(e<=127){r(e);return}for(let n=1;n<6;n+=1)if((e>>7-n&1)===0){t.utf8seq=n;break}if(t.utf8seq===2)t.codepoint=e&31;else if(t.utf8seq===3)t.codepoint=e&15;else if(t.utf8seq===4)t.codepoint=e&7;else throw new Error("Invalid UTF-8 sequence");t.utf8seq-=1}else if(t.utf8seq>0){if(e<=127)throw new Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|e&63,t.utf8seq-=1,t.utf8seq===0&&r(t.codepoint)}}function Fc(e){const t=[],r={queue:0,queuedBits:0},n=s=>{t.push(s)};for(let s=0;s<e.length;s+=1)dE(e.charCodeAt(s),r,n);return new Uint8Array(t)}function m3(e){const t=[];return f3(e,r=>t.push(r)),new Uint8Array(t)}function Sl(e){const t=[],r={queue:0,queuedBits:0},n=s=>{t.push(s)};return e.forEach(s=>fS(s,r,n)),fS(null,r,n),t.join("")}function p3(e){return Math.round(Date.now()/1e3)+e}function g3(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){const t=Math.random()*16|0;return(e=="x"?t:t&3|8).toString(16)})}const ai=()=>typeof window<"u"&&typeof document<"u",hl={tested:!1,writable:!1},fE=()=>{if(!ai())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(hl.tested)return hl.writable;const e=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),hl.tested=!0,hl.writable=!0}catch{hl.tested=!0,hl.writable=!1}return hl.writable};function y3(e){const t={},r=new URL(e);if(r.hash&&r.hash[0]==="#")try{new URLSearchParams(r.hash.substring(1)).forEach((s,a)=>{t[a]=s})}catch{}return r.searchParams.forEach((n,s)=>{t[s]=n}),t}const hE=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...r)=>$d(async()=>{const{default:n}=await Promise.resolve().then(()=>ru);return{default:n}},void 0).then(({default:n})=>n(...r)):t=fetch,(...r)=>t(...r)},v3=e=>typeof e=="object"&&e!==null&&"status"in e&&"ok"in e&&"json"in e&&typeof e.json=="function",Tc=async(e,t,r)=>{await e.setItem(t,JSON.stringify(r))},ml=async(e,t)=>{const r=await e.getItem(t);if(!r)return null;try{return JSON.parse(r)}catch{return r}},Do=async(e,t)=>{await e.removeItem(t)};class Im{constructor(){this.promise=new Im.promiseConstructor((t,r)=>{this.resolve=t,this.reject=r})}}Im.promiseConstructor=Promise;function oy(e){const t=e.split(".");if(t.length!==3)throw new cv("Invalid JWT structure");for(let n=0;n<t.length;n++)if(!s3.test(t[n]))throw new cv("JWT not in base64url format");return{header:JSON.parse(hS(t[0])),payload:JSON.parse(hS(t[1])),signature:Fc(t[2]),raw:{header:t[0],payload:t[1]}}}async function x3(e){return await new Promise(t=>{setTimeout(()=>t(null),e)})}function b3(e,t){return new Promise((n,s)=>{(async()=>{for(let a=0;a<1/0;a++)try{const l=await e(a);if(!t(a,null,l)){n(l);return}}catch(l){if(!t(a,l)){s(l);return}}})()})}function w3(e){return("0"+e.toString(16)).substr(-2)}function j3(){const t=new Uint32Array(56);if(typeof crypto>"u"){const r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",n=r.length;let s="";for(let a=0;a<56;a++)s+=r.charAt(Math.floor(Math.random()*n));return s}return crypto.getRandomValues(t),Array.from(t,w3).join("")}async function S3(e){const r=new TextEncoder().encode(e),n=await crypto.subtle.digest("SHA-256",r),s=new Uint8Array(n);return Array.from(s).map(a=>String.fromCharCode(a)).join("")}async function N3(e){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),e;const r=await S3(e);return btoa(r).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function wc(e,t,r=!1){const n=j3();let s=n;r&&(s+="/PASSWORD_RECOVERY"),await Tc(e,`${t}-code-verifier`,s);const a=await N3(n);return[a,n===a?"plain":"s256"]}const k3=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function _3(e){const t=e.headers.get(ov);if(!t||!t.match(k3))return null;try{return new Date(`${t}T00:00:00.0Z`)}catch{return null}}function C3(e){if(!e)throw new Error("Missing exp claim");const t=Math.floor(Date.now()/1e3);if(e<=t)throw new Error("JWT has expired")}function E3(e){switch(e){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const A3=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function jc(e){if(!A3.test(e))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function ly(){const e={};return new Proxy(e,{get:(t,r)=>{if(r==="__isUserNotAvailableProxy")return!0;if(typeof r=="symbol"){const n=r.toString();if(n==="Symbol(Symbol.toPrimitive)"||n==="Symbol(Symbol.toStringTag)"||n==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${r}" property of the session object is not supported. Please use getUser() instead.`)},set:(t,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(t,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function mS(e){return JSON.parse(JSON.stringify(e))}var P3=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(e);s<n.length;s++)t.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(e,n[s])&&(r[n[s]]=e[n[s]]);return r};const gl=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),O3=[502,503,504];async function pS(e){var t;if(!v3(e))throw new lv(gl(e),0);if(O3.includes(e.status))throw new lv(gl(e),e.status);let r;try{r=await e.json()}catch(a){throw new wl(gl(a),a)}let n;const s=_3(e);if(s&&s.getTime()>=uE["2024-01-01"].timestamp&&typeof r=="object"&&r&&typeof r.code=="string"?n=r.code:typeof r=="object"&&r&&typeof r.error_code=="string"&&(n=r.error_code),n){if(n==="weak_password")throw new uS(gl(r),e.status,((t=r.weak_password)===null||t===void 0?void 0:t.reasons)||[]);if(n==="session_not_found")throw new $o}else if(typeof r=="object"&&r&&typeof r.weak_password=="object"&&r.weak_password&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.reasons.reduce((a,l)=>a&&typeof l=="string",!0))throw new uS(gl(r),e.status,r.weak_password.reasons);throw new a3(gl(r),e.status||500,n)}const T3=(e,t,r,n)=>{const s={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"?s:(s.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},t==null?void 0:t.headers),s.body=JSON.stringify(n),Object.assign(Object.assign({},s),r))};async function $t(e,t,r,n){var s;const a=Object.assign({},n==null?void 0:n.headers);a[ov]||(a[ov]=uE["2024-01-01"].name),n!=null&&n.jwt&&(a.Authorization=`Bearer ${n.jwt}`);const l=(s=n==null?void 0:n.query)!==null&&s!==void 0?s:{};n!=null&&n.redirectTo&&(l.redirect_to=n.redirectTo);const u=Object.keys(l).length?"?"+new URLSearchParams(l).toString():"",d=await I3(e,t,r+u,{headers:a,noResolveJson:n==null?void 0:n.noResolveJson},{},n==null?void 0:n.body);return n!=null&&n.xform?n==null?void 0:n.xform(d):{data:Object.assign({},d),error:null}}async function I3(e,t,r,n,s,a){const l=T3(t,n,s,a);let u;try{u=await e(r,Object.assign({},l))}catch(d){throw console.error(d),new lv(gl(d),0)}if(u.ok||await pS(u),n!=null&&n.noResolveJson)return u;try{return await u.json()}catch(d){await pS(d)}}function Ki(e){var t;let r=null;R3(e)&&(r=Object.assign({},e),e.expires_at||(r.expires_at=p3(e.expires_in)));const n=(t=e.user)!==null&&t!==void 0?t:e;return{data:{session:r,user:n},error:null}}function gS(e){const t=Ki(e);return!t.error&&e.weak_password&&typeof e.weak_password=="object"&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.message&&typeof e.weak_password.message=="string"&&e.weak_password.reasons.reduce((r,n)=>r&&typeof n=="string",!0)&&(t.data.weak_password=e.weak_password),t}function zo(e){var t;return{data:{user:(t=e.user)!==null&&t!==void 0?t:e},error:null}}function D3(e){return{data:e,error:null}}function $3(e){const{action_link:t,email_otp:r,hashed_token:n,redirect_to:s,verification_type:a}=e,l=P3(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),u={action_link:t,email_otp:r,hashed_token:n,redirect_to:s,verification_type:a},d=Object.assign({},l);return{data:{properties:u,user:d},error:null}}function yS(e){return e}function R3(e){return e.access_token&&e.refresh_token&&e.expires_in}const cy=["global","local","others"];var M3=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(e);s<n.length;s++)t.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(e,n[s])&&(r[n[s]]=e[n[s]]);return r};class F3{constructor({url:t="",headers:r={},fetch:n}){this.url=t,this.headers=r,this.fetch=hE(n),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(t,r=cy[0]){if(cy.indexOf(r)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${cy.join(", ")}`);try{return await $t(this.fetch,"POST",`${this.url}/logout?scope=${r}`,{headers:this.headers,jwt:t,noResolveJson:!0}),{data:null,error:null}}catch(n){if(jt(n))return{data:null,error:n};throw n}}async inviteUserByEmail(t,r={}){try{return await $t(this.fetch,"POST",`${this.url}/invite`,{body:{email:t,data:r.data},headers:this.headers,redirectTo:r.redirectTo,xform:zo})}catch(n){if(jt(n))return{data:{user:null},error:n};throw n}}async generateLink(t){try{const{options:r}=t,n=M3(t,["options"]),s=Object.assign(Object.assign({},n),r);return"newEmail"in n&&(s.new_email=n==null?void 0:n.newEmail,delete s.newEmail),await $t(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:s,headers:this.headers,xform:$3,redirectTo:r==null?void 0:r.redirectTo})}catch(r){if(jt(r))return{data:{properties:null,user:null},error:r};throw r}}async createUser(t){try{return await $t(this.fetch,"POST",`${this.url}/admin/users`,{body:t,headers:this.headers,xform:zo})}catch(r){if(jt(r))return{data:{user:null},error:r};throw r}}async listUsers(t){var r,n,s,a,l,u,d;try{const m={nextPage:null,lastPage:0,total:0},f=await $t(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(r=t==null?void 0:t.page)===null||r===void 0?void 0:r.toString())!==null&&n!==void 0?n:"",per_page:(a=(s=t==null?void 0:t.perPage)===null||s===void 0?void 0:s.toString())!==null&&a!==void 0?a:""},xform:yS});if(f.error)throw f.error;const p=await f.json(),y=(l=f.headers.get("x-total-count"))!==null&&l!==void 0?l:0,x=(d=(u=f.headers.get("link"))===null||u===void 0?void 0:u.split(","))!==null&&d!==void 0?d:[];return x.length>0&&(x.forEach(j=>{const w=parseInt(j.split(";")[0].split("=")[1].substring(0,1)),S=JSON.parse(j.split(";")[1].split("=")[1]);m[`${S}Page`]=w}),m.total=parseInt(y)),{data:Object.assign(Object.assign({},p),m),error:null}}catch(m){if(jt(m))return{data:{users:[]},error:m};throw m}}async getUserById(t){jc(t);try{return await $t(this.fetch,"GET",`${this.url}/admin/users/${t}`,{headers:this.headers,xform:zo})}catch(r){if(jt(r))return{data:{user:null},error:r};throw r}}async updateUserById(t,r){jc(t);try{return await $t(this.fetch,"PUT",`${this.url}/admin/users/${t}`,{body:r,headers:this.headers,xform:zo})}catch(n){if(jt(n))return{data:{user:null},error:n};throw n}}async deleteUser(t,r=!1){jc(t);try{return await $t(this.fetch,"DELETE",`${this.url}/admin/users/${t}`,{headers:this.headers,body:{should_soft_delete:r},xform:zo})}catch(n){if(jt(n))return{data:{user:null},error:n};throw n}}async _listFactors(t){jc(t.userId);try{const{data:r,error:n}=await $t(this.fetch,"GET",`${this.url}/admin/users/${t.userId}/factors`,{headers:this.headers,xform:s=>({data:{factors:s},error:null})});return{data:r,error:n}}catch(r){if(jt(r))return{data:null,error:r};throw r}}async _deleteFactor(t){jc(t.userId),jc(t.id);try{return{data:await $t(this.fetch,"DELETE",`${this.url}/admin/users/${t.userId}/factors/${t.id}`,{headers:this.headers}),error:null}}catch(r){if(jt(r))return{data:null,error:r};throw r}}async _listOAuthClients(t){var r,n,s,a,l,u,d;try{const m={nextPage:null,lastPage:0,total:0},f=await $t(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(r=t==null?void 0:t.page)===null||r===void 0?void 0:r.toString())!==null&&n!==void 0?n:"",per_page:(a=(s=t==null?void 0:t.perPage)===null||s===void 0?void 0:s.toString())!==null&&a!==void 0?a:""},xform:yS});if(f.error)throw f.error;const p=await f.json(),y=(l=f.headers.get("x-total-count"))!==null&&l!==void 0?l:0,x=(d=(u=f.headers.get("link"))===null||u===void 0?void 0:u.split(","))!==null&&d!==void 0?d:[];return x.length>0&&(x.forEach(j=>{const w=parseInt(j.split(";")[0].split("=")[1].substring(0,1)),S=JSON.parse(j.split(";")[1].split("=")[1]);m[`${S}Page`]=w}),m.total=parseInt(y)),{data:Object.assign(Object.assign({},p),m),error:null}}catch(m){if(jt(m))return{data:{clients:[]},error:m};throw m}}async _createOAuthClient(t){try{return await $t(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:t,headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(jt(r))return{data:null,error:r};throw r}}async _getOAuthClient(t){try{return await $t(this.fetch,"GET",`${this.url}/admin/oauth/clients/${t}`,{headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(jt(r))return{data:null,error:r};throw r}}async _deleteOAuthClient(t){try{return await $t(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${t}`,{headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(jt(r))return{data:null,error:r};throw r}}async _regenerateOAuthClientSecret(t){try{return await $t(this.fetch,"POST",`${this.url}/admin/oauth/clients/${t}/regenerate_secret`,{headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(jt(r))return{data:null,error:r};throw r}}}function vS(e={}){return{getItem:t=>e[t]||null,setItem:(t,r)=>{e[t]=r},removeItem:t=>{delete e[t]}}}const Sc={debug:!!(globalThis&&fE()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class mE extends Error{constructor(t){super(t),this.isAcquireTimeout=!0}}class L3 extends mE{}async function z3(e,t,r){Sc.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",e,t);const n=new globalThis.AbortController;return t>0&&setTimeout(()=>{n.abort(),Sc.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",e)},t),await Promise.resolve().then(()=>globalThis.navigator.locks.request(e,t===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:n.signal},async s=>{if(s){Sc.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",e,s.name);try{return await r()}finally{Sc.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",e,s.name)}}else{if(t===0)throw Sc.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",e),new L3(`Acquiring an exclusive Navigator LockManager lock "${e}" immediately failed`);if(Sc.debug)try{const a=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(a,null,"  "))}catch(a){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",a)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await r()}}))}function U3(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function pE(e){if(!/^0x[a-fA-F0-9]{40}$/.test(e))throw new Error(`@supabase/auth-js: Address "${e}" is invalid.`);return e.toLowerCase()}function B3(e){return parseInt(e,16)}function W3(e){const t=new TextEncoder().encode(e);return"0x"+Array.from(t,n=>n.toString(16).padStart(2,"0")).join("")}function V3(e){var t;const{chainId:r,domain:n,expirationTime:s,issuedAt:a=new Date,nonce:l,notBefore:u,requestId:d,resources:m,scheme:f,uri:p,version:y}=e;{if(!Number.isInteger(r))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${r}`);if(!n)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(l&&l.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${l}`);if(!p)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(y!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${y}`);if(!((t=e.statement)===null||t===void 0)&&t.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${e.statement}`)}const x=pE(e.address),j=f?`${f}://${n}`:n,w=e.statement?`${e.statement}
`:"",S=`${j} wants you to sign in with your Ethereum account:
${x}

${w}`;let _=`URI: ${p}
Version: ${y}
Chain ID: ${r}${l?`
Nonce: ${l}`:""}
Issued At: ${a.toISOString()}`;if(s&&(_+=`
Expiration Time: ${s.toISOString()}`),u&&(_+=`
Not Before: ${u.toISOString()}`),d&&(_+=`
Request ID: ${d}`),m){let E=`
Resources:`;for(const C of m){if(!C||typeof C!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${C}`);E+=`
- ${C}`}_+=E}return`${S}
${_}`}class Sn extends Error{constructor({message:t,code:r,cause:n,name:s}){var a;super(t,{cause:n}),this.__isWebAuthnError=!0,this.name=(a=s??(n instanceof Error?n.name:void 0))!==null&&a!==void 0?a:"Unknown Error",this.code=r}}class Dh extends Sn{constructor(t,r){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:r,message:t}),this.name="WebAuthnUnknownError",this.originalError=r}}function q3({error:e,options:t}){var r,n,s;const{publicKey:a}=t;if(!a)throw Error("options was missing required publicKey property");if(e.name==="AbortError"){if(t.signal instanceof AbortSignal)return new Sn({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:e})}else if(e.name==="ConstraintError"){if(((r=a.authenticatorSelection)===null||r===void 0?void 0:r.requireResidentKey)===!0)return new Sn({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:e});if(t.mediation==="conditional"&&((n=a.authenticatorSelection)===null||n===void 0?void 0:n.userVerification)==="required")return new Sn({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:e});if(((s=a.authenticatorSelection)===null||s===void 0?void 0:s.userVerification)==="required")return new Sn({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:e})}else{if(e.name==="InvalidStateError")return new Sn({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:e});if(e.name==="NotAllowedError")return new Sn({message:e.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e});if(e.name==="NotSupportedError")return a.pubKeyCredParams.filter(u=>u.type==="public-key").length===0?new Sn({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:e}):new Sn({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:e});if(e.name==="SecurityError"){const l=window.location.hostname;if(yE(l)){if(a.rp.id!==l)return new Sn({message:`The RP ID "${a.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:e})}else return new Sn({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:e})}else if(e.name==="TypeError"){if(a.user.id.byteLength<1||a.user.id.byteLength>64)return new Sn({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:e})}else if(e.name==="UnknownError")return new Sn({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:e})}return new Sn({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e})}function H3({error:e,options:t}){const{publicKey:r}=t;if(!r)throw Error("options was missing required publicKey property");if(e.name==="AbortError"){if(t.signal instanceof AbortSignal)return new Sn({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:e})}else{if(e.name==="NotAllowedError")return new Sn({message:e.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e});if(e.name==="SecurityError"){const n=window.location.hostname;if(yE(n)){if(r.rpId!==n)return new Sn({message:`The RP ID "${r.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:e})}else return new Sn({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:e})}else if(e.name==="UnknownError")return new Sn({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:e})}return new Sn({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e})}var gE=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(e);s<n.length;s++)t.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(e,n[s])&&(r[n[s]]=e[n[s]]);return r};class K3{createNewAbortSignal(){if(this.controller){const r=new Error("Cancelling existing WebAuthn API call for new one");r.name="AbortError",this.controller.abort(r)}const t=new AbortController;return this.controller=t,t.signal}cancelCeremony(){if(this.controller){const t=new Error("Manually cancelling existing WebAuthn API call");t.name="AbortError",this.controller.abort(t),this.controller=void 0}}}const G3=new K3;function Y3(e){if(!e)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(e);const{challenge:t,user:r,excludeCredentials:n}=e,s=gE(e,["challenge","user","excludeCredentials"]),a=Fc(t).buffer,l=Object.assign(Object.assign({},r),{id:Fc(r.id).buffer}),u=Object.assign(Object.assign({},s),{challenge:a,user:l});if(n&&n.length>0){u.excludeCredentials=new Array(n.length);for(let d=0;d<n.length;d++){const m=n[d];u.excludeCredentials[d]=Object.assign(Object.assign({},m),{id:Fc(m.id).buffer,type:m.type||"public-key",transports:m.transports})}}return u}function J3(e){if(!e)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(e);const{challenge:t,allowCredentials:r}=e,n=gE(e,["challenge","allowCredentials"]),s=Fc(t).buffer,a=Object.assign(Object.assign({},n),{challenge:s});if(r&&r.length>0){a.allowCredentials=new Array(r.length);for(let l=0;l<r.length;l++){const u=r[l];a.allowCredentials[l]=Object.assign(Object.assign({},u),{id:Fc(u.id).buffer,type:u.type||"public-key",transports:u.transports})}}return a}function X3(e){var t;if("toJSON"in e&&typeof e.toJSON=="function")return e.toJSON();const r=e;return{id:e.id,rawId:e.id,response:{attestationObject:Sl(new Uint8Array(e.response.attestationObject)),clientDataJSON:Sl(new Uint8Array(e.response.clientDataJSON))},type:"public-key",clientExtensionResults:e.getClientExtensionResults(),authenticatorAttachment:(t=r.authenticatorAttachment)!==null&&t!==void 0?t:void 0}}function Q3(e){var t;if("toJSON"in e&&typeof e.toJSON=="function")return e.toJSON();const r=e,n=e.getClientExtensionResults(),s=e.response;return{id:e.id,rawId:e.id,response:{authenticatorData:Sl(new Uint8Array(s.authenticatorData)),clientDataJSON:Sl(new Uint8Array(s.clientDataJSON)),signature:Sl(new Uint8Array(s.signature)),userHandle:s.userHandle?Sl(new Uint8Array(s.userHandle)):void 0},type:"public-key",clientExtensionResults:n,authenticatorAttachment:(t=r.authenticatorAttachment)!==null&&t!==void 0?t:void 0}}function yE(e){return e==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(e)}function xS(){var e,t;return!!(ai()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((e=navigator==null?void 0:navigator.credentials)===null||e===void 0?void 0:e.create)=="function"&&typeof((t=navigator==null?void 0:navigator.credentials)===null||t===void 0?void 0:t.get)=="function")}async function Z3(e){try{const t=await navigator.credentials.create(e);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new Dh("Browser returned unexpected credential type",t)}:{data:null,error:new Dh("Empty credential response",t)}}catch(t){return{data:null,error:q3({error:t,options:e})}}}async function e$(e){try{const t=await navigator.credentials.get(e);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new Dh("Browser returned unexpected credential type",t)}:{data:null,error:new Dh("Empty credential response",t)}}catch(t){return{data:null,error:H3({error:t,options:e})}}}const t$={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"none"},r$={userVerification:"preferred",hints:["security-key"]};function $h(...e){const t=s=>s!==null&&typeof s=="object"&&!Array.isArray(s),r=s=>s instanceof ArrayBuffer||ArrayBuffer.isView(s),n={};for(const s of e)if(s)for(const a in s){const l=s[a];if(l!==void 0)if(Array.isArray(l))n[a]=l;else if(r(l))n[a]=l;else if(t(l)){const u=n[a];t(u)?n[a]=$h(u,l):n[a]=$h(l)}else n[a]=l}return n}function n$(e,t){return $h(t$,e,t||{})}function s$(e,t){return $h(r$,e,t||{})}class i${constructor(t){this.client=t,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(t){return this.client.mfa.enroll(Object.assign(Object.assign({},t),{factorType:"webauthn"}))}async _challenge({factorId:t,webauthn:r,friendlyName:n,signal:s},a){try{const{data:l,error:u}=await this.client.mfa.challenge({factorId:t,webauthn:r});if(!l)return{data:null,error:u};const d=s??G3.createNewAbortSignal();if(l.webauthn.type==="create"){const{user:m}=l.webauthn.credential_options.publicKey;m.name||(m.name=`${m.id}:${n}`),m.displayName||(m.displayName=m.name)}switch(l.webauthn.type){case"create":{const m=n$(l.webauthn.credential_options.publicKey,a==null?void 0:a.create),{data:f,error:p}=await Z3({publicKey:m,signal:d});return f?{data:{factorId:t,challengeId:l.id,webauthn:{type:l.webauthn.type,credential_response:f}},error:null}:{data:null,error:p}}case"request":{const m=s$(l.webauthn.credential_options.publicKey,a==null?void 0:a.request),{data:f,error:p}=await e$(Object.assign(Object.assign({},l.webauthn.credential_options),{publicKey:m,signal:d}));return f?{data:{factorId:t,challengeId:l.id,webauthn:{type:l.webauthn.type,credential_response:f}},error:null}:{data:null,error:p}}}}catch(l){return jt(l)?{data:null,error:l}:{data:null,error:new wl("Unexpected error in challenge",l)}}}async _verify({challengeId:t,factorId:r,webauthn:n}){return this.client.mfa.verify({factorId:r,challengeId:t,webauthn:n})}async _authenticate({factorId:t,webauthn:{rpId:r=typeof window<"u"?window.location.hostname:void 0,rpOrigins:n=typeof window<"u"?[window.location.origin]:void 0,signal:s}},a){if(!r)return{data:null,error:new gd("rpId is required for WebAuthn authentication")};try{if(!xS())return{data:null,error:new wl("Browser does not support WebAuthn",null)};const{data:l,error:u}=await this.challenge({factorId:t,webauthn:{rpId:r,rpOrigins:n},signal:s},{request:a});if(!l)return{data:null,error:u};const{webauthn:d}=l;return this._verify({factorId:t,challengeId:l.challengeId,webauthn:{type:d.type,rpId:r,rpOrigins:n,credential_response:d.credential_response}})}catch(l){return jt(l)?{data:null,error:l}:{data:null,error:new wl("Unexpected error in authenticate",l)}}}async _register({friendlyName:t,rpId:r=typeof window<"u"?window.location.hostname:void 0,rpOrigins:n=typeof window<"u"?[window.location.origin]:void 0,signal:s},a){if(!r)return{data:null,error:new gd("rpId is required for WebAuthn registration")};try{if(!xS())return{data:null,error:new wl("Browser does not support WebAuthn",null)};const{data:l,error:u}=await this._enroll({friendlyName:t});if(!l)return await this.client.mfa.listFactors().then(f=>{var p;return(p=f.data)===null||p===void 0?void 0:p.all.find(y=>y.factor_type==="webauthn"&&y.friendly_name===t&&y.status!=="unverified")}).then(f=>f?this.client.mfa.unenroll({factorId:f==null?void 0:f.id}):void 0),{data:null,error:u};const{data:d,error:m}=await this._challenge({factorId:l.id,friendlyName:l.friendly_name,webauthn:{rpId:r,rpOrigins:n},signal:s},{create:a});return d?this._verify({factorId:l.id,challengeId:d.challengeId,webauthn:{rpId:r,rpOrigins:n,type:d.webauthn.type,credential_response:d.webauthn.credential_response}}):{data:null,error:m}}catch(l){return jt(l)?{data:null,error:l}:{data:null,error:new wl("Unexpected error in register",l)}}}}U3();const a$={url:t3,storageKey:r3,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:n3,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function bS(e,t,r){return await r()}const Nc={};class yd{get jwks(){var t,r;return(r=(t=Nc[this.storageKey])===null||t===void 0?void 0:t.jwks)!==null&&r!==void 0?r:{keys:[]}}set jwks(t){Nc[this.storageKey]=Object.assign(Object.assign({},Nc[this.storageKey]),{jwks:t})}get jwks_cached_at(){var t,r;return(r=(t=Nc[this.storageKey])===null||t===void 0?void 0:t.cachedAt)!==null&&r!==void 0?r:Number.MIN_SAFE_INTEGER}set jwks_cached_at(t){Nc[this.storageKey]=Object.assign(Object.assign({},Nc[this.storageKey]),{cachedAt:t})}constructor(t){var r,n;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=yd.nextInstanceID,yd.nextInstanceID+=1,this.instanceID>0&&ai()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const s=Object.assign(Object.assign({},a$),t);if(this.logDebugMessages=!!s.debug,typeof s.debug=="function"&&(this.logger=s.debug),this.persistSession=s.persistSession,this.storageKey=s.storageKey,this.autoRefreshToken=s.autoRefreshToken,this.admin=new F3({url:s.url,headers:s.headers,fetch:s.fetch}),this.url=s.url,this.headers=s.headers,this.fetch=hE(s.fetch),this.lock=s.lock||bS,this.detectSessionInUrl=s.detectSessionInUrl,this.flowType=s.flowType,this.hasCustomAuthorizationHeader=s.hasCustomAuthorizationHeader,s.lock?this.lock=s.lock:ai()&&(!((r=globalThis==null?void 0:globalThis.navigator)===null||r===void 0)&&r.locks)?this.lock=z3:this.lock=bS,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new i$(this)},this.persistSession?(s.storage?this.storage=s.storage:fE()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=vS(this.memoryStorage)),s.userStorage&&(this.userStorage=s.userStorage)):(this.memoryStorage={},this.storage=vS(this.memoryStorage)),ai()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(a){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",a)}(n=this.broadcastChannel)===null||n===void 0||n.addEventListener("message",async a=>{this._debug("received broadcast notification from other tab or client",a),await this._notifyAllSubscribers(a.data.event,a.data.session,!1)})}this.initialize()}_debug(...t){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${cE}) ${new Date().toISOString()}`,...t),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var t;try{const r=y3(window.location.href);let n="none";if(this._isImplicitGrantCallback(r)?n="implicit":await this._isPKCECallback(r)&&(n="pkce"),ai()&&this.detectSessionInUrl&&n!=="none"){const{data:s,error:a}=await this._getSessionFromURL(r,n);if(a){if(this._debug("#_initialize()","error detecting session from URL",a),c3(a)){const d=(t=a.details)===null||t===void 0?void 0:t.code;if(d==="identity_already_exists"||d==="identity_not_found"||d==="single_identity_not_deletable")return{error:a}}return await this._removeSession(),{error:a}}const{session:l,redirectType:u}=s;return this._debug("#_initialize()","detected session in URL",l,"redirect type",u),await this._saveSession(l),setTimeout(async()=>{u==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",l):await this._notifyAllSubscribers("SIGNED_IN",l)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(r){return jt(r)?{error:r}:{error:new wl("Unexpected error during initialization",r)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(t){var r,n,s;try{const a=await $t(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(n=(r=t==null?void 0:t.options)===null||r===void 0?void 0:r.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:(s=t==null?void 0:t.options)===null||s===void 0?void 0:s.captchaToken}},xform:Ki}),{data:l,error:u}=a;if(u||!l)return{data:{user:null,session:null},error:u};const d=l.session,m=l.user;return l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",d)),{data:{user:m,session:d},error:null}}catch(a){if(jt(a))return{data:{user:null,session:null},error:a};throw a}}async signUp(t){var r,n,s;try{let a;if("email"in t){const{email:f,password:p,options:y}=t;let x=null,j=null;this.flowType==="pkce"&&([x,j]=await wc(this.storage,this.storageKey)),a=await $t(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:y==null?void 0:y.emailRedirectTo,body:{email:f,password:p,data:(r=y==null?void 0:y.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:y==null?void 0:y.captchaToken},code_challenge:x,code_challenge_method:j},xform:Ki})}else if("phone"in t){const{phone:f,password:p,options:y}=t;a=await $t(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:f,password:p,data:(n=y==null?void 0:y.data)!==null&&n!==void 0?n:{},channel:(s=y==null?void 0:y.channel)!==null&&s!==void 0?s:"sms",gotrue_meta_security:{captcha_token:y==null?void 0:y.captchaToken}},xform:Ki})}else throw new Zf("You must provide either an email or phone number and a password");const{data:l,error:u}=a;if(u||!l)return{data:{user:null,session:null},error:u};const d=l.session,m=l.user;return l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",d)),{data:{user:m,session:d},error:null}}catch(a){if(jt(a))return{data:{user:null,session:null},error:a};throw a}}async signInWithPassword(t){try{let r;if("email"in t){const{email:a,password:l,options:u}=t;r=await $t(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:a,password:l,gotrue_meta_security:{captcha_token:u==null?void 0:u.captchaToken}},xform:gS})}else if("phone"in t){const{phone:a,password:l,options:u}=t;r=await $t(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:a,password:l,gotrue_meta_security:{captcha_token:u==null?void 0:u.captchaToken}},xform:gS})}else throw new Zf("You must provide either an email or phone number and a password");const{data:n,error:s}=r;return s?{data:{user:null,session:null},error:s}:!n||!n.session||!n.user?{data:{user:null,session:null},error:new bc}:(n.session&&(await this._saveSession(n.session),await this._notifyAllSubscribers("SIGNED_IN",n.session)),{data:Object.assign({user:n.user,session:n.session},n.weak_password?{weakPassword:n.weak_password}:null),error:s})}catch(r){if(jt(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithOAuth(t){var r,n,s,a;return await this._handleProviderSignIn(t.provider,{redirectTo:(r=t.options)===null||r===void 0?void 0:r.redirectTo,scopes:(n=t.options)===null||n===void 0?void 0:n.scopes,queryParams:(s=t.options)===null||s===void 0?void 0:s.queryParams,skipBrowserRedirect:(a=t.options)===null||a===void 0?void 0:a.skipBrowserRedirect})}async exchangeCodeForSession(t){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(t))}async signInWithWeb3(t){const{chain:r}=t;switch(r){case"ethereum":return await this.signInWithEthereum(t);case"solana":return await this.signInWithSolana(t);default:throw new Error(`@supabase/auth-js: Unsupported chain "${r}"`)}}async signInWithEthereum(t){var r,n,s,a,l,u,d,m,f,p,y;let x,j;if("message"in t)x=t.message,j=t.signature;else{const{chain:w,wallet:S,statement:_,options:E}=t;let C;if(ai())if(typeof S=="object")C=S;else{const H=window;if("ethereum"in H&&typeof H.ethereum=="object"&&"request"in H.ethereum&&typeof H.ethereum.request=="function")C=H.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof S!="object"||!(E!=null&&E.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");C=S}const A=new URL((r=E==null?void 0:E.url)!==null&&r!==void 0?r:window.location.href),T=await C.request({method:"eth_requestAccounts"}).then(H=>H).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!T||T.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const P=pE(T[0]);let z=(n=E==null?void 0:E.signInWithEthereum)===null||n===void 0?void 0:n.chainId;if(!z){const H=await C.request({method:"eth_chainId"});z=B3(H)}const J={domain:A.host,address:P,statement:_,uri:A.href,version:"1",chainId:z,nonce:(s=E==null?void 0:E.signInWithEthereum)===null||s===void 0?void 0:s.nonce,issuedAt:(l=(a=E==null?void 0:E.signInWithEthereum)===null||a===void 0?void 0:a.issuedAt)!==null&&l!==void 0?l:new Date,expirationTime:(u=E==null?void 0:E.signInWithEthereum)===null||u===void 0?void 0:u.expirationTime,notBefore:(d=E==null?void 0:E.signInWithEthereum)===null||d===void 0?void 0:d.notBefore,requestId:(m=E==null?void 0:E.signInWithEthereum)===null||m===void 0?void 0:m.requestId,resources:(f=E==null?void 0:E.signInWithEthereum)===null||f===void 0?void 0:f.resources};x=V3(J),j=await C.request({method:"personal_sign",params:[W3(x),P]})}try{const{data:w,error:S}=await $t(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:x,signature:j},!((p=t.options)===null||p===void 0)&&p.captchaToken?{gotrue_meta_security:{captcha_token:(y=t.options)===null||y===void 0?void 0:y.captchaToken}}:null),xform:Ki});if(S)throw S;return!w||!w.session||!w.user?{data:{user:null,session:null},error:new bc}:(w.session&&(await this._saveSession(w.session),await this._notifyAllSubscribers("SIGNED_IN",w.session)),{data:Object.assign({},w),error:S})}catch(w){if(jt(w))return{data:{user:null,session:null},error:w};throw w}}async signInWithSolana(t){var r,n,s,a,l,u,d,m,f,p,y,x;let j,w;if("message"in t)j=t.message,w=t.signature;else{const{chain:S,wallet:_,statement:E,options:C}=t;let A;if(ai())if(typeof _=="object")A=_;else{const P=window;if("solana"in P&&typeof P.solana=="object"&&("signIn"in P.solana&&typeof P.solana.signIn=="function"||"signMessage"in P.solana&&typeof P.solana.signMessage=="function"))A=P.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof _!="object"||!(C!=null&&C.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");A=_}const T=new URL((r=C==null?void 0:C.url)!==null&&r!==void 0?r:window.location.href);if("signIn"in A&&A.signIn){const P=await A.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},C==null?void 0:C.signInWithSolana),{version:"1",domain:T.host,uri:T.href}),E?{statement:E}:null));let z;if(Array.isArray(P)&&P[0]&&typeof P[0]=="object")z=P[0];else if(P&&typeof P=="object"&&"signedMessage"in P&&"signature"in P)z=P;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in z&&"signature"in z&&(typeof z.signedMessage=="string"||z.signedMessage instanceof Uint8Array)&&z.signature instanceof Uint8Array)j=typeof z.signedMessage=="string"?z.signedMessage:new TextDecoder().decode(z.signedMessage),w=z.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in A)||typeof A.signMessage!="function"||!("publicKey"in A)||typeof A!="object"||!A.publicKey||!("toBase58"in A.publicKey)||typeof A.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");j=[`${T.host} wants you to sign in with your Solana account:`,A.publicKey.toBase58(),...E?["",E,""]:[""],"Version: 1",`URI: ${T.href}`,`Issued At: ${(s=(n=C==null?void 0:C.signInWithSolana)===null||n===void 0?void 0:n.issuedAt)!==null&&s!==void 0?s:new Date().toISOString()}`,...!((a=C==null?void 0:C.signInWithSolana)===null||a===void 0)&&a.notBefore?[`Not Before: ${C.signInWithSolana.notBefore}`]:[],...!((l=C==null?void 0:C.signInWithSolana)===null||l===void 0)&&l.expirationTime?[`Expiration Time: ${C.signInWithSolana.expirationTime}`]:[],...!((u=C==null?void 0:C.signInWithSolana)===null||u===void 0)&&u.chainId?[`Chain ID: ${C.signInWithSolana.chainId}`]:[],...!((d=C==null?void 0:C.signInWithSolana)===null||d===void 0)&&d.nonce?[`Nonce: ${C.signInWithSolana.nonce}`]:[],...!((m=C==null?void 0:C.signInWithSolana)===null||m===void 0)&&m.requestId?[`Request ID: ${C.signInWithSolana.requestId}`]:[],...!((p=(f=C==null?void 0:C.signInWithSolana)===null||f===void 0?void 0:f.resources)===null||p===void 0)&&p.length?["Resources",...C.signInWithSolana.resources.map(z=>`- ${z}`)]:[]].join(`
`);const P=await A.signMessage(new TextEncoder().encode(j),"utf8");if(!P||!(P instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");w=P}}try{const{data:S,error:_}=await $t(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:j,signature:Sl(w)},!((y=t.options)===null||y===void 0)&&y.captchaToken?{gotrue_meta_security:{captcha_token:(x=t.options)===null||x===void 0?void 0:x.captchaToken}}:null),xform:Ki});if(_)throw _;return!S||!S.session||!S.user?{data:{user:null,session:null},error:new bc}:(S.session&&(await this._saveSession(S.session),await this._notifyAllSubscribers("SIGNED_IN",S.session)),{data:Object.assign({},S),error:_})}catch(S){if(jt(S))return{data:{user:null,session:null},error:S};throw S}}async _exchangeCodeForSession(t){const r=await ml(this.storage,`${this.storageKey}-code-verifier`),[n,s]=(r??"").split("/");try{const{data:a,error:l}=await $t(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:t,code_verifier:n},xform:Ki});if(await Do(this.storage,`${this.storageKey}-code-verifier`),l)throw l;return!a||!a.session||!a.user?{data:{user:null,session:null,redirectType:null},error:new bc}:(a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",a.session)),{data:Object.assign(Object.assign({},a),{redirectType:s??null}),error:l})}catch(a){if(jt(a))return{data:{user:null,session:null,redirectType:null},error:a};throw a}}async signInWithIdToken(t){try{const{options:r,provider:n,token:s,access_token:a,nonce:l}=t,u=await $t(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:n,id_token:s,access_token:a,nonce:l,gotrue_meta_security:{captcha_token:r==null?void 0:r.captchaToken}},xform:Ki}),{data:d,error:m}=u;return m?{data:{user:null,session:null},error:m}:!d||!d.session||!d.user?{data:{user:null,session:null},error:new bc}:(d.session&&(await this._saveSession(d.session),await this._notifyAllSubscribers("SIGNED_IN",d.session)),{data:d,error:m})}catch(r){if(jt(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithOtp(t){var r,n,s,a,l;try{if("email"in t){const{email:u,options:d}=t;let m=null,f=null;this.flowType==="pkce"&&([m,f]=await wc(this.storage,this.storageKey));const{error:p}=await $t(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:u,data:(r=d==null?void 0:d.data)!==null&&r!==void 0?r:{},create_user:(n=d==null?void 0:d.shouldCreateUser)!==null&&n!==void 0?n:!0,gotrue_meta_security:{captcha_token:d==null?void 0:d.captchaToken},code_challenge:m,code_challenge_method:f},redirectTo:d==null?void 0:d.emailRedirectTo});return{data:{user:null,session:null},error:p}}if("phone"in t){const{phone:u,options:d}=t,{data:m,error:f}=await $t(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:u,data:(s=d==null?void 0:d.data)!==null&&s!==void 0?s:{},create_user:(a=d==null?void 0:d.shouldCreateUser)!==null&&a!==void 0?a:!0,gotrue_meta_security:{captcha_token:d==null?void 0:d.captchaToken},channel:(l=d==null?void 0:d.channel)!==null&&l!==void 0?l:"sms"}});return{data:{user:null,session:null,messageId:m==null?void 0:m.message_id},error:f}}throw new Zf("You must provide either an email or phone number.")}catch(u){if(jt(u))return{data:{user:null,session:null},error:u};throw u}}async verifyOtp(t){var r,n;try{let s,a;"options"in t&&(s=(r=t.options)===null||r===void 0?void 0:r.redirectTo,a=(n=t.options)===null||n===void 0?void 0:n.captchaToken);const{data:l,error:u}=await $t(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},t),{gotrue_meta_security:{captcha_token:a}}),redirectTo:s,xform:Ki});if(u)throw u;if(!l)throw new Error("An error occurred on token verification.");const d=l.session,m=l.user;return d!=null&&d.access_token&&(await this._saveSession(d),await this._notifyAllSubscribers(t.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",d)),{data:{user:m,session:d},error:null}}catch(s){if(jt(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithSSO(t){var r,n,s;try{let a=null,l=null;return this.flowType==="pkce"&&([a,l]=await wc(this.storage,this.storageKey)),await $t(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in t?{provider_id:t.providerId}:null),"domain"in t?{domain:t.domain}:null),{redirect_to:(n=(r=t.options)===null||r===void 0?void 0:r.redirectTo)!==null&&n!==void 0?n:void 0}),!((s=t==null?void 0:t.options)===null||s===void 0)&&s.captchaToken?{gotrue_meta_security:{captcha_token:t.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:a,code_challenge_method:l}),headers:this.headers,xform:D3})}catch(a){if(jt(a))return{data:null,error:a};throw a}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async t=>{const{data:{session:r},error:n}=t;if(n)throw n;if(!r)throw new $o;const{error:s}=await $t(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:r.access_token});return{data:{user:null,session:null},error:s}})}catch(t){if(jt(t))return{data:{user:null,session:null},error:t};throw t}}async resend(t){try{const r=`${this.url}/resend`;if("email"in t){const{email:n,type:s,options:a}=t,{error:l}=await $t(this.fetch,"POST",r,{headers:this.headers,body:{email:n,type:s,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},redirectTo:a==null?void 0:a.emailRedirectTo});return{data:{user:null,session:null},error:l}}else if("phone"in t){const{phone:n,type:s,options:a}=t,{data:l,error:u}=await $t(this.fetch,"POST",r,{headers:this.headers,body:{phone:n,type:s,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}}});return{data:{user:null,session:null,messageId:l==null?void 0:l.message_id},error:u}}throw new Zf("You must provide either an email or phone number and a type")}catch(r){if(jt(r))return{data:{user:null,session:null},error:r};throw r}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async r=>r))}async _acquireLock(t,r){this._debug("#_acquireLock","begin",t);try{if(this.lockAcquired){const n=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),s=(async()=>(await n,await r()))();return this.pendingInLock.push((async()=>{try{await s}catch{}})()),s}return await this.lock(`lock:${this.storageKey}`,t,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const n=r();for(this.pendingInLock.push((async()=>{try{await n}catch{}})()),await n;this.pendingInLock.length;){const s=[...this.pendingInLock];await Promise.all(s),this.pendingInLock.splice(0,s.length)}return await n}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(t){this._debug("#_useSession","begin");try{const r=await this.__loadSession();return await t(r)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let t=null;const r=await ml(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",r),r!==null&&(this._isValidSession(r)?t=r:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!t)return{data:{session:null},error:null};const n=t.expires_at?t.expires_at*1e3-Date.now()<iy:!1;if(this._debug("#__loadSession()",`session has${n?"":" not"} expired`,"expires_at",t.expires_at),!n){if(this.userStorage){const l=await ml(this.userStorage,this.storageKey+"-user");l!=null&&l.user?t.user=l.user:t.user=ly()}if(this.storage.isServer&&t.user){let l=this.suppressGetSessionWarning;t=new Proxy(t,{get:(d,m,f)=>(!l&&m==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),l=!0,this.suppressGetSessionWarning=!0),Reflect.get(d,m,f))})}return{data:{session:t},error:null}}const{data:s,error:a}=await this._callRefreshToken(t.refresh_token);return a?{data:{session:null},error:a}:{data:{session:s},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(t){return t?await this._getUser(t):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(t){try{return t?await $t(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:t,xform:zo}):await this._useSession(async r=>{var n,s,a;const{data:l,error:u}=r;if(u)throw u;return!(!((n=l.session)===null||n===void 0)&&n.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new $o}:await $t(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(a=(s=l.session)===null||s===void 0?void 0:s.access_token)!==null&&a!==void 0?a:void 0,xform:zo})})}catch(r){if(jt(r))return l3(r)&&(await this._removeSession(),await Do(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:r};throw r}}async updateUser(t,r={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(t,r))}async _updateUser(t,r={}){try{return await this._useSession(async n=>{const{data:s,error:a}=n;if(a)throw a;if(!s.session)throw new $o;const l=s.session;let u=null,d=null;this.flowType==="pkce"&&t.email!=null&&([u,d]=await wc(this.storage,this.storageKey));const{data:m,error:f}=await $t(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:r==null?void 0:r.emailRedirectTo,body:Object.assign(Object.assign({},t),{code_challenge:u,code_challenge_method:d}),jwt:l.access_token,xform:zo});if(f)throw f;return l.user=m.user,await this._saveSession(l),await this._notifyAllSubscribers("USER_UPDATED",l),{data:{user:l.user},error:null}})}catch(n){if(jt(n))return{data:{user:null},error:n};throw n}}async setSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(t))}async _setSession(t){try{if(!t.access_token||!t.refresh_token)throw new $o;const r=Date.now()/1e3;let n=r,s=!0,a=null;const{payload:l}=oy(t.access_token);if(l.exp&&(n=l.exp,s=n<=r),s){const{data:u,error:d}=await this._callRefreshToken(t.refresh_token);if(d)return{data:{user:null,session:null},error:d};if(!u)return{data:{user:null,session:null},error:null};a=u}else{const{data:u,error:d}=await this._getUser(t.access_token);if(d)throw d;a={access_token:t.access_token,refresh_token:t.refresh_token,user:u.user,token_type:"bearer",expires_in:n-r,expires_at:n},await this._saveSession(a),await this._notifyAllSubscribers("SIGNED_IN",a)}return{data:{user:a.user,session:a},error:null}}catch(r){if(jt(r))return{data:{session:null,user:null},error:r};throw r}}async refreshSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(t))}async _refreshSession(t){try{return await this._useSession(async r=>{var n;if(!t){const{data:l,error:u}=r;if(u)throw u;t=(n=l.session)!==null&&n!==void 0?n:void 0}if(!(t!=null&&t.refresh_token))throw new $o;const{data:s,error:a}=await this._callRefreshToken(t.refresh_token);return a?{data:{user:null,session:null},error:a}:s?{data:{user:s.user,session:s},error:null}:{data:{user:null,session:null},error:null}})}catch(r){if(jt(r))return{data:{user:null,session:null},error:r};throw r}}async _getSessionFromURL(t,r){try{if(!ai())throw new eh("No browser detected.");if(t.error||t.error_description||t.error_code)throw new eh(t.error_description||"Error in URL with unspecified error_description",{error:t.error||"unspecified_error",code:t.error_code||"unspecified_code"});switch(r){case"implicit":if(this.flowType==="pkce")throw new cS("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new eh("Not a valid implicit grant flow url.");break;default:}if(r==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!t.code)throw new cS("No code detected.");const{data:E,error:C}=await this._exchangeCodeForSession(t.code);if(C)throw C;const A=new URL(window.location.href);return A.searchParams.delete("code"),window.history.replaceState(window.history.state,"",A.toString()),{data:{session:E.session,redirectType:null},error:null}}const{provider_token:n,provider_refresh_token:s,access_token:a,refresh_token:l,expires_in:u,expires_at:d,token_type:m}=t;if(!a||!u||!l||!m)throw new eh("No session defined in URL");const f=Math.round(Date.now()/1e3),p=parseInt(u);let y=f+p;d&&(y=parseInt(d));const x=y-f;x*1e3<=Oc&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${x}s, should have been closer to ${p}s`);const j=y-p;f-j>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",j,y,f):f-j<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",j,y,f);const{data:w,error:S}=await this._getUser(a);if(S)throw S;const _={provider_token:n,provider_refresh_token:s,access_token:a,expires_in:p,expires_at:y,refresh_token:l,token_type:m,user:w.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:_,redirectType:t.type},error:null}}catch(n){if(jt(n))return{data:{session:null,redirectType:null},error:n};throw n}}_isImplicitGrantCallback(t){return!!(t.access_token||t.error_description)}async _isPKCECallback(t){const r=await ml(this.storage,`${this.storageKey}-code-verifier`);return!!(t.code&&r)}async signOut(t={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(t))}async _signOut({scope:t}={scope:"global"}){return await this._useSession(async r=>{var n;const{data:s,error:a}=r;if(a)return{error:a};const l=(n=s.session)===null||n===void 0?void 0:n.access_token;if(l){const{error:u}=await this.admin.signOut(l,t);if(u&&!(o3(u)&&(u.status===404||u.status===401||u.status===403)))return{error:u}}return t!=="others"&&(await this._removeSession(),await Do(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(t){const r=g3(),n={id:r,callback:t,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",r),this.stateChangeEmitters.delete(r)}};return this._debug("#onAuthStateChange()","registered callback with id",r),this.stateChangeEmitters.set(r,n),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(r)})))(),{data:{subscription:n}}}async _emitInitialSession(t){return await this._useSession(async r=>{var n,s;try{const{data:{session:a},error:l}=r;if(l)throw l;await((n=this.stateChangeEmitters.get(t))===null||n===void 0?void 0:n.callback("INITIAL_SESSION",a)),this._debug("INITIAL_SESSION","callback id",t,"session",a)}catch(a){await((s=this.stateChangeEmitters.get(t))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",t,"error",a),console.error(a)}})}async resetPasswordForEmail(t,r={}){let n=null,s=null;this.flowType==="pkce"&&([n,s]=await wc(this.storage,this.storageKey,!0));try{return await $t(this.fetch,"POST",`${this.url}/recover`,{body:{email:t,code_challenge:n,code_challenge_method:s,gotrue_meta_security:{captcha_token:r.captchaToken}},headers:this.headers,redirectTo:r.redirectTo})}catch(a){if(jt(a))return{data:null,error:a};throw a}}async getUserIdentities(){var t;try{const{data:r,error:n}=await this.getUser();if(n)throw n;return{data:{identities:(t=r.user.identities)!==null&&t!==void 0?t:[]},error:null}}catch(r){if(jt(r))return{data:null,error:r};throw r}}async linkIdentity(t){return"token"in t?this.linkIdentityIdToken(t):this.linkIdentityOAuth(t)}async linkIdentityOAuth(t){var r;try{const{data:n,error:s}=await this._useSession(async a=>{var l,u,d,m,f;const{data:p,error:y}=a;if(y)throw y;const x=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,t.provider,{redirectTo:(l=t.options)===null||l===void 0?void 0:l.redirectTo,scopes:(u=t.options)===null||u===void 0?void 0:u.scopes,queryParams:(d=t.options)===null||d===void 0?void 0:d.queryParams,skipBrowserRedirect:!0});return await $t(this.fetch,"GET",x,{headers:this.headers,jwt:(f=(m=p.session)===null||m===void 0?void 0:m.access_token)!==null&&f!==void 0?f:void 0})});if(s)throw s;return ai()&&!(!((r=t.options)===null||r===void 0)&&r.skipBrowserRedirect)&&window.location.assign(n==null?void 0:n.url),{data:{provider:t.provider,url:n==null?void 0:n.url},error:null}}catch(n){if(jt(n))return{data:{provider:t.provider,url:null},error:n};throw n}}async linkIdentityIdToken(t){return await this._useSession(async r=>{var n;try{const{error:s,data:{session:a}}=r;if(s)throw s;const{options:l,provider:u,token:d,access_token:m,nonce:f}=t,p=await $t(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(n=a==null?void 0:a.access_token)!==null&&n!==void 0?n:void 0,body:{provider:u,id_token:d,access_token:m,nonce:f,link_identity:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:Ki}),{data:y,error:x}=p;return x?{data:{user:null,session:null},error:x}:!y||!y.session||!y.user?{data:{user:null,session:null},error:new bc}:(y.session&&(await this._saveSession(y.session),await this._notifyAllSubscribers("USER_UPDATED",y.session)),{data:y,error:x})}catch(s){if(jt(s))return{data:{user:null,session:null},error:s};throw s}})}async unlinkIdentity(t){try{return await this._useSession(async r=>{var n,s;const{data:a,error:l}=r;if(l)throw l;return await $t(this.fetch,"DELETE",`${this.url}/user/identities/${t.identity_id}`,{headers:this.headers,jwt:(s=(n=a.session)===null||n===void 0?void 0:n.access_token)!==null&&s!==void 0?s:void 0})})}catch(r){if(jt(r))return{data:null,error:r};throw r}}async _refreshAccessToken(t){const r=`#_refreshAccessToken(${t.substring(0,5)}...)`;this._debug(r,"begin");try{const n=Date.now();return await b3(async s=>(s>0&&await x3(200*Math.pow(2,s-1)),this._debug(r,"refreshing attempt",s),await $t(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:t},headers:this.headers,xform:Ki})),(s,a)=>{const l=200*Math.pow(2,s);return a&&ay(a)&&Date.now()+l-n<Oc})}catch(n){if(this._debug(r,"error",n),jt(n))return{data:{session:null,user:null},error:n};throw n}finally{this._debug(r,"end")}}_isValidSession(t){return typeof t=="object"&&t!==null&&"access_token"in t&&"refresh_token"in t&&"expires_at"in t}async _handleProviderSignIn(t,r){const n=await this._getUrlForProvider(`${this.url}/authorize`,t,{redirectTo:r.redirectTo,scopes:r.scopes,queryParams:r.queryParams});return this._debug("#_handleProviderSignIn()","provider",t,"options",r,"url",n),ai()&&!r.skipBrowserRedirect&&window.location.assign(n),{data:{provider:t,url:n},error:null}}async _recoverAndRefresh(){var t,r;const n="#_recoverAndRefresh()";this._debug(n,"begin");try{const s=await ml(this.storage,this.storageKey);if(s&&this.userStorage){let l=await ml(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!l&&(l={user:s.user},await Tc(this.userStorage,this.storageKey+"-user",l)),s.user=(t=l==null?void 0:l.user)!==null&&t!==void 0?t:ly()}else if(s&&!s.user&&!s.user){const l=await ml(this.storage,this.storageKey+"-user");l&&(l!=null&&l.user)?(s.user=l.user,await Do(this.storage,this.storageKey+"-user"),await Tc(this.storage,this.storageKey,s)):s.user=ly()}if(this._debug(n,"session from storage",s),!this._isValidSession(s)){this._debug(n,"session is not valid"),s!==null&&await this._removeSession();return}const a=((r=s.expires_at)!==null&&r!==void 0?r:1/0)*1e3-Date.now()<iy;if(this._debug(n,`session has${a?"":" not"} expired with margin of ${iy}s`),a){if(this.autoRefreshToken&&s.refresh_token){const{error:l}=await this._callRefreshToken(s.refresh_token);l&&(console.error(l),ay(l)||(this._debug(n,"refresh failed with a non-retryable error, removing the session",l),await this._removeSession()))}}else if(s.user&&s.user.__isUserNotAvailableProxy===!0)try{const{data:l,error:u}=await this._getUser(s.access_token);!u&&(l!=null&&l.user)?(s.user=l.user,await this._saveSession(s),await this._notifyAllSubscribers("SIGNED_IN",s)):this._debug(n,"could not get user data, skipping SIGNED_IN notification")}catch(l){console.error("Error getting user data:",l),this._debug(n,"error getting user data, skipping SIGNED_IN notification",l)}else await this._notifyAllSubscribers("SIGNED_IN",s)}catch(s){this._debug(n,"error",s),console.error(s);return}finally{this._debug(n,"end")}}async _callRefreshToken(t){var r,n;if(!t)throw new $o;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const s=`#_callRefreshToken(${t.substring(0,5)}...)`;this._debug(s,"begin");try{this.refreshingDeferred=new Im;const{data:a,error:l}=await this._refreshAccessToken(t);if(l)throw l;if(!a.session)throw new $o;await this._saveSession(a.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",a.session);const u={data:a.session,error:null};return this.refreshingDeferred.resolve(u),u}catch(a){if(this._debug(s,"error",a),jt(a)){const l={data:null,error:a};return ay(a)||await this._removeSession(),(r=this.refreshingDeferred)===null||r===void 0||r.resolve(l),l}throw(n=this.refreshingDeferred)===null||n===void 0||n.reject(a),a}finally{this.refreshingDeferred=null,this._debug(s,"end")}}async _notifyAllSubscribers(t,r,n=!0){const s=`#_notifyAllSubscribers(${t})`;this._debug(s,"begin",r,`broadcast = ${n}`);try{this.broadcastChannel&&n&&this.broadcastChannel.postMessage({event:t,session:r});const a=[],l=Array.from(this.stateChangeEmitters.values()).map(async u=>{try{await u.callback(t,r)}catch(d){a.push(d)}});if(await Promise.all(l),a.length>0){for(let u=0;u<a.length;u+=1)console.error(a[u]);throw a[0]}}finally{this._debug(s,"end")}}async _saveSession(t){this._debug("#_saveSession()",t),this.suppressGetSessionWarning=!0;const r=Object.assign({},t),n=r.user&&r.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!n&&r.user&&await Tc(this.userStorage,this.storageKey+"-user",{user:r.user});const s=Object.assign({},r);delete s.user;const a=mS(s);await Tc(this.storage,this.storageKey,a)}else{const s=mS(r);await Tc(this.storage,this.storageKey,s)}}async _removeSession(){this._debug("#_removeSession()"),await Do(this.storage,this.storageKey),await Do(this.storage,this.storageKey+"-code-verifier"),await Do(this.storage,this.storageKey+"-user"),this.userStorage&&await Do(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const t=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{t&&ai()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",t)}catch(r){console.error("removing visibilitychange callback failed",r)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const t=setInterval(()=>this._autoRefreshTokenTick(),Oc);this.autoRefreshTicker=t,t&&typeof t=="object"&&typeof t.unref=="function"?t.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(t),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const t=this.autoRefreshTicker;this.autoRefreshTicker=null,t&&clearInterval(t)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const t=Date.now();try{return await this._useSession(async r=>{const{data:{session:n}}=r;if(!n||!n.refresh_token||!n.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const s=Math.floor((n.expires_at*1e3-t)/Oc);this._debug("#_autoRefreshTokenTick()",`access token expires in ${s} ticks, a tick lasts ${Oc}ms, refresh threshold is ${av} ticks`),s<=av&&await this._callRefreshToken(n.refresh_token)})}catch(r){console.error("Auto refresh tick failed with error. This is likely a transient error.",r)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(t){if(t.isAcquireTimeout||t instanceof mE)this._debug("auto refresh token tick lock not available");else throw t}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!ai()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(t){console.error("_handleVisibilityChange",t)}}async _onVisibilityChanged(t){const r=`#_onVisibilityChanged(${t})`;this._debug(r,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),t||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(r,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(t,r,n){const s=[`provider=${encodeURIComponent(r)}`];if(n!=null&&n.redirectTo&&s.push(`redirect_to=${encodeURIComponent(n.redirectTo)}`),n!=null&&n.scopes&&s.push(`scopes=${encodeURIComponent(n.scopes)}`),this.flowType==="pkce"){const[a,l]=await wc(this.storage,this.storageKey),u=new URLSearchParams({code_challenge:`${encodeURIComponent(a)}`,code_challenge_method:`${encodeURIComponent(l)}`});s.push(u.toString())}if(n!=null&&n.queryParams){const a=new URLSearchParams(n.queryParams);s.push(a.toString())}return n!=null&&n.skipBrowserRedirect&&s.push(`skip_http_redirect=${n.skipBrowserRedirect}`),`${t}?${s.join("&")}`}async _unenroll(t){try{return await this._useSession(async r=>{var n;const{data:s,error:a}=r;return a?{data:null,error:a}:await $t(this.fetch,"DELETE",`${this.url}/factors/${t.factorId}`,{headers:this.headers,jwt:(n=s==null?void 0:s.session)===null||n===void 0?void 0:n.access_token})})}catch(r){if(jt(r))return{data:null,error:r};throw r}}async _enroll(t){try{return await this._useSession(async r=>{var n,s;const{data:a,error:l}=r;if(l)return{data:null,error:l};const u=Object.assign({friendly_name:t.friendlyName,factor_type:t.factorType},t.factorType==="phone"?{phone:t.phone}:t.factorType==="totp"?{issuer:t.issuer}:{}),{data:d,error:m}=await $t(this.fetch,"POST",`${this.url}/factors`,{body:u,headers:this.headers,jwt:(n=a==null?void 0:a.session)===null||n===void 0?void 0:n.access_token});return m?{data:null,error:m}:(t.factorType==="totp"&&d.type==="totp"&&(!((s=d==null?void 0:d.totp)===null||s===void 0)&&s.qr_code)&&(d.totp.qr_code=`data:image/svg+xml;utf-8,${d.totp.qr_code}`),{data:d,error:null})})}catch(r){if(jt(r))return{data:null,error:r};throw r}}async _verify(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var n;const{data:s,error:a}=r;if(a)return{data:null,error:a};const l=Object.assign({challenge_id:t.challengeId},"webauthn"in t?{webauthn:Object.assign(Object.assign({},t.webauthn),{credential_response:t.webauthn.type==="create"?X3(t.webauthn.credential_response):Q3(t.webauthn.credential_response)})}:{code:t.code}),{data:u,error:d}=await $t(this.fetch,"POST",`${this.url}/factors/${t.factorId}/verify`,{body:l,headers:this.headers,jwt:(n=s==null?void 0:s.session)===null||n===void 0?void 0:n.access_token});return d?{data:null,error:d}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+u.expires_in},u)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",u),{data:u,error:d})})}catch(r){if(jt(r))return{data:null,error:r};throw r}})}async _challenge(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var n;const{data:s,error:a}=r;if(a)return{data:null,error:a};const l=await $t(this.fetch,"POST",`${this.url}/factors/${t.factorId}/challenge`,{body:t,headers:this.headers,jwt:(n=s==null?void 0:s.session)===null||n===void 0?void 0:n.access_token});if(l.error)return l;const{data:u}=l;if(u.type!=="webauthn")return{data:u,error:null};switch(u.webauthn.type){case"create":return{data:Object.assign(Object.assign({},u),{webauthn:Object.assign(Object.assign({},u.webauthn),{credential_options:Object.assign(Object.assign({},u.webauthn.credential_options),{publicKey:Y3(u.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},u),{webauthn:Object.assign(Object.assign({},u.webauthn),{credential_options:Object.assign(Object.assign({},u.webauthn.credential_options),{publicKey:J3(u.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(r){if(jt(r))return{data:null,error:r};throw r}})}async _challengeAndVerify(t){const{data:r,error:n}=await this._challenge({factorId:t.factorId});return n?{data:null,error:n}:await this._verify({factorId:t.factorId,challengeId:r.id,code:t.code})}async _listFactors(){var t;const{data:{user:r},error:n}=await this.getUser();if(n)return{data:null,error:n};const s={all:[],phone:[],totp:[],webauthn:[]};for(const a of(t=r==null?void 0:r.factors)!==null&&t!==void 0?t:[])s.all.push(a),a.status==="verified"&&s[a.factor_type].push(a);return{data:s,error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async t=>{var r,n;const{data:{session:s},error:a}=t;if(a)return{data:null,error:a};if(!s)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:l}=oy(s.access_token);let u=null;l.aal&&(u=l.aal);let d=u;((n=(r=s.user.factors)===null||r===void 0?void 0:r.filter(p=>p.status==="verified"))!==null&&n!==void 0?n:[]).length>0&&(d="aal2");const f=l.amr||[];return{data:{currentLevel:u,nextLevel:d,currentAuthenticationMethods:f},error:null}}))}async fetchJwk(t,r={keys:[]}){let n=r.keys.find(u=>u.kid===t);if(n)return n;const s=Date.now();if(n=this.jwks.keys.find(u=>u.kid===t),n&&this.jwks_cached_at+i3>s)return n;const{data:a,error:l}=await $t(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(l)throw l;return!a.keys||a.keys.length===0||(this.jwks=a,this.jwks_cached_at=s,n=a.keys.find(u=>u.kid===t),!n)?null:n}async getClaims(t,r={}){try{let n=t;if(!n){const{data:x,error:j}=await this.getSession();if(j||!x.session)return{data:null,error:j};n=x.session.access_token}const{header:s,payload:a,signature:l,raw:{header:u,payload:d}}=oy(n);r!=null&&r.allowExpired||C3(a.exp);const m=!s.alg||s.alg.startsWith("HS")||!s.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(s.kid,r!=null&&r.keys?{keys:r.keys}:r==null?void 0:r.jwks);if(!m){const{error:x}=await this.getUser(n);if(x)throw x;return{data:{claims:a,header:s,signature:l},error:null}}const f=E3(s.alg),p=await crypto.subtle.importKey("jwk",m,f,!0,["verify"]);if(!await crypto.subtle.verify(f,p,l,m3(`${u}.${d}`)))throw new cv("Invalid JWT signature");return{data:{claims:a,header:s,signature:l},error:null}}catch(n){if(jt(n))return{data:null,error:n};throw n}}}yd.nextInstanceID=0;const o$=yd;class l$ extends o${constructor(t){super(t)}}var c$=function(e,t,r,n){function s(a){return a instanceof r?a:new r(function(l){l(a)})}return new(r||(r=Promise))(function(a,l){function u(f){try{m(n.next(f))}catch(p){l(p)}}function d(f){try{m(n.throw(f))}catch(p){l(p)}}function m(f){f.done?a(f.value):s(f.value).then(u,d)}m((n=n.apply(e,t||[])).next())})};class u${constructor(t,r,n){var s,a,l;this.supabaseUrl=t,this.supabaseKey=r;const u=e3(t);if(!r)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",u),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",u),this.storageUrl=new URL("storage/v1",u),this.functionsUrl=new URL("functions/v1",u);const d=`sb-${u.hostname.split(".")[0]}-auth-token`,m={db:V6,realtime:H6,auth:Object.assign(Object.assign({},q6),{storageKey:d}),global:W6},f=Z6(n??{},m);this.storageKey=(s=f.auth.storageKey)!==null&&s!==void 0?s:"",this.headers=(a=f.global.headers)!==null&&a!==void 0?a:{},f.accessToken?(this.accessToken=f.accessToken,this.auth=new Proxy({},{get:(p,y)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(y)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((l=f.auth)!==null&&l!==void 0?l:{},this.headers,f.global.fetch),this.fetch=J6(r,this._getAccessToken.bind(this),f.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},f.realtime)),this.rest=new a6(new URL("rest/v1",u).href,{headers:this.headers,schema:f.db.schema,fetch:this.fetch}),this.storage=new z6(this.storageUrl.href,this.headers,this.fetch,n==null?void 0:n.storage),f.accessToken||this._listenForAuthEvents()}get functions(){return new J5(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(t){return this.rest.from(t)}schema(t){return this.rest.schema(t)}rpc(t,r={},n={}){return this.rest.rpc(t,r,n)}channel(t,r={config:{}}){return this.realtime.channel(t,r)}getChannels(){return this.realtime.getChannels()}removeChannel(t){return this.realtime.removeChannel(t)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){return c$(this,void 0,void 0,function*(){var t,r;if(this.accessToken)return yield this.accessToken();const{data:n}=yield this.auth.getSession();return(r=(t=n.session)===null||t===void 0?void 0:t.access_token)!==null&&r!==void 0?r:this.supabaseKey})}_initSupabaseAuthClient({autoRefreshToken:t,persistSession:r,detectSessionInUrl:n,storage:s,userStorage:a,storageKey:l,flowType:u,lock:d,debug:m},f,p){const y={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new l$({url:this.authUrl.href,headers:Object.assign(Object.assign({},y),f),storageKey:l,autoRefreshToken:t,persistSession:r,detectSessionInUrl:n,storage:s,userStorage:a,flowType:u,lock:d,debug:m,fetch:p,hasCustomAuthorizationHeader:Object.keys(this.headers).some(x=>x.toLowerCase()==="authorization")})}_initRealtimeClient(t){return new S6(this.realtimeUrl.href,Object.assign(Object.assign({},t),{params:Object.assign({apikey:this.supabaseKey},t==null?void 0:t.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((r,n)=>{this._handleTokenChanged(r,"CLIENT",n==null?void 0:n.access_token)})}_handleTokenChanged(t,r,n){(t==="TOKEN_REFRESHED"||t==="SIGNED_IN")&&this.changedAccessToken!==n?(this.changedAccessToken=n,this.realtime.setAuth(n)):t==="SIGNED_OUT"&&(this.realtime.setAuth(),r=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const d$=(e,t,r)=>new u$(e,t,r);function f$(){if(typeof window<"u"||typeof process>"u")return!1;const e=process.version;if(e==null)return!1;const t=e.match(/^v(\d+)\./);return t?parseInt(t[1],10)<=18:!1}f$()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const h$="https://okdzllfpsvltjqryslnn.supabase.co",m$="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im9rZHpsbGZwc3ZsdGpxcnlzbG5uIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTk3NTcxMTgsImV4cCI6MjA3NTMzMzExOH0.uLhMzo49-OMEp4ghFAFI31IpiDs1tjbyY2jZlk-vgUo",_e=d$(h$,m$,{db:{schema:"public"},auth:{persistSession:!0,autoRefreshToken:!0}}),to="__FEATURE_SUGGESTION__",Tx="__feature_suggestion__",p$="__feature_future_session__";function Dm(e){let t={};if(e!=null&&e.description)try{t=JSON.parse(e.description)}catch(s){console.warn("[databaseService] Unable to parse suggestion payload",s),t={}}const n=(Array.isArray(e==null?void 0:e.tags)?e.tags:[]).includes(p$)?"future":"pending";return{id:e.id,session_id:e.session_id,title:e.title,summary:t.summary??null,whatWouldItDo:t.whatWouldItDo??null,howWouldItWork:t.howWouldItWork??null,status:n,requester_id:t.requesterId??null,requester_name:t.requesterName??null,requester_email:t.requesterEmail??null,attachment_urls:t.attachmentUrls??null,created_at:e.created_at}}async function vE(e){try{if(!_e||typeof _e.from!="function")throw new Error("Supabase client is not properly initialized");const t=`${_e.supabaseUrl}/rest/v1/users?email=eq.${encodeURIComponent(e)}&select=*&limit=1`,r={apikey:_e.supabaseKey,Authorization:`Bearer ${_e.supabaseKey}`,"Content-Type":"application/json",Prefer:"return=representation"},n=fetch(t,{method:"GET",headers:r}).then(async f=>{if(!f.ok){const y=await f.text();throw console.error("[databaseService] Direct fetch error:",y),new Error(`API error: ${f.status} - ${y}`)}const p=await f.json();return{data:p.length>0?p[0]:null,error:null}}).catch(f=>{throw console.error("[databaseService] Direct fetch exception:",f),f}),s=Promise.race([n,new Promise((f,p)=>{setTimeout(()=>p(new Error("Direct fetch timeout after 5 seconds")),5e3)})]);try{const f=await s;if(f.data)return f.data}catch{}const a=_e.from("users").select("*").eq("email",e).single(),u=await Promise.race([a,new Promise((f,p)=>{setTimeout(()=>{console.error("[databaseService]  TIMEOUT: Query did not complete after 10 seconds"),p(new Error("Query timeout after 10 seconds"))},1e4)})]),{data:d,error:m}=u;if(m){if(m.code==="PGRST116")return null;throw m}return d}catch(t){throw console.error("[databaseService] getUserByEmail error:",t),t}}async function g$(e){const t="5e5482eb-82f0-4e76-8a6b-c6d74b01cd3a",{data:r,error:n}=await _e.from("users").insert([{email:e.email,name:e.name,tenant_id:e.tenant_id||t}]).select().single();if(n)throw console.error("[databaseService] createUser error:",n),n;return r}async function Nl(e,t){try{let r=await vE(e);return r||(r=await g$({email:e,name:t})),r}catch(r){throw console.error("[databaseService] Error in getOrCreateUser:",r),r}}async function uv(){const{data:e,error:t}=await _e.from("users").select("*").order("created_at",{ascending:!1});if(t)throw t;return e||[]}async function y$(e){var l,u;const[t,r,n]=await Promise.all([Ri(e),_e.from("session_admins").select("session_id").eq("user_id",e),_e.from("users").select("email").eq("id",e).single()]),s=((l=r.data)==null?void 0:l.length)||0;let a=0;if((u=n.data)!=null&&u.email){const{data:d}=await _e.from("session_stakeholders").select("session_id").eq("user_email",n.data.email);a=(d==null?void 0:d.length)||0}return{userId:e,isSystemAdmin:t,sessionAdminCount:s,stakeholderSessionCount:a}}const nu="PRODUCTS_TABLE_MISSING";function Xa(e){return typeof e=="object"&&e!==null&&e.code===nu}async function Ix(){const{data:e,error:t}=await _e.from("products").select("*").order("name",{ascending:!0});if(t){if((t==null?void 0:t.code)==="PGRST205"){const r=new Error("Products table is missing");throw r.code=nu,r}throw t}return e||[]}async function qa(e){const{data:t,error:r}=await _e.from("products").select("*").eq("tenant_id",e).order("name",{ascending:!0});if(r){if((r==null?void 0:r.code)==="PGRST205"){const n=new Error("Products table is missing");throw n.code=nu,n}throw r}return t||[]}async function xE(e,t){if(!e)throw new Error("Product ID is required");const r={};if(t.name!==void 0){const a=t.name.trim();if(!a)throw new Error("Product name cannot be empty");r.name=a}if(t.color_hex!==void 0&&(r.color_hex=t.color_hex),Object.keys(r).length===0)throw new Error("No updates provided");const{data:n,error:s}=await _e.from("products").update(r).eq("id",e).select().single();if(s){if((s==null?void 0:s.code)==="PGRST205"){const a=new Error("Products table is missing");throw a.code=nu,a}throw s}return n}async function dv(e,t,r){const n=t.trim();if(!n)throw new Error("Product name is required");const{data:s,error:a}=await _e.from("products").insert([{name:n,tenant_id:e,color_hex:r||null}]).select().single();if(a){if((a==null?void 0:a.code)==="PGRST205"){const l=new Error("Products table is missing");throw l.code=nu,l}if((a==null?void 0:a.code)==="23505"){const{data:l,error:u}=await _e.from("products").select("*").eq("tenant_id",e).eq("name",n).maybeSingle();if(u)throw u;if(l)return l}throw a}return s}async function bE(e){const{error:t}=await _e.from("products").delete().eq("id",e);if(t){if((t==null?void 0:t.code)==="PGRST205"){const r=new Error("Products table is missing");throw r.code=nu,r}throw t}}const su="*, product:products(name)";function $m(e){if(!e)throw new Error("Unexpected empty session row");const{product:t,...r}=e,n=r.product_name??(t==null?void 0:t.name)??null;return{...r,product_name:n}}function Dx(e){return!e||e.length===0?[]:e.map(t=>$m(t))}async function qo(){try{const e=`${_e.supabaseUrl}/rest/v1/voting_sessions?select=${encodeURIComponent(su)}&order=created_at.desc`,t={apikey:_e.supabaseKey,Authorization:`Bearer ${_e.supabaseKey}`,"Content-Type":"application/json"},r=await fetch(e,{method:"GET",headers:t});if(!r.ok){const s=await r.text();throw console.error("[databaseService] getAllSessions API error:",r.status,s),new Error(`API error: ${r.status} - ${s}`)}const n=await r.json();return Dx(n)}catch(e){throw console.error("[databaseService] Exception in getAllSessions:",e),e}}async function $x(e){const{data:t,error:r}=await _e.from("voting_sessions").select(su).eq("id",e).single();if(r){if(r.code==="PGRST116")return null;throw r}return t?$m(t):null}async function v$(e){const{data:t,error:r}=await _e.from("voting_sessions").select(su).eq("session_code",e).single();if(r){if(r.code==="PGRST116")return null;throw r}return t?$m(t):null}async function wS(e){try{const t=`${_e.supabaseUrl}/rest/v1/voting_sessions?product_id=eq.${e}&select=${encodeURIComponent(su)}&order=created_at.desc`,r={apikey:_e.supabaseKey,Authorization:`Bearer ${_e.supabaseKey}`,"Content-Type":"application/json"},n=await fetch(t,{method:"GET",headers:r});if(!n.ok){const a=await n.text();throw console.error("[databaseService] getSessionsByProduct API error:",n.status,a),new Error(`API error: ${n.status} - ${a}`)}const s=await n.json();return Dx(s)}catch(t){throw console.error("[databaseService] Exception in getSessionsByProduct:",t),t}}async function wE(e){var t;try{if(await Ri(e))return qo();const n=`${_e.supabaseUrl}/rest/v1/session_admins?user_id=eq.${e}&select=session_id`,s=await fetch(n,{method:"GET",headers:{apikey:_e.supabaseKey,Authorization:`Bearer ${_e.supabaseKey}`,"Content-Type":"application/json"}});if(!s.ok){const C=await s.text();throw console.error("[databaseService] Error loading session admins:",s.status,C),new Error(`API error: ${s.status} - ${C}`)}const a=await s.json(),l=(a==null?void 0:a.map(C=>C.session_id))||[],u=`${_e.supabaseUrl}/rest/v1/users?id=eq.${e}&select=email&limit=1`,d=await fetch(u,{method:"GET",headers:{apikey:_e.supabaseKey,Authorization:`Bearer ${_e.supabaseKey}`,"Content-Type":"application/json"}});if(!d.ok){const C=await d.text();throw console.error("[databaseService] Error getting user email:",d.status,C),new Error(`API error: ${d.status} - ${C}`)}const m=await d.json(),f=(t=m==null?void 0:m[0])==null?void 0:t.email;if(!f)throw console.error("[databaseService] User email not found"),new Error("User email not found");const p=`${_e.supabaseUrl}/rest/v1/session_stakeholders?user_email=eq.${encodeURIComponent(f)}&select=session_id`,y=await fetch(p,{method:"GET",headers:{apikey:_e.supabaseKey,Authorization:`Bearer ${_e.supabaseKey}`,"Content-Type":"application/json"}});if(!y.ok){const C=await y.text();throw console.error("[databaseService] Error loading session stakeholders:",y.status,C),new Error(`API error: ${y.status} - ${C}`)}const x=await y.json(),j=(x==null?void 0:x.map(C=>C.session_id))||[],w=[...new Set([...l,...j])];if(w.length===0)return[];const S=`${_e.supabaseUrl}/rest/v1/voting_sessions?select=${encodeURIComponent(su)}&id=in.(${w.join(",")})&order=created_at.desc`,_=await fetch(S,{method:"GET",headers:{apikey:_e.supabaseKey,Authorization:`Bearer ${_e.supabaseKey}`,"Content-Type":"application/json"}});if(!_.ok){const C=await _.text();throw console.error("[databaseService] Error loading voting sessions:",_.status,C),new Error(`API error: ${_.status} - ${C}`)}const E=await _.json();return Dx(E)}catch(r){throw console.error("[databaseService] Error in getSessionsForUser:",r),r}}async function jE(e){if(!e)return null;const{data:t,error:r}=await _e.from("voting_sessions").select(su).eq("product_id",e).eq("is_active",!0).maybeSingle();if(r){if(r.code==="PGRST116")return null;throw r}return t?$m(t):null}async function fv(e){const{data:t,error:r}=await _e.from("voting_sessions").insert([e]).select().single();if(r)throw r;return t}async function SE(e,t){const{data:r,error:n}=await _e.from("voting_sessions").update(t).eq("id",e).select().single();if(n)throw n;return r}async function x$(e){const{error:t}=await _e.from("voting_sessions").delete().eq("id",e);if(t)throw t}async function b$(e,t){const{error:r}=await _e.from("votes").delete().eq("session_id",e).eq("feature_id",t);if(r)throw r}async function Rx(e){const{data:t,error:r}=await _e.from("session_admins").select(`
      *,
      users (*)
    `).eq("session_id",e);if(r)throw r;return(t||[]).map(n=>({id:n.id,session_id:n.session_id,user_id:n.user_id,created_at:n.created_at,user:n.users}))}async function NE(e){const{data:t,error:r}=await _e.from("voting_sessions").select("id").eq("product_id",e);if(r)throw r;if(!t||t.length===0)return[];const n=t.map(u=>u.id),{data:s,error:a}=await _e.from("session_admins").select(`
      *,
      users (*)
    `).in("session_id",n);if(a)throw a;const l=new Map;return(s||[]).forEach(u=>{const d={id:u.id,session_id:u.session_id,user_id:u.user_id,created_at:u.created_at,user:u.users};if(d.user&&d.user.email){const m=d.user.email.toLowerCase();l.has(m)||l.set(m,d)}}),Array.from(l.values())}async function El(e,t){const{data:r,error:n}=await _e.from("session_admins").insert([{session_id:e,user_id:t}]).select().single();if(n)throw n;return r}async function w$(e,t,r){const n=await Nl(t,r);return El(e,n.id)}async function hv(e,t){const{error:r}=await _e.from("session_admins").delete().eq("session_id",e).eq("user_id",t);if(r)throw r}async function Rm(e,t){try{if(await Ri(t))return!0;const n=`${_e.supabaseUrl}/rest/v1/session_admins?session_id=eq.${e}&user_id=eq.${t}&select=id&limit=1`,s={apikey:_e.supabaseKey,Authorization:`Bearer ${_e.supabaseKey}`,"Content-Type":"application/json"},a=await fetch(n,{method:"GET",headers:s});if(!a.ok)return console.error("Error checking admin status:",a.status),!1;const l=await a.json();return Array.isArray(l)&&l.length>0}catch(r){return console.error("Caught exception checking admin:",r),!1}}async function kE(e){const{data:t,error:r}=await _e.from("session_stakeholders").select("*").eq("session_id",e).order("user_name",{ascending:!0});if(r)throw r;return t||[]}async function _E(e){const{data:t,error:r}=await _e.from("session_stakeholders").insert([e]).select().single();if(r)throw r;return t}async function jS(e,t,r){return _E({session_id:e,user_email:t,user_name:r,votes_allocated:0,has_voted:!1})}function CE(e,t,r){const n=typeof window<"u"&&window.location.pathname.startsWith("/feature-voting-app")?"/feature-voting-app":"",s=`${window.location.origin}${n}/login?session=${e.session_code??""}`,a=encodeURIComponent(`You're invited to vote: ${e.title}`),l=encodeURIComponent(`Hi,

You've been invited to participate in a feature voting session.

Session: ${e.title}
Goal: ${e.goal}

To get started, copy and paste this link into your browser:

${s}

Voting Period: ${e.start_date?SS(e.start_date):""} - ${e.end_date?SS(e.end_date):""}

Best regards,
${r}`);return`mailto:${encodeURIComponent(t)}?subject=${a}&body=${l}`}function SS(e){return new Date(e).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})}async function mv(e,t){const{error:r}=await _e.from("session_stakeholders").delete().eq("session_id",e).eq("user_email",t);if(r)throw r}async function Mx(e,t){try{const r=`${_e.supabaseUrl}/rest/v1/session_stakeholders?session_id=eq.${e}&user_email=eq.${encodeURIComponent(t)}&select=id&limit=1`,n={apikey:_e.supabaseKey,Authorization:`Bearer ${_e.supabaseKey}`,"Content-Type":"application/json"},s=await fetch(r,{method:"GET",headers:n});if(!s.ok)return console.error("Error checking stakeholder status:",s.status),!1;const a=await s.json();return Array.isArray(a)&&a.length>0}catch(r){return console.error("Caught exception checking stakeholder:",r),!1}}async function j$(e,t){const{data:r,error:n}=await _e.from("session_stakeholders").select("id").eq("session_id",e).eq("user_email",t.toLowerCase()).maybeSingle();return n?(console.error("Error checking stakeholder status:",n),!1):!!r}async function NS(e,t){const{error:r}=await _e.from("session_stakeholders").delete().eq("session_id",e).eq("user_email",t.toLowerCase());if(r)throw r}async function va(e){const t=`${_e.supabaseUrl}/rest/v1/features?session_id=eq.${e}&select=*&order=created_at.desc`,r={apikey:_e.supabaseKey,Authorization:`Bearer ${_e.supabaseKey}`,"Content-Type":"application/json"},n=await fetch(t,{method:"GET",headers:r});if(!n.ok){const a=await n.text();throw new Error(`API error: ${n.status} - ${a}`)}return(await n.json()||[]).filter(a=>{const l=a.state===to,u=Array.isArray(a.tags)&&a.tags.includes(Tx);return!l&&!u})}async function th(e){const{data:t,error:r}=await _e.from("features").insert([{session_id:e.session_id,title:e.title,description:e.description,epic:e.epic,state:e.state,area_path:e.areaPath,tags:e.tags,azure_devops_id:e.azure_devops_id,azure_devops_url:e.azure_devops_url}]).select().single();if(r)throw r;return t}async function uy(e,t){const r={};t.title!==void 0&&(r.title=t.title),t.description!==void 0&&(r.description=t.description),t.epic!==void 0&&(r.epic=t.epic),t.state!==void 0&&(r.state=t.state),t.areaPath!==void 0&&(r.area_path=t.areaPath),t.tags!==void 0&&(r.tags=t.tags),t.azure_devops_id!==void 0&&(r.azure_devops_id=t.azure_devops_id),t.azure_devops_url!==void 0&&(r.azure_devops_url=t.azure_devops_url);const{data:n,error:s}=await _e.from("features").update(r).eq("id",e).select().single();if(s)throw s;return n}async function kS(e){const{error:t}=await _e.from("features").delete().eq("id",e);if(t)throw t}function EE(e){return{id:e.id,sessionId:e.session_id,type:e.type,reason:e.reason,details:e.details??null,actorName:e.actor_name??"Admin",actorId:e.actor_id??null,createdAt:e.created_at}}async function S$(e){try{const{data:t,error:r}=await _e.from("session_status_notes").select("*").eq("session_id",e).order("created_at",{ascending:!1});if(r)throw r;return(t||[]).map(EE)}catch(t){if((t==null?void 0:t.code)==="42P01")return console.warn("[databaseService] session_status_notes table not found; status notes will not persist.",t),[];throw t}}async function N$(e){try{const{data:t,error:r}=await _e.from("session_status_notes").insert([{session_id:e.session_id,type:e.type,reason:e.reason,details:e.details??null,actor_id:e.actor_id??null,actor_name:e.actor_name}]).select("*").single();if(r)throw r;return EE(t)}catch(t){if((t==null?void 0:t.code)==="42P01")return console.warn("[databaseService] session_status_notes table not found; status notes will not persist.",t),{id:`temp-${Date.now()}`,sessionId:e.session_id,type:e.type,reason:e.reason,details:e.details??null,actorName:e.actor_name,actorId:e.actor_id??null,createdAt:new Date().toISOString()};throw t}}async function Ro(e){const t=`${_e.supabaseUrl}/rest/v1/votes?session_id=eq.${e}&select=*`,r={apikey:_e.supabaseKey,Authorization:`Bearer ${_e.supabaseKey}`,"Content-Type":"application/json"},n=await fetch(t,{method:"GET",headers:r});if(!n.ok){const a=await n.text();throw new Error(`API error: ${n.status} - ${a}`)}return await n.json()||[]}async function k$(e){const{data:t}=await _e.from("votes").select("*").eq("session_id",e.session_id).eq("feature_id",e.feature_id).eq("user_id",e.user_id).single();if(t){const{data:r,error:n}=await _e.from("votes").update({vote_count:e.vote_count}).eq("session_id",e.session_id).eq("feature_id",e.feature_id).eq("user_id",e.user_id).select().single();if(n)throw n;return r}else{const{data:r,error:n}=await _e.from("votes").insert([e]).select().single();if(n)throw n;return r}}async function _$(e,t){const{error:r}=await _e.from("votes").delete().eq("session_id",e).eq("user_id",t);if(r)throw console.error("Error deleting user votes:",r),r}async function C$(e){const{error:t}=await _e.from("votes").delete().eq("session_id",e);if(t)throw t}async function E$(e){try{const{data:t,error:r}=await _e.from("azure_devops_config").select("*").eq("session_id",e).maybeSingle();if(r){if(r.code==="PGRST116")return null;throw r}return t}catch(t){return console.error("Error getting Azure DevOps config:",t),null}}async function pl(e,t){try{const r={session_id:e,organization:t.organization,project:t.project,enabled:t.enabled,work_item_type:t.workItemType};t.accessToken!==void 0&&(r.access_token=t.accessToken),t.refreshToken!==void 0&&(r.refresh_token=t.refreshToken),t.tokenExpiresAt!==void 0&&(r.token_expires_at=t.tokenExpiresAt),t.tenantId!==void 0&&(r.tenant_id=t.tenantId),t.clientId!==void 0&&(r.client_id=t.clientId),t.query!==void 0&&(r.query=t.query),t.lastSyncTime!==void 0&&(r.last_sync_time=t.lastSyncTime),t.states!==void 0&&(r.states=t.states),t.areaPath!==void 0&&(r.area_path=t.areaPath),t.tags!==void 0&&(r.tags=t.tags);const{data:n,error:s}=await _e.from("azure_devops_config").update(r).eq("session_id",e).select();if(!s&&n&&n.length>0)return n[0];const{data:a,error:l}=await _e.from("azure_devops_config").upsert([r]).select().single();if(!l)return a;if((l==null?void 0:l.code)==="23505"){const{data:u,error:d}=await _e.from("azure_devops_config").select("*").eq("session_id",e).maybeSingle();if(d)throw d;return u}throw l||s}catch(r){throw console.error("Error saving Azure DevOps config:",r),r}}async function A$(){return(await qo())[0]||null}async function P$(e){const t=await A$();if(!t)throw new Error("No session found");return SE(t.id,e)}async function _S(e,t){return SE(e,t)}async function O$(e){const{data:t,error:r}=await _e.from("info_requests").insert([{session_id:e.session_id,feature_id:e.feature_id,feature_title:e.feature_title,requester_id:e.requester_id,requester_name:e.requester_name,requester_email:e.requester_email,created_at:e.created_at}]).select().single();if(r)throw r;return t}async function T$(e){const t={summary:e.description??null,whatWouldItDo:e.whatWouldItDo??null,howWouldItWork:e.howWouldItWork??null,requesterId:e.requester_id??null,requesterName:e.requester_name??null,requesterEmail:e.requester_email??null,attachmentUrls:e.attachment_urls??null},{data:r,error:n}=await _e.from("features").insert([{session_id:e.session_id,title:e.title,description:JSON.stringify(t),epic:null,state:to,area_path:null,tags:[Tx],azure_devops_id:null,azure_devops_url:null}]).select("id, session_id, title, description, created_at").single();if(n)throw n;return Dm(r)}async function I$(e,t){const{data:r,error:n}=await _e.from("features").select("id, title, description, session_id, created_at").eq("id",e).eq("state",to).single();if(n)throw n;let s={};if(r!=null&&r.description)try{s=JSON.parse(r.description)}catch(d){console.warn("[databaseService] Unable to parse suggestion payload during update",d)}const a={summary:t.summary??s.summary??null,whatWouldItDo:t.whatWouldItDo??s.whatWouldItDo??null,howWouldItWork:t.howWouldItWork??s.howWouldItWork??null,requesterId:s.requesterId??null,requesterName:t.requester_name??s.requesterName??null,requesterEmail:t.requester_email??s.requesterEmail??null,attachmentUrls:t.attachment_urls!==void 0?t.attachment_urls:s.attachmentUrls??null},{data:l,error:u}=await _e.from("features").update({title:t.title??r.title,description:JSON.stringify(a)}).eq("id",e).eq("state",to).select("id, session_id, title, description, created_at").single();if(u)throw u;return Dm(l)}async function D$(e){const{error:t}=await _e.from("features").delete().eq("id",e).eq("state",to);if(t)throw t}async function $$(e,t){const{data:r,error:n}=await _e.from("features").update({session_id:t}).eq("id",e).eq("state",to).select("id, session_id, title, description, created_at").single();if(n)throw n;return Dm(r)}async function R$(e){const{data:t,error:r}=await _e.from("features").select("*").eq("id",e).eq("state",to).single();if(r)throw r;let n={};if(t!=null&&t.description)try{n=JSON.parse(t.description)}catch(d){console.warn("[databaseService] Unable to parse suggestion payload during promotion",d)}const s=[];n.summary&&s.push(n.summary),n.whatWouldItDo&&s.push(`What would it do?
${n.whatWouldItDo}`),n.howWouldItWork&&s.push(`How would it work?
${n.howWouldItWork}`);const a=Array.isArray(t.tags)?t.tags.filter(d=>d!==Tx):[],{data:l,error:u}=await _e.from("features").update({description:s.join(`

`)||t.title,state:null,tags:a}).eq("id",e).eq("state",to).select("*").single();if(u)throw u;return l}async function CS(e){const{data:t,error:r}=await _e.from("features").select("id, session_id, title, description, created_at, state, tags").eq("session_id",e).eq("state",to).order("created_at",{ascending:!1});if(r)throw r;return(t||[]).map(Dm)}async function pv(){const{data:e,error:t}=await _e.from("system_admins").select(`
      *,
      users (*)
    `).order("created_at",{ascending:!1});if(t)throw t;return(e||[]).map(r=>({id:r.id,user_id:r.user_id,created_at:r.created_at,user:r.users}))}async function Rh(e){const{data:t,error:r}=await _e.from("system_admins").insert([{user_id:e}]).select().single();if(r)throw r;return t}async function gv(e){const{error:t}=await _e.from("system_admins").delete().eq("user_id",e);if(t)throw t}async function Ri(e){try{const t=`${_e.supabaseUrl}/rest/v1/system_admins?user_id=eq.${e}&select=id&limit=1`,r={apikey:_e.supabaseKey,Authorization:`Bearer ${_e.supabaseKey}`,"Content-Type":"application/json"},n=await fetch(t,{method:"GET",headers:r});if(!n.ok)return console.error("Error checking system admin status:",n.status),!1;const s=await n.json();return Array.isArray(s)&&s.length>0}catch(t){return console.error("Caught exception checking system admin:",t),!1}}const M$=["dave.hoffman@newmill.com"],F$="".split(",").map(e=>e.trim().toLowerCase()).filter(Boolean),L$=Array.from(new Set([...M$,...F$]));function yv(e){return e?L$.includes(e.toLowerCase()):!1}const AE=v.createContext(void 0);function z$({children:e}){const[t,r]=v.useState(null),[n,s]=v.useState([]),[a,l]=v.useState(null),[u,d]=v.useState(!1),[m,f]=v.useState(!1),[p,y]=v.useState(!1),[x,j]=v.useState(!0),[w,S]=v.useState(!1),[_,E]=v.useState(!1),C=v.useRef(!1),A=v.useCallback(async J=>{if(_)return;const H=J||a;if(!H){s([]),r(fe=>{if(fe)try{localStorage.removeItem("voting_system_current_session")}catch{}return null});return}E(!0);try{const fe=yv(H.email);let X;fe?X=await qo():X=await wE(H.id),s(X),r(K=>{if(!K)return K;const ae=X.find(U=>U.id===K.id);if(!ae){try{localStorage.removeItem("voting_system_current_session")}catch{}return null}if(ae.id!==K.id)return K;if(ae!==K){try{localStorage.setItem("voting_system_current_session",ae.id)}catch{}return ae}return K})}catch(fe){console.error("Error loading sessions:",fe),s([])}finally{E(!1)}},[a,_]);v.useEffect(()=>{if(C.current)return;C.current=!0;const J=setTimeout(()=>{j(!1)},5e3);(async()=>{var X,K;try{if(window.location.search.includes("code=")||window.location.hash.includes("access_token")||window.location.search.includes("error=")){setTimeout(async()=>{var ne,G;try{const{data:{session:ie}}=await _e.auth.getSession();if(ie!=null&&ie.user){const te=ie.user.email;if(te){const W=((ne=ie.user.user_metadata)==null?void 0:ne.full_name)||((G=ie.user.user_metadata)==null?void 0:G.name)||te.split("@")[0]||"User";try{const se=await Nl(te.toLowerCase(),W);l(se),await A(se),setTimeout(()=>{if(window.location.hash){const I=window.location.pathname+window.location.search;window.history.replaceState(null,"",I)}},200)}catch(se){console.error("Error getting/creating user:",se)}}}}catch(ie){console.error("Error in OAuth callback handler:",ie)}finally{j(!1),clearTimeout(J)}},1e3);return}const{data:{session:U}}=await _e.auth.getSession();if(U!=null&&U.user){const ne=U.user.email;if(ne){const G=((X=U.user.user_metadata)==null?void 0:X.full_name)||((K=U.user.user_metadata)==null?void 0:K.name)||ne.split("@")[0]||"User";try{const ie=await Nl(ne.toLowerCase(),G);l(ie),await A(ie)}catch(ie){console.error("Error getting/creating user:",ie)}}}else{const ne=localStorage.getItem("voting_system_user");if(ne)try{const G=JSON.parse(ne);l(G);try{await A(G)}catch(ie){console.error("Error refreshing sessions:",ie)}}catch(G){console.error("Error loading stored user:",G),localStorage.removeItem("voting_system_user")}}}catch(ae){console.error("Error checking Supabase auth:",ae);const U=localStorage.getItem("voting_system_user");if(U)try{const ne=JSON.parse(U);l(ne)}catch(ne){console.error("Error loading stored user:",ne),localStorage.removeItem("voting_system_user")}}finally{window.location.search.includes("code=")||window.location.hash.includes("access_token")||window.location.search.includes("error=")||(j(!1),clearTimeout(J))}})();const{data:{subscription:fe}}=_e.auth.onAuthStateChange(async(X,K)=>{var ae,U,ne,G;if(X==="SIGNED_IN"&&(K!=null&&K.user)){const ie=K.user.email;if(ie){const te=((ae=K.user.user_metadata)==null?void 0:ae.full_name)||((U=K.user.user_metadata)==null?void 0:U.name)||ie.split("@")[0]||"User",W=await Nl(ie.toLowerCase(),te);l(W),await A(W),j(!1),setTimeout(()=>{if(window.location.hash){const se=window.location.pathname+window.location.search;window.history.replaceState(null,"",se)}},100)}}else if(X==="SIGNED_OUT")l(null),s([]),r(null),localStorage.removeItem("voting_system_user"),localStorage.removeItem("voting_system_current_session"),j(!1);else if(X==="TOKEN_REFRESHED"&&(K!=null&&K.user)){if(!a&&K.user.email){const ie=K.user.email,te=((ne=K.user.user_metadata)==null?void 0:ne.full_name)||((G=K.user.user_metadata)==null?void 0:G.name)||ie.split("@")[0]||"User",W=await Nl(ie.toLowerCase(),te);l(W),await A(W)}j(!1)}});return()=>{fe.unsubscribe(),clearTimeout(J)}},[]),v.useEffect(()=>{(async()=>{if(!t||!a){d(!1),f(!1),S(!1);return}if(!w)try{const[H,fe]=await Promise.all([Rm(t.id,a.id),Mx(t.id,a.email)]);d(H),f(fe),S(!1)}catch(H){console.error("Error checking user roles:",H),d(!1),f(!1),S(!0)}})()},[t,a,w]),v.useEffect(()=>{(async()=>{if(!a){y(!1);return}if(yv(a.email)){y(!0);return}try{const fe=await Ri(a.id);y(fe)}catch(fe){console.error("Error checking system admin status:",fe),y(!1)}})()},[a]);const T=v.useCallback(async J=>{l(J),S(!1),J?(localStorage.setItem("voting_system_user",JSON.stringify(J)),await A(J)):(localStorage.removeItem("voting_system_user"),s([]),r(null),y(!1))},[A]),P=v.useCallback(J=>{r(J),S(!1),J?localStorage.setItem("voting_system_current_session",J.id):localStorage.removeItem("voting_system_current_session")},[]);v.useEffect(()=>{(async()=>{if(!a||n.length===0)return;const H=localStorage.getItem("voting_system_current_session");if(H){const fe=n.find(X=>X.id===H);fe&&r(fe)}})()},[a,n]),v.useEffect(()=>{const J=()=>{const X=window.location.hash;if(X==="#"||X===""){const K=window.location.pathname+window.location.search;window.history.replaceState(null,"",K)}};J();const H=()=>{J()},fe=setInterval(J,500);return window.addEventListener("hashchange",H),()=>{clearInterval(fe),window.removeEventListener("hashchange",H)}},[]);const z={currentSession:t,sessions:n,currentUser:a,isAdmin:u,isStakeholder:m,isSystemAdmin:p,isLoading:x,setCurrentSession:P,refreshSessions:A,setCurrentUser:T};return x?i.jsx("div",{className:"min-h-screen w-full bg-gray-50 flex items-center justify-center",children:i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-[#2d4660] mx-auto mb-4"}),i.jsx("p",{className:"text-gray-600",children:"Loading..."})]})}):i.jsx(AE.Provider,{value:z,children:e})}function Ea(){const e=v.useContext(AE);if(e===void 0)throw new Error("useSession must be used within a SessionProvider");return e}function Fx(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function"){var s=0;for(n=Object.getOwnPropertySymbols(e);s<n.length;s++)t.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(e,n[s])&&(r[n[s]]=e[n[s]])}return r}function Jo(e,t,r,n){return new(r||(r=Promise))((function(s,a){function l(m){try{d(n.next(m))}catch(f){a(f)}}function u(m){try{d(n.throw(m))}catch(f){a(f)}}function d(m){var f;m.done?s(m.value):(f=m.value,f instanceof r?f:new r((function(p){p(f)}))).then(l,u)}d((n=n.apply(e,[])).next())}))}var ES,AS,PS,Mh,OS,TS,IS,vv,DS,$S;function U$(e){return(e==null?void 0:e.errorCode)!==void 0}(function(e){e.Inline="inline",e.Desktop="desktop",e.Web="web"})(ES||(ES={})),(function(e){e.M365Content="m365content"})(AS||(AS={})),(function(e){e.DriveId="driveId",e.GroupId="groupId",e.SiteId="siteId",e.UserId="userId"})(PS||(PS={})),(function(e){e[e.NOT_SUPPORTED_ON_PLATFORM=100]="NOT_SUPPORTED_ON_PLATFORM",e[e.INTERNAL_ERROR=500]="INTERNAL_ERROR",e[e.NOT_SUPPORTED_IN_CURRENT_CONTEXT=501]="NOT_SUPPORTED_IN_CURRENT_CONTEXT",e[e.PERMISSION_DENIED=1e3]="PERMISSION_DENIED",e[e.NETWORK_ERROR=2e3]="NETWORK_ERROR",e[e.NO_HW_SUPPORT=3e3]="NO_HW_SUPPORT",e[e.INVALID_ARGUMENTS=4e3]="INVALID_ARGUMENTS",e[e.UNAUTHORIZED_USER_OPERATION=5e3]="UNAUTHORIZED_USER_OPERATION",e[e.INSUFFICIENT_RESOURCES=6e3]="INSUFFICIENT_RESOURCES",e[e.THROTTLE=7e3]="THROTTLE",e[e.USER_ABORT=8e3]="USER_ABORT",e[e.OPERATION_TIMED_OUT=8001]="OPERATION_TIMED_OUT",e[e.OLD_PLATFORM=9e3]="OLD_PLATFORM",e[e.FILE_NOT_FOUND=404]="FILE_NOT_FOUND",e[e.SIZE_EXCEEDED=1e4]="SIZE_EXCEEDED"})(Mh||(Mh={})),(function(e){e.GeoLocation="geolocation",e.Media="media"})(OS||(OS={})),(function(e){e.BCAIS="bcais",e.BCWAF="bcwaf",e.BCWBF="bcwbf"})(TS||(TS={})),(function(e){e.Faculty="faculty",e.Student="student",e.Other="other"})(IS||(IS={})),(function(e){e.Adult="adult",e.MinorNoParentalConsentRequired="minorNoParentalConsentRequired",e.MinorWithoutParentalConsent="minorWithoutParentalConsent",e.MinorWithParentalConsent="minorWithParentalConsent",e.NotAdult="notAdult",e.NonAdult="notAdult"})(vv||(vv={})),(function(e){e.HigherEducation="higherEducation",e.K12="k12",e.Other="other"})(DS||(DS={})),(function(e){e.TextPlain="text/plain",e.TextHtml="text/html",e.ImagePNG="image/png",e.ImageJPEG="image/jpeg"})($S||($S={}));var ar,xv,bv,RS,MS,FS,LS,zS;(function(e){e.desktop="desktop",e.web="web",e.android="android",e.ios="ios",e.ipados="ipados",e.macos="macos",e.visionOS="visionOS",e.rigel="rigel",e.surfaceHub="surfaceHub",e.teamsRoomsWindows="teamsRoomsWindows",e.teamsRoomsAndroid="teamsRoomsAndroid",e.teamsPhones="teamsPhones",e.teamsDisplays="teamsDisplays"})(ar||(ar={})),(function(e){e.office="Office",e.outlook="Outlook",e.outlookWin32="OutlookWin32",e.orange="Orange",e.places="Places",e.teams="Teams",e.teamsModern="TeamsModern"})(xv||(xv={})),(function(e){e.settings="settings",e.content="content",e.authentication="authentication",e.remove="remove",e.task="task",e.sidePanel="sidePanel",e.stage="stage",e.meetingStage="meetingStage"})(bv||(bv={})),(function(e){e.copilotSidePanel="copilotSidePanel",e.copilotMainPane="copilotMainPane",e.copilotFullScreen="copilotFullScreen"})(RS||(RS={})),(function(e){e[e.Standard=0]="Standard",e[e.Edu=1]="Edu",e[e.Class=2]="Class",e[e.Plc=3]="Plc",e[e.Staff=4]="Staff"})(MS||(MS={})),(function(e){e[e.Admin=0]="Admin",e[e.User=1]="User",e[e.Guest=2]="Guest"})(FS||(FS={})),(function(e){e.Large="large",e.Medium="medium",e.Small="small"})(LS||(LS={})),(function(e){e.Regular="Regular",e.Private="Private",e.Shared="Shared"})(zS||(zS={}));const B$={errorCode:Mh.NOT_SUPPORTED_ON_PLATFORM},W$={adaptiveCardSchemaVersion:{majorVersion:1,minorVersion:5}};var US={randomUUID:typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};let rh;const V$=new Uint8Array(16);function q$(){if(!rh&&(rh=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!rh))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return rh(V$)}const os=[];for(let e=0;e<256;++e)os.push((e+256).toString(16).slice(1));function H$(e,t=0){return os[e[t+0]]+os[e[t+1]]+os[e[t+2]]+os[e[t+3]]+"-"+os[e[t+4]]+os[e[t+5]]+"-"+os[e[t+6]]+os[e[t+7]]+"-"+os[e[t+8]]+os[e[t+9]]+"-"+os[e[t+10]]+os[e[t+11]]+os[e[t+12]]+os[e[t+13]]+os[e[t+14]]+os[e[t+15]]}function K$(e,t,r){if(US.randomUUID&&!e)return US.randomUUID();const n=(e=e||{}).random||(e.rng||q$)();return n[6]=15&n[6]|64,n[8]=63&n[8]|128,H$(n)}var G$=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function Y$(e){return typeof e=="string"&&G$.test(e)}function PE(e,t){if(typeof e!="string"||typeof t!="string")return NaN;const r=e.split("."),n=t.split(".");function s(a){return/^\d+$/.test(a)}if(!r.every(s)||!n.every(s))return NaN;for(;r.length<n.length;)r.push("0");for(;n.length<r.length;)n.push("0");for(let a=0;a<r.length;++a)if(Number(r[a])!=Number(n[a]))return Number(r[a])>Number(n[a])?1:-1;return 0}function J$(){return K$()}function OE(e){return Object.keys(e).forEach((t=>{e[t]!==null&&e[t]!==void 0&&typeof e[t]=="object"&&OE(e[t])})),Object.freeze(e)}function X$(e,t,r){return new Promise(((n,s)=>{const a=setTimeout(s,t,r);e().then((l=>{clearTimeout(a),n(l)})).catch((l=>{clearTimeout(a),s(l)}))}))}function Q$(e){return e.protocol==="https:"}function Z$(){if(Mm())throw new Error("window object undefined at SSR check");return window}function Mm(){return typeof window>"u"}function eR(e){return new RegExp(`${/<script[^>]*>|&lt;script[^&]*&gt;|%3Cscript[^%]*%3E/gi.source}|${/<\/script[^>]*>|&lt;\/script[^&]*&gt;|%3C\/script[^%]*%3E/gi.source}`,"gi").test(e)}function tR(e){if(!e)throw new Error("id must not be empty");if(Y$(e)===!1)throw new Error("id must be a valid UUID")}const rR=!!performance&&"now"in performance;function Lx(){return rR?performance.now()+performance.timeOrigin:void 0}function BS(e){var t,r;if(!(!((r=(t=e.hostVersionsInfo)===null||t===void 0?void 0:t.appEligibilityInformation)===null||r===void 0)&&r.ageGroup))return e;const n=e.hostVersionsInfo.appEligibilityInformation.ageGroup;return(n==null?void 0:n.toLowerCase())!=="nonadult"?e:Object.assign(Object.assign({},e),{hostVersionsInfo:Object.assign(Object.assign({},e.hostVersionsInfo),{appEligibilityInformation:Object.assign(Object.assign({},e.hostVersionsInfo.appEligibilityInformation),{ageGroup:vv.NotAdult})})})}let Md=class{constructor(t=J$()){this.uuid=t,tR(t)}toString(){return this.uuid}serialize(){return this.toString()}};const TE=e=>{const{uuid:t}=e,r=Fx(e,["uuid"]),n=t==null?void 0:t.toString();return Object.assign(Object.assign({},r),{uuidAsString:n})},nR=e=>{const{uuidAsString:t}=e,r=Fx(e,["uuidAsString"]);return Object.assign(Object.assign({},r),{uuid:t?new Md(t):void 0})};var wv={exports:{}},WS,VS;function sR(){if(VS)return WS;VS=1;var e=1e3,t=60*e,r=60*t,n=24*r,s=7*n,a=365.25*n;function l(u,d,m,f){var p=d>=1.5*m;return Math.round(u/m)+" "+f+(p?"s":"")}return WS=function(u,d){d=d||{};var m=typeof u;if(m==="string"&&u.length>0)return(function(f){if(!((f=String(f)).length>100)){var p=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(f);if(p){var y=parseFloat(p[1]);switch((p[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return y*a;case"weeks":case"week":case"w":return y*s;case"days":case"day":case"d":return y*n;case"hours":case"hour":case"hrs":case"hr":case"h":return y*r;case"minutes":case"minute":case"mins":case"min":case"m":return y*t;case"seconds":case"second":case"secs":case"sec":case"s":return y*e;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return y;default:return}}}})(u);if(m==="number"&&isFinite(u))return d.long?(function(f){var p=Math.abs(f);return p>=n?l(f,p,n,"day"):p>=r?l(f,p,r,"hour"):p>=t?l(f,p,t,"minute"):p>=e?l(f,p,e,"second"):f+" ms"})(u):(function(f){var p=Math.abs(f);return p>=n?Math.round(f/n)+"d":p>=r?Math.round(f/r)+"h":p>=t?Math.round(f/t)+"m":p>=e?Math.round(f/e)+"s":f+"ms"})(u);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(u))}}var iR=function(e){function t(s){let a,l,u,d=null;function m(...f){if(!m.enabled)return;const p=m,y=Number(new Date),x=y-(a||y);p.diff=x,p.prev=a,p.curr=y,a=y,f[0]=t.coerce(f[0]),typeof f[0]!="string"&&f.unshift("%O");let j=0;f[0]=f[0].replace(/%([a-zA-Z%])/g,((w,S)=>{if(w==="%%")return"%";j++;const _=t.formatters[S];if(typeof _=="function"){const E=f[j];w=_.call(p,E),f.splice(j,1),j--}return w})),t.formatArgs.call(p,f),(p.log||t.log).apply(p,f)}return m.namespace=s,m.useColors=t.useColors(),m.color=t.selectColor(s),m.extend=r,m.destroy=t.destroy,Object.defineProperty(m,"enabled",{enumerable:!0,configurable:!1,get:()=>d!==null?d:(l!==t.namespaces&&(l=t.namespaces,u=t.enabled(s)),u),set:f=>{d=f}}),typeof t.init=="function"&&t.init(m),m}function r(s,a){const l=t(this.namespace+(a===void 0?":":a)+s);return l.log=this.log,l}function n(s){return s.toString().substring(2,s.toString().length-2).replace(/\.\*\?$/,"*")}return t.debug=t,t.default=t,t.coerce=function(s){return s instanceof Error?s.stack||s.message:s},t.disable=function(){const s=[...t.names.map(n),...t.skips.map(n).map((a=>"-"+a))].join(",");return t.enable(""),s},t.enable=function(s){let a;t.save(s),t.namespaces=s,t.names=[],t.skips=[];const l=(typeof s=="string"?s:"").split(/[\s,]+/),u=l.length;for(a=0;a<u;a++)l[a]&&((s=l[a].replace(/\*/g,".*?"))[0]==="-"?t.skips.push(new RegExp("^"+s.slice(1)+"$")):t.names.push(new RegExp("^"+s+"$")))},t.enabled=function(s){if(s[s.length-1]==="*")return!0;let a,l;for(a=0,l=t.skips.length;a<l;a++)if(t.skips[a].test(s))return!1;for(a=0,l=t.names.length;a<l;a++)if(t.names[a].test(s))return!0;return!1},t.humanize=sR(),t.destroy=function(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")},Object.keys(e).forEach((s=>{t[s]=e[s]})),t.names=[],t.skips=[],t.formatters={},t.selectColor=function(s){let a=0;for(let l=0;l<s.length;l++)a=(a<<5)-a+s.charCodeAt(l),a|=0;return t.colors[Math.abs(a)%t.colors.length]},t.enable(t.load()),t},aR={};(function(e,t){t.formatArgs=function(n){if(n[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+n[0]+(this.useColors?"%c ":" ")+"+"+e.exports.humanize(this.diff),!this.useColors)return;const s="color: "+this.color;n.splice(1,0,s,"color: inherit");let a=0,l=0;n[0].replace(/%[a-zA-Z%]/g,(u=>{u!=="%%"&&(a++,u==="%c"&&(l=a))})),n.splice(l,0,s)},t.save=function(n){try{n?t.storage.setItem("debug",n):t.storage.removeItem("debug")}catch{}},t.load=function(){let n;try{n=t.storage.getItem("debug")}catch{}return!n&&typeof process<"u"&&"env"in process&&(n=aR.DEBUG),n},t.useColors=function(){return typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs)?!0:typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/)?!1:typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)},t.storage=(function(){try{return localStorage}catch{}})(),t.destroy=(()=>{let n=!1;return()=>{n||(n=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),t.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],t.log=console.debug||console.log||(()=>{}),e.exports=iR(t);const{formatters:r}=e.exports;r.j=function(n){try{return JSON.stringify(n)}catch(s){return"[UnexpectedJSONParseError]: "+s.message}}})(wv,wv.exports);var zx=wv.exports;const oR=new Md,lR=zx.debug.formatArgs;zx.debug.formatArgs=function(e){e[0]=`(${new Date().toISOString()}): ${e[0]} [${oR.toString()}]`,lR.call(this,e)};const cR=zx.debug("teamsJs");function Aa(e){return cR.extend(e)}function hn(e,t){return`${e}_${t}`}function IE(e){return/^v\d+_[\w.]+$/.test(e)}function Wo(e){return e.uuidAsString!==void 0?`${e.uuidAsString} (legacy id: ${e.id})`:e.uuid!==void 0?`${e.uuid.toString()} (legacy id: ${e.id})`:`legacy id: ${e.id} (no uuid)`}const uR=Aa("flushMessageQueue");function DE(e,t,r,n){if(e&&t&&r.length!==0)for(;r.length>0;){const s=r.shift();if(s){const a=TE(s);uR("Flushing message %s from %s message queue via postMessage.",Wo(a),n),e.postMessage(a,t)}}}var dR=["teams.microsoft.com","teams.microsoft.us","gov.teams.microsoft.us","dod.teams.microsoft.us","int.teams.microsoft.com","outlook.office.com","outlook-sdf.office.com","outlook.office365.com","outlook-sdf.office365.com","outlook.office365.us","outlook-dod.office365.us","webmail.apps.mil","outlook.live.com","outlook-sdf.live.com","teams.live.com","local.teams.live.com","local.teams.live.com:8080","local.teams.office.com","local.teams.office.com:8080","devspaces.skype.com","*.www.office.com","www.office.com","word.office.com","excel.office.com","powerpoint.office.com","www.officeppe.com","*.www.microsoft365.com","www.microsoft365.com","bing.com","edgeservices.bing.com","work.bing.com","www.bing.com","www.staging-bing-int.com","*.cloud.microsoft","*.m365.cloud.microsoft","*.outlook.cloud.microsoft","chatuxmanager.svc.cloud.microsoft","copilot.microsoft.com","windows.msn.com","fa000000125.resources.office.net","fa000000129.resources.office.net","fa000000124.resources.office.net","fa000000128.resources.office.net","fa000000136.resources.office.net","fa000000125.officeapps.live.com","fa000000129.officeapps.live.com","fa000000124.officeapps.live.com","fa000000128.officeapps.live.com"];const qS="2.0.1",jh=dR,HS=1500,fR=new URL("https://res.cdn.office.net/teams-js/validDomains/json/validDomains.json"),hR=/^https:\/\//,vd="The library has not yet been initialized",mR="The runtime has not yet been initialized",pR="The runtime version is not supported";let Mt=class{};Mt.initializeCalled=!1,Mt.initializeCompleted=!1,Mt.additionalValidOrigins=[],Mt.initializePromise=void 0,Mt.isFramelessWindow=!1,Mt.frameContext=void 0,Mt.hostClientType=void 0,Mt.printCapabilityEnabled=!1,Mt.teamsJsInstanceId=new Md().toString();const $E=Aa("runtime"),Fm=4;function RE(e){return e.apiVersion===Fm}function gR(e){if(RE(e))return!0;throw e.apiVersion===-1?new Error(mR):new Error(pR)}let ja={apiVersion:-1,supports:{}};const yR={supports:{appInstallDialog:{},appEntity:{},call:{},chat:{},conversations:{},dialog:{card:{bot:{}},url:{bot:{},parentCommunication:{}},update:{}},interactive:{},logs:{},meetingRoom:{},menus:{},monetization:{},notifications:{},pages:{config:{},backStack:{},fullTrust:{}},remoteCamera:{},teams:{fullTrust:{}},teamsCore:{},video:{sharedFrame:{}}}},ME=[ar.desktop,ar.web,ar.rigel,ar.surfaceHub,ar.teamsRoomsWindows,ar.teamsRoomsAndroid,ar.teamsPhones,ar.teamsDisplays],vR=[ar.android,ar.ios,ar.ipados,ar.visionOS],KS=[...ME,...vR];function xR(e){let t=e;if(t.apiVersion<Fm&&bR.forEach((r=>{t.apiVersion===r.versionToUpgradeFrom&&(t=r.upgradeToNextVersion(t))})),RE(t))return t;throw new Error("Received a runtime that could not be upgraded to the latest version")}const bR=[{versionToUpgradeFrom:1,upgradeToNextVersion:e=>{var t;return{apiVersion:2,hostVersionsInfo:void 0,isLegacyTeams:e.isLegacyTeams,supports:Object.assign(Object.assign({},e.supports),{dialog:e.supports.dialog?{card:void 0,url:e.supports.dialog,update:(t=e.supports.dialog)===null||t===void 0?void 0:t.update}:void 0})}}},{versionToUpgradeFrom:2,upgradeToNextVersion:e=>{const t=e.supports,r=Fx(t,["appNotification"]);return Object.assign(Object.assign({},e),{apiVersion:3,supports:r})}},{versionToUpgradeFrom:3,upgradeToNextVersion:e=>{var t,r,n,s,a;return{apiVersion:4,hostVersionsInfo:e.hostVersionsInfo,isNAAChannelRecommended:e.isNAAChannelRecommended,isLegacyTeams:e.isLegacyTeams,supports:Object.assign(Object.assign({},e.supports),{dialog:e.supports.dialog?{card:(t=e.supports.dialog)===null||t===void 0?void 0:t.card,url:{bot:(n=(r=e.supports.dialog)===null||r===void 0?void 0:r.url)===null||n===void 0?void 0:n.bot,parentCommunication:!((s=e.supports.dialog)===null||s===void 0)&&s.url?{}:void 0},update:(a=e.supports.dialog)===null||a===void 0?void 0:a.update}:void 0})}}}],wR={"1.0.0":[{capability:{pages:{appButton:{},tabs:{}},stageView:{}},hostClientTypes:ME}],"1.9.0":[{capability:{location:{}},hostClientTypes:KS}],"2.0.0":[{capability:{people:{}},hostClientTypes:KS},{capability:{sharing:{}},hostClientTypes:[ar.desktop,ar.web]}],"2.0.1":[{capability:{teams:{fullTrust:{joinedTeams:{}}}},hostClientTypes:[ar.android,ar.desktop,ar.ios,ar.teamsRoomsAndroid,ar.teamsPhones,ar.teamsDisplays,ar.web]},{capability:{webStorage:{}},hostClientTypes:[ar.desktop]}],"2.0.5":[{capability:{webStorage:{}},hostClientTypes:[ar.android,ar.ios]}],"2.0.8":[{capability:{sharing:{}},hostClientTypes:[ar.android,ar.ios]}],"2.1.1":[{capability:{nestedAppAuth:{}},hostClientTypes:[ar.android,ar.ios,ar.ipados,ar.visionOS]}],"2.1.2":[]},dy=$E.extend("generateBackCompatRuntimeConfig");function FE(e,t){const r=Object.assign({},e);for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&(typeof t[n]!="object"||Array.isArray(t[n])?n in e||(r[n]=t[n]):r[n]=FE(e[n]||{},t[n]));return r}function jR(e,t,r){dy("generating back compat runtime config for %s",e);let n=Object.assign({},t.supports);dy("Supported capabilities in config before updating based on highestSupportedVersion: %o",n),Object.keys(r).forEach((a=>{PE(e,a)>=0&&r[a].forEach((l=>{Mt.hostClientType!==void 0&&l.hostClientTypes.includes(Mt.hostClientType)&&(n=FE(n,l.capability))}))}));const s={apiVersion:Fm,hostVersionsInfo:W$,isLegacyTeams:!0,supports:n};return dy("Runtime config after updating based on highestSupportedVersion: %o",s),s}const fy=$E.extend("applyRuntimeConfig");function hy(e){typeof e.apiVersion=="string"&&(fy("Trying to apply runtime with string apiVersion, processing as v1: %o",e),e=Object.assign(Object.assign({},e),{apiVersion:1})),fy("Fast-forwarding runtime %o",e);const t=xR(e);fy("Applying runtime %o",t),ja=OE(t)}function SR(e){return e!=null&&e.serialize!==void 0&&typeof e.serialize=="function"}const Fh="2.46.0";let Lh=class Ic{static storeCallbackInformation(t,r){Ic.callbackInformation.set(t,r)}static clearMessages(){Ic.callbackInformation.clear()}static deleteMessageInformation(t){Ic.callbackInformation.delete(t)}static handleOneWayPerformanceMetrics(t,r,n){const s=t.monotonicTimestamp;s&&n?aN({actionName:t.func,messageDelay:n-s,requestStartedAt:s}):r("Unable to send performance metrics for event %s",t.func)}static handlePerformanceMetrics(t,r,n,s){const a=Ic.callbackInformation.get(t);a&&r.monotonicTimestamp&&s?(aN({actionName:a.name,messageDelay:s-r.monotonicTimestamp,requestStartedAt:a.calledAt}),Ic.deleteMessageInformation(t)):n("Unable to send performance metrics for callback %s with arguments %o",t.toString(),r.args)}};Lh.callbackInformation=new Map;const LE=Aa("nestedAppAuthUtils"),NR=LE.extend("tryPolyfillWithNestedAppAuthBridge"),kR="v2";function _R(e,t,r){var n;const s=NR;if(Mt.isFramelessWindow)return void s("Cannot polyfill nestedAppAuthBridge as current window is frameless");if(!t)return void s("Cannot polyfill nestedAppAuthBridge as current window does not exist");if(t.parent!==t.top)return void s("Default NAA bridge injection not supported in nested iframe. Use standalone NAA bridge instead.");const a=(()=>{try{return JSON.parse(e)}catch{return null}})();if(!a||!(!((n=a.supports)===null||n===void 0)&&n.nestedAppAuth))return void s("Cannot polyfill nestedAppAuthBridge as current hub does not support nested app auth");const l=t;if(l.nestedAppAuthBridge)return void s("nestedAppAuthBridge already exists on current window, skipping polyfill");const u=(function(d,m){const f=CR;if(!d)return f("nestedAppAuthBridge cannot be created as current window does not exist"),null;const{onMessage:p,sendPostMessage:y}=m,x=j=>w=>p(w,j);return{addEventListener:(j,w)=>{j==="message"?d.addEventListener(j,x(w)):f(`Event ${j} is not supported by nestedAppAuthBridge`)},postMessage:j=>{const w=(()=>{try{return JSON.parse(j)}catch{return null}})();if(!w||typeof w!="object"||w.messageType!=="NestedAppAuthRequest")return void f("Unrecognized data format received by app, message being ignored. Message: %o",j);const S=hn(kR,"nestedAppAuth.execute");y(j,S)},removeEventListener:(j,w)=>{d.removeEventListener(j,x(w))}}})(l,r);u&&(l.nestedAppAuthBridge=u)}const CR=LE.extend("createNestedAppAuthBridge");let Mo=[];const Uo=Aa("validateOrigin");let rd;function ER(){return Jo(this,void 0,void 0,(function*(){rd||(yield UE())}))}function zE(){return Mo.length===0}function UE(e=!1){return Jo(this,void 0,void 0,(function*(){if(!zE()&&!e)return Mo;if(rd)return rd;if(Mm())return Mo=jh,jh;{Uo("Initiating fetch call to acquire valid origins list from CDN");const t=new AbortController,r=setTimeout((()=>t.abort()),HS);return rd=fetch(fR,{signal:t.signal}).then((n=>{if(clearTimeout(r),!n.ok)throw new Error("Invalid Response from Fetch Call");return Uo("Fetch call completed and retrieved valid origins list from CDN"),n.json().then((s=>{if((function(a){let l=JSON.parse(a);try{l=JSON.parse(a)}catch{return!1}if(!l.validOrigins)return!1;for(const u of l.validOrigins)try{new URL("https://"+u)}catch{return Uo("isValidOriginsFromCDN call failed to validate origin: %s",u),!1}return!0})(JSON.stringify(s)))return Mo=s.validOrigins,Mo;throw new Error("Valid origins list retrieved from CDN is invalid")}))})).catch((n=>(n.name==="AbortError"?Uo(`validOrigins fetch call to CDN failed due to Timeout of ${HS} ms. Defaulting to fallback list`):Uo("validOrigins fetch call to CDN failed with error: %s. Defaulting to fallback list",n),Mo=jh,Mo))),rd}}))}function GS(e,t){if(e.substring(0,2)==="*."){const r=e.substring(1);if(t.length>r.length&&t.split(".").length===r.split(".").length&&t.substring(t.length-r.length)===r)return!0}else if(e===t)return!0;return!1}function AR(e,t){const r=zE()?jh:Mo;return YS(e,r)?Promise.resolve(!0):(Uo("Origin %s is not in the local valid origins list, fetching from CDN",e),UE(t).then((n=>YS(e,n))))}function YS(e,t){if(!Q$(e))return Uo("Origin %s is invalid because it is not using https protocol. Protocol being used: %s",e,e.protocol),!1;const r=e.host;if(t.some((n=>GS(n,r))))return!0;for(const n of Mt.additionalValidOrigins)if(GS(n.substring(0,8)==="https://"?n.substring(8):n,r))return!0;return Uo(`Origin %s is invalid because it is not an origin approved by this library or included in the call to app.initialize.
Origins approved by this library: %o
Origins included in app.initialize: %o`,e,t,Mt.additionalValidOrigins),!1}ER();const Vl=Aa("communication");let dt=class{},ur=class{};function PR(e,t){if(ur.messageListener=r=>(function(n){return Jo(this,void 0,void 0,(function*(){if(!n||!n.data||typeof n.data!="object")return void JS("Unrecognized message format received by app, message being ignored. Message: %o",n);const s=n.source||n.originalEvent&&n.originalEvent.source,a=n.origin||n.originalEvent&&n.originalEvent.origin;return VE(s,a).then((l=>{l?((function(u,d){Mt.isFramelessWindow||dt.parentWindow&&!dt.parentWindow.closed&&u!==dt.parentWindow||(dt.parentWindow=u,dt.parentOrigin=d),dt.parentWindow&&dt.parentWindow.closed&&(dt.parentWindow=null,dt.parentOrigin=null),DE(dt.parentWindow,dt.parentOrigin,ur.parentMessageQueue,"parent")})(s,a),s!==dt.parentWindow?IM():QS(n)):JS("Message being ignored by app because it is either coming from the current window or a different window with an invalid origin, message: %o, source: %o, origin: %o",n,s,a)}))}))})(r),dt.currentWindow=dt.currentWindow||Z$(),dt.parentWindow=dt.currentWindow.parent!==dt.currentWindow.self?dt.currentWindow.parent:dt.currentWindow.opener,dt.topWindow=dt.currentWindow.top,(dt.parentWindow||e)&&dt.currentWindow.addEventListener("message",ur.messageListener,!1),!dt.parentWindow){const r=dt.currentWindow;if(!r.nativeInterface)return Promise.reject(new Error("Initialization Failed. No Parent window found."));Mt.isFramelessWindow=!0,r.onNativeMessage=QS}try{return dt.parentOrigin="*",Lm(t,"initialize",[Fh,Fm,e]).then((([r,n,s,a])=>(_R(a,dt.currentWindow,{onMessage:zR,sendPostMessage:RR}),{context:r,clientType:n,runtimeConfig:s,clientSupportedSDKVersion:a})))}finally{dt.parentOrigin=null}}function OR(e,t,...r){return Lm(e,t,r).then((([n])=>n))}function TR(e,t,r,...n){return Lm(e,t,n).then((([s,a])=>{if(!s)throw new Error(a||r)}))}function Lm(e,t,r=void 0){if(!IE(e))throw Error(`apiVersionTag: ${e} passed in doesn't follow the pattern starting with 'v' followed by digits, then underscore with words, please check.`);return new Promise((n=>{const s=WE(e,t,r);var a;n((a=s.uuid,new Promise((l=>{ur.promiseCallbacks.set(a,l)}))))}))}function IR(e){return e.map((t=>SR(t)?t.serialize():t))}function DR(e,t,r,n,s){var a;return Jo(this,void 0,void 0,(function*(){const l=IR(t),[u]=yield Lm(n,e,l);if(U$(u))throw new Error(`${u.errorCode}, message: ${(a=u.message)!==null&&a!==void 0?a:"None"}`);if(r.validate(u))return r.deserialize(u);throw new Error(`${Mh.INTERNAL_ERROR}, message: Invalid response from host - ${JSON.stringify(u)}`)}))}function ra(e,t,r,n){let s;if(r instanceof Function?n=r:r instanceof Array&&(s=r),!IE(e))throw Error(`apiVersionTag: ${e} passed in doesn't follow the pattern starting with 'v' followed by digits, then underscore with words, please check.`);const a=WE(e,t,s);n&&ur.callbacks.set(a.uuid,n)}ur.parentMessageQueue=[],ur.topMessageQueue=[],ur.nextMessageId=0,ur.callbacks=new Map,ur.promiseCallbacks=new Map,ur.portCallbacks=new Map,ur.legacyMessageIdsToUuidMap={};const $R=Vl.extend("sendNestedAuthRequestToTopWindow");function RR(e,t){const r=$R,n=dt.topWindow,s=(function(a,l){const u=ur.nextMessageId++,d=new Md;return ur.legacyMessageIdsToUuidMap[u]=d,{id:u,uuid:d,func:"nestedAppAuth.execute",timestamp:Date.now(),monotonicTimestamp:Lx(),apiVersionTag:l,args:[],data:a}})(e,t);return r("Message %s information: %o",Wo(s),{actionName:s.func}),BE(n,s)}const MR=Vl.extend("sendRequestToTargetWindowHelper");function BE(e,t){const r=MR,n=(function(a){return a===dt.topWindow&&jv()?"top":a===dt.parentWindow?"parent":null})(e),s=TE(t);if(Mt.isFramelessWindow)dt.currentWindow&&dt.currentWindow.nativeInterface&&(r("Sending message %s to %s via framelessPostMessage interface",Wo(s),n),dt.currentWindow.nativeInterface.framelessPostMessage(JSON.stringify(s)));else{const a=(function(l){return l===dt.topWindow&&jv()?dt.topOrigin:l===dt.parentWindow?dt.parentOrigin:null})(e);e&&a?(r("Sending message %s to %s via postMessage",Wo(s),n),e.postMessage(s,a)):(r("Adding message %s to %s message queue",Wo(s),n),UR(e).push(t))}return t}const FR=Vl.extend("sendMessageToParentHelper");function WE(e,t,r,n,s){const a=FR,l=dt.parentWindow,u=(function(d,m,f,p,y){const x=ur.nextMessageId++,j=new Md;ur.legacyMessageIdsToUuidMap[x]=j;const w=Mt.teamsJsInstanceId;return{id:x,uuid:j,func:m,timestamp:Date.now(),monotonicTimestamp:Lx(),args:f||[],apiVersionTag:d,isProxiedFromChild:p!=null,teamsJsInstanceId:w}})(e,t,r,n);return Lh.storeCallbackInformation(u.uuid,{name:t,calledAt:u.timestamp}),a("Message %s information: %o",Wo(u),{actionName:t,args:r}),BE(l,u)}const JS=Vl.extend("processIncomingMessage"),LR=Vl.extend("processAuthBridgeMessage");function zR(e,t){var r,n;const s=LR;if(!e||!e.data||typeof e.data!="object")return void s("Unrecognized message format received by app, message being ignored. Message: %o",e);const{args:a}=e.data,[,l]=a??[],u=(()=>{try{return JSON.parse(l)}catch{return null}})();if(!u||typeof u!="object"||u.messageType!=="NestedAppAuthResponse")return void s("Unrecognized data format received by app, message being ignored. Message: %o",e);const d=e.source||((r=e==null?void 0:e.originalEvent)===null||r===void 0?void 0:r.source),m=e.origin||((n=e==null?void 0:e.originalEvent)===null||n===void 0?void 0:n.origin);d?VE(d,m)?(dt.topWindow&&!dt.topWindow.closed&&d!==dt.topWindow||(dt.topWindow=d,dt.topOrigin=m),dt.topWindow&&dt.topWindow.closed&&(dt.topWindow=null,dt.topOrigin=null),DE(dt.topWindow,dt.topOrigin,ur.topMessageQueue,"top"),t(l)):s("Message being ignored by app because it is either coming from the current window or a different window with an invalid origin"):s("Message being ignored by app because it is coming for a target that is null")}const my=Vl.extend("shouldProcessIncomingMessage");function VE(e,t){return Jo(this,void 0,void 0,(function*(){if(dt.currentWindow&&e===dt.currentWindow)return my("Should not process message because it is coming from the current window"),!1;if(dt.currentWindow&&dt.currentWindow.location&&t&&t===dt.currentWindow.location.origin)return!0;{let r;try{r=new URL(t)}catch{return my("Message has an invalid origin of %s",t),!1}const n=yield AR(r);return n||my("Message has an invalid origin of %s",t),n}}))}const XS=Vl.extend("handleIncomingMessageFromParent");function Sh(e,t){if(t){const r=[...e].find((([n,s])=>n.toString()===t.toString()));if(r)return r[0]}}function py(e,t){const r=Sh(t,e.uuid);r&&t.delete(r),e.uuid?ur.legacyMessageIdsToUuidMap={}:delete ur.legacyMessageIdsToUuidMap[e.id]}function QS(e){const t=XS,r=Lx();if("id"in e.data&&typeof e.data.id=="number"){const n=e.data,s=nR(n),a=(function(l){const u=XS;if(!l.uuid)return ur.legacyMessageIdsToUuidMap[l.id];{const d=l.uuid,m=Sh(ur.callbacks,d);if(m)return m;const f=Sh(ur.promiseCallbacks,d);if(f)return f;const p=Sh(ur.portCallbacks,d);if(p)return p}u("Received message %s that failed to produce a callbackId",Wo(l))})(s);if(a){const l=ur.callbacks.get(a);t("Received a response from parent for message %s",a.toString()),Lh.handlePerformanceMetrics(a,s,t,r),l&&(t("Invoking the registered callback for message %s with arguments %o",a.toString(),s.args),l.apply(null,[...s.args,s.isPartialResponse]),(function(m){return m.data.isPartialResponse===!0})(e)||(t("Removing registered callback for message %s",a.toString()),py(s,ur.callbacks)));const u=ur.promiseCallbacks.get(a);u&&(t("Invoking the registered promise callback for message %s with arguments %o",a.toString(),s.args),u(s.args),t("Removing registered promise callback for message %s",a.toString()),py(s,ur.promiseCallbacks));const d=ur.portCallbacks.get(a);if(d){let m;t("Invoking the registered port callback for message %s with arguments %o",a.toString(),s.args),e.ports&&e.ports[0]instanceof MessagePort&&(m=e.ports[0]),d(m,s.args),t("Removing registered port callback for message %s",a.toString()),py(s,ur.portCallbacks)}s.uuid&&(ur.legacyMessageIdsToUuidMap={})}}else if("func"in e.data&&typeof e.data.func=="string"){const n=e.data;Lh.handleOneWayPerformanceMetrics(n,t,r),t('Received a message from parent %s, action: "%s"',Wo(n),n.func),_M(n.func,n.args)}else t("Received an unknown message: %O",e)}function jv(){return dt.topWindow!==dt.parentWindow}function UR(e){return e===dt.topWindow&&jv()?ur.topMessageQueue:e===dt.parentWindow?ur.parentMessageQueue:[]}const qE=Aa("internal"),BR=qE.extend("ensureInitializeCalled"),WR=qE.extend("ensureInitialized");function HE(){if(!Mt.initializeCalled)throw BR(vd),new Error(vd)}function iu(e,...t){if(!Mt.initializeCompleted)throw WR("%s. initializeCalled: %s",vd,Mt.initializeCalled.toString()),new Error(vd);if(t&&t.length>0){let r=!1;for(let n=0;n<t.length;n++)if(t[n]===Mt.frameContext){r=!0;break}if(!r)throw new Error(`This call is only allowed in following contexts: ${JSON.stringify(t)}. Current context: "${Mt.frameContext}".`)}return gR(e)}function VR(e){let t=Mt.additionalValidOrigins.concat(e.filter((n=>typeof n=="string"&&hR.test(n))));const r={};t=t.filter((n=>!r[n]&&(r[n]=!0,!0))),Mt.additionalValidOrigins=t}function qR(e){if(!KR(e))throw new Error(`Potential app id (${e}) is invalid; its length ${e.length} is not within the length limits (${KE}-${GE}).`)}function HR(e){if(eR(e))throw new Error(`Potential app id (${e}) is invalid; it contains script tags.`);if(GR(e))throw new Error(`Potential app id (${e}) is invalid; it contains non-printable characters.`)}const KE=4,GE=256;function KR(e){return e.length<GE&&e.length>KE}function GR(e){return[...e].some((t=>{const r=t.charCodeAt(0);return r<32||r>126}))}let YR=class{constructor(t){this.idAsString=t,HR(t)}serialize(){return this.toString()}toString(){return this.idAsString}},JR=class extends YR{constructor(t){super(t),qR(t)}toJSON(){return{appIdAsString:this.toString()}}};function YE(e){return e==null}const zm="v2",gy=Aa("app"),ZS={Success:"appInitialization.success"};var eN,tN;function XR(e){return gM(hn(zm,"app.initialize"),e)}function QR(){return new Promise((e=>{HE(),e(OR(hn(zm,"app.getContext"),"getContext"))})).then((e=>(function(t){var r;return{actionInfo:t.actionInfo,app:{locale:t.locale,sessionId:t.appSessionId?t.appSessionId:"",theme:t.theme?t.theme:"default",iconPositionVertical:t.appIconPosition,osLocaleInfo:t.osLocaleInfo,messageId:t.messageId,parentMessageId:t.parentMessageId,userClickTime:t.userClickTime,userClickTimeV2:t.userClickTimeV2,userFileOpenPreference:t.userFileOpenPreference,host:{name:t.hostName?t.hostName:xv.teams,clientType:t.hostClientType?t.hostClientType:ar.web,sessionId:t.sessionId?t.sessionId:"",ringId:t.ringId},appLaunchId:t.appLaunchId,appId:t.appId?new JR(t.appId):void 0,manifestVersion:t.manifestVersion},page:{id:t.entityId,frameContext:t.frameContext?t.frameContext:Mt.frameContext,renderingSurface:t.renderingSurface?t.renderingSurface:void 0,subPageId:t.subEntityId,isFullScreen:t.isFullScreen,isMultiWindow:t.isMultiWindow,isBackgroundLoad:t.isBackgroundLoad,sourceOrigin:t.sourceOrigin},user:{id:(r=t.userObjectId)!==null&&r!==void 0?r:"",displayName:t.userDisplayName,isCallingAllowed:t.isCallingAllowed,isPSTNCallingAllowed:t.isPSTNCallingAllowed,licenseType:t.userLicenseType,loginHint:t.loginHint,userPrincipalName:t.userPrincipalName,tenant:t.tid?{id:t.tid,teamsSku:t.tenantSKU}:void 0},channel:t.channelId?{id:t.channelId,displayName:t.channelName,relativeUrl:t.channelRelativeUrl,membershipType:t.channelType,defaultOneNoteSectionId:t.defaultOneNoteSectionId,ownerGroupId:t.hostTeamGroupId,ownerTenantId:t.hostTeamTenantId}:void 0,chat:t.chatId?{id:t.chatId}:void 0,meeting:t.meetingId?{id:t.meetingId}:void 0,sharepoint:t.sharepoint,team:t.teamId?{internalId:t.teamId,displayName:t.teamName,type:t.teamType,groupId:t.groupId,templateId:t.teamTemplateId,isArchived:t.isTeamArchived,userRole:t.userTeamRole}:void 0,sharePointSite:t.teamSiteUrl||t.teamSiteDomain||t.teamSitePath||t.mySitePath||t.mySiteDomain?{teamSiteUrl:t.teamSiteUrl,teamSiteDomain:t.teamSiteDomain,teamSitePath:t.teamSitePath,teamSiteId:t.teamSiteId,mySitePath:t.mySitePath,mySiteDomain:t.mySiteDomain}:void 0,dialogParameters:t.dialogParameters||{}}})(e)))}function ZR(){return yM(hn(zm,"app.notifySuccess"))}function eM(e){vM(hn(zm,"app.registerOnThemeChangeHandler"),e)}(function(e){e.AuthFailed="AuthFailed",e.Timeout="Timeout",e.Other="Other"})(eN||(eN={})),(function(e){e.PermissionError="PermissionError",e.NotFound="NotFound",e.Throttling="Throttling",e.Offline="Offline",e.Other="Other"})(tN||(tN={})),gy("teamsjs instance is version %s, starting at %s UTC (%s local)",Fh,new Date().toISOString(),new Date().toLocaleString()),(function(){if(Mm())return;const e=document.getElementsByTagName("script"),t=e&&e[e.length-1]&&e[e.length-1].src,r="Today, teamsjs can only be used from a single script or you may see undefined behavior. This log line is used to help detect cases where teamsjs is loaded multiple times -- it is always written. The presence of the log itself does not indicate a multi-load situation, but multiples of these log lines will. If you would like to use teamjs from more than one script at the same time, please open an issue at https://github.com/OfficeDev/microsoft-teams-library-js/issues";t&&t.length!==0?gy("teamsjs is being used from %s. %s",t,r):gy("teamsjs is being used from a script tag embedded directly in your html. %s",r)})();const tM="v2",rM=[];function nM(e){Mt.frameContext&&(Mt.frameContext===bv.task?rM.push(e):CM("messageForChild"))}function sM(){Al(hn(tM,"dialog.registerMessageForChildHandler"),"messageForChild",nM,!1)}const Lc="v2";var rN,nN;(function(e){e[e.ifRoom=0]="ifRoom",e[e.overflowOnly=1]="overflowOnly"})(rN||(rN={}));function iM(){Al(hn(Lc,"menus.registerNavBarMenuItemPressHandler"),"navBarMenuItemPress",oM,!1),Al(hn(Lc,"menus.registerActionMenuItemPressHandler"),"actionMenuItemPress",lM,!1),Al(hn(Lc,"menus.registerSetModuleViewHandler"),"setModuleView",aM,!1)}function aM(e){iu(ja),ra(hn(Lc,"menus.handleViewConfigItemPress"),"viewConfigItemPress",[e])}function oM(e){iu(ja),ra(hn(Lc,"menus.handleNavBarMenuItemPress"),"handleNavBarMenuItemPress",[e])}function lM(e){iu(ja),ra(hn(Lc,"menus.handleActionMenuItemPress"),"handleActionMenuItemPress",[e])}(function(e){e.dropDown="dropDown",e.popOver="popOver"})(nN||(nN={}));class cM{}let uM=class extends cM{validate(t){return!0}deserialize(t){return t}};function dM(){Al(hn($l,"pages.config.registerSettingsSaveHandler"),"settings.save",fM,!1),Al(hn($l,"pages.config.registerSettingsRemoveHandler"),"settings.remove",mM,!1)}function fM(e){new hM(e).notifySuccess()}let hM=class{constructor(t){this.notified=!1,this.result=t||{}}notifySuccess(){this.ensureNotNotified(),ra(hn($l,"pages.saveEvent.notifySuccess"),"settings.save.success"),this.notified=!0}notifyFailure(t){this.ensureNotNotified(),ra(hn($l,"pages.saveEvent.notifyFailure"),"settings.save.failure",[t]),this.notified=!0}ensureNotNotified(){if(this.notified)throw new Error("The SaveEvent may only notify success or failure once.")}};function mM(){new pM().notifySuccess()}let pM=class{constructor(){this.notified=!1}notifySuccess(){this.ensureNotNotified(),ra(hn($l,"pages.removeEvent.notifySuccess"),"settings.remove.success"),this.notified=!0}notifyFailure(t){this.ensureNotNotified(),ra(hn($l,"pages.removeEvent.notifyFailure"),"settings.remove.failure",[t]),this.notified=!0}ensureNotNotified(){if(this.notified)throw new Error("The removeEventType may only notify success or failure once.")}};const JE=Aa("app");function gM(e,t){return Mm()?(JE.extend("initialize")("window object undefined at initialization"),Promise.resolve()):X$((()=>(function(r,n){return new Promise((s=>{Mt.initializeCalled||(Mt.initializeCalled=!0,kM(),Mt.initializePromise=PR(n,r).then((({context:a,clientType:l,runtimeConfig:u,clientSupportedSDKVersion:d=qS})=>{Mt.frameContext=a,Mt.hostClientType=l,Mt.clientSupportedSDKVersion=d;try{Wu("Parsing %s",u);let m=JSON.parse(u);if(Wu("Checking if %o is a valid runtime object",m??"null"),!m||!m.apiVersion)throw new Error("Received runtime config is invalid");m=BS(m),u&&hy(m)}catch(m){if(!(m instanceof SyntaxError))throw m;try{Wu("Attempting to parse %s as an SDK version",u),isNaN(PE(u,qS))||(Mt.clientSupportedSDKVersion=u);let f=JSON.parse(d);if(Wu("givenRuntimeConfig parsed to %o",f??"null"),!f)throw new Error("givenRuntimeConfig string was successfully parsed. However, it parsed to value of null");f=BS(f),hy(f)}catch(f){if(!(f instanceof SyntaxError))throw f;hy(jR(Mt.clientSupportedSDKVersion,yR,wR))}}Mt.initializeCompleted=!0})),iM(),dM(),sM()),Array.isArray(n)&&VR(n),Mt.initializePromise!==void 0?s(Mt.initializePromise):Wu("GlobalVars.initializePromise is unexpectedly undefined")}))})(e,t)),6e4,new Error("SDK initialization timed out."))}function yM(e){return Jo(this,void 0,void 0,(function*(){if(Mt.initializeCompleted)return sN(e);if(!Mt.initializePromise)throw new Error(vd);return Mt.initializePromise.then((()=>sN(e)))}))}function sN(e){return Jo(this,void 0,void 0,(function*(){return iu(ja)&&(!((t=ja.supports.app)===null||t===void 0)&&t.notifySuccessResponse)?DR(ZS.Success,[Fh],new uM,e).then((()=>({hasFinishedSuccessfully:!0}))):(ra(e,ZS.Success,[Fh]),{hasFinishedSuccessfully:"unknown"});var t}))}const Wu=JE.extend("initializeHelper");function vM(e,t){!YE(t)&&HE(),EM(e,t)}function xM(){return wM(hn($l,"pages.backStack.navigateBack"))}function bM(){return!(!iu(ja)||!ja.supports.pages)&&!!ja.supports.pages.backStack}const $l="v2";function wM(e){return new Promise((t=>{if(iu(ja),!bM())throw B$;t(TR(e,"navigateBack","Back navigation is not supported in the current client or context."))}))}function jM(){Al(hn("v2","pages.backStack.registerBackButtonPressHandler"),"backButtonPress",SM,!1)}function SM(){xM()}const NM=Aa("handlers");let Fr=class xa{static initializeHandlers(){xa.handlers.themeChange=AM,xa.handlers.load=PM,xa.handlers.beforeUnload=OM,jM()}static uninitializeHandlers(){xa.handlers={},xa.themeChangeHandler=null,xa.loadHandler=null,xa.beforeUnloadHandler=null,xa.beforeSuspendOrTerminateHandler=null,xa.resumeHandler=null}};function kM(){Fr.initializeHandlers()}Fr.handlers={},Fr.themeChangeHandler=null,Fr.loadHandler=null,Fr.beforeUnloadHandler=null,Fr.beforeSuspendOrTerminateHandler=null,Fr.resumeHandler=null,Fr.hostToAppPerformanceMetricsHandler=null;const iN=NM.extend("callHandler");function _M(e,t){const r=Fr.handlers[e];return r?(iN("Invoking the registered handler for message %s with arguments %o",e,t),[!0,r.apply(this,t)]):(iN("Handler for action message %s not found.",e),[!1,void 0])}function Al(e,t,r,n=!0,s=[]){r?(Fr.handlers[t]=r,n&&ra(e,"registerHandler",[t,...s])):delete Fr.handlers[t]}function CM(e){delete Fr.handlers[e]}function EM(e,t){Fr.themeChangeHandler=t,!YE(t)&&ra(e,"registerHandler",["themeChange"])}function AM(e){Fr.themeChangeHandler&&Fr.themeChangeHandler(e)}function aN(e){Fr.hostToAppPerformanceMetricsHandler&&Fr.hostToAppPerformanceMetricsHandler(e)}function PM(e){const t={entityId:(r=e).entityId,contentUrl:new URL(r.contentUrl)};var r;Fr.resumeHandler?(Fr.resumeHandler(t),oN()):Fr.loadHandler&&(Fr.loadHandler(e),oN())}function OM(){return Jo(this,void 0,void 0,(function*(){const e=()=>{ra(hn("v2","handleBeforeUnload"),"readyToUnload",[])};Fr.beforeSuspendOrTerminateHandler?(yield Fr.beforeSuspendOrTerminateHandler(),e()):Fr.beforeUnloadHandler&&Fr.beforeUnloadHandler(e)||e()}))}const TM=Aa("childProxyingCommunication");function oN(){return!1}function IM(e,t){return!1}TM.extend("handleIncomingMessageFromChild");const DM=v.createContext({inTeams:!1,teamsContext:null,isInitialized:!1,teamsTheme:null}),$M=({children:e})=>{const[t,r]=v.useState(!1),[n,s]=v.useState(null),[a,l]=v.useState(!1),[u,d]=v.useState(null);return v.useEffect(()=>{(async()=>{try{if(new URLSearchParams(window.location.search).get("inTeams")==="true"||window.parent!==window){console.log(" Initializing Teams SDK..."),await XR();const y=await QR();console.log(" Teams context:",y),r(!0),s(y),d(y.app.theme),eM(x=>{d(x)}),ZR()}}catch(f){console.error(" Teams initialization error:",f),r(!1)}finally{l(!0)}})()},[]),i.jsx(DM.Provider,{value:{inTeams:t,teamsContext:n,isInitialized:a,teamsTheme:u},children:e})},RM="service_idsx5cg",MM="template_4owif48",FM="OXfL2jaTJuDR5IThS";async function Ho(e){var t;try{const r=await fetch("https://api.emailjs.com/api/v1.0/email/send",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({service_id:RM,template_id:MM,user_id:FM,template_params:{email:e.to,to_email:e.to,to_name:e.to.split("@")[0],subject:e.subject,message_html:e.html||e.text||"",message_text:e.text||((t=e.html)==null?void 0:t.replace(/<[^>]*>/g,""))||""}})});if(!r.ok){const s=await r.text();console.error("EmailJS API error:",r.status,s);let a=`EmailJS API error: ${r.status}`;try{const l=JSON.parse(s);l.text?a=l.text:l.message?a=l.message:l.error&&(a=l.error)}catch{a=s||a}throw new Error(a)}let n;try{const s=await r.text();if(s==="OK"||s.trim()==="OK"){console.log("Email sent successfully via EmailJS");return}n=JSON.parse(s),console.log("Email sent successfully via EmailJS:",n)}catch(s){if(r.ok){console.log("Email sent successfully via EmailJS (non-JSON response)");return}throw s}return}catch(r){throw console.error("sendInvitationEmail error:",r),r.message?r:new Error(`Failed to send email: ${r.toString()}`)}}/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LM=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),zM=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(t,r,n)=>n?n.toUpperCase():r.toLowerCase()),lN=e=>{const t=zM(e);return t.charAt(0).toUpperCase()+t.slice(1)},XE=(...e)=>e.filter((t,r,n)=>!!t&&t.trim()!==""&&n.indexOf(t)===r).join(" ").trim(),UM=e=>{for(const t in e)if(t.startsWith("aria-")||t==="role"||t==="title")return!0};/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var BM={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WM=v.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:r=2,absoluteStrokeWidth:n,className:s="",children:a,iconNode:l,...u},d)=>v.createElement("svg",{ref:d,...BM,width:t,height:t,stroke:e,strokeWidth:n?Number(r)*24/Number(t):r,className:XE("lucide",s),...!a&&!UM(u)&&{"aria-hidden":"true"},...u},[...l.map(([m,f])=>v.createElement(m,f)),...Array.isArray(a)?a:[a]]));/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Et=(e,t)=>{const r=v.forwardRef(({className:n,...s},a)=>v.createElement(WM,{ref:a,iconNode:t,className:XE(`lucide-${LM(lN(e))}`,`lucide-${e}`,n),...s}));return r.displayName=lN(e),r};/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VM=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],cN=Et("arrow-left",VM);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qM=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],HM=Et("arrow-right",qM);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KM=[["path",{d:"M3.85 8.62a4 4 0 0 1 4.78-4.77 4 4 0 0 1 6.74 0 4 4 0 0 1 4.78 4.78 4 4 0 0 1 0 6.74 4 4 0 0 1-4.77 4.78 4 4 0 0 1-6.75 0 4 4 0 0 1-4.78-4.77 4 4 0 0 1 0-6.76Z",key:"3c2336"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],Sv=Et("badge-check",KM);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GM=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],sn=Et("calendar",GM);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YM=[["path",{d:"M5 21v-6",key:"1hz6c0"}],["path",{d:"M12 21V3",key:"1lcnhd"}],["path",{d:"M19 21V9",key:"unv183"}]],Nh=Et("chart-no-axes-column",YM);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JM=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],ds=Et("chevron-down",JM);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XM=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],Fd=Et("chevron-left",XM);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QM=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],ZM=Et("chevron-up",QM);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eF=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],tr=Et("circle-alert",eF);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tF=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],jr=Et("circle-check-big",tF);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rF=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],Um=Et("clock",rF);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nF=[["path",{d:"M11.562 3.266a.5.5 0 0 1 .876 0L15.39 8.87a1 1 0 0 0 1.516.294L21.183 5.5a.5.5 0 0 1 .798.519l-2.834 10.246a1 1 0 0 1-.956.734H5.81a1 1 0 0 1-.957-.734L2.02 6.02a.5.5 0 0 1 .798-.519l4.276 3.664a1 1 0 0 0 1.516-.294z",key:"1vdc57"}],["path",{d:"M5 21h14",key:"11awu3"}]],Os=Et("crown",nF);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sF=[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]],iF=Et("database",sF);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aF=[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]],uN=Et("ellipsis-vertical",aF);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oF=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]],lF=Et("funnel",oF);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cF=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],nd=Et("info",cF);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uF=[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]],Ux=Et("lightbulb",uF);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dF=[["path",{d:"M3 5h.01",key:"18ugdj"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 19h.01",key:"noohij"}],["path",{d:"M8 5h13",key:"1pao27"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 19h13",key:"m83p4d"}]],di=Et("list",dF);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fF=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],hF=Et("lock",fF);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mF=[["path",{d:"m10 17 5-5-5-5",key:"1bsop3"}],["path",{d:"M15 12H3",key:"6jk70r"}],["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}]],pF=Et("log-in",mF);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gF=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],Jn=Et("log-out",gF);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yF=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],au=Et("mail",yF);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vF=[["path",{d:"M5 12h14",key:"1ays0h"}]],$c=Et("minus",vF);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xF=[["path",{d:"m16 6-8.414 8.586a2 2 0 0 0 2.829 2.829l8.414-8.586a4 4 0 1 0-5.657-5.657l-8.379 8.551a6 6 0 1 0 8.485 8.485l8.379-8.551",key:"1miecu"}]],jl=Et("paperclip",xF);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bF=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]],zh=Et("pencil",bF);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wF=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],Dn=Et("plus",wF);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jF=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],Rl=Et("refresh-cw",jF);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SF=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],dN=Et("search",SF);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NF=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],Mn=Et("settings",NF);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kF=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],fN=Et("shield-check",kF);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _F=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],us=Et("shield",_F);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CF=[["path",{d:"m18 14 4 4-4 4",key:"10pe0f"}],["path",{d:"m18 2 4 4-4 4",key:"pucp1d"}],["path",{d:"M2 18h1.973a4 4 0 0 0 3.3-1.7l5.454-8.6a4 4 0 0 1 3.3-1.7H22",key:"1ailkh"}],["path",{d:"M2 6h1.972a4 4 0 0 1 3.6 2.2",key:"km57vx"}],["path",{d:"M22 18h-6.041a4 4 0 0 1-3.3-1.8l-.359-.45",key:"os18l9"}]],EF=Et("shuffle",CF);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AF=[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]],kc=Et("sparkles",AF);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PF=[["path",{d:"M21 10.656V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h12.344",key:"2acyp4"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],xd=Et("square-check-big",PF);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OF=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],dd=Et("square-pen",OF);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TF=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]],bd=Et("square",TF);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IF=[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]],_c=Et("star",IF);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DF=[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]],$F=Et("tag",DF);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RF=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],na=Et("trash-2",RF);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MF=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],QE=Et("triangle-alert",MF);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FF=[["path",{d:"M10 14.66v1.626a2 2 0 0 1-.976 1.696A5 5 0 0 0 7 21.978",key:"1n3hpd"}],["path",{d:"M14 14.66v1.626a2 2 0 0 0 .976 1.696A5 5 0 0 1 17 21.978",key:"rfe1zi"}],["path",{d:"M18 9h1.5a1 1 0 0 0 0-5H18",key:"7xy6bh"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M6 9a6 6 0 0 0 12 0V3a1 1 0 0 0-1-1H7a1 1 0 0 0-1 1z",key:"1mhfuq"}],["path",{d:"M6 9H4.5a1 1 0 0 1 0-5H6",key:"tex48p"}]],Bm=Et("trophy",FF);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LF=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]],Pl=Et("user-plus",LF);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zF=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"17",x2:"22",y1:"8",y2:"13",key:"3nzzx3"}],["line",{x1:"22",x2:"17",y1:"8",y2:"13",key:"1swrse"}]],Vu=Et("user-x",zF);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UF=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],As=Et("user",UF);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BF=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],hs=Et("users",BF);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WF=[["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}],["path",{d:"M5 7c0-1.1.9-2 2-2h10a2 2 0 0 1 2 2v12H5V7Z",key:"1ezoue"}],["path",{d:"M22 19H2",key:"nuriw5"}]],ls=Et("vote",WF);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VF=[["rect",{width:"8",height:"8",x:"3",y:"3",rx:"2",key:"by2w9f"}],["path",{d:"M7 11v4a2 2 0 0 0 2 2h4",key:"xkn7yn"}],["rect",{width:"8",height:"8",x:"13",y:"13",rx:"2",key:"1cgmvn"}]],qF=Et("workflow",VF);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HF=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],js=Et("x",HF),vi="/feature-voting-app/assets/New-Millennium-color-logo-C0dd35-E.svg",KF="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='UTF-8'?%3e%3csvg%20id='Layer_1'%20xmlns='http://www.w3.org/2000/svg'%20version='1.1'%20viewBox='0%200%2019%2019'%3e%3c!--%20Generator:%20Adobe%20Illustrator%2029.8.3,%20SVG%20Export%20Plug-In%20.%20SVG%20Version:%202.1.1%20Build%203)%20--%3e%3cdefs%3e%3cstyle%3e%20.st0%20{%20fill:%20%23f25022;%20}%20.st1%20{%20fill:%20%23ffb900;%20}%20.st2%20{%20fill:%20%237fba00;%20}%20.st3%20{%20fill:%20%2300a4ef;%20}%20%3c/style%3e%3c/defs%3e%3crect%20class='st0'%20width='9'%20height='9'/%3e%3crect%20class='st3'%20y='10'%20width='9'%20height='9'/%3e%3crect%20class='st2'%20x='10'%20width='9'%20height='9'/%3e%3crect%20class='st1'%20x='10'%20y='10'%20width='9'%20height='9'/%3e%3c/svg%3e";var Ld=e=>e.type==="checkbox",kl=e=>e instanceof Date,Ks=e=>e==null;const ZE=e=>typeof e=="object";var _n=e=>!Ks(e)&&!Array.isArray(e)&&ZE(e)&&!kl(e),eA=e=>_n(e)&&e.target?Ld(e.target)?e.target.checked:e.target.value:e,GF=e=>e.substring(0,e.search(/\.\d+(\.|$)/))||e,tA=(e,t)=>e.has(GF(t)),YF=e=>{const t=e.constructor&&e.constructor.prototype;return _n(t)&&t.hasOwnProperty("isPrototypeOf")},Bx=typeof window<"u"&&typeof window.HTMLElement<"u"&&typeof document<"u";function In(e){let t;const r=Array.isArray(e),n=typeof FileList<"u"?e instanceof FileList:!1;if(e instanceof Date)t=new Date(e);else if(!(Bx&&(e instanceof Blob||n))&&(r||_n(e)))if(t=r?[]:Object.create(Object.getPrototypeOf(e)),!r&&!YF(e))t=e;else for(const s in e)e.hasOwnProperty(s)&&(t[s]=In(e[s]));else return e;return t}var Wm=e=>/^\w*$/.test(e),an=e=>e===void 0,Wx=e=>Array.isArray(e)?e.filter(Boolean):[],Vx=e=>Wx(e.replace(/["|']|\]/g,"").split(/\.|\[/)),Ge=(e,t,r)=>{if(!t||!_n(e))return r;const n=(Wm(t)?[t]:Vx(t)).reduce((s,a)=>Ks(s)?s:s[a],e);return an(n)||n===e?an(e[t])?r:e[t]:n},ci=e=>typeof e=="boolean",Or=(e,t,r)=>{let n=-1;const s=Wm(t)?[t]:Vx(t),a=s.length,l=a-1;for(;++n<a;){const u=s[n];let d=r;if(n!==l){const m=e[u];d=_n(m)||Array.isArray(m)?m:isNaN(+s[n+1])?{}:[]}if(u==="__proto__"||u==="constructor"||u==="prototype")return;e[u]=d,e=e[u]}};const Uh={BLUR:"blur",FOCUS_OUT:"focusout",CHANGE:"change"},Xi={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},Wa={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"},rA=pt.createContext(null);rA.displayName="HookFormContext";const qx=()=>pt.useContext(rA);var nA=(e,t,r,n=!0)=>{const s={defaultValues:t._defaultValues};for(const a in e)Object.defineProperty(s,a,{get:()=>{const l=a;return t._proxyFormState[l]!==Xi.all&&(t._proxyFormState[l]=!n||Xi.all),r&&(r[l]=!0),e[l]}});return s};const Hx=typeof window<"u"?pt.useLayoutEffect:pt.useEffect;function JF(e){const t=qx(),{control:r=t.control,disabled:n,name:s,exact:a}=e||{},[l,u]=pt.useState(r._formState),d=pt.useRef({isDirty:!1,isLoading:!1,dirtyFields:!1,touchedFields:!1,validatingFields:!1,isValidating:!1,isValid:!1,errors:!1});return Hx(()=>r._subscribe({name:s,formState:d.current,exact:a,callback:m=>{!n&&u({...r._formState,...m})}}),[s,n,a]),pt.useEffect(()=>{d.current.isValid&&r._setValid(!0)},[r]),pt.useMemo(()=>nA(l,r,d.current,!1),[l,r])}var fi=e=>typeof e=="string",Nv=(e,t,r,n,s)=>fi(e)?(n&&t.watch.add(e),Ge(r,e,s)):Array.isArray(e)?e.map(a=>(n&&t.watch.add(a),Ge(r,a))):(n&&(t.watchAll=!0),r),kv=e=>Ks(e)||!ZE(e);function Qi(e,t,r=new WeakSet){if(kv(e)||kv(t))return e===t;if(kl(e)&&kl(t))return e.getTime()===t.getTime();const n=Object.keys(e),s=Object.keys(t);if(n.length!==s.length)return!1;if(r.has(e)||r.has(t))return!0;r.add(e),r.add(t);for(const a of n){const l=e[a];if(!s.includes(a))return!1;if(a!=="ref"){const u=t[a];if(kl(l)&&kl(u)||_n(l)&&_n(u)||Array.isArray(l)&&Array.isArray(u)?!Qi(l,u,r):l!==u)return!1}}return!0}function XF(e){const t=qx(),{control:r=t.control,name:n,defaultValue:s,disabled:a,exact:l,compute:u}=e||{},d=pt.useRef(s),m=pt.useRef(u),f=pt.useRef(void 0),p=pt.useRef(r),y=pt.useRef(n);m.current=u;const[x,j]=pt.useState(()=>{const A=r._getWatch(n,d.current);return m.current?m.current(A):A}),w=pt.useCallback(A=>{const T=Nv(n,r._names,A||r._formValues,!1,d.current);return m.current?m.current(T):T},[r._formValues,r._names,n]),S=pt.useCallback(A=>{if(!a){const T=Nv(n,r._names,A||r._formValues,!1,d.current);if(m.current){const P=m.current(T);Qi(P,f.current)||(j(P),f.current=P)}else j(T)}},[r._formValues,r._names,a,n]);Hx(()=>((p.current!==r||!Qi(y.current,n))&&(p.current=r,y.current=n,S()),r._subscribe({name:n,formState:{values:!0},exact:l,callback:A=>{S(A.values)}})),[r,l,n,S]),pt.useEffect(()=>r._removeUnmounted());const _=p.current!==r,E=y.current,C=pt.useMemo(()=>{if(a)return null;const A=!_&&!Qi(E,n);return _||A?w():null},[a,_,n,E,w]);return C!==null?C:x}function QF(e){const t=qx(),{name:r,disabled:n,control:s=t.control,shouldUnregister:a,defaultValue:l}=e,u=tA(s._names.array,r),d=pt.useMemo(()=>Ge(s._formValues,r,Ge(s._defaultValues,r,l)),[s,r,l]),m=XF({control:s,name:r,defaultValue:d,exact:!0}),f=JF({control:s,name:r,exact:!0}),p=pt.useRef(e),y=pt.useRef(void 0),x=pt.useRef(s.register(r,{...e.rules,value:m,...ci(e.disabled)?{disabled:e.disabled}:{}}));p.current=e;const j=pt.useMemo(()=>Object.defineProperties({},{invalid:{enumerable:!0,get:()=>!!Ge(f.errors,r)},isDirty:{enumerable:!0,get:()=>!!Ge(f.dirtyFields,r)},isTouched:{enumerable:!0,get:()=>!!Ge(f.touchedFields,r)},isValidating:{enumerable:!0,get:()=>!!Ge(f.validatingFields,r)},error:{enumerable:!0,get:()=>Ge(f.errors,r)}}),[f,r]),w=pt.useCallback(C=>x.current.onChange({target:{value:eA(C),name:r},type:Uh.CHANGE}),[r]),S=pt.useCallback(()=>x.current.onBlur({target:{value:Ge(s._formValues,r),name:r},type:Uh.BLUR}),[r,s._formValues]),_=pt.useCallback(C=>{const A=Ge(s._fields,r);A&&C&&(A._f.ref={focus:()=>C.focus&&C.focus(),select:()=>C.select&&C.select(),setCustomValidity:T=>C.setCustomValidity(T),reportValidity:()=>C.reportValidity()})},[s._fields,r]),E=pt.useMemo(()=>({name:r,value:m,...ci(n)||f.disabled?{disabled:f.disabled||n}:{},onChange:w,onBlur:S,ref:_}),[r,n,f.disabled,w,S,_,m]);return pt.useEffect(()=>{const C=s._options.shouldUnregister||a,A=y.current;A&&A!==r&&!u&&s.unregister(A),s.register(r,{...p.current.rules,...ci(p.current.disabled)?{disabled:p.current.disabled}:{}});const T=(P,z)=>{const J=Ge(s._fields,P);J&&J._f&&(J._f.mount=z)};if(T(r,!0),C){const P=In(Ge(s._options.defaultValues,r,p.current.defaultValue));Or(s._defaultValues,r,P),an(Ge(s._formValues,r))&&Or(s._formValues,r,P)}return!u&&s.register(r),y.current=r,()=>{(u?C&&!s._state.action:C)?s.unregister(r):T(r,!1)}},[r,s,u,a]),pt.useEffect(()=>{s._setDisabledField({disabled:n,name:r})},[n,r,s]),pt.useMemo(()=>({field:E,formState:f,fieldState:j}),[E,f,j])}const sd=e=>e.render(QF(e));var ZF=(e,t,r,n,s)=>t?{...r[e],types:{...r[e]&&r[e].types?r[e].types:{},[n]:s||!0}}:{},fd=e=>Array.isArray(e)?e:[e],hN=()=>{let e=[];return{get observers(){return e},next:s=>{for(const a of e)a.next&&a.next(s)},subscribe:s=>(e.push(s),{unsubscribe:()=>{e=e.filter(a=>a!==s)}}),unsubscribe:()=>{e=[]}}};function sA(e,t){const r={};for(const n in e)if(e.hasOwnProperty(n)){const s=e[n],a=t[n];if(s&&_n(s)&&a){const l=sA(s,a);_n(l)&&(r[n]=l)}else e[n]&&(r[n]=a)}return r}var Ps=e=>_n(e)&&!Object.keys(e).length,Kx=e=>e.type==="file",Zi=e=>typeof e=="function",Bh=e=>{if(!Bx)return!1;const t=e?e.ownerDocument:0;return e instanceof(t&&t.defaultView?t.defaultView.HTMLElement:HTMLElement)},iA=e=>e.type==="select-multiple",Gx=e=>e.type==="radio",eL=e=>Gx(e)||Ld(e),yy=e=>Bh(e)&&e.isConnected;function tL(e,t){const r=t.slice(0,-1).length;let n=0;for(;n<r;)e=an(e)?n++:e[t[n++]];return e}function rL(e){for(const t in e)if(e.hasOwnProperty(t)&&!an(e[t]))return!1;return!0}function jn(e,t){const r=Array.isArray(t)?t:Wm(t)?[t]:Vx(t),n=r.length===1?e:tL(e,r),s=r.length-1,a=r[s];return n&&delete n[a],s!==0&&(_n(n)&&Ps(n)||Array.isArray(n)&&rL(n))&&jn(e,r.slice(0,-1)),e}var nL=e=>{for(const t in e)if(Zi(e[t]))return!0;return!1};function aA(e){return Array.isArray(e)||_n(e)&&!nL(e)}function _v(e,t={}){for(const r in e)aA(e[r])?(t[r]=Array.isArray(e[r])?[]:{},_v(e[r],t[r])):an(e[r])||(t[r]=!0);return t}function Dc(e,t,r){r||(r=_v(t));for(const n in e)aA(e[n])?an(t)||kv(r[n])?r[n]=_v(e[n],Array.isArray(e[n])?[]:{}):Dc(e[n],Ks(t)?{}:t[n],r[n]):r[n]=!Qi(e[n],t[n]);return r}const mN={value:!1,isValid:!1},pN={value:!0,isValid:!0};var oA=e=>{if(Array.isArray(e)){if(e.length>1){const t=e.filter(r=>r&&r.checked&&!r.disabled).map(r=>r.value);return{value:t,isValid:!!t.length}}return e[0].checked&&!e[0].disabled?e[0].attributes&&!an(e[0].attributes.value)?an(e[0].value)||e[0].value===""?pN:{value:e[0].value,isValid:!0}:pN:mN}return mN},lA=(e,{valueAsNumber:t,valueAsDate:r,setValueAs:n})=>an(e)?e:t?e===""?NaN:e&&+e:r&&fi(e)?new Date(e):n?n(e):e;const gN={isValid:!1,value:null};var cA=e=>Array.isArray(e)?e.reduce((t,r)=>r&&r.checked&&!r.disabled?{isValid:!0,value:r.value}:t,gN):gN;function yN(e){const t=e.ref;return Kx(t)?t.files:Gx(t)?cA(e.refs).value:iA(t)?[...t.selectedOptions].map(({value:r})=>r):Ld(t)?oA(e.refs).value:lA(an(t.value)?e.ref.value:t.value,e)}var sL=(e,t,r,n)=>{const s={};for(const a of e){const l=Ge(t,a);l&&Or(s,a,l._f)}return{criteriaMode:r,names:[...e],fields:s,shouldUseNativeValidation:n}},Wh=e=>e instanceof RegExp,qu=e=>an(e)?e:Wh(e)?e.source:_n(e)?Wh(e.value)?e.value.source:e.value:e,vN=e=>({isOnSubmit:!e||e===Xi.onSubmit,isOnBlur:e===Xi.onBlur,isOnChange:e===Xi.onChange,isOnAll:e===Xi.all,isOnTouch:e===Xi.onTouched});const xN="AsyncFunction";var iL=e=>!!e&&!!e.validate&&!!(Zi(e.validate)&&e.validate.constructor.name===xN||_n(e.validate)&&Object.values(e.validate).find(t=>t.constructor.name===xN)),aL=e=>e.mount&&(e.required||e.min||e.max||e.maxLength||e.minLength||e.pattern||e.validate),bN=(e,t,r)=>!r&&(t.watchAll||t.watch.has(e)||[...t.watch].some(n=>e.startsWith(n)&&/^\.\w+/.test(e.slice(n.length))));const hd=(e,t,r,n)=>{for(const s of r||Object.keys(e)){const a=Ge(e,s);if(a){const{_f:l,...u}=a;if(l){if(l.refs&&l.refs[0]&&t(l.refs[0],s)&&!n)return!0;if(l.ref&&t(l.ref,l.name)&&!n)return!0;if(hd(u,t))break}else if(_n(u)&&hd(u,t))break}}};function wN(e,t,r){const n=Ge(e,r);if(n||Wm(r))return{error:n,name:r};const s=r.split(".");for(;s.length;){const a=s.join("."),l=Ge(t,a),u=Ge(e,a);if(l&&!Array.isArray(l)&&r!==a)return{name:r};if(u&&u.type)return{name:a,error:u};if(u&&u.root&&u.root.type)return{name:`${a}.root`,error:u.root};s.pop()}return{name:r}}var oL=(e,t,r,n)=>{r(e);const{name:s,...a}=e;return Ps(a)||Object.keys(a).length>=Object.keys(t).length||Object.keys(a).find(l=>t[l]===(!n||Xi.all))},lL=(e,t,r)=>!e||!t||e===t||fd(e).some(n=>n&&(r?n===t:n.startsWith(t)||t.startsWith(n))),cL=(e,t,r,n,s)=>s.isOnAll?!1:!r&&s.isOnTouch?!(t||e):(r?n.isOnBlur:s.isOnBlur)?!e:(r?n.isOnChange:s.isOnChange)?e:!0,uL=(e,t)=>!Wx(Ge(e,t)).length&&jn(e,t),dL=(e,t,r)=>{const n=fd(Ge(e,r));return Or(n,"root",t[r]),Or(e,r,n),e};function jN(e,t,r="validate"){if(fi(e)||Array.isArray(e)&&e.every(fi)||ci(e)&&!e)return{type:r,message:fi(e)?e:"",ref:t}}var Cc=e=>_n(e)&&!Wh(e)?e:{value:e,message:""},SN=async(e,t,r,n,s,a)=>{const{ref:l,refs:u,required:d,maxLength:m,minLength:f,min:p,max:y,pattern:x,validate:j,name:w,valueAsNumber:S,mount:_}=e._f,E=Ge(r,w);if(!_||t.has(w))return{};const C=u?u[0]:l,A=K=>{s&&C.reportValidity&&(C.setCustomValidity(ci(K)?"":K||""),C.reportValidity())},T={},P=Gx(l),z=Ld(l),J=P||z,H=(S||Kx(l))&&an(l.value)&&an(E)||Bh(l)&&l.value===""||E===""||Array.isArray(E)&&!E.length,fe=ZF.bind(null,w,n,T),X=(K,ae,U,ne=Wa.maxLength,G=Wa.minLength)=>{const ie=K?ae:U;T[w]={type:K?ne:G,message:ie,ref:l,...fe(K?ne:G,ie)}};if(a?!Array.isArray(E)||!E.length:d&&(!J&&(H||Ks(E))||ci(E)&&!E||z&&!oA(u).isValid||P&&!cA(u).isValid)){const{value:K,message:ae}=fi(d)?{value:!!d,message:d}:Cc(d);if(K&&(T[w]={type:Wa.required,message:ae,ref:C,...fe(Wa.required,ae)},!n))return A(ae),T}if(!H&&(!Ks(p)||!Ks(y))){let K,ae;const U=Cc(y),ne=Cc(p);if(!Ks(E)&&!isNaN(E)){const G=l.valueAsNumber||E&&+E;Ks(U.value)||(K=G>U.value),Ks(ne.value)||(ae=G<ne.value)}else{const G=l.valueAsDate||new Date(E),ie=se=>new Date(new Date().toDateString()+" "+se),te=l.type=="time",W=l.type=="week";fi(U.value)&&E&&(K=te?ie(E)>ie(U.value):W?E>U.value:G>new Date(U.value)),fi(ne.value)&&E&&(ae=te?ie(E)<ie(ne.value):W?E<ne.value:G<new Date(ne.value))}if((K||ae)&&(X(!!K,U.message,ne.message,Wa.max,Wa.min),!n))return A(T[w].message),T}if((m||f)&&!H&&(fi(E)||a&&Array.isArray(E))){const K=Cc(m),ae=Cc(f),U=!Ks(K.value)&&E.length>+K.value,ne=!Ks(ae.value)&&E.length<+ae.value;if((U||ne)&&(X(U,K.message,ae.message),!n))return A(T[w].message),T}if(x&&!H&&fi(E)){const{value:K,message:ae}=Cc(x);if(Wh(K)&&!E.match(K)&&(T[w]={type:Wa.pattern,message:ae,ref:l,...fe(Wa.pattern,ae)},!n))return A(ae),T}if(j){if(Zi(j)){const K=await j(E,r),ae=jN(K,C);if(ae&&(T[w]={...ae,...fe(Wa.validate,ae.message)},!n))return A(ae.message),T}else if(_n(j)){let K={};for(const ae in j){if(!Ps(K)&&!n)break;const U=jN(await j[ae](E,r),C,ae);U&&(K={...U,...fe(ae,U.message)},A(U.message),n&&(T[w]=K))}if(!Ps(K)&&(T[w]={ref:C,...K},!n))return T}}return A(!0),T};const fL={mode:Xi.onSubmit,reValidateMode:Xi.onChange,shouldFocusError:!0};function hL(e={}){let t={...fL,...e},r={submitCount:0,isDirty:!1,isReady:!1,isLoading:Zi(t.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},validatingFields:{},errors:t.errors||{},disabled:t.disabled||!1},n={},s=_n(t.defaultValues)||_n(t.values)?In(t.defaultValues||t.values)||{}:{},a=t.shouldUnregister?{}:In(s),l={action:!1,mount:!1,watch:!1},u={mount:new Set,disabled:new Set,unMount:new Set,array:new Set,watch:new Set},d,m=0;const f={isDirty:!1,dirtyFields:!1,validatingFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1};let p={...f};const y={array:hN(),state:hN()},x=t.criteriaMode===Xi.all,j=R=>re=>{clearTimeout(m),m=setTimeout(R,re)},w=async R=>{if(!t.disabled&&(f.isValid||p.isValid||R)){const re=t.resolver?Ps((await z()).errors):await H(n,!0);re!==r.isValid&&y.state.next({isValid:re})}},S=(R,re)=>{!t.disabled&&(f.isValidating||f.validatingFields||p.isValidating||p.validatingFields)&&((R||Array.from(u.mount)).forEach(de=>{de&&(re?Or(r.validatingFields,de,re):jn(r.validatingFields,de))}),y.state.next({validatingFields:r.validatingFields,isValidating:!Ps(r.validatingFields)}))},_=(R,re=[],de,Fe,we=!0,Ae=!0)=>{if(Fe&&de&&!t.disabled){if(l.action=!0,Ae&&Array.isArray(Ge(n,R))){const Ke=de(Ge(n,R),Fe.argA,Fe.argB);we&&Or(n,R,Ke)}if(Ae&&Array.isArray(Ge(r.errors,R))){const Ke=de(Ge(r.errors,R),Fe.argA,Fe.argB);we&&Or(r.errors,R,Ke),uL(r.errors,R)}if((f.touchedFields||p.touchedFields)&&Ae&&Array.isArray(Ge(r.touchedFields,R))){const Ke=de(Ge(r.touchedFields,R),Fe.argA,Fe.argB);we&&Or(r.touchedFields,R,Ke)}(f.dirtyFields||p.dirtyFields)&&(r.dirtyFields=Dc(s,a)),y.state.next({name:R,isDirty:X(R,re),dirtyFields:r.dirtyFields,errors:r.errors,isValid:r.isValid})}else Or(a,R,re)},E=(R,re)=>{Or(r.errors,R,re),y.state.next({errors:r.errors})},C=R=>{r.errors=R,y.state.next({errors:r.errors,isValid:!1})},A=(R,re,de,Fe)=>{const we=Ge(n,R);if(we){const Ae=Ge(a,R,an(de)?Ge(s,R):de);an(Ae)||Fe&&Fe.defaultChecked||re?Or(a,R,re?Ae:yN(we._f)):U(R,Ae),l.mount&&w()}},T=(R,re,de,Fe,we)=>{let Ae=!1,Ke=!1;const It={name:R};if(!t.disabled){if(!de||Fe){(f.isDirty||p.isDirty)&&(Ke=r.isDirty,r.isDirty=It.isDirty=X(),Ae=Ke!==It.isDirty);const Rt=Qi(Ge(s,R),re);Ke=!!Ge(r.dirtyFields,R),Rt?jn(r.dirtyFields,R):Or(r.dirtyFields,R,!0),It.dirtyFields=r.dirtyFields,Ae=Ae||(f.dirtyFields||p.dirtyFields)&&Ke!==!Rt}if(de){const Rt=Ge(r.touchedFields,R);Rt||(Or(r.touchedFields,R,de),It.touchedFields=r.touchedFields,Ae=Ae||(f.touchedFields||p.touchedFields)&&Rt!==de)}Ae&&we&&y.state.next(It)}return Ae?It:{}},P=(R,re,de,Fe)=>{const we=Ge(r.errors,R),Ae=(f.isValid||p.isValid)&&ci(re)&&r.isValid!==re;if(t.delayError&&de?(d=j(()=>E(R,de)),d(t.delayError)):(clearTimeout(m),d=null,de?Or(r.errors,R,de):jn(r.errors,R)),(de?!Qi(we,de):we)||!Ps(Fe)||Ae){const Ke={...Fe,...Ae&&ci(re)?{isValid:re}:{},errors:r.errors,name:R};r={...r,...Ke},y.state.next(Ke)}},z=async R=>{S(R,!0);const re=await t.resolver(a,t.context,sL(R||u.mount,n,t.criteriaMode,t.shouldUseNativeValidation));return S(R),re},J=async R=>{const{errors:re}=await z(R);if(R)for(const de of R){const Fe=Ge(re,de);Fe?Or(r.errors,de,Fe):jn(r.errors,de)}else r.errors=re;return re},H=async(R,re,de={valid:!0})=>{for(const Fe in R){const we=R[Fe];if(we){const{_f:Ae,...Ke}=we;if(Ae){const It=u.array.has(Ae.name),Rt=we._f&&iL(we._f);Rt&&f.validatingFields&&S([Ae.name],!0);const Pt=await SN(we,u.disabled,a,x,t.shouldUseNativeValidation&&!re,It);if(Rt&&f.validatingFields&&S([Ae.name]),Pt[Ae.name]&&(de.valid=!1,re))break;!re&&(Ge(Pt,Ae.name)?It?dL(r.errors,Pt,Ae.name):Or(r.errors,Ae.name,Pt[Ae.name]):jn(r.errors,Ae.name))}!Ps(Ke)&&await H(Ke,re,de)}}return de.valid},fe=()=>{for(const R of u.unMount){const re=Ge(n,R);re&&(re._f.refs?re._f.refs.every(de=>!yy(de)):!yy(re._f.ref))&&Ne(R)}u.unMount=new Set},X=(R,re)=>!t.disabled&&(R&&re&&Or(a,R,re),!Qi(se(),s)),K=(R,re,de)=>Nv(R,u,{...l.mount?a:an(re)?s:fi(R)?{[R]:re}:re},de,re),ae=R=>Wx(Ge(l.mount?a:s,R,t.shouldUnregister?Ge(s,R,[]):[])),U=(R,re,de={})=>{const Fe=Ge(n,R);let we=re;if(Fe){const Ae=Fe._f;Ae&&(!Ae.disabled&&Or(a,R,lA(re,Ae)),we=Bh(Ae.ref)&&Ks(re)?"":re,iA(Ae.ref)?[...Ae.ref.options].forEach(Ke=>Ke.selected=we.includes(Ke.value)):Ae.refs?Ld(Ae.ref)?Ae.refs.forEach(Ke=>{(!Ke.defaultChecked||!Ke.disabled)&&(Array.isArray(we)?Ke.checked=!!we.find(It=>It===Ke.value):Ke.checked=we===Ke.value||!!we)}):Ae.refs.forEach(Ke=>Ke.checked=Ke.value===we):Kx(Ae.ref)?Ae.ref.value="":(Ae.ref.value=we,Ae.ref.type||y.state.next({name:R,values:In(a)})))}(de.shouldDirty||de.shouldTouch)&&T(R,we,de.shouldTouch,de.shouldDirty,!0),de.shouldValidate&&W(R)},ne=(R,re,de)=>{for(const Fe in re){if(!re.hasOwnProperty(Fe))return;const we=re[Fe],Ae=R+"."+Fe,Ke=Ge(n,Ae);(u.array.has(R)||_n(we)||Ke&&!Ke._f)&&!kl(we)?ne(Ae,we,de):U(Ae,we,de)}},G=(R,re,de={})=>{const Fe=Ge(n,R),we=u.array.has(R),Ae=In(re);Or(a,R,Ae),we?(y.array.next({name:R,values:In(a)}),(f.isDirty||f.dirtyFields||p.isDirty||p.dirtyFields)&&de.shouldDirty&&y.state.next({name:R,dirtyFields:Dc(s,a),isDirty:X(R,Ae)})):Fe&&!Fe._f&&!Ks(Ae)?ne(R,Ae,de):U(R,Ae,de),bN(R,u)&&y.state.next({...r,name:R}),y.state.next({name:l.mount?R:void 0,values:In(a)})},ie=async R=>{l.mount=!0;const re=R.target;let de=re.name,Fe=!0;const we=Ge(n,de),Ae=Rt=>{Fe=Number.isNaN(Rt)||kl(Rt)&&isNaN(Rt.getTime())||Qi(Rt,Ge(a,de,Rt))},Ke=vN(t.mode),It=vN(t.reValidateMode);if(we){let Rt,Pt;const rr=re.type?yN(we._f):eA(R),Ht=R.type===Uh.BLUR||R.type===Uh.FOCUS_OUT,He=!aL(we._f)&&!t.resolver&&!Ge(r.errors,de)&&!we._f.deps||cL(Ht,Ge(r.touchedFields,de),r.isSubmitted,It,Ke),ft=bN(de,u,Ht);Or(a,de,rr),Ht?(!re||!re.readOnly)&&(we._f.onBlur&&we._f.onBlur(R),d&&d(0)):we._f.onChange&&we._f.onChange(R);const gt=T(de,rr,Ht),Lt=!Ps(gt)||ft;if(!Ht&&y.state.next({name:de,type:R.type,values:In(a)}),He)return(f.isValid||p.isValid)&&(t.mode==="onBlur"?Ht&&w():Ht||w()),Lt&&y.state.next({name:de,...ft?{}:gt});if(!Ht&&ft&&y.state.next({...r}),t.resolver){const{errors:_t}=await z([de]);if(Ae(rr),Fe){const nr=wN(r.errors,n,de),Ze=wN(_t,n,nr.name||de);Rt=Ze.error,de=Ze.name,Pt=Ps(_t)}}else S([de],!0),Rt=(await SN(we,u.disabled,a,x,t.shouldUseNativeValidation))[de],S([de]),Ae(rr),Fe&&(Rt?Pt=!1:(f.isValid||p.isValid)&&(Pt=await H(n,!0)));Fe&&(we._f.deps&&(!Array.isArray(we._f.deps)||we._f.deps.length>0)&&W(we._f.deps),P(de,Pt,Rt,gt))}},te=(R,re)=>{if(Ge(r.errors,re)&&R.focus)return R.focus(),1},W=async(R,re={})=>{let de,Fe;const we=fd(R);if(t.resolver){const Ae=await J(an(R)?R:we);de=Ps(Ae),Fe=R?!we.some(Ke=>Ge(Ae,Ke)):de}else R?(Fe=(await Promise.all(we.map(async Ae=>{const Ke=Ge(n,Ae);return await H(Ke&&Ke._f?{[Ae]:Ke}:Ke)}))).every(Boolean),!(!Fe&&!r.isValid)&&w()):Fe=de=await H(n);return y.state.next({...!fi(R)||(f.isValid||p.isValid)&&de!==r.isValid?{}:{name:R},...t.resolver||!R?{isValid:de}:{},errors:r.errors}),re.shouldFocus&&!Fe&&hd(n,te,R?we:u.mount),Fe},se=(R,re)=>{let de={...l.mount?a:s};return re&&(de=sA(re.dirtyFields?r.dirtyFields:r.touchedFields,de)),an(R)?de:fi(R)?Ge(de,R):R.map(Fe=>Ge(de,Fe))},I=(R,re)=>({invalid:!!Ge((re||r).errors,R),isDirty:!!Ge((re||r).dirtyFields,R),error:Ge((re||r).errors,R),isValidating:!!Ge(r.validatingFields,R),isTouched:!!Ge((re||r).touchedFields,R)}),B=R=>{R&&fd(R).forEach(re=>jn(r.errors,re)),y.state.next({errors:R?r.errors:{}})},Me=(R,re,de)=>{const Fe=(Ge(n,R,{_f:{}})._f||{}).ref,we=Ge(r.errors,R)||{},{ref:Ae,message:Ke,type:It,...Rt}=we;Or(r.errors,R,{...Rt,...re,ref:Fe}),y.state.next({name:R,errors:r.errors,isValid:!1}),de&&de.shouldFocus&&Fe&&Fe.focus&&Fe.focus()},Se=(R,re)=>Zi(R)?y.state.subscribe({next:de=>"values"in de&&R(K(void 0,re),de)}):K(R,re,!0),Ie=R=>y.state.subscribe({next:re=>{lL(R.name,re.name,R.exact)&&oL(re,R.formState||f,kt,R.reRenderRoot)&&R.callback({values:{...a},...r,...re,defaultValues:s})}}).unsubscribe,je=R=>(l.mount=!0,p={...p,...R.formState},Ie({...R,formState:p})),Ne=(R,re={})=>{for(const de of R?fd(R):u.mount)u.mount.delete(de),u.array.delete(de),re.keepValue||(jn(n,de),jn(a,de)),!re.keepError&&jn(r.errors,de),!re.keepDirty&&jn(r.dirtyFields,de),!re.keepTouched&&jn(r.touchedFields,de),!re.keepIsValidating&&jn(r.validatingFields,de),!t.shouldUnregister&&!re.keepDefaultValue&&jn(s,de);y.state.next({values:In(a)}),y.state.next({...r,...re.keepDirty?{isDirty:X()}:{}}),!re.keepIsValid&&w()},Z=({disabled:R,name:re})=>{(ci(R)&&l.mount||R||u.disabled.has(re))&&(R?u.disabled.add(re):u.disabled.delete(re))},$=(R,re={})=>{let de=Ge(n,R);const Fe=ci(re.disabled)||ci(t.disabled);return Or(n,R,{...de||{},_f:{...de&&de._f?de._f:{ref:{name:R}},name:R,mount:!0,...re}}),u.mount.add(R),de?Z({disabled:ci(re.disabled)?re.disabled:t.disabled,name:R}):A(R,!0,re.value),{...Fe?{disabled:re.disabled||t.disabled}:{},...t.progressive?{required:!!re.required,min:qu(re.min),max:qu(re.max),minLength:qu(re.minLength),maxLength:qu(re.maxLength),pattern:qu(re.pattern)}:{},name:R,onChange:ie,onBlur:ie,ref:we=>{if(we){$(R,re),de=Ge(n,R);const Ae=an(we.value)&&we.querySelectorAll&&we.querySelectorAll("input,select,textarea")[0]||we,Ke=eL(Ae),It=de._f.refs||[];if(Ke?It.find(Rt=>Rt===Ae):Ae===de._f.ref)return;Or(n,R,{_f:{...de._f,...Ke?{refs:[...It.filter(yy),Ae,...Array.isArray(Ge(s,R))?[{}]:[]],ref:{type:Ae.type,name:R}}:{ref:Ae}}}),A(R,!1,void 0,Ae)}else de=Ge(n,R,{}),de._f&&(de._f.mount=!1),(t.shouldUnregister||re.shouldUnregister)&&!(tA(u.array,R)&&l.action)&&u.unMount.add(R)}}},xe=()=>t.shouldFocusError&&hd(n,te,u.mount),le=R=>{ci(R)&&(y.state.next({disabled:R}),hd(n,(re,de)=>{const Fe=Ge(n,de);Fe&&(re.disabled=Fe._f.disabled||R,Array.isArray(Fe._f.refs)&&Fe._f.refs.forEach(we=>{we.disabled=Fe._f.disabled||R}))},0,!1))},M=(R,re)=>async de=>{let Fe;de&&(de.preventDefault&&de.preventDefault(),de.persist&&de.persist());let we=In(a);if(y.state.next({isSubmitting:!0}),t.resolver){const{errors:Ae,values:Ke}=await z();r.errors=Ae,we=In(Ke)}else await H(n);if(u.disabled.size)for(const Ae of u.disabled)jn(we,Ae);if(jn(r.errors,"root"),Ps(r.errors)){y.state.next({errors:{}});try{await R(we,de)}catch(Ae){Fe=Ae}}else re&&await re({...r.errors},de),xe(),setTimeout(xe);if(y.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:Ps(r.errors)&&!Fe,submitCount:r.submitCount+1,errors:r.errors}),Fe)throw Fe},De=(R,re={})=>{Ge(n,R)&&(an(re.defaultValue)?G(R,In(Ge(s,R))):(G(R,re.defaultValue),Or(s,R,In(re.defaultValue))),re.keepTouched||jn(r.touchedFields,R),re.keepDirty||(jn(r.dirtyFields,R),r.isDirty=re.defaultValue?X(R,In(Ge(s,R))):X()),re.keepError||(jn(r.errors,R),f.isValid&&w()),y.state.next({...r}))},Pe=(R,re={})=>{const de=R?In(R):s,Fe=In(de),we=Ps(R),Ae=we?s:Fe;if(re.keepDefaultValues||(s=de),!re.keepValues){if(re.keepDirtyValues){const Ke=new Set([...u.mount,...Object.keys(Dc(s,a))]);for(const It of Array.from(Ke))Ge(r.dirtyFields,It)?Or(Ae,It,Ge(a,It)):G(It,Ge(Ae,It))}else{if(Bx&&an(R))for(const Ke of u.mount){const It=Ge(n,Ke);if(It&&It._f){const Rt=Array.isArray(It._f.refs)?It._f.refs[0]:It._f.ref;if(Bh(Rt)){const Pt=Rt.closest("form");if(Pt){Pt.reset();break}}}}if(re.keepFieldsRef)for(const Ke of u.mount)G(Ke,Ge(Ae,Ke));else n={}}a=t.shouldUnregister?re.keepDefaultValues?In(s):{}:In(Ae),y.array.next({values:{...Ae}}),y.state.next({values:{...Ae}})}u={mount:re.keepDirtyValues?u.mount:new Set,unMount:new Set,array:new Set,disabled:new Set,watch:new Set,watchAll:!1,focus:""},l.mount=!f.isValid||!!re.keepIsValid||!!re.keepDirtyValues||!t.shouldUnregister&&!Ps(Ae),l.watch=!!t.shouldUnregister,y.state.next({submitCount:re.keepSubmitCount?r.submitCount:0,isDirty:we?!1:re.keepDirty?r.isDirty:!!(re.keepDefaultValues&&!Qi(R,s)),isSubmitted:re.keepIsSubmitted?r.isSubmitted:!1,dirtyFields:we?{}:re.keepDirtyValues?re.keepDefaultValues&&a?Dc(s,a):r.dirtyFields:re.keepDefaultValues&&R?Dc(s,R):re.keepDirty?r.dirtyFields:{},touchedFields:re.keepTouched?r.touchedFields:{},errors:re.keepErrors?r.errors:{},isSubmitSuccessful:re.keepIsSubmitSuccessful?r.isSubmitSuccessful:!1,isSubmitting:!1,defaultValues:s})},et=(R,re)=>Pe(Zi(R)?R(a):R,re),rt=(R,re={})=>{const de=Ge(n,R),Fe=de&&de._f;if(Fe){const we=Fe.refs?Fe.refs[0]:Fe.ref;we.focus&&(we.focus(),re.shouldSelect&&Zi(we.select)&&we.select())}},kt=R=>{r={...r,...R}},Yt={control:{register:$,unregister:Ne,getFieldState:I,handleSubmit:M,setError:Me,_subscribe:Ie,_runSchema:z,_focusError:xe,_getWatch:K,_getDirty:X,_setValid:w,_setFieldArray:_,_setDisabledField:Z,_setErrors:C,_getFieldArray:ae,_reset:Pe,_resetDefaultValues:()=>Zi(t.defaultValues)&&t.defaultValues().then(R=>{et(R,t.resetOptions),y.state.next({isLoading:!1})}),_removeUnmounted:fe,_disableForm:le,_subjects:y,_proxyFormState:f,get _fields(){return n},get _formValues(){return a},get _state(){return l},set _state(R){l=R},get _defaultValues(){return s},get _names(){return u},set _names(R){u=R},get _formState(){return r},get _options(){return t},set _options(R){t={...t,...R}}},subscribe:je,trigger:W,register:$,handleSubmit:M,watch:Se,setValue:G,getValues:se,reset:et,resetField:De,clearErrors:B,unregister:Ne,setError:Me,setFocus:rt,getFieldState:I};return{...Yt,formControl:Yt}}function wd(e={}){const t=pt.useRef(void 0),r=pt.useRef(void 0),[n,s]=pt.useState({isDirty:!1,isValidating:!1,isLoading:Zi(e.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},validatingFields:{},errors:e.errors||{},disabled:e.disabled||!1,isReady:!1,defaultValues:Zi(e.defaultValues)?void 0:e.defaultValues});if(!t.current)if(e.formControl)t.current={...e.formControl,formState:n},e.defaultValues&&!Zi(e.defaultValues)&&e.formControl.reset(e.defaultValues,e.resetOptions);else{const{formControl:l,...u}=hL(e);t.current={...u,formState:n}}const a=t.current.control;return a._options=e,Hx(()=>{const l=a._subscribe({formState:a._proxyFormState,callback:()=>s({...a._formState}),reRenderRoot:!0});return s(u=>({...u,isReady:!0})),a._formState.isReady=!0,l},[a]),pt.useEffect(()=>a._disableForm(e.disabled),[a,e.disabled]),pt.useEffect(()=>{e.mode&&(a._options.mode=e.mode),e.reValidateMode&&(a._options.reValidateMode=e.reValidateMode)},[a,e.mode,e.reValidateMode]),pt.useEffect(()=>{e.errors&&(a._setErrors(e.errors),a._focusError())},[a,e.errors]),pt.useEffect(()=>{e.shouldUnregister&&a._subjects.state.next({values:a._getWatch()})},[a,e.shouldUnregister]),pt.useEffect(()=>{if(a._proxyFormState.isDirty){const l=a._getDirty();l!==n.isDirty&&a._subjects.state.next({isDirty:l})}},[a,n.isDirty]),pt.useEffect(()=>{e.values&&!Qi(e.values,r.current)?(a._reset(e.values,{keepFieldsRef:!0,...a._options.resetOptions}),r.current=e.values,s(l=>({...l}))):a._resetDefaultValues()},[a,e.values]),pt.useEffect(()=>{a._state.mount||(a._setValid(),a._state.mount=!0),a._state.watch&&(a._state.watch=!1,a._subjects.state.next({...a._formState})),a._removeUnmounted()}),t.current.formState=nA(n,a),t.current}function uA(e){var t,r,n="";if(typeof e=="string"||typeof e=="number")n+=e;else if(typeof e=="object")if(Array.isArray(e)){var s=e.length;for(t=0;t<s;t++)e[t]&&(r=uA(e[t]))&&(n&&(n+=" "),n+=r)}else for(r in e)e[r]&&(n&&(n+=" "),n+=r);return n}function Lr(){for(var e,t,r=0,n="",s=arguments.length;r<s;r++)(e=arguments[r])&&(t=uA(e))&&(n&&(n+=" "),n+=t);return n}var mL=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"];function Yx(e){if(typeof e!="string")return!1;var t=mL;return t.includes(e)}var pL=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"];function dA(e){if(typeof e!="string")return!1;var t=pL;return t.includes(e)}function fA(e){return typeof e=="string"&&e.startsWith("data-")}function Ko(e){var t=Object.entries(e).filter(r=>{var[n]=r;return dA(n)||fA(n)});return Object.fromEntries(t)}function Jx(e){if(e==null)return null;if(v.isValidElement(e)&&typeof e.props=="object"&&e.props!==null){var t=e.props;return Ko(t)}return typeof e=="object"&&!Array.isArray(e)?Ko(e):null}function Ii(e){var t=Object.entries(e).filter(r=>{var[n]=r;return dA(n)||fA(n)||Yx(n)});return Object.fromEntries(t)}var gL=["children","width","height","viewBox","className","style","title","desc"];function Cv(){return Cv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Cv.apply(null,arguments)}function yL(e,t){if(e==null)return{};var r,n,s=vL(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function vL(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var hA=v.forwardRef((e,t)=>{var{children:r,width:n,height:s,viewBox:a,className:l,style:u,title:d,desc:m}=e,f=yL(e,gL),p=a||{width:n,height:s,x:0,y:0},y=Lr("recharts-surface",l);return v.createElement("svg",Cv({},Ii(f),{className:y,width:n,height:s,style:u,viewBox:"".concat(p.x," ").concat(p.y," ").concat(p.width," ").concat(p.height),ref:t}),v.createElement("title",null,d),v.createElement("desc",null,m),r)}),xL=["children","className"];function Ev(){return Ev=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Ev.apply(null,arguments)}function bL(e,t){if(e==null)return{};var r,n,s=wL(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function wL(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var ro=v.forwardRef((e,t)=>{var{children:r,className:n}=e,s=bL(e,xL),a=Lr("recharts-layer",n);return v.createElement("g",Ev({className:a},Ii(s),{ref:t}),r)}),jL=v.createContext(null);function Tr(e){return function(){return e}}const mA=Math.cos,Vh=Math.sin,oa=Math.sqrt,qh=Math.PI,Vm=2*qh,Av=Math.PI,Pv=2*Av,yl=1e-6,SL=Pv-yl;function pA(e){this._+=e[0];for(let t=1,r=e.length;t<r;++t)this._+=arguments[t]+e[t]}function NL(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return pA;const r=10**t;return function(n){this._+=n[0];for(let s=1,a=n.length;s<a;++s)this._+=Math.round(arguments[s]*r)/r+n[s]}}class kL{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?pA:NL(t)}moveTo(t,r){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+r}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,r){this._append`L${this._x1=+t},${this._y1=+r}`}quadraticCurveTo(t,r,n,s){this._append`Q${+t},${+r},${this._x1=+n},${this._y1=+s}`}bezierCurveTo(t,r,n,s,a,l){this._append`C${+t},${+r},${+n},${+s},${this._x1=+a},${this._y1=+l}`}arcTo(t,r,n,s,a){if(t=+t,r=+r,n=+n,s=+s,a=+a,a<0)throw new Error(`negative radius: ${a}`);let l=this._x1,u=this._y1,d=n-t,m=s-r,f=l-t,p=u-r,y=f*f+p*p;if(this._x1===null)this._append`M${this._x1=t},${this._y1=r}`;else if(y>yl)if(!(Math.abs(p*d-m*f)>yl)||!a)this._append`L${this._x1=t},${this._y1=r}`;else{let x=n-l,j=s-u,w=d*d+m*m,S=x*x+j*j,_=Math.sqrt(w),E=Math.sqrt(y),C=a*Math.tan((Av-Math.acos((w+y-S)/(2*_*E)))/2),A=C/E,T=C/_;Math.abs(A-1)>yl&&this._append`L${t+A*f},${r+A*p}`,this._append`A${a},${a},0,0,${+(p*x>f*j)},${this._x1=t+T*d},${this._y1=r+T*m}`}}arc(t,r,n,s,a,l){if(t=+t,r=+r,n=+n,l=!!l,n<0)throw new Error(`negative radius: ${n}`);let u=n*Math.cos(s),d=n*Math.sin(s),m=t+u,f=r+d,p=1^l,y=l?s-a:a-s;this._x1===null?this._append`M${m},${f}`:(Math.abs(this._x1-m)>yl||Math.abs(this._y1-f)>yl)&&this._append`L${m},${f}`,n&&(y<0&&(y=y%Pv+Pv),y>SL?this._append`A${n},${n},0,1,${p},${t-u},${r-d}A${n},${n},0,1,${p},${this._x1=m},${this._y1=f}`:y>yl&&this._append`A${n},${n},0,${+(y>=Av)},${p},${this._x1=t+n*Math.cos(a)},${this._y1=r+n*Math.sin(a)}`)}rect(t,r,n,s){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+r}h${n=+n}v${+s}h${-n}Z`}toString(){return this._}}function Xx(e){let t=3;return e.digits=function(r){if(!arguments.length)return t;if(r==null)t=null;else{const n=Math.floor(r);if(!(n>=0))throw new RangeError(`invalid digits: ${r}`);t=n}return e},()=>new kL(t)}function Qx(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function gA(e){this._context=e}gA.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function qm(e){return new gA(e)}function yA(e){return e[0]}function vA(e){return e[1]}function xA(e,t){var r=Tr(!0),n=null,s=qm,a=null,l=Xx(u);e=typeof e=="function"?e:e===void 0?yA:Tr(e),t=typeof t=="function"?t:t===void 0?vA:Tr(t);function u(d){var m,f=(d=Qx(d)).length,p,y=!1,x;for(n==null&&(a=s(x=l())),m=0;m<=f;++m)!(m<f&&r(p=d[m],m,d))===y&&((y=!y)?a.lineStart():a.lineEnd()),y&&a.point(+e(p,m,d),+t(p,m,d));if(x)return a=null,x+""||null}return u.x=function(d){return arguments.length?(e=typeof d=="function"?d:Tr(+d),u):e},u.y=function(d){return arguments.length?(t=typeof d=="function"?d:Tr(+d),u):t},u.defined=function(d){return arguments.length?(r=typeof d=="function"?d:Tr(!!d),u):r},u.curve=function(d){return arguments.length?(s=d,n!=null&&(a=s(n)),u):s},u.context=function(d){return arguments.length?(d==null?n=a=null:a=s(n=d),u):n},u}function nh(e,t,r){var n=null,s=Tr(!0),a=null,l=qm,u=null,d=Xx(m);e=typeof e=="function"?e:e===void 0?yA:Tr(+e),t=typeof t=="function"?t:Tr(t===void 0?0:+t),r=typeof r=="function"?r:r===void 0?vA:Tr(+r);function m(p){var y,x,j,w=(p=Qx(p)).length,S,_=!1,E,C=new Array(w),A=new Array(w);for(a==null&&(u=l(E=d())),y=0;y<=w;++y){if(!(y<w&&s(S=p[y],y,p))===_)if(_=!_)x=y,u.areaStart(),u.lineStart();else{for(u.lineEnd(),u.lineStart(),j=y-1;j>=x;--j)u.point(C[j],A[j]);u.lineEnd(),u.areaEnd()}_&&(C[y]=+e(S,y,p),A[y]=+t(S,y,p),u.point(n?+n(S,y,p):C[y],r?+r(S,y,p):A[y]))}if(E)return u=null,E+""||null}function f(){return xA().defined(s).curve(l).context(a)}return m.x=function(p){return arguments.length?(e=typeof p=="function"?p:Tr(+p),n=null,m):e},m.x0=function(p){return arguments.length?(e=typeof p=="function"?p:Tr(+p),m):e},m.x1=function(p){return arguments.length?(n=p==null?null:typeof p=="function"?p:Tr(+p),m):n},m.y=function(p){return arguments.length?(t=typeof p=="function"?p:Tr(+p),r=null,m):t},m.y0=function(p){return arguments.length?(t=typeof p=="function"?p:Tr(+p),m):t},m.y1=function(p){return arguments.length?(r=p==null?null:typeof p=="function"?p:Tr(+p),m):r},m.lineX0=m.lineY0=function(){return f().x(e).y(t)},m.lineY1=function(){return f().x(e).y(r)},m.lineX1=function(){return f().x(n).y(t)},m.defined=function(p){return arguments.length?(s=typeof p=="function"?p:Tr(!!p),m):s},m.curve=function(p){return arguments.length?(l=p,a!=null&&(u=l(a)),m):l},m.context=function(p){return arguments.length?(p==null?a=u=null:u=l(a=p),m):a},m}class bA{constructor(t,r){this._context=t,this._x=r}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(t,r){switch(t=+t,r=+r,this._point){case 0:{this._point=1,this._line?this._context.lineTo(t,r):this._context.moveTo(t,r);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+t)/2,this._y0,this._x0,r,t,r):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+r)/2,t,this._y0,t,r);break}}this._x0=t,this._y0=r}}function _L(e){return new bA(e,!0)}function CL(e){return new bA(e,!1)}const Zx={draw(e,t){const r=oa(t/qh);e.moveTo(r,0),e.arc(0,0,r,0,Vm)}},EL={draw(e,t){const r=oa(t/5)/2;e.moveTo(-3*r,-r),e.lineTo(-r,-r),e.lineTo(-r,-3*r),e.lineTo(r,-3*r),e.lineTo(r,-r),e.lineTo(3*r,-r),e.lineTo(3*r,r),e.lineTo(r,r),e.lineTo(r,3*r),e.lineTo(-r,3*r),e.lineTo(-r,r),e.lineTo(-3*r,r),e.closePath()}},wA=oa(1/3),AL=wA*2,PL={draw(e,t){const r=oa(t/AL),n=r*wA;e.moveTo(0,-r),e.lineTo(n,0),e.lineTo(0,r),e.lineTo(-n,0),e.closePath()}},OL={draw(e,t){const r=oa(t),n=-r/2;e.rect(n,n,r,r)}},TL=.8908130915292852,jA=Vh(qh/10)/Vh(7*qh/10),IL=Vh(Vm/10)*jA,DL=-mA(Vm/10)*jA,$L={draw(e,t){const r=oa(t*TL),n=IL*r,s=DL*r;e.moveTo(0,-r),e.lineTo(n,s);for(let a=1;a<5;++a){const l=Vm*a/5,u=mA(l),d=Vh(l);e.lineTo(d*r,-u*r),e.lineTo(u*n-d*s,d*n+u*s)}e.closePath()}},vy=oa(3),RL={draw(e,t){const r=-oa(t/(vy*3));e.moveTo(0,r*2),e.lineTo(-vy*r,-r),e.lineTo(vy*r,-r),e.closePath()}},Ei=-.5,Ai=oa(3)/2,Ov=1/oa(12),ML=(Ov/2+1)*3,FL={draw(e,t){const r=oa(t/ML),n=r/2,s=r*Ov,a=n,l=r*Ov+r,u=-a,d=l;e.moveTo(n,s),e.lineTo(a,l),e.lineTo(u,d),e.lineTo(Ei*n-Ai*s,Ai*n+Ei*s),e.lineTo(Ei*a-Ai*l,Ai*a+Ei*l),e.lineTo(Ei*u-Ai*d,Ai*u+Ei*d),e.lineTo(Ei*n+Ai*s,Ei*s-Ai*n),e.lineTo(Ei*a+Ai*l,Ei*l-Ai*a),e.lineTo(Ei*u+Ai*d,Ei*d-Ai*u),e.closePath()}};function LL(e,t){let r=null,n=Xx(s);e=typeof e=="function"?e:Tr(e||Zx),t=typeof t=="function"?t:Tr(t===void 0?64:+t);function s(){let a;if(r||(r=a=n()),e.apply(this,arguments).draw(r,+t.apply(this,arguments)),a)return r=null,a+""||null}return s.type=function(a){return arguments.length?(e=typeof a=="function"?a:Tr(a),s):e},s.size=function(a){return arguments.length?(t=typeof a=="function"?a:Tr(+a),s):t},s.context=function(a){return arguments.length?(r=a??null,s):r},s}function Hh(){}function Kh(e,t,r){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+r)/6)}function SA(e){this._context=e}SA.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:Kh(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:Kh(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function zL(e){return new SA(e)}function NA(e){this._context=e}NA.prototype={areaStart:Hh,areaEnd:Hh,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:Kh(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function UL(e){return new NA(e)}function kA(e){this._context=e}kA.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var r=(this._x0+4*this._x1+e)/6,n=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(r,n):this._context.moveTo(r,n);break;case 3:this._point=4;default:Kh(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function BL(e){return new kA(e)}function _A(e){this._context=e}_A.prototype={areaStart:Hh,areaEnd:Hh,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}};function WL(e){return new _A(e)}function NN(e){return e<0?-1:1}function kN(e,t,r){var n=e._x1-e._x0,s=t-e._x1,a=(e._y1-e._y0)/(n||s<0&&-0),l=(r-e._y1)/(s||n<0&&-0),u=(a*s+l*n)/(n+s);return(NN(a)+NN(l))*Math.min(Math.abs(a),Math.abs(l),.5*Math.abs(u))||0}function _N(e,t){var r=e._x1-e._x0;return r?(3*(e._y1-e._y0)/r-t)/2:t}function xy(e,t,r){var n=e._x0,s=e._y0,a=e._x1,l=e._y1,u=(a-n)/3;e._context.bezierCurveTo(n+u,s+u*t,a-u,l-u*r,a,l)}function Gh(e){this._context=e}Gh.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:xy(this,this._t0,_N(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var r=NaN;if(e=+e,t=+t,!(e===this._x1&&t===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,xy(this,_N(this,r=kN(this,e,t)),r);break;default:xy(this,this._t0,r=kN(this,e,t));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=r}}};function CA(e){this._context=new EA(e)}(CA.prototype=Object.create(Gh.prototype)).point=function(e,t){Gh.prototype.point.call(this,t,e)};function EA(e){this._context=e}EA.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,r,n,s,a){this._context.bezierCurveTo(t,e,n,r,a,s)}};function VL(e){return new Gh(e)}function qL(e){return new CA(e)}function AA(e){this._context=e}AA.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,r=e.length;if(r)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),r===2)this._context.lineTo(e[1],t[1]);else for(var n=CN(e),s=CN(t),a=0,l=1;l<r;++a,++l)this._context.bezierCurveTo(n[0][a],s[0][a],n[1][a],s[1][a],e[l],t[l]);(this._line||this._line!==0&&r===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}};function CN(e){var t,r=e.length-1,n,s=new Array(r),a=new Array(r),l=new Array(r);for(s[0]=0,a[0]=2,l[0]=e[0]+2*e[1],t=1;t<r-1;++t)s[t]=1,a[t]=4,l[t]=4*e[t]+2*e[t+1];for(s[r-1]=2,a[r-1]=7,l[r-1]=8*e[r-1]+e[r],t=1;t<r;++t)n=s[t]/a[t-1],a[t]-=n,l[t]-=n*l[t-1];for(s[r-1]=l[r-1]/a[r-1],t=r-2;t>=0;--t)s[t]=(l[t]-s[t+1])/a[t];for(a[r-1]=(e[r]+s[r-1])/2,t=0;t<r-1;++t)a[t]=2*e[t+1]-s[t+1];return[s,a]}function HL(e){return new AA(e)}function Hm(e,t){this._context=e,this._t=t}Hm.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var r=this._x*(1-this._t)+e*this._t;this._context.lineTo(r,this._y),this._context.lineTo(r,t)}break}}this._x=e,this._y=t}};function KL(e){return new Hm(e,.5)}function GL(e){return new Hm(e,0)}function YL(e){return new Hm(e,1)}function Wc(e,t){if((l=e.length)>1)for(var r=1,n,s,a=e[t[0]],l,u=a.length;r<l;++r)for(s=a,a=e[t[r]],n=0;n<u;++n)a[n][1]+=a[n][0]=isNaN(s[n][1])?s[n][0]:s[n][1]}function Tv(e){for(var t=e.length,r=new Array(t);--t>=0;)r[t]=t;return r}function JL(e,t){return e[t]}function XL(e){const t=[];return t.key=e,t}function QL(){var e=Tr([]),t=Tv,r=Wc,n=JL;function s(a){var l=Array.from(e.apply(this,arguments),XL),u,d=l.length,m=-1,f;for(const p of a)for(u=0,++m;u<d;++u)(l[u][m]=[0,+n(p,l[u].key,m,a)]).data=p;for(u=0,f=Qx(t(l));u<d;++u)l[f[u]].index=u;return r(l,f),l}return s.keys=function(a){return arguments.length?(e=typeof a=="function"?a:Tr(Array.from(a)),s):e},s.value=function(a){return arguments.length?(n=typeof a=="function"?a:Tr(+a),s):n},s.order=function(a){return arguments.length?(t=a==null?Tv:typeof a=="function"?a:Tr(Array.from(a)),s):t},s.offset=function(a){return arguments.length?(r=a??Wc,s):r},s}function ZL(e,t){if((n=e.length)>0){for(var r,n,s=0,a=e[0].length,l;s<a;++s){for(l=r=0;r<n;++r)l+=e[r][s][1]||0;if(l)for(r=0;r<n;++r)e[r][s][1]/=l}Wc(e,t)}}function ez(e,t){if((s=e.length)>0){for(var r=0,n=e[t[0]],s,a=n.length;r<a;++r){for(var l=0,u=0;l<s;++l)u+=e[l][r][1]||0;n[r][1]+=n[r][0]=-u/2}Wc(e,t)}}function tz(e,t){if(!(!((l=e.length)>0)||!((a=(s=e[t[0]]).length)>0))){for(var r=0,n=1,s,a,l;n<a;++n){for(var u=0,d=0,m=0;u<l;++u){for(var f=e[t[u]],p=f[n][1]||0,y=f[n-1][1]||0,x=(p-y)/2,j=0;j<u;++j){var w=e[t[j]],S=w[n][1]||0,_=w[n-1][1]||0;x+=S-_}d+=p,m+=x*p}s[n-1][1]+=s[n-1][0]=r,d&&(r-=m/d)}s[n-1][1]+=s[n-1][0]=r,Wc(e,t)}}var by={},wy={},EN;function rz(){return EN||(EN=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r==="__proto__"}e.isUnsafeProperty=t})(wy)),wy}var jy={},AN;function PA(){return AN||(AN=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){switch(typeof r){case"number":case"symbol":return!1;case"string":return r.includes(".")||r.includes("[")||r.includes("]")}}e.isDeepKey=t})(jy)),jy}var Sy={},PN;function eb(){return PN||(PN=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){var n;return typeof r=="string"||typeof r=="symbol"?r:Object.is((n=r==null?void 0:r.valueOf)==null?void 0:n.call(r),-0)?"-0":String(r)}e.toKey=t})(Sy)),Sy}var Ny={},ky={},ON;function nz(){return ON||(ON=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){if(r==null)return"";if(typeof r=="string")return r;if(Array.isArray(r))return r.map(t).join(",");const n=String(r);return n==="0"&&Object.is(Number(r),-0)?"-0":n}e.toString=t})(ky)),ky}var TN;function tb(){return TN||(TN=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=nz(),r=eb();function n(s){if(Array.isArray(s))return s.map(r.toKey);if(typeof s=="symbol")return[s];s=t.toString(s);const a=[],l=s.length;if(l===0)return a;let u=0,d="",m="",f=!1;for(s.charCodeAt(0)===46&&(a.push(""),u++);u<l;){const p=s[u];m?p==="\\"&&u+1<l?(u++,d+=s[u]):p===m?m="":d+=p:f?p==='"'||p==="'"?m=p:p==="]"?(f=!1,a.push(d),d=""):d+=p:p==="["?(f=!0,d&&(a.push(d),d="")):p==="."?d&&(a.push(d),d=""):d+=p,u++}return d&&a.push(d),a}e.toPath=n})(Ny)),Ny}var IN;function rb(){return IN||(IN=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=rz(),r=PA(),n=eb(),s=tb();function a(u,d,m){if(u==null)return m;switch(typeof d){case"string":{if(t.isUnsafeProperty(d))return m;const f=u[d];return f===void 0?r.isDeepKey(d)?a(u,s.toPath(d),m):m:f}case"number":case"symbol":{typeof d=="number"&&(d=n.toKey(d));const f=u[d];return f===void 0?m:f}default:{if(Array.isArray(d))return l(u,d,m);if(Object.is(d==null?void 0:d.valueOf(),-0)?d="-0":d=String(d),t.isUnsafeProperty(d))return m;const f=u[d];return f===void 0?m:f}}}function l(u,d,m){if(d.length===0)return m;let f=u;for(let p=0;p<d.length;p++){if(f==null||t.isUnsafeProperty(d[p]))return m;f=f[d[p]]}return f===void 0?m:f}e.get=a})(by)),by}var _y,DN;function sz(){return DN||(DN=1,_y=rb().get),_y}var iz=sz();const Vc=ia(iz);var mi=e=>e===0?0:e>0?1:-1,Na=e=>typeof e=="number"&&e!=+e,no=e=>typeof e=="string"&&e.indexOf("%")===e.length-1,Nt=e=>(typeof e=="number"||e instanceof Number)&&!Na(e),ka=e=>Nt(e)||typeof e=="string",az=0,jd=e=>{var t=++az;return"".concat(e||"").concat(t)},sa=function(t,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!Nt(t)&&typeof t!="string")return n;var a;if(no(t)){if(r==null)return n;var l=t.indexOf("%");a=r*parseFloat(t.slice(0,l))/100}else a=+t;return Na(a)&&(a=n),s&&r!=null&&a>r&&(a=r),a},OA=e=>{if(!Array.isArray(e))return!1;for(var t=e.length,r={},n=0;n<t;n++)if(!r[e[n]])r[e[n]]=!0;else return!0;return!1};function fs(e,t,r){return Nt(e)&&Nt(t)?e+r*(t-e):t}function oz(e,t,r){if(!(!e||!e.length))return e.find(n=>n&&(typeof t=="function"?t(n):Vc(n,t))===r)}var Xn=e=>e===null||typeof e>"u",zd=e=>Xn(e)?e:"".concat(e.charAt(0).toUpperCase()).concat(e.slice(1));function lz(e){return e!=null}function ou(){}var cz=["type","size","sizeType"];function Iv(){return Iv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Iv.apply(null,arguments)}function $N(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function RN(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?$N(Object(r),!0).forEach(function(n){uz(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):$N(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function uz(e,t,r){return(t=dz(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function dz(e){var t=fz(e,"string");return typeof t=="symbol"?t:t+""}function fz(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function hz(e,t){if(e==null)return{};var r,n,s=mz(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function mz(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var TA={symbolCircle:Zx,symbolCross:EL,symbolDiamond:PL,symbolSquare:OL,symbolStar:$L,symbolTriangle:RL,symbolWye:FL},pz=Math.PI/180,gz=e=>{var t="symbol".concat(zd(e));return TA[t]||Zx},yz=(e,t,r)=>{if(t==="area")return e;switch(r){case"cross":return 5*e*e/9;case"diamond":return .5*e*e/Math.sqrt(3);case"square":return e*e;case"star":{var n=18*pz;return 1.25*e*e*(Math.tan(n)-Math.tan(n*2)*Math.tan(n)**2)}case"triangle":return Math.sqrt(3)*e*e/4;case"wye":return(21-10*Math.sqrt(3))*e*e/8;default:return Math.PI*e*e/4}},vz=(e,t)=>{TA["symbol".concat(zd(e))]=t},IA=e=>{var{type:t="circle",size:r=64,sizeType:n="area"}=e,s=hz(e,cz),a=RN(RN({},s),{},{type:t,size:r,sizeType:n}),l="circle";typeof t=="string"&&(l=t);var u=()=>{var y=gz(l),x=LL().type(y).size(yz(r,n,l)),j=x();if(j!==null)return j},{className:d,cx:m,cy:f}=a,p=Ii(a);return Nt(m)&&Nt(f)&&Nt(r)?v.createElement("path",Iv({},p,{className:Lr("recharts-symbols",d),transform:"translate(".concat(m,", ").concat(f,")"),d:u()})):null};IA.registerSymbol=vz;var DA=e=>"radius"in e&&"startAngle"in e&&"endAngle"in e,xz=(e,t)=>{if(!e||typeof e=="function"||typeof e=="boolean")return null;var r=e;if(v.isValidElement(e)&&(r=e.props),typeof r!="object"&&typeof r!="function")return null;var n={};return Object.keys(r).forEach(s=>{Yx(s)&&(n[s]=(a=>r[s](r,a)))}),n},bz=(e,t,r)=>n=>(e(t,r,n),null),nb=(e,t,r)=>{if(e===null||typeof e!="object"&&typeof e!="function")return null;var n=null;return Object.keys(e).forEach(s=>{var a=e[s];Yx(s)&&typeof a=="function"&&(n||(n={}),n[s]=bz(a,t,r))}),n};function MN(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function wz(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?MN(Object(r),!0).forEach(function(n){jz(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):MN(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function jz(e,t,r){return(t=Sz(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Sz(e){var t=Nz(e,"string");return typeof t=="symbol"?t:t+""}function Nz(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Mi(e,t){var r=wz({},e),n=t,s=Object.keys(t),a=s.reduce((l,u)=>(l[u]===void 0&&n[u]!==void 0&&(l[u]=n[u]),l),r);return a}var Cy={},Ey={},FN;function kz(){return FN||(FN=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r,n){const s=new Map;for(let a=0;a<r.length;a++){const l=r[a],u=n(l);s.has(u)||s.set(u,l)}return Array.from(s.values())}e.uniqBy=t})(Ey)),Ey}var Ay={},LN;function $A(){return LN||(LN=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r}e.identity=t})(Ay)),Ay}var Py={},Oy={},Ty={},zN;function _z(){return zN||(zN=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return Number.isSafeInteger(r)&&r>=0}e.isLength=t})(Ty)),Ty}var UN;function sb(){return UN||(UN=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=_z();function r(n){return n!=null&&typeof n!="function"&&t.isLength(n.length)}e.isArrayLike=r})(Oy)),Oy}var Iy={},BN;function Cz(){return BN||(BN=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return typeof r=="object"&&r!==null}e.isObjectLike=t})(Iy)),Iy}var WN;function Ez(){return WN||(WN=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=sb(),r=Cz();function n(s){return r.isObjectLike(s)&&t.isArrayLike(s)}e.isArrayLikeObject=n})(Py)),Py}var Dy={},$y={},VN;function Az(){return VN||(VN=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=rb();function r(n){return function(s){return t.get(s,n)}}e.property=r})($y)),$y}var Ry={},My={},Fy={},Ly={},qN;function RA(){return qN||(qN=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r!==null&&(typeof r=="object"||typeof r=="function")}e.isObject=t})(Ly)),Ly}var zy={},HN;function MA(){return HN||(HN=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r==null||typeof r!="object"&&typeof r!="function"}e.isPrimitive=t})(zy)),zy}var Uy={},KN;function FA(){return KN||(KN=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r,n){return r===n||Number.isNaN(r)&&Number.isNaN(n)}e.eq=t})(Uy)),Uy}var GN;function Pz(){return GN||(GN=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=RA(),r=MA(),n=FA();function s(f,p,y){return typeof y!="function"?s(f,p,()=>{}):a(f,p,function x(j,w,S,_,E,C){const A=y(j,w,S,_,E,C);return A!==void 0?!!A:a(j,w,x,C)},new Map)}function a(f,p,y,x){if(p===f)return!0;switch(typeof p){case"object":return l(f,p,y,x);case"function":return Object.keys(p).length>0?a(f,{...p},y,x):n.eq(f,p);default:return t.isObject(f)?typeof p=="string"?p==="":!0:n.eq(f,p)}}function l(f,p,y,x){if(p==null)return!0;if(Array.isArray(p))return d(f,p,y,x);if(p instanceof Map)return u(f,p,y,x);if(p instanceof Set)return m(f,p,y,x);const j=Object.keys(p);if(f==null)return j.length===0;if(j.length===0)return!0;if(x!=null&&x.has(p))return x.get(p)===f;x==null||x.set(p,f);try{for(let w=0;w<j.length;w++){const S=j[w];if(!r.isPrimitive(f)&&!(S in f)||p[S]===void 0&&f[S]!==void 0||p[S]===null&&f[S]!==null||!y(f[S],p[S],S,f,p,x))return!1}return!0}finally{x==null||x.delete(p)}}function u(f,p,y,x){if(p.size===0)return!0;if(!(f instanceof Map))return!1;for(const[j,w]of p.entries()){const S=f.get(j);if(y(S,w,j,f,p,x)===!1)return!1}return!0}function d(f,p,y,x){if(p.length===0)return!0;if(!Array.isArray(f))return!1;const j=new Set;for(let w=0;w<p.length;w++){const S=p[w];let _=!1;for(let E=0;E<f.length;E++){if(j.has(E))continue;const C=f[E];let A=!1;if(y(C,S,w,f,p,x)&&(A=!0),A){j.add(E),_=!0;break}}if(!_)return!1}return!0}function m(f,p,y,x){return p.size===0?!0:f instanceof Set?d([...f],[...p],y,x):!1}e.isMatchWith=s,e.isSetMatch=m})(Fy)),Fy}var YN;function LA(){return YN||(YN=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Pz();function r(n,s){return t.isMatchWith(n,s,()=>{})}e.isMatch=r})(My)),My}var By={},Wy={},Vy={},JN;function Oz(){return JN||(JN=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return Object.getOwnPropertySymbols(r).filter(n=>Object.prototype.propertyIsEnumerable.call(r,n))}e.getSymbols=t})(Vy)),Vy}var qy={},XN;function zA(){return XN||(XN=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r==null?r===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(r)}e.getTag=t})(qy)),qy}var Hy={},QN;function UA(){return QN||(QN=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t="[object RegExp]",r="[object String]",n="[object Number]",s="[object Boolean]",a="[object Arguments]",l="[object Symbol]",u="[object Date]",d="[object Map]",m="[object Set]",f="[object Array]",p="[object Function]",y="[object ArrayBuffer]",x="[object Object]",j="[object Error]",w="[object DataView]",S="[object Uint8Array]",_="[object Uint8ClampedArray]",E="[object Uint16Array]",C="[object Uint32Array]",A="[object BigUint64Array]",T="[object Int8Array]",P="[object Int16Array]",z="[object Int32Array]",J="[object BigInt64Array]",H="[object Float32Array]",fe="[object Float64Array]";e.argumentsTag=a,e.arrayBufferTag=y,e.arrayTag=f,e.bigInt64ArrayTag=J,e.bigUint64ArrayTag=A,e.booleanTag=s,e.dataViewTag=w,e.dateTag=u,e.errorTag=j,e.float32ArrayTag=H,e.float64ArrayTag=fe,e.functionTag=p,e.int16ArrayTag=P,e.int32ArrayTag=z,e.int8ArrayTag=T,e.mapTag=d,e.numberTag=n,e.objectTag=x,e.regexpTag=t,e.setTag=m,e.stringTag=r,e.symbolTag=l,e.uint16ArrayTag=E,e.uint32ArrayTag=C,e.uint8ArrayTag=S,e.uint8ClampedArrayTag=_})(Hy)),Hy}var Ky={},ZN;function Tz(){return ZN||(ZN=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return ArrayBuffer.isView(r)&&!(r instanceof DataView)}e.isTypedArray=t})(Ky)),Ky}var ek;function BA(){return ek||(ek=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Oz(),r=zA(),n=UA(),s=MA(),a=Tz();function l(f,p){return u(f,void 0,f,new Map,p)}function u(f,p,y,x=new Map,j=void 0){const w=j==null?void 0:j(f,p,y,x);if(w!==void 0)return w;if(s.isPrimitive(f))return f;if(x.has(f))return x.get(f);if(Array.isArray(f)){const S=new Array(f.length);x.set(f,S);for(let _=0;_<f.length;_++)S[_]=u(f[_],_,y,x,j);return Object.hasOwn(f,"index")&&(S.index=f.index),Object.hasOwn(f,"input")&&(S.input=f.input),S}if(f instanceof Date)return new Date(f.getTime());if(f instanceof RegExp){const S=new RegExp(f.source,f.flags);return S.lastIndex=f.lastIndex,S}if(f instanceof Map){const S=new Map;x.set(f,S);for(const[_,E]of f)S.set(_,u(E,_,y,x,j));return S}if(f instanceof Set){const S=new Set;x.set(f,S);for(const _ of f)S.add(u(_,void 0,y,x,j));return S}if(typeof Buffer<"u"&&Buffer.isBuffer(f))return f.subarray();if(a.isTypedArray(f)){const S=new(Object.getPrototypeOf(f)).constructor(f.length);x.set(f,S);for(let _=0;_<f.length;_++)S[_]=u(f[_],_,y,x,j);return S}if(f instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&f instanceof SharedArrayBuffer)return f.slice(0);if(f instanceof DataView){const S=new DataView(f.buffer.slice(0),f.byteOffset,f.byteLength);return x.set(f,S),d(S,f,y,x,j),S}if(typeof File<"u"&&f instanceof File){const S=new File([f],f.name,{type:f.type});return x.set(f,S),d(S,f,y,x,j),S}if(typeof Blob<"u"&&f instanceof Blob){const S=new Blob([f],{type:f.type});return x.set(f,S),d(S,f,y,x,j),S}if(f instanceof Error){const S=new f.constructor;return x.set(f,S),S.message=f.message,S.name=f.name,S.stack=f.stack,S.cause=f.cause,d(S,f,y,x,j),S}if(f instanceof Boolean){const S=new Boolean(f.valueOf());return x.set(f,S),d(S,f,y,x,j),S}if(f instanceof Number){const S=new Number(f.valueOf());return x.set(f,S),d(S,f,y,x,j),S}if(f instanceof String){const S=new String(f.valueOf());return x.set(f,S),d(S,f,y,x,j),S}if(typeof f=="object"&&m(f)){const S=Object.create(Object.getPrototypeOf(f));return x.set(f,S),d(S,f,y,x,j),S}return f}function d(f,p,y=f,x,j){const w=[...Object.keys(p),...t.getSymbols(p)];for(let S=0;S<w.length;S++){const _=w[S],E=Object.getOwnPropertyDescriptor(f,_);(E==null||E.writable)&&(f[_]=u(p[_],_,y,x,j))}}function m(f){switch(r.getTag(f)){case n.argumentsTag:case n.arrayTag:case n.arrayBufferTag:case n.dataViewTag:case n.booleanTag:case n.dateTag:case n.float32ArrayTag:case n.float64ArrayTag:case n.int8ArrayTag:case n.int16ArrayTag:case n.int32ArrayTag:case n.mapTag:case n.numberTag:case n.objectTag:case n.regexpTag:case n.setTag:case n.stringTag:case n.symbolTag:case n.uint8ArrayTag:case n.uint8ClampedArrayTag:case n.uint16ArrayTag:case n.uint32ArrayTag:return!0;default:return!1}}e.cloneDeepWith=l,e.cloneDeepWithImpl=u,e.copyProperties=d})(Wy)),Wy}var tk;function Iz(){return tk||(tk=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=BA();function r(n){return t.cloneDeepWithImpl(n,void 0,n,new Map,void 0)}e.cloneDeep=r})(By)),By}var rk;function Dz(){return rk||(rk=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=LA(),r=Iz();function n(s){return s=r.cloneDeep(s),a=>t.isMatch(a,s)}e.matches=n})(Ry)),Ry}var Gy={},Yy={},Jy={},nk;function $z(){return nk||(nk=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=BA(),r=UA();function n(s,a){return t.cloneDeepWith(s,(l,u,d,m)=>{const f=a==null?void 0:a(l,u,d,m);if(f!==void 0)return f;if(typeof s=="object")switch(Object.prototype.toString.call(s)){case r.numberTag:case r.stringTag:case r.booleanTag:{const p=new s.constructor(s==null?void 0:s.valueOf());return t.copyProperties(p,s),p}case r.argumentsTag:{const p={};return t.copyProperties(p,s),p.length=s.length,p[Symbol.iterator]=s[Symbol.iterator],p}default:return}})}e.cloneDeepWith=n})(Jy)),Jy}var sk;function Rz(){return sk||(sk=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=$z();function r(n){return t.cloneDeepWith(n)}e.cloneDeep=r})(Yy)),Yy}var Xy={},Qy={},ik;function WA(){return ik||(ik=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=/^(?:0|[1-9]\d*)$/;function r(n,s=Number.MAX_SAFE_INTEGER){switch(typeof n){case"number":return Number.isInteger(n)&&n>=0&&n<s;case"symbol":return!1;case"string":return t.test(n)}}e.isIndex=r})(Qy)),Qy}var Zy={},ak;function Mz(){return ak||(ak=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=zA();function r(n){return n!==null&&typeof n=="object"&&t.getTag(n)==="[object Arguments]"}e.isArguments=r})(Zy)),Zy}var ok;function Fz(){return ok||(ok=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=PA(),r=WA(),n=Mz(),s=tb();function a(l,u){let d;if(Array.isArray(u)?d=u:typeof u=="string"&&t.isDeepKey(u)&&(l==null?void 0:l[u])==null?d=s.toPath(u):d=[u],d.length===0)return!1;let m=l;for(let f=0;f<d.length;f++){const p=d[f];if((m==null||!Object.hasOwn(m,p))&&!((Array.isArray(m)||n.isArguments(m))&&r.isIndex(p)&&p<m.length))return!1;m=m[p]}return!0}e.has=a})(Xy)),Xy}var lk;function Lz(){return lk||(lk=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=LA(),r=eb(),n=Rz(),s=rb(),a=Fz();function l(u,d){switch(typeof u){case"object":{Object.is(u==null?void 0:u.valueOf(),-0)&&(u="-0");break}case"number":{u=r.toKey(u);break}}return d=n.cloneDeep(d),function(m){const f=s.get(m,u);return f===void 0?a.has(m,u):d===void 0?f===void 0:t.isMatch(f,d)}}e.matchesProperty=l})(Gy)),Gy}var ck;function zz(){return ck||(ck=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=$A(),r=Az(),n=Dz(),s=Lz();function a(l){if(l==null)return t.identity;switch(typeof l){case"function":return l;case"object":return Array.isArray(l)&&l.length===2?s.matchesProperty(l[0],l[1]):n.matches(l);case"string":case"symbol":case"number":return r.property(l)}}e.iteratee=a})(Dy)),Dy}var uk;function Uz(){return uk||(uk=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=kz(),r=$A(),n=Ez(),s=zz();function a(l,u=r.identity){return n.isArrayLikeObject(l)?t.uniqBy(Array.from(l),s.iteratee(u)):[]}e.uniqBy=a})(Cy)),Cy}var e0,dk;function Bz(){return dk||(dk=1,e0=Uz().uniqBy),e0}var Wz=Bz();const fk=ia(Wz);function Vz(e,t,r){return t===!0?fk(e,r):typeof t=="function"?fk(e,t):e}var t0={exports:{}},r0={},n0={exports:{}},s0={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hk;function qz(){if(hk)return s0;hk=1;var e=Qc();function t(p,y){return p===y&&(p!==0||1/p===1/y)||p!==p&&y!==y}var r=typeof Object.is=="function"?Object.is:t,n=e.useState,s=e.useEffect,a=e.useLayoutEffect,l=e.useDebugValue;function u(p,y){var x=y(),j=n({inst:{value:x,getSnapshot:y}}),w=j[0].inst,S=j[1];return a(function(){w.value=x,w.getSnapshot=y,d(w)&&S({inst:w})},[p,x,y]),s(function(){return d(w)&&S({inst:w}),p(function(){d(w)&&S({inst:w})})},[p]),l(x),x}function d(p){var y=p.getSnapshot;p=p.value;try{var x=y();return!r(p,x)}catch{return!0}}function m(p,y){return y()}var f=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?m:u;return s0.useSyncExternalStore=e.useSyncExternalStore!==void 0?e.useSyncExternalStore:f,s0}var mk;function Hz(){return mk||(mk=1,n0.exports=qz()),n0.exports}/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var pk;function Kz(){if(pk)return r0;pk=1;var e=Qc(),t=Hz();function r(m,f){return m===f&&(m!==0||1/m===1/f)||m!==m&&f!==f}var n=typeof Object.is=="function"?Object.is:r,s=t.useSyncExternalStore,a=e.useRef,l=e.useEffect,u=e.useMemo,d=e.useDebugValue;return r0.useSyncExternalStoreWithSelector=function(m,f,p,y,x){var j=a(null);if(j.current===null){var w={hasValue:!1,value:null};j.current=w}else w=j.current;j=u(function(){function _(P){if(!E){if(E=!0,C=P,P=y(P),x!==void 0&&w.hasValue){var z=w.value;if(x(z,P))return A=z}return A=P}if(z=A,n(C,P))return z;var J=y(P);return x!==void 0&&x(z,J)?(C=P,z):(C=P,A=J)}var E=!1,C,A,T=p===void 0?null:p;return[function(){return _(f())},T===null?void 0:function(){return _(T())}]},[f,p,y,x]);var S=s(m,j[0],j[1]);return l(function(){w.hasValue=!0,w.value=S},[S]),d(S),S},r0}var gk;function Gz(){return gk||(gk=1,t0.exports=Kz()),t0.exports}var Yz=Gz(),ib=v.createContext(null),Jz=e=>e,pn=()=>{var e=v.useContext(ib);return e?e.store.dispatch:Jz},kh=()=>{},Xz=()=>kh,Qz=(e,t)=>e===t;function xt(e){var t=v.useContext(ib);return Yz.useSyncExternalStoreWithSelector(t?t.subscription.addNestedSub:Xz,t?t.store.getState:kh,t?t.store.getState:kh,t?e:kh,Qz)}function Zz(e,t=`expected a function, instead received ${typeof e}`){if(typeof e!="function")throw new TypeError(t)}function e8(e,t=`expected an object, instead received ${typeof e}`){if(typeof e!="object")throw new TypeError(t)}function t8(e,t="expected all items to be functions, instead received the following types: "){if(!e.every(r=>typeof r=="function")){const r=e.map(n=>typeof n=="function"?`function ${n.name||"unnamed"}()`:typeof n).join(", ");throw new TypeError(`${t}[${r}]`)}}var yk=e=>Array.isArray(e)?e:[e];function r8(e){const t=Array.isArray(e[0])?e[0]:e;return t8(t,"createSelector expects all input-selectors to be functions, but received the following types: "),t}function n8(e,t){const r=[],{length:n}=e;for(let s=0;s<n;s++)r.push(e[s].apply(null,t));return r}var s8=class{constructor(e){this.value=e}deref(){return this.value}},i8=typeof WeakRef<"u"?WeakRef:s8,a8=0,vk=1;function sh(){return{s:a8,v:void 0,o:null,p:null}}function VA(e,t={}){let r=sh();const{resultEqualityCheck:n}=t;let s,a=0;function l(){var p;let u=r;const{length:d}=arguments;for(let y=0,x=d;y<x;y++){const j=arguments[y];if(typeof j=="function"||typeof j=="object"&&j!==null){let w=u.o;w===null&&(u.o=w=new WeakMap);const S=w.get(j);S===void 0?(u=sh(),w.set(j,u)):u=S}else{let w=u.p;w===null&&(u.p=w=new Map);const S=w.get(j);S===void 0?(u=sh(),w.set(j,u)):u=S}}const m=u;let f;if(u.s===vk)f=u.v;else if(f=e.apply(null,arguments),a++,n){const y=((p=s==null?void 0:s.deref)==null?void 0:p.call(s))??s;y!=null&&n(y,f)&&(f=y,a!==0&&a--),s=typeof f=="object"&&f!==null||typeof f=="function"?new i8(f):f}return m.s=vk,m.v=f,f}return l.clearCache=()=>{r=sh(),l.resetResultsCount()},l.resultsCount=()=>a,l.resetResultsCount=()=>{a=0},l}function o8(e,...t){const r=typeof e=="function"?{memoize:e,memoizeOptions:t}:e,n=(...s)=>{let a=0,l=0,u,d={},m=s.pop();typeof m=="object"&&(d=m,m=s.pop()),Zz(m,`createSelector expects an output function after the inputs, but received: [${typeof m}]`);const f={...r,...d},{memoize:p,memoizeOptions:y=[],argsMemoize:x=VA,argsMemoizeOptions:j=[]}=f,w=yk(y),S=yk(j),_=r8(s),E=p(function(){return a++,m.apply(null,arguments)},...w),C=x(function(){l++;const T=n8(_,arguments);return u=E.apply(null,T),u},...S);return Object.assign(C,{resultFunc:m,memoizedResultFunc:E,dependencies:_,dependencyRecomputations:()=>l,resetDependencyRecomputations:()=>{l=0},lastResult:()=>u,recomputations:()=>a,resetRecomputations:()=>{a=0},memoize:p,argsMemoize:x})};return Object.assign(n,{withTypes:()=>n}),n}var be=o8(VA),l8=Object.assign((e,t=be)=>{e8(e,`createStructuredSelector expects first argument to be an object where each property is a selector, instead received a ${typeof e}`);const r=Object.keys(e),n=r.map(a=>e[a]);return t(n,(...a)=>a.reduce((l,u,d)=>(l[r[d]]=u,l),{}))},{withTypes:()=>l8}),i0={},a0={},o0={},xk;function c8(){return xk||(xk=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return typeof n=="symbol"?1:n===null?2:n===void 0?3:n!==n?4:0}const r=(n,s,a)=>{if(n!==s){const l=t(n),u=t(s);if(l===u&&l===0){if(n<s)return a==="desc"?1:-1;if(n>s)return a==="desc"?-1:1}return a==="desc"?u-l:l-u}return 0};e.compareValues=r})(o0)),o0}var l0={},c0={},bk;function qA(){return bk||(bk=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return typeof r=="symbol"||r instanceof Symbol}e.isSymbol=t})(c0)),c0}var wk;function u8(){return wk||(wk=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=qA(),r=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,n=/^\w*$/;function s(a,l){return Array.isArray(a)?!1:typeof a=="number"||typeof a=="boolean"||a==null||t.isSymbol(a)?!0:typeof a=="string"&&(n.test(a)||!r.test(a))||l!=null&&Object.hasOwn(l,a)}e.isKey=s})(l0)),l0}var jk;function d8(){return jk||(jk=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=c8(),r=u8(),n=tb();function s(a,l,u,d){if(a==null)return[];u=d?void 0:u,Array.isArray(a)||(a=Object.values(a)),Array.isArray(l)||(l=l==null?[null]:[l]),l.length===0&&(l=[null]),Array.isArray(u)||(u=u==null?[]:[u]),u=u.map(x=>String(x));const m=(x,j)=>{let w=x;for(let S=0;S<j.length&&w!=null;++S)w=w[j[S]];return w},f=(x,j)=>j==null||x==null?j:typeof x=="object"&&"key"in x?Object.hasOwn(j,x.key)?j[x.key]:m(j,x.path):typeof x=="function"?x(j):Array.isArray(x)?m(j,x):typeof j=="object"?j[x]:j,p=l.map(x=>(Array.isArray(x)&&x.length===1&&(x=x[0]),x==null||typeof x=="function"||Array.isArray(x)||r.isKey(x)?x:{key:x,path:n.toPath(x)}));return a.map(x=>({original:x,criteria:p.map(j=>f(j,x))})).slice().sort((x,j)=>{for(let w=0;w<p.length;w++){const S=t.compareValues(x.criteria[w],j.criteria[w],u[w]);if(S!==0)return S}return 0}).map(x=>x.original)}e.orderBy=s})(a0)),a0}var u0={},Sk;function f8(){return Sk||(Sk=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r,n=1){const s=[],a=Math.floor(n),l=(u,d)=>{for(let m=0;m<u.length;m++){const f=u[m];Array.isArray(f)&&d<a?l(f,d+1):s.push(f)}};return l(r,0),s}e.flatten=t})(u0)),u0}var d0={},Nk;function HA(){return Nk||(Nk=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=WA(),r=sb(),n=RA(),s=FA();function a(l,u,d){return n.isObject(d)&&(typeof u=="number"&&r.isArrayLike(d)&&t.isIndex(u)&&u<d.length||typeof u=="string"&&u in d)?s.eq(d[u],l):!1}e.isIterateeCall=a})(d0)),d0}var kk;function h8(){return kk||(kk=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=d8(),r=f8(),n=HA();function s(a,...l){const u=l.length;return u>1&&n.isIterateeCall(a,l[0],l[1])?l=[]:u>2&&n.isIterateeCall(l[0],l[1],l[2])&&(l=[l[0]]),t.orderBy(a,r.flatten(l),["asc"])}e.sortBy=s})(i0)),i0}var f0,_k;function m8(){return _k||(_k=1,f0=h8().sortBy),f0}var p8=m8();const Km=ia(p8);var KA=e=>e.legend.settings,g8=e=>e.legend.size,y8=e=>e.legend.payload;be([y8,KA],(e,t)=>{var{itemSorter:r}=t,n=e.flat(1);return r?Km(n,r):n});var ih=1;function v8(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],[t,r]=v.useState({height:0,left:0,top:0,width:0}),n=v.useCallback(s=>{if(s!=null){var a=s.getBoundingClientRect(),l={height:a.height,left:a.left,top:a.top,width:a.width};(Math.abs(l.height-t.height)>ih||Math.abs(l.left-t.left)>ih||Math.abs(l.top-t.top)>ih||Math.abs(l.width-t.width)>ih)&&r({height:l.height,left:l.left,top:l.top,width:l.width})}},[t.width,t.height,t.top,t.left,...e]);return[t,n]}function cs(e){return`Minified Redux error #${e}; visit https://redux.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var x8=typeof Symbol=="function"&&Symbol.observable||"@@observable",Ck=x8,h0=()=>Math.random().toString(36).substring(7).split("").join("."),b8={INIT:`@@redux/INIT${h0()}`,REPLACE:`@@redux/REPLACE${h0()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${h0()}`},Yh=b8;function ab(e){if(typeof e!="object"||e===null)return!1;let t=e;for(;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t||Object.getPrototypeOf(e)===null}function GA(e,t,r){if(typeof e!="function")throw new Error(cs(2));if(typeof t=="function"&&typeof r=="function"||typeof r=="function"&&typeof arguments[3]=="function")throw new Error(cs(0));if(typeof t=="function"&&typeof r>"u"&&(r=t,t=void 0),typeof r<"u"){if(typeof r!="function")throw new Error(cs(1));return r(GA)(e,t)}let n=e,s=t,a=new Map,l=a,u=0,d=!1;function m(){l===a&&(l=new Map,a.forEach((S,_)=>{l.set(_,S)}))}function f(){if(d)throw new Error(cs(3));return s}function p(S){if(typeof S!="function")throw new Error(cs(4));if(d)throw new Error(cs(5));let _=!0;m();const E=u++;return l.set(E,S),function(){if(_){if(d)throw new Error(cs(6));_=!1,m(),l.delete(E),a=null}}}function y(S){if(!ab(S))throw new Error(cs(7));if(typeof S.type>"u")throw new Error(cs(8));if(typeof S.type!="string")throw new Error(cs(17));if(d)throw new Error(cs(9));try{d=!0,s=n(s,S)}finally{d=!1}return(a=l).forEach(E=>{E()}),S}function x(S){if(typeof S!="function")throw new Error(cs(10));n=S,y({type:Yh.REPLACE})}function j(){const S=p;return{subscribe(_){if(typeof _!="object"||_===null)throw new Error(cs(11));function E(){const A=_;A.next&&A.next(f())}return E(),{unsubscribe:S(E)}},[Ck](){return this}}}return y({type:Yh.INIT}),{dispatch:y,subscribe:p,getState:f,replaceReducer:x,[Ck]:j}}function w8(e){Object.keys(e).forEach(t=>{const r=e[t];if(typeof r(void 0,{type:Yh.INIT})>"u")throw new Error(cs(12));if(typeof r(void 0,{type:Yh.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(cs(13))})}function YA(e){const t=Object.keys(e),r={};for(let a=0;a<t.length;a++){const l=t[a];typeof e[l]=="function"&&(r[l]=e[l])}const n=Object.keys(r);let s;try{w8(r)}catch(a){s=a}return function(l={},u){if(s)throw s;let d=!1;const m={};for(let f=0;f<n.length;f++){const p=n[f],y=r[p],x=l[p],j=y(x,u);if(typeof j>"u")throw u&&u.type,new Error(cs(14));m[p]=j,d=d||j!==x}return d=d||n.length!==Object.keys(l).length,d?m:l}}function Jh(...e){return e.length===0?t=>t:e.length===1?e[0]:e.reduce((t,r)=>(...n)=>t(r(...n)))}function j8(...e){return t=>(r,n)=>{const s=t(r,n);let a=()=>{throw new Error(cs(15))};const l={getState:s.getState,dispatch:(d,...m)=>a(d,...m)},u=e.map(d=>d(l));return a=Jh(...u)(s.dispatch),{...s,dispatch:a}}}function JA(e){return ab(e)&&"type"in e&&typeof e.type=="string"}var XA=Symbol.for("immer-nothing"),Ek=Symbol.for("immer-draftable"),yi=Symbol.for("immer-state");function ea(e,...t){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var Sd=Object.getPrototypeOf;function Ml(e){return!!e&&!!e[yi]}function so(e){var t;return e?QA(e)||Array.isArray(e)||!!e[Ek]||!!((t=e.constructor)!=null&&t[Ek])||Ud(e)||Ym(e):!1}var S8=Object.prototype.constructor.toString(),Ak=new WeakMap;function QA(e){if(!e||typeof e!="object")return!1;const t=Object.getPrototypeOf(e);if(t===null||t===Object.prototype)return!0;const r=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;if(r===Object)return!0;if(typeof r!="function")return!1;let n=Ak.get(r);return n===void 0&&(n=Function.toString.call(r),Ak.set(r,n)),n===S8}function Xh(e,t,r=!0){Gm(e)===0?(r?Reflect.ownKeys(e):Object.keys(e)).forEach(s=>{t(s,e[s],e)}):e.forEach((n,s)=>t(s,n,e))}function Gm(e){const t=e[yi];return t?t.type_:Array.isArray(e)?1:Ud(e)?2:Ym(e)?3:0}function Dv(e,t){return Gm(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function ZA(e,t,r){const n=Gm(e);n===2?e.set(t,r):n===3?e.add(r):e[t]=r}function N8(e,t){return e===t?e!==0||1/e===1/t:e!==e&&t!==t}function Ud(e){return e instanceof Map}function Ym(e){return e instanceof Set}function vl(e){return e.copy_||e.base_}function $v(e,t){if(Ud(e))return new Map(e);if(Ym(e))return new Set(e);if(Array.isArray(e))return Array.prototype.slice.call(e);const r=QA(e);if(t===!0||t==="class_only"&&!r){const n=Object.getOwnPropertyDescriptors(e);delete n[yi];let s=Reflect.ownKeys(n);for(let a=0;a<s.length;a++){const l=s[a],u=n[l];u.writable===!1&&(u.writable=!0,u.configurable=!0),(u.get||u.set)&&(n[l]={configurable:!0,writable:!0,enumerable:u.enumerable,value:e[l]})}return Object.create(Sd(e),n)}else{const n=Sd(e);if(n!==null&&r)return{...e};const s=Object.create(n);return Object.assign(s,e)}}function ob(e,t=!1){return Jm(e)||Ml(e)||!so(e)||(Gm(e)>1&&Object.defineProperties(e,{set:ah,add:ah,clear:ah,delete:ah}),Object.freeze(e),t&&Object.values(e).forEach(r=>ob(r,!0))),e}function k8(){ea(2)}var ah={value:k8};function Jm(e){return e===null||typeof e!="object"?!0:Object.isFrozen(e)}var _8={};function Fl(e){const t=_8[e];return t||ea(0,e),t}var Nd;function eP(){return Nd}function C8(e,t){return{drafts_:[],parent_:e,immer_:t,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function Pk(e,t){t&&(Fl("Patches"),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function Rv(e){Mv(e),e.drafts_.forEach(E8),e.drafts_=null}function Mv(e){e===Nd&&(Nd=e.parent_)}function Ok(e){return Nd=C8(Nd,e)}function E8(e){const t=e[yi];t.type_===0||t.type_===1?t.revoke_():t.revoked_=!0}function Tk(e,t){t.unfinalizedDrafts_=t.drafts_.length;const r=t.drafts_[0];return e!==void 0&&e!==r?(r[yi].modified_&&(Rv(t),ea(4)),so(e)&&(e=Qh(t,e),t.parent_||Zh(t,e)),t.patches_&&Fl("Patches").generateReplacementPatches_(r[yi].base_,e,t.patches_,t.inversePatches_)):e=Qh(t,r,[]),Rv(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==XA?e:void 0}function Qh(e,t,r){if(Jm(t))return t;const n=e.immer_.shouldUseStrictIteration(),s=t[yi];if(!s)return Xh(t,(a,l)=>Ik(e,s,t,a,l,r),n),t;if(s.scope_!==e)return t;if(!s.modified_)return Zh(e,s.base_,!0),s.base_;if(!s.finalized_){s.finalized_=!0,s.scope_.unfinalizedDrafts_--;const a=s.copy_;let l=a,u=!1;s.type_===3&&(l=new Set(a),a.clear(),u=!0),Xh(l,(d,m)=>Ik(e,s,a,d,m,r,u),n),Zh(e,a,!1),r&&e.patches_&&Fl("Patches").generatePatches_(s,r,e.patches_,e.inversePatches_)}return s.copy_}function Ik(e,t,r,n,s,a,l){if(s==null||typeof s!="object"&&!l)return;const u=Jm(s);if(!(u&&!l)){if(Ml(s)){const d=a&&t&&t.type_!==3&&!Dv(t.assigned_,n)?a.concat(n):void 0,m=Qh(e,s,d);if(ZA(r,n,m),Ml(m))e.canAutoFreeze_=!1;else return}else l&&r.add(s);if(so(s)&&!u){if(!e.immer_.autoFreeze_&&e.unfinalizedDrafts_<1||t&&t.base_&&t.base_[n]===s&&u)return;Qh(e,s),(!t||!t.scope_.parent_)&&typeof n!="symbol"&&(Ud(r)?r.has(n):Object.prototype.propertyIsEnumerable.call(r,n))&&Zh(e,s)}}}function Zh(e,t,r=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&ob(t,r)}function A8(e,t){const r=Array.isArray(e),n={type_:r?1:0,scope_:t?t.scope_:eP(),modified_:!1,finalized_:!1,assigned_:{},parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1};let s=n,a=lb;r&&(s=[n],a=kd);const{revoke:l,proxy:u}=Proxy.revocable(s,a);return n.draft_=u,n.revoke_=l,u}var lb={get(e,t){if(t===yi)return e;const r=vl(e);if(!Dv(r,t))return P8(e,r,t);const n=r[t];return e.finalized_||!so(n)?n:n===m0(e.base_,t)?(p0(e),e.copy_[t]=Lv(n,e)):n},has(e,t){return t in vl(e)},ownKeys(e){return Reflect.ownKeys(vl(e))},set(e,t,r){const n=tP(vl(e),t);if(n!=null&&n.set)return n.set.call(e.draft_,r),!0;if(!e.modified_){const s=m0(vl(e),t),a=s==null?void 0:s[yi];if(a&&a.base_===r)return e.copy_[t]=r,e.assigned_[t]=!1,!0;if(N8(r,s)&&(r!==void 0||Dv(e.base_,t)))return!0;p0(e),Fv(e)}return e.copy_[t]===r&&(r!==void 0||t in e.copy_)||Number.isNaN(r)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=r,e.assigned_[t]=!0),!0},deleteProperty(e,t){return m0(e.base_,t)!==void 0||t in e.base_?(e.assigned_[t]=!1,p0(e),Fv(e)):delete e.assigned_[t],e.copy_&&delete e.copy_[t],!0},getOwnPropertyDescriptor(e,t){const r=vl(e),n=Reflect.getOwnPropertyDescriptor(r,t);return n&&{writable:!0,configurable:e.type_!==1||t!=="length",enumerable:n.enumerable,value:r[t]}},defineProperty(){ea(11)},getPrototypeOf(e){return Sd(e.base_)},setPrototypeOf(){ea(12)}},kd={};Xh(lb,(e,t)=>{kd[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}});kd.deleteProperty=function(e,t){return kd.set.call(this,e,t,void 0)};kd.set=function(e,t,r){return lb.set.call(this,e[0],t,r,e[0])};function m0(e,t){const r=e[yi];return(r?vl(r):e)[t]}function P8(e,t,r){var s;const n=tP(t,r);return n?"value"in n?n.value:(s=n.get)==null?void 0:s.call(e.draft_):void 0}function tP(e,t){if(!(t in e))return;let r=Sd(e);for(;r;){const n=Object.getOwnPropertyDescriptor(r,t);if(n)return n;r=Sd(r)}}function Fv(e){e.modified_||(e.modified_=!0,e.parent_&&Fv(e.parent_))}function p0(e){e.copy_||(e.copy_=$v(e.base_,e.scope_.immer_.useStrictShallowCopy_))}var O8=class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.useStrictIteration_=!0,this.produce=(t,r,n)=>{if(typeof t=="function"&&typeof r!="function"){const a=r;r=t;const l=this;return function(d=a,...m){return l.produce(d,f=>r.call(this,f,...m))}}typeof r!="function"&&ea(6),n!==void 0&&typeof n!="function"&&ea(7);let s;if(so(t)){const a=Ok(this),l=Lv(t,void 0);let u=!0;try{s=r(l),u=!1}finally{u?Rv(a):Mv(a)}return Pk(a,n),Tk(s,a)}else if(!t||typeof t!="object"){if(s=r(t),s===void 0&&(s=t),s===XA&&(s=void 0),this.autoFreeze_&&ob(s,!0),n){const a=[],l=[];Fl("Patches").generateReplacementPatches_(t,s,a,l),n(a,l)}return s}else ea(1,t)},this.produceWithPatches=(t,r)=>{if(typeof t=="function")return(l,...u)=>this.produceWithPatches(l,d=>t(d,...u));let n,s;return[this.produce(t,r,(l,u)=>{n=l,s=u}),n,s]},typeof(e==null?void 0:e.autoFreeze)=="boolean"&&this.setAutoFreeze(e.autoFreeze),typeof(e==null?void 0:e.useStrictShallowCopy)=="boolean"&&this.setUseStrictShallowCopy(e.useStrictShallowCopy),typeof(e==null?void 0:e.useStrictIteration)=="boolean"&&this.setUseStrictIteration(e.useStrictIteration)}createDraft(e){so(e)||ea(8),Ml(e)&&(e=Qa(e));const t=Ok(this),r=Lv(e,void 0);return r[yi].isManual_=!0,Mv(t),r}finishDraft(e,t){const r=e&&e[yi];(!r||!r.isManual_)&&ea(9);const{scope_:n}=r;return Pk(n,t),Tk(void 0,n)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}setUseStrictIteration(e){this.useStrictIteration_=e}shouldUseStrictIteration(){return this.useStrictIteration_}applyPatches(e,t){let r;for(r=t.length-1;r>=0;r--){const s=t[r];if(s.path.length===0&&s.op==="replace"){e=s.value;break}}r>-1&&(t=t.slice(r+1));const n=Fl("Patches").applyPatches_;return Ml(e)?n(e,t):this.produce(e,s=>n(s,t))}};function Lv(e,t){const r=Ud(e)?Fl("MapSet").proxyMap_(e,t):Ym(e)?Fl("MapSet").proxySet_(e,t):A8(e,t);return(t?t.scope_:eP()).drafts_.push(r),r}function Qa(e){return Ml(e)||ea(10,e),rP(e)}function rP(e){if(!so(e)||Jm(e))return e;const t=e[yi];let r,n=!0;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,r=$v(e,t.scope_.immer_.useStrictShallowCopy_),n=t.scope_.immer_.shouldUseStrictIteration()}else r=$v(e,!0);return Xh(r,(s,a)=>{ZA(r,s,rP(a))},n),t&&(t.finalized_=!1),r}var zv=new O8,nP=zv.produce,T8=zv.setUseStrictIteration.bind(zv);function sP(e){return({dispatch:r,getState:n})=>s=>a=>typeof a=="function"?a(r,n,e):s(a)}var I8=sP(),D8=sP,$8=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?Jh:Jh.apply(null,arguments)};function Di(e,t){function r(...n){if(t){let s=t(...n);if(!s)throw new Error(gi(0));return{type:e,payload:s.payload,..."meta"in s&&{meta:s.meta},..."error"in s&&{error:s.error}}}return{type:e,payload:n[0]}}return r.toString=()=>`${e}`,r.type=e,r.match=n=>JA(n)&&n.type===e,r}var iP=class id extends Array{constructor(...t){super(...t),Object.setPrototypeOf(this,id.prototype)}static get[Symbol.species](){return id}concat(...t){return super.concat.apply(this,t)}prepend(...t){return t.length===1&&Array.isArray(t[0])?new id(...t[0].concat(this)):new id(...t.concat(this))}};function Dk(e){return so(e)?nP(e,()=>{}):e}function oh(e,t,r){return e.has(t)?e.get(t):e.set(t,r(t)).get(t)}function R8(e){return typeof e=="boolean"}var M8=()=>function(t){const{thunk:r=!0,immutableCheck:n=!0,serializableCheck:s=!0,actionCreatorCheck:a=!0}=t??{};let l=new iP;return r&&(R8(r)?l.push(I8):l.push(D8(r.extraArgument))),l},aP="RTK_autoBatch",Rn=()=>e=>({payload:e,meta:{[aP]:!0}}),$k=e=>t=>{setTimeout(t,e)},oP=(e={type:"raf"})=>t=>(...r)=>{const n=t(...r);let s=!0,a=!1,l=!1;const u=new Set,d=e.type==="tick"?queueMicrotask:e.type==="raf"?typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:$k(10):e.type==="callback"?e.queueNotification:$k(e.timeout),m=()=>{l=!1,a&&(a=!1,u.forEach(f=>f()))};return Object.assign({},n,{subscribe(f){const p=()=>s&&f(),y=n.subscribe(p);return u.add(f),()=>{y(),u.delete(f)}},dispatch(f){var p;try{return s=!((p=f==null?void 0:f.meta)!=null&&p[aP]),a=!s,a&&(l||(l=!0,d(m))),n.dispatch(f)}finally{s=!0}}})},F8=e=>function(r){const{autoBatch:n=!0}=r??{};let s=new iP(e);return n&&s.push(oP(typeof n=="object"?n:void 0)),s};function L8(e){const t=M8(),{reducer:r=void 0,middleware:n,devTools:s=!0,preloadedState:a=void 0,enhancers:l=void 0}=e||{};let u;if(typeof r=="function")u=r;else if(ab(r))u=YA(r);else throw new Error(gi(1));let d;typeof n=="function"?d=n(t):d=t();let m=Jh;s&&(m=$8({trace:!1,...typeof s=="object"&&s}));const f=j8(...d),p=F8(f);let y=typeof l=="function"?l(p):p();const x=m(...y);return GA(u,a,x)}function lP(e){const t={},r=[];let n;const s={addCase(a,l){const u=typeof a=="string"?a:a.type;if(!u)throw new Error(gi(28));if(u in t)throw new Error(gi(29));return t[u]=l,s},addAsyncThunk(a,l){return l.pending&&(t[a.pending.type]=l.pending),l.rejected&&(t[a.rejected.type]=l.rejected),l.fulfilled&&(t[a.fulfilled.type]=l.fulfilled),l.settled&&r.push({matcher:a.settled,reducer:l.settled}),s},addMatcher(a,l){return r.push({matcher:a,reducer:l}),s},addDefaultCase(a){return n=a,s}};return e(s),[t,r,n]}T8(!1);function z8(e){return typeof e=="function"}function U8(e,t){let[r,n,s]=lP(t),a;if(z8(e))a=()=>Dk(e());else{const u=Dk(e);a=()=>u}function l(u=a(),d){let m=[r[d.type],...n.filter(({matcher:f})=>f(d)).map(({reducer:f})=>f)];return m.filter(f=>!!f).length===0&&(m=[s]),m.reduce((f,p)=>{if(p)if(Ml(f)){const x=p(f,d);return x===void 0?f:x}else{if(so(f))return nP(f,y=>p(y,d));{const y=p(f,d);if(y===void 0){if(f===null)return f;throw Error("A case reducer on a non-draftable value must not return undefined")}return y}}return f},u)}return l.getInitialState=a,l}var B8="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",W8=(e=21)=>{let t="",r=e;for(;r--;)t+=B8[Math.random()*64|0];return t},V8=Symbol.for("rtk-slice-createasyncthunk");function q8(e,t){return`${e}/${t}`}function H8({creators:e}={}){var r;const t=(r=e==null?void 0:e.asyncThunk)==null?void 0:r[V8];return function(s){const{name:a,reducerPath:l=a}=s;if(!a)throw new Error(gi(11));const u=(typeof s.reducers=="function"?s.reducers(G8()):s.reducers)||{},d=Object.keys(u),m={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},f={addCase(A,T){const P=typeof A=="string"?A:A.type;if(!P)throw new Error(gi(12));if(P in m.sliceCaseReducersByType)throw new Error(gi(13));return m.sliceCaseReducersByType[P]=T,f},addMatcher(A,T){return m.sliceMatchers.push({matcher:A,reducer:T}),f},exposeAction(A,T){return m.actionCreators[A]=T,f},exposeCaseReducer(A,T){return m.sliceCaseReducersByName[A]=T,f}};d.forEach(A=>{const T=u[A],P={reducerName:A,type:q8(a,A),createNotation:typeof s.reducers=="function"};J8(T)?Q8(P,T,f,t):Y8(P,T,f)});function p(){const[A={},T=[],P=void 0]=typeof s.extraReducers=="function"?lP(s.extraReducers):[s.extraReducers],z={...A,...m.sliceCaseReducersByType};return U8(s.initialState,J=>{for(let H in z)J.addCase(H,z[H]);for(let H of m.sliceMatchers)J.addMatcher(H.matcher,H.reducer);for(let H of T)J.addMatcher(H.matcher,H.reducer);P&&J.addDefaultCase(P)})}const y=A=>A,x=new Map,j=new WeakMap;let w;function S(A,T){return w||(w=p()),w(A,T)}function _(){return w||(w=p()),w.getInitialState()}function E(A,T=!1){function P(J){let H=J[A];return typeof H>"u"&&T&&(H=oh(j,P,_)),H}function z(J=y){const H=oh(x,T,()=>new WeakMap);return oh(H,J,()=>{const fe={};for(const[X,K]of Object.entries(s.selectors??{}))fe[X]=K8(K,J,()=>oh(j,J,_),T);return fe})}return{reducerPath:A,getSelectors:z,get selectors(){return z(P)},selectSlice:P}}const C={name:a,reducer:S,actions:m.actionCreators,caseReducers:m.sliceCaseReducersByName,getInitialState:_,...E(l),injectInto(A,{reducerPath:T,...P}={}){const z=T??l;return A.inject({reducerPath:z,reducer:S},P),{...C,...E(z,!0)}}};return C}}function K8(e,t,r,n){function s(a,...l){let u=t(a);return typeof u>"u"&&n&&(u=r()),e(u,...l)}return s.unwrapped=e,s}var Xs=H8();function G8(){function e(t,r){return{_reducerDefinitionType:"asyncThunk",payloadCreator:t,...r}}return e.withTypes=()=>e,{reducer(t){return Object.assign({[t.name](...r){return t(...r)}}[t.name],{_reducerDefinitionType:"reducer"})},preparedReducer(t,r){return{_reducerDefinitionType:"reducerWithPrepare",prepare:t,reducer:r}},asyncThunk:e}}function Y8({type:e,reducerName:t,createNotation:r},n,s){let a,l;if("reducer"in n){if(r&&!X8(n))throw new Error(gi(17));a=n.reducer,l=n.prepare}else a=n;s.addCase(e,a).exposeCaseReducer(t,a).exposeAction(t,l?Di(e,l):Di(e))}function J8(e){return e._reducerDefinitionType==="asyncThunk"}function X8(e){return e._reducerDefinitionType==="reducerWithPrepare"}function Q8({type:e,reducerName:t},r,n,s){if(!s)throw new Error(gi(18));const{payloadCreator:a,fulfilled:l,pending:u,rejected:d,settled:m,options:f}=r,p=s(e,a,f);n.exposeAction(t,p),l&&n.addCase(p.fulfilled,l),u&&n.addCase(p.pending,u),d&&n.addCase(p.rejected,d),m&&n.addMatcher(p.settled,m),n.exposeCaseReducer(t,{fulfilled:l||lh,pending:u||lh,rejected:d||lh,settled:m||lh})}function lh(){}var Z8="task",cP="listener",uP="completed",cb="cancelled",eU=`task-${cb}`,tU=`task-${uP}`,Uv=`${cP}-${cb}`,rU=`${cP}-${uP}`,Xm=class{constructor(e){Gg(this,"name","TaskAbortError");Gg(this,"message");this.code=e,this.message=`${Z8} ${cb} (reason: ${e})`}},ub=(e,t)=>{if(typeof e!="function")throw new TypeError(gi(32))},em=()=>{},dP=(e,t=em)=>(e.catch(t),e),fP=(e,t)=>(e.addEventListener("abort",t,{once:!0}),()=>e.removeEventListener("abort",t)),Ol=(e,t)=>{const r=e.signal;r.aborted||("reason"in r||Object.defineProperty(r,"reason",{enumerable:!0,value:t,configurable:!0,writable:!0}),e.abort(t))},Tl=e=>{if(e.aborted){const{reason:t}=e;throw new Xm(t)}};function hP(e,t){let r=em;return new Promise((n,s)=>{const a=()=>s(new Xm(e.reason));if(e.aborted){a();return}r=fP(e,a),t.finally(()=>r()).then(n,s)}).finally(()=>{r=em})}var nU=async(e,t)=>{try{return await Promise.resolve(),{status:"ok",value:await e()}}catch(r){return{status:r instanceof Xm?"cancelled":"rejected",error:r}}finally{t==null||t()}},tm=e=>t=>dP(hP(e,t).then(r=>(Tl(e),r))),mP=e=>{const t=tm(e);return r=>t(new Promise(n=>setTimeout(n,r)))},{assign:zc}=Object,Rk={},Qm="listenerMiddleware",sU=(e,t)=>{const r=n=>fP(e,()=>Ol(n,e.reason));return(n,s)=>{ub(n);const a=new AbortController;r(a);const l=nU(async()=>{Tl(e),Tl(a.signal);const u=await n({pause:tm(a.signal),delay:mP(a.signal),signal:a.signal});return Tl(a.signal),u},()=>Ol(a,tU));return s!=null&&s.autoJoin&&t.push(l.catch(em)),{result:tm(e)(l),cancel(){Ol(a,eU)}}}},iU=(e,t)=>{const r=async(n,s)=>{Tl(t);let a=()=>{};const u=[new Promise((d,m)=>{let f=e({predicate:n,effect:(p,y)=>{y.unsubscribe(),d([p,y.getState(),y.getOriginalState()])}});a=()=>{f(),m()}})];s!=null&&u.push(new Promise(d=>setTimeout(d,s,null)));try{const d=await hP(t,Promise.race(u));return Tl(t),d}finally{a()}};return(n,s)=>dP(r(n,s))},pP=e=>{let{type:t,actionCreator:r,matcher:n,predicate:s,effect:a}=e;if(t)s=Di(t).match;else if(r)t=r.type,s=r.match;else if(n)s=n;else if(!s)throw new Error(gi(21));return ub(a),{predicate:s,type:t,effect:a}},gP=zc(e=>{const{type:t,predicate:r,effect:n}=pP(e);return{id:W8(),effect:n,type:t,predicate:r,pending:new Set,unsubscribe:()=>{throw new Error(gi(22))}}},{withTypes:()=>gP}),Mk=(e,t)=>{const{type:r,effect:n,predicate:s}=pP(t);return Array.from(e.values()).find(a=>(typeof r=="string"?a.type===r:a.predicate===s)&&a.effect===n)},Bv=e=>{e.pending.forEach(t=>{Ol(t,Uv)})},aU=(e,t)=>()=>{for(const r of t.keys())Bv(r);e.clear()},Fk=(e,t,r)=>{try{e(t,r)}catch(n){setTimeout(()=>{throw n},0)}},yP=zc(Di(`${Qm}/add`),{withTypes:()=>yP}),oU=Di(`${Qm}/removeAll`),vP=zc(Di(`${Qm}/remove`),{withTypes:()=>vP}),lU=(...e)=>{console.error(`${Qm}/error`,...e)},Bd=(e={})=>{const t=new Map,r=new Map,n=x=>{const j=r.get(x)??0;r.set(x,j+1)},s=x=>{const j=r.get(x)??1;j===1?r.delete(x):r.set(x,j-1)},{extra:a,onError:l=lU}=e;ub(l);const u=x=>(x.unsubscribe=()=>t.delete(x.id),t.set(x.id,x),j=>{x.unsubscribe(),j!=null&&j.cancelActive&&Bv(x)}),d=x=>{const j=Mk(t,x)??gP(x);return u(j)};zc(d,{withTypes:()=>d});const m=x=>{const j=Mk(t,x);return j&&(j.unsubscribe(),x.cancelActive&&Bv(j)),!!j};zc(m,{withTypes:()=>m});const f=async(x,j,w,S)=>{const _=new AbortController,E=iU(d,_.signal),C=[];try{x.pending.add(_),n(x),await Promise.resolve(x.effect(j,zc({},w,{getOriginalState:S,condition:(A,T)=>E(A,T).then(Boolean),take:E,delay:mP(_.signal),pause:tm(_.signal),extra:a,signal:_.signal,fork:sU(_.signal,C),unsubscribe:x.unsubscribe,subscribe:()=>{t.set(x.id,x)},cancelActiveListeners:()=>{x.pending.forEach((A,T,P)=>{A!==_&&(Ol(A,Uv),P.delete(A))})},cancel:()=>{Ol(_,Uv),x.pending.delete(_)},throwIfCancelled:()=>{Tl(_.signal)}})))}catch(A){A instanceof Xm||Fk(l,A,{raisedBy:"effect"})}finally{await Promise.all(C),Ol(_,rU),s(x),x.pending.delete(_)}},p=aU(t,r);return{middleware:x=>j=>w=>{if(!JA(w))return j(w);if(yP.match(w))return d(w.payload);if(oU.match(w)){p();return}if(vP.match(w))return m(w.payload);let S=x.getState();const _=()=>{if(S===Rk)throw new Error(gi(23));return S};let E;try{if(E=j(w),t.size>0){const C=x.getState(),A=Array.from(t.values());for(const T of A){let P=!1;try{P=T.predicate(w,C,S)}catch(z){P=!1,Fk(l,z,{raisedBy:"predicate"})}P&&f(T,w,x,_)}}}finally{S=Rk}return E},startListening:d,stopListening:m,clearListeners:p}};function gi(e){return`Minified Redux Toolkit error #${e}; visit https://redux-toolkit.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var cU={layoutType:"horizontal",width:0,height:0,margin:{top:5,right:5,bottom:5,left:5},scale:1},xP=Xs({name:"chartLayout",initialState:cU,reducers:{setLayout(e,t){e.layoutType=t.payload},setChartSize(e,t){e.width=t.payload.width,e.height=t.payload.height},setMargin(e,t){var r,n,s,a;e.margin.top=(r=t.payload.top)!==null&&r!==void 0?r:0,e.margin.right=(n=t.payload.right)!==null&&n!==void 0?n:0,e.margin.bottom=(s=t.payload.bottom)!==null&&s!==void 0?s:0,e.margin.left=(a=t.payload.left)!==null&&a!==void 0?a:0},setScale(e,t){e.scale=t.payload}}}),{setMargin:uU,setLayout:dU,setChartSize:fU,setScale:hU}=xP.actions,mU=xP.reducer;function bP(e,t,r){return Array.isArray(e)&&e&&t+r!==0?e.slice(t,r+1):e}function Lk(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Rc(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Lk(Object(r),!0).forEach(function(n){pU(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Lk(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function pU(e,t,r){return(t=gU(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function gU(e){var t=yU(e,"string");return typeof t=="symbol"?t:t+""}function yU(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Ds(e,t,r){return Xn(e)||Xn(t)?r:ka(t)?Vc(e,t,r):typeof t=="function"?t(e):r}var vU=(e,t,r)=>{if(t&&r){var{width:n,height:s}=r,{align:a,verticalAlign:l,layout:u}=t;if((u==="vertical"||u==="horizontal"&&l==="middle")&&a!=="center"&&Nt(e[a]))return Rc(Rc({},e),{},{[a]:e[a]+(n||0)});if((u==="horizontal"||u==="vertical"&&a==="center")&&l!=="middle"&&Nt(e[l]))return Rc(Rc({},e),{},{[l]:e[l]+(s||0)})}return e},ql=(e,t)=>e==="horizontal"&&t==="xAxis"||e==="vertical"&&t==="yAxis"||e==="centric"&&t==="angleAxis"||e==="radial"&&t==="radiusAxis",zk=1e-4,xU=e=>{var t=e.domain();if(!(!t||t.length<=2)){var r=t.length,n=e.range(),s=Math.min(n[0],n[1])-zk,a=Math.max(n[0],n[1])+zk,l=e(t[0]),u=e(t[r-1]);(l<s||l>a||u<s||u>a)&&e.domain([t[0],t[r-1]])}},bU=(e,t)=>{if(!t||t.length!==2||!Nt(t[0])||!Nt(t[1]))return e;var r=Math.min(t[0],t[1]),n=Math.max(t[0],t[1]),s=[e[0],e[1]];return(!Nt(e[0])||e[0]<r)&&(s[0]=r),(!Nt(e[1])||e[1]>n)&&(s[1]=n),s[0]>n&&(s[0]=n),s[1]<r&&(s[1]=r),s},wU=e=>{var t=e.length;if(!(t<=0))for(var r=0,n=e[0].length;r<n;++r)for(var s=0,a=0,l=0;l<t;++l){var u=Na(e[l][r][1])?e[l][r][0]:e[l][r][1];u>=0?(e[l][r][0]=s,e[l][r][1]=s+u,s=e[l][r][1]):(e[l][r][0]=a,e[l][r][1]=a+u,a=e[l][r][1])}},jU=e=>{var t=e.length;if(!(t<=0))for(var r=0,n=e[0].length;r<n;++r)for(var s=0,a=0;a<t;++a){var l=Na(e[a][r][1])?e[a][r][0]:e[a][r][1];l>=0?(e[a][r][0]=s,e[a][r][1]=s+l,s=e[a][r][1]):(e[a][r][0]=0,e[a][r][1]=0)}},SU={sign:wU,expand:ZL,none:Wc,silhouette:ez,wiggle:tz,positive:jU},NU=(e,t,r)=>{var n=SU[r],s=QL().keys(t).value((a,l)=>Number(Ds(a,l,0))).order(Tv).offset(n);return s(e)};function kU(e){return e==null?void 0:String(e)}var Uk=e=>{var{axis:t,ticks:r,offset:n,bandSize:s,entry:a,index:l}=e;if(t.type==="category")return r[l]?r[l].coordinate+n:null;var u=Ds(a,t.dataKey,t.scale.domain()[l]);return Xn(u)?null:t.scale(u)-s/2+n},_U=e=>{var{numericAxis:t}=e,r=t.scale.domain();if(t.type==="number"){var n=Math.min(r[0],r[1]),s=Math.max(r[0],r[1]);return n<=0&&s>=0?0:s<0?s:n}return r[0]},CU=e=>{var t=e.flat(2).filter(Nt);return[Math.min(...t),Math.max(...t)]},EU=e=>[e[0]===1/0?0:e[0],e[1]===-1/0?0:e[1]],AU=(e,t,r)=>{if(e!=null)return EU(Object.keys(e).reduce((n,s)=>{var a=e[s],{stackedData:l}=a,u=l.reduce((d,m)=>{var f=bP(m,t,r),p=CU(f);return[Math.min(d[0],p[0]),Math.max(d[1],p[1])]},[1/0,-1/0]);return[Math.min(u[0],n[0]),Math.max(u[1],n[1])]},[1/0,-1/0]))},Bk=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,Wk=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,rm=(e,t,r)=>{if(e&&e.scale&&e.scale.bandwidth){var n=e.scale.bandwidth();if(!r||n>0)return n}if(e&&t&&t.length>=2){for(var s=Km(t,f=>f.coordinate),a=1/0,l=1,u=s.length;l<u;l++){var d=s[l],m=s[l-1];a=Math.min((d.coordinate||0)-(m.coordinate||0),a)}return a===1/0?0:a}return r?void 0:0};function Vk(e){var{tooltipEntrySettings:t,dataKey:r,payload:n,value:s,name:a}=e;return Rc(Rc({},t),{},{dataKey:r,payload:n,value:s,name:a})}function wP(e,t){if(e)return String(e);if(typeof t=="string")return t}var PU=(e,t)=>{if(t==="horizontal")return e.chartX;if(t==="vertical")return e.chartY},OU=(e,t)=>t==="centric"?e.angle:e.radius,fo=e=>e.layout.width,ho=e=>e.layout.height,TU=e=>e.layout.scale,jP=e=>e.layout.margin,Zm=be(e=>e.cartesianAxis.xAxis,e=>Object.values(e)),ep=be(e=>e.cartesianAxis.yAxis,e=>Object.values(e)),IU="data-recharts-item-index",DU="data-recharts-item-data-key",Wd=60;function qk(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function ch(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?qk(Object(r),!0).forEach(function(n){$U(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):qk(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function $U(e,t,r){return(t=RU(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function RU(e){var t=MU(e,"string");return typeof t=="symbol"?t:t+""}function MU(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var FU=e=>e.brush.height;function LU(e){var t=ep(e);return t.reduce((r,n)=>{if(n.orientation==="left"&&!n.mirror&&!n.hide){var s=typeof n.width=="number"?n.width:Wd;return r+s}return r},0)}function zU(e){var t=ep(e);return t.reduce((r,n)=>{if(n.orientation==="right"&&!n.mirror&&!n.hide){var s=typeof n.width=="number"?n.width:Wd;return r+s}return r},0)}function UU(e){var t=Zm(e);return t.reduce((r,n)=>n.orientation==="top"&&!n.mirror&&!n.hide?r+n.height:r,0)}function BU(e){var t=Zm(e);return t.reduce((r,n)=>n.orientation==="bottom"&&!n.mirror&&!n.hide?r+n.height:r,0)}var Qn=be([fo,ho,jP,FU,LU,zU,UU,BU,KA,g8],(e,t,r,n,s,a,l,u,d,m)=>{var f={left:(r.left||0)+s,right:(r.right||0)+a},p={top:(r.top||0)+l,bottom:(r.bottom||0)+u},y=ch(ch({},p),f),x=y.bottom;y.bottom+=n,y=vU(y,d,m);var j=e-y.left-y.right,w=t-y.top-y.bottom;return ch(ch({brushBottom:x},y),{},{width:Math.max(j,0),height:Math.max(w,0)})}),WU=be(Qn,e=>({x:e.left,y:e.top,width:e.width,height:e.height})),db=be(fo,ho,(e,t)=>({x:0,y:0,width:e,height:t})),VU=v.createContext(null),xi=()=>v.useContext(VU)!=null,tp=e=>e.brush,rp=be([tp,Qn,jP],(e,t,r)=>({height:e.height,x:Nt(e.x)?e.x:t.left,y:Nt(e.y)?e.y:t.top+t.height+t.brushBottom-((r==null?void 0:r.bottom)||0),width:Nt(e.width)?e.width:t.width})),g0={},y0={},v0={},Hk;function qU(){return Hk||(Hk=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r,n,{signal:s,edges:a}={}){let l,u=null;const d=a!=null&&a.includes("leading"),m=a==null||a.includes("trailing"),f=()=>{u!==null&&(r.apply(l,u),l=void 0,u=null)},p=()=>{m&&f(),w()};let y=null;const x=()=>{y!=null&&clearTimeout(y),y=setTimeout(()=>{y=null,p()},n)},j=()=>{y!==null&&(clearTimeout(y),y=null)},w=()=>{j(),l=void 0,u=null},S=()=>{f()},_=function(...E){if(s!=null&&s.aborted)return;l=this,u=E;const C=y==null;x(),d&&C&&f()};return _.schedule=x,_.cancel=w,_.flush=S,s==null||s.addEventListener("abort",w,{once:!0}),_}e.debounce=t})(v0)),v0}var Kk;function HU(){return Kk||(Kk=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=qU();function r(n,s=0,a={}){typeof a!="object"&&(a={});const{leading:l=!1,trailing:u=!0,maxWait:d}=a,m=Array(2);l&&(m[0]="leading"),u&&(m[1]="trailing");let f,p=null;const y=t.debounce(function(...w){f=n.apply(this,w),p=null},s,{edges:m}),x=function(...w){return d!=null&&(p===null&&(p=Date.now()),Date.now()-p>=d)?(f=n.apply(this,w),p=Date.now(),y.cancel(),y.schedule(),f):(y.apply(this,w),f)},j=()=>(y.flush(),f);return x.cancel=y.cancel,x.flush=j,x}e.debounce=r})(y0)),y0}var Gk;function KU(){return Gk||(Gk=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=HU();function r(n,s=0,a={}){const{leading:l=!0,trailing:u=!0}=a;return t.debounce(n,s,{leading:l,maxWait:s,trailing:u})}e.throttle=r})(g0)),g0}var x0,Yk;function GU(){return Yk||(Yk=1,x0=KU().throttle),x0}var YU=GU();const JU=ia(YU);var Jk=function(t,r){for(var n=arguments.length,s=new Array(n>2?n-2:0),a=2;a<n;a++)s[a-2]=arguments[a]},SP=(e,t,r)=>{var{width:n="100%",height:s="100%",aspect:a,maxHeight:l}=r,u=no(n)?e:Number(n),d=no(s)?t:Number(s);return a&&a>0&&(u?d=u/a:d&&(u=d*a),l&&d!=null&&d>l&&(d=l)),{calculatedWidth:u,calculatedHeight:d}},XU={width:0,height:0,overflow:"visible"},QU={width:0,overflowX:"visible"},ZU={height:0,overflowY:"visible"},eB={},tB=e=>{var{width:t,height:r}=e,n=no(t),s=no(r);return n&&s?XU:n?QU:s?ZU:eB};function rB(e){var{width:t,height:r,aspect:n}=e,s=t,a=r;return s===void 0&&a===void 0?(s="100%",a="100%"):s===void 0?s=n&&n>0?void 0:"100%":a===void 0&&(a=n&&n>0?void 0:"100%"),{width:s,height:a}}function mn(e){return Number.isFinite(e)}function Go(e){return typeof e=="number"&&e>0&&Number.isFinite(e)}function Wv(){return Wv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Wv.apply(null,arguments)}function Xk(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Qk(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Xk(Object(r),!0).forEach(function(n){nB(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Xk(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function nB(e,t,r){return(t=sB(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function sB(e){var t=iB(e,"string");return typeof t=="symbol"?t:t+""}function iB(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var NP=v.createContext({width:-1,height:-1});function aB(e){return Go(e.width)&&Go(e.height)}function kP(e){var{children:t,width:r,height:n}=e,s=v.useMemo(()=>({width:r,height:n}),[r,n]);return aB(s)?v.createElement(NP.Provider,{value:s},t):null}var fb=()=>v.useContext(NP),oB=v.forwardRef((e,t)=>{var{aspect:r,initialDimension:n={width:-1,height:-1},width:s,height:a,minWidth:l=0,minHeight:u,maxHeight:d,children:m,debounce:f=0,id:p,className:y,onResize:x,style:j={}}=e,w=v.useRef(null),S=v.useRef();S.current=x,v.useImperativeHandle(t,()=>w.current);var[_,E]=v.useState({containerWidth:n.width,containerHeight:n.height}),C=v.useCallback((J,H)=>{E(fe=>{var X=Math.round(J),K=Math.round(H);return fe.containerWidth===X&&fe.containerHeight===K?fe:{containerWidth:X,containerHeight:K}})},[]);v.useEffect(()=>{if(w.current==null||typeof ResizeObserver>"u")return ou;var J=K=>{var ae,{width:U,height:ne}=K[0].contentRect;C(U,ne),(ae=S.current)===null||ae===void 0||ae.call(S,U,ne)};f>0&&(J=JU(J,f,{trailing:!0,leading:!1}));var H=new ResizeObserver(J),{width:fe,height:X}=w.current.getBoundingClientRect();return C(fe,X),H.observe(w.current),()=>{H.disconnect()}},[C,f]);var{containerWidth:A,containerHeight:T}=_;Jk(!r||r>0,"The aspect(%s) must be greater than zero.",r);var{calculatedWidth:P,calculatedHeight:z}=SP(A,T,{width:s,height:a,aspect:r,maxHeight:d});return Jk(P!=null&&P>0||z!=null&&z>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,P,z,s,a,l,u,r),v.createElement("div",{id:p?"".concat(p):void 0,className:Lr("recharts-responsive-container",y),style:Qk(Qk({},j),{},{width:s,height:a,minWidth:l,minHeight:u,maxHeight:d}),ref:w},v.createElement("div",{style:tB({width:s,height:a})},v.createElement(kP,{width:P,height:z},m)))}),lB=v.forwardRef((e,t)=>{var r=fb();if(Go(r.width)&&Go(r.height))return e.children;var{width:n,height:s}=rB({width:e.width,height:e.height,aspect:e.aspect}),{calculatedWidth:a,calculatedHeight:l}=SP(void 0,void 0,{width:n,height:s,aspect:e.aspect,maxHeight:e.maxHeight});return Nt(a)&&Nt(l)?v.createElement(kP,{width:a,height:l},e.children):v.createElement(oB,Wv({},e,{width:n,height:s,ref:t}))});function _P(e){if(e)return{x:e.x,y:e.y,upperWidth:"upperWidth"in e?e.upperWidth:e.width,lowerWidth:"lowerWidth"in e?e.lowerWidth:e.width,width:e.width,height:e.height}}var np=()=>{var e,t=xi(),r=xt(WU),n=xt(rp),s=(e=xt(tp))===null||e===void 0?void 0:e.padding;return!t||!n||!s?r:{width:n.width-s.left-s.right,height:n.height-s.top-s.bottom,x:s.left,y:s.top}},cB={top:0,bottom:0,left:0,right:0,width:0,height:0,brushBottom:0},uB=()=>{var e;return(e=xt(Qn))!==null&&e!==void 0?e:cB},dB=()=>xt(fo),fB=()=>xt(ho),xr=e=>e.layout.layoutType,sp=()=>xt(xr),hB=()=>{var e=sp();return e!==void 0},ip=e=>{var t=pn(),r=xi(),{width:n,height:s}=e,a=fb(),l=n,u=s;return a&&(l=a.width>0?a.width:n,u=a.height>0?a.height:s),v.useEffect(()=>{!r&&Go(l)&&Go(u)&&t(fU({width:l,height:u}))},[t,r,l,u]),null},mB={settings:{layout:"horizontal",align:"center",verticalAlign:"middle",itemSorter:"value"},size:{width:0,height:0},payload:[]},CP=Xs({name:"legend",initialState:mB,reducers:{setLegendSize(e,t){e.size.width=t.payload.width,e.size.height=t.payload.height},setLegendSettings(e,t){e.settings.align=t.payload.align,e.settings.layout=t.payload.layout,e.settings.verticalAlign=t.payload.verticalAlign,e.settings.itemSorter=t.payload.itemSorter},addLegendPayload:{reducer(e,t){e.payload.push(t.payload)},prepare:Rn()},removeLegendPayload:{reducer(e,t){var r=Qa(e).payload.indexOf(t.payload);r>-1&&e.payload.splice(r,1)},prepare:Rn()}}}),{setLegendSize:vee,setLegendSettings:xee,addLegendPayload:pB,removeLegendPayload:gB}=CP.actions,yB=CP.reducer;function Vv(){return Vv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Vv.apply(null,arguments)}function Zk(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function b0(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Zk(Object(r),!0).forEach(function(n){vB(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Zk(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function vB(e,t,r){return(t=xB(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function xB(e){var t=bB(e,"string");return typeof t=="symbol"?t:t+""}function bB(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function wB(e){return Array.isArray(e)&&ka(e[0])&&ka(e[1])?e.join(" ~ "):e}var jB=e=>{var{separator:t=" : ",contentStyle:r={},itemStyle:n={},labelStyle:s={},payload:a,formatter:l,itemSorter:u,wrapperClassName:d,labelClassName:m,label:f,labelFormatter:p,accessibilityLayer:y=!1}=e,x=()=>{if(a&&a.length){var T={padding:0,margin:0},P=(u?Km(a,u):a).map((z,J)=>{if(z.type==="none")return null;var H=z.formatter||l||wB,{value:fe,name:X}=z,K=fe,ae=X;if(H){var U=H(fe,X,z,J,a);if(Array.isArray(U))[K,ae]=U;else if(U!=null)K=U;else return null}var ne=b0({display:"block",paddingTop:4,paddingBottom:4,color:z.color||"#000"},n);return v.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(J),style:ne},ka(ae)?v.createElement("span",{className:"recharts-tooltip-item-name"},ae):null,ka(ae)?v.createElement("span",{className:"recharts-tooltip-item-separator"},t):null,v.createElement("span",{className:"recharts-tooltip-item-value"},K),v.createElement("span",{className:"recharts-tooltip-item-unit"},z.unit||""))});return v.createElement("ul",{className:"recharts-tooltip-item-list",style:T},P)}return null},j=b0({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},r),w=b0({margin:0},s),S=!Xn(f),_=S?f:"",E=Lr("recharts-default-tooltip",d),C=Lr("recharts-tooltip-label",m);S&&p&&a!==void 0&&a!==null&&(_=p(f,a));var A=y?{role:"status","aria-live":"assertive"}:{};return v.createElement("div",Vv({className:E,style:j},A),v.createElement("p",{className:C,style:w},v.isValidElement(_)?_:"".concat(_)),x())},Hu="recharts-tooltip-wrapper",SB={visibility:"hidden"};function NB(e){var{coordinate:t,translateX:r,translateY:n}=e;return Lr(Hu,{["".concat(Hu,"-right")]:Nt(r)&&t&&Nt(t.x)&&r>=t.x,["".concat(Hu,"-left")]:Nt(r)&&t&&Nt(t.x)&&r<t.x,["".concat(Hu,"-bottom")]:Nt(n)&&t&&Nt(t.y)&&n>=t.y,["".concat(Hu,"-top")]:Nt(n)&&t&&Nt(t.y)&&n<t.y})}function e2(e){var{allowEscapeViewBox:t,coordinate:r,key:n,offsetTopLeft:s,position:a,reverseDirection:l,tooltipDimension:u,viewBox:d,viewBoxDimension:m}=e;if(a&&Nt(a[n]))return a[n];var f=r[n]-u-(s>0?s:0),p=r[n]+s;if(t[n])return l[n]?f:p;var y=d[n];if(y==null)return 0;if(l[n]){var x=f,j=y;return x<j?Math.max(p,y):Math.max(f,y)}if(m==null)return 0;var w=p+u,S=y+m;return w>S?Math.max(f,y):Math.max(p,y)}function kB(e){var{translateX:t,translateY:r,useTranslate3d:n}=e;return{transform:n?"translate3d(".concat(t,"px, ").concat(r,"px, 0)"):"translate(".concat(t,"px, ").concat(r,"px)")}}function _B(e){var{allowEscapeViewBox:t,coordinate:r,offsetTopLeft:n,position:s,reverseDirection:a,tooltipBox:l,useTranslate3d:u,viewBox:d}=e,m,f,p;return l.height>0&&l.width>0&&r?(f=e2({allowEscapeViewBox:t,coordinate:r,key:"x",offsetTopLeft:n,position:s,reverseDirection:a,tooltipDimension:l.width,viewBox:d,viewBoxDimension:d.width}),p=e2({allowEscapeViewBox:t,coordinate:r,key:"y",offsetTopLeft:n,position:s,reverseDirection:a,tooltipDimension:l.height,viewBox:d,viewBoxDimension:d.height}),m=kB({translateX:f,translateY:p,useTranslate3d:u})):m=SB,{cssProperties:m,cssClasses:NB({translateX:f,translateY:p,coordinate:r})}}function t2(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function uh(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?t2(Object(r),!0).forEach(function(n){qv(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):t2(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function qv(e,t,r){return(t=CB(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function CB(e){var t=EB(e,"string");return typeof t=="symbol"?t:t+""}function EB(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class AB extends v.PureComponent{constructor(){super(...arguments),qv(this,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0}}),qv(this,"handleKeyDown",t=>{if(t.key==="Escape"){var r,n,s,a;this.setState({dismissed:!0,dismissedAtCoordinate:{x:(r=(n=this.props.coordinate)===null||n===void 0?void 0:n.x)!==null&&r!==void 0?r:0,y:(s=(a=this.props.coordinate)===null||a===void 0?void 0:a.y)!==null&&s!==void 0?s:0}})}})}componentDidMount(){document.addEventListener("keydown",this.handleKeyDown)}componentWillUnmount(){document.removeEventListener("keydown",this.handleKeyDown)}componentDidUpdate(){var t,r;this.state.dismissed&&(((t=this.props.coordinate)===null||t===void 0?void 0:t.x)!==this.state.dismissedAtCoordinate.x||((r=this.props.coordinate)===null||r===void 0?void 0:r.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}render(){var{active:t,allowEscapeViewBox:r,animationDuration:n,animationEasing:s,children:a,coordinate:l,hasPayload:u,isAnimationActive:d,offset:m,position:f,reverseDirection:p,useTranslate3d:y,viewBox:x,wrapperStyle:j,lastBoundingBox:w,innerRef:S,hasPortalFromProps:_}=this.props,{cssClasses:E,cssProperties:C}=_B({allowEscapeViewBox:r,coordinate:l,offsetTopLeft:m,position:f,reverseDirection:p,tooltipBox:{height:w.height,width:w.width},useTranslate3d:y,viewBox:x}),A=_?{}:uh(uh({transition:d&&t?"transform ".concat(n,"ms ").concat(s):void 0},C),{},{pointerEvents:"none",visibility:!this.state.dismissed&&t&&u?"visible":"hidden",position:"absolute",top:0,left:0}),T=uh(uh({},A),{},{visibility:!this.state.dismissed&&t&&u?"visible":"hidden"},j);return v.createElement("div",{xmlns:"http://www.w3.org/1999/xhtml",tabIndex:-1,className:E,style:T,ref:S},a)}}var PB=()=>!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout),lu={devToolsEnabled:!1,isSsr:PB()},EP=()=>{var e;return(e=xt(t=>t.rootProps.accessibilityLayer))!==null&&e!==void 0?e:!0};function Hv(){return Hv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Hv.apply(null,arguments)}function r2(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function n2(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?r2(Object(r),!0).forEach(function(n){OB(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):r2(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function OB(e,t,r){return(t=TB(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function TB(e){var t=IB(e,"string");return typeof t=="symbol"?t:t+""}function IB(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var s2={curveBasisClosed:UL,curveBasisOpen:BL,curveBasis:zL,curveBumpX:_L,curveBumpY:CL,curveLinearClosed:WL,curveLinear:qm,curveMonotoneX:VL,curveMonotoneY:qL,curveNatural:HL,curveStep:KL,curveStepAfter:YL,curveStepBefore:GL},nm=e=>mn(e.x)&&mn(e.y),i2=e=>e.base!=null&&nm(e.base)&&nm(e),Ku=e=>e.x,Gu=e=>e.y,DB=(e,t)=>{if(typeof e=="function")return e;var r="curve".concat(zd(e));return(r==="curveMonotone"||r==="curveBump")&&t?s2["".concat(r).concat(t==="vertical"?"Y":"X")]:s2[r]||qm},$B=e=>{var{type:t="linear",points:r=[],baseLine:n,layout:s,connectNulls:a=!1}=e,l=DB(t,s),u=a?r.filter(nm):r,d;if(Array.isArray(n)){var m=r.map((x,j)=>n2(n2({},x),{},{base:n[j]}));s==="vertical"?d=nh().y(Gu).x1(Ku).x0(x=>x.base.x):d=nh().x(Ku).y1(Gu).y0(x=>x.base.y);var f=d.defined(i2).curve(l),p=a?m.filter(i2):m;return f(p)}s==="vertical"&&Nt(n)?d=nh().y(Gu).x1(Ku).x0(n):Nt(n)?d=nh().x(Ku).y1(Gu).y0(n):d=xA().x(Ku).y(Gu);var y=d.defined(nm).curve(l);return y(u)},AP=e=>{var{className:t,points:r,path:n,pathRef:s}=e;if((!r||!r.length)&&!n)return null;var a=r&&r.length?$B(e):n;return v.createElement("path",Hv({},Ko(e),xz(e),{className:Lr("recharts-curve",t),d:a===null?void 0:a,ref:s}))},RB=["x","y","top","left","width","height","className"];function Kv(){return Kv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Kv.apply(null,arguments)}function a2(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function MB(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?a2(Object(r),!0).forEach(function(n){FB(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):a2(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function FB(e,t,r){return(t=LB(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function LB(e){var t=zB(e,"string");return typeof t=="symbol"?t:t+""}function zB(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function UB(e,t){if(e==null)return{};var r,n,s=BB(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function BB(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var WB=(e,t,r,n,s,a)=>"M".concat(e,",").concat(s,"v").concat(n,"M").concat(a,",").concat(t,"h").concat(r),VB=e=>{var{x:t=0,y:r=0,top:n=0,left:s=0,width:a=0,height:l=0,className:u}=e,d=UB(e,RB),m=MB({x:t,y:r,top:n,left:s,width:a,height:l},d);return!Nt(t)||!Nt(r)||!Nt(a)||!Nt(l)||!Nt(n)||!Nt(s)?null:v.createElement("path",Kv({},Ii(m),{className:Lr("recharts-cross",u),d:WB(t,r,a,l,n,s)}))};function qB(e,t,r,n){var s=n/2;return{stroke:"none",fill:"#ccc",x:e==="horizontal"?t.x-s:r.left+.5,y:e==="horizontal"?r.top+.5:t.y-s,width:e==="horizontal"?n:r.width-1,height:e==="horizontal"?r.height-1:n}}function o2(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function l2(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?o2(Object(r),!0).forEach(function(n){HB(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):o2(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function HB(e,t,r){return(t=KB(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function KB(e){var t=GB(e,"string");return typeof t=="symbol"?t:t+""}function GB(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var YB=e=>e.replace(/([A-Z])/g,t=>"-".concat(t.toLowerCase())),PP=(e,t,r)=>e.map(n=>"".concat(YB(n)," ").concat(t,"ms ").concat(r)).join(","),JB=(e,t)=>[Object.keys(e),Object.keys(t)].reduce((r,n)=>r.filter(s=>n.includes(s))),_d=(e,t)=>Object.keys(t).reduce((r,n)=>l2(l2({},r),{},{[n]:e(n,t[n])}),{});function c2(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function $n(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?c2(Object(r),!0).forEach(function(n){XB(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):c2(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function XB(e,t,r){return(t=QB(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function QB(e){var t=ZB(e,"string");return typeof t=="symbol"?t:t+""}function ZB(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var sm=(e,t,r)=>e+(t-e)*r,Gv=e=>{var{from:t,to:r}=e;return t!==r},OP=(e,t,r)=>{var n=_d((s,a)=>{if(Gv(a)){var[l,u]=e(a.from,a.to,a.velocity);return $n($n({},a),{},{from:l,velocity:u})}return a},t);return r<1?_d((s,a)=>Gv(a)?$n($n({},a),{},{velocity:sm(a.velocity,n[s].velocity,r),from:sm(a.from,n[s].from,r)}):a,t):OP(e,n,r-1)};function e7(e,t,r,n,s,a){var l,u=n.reduce((y,x)=>$n($n({},y),{},{[x]:{from:e[x],velocity:0,to:t[x]}}),{}),d=()=>_d((y,x)=>x.from,u),m=()=>!Object.values(u).filter(Gv).length,f=null,p=y=>{l||(l=y);var x=y-l,j=x/r.dt;u=OP(r,u,j),s($n($n($n({},e),t),d())),l=y,m()||(f=a.setTimeout(p))};return()=>(f=a.setTimeout(p),()=>{var y;(y=f)===null||y===void 0||y()})}function t7(e,t,r,n,s,a,l){var u=null,d=s.reduce((p,y)=>$n($n({},p),{},{[y]:[e[y],t[y]]}),{}),m,f=p=>{m||(m=p);var y=(p-m)/n,x=_d((w,S)=>sm(...S,r(y)),d);if(a($n($n($n({},e),t),x)),y<1)u=l.setTimeout(f);else{var j=_d((w,S)=>sm(...S,r(1)),d);a($n($n($n({},e),t),j))}};return()=>(u=l.setTimeout(f),()=>{var p;(p=u)===null||p===void 0||p()})}const r7=(e,t,r,n,s,a)=>{var l=JB(e,t);return r==null?()=>(s($n($n({},e),t)),()=>{}):r.isStepper===!0?e7(e,t,r,l,s,a):t7(e,t,r,n,l,s,a)};var im=1e-4,TP=(e,t)=>[0,3*e,3*t-6*e,3*e-3*t+1],IP=(e,t)=>e.map((r,n)=>r*t**n).reduce((r,n)=>r+n),u2=(e,t)=>r=>{var n=TP(e,t);return IP(n,r)},n7=(e,t)=>r=>{var n=TP(e,t),s=[...n.map((a,l)=>a*l).slice(1),0];return IP(s,r)},s7=function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];if(r.length===1)switch(r[0]){case"linear":return[0,0,1,1];case"ease":return[.25,.1,.25,1];case"ease-in":return[.42,0,1,1];case"ease-out":return[.42,0,.58,1];case"ease-in-out":return[0,0,.58,1];default:{var s,a=r[0].split("(");if(a[0]==="cubic-bezier"&&((s=a[1])===null||s===void 0?void 0:s.split(")")[0].split(",").length)===4){var l=a[1].split(")")[0].split(",").map(u=>parseFloat(u));return[l[0],l[1],l[2],l[3]]}}}return r.length===4?r:[0,0,1,1]},i7=(e,t,r,n)=>{var s=u2(e,r),a=u2(t,n),l=n7(e,r),u=m=>m>1?1:m<0?0:m,d=m=>{for(var f=m>1?1:m,p=f,y=0;y<8;++y){var x=s(p)-f,j=l(p);if(Math.abs(x-f)<im||j<im)return a(p);p=u(p-x/j)}return a(p)};return d.isStepper=!1,d},d2=function(){return i7(...s7(...arguments))},a7=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},{stiff:r=100,damping:n=8,dt:s=17}=t,a=(l,u,d)=>{var m=-(l-u)*r,f=d*n,p=d+(m-f)*s/1e3,y=d*s/1e3+l;return Math.abs(y-u)<im&&Math.abs(p)<im?[u,0]:[y,p]};return a.isStepper=!0,a.dt=s,a},o7=e=>{if(typeof e=="string")switch(e){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return d2(e);case"spring":return a7();default:if(e.split("(")[0]==="cubic-bezier")return d2(e)}return typeof e=="function"?e:null};function l7(e){var t,r=()=>null,n=!1,s=null,a=l=>{if(!n){if(Array.isArray(l)){if(!l.length)return;var u=l,[d,...m]=u;if(typeof d=="number"){s=e.setTimeout(a.bind(null,m),d);return}a(d),s=e.setTimeout(a.bind(null,m));return}typeof l=="string"&&(t=l,r(t)),typeof l=="object"&&(t=l,r(t)),typeof l=="function"&&l()}};return{stop:()=>{n=!0},start:l=>{n=!1,s&&(s(),s=null),a(l)},subscribe:l=>(r=l,()=>{r=()=>null}),getTimeoutController:()=>e}}class c7{setTimeout(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=performance.now(),s=null,a=l=>{l-n>=r?t(l):typeof requestAnimationFrame=="function"&&(s=requestAnimationFrame(a))};return s=requestAnimationFrame(a),()=>{s!=null&&cancelAnimationFrame(s)}}}function u7(){return l7(new c7)}var d7=v.createContext(u7);function f7(e,t){var r=v.useContext(d7);return v.useMemo(()=>t??r(e),[e,t,r])}var h7={begin:0,duration:1e3,easing:"ease",isActive:!0,canBegin:!0,onAnimationEnd:()=>{},onAnimationStart:()=>{}},f2={t:0},w0={t:1};function hb(e){var t=Mi(e,h7),{isActive:r,canBegin:n,duration:s,easing:a,begin:l,onAnimationEnd:u,onAnimationStart:d,children:m}=t,f=f7(t.animationId,t.animationManager),[p,y]=v.useState(r?f2:w0),x=v.useRef(null);return v.useEffect(()=>{r||y(w0)},[r]),v.useEffect(()=>{if(!r||!n)return ou;var j=r7(f2,w0,o7(a),s,y,f.getTimeoutController()),w=()=>{x.current=j()};return f.start([d,l,w,s,u]),()=>{f.stop(),x.current&&x.current(),u()}},[r,n,s,a,l,d,u,f]),m(p.t)}function mb(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"animation-",r=v.useRef(jd(t)),n=v.useRef(e);return n.current!==e&&(r.current=jd(t),n.current=e),r.current}var m7=["radius"],p7=["radius"];function h2(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function m2(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?h2(Object(r),!0).forEach(function(n){g7(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):h2(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function g7(e,t,r){return(t=y7(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function y7(e){var t=v7(e,"string");return typeof t=="symbol"?t:t+""}function v7(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function am(){return am=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},am.apply(null,arguments)}function p2(e,t){if(e==null)return{};var r,n,s=x7(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function x7(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var g2=(e,t,r,n,s)=>{var a=Math.min(Math.abs(r)/2,Math.abs(n)/2),l=n>=0?1:-1,u=r>=0?1:-1,d=n>=0&&r>=0||n<0&&r<0?1:0,m;if(a>0&&s instanceof Array){for(var f=[0,0,0,0],p=0,y=4;p<y;p++)f[p]=s[p]>a?a:s[p];m="M".concat(e,",").concat(t+l*f[0]),f[0]>0&&(m+="A ".concat(f[0],",").concat(f[0],",0,0,").concat(d,",").concat(e+u*f[0],",").concat(t)),m+="L ".concat(e+r-u*f[1],",").concat(t),f[1]>0&&(m+="A ".concat(f[1],",").concat(f[1],",0,0,").concat(d,`,
        `).concat(e+r,",").concat(t+l*f[1])),m+="L ".concat(e+r,",").concat(t+n-l*f[2]),f[2]>0&&(m+="A ".concat(f[2],",").concat(f[2],",0,0,").concat(d,`,
        `).concat(e+r-u*f[2],",").concat(t+n)),m+="L ".concat(e+u*f[3],",").concat(t+n),f[3]>0&&(m+="A ".concat(f[3],",").concat(f[3],",0,0,").concat(d,`,
        `).concat(e,",").concat(t+n-l*f[3])),m+="Z"}else if(a>0&&s===+s&&s>0){var x=Math.min(a,s);m="M ".concat(e,",").concat(t+l*x,`
            A `).concat(x,",").concat(x,",0,0,").concat(d,",").concat(e+u*x,",").concat(t,`
            L `).concat(e+r-u*x,",").concat(t,`
            A `).concat(x,",").concat(x,",0,0,").concat(d,",").concat(e+r,",").concat(t+l*x,`
            L `).concat(e+r,",").concat(t+n-l*x,`
            A `).concat(x,",").concat(x,",0,0,").concat(d,",").concat(e+r-u*x,",").concat(t+n,`
            L `).concat(e+u*x,",").concat(t+n,`
            A `).concat(x,",").concat(x,",0,0,").concat(d,",").concat(e,",").concat(t+n-l*x," Z")}else m="M ".concat(e,",").concat(t," h ").concat(r," v ").concat(n," h ").concat(-r," Z");return m},y2={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},DP=e=>{var t=Mi(e,y2),r=v.useRef(null),[n,s]=v.useState(-1);v.useEffect(()=>{if(r.current&&r.current.getTotalLength)try{var ie=r.current.getTotalLength();ie&&s(ie)}catch{}},[]);var{x:a,y:l,width:u,height:d,radius:m,className:f}=t,{animationEasing:p,animationDuration:y,animationBegin:x,isAnimationActive:j,isUpdateAnimationActive:w}=t,S=v.useRef(u),_=v.useRef(d),E=v.useRef(a),C=v.useRef(l),A=v.useMemo(()=>({x:a,y:l,width:u,height:d,radius:m}),[a,l,u,d,m]),T=mb(A,"rectangle-");if(a!==+a||l!==+l||u!==+u||d!==+d||u===0||d===0)return null;var P=Lr("recharts-rectangle",f);if(!w){var z=Ii(t),{radius:J}=z,H=p2(z,m7);return v.createElement("path",am({},H,{radius:typeof m=="number"?m:void 0,className:P,d:g2(a,l,u,d,m)}))}var fe=S.current,X=_.current,K=E.current,ae=C.current,U="0px ".concat(n===-1?1:n,"px"),ne="".concat(n,"px 0px"),G=PP(["strokeDasharray"],y,typeof p=="string"?p:y2.animationEasing);return v.createElement(hb,{animationId:T,key:T,canBegin:n>0,duration:y,easing:p,isActive:w,begin:x},ie=>{var te=fs(fe,u,ie),W=fs(X,d,ie),se=fs(K,a,ie),I=fs(ae,l,ie);r.current&&(S.current=te,_.current=W,E.current=se,C.current=I);var B;j?ie>0?B={transition:G,strokeDasharray:ne}:B={strokeDasharray:U}:B={strokeDasharray:ne};var Me=Ii(t),{radius:Se}=Me,Ie=p2(Me,p7);return v.createElement("path",am({},Ie,{radius:typeof m=="number"?m:void 0,className:P,d:g2(se,I,te,W,m),ref:r,style:m2(m2({},B),t.style)}))})};function v2(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function x2(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?v2(Object(r),!0).forEach(function(n){b7(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):v2(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function b7(e,t,r){return(t=w7(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function w7(e){var t=j7(e,"string");return typeof t=="symbol"?t:t+""}function j7(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var om=Math.PI/180,S7=e=>e*180/Math.PI,ms=(e,t,r,n)=>({x:e+Math.cos(-om*n)*r,y:t+Math.sin(-om*n)*r}),N7=function(t,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{top:0,right:0,bottom:0,left:0};return Math.min(Math.abs(t-(n.left||0)-(n.right||0)),Math.abs(r-(n.top||0)-(n.bottom||0)))/2},k7=(e,t)=>{var{x:r,y:n}=e,{x:s,y:a}=t;return Math.sqrt((r-s)**2+(n-a)**2)},_7=(e,t)=>{var{x:r,y:n}=e,{cx:s,cy:a}=t,l=k7({x:r,y:n},{x:s,y:a});if(l<=0)return{radius:l,angle:0};var u=(r-s)/l,d=Math.acos(u);return n>a&&(d=2*Math.PI-d),{radius:l,angle:S7(d),angleInRadian:d}},C7=e=>{var{startAngle:t,endAngle:r}=e,n=Math.floor(t/360),s=Math.floor(r/360),a=Math.min(n,s);return{startAngle:t-a*360,endAngle:r-a*360}},E7=(e,t)=>{var{startAngle:r,endAngle:n}=t,s=Math.floor(r/360),a=Math.floor(n/360),l=Math.min(s,a);return e+l*360},A7=(e,t)=>{var{chartX:r,chartY:n}=e,{radius:s,angle:a}=_7({x:r,y:n},t),{innerRadius:l,outerRadius:u}=t;if(s<l||s>u||s===0)return null;var{startAngle:d,endAngle:m}=C7(t),f=a,p;if(d<=m){for(;f>m;)f-=360;for(;f<d;)f+=360;p=f>=d&&f<=m}else{for(;f>d;)f-=360;for(;f<m;)f+=360;p=f>=m&&f<=d}return p?x2(x2({},t),{},{radius:s,angle:E7(f,t)}):null};function $P(e){var{cx:t,cy:r,radius:n,startAngle:s,endAngle:a}=e,l=ms(t,r,n,s),u=ms(t,r,n,a);return{points:[l,u],cx:t,cy:r,radius:n,startAngle:s,endAngle:a}}function Yv(){return Yv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Yv.apply(null,arguments)}var P7=(e,t)=>{var r=mi(t-e),n=Math.min(Math.abs(t-e),359.999);return r*n},dh=e=>{var{cx:t,cy:r,radius:n,angle:s,sign:a,isExternal:l,cornerRadius:u,cornerIsExternal:d}=e,m=u*(l?1:-1)+n,f=Math.asin(u/m)/om,p=d?s:s+a*f,y=ms(t,r,m,p),x=ms(t,r,n,p),j=d?s-a*f:s,w=ms(t,r,m*Math.cos(f*om),j);return{center:y,circleTangency:x,lineTangency:w,theta:f}},RP=e=>{var{cx:t,cy:r,innerRadius:n,outerRadius:s,startAngle:a,endAngle:l}=e,u=P7(a,l),d=a+u,m=ms(t,r,s,a),f=ms(t,r,s,d),p="M ".concat(m.x,",").concat(m.y,`
    A `).concat(s,",").concat(s,`,0,
    `).concat(+(Math.abs(u)>180),",").concat(+(a>d),`,
    `).concat(f.x,",").concat(f.y,`
  `);if(n>0){var y=ms(t,r,n,a),x=ms(t,r,n,d);p+="L ".concat(x.x,",").concat(x.y,`
            A `).concat(n,",").concat(n,`,0,
            `).concat(+(Math.abs(u)>180),",").concat(+(a<=d),`,
            `).concat(y.x,",").concat(y.y," Z")}else p+="L ".concat(t,",").concat(r," Z");return p},O7=e=>{var{cx:t,cy:r,innerRadius:n,outerRadius:s,cornerRadius:a,forceCornerRadius:l,cornerIsExternal:u,startAngle:d,endAngle:m}=e,f=mi(m-d),{circleTangency:p,lineTangency:y,theta:x}=dh({cx:t,cy:r,radius:s,angle:d,sign:f,cornerRadius:a,cornerIsExternal:u}),{circleTangency:j,lineTangency:w,theta:S}=dh({cx:t,cy:r,radius:s,angle:m,sign:-f,cornerRadius:a,cornerIsExternal:u}),_=u?Math.abs(d-m):Math.abs(d-m)-x-S;if(_<0)return l?"M ".concat(y.x,",").concat(y.y,`
        a`).concat(a,",").concat(a,",0,0,1,").concat(a*2,`,0
        a`).concat(a,",").concat(a,",0,0,1,").concat(-a*2,`,0
      `):RP({cx:t,cy:r,innerRadius:n,outerRadius:s,startAngle:d,endAngle:m});var E="M ".concat(y.x,",").concat(y.y,`
    A`).concat(a,",").concat(a,",0,0,").concat(+(f<0),",").concat(p.x,",").concat(p.y,`
    A`).concat(s,",").concat(s,",0,").concat(+(_>180),",").concat(+(f<0),",").concat(j.x,",").concat(j.y,`
    A`).concat(a,",").concat(a,",0,0,").concat(+(f<0),",").concat(w.x,",").concat(w.y,`
  `);if(n>0){var{circleTangency:C,lineTangency:A,theta:T}=dh({cx:t,cy:r,radius:n,angle:d,sign:f,isExternal:!0,cornerRadius:a,cornerIsExternal:u}),{circleTangency:P,lineTangency:z,theta:J}=dh({cx:t,cy:r,radius:n,angle:m,sign:-f,isExternal:!0,cornerRadius:a,cornerIsExternal:u}),H=u?Math.abs(d-m):Math.abs(d-m)-T-J;if(H<0&&a===0)return"".concat(E,"L").concat(t,",").concat(r,"Z");E+="L".concat(z.x,",").concat(z.y,`
      A`).concat(a,",").concat(a,",0,0,").concat(+(f<0),",").concat(P.x,",").concat(P.y,`
      A`).concat(n,",").concat(n,",0,").concat(+(H>180),",").concat(+(f>0),",").concat(C.x,",").concat(C.y,`
      A`).concat(a,",").concat(a,",0,0,").concat(+(f<0),",").concat(A.x,",").concat(A.y,"Z")}else E+="L".concat(t,",").concat(r,"Z");return E},T7={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},MP=e=>{var t=Mi(e,T7),{cx:r,cy:n,innerRadius:s,outerRadius:a,cornerRadius:l,forceCornerRadius:u,cornerIsExternal:d,startAngle:m,endAngle:f,className:p}=t;if(a<s||m===f)return null;var y=Lr("recharts-sector",p),x=a-s,j=sa(l,x,0,!0),w;return j>0&&Math.abs(m-f)<360?w=O7({cx:r,cy:n,innerRadius:s,outerRadius:a,cornerRadius:Math.min(j,x/2),forceCornerRadius:u,cornerIsExternal:d,startAngle:m,endAngle:f}):w=RP({cx:r,cy:n,innerRadius:s,outerRadius:a,startAngle:m,endAngle:f}),v.createElement("path",Yv({},Ii(t),{className:y,d:w}))};function I7(e,t,r){if(e==="horizontal")return[{x:t.x,y:r.top},{x:t.x,y:r.top+r.height}];if(e==="vertical")return[{x:r.left,y:t.y},{x:r.left+r.width,y:t.y}];if(DA(t)){if(e==="centric"){var{cx:n,cy:s,innerRadius:a,outerRadius:l,angle:u}=t,d=ms(n,s,a,u),m=ms(n,s,l,u);return[{x:d.x,y:d.y},{x:m.x,y:m.y}]}return $P(t)}}var j0={},S0={},N0={},b2;function D7(){return b2||(b2=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=qA();function r(n){return t.isSymbol(n)?NaN:Number(n)}e.toNumber=r})(N0)),N0}var w2;function $7(){return w2||(w2=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=D7();function r(n){return n?(n=t.toNumber(n),n===1/0||n===-1/0?(n<0?-1:1)*Number.MAX_VALUE:n===n?n:0):n===0?n:0}e.toFinite=r})(S0)),S0}var j2;function R7(){return j2||(j2=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=HA(),r=$7();function n(s,a,l){l&&typeof l!="number"&&t.isIterateeCall(s,a,l)&&(a=l=void 0),s=r.toFinite(s),a===void 0?(a=s,s=0):a=r.toFinite(a),l=l===void 0?s<a?1:-1:r.toFinite(l);const u=Math.max(Math.ceil((a-s)/(l||1)),0),d=new Array(u);for(let m=0;m<u;m++)d[m]=s,s+=l;return d}e.range=n})(j0)),j0}var k0,S2;function M7(){return S2||(S2=1,k0=R7().range),k0}var F7=M7();const FP=ia(F7);function Vo(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function L7(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function pb(e){let t,r,n;e.length!==2?(t=Vo,r=(u,d)=>Vo(e(u),d),n=(u,d)=>e(u)-d):(t=e===Vo||e===L7?e:z7,r=e,n=e);function s(u,d,m=0,f=u.length){if(m<f){if(t(d,d)!==0)return f;do{const p=m+f>>>1;r(u[p],d)<0?m=p+1:f=p}while(m<f)}return m}function a(u,d,m=0,f=u.length){if(m<f){if(t(d,d)!==0)return f;do{const p=m+f>>>1;r(u[p],d)<=0?m=p+1:f=p}while(m<f)}return m}function l(u,d,m=0,f=u.length){const p=s(u,d,m,f-1);return p>m&&n(u[p-1],d)>-n(u[p],d)?p-1:p}return{left:s,center:l,right:a}}function z7(){return 0}function LP(e){return e===null?NaN:+e}function*U7(e,t){for(let r of e)r!=null&&(r=+r)>=r&&(yield r)}const B7=pb(Vo),Vd=B7.right;pb(LP).center;class N2 extends Map{constructor(t,r=q7){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:r}}),t!=null)for(const[n,s]of t)this.set(n,s)}get(t){return super.get(k2(this,t))}has(t){return super.has(k2(this,t))}set(t,r){return super.set(W7(this,t),r)}delete(t){return super.delete(V7(this,t))}}function k2({_intern:e,_key:t},r){const n=t(r);return e.has(n)?e.get(n):r}function W7({_intern:e,_key:t},r){const n=t(r);return e.has(n)?e.get(n):(e.set(n,r),r)}function V7({_intern:e,_key:t},r){const n=t(r);return e.has(n)&&(r=e.get(n),e.delete(n)),r}function q7(e){return e!==null&&typeof e=="object"?e.valueOf():e}function H7(e=Vo){if(e===Vo)return zP;if(typeof e!="function")throw new TypeError("compare is not a function");return(t,r)=>{const n=e(t,r);return n||n===0?n:(e(r,r)===0)-(e(t,t)===0)}}function zP(e,t){return(e==null||!(e>=e))-(t==null||!(t>=t))||(e<t?-1:e>t?1:0)}const K7=Math.sqrt(50),G7=Math.sqrt(10),Y7=Math.sqrt(2);function lm(e,t,r){const n=(t-e)/Math.max(0,r),s=Math.floor(Math.log10(n)),a=n/Math.pow(10,s),l=a>=K7?10:a>=G7?5:a>=Y7?2:1;let u,d,m;return s<0?(m=Math.pow(10,-s)/l,u=Math.round(e*m),d=Math.round(t*m),u/m<e&&++u,d/m>t&&--d,m=-m):(m=Math.pow(10,s)*l,u=Math.round(e/m),d=Math.round(t/m),u*m<e&&++u,d*m>t&&--d),d<u&&.5<=r&&r<2?lm(e,t,r*2):[u,d,m]}function Jv(e,t,r){if(t=+t,e=+e,r=+r,!(r>0))return[];if(e===t)return[e];const n=t<e,[s,a,l]=n?lm(t,e,r):lm(e,t,r);if(!(a>=s))return[];const u=a-s+1,d=new Array(u);if(n)if(l<0)for(let m=0;m<u;++m)d[m]=(a-m)/-l;else for(let m=0;m<u;++m)d[m]=(a-m)*l;else if(l<0)for(let m=0;m<u;++m)d[m]=(s+m)/-l;else for(let m=0;m<u;++m)d[m]=(s+m)*l;return d}function Xv(e,t,r){return t=+t,e=+e,r=+r,lm(e,t,r)[2]}function Qv(e,t,r){t=+t,e=+e,r=+r;const n=t<e,s=n?Xv(t,e,r):Xv(e,t,r);return(n?-1:1)*(s<0?1/-s:s)}function _2(e,t){let r;for(const n of e)n!=null&&(r<n||r===void 0&&n>=n)&&(r=n);return r}function C2(e,t){let r;for(const n of e)n!=null&&(r>n||r===void 0&&n>=n)&&(r=n);return r}function UP(e,t,r=0,n=1/0,s){if(t=Math.floor(t),r=Math.floor(Math.max(0,r)),n=Math.floor(Math.min(e.length-1,n)),!(r<=t&&t<=n))return e;for(s=s===void 0?zP:H7(s);n>r;){if(n-r>600){const d=n-r+1,m=t-r+1,f=Math.log(d),p=.5*Math.exp(2*f/3),y=.5*Math.sqrt(f*p*(d-p)/d)*(m-d/2<0?-1:1),x=Math.max(r,Math.floor(t-m*p/d+y)),j=Math.min(n,Math.floor(t+(d-m)*p/d+y));UP(e,t,x,j,s)}const a=e[t];let l=r,u=n;for(Yu(e,r,t),s(e[n],a)>0&&Yu(e,r,n);l<u;){for(Yu(e,l,u),++l,--u;s(e[l],a)<0;)++l;for(;s(e[u],a)>0;)--u}s(e[r],a)===0?Yu(e,r,u):(++u,Yu(e,u,n)),u<=t&&(r=u+1),t<=u&&(n=u-1)}return e}function Yu(e,t,r){const n=e[t];e[t]=e[r],e[r]=n}function J7(e,t,r){if(e=Float64Array.from(U7(e)),!(!(n=e.length)||isNaN(t=+t))){if(t<=0||n<2)return C2(e);if(t>=1)return _2(e);var n,s=(n-1)*t,a=Math.floor(s),l=_2(UP(e,a).subarray(0,a+1)),u=C2(e.subarray(a+1));return l+(u-l)*(s-a)}}function X7(e,t,r=LP){if(!(!(n=e.length)||isNaN(t=+t))){if(t<=0||n<2)return+r(e[0],0,e);if(t>=1)return+r(e[n-1],n-1,e);var n,s=(n-1)*t,a=Math.floor(s),l=+r(e[a],a,e),u=+r(e[a+1],a+1,e);return l+(u-l)*(s-a)}}function Q7(e,t,r){e=+e,t=+t,r=(s=arguments.length)<2?(t=e,e=0,1):s<3?1:+r;for(var n=-1,s=Math.max(0,Math.ceil((t-e)/r))|0,a=new Array(s);++n<s;)a[n]=e+n*r;return a}function Fi(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}function mo(e,t){switch(arguments.length){case 0:break;case 1:{typeof e=="function"?this.interpolator(e):this.range(e);break}default:{this.domain(e),typeof t=="function"?this.interpolator(t):this.range(t);break}}return this}const Zv=Symbol("implicit");function gb(){var e=new N2,t=[],r=[],n=Zv;function s(a){let l=e.get(a);if(l===void 0){if(n!==Zv)return n;e.set(a,l=t.push(a)-1)}return r[l%r.length]}return s.domain=function(a){if(!arguments.length)return t.slice();t=[],e=new N2;for(const l of a)e.has(l)||e.set(l,t.push(l)-1);return s},s.range=function(a){return arguments.length?(r=Array.from(a),s):r.slice()},s.unknown=function(a){return arguments.length?(n=a,s):n},s.copy=function(){return gb(t,r).unknown(n)},Fi.apply(s,arguments),s}function yb(){var e=gb().unknown(void 0),t=e.domain,r=e.range,n=0,s=1,a,l,u=!1,d=0,m=0,f=.5;delete e.unknown;function p(){var y=t().length,x=s<n,j=x?s:n,w=x?n:s;a=(w-j)/Math.max(1,y-d+m*2),u&&(a=Math.floor(a)),j+=(w-j-a*(y-d))*f,l=a*(1-d),u&&(j=Math.round(j),l=Math.round(l));var S=Q7(y).map(function(_){return j+a*_});return r(x?S.reverse():S)}return e.domain=function(y){return arguments.length?(t(y),p()):t()},e.range=function(y){return arguments.length?([n,s]=y,n=+n,s=+s,p()):[n,s]},e.rangeRound=function(y){return[n,s]=y,n=+n,s=+s,u=!0,p()},e.bandwidth=function(){return l},e.step=function(){return a},e.round=function(y){return arguments.length?(u=!!y,p()):u},e.padding=function(y){return arguments.length?(d=Math.min(1,m=+y),p()):d},e.paddingInner=function(y){return arguments.length?(d=Math.min(1,y),p()):d},e.paddingOuter=function(y){return arguments.length?(m=+y,p()):m},e.align=function(y){return arguments.length?(f=Math.max(0,Math.min(1,y)),p()):f},e.copy=function(){return yb(t(),[n,s]).round(u).paddingInner(d).paddingOuter(m).align(f)},Fi.apply(p(),arguments)}function BP(e){var t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,delete e.paddingOuter,e.copy=function(){return BP(t())},e}function Z7(){return BP(yb.apply(null,arguments).paddingInner(1))}function vb(e,t,r){e.prototype=t.prototype=r,r.constructor=e}function WP(e,t){var r=Object.create(e.prototype);for(var n in t)r[n]=t[n];return r}function qd(){}var Cd=.7,cm=1/Cd,Uc="\\s*([+-]?\\d+)\\s*",Ed="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Sa="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",e9=/^#([0-9a-f]{3,8})$/,t9=new RegExp(`^rgb\\(${Uc},${Uc},${Uc}\\)$`),r9=new RegExp(`^rgb\\(${Sa},${Sa},${Sa}\\)$`),n9=new RegExp(`^rgba\\(${Uc},${Uc},${Uc},${Ed}\\)$`),s9=new RegExp(`^rgba\\(${Sa},${Sa},${Sa},${Ed}\\)$`),i9=new RegExp(`^hsl\\(${Ed},${Sa},${Sa}\\)$`),a9=new RegExp(`^hsla\\(${Ed},${Sa},${Sa},${Ed}\\)$`),E2={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};vb(qd,Ad,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:A2,formatHex:A2,formatHex8:o9,formatHsl:l9,formatRgb:P2,toString:P2});function A2(){return this.rgb().formatHex()}function o9(){return this.rgb().formatHex8()}function l9(){return VP(this).formatHsl()}function P2(){return this.rgb().formatRgb()}function Ad(e){var t,r;return e=(e+"").trim().toLowerCase(),(t=e9.exec(e))?(r=t[1].length,t=parseInt(t[1],16),r===6?O2(t):r===3?new Gs(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):r===8?fh(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):r===4?fh(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=t9.exec(e))?new Gs(t[1],t[2],t[3],1):(t=r9.exec(e))?new Gs(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=n9.exec(e))?fh(t[1],t[2],t[3],t[4]):(t=s9.exec(e))?fh(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=i9.exec(e))?D2(t[1],t[2]/100,t[3]/100,1):(t=a9.exec(e))?D2(t[1],t[2]/100,t[3]/100,t[4]):E2.hasOwnProperty(e)?O2(E2[e]):e==="transparent"?new Gs(NaN,NaN,NaN,0):null}function O2(e){return new Gs(e>>16&255,e>>8&255,e&255,1)}function fh(e,t,r,n){return n<=0&&(e=t=r=NaN),new Gs(e,t,r,n)}function c9(e){return e instanceof qd||(e=Ad(e)),e?(e=e.rgb(),new Gs(e.r,e.g,e.b,e.opacity)):new Gs}function ex(e,t,r,n){return arguments.length===1?c9(e):new Gs(e,t,r,n??1)}function Gs(e,t,r,n){this.r=+e,this.g=+t,this.b=+r,this.opacity=+n}vb(Gs,ex,WP(qd,{brighter(e){return e=e==null?cm:Math.pow(cm,e),new Gs(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?Cd:Math.pow(Cd,e),new Gs(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new Gs(Il(this.r),Il(this.g),Il(this.b),um(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:T2,formatHex:T2,formatHex8:u9,formatRgb:I2,toString:I2}));function T2(){return`#${_l(this.r)}${_l(this.g)}${_l(this.b)}`}function u9(){return`#${_l(this.r)}${_l(this.g)}${_l(this.b)}${_l((isNaN(this.opacity)?1:this.opacity)*255)}`}function I2(){const e=um(this.opacity);return`${e===1?"rgb(":"rgba("}${Il(this.r)}, ${Il(this.g)}, ${Il(this.b)}${e===1?")":`, ${e})`}`}function um(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function Il(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function _l(e){return e=Il(e),(e<16?"0":"")+e.toString(16)}function D2(e,t,r,n){return n<=0?e=t=r=NaN:r<=0||r>=1?e=t=NaN:t<=0&&(e=NaN),new ta(e,t,r,n)}function VP(e){if(e instanceof ta)return new ta(e.h,e.s,e.l,e.opacity);if(e instanceof qd||(e=Ad(e)),!e)return new ta;if(e instanceof ta)return e;e=e.rgb();var t=e.r/255,r=e.g/255,n=e.b/255,s=Math.min(t,r,n),a=Math.max(t,r,n),l=NaN,u=a-s,d=(a+s)/2;return u?(t===a?l=(r-n)/u+(r<n)*6:r===a?l=(n-t)/u+2:l=(t-r)/u+4,u/=d<.5?a+s:2-a-s,l*=60):u=d>0&&d<1?0:l,new ta(l,u,d,e.opacity)}function d9(e,t,r,n){return arguments.length===1?VP(e):new ta(e,t,r,n??1)}function ta(e,t,r,n){this.h=+e,this.s=+t,this.l=+r,this.opacity=+n}vb(ta,d9,WP(qd,{brighter(e){return e=e==null?cm:Math.pow(cm,e),new ta(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?Cd:Math.pow(Cd,e),new ta(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,r=this.l,n=r+(r<.5?r:1-r)*t,s=2*r-n;return new Gs(_0(e>=240?e-240:e+120,s,n),_0(e,s,n),_0(e<120?e+240:e-120,s,n),this.opacity)},clamp(){return new ta($2(this.h),hh(this.s),hh(this.l),um(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=um(this.opacity);return`${e===1?"hsl(":"hsla("}${$2(this.h)}, ${hh(this.s)*100}%, ${hh(this.l)*100}%${e===1?")":`, ${e})`}`}}));function $2(e){return e=(e||0)%360,e<0?e+360:e}function hh(e){return Math.max(0,Math.min(1,e||0))}function _0(e,t,r){return(e<60?t+(r-t)*e/60:e<180?r:e<240?t+(r-t)*(240-e)/60:t)*255}const xb=e=>()=>e;function f9(e,t){return function(r){return e+r*t}}function h9(e,t,r){return e=Math.pow(e,r),t=Math.pow(t,r)-e,r=1/r,function(n){return Math.pow(e+n*t,r)}}function m9(e){return(e=+e)==1?qP:function(t,r){return r-t?h9(t,r,e):xb(isNaN(t)?r:t)}}function qP(e,t){var r=t-e;return r?f9(e,r):xb(isNaN(e)?t:e)}const R2=(function e(t){var r=m9(t);function n(s,a){var l=r((s=ex(s)).r,(a=ex(a)).r),u=r(s.g,a.g),d=r(s.b,a.b),m=qP(s.opacity,a.opacity);return function(f){return s.r=l(f),s.g=u(f),s.b=d(f),s.opacity=m(f),s+""}}return n.gamma=e,n})(1);function p9(e,t){t||(t=[]);var r=e?Math.min(t.length,e.length):0,n=t.slice(),s;return function(a){for(s=0;s<r;++s)n[s]=e[s]*(1-a)+t[s]*a;return n}}function g9(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function y9(e,t){var r=t?t.length:0,n=e?Math.min(r,e.length):0,s=new Array(n),a=new Array(r),l;for(l=0;l<n;++l)s[l]=cu(e[l],t[l]);for(;l<r;++l)a[l]=t[l];return function(u){for(l=0;l<n;++l)a[l]=s[l](u);return a}}function v9(e,t){var r=new Date;return e=+e,t=+t,function(n){return r.setTime(e*(1-n)+t*n),r}}function dm(e,t){return e=+e,t=+t,function(r){return e*(1-r)+t*r}}function x9(e,t){var r={},n={},s;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(s in t)s in e?r[s]=cu(e[s],t[s]):n[s]=t[s];return function(a){for(s in r)n[s]=r[s](a);return n}}var tx=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,C0=new RegExp(tx.source,"g");function b9(e){return function(){return e}}function w9(e){return function(t){return e(t)+""}}function j9(e,t){var r=tx.lastIndex=C0.lastIndex=0,n,s,a,l=-1,u=[],d=[];for(e=e+"",t=t+"";(n=tx.exec(e))&&(s=C0.exec(t));)(a=s.index)>r&&(a=t.slice(r,a),u[l]?u[l]+=a:u[++l]=a),(n=n[0])===(s=s[0])?u[l]?u[l]+=s:u[++l]=s:(u[++l]=null,d.push({i:l,x:dm(n,s)})),r=C0.lastIndex;return r<t.length&&(a=t.slice(r),u[l]?u[l]+=a:u[++l]=a),u.length<2?d[0]?w9(d[0].x):b9(t):(t=d.length,function(m){for(var f=0,p;f<t;++f)u[(p=d[f]).i]=p.x(m);return u.join("")})}function cu(e,t){var r=typeof t,n;return t==null||r==="boolean"?xb(t):(r==="number"?dm:r==="string"?(n=Ad(t))?(t=n,R2):j9:t instanceof Ad?R2:t instanceof Date?v9:g9(t)?p9:Array.isArray(t)?y9:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?x9:dm)(e,t)}function bb(e,t){return e=+e,t=+t,function(r){return Math.round(e*(1-r)+t*r)}}function S9(e,t){t===void 0&&(t=e,e=cu);for(var r=0,n=t.length-1,s=t[0],a=new Array(n<0?0:n);r<n;)a[r]=e(s,s=t[++r]);return function(l){var u=Math.max(0,Math.min(n-1,Math.floor(l*=n)));return a[u](l-u)}}function N9(e){return function(){return e}}function fm(e){return+e}var M2=[0,1];function Is(e){return e}function rx(e,t){return(t-=e=+e)?function(r){return(r-e)/t}:N9(isNaN(t)?NaN:.5)}function k9(e,t){var r;return e>t&&(r=e,e=t,t=r),function(n){return Math.max(e,Math.min(t,n))}}function _9(e,t,r){var n=e[0],s=e[1],a=t[0],l=t[1];return s<n?(n=rx(s,n),a=r(l,a)):(n=rx(n,s),a=r(a,l)),function(u){return a(n(u))}}function C9(e,t,r){var n=Math.min(e.length,t.length)-1,s=new Array(n),a=new Array(n),l=-1;for(e[n]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++l<n;)s[l]=rx(e[l],e[l+1]),a[l]=r(t[l],t[l+1]);return function(u){var d=Vd(e,u,1,n)-1;return a[d](s[d](u))}}function Hd(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function ap(){var e=M2,t=M2,r=cu,n,s,a,l=Is,u,d,m;function f(){var y=Math.min(e.length,t.length);return l!==Is&&(l=k9(e[0],e[y-1])),u=y>2?C9:_9,d=m=null,p}function p(y){return y==null||isNaN(y=+y)?a:(d||(d=u(e.map(n),t,r)))(n(l(y)))}return p.invert=function(y){return l(s((m||(m=u(t,e.map(n),dm)))(y)))},p.domain=function(y){return arguments.length?(e=Array.from(y,fm),f()):e.slice()},p.range=function(y){return arguments.length?(t=Array.from(y),f()):t.slice()},p.rangeRound=function(y){return t=Array.from(y),r=bb,f()},p.clamp=function(y){return arguments.length?(l=y?!0:Is,f()):l!==Is},p.interpolate=function(y){return arguments.length?(r=y,f()):r},p.unknown=function(y){return arguments.length?(a=y,p):a},function(y,x){return n=y,s=x,f()}}function wb(){return ap()(Is,Is)}function E9(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function hm(e,t){if((r=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var r,n=e.slice(0,r);return[n.length>1?n[0]+n.slice(2):n,+e.slice(r+1)]}function qc(e){return e=hm(Math.abs(e)),e?e[1]:NaN}function A9(e,t){return function(r,n){for(var s=r.length,a=[],l=0,u=e[0],d=0;s>0&&u>0&&(d+u+1>n&&(u=Math.max(1,n-d)),a.push(r.substring(s-=u,s+u)),!((d+=u+1)>n));)u=e[l=(l+1)%e.length];return a.reverse().join(t)}}function P9(e){return function(t){return t.replace(/[0-9]/g,function(r){return e[+r]})}}var O9=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Pd(e){if(!(t=O9.exec(e)))throw new Error("invalid format: "+e);var t;return new jb({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}Pd.prototype=jb.prototype;function jb(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}jb.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function T9(e){e:for(var t=e.length,r=1,n=-1,s;r<t;++r)switch(e[r]){case".":n=s=r;break;case"0":n===0&&(n=r),s=r;break;default:if(!+e[r])break e;n>0&&(n=0);break}return n>0?e.slice(0,n)+e.slice(s+1):e}var HP;function I9(e,t){var r=hm(e,t);if(!r)return e+"";var n=r[0],s=r[1],a=s-(HP=Math.max(-8,Math.min(8,Math.floor(s/3)))*3)+1,l=n.length;return a===l?n:a>l?n+new Array(a-l+1).join("0"):a>0?n.slice(0,a)+"."+n.slice(a):"0."+new Array(1-a).join("0")+hm(e,Math.max(0,t+a-1))[0]}function F2(e,t){var r=hm(e,t);if(!r)return e+"";var n=r[0],s=r[1];return s<0?"0."+new Array(-s).join("0")+n:n.length>s+1?n.slice(0,s+1)+"."+n.slice(s+1):n+new Array(s-n.length+2).join("0")}const L2={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:E9,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>F2(e*100,t),r:F2,s:I9,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function z2(e){return e}var U2=Array.prototype.map,B2=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function D9(e){var t=e.grouping===void 0||e.thousands===void 0?z2:A9(U2.call(e.grouping,Number),e.thousands+""),r=e.currency===void 0?"":e.currency[0]+"",n=e.currency===void 0?"":e.currency[1]+"",s=e.decimal===void 0?".":e.decimal+"",a=e.numerals===void 0?z2:P9(U2.call(e.numerals,String)),l=e.percent===void 0?"%":e.percent+"",u=e.minus===void 0?"":e.minus+"",d=e.nan===void 0?"NaN":e.nan+"";function m(p){p=Pd(p);var y=p.fill,x=p.align,j=p.sign,w=p.symbol,S=p.zero,_=p.width,E=p.comma,C=p.precision,A=p.trim,T=p.type;T==="n"?(E=!0,T="g"):L2[T]||(C===void 0&&(C=12),A=!0,T="g"),(S||y==="0"&&x==="=")&&(S=!0,y="0",x="=");var P=w==="$"?r:w==="#"&&/[boxX]/.test(T)?"0"+T.toLowerCase():"",z=w==="$"?n:/[%p]/.test(T)?l:"",J=L2[T],H=/[defgprs%]/.test(T);C=C===void 0?6:/[gprs]/.test(T)?Math.max(1,Math.min(21,C)):Math.max(0,Math.min(20,C));function fe(X){var K=P,ae=z,U,ne,G;if(T==="c")ae=J(X)+ae,X="";else{X=+X;var ie=X<0||1/X<0;if(X=isNaN(X)?d:J(Math.abs(X),C),A&&(X=T9(X)),ie&&+X==0&&j!=="+"&&(ie=!1),K=(ie?j==="("?j:u:j==="-"||j==="("?"":j)+K,ae=(T==="s"?B2[8+HP/3]:"")+ae+(ie&&j==="("?")":""),H){for(U=-1,ne=X.length;++U<ne;)if(G=X.charCodeAt(U),48>G||G>57){ae=(G===46?s+X.slice(U+1):X.slice(U))+ae,X=X.slice(0,U);break}}}E&&!S&&(X=t(X,1/0));var te=K.length+X.length+ae.length,W=te<_?new Array(_-te+1).join(y):"";switch(E&&S&&(X=t(W+X,W.length?_-ae.length:1/0),W=""),x){case"<":X=K+X+ae+W;break;case"=":X=K+W+X+ae;break;case"^":X=W.slice(0,te=W.length>>1)+K+X+ae+W.slice(te);break;default:X=W+K+X+ae;break}return a(X)}return fe.toString=function(){return p+""},fe}function f(p,y){var x=m((p=Pd(p),p.type="f",p)),j=Math.max(-8,Math.min(8,Math.floor(qc(y)/3)))*3,w=Math.pow(10,-j),S=B2[8+j/3];return function(_){return x(w*_)+S}}return{format:m,formatPrefix:f}}var mh,Sb,KP;$9({thousands:",",grouping:[3],currency:["$",""]});function $9(e){return mh=D9(e),Sb=mh.format,KP=mh.formatPrefix,mh}function R9(e){return Math.max(0,-qc(Math.abs(e)))}function M9(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(qc(t)/3)))*3-qc(Math.abs(e)))}function F9(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,qc(t)-qc(e))+1}function GP(e,t,r,n){var s=Qv(e,t,r),a;switch(n=Pd(n??",f"),n.type){case"s":{var l=Math.max(Math.abs(e),Math.abs(t));return n.precision==null&&!isNaN(a=M9(s,l))&&(n.precision=a),KP(n,l)}case"":case"e":case"g":case"p":case"r":{n.precision==null&&!isNaN(a=F9(s,Math.max(Math.abs(e),Math.abs(t))))&&(n.precision=a-(n.type==="e"));break}case"f":case"%":{n.precision==null&&!isNaN(a=R9(s))&&(n.precision=a-(n.type==="%")*2);break}}return Sb(n)}function Xo(e){var t=e.domain;return e.ticks=function(r){var n=t();return Jv(n[0],n[n.length-1],r??10)},e.tickFormat=function(r,n){var s=t();return GP(s[0],s[s.length-1],r??10,n)},e.nice=function(r){r==null&&(r=10);var n=t(),s=0,a=n.length-1,l=n[s],u=n[a],d,m,f=10;for(u<l&&(m=l,l=u,u=m,m=s,s=a,a=m);f-- >0;){if(m=Xv(l,u,r),m===d)return n[s]=l,n[a]=u,t(n);if(m>0)l=Math.floor(l/m)*m,u=Math.ceil(u/m)*m;else if(m<0)l=Math.ceil(l*m)/m,u=Math.floor(u*m)/m;else break;d=m}return e},e}function YP(){var e=wb();return e.copy=function(){return Hd(e,YP())},Fi.apply(e,arguments),Xo(e)}function JP(e){var t;function r(n){return n==null||isNaN(n=+n)?t:n}return r.invert=r,r.domain=r.range=function(n){return arguments.length?(e=Array.from(n,fm),r):e.slice()},r.unknown=function(n){return arguments.length?(t=n,r):t},r.copy=function(){return JP(e).unknown(t)},e=arguments.length?Array.from(e,fm):[0,1],Xo(r)}function XP(e,t){e=e.slice();var r=0,n=e.length-1,s=e[r],a=e[n],l;return a<s&&(l=r,r=n,n=l,l=s,s=a,a=l),e[r]=t.floor(s),e[n]=t.ceil(a),e}function W2(e){return Math.log(e)}function V2(e){return Math.exp(e)}function L9(e){return-Math.log(-e)}function z9(e){return-Math.exp(-e)}function U9(e){return isFinite(e)?+("1e"+e):e<0?0:e}function B9(e){return e===10?U9:e===Math.E?Math.exp:t=>Math.pow(e,t)}function W9(e){return e===Math.E?Math.log:e===10&&Math.log10||e===2&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}function q2(e){return(t,r)=>-e(-t,r)}function Nb(e){const t=e(W2,V2),r=t.domain;let n=10,s,a;function l(){return s=W9(n),a=B9(n),r()[0]<0?(s=q2(s),a=q2(a),e(L9,z9)):e(W2,V2),t}return t.base=function(u){return arguments.length?(n=+u,l()):n},t.domain=function(u){return arguments.length?(r(u),l()):r()},t.ticks=u=>{const d=r();let m=d[0],f=d[d.length-1];const p=f<m;p&&([m,f]=[f,m]);let y=s(m),x=s(f),j,w;const S=u==null?10:+u;let _=[];if(!(n%1)&&x-y<S){if(y=Math.floor(y),x=Math.ceil(x),m>0){for(;y<=x;++y)for(j=1;j<n;++j)if(w=y<0?j/a(-y):j*a(y),!(w<m)){if(w>f)break;_.push(w)}}else for(;y<=x;++y)for(j=n-1;j>=1;--j)if(w=y>0?j/a(-y):j*a(y),!(w<m)){if(w>f)break;_.push(w)}_.length*2<S&&(_=Jv(m,f,S))}else _=Jv(y,x,Math.min(x-y,S)).map(a);return p?_.reverse():_},t.tickFormat=(u,d)=>{if(u==null&&(u=10),d==null&&(d=n===10?"s":","),typeof d!="function"&&(!(n%1)&&(d=Pd(d)).precision==null&&(d.trim=!0),d=Sb(d)),u===1/0)return d;const m=Math.max(1,n*u/t.ticks().length);return f=>{let p=f/a(Math.round(s(f)));return p*n<n-.5&&(p*=n),p<=m?d(f):""}},t.nice=()=>r(XP(r(),{floor:u=>a(Math.floor(s(u))),ceil:u=>a(Math.ceil(s(u)))})),t}function QP(){const e=Nb(ap()).domain([1,10]);return e.copy=()=>Hd(e,QP()).base(e.base()),Fi.apply(e,arguments),e}function H2(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function K2(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function kb(e){var t=1,r=e(H2(t),K2(t));return r.constant=function(n){return arguments.length?e(H2(t=+n),K2(t)):t},Xo(r)}function ZP(){var e=kb(ap());return e.copy=function(){return Hd(e,ZP()).constant(e.constant())},Fi.apply(e,arguments)}function G2(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function V9(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function q9(e){return e<0?-e*e:e*e}function _b(e){var t=e(Is,Is),r=1;function n(){return r===1?e(Is,Is):r===.5?e(V9,q9):e(G2(r),G2(1/r))}return t.exponent=function(s){return arguments.length?(r=+s,n()):r},Xo(t)}function Cb(){var e=_b(ap());return e.copy=function(){return Hd(e,Cb()).exponent(e.exponent())},Fi.apply(e,arguments),e}function H9(){return Cb.apply(null,arguments).exponent(.5)}function Y2(e){return Math.sign(e)*e*e}function K9(e){return Math.sign(e)*Math.sqrt(Math.abs(e))}function e4(){var e=wb(),t=[0,1],r=!1,n;function s(a){var l=K9(e(a));return isNaN(l)?n:r?Math.round(l):l}return s.invert=function(a){return e.invert(Y2(a))},s.domain=function(a){return arguments.length?(e.domain(a),s):e.domain()},s.range=function(a){return arguments.length?(e.range((t=Array.from(a,fm)).map(Y2)),s):t.slice()},s.rangeRound=function(a){return s.range(a).round(!0)},s.round=function(a){return arguments.length?(r=!!a,s):r},s.clamp=function(a){return arguments.length?(e.clamp(a),s):e.clamp()},s.unknown=function(a){return arguments.length?(n=a,s):n},s.copy=function(){return e4(e.domain(),t).round(r).clamp(e.clamp()).unknown(n)},Fi.apply(s,arguments),Xo(s)}function t4(){var e=[],t=[],r=[],n;function s(){var l=0,u=Math.max(1,t.length);for(r=new Array(u-1);++l<u;)r[l-1]=X7(e,l/u);return a}function a(l){return l==null||isNaN(l=+l)?n:t[Vd(r,l)]}return a.invertExtent=function(l){var u=t.indexOf(l);return u<0?[NaN,NaN]:[u>0?r[u-1]:e[0],u<r.length?r[u]:e[e.length-1]]},a.domain=function(l){if(!arguments.length)return e.slice();e=[];for(let u of l)u!=null&&!isNaN(u=+u)&&e.push(u);return e.sort(Vo),s()},a.range=function(l){return arguments.length?(t=Array.from(l),s()):t.slice()},a.unknown=function(l){return arguments.length?(n=l,a):n},a.quantiles=function(){return r.slice()},a.copy=function(){return t4().domain(e).range(t).unknown(n)},Fi.apply(a,arguments)}function r4(){var e=0,t=1,r=1,n=[.5],s=[0,1],a;function l(d){return d!=null&&d<=d?s[Vd(n,d,0,r)]:a}function u(){var d=-1;for(n=new Array(r);++d<r;)n[d]=((d+1)*t-(d-r)*e)/(r+1);return l}return l.domain=function(d){return arguments.length?([e,t]=d,e=+e,t=+t,u()):[e,t]},l.range=function(d){return arguments.length?(r=(s=Array.from(d)).length-1,u()):s.slice()},l.invertExtent=function(d){var m=s.indexOf(d);return m<0?[NaN,NaN]:m<1?[e,n[0]]:m>=r?[n[r-1],t]:[n[m-1],n[m]]},l.unknown=function(d){return arguments.length&&(a=d),l},l.thresholds=function(){return n.slice()},l.copy=function(){return r4().domain([e,t]).range(s).unknown(a)},Fi.apply(Xo(l),arguments)}function n4(){var e=[.5],t=[0,1],r,n=1;function s(a){return a!=null&&a<=a?t[Vd(e,a,0,n)]:r}return s.domain=function(a){return arguments.length?(e=Array.from(a),n=Math.min(e.length,t.length-1),s):e.slice()},s.range=function(a){return arguments.length?(t=Array.from(a),n=Math.min(e.length,t.length-1),s):t.slice()},s.invertExtent=function(a){var l=t.indexOf(a);return[e[l-1],e[l]]},s.unknown=function(a){return arguments.length?(r=a,s):r},s.copy=function(){return n4().domain(e).range(t).unknown(r)},Fi.apply(s,arguments)}const E0=new Date,A0=new Date;function Fn(e,t,r,n){function s(a){return e(a=arguments.length===0?new Date:new Date(+a)),a}return s.floor=a=>(e(a=new Date(+a)),a),s.ceil=a=>(e(a=new Date(a-1)),t(a,1),e(a),a),s.round=a=>{const l=s(a),u=s.ceil(a);return a-l<u-a?l:u},s.offset=(a,l)=>(t(a=new Date(+a),l==null?1:Math.floor(l)),a),s.range=(a,l,u)=>{const d=[];if(a=s.ceil(a),u=u==null?1:Math.floor(u),!(a<l)||!(u>0))return d;let m;do d.push(m=new Date(+a)),t(a,u),e(a);while(m<a&&a<l);return d},s.filter=a=>Fn(l=>{if(l>=l)for(;e(l),!a(l);)l.setTime(l-1)},(l,u)=>{if(l>=l)if(u<0)for(;++u<=0;)for(;t(l,-1),!a(l););else for(;--u>=0;)for(;t(l,1),!a(l););}),r&&(s.count=(a,l)=>(E0.setTime(+a),A0.setTime(+l),e(E0),e(A0),Math.floor(r(E0,A0))),s.every=a=>(a=Math.floor(a),!isFinite(a)||!(a>0)?null:a>1?s.filter(n?l=>n(l)%a===0:l=>s.count(0,l)%a===0):s)),s}const mm=Fn(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);mm.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?Fn(t=>{t.setTime(Math.floor(t/e)*e)},(t,r)=>{t.setTime(+t+r*e)},(t,r)=>(r-t)/e):mm);mm.range;const Ga=1e3,Oi=Ga*60,Ya=Oi*60,io=Ya*24,Eb=io*7,J2=io*30,P0=io*365,Cl=Fn(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*Ga)},(e,t)=>(t-e)/Ga,e=>e.getUTCSeconds());Cl.range;const Ab=Fn(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*Ga)},(e,t)=>{e.setTime(+e+t*Oi)},(e,t)=>(t-e)/Oi,e=>e.getMinutes());Ab.range;const Pb=Fn(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*Oi)},(e,t)=>(t-e)/Oi,e=>e.getUTCMinutes());Pb.range;const Ob=Fn(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*Ga-e.getMinutes()*Oi)},(e,t)=>{e.setTime(+e+t*Ya)},(e,t)=>(t-e)/Ya,e=>e.getHours());Ob.range;const Tb=Fn(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*Ya)},(e,t)=>(t-e)/Ya,e=>e.getUTCHours());Tb.range;const Kd=Fn(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*Oi)/io,e=>e.getDate()-1);Kd.range;const op=Fn(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/io,e=>e.getUTCDate()-1);op.range;const s4=Fn(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/io,e=>Math.floor(e/io));s4.range;function Hl(e){return Fn(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(t,r)=>{t.setDate(t.getDate()+r*7)},(t,r)=>(r-t-(r.getTimezoneOffset()-t.getTimezoneOffset())*Oi)/Eb)}const lp=Hl(0),pm=Hl(1),G9=Hl(2),Y9=Hl(3),Hc=Hl(4),J9=Hl(5),X9=Hl(6);lp.range;pm.range;G9.range;Y9.range;Hc.range;J9.range;X9.range;function Kl(e){return Fn(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(t,r)=>{t.setUTCDate(t.getUTCDate()+r*7)},(t,r)=>(r-t)/Eb)}const cp=Kl(0),gm=Kl(1),Q9=Kl(2),Z9=Kl(3),Kc=Kl(4),eW=Kl(5),tW=Kl(6);cp.range;gm.range;Q9.range;Z9.range;Kc.range;eW.range;tW.range;const Ib=Fn(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12,e=>e.getMonth());Ib.range;const Db=Fn(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth());Db.range;const ao=Fn(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());ao.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:Fn(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,r)=>{t.setFullYear(t.getFullYear()+r*e)});ao.range;const oo=Fn(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());oo.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:Fn(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,r)=>{t.setUTCFullYear(t.getUTCFullYear()+r*e)});oo.range;function i4(e,t,r,n,s,a){const l=[[Cl,1,Ga],[Cl,5,5*Ga],[Cl,15,15*Ga],[Cl,30,30*Ga],[a,1,Oi],[a,5,5*Oi],[a,15,15*Oi],[a,30,30*Oi],[s,1,Ya],[s,3,3*Ya],[s,6,6*Ya],[s,12,12*Ya],[n,1,io],[n,2,2*io],[r,1,Eb],[t,1,J2],[t,3,3*J2],[e,1,P0]];function u(m,f,p){const y=f<m;y&&([m,f]=[f,m]);const x=p&&typeof p.range=="function"?p:d(m,f,p),j=x?x.range(m,+f+1):[];return y?j.reverse():j}function d(m,f,p){const y=Math.abs(f-m)/p,x=pb(([,,S])=>S).right(l,y);if(x===l.length)return e.every(Qv(m/P0,f/P0,p));if(x===0)return mm.every(Math.max(Qv(m,f,p),1));const[j,w]=l[y/l[x-1][2]<l[x][2]/y?x-1:x];return j.every(w)}return[u,d]}const[rW,nW]=i4(oo,Db,cp,s4,Tb,Pb),[sW,iW]=i4(ao,Ib,lp,Kd,Ob,Ab);function O0(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function T0(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function Ju(e,t,r){return{y:e,m:t,d:r,H:0,M:0,S:0,L:0}}function aW(e){var t=e.dateTime,r=e.date,n=e.time,s=e.periods,a=e.days,l=e.shortDays,u=e.months,d=e.shortMonths,m=Xu(s),f=Qu(s),p=Xu(a),y=Qu(a),x=Xu(l),j=Qu(l),w=Xu(u),S=Qu(u),_=Xu(d),E=Qu(d),C={a:ie,A:te,b:W,B:se,c:null,d:r_,e:r_,f:AW,g:LW,G:UW,H:_W,I:CW,j:EW,L:a4,m:PW,M:OW,p:I,q:B,Q:i_,s:a_,S:TW,u:IW,U:DW,V:$W,w:RW,W:MW,x:null,X:null,y:FW,Y:zW,Z:BW,"%":s_},A={a:Me,A:Se,b:Ie,B:je,c:null,d:n_,e:n_,f:HW,g:rV,G:sV,H:WW,I:VW,j:qW,L:l4,m:KW,M:GW,p:Ne,q:Z,Q:i_,s:a_,S:YW,u:JW,U:XW,V:QW,w:ZW,W:eV,x:null,X:null,y:tV,Y:nV,Z:iV,"%":s_},T={a:fe,A:X,b:K,B:ae,c:U,d:e_,e:e_,f:jW,g:Z2,G:Q2,H:t_,I:t_,j:vW,L:wW,m:yW,M:xW,p:H,q:gW,Q:NW,s:kW,S:bW,u:dW,U:fW,V:hW,w:uW,W:mW,x:ne,X:G,y:Z2,Y:Q2,Z:pW,"%":SW};C.x=P(r,C),C.X=P(n,C),C.c=P(t,C),A.x=P(r,A),A.X=P(n,A),A.c=P(t,A);function P($,xe){return function(le){var M=[],De=-1,Pe=0,et=$.length,rt,kt,lt;for(le instanceof Date||(le=new Date(+le));++De<et;)$.charCodeAt(De)===37&&(M.push($.slice(Pe,De)),(kt=X2[rt=$.charAt(++De)])!=null?rt=$.charAt(++De):kt=rt==="e"?" ":"0",(lt=xe[rt])&&(rt=lt(le,kt)),M.push(rt),Pe=De+1);return M.push($.slice(Pe,De)),M.join("")}}function z($,xe){return function(le){var M=Ju(1900,void 0,1),De=J(M,$,le+="",0),Pe,et;if(De!=le.length)return null;if("Q"in M)return new Date(M.Q);if("s"in M)return new Date(M.s*1e3+("L"in M?M.L:0));if(xe&&!("Z"in M)&&(M.Z=0),"p"in M&&(M.H=M.H%12+M.p*12),M.m===void 0&&(M.m="q"in M?M.q:0),"V"in M){if(M.V<1||M.V>53)return null;"w"in M||(M.w=1),"Z"in M?(Pe=T0(Ju(M.y,0,1)),et=Pe.getUTCDay(),Pe=et>4||et===0?gm.ceil(Pe):gm(Pe),Pe=op.offset(Pe,(M.V-1)*7),M.y=Pe.getUTCFullYear(),M.m=Pe.getUTCMonth(),M.d=Pe.getUTCDate()+(M.w+6)%7):(Pe=O0(Ju(M.y,0,1)),et=Pe.getDay(),Pe=et>4||et===0?pm.ceil(Pe):pm(Pe),Pe=Kd.offset(Pe,(M.V-1)*7),M.y=Pe.getFullYear(),M.m=Pe.getMonth(),M.d=Pe.getDate()+(M.w+6)%7)}else("W"in M||"U"in M)&&("w"in M||(M.w="u"in M?M.u%7:"W"in M?1:0),et="Z"in M?T0(Ju(M.y,0,1)).getUTCDay():O0(Ju(M.y,0,1)).getDay(),M.m=0,M.d="W"in M?(M.w+6)%7+M.W*7-(et+5)%7:M.w+M.U*7-(et+6)%7);return"Z"in M?(M.H+=M.Z/100|0,M.M+=M.Z%100,T0(M)):O0(M)}}function J($,xe,le,M){for(var De=0,Pe=xe.length,et=le.length,rt,kt;De<Pe;){if(M>=et)return-1;if(rt=xe.charCodeAt(De++),rt===37){if(rt=xe.charAt(De++),kt=T[rt in X2?xe.charAt(De++):rt],!kt||(M=kt($,le,M))<0)return-1}else if(rt!=le.charCodeAt(M++))return-1}return M}function H($,xe,le){var M=m.exec(xe.slice(le));return M?($.p=f.get(M[0].toLowerCase()),le+M[0].length):-1}function fe($,xe,le){var M=x.exec(xe.slice(le));return M?($.w=j.get(M[0].toLowerCase()),le+M[0].length):-1}function X($,xe,le){var M=p.exec(xe.slice(le));return M?($.w=y.get(M[0].toLowerCase()),le+M[0].length):-1}function K($,xe,le){var M=_.exec(xe.slice(le));return M?($.m=E.get(M[0].toLowerCase()),le+M[0].length):-1}function ae($,xe,le){var M=w.exec(xe.slice(le));return M?($.m=S.get(M[0].toLowerCase()),le+M[0].length):-1}function U($,xe,le){return J($,t,xe,le)}function ne($,xe,le){return J($,r,xe,le)}function G($,xe,le){return J($,n,xe,le)}function ie($){return l[$.getDay()]}function te($){return a[$.getDay()]}function W($){return d[$.getMonth()]}function se($){return u[$.getMonth()]}function I($){return s[+($.getHours()>=12)]}function B($){return 1+~~($.getMonth()/3)}function Me($){return l[$.getUTCDay()]}function Se($){return a[$.getUTCDay()]}function Ie($){return d[$.getUTCMonth()]}function je($){return u[$.getUTCMonth()]}function Ne($){return s[+($.getUTCHours()>=12)]}function Z($){return 1+~~($.getUTCMonth()/3)}return{format:function($){var xe=P($+="",C);return xe.toString=function(){return $},xe},parse:function($){var xe=z($+="",!1);return xe.toString=function(){return $},xe},utcFormat:function($){var xe=P($+="",A);return xe.toString=function(){return $},xe},utcParse:function($){var xe=z($+="",!0);return xe.toString=function(){return $},xe}}}var X2={"-":"",_:" ",0:"0"},Zn=/^\s*\d+/,oW=/^%/,lW=/[\\^$*+?|[\]().{}]/g;function dr(e,t,r){var n=e<0?"-":"",s=(n?-e:e)+"",a=s.length;return n+(a<r?new Array(r-a+1).join(t)+s:s)}function cW(e){return e.replace(lW,"\\$&")}function Xu(e){return new RegExp("^(?:"+e.map(cW).join("|")+")","i")}function Qu(e){return new Map(e.map((t,r)=>[t.toLowerCase(),r]))}function uW(e,t,r){var n=Zn.exec(t.slice(r,r+1));return n?(e.w=+n[0],r+n[0].length):-1}function dW(e,t,r){var n=Zn.exec(t.slice(r,r+1));return n?(e.u=+n[0],r+n[0].length):-1}function fW(e,t,r){var n=Zn.exec(t.slice(r,r+2));return n?(e.U=+n[0],r+n[0].length):-1}function hW(e,t,r){var n=Zn.exec(t.slice(r,r+2));return n?(e.V=+n[0],r+n[0].length):-1}function mW(e,t,r){var n=Zn.exec(t.slice(r,r+2));return n?(e.W=+n[0],r+n[0].length):-1}function Q2(e,t,r){var n=Zn.exec(t.slice(r,r+4));return n?(e.y=+n[0],r+n[0].length):-1}function Z2(e,t,r){var n=Zn.exec(t.slice(r,r+2));return n?(e.y=+n[0]+(+n[0]>68?1900:2e3),r+n[0].length):-1}function pW(e,t,r){var n=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(r,r+6));return n?(e.Z=n[1]?0:-(n[2]+(n[3]||"00")),r+n[0].length):-1}function gW(e,t,r){var n=Zn.exec(t.slice(r,r+1));return n?(e.q=n[0]*3-3,r+n[0].length):-1}function yW(e,t,r){var n=Zn.exec(t.slice(r,r+2));return n?(e.m=n[0]-1,r+n[0].length):-1}function e_(e,t,r){var n=Zn.exec(t.slice(r,r+2));return n?(e.d=+n[0],r+n[0].length):-1}function vW(e,t,r){var n=Zn.exec(t.slice(r,r+3));return n?(e.m=0,e.d=+n[0],r+n[0].length):-1}function t_(e,t,r){var n=Zn.exec(t.slice(r,r+2));return n?(e.H=+n[0],r+n[0].length):-1}function xW(e,t,r){var n=Zn.exec(t.slice(r,r+2));return n?(e.M=+n[0],r+n[0].length):-1}function bW(e,t,r){var n=Zn.exec(t.slice(r,r+2));return n?(e.S=+n[0],r+n[0].length):-1}function wW(e,t,r){var n=Zn.exec(t.slice(r,r+3));return n?(e.L=+n[0],r+n[0].length):-1}function jW(e,t,r){var n=Zn.exec(t.slice(r,r+6));return n?(e.L=Math.floor(n[0]/1e3),r+n[0].length):-1}function SW(e,t,r){var n=oW.exec(t.slice(r,r+1));return n?r+n[0].length:-1}function NW(e,t,r){var n=Zn.exec(t.slice(r));return n?(e.Q=+n[0],r+n[0].length):-1}function kW(e,t,r){var n=Zn.exec(t.slice(r));return n?(e.s=+n[0],r+n[0].length):-1}function r_(e,t){return dr(e.getDate(),t,2)}function _W(e,t){return dr(e.getHours(),t,2)}function CW(e,t){return dr(e.getHours()%12||12,t,2)}function EW(e,t){return dr(1+Kd.count(ao(e),e),t,3)}function a4(e,t){return dr(e.getMilliseconds(),t,3)}function AW(e,t){return a4(e,t)+"000"}function PW(e,t){return dr(e.getMonth()+1,t,2)}function OW(e,t){return dr(e.getMinutes(),t,2)}function TW(e,t){return dr(e.getSeconds(),t,2)}function IW(e){var t=e.getDay();return t===0?7:t}function DW(e,t){return dr(lp.count(ao(e)-1,e),t,2)}function o4(e){var t=e.getDay();return t>=4||t===0?Hc(e):Hc.ceil(e)}function $W(e,t){return e=o4(e),dr(Hc.count(ao(e),e)+(ao(e).getDay()===4),t,2)}function RW(e){return e.getDay()}function MW(e,t){return dr(pm.count(ao(e)-1,e),t,2)}function FW(e,t){return dr(e.getFullYear()%100,t,2)}function LW(e,t){return e=o4(e),dr(e.getFullYear()%100,t,2)}function zW(e,t){return dr(e.getFullYear()%1e4,t,4)}function UW(e,t){var r=e.getDay();return e=r>=4||r===0?Hc(e):Hc.ceil(e),dr(e.getFullYear()%1e4,t,4)}function BW(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+dr(t/60|0,"0",2)+dr(t%60,"0",2)}function n_(e,t){return dr(e.getUTCDate(),t,2)}function WW(e,t){return dr(e.getUTCHours(),t,2)}function VW(e,t){return dr(e.getUTCHours()%12||12,t,2)}function qW(e,t){return dr(1+op.count(oo(e),e),t,3)}function l4(e,t){return dr(e.getUTCMilliseconds(),t,3)}function HW(e,t){return l4(e,t)+"000"}function KW(e,t){return dr(e.getUTCMonth()+1,t,2)}function GW(e,t){return dr(e.getUTCMinutes(),t,2)}function YW(e,t){return dr(e.getUTCSeconds(),t,2)}function JW(e){var t=e.getUTCDay();return t===0?7:t}function XW(e,t){return dr(cp.count(oo(e)-1,e),t,2)}function c4(e){var t=e.getUTCDay();return t>=4||t===0?Kc(e):Kc.ceil(e)}function QW(e,t){return e=c4(e),dr(Kc.count(oo(e),e)+(oo(e).getUTCDay()===4),t,2)}function ZW(e){return e.getUTCDay()}function eV(e,t){return dr(gm.count(oo(e)-1,e),t,2)}function tV(e,t){return dr(e.getUTCFullYear()%100,t,2)}function rV(e,t){return e=c4(e),dr(e.getUTCFullYear()%100,t,2)}function nV(e,t){return dr(e.getUTCFullYear()%1e4,t,4)}function sV(e,t){var r=e.getUTCDay();return e=r>=4||r===0?Kc(e):Kc.ceil(e),dr(e.getUTCFullYear()%1e4,t,4)}function iV(){return"+0000"}function s_(){return"%"}function i_(e){return+e}function a_(e){return Math.floor(+e/1e3)}var Ec,u4,d4;aV({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function aV(e){return Ec=aW(e),u4=Ec.format,Ec.parse,d4=Ec.utcFormat,Ec.utcParse,Ec}function oV(e){return new Date(e)}function lV(e){return e instanceof Date?+e:+new Date(+e)}function $b(e,t,r,n,s,a,l,u,d,m){var f=wb(),p=f.invert,y=f.domain,x=m(".%L"),j=m(":%S"),w=m("%I:%M"),S=m("%I %p"),_=m("%a %d"),E=m("%b %d"),C=m("%B"),A=m("%Y");function T(P){return(d(P)<P?x:u(P)<P?j:l(P)<P?w:a(P)<P?S:n(P)<P?s(P)<P?_:E:r(P)<P?C:A)(P)}return f.invert=function(P){return new Date(p(P))},f.domain=function(P){return arguments.length?y(Array.from(P,lV)):y().map(oV)},f.ticks=function(P){var z=y();return e(z[0],z[z.length-1],P??10)},f.tickFormat=function(P,z){return z==null?T:m(z)},f.nice=function(P){var z=y();return(!P||typeof P.range!="function")&&(P=t(z[0],z[z.length-1],P??10)),P?y(XP(z,P)):f},f.copy=function(){return Hd(f,$b(e,t,r,n,s,a,l,u,d,m))},f}function cV(){return Fi.apply($b(sW,iW,ao,Ib,lp,Kd,Ob,Ab,Cl,u4).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function uV(){return Fi.apply($b(rW,nW,oo,Db,cp,op,Tb,Pb,Cl,d4).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function up(){var e=0,t=1,r,n,s,a,l=Is,u=!1,d;function m(p){return p==null||isNaN(p=+p)?d:l(s===0?.5:(p=(a(p)-r)*s,u?Math.max(0,Math.min(1,p)):p))}m.domain=function(p){return arguments.length?([e,t]=p,r=a(e=+e),n=a(t=+t),s=r===n?0:1/(n-r),m):[e,t]},m.clamp=function(p){return arguments.length?(u=!!p,m):u},m.interpolator=function(p){return arguments.length?(l=p,m):l};function f(p){return function(y){var x,j;return arguments.length?([x,j]=y,l=p(x,j),m):[l(0),l(1)]}}return m.range=f(cu),m.rangeRound=f(bb),m.unknown=function(p){return arguments.length?(d=p,m):d},function(p){return a=p,r=p(e),n=p(t),s=r===n?0:1/(n-r),m}}function Qo(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function f4(){var e=Xo(up()(Is));return e.copy=function(){return Qo(e,f4())},mo.apply(e,arguments)}function h4(){var e=Nb(up()).domain([1,10]);return e.copy=function(){return Qo(e,h4()).base(e.base())},mo.apply(e,arguments)}function m4(){var e=kb(up());return e.copy=function(){return Qo(e,m4()).constant(e.constant())},mo.apply(e,arguments)}function Rb(){var e=_b(up());return e.copy=function(){return Qo(e,Rb()).exponent(e.exponent())},mo.apply(e,arguments)}function dV(){return Rb.apply(null,arguments).exponent(.5)}function p4(){var e=[],t=Is;function r(n){if(n!=null&&!isNaN(n=+n))return t((Vd(e,n,1)-1)/(e.length-1))}return r.domain=function(n){if(!arguments.length)return e.slice();e=[];for(let s of n)s!=null&&!isNaN(s=+s)&&e.push(s);return e.sort(Vo),r},r.interpolator=function(n){return arguments.length?(t=n,r):t},r.range=function(){return e.map((n,s)=>t(s/(e.length-1)))},r.quantiles=function(n){return Array.from({length:n+1},(s,a)=>J7(e,a/n))},r.copy=function(){return p4(t).domain(e)},mo.apply(r,arguments)}function dp(){var e=0,t=.5,r=1,n=1,s,a,l,u,d,m=Is,f,p=!1,y;function x(w){return isNaN(w=+w)?y:(w=.5+((w=+f(w))-a)*(n*w<n*a?u:d),m(p?Math.max(0,Math.min(1,w)):w))}x.domain=function(w){return arguments.length?([e,t,r]=w,s=f(e=+e),a=f(t=+t),l=f(r=+r),u=s===a?0:.5/(a-s),d=a===l?0:.5/(l-a),n=a<s?-1:1,x):[e,t,r]},x.clamp=function(w){return arguments.length?(p=!!w,x):p},x.interpolator=function(w){return arguments.length?(m=w,x):m};function j(w){return function(S){var _,E,C;return arguments.length?([_,E,C]=S,m=S9(w,[_,E,C]),x):[m(0),m(.5),m(1)]}}return x.range=j(cu),x.rangeRound=j(bb),x.unknown=function(w){return arguments.length?(y=w,x):y},function(w){return f=w,s=w(e),a=w(t),l=w(r),u=s===a?0:.5/(a-s),d=a===l?0:.5/(l-a),n=a<s?-1:1,x}}function g4(){var e=Xo(dp()(Is));return e.copy=function(){return Qo(e,g4())},mo.apply(e,arguments)}function y4(){var e=Nb(dp()).domain([.1,1,10]);return e.copy=function(){return Qo(e,y4()).base(e.base())},mo.apply(e,arguments)}function v4(){var e=kb(dp());return e.copy=function(){return Qo(e,v4()).constant(e.constant())},mo.apply(e,arguments)}function Mb(){var e=_b(dp());return e.copy=function(){return Qo(e,Mb()).exponent(e.exponent())},mo.apply(e,arguments)}function fV(){return Mb.apply(null,arguments).exponent(.5)}const ad=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:yb,scaleDiverging:g4,scaleDivergingLog:y4,scaleDivergingPow:Mb,scaleDivergingSqrt:fV,scaleDivergingSymlog:v4,scaleIdentity:JP,scaleImplicit:Zv,scaleLinear:YP,scaleLog:QP,scaleOrdinal:gb,scalePoint:Z7,scalePow:Cb,scaleQuantile:t4,scaleQuantize:r4,scaleRadial:e4,scaleSequential:f4,scaleSequentialLog:h4,scaleSequentialPow:Rb,scaleSequentialQuantile:p4,scaleSequentialSqrt:dV,scaleSequentialSymlog:m4,scaleSqrt:H9,scaleSymlog:ZP,scaleThreshold:n4,scaleTime:cV,scaleUtc:uV,tickFormat:GP},Symbol.toStringTag,{value:"Module"}));var Zo=e=>e.chartData,hV=be([Zo],e=>{var t=e.chartData!=null?e.chartData.length-1:0;return{chartData:e.chartData,computedData:e.computedData,dataEndIndex:t,dataStartIndex:0}}),Fb=(e,t,r,n)=>n?hV(e):Zo(e);function Ll(e){if(Array.isArray(e)&&e.length===2){var[t,r]=e;if(mn(t)&&mn(r))return!0}return!1}function o_(e,t,r){return r?e:[Math.min(e[0],t[0]),Math.max(e[1],t[1])]}function x4(e,t){if(t&&typeof e!="function"&&Array.isArray(e)&&e.length===2){var[r,n]=e,s,a;if(mn(r))s=r;else if(typeof r=="function")return;if(mn(n))a=n;else if(typeof n=="function")return;var l=[s,a];if(Ll(l))return l}}function mV(e,t,r){if(!(!r&&t==null)){if(typeof e=="function"&&t!=null)try{var n=e(t,r);if(Ll(n))return o_(n,t,r)}catch{}if(Array.isArray(e)&&e.length===2){var[s,a]=e,l,u;if(s==="auto")t!=null&&(l=Math.min(...t));else if(Nt(s))l=s;else if(typeof s=="function")try{t!=null&&(l=s(t==null?void 0:t[0]))}catch{}else if(typeof s=="string"&&Bk.test(s)){var d=Bk.exec(s);if(d==null||t==null)l=void 0;else{var m=+d[1];l=t[0]-m}}else l=t==null?void 0:t[0];if(a==="auto")t!=null&&(u=Math.max(...t));else if(Nt(a))u=a;else if(typeof a=="function")try{t!=null&&(u=a(t==null?void 0:t[1]))}catch{}else if(typeof a=="string"&&Wk.test(a)){var f=Wk.exec(a);if(f==null||t==null)u=void 0;else{var p=+f[1];u=t[1]+p}}else u=t==null?void 0:t[1];var y=[l,u];if(Ll(y))return t==null?y:o_(y,t,r)}}}var uu=1e9,pV={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},zb,Hr=!0,$i="[DecimalError] ",Dl=$i+"Invalid argument: ",Lb=$i+"Exponent out of range: ",du=Math.floor,xl=Math.pow,gV=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,hi,Gn=1e7,Mr=7,b4=9007199254740991,ym=du(b4/Mr),st={};st.absoluteValue=st.abs=function(){var e=new this.constructor(this);return e.s&&(e.s=1),e};st.comparedTo=st.cmp=function(e){var t,r,n,s,a=this;if(e=new a.constructor(e),a.s!==e.s)return a.s||-e.s;if(a.e!==e.e)return a.e>e.e^a.s<0?1:-1;for(n=a.d.length,s=e.d.length,t=0,r=n<s?n:s;t<r;++t)if(a.d[t]!==e.d[t])return a.d[t]>e.d[t]^a.s<0?1:-1;return n===s?0:n>s^a.s<0?1:-1};st.decimalPlaces=st.dp=function(){var e=this,t=e.d.length-1,r=(t-e.e)*Mr;if(t=e.d[t],t)for(;t%10==0;t/=10)r--;return r<0?0:r};st.dividedBy=st.div=function(e){return Za(this,new this.constructor(e))};st.dividedToIntegerBy=st.idiv=function(e){var t=this,r=t.constructor;return kr(Za(t,new r(e),0,1),r.precision)};st.equals=st.eq=function(e){return!this.cmp(e)};st.exponent=function(){return Cn(this)};st.greaterThan=st.gt=function(e){return this.cmp(e)>0};st.greaterThanOrEqualTo=st.gte=function(e){return this.cmp(e)>=0};st.isInteger=st.isint=function(){return this.e>this.d.length-2};st.isNegative=st.isneg=function(){return this.s<0};st.isPositive=st.ispos=function(){return this.s>0};st.isZero=function(){return this.s===0};st.lessThan=st.lt=function(e){return this.cmp(e)<0};st.lessThanOrEqualTo=st.lte=function(e){return this.cmp(e)<1};st.logarithm=st.log=function(e){var t,r=this,n=r.constructor,s=n.precision,a=s+5;if(e===void 0)e=new n(10);else if(e=new n(e),e.s<1||e.eq(hi))throw Error($i+"NaN");if(r.s<1)throw Error($i+(r.s?"NaN":"-Infinity"));return r.eq(hi)?new n(0):(Hr=!1,t=Za(Od(r,a),Od(e,a),a),Hr=!0,kr(t,s))};st.minus=st.sub=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?S4(t,e):w4(t,(e.s=-e.s,e))};st.modulo=st.mod=function(e){var t,r=this,n=r.constructor,s=n.precision;if(e=new n(e),!e.s)throw Error($i+"NaN");return r.s?(Hr=!1,t=Za(r,e,0,1).times(e),Hr=!0,r.minus(t)):kr(new n(r),s)};st.naturalExponential=st.exp=function(){return j4(this)};st.naturalLogarithm=st.ln=function(){return Od(this)};st.negated=st.neg=function(){var e=new this.constructor(this);return e.s=-e.s||0,e};st.plus=st.add=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?w4(t,e):S4(t,(e.s=-e.s,e))};st.precision=st.sd=function(e){var t,r,n,s=this;if(e!==void 0&&e!==!!e&&e!==1&&e!==0)throw Error(Dl+e);if(t=Cn(s)+1,n=s.d.length-1,r=n*Mr+1,n=s.d[n],n){for(;n%10==0;n/=10)r--;for(n=s.d[0];n>=10;n/=10)r++}return e&&t>r?t:r};st.squareRoot=st.sqrt=function(){var e,t,r,n,s,a,l,u=this,d=u.constructor;if(u.s<1){if(!u.s)return new d(0);throw Error($i+"NaN")}for(e=Cn(u),Hr=!1,s=Math.sqrt(+u),s==0||s==1/0?(t=wa(u.d),(t.length+e)%2==0&&(t+="0"),s=Math.sqrt(t),e=du((e+1)/2)-(e<0||e%2),s==1/0?t="5e"+e:(t=s.toExponential(),t=t.slice(0,t.indexOf("e")+1)+e),n=new d(t)):n=new d(s.toString()),r=d.precision,s=l=r+3;;)if(a=n,n=a.plus(Za(u,a,l+2)).times(.5),wa(a.d).slice(0,l)===(t=wa(n.d)).slice(0,l)){if(t=t.slice(l-3,l+1),s==l&&t=="4999"){if(kr(a,r+1,0),a.times(a).eq(u)){n=a;break}}else if(t!="9999")break;l+=4}return Hr=!0,kr(n,r)};st.times=st.mul=function(e){var t,r,n,s,a,l,u,d,m,f=this,p=f.constructor,y=f.d,x=(e=new p(e)).d;if(!f.s||!e.s)return new p(0);for(e.s*=f.s,r=f.e+e.e,d=y.length,m=x.length,d<m&&(a=y,y=x,x=a,l=d,d=m,m=l),a=[],l=d+m,n=l;n--;)a.push(0);for(n=m;--n>=0;){for(t=0,s=d+n;s>n;)u=a[s]+x[n]*y[s-n-1]+t,a[s--]=u%Gn|0,t=u/Gn|0;a[s]=(a[s]+t)%Gn|0}for(;!a[--l];)a.pop();return t?++r:a.shift(),e.d=a,e.e=r,Hr?kr(e,p.precision):e};st.toDecimalPlaces=st.todp=function(e,t){var r=this,n=r.constructor;return r=new n(r),e===void 0?r:(_a(e,0,uu),t===void 0?t=n.rounding:_a(t,0,8),kr(r,e+Cn(r)+1,t))};st.toExponential=function(e,t){var r,n=this,s=n.constructor;return e===void 0?r=zl(n,!0):(_a(e,0,uu),t===void 0?t=s.rounding:_a(t,0,8),n=kr(new s(n),e+1,t),r=zl(n,!0,e+1)),r};st.toFixed=function(e,t){var r,n,s=this,a=s.constructor;return e===void 0?zl(s):(_a(e,0,uu),t===void 0?t=a.rounding:_a(t,0,8),n=kr(new a(s),e+Cn(s)+1,t),r=zl(n.abs(),!1,e+Cn(n)+1),s.isneg()&&!s.isZero()?"-"+r:r)};st.toInteger=st.toint=function(){var e=this,t=e.constructor;return kr(new t(e),Cn(e)+1,t.rounding)};st.toNumber=function(){return+this};st.toPower=st.pow=function(e){var t,r,n,s,a,l,u=this,d=u.constructor,m=12,f=+(e=new d(e));if(!e.s)return new d(hi);if(u=new d(u),!u.s){if(e.s<1)throw Error($i+"Infinity");return u}if(u.eq(hi))return u;if(n=d.precision,e.eq(hi))return kr(u,n);if(t=e.e,r=e.d.length-1,l=t>=r,a=u.s,l){if((r=f<0?-f:f)<=b4){for(s=new d(hi),t=Math.ceil(n/Mr+4),Hr=!1;r%2&&(s=s.times(u),c_(s.d,t)),r=du(r/2),r!==0;)u=u.times(u),c_(u.d,t);return Hr=!0,e.s<0?new d(hi).div(s):kr(s,n)}}else if(a<0)throw Error($i+"NaN");return a=a<0&&e.d[Math.max(t,r)]&1?-1:1,u.s=1,Hr=!1,s=e.times(Od(u,n+m)),Hr=!0,s=j4(s),s.s=a,s};st.toPrecision=function(e,t){var r,n,s=this,a=s.constructor;return e===void 0?(r=Cn(s),n=zl(s,r<=a.toExpNeg||r>=a.toExpPos)):(_a(e,1,uu),t===void 0?t=a.rounding:_a(t,0,8),s=kr(new a(s),e,t),r=Cn(s),n=zl(s,e<=r||r<=a.toExpNeg,e)),n};st.toSignificantDigits=st.tosd=function(e,t){var r=this,n=r.constructor;return e===void 0?(e=n.precision,t=n.rounding):(_a(e,1,uu),t===void 0?t=n.rounding:_a(t,0,8)),kr(new n(r),e,t)};st.toString=st.valueOf=st.val=st.toJSON=st[Symbol.for("nodejs.util.inspect.custom")]=function(){var e=this,t=Cn(e),r=e.constructor;return zl(e,t<=r.toExpNeg||t>=r.toExpPos)};function w4(e,t){var r,n,s,a,l,u,d,m,f=e.constructor,p=f.precision;if(!e.s||!t.s)return t.s||(t=new f(e)),Hr?kr(t,p):t;if(d=e.d,m=t.d,l=e.e,s=t.e,d=d.slice(),a=l-s,a){for(a<0?(n=d,a=-a,u=m.length):(n=m,s=l,u=d.length),l=Math.ceil(p/Mr),u=l>u?l+1:u+1,a>u&&(a=u,n.length=1),n.reverse();a--;)n.push(0);n.reverse()}for(u=d.length,a=m.length,u-a<0&&(a=u,n=m,m=d,d=n),r=0;a;)r=(d[--a]=d[a]+m[a]+r)/Gn|0,d[a]%=Gn;for(r&&(d.unshift(r),++s),u=d.length;d[--u]==0;)d.pop();return t.d=d,t.e=s,Hr?kr(t,p):t}function _a(e,t,r){if(e!==~~e||e<t||e>r)throw Error(Dl+e)}function wa(e){var t,r,n,s=e.length-1,a="",l=e[0];if(s>0){for(a+=l,t=1;t<s;t++)n=e[t]+"",r=Mr-n.length,r&&(a+=Fo(r)),a+=n;l=e[t],n=l+"",r=Mr-n.length,r&&(a+=Fo(r))}else if(l===0)return"0";for(;l%10===0;)l/=10;return a+l}var Za=(function(){function e(n,s){var a,l=0,u=n.length;for(n=n.slice();u--;)a=n[u]*s+l,n[u]=a%Gn|0,l=a/Gn|0;return l&&n.unshift(l),n}function t(n,s,a,l){var u,d;if(a!=l)d=a>l?1:-1;else for(u=d=0;u<a;u++)if(n[u]!=s[u]){d=n[u]>s[u]?1:-1;break}return d}function r(n,s,a){for(var l=0;a--;)n[a]-=l,l=n[a]<s[a]?1:0,n[a]=l*Gn+n[a]-s[a];for(;!n[0]&&n.length>1;)n.shift()}return function(n,s,a,l){var u,d,m,f,p,y,x,j,w,S,_,E,C,A,T,P,z,J,H=n.constructor,fe=n.s==s.s?1:-1,X=n.d,K=s.d;if(!n.s)return new H(n);if(!s.s)throw Error($i+"Division by zero");for(d=n.e-s.e,z=K.length,T=X.length,x=new H(fe),j=x.d=[],m=0;K[m]==(X[m]||0);)++m;if(K[m]>(X[m]||0)&&--d,a==null?E=a=H.precision:l?E=a+(Cn(n)-Cn(s))+1:E=a,E<0)return new H(0);if(E=E/Mr+2|0,m=0,z==1)for(f=0,K=K[0],E++;(m<T||f)&&E--;m++)C=f*Gn+(X[m]||0),j[m]=C/K|0,f=C%K|0;else{for(f=Gn/(K[0]+1)|0,f>1&&(K=e(K,f),X=e(X,f),z=K.length,T=X.length),A=z,w=X.slice(0,z),S=w.length;S<z;)w[S++]=0;J=K.slice(),J.unshift(0),P=K[0],K[1]>=Gn/2&&++P;do f=0,u=t(K,w,z,S),u<0?(_=w[0],z!=S&&(_=_*Gn+(w[1]||0)),f=_/P|0,f>1?(f>=Gn&&(f=Gn-1),p=e(K,f),y=p.length,S=w.length,u=t(p,w,y,S),u==1&&(f--,r(p,z<y?J:K,y))):(f==0&&(u=f=1),p=K.slice()),y=p.length,y<S&&p.unshift(0),r(w,p,S),u==-1&&(S=w.length,u=t(K,w,z,S),u<1&&(f++,r(w,z<S?J:K,S))),S=w.length):u===0&&(f++,w=[0]),j[m++]=f,u&&w[0]?w[S++]=X[A]||0:(w=[X[A]],S=1);while((A++<T||w[0]!==void 0)&&E--)}return j[0]||j.shift(),x.e=d,kr(x,l?a+Cn(x)+1:a)}})();function j4(e,t){var r,n,s,a,l,u,d=0,m=0,f=e.constructor,p=f.precision;if(Cn(e)>16)throw Error(Lb+Cn(e));if(!e.s)return new f(hi);for(Hr=!1,u=p,l=new f(.03125);e.abs().gte(.1);)e=e.times(l),m+=5;for(n=Math.log(xl(2,m))/Math.LN10*2+5|0,u+=n,r=s=a=new f(hi),f.precision=u;;){if(s=kr(s.times(e),u),r=r.times(++d),l=a.plus(Za(s,r,u)),wa(l.d).slice(0,u)===wa(a.d).slice(0,u)){for(;m--;)a=kr(a.times(a),u);return f.precision=p,t==null?(Hr=!0,kr(a,p)):a}a=l}}function Cn(e){for(var t=e.e*Mr,r=e.d[0];r>=10;r/=10)t++;return t}function I0(e,t,r){if(t>e.LN10.sd())throw Hr=!0,r&&(e.precision=r),Error($i+"LN10 precision limit exceeded");return kr(new e(e.LN10),t)}function Fo(e){for(var t="";e--;)t+="0";return t}function Od(e,t){var r,n,s,a,l,u,d,m,f,p=1,y=10,x=e,j=x.d,w=x.constructor,S=w.precision;if(x.s<1)throw Error($i+(x.s?"NaN":"-Infinity"));if(x.eq(hi))return new w(0);if(t==null?(Hr=!1,m=S):m=t,x.eq(10))return t==null&&(Hr=!0),I0(w,m);if(m+=y,w.precision=m,r=wa(j),n=r.charAt(0),a=Cn(x),Math.abs(a)<15e14){for(;n<7&&n!=1||n==1&&r.charAt(1)>3;)x=x.times(e),r=wa(x.d),n=r.charAt(0),p++;a=Cn(x),n>1?(x=new w("0."+r),a++):x=new w(n+"."+r.slice(1))}else return d=I0(w,m+2,S).times(a+""),x=Od(new w(n+"."+r.slice(1)),m-y).plus(d),w.precision=S,t==null?(Hr=!0,kr(x,S)):x;for(u=l=x=Za(x.minus(hi),x.plus(hi),m),f=kr(x.times(x),m),s=3;;){if(l=kr(l.times(f),m),d=u.plus(Za(l,new w(s),m)),wa(d.d).slice(0,m)===wa(u.d).slice(0,m))return u=u.times(2),a!==0&&(u=u.plus(I0(w,m+2,S).times(a+""))),u=Za(u,new w(p),m),w.precision=S,t==null?(Hr=!0,kr(u,S)):u;u=d,s+=2}}function l_(e,t){var r,n,s;for((r=t.indexOf("."))>-1&&(t=t.replace(".","")),(n=t.search(/e/i))>0?(r<0&&(r=n),r+=+t.slice(n+1),t=t.substring(0,n)):r<0&&(r=t.length),n=0;t.charCodeAt(n)===48;)++n;for(s=t.length;t.charCodeAt(s-1)===48;)--s;if(t=t.slice(n,s),t){if(s-=n,r=r-n-1,e.e=du(r/Mr),e.d=[],n=(r+1)%Mr,r<0&&(n+=Mr),n<s){for(n&&e.d.push(+t.slice(0,n)),s-=Mr;n<s;)e.d.push(+t.slice(n,n+=Mr));t=t.slice(n),n=Mr-t.length}else n-=s;for(;n--;)t+="0";if(e.d.push(+t),Hr&&(e.e>ym||e.e<-ym))throw Error(Lb+r)}else e.s=0,e.e=0,e.d=[0];return e}function kr(e,t,r){var n,s,a,l,u,d,m,f,p=e.d;for(l=1,a=p[0];a>=10;a/=10)l++;if(n=t-l,n<0)n+=Mr,s=t,m=p[f=0];else{if(f=Math.ceil((n+1)/Mr),a=p.length,f>=a)return e;for(m=a=p[f],l=1;a>=10;a/=10)l++;n%=Mr,s=n-Mr+l}if(r!==void 0&&(a=xl(10,l-s-1),u=m/a%10|0,d=t<0||p[f+1]!==void 0||m%a,d=r<4?(u||d)&&(r==0||r==(e.s<0?3:2)):u>5||u==5&&(r==4||d||r==6&&(n>0?s>0?m/xl(10,l-s):0:p[f-1])%10&1||r==(e.s<0?8:7))),t<1||!p[0])return d?(a=Cn(e),p.length=1,t=t-a-1,p[0]=xl(10,(Mr-t%Mr)%Mr),e.e=du(-t/Mr)||0):(p.length=1,p[0]=e.e=e.s=0),e;if(n==0?(p.length=f,a=1,f--):(p.length=f+1,a=xl(10,Mr-n),p[f]=s>0?(m/xl(10,l-s)%xl(10,s)|0)*a:0),d)for(;;)if(f==0){(p[0]+=a)==Gn&&(p[0]=1,++e.e);break}else{if(p[f]+=a,p[f]!=Gn)break;p[f--]=0,a=1}for(n=p.length;p[--n]===0;)p.pop();if(Hr&&(e.e>ym||e.e<-ym))throw Error(Lb+Cn(e));return e}function S4(e,t){var r,n,s,a,l,u,d,m,f,p,y=e.constructor,x=y.precision;if(!e.s||!t.s)return t.s?t.s=-t.s:t=new y(e),Hr?kr(t,x):t;if(d=e.d,p=t.d,n=t.e,m=e.e,d=d.slice(),l=m-n,l){for(f=l<0,f?(r=d,l=-l,u=p.length):(r=p,n=m,u=d.length),s=Math.max(Math.ceil(x/Mr),u)+2,l>s&&(l=s,r.length=1),r.reverse(),s=l;s--;)r.push(0);r.reverse()}else{for(s=d.length,u=p.length,f=s<u,f&&(u=s),s=0;s<u;s++)if(d[s]!=p[s]){f=d[s]<p[s];break}l=0}for(f&&(r=d,d=p,p=r,t.s=-t.s),u=d.length,s=p.length-u;s>0;--s)d[u++]=0;for(s=p.length;s>l;){if(d[--s]<p[s]){for(a=s;a&&d[--a]===0;)d[a]=Gn-1;--d[a],d[s]+=Gn}d[s]-=p[s]}for(;d[--u]===0;)d.pop();for(;d[0]===0;d.shift())--n;return d[0]?(t.d=d,t.e=n,Hr?kr(t,x):t):new y(0)}function zl(e,t,r){var n,s=Cn(e),a=wa(e.d),l=a.length;return t?(r&&(n=r-l)>0?a=a.charAt(0)+"."+a.slice(1)+Fo(n):l>1&&(a=a.charAt(0)+"."+a.slice(1)),a=a+(s<0?"e":"e+")+s):s<0?(a="0."+Fo(-s-1)+a,r&&(n=r-l)>0&&(a+=Fo(n))):s>=l?(a+=Fo(s+1-l),r&&(n=r-s-1)>0&&(a=a+"."+Fo(n))):((n=s+1)<l&&(a=a.slice(0,n)+"."+a.slice(n)),r&&(n=r-l)>0&&(s+1===l&&(a+="."),a+=Fo(n))),e.s<0?"-"+a:a}function c_(e,t){if(e.length>t)return e.length=t,!0}function N4(e){var t,r,n;function s(a){var l=this;if(!(l instanceof s))return new s(a);if(l.constructor=s,a instanceof s){l.s=a.s,l.e=a.e,l.d=(a=a.d)?a.slice():a;return}if(typeof a=="number"){if(a*0!==0)throw Error(Dl+a);if(a>0)l.s=1;else if(a<0)a=-a,l.s=-1;else{l.s=0,l.e=0,l.d=[0];return}if(a===~~a&&a<1e7){l.e=0,l.d=[a];return}return l_(l,a.toString())}else if(typeof a!="string")throw Error(Dl+a);if(a.charCodeAt(0)===45?(a=a.slice(1),l.s=-1):l.s=1,gV.test(a))l_(l,a);else throw Error(Dl+a)}if(s.prototype=st,s.ROUND_UP=0,s.ROUND_DOWN=1,s.ROUND_CEIL=2,s.ROUND_FLOOR=3,s.ROUND_HALF_UP=4,s.ROUND_HALF_DOWN=5,s.ROUND_HALF_EVEN=6,s.ROUND_HALF_CEIL=7,s.ROUND_HALF_FLOOR=8,s.clone=N4,s.config=s.set=yV,e===void 0&&(e={}),e)for(n=["precision","rounding","toExpNeg","toExpPos","LN10"],t=0;t<n.length;)e.hasOwnProperty(r=n[t++])||(e[r]=this[r]);return s.config(e),s}function yV(e){if(!e||typeof e!="object")throw Error($i+"Object expected");var t,r,n,s=["precision",1,uu,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(t=0;t<s.length;t+=3)if((n=e[r=s[t]])!==void 0)if(du(n)===n&&n>=s[t+1]&&n<=s[t+2])this[r]=n;else throw Error(Dl+r+": "+n);if((n=e[r="LN10"])!==void 0)if(n==Math.LN10)this[r]=new this(n);else throw Error(Dl+r+": "+n);return this}var zb=N4(pV);hi=new zb(1);const vr=zb;var vV=e=>e,k4={},_4=e=>e===k4,u_=e=>function t(){return arguments.length===0||arguments.length===1&&_4(arguments.length<=0?void 0:arguments[0])?t:e(...arguments)},C4=(e,t)=>e===1?t:u_(function(){for(var r=arguments.length,n=new Array(r),s=0;s<r;s++)n[s]=arguments[s];var a=n.filter(l=>l!==k4).length;return a>=e?t(...n):C4(e-a,u_(function(){for(var l=arguments.length,u=new Array(l),d=0;d<l;d++)u[d]=arguments[d];var m=n.map(f=>_4(f)?u.shift():f);return t(...m,...u)}))}),fp=e=>C4(e.length,e),nx=(e,t)=>{for(var r=[],n=e;n<t;++n)r[n-e]=n;return r},xV=fp((e,t)=>Array.isArray(t)?t.map(e):Object.keys(t).map(r=>t[r]).map(e)),bV=function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];if(!r.length)return vV;var s=r.reverse(),a=s[0],l=s.slice(1);return function(){return l.reduce((u,d)=>d(u),a(...arguments))}},sx=e=>Array.isArray(e)?e.reverse():e.split("").reverse().join(""),E4=e=>{var t=null,r=null;return function(){for(var n=arguments.length,s=new Array(n),a=0;a<n;a++)s[a]=arguments[a];return t&&s.every((l,u)=>{var d;return l===((d=t)===null||d===void 0?void 0:d[u])})||(t=s,r=e(...s)),r}};function A4(e){var t;return e===0?t=1:t=Math.floor(new vr(e).abs().log(10).toNumber())+1,t}function P4(e,t,r){for(var n=new vr(e),s=0,a=[];n.lt(t)&&s<1e5;)a.push(n.toNumber()),n=n.add(r),s++;return a}fp((e,t,r)=>{var n=+e,s=+t;return n+r*(s-n)});fp((e,t,r)=>{var n=t-+e;return n=n||1/0,(r-e)/n});fp((e,t,r)=>{var n=t-+e;return n=n||1/0,Math.max(0,Math.min(1,(r-e)/n))});var O4=e=>{var[t,r]=e,[n,s]=[t,r];return t>r&&([n,s]=[r,t]),[n,s]},T4=(e,t,r)=>{if(e.lte(0))return new vr(0);var n=A4(e.toNumber()),s=new vr(10).pow(n),a=e.div(s),l=n!==1?.05:.1,u=new vr(Math.ceil(a.div(l).toNumber())).add(r).mul(l),d=u.mul(s);return t?new vr(d.toNumber()):new vr(Math.ceil(d.toNumber()))},wV=(e,t,r)=>{var n=new vr(1),s=new vr(e);if(!s.isint()&&r){var a=Math.abs(e);a<1?(n=new vr(10).pow(A4(e)-1),s=new vr(Math.floor(s.div(n).toNumber())).mul(n)):a>1&&(s=new vr(Math.floor(e)))}else e===0?s=new vr(Math.floor((t-1)/2)):r||(s=new vr(Math.floor(e)));var l=Math.floor((t-1)/2),u=bV(xV(d=>s.add(new vr(d-l).mul(n)).toNumber()),nx);return u(0,t)},I4=function(t,r,n,s){var a=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((r-t)/(n-1)))return{step:new vr(0),tickMin:new vr(0),tickMax:new vr(0)};var l=T4(new vr(r).sub(t).div(n-1),s,a),u;t<=0&&r>=0?u=new vr(0):(u=new vr(t).add(r).div(2),u=u.sub(new vr(u).mod(l)));var d=Math.ceil(u.sub(t).div(l).toNumber()),m=Math.ceil(new vr(r).sub(u).div(l).toNumber()),f=d+m+1;return f>n?I4(t,r,n,s,a+1):(f<n&&(m=r>0?m+(n-f):m,d=r>0?d:d+(n-f)),{step:l,tickMin:u.sub(new vr(d).mul(l)),tickMax:u.add(new vr(m).mul(l))})};function jV(e){var[t,r]=e,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,a=Math.max(n,2),[l,u]=O4([t,r]);if(l===-1/0||u===1/0){var d=u===1/0?[l,...nx(0,n-1).map(()=>1/0)]:[...nx(0,n-1).map(()=>-1/0),u];return t>r?sx(d):d}if(l===u)return wV(l,n,s);var{step:m,tickMin:f,tickMax:p}=I4(l,u,a,s,0),y=P4(f,p.add(new vr(.1).mul(m)),m);return t>r?sx(y):y}function SV(e,t){var[r,n]=e,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,[a,l]=O4([r,n]);if(a===-1/0||l===1/0)return[r,n];if(a===l)return[a];var u=Math.max(t,2),d=T4(new vr(l).sub(a).div(u-1),s,0),m=[...P4(new vr(a),new vr(l),d),l];return s===!1&&(m=m.map(f=>Math.round(f))),r>n?sx(m):m}var NV=E4(jV),kV=E4(SV),D4=e=>e.rootProps.maxBarSize,_V=e=>e.rootProps.barGap,$4=e=>e.rootProps.barCategoryGap,CV=e=>e.rootProps.barSize,hp=e=>e.rootProps.stackOffset,Ub=e=>e.options.chartName,Bb=e=>e.rootProps.syncId,R4=e=>e.rootProps.syncMethod,Wb=e=>e.options.eventEmitter,Ys={grid:-100,barBackground:-50,area:100,cursorRectangle:200,bar:300,line:400,axis:500,scatter:600,activeBar:1e3,cursorLine:1100,activeDot:1200,label:2e3},Ha={allowDuplicatedCategory:!0,angleAxisId:0,reversed:!1,scale:"auto",tick:!0,type:"category"},ui={allowDataOverflow:!1,allowDuplicatedCategory:!0,radiusAxisId:0,scale:"auto",tick:!0,tickCount:5,type:"number"},mp=(e,t)=>{if(!(!e||!t))return e!=null&&e.reversed?[t[1],t[0]]:t},EV={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:!1,dataKey:void 0,domain:void 0,id:Ha.angleAxisId,includeHidden:!1,name:void 0,reversed:Ha.reversed,scale:Ha.scale,tick:Ha.tick,tickCount:void 0,ticks:void 0,type:Ha.type,unit:void 0},AV={allowDataOverflow:ui.allowDataOverflow,allowDecimals:!1,allowDuplicatedCategory:ui.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:ui.radiusAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:ui.scale,tick:ui.tick,tickCount:ui.tickCount,ticks:void 0,type:ui.type,unit:void 0},PV={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:Ha.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:Ha.angleAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:Ha.scale,tick:Ha.tick,tickCount:void 0,ticks:void 0,type:"number",unit:void 0},OV={allowDataOverflow:ui.allowDataOverflow,allowDecimals:!1,allowDuplicatedCategory:ui.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:ui.radiusAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:ui.scale,tick:ui.tick,tickCount:ui.tickCount,ticks:void 0,type:"category",unit:void 0},Vb=(e,t)=>e.polarAxis.angleAxis[t]!=null?e.polarAxis.angleAxis[t]:e.layout.layoutType==="radial"?PV:EV,qb=(e,t)=>e.polarAxis.radiusAxis[t]!=null?e.polarAxis.radiusAxis[t]:e.layout.layoutType==="radial"?OV:AV,pp=e=>e.polarOptions,Hb=be([fo,ho,Qn],N7),M4=be([pp,Hb],(e,t)=>{if(e!=null)return sa(e.innerRadius,t,0)}),F4=be([pp,Hb],(e,t)=>{if(e!=null)return sa(e.outerRadius,t,t*.8)}),TV=e=>{if(e==null)return[0,0];var{startAngle:t,endAngle:r}=e;return[t,r]},L4=be([pp],TV);be([Vb,L4],mp);var z4=be([Hb,M4,F4],(e,t,r)=>{if(!(e==null||t==null||r==null))return[t,r]});be([qb,z4],mp);var U4=be([xr,pp,M4,F4,fo,ho],(e,t,r,n,s,a)=>{if(!(e!=="centric"&&e!=="radial"||t==null||r==null||n==null)){var{cx:l,cy:u,startAngle:d,endAngle:m}=t;return{cx:sa(l,s,s/2),cy:sa(u,a,a/2),innerRadius:r,outerRadius:n,startAngle:d,endAngle:m,clockWise:!1}}}),Ln=(e,t)=>t,gp=(e,t,r)=>r;function Kb(e){return e==null?void 0:e.id}function B4(e,t,r){var{chartData:n=[]}=t,{allowDuplicatedCategory:s,dataKey:a}=r,l=new Map;return e.forEach(u=>{var d,m=(d=u.data)!==null&&d!==void 0?d:n;if(!(m==null||m.length===0)){var f=Kb(u);m.forEach((p,y)=>{var x=a==null||s?y:String(Ds(p,a,null)),j=Ds(p,u.dataKey,0),w;l.has(x)?w=l.get(x):w={},Object.assign(w,{[f]:j}),l.set(x,w)})}}),Array.from(l.values())}function yp(e){return e.stackId!=null&&e.dataKey!=null}var vp=(e,t)=>e===t?!0:e==null||t==null?!1:e[0]===t[0]&&e[1]===t[1];function xp(e,t){return Array.isArray(e)&&Array.isArray(t)&&e.length===0&&t.length===0?!0:e===t}function IV(e,t){if(e.length===t.length){for(var r=0;r<e.length;r++)if(e[r]!==t[r])return!1;return!0}return!1}var zn=e=>{var t=xr(e);return t==="horizontal"?"xAxis":t==="vertical"?"yAxis":t==="centric"?"angleAxis":"radiusAxis"},fu=e=>e.tooltip.settings.axisId;function d_(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function vm(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?d_(Object(r),!0).forEach(function(n){DV(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):d_(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function DV(e,t,r){return(t=$V(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function $V(e){var t=RV(e,"string");return typeof t=="symbol"?t:t+""}function RV(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var ix=[0,"auto"],oi={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:void 0,height:30,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"bottom",padding:{left:0,right:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"category",unit:void 0},W4=(e,t)=>e.cartesianAxis.xAxis[t],po=(e,t)=>{var r=W4(e,t);return r??oi},li={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:ix,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"left",padding:{top:0,bottom:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"number",unit:void 0,width:Wd},V4=(e,t)=>e.cartesianAxis.yAxis[t],go=(e,t)=>{var r=V4(e,t);return r??li},MV={domain:[0,"auto"],includeHidden:!1,reversed:!1,allowDataOverflow:!1,allowDuplicatedCategory:!1,dataKey:void 0,id:0,name:"",range:[64,64],scale:"auto",type:"number",unit:""},Gb=(e,t)=>{var r=e.cartesianAxis.zAxis[t];return r??MV},$s=(e,t,r)=>{switch(t){case"xAxis":return po(e,r);case"yAxis":return go(e,r);case"zAxis":return Gb(e,r);case"angleAxis":return Vb(e,r);case"radiusAxis":return qb(e,r);default:throw new Error("Unexpected axis type: ".concat(t))}},FV=(e,t,r)=>{switch(t){case"xAxis":return po(e,r);case"yAxis":return go(e,r);default:throw new Error("Unexpected axis type: ".concat(t))}},Gd=(e,t,r)=>{switch(t){case"xAxis":return po(e,r);case"yAxis":return go(e,r);case"angleAxis":return Vb(e,r);case"radiusAxis":return qb(e,r);default:throw new Error("Unexpected axis type: ".concat(t))}},q4=e=>e.graphicalItems.cartesianItems.some(t=>t.type==="bar")||e.graphicalItems.polarItems.some(t=>t.type==="radialBar");function H4(e,t){return r=>{switch(e){case"xAxis":return"xAxisId"in r&&r.xAxisId===t;case"yAxis":return"yAxisId"in r&&r.yAxisId===t;case"zAxis":return"zAxisId"in r&&r.zAxisId===t;case"angleAxis":return"angleAxisId"in r&&r.angleAxisId===t;case"radiusAxis":return"radiusAxisId"in r&&r.radiusAxisId===t;default:return!1}}}var Yb=e=>e.graphicalItems.cartesianItems,LV=be([Ln,gp],H4),K4=(e,t,r)=>e.filter(r).filter(n=>(t==null?void 0:t.includeHidden)===!0?!0:!n.hide),Yd=be([Yb,$s,LV],K4,{memoizeOptions:{resultEqualityCheck:xp}}),G4=be([Yd],e=>e.filter(t=>t.type==="area"||t.type==="bar").filter(yp)),Y4=e=>e.filter(t=>!("stackId"in t)||t.stackId===void 0),zV=be([Yd],Y4),J4=e=>e.map(t=>t.data).filter(Boolean).flat(1),UV=be([Yd],J4,{memoizeOptions:{resultEqualityCheck:xp}}),X4=(e,t)=>{var{chartData:r=[],dataStartIndex:n,dataEndIndex:s}=t;return e.length>0?e:r.slice(n,s+1)},Jb=be([UV,Fb],X4),Q4=(e,t,r)=>(t==null?void 0:t.dataKey)!=null?e.map(n=>({value:Ds(n,t.dataKey)})):r.length>0?r.map(n=>n.dataKey).flatMap(n=>e.map(s=>({value:Ds(s,n)}))):e.map(n=>({value:n})),bp=be([Jb,$s,Yd],Q4);function Z4(e,t){switch(e){case"xAxis":return t.direction==="x";case"yAxis":return t.direction==="y";default:return!1}}function _h(e){if(ka(e)||e instanceof Date){var t=Number(e);if(mn(t))return t}}function f_(e){if(Array.isArray(e)){var t=[_h(e[0]),_h(e[1])];return Ll(t)?t:void 0}var r=_h(e);if(r!=null)return[r,r]}function lo(e){return e.map(_h).filter(lz)}function BV(e,t,r){return!r||typeof t!="number"||Na(t)?[]:r.length?lo(r.flatMap(n=>{var s=Ds(e,n.dataKey),a,l;if(Array.isArray(s)?[a,l]=s:a=l=s,!(!mn(a)||!mn(l)))return[t-a,t+l]})):[]}var Un=e=>{var t=zn(e),r=fu(e);return Gd(e,t,r)},eO=be([Un],e=>e==null?void 0:e.dataKey),WV=be([G4,Fb,Un],B4),tO=(e,t,r)=>{var n={},s=t.reduce((a,l)=>(l.stackId==null||(a[l.stackId]==null&&(a[l.stackId]=[]),a[l.stackId].push(l)),a),n);return Object.fromEntries(Object.entries(s).map(a=>{var[l,u]=a,d=u.map(Kb);return[l,{stackedData:NU(e,d,r),graphicalItems:u}]}))},ax=be([WV,G4,hp],tO),rO=(e,t,r,n)=>{var{dataStartIndex:s,dataEndIndex:a}=t;if(n==null&&r!=="zAxis"){var l=AU(e,s,a);if(!(l!=null&&l[0]===0&&l[1]===0))return l}},VV=be([$s],e=>e.allowDataOverflow),Xb=e=>{var t;if(e==null||!("domain"in e))return ix;if(e.domain!=null)return e.domain;if(e.ticks!=null){if(e.type==="number"){var r=lo(e.ticks);return[Math.min(...r),Math.max(...r)]}if(e.type==="category")return e.ticks.map(String)}return(t=e==null?void 0:e.domain)!==null&&t!==void 0?t:ix},nO=be([$s],Xb),sO=be([nO,VV],x4),qV=be([ax,Zo,Ln,sO],rO,{memoizeOptions:{resultEqualityCheck:vp}}),Qb=e=>e.errorBars,HV=(e,t,r)=>e.flatMap(n=>t[n.id]).filter(Boolean).filter(n=>Z4(r,n)),xm=function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];var s=r.filter(Boolean);if(s.length!==0){var a=s.flat(),l=Math.min(...a),u=Math.max(...a);return[l,u]}},iO=(e,t,r,n,s)=>{var a,l;if(r.length>0&&e.forEach(u=>{r.forEach(d=>{var m,f,p=(m=n[d.id])===null||m===void 0?void 0:m.filter(_=>Z4(s,_)),y=Ds(u,(f=t.dataKey)!==null&&f!==void 0?f:d.dataKey),x=BV(u,y,p);if(x.length>=2){var j=Math.min(...x),w=Math.max(...x);(a==null||j<a)&&(a=j),(l==null||w>l)&&(l=w)}var S=f_(y);S!=null&&(a=a==null?S[0]:Math.min(a,S[0]),l=l==null?S[1]:Math.max(l,S[1]))})}),(t==null?void 0:t.dataKey)!=null&&e.forEach(u=>{var d=f_(Ds(u,t.dataKey));d!=null&&(a=a==null?d[0]:Math.min(a,d[0]),l=l==null?d[1]:Math.max(l,d[1]))}),mn(a)&&mn(l))return[a,l]},KV=be([Jb,$s,zV,Qb,Ln],iO,{memoizeOptions:{resultEqualityCheck:vp}});function GV(e){var{value:t}=e;if(ka(t)||t instanceof Date)return t}var YV=(e,t,r)=>{var n=e.map(GV).filter(s=>s!=null);return r&&(t.dataKey==null||t.allowDuplicatedCategory&&OA(n))?FP(0,e.length):t.allowDuplicatedCategory?n:Array.from(new Set(n))},aO=e=>e.referenceElements.dots,hu=(e,t,r)=>e.filter(n=>n.ifOverflow==="extendDomain").filter(n=>t==="xAxis"?n.xAxisId===r:n.yAxisId===r),JV=be([aO,Ln,gp],hu),oO=e=>e.referenceElements.areas,XV=be([oO,Ln,gp],hu),lO=e=>e.referenceElements.lines,QV=be([lO,Ln,gp],hu),cO=(e,t)=>{var r=lo(e.map(n=>t==="xAxis"?n.x:n.y));if(r.length!==0)return[Math.min(...r),Math.max(...r)]},ZV=be(JV,Ln,cO),uO=(e,t)=>{var r=lo(e.flatMap(n=>[t==="xAxis"?n.x1:n.y1,t==="xAxis"?n.x2:n.y2]));if(r.length!==0)return[Math.min(...r),Math.max(...r)]},eq=be([XV,Ln],uO);function tq(e){var t;if(e.x!=null)return lo([e.x]);var r=(t=e.segment)===null||t===void 0?void 0:t.map(n=>n.x);return r==null||r.length===0?[]:lo(r)}function rq(e){var t;if(e.y!=null)return lo([e.y]);var r=(t=e.segment)===null||t===void 0?void 0:t.map(n=>n.y);return r==null||r.length===0?[]:lo(r)}var dO=(e,t)=>{var r=e.flatMap(n=>t==="xAxis"?tq(n):rq(n));if(r.length!==0)return[Math.min(...r),Math.max(...r)]},nq=be([QV,Ln],dO),sq=be(ZV,nq,eq,(e,t,r)=>xm(e,r,t)),fO=(e,t,r,n,s,a,l,u)=>{if(r!=null)return r;var d=l==="vertical"&&u==="xAxis"||l==="horizontal"&&u==="yAxis",m=d?xm(n,a,s):xm(a,s);return mV(t,m,e.allowDataOverflow)},iq=be([$s,nO,sO,qV,KV,sq,xr,Ln],fO,{memoizeOptions:{resultEqualityCheck:vp}}),aq=[0,1],hO=(e,t,r,n,s,a,l)=>{if(!((e==null||r==null||r.length===0)&&l===void 0)){var{dataKey:u,type:d}=e,m=ql(t,a);if(m&&u==null){var f;return FP(0,(f=r==null?void 0:r.length)!==null&&f!==void 0?f:0)}return d==="category"?YV(n,e,m):s==="expand"?aq:l}},Zb=be([$s,xr,Jb,bp,hp,Ln,iq],hO),mO=(e,t,r,n,s)=>{if(e!=null){var{scale:a,type:l}=e;if(a==="auto")return t==="radial"&&s==="radiusAxis"?"band":t==="radial"&&s==="angleAxis"?"linear":l==="category"&&n&&(n.indexOf("LineChart")>=0||n.indexOf("AreaChart")>=0||n.indexOf("ComposedChart")>=0&&!r)?"point":l==="category"?"band":"linear";if(typeof a=="string"){var u="scale".concat(zd(a));return u in ad?u:"point"}}},Jd=be([$s,xr,q4,Ub,Ln],mO);function oq(e){if(e!=null){if(e in ad)return ad[e]();var t="scale".concat(zd(e));if(t in ad)return ad[t]()}}function ew(e,t,r,n){if(!(r==null||n==null)){if(typeof e.scale=="function")return e.scale.copy().domain(r).range(n);var s=oq(t);if(s!=null){var a=s.domain(r).range(n);return xU(a),a}}}var pO=(e,t,r)=>{var n=Xb(t);if(!(r!=="auto"&&r!=="linear")){if(t!=null&&t.tickCount&&Array.isArray(n)&&(n[0]==="auto"||n[1]==="auto")&&Ll(e))return NV(e,t.tickCount,t.allowDecimals);if(t!=null&&t.tickCount&&t.type==="number"&&Ll(e))return kV(e,t.tickCount,t.allowDecimals)}},tw=be([Zb,Gd,Jd],pO),gO=(e,t,r,n)=>{if(n!=="angleAxis"&&(e==null?void 0:e.type)==="number"&&Ll(t)&&Array.isArray(r)&&r.length>0){var s=t[0],a=r[0],l=t[1],u=r[r.length-1];return[Math.min(s,a),Math.max(l,u)]}return t},lq=be([$s,Zb,tw,Ln],gO),cq=be(bp,$s,(e,t)=>{if(!(!t||t.type!=="number")){var r=1/0,n=Array.from(lo(e.map(u=>u.value))).sort((u,d)=>u-d);if(n.length<2)return 1/0;var s=n[n.length-1]-n[0];if(s===0)return 1/0;for(var a=0;a<n.length-1;a++){var l=n[a+1]-n[a];r=Math.min(r,l)}return r/s}}),yO=be(cq,xr,$4,Qn,(e,t,r,n)=>n,(e,t,r,n,s)=>{if(!mn(e))return 0;var a=t==="vertical"?n.height:n.width;if(s==="gap")return e*a/2;if(s==="no-gap"){var l=sa(r,e*a),u=e*a/2;return u-l-(u-l)/a*l}return 0}),uq=(e,t)=>{var r=po(e,t);return r==null||typeof r.padding!="string"?0:yO(e,"xAxis",t,r.padding)},dq=(e,t)=>{var r=go(e,t);return r==null||typeof r.padding!="string"?0:yO(e,"yAxis",t,r.padding)},fq=be(po,uq,(e,t)=>{var r,n;if(e==null)return{left:0,right:0};var{padding:s}=e;return typeof s=="string"?{left:t,right:t}:{left:((r=s.left)!==null&&r!==void 0?r:0)+t,right:((n=s.right)!==null&&n!==void 0?n:0)+t}}),hq=be(go,dq,(e,t)=>{var r,n;if(e==null)return{top:0,bottom:0};var{padding:s}=e;return typeof s=="string"?{top:t,bottom:t}:{top:((r=s.top)!==null&&r!==void 0?r:0)+t,bottom:((n=s.bottom)!==null&&n!==void 0?n:0)+t}}),mq=be([Qn,fq,rp,tp,(e,t,r)=>r],(e,t,r,n,s)=>{var{padding:a}=n;return s?[a.left,r.width-a.right]:[e.left+t.left,e.left+e.width-t.right]}),pq=be([Qn,xr,hq,rp,tp,(e,t,r)=>r],(e,t,r,n,s,a)=>{var{padding:l}=s;return a?[n.height-l.bottom,l.top]:t==="horizontal"?[e.top+e.height-r.bottom,e.top+r.top]:[e.top+r.top,e.top+e.height-r.bottom]}),Xd=(e,t,r,n)=>{var s;switch(t){case"xAxis":return mq(e,r,n);case"yAxis":return pq(e,r,n);case"zAxis":return(s=Gb(e,r))===null||s===void 0?void 0:s.range;case"angleAxis":return L4(e);case"radiusAxis":return z4(e,r);default:return}},vO=be([$s,Xd],mp),mu=be([$s,Jd,lq,vO],ew);be([Yd,Qb,Ln],HV);function xO(e,t){return e.id<t.id?-1:e.id>t.id?1:0}var wp=(e,t)=>t,jp=(e,t,r)=>r,gq=be(Zm,wp,jp,(e,t,r)=>e.filter(n=>n.orientation===t).filter(n=>n.mirror===r).sort(xO)),yq=be(ep,wp,jp,(e,t,r)=>e.filter(n=>n.orientation===t).filter(n=>n.mirror===r).sort(xO)),bO=(e,t)=>({width:e.width,height:t.height}),vq=(e,t)=>{var r=typeof t.width=="number"?t.width:Wd;return{width:r,height:e.height}},wO=be(Qn,po,bO),xq=(e,t,r)=>{switch(t){case"top":return e.top;case"bottom":return r-e.bottom;default:return 0}},bq=(e,t,r)=>{switch(t){case"left":return e.left;case"right":return r-e.right;default:return 0}},wq=be(ho,Qn,gq,wp,jp,(e,t,r,n,s)=>{var a={},l;return r.forEach(u=>{var d=bO(t,u);l==null&&(l=xq(t,n,e));var m=n==="top"&&!s||n==="bottom"&&s;a[u.id]=l-Number(m)*d.height,l+=(m?-1:1)*d.height}),a}),jq=be(fo,Qn,yq,wp,jp,(e,t,r,n,s)=>{var a={},l;return r.forEach(u=>{var d=vq(t,u);l==null&&(l=bq(t,n,e));var m=n==="left"&&!s||n==="right"&&s;a[u.id]=l-Number(m)*d.width,l+=(m?-1:1)*d.width}),a}),Sq=(e,t)=>{var r=po(e,t);if(r!=null)return wq(e,r.orientation,r.mirror)},Nq=be([Qn,po,Sq,(e,t)=>t],(e,t,r,n)=>{if(t!=null){var s=r==null?void 0:r[n];return s==null?{x:e.left,y:0}:{x:e.left,y:s}}}),kq=(e,t)=>{var r=go(e,t);if(r!=null)return jq(e,r.orientation,r.mirror)},_q=be([Qn,go,kq,(e,t)=>t],(e,t,r,n)=>{if(t!=null){var s=r==null?void 0:r[n];return s==null?{x:0,y:e.top}:{x:s,y:e.top}}}),jO=be(Qn,go,(e,t)=>{var r=typeof t.width=="number"?t.width:Wd;return{width:r,height:e.height}}),h_=(e,t,r)=>{switch(t){case"xAxis":return wO(e,r).width;case"yAxis":return jO(e,r).height;default:return}},SO=(e,t,r,n)=>{if(r!=null){var{allowDuplicatedCategory:s,type:a,dataKey:l}=r,u=ql(e,n),d=t.map(m=>m.value);if(l&&u&&a==="category"&&s&&OA(d))return d}},rw=be([xr,bp,$s,Ln],SO),NO=(e,t,r,n)=>{if(!(r==null||r.dataKey==null)){var{type:s,scale:a}=r,l=ql(e,n);if(l&&(s==="number"||a!=="auto"))return t.map(u=>u.value)}},nw=be([xr,bp,Gd,Ln],NO);be([xr,FV,Jd,mu,rw,nw,Xd,tw,Ln],(e,t,r,n,s,a,l,u,d)=>{if(t!=null){var m=ql(e,d);return{angle:t.angle,interval:t.interval,minTickGap:t.minTickGap,orientation:t.orientation,tick:t.tick,tickCount:t.tickCount,tickFormatter:t.tickFormatter,ticks:t.ticks,type:t.type,unit:t.unit,axisType:d,categoricalDomain:a,duplicateDomain:s,isCategorical:m,niceTicks:u,range:l,realScaleType:r,scale:n}}});var Cq=(e,t,r,n,s,a,l,u,d)=>{if(!(t==null||n==null)){var m=ql(e,d),{type:f,ticks:p,tickCount:y}=t,x=r==="scaleBand"&&typeof n.bandwidth=="function"?n.bandwidth()/2:2,j=f==="category"&&n.bandwidth?n.bandwidth()/x:0;j=d==="angleAxis"&&a!=null&&a.length>=2?mi(a[0]-a[1])*2*j:j;var w=p||s;if(w){var S=w.map((_,E)=>{var C=l?l.indexOf(_):_;return{index:E,coordinate:n(C)+j,value:_,offset:j}});return S.filter(_=>mn(_.coordinate))}return m&&u?u.map((_,E)=>({coordinate:n(_)+j,value:_,index:E,offset:j})).filter(_=>mn(_.coordinate)):n.ticks?n.ticks(y).map(_=>({coordinate:n(_)+j,value:_,offset:j})):n.domain().map((_,E)=>({coordinate:n(_)+j,value:l?l[_]:_,index:E,offset:j}))}},kO=be([xr,Gd,Jd,mu,tw,Xd,rw,nw,Ln],Cq),Eq=(e,t,r,n,s,a,l)=>{if(!(t==null||r==null||n==null||n[0]===n[1])){var u=ql(e,l),{tickCount:d}=t,m=0;return m=l==="angleAxis"&&(n==null?void 0:n.length)>=2?mi(n[0]-n[1])*2*m:m,u&&a?a.map((f,p)=>({coordinate:r(f)+m,value:f,index:p,offset:m})):r.ticks?r.ticks(d).map(f=>({coordinate:r(f)+m,value:f,offset:m})):r.domain().map((f,p)=>({coordinate:r(f)+m,value:s?s[f]:f,index:p,offset:m}))}},Gc=be([xr,Gd,mu,Xd,rw,nw,Ln],Eq),Yc=be($s,mu,(e,t)=>{if(!(e==null||t==null))return vm(vm({},e),{},{scale:t})}),Aq=be([$s,Jd,Zb,vO],ew);be((e,t,r)=>Gb(e,r),Aq,(e,t)=>{if(!(e==null||t==null))return vm(vm({},e),{},{scale:t})});var Pq=be([xr,Zm,ep],(e,t,r)=>{switch(e){case"horizontal":return t.some(n=>n.reversed)?"right-to-left":"left-to-right";case"vertical":return r.some(n=>n.reversed)?"bottom-to-top":"top-to-bottom";case"centric":case"radial":return"left-to-right";default:return}}),_O=e=>e.options.defaultTooltipEventType,CO=e=>e.options.validateTooltipEventTypes;function EO(e,t,r){if(e==null)return t;var n=e?"axis":"item";return r==null?t:r.includes(n)?n:t}function sw(e,t){var r=_O(e),n=CO(e);return EO(t,r,n)}function Oq(e){return xt(t=>sw(t,e))}var AO=(e,t)=>{var r,n=Number(t);if(!(Na(n)||t==null))return n>=0?e==null||(r=e[n])===null||r===void 0?void 0:r.value:void 0},Tq=e=>e.tooltip.settings,Bo={active:!1,index:null,dataKey:void 0,coordinate:void 0},Iq={itemInteraction:{click:Bo,hover:Bo},axisInteraction:{click:Bo,hover:Bo},keyboardInteraction:Bo,syncInteraction:{active:!1,index:null,dataKey:void 0,label:void 0,coordinate:void 0,sourceViewBox:void 0},tooltipItemPayloads:[],settings:{shared:void 0,trigger:"hover",axisId:0,active:!1,defaultIndex:void 0}},PO=Xs({name:"tooltip",initialState:Iq,reducers:{addTooltipEntrySettings:{reducer(e,t){e.tooltipItemPayloads.push(t.payload)},prepare:Rn()},removeTooltipEntrySettings:{reducer(e,t){var r=Qa(e).tooltipItemPayloads.indexOf(t.payload);r>-1&&e.tooltipItemPayloads.splice(r,1)},prepare:Rn()},setTooltipSettingsState(e,t){e.settings=t.payload},setActiveMouseOverItemIndex(e,t){e.syncInteraction.active=!1,e.keyboardInteraction.active=!1,e.itemInteraction.hover.active=!0,e.itemInteraction.hover.index=t.payload.activeIndex,e.itemInteraction.hover.dataKey=t.payload.activeDataKey,e.itemInteraction.hover.coordinate=t.payload.activeCoordinate},mouseLeaveChart(e){e.itemInteraction.hover.active=!1,e.axisInteraction.hover.active=!1},mouseLeaveItem(e){e.itemInteraction.hover.active=!1},setActiveClickItemIndex(e,t){e.syncInteraction.active=!1,e.itemInteraction.click.active=!0,e.keyboardInteraction.active=!1,e.itemInteraction.click.index=t.payload.activeIndex,e.itemInteraction.click.dataKey=t.payload.activeDataKey,e.itemInteraction.click.coordinate=t.payload.activeCoordinate},setMouseOverAxisIndex(e,t){e.syncInteraction.active=!1,e.axisInteraction.hover.active=!0,e.keyboardInteraction.active=!1,e.axisInteraction.hover.index=t.payload.activeIndex,e.axisInteraction.hover.dataKey=t.payload.activeDataKey,e.axisInteraction.hover.coordinate=t.payload.activeCoordinate},setMouseClickAxisIndex(e,t){e.syncInteraction.active=!1,e.keyboardInteraction.active=!1,e.axisInteraction.click.active=!0,e.axisInteraction.click.index=t.payload.activeIndex,e.axisInteraction.click.dataKey=t.payload.activeDataKey,e.axisInteraction.click.coordinate=t.payload.activeCoordinate},setSyncInteraction(e,t){e.syncInteraction=t.payload},setKeyboardInteraction(e,t){e.keyboardInteraction.active=t.payload.active,e.keyboardInteraction.index=t.payload.activeIndex,e.keyboardInteraction.coordinate=t.payload.activeCoordinate,e.keyboardInteraction.dataKey=t.payload.activeDataKey}}}),{addTooltipEntrySettings:Dq,removeTooltipEntrySettings:$q,setTooltipSettingsState:Rq,setActiveMouseOverItemIndex:OO,mouseLeaveItem:Mq,mouseLeaveChart:TO,setActiveClickItemIndex:Fq,setMouseOverAxisIndex:IO,setMouseClickAxisIndex:Lq,setSyncInteraction:ox,setKeyboardInteraction:lx}=PO.actions,zq=PO.reducer;function m_(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function ph(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?m_(Object(r),!0).forEach(function(n){Uq(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):m_(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Uq(e,t,r){return(t=Bq(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Bq(e){var t=Wq(e,"string");return typeof t=="symbol"?t:t+""}function Wq(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Vq(e,t,r){return t==="axis"?r==="click"?e.axisInteraction.click:e.axisInteraction.hover:r==="click"?e.itemInteraction.click:e.itemInteraction.hover}function qq(e){return e.index!=null}var DO=(e,t,r,n)=>{if(t==null)return Bo;var s=Vq(e,t,r);if(s==null)return Bo;if(s.active)return s;if(e.keyboardInteraction.active)return e.keyboardInteraction;if(e.syncInteraction.active&&e.syncInteraction.index!=null)return e.syncInteraction;var a=e.settings.active===!0;if(qq(s)){if(a)return ph(ph({},s),{},{active:!0})}else if(n!=null)return{active:!0,coordinate:void 0,dataKey:void 0,index:n};return ph(ph({},Bo),{},{coordinate:s.coordinate})},iw=(e,t)=>{var r=e==null?void 0:e.index;if(r==null)return null;var n=Number(r);if(!mn(n))return r;var s=0,a=1/0;return t.length>0&&(a=t.length-1),String(Math.max(s,Math.min(n,a)))},$O=(e,t,r,n,s,a,l,u)=>{if(!(a==null||u==null)){var d=l[0],m=d==null?void 0:u(d.positions,a);if(m!=null)return m;var f=s==null?void 0:s[Number(a)];if(f)switch(r){case"horizontal":return{x:f.coordinate,y:(n.top+t)/2};default:return{x:(n.left+e)/2,y:f.coordinate}}}},RO=(e,t,r,n)=>{if(t==="axis")return e.tooltipItemPayloads;if(e.tooltipItemPayloads.length===0)return[];var s;return r==="hover"?s=e.itemInteraction.hover.dataKey:s=e.itemInteraction.click.dataKey,s==null&&n!=null?[e.tooltipItemPayloads[0]]:e.tooltipItemPayloads.filter(a=>{var l;return((l=a.settings)===null||l===void 0?void 0:l.dataKey)===s})},Qd=e=>e.options.tooltipPayloadSearcher,pu=e=>e.tooltip;function p_(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function g_(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?p_(Object(r),!0).forEach(function(n){Hq(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):p_(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Hq(e,t,r){return(t=Kq(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Kq(e){var t=Gq(e,"string");return typeof t=="symbol"?t:t+""}function Gq(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Yq(e,t){return e??t}var MO=(e,t,r,n,s,a,l)=>{if(!(t==null||a==null)){var{chartData:u,computedData:d,dataStartIndex:m,dataEndIndex:f}=r,p=[];return e.reduce((y,x)=>{var j,{dataDefinedOnItem:w,settings:S}=x,_=Yq(w,u),E=Array.isArray(_)?bP(_,m,f):_,C=(j=S==null?void 0:S.dataKey)!==null&&j!==void 0?j:n,A=S==null?void 0:S.nameKey,T;if(n&&Array.isArray(E)&&!Array.isArray(E[0])&&l==="axis"?T=oz(E,n,s):T=a(E,t,d,A),Array.isArray(T))T.forEach(z=>{var J=g_(g_({},S),{},{name:z.name,unit:z.unit,color:void 0,fill:void 0});y.push(Vk({tooltipEntrySettings:J,dataKey:z.dataKey,payload:z.payload,value:Ds(z.payload,z.dataKey),name:z.name}))});else{var P;y.push(Vk({tooltipEntrySettings:S,dataKey:C,payload:T,value:Ds(T,C),name:(P=Ds(T,A))!==null&&P!==void 0?P:S==null?void 0:S.name}))}return y},p)}},aw=be([Un,xr,q4,Ub,zn],mO),Jq=be([e=>e.graphicalItems.cartesianItems,e=>e.graphicalItems.polarItems],(e,t)=>[...e,...t]),Xq=be([zn,fu],H4),Zd=be([Jq,Un,Xq],K4,{memoizeOptions:{resultEqualityCheck:xp}}),Qq=be([Zd],e=>e.filter(yp)),Zq=be([Zd],J4,{memoizeOptions:{resultEqualityCheck:xp}}),gu=be([Zq,Zo],X4),eH=be([Qq,Zo,Un],B4),ow=be([gu,Un,Zd],Q4),FO=be([Un],Xb),tH=be([Un],e=>e.allowDataOverflow),LO=be([FO,tH],x4),rH=be([Zd],e=>e.filter(yp)),nH=be([eH,rH,hp],tO),sH=be([nH,Zo,zn,LO],rO),iH=be([Zd],Y4),aH=be([gu,Un,iH,Qb,zn],iO,{memoizeOptions:{resultEqualityCheck:vp}}),oH=be([aO,zn,fu],hu),lH=be([oH,zn],cO),cH=be([oO,zn,fu],hu),uH=be([cH,zn],uO),dH=be([lO,zn,fu],hu),fH=be([dH,zn],dO),hH=be([lH,fH,uH],xm),mH=be([Un,FO,LO,sH,aH,hH,xr,zn],fO),zO=be([Un,xr,gu,ow,hp,zn,mH],hO),pH=be([zO,Un,aw],pO),gH=be([Un,zO,pH,zn],gO),UO=e=>{var t=zn(e),r=fu(e),n=!1;return Xd(e,t,r,n)},BO=be([Un,UO],mp),WO=be([Un,aw,gH,BO],ew),yH=be([xr,ow,Un,zn],SO),vH=be([xr,ow,Un,zn],NO),xH=(e,t,r,n,s,a,l,u)=>{if(t){var{type:d}=t,m=ql(e,u);if(n){var f=r==="scaleBand"&&n.bandwidth?n.bandwidth()/2:2,p=d==="category"&&n.bandwidth?n.bandwidth()/f:0;return p=u==="angleAxis"&&s!=null&&(s==null?void 0:s.length)>=2?mi(s[0]-s[1])*2*p:p,m&&l?l.map((y,x)=>({coordinate:n(y)+p,value:y,index:x,offset:p})):n.domain().map((y,x)=>({coordinate:n(y)+p,value:a?a[y]:y,index:x,offset:p}))}}},yo=be([xr,Un,aw,WO,UO,yH,vH,zn],xH),lw=be([_O,CO,Tq],(e,t,r)=>EO(r.shared,e,t)),VO=e=>e.tooltip.settings.trigger,cw=e=>e.tooltip.settings.defaultIndex,Sp=be([pu,lw,VO,cw],DO),Jc=be([Sp,gu],iw),qO=be([yo,Jc],AO),HO=be([Sp],e=>{if(e)return e.dataKey}),KO=be([pu,lw,VO,cw],RO),bH=be([fo,ho,xr,Qn,yo,cw,KO,Qd],$O),wH=be([Sp,bH],(e,t)=>e!=null&&e.coordinate?e.coordinate:t),jH=be([Sp],e=>e.active),SH=be([KO,Jc,Zo,eO,qO,Qd,lw],MO);be([SH],e=>{if(e!=null){var t=e.map(r=>r.payload).filter(r=>r!=null);return Array.from(new Set(t))}});function y_(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function v_(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?y_(Object(r),!0).forEach(function(n){NH(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):y_(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function NH(e,t,r){return(t=kH(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function kH(e){var t=_H(e,"string");return typeof t=="symbol"?t:t+""}function _H(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var CH=()=>xt(Un),EH=()=>{var e=CH(),t=xt(yo),r=xt(WO);return rm(!e||!r?void 0:v_(v_({},e),{},{scale:r}),t)};function x_(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Ac(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?x_(Object(r),!0).forEach(function(n){AH(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):x_(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function AH(e,t,r){return(t=PH(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function PH(e){var t=OH(e,"string");return typeof t=="symbol"?t:t+""}function OH(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var TH=(e,t,r,n)=>{var s=t.find(a=>a&&a.index===r);if(s){if(e==="horizontal")return{x:s.coordinate,y:n.chartY};if(e==="vertical")return{x:n.chartX,y:s.coordinate}}return{x:0,y:0}},IH=(e,t,r,n)=>{var s=t.find(m=>m&&m.index===r);if(s){if(e==="centric"){var a=s.coordinate,{radius:l}=n;return Ac(Ac(Ac({},n),ms(n.cx,n.cy,l,a)),{},{angle:a,radius:l})}var u=s.coordinate,{angle:d}=n;return Ac(Ac(Ac({},n),ms(n.cx,n.cy,u,d)),{},{angle:d,radius:u})}return{angle:0,clockWise:!1,cx:0,cy:0,endAngle:0,innerRadius:0,outerRadius:0,radius:0,startAngle:0,x:0,y:0}};function DH(e,t){var{chartX:r,chartY:n}=e;return r>=t.left&&r<=t.left+t.width&&n>=t.top&&n<=t.top+t.height}var GO=(e,t,r,n,s)=>{var a,l=-1,u=(a=t==null?void 0:t.length)!==null&&a!==void 0?a:0;if(u<=1||e==null)return 0;if(n==="angleAxis"&&s!=null&&Math.abs(Math.abs(s[1]-s[0])-360)<=1e-6)for(var d=0;d<u;d++){var m=d>0?r[d-1].coordinate:r[u-1].coordinate,f=r[d].coordinate,p=d>=u-1?r[0].coordinate:r[d+1].coordinate,y=void 0;if(mi(f-m)!==mi(p-f)){var x=[];if(mi(p-f)===mi(s[1]-s[0])){y=p;var j=f+s[1]-s[0];x[0]=Math.min(j,(j+m)/2),x[1]=Math.max(j,(j+m)/2)}else{y=m;var w=p+s[1]-s[0];x[0]=Math.min(f,(w+f)/2),x[1]=Math.max(f,(w+f)/2)}var S=[Math.min(f,(y+f)/2),Math.max(f,(y+f)/2)];if(e>S[0]&&e<=S[1]||e>=x[0]&&e<=x[1]){({index:l}=r[d]);break}}else{var _=Math.min(m,p),E=Math.max(m,p);if(e>(_+f)/2&&e<=(E+f)/2){({index:l}=r[d]);break}}}else if(t){for(var C=0;C<u;C++)if(C===0&&e<=(t[C].coordinate+t[C+1].coordinate)/2||C>0&&C<u-1&&e>(t[C].coordinate+t[C-1].coordinate)/2&&e<=(t[C].coordinate+t[C+1].coordinate)/2||C===u-1&&e>(t[C].coordinate+t[C-1].coordinate)/2){({index:l}=t[C]);break}}return l},$H=()=>xt(Ub),uw=(e,t)=>t,YO=(e,t,r)=>r,dw=(e,t,r,n)=>n,RH=be(yo,e=>Km(e,t=>t.coordinate)),fw=be([pu,uw,YO,dw],DO),JO=be([fw,gu],iw),MH=(e,t,r)=>{if(t!=null){var n=pu(e);return t==="axis"?r==="hover"?n.axisInteraction.hover.dataKey:n.axisInteraction.click.dataKey:r==="hover"?n.itemInteraction.hover.dataKey:n.itemInteraction.click.dataKey}},XO=be([pu,uw,YO,dw],RO),bm=be([fo,ho,xr,Qn,yo,dw,XO,Qd],$O),FH=be([fw,bm],(e,t)=>{var r;return(r=e.coordinate)!==null&&r!==void 0?r:t}),QO=be([yo,JO],AO),LH=be([XO,JO,Zo,eO,QO,Qd,uw],MO),zH=be([fw],e=>({isActive:e.active,activeIndex:e.index})),UH=(e,t,r,n,s,a,l)=>{if(!(!e||!r||!n||!s)&&DH(e,l)){var u=PU(e,t),d=GO(u,a,s,r,n),m=TH(t,s,d,e);return{activeIndex:String(d),activeCoordinate:m}}},BH=(e,t,r,n,s,a,l)=>{if(!(!e||!n||!s||!a||!r)){var u=A7(e,r);if(u){var d=OU(u,t),m=GO(d,l,a,n,s),f=IH(t,a,m,u);return{activeIndex:String(m),activeCoordinate:f}}}},WH=(e,t,r,n,s,a,l,u)=>{if(!(!e||!t||!n||!s||!a))return t==="horizontal"||t==="vertical"?UH(e,t,n,s,a,l,u):BH(e,t,r,n,s,a,l)},VH=be(e=>e.zIndex.zIndexMap,(e,t)=>t,(e,t,r)=>r,(e,t,r)=>{if(t!=null){var n=e[t];if(n!=null)return r?n.panoramaElementId:n.elementId}}),qH=be(e=>e.zIndex.zIndexMap,e=>{var t=Object.keys(e).map(n=>parseInt(n,10)).concat(Object.values(Ys)),r=Array.from(new Set(t));return r.sort((n,s)=>n-s)},{memoizeOptions:{resultEqualityCheck:IV}});function b_(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function w_(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?b_(Object(r),!0).forEach(function(n){HH(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):b_(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function HH(e,t,r){return(t=KH(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function KH(e){var t=GH(e,"string");return typeof t=="symbol"?t:t+""}function GH(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var YH={},JH={zIndexMap:Object.values(Ys).reduce((e,t)=>w_(w_({},e),{},{[t]:{elementId:void 0,panoramaElementId:void 0,consumers:0}}),YH)},XH=new Set(Object.values(Ys));function QH(e){return XH.has(e)}var ZO=Xs({name:"zIndex",initialState:JH,reducers:{registerZIndexPortal:{reducer:(e,t)=>{var{zIndex:r}=t.payload;e.zIndexMap[r]?e.zIndexMap[r].consumers+=1:e.zIndexMap[r]={consumers:1,elementId:void 0,panoramaElementId:void 0}},prepare:Rn()},unregisterZIndexPortal:{reducer:(e,t)=>{var{zIndex:r}=t.payload;e.zIndexMap[r]&&(e.zIndexMap[r].consumers-=1,e.zIndexMap[r].consumers<=0&&!QH(r)&&delete e.zIndexMap[r])},prepare:Rn()},registerZIndexPortalId:{reducer:(e,t)=>{var{zIndex:r,elementId:n,isPanorama:s}=t.payload;e.zIndexMap[r]?s?e.zIndexMap[r].panoramaElementId=n:e.zIndexMap[r].elementId=n:e.zIndexMap[r]={consumers:0,elementId:s?void 0:n,panoramaElementId:s?n:void 0}},prepare:Rn()},unregisterZIndexPortalId:{reducer:(e,t)=>{var{zIndex:r}=t.payload;e.zIndexMap[r]&&(t.payload.isPanorama?e.zIndexMap[r].panoramaElementId=void 0:e.zIndexMap[r].elementId=void 0)},prepare:Rn()}}}),{registerZIndexPortal:ZH,unregisterZIndexPortal:eK,registerZIndexPortalId:tK,unregisterZIndexPortalId:rK}=ZO.actions,nK=ZO.reducer;function el(e){var{zIndex:t,children:r}=e,n=hB(),s=n&&t!==void 0&&t!==0,a=xi(),l=pn();v.useLayoutEffect(()=>s?(l(ZH({zIndex:t})),()=>{l(eK({zIndex:t}))}):ou,[l,t,s]);var u=xt(m=>VH(m,t,a));if(!s)return r;if(!u)return null;var d=document.getElementById(u);return d?XC.createPortal(r,d):null}function cx(){return cx=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},cx.apply(null,arguments)}function j_(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function gh(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?j_(Object(r),!0).forEach(function(n){sK(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):j_(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function sK(e,t,r){return(t=iK(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function iK(e){var t=aK(e,"string");return typeof t=="symbol"?t:t+""}function aK(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function oK(e){var{cursor:t,cursorComp:r,cursorProps:n}=e;return v.isValidElement(t)?v.cloneElement(t,n):v.createElement(r,n)}function lK(e){var t,{coordinate:r,payload:n,index:s,offset:a,tooltipAxisBandSize:l,layout:u,cursor:d,tooltipEventType:m,chartName:f}=e,p=r,y=n,x=s;if(!d||!p||f!=="ScatterChart"&&m!=="axis")return null;var j,w,S;if(f==="ScatterChart")j=p,w=VB,S=Ys.cursorLine;else if(f==="BarChart")j=qB(u,p,a,l),w=DP,S=Ys.cursorRectangle;else if(u==="radial"&&DA(p)){var{cx:_,cy:E,radius:C,startAngle:A,endAngle:T}=$P(p);j={cx:_,cy:E,startAngle:A,endAngle:T,innerRadius:C,outerRadius:C},w=MP,S=Ys.cursorLine}else j={points:I7(u,p,a)},w=AP,S=Ys.cursorLine;var P=typeof d=="object"&&"className"in d?d.className:void 0,z=gh(gh(gh(gh({stroke:"#ccc",pointerEvents:"none"},a),j),Jx(d)),{},{payload:y,payloadIndex:x,className:Lr("recharts-tooltip-cursor",P)});return v.createElement(el,{zIndex:(t=e.zIndex)!==null&&t!==void 0?t:S},v.createElement(oK,{cursor:d,cursorComp:w,cursorProps:z}))}function cK(e){var t=EH(),r=uB(),n=sp(),s=$H();return t==null||r==null||n==null||s==null?null:v.createElement(lK,cx({},e,{offset:r,layout:n,tooltipAxisBandSize:t,chartName:s}))}var eT=v.createContext(null),uK=()=>v.useContext(eT),D0={exports:{}},S_;function dK(){return S_||(S_=1,(function(e){var t=Object.prototype.hasOwnProperty,r="~";function n(){}Object.create&&(n.prototype=Object.create(null),new n().__proto__||(r=!1));function s(d,m,f){this.fn=d,this.context=m,this.once=f||!1}function a(d,m,f,p,y){if(typeof f!="function")throw new TypeError("The listener must be a function");var x=new s(f,p||d,y),j=r?r+m:m;return d._events[j]?d._events[j].fn?d._events[j]=[d._events[j],x]:d._events[j].push(x):(d._events[j]=x,d._eventsCount++),d}function l(d,m){--d._eventsCount===0?d._events=new n:delete d._events[m]}function u(){this._events=new n,this._eventsCount=0}u.prototype.eventNames=function(){var m=[],f,p;if(this._eventsCount===0)return m;for(p in f=this._events)t.call(f,p)&&m.push(r?p.slice(1):p);return Object.getOwnPropertySymbols?m.concat(Object.getOwnPropertySymbols(f)):m},u.prototype.listeners=function(m){var f=r?r+m:m,p=this._events[f];if(!p)return[];if(p.fn)return[p.fn];for(var y=0,x=p.length,j=new Array(x);y<x;y++)j[y]=p[y].fn;return j},u.prototype.listenerCount=function(m){var f=r?r+m:m,p=this._events[f];return p?p.fn?1:p.length:0},u.prototype.emit=function(m,f,p,y,x,j){var w=r?r+m:m;if(!this._events[w])return!1;var S=this._events[w],_=arguments.length,E,C;if(S.fn){switch(S.once&&this.removeListener(m,S.fn,void 0,!0),_){case 1:return S.fn.call(S.context),!0;case 2:return S.fn.call(S.context,f),!0;case 3:return S.fn.call(S.context,f,p),!0;case 4:return S.fn.call(S.context,f,p,y),!0;case 5:return S.fn.call(S.context,f,p,y,x),!0;case 6:return S.fn.call(S.context,f,p,y,x,j),!0}for(C=1,E=new Array(_-1);C<_;C++)E[C-1]=arguments[C];S.fn.apply(S.context,E)}else{var A=S.length,T;for(C=0;C<A;C++)switch(S[C].once&&this.removeListener(m,S[C].fn,void 0,!0),_){case 1:S[C].fn.call(S[C].context);break;case 2:S[C].fn.call(S[C].context,f);break;case 3:S[C].fn.call(S[C].context,f,p);break;case 4:S[C].fn.call(S[C].context,f,p,y);break;default:if(!E)for(T=1,E=new Array(_-1);T<_;T++)E[T-1]=arguments[T];S[C].fn.apply(S[C].context,E)}}return!0},u.prototype.on=function(m,f,p){return a(this,m,f,p,!1)},u.prototype.once=function(m,f,p){return a(this,m,f,p,!0)},u.prototype.removeListener=function(m,f,p,y){var x=r?r+m:m;if(!this._events[x])return this;if(!f)return l(this,x),this;var j=this._events[x];if(j.fn)j.fn===f&&(!y||j.once)&&(!p||j.context===p)&&l(this,x);else{for(var w=0,S=[],_=j.length;w<_;w++)(j[w].fn!==f||y&&!j[w].once||p&&j[w].context!==p)&&S.push(j[w]);S.length?this._events[x]=S.length===1?S[0]:S:l(this,x)}return this},u.prototype.removeAllListeners=function(m){var f;return m?(f=r?r+m:m,this._events[f]&&l(this,f)):(this._events=new n,this._eventsCount=0),this},u.prototype.off=u.prototype.removeListener,u.prototype.addListener=u.prototype.on,u.prefixed=r,u.EventEmitter=u,e.exports=u})(D0)),D0.exports}var fK=dK();const hK=ia(fK);var Td=new hK,ux="recharts.syncEvent.tooltip",N_="recharts.syncEvent.brush";function mK(e,t){if(t){var r=Number.parseInt(t,10);if(!Na(r))return e==null?void 0:e[r]}}var pK={chartName:"",tooltipPayloadSearcher:void 0,eventEmitter:void 0,defaultTooltipEventType:"axis"},tT=Xs({name:"options",initialState:pK,reducers:{createEventEmitter:e=>{e.eventEmitter==null&&(e.eventEmitter=Symbol("rechartsEventEmitter"))}}}),gK=tT.reducer,{createEventEmitter:yK}=tT.actions;function vK(e){return e.tooltip.syncInteraction}var xK={chartData:void 0,computedData:void 0,dataStartIndex:0,dataEndIndex:0},rT=Xs({name:"chartData",initialState:xK,reducers:{setChartData(e,t){if(e.chartData=t.payload,t.payload==null){e.dataStartIndex=0,e.dataEndIndex=0;return}t.payload.length>0&&e.dataEndIndex!==t.payload.length-1&&(e.dataEndIndex=t.payload.length-1)},setComputedData(e,t){e.computedData=t.payload},setDataStartEndIndexes(e,t){var{startIndex:r,endIndex:n}=t.payload;r!=null&&(e.dataStartIndex=r),n!=null&&(e.dataEndIndex=n)}}}),{setChartData:k_,setDataStartEndIndexes:bK,setComputedData:bee}=rT.actions,wK=rT.reducer,jK=["x","y"];function __(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Pc(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?__(Object(r),!0).forEach(function(n){SK(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):__(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function SK(e,t,r){return(t=NK(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function NK(e){var t=kK(e,"string");return typeof t=="symbol"?t:t+""}function kK(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function _K(e,t){if(e==null)return{};var r,n,s=CK(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function CK(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function EK(){var e=xt(Bb),t=xt(Wb),r=pn(),n=xt(R4),s=xt(yo),a=sp(),l=np(),u=xt(d=>d.rootProps.className);v.useEffect(()=>{if(e==null)return ou;var d=(m,f,p)=>{if(t!==p&&e===m){if(n==="index"){var y;if(l&&f!==null&&f!==void 0&&(y=f.payload)!==null&&y!==void 0&&y.coordinate&&f.payload.sourceViewBox){var x=f.payload.coordinate,{x:j,y:w}=x,S=_K(x,jK),{x:_,y:E,width:C,height:A}=f.payload.sourceViewBox,T=Pc(Pc({},S),{},{x:l.x+(C?(j-_)/C:0)*l.width,y:l.y+(A?(w-E)/A:0)*l.height});r(Pc(Pc({},f),{},{payload:Pc(Pc({},f.payload),{},{coordinate:T})}))}else r(f);return}if(s!=null){var P;if(typeof n=="function"){var z={activeTooltipIndex:f.payload.index==null?void 0:Number(f.payload.index),isTooltipActive:f.payload.active,activeIndex:f.payload.index==null?void 0:Number(f.payload.index),activeLabel:f.payload.label,activeDataKey:f.payload.dataKey,activeCoordinate:f.payload.coordinate},J=n(s,z);P=s[J]}else n==="value"&&(P=s.find(G=>String(G.value)===f.payload.label));var{coordinate:H}=f.payload;if(P==null||f.payload.active===!1||H==null||l==null){r(ox({active:!1,coordinate:void 0,dataKey:void 0,index:null,label:void 0,sourceViewBox:void 0}));return}var{x:fe,y:X}=H,K=Math.min(fe,l.x+l.width),ae=Math.min(X,l.y+l.height),U={x:a==="horizontal"?P.coordinate:K,y:a==="horizontal"?ae:P.coordinate},ne=ox({active:f.payload.active,coordinate:U,dataKey:f.payload.dataKey,index:String(P.index),label:f.payload.label,sourceViewBox:f.payload.sourceViewBox});r(ne)}}};return Td.on(ux,d),()=>{Td.off(ux,d)}},[u,r,t,e,n,s,a,l])}function AK(){var e=xt(Bb),t=xt(Wb),r=pn();v.useEffect(()=>{if(e==null)return ou;var n=(s,a,l)=>{t!==l&&e===s&&r(bK(a))};return Td.on(N_,n),()=>{Td.off(N_,n)}},[r,t,e])}function PK(){var e=pn();v.useEffect(()=>{e(yK())},[e]),EK(),AK()}function OK(e,t,r,n,s,a){var l=xt(x=>MH(x,e,t)),u=xt(Wb),d=xt(Bb),m=xt(R4),f=xt(vK),p=f==null?void 0:f.active,y=np();v.useEffect(()=>{if(!p&&d!=null&&u!=null){var x=ox({active:a,coordinate:r,dataKey:l,index:s,label:typeof n=="number"?String(n):n,sourceViewBox:y});Td.emit(ux,d,x,u)}},[p,r,l,s,n,u,d,m,a,y])}function C_(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function E_(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?C_(Object(r),!0).forEach(function(n){TK(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):C_(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function TK(e,t,r){return(t=IK(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function IK(e){var t=DK(e,"string");return typeof t=="symbol"?t:t+""}function DK(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function $K(e){return e.dataKey}function RK(e,t){return v.isValidElement(e)?v.cloneElement(e,t):typeof e=="function"?v.createElement(e,t):v.createElement(jB,t)}var A_=[],MK={allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",axisId:0,contentStyle:{},cursor:!0,filterNull:!0,isAnimationActive:!lu.isSsr,itemSorter:"name",itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,wrapperStyle:{}};function FK(e){var t,r,n=Mi(e,MK),{active:s,allowEscapeViewBox:a,animationDuration:l,animationEasing:u,content:d,filterNull:m,isAnimationActive:f,offset:p,payloadUniqBy:y,position:x,reverseDirection:j,useTranslate3d:w,wrapperStyle:S,cursor:_,shared:E,trigger:C,defaultIndex:A,portal:T,axisId:P}=n,z=pn(),J=typeof A=="number"?String(A):A;v.useEffect(()=>{z(Rq({shared:E,trigger:C,axisId:P,active:s,defaultIndex:J}))},[z,E,C,P,s,J]);var H=np(),fe=EP(),X=Oq(E),{activeIndex:K,isActive:ae}=(t=xt(Ne=>zH(Ne,X,C,J)))!==null&&t!==void 0?t:{},U=xt(Ne=>LH(Ne,X,C,J)),ne=xt(Ne=>QO(Ne,X,C,J)),G=xt(Ne=>FH(Ne,X,C,J)),ie=U,te=uK(),W=(r=s??ae)!==null&&r!==void 0?r:!1,[se,I]=v8([ie,W]),B=X==="axis"?ne:void 0;OK(X,C,G,B,K,W);var Me=T??te;if(Me==null||H==null||X==null)return null;var Se=ie??A_;W||(Se=A_),m&&Se.length&&(Se=Vz(Se.filter(Ne=>Ne.value!=null&&(Ne.hide!==!0||n.includeHidden)),y,$K));var Ie=Se.length>0,je=v.createElement(AB,{allowEscapeViewBox:a,animationDuration:l,animationEasing:u,isAnimationActive:f,active:W,coordinate:G,hasPayload:Ie,offset:p,position:x,reverseDirection:j,useTranslate3d:w,viewBox:H,wrapperStyle:S,lastBoundingBox:se,innerRef:I,hasPortalFromProps:!!T},RK(d,E_(E_({},n),{},{payload:Se,label:B,active:W,activeIndex:K,coordinate:G,accessibilityLayer:fe})));return v.createElement(v.Fragment,null,XC.createPortal(je,Me),W&&v.createElement(cK,{cursor:_,tooltipEventType:X,coordinate:G,payload:Se,index:K}))}var hw=e=>null;hw.displayName="Cell";function LK(e,t,r){return(t=zK(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function zK(e){var t=UK(e,"string");return typeof t=="symbol"?t:t+""}function UK(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class BK{constructor(t){LK(this,"cache",new Map),this.maxSize=t}get(t){var r=this.cache.get(t);return r!==void 0&&(this.cache.delete(t),this.cache.set(t,r)),r}set(t,r){if(this.cache.has(t))this.cache.delete(t);else if(this.cache.size>=this.maxSize){var n=this.cache.keys().next().value;this.cache.delete(n)}this.cache.set(t,r)}clear(){this.cache.clear()}size(){return this.cache.size}}function P_(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function WK(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?P_(Object(r),!0).forEach(function(n){VK(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):P_(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function VK(e,t,r){return(t=qK(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function qK(e){var t=HK(e,"string");return typeof t=="symbol"?t:t+""}function HK(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var KK={cacheSize:2e3,enableCache:!0},nT=WK({},KK),O_=new BK(nT.cacheSize),GK={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},T_="recharts_measurement_span";function YK(e,t){var r=t.fontSize||"",n=t.fontFamily||"",s=t.fontWeight||"",a=t.fontStyle||"",l=t.letterSpacing||"",u=t.textTransform||"";return"".concat(e,"|").concat(r,"|").concat(n,"|").concat(s,"|").concat(a,"|").concat(l,"|").concat(u)}var I_=(e,t)=>{try{var r=document.getElementById(T_);r||(r=document.createElement("span"),r.setAttribute("id",T_),r.setAttribute("aria-hidden","true"),document.body.appendChild(r)),Object.assign(r.style,GK,t),r.textContent="".concat(e);var n=r.getBoundingClientRect();return{width:n.width,height:n.height}}catch{return{width:0,height:0}}},md=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(t==null||lu.isSsr)return{width:0,height:0};if(!nT.enableCache)return I_(t,r);var n=YK(t,r),s=O_.get(n);if(s)return s;var a=I_(t,r);return O_.set(n,a),a},D_=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,$_=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,JK=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,XK=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,sT={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},QK=Object.keys(sT),Mc="NaN";function ZK(e,t){return e*sT[t]}class Hs{static parse(t){var r,[,n,s]=(r=XK.exec(t))!==null&&r!==void 0?r:[];return new Hs(parseFloat(n),s??"")}constructor(t,r){this.num=t,this.unit=r,this.num=t,this.unit=r,Na(t)&&(this.unit=""),r!==""&&!JK.test(r)&&(this.num=NaN,this.unit=""),QK.includes(r)&&(this.num=ZK(t,r),this.unit="px")}add(t){return this.unit!==t.unit?new Hs(NaN,""):new Hs(this.num+t.num,this.unit)}subtract(t){return this.unit!==t.unit?new Hs(NaN,""):new Hs(this.num-t.num,this.unit)}multiply(t){return this.unit!==""&&t.unit!==""&&this.unit!==t.unit?new Hs(NaN,""):new Hs(this.num*t.num,this.unit||t.unit)}divide(t){return this.unit!==""&&t.unit!==""&&this.unit!==t.unit?new Hs(NaN,""):new Hs(this.num/t.num,this.unit||t.unit)}toString(){return"".concat(this.num).concat(this.unit)}isNaN(){return Na(this.num)}}function iT(e){if(e.includes(Mc))return Mc;for(var t=e;t.includes("*")||t.includes("/");){var r,[,n,s,a]=(r=D_.exec(t))!==null&&r!==void 0?r:[],l=Hs.parse(n??""),u=Hs.parse(a??""),d=s==="*"?l.multiply(u):l.divide(u);if(d.isNaN())return Mc;t=t.replace(D_,d.toString())}for(;t.includes("+")||/.-\d+(?:\.\d+)?/.test(t);){var m,[,f,p,y]=(m=$_.exec(t))!==null&&m!==void 0?m:[],x=Hs.parse(f??""),j=Hs.parse(y??""),w=p==="+"?x.add(j):x.subtract(j);if(w.isNaN())return Mc;t=t.replace($_,w.toString())}return t}var R_=/\(([^()]*)\)/;function eG(e){for(var t=e,r;(r=R_.exec(t))!=null;){var[,n]=r;t=t.replace(R_,iT(n))}return t}function tG(e){var t=e.replace(/\s+/g,"");return t=eG(t),t=iT(t),t}function rG(e){try{return tG(e)}catch{return Mc}}function $0(e){var t=rG(e.slice(5,-1));return t===Mc?"":t}var nG=["x","y","lineHeight","capHeight","fill","scaleToFit","textAnchor","verticalAnchor"],sG=["dx","dy","angle","className","breakAll"];function dx(){return dx=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},dx.apply(null,arguments)}function M_(e,t){if(e==null)return{};var r,n,s=iG(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function iG(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var aT=/[ \f\n\r\t\v\u2028\u2029]+/,oT=e=>{var{children:t,breakAll:r,style:n}=e;try{var s=[];Xn(t)||(r?s=t.toString().split(""):s=t.toString().split(aT));var a=s.map(u=>({word:u,width:md(u,n).width})),l=r?0:md("",n).width;return{wordsWithComputedWidth:a,spaceWidth:l}}catch{return null}};function aG(e){return e==="start"||e==="middle"||e==="end"||e==="inherit"}var lT=(e,t,r,n)=>e.reduce((s,a)=>{var{word:l,width:u}=a,d=s[s.length-1];if(d&&u!=null&&(t==null||n||d.width+u+r<Number(t)))d.words.push(l),d.width+=u+r;else{var m={words:[l],width:u};s.push(m)}return s},[]),cT=e=>e.reduce((t,r)=>t.width>r.width?t:r),oG="",F_=(e,t,r,n,s,a,l,u)=>{var d=e.slice(0,t),m=oT({breakAll:r,style:n,children:d+oG});if(!m)return[!1,[]];var f=lT(m.wordsWithComputedWidth,a,l,u),p=f.length>s||cT(f).width>Number(a);return[p,f]},lG=(e,t,r,n,s)=>{var{maxLines:a,children:l,style:u,breakAll:d}=e,m=Nt(a),f=String(l),p=lT(t,n,r,s);if(!m||s)return p;var y=p.length>a||cT(p).width>Number(n);if(!y)return p;for(var x=0,j=f.length-1,w=0,S;x<=j&&w<=f.length-1;){var _=Math.floor((x+j)/2),E=_-1,[C,A]=F_(f,E,d,u,a,n,r,s),[T]=F_(f,_,d,u,a,n,r,s);if(!C&&!T&&(x=_+1),C&&T&&(j=_-1),!C&&T){S=A;break}w++}return S||p},L_=e=>{var t=Xn(e)?[]:e.toString().split(aT);return[{words:t,width:void 0}]},cG=e=>{var{width:t,scaleToFit:r,children:n,style:s,breakAll:a,maxLines:l}=e;if((t||r)&&!lu.isSsr){var u,d,m=oT({breakAll:a,children:n,style:s});if(m){var{wordsWithComputedWidth:f,spaceWidth:p}=m;u=f,d=p}else return L_(n);return lG({breakAll:a,children:n,maxLines:l,style:s},u,d,t,!!r)}return L_(n)},uT="#808080",uG={breakAll:!1,capHeight:"0.71em",fill:uT,lineHeight:"1em",scaleToFit:!1,textAnchor:"start",verticalAnchor:"end",x:0,y:0},mw=v.forwardRef((e,t)=>{var r=Mi(e,uG),{x:n,y:s,lineHeight:a,capHeight:l,fill:u,scaleToFit:d,textAnchor:m,verticalAnchor:f}=r,p=M_(r,nG),y=v.useMemo(()=>cG({breakAll:p.breakAll,children:p.children,maxLines:p.maxLines,scaleToFit:d,style:p.style,width:p.width}),[p.breakAll,p.children,p.maxLines,d,p.style,p.width]),{dx:x,dy:j,angle:w,className:S,breakAll:_}=p,E=M_(p,sG);if(!ka(n)||!ka(s)||y.length===0)return null;var C=Number(n)+(Nt(x)?x:0),A=Number(s)+(Nt(j)?j:0);if(!mn(C)||!mn(A))return null;var T;switch(f){case"start":T=$0("calc(".concat(l,")"));break;case"middle":T=$0("calc(".concat((y.length-1)/2," * -").concat(a," + (").concat(l," / 2))"));break;default:T=$0("calc(".concat(y.length-1," * -").concat(a,")"));break}var P=[];if(d){var z=y[0].width,{width:J}=p;P.push("scale(".concat(Nt(J)&&Nt(z)?J/z:1,")"))}return w&&P.push("rotate(".concat(w,", ").concat(C,", ").concat(A,")")),P.length&&(E.transform=P.join(" ")),v.createElement("text",dx({},Ii(E),{ref:t,x:C,y:A,className:Lr("recharts-text",S),textAnchor:m,fill:u.includes("url")?uT:u}),y.map((H,fe)=>{var X=H.words.join(_?"":" ");return v.createElement("tspan",{x:C,dy:fe===0?T:a,key:"".concat(X,"-").concat(fe)},X)}))});mw.displayName="Text";var dG=["labelRef"];function fG(e,t){if(e==null)return{};var r,n,s=hG(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function hG(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function z_(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function dn(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?z_(Object(r),!0).forEach(function(n){mG(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):z_(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function mG(e,t,r){return(t=pG(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function pG(e){var t=gG(e,"string");return typeof t=="symbol"?t:t+""}function gG(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Ka(){return Ka=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Ka.apply(null,arguments)}var dT=v.createContext(null),yG=e=>{var{x:t,y:r,upperWidth:n,lowerWidth:s,width:a,height:l,children:u}=e,d=v.useMemo(()=>({x:t,y:r,upperWidth:n,lowerWidth:s,width:a,height:l}),[t,r,n,s,a,l]);return v.createElement(dT.Provider,{value:d},u)},fT=()=>{var e=v.useContext(dT),t=np();return e||_P(t)},vG=v.createContext(null),xG=()=>{var e=v.useContext(vG),t=xt(U4);return e||t},bG=e=>{var{value:t,formatter:r}=e,n=Xn(e.children)?t:e.children;return typeof r=="function"?r(n):n},pw=e=>e!=null&&typeof e=="function",wG=(e,t)=>{var r=mi(t-e),n=Math.min(Math.abs(t-e),360);return r*n},jG=(e,t,r,n,s)=>{var{offset:a,className:l}=e,{cx:u,cy:d,innerRadius:m,outerRadius:f,startAngle:p,endAngle:y,clockWise:x}=s,j=(m+f)/2,w=wG(p,y),S=w>=0?1:-1,_,E;switch(t){case"insideStart":_=p+S*a,E=x;break;case"insideEnd":_=y-S*a,E=!x;break;case"end":_=y+S*a,E=x;break;default:throw new Error("Unsupported position ".concat(t))}E=w<=0?E:!E;var C=ms(u,d,j,_),A=ms(u,d,j,_+(E?1:-1)*359),T="M".concat(C.x,",").concat(C.y,`
    A`).concat(j,",").concat(j,",0,1,").concat(E?0:1,`,
    `).concat(A.x,",").concat(A.y),P=Xn(e.id)?jd("recharts-radial-line-"):e.id;return v.createElement("text",Ka({},n,{dominantBaseline:"central",className:Lr("recharts-radial-bar-label",l)}),v.createElement("defs",null,v.createElement("path",{id:P,d:T})),v.createElement("textPath",{xlinkHref:"#".concat(P)},r))},SG=(e,t,r)=>{var{cx:n,cy:s,innerRadius:a,outerRadius:l,startAngle:u,endAngle:d}=e,m=(u+d)/2;if(r==="outside"){var{x:f,y:p}=ms(n,s,l+t,m);return{x:f,y:p,textAnchor:f>=n?"start":"end",verticalAnchor:"middle"}}if(r==="center")return{x:n,y:s,textAnchor:"middle",verticalAnchor:"middle"};if(r==="centerTop")return{x:n,y:s,textAnchor:"middle",verticalAnchor:"start"};if(r==="centerBottom")return{x:n,y:s,textAnchor:"middle",verticalAnchor:"end"};var y=(a+l)/2,{x,y:j}=ms(n,s,y,m);return{x,y:j,textAnchor:"middle",verticalAnchor:"middle"}},fx=e=>"cx"in e&&Nt(e.cx),NG=(e,t)=>{var{parentViewBox:r,offset:n,position:s}=e,a;r!=null&&!fx(r)&&(a=r);var{x:l,y:u,upperWidth:d,lowerWidth:m,height:f}=t,p=l,y=l+(d-m)/2,x=(p+y)/2,j=(d+m)/2,w=p+d/2,S=f>=0?1:-1,_=S*n,E=S>0?"end":"start",C=S>0?"start":"end",A=d>=0?1:-1,T=A*n,P=A>0?"end":"start",z=A>0?"start":"end";if(s==="top"){var J={x:p+d/2,y:u-_,textAnchor:"middle",verticalAnchor:E};return dn(dn({},J),a?{height:Math.max(u-a.y,0),width:d}:{})}if(s==="bottom"){var H={x:y+m/2,y:u+f+_,textAnchor:"middle",verticalAnchor:C};return dn(dn({},H),a?{height:Math.max(a.y+a.height-(u+f),0),width:m}:{})}if(s==="left"){var fe={x:x-T,y:u+f/2,textAnchor:P,verticalAnchor:"middle"};return dn(dn({},fe),a?{width:Math.max(fe.x-a.x,0),height:f}:{})}if(s==="right"){var X={x:x+j+T,y:u+f/2,textAnchor:z,verticalAnchor:"middle"};return dn(dn({},X),a?{width:Math.max(a.x+a.width-X.x,0),height:f}:{})}var K=a?{width:j,height:f}:{};return s==="insideLeft"?dn({x:x+T,y:u+f/2,textAnchor:z,verticalAnchor:"middle"},K):s==="insideRight"?dn({x:x+j-T,y:u+f/2,textAnchor:P,verticalAnchor:"middle"},K):s==="insideTop"?dn({x:p+d/2,y:u+_,textAnchor:"middle",verticalAnchor:C},K):s==="insideBottom"?dn({x:y+m/2,y:u+f-_,textAnchor:"middle",verticalAnchor:E},K):s==="insideTopLeft"?dn({x:p+T,y:u+_,textAnchor:z,verticalAnchor:C},K):s==="insideTopRight"?dn({x:p+d-T,y:u+_,textAnchor:P,verticalAnchor:C},K):s==="insideBottomLeft"?dn({x:y+T,y:u+f-_,textAnchor:z,verticalAnchor:E},K):s==="insideBottomRight"?dn({x:y+m-T,y:u+f-_,textAnchor:P,verticalAnchor:E},K):s&&typeof s=="object"&&(Nt(s.x)||no(s.x))&&(Nt(s.y)||no(s.y))?dn({x:l+sa(s.x,j),y:u+sa(s.y,f),textAnchor:"end",verticalAnchor:"end"},K):dn({x:w,y:u+f/2,textAnchor:"middle",verticalAnchor:"middle"},K)},kG={offset:5,zIndex:Ys.label};function Lo(e){var t=Mi(e,kG),{viewBox:r,position:n,value:s,children:a,content:l,className:u="",textBreakAll:d,labelRef:m}=t,f=xG(),p=fT(),y=n==="center"?p:f??p,x,j,w;if(r==null?x=y:fx(r)?x=r:x=_P(r),!x||Xn(s)&&Xn(a)&&!v.isValidElement(l)&&typeof l!="function")return null;var S=dn(dn({},t),{},{viewBox:x});if(v.isValidElement(l)){var{labelRef:_}=S,E=fG(S,dG);return v.cloneElement(l,E)}if(typeof l=="function"){if(j=v.createElement(l,S),v.isValidElement(j))return j}else j=bG(t);var C=Ii(t);if(fx(x)){if(n==="insideStart"||n==="insideEnd"||n==="end")return jG(t,n,j,C,x);w=SG(x,t.offset,t.position)}else w=NG(t,x);return v.createElement(el,{zIndex:t.zIndex},v.createElement(mw,Ka({ref:m,className:Lr("recharts-label",u)},C,w,{textAnchor:aG(C.textAnchor)?C.textAnchor:w.textAnchor,breakAll:d}),j))}Lo.displayName="Label";var _G=(e,t,r)=>{if(!e)return null;var n={viewBox:t,labelRef:r};return e===!0?v.createElement(Lo,Ka({key:"label-implicit"},n)):ka(e)?v.createElement(Lo,Ka({key:"label-implicit",value:e},n)):v.isValidElement(e)?e.type===Lo?v.cloneElement(e,dn({key:"label-implicit"},n)):v.createElement(Lo,Ka({key:"label-implicit",content:e},n)):pw(e)?v.createElement(Lo,Ka({key:"label-implicit",content:e},n)):e&&typeof e=="object"?v.createElement(Lo,Ka({},e,{key:"label-implicit"},n)):null};function CG(e){var{label:t,labelRef:r}=e,n=fT();return _G(t,n,r)||null}var R0={},M0={},U_;function EG(){return U_||(U_=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r[r.length-1]}e.last=t})(M0)),M0}var F0={},B_;function AG(){return B_||(B_=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return Array.isArray(r)?r:Array.from(r)}e.toArray=t})(F0)),F0}var W_;function PG(){return W_||(W_=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=EG(),r=AG(),n=sb();function s(a){if(n.isArrayLike(a))return t.last(r.toArray(a))}e.last=s})(R0)),R0}var L0,V_;function OG(){return V_||(V_=1,L0=PG().last),L0}var TG=OG();const IG=ia(TG);var DG=["valueAccessor"],$G=["dataKey","clockWise","id","textBreakAll","zIndex"];function wm(){return wm=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},wm.apply(null,arguments)}function q_(e,t){if(e==null)return{};var r,n,s=RG(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function RG(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var MG=e=>Array.isArray(e.value)?IG(e.value):e.value,hT=v.createContext(void 0),FG=hT.Provider,mT=v.createContext(void 0);mT.Provider;function LG(){return v.useContext(hT)}function zG(){return v.useContext(mT)}function Ch(e){var{valueAccessor:t=MG}=e,r=q_(e,DG),{dataKey:n,clockWise:s,id:a,textBreakAll:l,zIndex:u}=r,d=q_(r,$G),m=LG(),f=zG(),p=m||f;return!p||!p.length?null:v.createElement(el,{zIndex:u??Ys.label},v.createElement(ro,{className:"recharts-label-list"},p.map((y,x)=>{var j,w=Xn(n)?t(y,x):Ds(y&&y.payload,n),S=Xn(a)?{}:{id:"".concat(a,"-").concat(x)};return v.createElement(Lo,wm({key:"label-".concat(x)},Ii(y),d,S,{fill:(j=r.fill)!==null&&j!==void 0?j:y.fill,parentViewBox:y.parentViewBox,value:w,textBreakAll:l,viewBox:y.viewBox,index:x,zIndex:0}))})))}Ch.displayName="LabelList";function UG(e){var{label:t}=e;return t?t===!0?v.createElement(Ch,{key:"labelList-implicit"}):v.isValidElement(t)||pw(t)?v.createElement(Ch,{key:"labelList-implicit",content:t}):typeof t=="object"?v.createElement(Ch,wm({key:"labelList-implicit"},t,{type:String(t.type)})):null:null}var BG={radiusAxis:{},angleAxis:{}},pT=Xs({name:"polarAxis",initialState:BG,reducers:{addRadiusAxis(e,t){e.radiusAxis[t.payload.id]=t.payload},removeRadiusAxis(e,t){delete e.radiusAxis[t.payload.id]},addAngleAxis(e,t){e.angleAxis[t.payload.id]=t.payload},removeAngleAxis(e,t){delete e.angleAxis[t.payload.id]}}}),{addRadiusAxis:wee,removeRadiusAxis:jee,addAngleAxis:See,removeAngleAxis:Nee}=pT.actions,WG=pT.reducer,z0={exports:{}},wr={};/**
 * @license React
 * react-is.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var H_;function VG(){if(H_)return wr;H_=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),a=Symbol.for("react.consumer"),l=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),m=Symbol.for("react.suspense_list"),f=Symbol.for("react.memo"),p=Symbol.for("react.lazy"),y=Symbol.for("react.view_transition"),x=Symbol.for("react.client.reference");function j(w){if(typeof w=="object"&&w!==null){var S=w.$$typeof;switch(S){case e:switch(w=w.type,w){case r:case s:case n:case d:case m:case y:return w;default:switch(w=w&&w.$$typeof,w){case l:case u:case p:case f:return w;case a:return w;default:return S}}case t:return S}}}return wr.ContextConsumer=a,wr.ContextProvider=l,wr.Element=e,wr.ForwardRef=u,wr.Fragment=r,wr.Lazy=p,wr.Memo=f,wr.Portal=t,wr.Profiler=s,wr.StrictMode=n,wr.Suspense=d,wr.SuspenseList=m,wr.isContextConsumer=function(w){return j(w)===a},wr.isContextProvider=function(w){return j(w)===l},wr.isElement=function(w){return typeof w=="object"&&w!==null&&w.$$typeof===e},wr.isForwardRef=function(w){return j(w)===u},wr.isFragment=function(w){return j(w)===r},wr.isLazy=function(w){return j(w)===p},wr.isMemo=function(w){return j(w)===f},wr.isPortal=function(w){return j(w)===t},wr.isProfiler=function(w){return j(w)===s},wr.isStrictMode=function(w){return j(w)===n},wr.isSuspense=function(w){return j(w)===d},wr.isSuspenseList=function(w){return j(w)===m},wr.isValidElementType=function(w){return typeof w=="string"||typeof w=="function"||w===r||w===s||w===n||w===d||w===m||typeof w=="object"&&w!==null&&(w.$$typeof===p||w.$$typeof===f||w.$$typeof===l||w.$$typeof===a||w.$$typeof===u||w.$$typeof===x||w.getModuleId!==void 0)},wr.typeOf=j,wr}var K_;function qG(){return K_||(K_=1,z0.exports=VG()),z0.exports}var HG=qG(),G_=e=>typeof e=="string"?e:e?e.displayName||e.name||"Component":"",Y_=null,U0=null,gT=e=>{if(e===Y_&&Array.isArray(U0))return U0;var t=[];return v.Children.forEach(e,r=>{Xn(r)||(HG.isFragment(r)?t=t.concat(gT(r.props.children)):t.push(r))}),U0=t,Y_=e,t};function KG(e,t){var r=[],n=[];return Array.isArray(t)?n=t.map(s=>G_(s)):n=[G_(t)],gT(e).forEach(s=>{var a=Vc(s,"type.displayName")||Vc(s,"type.name");a&&n.indexOf(a)!==-1&&r.push(s)}),r}var B0={},J_;function GG(){return J_||(J_=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){var s;if(typeof r!="object"||r==null)return!1;if(Object.getPrototypeOf(r)===null)return!0;if(Object.prototype.toString.call(r)!=="[object Object]"){const a=r[Symbol.toStringTag];return a==null||!((s=Object.getOwnPropertyDescriptor(r,Symbol.toStringTag))!=null&&s.writable)?!1:r.toString()===`[object ${a}]`}let n=r;for(;Object.getPrototypeOf(n)!==null;)n=Object.getPrototypeOf(n);return Object.getPrototypeOf(r)===n}e.isPlainObject=t})(B0)),B0}var W0,X_;function YG(){return X_||(X_=1,W0=GG().isPlainObject),W0}var JG=YG();const XG=ia(JG);function Q_(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Z_(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Q_(Object(r),!0).forEach(function(n){QG(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Q_(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function QG(e,t,r){return(t=ZG(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ZG(e){var t=eY(e,"string");return typeof t=="symbol"?t:t+""}function eY(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function jm(){return jm=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},jm.apply(null,arguments)}var eC=(e,t,r,n,s)=>{var a=r-n,l;return l="M ".concat(e,",").concat(t),l+="L ".concat(e+r,",").concat(t),l+="L ".concat(e+r-a/2,",").concat(t+s),l+="L ".concat(e+r-a/2-n,",").concat(t+s),l+="L ".concat(e,",").concat(t," Z"),l},tY={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},rY=e=>{var t=Mi(e,tY),{x:r,y:n,upperWidth:s,lowerWidth:a,height:l,className:u}=t,{animationEasing:d,animationDuration:m,animationBegin:f,isUpdateAnimationActive:p}=t,y=v.useRef(null),[x,j]=v.useState(-1),w=v.useRef(s),S=v.useRef(a),_=v.useRef(l),E=v.useRef(r),C=v.useRef(n),A=mb(e,"trapezoid-");if(v.useEffect(()=>{if(y.current&&y.current.getTotalLength)try{var U=y.current.getTotalLength();U&&j(U)}catch{}},[]),r!==+r||n!==+n||s!==+s||a!==+a||l!==+l||s===0&&a===0||l===0)return null;var T=Lr("recharts-trapezoid",u);if(!p)return v.createElement("g",null,v.createElement("path",jm({},Ii(t),{className:T,d:eC(r,n,s,a,l)})));var P=w.current,z=S.current,J=_.current,H=E.current,fe=C.current,X="0px ".concat(x===-1?1:x,"px"),K="".concat(x,"px 0px"),ae=PP(["strokeDasharray"],m,d);return v.createElement(hb,{animationId:A,key:A,canBegin:x>0,duration:m,easing:d,isActive:p,begin:f},U=>{var ne=fs(P,s,U),G=fs(z,a,U),ie=fs(J,l,U),te=fs(H,r,U),W=fs(fe,n,U);y.current&&(w.current=ne,S.current=G,_.current=ie,E.current=te,C.current=W);var se=U>0?{transition:ae,strokeDasharray:K}:{strokeDasharray:X};return v.createElement("path",jm({},Ii(t),{className:T,d:eC(te,W,ne,G,ie),ref:y,style:Z_(Z_({},se),t.style)}))})},nY=["option","shapeType","propTransformer","activeClassName","isActive"];function sY(e,t){if(e==null)return{};var r,n,s=iY(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function iY(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function tC(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Sm(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?tC(Object(r),!0).forEach(function(n){aY(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):tC(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function aY(e,t,r){return(t=oY(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function oY(e){var t=lY(e,"string");return typeof t=="symbol"?t:t+""}function lY(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function cY(e,t){return Sm(Sm({},t),e)}function uY(e,t){return e==="symbols"}function rC(e){var{shapeType:t,elementProps:r}=e;switch(t){case"rectangle":return v.createElement(DP,r);case"trapezoid":return v.createElement(rY,r);case"sector":return v.createElement(MP,r);case"symbols":if(uY(t))return v.createElement(IA,r);break;case"curve":return v.createElement(AP,r);default:return null}}function dY(e){return v.isValidElement(e)?e.props:e}function fY(e){var{option:t,shapeType:r,propTransformer:n=cY,activeClassName:s="recharts-active-shape",isActive:a}=e,l=sY(e,nY),u;if(v.isValidElement(t))u=v.cloneElement(t,Sm(Sm({},l),dY(t)));else if(typeof t=="function")u=t(l);else if(XG(t)&&typeof t!="boolean"){var d=n(t,l);u=v.createElement(rC,{shapeType:r,elementProps:d})}else{var m=l;u=v.createElement(rC,{shapeType:r,elementProps:m})}return a?v.createElement(ro,{className:s},u):u}var yT=(e,t)=>{var r=pn();return(n,s)=>a=>{e==null||e(n,s,a),r(OO({activeIndex:String(s),activeDataKey:t,activeCoordinate:n.tooltipPosition}))}},vT=e=>{var t=pn();return(r,n)=>s=>{e==null||e(r,n,s),t(Mq())}},xT=(e,t)=>{var r=pn();return(n,s)=>a=>{e==null||e(n,s,a),r(Fq({activeIndex:String(s),activeDataKey:t,activeCoordinate:n.tooltipPosition}))}};function hY(e){var{fn:t,args:r}=e,n=pn(),s=xi();return v.useLayoutEffect(()=>{if(!s){var a=t(r);return n(Dq(a)),()=>{n($q(a))}}},[t,r,n,s]),null}function mY(e){var{legendPayload:t}=e,r=pn(),n=xi();return v.useLayoutEffect(()=>n?ou:(r(pB(t)),()=>{r(gB(t))}),[r,n,t]),null}var V0,pY=()=>{var[e]=v.useState(()=>jd("uid-"));return e},gY=(V0=pD.useId)!==null&&V0!==void 0?V0:pY;function bT(e,t){var r=gY();return t||(e?"".concat(e,"-").concat(r):r)}var yY=v.createContext(void 0),vY=e=>{var{id:t,type:r,children:n}=e,s=bT("recharts-".concat(r),t);return v.createElement(yY.Provider,{value:s},n(s))},xY={cartesianItems:[],polarItems:[]},wT=Xs({name:"graphicalItems",initialState:xY,reducers:{addCartesianGraphicalItem:{reducer(e,t){e.cartesianItems.push(t.payload)},prepare:Rn()},replaceCartesianGraphicalItem:{reducer(e,t){var{prev:r,next:n}=t.payload,s=Qa(e).cartesianItems.indexOf(r);s>-1&&(e.cartesianItems[s]=n)},prepare:Rn()},removeCartesianGraphicalItem:{reducer(e,t){var r=Qa(e).cartesianItems.indexOf(t.payload);r>-1&&e.cartesianItems.splice(r,1)},prepare:Rn()},addPolarGraphicalItem:{reducer(e,t){e.polarItems.push(t.payload)},prepare:Rn()},removePolarGraphicalItem:{reducer(e,t){var r=Qa(e).polarItems.indexOf(t.payload);r>-1&&e.polarItems.splice(r,1)},prepare:Rn()}}}),{addCartesianGraphicalItem:bY,replaceCartesianGraphicalItem:wY,removeCartesianGraphicalItem:jY,addPolarGraphicalItem:kee,removePolarGraphicalItem:_ee}=wT.actions,SY=wT.reducer;function NY(e){var t=pn(),r=v.useRef(null);return v.useLayoutEffect(()=>{r.current===null?t(bY(e)):r.current!==e&&t(wY({prev:r.current,next:e})),r.current=e},[t,e]),v.useLayoutEffect(()=>()=>{r.current&&(t(jY(r.current)),r.current=null)},[t]),null}function nC(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function sC(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?nC(Object(r),!0).forEach(function(n){kY(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):nC(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function kY(e,t,r){return(t=_Y(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function _Y(e){var t=CY(e,"string");return typeof t=="symbol"?t:t+""}function CY(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var EY={xAxis:{},yAxis:{},zAxis:{}},jT=Xs({name:"cartesianAxis",initialState:EY,reducers:{addXAxis:{reducer(e,t){e.xAxis[t.payload.id]=t.payload},prepare:Rn()},removeXAxis:{reducer(e,t){delete e.xAxis[t.payload.id]},prepare:Rn()},addYAxis:{reducer(e,t){e.yAxis[t.payload.id]=t.payload},prepare:Rn()},removeYAxis:{reducer(e,t){delete e.yAxis[t.payload.id]},prepare:Rn()},addZAxis:{reducer(e,t){e.zAxis[t.payload.id]=t.payload},prepare:Rn()},removeZAxis:{reducer(e,t){delete e.zAxis[t.payload.id]},prepare:Rn()},updateYAxisWidth(e,t){var{id:r,width:n}=t.payload,s=e.yAxis[r];if(s){var a=s.widthHistory||[];if(a.length===3&&a[0]===a[2]&&n===a[1]&&n!==s.width&&Math.abs(n-a[0])<=1)return;var l=[...a,n].slice(-3);e.yAxis[r]=sC(sC({},e.yAxis[r]),{},{width:n,widthHistory:l})}}}}),{addXAxis:AY,removeXAxis:PY,addYAxis:OY,removeYAxis:TY,addZAxis:Cee,removeZAxis:Eee,updateYAxisWidth:IY}=jT.actions,DY=jT.reducer,$Y=be([Qn],e=>({top:e.top,bottom:e.bottom,left:e.left,right:e.right})),RY=be([$Y,fo,ho],(e,t,r)=>{if(!(!e||t==null||r==null))return{x:e.left,y:e.top,width:Math.max(0,t-e.left-e.right),height:Math.max(0,r-e.top-e.bottom)}}),ST=()=>xt(RY),MY="Invariant failed";function FY(e,t){throw new Error(MY)}var LY=["x","y"];function hx(){return hx=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},hx.apply(null,arguments)}function iC(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Zu(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?iC(Object(r),!0).forEach(function(n){zY(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):iC(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function zY(e,t,r){return(t=UY(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function UY(e){var t=BY(e,"string");return typeof t=="symbol"?t:t+""}function BY(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function WY(e,t){if(e==null)return{};var r,n,s=VY(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function VY(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function qY(e,t){var{x:r,y:n}=e,s=WY(e,LY),a="".concat(r),l=parseInt(a,10),u="".concat(n),d=parseInt(u,10),m="".concat(t.height||s.height),f=parseInt(m,10),p="".concat(t.width||s.width),y=parseInt(p,10);return Zu(Zu(Zu(Zu(Zu({},t),s),l?{x:l}:{}),d?{y:d}:{}),{},{height:f,width:y,name:t.name,radius:t.radius})}function Nm(e){return v.createElement(fY,hx({shapeType:"rectangle",propTransformer:qY,activeClassName:"recharts-active-bar"},e))}var HY=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return(n,s)=>{if(Nt(t))return t;var a=Nt(n)||Xn(n);return a?t(n,s):(a||FY(),r)}},KY={},NT=Xs({name:"errorBars",initialState:KY,reducers:{addErrorBar:(e,t)=>{var{itemId:r,errorBar:n}=t.payload;e[r]||(e[r]=[]),e[r].push(n)},replaceErrorBar:(e,t)=>{var{itemId:r,prev:n,next:s}=t.payload;e[r]&&(e[r]=e[r].map(a=>a.dataKey===n.dataKey&&a.direction===n.direction?s:a))},removeErrorBar:(e,t)=>{var{itemId:r,errorBar:n}=t.payload;e[r]&&(e[r]=e[r].filter(s=>s.dataKey!==n.dataKey||s.direction!==n.direction))}}}),{addErrorBar:Aee,replaceErrorBar:Pee,removeErrorBar:Oee}=NT.actions,GY=NT.reducer,YY=["children"];function JY(e,t){if(e==null)return{};var r,n,s=XY(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function XY(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var QY={data:[],xAxisId:"xAxis-0",yAxisId:"yAxis-0",dataPointFormatter:()=>({x:0,y:0,value:0}),errorBarOffset:0},ZY=v.createContext(QY);function eJ(e){var{children:t}=e,r=JY(e,YY);return v.createElement(ZY.Provider,{value:r},t)}function kT(e,t){var r,n,s=xt(m=>po(m,e)),a=xt(m=>go(m,t)),l=(r=s==null?void 0:s.allowDataOverflow)!==null&&r!==void 0?r:oi.allowDataOverflow,u=(n=a==null?void 0:a.allowDataOverflow)!==null&&n!==void 0?n:li.allowDataOverflow,d=l||u;return{needClip:d,needClipX:l,needClipY:u}}function tJ(e){var{xAxisId:t,yAxisId:r,clipPathId:n}=e,s=ST(),{needClipX:a,needClipY:l,needClip:u}=kT(t,r);if(!u||!s)return null;var{x:d,y:m,width:f,height:p}=s;return v.createElement("clipPath",{id:"clipPath-".concat(n)},v.createElement("rect",{x:a?d:d-f/2,y:l?m:m-p/2,width:a?f:f*2,height:l?p:p*2}))}function rJ(e,t){return e&&typeof e=="object"&&"zIndex"in e&&typeof e.zIndex=="number"&&mn(e.zIndex)?e.zIndex:t}var nJ=["onMouseEnter","onMouseLeave","onClick"],sJ=["value","background","tooltipPosition"],iJ=["id"],aJ=["onMouseEnter","onClick","onMouseLeave"];function co(){return co=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},co.apply(null,arguments)}function aC(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Ts(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?aC(Object(r),!0).forEach(function(n){oJ(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):aC(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function oJ(e,t,r){return(t=lJ(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function lJ(e){var t=cJ(e,"string");return typeof t=="symbol"?t:t+""}function cJ(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function km(e,t){if(e==null)return{};var r,n,s=uJ(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function uJ(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var dJ=e=>{var{dataKey:t,name:r,fill:n,legendType:s,hide:a}=e;return[{inactive:a,dataKey:t,type:s,color:n,value:wP(r,t),payload:e}]};function fJ(e){var{dataKey:t,stroke:r,strokeWidth:n,fill:s,name:a,hide:l,unit:u}=e;return{dataDefinedOnItem:void 0,positions:void 0,settings:{stroke:r,strokeWidth:n,fill:s,dataKey:t,nameKey:void 0,name:wP(a,t),hide:l,type:e.tooltipType,color:e.fill,unit:u}}}function hJ(e){var t=xt(Jc),{data:r,dataKey:n,background:s,allOtherBarProps:a}=e,{onMouseEnter:l,onMouseLeave:u,onClick:d}=a,m=km(a,nJ),f=yT(l,n),p=vT(u),y=xT(d,n);if(!s||r==null)return null;var x=Jx(s);return v.createElement(el,{zIndex:rJ(s,Ys.barBackground)},r.map((j,w)=>{var{value:S,background:_,tooltipPosition:E}=j,C=km(j,sJ);if(!_)return null;var A=f(j,w),T=p(j,w),P=y(j,w),z=Ts(Ts(Ts(Ts(Ts({option:s,isActive:String(w)===t},C),{},{fill:"#eee"},_),x),nb(m,j,w)),{},{onMouseEnter:A,onMouseLeave:T,onClick:P,dataKey:n,index:w,className:"recharts-bar-background-rectangle"});return v.createElement(Nm,co({key:"background-bar-".concat(w)},z))}))}function mJ(e){var{showLabels:t,children:r,rects:n}=e,s=n==null?void 0:n.map(a=>{var l={x:a.x,y:a.y,width:a.width,lowerWidth:a.width,upperWidth:a.width,height:a.height};return Ts(Ts({},l),{},{value:a.value,payload:a.payload,parentViewBox:a.parentViewBox,viewBox:l,fill:a.fill})});return v.createElement(FG,{value:t?s:void 0},r)}function pJ(e){var{shape:t,activeBar:r,baseProps:n,entry:s,index:a,dataKey:l}=e,u=xt(Jc),d=xt(HO),m=r&&String(a)===u&&(d==null||l===d),f=m?r:t;return m?v.createElement(el,{zIndex:Ys.activeBar},v.createElement(Nm,co({},n,{name:String(n.name)},s,{isActive:m,option:f,index:a,dataKey:l}))):v.createElement(Nm,co({},n,{name:String(n.name)},s,{isActive:m,option:f,index:a,dataKey:l}))}function gJ(e){var{shape:t,baseProps:r,entry:n,index:s,dataKey:a}=e;return v.createElement(Nm,co({},r,{name:String(r.name)},n,{isActive:!1,option:t,index:s,dataKey:a}))}function yJ(e){var t,{data:r,props:n}=e,s=(t=Ko(n))!==null&&t!==void 0?t:{},{id:a}=s,l=km(s,iJ),{shape:u,dataKey:d,activeBar:m}=n,{onMouseEnter:f,onClick:p,onMouseLeave:y}=n,x=km(n,aJ),j=yT(f,d),w=vT(y),S=xT(p,d);return r?v.createElement(v.Fragment,null,r.map((_,E)=>v.createElement(ro,co({key:"rectangle-".concat(_==null?void 0:_.x,"-").concat(_==null?void 0:_.y,"-").concat(_==null?void 0:_.value,"-").concat(E),className:"recharts-bar-rectangle"},nb(x,_,E),{onMouseEnter:j(_,E),onMouseLeave:w(_,E),onClick:S(_,E)}),m?v.createElement(pJ,{shape:u,activeBar:m,baseProps:l,entry:_,index:E,dataKey:d}):v.createElement(gJ,{shape:u,baseProps:l,entry:_,index:E,dataKey:d})))):null}function vJ(e){var{props:t,previousRectanglesRef:r}=e,{data:n,layout:s,isAnimationActive:a,animationBegin:l,animationDuration:u,animationEasing:d,onAnimationEnd:m,onAnimationStart:f}=t,p=r.current,y=mb(t,"recharts-bar-"),[x,j]=v.useState(!1),w=!x,S=v.useCallback(()=>{typeof m=="function"&&m(),j(!1)},[m]),_=v.useCallback(()=>{typeof f=="function"&&f(),j(!0)},[f]);return v.createElement(mJ,{showLabels:w,rects:n},v.createElement(hb,{animationId:y,begin:l,duration:u,isActive:a,easing:d,onAnimationEnd:S,onAnimationStart:_,key:y},E=>{var C=E===1?n:n==null?void 0:n.map((A,T)=>{var P=p&&p[T];if(P)return Ts(Ts({},A),{},{x:fs(P.x,A.x,E),y:fs(P.y,A.y,E),width:fs(P.width,A.width,E),height:fs(P.height,A.height,E)});if(s==="horizontal"){var z=fs(0,A.height,E),J=fs(A.stackedBarStart,A.y,E);return Ts(Ts({},A),{},{y:J,height:z})}var H=fs(0,A.width,E),fe=fs(A.stackedBarStart,A.x,E);return Ts(Ts({},A),{},{width:H,x:fe})});return E>0&&(r.current=C??null),C==null?null:v.createElement(ro,null,v.createElement(yJ,{props:t,data:C}))}),v.createElement(UG,{label:t.label}),t.children)}function xJ(e){var t=v.useRef(null);return v.createElement(vJ,{previousRectanglesRef:t,props:e})}var _T=0,bJ=(e,t)=>{var r=Array.isArray(e.value)?e.value[1]:e.value;return{x:e.x,y:e.y,value:r,errorVal:Ds(e,t)}};class wJ extends v.PureComponent{render(){var{hide:t,data:r,dataKey:n,className:s,xAxisId:a,yAxisId:l,needClip:u,background:d,id:m}=this.props;if(t||r==null)return null;var f=Lr("recharts-bar",s),p=m;return v.createElement(ro,{className:f,id:m},u&&v.createElement("defs",null,v.createElement(tJ,{clipPathId:p,xAxisId:a,yAxisId:l})),v.createElement(ro,{className:"recharts-bar-rectangles",clipPath:u?"url(#clipPath-".concat(p,")"):void 0},v.createElement(hJ,{data:r,dataKey:n,background:d,allOtherBarProps:this.props}),v.createElement(xJ,this.props)))}}var jJ={activeBar:!1,animationBegin:0,animationDuration:400,animationEasing:"ease",hide:!1,isAnimationActive:!lu.isSsr,legendType:"rect",minPointSize:_T,xAxisId:0,yAxisId:0,zIndex:Ys.bar};function SJ(e){var{xAxisId:t,yAxisId:r,hide:n,legendType:s,minPointSize:a,activeBar:l,animationBegin:u,animationDuration:d,animationEasing:m,isAnimationActive:f}=e,{needClip:p}=kT(t,r),y=sp(),x=xi(),j=KG(e.children,hw),w=xt(E=>XJ(E,t,r,x,e.id,j));if(y!=="vertical"&&y!=="horizontal")return null;var S,_=w==null?void 0:w[0];return _==null||_.height==null||_.width==null?S=0:S=y==="vertical"?_.height/2:_.width/2,v.createElement(eJ,{xAxisId:t,yAxisId:r,data:w,dataPointFormatter:bJ,errorBarOffset:S},v.createElement(wJ,co({},e,{layout:y,needClip:p,data:w,xAxisId:t,yAxisId:r,hide:n,legendType:s,minPointSize:a,activeBar:l,animationBegin:u,animationDuration:d,animationEasing:m,isAnimationActive:f})))}function NJ(e){var{layout:t,barSettings:{dataKey:r,minPointSize:n},pos:s,bandSize:a,xAxis:l,yAxis:u,xAxisTicks:d,yAxisTicks:m,stackedData:f,displayedData:p,offset:y,cells:x,parentViewBox:j,dataStartIndex:w}=e,S=t==="horizontal"?u:l,_=f?S.scale.domain():null,E=_U({numericAxis:S}),C=S.scale(E);return p.map((A,T)=>{var P,z,J,H,fe,X;f?P=bU(f[T+w],_):(P=Ds(A,r),Array.isArray(P)||(P=[E,P]));var K=HY(n,_T)(P[1],T);if(t==="horizontal"){var ae,[U,ne]=[u.scale(P[0]),u.scale(P[1])];z=Uk({axis:l,ticks:d,bandSize:a,offset:s.offset,entry:A,index:T}),J=(ae=ne??U)!==null&&ae!==void 0?ae:void 0,H=s.size;var G=U-ne;if(fe=Na(G)?0:G,X={x:z,y:y.top,width:H,height:y.height},Math.abs(K)>0&&Math.abs(fe)<Math.abs(K)){var ie=mi(fe||K)*(Math.abs(K)-Math.abs(fe));J-=ie,fe+=ie}}else{var[te,W]=[l.scale(P[0]),l.scale(P[1])];if(z=te,J=Uk({axis:u,ticks:m,bandSize:a,offset:s.offset,entry:A,index:T}),H=W-te,fe=s.size,X={x:y.left,y:J,width:y.width,height:fe},Math.abs(K)>0&&Math.abs(H)<Math.abs(K)){var se=mi(H||K)*(Math.abs(K)-Math.abs(H));H+=se}}if(z==null||J==null||H==null||fe==null)return null;var I=Ts(Ts({},A),{},{stackedBarStart:C,x:z,y:J,width:H,height:fe,value:f?P:P[1],payload:A,background:X,tooltipPosition:{x:z+H/2,y:J+fe/2},parentViewBox:j},x&&x[T]&&x[T].props);return I}).filter(Boolean)}function kJ(e){var t=Mi(e,jJ),r=xi();return v.createElement(vY,{id:t.id,type:"bar"},n=>v.createElement(v.Fragment,null,v.createElement(mY,{legendPayload:dJ(t)}),v.createElement(hY,{fn:fJ,args:t}),v.createElement(NY,{type:"bar",id:n,data:void 0,xAxisId:t.xAxisId,yAxisId:t.yAxisId,zAxisId:0,dataKey:t.dataKey,stackId:kU(t.stackId),hide:t.hide,barSize:t.barSize,minPointSize:t.minPointSize,maxBarSize:t.maxBarSize,isPanorama:r}),v.createElement(el,{zIndex:t.zIndex},v.createElement(SJ,co({},t,{id:n})))))}var CT=v.memo(kJ);CT.displayName="Bar";function oC(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function yh(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?oC(Object(r),!0).forEach(function(n){_J(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):oC(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function _J(e,t,r){return(t=CJ(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function CJ(e){var t=EJ(e,"string");return typeof t=="symbol"?t:t+""}function EJ(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var AJ=(e,t)=>t,PJ=(e,t,r)=>r,OJ=(e,t,r,n)=>n,TJ=(e,t,r,n,s)=>s,ef=be([Yb,TJ],(e,t)=>e.filter(r=>r.type==="bar").find(r=>r.id===t)),IJ=be([ef],e=>e==null?void 0:e.maxBarSize),DJ=(e,t,r,n,s,a)=>a,lC=(e,t,r)=>{var n=r??e;if(!Xn(n))return sa(n,t,0)},$J=be([xr,Yb,AJ,PJ,OJ],(e,t,r,n,s)=>t.filter(a=>e==="horizontal"?a.xAxisId===r:a.yAxisId===n).filter(a=>a.isPanorama===s).filter(a=>a.hide===!1).filter(a=>a.type==="bar")),RJ=(e,t,r,n)=>{var s=xr(e);return s==="horizontal"?ax(e,"yAxis",r,n):ax(e,"xAxis",t,n)},MJ=(e,t,r)=>{var n=xr(e);return n==="horizontal"?h_(e,"xAxis",t):h_(e,"yAxis",r)},FJ=(e,t,r)=>{var n={},s=e.filter(yp),a=e.filter(m=>m.stackId==null),l=s.reduce((m,f)=>(m[f.stackId]||(m[f.stackId]=[]),m[f.stackId].push(f),m),n),u=Object.entries(l).map(m=>{var[f,p]=m,y=p.map(j=>j.dataKey),x=lC(t,r,p[0].barSize);return{stackId:f,dataKeys:y,barSize:x}}),d=a.map(m=>{var f=[m.dataKey].filter(y=>y!=null),p=lC(t,r,m.barSize);return{stackId:void 0,dataKeys:f,barSize:p}});return[...u,...d]},LJ=be([$J,CV,MJ],FJ),zJ=(e,t,r,n,s)=>{var a,l,u=ef(e,t,r,n,s);if(u!=null){var d=xr(e),m=D4(e),{maxBarSize:f}=u,p=Xn(f)?m:f,y,x;return d==="horizontal"?(y=Yc(e,"xAxis",t,n),x=Gc(e,"xAxis",t,n)):(y=Yc(e,"yAxis",r,n),x=Gc(e,"yAxis",r,n)),(a=(l=rm(y,x,!0))!==null&&l!==void 0?l:p)!==null&&a!==void 0?a:0}},ET=(e,t,r,n)=>{var s=xr(e),a,l;return s==="horizontal"?(a=Yc(e,"xAxis",t,n),l=Gc(e,"xAxis",t,n)):(a=Yc(e,"yAxis",r,n),l=Gc(e,"yAxis",r,n)),rm(a,l)};function UJ(e,t,r,n,s){var a=n.length;if(!(a<1)){var l=sa(e,r,0,!0),u,d=[];if(mn(n[0].barSize)){var m=!1,f=r/a,p=n.reduce((_,E)=>_+(E.barSize||0),0);p+=(a-1)*l,p>=r&&(p-=(a-1)*l,l=0),p>=r&&f>0&&(m=!0,f*=.9,p=a*f);var y=(r-p)/2>>0,x={offset:y-l,size:0};u=n.reduce((_,E)=>{var C,A={stackId:E.stackId,dataKeys:E.dataKeys,position:{offset:x.offset+x.size+l,size:m?f:(C=E.barSize)!==null&&C!==void 0?C:0}},T=[..._,A];return x=T[T.length-1].position,T},d)}else{var j=sa(t,r,0,!0);r-2*j-(a-1)*l<=0&&(l=0);var w=(r-2*j-(a-1)*l)/a;w>1&&(w>>=0);var S=mn(s)?Math.min(w,s):w;u=n.reduce((_,E,C)=>[..._,{stackId:E.stackId,dataKeys:E.dataKeys,position:{offset:j+(w+l)*C+(w-S)/2,size:S}}],d)}return u}}var BJ=(e,t,r,n,s,a,l)=>{var u=Xn(l)?t:l,d=UJ(r,n,s!==a?s:a,e,u);return s!==a&&d!=null&&(d=d.map(m=>yh(yh({},m),{},{position:yh(yh({},m.position),{},{offset:m.position.offset-s/2})}))),d},WJ=be([LJ,D4,_V,$4,zJ,ET,IJ],BJ),VJ=(e,t,r,n)=>Yc(e,"xAxis",t,n),qJ=(e,t,r,n)=>Yc(e,"yAxis",r,n),HJ=(e,t,r,n)=>Gc(e,"xAxis",t,n),KJ=(e,t,r,n)=>Gc(e,"yAxis",r,n),GJ=be([WJ,ef],(e,t)=>{if(!(e==null||t==null)){var r=e.find(n=>n.stackId===t.stackId&&t.dataKey!=null&&n.dataKeys.includes(t.dataKey));if(r!=null)return r.position}}),YJ=(e,t)=>{var r=Kb(t);if(!(!e||r==null||t==null)){var{stackId:n}=t;if(n!=null){var s=e[n];if(s){var{stackedData:a}=s;if(a)return a.find(l=>l.key===r)}}}},JJ=be([RJ,ef],YJ),XJ=be([Qn,db,VJ,qJ,HJ,KJ,GJ,xr,Fb,ET,JJ,ef,DJ],(e,t,r,n,s,a,l,u,d,m,f,p,y)=>{var{chartData:x,dataStartIndex:j,dataEndIndex:w}=d;if(!(p==null||l==null||t==null||u!=="horizontal"&&u!=="vertical"||r==null||n==null||s==null||a==null||m==null)){var{data:S}=p,_;if(S!=null&&S.length>0?_=S:_=x==null?void 0:x.slice(j,w+1),_!=null)return NJ({layout:u,barSettings:p,pos:l,parentViewBox:t,bandSize:m,xAxis:r,yAxis:n,xAxisTicks:s,yAxisTicks:a,stackedData:f,displayedData:_,offset:e,cells:y,dataStartIndex:j})}}),QJ=e=>{var{chartData:t}=e,r=pn(),n=xi();return v.useEffect(()=>n?()=>{}:(r(k_(t)),()=>{r(k_(void 0))}),[t,r,n]),null},cC={x:0,y:0,width:0,height:0,padding:{top:0,right:0,bottom:0,left:0}},AT=Xs({name:"brush",initialState:cC,reducers:{setBrushSettings(e,t){return t.payload==null?cC:t.payload}}}),{setBrushSettings:Tee}=AT.actions,ZJ=AT.reducer;function eX(e,t,r){return(t=tX(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function tX(e){var t=rX(e,"string");return typeof t=="symbol"?t:t+""}function rX(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class gw{static create(t){return new gw(t)}constructor(t){this.scale=t}get domain(){return this.scale.domain}get range(){return this.scale.range}get rangeMin(){return this.range()[0]}get rangeMax(){return this.range()[1]}get bandwidth(){return this.scale.bandwidth}apply(t){var{bandAware:r,position:n}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(t!==void 0){if(n)switch(n){case"start":return this.scale(t);case"middle":{var s=this.bandwidth?this.bandwidth()/2:0;return this.scale(t)+s}case"end":{var a=this.bandwidth?this.bandwidth():0;return this.scale(t)+a}default:return this.scale(t)}if(r){var l=this.bandwidth?this.bandwidth()/2:0;return this.scale(t)+l}return this.scale(t)}}isInRange(t){var r=this.range(),n=r[0],s=r[r.length-1];return n<=s?t>=n&&t<=s:t>=s&&t<=n}}eX(gw,"EPS",1e-4);function nX(e){return(e%180+180)%180}var sX=function(t){var{width:r,height:n}=t,s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,a=nX(s),l=a*Math.PI/180,u=Math.atan(n/r),d=l>u&&l<Math.PI-u?n/Math.sin(l):r/Math.cos(l);return Math.abs(d)},iX={dots:[],areas:[],lines:[]},PT=Xs({name:"referenceElements",initialState:iX,reducers:{addDot:(e,t)=>{e.dots.push(t.payload)},removeDot:(e,t)=>{var r=Qa(e).dots.findIndex(n=>n===t.payload);r!==-1&&e.dots.splice(r,1)},addArea:(e,t)=>{e.areas.push(t.payload)},removeArea:(e,t)=>{var r=Qa(e).areas.findIndex(n=>n===t.payload);r!==-1&&e.areas.splice(r,1)},addLine:(e,t)=>{e.lines.push(t.payload)},removeLine:(e,t)=>{var r=Qa(e).lines.findIndex(n=>n===t.payload);r!==-1&&e.lines.splice(r,1)}}}),{addDot:Iee,removeDot:Dee,addArea:$ee,removeArea:Ree,addLine:Mee,removeLine:Fee}=PT.actions,aX=PT.reducer,oX=v.createContext(void 0),lX=e=>{var{children:t}=e,[r]=v.useState("".concat(jd("recharts"),"-clip")),n=ST();if(n==null)return null;var{x:s,y:a,width:l,height:u}=n;return v.createElement(oX.Provider,{value:r},v.createElement("defs",null,v.createElement("clipPath",{id:r},v.createElement("rect",{x:s,y:a,height:u,width:l}))),t)};function Xc(e,t){for(var r in e)if({}.hasOwnProperty.call(e,r)&&(!{}.hasOwnProperty.call(t,r)||e[r]!==t[r]))return!1;for(var n in t)if({}.hasOwnProperty.call(t,n)&&!{}.hasOwnProperty.call(e,n))return!1;return!0}function OT(e,t){if(t<1)return[];if(t===1)return e;for(var r=[],n=0;n<e.length;n+=t)r.push(e[n]);return r}function cX(e,t,r){var n={width:e.width+t.width,height:e.height+t.height};return sX(n,r)}function uX(e,t,r){var n=r==="width",{x:s,y:a,width:l,height:u}=e;return t===1?{start:n?s:a,end:n?s+l:a+u}:{start:n?s+l:a+u,end:n?s:a}}function _m(e,t,r,n,s){if(e*t<e*n||e*t>e*s)return!1;var a=r();return e*(t-e*a/2-n)>=0&&e*(t+e*a/2-s)<=0}function dX(e,t){return OT(e,t+1)}function fX(e,t,r,n,s){for(var a=(n||[]).slice(),{start:l,end:u}=t,d=0,m=1,f=l,p=function(){var j=n==null?void 0:n[d];if(j===void 0)return{v:OT(n,m)};var w=d,S,_=()=>(S===void 0&&(S=r(j,w)),S),E=j.coordinate,C=d===0||_m(e,E,_,f,u);C||(d=0,f=l,m+=1),C&&(f=E+e*(_()/2+s),d+=m)},y;m<=a.length;)if(y=p(),y)return y.v;return[]}function uC(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function ws(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?uC(Object(r),!0).forEach(function(n){hX(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):uC(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function hX(e,t,r){return(t=mX(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function mX(e){var t=pX(e,"string");return typeof t=="symbol"?t:t+""}function pX(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function gX(e,t,r,n,s){for(var a=(n||[]).slice(),l=a.length,{start:u}=t,{end:d}=t,m=function(y){var x=a[y],j,w=()=>(j===void 0&&(j=r(x,y)),j);if(y===l-1){var S=e*(x.coordinate+e*w()/2-d);a[y]=x=ws(ws({},x),{},{tickCoord:S>0?x.coordinate-S*e:x.coordinate})}else a[y]=x=ws(ws({},x),{},{tickCoord:x.coordinate});if(x.tickCoord!=null){var _=_m(e,x.tickCoord,w,u,d);_&&(d=x.tickCoord-e*(w()/2+s),a[y]=ws(ws({},x),{},{isShow:!0}))}},f=l-1;f>=0;f--)m(f);return a}function yX(e,t,r,n,s,a){var l=(n||[]).slice(),u=l.length,{start:d,end:m}=t;if(a){var f=n[u-1],p=r(f,u-1),y=e*(f.coordinate+e*p/2-m);if(l[u-1]=f=ws(ws({},f),{},{tickCoord:y>0?f.coordinate-y*e:f.coordinate}),f.tickCoord!=null){var x=_m(e,f.tickCoord,()=>p,d,m);x&&(m=f.tickCoord-e*(p/2+s),l[u-1]=ws(ws({},f),{},{isShow:!0}))}}for(var j=a?u-1:u,w=function(E){var C=l[E],A,T=()=>(A===void 0&&(A=r(C,E)),A);if(E===0){var P=e*(C.coordinate-e*T()/2-d);l[E]=C=ws(ws({},C),{},{tickCoord:P<0?C.coordinate-P*e:C.coordinate})}else l[E]=C=ws(ws({},C),{},{tickCoord:C.coordinate});if(C.tickCoord!=null){var z=_m(e,C.tickCoord,T,d,m);z&&(d=C.tickCoord+e*(T()/2+s),l[E]=ws(ws({},C),{},{isShow:!0}))}},S=0;S<j;S++)w(S);return l}function vX(e,t,r){var{tick:n,ticks:s,viewBox:a,minTickGap:l,orientation:u,interval:d,tickFormatter:m,unit:f,angle:p}=e;if(!s||!s.length||!n)return[];if(Nt(d)||lu.isSsr){var y;return(y=dX(s,Nt(d)?d:0))!==null&&y!==void 0?y:[]}var x=[],j=u==="top"||u==="bottom"?"width":"height",w=f&&j==="width"?md(f,{fontSize:t,letterSpacing:r}):{width:0,height:0},S=(C,A)=>{var T=typeof m=="function"?m(C.value,A):C.value;return j==="width"?cX(md(T,{fontSize:t,letterSpacing:r}),w,p):md(T,{fontSize:t,letterSpacing:r})[j]},_=s.length>=2?mi(s[1].coordinate-s[0].coordinate):1,E=uX(a,_,j);return d==="equidistantPreserveStart"?fX(_,E,S,s,l):(d==="preserveStart"||d==="preserveStartEnd"?x=yX(_,E,S,s,l,d==="preserveStartEnd"):x=gX(_,E,S,s,l),x.filter(C=>C.isShow))}var xX=e=>{var{ticks:t,label:r,labelGapWithTick:n=5,tickSize:s=0,tickMargin:a=0}=e,l=0;if(t){Array.from(t).forEach(f=>{if(f){var p=f.getBoundingClientRect();p.width>l&&(l=p.width)}});var u=r?r.getBoundingClientRect().width:0,d=s+a,m=l+d+u+(r?n:0);return Math.round(m)}return 0},bX=["axisLine","width","height","className","hide","ticks","axisType"],wX=["viewBox"],jX=["viewBox"];function mx(e,t){if(e==null)return{};var r,n,s=SX(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function SX(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function Ul(){return Ul=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Ul.apply(null,arguments)}function dC(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function kn(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?dC(Object(r),!0).forEach(function(n){NX(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):dC(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function NX(e,t,r){return(t=kX(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function kX(e){var t=_X(e,"string");return typeof t=="symbol"?t:t+""}function _X(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var CX={x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd",zIndex:Ys.axis};function EX(e){var{x:t,y:r,width:n,height:s,orientation:a,mirror:l,axisLine:u,otherSvgProps:d}=e;if(!u)return null;var m=kn(kn(kn({},d),Ko(u)),{},{fill:"none"});if(a==="top"||a==="bottom"){var f=+(a==="top"&&!l||a==="bottom"&&l);m=kn(kn({},m),{},{x1:t,y1:r+f*s,x2:t+n,y2:r+f*s})}else{var p=+(a==="left"&&!l||a==="right"&&l);m=kn(kn({},m),{},{x1:t+p*n,y1:r,x2:t+p*n,y2:r+s})}return v.createElement("line",Ul({},m,{className:Lr("recharts-cartesian-axis-line",Vc(u,"className"))}))}function AX(e,t,r,n,s,a,l,u,d){var m,f,p,y,x,j,w=u?-1:1,S=e.tickSize||l,_=Nt(e.tickCoord)?e.tickCoord:e.coordinate;switch(a){case"top":m=f=e.coordinate,y=r+ +!u*s,p=y-w*S,j=p-w*d,x=_;break;case"left":p=y=e.coordinate,f=t+ +!u*n,m=f-w*S,x=m-w*d,j=_;break;case"right":p=y=e.coordinate,f=t+ +u*n,m=f+w*S,x=m+w*d,j=_;break;default:m=f=e.coordinate,y=r+ +u*s,p=y+w*S,j=p+w*d,x=_;break}return{line:{x1:m,y1:p,x2:f,y2:y},tick:{x,y:j}}}function PX(e,t){switch(e){case"left":return t?"start":"end";case"right":return t?"end":"start";default:return"middle"}}function OX(e,t){switch(e){case"left":case"right":return"middle";case"top":return t?"start":"end";default:return t?"end":"start"}}function TX(e){var{option:t,tickProps:r,value:n}=e,s,a=Lr(r.className,"recharts-cartesian-axis-tick-value");if(v.isValidElement(t))s=v.cloneElement(t,kn(kn({},r),{},{className:a}));else if(typeof t=="function")s=t(kn(kn({},r),{},{className:a}));else{var l="recharts-cartesian-axis-tick-value";typeof t!="boolean"&&(l=Lr(l,t==null?void 0:t.className)),s=v.createElement(mw,Ul({},r,{className:l}),n)}return s}var IX=v.forwardRef((e,t)=>{var{ticks:r=[],tick:n,tickLine:s,stroke:a,tickFormatter:l,unit:u,padding:d,tickTextProps:m,orientation:f,mirror:p,x:y,y:x,width:j,height:w,tickSize:S,tickMargin:_,fontSize:E,letterSpacing:C,getTicksConfig:A,events:T,axisType:P}=e,z=vX(kn(kn({},A),{},{ticks:r}),E,C),J=PX(f,p),H=OX(f,p),fe=Ko(A),X=Jx(n),K={};typeof s=="object"&&(K=s);var ae=kn(kn({},fe),{},{fill:"none"},K),U=z.map(ie=>kn({entry:ie},AX(ie,y,x,j,w,f,S,p,_))),ne=U.map(ie=>{var{entry:te,line:W}=ie;return v.createElement(ro,{className:"recharts-cartesian-axis-tick",key:"tick-".concat(te.value,"-").concat(te.coordinate,"-").concat(te.tickCoord)},s&&v.createElement("line",Ul({},ae,W,{className:Lr("recharts-cartesian-axis-tick-line",Vc(s,"className"))})))}),G=U.map((ie,te)=>{var{entry:W,tick:se}=ie,I=kn(kn(kn(kn({textAnchor:J,verticalAnchor:H},fe),{},{stroke:"none",fill:a},X),se),{},{index:te,payload:W,visibleTicksCount:z.length,tickFormatter:l,padding:d},m);return v.createElement(ro,Ul({className:"recharts-cartesian-axis-tick-label",key:"tick-label-".concat(W.value,"-").concat(W.coordinate,"-").concat(W.tickCoord)},nb(T,W,te)),n&&v.createElement(TX,{option:n,tickProps:I,value:"".concat(typeof l=="function"?l(W.value,te):W.value).concat(u||"")}))});return v.createElement("g",{className:"recharts-cartesian-axis-ticks recharts-".concat(P,"-ticks")},G.length>0&&v.createElement(el,{zIndex:Ys.label},v.createElement("g",{className:"recharts-cartesian-axis-tick-labels recharts-".concat(P,"-tick-labels"),ref:t},G)),ne.length>0&&v.createElement("g",{className:"recharts-cartesian-axis-tick-lines recharts-".concat(P,"-tick-lines")},ne))}),DX=v.forwardRef((e,t)=>{var{axisLine:r,width:n,height:s,className:a,hide:l,ticks:u,axisType:d}=e,m=mx(e,bX),[f,p]=v.useState(""),[y,x]=v.useState(""),j=v.useRef(null);v.useImperativeHandle(t,()=>({getCalculatedWidth:()=>{var S;return xX({ticks:j.current,label:(S=e.labelRef)===null||S===void 0?void 0:S.current,labelGapWithTick:5,tickSize:e.tickSize,tickMargin:e.tickMargin})}}));var w=v.useCallback(S=>{if(S){var _=S.getElementsByClassName("recharts-cartesian-axis-tick-value");j.current=_;var E=_[0];if(E){var C=window.getComputedStyle(E),A=C.fontSize,T=C.letterSpacing;(A!==f||T!==y)&&(p(A),x(T))}}},[f,y]);return l||n!=null&&n<=0||s!=null&&s<=0?null:v.createElement(el,{zIndex:e.zIndex},v.createElement(ro,{className:Lr("recharts-cartesian-axis",a)},v.createElement(EX,{x:e.x,y:e.y,width:n,height:s,orientation:e.orientation,mirror:e.mirror,axisLine:r,otherSvgProps:Ko(e)}),v.createElement(IX,{ref:w,axisType:d,events:m,fontSize:f,getTicksConfig:e,height:e.height,letterSpacing:y,mirror:e.mirror,orientation:e.orientation,padding:e.padding,stroke:e.stroke,tick:e.tick,tickFormatter:e.tickFormatter,tickLine:e.tickLine,tickMargin:e.tickMargin,tickSize:e.tickSize,tickTextProps:e.tickTextProps,ticks:u,unit:e.unit,width:e.width,x:e.x,y:e.y}),v.createElement(yG,{x:e.x,y:e.y,width:e.width,height:e.height,lowerWidth:e.width,upperWidth:e.width},v.createElement(CG,{label:e.label,labelRef:e.labelRef}),e.children)))}),$X=v.memo(DX,(e,t)=>{var{viewBox:r}=e,n=mx(e,wX),{viewBox:s}=t,a=mx(t,jX);return Xc(r,s)&&Xc(n,a)}),yw=v.forwardRef((e,t)=>{var r=Mi(e,CX);return v.createElement($X,Ul({},r,{ref:t}))});yw.displayName="CartesianAxis";var RX=["dangerouslySetInnerHTML","ticks"],MX=["id"],FX=["domain"],LX=["domain"];function px(){return px=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},px.apply(null,arguments)}function Cm(e,t){if(e==null)return{};var r,n,s=zX(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function zX(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function UX(e){var t=pn();return v.useLayoutEffect(()=>(t(AY(e)),()=>{t(PY(e))}),[e,t]),null}var BX=e=>{var{xAxisId:t,className:r}=e,n=xt(db),s=xi(),a="xAxis",l=xt(S=>mu(S,a,t,s)),u=xt(S=>kO(S,a,t,s)),d=xt(S=>wO(S,t)),m=xt(S=>Nq(S,t)),f=xt(S=>W4(S,t));if(d==null||m==null||f==null)return null;var{dangerouslySetInnerHTML:p,ticks:y}=e,x=Cm(e,RX),{id:j}=f,w=Cm(f,MX);return v.createElement(yw,px({},x,w,{scale:l,x:m.x,y:m.y,width:d.width,height:d.height,className:Lr("recharts-".concat(a," ").concat(a),r),viewBox:n,ticks:u,axisType:a}))},WX={allowDataOverflow:oi.allowDataOverflow,allowDecimals:oi.allowDecimals,allowDuplicatedCategory:oi.allowDuplicatedCategory,height:oi.height,hide:!1,mirror:oi.mirror,orientation:oi.orientation,padding:oi.padding,reversed:oi.reversed,scale:oi.scale,tickCount:oi.tickCount,type:oi.type,xAxisId:0},VX=e=>{var t,r,n,s,a,l=Mi(e,WX);return v.createElement(v.Fragment,null,v.createElement(UX,{interval:(t=l.interval)!==null&&t!==void 0?t:"preserveEnd",id:l.xAxisId,scale:l.scale,type:l.type,padding:l.padding,allowDataOverflow:l.allowDataOverflow,domain:l.domain,dataKey:l.dataKey,allowDuplicatedCategory:l.allowDuplicatedCategory,allowDecimals:l.allowDecimals,tickCount:l.tickCount,includeHidden:(r=l.includeHidden)!==null&&r!==void 0?r:!1,reversed:l.reversed,ticks:l.ticks,height:l.height,orientation:l.orientation,mirror:l.mirror,hide:l.hide,unit:l.unit,name:l.name,angle:(n=l.angle)!==null&&n!==void 0?n:0,minTickGap:(s=l.minTickGap)!==null&&s!==void 0?s:5,tick:(a=l.tick)!==null&&a!==void 0?a:!0,tickFormatter:l.tickFormatter}),v.createElement(BX,l))},qX=(e,t)=>{var{domain:r}=e,n=Cm(e,FX),{domain:s}=t,a=Cm(t,LX);return Xc(n,a)?Array.isArray(r)&&r.length===2&&Array.isArray(s)&&s.length===2?r[0]===s[0]&&r[1]===s[1]:Xc({domain:r},{domain:s}):!1},TT=v.memo(VX,qX);TT.displayName="XAxis";var HX=["dangerouslySetInnerHTML","ticks"],KX=["id"],GX=["domain"],YX=["domain"];function gx(){return gx=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},gx.apply(null,arguments)}function Em(e,t){if(e==null)return{};var r,n,s=JX(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function JX(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function XX(e){var t=pn();return v.useLayoutEffect(()=>(t(OY(e)),()=>{t(TY(e))}),[e,t]),null}var QX=e=>{var{yAxisId:t,className:r,width:n,label:s}=e,a=v.useRef(null),l=v.useRef(null),u=xt(db),d=xi(),m=pn(),f="yAxis",p=xt(T=>mu(T,f,t,d)),y=xt(T=>jO(T,t)),x=xt(T=>_q(T,t)),j=xt(T=>kO(T,f,t,d)),w=xt(T=>V4(T,t));if(v.useLayoutEffect(()=>{if(!(n!=="auto"||!y||pw(s)||v.isValidElement(s)||w==null)){var T=a.current;if(T){var P=T.getCalculatedWidth();Math.round(y.width)!==Math.round(P)&&m(IY({id:t,width:P}))}}},[j,y,m,s,t,n,w]),y==null||x==null||w==null)return null;var{dangerouslySetInnerHTML:S,ticks:_}=e,E=Em(e,HX),{id:C}=w,A=Em(w,KX);return v.createElement(yw,gx({},E,A,{ref:a,labelRef:l,scale:p,x:x.x,y:x.y,tickTextProps:n==="auto"?{width:void 0}:{width:n},width:y.width,height:y.height,className:Lr("recharts-".concat(f," ").concat(f),r),viewBox:u,ticks:j,axisType:f}))},ZX={allowDataOverflow:li.allowDataOverflow,allowDecimals:li.allowDecimals,allowDuplicatedCategory:li.allowDuplicatedCategory,hide:!1,mirror:li.mirror,orientation:li.orientation,padding:li.padding,reversed:li.reversed,scale:li.scale,tickCount:li.tickCount,type:li.type,width:li.width,yAxisId:0},eQ=e=>{var t,r,n,s,a,l=Mi(e,ZX);return v.createElement(v.Fragment,null,v.createElement(XX,{interval:(t=l.interval)!==null&&t!==void 0?t:"preserveEnd",id:l.yAxisId,scale:l.scale,type:l.type,domain:l.domain,allowDataOverflow:l.allowDataOverflow,dataKey:l.dataKey,allowDuplicatedCategory:l.allowDuplicatedCategory,allowDecimals:l.allowDecimals,tickCount:l.tickCount,padding:l.padding,includeHidden:(r=l.includeHidden)!==null&&r!==void 0?r:!1,reversed:l.reversed,ticks:l.ticks,width:l.width,orientation:l.orientation,mirror:l.mirror,hide:l.hide,unit:l.unit,name:l.name,angle:(n=l.angle)!==null&&n!==void 0?n:0,minTickGap:(s=l.minTickGap)!==null&&s!==void 0?s:5,tick:(a=l.tick)!==null&&a!==void 0?a:!0,tickFormatter:l.tickFormatter}),v.createElement(QX,l))},tQ=(e,t)=>{var{domain:r}=e,n=Em(e,GX),{domain:s}=t,a=Em(t,YX);return Xc(n,a)?Array.isArray(r)&&r.length===2&&Array.isArray(s)&&s.length===2?r[0]===s[0]&&r[1]===s[1]:Xc({domain:r},{domain:s}):!1},IT=v.memo(eQ,tQ);IT.displayName="YAxis";var q0={exports:{}},H0={};/**
 * @license React
 * use-sync-external-store-with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var fC;function rQ(){if(fC)return H0;fC=1;var e=Qc();function t(d,m){return d===m&&(d!==0||1/d===1/m)||d!==d&&m!==m}var r=typeof Object.is=="function"?Object.is:t,n=e.useSyncExternalStore,s=e.useRef,a=e.useEffect,l=e.useMemo,u=e.useDebugValue;return H0.useSyncExternalStoreWithSelector=function(d,m,f,p,y){var x=s(null);if(x.current===null){var j={hasValue:!1,value:null};x.current=j}else j=x.current;x=l(function(){function S(T){if(!_){if(_=!0,E=T,T=p(T),y!==void 0&&j.hasValue){var P=j.value;if(y(P,T))return C=P}return C=T}if(P=C,r(E,T))return P;var z=p(T);return y!==void 0&&y(P,z)?(E=T,P):(E=T,C=z)}var _=!1,E,C,A=f===void 0?null:f;return[function(){return S(m())},A===null?void 0:function(){return S(A())}]},[m,f,p,y]);var w=n(d,x[0],x[1]);return a(function(){j.hasValue=!0,j.value=w},[w]),u(w),w},H0}var hC;function nQ(){return hC||(hC=1,q0.exports=rQ()),q0.exports}nQ();function sQ(e){e()}function iQ(){let e=null,t=null;return{clear(){e=null,t=null},notify(){sQ(()=>{let r=e;for(;r;)r.callback(),r=r.next})},get(){const r=[];let n=e;for(;n;)r.push(n),n=n.next;return r},subscribe(r){let n=!0;const s=t={callback:r,next:null,prev:t};return s.prev?s.prev.next=s:e=s,function(){!n||e===null||(n=!1,s.next?s.next.prev=s.prev:t=s.prev,s.prev?s.prev.next=s.next:e=s.next)}}}}var mC={notify(){},get:()=>[]};function aQ(e,t){let r,n=mC,s=0,a=!1;function l(w){f();const S=n.subscribe(w);let _=!1;return()=>{_||(_=!0,S(),p())}}function u(){n.notify()}function d(){j.onStateChange&&j.onStateChange()}function m(){return a}function f(){s++,r||(r=e.subscribe(d),n=iQ())}function p(){s--,r&&s===0&&(r(),r=void 0,n.clear(),n=mC)}function y(){a||(a=!0,f())}function x(){a&&(a=!1,p())}const j={addNestedSub:l,notifyNestedSubs:u,handleChangeWrapper:d,isSubscribed:m,trySubscribe:y,tryUnsubscribe:x,getListeners:()=>n};return j}var oQ=()=>typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",lQ=oQ(),cQ=()=>typeof navigator<"u"&&navigator.product==="ReactNative",uQ=cQ(),dQ=()=>lQ||uQ?v.useLayoutEffect:v.useEffect,fQ=dQ(),K0=Symbol.for("react-redux-context"),G0=typeof globalThis<"u"?globalThis:{};function hQ(){if(!v.createContext)return{};const e=G0[K0]??(G0[K0]=new Map);let t=e.get(v.createContext);return t||(t=v.createContext(null),e.set(v.createContext,t)),t}var mQ=hQ();function pQ(e){const{children:t,context:r,serverState:n,store:s}=e,a=v.useMemo(()=>{const d=aQ(s);return{store:s,subscription:d,getServerState:n?()=>n:void 0}},[s,n]),l=v.useMemo(()=>s.getState(),[s]);fQ(()=>{const{subscription:d}=a;return d.onStateChange=d.notifyNestedSubs,d.trySubscribe(),l!==s.getState()&&d.notifyNestedSubs(),()=>{d.tryUnsubscribe(),d.onStateChange=void 0}},[a,l]);const u=r||mQ;return v.createElement(u.Provider,{value:a},t)}var gQ=pQ,yQ=(e,t)=>t,vw=be([yQ,xr,U4,zn,BO,yo,RH,Qn],WH),xw=e=>{var t=e.currentTarget.getBoundingClientRect(),r=t.width/e.currentTarget.offsetWidth,n=t.height/e.currentTarget.offsetHeight;return{chartX:Math.round((e.clientX-t.left)/r),chartY:Math.round((e.clientY-t.top)/n)}},DT=Di("mouseClick"),$T=Bd();$T.startListening({actionCreator:DT,effect:(e,t)=>{var r=e.payload,n=vw(t.getState(),xw(r));(n==null?void 0:n.activeIndex)!=null&&t.dispatch(Lq({activeIndex:n.activeIndex,activeDataKey:void 0,activeCoordinate:n.activeCoordinate}))}});var yx=Di("mouseMove"),RT=Bd();RT.startListening({actionCreator:yx,effect:(e,t)=>{var r=e.payload,n=t.getState(),s=sw(n,n.tooltip.settings.shared),a=vw(n,xw(r));s==="axis"&&((a==null?void 0:a.activeIndex)!=null?t.dispatch(IO({activeIndex:a.activeIndex,activeDataKey:void 0,activeCoordinate:a.activeCoordinate})):t.dispatch(TO()))}});var pC={accessibilityLayer:!0,barCategoryGap:"10%",barGap:4,barSize:void 0,className:void 0,maxBarSize:void 0,stackOffset:"none",syncId:void 0,syncMethod:"index",baseValue:void 0},MT=Xs({name:"rootProps",initialState:pC,reducers:{updateOptions:(e,t)=>{var r;e.accessibilityLayer=t.payload.accessibilityLayer,e.barCategoryGap=t.payload.barCategoryGap,e.barGap=(r=t.payload.barGap)!==null&&r!==void 0?r:pC.barGap,e.barSize=t.payload.barSize,e.maxBarSize=t.payload.maxBarSize,e.stackOffset=t.payload.stackOffset,e.syncId=t.payload.syncId,e.syncMethod=t.payload.syncMethod,e.className=t.payload.className,e.baseValue=t.payload.baseValue}}}),vQ=MT.reducer,{updateOptions:xQ}=MT.actions,FT=Xs({name:"polarOptions",initialState:null,reducers:{updatePolarOptions:(e,t)=>t.payload}}),{updatePolarOptions:Lee}=FT.actions,bQ=FT.reducer,LT=Di("keyDown"),zT=Di("focus"),bw=Bd();bw.startListening({actionCreator:LT,effect:(e,t)=>{var r=t.getState(),n=r.rootProps.accessibilityLayer!==!1;if(n){var{keyboardInteraction:s}=r.tooltip,a=e.payload;if(!(a!=="ArrowRight"&&a!=="ArrowLeft"&&a!=="Enter")){var l=Number(iw(s,gu(r))),u=yo(r);if(a==="Enter"){var d=bm(r,"axis","hover",String(s.index));t.dispatch(lx({active:!s.active,activeIndex:s.index,activeDataKey:s.dataKey,activeCoordinate:d}));return}var m=Pq(r),f=m==="left-to-right"?1:-1,p=a==="ArrowRight"?1:-1,y=l+p*f;if(!(u==null||y>=u.length||y<0)){var x=bm(r,"axis","hover",String(y));t.dispatch(lx({active:!0,activeIndex:y.toString(),activeDataKey:void 0,activeCoordinate:x}))}}}}});bw.startListening({actionCreator:zT,effect:(e,t)=>{var r=t.getState(),n=r.rootProps.accessibilityLayer!==!1;if(n){var{keyboardInteraction:s}=r.tooltip;if(!s.active&&s.index==null){var a="0",l=bm(r,"axis","hover",String(a));t.dispatch(lx({activeDataKey:void 0,active:!0,activeIndex:a,activeCoordinate:l}))}}}});var Pi=Di("externalEvent"),UT=Bd();UT.startListening({actionCreator:Pi,effect:(e,t)=>{if(e.payload.handler!=null){var r=t.getState(),n={activeCoordinate:wH(r),activeDataKey:HO(r),activeIndex:Jc(r),activeLabel:qO(r),activeTooltipIndex:Jc(r),isTooltipActive:jH(r)};e.payload.handler(n,e.payload.reactEvent)}}});var wQ=be([pu],e=>e.tooltipItemPayloads),jQ=be([wQ,Qd,(e,t,r)=>t,(e,t,r)=>r],(e,t,r,n)=>{var s=e.find(u=>u.settings.dataKey===n);if(s!=null){var{positions:a}=s;if(a!=null){var l=t(a,r);return l}}}),BT=Di("touchMove"),WT=Bd();WT.startListening({actionCreator:BT,effect:(e,t)=>{var r=e.payload;if(!(r.touches==null||r.touches.length===0)){var n=t.getState(),s=sw(n,n.tooltip.settings.shared);if(s==="axis"){var a=vw(n,xw({clientX:r.touches[0].clientX,clientY:r.touches[0].clientY,currentTarget:r.currentTarget}));(a==null?void 0:a.activeIndex)!=null&&t.dispatch(IO({activeIndex:a.activeIndex,activeDataKey:void 0,activeCoordinate:a.activeCoordinate}))}else if(s==="item"){var l,u=r.touches[0];if(document.elementFromPoint==null)return;var d=document.elementFromPoint(u.clientX,u.clientY);if(!d||!d.getAttribute)return;var m=d.getAttribute(IU),f=(l=d.getAttribute(DU))!==null&&l!==void 0?l:void 0,p=jQ(t.getState(),m,f);t.dispatch(OO({activeDataKey:f,activeIndex:m,activeCoordinate:p}))}}}});var SQ=YA({brush:ZJ,cartesianAxis:DY,chartData:wK,errorBars:GY,graphicalItems:SY,layout:mU,legend:yB,options:gK,polarAxis:WG,polarOptions:bQ,referenceElements:aX,rootProps:vQ,tooltip:zq,zIndex:nK}),NQ=function(t){return L8({reducer:SQ,preloadedState:t,middleware:r=>r({serializableCheck:!1}).concat([$T.middleware,RT.middleware,bw.middleware,UT.middleware,WT.middleware]),enhancers:r=>{var n=r;return typeof r=="function"&&(n=r()),n.concat(oP({type:"raf"}))},devTools:lu.devToolsEnabled})};function kQ(e){var{preloadedState:t,children:r,reduxStoreName:n}=e,s=xi(),a=v.useRef(null);if(s)return r;a.current==null&&(a.current=NQ(t));var l=ib;return v.createElement(gQ,{context:l,store:a.current},r)}function _Q(e){var{layout:t,margin:r}=e,n=pn(),s=xi();return v.useEffect(()=>{s||(n(dU(t)),n(uU(r)))},[n,s,t,r]),null}function CQ(e){var t=pn();return v.useEffect(()=>{t(xQ(e))},[t,e]),null}function gC(e){var{zIndex:t,isPanorama:r}=e,n=r?"recharts-zindex-panorama-":"recharts-zindex-",s=bT("".concat(n).concat(t)),a=pn();return v.useLayoutEffect(()=>(a(tK({zIndex:t,elementId:s,isPanorama:r})),()=>{a(rK({zIndex:t,isPanorama:r}))}),[a,t,s,r]),v.createElement("g",{id:s})}function yC(e){var{children:t,isPanorama:r}=e,n=xt(qH);if(!n||n.length===0)return t;var s=n.filter(l=>l<0),a=n.filter(l=>l>0);return v.createElement(v.Fragment,null,s.map(l=>v.createElement(gC,{key:l,zIndex:l,isPanorama:r})),t,a.map(l=>v.createElement(gC,{key:l,zIndex:l,isPanorama:r})))}var EQ=["children"];function AQ(e,t){if(e==null)return{};var r,n,s=PQ(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function PQ(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function Am(){return Am=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Am.apply(null,arguments)}var OQ={width:"100%",height:"100%",display:"block"},TQ=v.forwardRef((e,t)=>{var r=dB(),n=fB(),s=EP();if(!Go(r)||!Go(n))return null;var{children:a,otherAttributes:l,title:u,desc:d}=e,m,f;return l!=null&&(typeof l.tabIndex=="number"?m=l.tabIndex:m=s?0:void 0,typeof l.role=="string"?f=l.role:f=s?"application":void 0),v.createElement(hA,Am({},l,{title:u,desc:d,role:f,tabIndex:m,width:r,height:n,style:OQ,ref:t}),a)}),IQ=e=>{var{children:t}=e,r=xt(rp);if(!r)return null;var{width:n,height:s,y:a,x:l}=r;return v.createElement(hA,{width:n,height:s,x:l,y:a},t)},vC=v.forwardRef((e,t)=>{var{children:r}=e,n=AQ(e,EQ),s=xi();return s?v.createElement(IQ,null,v.createElement(yC,{isPanorama:!0},r)):v.createElement(TQ,Am({ref:t},n),v.createElement(yC,{isPanorama:!1},r))});function DQ(){var e=pn(),[t,r]=v.useState(null),n=xt(TU);return v.useEffect(()=>{if(t!=null){var s=t.getBoundingClientRect(),a=s.width/t.offsetWidth;mn(a)&&a!==n&&e(hU(a))}},[t,e,n]),r}function xC(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function $Q(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?xC(Object(r),!0).forEach(function(n){RQ(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):xC(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function RQ(e,t,r){return(t=MQ(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function MQ(e){var t=FQ(e,"string");return typeof t=="symbol"?t:t+""}function FQ(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Bl(){return Bl=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Bl.apply(null,arguments)}var LQ=()=>(PK(),null);function Pm(e){if(typeof e=="number")return e;if(typeof e=="string"){var t=parseFloat(e);if(!Number.isNaN(t))return t}return 0}var zQ=v.forwardRef((e,t)=>{var r,n,s=v.useRef(null),[a,l]=v.useState({containerWidth:Pm((r=e.style)===null||r===void 0?void 0:r.width),containerHeight:Pm((n=e.style)===null||n===void 0?void 0:n.height)}),u=v.useCallback((m,f)=>{l(p=>{var y=Math.round(m),x=Math.round(f);return p.containerWidth===y&&p.containerHeight===x?p:{containerWidth:y,containerHeight:x}})},[]),d=v.useCallback(m=>{if(typeof t=="function"&&t(m),m!=null&&typeof ResizeObserver<"u"){var{width:f,height:p}=m.getBoundingClientRect();u(f,p);var y=j=>{var{width:w,height:S}=j[0].contentRect;u(w,S)},x=new ResizeObserver(y);x.observe(m),s.current=x}},[t,u]);return v.useEffect(()=>()=>{var m=s.current;m!=null&&m.disconnect()},[u]),v.createElement(v.Fragment,null,v.createElement(ip,{width:a.containerWidth,height:a.containerHeight}),v.createElement("div",Bl({ref:d},e)))}),UQ=v.forwardRef((e,t)=>{var{width:r,height:n}=e,[s,a]=v.useState({containerWidth:Pm(r),containerHeight:Pm(n)}),l=v.useCallback((d,m)=>{a(f=>{var p=Math.round(d),y=Math.round(m);return f.containerWidth===p&&f.containerHeight===y?f:{containerWidth:p,containerHeight:y}})},[]),u=v.useCallback(d=>{if(typeof t=="function"&&t(d),d!=null){var{width:m,height:f}=d.getBoundingClientRect();l(m,f)}},[t,l]);return v.createElement(v.Fragment,null,v.createElement(ip,{width:s.containerWidth,height:s.containerHeight}),v.createElement("div",Bl({ref:u},e)))}),BQ=v.forwardRef((e,t)=>{var{width:r,height:n}=e;return v.createElement(v.Fragment,null,v.createElement(ip,{width:r,height:n}),v.createElement("div",Bl({ref:t},e)))}),WQ=v.forwardRef((e,t)=>{var{width:r,height:n}=e;return no(r)||no(n)?v.createElement(UQ,Bl({},e,{ref:t})):v.createElement(BQ,Bl({},e,{ref:t}))});function VQ(e){return e===!0?zQ:WQ}var qQ=v.forwardRef((e,t)=>{var{children:r,className:n,height:s,onClick:a,onContextMenu:l,onDoubleClick:u,onMouseDown:d,onMouseEnter:m,onMouseLeave:f,onMouseMove:p,onMouseUp:y,onTouchEnd:x,onTouchMove:j,onTouchStart:w,style:S,width:_,responsive:E,dispatchTouchEvents:C=!0}=e,A=v.useRef(null),T=pn(),[P,z]=v.useState(null),[J,H]=v.useState(null),fe=DQ(),X=fb(),K=(X==null?void 0:X.width)>0?X.width:_,ae=(X==null?void 0:X.height)>0?X.height:s,U=v.useCallback($=>{fe($),typeof t=="function"&&t($),z($),H($),$!=null&&(A.current=$)},[fe,t,z,H]),ne=v.useCallback($=>{T(DT($)),T(Pi({handler:a,reactEvent:$}))},[T,a]),G=v.useCallback($=>{T(yx($)),T(Pi({handler:m,reactEvent:$}))},[T,m]),ie=v.useCallback($=>{T(TO()),T(Pi({handler:f,reactEvent:$}))},[T,f]),te=v.useCallback($=>{T(yx($)),T(Pi({handler:p,reactEvent:$}))},[T,p]),W=v.useCallback(()=>{T(zT())},[T]),se=v.useCallback($=>{T(LT($.key))},[T]),I=v.useCallback($=>{T(Pi({handler:l,reactEvent:$}))},[T,l]),B=v.useCallback($=>{T(Pi({handler:u,reactEvent:$}))},[T,u]),Me=v.useCallback($=>{T(Pi({handler:d,reactEvent:$}))},[T,d]),Se=v.useCallback($=>{T(Pi({handler:y,reactEvent:$}))},[T,y]),Ie=v.useCallback($=>{T(Pi({handler:w,reactEvent:$}))},[T,w]),je=v.useCallback($=>{C&&T(BT($)),T(Pi({handler:j,reactEvent:$}))},[T,C,j]),Ne=v.useCallback($=>{T(Pi({handler:x,reactEvent:$}))},[T,x]),Z=VQ(E);return v.createElement(eT.Provider,{value:P},v.createElement(jL.Provider,{value:J},v.createElement(Z,{width:K??(S==null?void 0:S.width),height:ae??(S==null?void 0:S.height),className:Lr("recharts-wrapper",n),style:$Q({position:"relative",cursor:"default",width:K,height:ae},S),onClick:ne,onContextMenu:I,onDoubleClick:B,onFocus:W,onKeyDown:se,onMouseDown:Me,onMouseEnter:G,onMouseLeave:ie,onMouseMove:te,onMouseUp:Se,onTouchEnd:Ne,onTouchMove:je,onTouchStart:Ie,ref:U},v.createElement(LQ,null),r)))}),HQ=["width","height","responsive","children","className","style","compact","title","desc"];function KQ(e,t){if(e==null)return{};var r,n,s=GQ(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function GQ(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var YQ=v.forwardRef((e,t)=>{var{width:r,height:n,responsive:s,children:a,className:l,style:u,compact:d,title:m,desc:f}=e,p=KQ(e,HQ),y=Ko(p);return d?v.createElement(v.Fragment,null,v.createElement(ip,{width:r,height:n}),v.createElement(vC,{otherAttributes:y,title:m,desc:f},a)):v.createElement(qQ,{className:l,style:u,width:r,height:n,responsive:s??!1,onClick:e.onClick,onMouseLeave:e.onMouseLeave,onMouseEnter:e.onMouseEnter,onMouseMove:e.onMouseMove,onMouseDown:e.onMouseDown,onMouseUp:e.onMouseUp,onContextMenu:e.onContextMenu,onDoubleClick:e.onDoubleClick,onTouchStart:e.onTouchStart,onTouchMove:e.onTouchMove,onTouchEnd:e.onTouchEnd},v.createElement(vC,{otherAttributes:y,title:m,desc:f,ref:t},v.createElement(lX,null,a)))});function vx(){return vx=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},vx.apply(null,arguments)}var JQ={top:5,right:5,bottom:5,left:5},XQ={accessibilityLayer:!0,layout:"horizontal",stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:JQ,reverseStackOrder:!1,syncMethod:"index",responsive:!1},QQ=v.forwardRef(function(t,r){var n,s=Mi(t.categoricalChartProps,XQ),{chartName:a,defaultTooltipEventType:l,validateTooltipEventTypes:u,tooltipPayloadSearcher:d,categoricalChartProps:m}=t,f={chartName:a,defaultTooltipEventType:l,validateTooltipEventTypes:u,tooltipPayloadSearcher:d,eventEmitter:void 0};return v.createElement(kQ,{preloadedState:{options:f},reduxStoreName:(n=m.id)!==null&&n!==void 0?n:a},v.createElement(QJ,{chartData:m.data}),v.createElement(_Q,{layout:s.layout,margin:s.margin}),v.createElement(CQ,{baseValue:s.baseValue,accessibilityLayer:s.accessibilityLayer,barCategoryGap:s.barCategoryGap,maxBarSize:s.maxBarSize,stackOffset:s.stackOffset,barGap:s.barGap,barSize:s.barSize,syncId:s.syncId,syncMethod:s.syncMethod,className:s.className}),v.createElement(YQ,vx({},s,{ref:r})))}),ZQ=["axis","item"],eZ=v.forwardRef((e,t)=>v.createElement(QQ,{chartName:"BarChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:ZQ,tooltipPayloadSearcher:mK,categoricalChartProps:e,ref:t}));const Pa="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='UTF-8'?%3e%3csvg%20id='icons'%20xmlns='http://www.w3.org/2000/svg'%20version='1.1'%20viewBox='0%200%20288%20288'%3e%3c!--%20Generator:%20Adobe%20Illustrator%2029.8.3,%20SVG%20Export%20Plug-In%20.%20SVG%20Version:%202.1.1%20Build%203)%20--%3e%3cdefs%3e%3cstyle%3e%20.st0%20{%20fill:%20%23c89211;%20}%20.st1%20{%20fill:%20%232e4760;%20}%20%3c/style%3e%3c/defs%3e%3crect%20class='st1'%20x='-.18'%20y='.13'%20width='288'%20height='287.75'%20rx='29.77'%20ry='29.77'/%3e%3cg%3e%3cpath%20class='st0'%20d='M255.27,97.14c-1.15-2.2-2.46-4.34-3.89-6.42-9.61-13.92-24.44-23.22-38.72-24.23-9.72-.86-15.97,1.42-30.41,10.99l-69.64,46.23-.72.49-27.78,32.23.56.79,5.22,7.56.54.8.73-.5,67.68-44.93c13.39-8.89,18.9-11.26,25.65-11.06,10.45.25,23.48,8.33,31.01,19.24,1.09,1.57,2.08,3.22,2.96,4.92,3.7,7.05,5.56,14.86,5.4,21.79l-61.49,40.82-.72.48-27.77,32.24.56.78,5.22,7.56.54.8.73-.48,69.63-46.23c7.75-5.15,12.63-8.93,15.92-12.75l27.76-32.24c-.11.12-.25.25-.35.37,3.04-3.42,4.8-6.83,6.16-11.25,3.68-11.38,1.81-25.42-4.79-38.01Z'/%3e%3cpath%20class='st0'%20d='M32.37,187.15c1.15,2.2,2.45,4.34,3.89,6.43,9.61,13.92,24.45,23.21,38.71,24.23,9.72.87,15.97-1.42,30.41-11l69.63-46.23.73-.49,27.77-32.24-.57-.78-5.22-7.57-.53-.8-.73.5-67.68,44.93c-13.39,8.89-18.9,11.26-25.65,11.06-10.44-.24-23.48-8.33-31-19.23-1.08-1.58-2.08-3.22-2.96-4.92-3.71-7.05-5.57-14.86-5.41-21.79l61.49-40.82.72-.48,27.77-32.24-.56-.79-5.21-7.56-.54-.79-.74.48-69.62,46.23c-7.75,5.14-12.63,8.93-15.92,12.75l-27.76,32.24c.11-.12.26-.25.36-.37-3.04,3.42-4.81,6.83-6.16,11.25-3.68,11.37-1.82,25.42,4.79,38Z'/%3e%3c/g%3e%3c/svg%3e",VT=["Bug","Change Request","Data Correction","Epic","Feature","Group","Issue","Other","Spike","Task","Test Case","User Story"];function tZ(){const e=window.location.origin,t=window.location.pathname,r=t.includes("/admin")?t.substring(0,t.indexOf("/admin")):t.includes("/voter")?t.substring(0,t.indexOf("/voter")):t;return`${e}${r}/admin`}const pi={clientId:"a6283b6c-2210-4d6c-bade-651acfdb6703",tenantId:"3bb4e039-9a0f-4671-9733-a9ae03d39395",get redirectUri(){return tZ()},scopes:["https://app.vssps.visualstudio.com/user_impersonation","offline_access"]};function rZ(){const e=new Uint8Array(32);return crypto.getRandomValues(e),qT(e)}async function nZ(e){const r=new TextEncoder().encode(e),n=await crypto.subtle.digest("SHA-256",r);return qT(new Uint8Array(n))}function qT(e){return btoa(String.fromCharCode(...e)).replace(/\+/g,"-").replace(/\//g,"_").replace(/=/g,"")}async function sZ(e){const t=rZ(),r=await nZ(t);sessionStorage.setItem("pkce_verifier",t);const n=new URLSearchParams({client_id:pi.clientId,response_type:"code",redirect_uri:pi.redirectUri,response_mode:"query",scope:pi.scopes.join(" "),state:e,code_challenge:r,code_challenge_method:"S256"});return`https://login.microsoftonline.com/${pi.tenantId}/oauth2/v2.0/authorize?${n}`}async function iZ(e){const t=`https://login.microsoftonline.com/${pi.tenantId}/oauth2/v2.0/token`,r=sessionStorage.getItem("pkce_verifier");if(!r)throw new Error("Code verifier not found - PKCE flow incomplete");const n=new URLSearchParams({client_id:pi.clientId,scope:pi.scopes.join(" "),code:e,redirect_uri:pi.redirectUri,grant_type:"authorization_code",code_verifier:r}),s=await fetch(t,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:n.toString()});if(!s.ok){const l=await s.json();throw console.error("Token exchange error:",l),new Error(`Failed to exchange code for tokens: ${l.error_description||l.error}`)}const a=await s.json();return sessionStorage.removeItem("pkce_verifier"),{accessToken:a.access_token,refreshToken:a.refresh_token,expiresIn:a.expires_in}}async function aZ(e){const t=`https://login.microsoftonline.com/${pi.tenantId}/oauth2/v2.0/token`,r=new URLSearchParams({client_id:pi.clientId,scope:pi.scopes.join(" "),refresh_token:e,grant_type:"refresh_token"}),n=await fetch(t,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:r.toString()});if(!n.ok){const a=await n.json();throw console.error("Token refresh error:",a),new Error(`Failed to refresh access token: ${a.error_description||a.error}`)}const s=await n.json();return{accessToken:s.access_token,expiresIn:s.expires_in}}async function HT(e,t){if(!e.accessToken||!e.organization||!e.project)throw new Error("Missing required configuration");const r=t||e.workItemType;if(!r)throw new Error("Missing work item type for state fetch");const n=encodeURIComponent(r),s=`https://dev.azure.com/${e.organization}/${e.project}/_apis/wit/workitemtypes/${n}?api-version=7.1`,a=await fetch(s,{headers:{Authorization:`Bearer ${e.accessToken}`,"Content-Type":"application/json"}});if(!a.ok)throw new Error(`Failed to fetch states: ${a.statusText}`);const l=await a.json();return l.states&&Array.isArray(l.states)?l.states.map(u=>u.name):[]}async function bC(e){const t=new Set;for(const r of VT)try{(await HT({...e,workItemType:r},r)).forEach(s=>{s&&t.add(s)})}catch(n){console.warn(`Failed to fetch states for type ${r}:`,n)}return Array.from(t).sort((r,n)=>r.localeCompare(n))}async function xx(e){if(!e.accessToken||!e.organization||!e.project)throw new Error("Missing required configuration");const t=`https://dev.azure.com/${e.organization}/${e.project}/_apis/wit/classificationnodes/areas?$depth=10&api-version=7.1`,r=await fetch(t,{headers:{Authorization:`Bearer ${e.accessToken}`,"Content-Type":"application/json"}});if(!r.ok)throw new Error(`Failed to fetch area paths: ${r.statusText}`);const n=await r.json(),s=(a,l="")=>{const u=l?`${l}\\${a.name}`:a.name;let d=[u];return a.children&&a.children.length>0&&a.children.forEach(m=>{d=d.concat(s(m,u))}),d};return s(n)}async function oZ(e,t,r=[]){if(!e.accessToken||!e.organization||!e.project)throw new Error("Missing required configuration");if(!t)return xx(e);try{const n=[`[System.WorkItemType] = '${t}'`];if(r&&r.length>0)if(r.length===1)n.push(`[System.State] = '${r[0]}'`);else{const x=r.map(j=>`'${j}'`).join(", ");n.push(`[System.State] IN (${x})`)}const s=`SELECT [System.Id] FROM WorkItems WHERE ${n.join(" AND ")} ORDER BY [System.ChangedDate] DESC`,a=`https://dev.azure.com/${e.organization}/${e.project}/_apis/wit/wiql?api-version=7.1`,l=await fetch(a,{method:"POST",headers:{Authorization:`Bearer ${e.accessToken}`,"Content-Type":"application/json"},body:JSON.stringify({query:s})});if(!l.ok)return console.warn("Failed to fetch area paths by type/state, returning empty list"),[];const u=await l.json();if(!u.workItems||u.workItems.length===0)return[];const d=u.workItems.map(x=>x.id).slice(0,200);if(d.length===0)return[];const m=`https://dev.azure.com/${e.organization}/${e.project}/_apis/wit/workitems?ids=${d.join(",")}&fields=System.AreaPath&api-version=7.1`,f=await fetch(m,{headers:{Authorization:`Bearer ${e.accessToken}`,"Content-Type":"application/json"}});if(!f.ok)return console.warn("Failed to fetch work item area paths for filtered request"),[];const p=await f.json(),y=new Set;return p.value&&Array.isArray(p.value)&&p.value.forEach(x=>{var w;const j=(w=x.fields)==null?void 0:w["System.AreaPath"];j&&y.add(j)}),Array.from(y).sort()}catch(n){return console.error("Error fetching area paths for type/state:",n),[]}}async function lZ(e,t){if(!e.accessToken||!e.organization||!e.project)throw new Error("Missing required configuration");if(!t||t.length===0)return{types:[],areaPaths:[],tags:[]};try{const n=`SELECT [System.Id], [System.WorkItemType], [System.AreaPath] FROM WorkItems WHERE ${t.length===1?`[System.State] = '${t[0]}'`:`[System.State] IN (${t.map(j=>`'${j}'`).join(", ")})`} ORDER BY [System.ChangedDate] DESC`,s=`https://dev.azure.com/${e.organization}/${e.project}/_apis/wit/wiql?api-version=7.1`,a=await fetch(s,{method:"POST",headers:{Authorization:`Bearer ${e.accessToken}`,"Content-Type":"application/json"},body:JSON.stringify({query:n})});if(!a.ok)throw new Error(`Failed to fetch work items by state: ${a.statusText}`);const l=await a.json();if(!l.workItems||l.workItems.length===0)return{types:[],areaPaths:[],tags:[]};const u=l.workItems.map(j=>j.id).slice(0,200);if(u.length===0)return{types:[],areaPaths:[],tags:[]};const d=`https://dev.azure.com/${e.organization}/${e.project}/_apis/wit/workitems?ids=${u.join(",")}&fields=System.WorkItemType,System.AreaPath,System.Tags&api-version=7.1`,m=await fetch(d,{headers:{Authorization:`Bearer ${e.accessToken}`,"Content-Type":"application/json"}});if(!m.ok)return console.warn("Failed to fetch work item details for states filter"),{types:[],areaPaths:[],tags:[]};const f=await m.json(),p=new Set,y=new Set,x=new Set;return f.value&&Array.isArray(f.value)&&f.value.forEach(j=>{var E,C,A;const w=(E=j.fields)==null?void 0:E["System.WorkItemType"],S=(C=j.fields)==null?void 0:C["System.AreaPath"],_=(A=j.fields)==null?void 0:A["System.Tags"];w&&p.add(w),S&&y.add(S),_&&_.split(";").map(T=>T.trim()).forEach(T=>{T&&x.add(T)})}),{types:Array.from(p).sort((j,w)=>j.localeCompare(w)),areaPaths:Array.from(y).sort((j,w)=>j.localeCompare(w)),tags:Array.from(x).sort((j,w)=>j.localeCompare(w))}}catch(r){return console.error("Error fetching types and area paths for states:",r),{types:[],areaPaths:[],tags:[]}}}async function cZ(e){if(!e.accessToken||!e.organization)throw new Error("Missing required configuration");const t=`https://dev.azure.com/${e.organization}/_apis/projects?stateFilter=All&api-version=7.1`,r=await fetch(t,{headers:{Authorization:`Bearer ${e.accessToken}`,"Content-Type":"application/json"}});if(!r.ok)throw new Error(`Failed to fetch projects: ${r.statusText}`);const n=await r.json();return!(n!=null&&n.value)||!Array.isArray(n.value)?[]:n.value.map(s=>s==null?void 0:s.name).filter(s=>typeof s=="string"&&s.trim().length>0).map(s=>s.trim()).sort((s,a)=>s.localeCompare(a))}async function uZ(e,t){if(!e.accessToken||!e.organization||!e.project)throw new Error("Missing required configuration");try{const n=`SELECT [System.Id], [System.WorkItemType], [System.State] FROM WorkItems WHERE (${t.map(x=>`[System.AreaPath] UNDER '${x}'`).join(" OR ")}) ORDER BY [System.ChangedDate] DESC`,s=`https://dev.azure.com/${e.organization}/${e.project}/_apis/wit/wiql?api-version=7.1`,a=await fetch(s,{method:"POST",headers:{Authorization:`Bearer ${e.accessToken}`,"Content-Type":"application/json"},body:JSON.stringify({query:n})});if(!a.ok)throw new Error(`Failed to fetch work items: ${a.statusText}`);const l=await a.json();if(!l.workItems||l.workItems.length===0)return{types:[],states:[]};const u=l.workItems.map(x=>x.id).slice(0,200),d=`https://dev.azure.com/${e.organization}/${e.project}/_apis/wit/workitems?ids=${u.join(",")}&fields=System.WorkItemType,System.State&api-version=7.1`,m=await fetch(d,{headers:{Authorization:`Bearer ${e.accessToken}`,"Content-Type":"application/json"}});if(!m.ok)return console.warn("Failed to fetch work item details"),{types:[],states:[]};const f=await m.json(),p=new Set,y=new Set;return f.value&&Array.isArray(f.value)&&f.value.forEach(x=>{x.fields&&(x.fields["System.WorkItemType"]&&p.add(x.fields["System.WorkItemType"]),x.fields["System.State"]&&y.add(x.fields["System.State"]))}),{types:Array.from(p).sort(),states:Array.from(y).sort()}}catch(r){return console.error("Error fetching types and states for area path:",r),{types:[],states:[]}}}async function dZ(e,t){if(!e.accessToken||!e.organization||!e.project)throw new Error("Missing required configuration");try{const n=`SELECT [System.Id], [System.WorkItemType], [System.State] FROM WorkItems WHERE (${t.map(j=>`[System.Tags] CONTAINS '${j}'`).join(" OR ")}) ORDER BY [System.ChangedDate] DESC`,s=`https://dev.azure.com/${e.organization}/${e.project}/_apis/wit/wiql?api-version=7.1`,a=await fetch(s,{method:"POST",headers:{Authorization:`Bearer ${e.accessToken}`,"Content-Type":"application/json"},body:JSON.stringify({query:n})});if(!a.ok)throw new Error(`Failed to fetch work items: ${a.statusText}`);const l=await a.json();if(!l.workItems||l.workItems.length===0)return{types:[],states:[],areaPaths:[]};const u=l.workItems.map(j=>j.id).slice(0,200),d=`https://dev.azure.com/${e.organization}/${e.project}/_apis/wit/workitems?ids=${u.join(",")}&fields=System.WorkItemType,System.State,System.AreaPath&api-version=7.1`,m=await fetch(d,{headers:{Authorization:`Bearer ${e.accessToken}`,"Content-Type":"application/json"}});if(!m.ok)return console.warn("Failed to fetch work item details"),{types:[],states:[],areaPaths:[]};const f=await m.json(),p=new Set,y=new Set,x=new Set;return f.value&&Array.isArray(f.value)&&f.value.forEach(j=>{j.fields&&(j.fields["System.WorkItemType"]&&p.add(j.fields["System.WorkItemType"]),j.fields["System.State"]&&y.add(j.fields["System.State"]),j.fields["System.AreaPath"]&&x.add(j.fields["System.AreaPath"]))}),{types:Array.from(p).sort(),states:Array.from(y).sort(),areaPaths:Array.from(x).sort()}}catch(r){return console.error("Error fetching types and states for tags:",r),{types:[],states:[],areaPaths:[]}}}async function fZ(e,t,r,n){if(!e.accessToken||!e.organization||!e.project)throw new Error("Missing required configuration");try{const s=[];if(s.push(`[System.WorkItemType] = '${t}'`),r&&r.length>0)if(r.length===1)s.push(`[System.State] = '${r[0]}'`);else{const j=r.map(w=>`'${w}'`).join(", ");s.push(`[System.State] IN (${j})`)}if(n&&n.length>0)if(n.length===1)s.push(`[System.AreaPath] UNDER '${n[0]}'`);else{const j=n.map(w=>`[System.AreaPath] UNDER '${w}'`);s.push(`(${j.join(" OR ")})`)}const a=`SELECT [System.Id] FROM WorkItems WHERE ${s.join(" AND ")} ORDER BY [System.ChangedDate] DESC`,l=`https://dev.azure.com/${e.organization}/${e.project}/_apis/wit/wiql?api-version=7.1`,u=await fetch(l,{method:"POST",headers:{Authorization:`Bearer ${e.accessToken}`,"Content-Type":"application/json"},body:JSON.stringify({query:a})});if(!u.ok)return console.warn("Failed to fetch tags, returning empty array"),[];const d=await u.json();if(!d.workItems||d.workItems.length===0)return[];const m=d.workItems.map(j=>j.id).slice(0,200),f=`https://dev.azure.com/${e.organization}/${e.project}/_apis/wit/workitems?ids=${m.join(",")}&fields=System.Tags&api-version=7.1`,p=await fetch(f,{headers:{Authorization:`Bearer ${e.accessToken}`,"Content-Type":"application/json"}});if(!p.ok)return console.warn("Failed to fetch work item details for tags"),[];const y=await p.json(),x=new Set;return y.value&&Array.isArray(y.value)&&y.value.forEach(j=>{j.fields&&j.fields["System.Tags"]&&j.fields["System.Tags"].split(";").map(S=>S.trim()).forEach(S=>{S&&x.add(S)})}),Array.from(x).sort()}catch(s){return console.warn("Error fetching tags, returning empty array:",s),[]}}async function wC(e){if(!e.accessToken||!e.organization||!e.project)throw new Error("Missing required configuration");const t=new Set;try{const r=[];let n=null;do{let s=`https://dev.azure.com/${e.organization}/${e.project}/_apis/wit/tags?api-version=7.1`;n&&(s+=`&continuationToken=${encodeURIComponent(n)}`);const a=await fetch(s,{headers:{Authorization:`Bearer ${e.accessToken}`,"Content-Type":"application/json"}});if(!a.ok){console.warn("Failed to fetch tags page, aborting remaining pages");break}const l=await a.json();l.value&&Array.isArray(l.value)&&l.value.forEach(u=>{u&&u.name&&r.push(u.name)}),n=a.headers.get("x-ms-continuationtoken")}while(n);r.forEach(s=>t.add(s))}catch(r){console.warn("Error fetching tags, returning empty array:",r)}try{(await hZ(e)).forEach(n=>t.add(n))}catch(r){console.warn("Error fetching tags via WIQL fallback:",r)}return Array.from(t).sort((r,n)=>r.localeCompare(n))}async function hZ(e){const t={query:"SELECT [System.Id] FROM WorkItems WHERE [System.TeamProject] = @project ORDER BY [System.ChangedDate] DESC"},r=`https://dev.azure.com/${e.organization}/${e.project}/_apis/wit/wiql?api-version=7.1`,n=await fetch(r,{method:"POST",headers:{Authorization:`Bearer ${e.accessToken}`,"Content-Type":"application/json"},body:JSON.stringify(t)});if(!n.ok)throw new Error(`Failed to fetch tags via WIQL: ${n.status}`);const s=await n.json();if(!s.workItems||s.workItems.length===0)return[];const a=s.workItems.map(f=>f.id).slice(0,200);if(a.length===0)return[];const l=`https://dev.azure.com/${e.organization}/${e.project}/_apis/wit/workitems?ids=${a.join(",")}&fields=System.Tags&api-version=7.1`,u=await fetch(l,{headers:{Authorization:`Bearer ${e.accessToken}`,"Content-Type":"application/json"}});if(!u.ok)throw new Error(`Failed to fetch work item details for tags via WIQL fallback: ${u.status}`);const d=await u.json(),m=new Set;return d.value&&Array.isArray(d.value)&&d.value.forEach(f=>{f.fields&&f.fields["System.Tags"]&&f.fields["System.Tags"].split(";").map(y=>y.trim()).forEach(y=>{y&&m.add(y)})}),Array.from(m)}function mZ(e){const t=new Date(e).getTime(),r=Date.now(),n=300*1e3;return t-r<n}async function pZ(){const e=new URLSearchParams(window.location.search),t=e.get("code"),r=e.get("state");if(!t)return null;const n=sessionStorage.getItem("oauth_state");if(r!==n)throw new Error("State mismatch - possible CSRF attack");const s=await iZ(t);return sessionStorage.removeItem("oauth_state"),s}async function gZ(){const e=Math.random().toString(36).substring(7);sessionStorage.setItem("oauth_state",e);const t=sessionStorage.getItem("currentSession");t&&sessionStorage.setItem("oauth_session_backup",t);const r=await sZ(e);window.location.href=r}async function jC(e){const{organization:t,project:r,workItemType:n,query:s,accessToken:a}=e;if(!a)throw new Error("Not authenticated with Azure DevOps");try{let l;s?l=`SELECT [System.Id] FROM WorkItems WHERE ${s}`:l=`SELECT [System.Id] FROM WorkItems WHERE [System.WorkItemType] = '${n}' AND [System.State] = 'Active'`;const u=`https://dev.azure.com/${t}/${r}/_apis/wit/wiql?api-version=7.0`,d=await fetch(u,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${a}`},body:JSON.stringify({query:l})});if(!d.ok)throw new Error(`Azure DevOps query failed: ${d.status} ${d.statusText}`);const f=(await d.json()).workItems.map(C=>C.id);if(f.length===0)return[];const p=["System.Id","System.Title","System.Description","System.Tags","System.WorkItemType","System.State","Microsoft.VSTS.Common.Priority","System.AreaPath","System.IterationPath"].join(","),y=200,x=[];for(let C=0;C<f.length;C+=y){const T=f.slice(C,C+y).join(","),P=`https://dev.azure.com/${t}/${r}/_apis/wit/workitems?ids=${T}&fields=${p}&api-version=7.0`,z=await fetch(P,{headers:{Authorization:`Bearer ${a}`}});if(!z.ok)throw new Error(`Failed to fetch work items: ${z.status} ${z.statusText}`);const J=await z.json();J.value&&Array.isArray(J.value)&&x.push(...J.value)}if(x.length===0)return[];const j=new Map,w=new Map,S=new Map,_=10;for(let C=0;C<x.length;C+=_){const A=x.slice(C,C+_);await Promise.all(A.map(async T=>{try{const P=`https://dev.azure.com/${t}/${r}/_apis/wit/workitems/${T.id}?$expand=relations&api-version=7.0`,z=await fetch(P,{headers:{Authorization:`Bearer ${a}`}});if(z.ok){const J=await z.json();if(J.relations){for(const H of J.relations)if(H.rel==="System.LinkTypes.Hierarchy-Forward"){const fe=H.url.match(/\/work[iI]tems\/(\d+)(?:\?|$|\/)/i);if(fe){const X=parseInt(fe[1],10);j.set(T.id,X)}}}}}catch(P){console.error(`Error fetching relations for work item ${T.id}:`,P)}}))}const E=Array.from(new Set(j.values()));if(E.length>0){const C=E.slice(0,200).join(","),A=["System.Id","System.Title","System.WorkItemType"].join(","),T=`https://dev.azure.com/${t}/${r}/_apis/wit/workitems?ids=${C}&fields=${A}&api-version=7.0`;try{const P=await fetch(T,{headers:{Authorization:`Bearer ${a}`}});if(P.ok){const z=await P.json();for(const J of z.value)S.set(J.id,J.fields["System.Title"]||""),J.fields["System.WorkItemType"]==="Epic"&&w.set(J.id,J.fields["System.Title"]||"")}}catch(P){console.error("Error fetching parent work items:",P)}}return x.map(C=>{let A=null;const T=j.get(C.id);if(T&&(A=w.get(T)||null,!A)){const P=S.get(T)}if(!A&&C.fields){const z=["System.Epic","Epic","Microsoft.VSTS.Common.Epic","Custom.Epic","EpicLink","EpicName",...Object.keys(C.fields).filter(J=>J.toLowerCase().includes("epic")&&!["System.Epic","Epic","Microsoft.VSTS.Common.Epic","Custom.Epic","EpicLink","EpicName"].includes(J))];for(const J of z){const H=C.fields[J];if(H!=null){if(typeof H=="string"&&H.trim()!==""){const fe=parseInt(H.trim());if(!isNaN(fe)&&fe>0){if(A=w.get(fe)||null,A)break}else{A=H.trim();break}}else if(typeof H=="number"&&(A=w.get(H)||null,A))break}}}return{id:C.id,fields:{"System.Title":C.fields["System.Title"],"System.Description":C.fields["System.Description"],"System.Tags":C.fields["System.Tags"],"System.WorkItemType":C.fields["System.WorkItemType"],"System.State":C.fields["System.State"],"Microsoft.VSTS.Common.Priority":C.fields["Microsoft.VSTS.Common.Priority"],"System.AreaPath":C.fields["System.AreaPath"],"System.IterationPath":C.fields["System.IterationPath"],Epic:A||void 0},url:`https://dev.azure.com/${t}/${r}/_workitems/edit/${C.id}`}})}catch(l){throw console.error("Error fetching from Azure DevOps:",l),l}}function SC(e){return e.map(t=>{let r;const n=t.fields.Epic,s=t.fields["System.WorkItemType"];if(n&&typeof n=="string"&&n.trim()!==""){const d=n.trim();d!==s&&d!=="Epic"&&d.toLowerCase()!=="epic"?r=d:console.warn(`Work item ${t.id} has epic field "${d}" which matches work item type "${s}" - ignoring`)}const l=(t.fields["System.Description"]||"").replace(/<[^>]*>/g,"").trim(),u=t.fields["System.Title"]||"Untitled";return r&&u===r&&console.warn(`Work item ${t.id}: Title "${u}" matches Epic name "${r}" - this may indicate a data issue`),{id:`ado-${t.id}`,title:u,description:l,votes:0,voters:[],epic:r||void 0,state:t.fields["System.State"]||void 0,areaPath:t.fields["System.AreaPath"]||void 0,tags:t.fields["System.Tags"]?t.fields["System.Tags"].split(";").map(d=>d.trim()).filter(d=>d):[],azureDevOpsId:t.id.toString(),azureDevOpsUrl:t.url,workItemType:s||void 0}})}function NC(){return"Product".split(",").map(t=>t.trim()).filter(t=>t.length>0)}const Ji=e=>{const r=e.split("T")[0].split(" ")[0].split("-");if(r.length!==3)return new Date(e).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"});const n=parseInt(r[0],10),s=parseInt(r[1],10)-1,a=parseInt(r[2],10);return new Date(n,s,a).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})},Yi=e=>new Date(e)<new Date,KT="/feature-voting-app/assets/colorpicker-CmB9zXJh.png",kC=[{bg:"#2D4660",text:"#FFFFFF",border:"#1D3144"},{bg:"#1E5461",text:"#FFFFFF",border:"#133742"},{bg:"#C89212",text:"#FFFFFF",border:"#A67810"},{bg:"#173B65",text:"#FFFFFF",border:"#0F2844"},{bg:"#2E5A8F",text:"#FFFFFF",border:"#1F4468"},{bg:"#4A6A8F",text:"#FFFFFF",border:"#3D5A7D"},{bg:"#5479A1",text:"#FFFFFF",border:"#4A6A8F"},{bg:"#6B8FBF",text:"#FFFFFF",border:"#5479A1"},{bg:"#3D7BAD",text:"#FFFFFF",border:"#2E5A8F"},{bg:"#258799",text:"#FFFFFF",border:"#145668"},{bg:"#36849B",text:"#FFFFFF",border:"#2A7489"},{bg:"#4098B3",text:"#FFFFFF",border:"#36849B"},{bg:"#2B9BAD",text:"#FFFFFF",border:"#1E7A89"},{bg:"#1FA3B5",text:"#FFFFFF",border:"#178290"},{bg:"#2D7A4E",text:"#FFFFFF",border:"#1E5A38"},{bg:"#3A9B5C",text:"#FFFFFF",border:"#2D7A4E"},{bg:"#52B876",text:"#FFFFFF",border:"#3A9B5C"},{bg:"#6FD492",text:"#FFFFFF",border:"#52B876"},{bg:"#4CAF7A",text:"#FFFFFF",border:"#3A9B5C"},{bg:"#7CB342",text:"#FFFFFF",border:"#689F38"},{bg:"#9CCC65",text:"#111827",border:"#7CB342"},{bg:"#E0A925",text:"#111827",border:"#C89212"},{bg:"#F4B729",text:"#111827",border:"#E0A925"},{bg:"#FFC940",text:"#111827",border:"#F4B729"},{bg:"#D4A017",text:"#FFFFFF",border:"#B8890F"},{bg:"#D87A35",text:"#FFFFFF",border:"#C4681F"},{bg:"#E88F3A",text:"#FFFFFF",border:"#D87A35"},{bg:"#FF9F4A",text:"#FFFFFF",border:"#E88F3A"},{bg:"#FF8C42",text:"#FFFFFF",border:"#E88F3A"},{bg:"#B83A2F",text:"#FFFFFF",border:"#9F2A21"},{bg:"#D44638",text:"#FFFFFF",border:"#B83A2F"},{bg:"#E85240",text:"#FFFFFF",border:"#D44638"},{bg:"#591D0F",text:"#FFFFFF",border:"#3C130A"},{bg:"#8A3420",text:"#FFFFFF",border:"#6F2818"},{bg:"#6B4C9A",text:"#FFFFFF",border:"#573A7F"},{bg:"#8E6BB5",text:"#FFFFFF",border:"#7556A1"},{bg:"#9B7AC7",text:"#FFFFFF",border:"#8E6BB5"},{bg:"#5D3F7A",text:"#FFFFFF",border:"#4A2F61"},{bg:"#492434",text:"#FFFFFF",border:"#311823"},{bg:"#5D2F43",text:"#FFFFFF",border:"#492434"},{bg:"#8B3A62",text:"#FFFFFF",border:"#6F2A4D"},{bg:"#A14A76",text:"#FFFFFF",border:"#8B3A62"},{bg:"#6A4234",text:"#FFFFFF",border:"#4B2D23"},{bg:"#8B5A3C",text:"#FFFFFF",border:"#6A4234"},{bg:"#A0694B",text:"#FFFFFF",border:"#8B5A3C"},{bg:"#7D5A3A",text:"#FFFFFF",border:"#6A4234"},{bg:"#3A3638",text:"#FFFFFF",border:"#2A2628"},{bg:"#4A4548",text:"#FFFFFF",border:"#3A3638"},{bg:"#5C5A5D",text:"#FFFFFF",border:"#4A4548"},{bg:"#7A8590",text:"#FFFFFF",border:"#5F6A74"},{bg:"#8F959B",text:"#111827",border:"#72777C"}],yZ=e=>e?e.trim().toLowerCase():"",vZ=e=>{let t=0;for(let r=0;r<e.length;r+=1)t=t*31+e.charCodeAt(r)>>>0;return t},Eh=(e,t,r)=>Math.min(Math.max(e,t),r),xZ=e=>{if(!e)return null;let t=e.trim();return!t||(t.startsWith("#")||(t=`#${t}`),t.length===4&&(t=`#${t[1]}${t[1]}${t[2]}${t[2]}${t[3]}${t[3]}`),t.length!==7)?null:t.toUpperCase()},ww=e=>{const t=e.replace("#",""),r=parseInt(t,16);return{r:r>>16&255,g:r>>8&255,b:r&255}},bZ=({r:e,g:t,b:r})=>{const n=[e,t,r].map(s=>{const a=s/255;return a<=.03928?a/12.92:Math.pow((a+.055)/1.055,2.4)});return .2126*n[0]+.7152*n[1]+.0722*n[2]},wZ=e=>bZ(ww(e))>.6?"#111827":"#FFFFFF",_C=(e,t)=>{const{r,g:n,b:s}=ww(e),a=1+t/100,l=Eh(Math.round(r*a),0,255),u=Eh(Math.round(n*a),0,255),d=Eh(Math.round(s*a),0,255);return`#${l.toString(16).padStart(2,"0")}${u.toString(16).padStart(2,"0")}${d.toString(16).padStart(2,"0")}`.toUpperCase()},jZ=(e,t)=>{const{r,g:n,b:s}=ww(e);return`rgba(${r}, ${n}, ${s}, ${Eh(t,0,1)})`},Yn=(e,t)=>{const r=xZ(t);if(r){const l=wZ(r);return{background:r,text:l,border:_C(r,-20),badgeBackground:jZ(r,.15),badgeText:l,hoverBackground:_C(r,-5),hoverText:l}}const n=yZ(e),s=n?vZ(n)%kC.length:0,a=kC[s];return{background:a.bg,text:a.text,border:a.border,badgeBackground:`${a.bg}1A`,badgeText:a.text,hoverBackground:a.bg,hoverText:a.text}};function SZ({label:e="Product",products:t,value:r,onChange:n,fallbackName:s=null,isLoading:a=!1,error:l=null,disabled:u=!1,placeholder:d="Select a product",helperText:m,className:f="",allowAdd:p=!1,newProductName:y="",onNewProductNameChange:x,newProductColor:j,onNewProductColorChange:w,onCreateProduct:S,isCreatingProduct:_=!1,addHelperText:E,addButtonLabel:C="Add Product",addInputPlaceholder:A="e.g., Catalyst Cloud",allowDelete:T=!1,onRequestDeleteProduct:P}){const[z,J]=v.useState(!1),H=v.useRef(null),fe=v.useRef(null),[X,K]=v.useState(!1),[ae,U]=v.useState(!1),ne=v.useMemo(()=>t.find(je=>je.id===r)??null,[t,r]),G=(ne==null?void 0:ne.name)??s??"",ie=G?Yn(G,(ne==null?void 0:ne.color_hex)??null):null,te=u||a||t.length===0;v.useEffect(()=>{if(!z)return;function je(Z){H.current&&!H.current.contains(Z.target)&&J(!1)}function Ne(Z){Z.key==="Escape"&&J(!1)}return document.addEventListener("mousedown",je),document.addEventListener("keydown",Ne),()=>{document.removeEventListener("mousedown",je),document.removeEventListener("keydown",Ne)}},[z]);const W=je=>{n(je),J(!1)},se=!!(p&&x&&S),I=se&&X,B=!!w,Me=j??"#2D4660",Se=!!(e&&e.trim().length>0),Ie=Se||se;return i.jsxs("div",{className:`space-y-3 ${f}`,children:[i.jsx("style",{children:`
        .product-picker__menu {
          box-shadow: 0px 12px 28px rgba(45, 70, 96, 0.18);
          width: 100%;
          background-color: #ffffff;
          overflow: hidden;
        }

        .product-picker__item {
          display: flex;
          width: 100%;
          align-items: center;
          justify-content: flex-start;
          gap: 0.75rem;
          padding: 0.65rem 0.75rem;
          font-size: 0.875rem;
          background: #ffffff;
          border: none;
          border-top: 1px solid rgba(203, 213, 225, 0.4);
          cursor: pointer;
          color: var(--product-color, #2D4660);
          transition: color 0.3s ease;
          text-align: left;
        }

        .product-picker__item:first-child {
          border-top: none;
        }

        .product-picker__item:hover,
        .product-picker__item:focus-visible {
          background-color: var(--product-light-bg, rgba(45, 70, 96, 0.1));
          outline: none;
        }

        .product-color-badge {
          width: 1.5rem;
          height: 1.5rem;
          border-radius: 0.35rem;
          flex-shrink: 0;
          background-color: var(--product-color, #2D4660);
          border: 1px solid var(--product-border-color, rgba(0,0,0,0.12));
          box-shadow: inset 0 0 0 1px rgba(255,255,255,0.35);
        }
      `}),i.jsxs("div",{className:"relative",ref:H,style:Ie?void 0:{marginTop:"-12px"},children:[Ie&&i.jsxs("div",{className:"flex items-center justify-between mb-1 gap-3",children:[Se&&i.jsx("label",{className:"block text-sm font-medium text-gray-700",children:e}),se&&i.jsx("div",{className:"flex-1 flex items-center justify-end gap-2",children:I?i.jsxs("div",{className:"flex items-center gap-2 transition-all duration-300",children:[i.jsx("input",{type:"text",value:y,onChange:je=>{U(!1),x==null||x(je.target.value)},placeholder:"Product name",className:"flex-1 h-10 px-3 border rounded-md text-sm focus:outline-none focus:ring-0",style:{borderColor:j&&y.trim().length>0?j:"#D1D5DB"}}),B&&y.trim().length>0&&i.jsxs(i.Fragment,{children:[i.jsx("button",{type:"button",onClick:()=>{var je;return(je=fe.current)==null?void 0:je.click()},className:`relative h-10 w-10 rounded-md border shadow-sm flex items-center justify-center focus:outline-none focus:ring-2 focus:ring-offset-1 focus:ring-[#2d4660] ${j?"":"border-gray-300 bg-white"}`,style:j?{backgroundColor:j,borderColor:j}:void 0,"aria-label":"Choose product color",children:!j&&i.jsx("img",{src:"https://icon-library.com/images/color-wheel-icon-png/color-wheel-icon-png-25.jpg",alt:"",className:"h-7 w-7 object-contain pointer-events-none"})}),i.jsx("input",{ref:fe,type:"color",value:Me,onChange:je=>{U(!1),w==null||w(je.target.value)},className:"sr-only"}),y.trim().length>0&&i.jsx("button",{type:"button",onClick:()=>U(!0),className:`h-10 px-3 rounded-md text-sm font-medium border transition-colors ${ae?"bg-green-50 border-green-500 text-green-700":"bg-white border-gray-300 text-gray-700 hover:bg-gray-50"}`,children:"Looks Great"})]}),y.trim().length>0&&j&&ae&&i.jsx("button",{type:"button",onClick:S,className:"h-10 px-4 bg-[#C89212] text-white rounded-md text-sm font-semibold hover:bg-[#A67810] transition-colors",children:_?"Creating":"Create New Product"})]}):i.jsx("button",{type:"button",onClick:()=>K(!0),className:"text-sm font-medium text-blue-600 hover:text-blue-700 whitespace-nowrap",children:"+ Create New Product"})})]}),i.jsxs("button",{type:"button",onClick:()=>!te&&J(je=>!je),className:`relative flex w-full items-center justify-between rounded-md border px-3 py-2 text-left text-sm ${te?"cursor-not-allowed bg-gray-100 text-gray-400 border-gray-200":"bg-white text-gray-900 border-gray-300 hover:border-[#2D4660]"}`,style:!te&&ie?{borderColor:ie.border}:void 0,"aria-expanded":z,"aria-haspopup":"listbox",children:[i.jsxs("div",{className:"flex items-center gap-2 truncate",children:[ie&&i.jsx("span",{className:"inline-flex h-3.5 w-3.5 rounded-sm border border-white/60 shadow-inner",style:{backgroundColor:ie.background,borderColor:ie.border},"aria-hidden":"true"}),i.jsx("span",{className:`truncate ${G?"":"text-gray-400"}`,style:ie?{color:ie.background}:void 0,children:G||(t.length===0?"No products available":d)})]}),i.jsx(ds,{className:`ml-2 h-4 w-4 transition-transform ${z?"rotate-180":""} ${te?"text-gray-300":"text-gray-500"}`})]}),z&&!te&&i.jsx("div",{className:"product-picker__menu absolute left-0 z-50 mt-2 w-full overflow-hidden rounded-md border border-gray-200 bg-white",style:{marginTop:"-10px"},role:"listbox",children:i.jsx("div",{className:"max-h-60 overflow-y-auto py-1",children:t.map(je=>{const Ne=Yn(je.name,je.color_hex??null),Z=r===je.id;return i.jsxs("div",{className:"product-picker__item",style:{"--product-color":Ne.background,"--product-light-bg":Ne.badgeBackground,"--product-border-color":Ne.border},children:[i.jsxs("button",{type:"button",className:"flex flex-1 items-center gap-3 text-left",onClick:()=>W(je.id),"aria-selected":Z,children:[i.jsx("span",{className:"product-color-badge","aria-hidden":"true"}),i.jsx("span",{className:"flex-1 truncate font-medium",children:je.name}),Z&&i.jsx(jr,{className:"h-4 w-4 text-gray-400"})]}),T&&P&&i.jsx("button",{type:"button",onClick:$=>{$.stopPropagation(),J(!1),P(je)},className:"ml-2 text-gray-400 hover:text-[#B83A2F]","aria-label":`Delete ${je.name}`,title:"Delete product",children:i.jsx(na,{className:"h-4 w-4"})})]},je.id)})})}),a&&i.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"Loading products"}),l&&i.jsx("p",{className:"mt-1 text-xs text-[#591D0F]",children:l}),!a&&!l&&m&&i.jsx("p",{className:"mt-1 text-xs text-gray-500",children:m})]}),se&&E&&I&&i.jsx("p",{className:"text-xs text-gray-500",children:E})]})}const CC=["OpsVision Portal","MillTrack Insight","Quality Compass","Supply Sync","Roadmap Nexus","Fabricator Hub","Blueprint Studio","Velocity Forge","Navigator Suite","Catalyst Cloud"],EC=e=>{if(!e)return null;const t=e.trim();return t.length===0?null:t},NZ=e=>{let t=0;for(let r=0;r<e.length;r+=1)t=t*31+e.charCodeAt(r)>>>0;return CC[t%CC.length]};function nn(e,t){const r=e.product_id??e.productId??null;if(r&&t){const a=EC(t[r]);if(a)return a}const n=EC(e.product_name??e.productName);if(n)return n;const s=r||e.id||e.title||"default-product";return NZ(s)}const kZ=["Stakeholders need more time","New backlog items require votes","Clarify previous results","Technical issue resolved","Other"],AC="https://cdn.iconscout.com/icon/free/png-512/azure-devops-3628645-3029870.png";function PC({options:e,value:t,onChange:r,placeholder:n="Select...",label:s,disabled:a=!1,variant:l="default"}){const[u,d]=v.useState(!1),m=v.useRef(null);v.useEffect(()=>{function S(_){m.current&&!m.current.contains(_.target)&&d(!1)}return document.addEventListener("mousedown",S),()=>document.removeEventListener("mousedown",S)},[]);const f=S=>{r(S),d(!1)},p=t||n,y=l==="green"?"border-green-600":"border-gray-300",x=l==="green"?"text-green-600":"text-gray-400",j=l==="green"?"bg-green-50":"bg-blue-50",w=l==="green"?"text-green-600":"text-[#1E5461]";return i.jsxs("div",{ref:m,className:"relative",children:[s&&i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:s}),i.jsxs("div",{onClick:()=>!a&&d(!u),className:`w-full px-3 py-2 border ${y} rounded-md min-h-[38px] flex items-center justify-between ${a?"bg-gray-100 cursor-not-allowed":"bg-white cursor-pointer"}`,children:[i.jsx("span",{className:`text-sm ${t?"text-gray-900":"text-gray-400"}`,children:p}),i.jsx(ds,{className:`h-4 w-4 ${x} transition-transform ${u?"transform rotate-180":""}`})]}),u&&!a&&i.jsx("div",{className:"absolute z-50 w-full mt-1 bg-white border border-gray-300 rounded-md shadow-lg max-h-60 overflow-y-auto",children:e.map(S=>i.jsxs("div",{onClick:()=>f(S),className:`px-3 py-2 cursor-pointer hover:bg-gray-50 flex items-center justify-between ${t===S?j:""}`,children:[i.jsx("span",{className:"text-sm text-gray-900",children:S}),t===S&&i.jsx(jr,{className:`h-4 w-4 ${w}`})]},S))})]})}function vh({options:e,value:t,onChange:r,placeholder:n="Select...",label:s,searchable:a=!1,disabled:l=!1}){const[u,d]=v.useState(!1),[m,f]=v.useState(""),p=v.useRef(null),y=v.useRef(null);v.useEffect(()=>{function _(E){p.current&&!p.current.contains(E.target)&&(d(!1),f(""))}return document.addEventListener("mousedown",_),()=>document.removeEventListener("mousedown",_)},[]),v.useEffect(()=>{u&&a&&y.current&&y.current.focus()},[u,a]);const x=_=>{t.includes(_)?r(t.filter(E=>E!==_)):r([...t,_])},j=(_,E)=>{E.stopPropagation(),r(t.filter(C=>C!==_))},w=_=>{_.stopPropagation(),r([])},S=a&&m?e.filter(_=>_.toLowerCase().includes(m.toLowerCase())):e;return i.jsxs("div",{ref:p,className:"relative",children:[s&&i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:s}),i.jsxs("div",{onClick:()=>!l&&d(!u),className:`w-full px-3 py-2 border border-gray-300 rounded-md min-h-[38px] flex items-center justify-between ${l?"bg-gray-100 cursor-not-allowed":"bg-white cursor-pointer"}`,children:[i.jsx("div",{className:"flex-1 flex flex-wrap gap-1",children:t.length===0?i.jsx("span",{className:"text-sm text-gray-400",children:n}):t.map(_=>i.jsxs("span",{className:"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-[#2D4660]/10 text-[#2D4660]",children:[_,!l&&i.jsx("button",{type:"button",onClick:E=>j(_,E),className:"ml-1 hover:text-[#173B65]",children:i.jsx(js,{className:"h-3 w-3"})})]},_))}),i.jsxs("div",{className:"flex items-center gap-1 ml-2",children:[t.length>0&&!l&&i.jsx("button",{type:"button",onClick:w,className:"text-gray-400 hover:text-gray-600",children:i.jsx(js,{className:"h-4 w-4"})}),i.jsx(ds,{className:`h-4 w-4 text-gray-400 transition-transform ${u?"transform rotate-180":""}`})]})]}),u&&!l&&i.jsxs("div",{className:"absolute z-50 w-full mt-1 bg-white border border-gray-300 rounded-md shadow-lg max-h-60 overflow-hidden flex flex-col",children:[a&&i.jsx("div",{className:"p-2 border-b border-gray-200",children:i.jsx("input",{ref:y,type:"text",value:m,onChange:_=>f(_.target.value),onClick:_=>_.stopPropagation(),placeholder:"Type to search...",className:"w-full px-3 py-1.5 text-sm border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[#2D4660]"})}),i.jsx("div",{className:"overflow-y-auto",children:S.length>0?S.map(_=>i.jsxs("div",{onClick:()=>x(_),className:`px-3 py-2 cursor-pointer hover:bg-gray-50 flex items-center justify-between ${t.includes(_)?"bg-[#2D4660]/5":""}`,children:[i.jsx("span",{className:"text-sm",children:_}),t.includes(_)&&i.jsx(jr,{className:"h-4 w-4 text-[#1E5461]"})]},_)):i.jsx("div",{className:"px-3 py-2 text-sm text-gray-500 text-center",children:"No matches found"})})]})]})}function _Z({isOpen:e,onClose:t,previewFeatures:r,onConfirmSync:n,onReplaceAll:s}){const[a,l]=v.useState(new Set);v.useEffect(()=>{e&&r&&r.length>0&&l(new Set(r.map(y=>y.id)))},[e,r]);const u=y=>{l(x=>{const j=new Set(x);return j.has(y)?j.delete(y):j.add(y),j})},d=()=>{r&&(a.size===r.length?l(new Set):l(new Set(r.map(y=>y.id))))},m=async()=>{if(!r)return;const y=r.filter(x=>a.has(x.id));await n(y),t()},f=async()=>{!r||!s||(await s(),t())},p=a.size;return i.jsx(fn,{isOpen:e,onClose:t,title:"Preview Azure DevOps Features",maxWidth:"max-w-6xl",children:i.jsx("div",{className:"space-y-4",children:r&&r.length>0?i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"bg-[#1E5461]/5 border border-[#1E5461]/20 rounded-lg p-4",children:i.jsx("p",{className:"text-[#1E5461] font-medium",children:"Select the work items you want to add to your voting session."})}),i.jsx("div",{className:"border border-gray-200 rounded-lg overflow-hidden",children:i.jsx("div",{className:"max-h-96 overflow-y-auto",children:i.jsxs("table",{className:"w-full",children:[i.jsx("thead",{className:"bg-gray-50 sticky top-0",children:i.jsxs("tr",{children:[i.jsx("th",{className:"px-4 py-3 text-left",children:i.jsx("button",{type:"button",onClick:y=>{y.stopPropagation(),d()},className:"flex items-center justify-center w-5 h-5",children:r.length>0&&a.size===r.length?i.jsx(xd,{className:"w-5 h-5 text-green-600"}):i.jsx(bd,{className:"w-5 h-5 text-gray-400"})})}),i.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-gray-700 uppercase",children:"Title"}),i.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-gray-700 uppercase",children:"Type"}),i.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-gray-700 uppercase",children:"State"}),i.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-gray-700 uppercase",children:"Epic"}),i.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-gray-700 uppercase",children:"Area Path"})]})}),i.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:r.map(y=>{const x=a.has(y.id);return i.jsxs("tr",{className:`hover:bg-gray-50 cursor-pointer ${x?"bg-blue-50":""}`,onClick:()=>u(y.id),children:[i.jsx("td",{className:"px-4 py-3",children:i.jsx("button",{type:"button",onClick:j=>{j.stopPropagation(),u(y.id)},className:"flex items-center justify-center w-5 h-5",children:x?i.jsx(xd,{className:"w-5 h-5 text-green-600"}):i.jsx(bd,{className:"w-5 h-5 text-gray-400"})})}),i.jsx("td",{className:"px-4 py-3",children:i.jsxs("div",{className:"flex items-start gap-2",children:[i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsx("div",{className:"text-sm font-medium text-gray-900",children:y.title}),y.description&&y.description.trim()&&i.jsxs("div",{className:"text-xs text-gray-500 mt-1 line-clamp-2",children:[y.description.replace(/<[^>]*>/g,"").substring(0,100),y.description.replace(/<[^>]*>/g,"").length>100?"...":""]}),y.tags&&y.tags.length>0&&i.jsxs("div",{className:"flex flex-wrap gap-1 mt-1",children:[y.tags.slice(0,3).map((j,w)=>i.jsx("span",{className:"px-1.5 py-0.5 text-xs bg-gray-100 text-gray-600 rounded",children:j},w)),y.tags.length>3&&i.jsxs("span",{className:"px-1.5 py-0.5 text-xs text-gray-500",children:["+",y.tags.length-3]})]})]}),y.azureDevOpsId&&i.jsx(kp,{id:y.azureDevOpsId,url:y.azureDevOpsUrl||""})]})}),i.jsx("td",{className:"px-4 py-3 align-middle",children:i.jsx("div",{className:"flex items-center",children:y.workItemType==="Epic"?i.jsx(Os,{className:"w-5 h-5 text-green-600"}):y.workItemType==="Feature"?i.jsx(Bm,{className:"w-5 h-5 text-purple-600"}):y.workItemType?i.jsx("span",{className:"px-2 py-1 text-xs font-medium bg-[#492434]/10 text-[#492434] rounded",children:y.workItemType}):null})}),i.jsx("td",{className:"px-4 py-3 align-middle",children:y.state&&i.jsx("span",{className:"px-2 py-1 text-xs font-medium bg-[#1E5461]/10 text-[#1E5461] rounded",children:y.state})}),i.jsx("td",{className:"px-4 py-3 align-middle",children:y.workItemType!=="Epic"&&y.epic?i.jsx(tf,{name:y.epic}):i.jsx("span",{className:"text-xs text-gray-400",children:""})}),i.jsx("td",{className:"px-4 py-3 align-middle",children:y.areaPath?i.jsx("div",{className:"text-xs text-gray-700 max-w-xs truncate",title:y.areaPath,children:y.areaPath}):i.jsx("span",{className:"text-xs text-gray-400",children:""})})]},y.id)})})]})})}),i.jsxs("div",{className:"flex justify-between items-center pt-4 border-t",children:[i.jsxs("div",{className:"text-sm text-gray-600",children:[p," of ",r.length," selected"]}),i.jsxs("div",{className:"flex space-x-2",children:[i.jsxs(yt,{variant:"primary",onClick:m,disabled:p===0,className:"flex items-center",children:[i.jsx(Dn,{className:"h-4 w-4 mr-2"}),"Add ",p," Feature",p!==1?"s":""]}),s&&i.jsxs(yt,{variant:"danger",onClick:f,className:"flex items-center",children:[i.jsx(Rl,{className:"h-4 w-4 mr-2"}),"Replace All Features"]})]})]})]}):i.jsxs("div",{className:"text-center py-8",children:[i.jsx(tr,{className:"h-12 w-12 text-gray-400 mx-auto mb-3"}),i.jsx("p",{className:"text-gray-600",children:"No features found to sync"})]})})})}function CZ({config:e,onUpdateConfig:t,onPreview:r,isFetching:n,availableStates:s,availableAreaPaths:a,availableTags:l,previewFeatures:u,showPreviewModal:d,onFetchStatesForType:m,onFetchAreaPathsForTypeAndState:f,onFetchTagsForTypeStateAndAreaPath:p,onFetchTypesAndStatesForAreaPath:y,onFetchTypesAndStatesForTags:x,onFetchTypesAndAreaPathsForStates:j,resetSignal:w}){const S=VT,[_,E]=v.useState(!1),[C,A]=v.useState(null),[T,P]=v.useState(!1),[z,J]=v.useState(!1),[H,fe]=v.useState(!1),X=v.useRef(null),K=v.useRef(!1),ae=v.useRef(!1),U=v.useRef(!1),ne=v.useRef(!1),G={workItemTypes:[],states:[],areaPaths:[],tags:[],query:""},{register:ie,handleSubmit:te,watch:W,control:se,setValue:I,reset:B}=wd({defaultValues:G}),Me=v.useCallback(()=>{B({...G}),E(!1),ae.current=!1,U.current=!1,ne.current=!1},[B]);v.useEffect(()=>{Me()},[w,Me]);const Se=W("workItemTypes"),Ie=W("states"),je=W("areaPaths"),Ne=W("tags"),Z=W("query"),$=v.useCallback((M,De,Pe,et,rt,kt)=>{const lt=[];if(M&&M.length>0)if(M.length===1)lt.push(`[System.WorkItemType] = '${M[0]}'`);else{const Yt=M.map(R=>`'${R}'`).join(", ");lt.push(`[System.WorkItemType] IN (${Yt})`)}if(De&&De.length>0)if(De.length===1)lt.push(`[System.State] = '${De[0]}'`);else{const Yt=De.map(R=>`'${R}'`).join(", ");lt.push(`[System.State] IN (${Yt})`)}if(Pe&&Pe.length>0)if(Pe.length===1)lt.push(`[System.AreaPath] UNDER '${Pe[0]}'`);else{const Yt=Pe.map(R=>`[System.AreaPath] UNDER '${R}'`);lt.push(`(${Yt.join(" OR ")})`)}if(et&&et.length>0){const Yt=et.map(R=>`[System.Tags] CONTAINS '${R}'`);lt.push(`(${Yt.join(" OR ")})`)}return kt&&rt&&lt.push(`(${rt})`),lt.length>0?lt.join(" AND "):void 0},[]);v.useEffect(()=>{if(!(ae.current||U.current||ne.current)&&m){if(!Se||Se.length===0){m(void 0);return}m(Se[0])}},[Se,m]),v.useEffect(()=>{if(ae.current||U.current||!f)return;(async()=>{J(!0);try{await f(Se&&Se.length>0?Se[0]:void 0,Ie||[])}finally{J(!1)}})()},[Se,Ie,f]),v.useEffect(()=>{if(U.current||!p||!Se||Se.length===0)return;const M=async()=>{fe(!0);try{await p(Se[0],Ie||[],je||[])}finally{fe(!1)}},De=setTimeout(()=>{M()},100);return()=>{clearTimeout(De),fe(!1)}},[Se,Ie,je,p]),v.useEffect(()=>{if(!y||U.current||ne.current||!je||je.length===0)return;const M=Se&&Se.length>0,De=Ie&&Ie.length>0;M&&De||(ae.current=!0,y(je).then(({types:Pe,states:et})=>{Pe.length>0&&!M&&I("workItemTypes",Pe,{shouldDirty:!1}),et.length>0&&!De&&I("states",et,{shouldDirty:!1})}).finally(()=>{setTimeout(()=>{ae.current=!1},300)}))},[je,Se,Ie,y,I]),v.useEffect(()=>{x&&(ae.current||ne.current||!Ne||Ne.length===0||(U.current=!0,x(Ne).then(({types:M,states:De,areaPaths:Pe})=>{M.length>0&&I("workItemTypes",M,{shouldDirty:!1}),De.length>0&&I("states",De,{shouldDirty:!1}),Pe.length>0&&I("areaPaths",Pe,{shouldDirty:!1})}).finally(()=>{setTimeout(()=>{U.current=!1},300)})))},[Ne,x,I]),v.useEffect(()=>{!j||ae.current||U.current||!Ie||Ie.length===0||Se&&Se.length>0||(ne.current=!0,j(Ie).then(({types:De})=>{De.length>0&&I("workItemTypes",De,{shouldDirty:!1})}).finally(()=>{setTimeout(()=>{ne.current=!1},300)}))},[Ie,Se,j,I]),v.useEffect(()=>{if(Ie&&Ie.length>0&&s.length>0){const M=Ie.filter(De=>s.includes(De));M.length!==Ie.length&&I("states",M)}},[s,Ie,I]),v.useEffect(()=>{if(je&&je.length>0&&a.length>0){const M=je.filter(De=>a.includes(De));M.length!==je.length&&(I("areaPaths",M),M.length===0&&I("tags",[]))}},[a,je,I]),v.useEffect(()=>{if(Ne&&Ne.length>0&&l.length>0){const M=Ne.filter(De=>l.includes(De));M.length!==Ne.length&&I("tags",M)}},[l,Ne,I]);const xe=v.useCallback(async()=>{if(!e.enabled||!e.accessToken||!Se||Se.length===0){A(null);return}try{P(!0);const M=Se[0],De=$(Se||[],Ie||[],je||[],Ne||[],Z||"",_);let Pe="";De?Pe=`SELECT [System.Id] FROM WorkItems WHERE ${De}`:Pe=`SELECT [System.Id] FROM WorkItems WHERE [System.WorkItemType] = '${M}' AND [System.State] = 'Active'`;const et=`https://dev.azure.com/${e.organization}/${e.project}/_apis/wit/wiql?api-version=7.0`,rt=await fetch(et,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${e.accessToken}`},body:JSON.stringify({query:Pe})});if(!rt.ok)throw new Error(`Azure DevOps query failed: ${rt.status} ${rt.statusText}`);const kt=await rt.json(),lt=kt.workItems?kt.workItems.length:0;A(lt)}catch(M){console.error("[FilterForm] Error fetching feature count:",M),A(null)}finally{P(!1)}},[e,Se,Ie,je,Ne,Z,_,$]);v.useEffect(()=>(X.current!==null&&window.clearTimeout(X.current),A(null),Se&&Se.length>0&&e.enabled&&e.accessToken&&(X.current=window.setTimeout(()=>{xe()},300)),()=>{X.current!==null&&window.clearTimeout(X.current)}),[Se,Ie,je,Ne,Z,_,e.enabled,e.accessToken,xe]),v.useEffect(()=>{if(d&&!K.current&&u){const M=u.length;A(M)}K.current=d||!1},[d,u]),v.useEffect(()=>{u&&u.length>0&&!T&&A(u.length)},[u,T]),v.useEffect(()=>{const M=$(Se||[],Ie||[],je||[],Ne||[],Z||"",_),De={...e,workItemType:Se&&Se.length>0?Se[0]:e.workItemType||"Feature",query:M,states:Ie&&Ie.length>0?Ie:void 0,areaPath:je&&je.length>0?je[0]:void 0,tags:Ne&&Ne.length>0?Ne:void 0},Pe=window.setTimeout(()=>{t(De)},100);return()=>{window.clearTimeout(Pe)}},[Se,Ie,je,Ne,Z,_,$,t]);const le=async M=>{await r()};return i.jsxs("form",{onSubmit:te(le),className:"bg-gray-50 p-4 rounded-lg border border-gray-200",children:[i.jsxs("div",{className:"flex items-center justify-between mb-4",children:[i.jsxs("h3",{className:"text-lg font-medium text-[#2D4660] flex items-center",children:[i.jsx(lF,{className:"h-5 w-5 mr-2"}),"Filter Work Items"]}),i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("button",{type:"button",onClick:Me,className:"text-xs text-[#576C71] hover:text-[#2D4660] font-medium border border-transparent hover:border-[#576C71] rounded-full px-2 py-0.5 transition",children:"Clear All Filters"}),i.jsx("button",{type:"button",onClick:()=>E(!_),className:"text-xs text-[#1E5461] hover:text-[#2D4660] font-medium",children:_?" Hide Advanced WIQL":"Show Advanced WIQL "})]})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-4",children:[i.jsxs("div",{children:[i.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[i.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Work Item Type"}),i.jsx("span",{className:"px-2 py-0.5 rounded-full text-xs font-semibold text-white bg-[#2D4660]",children:S.length})]}),i.jsx(sd,{name:"workItemTypes",control:se,render:({field:M})=>i.jsx(vh,{options:S,value:M.value,onChange:M.onChange,placeholder:"Select types..."})}),i.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"Click to select multiple types"})]}),i.jsxs("div",{children:[i.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[i.jsx("span",{className:"text-sm font-medium text-gray-700",children:"State (Optional)"}),i.jsx("span",{className:"px-2 py-0.5 rounded-full text-xs font-semibold text-white bg-[#1E5461]",children:(s==null?void 0:s.length)||0})]}),i.jsx(sd,{name:"states",control:se,render:({field:M})=>i.jsx(vh,{options:s,value:M.value,onChange:M.onChange,placeholder:"Select states...",disabled:s.length===0})}),i.jsx("p",{className:"mt-1 text-xs text-gray-500",children:s.length===0?"Loading states...":"Filtered by work item type"})]}),i.jsxs("div",{children:[i.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[i.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Area Path (Optional)"}),i.jsx("span",{className:"px-2 py-0.5 rounded-full text-xs font-semibold text-white bg-[#576C71]",children:(a==null?void 0:a.length)||0})]}),i.jsx(sd,{name:"areaPaths",control:se,render:({field:M})=>i.jsx(vh,{options:a,value:M.value,onChange:M.onChange,placeholder:"Select area paths...",searchable:!0,disabled:a.length===0})}),i.jsx("p",{className:"mt-1 text-xs text-gray-500",children:z?"Loading area paths...":a.length===0?"No area paths found for current filters":"Filtered by type & state"})]}),i.jsxs("div",{children:[i.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[i.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Tags (Optional)"}),i.jsx("span",{className:"px-2 py-0.5 rounded-full text-xs font-semibold text-white bg-[#C89212]",children:(l==null?void 0:l.length)||0})]}),i.jsx(sd,{name:"tags",control:se,render:({field:M})=>i.jsx(vh,{options:l,value:M.value,onChange:M.onChange,placeholder:"Select tags...",searchable:!0,disabled:l.length===0&&!H})}),i.jsx("p",{className:"mt-1 text-xs text-gray-500",children:!Se||Se.length===0?"Select work item type to see tags":H?"Loading tags...":l.length===0?"No tags found for current filters":"Filtered by type, state & area"})]})]}),_&&i.jsxs("div",{className:"mb-4",children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Advanced WIQL Query (Optional)"}),i.jsx("input",{...ie("query"),placeholder:"e.g., [System.Priority] = 1",className:"w-full px-3 py-2 border border-gray-300 rounded-md text-sm"}),i.jsxs("p",{className:"mt-1 text-xs text-gray-500",children:["Will be combined with above filters using AND."," ",i.jsx("a",{href:"https://learn.microsoft.com/en-us/azure/devops/boards/queries/wiql-syntax",target:"_blank",rel:"noopener noreferrer",className:"text-[#1E5461] hover:text-[#2D4660]",children:"WIQL syntax reference "})]})]}),i.jsx("div",{className:"flex justify-end",children:i.jsxs(yt,{variant:"gold",type:"submit",disabled:(()=>{const M=((Se==null?void 0:Se.length)??0)>0,De=((Ie==null?void 0:Ie.length)??0)>0,Pe=((je==null?void 0:je.length)??0)>0,et=((Ne==null?void 0:Ne.length)??0)>0,rt=Z&&Z.trim().length>0;return n||T||!(M||De||Pe||et||rt)})(),className:"flex items-center",children:[n&&i.jsx(Rl,{className:"animate-spin h-4 w-4 mr-2"}),n?"Loading...":C!==null&&!T?`Preview ${C} Feature${C!==1?"s":""}`:"Preview Features"]})})]})}function EZ({session:e,featureCount:t,onSubmit:r,onCancel:n,onRequestDeleteSession:s,isDeletingSession:a,productName:l,products:u,isLoadingProducts:d,productError:m,onRequestDeleteProduct:f,onProductColorUpdated:p}){const[y,x]=v.useState(null),[j,w]=v.useState(!1),[S,_]=v.useState("#2D4660"),[E,C]=v.useState(null),[A,T]=v.useState(!1);v.useRef(null);const P="2099-12-31",z=le=>le?le.split("T")[0]===P:!1,J=le=>{if(!le||typeof le!="string")return new Date;const De=le.split("T")[0].split(" ")[0].split("-");if(De.length!==3)return new Date;const Pe=parseInt(De[0],10),et=parseInt(De[1],10),rt=parseInt(De[2],10);if(isNaN(Pe)||isNaN(et)||isNaN(rt))return new Date;const kt=new Date(Pe,et-1,rt,0,0,0,0);return isNaN(kt.getTime())?new Date:kt},H=le=>{if(!le||isNaN(le.getTime()))return new Date().toISOString().split("T")[0];const M=le.getFullYear(),De=String(le.getMonth()+1).padStart(2,"0"),Pe=String(le.getDate()).padStart(2,"0");return`${M}-${De}-${Pe}`},fe=(le,M)=>{const De=le.getFullYear(),Pe=le.getMonth(),et=le.getDate();return new Date(De,Pe,et+M,0,0,0,0)},X=v.useMemo(()=>{const le={};return u.forEach(M=>{M.id&&M.name&&(le[M.id]=M.name)}),le},[u]),{register:K,handleSubmit:ae,watch:U,reset:ne,control:G,setValue:ie,formState:{errors:te}}=wd({defaultValues:{productId:e.productId??e.product_id??"",title:e.title,goal:e.goal,startDate:z(e.startDate)?"":e.startDate.split("T")[0],endDate:z(e.endDate)?"":e.endDate.split("T")[0],useAutoVotes:e.useAutoVotes||!1,votesPerUser:e.votesPerUser}});v.useEffect(()=>{const le=z(e.startDate)?"":e.startDate.split("T")[0],M=z(e.endDate)?"":e.endDate.split("T")[0];ne({productId:e.productId??e.product_id??"",title:e.title,goal:e.goal,startDate:le,endDate:M,useAutoVotes:e.useAutoVotes||!1,votesPerUser:e.votesPerUser}),Ie.current=le},[e,ne]);const W=e.productName??e.product_name??l??"",se=e.productId??e.product_id??"";v.useEffect(()=>{if(!u.length)return;if(se){u.some(De=>De.id===se)&&ie("productId",se,{shouldDirty:!1,shouldTouch:!1});return}if(!W)return;const le=u.find(M=>M.name.toLowerCase()===W.toLowerCase());le&&ie("productId",le.id,{shouldDirty:!1,shouldTouch:!1})},[u,se,W,ie]);const I=U("useAutoVotes"),B=U("productId"),Me=U("startDate"),Se=U("endDate"),Ie=v.useRef(""),je=v.useCallback(async le=>{const M=Me,De=Se;if(le==="startDate"&&!M){let Pe;if(B)try{const kt=(await wS(B)).filter(lt=>lt.id!==e.id);if(kt.length>0){let lt=null;kt.forEach(Yt=>{const R=Yt.end_date||Yt.endDate;if(R&&!z(R)){const re=J(R);(!lt||re>lt)&&(lt=re)}}),lt?Pe=fe(lt,1):Pe=new Date}else Pe=new Date}catch(rt){console.error("Error calculating dates for product:",rt),Pe=new Date}else Pe=new Date;const et=fe(Pe,14);ie("startDate",H(Pe),{shouldDirty:!0}),De||ie("endDate",H(et),{shouldDirty:!0})}else if(le==="endDate"&&!De){let Pe;if(M)Pe=J(M);else{if(B)try{const kt=(await wS(B)).filter(lt=>lt.id!==e.id);if(kt.length>0){let lt=null;kt.forEach(Yt=>{const R=Yt.end_date||Yt.endDate;if(R&&!z(R)){const re=J(R);(!lt||re>lt)&&(lt=re)}}),lt?Pe=fe(lt,1):Pe=new Date}else Pe=new Date}catch(rt){console.error("Error calculating dates for product:",rt),Pe=new Date}else Pe=new Date;ie("startDate",H(Pe),{shouldDirty:!0})}const et=fe(Pe,14);ie("endDate",H(et),{shouldDirty:!0})}},[Me,Se,B,ie]);v.useEffect(()=>{if(Me&&Me!==Ie.current&&Se){Ie.current=Me;const le=J(Me),M=fe(le,14);ie("endDate",H(M),{shouldDirty:!0})}},[Me,Se,ie]);const Ne=v.useMemo(()=>!E||!B?u:u.map(le=>le.id===B?{...le,color_hex:E}:le),[u,E,B]);v.useEffect(()=>{if(!B)return;u.some(M=>M.id===B)||ie("productId","",{shouldDirty:!0,shouldTouch:!0})},[B,u,ie]),v.useEffect(()=>{if(B&&u.length>0){const le=u.find(M=>M.id===B);if(le){const M=le.color_hex??null;x(M),_(M||"#2D4660"),C(null),w(!1)}}else B||(x(null),_("#2D4660"),C(null),w(!1))},[B,u]);const Z=I?Math.max(1,Math.floor(t/2)):U("votesPerUser"),$=async(le,M=!1)=>{try{r({...le,isDraft:M})}catch(De){throw console.error("ERROR in handleFormSubmit:",De),De}},xe=async()=>{const le=U();await $(le,!0)};return i.jsxs("form",{onSubmit:ae(le=>$(le),le=>{}),children:[i.jsxs("div",{className:"mb-4",children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Product"}),i.jsx("div",{className:"flex items-center gap-2",children:(()=>{const le=Ne.find(kt=>kt.id===B)??null,M=B?X[B]??null:null,De=(le==null?void 0:le.name)??M??W??"No Product",Pe=(le==null?void 0:le.color_hex)||null,et=le?Yn(le.name,Pe??null):null,rt=(et==null?void 0:et.background)||null;return i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"w-4 h-4 rounded-sm flex-shrink-0",style:{backgroundColor:rt||"#2D4660"}}),i.jsx("span",{className:"text-gray-900",children:De})]})})()})]}),i.jsxs("div",{className:"mb-4",children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Session Title"}),i.jsx("input",{...K("title",{required:"Title is required"}),className:"w-full px-3 py-2 border border-gray-300 rounded-md"}),te.title&&i.jsx("p",{className:"mt-1 text-sm text-red-600",children:te.title.message})]}),i.jsxs("div",{className:"mb-4",children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Goal"}),i.jsx("textarea",{...K("goal",{required:"Goal is required"}),rows:2,className:"w-full px-3 py-2 border border-gray-300 rounded-md"}),te.goal&&i.jsx("p",{className:"mt-1 text-sm text-red-600",children:te.goal.message})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Start Date"}),i.jsx("input",{type:"date",...K("startDate",{required:!z(e.startDate)&&!z(e.endDate)?"Start date is required":!1}),value:U("startDate")||"",onFocus:le=>{U("startDate")||je("startDate")},autoComplete:"off",className:`w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-0 focus:border-[#2d4660] [&::-webkit-calendar-picker-indicator]:cursor-pointer ${te.startDate?"border-red-500":"border-gray-300"}`,style:U("startDate")?{}:{color:"transparent"},onBlur:le=>{le.target.value?le.target.style.color="":le.target.style.color="transparent"}}),te.startDate&&i.jsx("p",{className:"mt-1 text-sm text-red-600",children:te.startDate.message})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"End Date"}),i.jsx("input",{type:"date",...K("endDate",{required:!z(e.startDate)&&!z(e.endDate)?"End date is required":!1}),value:U("endDate")||"",onFocus:le=>{U("endDate")||je("endDate")},autoComplete:"off",className:`w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-0 focus:border-[#2d4660] [&::-webkit-calendar-picker-indicator]:cursor-pointer ${te.endDate?"border-red-500":"border-gray-300"}`,style:U("endDate")?{}:{color:"transparent",position:"relative"},onBlur:le=>{le.target.value?le.target.style.color="":le.target.style.color="transparent"}}),te.endDate&&i.jsx("p",{className:"mt-1 text-sm text-red-600",children:te.endDate.message})]})]}),i.jsxs("div",{className:"mb-4 bg-[#1E5461]/5 border border-[#1E5461]/20 rounded-lg p-4",children:[i.jsxs("div",{className:"flex items-start",children:[i.jsx("input",{type:"checkbox",...K("useAutoVotes"),className:"hidden"}),i.jsx("button",{type:"button",onClick:()=>ie("useAutoVotes",!I,{shouldDirty:!0}),className:"flex-shrink-0 cursor-pointer mt-0.5 w-5 h-5 flex items-center justify-center",children:I?i.jsx(xd,{className:"w-5 h-5 text-green-600"}):i.jsx(bd,{className:"w-5 h-5 text-gray-400"})}),i.jsxs("div",{className:"ml-3",children:[i.jsx("label",{onClick:()=>ie("useAutoVotes",!I,{shouldDirty:!0}),className:"text-sm font-medium text-gray-700 cursor-pointer",children:"Automatically calculate votes per user"}),i.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:["Each user gets half the number of features (minimum 1 vote). Currently: ",Z," votes"]})]})]}),!I&&i.jsxs("div",{className:"mt-3",children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Votes Per User"}),i.jsx("input",{type:"number",min:"1",...K("votesPerUser",{required:I?!1:"Votes per user is required",min:{value:1,message:"Must be at least 1"}}),className:"w-full px-3 py-2 border border-gray-300 rounded-md"}),te.votesPerUser&&i.jsx("p",{className:"mt-1 text-sm text-red-600",children:te.votesPerUser.message})]})]}),i.jsxs("div",{className:"mt-6 flex flex-col gap-3 border-t border-gray-200 pt-4 sm:flex-row sm:items-center sm:justify-between",children:[i.jsxs(yt,{variant:"danger",type:"button",onClick:()=>s(),disabled:a,className:"flex items-center gap-2",children:[i.jsx(na,{className:"h-4 w-4"}),a?"Deleting...":"Delete Session"]}),i.jsxs("div",{className:"flex w-full justify-end gap-2 sm:w-auto",children:[i.jsx(yt,{variant:"secondary",type:"button",onClick:xe,children:"Save Draft"}),i.jsx(yt,{variant:"primary",type:"button",onClick:async le=>{le.preventDefault(),le.stopPropagation(),U(),await ae(M=>$(M,!1),M=>{alert("Please fix form errors: "+JSON.stringify(M))})()},children:"Save Changes"})]})]}),j&&B&&(()=>{const le=Ne.find(M=>M.id===B);return le?i.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",onClick:()=>{w(!1),x(le.color_hex??null),_(le.color_hex??"#2D4660"),C(null)},children:i.jsx("div",{className:"bg-white rounded-lg shadow-xl px-3 py-2 w-auto mx-4",onClick:M=>M.stopPropagation(),children:i.jsxs("div",{className:"flex gap-3 items-stretch",children:[i.jsxs("div",{className:"flex-shrink-0",style:{width:"240px",height:"260px"},children:[i.jsx("input",{id:"native-color-input",type:"color",value:S,onChange:M=>{_(M.target.value),x(M.target.value)},ref:M=>{M&&j&&setTimeout(()=>M.click(),50)},className:"opacity-0 absolute",style:{width:"1px",height:"1px"}}),i.jsx("div",{className:"w-full h-full"})]}),i.jsx("button",{type:"button",onClick:()=>{if(!B||!S)return;const M=Ne.find(Pe=>Pe.id===B);if(!M)return;if((M.color_hex||null)===S){w(!1);return}C(S),x(S),w(!1)},disabled:A,className:"px-6 rounded-lg text-white font-bold shadow-lg hover:shadow-xl transition-all flex flex-col items-center justify-center gap-3 text-lg flex-shrink-0 disabled:opacity-50 disabled:cursor-not-allowed",style:{backgroundColor:S,height:"260px",minWidth:"100px"},children:A?i.jsx(Rl,{className:"h-8 w-8 animate-spin"}):i.jsxs(i.Fragment,{children:[i.jsx(jr,{className:"h-8 w-8"}),i.jsxs("div",{className:"text-center leading-tight",children:[i.jsx("div",{children:"Looks"}),i.jsx("div",{children:"Good"})]})]})})]})})}):null})()]})}function AZ({features:e,onAddFeature:t,onUpdateFeature:r,onDeleteFeature:n,onShowResults:s,onRequestDeleteSession:a,isDeletingSession:l,showAddForm:u,setShowAddForm:d,editingFeature:m,setEditingFeature:f,onLogout:p,onShowVoterView:y,votingSession:x,azureDevOpsConfig:j,onUpdateAzureDevOpsConfig:w,onPreviewAzureDevOpsFeatures:S,onDisconnectAzureDevOps:_,isFetchingAzureDevOps:E,azureFetchError:C,onInitiateOAuth:A,availableStates:T,availableAreaPaths:P,availableTags:z,previewFeatures:J,showPreviewModal:H,setShowPreviewModal:fe,onConfirmSync:X,onReplaceAll:K,onUpdateVotingSession:ae,onFetchStatesForType:U,onFetchAreaPathsForTypeAndState:ne,onFetchTagsForTypeStateAndAreaPath:G,onFetchTypesAndStatesForAreaPath:ie,onFetchTypesAndStatesForTags:te,onFetchTypesAndAreaPathsForStates:W,suggestedFeatures:se,otherSessions:I,onPromoteSuggestion:B,onMoveSuggestion:Me,onEditSuggestion:Se,onDeleteSuggestion:Ie,adminPerspective:je="session",projectOptions:Ne}){const Z=Js(),{currentUser:$,currentSession:xe}=Ea(),[le,M]=v.useState(()=>j.project?j.project:Ne[0]??""),[De,Pe]=v.useState(0);v.useEffect(()=>{j.project?M(j.project):Ne.length>0?M(Ne[0]):M("")},[j.project,Ne]);const[et,rt]=v.useState(!1),[kt,lt]=v.useState(!1),[Yt,R]=v.useState(!1),[re,de]=v.useState(!1),Fe=v.useRef(null),[we,Ae]=v.useState(!1),[Ke,It]=v.useState(!1),[Rt,Pt]=v.useState(!1),rr=v.useRef(null),[Ht,He]=v.useState(null),[ft,gt]=v.useState(!1),[Lt,_t]=v.useState(null),[nr,Ze]=v.useState(null),[Ot,zt]=v.useState(""),[Vt,hr]=v.useState(null),[Zt,gn]=v.useState(!1),[Jt,mr]=v.useState(null),[or,En]=v.useState({title:"",summary:"",whatWouldItDo:"",howWouldItWork:""}),[zr,lr]=v.useState([]),[Gr,Dt]=v.useState(null),[_r,Ur]=v.useState(!1),[Sr,pr]=v.useState(null),[Zr,Ss]=v.useState(!1),[es,Ns]=v.useState(null),[Ir,Rs]=v.useState(!1),[ts,Nr]=v.useState([]),[on,Dr]=v.useState(!1),[Br,gr]=v.useState([]),[An,bi]=v.useState(!1),[sr,ps]=v.useState(null),[ee,Ce]=v.useState(null),[ze,Be]=v.useState(null),[Je,Oe]=v.useState(""),[ct,ht]=v.useState(null),[St,We]=v.useState(!1),[Cr,Ut]=v.useState(!1),[Wr,Bt]=v.useState("#2D4660"),[yn,Qs]=v.useState(!1),[yr,Bn]=v.useState(!1),br=v.useMemo(()=>{const V={};return Br.forEach(N=>{N.id&&N.name&&(V[N.id]=N.name)}),V},[Br]),la=v.useMemo(()=>{const V={};return Br.forEach(N=>{N.id&&N.color_hex&&(V[N.id]=N.color_hex)}),V},[Br]),fr=v.useMemo(()=>nn({...x,product_id:x.product_id??(xe==null?void 0:xe.product_id)??x.productId??null,product_name:null},br),[x,xe,br]),Zs=v.useMemo(()=>{const V=x.product_id??x.productId??null;return V?la[V]??null:null},[x,la]),Ms=v.useMemo(()=>Yn(fr,Zs),[fr,Zs]),ln=v.useRef(null);v.useEffect(()=>{(async()=>{if(!$)return;const N=await Ri($.id);It(N);const{data:F}=await _e.from("session_admins").select("session_id").eq("user_id",$.id).limit(1);Pt(F&&F.length>0)})()},[$]),v.useEffect(()=>{const V=($==null?void 0:$.tenant_id)??($==null?void 0:$.tenantId)??null;if(!V){ln.current=null,gr([]),ps(null);return}if(ln.current===V)return;let N=!1;return(async()=>{bi(!0),ps(null);try{const pe=await qa(V);if(N)return;gr(pe),ln.current=V}catch(pe){if(N)return;console.error("Error loading products for admin dashboard:",pe),Xa!=null&&Xa(pe)?ps("Products are not configured yet. Please create the `products` table in Supabase."):ps("Unable to load products. Please try again."),gr([]),ln.current=null}finally{N||bi(!1)}})(),()=>{N=!0}},[$==null?void 0:$.tenant_id,$==null?void 0:$.tenantId]);const Xt=v.useCallback(async()=>{if(ee){Qs(!0);try{await bE(ee.id),gr(V=>V.filter(N=>N.id!==ee.id)),Ce(null)}catch(V){console.error("Error deleting product from admin dashboard:",V),ps("Failed to delete product. Please try again.")}finally{Qs(!1)}}},[ee]),Oa=v.useCallback(V=>{const N=V==null?void 0:V.trim();if(N){if(M(N),N!==(j.project||"")){const F={...j,project:N};w(F)}Pe(F=>F+1)}},[j,w]),{register:Ta,handleSubmit:ei,reset:Fs}=wd({defaultValues:{reason:"",details:""}}),{control:vn,handleSubmit:ca,reset:ks,register:Vr,formState:{errors:xn}}=wd({defaultValues:{reason:"",details:""}}),bn="2099-12-31",rs=V=>V?V.split("T")[0]===bn:!1,gs=V=>{if(!V.is_active){const N=!V.title||V.title==="Untitled Session"||V.title.trim()==="",F=!V.goal||V.goal.trim()==="";return N||F}return!1},cn=(V=>{if(gs(V))return{text:"Draft",color:"text-yellow-900 bg-yellow-200",icon:zh};const N=new Date,F=V.startDate||V.start_date,pe=V.endDate||V.end_date,he=new Date(F),ke=new Date(pe);return N<he?{text:"Upcoming",color:"text-yellow-600 bg-yellow-50",icon:Um}:N>ke?{text:"Closed",color:"text-gray-600 bg-gray-100",icon:tr}:{text:"Active",color:"text-[#1E6154] bg-[#1E6154]/10",icon:jr}})(x),vo=cn.icon,Li=i.jsxs("span",{className:`inline-flex items-center ${cn.text==="Active"?"px-3 py-1 text-sm":"px-2 py-0.5 text-xs"} rounded-full font-medium ${cn.color}`,children:[i.jsx(vo,{className:`${cn.text==="Active"?"h-4 w-4":"h-3 w-3"} mr-1`}),cn.text]}),Wn=v.useMemo(()=>{const V=F=>{const pe=F.type==="reopen",he=F.createdAt||null,ke=F.actorName||"Admin",Te=he?` ${Ji(he)}`:"";return{id:F.id,type:F.type,reason:F.reason,details:F.details??null,title:pe?`Reopened${Te} by ${ke}`:`Ended early${Te} by ${ke}`,description:`${F.reason}${F.details?": "+F.details:""}`,iconBgClass:pe?"bg-[#1E5461]/10":"bg-[#C89212]/10",iconBorderClass:pe?"border-[#1E5461]/20":"border-[#C89212]/20",iconColorClass:pe?"text-[#1E5461]":"text-[#C89212]",textColorClass:pe?"text-[#1E5461]":"text-[#6A4234]"}};if(ts.length>0)return ts.map(F=>V(F));const N=[];return x.reopenReason&&N.push({id:"fallback-reopen",sessionId:(xe==null?void 0:xe.id)||"",type:"reopen",reason:x.reopenReason,details:x.reopenDetails??null,actorName:x.reopenedBy||"Admin",actorId:null,createdAt:x.reopenedAt||x.endDate}),x.endedEarlyReason&&N.push({id:"fallback-ended-early",sessionId:(xe==null?void 0:xe.id)||"",type:"ended-early",reason:x.endedEarlyReason,details:x.endedEarlyDetails??null,actorName:x.endedEarlyBy||"Admin",actorId:null,createdAt:x.originalEndDate||x.endDate}),N.map(F=>V(F))},[ts,x.reopenReason,x.reopenDetails,x.reopenedAt,x.reopenedBy,x.endedEarlyReason,x.endedEarlyDetails,x.originalEndDate,x.endDate,x.endedEarlyBy,xe==null?void 0:xe.id]);v.useEffect(()=>{Wn.length<=2&&Dr(!1)},[Wn.length]);const xo=v.useCallback(async()=>{if(!(xe!=null&&xe.id)){Nr([]);return}try{const V=await S$(xe.id);Nr(V)}catch(V){console.error("Error loading session status notes:",V)}},[xe==null?void 0:xe.id]);v.useEffect(()=>{xo()},[xo]);const Ia=v.useCallback(async V=>{if(xe!=null&&xe.id)try{const N=await N$({session_id:xe.id,type:V.type,reason:V.reason,details:V.details??null,actor_id:V.actorId??null,actor_name:V.actorName||"Admin"});Nr(F=>{const pe=F.findIndex(he=>he.id===N.id);if(pe!==-1){const he=[...F];return he[pe]=N,he}return[N,...F]})}catch(N){console.error("Error logging session status note:",N)}},[xe==null?void 0:xe.id]);v.useEffect(()=>{Jt&&(En({title:Jt.title,summary:Jt.summary??"",whatWouldItDo:Jt.whatWouldItDo??"",howWouldItWork:Jt.howWouldItWork??""}),lr(Jt.attachment_urls?[...Jt.attachment_urls]:[]),Dt(null))},[Jt]),v.useEffect(()=>{nr&&I.length>0?zt(I[0].id):zt(""),hr(null)},[nr,I]);const da=V=>{const N=V.isDraft||!1,F="2099-12-31",pe=V.startDate&&V.startDate.trim()?V.startDate:F,he=V.endDate&&V.endDate.trim()?V.endDate:F,ke=V.productId&&V.productId.trim()!==""?V.productId:null,Te=ke&&Br.find(Ye=>Ye.id===ke)||null,ve={...x,title:V.title.trim()||"Untitled Session",goal:V.goal.trim()||"",votesPerUser:V.useAutoVotes?Math.max(1,Math.floor(e.length/2)):Number(V.votesPerUser),useAutoVotes:V.useAutoVotes,startDate:new Date(pe).toISOString(),endDate:new Date(he+"T23:59:59").toISOString(),isActive:N?!1:x.isActive,product_id:(Te==null?void 0:Te.id)??null,product_name:null};ae(ve),rt(!1)},fa=V=>{var pe,he;const N=new Date().toISOString(),F={...x,originalEndDate:x.endDate,endDate:N,isActive:!1,endedEarlyBy:($==null?void 0:$.name)||"Admin",endedEarlyReason:V.reason,endedEarlyDetails:(pe=V.details)!=null&&pe.trim()?V.details.trim():null,reopenReason:null,reopenDetails:null,reopenedBy:null,reopenedAt:null};ae(F),Ia({type:"ended-early",reason:V.reason,details:(he=V.details)!=null&&he.trim()?V.details.trim():null,actorName:($==null?void 0:$.name)||"Admin",actorId:($==null?void 0:$.id)??null}),lt(!1),Fs()},Da=V=>{var pe,he;const N=new Date;N.setDate(N.getDate()+7);const F={...x,endDate:N.toISOString(),isActive:!0,originalEndDate:null,endedEarlyBy:null,endedEarlyReason:null,endedEarlyDetails:null,reopenReason:V.reason,reopenDetails:(pe=V.details)!=null&&pe.trim()?V.details.trim():null,reopenedBy:($==null?void 0:$.name)||"Admin",reopenedAt:new Date().toISOString()};ae(F),Ia({type:"reopen",reason:V.reason,details:(he=V.details)!=null&&he.trim()?V.details.trim():null,actorName:($==null?void 0:$.name)||"Admin",actorId:($==null?void 0:$.id)??null}),R(!1),ks()},en=async(V,N)=>{const F={...j,organization:V,project:N};w(F),A()},ns=V=>{mr(V)},Yr=async()=>{if(!Jt)return;const V=or.title.trim();if(!V){Dt("Title is required.");return}Ur(!0),Dt(null);try{await Se(Jt.id,{title:V,summary:or.summary.trim()?or.summary.trim():null,whatWouldItDo:or.whatWouldItDo.trim()?or.whatWouldItDo.trim():null,howWouldItWork:or.howWouldItWork.trim()?or.howWouldItWork.trim():null,attachment_urls:zr.length>0?zr:null}),mr(null),lr([])}catch(N){console.error("Error updating suggestion:",N),Dt("Failed to update the suggestion. Please try again.")}finally{Ur(!1)}},zi=async()=>{if(nr){if(!Ot){hr("Please select a session.");return}try{if(!await $x(Ot)){hr("The selected session no longer exists. Please refresh and try again.");return}}catch{hr("The selected session no longer exists. Please refresh and try again.");return}gn(!0),hr(null);try{await Me(nr.id,Ot),Ze(null)}catch(V){console.error("Error moving suggestion:",V),hr("Failed to move the suggestion. Please try again.")}finally{gn(!1)}}},ha=async()=>{if(Ht){gt(!0),_t(null);try{await B(Ht.id),He(null)}catch(V){console.error("Error promoting suggestion:",V),_t("Failed to move the suggestion into the current session.")}finally{gt(!1)}}},ti=async()=>{if(Sr){Ss(!0),Ns(null);try{await Ie(Sr.id),pr(null)}catch(V){console.error("Error deleting suggestion:",V),Ns("Failed to delete the suggestion. Please try again.")}finally{Ss(!1)}}},_s=v.useCallback(()=>{rt(!1),a()},[a]);return v.useEffect(()=>{if(!re)return;const V=N=>{Fe.current&&!Fe.current.contains(N.target)&&de(!1)};return document.addEventListener("mousedown",V),document.addEventListener("touchstart",V,{passive:!0}),()=>{document.removeEventListener("mousedown",V),document.removeEventListener("touchstart",V)}},[re]),v.useEffect(()=>{if(!we)return;const V=N=>{rr.current&&!rr.current.contains(N.target)&&Ae(!1)};return document.addEventListener("mousedown",V),document.addEventListener("touchstart",V,{passive:!0}),()=>{document.removeEventListener("mousedown",V),document.removeEventListener("touchstart",V)}},[we]),i.jsxs("div",{className:"container mx-auto p-4 max-w-6xl min-h-screen pb-8",children:[i.jsx("div",{className:"hidden md:flex md:justify-center mb-2",children:i.jsx("img",{src:vi,alt:"New Millennium Building Systems Logo",className:"-mt-4 cursor-pointer hover:opacity-80 transition-opacity",style:{height:"96px",width:"auto"},onClick:()=>Z("/sessions")})}),i.jsxs("div",{className:"flex justify-between items-center mb-6",children:[i.jsxs("div",{className:"flex items-center",children:[i.jsx(Np,{src:Pa,alt:"New Millennium Building Systems Logo",className:"mr-4 md:hidden",style:{width:"40px",height:"40px",objectFit:"contain"}}),i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsx("h1",{className:"text-2xl font-bold text-[#2D4660] md:text-3xl",children:"Admin Dashboard"}),$&&i.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:[$.name,Ke&&i.jsx("span",{className:"ml-2 inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium bg-[#C89212] text-white",children:"System Admin"}),!Ke&&Rt&&i.jsx("span",{className:"ml-2 inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium bg-[#576C71] text-white",children:"Session Admin"})]})]})]}),i.jsxs("div",{ref:Fe,className:"relative z-40",children:[i.jsxs("div",{className:"hidden md:flex space-x-2",children:[x.isActive&&i.jsxs("button",{onClick:y,className:"flex items-center px-4 py-2 bg-[#576C71] text-white rounded-lg hover:bg-[#1E5461] transition-colors",children:[i.jsx(ls,{className:"mr-2 h-[26px] w-[26px]"}),"Vote!"]}),i.jsxs("button",{onClick:()=>Z(je==="system"?"/users":"/users?filter=stakeholder"),className:"flex items-center px-4 py-2 bg-[#2D4660] text-white rounded-lg hover:bg-[#173B65] transition-colors",children:[je==="system"?i.jsx(us,{className:"mr-2 h-4 w-4"}):i.jsx(hs,{className:"mr-2 h-4 w-4"}),je==="system"?"User Management":"Stakeholders"]}),i.jsxs("button",{onClick:()=>Z("/sessions"),className:"flex items-center px-4 py-2 bg-[#4f6d8e] text-white rounded-lg hover:bg-[#3d5670] transition-colors",children:[i.jsx(hs,{className:"mr-2 h-4 w-4"}),"All Sessions"]}),i.jsxs("button",{onClick:p,className:"flex items-center px-4 py-2 bg-[#576C71] text-white rounded-lg hover:bg-[#1E5461] transition-colors",children:[i.jsx(Jn,{className:"mr-2 h-4 w-4"}),"Logout"]})]}),i.jsx("div",{className:"flex md:hidden",children:i.jsx("button",{onClick:()=>de(!re),className:"p-2 rounded-md border border-gray-200 bg-white shadow-sm","aria-label":"Open menu",children:i.jsx(di,{className:"h-5 w-5 text-gray-700"})})}),re&&i.jsx("div",{className:"absolute right-0 mt-2 w-56 bg-white border border-gray-200 rounded-lg shadow-lg md:hidden z-50",children:i.jsxs("div",{className:"py-1",children:[x.isActive&&i.jsxs("button",{onClick:()=>{de(!1),y()},className:"w-full px-3 py-2 flex items-center text-left hover:bg-gray-50",children:[i.jsx(ls,{className:"h-[26px] w-[26px] mr-2 text-gray-700"}),"Vote!"]}),i.jsxs("button",{onClick:()=>{de(!1),Z(je==="system"?"/users":"/users?filter=stakeholder")},className:"w-full px-3 py-2 flex items-center text-left hover:bg-gray-50",children:[je==="system"?i.jsx(us,{className:"h-4 w-4 mr-2 text-gray-700"}):i.jsx(hs,{className:"h-4 w-4 mr-2 text-gray-700"}),je==="system"?"User Management":"Stakeholders"]}),i.jsxs("button",{onClick:()=>{de(!1),Z("/sessions")},className:"w-full px-3 py-2 flex items-center text-left hover:bg-gray-50",children:[i.jsx(hs,{className:"h-4 w-4 mr-2 text-gray-700"}),"All Sessions"]}),!(x.isActive===!1&&!Yi(x.endDate))&&i.jsxs("button",{onClick:()=>{de(!1),s()},className:"w-full px-3 py-2 flex items-center text-left hover:bg-gray-50",children:[i.jsx(Nh,{className:"h-4 w-4 mr-2 text-gray-700"}),Yi(x.endDate)?"Final Results":"Current Results"]}),i.jsxs("button",{onClick:()=>{de(!1),rt(!0)},className:"w-full px-3 py-2 flex items-center text-left hover:bg-gray-50",children:[i.jsx(Mn,{className:"h-4 w-4 mr-2 text-gray-700"}),"Edit Session"]}),i.jsxs("button",{onClick:()=>{de(!1),p()},className:"w-full px-3 py-2 flex items-center text-left hover:bg-gray-50",children:[i.jsx(Jn,{className:"h-4 w-4 mr-2 text-gray-700"}),"Logout"]})]})})]})]}),i.jsxs("div",{className:"relative bg-white rounded-lg shadow-md p-4 mb-6",style:{marginTop:fr?"3.5rem":"0"},children:[fr&&i.jsxs("div",{className:"absolute left-0 px-4 py-1 pr-8 rounded-t-md border-b-0 text-sm font-semibold shadow-sm z-20 flex items-center gap-2 whitespace-nowrap group cursor-pointer",style:{top:"0",left:"-1px",transform:"translateY(-100%)",backgroundColor:Ms.background,color:Ms.text,borderColor:Ms.border,borderWidth:"1px",borderBottomWidth:"0",boxShadow:"0 4px 8px rgba(16,24,40,0.06)",borderTopLeftRadius:"0.9rem",borderTopRightRadius:"0.9rem",overflow:"visible"},onMouseEnter:()=>{(x.product_id||x.productId)&&Bn(!0)},onMouseLeave:()=>Bn(!1),onClick:V=>{const N=x.product_id||x.productId;if(!N)return;V.stopPropagation(),V.preventDefault();const F=Br.find(pe=>pe.id===N);F&&(Be(F),Oe(F.name||""),ht(F.color_hex||null),Bt(F.color_hex||"#2D4660"))},children:[i.jsx(Sv,{className:"h-4 w-4 flex-shrink-0"}),i.jsx("span",{className:"overflow-hidden text-ellipsis flex-1 min-w-0",children:fr}),(x.product_id||x.productId)&&yr&&i.jsx("div",{className:"absolute right-2 flex-shrink-0 opacity-80",children:i.jsx(zh,{className:"h-4 w-4",style:{color:Ms.text}})})]}),i.jsxs("div",{className:"pt-1",children:[i.jsxs("div",{className:"flex items-center justify-between mb-4",children:[i.jsxs("h2",{className:"text-xl font-semibold text-[#2D4660]",children:["Current Session: ",i.jsx("span",{className:"text-[#1E5461]",children:x.title})]}),i.jsxs("div",{ref:rr,className:"relative z-40",children:[i.jsxs("div",{className:"hidden md:flex space-x-2",children:[!(x.isActive===!1&&!Yi(x.endDate))&&i.jsxs(yt,{variant:"gold",onClick:s,className:"flex items-center",children:[i.jsx(Nh,{className:"h-4 w-4 mr-2"}),Yi(x.endDate)?"Final Results":"Current Results"]}),i.jsxs(yt,{variant:"primary",onClick:()=>rt(!0),className:"flex items-center",children:[i.jsx(Mn,{className:"h-4 w-4 mr-2"}),"Edit Session"]})]}),i.jsx("div",{className:"flex md:hidden",children:i.jsx("button",{onClick:()=>Ae(!we),className:"p-2 rounded-md border border-gray-200 bg-white shadow-sm","aria-label":"Open session actions menu",children:i.jsx(di,{className:"h-5 w-5 text-gray-700"})})}),we&&i.jsx("div",{className:"absolute right-0 mt-2 w-56 bg-white border border-gray-200 rounded-lg shadow-lg md:hidden z-50",children:i.jsxs("div",{className:"py-1",children:[!(x.isActive===!1&&!Yi(x.endDate))&&i.jsxs("button",{onClick:()=>{Ae(!1),s()},className:"w-full px-3 py-2 flex items-center text-left hover:bg-gray-50",children:[i.jsx(Nh,{className:"h-4 w-4 mr-2 text-gray-700"}),Yi(x.endDate)?"Final Results":"Current Results"]}),i.jsxs("button",{onClick:()=>{Ae(!1),rt(!0)},className:"w-full px-3 py-2 flex items-center text-left hover:bg-gray-50",children:[i.jsx(Mn,{className:"h-4 w-4 mr-2 text-gray-700"}),"Edit Session"]})]})})]})]}),An&&i.jsx("p",{className:"text-xs text-gray-500 mb-4",children:"Loading products"}),sr&&i.jsx("p",{className:"text-xs text-[#591D0F] mb-4",children:sr}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4",children:[i.jsxs("div",{children:[i.jsx("h3",{className:"text-sm font-medium text-gray-700 mb-1",children:"Voting Period"}),rs(x.startDate)||rs(x.endDate)?i.jsx("p",{className:"text-gray-400 italic",children:"Dates not set"}):i.jsxs("p",{className:`text-[#2D4660] font-medium ${x.originalEndDate?"line-through text-gray-400":""}`,children:[Ji(x.startDate)," - ",Ji(x.originalEndDate||x.endDate)]}),x.originalEndDate&&x.endedEarlyBy&&i.jsxs("div",{className:"flex items-center mt-1 text-xs text-[#591D0F]",children:[i.jsxs("span",{children:["Ended Early by ",x.endedEarlyBy]}),x.endedEarlyReason&&i.jsxs("div",{className:"group relative ml-1",children:[i.jsx(tr,{className:"h-3 w-3 cursor-help"}),i.jsxs("div",{className:"absolute bottom-full left-1/2 -translate-x-1/2 mb-2 px-3 py-2 bg-gray-900 text-white text-xs rounded-lg opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-200 whitespace-nowrap z-10 pointer-events-none max-w-xs",children:[i.jsxs("div",{className:"font-semibold mb-1",children:["Reason: ",x.endedEarlyReason]}),x.endedEarlyDetails&&i.jsx("div",{className:"whitespace-normal",children:x.endedEarlyDetails}),i.jsx("div",{className:"absolute top-full left-1/2 -translate-x-1/2 -mt-1 border-4 border-transparent border-t-gray-900"})]})]})]})]}),i.jsxs("div",{children:[i.jsx("h3",{className:"text-sm font-medium text-gray-700 mb-1",children:"Votes Per User"}),i.jsx("p",{className:"text-[#2D4660] font-medium",children:x.useAutoVotes?`${Math.max(1,Math.floor(e.length/2))} (Auto: ${e.length} features  2)`:x.votesPerUser})]}),i.jsxs("div",{children:[i.jsx("h3",{className:"text-sm font-medium text-gray-700 mb-1",children:"Status"}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("div",{className:"flex items-center",children:Li}),(x.isActive||Yi(x.endDate))&&i.jsx(yt,{variant:x.isActive?"danger":"primary",onClick:()=>{x.isActive?lt(!0):(ks(),R(!0))},className:"text-xs px-2 py-1 ml-2",children:x.isActive?"End Early":"Reopen"})]})]})]}),x.goal&&x.goal.trim()&&i.jsx("div",{className:"pt-3 border-t border-gray-200",children:i.jsxs("div",{className:"relative overflow-hidden rounded-2xl border border-[#C89212]/30 bg-gradient-to-r from-[#FFF6E3] via-[#FFF9ED] to-white shadow-sm p-5 md:p-6",children:[i.jsx("span",{className:"pointer-events-none absolute -top-10 left-4 h-32 w-32 rounded-full bg-[#C89212]/25 blur-3xl"}),i.jsx("span",{className:"pointer-events-none absolute -bottom-16 right-6 h-40 w-40 rounded-full bg-[#F4C66C]/20 blur-3xl"}),i.jsx("span",{className:"pointer-events-none absolute top-6 right-10 text-[#F4B400] text-xl animate-ping",children:""}),i.jsx("span",{className:"pointer-events-none absolute bottom-8 left-10 text-[#C89212] text-lg animate-pulse",children:""}),i.jsx("div",{className:"relative flex flex-col gap-6 md:flex-row md:items-start md:justify-between",children:i.jsxs("div",{className:"flex items-start gap-5 md:pr-8 lg:pr-12",children:[i.jsxs("div",{className:"relative",children:[i.jsx("div",{className:"h-16 w-16 md:h-20 md:w-20 rounded-full bg-white shadow-lg shadow-[#C89212]/30 border border-[#C89212]/40 flex items-center justify-center text-[#C89212]",children:i.jsx(Bm,{className:"h-8 w-8 md:h-10 md:w-10"})}),i.jsx("span",{className:"pointer-events-none absolute -top-3 -left-2 text-[#C89212] text-base animate-ping",children:""}),i.jsx("span",{className:"pointer-events-none absolute bottom-0 -right-3 text-[#F5D79E] text-xl animate-pulse",children:""})]}),i.jsxs("div",{children:[i.jsx("p",{className:"text-xs font-semibold uppercase tracking-[0.2em] text-[#C89212]/80 mb-1",children:"Session Goal"}),i.jsx("h3",{className:"text-lg md:text-xl font-semibold text-[#2D4660] leading-relaxed",children:x.goal})]})]})})]})}),Wn.length>0&&i.jsx("div",{className:"pt-3 border-t border-gray-200",children:i.jsxs("div",{className:"md:w-80 lg:w-96 rounded-xl border border-white/70 bg-white/80 backdrop-blur-sm shadow-inner p-4",children:[i.jsxs("div",{className:"flex items-center justify-between mb-3",children:[i.jsx("h3",{className:"text-sm font-semibold text-[#2D4660]",children:"Status Notes"}),Wn.length>2&&i.jsxs("span",{className:"inline-flex items-center justify-between text-xs text-[#1E5461] w-[90px]",children:[i.jsx("span",{className:"flex items-center justify-center w-4 h-4 border border-current rounded",children:on?i.jsx($c,{className:"h-2.5 w-2.5"}):i.jsx(Dn,{className:"h-2.5 w-2.5"})}),i.jsx("button",{type:"button",onClick:()=>Dr(V=>!V),className:"ml-1 hover:text-[#173B65] transition-colors text-left flex-1",children:on?"Show Less":"Show More"})]})]}),i.jsx("div",{className:"space-y-3",children:Wn.slice(0,on?Wn.length:2).map(V=>{const N=V.type==="reopen"?Rl:tr;return i.jsxs("div",{className:`flex items-start gap-3 text-sm ${V.textColorClass}`,children:[i.jsx("div",{className:`mt-0.5 flex items-center justify-center w-8 h-8 ${V.iconBgClass} ${V.iconBorderClass} border rounded-lg`,children:i.jsx(N,{className:`h-3.5 w-3.5 ${V.iconColorClass}`})}),i.jsxs("div",{children:[i.jsx("p",{className:"font-semibold text-gray-800",children:V.title}),i.jsx("p",{className:"text-xs text-gray-600 leading-relaxed",children:V.description})]})]},V.id)})}),Wn.length>2&&!on&&i.jsx("p",{className:"text-xs text-gray-500 mt-3",children:'Showing newest notes. Select "Show More" to view all updates.'})]})})]})]}),i.jsxs("div",{className:"relative bg-white rounded-lg shadow-md p-4 mb-6",children:[i.jsx("div",{className:"flex items-center justify-between mb-4",children:i.jsxs("div",{className:"flex items-center",children:[i.jsx("img",{src:AC,alt:"Azure DevOps logo",className:"h-5 w-5 mr-2"}),i.jsx("h2",{className:"text-xl font-semibold text-[#2D4660]",children:"Azure DevOps Integration"})]})}),j.enabled?i.jsxs("div",{className:"space-y-4",children:[i.jsx("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:gap-4",children:[i.jsx(jr,{className:"h-5 w-5 text-green-600 mr-2"}),i.jsxs("div",{className:"flex flex-col gap-2",children:[i.jsxs("div",{className:"flex flex-wrap items-center gap-x-2 text-sm text-green-700",children:[i.jsx("span",{className:"font-medium text-green-900",children:"Connected to Azure DevOps"}),i.jsx("span",{className:"hidden sm:inline mx-1 text-green-500",children:""}),i.jsxs("span",{children:[i.jsx("span",{className:"font-medium",children:"Organization:"})," ",j.organization]}),i.jsx("span",{className:"hidden sm:inline mx-1 text-green-500",children:""}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("span",{className:"font-medium",children:"Project:"}),i.jsx("div",{className:"min-w-[150px]",children:i.jsx(PC,{options:Ne,value:le,onChange:Oa,variant:"green"})})]}),j.lastSyncTime&&i.jsxs(i.Fragment,{children:[i.jsx("span",{className:"hidden sm:inline mx-1 text-green-500",children:""}),i.jsxs("span",{children:[i.jsx("span",{className:"font-medium",children:"Last Sync:"})," ",Ji(j.lastSyncTime)]})]})]}),i.jsx("span",{className:"text-xs text-green-700",children:"Switching projects will clear the filters below."})]})]}),i.jsxs("button",{onClick:_,className:"text-sm text-[#591D0F] hover:text-[#6A4234] font-medium flex items-center",children:[i.jsx(js,{className:"h-4 w-4 mr-1"}),"Disconnect"]})]})}),i.jsx(CZ,{config:j,onUpdateConfig:w,onPreview:S,isFetching:E,availableStates:T,availableAreaPaths:P,availableTags:z,previewFeatures:J,showPreviewModal:H,onFetchStatesForType:U,onFetchAreaPathsForTypeAndState:ne,onFetchTagsForTypeStateAndAreaPath:G,onFetchTypesAndStatesForAreaPath:ie,onFetchTypesAndStatesForTags:te,onFetchTypesAndAreaPathsForStates:W,resetSignal:De})]}):i.jsxs("div",{className:"bg-gray-50 rounded-lg p-6 text-center border border-dashed border-gray-300",children:[i.jsx("img",{src:AC,alt:"Azure DevOps logo",className:"h-10 w-10 mx-auto mb-3 opacity-80"}),i.jsx("h3",{className:"text-lg font-medium text-gray-700 mb-2",children:"Not Connected"}),i.jsx("p",{className:"text-gray-600 mb-4",children:"Connect to Azure DevOps to import work items as features for voting."}),i.jsx(yt,{variant:"primary",onClick:()=>en("newmill",le||Ne[0]||"Product"),className:"inline-flex items-center",disabled:E,children:E?i.jsxs(i.Fragment,{children:[i.jsx(Rl,{className:"h-4 w-4 mr-2 animate-spin"}),"Connecting..."]}):i.jsxs(i.Fragment,{children:[i.jsx(Mn,{className:"h-4 w-4 mr-2"}),"Connect to Azure DevOps"]})}),C&&i.jsx("p",{className:"mt-3 text-sm text-[#591D0F]",children:C})]})]}),i.jsxs("div",{className:"relative bg-white rounded-lg shadow-md p-4 mb-6",children:[i.jsxs("div",{className:"flex flex-wrap justify-between items-center gap-2 mb-4",children:[i.jsxs("div",{children:[i.jsx("h2",{className:"text-xl font-semibold text-[#2D4660]",children:"Suggested Features"}),i.jsx("p",{className:"text-sm text-gray-600",children:"Ideas submitted from the voting experience for future consideration."})]}),i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsxs("span",{className:"inline-flex items-center px-3 py-1 rounded-full bg-[#1E5461]/10 text-[#1E5461] text-sm font-medium",children:[se.length," ",se.length===1?"suggestion":"suggestions"]}),se.length>1&&i.jsx(yt,{variant:"gold",onClick:()=>Rs(!Ir),className:"text-xs px-3 py-1 flex items-center gap-1",children:Ir?i.jsxs(i.Fragment,{children:[i.jsx($c,{className:"h-3.5 w-3.5"}),"Show Less"]}):i.jsxs(i.Fragment,{children:[i.jsx(Dn,{className:"h-3.5 w-3.5"}),"Show All"]})})]})]}),se.length===0?i.jsx("div",{className:"bg-gray-50 border border-dashed border-gray-200 rounded-lg p-6 text-center text-gray-500 text-sm",children:'No feature suggestions have been submitted yet. Encourage voters to use the "Suggest a Feature" button in the voting experience.'}):i.jsx("div",{className:`space-y-4 pr-1 ${Ir?"":"max-h-[360px] overflow-y-auto"}`,children:se.map(V=>{const N=V.requester_name||V.requester_email||"Anonymous";return i.jsx("div",{className:"border border-gray-200 rounded-lg p-4 hover:border-[#1E5461]/40 transition-colors",children:i.jsxs("div",{className:"flex flex-col gap-4",children:[i.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4",children:[i.jsxs("div",{className:"md:flex-1",children:[i.jsx("h3",{className:"text-lg font-semibold text-[#2D4660]",children:V.title}),i.jsxs("p",{className:"text-xs text-gray-500 mt-[14px]",children:["Submitted by ",i.jsx("span",{className:"font-medium text-[#1E5461]",children:N}),V.requester_email&&i.jsxs(i.Fragment,{children:[" ","(",i.jsx("a",{href:`mailto:${V.requester_email}`,className:"text-[#1E5461] hover:underline",children:V.requester_email}),")"]})," on ",Ji(V.created_at)]})]}),i.jsxs("div",{className:"flex flex-col items-end gap-2 self-start md:min-w-[360px]",children:[i.jsxs("div",{className:"flex flex-wrap justify-end gap-2",children:[i.jsxs(yt,{variant:"primary",onClick:()=>{_t(null),He(V)},className:"text-xs px-3 py-1 flex items-center",children:[i.jsx(HM,{className:"h-3.5 w-3.5 mr-2"}),"Move to Current Session"]}),i.jsxs(yt,{variant:"secondary",onClick:()=>{I.length>0&&Ze(V)},disabled:I.length===0,className:"text-xs px-3 py-1 flex items-center",children:[i.jsx(sn,{className:"h-3.5 w-3.5 mr-2"}),"Move to Future Session"]}),i.jsxs(yt,{variant:"secondary",onClick:()=>ns(V),className:"text-xs px-3 py-1 flex items-center",children:[i.jsx(dd,{className:"h-3.5 w-3.5 mr-2"}),"Edit"]}),i.jsxs(yt,{variant:"danger",onClick:()=>{Ns(null),pr(V)},className:"text-xs px-3 py-1 flex items-center",children:[i.jsx(na,{className:"h-3.5 w-3.5 mr-2"}),"Delete"]})]}),I.length===0&&i.jsx("p",{className:"text-xs text-gray-500 text-right",children:"No upcoming sessions are available yet. Create a future session to enable this action."})]})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3",children:[i.jsxs("div",{className:"border border-gray-200 rounded-lg p-3 bg-gray-50 max-h-48 overflow-y-auto",children:[i.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[i.jsx(tr,{className:"h-4 w-4 text-[#2D4660]"}),i.jsx("p",{className:"text-sm font-semibold text-[#2D4660]",children:"Problem it solves"})]}),i.jsx("p",{className:"text-sm text-gray-700 whitespace-pre-line",children:V.summary&&V.summary.length>0?V.summary:"No summary provided."})]}),i.jsxs("div",{className:"border border-gray-200 rounded-lg p-3 bg-gray-50 max-h-48 overflow-y-auto",children:[i.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[i.jsx(Ux,{className:"h-4 w-4 text-[#2D4660]"}),i.jsx("p",{className:"text-sm font-semibold text-[#2D4660]",children:"What would it do?"})]}),i.jsx("p",{className:"text-sm text-gray-700 whitespace-pre-line",children:V.whatWouldItDo&&V.whatWouldItDo.length>0?V.whatWouldItDo:"No details provided."})]}),i.jsxs("div",{className:"border border-gray-200 rounded-lg p-3 bg-gray-50 max-h-48 overflow-y-auto",children:[i.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[i.jsx(qF,{className:"h-4 w-4 text-[#2D4660]"}),i.jsx("p",{className:"text-sm font-semibold text-[#2D4660]",children:"How would it work?"})]}),i.jsx("p",{className:"text-sm text-gray-700 whitespace-pre-line",children:V.howWouldItWork&&V.howWouldItWork.length>0?V.howWouldItWork:"No implementation details provided."})]})]}),V.attachment_urls&&V.attachment_urls.length>0&&i.jsxs("div",{className:"border-t border-gray-200 pt-4",children:[i.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[i.jsx(jl,{className:"h-4 w-4 text-[#2D4660]"}),i.jsxs("p",{className:"text-sm font-semibold text-[#2D4660]",children:["Attachments (",V.attachment_urls.length,")"]})]}),i.jsx("div",{className:"flex flex-wrap gap-3",children:V.attachment_urls.map((F,pe)=>{const he=F.match(/\.(jpg|jpeg|png|gif|webp)$/i),ke=F.match(/\.pdf$/i),Te=F.split("/").pop()||`attachment-${pe+1}`;return i.jsxs("div",{className:"relative group border border-gray-300 rounded-md overflow-hidden",style:{width:"120px",height:"120px"},children:[he?i.jsx("a",{href:F,target:"_blank",rel:"noopener noreferrer",className:"block w-full h-full",children:i.jsx("img",{src:F,alt:Te,className:"w-full h-full object-cover"})}):ke?i.jsx("a",{href:F,target:"_blank",rel:"noopener noreferrer",className:"block w-full h-full flex items-center justify-center bg-red-50 hover:bg-red-100 transition-colors",children:i.jsx(jl,{className:"h-10 w-10 text-red-600"})}):i.jsx("a",{href:F,target:"_blank",rel:"noopener noreferrer",className:"block w-full h-full flex items-center justify-center bg-gray-100 hover:bg-gray-200 transition-colors",children:i.jsx(jl,{className:"h-8 w-8 text-gray-600"})}),i.jsx("div",{className:"absolute bottom-0 left-0 right-0 bg-black bg-opacity-70 text-white text-xs p-1.5 truncate",children:Te.length>18?`${Te.substring(0,18)}...`:Te})]},pe)})})]})]})},V.id)})})]}),i.jsxs("div",{className:"relative bg-white rounded-lg shadow-md p-4 mb-6",children:[i.jsxs("div",{className:"flex justify-between items-center mb-4",children:[i.jsx("h2",{className:"text-xl font-semibold text-[#2D4660]",children:"Feature Management"}),i.jsxs(yt,{variant:"gold",onClick:()=>d(!0),className:"flex items-center w-44",children:[i.jsx(Dn,{className:"mr-2 h-4 w-4"}),"Add Feature"]})]}),i.jsx("div",{className:"w-full overflow-x-auto",children:i.jsxs("table",{className:"min-w-full divide-y divide-gray-200 table-fixed",children:[i.jsx("thead",{className:"bg-gray-50",children:i.jsxs("tr",{children:[i.jsx("th",{scope:"col",className:"w-[20%] px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Title"}),i.jsx("th",{scope:"col",className:"hidden lg:table-cell w-[25%] px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Description"}),i.jsx("th",{scope:"col",className:"hidden md:table-cell w-[10%] px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Epic"}),i.jsx("th",{scope:"col",className:"hidden md:table-cell w-[8%] px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"State"}),i.jsx("th",{scope:"col",className:"hidden lg:table-cell w-[12%] px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Area Path"}),i.jsx("th",{scope:"col",className:"hidden xl:table-cell w-[10%] px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Tags"}),i.jsx("th",{scope:"col",className:"w-[8%] px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Votes"}),i.jsx("th",{scope:"col",className:"w-[7%] px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),i.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:e.map(V=>i.jsxs("tr",{className:"align-top group",children:[i.jsx("td",{className:"px-4 py-4 whitespace-normal break-words text-sm font-medium text-left",children:i.jsxs("div",{className:"max-w-xs overflow-hidden text-left",children:[V.title,V.azureDevOpsId&&i.jsx("div",{className:"mt-1",children:i.jsx(kp,{id:V.azureDevOpsId,url:V.azureDevOpsUrl||""})})]})}),i.jsx("td",{className:"hidden lg:table-cell px-4 py-4 text-sm text-gray-500 text-left",children:i.jsx("div",{className:"max-w-md overflow-hidden break-words text-left",children:V.description||i.jsx("span",{className:"italic text-gray-400",children:"No description provided"})})}),i.jsx("td",{className:"hidden md:table-cell px-4 py-4 whitespace-nowrap text-sm",children:V.epic&&i.jsx(tf,{name:V.epic})}),i.jsx("td",{className:"hidden md:table-cell px-4 py-4 whitespace-nowrap text-sm",children:V.state&&i.jsx("span",{className:"px-2 py-1 text-xs font-medium bg-[#1E5461]/10 text-[#1E5461] rounded",children:V.state})}),i.jsx("td",{className:"hidden lg:table-cell px-4 py-4 text-sm",children:i.jsx("div",{className:"text-gray-600",children:V.areaPath&&typeof V.areaPath=="string"&&V.areaPath.trim()!==""?i.jsx("div",{className:"max-w-xs break-words",children:V.areaPath}):i.jsx("span",{className:"text-gray-400",children:"-"})})}),i.jsx("td",{className:"hidden xl:table-cell px-4 py-4 text-sm",children:V.tags&&V.tags.length>0?i.jsxs("div",{className:"flex flex-wrap gap-1",children:[V.tags.slice(0,3).map((N,F)=>i.jsx("span",{className:"px-2 py-0.5 text-xs bg-gray-100 text-gray-700 rounded",children:N},F)),V.tags.length>3&&i.jsxs("span",{className:"px-2 py-0.5 text-xs text-gray-500",children:["+",V.tags.length-3]})]}):i.jsx("span",{className:"text-gray-400",children:"-"})}),i.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm",children:V.votes}),i.jsxs("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-gray-500 space-x-3 md:opacity-0 md:group-hover:opacity-100 transition-opacity",children:[i.jsx("button",{onClick:()=>f(V),className:"text-[#2D4660] hover:text-[#C89212] inline-block cursor-pointer",title:"Edit Feature",children:i.jsx(dd,{className:"h-5 w-5"})}),i.jsx("button",{onClick:()=>n(V.id),className:"text-[#2D4660] hover:text-[#591D0F] inline-block cursor-pointer",title:"Delete Feature",children:i.jsx(na,{className:"h-5 w-5"})})]})]},V.id))})]})})]}),i.jsx(fn,{isOpen:Ht!==null,onClose:()=>{ft||(He(null),_t(null))},title:"Move Suggestion to Current Session",children:i.jsxs("div",{className:"space-y-4",children:[i.jsxs("p",{className:"text-sm text-gray-700",children:["Move ",i.jsx("span",{className:"font-semibold text-[#2D4660]",children:Ht==null?void 0:Ht.title})," into the current session so it can be managed and voted on."]}),Lt&&i.jsx("div",{className:"bg-[#591D0F]/5 border border-[#591D0F]/20 text-[#591D0F] text-sm rounded-md px-3 py-2",children:Lt}),i.jsxs("div",{className:"flex justify-end gap-2",children:[i.jsx(yt,{variant:"secondary",onClick:()=>{ft||(He(null),_t(null))},disabled:ft,children:"Cancel"}),i.jsx(yt,{variant:"primary",onClick:ha,disabled:ft,children:ft?"Moving...":"Move to Current Session"})]})]})}),i.jsx(fn,{isOpen:nr!==null,onClose:()=>{Zt||(Ze(null),hr(null))},title:"Move to Future Session",children:i.jsxs("div",{className:"space-y-4",children:[i.jsxs("p",{className:"text-sm text-gray-700",children:["Choose the upcoming session where you would like to queue ",i.jsx("span",{className:"font-semibold text-[#2D4660]",children:nr==null?void 0:nr.title}),"."]}),I.length>0?i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Destination Session"}),i.jsx("select",{value:Ot,onChange:V=>zt(V.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md text-sm bg-white",disabled:Zt,children:I.map(V=>i.jsxs("option",{value:V.id,children:[V.title," (Starts ",Ji(V.startDate),")"]},V.id))})]}):i.jsx("div",{className:"bg-[#1E5461]/5 border border-[#1E5461]/20 text-[#1E5461] text-sm rounded-md px-3 py-2",children:"No future sessions are available yet. Create a new session to enable this action."}),Vt&&i.jsx("div",{className:"bg-[#591D0F]/5 border border-[#591D0F]/20 text-[#591D0F] text-sm rounded-md px-3 py-2",children:Vt}),i.jsxs("div",{className:"flex justify-end gap-2",children:[i.jsx(yt,{variant:"secondary",onClick:()=>{Zt||(Ze(null),hr(null))},disabled:Zt,children:"Cancel"}),i.jsx(yt,{variant:"primary",onClick:zi,disabled:Zt||I.length===0,children:Zt?"Moving...":"Move to Session"})]})]})}),i.jsx(fn,{isOpen:Jt!==null,onClose:()=>{_r||(mr(null),Dt(null))},title:"Edit Suggested Feature",children:i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Title"}),i.jsx("input",{type:"text",value:or.title,onChange:V=>En(N=>({...N,title:V.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md",disabled:_r})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Problem it solves"}),i.jsx("textarea",{value:or.summary,onChange:V=>En(N=>({...N,summary:V.target.value})),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-md",disabled:_r})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"What would it do?"}),i.jsx("textarea",{value:or.whatWouldItDo,onChange:V=>En(N=>({...N,whatWouldItDo:V.target.value})),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-md",disabled:_r})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"How would it work?"}),i.jsx("textarea",{value:or.howWouldItWork,onChange:V=>En(N=>({...N,howWouldItWork:V.target.value})),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-md",disabled:_r})]}),zr.length>0&&i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Attachments"}),i.jsx("div",{className:"flex flex-wrap gap-3",children:zr.map((V,N)=>{const F=V.match(/\.(jpg|jpeg|png|gif|webp)$/i),pe=V.match(/\.pdf$/i),he=V.split("/").pop()||`attachment-${N+1}`;return i.jsxs("div",{className:"relative group border border-gray-300 rounded-md overflow-hidden",style:{width:"120px",height:"120px"},children:[F?i.jsx("a",{href:V,target:"_blank",rel:"noopener noreferrer",className:"block w-full h-full",children:i.jsx("img",{src:V,alt:he,className:"w-full h-full object-cover"})}):pe?i.jsx("a",{href:V,target:"_blank",rel:"noopener noreferrer",className:"block w-full h-full flex items-center justify-center bg-red-50 hover:bg-red-100 transition-colors",children:i.jsx(jl,{className:"h-10 w-10 text-red-600"})}):i.jsx("a",{href:V,target:"_blank",rel:"noopener noreferrer",className:"block w-full h-full flex items-center justify-center bg-gray-100 hover:bg-gray-200 transition-colors",children:i.jsx(jl,{className:"h-8 w-8 text-gray-600"})}),i.jsx("button",{type:"button",onClick:()=>{lr(ke=>ke.filter((Te,ve)=>ve!==N))},className:"absolute top-1 right-1 bg-red-500 text-white rounded-full p-1 opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center",style:{width:"20px",height:"20px"},disabled:_r,"aria-label":`Remove ${he}`,children:i.jsx(js,{className:"h-3 w-3"})}),i.jsx("div",{className:"absolute bottom-0 left-0 right-0 bg-black bg-opacity-70 text-white text-xs p-1.5 truncate",children:he.length>18?`${he.substring(0,18)}...`:he})]},N)})}),i.jsx("p",{className:"mt-2 text-xs text-gray-500",children:"Click the X icon on hover to remove attachments"})]}),Gr&&i.jsx("div",{className:"bg-[#591D0F]/5 border border-[#591D0F]/20 text-[#591D0F] text-sm rounded-md px-3 py-2",children:Gr}),i.jsx("div",{className:"flex justify-end gap-2",children:i.jsx(yt,{variant:"primary",onClick:Yr,disabled:_r,children:_r?"Saving...":"Save Changes"})})]})}),i.jsx(fn,{isOpen:Sr!==null,onClose:()=>{Zr||(pr(null),Ns(null))},title:"Delete Suggested Feature",children:i.jsxs("div",{className:"space-y-4",children:[i.jsxs("p",{className:"text-sm text-gray-700",children:["Are you sure you want to delete ",i.jsx("span",{className:"font-semibold text-[#591D0F]",children:Sr==null?void 0:Sr.title}),"? This action cannot be undone."]}),es&&i.jsx("div",{className:"bg-[#591D0F]/5 border border-[#591D0F]/20 text-[#591D0F] text-sm rounded-md px-3 py-2",children:es}),i.jsxs("div",{className:"flex justify-end gap-2",children:[i.jsx(yt,{variant:"secondary",onClick:()=>{Zr||(pr(null),Ns(null))},disabled:Zr,children:"Cancel"}),i.jsx(yt,{variant:"danger",onClick:ti,disabled:Zr,children:Zr?"Deleting...":"Delete"})]})]})}),i.jsx(fn,{isOpen:u,onClose:()=>d(!1),title:"Add New Feature",children:i.jsx(TC,{onSubmit:V=>{t(V),d(!1)},onCancel:()=>d(!1)})}),i.jsx(fn,{isOpen:m!==null,onClose:()=>f(null),title:"Edit Feature",children:m&&i.jsx(TC,{feature:m,onSubmit:V=>{r({...m,...V}),f(null)},onCancel:()=>f(null)})}),i.jsx(fn,{isOpen:et,onClose:()=>rt(!1),title:"Edit Session Settings",children:i.jsx(EZ,{session:x,featureCount:e.length,onSubmit:da,onCancel:()=>rt(!1),onRequestDeleteSession:_s,isDeletingSession:l,productName:fr,products:Br,isLoadingProducts:An,productError:sr,onRequestDeleteProduct:V=>Ce(V),onProductColorUpdated:async()=>{const V=($==null?void 0:$.tenant_id)??($==null?void 0:$.tenantId)??null;if(V)try{const N=await qa(V);gr(N)}catch(N){console.error("Error refreshing products after color update:",N)}}})}),ee&&i.jsxs(fn,{isOpen:!0,onClose:()=>Ce(null),title:"Delete Product",children:[i.jsxs("p",{className:"text-sm text-gray-700 mb-4",children:["Are you sure you want to delete ",i.jsx("span",{className:"font-semibold",children:ee.name}),"? This will remove it for everyone in your tenant."]}),i.jsxs("div",{className:"flex justify-end gap-3",children:[i.jsx(yt,{variant:"secondary",onClick:()=>Ce(null),disabled:yn,children:"Cancel"}),i.jsx(yt,{variant:"danger",onClick:Xt,disabled:yn,children:yn?"Deleting...":"Delete"})]})]}),i.jsx(_Z,{isOpen:H,onClose:()=>fe(!1),previewFeatures:J,onConfirmSync:X,onReplaceAll:K}),i.jsx(fn,{isOpen:Yt,onClose:()=>{R(!1),ks()},title:"Reopen Session",children:i.jsxs("form",{onSubmit:ca(Da),className:"space-y-4",children:[i.jsx("p",{className:"text-gray-600",children:"Capture a brief note so other admins understand why this session is being reopened."}),i.jsx(sd,{control:vn,name:"reason",rules:{required:"Please select a reason"},render:({field:V})=>i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Reason *"}),i.jsx(PC,{options:kZ,value:V.value,onChange:V.onChange,placeholder:"Select a reason..."}),xn.reason&&i.jsx("p",{className:"mt-1 text-sm text-[#591D0F]",children:xn.reason.message})]})}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Additional Details (Optional)"}),i.jsx("textarea",{...Vr("details"),rows:3,placeholder:"Add any context you'd like to share with other admins...",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-[#2D4660] focus:border-transparent"})]}),i.jsx("div",{className:"bg-[#1E5461]/5 border border-[#1E5461]/20 rounded-lg p-3 text-sm text-[#1E5461]",children:"This information will appear in the Current Session summary so every admin sees why voting resumed."}),i.jsxs("div",{className:"flex justify-end space-x-2 pt-4",children:[i.jsx(yt,{variant:"secondary",type:"button",onClick:()=>{R(!1),ks()},children:"Cancel"}),i.jsx(yt,{variant:"primary",type:"submit",children:"Save & Reopen"})]})]})}),i.jsx(fn,{isOpen:kt,onClose:()=>{lt(!1),Fs()},title:"End Session Early",children:i.jsxs("form",{onSubmit:ei(fa),className:"space-y-4",children:[i.jsx("p",{className:"text-gray-600",children:"You are about to end this voting session early. Please select a reason:"}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Reason *"}),i.jsxs("select",{...Ta("reason",{required:"Please select a reason"}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-[#2D4660] focus:border-transparent",children:[i.jsx("option",{value:"",children:"Select a reason..."}),i.jsx("option",{value:"Sufficient Responses",children:"Sufficient responses received"}),i.jsx("option",{value:"Project Cancelled",children:"Project or initiative cancelled"}),i.jsx("option",{value:"Timeline Changed",children:"Timeline or priorities changed"}),i.jsx("option",{value:"Technical Issues",children:"Technical issues or data concerns"}),i.jsx("option",{value:"Stakeholder Request",children:"Stakeholder request"}),i.jsx("option",{value:"Low Participation",children:"Low participation rate"}),i.jsx("option",{value:"Other",children:"Other"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Additional Details (Optional)"}),i.jsx("textarea",{...Ta("details"),rows:3,placeholder:"Add any additional context or notes...",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-[#2D4660] focus:border-transparent"})]}),i.jsxs("div",{className:"bg-[#C89212]/5 border border-[#C89212]/20 rounded-lg p-3 text-sm text-[#6A4234]",children:[i.jsx("p",{className:"font-medium mb-1",children:"Note:"}),i.jsx("p",{children:"Ending the session will close voting immediately. This action will be logged and visible to all admins."})]}),i.jsxs("div",{className:"flex justify-end space-x-2 pt-4",children:[i.jsx(yt,{variant:"secondary",type:"button",onClick:()=>{lt(!1),Fs()},children:"Cancel"}),i.jsx(yt,{variant:"danger",type:"submit",children:"End Session Now"})]})]})}),ze&&i.jsx(fn,{isOpen:!0,onClose:()=>{Be(null),Oe(""),ht(null),Ut(!1)},title:"Edit Product",children:i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Product Name *"}),i.jsx("input",{type:"text",value:Je,onChange:V=>Oe(V.target.value),placeholder:"Enter product name",className:"w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-0 focus:border-[#2D4660]"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Product Color"}),i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("button",{type:"button",onClick:()=>{Bt(ct||"#2D4660"),Ut(!0)},className:"block w-12 h-12 rounded-md border-2 border-gray-300 hover:border-gray-400 transition-all flex items-center justify-center overflow-hidden",style:ct?{backgroundColor:ct}:{backgroundColor:"#ffffff"},children:!ct&&i.jsx("img",{src:KT,alt:"Color Picker",className:"w-8 h-8 object-contain"})}),i.jsx("span",{className:"text-sm text-gray-600",children:ct||"No color selected"})]})]}),i.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t",children:[i.jsx(yt,{variant:"secondary",onClick:()=>{Be(null),Oe(""),ht(null),Ut(!1)},disabled:St,children:"Cancel"}),i.jsx(yt,{variant:"primary",onClick:async()=>{if(!(!(ze!=null&&ze.id)||!Je.trim())){We(!0);try{await xE(ze.id,{name:Je.trim(),color_hex:ct});const V=($==null?void 0:$.tenant_id)??($==null?void 0:$.tenantId);if(V){const N=await qa(V);gr(N.sort((F,pe)=>F.name.localeCompare(pe.name)))}Be(null),Oe(""),ht(null),Ut(!1),onProductColorUpdated&&onProductColorUpdated()}catch(V){console.error("Error updating product:",V),alert("Failed to update product. Please try again.")}finally{We(!1)}}},disabled:St||!Je.trim(),children:St?"Updating...":"Update Product"})]})]})}),Cr&&i.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",onClick:()=>Ut(!1),children:i.jsx("div",{className:"bg-white rounded-lg shadow-xl px-3 py-2 w-auto mx-4",onClick:V=>V.stopPropagation(),children:i.jsxs("div",{className:"flex gap-3 items-stretch",children:[i.jsxs("div",{className:"flex-shrink-0",style:{width:"240px",height:"260px"},children:[i.jsx("input",{id:"edit-native-color-input",type:"color",value:Wr,onChange:V=>Bt(V.target.value),ref:V=>{V&&Cr&&setTimeout(()=>V.click(),50)},className:"opacity-0 absolute",style:{width:"1px",height:"1px"}}),i.jsx("div",{className:"w-full h-full"})]}),i.jsxs("button",{type:"button",onClick:()=>{ht(Wr),Ut(!1)},className:"px-6 rounded-lg text-white font-bold shadow-lg hover:shadow-xl transition-all flex flex-col items-center justify-center gap-3 text-lg flex-shrink-0",style:{backgroundColor:Wr,height:"260px",minWidth:"100px"},children:[i.jsx(jr,{className:"h-8 w-8"}),i.jsxs("div",{className:"text-center leading-tight",children:[i.jsx("div",{children:"Looks"}),i.jsx("div",{children:"Good"})]})]})]})})})]})}const OC=["User Experience","Vendor Management","Analytics & Reporting","Operational Efficiency","Compliance & Risk","Mobile Access","Integration","Sustainability","Budget Management"],PZ={title:"Q2 Product Roadmap",goal:"Prioritize features for the Purchasing Dashboard redesign",votesPerUser:10,useAutoVotes:!0,startDate:new Date().toISOString(),endDate:new Date(Date.now()+10080*60*1e3).toISOString(),isActive:!0,originalEndDate:null,endedEarlyBy:null,endedEarlyReason:null,endedEarlyDetails:null,reopenReason:null,reopenDetails:null,reopenedBy:null,reopenedAt:null,productId:null,productName:null,product_id:null,product_name:null},OZ={organization:"newmill",project:"Product",enabled:!1,workItemType:"Feature"},TZ=[{id:"u1",name:"John Doe",email:"john@example.com",totalVotes:10,usedVotes:0,votesPerFeature:{}},{id:"u2",name:"Jane Smith",email:"jane@example.com",totalVotes:10,usedVotes:0,votesPerFeature:{}},{id:"u3",name:"Robert Johnson",email:"robert@example.com",totalVotes:10,usedVotes:0,votesPerFeature:{}}],GT=(e,t,r)=>e?{label:"System Admin",className:"bg-[#C89212] text-white"}:t?{label:"Session Admin",className:"bg-[#576C71] text-white"}:r?{label:"Stakeholder",className:"bg-[#8B5A4A] text-white"}:null,jw=e=>{const t=new Date(e),r=new Date;t.setHours(0,0,0,0),r.setHours(0,0,0,0);const n=t.getTime()-r.getTime();return Math.ceil(n/(1e3*60*60*24))},Sw=e=>e<=0?"text-[#591D0F]":e<=2?"text-[#6A4234]":e<=4?"text-[#C89212]":"text-[#1E5461]",Nw=e=>e<=0?"bg-[#591D0F]/10":e<=2?"bg-[#6A4234]/10":e<=4?"bg-[#C89212]/10":"bg-[#1E5461]/10",IZ=(e,t)=>{const r=new Date(e),n=new Date(t),s=new Date;return r<=s&&s<=n},DZ=e=>{const t=[...e];for(let r=t.length-1;r>0;r--){const n=Math.floor(Math.random()*(r+1));[t[r],t[n]]=[t[n],t[r]]}return t},od=(e,t)=>e?e.length>t?`${e.substring(0,t-3)}...`:e:"",xh=e=>{if(!e)return"";const t=document.createElement("div");t.innerHTML=e;let r=t.textContent||t.innerText||"";return r=r.replace(/\s+/g," ").trim(),r},$Z=e=>{const t=e.split("");for(let r=0;r<3;r++){const n=Math.floor(Math.random()*t.length),s=Math.floor(Math.random()*t.length);n!==s&&([t[n],t[s]]=[t[s],t[n]])}return t.join("")};function Np({src:e,alt:t,style:r,className:n,...s}){const[a,l]=v.useState(!1);return a?i.jsx("div",{className:`inline-block bg-gray-100 text-center align-middle ${n??""}`,style:r,children:i.jsx("div",{className:"flex items-center justify-center w-full h-full",children:i.jsx("img",{src:"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iODgiIGhlaWdodD0iODgiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgc3Ryb2tlPSIjMDAwIiBzdHJva2UtbGluZWpvaW49InJvdW5kIiBvcGFjaXR5PSIuMyIgZmlsbD0ibm9uZSIgc3Ryb2tlLXdpZHRoPSIzLjciPjxyZWN0IHg9IjE2IiB5PSIxNiIgd2lkdGg9IjU2IiBoZWlnaHQ9IjU2IiByeD0iNiIvPjxwYXRoIGQ9Im0xNiA1OCAxNi0xOCAzMiAzMiIvPjxjaXJjbGUgY3g9IjUzIiBjeT0iMzUiIHI9IjciLz48L3N2Zz4KCg==",alt:"Error loading image",...s,"data-original-url":e})})}):i.jsx("img",{src:e,alt:t,className:n,style:r,...s,onError:()=>l(!0)})}const yt=pt.memo(function({children:t,onClick:r,variant:n="primary",disabled:s=!1,className:a="",...l}){const u="py-2 px-4 rounded-lg flex items-center transition-colors cursor-pointer",d={primary:"bg-[#2d4660] text-white hover:bg-[#173B65]",secondary:"border border-gray-300 text-gray-700 hover:bg-gray-50",danger:"bg-[#591D0F] text-white hover:bg-[#492434]",gold:"bg-[#C89212] text-white hover:bg-[#E0A814]",blue:"bg-[#173B65] text-white hover:bg-[#1D2C49]",gray:"bg-[#576C71] text-white hover:bg-[#1E5461]"};return i.jsx("button",{onClick:r,disabled:s,className:`${u} ${d[n]} ${s?"opacity-60 cursor-not-allowed":""} ${a}`,...l,children:t})});class fn extends v.Component{render(){const{isOpen:t,onClose:r,title:n,children:s,maxWidth:a="max-w-2xl",hideCloseButton:l=!1,hideHeader:u=!1}=this.props;return t?i.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:i.jsxs("div",{className:"flex items-start justify-center min-h-screen p-4 text-center pt-8 sm:pt-16",children:[i.jsx("div",{className:"fixed inset-0 transition-opacity bg-black/50",onClick:l?void 0:r,"aria-hidden":"true"}),i.jsxs("div",{className:`inline-block w-full ${a} p-6 mb-8 overflow-visible text-left align-middle transition-all transform bg-white shadow-xl rounded-lg relative z-10`,children:[u?!l&&i.jsx("div",{className:"flex justify-end -mt-2 -mr-2",children:i.jsx("button",{onClick:r,className:"text-gray-400 hover:text-gray-500 focus:outline-none",children:i.jsx(js,{className:"h-5 w-5"})})}):i.jsxs("div",{className:"flex items-start justify-between mb-5",children:[i.jsxs("div",{className:"flex items-center gap-3 bg-[#FFF7E2] border border-[#C89212]/40 rounded-xl px-6 py-3 shadow-sm w-full mr-4",children:[i.jsx("div",{className:"flex items-center justify-center h-10 w-10 rounded-full bg-[#C89212]/15 text-[#C89212]",children:i.jsx(Ux,{className:"h-6 w-6"})}),i.jsxs("div",{children:[i.jsx("h3",{className:"text-lg font-semibold text-[#2d4660] tracking-tight",children:n}),i.jsx("p",{className:"text-xs text-[#8A6D3B] font-medium mt-1 uppercase tracking-widest",children:"Spark the roadmap with your ideas"})]})]}),!l&&i.jsx("button",{onClick:r,className:"ml-3 text-gray-400 hover:text-gray-500 focus:outline-none",children:i.jsx(js,{className:"h-5 w-5"})})]}),i.jsx("div",{className:u?"-mt-4":"mt-2 overflow-visible",children:s})]})]})}):null}}const tf=pt.memo(function({name:t,truncateAt:r=30,className:n}){if(!t)return null;const s=r===null?t:od(t,r),a=["flex items-center text-xs text-[#2d4660]",n].filter(Boolean).join(" ");return i.jsxs("div",{className:a,children:[i.jsx($F,{className:"h-3 w-3 mr-1 text-[#2d4660]"}),i.jsx("span",{className:"font-medium leading-tight break-words",children:s})]})}),kp=pt.memo(function({id:t,url:r}){return t?i.jsxs("a",{href:r,target:"_blank",rel:"noreferrer",className:"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-blue-100 text-blue-800 hover:bg-blue-200 cursor-pointer",title:"View in Azure DevOps",children:[i.jsx(iF,{className:"h-3 w-3 mr-1"}),"#",t]}):null});pt.memo(function({endDate:t}){const r=jw(t),n=Sw(r),s=Nw(r);return i.jsx("div",{className:`${s} rounded-md p-3 border ${r<=2?"border-[#6A4234]/20":r<=4?"border-[#C89212]/20":"border-[#1E5461]/20"}`,children:i.jsxs("div",{className:"flex items-center",children:[i.jsx(sn,{className:`h-5 w-5 mr-2 ${n}`}),i.jsxs("div",{children:[i.jsxs("span",{className:`font-medium ${n}`,children:["Voting ends: ",Ji(t)]}),i.jsx("div",{className:"text-sm mt-1",children:r<=0?i.jsx("span",{className:"text-red-600 font-medium",children:"Voting ends today!"}):i.jsxs("span",{className:`${n}`,children:[r," ",r===1?"day":"days"," remaining"]})})]})]})})});function RZ({isShuffling:e,onShuffle:t}){const[r,n]=v.useState("Shuffle Features"),s=v.useRef(null);return v.useEffect(()=>(e?s.current=window.setInterval(()=>{n($Z("Shuffle Features"))},100):s.current!==null&&(window.clearInterval(s.current),n("Shuffle Features")),()=>{s.current!==null&&window.clearInterval(s.current)}),[e]),i.jsxs("button",{onClick:t,className:`py-2 px-4 rounded-lg flex items-center justify-center transition-all duration-300 w-full md:w-auto ${e?"bg-[#C89212] text-white scale-95":"bg-[#C89212] hover:bg-[#A67810] text-white hover:scale-105"}`,disabled:e,children:[i.jsx("span",{className:`transition-transform duration-500 ${e?"mr-2 animate-spin":"mr-2"}`,children:i.jsx(EF,{className:"h-4 w-4"})}),i.jsx("span",{className:"font-medium tracking-wide whitespace-nowrap",children:r})]})}const Ah=pt.memo(function({show:t,title:r,message:n,onConfirm:s,onCancel:a,confirmText:l="Confirm",cancelText:u="Cancel",type:d="delete"}){if(!t)return null;const m=d==="delete"?"bg-[#591D0F]/10":"bg-[#C89212]/10",f=d==="delete"?"text-[#591D0F]":"text-[#C89212]",p=d==="delete"?"bg-[#591D0F] hover:bg-[#492434]":"bg-[#C89212] hover:bg-[#A67810]";return i.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:i.jsxs("div",{className:"relative z-10 bg-white rounded-lg shadow-xl max-w-md w-full mx-auto overflow-hidden",children:[i.jsxs("div",{className:`${m} p-4 flex items-start space-x-4`,children:[i.jsx("div",{className:f,children:d==="delete"?i.jsx(na,{className:"h-5 w-5"}):i.jsx(tr,{className:"h-5 w-5"})}),i.jsxs("div",{children:[i.jsx("h3",{className:"text-lg font-medium text-gray-900",children:r}),i.jsx("p",{className:"mt-1 text-sm text-gray-500",children:n})]})]}),i.jsx("div",{className:"p-4 bg-white space-y-4",children:i.jsxs("div",{className:"flex items-center justify-end space-x-3",children:[i.jsx("button",{type:"button",onClick:a,className:"px-4 py-2 border border-gray-300 rounded-md text-sm font-medium text-gray-700 hover:bg-gray-50 cursor-pointer",children:u}),i.jsx("button",{type:"button",onClick:()=>{s(),a()},className:`px-4 py-2 rounded-md text-sm font-medium text-white ${p} cursor-pointer`,children:l})]})})]})})}),MZ=pt.memo(function({feature:t,userVoteCount:r=0,remainingVotes:n=0,votingIsActive:s=!1,onVote:a,isShuffling:l=!1,shuffleStage:u="idle",currentUser:d,onRequestInfo:m}){const[f,p]=v.useState(!1),[y,x]=v.useState(!1),j=async()=>{if(!(!m||y)){x(!0);try{await m(t.id),p(!0)}catch(S){console.error("Error requesting info:",S)}finally{x(!1)}}},w=()=>{switch(u){case"fadeOut":return"opacity-0 scale-95 blur-sm";case"rearranging":return"opacity-0 scale-90";case"fadeIn":return"opacity-100 scale-100 blur-0";default:return"opacity-100 scale-100 blur-0"}};return i.jsx("div",{className:`relative z-10 bg-white rounded-lg shadow-md overflow-hidden transition-all duration-400 ease-in-out ${r>0?"border-2 border-[#1E5461]":""} ${w()}`,children:i.jsxs("div",{className:"p-6 flex flex-col h-full",children:[i.jsx("h3",{className:"text-lg font-semibold mb-2 text-[#2d4660]",children:t.title}),t.azureDevOpsId&&i.jsx("div",{className:"flex justify-end mb-4",children:i.jsx(kp,{id:t.azureDevOpsId,url:t.azureDevOpsUrl||""})}),t.description?i.jsx("p",{className:"text-gray-600 mb-4 flex-grow",children:t.description}):i.jsxs("div",{className:"mb-4 flex-grow",children:[i.jsx("p",{className:"text-gray-400 italic mb-3",children:"No description provided"}),d&&m&&i.jsx("div",{className:"transition-all duration-300",children:f?i.jsxs("div",{className:"text-sm px-3 py-2 bg-green-50 text-green-700 rounded-md font-medium flex items-center animate-fadeIn",children:[i.jsx(jr,{className:"h-4 w-4 mr-2 flex-shrink-0"}),i.jsx("span",{children:"Thank you! Your request has been sent."})]}):i.jsxs("button",{onClick:j,disabled:y,className:"text-sm px-3 py-2 bg-blue-50 hover:bg-blue-100 text-[#2d4660] rounded-md font-medium flex items-center transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:[i.jsx(tr,{className:"h-4 w-4 mr-2 flex-shrink-0"}),i.jsx("span",{children:y?"Sending...":"Ask Product Owner for more info"})]})})]}),a&&i.jsx("div",{className:"mt-auto pt-3",children:i.jsxs("div",{className:`flex items-center mb-3 ${t.epic?"justify-between":"justify-end"}`,children:[t.epic&&i.jsx(tf,{name:t.epic,truncateAt:null,className:"text-sm bg-[#1E5461]/10 px-2 py-1 rounded-md"}),i.jsx("div",{className:"flex items-center space-x-2",children:r===0?i.jsx("button",{onClick:()=>a(t.id,!0),className:`px-6 py-2.5 rounded-lg text-base font-semibold cursor-pointer transition-colors ${s&&n>0?"bg-[#2d4660] text-white hover:bg-[#C89212]":"bg-gray-300 text-gray-600 cursor-not-allowed"}`,disabled:!s||n<=0,children:"Vote"}):i.jsxs(i.Fragment,{children:[i.jsx("button",{onClick:()=>a(t.id,!1),className:"p-2 rounded-full bg-gray-100 hover:bg-gray-200 text-gray-700 cursor-pointer transition-colors","aria-label":"Remove vote",disabled:!s,children:i.jsx(ds,{className:"h-6 w-6"})}),i.jsx("span",{className:"px-4 py-2 bg-[#1E5461]/10 text-[#1E5461] rounded-full font-semibold text-base min-w-[3rem] text-center",children:r}),i.jsx("button",{onClick:()=>a(t.id,!0),className:`p-2 rounded-full cursor-pointer transition-colors ${s&&n>0?"bg-[#2d4660]/10 hover:bg-[#C89212]/30 text-[#2d4660]":"bg-gray-100 text-gray-400 cursor-not-allowed"}`,disabled:!s||n<=0,"aria-label":"Add vote",children:i.jsx(ZM,{className:"h-6 w-6"})})]})})]})})]})})});function FZ({feature:e,onClose:t}){return i.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:i.jsxs("div",{className:"relative z-10 bg-white rounded-lg p-6 max-w-md w-full max-h-[80vh] overflow-y-auto",children:[i.jsxs("div",{className:"flex justify-between items-center mb-4",children:[i.jsxs("h3",{className:"text-lg font-medium text-[#2d4660]",children:['Voters for "',e.title,'"']}),i.jsx("button",{onClick:t,className:"text-gray-500 hover:text-gray-700 cursor-pointer",children:i.jsx(js,{className:"h-5 w-5"})})]}),e.voters.length===0?i.jsx("p",{className:"text-gray-500",children:"No votes yet"}):i.jsx("ul",{className:"divide-y divide-gray-200",children:e.voters.map(r=>i.jsxs("li",{className:"py-3 flex justify-between items-center",children:[i.jsxs("div",{children:[i.jsx("p",{className:"font-medium",children:r.name}),i.jsx("p",{className:"text-sm text-gray-500",children:r.email})]}),i.jsxs("div",{className:"bg-[#2d4660]/10 text-[#2d4660] rounded-full px-3 py-1",children:[r.voteCount," ",r.voteCount===1?"vote":"votes"]})]},r.userId))})]})})}function LZ({features:e,onResetVotes:t,onResetAllVotes:r,onBack:n,showVotersList:s,setShowVotersList:a,votingSession:l,effectiveVotesPerUser:u,onLogout:d}){const m=Js(),[f,p]=v.useState(!1),y=v.useRef(null);v.useEffect(()=>{if(!f)return;const _=E=>{y.current&&!y.current.contains(E.target)&&p(!1)};return document.addEventListener("mousedown",_),document.addEventListener("touchstart",_,{passive:!0}),()=>{document.removeEventListener("mousedown",_),document.removeEventListener("touchstart",_)}},[f]);const x=v.useMemo(()=>[...e].sort((_,E)=>E.votes-_.votes),[e]),j=v.useMemo(()=>x.slice(0,10).map(_=>({name:_.title,votes:_.votes,id:_.id})),[x]),w=jw(l.endDate),S=Sw(w);return i.jsxs("div",{className:"container mx-auto p-4 max-w-6xl pb-8",children:[i.jsx("div",{className:"hidden md:flex md:justify-center mb-2",children:i.jsx("img",{src:vi,alt:"New Millennium Building Systems Logo",className:"-mt-4 cursor-pointer hover:opacity-80 transition-opacity",style:{height:"96px",width:"auto"},onClick:()=>m("/sessions")})}),i.jsxs("div",{className:"flex justify-between items-center mb-6",children:[i.jsxs("div",{className:"flex items-center",children:[i.jsx(Np,{src:Pa,alt:"New Millennium Building Systems Logo",className:"mr-4 md:hidden cursor-pointer hover:opacity-80 transition-opacity",style:{width:"40px",height:"40px",objectFit:"contain"},onClick:()=>m("/sessions")}),i.jsx("button",{onClick:n,className:"mr-2 p-1 rounded-full hover:bg-gray-200 cursor-pointer",children:i.jsx(Fd,{className:"h-6 w-6"})}),i.jsx("h1",{className:"text-2xl font-bold text-[#2d4660] md:text-3xl",children:Yi(l.endDate)?"Final Voting Results":"Current Voting Results"})]}),i.jsxs("div",{ref:y,className:"relative z-40",children:[i.jsxs("div",{className:"hidden md:flex space-x-2",children:[i.jsxs(yt,{variant:"primary",onClick:n,className:"flex items-center",children:[i.jsx(Mn,{className:"mr-2 h-4 w-4"}),"Admin Dashboard"]}),i.jsx(yt,{variant:"danger",onClick:r,children:"Reset All Votes"}),i.jsxs(yt,{variant:"gray",onClick:d,className:"flex items-center",children:[i.jsx(Jn,{className:"mr-2 h-4 w-4"}),"Logout"]})]}),i.jsx("div",{className:"flex md:hidden",children:i.jsx("button",{onClick:()=>p(!f),className:"p-2 rounded-md border border-gray-200 bg-white shadow-sm","aria-label":"Open menu",children:i.jsx(di,{className:"h-5 w-5 text-gray-700"})})}),f&&i.jsx("div",{className:"absolute right-0 mt-2 w-56 bg-white border border-gray-200 rounded-lg shadow-lg md:hidden z-50",children:i.jsxs("div",{className:"py-1",children:[i.jsxs("button",{onClick:()=>{p(!1),n()},className:"w-full px-3 py-2 flex items-center text-left hover:bg-gray-50",children:[i.jsx(Mn,{className:"h-4 w-4 mr-2 text-gray-700"}),"Admin Dashboard"]}),i.jsxs("button",{onClick:()=>{p(!1),r()},className:"w-full px-3 py-2 flex items-center text-left hover:bg-gray-50 text-red-600",children:[i.jsx(na,{className:"h-4 w-4 mr-2"}),"Reset All Votes"]}),i.jsxs("button",{onClick:()=>{p(!1),d()},className:"w-full px-3 py-2 flex items-center text-left hover:bg-gray-50",children:[i.jsx(Jn,{className:"h-4 w-4 mr-2 text-gray-700"}),"Logout"]})]})})]})]}),i.jsxs("div",{className:"relative z-10 mb-6",children:[i.jsxs("div",{className:"flex items-center justify-between mb-4",children:[i.jsxs("h2",{className:"text-xl font-semibold text-[#2D4660]",children:["Current Session: ",i.jsx("span",{className:"text-[#1E5461]",children:l.title})]}),i.jsxs("div",{className:"text-sm text-gray-600",children:[i.jsxs("span",{className:"mr-2",children:["Votes per user: ",u]}),l.isActive?i.jsx("span",{className:"text-[#1E5461] font-medium",children:"Voting Active"}):Yi(l.endDate)?i.jsx("span",{className:"text-[#591D0F] font-medium",children:"Voting Closed"}):i.jsx("span",{className:"text-[#C89212] font-medium",children:"Voting Upcoming"})]})]}),l.goal&&l.goal.trim()&&i.jsx("div",{className:"pt-3 border-t border-gray-200",children:i.jsxs("div",{className:"relative overflow-hidden rounded-2xl border border-[#C89212]/30 bg-gradient-to-r from-[#FFF6E3] via-[#FFF9ED] to-white shadow-sm p-5 md:p-6",children:[i.jsx("span",{className:"pointer-events-none absolute -top-10 left-4 h-32 w-32 rounded-full bg-[#C89212]/25 blur-3xl"}),i.jsx("span",{className:"pointer-events-none absolute -bottom-16 right-6 h-40 w-40 rounded-full bg-[#F4C66C]/20 blur-3xl"}),i.jsx("span",{className:"pointer-events-none absolute top-6 right-10 text-[#F4B400] text-xl animate-ping",children:""}),i.jsx("span",{className:"pointer-events-none absolute bottom-8 left-10 text-[#C89212] text-lg animate-pulse",children:""}),i.jsx("div",{className:"relative flex flex-col gap-6 md:flex-row md:items-start md:justify-between",children:i.jsxs("div",{className:"flex items-start gap-5 md:pr-8 lg:pr-12",children:[i.jsxs("div",{className:"relative",children:[i.jsx("div",{className:"h-16 w-16 md:h-20 md:w-20 rounded-full bg-white shadow-lg shadow-[#C89212]/30 border border-[#C89212]/40 flex items-center justify-center text-[#C89212]",children:i.jsx(Bm,{className:"h-8 w-8 md:h-10 md:w-10"})}),i.jsx("span",{className:"pointer-events-none absolute -top-3 -left-2 text-[#C89212] text-base animate-ping",children:""}),i.jsx("span",{className:"pointer-events-none absolute bottom-0 -right-3 text-[#F5D79E] text-xl animate-pulse",children:""})]}),i.jsxs("div",{children:[i.jsx("p",{className:"text-xs font-semibold uppercase tracking-[0.2em] text-[#C89212]/80 mb-1",children:"Session Goal"}),i.jsx("h3",{className:"text-lg md:text-xl font-semibold text-[#2D4660] leading-relaxed",children:l.goal})]})]})})]})}),l.isActive&&i.jsx("div",{className:`${Nw(w)} relative z-10 rounded-md p-3 mb-4 inline-block border ${w<=2?"border-[#6A4234]/20":w<=4?"border-[#C89212]/20":"border-[#1E5461]/20"}`,children:i.jsxs("div",{className:"flex items-center",children:[i.jsx(sn,{className:`h-4 w-4 mr-2 ${S}`}),i.jsx("span",{className:`${S} font-medium`,children:w<=0?"Voting ends today!":`${w} ${w===1?"day":"days"} remaining until ${Ji(l.endDate)}`})]})}),i.jsx("div",{className:"h-72",children:i.jsx(lB,{width:"100%",height:"100%",children:i.jsxs(eZ,{data:j,margin:{top:20,right:30,left:20,bottom:60},children:[i.jsx(TT,{dataKey:"name",angle:-45,textAnchor:"end",height:80,tick:{fontSize:12}}),i.jsx(IT,{}),i.jsx(FK,{}),i.jsx(CT,{dataKey:"votes",fill:"#3B82F6",children:j.map((_,E)=>i.jsx(hw,{fill:E%2===0?"#2d4660":"#4f6d8e"},`cell-${E}`))})]})})})]}),i.jsxs("div",{className:"relative z-10 bg-white rounded-lg shadow-md p-4",children:[i.jsx("h2",{className:"text-xl font-semibold mb-4 text-[#2d4660]",children:"Feature Details"}),i.jsx("div",{className:"w-full overflow-x-auto",children:i.jsxs("table",{className:"min-w-full divide-y divide-gray-200 table-fixed",children:[i.jsx("thead",{className:"bg-gray-50",children:i.jsxs("tr",{children:[i.jsx("th",{scope:"col",className:"w-12 px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Rank"}),i.jsx("th",{scope:"col",className:"w-1/2 px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Title"}),i.jsx("th",{scope:"col",className:"hidden sm:table-cell w-1/4 px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Epic"}),i.jsx("th",{scope:"col",className:"w-14 px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Votes"}),i.jsx("th",{scope:"col",className:"hidden md:table-cell w-20 px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Voters"}),i.jsx("th",{scope:"col",className:"w-20 px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),i.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:x.map((_,E)=>i.jsxs("tr",{className:"align-top group",children:[i.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm font-medium",children:E+1}),i.jsxs("td",{className:"px-4 py-4 whitespace-normal break-words text-sm font-medium",children:[_.title,_.azureDevOpsId&&i.jsx("div",{className:"mt-1",children:i.jsx(kp,{id:_.azureDevOpsId,url:_.azureDevOpsUrl||""})})]}),i.jsx("td",{className:"hidden sm:table-cell px-4 py-4 whitespace-nowrap text-sm",children:_.epic&&i.jsx(tf,{name:_.epic})}),i.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm",children:_.votes}),i.jsx("td",{className:"hidden md:table-cell px-4 py-4 whitespace-nowrap text-sm",children:i.jsxs("button",{onClick:()=>a(_.id),className:"text-[#2d4660] hover:text-[#C89212] flex items-center cursor-pointer",disabled:_.voters.length===0,children:[i.jsx(hs,{className:"h-4 w-4 mr-1"}),_.voters.length," ",_.voters.length===1?"user":"users"]})}),i.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm md:opacity-0 md:group-hover:opacity-100 transition-opacity",children:i.jsx("button",{onClick:()=>t(_.id),className:"text-[#591D0F] hover:text-[#492434] cursor-pointer",disabled:_.votes===0,children:"Reset Votes"})})]},_.id))})]})})]}),s&&i.jsx(FZ,{feature:e.find(_=>_.id===s),onClose:()=>a(null)})]})}function zZ({navigate:e,votingSession:t}){return i.jsx("div",{className:"relative z-10 flex flex-col items-center justify-center min-h-[80vh] p-6",children:i.jsxs("div",{className:"relative z-10 w-full max-w-md bg-white rounded-lg shadow-lg p-8 text-center",children:[i.jsx("img",{src:vi,alt:"New Millennium Building Systems Logo",className:"mx-auto mb-6",style:{maxWidth:"200px",height:"auto"}}),i.jsx("div",{className:"w-20 h-20 bg-[#1E5461]/10 rounded-full flex items-center justify-center mx-auto mb-6",children:i.jsx(jr,{className:"h-12 w-12 text-[#1E5461]"})}),i.jsx("h1",{className:"text-3xl font-bold text-[#1E5461] mb-4",children:"Thank You!"}),i.jsxs("p",{className:"text-gray-700 text-lg mb-6",children:["Your votes for ",i.jsx("span",{className:"font-semibold",children:t.title})," have been submitted successfully."]}),i.jsx("p",{className:"text-gray-600 mb-8",children:"We appreciate your input in helping prioritize features for our product roadmap."}),i.jsx(yt,{variant:"primary",onClick:()=>e("/sessions"),className:"mx-auto",children:"View All Voting Sessions"})]})})}function YT({currentRole:e="stakeholder",onSelectStakeholder:t,onSelectSessionAdmin:r,onSelectSystemAdmin:n,showRoleToggle:s=!0}){const a=new Date().getFullYear(),l=[];l.push({key:"stakeholder",label:"Stakeholder View",icon:i.jsx(hs,{className:"h-4 w-4 inline mr-2"}),onClick:t}),(r||e==="session-admin")&&l.push({key:"session-admin",label:"Session Admin",icon:i.jsx(us,{className:"h-4 w-4 inline mr-2"}),onClick:r}),(n||e==="system-admin")&&l.push({key:"system-admin",label:"System Admin",icon:i.jsx(Os,{className:"h-4 w-4 inline mr-2"}),onClick:n});const u=["stakeholder","session-admin","system-admin"];l.sort((m,f)=>{const p=u.indexOf(m.key),y=u.indexOf(f.key);return p-y});const d=s&&l.length>0;return i.jsx("footer",{className:"mt-auto bg-gray-50 border-t border-gray-200",children:i.jsxs("div",{className:"container mx-auto px-4 py-6 max-w-6xl",children:[d&&i.jsx("div",{className:"flex justify-center mb-6",children:i.jsx("div",{className:"inline-flex items-center bg-gray-100 rounded-lg p-1",children:l.map(({key:m,label:f,icon:p,onClick:y})=>{const x=e===m,j=!y;return i.jsxs("button",{onClick:y,disabled:j,className:`px-4 py-2 rounded-md text-sm font-medium transition-colors flex items-center ${x?"bg-white text-[#2d4660] shadow-sm":"text-gray-600 hover:text-gray-900"} ${j&&!x?"opacity-60 cursor-not-allowed":""}`,children:[p,i.jsx("span",{children:f})]},m)})})}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 text-sm text-gray-600",children:[i.jsxs("div",{children:[i.jsx("h3",{className:"font-semibold text-gray-900 mb-2",children:"New Millennium Building Systems"}),i.jsxs("p",{className:"text-xs leading-relaxed",children:["A Steel Dynamics Company",i.jsx("br",{}),"Innovation in structural steel manufacturing"]})]}),i.jsxs("div",{children:[i.jsx("h3",{className:"font-semibold text-gray-900 mb-2",children:"Quick Links"}),i.jsxs("ul",{className:"space-y-1 text-xs",children:[i.jsx("li",{children:i.jsx("a",{href:"https://www.steeldynamics.com",target:"_blank",rel:"noopener noreferrer",className:"hover:text-[#2d4660] transition-colors",children:"Steel Dynamics Inc."})}),i.jsx("li",{children:i.jsx("a",{href:"https://www.newmill.com",target:"_blank",rel:"noopener noreferrer",className:"hover:text-[#2d4660] transition-colors",children:"New Millennium"})})]})]}),i.jsxs("div",{children:[i.jsx("h3",{className:"font-semibold text-gray-900 mb-2",children:"Need Help?"}),i.jsx("p",{className:"text-xs",children:"Contact your Product Owner or session administrator for assistance with voting."})]})]}),i.jsx("div",{className:"mt-6 pt-6 border-t border-gray-200 text-center text-xs text-gray-500",children:i.jsxs("p",{children:[" ",a," New Millennium Building Systems, LLC. All rights reserved."]})})]})})}function TC({feature:e,onSubmit:t,onCancel:r}){const{register:n,handleSubmit:s,formState:{errors:a}}=wd({defaultValues:e?{title:e.title,description:e.description,epic:e.epic}:{epic:OC[0]}});return i.jsxs("form",{onSubmit:s(t),children:[i.jsxs("div",{className:"mb-4",children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Title"}),i.jsx("input",{...n("title",{required:"Title is required"}),className:"w-full px-3 py-2 border border-gray-300 rounded-md"}),a.title&&i.jsx("p",{className:"mt-1 text-sm text-red-600",children:a.title.message})]}),i.jsxs("div",{className:"mb-4",children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),i.jsx("textarea",{...n("description",{required:"Description is required"}),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-md"}),a.description&&i.jsx("p",{className:"mt-1 text-sm text-red-600",children:a.description.message})]}),i.jsxs("div",{className:"mb-4",children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Epic"}),i.jsx("select",{...n("epic",{required:"Epic is required"}),className:"w-full px-3 py-2 border border-gray-300 rounded-md bg-white",children:OC.map(l=>i.jsx("option",{value:l,children:l},l))}),a.epic&&i.jsx("p",{className:"mt-1 text-sm text-red-600",children:a.epic.message})]}),i.jsxs("div",{className:"flex justify-end space-x-2 mt-6",children:[i.jsx(yt,{variant:"secondary",type:"button",onClick:r,children:"Cancel"}),i.jsxs(yt,{variant:"primary",type:"submit",children:[e?"Update":"Add"," Feature"]})]})]})}function UZ({currentUser:e,votingSession:t,onChangeVotes:r,onToggleAdmin:n,isAdmin:s,navigate:a,userVotes:l,features:u,isSystemAdmin:d,isSessionAdmin:m,isStakeholder:f}){const[p,y]=v.useState(!1),x=Object.values(l).reduce((S,_)=>S+_,0),j=u.filter(S=>l[S.id]>0),w=GT(d,m,f);return i.jsxs("div",{className:"container mx-auto p-4 max-w-6xl min-h-screen pb-8",children:[i.jsx("div",{className:"hidden md:flex md:justify-center mb-2",children:i.jsx("img",{src:vi,alt:"New Millennium Building Systems Logo",className:"-mt-4 cursor-pointer hover:opacity-80 transition-opacity",style:{height:"96px",width:"auto"},onClick:()=>a("/sessions")})}),i.jsxs("div",{className:"flex flex-col md:flex-row md:justify-between md:items-center mb-6",children:[i.jsxs("div",{className:"flex items-start md:items-center",children:[i.jsx(Np,{src:Pa,alt:"New Millennium Building Systems Logo",className:"mr-4 md:hidden",style:{width:"40px",height:"40px",objectFit:"contain"}}),i.jsxs("div",{children:[i.jsx("h1",{className:"text-2xl font-bold text-[#2d4660] md:text-3xl",children:"Feature Voting"}),i.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:["Welcome, ",e==null?void 0:e.name,(e==null?void 0:e.email)&&i.jsxs("a",{href:`mailto:${e.email}`,className:"ml-2 text-[#2D4660] hover:underline",children:["(",e.email,")"]}),w&&i.jsx("span",{className:`ml-2 inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium ${w.className}`,children:w.label})]})]})]}),i.jsxs("div",{className:"relative z-10 flex items-center space-x-2 mt-3 md:mt-0 md:justify-end",children:[s&&i.jsxs(yt,{variant:"primary",onClick:n,className:"flex items-center",children:[i.jsx(Mn,{className:"mr-2 h-4 w-4"}),i.jsx("span",{className:"hidden md:inline",children:"Admin Dashboard"}),i.jsx("span",{className:"md:hidden",children:"Admin"})]}),i.jsxs(yt,{variant:"gray",onClick:()=>a("/sessions"),className:"flex items-center",children:[i.jsx(Jn,{className:"mr-2 h-4 w-4"}),i.jsx("span",{className:"hidden md:inline",children:"All Sessions"}),i.jsx("span",{className:"md:hidden",children:"Sessions"})]})]})]}),i.jsx("div",{className:"max-w-3xl mx-auto",children:i.jsxs("div",{className:"relative z-10 bg-white rounded-lg shadow-lg p-8 text-center",children:[i.jsx("div",{className:"w-20 h-20 bg-[#1E5461]/10 rounded-full flex items-center justify-center mx-auto mb-6",children:i.jsx(jr,{className:"h-12 w-12 text-[#1E5461]"})}),i.jsx("h2",{className:"text-3xl font-bold text-[#1E5461] mb-4",children:"Votes Already Submitted"}),i.jsxs("p",{className:"text-gray-700 text-lg mb-2",children:["Welcome back, ",i.jsx("span",{className:"font-semibold",children:e.name}),"!"]}),i.jsxs("p",{className:"text-gray-600 mb-6",children:["You have already submitted your votes for ",i.jsx("span",{className:"font-semibold",children:t.title}),"."]}),i.jsxs("div",{className:"bg-gray-50 rounded-lg p-6 mb-6",children:[i.jsx("h3",{className:"text-lg font-semibold text-[#2d4660] mb-4",children:"Your Current Votes"}),i.jsxs("div",{className:"space-y-3",children:[j.map(S=>i.jsxs("div",{className:"flex justify-between items-start gap-4",children:[i.jsxs("div",{children:[i.jsx("span",{className:"block text-gray-700 font-medium",children:S.title}),S.epic&&i.jsx("div",{className:"mt-1",children:i.jsx(tf,{name:S.epic,truncateAt:null,className:"text-xs bg-[#1E5461]/10 px-2 py-0.5 rounded"})})]}),i.jsxs("span",{className:"bg-[#1E5461]/10 text-[#1E5461] rounded-full px-3 py-1 font-medium self-center",children:[l[S.id]," ",l[S.id]===1?"vote":"votes"]})]},S.id)),i.jsx("div",{className:"border-t border-gray-200 pt-3 mt-3",children:i.jsxs("div",{className:"flex justify-between items-center font-semibold",children:[i.jsx("span",{className:"text-[#2d4660]",children:"Total Votes"}),i.jsx("span",{className:"text-[#2d4660]",children:x})]})})]})]}),i.jsx("div",{className:"bg-[#C89212]/10 border border-[#C89212]/20 rounded-lg p-4 mb-6",children:i.jsxs("div",{className:"flex items-start text-left",children:[i.jsx(QE,{className:"h-5 w-5 text-[#C89212] mr-3 mt-0.5 flex-shrink-0"}),i.jsx("div",{children:i.jsxs("p",{className:"text-sm text-gray-700",children:["If you'd like to change your votes, you can do so below. However, please note that this will",i.jsx("span",{className:"font-semibold",children:" permanently remove your previous votes"})," and allow you to vote again. This action cannot be undone."]})})]})}),i.jsxs(yt,{variant:"gold",onClick:()=>y(!0),className:"mx-auto text-lg py-3 px-8",children:[i.jsx(Rl,{className:"mr-2 h-5 w-5"}),"Change My Votes"]})]})}),i.jsx(Ah,{show:p,title:"Change Your Votes?",message:"This will permanently remove all your previous votes for this session and allow you to vote again. This action cannot be undone. Are you sure you want to continue?",onConfirm:r,onCancel:()=>y(!1),confirmText:"Yes, Change My Votes",cancelText:"Cancel",type:"reset"})]})}const IC=pt.memo(function({features:t,currentUser:r,pendingVotes:n,pendingUsedVotes:s,onVote:a,onSubmitVotes:l,onToggleAdmin:u,isAdmin:d,votingSession:m,navigate:f,effectiveVotesPerUser:p,sessionId:y,onLogout:x,onSuggestionSubmitted:j,isSystemAdmin:w,isSessionAdmin:S,isStakeholder:_}){const[E,C]=v.useState([...t]),[A,T]=v.useState(!1),[P,z]=v.useState("idle"),[J,H]=v.useState(!1),[fe,X]=v.useState({}),[K,ae]=v.useState(!0),[U,ne]=v.useState(!1),[G,ie]=v.useState(!1),[te,W]=v.useState(""),[se,I]=v.useState(""),[B,Me]=v.useState(""),[Se,Ie]=v.useState(""),[je,Ne]=v.useState(!1),[Z,$]=v.useState(null),[xe,le]=v.useState(!1),[M,De]=v.useState(!1),[Pe,et]=v.useState([]),[rt,kt]=v.useState([]),lt=v.useRef(null),Yt=v.useRef(null),R=GT(w,S,_);v.useEffect(()=>{if(!U)return;const He=ft=>{Yt.current&&!Yt.current.contains(ft.target)&&ne(!1)};return document.addEventListener("mousedown",He),document.addEventListener("touchstart",He,{passive:!0}),()=>{document.removeEventListener("mousedown",He),document.removeEventListener("touchstart",He)}},[U]),v.useEffect(()=>{C([...t])},[t]),v.useEffect(()=>{async function He(){if(!r||!y){ae(!1);return}try{const gt=(await Ro(y)).filter(Lt=>Lt.user_id===r.id);if(gt.length>0){const Lt={};gt.forEach(_t=>{Lt[_t.feature_id]=_t.vote_count}),X(Lt),H(!0)}else H(!1),X({})}catch(ft){console.error("Error checking existing votes:",ft),H(!1)}finally{ae(!1)}}He()},[r,y]);const re=v.useCallback(async()=>{if(!(!r||!y))try{await _$(y,r.id),H(!1),X({})}catch(He){console.error("Error changing votes:",He),alert("Failed to reset votes. Please try again.")}},[r,y]),de=v.useCallback(()=>{A||(T(!0),z("fadeOut"),setTimeout(()=>{z("rearranging"),setTimeout(()=>{C(DZ(t)),z("fadeIn"),setTimeout(()=>{z("idle"),T(!1)},400)},200)},400))},[t,A]),Fe=v.useCallback(async He=>{const ft=t.find(gt=>gt.id===He);if(!(!ft||!r))try{await O$({session_id:y,feature_id:He,feature_title:ft.title,requester_id:r.id,requester_name:r.name,requester_email:r.email,created_at:new Date().toISOString()})}catch(gt){throw console.error("Error submitting info request:",gt),alert("Failed to submit request. Please try again."),gt}},[t,r,y]),we=v.useCallback(()=>{$(null),le(!1),ie(!0)},[]),Ae=v.useCallback(()=>{je||(rt.forEach(He=>{He&&URL.revokeObjectURL(He)}),ie(!1),$(null),le(!1),W(""),I(""),Me(""),Ie(""),et([]),kt([]),lt.current&&(lt.current.value=""))},[je,rt]),Ke=v.useCallback(He=>{const ft=Array.from(He.target.files||[]),gt=[],Lt=[],_t=["image/jpeg","image/jpg","image/png","image/gif","image/webp","application/pdf"];ft.forEach(zt=>{_t.includes(zt.type)&&(gt.push(zt),zt.type.startsWith("image/")?Lt.push(URL.createObjectURL(zt)):Lt.push(""))});const nr=3-Pe.length,Ze=gt.slice(0,nr),Ot=Lt.slice(0,nr);et(zt=>[...zt,...Ze]),kt(zt=>[...zt,...Ot]),lt.current&&(lt.current.value="")},[Pe]),It=v.useCallback(He=>{et(ft=>{const gt=ft[He];return gt&&gt.type.startsWith("image/")?kt(Lt=>{const _t=Lt[He];return _t&&URL.revokeObjectURL(_t),Lt.filter((nr,Ze)=>Ze!==He)}):kt(Lt=>Lt.filter((_t,nr)=>nr!==He)),ft.filter((Lt,_t)=>_t!==He)})},[]);v.useEffect(()=>()=>{rt.forEach(He=>{He&&URL.revokeObjectURL(He)})},[rt]);const Rt=v.useCallback(async He=>{var nr,Ze;He.preventDefault();const ft=te.trim(),gt=se.trim(),Lt=B.trim(),_t=Se.trim();if(!ft){$("Please provide a brief title for your suggestion.");return}if(!y){$("Unable to link this suggestion to the current session.");return}try{Ne(!0),$(null);const Ot=[];if(Pe.length>0)for(let Vt=0;Vt<Pe.length;Vt++){const hr=Pe[Vt],Zt=hr.name.split(".").pop(),gn=`${Date.now()}-${Vt}.${Zt}`,Jt=`suggestions/${y}/${gn}`;try{const{data:mr,error:or}=await _e.storage.from("feature-attachments").upload(Jt,hr,{cacheControl:"3600",upsert:!1});if(or)console.error("Error uploading file:",or),((nr=or.message)!=null&&nr.includes("Bucket not found")||(Ze=or.message)!=null&&Ze.includes("not found"))&&console.warn('Storage bucket "feature-attachments" not found. Please create it in Supabase Storage.');else{const{data:{publicUrl:En}}=_e.storage.from("feature-attachments").getPublicUrl(Jt);Ot.push(En)}}catch(mr){console.error("Error uploading file:",mr)}}const zt=await T$({session_id:y,title:ft,description:gt||null,requester_id:(r==null?void 0:r.id)??null,requester_name:(r==null?void 0:r.name)??null,requester_email:(r==null?void 0:r.email)??null,whatWouldItDo:Lt||null,howWouldItWork:_t||null,attachment_urls:Ot.length>0?Ot:null});try{const hr=(await Rx(y)).map(Zt=>{var gn;return(gn=Zt.user)==null?void 0:gn.email}).filter(Zt=>!!Zt);if(hr.length>0){const Zt=(m==null?void 0:m.title)||"this session",gn=(r==null?void 0:r.name)||"A user",Jt=(r==null?void 0:r.email)||"",mr="https://dcchoffman.github.io/feature-voting-app/New-Millennium-color-logo1.png",or=window.location.pathname.startsWith("/feature-voting-app")?"/feature-voting-app":"",En=`${window.location.origin}${or}/admin`,zr=Dt=>Dt.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;"),lr=Dt=>zr(Dt).replace(/\n/g,"<br />"),Gr=`
<table width="100%" cellpadding="0" cellspacing="0" border="0" style="background-color: #f9fafb; font-family: Arial, sans-serif;">
  <tr>
    <td align="center" style="padding: 48px 20px;">
      <table width="600" cellpadding="0" cellspacing="0" border="0" style="background-color: #ffffff; border-radius: 8px; box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);">
        <!-- Logo Header -->
        <tr>
          <td style="background-color: #ffffff; padding: 32px 40px 24px 40px; text-align: center;">
            <img src="${mr}" alt="New Millennium Building Systems" width="300" height="96" style="height: 96px; width: auto; max-width: 300px; display: block; margin: 0 auto; border: 0;" />
            <div style="font-size: 20px; font-weight: bold; color: #2d4660; margin-top: 16px;">Feature Voting System</div>
            <div style="font-size: 11px; color: #6b7280; margin-top: 4px;">has a</div>
            <div style="font-size: 25px; font-weight: bold; color: #2d4660; margin-top: 4px;">New Feature Suggestion</div>
            <div style="font-size: 11px; color: #6b7280; margin-top: 4px;">for the</div>
            <div style="font-size: 30px; font-weight: bold; color: #2d4660; margin-top: 4px;">${zr(Zt)}</div>
          </td>
        </tr>
        
        <!-- Main Content -->
        <tr>
          <td style="background-color: #ffffff; padding: 40px;">
            <p style="margin: 0 0 16px 0; font-size: 16px; color: #333; line-height: 1.6;">
              <strong style="color: #2d4660;">${zr(gn)}</strong>${Jt?` (${zr(Jt)})`:""} has submitted a new feature suggestion.
            </p>
            
            <!-- Suggestion Details Box -->
            <div style="background-color: #f3f4f6; padding: 20px; border-radius: 6px; margin: 24px 0; border-left: 4px solid #C89212;">
              <h3 style="color: #2d4660; margin: 0 0 16px 0; font-size: 18px; font-weight: bold;">${zr(ft)}</h3>
              
              ${gt?`
              <p style="margin: 0 0 12px 0; font-size: 14px; color: #111827; line-height: 1.6;">
                <strong style="color: #2d4660;">Problem it solves:</strong><br />
                <span style="color: #374151;">${lr(gt)}</span>
              </p>
              `:""}
              
              ${Lt?`
              <p style="margin: 0 0 12px 0; font-size: 14px; color: #111827; line-height: 1.6;">
                <strong style="color: #2d4660;">What it would do:</strong><br />
                <span style="color: #374151;">${lr(Lt)}</span>
              </p>
              `:""}
              
              ${_t?`
              <p style="margin: 0 0 12px 0; font-size: 14px; color: #111827; line-height: 1.6;">
                <strong style="color: #2d4660;">How it would work:</strong><br />
                <span style="color: #374151;">${lr(_t)}</span>
              </p>
              `:""}
              
              ${Ot.length>0?`
              <p style="margin: 12px 0 0 0; font-size: 14px; color: #111827; line-height: 1.6;">
                <strong style="color: #2d4660;">Attachments:</strong> ${Ot.length} file(s) - View on admin page
              </p>
              `:""}
            </div>
            
            <!-- Go to Admin Dashboard Button -->
            <table width="100%" cellpadding="0" cellspacing="0" border="0" style="margin: 32px 0;">
              <tr>
                <td align="center">
                  <a href="${En}" style="display: inline-block; padding: 12px 24px; background-color: #C89212; color: white; text-decoration: none; border-radius: 6px; font-weight: 600; font-size: 16px; box-shadow: 0 1px 2px 0 rgba(0, 0, 0, 0.05);">Go to Admin Dashboard</a>
                </td>
              </tr>
            </table>
            
            <p style="margin: 24px 0 0 0; font-size: 14px; color: #6b7280; line-height: 1.6;">
              You can review and manage this suggestion from the admin dashboard.
            </p>
          </td>
        </tr>
        
        <!-- Footer -->
        <tr>
          <td style="background-color: #f9fafb; padding: 20px; text-align: center; border-top: 1px solid #e5e7eb; font-size: 12px; color: #6b7280;">
            <p style="margin: 0 0 8px 0;">This is an automated message from the Feature Voting System.</p>
            <p style="margin: 0; color: #9ca3af;"> ${new Date().getFullYear()} New Millennium Building Systems</p>
          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>`;await Promise.all(hr.map(Dt=>Ho({to:Dt,subject:`New Feature Suggestion: ${ft}`,html:Gr}).catch(_r=>{console.error(`Failed to send email to ${Dt}:`,_r)})))}}catch(Vt){console.error("Error sending admin emails:",Vt)}j==null||j(zt),ie(!1),W(""),I(""),Me(""),Ie(""),et([]),kt([]),lt.current&&(lt.current.value=""),De(!0)}catch(Ot){console.error("Error submitting feature suggestion:",Ot),$("We were unable to submit your suggestion. Please try again in a moment.")}finally{Ne(!1)}},[se,te,B,Se,Pe,r,y,m,j]);if(!r)return null;if(K)return i.jsx("div",{className:"container mx-auto p-4 max-w-6xl min-h-screen flex items-center justify-center",children:i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-[#2d4660] mx-auto mb-4"}),i.jsx("p",{className:"text-gray-600",children:"Loading your voting status..."})]})});if(J)return i.jsx(UZ,{currentUser:r,votingSession:m,onChangeVotes:re,onToggleAdmin:u,isAdmin:d,navigate:f,userVotes:fe,features:t,isSystemAdmin:w,isSessionAdmin:S,isStakeholder:_});const Pt=p-s,rr=Pt===0,Ht=m.isActive;return i.jsxs("div",{className:"container mx-auto p-4 max-w-6xl pb-8",children:[i.jsx("div",{className:"hidden md:flex md:justify-center mb-2",children:i.jsx("img",{src:vi,alt:"New Millennium Building Systems Logo",className:"-mt-4 cursor-pointer hover:opacity-80 transition-opacity",style:{height:"96px",width:"auto"},onClick:()=>f("/sessions")})}),i.jsxs("div",{className:"flex justify-between items-center mb-6",children:[i.jsxs("div",{className:"flex items-start md:items-center",children:[i.jsx(Np,{src:Pa,alt:"New Millennium Building Systems Logo",className:"mr-4 md:hidden",style:{width:"40px",height:"40px",objectFit:"contain"}}),i.jsxs("div",{children:[i.jsx("h1",{className:"text-2xl font-bold text-[#2d4660] md:text-3xl",children:"Feature Voting"}),i.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:["Welcome, ",r==null?void 0:r.name,(r==null?void 0:r.email)&&i.jsxs("a",{href:`mailto:${r.email}`,className:"ml-2 text-[#2D4660] hover:underline",children:["(",r.email,")"]}),R&&i.jsx("span",{className:`ml-2 inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium ${R.className}`,children:R.label})]})]})]}),i.jsxs("div",{ref:Yt,className:"relative z-40",children:[i.jsxs("div",{className:"hidden md:flex items-center space-x-2",children:[d&&i.jsxs(yt,{variant:"primary",onClick:u,className:"flex items-center",children:[i.jsx(Mn,{className:"mr-2 h-4 w-4"}),"Admin Dashboard"]}),i.jsx(yt,{variant:"gray",onClick:()=>f("/sessions"),className:"flex items-center",children:"All Sessions"}),i.jsxs(yt,{variant:"gray",onClick:x,className:"flex items-center",children:[i.jsx(Jn,{className:"mr-2 h-4 w-4"}),"Logout"]})]}),i.jsx("div",{className:"flex md:hidden",children:i.jsx("button",{onClick:()=>ne(!U),className:"p-2 rounded-md border border-gray-200 bg-white shadow-sm","aria-label":"Open menu",children:i.jsx(di,{className:"h-5 w-5 text-gray-700"})})}),U&&i.jsx("div",{className:"absolute right-0 mt-2 w-56 bg-white border border-gray-200 rounded-lg shadow-lg md:hidden z-50",children:i.jsxs("div",{className:"py-1",children:[d&&i.jsxs("button",{onClick:()=>{ne(!1),u()},className:"w-full px-3 py-2 flex items-center text-left hover:bg-gray-50",children:[i.jsx(Mn,{className:"h-4 w-4 mr-2 text-gray-700"}),"Admin Dashboard"]}),i.jsx("button",{onClick:()=>{ne(!1),f("/sessions")},className:"w-full px-3 py-2 flex items-center text-left hover:bg-gray-50",children:"All Sessions"}),i.jsxs("button",{onClick:()=>{ne(!1),x()},className:"w-full px-3 py-2 flex items-center text-left hover:bg-gray-50",children:[i.jsx(Jn,{className:"h-4 w-4 mr-2 text-gray-700"}),"Logout"]})]})})]})]}),i.jsxs("div",{className:"relative z-10 mb-6",children:[i.jsx("div",{className:"flex items-center justify-between mb-4",children:i.jsxs("h2",{className:"text-xl font-semibold text-[#2D4660]",children:["Current Session: ",i.jsx("span",{className:"text-[#1E5461]",children:m.title})]})}),m.goal&&m.goal.trim()&&i.jsx("div",{className:"pt-3 border-t border-gray-200 mb-4",children:i.jsxs("div",{className:"relative overflow-hidden rounded-2xl border border-[#C89212]/30 bg-gradient-to-r from-[#FFF6E3] via-[#FFF9ED] to-white shadow-sm p-5 md:p-6",children:[i.jsx("span",{className:"pointer-events-none absolute -top-10 left-4 h-32 w-32 rounded-full bg-[#C89212]/25 blur-3xl"}),i.jsx("span",{className:"pointer-events-none absolute -bottom-16 right-6 h-40 w-40 rounded-full bg-[#F4C66C]/20 blur-3xl"}),i.jsx("span",{className:"pointer-events-none absolute top-6 right-10 text-[#F4B400] text-xl animate-ping",children:""}),i.jsx("span",{className:"pointer-events-none absolute bottom-8 left-10 text-[#C89212] text-lg animate-pulse",children:""}),i.jsx("div",{className:"relative flex flex-col gap-6 md:flex-row md:items-start md:justify-between",children:i.jsxs("div",{className:"flex items-start gap-5 md:pr-8 lg:pr-12",children:[i.jsxs("div",{className:"relative",children:[i.jsx("div",{className:"h-16 w-16 md:h-20 md:w-20 rounded-full bg-white shadow-lg shadow-[#C89212]/30 border border-[#C89212]/40 flex items-center justify-center text-[#C89212]",children:i.jsx(Bm,{className:"h-8 w-8 md:h-10 md:w-10"})}),i.jsx("span",{className:"pointer-events-none absolute -top-3 -left-2 text-[#C89212] text-base animate-ping",children:""}),i.jsx("span",{className:"pointer-events-none absolute bottom-0 -right-3 text-[#F5D79E] text-xl animate-pulse",children:""})]}),i.jsxs("div",{children:[i.jsx("p",{className:"text-xs font-semibold uppercase tracking-[0.2em] text-[#C89212]/80 mb-1",children:"Session Goal"}),i.jsx("h3",{className:"text-lg md:text-xl font-semibold text-[#2D4660] leading-relaxed",children:m.goal})]})]})})]})}),(()=>{const He=jw(m.endDate),ft=Sw(He),gt=Nw(He);return i.jsx("div",{className:`${gt} rounded-md p-3 md:p-4 border ${He<=2?"border-[#6A4234]/20":He<=4?"border-[#C89212]/20":"border-[#1E5461]/20"}`,children:i.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-3 md:gap-4",children:[i.jsxs("div",{className:"flex items-center flex-shrink-0",children:[i.jsx(sn,{className:`h-5 w-5 mr-2 ${ft}`}),i.jsxs("div",{className:"leading-tight",children:[i.jsxs("span",{className:`font-medium ${ft}`,children:["Voting ends: ",Ji(m.endDate)]}),i.jsx("div",{className:"text-sm -mt-0.5",children:He<=0?i.jsx("span",{className:"text-red-600 font-medium",children:"Voting ends today!"}):i.jsxs("span",{className:`${ft}`,children:[i.jsx("span",{className:"font-semibold text-lg",children:He})," ",He===1?"day":"days"," remaining"]})})]})]}),i.jsx("div",{className:"flex items-center flex-1 min-w-0 md:justify-end",style:{paddingLeft:"60px",width:"100px"},children:i.jsx("div",{className:"leading-tight w-full",style:{width:"120px"},children:i.jsxs("div",{className:"flex items-center",children:[i.jsx(ls,{className:`h-[30px] w-[30px] mr-2 ${ft}`,style:{marginLeft:"-88px"}}),i.jsxs("div",{className:"text-sm -mt-0.5 leading-none flex-1",children:[i.jsxs("div",{className:"flex items-baseline justify-center",style:{marginLeft:"-12px"},children:[i.jsx("span",{className:`${ft} mr-1`,style:{fontSize:"14px",marginLeft:"-48px"},children:"You have"}),i.jsx("span",{className:`${ft} font-semibold text-2xl`,children:Pt}),i.jsxs("span",{className:`${ft} font-semibold text-lg ml-1`,children:["/ ",p]})]}),i.jsx("span",{className:`${ft} block -mt-0.5 text-center`,style:{fontSize:"14px"},children:"votes remaining"})]})]})})})]})})})()]}),!Ht&&i.jsx("div",{className:"mb-6 bg-[#C89212]/10 p-4 rounded-lg border border-[#C89212]/20",children:i.jsxs("div",{className:"flex items-center text-[#6A4234]",children:[i.jsx(Um,{className:"h-5 w-5 mr-2"}),i.jsxs("span",{className:"font-medium",children:["Voting is currently ",Yi(m.endDate)?"closed":"not yet open",".",Yi(m.endDate)?` Voting ended on ${Ji(m.endDate)}.`:` Voting will open on ${Ji(m.startDate)}.`]})]})}),i.jsxs("div",{className:"flex flex-col md:flex-row md:justify-between md:items-center mb-4 gap-3",children:[i.jsx("h2",{className:"text-xl font-semibold text-[#2d4660]",children:"Available Features"}),i.jsxs("div",{className:"flex flex-col md:flex-row items-stretch md:items-center gap-3",children:[i.jsxs(yt,{variant:"gold",onClick:we,className:"flex items-center justify-center w-full md:w-auto",children:[i.jsx(Ux,{className:"h-4 w-4 mr-2"}),"Suggest a Feature"]}),t.length>6&&i.jsx(RZ,{isShuffling:A,onShuffle:de})]})]}),i.jsx("div",{className:`grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 ${s>0?"mb-32":""}`,children:E.map(He=>{const ft=n[He.id]||0;return i.jsx(MZ,{feature:He,userVoteCount:ft,remainingVotes:Pt,votingIsActive:Ht,onVote:a,isShuffling:A,shuffleStage:P,currentUser:r,onRequestInfo:Fe},He.id)})}),s>0&&i.jsx("div",{className:"fixed bottom-0 left-0 right-0 bg-white shadow-lg border-t border-gray-200 p-4",children:i.jsxs("div",{className:"container mx-auto max-w-6xl flex items-center justify-between",children:[i.jsxs("div",{children:[!rr&&i.jsxs("div",{className:"flex items-center",children:[i.jsx(QE,{className:"h-5 w-5 text-[#C89212] mr-2"}),i.jsxs("span",{className:"text-gray-700",children:["You still have ",i.jsx("span",{className:"font-semibold text-[#C89212]",children:Pt})," votes remaining."]})]}),rr&&i.jsxs("div",{className:"flex items-center",children:[i.jsx(jr,{className:"h-5 w-5 text-[#1E5461] mr-2"}),i.jsx("span",{className:"text-gray-700",children:"All votes allocated! You can now submit your votes."})]})]}),i.jsx("button",{onClick:l,className:`py-3 px-6 rounded-lg font-medium cursor-pointer ${rr?"bg-[#1E5461] hover:bg-[#173B65] text-white":"bg-gray-300 text-gray-600 cursor-not-allowed"}`,disabled:!rr,children:"Submit Votes"})]})}),i.jsx(fn,{isOpen:G,onClose:Ae,title:"Suggest a Feature",maxWidth:"max-w-lg",children:i.jsxs("form",{onSubmit:Rt,className:"space-y-4",children:[i.jsxs("div",{className:"bg-[#1E5461]/10 border border-[#1E5461]/30 text-sm text-[#1E5461] rounded-md px-3 py-2",children:["All suggested features will be reviewed for ",i.jsx("strong",{children:"future sessions"}),".",i.jsx("br",{}),"Suggestions will not be added to the current session."]}),Z&&i.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 text-sm rounded-md px-3 py-2",children:Z}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Feature title"}),i.jsx("input",{type:"text",value:te,onChange:He=>W(He.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md",placeholder:"Give your feature a name",disabled:je})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"What problem would this solve? (optional)"}),i.jsx("textarea",{value:se,onChange:He=>I(He.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md",rows:4,placeholder:"Share a few details so we understand the request.",disabled:je})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"What would it do? (optional)"}),i.jsx("textarea",{value:B,onChange:He=>Me(He.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md",rows:3,placeholder:"Describe the functionality or outcome users would experience.",disabled:je})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"How would it work? (optional)"}),i.jsx("textarea",{value:Se,onChange:He=>Ie(He.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md",rows:3,placeholder:"Share any ideas on workflow, technical approach, or integration.",disabled:je})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Attach Images or PDFs (optional, up to 3)"}),i.jsx("input",{ref:lt,type:"file",accept:"image/*,.pdf",multiple:!0,onChange:Ke,disabled:je||Pe.length>=3,className:"hidden",id:"suggestion-file-input"}),i.jsxs("label",{htmlFor:"suggestion-file-input",className:`inline-flex items-center px-4 py-2 border border-gray-300 rounded-md cursor-pointer ${je||Pe.length>=3?"bg-gray-100 text-gray-400 cursor-not-allowed":"bg-white text-gray-700 hover:bg-gray-50"}`,children:[i.jsx(jl,{className:"h-4 w-4 mr-2"}),Pe.length>=3?"Maximum 3 files":"Attach Files"]}),Pe.length>0&&i.jsx("div",{className:"mt-3 flex flex-wrap gap-3",children:Pe.map((He,ft)=>{const gt=He.type.startsWith("image/"),Lt=He.type==="application/pdf",_t=rt[ft]||null;return i.jsxs("div",{className:"relative group border border-gray-300 rounded-md overflow-hidden",style:{width:"100px",height:"100px"},children:[gt&&_t?i.jsx("img",{src:_t,alt:He.name,className:"w-full h-full object-cover"}):Lt?i.jsx("div",{className:"w-full h-full flex items-center justify-center bg-red-50",children:i.jsx(jl,{className:"h-8 w-8 text-red-600"})}):null,i.jsx("button",{type:"button",onClick:()=>It(ft),className:"absolute top-1 right-1 bg-red-500 text-white rounded-full p-1 opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center",style:{width:"20px",height:"20px"},"aria-label":`Remove ${He.name}`,children:i.jsx(js,{className:"h-3 w-3"})}),i.jsx("div",{className:"absolute bottom-0 left-0 right-0 bg-black bg-opacity-50 text-white text-xs p-1 truncate",children:He.name.length>15?`${He.name.substring(0,15)}...`:He.name})]},ft)})})]}),i.jsxs("div",{className:"flex justify-end gap-2",children:[i.jsx(yt,{type:"button",variant:"secondary",onClick:Ae,disabled:je,children:"Close"}),i.jsxs(yt,{type:"submit",variant:"primary",disabled:je,className:"flex items-center",children:[je&&i.jsx(Rl,{className:"h-4 w-4 animate-spin mr-2"}),"Submit Suggestion"]})]})]})}),i.jsx(fn,{isOpen:M,onClose:()=>De(!1),title:"",maxWidth:"max-w-md",hideHeader:!0,children:i.jsxs("div",{className:"text-center py-6",children:[i.jsx("div",{className:"mx-auto flex items-center justify-center h-16 w-16 rounded-full bg-green-100 mb-4",children:i.jsx(jr,{className:"h-10 w-10 text-green-600"})}),i.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Thank You!"}),i.jsx("p",{className:"text-gray-600 mb-1",children:"Your feature suggestion has been submitted successfully."}),i.jsx("p",{className:"text-sm text-gray-500",children:"The session admins have been notified and will review your suggestion."})]})})]})});function Y0({defaultVotesPerUser:e=10,adminMode:t=!1,resultsMode:r=!1}){const{currentSession:n,currentUser:s,setCurrentUser:a,setCurrentSession:l,refreshSessions:u,isSystemAdmin:d,isAdmin:m,isStakeholder:f}=Ea(),p=Js(),y=async()=>{try{await _e.auth.signOut()}catch{}try{l(null)}catch{}a(null);try{localStorage.removeItem("voting_system_current_session"),localStorage.removeItem("azureDevOpsAuthInProgress"),sessionStorage.removeItem("oauth_return_path"),sessionStorage.removeItem("oauth_action")}catch{}p("/login",{replace:!0})};v.useEffect(()=>{const ee=new URLSearchParams(window.location.search),Ce=ee.has("code")||ee.has("error"),ze=localStorage.getItem("voting_system_current_session");!n&&!Ce&&!ze&&p("/sessions")},[n,p]);const x=v.useMemo(()=>{const ee=new URLSearchParams(window.location.search);return ee.has("code")||ee.has("error")},[]),[j,w]=v.useState([]),[S,_]=v.useState(!0),[E,C]=v.useState(TZ),[A,T]=v.useState(r?"results":t||x?"admin":"voting"),[P,z]=v.useState(t||x||r),[J,H]=v.useState(null),[fe,X]=v.useState(!1),[K,ae]=v.useState(null),[U,ne]=v.useState({...PZ,votesPerUser:e}),[G,ie]=v.useState(OZ),[te,W]=v.useState(NC()),[se,I]=v.useState([]),[B,Me]=v.useState([]),[Se,Ie]=v.useState([]),[je,Ne]=v.useState(!1),[Z,$]=v.useState(null),[xe,le]=v.useState(null),[M,De]=v.useState(!1),[Pe,et]=v.useState([]),[rt,kt]=v.useState([]),[lt,Yt]=v.useState(d?"system":"session"),[R,re]=v.useState({}),[de,Fe]=v.useState(0),[we,Ae]=v.useState({showReset:!1,showResetAll:!1,showDeleteSession:!1,targetId:null}),[Ke,It]=v.useState(!1),Rt=v.useRef(!1),Pt=v.useRef(!1),rr=v.useRef(null),Ht=v.useMemo(()=>U.useAutoVotes?Math.max(1,Math.floor(j.length/2)):U.votesPerUser,[U.useAutoVotes,U.votesPerUser,j.length]),He=v.useRef(!1);v.useEffect(()=>{if(He.current){console.log("OAuth processing already in progress, skipping...");return}(async()=>{const Ce=new URLSearchParams(window.location.search),ze=Ce.has("code")||Ce.has("error");if(ze&&!n){console.log("OAuth callback detected, waiting for session to load..."),localStorage.getItem("voting_system_current_session")&&console.log("Found stored session ID, waiting for SessionContext to restore it...");return}if(localStorage.getItem("azureDevOpsAuthInProgress")&&localStorage.removeItem("azureDevOpsAuthInProgress"),!(!ze||Rt.current)){if(!n){console.log("No session available yet, waiting...");return}He.current=!0,Rt.current=!0,console.log("Processing OAuth callback with session:",n.id);try{const Je=await pZ();if(Je){const Oe=new Date(Date.now()+Je.expiresIn*1e3).toISOString(),ct={...G,accessToken:Je.accessToken,refreshToken:Je.refreshToken,tokenExpiresAt:Oe,enabled:!0,clientId:pi.clientId,tenantId:pi.tenantId};await pl(n.id,ct),ie(ct);const ht=sessionStorage.getItem("oauth_return_path")||"/admin";sessionStorage.removeItem("oauth_return_path"),console.log("OAuth successful, navigating to:",ht),p(ht,{replace:!0})}}catch(Je){console.error("OAuth callback error:",Je),$("Failed to authenticate with Azure DevOps");const Oe="/admin";sessionStorage.removeItem("oauth_return_path"),p(Oe,{replace:!0})}finally{He.current=!1}}})()},[n,p,G]),v.useEffect(()=>{t&&A!=="admin"?T("admin"):!t&&!r&&A==="admin"&&T("voting")},[t,r,A]);const ft=v.useCallback(ee=>{localStorage.setItem("azureDevOpsAuthInProgress","true"),ee&&sessionStorage.setItem("oauth_action",ee),sessionStorage.getItem("oauth_return_path")||sessionStorage.setItem("oauth_return_path","/admin"),gZ()},[]),gt=v.useCallback(async ee=>{if(!ee.accessToken||!ee.refreshToken||!ee.tokenExpiresAt)throw new Error("Not authenticated");if(mZ(ee.tokenExpiresAt)){const Ce=await aZ(ee.refreshToken),ze=new Date(Date.now()+Ce.expiresIn*1e3).toISOString(),Be={...ee,accessToken:Ce.accessToken,tokenExpiresAt:ze};return n&&(await pl(n.id,Be),ie(Be)),Ce.accessToken}return ee.accessToken},[n]),Lt=v.useCallback(async()=>{if(!n)return[];const[ee,Ce]=await Promise.all([va(n.id),Ro(n.id)]);return ee.map(ze=>{const Je=Ce.filter(ct=>ct.feature_id===ze.id).map(ct=>({userId:ct.user_id,name:ct.user_name,email:ct.user_email,voteCount:ct.vote_count})),Oe=Je.reduce((ct,ht)=>ct+ht.voteCount,0);return{id:ze.id,title:ze.title,description:ze.description,epic:ze.epic,state:ze.state,areaPath:ze.area_path,tags:ze.tags||[],azureDevOpsId:ze.azure_devops_id,azureDevOpsUrl:ze.azure_devops_url,votes:Oe,voters:Je}})},[n]),_t=v.useCallback(async()=>{if(n)try{const ee=await CS(n.id);et(ee)}catch(ee){console.error("Error loading feature suggestions:",ee)}},[n]),nr=v.useCallback(async()=>{if(n)try{const ee=await qo(),Ce=new Date,ze=[];for(const Be of ee)if(!(Be.id===n.id||new Date(Be.start_date)<=Ce))try{await $x(Be.id)&&ze.push({id:Be.id,title:Be.title,startDate:Be.start_date})}catch{console.warn(`Session ${Be.id} no longer exists, skipping from future sessions list`)}kt(ze)}catch(ee){console.error("Error loading future sessions:",ee),kt([])}},[n]),Ze=v.useCallback(ee=>{et(Ce=>[ee,...Ce]),_t(),nr()},[_t,nr]),Ot=v.useCallback(async(ee,Ce)=>{await I$(ee,Ce),await _t()},[_t]),zt=v.useCallback(async ee=>{await D$(ee),await _t()},[_t]),Vt=v.useCallback(async(ee,Ce)=>{await $$(ee,Ce),await _t()},[_t]),hr=v.useCallback(async ee=>{await R$(ee);const Ce=await Lt();w(Ce),await _t()},[Lt,_t]);v.useEffect(()=>{async function ee(){if(n&&!(Pt.current&&rr.current===n.id)){rr.current=n.id,Pt.current=!0;try{_(!0);const[Ce,ze]=await Promise.all([va(n.id),Ro(n.id)]),Be=Ce.map(Oe=>{const ht=ze.filter(We=>We.feature_id===Oe.id).map(We=>({userId:We.user_id,name:We.user_name,email:We.user_email,voteCount:We.vote_count})),St=ht.reduce((We,Cr)=>We+Cr.voteCount,0);return{id:Oe.id,title:Oe.title,description:Oe.description,epic:Oe.epic,state:Oe.state,areaPath:Oe.area_path,tags:Oe.tags||[],azureDevOpsId:Oe.azure_devops_id,azureDevOpsUrl:Oe.azure_devops_url,votes:St,voters:ht}});w(Be),ne({title:n.title,goal:n.goal,votesPerUser:n.votes_per_user,useAutoVotes:n.use_auto_votes||!1,startDate:n.start_date,endDate:n.end_date,isActive:n.is_active,originalEndDate:n.original_end_date??void 0,endedEarlyBy:n.ended_early_by??void 0,endedEarlyReason:n.ended_early_reason??void 0,endedEarlyDetails:n.ended_early_details??void 0,reopenReason:n.reopen_reason??void 0,reopenDetails:n.reopen_details??void 0,reopenedBy:n.reopened_by??void 0,reopenedAt:n.reopened_at??void 0,productId:n.product_id??null,productName:n.product_name??null,product_id:n.product_id??null,product_name:n.product_name??null});const Je=await E$(n.id);ie(Je?{organization:Je.organization||"newmill",project:Je.project||"Product",accessToken:Je.access_token,refreshToken:Je.refresh_token,tokenExpiresAt:Je.token_expires_at,tenantId:Je.tenant_id,clientId:Je.client_id,enabled:Je.enabled,workItemType:Je.work_item_type||"Feature",query:Je.query,lastSyncTime:Je.last_sync_time}:{organization:"newmill",project:"Product",enabled:!1,workItemType:"Feature"});try{const Oe=await CS(n.id);et(Oe)}catch(Oe){console.error("Error loading feature suggestions:",Oe)}}catch(Ce){console.error("Error loading data:",Ce),w([])}finally{_(!1),Pt.current=!1}}}ee()},[n==null?void 0:n.id]),v.useEffect(()=>{async function ee(){const Ce=NC();if(W(Ce),I([]),Me([]),Ie([]),G.enabled&&G.accessToken&&G.project)try{const ze=await gt(G),Be={...G,accessToken:ze},[Je,Oe,ct,ht]=await Promise.all([cZ(Be).catch(St=>(console.error("Error loading Azure DevOps projects:",St),Ce)),bC(Be),xx(Be),wC(Be)]);W(Je.length>0?Je:Ce),I(Oe),Me(ct),Ie(ht)}catch(ze){console.error("Error loading filter options:",ze),W(Ce)}}ee()},[G.enabled,G.accessToken,G.project,gt]);const Zt=v.useCallback(async(ee,Ce)=>{if(!(!G.enabled||!G.accessToken))try{const ze=await gt(G),Be={...G,accessToken:ze},Je=ee?await HT(Be,ee):await bC(Be);I(Je)}catch(ze){console.error("Error loading states for work item type:",ze)}},[G,gt]),gn=v.useCallback(async ee=>{if(!G.enabled||!G.accessToken)return{types:[],states:[]};try{const Ce=await gt(G),ze={...G,accessToken:Ce};return await uZ(ze,ee)}catch(Ce){return console.error("Error fetching types and states for area path:",Ce),{types:[],states:[]}}},[G,gt]),Jt=v.useCallback(async ee=>{if(!G.enabled||!G.accessToken)return{types:[],areaPaths:[]};try{const Ce=await gt(G),ze={...G,accessToken:Ce},Be=await lZ(ze,ee);return Be.areaPaths.length>0&&Me(Be.areaPaths),Be}catch(Ce){return console.error("Error fetching types and area paths for states:",Ce),{types:[],areaPaths:[]}}},[G,gt]),mr=v.useCallback(async ee=>{if(!G.enabled||!G.accessToken)return{types:[],states:[],areaPaths:[]};try{const Ce=await gt(G),ze={...G,accessToken:Ce},Be=await dZ(ze,ee);return Be.states.length>0&&I(Be.states),Be.areaPaths.length>0&&Me(Be.areaPaths),Be}catch(Ce){return console.error("Error fetching types, states, and area paths for tags:",Ce),{types:[],states:[],areaPaths:[]}}},[G,gt]),or=v.useCallback(async(ee,Ce=[],ze=[])=>{if(!(!G.enabled||!G.accessToken))try{const Be=await gt(G),Je={...G,accessToken:Be},Oe=ee?await fZ(Je,ee,Ce,ze):await wC(Je);Ie(Oe)}catch(Be){console.error("Error loading tags for type, state, and area path:",Be)}},[G,gt]),En=v.useCallback(async(ee,Ce=[])=>{if(!(!G.enabled||!G.accessToken))try{const ze=await gt(G),Be={...G,accessToken:ze},Je=ee?await oZ(Be,ee,Ce):await xx(Be);Me(Je)}catch(ze){console.error("Error loading area paths for type and state:",ze)}},[G,gt]);v.useEffect(()=>{const ee=async()=>{const ze=IZ(U.startDate,U.endDate);if(U.isActive!==ze){const Be={...U,isActive:ze};ne(Be);try{n!=null&&n.id&&await _S(n.id,{title:Be.title,goal:Be.goal,votes_per_user:Be.votesPerUser,start_date:Be.startDate,end_date:Be.endDate,is_active:Be.isActive})}catch(Je){console.error("Error updating voting session status:",Je)}}};ee();const Ce=setInterval(ee,6e5);return()=>clearInterval(Ce)},[U,n==null?void 0:n.id]),v.useEffect(()=>{document.body.style.overflow="",document.body.style.position="",document.body.style.width="",A==="admin"&&(_t(),nr())},[A,_t,nr]),v.useEffect(()=>(document.body.style.overflow="",()=>{document.body.style.overflow=""}),[]);const zr=v.useCallback(async(ee=G)=>{if(!ee.organization||!ee.project||!n){$("Organization and project name are required");return}try{Ne(!0),$(null);const Ce=await gt(ee),ze={...ee,accessToken:Ce},Be=await jC(ze),Je=SC(Be);for(const We of Je){const Ut=(await va(n.id)).find(yn=>yn.azure_devops_id===We.azureDevOpsId),Wr=xh(We.description),Bt=od(Wr,300);Ut?await uy(Ut.id,{title:We.title,description:Bt,epic:We.epic||null,state:We.state,areaPath:We.areaPath,tags:We.tags,azure_devops_id:We.azureDevOpsId,azure_devops_url:We.azureDevOpsUrl}):await th({session_id:n.id,title:We.title,description:Bt,epic:We.epic||null,state:We.state,areaPath:We.areaPath,tags:We.tags,azure_devops_id:We.azureDevOpsId,azure_devops_url:We.azureDevOpsUrl})}const Oe=await va(n.id),ct=await Ro(n.id),ht=Oe.map(We=>{const Ut=ct.filter(Bt=>Bt.feature_id===We.id).map(Bt=>({userId:Bt.user_id,name:Bt.user_name,email:Bt.user_email,voteCount:Bt.vote_count})),Wr=Ut.reduce((Bt,yn)=>Bt+yn.voteCount,0);return{id:We.id,title:We.title,description:We.description,epic:We.epic,state:We.state,areaPath:We.area_path,tags:We.tags||[],azureDevOpsId:We.azure_devops_id,azureDevOpsUrl:We.azure_devops_url,votes:Wr,voters:Ut}});w(ht);const St={...ze,lastSyncTime:new Date().toISOString()};await pl(n.id,St),ie(St)}catch(Ce){console.error("Azure DevOps sync error:",Ce),Ce instanceof Error&&Ce.message==="Not authenticated"?($("Please authenticate with Azure DevOps"),ft()):$("Failed to fetch features from Azure DevOps. Please try reconnecting.")}finally{Ne(!1)}},[G,n,gt,ft]),lr=v.useCallback(async()=>{if(!G.organization||!G.project){$("Organization and project name are required");return}try{Ne(!0),$(null);const ee=await gt(G),Ce={...G,accessToken:ee},ze=await jC(Ce),Je=SC(ze).map(Oe=>({...Oe,description:od(xh(Oe.description),300)}));le(Je),De(!0)}catch(ee){console.error("Azure DevOps preview error:",ee),ee instanceof Error&&ee.message==="Not authenticated"?($("Please authenticate with Azure DevOps"),ft()):$("Failed to fetch features from Azure DevOps. Please try reconnecting.")}finally{Ne(!1)}},[G,gt,ft]),Gr=v.useCallback(async()=>{if(!(!xe||!n))try{Ne(!0);const ee=await va(n.id);for(const Oe of ee)await kS(Oe.id);for(const Oe of xe){const ct=xh(Oe.description),ht=od(ct,300);await th({session_id:n.id,title:Oe.title,description:ht,epic:Oe.epic||null,state:Oe.state,areaPath:Oe.areaPath,tags:Oe.tags,azure_devops_id:Oe.azureDevOpsId,azure_devops_url:Oe.azureDevOpsUrl})}const Ce=await va(n.id),ze=await Ro(n.id),Be=Ce.map(Oe=>{const ht=ze.filter(We=>We.feature_id===Oe.id).map(We=>({userId:We.user_id,name:We.user_name,email:We.user_email,voteCount:We.vote_count})),St=ht.reduce((We,Cr)=>We+Cr.voteCount,0);return{id:Oe.id,title:Oe.title,description:Oe.description,epic:Oe.epic,state:Oe.state,areaPath:Oe.area_path,tags:Oe.tags||[],azureDevOpsId:Oe.azure_devops_id,azureDevOpsUrl:Oe.azure_devops_url,votes:St,voters:ht}});w(Be);const Je={...G,lastSyncTime:new Date().toISOString()};await pl(n.id,Je),ie(Je)}catch(ee){console.error("Azure DevOps replace all error:",ee),$("Failed to replace all features from Azure DevOps.")}finally{Ne(!1),le(null)}},[xe,n,G]),Dt=v.useCallback(async ee=>{if(!(!ee||ee.length===0||!n))try{Ne(!0);for(const Oe of ee){const ht=(await va(n.id)).find(Cr=>Cr.azure_devops_id===Oe.azureDevOpsId),St=xh(Oe.description),We=od(St,300);ht?await uy(ht.id,{title:Oe.title,description:We,epic:Oe.epic||null,state:Oe.state,areaPath:Oe.areaPath,tags:Oe.tags,azure_devops_id:Oe.azureDevOpsId,azure_devops_url:Oe.azureDevOpsUrl}):await th({session_id:n.id,title:Oe.title,description:We,epic:Oe.epic||null,state:Oe.state,areaPath:Oe.areaPath,tags:Oe.tags,azure_devops_id:Oe.azureDevOpsId,azure_devops_url:Oe.azureDevOpsUrl})}const Ce=await va(n.id),ze=await Ro(n.id),Be=Ce.map(Oe=>{const ht=ze.filter(We=>We.feature_id===Oe.id).map(We=>({userId:We.user_id,name:We.user_name,email:We.user_email,voteCount:We.vote_count})),St=ht.reduce((We,Cr)=>We+Cr.voteCount,0);return{id:Oe.id,title:Oe.title,description:Oe.description,epic:Oe.epic,state:Oe.state,areaPath:Oe.area_path,tags:Oe.tags||[],azureDevOpsId:Oe.azure_devops_id,azureDevOpsUrl:Oe.azure_devops_url,votes:St,voters:ht}});w(Be);const Je={...G,lastSyncTime:new Date().toISOString()};await pl(n.id,Je),ie(Je)}catch(Ce){console.error("Azure DevOps sync error:",Ce),$("Failed to sync features from Azure DevOps.")}finally{Ne(!1),le(null)}},[xe,n,G]),_r=v.useCallback(async()=>{if(n)try{const ee={organization:G.organization||"newmill",project:G.project||"Product",workItemType:G.workItemType||"Feature",query:G.query,accessToken:void 0,refreshToken:void 0,tokenExpiresAt:void 0,enabled:!1};await pl(n.id,ee),ie(ee),$(null)}catch(ee){console.error("Error disconnecting Azure DevOps:",ee),$("Failed to disconnect from Azure DevOps")}},[G,n]);v.useEffect(()=>{(async()=>{const Ce=sessionStorage.getItem("oauth_action");if(Ce&&!(!G.enabled||!G.accessToken))try{Ce==="preview"?await lr():Ce==="sync"&&await zr()}finally{sessionStorage.removeItem("oauth_action")}})()},[G.enabled,G.accessToken,lr,zr]);const Ur=v.useCallback(()=>{p("/admin")},[p]),Sr=v.useCallback(()=>{if(t){p("/vote");return}z(!1),Yt(d?"system":"session"),T("voting")},[d,t,p]),pr=v.useCallback(()=>{z(!0),Yt("session"),t?A!=="admin"&&T("admin"):A!=="voting"&&T("voting")},[t,A]),Zr=v.useCallback(()=>{d&&(z(!0),Yt("system"),t?A!=="admin"&&T("admin"):A!=="voting"&&T("voting"))},[A,d,t]),Ss=v.useCallback(async ee=>{if(n)try{const Ce=await th({session_id:n.id,title:ee.title,description:ee.description,epic:ee.epic});w(ze=>[...ze,{id:Ce.id,title:Ce.title,description:Ce.description,epic:Ce.epic,votes:0,voters:[]}]),X(!1)}catch(Ce){console.error("Error adding feature:",Ce),alert("Failed to add feature")}},[n]),es=v.useCallback(async ee=>{try{await uy(ee.id,{title:ee.title,description:ee.description,epic:ee.epic}),w(Ce=>Ce.map(ze=>ze.id===ee.id?ee:ze)),H(null)}catch(Ce){console.error("Error updating feature:",Ce),alert("Failed to update feature")}},[]),Ns=v.useCallback(async ee=>{try{await kS(ee),w(Ce=>Ce.filter(ze=>ze.id!==ee))}catch(Ce){console.error("Error deleting feature:",Ce),alert("Failed to delete feature")}},[]),Ir=v.useCallback(ee=>{Ae(Ce=>({...Ce,showReset:!0,showResetAll:!1,showDeleteSession:!1,targetId:ee}))},[]),Rs=v.useCallback(async()=>{const ee=we.targetId;if(!(!ee||!n))try{await b$(n.id,ee);const Ce=await Lt();w(Ce)}catch(Ce){console.error("Error resetting votes:",Ce),alert("Failed to reset votes")}},[we.targetId,n,Lt]),ts=v.useCallback(()=>{Ae(ee=>({...ee,showReset:!1,showResetAll:!0,showDeleteSession:!1,targetId:null}))},[]),Nr=v.useCallback(()=>{Ae(ee=>({...ee,showReset:!1,showResetAll:!1,showDeleteSession:!0,targetId:null}))},[]),on=v.useCallback(async()=>{if(n){It(!0);try{await x$(n.id),l(null);try{localStorage.removeItem("voting_system_current_session")}catch{}await u(),p("/sessions",{replace:!0})}catch(ee){console.error("Error deleting session:",ee),alert("Failed to delete session. Please try again.")}finally{It(!1),Ae(ee=>({...ee,showDeleteSession:!1}))}}},[n,p,l,u]),Dr=v.useCallback(async()=>{if(n)try{await C$(n.id);const ee=await Lt();w(ee)}catch(ee){console.error("Error resetting all votes:",ee),alert("Failed to reset all votes")}},[n,Lt]),Br=v.useCallback((ee,Ce)=>{if(!s||!U.isActive)return;const ze=R[ee]||0;let Be=ze;if(Ce)if(de<Ht)Be=ze+1;else return;else if(ze>0)Be=ze-1;else return;re(Je=>{const Oe={...Je};return Be===0?delete Oe[ee]:Oe[ee]=Be,Oe}),Fe(Je=>Ce?Je+1:Je-1)},[s,R,de,U.isActive,Ht]),gr=v.useCallback(async()=>{if(!(!s||!U.isActive||!n)&&!(de<Ht))try{for(const[Be,Je]of Object.entries(R))Je>0&&await k$({session_id:n.id,feature_id:Be,user_id:s.id,user_name:s.name,user_email:s.email,vote_count:Je});const ee=await va(n.id),Ce=await Ro(n.id),ze=ee.map(Be=>{const Oe=Ce.filter(ht=>ht.feature_id===Be.id).map(ht=>({userId:ht.user_id,name:ht.user_name,email:ht.user_email,voteCount:ht.vote_count})),ct=Oe.reduce((ht,St)=>ht+St.voteCount,0);return{id:Be.id,title:Be.title,description:Be.description,epic:Be.epic,state:Be.state,areaPath:Be.area_path,tags:Be.tags||[],azureDevOpsId:Be.azure_devops_id,azureDevOpsUrl:Be.azure_devops_url,votes:ct,voters:Oe}});w(ze),T("thankyou")}catch(ee){console.error("Error submitting votes:",ee),alert("Failed to submit votes. Please try again.")}},[s,n,de,R,U.isActive,Ht]),An=v.useCallback(async ee=>{var ct,ht;const Ce={title:ee.title,goal:ee.goal,votes_per_user:ee.votesPerUser,start_date:ee.startDate,end_date:ee.endDate,is_active:ee.isActive,use_auto_votes:ee.useAutoVotes,product_id:ee.product_id??null,product_name:null},ze={},Be=(St,We)=>{St!==void 0&&(ze[We]=St)};Be(ee.originalEndDate,"original_end_date"),Be(ee.endedEarlyBy,"ended_early_by"),Be(ee.endedEarlyReason,"ended_early_reason"),Be(ee.endedEarlyDetails,"ended_early_details"),Be(ee.reopenReason,"reopen_reason"),Be(ee.reopenDetails,"reopen_details"),Be(ee.reopenedBy,"reopened_by"),Be(ee.reopenedAt,"reopened_at");const Je={...Ce,...ze},Oe=async St=>{n!=null&&n.id?await _S(n.id,St):await P$(St)};try{await Oe(Je),ne(ee),n!=null&&n.id&&l({...n,title:Ce.title??n.title,goal:Ce.goal??n.goal,votes_per_user:Ce.votes_per_user??n.votes_per_user,use_auto_votes:Ce.use_auto_votes??n.use_auto_votes,start_date:Ce.start_date??n.start_date,end_date:Ce.end_date??n.end_date,is_active:Ce.is_active??n.is_active,product_id:Ce.product_id!==void 0?Ce.product_id??null:ee.product_id??n.product_id??null,product_name:null,original_end_date:ze.original_end_date??n.original_end_date??null,ended_early_by:ze.ended_early_by??n.ended_early_by??null,ended_early_reason:ze.ended_early_reason??n.ended_early_reason??null,ended_early_details:ze.ended_early_details??n.ended_early_details??null,reopen_reason:ze.reopen_reason??n.reopen_reason??null,reopen_details:ze.reopen_details??n.reopen_details??null,reopened_by:ze.reopened_by??n.reopened_by??null,reopened_at:ze.reopened_at??n.reopened_at??null})}catch(St){const We=((ht=(ct=St==null?void 0:St.message)==null?void 0:ct.toLowerCase)==null?void 0:ht.call(ct))??"",Cr=We.includes("column")&&(We.includes("reopen_reason")||We.includes("reopen_details")||We.includes("reopened_by")||We.includes("reopened_at")||We.includes("original_end_date")||We.includes("ended_early_by")||We.includes("ended_early_reason")||We.includes("ended_early_details")),Ut=We.includes("product_name")||We.includes('"product_name"'),Wr=We.includes("product_id")||We.includes('"product_id"');if(Cr||Ut||Wr){console.warn("[FeatureVoting] Voting session metadata/product columns missing, falling back to basic update.",St);try{const Bt={...Ce};Ut&&delete Bt.product_name,Wr&&delete Bt.product_id,await Oe(Bt),ne(ee),n!=null&&n.id&&l({...n,title:Bt.title??n.title,goal:Bt.goal??n.goal,votes_per_user:Bt.votes_per_user??n.votes_per_user,use_auto_votes:Bt.use_auto_votes??n.use_auto_votes,start_date:Bt.start_date??n.start_date,end_date:Bt.end_date??n.end_date,is_active:Bt.is_active??n.is_active,product_id:Bt.product_id!==void 0?Bt.product_id??null:ee.productId??n.product_id??null,product_name:null,original_end_date:ee.originalEndDate??n.original_end_date??null,ended_early_by:ee.endedEarlyBy??n.ended_early_by??null,ended_early_reason:ee.endedEarlyReason??n.ended_early_reason??null,ended_early_details:ee.endedEarlyDetails??n.ended_early_details??null,reopen_reason:ee.reopenReason??n.reopen_reason??null,reopen_details:ee.reopenDetails??n.reopen_details??null,reopened_by:ee.reopenedBy??n.reopened_by??null,reopened_at:ee.reopenedAt??n.reopened_at??null})}catch(Bt){console.error("Error updating voting session (fallback):",Bt),alert("Failed to update voting session settings")}}else console.error("Error updating voting session:",St),alert("Failed to update voting session settings")}},[n,l]),bi=v.useCallback(async ee=>{if(n){ie(ee);try{await pl(n.id,{organization:ee.organization,project:ee.project,accessToken:ee.accessToken,refreshToken:ee.refreshToken,tokenExpiresAt:ee.tokenExpiresAt,tenantId:ee.tenantId,clientId:ee.clientId,enabled:ee.enabled,workItemType:ee.workItemType,query:ee.query,lastSyncTime:ee.lastSyncTime})}catch(Ce){console.error("Error saving config:",Ce)}}},[n]),sr=v.useCallback(()=>{n?p("/results"):T("results")},[n,p]),ps=v.useMemo(()=>{if(t)return i.jsx(AZ,{features:j,onAddFeature:Ss,onUpdateFeature:es,onDeleteFeature:Ns,onShowResults:sr,onRequestDeleteSession:Nr,isDeletingSession:Ke,showAddForm:fe,setShowAddForm:X,editingFeature:J,setEditingFeature:H,onLogout:y,onShowVoterView:Sr,votingSession:U,azureDevOpsConfig:G,onUpdateAzureDevOpsConfig:bi,onPreviewAzureDevOpsFeatures:lr,onDisconnectAzureDevOps:_r,isFetchingAzureDevOps:je,azureFetchError:Z,onInitiateOAuth:ft,availableStates:se,availableAreaPaths:B,availableTags:Se,previewFeatures:xe,showPreviewModal:M,setShowPreviewModal:De,onConfirmSync:Dt,onReplaceAll:Gr,onUpdateVotingSession:An,onFetchStatesForType:Zt,onFetchAreaPathsForTypeAndState:En,onFetchTagsForTypeStateAndAreaPath:or,onFetchTypesAndStatesForAreaPath:gn,onFetchTypesAndStatesForTags:mr,onFetchTypesAndAreaPathsForStates:Jt,suggestedFeatures:Pe,otherSessions:rt,onPromoteSuggestion:hr,onMoveSuggestion:Vt,onEditSuggestion:Ot,onDeleteSuggestion:zt,adminPerspective:lt,projectOptions:te});switch(A==="admin"&&!t?"voting":A){case"voting":return i.jsx(IC,{features:j,currentUser:s,pendingVotes:R,pendingUsedVotes:de,onVote:Br,onSubmitVotes:gr,onToggleAdmin:Ur,isAdmin:P,votingSession:U,navigate:p,effectiveVotesPerUser:Ht,sessionId:(n==null?void 0:n.id)||"",onLogout:y,onSuggestionSubmitted:Ze,isSystemAdmin:d,isSessionAdmin:m,isStakeholder:f});case"results":return i.jsx(LZ,{features:j,onResetVotes:Ir,onResetAllVotes:ts,onBack:r?()=>p("../admin"):()=>T("admin"),showVotersList:K,setShowVotersList:ae,votingSession:U,effectiveVotesPerUser:Ht,onLogout:y});case"thankyou":return i.jsx(zZ,{navigate:p,votingSession:U});default:return i.jsx(IC,{features:j,currentUser:s,pendingVotes:R,pendingUsedVotes:de,onVote:Br,onSubmitVotes:gr,onToggleAdmin:Ur,isAdmin:P,votingSession:U,navigate:p,effectiveVotesPerUser:Ht,sessionId:(n==null?void 0:n.id)||"",onLogout:y,onSuggestionSubmitted:Ze,isSystemAdmin:d,isSessionAdmin:m,isStakeholder:f})}},[A,j,s,R,de,Br,gr,Ur,P,U,Ir,ts,K,ae,Ss,es,Ns,fe,X,J,H,G,bi,zr,lr,_r,je,Z,ft,xe,M,De,Dt,p,Ht,t,se,B,Se,Zt,n,Sr,Ze,Pe,rt,hr,Vt,Ot,zt,lt,te,sr]);return n?S?i.jsx("div",{className:"min-h-screen w-full bg-gray-50 flex items-center justify-center",children:i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-[#2d4660] mx-auto mb-4"}),i.jsx("p",{className:"text-gray-600",children:"Loading..."})]})}):!P&&A!=="voting"&&A!=="thankyou"?i.jsx("div",{className:"min-h-screen w-full bg-gray-50 flex items-center justify-center",children:i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-[#2d4660] mx-auto mb-4"}),i.jsx("p",{className:"text-gray-600",children:"Loading voting experience..."})]})}):i.jsxs("div",{className:"w-full bg-gray-50 text-gray-900 font-sans min-h-screen flex flex-col",children:[i.jsx("div",{className:"flex-grow",children:ps}),i.jsx(YT,{currentRole:P?lt==="system"?"system-admin":"session-admin":"stakeholder",onSelectStakeholder:Sr,onSelectSessionAdmin:P||d?pr:void 0,onSelectSystemAdmin:d?Zr:void 0,showRoleToggle:!0}),i.jsx(Ah,{show:we.showReset,title:"Reset Votes",message:"Are you sure you want to reset all votes for this feature? This will remove all voting data for this feature.",onConfirm:Rs,onCancel:()=>Ae(ee=>({...ee,showReset:!1})),confirmText:"Reset",type:"reset"}),i.jsx(Ah,{show:we.showResetAll,title:"Reset All Votes",message:"Are you sure you want to reset all votes for all features? This will remove all voting data and cannot be undone.",onConfirm:Dr,onCancel:()=>Ae(ee=>({...ee,showResetAll:!1})),confirmText:"Reset All",type:"reset"}),i.jsx(Ah,{show:we.showDeleteSession,title:"Delete Voting Session",message:"This will permanently delete the current voting session for all admins and stakeholders. Votes, notes, and settings for this session will be removed. This action cannot be undone.",onConfirm:on,onCancel:()=>Ae(ee=>({...ee,showDeleteSession:!1})),confirmText:Ke?"Deleting":"Delete Session",type:"delete"})]}):i.jsx("div",{className:"min-h-screen w-full bg-gray-50 flex items-center justify-center",children:i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-[#2d4660] mx-auto mb-4"}),i.jsx("p",{className:"text-gray-600",children:"Loading session..."})]})})}async function DC(e,t,r){const s=`${e}:${t}:${r}:default-secret-change-in-production`,l=new TextEncoder().encode(s),u=await crypto.subtle.digest("SHA-256",l);return Array.from(new Uint8Array(u)).map(f=>f.toString(16).padStart(2,"0")).join("").substring(0,32)}function BZ(){const[e,t]=v.useState(""),[r,n]=v.useState(""),[s,a]=v.useState(!1),[l,u]=v.useState(""),[d,m]=v.useState(!1),[f,p]=v.useState(null),{currentUser:y,setCurrentUser:x,setCurrentSession:j}=Ea(),w=Js(),[S]=Cx();v.useEffect(()=>{const C=sessionStorage.getItem("oauth_error");C&&(u(C),sessionStorage.removeItem("oauth_error"));const A=S.get("error"),T=S.get("error_description"),P=S.get("error_code");if(A){const z=T?decodeURIComponent(T):"An authentication error occurred.";A==="invalid_request"&&z.includes("AADSTS9002325")?u('Azure AD authentication requires PKCE. Please ensure your Azure AD app is configured correctly. The redirect URI must be registered under the "Web" platform in Azure AD.'):P==="unexpected_failure"&&z.includes("email")?u("Azure AD did not return your email address. Please ensure your Azure AD app has the correct API permissions (User.Read or email) and that your account has an email address."):u(`Authentication failed: ${z}`),w("/login",{replace:!0})}},[S,w]),v.useEffect(()=>{const C=S.get("token"),A=S.get("action"),T=S.get("email"),P=S.get("product");C&&A&&T&&P&&(A==="grant-admin"||A==="grant-stakeholder")&&(async()=>{var J,H;try{a(!0),u("");const X=`${_e.supabaseUrl}/functions/v1/grant-access`;let K;try{K=await fetch(X,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${_e.supabaseKey}`},body:JSON.stringify({token:C,action:A,email:T,productId:P})})}catch(Z){throw(J=Z.message)!=null&&J.includes("CORS")||(H=Z.message)!=null&&H.includes("Failed to fetch")?new Error("The grant access function is not available. Please ensure the Edge Function is deployed. Error: "+Z.message):Z}if(!K.ok){let Z="Failed to grant access";try{Z=(await K.json()).error||Z}catch{Z=`Server returned ${K.status}: ${K.statusText}`}throw new Error(Z)}const ae=await K.json(),U=T.split("@")[0].replace(/\./g," "),ne=ae.productName||"the product",G=A==="grant-admin"?"Session Admin":"Stakeholder";let ie=U;try{const Z=await vE(T);Z&&(ie=Z.name)}catch{}const te=window.location.pathname.startsWith("/feature-voting-app")?"/feature-voting-app":"",W=`${window.location.origin}${te}/login`,se="https://dcchoffman.github.io/feature-voting-app/New-Millennium-color-logo1.png",B=`
<table width="100%" cellpadding="0" cellspacing="0" border="0" style="background-color: #f9fafb; font-family: Arial, sans-serif;">
  <tr>
    <td align="center" style="padding: 48px 20px;">
      <div style="position: relative; display: inline-block;">
        <div style="position: absolute; bottom: 0; left: 0; width: 300px; height: 200px; background-image: url('https://dcchoffman.github.io/feature-voting-app/bottom-left-curve.png'); background-position: bottom left; background-repeat: no-repeat; background-size: contain; opacity: 0.2; z-index: 0; pointer-events: none;"></div>
        <table width="600" cellpadding="0" cellspacing="0" border="0" style="background-color: #ffffff; border-radius: 8px; box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05); position: relative; z-index: 1;">
        <!-- Logo Header -->
        <tr>
          <td style="background-color: #ffffff; padding: 32px 40px 24px 40px; text-align: center;">
            <img src="${se}" alt="New Millennium Building Systems" width="300" height="96" style="height: 96px; width: auto; max-width: 300px; display: block; margin: 0 auto; border: 0;" />
            <div style="font-size: 24px; font-weight: bold; color: #2d4660; margin-top: 16px;">Access Granted</div>
          </td>
        </tr>
        
        <!-- Main Content -->
        <tr>
          <td style="background-color: #ffffff; padding: 40px;">
            <p style="margin: 0 0 16px 0; font-size: 16px; color: #333;">Hello ${ie},</p>
            <p style="margin: 0 0 24px 0; font-size: 16px; color: #333; line-height: 1.6;">Your access request has been approved! You have been granted <strong style="color: #2d4660;">${G}</strong> access to all voting sessions for <strong style="color: #2d4660;">${ne}</strong>.</p>
            
            <p style="margin: 24px 0; font-size: 16px; color: #333; line-height: 1.6;">You can now log in to the Feature Voting System to access your sessions.</p>
            
            <!-- Login Button -->
            <table width="100%" cellpadding="0" cellspacing="0" border="0" style="margin: 32px 0;">
              <tr>
                <td align="center">
                  <a href="${W}" style="display: inline-block; padding: 12px 24px; background-color: #2d4660; color: white; text-decoration: none; border-radius: 6px; font-weight: 500; font-size: 14px; box-shadow: 0 1px 2px 0 rgba(0, 0, 0, 0.05);">Log In to Feature Voting System</a>
                </td>
              </tr>
            </table>
          </td>
        </tr>
        
        <!-- Footer -->
        <tr>
          <td style="background-color: #f9fafb; padding: 20px; text-align: center; border-top: 1px solid #e5e7eb; font-size: 12px; color: #6b7280; position: relative;">
            <p style="margin: 0 0 8px 0;">This is an automated message from the Feature Voting System.</p>
            <p style="margin: 0; color: #9ca3af;"> ${new Date().getFullYear()} New Millennium Building Systems</p>
          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>`,Me=`
Access Granted - Feature Voting System

Hello ${ie},

Your access request has been approved! You have been granted ${G} access to all voting sessions for ${ne}.

You can now log in to the Feature Voting System to access your sessions.

Login: ${W}

This is an automated message from the Feature Voting System.
          `;let Se=[];try{const Z=await NE(P);Se=Array.from(new Set(Z.map($=>{var xe;return(xe=$.user)==null?void 0:xe.email}).filter($=>!!$).map($=>$.toLowerCase())))}catch(Z){console.error("Error getting session admins for product:",Z),y!=null&&y.email&&(Se=[y.email.toLowerCase()])}const Ie=Se.length>0?`
<table width="100%" cellpadding="0" cellspacing="0" border="0" style="background-color: #f9fafb; font-family: Arial, sans-serif;">
  <tr>
    <td align="center" style="padding: 48px 20px;">
      <table width="600" cellpadding="0" cellspacing="0" border="0" style="background-color: #ffffff; border-radius: 8px; box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);">
        <!-- Logo Header -->
        <tr>
          <td style="background-color: #ffffff; padding: 32px 40px 24px 40px; text-align: center;">
            <img src="${se}" alt="New Millennium Building Systems" width="300" height="96" style="height: 96px; width: auto; max-width: 300px; display: block; margin: 0 auto; border: 0;" />
            <div style="font-size: 24px; font-weight: bold; color: #2d4660; margin-top: 16px;">Access Granted Confirmation</div>
          </td>
        </tr>
        
        <!-- Main Content -->
        <tr>
          <td style="background-color: #ffffff; padding: 40px;">
            <p style="margin: 0 0 16px 0; font-size: 16px; color: #333;">Hello,</p>
            <p style="margin: 0 0 24px 0; font-size: 16px; color: #333; line-height: 1.6;">You have successfully granted <strong style="color: #2d4660;">${G}</strong> access to <strong style="color: #2d4660;">${ie}</strong> (${T}) for all sessions in <strong style="color: #2d4660;">${ne}</strong>.</p>
            
            <!-- Status Box -->
            <table width="100%" cellpadding="0" cellspacing="0" border="0" style="background-color: #f0fdf4; border-left: 4px solid #22c55e; border-radius: 4px; margin: 20px 0;">
              <tr>
                <td style="padding: 20px;">
                  <div style="margin: 10px 0;">
                    <strong style="color: #166534; font-size: 14px;"> Access Granted</strong>
                  </div>
                  <div style="margin: 10px 0; color: #166534; font-size: 13px;">
                    Role: <strong>${G}</strong>
                  </div>
                  <div style="margin: 10px 0; color: #166534; font-size: 13px;">
                    User: <strong>${ie}</strong> (${T})
                  </div>
                  <div style="margin: 10px 0; color: #166534; font-size: 13px;">
                    Product: <strong>${ne}</strong>
                  </div>
                  <div style="margin: 10px 0; color: #166534; font-size: 13px;">
                    Status: <strong>Email notification sent to requester</strong>
                  </div>
                </td>
              </tr>
            </table>

            <p style="margin: 24px 0; font-size: 16px; color: #333; line-height: 1.6;">The requester has been notified and can now access all voting sessions for this product.</p>
            
            <!-- Go to System Button -->
            <table width="100%" cellpadding="0" cellspacing="0" border="0" style="margin: 32px 0;">
              <tr>
                <td align="center">
                  <a href="${W}" style="display: inline-block; padding: 12px 24px; background-color: #2d4660; color: white; text-decoration: none; border-radius: 6px; font-weight: 500; font-size: 14px; box-shadow: 0 1px 2px 0 rgba(0, 0, 0, 0.05);">Go to Feature Voting System</a>
                </td>
              </tr>
            </table>
          </td>
        </tr>
        
        <!-- Footer -->
        <tr>
          <td style="background-color: #f9fafb; padding: 20px; text-align: center; border-top: 1px solid #e5e7eb; font-size: 12px; color: #6b7280;">
            <p style="margin: 0 0 8px 0;">This is an automated message from the Feature Voting System.</p>
            <p style="margin: 0; color: #9ca3af;"> ${new Date().getFullYear()} New Millennium Building Systems</p>
          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>`:null,je=Se.length>0?`
Access Granted Confirmation - Feature Voting System

Hello,

You have successfully granted ${G} access to ${ie} (${T}) for all sessions in ${ne}.

Status: Access Granted
Role: ${G}
User: ${ie} (${T})
Product: ${ne}
Email notification sent to requester: Yes

The requester has been notified and can now access all voting sessions for this product.

Login: ${W}

This is an automated message from the Feature Voting System.
          `:null,Ne=[Ho({to:T,subject:`Access Granted - ${ne} - Feature Voting System`,text:Me,html:B})];Se.length>0&&Ie&&je&&Se.forEach(Z=>{Ne.push(Ho({to:Z,subject:`Access Granted: ${ie} - ${ne} - Feature Voting System`,text:je,html:Ie}))});try{await Promise.all(Ne)}catch(Z){console.error("Error sending emails:",Z)}p({roleName:G,productName:ne,requesterName:ie,requesterEmail:T}),w("/login",{replace:!0})}catch(fe){console.error("Error granting access:",fe),u(fe.message||"Failed to grant access. Please try again."),w("/login",{replace:!0})}finally{a(!1)}})()},[S,w]);const _=async C=>{console.log("[LoginScreen]  handleLogin called!",{email:e,name:r}),C.preventDefault(),console.log("[LoginScreen] Form prevented default"),u(""),a(!0),console.log("[LoginScreen] Set loading state");try{console.log("[LoginScreen] Starting login process..."),console.log("[LoginScreen] Getting or creating user...");const A=await Nl(e.trim().toLowerCase(),r.trim());console.log("[LoginScreen] User created/retrieved:",A),x(A);const T=S.get("session");if(T){console.log("[LoginScreen] Session code found, loading session...");const P=await v$(T);if(P){j(P),console.log("[LoginScreen] Checking user roles...");const[z,J,H]=await Promise.all([Ri(A.id),Rm(P.id,A.id),Mx(P.id,A.email)]);if(z||J)w("/admin");else if(H)w("/vote");else{u("You are not authorized to access this voting session."),a(!1);return}}else{u("Invalid session code."),a(!1);return}}else console.log("[LoginScreen] No session code, navigating to /sessions"),w("/sessions")}catch(A){console.error("[LoginScreen] Login error:",A),u(`Failed to log in: ${A instanceof Error?A.message:"Unknown error"}. Please try again.`),a(!1)}},E=async()=>{u(""),a(!0);try{const C=window.location.pathname.startsWith("/feature-voting-app")?"/feature-voting-app":"",A=`${window.location.origin}${C}/sessions`,{error:T}=await _e.auth.signInWithOAuth({provider:"azure",options:{redirectTo:A,scopes:"email openid profile User.ReadBasic.All",queryParams:{redirect_to:A}}});T&&(u("Failed to sign in with Azure AD. Please try again."),a(!1))}catch(C){console.error("Azure login error:",C),u("Failed to sign in with Azure AD. Please try again."),a(!1)}};return i.jsxs("div",{className:"min-h-screen bg-gray-50 flex flex-col justify-center py-12 sm:px-6 lg:px-8",children:[i.jsx("div",{className:"sm:mx-auto sm:w-full sm:max-w-md",children:i.jsxs("div",{className:"bg-white shadow-lg sm:rounded-lg overflow-hidden relative z-10",children:[i.jsxs("div",{className:"relative",children:[i.jsx("div",{className:"px-10 pt-8 pb-6 text-center",children:i.jsx("img",{src:vi,alt:"New Millennium Building Systems Logo",className:"mx-auto h-24 w-auto"})}),i.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-12 pointer-events-none",style:{background:"linear-gradient(to bottom, transparent, rgba(255, 255, 255, 0.8), rgba(255, 255, 255, 1))"}})]}),i.jsxs("div",{className:"px-4 sm:px-10 pb-8",children:[i.jsxs("div",{className:"text-center mb-6",children:[i.jsx("h2",{className:"text-3xl font-bold text-[#2d4660]",children:"Feature Voting System"}),i.jsx("p",{className:"mt-2 text-sm text-gray-600",children:"Sign in to access your voting sessions"})]}),i.jsxs("form",{onSubmit:_,className:"space-y-6",children:[i.jsxs("div",{children:[i.jsx("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700",children:"Full Name"}),i.jsx("div",{className:"mt-1",children:i.jsx("input",{id:"name",name:"name",type:"text",autoComplete:"name",required:!0,value:r,onChange:C=>n(C.target.value),"data-lpignore":"true","data-form-type":"other",className:"appearance-none block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-[#2d4660] focus:border-[#2d4660]",placeholder:"John Doe"})})]}),i.jsxs("div",{children:[i.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700",children:"Email Address"}),i.jsx("div",{className:"mt-1",children:i.jsx("input",{id:"email",name:"email",type:"email",autoComplete:"email",required:!0,value:e,onChange:C=>t(C.target.value),"data-lpignore":"true","data-form-type":"other",className:"appearance-none block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-[#2d4660] focus:border-[#2d4660]",placeholder:"your.email@company.com"})})]}),l&&i.jsx("div",{className:"rounded-md bg-red-50 p-4",children:i.jsx("div",{className:"flex",children:i.jsx("div",{className:"ml-3",children:i.jsx("h3",{className:"text-sm font-medium text-red-800",children:l})})})}),i.jsx("div",{children:i.jsx("button",{type:"submit",disabled:s,className:"w-full flex justify-center items-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-[#2d4660] hover:bg-[#1d3a53] focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-[#2d4660] disabled:opacity-50 disabled:cursor-not-allowed",children:s?i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Signing in..."]}):i.jsxs(i.Fragment,{children:[i.jsx(pF,{className:"h-4 w-4 mr-2"}),"Sign In"]})})})]}),i.jsx("div",{className:"mt-4",children:i.jsx("button",{type:"button",onClick:E,disabled:s,className:"microsoft-signin-button",style:{width:"100%",height:"41px",display:"flex",alignItems:"center",justifyContent:"center",paddingLeft:"12px",paddingRight:"12px",cursor:s?"not-allowed":"pointer",opacity:s?.5:1},onMouseEnter:C=>{s||(C.currentTarget.style.backgroundColor="#F5F5F5")},onMouseLeave:C=>{s||(C.currentTarget.style.backgroundColor="#FFFFFF")},children:s?i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2",style:{borderColor:"#5E5E5E",marginRight:"12px"}}),i.jsx("span",{style:{color:"#5E5E5E"},children:"Signing in..."})]}):i.jsxs(i.Fragment,{children:[i.jsx("img",{src:KF,alt:"Microsoft",style:{width:"21px",height:"21px",marginRight:"12px",flexShrink:0}}),i.jsx("span",{style:{color:"#5E5E5E",fontFamily:'"Segoe UI", system-ui, -apple-system, BlinkMacSystemFont, "Roboto", "Helvetica Neue", Arial, sans-serif',fontSize:"15px",fontWeight:600},children:"Sign in with Microsoft"})]})})}),i.jsxs("div",{className:"mt-6",children:[i.jsxs("div",{className:"relative",children:[i.jsx("div",{className:"absolute inset-0 flex items-center",children:i.jsx("div",{className:"w-full border-t border-gray-300"})}),i.jsx("div",{className:"relative flex justify-center text-sm",children:i.jsx("span",{className:"px-2 bg-white text-gray-500",children:"No registration required"})})]}),i.jsxs("div",{className:"mt-6 text-center text-xs text-gray-500",children:[i.jsx("p",{children:"Simply enter your name and email to access"}),i.jsx("p",{children:"voting sessions you've been invited to"})]}),i.jsx("div",{className:"mt-4",children:i.jsx("button",{type:"button",onClick:()=>m(!0),className:"w-full text-sm text-[#2d4660] hover:text-[#1d3a53] underline",children:"Request Access"})})]})]})]})}),i.jsx(WZ,{isOpen:d,onClose:pt.useCallback(()=>m(!1),[])}),f&&i.jsx(fn,{isOpen:!0,onClose:()=>p(null),title:"",maxWidth:"max-w-md",hideHeader:!0,hideCloseButton:!1,children:i.jsxs("div",{className:"text-center pb-6",children:[i.jsx(jr,{className:"h-16 w-16 text-green-600 mx-auto mb-4"}),i.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Access Granted Successfully!"}),i.jsxs("p",{className:"text-sm text-gray-600 mb-1",children:["Successfully granted ",i.jsx("span",{className:"font-semibold text-green-700",children:f.roleName})," access to"]}),i.jsx("p",{className:"text-base font-semibold text-gray-900 mb-1",children:f.requesterName}),i.jsx("p",{className:"text-xs text-gray-500 mb-3",children:f.requesterEmail}),i.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"for all sessions in"}),i.jsx("p",{className:"text-lg font-semibold text-green-700 mb-4",children:f.productName}),i.jsx("p",{className:"text-sm text-gray-600",children:"Emails have been sent to both the requester and admin."})]})})]})}const WZ=pt.memo(function({isOpen:t,onClose:r}){const[n,s]=v.useState(""),[a,l]=v.useState(""),[u,d]=v.useState(""),[m,f]=v.useState([]),[p,y]=v.useState(!1),[x,j]=v.useState(!1),[w,S]=v.useState(!1),[_,E]=v.useState(""),[C,A]=v.useState(!1),T=pt.useRef(null),P=pt.useRef(!1),z=pt.useRef(null),J=pt.useRef(null);v.useEffect(()=>{t&&!P.current?(async()=>{y(!0);try{const ne=await Ix();f(ne),P.current=!0}catch(ne){console.error("Error loading products:",ne),E("Failed to load products. Please try again.")}finally{y(!1)}})():t||(s(""),l(""),d(""),S(!1),E(""),P.current=!1)},[t]),v.useEffect(()=>{function U(ne){T.current&&!T.current.contains(ne.target)&&A(!1)}return document.addEventListener("mousedown",U),()=>document.removeEventListener("mousedown",U)},[]);const H=pt.useCallback(U=>{s(U.target.value)},[]),fe=pt.useCallback(U=>{l(U.target.value)},[]),X=async U=>{if(U.preventDefault(),E(""),!n.trim()){E("Name is required");return}if(!a.trim()){E("Email is required");return}if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(a)){E("Please enter a valid email address");return}if(!u){E("Please select a product");return}j(!0);try{const ne=await NE(u);if(ne.length===0){E("No administrators found for this product. Please contact your system administrator."),j(!1);return}const G=m.find(Z=>Z.id===u),ie=(G==null?void 0:G.name)||"the selected product",te=Array.from(new Set(ne.map(Z=>{var $;return($=Z.user)==null?void 0:$.email}).filter(Boolean))),W=window.location.pathname.startsWith("/feature-voting-app")?"/feature-voting-app":"",se=`${window.location.origin}${W}/login`,I=await DC(a,u,"grant-admin"),B=await DC(a,u,"grant-stakeholder"),Se=`${_e.supabaseUrl}/functions/v1/grant-access`,je=`
<table width="100%" cellpadding="0" cellspacing="0" border="0" style="background-color: #f9fafb; font-family: Arial, sans-serif;">
  <tr>
    <td align="center" style="padding: 48px 20px;">
      <table width="600" cellpadding="0" cellspacing="0" border="0" style="background-color: #ffffff; border-radius: 8px; box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);">
        <!-- Logo Header - Matching Login Page -->
        <tr>
          <td style="background-color: #ffffff; padding: 32px 40px 24px 40px; text-align: center;">
            <img src="https://dcchoffman.github.io/feature-voting-app/New-Millennium-color-logo1.png" alt="New Millennium Building Systems" width="300" height="96" style="height: 96px; width: auto; max-width: 300px; display: block; margin: 0 auto; border: 0;" />
            <div style="font-size: 20px; font-weight: bold; color: #2d4660; margin-top: 16px; margin-bottom: 4px;">Feature Voting System</div>
            <div style="font-size: 11px; color: #6b7280; margin-bottom: 2px;">has a</div>
            <div style="font-size: 25px; font-weight: bold; color: #2d4660; margin-bottom: 2px;">Access Request Notification</div>
            <div style="font-size: 11px; color: #6b7280; margin-bottom: 2px;">for the</div>
            <div style="font-size: 30px; font-weight: bold; color: #2d4660; margin-bottom: 8px;">${ie}</div>
          </td>
        </tr>
        
        <!-- Main Content -->
        <tr>
          <td style="background-color: #ffffff; padding: 40px;">
            <p style="margin: 0 0 16px 0; font-size: 16px; color: #333;">Hello,</p>
            <p style="margin: 0 0 24px 0; font-size: 16px; color: #333;">A new access request has been submitted for <strong style="color: #2d4660;">${ie}</strong>.</p>
            
            <!-- User Details - Labels less prominent, values emphasized -->
            <table width="100%" cellpadding="0" cellspacing="0" border="0" style="background-color: white; border-left: 4px solid #2d4660; border-radius: 4px; margin: 20px 0;">
              <tr>
                <td style="padding: 20px;">
                  <div style="margin: 10px 0;">
                    <span style="font-weight: normal; color: #6b7280; font-size: 13px;">Requester Name:</span> <span style="color: #1f2937; font-weight: 600; font-size: 15px;">${n}</span>
                  </div>
                  <div style="margin: 10px 0;">
                    <span style="font-weight: normal; color: #6b7280; font-size: 13px;">Requester Email:</span> <span style="color: #1f2937; font-weight: 600; font-size: 15px;">${a}</span>
                  </div>
                  <div style="margin: 10px 0;">
                    <span style="font-weight: normal; color: #6b7280; font-size: 13px;">Product:</span> <span style="color: #1f2937; font-weight: 600; font-size: 15px;">${ie}</span>
                  </div>
                </td>
              </tr>
            </table>

            <p style="margin: 24px 0; font-size: 16px; color: #333; line-height: 1.6;">To grant access, click one of the buttons below.<br />Access will be granted <b>immediately</b> to all sessions for this product,<br /><b>and an email notification will be sent to the requester.</b></p>
            
            <!-- Action Buttons - Gold buttons for granting access (same size) -->
            <table width="100%" cellpadding="0" cellspacing="0" border="0" style="margin: 32px 0;">
              <tr>
                <td width="50%" align="left" valign="top" style="padding-right: 10px;">
                  <a href="${se}?token=${I}&action=grant-admin&email=${encodeURIComponent(a)}&product=${encodeURIComponent(u)}" style="display: inline-block; padding: 12px 20px; background-color: #C89212; color: white; text-decoration: none; border-radius: 6px; font-weight: 600; font-size: 13px; box-shadow: 0 1px 2px 0 rgba(0, 0, 0, 0.05); text-align: center; line-height: 1.5; width: 100%; max-width: 240px; min-width: 240px;">
                    Grant Access as<br /><span style="font-size: 18px; font-weight: 700;">Session Admin</span>
                  </a>
                </td>
                <td width="50%" align="right" valign="top" style="padding-left: 10px;">
                  <a href="${se}?token=${B}&action=grant-stakeholder&email=${encodeURIComponent(a)}&product=${encodeURIComponent(u)}" style="display: inline-block; padding: 12px 20px; background-color: #C89212; color: white; text-decoration: none; border-radius: 6px; font-weight: 600; font-size: 13px; box-shadow: 0 1px 2px 0 rgba(0, 0, 0, 0.05); text-align: center; line-height: 1.5; width: 100%; max-width: 240px; min-width: 240px;">
                    Grant Access as<br /><span style="font-size: 18px; font-weight: 700;">Stakeholder</span>
                  </a>
                </td>
              </tr>
            </table>
            
            <!-- Helpful Text -->
            <p style="margin: 24px 0 16px 0; font-size: 14px; color: #6b7280; line-height: 1.6; text-align: center;">
              Click either button above to quickly grant access,<br />or use the link below to manage sessions and users in the system.
            </p>
            
            <!-- Go to System Button -->
            <table width="100%" cellpadding="0" cellspacing="0" border="0" style="margin: 24px 0;">
              <tr>
                <td align="center">
                  <a href="${se}" style="display: inline-block; padding: 12px 24px; background-color: #2d4660; color: white; text-decoration: none; border-radius: 6px; font-weight: 500; font-size: 14px; box-shadow: 0 1px 2px 0 rgba(0, 0, 0, 0.05);">Go to Feature Voting System</a>
                </td>
              </tr>
            </table>
          </td>
        </tr>
        
        <!-- Footer -->
        <tr>
          <td style="background-color: #f9fafb; padding: 20px; text-align: center; border-top: 1px solid #e5e7eb; font-size: 12px; color: #6b7280;">
            <p style="margin: 0 0 8px 0;">This is an automated message from the Feature Voting System.</p>
            <p style="margin: 0; color: #9ca3af;"> ${new Date().getFullYear()} New Millennium Building Systems</p>
          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>`,Ne=`
Access Request - Feature Voting System

Hello,

A new access request has been submitted for ${ie}.

Requester Name: ${n}
Requester Email: ${a}
Product: ${ie}

To grant access, please add this user as a stakeholder or admin to the relevant voting sessions for this product.

Login: ${se}

This is an automated message from the Feature Voting System.
      `;try{const Z=te.map($=>Ho({to:$,subject:`Access Request for ${ie} - Feature Voting System`,text:Ne,html:je}));await Promise.all(Z),S(!0)}catch(Z){console.error("Email service failed:",Z);let $="Failed to send email through the system.";Z instanceof Error||Z!=null&&Z.message?$=Z.message:typeof Z=="string"&&($=Z),($.includes("validation_error")||$.includes("403"))&&($="Domain verification required. Please verify your domain in Resend and update FROM_EMAIL in Supabase secrets."),E(`Failed to send access request: ${$}. Please check the Supabase Edge Function logs for details.`),j(!1);return}}catch(ne){console.error("Error sending access request:",ne),E("Failed to send access request. Please try again or contact your administrator.")}finally{j(!1)}},K=m.find(U=>U.id===u),ae=K?Yn(K.name,K.color_hex??null):null;return i.jsx(fn,{isOpen:t,onClose:r,title:w?"":"Request Access",maxWidth:"max-w-lg",hideHeader:w,children:w?i.jsxs("div",{className:"text-center pb-6",children:[i.jsx(jr,{className:"h-16 w-16 text-green-600 mx-auto mb-3"}),i.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-3",children:"Thank You!"}),i.jsx("p",{className:"text-sm text-gray-600 mb-2",children:"Your access request has been sent to the administrators for"}),i.jsx("p",{className:"text-xl font-semibold text-[#2d4660] mb-4",children:K==null?void 0:K.name}),i.jsx("p",{className:"text-sm text-gray-600",children:"You will be notified once your access has been granted."})]}):i.jsxs("form",{onSubmit:X,className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{htmlFor:"requestName",className:"block text-sm font-medium text-gray-700 mb-1",children:"Full Name *"}),i.jsx("input",{ref:z,id:"requestName",type:"text",required:!0,autoComplete:"off","data-lpignore":"true","data-form-type":"other",value:n,onChange:H,className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-[#2d4660] focus:border-[#2d4660]",placeholder:"John Doe"})]}),i.jsxs("div",{children:[i.jsx("label",{htmlFor:"requestEmail",className:"block text-sm font-medium text-gray-700 mb-1",children:"Email Address *"}),i.jsx("input",{ref:J,id:"requestEmail",type:"email",required:!0,autoComplete:"off","data-lpignore":"true","data-form-type":"other",value:a,onChange:fe,className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-[#2d4660] focus:border-[#2d4660]",placeholder:"your.email@company.com"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Product *"}),i.jsxs("div",{ref:T,className:"relative",children:[i.jsxs("button",{type:"button",onClick:()=>A(!C),className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm bg-white text-left flex items-center justify-between hover:border-gray-400 focus:outline-none focus:ring-[#2d4660] focus:border-[#2d4660]",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[K&&ae&&i.jsx("div",{className:"w-4 h-4 rounded flex-shrink-0",style:{backgroundColor:ae.background}}),i.jsx("span",{className:K?"text-gray-900":"text-gray-400",children:K?K.name:"Select a product..."})]}),i.jsx(ds,{className:`h-4 w-4 text-gray-400 transition-transform ${C?"transform rotate-180":""}`})]}),C&&i.jsx("div",{className:"absolute z-[100] w-full mt-1 bg-white border border-gray-300 rounded-md shadow-lg max-h-96 overflow-y-auto",children:p?i.jsx("div",{className:"px-3 py-2 text-sm text-gray-500 text-center",children:"Loading products..."}):m.length===0?i.jsx("div",{className:"px-3 py-2 text-sm text-gray-500 text-center",children:"No products available"}):m.map(U=>{const ne=Yn(U.name,U.color_hex??null),G=u===U.id;return i.jsxs("div",{onClick:()=>{d(U.id),A(!1)},className:`px-3 py-2 cursor-pointer hover:bg-gray-50 flex items-center gap-2 ${G?"bg-[#2d4660]/5":""}`,children:[ne&&i.jsx("div",{className:"w-4 h-4 rounded flex-shrink-0",style:{backgroundColor:ne.background}}),i.jsx("span",{className:"text-sm text-gray-900",children:U.name})]},U.id)})})]})]}),_&&i.jsx("div",{className:"rounded-md bg-red-50 p-4",children:i.jsx("div",{className:"flex",children:i.jsx("div",{className:"ml-3",children:i.jsx("h3",{className:"text-sm font-medium text-red-800",children:_})})})}),i.jsxs("div",{className:"flex justify-end space-x-2 pt-4 border-t",children:[i.jsx(yt,{variant:"secondary",onClick:r,disabled:x,children:"Cancel"}),i.jsx(yt,{variant:"primary",type:"submit",disabled:x,className:"flex items-center",children:x?i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Sending..."]}):i.jsxs(i.Fragment,{children:[i.jsx(au,{className:"h-4 w-4 mr-2"}),"Send Request"]})})]})]})})});function VZ(){const{currentUser:e,setCurrentSession:t,refreshSessions:r,setCurrentUser:n,isLoading:s}=Ea(),a=Js(),[l]=Cx(),[u,d]=v.useState(!0),[m,f]=v.useState(!1),p=v.useRef(!1),[y,x]=v.useState([]),[j,w]=v.useState({}),[S,_]=v.useState({}),[E,C]=v.useState({}),[A,T]=v.useState(!1),[P,z]=v.useState("admin"),[J,H]=v.useState(!1),fe=v.useRef(null),[X,K]=v.useState({}),[ae,U]=v.useState({}),[ne,G]=v.useState(!1),[ie,te]=v.useState(!0),[W,se]=v.useState({title:"",goal:"",votesPerUser:10,useAutoVotes:!0,startDate:"",endDate:""}),[I,B]=v.useState({}),[Me,Se]=v.useState(!1),[Ie,je]=v.useState([]),[Ne,Z]=v.useState(""),[$,xe]=v.useState(""),[le,M]=v.useState(null),[De,Pe]=v.useState(null),[et,rt]=v.useState(!1),[kt,lt]=v.useState(!1),[Yt,R]=v.useState(!1),[re,de]=v.useState(null),[Fe,we]=v.useState(!1),[Ae,Ke]=v.useState(!1),[It,Rt]=v.useState(!1),[Pt,rr]=v.useState(null),[Ht,He]=v.useState(!1),[ft,gt]=v.useState("#2D4660"),Lt=v.useRef(null),[_t,nr]=v.useState(new Set),[Ze,Ot]=v.useState(null),[zt,Vt]=v.useState(null),[hr,Zt]=v.useState(!1),[gn,Jt]=v.useState(!1),[mr,or]=v.useState(null),[En,zr]=v.useState(null),[lr,Gr]=v.useState(null),[Dt,_r]=v.useState(null),[Ur,Sr]=v.useState(""),[pr,Zr]=v.useState(null),[Ss,es]=v.useState(!1),[Ns,Ir]=v.useState(!1),[Rs,ts]=v.useState("#2D4660"),[Nr,on]=v.useState(!1),[Dr,Br]=v.useState([]),[gr,An]=v.useState([]),[bi,sr]=v.useState(""),[ps,ee]=v.useState(""),[Ce,ze]=v.useState(""),[Be,Je]=v.useState(!1),[Oe,ct]=v.useState(""),[ht,St]=v.useState(null),[We,Cr]=v.useState(!1),[Ut,Wr]=v.useState(null),Bt=()=>Wr(null),yn=Dr.map(D=>D.user_email.toLowerCase()),Qs=yn.length>0&&yn.every(D=>gr.includes(D));v.useEffect(()=>{const D=l.get("error"),q=l.get("error_description"),ce=l.get("error_code");if(D){let Ee="Authentication failed.";ce==="unexpected_failure"&&(q!=null&&q.includes("email"))?Ee="Azure AD did not return your email address. Please ensure your Azure AD app has the correct API permissions (User.Read or email) and that your account has an email address.":q&&(Ee=decodeURIComponent(q)),sessionStorage.setItem("oauth_error",Ee),a("/login",{replace:!0})}},[l,a]),v.useEffect(()=>{(async()=>{if(!ne||!e)return;const q=e.tenant_id??e.tenantId??null;if(!q){je([]),Z(""),de("No tenant assigned. Products cannot be loaded.");return}lt(!0),de(null);try{const Ee=await qa(q);je(Ee),Z(Ue=>{if(hr&&Ue&&Ee.some(ye=>ye.id===Ue))return Ue;if(Ze){const me=Ee.find(ye=>{var Xe;return((Xe=ye.name)==null?void 0:Xe.toLowerCase().trim())===Ze.toLowerCase().trim()});if(me!=null&&me.id)return Ot(null),me.id}return hr&&Ue||""}),K(Ue=>{const me={...Ue};return Ee.forEach(ye=>{ye.id&&ye.name&&(me[ye.id]=ye.name)}),me}),U(Ue=>{const me={...Ue};return Ee.forEach(ye=>{ye.id&&ye.color_hex&&(me[ye.id]=ye.color_hex)}),me})}catch(ce){console.error("Error loading products for modal:",ce),Xa!=null&&Xa(ce)?de("Products are not configured yet. Please create the `products` table in Supabase."):de("Unable to load products. You can still create a session without a product tag."),je([]),Z("")}finally{lt(!1)}})()},[ne,e]);const yr=D=>{if(!D||typeof D!="string")return console.error("[parseLocalDate] Invalid date string:",D),new Date;const ce=D.split("T")[0].split(" ")[0].split("-");if(ce.length!==3)return console.error("[parseLocalDate] Invalid date format:",D),new Date;const Ee=parseInt(ce[0],10),Ue=parseInt(ce[1],10),me=parseInt(ce[2],10);if(isNaN(Ee)||isNaN(Ue)||isNaN(me))return console.error("[parseLocalDate] Invalid date components:",{year:Ee,month:Ue,day:me}),new Date;const ye=new Date(Ee,Ue-1,me,0,0,0,0);return isNaN(ye.getTime())?(console.error("[parseLocalDate] Invalid date created:",{year:Ee,month:Ue,day:me,dateString:D}),new Date):ye},Bn=D=>{if(!D||isNaN(D.getTime()))return console.error("[formatDateToISO] Invalid date:",D),new Date().toISOString().split("T")[0];const q=D.getFullYear(),ce=String(D.getMonth()+1).padStart(2,"0"),Ee=String(D.getDate()).padStart(2,"0");return`${q}-${ce}-${Ee}`},br=(D,q)=>{const ce=D.getFullYear(),Ee=D.getMonth(),Ue=D.getDate();return new Date(ce,Ee,Ue+q,0,0,0,0)},la=()=>{const D="ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";let q="";for(let ce=0;ce<8;ce++)q+=D.charAt(Math.floor(Math.random()*D.length));return q},fr=()=>{se({title:"",goal:"",votesPerUser:10,useAutoVotes:!0,startDate:"",endDate:""}),B({}),xe(""),M(null),de(null),we(!1),Ke(!1),Rt(!1),rr(null),He(!1),gt("#2D4660"),Ot(null),te(!0),Zt(!1),Jt(!1)},Zs=(D=!1)=>{const q={};if(D||(W.title.trim()||(q.title="Session title is required"),W.goal.trim()||(q.goal="Session goal is required")),W.useAutoVotes||(W.votesPerUser<1&&(q.votesPerUser="Votes per user must be at least 1"),W.votesPerUser>100&&(q.votesPerUser="Votes per user cannot exceed 100")),D){if(W.startDate&&W.endDate){const ce=yr(W.startDate);yr(W.endDate)<=ce&&(q.endDate="End date must be after start date")}}else if((!W.startDate||!W.startDate.trim())&&(q.startDate="Start date is required"),(!W.endDate||!W.endDate.trim())&&(q.endDate="End date is required"),W.startDate&&W.endDate&&W.startDate.trim()&&W.endDate.trim()){const ce=yr(W.startDate);yr(W.endDate)<=ce&&(q.endDate="End date must be after start date")}if(!D){const ce=$.trim().length>0;!re&&Ie.length>0&&!Ne&&!Pt&&!Fe&&!ce&&(q.product="Please select a product or enter a new product name"),Fe&&!ce&&(q.product="Please enter a product name or select an existing product")}return B(q),Object.keys(q).length===0},Ms=D=>{const{name:q,value:ce}=D.target;se(Ee=>{const Ue={...Ee,[q]:q==="votesPerUser"?parseInt(ce)||0:ce};if(q==="startDate"&&ce){const me=yr(ce),ye=br(me,14);Ue.endDate=Bn(ye)}return Ue}),I[q]&&B(Ee=>{const Ue={...Ee};return delete Ue[q],Ue})},ln=async D=>{if(D==="startDate"&&!W.startDate){let q;if(Ne)try{const me=y.filter(ye=>ye.product_id===Ne);if(me.length>0){let ye=yr(me[0].end_date);me.forEach(Xe=>{const Ct=yr(Xe.end_date);Ct>ye&&(ye=Ct)}),q=br(ye,1)}else q=new Date}catch(me){console.error("Error calculating dates for product:",me),q=new Date}else q=new Date;const ce=Bn(q),Ee=yr(ce),Ue=br(Ee,14);se(me=>({...me,startDate:ce,endDate:me.endDate||Bn(Ue)}))}else if(D==="endDate"&&!W.endDate){let q;if(W.startDate)q=yr(W.startDate);else if(Ne)try{const Ee=y.filter(Ue=>Ue.product_id===Ne);if(Ee.length>0){let Ue=yr(Ee[0].end_date);Ee.forEach(me=>{const ye=yr(me.end_date);ye>Ue&&(Ue=ye)}),q=br(Ue,1)}else q=new Date}catch(Ee){console.error("Error calculating dates for product:",Ee),q=new Date}else q=new Date;const ce=br(q,14);se(Ee=>({...Ee,endDate:Bn(ce),startDate:Ee.startDate||Bn(q)}))}},Xt=async()=>{if(!(!De||!e)){rt(!0);try{await bE(De.id),je(D=>D.filter(q=>q.id!==De.id)),K(D=>{const q={...D};return delete q[De.id],q}),U(D=>{const q={...D};return delete q[De.id],q}),Ne===De.id&&Z("")}catch(D){console.error("Error deleting product:",D),alert("Failed to delete product. Please try again.")}finally{rt(!1),Pe(null)}}},Oa=async()=>{if(e&&Zs(!0)){Se(!0);try{const D=la(),q=e.tenant_id??e.tenantId??null;let ce=Ne&&Ne.trim()!==""?Ne:null;const Ee=$.trim(),Ue=Ee.length>0;let me=null,ye=null;if(Pt?(me=Pt.name,ye=Pt.color):Ue&&(me=Ee,ye=le),me&&q)try{const qe=Ie.find(er=>er.name.toLowerCase().trim()===me.toLowerCase().trim());if(qe)ce=qe.id;else{const er=await dv(q,me,ye||void 0);ce=er.id,je(Qt=>[...Qt,er].sort((vt,Gt)=>vt.name.localeCompare(Gt.name))),K(Qt=>({...Qt,[er.id]:er.name})),U(Qt=>{const vt={...Qt};return er.color_hex&&(vt[er.id]=er.color_hex),vt})}}catch(qe){console.error("Error creating product during draft save:",qe)}const Xe=W.startDate&&W.startDate.trim()?W.startDate:xn,Ct=W.endDate&&W.endDate.trim()?W.endDate:xn,at=`${Xe}T00:00:00`,Tt=`${Ct}T23:59:59`,Wt=await fv({title:W.title.trim()||"Untitled Session",goal:W.goal.trim()||"",votes_per_user:W.votesPerUser||10,use_auto_votes:W.useAutoVotes,start_date:at,end_date:Tt,is_active:!1,session_code:D,access_type:"invite-only",product_id:ce??null,product_name:null});try{await El(Wt.id,e.id)}catch(qe){console.error("Error adding session admin for draft:",qe)}await r(),p.current=!1,await ei(),ha()}catch(D){console.error("Error saving draft:",D),B(q=>({...q,submit:D.message||"Failed to save draft. Please try again."}))}finally{Se(!1)}}},Ta=async D=>{if(D.preventDefault(),!!e&&Zs(!1)){Se(!0);try{const q=la(),ce=e.tenant_id??e.tenantId??null;let Ee=Ne&&Ne.trim()!==""?Ne:null;const Ue=$.trim(),me=Ue.length>0,ye=Ne&&Ne.trim()!=="";let Xe=null,Ct=null;if(Pt?(Xe=Pt.name,Ct=Pt.color):me&&(Xe=Ue,Ct=le),Xe){const Qt=Ie.find(vt=>vt.name.toLowerCase().trim()===Xe.toLowerCase().trim());if(Qt)Ee=Qt.id;else if(ce)try{const vt=await dv(ce,Xe,Ct||void 0);Ee=vt.id,je(Gt=>[...Gt,vt].sort((mt,qt)=>mt.name.localeCompare(qt.name))),K(Gt=>({...Gt,[vt.id]:vt.name})),U(Gt=>{const mt={...Gt};return vt.color_hex&&(mt[vt.id]=vt.color_hex),mt})}catch(vt){console.error("Error creating product during session creation:",vt),B(Gt=>({...Gt,submit:"Failed to create product. Please try again."})),Se(!1);return}else{console.error("No tenantId available to create product"),B(vt=>({...vt,submit:"Unable to create product: No tenant assigned."})),Se(!1);return}}if(Ee&&W.startDate&&W.endDate&&W.startDate.trim()&&W.endDate.trim()){const Qt=y.filter(Ft=>Ft.product_id===Ee),vt=W.startDate.split("T")[0],Gt=W.endDate.split("T")[0];if(Qt.find(Ft=>{const Er=Ft.start_date.split("T")[0],tn=Ft.end_date.split("T")[0];return Er===vt&&tn===Gt})){const Ft=X[Ee]||"this product";B(Er=>({...Er,submit:`A session with the same dates (${Vr(W.startDate)} - ${Vr(W.endDate)}) already exists for ${Ft}. Please choose different dates.`})),Se(!1);return}const qt=await jE(Ee);if(qt){const Ft=yr(qt.end_date);if(yr(W.startDate)<=Ft){const tn=X[Ee]||"this product";B(Jr=>({...Jr,submit:`There is already an active session for ${tn}. The new session must start after ${Vr(qt.end_date)}.`})),Se(!1);return}}}const at=`${W.startDate}T00:00:00`,Tt=`${W.endDate}T23:59:59`,Wt=await fv({title:W.title,goal:W.goal,votes_per_user:W.votesPerUser,use_auto_votes:W.useAutoVotes,start_date:at,end_date:Tt,is_active:!0,session_code:q,access_type:"invite-only",product_id:Ee??null,product_name:null});try{await El(Wt.id,e.id)}catch(Qt){console.error("Error adding session admin (session was created successfully):",Qt),(Qt==null?void 0:Qt.code)==="42501"&&(console.warn("RLS policy violation when adding session admin. The session was created but admin assignment failed."),console.warn("This may require updating RLS policies for the session_admins table."))}const er=await $x(Wt.id)||Wt;if(er.product_id&&ce)try{const vt=(await qa(ce)).find(Gt=>Gt.id===er.product_id);vt&&(K(Gt=>({...Gt,[vt.id]:vt.name})),vt.color_hex&&vt.color_hex.trim()!==""&&U(Gt=>({...Gt,[vt.id]:vt.color_hex})))}catch(Qt){console.error("Error loading product for lookup:",Qt)}t(er),await r(),await ei(),G(!1),fr(),setTimeout(()=>{a("/admin")},100)}catch(q){console.error("Error creating session from modal:",q),B(ce=>({...ce,submit:"Failed to create session. Please try again."}))}finally{Se(!1)}}};v.useEffect(()=>{if(!J)return;const D=q=>{fe.current&&!fe.current.contains(q.target)&&H(!1)};return document.addEventListener("mousedown",D),document.addEventListener("touchstart",D,{passive:!0}),()=>{document.removeEventListener("mousedown",D),document.removeEventListener("touchstart",D)}},[J]);const ei=v.useCallback(async()=>{var D;if(!e){console.log("[SessionSelectionScreen] No current user, skipping loadUserSessions");return}if(p.current){console.log("[SessionSelectionScreen] Sessions already loading, skipping duplicate call");return}p.current=!0,d(!0);try{const ce=yv(e.email)||await Ri(e.id);T(ce);let Ee;ce?Ee=await qo():Ee=await wE(e.id);const Ue=(e==null?void 0:e.tenant_id)??(e==null?void 0:e.tenantId)??null;let me={},ye={};if(Ue)try{const Tt=await qa(Ue);me=Tt.reduce((Wt,qe)=>(qe.id&&qe.name&&(Wt[qe.id]=qe.name),Wt),{}),ye=Tt.reduce((Wt,qe)=>(qe.id&&qe.color_hex&&(Wt[qe.id]=qe.color_hex),Wt),{})}catch(Tt){console.error("Error loading products for session selection:",Tt)}const Xe={},Ct={},at={};for(let Tt=0;Tt<Ee.length;Tt++){const Wt=Ee[Tt];try{const[qe,er,Qt,vt]=await Promise.all([ce?Promise.resolve(!0):Rm(Wt.id,e.id),Mx(Wt.id,e.email),va(Wt.id),Ro(Wt.id).catch(mt=>(console.warn(`Failed to load votes for session ${Wt.id}:`,mt),[]))]);Xe[Wt.id]={isAdmin:qe,isStakeholder:er},Ct[Wt.id]=Qt.length;const Gt=vt.some(mt=>mt.user_id===e.id);at[Wt.id]=Gt}catch(qe){console.warn(`Error loading data for session ${Wt.id}:`,qe),Xe[Wt.id]={isAdmin:!1,isStakeholder:!1},Ct[Wt.id]=0,at[Wt.id]=!1}}await r(),x(Ee),w(Xe),_(Ct),C(at),K(me),U(ye)}catch(q){console.error("Error loading sessions:",q),(D=q==null?void 0:q.message)!=null&&D.includes("Failed to fetch")||(q==null?void 0:q.code)==="ERR_FAILED"?(console.warn("Network error loading sessions - will retry. This is usually temporary."),x([]),w({}),_({}),C({})):(x([]),w({}),_({}),C({})),p.current=!1}finally{d(!1)}},[e,r]);v.useEffect(()=>{if(s)return;if((window.location.search.includes("code=")||window.location.hash.includes("access_token")||window.location.search.includes("error="))&&!e&&!m){f(!0);const q=setTimeout(()=>{f(!1),e||a("/login",{replace:!0})},3e3);return()=>clearTimeout(q)}if(m&&e&&f(!1),!m){if(!e&&!s){a("/login",{replace:!0});return}e&&!s&&!p.current&&ei()}},[e,s,a,m]);const Fs=D=>{const q=S[D.id]||0;if(D.use_auto_votes){const ce=Math.max(1,Math.floor(q/2));return{votes:ce,displayText:`${ce} votes/user`,isAuto:!0,formula:`Auto: ${q} ${q===1?"feature":"features"}  2 = ${ce}`}}else return{votes:D.votes_per_user,displayText:`${D.votes_per_user} votes/user`,isAuto:!1,formula:""}},vn=D=>{t(D);const q=j[D.id];P==="stakeholder"?a("/vote"):q!=null&&q.isAdmin?a("/admin"):a("/vote")},ca=D=>{t(D),a("/vote")},ks=async()=>{try{await _e.auth.signOut()}catch{}try{t(null)}catch{}n(null);try{localStorage.removeItem("voting_system_current_session"),localStorage.removeItem("azureDevOpsAuthInProgress"),sessionStorage.removeItem("oauth_return_path"),sessionStorage.removeItem("oauth_action")}catch{}H(!1),a("/login",{replace:!0})},Vr=D=>{const ce=D.split("T")[0].split(" ")[0].split("-");if(ce.length!==3)return new Date(D).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}).replace(/\b(\d{4})\b/g,Tt=>`'${Tt.slice(-2)}`);const Ee=parseInt(ce[0],10),Ue=parseInt(ce[1],10)-1,me=parseInt(ce[2],10);return new Date(Ee,Ue,me).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}).replace(/\b(\d{4})\b/g,Ct=>`'${Ct.slice(-2)}`)},xn="2099-12-31",bn=D=>D?D.split("T")[0]===xn:!1,rs=D=>{if(!D.is_active){const q=!D.title||D.title==="Untitled Session"||D.title.trim()==="",ce=!D.goal||D.goal.trim()==="";return q||ce}return!1},gs=D=>{if(rs(D))return{text:"Draft",color:"text-yellow-900 bg-yellow-200",icon:zh};const q=new Date,ce=new Date(D.start_date),Ee=new Date(D.end_date);return q<ce?{text:"Upcoming",color:"text-yellow-600 bg-yellow-50",icon:Um}:q>Ee?{text:"Closed",color:"text-gray-600 bg-gray-100",icon:tr}:{text:"Active",color:"text-[#1E6154] bg-[#1E6154]/10",icon:jr}},ua=D=>[...D].sort((q,ce)=>{const Ee=q!=null&&q.end_date?Date.parse(q.end_date):0;return(ce!=null&&ce.end_date?Date.parse(ce.end_date):0)-Ee}),cn=D=>D.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;"),vo=D=>cn(D).replace(/\n/g,"<br />"),Li=D=>{const q=nn(D,X);return q?`${q}  ${D.title}`:`You're invited to vote: ${D.title}`},Wn=(D,q)=>{const ce=nn(D,X);return`Hello,

You're invited to participate in the "${ce?`${ce}  ${D.title}`:D.title}" feature voting session.

`+(D.goal?`Goal: ${D.goal}

`:"")+`Voting Period: ${bn(D.start_date)||bn(D.end_date)?"Dates not set":`${Vr(D.start_date)} - ${Vr(D.end_date)}`}

Click the "Go Vote!" button below to sign in and cast your votes.

Need help? Reach out to the session admin team.

Thanks,
${(e==null?void 0:e.name)||"Feature Voting System"}`},xo=(D,q)=>{const ce="https://dcchoffman.github.io/feature-voting-app/New-Millennium-color-logo1.png";window.location.pathname.startsWith("/feature-voting-app");const Ee=nn(D,X),Ue=Ee?`${Ee}  ${D.title}`:D.title;return`
<table width="100%" cellpadding="0" cellspacing="0" border="0" style="background-color: #f9fafb; font-family: Arial, sans-serif;">
  <tr>
    <td align="center" style="padding: 48px 20px;">
      <table width="600" cellpadding="0" cellspacing="0" border="0" style="background-color: #ffffff; border-radius: 8px; box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);">
        <!-- Logo Header -->
        <tr>
          <td style="background-color: #ffffff; padding: 32px 40px 24px 40px; text-align: center;">
            <img src="${ce}" alt="New Millennium Building Systems" width="300" height="96" style="height: 96px; width: auto; max-width: 300px; display: block; margin: 0 auto; border: 0;" />
            <div style="font-size: 24px; font-weight: bold; color: #2d4660; margin-top: 16px;">You're Invited to Vote</div>
          </td>
        </tr>
        
        <!-- Main Content -->
        <tr>
          <td style="background-color: #ffffff; padding: 40px;">
            <p style="margin: 0 0 16px 0; font-size: 16px; color: #333;">Hello,</p>
            <p style="margin: 0 0 24px 0; font-size: 16px; color: #333; line-height: 1.6;">You're invited to participate in the <strong style="color: #2d4660;">"${Ue}"</strong> feature voting session.</p>
            
            ${D.goal?`<p style="margin: 0 0 24px 0; font-size: 16px; color: #333; line-height: 1.6;"><strong style="color: #2d4660;">Goal:</strong> ${cn(D.goal)}</p>`:""}
            
            <p style="margin: 0 0 24px 0; font-size: 16px; color: #333; line-height: 1.6;"><strong style="color: #2d4660;">Voting Period:</strong> ${bn(D.start_date)||bn(D.end_date)?"Dates not set":`${Vr(D.start_date)} - ${Vr(D.end_date)}`}</p>
            
            <p style="margin: 24px 0; font-size: 16px; color: #333; line-height: 1.6;">Click the button below to sign in and cast your votes.</p>
            
            <!-- Go Vote Button - Gold styling like admin email -->
            <table width="100%" cellpadding="0" cellspacing="0" border="0" style="margin: 32px 0;">
              <tr>
                <td align="center">
                  <a href="${q}" style="display: inline-block; padding: 12px 24px; background-color: #C89212; color: white; text-decoration: none; border-radius: 6px; font-weight: 600; font-size: 16px; box-shadow: 0 1px 2px 0 rgba(0, 0, 0, 0.05);">Go Vote!</a>
                </td>
              </tr>
            </table>
            
            <p style="margin: 24px 0 0 0; font-size: 14px; color: #6b7280; line-height: 1.6;">Need help? Reach out to the session admin team.</p>
            
            <p style="margin: 24px 0 0 0; font-size: 16px; color: #333; line-height: 1.6;">Thanks,<br />${(e==null?void 0:e.name)||"Feature Voting System"}</p>
          </td>
        </tr>
        
        <!-- Footer -->
        <tr>
          <td style="background-color: #f9fafb; padding: 20px; text-align: center; border-top: 1px solid #e5e7eb; font-size: 12px; color: #6b7280;">
            <p style="margin: 0 0 8px 0;">This is an automated message from the Feature Voting System.</p>
            <p style="margin: 0; color: #9ca3af;"> ${new Date().getFullYear()} New Millennium Building Systems</p>
          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>`},Ia=async(D,q)=>{D.stopPropagation();const ce=window.location.pathname.startsWith("/feature-voting-app")?"/feature-voting-app":"",Ee=`${window.location.origin}${ce}/login?session=${q.session_code}`;ct(""),St(q),ze(Ee),sr(Li(q)),ee(Wn(q)),on(!0),Je(!0),Br([]),An([]);try{const me=(await kE(q.id)).filter(at=>!!at.user_email),ye=await uv(),Xe=new Set(ye.map(at=>at.email.toLowerCase())),Ct=me.filter(at=>Xe.has(at.user_email.toLowerCase()));Br(Ct),An(Ct.map(at=>at.user_email.toLowerCase())),Ct.length===0&&(me.length>0?ct("No active stakeholders found for this session. Some stakeholders may have been deleted. Add stakeholders first, then send invites."):ct("No stakeholders found for this session. Add stakeholders first, then send invites."))}catch(Ue){console.error("Error loading stakeholders:",Ue),ct(Ue.message||"Failed to load stakeholders for this session.")}finally{Je(!1)}},da=(D,q)=>{D.stopPropagation(),t(q),a("/results")},fa=()=>{on(!1),Br([]),An([]),St(null),ct("")},Da=D=>{An(q=>{const ce=D.toLowerCase();return q.includes(ce)?q.filter(Ee=>Ee!==ce):[...q,ce]})},en=()=>{An(Qs?[]:yn)},ns=async()=>{if(!ht)return;if(gr.length===0){ct("Select at least one stakeholder to email.");return}ct(""),Cr(!0);const D=gr.length,q=ht.title,ce=ps||Wn(ht),Ee=bi||Li(ht),Ue=`
      <table width="100%" cellpadding="0" cellspacing="0" border="0" style="margin: 24px 0;">
        <tr>
          <td align="center">
            <a href="${Ce}" style="display: inline-block; padding: 12px 24px; background-color: #C89212; color: white; text-decoration: none; border-radius: 6px; font-weight: 600; font-size: 16px; box-shadow: 0 1px 2px 0 rgba(0, 0, 0, 0.05);">Go Vote!</a>
          </td>
        </tr>
      </table>
    `;let me;if(ps){const ye="https://dcchoffman.github.io/feature-voting-app/New-Millennium-color-logo1.png";let Xe=vo(ce);Ce&&Xe.includes(cn(Ce))&&(Xe=Xe.replace(new RegExp(cn(Ce),"g"),"")),Xe=Xe+Ue,me=`
<table width="100%" cellpadding="0" cellspacing="0" border="0" style="background-color: #f9fafb; font-family: Arial, sans-serif;">
  <tr>
    <td align="center" style="padding: 48px 20px;">
      <table width="600" cellpadding="0" cellspacing="0" border="0" style="background-color: #ffffff; border-radius: 8px; box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);">
        <!-- Logo Header -->
        <tr>
          <td style="background-color: #ffffff; padding: 32px 40px 24px 40px; text-align: center;">
            <img src="${ye}" alt="New Millennium Building Systems" width="300" height="96" style="height: 96px; width: auto; max-width: 300px; display: block; margin: 0 auto; border: 0;" />
            <div style="font-size: 24px; font-weight: bold; color: #2d4660; margin-top: 16px;">You're Invited to Vote</div>
          </td>
        </tr>
        
        <!-- Main Content -->
        <tr>
          <td style="background-color: #ffffff; padding: 40px;">
            <div style="font-family: Arial, sans-serif; font-size: 14px; color: #111827; line-height: 1.6;">${Xe}</div>
          </td>
        </tr>
        
        <!-- Footer -->
        <tr>
          <td style="background-color: #f9fafb; padding: 20px; text-align: center; border-top: 1px solid #e5e7eb; font-size: 12px; color: #6b7280;">
            <p style="margin: 0 0 8px 0;">This is an automated message from the Feature Voting System.</p>
            <p style="margin: 0; color: #9ca3af;"> ${new Date().getFullYear()} New Millennium Building Systems</p>
          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>`}else me=xo(ht,Ce);try{await Promise.all(gr.map(Xe=>Ho({to:Xe,subject:Ee,text:ce,html:me})));const ye=Dr.filter(Xe=>gr.includes(Xe.user_email.toLowerCase())).map(Xe=>({name:Xe.user_name||"Unnamed Stakeholder",email:Xe.user_email}));fa(),Wr({sessionTitle:q,count:D,stakeholders:ye})}catch(ye){console.error("Error sending stakeholder invites:",ye),ct(ye.message||"Failed to send invites. Please try again.")}finally{Cr(!1)}},Yr=(D,q)=>{D.stopPropagation(),t(q),a("/users?filter=session-admin")},zi=(D,q)=>{D.stopPropagation(),t(q),a("/users?filter=stakeholder")},ha=()=>{G(!1),Zt(!1),Jt(!1),fr(),Z("")};if(u)return i.jsx("div",{className:"min-h-screen w-full bg-gray-50 flex items-center justify-center",children:i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-[#2D4660] mx-auto mb-4"}),i.jsx("p",{className:"text-gray-600",children:"Loading sessions..."})]})});const ti=ua(y),_s=A?ti:ti.filter(D=>{var q;return(q=j[D.id])==null?void 0:q.isAdmin}),V=A?[]:ti.filter(D=>{var q,ce;return((q=j[D.id])==null?void 0:q.isStakeholder)&&!((ce=j[D.id])!=null&&ce.isAdmin)}),N=A||_s.length>0,F=A&&P==="system-admin",pe=P==="stakeholder"?ti.filter(D=>gs(D).text==="Active"):[],he=P==="admin"||P==="system-admin"?_s:[],ke=P==="admin"?V:[],Te=(D,q)=>{const ce={};return D.forEach(Ee=>{const Ue=nn(Ee,q);if(!Ue||Ue==="No Product"||Ue.trim()==="")return;const me=Ue.toLowerCase().trim();ce[me]||(ce[me]=[]),ce[me].push(Ee)}),ce},ve=D=>{nr(q=>{const ce=new Set(q);return ce.has(D)?ce.delete(D):ce.add(D),ce})},Ye=(D,q,ce,Ee)=>{const Ue=Ee||ce||D,me=async ye=>{if(!ce)return;ye.stopPropagation();let Xe=Ie.find(Ct=>Ct.id===ce);if(!Xe){const Ct=(e==null?void 0:e.tenant_id)??(e==null?void 0:e.tenantId);if(Ct)try{Xe=(await qa(Ct)).find(Tt=>Tt.id===ce),Xe&&je(Tt=>Tt.find(qe=>qe.id===ce)?Tt:[...Tt,Xe].sort((qe,er)=>qe.name.localeCompare(er.name)))}catch(at){console.error("Error loading product for edit:",at)}}Xe&&(_r(Xe),Sr(Xe.name||""),Zr(Xe.color_hex||null),ts(Xe.color_hex||"#2D4660"))};return i.jsxs("div",{className:"absolute left-0 px-4 py-1 pr-8 rounded-t-md border-b-0 text-sm font-semibold shadow-sm z-20 flex items-center gap-2 whitespace-nowrap group cursor-pointer",style:{top:"0",left:"-1px",transform:"translateY(-100%)",backgroundColor:q.background,color:q.text,borderColor:q.border,borderWidth:"1px",borderBottomWidth:"0",boxShadow:"0 4px 8px rgba(16,24,40,0.06)",borderTopLeftRadius:"0.9rem",borderTopRightRadius:"0.9rem",overflow:"visible"},onMouseEnter:()=>{ce&&P!=="stakeholder"&&N&&zr(Ue)},onMouseLeave:()=>zr(null),onClick:P!=="stakeholder"&&N?me:void 0,children:[i.jsx(Sv,{className:"h-4 w-4 flex-shrink-0"}),i.jsx("span",{className:"overflow-hidden text-ellipsis flex-1 min-w-0",children:D}),ce&&En===Ue&&P!=="stakeholder"&&N&&i.jsx("div",{className:"absolute right-2 flex-shrink-0 opacity-80",children:i.jsx(zh,{className:"h-4 w-4",style:{color:q.text}})})]})},tt=(D,q,ce,Ee,Ue,me,ye,Xe=!0,Ct)=>i.jsxs(i.Fragment,{children:[Xe&&Ye(q,ce,Ct),i.jsxs("div",{className:"p-6 flex flex-col h-full",children:[i.jsxs("div",{className:"flex justify-between items-start mb-4",children:[i.jsx("div",{children:Ee.text==="Active"&&i.jsx("div",{className:"relative inline-block",style:{marginLeft:"-10px",marginTop:"-10px",marginRight:"10px"},children:i.jsxs("button",{onClick:at=>{at.stopPropagation(),ca(D)},className:"inline-flex items-center px-4 py-1 rounded-md text-sm font-semibold transition-colors text-white shadow-md",style:{backgroundColor:"#1E6154"},onMouseEnter:at=>at.currentTarget.style.backgroundColor="#15803d",onMouseLeave:at=>at.currentTarget.style.backgroundColor="#1E6154",children:[i.jsx(ls,{className:"h-[26px] w-[26px] mr-1.5"}),"Vote!"]})})}),i.jsxs("div",{className:"flex items-center gap-1",children:[i.jsxs("div",{className:`relative inline-block ${ye?"group":""}`,children:[i.jsxs("button",{onClick:at=>Yr(at,D),disabled:ye,className:`inline-flex items-center px-3 py-1 rounded-full text-xs font-medium transition-colors ${ye?"bg-gray-200 text-gray-500":"bg-[#2D4660] text-white hover:bg-[#1D3144]"}`,style:ye?{cursor:"not-allowed"}:{},children:[i.jsx(Mn,{className:"h-3 w-3 mr-1"}),"Admins"]}),ye&&i.jsxs("div",{className:"absolute top-full left-1/2 -translate-x-1/2 mt-2 px-2 py-1 bg-gray-100 text-gray-800 text-xs rounded shadow-sm opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-200 whitespace-nowrap z-10 pointer-events-none",children:["Session Closed",i.jsx("div",{className:"absolute -top-1 left-1/2 -translate-x-1/2 w-2 h-2 bg-gray-100 rotate-45 transform"})]})]}),i.jsxs("div",{className:`relative inline-block ${ye?"group":""}`,children:[i.jsxs("button",{onClick:at=>zi(at,D),disabled:ye,className:`inline-flex items-center px-3 py-1 rounded-full text-xs font-medium transition-colors ${ye?"bg-gray-200 text-gray-500":"bg-[#1E5461] text-white hover:bg-[#576C71]"}`,style:ye?{cursor:"not-allowed"}:{},children:[i.jsx(hs,{className:"h-3 w-3 mr-1"}),"Stakeholders"]}),ye&&i.jsxs("div",{className:"absolute top-full left-1/2 -translate-x-1/2 mt-2 px-2 py-1 bg-gray-100 text-gray-800 text-xs rounded shadow-sm opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-200 whitespace-nowrap z-10 pointer-events-none",children:["Session Closed",i.jsx("div",{className:"absolute -top-1 left-1/2 -translate-x-1/2 w-2 h-2 bg-gray-100 rotate-45 transform"})]})]})]})]}),i.jsx("h3",{className:"text-lg font-semibold text-[#2D4660] mb-2",children:D.title}),i.jsx("p",{className:"text-sm text-gray-600 mb-4 line-clamp-2",children:D.goal}),i.jsx("div",{className:"flex-1"}),i.jsxs("div",{className:"space-y-2 text-sm text-gray-500",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center",children:[i.jsx(sn,{className:"h-4 w-4 mr-2"}),bn(D.start_date)||bn(D.end_date)?i.jsx("span",{className:"text-gray-400 italic",children:"Dates not set"}):i.jsxs("span",{children:[Vr(D.start_date)," - ",Vr(D.end_date)]})]}),i.jsxs("span",{className:`inline-flex items-center ${Ee.text==="Active"?"px-3 py-1 text-sm":"px-2 py-0.5 text-xs"} rounded-full font-medium ${Ee.color}`,children:[i.jsx(Ue,{className:`${Ee.text==="Active"?"h-4 w-4":"h-3 w-3"} mr-1`}),Ee.text]})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center",children:[i.jsx(di,{className:"h-4 w-4 mr-2"}),i.jsxs("span",{children:[S[D.id]||0," ",S[D.id]===1?"feature":"features"]})]}),i.jsx("span",{className:"text-sm font-medium text-[#2D4660]",children:q})]}),i.jsxs("div",{className:"flex items-start",children:[i.jsx(ls,{className:"h-4 w-4 mr-2 mt-0.5 flex-shrink-0"}),i.jsxs("div",{className:"flex-1 flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center",children:[i.jsx("span",{className:"break-words",children:me.displayText}),me.isAuto&&i.jsxs("div",{className:"group relative ml-1 mt-0.5",children:[i.jsx(nd,{className:"h-4 w-4 text-blue-500 cursor-help"}),i.jsxs("div",{className:"absolute bottom-full left-1/2 -translate-x-1/2 mb-2 px-3 py-2 bg-gray-900 text-white text-xs rounded-lg opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-200 whitespace-nowrap z-10 pointer-events-none",children:[me.formula,i.jsx("div",{className:"absolute top-full left-1/2 -translate-x-1/2 -mt-1 border-4 border-transparent border-t-gray-900"})]})]})]}),Ee.text!=="Upcoming"&&Ee.text!=="Draft"&&i.jsxs("button",{onClick:at=>da(at,D),className:"ml-4 inline-flex items-center px-3 py-1 rounded-full text-xs font-medium bg-[#C89212] text-white hover:bg-[#E0A814] transition-colors cursor-pointer flex-shrink-0",children:[i.jsx(Nh,{className:"h-3 w-3 mr-1"}),Ee.text==="Closed"?"Final Results":"Current Results"]})]})]})]}),i.jsx("div",{className:"mt-4 pt-4 border-t border-gray-200",children:(()=>{const at=rs(D),Tt=ye||at;return i.jsxs("div",{className:`relative inline-block w-full ${Tt?"group":""}`,children:[i.jsxs("button",{onClick:Wt=>Ia(Wt,D),disabled:Tt,className:`w-full flex items-center justify-center px-3 py-2 rounded-md transition-colors ${Tt?"bg-gray-200 text-gray-500":"bg-blue-50 hover:bg-blue-100"}`,style:Tt?{cursor:"not-allowed"}:{},children:[i.jsx(au,{className:`h-4 w-4 mr-2 ${Tt?"text-gray-500":"text-blue-600"}`}),i.jsx("span",{className:`text-sm font-medium ${Tt?"text-gray-500":"text-blue-600"}`,children:"Email Invite to Stakeholders"})]}),Tt&&i.jsxs("div",{className:"absolute top-full left-1/2 -translate-x-1/2 mt-2 px-2 py-1 bg-gray-100 text-gray-800 text-xs rounded shadow-sm opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-200 whitespace-nowrap z-10 pointer-events-none",children:[at?"Draft Session":"Session Closed",i.jsx("div",{className:"absolute -top-1 left-1/2 -translate-x-1/2 w-2 h-2 bg-gray-100 rotate-45 transform"})]})]})})()})]})]});return s||m||u&&!e?i.jsx("div",{className:"min-h-screen w-full bg-gray-50 flex items-center justify-center",children:i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-[#2d4660] mx-auto mb-4"}),i.jsx("p",{className:"text-gray-600",children:"Signing you in..."})]})}):i.jsxs("div",{className:"container mx-auto p-4 max-w-6xl min-h-screen pb-8",children:[i.jsx("div",{className:"hidden md:flex md:justify-center mb-2",children:i.jsx("img",{src:vi,alt:"New Millennium Building Systems Logo",className:"-mt-4 cursor-pointer hover:opacity-80 transition-opacity",style:{height:"96px",width:"auto"},onClick:()=>a("/sessions")})}),i.jsxs("div",{className:"flex justify-between items-center mb-6",children:[i.jsxs("div",{className:"flex items-center",children:[i.jsx("img",{src:Pa,alt:"New Millennium Building Systems Logo",className:"mr-4 md:hidden cursor-pointer hover:opacity-80 transition-opacity",style:{width:"40px",height:"40px",objectFit:"contain"},onClick:()=>a("/sessions")}),i.jsxs("div",{children:[i.jsx("h1",{className:"text-2xl font-bold text-[#2D4660] md:text-3xl",children:"My Voting Sessions"}),i.jsxs("p",{className:"text-sm text-gray-600",children:["Welcome, ",e==null?void 0:e.name,A&&i.jsx("span",{className:"ml-2 inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium bg-[#C89212] text-white",children:"System Admin"}),!A&&_s.length>0&&i.jsx("span",{className:"ml-2 inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium bg-[#576C71] text-white",children:"Session Admin"}),!A&&_s.length===0&&V.length>0&&i.jsx("span",{className:"ml-2 inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium bg-[#8B5A4A] text-white",children:"Stakeholder"})]})]})]}),i.jsxs("div",{ref:fe,className:"relative z-40 md:justify-end",children:[i.jsxs("div",{className:"hidden md:flex space-x-2",children:[A&&(P==="admin"||P==="system-admin")&&i.jsx(i.Fragment,{children:i.jsxs("button",{onClick:()=>a("/users"),className:"flex items-center px-4 py-2 bg-[#2D4660] text-white rounded-lg hover:bg-[#173B65] transition-colors",children:[i.jsx(hs,{className:"h-4 w-4 mr-2"}),"User Management"]})}),(A||_s.length>0)&&(P==="admin"||P==="system-admin")&&i.jsx(i.Fragment,{children:i.jsxs("button",{onClick:()=>{fr(),Zt(!1),te(!0),Z(""),G(!0)},className:"flex items-center px-4 py-2 bg-[#C89212] text-white rounded-lg hover:bg-[#6A4234] transition-colors",children:[i.jsx(Dn,{className:"h-4 w-4 mr-2"}),i.jsx("span",{className:"hidden sm:inline",children:"Create Session"}),i.jsx("span",{className:"sm:hidden",children:"Create"})]})}),i.jsxs("button",{onClick:ks,className:"flex items-center px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-colors",children:[i.jsx(Jn,{className:"h-4 w-4 mr-2"}),i.jsx("span",{className:"hidden sm:inline",children:"Logout"})]})]}),i.jsx("div",{className:"flex md:hidden justify-end",children:i.jsx("button",{onClick:()=>H(!J),className:"p-2 rounded-md border border-gray-200 bg-white shadow-sm","aria-label":"Open menu",children:i.jsx(di,{className:"h-5 w-5 text-gray-700"})})}),J&&i.jsx("div",{className:"absolute right-0 mt-2 w-56 bg-white border border-gray-200 rounded-lg shadow-lg md:hidden z-50",children:i.jsxs("div",{className:"py-1",children:[A&&(P==="admin"||P==="system-admin")&&i.jsx(i.Fragment,{children:i.jsxs("button",{onClick:()=>{H(!1),a("/users")},className:"w-full px-3 py-2 flex items-center text-left hover:bg-gray-50",children:[i.jsx(hs,{className:"h-4 w-4 mr-2 text-gray-700"}),"User Management"]})}),(A||_s.length>0)&&(P==="admin"||P==="system-admin")&&i.jsx(i.Fragment,{children:i.jsxs("button",{onClick:()=>{fr(),H(!1),te(!0),G(!0)},className:"w-full px-3 py-2 flex items-center text-left hover:bg-gray-50",children:[i.jsx(Dn,{className:"h-4 w-4 mr-2 text-gray-700"}),"Create Session"]})}),i.jsxs("button",{onClick:()=>{H(!1),ks()},className:"w-full px-3 py-2 flex items-center text-left hover:bg-gray-50",children:[i.jsx(Jn,{className:"h-4 w-4 mr-2 text-gray-700"}),"Logout"]})]})})]})]}),y.length===0?i.jsxs("div",{className:"bg-white rounded-lg shadow-md p-12 text-center",children:[i.jsx(ls,{className:"mx-auto h-12 w-12 text-gray-400 mb-4"}),i.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No voting sessions"}),i.jsx("p",{className:"text-sm text-gray-500 mb-6",children:"You are not part of any voting sessions yet."}),A&&i.jsxs("button",{onClick:()=>{fr(),te(!0),G(!0)},className:"inline-flex items-center px-4 py-2 bg-[#2D4660] text-white rounded-lg hover:bg-[#173B65] transition-colors",children:[i.jsx(Dn,{className:"h-5 w-5 mr-2"}),"Create Your First Session"]})]}):i.jsxs("div",{className:"space-y-8",children:[P==="stakeholder"&&i.jsxs("div",{children:[i.jsxs("h2",{className:"text-xl font-semibold text-[#2D4660] mb-4 flex items-center",children:[i.jsx(ls,{className:"h-5 w-5 mr-2"}),"All Your Voting Sessions"]}),(()=>{const D=pe.filter(me=>{const ye=nn(me,X);return ye&&ye!=="No Product"&&ye.trim()!==""}),q=pe.filter(me=>{const ye=nn(me,X);return!ye||ye==="No Product"||ye.trim()===""}),ce=Te(D,X),Ee=[],Ue=[];return Object.entries(ce).forEach(([me,ye])=>{ye.length>=2?Ee.push({key:me,sessions:ye}):Ue.push(...ye)}),i.jsxs("div",{className:"space-y-8",children:[Ee.map(({key:me,sessions:ye})=>{var vt,Gt;const Xe=_t.has(me),Ct=Xe?ye:ye.slice(0,3),at=ye.length>3?ye.length-3:0,Tt=nn(ye[0],X),Wt=(vt=ye[0])!=null&&vt.product_id?ae[ye[0].product_id]:void 0,qe=Yn(Tt,Wt),er=(mt,qt)=>{const Ft=mt.replace("#",""),Er=parseInt(Ft.substring(0,2),16),tn=parseInt(Ft.substring(2,4),16),Jr=parseInt(Ft.substring(4,6),16);return`rgba(${Er}, ${tn}, ${Jr}, ${qt})`},Qt=qe.background?er(qe.background,.1):"#F9FAFB";return i.jsx("div",{className:"relative",style:{marginTop:"50px"},children:i.jsxs("div",{className:"rounded-lg rounded-tl-none border border-gray-200 pt-2 px-6 pb-6 relative overflow-visible",style:{backgroundColor:Qt,borderColor:qe.border||"#E5E7EB"},children:[Ye(Tt,qe,(Gt=ye[0])==null?void 0:Gt.product_id,me),at>0&&i.jsx("div",{className:"absolute right-0 z-20 hidden md:block",style:{top:"0",transform:"translateY(calc(-100% - 3px))"},children:i.jsx("button",{onClick:()=>ve(me),className:"flex items-center gap-1 text-sm text-[#2D4660] hover:text-[#173B65] transition-colors cursor-pointer",children:Xe?i.jsxs(i.Fragment,{children:["Show Less",i.jsx(ds,{className:"h-4 w-4 rotate-180"})]}):i.jsxs(i.Fragment,{children:["Show More (",at,")",i.jsx(ds,{className:"h-4 w-4"})]})})}),N&&P!=="stakeholder"&&i.jsx("div",{className:"absolute z-20 bottom-[-20px] left-1/2 -translate-x-1/2 md:bottom-auto md:left-auto md:translate-x-0 md:right-[-20px] md:top-1/2 md:-translate-y-1/2",children:i.jsx("button",{onClick:mt=>{var Jr;mt.stopPropagation();const qt=(Jr=ye[0])==null?void 0:Jr.product_id,Ft=nn(ye[0],X);qt&&Z(qt),Ft&&Ft!=="No Product"&&Ot(Ft);let Er=ye.length>0?yr(ye[0].end_date):new Date;ye.forEach(wi=>{const ss=yr(wi.end_date);ss>Er&&(Er=ss)});const tn=br(Er,1);br(tn,14),fr(),Z(qt),Zt(!0),te(!1),Jt(!0),G(!0)},onMouseEnter:()=>Vt(me),onMouseLeave:()=>Vt(null),className:"flex items-center justify-center w-10 h-10 rounded-full shadow-md",style:{backgroundColor:qe.background||"#C89212",color:qe.text||"#FFFFFF"},title:`Create new session for ${Tt}`,children:i.jsx(Dn,{className:"h-5 w-5"})})}),i.jsx("div",{className:"grid grid-cols-1 gap-0 sm:gap-6 sm:grid-cols-2 lg:grid-cols-3",children:Ct.map(mt=>{const qt=gs(mt),Ft=qt.text==="Closed",Er=qt.icon,tn=Fs(mt),Jr=E[mt.id],wi=nn(mt,X),ss=mt.product_id?ae[mt.product_id]:void 0,_p=Yn(wi,ss);return i.jsx("div",{className:"relative z-10 bg-white overflow-visible shadow-md rounded-lg hover:shadow-lg transition-shadow cursor-pointer mt-6 border",style:{borderColor:_p.border,borderWidth:"1px",opacity:Ft&&lr!==mt.id?.75:1},onMouseEnter:()=>Gr(mt.id),onMouseLeave:()=>Gr(null),onClick:()=>vn(mt),children:i.jsxs("div",{className:"p-6 flex flex-col h-full",children:[i.jsx("div",{className:"flex justify-end items-start mb-4",children:Jr?i.jsxs("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-xs font-medium bg-green-100 text-green-800",children:[i.jsx(jr,{className:"h-3 w-3 mr-1"}),"Voted"]}):qt.text==="Active"?i.jsxs("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:[i.jsx(tr,{className:"h-3 w-3 mr-1"}),"Needs Your Vote"]}):null}),i.jsx("h3",{className:"text-lg font-semibold text-[#2D4660] mb-2",children:mt.title}),i.jsx("p",{className:"text-sm text-gray-600 mb-4 line-clamp-2",children:mt.goal}),i.jsx("div",{className:"flex-1"}),i.jsxs("div",{className:"space-y-2 text-sm text-gray-500",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center",children:[i.jsx(sn,{className:"h-4 w-4 mr-2"}),i.jsxs("span",{children:[Vr(mt.start_date)," - ",Vr(mt.end_date)]})]}),i.jsxs("span",{className:`inline-flex items-center ${qt.text==="Active"?"px-3 py-1 text-sm":"px-2 py-0.5 text-xs"} rounded-full font-medium ${qt.color}`,children:[i.jsx(Er,{className:`${qt.text==="Active"?"h-4 w-4":"h-3 w-3"} mr-1`}),qt.text]})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center",children:[i.jsx(di,{className:"h-4 w-4 mr-2"}),i.jsxs("span",{children:[S[mt.id]||0," ",S[mt.id]===1?"feature":"features"," to vote on"]})]}),i.jsx("span",{className:"text-sm font-medium text-[#2D4660]",children:wi})]}),i.jsxs("div",{className:"flex items-center",children:[i.jsx(ls,{className:"h-4 w-4 mr-2"}),i.jsx("span",{children:tn.displayText}),tn.isAuto&&i.jsxs("div",{className:"group relative ml-1",children:[i.jsx(nd,{className:"h-4 w-4 text-blue-500 cursor-help"}),i.jsxs("div",{className:"absolute bottom-full left-1/2 -translate-x-1/2 mb-2 px-3 py-2 bg-gray-900 text-white text-xs rounded-lg opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-200 whitespace-nowrap z-10 pointer-events-none",children:[tn.formula,i.jsx("div",{className:"absolute top-full left-1/2 -translate-x-1/2 -mt-1 border-4 border-transparent border-t-gray-900"})]})]})]})]}),i.jsx("div",{className:"mt-4 pt-4 border-t border-gray-200",children:i.jsxs("button",{onClick:Cp=>{Cp.stopPropagation(),Ft||vn(mt)},disabled:Ft,className:`w-full flex items-center justify-center px-4 py-2 rounded-lg transition-colors font-medium ${Ft?"bg-gray-100 text-gray-500 cursor-not-allowed":Jr?"bg-gray-100 text-gray-700 hover:bg-gray-200":"bg-[#2D4660] text-white hover:bg-[#173B65]"}`,style:Ft?{cursor:"not-allowed"}:{},children:[i.jsx(ls,{className:"h-4 w-4 mr-2"}),Jr?"View or Change Votes":"Cast Your Votes"]})})]})},mt.id)})}),at>0&&i.jsx("div",{className:"mt-4 md:hidden",children:i.jsx("button",{onClick:()=>ve(me),className:"w-full flex items-center justify-center gap-1 px-4 py-2 text-sm font-medium text-[#2D4660] bg-white hover:bg-gray-50 rounded-md border border-gray-300 transition-colors",children:Xe?i.jsxs(i.Fragment,{children:["Show Less",i.jsx(ds,{className:"h-4 w-4 rotate-180"})]}):i.jsxs(i.Fragment,{children:["Show More (",at,")",i.jsx(ds,{className:"h-4 w-4"})]})})})]})},me)}),(Ue.length>0||q.length>0)&&i.jsx("div",{className:"grid grid-cols-1 gap-0 sm:gap-6 sm:grid-cols-2 lg:grid-cols-3",children:[...Ue,...q].map(me=>{const ye=gs(me),Xe=ye.text==="Closed",Ct=ye.icon,at=Fs(me),Tt=E[me.id],Wt=nn(me,X),qe=me.product_id?ae[me.product_id]:void 0,er=Yn(Wt,qe),Qt=Ue.includes(me);return i.jsxs("div",{className:"relative z-10 bg-white overflow-visible shadow-md rounded-lg rounded-tl-none hover:shadow-lg transition-shadow cursor-pointer mt-6 border",style:{borderColor:er.border,borderWidth:"1px",opacity:Xe&&lr!==me.id?.75:1},onMouseEnter:()=>Gr(me.id),onMouseLeave:()=>Gr(null),onClick:()=>vn(me),children:[Ye(Wt,er,me.product_id),Qt&&N&&P!=="stakeholder"&&i.jsx("div",{className:"absolute z-20 bottom-[-20px] left-1/2 -translate-x-1/2 md:bottom-auto md:left-auto md:translate-x-0 md:right-[-20px] md:top-1/2 md:-translate-y-1/2",children:i.jsx("button",{onClick:vt=>{vt.stopPropagation();const Gt=me.product_id,mt=nn(me,X);Gt&&Z(Gt),mt&&mt!=="No Product"&&Ot(mt);const qt=yr(me.end_date),Ft=br(qt,1);br(Ft,14),fr(),Z(Gt),Zt(!0),te(!1),Jt(!0),G(!0)},className:"flex items-center justify-center w-10 h-10 rounded-full transition-colors shadow-md hover:shadow-lg",style:{backgroundColor:er.background||"#C89212",color:er.text||"#FFFFFF"},onMouseEnter:vt=>{const Gt=er.background||"#C89212";vt.currentTarget.style.backgroundColor=Gt,vt.currentTarget.style.filter="brightness(0.8)"},onMouseLeave:vt=>{vt.currentTarget.style.backgroundColor=er.background||"#C89212",vt.currentTarget.style.filter="brightness(1)"},title:`Create new session for ${Wt}`,children:i.jsx(Dn,{className:"h-5 w-5"})})}),i.jsxs("div",{className:"p-6 flex flex-col h-full",children:[i.jsx("div",{className:"flex justify-end items-start mb-4",children:Tt?i.jsxs("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-xs font-medium bg-green-100 text-green-800",children:[i.jsx(jr,{className:"h-3 w-3 mr-1"}),"Voted"]}):ye.text==="Active"?i.jsxs("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:[i.jsx(tr,{className:"h-3 w-3 mr-1"}),"Needs Your Vote"]}):null}),i.jsx("h3",{className:"text-lg font-semibold text-[#2D4660] mb-2",children:me.title}),i.jsx("p",{className:"text-sm text-gray-600 mb-4 line-clamp-2",children:me.goal}),i.jsx("div",{className:"flex-1"}),i.jsxs("div",{className:"space-y-2 text-sm text-gray-500",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center",children:[i.jsx(sn,{className:"h-4 w-4 mr-2"}),i.jsxs("span",{children:[Vr(me.start_date)," - ",Vr(me.end_date)]})]}),i.jsxs("span",{className:`inline-flex items-center ${ye.text==="Active"?"px-3 py-1 text-sm":"px-2 py-0.5 text-xs"} rounded-full font-medium ${ye.color}`,children:[i.jsx(Ct,{className:`${ye.text==="Active"?"h-4 w-4":"h-3 w-3"} mr-1`}),ye.text]})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center",children:[i.jsx(di,{className:"h-4 w-4 mr-2"}),i.jsxs("span",{children:[S[me.id]||0," ",S[me.id]===1?"feature":"features"," to vote on"]})]}),i.jsx("span",{className:"text-sm font-medium text-[#2D4660]",children:Wt})]}),i.jsxs("div",{className:"flex items-center",children:[i.jsx(ls,{className:"h-4 w-4 mr-2"}),i.jsx("span",{children:at.displayText}),at.isAuto&&i.jsxs("div",{className:"group relative ml-1",children:[i.jsx(nd,{className:"h-4 w-4 text-blue-500 cursor-help"}),i.jsxs("div",{className:"absolute bottom-full left-1/2 -translate-x-1/2 mb-2 px-3 py-2 bg-gray-900 text-white text-xs rounded-lg opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-200 whitespace-nowrap z-10 pointer-events-none",children:[at.formula,i.jsx("div",{className:"absolute top-full left-1/2 -translate-x-1/2 -mt-1 border-4 border-transparent border-t-gray-900"})]})]})]})]}),i.jsx("div",{className:"mt-4 pt-4 border-t border-gray-200",children:i.jsxs("button",{onClick:vt=>{vt.stopPropagation(),Xe||vn(me)},disabled:Xe,className:`w-full flex items-center justify-center px-4 py-2 rounded-lg transition-colors font-medium ${Xe?"bg-gray-100 text-gray-500 cursor-not-allowed":Tt?"bg-gray-100 text-gray-700 hover:bg-gray-200":"bg-[#2D4660] text-white hover:bg-[#173B65]"}`,style:Xe?{cursor:"not-allowed"}:{},children:[i.jsx(ls,{className:"h-4 w-4 mr-2"}),Tt?"View or Change Votes":"Cast Your Votes"]})})]})]},me.id)})})]})})()]}),(P==="admin"||P==="system-admin")&&i.jsxs(i.Fragment,{children:[P==="admin"&&ke.length>0&&i.jsxs("div",{children:[i.jsxs("h2",{className:"text-xl font-semibold text-[#2D4660] mb-4 flex items-center",children:[i.jsx(ls,{className:"h-5 w-5 mr-2"}),"Your Voting Sessions"]}),i.jsx("div",{className:"grid grid-cols-1 gap-6 sm:grid-cols-2 lg:grid-cols-3",children:ke.map(D=>{const q=gs(D),ce=q.text==="Closed",Ee=q.icon,Ue=Fs(D),me=E[D.id],ye=nn(D,X),Xe=D.product_id?ae[D.product_id]:void 0,Ct=Yn(ye,Xe);return i.jsxs("div",{className:"relative z-10 bg-white overflow-visible shadow-md rounded-lg rounded-tl-none hover:shadow-lg transition-shadow cursor-pointer mt-6 border",style:{borderColor:Ct.border,borderWidth:"1px",opacity:ce&&lr!==D.id?.75:1},onMouseEnter:()=>Gr(D.id),onMouseLeave:()=>Gr(null),onClick:()=>vn(D),children:[i.jsxs("div",{className:"absolute left-0 px-4 py-1 rounded-t-md border-b-0 text-sm font-semibold shadow-sm z-20 flex items-center gap-2 whitespace-nowrap overflow-hidden",style:{top:"0",left:"-1px",transform:"translateY(-100%)",backgroundColor:Ct.background,color:Ct.text,borderColor:Ct.border,borderWidth:"1px",borderBottomWidth:"0",boxShadow:"0 4px 8px rgba(16,24,40,0.06)",borderTopLeftRadius:"0.9rem",borderTopRightRadius:"0.9rem"},children:[i.jsx(Sv,{className:"h-4 w-4 flex-shrink-0"}),i.jsx("span",{className:"overflow-hidden text-ellipsis",children:ye})]}),i.jsxs("div",{className:"p-6 flex flex-col h-full",children:[i.jsx("div",{className:"flex justify-end items-start mb-4",children:me?i.jsxs("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-xs font-medium bg-green-100 text-green-800",children:[i.jsx(jr,{className:"h-3 w-3 mr-1"}),"Voted"]}):q.text==="Active"?i.jsxs("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:[i.jsx(tr,{className:"h-3 w-3 mr-1"}),"Needs Your Vote"]}):null}),i.jsx("h3",{className:"text-lg font-semibold text-[#2D4660] mb-2",children:D.title}),i.jsx("p",{className:"text-sm text-gray-600 mb-4 line-clamp-2",children:D.goal}),i.jsx("div",{className:"flex-1"}),i.jsxs("div",{className:"space-y-2 text-sm text-gray-500",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center",children:[i.jsx(sn,{className:"h-4 w-4 mr-2"}),i.jsxs("span",{children:[Vr(D.start_date)," - ",Vr(D.end_date)]})]}),i.jsxs("span",{className:`inline-flex items-center ${q.text==="Active"?"px-3 py-1 text-sm":"px-2 py-0.5 text-xs"} rounded-full font-medium ${q.color}`,children:[i.jsx(Ee,{className:`${q.text==="Active"?"h-4 w-4":"h-3 w-3"} mr-1`}),q.text]})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center",children:[i.jsx(di,{className:"h-4 w-4 mr-2"}),i.jsxs("span",{children:[S[D.id]||0," ",S[D.id]===1?"feature":"features"," to vote on"]})]}),i.jsx("span",{className:"text-sm font-medium text-[#2D4660]",children:ye})]}),i.jsxs("div",{className:"flex items-center",children:[i.jsx(ls,{className:"h-4 w-4 mr-2"}),i.jsx("span",{children:Ue.displayText}),Ue.isAuto&&i.jsxs("div",{className:"group relative ml-1",children:[i.jsx(nd,{className:"h-4 w-4 text-blue-500 cursor-help"}),i.jsxs("div",{className:"absolute bottom-full left-1/2 -translate-x-1/2 mb-2 px-3 py-2 bg-gray-900 text-white text-xs rounded-lg opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-200 whitespace-nowrap z-10 pointer-events-none",children:[Ue.formula,i.jsx("div",{className:"absolute top-full left-1/2 -translate-x-1/2 -mt-1 border-4 border-transparent border-t-gray-900"})]})]})]})]}),i.jsx("div",{className:"mt-4 pt-4 border-t border-gray-200",children:i.jsxs("button",{onClick:at=>{at.stopPropagation(),ce||vn(D)},disabled:ce,className:`w-full flex items-center justify-center px-4 py-2 rounded-lg transition-colors font-medium ${ce?"bg-gray-100 text-gray-500 cursor-not-allowed":me?"bg-gray-100 text-gray-700 hover:bg-gray-200":"bg-[#2D4660] text-white hover:bg-[#173B65]"}`,style:ce?{cursor:"not-allowed"}:{},children:[i.jsx(ls,{className:"h-4 w-4 mr-2"}),me?"View or Change Votes":"Cast Your Votes"]})})]})]},D.id)})})]}),he.length>0&&i.jsxs("div",{children:[i.jsxs("div",{className:"flex flex-col gap-3 sm:flex-row sm:items-center sm:justify-between mb-4",children:[i.jsxs("h2",{className:"text-xl font-semibold text-[#2D4660] flex items-center",children:[i.jsx(Mn,{className:"h-5 w-5 mr-2"}),F?"All Sessions (System Admin)":"Sessions You Manage"]}),F&&i.jsxs("p",{className:"text-sm text-gray-600",children:["Showing ",he.length," total sessions across the organization."]})]}),(()=>{const D=he.filter(me=>{const ye=nn(me,X);return ye&&ye!=="No Product"&&ye.trim()!==""}),q=he.filter(me=>{const ye=nn(me,X);return!ye||ye==="No Product"||ye.trim()===""}),ce=Te(D,X),Ee=[],Ue=[];return Object.entries(ce).forEach(([me,ye])=>{ye.length>=2?Ee.push({key:me,sessions:ye}):Ue.push(...ye)}),i.jsxs("div",{className:"space-y-8",children:[Ee.map(({key:me,sessions:ye})=>{var vt,Gt;const Xe=_t.has(me),Ct=Xe?ye:ye.slice(0,3),at=ye.length>3?ye.length-3:0,Tt=nn(ye[0],X),Wt=(vt=ye[0])!=null&&vt.product_id?ae[ye[0].product_id]:void 0,qe=Yn(Tt,Wt),er=(mt,qt)=>{const Ft=mt.replace("#",""),Er=parseInt(Ft.substring(0,2),16),tn=parseInt(Ft.substring(2,4),16),Jr=parseInt(Ft.substring(4,6),16);return`rgba(${Er}, ${tn}, ${Jr}, ${qt})`},Qt=qe.background?er(qe.background,.1):"#F9FAFB";return i.jsx("div",{className:"relative",style:{marginTop:"50px"},children:i.jsxs("div",{className:"rounded-lg rounded-tl-none border border-gray-200 pt-2 px-6 pb-6 relative overflow-visible",style:{backgroundColor:Qt,borderColor:qe.border||"#E5E7EB"},children:[Ye(Tt,qe,(Gt=ye[0])==null?void 0:Gt.product_id,me),at>0&&i.jsx("div",{className:"absolute right-0 z-20 hidden md:block",style:{top:"0",transform:"translateY(calc(-100% - 3px))"},children:i.jsx("button",{onClick:()=>ve(me),className:"flex items-center gap-1 text-sm text-[#2D4660] hover:text-[#173B65] transition-colors cursor-pointer",children:Xe?i.jsxs(i.Fragment,{children:["Show Less",i.jsx(ds,{className:"h-4 w-4 rotate-180"})]}):i.jsxs(i.Fragment,{children:["Show More (",at,")",i.jsx(ds,{className:"h-4 w-4"})]})})}),(A||P==="admin"||P==="system-admin")&&i.jsx("div",{className:"absolute z-20 bottom-[-20px] left-1/2 -translate-x-1/2 md:bottom-auto md:left-auto md:translate-x-0 md:right-[-20px] md:top-1/2 md:-translate-y-1/2",children:i.jsx("button",{onClick:mt=>{var Jr;mt.stopPropagation();const qt=(Jr=ye[0])==null?void 0:Jr.product_id,Ft=nn(ye[0],X);qt&&Z(qt),Ft&&Ft!=="No Product"&&Ot(Ft);let Er=ye.length>0?yr(ye[0].end_date):new Date;ye.forEach(wi=>{const ss=yr(wi.end_date);ss>Er&&(Er=ss)});const tn=br(Er,1);br(tn,14),fr(),Z(qt),Zt(!0),te(!1),Jt(!0),G(!0)},onMouseEnter:()=>Vt(me),onMouseLeave:()=>Vt(null),className:"flex items-center justify-center w-10 h-10 rounded-full shadow-md",style:{backgroundColor:qe.background||"#C89212",color:qe.text||"#FFFFFF"},title:`Create new session for ${Tt}`,children:i.jsx(Dn,{className:"h-5 w-5"})})}),i.jsxs("div",{className:"grid grid-cols-1 gap-0 sm:gap-6 sm:grid-cols-2 lg:grid-cols-3",children:[Ct.map(mt=>{const qt=gs(mt),Ft=qt.icon,Er=Fs(mt),tn=qt.text==="Closed",Jr=nn(mt,X),wi=mt.product_id?ae[mt.product_id]:void 0,ss=Yn(Jr,wi);return i.jsx("div",{className:"relative z-10 bg-white overflow-visible shadow-md rounded-lg hover:shadow-lg transition-shadow cursor-pointer mt-6 border",style:{borderColor:ss.border,borderWidth:"1px",opacity:tn&&lr!==mt.id?.75:1},onMouseEnter:()=>Gr(mt.id),onMouseLeave:()=>Gr(null),onClick:()=>vn(mt),children:tt(mt,Jr,ss,qt,Ft,Er,tn,!1,mt.product_id)},mt.id)}),ye.length===2&&i.jsxs(i.Fragment,{children:[i.jsx("style",{children:`
                                        @keyframes growFromCenter {
                                          from {
                                            opacity: 0;
                                            transform: scale(0.3);
                                          }
                                          to {
                                            opacity: 1;
                                            transform: scale(1);
                                          }
                                        }
                                        @keyframes sparkle {
                                          0%, 100% {
                                            opacity: 0.1;
                                            transform: scale(0.7) rotate(0deg);
                                          }
                                          50% {
                                            opacity: 0.25;
                                            transform: scale(1.3) rotate(180deg);
                                          }
                                        }
                                        @keyframes sparkleSlow {
                                          0%, 100% {
                                            opacity: 0.08;
                                            transform: scale(0.6);
                                          }
                                          50% {
                                            opacity: 0.2;
                                            transform: scale(1.4);
                                          }
                                        }
                                        @keyframes starTwinkle {
                                          0%, 100% {
                                            opacity: 0.12;
                                            transform: scale(0.8) rotate(0deg);
                                          }
                                          25% {
                                            opacity: 0.22;
                                            transform: scale(1.1) rotate(90deg);
                                          }
                                          50% {
                                            opacity: 0.18;
                                            transform: scale(1.3) rotate(180deg);
                                          }
                                          75% {
                                            opacity: 0.22;
                                            transform: scale(1.1) rotate(270deg);
                                          }
                                        }
                                      `}),i.jsx("div",{className:"hidden lg:block relative z-10 overflow-hidden shadow-md rounded-lg mt-6 border cursor-pointer transition-all",style:{borderColor:qe.border||"#E5E7EB",borderWidth:"1px",backgroundColor:"rgba(255, 255, 255, 0.7)"},onMouseEnter:()=>or(me),onMouseLeave:()=>or(null),onClick:mt=>{var Jr;mt.stopPropagation();const qt=(Jr=ye[0])==null?void 0:Jr.product_id,Ft=nn(ye[0],X);qt&&Z(qt),Ft&&Ft!=="No Product"&&Ot(Ft);let Er=ye.length>0?yr(ye[0].end_date):new Date;ye.forEach(wi=>{const ss=yr(wi.end_date);ss>Er&&(Er=ss)});const tn=br(Er,1);br(tn,14),fr(),Z(qt),Zt(!0),te(!1),Jt(!0),G(!0)},children:i.jsxs("div",{className:"p-6 flex flex-col h-full items-center justify-center min-h-[200px] relative rounded-lg transition-all duration-300",style:{backgroundColor:"transparent",backgroundImage:zt===me||mr===me?`radial-gradient(circle at center, ${qe.badgeBackground||"rgba(200, 146, 18, 0.15)"}, transparent 70%)`:"none"},children:[(zt===me||mr===me)&&i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"absolute top-3 left-3 w-1.5 h-1.5 rounded-full",style:{backgroundColor:qe.background||"#C89212",animation:"sparkle 1.8s ease-in-out infinite",animationDelay:"0ms",opacity:.12}}),i.jsx("div",{className:"absolute top-5 left-8 w-1 h-1 rounded-full",style:{backgroundColor:qe.background||"#C89212",animation:"sparkleSlow 2.5s ease-in-out infinite",animationDelay:"200ms",opacity:.1}}),i.jsx("div",{className:"absolute top-8 left-5 w-2 h-2 rounded-full",style:{backgroundColor:qe.background||"#C89212",animation:"sparkle 2.2s ease-in-out infinite",animationDelay:"400ms",opacity:.15}}),i.jsx("div",{className:"absolute top-4 right-6 w-1 h-1 rounded-full",style:{backgroundColor:qe.background||"#C89212",animation:"sparkleSlow 2.8s ease-in-out infinite",animationDelay:"600ms",opacity:.1}}),i.jsx("div",{className:"absolute top-7 right-4 w-1.5 h-1.5 rounded-full",style:{backgroundColor:qe.background||"#C89212",animation:"sparkle 2s ease-in-out infinite",animationDelay:"800ms",opacity:.12}}),i.jsx("div",{className:"absolute top-10 right-9 w-1 h-1 rounded-full",style:{backgroundColor:qe.background||"#C89212",animation:"sparkleSlow 2.3s ease-in-out infinite",animationDelay:"1000ms",opacity:.1}}),i.jsx("div",{className:"absolute bottom-5 left-4 w-2 h-2 rounded-full",style:{backgroundColor:qe.background||"#C89212",animation:"sparkle 2.1s ease-in-out infinite",animationDelay:"1200ms",opacity:.15}}),i.jsx("div",{className:"absolute bottom-7 left-9 w-1 h-1 rounded-full",style:{backgroundColor:qe.background||"#C89212",animation:"sparkleSlow 2.6s ease-in-out infinite",animationDelay:"1400ms",opacity:.1}}),i.jsx("div",{className:"absolute bottom-4 left-12 w-1.5 h-1.5 rounded-full",style:{backgroundColor:qe.background||"#C89212",animation:"sparkle 1.9s ease-in-out infinite",animationDelay:"1600ms",opacity:.12}}),i.jsx("div",{className:"absolute bottom-8 right-5 w-1 h-1 rounded-full",style:{backgroundColor:qe.background||"#C89212",animation:"sparkleSlow 2.4s ease-in-out infinite",animationDelay:"1800ms",opacity:.1}}),i.jsx("div",{className:"absolute bottom-6 right-10 w-1.5 h-1.5 rounded-full",style:{backgroundColor:qe.background||"#C89212",animation:"sparkle 2.2s ease-in-out infinite",animationDelay:"2000ms",opacity:.12}}),i.jsx("div",{className:"absolute bottom-3 right-7 w-1 h-1 rounded-full",style:{backgroundColor:qe.background||"#C89212",animation:"sparkleSlow 2.7s ease-in-out infinite",animationDelay:"2200ms",opacity:.1}}),i.jsx(_c,{className:"absolute top-6 left-12",size:8,style:{color:qe.background||"#C89212",animation:"starTwinkle 3s ease-in-out infinite",animationDelay:"300ms",opacity:.15}}),i.jsx(_c,{className:"absolute top-9 right-12",size:6,style:{color:qe.background||"#C89212",animation:"starTwinkle 3.5s ease-in-out infinite",animationDelay:"700ms",opacity:.12}}),i.jsx(_c,{className:"absolute bottom-9 left-6",size:7,style:{color:qe.background||"#C89212",animation:"starTwinkle 2.8s ease-in-out infinite",animationDelay:"1100ms",opacity:.13}}),i.jsx(_c,{className:"absolute bottom-5 right-12",size:5,style:{color:qe.background||"#C89212",animation:"starTwinkle 3.2s ease-in-out infinite",animationDelay:"1500ms",opacity:.1}}),i.jsx(_c,{className:"absolute top-12 left-1/2 -translate-x-1/2",size:6,style:{color:qe.background||"#C89212",animation:"starTwinkle 2.9s ease-in-out infinite",animationDelay:"500ms",opacity:.12}}),i.jsx(_c,{className:"absolute bottom-12 left-1/2 -translate-x-1/2",size:7,style:{color:qe.background||"#C89212",animation:"starTwinkle 3.3s ease-in-out infinite",animationDelay:"1300ms",opacity:.13}}),i.jsx(kc,{className:"absolute top-2 left-6",size:6,style:{color:qe.background||"#C89212",animation:"sparkle 2.1s ease-in-out infinite",animationDelay:"250ms",opacity:.12}}),i.jsx(kc,{className:"absolute top-11 right-6",size:5,style:{color:qe.background||"#C89212",animation:"sparkleSlow 2.7s ease-in-out infinite",animationDelay:"750ms",opacity:.1}}),i.jsx(kc,{className:"absolute bottom-10 left-10",size:7,style:{color:qe.background||"#C89212",animation:"sparkle 2.4s ease-in-out infinite",animationDelay:"1150ms",opacity:.13}}),i.jsx(kc,{className:"absolute bottom-2 right-8",size:6,style:{color:qe.background||"#C89212",animation:"sparkleSlow 2.9s ease-in-out infinite",animationDelay:"1550ms",opacity:.11}}),i.jsx(kc,{className:"absolute top-1/2 left-2",size:5,style:{color:qe.background||"#C89212",animation:"sparkle 2.6s ease-in-out infinite",animationDelay:"450ms",opacity:.1}}),i.jsx(kc,{className:"absolute top-1/2 right-2",size:6,style:{color:qe.background||"#C89212",animation:"sparkleSlow 2.8s ease-in-out infinite",animationDelay:"950ms",opacity:.12}}),i.jsx("div",{className:"absolute top-1/4 left-1/4 w-1 h-1 rounded-full",style:{backgroundColor:qe.background||"#C89212",animation:"sparkleSlow 2.2s ease-in-out infinite",animationDelay:"300ms",opacity:.1}}),i.jsx("div",{className:"absolute top-1/3 right-1/4 w-1.5 h-1.5 rounded-full",style:{backgroundColor:qe.background||"#C89212",animation:"sparkle 2.3s ease-in-out infinite",animationDelay:"900ms",opacity:.12}}),i.jsx("div",{className:"absolute bottom-1/4 left-1/3 w-1 h-1 rounded-full",style:{backgroundColor:qe.background||"#C89212",animation:"sparkleSlow 2.5s ease-in-out infinite",animationDelay:"1500ms",opacity:.1}}),i.jsx("div",{className:"absolute bottom-1/3 right-1/3 w-1.5 h-1.5 rounded-full",style:{backgroundColor:qe.background||"#C89212",animation:"sparkle 2.1s ease-in-out infinite",animationDelay:"600ms",opacity:.12}})]}),i.jsxs("div",{className:"flex flex-col items-center justify-center gap-2 z-10",style:{opacity:zt===me||mr===me?1:0,transformOrigin:"center center",animation:zt===me||mr===me?"growFromCenter 0.3s ease-out forwards":"none"},children:[i.jsx(Dn,{className:"h-8 w-8",style:{color:qe.background||"#C89212"}}),i.jsxs("div",{className:"flex flex-col items-center justify-center text-base font-semibold",style:{color:qe.background||"#C89212"},children:[i.jsx("span",{children:"Create"}),i.jsx("span",{children:"New Session"})]})]})]})})]})]}),at>0&&i.jsx("div",{className:"mt-4 md:hidden",children:i.jsx("button",{onClick:()=>ve(me),className:"w-full flex items-center justify-center gap-1 px-4 py-2 text-sm font-medium text-[#2D4660] bg-white hover:bg-gray-50 rounded-md border border-gray-300 transition-colors",children:Xe?i.jsxs(i.Fragment,{children:["Show Less",i.jsx(ds,{className:"h-4 w-4 rotate-180"})]}):i.jsxs(i.Fragment,{children:["Show More (",at,")",i.jsx(ds,{className:"h-4 w-4"})]})})})]})},me)}),(Ue.length>0||q.length>0)&&i.jsxs("div",{className:"grid grid-cols-1 gap-0 sm:gap-6 sm:grid-cols-2 lg:grid-cols-3",children:[[...Ue,...q].map(me=>{const ye=gs(me),Xe=ye.icon,Ct=Fs(me),at=ye.text==="Closed",Tt=nn(me,X),Wt=me.product_id?ae[me.product_id]:void 0,qe=Yn(Tt,Wt),er=Ue.includes(me);return i.jsxs("div",{className:"relative z-10 bg-white overflow-visible shadow-md rounded-lg rounded-tl-none hover:shadow-lg transition-shadow cursor-pointer mt-6 border",style:{borderColor:qe.border,borderWidth:"1px",opacity:at&&lr!==me.id?.75:1},onMouseEnter:()=>Gr(me.id),onMouseLeave:()=>Gr(null),onClick:()=>vn(me),children:[er&&(A||P==="admin"||P==="system-admin")&&i.jsx("div",{className:"absolute z-20 bottom-[-20px] left-1/2 -translate-x-1/2 md:bottom-auto md:left-auto md:translate-x-0 md:right-[-20px] md:top-1/2 md:-translate-y-1/2",children:i.jsx("button",{onClick:Qt=>{Qt.stopPropagation();const vt=me.product_id,Gt=nn(me,X);vt&&Z(vt),Gt&&Gt!=="No Product"&&Ot(Gt);const mt=yr(me.end_date),qt=br(mt,1);br(qt,14),fr(),Z(vt),Zt(!0),te(!1),Jt(!0),G(!0)},className:"flex items-center justify-center w-10 h-10 rounded-full transition-colors shadow-md hover:shadow-lg",style:{backgroundColor:qe.background||"#C89212",color:qe.text||"#FFFFFF"},onMouseEnter:Qt=>{const vt=qe.background||"#C89212";Qt.currentTarget.style.backgroundColor=vt,Qt.currentTarget.style.filter="brightness(0.8)"},onMouseLeave:Qt=>{Qt.currentTarget.style.backgroundColor=qe.background||"#C89212",Qt.currentTarget.style.filter="brightness(1)"},title:`Create new session for ${Tt}`,children:i.jsx(Dn,{className:"h-5 w-5"})})}),tt(me,Tt,qe,ye,Xe,Ct,at,!0,me.product_id)]},me.id)}),he.length===2&&Ue.length+q.length>0&&i.jsx("div",{className:"hidden lg:block relative z-10 bg-white overflow-visible shadow-md rounded-lg hover:shadow-lg transition-shadow mt-6 border border-gray-200",children:i.jsx("div",{className:"p-6 flex flex-col h-full items-end justify-center min-h-[200px]",children:i.jsxs("button",{onClick:()=>{te(!0),G(!0)},className:"flex items-center px-6 py-3 bg-[#C89212] text-white rounded-lg hover:bg-[#6A4234] transition-colors font-semibold",children:[i.jsx(Dn,{className:"h-5 w-5 mr-2"}),"Create Session"]})})})]})]})})()]})]})]}),i.jsx(fn,{isOpen:ne,onClose:ha,title:"Create Voting Session",maxWidth:"max-w-3xl",children:i.jsxs("form",{onSubmit:Ta,className:"space-y-6",children:[i.jsxs("div",{className:"space-y-1",children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Product *"}),!Fe&&!Pt?hr&&Ne?i.jsx("div",{className:"flex items-center gap-3 px-4 py-2 border border-gray-300 rounded-md bg-gray-50",children:(()=>{const D=Ie.find(Ue=>Ue.id===Ne),q=(D==null?void 0:D.name)||X[Ne]||"Unknown Product",ce=(D==null?void 0:D.color_hex)||ae[Ne],Ee=Yn(q,ce);return i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"w-6 h-6 rounded-md border flex-shrink-0",style:{backgroundColor:Ee.background||"#2D4660",borderColor:Ee.border||"#2D4660"}}),i.jsx("span",{className:"font-medium text-gray-900 flex-1",children:q})]})})()}):i.jsx("div",{className:"space-y-3",style:{marginTop:0},children:i.jsxs("div",{className:"flex flex-col gap-3 sm:flex-row sm:items-end",style:{marginTop:0},children:[i.jsx("div",{className:"flex-1 w-full",children:i.jsx(SZ,{label:"",products:Ie,value:Ne,onChange:async D=>{if(Z(D),D){xe("");try{const q=y.filter(ce=>ce.product_id===D);if(q.length>0){let ce=yr(q[0].end_date);q.forEach(me=>{const ye=yr(me.end_date);ye>ce&&(ce=ye)});const Ee=br(ce,1),Ue=br(Ee,14);se(me=>({...me,startDate:Bn(Ee),endDate:Bn(Ue)}))}else{const ce=new Date,Ee=br(ce,14);se(Ue=>({...Ue,startDate:Bn(ce),endDate:Bn(Ee)}))}}catch(q){console.error("Error calculating dates for selected product:",q);const ce=new Date,Ee=br(ce,14);se(Ue=>({...Ue,startDate:Bn(ce),endDate:Bn(Ee)}))}}I.product&&B(q=>{const ce={...q};return delete ce.product,ce})},isLoading:kt,error:re,disabled:kt||Ie.length===0||gn,placeholder:"Select a product",helperText:!kt&&Ie.length===0&&!re&&ie?"No products found yet. Enter a product name below to create one.":void 0,allowDelete:ie,onRequestDeleteProduct:ie?(D=>{Pe(D)}):void 0,className:"w-full"})}),ie&&i.jsxs("div",{className:"flex items-center gap-2 sm:flex-none",children:[i.jsx("span",{className:"text-gray-500 font-medium px-2",children:"or"}),i.jsxs("button",{type:"button",onClick:()=>we(!0),disabled:kt,className:"px-4 py-2 bg-[#1E5461] text-white rounded-md hover:bg-[#576C71] transition-colors font-medium whitespace-nowrap disabled:opacity-50 disabled:cursor-not-allowed",children:[i.jsx(Dn,{className:"h-4 w-4 inline mr-2"}),"Create New Product"]})]})]})}):Pt?i.jsxs("div",{className:"flex items-center gap-3 px-4 py-2 border border-gray-300 rounded-md cursor-pointer hover:border-[#2D4660] transition-colors animate-in fade-in duration-300",onClick:()=>{rr(null),xe(Pt.name),M(Pt.color),we(!0),Ke(!0),Rt(!1)},children:[i.jsx("div",{className:"w-6 h-6 rounded-md border flex-shrink-0",style:{backgroundColor:Pt.color||"#2D4660",borderColor:Pt.color||"#2D4660"}}),i.jsx("span",{className:"font-medium text-gray-900 flex-1",children:Pt.name}),i.jsx("span",{className:"text-xs text-gray-500",children:"Click to edit"})]}):ie&&Fe?i.jsx("div",{className:"space-y-3",children:i.jsxs("div",{className:"flex gap-3 items-center",children:[i.jsxs("div",{className:"flex-1",style:{animation:"dramaticSlideIn 1.2s cubic-bezier(0.34, 1.56, 0.64, 1) forwards"},children:[i.jsx("style",{children:`
                      @keyframes dramaticSlideIn {
                        from {
                          opacity: 0;
                          transform: translateX(150px) scale(0.9);
                        }
                        to {
                          opacity: 1;
                          transform: translateX(0) scale(1);
                        }
                      }
                    `}),i.jsx("input",{type:"text",value:$,onChange:D=>{xe(D.target.value),D.target.value.trim()&&!Ae&&setTimeout(()=>Ke(!0),200),re&&de(null)},placeholder:"Enter product name...",autoFocus:!0,className:"w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-0 focus:border-[#2D4660]"})]}),Ae&&i.jsxs("div",{className:"flex items-center gap-2 overflow-hidden",style:{animation:"slideInFromRight 1s ease-out forwards"},children:[i.jsx("style",{children:`
                        @keyframes slideInFromRight {
                          from {
                            opacity: 0;
                            transform: translateX(100px);
                          }
                          to {
                            opacity: 1;
                            transform: translateX(0);
                          }
                        }
                      `}),i.jsx("label",{className:"text-sm font-medium text-gray-700 whitespace-nowrap",children:"Product Color"}),i.jsx("button",{type:"button",onClick:()=>{gt(le||"#2D4660"),He(!0),setTimeout(()=>{var D;(D=document.getElementById("native-color-input"))==null||D.click()},100)},className:"block w-10 h-10 rounded-md border-2 border-gray-300 hover:border-gray-400 transition-all flex items-center justify-center overflow-hidden",style:le?{backgroundColor:le}:{backgroundColor:"#ffffff"},children:!le&&i.jsx("img",{src:KT,alt:"Color Picker",className:"w-8 h-8 object-contain"})})]})]})}):null,I.product&&i.jsxs("p",{className:"text-sm text-red-600 flex items-center",children:[i.jsx(tr,{className:"h-4 w-4 mr-1"}),I.product]}),re&&(Fe||!!Pt)&&i.jsxs("p",{className:"text-sm text-red-600 flex items-center",children:[i.jsx(tr,{className:"h-4 w-4 mr-1"}),re]})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Session Title *"}),i.jsx("input",{ref:Lt,type:"text",name:"title",value:W.title,onChange:Ms,placeholder:"e.g., Q3 Product Priorities, Sprint 5, Sprint 5: Mobile Updates",className:`w-full px-4 py-2 border rounded-md focus:outline-none focus:ring-0 focus:border-[#2d4660] ${I.title?"border-red-500":"border-gray-300"}`}),I.title&&i.jsxs("p",{className:"mt-1 text-sm text-red-600 flex items-center",children:[i.jsx(tr,{className:"h-4 w-4 mr-1"}),I.title]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Session Goal *"}),i.jsx("textarea",{name:"goal",value:W.goal,onChange:Ms,rows:2,placeholder:"Describe the purpose of this voting session...",className:`w-full px-4 py-2 border rounded-md focus:outline-none focus:ring-0 focus:border-[#2d4660] ${I.goal?"border-red-500":"border-gray-300"}`}),I.goal&&i.jsxs("p",{className:"mt-1 text-sm text-red-600 flex items-center",children:[i.jsx(tr,{className:"h-4 w-4 mr-1"}),I.goal]})]})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Votes Per User *"}),i.jsxs("div",{className:"flex items-center mb-3",children:[i.jsx("button",{type:"button",onClick:()=>se(D=>({...D,useAutoVotes:!D.useAutoVotes})),className:"flex-shrink-0 cursor-pointer w-5 h-5 flex items-center justify-center",children:W.useAutoVotes?i.jsx(xd,{className:"w-5 h-5 text-green-600"}):i.jsx(bd,{className:"w-5 h-5 text-gray-400"})}),i.jsxs("label",{onClick:()=>se(D=>({...D,useAutoVotes:!D.useAutoVotes})),className:"ml-2 text-sm text-gray-700 cursor-pointer",children:["Auto-calculate votes",i.jsx("br",{}),"(half of feature count, minimum 1)"]})]}),!W.useAutoVotes&&i.jsxs(i.Fragment,{children:[i.jsx("input",{type:"number",name:"votesPerUser",value:W.votesPerUser,onChange:Ms,min:"1",max:"100",className:`w-full px-4 py-2 border rounded-md focus:outline-none focus:ring-0 focus:border-[#2d4660] ${I.votesPerUser?"border-red-500":"border-gray-300"}`}),I.votesPerUser&&i.jsxs("p",{className:"mt-1 text-sm text-red-600 flex items-center",children:[i.jsx(tr,{className:"h-4 w-4 mr-1"}),I.votesPerUser]})]}),i.jsx("p",{className:"mt-2 text-xs text-gray-500",children:W.useAutoVotes?"Votes will automatically be set to half the number of features (minimum 1).":"Each stakeholder receives this many votes."})]}),i.jsxs("div",{children:[i.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Start Date *"}),i.jsx("input",{type:"date",name:"startDate",value:W.startDate||"",onChange:Ms,onFocus:D=>{W.startDate||ln("startDate")},autoComplete:"off",className:`w-full px-4 py-2 border rounded-md focus:outline-none focus:ring-0 focus:border-[#2d4660] [&::-webkit-calendar-picker-indicator]:cursor-pointer ${I.startDate?"border-red-500":"border-gray-300"}`,style:W.startDate?{}:{color:"transparent"},onBlur:D=>{D.target.value?D.target.style.color="":D.target.style.color="transparent"}}),I.startDate&&i.jsxs("p",{className:"mt-1 text-sm text-red-600 flex items-center",children:[i.jsx(tr,{className:"h-4 w-4 mr-1"}),I.startDate]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"End Date *"}),i.jsx("input",{type:"date",name:"endDate",value:W.endDate||"",onChange:Ms,onFocus:D=>{W.endDate||ln("endDate")},autoComplete:"off",className:`w-full px-4 py-2 border rounded-md focus:outline-none focus:ring-0 focus:border-[#2d4660] [&::-webkit-calendar-picker-indicator]:cursor-pointer ${I.endDate?"border-red-500":"border-gray-300"}`,style:W.endDate?{}:{color:"transparent",position:"relative"},onBlur:D=>{D.target.value?D.target.style.color="":D.target.style.color="transparent"}}),I.endDate&&i.jsxs("p",{className:"mt-1 text-sm text-red-600 flex items-center",children:[i.jsx(tr,{className:"h-4 w-4 mr-1"}),I.endDate]})]})]}),(W.startDate||W.endDate)&&i.jsxs("div",{className:"mt-1 grid grid-cols-1 sm:grid-cols-2 gap-3",children:[i.jsx("div",{}),i.jsx("div",{className:"flex justify-end",children:i.jsx("button",{type:"button",onClick:()=>{se(D=>({...D,startDate:"",endDate:""}))},className:"text-sm text-[#2D4660] hover:text-[#173B65] underline",children:"Clear Dates"})})]})]})]}),I.submit&&i.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-3 text-sm text-red-700 flex items-center",children:[i.jsx(tr,{className:"h-4 w-4 mr-2"}),I.submit]}),i.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t",children:[i.jsx(yt,{type:"button",variant:"secondary",onClick:Oa,disabled:Me||!gn&&!Ne&&!(Fe&&$.trim()&&le)&&!Pt,children:Me?"Saving...":"Save Draft"}),i.jsx(yt,{type:"submit",variant:Fe&&$.trim()&&le?"gold":"primary",disabled:Me||!gn&&!Ne&&!(Fe&&$.trim()&&le)&&!Pt,className:`transition-all duration-500 ease-in-out ${Fe&&$.trim()&&le?"relative overflow-hidden":""}`,children:Me?"Creating...":Fe&&$.trim()&&le?i.jsxs(i.Fragment,{children:[i.jsxs("span",{className:"relative z-10 flex items-center",children:[i.jsx(Dn,{className:"h-4 w-4 mr-2"}),"Create New Product and Session"]}),i.jsx("span",{className:"absolute top-1 left-1/4 w-1 h-1 bg-white rounded-full animate-ping opacity-75",style:{animationDelay:"0ms",animationDuration:"1.5s"}}),i.jsx("span",{className:"absolute top-2 right-1/3 w-1 h-1 bg-white rounded-full animate-ping opacity-75",style:{animationDelay:"300ms",animationDuration:"1.5s"}}),i.jsx("span",{className:"absolute bottom-2 left-1/3 w-1 h-1 bg-white rounded-full animate-ping opacity-75",style:{animationDelay:"600ms",animationDuration:"1.5s"}}),i.jsx("span",{className:"absolute bottom-1 right-1/4 w-1 h-1 bg-white rounded-full animate-ping opacity-75",style:{animationDelay:"900ms",animationDuration:"1.5s"}})]}):"Create Session"})]})]})}),Ht&&i.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",onClick:()=>He(!1),children:i.jsx("div",{className:"bg-white rounded-lg shadow-xl px-3 py-2 w-auto mx-4",onClick:D=>D.stopPropagation(),children:i.jsxs("div",{className:"flex gap-3 items-stretch",children:[i.jsxs("div",{className:"flex-shrink-0",style:{width:"240px",height:"260px"},children:[i.jsx("input",{id:"native-color-input",type:"color",value:ft,onChange:D=>gt(D.target.value),ref:D=>{D&&Ht&&setTimeout(()=>D.click(),50)},className:"opacity-0 absolute",style:{width:"1px",height:"1px"}}),i.jsx("div",{className:"w-full h-full"})]}),i.jsxs("button",{type:"button",onClick:()=>{M(ft),He(!1),setTimeout(()=>{var D;(D=Lt.current)==null||D.focus()},100)},className:"px-6 rounded-lg text-white font-bold shadow-lg hover:shadow-xl transition-all flex flex-col items-center justify-center gap-3 text-lg flex-shrink-0",style:{backgroundColor:ft,height:"260px",minWidth:"100px"},children:[i.jsx(jr,{className:"h-8 w-8"}),i.jsxs("div",{className:"text-center leading-tight",children:[i.jsx("div",{children:"Looks"}),i.jsx("div",{children:"Good"})]})]})]})})}),P==="stakeholder"&&y.length>0&&i.jsx("div",{className:"relative z-10 mt-8 bg-blue-50 border border-blue-200 rounded-lg p-4",children:i.jsxs("div",{className:"flex items-start",children:[i.jsx(ls,{className:"h-5 w-5 text-blue-600 mr-3 mt-0.5"}),i.jsxs("div",{className:"text-sm text-blue-800",children:[i.jsx("p",{className:"font-medium mb-1",children:"About Voting Sessions:"}),i.jsx("p",{children:"Click on any session card to cast your votes. You can change your votes at any time before the voting period ends."})]})]})}),P==="admin"&&ke.length>0&&he.length===0&&i.jsx("div",{className:"relative z-10 mt-8 bg-blue-50 border border-blue-200 rounded-lg p-4",children:i.jsxs("div",{className:"flex items-start",children:[i.jsx(ls,{className:"h-5 w-5 text-blue-600 mr-3 mt-0.5"}),i.jsxs("div",{className:"text-sm text-blue-800",children:[i.jsx("p",{className:"font-medium mb-1",children:"About Voting Sessions:"}),i.jsx("p",{children:"Click on any session card to cast your votes. You can change your votes at any time before the voting period ends."})]})]})}),P==="admin"&&he.length>0&&i.jsx("div",{className:"relative z-10 mt-8 bg-blue-50 border border-blue-200 rounded-lg p-4",children:i.jsxs("div",{className:"flex items-start",children:[i.jsx(hs,{className:"h-5 w-5 text-blue-600 mr-3 mt-0.5"}),i.jsxs("div",{className:"text-sm text-blue-800",children:[i.jsx("p",{className:"font-medium mb-1",children:"Managing Sessions:"}),i.jsx("p",{children:'Click "Email Invite to Stakeholders" on any session card to send invitation links. Use the Admins and Stakeholders buttons to manage access.'})]})]})}),P==="system-admin"&&i.jsx("div",{className:"relative z-10 mt-8 bg-purple-50 border border-purple-200 rounded-lg p-4",children:i.jsxs("div",{className:"flex items-start",children:[i.jsx(us,{className:"h-5 w-5 text-purple-600 mr-3 mt-0.5"}),i.jsxs("div",{className:"text-sm text-purple-900",children:[i.jsx("p",{className:"font-medium mb-1",children:"System Admin Tips:"}),i.jsxs("ul",{className:"list-disc list-inside space-y-1",children:[i.jsx("li",{children:"Use this view to audit every session across the tenant without switching teams."}),i.jsx("li",{children:"Jump into any card to open the admin dashboard and assist local admins."}),i.jsx("li",{children:"Need a quick rollout? Click Create Session above to spin up a new voting round for any product."})]})]})]})}),i.jsx(YT,{currentRole:A&&P==="system-admin"?"system-admin":P==="admin"?"session-admin":"stakeholder",onSelectStakeholder:()=>z("stakeholder"),onSelectSessionAdmin:()=>z("admin"),onSelectSystemAdmin:A?()=>z("system-admin"):void 0,showRoleToggle:N||A}),i.jsxs(fn,{isOpen:Nr,onClose:()=>{We||fa()},title:ht?(()=>{const D=nn(ht,X);return D?`${D}  ${ht.title}`:`Email Stakeholders  ${ht.title}`})():"Email Stakeholders",maxWidth:"max-w-3xl",children:[i.jsxs("div",{className:"space-y-6",children:[Oe&&i.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 text-sm rounded-lg p-3",children:Oe}),Be?i.jsxs("div",{className:"py-12 flex flex-col items-center justify-center text-gray-600",children:[i.jsx("div",{className:"animate-spin rounded-full h-10 w-10 border-b-2 border-[#2D4660] mb-3"}),"Loading stakeholders..."]}):i.jsxs(i.Fragment,{children:[i.jsxs("div",{children:[i.jsxs("div",{className:"flex items-center justify-between mb-2",children:[i.jsxs("h4",{className:"text-sm font-semibold text-gray-900",children:["Stakeholders (",Dr.length,")"]}),Dr.length>0&&i.jsx("button",{type:"button",onClick:en,className:"text-sm font-medium text-blue-600 hover:text-blue-700",children:Qs?"Deselect All":"Select All"})]}),i.jsx("div",{className:"border border-gray-200 rounded-lg max-h-64 overflow-y-auto divide-y divide-gray-100",children:Dr.length===0?i.jsx("div",{className:"p-4 text-sm text-gray-500 text-center",children:"No stakeholders are assigned to this session yet."}):Dr.map(D=>{const q=D.user_email.toLowerCase(),ce=gr.includes(q);return i.jsxs("div",{className:"flex items-center justify-between px-4 py-3 hover:bg-gray-50",children:[i.jsxs("div",{className:"flex-1 cursor-pointer",onClick:()=>Da(D.user_email),children:[i.jsx("p",{className:"text-sm font-medium text-gray-900",children:D.user_name||"Unnamed Stakeholder"}),i.jsx("p",{className:"text-xs text-gray-500",children:D.user_email})]}),i.jsx("button",{type:"button",onClick:Ee=>{Ee.stopPropagation(),Da(D.user_email)},className:"flex-shrink-0 ml-4 w-5 h-5 flex items-center justify-center",children:ce?i.jsx(xd,{className:"w-5 h-5 text-green-600"}):i.jsx(bd,{className:"w-5 h-5 text-gray-400"})})]},D.id)})})]}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Subject"}),i.jsx("input",{type:"text",value:bi,onChange:D=>sr(D.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-1 focus:ring-[#2D4660]",placeholder:"Email subject"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email Body"}),i.jsx("textarea",{value:ps,onChange:D=>ee(D.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-1 focus:ring-[#2D4660]",rows:10,placeholder:"Enter your custom message here. A 'Go Vote!' button will be automatically added below your message."}),i.jsx("div",{className:"mt-2 p-3 bg-blue-50 border border-blue-200 rounded-md",children:i.jsxs("p",{className:"text-xs text-blue-800",children:[i.jsx("strong",{children:"Note:"}),` A gold "Go Vote!" button will be automatically added to the email below your message. You don't need to include the link in your text.`]})})]})]})]})]}),i.jsxs("div",{className:"flex justify-end gap-3 pt-6 border-t mt-6",children:[i.jsx(yt,{variant:"secondary",onClick:fa,disabled:We,children:"Cancel"}),i.jsx(yt,{variant:"primary",onClick:ns,disabled:We||Dr.length===0||gr.length===0,children:We?"Sending...":`Send to ${gr.length} Stakeholder${gr.length===1?"":"s"}`})]})]}),i.jsx(fn,{isOpen:!!Ut,onClose:Bt,title:"",hideHeader:!0,maxWidth:"max-w-md",hideCloseButton:!1,children:i.jsxs("div",{className:"py-6 px-4",children:[i.jsxs("div",{className:"text-center mb-6",children:[i.jsx("div",{className:"mx-auto h-16 w-16 rounded-full bg-green-100 flex items-center justify-center mb-4",children:i.jsx(jr,{className:"h-10 w-10 text-green-600"})}),i.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-1",children:"Invites Sent!"}),i.jsxs("p",{className:"text-sm text-gray-600",children:["Successfully emailed ",(Ut==null?void 0:Ut.count)??0," stakeholder",(Ut==null?void 0:Ut.count)===1?"":"s"," for"," ",i.jsx("span",{className:"font-semibold text-gray-900",children:Ut==null?void 0:Ut.sessionTitle}),"."]})]}),(Ut==null?void 0:Ut.stakeholders)&&Ut.stakeholders.length>0&&i.jsxs("div",{className:"mt-6 border-t border-gray-200 pt-6",children:[i.jsx("h4",{className:"text-sm font-semibold text-gray-900 mb-3",children:"Recipients:"}),i.jsx("div",{className:"max-h-64 overflow-y-auto space-y-2",children:Ut.stakeholders.map((D,q)=>i.jsxs("div",{className:"flex items-start py-2 px-3 bg-gray-50 rounded-md",children:[i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsx("p",{className:"text-sm font-medium text-gray-900 truncate",children:D.name}),i.jsx("p",{className:"text-xs text-gray-500 truncate",children:D.email})]}),i.jsx(jr,{className:"h-4 w-4 text-green-600 flex-shrink-0 ml-2 mt-1"})]},q))})]})]})}),De&&i.jsxs(fn,{isOpen:!0,onClose:()=>Pe(null),title:"Delete Product",children:[i.jsxs("p",{className:"text-sm text-gray-700 mb-4",children:["Are you sure you want to delete ",i.jsx("span",{className:"font-semibold",children:De.name}),"? This will remove it for everyone in your tenant."]}),i.jsxs("div",{className:"flex justify-end gap-3",children:[i.jsx(yt,{variant:"secondary",onClick:()=>Pe(null),disabled:et,children:"Cancel"}),i.jsx(yt,{variant:"danger",onClick:Xt,disabled:et,children:et?"Deleting":"Delete"})]})]}),Dt&&i.jsx(fn,{isOpen:!0,onClose:()=>{_r(null),Sr(""),Zr(null),Ir(!1)},title:"Edit Product",children:i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Product Name *"}),i.jsx("input",{type:"text",value:Ur,onChange:D=>Sr(D.target.value),placeholder:"Enter product name",className:"w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-0 focus:border-[#2D4660]"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Product Color"}),i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("button",{type:"button",onClick:()=>{ts(pr||"#2D4660"),Ir(!0)},className:"block w-12 h-12 rounded-md border-2 border-gray-300 hover:border-gray-400 transition-all flex items-center justify-center overflow-hidden",style:pr?{backgroundColor:pr}:{backgroundColor:"#ffffff"},children:!pr&&i.jsx("img",{src:"/colorpicker.png",alt:"Color Picker",className:"w-8 h-8 object-contain"})}),i.jsx("span",{className:"text-sm text-gray-600",children:pr||"No color selected"})]})]}),i.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t",children:[i.jsx(yt,{variant:"secondary",onClick:()=>{_r(null),Sr(""),Zr(null),Ir(!1)},disabled:Ss,children:"Cancel"}),i.jsx(yt,{variant:"primary",onClick:async()=>{if(!(!(Dt!=null&&Dt.id)||!Ur.trim())){es(!0);try{await xE(Dt.id,{name:Ur.trim(),color_hex:pr});const D=(e==null?void 0:e.tenant_id)??(e==null?void 0:e.tenantId);if(D){const q=await qa(D);je(q.sort((Ue,me)=>Ue.name.localeCompare(me.name)));const ce={},Ee={};q.forEach(Ue=>{ce[Ue.id]=Ue.name||"",Ue.color_hex&&(Ee[Ue.id]=Ue.color_hex)}),K(ce),U(Ee)}_r(null),Sr(""),Zr(null),Ir(!1),await r(),await ei()}catch(D){console.error("Error updating product:",D),alert("Failed to update product. Please try again.")}finally{es(!1)}}},disabled:Ss||!Ur.trim(),children:Ss?"Updating...":"Update Product"})]})]})}),Ns&&i.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",onClick:()=>Ir(!1),children:i.jsx("div",{className:"bg-white rounded-lg shadow-xl px-3 py-2 w-auto mx-4",onClick:D=>D.stopPropagation(),children:i.jsxs("div",{className:"flex gap-3 items-stretch",children:[i.jsxs("div",{className:"flex-shrink-0",style:{width:"240px",height:"260px"},children:[i.jsx("input",{id:"edit-native-color-input",type:"color",value:Rs,onChange:D=>ts(D.target.value),ref:D=>{D&&Ns&&setTimeout(()=>D.click(),50)},className:"opacity-0 absolute",style:{width:"1px",height:"1px"}}),i.jsx("div",{className:"w-full h-full"})]}),i.jsxs("button",{type:"button",onClick:()=>{Zr(Rs),Ir(!1)},className:"px-6 rounded-lg text-white font-bold shadow-lg hover:shadow-xl transition-all flex flex-col items-center justify-center gap-3 text-lg flex-shrink-0",style:{backgroundColor:Rs,height:"260px",minWidth:"100px"},children:[i.jsx(jr,{className:"h-8 w-8"}),i.jsxs("div",{className:"text-center leading-tight",children:[i.jsx("div",{children:"Looks"}),i.jsx("div",{children:"Good"})]})]})]})})})]})}function qZ(){const{currentUser:e,setCurrentSession:t,refreshSessions:r,setCurrentUser:n}=Ea(),s=Js(),a=async()=>{try{await _e.auth.signOut()}catch{}try{t(null)}catch{}n(null);try{localStorage.removeItem("voting_system_current_session"),localStorage.removeItem("azureDevOpsAuthInProgress"),sessionStorage.removeItem("oauth_return_path"),sessionStorage.removeItem("oauth_action")}catch{}s("/login",{replace:!0})},[l,u]=v.useState({title:"",goal:"",votesPerUser:10,useAutoVotes:!0,startDate:new Date().toISOString().split("T")[0],endDate:new Date(Date.now()+10080*60*1e3).toISOString().split("T")[0]}),[d,m]=v.useState({}),[f,p]=v.useState(!1),[y,x]=v.useState(!1),[j,w]=v.useState([]),[S,_]=v.useState(""),[E,C]=v.useState(""),[A,T]=v.useState(!1),[P,z]=v.useState(!1),[J,H]=v.useState(null),[fe,X]=v.useState(!1),[K,ae]=v.useState(!1);v.useEffect(()=>{(async()=>{if(!e)return;const se=await Ri(e.id);X(se);const{data:I}=await _e.from("session_admins").select("session_id").eq("user_id",e.id).limit(1);ae(I&&I.length>0)})()},[e]),v.useEffect(()=>{(async()=>{var I;if(!e){w([]),_("");return}const se=e.tenant_id??e.tenantId??null;if(!se){w([]),_(""),H("No tenant assigned. Products cannot be loaded.");return}T(!0),H(null);try{const B=await qa(se);w(B),_(((I=B[0])==null?void 0:I.id)??"")}catch(B){console.error("Error loading products for create session:",B),Xa!=null&&Xa(B)?H("Products are not configured yet. Please create the `products` table in Supabase."):H("Unable to load products. You can still create a session without a product tag."),w([]),_("")}finally{T(!1)}})()},[e]);const U=()=>{const W="ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";let se="";for(let I=0;I<8;I++)se+=W.charAt(Math.floor(Math.random()*W.length));return se},ne=()=>{const W={};l.title.trim()||(W.title="Session title is required"),l.goal.trim()||(W.goal="Session goal is required"),l.useAutoVotes||(l.votesPerUser<1&&(W.votesPerUser="Votes per user must be at least 1"),l.votesPerUser>100&&(W.votesPerUser="Votes per user cannot exceed 100"));const se=new Date(l.startDate);return new Date(l.endDate)<=se&&(W.endDate="End date must be after start date"),!J&&j.length>0&&!S&&(W.product="Please select a product for this session"),m(W),Object.keys(W).length===0},G=async W=>{if(W.preventDefault(),!(!ne()||!e)){p(!0);try{const se=U(),I=j.find(Me=>Me.id===S)||null;if(I!=null&&I.id&&await jE(I.id)){m({submit:`There is already an active session for ${I.name}. Each product can only have one active session at a time.`}),p(!1);return}const B=await fv({title:l.title,goal:l.goal,votes_per_user:l.votesPerUser,use_auto_votes:l.useAutoVotes,start_date:l.startDate,end_date:l.endDate,is_active:!0,session_code:se,product_id:(I==null?void 0:I.id)??null,product_name:null});await El(B.id,e.id),await r(),x(!0),setTimeout(()=>{t(B),s("/admin")},3e3)}catch(se){console.error("Error creating session:",se),m({submit:"Failed to create session. Please try again."})}finally{p(!1)}}},ie=async()=>{if(!e)return;const W=e.tenant_id??e.tenantId??null;if(!W){H("Cannot create products because no tenant is associated with your account.");return}const se=E.trim();if(!se){H("Product name is required.");return}z(!0),H(null);try{const I=await dv(W,se);w(B=>[...B,I].sort((Se,Ie)=>Se.name.localeCompare(Ie.name))),_(I.id),C("")}catch(I){console.error("Error creating product:",I),H(I instanceof Error?I.message:"Unable to create product. Please try again.")}finally{z(!1)}},te=W=>{const{name:se,value:I}=W.target;u(B=>({...B,[se]:se==="votesPerUser"?parseInt(I)||0:I})),d[se]&&m(B=>{const Me={...B};return delete Me[se],Me})};return y?i.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center p-4",children:i.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-8 max-w-md w-full text-center",children:[i.jsx("div",{className:"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4",children:i.jsx(jr,{className:"h-10 w-10 text-green-600"})}),i.jsx("h2",{className:"text-2xl font-bold text-[#2d4660] mb-2",children:"Session Created!"}),i.jsx("p",{className:"text-gray-600 mb-6",children:"Your voting session has been created successfully."}),i.jsxs("div",{className:"bg-blue-50 border-2 border-blue-200 rounded-lg p-4 mb-6",children:[i.jsx("p",{className:"text-sm text-gray-600 mb-2",children:"Success!"}),i.jsx("p",{className:"text-base text-[#2d4660] font-medium",children:"Your session has been created."}),i.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"You can now invite stakeholders from your session dashboard."})]}),i.jsx("p",{className:"text-sm text-gray-500",children:"Redirecting to admin dashboard..."})]})}):i.jsxs("div",{className:"container mx-auto p-4 max-w-6xl min-h-screen pb-8",children:[i.jsx("div",{className:"hidden md:flex md:justify-center mb-2",children:i.jsx("img",{src:vi,alt:"New Millennium Building Systems Logo",className:"-mt-4 cursor-pointer hover:opacity-80 transition-opacity",style:{height:"96px",width:"auto"},onClick:()=>s("/sessions")})}),i.jsxs("div",{className:"flex justify-between items-center mb-6",children:[i.jsxs("div",{className:"flex items-center",children:[i.jsx("img",{src:Pa,alt:"New Millennium Building Systems Logo",className:"mr-4 md:hidden",style:{width:"40px",height:"40px",objectFit:"contain"}}),i.jsx("button",{onClick:()=>s("/sessions"),className:"mr-2 p-1 rounded-full hover:bg-gray-200 cursor-pointer",children:i.jsx(Fd,{className:"h-6 w-6"})}),i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsx("h1",{className:"text-2xl font-bold text-[#2d4660] md:text-3xl",children:"Create Voting Session"}),e&&i.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:[e.name,fe&&i.jsx("span",{className:"ml-2 inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium bg-[#C89212] text-white",children:"System Admin"}),!fe&&K&&i.jsx("span",{className:"ml-2 inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium bg-[#576C71] text-white",children:"Session Admin"})]})]})]}),i.jsxs("button",{onClick:a,className:"flex items-center px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-colors",children:[i.jsx(Jn,{className:"h-4 w-4 mr-2"}),i.jsx("span",{className:"hidden sm:inline",children:"Logout"})]})]}),i.jsx("div",{className:"relative z-10 bg-white rounded-lg shadow-md p-6",children:i.jsxs("form",{onSubmit:G,className:"space-y-6",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Session Title *"}),i.jsx("input",{type:"text",name:"title",value:l.title,onChange:te,placeholder:"e.g., Q2 2025 Product Roadmap",className:`w-full px-4 py-2 border rounded-md focus:ring-2 focus:ring-[#2d4660] focus:border-transparent ${d.title?"border-red-500":"border-gray-300"}`}),d.title&&i.jsxs("p",{className:"mt-1 text-sm text-red-600 flex items-center",children:[i.jsx(tr,{className:"h-4 w-4 mr-1"}),d.title]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Session Goal *"}),i.jsx("textarea",{name:"goal",value:l.goal,onChange:te,rows:3,placeholder:"Describe the purpose of this voting session...",className:`w-full px-4 py-2 border rounded-md focus:ring-2 focus:ring-[#2d4660] focus:border-transparent ${d.goal?"border-red-500":"border-gray-300"}`}),d.goal&&i.jsxs("p",{className:"mt-1 text-sm text-red-600 flex items-center",children:[i.jsx(tr,{className:"h-4 w-4 mr-1"}),d.goal]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Product *"}),A?i.jsx("p",{className:"text-sm text-gray-500",children:"Loading products..."}):j.length>0?i.jsxs("select",{value:S,onChange:W=>{_(W.target.value),d.product&&m(se=>{const I={...se};return delete I.product,I})},className:`w-full px-4 py-2 border rounded-md focus:ring-2 focus:ring-[#2d4660] focus:border-transparent ${d.product?"border-red-500":"border-gray-300"}`,children:[i.jsx("option",{value:"",children:"Select a product"}),j.map(W=>i.jsx("option",{value:W.id,children:W.name},W.id))]}):i.jsx("p",{className:"text-sm text-gray-500",children:J??"No products found. Add a product below to associate this session."}),d.product&&i.jsxs("p",{className:"mt-1 text-sm text-red-600 flex items-center",children:[i.jsx(tr,{className:"h-4 w-4 mr-1"}),d.product]}),J&&j.length>0&&i.jsx("p",{className:"mt-1 text-sm text-red-600",children:J}),i.jsxs("div",{className:"mt-4",children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Add a new product"}),i.jsxs("div",{className:"flex flex-col sm:flex-row gap-2",children:[i.jsx("input",{type:"text",value:E,onChange:W=>{C(W.target.value),J&&H(null)},placeholder:"e.g., Catalyst Cloud",className:"w-full px-4 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-[#2d4660] focus:border-transparent"}),i.jsx("button",{type:"button",onClick:ie,disabled:P,className:"px-4 py-2 bg-[#2d4660] text-white rounded-md hover:bg-[#1d3a53] transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:P?"Adding...":"Add Product"})]}),i.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"New products become available immediately for all session admins in your tenant."})]})]}),i.jsxs("div",{children:[i.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[i.jsx(ls,{className:"h-4 w-4 inline mr-1"}),"Votes Per User *"]}),i.jsxs("div",{className:"flex items-center mb-3",children:[i.jsx("input",{type:"checkbox",id:"useAutoVotes",checked:l.useAutoVotes,onChange:W=>u(se=>({...se,useAutoVotes:W.target.checked})),className:"h-4 w-4 cursor-pointer rounded border-gray-300 accent-[#3A9B5C] focus:outline-none focus:ring-0"}),i.jsx("label",{htmlFor:"useAutoVotes",className:"ml-2 text-sm text-gray-700 cursor-pointer",children:"Auto-calculate votes (half of feature count, minimum 1)"})]}),!l.useAutoVotes&&i.jsxs(i.Fragment,{children:[i.jsx("input",{type:"number",name:"votesPerUser",value:l.votesPerUser,onChange:te,min:"1",max:"100",className:`w-full px-4 py-2 border rounded-md focus:ring-2 focus:ring-[#2d4660] focus:border-transparent ${d.votesPerUser?"border-red-500":"border-gray-300"}`}),d.votesPerUser&&i.jsxs("p",{className:"mt-1 text-sm text-red-600 flex items-center",children:[i.jsx(tr,{className:"h-4 w-4 mr-1"}),d.votesPerUser]})]}),i.jsx("p",{className:"mt-2 text-sm text-gray-500",children:l.useAutoVotes?"Votes will automatically be set to half the number of features (1 feature = 1 vote, 2 features = 1 vote, 4 features = 2 votes, etc.)":"Each stakeholder will have this many votes to distribute across features"})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[i.jsx(sn,{className:"h-4 w-4 inline mr-1"}),"Start Date *"]}),i.jsx("input",{type:"date",name:"startDate",value:l.startDate,onChange:te,className:"w-full px-4 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-[#2d4660] focus:border-transparent"})]}),i.jsxs("div",{children:[i.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[i.jsx(sn,{className:"h-4 w-4 inline mr-1"}),"End Date *"]}),i.jsx("input",{type:"date",name:"endDate",value:l.endDate,onChange:te,className:`w-full px-4 py-2 border rounded-md focus:ring-2 focus:ring-[#2d4660] focus:border-transparent ${d.endDate?"border-red-500":"border-gray-300"}`}),d.endDate&&i.jsxs("p",{className:"mt-1 text-sm text-red-600 flex items-center",children:[i.jsx(tr,{className:"h-4 w-4 mr-1"}),d.endDate]})]})]}),i.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:i.jsxs("div",{className:"flex items-start",children:[i.jsx(hs,{className:"h-5 w-5 text-blue-600 mr-3 mt-0.5"}),i.jsxs("div",{className:"text-sm text-blue-800",children:[i.jsx("p",{className:"font-medium mb-1",children:"Next Steps:"}),i.jsxs("ul",{className:"list-disc list-inside space-y-1",children:[i.jsx("li",{children:"After creating the session, you'll be assigned as the admin"}),i.jsx("li",{children:"You can add stakeholders and other admins from the admin dashboard"}),i.jsx("li",{children:'Use the "Email Invite" button to send stakeholders a link to join'})]})]})]})}),d.submit&&i.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:i.jsxs("p",{className:"text-sm text-red-800 flex items-center",children:[i.jsx(tr,{className:"h-4 w-4 mr-2"}),d.submit]})}),i.jsxs("div",{className:"flex justify-end space-x-3 pt-4 border-t",children:[i.jsx("button",{type:"button",onClick:()=>s("/sessions"),className:"px-6 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50 transition-colors",disabled:f,children:"Cancel"}),i.jsx("button",{type:"submit",className:"px-6 py-2 bg-[#2d4660] text-white rounded-md hover:bg-[#1d3a53] transition-colors disabled:opacity-50 disabled:cursor-not-allowed",disabled:f,children:f?"Creating...":"Create Session"})]})]})})]})}function HZ({products:e,value:t,onChange:r,label:n,error:s}){const[a,l]=v.useState(!1),u=v.useRef(null);v.useEffect(()=>{function f(p){u.current&&!u.current.contains(p.target)&&l(!1)}return document.addEventListener("mousedown",f),()=>document.removeEventListener("mousedown",f)},[]);const d=e.find(f=>f.id===t),m=d?Yn(d.name,d.color_hex??null):null;return i.jsxs("div",{ref:u,className:"relative",children:[n&&i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:n}),i.jsxs("div",{onClick:()=>l(!a),className:`w-full px-3 py-2 border rounded-md bg-white cursor-pointer flex items-center justify-between hover:border-gray-400 ${s?"border-red-500":"border-gray-300"}`,children:[i.jsxs("div",{className:"flex items-center gap-2 flex-1 min-w-0",children:[d&&m&&i.jsx("div",{className:"w-4 h-4 rounded flex-shrink-0",style:{backgroundColor:m.background}}),i.jsx("span",{className:`text-sm truncate ${t?"text-gray-900":"text-gray-400"}`,children:d?d.name:"Select a Product"})]}),i.jsx(ds,{className:`h-4 w-4 text-gray-400 transition-transform flex-shrink-0 ${a?"transform rotate-180":""}`})]}),a&&i.jsx("div",{className:"absolute z-50 w-full mt-1 bg-white border border-gray-300 rounded-md shadow-lg max-h-60 overflow-y-auto",children:e.length===0?i.jsx("div",{className:"px-3 py-2 text-sm text-gray-500 text-center",children:"No products available"}):e.map(f=>{const p=Yn(f.name,f.color_hex??null),y=t===f.id;return i.jsxs("div",{onClick:()=>{r(f.id),l(!1)},className:`px-3 py-2 cursor-pointer hover:bg-gray-50 flex items-center gap-2 ${y?"bg-gray-50":""}`,children:[i.jsx("div",{className:"w-4 h-4 rounded flex-shrink-0",style:{backgroundColor:p.background}}),i.jsx("span",{className:"text-sm text-gray-900 flex-1",children:f.name}),y&&i.jsx(jr,{className:"h-4 w-4 text-gray-400 flex-shrink-0"})]},f.id)})})]})}function KZ(){const{currentSession:e,currentUser:t,setCurrentUser:r,setCurrentSession:n}=Ea(),s=Js(),a=async()=>{try{await _e.auth.signOut()}catch{}try{n(null)}catch{}r(null);try{localStorage.removeItem("voting_system_current_session"),localStorage.removeItem("azureDevOpsAuthInProgress"),sessionStorage.removeItem("oauth_return_path"),sessionStorage.removeItem("oauth_action")}catch{}C(!1),s("/login",{replace:!0})},[l,u]=v.useState([]),[d,m]=v.useState(!0),[f,p]=v.useState(!1),[y,x]=v.useState({name:"",email:""}),[j,w]=v.useState({}),[S,_]=v.useState(!1),[E,C]=v.useState(!1),A=v.useRef(null),[T,P]=v.useState([]),[z,J]=v.useState(""),[H,fe]=v.useState([]),[X,K]=v.useState([]),[ae,U]=v.useState({}),[ne,G]=v.useState(!1),[ie,te]=v.useState(!1);v.useEffect(()=>{if(!E)return;const Z=$=>{A.current&&!A.current.contains($.target)&&C(!1)};return document.addEventListener("mousedown",Z),document.addEventListener("touchstart",Z,{passive:!0}),()=>{document.removeEventListener("mousedown",Z),document.removeEventListener("touchstart",Z)}},[E]),v.useEffect(()=>{if(!e){s("/sessions");return}I(),W()},[e,s]),v.useEffect(()=>{(async()=>{if(!t)return;const $=await Ri(t.id);G($);const{data:xe}=await _e.from("session_admins").select("session_id").eq("user_id",t.id).limit(1);te(xe&&xe.length>0)})()},[t]);const W=async()=>{try{const Z=await Ix(),$=await qo(),xe=new Date,le=Z.filter(De=>$.some(Pe=>Pe.product_id!==De.id?!1:new Date(Pe.end_date)>=xe));P(le);const M={};le.forEach(De=>{M[De.id]=De.name}),U(M)}catch(Z){console.error("Error loading products:",Z)}},se=async Z=>{try{const $=await qo(),xe=new Date,le=$.filter(M=>M.product_id!==Z?!1:new Date(M.end_date)>=xe);fe(le)}catch($){console.error("Error loading sessions:",$),fe([])}};v.useEffect(()=>{z?(se(z),K([])):(fe([]),K([]))},[z]);const I=async()=>{if(e){m(!0);try{const Z=await kE(e.id);u(Z)}catch(Z){console.error("Error loading stakeholders:",Z)}finally{m(!1)}}},B=Z=>/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(Z),Me=Z=>{const $=new Date,xe=new Date(Z.start_date),le=new Date(Z.end_date);return Z.is_active&&$>=xe&&$<=le?{text:"Active",color:"text-green-600"}:$<xe?{text:"Upcoming",color:"text-blue-600"}:{text:"Ended",color:"text-gray-500"}},Se=Z=>{const $=new Date(Z.start_date),xe=new Date(Z.end_date),le=$.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}),M=xe.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"});return`${le} - ${M}`},Ie=async Z=>{Z.preventDefault();const $={};if(y.name.trim()||($.name="Name is required"),y.email.trim()?B(y.email)||($.email="Invalid email address"):$.email="Email is required",z||($.product="Please select a product"),X.length===0&&($.sessions="Please select at least one session"),w($),!(Object.keys($).length>0)){_(!0);try{for(const xe of X)await _E({session_id:xe,user_name:y.name,user_email:y.email,has_voted:!1});for(const xe of X){const le=H.find(M=>M.id===xe);if(le)try{const M=window.location.pathname.startsWith("/feature-voting-app")?"/feature-voting-app":"",De=`${window.location.origin}${M}/login?session=${le.session_code}`;await Ho({to:y.email,subject:`You're invited to vote: ${le.title}`,text:`Hi,

You've been invited to vote in "${le.title}".

Open: ${De}

Best regards,
${(t==null?void 0:t.name)||""}`,html:`<p>Hi,</p><p>You've been invited to vote in <strong>${le.title}</strong>.</p><p><a href="${De}">Open the Feature Voting System</a></p><p>Best regards,<br/>${(t==null?void 0:t.name)||""}</p>`})}catch{try{const M=CE(le,y.email,(t==null?void 0:t.name)||"");window.location.href=M}catch{}}}await I(),x({name:"",email:""}),J(""),K([]),p(!1),w({})}catch(xe){console.error("Error adding stakeholder:",xe),w({submit:"Failed to add stakeholder. Please try again."})}finally{_(!1)}}},je=async Z=>{if(e&&confirm("Are you sure you want to remove this stakeholder?"))try{await mv(e.id,Z),await I()}catch($){console.error("Error removing stakeholder:",$),alert("Failed to remove stakeholder")}},Ne=Z=>{const xe=Z.split("T")[0].split(" ")[0].split("-");let le;if(xe.length===3){const M=parseInt(xe[0],10),De=parseInt(xe[1],10)-1,Pe=parseInt(xe[2],10);le=new Date(M,De,Pe);const et=Z.match(/T(\d{2}):(\d{2}):(\d{2})/);et&&le.setHours(parseInt(et[1],10),parseInt(et[2],10),parseInt(et[3],10))}else le=new Date(Z);return le.toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})};return e?d?i.jsx("div",{className:"min-h-screen w-full bg-gray-50 flex items-center justify-center",children:i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-[#2d4660] mx-auto mb-4"}),i.jsx("p",{className:"text-gray-600",children:"Loading stakeholders..."})]})}):i.jsxs("div",{className:"container mx-auto p-4 max-w-6xl min-h-screen pb-8",children:[i.jsx("div",{className:"hidden md:flex md:justify-center mb-2",children:i.jsx("img",{src:vi,alt:"New Millennium Building Systems Logo",className:"-mt-4 cursor-pointer hover:opacity-80 transition-opacity",style:{height:"96px",width:"auto"},onClick:()=>s("/sessions")})}),i.jsxs("div",{className:"flex justify-between items-center mb-6",children:[i.jsxs("div",{className:"flex items-center",children:[i.jsx("img",{src:Pa,alt:"New Millennium Building Systems Logo",className:"mr-4 md:hidden",style:{width:"40px",height:"40px",objectFit:"contain"}}),i.jsx("button",{onClick:()=>s("/admin"),className:"mr-2 p-1 rounded-full hover:bg-gray-200 cursor-pointer",children:i.jsx(Fd,{className:"h-6 w-6"})}),i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsx("h1",{className:"text-2xl font-bold text-[#2d4660] md:text-3xl",children:"Manage Stakeholders"}),t&&i.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:[t.name,ne&&i.jsx("span",{className:"ml-2 inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium bg-[#C89212] text-white",children:"System Admin"}),!ne&&ie&&i.jsx("span",{className:"ml-2 inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium bg-[#576C71] text-white",children:"Session Admin"})]})]})]}),i.jsxs("div",{ref:A,className:"relative z-40",children:[i.jsxs("div",{className:"hidden md:flex space-x-2",children:[i.jsxs("button",{onClick:()=>s("/admin"),className:"flex items-center px-4 py-2 bg-[#4f6d8e] text-white rounded-lg hover:bg-[#3d5670] transition-colors",children:[i.jsx(Mn,{className:"h-4 w-4 mr-2"}),"Admin Dashboard"]}),i.jsxs("button",{onClick:()=>p(!0),className:"flex items-center px-4 py-2 bg-[#c59f2d] text-white rounded-lg hover:bg-[#a88a26] transition-colors",children:[i.jsx(Pl,{className:"h-4 w-4 mr-2"}),"Add Stakeholder"]}),i.jsxs("button",{onClick:a,className:"flex items-center px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-colors",children:[i.jsx(Jn,{className:"h-4 w-4 mr-2"}),"Logout"]})]}),i.jsx("div",{className:"flex md:hidden",children:i.jsx("button",{onClick:()=>C(!E),className:"p-2 rounded-md border border-gray-200 bg-white shadow-sm","aria-label":"Open menu",children:i.jsx(di,{className:"h-5 w-5 text-gray-700"})})}),E&&i.jsx("div",{className:"absolute right-0 mt-2 w-56 bg-white border border-gray-200 rounded-lg shadow-lg md:hidden z-50",children:i.jsxs("div",{className:"py-1",children:[i.jsxs("button",{onClick:()=>{C(!1),s("/admin")},className:"w-full px-3 py-2 flex items-center text-left hover:bg-gray-50",children:[i.jsx(Mn,{className:"h-4 w-4 mr-2 text-gray-700"}),"Admin Dashboard"]}),i.jsxs("button",{onClick:()=>{C(!1),p(!0)},className:"w-full px-3 py-2 flex items-center text-left hover:bg-gray-50",children:[i.jsx(Pl,{className:"h-4 w-4 mr-2 text-gray-700"}),"Add Stakeholder"]}),i.jsxs("button",{onClick:()=>{C(!1),a()},className:"w-full px-3 py-2 flex items-center text-left hover:bg-gray-50",children:[i.jsx(Jn,{className:"h-4 w-4 mr-2 text-gray-700"}),"Logout"]})]})})]})]}),i.jsx("div",{className:"relative z-10 bg-white rounded-lg shadow-md p-4 mb-6",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("h2",{className:"text-lg font-semibold text-[#2d4660]",children:"Current Session"}),i.jsx("p",{className:"text-gray-600 mt-1",children:e.title})]}),i.jsxs("div",{className:"text-right",children:[i.jsx("p",{className:"text-sm text-gray-600",children:"Total Stakeholders"}),i.jsx("p",{className:"text-2xl font-bold text-[#2d4660]",children:l.length})]})]})}),i.jsxs("div",{className:"relative z-10 bg-white rounded-lg shadow-md overflow-hidden",children:[i.jsxs("div",{className:"p-6 border-b border-gray-200",children:[i.jsxs("h2",{className:"text-lg font-semibold text-[#2d4660]",children:["Stakeholders (",l.length,")"]}),i.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Manage who can vote in this session"})]}),l.length===0?i.jsxs("div",{className:"p-12 text-center",children:[i.jsx(As,{className:"mx-auto h-12 w-12 text-gray-400"}),i.jsx("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"No stakeholders"}),i.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Get started by adding stakeholders to this voting session."}),i.jsx("div",{className:"mt-6",children:i.jsxs("button",{onClick:()=>p(!0),className:"inline-flex items-center px-4 py-2 bg-[#2d4660] text-white rounded-md hover:bg-[#1d3a53] transition-colors",children:[i.jsx(Pl,{className:"h-5 w-5 mr-2"}),"Add First Stakeholder"]})})]}):i.jsx("div",{className:"overflow-x-auto",children:i.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[i.jsx("thead",{className:"bg-gray-50",children:i.jsxs("tr",{children:[i.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Name"}),i.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Email"}),i.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Voting Status"}),i.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Added"}),i.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),i.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:l.map(Z=>i.jsxs("tr",{className:"hover:bg-gray-50",children:[i.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:i.jsxs("div",{className:"flex items-center",children:[i.jsx(As,{className:"h-5 w-5 text-gray-400 mr-2"}),i.jsx("span",{className:"text-sm font-medium text-gray-900",children:Z.user_name})]})}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:i.jsxs("div",{className:"flex items-center text-sm text-gray-500",children:[i.jsx(au,{className:"h-4 w-4 mr-2"}),Z.user_email]})}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:Z.has_voted?i.jsxs("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800",children:[i.jsx(jr,{className:"h-3 w-3 mr-1"}),"Voted"]}):i.jsxs("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-gray-100 text-gray-800",children:[i.jsx(Um,{className:"h-3 w-3 mr-1"}),"Pending"]})}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:Ne(Z.created_at)}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:i.jsx("button",{onClick:()=>je(Z.user_email),className:"text-red-600 hover:text-red-900",children:i.jsx(na,{className:"h-5 w-5"})})})]},Z.id))})]})})]}),f&&i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:i.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-md w-full max-h-[90vh] overflow-y-auto",children:[i.jsxs("div",{className:"flex justify-between items-center mb-4",children:[i.jsx("h3",{className:"text-lg font-medium text-[#2d4660]",children:"Add Stakeholder"}),i.jsx("button",{onClick:()=>{p(!1),x({name:"",email:""}),J(""),K([]),w({})},className:"text-gray-400 hover:text-gray-500",children:i.jsx(js,{className:"h-5 w-5"})})]}),i.jsxs("form",{onSubmit:Ie,className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Name *"}),i.jsx("input",{type:"text",value:y.name,onChange:Z=>x($=>({...$,name:Z.target.value})),className:`w-full px-3 py-2 border rounded-md focus:ring-2 focus:ring-[#2d4660] focus:border-transparent ${j.name?"border-red-500":"border-gray-300"}`,placeholder:"John Doe"}),j.name&&i.jsxs("p",{className:"mt-1 text-sm text-red-600 flex items-center",children:[i.jsx(tr,{className:"h-4 w-4 mr-1"}),j.name]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email *"}),i.jsx("input",{type:"email",value:y.email,onChange:Z=>x($=>({...$,email:Z.target.value})),className:`w-full px-3 py-2 border rounded-md focus:ring-2 focus:ring-[#2d4660] focus:border-transparent ${j.email?"border-red-500":"border-gray-300"}`,placeholder:"john@example.com"}),j.email&&i.jsxs("p",{className:"mt-1 text-sm text-red-600 flex items-center",children:[i.jsx(tr,{className:"h-4 w-4 mr-1"}),j.email]})]}),i.jsxs("div",{children:[i.jsx(HZ,{products:T,value:z,onChange:J,label:"Product *",error:!!j.product}),j.product&&i.jsxs("p",{className:"mt-1 text-sm text-red-600 flex items-center",children:[i.jsx(tr,{className:"h-4 w-4 mr-1"}),j.product]})]}),z&&i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Sessions * (Current and Future)"}),H.length===0?i.jsx("p",{className:"text-sm text-gray-500",children:"No current or future sessions found for this product."}):i.jsx("div",{className:"max-h-48 overflow-y-auto border border-gray-300 rounded-md p-2",children:H.map(Z=>i.jsxs("label",{className:"flex items-start px-3 py-2 hover:bg-gray-50 cursor-pointer border-b border-gray-100 last:border-b-0",children:[i.jsx("input",{type:"checkbox",checked:X.includes(Z.id),onChange:$=>{$.target.checked?K(xe=>[...xe,Z.id]):K(xe=>xe.filter(le=>le!==Z.id))},className:"w-4 h-4 border-gray-300 rounded focus:ring-[#2D4660] accent-green-600 mt-1",style:{accentColor:"#16a34a"}}),i.jsxs("div",{className:"ml-3 flex-1",children:[i.jsx("div",{className:"text-sm font-medium text-gray-900",children:Z.title}),i.jsx("div",{className:"text-xs text-gray-500 mt-0.5",children:Se(Z)}),i.jsx("div",{className:"text-xs mt-0.5",children:i.jsx("span",{className:`font-medium ${Me(Z).color}`,children:Me(Z).text})})]})]},Z.id))}),j.sessions&&i.jsxs("p",{className:"mt-1 text-sm text-red-600 flex items-center",children:[i.jsx(tr,{className:"h-4 w-4 mr-1"}),j.sessions]})]}),j.submit&&i.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-3",children:i.jsxs("p",{className:"text-sm text-red-800 flex items-center",children:[i.jsx(tr,{className:"h-4 w-4 mr-2"}),j.submit]})}),i.jsxs("div",{className:"flex justify-end space-x-2 pt-4",children:[i.jsx("button",{type:"button",onClick:()=>{p(!1),x({name:"",email:""}),J(""),K([]),w({})},className:"px-4 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50",disabled:S,children:"Cancel"}),i.jsx("button",{type:"submit",className:"px-4 py-2 bg-[#2d4660] text-white rounded-md hover:bg-[#1d3a53] disabled:opacity-50",disabled:S,children:S?"Adding...":"Add Stakeholder"})]})]})]})})]}):null}function GZ(){const{currentSession:e,currentUser:t,setCurrentUser:r,setCurrentSession:n}=Ea(),s=Js(),a=async()=>{try{await _e.auth.signOut()}catch{}try{n(null)}catch{}r(null);try{localStorage.removeItem("voting_system_current_session"),localStorage.removeItem("azureDevOpsAuthInProgress"),sessionStorage.removeItem("oauth_return_path"),sessionStorage.removeItem("oauth_action")}catch{}C(!1),s("/login",{replace:!0})},[l,u]=v.useState([]),[d,m]=v.useState(!0),[f,p]=v.useState(!1),[y,x]=v.useState({email:""}),[j,w]=v.useState({}),[S,_]=v.useState(!1),[E,C]=v.useState(!1),A=v.useRef(null),[T,P]=v.useState(!1),[z,J]=v.useState(!1);v.useEffect(()=>{if(!E)return;const U=ne=>{A.current&&!A.current.contains(ne.target)&&C(!1)};return document.addEventListener("mousedown",U),document.addEventListener("touchstart",U,{passive:!0}),()=>{document.removeEventListener("mousedown",U),document.removeEventListener("touchstart",U)}},[E]),v.useEffect(()=>{if(!e){s("/sessions");return}H()},[e,s]),v.useEffect(()=>{(async()=>{if(!t)return;const ne=await Ri(t.id);P(ne);const{data:G}=await _e.from("session_admins").select("session_id").eq("user_id",t.id).limit(1);J(G&&G.length>0)})()},[t]);const H=async()=>{if(e){m(!0);try{const U=await Rx(e.id);u(U)}catch(U){console.error("Error loading admins:",U)}finally{m(!1)}}},fe=U=>/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(U),X=async U=>{U.preventDefault();const ne={};if(y.email.trim()?fe(y.email)||(ne.email="Invalid email address"):ne.email="Email is required",l.some(G=>G.user.email.toLowerCase()===y.email.toLowerCase())&&(ne.email="This user is already an admin"),w(ne),!(Object.keys(ne).length>0)&&e){_(!0);try{const G=y.email.split("@")[0].replace(/\./g," ");await w$(e.id,y.email,G);try{const ie=window.location.pathname.startsWith("/feature-voting-app")?"/feature-voting-app":"",te=`${window.location.origin}${ie}/login?session=${e.session_code}`;await Ho({to:y.email,subject:`You're invited to administer: ${e.title}`,text:`Hi,

You've been added as an admin for "${e.title}".

Open: ${te}

Best regards,
${(t==null?void 0:t.name)||""}`,html:`<p>Hi,</p><p>You've been added as an admin for <strong>${e.title}</strong>.</p><p><a href="${te}">Open the Feature Voting System</a></p><p>Best regards,<br/>${(t==null?void 0:t.name)||""}</p>`})}catch{try{const ie=CE(e,y.email,(t==null?void 0:t.name)||"");window.location.href=ie}catch{}}await H(),x({email:""}),p(!1)}catch(G){console.error("Error adding admin:",G),w({submit:"Failed to add admin. Please try again."})}finally{_(!1)}}},K=async U=>{if(e){if(l.length===1){alert("Cannot remove the last admin. Sessions must have at least one admin.");return}if(U===(t==null?void 0:t.id)){alert("You cannot remove yourself as an admin.");return}if(confirm("Are you sure you want to remove this admin?"))try{await hv(e.id,U),await H()}catch(ne){console.error("Error removing admin:",ne),alert("Failed to remove admin")}}},ae=U=>{const G=U.split("T")[0].split(" ")[0].split("-");let ie;if(G.length===3){const te=parseInt(G[0],10),W=parseInt(G[1],10)-1,se=parseInt(G[2],10);ie=new Date(te,W,se);const I=U.match(/T(\d{2}):(\d{2}):(\d{2})/);I&&ie.setHours(parseInt(I[1],10),parseInt(I[2],10),parseInt(I[3],10))}else ie=new Date(U);return ie.toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})};return e?d?i.jsx("div",{className:"min-h-screen w-full bg-gray-50 flex items-center justify-center",children:i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-[#2d4660] mx-auto mb-4"}),i.jsx("p",{className:"text-gray-600",children:"Loading admins..."})]})}):i.jsxs("div",{className:"container mx-auto p-4 max-w-6xl min-h-screen pb-8",children:[i.jsx("div",{className:"hidden md:flex md:justify-center mb-2",children:i.jsx("img",{src:vi,alt:"New Millennium Building Systems Logo",className:"-mt-4 cursor-pointer hover:opacity-80 transition-opacity",style:{height:"96px",width:"auto"},onClick:()=>s("/sessions")})}),i.jsxs("div",{className:"flex justify-between items-center mb-6",children:[i.jsxs("div",{className:"flex items-center",children:[i.jsx("img",{src:Pa,alt:"New Millennium Building Systems Logo",className:"mr-4 md:hidden",style:{width:"40px",height:"40px",objectFit:"contain"}}),i.jsx("button",{onClick:()=>s("/admin"),className:"mr-2 p-1 rounded-full hover:bg-gray-200 cursor-pointer",children:i.jsx(Fd,{className:"h-6 w-6"})}),i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsx("h1",{className:"text-2xl font-bold text-[#2d4660] md:text-3xl",children:"Session Admins"}),t&&i.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:[t.name,T&&i.jsx("span",{className:"ml-2 inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium bg-[#C89212] text-white",children:"System Admin"}),!T&&z&&i.jsx("span",{className:"ml-2 inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium bg-[#576C71] text-white",children:"Session Admin"})]})]})]}),i.jsxs("div",{ref:A,className:"relative z-40",children:[i.jsxs("div",{className:"hidden md:flex space-x-2",children:[i.jsxs("button",{onClick:()=>s("/admin"),className:"flex items-center px-4 py-2 bg-[#4f6d8e] text-white rounded-lg hover:bg-[#3d5670] transition-colors",children:[i.jsx(Mn,{className:"h-4 w-4 mr-2"}),"Admin Dashboard"]}),i.jsxs("button",{onClick:()=>p(!0),className:"flex items-center px-4 py-2 bg-[#c59f2d] text-white rounded-lg hover:bg-[#a88a26] transition-colors",children:[i.jsx(Pl,{className:"h-4 w-4 mr-2"}),"Add Admin"]}),i.jsxs("button",{onClick:a,className:"flex items-center px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-colors",children:[i.jsx(Jn,{className:"h-4 w-4 mr-2"}),"Logout"]})]}),i.jsx("div",{className:"flex md:hidden",children:i.jsx("button",{onClick:()=>C(!E),className:"p-2 rounded-md border border-gray-200 bg-white shadow-sm","aria-label":"Open menu",children:i.jsx(di,{className:"h-5 w-5 text-gray-700"})})}),E&&i.jsx("div",{className:"absolute right-0 mt-2 w-56 bg-white border border-gray-200 rounded-lg shadow-lg md:hidden z-50",children:i.jsxs("div",{className:"py-1",children:[i.jsxs("button",{onClick:()=>{C(!1),s("/admin")},className:"w-full px-3 py-2 flex items-center text-left hover:bg-gray-50",children:[i.jsx(Mn,{className:"h-4 w-4 mr-2 text-gray-700"}),"Admin Dashboard"]}),i.jsxs("button",{onClick:()=>{C(!1),p(!0)},className:"w-full px-3 py-2 flex items-center text-left hover:bg-gray-50",children:[i.jsx(Pl,{className:"h-4 w-4 mr-2 text-gray-700"}),"Add Admin"]}),i.jsxs("button",{onClick:()=>{C(!1),a()},className:"w-full px-3 py-2 flex items-center text-left hover:bg-gray-50",children:[i.jsx(Jn,{className:"h-4 w-4 mr-2 text-gray-700"}),"Logout"]})]})})]})]}),i.jsx("div",{className:"relative z-10 bg-white rounded-lg shadow-md p-4 mb-6",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("h2",{className:"text-lg font-semibold text-[#2d4660]",children:"Current Session"}),i.jsx("p",{className:"text-gray-600 mt-1",children:e.title})]}),i.jsxs("div",{className:"text-right",children:[i.jsx("p",{className:"text-sm text-gray-600",children:"Total Admins"}),i.jsx("p",{className:"text-2xl font-bold text-[#2d4660]",children:l.length})]})]})}),i.jsxs("div",{className:"relative z-10 bg-white rounded-lg shadow-md overflow-hidden",children:[i.jsxs("div",{className:"p-6 border-b border-gray-200",children:[i.jsxs("h2",{className:"text-lg font-semibold text-[#2d4660]",children:["Session Admins (",l.length,")"]}),i.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Manage who can administer this voting session"})]}),i.jsx("div",{className:"overflow-x-auto",children:i.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[i.jsx("thead",{className:"bg-gray-50",children:i.jsxs("tr",{children:[i.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Name"}),i.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Email"}),i.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Added"}),i.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),i.jsx("tbody",{className:"relative z-10 bg-white divide-y divide-gray-200",children:l.map(U=>i.jsxs("tr",{className:"hover:bg-gray-50",children:[i.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:i.jsxs("div",{className:"flex items-center",children:[i.jsx(us,{className:"h-5 w-5 text-blue-500 mr-2"}),i.jsxs("span",{className:"text-sm font-medium text-gray-900",children:[U.user.name,U.user.id===(t==null?void 0:t.id)&&i.jsx("span",{className:"ml-2 text-xs text-gray-500",children:"(You)"})]})]})}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:i.jsxs("div",{className:"flex items-center text-sm text-gray-500",children:[i.jsx(au,{className:"h-4 w-4 mr-2"}),U.user.email]})}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:ae(U.created_at)}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:i.jsx("button",{onClick:()=>K(U.user_id),className:`text-red-600 hover:text-red-900 ${U.user.id===(t==null?void 0:t.id)||l.length===1?"opacity-50 cursor-not-allowed":""}`,disabled:U.user.id===(t==null?void 0:t.id)||l.length===1,title:U.user.id===(t==null?void 0:t.id)?"You cannot remove yourself":l.length===1?"Cannot remove the last admin":"Remove admin",children:i.jsx(na,{className:"h-5 w-5"})})})]},U.id))})]})})]}),i.jsx("div",{className:"relative z-10 mt-6 bg-blue-50 border border-blue-200 rounded-lg p-4",children:i.jsxs("div",{className:"flex items-start",children:[i.jsx(us,{className:"h-5 w-5 text-blue-600 mr-3 mt-0.5"}),i.jsxs("div",{className:"text-sm text-blue-800",children:[i.jsx("p",{className:"font-medium mb-1",children:"Session Admin Permissions:"}),i.jsxs("ul",{className:"list-disc list-inside space-y-1",children:[i.jsx("li",{children:"Manage features and voting settings for this session"}),i.jsx("li",{children:"Add and remove stakeholders for this session"}),i.jsx("li",{children:"View voting results and analytics for this session"}),i.jsx("li",{children:"Add and remove other session admins"})]}),i.jsx("p",{className:"mt-2 text-xs italic",children:"Note: System Admins have full admin access to all sessions in the system."})]})]})}),f&&i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:i.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-md w-full",children:[i.jsxs("div",{className:"flex justify-between items-center mb-4",children:[i.jsx("h3",{className:"text-lg font-medium text-[#2d4660]",children:"Add Session Admin"}),i.jsx("button",{onClick:()=>{p(!1),x({email:""}),w({})},className:"text-gray-400 hover:text-gray-500",children:i.jsx(js,{className:"h-5 w-5"})})]}),i.jsxs("form",{onSubmit:X,className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email Address *"}),i.jsx("input",{type:"email",value:y.email,onChange:U=>x(ne=>({...ne,email:U.target.value})),className:`w-full px-3 py-2 border rounded-md focus:ring-2 focus:ring-[#2d4660] focus:border-transparent ${j.email?"border-red-500":"border-gray-300"}`,placeholder:"admin@example.com"}),j.email&&i.jsxs("p",{className:"mt-1 text-sm text-red-600 flex items-center",children:[i.jsx(tr,{className:"h-4 w-4 mr-1"}),j.email]})]}),j.submit&&i.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-3",children:i.jsxs("p",{className:"text-sm text-red-800 flex items-center",children:[i.jsx(tr,{className:"h-4 w-4 mr-2"}),j.submit]})}),i.jsxs("div",{className:"flex justify-end space-x-2 pt-4",children:[i.jsx("button",{type:"button",onClick:()=>{p(!1),x({email:""}),w({})},className:"px-4 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50",disabled:S,children:"Cancel"}),i.jsx("button",{type:"submit",className:"px-4 py-2 bg-[#2d4660] text-white rounded-md hover:bg-[#1d3a53] disabled:opacity-50",disabled:S,children:S?"Adding...":"Add Admin"})]})]})]})})]}):null}function YZ(){const{currentUser:e,sessions:t}=Ea(),r=Js(),[n,s]=v.useState([]),[a,l]=v.useState(!0),[u,d]=v.useState(!1);v.useEffect(()=>{m()},[t]);const m=async()=>{l(!0);try{const y=new Set;for(const x of t)(await Rx(x.id)).forEach(w=>{w.user&&w.user.email&&y.add(w.user.email)});s(Array.from(y))}catch(y){console.error("Error loading admin emails:",y)}finally{l(!1)}},f=()=>{const y=encodeURIComponent(" Request: Add me to Feature Voting System"),x=encodeURIComponent(`Hi Team,

I tried to access the Feature Voting System but don't have admin permissions yet.

Could you please add me to the system so I can participate in voting?

My details:
Name: ${(e==null?void 0:e.name)||"Unknown"}
Email: ${(e==null?void 0:e.email)||"Unknown"}

Thanks!
${(e==null?void 0:e.name)||"A hopeful voter"} `),j=n.length>0?`mailto:${n.join(",")}?subject=${y}&body=${x}`:`mailto:?subject=${y}&body=${x}`;window.location.href=j,d(!0)},p=()=>{r("/login")};return a?i.jsx("div",{className:"min-h-screen w-full bg-gray-50 flex items-center justify-center",children:i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-[#2d4660] mx-auto mb-4"}),i.jsx("p",{className:"text-gray-600",children:"Loading..."})]})}):i.jsx("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 to-gray-100 flex items-center justify-center p-4",children:i.jsxs("div",{className:"max-w-md w-full",children:[i.jsx("div",{className:"text-center mb-8",children:i.jsx("img",{src:vi,alt:"New Millennium Building Systems Logo",className:"mx-auto cursor-pointer hover:opacity-80 transition-opacity",style:{height:"80px",width:"auto"},onClick:()=>r("/sessions")})}),i.jsxs("div",{className:"relative z-10 bg-white rounded-xl shadow-lg overflow-hidden",children:[i.jsxs("div",{className:"bg-gradient-to-r from-[#2d4660] to-[#1d3a53] p-6 text-center",children:[i.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-white/10 rounded-full mb-4",children:i.jsx(hF,{className:"h-8 w-8 text-white"})}),i.jsx("h1",{className:"text-2xl font-bold text-white mb-2",children:"Whoa There, Speedracer! "}),i.jsx("p",{className:"text-blue-100 text-sm",children:"You need access to the Feature Voting System"})]}),i.jsx("div",{className:"p-6",children:u?i.jsx(i.Fragment,{children:i.jsxs("div",{className:"text-center py-4",children:[i.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-green-100 rounded-full mb-4",children:i.jsx(jr,{className:"h-8 w-8 text-green-600"})}),i.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-2",children:"Email Sent! "}),i.jsx("p",{className:"text-gray-600 mb-6",children:"Your access request has been sent to the admin team. They'll get you set up soon!"}),i.jsxs("button",{onClick:p,className:"inline-flex items-center px-4 py-2 bg-[#2d4660] text-white rounded-lg hover:bg-[#1d3a53] transition-colors",children:[i.jsx(cN,{className:"h-4 w-4 mr-2"}),"Back to Login"]})]})}):i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"mb-6",children:[i.jsx("p",{className:"text-gray-600 mb-4",children:"Looks like you're trying to access the Feature Voting System, but you haven't been added yet."}),i.jsx("p",{className:"text-gray-600 mb-4",children:"No worries! Click the button below to send a quick message to the admins asking to be added."}),i.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:i.jsxs("div",{className:"flex items-start",children:[i.jsx(hs,{className:"h-5 w-5 text-blue-600 mr-2 mt-0.5 flex-shrink-0"}),i.jsx("div",{className:"text-sm text-blue-800",children:n.length>0?i.jsxs(i.Fragment,{children:[i.jsx("p",{className:"font-medium mb-1",children:"Your message will be sent to:"}),i.jsx("p",{className:"text-xs",children:n.join(", ")})]}):i.jsx("p",{children:"Your message will help the admin team get you set up!"})})]})})]}),i.jsxs("div",{className:"space-y-3",children:[i.jsxs("button",{onClick:f,className:"w-full flex items-center justify-center px-4 py-3 bg-[#c59f2d] text-white rounded-lg hover:bg-[#a88a26] transition-colors font-medium",children:[i.jsx(au,{className:"h-5 w-5 mr-2"}),"Request Access from Admins"]}),i.jsxs("button",{onClick:p,className:"w-full flex items-center justify-center px-4 py-3 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-colors",children:[i.jsx(cN,{className:"h-4 w-4 mr-2"}),"Back to Login"]})]})]})})]}),i.jsx("div",{className:"mt-6 text-center",children:i.jsx("p",{className:"text-sm text-gray-500",children:"Once you're added to the system, you'll be able to participate in voting sessions."})})]})})}function JZ(){const{currentUser:e,setCurrentUser:t,setCurrentSession:r}=Ea(),n=Js(),s=async()=>{try{await _e.auth.signOut()}catch{}try{r(null)}catch{}t(null);try{localStorage.removeItem("voting_system_current_session"),localStorage.removeItem("azureDevOpsAuthInProgress"),sessionStorage.removeItem("oauth_return_path"),sessionStorage.removeItem("oauth_action")}catch{}E(!1),n("/login",{replace:!0})},[a,l]=v.useState([]),[u,d]=v.useState(!0),[m,f]=v.useState(!1),[p,y]=v.useState({email:""}),[x,j]=v.useState({}),[w,S]=v.useState(!1),[_,E]=v.useState(!1),C=v.useRef(null),[A,T]=v.useState(!1),[P,z]=v.useState(!1);v.useEffect(()=>{if(!_)return;const ae=U=>{C.current&&!C.current.contains(U.target)&&E(!1)};return document.addEventListener("mousedown",ae),document.addEventListener("touchstart",ae,{passive:!0}),()=>{document.removeEventListener("mousedown",ae),document.removeEventListener("touchstart",ae)}},[_]),v.useEffect(()=>{J()},[]),v.useEffect(()=>{(async()=>{if(!e)return;const U=await Ri(e.id);T(U);const{data:ne}=await _e.from("session_admins").select("session_id").eq("user_id",e.id).limit(1);z(ne&&ne.length>0)})()},[e]);const J=async()=>{d(!0);try{let ae=await pv();ae.length===0&&e&&(console.log("No system admins found. Adding current user as first system admin..."),await Rh(e.id),ae=await pv()),l(ae)}catch(ae){console.error("Error loading system admins:",ae)}finally{d(!1)}},H=ae=>/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(ae),fe=async ae=>{ae.preventDefault();const U={};if(p.email.trim()?H(p.email)||(U.email="Invalid email address"):U.email="Email is required",a.some(ne=>ne.user.email.toLowerCase()===p.email.toLowerCase())&&(U.email="This user is already a system admin"),j(U),!(Object.keys(U).length>0)){S(!0);try{const ne=p.email.split("@")[0].replace(/\./g," "),G=await Nl(p.email,ne);await Rh(G.id);try{const ie=window.location.pathname.startsWith("/feature-voting-app")?"/feature-voting-app":"",te=`${window.location.origin}${ie}/login`;await Ho({to:p.email,subject:"You're a System Admin: Feature Voting System",text:`Hi,

You've been granted System Admin access to the Feature Voting System.

Login: ${te}

Best regards,
System`,html:`<p>Hi,</p><p>You've been granted <strong>System Admin</strong> access to the Feature Voting System.</p><p><a href="${te}">Login</a></p><p>Best regards,<br/>System</p>`})}catch{try{const ie=window.location.pathname.startsWith("/feature-voting-app")?"/feature-voting-app":"",te=`${window.location.origin}${ie}/login`,W=encodeURIComponent("You're a System Admin: Feature Voting System"),se=encodeURIComponent(`Hi,

You've been granted System Admin access to the Feature Voting System.

To sign in, use this link:

${te}

Best regards,
System`);window.location.href=`mailto:${encodeURIComponent(p.email)}?subject=${W}&body=${se}`}catch{}}await J(),y({email:""}),f(!1)}catch(ne){console.error("Error adding system admin:",ne),j({submit:"Failed to add system admin. Please try again."})}finally{S(!1)}}},X=async ae=>{const U=a.reduce((ne,G)=>new Date(G.created_at)<new Date(ne.created_at)?G:ne);if(ae===U.user_id){alert("Cannot remove the original system admin. This protects against accidentally locking everyone out of the system.");return}if(a.length===1){alert("Cannot remove the last system admin. The system must have at least one admin.");return}if(ae===(e==null?void 0:e.id)){alert("You cannot remove yourself as a system admin.");return}if(confirm("Are you sure you want to remove this system admin?"))try{await gv(ae),await J()}catch(ne){console.error("Error removing system admin:",ne),alert("Failed to remove system admin")}},K=ae=>{const ne=ae.split("T")[0].split(" ")[0].split("-");let G;if(ne.length===3){const ie=parseInt(ne[0],10),te=parseInt(ne[1],10)-1,W=parseInt(ne[2],10);G=new Date(ie,te,W);const se=ae.match(/T(\d{2}):(\d{2}):(\d{2})/);se&&G.setHours(parseInt(se[1],10),parseInt(se[2],10),parseInt(se[3],10))}else G=new Date(ae);return G.toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})};return u?i.jsx("div",{className:"min-h-screen w-full bg-gray-50 flex items-center justify-center",children:i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-[#2d4660] mx-auto mb-4"}),i.jsx("p",{className:"text-gray-600",children:"Loading system admins..."})]})}):i.jsxs("div",{className:"container mx-auto p-4 max-w-6xl min-h-screen pb-8",children:[i.jsx("div",{className:"hidden md:flex md:justify-center mb-2",children:i.jsx("img",{src:vi,alt:"New Millennium Building Systems Logo",className:"-mt-4 cursor-pointer hover:opacity-80 transition-opacity",style:{height:"96px",width:"auto"},onClick:()=>n("/sessions")})}),i.jsxs("div",{className:"flex justify-between items-center mb-6",children:[i.jsxs("div",{className:"flex items-center",children:[i.jsx("img",{src:Pa,alt:"New Millennium Building Systems Logo",className:"mr-4 md:hidden",style:{width:"40px",height:"40px",objectFit:"contain"}}),i.jsx("button",{onClick:()=>n("/sessions"),className:"mr-2 p-1 rounded-full hover:bg-gray-200 cursor-pointer",children:i.jsx(Fd,{className:"h-6 w-6"})}),i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsx("h1",{className:"text-2xl font-bold text-[#2d4660] md:text-3xl",children:"System Admins"}),e&&i.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:[e.name,A&&i.jsx("span",{className:"ml-2 inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium bg-[#C89212] text-white",children:"System Admin"}),!A&&P&&i.jsx("span",{className:"ml-2 inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium bg-[#576C71] text-white",children:"Session Admin"})]})]})]}),i.jsxs("div",{ref:C,className:"relative z-40",children:[i.jsxs("div",{className:"hidden md:flex space-x-2",children:[i.jsxs("button",{onClick:()=>n("/sessions"),className:"flex items-center px-4 py-2 bg-[#4f6d8e] text-white rounded-lg hover:bg-[#3d5670] transition-colors",children:[i.jsx(Mn,{className:"h-4 w-4 mr-2"}),"My Sessions"]}),i.jsxs("button",{onClick:()=>f(!0),className:"flex items-center px-4 py-2 bg-[#c59f2d] text-white rounded-lg hover:bg-[#a88a26] transition-colors",children:[i.jsx(Pl,{className:"h-4 w-4 mr-2"}),"Add System Admin"]}),i.jsxs("button",{onClick:s,className:"flex items-center px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-colors",children:[i.jsx(Jn,{className:"h-4 w-4 mr-2"}),"Logout"]})]}),i.jsx("div",{className:"flex md:hidden",children:i.jsx("button",{onClick:()=>E(!_),className:"p-2 rounded-md border border-gray-200 bg-white shadow-sm","aria-label":"Open menu",children:i.jsx(di,{className:"h-5 w-5 text-gray-700"})})}),_&&i.jsx("div",{className:"absolute right-0 mt-2 w-56 bg-white border border-gray-200 rounded-lg shadow-lg md:hidden z-50",children:i.jsxs("div",{className:"py-1",children:[i.jsxs("button",{onClick:()=>{E(!1),n("/sessions")},className:"w-full px-3 py-2 flex items-center text-left hover:bg-gray-50",children:[i.jsx(Mn,{className:"h-4 w-4 mr-2 text-gray-700"}),"My Sessions"]}),i.jsxs("button",{onClick:()=>{E(!1),f(!0)},className:"w-full px-3 py-2 flex items-center text-left hover:bg-gray-50",children:[i.jsx(Pl,{className:"h-4 w-4 mr-2 text-gray-700"}),"Add System Admin"]}),i.jsxs("button",{onClick:()=>{E(!1),s()},className:"w-full px-3 py-2 flex items-center text-left hover:bg-gray-50",children:[i.jsx(Jn,{className:"h-4 w-4 mr-2 text-gray-700"}),"Logout"]})]})})]})]}),i.jsx("div",{className:"relative z-10 bg-gradient-to-r from-[#2d4660] to-[#1d3a53] rounded-lg shadow-md p-6 mb-6 text-white",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center",children:[i.jsx(Os,{className:"h-8 w-8 mr-3"}),i.jsxs("div",{children:[i.jsx("h2",{className:"text-xl font-semibold",children:"Feature Voting System"}),i.jsx("p",{className:"text-blue-100 mt-1",children:"Global administrator management"})]})]}),i.jsxs("div",{className:"text-right",children:[i.jsx("p",{className:"text-sm text-blue-100",children:"Total System Admins"}),i.jsx("p",{className:"text-3xl font-bold",children:a.length})]})]})}),i.jsxs("div",{className:"relative z-10 bg-white rounded-lg shadow-md overflow-hidden",children:[i.jsxs("div",{className:"p-6 border-b border-gray-200",children:[i.jsxs("h2",{className:"text-lg font-semibold text-[#2d4660]",children:["System Administrators (",a.length,")"]}),i.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Manage who has full access to the Feature Voting System"})]}),i.jsx("div",{className:"overflow-x-auto",children:i.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[i.jsx("thead",{className:"bg-gray-50",children:i.jsxs("tr",{children:[i.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Name"}),i.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Email"}),i.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Added"}),i.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),i.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:(()=>{const ae=a.reduce((U,ne)=>new Date(ne.created_at)<new Date(U.created_at)?ne:U);return a.map(U=>{const ne=U.user_id===ae.user_id;return i.jsxs("tr",{className:"hover:bg-gray-50",children:[i.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:i.jsxs("div",{className:"flex items-center",children:[i.jsx(Os,{className:"h-5 w-5 text-[#c59f2d] mr-2"}),i.jsxs("span",{className:"text-sm font-medium text-gray-900",children:[U.user.name,U.user.id===(e==null?void 0:e.id)&&i.jsx("span",{className:"ml-2 text-xs text-gray-500",children:"(You)"}),ne&&i.jsx("span",{className:"ml-2 text-xs text-[#c59f2d] font-semibold",children:"(Original Admin)"})]})]})}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:i.jsxs("div",{className:"flex items-center text-sm text-gray-500",children:[i.jsx(au,{className:"h-4 w-4 mr-2"}),U.user.email]})}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:K(U.created_at)}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:i.jsx("button",{onClick:()=>X(U.user_id),className:`text-red-600 hover:text-red-900 ${U.user.id===(e==null?void 0:e.id)||a.length===1||ne?"opacity-50 cursor-not-allowed":""}`,disabled:U.user.id===(e==null?void 0:e.id)||a.length===1||ne,title:ne?"Cannot remove the original system admin":U.user.id===(e==null?void 0:e.id)?"You cannot remove yourself":a.length===1?"Cannot remove the last system admin":"Remove system admin",children:i.jsx(na,{className:"h-5 w-5"})})})]},U.id)})})()})]})})]}),i.jsx("div",{className:"relative z-10 mt-6 bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:i.jsxs("div",{className:"flex items-start",children:[i.jsx(Os,{className:"h-5 w-5 text-yellow-600 mr-3 mt-0.5"}),i.jsxs("div",{className:"text-sm text-yellow-800",children:[i.jsx("p",{className:"font-medium mb-1",children:"System Admin Permissions:"}),i.jsxs("ul",{className:"list-disc list-inside space-y-1",children:[i.jsx("li",{children:"Full access to all voting sessions across the system"}),i.jsx("li",{children:"Create and manage any voting session"}),i.jsx("li",{children:"Add and remove other system administrators"}),i.jsx("li",{children:"Manage session admins and stakeholders for any session"}),i.jsx("li",{children:"View all results and analytics system-wide"})]}),i.jsx("p",{className:"mt-3 text-xs font-medium",children:"Note: The original system admin (first person to access this page) cannot be removed to prevent system lockout."})]})]})}),m&&i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:i.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-md w-full",children:[i.jsxs("div",{className:"flex justify-between items-center mb-4",children:[i.jsx("h3",{className:"text-lg font-medium text-[#2d4660]",children:"Add System Admin"}),i.jsx("button",{onClick:()=>{f(!1),y({email:""}),j({})},className:"text-gray-400 hover:text-gray-500",children:i.jsx(js,{className:"h-5 w-5"})})]}),i.jsxs("form",{onSubmit:fe,className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email Address *"}),i.jsx("input",{type:"email",value:p.email,onChange:ae=>y(U=>({...U,email:ae.target.value})),className:`w-full px-3 py-2 border rounded-md focus:ring-2 focus:ring-[#2d4660] focus:border-transparent ${x.email?"border-red-500":"border-gray-300"}`,placeholder:"admin@example.com"}),x.email&&i.jsxs("p",{className:"mt-1 text-sm text-red-600 flex items-center",children:[i.jsx(tr,{className:"h-4 w-4 mr-1"}),x.email]})]}),x.submit&&i.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-3",children:i.jsxs("p",{className:"text-sm text-red-800 flex items-center",children:[i.jsx(tr,{className:"h-4 w-4 mr-2"}),x.submit]})}),i.jsxs("div",{className:"flex justify-end space-x-2 pt-4",children:[i.jsx("button",{type:"button",onClick:()=>{f(!1),y({email:""}),j({})},className:"px-4 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50",disabled:w,children:"Cancel"}),i.jsx("button",{type:"submit",className:"px-4 py-2 bg-[#2d4660] text-white rounded-md hover:bg-[#1d3a53] disabled:opacity-50",disabled:w,children:w?"Adding...":"Add System Admin"})]})]})]})})]})}async function XZ(e){var t,r,n,s;if(!e||e.trim().length<2)return[];try{const{data:{session:a},error:l}=await _e.auth.getSession();if(l)throw console.error("Error getting session:",l),new Error("Unable to access your session. Please sign in again.");if(!a)throw console.warn("No session available for Azure AD search"),new Error("You must be signed in to search company users.");if(!(((r=(t=a.user)==null?void 0:t.app_metadata)==null?void 0:r.provider)==="azure"||((s=(n=a.user)==null?void 0:n.identities)==null?void 0:s.some(w=>w.provider==="azure"))))throw console.warn("User not signed in with Azure AD"),new Error("You must sign in with Microsoft to search company users.");const d=a.provider_token||a.access_token;if(!d)throw console.warn("No provider token available for Azure AD search"),new Error("Unable to access Microsoft Graph. Please sign out and sign in again with Microsoft.");const m=e.trim(),f=`startswith(displayName,'${m}') or startswith(mail,'${m}') or startswith(userPrincipalName,'${m}') or startswith(givenName,'${m}') or startswith(surname,'${m}')`,p=`https://graph.microsoft.com/v1.0/users?$filter=${encodeURIComponent(f)}&$select=id,displayName,mail,userPrincipalName,givenName,surname,jobTitle,department&$top=20`,y=await fetch(p,{headers:{Authorization:`Bearer ${d}`,"Content-Type":"application/json"}});if(!y.ok){const w=await y.text();let S="";throw y.status===401?(S="Authentication failed. Please sign out and sign in again with Microsoft.",console.warn("Azure AD search 401:",w)):y.status===403?(S='Your Azure AD app needs "User.ReadBasic.All" or "User.Read.All" permission to search users. An administrator must grant this permission in Azure Portal.',console.warn("Azure AD search 403 - Insufficient permissions:",w)):y.status===400?(S="Invalid search query. Please try a different search term.",console.warn("Azure AD search 400:",w)):(S=`Unable to search users (${y.status}). Please try again.`,console.error("Azure AD search error:",y.status,w)),new Error(S)}return((await y.json()).value||[]).map(w=>({id:w.id,displayName:w.displayName||"",mail:w.mail||w.userPrincipalName||"",userPrincipalName:w.userPrincipalName||"",givenName:w.givenName,surname:w.surname,jobTitle:w.jobTitle,department:w.department})).sort((w,S)=>{const _=w.displayName.toLowerCase(),E=S.displayName.toLowerCase();return _.localeCompare(E)})}catch(a){throw console.error("Error searching Azure AD users:",a),a}}const ed=()=>({searchTerm:"",results:[],isSearching:!1,showResults:!1,error:""});function Ph({products:e,value:t,onChange:r,label:n,error:s,onProductChange:a}){const[l,u]=v.useState(!1),d=v.useRef(null);v.useEffect(()=>{function p(y){d.current&&!d.current.contains(y.target)&&u(!1)}return document.addEventListener("mousedown",p),()=>document.removeEventListener("mousedown",p)},[]);const m=e.find(p=>p.id===t),f=m?Yn(m.name,m.color_hex??null):null;return i.jsxs("div",{ref:d,className:"relative overflow-visible",children:[n&&i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:n}),i.jsxs("div",{onClick:()=>u(!l),className:`w-full px-3 py-2 border rounded-md bg-white cursor-pointer flex items-center justify-between hover:border-gray-400 ${s?"border-red-500":"border-gray-300"}`,children:[i.jsxs("div",{className:"flex items-center gap-2 flex-1 min-w-0",children:[m&&f&&i.jsx("div",{className:"w-4 h-4 rounded flex-shrink-0",style:{backgroundColor:f.background}}),i.jsx("span",{className:`text-sm truncate ${t?"text-gray-900":"text-gray-400"}`,children:m?m.name:"Select a Product"})]}),i.jsx(ds,{className:`h-4 w-4 text-gray-400 transition-transform flex-shrink-0 ${l?"transform rotate-180":""}`})]}),l&&i.jsx("div",{className:"absolute z-[100] w-full mt-1 bg-white border border-gray-300 rounded-md shadow-lg max-h-60 overflow-y-auto",children:e.length===0?i.jsx("div",{className:"px-3 py-2 text-sm text-gray-500 text-center",children:"No products available"}):e.map(p=>{const y=Yn(p.name,p.color_hex??null),x=t===p.id;return i.jsxs("div",{onClick:()=>{r(p.id),u(!1),a&&a()},className:`px-3 py-2 cursor-pointer hover:bg-gray-50 flex items-center gap-2 ${x?"bg-gray-50":""}`,children:[i.jsx("div",{className:"w-4 h-4 rounded flex-shrink-0",style:{backgroundColor:y.background}}),i.jsx("span",{className:"text-sm text-gray-900 flex-1",children:p.name}),x&&i.jsx(jr,{className:"h-4 w-4 text-gray-400 flex-shrink-0"})]},p.id)})})]})}function QZ({products:e,sessions:t,selectedProductId:r,onProductChange:n,useAllSessions:s,onToggleAllSessions:a,selectedSessionIds:l,onSessionToggle:u,getSessionStatus:d,formatSessionDateRange:m,filterSessions:f}){const p=r?f(t,r):[];return i.jsxs("div",{className:"space-y-3 overflow-visible",children:[i.jsx("div",{className:"overflow-visible",children:i.jsx(Ph,{products:e,value:r,onChange:y=>{n(y),a(!0)},label:"Product *"})}),r&&i.jsxs("div",{className:"space-y-3",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Session Selection *"}),i.jsxs("div",{className:"inline-flex items-center bg-gray-100 rounded-lg p-1",children:[i.jsx("button",{type:"button",onClick:()=>a(!1),className:`px-4 py-2 rounded-md text-sm font-medium transition-colors flex items-center ${s?"text-gray-600 hover:text-gray-900":"bg-white text-[#2d4660] shadow-sm"}`,children:"Select Sessions"}),i.jsx("button",{type:"button",onClick:()=>{a(!0)},className:`px-4 py-2 rounded-md text-sm font-medium transition-colors flex items-center ${s?"bg-white text-[#2d4660] shadow-sm":"text-gray-600 hover:text-gray-900"}`,children:"All Sessions"})]}),s&&i.jsx("p",{className:"mt-2 text-xs text-gray-500",children:"User will be added to all current and future sessions for this product"})]}),!s&&i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Sessions * (Current and Future)"}),p.length===0?i.jsx("p",{className:"text-sm text-gray-500",children:"No current or future sessions found for this product."}):i.jsx("div",{className:"max-h-48 overflow-y-auto border border-gray-300 rounded-md p-2",children:p.map(y=>i.jsxs("label",{className:"flex items-start px-3 py-2 hover:bg-gray-50 cursor-pointer border-b border-gray-100 last:border-b-0",children:[i.jsx("input",{type:"checkbox",checked:l.includes(y.id),onChange:()=>u(y.id),className:"w-4 h-4 border-gray-300 rounded focus:ring-[#2D4660] accent-green-600 mt-1",style:{accentColor:"#16a34a"}}),i.jsxs("div",{className:"ml-3 flex-1",children:[i.jsx("div",{className:"text-sm font-medium text-gray-900",children:y.title||"Unnamed Session"}),i.jsx("div",{className:"text-xs text-gray-500 mt-0.5",children:m(y)}),i.jsx("div",{className:"text-xs mt-0.5",children:i.jsx("span",{className:`font-medium ${d(y).color}`,children:d(y).text})})]})]},y.id))})]})]})]})}function ZZ(){var _s,V;const{currentUser:e,setCurrentUser:t,setCurrentSession:r,currentSession:n}=Ea(),s=Js(),[a]=Cx(),[l,u]=v.useState([]),[d,m]=v.useState([]),[f,p]=v.useState(!0),[y,x]=v.useState(""),[j,w]=v.useState("all"),[S,_]=v.useState(!1),[E,C]=v.useState(null),[A,T]=v.useState(null),[P,z]=v.useState(null),[J,H]=v.useState(null),fe=N=>{const F=new Date,pe=N.filter(he=>{const ke=he.start_date?new Date(he.start_date):null,Te=he.end_date?new Date(he.end_date):null;return ke&&F<ke||Te&&F>Te?!1:!!(ke&&F>=ke&&(!Te||F<=Te))});return pe.length===0?null:pe.sort((he,ke)=>{const Te=he.start_date?new Date(he.start_date).getTime():0;return(ke.start_date?new Date(ke.start_date).getTime():0)-Te})[0]},X=new Set(["spencer.faull@newmill.com","chris.rodes@newmill.com","dave.hoffman@newmill.com"]),K=v.useRef(null),ae=v.useRef({}),U=v.useRef(null),ne=v.useRef(!1),[G,ie]=v.useState(!1),[te,W]=v.useState(!1),[se,I]=v.useState([]),[B,Me]=v.useState("system-admin"),[Se,Ie]=v.useState(!0),[je,Ne]=v.useState(!1),[Z,$]=v.useState(null),[xe,le]=v.useState(null),[M,De]=v.useState([]),[Pe,et]=v.useState({adminSessions:[],stakeholderSessions:[]}),[rt,kt]=v.useState(""),[lt,Yt]=v.useState(!0),[R,re]=v.useState([]),[de,Fe]=v.useState(!1),[we,Ae]=v.useState(null),[Ke,It]=v.useState(!1),[Rt,Pt]=v.useState(null),[rr,Ht]=v.useState(new Set),[He,ft]=v.useState(new Map),[gt,Lt]=v.useState(!1),[_t,nr]=v.useState(!1),[Ze,Ot]=v.useState({name:"",email:"",isSystemAdmin:!1,sessionAdminIds:[],stakeholderSessionIds:[]}),[zt,Vt]=v.useState(ed()),[hr,Zt]=v.useState(!0),[gn,Jt]=v.useState(null),[mr,or]=v.useState({sessionAdmin:!1,stakeholder:!1}),[En,zr]=v.useState("User Management"),[lr,Gr]=v.useState([]),[Dt,_r]=v.useState(""),[Ur,Sr]=v.useState([]),[pr,Zr]=v.useState(""),[Ss,es]=v.useState([]),[Ns,Ir]=v.useState(!1),[Rs,ts]=v.useState(null),[Nr,on]=v.useState(!0),[Dr,Br]=v.useState(!0),gr=!!pr&&(Dr||Ze.sessionAdminIds.length>0),An=!!Dt&&(Nr||Ze.stakeholderSessionIds.length>0),bi=((_s=lr.find(N=>N.id===pr))==null?void 0:_s.name)||"",sr=((V=lr.find(N=>N.id===Dt))==null?void 0:V.name)||"",ps=N=>{const F=N.map(he=>M.find(ke=>ke.id===he)).filter(he=>!!he);return F.length===0?"":F.map(he=>he.title||"Unnamed Session").join(", ")},ee=gr?`${bi||"Selected Product"}  ${Dr?"All Sessions":ps(Ze.sessionAdminIds)||"Sessions selected"}`:"",Ce=An?`${sr||"Selected Product"}  ${Nr?"All Sessions":ps(Ze.stakeholderSessionIds)||"Sessions selected"}`:"",ze=(()=>{const N=[];return Ze.isSystemAdmin&&N.push("System Admin"),gr&&N.push("Session Admin"),An&&N.push("Stakeholder"),N})(),Be=N=>{if(ze.length===0)return N?"Creating User...":"Create User";const F=ze.join(" & ");return N?`Adding ${F}...`:`Add ${F}`},[Je,Oe]=v.useState(!1),[ct,ht]=v.useState(null),[St,We]=v.useState(""),[Cr,Ut]=v.useState(""),[Wr,Bt]=v.useState(!1),yn=async N=>{N&&(N.preventDefault(),N.stopPropagation());try{await _e.auth.signOut()}catch(F){console.error("Error signing out:",F)}try{r(null)}catch(F){console.error("Error clearing session:",F)}t(null);try{localStorage.removeItem("voting_system_current_session"),localStorage.removeItem("voting_system_user"),localStorage.removeItem("azureDevOpsAuthInProgress"),sessionStorage.removeItem("oauth_return_path"),sessionStorage.removeItem("oauth_action"),sessionStorage.removeItem("oauth_error")}catch(F){console.error("Error clearing storage:",F)}_(!1),s("/login",{replace:!0})};v.useEffect(()=>{if(!S)return;const N=F=>{K.current&&!K.current.contains(F.target)&&_(!1)};return document.addEventListener("mousedown",N),document.addEventListener("touchstart",N,{passive:!0}),()=>{document.removeEventListener("mousedown",N),document.removeEventListener("touchstart",N)}},[S]),v.useEffect(()=>{if(!E)return;const N=F=>{const pe=ae.current[E];pe&&!pe.contains(F.target)&&C(null)};return document.addEventListener("mousedown",N),document.addEventListener("touchstart",N,{passive:!0}),()=>{document.removeEventListener("mousedown",N),document.removeEventListener("touchstart",N)}},[E]);const Qs=v.useCallback(async()=>{try{const N=await Ix(),F=new Date,pe=N.filter(he=>M.some(ke=>ke.product_id!==he.id?!1:new Date(ke.end_date)>=F));Gr(pe)}catch(N){console.error("Error loading products:",N)}},[M]),yr=()=>{Zr(""),es([]),Ot(N=>({...N,sessionAdminIds:[]})),Br(!0),or(N=>({...N,sessionAdmin:!1}))},Bn=()=>{_r(""),Ot(N=>({...N,stakeholderSessionIds:[]})),on(!0),or(N=>({...N,stakeholder:!1}))},br=N=>{if(!N){Sr([]);return}const F=new Date,pe=M.filter(he=>he.product_id!==N?!1:new Date(he.end_date)>=F);Sr(pe)};v.useEffect(()=>{Dt?br(Dt):Sr([])},[Dt,M]);const la=N=>{if(!N){es([]);return}const F=new Date,pe=M.filter(he=>he.product_id!==N?!1:new Date(he.end_date)>=F);es(pe)};v.useEffect(()=>{pr?la(pr):es([])},[pr,M]),v.useEffect(()=>{const N=a.get("filter");N==="session-admin"?(zr("Session Admin Management"),w("session-admin")):N==="stakeholder"?(zr("Stakeholder Management"),w("stakeholder")):zr("User Management")},[a]);const fr=async N=>{p(!0);try{const[F,pe,he]=await Promise.all([uv(),_e.from("session_admins").select("user_id, session_id, created_at").then(({data:q,error:ce})=>ce?(console.error("Error fetching all admin relations:",ce),[]):q||[]),_e.from("session_stakeholders").select("user_email, session_id, created_at").then(({data:q,error:ce})=>ce?(console.error("Error fetching all stakeholder relations:",ce),[]):q||[])]),ke=new Map;pe.forEach(q=>{ke.has(q.user_id)||ke.set(q.user_id,[]),ke.get(q.user_id).push({session_id:q.session_id,created_at:q.created_at})});const Te=new Map;he.forEach(q=>{var Ee;const ce=((Ee=q.user_email)==null?void 0:Ee.toLowerCase())||"";ce&&(Te.has(ce)||Te.set(ce,[]),Te.get(ce).push({session_id:q.session_id,created_at:q.created_at}))});const ve=new Map(N.map(q=>[q.id,q])),Ye=await Promise.all(F.map(async q=>{const ce=await y$(q.id),Ee=[],Ue=[];(ke.get(q.id)||[]).forEach(Ct=>{const at=ve.get(Ct.session_id);at&&Ee.push({...at,assignedAt:Ct.created_at,assignedBy:"System",assignedByName:"System"})});const ye=q.email.toLowerCase();return(Te.get(ye)||[]).forEach(Ct=>{const at=ve.get(Ct.session_id);at&&Ue.push({...at,assignedAt:Ct.created_at,assignedBy:"System",assignedByName:"System"})}),{...q,roles:ce,adminInSessions:Ee,stakeholderInSessions:Ue}}));u(Ye);const tt=new Map;Ye.forEach(q=>{const ce=q.email.toLowerCase().trim();tt.has(ce)||tt.set(ce,[]),tt.get(ce).push(q.id)});const D=new Map;tt.forEach((q,ce)=>{q.length>1&&D.set(ce,q)}),ft(D)}catch(F){console.error("Error loading users:",F)}finally{p(!1)}},Zs=async()=>{if(e){Ie(!0);try{const N=await qo(),[F,pe]=await Promise.all([Ri(e.id),_e.from("session_admins").select("session_id").eq("user_id",e.id).then(({data:ke,error:Te})=>Te?(console.error("Error fetching admin sessions:",Te),[]):(ke||[]).map(ve=>ve.session_id))]);ie(F);const he=pe;if(F)De(N),await Promise.all([Ms(),fr(N)]);else{const ke=he.length>0;if(W(ke),I(he),!ke){s("/sessions");return}const Te=N.filter(ve=>he.includes(ve.id));De(Te),Me("session-admin"),await fr(Te)}}catch(N){console.error("Error checking access:",N),s("/sessions")}finally{Ie(!1)}}},Ms=async()=>{try{const N=["chris.rodes@newmill.com","spencer.faull@newmill.com"],F=new Set,pe=await pv();if(pe.length>0){const ke=pe.reduce((Te,ve)=>new Date(ve.created_at)<new Date(Te.created_at)?ve:Te);Pt(ke.user_id),F.add(ke.user_id)}(await uv()).forEach(ke=>{N.includes(ke.email.toLowerCase())&&F.add(ke.id)}),Ht(F)}catch(N){console.error("Error loading protected accounts:",N)}},ln=N=>{if(N.id===Rt)return"Original Admin";const F=N.email.toLowerCase();return F==="chris.rodes@newmill.com"?"Manager":F==="spencer.faull@newmill.com"?"Portfolio Owner":null},Xt=N=>{const F=N.email.toLowerCase().trim(),pe=He.get(F);return pe?pe.length>1:!1},Oa=N=>{const F=N.email.toLowerCase().trim(),pe=He.get(F);return pe?pe.length:1},Ta=()=>{let N=[...l];if(B==="session-admin"&&M.length>0){const F=new Set(M.map(pe=>pe.id));N=N.filter(pe=>{var Te,ve;if(pe.id===(e==null?void 0:e.id))return!0;const he=(Te=pe.adminInSessions)==null?void 0:Te.some(Ye=>Ye&&F.has(Ye.id)),ke=(ve=pe.stakeholderInSessions)==null?void 0:ve.some(Ye=>Ye&&F.has(Ye.id));return!!he||!!ke})}if(y.trim()){const F=y.toLowerCase();N=N.filter(pe=>pe.name.toLowerCase().includes(F)||pe.email.toLowerCase().includes(F))}j!=="all"&&(N=N.filter(F=>{switch(j){case"system-admin":return F.roles.isSystemAdmin;case"session-admin":return F.roles.sessionAdminCount>0;case"stakeholder":return F.roles.stakeholderSessionCount>0;case"none":return!F.roles.isSystemAdmin&&F.roles.sessionAdminCount===0&&F.roles.stakeholderSessionCount===0;default:return!0}})),m(N)};v.useEffect(()=>{if(!e){s("/login");return}if(!ne.current)return ne.current=!0,Zs(),()=>{}},[e]),v.useEffect(()=>{const N=a.get("filter");N&&["system-admin","session-admin","stakeholder","none"].includes(N)&&w(N)},[a]),v.useEffect(()=>{B==="session-admin"?(j==="system-admin"||j==="session-admin"||j==="all")&&w("stakeholder"):B==="system-admin"&&w("all")},[B]);const ei=v.useCallback(()=>{Ta()},[l,y,j,B,M,e]);v.useEffect(()=>{ei()},[ei]),v.useEffect(()=>{function N(F){U.current&&!U.current.contains(F.target)&&Vt(pe=>({...pe,showResults:!1}))}return document.addEventListener("mousedown",N),()=>document.removeEventListener("mousedown",N)},[]);const Fs=async N=>{try{const F=[],pe=[];for(const he of M)await Rm(N,he.id)&&F.push(he.id),await j$(N,he.id)&&pe.push(he.id);et({adminSessions:F,stakeholderSessions:pe})}catch(F){console.error("Error loading user session memberships:",F)}},vn=async(N,F)=>{le(N),$(F),kt(""),Yt(!0),re([]),Ne(!0),C(null),lr.length===0&&await Qs(),await Fs(N.id)},ca=()=>{Ne(!1),$(null),le(null),kt(""),Yt(!0),re([]),et({adminSessions:[],stakeholderSessions:[]})},ks=(N,F)=>{if(!F)return[];const pe=new Date;return N.filter(he=>he.product_id!==F?!1:new Date(he.end_date)>=pe)},Vr=async()=>{if(!xe||!Z)return;if(!rt){alert("Please select a product first.");return}let N=[];if(lt)N=ks(ha(Z),rt).map(pe=>pe.id);else{if(R.length===0){alert("Please select at least one session.");return}N=R}if(N.length===0){alert("No sessions available for this product.");return}try{for(const F of N)Z==="session-admin"?await El(F,xe.id):Z==="stakeholder"?await jS(F,xe.email,xe.name):Z==="remove-stakeholder"&&await mv(F,xe.email);ca(),await fr(M)}catch(F){console.error("Error modifying user session role:",F);const pe=(F==null?void 0:F.message)||(F==null?void 0:F.toString())||"Unknown error";console.error("Full error details:",F),alert(`Failed to ${Z==="remove-stakeholder"?"remove stakeholder from":"add user to"} session(s).

Error: ${pe}

Please check the console for more details.`)}},xn=async(N,F)=>{if(C(null),!!confirm(`Are you sure you want to ${F?"remove":"grant"} system admin access for this user?`))try{F?await gv(N):await Rh(N),await fr(M)}catch(pe){console.error("Error toggling system admin:",pe),alert("Failed to update system admin status. Please try again.")}},bn=async(N,F)=>{C(null);const pe=B==="session-admin"?`Are you sure you want to remove ${F} from all sessions you manage? This will remove them as a stakeholder or session admin from your sessions only.`:`Are you sure you want to remove all roles from ${F}? This will remove them from all sessions and revoke system admin access.`;if(confirm(pe))try{if(B==="system-admin"&&await gv(N),B==="session-admin"){for(const he of se)try{await hv(he,N)}catch(ke){console.error(`Error removing session admin from ${he}:`,ke)}for(const he of se)try{await NS(he,N)}catch(ke){console.error(`Error removing stakeholder from ${he}:`,ke)}}else for(const he of M)try{await hv(he.id,N),await NS(he.id,N)}catch{}await fr(M)}catch(he){console.error("Error removing roles:",he),alert("Failed to remove roles. Please try again.")}},rs=async(N,F)=>{const pe=l.find(he=>he.id===N);if(pe){if(B==="session-admin"){if(pe.roles.stakeholderSessionCount===0){alert("This user is not a stakeholder in any sessions.");return}const he=`Are you sure you want to remove ${F} as a stakeholder from all sessions you manage?`;if(!confirm(he))return;try{let ke=0;for(const Te of M)try{await mv(Te.id,pe.email),ke++}catch(ve){console.error(`Error removing stakeholder from session ${Te.id}:`,ve)}await fr(M),ke>0?alert(`${F} has been removed as a stakeholder from ${ke} session(s) you manage.`):alert(`${F} was not a stakeholder in any of the sessions you manage.`)}catch(ke){console.error("Error removing stakeholder:",ke),alert("Failed to remove stakeholder. Please try again.")}return}Ae(pe),Fe(!0)}},gs=async()=>{var N;if(we){if(rr.has(we.id)){const F=ln(we);alert(`Cannot delete this protected account${F?` (${F})`:""}. This protects against accidentally locking important users out of the system.`),Fe(!1),Ae(null);return}It(!0);try{if(!e)throw new Error("You must be logged in to delete users");const pe=`${_e.supabaseUrl}/functions/v1/delete-user`,he=await fetch(pe,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${_e.supabaseKey}`},body:JSON.stringify({userId:we.id,currentUserId:e.id})});if(!he.ok){let ve="Failed to delete user";try{ve=(await he.json()).error||ve}catch{ve=`Server returned ${he.status}: ${he.statusText}`}throw new Error(ve)}const ke=await he.json();u(ve=>ve.filter(Ye=>Ye.id!==we.id)),Fe(!1);const Te=we.id;Ae(null);try{await fr(M)}catch(ve){console.error("Error reloading users after deletion:",ve)}}catch(F){console.error("Error deleting user:",F);const pe=(F==null?void 0:F.message)||((N=F==null?void 0:F.error)==null?void 0:N.message)||"Unknown error";u(he=>!he.find(Te=>Te.id===(we==null?void 0:we.id))&&we?[...he,we].sort((Te,ve)=>(Te.name||Te.email).localeCompare(ve.name||ve.email)):he),alert(`Failed to delete user: ${pe}

If this persists, the deletion may be blocked by database security policies. Please check the console for details.`);try{await fr(M)}catch(he){console.error("Error reloading users after failed deletion:",he)}}finally{It(!1)}}},ua=()=>{Fe(!1),Ae(null)},cn=async()=>{if(!ct)return;if(!St.trim()){alert("Name is required");return}if(!Cr.trim()){alert("Email is required");return}if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(Cr.trim())){alert("Please enter a valid email address");return}Bt(!0);try{const{error:F}=await _e.from("users").update({name:St.trim(),email:Cr.trim().toLowerCase()}).eq("id",ct.id);if(F)throw F;u(pe=>pe.map(he=>he.id===ct.id?{...he,name:St.trim(),email:Cr.trim().toLowerCase()}:he)),Oe(!1),ht(null),We(""),Ut("")}catch(F){console.error("Error updating user:",F),alert("Failed to update user. Please try again.")}finally{Bt(!1)}},vo=()=>{_(!1),Lt(!0),Ot({name:"",email:"",isSystemAdmin:!1,sessionAdminIds:[],stakeholderSessionIds:[]}),Vt(ed()),_r(""),Sr([]),Zr(""),es([]),Qs(),Zt(!0)},Li=()=>{Lt(!1),Ot({name:"",email:"",isSystemAdmin:!1,sessionAdminIds:[],stakeholderSessionIds:[]}),Vt(ed()),_r(""),Sr([]),Zr(""),es([]),on(!0),Br(!0),or({sessionAdmin:!1,stakeholder:!1}),Zt(!0)};v.useEffect(()=>{(async()=>{var pe,he,ke,Te;try{const{data:{session:ve}}=await _e.auth.getSession();if(ve){const Ye=((he=(pe=ve.user)==null?void 0:pe.app_metadata)==null?void 0:he.provider)==="azure"||((Te=(ke=ve.user)==null?void 0:ke.identities)==null?void 0:Te.some(tt=>tt.provider==="azure"));Jt(Ye||!1)}else Jt(!1)}catch(ve){console.error("Error checking Azure sign-in status:",ve),Jt(!1)}})();const{data:{subscription:F}}=_e.auth.onAuthStateChange((pe,he)=>{var ke,Te,ve,Ye;if(he){const tt=((Te=(ke=he.user)==null?void 0:ke.app_metadata)==null?void 0:Te.provider)==="azure"||((Ye=(ve=he.user)==null?void 0:ve.identities)==null?void 0:Ye.some(D=>D.provider==="azure"));Jt(tt||!1)}else Jt(!1)});return()=>{F.unsubscribe()}},[]);const Wn=async()=>{try{const N=window.location.pathname.startsWith("/feature-voting-app")?"/feature-voting-app":"",{error:F}=await _e.auth.signInWithOAuth({provider:"azure",options:{redirectTo:`${window.location.origin}${N}/users`,scopes:"email openid profile User.ReadBasic.All"}});F&&(console.error("Azure sign-in error:",F),Vt(pe=>({...pe,error:"Failed to sign in with Microsoft. Please try again."})))}catch(N){console.error("Azure sign-in error:",N),Vt(F=>({...F,error:"Failed to sign in with Microsoft. Please try again."}))}},xo=async N=>{if(Vt(F=>({...F,searchTerm:N,isSearching:!0,showResults:!1,error:""})),!N||N.trim().length<2){Vt(F=>({...F,results:[],isSearching:!1,error:""}));return}try{const F=await XZ(N);Vt(pe=>({...pe,results:F,isSearching:!1,showResults:F.length>0,error:""}))}catch(F){console.error("Error searching Azure AD users:",F);const pe=(F==null?void 0:F.message)||"Failed to search company users. Please try again.";Vt(he=>({...he,results:[],isSearching:!1,showResults:!1,error:pe}))}},Ia=N=>{let F="";if(N.givenName&&N.surname)F=`${N.givenName} ${N.surname}`;else if(N.displayName){const pe=N.displayName.trim();if(pe.includes(",")){const he=pe.split(",").map(ke=>ke.trim());he.length===2?F=`${he[1]} ${he[0]}`:F=pe}else F=pe}else F=N.mail||N.userPrincipalName||"";Ot({...Ze,name:F,email:N.mail||N.userPrincipalName}),Vt(ed()),Zt(!1)},da=async()=>{if(!Ze.name.trim()||!Ze.email.trim()){alert("Please fill in all required fields (Name, Email)");return}nr(!0);try{const{data:N,error:F}=await _e.from("users").insert({name:Ze.name.trim(),email:Ze.email.trim().toLowerCase(),created_by:e==null?void 0:e.id,created_by_name:e==null?void 0:e.name}).select().single();if(F)throw F;if(!N)throw new Error("User creation failed");const pe=N.id;if(B==="system-admin"&&Ze.isSystemAdmin&&await Rh(pe),B==="system-admin"&&mr.sessionAdmin&&pr)if(Dr)for(const Te of Ss)try{await El(Te.id,pe)}catch(ve){console.error(`Error adding session admin role to session ${Te.id}:`,ve)}else for(const Te of Ze.sessionAdminIds)try{await El(Te,pe)}catch(ve){console.error("Error adding session admin role:",ve)}console.log("Adding stakeholder to sessions:",Ze.stakeholderSessionIds),console.log("View mode:",B),console.log("User admin sessions:",se),console.log("All sessions:",M.map(Te=>({id:Te.id,title:Te.title})));let he=[];if(B==="session-admin"?Dt&&Nr?he=Ur.map(Te=>Te.id):Dt&&!Nr&&(he=Ze.stakeholderSessionIds):B==="system-admin"&&mr.stakeholder&&Dt&&(Nr?he=Ur.map(Te=>Te.id):he=Ze.stakeholderSessionIds),he.length===0)console.log("No stakeholder sessions to add");else{for(const Te of he){if(B==="session-admin"&&!M.some(Ye=>Ye.id===Te)){console.warn(`Skipping session ${Te} - not in managed sessions`);continue}try{console.log(`Adding ${Ze.email} as stakeholder to session ${Te}`);const ve=await jS(Te,Ze.email,Ze.name);console.log(`Successfully added stakeholder to session ${Te}:`,ve)}catch(ve){console.error(`Error adding stakeholder role to session ${Te}:`,ve);const Ye=(ve==null?void 0:ve.message)||(ve==null?void 0:ve.toString())||"Unknown error";alert(`Warning: Failed to add ${Ze.email} to session ${Te}.

Error: ${Ye}`)}}console.log("Finished adding stakeholder roles")}let ke="User";Ze.isSystemAdmin?ke="System Admin":mr.sessionAdmin&&pr&&(Dr||Ze.sessionAdminIds.length>0)?ke="Session Admin":(B==="session-admin"&&Dt&&(Nr||Ze.stakeholderSessionIds.length>0)||B==="system-admin"&&mr.stakeholder&&Dt&&(Nr||Ze.stakeholderSessionIds.length>0))&&(ke="Stakeholder"),Li(),await fr(M),ts({email:Ze.email,userType:ke}),Ir(!0)}catch(N){console.error("Error creating user:",N),alert(`Failed to create user: ${N.message||"Unknown error"}`)}finally{nr(!1)}},fa=N=>{Ot(F=>({...F,sessionAdminIds:F.sessionAdminIds.includes(N)?F.sessionAdminIds.filter(pe=>pe!==N):[...F.sessionAdminIds,N]}))},Da=N=>{Ot(F=>({...F,stakeholderSessionIds:F.stakeholderSessionIds.includes(N)?F.stakeholderSessionIds.filter(pe=>pe!==N):[...F.stakeholderSessionIds,N]}))},en=N=>{const pe=N.split("T")[0].split(" ")[0].split("-");if(pe.length!==3)return new Date(N).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"});const he=parseInt(pe[0],10),ke=parseInt(pe[1],10)-1,Te=parseInt(pe[2],10);return new Date(he,ke,Te).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})},ns=N=>{const F=new Date,pe=new Date(N.start_date),he=new Date(N.end_date);return N.is_active&&F>=pe&&F<=he?{text:"Active",color:"text-green-600"}:F<pe?{text:"Upcoming",color:"text-blue-600"}:{text:"Ended",color:"text-gray-500"}},Yr=N=>{const F=new Date(N.start_date),pe=new Date(N.end_date),he=F.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}),ke=pe.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"});return`${he} - ${ke}`},zi=N=>N.roles.isSystemAdmin?i.jsxs("span",{className:"inline-flex items-center px-2.5 py-1 rounded text-xs font-medium bg-[#C89212] text-white",children:[i.jsx(Os,{className:"h-3.5 w-3.5 mr-1"}),"System Admin"]}):N.roles.sessionAdminCount>0?i.jsxs("span",{className:"inline-flex items-center px-2.5 py-1 rounded text-xs font-medium bg-[#576C71] text-white",children:[i.jsx(us,{className:"h-3.5 w-3.5 mr-1"}),"Session Admin (",N.roles.sessionAdminCount,")"]}):N.roles.stakeholderSessionCount>0?i.jsxs("span",{className:"inline-flex items-center px-2.5 py-1 rounded text-xs font-medium bg-[#8B5A4A] text-white",children:[i.jsx(As,{className:"h-3.5 w-3.5 mr-1"}),"Stakeholder (",N.roles.stakeholderSessionCount,")"]}):i.jsx("span",{className:"inline-flex items-center px-2.5 py-1 rounded text-xs font-medium bg-gray-100 text-gray-600",children:"No Role"}),ha=N=>N?N==="session-admin"?M.filter(F=>!Pe.adminSessions.includes(F.id)):N==="remove-stakeholder"?M.filter(F=>Pe.stakeholderSessions.includes(F.id)&&(B==="system-admin"||se.includes(F.id))):M.filter(F=>!Pe.stakeholderSessions.includes(F.id)):[],ti=(N,F)=>F?F==="session-admin"?N.roles.sessionAdminCount<M.length:N.roles.stakeholderSessionCount<M.length:!1;return Se||f?i.jsx("div",{className:"min-h-screen w-full bg-gray-50 flex items-center justify-center",children:i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-[#2d4660] mx-auto mb-4"}),i.jsx("p",{className:"text-gray-600",children:Se?"Checking access...":"Loading users..."})]})}):G?i.jsxs("div",{className:"min-h-screen bg-gray-50 pb-20",children:[i.jsxs("div",{className:"container mx-auto p-4 max-w-6xl",children:[i.jsx("div",{className:"hidden md:flex md:justify-center mb-2",children:i.jsx("img",{src:vi,alt:"New Millennium Building Systems Logo",className:"-mt-4 cursor-pointer hover:opacity-80 transition-opacity",style:{height:"96px",width:"auto"},onClick:()=>s("/sessions")})}),i.jsxs("div",{className:"flex justify-between items-center mb-4 md:mb-6",children:[i.jsxs("div",{className:"flex items-center flex-1 min-w-0",children:[i.jsx("img",{src:Pa,alt:"New Millennium Building Systems Logo",className:"mr-3 md:hidden flex-shrink-0 cursor-pointer hover:opacity-80 transition-opacity",style:{width:"36px",height:"36px",objectFit:"contain"},onClick:()=>s("/sessions")}),i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsx("h1",{className:"text-xl md:text-3xl font-bold text-[#2d4660] truncate",children:En}),i.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:[e==null?void 0:e.name,G&&i.jsx("span",{className:"ml-2 inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium bg-[#C89212] text-white",children:"System Admin"}),!G&&te&&i.jsx("span",{className:"ml-2 inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium bg-[#576C71] text-white",children:"Session Admin"})]})]})]}),i.jsxs("div",{ref:K,className:"relative z-40 flex-shrink-0 ml-2",children:[i.jsxs("div",{className:"hidden md:flex space-x-2",children:[(G||te)&&i.jsxs("button",{onClick:vo,className:"flex items-center px-4 py-2 bg-[#2D4660] text-white rounded-lg hover:bg-[#173B65] transition-colors",children:[i.jsx(hs,{className:"h-4 w-4 mr-2"}),B==="session-admin"?"Add Stakeholder":"Add User"]}),(G||te)&&n&&i.jsxs("button",{onClick:()=>s("/admin"),className:"flex items-center px-4 py-2 bg-[#1E5461] text-white rounded-lg hover:bg-[#145668] transition-colors",children:[i.jsx(us,{className:"h-4 w-4 mr-2"}),"Admin Dashboard"]}),i.jsxs("button",{onClick:()=>s("/sessions"),className:"flex items-center px-4 py-2 bg-[#4f6d8e] text-white rounded-lg hover:bg-[#3d5670] transition-colors",children:[i.jsx(Mn,{className:"h-4 w-4 mr-2"}),"My Sessions"]}),i.jsxs("button",{onClick:N=>{N.preventDefault(),N.stopPropagation(),yn(N)},className:"flex items-center px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-colors",children:[i.jsx(Jn,{className:"h-4 w-4 mr-2"}),"Logout"]})]}),i.jsx("div",{className:"flex md:hidden",children:i.jsx("button",{onClick:()=>_(!S),className:"p-2 rounded-md border border-gray-200 bg-white shadow-sm","aria-label":"Open menu",children:i.jsx(di,{className:"h-5 w-5 text-gray-700"})})}),S&&i.jsx("div",{className:"absolute right-0 mt-2 w-56 bg-white border border-gray-200 rounded-lg shadow-lg md:hidden z-50",children:i.jsxs("div",{className:"py-1",children:[(G||te)&&i.jsxs("button",{onClick:()=>{_(!1),vo()},className:"w-full px-4 py-3 flex items-center text-left hover:bg-gray-50",children:[i.jsx(hs,{className:"h-5 w-5 mr-3 text-green-600"}),i.jsx("span",{className:"text-base",children:B==="session-admin"?"Add Stakeholder":"Add User"})]}),(G||te)&&n&&i.jsxs("button",{onClick:()=>{_(!1),s("/admin")},className:"w-full px-4 py-3 flex items-center text-left hover:bg-gray-50",children:[i.jsx(us,{className:"h-5 w-5 mr-3 text-[#1E5461]"}),i.jsx("span",{className:"text-base",children:"Admin Dashboard"})]}),i.jsxs("button",{onClick:()=>{_(!1),s("/sessions")},className:"w-full px-4 py-3 flex items-center text-left hover:bg-gray-50",children:[i.jsx(Mn,{className:"h-5 w-5 mr-3 text-gray-700"}),i.jsx("span",{className:"text-base",children:"My Sessions"})]}),i.jsxs("button",{onClick:N=>{N.preventDefault(),N.stopPropagation(),_(!1),yn(N)},className:"w-full px-4 py-3 flex items-center text-left hover:bg-gray-50",children:[i.jsx(Jn,{className:"h-5 w-5 mr-3 text-gray-700"}),i.jsx("span",{className:"text-base",children:"Logout"})]})]})})]})]}),i.jsx("div",{className:"relative z-10 bg-white rounded-lg shadow-md p-3 md:p-4 mb-4 md:mb-6",children:i.jsxs("div",{className:"flex flex-col gap-3 md:flex-row md:gap-4",children:[i.jsxs("div",{className:"flex-1 relative",children:[i.jsx(dN,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"}),i.jsx("input",{type:"text",placeholder:"Search by name or email...",value:y,onChange:N=>x(N.target.value),className:"w-full pl-10 pr-10 py-2.5 md:py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#2d4660] focus:border-transparent text-base"}),y&&i.jsx("button",{onClick:()=>x(""),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600",children:i.jsx(js,{className:"h-5 w-5"})})]}),i.jsxs("select",{value:j==="system-admin"&&B==="session-admin"?"session-admin":j,onChange:N=>w(N.target.value),className:"px-4 py-2.5 md:py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#2d4660] focus:border-transparent text-base",children:[B!=="session-admin"&&i.jsx("option",{value:"all",children:"All Roles"}),B!=="session-admin"&&i.jsx("option",{value:"system-admin",children:"System Admin"}),B!=="session-admin"&&i.jsx("option",{value:"session-admin",children:"Session Admin"}),i.jsx("option",{value:"stakeholder",children:"Stakeholder"}),i.jsx("option",{value:"none",children:"No Role"})]})]})}),i.jsx("div",{className:"md:hidden space-y-3 relative z-10 overflow-visible",children:d.length===0?i.jsx("div",{className:"bg-white rounded-lg shadow-md p-8 text-center text-gray-500",children:y||j!=="all"?"No users found matching your filters.":"No users found."}):d.map(N=>{var F,pe;return i.jsxs("div",{className:"bg-white rounded-lg shadow-md overflow-visible",children:[i.jsxs("div",{className:"p-4 border-b border-gray-100",children:[i.jsxs("div",{className:"flex justify-between items-start mb-2",children:[i.jsxs("div",{className:"flex-1 min-w-0 pr-2",children:[i.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[i.jsx("h3",{className:"text-base font-semibold text-gray-900 truncate",children:N.name||N.email}),N.id===(e==null?void 0:e.id)&&i.jsx("span",{className:"text-xs text-[#c59f2d] font-semibold",children:"(You)"}),N.roles.isSystemAdmin&&i.jsx("span",{className:"inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium bg-[#C89212] text-white",children:"System Admin"}),N.roles.sessionAdminCount>0&&i.jsxs("span",{className:"inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-700",children:["Session Admin (",N.roles.sessionAdminCount,")"]}),N.roles.stakeholderSessionCount>0&&i.jsxs("span",{className:"inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-700",children:["Stakeholder (",N.roles.stakeholderSessionCount,")"]}),ln(N)&&i.jsxs("span",{className:"text-xs text-[#c59f2d] font-semibold",children:["(",ln(N),")"]}),Xt(N)&&i.jsxs("span",{className:"px-2 py-0.5 bg-red-100 text-red-700 text-xs font-medium rounded",children:["Duplicate (",Oa(N),")"]})]}),i.jsx("p",{className:"text-sm text-gray-500 truncate mt-1",children:N.email})]}),i.jsx("div",{className:"flex items-center gap-2 flex-shrink-0",children:i.jsxs("div",{className:"relative",ref:he=>{ae.current[N.id]=he},children:[i.jsx("button",{onClick:()=>C(E===N.id?null:N.id),className:`p-2 rounded-md hover:bg-gray-100 transition-colors ${N.id===(e==null?void 0:e.id)?"opacity-50 cursor-not-allowed":""}`,disabled:N.id===(e==null?void 0:e.id),title:N.id===(e==null?void 0:e.id)?"Cannot modify your own permissions":"Change user role",children:i.jsx(uN,{className:"h-5 w-5 text-gray-600"})}),E===N.id&&N.id!==(e==null?void 0:e.id)&&i.jsx("div",{className:"fixed md:absolute md:right-0 md:mt-1 w-64 bg-white border border-gray-200 rounded-lg shadow-lg z-[9999]",style:(()=>{const he=ae.current[N.id];if(!he)return{};const ke=he.getBoundingClientRect();return window.innerWidth<768?{top:`${ke.bottom+4}px`,right:`${window.innerWidth-ke.right+4}px`,left:"auto"}:{}})(),children:i.jsxs("div",{className:"py-1",children:[i.jsx("div",{className:"px-3 py-2 text-xs font-semibold text-gray-500 uppercase border-b border-gray-200",children:"Change User Role"}),B==="system-admin"&&i.jsxs(i.Fragment,{children:[N.roles.isSystemAdmin?i.jsxs("button",{onClick:()=>xn(N.id,!0),className:"w-full px-4 py-3 text-left flex items-center hover:bg-red-50 text-red-700",children:[i.jsx(Os,{className:"h-5 w-5 mr-3 flex-shrink-0"}),i.jsxs("div",{children:[i.jsx("div",{className:"font-medium text-base",children:"Remove System Admin"}),i.jsx("div",{className:"text-xs text-gray-500",children:"Revoke global admin access"})]})]}):i.jsxs("button",{onClick:()=>xn(N.id,!1),className:"w-full px-4 py-3 text-left flex items-center hover:bg-[#C89212]/10 text-[#C89212]",children:[i.jsx(Os,{className:"h-5 w-5 mr-3 flex-shrink-0"}),i.jsxs("div",{children:[i.jsx("div",{className:"font-medium text-base",children:"Make System Admin"}),i.jsx("div",{className:"text-xs text-gray-500",children:"Grant global admin access"})]})]}),ti(N,"session-admin")&&i.jsxs("button",{onClick:()=>vn(N,"session-admin"),className:"w-full px-4 py-3 text-left flex items-center hover:bg-[#576C71]/10 text-[#576C71] border-t border-gray-200",children:[i.jsx(us,{className:"h-5 w-5 mr-3 flex-shrink-0"}),i.jsxs("div",{children:[i.jsx("div",{className:"font-medium text-base",children:"Make Session Admin"}),i.jsx("div",{className:"text-xs text-gray-500",children:"Add to a session as admin"})]})]})]}),ti(N,"stakeholder")&&i.jsxs("button",{onClick:()=>vn(N,"stakeholder"),className:"w-full px-4 py-3 text-left flex items-center hover:bg-[#8B5A4A]/10 text-[#8B5A4A] border-t border-gray-200",children:[i.jsx(As,{className:"h-5 w-5 mr-3 flex-shrink-0"}),i.jsxs("div",{children:[i.jsx("div",{className:"font-medium text-base",children:"Make Stakeholder"}),i.jsx("div",{className:"text-xs text-gray-500",children:"Add to a session as stakeholder"})]})]}),B==="session-admin"&&N.stakeholderInSessions&&N.stakeholderInSessions.length>0&&N.stakeholderInSessions.some(he=>se.includes(he.id))&&i.jsxs("button",{onClick:()=>vn(N,"remove-stakeholder"),className:"w-full px-4 py-3 text-left flex items-center hover:bg-red-50 text-red-700 border-t border-gray-200",children:[i.jsx(Vu,{className:"h-5 w-5 mr-3 flex-shrink-0"}),i.jsxs("div",{children:[i.jsx("div",{className:"font-medium text-base",children:"Remove Stakeholder"}),i.jsx("div",{className:"text-xs text-gray-500",children:"Remove from a session you manage"})]})]}),(N.roles.isSystemAdmin||N.roles.sessionAdminCount>0||N.roles.stakeholderSessionCount>0)&&i.jsxs("button",{onClick:()=>bn(N.id,N.name),className:"w-full px-4 py-3 text-left flex items-center hover:bg-gray-50 text-gray-700 border-t border-gray-200",children:[i.jsx(Vu,{className:"h-5 w-5 mr-3 flex-shrink-0"}),i.jsxs("div",{children:[i.jsx("div",{className:"font-medium text-base",children:"Remove All Roles"}),i.jsx("div",{className:"text-xs text-gray-500",children:"Remove from all sessions"})]})]}),(B==="system-admin"||B==="session-admin"&&N.roles.stakeholderSessionCount>0&&((F=N.stakeholderInSessions)==null?void 0:F.some(he=>M.some(ke=>ke.id===he.id)))&&!X.has(N.email))&&i.jsx("div",{className:"px-3 py-2 text-xs font-semibold text-gray-500 uppercase border-t border-gray-200",children:"User Functions"}),B==="system-admin"&&i.jsxs("button",{onClick:()=>{ht(N),We(N.name),Ut(N.email),Oe(!0),C(null)},className:"w-full px-4 py-3 text-left flex items-center hover:bg-[#1E5461]/10 text-[#1E5461] border-t border-gray-200",children:[i.jsx(dd,{className:"h-5 w-5 mr-3 flex-shrink-0"}),i.jsxs("div",{children:[i.jsx("div",{className:"font-medium text-base",children:"Edit User Profile"}),i.jsx("div",{className:"text-xs text-gray-500",children:"Update name and email"})]})]}),(B==="system-admin"||B==="session-admin"&&N.roles.stakeholderSessionCount>0&&((pe=N.stakeholderInSessions)==null?void 0:pe.some(he=>M.some(ke=>ke.id===he.id))))&&!X.has(N.email)&&i.jsxs("button",{onClick:()=>{C(null),rs(N.id,N.name)},className:`w-full px-4 py-3 text-left flex items-center hover:bg-[#8B5A4A]/10 text-[#8B5A4A] border-t border-gray-200 ${N.id===(e==null?void 0:e.id)||B==="system-admin"&&rr.has(N.id)?"opacity-50 cursor-not-allowed":""}`,disabled:N.id===(e==null?void 0:e.id)||B==="system-admin"&&rr.has(N.id),children:[i.jsx(na,{className:"h-5 w-5 mr-3 flex-shrink-0"}),i.jsxs("div",{children:[i.jsx("div",{className:"font-medium text-base",children:B==="session-admin"?"Remove Stakeholder":"Delete User"}),i.jsx("div",{className:"text-xs text-gray-500",children:B==="session-admin"?"Remove from all your sessions":N.id===(e==null?void 0:e.id)?"Cannot delete your own account":rr.has(N.id)?`Cannot delete protected account${ln(N)?` (${ln(N)})`:""}`:"Permanently delete this user"})]})]})]})})]})})]}),i.jsx("div",{className:"mt-2",children:zi(N)})]}),i.jsxs("div",{className:"p-4 space-y-3",children:[i.jsxs("div",{children:[i.jsx("div",{className:"text-xs font-semibold text-gray-500 uppercase mb-1",children:"Sessions"}),i.jsxs("div",{className:"space-y-1",children:[N.roles.sessionAdminCount>0&&i.jsxs("div",{className:"space-y-1",children:[i.jsxs("div",{className:"inline-flex items-center gap-1.5 px-2.5 py-1 rounded border text-xs font-medium",style:{borderColor:"#576C71",color:"#576C71"},children:[i.jsx(fN,{className:"h-3.5 w-3.5 flex-shrink-0",style:{fill:"#576C71",color:"#576C71"}}),i.jsxs("span",{children:[N.roles.sessionAdminCount," as Session Admin"]})]}),N.adminInSessions&&N.adminInSessions.length>0&&i.jsx(i.Fragment,{children:(()=>{const ke=fe(N.adminInSessions)||N.adminInSessions[0],Te=N.adminInSessions.length>1,ve=(P==null?void 0:P.userId)===N.id&&(P==null?void 0:P.role)==="admin";return i.jsxs(i.Fragment,{children:[ke&&i.jsxs("button",{onClick:async Ye=>{Ye.stopPropagation(),await r(ke),s("/admin")},className:"ml-6 text-left text-sm text-gray-700 hover:text-gray-900 hover:underline",children:[i.jsx("div",{children:ke.title||"Unnamed Session"}),i.jsx("div",{className:"text-xs text-gray-500 mt-0.5",children:Yr(ke)})]}),Te&&i.jsxs("button",{onClick:Ye=>{Ye.stopPropagation(),z(ve?null:{userId:N.id,role:"admin"})},className:"ml-6 text-xs text-gray-500 hover:text-gray-700 hover:underline mt-1 block flex items-center gap-1.5",style:{minWidth:"70px"},children:[i.jsx("span",{className:"inline-flex items-center justify-center w-4 h-4 border border-gray-400 rounded text-gray-600",children:ve?i.jsx($c,{className:"h-2.5 w-2.5"}):i.jsx(Dn,{className:"h-2.5 w-2.5"})}),ve?"Hide":"Show"]}),ve&&i.jsx("div",{className:"ml-6 mt-1 space-y-1",children:N.adminInSessions.filter(Ye=>Ye.id!==(ke==null?void 0:ke.id)).map(Ye=>i.jsxs("button",{onClick:async tt=>{tt.stopPropagation(),await r(Ye),s("/admin")},className:"block text-sm text-left text-gray-700 hover:text-gray-900 hover:underline w-full",children:[i.jsx("div",{children:Ye.title||"Unnamed Session"}),i.jsx("div",{className:"text-xs text-gray-500 mt-0.5",children:Yr(Ye)})]},Ye.id))})]})})()})]}),N.roles.stakeholderSessionCount>0&&i.jsxs("div",{className:"space-y-1",children:[i.jsxs("div",{className:"inline-flex items-center gap-1.5 px-2.5 py-1 rounded border text-xs font-medium",style:{borderColor:"#8B5A4A",color:"#8B5A4A"},children:[i.jsx(As,{className:"h-3.5 w-3.5 flex-shrink-0",style:{fill:"#8B5A4A",color:"#8B5A4A"}}),i.jsxs("span",{children:[N.roles.stakeholderSessionCount," as Stakeholder"]})]}),N.stakeholderInSessions&&N.stakeholderInSessions.length>0&&i.jsx(i.Fragment,{children:(()=>{const ke=fe(N.stakeholderInSessions)||N.stakeholderInSessions[0],Te=N.stakeholderInSessions.length>1,ve=(P==null?void 0:P.userId)===N.id&&(P==null?void 0:P.role)==="stakeholder";return i.jsxs(i.Fragment,{children:[ke&&i.jsxs("button",{onClick:async Ye=>{Ye.stopPropagation(),await r(ke),s("/admin")},className:"ml-6 text-left text-sm text-gray-700 hover:text-gray-900 hover:underline",children:[i.jsx("div",{children:ke.title||"Unnamed Session"}),i.jsx("div",{className:"text-xs text-gray-500 mt-0.5",children:Yr(ke)})]}),Te&&i.jsxs("button",{onClick:Ye=>{Ye.stopPropagation(),z(ve?null:{userId:N.id,role:"stakeholder"})},className:"ml-6 text-xs text-gray-500 hover:text-gray-700 hover:underline mt-1 block flex items-center gap-1.5",style:{minWidth:"70px"},children:[i.jsx("span",{className:"inline-flex items-center justify-center w-4 h-4 border border-gray-400 rounded text-gray-600",children:ve?i.jsx($c,{className:"h-2.5 w-2.5"}):i.jsx(Dn,{className:"h-2.5 w-2.5"})}),ve?"Hide":"Show"]}),ve&&i.jsx("div",{className:"ml-6 mt-1 space-y-1",children:N.stakeholderInSessions.filter(Ye=>Ye.id!==(ke==null?void 0:ke.id)).map(Ye=>i.jsxs("button",{onClick:async tt=>{tt.stopPropagation(),await r(Ye),s("/admin")},className:"block text-sm text-left text-gray-700 hover:text-gray-900 hover:underline w-full",children:[i.jsx("div",{children:Ye.title||"Unnamed Session"}),i.jsx("div",{className:"text-xs text-gray-500 mt-0.5",children:Yr(Ye)})]},Ye.id))})]})})()})]}),N.roles.sessionAdminCount===0&&N.roles.stakeholderSessionCount===0&&i.jsx("span",{className:"text-sm text-gray-400",children:"No session roles"})]})]}),i.jsxs("div",{children:[i.jsx("div",{className:"text-xs font-semibold text-gray-500 uppercase mb-1",children:"Assigned"}),i.jsxs("div",{className:"space-y-2",children:[N.roles.sessionAdminCount===0&&N.roles.stakeholderSessionCount===0&&i.jsxs("div",{className:"flex items-center text-sm text-gray-700",children:[i.jsx(sn,{className:"h-4 w-4 mr-2 text-gray-400 flex-shrink-0"}),i.jsx("span",{children:N.created_at?en(N.created_at):"N/A"}),i.jsxs("span",{className:"text-gray-500 text-xs ml-2",children:["by ",N.created_by_name||"System"]})]}),N.adminInSessions&&N.adminInSessions.length>0&&i.jsx("div",{className:"space-y-3",children:(()=>{const ke=fe(N.adminInSessions)||N.adminInSessions[0];N.adminInSessions.length>1;const Te=(P==null?void 0:P.userId)===N.id&&(P==null?void 0:P.role)==="admin";return i.jsxs(i.Fragment,{children:[ke&&i.jsxs("div",{className:"ml-5 space-y-1",children:[i.jsxs("div",{className:"flex items-center text-xs text-gray-700 whitespace-nowrap",children:[i.jsx(sn,{className:"h-3 w-3 mr-1.5 text-gray-400 flex-shrink-0"}),i.jsx("span",{children:ke.assignedAt?en(ke.assignedAt):"N/A"})]}),i.jsxs("div",{className:"text-xs text-gray-500 ml-5",children:["by ",ke.assignedByName||"System"]})]}),Te&&i.jsx("div",{className:"ml-5 mt-2 space-y-3",children:N.adminInSessions.filter(ve=>ve.id!==(ke==null?void 0:ke.id)).map(ve=>i.jsxs("div",{className:"space-y-1",children:[i.jsxs("div",{className:"flex items-center text-xs text-gray-700 whitespace-nowrap",children:[i.jsx(sn,{className:"h-3 w-3 mr-1.5 text-gray-400 flex-shrink-0"}),i.jsx("span",{children:ve.assignedAt?en(ve.assignedAt):"N/A"})]}),i.jsxs("div",{className:"text-xs text-gray-500 ml-5",children:["by ",ve.assignedByName||"System"]})]},ve.id))})]})})()}),N.stakeholderInSessions&&N.stakeholderInSessions.length>0&&i.jsx("div",{className:N.adminInSessions&&N.adminInSessions.length>0?"pt-4 border-t border-gray-100 mt-4":"",children:i.jsx("div",{className:"space-y-3",children:(()=>{const ke=fe(N.stakeholderInSessions)||N.stakeholderInSessions[0];N.stakeholderInSessions.length>1;const Te=(P==null?void 0:P.userId)===N.id&&(P==null?void 0:P.role)==="stakeholder";return i.jsxs(i.Fragment,{children:[ke&&i.jsxs("div",{className:"ml-5 space-y-1",children:[i.jsxs("div",{className:"flex items-center text-xs text-gray-700 whitespace-nowrap",children:[i.jsx(sn,{className:"h-3 w-3 mr-1.5 text-gray-400 flex-shrink-0"}),i.jsx("span",{children:ke.assignedAt?en(ke.assignedAt):"N/A"})]}),i.jsxs("div",{className:"text-xs text-gray-500 ml-5",children:["by ",ke.assignedByName||"System"]})]}),Te&&i.jsx("div",{className:"ml-5 mt-2 space-y-3",children:N.stakeholderInSessions.filter(ve=>ve.id!==(ke==null?void 0:ke.id)).map(ve=>i.jsxs("div",{className:"space-y-1",children:[i.jsxs("div",{className:"flex items-center text-xs text-gray-700 whitespace-nowrap",children:[i.jsx(sn,{className:"h-3 w-3 mr-1.5 text-gray-400 flex-shrink-0"}),i.jsx("span",{children:ve.assignedAt?en(ve.assignedAt):"N/A"})]}),i.jsxs("div",{className:"text-xs text-gray-500 ml-5",children:["by ",ve.assignedByName||"System"]})]},ve.id))})]})})()})})]})]})]})]},N.id)})}),i.jsxs("div",{className:"hidden md:block relative z-10 bg-white rounded-lg shadow-md overflow-visible",children:[i.jsxs("table",{className:"min-w-full divide-y divide-gray-200 rounded-t-lg",children:[i.jsx("thead",{className:"bg-gray-50",children:i.jsxs("tr",{children:[i.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"User"}),i.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Role"}),i.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Sessions"}),i.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider w-48",children:"Created"}),i.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),i.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:d.length===0?i.jsx("tr",{children:i.jsx("td",{colSpan:5,className:"px-6 py-8 text-center text-gray-500",children:y||j!=="all"?"No users found matching your filters.":"No users found."})}):d.map(N=>{var F,pe,he,ke;return i.jsxs("tr",{className:"hover:bg-gray-50 relative",onMouseEnter:()=>T(N.id),onMouseLeave:()=>T(null),children:[i.jsx("td",{className:"px-6 py-4 whitespace-nowrap align-top",children:i.jsxs("div",{children:[i.jsxs("div",{className:"text-sm font-medium text-gray-900",children:[N.name,N.id===(e==null?void 0:e.id)&&i.jsx("span",{className:"ml-2 text-xs text-[#c59f2d] font-semibold",children:"(You)"}),ln(N)&&i.jsxs("span",{className:"ml-2 text-xs text-[#c59f2d] font-semibold",children:["(",ln(N),")"]}),Xt(N)&&i.jsxs("span",{className:"ml-2 px-2 py-0.5 bg-red-100 text-red-700 text-xs font-medium rounded",children:["Duplicate (",Oa(N),")"]})]}),i.jsx("div",{className:"text-sm text-gray-500",children:N.email})]})}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap align-top",children:zi(N)}),i.jsx("td",{className:"px-6 py-4 text-sm text-gray-500 align-top relative overflow-visible",children:i.jsxs("div",{className:"space-y-2",children:[N.roles.sessionAdminCount===0&&N.roles.stakeholderSessionCount===0&&i.jsx("span",{className:"text-gray-400",children:"None"}),N.adminInSessions&&N.adminInSessions.length>0&&i.jsxs("div",{children:[i.jsx("div",{className:"mb-2",children:(()=>{var D;const Te=((D=N.adminInSessions)==null?void 0:D.length)||0,ve=Te>1,Ye=(P==null?void 0:P.userId)===N.id&&(P==null?void 0:P.role)==="admin",tt=()=>i.jsxs("div",{className:"inline-flex items-center gap-1.5 px-2.5 py-1 rounded border text-xs font-medium group",style:{borderColor:"#576C71",color:"#576C71"},children:[i.jsx(fN,{className:"h-3.5 w-3.5 flex-shrink-0",style:{fill:"#576C71",color:"#576C71"}}),i.jsxs("span",{children:["Session Admin in ",Te," session",Te!==1?"s":""]}),ve&&i.jsxs("span",{className:"inline-flex items-baseline gap-0.5",style:{color:"#576C71"},children:[Ye?i.jsx($c,{className:"h-2.5 w-2.5 transition-all group-hover:brightness-150 mt-[3px]",style:{color:"#576C71"}}):i.jsx(Dn,{className:"h-2.5 w-2.5 transition-all group-hover:brightness-150 mt-[3px]",style:{color:"#576C71"}}),i.jsx("span",{className:"text-[10px] transition-all group-hover:brightness-150",children:Ye?"Hide":"Show"})]})]});return ve?i.jsx("button",{onClick:q=>{q.stopPropagation(),z(Ye?null:{userId:N.id,role:"admin"})},className:"text-left",children:i.jsx(tt,{})}):i.jsx(tt,{})})()}),(()=>{const ve=fe(N.adminInSessions)||N.adminInSessions[0],Ye=(P==null?void 0:P.userId)===N.id&&(P==null?void 0:P.role)==="admin";return i.jsxs(i.Fragment,{children:[ve&&i.jsxs("div",{className:"relative cursor-pointer",style:{marginLeft:"1.25rem",marginTop:"0.75rem"},onMouseEnter:()=>H(`${N.id}-${ve.id}`),onMouseLeave:()=>H(null),onClick:async tt=>{tt.stopPropagation(),await r(ve),s("/admin")},children:[J===`${N.id}-${ve.id}`&&i.jsx("div",{className:"absolute bg-blue-50 pointer-events-none z-0 rounded",style:{left:"-0.5rem",right:"-13rem",top:"-0.375rem",bottom:"-0.375rem",boxShadow:"0 0 0 1px rgb(191 219 254)",outline:"none"}}),i.jsxs("div",{className:"text-left text-sm text-gray-700 hover:text-gray-900 block relative z-10",style:{padding:0,margin:0,lineHeight:"1.25rem"},children:[i.jsx("div",{style:{height:"20px",lineHeight:"20px"},children:ve.title||"Unnamed Session"}),i.jsx("div",{className:"text-xs text-gray-500",style:{height:"16px",lineHeight:"16px",marginTop:"2px"},children:Yr(ve)})]})]}),Ye&&i.jsx("div",{style:{marginTop:"0.5rem"},children:N.adminInSessions.filter(tt=>tt.id!==(ve==null?void 0:ve.id)).map((tt,D)=>i.jsxs("div",{className:"relative cursor-pointer",style:{marginTop:"0.75rem",marginLeft:"1.25rem"},onMouseEnter:()=>H(`${N.id}-${tt.id}`),onMouseLeave:()=>H(null),onClick:async q=>{q.stopPropagation(),await r(tt),s("/admin")},children:[J===`${N.id}-${tt.id}`&&i.jsx("div",{className:"absolute bg-blue-50 pointer-events-none z-0 rounded",style:{left:"-0.5rem",right:"-13rem",top:"-0.375rem",bottom:"-0.375rem",boxShadow:"0 0 0 1px rgb(191 219 254)",outline:"none"}}),i.jsxs("div",{className:"block text-sm text-left text-gray-700 hover:text-gray-900 relative z-10",style:{padding:0,margin:0,lineHeight:"1.25rem"},children:[i.jsx("div",{style:{height:"20px",lineHeight:"20px"},children:tt.title||"Unnamed Session"}),i.jsx("div",{className:"text-xs text-gray-500",style:{height:"16px",lineHeight:"16px",marginTop:"2px"},children:Yr(tt)})]})]},tt.id))})]})})()]}),N.stakeholderInSessions&&N.stakeholderInSessions.length>0&&i.jsx("div",{className:N.adminInSessions&&N.adminInSessions.length>0?"pt-4 border-t border-gray-100 mt-4":"",children:i.jsxs("div",{children:[i.jsx("div",{className:"mb-2",children:(()=>{var D;const Te=((D=N.stakeholderInSessions)==null?void 0:D.length)||0,ve=Te>1,Ye=(P==null?void 0:P.userId)===N.id&&(P==null?void 0:P.role)==="stakeholder",tt=()=>i.jsxs("div",{className:"inline-flex items-center gap-1.5 px-2.5 py-1 rounded border text-xs font-medium group",style:{borderColor:"#8B5A4A",color:"#8B5A4A"},children:[i.jsx(As,{className:"h-3.5 w-3.5 flex-shrink-0",style:{fill:"#8B5A4A",color:"#8B5A4A"}}),i.jsxs("span",{children:["Stakeholder in ",Te," session",Te!==1?"s":""]}),ve&&i.jsxs("span",{className:"inline-flex items-baseline gap-0.5",style:{color:"#8B5A4A"},children:[Ye?i.jsx($c,{className:"h-2.5 w-2.5 transition-all group-hover:brightness-150 mt-[3px]",style:{color:"#8B5A4A"}}):i.jsx(Dn,{className:"h-2.5 w-2.5 transition-all group-hover:brightness-150 mt-[3px]",style:{color:"#8B5A4A"}}),i.jsx("span",{className:"text-[10px] transition-all group-hover:brightness-150",children:Ye?"Hide":"Show"})]})]});return ve?i.jsx("button",{onClick:q=>{q.stopPropagation(),z(Ye?null:{userId:N.id,role:"stakeholder"})},className:"text-left",children:i.jsx(tt,{})}):i.jsx(tt,{})})()}),(()=>{const ve=fe(N.stakeholderInSessions)||N.stakeholderInSessions[0],Ye=(P==null?void 0:P.userId)===N.id&&(P==null?void 0:P.role)==="stakeholder";return i.jsxs(i.Fragment,{children:[ve&&i.jsxs("div",{className:"relative cursor-pointer",style:{marginLeft:"1.25rem",marginTop:"0.75rem"},onMouseEnter:()=>H(`${N.id}-${ve.id}`),onMouseLeave:()=>H(null),onClick:async tt=>{tt.stopPropagation(),await r(ve),s("/admin")},children:[J===`${N.id}-${ve.id}`&&i.jsx("div",{className:"absolute bg-blue-50 pointer-events-none z-0 rounded",style:{left:"-0.5rem",right:"-13rem",top:"-0.25rem",bottom:"-0.25rem",boxShadow:"0 0 0 1px rgb(191 219 254)",outline:"none"}}),i.jsxs("div",{className:"text-left text-sm text-gray-700 hover:text-gray-900 hover:underline block relative z-10",style:{padding:0,margin:0,lineHeight:"1.25rem"},children:[i.jsx("div",{style:{height:"20px",lineHeight:"20px"},children:ve.title||"Unnamed Session"}),i.jsx("div",{className:"text-xs text-gray-500",style:{height:"16px",lineHeight:"16px",marginTop:"2px"},children:Yr(ve)})]})]}),Ye&&i.jsx("div",{style:{marginTop:"0.5rem"},children:N.stakeholderInSessions.filter(tt=>tt.id!==(ve==null?void 0:ve.id)).map((tt,D)=>i.jsxs("div",{className:"relative cursor-pointer",style:{marginTop:"0.75rem",marginLeft:"1.25rem"},onMouseEnter:()=>H(`${N.id}-${tt.id}`),onMouseLeave:()=>H(null),onClick:async q=>{q.stopPropagation(),await r(tt),s("/admin")},children:[J===`${N.id}-${tt.id}`&&i.jsx("div",{className:"absolute bg-blue-50 pointer-events-none z-0 rounded",style:{left:"-0.5rem",right:"-13rem",top:"-0.25rem",bottom:"-0.25rem",boxShadow:"0 0 0 1px rgb(191 219 254)",outline:"none"}}),i.jsxs("div",{className:"block text-sm text-left text-gray-700 hover:text-gray-900 hover:underline relative z-10",style:{padding:0,margin:0,lineHeight:"1.25rem"},children:[i.jsx("div",{style:{height:"20px",lineHeight:"20px"},children:tt.title||"Unnamed Session"}),i.jsx("div",{className:"text-xs text-gray-500",style:{height:"16px",lineHeight:"16px",marginTop:"2px"},children:Yr(tt)})]})]},tt.id))})]})})()]})})]})}),i.jsx("td",{className:"px-6 py-4 text-sm text-gray-500 align-top w-48 relative overflow-visible",children:i.jsxs("div",{className:"space-y-2",children:[N.roles.sessionAdminCount===0&&N.roles.stakeholderSessionCount===0&&i.jsxs("div",{className:"flex items-center text-gray-700 whitespace-nowrap",children:[i.jsx(sn,{className:"h-4 w-4 mr-1.5 text-gray-400 flex-shrink-0"}),i.jsx("span",{children:N.created_at?en(N.created_at):"N/A"}),i.jsxs("span",{className:"text-gray-500 text-xs ml-2",children:["by ",N.created_by_name||"System"]})]}),N.adminInSessions&&N.adminInSessions.length>0&&i.jsxs("div",{children:[i.jsxs("div",{className:"flex items-center text-gray-700 whitespace-nowrap",style:{marginBottom:"0.5rem",height:"30px"},children:[i.jsx(sn,{className:"h-4 w-4 mr-1.5 text-gray-400 flex-shrink-0"}),i.jsx("span",{children:N.created_at?en(N.created_at):"N/A"}),i.jsxs("span",{className:"text-gray-500 text-xs ml-2",children:["by ",N.created_by_name||"System"]})]}),(()=>{const ve=fe(N.adminInSessions)||N.adminInSessions[0];N.adminInSessions.length>1;const Ye=(P==null?void 0:P.userId)===N.id&&(P==null?void 0:P.role)==="admin";return i.jsxs(i.Fragment,{children:[ve&&i.jsx("div",{className:"relative cursor-pointer",style:{marginLeft:"1.25rem",marginTop:"0.5rem",marginBottom:"0.25rem"},onMouseEnter:()=>H(`${N.id}-${ve.id}`),onMouseLeave:()=>H(null),onClick:async tt=>{tt.stopPropagation(),await r(ve),s("/admin")},children:i.jsxs("div",{className:"relative z-10",style:{padding:0,margin:0,lineHeight:"1.25rem"},children:[i.jsxs("div",{className:"flex items-center",style:{height:"20px",lineHeight:"20px"},children:[i.jsx(sn,{className:"h-3 w-3 mr-1.5 text-gray-400 flex-shrink-0"}),i.jsx("span",{className:"text-xs text-gray-700 whitespace-nowrap",children:ve.assignedAt?en(ve.assignedAt):"N/A"})]}),i.jsxs("div",{className:"text-xs text-gray-500",style:{height:"16px",lineHeight:"16px",marginTop:"2px",marginLeft:"18px"},children:["by ",ve.assignedByName||"System"]})]})}),Ye&&i.jsx("div",{style:{marginTop:"0.5rem"},children:N.adminInSessions.filter(tt=>tt.id!==(ve==null?void 0:ve.id)).map((tt,D)=>i.jsx("div",{className:"relative cursor-pointer",style:{marginTop:"0.75rem",marginLeft:"1.25rem",marginBottom:"0.25rem"},onMouseEnter:()=>H(`${N.id}-${tt.id}`),onMouseLeave:()=>H(null),onClick:async q=>{q.stopPropagation(),await r(tt),s("/admin")},children:i.jsxs("div",{className:"relative z-10",style:{padding:0,margin:0,lineHeight:"1.25rem"},children:[i.jsxs("div",{className:"flex items-center",style:{height:"20px",lineHeight:"20px"},children:[i.jsx(sn,{className:"h-3 w-3 mr-1.5 text-gray-400 flex-shrink-0"}),i.jsx("span",{className:"text-xs text-gray-700 whitespace-nowrap",children:tt.assignedAt?en(tt.assignedAt):"N/A"})]}),i.jsxs("div",{className:"text-xs text-gray-500",style:{height:"16px",lineHeight:"16px",marginTop:"2px",marginLeft:"18px"},children:["by ",tt.assignedByName||"System"]})]})},tt.id))})]})})()]}),N.stakeholderInSessions&&N.stakeholderInSessions.length>0&&i.jsx("div",{className:N.adminInSessions&&N.adminInSessions.length>0?"pt-4 border-t border-gray-100 mt-4":"",children:i.jsxs("div",{children:[(!N.adminInSessions||N.adminInSessions.length===0)&&i.jsxs("div",{className:"flex items-center text-gray-700 whitespace-nowrap",style:{marginBottom:"0.5rem",height:"30px"},children:[i.jsx(sn,{className:"h-4 w-4 mr-1.5 text-gray-400 flex-shrink-0"}),i.jsx("span",{children:N.created_at?en(N.created_at):"N/A"}),i.jsxs("span",{className:"text-gray-500 text-xs ml-2",children:["by ",N.created_by_name||"System"]})]}),N.adminInSessions&&N.adminInSessions.length>0&&i.jsx("div",{style:{height:"26px",marginBottom:"0.5rem",visibility:"hidden"},children:i.jsxs("div",{className:"inline-flex items-center gap-1.5 px-2.5 py-1 rounded border text-xs font-medium",children:[i.jsx(As,{className:"h-3.5 w-3.5"}),i.jsx("span",{children:"Stakeholder"})]})}),(()=>{const ve=fe(N.stakeholderInSessions)||N.stakeholderInSessions[0];N.stakeholderInSessions.length>1;const Ye=(P==null?void 0:P.userId)===N.id&&(P==null?void 0:P.role)==="stakeholder";return i.jsxs(i.Fragment,{children:[ve&&i.jsx("div",{className:"relative cursor-pointer",style:{marginLeft:"1.25rem",marginTop:"0.5rem",marginBottom:"0.25rem"},onMouseEnter:()=>H(`${N.id}-${ve.id}`),onMouseLeave:()=>H(null),onClick:async tt=>{tt.stopPropagation(),await r(ve),s("/admin")},children:i.jsxs("div",{className:"relative z-10",style:{padding:0,margin:0,lineHeight:"1.25rem"},children:[i.jsxs("div",{className:"flex items-center",style:{height:"20px",lineHeight:"20px"},children:[i.jsx(sn,{className:"h-3 w-3 mr-1.5 text-gray-400 flex-shrink-0"}),i.jsx("span",{className:"text-xs text-gray-700 whitespace-nowrap",children:ve.assignedAt?en(ve.assignedAt):"N/A"})]}),i.jsxs("div",{className:"text-xs text-gray-500",style:{height:"16px",lineHeight:"16px",marginTop:"2px",marginLeft:"18px"},children:["by ",ve.assignedByName||"System"]})]})}),Ye&&i.jsx("div",{style:{marginTop:"0.5rem"},children:N.stakeholderInSessions.filter(tt=>tt.id!==(ve==null?void 0:ve.id)).map((tt,D)=>i.jsx("div",{className:"relative cursor-pointer",style:{marginTop:"0.75rem",marginLeft:"1.25rem",marginBottom:"0.25rem"},onMouseEnter:()=>H(`${N.id}-${tt.id}`),onMouseLeave:()=>H(null),onClick:async q=>{q.stopPropagation(),await r(tt),s("/admin")},children:i.jsxs("div",{className:"relative z-10",style:{padding:0,margin:0,lineHeight:"1.25rem"},children:[i.jsxs("div",{className:"flex items-center",style:{height:"20px",lineHeight:"20px"},children:[i.jsx(sn,{className:"h-3 w-3 mr-1.5 text-gray-400 flex-shrink-0"}),i.jsx("span",{className:"text-xs text-gray-700 whitespace-nowrap",children:tt.assignedAt?en(tt.assignedAt):"N/A"})]}),i.jsxs("div",{className:"text-xs text-gray-500",style:{height:"16px",lineHeight:"16px",marginTop:"2px"},children:["by ",tt.assignedByName||"System"]})]})},tt.id))})]})})()]})})]})}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium align-top",children:i.jsx("div",{className:"flex items-center justify-end gap-2",children:i.jsxs("div",{className:`relative inline-block transition-all md:transition-opacity ${A===N.id?N.id===(e==null?void 0:e.id)?"opacity-50 visible":"opacity-100 visible":"md:opacity-0 md:invisible opacity-100 visible"}`,ref:Te=>{ae.current[N.id]=Te},children:[i.jsx("button",{onClick:()=>C(E===N.id?null:N.id),className:"p-2 rounded-md hover:bg-gray-100 transition-colors",disabled:N.id===(e==null?void 0:e.id),title:N.id===(e==null?void 0:e.id)?"Cannot modify your own permissions":"Change user role",children:i.jsx(uN,{className:"h-5 w-5 text-gray-600"})}),E===N.id&&N.id!==(e==null?void 0:e.id)&&i.jsx("div",{className:"fixed mt-1 w-64 bg-white border border-gray-200 rounded-lg shadow-lg z-[100]",style:{top:((F=ae.current[N.id])==null?void 0:F.getBoundingClientRect().bottom)??0,right:window.innerWidth-(((pe=ae.current[N.id])==null?void 0:pe.getBoundingClientRect().right)??0)},children:i.jsxs("div",{className:"py-1",children:[i.jsx("div",{className:"px-3 py-2 text-xs font-semibold text-gray-500 uppercase border-b border-gray-200",children:"Change User Role"}),B==="system-admin"&&i.jsxs(i.Fragment,{children:[N.roles.isSystemAdmin?i.jsxs("button",{onClick:()=>xn(N.id,!0),className:"w-full px-4 py-2 text-left flex items-center hover:bg-red-50 text-red-700",children:[i.jsx(Os,{className:"h-4 w-4 mr-3"}),i.jsxs("div",{children:[i.jsx("div",{className:"font-medium",children:"Remove System Admin"}),i.jsx("div",{className:"text-xs text-gray-500",children:"Revoke global admin access"})]})]}):i.jsxs("button",{onClick:()=>xn(N.id,!1),className:"w-full px-4 py-2 text-left flex items-center hover:bg-[#C89212]/10 text-[#C89212]",children:[i.jsx(Os,{className:"h-4 w-4 mr-3"}),i.jsxs("div",{children:[i.jsx("div",{className:"font-medium",children:"Make System Admin"}),i.jsx("div",{className:"text-xs text-gray-500",children:"Grant global admin access"})]})]}),ti(N,"session-admin")&&i.jsxs("button",{onClick:()=>vn(N,"session-admin"),className:"w-full px-4 py-2 text-left flex items-center hover:bg-[#576C71]/10 text-[#576C71] border-t border-gray-200",children:[i.jsx(us,{className:"h-4 w-4 mr-3"}),i.jsxs("div",{children:[i.jsx("div",{className:"font-medium",children:"Make Session Admin"}),i.jsx("div",{className:"text-xs text-gray-500",children:"Add to a session as admin"})]})]})]}),ti(N,"stakeholder")&&i.jsxs("button",{onClick:()=>vn(N,"stakeholder"),className:"w-full px-4 py-2 text-left flex items-center hover:bg-[#8B5A4A]/10 text-[#8B5A4A] border-t border-gray-200",children:[i.jsx(As,{className:"h-4 w-4 mr-3"}),i.jsxs("div",{children:[i.jsx("div",{className:"font-medium",children:"Make Stakeholder"}),i.jsx("div",{className:"text-xs text-gray-500",children:"Add to a session as stakeholder"})]})]}),B==="session-admin"&&N.stakeholderInSessions&&N.stakeholderInSessions.length>0&&N.stakeholderInSessions.some(Te=>se.includes(Te.id))&&i.jsxs("button",{onClick:()=>vn(N,"remove-stakeholder"),className:"w-full px-4 py-2 text-left flex items-center hover:bg-red-50 text-red-700 border-t border-gray-200",children:[i.jsx(Vu,{className:"h-4 w-4 mr-3"}),i.jsxs("div",{children:[i.jsx("div",{className:"font-medium",children:"Remove Stakeholder"}),i.jsx("div",{className:"text-xs text-gray-500",children:"Remove from a session you manage"})]})]}),(N.roles.isSystemAdmin||N.roles.sessionAdminCount>0||N.roles.stakeholderSessionCount>0)&&i.jsxs("button",{onClick:()=>bn(N.id,N.name),className:"w-full px-4 py-2 text-left flex items-center hover:bg-gray-50 text-gray-700 border-t border-gray-200",children:[i.jsx(Vu,{className:"h-4 w-4 mr-3"}),i.jsxs("div",{children:[i.jsx("div",{className:"font-medium",children:"Remove All Roles"}),i.jsx("div",{className:"text-xs text-gray-500",children:"Remove from all sessions"})]})]}),(B==="system-admin"||B==="session-admin"&&N.roles.stakeholderSessionCount>0&&((he=N.stakeholderInSessions)==null?void 0:he.some(Te=>M.some(ve=>ve.id===Te.id)))&&!X.has(N.email))&&i.jsx("div",{className:"px-3 py-2 text-xs font-semibold text-gray-500 uppercase border-t border-gray-200",children:"User Functions"}),B==="system-admin"&&i.jsxs("button",{onClick:()=>{ht(N),We(N.name),Ut(N.email),Oe(!0),C(null)},className:"w-full px-4 py-2 text-left flex items-center hover:bg-[#1E5461]/10 text-[#1E5461] border-t border-gray-200",children:[i.jsx(dd,{className:"h-4 w-4 mr-3"}),i.jsxs("div",{children:[i.jsx("div",{className:"font-medium",children:"Edit User Profile"}),i.jsx("div",{className:"text-xs text-gray-500",children:"Update name and email"})]})]}),(B==="system-admin"||B==="session-admin"&&N.roles.stakeholderSessionCount>0&&((ke=N.stakeholderInSessions)==null?void 0:ke.some(Te=>M.some(ve=>ve.id===Te.id))))&&!X.has(N.email)&&i.jsxs("button",{onClick:()=>{C(null),rs(N.id,N.name)},className:`w-full px-4 py-2 text-left flex items-center hover:bg-[#8B5A4A]/10 text-[#8B5A4A] border-t border-gray-200 ${N.id===(e==null?void 0:e.id)||B==="system-admin"&&rr.has(N.id)?"opacity-50 cursor-not-allowed":""}`,disabled:N.id===(e==null?void 0:e.id)||B==="system-admin"&&rr.has(N.id),children:[i.jsx(na,{className:"h-4 w-4 mr-3"}),i.jsxs("div",{children:[i.jsx("div",{className:"font-medium",children:B==="session-admin"?"Remove Stakeholder":"Delete User"}),i.jsx("div",{className:"text-xs text-gray-500",children:B==="session-admin"?"Remove from all your sessions":N.id===(e==null?void 0:e.id)?"Cannot delete your own account":rr.has(N.id)?`Cannot delete protected account${ln(N)?` (${ln(N)})`:""}`:"Permanently delete this user"})]})]})]})})]})})})]},N.id)})})]}),i.jsx("div",{className:"bg-gray-50 px-6 py-4 border-t border-gray-200",children:i.jsxs("div",{className:"flex flex-wrap gap-4 text-sm",children:[i.jsxs("div",{className:"flex items-center",children:[i.jsx(hs,{className:"h-4 w-4 mr-2 text-gray-500"}),i.jsxs("span",{className:"text-gray-600",children:["Total Users: ",i.jsx("strong",{children:l.length})]})]}),i.jsxs("div",{className:"flex items-center",children:[i.jsx(Os,{className:"h-4 w-4 mr-2 text-[#C89212]"}),i.jsxs("span",{className:"text-gray-600",children:["System Admins: ",i.jsx("strong",{children:l.filter(N=>N.roles.isSystemAdmin).length})]})]}),i.jsxs("div",{className:"flex items-center",children:[i.jsx(us,{className:"h-4 w-4 mr-2 text-[#576C71]"}),i.jsxs("span",{className:"text-gray-600",children:["Session Admins: ",i.jsx("strong",{children:l.filter(N=>N.roles.sessionAdminCount>0).length})]})]}),i.jsxs("div",{className:"flex items-center",children:[i.jsx(As,{className:"h-4 w-4 mr-2 text-[#8B5A4A]"}),i.jsxs("span",{className:"text-gray-600",children:["Stakeholders: ",i.jsx("strong",{children:l.filter(N=>N.roles.stakeholderSessionCount>0).length})]})]})]})})]}),i.jsx("div",{className:"md:hidden mt-4 bg-white rounded-lg shadow-md p-4",children:i.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[i.jsxs("div",{className:"flex items-center",children:[i.jsx(hs,{className:"h-5 w-5 mr-2 text-gray-500 flex-shrink-0"}),i.jsxs("div",{children:[i.jsx("div",{className:"text-xs text-gray-500",children:"Total"}),i.jsx("div",{className:"text-lg font-bold text-gray-900",children:l.length})]})]}),i.jsxs("div",{className:"flex items-center",children:[i.jsx(Os,{className:"h-5 w-5 mr-2 text-[#C89212] flex-shrink-0"}),i.jsxs("div",{children:[i.jsx("div",{className:"text-xs text-gray-500",children:"Sys Admins"}),i.jsx("div",{className:"text-lg font-bold text-gray-900",children:l.filter(N=>N.roles.isSystemAdmin).length})]})]}),i.jsxs("div",{className:"flex items-center",children:[i.jsx(us,{className:"h-5 w-5 mr-2 text-[#576C71] flex-shrink-0"}),i.jsxs("div",{children:[i.jsx("div",{className:"text-xs text-gray-500",children:"Session Admins"}),i.jsx("div",{className:"text-lg font-bold text-gray-900",children:l.filter(N=>N.roles.sessionAdminCount>0).length})]})]}),i.jsxs("div",{className:"flex items-center",children:[i.jsx(As,{className:"h-5 w-5 mr-2 text-[#8B5A4A] flex-shrink-0"}),i.jsxs("div",{children:[i.jsx("div",{className:"text-xs text-gray-500",children:"Stakeholders"}),i.jsx("div",{className:"text-lg font-bold text-gray-900",children:l.filter(N=>N.roles.stakeholderSessionCount>0).length})]})]})]})}),(G||te)&&i.jsx("div",{className:"mt-8 flex justify-center",children:i.jsxs("div",{className:"inline-flex items-center bg-gray-100 rounded-lg p-1",children:[i.jsxs("button",{onClick:()=>{(te||G)&&Me("session-admin")},className:`px-4 py-2 rounded-md text-sm font-medium transition-colors flex items-center ${B==="session-admin"?"bg-white text-[#2d4660] shadow-sm":"text-gray-600 hover:text-gray-900"}`,title:"Session Admin View",children:[i.jsx(us,{className:"h-4 w-4 inline mr-2"}),"Session Admin"]}),i.jsxs("button",{onClick:()=>{G&&Me("system-admin")},className:`px-4 py-2 rounded-md text-sm font-medium transition-colors flex items-center ${B==="system-admin"?"bg-white text-[#2d4660] shadow-sm":"text-gray-600 hover:text-gray-900"}`,disabled:!G,title:G?"System Admin View":"Only available for System Admins",children:[i.jsx(Os,{className:"h-4 w-4 inline mr-2"}),"System Admin"]})]})})]}),i.jsx("footer",{className:"mt-12 bg-gray-50 border-t border-gray-200",children:i.jsxs("div",{className:"container mx-auto px-4 py-6 max-w-6xl",children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 text-sm text-gray-600",children:[i.jsxs("div",{children:[i.jsx("h3",{className:"font-semibold text-gray-900 mb-2",children:"New Millennium Building Systems"}),i.jsxs("p",{className:"text-xs leading-relaxed",children:["A Steel Dynamics Company",i.jsx("br",{}),"Innovation in structural steel manufacturing"]})]}),i.jsxs("div",{children:[i.jsx("h3",{className:"font-semibold text-gray-900 mb-2",children:"Quick Links"}),i.jsxs("ul",{className:"space-y-1 text-xs",children:[i.jsx("li",{children:i.jsx("a",{href:"https://www.steeldynamics.com",target:"_blank",rel:"noopener noreferrer",className:"hover:text-[#2d4660] transition-colors",children:"Steel Dynamics Inc."})}),i.jsx("li",{children:i.jsx("a",{href:"https://www.newmill.com",target:"_blank",rel:"noopener noreferrer",className:"hover:text-[#2d4660] transition-colors",children:"New Millennium"})})]})]}),i.jsxs("div",{children:[i.jsx("h3",{className:"font-semibold text-gray-900 mb-2",children:"Need Help?"}),i.jsx("p",{className:"text-xs",children:"Contact your Product Owner or IT administrator for assistance with user management."})]})]}),i.jsx("div",{className:"mt-6 pt-6 border-t border-gray-200 text-center text-xs text-gray-500",children:i.jsx("p",{children:" 2025 New Millennium Building Systems, LLC. All rights reserved."})})]})}),je&&xe&&Z&&i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4 overflow-y-auto",onClick:ca,children:i.jsx("div",{className:"bg-white rounded-lg shadow-xl max-w-xl w-full my-8",onClick:N=>N.stopPropagation(),children:i.jsxs("div",{className:"p-6 overflow-visible",children:[i.jsxs("div",{className:"flex items-start justify-between mb-2",children:[i.jsxs("div",{className:"flex-1",children:[i.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-2",children:Z==="session-admin"?"Add Session Admin":Z==="remove-stakeholder"?"Remove Stakeholder":"Add Stakeholder"}),i.jsx("p",{className:"text-sm text-gray-600",children:Z==="remove-stakeholder"?i.jsxs(i.Fragment,{children:["Select sessions to remove ",i.jsx("strong",{children:xe.name})," as a stakeholder."]}):i.jsxs(i.Fragment,{children:["Select sessions to add ",i.jsx("strong",{children:xe.name})," as ",Z==="session-admin"?"an admin":"a stakeholder","."]})})]}),i.jsx("button",{onClick:ca,className:"ml-4 p-1 rounded-md text-gray-400 hover:text-gray-600 hover:bg-gray-100 transition-colors flex-shrink-0","aria-label":"Close modal",children:i.jsx(js,{className:"h-5 w-5"})})]}),i.jsx("div",{className:"mb-6",children:i.jsx(QZ,{products:lr,sessions:ha(Z),selectedProductId:rt,onProductChange:N=>{kt(N),re([]),Yt(!0)},useAllSessions:lt,onToggleAllSessions:N=>{Yt(N),N&&re([])},selectedSessionIds:R,onSessionToggle:N=>{R.includes(N)?re(R.filter(F=>F!==N)):re([...R,N])},getSessionStatus:ns,formatSessionDateRange:Yr,filterSessions:ks})}),i.jsx("div",{className:"flex justify-end mt-6",children:i.jsx("button",{onClick:Vr,disabled:!rt||!lt&&R.length===0,className:`px-6 py-2.5 rounded-lg transition-colors ${rt&&(lt||R.length>0)?Z==="remove-stakeholder"?"bg-red-600 text-white hover:bg-red-700":"bg-[#4f6d8e] text-white hover:bg-[#3d5670]":"bg-gray-300 text-gray-500 cursor-not-allowed"}`,children:(()=>{const F=(lt?ks(ha(Z),rt||"").length:R.length)>1;return Z==="remove-stakeholder"?`Remove from Session${F?"s":""}`:Z==="session-admin"?`Add to Session${F?"s":""} as Session Admin`:`Add to Session${F?"s":""} as a Stakeholder`})()})})]})})}),de&&we&&i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:i.jsx("div",{className:"bg-white rounded-lg shadow-xl max-w-xl w-full max-h-[90vh] overflow-y-auto",children:i.jsxs("div",{className:"p-6",children:[i.jsxs("div",{className:"flex items-start mb-4",children:[i.jsx("div",{className:"flex-shrink-0 w-12 h-12 rounded-full bg-red-100 flex items-center justify-center",children:i.jsx(Vu,{className:"h-6 w-6 text-red-600"})}),i.jsxs("div",{className:"ml-4 flex-1",children:[i.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-1",children:"Delete User Account"}),i.jsx("p",{className:"text-sm text-gray-600",children:"This action cannot be undone. Please review the details below."})]})]}),i.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 mb-4",children:[i.jsxs("div",{className:"flex items-center mb-3",children:[i.jsx(As,{className:"h-5 w-5 text-gray-400 mr-2"}),i.jsxs("div",{children:[i.jsx("div",{className:"font-medium text-gray-900",children:we.name}),i.jsx("div",{className:"text-sm text-gray-500",children:we.email})]})]}),i.jsxs("div",{className:"space-y-2 border-t border-gray-200 pt-3",children:[i.jsx("div",{className:"text-xs font-semibold text-gray-500 uppercase",children:"Current Roles"}),we.roles.isSystemAdmin&&i.jsxs("div",{className:"flex items-center text-sm",children:[i.jsx(Os,{className:"h-4 w-4 mr-2 text-[#C89212]"}),i.jsx("span",{className:"text-gray-700",children:"System Admin"})]}),we.roles.sessionAdminCount>0&&i.jsxs("div",{className:"flex items-center text-sm",children:[i.jsx(us,{className:"h-4 w-4 mr-2 text-[#576C71]"}),i.jsxs("span",{className:"text-gray-700",children:["Session Admin in ",we.roles.sessionAdminCount," session",we.roles.sessionAdminCount!==1?"s":""]})]}),we.roles.stakeholderSessionCount>0&&i.jsxs("div",{className:"flex items-center text-sm",children:[i.jsx(As,{className:"h-4 w-4 mr-2 text-[#8B5A4A]"}),i.jsxs("span",{className:"text-gray-700",children:["Stakeholder in ",we.roles.stakeholderSessionCount," session",we.roles.stakeholderSessionCount!==1?"s":""]})]}),!we.roles.isSystemAdmin&&we.roles.sessionAdminCount===0&&we.roles.stakeholderSessionCount===0&&i.jsx("div",{className:"text-sm text-gray-500",children:"No roles assigned"})]})]}),we.adminInSessions&&we.adminInSessions.length>0||we.stakeholderInSessions&&we.stakeholderInSessions.length>0?i.jsxs("div",{className:"mb-4",children:[i.jsx("div",{className:"text-sm font-semibold text-gray-700 mb-2",children:"User will be removed from these sessions:"}),i.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-3 max-h-48 overflow-y-auto",children:[we.adminInSessions&&we.adminInSessions.length>0&&i.jsxs("div",{className:"mb-3",children:[i.jsxs("div",{className:"text-xs font-semibold text-gray-600 mb-1.5 flex items-center",children:[i.jsx(us,{className:"h-3.5 w-3.5 mr-1.5 text-[#576C71]"}),"Admin Sessions (",we.adminInSessions.length,")"]}),i.jsx("div",{className:"space-y-1 ml-5",children:we.adminInSessions.map(N=>i.jsxs("div",{className:"text-sm text-gray-700",children:[" ",N.title||"Unnamed Session"]},N.id))})]}),we.stakeholderInSessions&&we.stakeholderInSessions.length>0&&i.jsxs("div",{children:[i.jsxs("div",{className:"text-xs font-semibold text-gray-600 mb-1.5 flex items-center",children:[i.jsx(As,{className:"h-3.5 w-3.5 mr-1.5 text-[#8B5A4A]"}),"Stakeholder Sessions (",we.stakeholderInSessions.length,")"]}),i.jsx("div",{className:"space-y-1 ml-5",children:we.stakeholderInSessions.map(N=>i.jsxs("div",{className:"text-sm text-gray-700",children:[" ",N.title||"Unnamed Session"]},N.id))})]})]})]}):null,i.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-3 mb-4",children:i.jsxs("div",{className:"flex",children:[i.jsx("div",{className:"flex-shrink-0",children:i.jsx("svg",{className:"h-5 w-5 text-yellow-600",fill:"currentColor",viewBox:"0 0 20 20",children:i.jsx("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})})}),i.jsxs("div",{className:"ml-3",children:[i.jsx("h3",{className:"text-sm font-medium text-yellow-800",children:"Warning: This action is permanent"}),i.jsx("div",{className:"mt-1 text-sm text-yellow-700",children:i.jsxs("ul",{className:"list-disc pl-5 space-y-1",children:[i.jsx("li",{children:"User account will be permanently deleted"}),i.jsx("li",{children:"All authentication access will be revoked"}),i.jsx("li",{children:"User will be removed from all sessions"}),i.jsx("li",{children:"This action cannot be undone"})]})})]})]})}),i.jsxs("div",{className:"flex gap-3",children:[i.jsx("button",{onClick:ua,disabled:Ke,className:"flex-1 px-4 py-2.5 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:"Cancel"}),i.jsx("button",{onClick:gs,disabled:Ke,className:"flex-1 px-4 py-2.5 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center",children:Ke?i.jsxs(i.Fragment,{children:[i.jsxs("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",fill:"none",viewBox:"0 0 24 24",children:[i.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),i.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Deleting..."]}):"Delete User Permanently"})]})]})})}),gt&&i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4 overflow-y-auto",onClick:Li,children:i.jsx("div",{className:"bg-white rounded-lg shadow-xl max-w-3xl w-full my-8 max-h-[90vh] overflow-y-auto",onClick:N=>N.stopPropagation(),children:i.jsxs("div",{className:"p-6",children:[i.jsxs("div",{className:"flex items-start mb-6",children:[i.jsx("div",{className:"flex-shrink-0 w-12 h-12 rounded-full bg-[#8B5A4A]/10 flex items-center justify-center",children:i.jsx(hs,{className:"h-6 w-6 text-[#8B5A4A]"})}),i.jsxs("div",{className:"ml-4 flex-1",children:[i.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-1",children:B==="session-admin"?"Add New Stakeholder":"Add New User"}),i.jsx("p",{className:"text-sm text-gray-600",children:B==="session-admin"?"Create a new user account and add as stakeholder to your sessions":"Create a new user account and assign roles"})]}),i.jsx("button",{onClick:Li,disabled:_t,className:"flex-shrink-0 ml-4 p-1 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed","aria-label":"Close modal",children:i.jsx(js,{className:"h-5 w-5"})})]}),i.jsxs("div",{className:"space-y-4",children:[hr?i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Search Company Users (Optional)"}),gn===!1?i.jsx("div",{className:"border border-gray-300 rounded-lg p-4 bg-blue-50",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex-1",children:[i.jsx("p",{className:"text-sm font-medium text-gray-900 mb-1",children:"Sign in with Microsoft to search company users"}),i.jsx("p",{className:"text-xs text-gray-600",children:"You need to sign in with your Microsoft account to use the company user search feature."})]}),i.jsxs("button",{type:"button",onClick:Wn,className:"ml-4 flex items-center px-4 py-2 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors shadow-sm",children:[i.jsx("img",{src:"/microsoft.svg",alt:"Microsoft",style:{width:"21px",height:"21px",marginRight:"8px"}}),i.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Sign in"})]})]})}):i.jsx(i.Fragment,{children:i.jsxs("div",{className:"relative",ref:U,children:[i.jsx("div",{className:"flex gap-2",children:i.jsxs("div",{className:"flex-1 relative",children:[i.jsx(dN,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),i.jsx("input",{type:"text",value:zt.searchTerm,onChange:N=>{const F=N.target.value;Vt(pe=>({...pe,searchTerm:F})),xo(F)},onFocus:()=>{zt.results.length>0&&Vt(N=>({...N,showResults:!0}))},className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#2D4660] focus:border-transparent",placeholder:"Search by name or email (min 2 characters)..."}),zt.isSearching&&i.jsx("div",{className:"absolute right-3 top-1/2 transform -translate-y-1/2",children:i.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-[#2D4660]"})})]})}),zt.showResults&&zt.results.length>0&&i.jsx("div",{className:"absolute z-10 w-full mt-1 bg-white border border-gray-300 rounded-lg shadow-lg max-h-60 overflow-y-auto",children:zt.results.map(N=>i.jsxs("button",{type:"button",onClick:()=>Ia(N),className:"w-full px-4 py-3 text-left hover:bg-gray-50 border-b border-gray-100 last:border-b-0 transition-colors",children:[i.jsx("div",{className:"font-medium text-gray-900",children:N.displayName}),i.jsx("div",{className:"text-sm text-gray-500",children:N.mail||N.userPrincipalName}),N.jobTitle&&i.jsx("div",{className:"text-xs text-gray-400 mt-0.5",children:N.jobTitle})]},N.id))}),zt.error&&i.jsxs("div",{className:"absolute z-10 w-full mt-1 bg-red-50 border border-red-200 rounded-lg shadow-lg p-4 text-sm text-red-700",children:[i.jsx("div",{className:"font-medium mb-1",children:"Search Error"}),i.jsx("div",{className:"mb-2",children:zt.error}),zt.error.includes("User.ReadBasic.All")&&i.jsxs("div",{className:"mt-2 p-2 bg-red-100 rounded text-xs text-red-800",children:[i.jsx("div",{className:"font-medium mb-1",children:"To fix this:"}),i.jsxs("ol",{className:"list-decimal list-inside space-y-1 ml-2",children:[i.jsx("li",{children:"Go to Azure Portal  App registrations  Your app"}),i.jsx("li",{children:"API permissions  Add permission  Microsoft Graph  Delegated permissions"}),i.jsx("li",{children:'Add "User.ReadBasic.All" or "User.Read.All"'}),i.jsx("li",{children:'Click "Grant admin consent" (requires admin)'})]})]}),i.jsx("div",{className:"mt-2 text-xs text-red-600",children:"You can still enter the email manually below."})]}),zt.searchTerm.length>=2&&!zt.isSearching&&zt.results.length===0&&!zt.error&&i.jsx("div",{className:"absolute z-10 w-full mt-1 bg-white border border-gray-300 rounded-lg shadow-lg p-4 text-sm text-gray-500 text-center",children:"No users found. You can still enter the email manually below."})]})}),i.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"Search for users in your organization by name or email, or enter manually below"})]}):i.jsx("div",{children:i.jsx("button",{type:"button",className:"text-sm font-semibold text-[#2D4660] hover:underline focus:outline-none",onClick:()=>{Zt(!0),Vt(ed())},children:"Search Company Users again"})}),i.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[i.jsxs("div",{children:[i.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Full Name ",i.jsx("span",{className:"text-red-500",children:"*"})]}),i.jsx("input",{type:"text",value:Ze.name,onChange:N=>Ot({...Ze,name:N.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#2D4660] focus:border-transparent",placeholder:"John Doe"})]}),i.jsxs("div",{children:[i.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Email Address ",i.jsx("span",{className:"text-red-500",children:"*"})]}),i.jsx("input",{type:"email",value:Ze.email,onChange:N=>Ot({...Ze,email:N.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#2D4660] focus:border-transparent",placeholder:"john.doe@newmill.com"})]})]}),B==="system-admin"&&i.jsx("div",{className:"border-t border-gray-200 pt-4",children:i.jsxs("label",{className:"flex items-center gap-3 cursor-pointer",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("span",{className:"flex-shrink-0 w-6 h-6 flex items-center justify-center",children:i.jsx(Os,{className:"h-4 w-4 text-[#C89212] transition-transform",style:{transform:Ze.isSystemAdmin?"scale(2)":"scale(1)",transformOrigin:"center"}})}),i.jsx("span",{className:"text-sm font-medium text-gray-700",children:"System Administrator"})]}),i.jsx("input",{id:"systemAdminCheckbox",type:"checkbox",checked:Ze.isSystemAdmin,onChange:N=>Ot({...Ze,isSystemAdmin:N.target.checked}),className:"sr-only"}),i.jsx("span",{className:"flex items-center justify-center w-6 h-6 border rounded-md transition-colors",style:{borderColor:"#C89212",backgroundColor:Ze.isSystemAdmin?"#C89212":"#ffffff"},children:Ze.isSystemAdmin&&i.jsx("svg",{viewBox:"0 0 24 24",className:"w-4 h-4",stroke:"#ffffff",strokeWidth:"3",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",children:i.jsx("polyline",{points:"4 12 10 18 20 6"})})})]})}),B==="system-admin"&&i.jsxs("div",{className:"border-t border-gray-200 pt-4",children:[i.jsxs("div",{className:"w-full flex items-center gap-2 py-2 hover:bg-gray-50 rounded-lg px-2 -ml-2 transition-colors",children:[i.jsxs("button",{type:"button",className:"flex items-center gap-2 text-sm font-medium text-gray-700 flex-1 text-left",onClick:()=>or(N=>({sessionAdmin:!N.sessionAdmin,stakeholder:!1})),children:[i.jsx("span",{className:"flex items-center justify-center",style:{transform:gr?"scale(1.2)":"scale(1)"},children:i.jsx(us,{className:"h-4 w-4 text-[#576C71]"})}),i.jsx("span",{children:"Session Admin"}),gr&&ee&&i.jsx("span",{className:"ml-2 text-xs text-gray-500",children:ee})]}),gr&&i.jsx("button",{type:"button",onClick:yr,className:"px-3 py-1 rounded-full border text-xs font-semibold transition-colors hover:bg-[#576C71]/10",style:{borderColor:"#576C71",color:"#576C71",backgroundColor:"#f6fbfb"},children:"Reset"}),i.jsx(ds,{className:`h-4 w-4 text-gray-500 transition-transform ${mr.sessionAdmin?"rotate-180":""}`})]}),mr.sessionAdmin&&i.jsxs("div",{className:"mt-3 ml-6 space-y-3",children:[i.jsx("div",{children:i.jsx(Ph,{products:lr,value:pr,onChange:N=>{Zr(N),Ot(F=>({...F,sessionAdminIds:[]})),Br(!0)},label:"Product *"})}),pr&&i.jsxs("div",{className:"space-y-3",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Session Selection *"}),i.jsxs("div",{className:"inline-flex items-center bg-gray-100 rounded-lg p-1",children:[i.jsx("button",{type:"button",onClick:()=>Br(!1),className:`px-4 py-2 rounded-md text-sm font-medium transition-colors flex items-center ${Dr?"text-gray-600 hover:text-gray-900":"bg-white text-[#2d4660] shadow-sm"}`,children:"Select Sessions"}),i.jsx("button",{type:"button",onClick:()=>{Br(!0),Ot(N=>({...N,sessionAdminIds:[]}))},className:`px-4 py-2 rounded-md text-sm font-medium transition-colors flex items-center ${Dr?"bg-white text-[#2d4660] shadow-sm":"text-gray-600 hover:text-gray-900"}`,children:"All Sessions"})]}),Dr&&i.jsx("p",{className:"mt-2 text-xs text-gray-500",children:"User will be added to all current and future sessions for this product"})]}),!Dr&&i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Sessions * (Current and Future)"}),Ss.length===0?i.jsx("p",{className:"text-sm text-gray-500",children:"No current or future sessions found for this product."}):i.jsx("div",{className:"max-h-48 overflow-y-auto border border-gray-300 rounded-md p-2",children:Ss.map(N=>i.jsxs("label",{className:"flex items-start px-3 py-2 hover:bg-gray-50 cursor-pointer border-b border-gray-100 last:border-b-0",children:[i.jsx("input",{type:"checkbox",checked:Ze.sessionAdminIds.includes(N.id),onChange:()=>fa(N.id),className:"w-4 h-4 border-gray-300 rounded focus:ring-[#2D4660] accent-green-600 mt-1",style:{accentColor:"#16a34a"}}),i.jsxs("div",{className:"ml-3 flex-1",children:[i.jsxs("div",{className:"flex items-start justify-between gap-2",children:[i.jsx("div",{className:"text-sm font-medium text-gray-900",children:N.title||"Unnamed Session"}),i.jsx("span",{className:`text-xs font-medium ${ns(N).color}`,children:ns(N).text})]}),i.jsx("div",{className:"text-xs text-gray-500 mt-0.5",children:Yr(N)})]})]},N.id))})]})]})]})]}),B==="session-admin"?i.jsxs("div",{className:"border-t border-gray-200 pt-4",children:[i.jsxs("div",{className:"flex items-center mb-3",children:[i.jsx(As,{className:"h-4 w-4 mr-2 text-[#8B5A4A]"}),i.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Add as Stakeholder"}),Ze.stakeholderSessionIds.length>0&&i.jsx("span",{className:"ml-2 px-2 py-0.5 bg-[#8B5A4A]/10 text-[#8B5A4A] text-xs rounded-full",children:Ze.stakeholderSessionIds.length})]}),i.jsxs("div",{className:"space-y-3",children:[i.jsx("div",{children:i.jsx(Ph,{products:lr,value:Dt,onChange:N=>{_r(N),Ot(F=>({...F,stakeholderSessionIds:[]})),on(!0)},label:"Product *"})}),Dt&&i.jsxs("div",{className:"space-y-3",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Session Selection *"}),i.jsxs("div",{className:"inline-flex items-center bg-gray-100 rounded-lg p-1",children:[i.jsx("button",{type:"button",onClick:()=>{on(!1)},className:`px-4 py-2 rounded-md text-sm font-medium transition-colors flex items-center ${Nr?"text-gray-600 hover:text-gray-900":"bg-white text-[#2d4660] shadow-sm"}`,children:"Select Sessions"}),i.jsx("button",{type:"button",onClick:()=>{on(!0),Ot(N=>({...N,stakeholderSessionIds:[]}))},className:`px-4 py-2 rounded-md text-sm font-medium transition-colors flex items-center ${Nr?"bg-white text-[#2d4660] shadow-sm":"text-gray-600 hover:text-gray-900"}`,children:"All Sessions"})]}),Nr&&i.jsx("p",{className:"mt-2 text-xs text-gray-500",children:"User will be added to all current and future sessions for this product"})]}),!Nr&&i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Sessions * (Current and Future)"}),Ur.length===0?i.jsx("p",{className:"text-sm text-gray-500",children:"No current or future sessions found for this product."}):i.jsx("div",{className:"max-h-48 overflow-y-auto border border-gray-300 rounded-md p-2",children:Ur.map(N=>i.jsxs("label",{className:"flex items-start px-3 py-2 hover:bg-gray-50 cursor-pointer border-b border-gray-100 last:border-b-0",children:[i.jsx("input",{type:"checkbox",checked:Ze.stakeholderSessionIds.includes(N.id),onChange:()=>Da(N.id),className:"w-4 h-4 border-gray-300 rounded focus:ring-[#2D4660] accent-green-600 mt-1",style:{accentColor:"#16a34a"}}),i.jsxs("div",{className:"ml-3 flex-1",children:[i.jsx("div",{className:"text-sm font-medium text-gray-900",children:N.title||"Unnamed Session"}),i.jsx("div",{className:"text-xs text-gray-500 mt-0.5",children:Yr(N)}),i.jsx("div",{className:"text-xs mt-0.5",children:i.jsx("span",{className:`font-medium ${ns(N).color}`,children:ns(N).text})})]})]},N.id))})]})]})]})]}):i.jsxs("div",{className:"border-t border-gray-200 pt-4",children:[i.jsxs("div",{className:"w-full flex items-center gap-2 py-2 hover:bg-gray-50 rounded-lg px-2 -ml-2 transition-colors",children:[i.jsxs("button",{type:"button",className:"flex items-center gap-2 text-sm font-medium text-gray-700 flex-1 text-left",onClick:()=>or(N=>({stakeholder:!N.stakeholder,sessionAdmin:!1})),children:[i.jsx("span",{className:"flex items-center justify-center",style:{transform:An?"scale(1.2)":"scale(1)"},children:i.jsx(As,{className:"h-4 w-4 text-[#8B5A4A]"})}),i.jsx("span",{children:"Stakeholder"}),An&&Ce&&i.jsx("span",{className:"ml-2 text-xs text-gray-500",children:Ce})]}),An&&i.jsx("button",{type:"button",onClick:Bn,className:"px-3 py-1 rounded-full border text-xs font-semibold transition-colors hover:bg-[#8B5A4A]/10",style:{borderColor:"#8B5A4A",color:"#8B5A4A",backgroundColor:"#fcf8f4"},children:"Reset"}),i.jsx(ds,{className:`h-4 w-4 text-gray-500 transition-transform ${mr.stakeholder?"rotate-180":""}`})]}),mr.stakeholder&&i.jsxs("div",{className:"mt-3 ml-6 space-y-3",children:[i.jsx("div",{children:i.jsx(Ph,{products:lr,value:Dt,onChange:N=>{_r(N),Ot(F=>({...F,stakeholderSessionIds:[]})),on(!0)},label:"Product *"})}),Dt&&i.jsxs("div",{className:"space-y-3",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Session Selection *"}),i.jsxs("div",{className:"inline-flex items-center bg-gray-100 rounded-lg p-1",children:[i.jsx("button",{type:"button",onClick:()=>{on(!1)},className:`px-4 py-2 rounded-md text-sm font-medium transition-colors flex items-center ${Nr?"text-gray-600 hover:text-gray-900":"bg-white text-[#2d4660] shadow-sm"}`,children:"Select Sessions"}),i.jsx("button",{type:"button",onClick:()=>{on(!0),Ot(N=>({...N,stakeholderSessionIds:[]}))},className:`px-4 py-2 rounded-md text-sm font-medium transition-colors flex items-center ${Nr?"bg-white text-[#2d4660] shadow-sm":"text-gray-600 hover:text-gray-900"}`,children:"All Sessions"})]}),Nr&&i.jsx("p",{className:"mt-2 text-xs text-gray-500",children:"User will be added to all current and future sessions for this product"})]}),!Nr&&i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Sessions * (Current and Future)"}),Ur.length===0?i.jsx("p",{className:"text-sm text-gray-500",children:"No current or future sessions found for this product."}):i.jsx("div",{className:"max-h-48 overflow-y-auto border border-gray-300 rounded-md p-2",children:Ur.map(N=>i.jsxs("label",{className:"flex items-start px-3 py-2 hover:bg-gray-50 cursor-pointer border-b border-gray-100 last:border-b-0",children:[i.jsx("input",{type:"checkbox",checked:Ze.stakeholderSessionIds.includes(N.id),onChange:()=>Da(N.id),className:"w-4 h-4 border-gray-300 rounded focus:ring-[#2D4660] accent-green-600 mt-1",style:{accentColor:"#16a34a"}}),i.jsxs("div",{className:"ml-3 flex-1",children:[i.jsxs("div",{className:"flex items-start justify-between gap-2",children:[i.jsx("div",{className:"text-sm font-medium text-gray-900",children:N.title||"Unnamed Session"}),i.jsx("span",{className:`text-xs font-medium ${ns(N).color}`,children:ns(N).text})]}),i.jsx("div",{className:"text-xs text-gray-500 mt-0.5",children:Yr(N)})]})]},N.id))})]})]})]})]})]}),i.jsx("div",{className:"mt-6 pt-6 border-t border-gray-200 flex justify-end",children:i.jsx("button",{onClick:da,disabled:!!(_t||!Ze.name.trim()||!Ze.email.trim()||B==="session-admin"&&(!Dt||!Nr&&Ze.stakeholderSessionIds.length===0)||B==="system-admin"&&mr.sessionAdmin&&pr&&!Dr&&Ze.sessionAdminIds.length===0||B==="system-admin"&&mr.stakeholder&&Dt&&!Nr&&Ze.stakeholderSessionIds.length===0),className:"px-4 py-2.5 bg-[#2D4660] text-white rounded-lg hover:bg-[#173B65] transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center",children:_t?i.jsxs(i.Fragment,{children:[i.jsxs("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",fill:"none",viewBox:"0 0 24 24",children:[i.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),i.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),Be(!0)]}):Be(!1)})})]})})}),Je&&ct&&i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:i.jsx("div",{className:"bg-white rounded-lg shadow-xl max-w-lg w-full max-h-[90vh] overflow-y-auto",children:i.jsxs("div",{className:"p-6",children:[i.jsxs("div",{className:"flex items-start mb-4",children:[i.jsx("div",{className:"flex-shrink-0 w-12 h-12 rounded-full bg-blue-100 flex items-center justify-center",children:i.jsx(dd,{className:"h-6 w-6 text-blue-600"})}),i.jsxs("div",{className:"ml-4 flex-1",children:[i.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-1",children:"Edit User"}),i.jsx("p",{className:"text-sm text-gray-600",children:"Update user name and email address"})]}),i.jsx("button",{onClick:()=>{Oe(!1),ht(null),We(""),Ut("")},className:"flex-shrink-0 ml-4 p-1 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-lg transition-colors","aria-label":"Close modal",children:i.jsx(js,{className:"h-5 w-5"})})]}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Full Name ",i.jsx("span",{className:"text-red-500",children:"*"})]}),i.jsx("input",{type:"text",value:St,onChange:N=>We(N.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#2D4660] focus:border-transparent",placeholder:"John Doe",disabled:Wr})]}),i.jsxs("div",{children:[i.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Email Address ",i.jsx("span",{className:"text-red-500",children:"*"})]}),i.jsx("input",{type:"email",value:Cr,onChange:N=>Ut(N.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#2D4660] focus:border-transparent",placeholder:"john.doe@newmill.com",disabled:Wr})]})]}),i.jsxs("div",{className:"flex justify-end gap-3 mt-6",children:[i.jsx("button",{onClick:()=>{Oe(!1),ht(null),We(""),Ut("")},className:"px-4 py-2.5 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",disabled:Wr,children:"Cancel"}),i.jsx("button",{onClick:cn,disabled:Wr||!St.trim()||!Cr.trim(),className:"px-4 py-2.5 bg-[#2D4660] text-white rounded-lg hover:bg-[#173B65] transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:Wr?"Updating...":"Update User"})]})]})})}),Ns&&Rs&&i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:i.jsx("div",{className:"bg-white rounded-lg shadow-xl max-w-lg w-full max-h-[90vh] overflow-y-auto",children:i.jsxs("div",{className:"p-6",children:[i.jsxs("div",{className:"flex items-start mb-4",children:[i.jsx("div",{className:"flex-shrink-0 w-12 h-12 rounded-full bg-green-100 flex items-center justify-center",children:i.jsx(jr,{className:"h-6 w-6 text-green-600"})}),i.jsxs("div",{className:"ml-4 flex-1",children:[i.jsxs("h2",{className:"text-xl font-bold text-gray-900 mb-1",children:[Rs.userType," Created Successfully!"]}),i.jsx("p",{className:"text-sm text-gray-600",children:"The user account has been created and roles have been assigned."})]}),i.jsx("button",{onClick:()=>{Ir(!1),ts(null)},className:"flex-shrink-0 ml-4 p-1 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-lg transition-colors","aria-label":"Close modal",children:i.jsx(js,{className:"h-5 w-5"})})]}),i.jsx("div",{className:"bg-gray-50 rounded-lg p-4 mb-4",children:i.jsx("div",{className:"space-y-3",children:i.jsxs("div",{children:[i.jsx("div",{className:"text-xs font-semibold text-gray-500 uppercase mb-1",children:"Email Address"}),i.jsx("div",{className:"text-sm font-medium text-gray-900",children:Rs.email})]})})}),i.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-3 mb-4",children:i.jsxs("div",{className:"flex",children:[i.jsx(nd,{className:"h-5 w-5 text-blue-600 flex-shrink-0 mt-0.5"}),i.jsxs("div",{className:"ml-2",children:[i.jsx("div",{className:"text-sm font-semibold text-blue-800 mb-1",children:"User Authentication"}),i.jsx("div",{className:"text-xs text-blue-700",children:"The user will sign in using their company Azure AD credentials. No password is needed."})]})]})}),i.jsx("div",{className:"flex justify-end",children:i.jsx("button",{onClick:()=>{Ir(!1),ts(null)},className:"px-4 py-2.5 bg-[#2D4660] text-white rounded-lg hover:bg-[#173B65] transition-colors",children:"Done"})})]})})})]}):null}const eee="/feature-voting-app/assets/bottom-left-curve-T4fflHT3.png",tee=()=>i.jsx("div",{className:"fixed bottom-0 left-0 pointer-events-none z-0",children:i.jsx("img",{src:eee,alt:"",style:{maxWidth:"600px",height:"auto",opacity:.2}})});function ree(){return i.jsx($M,{children:i.jsxs(z$,{children:[i.jsx(tee,{}),i.jsx(R5,{basename:"/feature-voting-app",children:i.jsxs(f5,{children:[i.jsx(ii,{path:"/",element:i.jsx(u5,{to:"/login",replace:!0})}),i.jsx(ii,{path:"/login",element:i.jsx(BZ,{})}),i.jsx(ii,{path:"/sessions",element:i.jsx(VZ,{})}),i.jsx(ii,{path:"/create-session",element:i.jsx(qZ,{})}),i.jsx(ii,{path:"/manage-stakeholders",element:i.jsx(KZ,{})}),i.jsx(ii,{path:"/manage-admins",element:i.jsx(GZ,{})}),i.jsx(ii,{path:"/vote",element:i.jsx(Y0,{adminMode:!1})}),i.jsx(ii,{path:"/admin",element:i.jsx(Y0,{adminMode:!0})}),i.jsx(ii,{path:"/results",element:i.jsx(Y0,{resultsMode:!0})}),i.jsx(ii,{path:"/unauthorized",element:i.jsx(YZ,{})}),i.jsx(ii,{path:"/system-admins",element:i.jsx(JZ,{})}),i.jsx(ii,{path:"/users",element:i.jsx(ZZ,{})})]})})]})})}if(typeof window<"u"){const e=console.error;console.error=(...t)=>{var n;const r=((n=t[0])==null?void 0:n.toString())||"";r.includes("runtime.lastError")||r.includes("message channel closed")||e.apply(console,t)}}wD.createRoot(document.getElementById("root")).render(i.jsx(pt.StrictMode,{children:i.jsx(ree,{})}));
