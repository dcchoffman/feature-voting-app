var sD=Object.defineProperty;var iD=(e,t,r)=>t in e?sD(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;var Rg=(e,t,r)=>iD(e,typeof t!="symbol"?t+"":t,r);function aD(e,t){for(var r=0;r<t.length;r++){const n=t[r];if(typeof n!="string"&&!Array.isArray(n)){for(const s in n)if(s!=="default"&&!(s in e)){const i=Object.getOwnPropertyDescriptor(n,s);i&&Object.defineProperty(e,s,i.get?i:{enumerable:!0,get:()=>n[s]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const l of i.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&n(l)}).observe(document,{childList:!0,subtree:!0});function r(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(s){if(s.ep)return;s.ep=!0;const i=r(s);fetch(s.href,i)}})();function Zi(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function oD(e){if(Object.prototype.hasOwnProperty.call(e,"__esModule"))return e;var t=e.default;if(typeof t=="function"){var r=function n(){return this instanceof n?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};r.prototype=t.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(e).forEach(function(n){var s=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(r,n,s.get?s:{enumerable:!0,get:function(){return e[n]}})}),r}var $g={exports:{}},Ou={},Mg={exports:{}},At={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var gj;function lD(){if(gj)return At;gj=1;var e=Symbol.for("react.element"),t=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),i=Symbol.for("react.provider"),l=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),m=Symbol.for("react.memo"),f=Symbol.for("react.lazy"),p=Symbol.iterator;function y(D){return D===null||typeof D!="object"?null:(D=p&&D[p]||D["@@iterator"],typeof D=="function"?D:null)}var x={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},j=Object.assign,b={};function k(D,q,Te){this.props=D,this.context=q,this.refs=b,this.updater=Te||x}k.prototype.isReactComponent={},k.prototype.setState=function(D,q){if(typeof D!="object"&&typeof D!="function"&&D!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,D,q,"setState")},k.prototype.forceUpdate=function(D){this.updater.enqueueForceUpdate(this,D,"forceUpdate")};function _(){}_.prototype=k.prototype;function E(D,q,Te){this.props=D,this.context=q,this.refs=b,this.updater=Te||x}var C=E.prototype=new _;C.constructor=E,j(C,k.prototype),C.isPureReactComponent=!0;var O=Array.isArray,T=Object.prototype.hasOwnProperty,A={current:null},L={key:!0,ref:!0,__self:!0,__source:!0};function J(D,q,Te){var we,Ce={},le=null,de=null;if(q!=null)for(we in q.ref!==void 0&&(de=q.ref),q.key!==void 0&&(le=""+q.key),q)T.call(q,we)&&!L.hasOwnProperty(we)&&(Ce[we]=q[we]);var Q=arguments.length-2;if(Q===1)Ce.children=Te;else if(1<Q){for(var R=Array(Q),ge=0;ge<Q;ge++)R[ge]=arguments[ge+2];Ce.children=R}if(D&&D.defaultProps)for(we in Q=D.defaultProps,Q)Ce[we]===void 0&&(Ce[we]=Q[we]);return{$$typeof:e,type:D,key:le,ref:de,props:Ce,_owner:A.current}}function H(D,q){return{$$typeof:e,type:D.type,key:q,ref:D.ref,props:D.props,_owner:D._owner}}function me(D){return typeof D=="object"&&D!==null&&D.$$typeof===e}function Z(D){var q={"=":"=0",":":"=2"};return"$"+D.replace(/[=:]/g,function(Te){return q[Te]})}var K=/\/+/g;function ce(D,q){return typeof D=="object"&&D!==null&&D.key!=null?Z(""+D.key):q.toString(36)}function z(D,q,Te,we,Ce){var le=typeof D;(le==="undefined"||le==="boolean")&&(D=null);var de=!1;if(D===null)de=!0;else switch(le){case"string":case"number":de=!0;break;case"object":switch(D.$$typeof){case e:case t:de=!0}}if(de)return de=D,Ce=Ce(de),D=we===""?"."+ce(de,0):we,O(Ce)?(Te="",D!=null&&(Te=D.replace(K,"$&/")+"/"),z(Ce,q,Te,"",function(ge){return ge})):Ce!=null&&(me(Ce)&&(Ce=H(Ce,Te+(!Ce.key||de&&de.key===Ce.key?"":(""+Ce.key).replace(K,"$&/")+"/")+D)),q.push(Ce)),1;if(de=0,we=we===""?".":we+":",O(D))for(var Q=0;Q<D.length;Q++){le=D[Q];var R=we+ce(le,Q);de+=z(le,q,Te,R,Ce)}else if(R=y(D),typeof R=="function")for(D=R.call(D),Q=0;!(le=D.next()).done;)le=le.value,R=we+ce(le,Q++),de+=z(le,q,Te,R,Ce);else if(le==="object")throw q=String(D),Error("Objects are not valid as a React child (found: "+(q==="[object Object]"?"object with keys {"+Object.keys(D).join(", ")+"}":q)+"). If you meant to render a collection of children, use an array instead.");return de}function se(D,q,Te){if(D==null)return D;var we=[],Ce=0;return z(D,we,"","",function(le){return q.call(Te,le,Ce++)}),we}function B(D){if(D._status===-1){var q=D._result;q=q(),q.then(function(Te){(D._status===0||D._status===-1)&&(D._status=1,D._result=Te)},function(Te){(D._status===0||D._status===-1)&&(D._status=2,D._result=Te)}),D._status===-1&&(D._status=0,D._result=q)}if(D._status===1)return D._result.default;throw D._result}var ue={current:null},oe={transition:null},X={ReactCurrentDispatcher:ue,ReactCurrentBatchConfig:oe,ReactCurrentOwner:A};function ee(){throw Error("act(...) is not supported in production builds of React.")}return At.Children={map:se,forEach:function(D,q,Te){se(D,function(){q.apply(this,arguments)},Te)},count:function(D){var q=0;return se(D,function(){q++}),q},toArray:function(D){return se(D,function(q){return q})||[]},only:function(D){if(!me(D))throw Error("React.Children.only expected to receive a single React element child.");return D}},At.Component=k,At.Fragment=r,At.Profiler=s,At.PureComponent=E,At.StrictMode=n,At.Suspense=d,At.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=X,At.act=ee,At.cloneElement=function(D,q,Te){if(D==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+D+".");var we=j({},D.props),Ce=D.key,le=D.ref,de=D._owner;if(q!=null){if(q.ref!==void 0&&(le=q.ref,de=A.current),q.key!==void 0&&(Ce=""+q.key),D.type&&D.type.defaultProps)var Q=D.type.defaultProps;for(R in q)T.call(q,R)&&!L.hasOwnProperty(R)&&(we[R]=q[R]===void 0&&Q!==void 0?Q[R]:q[R])}var R=arguments.length-2;if(R===1)we.children=Te;else if(1<R){Q=Array(R);for(var ge=0;ge<R;ge++)Q[ge]=arguments[ge+2];we.children=Q}return{$$typeof:e,type:D.type,key:Ce,ref:le,props:we,_owner:de}},At.createContext=function(D){return D={$$typeof:l,_currentValue:D,_currentValue2:D,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},D.Provider={$$typeof:i,_context:D},D.Consumer=D},At.createElement=J,At.createFactory=function(D){var q=J.bind(null,D);return q.type=D,q},At.createRef=function(){return{current:null}},At.forwardRef=function(D){return{$$typeof:u,render:D}},At.isValidElement=me,At.lazy=function(D){return{$$typeof:f,_payload:{_status:-1,_result:D},_init:B}},At.memo=function(D,q){return{$$typeof:m,type:D,compare:q===void 0?null:q}},At.startTransition=function(D){var q=oe.transition;oe.transition={};try{D()}finally{oe.transition=q}},At.unstable_act=ee,At.useCallback=function(D,q){return ue.current.useCallback(D,q)},At.useContext=function(D){return ue.current.useContext(D)},At.useDebugValue=function(){},At.useDeferredValue=function(D){return ue.current.useDeferredValue(D)},At.useEffect=function(D,q){return ue.current.useEffect(D,q)},At.useId=function(){return ue.current.useId()},At.useImperativeHandle=function(D,q,Te){return ue.current.useImperativeHandle(D,q,Te)},At.useInsertionEffect=function(D,q){return ue.current.useInsertionEffect(D,q)},At.useLayoutEffect=function(D,q){return ue.current.useLayoutEffect(D,q)},At.useMemo=function(D,q){return ue.current.useMemo(D,q)},At.useReducer=function(D,q,Te){return ue.current.useReducer(D,q,Te)},At.useRef=function(D){return ue.current.useRef(D)},At.useState=function(D){return ue.current.useState(D)},At.useSyncExternalStore=function(D,q,Te){return ue.current.useSyncExternalStore(D,q,Te)},At.useTransition=function(){return ue.current.useTransition()},At.version="18.3.1",At}var yj;function Wc(){return yj||(yj=1,Mg.exports=lD()),Mg.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var vj;function cD(){if(vj)return Ou;vj=1;var e=Wc(),t=Symbol.for("react.element"),r=Symbol.for("react.fragment"),n=Object.prototype.hasOwnProperty,s=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,i={key:!0,ref:!0,__self:!0,__source:!0};function l(u,d,m){var f,p={},y=null,x=null;m!==void 0&&(y=""+m),d.key!==void 0&&(y=""+d.key),d.ref!==void 0&&(x=d.ref);for(f in d)n.call(d,f)&&!i.hasOwnProperty(f)&&(p[f]=d[f]);if(u&&u.defaultProps)for(f in d=u.defaultProps,d)p[f]===void 0&&(p[f]=d[f]);return{$$typeof:t,type:u,key:y,ref:x,props:p,_owner:s.current}}return Ou.Fragment=r,Ou.jsx=l,Ou.jsxs=l,Ou}var xj;function uD(){return xj||(xj=1,$g.exports=cD()),$g.exports}var a=uD(),v=Wc();const it=Zi(v),dD=aD({__proto__:null,default:it},[v]);var Ff={},Fg={exports:{}},Is={},Lg={exports:{}},zg={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var wj;function fD(){return wj||(wj=1,(function(e){function t(oe,X){var ee=oe.length;oe.push(X);e:for(;0<ee;){var D=ee-1>>>1,q=oe[D];if(0<s(q,X))oe[D]=X,oe[ee]=q,ee=D;else break e}}function r(oe){return oe.length===0?null:oe[0]}function n(oe){if(oe.length===0)return null;var X=oe[0],ee=oe.pop();if(ee!==X){oe[0]=ee;e:for(var D=0,q=oe.length,Te=q>>>1;D<Te;){var we=2*(D+1)-1,Ce=oe[we],le=we+1,de=oe[le];if(0>s(Ce,ee))le<q&&0>s(de,Ce)?(oe[D]=de,oe[le]=ee,D=le):(oe[D]=Ce,oe[we]=ee,D=we);else if(le<q&&0>s(de,ee))oe[D]=de,oe[le]=ee,D=le;else break e}}return X}function s(oe,X){var ee=oe.sortIndex-X.sortIndex;return ee!==0?ee:oe.id-X.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;e.unstable_now=function(){return i.now()}}else{var l=Date,u=l.now();e.unstable_now=function(){return l.now()-u}}var d=[],m=[],f=1,p=null,y=3,x=!1,j=!1,b=!1,k=typeof setTimeout=="function"?setTimeout:null,_=typeof clearTimeout=="function"?clearTimeout:null,E=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function C(oe){for(var X=r(m);X!==null;){if(X.callback===null)n(m);else if(X.startTime<=oe)n(m),X.sortIndex=X.expirationTime,t(d,X);else break;X=r(m)}}function O(oe){if(b=!1,C(oe),!j)if(r(d)!==null)j=!0,B(T);else{var X=r(m);X!==null&&ue(O,X.startTime-oe)}}function T(oe,X){j=!1,b&&(b=!1,_(J),J=-1),x=!0;var ee=y;try{for(C(X),p=r(d);p!==null&&(!(p.expirationTime>X)||oe&&!Z());){var D=p.callback;if(typeof D=="function"){p.callback=null,y=p.priorityLevel;var q=D(p.expirationTime<=X);X=e.unstable_now(),typeof q=="function"?p.callback=q:p===r(d)&&n(d),C(X)}else n(d);p=r(d)}if(p!==null)var Te=!0;else{var we=r(m);we!==null&&ue(O,we.startTime-X),Te=!1}return Te}finally{p=null,y=ee,x=!1}}var A=!1,L=null,J=-1,H=5,me=-1;function Z(){return!(e.unstable_now()-me<H)}function K(){if(L!==null){var oe=e.unstable_now();me=oe;var X=!0;try{X=L(!0,oe)}finally{X?ce():(A=!1,L=null)}}else A=!1}var ce;if(typeof E=="function")ce=function(){E(K)};else if(typeof MessageChannel<"u"){var z=new MessageChannel,se=z.port2;z.port1.onmessage=K,ce=function(){se.postMessage(null)}}else ce=function(){k(K,0)};function B(oe){L=oe,A||(A=!0,ce())}function ue(oe,X){J=k(function(){oe(e.unstable_now())},X)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(oe){oe.callback=null},e.unstable_continueExecution=function(){j||x||(j=!0,B(T))},e.unstable_forceFrameRate=function(oe){0>oe||125<oe?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):H=0<oe?Math.floor(1e3/oe):5},e.unstable_getCurrentPriorityLevel=function(){return y},e.unstable_getFirstCallbackNode=function(){return r(d)},e.unstable_next=function(oe){switch(y){case 1:case 2:case 3:var X=3;break;default:X=y}var ee=y;y=X;try{return oe()}finally{y=ee}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(oe,X){switch(oe){case 1:case 2:case 3:case 4:case 5:break;default:oe=3}var ee=y;y=oe;try{return X()}finally{y=ee}},e.unstable_scheduleCallback=function(oe,X,ee){var D=e.unstable_now();switch(typeof ee=="object"&&ee!==null?(ee=ee.delay,ee=typeof ee=="number"&&0<ee?D+ee:D):ee=D,oe){case 1:var q=-1;break;case 2:q=250;break;case 5:q=1073741823;break;case 4:q=1e4;break;default:q=5e3}return q=ee+q,oe={id:f++,callback:X,priorityLevel:oe,startTime:ee,expirationTime:q,sortIndex:-1},ee>D?(oe.sortIndex=ee,t(m,oe),r(d)===null&&oe===r(m)&&(b?(_(J),J=-1):b=!0,ue(O,ee-D))):(oe.sortIndex=q,t(d,oe),j||x||(j=!0,B(T))),oe},e.unstable_shouldYield=Z,e.unstable_wrapCallback=function(oe){var X=y;return function(){var ee=y;y=X;try{return oe.apply(this,arguments)}finally{y=ee}}}})(zg)),zg}var bj;function hD(){return bj||(bj=1,Lg.exports=fD()),Lg.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var jj;function mD(){if(jj)return Is;jj=1;var e=Wc(),t=hD();function r(o){for(var c="https://reactjs.org/docs/error-decoder.html?invariant="+o,h=1;h<arguments.length;h++)c+="&args[]="+encodeURIComponent(arguments[h]);return"Minified React error #"+o+"; visit "+c+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var n=new Set,s={};function i(o,c){l(o,c),l(o+"Capture",c)}function l(o,c){for(s[o]=c,o=0;o<c.length;o++)n.add(c[o])}var u=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),d=Object.prototype.hasOwnProperty,m=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,f={},p={};function y(o){return d.call(p,o)?!0:d.call(f,o)?!1:m.test(o)?p[o]=!0:(f[o]=!0,!1)}function x(o,c,h,g){if(h!==null&&h.type===0)return!1;switch(typeof c){case"function":case"symbol":return!0;case"boolean":return g?!1:h!==null?!h.acceptsBooleans:(o=o.toLowerCase().slice(0,5),o!=="data-"&&o!=="aria-");default:return!1}}function j(o,c,h,g){if(c===null||typeof c>"u"||x(o,c,h,g))return!0;if(g)return!1;if(h!==null)switch(h.type){case 3:return!c;case 4:return c===!1;case 5:return isNaN(c);case 6:return isNaN(c)||1>c}return!1}function b(o,c,h,g,w,N,P){this.acceptsBooleans=c===2||c===3||c===4,this.attributeName=g,this.attributeNamespace=w,this.mustUseProperty=h,this.propertyName=o,this.type=c,this.sanitizeURL=N,this.removeEmptyString=P}var k={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(o){k[o]=new b(o,0,!1,o,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(o){var c=o[0];k[c]=new b(c,1,!1,o[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(o){k[o]=new b(o,2,!1,o.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(o){k[o]=new b(o,2,!1,o,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(o){k[o]=new b(o,3,!1,o.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(o){k[o]=new b(o,3,!0,o,null,!1,!1)}),["capture","download"].forEach(function(o){k[o]=new b(o,4,!1,o,null,!1,!1)}),["cols","rows","size","span"].forEach(function(o){k[o]=new b(o,6,!1,o,null,!1,!1)}),["rowSpan","start"].forEach(function(o){k[o]=new b(o,5,!1,o.toLowerCase(),null,!1,!1)});var _=/[\-:]([a-z])/g;function E(o){return o[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(o){var c=o.replace(_,E);k[c]=new b(c,1,!1,o,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(o){var c=o.replace(_,E);k[c]=new b(c,1,!1,o,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(o){var c=o.replace(_,E);k[c]=new b(c,1,!1,o,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(o){k[o]=new b(o,1,!1,o.toLowerCase(),null,!1,!1)}),k.xlinkHref=new b("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(o){k[o]=new b(o,1,!1,o.toLowerCase(),null,!0,!0)});function C(o,c,h,g){var w=k.hasOwnProperty(c)?k[c]:null;(w!==null?w.type!==0:g||!(2<c.length)||c[0]!=="o"&&c[0]!=="O"||c[1]!=="n"&&c[1]!=="N")&&(j(c,h,w,g)&&(h=null),g||w===null?y(c)&&(h===null?o.removeAttribute(c):o.setAttribute(c,""+h)):w.mustUseProperty?o[w.propertyName]=h===null?w.type===3?!1:"":h:(c=w.attributeName,g=w.attributeNamespace,h===null?o.removeAttribute(c):(w=w.type,h=w===3||w===4&&h===!0?"":""+h,g?o.setAttributeNS(g,c,h):o.setAttribute(c,h))))}var O=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,T=Symbol.for("react.element"),A=Symbol.for("react.portal"),L=Symbol.for("react.fragment"),J=Symbol.for("react.strict_mode"),H=Symbol.for("react.profiler"),me=Symbol.for("react.provider"),Z=Symbol.for("react.context"),K=Symbol.for("react.forward_ref"),ce=Symbol.for("react.suspense"),z=Symbol.for("react.suspense_list"),se=Symbol.for("react.memo"),B=Symbol.for("react.lazy"),ue=Symbol.for("react.offscreen"),oe=Symbol.iterator;function X(o){return o===null||typeof o!="object"?null:(o=oe&&o[oe]||o["@@iterator"],typeof o=="function"?o:null)}var ee=Object.assign,D;function q(o){if(D===void 0)try{throw Error()}catch(h){var c=h.stack.trim().match(/\n( *(at )?)/);D=c&&c[1]||""}return`
`+D+o}var Te=!1;function we(o,c){if(!o||Te)return"";Te=!0;var h=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(c)if(c=function(){throw Error()},Object.defineProperty(c.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(c,[])}catch(ve){var g=ve}Reflect.construct(o,[],c)}else{try{c.call()}catch(ve){g=ve}o.call(c.prototype)}else{try{throw Error()}catch(ve){g=ve}o()}}catch(ve){if(ve&&g&&typeof ve.stack=="string"){for(var w=ve.stack.split(`
`),N=g.stack.split(`
`),P=w.length-1,F=N.length-1;1<=P&&0<=F&&w[P]!==N[F];)F--;for(;1<=P&&0<=F;P--,F--)if(w[P]!==N[F]){if(P!==1||F!==1)do if(P--,F--,0>F||w[P]!==N[F]){var G=`
`+w[P].replace(" at new "," at ");return o.displayName&&G.includes("<anonymous>")&&(G=G.replace("<anonymous>",o.displayName)),G}while(1<=P&&0<=F);break}}}finally{Te=!1,Error.prepareStackTrace=h}return(o=o?o.displayName||o.name:"")?q(o):""}function Ce(o){switch(o.tag){case 5:return q(o.type);case 16:return q("Lazy");case 13:return q("Suspense");case 19:return q("SuspenseList");case 0:case 2:case 15:return o=we(o.type,!1),o;case 11:return o=we(o.type.render,!1),o;case 1:return o=we(o.type,!0),o;default:return""}}function le(o){if(o==null)return null;if(typeof o=="function")return o.displayName||o.name||null;if(typeof o=="string")return o;switch(o){case L:return"Fragment";case A:return"Portal";case H:return"Profiler";case J:return"StrictMode";case ce:return"Suspense";case z:return"SuspenseList"}if(typeof o=="object")switch(o.$$typeof){case Z:return(o.displayName||"Context")+".Consumer";case me:return(o._context.displayName||"Context")+".Provider";case K:var c=o.render;return o=o.displayName,o||(o=c.displayName||c.name||"",o=o!==""?"ForwardRef("+o+")":"ForwardRef"),o;case se:return c=o.displayName||null,c!==null?c:le(o.type)||"Memo";case B:c=o._payload,o=o._init;try{return le(o(c))}catch{}}return null}function de(o){var c=o.type;switch(o.tag){case 24:return"Cache";case 9:return(c.displayName||"Context")+".Consumer";case 10:return(c._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return o=c.render,o=o.displayName||o.name||"",c.displayName||(o!==""?"ForwardRef("+o+")":"ForwardRef");case 7:return"Fragment";case 5:return c;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return le(c);case 8:return c===J?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof c=="function")return c.displayName||c.name||null;if(typeof c=="string")return c}return null}function Q(o){switch(typeof o){case"boolean":case"number":case"string":case"undefined":return o;case"object":return o;default:return""}}function R(o){var c=o.type;return(o=o.nodeName)&&o.toLowerCase()==="input"&&(c==="checkbox"||c==="radio")}function ge(o){var c=R(o)?"checked":"value",h=Object.getOwnPropertyDescriptor(o.constructor.prototype,c),g=""+o[c];if(!o.hasOwnProperty(c)&&typeof h<"u"&&typeof h.get=="function"&&typeof h.set=="function"){var w=h.get,N=h.set;return Object.defineProperty(o,c,{configurable:!0,get:function(){return w.call(this)},set:function(P){g=""+P,N.call(this,P)}}),Object.defineProperty(o,c,{enumerable:h.enumerable}),{getValue:function(){return g},setValue:function(P){g=""+P},stopTracking:function(){o._valueTracker=null,delete o[c]}}}}function $e(o){o._valueTracker||(o._valueTracker=ge(o))}function V(o){if(!o)return!1;var c=o._valueTracker;if(!c)return!0;var h=c.getValue(),g="";return o&&(g=R(o)?o.checked?"true":"false":o.value),o=g,o!==h?(c.setValue(o),!0):!1}function Fe(o){if(o=o||(typeof document<"u"?document:void 0),typeof o>"u")return null;try{return o.activeElement||o.body}catch{return o.body}}function Be(o,c){var h=c.checked;return ee({},c,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:h??o._wrapperState.initialChecked})}function dt(o,c){var h=c.defaultValue==null?"":c.defaultValue,g=c.checked!=null?c.checked:c.defaultChecked;h=Q(c.value!=null?c.value:h),o._wrapperState={initialChecked:g,initialValue:h,controlled:c.type==="checkbox"||c.type==="radio"?c.checked!=null:c.value!=null}}function ft(o,c){c=c.checked,c!=null&&C(o,"checked",c,!1)}function Dt(o,c){ft(o,c);var h=Q(c.value),g=c.type;if(h!=null)g==="number"?(h===0&&o.value===""||o.value!=h)&&(o.value=""+h):o.value!==""+h&&(o.value=""+h);else if(g==="submit"||g==="reset"){o.removeAttribute("value");return}c.hasOwnProperty("value")?Xt(o,c.type,h):c.hasOwnProperty("defaultValue")&&Xt(o,c.type,Q(c.defaultValue)),c.checked==null&&c.defaultChecked!=null&&(o.defaultChecked=!!c.defaultChecked)}function Nt(o,c,h){if(c.hasOwnProperty("value")||c.hasOwnProperty("defaultValue")){var g=c.type;if(!(g!=="submit"&&g!=="reset"||c.value!==void 0&&c.value!==null))return;c=""+o._wrapperState.initialValue,h||c===o.value||(o.value=c),o.defaultValue=c}h=o.name,h!==""&&(o.name=""),o.defaultChecked=!!o._wrapperState.initialChecked,h!==""&&(o.name=h)}function Xt(o,c,h){(c!=="number"||Fe(o.ownerDocument)!==o)&&(h==null?o.defaultValue=""+o._wrapperState.initialValue:o.defaultValue!==""+h&&(o.defaultValue=""+h))}var M=Array.isArray;function ie(o,c,h,g){if(o=o.options,c){c={};for(var w=0;w<h.length;w++)c["$"+h[w]]=!0;for(h=0;h<o.length;h++)w=c.hasOwnProperty("$"+o[h].value),o[h].selected!==w&&(o[h].selected=w),w&&g&&(o[h].defaultSelected=!0)}else{for(h=""+Q(h),c=null,w=0;w<o.length;w++){if(o[w].value===h){o[w].selected=!0,g&&(o[w].defaultSelected=!0);return}c!==null||o[w].disabled||(c=o[w])}c!==null&&(c.selected=!0)}}function pe(o,c){if(c.dangerouslySetInnerHTML!=null)throw Error(r(91));return ee({},c,{value:void 0,defaultValue:void 0,children:""+o._wrapperState.initialValue})}function Se(o,c){var h=c.value;if(h==null){if(h=c.children,c=c.defaultValue,h!=null){if(c!=null)throw Error(r(92));if(M(h)){if(1<h.length)throw Error(r(93));h=h[0]}c=h}c==null&&(c=""),h=c}o._wrapperState={initialValue:Q(h)}}function ye(o,c){var h=Q(c.value),g=Q(c.defaultValue);h!=null&&(h=""+h,h!==o.value&&(o.value=h),c.defaultValue==null&&o.defaultValue!==h&&(o.defaultValue=h)),g!=null&&(o.defaultValue=""+g)}function be(o){var c=o.textContent;c===o._wrapperState.initialValue&&c!==""&&c!==null&&(o.value=c)}function qe(o){switch(o){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function yt(o,c){return o==null||o==="http://www.w3.org/1999/xhtml"?qe(c):o==="http://www.w3.org/2000/svg"&&c==="foreignObject"?"http://www.w3.org/1999/xhtml":o}var wt,Pt=(function(o){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(c,h,g,w){MSApp.execUnsafeLocalFunction(function(){return o(c,h,g,w)})}:o})(function(o,c){if(o.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in o)o.innerHTML=c;else{for(wt=wt||document.createElement("div"),wt.innerHTML="<svg>"+c.valueOf().toString()+"</svg>",c=wt.firstChild;o.firstChild;)o.removeChild(o.firstChild);for(;c.firstChild;)o.appendChild(c.firstChild)}});function tr(o,c){if(c){var h=o.firstChild;if(h&&h===o.lastChild&&h.nodeType===3){h.nodeValue=c;return}}o.textContent=c}var Rt={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},nn=["Webkit","ms","Moz","O"];Object.keys(Rt).forEach(function(o){nn.forEach(function(c){c=c+o.charAt(0).toUpperCase()+o.substring(1),Rt[c]=Rt[o]})});function yr(o,c,h){return c==null||typeof c=="boolean"||c===""?"":h||typeof c!="number"||c===0||Rt.hasOwnProperty(o)&&Rt[o]?(""+c).trim():c+"px"}function $t(o,c){o=o.style;for(var h in c)if(c.hasOwnProperty(h)){var g=h.indexOf("--")===0,w=yr(h,c[h],g);h==="float"&&(h="cssFloat"),g?o.setProperty(h,w):o[h]=w}}var yn=ee({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Wt(o,c){if(c){if(yn[o]&&(c.children!=null||c.dangerouslySetInnerHTML!=null))throw Error(r(137,o));if(c.dangerouslySetInnerHTML!=null){if(c.children!=null)throw Error(r(60));if(typeof c.dangerouslySetInnerHTML!="object"||!("__html"in c.dangerouslySetInnerHTML))throw Error(r(61))}if(c.style!=null&&typeof c.style!="object")throw Error(r(62))}}function _r(o,c){if(o.indexOf("-")===-1)return typeof c.is=="string";switch(o){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ze=null;function Ot(o){return o=o.target||o.srcElement||window,o.correspondingUseElement&&(o=o.correspondingUseElement),o.nodeType===3?o.parentNode:o}var Qt=null,Gt=null,Br=null;function vr(o){if(o=gu(o)){if(typeof Qt!="function")throw Error(r(280));var c=o.stateNode;c&&(c=Qd(c),Qt(o.stateNode,o.type,c))}}function Ss(o){Gt?Br?Br.push(o):Br=[o]:Gt=o}function $r(){if(Gt){var o=Gt,c=Br;if(Br=Gt=null,vr(o),c)for(o=0;o<c.length;o++)vr(c[o])}}function Wr(o,c){return o(c)}function xr(){}var vn=!1;function Cr(o,c,h){if(vn)return o(c,h);vn=!0;try{return Wr(o,c,h)}finally{vn=!1,(Gt!==null||Br!==null)&&(xr(),$r())}}function Yt(o,c){var h=o.stateNode;if(h===null)return null;var g=Qd(h);if(g===null)return null;h=g[c];e:switch(c){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(g=!g.disabled)||(o=o.type,g=!(o==="button"||o==="input"||o==="select"||o==="textarea")),o=!g;break e;default:o=!1}if(o)return null;if(h&&typeof h!="function")throw Error(r(231,c,typeof h));return h}var qr=!1;if(u)try{var Mt={};Object.defineProperty(Mt,"passive",{get:function(){qr=!0}}),window.addEventListener("test",Mt,Mt),window.removeEventListener("test",Mt,Mt)}catch{qr=!1}function Mr(o,c,h,g,w,N,P,F,G){var ve=Array.prototype.slice.call(arguments,3);try{c.apply(h,ve)}catch(Ae){this.onError(Ae)}}var ir=!1,dr=null,Er=!1,is=null,Yn={onError:function(o){ir=!0,dr=o}};function Vr(o,c,h,g,w,N,P,F,G){ir=!1,dr=null,Mr.apply(Yn,arguments)}function ks(o,c,h,g,w,N,P,F,G){if(Vr.apply(this,arguments),ir){if(ir){var ve=dr;ir=!1,dr=null}else throw Error(r(198));Er||(Er=!0,is=ve)}}function Fr(o){var c=o,h=o;if(o.alternate)for(;c.return;)c=c.return;else{o=c;do c=o,(c.flags&4098)!==0&&(h=c.return),o=c.return;while(o)}return c.tag===3?h:null}function Bs(o){if(o.tag===13){var c=o.memoizedState;if(c===null&&(o=o.alternate,o!==null&&(c=o.memoizedState)),c!==null)return c.dehydrated}return null}function sn(o){if(Fr(o)!==o)throw Error(r(188))}function Tt(o){var c=o.alternate;if(!c){if(c=Fr(o),c===null)throw Error(r(188));return c!==o?null:o}for(var h=o,g=c;;){var w=h.return;if(w===null)break;var N=w.alternate;if(N===null){if(g=w.return,g!==null){h=g;continue}break}if(w.child===N.child){for(N=w.child;N;){if(N===h)return sn(w),o;if(N===g)return sn(w),c;N=N.sibling}throw Error(r(188))}if(h.return!==g.return)h=w,g=N;else{for(var P=!1,F=w.child;F;){if(F===h){P=!0,h=w,g=N;break}if(F===g){P=!0,g=w,h=N;break}F=F.sibling}if(!P){for(F=N.child;F;){if(F===h){P=!0,h=N,g=w;break}if(F===g){P=!0,g=N,h=w;break}F=F.sibling}if(!P)throw Error(r(189))}}if(h.alternate!==g)throw Error(r(190))}if(h.tag!==3)throw Error(r(188));return h.stateNode.current===h?o:c}function an(o){return o=Tt(o),o!==null?fr(o):null}function fr(o){if(o.tag===5||o.tag===6)return o;for(o=o.child;o!==null;){var c=fr(o);if(c!==null)return c;o=o.sibling}return null}var Hr=t.unstable_scheduleCallback,on=t.unstable_cancelCallback,xn=t.unstable_shouldYield,Ns=t.unstable_requestPaint,Ft=t.unstable_now,_s=t.unstable_getCurrentPriorityLevel,ae=t.unstable_ImmediatePriority,ke=t.unstable_UserBlockingPriority,De=t.unstable_NormalPriority,Re=t.unstable_LowPriority,Ve=t.unstable_IdlePriority,Ne=null,ht=null;function pt(o){if(ht&&typeof ht.onCommitFiberRoot=="function")try{ht.onCommitFiberRoot(Ne,o,void 0,(o.current.flags&128)===128)}catch{}}var gt=Math.clz32?Math.clz32:Ar,Pe=Math.log,ar=Math.LN2;function Ar(o){return o>>>=0,o===0?32:31-(Pe(o)/ar|0)|0}var Pr=64,_t=4194304;function It(o){switch(o&-o){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return o&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return o}}function rr(o,c){var h=o.pendingLanes;if(h===0)return 0;var g=0,w=o.suspendedLanes,N=o.pingedLanes,P=h&268435455;if(P!==0){var F=P&~w;F!==0?g=It(F):(N&=P,N!==0&&(g=It(N)))}else P=h&~w,P!==0?g=It(P):N!==0&&(g=It(N));if(g===0)return 0;if(c!==0&&c!==g&&(c&w)===0&&(w=g&-g,N=c&-c,w>=N||w===16&&(N&4194240)!==0))return c;if((g&4)!==0&&(g|=h&16),c=o.entangledLanes,c!==0)for(o=o.entanglements,c&=g;0<c;)h=31-gt(c),w=1<<h,g|=o[h],c&=~w;return g}function Or(o,c){switch(o){case 1:case 2:case 4:return c+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return c+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function ra(o,c){for(var h=o.suspendedLanes,g=o.pingedLanes,w=o.expirationTimes,N=o.pendingLanes;0<N;){var P=31-gt(N),F=1<<P,G=w[P];G===-1?((F&h)===0||(F&g)!==0)&&(w[P]=Or(F,c)):G<=c&&(o.expiredLanes|=F),N&=~F}}function na(o){return o=o.pendingLanes&-1073741825,o!==0?o:o&1073741824?1073741824:0}function lo(){var o=Pr;return Pr<<=1,(Pr&4194240)===0&&(Pr=64),o}function Kr(o){for(var c=[],h=0;31>h;h++)c.push(o);return c}function Ai(o,c,h){o.pendingLanes|=c,c!==536870912&&(o.suspendedLanes=0,o.pingedLanes=0),o=o.eventTimes,c=31-gt(c),o[c]=h}function ka(o,c){var h=o.pendingLanes&~c;o.pendingLanes=c,o.suspendedLanes=0,o.pingedLanes=0,o.expiredLanes&=c,o.mutableReadLanes&=c,o.entangledLanes&=c,c=o.entanglements;var g=o.eventTimes;for(o=o.expirationTimes;0<h;){var w=31-gt(h),N=1<<w;c[w]=0,g[w]=-1,o[w]=-1,h&=~N}}function wn(o,c){var h=o.entangledLanes|=c;for(o=o.entanglements;h;){var g=31-gt(h),w=1<<g;w&c|o[g]&c&&(o[g]|=c),h&=~w}}var Ct=0;function ln(o){return o&=-o,1<o?4<o?(o&268435455)!==0?16:536870912:4:1}var Na,Lr,Ws,bn,Pi,ci=!1,Oi=[],Dn=null,ds=null,fs=null,qs=new Map,Ti=new Map,Cs=[],co="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function sa(o,c){switch(o){case"focusin":case"focusout":Dn=null;break;case"dragenter":case"dragleave":ds=null;break;case"mouseover":case"mouseout":fs=null;break;case"pointerover":case"pointerout":qs.delete(c.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ti.delete(c.pointerId)}}function Ii(o,c,h,g,w,N){return o===null||o.nativeEvent!==N?(o={blockedOn:c,domEventName:h,eventSystemFlags:g,nativeEvent:N,targetContainers:[w]},c!==null&&(c=gu(c),c!==null&&Lr(c)),o):(o.eventSystemFlags|=g,c=o.targetContainers,w!==null&&c.indexOf(w)===-1&&c.push(w),o)}function re(o,c,h,g,w){switch(c){case"focusin":return Dn=Ii(Dn,o,c,h,g,w),!0;case"dragenter":return ds=Ii(ds,o,c,h,g,w),!0;case"mouseover":return fs=Ii(fs,o,c,h,g,w),!0;case"pointerover":var N=w.pointerId;return qs.set(N,Ii(qs.get(N)||null,o,c,h,g,w)),!0;case"gotpointercapture":return N=w.pointerId,Ti.set(N,Ii(Ti.get(N)||null,o,c,h,g,w)),!0}return!1}function ze(o){var c=Ho(o.target);if(c!==null){var h=Fr(c);if(h!==null){if(c=h.tag,c===13){if(c=Bs(h),c!==null){o.blockedOn=c,Pi(o.priority,function(){Ws(h)});return}}else if(c===3&&h.stateNode.current.memoizedState.isDehydrated){o.blockedOn=h.tag===3?h.stateNode.containerInfo:null;return}}}o.blockedOn=null}function et(o){if(o.blockedOn!==null)return!1;for(var c=o.targetContainers;0<c.length;){var h=S(o.domEventName,o.eventSystemFlags,c[0],o.nativeEvent);if(h===null){h=o.nativeEvent;var g=new h.constructor(h.type,h);Ze=g,h.target.dispatchEvent(g),Ze=null}else return c=gu(h),c!==null&&Lr(c),o.blockedOn=h,!1;c.shift()}return!0}function Lt(o,c,h){et(o)&&h.delete(c)}function or(){ci=!1,Dn!==null&&et(Dn)&&(Dn=null),ds!==null&&et(ds)&&(ds=null),fs!==null&&et(fs)&&(fs=null),qs.forEach(Lt),Ti.forEach(Lt)}function Tr(o,c){o.blockedOn===c&&(o.blockedOn=null,ci||(ci=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,or)))}function jn(o){function c(w){return Tr(w,o)}if(0<Oi.length){Tr(Oi[0],o);for(var h=1;h<Oi.length;h++){var g=Oi[h];g.blockedOn===o&&(g.blockedOn=null)}}for(Dn!==null&&Tr(Dn,o),ds!==null&&Tr(ds,o),fs!==null&&Tr(fs,o),qs.forEach(c),Ti.forEach(c),h=0;h<Cs.length;h++)g=Cs[h],g.blockedOn===o&&(g.blockedOn=null);for(;0<Cs.length&&(h=Cs[0],h.blockedOn===null);)ze(h),h.blockedOn===null&&Cs.shift()}var lr=O.ReactCurrentBatchConfig,Di=!0;function uo(o,c,h,g){var w=Ct,N=lr.transition;lr.transition=null;try{Ct=1,$i(o,c,h,g)}finally{Ct=w,lr.transition=N}}function Ri(o,c,h,g){var w=Ct,N=lr.transition;lr.transition=null;try{Ct=4,$i(o,c,h,g)}finally{Ct=w,lr.transition=N}}function $i(o,c,h,g){if(Di){var w=S(o,c,h,g);if(w===null)Np(o,c,g,ia,h),sa(o,g);else if(re(w,o,c,h,g))g.stopPropagation();else if(sa(o,g),c&4&&-1<co.indexOf(o)){for(;w!==null;){var N=gu(w);if(N!==null&&Na(N),N=S(o,c,h,g),N===null&&Np(o,c,g,ia,h),N===w)break;w=N}w!==null&&g.stopPropagation()}else Np(o,c,g,null,h)}}var ia=null;function S(o,c,h,g){if(ia=null,o=Ot(g),o=Ho(o),o!==null)if(c=Fr(o),c===null)o=null;else if(h=c.tag,h===13){if(o=Bs(c),o!==null)return o;o=null}else if(h===3){if(c.stateNode.current.memoizedState.isDehydrated)return c.tag===3?c.stateNode.containerInfo:null;o=null}else c!==o&&(o=null);return ia=o,null}function I(o){switch(o){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(_s()){case ae:return 1;case ke:return 4;case De:case Re:return 16;case Ve:return 536870912;default:return 16}default:return 16}}var U=null,Y=null,ne=null;function W(){if(ne)return ne;var o,c=Y,h=c.length,g,w="value"in U?U.value:U.textContent,N=w.length;for(o=0;o<h&&c[o]===w[o];o++);var P=h-o;for(g=1;g<=P&&c[h-g]===w[N-g];g++);return ne=w.slice(o,1<g?1-g:void 0)}function $(o){var c=o.keyCode;return"charCode"in o?(o=o.charCode,o===0&&c===13&&(o=13)):o=c,o===10&&(o=13),32<=o||o===13?o:0}function _e(){return!0}function Oe(){return!1}function Ue(o){function c(h,g,w,N,P){this._reactName=h,this._targetInst=w,this.type=g,this.nativeEvent=N,this.target=P,this.currentTarget=null;for(var F in o)o.hasOwnProperty(F)&&(h=o[F],this[F]=h?h(N):N[F]);return this.isDefaultPrevented=(N.defaultPrevented!=null?N.defaultPrevented:N.returnValue===!1)?_e:Oe,this.isPropagationStopped=Oe,this}return ee(c.prototype,{preventDefault:function(){this.defaultPrevented=!0;var h=this.nativeEvent;h&&(h.preventDefault?h.preventDefault():typeof h.returnValue!="unknown"&&(h.returnValue=!1),this.isDefaultPrevented=_e)},stopPropagation:function(){var h=this.nativeEvent;h&&(h.stopPropagation?h.stopPropagation():typeof h.cancelBubble!="unknown"&&(h.cancelBubble=!0),this.isPropagationStopped=_e)},persist:function(){},isPersistent:_e}),c}var We={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(o){return o.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},st=Ue(We),Le=ee({},We,{view:0,detail:0}),wr=Ue(Le),zt,ot,Et,Ge=ee({},Le,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:mp,button:0,buttons:0,relatedTarget:function(o){return o.relatedTarget===void 0?o.fromElement===o.srcElement?o.toElement:o.fromElement:o.relatedTarget},movementX:function(o){return"movementX"in o?o.movementX:(o!==Et&&(Et&&o.type==="mousemove"?(zt=o.screenX-Et.screenX,ot=o.screenY-Et.screenY):ot=zt=0,Et=o),zt)},movementY:function(o){return"movementY"in o?o.movementY:ot}}),bt=Ue(Ge),St=ee({},Ge,{dataTransfer:0}),Jt=Ue(St),cr=ee({},Le,{relatedTarget:0}),Gr=Ue(cr),hs=ee({},We,{animationName:0,elapsedTime:0,pseudoElement:0}),Rn=Ue(hs),ui=ee({},We,{clipboardData:function(o){return"clipboardData"in o?o.clipboardData:window.clipboardData}}),hp=Ue(ui),LT=ee({},We,{data:0}),ab=Ue(LT),zT={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},UT={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},BT={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function WT(o){var c=this.nativeEvent;return c.getModifierState?c.getModifierState(o):(o=BT[o])?!!c[o]:!1}function mp(){return WT}var qT=ee({},Le,{key:function(o){if(o.key){var c=zT[o.key]||o.key;if(c!=="Unidentified")return c}return o.type==="keypress"?(o=$(o),o===13?"Enter":String.fromCharCode(o)):o.type==="keydown"||o.type==="keyup"?UT[o.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:mp,charCode:function(o){return o.type==="keypress"?$(o):0},keyCode:function(o){return o.type==="keydown"||o.type==="keyup"?o.keyCode:0},which:function(o){return o.type==="keypress"?$(o):o.type==="keydown"||o.type==="keyup"?o.keyCode:0}}),VT=Ue(qT),HT=ee({},Ge,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),ob=Ue(HT),KT=ee({},Le,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:mp}),GT=Ue(KT),YT=ee({},We,{propertyName:0,elapsedTime:0,pseudoElement:0}),JT=Ue(YT),XT=ee({},Ge,{deltaX:function(o){return"deltaX"in o?o.deltaX:"wheelDeltaX"in o?-o.wheelDeltaX:0},deltaY:function(o){return"deltaY"in o?o.deltaY:"wheelDeltaY"in o?-o.wheelDeltaY:"wheelDelta"in o?-o.wheelDelta:0},deltaZ:0,deltaMode:0}),QT=Ue(XT),ZT=[9,13,27,32],pp=u&&"CompositionEvent"in window,ou=null;u&&"documentMode"in document&&(ou=document.documentMode);var eI=u&&"TextEvent"in window&&!ou,lb=u&&(!pp||ou&&8<ou&&11>=ou),cb=" ",ub=!1;function db(o,c){switch(o){case"keyup":return ZT.indexOf(c.keyCode)!==-1;case"keydown":return c.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function fb(o){return o=o.detail,typeof o=="object"&&"data"in o?o.data:null}var Fl=!1;function tI(o,c){switch(o){case"compositionend":return fb(c);case"keypress":return c.which!==32?null:(ub=!0,cb);case"textInput":return o=c.data,o===cb&&ub?null:o;default:return null}}function rI(o,c){if(Fl)return o==="compositionend"||!pp&&db(o,c)?(o=W(),ne=Y=U=null,Fl=!1,o):null;switch(o){case"paste":return null;case"keypress":if(!(c.ctrlKey||c.altKey||c.metaKey)||c.ctrlKey&&c.altKey){if(c.char&&1<c.char.length)return c.char;if(c.which)return String.fromCharCode(c.which)}return null;case"compositionend":return lb&&c.locale!=="ko"?null:c.data;default:return null}}var nI={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function hb(o){var c=o&&o.nodeName&&o.nodeName.toLowerCase();return c==="input"?!!nI[o.type]:c==="textarea"}function mb(o,c,h,g){Ss(g),c=Yd(c,"onChange"),0<c.length&&(h=new st("onChange","change",null,h,g),o.push({event:h,listeners:c}))}var lu=null,cu=null;function sI(o){Tb(o,0)}function Vd(o){var c=Wl(o);if(V(c))return o}function iI(o,c){if(o==="change")return c}var pb=!1;if(u){var gp;if(u){var yp="oninput"in document;if(!yp){var gb=document.createElement("div");gb.setAttribute("oninput","return;"),yp=typeof gb.oninput=="function"}gp=yp}else gp=!1;pb=gp&&(!document.documentMode||9<document.documentMode)}function yb(){lu&&(lu.detachEvent("onpropertychange",vb),cu=lu=null)}function vb(o){if(o.propertyName==="value"&&Vd(cu)){var c=[];mb(c,cu,o,Ot(o)),Cr(sI,c)}}function aI(o,c,h){o==="focusin"?(yb(),lu=c,cu=h,lu.attachEvent("onpropertychange",vb)):o==="focusout"&&yb()}function oI(o){if(o==="selectionchange"||o==="keyup"||o==="keydown")return Vd(cu)}function lI(o,c){if(o==="click")return Vd(c)}function cI(o,c){if(o==="input"||o==="change")return Vd(c)}function uI(o,c){return o===c&&(o!==0||1/o===1/c)||o!==o&&c!==c}var Mi=typeof Object.is=="function"?Object.is:uI;function uu(o,c){if(Mi(o,c))return!0;if(typeof o!="object"||o===null||typeof c!="object"||c===null)return!1;var h=Object.keys(o),g=Object.keys(c);if(h.length!==g.length)return!1;for(g=0;g<h.length;g++){var w=h[g];if(!d.call(c,w)||!Mi(o[w],c[w]))return!1}return!0}function xb(o){for(;o&&o.firstChild;)o=o.firstChild;return o}function wb(o,c){var h=xb(o);o=0;for(var g;h;){if(h.nodeType===3){if(g=o+h.textContent.length,o<=c&&g>=c)return{node:h,offset:c-o};o=g}e:{for(;h;){if(h.nextSibling){h=h.nextSibling;break e}h=h.parentNode}h=void 0}h=xb(h)}}function bb(o,c){return o&&c?o===c?!0:o&&o.nodeType===3?!1:c&&c.nodeType===3?bb(o,c.parentNode):"contains"in o?o.contains(c):o.compareDocumentPosition?!!(o.compareDocumentPosition(c)&16):!1:!1}function jb(){for(var o=window,c=Fe();c instanceof o.HTMLIFrameElement;){try{var h=typeof c.contentWindow.location.href=="string"}catch{h=!1}if(h)o=c.contentWindow;else break;c=Fe(o.document)}return c}function vp(o){var c=o&&o.nodeName&&o.nodeName.toLowerCase();return c&&(c==="input"&&(o.type==="text"||o.type==="search"||o.type==="tel"||o.type==="url"||o.type==="password")||c==="textarea"||o.contentEditable==="true")}function dI(o){var c=jb(),h=o.focusedElem,g=o.selectionRange;if(c!==h&&h&&h.ownerDocument&&bb(h.ownerDocument.documentElement,h)){if(g!==null&&vp(h)){if(c=g.start,o=g.end,o===void 0&&(o=c),"selectionStart"in h)h.selectionStart=c,h.selectionEnd=Math.min(o,h.value.length);else if(o=(c=h.ownerDocument||document)&&c.defaultView||window,o.getSelection){o=o.getSelection();var w=h.textContent.length,N=Math.min(g.start,w);g=g.end===void 0?N:Math.min(g.end,w),!o.extend&&N>g&&(w=g,g=N,N=w),w=wb(h,N);var P=wb(h,g);w&&P&&(o.rangeCount!==1||o.anchorNode!==w.node||o.anchorOffset!==w.offset||o.focusNode!==P.node||o.focusOffset!==P.offset)&&(c=c.createRange(),c.setStart(w.node,w.offset),o.removeAllRanges(),N>g?(o.addRange(c),o.extend(P.node,P.offset)):(c.setEnd(P.node,P.offset),o.addRange(c)))}}for(c=[],o=h;o=o.parentNode;)o.nodeType===1&&c.push({element:o,left:o.scrollLeft,top:o.scrollTop});for(typeof h.focus=="function"&&h.focus(),h=0;h<c.length;h++)o=c[h],o.element.scrollLeft=o.left,o.element.scrollTop=o.top}}var fI=u&&"documentMode"in document&&11>=document.documentMode,Ll=null,xp=null,du=null,wp=!1;function Sb(o,c,h){var g=h.window===h?h.document:h.nodeType===9?h:h.ownerDocument;wp||Ll==null||Ll!==Fe(g)||(g=Ll,"selectionStart"in g&&vp(g)?g={start:g.selectionStart,end:g.selectionEnd}:(g=(g.ownerDocument&&g.ownerDocument.defaultView||window).getSelection(),g={anchorNode:g.anchorNode,anchorOffset:g.anchorOffset,focusNode:g.focusNode,focusOffset:g.focusOffset}),du&&uu(du,g)||(du=g,g=Yd(xp,"onSelect"),0<g.length&&(c=new st("onSelect","select",null,c,h),o.push({event:c,listeners:g}),c.target=Ll)))}function Hd(o,c){var h={};return h[o.toLowerCase()]=c.toLowerCase(),h["Webkit"+o]="webkit"+c,h["Moz"+o]="moz"+c,h}var zl={animationend:Hd("Animation","AnimationEnd"),animationiteration:Hd("Animation","AnimationIteration"),animationstart:Hd("Animation","AnimationStart"),transitionend:Hd("Transition","TransitionEnd")},bp={},kb={};u&&(kb=document.createElement("div").style,"AnimationEvent"in window||(delete zl.animationend.animation,delete zl.animationiteration.animation,delete zl.animationstart.animation),"TransitionEvent"in window||delete zl.transitionend.transition);function Kd(o){if(bp[o])return bp[o];if(!zl[o])return o;var c=zl[o],h;for(h in c)if(c.hasOwnProperty(h)&&h in kb)return bp[o]=c[h];return o}var Nb=Kd("animationend"),_b=Kd("animationiteration"),Cb=Kd("animationstart"),Eb=Kd("transitionend"),Ab=new Map,Pb="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function fo(o,c){Ab.set(o,c),i(c,[o])}for(var jp=0;jp<Pb.length;jp++){var Sp=Pb[jp],hI=Sp.toLowerCase(),mI=Sp[0].toUpperCase()+Sp.slice(1);fo(hI,"on"+mI)}fo(Nb,"onAnimationEnd"),fo(_b,"onAnimationIteration"),fo(Cb,"onAnimationStart"),fo("dblclick","onDoubleClick"),fo("focusin","onFocus"),fo("focusout","onBlur"),fo(Eb,"onTransitionEnd"),l("onMouseEnter",["mouseout","mouseover"]),l("onMouseLeave",["mouseout","mouseover"]),l("onPointerEnter",["pointerout","pointerover"]),l("onPointerLeave",["pointerout","pointerover"]),i("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),i("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),i("onBeforeInput",["compositionend","keypress","textInput","paste"]),i("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),i("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),i("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var fu="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),pI=new Set("cancel close invalid load scroll toggle".split(" ").concat(fu));function Ob(o,c,h){var g=o.type||"unknown-event";o.currentTarget=h,ks(g,c,void 0,o),o.currentTarget=null}function Tb(o,c){c=(c&4)!==0;for(var h=0;h<o.length;h++){var g=o[h],w=g.event;g=g.listeners;e:{var N=void 0;if(c)for(var P=g.length-1;0<=P;P--){var F=g[P],G=F.instance,ve=F.currentTarget;if(F=F.listener,G!==N&&w.isPropagationStopped())break e;Ob(w,F,ve),N=G}else for(P=0;P<g.length;P++){if(F=g[P],G=F.instance,ve=F.currentTarget,F=F.listener,G!==N&&w.isPropagationStopped())break e;Ob(w,F,ve),N=G}}}if(Er)throw o=is,Er=!1,is=null,o}function br(o,c){var h=c[Op];h===void 0&&(h=c[Op]=new Set);var g=o+"__bubble";h.has(g)||(Ib(c,o,2,!1),h.add(g))}function kp(o,c,h){var g=0;c&&(g|=4),Ib(h,o,g,c)}var Gd="_reactListening"+Math.random().toString(36).slice(2);function hu(o){if(!o[Gd]){o[Gd]=!0,n.forEach(function(h){h!=="selectionchange"&&(pI.has(h)||kp(h,!1,o),kp(h,!0,o))});var c=o.nodeType===9?o:o.ownerDocument;c===null||c[Gd]||(c[Gd]=!0,kp("selectionchange",!1,c))}}function Ib(o,c,h,g){switch(I(c)){case 1:var w=uo;break;case 4:w=Ri;break;default:w=$i}h=w.bind(null,c,h,o),w=void 0,!qr||c!=="touchstart"&&c!=="touchmove"&&c!=="wheel"||(w=!0),g?w!==void 0?o.addEventListener(c,h,{capture:!0,passive:w}):o.addEventListener(c,h,!0):w!==void 0?o.addEventListener(c,h,{passive:w}):o.addEventListener(c,h,!1)}function Np(o,c,h,g,w){var N=g;if((c&1)===0&&(c&2)===0&&g!==null)e:for(;;){if(g===null)return;var P=g.tag;if(P===3||P===4){var F=g.stateNode.containerInfo;if(F===w||F.nodeType===8&&F.parentNode===w)break;if(P===4)for(P=g.return;P!==null;){var G=P.tag;if((G===3||G===4)&&(G=P.stateNode.containerInfo,G===w||G.nodeType===8&&G.parentNode===w))return;P=P.return}for(;F!==null;){if(P=Ho(F),P===null)return;if(G=P.tag,G===5||G===6){g=N=P;continue e}F=F.parentNode}}g=g.return}Cr(function(){var ve=N,Ae=Ot(h),Ie=[];e:{var Ee=Ab.get(o);if(Ee!==void 0){var Ke=st,Xe=o;switch(o){case"keypress":if($(h)===0)break e;case"keydown":case"keyup":Ke=VT;break;case"focusin":Xe="focus",Ke=Gr;break;case"focusout":Xe="blur",Ke=Gr;break;case"beforeblur":case"afterblur":Ke=Gr;break;case"click":if(h.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Ke=bt;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Ke=Jt;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Ke=GT;break;case Nb:case _b:case Cb:Ke=Rn;break;case Eb:Ke=JT;break;case"scroll":Ke=wr;break;case"wheel":Ke=QT;break;case"copy":case"cut":case"paste":Ke=hp;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Ke=ob}var Qe=(c&4)!==0,Xr=!Qe&&o==="scroll",fe=Qe?Ee!==null?Ee+"Capture":null:Ee;Qe=[];for(var te=ve,he;te!==null;){he=te;var Me=he.stateNode;if(he.tag===5&&Me!==null&&(he=Me,fe!==null&&(Me=Yt(te,fe),Me!=null&&Qe.push(mu(te,Me,he)))),Xr)break;te=te.return}0<Qe.length&&(Ee=new Ke(Ee,Xe,null,h,Ae),Ie.push({event:Ee,listeners:Qe}))}}if((c&7)===0){e:{if(Ee=o==="mouseover"||o==="pointerover",Ke=o==="mouseout"||o==="pointerout",Ee&&h!==Ze&&(Xe=h.relatedTarget||h.fromElement)&&(Ho(Xe)||Xe[_a]))break e;if((Ke||Ee)&&(Ee=Ae.window===Ae?Ae:(Ee=Ae.ownerDocument)?Ee.defaultView||Ee.parentWindow:window,Ke?(Xe=h.relatedTarget||h.toElement,Ke=ve,Xe=Xe?Ho(Xe):null,Xe!==null&&(Xr=Fr(Xe),Xe!==Xr||Xe.tag!==5&&Xe.tag!==6)&&(Xe=null)):(Ke=null,Xe=ve),Ke!==Xe)){if(Qe=bt,Me="onMouseLeave",fe="onMouseEnter",te="mouse",(o==="pointerout"||o==="pointerover")&&(Qe=ob,Me="onPointerLeave",fe="onPointerEnter",te="pointer"),Xr=Ke==null?Ee:Wl(Ke),he=Xe==null?Ee:Wl(Xe),Ee=new Qe(Me,te+"leave",Ke,h,Ae),Ee.target=Xr,Ee.relatedTarget=he,Me=null,Ho(Ae)===ve&&(Qe=new Qe(fe,te+"enter",Xe,h,Ae),Qe.target=he,Qe.relatedTarget=Xr,Me=Qe),Xr=Me,Ke&&Xe)t:{for(Qe=Ke,fe=Xe,te=0,he=Qe;he;he=Ul(he))te++;for(he=0,Me=fe;Me;Me=Ul(Me))he++;for(;0<te-he;)Qe=Ul(Qe),te--;for(;0<he-te;)fe=Ul(fe),he--;for(;te--;){if(Qe===fe||fe!==null&&Qe===fe.alternate)break t;Qe=Ul(Qe),fe=Ul(fe)}Qe=null}else Qe=null;Ke!==null&&Db(Ie,Ee,Ke,Qe,!1),Xe!==null&&Xr!==null&&Db(Ie,Xr,Xe,Qe,!0)}}e:{if(Ee=ve?Wl(ve):window,Ke=Ee.nodeName&&Ee.nodeName.toLowerCase(),Ke==="select"||Ke==="input"&&Ee.type==="file")var tt=iI;else if(hb(Ee))if(pb)tt=cI;else{tt=oI;var lt=aI}else(Ke=Ee.nodeName)&&Ke.toLowerCase()==="input"&&(Ee.type==="checkbox"||Ee.type==="radio")&&(tt=lI);if(tt&&(tt=tt(o,ve))){mb(Ie,tt,h,Ae);break e}lt&&lt(o,Ee,ve),o==="focusout"&&(lt=Ee._wrapperState)&&lt.controlled&&Ee.type==="number"&&Xt(Ee,"number",Ee.value)}switch(lt=ve?Wl(ve):window,o){case"focusin":(hb(lt)||lt.contentEditable==="true")&&(Ll=lt,xp=ve,du=null);break;case"focusout":du=xp=Ll=null;break;case"mousedown":wp=!0;break;case"contextmenu":case"mouseup":case"dragend":wp=!1,Sb(Ie,h,Ae);break;case"selectionchange":if(fI)break;case"keydown":case"keyup":Sb(Ie,h,Ae)}var ct;if(pp)e:{switch(o){case"compositionstart":var vt="onCompositionStart";break e;case"compositionend":vt="onCompositionEnd";break e;case"compositionupdate":vt="onCompositionUpdate";break e}vt=void 0}else Fl?db(o,h)&&(vt="onCompositionEnd"):o==="keydown"&&h.keyCode===229&&(vt="onCompositionStart");vt&&(lb&&h.locale!=="ko"&&(Fl||vt!=="onCompositionStart"?vt==="onCompositionEnd"&&Fl&&(ct=W()):(U=Ae,Y="value"in U?U.value:U.textContent,Fl=!0)),lt=Yd(ve,vt),0<lt.length&&(vt=new ab(vt,o,null,h,Ae),Ie.push({event:vt,listeners:lt}),ct?vt.data=ct:(ct=fb(h),ct!==null&&(vt.data=ct)))),(ct=eI?tI(o,h):rI(o,h))&&(ve=Yd(ve,"onBeforeInput"),0<ve.length&&(Ae=new ab("onBeforeInput","beforeinput",null,h,Ae),Ie.push({event:Ae,listeners:ve}),Ae.data=ct))}Tb(Ie,c)})}function mu(o,c,h){return{instance:o,listener:c,currentTarget:h}}function Yd(o,c){for(var h=c+"Capture",g=[];o!==null;){var w=o,N=w.stateNode;w.tag===5&&N!==null&&(w=N,N=Yt(o,h),N!=null&&g.unshift(mu(o,N,w)),N=Yt(o,c),N!=null&&g.push(mu(o,N,w))),o=o.return}return g}function Ul(o){if(o===null)return null;do o=o.return;while(o&&o.tag!==5);return o||null}function Db(o,c,h,g,w){for(var N=c._reactName,P=[];h!==null&&h!==g;){var F=h,G=F.alternate,ve=F.stateNode;if(G!==null&&G===g)break;F.tag===5&&ve!==null&&(F=ve,w?(G=Yt(h,N),G!=null&&P.unshift(mu(h,G,F))):w||(G=Yt(h,N),G!=null&&P.push(mu(h,G,F)))),h=h.return}P.length!==0&&o.push({event:c,listeners:P})}var gI=/\r\n?/g,yI=/\u0000|\uFFFD/g;function Rb(o){return(typeof o=="string"?o:""+o).replace(gI,`
`).replace(yI,"")}function Jd(o,c,h){if(c=Rb(c),Rb(o)!==c&&h)throw Error(r(425))}function Xd(){}var _p=null,Cp=null;function Ep(o,c){return o==="textarea"||o==="noscript"||typeof c.children=="string"||typeof c.children=="number"||typeof c.dangerouslySetInnerHTML=="object"&&c.dangerouslySetInnerHTML!==null&&c.dangerouslySetInnerHTML.__html!=null}var Ap=typeof setTimeout=="function"?setTimeout:void 0,vI=typeof clearTimeout=="function"?clearTimeout:void 0,$b=typeof Promise=="function"?Promise:void 0,xI=typeof queueMicrotask=="function"?queueMicrotask:typeof $b<"u"?function(o){return $b.resolve(null).then(o).catch(wI)}:Ap;function wI(o){setTimeout(function(){throw o})}function Pp(o,c){var h=c,g=0;do{var w=h.nextSibling;if(o.removeChild(h),w&&w.nodeType===8)if(h=w.data,h==="/$"){if(g===0){o.removeChild(w),jn(c);return}g--}else h!=="$"&&h!=="$?"&&h!=="$!"||g++;h=w}while(h);jn(c)}function ho(o){for(;o!=null;o=o.nextSibling){var c=o.nodeType;if(c===1||c===3)break;if(c===8){if(c=o.data,c==="$"||c==="$!"||c==="$?")break;if(c==="/$")return null}}return o}function Mb(o){o=o.previousSibling;for(var c=0;o;){if(o.nodeType===8){var h=o.data;if(h==="$"||h==="$!"||h==="$?"){if(c===0)return o;c--}else h==="/$"&&c++}o=o.previousSibling}return null}var Bl=Math.random().toString(36).slice(2),aa="__reactFiber$"+Bl,pu="__reactProps$"+Bl,_a="__reactContainer$"+Bl,Op="__reactEvents$"+Bl,bI="__reactListeners$"+Bl,jI="__reactHandles$"+Bl;function Ho(o){var c=o[aa];if(c)return c;for(var h=o.parentNode;h;){if(c=h[_a]||h[aa]){if(h=c.alternate,c.child!==null||h!==null&&h.child!==null)for(o=Mb(o);o!==null;){if(h=o[aa])return h;o=Mb(o)}return c}o=h,h=o.parentNode}return null}function gu(o){return o=o[aa]||o[_a],!o||o.tag!==5&&o.tag!==6&&o.tag!==13&&o.tag!==3?null:o}function Wl(o){if(o.tag===5||o.tag===6)return o.stateNode;throw Error(r(33))}function Qd(o){return o[pu]||null}var Tp=[],ql=-1;function mo(o){return{current:o}}function jr(o){0>ql||(o.current=Tp[ql],Tp[ql]=null,ql--)}function hr(o,c){ql++,Tp[ql]=o.current,o.current=c}var po={},as=mo(po),Es=mo(!1),Ko=po;function Vl(o,c){var h=o.type.contextTypes;if(!h)return po;var g=o.stateNode;if(g&&g.__reactInternalMemoizedUnmaskedChildContext===c)return g.__reactInternalMemoizedMaskedChildContext;var w={},N;for(N in h)w[N]=c[N];return g&&(o=o.stateNode,o.__reactInternalMemoizedUnmaskedChildContext=c,o.__reactInternalMemoizedMaskedChildContext=w),w}function As(o){return o=o.childContextTypes,o!=null}function Zd(){jr(Es),jr(as)}function Fb(o,c,h){if(as.current!==po)throw Error(r(168));hr(as,c),hr(Es,h)}function Lb(o,c,h){var g=o.stateNode;if(c=c.childContextTypes,typeof g.getChildContext!="function")return h;g=g.getChildContext();for(var w in g)if(!(w in c))throw Error(r(108,de(o)||"Unknown",w));return ee({},h,g)}function ef(o){return o=(o=o.stateNode)&&o.__reactInternalMemoizedMergedChildContext||po,Ko=as.current,hr(as,o),hr(Es,Es.current),!0}function zb(o,c,h){var g=o.stateNode;if(!g)throw Error(r(169));h?(o=Lb(o,c,Ko),g.__reactInternalMemoizedMergedChildContext=o,jr(Es),jr(as),hr(as,o)):jr(Es),hr(Es,h)}var Ca=null,tf=!1,Ip=!1;function Ub(o){Ca===null?Ca=[o]:Ca.push(o)}function SI(o){tf=!0,Ub(o)}function go(){if(!Ip&&Ca!==null){Ip=!0;var o=0,c=Ct;try{var h=Ca;for(Ct=1;o<h.length;o++){var g=h[o];do g=g(!0);while(g!==null)}Ca=null,tf=!1}catch(w){throw Ca!==null&&(Ca=Ca.slice(o+1)),Hr(ae,go),w}finally{Ct=c,Ip=!1}}return null}var Hl=[],Kl=0,rf=null,nf=0,di=[],fi=0,Go=null,Ea=1,Aa="";function Yo(o,c){Hl[Kl++]=nf,Hl[Kl++]=rf,rf=o,nf=c}function Bb(o,c,h){di[fi++]=Ea,di[fi++]=Aa,di[fi++]=Go,Go=o;var g=Ea;o=Aa;var w=32-gt(g)-1;g&=~(1<<w),h+=1;var N=32-gt(c)+w;if(30<N){var P=w-w%5;N=(g&(1<<P)-1).toString(32),g>>=P,w-=P,Ea=1<<32-gt(c)+w|h<<w|g,Aa=N+o}else Ea=1<<N|h<<w|g,Aa=o}function Dp(o){o.return!==null&&(Yo(o,1),Bb(o,1,0))}function Rp(o){for(;o===rf;)rf=Hl[--Kl],Hl[Kl]=null,nf=Hl[--Kl],Hl[Kl]=null;for(;o===Go;)Go=di[--fi],di[fi]=null,Aa=di[--fi],di[fi]=null,Ea=di[--fi],di[fi]=null}var Vs=null,Hs=null,Ir=!1,Fi=null;function Wb(o,c){var h=gi(5,null,null,0);h.elementType="DELETED",h.stateNode=c,h.return=o,c=o.deletions,c===null?(o.deletions=[h],o.flags|=16):c.push(h)}function qb(o,c){switch(o.tag){case 5:var h=o.type;return c=c.nodeType!==1||h.toLowerCase()!==c.nodeName.toLowerCase()?null:c,c!==null?(o.stateNode=c,Vs=o,Hs=ho(c.firstChild),!0):!1;case 6:return c=o.pendingProps===""||c.nodeType!==3?null:c,c!==null?(o.stateNode=c,Vs=o,Hs=null,!0):!1;case 13:return c=c.nodeType!==8?null:c,c!==null?(h=Go!==null?{id:Ea,overflow:Aa}:null,o.memoizedState={dehydrated:c,treeContext:h,retryLane:1073741824},h=gi(18,null,null,0),h.stateNode=c,h.return=o,o.child=h,Vs=o,Hs=null,!0):!1;default:return!1}}function $p(o){return(o.mode&1)!==0&&(o.flags&128)===0}function Mp(o){if(Ir){var c=Hs;if(c){var h=c;if(!qb(o,c)){if($p(o))throw Error(r(418));c=ho(h.nextSibling);var g=Vs;c&&qb(o,c)?Wb(g,h):(o.flags=o.flags&-4097|2,Ir=!1,Vs=o)}}else{if($p(o))throw Error(r(418));o.flags=o.flags&-4097|2,Ir=!1,Vs=o}}}function Vb(o){for(o=o.return;o!==null&&o.tag!==5&&o.tag!==3&&o.tag!==13;)o=o.return;Vs=o}function sf(o){if(o!==Vs)return!1;if(!Ir)return Vb(o),Ir=!0,!1;var c;if((c=o.tag!==3)&&!(c=o.tag!==5)&&(c=o.type,c=c!=="head"&&c!=="body"&&!Ep(o.type,o.memoizedProps)),c&&(c=Hs)){if($p(o))throw Hb(),Error(r(418));for(;c;)Wb(o,c),c=ho(c.nextSibling)}if(Vb(o),o.tag===13){if(o=o.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(r(317));e:{for(o=o.nextSibling,c=0;o;){if(o.nodeType===8){var h=o.data;if(h==="/$"){if(c===0){Hs=ho(o.nextSibling);break e}c--}else h!=="$"&&h!=="$!"&&h!=="$?"||c++}o=o.nextSibling}Hs=null}}else Hs=Vs?ho(o.stateNode.nextSibling):null;return!0}function Hb(){for(var o=Hs;o;)o=ho(o.nextSibling)}function Gl(){Hs=Vs=null,Ir=!1}function Fp(o){Fi===null?Fi=[o]:Fi.push(o)}var kI=O.ReactCurrentBatchConfig;function yu(o,c,h){if(o=h.ref,o!==null&&typeof o!="function"&&typeof o!="object"){if(h._owner){if(h=h._owner,h){if(h.tag!==1)throw Error(r(309));var g=h.stateNode}if(!g)throw Error(r(147,o));var w=g,N=""+o;return c!==null&&c.ref!==null&&typeof c.ref=="function"&&c.ref._stringRef===N?c.ref:(c=function(P){var F=w.refs;P===null?delete F[N]:F[N]=P},c._stringRef=N,c)}if(typeof o!="string")throw Error(r(284));if(!h._owner)throw Error(r(290,o))}return o}function af(o,c){throw o=Object.prototype.toString.call(c),Error(r(31,o==="[object Object]"?"object with keys {"+Object.keys(c).join(", ")+"}":o))}function Kb(o){var c=o._init;return c(o._payload)}function Gb(o){function c(fe,te){if(o){var he=fe.deletions;he===null?(fe.deletions=[te],fe.flags|=16):he.push(te)}}function h(fe,te){if(!o)return null;for(;te!==null;)c(fe,te),te=te.sibling;return null}function g(fe,te){for(fe=new Map;te!==null;)te.key!==null?fe.set(te.key,te):fe.set(te.index,te),te=te.sibling;return fe}function w(fe,te){return fe=ko(fe,te),fe.index=0,fe.sibling=null,fe}function N(fe,te,he){return fe.index=he,o?(he=fe.alternate,he!==null?(he=he.index,he<te?(fe.flags|=2,te):he):(fe.flags|=2,te)):(fe.flags|=1048576,te)}function P(fe){return o&&fe.alternate===null&&(fe.flags|=2),fe}function F(fe,te,he,Me){return te===null||te.tag!==6?(te=Ag(he,fe.mode,Me),te.return=fe,te):(te=w(te,he),te.return=fe,te)}function G(fe,te,he,Me){var tt=he.type;return tt===L?Ae(fe,te,he.props.children,Me,he.key):te!==null&&(te.elementType===tt||typeof tt=="object"&&tt!==null&&tt.$$typeof===B&&Kb(tt)===te.type)?(Me=w(te,he.props),Me.ref=yu(fe,te,he),Me.return=fe,Me):(Me=Pf(he.type,he.key,he.props,null,fe.mode,Me),Me.ref=yu(fe,te,he),Me.return=fe,Me)}function ve(fe,te,he,Me){return te===null||te.tag!==4||te.stateNode.containerInfo!==he.containerInfo||te.stateNode.implementation!==he.implementation?(te=Pg(he,fe.mode,Me),te.return=fe,te):(te=w(te,he.children||[]),te.return=fe,te)}function Ae(fe,te,he,Me,tt){return te===null||te.tag!==7?(te=nl(he,fe.mode,Me,tt),te.return=fe,te):(te=w(te,he),te.return=fe,te)}function Ie(fe,te,he){if(typeof te=="string"&&te!==""||typeof te=="number")return te=Ag(""+te,fe.mode,he),te.return=fe,te;if(typeof te=="object"&&te!==null){switch(te.$$typeof){case T:return he=Pf(te.type,te.key,te.props,null,fe.mode,he),he.ref=yu(fe,null,te),he.return=fe,he;case A:return te=Pg(te,fe.mode,he),te.return=fe,te;case B:var Me=te._init;return Ie(fe,Me(te._payload),he)}if(M(te)||X(te))return te=nl(te,fe.mode,he,null),te.return=fe,te;af(fe,te)}return null}function Ee(fe,te,he,Me){var tt=te!==null?te.key:null;if(typeof he=="string"&&he!==""||typeof he=="number")return tt!==null?null:F(fe,te,""+he,Me);if(typeof he=="object"&&he!==null){switch(he.$$typeof){case T:return he.key===tt?G(fe,te,he,Me):null;case A:return he.key===tt?ve(fe,te,he,Me):null;case B:return tt=he._init,Ee(fe,te,tt(he._payload),Me)}if(M(he)||X(he))return tt!==null?null:Ae(fe,te,he,Me,null);af(fe,he)}return null}function Ke(fe,te,he,Me,tt){if(typeof Me=="string"&&Me!==""||typeof Me=="number")return fe=fe.get(he)||null,F(te,fe,""+Me,tt);if(typeof Me=="object"&&Me!==null){switch(Me.$$typeof){case T:return fe=fe.get(Me.key===null?he:Me.key)||null,G(te,fe,Me,tt);case A:return fe=fe.get(Me.key===null?he:Me.key)||null,ve(te,fe,Me,tt);case B:var lt=Me._init;return Ke(fe,te,he,lt(Me._payload),tt)}if(M(Me)||X(Me))return fe=fe.get(he)||null,Ae(te,fe,Me,tt,null);af(te,Me)}return null}function Xe(fe,te,he,Me){for(var tt=null,lt=null,ct=te,vt=te=0,Fn=null;ct!==null&&vt<he.length;vt++){ct.index>vt?(Fn=ct,ct=null):Fn=ct.sibling;var qt=Ee(fe,ct,he[vt],Me);if(qt===null){ct===null&&(ct=Fn);break}o&&ct&&qt.alternate===null&&c(fe,ct),te=N(qt,te,vt),lt===null?tt=qt:lt.sibling=qt,lt=qt,ct=Fn}if(vt===he.length)return h(fe,ct),Ir&&Yo(fe,vt),tt;if(ct===null){for(;vt<he.length;vt++)ct=Ie(fe,he[vt],Me),ct!==null&&(te=N(ct,te,vt),lt===null?tt=ct:lt.sibling=ct,lt=ct);return Ir&&Yo(fe,vt),tt}for(ct=g(fe,ct);vt<he.length;vt++)Fn=Ke(ct,fe,vt,he[vt],Me),Fn!==null&&(o&&Fn.alternate!==null&&ct.delete(Fn.key===null?vt:Fn.key),te=N(Fn,te,vt),lt===null?tt=Fn:lt.sibling=Fn,lt=Fn);return o&&ct.forEach(function(No){return c(fe,No)}),Ir&&Yo(fe,vt),tt}function Qe(fe,te,he,Me){var tt=X(he);if(typeof tt!="function")throw Error(r(150));if(he=tt.call(he),he==null)throw Error(r(151));for(var lt=tt=null,ct=te,vt=te=0,Fn=null,qt=he.next();ct!==null&&!qt.done;vt++,qt=he.next()){ct.index>vt?(Fn=ct,ct=null):Fn=ct.sibling;var No=Ee(fe,ct,qt.value,Me);if(No===null){ct===null&&(ct=Fn);break}o&&ct&&No.alternate===null&&c(fe,ct),te=N(No,te,vt),lt===null?tt=No:lt.sibling=No,lt=No,ct=Fn}if(qt.done)return h(fe,ct),Ir&&Yo(fe,vt),tt;if(ct===null){for(;!qt.done;vt++,qt=he.next())qt=Ie(fe,qt.value,Me),qt!==null&&(te=N(qt,te,vt),lt===null?tt=qt:lt.sibling=qt,lt=qt);return Ir&&Yo(fe,vt),tt}for(ct=g(fe,ct);!qt.done;vt++,qt=he.next())qt=Ke(ct,fe,vt,qt.value,Me),qt!==null&&(o&&qt.alternate!==null&&ct.delete(qt.key===null?vt:qt.key),te=N(qt,te,vt),lt===null?tt=qt:lt.sibling=qt,lt=qt);return o&&ct.forEach(function(nD){return c(fe,nD)}),Ir&&Yo(fe,vt),tt}function Xr(fe,te,he,Me){if(typeof he=="object"&&he!==null&&he.type===L&&he.key===null&&(he=he.props.children),typeof he=="object"&&he!==null){switch(he.$$typeof){case T:e:{for(var tt=he.key,lt=te;lt!==null;){if(lt.key===tt){if(tt=he.type,tt===L){if(lt.tag===7){h(fe,lt.sibling),te=w(lt,he.props.children),te.return=fe,fe=te;break e}}else if(lt.elementType===tt||typeof tt=="object"&&tt!==null&&tt.$$typeof===B&&Kb(tt)===lt.type){h(fe,lt.sibling),te=w(lt,he.props),te.ref=yu(fe,lt,he),te.return=fe,fe=te;break e}h(fe,lt);break}else c(fe,lt);lt=lt.sibling}he.type===L?(te=nl(he.props.children,fe.mode,Me,he.key),te.return=fe,fe=te):(Me=Pf(he.type,he.key,he.props,null,fe.mode,Me),Me.ref=yu(fe,te,he),Me.return=fe,fe=Me)}return P(fe);case A:e:{for(lt=he.key;te!==null;){if(te.key===lt)if(te.tag===4&&te.stateNode.containerInfo===he.containerInfo&&te.stateNode.implementation===he.implementation){h(fe,te.sibling),te=w(te,he.children||[]),te.return=fe,fe=te;break e}else{h(fe,te);break}else c(fe,te);te=te.sibling}te=Pg(he,fe.mode,Me),te.return=fe,fe=te}return P(fe);case B:return lt=he._init,Xr(fe,te,lt(he._payload),Me)}if(M(he))return Xe(fe,te,he,Me);if(X(he))return Qe(fe,te,he,Me);af(fe,he)}return typeof he=="string"&&he!==""||typeof he=="number"?(he=""+he,te!==null&&te.tag===6?(h(fe,te.sibling),te=w(te,he),te.return=fe,fe=te):(h(fe,te),te=Ag(he,fe.mode,Me),te.return=fe,fe=te),P(fe)):h(fe,te)}return Xr}var Yl=Gb(!0),Yb=Gb(!1),of=mo(null),lf=null,Jl=null,Lp=null;function zp(){Lp=Jl=lf=null}function Up(o){var c=of.current;jr(of),o._currentValue=c}function Bp(o,c,h){for(;o!==null;){var g=o.alternate;if((o.childLanes&c)!==c?(o.childLanes|=c,g!==null&&(g.childLanes|=c)):g!==null&&(g.childLanes&c)!==c&&(g.childLanes|=c),o===h)break;o=o.return}}function Xl(o,c){lf=o,Lp=Jl=null,o=o.dependencies,o!==null&&o.firstContext!==null&&((o.lanes&c)!==0&&(Ps=!0),o.firstContext=null)}function hi(o){var c=o._currentValue;if(Lp!==o)if(o={context:o,memoizedValue:c,next:null},Jl===null){if(lf===null)throw Error(r(308));Jl=o,lf.dependencies={lanes:0,firstContext:o}}else Jl=Jl.next=o;return c}var Jo=null;function Wp(o){Jo===null?Jo=[o]:Jo.push(o)}function Jb(o,c,h,g){var w=c.interleaved;return w===null?(h.next=h,Wp(c)):(h.next=w.next,w.next=h),c.interleaved=h,Pa(o,g)}function Pa(o,c){o.lanes|=c;var h=o.alternate;for(h!==null&&(h.lanes|=c),h=o,o=o.return;o!==null;)o.childLanes|=c,h=o.alternate,h!==null&&(h.childLanes|=c),h=o,o=o.return;return h.tag===3?h.stateNode:null}var yo=!1;function qp(o){o.updateQueue={baseState:o.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Xb(o,c){o=o.updateQueue,c.updateQueue===o&&(c.updateQueue={baseState:o.baseState,firstBaseUpdate:o.firstBaseUpdate,lastBaseUpdate:o.lastBaseUpdate,shared:o.shared,effects:o.effects})}function Oa(o,c){return{eventTime:o,lane:c,tag:0,payload:null,callback:null,next:null}}function vo(o,c,h){var g=o.updateQueue;if(g===null)return null;if(g=g.shared,(Ut&2)!==0){var w=g.pending;return w===null?c.next=c:(c.next=w.next,w.next=c),g.pending=c,Pa(o,h)}return w=g.interleaved,w===null?(c.next=c,Wp(g)):(c.next=w.next,w.next=c),g.interleaved=c,Pa(o,h)}function cf(o,c,h){if(c=c.updateQueue,c!==null&&(c=c.shared,(h&4194240)!==0)){var g=c.lanes;g&=o.pendingLanes,h|=g,c.lanes=h,wn(o,h)}}function Qb(o,c){var h=o.updateQueue,g=o.alternate;if(g!==null&&(g=g.updateQueue,h===g)){var w=null,N=null;if(h=h.firstBaseUpdate,h!==null){do{var P={eventTime:h.eventTime,lane:h.lane,tag:h.tag,payload:h.payload,callback:h.callback,next:null};N===null?w=N=P:N=N.next=P,h=h.next}while(h!==null);N===null?w=N=c:N=N.next=c}else w=N=c;h={baseState:g.baseState,firstBaseUpdate:w,lastBaseUpdate:N,shared:g.shared,effects:g.effects},o.updateQueue=h;return}o=h.lastBaseUpdate,o===null?h.firstBaseUpdate=c:o.next=c,h.lastBaseUpdate=c}function uf(o,c,h,g){var w=o.updateQueue;yo=!1;var N=w.firstBaseUpdate,P=w.lastBaseUpdate,F=w.shared.pending;if(F!==null){w.shared.pending=null;var G=F,ve=G.next;G.next=null,P===null?N=ve:P.next=ve,P=G;var Ae=o.alternate;Ae!==null&&(Ae=Ae.updateQueue,F=Ae.lastBaseUpdate,F!==P&&(F===null?Ae.firstBaseUpdate=ve:F.next=ve,Ae.lastBaseUpdate=G))}if(N!==null){var Ie=w.baseState;P=0,Ae=ve=G=null,F=N;do{var Ee=F.lane,Ke=F.eventTime;if((g&Ee)===Ee){Ae!==null&&(Ae=Ae.next={eventTime:Ke,lane:0,tag:F.tag,payload:F.payload,callback:F.callback,next:null});e:{var Xe=o,Qe=F;switch(Ee=c,Ke=h,Qe.tag){case 1:if(Xe=Qe.payload,typeof Xe=="function"){Ie=Xe.call(Ke,Ie,Ee);break e}Ie=Xe;break e;case 3:Xe.flags=Xe.flags&-65537|128;case 0:if(Xe=Qe.payload,Ee=typeof Xe=="function"?Xe.call(Ke,Ie,Ee):Xe,Ee==null)break e;Ie=ee({},Ie,Ee);break e;case 2:yo=!0}}F.callback!==null&&F.lane!==0&&(o.flags|=64,Ee=w.effects,Ee===null?w.effects=[F]:Ee.push(F))}else Ke={eventTime:Ke,lane:Ee,tag:F.tag,payload:F.payload,callback:F.callback,next:null},Ae===null?(ve=Ae=Ke,G=Ie):Ae=Ae.next=Ke,P|=Ee;if(F=F.next,F===null){if(F=w.shared.pending,F===null)break;Ee=F,F=Ee.next,Ee.next=null,w.lastBaseUpdate=Ee,w.shared.pending=null}}while(!0);if(Ae===null&&(G=Ie),w.baseState=G,w.firstBaseUpdate=ve,w.lastBaseUpdate=Ae,c=w.shared.interleaved,c!==null){w=c;do P|=w.lane,w=w.next;while(w!==c)}else N===null&&(w.shared.lanes=0);Zo|=P,o.lanes=P,o.memoizedState=Ie}}function Zb(o,c,h){if(o=c.effects,c.effects=null,o!==null)for(c=0;c<o.length;c++){var g=o[c],w=g.callback;if(w!==null){if(g.callback=null,g=h,typeof w!="function")throw Error(r(191,w));w.call(g)}}}var vu={},oa=mo(vu),xu=mo(vu),wu=mo(vu);function Xo(o){if(o===vu)throw Error(r(174));return o}function Vp(o,c){switch(hr(wu,c),hr(xu,o),hr(oa,vu),o=c.nodeType,o){case 9:case 11:c=(c=c.documentElement)?c.namespaceURI:yt(null,"");break;default:o=o===8?c.parentNode:c,c=o.namespaceURI||null,o=o.tagName,c=yt(c,o)}jr(oa),hr(oa,c)}function Ql(){jr(oa),jr(xu),jr(wu)}function e1(o){Xo(wu.current);var c=Xo(oa.current),h=yt(c,o.type);c!==h&&(hr(xu,o),hr(oa,h))}function Hp(o){xu.current===o&&(jr(oa),jr(xu))}var zr=mo(0);function df(o){for(var c=o;c!==null;){if(c.tag===13){var h=c.memoizedState;if(h!==null&&(h=h.dehydrated,h===null||h.data==="$?"||h.data==="$!"))return c}else if(c.tag===19&&c.memoizedProps.revealOrder!==void 0){if((c.flags&128)!==0)return c}else if(c.child!==null){c.child.return=c,c=c.child;continue}if(c===o)break;for(;c.sibling===null;){if(c.return===null||c.return===o)return null;c=c.return}c.sibling.return=c.return,c=c.sibling}return null}var Kp=[];function Gp(){for(var o=0;o<Kp.length;o++)Kp[o]._workInProgressVersionPrimary=null;Kp.length=0}var ff=O.ReactCurrentDispatcher,Yp=O.ReactCurrentBatchConfig,Qo=0,Ur=null,Sn=null,$n=null,hf=!1,bu=!1,ju=0,NI=0;function os(){throw Error(r(321))}function Jp(o,c){if(c===null)return!1;for(var h=0;h<c.length&&h<o.length;h++)if(!Mi(o[h],c[h]))return!1;return!0}function Xp(o,c,h,g,w,N){if(Qo=N,Ur=c,c.memoizedState=null,c.updateQueue=null,c.lanes=0,ff.current=o===null||o.memoizedState===null?AI:PI,o=h(g,w),bu){N=0;do{if(bu=!1,ju=0,25<=N)throw Error(r(301));N+=1,$n=Sn=null,c.updateQueue=null,ff.current=OI,o=h(g,w)}while(bu)}if(ff.current=gf,c=Sn!==null&&Sn.next!==null,Qo=0,$n=Sn=Ur=null,hf=!1,c)throw Error(r(300));return o}function Qp(){var o=ju!==0;return ju=0,o}function la(){var o={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return $n===null?Ur.memoizedState=$n=o:$n=$n.next=o,$n}function mi(){if(Sn===null){var o=Ur.alternate;o=o!==null?o.memoizedState:null}else o=Sn.next;var c=$n===null?Ur.memoizedState:$n.next;if(c!==null)$n=c,Sn=o;else{if(o===null)throw Error(r(310));Sn=o,o={memoizedState:Sn.memoizedState,baseState:Sn.baseState,baseQueue:Sn.baseQueue,queue:Sn.queue,next:null},$n===null?Ur.memoizedState=$n=o:$n=$n.next=o}return $n}function Su(o,c){return typeof c=="function"?c(o):c}function Zp(o){var c=mi(),h=c.queue;if(h===null)throw Error(r(311));h.lastRenderedReducer=o;var g=Sn,w=g.baseQueue,N=h.pending;if(N!==null){if(w!==null){var P=w.next;w.next=N.next,N.next=P}g.baseQueue=w=N,h.pending=null}if(w!==null){N=w.next,g=g.baseState;var F=P=null,G=null,ve=N;do{var Ae=ve.lane;if((Qo&Ae)===Ae)G!==null&&(G=G.next={lane:0,action:ve.action,hasEagerState:ve.hasEagerState,eagerState:ve.eagerState,next:null}),g=ve.hasEagerState?ve.eagerState:o(g,ve.action);else{var Ie={lane:Ae,action:ve.action,hasEagerState:ve.hasEagerState,eagerState:ve.eagerState,next:null};G===null?(F=G=Ie,P=g):G=G.next=Ie,Ur.lanes|=Ae,Zo|=Ae}ve=ve.next}while(ve!==null&&ve!==N);G===null?P=g:G.next=F,Mi(g,c.memoizedState)||(Ps=!0),c.memoizedState=g,c.baseState=P,c.baseQueue=G,h.lastRenderedState=g}if(o=h.interleaved,o!==null){w=o;do N=w.lane,Ur.lanes|=N,Zo|=N,w=w.next;while(w!==o)}else w===null&&(h.lanes=0);return[c.memoizedState,h.dispatch]}function eg(o){var c=mi(),h=c.queue;if(h===null)throw Error(r(311));h.lastRenderedReducer=o;var g=h.dispatch,w=h.pending,N=c.memoizedState;if(w!==null){h.pending=null;var P=w=w.next;do N=o(N,P.action),P=P.next;while(P!==w);Mi(N,c.memoizedState)||(Ps=!0),c.memoizedState=N,c.baseQueue===null&&(c.baseState=N),h.lastRenderedState=N}return[N,g]}function t1(){}function r1(o,c){var h=Ur,g=mi(),w=c(),N=!Mi(g.memoizedState,w);if(N&&(g.memoizedState=w,Ps=!0),g=g.queue,tg(i1.bind(null,h,g,o),[o]),g.getSnapshot!==c||N||$n!==null&&$n.memoizedState.tag&1){if(h.flags|=2048,ku(9,s1.bind(null,h,g,w,c),void 0,null),Mn===null)throw Error(r(349));(Qo&30)!==0||n1(h,c,w)}return w}function n1(o,c,h){o.flags|=16384,o={getSnapshot:c,value:h},c=Ur.updateQueue,c===null?(c={lastEffect:null,stores:null},Ur.updateQueue=c,c.stores=[o]):(h=c.stores,h===null?c.stores=[o]:h.push(o))}function s1(o,c,h,g){c.value=h,c.getSnapshot=g,a1(c)&&o1(o)}function i1(o,c,h){return h(function(){a1(c)&&o1(o)})}function a1(o){var c=o.getSnapshot;o=o.value;try{var h=c();return!Mi(o,h)}catch{return!0}}function o1(o){var c=Pa(o,1);c!==null&&Bi(c,o,1,-1)}function l1(o){var c=la();return typeof o=="function"&&(o=o()),c.memoizedState=c.baseState=o,o={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Su,lastRenderedState:o},c.queue=o,o=o.dispatch=EI.bind(null,Ur,o),[c.memoizedState,o]}function ku(o,c,h,g){return o={tag:o,create:c,destroy:h,deps:g,next:null},c=Ur.updateQueue,c===null?(c={lastEffect:null,stores:null},Ur.updateQueue=c,c.lastEffect=o.next=o):(h=c.lastEffect,h===null?c.lastEffect=o.next=o:(g=h.next,h.next=o,o.next=g,c.lastEffect=o)),o}function c1(){return mi().memoizedState}function mf(o,c,h,g){var w=la();Ur.flags|=o,w.memoizedState=ku(1|c,h,void 0,g===void 0?null:g)}function pf(o,c,h,g){var w=mi();g=g===void 0?null:g;var N=void 0;if(Sn!==null){var P=Sn.memoizedState;if(N=P.destroy,g!==null&&Jp(g,P.deps)){w.memoizedState=ku(c,h,N,g);return}}Ur.flags|=o,w.memoizedState=ku(1|c,h,N,g)}function u1(o,c){return mf(8390656,8,o,c)}function tg(o,c){return pf(2048,8,o,c)}function d1(o,c){return pf(4,2,o,c)}function f1(o,c){return pf(4,4,o,c)}function h1(o,c){if(typeof c=="function")return o=o(),c(o),function(){c(null)};if(c!=null)return o=o(),c.current=o,function(){c.current=null}}function m1(o,c,h){return h=h!=null?h.concat([o]):null,pf(4,4,h1.bind(null,c,o),h)}function rg(){}function p1(o,c){var h=mi();c=c===void 0?null:c;var g=h.memoizedState;return g!==null&&c!==null&&Jp(c,g[1])?g[0]:(h.memoizedState=[o,c],o)}function g1(o,c){var h=mi();c=c===void 0?null:c;var g=h.memoizedState;return g!==null&&c!==null&&Jp(c,g[1])?g[0]:(o=o(),h.memoizedState=[o,c],o)}function y1(o,c,h){return(Qo&21)===0?(o.baseState&&(o.baseState=!1,Ps=!0),o.memoizedState=h):(Mi(h,c)||(h=lo(),Ur.lanes|=h,Zo|=h,o.baseState=!0),c)}function _I(o,c){var h=Ct;Ct=h!==0&&4>h?h:4,o(!0);var g=Yp.transition;Yp.transition={};try{o(!1),c()}finally{Ct=h,Yp.transition=g}}function v1(){return mi().memoizedState}function CI(o,c,h){var g=jo(o);if(h={lane:g,action:h,hasEagerState:!1,eagerState:null,next:null},x1(o))w1(c,h);else if(h=Jb(o,c,h,g),h!==null){var w=ps();Bi(h,o,g,w),b1(h,c,g)}}function EI(o,c,h){var g=jo(o),w={lane:g,action:h,hasEagerState:!1,eagerState:null,next:null};if(x1(o))w1(c,w);else{var N=o.alternate;if(o.lanes===0&&(N===null||N.lanes===0)&&(N=c.lastRenderedReducer,N!==null))try{var P=c.lastRenderedState,F=N(P,h);if(w.hasEagerState=!0,w.eagerState=F,Mi(F,P)){var G=c.interleaved;G===null?(w.next=w,Wp(c)):(w.next=G.next,G.next=w),c.interleaved=w;return}}catch{}finally{}h=Jb(o,c,w,g),h!==null&&(w=ps(),Bi(h,o,g,w),b1(h,c,g))}}function x1(o){var c=o.alternate;return o===Ur||c!==null&&c===Ur}function w1(o,c){bu=hf=!0;var h=o.pending;h===null?c.next=c:(c.next=h.next,h.next=c),o.pending=c}function b1(o,c,h){if((h&4194240)!==0){var g=c.lanes;g&=o.pendingLanes,h|=g,c.lanes=h,wn(o,h)}}var gf={readContext:hi,useCallback:os,useContext:os,useEffect:os,useImperativeHandle:os,useInsertionEffect:os,useLayoutEffect:os,useMemo:os,useReducer:os,useRef:os,useState:os,useDebugValue:os,useDeferredValue:os,useTransition:os,useMutableSource:os,useSyncExternalStore:os,useId:os,unstable_isNewReconciler:!1},AI={readContext:hi,useCallback:function(o,c){return la().memoizedState=[o,c===void 0?null:c],o},useContext:hi,useEffect:u1,useImperativeHandle:function(o,c,h){return h=h!=null?h.concat([o]):null,mf(4194308,4,h1.bind(null,c,o),h)},useLayoutEffect:function(o,c){return mf(4194308,4,o,c)},useInsertionEffect:function(o,c){return mf(4,2,o,c)},useMemo:function(o,c){var h=la();return c=c===void 0?null:c,o=o(),h.memoizedState=[o,c],o},useReducer:function(o,c,h){var g=la();return c=h!==void 0?h(c):c,g.memoizedState=g.baseState=c,o={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:o,lastRenderedState:c},g.queue=o,o=o.dispatch=CI.bind(null,Ur,o),[g.memoizedState,o]},useRef:function(o){var c=la();return o={current:o},c.memoizedState=o},useState:l1,useDebugValue:rg,useDeferredValue:function(o){return la().memoizedState=o},useTransition:function(){var o=l1(!1),c=o[0];return o=_I.bind(null,o[1]),la().memoizedState=o,[c,o]},useMutableSource:function(){},useSyncExternalStore:function(o,c,h){var g=Ur,w=la();if(Ir){if(h===void 0)throw Error(r(407));h=h()}else{if(h=c(),Mn===null)throw Error(r(349));(Qo&30)!==0||n1(g,c,h)}w.memoizedState=h;var N={value:h,getSnapshot:c};return w.queue=N,u1(i1.bind(null,g,N,o),[o]),g.flags|=2048,ku(9,s1.bind(null,g,N,h,c),void 0,null),h},useId:function(){var o=la(),c=Mn.identifierPrefix;if(Ir){var h=Aa,g=Ea;h=(g&~(1<<32-gt(g)-1)).toString(32)+h,c=":"+c+"R"+h,h=ju++,0<h&&(c+="H"+h.toString(32)),c+=":"}else h=NI++,c=":"+c+"r"+h.toString(32)+":";return o.memoizedState=c},unstable_isNewReconciler:!1},PI={readContext:hi,useCallback:p1,useContext:hi,useEffect:tg,useImperativeHandle:m1,useInsertionEffect:d1,useLayoutEffect:f1,useMemo:g1,useReducer:Zp,useRef:c1,useState:function(){return Zp(Su)},useDebugValue:rg,useDeferredValue:function(o){var c=mi();return y1(c,Sn.memoizedState,o)},useTransition:function(){var o=Zp(Su)[0],c=mi().memoizedState;return[o,c]},useMutableSource:t1,useSyncExternalStore:r1,useId:v1,unstable_isNewReconciler:!1},OI={readContext:hi,useCallback:p1,useContext:hi,useEffect:tg,useImperativeHandle:m1,useInsertionEffect:d1,useLayoutEffect:f1,useMemo:g1,useReducer:eg,useRef:c1,useState:function(){return eg(Su)},useDebugValue:rg,useDeferredValue:function(o){var c=mi();return Sn===null?c.memoizedState=o:y1(c,Sn.memoizedState,o)},useTransition:function(){var o=eg(Su)[0],c=mi().memoizedState;return[o,c]},useMutableSource:t1,useSyncExternalStore:r1,useId:v1,unstable_isNewReconciler:!1};function Li(o,c){if(o&&o.defaultProps){c=ee({},c),o=o.defaultProps;for(var h in o)c[h]===void 0&&(c[h]=o[h]);return c}return c}function ng(o,c,h,g){c=o.memoizedState,h=h(g,c),h=h==null?c:ee({},c,h),o.memoizedState=h,o.lanes===0&&(o.updateQueue.baseState=h)}var yf={isMounted:function(o){return(o=o._reactInternals)?Fr(o)===o:!1},enqueueSetState:function(o,c,h){o=o._reactInternals;var g=ps(),w=jo(o),N=Oa(g,w);N.payload=c,h!=null&&(N.callback=h),c=vo(o,N,w),c!==null&&(Bi(c,o,w,g),cf(c,o,w))},enqueueReplaceState:function(o,c,h){o=o._reactInternals;var g=ps(),w=jo(o),N=Oa(g,w);N.tag=1,N.payload=c,h!=null&&(N.callback=h),c=vo(o,N,w),c!==null&&(Bi(c,o,w,g),cf(c,o,w))},enqueueForceUpdate:function(o,c){o=o._reactInternals;var h=ps(),g=jo(o),w=Oa(h,g);w.tag=2,c!=null&&(w.callback=c),c=vo(o,w,g),c!==null&&(Bi(c,o,g,h),cf(c,o,g))}};function j1(o,c,h,g,w,N,P){return o=o.stateNode,typeof o.shouldComponentUpdate=="function"?o.shouldComponentUpdate(g,N,P):c.prototype&&c.prototype.isPureReactComponent?!uu(h,g)||!uu(w,N):!0}function S1(o,c,h){var g=!1,w=po,N=c.contextType;return typeof N=="object"&&N!==null?N=hi(N):(w=As(c)?Ko:as.current,g=c.contextTypes,N=(g=g!=null)?Vl(o,w):po),c=new c(h,N),o.memoizedState=c.state!==null&&c.state!==void 0?c.state:null,c.updater=yf,o.stateNode=c,c._reactInternals=o,g&&(o=o.stateNode,o.__reactInternalMemoizedUnmaskedChildContext=w,o.__reactInternalMemoizedMaskedChildContext=N),c}function k1(o,c,h,g){o=c.state,typeof c.componentWillReceiveProps=="function"&&c.componentWillReceiveProps(h,g),typeof c.UNSAFE_componentWillReceiveProps=="function"&&c.UNSAFE_componentWillReceiveProps(h,g),c.state!==o&&yf.enqueueReplaceState(c,c.state,null)}function sg(o,c,h,g){var w=o.stateNode;w.props=h,w.state=o.memoizedState,w.refs={},qp(o);var N=c.contextType;typeof N=="object"&&N!==null?w.context=hi(N):(N=As(c)?Ko:as.current,w.context=Vl(o,N)),w.state=o.memoizedState,N=c.getDerivedStateFromProps,typeof N=="function"&&(ng(o,c,N,h),w.state=o.memoizedState),typeof c.getDerivedStateFromProps=="function"||typeof w.getSnapshotBeforeUpdate=="function"||typeof w.UNSAFE_componentWillMount!="function"&&typeof w.componentWillMount!="function"||(c=w.state,typeof w.componentWillMount=="function"&&w.componentWillMount(),typeof w.UNSAFE_componentWillMount=="function"&&w.UNSAFE_componentWillMount(),c!==w.state&&yf.enqueueReplaceState(w,w.state,null),uf(o,h,w,g),w.state=o.memoizedState),typeof w.componentDidMount=="function"&&(o.flags|=4194308)}function Zl(o,c){try{var h="",g=c;do h+=Ce(g),g=g.return;while(g);var w=h}catch(N){w=`
Error generating stack: `+N.message+`
`+N.stack}return{value:o,source:c,stack:w,digest:null}}function ig(o,c,h){return{value:o,source:null,stack:h??null,digest:c??null}}function ag(o,c){try{console.error(c.value)}catch(h){setTimeout(function(){throw h})}}var TI=typeof WeakMap=="function"?WeakMap:Map;function N1(o,c,h){h=Oa(-1,h),h.tag=3,h.payload={element:null};var g=c.value;return h.callback=function(){kf||(kf=!0,bg=g),ag(o,c)},h}function _1(o,c,h){h=Oa(-1,h),h.tag=3;var g=o.type.getDerivedStateFromError;if(typeof g=="function"){var w=c.value;h.payload=function(){return g(w)},h.callback=function(){ag(o,c)}}var N=o.stateNode;return N!==null&&typeof N.componentDidCatch=="function"&&(h.callback=function(){ag(o,c),typeof g!="function"&&(wo===null?wo=new Set([this]):wo.add(this));var P=c.stack;this.componentDidCatch(c.value,{componentStack:P!==null?P:""})}),h}function C1(o,c,h){var g=o.pingCache;if(g===null){g=o.pingCache=new TI;var w=new Set;g.set(c,w)}else w=g.get(c),w===void 0&&(w=new Set,g.set(c,w));w.has(h)||(w.add(h),o=HI.bind(null,o,c,h),c.then(o,o))}function E1(o){do{var c;if((c=o.tag===13)&&(c=o.memoizedState,c=c!==null?c.dehydrated!==null:!0),c)return o;o=o.return}while(o!==null);return null}function A1(o,c,h,g,w){return(o.mode&1)===0?(o===c?o.flags|=65536:(o.flags|=128,h.flags|=131072,h.flags&=-52805,h.tag===1&&(h.alternate===null?h.tag=17:(c=Oa(-1,1),c.tag=2,vo(h,c,1))),h.lanes|=1),o):(o.flags|=65536,o.lanes=w,o)}var II=O.ReactCurrentOwner,Ps=!1;function ms(o,c,h,g){c.child=o===null?Yb(c,null,h,g):Yl(c,o.child,h,g)}function P1(o,c,h,g,w){h=h.render;var N=c.ref;return Xl(c,w),g=Xp(o,c,h,g,N,w),h=Qp(),o!==null&&!Ps?(c.updateQueue=o.updateQueue,c.flags&=-2053,o.lanes&=~w,Ta(o,c,w)):(Ir&&h&&Dp(c),c.flags|=1,ms(o,c,g,w),c.child)}function O1(o,c,h,g,w){if(o===null){var N=h.type;return typeof N=="function"&&!Eg(N)&&N.defaultProps===void 0&&h.compare===null&&h.defaultProps===void 0?(c.tag=15,c.type=N,T1(o,c,N,g,w)):(o=Pf(h.type,null,g,c,c.mode,w),o.ref=c.ref,o.return=c,c.child=o)}if(N=o.child,(o.lanes&w)===0){var P=N.memoizedProps;if(h=h.compare,h=h!==null?h:uu,h(P,g)&&o.ref===c.ref)return Ta(o,c,w)}return c.flags|=1,o=ko(N,g),o.ref=c.ref,o.return=c,c.child=o}function T1(o,c,h,g,w){if(o!==null){var N=o.memoizedProps;if(uu(N,g)&&o.ref===c.ref)if(Ps=!1,c.pendingProps=g=N,(o.lanes&w)!==0)(o.flags&131072)!==0&&(Ps=!0);else return c.lanes=o.lanes,Ta(o,c,w)}return og(o,c,h,g,w)}function I1(o,c,h){var g=c.pendingProps,w=g.children,N=o!==null?o.memoizedState:null;if(g.mode==="hidden")if((c.mode&1)===0)c.memoizedState={baseLanes:0,cachePool:null,transitions:null},hr(tc,Ks),Ks|=h;else{if((h&1073741824)===0)return o=N!==null?N.baseLanes|h:h,c.lanes=c.childLanes=1073741824,c.memoizedState={baseLanes:o,cachePool:null,transitions:null},c.updateQueue=null,hr(tc,Ks),Ks|=o,null;c.memoizedState={baseLanes:0,cachePool:null,transitions:null},g=N!==null?N.baseLanes:h,hr(tc,Ks),Ks|=g}else N!==null?(g=N.baseLanes|h,c.memoizedState=null):g=h,hr(tc,Ks),Ks|=g;return ms(o,c,w,h),c.child}function D1(o,c){var h=c.ref;(o===null&&h!==null||o!==null&&o.ref!==h)&&(c.flags|=512,c.flags|=2097152)}function og(o,c,h,g,w){var N=As(h)?Ko:as.current;return N=Vl(c,N),Xl(c,w),h=Xp(o,c,h,g,N,w),g=Qp(),o!==null&&!Ps?(c.updateQueue=o.updateQueue,c.flags&=-2053,o.lanes&=~w,Ta(o,c,w)):(Ir&&g&&Dp(c),c.flags|=1,ms(o,c,h,w),c.child)}function R1(o,c,h,g,w){if(As(h)){var N=!0;ef(c)}else N=!1;if(Xl(c,w),c.stateNode===null)xf(o,c),S1(c,h,g),sg(c,h,g,w),g=!0;else if(o===null){var P=c.stateNode,F=c.memoizedProps;P.props=F;var G=P.context,ve=h.contextType;typeof ve=="object"&&ve!==null?ve=hi(ve):(ve=As(h)?Ko:as.current,ve=Vl(c,ve));var Ae=h.getDerivedStateFromProps,Ie=typeof Ae=="function"||typeof P.getSnapshotBeforeUpdate=="function";Ie||typeof P.UNSAFE_componentWillReceiveProps!="function"&&typeof P.componentWillReceiveProps!="function"||(F!==g||G!==ve)&&k1(c,P,g,ve),yo=!1;var Ee=c.memoizedState;P.state=Ee,uf(c,g,P,w),G=c.memoizedState,F!==g||Ee!==G||Es.current||yo?(typeof Ae=="function"&&(ng(c,h,Ae,g),G=c.memoizedState),(F=yo||j1(c,h,F,g,Ee,G,ve))?(Ie||typeof P.UNSAFE_componentWillMount!="function"&&typeof P.componentWillMount!="function"||(typeof P.componentWillMount=="function"&&P.componentWillMount(),typeof P.UNSAFE_componentWillMount=="function"&&P.UNSAFE_componentWillMount()),typeof P.componentDidMount=="function"&&(c.flags|=4194308)):(typeof P.componentDidMount=="function"&&(c.flags|=4194308),c.memoizedProps=g,c.memoizedState=G),P.props=g,P.state=G,P.context=ve,g=F):(typeof P.componentDidMount=="function"&&(c.flags|=4194308),g=!1)}else{P=c.stateNode,Xb(o,c),F=c.memoizedProps,ve=c.type===c.elementType?F:Li(c.type,F),P.props=ve,Ie=c.pendingProps,Ee=P.context,G=h.contextType,typeof G=="object"&&G!==null?G=hi(G):(G=As(h)?Ko:as.current,G=Vl(c,G));var Ke=h.getDerivedStateFromProps;(Ae=typeof Ke=="function"||typeof P.getSnapshotBeforeUpdate=="function")||typeof P.UNSAFE_componentWillReceiveProps!="function"&&typeof P.componentWillReceiveProps!="function"||(F!==Ie||Ee!==G)&&k1(c,P,g,G),yo=!1,Ee=c.memoizedState,P.state=Ee,uf(c,g,P,w);var Xe=c.memoizedState;F!==Ie||Ee!==Xe||Es.current||yo?(typeof Ke=="function"&&(ng(c,h,Ke,g),Xe=c.memoizedState),(ve=yo||j1(c,h,ve,g,Ee,Xe,G)||!1)?(Ae||typeof P.UNSAFE_componentWillUpdate!="function"&&typeof P.componentWillUpdate!="function"||(typeof P.componentWillUpdate=="function"&&P.componentWillUpdate(g,Xe,G),typeof P.UNSAFE_componentWillUpdate=="function"&&P.UNSAFE_componentWillUpdate(g,Xe,G)),typeof P.componentDidUpdate=="function"&&(c.flags|=4),typeof P.getSnapshotBeforeUpdate=="function"&&(c.flags|=1024)):(typeof P.componentDidUpdate!="function"||F===o.memoizedProps&&Ee===o.memoizedState||(c.flags|=4),typeof P.getSnapshotBeforeUpdate!="function"||F===o.memoizedProps&&Ee===o.memoizedState||(c.flags|=1024),c.memoizedProps=g,c.memoizedState=Xe),P.props=g,P.state=Xe,P.context=G,g=ve):(typeof P.componentDidUpdate!="function"||F===o.memoizedProps&&Ee===o.memoizedState||(c.flags|=4),typeof P.getSnapshotBeforeUpdate!="function"||F===o.memoizedProps&&Ee===o.memoizedState||(c.flags|=1024),g=!1)}return lg(o,c,h,g,N,w)}function lg(o,c,h,g,w,N){D1(o,c);var P=(c.flags&128)!==0;if(!g&&!P)return w&&zb(c,h,!1),Ta(o,c,N);g=c.stateNode,II.current=c;var F=P&&typeof h.getDerivedStateFromError!="function"?null:g.render();return c.flags|=1,o!==null&&P?(c.child=Yl(c,o.child,null,N),c.child=Yl(c,null,F,N)):ms(o,c,F,N),c.memoizedState=g.state,w&&zb(c,h,!0),c.child}function $1(o){var c=o.stateNode;c.pendingContext?Fb(o,c.pendingContext,c.pendingContext!==c.context):c.context&&Fb(o,c.context,!1),Vp(o,c.containerInfo)}function M1(o,c,h,g,w){return Gl(),Fp(w),c.flags|=256,ms(o,c,h,g),c.child}var cg={dehydrated:null,treeContext:null,retryLane:0};function ug(o){return{baseLanes:o,cachePool:null,transitions:null}}function F1(o,c,h){var g=c.pendingProps,w=zr.current,N=!1,P=(c.flags&128)!==0,F;if((F=P)||(F=o!==null&&o.memoizedState===null?!1:(w&2)!==0),F?(N=!0,c.flags&=-129):(o===null||o.memoizedState!==null)&&(w|=1),hr(zr,w&1),o===null)return Mp(c),o=c.memoizedState,o!==null&&(o=o.dehydrated,o!==null)?((c.mode&1)===0?c.lanes=1:o.data==="$!"?c.lanes=8:c.lanes=1073741824,null):(P=g.children,o=g.fallback,N?(g=c.mode,N=c.child,P={mode:"hidden",children:P},(g&1)===0&&N!==null?(N.childLanes=0,N.pendingProps=P):N=Of(P,g,0,null),o=nl(o,g,h,null),N.return=c,o.return=c,N.sibling=o,c.child=N,c.child.memoizedState=ug(h),c.memoizedState=cg,o):dg(c,P));if(w=o.memoizedState,w!==null&&(F=w.dehydrated,F!==null))return DI(o,c,P,g,F,w,h);if(N){N=g.fallback,P=c.mode,w=o.child,F=w.sibling;var G={mode:"hidden",children:g.children};return(P&1)===0&&c.child!==w?(g=c.child,g.childLanes=0,g.pendingProps=G,c.deletions=null):(g=ko(w,G),g.subtreeFlags=w.subtreeFlags&14680064),F!==null?N=ko(F,N):(N=nl(N,P,h,null),N.flags|=2),N.return=c,g.return=c,g.sibling=N,c.child=g,g=N,N=c.child,P=o.child.memoizedState,P=P===null?ug(h):{baseLanes:P.baseLanes|h,cachePool:null,transitions:P.transitions},N.memoizedState=P,N.childLanes=o.childLanes&~h,c.memoizedState=cg,g}return N=o.child,o=N.sibling,g=ko(N,{mode:"visible",children:g.children}),(c.mode&1)===0&&(g.lanes=h),g.return=c,g.sibling=null,o!==null&&(h=c.deletions,h===null?(c.deletions=[o],c.flags|=16):h.push(o)),c.child=g,c.memoizedState=null,g}function dg(o,c){return c=Of({mode:"visible",children:c},o.mode,0,null),c.return=o,o.child=c}function vf(o,c,h,g){return g!==null&&Fp(g),Yl(c,o.child,null,h),o=dg(c,c.pendingProps.children),o.flags|=2,c.memoizedState=null,o}function DI(o,c,h,g,w,N,P){if(h)return c.flags&256?(c.flags&=-257,g=ig(Error(r(422))),vf(o,c,P,g)):c.memoizedState!==null?(c.child=o.child,c.flags|=128,null):(N=g.fallback,w=c.mode,g=Of({mode:"visible",children:g.children},w,0,null),N=nl(N,w,P,null),N.flags|=2,g.return=c,N.return=c,g.sibling=N,c.child=g,(c.mode&1)!==0&&Yl(c,o.child,null,P),c.child.memoizedState=ug(P),c.memoizedState=cg,N);if((c.mode&1)===0)return vf(o,c,P,null);if(w.data==="$!"){if(g=w.nextSibling&&w.nextSibling.dataset,g)var F=g.dgst;return g=F,N=Error(r(419)),g=ig(N,g,void 0),vf(o,c,P,g)}if(F=(P&o.childLanes)!==0,Ps||F){if(g=Mn,g!==null){switch(P&-P){case 4:w=2;break;case 16:w=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:w=32;break;case 536870912:w=268435456;break;default:w=0}w=(w&(g.suspendedLanes|P))!==0?0:w,w!==0&&w!==N.retryLane&&(N.retryLane=w,Pa(o,w),Bi(g,o,w,-1))}return Cg(),g=ig(Error(r(421))),vf(o,c,P,g)}return w.data==="$?"?(c.flags|=128,c.child=o.child,c=KI.bind(null,o),w._reactRetry=c,null):(o=N.treeContext,Hs=ho(w.nextSibling),Vs=c,Ir=!0,Fi=null,o!==null&&(di[fi++]=Ea,di[fi++]=Aa,di[fi++]=Go,Ea=o.id,Aa=o.overflow,Go=c),c=dg(c,g.children),c.flags|=4096,c)}function L1(o,c,h){o.lanes|=c;var g=o.alternate;g!==null&&(g.lanes|=c),Bp(o.return,c,h)}function fg(o,c,h,g,w){var N=o.memoizedState;N===null?o.memoizedState={isBackwards:c,rendering:null,renderingStartTime:0,last:g,tail:h,tailMode:w}:(N.isBackwards=c,N.rendering=null,N.renderingStartTime=0,N.last=g,N.tail=h,N.tailMode=w)}function z1(o,c,h){var g=c.pendingProps,w=g.revealOrder,N=g.tail;if(ms(o,c,g.children,h),g=zr.current,(g&2)!==0)g=g&1|2,c.flags|=128;else{if(o!==null&&(o.flags&128)!==0)e:for(o=c.child;o!==null;){if(o.tag===13)o.memoizedState!==null&&L1(o,h,c);else if(o.tag===19)L1(o,h,c);else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===c)break e;for(;o.sibling===null;){if(o.return===null||o.return===c)break e;o=o.return}o.sibling.return=o.return,o=o.sibling}g&=1}if(hr(zr,g),(c.mode&1)===0)c.memoizedState=null;else switch(w){case"forwards":for(h=c.child,w=null;h!==null;)o=h.alternate,o!==null&&df(o)===null&&(w=h),h=h.sibling;h=w,h===null?(w=c.child,c.child=null):(w=h.sibling,h.sibling=null),fg(c,!1,w,h,N);break;case"backwards":for(h=null,w=c.child,c.child=null;w!==null;){if(o=w.alternate,o!==null&&df(o)===null){c.child=w;break}o=w.sibling,w.sibling=h,h=w,w=o}fg(c,!0,h,null,N);break;case"together":fg(c,!1,null,null,void 0);break;default:c.memoizedState=null}return c.child}function xf(o,c){(c.mode&1)===0&&o!==null&&(o.alternate=null,c.alternate=null,c.flags|=2)}function Ta(o,c,h){if(o!==null&&(c.dependencies=o.dependencies),Zo|=c.lanes,(h&c.childLanes)===0)return null;if(o!==null&&c.child!==o.child)throw Error(r(153));if(c.child!==null){for(o=c.child,h=ko(o,o.pendingProps),c.child=h,h.return=c;o.sibling!==null;)o=o.sibling,h=h.sibling=ko(o,o.pendingProps),h.return=c;h.sibling=null}return c.child}function RI(o,c,h){switch(c.tag){case 3:$1(c),Gl();break;case 5:e1(c);break;case 1:As(c.type)&&ef(c);break;case 4:Vp(c,c.stateNode.containerInfo);break;case 10:var g=c.type._context,w=c.memoizedProps.value;hr(of,g._currentValue),g._currentValue=w;break;case 13:if(g=c.memoizedState,g!==null)return g.dehydrated!==null?(hr(zr,zr.current&1),c.flags|=128,null):(h&c.child.childLanes)!==0?F1(o,c,h):(hr(zr,zr.current&1),o=Ta(o,c,h),o!==null?o.sibling:null);hr(zr,zr.current&1);break;case 19:if(g=(h&c.childLanes)!==0,(o.flags&128)!==0){if(g)return z1(o,c,h);c.flags|=128}if(w=c.memoizedState,w!==null&&(w.rendering=null,w.tail=null,w.lastEffect=null),hr(zr,zr.current),g)break;return null;case 22:case 23:return c.lanes=0,I1(o,c,h)}return Ta(o,c,h)}var U1,hg,B1,W1;U1=function(o,c){for(var h=c.child;h!==null;){if(h.tag===5||h.tag===6)o.appendChild(h.stateNode);else if(h.tag!==4&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===c)break;for(;h.sibling===null;){if(h.return===null||h.return===c)return;h=h.return}h.sibling.return=h.return,h=h.sibling}},hg=function(){},B1=function(o,c,h,g){var w=o.memoizedProps;if(w!==g){o=c.stateNode,Xo(oa.current);var N=null;switch(h){case"input":w=Be(o,w),g=Be(o,g),N=[];break;case"select":w=ee({},w,{value:void 0}),g=ee({},g,{value:void 0}),N=[];break;case"textarea":w=pe(o,w),g=pe(o,g),N=[];break;default:typeof w.onClick!="function"&&typeof g.onClick=="function"&&(o.onclick=Xd)}Wt(h,g);var P;h=null;for(ve in w)if(!g.hasOwnProperty(ve)&&w.hasOwnProperty(ve)&&w[ve]!=null)if(ve==="style"){var F=w[ve];for(P in F)F.hasOwnProperty(P)&&(h||(h={}),h[P]="")}else ve!=="dangerouslySetInnerHTML"&&ve!=="children"&&ve!=="suppressContentEditableWarning"&&ve!=="suppressHydrationWarning"&&ve!=="autoFocus"&&(s.hasOwnProperty(ve)?N||(N=[]):(N=N||[]).push(ve,null));for(ve in g){var G=g[ve];if(F=w!=null?w[ve]:void 0,g.hasOwnProperty(ve)&&G!==F&&(G!=null||F!=null))if(ve==="style")if(F){for(P in F)!F.hasOwnProperty(P)||G&&G.hasOwnProperty(P)||(h||(h={}),h[P]="");for(P in G)G.hasOwnProperty(P)&&F[P]!==G[P]&&(h||(h={}),h[P]=G[P])}else h||(N||(N=[]),N.push(ve,h)),h=G;else ve==="dangerouslySetInnerHTML"?(G=G?G.__html:void 0,F=F?F.__html:void 0,G!=null&&F!==G&&(N=N||[]).push(ve,G)):ve==="children"?typeof G!="string"&&typeof G!="number"||(N=N||[]).push(ve,""+G):ve!=="suppressContentEditableWarning"&&ve!=="suppressHydrationWarning"&&(s.hasOwnProperty(ve)?(G!=null&&ve==="onScroll"&&br("scroll",o),N||F===G||(N=[])):(N=N||[]).push(ve,G))}h&&(N=N||[]).push("style",h);var ve=N;(c.updateQueue=ve)&&(c.flags|=4)}},W1=function(o,c,h,g){h!==g&&(c.flags|=4)};function Nu(o,c){if(!Ir)switch(o.tailMode){case"hidden":c=o.tail;for(var h=null;c!==null;)c.alternate!==null&&(h=c),c=c.sibling;h===null?o.tail=null:h.sibling=null;break;case"collapsed":h=o.tail;for(var g=null;h!==null;)h.alternate!==null&&(g=h),h=h.sibling;g===null?c||o.tail===null?o.tail=null:o.tail.sibling=null:g.sibling=null}}function ls(o){var c=o.alternate!==null&&o.alternate.child===o.child,h=0,g=0;if(c)for(var w=o.child;w!==null;)h|=w.lanes|w.childLanes,g|=w.subtreeFlags&14680064,g|=w.flags&14680064,w.return=o,w=w.sibling;else for(w=o.child;w!==null;)h|=w.lanes|w.childLanes,g|=w.subtreeFlags,g|=w.flags,w.return=o,w=w.sibling;return o.subtreeFlags|=g,o.childLanes=h,c}function $I(o,c,h){var g=c.pendingProps;switch(Rp(c),c.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ls(c),null;case 1:return As(c.type)&&Zd(),ls(c),null;case 3:return g=c.stateNode,Ql(),jr(Es),jr(as),Gp(),g.pendingContext&&(g.context=g.pendingContext,g.pendingContext=null),(o===null||o.child===null)&&(sf(c)?c.flags|=4:o===null||o.memoizedState.isDehydrated&&(c.flags&256)===0||(c.flags|=1024,Fi!==null&&(kg(Fi),Fi=null))),hg(o,c),ls(c),null;case 5:Hp(c);var w=Xo(wu.current);if(h=c.type,o!==null&&c.stateNode!=null)B1(o,c,h,g,w),o.ref!==c.ref&&(c.flags|=512,c.flags|=2097152);else{if(!g){if(c.stateNode===null)throw Error(r(166));return ls(c),null}if(o=Xo(oa.current),sf(c)){g=c.stateNode,h=c.type;var N=c.memoizedProps;switch(g[aa]=c,g[pu]=N,o=(c.mode&1)!==0,h){case"dialog":br("cancel",g),br("close",g);break;case"iframe":case"object":case"embed":br("load",g);break;case"video":case"audio":for(w=0;w<fu.length;w++)br(fu[w],g);break;case"source":br("error",g);break;case"img":case"image":case"link":br("error",g),br("load",g);break;case"details":br("toggle",g);break;case"input":dt(g,N),br("invalid",g);break;case"select":g._wrapperState={wasMultiple:!!N.multiple},br("invalid",g);break;case"textarea":Se(g,N),br("invalid",g)}Wt(h,N),w=null;for(var P in N)if(N.hasOwnProperty(P)){var F=N[P];P==="children"?typeof F=="string"?g.textContent!==F&&(N.suppressHydrationWarning!==!0&&Jd(g.textContent,F,o),w=["children",F]):typeof F=="number"&&g.textContent!==""+F&&(N.suppressHydrationWarning!==!0&&Jd(g.textContent,F,o),w=["children",""+F]):s.hasOwnProperty(P)&&F!=null&&P==="onScroll"&&br("scroll",g)}switch(h){case"input":$e(g),Nt(g,N,!0);break;case"textarea":$e(g),be(g);break;case"select":case"option":break;default:typeof N.onClick=="function"&&(g.onclick=Xd)}g=w,c.updateQueue=g,g!==null&&(c.flags|=4)}else{P=w.nodeType===9?w:w.ownerDocument,o==="http://www.w3.org/1999/xhtml"&&(o=qe(h)),o==="http://www.w3.org/1999/xhtml"?h==="script"?(o=P.createElement("div"),o.innerHTML="<script><\/script>",o=o.removeChild(o.firstChild)):typeof g.is=="string"?o=P.createElement(h,{is:g.is}):(o=P.createElement(h),h==="select"&&(P=o,g.multiple?P.multiple=!0:g.size&&(P.size=g.size))):o=P.createElementNS(o,h),o[aa]=c,o[pu]=g,U1(o,c,!1,!1),c.stateNode=o;e:{switch(P=_r(h,g),h){case"dialog":br("cancel",o),br("close",o),w=g;break;case"iframe":case"object":case"embed":br("load",o),w=g;break;case"video":case"audio":for(w=0;w<fu.length;w++)br(fu[w],o);w=g;break;case"source":br("error",o),w=g;break;case"img":case"image":case"link":br("error",o),br("load",o),w=g;break;case"details":br("toggle",o),w=g;break;case"input":dt(o,g),w=Be(o,g),br("invalid",o);break;case"option":w=g;break;case"select":o._wrapperState={wasMultiple:!!g.multiple},w=ee({},g,{value:void 0}),br("invalid",o);break;case"textarea":Se(o,g),w=pe(o,g),br("invalid",o);break;default:w=g}Wt(h,w),F=w;for(N in F)if(F.hasOwnProperty(N)){var G=F[N];N==="style"?$t(o,G):N==="dangerouslySetInnerHTML"?(G=G?G.__html:void 0,G!=null&&Pt(o,G)):N==="children"?typeof G=="string"?(h!=="textarea"||G!=="")&&tr(o,G):typeof G=="number"&&tr(o,""+G):N!=="suppressContentEditableWarning"&&N!=="suppressHydrationWarning"&&N!=="autoFocus"&&(s.hasOwnProperty(N)?G!=null&&N==="onScroll"&&br("scroll",o):G!=null&&C(o,N,G,P))}switch(h){case"input":$e(o),Nt(o,g,!1);break;case"textarea":$e(o),be(o);break;case"option":g.value!=null&&o.setAttribute("value",""+Q(g.value));break;case"select":o.multiple=!!g.multiple,N=g.value,N!=null?ie(o,!!g.multiple,N,!1):g.defaultValue!=null&&ie(o,!!g.multiple,g.defaultValue,!0);break;default:typeof w.onClick=="function"&&(o.onclick=Xd)}switch(h){case"button":case"input":case"select":case"textarea":g=!!g.autoFocus;break e;case"img":g=!0;break e;default:g=!1}}g&&(c.flags|=4)}c.ref!==null&&(c.flags|=512,c.flags|=2097152)}return ls(c),null;case 6:if(o&&c.stateNode!=null)W1(o,c,o.memoizedProps,g);else{if(typeof g!="string"&&c.stateNode===null)throw Error(r(166));if(h=Xo(wu.current),Xo(oa.current),sf(c)){if(g=c.stateNode,h=c.memoizedProps,g[aa]=c,(N=g.nodeValue!==h)&&(o=Vs,o!==null))switch(o.tag){case 3:Jd(g.nodeValue,h,(o.mode&1)!==0);break;case 5:o.memoizedProps.suppressHydrationWarning!==!0&&Jd(g.nodeValue,h,(o.mode&1)!==0)}N&&(c.flags|=4)}else g=(h.nodeType===9?h:h.ownerDocument).createTextNode(g),g[aa]=c,c.stateNode=g}return ls(c),null;case 13:if(jr(zr),g=c.memoizedState,o===null||o.memoizedState!==null&&o.memoizedState.dehydrated!==null){if(Ir&&Hs!==null&&(c.mode&1)!==0&&(c.flags&128)===0)Hb(),Gl(),c.flags|=98560,N=!1;else if(N=sf(c),g!==null&&g.dehydrated!==null){if(o===null){if(!N)throw Error(r(318));if(N=c.memoizedState,N=N!==null?N.dehydrated:null,!N)throw Error(r(317));N[aa]=c}else Gl(),(c.flags&128)===0&&(c.memoizedState=null),c.flags|=4;ls(c),N=!1}else Fi!==null&&(kg(Fi),Fi=null),N=!0;if(!N)return c.flags&65536?c:null}return(c.flags&128)!==0?(c.lanes=h,c):(g=g!==null,g!==(o!==null&&o.memoizedState!==null)&&g&&(c.child.flags|=8192,(c.mode&1)!==0&&(o===null||(zr.current&1)!==0?kn===0&&(kn=3):Cg())),c.updateQueue!==null&&(c.flags|=4),ls(c),null);case 4:return Ql(),hg(o,c),o===null&&hu(c.stateNode.containerInfo),ls(c),null;case 10:return Up(c.type._context),ls(c),null;case 17:return As(c.type)&&Zd(),ls(c),null;case 19:if(jr(zr),N=c.memoizedState,N===null)return ls(c),null;if(g=(c.flags&128)!==0,P=N.rendering,P===null)if(g)Nu(N,!1);else{if(kn!==0||o!==null&&(o.flags&128)!==0)for(o=c.child;o!==null;){if(P=df(o),P!==null){for(c.flags|=128,Nu(N,!1),g=P.updateQueue,g!==null&&(c.updateQueue=g,c.flags|=4),c.subtreeFlags=0,g=h,h=c.child;h!==null;)N=h,o=g,N.flags&=14680066,P=N.alternate,P===null?(N.childLanes=0,N.lanes=o,N.child=null,N.subtreeFlags=0,N.memoizedProps=null,N.memoizedState=null,N.updateQueue=null,N.dependencies=null,N.stateNode=null):(N.childLanes=P.childLanes,N.lanes=P.lanes,N.child=P.child,N.subtreeFlags=0,N.deletions=null,N.memoizedProps=P.memoizedProps,N.memoizedState=P.memoizedState,N.updateQueue=P.updateQueue,N.type=P.type,o=P.dependencies,N.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext}),h=h.sibling;return hr(zr,zr.current&1|2),c.child}o=o.sibling}N.tail!==null&&Ft()>rc&&(c.flags|=128,g=!0,Nu(N,!1),c.lanes=4194304)}else{if(!g)if(o=df(P),o!==null){if(c.flags|=128,g=!0,h=o.updateQueue,h!==null&&(c.updateQueue=h,c.flags|=4),Nu(N,!0),N.tail===null&&N.tailMode==="hidden"&&!P.alternate&&!Ir)return ls(c),null}else 2*Ft()-N.renderingStartTime>rc&&h!==1073741824&&(c.flags|=128,g=!0,Nu(N,!1),c.lanes=4194304);N.isBackwards?(P.sibling=c.child,c.child=P):(h=N.last,h!==null?h.sibling=P:c.child=P,N.last=P)}return N.tail!==null?(c=N.tail,N.rendering=c,N.tail=c.sibling,N.renderingStartTime=Ft(),c.sibling=null,h=zr.current,hr(zr,g?h&1|2:h&1),c):(ls(c),null);case 22:case 23:return _g(),g=c.memoizedState!==null,o!==null&&o.memoizedState!==null!==g&&(c.flags|=8192),g&&(c.mode&1)!==0?(Ks&1073741824)!==0&&(ls(c),c.subtreeFlags&6&&(c.flags|=8192)):ls(c),null;case 24:return null;case 25:return null}throw Error(r(156,c.tag))}function MI(o,c){switch(Rp(c),c.tag){case 1:return As(c.type)&&Zd(),o=c.flags,o&65536?(c.flags=o&-65537|128,c):null;case 3:return Ql(),jr(Es),jr(as),Gp(),o=c.flags,(o&65536)!==0&&(o&128)===0?(c.flags=o&-65537|128,c):null;case 5:return Hp(c),null;case 13:if(jr(zr),o=c.memoizedState,o!==null&&o.dehydrated!==null){if(c.alternate===null)throw Error(r(340));Gl()}return o=c.flags,o&65536?(c.flags=o&-65537|128,c):null;case 19:return jr(zr),null;case 4:return Ql(),null;case 10:return Up(c.type._context),null;case 22:case 23:return _g(),null;case 24:return null;default:return null}}var wf=!1,cs=!1,FI=typeof WeakSet=="function"?WeakSet:Set,Ye=null;function ec(o,c){var h=o.ref;if(h!==null)if(typeof h=="function")try{h(null)}catch(g){Yr(o,c,g)}else h.current=null}function mg(o,c,h){try{h()}catch(g){Yr(o,c,g)}}var q1=!1;function LI(o,c){if(_p=Di,o=jb(),vp(o)){if("selectionStart"in o)var h={start:o.selectionStart,end:o.selectionEnd};else e:{h=(h=o.ownerDocument)&&h.defaultView||window;var g=h.getSelection&&h.getSelection();if(g&&g.rangeCount!==0){h=g.anchorNode;var w=g.anchorOffset,N=g.focusNode;g=g.focusOffset;try{h.nodeType,N.nodeType}catch{h=null;break e}var P=0,F=-1,G=-1,ve=0,Ae=0,Ie=o,Ee=null;t:for(;;){for(var Ke;Ie!==h||w!==0&&Ie.nodeType!==3||(F=P+w),Ie!==N||g!==0&&Ie.nodeType!==3||(G=P+g),Ie.nodeType===3&&(P+=Ie.nodeValue.length),(Ke=Ie.firstChild)!==null;)Ee=Ie,Ie=Ke;for(;;){if(Ie===o)break t;if(Ee===h&&++ve===w&&(F=P),Ee===N&&++Ae===g&&(G=P),(Ke=Ie.nextSibling)!==null)break;Ie=Ee,Ee=Ie.parentNode}Ie=Ke}h=F===-1||G===-1?null:{start:F,end:G}}else h=null}h=h||{start:0,end:0}}else h=null;for(Cp={focusedElem:o,selectionRange:h},Di=!1,Ye=c;Ye!==null;)if(c=Ye,o=c.child,(c.subtreeFlags&1028)!==0&&o!==null)o.return=c,Ye=o;else for(;Ye!==null;){c=Ye;try{var Xe=c.alternate;if((c.flags&1024)!==0)switch(c.tag){case 0:case 11:case 15:break;case 1:if(Xe!==null){var Qe=Xe.memoizedProps,Xr=Xe.memoizedState,fe=c.stateNode,te=fe.getSnapshotBeforeUpdate(c.elementType===c.type?Qe:Li(c.type,Qe),Xr);fe.__reactInternalSnapshotBeforeUpdate=te}break;case 3:var he=c.stateNode.containerInfo;he.nodeType===1?he.textContent="":he.nodeType===9&&he.documentElement&&he.removeChild(he.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(r(163))}}catch(Me){Yr(c,c.return,Me)}if(o=c.sibling,o!==null){o.return=c.return,Ye=o;break}Ye=c.return}return Xe=q1,q1=!1,Xe}function _u(o,c,h){var g=c.updateQueue;if(g=g!==null?g.lastEffect:null,g!==null){var w=g=g.next;do{if((w.tag&o)===o){var N=w.destroy;w.destroy=void 0,N!==void 0&&mg(c,h,N)}w=w.next}while(w!==g)}}function bf(o,c){if(c=c.updateQueue,c=c!==null?c.lastEffect:null,c!==null){var h=c=c.next;do{if((h.tag&o)===o){var g=h.create;h.destroy=g()}h=h.next}while(h!==c)}}function pg(o){var c=o.ref;if(c!==null){var h=o.stateNode;switch(o.tag){case 5:o=h;break;default:o=h}typeof c=="function"?c(o):c.current=o}}function V1(o){var c=o.alternate;c!==null&&(o.alternate=null,V1(c)),o.child=null,o.deletions=null,o.sibling=null,o.tag===5&&(c=o.stateNode,c!==null&&(delete c[aa],delete c[pu],delete c[Op],delete c[bI],delete c[jI])),o.stateNode=null,o.return=null,o.dependencies=null,o.memoizedProps=null,o.memoizedState=null,o.pendingProps=null,o.stateNode=null,o.updateQueue=null}function H1(o){return o.tag===5||o.tag===3||o.tag===4}function K1(o){e:for(;;){for(;o.sibling===null;){if(o.return===null||H1(o.return))return null;o=o.return}for(o.sibling.return=o.return,o=o.sibling;o.tag!==5&&o.tag!==6&&o.tag!==18;){if(o.flags&2||o.child===null||o.tag===4)continue e;o.child.return=o,o=o.child}if(!(o.flags&2))return o.stateNode}}function gg(o,c,h){var g=o.tag;if(g===5||g===6)o=o.stateNode,c?h.nodeType===8?h.parentNode.insertBefore(o,c):h.insertBefore(o,c):(h.nodeType===8?(c=h.parentNode,c.insertBefore(o,h)):(c=h,c.appendChild(o)),h=h._reactRootContainer,h!=null||c.onclick!==null||(c.onclick=Xd));else if(g!==4&&(o=o.child,o!==null))for(gg(o,c,h),o=o.sibling;o!==null;)gg(o,c,h),o=o.sibling}function yg(o,c,h){var g=o.tag;if(g===5||g===6)o=o.stateNode,c?h.insertBefore(o,c):h.appendChild(o);else if(g!==4&&(o=o.child,o!==null))for(yg(o,c,h),o=o.sibling;o!==null;)yg(o,c,h),o=o.sibling}var Jn=null,zi=!1;function xo(o,c,h){for(h=h.child;h!==null;)G1(o,c,h),h=h.sibling}function G1(o,c,h){if(ht&&typeof ht.onCommitFiberUnmount=="function")try{ht.onCommitFiberUnmount(Ne,h)}catch{}switch(h.tag){case 5:cs||ec(h,c);case 6:var g=Jn,w=zi;Jn=null,xo(o,c,h),Jn=g,zi=w,Jn!==null&&(zi?(o=Jn,h=h.stateNode,o.nodeType===8?o.parentNode.removeChild(h):o.removeChild(h)):Jn.removeChild(h.stateNode));break;case 18:Jn!==null&&(zi?(o=Jn,h=h.stateNode,o.nodeType===8?Pp(o.parentNode,h):o.nodeType===1&&Pp(o,h),jn(o)):Pp(Jn,h.stateNode));break;case 4:g=Jn,w=zi,Jn=h.stateNode.containerInfo,zi=!0,xo(o,c,h),Jn=g,zi=w;break;case 0:case 11:case 14:case 15:if(!cs&&(g=h.updateQueue,g!==null&&(g=g.lastEffect,g!==null))){w=g=g.next;do{var N=w,P=N.destroy;N=N.tag,P!==void 0&&((N&2)!==0||(N&4)!==0)&&mg(h,c,P),w=w.next}while(w!==g)}xo(o,c,h);break;case 1:if(!cs&&(ec(h,c),g=h.stateNode,typeof g.componentWillUnmount=="function"))try{g.props=h.memoizedProps,g.state=h.memoizedState,g.componentWillUnmount()}catch(F){Yr(h,c,F)}xo(o,c,h);break;case 21:xo(o,c,h);break;case 22:h.mode&1?(cs=(g=cs)||h.memoizedState!==null,xo(o,c,h),cs=g):xo(o,c,h);break;default:xo(o,c,h)}}function Y1(o){var c=o.updateQueue;if(c!==null){o.updateQueue=null;var h=o.stateNode;h===null&&(h=o.stateNode=new FI),c.forEach(function(g){var w=GI.bind(null,o,g);h.has(g)||(h.add(g),g.then(w,w))})}}function Ui(o,c){var h=c.deletions;if(h!==null)for(var g=0;g<h.length;g++){var w=h[g];try{var N=o,P=c,F=P;e:for(;F!==null;){switch(F.tag){case 5:Jn=F.stateNode,zi=!1;break e;case 3:Jn=F.stateNode.containerInfo,zi=!0;break e;case 4:Jn=F.stateNode.containerInfo,zi=!0;break e}F=F.return}if(Jn===null)throw Error(r(160));G1(N,P,w),Jn=null,zi=!1;var G=w.alternate;G!==null&&(G.return=null),w.return=null}catch(ve){Yr(w,c,ve)}}if(c.subtreeFlags&12854)for(c=c.child;c!==null;)J1(c,o),c=c.sibling}function J1(o,c){var h=o.alternate,g=o.flags;switch(o.tag){case 0:case 11:case 14:case 15:if(Ui(c,o),ca(o),g&4){try{_u(3,o,o.return),bf(3,o)}catch(Qe){Yr(o,o.return,Qe)}try{_u(5,o,o.return)}catch(Qe){Yr(o,o.return,Qe)}}break;case 1:Ui(c,o),ca(o),g&512&&h!==null&&ec(h,h.return);break;case 5:if(Ui(c,o),ca(o),g&512&&h!==null&&ec(h,h.return),o.flags&32){var w=o.stateNode;try{tr(w,"")}catch(Qe){Yr(o,o.return,Qe)}}if(g&4&&(w=o.stateNode,w!=null)){var N=o.memoizedProps,P=h!==null?h.memoizedProps:N,F=o.type,G=o.updateQueue;if(o.updateQueue=null,G!==null)try{F==="input"&&N.type==="radio"&&N.name!=null&&ft(w,N),_r(F,P);var ve=_r(F,N);for(P=0;P<G.length;P+=2){var Ae=G[P],Ie=G[P+1];Ae==="style"?$t(w,Ie):Ae==="dangerouslySetInnerHTML"?Pt(w,Ie):Ae==="children"?tr(w,Ie):C(w,Ae,Ie,ve)}switch(F){case"input":Dt(w,N);break;case"textarea":ye(w,N);break;case"select":var Ee=w._wrapperState.wasMultiple;w._wrapperState.wasMultiple=!!N.multiple;var Ke=N.value;Ke!=null?ie(w,!!N.multiple,Ke,!1):Ee!==!!N.multiple&&(N.defaultValue!=null?ie(w,!!N.multiple,N.defaultValue,!0):ie(w,!!N.multiple,N.multiple?[]:"",!1))}w[pu]=N}catch(Qe){Yr(o,o.return,Qe)}}break;case 6:if(Ui(c,o),ca(o),g&4){if(o.stateNode===null)throw Error(r(162));w=o.stateNode,N=o.memoizedProps;try{w.nodeValue=N}catch(Qe){Yr(o,o.return,Qe)}}break;case 3:if(Ui(c,o),ca(o),g&4&&h!==null&&h.memoizedState.isDehydrated)try{jn(c.containerInfo)}catch(Qe){Yr(o,o.return,Qe)}break;case 4:Ui(c,o),ca(o);break;case 13:Ui(c,o),ca(o),w=o.child,w.flags&8192&&(N=w.memoizedState!==null,w.stateNode.isHidden=N,!N||w.alternate!==null&&w.alternate.memoizedState!==null||(wg=Ft())),g&4&&Y1(o);break;case 22:if(Ae=h!==null&&h.memoizedState!==null,o.mode&1?(cs=(ve=cs)||Ae,Ui(c,o),cs=ve):Ui(c,o),ca(o),g&8192){if(ve=o.memoizedState!==null,(o.stateNode.isHidden=ve)&&!Ae&&(o.mode&1)!==0)for(Ye=o,Ae=o.child;Ae!==null;){for(Ie=Ye=Ae;Ye!==null;){switch(Ee=Ye,Ke=Ee.child,Ee.tag){case 0:case 11:case 14:case 15:_u(4,Ee,Ee.return);break;case 1:ec(Ee,Ee.return);var Xe=Ee.stateNode;if(typeof Xe.componentWillUnmount=="function"){g=Ee,h=Ee.return;try{c=g,Xe.props=c.memoizedProps,Xe.state=c.memoizedState,Xe.componentWillUnmount()}catch(Qe){Yr(g,h,Qe)}}break;case 5:ec(Ee,Ee.return);break;case 22:if(Ee.memoizedState!==null){Z1(Ie);continue}}Ke!==null?(Ke.return=Ee,Ye=Ke):Z1(Ie)}Ae=Ae.sibling}e:for(Ae=null,Ie=o;;){if(Ie.tag===5){if(Ae===null){Ae=Ie;try{w=Ie.stateNode,ve?(N=w.style,typeof N.setProperty=="function"?N.setProperty("display","none","important"):N.display="none"):(F=Ie.stateNode,G=Ie.memoizedProps.style,P=G!=null&&G.hasOwnProperty("display")?G.display:null,F.style.display=yr("display",P))}catch(Qe){Yr(o,o.return,Qe)}}}else if(Ie.tag===6){if(Ae===null)try{Ie.stateNode.nodeValue=ve?"":Ie.memoizedProps}catch(Qe){Yr(o,o.return,Qe)}}else if((Ie.tag!==22&&Ie.tag!==23||Ie.memoizedState===null||Ie===o)&&Ie.child!==null){Ie.child.return=Ie,Ie=Ie.child;continue}if(Ie===o)break e;for(;Ie.sibling===null;){if(Ie.return===null||Ie.return===o)break e;Ae===Ie&&(Ae=null),Ie=Ie.return}Ae===Ie&&(Ae=null),Ie.sibling.return=Ie.return,Ie=Ie.sibling}}break;case 19:Ui(c,o),ca(o),g&4&&Y1(o);break;case 21:break;default:Ui(c,o),ca(o)}}function ca(o){var c=o.flags;if(c&2){try{e:{for(var h=o.return;h!==null;){if(H1(h)){var g=h;break e}h=h.return}throw Error(r(160))}switch(g.tag){case 5:var w=g.stateNode;g.flags&32&&(tr(w,""),g.flags&=-33);var N=K1(o);yg(o,N,w);break;case 3:case 4:var P=g.stateNode.containerInfo,F=K1(o);gg(o,F,P);break;default:throw Error(r(161))}}catch(G){Yr(o,o.return,G)}o.flags&=-3}c&4096&&(o.flags&=-4097)}function zI(o,c,h){Ye=o,X1(o)}function X1(o,c,h){for(var g=(o.mode&1)!==0;Ye!==null;){var w=Ye,N=w.child;if(w.tag===22&&g){var P=w.memoizedState!==null||wf;if(!P){var F=w.alternate,G=F!==null&&F.memoizedState!==null||cs;F=wf;var ve=cs;if(wf=P,(cs=G)&&!ve)for(Ye=w;Ye!==null;)P=Ye,G=P.child,P.tag===22&&P.memoizedState!==null?ej(w):G!==null?(G.return=P,Ye=G):ej(w);for(;N!==null;)Ye=N,X1(N),N=N.sibling;Ye=w,wf=F,cs=ve}Q1(o)}else(w.subtreeFlags&8772)!==0&&N!==null?(N.return=w,Ye=N):Q1(o)}}function Q1(o){for(;Ye!==null;){var c=Ye;if((c.flags&8772)!==0){var h=c.alternate;try{if((c.flags&8772)!==0)switch(c.tag){case 0:case 11:case 15:cs||bf(5,c);break;case 1:var g=c.stateNode;if(c.flags&4&&!cs)if(h===null)g.componentDidMount();else{var w=c.elementType===c.type?h.memoizedProps:Li(c.type,h.memoizedProps);g.componentDidUpdate(w,h.memoizedState,g.__reactInternalSnapshotBeforeUpdate)}var N=c.updateQueue;N!==null&&Zb(c,N,g);break;case 3:var P=c.updateQueue;if(P!==null){if(h=null,c.child!==null)switch(c.child.tag){case 5:h=c.child.stateNode;break;case 1:h=c.child.stateNode}Zb(c,P,h)}break;case 5:var F=c.stateNode;if(h===null&&c.flags&4){h=F;var G=c.memoizedProps;switch(c.type){case"button":case"input":case"select":case"textarea":G.autoFocus&&h.focus();break;case"img":G.src&&(h.src=G.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(c.memoizedState===null){var ve=c.alternate;if(ve!==null){var Ae=ve.memoizedState;if(Ae!==null){var Ie=Ae.dehydrated;Ie!==null&&jn(Ie)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(r(163))}cs||c.flags&512&&pg(c)}catch(Ee){Yr(c,c.return,Ee)}}if(c===o){Ye=null;break}if(h=c.sibling,h!==null){h.return=c.return,Ye=h;break}Ye=c.return}}function Z1(o){for(;Ye!==null;){var c=Ye;if(c===o){Ye=null;break}var h=c.sibling;if(h!==null){h.return=c.return,Ye=h;break}Ye=c.return}}function ej(o){for(;Ye!==null;){var c=Ye;try{switch(c.tag){case 0:case 11:case 15:var h=c.return;try{bf(4,c)}catch(G){Yr(c,h,G)}break;case 1:var g=c.stateNode;if(typeof g.componentDidMount=="function"){var w=c.return;try{g.componentDidMount()}catch(G){Yr(c,w,G)}}var N=c.return;try{pg(c)}catch(G){Yr(c,N,G)}break;case 5:var P=c.return;try{pg(c)}catch(G){Yr(c,P,G)}}}catch(G){Yr(c,c.return,G)}if(c===o){Ye=null;break}var F=c.sibling;if(F!==null){F.return=c.return,Ye=F;break}Ye=c.return}}var UI=Math.ceil,jf=O.ReactCurrentDispatcher,vg=O.ReactCurrentOwner,pi=O.ReactCurrentBatchConfig,Ut=0,Mn=null,cn=null,Xn=0,Ks=0,tc=mo(0),kn=0,Cu=null,Zo=0,Sf=0,xg=0,Eu=null,Os=null,wg=0,rc=1/0,Ia=null,kf=!1,bg=null,wo=null,Nf=!1,bo=null,_f=0,Au=0,jg=null,Cf=-1,Ef=0;function ps(){return(Ut&6)!==0?Ft():Cf!==-1?Cf:Cf=Ft()}function jo(o){return(o.mode&1)===0?1:(Ut&2)!==0&&Xn!==0?Xn&-Xn:kI.transition!==null?(Ef===0&&(Ef=lo()),Ef):(o=Ct,o!==0||(o=window.event,o=o===void 0?16:I(o.type)),o)}function Bi(o,c,h,g){if(50<Au)throw Au=0,jg=null,Error(r(185));Ai(o,h,g),((Ut&2)===0||o!==Mn)&&(o===Mn&&((Ut&2)===0&&(Sf|=h),kn===4&&So(o,Xn)),Ts(o,g),h===1&&Ut===0&&(c.mode&1)===0&&(rc=Ft()+500,tf&&go()))}function Ts(o,c){var h=o.callbackNode;ra(o,c);var g=rr(o,o===Mn?Xn:0);if(g===0)h!==null&&on(h),o.callbackNode=null,o.callbackPriority=0;else if(c=g&-g,o.callbackPriority!==c){if(h!=null&&on(h),c===1)o.tag===0?SI(rj.bind(null,o)):Ub(rj.bind(null,o)),xI(function(){(Ut&6)===0&&go()}),h=null;else{switch(ln(g)){case 1:h=ae;break;case 4:h=ke;break;case 16:h=De;break;case 536870912:h=Ve;break;default:h=De}h=uj(h,tj.bind(null,o))}o.callbackPriority=c,o.callbackNode=h}}function tj(o,c){if(Cf=-1,Ef=0,(Ut&6)!==0)throw Error(r(327));var h=o.callbackNode;if(nc()&&o.callbackNode!==h)return null;var g=rr(o,o===Mn?Xn:0);if(g===0)return null;if((g&30)!==0||(g&o.expiredLanes)!==0||c)c=Af(o,g);else{c=g;var w=Ut;Ut|=2;var N=sj();(Mn!==o||Xn!==c)&&(Ia=null,rc=Ft()+500,tl(o,c));do try{qI();break}catch(F){nj(o,F)}while(!0);zp(),jf.current=N,Ut=w,cn!==null?c=0:(Mn=null,Xn=0,c=kn)}if(c!==0){if(c===2&&(w=na(o),w!==0&&(g=w,c=Sg(o,w))),c===1)throw h=Cu,tl(o,0),So(o,g),Ts(o,Ft()),h;if(c===6)So(o,g);else{if(w=o.current.alternate,(g&30)===0&&!BI(w)&&(c=Af(o,g),c===2&&(N=na(o),N!==0&&(g=N,c=Sg(o,N))),c===1))throw h=Cu,tl(o,0),So(o,g),Ts(o,Ft()),h;switch(o.finishedWork=w,o.finishedLanes=g,c){case 0:case 1:throw Error(r(345));case 2:rl(o,Os,Ia);break;case 3:if(So(o,g),(g&130023424)===g&&(c=wg+500-Ft(),10<c)){if(rr(o,0)!==0)break;if(w=o.suspendedLanes,(w&g)!==g){ps(),o.pingedLanes|=o.suspendedLanes&w;break}o.timeoutHandle=Ap(rl.bind(null,o,Os,Ia),c);break}rl(o,Os,Ia);break;case 4:if(So(o,g),(g&4194240)===g)break;for(c=o.eventTimes,w=-1;0<g;){var P=31-gt(g);N=1<<P,P=c[P],P>w&&(w=P),g&=~N}if(g=w,g=Ft()-g,g=(120>g?120:480>g?480:1080>g?1080:1920>g?1920:3e3>g?3e3:4320>g?4320:1960*UI(g/1960))-g,10<g){o.timeoutHandle=Ap(rl.bind(null,o,Os,Ia),g);break}rl(o,Os,Ia);break;case 5:rl(o,Os,Ia);break;default:throw Error(r(329))}}}return Ts(o,Ft()),o.callbackNode===h?tj.bind(null,o):null}function Sg(o,c){var h=Eu;return o.current.memoizedState.isDehydrated&&(tl(o,c).flags|=256),o=Af(o,c),o!==2&&(c=Os,Os=h,c!==null&&kg(c)),o}function kg(o){Os===null?Os=o:Os.push.apply(Os,o)}function BI(o){for(var c=o;;){if(c.flags&16384){var h=c.updateQueue;if(h!==null&&(h=h.stores,h!==null))for(var g=0;g<h.length;g++){var w=h[g],N=w.getSnapshot;w=w.value;try{if(!Mi(N(),w))return!1}catch{return!1}}}if(h=c.child,c.subtreeFlags&16384&&h!==null)h.return=c,c=h;else{if(c===o)break;for(;c.sibling===null;){if(c.return===null||c.return===o)return!0;c=c.return}c.sibling.return=c.return,c=c.sibling}}return!0}function So(o,c){for(c&=~xg,c&=~Sf,o.suspendedLanes|=c,o.pingedLanes&=~c,o=o.expirationTimes;0<c;){var h=31-gt(c),g=1<<h;o[h]=-1,c&=~g}}function rj(o){if((Ut&6)!==0)throw Error(r(327));nc();var c=rr(o,0);if((c&1)===0)return Ts(o,Ft()),null;var h=Af(o,c);if(o.tag!==0&&h===2){var g=na(o);g!==0&&(c=g,h=Sg(o,g))}if(h===1)throw h=Cu,tl(o,0),So(o,c),Ts(o,Ft()),h;if(h===6)throw Error(r(345));return o.finishedWork=o.current.alternate,o.finishedLanes=c,rl(o,Os,Ia),Ts(o,Ft()),null}function Ng(o,c){var h=Ut;Ut|=1;try{return o(c)}finally{Ut=h,Ut===0&&(rc=Ft()+500,tf&&go())}}function el(o){bo!==null&&bo.tag===0&&(Ut&6)===0&&nc();var c=Ut;Ut|=1;var h=pi.transition,g=Ct;try{if(pi.transition=null,Ct=1,o)return o()}finally{Ct=g,pi.transition=h,Ut=c,(Ut&6)===0&&go()}}function _g(){Ks=tc.current,jr(tc)}function tl(o,c){o.finishedWork=null,o.finishedLanes=0;var h=o.timeoutHandle;if(h!==-1&&(o.timeoutHandle=-1,vI(h)),cn!==null)for(h=cn.return;h!==null;){var g=h;switch(Rp(g),g.tag){case 1:g=g.type.childContextTypes,g!=null&&Zd();break;case 3:Ql(),jr(Es),jr(as),Gp();break;case 5:Hp(g);break;case 4:Ql();break;case 13:jr(zr);break;case 19:jr(zr);break;case 10:Up(g.type._context);break;case 22:case 23:_g()}h=h.return}if(Mn=o,cn=o=ko(o.current,null),Xn=Ks=c,kn=0,Cu=null,xg=Sf=Zo=0,Os=Eu=null,Jo!==null){for(c=0;c<Jo.length;c++)if(h=Jo[c],g=h.interleaved,g!==null){h.interleaved=null;var w=g.next,N=h.pending;if(N!==null){var P=N.next;N.next=w,g.next=P}h.pending=g}Jo=null}return o}function nj(o,c){do{var h=cn;try{if(zp(),ff.current=gf,hf){for(var g=Ur.memoizedState;g!==null;){var w=g.queue;w!==null&&(w.pending=null),g=g.next}hf=!1}if(Qo=0,$n=Sn=Ur=null,bu=!1,ju=0,vg.current=null,h===null||h.return===null){kn=1,Cu=c,cn=null;break}e:{var N=o,P=h.return,F=h,G=c;if(c=Xn,F.flags|=32768,G!==null&&typeof G=="object"&&typeof G.then=="function"){var ve=G,Ae=F,Ie=Ae.tag;if((Ae.mode&1)===0&&(Ie===0||Ie===11||Ie===15)){var Ee=Ae.alternate;Ee?(Ae.updateQueue=Ee.updateQueue,Ae.memoizedState=Ee.memoizedState,Ae.lanes=Ee.lanes):(Ae.updateQueue=null,Ae.memoizedState=null)}var Ke=E1(P);if(Ke!==null){Ke.flags&=-257,A1(Ke,P,F,N,c),Ke.mode&1&&C1(N,ve,c),c=Ke,G=ve;var Xe=c.updateQueue;if(Xe===null){var Qe=new Set;Qe.add(G),c.updateQueue=Qe}else Xe.add(G);break e}else{if((c&1)===0){C1(N,ve,c),Cg();break e}G=Error(r(426))}}else if(Ir&&F.mode&1){var Xr=E1(P);if(Xr!==null){(Xr.flags&65536)===0&&(Xr.flags|=256),A1(Xr,P,F,N,c),Fp(Zl(G,F));break e}}N=G=Zl(G,F),kn!==4&&(kn=2),Eu===null?Eu=[N]:Eu.push(N),N=P;do{switch(N.tag){case 3:N.flags|=65536,c&=-c,N.lanes|=c;var fe=N1(N,G,c);Qb(N,fe);break e;case 1:F=G;var te=N.type,he=N.stateNode;if((N.flags&128)===0&&(typeof te.getDerivedStateFromError=="function"||he!==null&&typeof he.componentDidCatch=="function"&&(wo===null||!wo.has(he)))){N.flags|=65536,c&=-c,N.lanes|=c;var Me=_1(N,F,c);Qb(N,Me);break e}}N=N.return}while(N!==null)}aj(h)}catch(tt){c=tt,cn===h&&h!==null&&(cn=h=h.return);continue}break}while(!0)}function sj(){var o=jf.current;return jf.current=gf,o===null?gf:o}function Cg(){(kn===0||kn===3||kn===2)&&(kn=4),Mn===null||(Zo&268435455)===0&&(Sf&268435455)===0||So(Mn,Xn)}function Af(o,c){var h=Ut;Ut|=2;var g=sj();(Mn!==o||Xn!==c)&&(Ia=null,tl(o,c));do try{WI();break}catch(w){nj(o,w)}while(!0);if(zp(),Ut=h,jf.current=g,cn!==null)throw Error(r(261));return Mn=null,Xn=0,kn}function WI(){for(;cn!==null;)ij(cn)}function qI(){for(;cn!==null&&!xn();)ij(cn)}function ij(o){var c=cj(o.alternate,o,Ks);o.memoizedProps=o.pendingProps,c===null?aj(o):cn=c,vg.current=null}function aj(o){var c=o;do{var h=c.alternate;if(o=c.return,(c.flags&32768)===0){if(h=$I(h,c,Ks),h!==null){cn=h;return}}else{if(h=MI(h,c),h!==null){h.flags&=32767,cn=h;return}if(o!==null)o.flags|=32768,o.subtreeFlags=0,o.deletions=null;else{kn=6,cn=null;return}}if(c=c.sibling,c!==null){cn=c;return}cn=c=o}while(c!==null);kn===0&&(kn=5)}function rl(o,c,h){var g=Ct,w=pi.transition;try{pi.transition=null,Ct=1,VI(o,c,h,g)}finally{pi.transition=w,Ct=g}return null}function VI(o,c,h,g){do nc();while(bo!==null);if((Ut&6)!==0)throw Error(r(327));h=o.finishedWork;var w=o.finishedLanes;if(h===null)return null;if(o.finishedWork=null,o.finishedLanes=0,h===o.current)throw Error(r(177));o.callbackNode=null,o.callbackPriority=0;var N=h.lanes|h.childLanes;if(ka(o,N),o===Mn&&(cn=Mn=null,Xn=0),(h.subtreeFlags&2064)===0&&(h.flags&2064)===0||Nf||(Nf=!0,uj(De,function(){return nc(),null})),N=(h.flags&15990)!==0,(h.subtreeFlags&15990)!==0||N){N=pi.transition,pi.transition=null;var P=Ct;Ct=1;var F=Ut;Ut|=4,vg.current=null,LI(o,h),J1(h,o),dI(Cp),Di=!!_p,Cp=_p=null,o.current=h,zI(h),Ns(),Ut=F,Ct=P,pi.transition=N}else o.current=h;if(Nf&&(Nf=!1,bo=o,_f=w),N=o.pendingLanes,N===0&&(wo=null),pt(h.stateNode),Ts(o,Ft()),c!==null)for(g=o.onRecoverableError,h=0;h<c.length;h++)w=c[h],g(w.value,{componentStack:w.stack,digest:w.digest});if(kf)throw kf=!1,o=bg,bg=null,o;return(_f&1)!==0&&o.tag!==0&&nc(),N=o.pendingLanes,(N&1)!==0?o===jg?Au++:(Au=0,jg=o):Au=0,go(),null}function nc(){if(bo!==null){var o=ln(_f),c=pi.transition,h=Ct;try{if(pi.transition=null,Ct=16>o?16:o,bo===null)var g=!1;else{if(o=bo,bo=null,_f=0,(Ut&6)!==0)throw Error(r(331));var w=Ut;for(Ut|=4,Ye=o.current;Ye!==null;){var N=Ye,P=N.child;if((Ye.flags&16)!==0){var F=N.deletions;if(F!==null){for(var G=0;G<F.length;G++){var ve=F[G];for(Ye=ve;Ye!==null;){var Ae=Ye;switch(Ae.tag){case 0:case 11:case 15:_u(8,Ae,N)}var Ie=Ae.child;if(Ie!==null)Ie.return=Ae,Ye=Ie;else for(;Ye!==null;){Ae=Ye;var Ee=Ae.sibling,Ke=Ae.return;if(V1(Ae),Ae===ve){Ye=null;break}if(Ee!==null){Ee.return=Ke,Ye=Ee;break}Ye=Ke}}}var Xe=N.alternate;if(Xe!==null){var Qe=Xe.child;if(Qe!==null){Xe.child=null;do{var Xr=Qe.sibling;Qe.sibling=null,Qe=Xr}while(Qe!==null)}}Ye=N}}if((N.subtreeFlags&2064)!==0&&P!==null)P.return=N,Ye=P;else e:for(;Ye!==null;){if(N=Ye,(N.flags&2048)!==0)switch(N.tag){case 0:case 11:case 15:_u(9,N,N.return)}var fe=N.sibling;if(fe!==null){fe.return=N.return,Ye=fe;break e}Ye=N.return}}var te=o.current;for(Ye=te;Ye!==null;){P=Ye;var he=P.child;if((P.subtreeFlags&2064)!==0&&he!==null)he.return=P,Ye=he;else e:for(P=te;Ye!==null;){if(F=Ye,(F.flags&2048)!==0)try{switch(F.tag){case 0:case 11:case 15:bf(9,F)}}catch(tt){Yr(F,F.return,tt)}if(F===P){Ye=null;break e}var Me=F.sibling;if(Me!==null){Me.return=F.return,Ye=Me;break e}Ye=F.return}}if(Ut=w,go(),ht&&typeof ht.onPostCommitFiberRoot=="function")try{ht.onPostCommitFiberRoot(Ne,o)}catch{}g=!0}return g}finally{Ct=h,pi.transition=c}}return!1}function oj(o,c,h){c=Zl(h,c),c=N1(o,c,1),o=vo(o,c,1),c=ps(),o!==null&&(Ai(o,1,c),Ts(o,c))}function Yr(o,c,h){if(o.tag===3)oj(o,o,h);else for(;c!==null;){if(c.tag===3){oj(c,o,h);break}else if(c.tag===1){var g=c.stateNode;if(typeof c.type.getDerivedStateFromError=="function"||typeof g.componentDidCatch=="function"&&(wo===null||!wo.has(g))){o=Zl(h,o),o=_1(c,o,1),c=vo(c,o,1),o=ps(),c!==null&&(Ai(c,1,o),Ts(c,o));break}}c=c.return}}function HI(o,c,h){var g=o.pingCache;g!==null&&g.delete(c),c=ps(),o.pingedLanes|=o.suspendedLanes&h,Mn===o&&(Xn&h)===h&&(kn===4||kn===3&&(Xn&130023424)===Xn&&500>Ft()-wg?tl(o,0):xg|=h),Ts(o,c)}function lj(o,c){c===0&&((o.mode&1)===0?c=1:(c=_t,_t<<=1,(_t&130023424)===0&&(_t=4194304)));var h=ps();o=Pa(o,c),o!==null&&(Ai(o,c,h),Ts(o,h))}function KI(o){var c=o.memoizedState,h=0;c!==null&&(h=c.retryLane),lj(o,h)}function GI(o,c){var h=0;switch(o.tag){case 13:var g=o.stateNode,w=o.memoizedState;w!==null&&(h=w.retryLane);break;case 19:g=o.stateNode;break;default:throw Error(r(314))}g!==null&&g.delete(c),lj(o,h)}var cj;cj=function(o,c,h){if(o!==null)if(o.memoizedProps!==c.pendingProps||Es.current)Ps=!0;else{if((o.lanes&h)===0&&(c.flags&128)===0)return Ps=!1,RI(o,c,h);Ps=(o.flags&131072)!==0}else Ps=!1,Ir&&(c.flags&1048576)!==0&&Bb(c,nf,c.index);switch(c.lanes=0,c.tag){case 2:var g=c.type;xf(o,c),o=c.pendingProps;var w=Vl(c,as.current);Xl(c,h),w=Xp(null,c,g,o,w,h);var N=Qp();return c.flags|=1,typeof w=="object"&&w!==null&&typeof w.render=="function"&&w.$$typeof===void 0?(c.tag=1,c.memoizedState=null,c.updateQueue=null,As(g)?(N=!0,ef(c)):N=!1,c.memoizedState=w.state!==null&&w.state!==void 0?w.state:null,qp(c),w.updater=yf,c.stateNode=w,w._reactInternals=c,sg(c,g,o,h),c=lg(null,c,g,!0,N,h)):(c.tag=0,Ir&&N&&Dp(c),ms(null,c,w,h),c=c.child),c;case 16:g=c.elementType;e:{switch(xf(o,c),o=c.pendingProps,w=g._init,g=w(g._payload),c.type=g,w=c.tag=JI(g),o=Li(g,o),w){case 0:c=og(null,c,g,o,h);break e;case 1:c=R1(null,c,g,o,h);break e;case 11:c=P1(null,c,g,o,h);break e;case 14:c=O1(null,c,g,Li(g.type,o),h);break e}throw Error(r(306,g,""))}return c;case 0:return g=c.type,w=c.pendingProps,w=c.elementType===g?w:Li(g,w),og(o,c,g,w,h);case 1:return g=c.type,w=c.pendingProps,w=c.elementType===g?w:Li(g,w),R1(o,c,g,w,h);case 3:e:{if($1(c),o===null)throw Error(r(387));g=c.pendingProps,N=c.memoizedState,w=N.element,Xb(o,c),uf(c,g,null,h);var P=c.memoizedState;if(g=P.element,N.isDehydrated)if(N={element:g,isDehydrated:!1,cache:P.cache,pendingSuspenseBoundaries:P.pendingSuspenseBoundaries,transitions:P.transitions},c.updateQueue.baseState=N,c.memoizedState=N,c.flags&256){w=Zl(Error(r(423)),c),c=M1(o,c,g,h,w);break e}else if(g!==w){w=Zl(Error(r(424)),c),c=M1(o,c,g,h,w);break e}else for(Hs=ho(c.stateNode.containerInfo.firstChild),Vs=c,Ir=!0,Fi=null,h=Yb(c,null,g,h),c.child=h;h;)h.flags=h.flags&-3|4096,h=h.sibling;else{if(Gl(),g===w){c=Ta(o,c,h);break e}ms(o,c,g,h)}c=c.child}return c;case 5:return e1(c),o===null&&Mp(c),g=c.type,w=c.pendingProps,N=o!==null?o.memoizedProps:null,P=w.children,Ep(g,w)?P=null:N!==null&&Ep(g,N)&&(c.flags|=32),D1(o,c),ms(o,c,P,h),c.child;case 6:return o===null&&Mp(c),null;case 13:return F1(o,c,h);case 4:return Vp(c,c.stateNode.containerInfo),g=c.pendingProps,o===null?c.child=Yl(c,null,g,h):ms(o,c,g,h),c.child;case 11:return g=c.type,w=c.pendingProps,w=c.elementType===g?w:Li(g,w),P1(o,c,g,w,h);case 7:return ms(o,c,c.pendingProps,h),c.child;case 8:return ms(o,c,c.pendingProps.children,h),c.child;case 12:return ms(o,c,c.pendingProps.children,h),c.child;case 10:e:{if(g=c.type._context,w=c.pendingProps,N=c.memoizedProps,P=w.value,hr(of,g._currentValue),g._currentValue=P,N!==null)if(Mi(N.value,P)){if(N.children===w.children&&!Es.current){c=Ta(o,c,h);break e}}else for(N=c.child,N!==null&&(N.return=c);N!==null;){var F=N.dependencies;if(F!==null){P=N.child;for(var G=F.firstContext;G!==null;){if(G.context===g){if(N.tag===1){G=Oa(-1,h&-h),G.tag=2;var ve=N.updateQueue;if(ve!==null){ve=ve.shared;var Ae=ve.pending;Ae===null?G.next=G:(G.next=Ae.next,Ae.next=G),ve.pending=G}}N.lanes|=h,G=N.alternate,G!==null&&(G.lanes|=h),Bp(N.return,h,c),F.lanes|=h;break}G=G.next}}else if(N.tag===10)P=N.type===c.type?null:N.child;else if(N.tag===18){if(P=N.return,P===null)throw Error(r(341));P.lanes|=h,F=P.alternate,F!==null&&(F.lanes|=h),Bp(P,h,c),P=N.sibling}else P=N.child;if(P!==null)P.return=N;else for(P=N;P!==null;){if(P===c){P=null;break}if(N=P.sibling,N!==null){N.return=P.return,P=N;break}P=P.return}N=P}ms(o,c,w.children,h),c=c.child}return c;case 9:return w=c.type,g=c.pendingProps.children,Xl(c,h),w=hi(w),g=g(w),c.flags|=1,ms(o,c,g,h),c.child;case 14:return g=c.type,w=Li(g,c.pendingProps),w=Li(g.type,w),O1(o,c,g,w,h);case 15:return T1(o,c,c.type,c.pendingProps,h);case 17:return g=c.type,w=c.pendingProps,w=c.elementType===g?w:Li(g,w),xf(o,c),c.tag=1,As(g)?(o=!0,ef(c)):o=!1,Xl(c,h),S1(c,g,w),sg(c,g,w,h),lg(null,c,g,!0,o,h);case 19:return z1(o,c,h);case 22:return I1(o,c,h)}throw Error(r(156,c.tag))};function uj(o,c){return Hr(o,c)}function YI(o,c,h,g){this.tag=o,this.key=h,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=c,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=g,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function gi(o,c,h,g){return new YI(o,c,h,g)}function Eg(o){return o=o.prototype,!(!o||!o.isReactComponent)}function JI(o){if(typeof o=="function")return Eg(o)?1:0;if(o!=null){if(o=o.$$typeof,o===K)return 11;if(o===se)return 14}return 2}function ko(o,c){var h=o.alternate;return h===null?(h=gi(o.tag,c,o.key,o.mode),h.elementType=o.elementType,h.type=o.type,h.stateNode=o.stateNode,h.alternate=o,o.alternate=h):(h.pendingProps=c,h.type=o.type,h.flags=0,h.subtreeFlags=0,h.deletions=null),h.flags=o.flags&14680064,h.childLanes=o.childLanes,h.lanes=o.lanes,h.child=o.child,h.memoizedProps=o.memoizedProps,h.memoizedState=o.memoizedState,h.updateQueue=o.updateQueue,c=o.dependencies,h.dependencies=c===null?null:{lanes:c.lanes,firstContext:c.firstContext},h.sibling=o.sibling,h.index=o.index,h.ref=o.ref,h}function Pf(o,c,h,g,w,N){var P=2;if(g=o,typeof o=="function")Eg(o)&&(P=1);else if(typeof o=="string")P=5;else e:switch(o){case L:return nl(h.children,w,N,c);case J:P=8,w|=8;break;case H:return o=gi(12,h,c,w|2),o.elementType=H,o.lanes=N,o;case ce:return o=gi(13,h,c,w),o.elementType=ce,o.lanes=N,o;case z:return o=gi(19,h,c,w),o.elementType=z,o.lanes=N,o;case ue:return Of(h,w,N,c);default:if(typeof o=="object"&&o!==null)switch(o.$$typeof){case me:P=10;break e;case Z:P=9;break e;case K:P=11;break e;case se:P=14;break e;case B:P=16,g=null;break e}throw Error(r(130,o==null?o:typeof o,""))}return c=gi(P,h,c,w),c.elementType=o,c.type=g,c.lanes=N,c}function nl(o,c,h,g){return o=gi(7,o,g,c),o.lanes=h,o}function Of(o,c,h,g){return o=gi(22,o,g,c),o.elementType=ue,o.lanes=h,o.stateNode={isHidden:!1},o}function Ag(o,c,h){return o=gi(6,o,null,c),o.lanes=h,o}function Pg(o,c,h){return c=gi(4,o.children!==null?o.children:[],o.key,c),c.lanes=h,c.stateNode={containerInfo:o.containerInfo,pendingChildren:null,implementation:o.implementation},c}function XI(o,c,h,g,w){this.tag=c,this.containerInfo=o,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Kr(0),this.expirationTimes=Kr(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Kr(0),this.identifierPrefix=g,this.onRecoverableError=w,this.mutableSourceEagerHydrationData=null}function Og(o,c,h,g,w,N,P,F,G){return o=new XI(o,c,h,F,G),c===1?(c=1,N===!0&&(c|=8)):c=0,N=gi(3,null,null,c),o.current=N,N.stateNode=o,N.memoizedState={element:g,isDehydrated:h,cache:null,transitions:null,pendingSuspenseBoundaries:null},qp(N),o}function QI(o,c,h){var g=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:A,key:g==null?null:""+g,children:o,containerInfo:c,implementation:h}}function dj(o){if(!o)return po;o=o._reactInternals;e:{if(Fr(o)!==o||o.tag!==1)throw Error(r(170));var c=o;do{switch(c.tag){case 3:c=c.stateNode.context;break e;case 1:if(As(c.type)){c=c.stateNode.__reactInternalMemoizedMergedChildContext;break e}}c=c.return}while(c!==null);throw Error(r(171))}if(o.tag===1){var h=o.type;if(As(h))return Lb(o,h,c)}return c}function fj(o,c,h,g,w,N,P,F,G){return o=Og(h,g,!0,o,w,N,P,F,G),o.context=dj(null),h=o.current,g=ps(),w=jo(h),N=Oa(g,w),N.callback=c??null,vo(h,N,w),o.current.lanes=w,Ai(o,w,g),Ts(o,g),o}function Tf(o,c,h,g){var w=c.current,N=ps(),P=jo(w);return h=dj(h),c.context===null?c.context=h:c.pendingContext=h,c=Oa(N,P),c.payload={element:o},g=g===void 0?null:g,g!==null&&(c.callback=g),o=vo(w,c,P),o!==null&&(Bi(o,w,P,N),cf(o,w,P)),P}function If(o){if(o=o.current,!o.child)return null;switch(o.child.tag){case 5:return o.child.stateNode;default:return o.child.stateNode}}function hj(o,c){if(o=o.memoizedState,o!==null&&o.dehydrated!==null){var h=o.retryLane;o.retryLane=h!==0&&h<c?h:c}}function Tg(o,c){hj(o,c),(o=o.alternate)&&hj(o,c)}function ZI(){return null}var mj=typeof reportError=="function"?reportError:function(o){console.error(o)};function Ig(o){this._internalRoot=o}Df.prototype.render=Ig.prototype.render=function(o){var c=this._internalRoot;if(c===null)throw Error(r(409));Tf(o,c,null,null)},Df.prototype.unmount=Ig.prototype.unmount=function(){var o=this._internalRoot;if(o!==null){this._internalRoot=null;var c=o.containerInfo;el(function(){Tf(null,o,null,null)}),c[_a]=null}};function Df(o){this._internalRoot=o}Df.prototype.unstable_scheduleHydration=function(o){if(o){var c=bn();o={blockedOn:null,target:o,priority:c};for(var h=0;h<Cs.length&&c!==0&&c<Cs[h].priority;h++);Cs.splice(h,0,o),h===0&&ze(o)}};function Dg(o){return!(!o||o.nodeType!==1&&o.nodeType!==9&&o.nodeType!==11)}function Rf(o){return!(!o||o.nodeType!==1&&o.nodeType!==9&&o.nodeType!==11&&(o.nodeType!==8||o.nodeValue!==" react-mount-point-unstable "))}function pj(){}function eD(o,c,h,g,w){if(w){if(typeof g=="function"){var N=g;g=function(){var ve=If(P);N.call(ve)}}var P=fj(c,g,o,0,null,!1,!1,"",pj);return o._reactRootContainer=P,o[_a]=P.current,hu(o.nodeType===8?o.parentNode:o),el(),P}for(;w=o.lastChild;)o.removeChild(w);if(typeof g=="function"){var F=g;g=function(){var ve=If(G);F.call(ve)}}var G=Og(o,0,!1,null,null,!1,!1,"",pj);return o._reactRootContainer=G,o[_a]=G.current,hu(o.nodeType===8?o.parentNode:o),el(function(){Tf(c,G,h,g)}),G}function $f(o,c,h,g,w){var N=h._reactRootContainer;if(N){var P=N;if(typeof w=="function"){var F=w;w=function(){var G=If(P);F.call(G)}}Tf(c,P,o,w)}else P=eD(h,c,o,w,g);return If(P)}Na=function(o){switch(o.tag){case 3:var c=o.stateNode;if(c.current.memoizedState.isDehydrated){var h=It(c.pendingLanes);h!==0&&(wn(c,h|1),Ts(c,Ft()),(Ut&6)===0&&(rc=Ft()+500,go()))}break;case 13:el(function(){var g=Pa(o,1);if(g!==null){var w=ps();Bi(g,o,1,w)}}),Tg(o,1)}},Lr=function(o){if(o.tag===13){var c=Pa(o,134217728);if(c!==null){var h=ps();Bi(c,o,134217728,h)}Tg(o,134217728)}},Ws=function(o){if(o.tag===13){var c=jo(o),h=Pa(o,c);if(h!==null){var g=ps();Bi(h,o,c,g)}Tg(o,c)}},bn=function(){return Ct},Pi=function(o,c){var h=Ct;try{return Ct=o,c()}finally{Ct=h}},Qt=function(o,c,h){switch(c){case"input":if(Dt(o,h),c=h.name,h.type==="radio"&&c!=null){for(h=o;h.parentNode;)h=h.parentNode;for(h=h.querySelectorAll("input[name="+JSON.stringify(""+c)+'][type="radio"]'),c=0;c<h.length;c++){var g=h[c];if(g!==o&&g.form===o.form){var w=Qd(g);if(!w)throw Error(r(90));V(g),Dt(g,w)}}}break;case"textarea":ye(o,h);break;case"select":c=h.value,c!=null&&ie(o,!!h.multiple,c,!1)}},Wr=Ng,xr=el;var tD={usingClientEntryPoint:!1,Events:[gu,Wl,Qd,Ss,$r,Ng]},Pu={findFiberByHostInstance:Ho,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},rD={bundleType:Pu.bundleType,version:Pu.version,rendererPackageName:Pu.rendererPackageName,rendererConfig:Pu.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:O.ReactCurrentDispatcher,findHostInstanceByFiber:function(o){return o=an(o),o===null?null:o.stateNode},findFiberByHostInstance:Pu.findFiberByHostInstance||ZI,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Mf=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Mf.isDisabled&&Mf.supportsFiber)try{Ne=Mf.inject(rD),ht=Mf}catch{}}return Is.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=tD,Is.createPortal=function(o,c){var h=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Dg(c))throw Error(r(200));return QI(o,c,null,h)},Is.createRoot=function(o,c){if(!Dg(o))throw Error(r(299));var h=!1,g="",w=mj;return c!=null&&(c.unstable_strictMode===!0&&(h=!0),c.identifierPrefix!==void 0&&(g=c.identifierPrefix),c.onRecoverableError!==void 0&&(w=c.onRecoverableError)),c=Og(o,1,!1,null,null,h,!1,g,w),o[_a]=c.current,hu(o.nodeType===8?o.parentNode:o),new Ig(c)},Is.findDOMNode=function(o){if(o==null)return null;if(o.nodeType===1)return o;var c=o._reactInternals;if(c===void 0)throw typeof o.render=="function"?Error(r(188)):(o=Object.keys(o).join(","),Error(r(268,o)));return o=an(c),o=o===null?null:o.stateNode,o},Is.flushSync=function(o){return el(o)},Is.hydrate=function(o,c,h){if(!Rf(c))throw Error(r(200));return $f(null,o,c,!0,h)},Is.hydrateRoot=function(o,c,h){if(!Dg(o))throw Error(r(405));var g=h!=null&&h.hydratedSources||null,w=!1,N="",P=mj;if(h!=null&&(h.unstable_strictMode===!0&&(w=!0),h.identifierPrefix!==void 0&&(N=h.identifierPrefix),h.onRecoverableError!==void 0&&(P=h.onRecoverableError)),c=fj(c,null,o,1,h??null,w,!1,N,P),o[_a]=c.current,hu(o),g)for(o=0;o<g.length;o++)h=g[o],w=h._getVersion,w=w(h._source),c.mutableSourceEagerHydrationData==null?c.mutableSourceEagerHydrationData=[h,w]:c.mutableSourceEagerHydrationData.push(h,w);return new Df(c)},Is.render=function(o,c,h){if(!Rf(c))throw Error(r(200));return $f(null,o,c,!1,h)},Is.unmountComponentAtNode=function(o){if(!Rf(o))throw Error(r(40));return o._reactRootContainer?(el(function(){$f(null,null,o,!1,function(){o._reactRootContainer=null,o[_a]=null})}),!0):!1},Is.unstable_batchedUpdates=Ng,Is.unstable_renderSubtreeIntoContainer=function(o,c,h,g){if(!Rf(h))throw Error(r(200));if(o==null||o._reactInternals===void 0)throw Error(r(38));return $f(o,c,h,!1,g)},Is.version="18.3.1-next-f1338f8080-20240426",Is}var Sj;function pC(){if(Sj)return Fg.exports;Sj=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),Fg.exports=mD(),Fg.exports}var kj;function pD(){if(kj)return Ff;kj=1;var e=pC();return Ff.createRoot=e.createRoot,Ff.hydrateRoot=e.hydrateRoot,Ff}var gD=pD();const yD=Zi(gD);/**
 * react-router v7.9.4
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var Nj="popstate";function vD(e={}){function t(n,s){let{pathname:i,search:l,hash:u}=n.location;return Mv("",{pathname:i,search:l,hash:u},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function r(n,s){return typeof s=="string"?s:id(s)}return wD(t,r,null,e)}function Rr(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function ji(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function xD(){return Math.random().toString(36).substring(2,10)}function _j(e,t){return{usr:e.state,key:e.key,idx:t}}function Mv(e,t,r=null,n){return{pathname:typeof e=="string"?e:e.pathname,search:"",hash:"",...typeof t=="string"?qc(t):t,state:r,key:t&&t.key||n||xD()}}function id({pathname:e="/",search:t="",hash:r=""}){return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function qc(e){let t={};if(e){let r=e.indexOf("#");r>=0&&(t.hash=e.substring(r),e=e.substring(0,r));let n=e.indexOf("?");n>=0&&(t.search=e.substring(n),e=e.substring(0,n)),e&&(t.pathname=e)}return t}function wD(e,t,r,n={}){let{window:s=document.defaultView,v5Compat:i=!1}=n,l=s.history,u="POP",d=null,m=f();m==null&&(m=0,l.replaceState({...l.state,idx:m},""));function f(){return(l.state||{idx:null}).idx}function p(){u="POP";let k=f(),_=k==null?null:k-m;m=k,d&&d({action:u,location:b.location,delta:_})}function y(k,_){u="PUSH";let E=Mv(b.location,k,_);m=f()+1;let C=_j(E,m),O=b.createHref(E);try{l.pushState(C,"",O)}catch(T){if(T instanceof DOMException&&T.name==="DataCloneError")throw T;s.location.assign(O)}i&&d&&d({action:u,location:b.location,delta:1})}function x(k,_){u="REPLACE";let E=Mv(b.location,k,_);m=f();let C=_j(E,m),O=b.createHref(E);l.replaceState(C,"",O),i&&d&&d({action:u,location:b.location,delta:0})}function j(k){return bD(k)}let b={get action(){return u},get location(){return e(s,l)},listen(k){if(d)throw new Error("A history only accepts one active listener");return s.addEventListener(Nj,p),d=k,()=>{s.removeEventListener(Nj,p),d=null}},createHref(k){return t(s,k)},createURL:j,encodeLocation(k){let _=j(k);return{pathname:_.pathname,search:_.search,hash:_.hash}},push:y,replace:x,go(k){return l.go(k)}};return b}function bD(e,t=!1){let r="http://localhost";typeof window<"u"&&(r=window.location.origin!=="null"?window.location.origin:window.location.href),Rr(r,"No window.location.(origin|href) available to create URL");let n=typeof e=="string"?e:id(e);return n=n.replace(/ $/,"%20"),!t&&n.startsWith("//")&&(n=r+n),new URL(n,r)}function gC(e,t,r="/"){return jD(e,t,r,!1)}function jD(e,t,r,n){let s=typeof t=="string"?qc(t):t,i=Va(s.pathname||"/",r);if(i==null)return null;let l=yC(e);SD(l);let u=null;for(let d=0;u==null&&d<l.length;++d){let m=DD(i);u=TD(l[d],m,n)}return u}function yC(e,t=[],r=[],n="",s=!1){let i=(l,u,d=s,m)=>{let f={relativePath:m===void 0?l.path||"":m,caseSensitive:l.caseSensitive===!0,childrenIndex:u,route:l};if(f.relativePath.startsWith("/")){if(!f.relativePath.startsWith(n)&&d)return;Rr(f.relativePath.startsWith(n),`Absolute route path "${f.relativePath}" nested under path "${n}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),f.relativePath=f.relativePath.slice(n.length)}let p=Ua([n,f.relativePath]),y=r.concat(f);l.children&&l.children.length>0&&(Rr(l.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${p}".`),yC(l.children,t,y,p,d)),!(l.path==null&&!l.index)&&t.push({path:p,score:PD(p,l.index),routesMeta:y})};return e.forEach((l,u)=>{var d;if(l.path===""||!((d=l.path)!=null&&d.includes("?")))i(l,u);else for(let m of vC(l.path))i(l,u,!0,m)}),t}function vC(e){let t=e.split("/");if(t.length===0)return[];let[r,...n]=t,s=r.endsWith("?"),i=r.replace(/\?$/,"");if(n.length===0)return s?[i,""]:[i];let l=vC(n.join("/")),u=[];return u.push(...l.map(d=>d===""?i:[i,d].join("/"))),s&&u.push(...l),u.map(d=>e.startsWith("/")&&d===""?"/":d)}function SD(e){e.sort((t,r)=>t.score!==r.score?r.score-t.score:OD(t.routesMeta.map(n=>n.childrenIndex),r.routesMeta.map(n=>n.childrenIndex)))}var kD=/^:[\w-]+$/,ND=3,_D=2,CD=1,ED=10,AD=-2,Cj=e=>e==="*";function PD(e,t){let r=e.split("/"),n=r.length;return r.some(Cj)&&(n+=AD),t&&(n+=_D),r.filter(s=>!Cj(s)).reduce((s,i)=>s+(kD.test(i)?ND:i===""?CD:ED),n)}function OD(e,t){return e.length===t.length&&e.slice(0,-1).every((n,s)=>n===t[s])?e[e.length-1]-t[t.length-1]:0}function TD(e,t,r=!1){let{routesMeta:n}=e,s={},i="/",l=[];for(let u=0;u<n.length;++u){let d=n[u],m=u===n.length-1,f=i==="/"?t:t.slice(i.length)||"/",p=wh({path:d.relativePath,caseSensitive:d.caseSensitive,end:m},f),y=d.route;if(!p&&m&&r&&!n[n.length-1].route.index&&(p=wh({path:d.relativePath,caseSensitive:d.caseSensitive,end:!1},f)),!p)return null;Object.assign(s,p.params),l.push({params:s,pathname:Ua([i,p.pathname]),pathnameBase:FD(Ua([i,p.pathnameBase])),route:y}),p.pathnameBase!=="/"&&(i=Ua([i,p.pathnameBase]))}return l}function wh(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[r,n]=ID(e.path,e.caseSensitive,e.end),s=t.match(r);if(!s)return null;let i=s[0],l=i.replace(/(.)\/+$/,"$1"),u=s.slice(1);return{params:n.reduce((m,{paramName:f,isOptional:p},y)=>{if(f==="*"){let j=u[y]||"";l=i.slice(0,i.length-j.length).replace(/(.)\/+$/,"$1")}const x=u[y];return p&&!x?m[f]=void 0:m[f]=(x||"").replace(/%2F/g,"/"),m},{}),pathname:i,pathnameBase:l,pattern:e}}function ID(e,t=!1,r=!0){ji(e==="*"||!e.endsWith("*")||e.endsWith("/*"),`Route path "${e}" will be treated as if it were "${e.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${e.replace(/\*$/,"/*")}".`);let n=[],s="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(l,u,d)=>(n.push({paramName:u,isOptional:d!=null}),d?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return e.endsWith("*")?(n.push({paramName:"*"}),s+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?s+="\\/*$":e!==""&&e!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,t?void 0:"i"),n]}function DD(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return ji(!1,`The URL path "${e}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${t}).`),e}}function Va(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let r=t.endsWith("/")?t.length-1:t.length,n=e.charAt(r);return n&&n!=="/"?null:e.slice(r)||"/"}function RD(e,t="/"){let{pathname:r,search:n="",hash:s=""}=typeof e=="string"?qc(e):e;return{pathname:r?r.startsWith("/")?r:$D(r,t):t,search:LD(n),hash:zD(s)}}function $D(e,t){let r=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(s=>{s===".."?r.length>1&&r.pop():s!=="."&&r.push(s)}),r.length>1?r.join("/"):"/"}function Ug(e,t,r,n){return`Cannot include a '${e}' character in a manually specified \`to.${t}\` field [${JSON.stringify(n)}].  Please separate it out to the \`to.${r}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function MD(e){return e.filter((t,r)=>r===0||t.route.path&&t.route.path.length>0)}function ax(e){let t=MD(e);return t.map((r,n)=>n===t.length-1?r.pathname:r.pathnameBase)}function ox(e,t,r,n=!1){let s;typeof e=="string"?s=qc(e):(s={...e},Rr(!s.pathname||!s.pathname.includes("?"),Ug("?","pathname","search",s)),Rr(!s.pathname||!s.pathname.includes("#"),Ug("#","pathname","hash",s)),Rr(!s.search||!s.search.includes("#"),Ug("#","search","hash",s)));let i=e===""||s.pathname==="",l=i?"/":s.pathname,u;if(l==null)u=r;else{let p=t.length-1;if(!n&&l.startsWith("..")){let y=l.split("/");for(;y[0]==="..";)y.shift(),p-=1;s.pathname=y.join("/")}u=p>=0?t[p]:"/"}let d=RD(s,u),m=l&&l!=="/"&&l.endsWith("/"),f=(i||l===".")&&r.endsWith("/");return!d.pathname.endsWith("/")&&(m||f)&&(d.pathname+="/"),d}var Ua=e=>e.join("/").replace(/\/\/+/g,"/"),FD=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),LD=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,zD=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function UD(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}var xC=["POST","PUT","PATCH","DELETE"];new Set(xC);var BD=["GET",...xC];new Set(BD);var Vc=v.createContext(null);Vc.displayName="DataRouter";var xm=v.createContext(null);xm.displayName="DataRouterState";v.createContext(!1);var wC=v.createContext({isTransitioning:!1});wC.displayName="ViewTransition";var WD=v.createContext(new Map);WD.displayName="Fetchers";var qD=v.createContext(null);qD.displayName="Await";var ea=v.createContext(null);ea.displayName="Navigation";var bd=v.createContext(null);bd.displayName="Location";var wa=v.createContext({outlet:null,matches:[],isDataRoute:!1});wa.displayName="Route";var lx=v.createContext(null);lx.displayName="RouteError";function VD(e,{relative:t}={}){Rr(Hc(),"useHref() may be used only in the context of a <Router> component.");let{basename:r,navigator:n}=v.useContext(ea),{hash:s,pathname:i,search:l}=jd(e,{relative:t}),u=i;return r!=="/"&&(u=i==="/"?r:Ua([r,i])),n.createHref({pathname:u,search:l,hash:s})}function Hc(){return v.useContext(bd)!=null}function to(){return Rr(Hc(),"useLocation() may be used only in the context of a <Router> component."),v.useContext(bd).location}var bC="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function jC(e){v.useContext(ea).static||v.useLayoutEffect(e)}function zs(){let{isDataRoute:e}=v.useContext(wa);return e?s5():HD()}function HD(){Rr(Hc(),"useNavigate() may be used only in the context of a <Router> component.");let e=v.useContext(Vc),{basename:t,navigator:r}=v.useContext(ea),{matches:n}=v.useContext(wa),{pathname:s}=to(),i=JSON.stringify(ax(n)),l=v.useRef(!1);return jC(()=>{l.current=!0}),v.useCallback((d,m={})=>{if(ji(l.current,bC),!l.current)return;if(typeof d=="number"){r.go(d);return}let f=ox(d,JSON.parse(i),s,m.relative==="path");e==null&&t!=="/"&&(f.pathname=f.pathname==="/"?t:Ua([t,f.pathname])),(m.replace?r.replace:r.push)(f,m.state,m)},[t,r,i,s,e])}v.createContext(null);function jd(e,{relative:t}={}){let{matches:r}=v.useContext(wa),{pathname:n}=to(),s=JSON.stringify(ax(r));return v.useMemo(()=>ox(e,JSON.parse(s),n,t==="path"),[e,s,n,t])}function KD(e,t){return SC(e,t)}function SC(e,t,r,n,s){var E;Rr(Hc(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:i}=v.useContext(ea),{matches:l}=v.useContext(wa),u=l[l.length-1],d=u?u.params:{},m=u?u.pathname:"/",f=u?u.pathnameBase:"/",p=u&&u.route;{let C=p&&p.path||"";kC(m,!p||C.endsWith("*")||C.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${m}" (under <Route path="${C}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${C}"> to <Route path="${C==="/"?"*":`${C}/*`}">.`)}let y=to(),x;if(t){let C=typeof t=="string"?qc(t):t;Rr(f==="/"||((E=C.pathname)==null?void 0:E.startsWith(f)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${f}" but pathname "${C.pathname}" was given in the \`location\` prop.`),x=C}else x=y;let j=x.pathname||"/",b=j;if(f!=="/"){let C=f.replace(/^\//,"").split("/");b="/"+j.replace(/^\//,"").split("/").slice(C.length).join("/")}let k=gC(e,{pathname:b});ji(p||k!=null,`No routes matched location "${x.pathname}${x.search}${x.hash}" `),ji(k==null||k[k.length-1].route.element!==void 0||k[k.length-1].route.Component!==void 0||k[k.length-1].route.lazy!==void 0,`Matched leaf route at location "${x.pathname}${x.search}${x.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let _=QD(k&&k.map(C=>Object.assign({},C,{params:Object.assign({},d,C.params),pathname:Ua([f,i.encodeLocation?i.encodeLocation(C.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:C.pathname]),pathnameBase:C.pathnameBase==="/"?f:Ua([f,i.encodeLocation?i.encodeLocation(C.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:C.pathnameBase])})),l,r,n,s);return t&&_?v.createElement(bd.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...x},navigationType:"POP"}},_):_}function GD(){let e=n5(),t=UD(e)?`${e.status} ${e.statusText}`:e instanceof Error?e.message:JSON.stringify(e),r=e instanceof Error?e.stack:null,n="rgba(200,200,200, 0.5)",s={padding:"0.5rem",backgroundColor:n},i={padding:"2px 4px",backgroundColor:n},l=null;return console.error("Error handled by React Router default ErrorBoundary:",e),l=v.createElement(v.Fragment,null,v.createElement("p",null," Hey developer "),v.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",v.createElement("code",{style:i},"ErrorBoundary")," or"," ",v.createElement("code",{style:i},"errorElement")," prop on your route.")),v.createElement(v.Fragment,null,v.createElement("h2",null,"Unexpected Application Error!"),v.createElement("h3",{style:{fontStyle:"italic"}},t),r?v.createElement("pre",{style:s},r):null,l)}var YD=v.createElement(GD,null),JD=class extends v.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){this.props.unstable_onError?this.props.unstable_onError(e,t):console.error("React Router caught the following error during render",e)}render(){return this.state.error!==void 0?v.createElement(wa.Provider,{value:this.props.routeContext},v.createElement(lx.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function XD({routeContext:e,match:t,children:r}){let n=v.useContext(Vc);return n&&n.static&&n.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(n.staticContext._deepestRenderedBoundaryId=t.route.id),v.createElement(wa.Provider,{value:e},r)}function QD(e,t=[],r=null,n=null,s=null){if(e==null){if(!r)return null;if(r.errors)e=r.matches;else if(t.length===0&&!r.initialized&&r.matches.length>0)e=r.matches;else return null}let i=e,l=r==null?void 0:r.errors;if(l!=null){let m=i.findIndex(f=>f.route.id&&(l==null?void 0:l[f.route.id])!==void 0);Rr(m>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(l).join(",")}`),i=i.slice(0,Math.min(i.length,m+1))}let u=!1,d=-1;if(r)for(let m=0;m<i.length;m++){let f=i[m];if((f.route.HydrateFallback||f.route.hydrateFallbackElement)&&(d=m),f.route.id){let{loaderData:p,errors:y}=r,x=f.route.loader&&!p.hasOwnProperty(f.route.id)&&(!y||y[f.route.id]===void 0);if(f.route.lazy||x){u=!0,d>=0?i=i.slice(0,d+1):i=[i[0]];break}}}return i.reduceRight((m,f,p)=>{let y,x=!1,j=null,b=null;r&&(y=l&&f.route.id?l[f.route.id]:void 0,j=f.route.errorElement||YD,u&&(d<0&&p===0?(kC("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),x=!0,b=null):d===p&&(x=!0,b=f.route.hydrateFallbackElement||null)));let k=t.concat(i.slice(0,p+1)),_=()=>{let E;return y?E=j:x?E=b:f.route.Component?E=v.createElement(f.route.Component,null):f.route.element?E=f.route.element:E=m,v.createElement(XD,{match:f,routeContext:{outlet:m,matches:k,isDataRoute:r!=null},children:E})};return r&&(f.route.ErrorBoundary||f.route.errorElement||p===0)?v.createElement(JD,{location:r.location,revalidation:r.revalidation,component:j,error:y,children:_(),routeContext:{outlet:null,matches:k,isDataRoute:!0},unstable_onError:n}):_()},null)}function cx(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function ZD(e){let t=v.useContext(Vc);return Rr(t,cx(e)),t}function e5(e){let t=v.useContext(xm);return Rr(t,cx(e)),t}function t5(e){let t=v.useContext(wa);return Rr(t,cx(e)),t}function ux(e){let t=t5(e),r=t.matches[t.matches.length-1];return Rr(r.route.id,`${e} can only be used on routes that contain a unique "id"`),r.route.id}function r5(){return ux("useRouteId")}function n5(){var n;let e=v.useContext(lx),t=e5("useRouteError"),r=ux("useRouteError");return e!==void 0?e:(n=t.errors)==null?void 0:n[r]}function s5(){let{router:e}=ZD("useNavigate"),t=ux("useNavigate"),r=v.useRef(!1);return jC(()=>{r.current=!0}),v.useCallback(async(s,i={})=>{ji(r.current,bC),r.current&&(typeof s=="number"?e.navigate(s):await e.navigate(s,{fromRouteId:t,...i}))},[e,t])}var Ej={};function kC(e,t,r){!t&&!Ej[e]&&(Ej[e]=!0,ji(!1,r))}v.memo(i5);function i5({routes:e,future:t,state:r,unstable_onError:n}){return SC(e,void 0,r,n,t)}function a5({to:e,replace:t,state:r,relative:n}){Rr(Hc(),"<Navigate> may be used only in the context of a <Router> component.");let{static:s}=v.useContext(ea);ji(!s,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:i}=v.useContext(wa),{pathname:l}=to(),u=zs(),d=ox(e,ax(i),l,n==="path"),m=JSON.stringify(d);return v.useEffect(()=>{u(JSON.parse(m),{replace:t,state:r,relative:n})},[u,m,n,t,r]),null}function Gs(e){Rr(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function o5({basename:e="/",children:t=null,location:r,navigationType:n="POP",navigator:s,static:i=!1}){Rr(!Hc(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let l=e.replace(/^\/*/,"/"),u=v.useMemo(()=>({basename:l,navigator:s,static:i,future:{}}),[l,s,i]);typeof r=="string"&&(r=qc(r));let{pathname:d="/",search:m="",hash:f="",state:p=null,key:y="default"}=r,x=v.useMemo(()=>{let j=Va(d,l);return j==null?null:{location:{pathname:j,search:m,hash:f,state:p,key:y},navigationType:n}},[l,d,m,f,p,y,n]);return ji(x!=null,`<Router basename="${l}"> is not able to match the URL "${d}${m}${f}" because it does not start with the basename, so the <Router> won't render anything.`),x==null?null:v.createElement(ea.Provider,{value:u},v.createElement(bd.Provider,{children:t,value:x}))}function l5({children:e,location:t}){return KD(Fv(e),t)}function Fv(e,t=[]){let r=[];return v.Children.forEach(e,(n,s)=>{if(!v.isValidElement(n))return;let i=[...t,s];if(n.type===v.Fragment){r.push.apply(r,Fv(n.props.children,i));return}Rr(n.type===Gs,`[${typeof n.type=="string"?n.type:n.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Rr(!n.props.index||!n.props.children,"An index route cannot have child routes.");let l={id:n.props.id||i.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,middleware:n.props.middleware,loader:n.props.loader,action:n.props.action,hydrateFallbackElement:n.props.hydrateFallbackElement,HydrateFallback:n.props.HydrateFallback,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.hasErrorBoundary===!0||n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(l.children=Fv(n.props.children,i)),r.push(l)}),r}var ch="get",uh="application/x-www-form-urlencoded";function wm(e){return e!=null&&typeof e.tagName=="string"}function c5(e){return wm(e)&&e.tagName.toLowerCase()==="button"}function u5(e){return wm(e)&&e.tagName.toLowerCase()==="form"}function d5(e){return wm(e)&&e.tagName.toLowerCase()==="input"}function f5(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function h5(e,t){return e.button===0&&(!t||t==="_self")&&!f5(e)}function Lv(e=""){return new URLSearchParams(typeof e=="string"||Array.isArray(e)||e instanceof URLSearchParams?e:Object.keys(e).reduce((t,r)=>{let n=e[r];return t.concat(Array.isArray(n)?n.map(s=>[r,s]):[[r,n]])},[]))}function m5(e,t){let r=Lv(e);return t&&t.forEach((n,s)=>{r.has(s)||t.getAll(s).forEach(i=>{r.append(s,i)})}),r}var Lf=null;function p5(){if(Lf===null)try{new FormData(document.createElement("form"),0),Lf=!1}catch{Lf=!0}return Lf}var g5=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Bg(e){return e!=null&&!g5.has(e)?(ji(!1,`"${e}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${uh}"`),null):e}function y5(e,t){let r,n,s,i,l;if(u5(e)){let u=e.getAttribute("action");n=u?Va(u,t):null,r=e.getAttribute("method")||ch,s=Bg(e.getAttribute("enctype"))||uh,i=new FormData(e)}else if(c5(e)||d5(e)&&(e.type==="submit"||e.type==="image")){let u=e.form;if(u==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let d=e.getAttribute("formaction")||u.getAttribute("action");if(n=d?Va(d,t):null,r=e.getAttribute("formmethod")||u.getAttribute("method")||ch,s=Bg(e.getAttribute("formenctype"))||Bg(u.getAttribute("enctype"))||uh,i=new FormData(u,e),!p5()){let{name:m,type:f,value:p}=e;if(f==="image"){let y=m?`${m}.`:"";i.append(`${y}x`,"0"),i.append(`${y}y`,"0")}else m&&i.append(m,p)}}else{if(wm(e))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');r=ch,n=null,s=uh,l=e}return i&&s==="text/plain"&&(l=i,i=void 0),{action:n,method:r.toLowerCase(),encType:s,formData:i,body:l}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function dx(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function v5(e,t,r){let n=typeof e=="string"?new URL(e,typeof window>"u"?"server://singlefetch/":window.location.origin):e;return n.pathname==="/"?n.pathname=`_root.${r}`:t&&Va(n.pathname,t)==="/"?n.pathname=`${t.replace(/\/$/,"")}/_root.${r}`:n.pathname=`${n.pathname.replace(/\/$/,"")}.${r}`,n}async function x5(e,t){if(e.id in t)return t[e.id];try{let r=await import(e.module);return t[e.id]=r,r}catch(r){return console.error(`Error loading route module \`${e.module}\`, reloading page...`),console.error(r),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function w5(e){return e==null?!1:e.href==null?e.rel==="preload"&&typeof e.imageSrcSet=="string"&&typeof e.imageSizes=="string":typeof e.rel=="string"&&typeof e.href=="string"}async function b5(e,t,r){let n=await Promise.all(e.map(async s=>{let i=t.routes[s.route.id];if(i){let l=await x5(i,r);return l.links?l.links():[]}return[]}));return N5(n.flat(1).filter(w5).filter(s=>s.rel==="stylesheet"||s.rel==="preload").map(s=>s.rel==="stylesheet"?{...s,rel:"prefetch",as:"style"}:{...s,rel:"prefetch"}))}function Aj(e,t,r,n,s,i){let l=(d,m)=>r[m]?d.route.id!==r[m].route.id:!0,u=(d,m)=>{var f;return r[m].pathname!==d.pathname||((f=r[m].route.path)==null?void 0:f.endsWith("*"))&&r[m].params["*"]!==d.params["*"]};return i==="assets"?t.filter((d,m)=>l(d,m)||u(d,m)):i==="data"?t.filter((d,m)=>{var p;let f=n.routes[d.route.id];if(!f||!f.hasLoader)return!1;if(l(d,m)||u(d,m))return!0;if(d.route.shouldRevalidate){let y=d.route.shouldRevalidate({currentUrl:new URL(s.pathname+s.search+s.hash,window.origin),currentParams:((p=r[0])==null?void 0:p.params)||{},nextUrl:new URL(e,window.origin),nextParams:d.params,defaultShouldRevalidate:!0});if(typeof y=="boolean")return y}return!0}):[]}function j5(e,t,{includeHydrateFallback:r}={}){return S5(e.map(n=>{let s=t.routes[n.route.id];if(!s)return[];let i=[s.module];return s.clientActionModule&&(i=i.concat(s.clientActionModule)),s.clientLoaderModule&&(i=i.concat(s.clientLoaderModule)),r&&s.hydrateFallbackModule&&(i=i.concat(s.hydrateFallbackModule)),s.imports&&(i=i.concat(s.imports)),i}).flat(1))}function S5(e){return[...new Set(e)]}function k5(e){let t={},r=Object.keys(e).sort();for(let n of r)t[n]=e[n];return t}function N5(e,t){let r=new Set;return new Set(t),e.reduce((n,s)=>{let i=JSON.stringify(k5(s));return r.has(i)||(r.add(i),n.push({key:i,link:s})),n},[])}function NC(){let e=v.useContext(Vc);return dx(e,"You must render this element inside a <DataRouterContext.Provider> element"),e}function _5(){let e=v.useContext(xm);return dx(e,"You must render this element inside a <DataRouterStateContext.Provider> element"),e}var fx=v.createContext(void 0);fx.displayName="FrameworkContext";function _C(){let e=v.useContext(fx);return dx(e,"You must render this element inside a <HydratedRouter> element"),e}function C5(e,t){let r=v.useContext(fx),[n,s]=v.useState(!1),[i,l]=v.useState(!1),{onFocus:u,onBlur:d,onMouseEnter:m,onMouseLeave:f,onTouchStart:p}=t,y=v.useRef(null);v.useEffect(()=>{if(e==="render"&&l(!0),e==="viewport"){let b=_=>{_.forEach(E=>{l(E.isIntersecting)})},k=new IntersectionObserver(b,{threshold:.5});return y.current&&k.observe(y.current),()=>{k.disconnect()}}},[e]),v.useEffect(()=>{if(n){let b=setTimeout(()=>{l(!0)},100);return()=>{clearTimeout(b)}}},[n]);let x=()=>{s(!0)},j=()=>{s(!1),l(!1)};return r?e!=="intent"?[i,y,{}]:[i,y,{onFocus:Tu(u,x),onBlur:Tu(d,j),onMouseEnter:Tu(m,x),onMouseLeave:Tu(f,j),onTouchStart:Tu(p,x)}]:[!1,y,{}]}function Tu(e,t){return r=>{e&&e(r),r.defaultPrevented||t(r)}}function E5({page:e,...t}){let{router:r}=NC(),n=v.useMemo(()=>gC(r.routes,e,r.basename),[r.routes,e,r.basename]);return n?v.createElement(P5,{page:e,matches:n,...t}):null}function A5(e){let{manifest:t,routeModules:r}=_C(),[n,s]=v.useState([]);return v.useEffect(()=>{let i=!1;return b5(e,t,r).then(l=>{i||s(l)}),()=>{i=!0}},[e,t,r]),n}function P5({page:e,matches:t,...r}){let n=to(),{manifest:s,routeModules:i}=_C(),{basename:l}=NC(),{loaderData:u,matches:d}=_5(),m=v.useMemo(()=>Aj(e,t,d,s,n,"data"),[e,t,d,s,n]),f=v.useMemo(()=>Aj(e,t,d,s,n,"assets"),[e,t,d,s,n]),p=v.useMemo(()=>{if(e===n.pathname+n.search+n.hash)return[];let j=new Set,b=!1;if(t.forEach(_=>{var C;let E=s.routes[_.route.id];!E||!E.hasLoader||(!m.some(O=>O.route.id===_.route.id)&&_.route.id in u&&((C=i[_.route.id])!=null&&C.shouldRevalidate)||E.hasClientLoader?b=!0:j.add(_.route.id))}),j.size===0)return[];let k=v5(e,l,"data");return b&&j.size>0&&k.searchParams.set("_routes",t.filter(_=>j.has(_.route.id)).map(_=>_.route.id).join(",")),[k.pathname+k.search]},[l,u,n,s,m,t,e,i]),y=v.useMemo(()=>j5(f,s),[f,s]),x=A5(f);return v.createElement(v.Fragment,null,p.map(j=>v.createElement("link",{key:j,rel:"prefetch",as:"fetch",href:j,...r})),y.map(j=>v.createElement("link",{key:j,rel:"modulepreload",href:j,...r})),x.map(({key:j,link:b})=>v.createElement("link",{key:j,nonce:r.nonce,...b})))}function O5(...e){return t=>{e.forEach(r=>{typeof r=="function"?r(t):r!=null&&(r.current=t)})}}var CC=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{CC&&(window.__reactRouterVersion="7.9.4")}catch{}function T5({basename:e,children:t,window:r}){let n=v.useRef();n.current==null&&(n.current=vD({window:r,v5Compat:!0}));let s=n.current,[i,l]=v.useState({action:s.action,location:s.location}),u=v.useCallback(d=>{v.startTransition(()=>l(d))},[l]);return v.useLayoutEffect(()=>s.listen(u),[s,u]),v.createElement(o5,{basename:e,children:t,location:i.location,navigationType:i.action,navigator:s})}var EC=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,AC=v.forwardRef(function({onClick:t,discover:r="render",prefetch:n="none",relative:s,reloadDocument:i,replace:l,state:u,target:d,to:m,preventScrollReset:f,viewTransition:p,...y},x){let{basename:j}=v.useContext(ea),b=typeof m=="string"&&EC.test(m),k,_=!1;if(typeof m=="string"&&b&&(k=m,CC))try{let H=new URL(window.location.href),me=m.startsWith("//")?new URL(H.protocol+m):new URL(m),Z=Va(me.pathname,j);me.origin===H.origin&&Z!=null?m=Z+me.search+me.hash:_=!0}catch{ji(!1,`<Link to="${m}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let E=VD(m,{relative:s}),[C,O,T]=C5(n,y),A=$5(m,{replace:l,state:u,target:d,preventScrollReset:f,relative:s,viewTransition:p});function L(H){t&&t(H),H.defaultPrevented||A(H)}let J=v.createElement("a",{...y,...T,href:k||E,onClick:_||i?t:L,ref:O5(x,O),target:d,"data-discover":!b&&r==="render"?"true":void 0});return C&&!b?v.createElement(v.Fragment,null,J,v.createElement(E5,{page:E})):J});AC.displayName="Link";var I5=v.forwardRef(function({"aria-current":t="page",caseSensitive:r=!1,className:n="",end:s=!1,style:i,to:l,viewTransition:u,children:d,...m},f){let p=jd(l,{relative:m.relative}),y=to(),x=v.useContext(xm),{navigator:j,basename:b}=v.useContext(ea),k=x!=null&&U5(p)&&u===!0,_=j.encodeLocation?j.encodeLocation(p).pathname:p.pathname,E=y.pathname,C=x&&x.navigation&&x.navigation.location?x.navigation.location.pathname:null;r||(E=E.toLowerCase(),C=C?C.toLowerCase():null,_=_.toLowerCase()),C&&b&&(C=Va(C,b)||C);const O=_!=="/"&&_.endsWith("/")?_.length-1:_.length;let T=E===_||!s&&E.startsWith(_)&&E.charAt(O)==="/",A=C!=null&&(C===_||!s&&C.startsWith(_)&&C.charAt(_.length)==="/"),L={isActive:T,isPending:A,isTransitioning:k},J=T?t:void 0,H;typeof n=="function"?H=n(L):H=[n,T?"active":null,A?"pending":null,k?"transitioning":null].filter(Boolean).join(" ");let me=typeof i=="function"?i(L):i;return v.createElement(AC,{...m,"aria-current":J,className:H,ref:f,style:me,to:l,viewTransition:u},typeof d=="function"?d(L):d)});I5.displayName="NavLink";var D5=v.forwardRef(({discover:e="render",fetcherKey:t,navigate:r,reloadDocument:n,replace:s,state:i,method:l=ch,action:u,onSubmit:d,relative:m,preventScrollReset:f,viewTransition:p,...y},x)=>{let j=L5(),b=z5(u,{relative:m}),k=l.toLowerCase()==="get"?"get":"post",_=typeof u=="string"&&EC.test(u),E=C=>{if(d&&d(C),C.defaultPrevented)return;C.preventDefault();let O=C.nativeEvent.submitter,T=(O==null?void 0:O.getAttribute("formmethod"))||l;j(O||C.currentTarget,{fetcherKey:t,method:T,navigate:r,replace:s,state:i,relative:m,preventScrollReset:f,viewTransition:p})};return v.createElement("form",{ref:x,method:k,action:b,onSubmit:n?d:E,...y,"data-discover":!_&&e==="render"?"true":void 0})});D5.displayName="Form";function R5(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function PC(e){let t=v.useContext(Vc);return Rr(t,R5(e)),t}function $5(e,{target:t,replace:r,state:n,preventScrollReset:s,relative:i,viewTransition:l}={}){let u=zs(),d=to(),m=jd(e,{relative:i});return v.useCallback(f=>{if(h5(f,t)){f.preventDefault();let p=r!==void 0?r:id(d)===id(m);u(e,{replace:p,state:n,preventScrollReset:s,relative:i,viewTransition:l})}},[d,u,m,r,n,t,e,s,i,l])}function hx(e){ji(typeof URLSearchParams<"u","You cannot use the `useSearchParams` hook in a browser that does not support the URLSearchParams API. If you need to support Internet Explorer 11, we recommend you load a polyfill such as https://github.com/ungap/url-search-params.");let t=v.useRef(Lv(e)),r=v.useRef(!1),n=to(),s=v.useMemo(()=>m5(n.search,r.current?null:t.current),[n.search]),i=zs(),l=v.useCallback((u,d)=>{const m=Lv(typeof u=="function"?u(new URLSearchParams(s)):u);r.current=!0,i("?"+m,d)},[i,s]);return[s,l]}var M5=0,F5=()=>`__${String(++M5)}__`;function L5(){let{router:e}=PC("useSubmit"),{basename:t}=v.useContext(ea),r=r5();return v.useCallback(async(n,s={})=>{let{action:i,method:l,encType:u,formData:d,body:m}=y5(n,t);if(s.navigate===!1){let f=s.fetcherKey||F5();await e.fetch(f,r,s.action||i,{preventScrollReset:s.preventScrollReset,formData:d,body:m,formMethod:s.method||l,formEncType:s.encType||u,flushSync:s.flushSync})}else await e.navigate(s.action||i,{preventScrollReset:s.preventScrollReset,formData:d,body:m,formMethod:s.method||l,formEncType:s.encType||u,replace:s.replace,state:s.state,fromRouteId:r,flushSync:s.flushSync,viewTransition:s.viewTransition})},[e,t,r])}function z5(e,{relative:t}={}){let{basename:r}=v.useContext(ea),n=v.useContext(wa);Rr(n,"useFormAction must be used inside a RouteContext");let[s]=n.matches.slice(-1),i={...jd(e||".",{relative:t})},l=to();if(e==null){i.search=l.search;let u=new URLSearchParams(i.search),d=u.getAll("index");if(d.some(f=>f==="")){u.delete("index"),d.filter(p=>p).forEach(p=>u.append("index",p));let f=u.toString();i.search=f?`?${f}`:""}}return(!e||e===".")&&s.route.index&&(i.search=i.search?i.search.replace(/^\?/,"?index&"):"?index"),r!=="/"&&(i.pathname=i.pathname==="/"?r:Ua([r,i.pathname])),id(i)}function U5(e,{relative:t}={}){let r=v.useContext(wC);Rr(r!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:n}=PC("useViewTransitionState"),s=jd(e,{relative:t});if(!r.isTransitioning)return!1;let i=Va(r.currentLocation.pathname,n)||r.currentLocation.pathname,l=Va(r.nextLocation.pathname,n)||r.nextLocation.pathname;return wh(s.pathname,l)!=null||wh(s.pathname,i)!=null}var OC=pC();const B5="modulepreload",W5=function(e){return"/feature-voting-app/"+e},Pj={},Sd=function(t,r,n){let s=Promise.resolve();if(r&&r.length>0){let l=function(m){return Promise.all(m.map(f=>Promise.resolve(f).then(p=>({status:"fulfilled",value:p}),p=>({status:"rejected",reason:p}))))};document.getElementsByTagName("link");const u=document.querySelector("meta[property=csp-nonce]"),d=(u==null?void 0:u.nonce)||(u==null?void 0:u.getAttribute("nonce"));s=l(r.map(m=>{if(m=W5(m),m in Pj)return;Pj[m]=!0;const f=m.endsWith(".css"),p=f?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${m}"]${p}`))return;const y=document.createElement("link");if(y.rel=f?"stylesheet":B5,f||(y.as="script"),y.crossOrigin="",y.href=m,d&&y.setAttribute("nonce",d),document.head.appendChild(y),f)return new Promise((x,j)=>{y.addEventListener("load",x),y.addEventListener("error",()=>j(new Error(`Unable to preload CSS for ${m}`)))})}))}function i(l){const u=new Event("vite:preloadError",{cancelable:!0});if(u.payload=l,window.dispatchEvent(u),!u.defaultPrevented)throw l}return s.then(l=>{for(const u of l||[])u.status==="rejected"&&i(u.reason);return t().catch(i)})},q5=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...r)=>Sd(async()=>{const{default:n}=await Promise.resolve().then(()=>Kc);return{default:n}},[]).then(({default:n})=>n(...r)):t=fetch,(...r)=>t(...r)};class mx extends Error{constructor(t,r="FunctionsError",n){super(t),this.name=r,this.context=n}}class Oj extends mx{constructor(t){super("Failed to send a request to the Edge Function","FunctionsFetchError",t)}}class Tj extends mx{constructor(t){super("Relay Error invoking the Edge Function","FunctionsRelayError",t)}}class Ij extends mx{constructor(t){super("Edge Function returned a non-2xx status code","FunctionsHttpError",t)}}var zv;(function(e){e.Any="any",e.ApNortheast1="ap-northeast-1",e.ApNortheast2="ap-northeast-2",e.ApSouth1="ap-south-1",e.ApSoutheast1="ap-southeast-1",e.ApSoutheast2="ap-southeast-2",e.CaCentral1="ca-central-1",e.EuCentral1="eu-central-1",e.EuWest1="eu-west-1",e.EuWest2="eu-west-2",e.EuWest3="eu-west-3",e.SaEast1="sa-east-1",e.UsEast1="us-east-1",e.UsWest1="us-west-1",e.UsWest2="us-west-2"})(zv||(zv={}));var V5=function(e,t,r,n){function s(i){return i instanceof r?i:new r(function(l){l(i)})}return new(r||(r=Promise))(function(i,l){function u(f){try{m(n.next(f))}catch(p){l(p)}}function d(f){try{m(n.throw(f))}catch(p){l(p)}}function m(f){f.done?i(f.value):s(f.value).then(u,d)}m((n=n.apply(e,t||[])).next())})};class H5{constructor(t,{headers:r={},customFetch:n,region:s=zv.Any}={}){this.url=t,this.headers=r,this.region=s,this.fetch=q5(n)}setAuth(t){this.headers.Authorization=`Bearer ${t}`}invoke(t){return V5(this,arguments,void 0,function*(r,n={}){var s;try{const{headers:i,method:l,body:u,signal:d}=n;let m={},{region:f}=n;f||(f=this.region);const p=new URL(`${this.url}/${r}`);f&&f!=="any"&&(m["x-region"]=f,p.searchParams.set("forceFunctionRegion",f));let y;u&&(i&&!Object.prototype.hasOwnProperty.call(i,"Content-Type")||!i)&&(typeof Blob<"u"&&u instanceof Blob||u instanceof ArrayBuffer?(m["Content-Type"]="application/octet-stream",y=u):typeof u=="string"?(m["Content-Type"]="text/plain",y=u):typeof FormData<"u"&&u instanceof FormData?y=u:(m["Content-Type"]="application/json",y=JSON.stringify(u)));const x=yield this.fetch(p.toString(),{method:l||"POST",headers:Object.assign(Object.assign(Object.assign({},m),this.headers),i),body:y,signal:d}).catch(_=>{throw _.name==="AbortError"?_:new Oj(_)}),j=x.headers.get("x-relay-error");if(j&&j==="true")throw new Tj(x);if(!x.ok)throw new Ij(x);let b=((s=x.headers.get("Content-Type"))!==null&&s!==void 0?s:"text/plain").split(";")[0].trim(),k;return b==="application/json"?k=yield x.json():b==="application/octet-stream"?k=yield x.blob():b==="text/event-stream"?k=x:b==="multipart/form-data"?k=yield x.formData():k=yield x.text(),{data:k,error:null,response:x}}catch(i){return i instanceof Error&&i.name==="AbortError"?{data:null,error:new Oj(i)}:{data:null,error:i,response:i instanceof Ij||i instanceof Tj?i.context:void 0}}})}}var Ln={},sc={},ic={},ac={},oc={},lc={},K5=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},Ic=K5();const G5=Ic.fetch,TC=Ic.fetch.bind(Ic),IC=Ic.Headers,Y5=Ic.Request,J5=Ic.Response,Kc=Object.freeze(Object.defineProperty({__proto__:null,Headers:IC,Request:Y5,Response:J5,default:TC,fetch:G5},Symbol.toStringTag,{value:"Module"})),X5=oD(Kc);var zf={},Dj;function DC(){if(Dj)return zf;Dj=1,Object.defineProperty(zf,"__esModule",{value:!0});class e extends Error{constructor(r){super(r.message),this.name="PostgrestError",this.details=r.details,this.hint=r.hint,this.code=r.code}}return zf.default=e,zf}var Rj;function RC(){if(Rj)return lc;Rj=1;var e=lc&&lc.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(lc,"__esModule",{value:!0});const t=e(X5),r=e(DC());class n{constructor(i){var l,u;this.shouldThrowOnError=!1,this.method=i.method,this.url=i.url,this.headers=new Headers(i.headers),this.schema=i.schema,this.body=i.body,this.shouldThrowOnError=(l=i.shouldThrowOnError)!==null&&l!==void 0?l:!1,this.signal=i.signal,this.isMaybeSingle=(u=i.isMaybeSingle)!==null&&u!==void 0?u:!1,i.fetch?this.fetch=i.fetch:typeof fetch>"u"?this.fetch=t.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(i,l){return this.headers=new Headers(this.headers),this.headers.set(i,l),this}then(i,l){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const u=this.fetch;let d=u(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async m=>{var f,p,y,x;let j=null,b=null,k=null,_=m.status,E=m.statusText;if(m.ok){if(this.method!=="HEAD"){const A=await m.text();A===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((f=this.headers.get("Accept"))===null||f===void 0)&&f.includes("application/vnd.pgrst.plan+text"))?b=A:b=JSON.parse(A))}const O=(p=this.headers.get("Prefer"))===null||p===void 0?void 0:p.match(/count=(exact|planned|estimated)/),T=(y=m.headers.get("content-range"))===null||y===void 0?void 0:y.split("/");O&&T&&T.length>1&&(k=parseInt(T[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(b)&&(b.length>1?(j={code:"PGRST116",details:`Results contain ${b.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},b=null,k=null,_=406,E="Not Acceptable"):b.length===1?b=b[0]:b=null)}else{const O=await m.text();try{j=JSON.parse(O),Array.isArray(j)&&m.status===404&&(b=[],j=null,_=200,E="OK")}catch{m.status===404&&O===""?(_=204,E="No Content"):j={message:O}}if(j&&this.isMaybeSingle&&(!((x=j==null?void 0:j.details)===null||x===void 0)&&x.includes("0 rows"))&&(j=null,_=200,E="OK"),j&&this.shouldThrowOnError)throw new r.default(j)}return{error:j,data:b,count:k,status:_,statusText:E}});return this.shouldThrowOnError||(d=d.catch(m=>{var f,p,y;return{error:{message:`${(f=m==null?void 0:m.name)!==null&&f!==void 0?f:"FetchError"}: ${m==null?void 0:m.message}`,details:`${(p=m==null?void 0:m.stack)!==null&&p!==void 0?p:""}`,hint:"",code:`${(y=m==null?void 0:m.code)!==null&&y!==void 0?y:""}`},data:null,count:null,status:0,statusText:""}})),d.then(i,l)}returns(){return this}overrideTypes(){return this}}return lc.default=n,lc}var $j;function $C(){if($j)return oc;$j=1;var e=oc&&oc.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(oc,"__esModule",{value:!0});const t=e(RC());class r extends t.default{select(s){let i=!1;const l=(s??"*").split("").map(u=>/\s/.test(u)&&!i?"":(u==='"'&&(i=!i),u)).join("");return this.url.searchParams.set("select",l),this.headers.append("Prefer","return=representation"),this}order(s,{ascending:i=!0,nullsFirst:l,foreignTable:u,referencedTable:d=u}={}){const m=d?`${d}.order`:"order",f=this.url.searchParams.get(m);return this.url.searchParams.set(m,`${f?`${f},`:""}${s}.${i?"asc":"desc"}${l===void 0?"":l?".nullsfirst":".nullslast"}`),this}limit(s,{foreignTable:i,referencedTable:l=i}={}){const u=typeof l>"u"?"limit":`${l}.limit`;return this.url.searchParams.set(u,`${s}`),this}range(s,i,{foreignTable:l,referencedTable:u=l}={}){const d=typeof u>"u"?"offset":`${u}.offset`,m=typeof u>"u"?"limit":`${u}.limit`;return this.url.searchParams.set(d,`${s}`),this.url.searchParams.set(m,`${i-s+1}`),this}abortSignal(s){return this.signal=s,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:s=!1,verbose:i=!1,settings:l=!1,buffers:u=!1,wal:d=!1,format:m="text"}={}){var f;const p=[s?"analyze":null,i?"verbose":null,l?"settings":null,u?"buffers":null,d?"wal":null].filter(Boolean).join("|"),y=(f=this.headers.get("Accept"))!==null&&f!==void 0?f:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${m}; for="${y}"; options=${p};`),m==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(s){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${s}`),this}}return oc.default=r,oc}var Mj;function px(){if(Mj)return ac;Mj=1;var e=ac&&ac.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(ac,"__esModule",{value:!0});const t=e($C());class r extends t.default{eq(s,i){return this.url.searchParams.append(s,`eq.${i}`),this}neq(s,i){return this.url.searchParams.append(s,`neq.${i}`),this}gt(s,i){return this.url.searchParams.append(s,`gt.${i}`),this}gte(s,i){return this.url.searchParams.append(s,`gte.${i}`),this}lt(s,i){return this.url.searchParams.append(s,`lt.${i}`),this}lte(s,i){return this.url.searchParams.append(s,`lte.${i}`),this}like(s,i){return this.url.searchParams.append(s,`like.${i}`),this}likeAllOf(s,i){return this.url.searchParams.append(s,`like(all).{${i.join(",")}}`),this}likeAnyOf(s,i){return this.url.searchParams.append(s,`like(any).{${i.join(",")}}`),this}ilike(s,i){return this.url.searchParams.append(s,`ilike.${i}`),this}ilikeAllOf(s,i){return this.url.searchParams.append(s,`ilike(all).{${i.join(",")}}`),this}ilikeAnyOf(s,i){return this.url.searchParams.append(s,`ilike(any).{${i.join(",")}}`),this}is(s,i){return this.url.searchParams.append(s,`is.${i}`),this}in(s,i){const l=Array.from(new Set(i)).map(u=>typeof u=="string"&&new RegExp("[,()]").test(u)?`"${u}"`:`${u}`).join(",");return this.url.searchParams.append(s,`in.(${l})`),this}contains(s,i){return typeof i=="string"?this.url.searchParams.append(s,`cs.${i}`):Array.isArray(i)?this.url.searchParams.append(s,`cs.{${i.join(",")}}`):this.url.searchParams.append(s,`cs.${JSON.stringify(i)}`),this}containedBy(s,i){return typeof i=="string"?this.url.searchParams.append(s,`cd.${i}`):Array.isArray(i)?this.url.searchParams.append(s,`cd.{${i.join(",")}}`):this.url.searchParams.append(s,`cd.${JSON.stringify(i)}`),this}rangeGt(s,i){return this.url.searchParams.append(s,`sr.${i}`),this}rangeGte(s,i){return this.url.searchParams.append(s,`nxl.${i}`),this}rangeLt(s,i){return this.url.searchParams.append(s,`sl.${i}`),this}rangeLte(s,i){return this.url.searchParams.append(s,`nxr.${i}`),this}rangeAdjacent(s,i){return this.url.searchParams.append(s,`adj.${i}`),this}overlaps(s,i){return typeof i=="string"?this.url.searchParams.append(s,`ov.${i}`):this.url.searchParams.append(s,`ov.{${i.join(",")}}`),this}textSearch(s,i,{config:l,type:u}={}){let d="";u==="plain"?d="pl":u==="phrase"?d="ph":u==="websearch"&&(d="w");const m=l===void 0?"":`(${l})`;return this.url.searchParams.append(s,`${d}fts${m}.${i}`),this}match(s){return Object.entries(s).forEach(([i,l])=>{this.url.searchParams.append(i,`eq.${l}`)}),this}not(s,i,l){return this.url.searchParams.append(s,`not.${i}.${l}`),this}or(s,{foreignTable:i,referencedTable:l=i}={}){const u=l?`${l}.or`:"or";return this.url.searchParams.append(u,`(${s})`),this}filter(s,i,l){return this.url.searchParams.append(s,`${i}.${l}`),this}}return ac.default=r,ac}var Fj;function MC(){if(Fj)return ic;Fj=1;var e=ic&&ic.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(ic,"__esModule",{value:!0});const t=e(px());class r{constructor(s,{headers:i={},schema:l,fetch:u}){this.url=s,this.headers=new Headers(i),this.schema=l,this.fetch=u}select(s,i){const{head:l=!1,count:u}=i??{},d=l?"HEAD":"GET";let m=!1;const f=(s??"*").split("").map(p=>/\s/.test(p)&&!m?"":(p==='"'&&(m=!m),p)).join("");return this.url.searchParams.set("select",f),u&&this.headers.append("Prefer",`count=${u}`),new t.default({method:d,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(s,{count:i,defaultToNull:l=!0}={}){var u;const d="POST";if(i&&this.headers.append("Prefer",`count=${i}`),l||this.headers.append("Prefer","missing=default"),Array.isArray(s)){const m=s.reduce((f,p)=>f.concat(Object.keys(p)),[]);if(m.length>0){const f=[...new Set(m)].map(p=>`"${p}"`);this.url.searchParams.set("columns",f.join(","))}}return new t.default({method:d,url:this.url,headers:this.headers,schema:this.schema,body:s,fetch:(u=this.fetch)!==null&&u!==void 0?u:fetch})}upsert(s,{onConflict:i,ignoreDuplicates:l=!1,count:u,defaultToNull:d=!0}={}){var m;const f="POST";if(this.headers.append("Prefer",`resolution=${l?"ignore":"merge"}-duplicates`),i!==void 0&&this.url.searchParams.set("on_conflict",i),u&&this.headers.append("Prefer",`count=${u}`),d||this.headers.append("Prefer","missing=default"),Array.isArray(s)){const p=s.reduce((y,x)=>y.concat(Object.keys(x)),[]);if(p.length>0){const y=[...new Set(p)].map(x=>`"${x}"`);this.url.searchParams.set("columns",y.join(","))}}return new t.default({method:f,url:this.url,headers:this.headers,schema:this.schema,body:s,fetch:(m=this.fetch)!==null&&m!==void 0?m:fetch})}update(s,{count:i}={}){var l;const u="PATCH";return i&&this.headers.append("Prefer",`count=${i}`),new t.default({method:u,url:this.url,headers:this.headers,schema:this.schema,body:s,fetch:(l=this.fetch)!==null&&l!==void 0?l:fetch})}delete({count:s}={}){var i;const l="DELETE";return s&&this.headers.append("Prefer",`count=${s}`),new t.default({method:l,url:this.url,headers:this.headers,schema:this.schema,fetch:(i=this.fetch)!==null&&i!==void 0?i:fetch})}}return ic.default=r,ic}var Lj;function Q5(){if(Lj)return sc;Lj=1;var e=sc&&sc.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(sc,"__esModule",{value:!0});const t=e(MC()),r=e(px());class n{constructor(i,{headers:l={},schema:u,fetch:d}={}){this.url=i,this.headers=new Headers(l),this.schemaName=u,this.fetch=d}from(i){const l=new URL(`${this.url}/${i}`);return new t.default(l,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(i){return new n(this.url,{headers:this.headers,schema:i,fetch:this.fetch})}rpc(i,l={},{head:u=!1,get:d=!1,count:m}={}){var f;let p;const y=new URL(`${this.url}/rpc/${i}`);let x;u||d?(p=u?"HEAD":"GET",Object.entries(l).filter(([b,k])=>k!==void 0).map(([b,k])=>[b,Array.isArray(k)?`{${k.join(",")}}`:`${k}`]).forEach(([b,k])=>{y.searchParams.append(b,k)})):(p="POST",x=l);const j=new Headers(this.headers);return m&&j.set("Prefer",`count=${m}`),new r.default({method:p,url:y,headers:j,schema:this.schemaName,body:x,fetch:(f=this.fetch)!==null&&f!==void 0?f:fetch})}}return sc.default=n,sc}var zj;function Z5(){if(zj)return Ln;zj=1;var e=Ln&&Ln.__importDefault||function(u){return u&&u.__esModule?u:{default:u}};Object.defineProperty(Ln,"__esModule",{value:!0}),Ln.PostgrestError=Ln.PostgrestBuilder=Ln.PostgrestTransformBuilder=Ln.PostgrestFilterBuilder=Ln.PostgrestQueryBuilder=Ln.PostgrestClient=void 0;const t=e(Q5());Ln.PostgrestClient=t.default;const r=e(MC());Ln.PostgrestQueryBuilder=r.default;const n=e(px());Ln.PostgrestFilterBuilder=n.default;const s=e($C());Ln.PostgrestTransformBuilder=s.default;const i=e(RC());Ln.PostgrestBuilder=i.default;const l=e(DC());return Ln.PostgrestError=l.default,Ln.default={PostgrestClient:t.default,PostgrestQueryBuilder:r.default,PostgrestFilterBuilder:n.default,PostgrestTransformBuilder:s.default,PostgrestBuilder:i.default,PostgrestError:l.default},Ln}var e3=Z5();const t3=Zi(e3),{PostgrestClient:r3,PostgrestQueryBuilder:eee,PostgrestFilterBuilder:tee,PostgrestTransformBuilder:ree,PostgrestBuilder:nee,PostgrestError:see}=t3;class n3{static detectEnvironment(){var t;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((t=navigator.userAgent)===null||t===void 0)&&t.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const r=process.versions;if(r&&r.node){const n=r.node,s=parseInt(n.replace(/^v/,"").split(".")[0]);return s>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${s} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${s} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const t=this.detectEnvironment();if(t.constructor)return t.constructor;let r=t.error||"WebSocket not supported in this environment.";throw t.workaround&&(r+=`

Suggested solution: ${t.workaround}`),new Error(r)}static createWebSocket(t,r){const n=this.getWebSocketConstructor();return new n(t,r)}static isWebSocketSupported(){try{const t=this.detectEnvironment();return t.type==="native"||t.type==="ws"}catch{return!1}}}const s3="2.74.0",i3=`realtime-js/${s3}`,a3="1.0.0",Uv=1e4,o3=1e3,l3=100;var Qu;(function(e){e[e.connecting=0]="connecting",e[e.open=1]="open",e[e.closing=2]="closing",e[e.closed=3]="closed"})(Qu||(Qu={}));var Nn;(function(e){e.closed="closed",e.errored="errored",e.joined="joined",e.joining="joining",e.leaving="leaving"})(Nn||(Nn={}));var qi;(function(e){e.close="phx_close",e.error="phx_error",e.join="phx_join",e.reply="phx_reply",e.leave="phx_leave",e.access_token="access_token"})(qi||(qi={}));var Bv;(function(e){e.websocket="websocket"})(Bv||(Bv={}));var dl;(function(e){e.Connecting="connecting",e.Open="open",e.Closing="closing",e.Closed="closed"})(dl||(dl={}));class c3{constructor(){this.HEADER_LENGTH=1}decode(t,r){return t.constructor===ArrayBuffer?r(this._binaryDecode(t)):r(typeof t=="string"?JSON.parse(t):{})}_binaryDecode(t){const r=new DataView(t),n=new TextDecoder;return this._decodeBroadcast(t,r,n)}_decodeBroadcast(t,r,n){const s=r.getUint8(1),i=r.getUint8(2);let l=this.HEADER_LENGTH+2;const u=n.decode(t.slice(l,l+s));l=l+s;const d=n.decode(t.slice(l,l+i));l=l+i;const m=JSON.parse(n.decode(t.slice(l,t.byteLength)));return{ref:null,topic:u,event:d,payload:m}}}class FC{constructor(t,r){this.callback=t,this.timerCalc=r,this.timer=void 0,this.tries=0,this.callback=t,this.timerCalc=r}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var mr;(function(e){e.abstime="abstime",e.bool="bool",e.date="date",e.daterange="daterange",e.float4="float4",e.float8="float8",e.int2="int2",e.int4="int4",e.int4range="int4range",e.int8="int8",e.int8range="int8range",e.json="json",e.jsonb="jsonb",e.money="money",e.numeric="numeric",e.oid="oid",e.reltime="reltime",e.text="text",e.time="time",e.timestamp="timestamp",e.timestamptz="timestamptz",e.timetz="timetz",e.tsrange="tsrange",e.tstzrange="tstzrange"})(mr||(mr={}));const Uj=(e,t,r={})=>{var n;const s=(n=r.skipTypes)!==null&&n!==void 0?n:[];return t?Object.keys(t).reduce((i,l)=>(i[l]=u3(l,e,t,s),i),{}):{}},u3=(e,t,r,n)=>{const s=t.find(u=>u.name===e),i=s==null?void 0:s.type,l=r[e];return i&&!n.includes(i)?LC(i,l):Wv(l)},LC=(e,t)=>{if(e.charAt(0)==="_"){const r=e.slice(1,e.length);return m3(t,r)}switch(e){case mr.bool:return d3(t);case mr.float4:case mr.float8:case mr.int2:case mr.int4:case mr.int8:case mr.numeric:case mr.oid:return f3(t);case mr.json:case mr.jsonb:return h3(t);case mr.timestamp:return p3(t);case mr.abstime:case mr.date:case mr.daterange:case mr.int4range:case mr.int8range:case mr.money:case mr.reltime:case mr.text:case mr.time:case mr.timestamptz:case mr.timetz:case mr.tsrange:case mr.tstzrange:return Wv(t);default:return Wv(t)}},Wv=e=>e,d3=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},f3=e=>{if(typeof e=="string"){const t=parseFloat(e);if(!Number.isNaN(t))return t}return e},h3=e=>{if(typeof e=="string")try{return JSON.parse(e)}catch(t){return console.log(`JSON parse error: ${t}`),e}return e},m3=(e,t)=>{if(typeof e!="string")return e;const r=e.length-1,n=e[r];if(e[0]==="{"&&n==="}"){let i;const l=e.slice(1,r);try{i=JSON.parse("["+l+"]")}catch{i=l?l.split(","):[]}return i.map(u=>LC(t,u))}return e},p3=e=>typeof e=="string"?e.replace(" ","T"):e,zC=e=>{let t=e;return t=t.replace(/^ws/i,"http"),t=t.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),t.replace(/\/+$/,"")+"/api/broadcast"};class Wg{constructor(t,r,n={},s=Uv){this.channel=t,this.event=r,this.payload=n,this.timeout=s,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(t){this.timeout=t,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(t){this.payload=Object.assign(Object.assign({},this.payload),t)}receive(t,r){var n;return this._hasReceived(t)&&r((n=this.receivedResp)===null||n===void 0?void 0:n.response),this.recHooks.push({status:t,callback:r}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const t=r=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=r,this._matchReceive(r)};this.channel._on(this.refEvent,{},t),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(t,r){this.refEvent&&this.channel._trigger(this.refEvent,{status:t,response:r})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:t,response:r}){this.recHooks.filter(n=>n.status===t).forEach(n=>n.callback(r))}_hasReceived(t){return this.receivedResp&&this.receivedResp.status===t}}var Bj;(function(e){e.SYNC="sync",e.JOIN="join",e.LEAVE="leave"})(Bj||(Bj={}));class Zu{constructor(t,r){this.channel=t,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const n=(r==null?void 0:r.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(n.state,{},s=>{const{onJoin:i,onLeave:l,onSync:u}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Zu.syncState(this.state,s,i,l),this.pendingDiffs.forEach(d=>{this.state=Zu.syncDiff(this.state,d,i,l)}),this.pendingDiffs=[],u()}),this.channel._on(n.diff,{},s=>{const{onJoin:i,onLeave:l,onSync:u}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(s):(this.state=Zu.syncDiff(this.state,s,i,l),u())}),this.onJoin((s,i,l)=>{this.channel._trigger("presence",{event:"join",key:s,currentPresences:i,newPresences:l})}),this.onLeave((s,i,l)=>{this.channel._trigger("presence",{event:"leave",key:s,currentPresences:i,leftPresences:l})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(t,r,n,s){const i=this.cloneDeep(t),l=this.transformState(r),u={},d={};return this.map(i,(m,f)=>{l[m]||(d[m]=f)}),this.map(l,(m,f)=>{const p=i[m];if(p){const y=f.map(k=>k.presence_ref),x=p.map(k=>k.presence_ref),j=f.filter(k=>x.indexOf(k.presence_ref)<0),b=p.filter(k=>y.indexOf(k.presence_ref)<0);j.length>0&&(u[m]=j),b.length>0&&(d[m]=b)}else u[m]=f}),this.syncDiff(i,{joins:u,leaves:d},n,s)}static syncDiff(t,r,n,s){const{joins:i,leaves:l}={joins:this.transformState(r.joins),leaves:this.transformState(r.leaves)};return n||(n=()=>{}),s||(s=()=>{}),this.map(i,(u,d)=>{var m;const f=(m=t[u])!==null&&m!==void 0?m:[];if(t[u]=this.cloneDeep(d),f.length>0){const p=t[u].map(x=>x.presence_ref),y=f.filter(x=>p.indexOf(x.presence_ref)<0);t[u].unshift(...y)}n(u,f,d)}),this.map(l,(u,d)=>{let m=t[u];if(!m)return;const f=d.map(p=>p.presence_ref);m=m.filter(p=>f.indexOf(p.presence_ref)<0),t[u]=m,s(u,m,d),m.length===0&&delete t[u]}),t}static map(t,r){return Object.getOwnPropertyNames(t).map(n=>r(n,t[n]))}static transformState(t){return t=this.cloneDeep(t),Object.getOwnPropertyNames(t).reduce((r,n)=>{const s=t[n];return"metas"in s?r[n]=s.metas.map(i=>(i.presence_ref=i.phx_ref,delete i.phx_ref,delete i.phx_ref_prev,i)):r[n]=s,r},{})}static cloneDeep(t){return JSON.parse(JSON.stringify(t))}onJoin(t){this.caller.onJoin=t}onLeave(t){this.caller.onLeave=t}onSync(t){this.caller.onSync=t}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var Wj;(function(e){e.ALL="*",e.INSERT="INSERT",e.UPDATE="UPDATE",e.DELETE="DELETE"})(Wj||(Wj={}));var ed;(function(e){e.BROADCAST="broadcast",e.PRESENCE="presence",e.POSTGRES_CHANGES="postgres_changes",e.SYSTEM="system"})(ed||(ed={}));var Ra;(function(e){e.SUBSCRIBED="SUBSCRIBED",e.TIMED_OUT="TIMED_OUT",e.CLOSED="CLOSED",e.CHANNEL_ERROR="CHANNEL_ERROR"})(Ra||(Ra={}));class gx{constructor(t,r={config:{}},n){var s,i;if(this.topic=t,this.params=r,this.socket=n,this.bindings={},this.state=Nn.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=t.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},r.config),this.timeout=this.socket.timeout,this.joinPush=new Wg(this,qi.join,this.params,this.timeout),this.rejoinTimer=new FC(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Nn.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(l=>l.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Nn.closed,this.socket._remove(this)}),this._onError(l=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,l),this.state=Nn.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Nn.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",l=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,l),this.state=Nn.errored,this.rejoinTimer.scheduleTimeout())}),this._on(qi.reply,{},(l,u)=>{this._trigger(this._replyEventName(u),l)}),this.presence=new Zu(this),this.broadcastEndpointURL=zC(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((i=(s=this.params.config)===null||s===void 0?void 0:s.broadcast)===null||i===void 0)&&i.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(t,r=this.timeout){var n,s,i;if(this.socket.isConnected()||this.socket.connect(),this.state==Nn.closed){const{config:{broadcast:l,presence:u,private:d}}=this.params,m=(s=(n=this.bindings.postgres_changes)===null||n===void 0?void 0:n.map(x=>x.filter))!==null&&s!==void 0?s:[],f=!!this.bindings[ed.PRESENCE]&&this.bindings[ed.PRESENCE].length>0||((i=this.params.config.presence)===null||i===void 0?void 0:i.enabled)===!0,p={},y={broadcast:l,presence:Object.assign(Object.assign({},u),{enabled:f}),postgres_changes:m,private:d};this.socket.accessTokenValue&&(p.access_token=this.socket.accessTokenValue),this._onError(x=>t==null?void 0:t(Ra.CHANNEL_ERROR,x)),this._onClose(()=>t==null?void 0:t(Ra.CLOSED)),this.updateJoinPayload(Object.assign({config:y},p)),this.joinedOnce=!0,this._rejoin(r),this.joinPush.receive("ok",async({postgres_changes:x})=>{var j;if(this.socket.setAuth(),x===void 0){t==null||t(Ra.SUBSCRIBED);return}else{const b=this.bindings.postgres_changes,k=(j=b==null?void 0:b.length)!==null&&j!==void 0?j:0,_=[];for(let E=0;E<k;E++){const C=b[E],{filter:{event:O,schema:T,table:A,filter:L}}=C,J=x&&x[E];if(J&&J.event===O&&J.schema===T&&J.table===A&&J.filter===L)_.push(Object.assign(Object.assign({},C),{id:J.id}));else{this.unsubscribe(),this.state=Nn.errored,t==null||t(Ra.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=_,t&&t(Ra.SUBSCRIBED);return}}).receive("error",x=>{this.state=Nn.errored,t==null||t(Ra.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(x).join(", ")||"error")))}).receive("timeout",()=>{t==null||t(Ra.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(t,r={}){return await this.send({type:"presence",event:"track",payload:t},r.timeout||this.timeout)}async untrack(t={}){return await this.send({type:"presence",event:"untrack"},t)}on(t,r,n){return this.state===Nn.joined&&t===ed.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(t,r,n)}async send(t,r={}){var n,s;if(!this._canPush()&&t.type==="broadcast"){const{event:i,payload:l}=t,d={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:i,payload:l,private:this.private}]})};try{const m=await this._fetchWithTimeout(this.broadcastEndpointURL,d,(n=r.timeout)!==null&&n!==void 0?n:this.timeout);return await((s=m.body)===null||s===void 0?void 0:s.cancel()),m.ok?"ok":"error"}catch(m){return m.name==="AbortError"?"timed out":"error"}}else return new Promise(i=>{var l,u,d;const m=this._push(t.type,t,r.timeout||this.timeout);t.type==="broadcast"&&!(!((d=(u=(l=this.params)===null||l===void 0?void 0:l.config)===null||u===void 0?void 0:u.broadcast)===null||d===void 0)&&d.ack)&&i("ok"),m.receive("ok",()=>i("ok")),m.receive("error",()=>i("error")),m.receive("timeout",()=>i("timed out"))})}updateJoinPayload(t){this.joinPush.updatePayload(t)}unsubscribe(t=this.timeout){this.state=Nn.leaving;const r=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(qi.close,"leave",this._joinRef())};this.joinPush.destroy();let n=null;return new Promise(s=>{n=new Wg(this,qi.leave,{},t),n.receive("ok",()=>{r(),s("ok")}).receive("timeout",()=>{r(),s("timed out")}).receive("error",()=>{s("error")}),n.send(),this._canPush()||n.trigger("ok",{})}).finally(()=>{n==null||n.destroy()})}teardown(){this.pushBuffer.forEach(t=>t.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=Nn.closed,this.bindings={}}async _fetchWithTimeout(t,r,n){const s=new AbortController,i=setTimeout(()=>s.abort(),n),l=await this.socket.fetch(t,Object.assign(Object.assign({},r),{signal:s.signal}));return clearTimeout(i),l}_push(t,r,n=this.timeout){if(!this.joinedOnce)throw`tried to push '${t}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let s=new Wg(this,t,r,n);return this._canPush()?s.send():this._addToPushBuffer(s),s}_addToPushBuffer(t){if(t.startTimeout(),this.pushBuffer.push(t),this.pushBuffer.length>l3){const r=this.pushBuffer.shift();r&&(r.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${r.event}`,r.payload))}}_onMessage(t,r,n){return r}_isMember(t){return this.topic===t}_joinRef(){return this.joinPush.ref}_trigger(t,r,n){var s,i;const l=t.toLocaleLowerCase(),{close:u,error:d,leave:m,join:f}=qi;if(n&&[u,d,m,f].indexOf(l)>=0&&n!==this._joinRef())return;let y=this._onMessage(l,r,n);if(r&&!y)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(l)?(s=this.bindings.postgres_changes)===null||s===void 0||s.filter(x=>{var j,b,k;return((j=x.filter)===null||j===void 0?void 0:j.event)==="*"||((k=(b=x.filter)===null||b===void 0?void 0:b.event)===null||k===void 0?void 0:k.toLocaleLowerCase())===l}).map(x=>x.callback(y,n)):(i=this.bindings[l])===null||i===void 0||i.filter(x=>{var j,b,k,_,E,C;if(["broadcast","presence","postgres_changes"].includes(l))if("id"in x){const O=x.id,T=(j=x.filter)===null||j===void 0?void 0:j.event;return O&&((b=r.ids)===null||b===void 0?void 0:b.includes(O))&&(T==="*"||(T==null?void 0:T.toLocaleLowerCase())===((k=r.data)===null||k===void 0?void 0:k.type.toLocaleLowerCase()))}else{const O=(E=(_=x==null?void 0:x.filter)===null||_===void 0?void 0:_.event)===null||E===void 0?void 0:E.toLocaleLowerCase();return O==="*"||O===((C=r==null?void 0:r.event)===null||C===void 0?void 0:C.toLocaleLowerCase())}else return x.type.toLocaleLowerCase()===l}).map(x=>{if(typeof y=="object"&&"ids"in y){const j=y.data,{schema:b,table:k,commit_timestamp:_,type:E,errors:C}=j;y=Object.assign(Object.assign({},{schema:b,table:k,commit_timestamp:_,eventType:E,new:{},old:{},errors:C}),this._getPayloadRecords(j))}x.callback(y,n)})}_isClosed(){return this.state===Nn.closed}_isJoined(){return this.state===Nn.joined}_isJoining(){return this.state===Nn.joining}_isLeaving(){return this.state===Nn.leaving}_replyEventName(t){return`chan_reply_${t}`}_on(t,r,n){const s=t.toLocaleLowerCase(),i={type:s,filter:r,callback:n};return this.bindings[s]?this.bindings[s].push(i):this.bindings[s]=[i],this}_off(t,r){const n=t.toLocaleLowerCase();return this.bindings[n]&&(this.bindings[n]=this.bindings[n].filter(s=>{var i;return!(((i=s.type)===null||i===void 0?void 0:i.toLocaleLowerCase())===n&&gx.isEqual(s.filter,r))})),this}static isEqual(t,r){if(Object.keys(t).length!==Object.keys(r).length)return!1;for(const n in t)if(t[n]!==r[n])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(t){this._on(qi.close,{},t)}_onError(t){this._on(qi.error,{},r=>t(r))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(t=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Nn.joining,this.joinPush.resend(t))}_getPayloadRecords(t){const r={new:{},old:{}};return(t.type==="INSERT"||t.type==="UPDATE")&&(r.new=Uj(t.columns,t.record)),(t.type==="UPDATE"||t.type==="DELETE")&&(r.old=Uj(t.columns,t.old_record)),r}}const qg=()=>{},Uf={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},g3=[1e3,2e3,5e3,1e4],y3=1e4,v3=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class x3{constructor(t,r){var n;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=Uv,this.transport=null,this.heartbeatIntervalMs=Uf.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=qg,this.ref=0,this.reconnectTimer=null,this.logger=qg,this.conn=null,this.sendBuffer=[],this.serializer=new c3,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=s=>{let i;return s?i=s:typeof fetch>"u"?i=(...l)=>Sd(async()=>{const{default:u}=await Promise.resolve().then(()=>Kc);return{default:u}},void 0).then(({default:u})=>u(...l)).catch(u=>{throw new Error(`Failed to load @supabase/node-fetch: ${u.message}. This is required for HTTP requests in Node.js environments without native fetch.`)}):i=fetch,(...l)=>i(...l)},!(!((n=r==null?void 0:r.params)===null||n===void 0)&&n.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=r.params.apikey,this.endPoint=`${t}/${Bv.websocket}`,this.httpEndpoint=zC(t),this._initializeOptions(r),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(r==null?void 0:r.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=n3.createWebSocket(this.endpointURL())}catch(t){this._setConnectionState("disconnected");const r=t.message;throw r.includes("Node.js")?new Error(`${r}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${r}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:a3}))}disconnect(t,r){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const n=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(n),this._setConnectionState("disconnected")},t?this.conn.close(t,r??""):this.conn.close(),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(t){const r=await t.unsubscribe();return this.channels.length===0&&this.disconnect(),r}async removeAllChannels(){const t=await Promise.all(this.channels.map(r=>r.unsubscribe()));return this.channels=[],this.disconnect(),t}log(t,r,n){this.logger(t,r,n)}connectionState(){switch(this.conn&&this.conn.readyState){case Qu.connecting:return dl.Connecting;case Qu.open:return dl.Open;case Qu.closing:return dl.Closing;default:return dl.Closed}}isConnected(){return this.connectionState()===dl.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(t,r={config:{}}){const n=`realtime:${t}`,s=this.getChannels().find(i=>i.topic===n);if(s)return s;{const i=new gx(`realtime:${t}`,r,this);return this.channels.push(i),i}}push(t){const{topic:r,event:n,payload:s,ref:i}=t,l=()=>{this.encode(t,u=>{var d;(d=this.conn)===null||d===void 0||d.send(u)})};this.log("push",`${r} ${n} (${i})`,s),this.isConnected()?l():this.sendBuffer.push(l)}async setAuth(t=null){this._authPromise=this._performAuth(t);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var t;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(r){this.log("error","error in heartbeat callback",r)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(r){this.log("error","error in heartbeat callback",r)}this._wasManualDisconnect=!1,(t=this.conn)===null||t===void 0||t.close(o3,"heartbeat timeout"),setTimeout(()=>{var r;this.isConnected()||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout()},Uf.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(r){this.log("error","error in heartbeat callback",r)}this._setAuthSafely("heartbeat")}onHeartbeat(t){this.heartbeatCallback=t}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(t=>t()),this.sendBuffer=[])}_makeRef(){let t=this.ref+1;return t===this.ref?this.ref=0:this.ref=t,this.ref.toString()}_leaveOpenTopic(t){let r=this.channels.find(n=>n.topic===t&&(n._isJoined()||n._isJoining()));r&&(this.log("transport",`leaving duplicate topic "${t}"`),r.unsubscribe())}_remove(t){this.channels=this.channels.filter(r=>r.topic!==t.topic)}_onConnMessage(t){this.decode(t.data,r=>{if(r.topic==="phoenix"&&r.event==="phx_reply")try{this.heartbeatCallback(r.payload.status==="ok"?"ok":"error")}catch(m){this.log("error","error in heartbeat callback",m)}r.ref&&r.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:n,event:s,payload:i,ref:l}=r,u=l?`(${l})`:"",d=i.status||"";this.log("receive",`${d} ${n} ${s} ${u}`.trim(),i),this.channels.filter(m=>m._isMember(n)).forEach(m=>m._trigger(s,i,l)),this._triggerStateCallbacks("message",r)})}_clearTimer(t){var r;t==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):t==="reconnect"&&((r=this.reconnectTimer)===null||r===void 0||r.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=t=>this._onConnError(t),this.conn.onmessage=t=>this._onConnMessage(t),this.conn.onclose=t=>this._onConnClose(t))}_teardownConnection(){this.conn&&(this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null),this._clearAllTimers(),this.channels.forEach(t=>t.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const t=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(t),this.workerRef.onerror=r=>{this.log("worker","worker error",r.message),this.workerRef.terminate()},this.workerRef.onmessage=r=>{r.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(t){var r;this._setConnectionState("disconnected"),this.log("transport","close",t),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout(),this._triggerStateCallbacks("close",t)}_onConnError(t){this._setConnectionState("disconnected"),this.log("transport",`${t}`),this._triggerChanError(),this._triggerStateCallbacks("error",t)}_triggerChanError(){this.channels.forEach(t=>t._trigger(qi.error))}_appendParams(t,r){if(Object.keys(r).length===0)return t;const n=t.match(/\?/)?"&":"?",s=new URLSearchParams(r);return`${t}${n}${s}`}_workerObjectUrl(t){let r;if(t)r=t;else{const n=new Blob([v3],{type:"application/javascript"});r=URL.createObjectURL(n)}return r}_setConnectionState(t,r=!1){this._connectionState=t,t==="connecting"?this._wasManualDisconnect=!1:t==="disconnecting"&&(this._wasManualDisconnect=r)}async _performAuth(t=null){let r;t?r=t:this.accessToken?r=await this.accessToken():r=this.accessTokenValue,this.accessTokenValue!=r&&(this.accessTokenValue=r,this.channels.forEach(n=>{const s={access_token:r,version:i3};r&&n.updateJoinPayload(s),n.joinedOnce&&n._isJoined()&&n._push(qi.access_token,{access_token:r})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(t="general"){this.setAuth().catch(r=>{this.log("error",`error setting auth in ${t}`,r)})}_triggerStateCallbacks(t,r){try{this.stateChangeCallbacks[t].forEach(n=>{try{n(r)}catch(s){this.log("error",`error in ${t} callback`,s)}})}catch(n){this.log("error",`error triggering ${t} callbacks`,n)}}_setupReconnectionTimer(){this.reconnectTimer=new FC(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},Uf.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(t){var r,n,s,i,l,u,d,m,f;if(this.transport=(r=t==null?void 0:t.transport)!==null&&r!==void 0?r:null,this.timeout=(n=t==null?void 0:t.timeout)!==null&&n!==void 0?n:Uv,this.heartbeatIntervalMs=(s=t==null?void 0:t.heartbeatIntervalMs)!==null&&s!==void 0?s:Uf.HEARTBEAT_INTERVAL,this.worker=(i=t==null?void 0:t.worker)!==null&&i!==void 0?i:!1,this.accessToken=(l=t==null?void 0:t.accessToken)!==null&&l!==void 0?l:null,this.heartbeatCallback=(u=t==null?void 0:t.heartbeatCallback)!==null&&u!==void 0?u:qg,t!=null&&t.params&&(this.params=t.params),t!=null&&t.logger&&(this.logger=t.logger),(t!=null&&t.logLevel||t!=null&&t.log_level)&&(this.logLevel=t.logLevel||t.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(d=t==null?void 0:t.reconnectAfterMs)!==null&&d!==void 0?d:(p=>g3[p-1]||y3),this.encode=(m=t==null?void 0:t.encode)!==null&&m!==void 0?m:((p,y)=>y(JSON.stringify(p))),this.decode=(f=t==null?void 0:t.decode)!==null&&f!==void 0?f:this.serializer.decode.bind(this.serializer),this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=t==null?void 0:t.workerUrl}}}class yx extends Error{constructor(t){super(t),this.__isStorageError=!0,this.name="StorageError"}}function fn(e){return typeof e=="object"&&e!==null&&"__isStorageError"in e}class w3 extends yx{constructor(t,r,n){super(t),this.name="StorageApiError",this.status=r,this.statusCode=n}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class qv extends yx{constructor(t,r){super(t),this.name="StorageUnknownError",this.originalError=r}}var b3=function(e,t,r,n){function s(i){return i instanceof r?i:new r(function(l){l(i)})}return new(r||(r=Promise))(function(i,l){function u(f){try{m(n.next(f))}catch(p){l(p)}}function d(f){try{m(n.throw(f))}catch(p){l(p)}}function m(f){f.done?i(f.value):s(f.value).then(u,d)}m((n=n.apply(e,t||[])).next())})};const UC=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...r)=>Sd(async()=>{const{default:n}=await Promise.resolve().then(()=>Kc);return{default:n}},void 0).then(({default:n})=>n(...r)):t=fetch,(...r)=>t(...r)},j3=()=>b3(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield Sd(()=>Promise.resolve().then(()=>Kc),void 0)).Response:Response}),Vv=e=>{if(Array.isArray(e))return e.map(r=>Vv(r));if(typeof e=="function"||e!==Object(e))return e;const t={};return Object.entries(e).forEach(([r,n])=>{const s=r.replace(/([-_][a-z])/gi,i=>i.toUpperCase().replace(/[-_]/g,""));t[s]=Vv(n)}),t},S3=e=>{if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)};var Il=function(e,t,r,n){function s(i){return i instanceof r?i:new r(function(l){l(i)})}return new(r||(r=Promise))(function(i,l){function u(f){try{m(n.next(f))}catch(p){l(p)}}function d(f){try{m(n.throw(f))}catch(p){l(p)}}function m(f){f.done?i(f.value):s(f.value).then(u,d)}m((n=n.apply(e,t||[])).next())})};const Vg=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),k3=(e,t,r)=>Il(void 0,void 0,void 0,function*(){const n=yield j3();e instanceof n&&!(r!=null&&r.noResolveJson)?e.json().then(s=>{const i=e.status||500,l=(s==null?void 0:s.statusCode)||i+"";t(new w3(Vg(s),i,l))}).catch(s=>{t(new qv(Vg(s),s))}):t(new qv(Vg(e),e))}),N3=(e,t,r,n)=>{const s={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"||!n?s:(S3(n)?(s.headers=Object.assign({"Content-Type":"application/json"},t==null?void 0:t.headers),s.body=JSON.stringify(n)):s.body=n,t!=null&&t.duplex&&(s.duplex=t.duplex),Object.assign(Object.assign({},s),r))};function kd(e,t,r,n,s,i){return Il(this,void 0,void 0,function*(){return new Promise((l,u)=>{e(r,N3(t,n,s,i)).then(d=>{if(!d.ok)throw d;return n!=null&&n.noResolveJson?d:d.json()}).then(d=>l(d)).catch(d=>k3(d,u,n))})})}function bh(e,t,r,n){return Il(this,void 0,void 0,function*(){return kd(e,"GET",t,r,n)})}function fa(e,t,r,n,s){return Il(this,void 0,void 0,function*(){return kd(e,"POST",t,n,s,r)})}function Hv(e,t,r,n,s){return Il(this,void 0,void 0,function*(){return kd(e,"PUT",t,n,s,r)})}function _3(e,t,r,n){return Il(this,void 0,void 0,function*(){return kd(e,"HEAD",t,Object.assign(Object.assign({},r),{noResolveJson:!0}),n)})}function BC(e,t,r,n,s){return Il(this,void 0,void 0,function*(){return kd(e,"DELETE",t,n,s,r)})}var C3=function(e,t,r,n){function s(i){return i instanceof r?i:new r(function(l){l(i)})}return new(r||(r=Promise))(function(i,l){function u(f){try{m(n.next(f))}catch(p){l(p)}}function d(f){try{m(n.throw(f))}catch(p){l(p)}}function m(f){f.done?i(f.value):s(f.value).then(u,d)}m((n=n.apply(e,t||[])).next())})};class E3{constructor(t,r){this.downloadFn=t,this.shouldThrowOnError=r}then(t,r){return this.execute().then(t,r)}execute(){return C3(this,void 0,void 0,function*(){try{return{data:(yield this.downloadFn()).body,error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(fn(t))return{data:null,error:t};throw t}})}}var A3=function(e,t,r,n){function s(i){return i instanceof r?i:new r(function(l){l(i)})}return new(r||(r=Promise))(function(i,l){function u(f){try{m(n.next(f))}catch(p){l(p)}}function d(f){try{m(n.throw(f))}catch(p){l(p)}}function m(f){f.done?i(f.value):s(f.value).then(u,d)}m((n=n.apply(e,t||[])).next())})};class P3{constructor(t,r){this.downloadFn=t,this.shouldThrowOnError=r}asStream(){return new E3(this.downloadFn,this.shouldThrowOnError)}then(t,r){return this.execute().then(t,r)}execute(){return A3(this,void 0,void 0,function*(){try{return{data:yield(yield this.downloadFn()).blob(),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(fn(t))return{data:null,error:t};throw t}})}}var Ds=function(e,t,r,n){function s(i){return i instanceof r?i:new r(function(l){l(i)})}return new(r||(r=Promise))(function(i,l){function u(f){try{m(n.next(f))}catch(p){l(p)}}function d(f){try{m(n.throw(f))}catch(p){l(p)}}function m(f){f.done?i(f.value):s(f.value).then(u,d)}m((n=n.apply(e,t||[])).next())})};const O3={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},qj={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class T3{constructor(t,r={},n,s){this.shouldThrowOnError=!1,this.url=t,this.headers=r,this.bucketId=n,this.fetch=UC(s)}throwOnError(){return this.shouldThrowOnError=!0,this}uploadOrUpdate(t,r,n,s){return Ds(this,void 0,void 0,function*(){try{let i;const l=Object.assign(Object.assign({},qj),s);let u=Object.assign(Object.assign({},this.headers),t==="POST"&&{"x-upsert":String(l.upsert)});const d=l.metadata;typeof Blob<"u"&&n instanceof Blob?(i=new FormData,i.append("cacheControl",l.cacheControl),d&&i.append("metadata",this.encodeMetadata(d)),i.append("",n)):typeof FormData<"u"&&n instanceof FormData?(i=n,i.append("cacheControl",l.cacheControl),d&&i.append("metadata",this.encodeMetadata(d))):(i=n,u["cache-control"]=`max-age=${l.cacheControl}`,u["content-type"]=l.contentType,d&&(u["x-metadata"]=this.toBase64(this.encodeMetadata(d)))),s!=null&&s.headers&&(u=Object.assign(Object.assign({},u),s.headers));const m=this._removeEmptyFolders(r),f=this._getFinalPath(m),p=yield(t=="PUT"?Hv:fa)(this.fetch,`${this.url}/object/${f}`,i,Object.assign({headers:u},l!=null&&l.duplex?{duplex:l.duplex}:{}));return{data:{path:m,id:p.Id,fullPath:p.Key},error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(fn(i))return{data:null,error:i};throw i}})}upload(t,r,n){return Ds(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",t,r,n)})}uploadToSignedUrl(t,r,n,s){return Ds(this,void 0,void 0,function*(){const i=this._removeEmptyFolders(t),l=this._getFinalPath(i),u=new URL(this.url+`/object/upload/sign/${l}`);u.searchParams.set("token",r);try{let d;const m=Object.assign({upsert:qj.upsert},s),f=Object.assign(Object.assign({},this.headers),{"x-upsert":String(m.upsert)});typeof Blob<"u"&&n instanceof Blob?(d=new FormData,d.append("cacheControl",m.cacheControl),d.append("",n)):typeof FormData<"u"&&n instanceof FormData?(d=n,d.append("cacheControl",m.cacheControl)):(d=n,f["cache-control"]=`max-age=${m.cacheControl}`,f["content-type"]=m.contentType);const p=yield Hv(this.fetch,u.toString(),d,{headers:f});return{data:{path:i,fullPath:p.Key},error:null}}catch(d){if(this.shouldThrowOnError)throw d;if(fn(d))return{data:null,error:d};throw d}})}createSignedUploadUrl(t,r){return Ds(this,void 0,void 0,function*(){try{let n=this._getFinalPath(t);const s=Object.assign({},this.headers);r!=null&&r.upsert&&(s["x-upsert"]="true");const i=yield fa(this.fetch,`${this.url}/object/upload/sign/${n}`,{},{headers:s}),l=new URL(this.url+i.url),u=l.searchParams.get("token");if(!u)throw new yx("No token returned by API");return{data:{signedUrl:l.toString(),path:t,token:u},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(fn(n))return{data:null,error:n};throw n}})}update(t,r,n){return Ds(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",t,r,n)})}move(t,r,n){return Ds(this,void 0,void 0,function*(){try{return{data:yield fa(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:t,destinationKey:r,destinationBucket:n==null?void 0:n.destinationBucket},{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(fn(s))return{data:null,error:s};throw s}})}copy(t,r,n){return Ds(this,void 0,void 0,function*(){try{return{data:{path:(yield fa(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:t,destinationKey:r,destinationBucket:n==null?void 0:n.destinationBucket},{headers:this.headers})).Key},error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(fn(s))return{data:null,error:s};throw s}})}createSignedUrl(t,r,n){return Ds(this,void 0,void 0,function*(){try{let s=this._getFinalPath(t),i=yield fa(this.fetch,`${this.url}/object/sign/${s}`,Object.assign({expiresIn:r},n!=null&&n.transform?{transform:n.transform}:{}),{headers:this.headers});const l=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return i={signedUrl:encodeURI(`${this.url}${i.signedURL}${l}`)},{data:i,error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(fn(s))return{data:null,error:s};throw s}})}createSignedUrls(t,r,n){return Ds(this,void 0,void 0,function*(){try{const s=yield fa(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:r,paths:t},{headers:this.headers}),i=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return{data:s.map(l=>Object.assign(Object.assign({},l),{signedUrl:l.signedURL?encodeURI(`${this.url}${l.signedURL}${i}`):null})),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(fn(s))return{data:null,error:s};throw s}})}download(t,r){const s=typeof(r==null?void 0:r.transform)<"u"?"render/image/authenticated":"object",i=this.transformOptsToQueryString((r==null?void 0:r.transform)||{}),l=i?`?${i}`:"",u=this._getFinalPath(t),d=()=>bh(this.fetch,`${this.url}/${s}/${u}${l}`,{headers:this.headers,noResolveJson:!0});return new P3(d,this.shouldThrowOnError)}info(t){return Ds(this,void 0,void 0,function*(){const r=this._getFinalPath(t);try{const n=yield bh(this.fetch,`${this.url}/object/info/${r}`,{headers:this.headers});return{data:Vv(n),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(fn(n))return{data:null,error:n};throw n}})}exists(t){return Ds(this,void 0,void 0,function*(){const r=this._getFinalPath(t);try{return yield _3(this.fetch,`${this.url}/object/${r}`,{headers:this.headers}),{data:!0,error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(fn(n)&&n instanceof qv){const s=n.originalError;if([400,404].includes(s==null?void 0:s.status))return{data:!1,error:n}}throw n}})}getPublicUrl(t,r){const n=this._getFinalPath(t),s=[],i=r!=null&&r.download?`download=${r.download===!0?"":r.download}`:"";i!==""&&s.push(i);const u=typeof(r==null?void 0:r.transform)<"u"?"render/image":"object",d=this.transformOptsToQueryString((r==null?void 0:r.transform)||{});d!==""&&s.push(d);let m=s.join("&");return m!==""&&(m=`?${m}`),{data:{publicUrl:encodeURI(`${this.url}/${u}/public/${n}${m}`)}}}remove(t){return Ds(this,void 0,void 0,function*(){try{return{data:yield BC(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:t},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(fn(r))return{data:null,error:r};throw r}})}list(t,r,n){return Ds(this,void 0,void 0,function*(){try{const s=Object.assign(Object.assign(Object.assign({},O3),r),{prefix:t||""});return{data:yield fa(this.fetch,`${this.url}/object/list/${this.bucketId}`,s,{headers:this.headers},n),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(fn(s))return{data:null,error:s};throw s}})}listV2(t,r){return Ds(this,void 0,void 0,function*(){try{const n=Object.assign({},t);return{data:yield fa(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,n,{headers:this.headers},r),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(fn(n))return{data:null,error:n};throw n}})}encodeMetadata(t){return JSON.stringify(t)}toBase64(t){return typeof Buffer<"u"?Buffer.from(t).toString("base64"):btoa(t)}_getFinalPath(t){return`${this.bucketId}/${t.replace(/^\/+/,"")}`}_removeEmptyFolders(t){return t.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(t){const r=[];return t.width&&r.push(`width=${t.width}`),t.height&&r.push(`height=${t.height}`),t.resize&&r.push(`resize=${t.resize}`),t.format&&r.push(`format=${t.format}`),t.quality&&r.push(`quality=${t.quality}`),r.join("&")}}const I3="2.74.0",D3={"X-Client-Info":`storage-js/${I3}`};var cc=function(e,t,r,n){function s(i){return i instanceof r?i:new r(function(l){l(i)})}return new(r||(r=Promise))(function(i,l){function u(f){try{m(n.next(f))}catch(p){l(p)}}function d(f){try{m(n.throw(f))}catch(p){l(p)}}function m(f){f.done?i(f.value):s(f.value).then(u,d)}m((n=n.apply(e,t||[])).next())})};class R3{constructor(t,r={},n,s){this.shouldThrowOnError=!1;const i=new URL(t);s!=null&&s.useNewHostname&&/supabase\.(co|in|red)$/.test(i.hostname)&&!i.hostname.includes("storage.supabase.")&&(i.hostname=i.hostname.replace("supabase.","storage.supabase.")),this.url=i.href.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},D3),r),this.fetch=UC(n)}throwOnError(){return this.shouldThrowOnError=!0,this}listBuckets(){return cc(this,void 0,void 0,function*(){try{return{data:yield bh(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(fn(t))return{data:null,error:t};throw t}})}getBucket(t){return cc(this,void 0,void 0,function*(){try{return{data:yield bh(this.fetch,`${this.url}/bucket/${t}`,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(fn(r))return{data:null,error:r};throw r}})}createBucket(t){return cc(this,arguments,void 0,function*(r,n={public:!1}){try{return{data:yield fa(this.fetch,`${this.url}/bucket`,{id:r,name:r,type:n.type,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(fn(s))return{data:null,error:s};throw s}})}updateBucket(t,r){return cc(this,void 0,void 0,function*(){try{return{data:yield Hv(this.fetch,`${this.url}/bucket/${t}`,{id:t,name:t,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(fn(n))return{data:null,error:n};throw n}})}emptyBucket(t){return cc(this,void 0,void 0,function*(){try{return{data:yield fa(this.fetch,`${this.url}/bucket/${t}/empty`,{},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(fn(r))return{data:null,error:r};throw r}})}deleteBucket(t){return cc(this,void 0,void 0,function*(){try{return{data:yield BC(this.fetch,`${this.url}/bucket/${t}`,{},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(fn(r))return{data:null,error:r};throw r}})}}class $3 extends R3{constructor(t,r={},n,s){super(t,r,n,s)}from(t){return new T3(this.url,this.headers,t,this.fetch)}}const M3="2.74.0";let Vu="";typeof Deno<"u"?Vu="deno":typeof document<"u"?Vu="web":typeof navigator<"u"&&navigator.product==="ReactNative"?Vu="react-native":Vu="node";const F3={"X-Client-Info":`supabase-js-${Vu}/${M3}`},L3={headers:F3},z3={schema:"public"},U3={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},B3={};var W3=function(e,t,r,n){function s(i){return i instanceof r?i:new r(function(l){l(i)})}return new(r||(r=Promise))(function(i,l){function u(f){try{m(n.next(f))}catch(p){l(p)}}function d(f){try{m(n.throw(f))}catch(p){l(p)}}function m(f){f.done?i(f.value):s(f.value).then(u,d)}m((n=n.apply(e,t||[])).next())})};const q3=e=>{let t;return e?t=e:typeof fetch>"u"?t=TC:t=fetch,(...r)=>t(...r)},V3=()=>typeof Headers>"u"?IC:Headers,H3=(e,t,r)=>{const n=q3(r),s=V3();return(i,l)=>W3(void 0,void 0,void 0,function*(){var u;const d=(u=yield t())!==null&&u!==void 0?u:e;let m=new s(l==null?void 0:l.headers);return m.has("apikey")||m.set("apikey",e),m.has("Authorization")||m.set("Authorization",`Bearer ${d}`),n(i,Object.assign(Object.assign({},l),{headers:m}))})};var K3=function(e,t,r,n){function s(i){return i instanceof r?i:new r(function(l){l(i)})}return new(r||(r=Promise))(function(i,l){function u(f){try{m(n.next(f))}catch(p){l(p)}}function d(f){try{m(n.throw(f))}catch(p){l(p)}}function m(f){f.done?i(f.value):s(f.value).then(u,d)}m((n=n.apply(e,t||[])).next())})};function G3(e){return e.endsWith("/")?e:e+"/"}function Y3(e,t){var r,n;const{db:s,auth:i,realtime:l,global:u}=e,{db:d,auth:m,realtime:f,global:p}=t,y={db:Object.assign(Object.assign({},d),s),auth:Object.assign(Object.assign({},m),i),realtime:Object.assign(Object.assign({},f),l),storage:{},global:Object.assign(Object.assign(Object.assign({},p),u),{headers:Object.assign(Object.assign({},(r=p==null?void 0:p.headers)!==null&&r!==void 0?r:{}),(n=u==null?void 0:u.headers)!==null&&n!==void 0?n:{})}),accessToken:()=>K3(this,void 0,void 0,function*(){return""})};return e.accessToken?y.accessToken=e.accessToken:delete y.accessToken,y}function J3(e){const t=e==null?void 0:e.trim();if(!t)throw new Error("supabaseUrl is required.");if(!t.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(G3(t))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}const WC="2.74.0",bc=30*1e3,Kv=3,Hg=Kv*bc,X3="http://localhost:9999",Q3="supabase.auth.token",Z3={"X-Client-Info":`gotrue-js/${WC}`},Gv="X-Supabase-Api-Version",qC={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},e6=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,t6=600*1e3;class ad extends Error{constructor(t,r,n){super(t),this.__isAuthError=!0,this.name="AuthError",this.status=r,this.code=n}}function ut(e){return typeof e=="object"&&e!==null&&"__isAuthError"in e}class r6 extends ad{constructor(t,r,n){super(t,r,n),this.name="AuthApiError",this.status=r,this.code=n}}function n6(e){return ut(e)&&e.name==="AuthApiError"}class fl extends ad{constructor(t,r){super(t),this.name="AuthUnknownError",this.originalError=r}}class zo extends ad{constructor(t,r,n,s){super(t,n,s),this.name=r,this.status=n}}class Co extends zo{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function s6(e){return ut(e)&&e.name==="AuthSessionMissingError"}class uc extends zo{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Bf extends zo{constructor(t){super(t,"AuthInvalidCredentialsError",400,void 0)}}class Wf extends zo{constructor(t,r=null){super(t,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function i6(e){return ut(e)&&e.name==="AuthImplicitGrantRedirectError"}class Vj extends zo{constructor(t,r=null){super(t,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Yv extends zo{constructor(t,r){super(t,"AuthRetryableFetchError",r,void 0)}}function Kg(e){return ut(e)&&e.name==="AuthRetryableFetchError"}class Hj extends zo{constructor(t,r,n){super(t,"AuthWeakPasswordError",r,"weak_password"),this.reasons=n}}class Jv extends zo{constructor(t){super(t,"AuthInvalidJwtError",400,"invalid_jwt")}}const jh="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),Kj=` 	
\r=`.split(""),a6=(()=>{const e=new Array(128);for(let t=0;t<e.length;t+=1)e[t]=-1;for(let t=0;t<Kj.length;t+=1)e[Kj[t].charCodeAt(0)]=-2;for(let t=0;t<jh.length;t+=1)e[jh[t].charCodeAt(0)]=t;return e})();function Gj(e,t,r){if(e!==null)for(t.queue=t.queue<<8|e,t.queuedBits+=8;t.queuedBits>=6;){const n=t.queue>>t.queuedBits-6&63;r(jh[n]),t.queuedBits-=6}else if(t.queuedBits>0)for(t.queue=t.queue<<6-t.queuedBits,t.queuedBits=6;t.queuedBits>=6;){const n=t.queue>>t.queuedBits-6&63;r(jh[n]),t.queuedBits-=6}}function VC(e,t,r){const n=a6[e];if(n>-1)for(t.queue=t.queue<<6|n,t.queuedBits+=6;t.queuedBits>=8;)r(t.queue>>t.queuedBits-8&255),t.queuedBits-=8;else{if(n===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(e)}"`)}}function Yj(e){const t=[],r=l=>{t.push(String.fromCodePoint(l))},n={utf8seq:0,codepoint:0},s={queue:0,queuedBits:0},i=l=>{c6(l,n,r)};for(let l=0;l<e.length;l+=1)VC(e.charCodeAt(l),s,i);return t.join("")}function o6(e,t){if(e<=127){t(e);return}else if(e<=2047){t(192|e>>6),t(128|e&63);return}else if(e<=65535){t(224|e>>12),t(128|e>>6&63),t(128|e&63);return}else if(e<=1114111){t(240|e>>18),t(128|e>>12&63),t(128|e>>6&63),t(128|e&63);return}throw new Error(`Unrecognized Unicode codepoint: ${e.toString(16)}`)}function l6(e,t){for(let r=0;r<e.length;r+=1){let n=e.charCodeAt(r);if(n>55295&&n<=56319){const s=(n-55296)*1024&65535;n=(e.charCodeAt(r+1)-56320&65535|s)+65536,r+=1}o6(n,t)}}function c6(e,t,r){if(t.utf8seq===0){if(e<=127){r(e);return}for(let n=1;n<6;n+=1)if((e>>7-n&1)===0){t.utf8seq=n;break}if(t.utf8seq===2)t.codepoint=e&31;else if(t.utf8seq===3)t.codepoint=e&15;else if(t.utf8seq===4)t.codepoint=e&7;else throw new Error("Invalid UTF-8 sequence");t.utf8seq-=1}else if(t.utf8seq>0){if(e<=127)throw new Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|e&63,t.utf8seq-=1,t.utf8seq===0&&r(t.codepoint)}}function Ec(e){const t=[],r={queue:0,queuedBits:0},n=s=>{t.push(s)};for(let s=0;s<e.length;s+=1)VC(e.charCodeAt(s),r,n);return new Uint8Array(t)}function u6(e){const t=[];return l6(e,r=>t.push(r)),new Uint8Array(t)}function hl(e){const t=[],r={queue:0,queuedBits:0},n=s=>{t.push(s)};return e.forEach(s=>Gj(s,r,n)),Gj(null,r,n),t.join("")}function d6(e){return Math.round(Date.now()/1e3)+e}function f6(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){const t=Math.random()*16|0;return(e=="x"?t:t&3|8).toString(16)})}const Ys=()=>typeof window<"u"&&typeof document<"u",sl={tested:!1,writable:!1},HC=()=>{if(!Ys())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(sl.tested)return sl.writable;const e=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),sl.tested=!0,sl.writable=!0}catch{sl.tested=!0,sl.writable=!1}return sl.writable};function h6(e){const t={},r=new URL(e);if(r.hash&&r.hash[0]==="#")try{new URLSearchParams(r.hash.substring(1)).forEach((s,i)=>{t[i]=s})}catch{}return r.searchParams.forEach((n,s)=>{t[s]=n}),t}const KC=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...r)=>Sd(async()=>{const{default:n}=await Promise.resolve().then(()=>Kc);return{default:n}},void 0).then(({default:n})=>n(...r)):t=fetch,(...r)=>t(...r)},m6=e=>typeof e=="object"&&e!==null&&"status"in e&&"ok"in e&&"json"in e&&typeof e.json=="function",jc=async(e,t,r)=>{await e.setItem(t,JSON.stringify(r))},il=async(e,t)=>{const r=await e.getItem(t);if(!r)return null;try{return JSON.parse(r)}catch{return r}},_o=async(e,t)=>{await e.removeItem(t)};class bm{constructor(){this.promise=new bm.promiseConstructor((t,r)=>{this.resolve=t,this.reject=r})}}bm.promiseConstructor=Promise;function Gg(e){const t=e.split(".");if(t.length!==3)throw new Jv("Invalid JWT structure");for(let n=0;n<t.length;n++)if(!e6.test(t[n]))throw new Jv("JWT not in base64url format");return{header:JSON.parse(Yj(t[0])),payload:JSON.parse(Yj(t[1])),signature:Ec(t[2]),raw:{header:t[0],payload:t[1]}}}async function p6(e){return await new Promise(t=>{setTimeout(()=>t(null),e)})}function g6(e,t){return new Promise((n,s)=>{(async()=>{for(let i=0;i<1/0;i++)try{const l=await e(i);if(!t(i,null,l)){n(l);return}}catch(l){if(!t(i,l)){s(l);return}}})()})}function y6(e){return("0"+e.toString(16)).substr(-2)}function v6(){const t=new Uint32Array(56);if(typeof crypto>"u"){const r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",n=r.length;let s="";for(let i=0;i<56;i++)s+=r.charAt(Math.floor(Math.random()*n));return s}return crypto.getRandomValues(t),Array.from(t,y6).join("")}async function x6(e){const r=new TextEncoder().encode(e),n=await crypto.subtle.digest("SHA-256",r),s=new Uint8Array(n);return Array.from(s).map(i=>String.fromCharCode(i)).join("")}async function w6(e){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),e;const r=await x6(e);return btoa(r).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function dc(e,t,r=!1){const n=v6();let s=n;r&&(s+="/PASSWORD_RECOVERY"),await jc(e,`${t}-code-verifier`,s);const i=await w6(n);return[i,n===i?"plain":"s256"]}const b6=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function j6(e){const t=e.headers.get(Gv);if(!t||!t.match(b6))return null;try{return new Date(`${t}T00:00:00.0Z`)}catch{return null}}function S6(e){if(!e)throw new Error("Missing exp claim");const t=Math.floor(Date.now()/1e3);if(e<=t)throw new Error("JWT has expired")}function k6(e){switch(e){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const N6=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function fc(e){if(!N6.test(e))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function Yg(){const e={};return new Proxy(e,{get:(t,r)=>{if(r==="__isUserNotAvailableProxy")return!0;if(typeof r=="symbol"){const n=r.toString();if(n==="Symbol(Symbol.toPrimitive)"||n==="Symbol(Symbol.toStringTag)"||n==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${r}" property of the session object is not supported. Please use getUser() instead.`)},set:(t,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(t,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function Jj(e){return JSON.parse(JSON.stringify(e))}var _6=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(e);s<n.length;s++)t.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(e,n[s])&&(r[n[s]]=e[n[s]]);return r};const ol=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),C6=[502,503,504];async function Xj(e){var t;if(!m6(e))throw new Yv(ol(e),0);if(C6.includes(e.status))throw new Yv(ol(e),e.status);let r;try{r=await e.json()}catch(i){throw new fl(ol(i),i)}let n;const s=j6(e);if(s&&s.getTime()>=qC["2024-01-01"].timestamp&&typeof r=="object"&&r&&typeof r.code=="string"?n=r.code:typeof r=="object"&&r&&typeof r.error_code=="string"&&(n=r.error_code),n){if(n==="weak_password")throw new Hj(ol(r),e.status,((t=r.weak_password)===null||t===void 0?void 0:t.reasons)||[]);if(n==="session_not_found")throw new Co}else if(typeof r=="object"&&r&&typeof r.weak_password=="object"&&r.weak_password&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.reasons.reduce((i,l)=>i&&typeof l=="string",!0))throw new Hj(ol(r),e.status,r.weak_password.reasons);throw new r6(ol(r),e.status||500,n)}const E6=(e,t,r,n)=>{const s={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"?s:(s.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},t==null?void 0:t.headers),s.body=JSON.stringify(n),Object.assign(Object.assign({},s),r))};async function jt(e,t,r,n){var s;const i=Object.assign({},n==null?void 0:n.headers);i[Gv]||(i[Gv]=qC["2024-01-01"].name),n!=null&&n.jwt&&(i.Authorization=`Bearer ${n.jwt}`);const l=(s=n==null?void 0:n.query)!==null&&s!==void 0?s:{};n!=null&&n.redirectTo&&(l.redirect_to=n.redirectTo);const u=Object.keys(l).length?"?"+new URLSearchParams(l).toString():"",d=await A6(e,t,r+u,{headers:i,noResolveJson:n==null?void 0:n.noResolveJson},{},n==null?void 0:n.body);return n!=null&&n.xform?n==null?void 0:n.xform(d):{data:Object.assign({},d),error:null}}async function A6(e,t,r,n,s,i){const l=E6(t,n,s,i);let u;try{u=await e(r,Object.assign({},l))}catch(d){throw console.error(d),new Yv(ol(d),0)}if(u.ok||await Xj(u),n!=null&&n.noResolveJson)return u;try{return await u.json()}catch(d){await Xj(d)}}function Wi(e){var t;let r=null;T6(e)&&(r=Object.assign({},e),e.expires_at||(r.expires_at=d6(e.expires_in)));const n=(t=e.user)!==null&&t!==void 0?t:e;return{data:{session:r,user:n},error:null}}function Qj(e){const t=Wi(e);return!t.error&&e.weak_password&&typeof e.weak_password=="object"&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.message&&typeof e.weak_password.message=="string"&&e.weak_password.reasons.reduce((r,n)=>r&&typeof n=="string",!0)&&(t.data.weak_password=e.weak_password),t}function To(e){var t;return{data:{user:(t=e.user)!==null&&t!==void 0?t:e},error:null}}function P6(e){return{data:e,error:null}}function O6(e){const{action_link:t,email_otp:r,hashed_token:n,redirect_to:s,verification_type:i}=e,l=_6(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),u={action_link:t,email_otp:r,hashed_token:n,redirect_to:s,verification_type:i},d=Object.assign({},l);return{data:{properties:u,user:d},error:null}}function Zj(e){return e}function T6(e){return e.access_token&&e.refresh_token&&e.expires_in}const Jg=["global","local","others"];var I6=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(e);s<n.length;s++)t.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(e,n[s])&&(r[n[s]]=e[n[s]]);return r};class D6{constructor({url:t="",headers:r={},fetch:n}){this.url=t,this.headers=r,this.fetch=KC(n),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(t,r=Jg[0]){if(Jg.indexOf(r)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${Jg.join(", ")}`);try{return await jt(this.fetch,"POST",`${this.url}/logout?scope=${r}`,{headers:this.headers,jwt:t,noResolveJson:!0}),{data:null,error:null}}catch(n){if(ut(n))return{data:null,error:n};throw n}}async inviteUserByEmail(t,r={}){try{return await jt(this.fetch,"POST",`${this.url}/invite`,{body:{email:t,data:r.data},headers:this.headers,redirectTo:r.redirectTo,xform:To})}catch(n){if(ut(n))return{data:{user:null},error:n};throw n}}async generateLink(t){try{const{options:r}=t,n=I6(t,["options"]),s=Object.assign(Object.assign({},n),r);return"newEmail"in n&&(s.new_email=n==null?void 0:n.newEmail,delete s.newEmail),await jt(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:s,headers:this.headers,xform:O6,redirectTo:r==null?void 0:r.redirectTo})}catch(r){if(ut(r))return{data:{properties:null,user:null},error:r};throw r}}async createUser(t){try{return await jt(this.fetch,"POST",`${this.url}/admin/users`,{body:t,headers:this.headers,xform:To})}catch(r){if(ut(r))return{data:{user:null},error:r};throw r}}async listUsers(t){var r,n,s,i,l,u,d;try{const m={nextPage:null,lastPage:0,total:0},f=await jt(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(r=t==null?void 0:t.page)===null||r===void 0?void 0:r.toString())!==null&&n!==void 0?n:"",per_page:(i=(s=t==null?void 0:t.perPage)===null||s===void 0?void 0:s.toString())!==null&&i!==void 0?i:""},xform:Zj});if(f.error)throw f.error;const p=await f.json(),y=(l=f.headers.get("x-total-count"))!==null&&l!==void 0?l:0,x=(d=(u=f.headers.get("link"))===null||u===void 0?void 0:u.split(","))!==null&&d!==void 0?d:[];return x.length>0&&(x.forEach(j=>{const b=parseInt(j.split(";")[0].split("=")[1].substring(0,1)),k=JSON.parse(j.split(";")[1].split("=")[1]);m[`${k}Page`]=b}),m.total=parseInt(y)),{data:Object.assign(Object.assign({},p),m),error:null}}catch(m){if(ut(m))return{data:{users:[]},error:m};throw m}}async getUserById(t){fc(t);try{return await jt(this.fetch,"GET",`${this.url}/admin/users/${t}`,{headers:this.headers,xform:To})}catch(r){if(ut(r))return{data:{user:null},error:r};throw r}}async updateUserById(t,r){fc(t);try{return await jt(this.fetch,"PUT",`${this.url}/admin/users/${t}`,{body:r,headers:this.headers,xform:To})}catch(n){if(ut(n))return{data:{user:null},error:n};throw n}}async deleteUser(t,r=!1){fc(t);try{return await jt(this.fetch,"DELETE",`${this.url}/admin/users/${t}`,{headers:this.headers,body:{should_soft_delete:r},xform:To})}catch(n){if(ut(n))return{data:{user:null},error:n};throw n}}async _listFactors(t){fc(t.userId);try{const{data:r,error:n}=await jt(this.fetch,"GET",`${this.url}/admin/users/${t.userId}/factors`,{headers:this.headers,xform:s=>({data:{factors:s},error:null})});return{data:r,error:n}}catch(r){if(ut(r))return{data:null,error:r};throw r}}async _deleteFactor(t){fc(t.userId),fc(t.id);try{return{data:await jt(this.fetch,"DELETE",`${this.url}/admin/users/${t.userId}/factors/${t.id}`,{headers:this.headers}),error:null}}catch(r){if(ut(r))return{data:null,error:r};throw r}}async _listOAuthClients(t){var r,n,s,i,l,u,d;try{const m={nextPage:null,lastPage:0,total:0},f=await jt(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(r=t==null?void 0:t.page)===null||r===void 0?void 0:r.toString())!==null&&n!==void 0?n:"",per_page:(i=(s=t==null?void 0:t.perPage)===null||s===void 0?void 0:s.toString())!==null&&i!==void 0?i:""},xform:Zj});if(f.error)throw f.error;const p=await f.json(),y=(l=f.headers.get("x-total-count"))!==null&&l!==void 0?l:0,x=(d=(u=f.headers.get("link"))===null||u===void 0?void 0:u.split(","))!==null&&d!==void 0?d:[];return x.length>0&&(x.forEach(j=>{const b=parseInt(j.split(";")[0].split("=")[1].substring(0,1)),k=JSON.parse(j.split(";")[1].split("=")[1]);m[`${k}Page`]=b}),m.total=parseInt(y)),{data:Object.assign(Object.assign({},p),m),error:null}}catch(m){if(ut(m))return{data:{clients:[]},error:m};throw m}}async _createOAuthClient(t){try{return await jt(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:t,headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(ut(r))return{data:null,error:r};throw r}}async _getOAuthClient(t){try{return await jt(this.fetch,"GET",`${this.url}/admin/oauth/clients/${t}`,{headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(ut(r))return{data:null,error:r};throw r}}async _deleteOAuthClient(t){try{return await jt(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${t}`,{headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(ut(r))return{data:null,error:r};throw r}}async _regenerateOAuthClientSecret(t){try{return await jt(this.fetch,"POST",`${this.url}/admin/oauth/clients/${t}/regenerate_secret`,{headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(ut(r))return{data:null,error:r};throw r}}}function eS(e={}){return{getItem:t=>e[t]||null,setItem:(t,r)=>{e[t]=r},removeItem:t=>{delete e[t]}}}const hc={debug:!!(globalThis&&HC()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class GC extends Error{constructor(t){super(t),this.isAcquireTimeout=!0}}class R6 extends GC{}async function $6(e,t,r){hc.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",e,t);const n=new globalThis.AbortController;return t>0&&setTimeout(()=>{n.abort(),hc.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",e)},t),await Promise.resolve().then(()=>globalThis.navigator.locks.request(e,t===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:n.signal},async s=>{if(s){hc.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",e,s.name);try{return await r()}finally{hc.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",e,s.name)}}else{if(t===0)throw hc.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",e),new R6(`Acquiring an exclusive Navigator LockManager lock "${e}" immediately failed`);if(hc.debug)try{const i=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(i,null,"  "))}catch(i){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",i)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await r()}}))}function M6(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function YC(e){if(!/^0x[a-fA-F0-9]{40}$/.test(e))throw new Error(`@supabase/auth-js: Address "${e}" is invalid.`);return e.toLowerCase()}function F6(e){return parseInt(e,16)}function L6(e){const t=new TextEncoder().encode(e);return"0x"+Array.from(t,n=>n.toString(16).padStart(2,"0")).join("")}function z6(e){var t;const{chainId:r,domain:n,expirationTime:s,issuedAt:i=new Date,nonce:l,notBefore:u,requestId:d,resources:m,scheme:f,uri:p,version:y}=e;{if(!Number.isInteger(r))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${r}`);if(!n)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(l&&l.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${l}`);if(!p)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(y!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${y}`);if(!((t=e.statement)===null||t===void 0)&&t.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${e.statement}`)}const x=YC(e.address),j=f?`${f}://${n}`:n,b=e.statement?`${e.statement}
`:"",k=`${j} wants you to sign in with your Ethereum account:
${x}

${b}`;let _=`URI: ${p}
Version: ${y}
Chain ID: ${r}${l?`
Nonce: ${l}`:""}
Issued At: ${i.toISOString()}`;if(s&&(_+=`
Expiration Time: ${s.toISOString()}`),u&&(_+=`
Not Before: ${u.toISOString()}`),d&&(_+=`
Request ID: ${d}`),m){let E=`
Resources:`;for(const C of m){if(!C||typeof C!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${C}`);E+=`
- ${C}`}_+=E}return`${k}
${_}`}class dn extends Error{constructor({message:t,code:r,cause:n,name:s}){var i;super(t,{cause:n}),this.__isWebAuthnError=!0,this.name=(i=s??(n instanceof Error?n.name:void 0))!==null&&i!==void 0?i:"Unknown Error",this.code=r}}class Sh extends dn{constructor(t,r){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:r,message:t}),this.name="WebAuthnUnknownError",this.originalError=r}}function U6({error:e,options:t}){var r,n,s;const{publicKey:i}=t;if(!i)throw Error("options was missing required publicKey property");if(e.name==="AbortError"){if(t.signal instanceof AbortSignal)return new dn({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:e})}else if(e.name==="ConstraintError"){if(((r=i.authenticatorSelection)===null||r===void 0?void 0:r.requireResidentKey)===!0)return new dn({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:e});if(t.mediation==="conditional"&&((n=i.authenticatorSelection)===null||n===void 0?void 0:n.userVerification)==="required")return new dn({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:e});if(((s=i.authenticatorSelection)===null||s===void 0?void 0:s.userVerification)==="required")return new dn({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:e})}else{if(e.name==="InvalidStateError")return new dn({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:e});if(e.name==="NotAllowedError")return new dn({message:e.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e});if(e.name==="NotSupportedError")return i.pubKeyCredParams.filter(u=>u.type==="public-key").length===0?new dn({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:e}):new dn({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:e});if(e.name==="SecurityError"){const l=window.location.hostname;if(XC(l)){if(i.rp.id!==l)return new dn({message:`The RP ID "${i.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:e})}else return new dn({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:e})}else if(e.name==="TypeError"){if(i.user.id.byteLength<1||i.user.id.byteLength>64)return new dn({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:e})}else if(e.name==="UnknownError")return new dn({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:e})}return new dn({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e})}function B6({error:e,options:t}){const{publicKey:r}=t;if(!r)throw Error("options was missing required publicKey property");if(e.name==="AbortError"){if(t.signal instanceof AbortSignal)return new dn({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:e})}else{if(e.name==="NotAllowedError")return new dn({message:e.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e});if(e.name==="SecurityError"){const n=window.location.hostname;if(XC(n)){if(r.rpId!==n)return new dn({message:`The RP ID "${r.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:e})}else return new dn({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:e})}else if(e.name==="UnknownError")return new dn({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:e})}return new dn({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e})}var JC=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(e);s<n.length;s++)t.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(e,n[s])&&(r[n[s]]=e[n[s]]);return r};class W6{createNewAbortSignal(){if(this.controller){const r=new Error("Cancelling existing WebAuthn API call for new one");r.name="AbortError",this.controller.abort(r)}const t=new AbortController;return this.controller=t,t.signal}cancelCeremony(){if(this.controller){const t=new Error("Manually cancelling existing WebAuthn API call");t.name="AbortError",this.controller.abort(t),this.controller=void 0}}}const q6=new W6;function V6(e){if(!e)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(e);const{challenge:t,user:r,excludeCredentials:n}=e,s=JC(e,["challenge","user","excludeCredentials"]),i=Ec(t).buffer,l=Object.assign(Object.assign({},r),{id:Ec(r.id).buffer}),u=Object.assign(Object.assign({},s),{challenge:i,user:l});if(n&&n.length>0){u.excludeCredentials=new Array(n.length);for(let d=0;d<n.length;d++){const m=n[d];u.excludeCredentials[d]=Object.assign(Object.assign({},m),{id:Ec(m.id).buffer,type:m.type||"public-key",transports:m.transports})}}return u}function H6(e){if(!e)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(e);const{challenge:t,allowCredentials:r}=e,n=JC(e,["challenge","allowCredentials"]),s=Ec(t).buffer,i=Object.assign(Object.assign({},n),{challenge:s});if(r&&r.length>0){i.allowCredentials=new Array(r.length);for(let l=0;l<r.length;l++){const u=r[l];i.allowCredentials[l]=Object.assign(Object.assign({},u),{id:Ec(u.id).buffer,type:u.type||"public-key",transports:u.transports})}}return i}function K6(e){var t;if("toJSON"in e&&typeof e.toJSON=="function")return e.toJSON();const r=e;return{id:e.id,rawId:e.id,response:{attestationObject:hl(new Uint8Array(e.response.attestationObject)),clientDataJSON:hl(new Uint8Array(e.response.clientDataJSON))},type:"public-key",clientExtensionResults:e.getClientExtensionResults(),authenticatorAttachment:(t=r.authenticatorAttachment)!==null&&t!==void 0?t:void 0}}function G6(e){var t;if("toJSON"in e&&typeof e.toJSON=="function")return e.toJSON();const r=e,n=e.getClientExtensionResults(),s=e.response;return{id:e.id,rawId:e.id,response:{authenticatorData:hl(new Uint8Array(s.authenticatorData)),clientDataJSON:hl(new Uint8Array(s.clientDataJSON)),signature:hl(new Uint8Array(s.signature)),userHandle:s.userHandle?hl(new Uint8Array(s.userHandle)):void 0},type:"public-key",clientExtensionResults:n,authenticatorAttachment:(t=r.authenticatorAttachment)!==null&&t!==void 0?t:void 0}}function XC(e){return e==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(e)}function tS(){var e,t;return!!(Ys()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((e=navigator==null?void 0:navigator.credentials)===null||e===void 0?void 0:e.create)=="function"&&typeof((t=navigator==null?void 0:navigator.credentials)===null||t===void 0?void 0:t.get)=="function")}async function Y6(e){try{const t=await navigator.credentials.create(e);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new Sh("Browser returned unexpected credential type",t)}:{data:null,error:new Sh("Empty credential response",t)}}catch(t){return{data:null,error:U6({error:t,options:e})}}}async function J6(e){try{const t=await navigator.credentials.get(e);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new Sh("Browser returned unexpected credential type",t)}:{data:null,error:new Sh("Empty credential response",t)}}catch(t){return{data:null,error:B6({error:t,options:e})}}}const X6={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"none"},Q6={userVerification:"preferred",hints:["security-key"]};function kh(...e){const t=s=>s!==null&&typeof s=="object"&&!Array.isArray(s),r=s=>s instanceof ArrayBuffer||ArrayBuffer.isView(s),n={};for(const s of e)if(s)for(const i in s){const l=s[i];if(l!==void 0)if(Array.isArray(l))n[i]=l;else if(r(l))n[i]=l;else if(t(l)){const u=n[i];t(u)?n[i]=kh(u,l):n[i]=kh(l)}else n[i]=l}return n}function Z6(e,t){return kh(X6,e,t||{})}function eR(e,t){return kh(Q6,e,t||{})}class tR{constructor(t){this.client=t,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(t){return this.client.mfa.enroll(Object.assign(Object.assign({},t),{factorType:"webauthn"}))}async _challenge({factorId:t,webauthn:r,friendlyName:n,signal:s},i){try{const{data:l,error:u}=await this.client.mfa.challenge({factorId:t,webauthn:r});if(!l)return{data:null,error:u};const d=s??q6.createNewAbortSignal();if(l.webauthn.type==="create"){const{user:m}=l.webauthn.credential_options.publicKey;m.name||(m.name=`${m.id}:${n}`),m.displayName||(m.displayName=m.name)}switch(l.webauthn.type){case"create":{const m=Z6(l.webauthn.credential_options.publicKey,i==null?void 0:i.create),{data:f,error:p}=await Y6({publicKey:m,signal:d});return f?{data:{factorId:t,challengeId:l.id,webauthn:{type:l.webauthn.type,credential_response:f}},error:null}:{data:null,error:p}}case"request":{const m=eR(l.webauthn.credential_options.publicKey,i==null?void 0:i.request),{data:f,error:p}=await J6(Object.assign(Object.assign({},l.webauthn.credential_options),{publicKey:m,signal:d}));return f?{data:{factorId:t,challengeId:l.id,webauthn:{type:l.webauthn.type,credential_response:f}},error:null}:{data:null,error:p}}}}catch(l){return ut(l)?{data:null,error:l}:{data:null,error:new fl("Unexpected error in challenge",l)}}}async _verify({challengeId:t,factorId:r,webauthn:n}){return this.client.mfa.verify({factorId:r,challengeId:t,webauthn:n})}async _authenticate({factorId:t,webauthn:{rpId:r=typeof window<"u"?window.location.hostname:void 0,rpOrigins:n=typeof window<"u"?[window.location.origin]:void 0,signal:s}},i){if(!r)return{data:null,error:new ad("rpId is required for WebAuthn authentication")};try{if(!tS())return{data:null,error:new fl("Browser does not support WebAuthn",null)};const{data:l,error:u}=await this.challenge({factorId:t,webauthn:{rpId:r,rpOrigins:n},signal:s},{request:i});if(!l)return{data:null,error:u};const{webauthn:d}=l;return this._verify({factorId:t,challengeId:l.challengeId,webauthn:{type:d.type,rpId:r,rpOrigins:n,credential_response:d.credential_response}})}catch(l){return ut(l)?{data:null,error:l}:{data:null,error:new fl("Unexpected error in authenticate",l)}}}async _register({friendlyName:t,rpId:r=typeof window<"u"?window.location.hostname:void 0,rpOrigins:n=typeof window<"u"?[window.location.origin]:void 0,signal:s},i){if(!r)return{data:null,error:new ad("rpId is required for WebAuthn registration")};try{if(!tS())return{data:null,error:new fl("Browser does not support WebAuthn",null)};const{data:l,error:u}=await this._enroll({friendlyName:t});if(!l)return await this.client.mfa.listFactors().then(f=>{var p;return(p=f.data)===null||p===void 0?void 0:p.all.find(y=>y.factor_type==="webauthn"&&y.friendly_name===t&&y.status!=="unverified")}).then(f=>f?this.client.mfa.unenroll({factorId:f==null?void 0:f.id}):void 0),{data:null,error:u};const{data:d,error:m}=await this._challenge({factorId:l.id,friendlyName:l.friendly_name,webauthn:{rpId:r,rpOrigins:n},signal:s},{create:i});return d?this._verify({factorId:l.id,challengeId:d.challengeId,webauthn:{rpId:r,rpOrigins:n,type:d.webauthn.type,credential_response:d.webauthn.credential_response}}):{data:null,error:m}}catch(l){return ut(l)?{data:null,error:l}:{data:null,error:new fl("Unexpected error in register",l)}}}}M6();const rR={url:X3,storageKey:Q3,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:Z3,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function rS(e,t,r){return await r()}const mc={};class od{get jwks(){var t,r;return(r=(t=mc[this.storageKey])===null||t===void 0?void 0:t.jwks)!==null&&r!==void 0?r:{keys:[]}}set jwks(t){mc[this.storageKey]=Object.assign(Object.assign({},mc[this.storageKey]),{jwks:t})}get jwks_cached_at(){var t,r;return(r=(t=mc[this.storageKey])===null||t===void 0?void 0:t.cachedAt)!==null&&r!==void 0?r:Number.MIN_SAFE_INTEGER}set jwks_cached_at(t){mc[this.storageKey]=Object.assign(Object.assign({},mc[this.storageKey]),{cachedAt:t})}constructor(t){var r,n;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=od.nextInstanceID,od.nextInstanceID+=1,this.instanceID>0&&Ys()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const s=Object.assign(Object.assign({},rR),t);if(this.logDebugMessages=!!s.debug,typeof s.debug=="function"&&(this.logger=s.debug),this.persistSession=s.persistSession,this.storageKey=s.storageKey,this.autoRefreshToken=s.autoRefreshToken,this.admin=new D6({url:s.url,headers:s.headers,fetch:s.fetch}),this.url=s.url,this.headers=s.headers,this.fetch=KC(s.fetch),this.lock=s.lock||rS,this.detectSessionInUrl=s.detectSessionInUrl,this.flowType=s.flowType,this.hasCustomAuthorizationHeader=s.hasCustomAuthorizationHeader,s.lock?this.lock=s.lock:Ys()&&(!((r=globalThis==null?void 0:globalThis.navigator)===null||r===void 0)&&r.locks)?this.lock=$6:this.lock=rS,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new tR(this)},this.persistSession?(s.storage?this.storage=s.storage:HC()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=eS(this.memoryStorage)),s.userStorage&&(this.userStorage=s.userStorage)):(this.memoryStorage={},this.storage=eS(this.memoryStorage)),Ys()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(i){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",i)}(n=this.broadcastChannel)===null||n===void 0||n.addEventListener("message",async i=>{this._debug("received broadcast notification from other tab or client",i),await this._notifyAllSubscribers(i.data.event,i.data.session,!1)})}this.initialize()}_debug(...t){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${WC}) ${new Date().toISOString()}`,...t),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var t;try{const r=h6(window.location.href);let n="none";if(this._isImplicitGrantCallback(r)?n="implicit":await this._isPKCECallback(r)&&(n="pkce"),Ys()&&this.detectSessionInUrl&&n!=="none"){const{data:s,error:i}=await this._getSessionFromURL(r,n);if(i){if(this._debug("#_initialize()","error detecting session from URL",i),i6(i)){const d=(t=i.details)===null||t===void 0?void 0:t.code;if(d==="identity_already_exists"||d==="identity_not_found"||d==="single_identity_not_deletable")return{error:i}}return await this._removeSession(),{error:i}}const{session:l,redirectType:u}=s;return this._debug("#_initialize()","detected session in URL",l,"redirect type",u),await this._saveSession(l),setTimeout(async()=>{u==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",l):await this._notifyAllSubscribers("SIGNED_IN",l)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(r){return ut(r)?{error:r}:{error:new fl("Unexpected error during initialization",r)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(t){var r,n,s;try{const i=await jt(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(n=(r=t==null?void 0:t.options)===null||r===void 0?void 0:r.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:(s=t==null?void 0:t.options)===null||s===void 0?void 0:s.captchaToken}},xform:Wi}),{data:l,error:u}=i;if(u||!l)return{data:{user:null,session:null},error:u};const d=l.session,m=l.user;return l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",d)),{data:{user:m,session:d},error:null}}catch(i){if(ut(i))return{data:{user:null,session:null},error:i};throw i}}async signUp(t){var r,n,s;try{let i;if("email"in t){const{email:f,password:p,options:y}=t;let x=null,j=null;this.flowType==="pkce"&&([x,j]=await dc(this.storage,this.storageKey)),i=await jt(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:y==null?void 0:y.emailRedirectTo,body:{email:f,password:p,data:(r=y==null?void 0:y.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:y==null?void 0:y.captchaToken},code_challenge:x,code_challenge_method:j},xform:Wi})}else if("phone"in t){const{phone:f,password:p,options:y}=t;i=await jt(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:f,password:p,data:(n=y==null?void 0:y.data)!==null&&n!==void 0?n:{},channel:(s=y==null?void 0:y.channel)!==null&&s!==void 0?s:"sms",gotrue_meta_security:{captcha_token:y==null?void 0:y.captchaToken}},xform:Wi})}else throw new Bf("You must provide either an email or phone number and a password");const{data:l,error:u}=i;if(u||!l)return{data:{user:null,session:null},error:u};const d=l.session,m=l.user;return l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",d)),{data:{user:m,session:d},error:null}}catch(i){if(ut(i))return{data:{user:null,session:null},error:i};throw i}}async signInWithPassword(t){try{let r;if("email"in t){const{email:i,password:l,options:u}=t;r=await jt(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:i,password:l,gotrue_meta_security:{captcha_token:u==null?void 0:u.captchaToken}},xform:Qj})}else if("phone"in t){const{phone:i,password:l,options:u}=t;r=await jt(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:i,password:l,gotrue_meta_security:{captcha_token:u==null?void 0:u.captchaToken}},xform:Qj})}else throw new Bf("You must provide either an email or phone number and a password");const{data:n,error:s}=r;return s?{data:{user:null,session:null},error:s}:!n||!n.session||!n.user?{data:{user:null,session:null},error:new uc}:(n.session&&(await this._saveSession(n.session),await this._notifyAllSubscribers("SIGNED_IN",n.session)),{data:Object.assign({user:n.user,session:n.session},n.weak_password?{weakPassword:n.weak_password}:null),error:s})}catch(r){if(ut(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithOAuth(t){var r,n,s,i;return await this._handleProviderSignIn(t.provider,{redirectTo:(r=t.options)===null||r===void 0?void 0:r.redirectTo,scopes:(n=t.options)===null||n===void 0?void 0:n.scopes,queryParams:(s=t.options)===null||s===void 0?void 0:s.queryParams,skipBrowserRedirect:(i=t.options)===null||i===void 0?void 0:i.skipBrowserRedirect})}async exchangeCodeForSession(t){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(t))}async signInWithWeb3(t){const{chain:r}=t;switch(r){case"ethereum":return await this.signInWithEthereum(t);case"solana":return await this.signInWithSolana(t);default:throw new Error(`@supabase/auth-js: Unsupported chain "${r}"`)}}async signInWithEthereum(t){var r,n,s,i,l,u,d,m,f,p,y;let x,j;if("message"in t)x=t.message,j=t.signature;else{const{chain:b,wallet:k,statement:_,options:E}=t;let C;if(Ys())if(typeof k=="object")C=k;else{const H=window;if("ethereum"in H&&typeof H.ethereum=="object"&&"request"in H.ethereum&&typeof H.ethereum.request=="function")C=H.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof k!="object"||!(E!=null&&E.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");C=k}const O=new URL((r=E==null?void 0:E.url)!==null&&r!==void 0?r:window.location.href),T=await C.request({method:"eth_requestAccounts"}).then(H=>H).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!T||T.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const A=YC(T[0]);let L=(n=E==null?void 0:E.signInWithEthereum)===null||n===void 0?void 0:n.chainId;if(!L){const H=await C.request({method:"eth_chainId"});L=F6(H)}const J={domain:O.host,address:A,statement:_,uri:O.href,version:"1",chainId:L,nonce:(s=E==null?void 0:E.signInWithEthereum)===null||s===void 0?void 0:s.nonce,issuedAt:(l=(i=E==null?void 0:E.signInWithEthereum)===null||i===void 0?void 0:i.issuedAt)!==null&&l!==void 0?l:new Date,expirationTime:(u=E==null?void 0:E.signInWithEthereum)===null||u===void 0?void 0:u.expirationTime,notBefore:(d=E==null?void 0:E.signInWithEthereum)===null||d===void 0?void 0:d.notBefore,requestId:(m=E==null?void 0:E.signInWithEthereum)===null||m===void 0?void 0:m.requestId,resources:(f=E==null?void 0:E.signInWithEthereum)===null||f===void 0?void 0:f.resources};x=z6(J),j=await C.request({method:"personal_sign",params:[L6(x),A]})}try{const{data:b,error:k}=await jt(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:x,signature:j},!((p=t.options)===null||p===void 0)&&p.captchaToken?{gotrue_meta_security:{captcha_token:(y=t.options)===null||y===void 0?void 0:y.captchaToken}}:null),xform:Wi});if(k)throw k;return!b||!b.session||!b.user?{data:{user:null,session:null},error:new uc}:(b.session&&(await this._saveSession(b.session),await this._notifyAllSubscribers("SIGNED_IN",b.session)),{data:Object.assign({},b),error:k})}catch(b){if(ut(b))return{data:{user:null,session:null},error:b};throw b}}async signInWithSolana(t){var r,n,s,i,l,u,d,m,f,p,y,x;let j,b;if("message"in t)j=t.message,b=t.signature;else{const{chain:k,wallet:_,statement:E,options:C}=t;let O;if(Ys())if(typeof _=="object")O=_;else{const A=window;if("solana"in A&&typeof A.solana=="object"&&("signIn"in A.solana&&typeof A.solana.signIn=="function"||"signMessage"in A.solana&&typeof A.solana.signMessage=="function"))O=A.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof _!="object"||!(C!=null&&C.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");O=_}const T=new URL((r=C==null?void 0:C.url)!==null&&r!==void 0?r:window.location.href);if("signIn"in O&&O.signIn){const A=await O.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},C==null?void 0:C.signInWithSolana),{version:"1",domain:T.host,uri:T.href}),E?{statement:E}:null));let L;if(Array.isArray(A)&&A[0]&&typeof A[0]=="object")L=A[0];else if(A&&typeof A=="object"&&"signedMessage"in A&&"signature"in A)L=A;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in L&&"signature"in L&&(typeof L.signedMessage=="string"||L.signedMessage instanceof Uint8Array)&&L.signature instanceof Uint8Array)j=typeof L.signedMessage=="string"?L.signedMessage:new TextDecoder().decode(L.signedMessage),b=L.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in O)||typeof O.signMessage!="function"||!("publicKey"in O)||typeof O!="object"||!O.publicKey||!("toBase58"in O.publicKey)||typeof O.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");j=[`${T.host} wants you to sign in with your Solana account:`,O.publicKey.toBase58(),...E?["",E,""]:[""],"Version: 1",`URI: ${T.href}`,`Issued At: ${(s=(n=C==null?void 0:C.signInWithSolana)===null||n===void 0?void 0:n.issuedAt)!==null&&s!==void 0?s:new Date().toISOString()}`,...!((i=C==null?void 0:C.signInWithSolana)===null||i===void 0)&&i.notBefore?[`Not Before: ${C.signInWithSolana.notBefore}`]:[],...!((l=C==null?void 0:C.signInWithSolana)===null||l===void 0)&&l.expirationTime?[`Expiration Time: ${C.signInWithSolana.expirationTime}`]:[],...!((u=C==null?void 0:C.signInWithSolana)===null||u===void 0)&&u.chainId?[`Chain ID: ${C.signInWithSolana.chainId}`]:[],...!((d=C==null?void 0:C.signInWithSolana)===null||d===void 0)&&d.nonce?[`Nonce: ${C.signInWithSolana.nonce}`]:[],...!((m=C==null?void 0:C.signInWithSolana)===null||m===void 0)&&m.requestId?[`Request ID: ${C.signInWithSolana.requestId}`]:[],...!((p=(f=C==null?void 0:C.signInWithSolana)===null||f===void 0?void 0:f.resources)===null||p===void 0)&&p.length?["Resources",...C.signInWithSolana.resources.map(L=>`- ${L}`)]:[]].join(`
`);const A=await O.signMessage(new TextEncoder().encode(j),"utf8");if(!A||!(A instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");b=A}}try{const{data:k,error:_}=await jt(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:j,signature:hl(b)},!((y=t.options)===null||y===void 0)&&y.captchaToken?{gotrue_meta_security:{captcha_token:(x=t.options)===null||x===void 0?void 0:x.captchaToken}}:null),xform:Wi});if(_)throw _;return!k||!k.session||!k.user?{data:{user:null,session:null},error:new uc}:(k.session&&(await this._saveSession(k.session),await this._notifyAllSubscribers("SIGNED_IN",k.session)),{data:Object.assign({},k),error:_})}catch(k){if(ut(k))return{data:{user:null,session:null},error:k};throw k}}async _exchangeCodeForSession(t){const r=await il(this.storage,`${this.storageKey}-code-verifier`),[n,s]=(r??"").split("/");try{const{data:i,error:l}=await jt(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:t,code_verifier:n},xform:Wi});if(await _o(this.storage,`${this.storageKey}-code-verifier`),l)throw l;return!i||!i.session||!i.user?{data:{user:null,session:null,redirectType:null},error:new uc}:(i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),{data:Object.assign(Object.assign({},i),{redirectType:s??null}),error:l})}catch(i){if(ut(i))return{data:{user:null,session:null,redirectType:null},error:i};throw i}}async signInWithIdToken(t){try{const{options:r,provider:n,token:s,access_token:i,nonce:l}=t,u=await jt(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:n,id_token:s,access_token:i,nonce:l,gotrue_meta_security:{captcha_token:r==null?void 0:r.captchaToken}},xform:Wi}),{data:d,error:m}=u;return m?{data:{user:null,session:null},error:m}:!d||!d.session||!d.user?{data:{user:null,session:null},error:new uc}:(d.session&&(await this._saveSession(d.session),await this._notifyAllSubscribers("SIGNED_IN",d.session)),{data:d,error:m})}catch(r){if(ut(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithOtp(t){var r,n,s,i,l;try{if("email"in t){const{email:u,options:d}=t;let m=null,f=null;this.flowType==="pkce"&&([m,f]=await dc(this.storage,this.storageKey));const{error:p}=await jt(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:u,data:(r=d==null?void 0:d.data)!==null&&r!==void 0?r:{},create_user:(n=d==null?void 0:d.shouldCreateUser)!==null&&n!==void 0?n:!0,gotrue_meta_security:{captcha_token:d==null?void 0:d.captchaToken},code_challenge:m,code_challenge_method:f},redirectTo:d==null?void 0:d.emailRedirectTo});return{data:{user:null,session:null},error:p}}if("phone"in t){const{phone:u,options:d}=t,{data:m,error:f}=await jt(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:u,data:(s=d==null?void 0:d.data)!==null&&s!==void 0?s:{},create_user:(i=d==null?void 0:d.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:d==null?void 0:d.captchaToken},channel:(l=d==null?void 0:d.channel)!==null&&l!==void 0?l:"sms"}});return{data:{user:null,session:null,messageId:m==null?void 0:m.message_id},error:f}}throw new Bf("You must provide either an email or phone number.")}catch(u){if(ut(u))return{data:{user:null,session:null},error:u};throw u}}async verifyOtp(t){var r,n;try{let s,i;"options"in t&&(s=(r=t.options)===null||r===void 0?void 0:r.redirectTo,i=(n=t.options)===null||n===void 0?void 0:n.captchaToken);const{data:l,error:u}=await jt(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},t),{gotrue_meta_security:{captcha_token:i}}),redirectTo:s,xform:Wi});if(u)throw u;if(!l)throw new Error("An error occurred on token verification.");const d=l.session,m=l.user;return d!=null&&d.access_token&&(await this._saveSession(d),await this._notifyAllSubscribers(t.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",d)),{data:{user:m,session:d},error:null}}catch(s){if(ut(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithSSO(t){var r,n,s;try{let i=null,l=null;return this.flowType==="pkce"&&([i,l]=await dc(this.storage,this.storageKey)),await jt(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in t?{provider_id:t.providerId}:null),"domain"in t?{domain:t.domain}:null),{redirect_to:(n=(r=t.options)===null||r===void 0?void 0:r.redirectTo)!==null&&n!==void 0?n:void 0}),!((s=t==null?void 0:t.options)===null||s===void 0)&&s.captchaToken?{gotrue_meta_security:{captcha_token:t.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:i,code_challenge_method:l}),headers:this.headers,xform:P6})}catch(i){if(ut(i))return{data:null,error:i};throw i}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async t=>{const{data:{session:r},error:n}=t;if(n)throw n;if(!r)throw new Co;const{error:s}=await jt(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:r.access_token});return{data:{user:null,session:null},error:s}})}catch(t){if(ut(t))return{data:{user:null,session:null},error:t};throw t}}async resend(t){try{const r=`${this.url}/resend`;if("email"in t){const{email:n,type:s,options:i}=t,{error:l}=await jt(this.fetch,"POST",r,{headers:this.headers,body:{email:n,type:s,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}},redirectTo:i==null?void 0:i.emailRedirectTo});return{data:{user:null,session:null},error:l}}else if("phone"in t){const{phone:n,type:s,options:i}=t,{data:l,error:u}=await jt(this.fetch,"POST",r,{headers:this.headers,body:{phone:n,type:s,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}}});return{data:{user:null,session:null,messageId:l==null?void 0:l.message_id},error:u}}throw new Bf("You must provide either an email or phone number and a type")}catch(r){if(ut(r))return{data:{user:null,session:null},error:r};throw r}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async r=>r))}async _acquireLock(t,r){this._debug("#_acquireLock","begin",t);try{if(this.lockAcquired){const n=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),s=(async()=>(await n,await r()))();return this.pendingInLock.push((async()=>{try{await s}catch{}})()),s}return await this.lock(`lock:${this.storageKey}`,t,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const n=r();for(this.pendingInLock.push((async()=>{try{await n}catch{}})()),await n;this.pendingInLock.length;){const s=[...this.pendingInLock];await Promise.all(s),this.pendingInLock.splice(0,s.length)}return await n}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(t){this._debug("#_useSession","begin");try{const r=await this.__loadSession();return await t(r)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let t=null;const r=await il(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",r),r!==null&&(this._isValidSession(r)?t=r:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!t)return{data:{session:null},error:null};const n=t.expires_at?t.expires_at*1e3-Date.now()<Hg:!1;if(this._debug("#__loadSession()",`session has${n?"":" not"} expired`,"expires_at",t.expires_at),!n){if(this.userStorage){const l=await il(this.userStorage,this.storageKey+"-user");l!=null&&l.user?t.user=l.user:t.user=Yg()}if(this.storage.isServer&&t.user){let l=this.suppressGetSessionWarning;t=new Proxy(t,{get:(d,m,f)=>(!l&&m==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),l=!0,this.suppressGetSessionWarning=!0),Reflect.get(d,m,f))})}return{data:{session:t},error:null}}const{data:s,error:i}=await this._callRefreshToken(t.refresh_token);return i?{data:{session:null},error:i}:{data:{session:s},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(t){return t?await this._getUser(t):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(t){try{return t?await jt(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:t,xform:To}):await this._useSession(async r=>{var n,s,i;const{data:l,error:u}=r;if(u)throw u;return!(!((n=l.session)===null||n===void 0)&&n.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Co}:await jt(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(i=(s=l.session)===null||s===void 0?void 0:s.access_token)!==null&&i!==void 0?i:void 0,xform:To})})}catch(r){if(ut(r))return s6(r)&&(await this._removeSession(),await _o(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:r};throw r}}async updateUser(t,r={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(t,r))}async _updateUser(t,r={}){try{return await this._useSession(async n=>{const{data:s,error:i}=n;if(i)throw i;if(!s.session)throw new Co;const l=s.session;let u=null,d=null;this.flowType==="pkce"&&t.email!=null&&([u,d]=await dc(this.storage,this.storageKey));const{data:m,error:f}=await jt(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:r==null?void 0:r.emailRedirectTo,body:Object.assign(Object.assign({},t),{code_challenge:u,code_challenge_method:d}),jwt:l.access_token,xform:To});if(f)throw f;return l.user=m.user,await this._saveSession(l),await this._notifyAllSubscribers("USER_UPDATED",l),{data:{user:l.user},error:null}})}catch(n){if(ut(n))return{data:{user:null},error:n};throw n}}async setSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(t))}async _setSession(t){try{if(!t.access_token||!t.refresh_token)throw new Co;const r=Date.now()/1e3;let n=r,s=!0,i=null;const{payload:l}=Gg(t.access_token);if(l.exp&&(n=l.exp,s=n<=r),s){const{data:u,error:d}=await this._callRefreshToken(t.refresh_token);if(d)return{data:{user:null,session:null},error:d};if(!u)return{data:{user:null,session:null},error:null};i=u}else{const{data:u,error:d}=await this._getUser(t.access_token);if(d)throw d;i={access_token:t.access_token,refresh_token:t.refresh_token,user:u.user,token_type:"bearer",expires_in:n-r,expires_at:n},await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)}return{data:{user:i.user,session:i},error:null}}catch(r){if(ut(r))return{data:{session:null,user:null},error:r};throw r}}async refreshSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(t))}async _refreshSession(t){try{return await this._useSession(async r=>{var n;if(!t){const{data:l,error:u}=r;if(u)throw u;t=(n=l.session)!==null&&n!==void 0?n:void 0}if(!(t!=null&&t.refresh_token))throw new Co;const{data:s,error:i}=await this._callRefreshToken(t.refresh_token);return i?{data:{user:null,session:null},error:i}:s?{data:{user:s.user,session:s},error:null}:{data:{user:null,session:null},error:null}})}catch(r){if(ut(r))return{data:{user:null,session:null},error:r};throw r}}async _getSessionFromURL(t,r){try{if(!Ys())throw new Wf("No browser detected.");if(t.error||t.error_description||t.error_code)throw new Wf(t.error_description||"Error in URL with unspecified error_description",{error:t.error||"unspecified_error",code:t.error_code||"unspecified_code"});switch(r){case"implicit":if(this.flowType==="pkce")throw new Vj("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Wf("Not a valid implicit grant flow url.");break;default:}if(r==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!t.code)throw new Vj("No code detected.");const{data:E,error:C}=await this._exchangeCodeForSession(t.code);if(C)throw C;const O=new URL(window.location.href);return O.searchParams.delete("code"),window.history.replaceState(window.history.state,"",O.toString()),{data:{session:E.session,redirectType:null},error:null}}const{provider_token:n,provider_refresh_token:s,access_token:i,refresh_token:l,expires_in:u,expires_at:d,token_type:m}=t;if(!i||!u||!l||!m)throw new Wf("No session defined in URL");const f=Math.round(Date.now()/1e3),p=parseInt(u);let y=f+p;d&&(y=parseInt(d));const x=y-f;x*1e3<=bc&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${x}s, should have been closer to ${p}s`);const j=y-p;f-j>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",j,y,f):f-j<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",j,y,f);const{data:b,error:k}=await this._getUser(i);if(k)throw k;const _={provider_token:n,provider_refresh_token:s,access_token:i,expires_in:p,expires_at:y,refresh_token:l,token_type:m,user:b.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:_,redirectType:t.type},error:null}}catch(n){if(ut(n))return{data:{session:null,redirectType:null},error:n};throw n}}_isImplicitGrantCallback(t){return!!(t.access_token||t.error_description)}async _isPKCECallback(t){const r=await il(this.storage,`${this.storageKey}-code-verifier`);return!!(t.code&&r)}async signOut(t={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(t))}async _signOut({scope:t}={scope:"global"}){return await this._useSession(async r=>{var n;const{data:s,error:i}=r;if(i)return{error:i};const l=(n=s.session)===null||n===void 0?void 0:n.access_token;if(l){const{error:u}=await this.admin.signOut(l,t);if(u&&!(n6(u)&&(u.status===404||u.status===401||u.status===403)))return{error:u}}return t!=="others"&&(await this._removeSession(),await _o(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(t){const r=f6(),n={id:r,callback:t,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",r),this.stateChangeEmitters.delete(r)}};return this._debug("#onAuthStateChange()","registered callback with id",r),this.stateChangeEmitters.set(r,n),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(r)})))(),{data:{subscription:n}}}async _emitInitialSession(t){return await this._useSession(async r=>{var n,s;try{const{data:{session:i},error:l}=r;if(l)throw l;await((n=this.stateChangeEmitters.get(t))===null||n===void 0?void 0:n.callback("INITIAL_SESSION",i)),this._debug("INITIAL_SESSION","callback id",t,"session",i)}catch(i){await((s=this.stateChangeEmitters.get(t))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",t,"error",i),console.error(i)}})}async resetPasswordForEmail(t,r={}){let n=null,s=null;this.flowType==="pkce"&&([n,s]=await dc(this.storage,this.storageKey,!0));try{return await jt(this.fetch,"POST",`${this.url}/recover`,{body:{email:t,code_challenge:n,code_challenge_method:s,gotrue_meta_security:{captcha_token:r.captchaToken}},headers:this.headers,redirectTo:r.redirectTo})}catch(i){if(ut(i))return{data:null,error:i};throw i}}async getUserIdentities(){var t;try{const{data:r,error:n}=await this.getUser();if(n)throw n;return{data:{identities:(t=r.user.identities)!==null&&t!==void 0?t:[]},error:null}}catch(r){if(ut(r))return{data:null,error:r};throw r}}async linkIdentity(t){return"token"in t?this.linkIdentityIdToken(t):this.linkIdentityOAuth(t)}async linkIdentityOAuth(t){var r;try{const{data:n,error:s}=await this._useSession(async i=>{var l,u,d,m,f;const{data:p,error:y}=i;if(y)throw y;const x=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,t.provider,{redirectTo:(l=t.options)===null||l===void 0?void 0:l.redirectTo,scopes:(u=t.options)===null||u===void 0?void 0:u.scopes,queryParams:(d=t.options)===null||d===void 0?void 0:d.queryParams,skipBrowserRedirect:!0});return await jt(this.fetch,"GET",x,{headers:this.headers,jwt:(f=(m=p.session)===null||m===void 0?void 0:m.access_token)!==null&&f!==void 0?f:void 0})});if(s)throw s;return Ys()&&!(!((r=t.options)===null||r===void 0)&&r.skipBrowserRedirect)&&window.location.assign(n==null?void 0:n.url),{data:{provider:t.provider,url:n==null?void 0:n.url},error:null}}catch(n){if(ut(n))return{data:{provider:t.provider,url:null},error:n};throw n}}async linkIdentityIdToken(t){return await this._useSession(async r=>{var n;try{const{error:s,data:{session:i}}=r;if(s)throw s;const{options:l,provider:u,token:d,access_token:m,nonce:f}=t,p=await jt(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(n=i==null?void 0:i.access_token)!==null&&n!==void 0?n:void 0,body:{provider:u,id_token:d,access_token:m,nonce:f,link_identity:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:Wi}),{data:y,error:x}=p;return x?{data:{user:null,session:null},error:x}:!y||!y.session||!y.user?{data:{user:null,session:null},error:new uc}:(y.session&&(await this._saveSession(y.session),await this._notifyAllSubscribers("USER_UPDATED",y.session)),{data:y,error:x})}catch(s){if(ut(s))return{data:{user:null,session:null},error:s};throw s}})}async unlinkIdentity(t){try{return await this._useSession(async r=>{var n,s;const{data:i,error:l}=r;if(l)throw l;return await jt(this.fetch,"DELETE",`${this.url}/user/identities/${t.identity_id}`,{headers:this.headers,jwt:(s=(n=i.session)===null||n===void 0?void 0:n.access_token)!==null&&s!==void 0?s:void 0})})}catch(r){if(ut(r))return{data:null,error:r};throw r}}async _refreshAccessToken(t){const r=`#_refreshAccessToken(${t.substring(0,5)}...)`;this._debug(r,"begin");try{const n=Date.now();return await g6(async s=>(s>0&&await p6(200*Math.pow(2,s-1)),this._debug(r,"refreshing attempt",s),await jt(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:t},headers:this.headers,xform:Wi})),(s,i)=>{const l=200*Math.pow(2,s);return i&&Kg(i)&&Date.now()+l-n<bc})}catch(n){if(this._debug(r,"error",n),ut(n))return{data:{session:null,user:null},error:n};throw n}finally{this._debug(r,"end")}}_isValidSession(t){return typeof t=="object"&&t!==null&&"access_token"in t&&"refresh_token"in t&&"expires_at"in t}async _handleProviderSignIn(t,r){const n=await this._getUrlForProvider(`${this.url}/authorize`,t,{redirectTo:r.redirectTo,scopes:r.scopes,queryParams:r.queryParams});return this._debug("#_handleProviderSignIn()","provider",t,"options",r,"url",n),Ys()&&!r.skipBrowserRedirect&&window.location.assign(n),{data:{provider:t,url:n},error:null}}async _recoverAndRefresh(){var t,r;const n="#_recoverAndRefresh()";this._debug(n,"begin");try{const s=await il(this.storage,this.storageKey);if(s&&this.userStorage){let l=await il(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!l&&(l={user:s.user},await jc(this.userStorage,this.storageKey+"-user",l)),s.user=(t=l==null?void 0:l.user)!==null&&t!==void 0?t:Yg()}else if(s&&!s.user&&!s.user){const l=await il(this.storage,this.storageKey+"-user");l&&(l!=null&&l.user)?(s.user=l.user,await _o(this.storage,this.storageKey+"-user"),await jc(this.storage,this.storageKey,s)):s.user=Yg()}if(this._debug(n,"session from storage",s),!this._isValidSession(s)){this._debug(n,"session is not valid"),s!==null&&await this._removeSession();return}const i=((r=s.expires_at)!==null&&r!==void 0?r:1/0)*1e3-Date.now()<Hg;if(this._debug(n,`session has${i?"":" not"} expired with margin of ${Hg}s`),i){if(this.autoRefreshToken&&s.refresh_token){const{error:l}=await this._callRefreshToken(s.refresh_token);l&&(console.error(l),Kg(l)||(this._debug(n,"refresh failed with a non-retryable error, removing the session",l),await this._removeSession()))}}else if(s.user&&s.user.__isUserNotAvailableProxy===!0)try{const{data:l,error:u}=await this._getUser(s.access_token);!u&&(l!=null&&l.user)?(s.user=l.user,await this._saveSession(s),await this._notifyAllSubscribers("SIGNED_IN",s)):this._debug(n,"could not get user data, skipping SIGNED_IN notification")}catch(l){console.error("Error getting user data:",l),this._debug(n,"error getting user data, skipping SIGNED_IN notification",l)}else await this._notifyAllSubscribers("SIGNED_IN",s)}catch(s){this._debug(n,"error",s),console.error(s);return}finally{this._debug(n,"end")}}async _callRefreshToken(t){var r,n;if(!t)throw new Co;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const s=`#_callRefreshToken(${t.substring(0,5)}...)`;this._debug(s,"begin");try{this.refreshingDeferred=new bm;const{data:i,error:l}=await this._refreshAccessToken(t);if(l)throw l;if(!i.session)throw new Co;await this._saveSession(i.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",i.session);const u={data:i.session,error:null};return this.refreshingDeferred.resolve(u),u}catch(i){if(this._debug(s,"error",i),ut(i)){const l={data:null,error:i};return Kg(i)||await this._removeSession(),(r=this.refreshingDeferred)===null||r===void 0||r.resolve(l),l}throw(n=this.refreshingDeferred)===null||n===void 0||n.reject(i),i}finally{this.refreshingDeferred=null,this._debug(s,"end")}}async _notifyAllSubscribers(t,r,n=!0){const s=`#_notifyAllSubscribers(${t})`;this._debug(s,"begin",r,`broadcast = ${n}`);try{this.broadcastChannel&&n&&this.broadcastChannel.postMessage({event:t,session:r});const i=[],l=Array.from(this.stateChangeEmitters.values()).map(async u=>{try{await u.callback(t,r)}catch(d){i.push(d)}});if(await Promise.all(l),i.length>0){for(let u=0;u<i.length;u+=1)console.error(i[u]);throw i[0]}}finally{this._debug(s,"end")}}async _saveSession(t){this._debug("#_saveSession()",t),this.suppressGetSessionWarning=!0;const r=Object.assign({},t),n=r.user&&r.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!n&&r.user&&await jc(this.userStorage,this.storageKey+"-user",{user:r.user});const s=Object.assign({},r);delete s.user;const i=Jj(s);await jc(this.storage,this.storageKey,i)}else{const s=Jj(r);await jc(this.storage,this.storageKey,s)}}async _removeSession(){this._debug("#_removeSession()"),await _o(this.storage,this.storageKey),await _o(this.storage,this.storageKey+"-code-verifier"),await _o(this.storage,this.storageKey+"-user"),this.userStorage&&await _o(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const t=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{t&&Ys()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",t)}catch(r){console.error("removing visibilitychange callback failed",r)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const t=setInterval(()=>this._autoRefreshTokenTick(),bc);this.autoRefreshTicker=t,t&&typeof t=="object"&&typeof t.unref=="function"?t.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(t),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const t=this.autoRefreshTicker;this.autoRefreshTicker=null,t&&clearInterval(t)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const t=Date.now();try{return await this._useSession(async r=>{const{data:{session:n}}=r;if(!n||!n.refresh_token||!n.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const s=Math.floor((n.expires_at*1e3-t)/bc);this._debug("#_autoRefreshTokenTick()",`access token expires in ${s} ticks, a tick lasts ${bc}ms, refresh threshold is ${Kv} ticks`),s<=Kv&&await this._callRefreshToken(n.refresh_token)})}catch(r){console.error("Auto refresh tick failed with error. This is likely a transient error.",r)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(t){if(t.isAcquireTimeout||t instanceof GC)this._debug("auto refresh token tick lock not available");else throw t}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Ys()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(t){console.error("_handleVisibilityChange",t)}}async _onVisibilityChanged(t){const r=`#_onVisibilityChanged(${t})`;this._debug(r,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),t||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(r,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(t,r,n){const s=[`provider=${encodeURIComponent(r)}`];if(n!=null&&n.redirectTo&&s.push(`redirect_to=${encodeURIComponent(n.redirectTo)}`),n!=null&&n.scopes&&s.push(`scopes=${encodeURIComponent(n.scopes)}`),this.flowType==="pkce"){const[i,l]=await dc(this.storage,this.storageKey),u=new URLSearchParams({code_challenge:`${encodeURIComponent(i)}`,code_challenge_method:`${encodeURIComponent(l)}`});s.push(u.toString())}if(n!=null&&n.queryParams){const i=new URLSearchParams(n.queryParams);s.push(i.toString())}return n!=null&&n.skipBrowserRedirect&&s.push(`skip_http_redirect=${n.skipBrowserRedirect}`),`${t}?${s.join("&")}`}async _unenroll(t){try{return await this._useSession(async r=>{var n;const{data:s,error:i}=r;return i?{data:null,error:i}:await jt(this.fetch,"DELETE",`${this.url}/factors/${t.factorId}`,{headers:this.headers,jwt:(n=s==null?void 0:s.session)===null||n===void 0?void 0:n.access_token})})}catch(r){if(ut(r))return{data:null,error:r};throw r}}async _enroll(t){try{return await this._useSession(async r=>{var n,s;const{data:i,error:l}=r;if(l)return{data:null,error:l};const u=Object.assign({friendly_name:t.friendlyName,factor_type:t.factorType},t.factorType==="phone"?{phone:t.phone}:t.factorType==="totp"?{issuer:t.issuer}:{}),{data:d,error:m}=await jt(this.fetch,"POST",`${this.url}/factors`,{body:u,headers:this.headers,jwt:(n=i==null?void 0:i.session)===null||n===void 0?void 0:n.access_token});return m?{data:null,error:m}:(t.factorType==="totp"&&d.type==="totp"&&(!((s=d==null?void 0:d.totp)===null||s===void 0)&&s.qr_code)&&(d.totp.qr_code=`data:image/svg+xml;utf-8,${d.totp.qr_code}`),{data:d,error:null})})}catch(r){if(ut(r))return{data:null,error:r};throw r}}async _verify(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var n;const{data:s,error:i}=r;if(i)return{data:null,error:i};const l=Object.assign({challenge_id:t.challengeId},"webauthn"in t?{webauthn:Object.assign(Object.assign({},t.webauthn),{credential_response:t.webauthn.type==="create"?K6(t.webauthn.credential_response):G6(t.webauthn.credential_response)})}:{code:t.code}),{data:u,error:d}=await jt(this.fetch,"POST",`${this.url}/factors/${t.factorId}/verify`,{body:l,headers:this.headers,jwt:(n=s==null?void 0:s.session)===null||n===void 0?void 0:n.access_token});return d?{data:null,error:d}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+u.expires_in},u)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",u),{data:u,error:d})})}catch(r){if(ut(r))return{data:null,error:r};throw r}})}async _challenge(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var n;const{data:s,error:i}=r;if(i)return{data:null,error:i};const l=await jt(this.fetch,"POST",`${this.url}/factors/${t.factorId}/challenge`,{body:t,headers:this.headers,jwt:(n=s==null?void 0:s.session)===null||n===void 0?void 0:n.access_token});if(l.error)return l;const{data:u}=l;if(u.type!=="webauthn")return{data:u,error:null};switch(u.webauthn.type){case"create":return{data:Object.assign(Object.assign({},u),{webauthn:Object.assign(Object.assign({},u.webauthn),{credential_options:Object.assign(Object.assign({},u.webauthn.credential_options),{publicKey:V6(u.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},u),{webauthn:Object.assign(Object.assign({},u.webauthn),{credential_options:Object.assign(Object.assign({},u.webauthn.credential_options),{publicKey:H6(u.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(r){if(ut(r))return{data:null,error:r};throw r}})}async _challengeAndVerify(t){const{data:r,error:n}=await this._challenge({factorId:t.factorId});return n?{data:null,error:n}:await this._verify({factorId:t.factorId,challengeId:r.id,code:t.code})}async _listFactors(){var t;const{data:{user:r},error:n}=await this.getUser();if(n)return{data:null,error:n};const s={all:[],phone:[],totp:[],webauthn:[]};for(const i of(t=r==null?void 0:r.factors)!==null&&t!==void 0?t:[])s.all.push(i),i.status==="verified"&&s[i.factor_type].push(i);return{data:s,error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async t=>{var r,n;const{data:{session:s},error:i}=t;if(i)return{data:null,error:i};if(!s)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:l}=Gg(s.access_token);let u=null;l.aal&&(u=l.aal);let d=u;((n=(r=s.user.factors)===null||r===void 0?void 0:r.filter(p=>p.status==="verified"))!==null&&n!==void 0?n:[]).length>0&&(d="aal2");const f=l.amr||[];return{data:{currentLevel:u,nextLevel:d,currentAuthenticationMethods:f},error:null}}))}async fetchJwk(t,r={keys:[]}){let n=r.keys.find(u=>u.kid===t);if(n)return n;const s=Date.now();if(n=this.jwks.keys.find(u=>u.kid===t),n&&this.jwks_cached_at+t6>s)return n;const{data:i,error:l}=await jt(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(l)throw l;return!i.keys||i.keys.length===0||(this.jwks=i,this.jwks_cached_at=s,n=i.keys.find(u=>u.kid===t),!n)?null:n}async getClaims(t,r={}){try{let n=t;if(!n){const{data:x,error:j}=await this.getSession();if(j||!x.session)return{data:null,error:j};n=x.session.access_token}const{header:s,payload:i,signature:l,raw:{header:u,payload:d}}=Gg(n);r!=null&&r.allowExpired||S6(i.exp);const m=!s.alg||s.alg.startsWith("HS")||!s.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(s.kid,r!=null&&r.keys?{keys:r.keys}:r==null?void 0:r.jwks);if(!m){const{error:x}=await this.getUser(n);if(x)throw x;return{data:{claims:i,header:s,signature:l},error:null}}const f=k6(s.alg),p=await crypto.subtle.importKey("jwk",m,f,!0,["verify"]);if(!await crypto.subtle.verify(f,p,l,u6(`${u}.${d}`)))throw new Jv("Invalid JWT signature");return{data:{claims:i,header:s,signature:l},error:null}}catch(n){if(ut(n))return{data:null,error:n};throw n}}}od.nextInstanceID=0;const nR=od;class sR extends nR{constructor(t){super(t)}}var iR=function(e,t,r,n){function s(i){return i instanceof r?i:new r(function(l){l(i)})}return new(r||(r=Promise))(function(i,l){function u(f){try{m(n.next(f))}catch(p){l(p)}}function d(f){try{m(n.throw(f))}catch(p){l(p)}}function m(f){f.done?i(f.value):s(f.value).then(u,d)}m((n=n.apply(e,t||[])).next())})};class aR{constructor(t,r,n){var s,i,l;this.supabaseUrl=t,this.supabaseKey=r;const u=J3(t);if(!r)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",u),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",u),this.storageUrl=new URL("storage/v1",u),this.functionsUrl=new URL("functions/v1",u);const d=`sb-${u.hostname.split(".")[0]}-auth-token`,m={db:z3,realtime:B3,auth:Object.assign(Object.assign({},U3),{storageKey:d}),global:L3},f=Y3(n??{},m);this.storageKey=(s=f.auth.storageKey)!==null&&s!==void 0?s:"",this.headers=(i=f.global.headers)!==null&&i!==void 0?i:{},f.accessToken?(this.accessToken=f.accessToken,this.auth=new Proxy({},{get:(p,y)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(y)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((l=f.auth)!==null&&l!==void 0?l:{},this.headers,f.global.fetch),this.fetch=H3(r,this._getAccessToken.bind(this),f.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},f.realtime)),this.rest=new r3(new URL("rest/v1",u).href,{headers:this.headers,schema:f.db.schema,fetch:this.fetch}),this.storage=new $3(this.storageUrl.href,this.headers,this.fetch,n==null?void 0:n.storage),f.accessToken||this._listenForAuthEvents()}get functions(){return new H5(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(t){return this.rest.from(t)}schema(t){return this.rest.schema(t)}rpc(t,r={},n={}){return this.rest.rpc(t,r,n)}channel(t,r={config:{}}){return this.realtime.channel(t,r)}getChannels(){return this.realtime.getChannels()}removeChannel(t){return this.realtime.removeChannel(t)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){return iR(this,void 0,void 0,function*(){var t,r;if(this.accessToken)return yield this.accessToken();const{data:n}=yield this.auth.getSession();return(r=(t=n.session)===null||t===void 0?void 0:t.access_token)!==null&&r!==void 0?r:this.supabaseKey})}_initSupabaseAuthClient({autoRefreshToken:t,persistSession:r,detectSessionInUrl:n,storage:s,userStorage:i,storageKey:l,flowType:u,lock:d,debug:m},f,p){const y={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new sR({url:this.authUrl.href,headers:Object.assign(Object.assign({},y),f),storageKey:l,autoRefreshToken:t,persistSession:r,detectSessionInUrl:n,storage:s,userStorage:i,flowType:u,lock:d,debug:m,fetch:p,hasCustomAuthorizationHeader:Object.keys(this.headers).some(x=>x.toLowerCase()==="authorization")})}_initRealtimeClient(t){return new x3(this.realtimeUrl.href,Object.assign(Object.assign({},t),{params:Object.assign({apikey:this.supabaseKey},t==null?void 0:t.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((r,n)=>{this._handleTokenChanged(r,"CLIENT",n==null?void 0:n.access_token)})}_handleTokenChanged(t,r,n){(t==="TOKEN_REFRESHED"||t==="SIGNED_IN")&&this.changedAccessToken!==n?(this.changedAccessToken=n,this.realtime.setAuth(n)):t==="SIGNED_OUT"&&(this.realtime.setAuth(),r=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const oR=(e,t,r)=>new aR(e,t,r);function lR(){if(typeof window<"u"||typeof process>"u")return!1;const e=process.version;if(e==null)return!1;const t=e.match(/^v(\d+)\./);return t?parseInt(t[1],10)<=18:!1}lR()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const cR="https://okdzllfpsvltjqryslnn.supabase.co",uR="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im9rZHpsbGZwc3ZsdGpxcnlzbG5uIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTk3NTcxMTgsImV4cCI6MjA3NTMzMzExOH0.uLhMzo49-OMEp4ghFAFI31IpiDs1tjbyY2jZlk-vgUo",je=oR(cR,uR,{db:{schema:"public"},auth:{persistSession:!0,autoRefreshToken:!0}}),Ha="__FEATURE_SUGGESTION__",vx="__feature_suggestion__",dR="__feature_future_session__";function jm(e){let t={};if(e!=null&&e.description)try{t=JSON.parse(e.description)}catch(s){console.warn("[databaseService] Unable to parse suggestion payload",s),t={}}const n=(Array.isArray(e==null?void 0:e.tags)?e.tags:[]).includes(dR)?"future":"pending";return{id:e.id,session_id:e.session_id,title:e.title,summary:t.summary??null,whatWouldItDo:t.whatWouldItDo??null,howWouldItWork:t.howWouldItWork??null,status:n,requester_id:t.requesterId??null,requester_name:t.requesterName??null,requester_email:t.requesterEmail??null,created_at:e.created_at}}async function QC(e){try{if(!je||typeof je.from!="function")throw new Error("Supabase client is not properly initialized");const t=`${je.supabaseUrl}/rest/v1/users?email=eq.${encodeURIComponent(e)}&select=*&limit=1`,r={apikey:je.supabaseKey,Authorization:`Bearer ${je.supabaseKey}`,"Content-Type":"application/json",Prefer:"return=representation"},n=fetch(t,{method:"GET",headers:r}).then(async f=>{if(!f.ok){const y=await f.text();throw console.error("[databaseService] Direct fetch error:",y),new Error(`API error: ${f.status} - ${y}`)}const p=await f.json();return{data:p.length>0?p[0]:null,error:null}}).catch(f=>{throw console.error("[databaseService] Direct fetch exception:",f),f}),s=Promise.race([n,new Promise((f,p)=>{setTimeout(()=>p(new Error("Direct fetch timeout after 5 seconds")),5e3)})]);try{const f=await s;if(f.data)return f.data}catch{}const i=je.from("users").select("*").eq("email",e).single(),u=await Promise.race([i,new Promise((f,p)=>{setTimeout(()=>{console.error("[databaseService]  TIMEOUT: Query did not complete after 10 seconds"),p(new Error("Query timeout after 10 seconds"))},1e4)})]),{data:d,error:m}=u;if(m){if(m.code==="PGRST116")return null;throw m}return d}catch(t){throw console.error("[databaseService] getUserByEmail error:",t),t}}async function fR(e){const t="5e5482eb-82f0-4e76-8a6b-c6d74b01cd3a",{data:r,error:n}=await je.from("users").insert([{email:e.email,name:e.name,tenant_id:e.tenant_id||t}]).select().single();if(n)throw console.error("[databaseService] createUser error:",n),n;return r}async function ml(e,t){try{let r=await QC(e);return r||(r=await fR({email:e,name:t})),r}catch(r){throw console.error("[databaseService] Error in getOrCreateUser:",r),r}}async function Xv(){const{data:e,error:t}=await je.from("users").select("*").order("created_at",{ascending:!1});if(t)throw t;return e||[]}async function hR(e){var l,u;const[t,r,n]=await Promise.all([_i(e),je.from("session_admins").select("session_id").eq("user_id",e),je.from("users").select("email").eq("id",e).single()]),s=((l=r.data)==null?void 0:l.length)||0;let i=0;if((u=n.data)!=null&&u.email){const{data:d}=await je.from("session_stakeholders").select("session_id").eq("user_email",n.data.email);i=(d==null?void 0:d.length)||0}return{userId:e,isSystemAdmin:t,sessionAdminCount:s,stakeholderSessionCount:i}}const Gc="PRODUCTS_TABLE_MISSING";function Ba(e){return typeof e=="object"&&e!==null&&e.code===Gc}async function xx(){const{data:e,error:t}=await je.from("products").select("*").order("name",{ascending:!0});if(t){if((t==null?void 0:t.code)==="PGRST205"){const r=new Error("Products table is missing");throw r.code=Gc,r}throw t}return e||[]}async function $a(e){const{data:t,error:r}=await je.from("products").select("*").eq("tenant_id",e).order("name",{ascending:!0});if(r){if((r==null?void 0:r.code)==="PGRST205"){const n=new Error("Products table is missing");throw n.code=Gc,n}throw r}return t||[]}async function wx(e,t){if(!e)throw new Error("Product ID is required");const r={};if(t.name!==void 0){const i=t.name.trim();if(!i)throw new Error("Product name cannot be empty");r.name=i}if(t.color_hex!==void 0&&(r.color_hex=t.color_hex),Object.keys(r).length===0)throw new Error("No updates provided");const{data:n,error:s}=await je.from("products").update(r).eq("id",e).select().single();if(s){if((s==null?void 0:s.code)==="PGRST205"){const i=new Error("Products table is missing");throw i.code=Gc,i}throw s}return n}async function ZC(e,t,r){const n=t.trim();if(!n)throw new Error("Product name is required");const{data:s,error:i}=await je.from("products").insert([{name:n,tenant_id:e,color_hex:r||null}]).select().single();if(i){if((i==null?void 0:i.code)==="PGRST205"){const l=new Error("Products table is missing");throw l.code=Gc,l}if((i==null?void 0:i.code)==="23505"){const{data:l,error:u}=await je.from("products").select("*").eq("tenant_id",e).eq("name",n).maybeSingle();if(u)throw u;if(l)return l}throw i}return s}async function eE(e){const{error:t}=await je.from("products").delete().eq("id",e);if(t){if((t==null?void 0:t.code)==="PGRST205"){const r=new Error("Products table is missing");throw r.code=Gc,r}throw t}}const Nd="*, product:products(name)";function Sm(e){if(!e)throw new Error("Unexpected empty session row");const{product:t,...r}=e,n=r.product_name??(t==null?void 0:t.name)??null;return{...r,product_name:n}}function tE(e){return!e||e.length===0?[]:e.map(t=>Sm(t))}async function Mo(){try{const e=`${je.supabaseUrl}/rest/v1/voting_sessions?select=${encodeURIComponent(Nd)}&order=created_at.desc`,t={apikey:je.supabaseKey,Authorization:`Bearer ${je.supabaseKey}`,"Content-Type":"application/json"},r=await fetch(e,{method:"GET",headers:t});if(!r.ok){const s=await r.text();throw console.error("[databaseService] getAllSessions API error:",r.status,s),new Error(`API error: ${r.status} - ${s}`)}const n=await r.json();return tE(n)}catch(e){throw console.error("[databaseService] Exception in getAllSessions:",e),e}}async function mR(e){const{data:t,error:r}=await je.from("voting_sessions").select(Nd).eq("id",e).single();if(r){if(r.code==="PGRST116")return null;throw r}return t?Sm(t):null}async function pR(e){const{data:t,error:r}=await je.from("voting_sessions").select(Nd).eq("session_code",e).single();if(r){if(r.code==="PGRST116")return null;throw r}return t?Sm(t):null}async function rE(e){var t;try{if(await _i(e))return Mo();const n=`${je.supabaseUrl}/rest/v1/session_admins?user_id=eq.${e}&select=session_id`,s=await fetch(n,{method:"GET",headers:{apikey:je.supabaseKey,Authorization:`Bearer ${je.supabaseKey}`,"Content-Type":"application/json"}});if(!s.ok){const C=await s.text();throw console.error("[databaseService] Error loading session admins:",s.status,C),new Error(`API error: ${s.status} - ${C}`)}const i=await s.json(),l=(i==null?void 0:i.map(C=>C.session_id))||[],u=`${je.supabaseUrl}/rest/v1/users?id=eq.${e}&select=email&limit=1`,d=await fetch(u,{method:"GET",headers:{apikey:je.supabaseKey,Authorization:`Bearer ${je.supabaseKey}`,"Content-Type":"application/json"}});if(!d.ok){const C=await d.text();throw console.error("[databaseService] Error getting user email:",d.status,C),new Error(`API error: ${d.status} - ${C}`)}const m=await d.json(),f=(t=m==null?void 0:m[0])==null?void 0:t.email;if(!f)throw console.error("[databaseService] User email not found"),new Error("User email not found");const p=`${je.supabaseUrl}/rest/v1/session_stakeholders?user_email=eq.${encodeURIComponent(f)}&select=session_id`,y=await fetch(p,{method:"GET",headers:{apikey:je.supabaseKey,Authorization:`Bearer ${je.supabaseKey}`,"Content-Type":"application/json"}});if(!y.ok){const C=await y.text();throw console.error("[databaseService] Error loading session stakeholders:",y.status,C),new Error(`API error: ${y.status} - ${C}`)}const x=await y.json(),j=(x==null?void 0:x.map(C=>C.session_id))||[],b=[...new Set([...l,...j])];if(b.length===0)return[];const k=`${je.supabaseUrl}/rest/v1/voting_sessions?select=${encodeURIComponent(Nd)}&id=in.(${b.join(",")})&order=created_at.desc`,_=await fetch(k,{method:"GET",headers:{apikey:je.supabaseKey,Authorization:`Bearer ${je.supabaseKey}`,"Content-Type":"application/json"}});if(!_.ok){const C=await _.text();throw console.error("[databaseService] Error loading voting sessions:",_.status,C),new Error(`API error: ${_.status} - ${C}`)}const E=await _.json();return tE(E)}catch(r){throw console.error("[databaseService] Error in getSessionsForUser:",r),r}}async function nE(e){if(!e)return null;const{data:t,error:r}=await je.from("voting_sessions").select(Nd).eq("product_id",e).eq("is_active",!0).maybeSingle();if(r){if(r.code==="PGRST116")return null;throw r}return t?Sm(t):null}async function sE(e){const{data:t,error:r}=await je.from("voting_sessions").insert([e]).select().single();if(r)throw r;return t}async function iE(e,t){const{data:r,error:n}=await je.from("voting_sessions").update(t).eq("id",e).select().single();if(n)throw n;return r}async function gR(e){const{error:t}=await je.from("voting_sessions").delete().eq("id",e);if(t)throw t}async function yR(e,t){const{error:r}=await je.from("votes").delete().eq("session_id",e).eq("feature_id",t);if(r)throw r}async function aE(e){const{data:t,error:r}=await je.from("session_admins").select(`
      *,
      users (*)
    `).eq("session_id",e);if(r)throw r;return(t||[]).map(n=>({id:n.id,session_id:n.session_id,user_id:n.user_id,created_at:n.created_at,user:n.users}))}async function oE(e){const{data:t,error:r}=await je.from("voting_sessions").select("id").eq("product_id",e);if(r)throw r;if(!t||t.length===0)return[];const n=t.map(u=>u.id),{data:s,error:i}=await je.from("session_admins").select(`
      *,
      users (*)
    `).in("session_id",n);if(i)throw i;const l=new Map;return(s||[]).forEach(u=>{const d={id:u.id,session_id:u.session_id,user_id:u.user_id,created_at:u.created_at,user:u.users};if(d.user&&d.user.email){const m=d.user.email.toLowerCase();l.has(m)||l.set(m,d)}}),Array.from(l.values())}async function Ac(e,t){const{data:r,error:n}=await je.from("session_admins").insert([{session_id:e,user_id:t}]).select().single();if(n)throw n;return r}async function vR(e,t,r){const n=await ml(t,r);return Ac(e,n.id)}async function Qv(e,t){const{error:r}=await je.from("session_admins").delete().eq("session_id",e).eq("user_id",t);if(r)throw r}async function km(e,t){try{if(await _i(t))return!0;const n=`${je.supabaseUrl}/rest/v1/session_admins?session_id=eq.${e}&user_id=eq.${t}&select=id&limit=1`,s={apikey:je.supabaseKey,Authorization:`Bearer ${je.supabaseKey}`,"Content-Type":"application/json"},i=await fetch(n,{method:"GET",headers:s});if(!i.ok)return console.error("Error checking admin status:",i.status),!1;const l=await i.json();return Array.isArray(l)&&l.length>0}catch(r){return console.error("Caught exception checking admin:",r),!1}}async function lE(e){const{data:t,error:r}=await je.from("session_stakeholders").select("*").eq("session_id",e).order("user_name",{ascending:!0});if(r)throw r;return t||[]}async function cE(e){const{data:t,error:r}=await je.from("session_stakeholders").insert([e]).select().single();if(r)throw r;return t}async function nS(e,t,r){return cE({session_id:e,user_email:t,user_name:r,votes_allocated:0,has_voted:!1})}function uE(e,t,r){const n=typeof window<"u"&&window.location.pathname.startsWith("/feature-voting-app")?"/feature-voting-app":"",s=`${window.location.origin}${n}/login?session=${e.session_code??""}`,i=encodeURIComponent(`You're invited to vote: ${e.title}`),l=encodeURIComponent(`Hi,

You've been invited to participate in a feature voting session.

Session: ${e.title}
Goal: ${e.goal}

To get started, copy and paste this link into your browser:

${s}

Voting Period: ${e.start_date?sS(e.start_date):""} - ${e.end_date?sS(e.end_date):""}

Best regards,
${r}`);return`mailto:${encodeURIComponent(t)}?subject=${i}&body=${l}`}function sS(e){return new Date(e).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})}async function Zv(e,t){const{error:r}=await je.from("session_stakeholders").delete().eq("session_id",e).eq("user_email",t);if(r)throw r}async function bx(e,t){try{const r=`${je.supabaseUrl}/rest/v1/session_stakeholders?session_id=eq.${e}&user_email=eq.${encodeURIComponent(t)}&select=id&limit=1`,n={apikey:je.supabaseKey,Authorization:`Bearer ${je.supabaseKey}`,"Content-Type":"application/json"},s=await fetch(r,{method:"GET",headers:n});if(!s.ok)return console.error("Error checking stakeholder status:",s.status),!1;const i=await s.json();return Array.isArray(i)&&i.length>0}catch(r){return console.error("Caught exception checking stakeholder:",r),!1}}async function xR(e,t){const{data:r,error:n}=await je.from("session_stakeholders").select("id").eq("session_id",e).eq("user_email",t.toLowerCase()).maybeSingle();return n?(console.error("Error checking stakeholder status:",n),!1):!!r}async function iS(e,t){const{error:r}=await je.from("session_stakeholders").delete().eq("session_id",e).eq("user_email",t.toLowerCase());if(r)throw r}async function ua(e){const t=`${je.supabaseUrl}/rest/v1/features?session_id=eq.${e}&select=*&order=created_at.desc`,r={apikey:je.supabaseKey,Authorization:`Bearer ${je.supabaseKey}`,"Content-Type":"application/json"},n=await fetch(t,{method:"GET",headers:r});if(!n.ok){const i=await n.text();throw new Error(`API error: ${n.status} - ${i}`)}return(await n.json()||[]).filter(i=>{const l=i.state===Ha,u=Array.isArray(i.tags)&&i.tags.includes(vx);return!l&&!u})}async function qf(e){const{data:t,error:r}=await je.from("features").insert([{session_id:e.session_id,title:e.title,description:e.description,epic:e.epic,state:e.state,area_path:e.areaPath,tags:e.tags,azure_devops_id:e.azure_devops_id,azure_devops_url:e.azure_devops_url}]).select().single();if(r)throw r;return t}async function Xg(e,t){const r={};t.title!==void 0&&(r.title=t.title),t.description!==void 0&&(r.description=t.description),t.epic!==void 0&&(r.epic=t.epic),t.state!==void 0&&(r.state=t.state),t.areaPath!==void 0&&(r.area_path=t.areaPath),t.tags!==void 0&&(r.tags=t.tags),t.azure_devops_id!==void 0&&(r.azure_devops_id=t.azure_devops_id),t.azure_devops_url!==void 0&&(r.azure_devops_url=t.azure_devops_url);const{data:n,error:s}=await je.from("features").update(r).eq("id",e).select().single();if(s)throw s;return n}async function aS(e){const{error:t}=await je.from("features").delete().eq("id",e);if(t)throw t}function dE(e){return{id:e.id,sessionId:e.session_id,type:e.type,reason:e.reason,details:e.details??null,actorName:e.actor_name??"Admin",actorId:e.actor_id??null,createdAt:e.created_at}}async function wR(e){try{const{data:t,error:r}=await je.from("session_status_notes").select("*").eq("session_id",e).order("created_at",{ascending:!1});if(r)throw r;return(t||[]).map(dE)}catch(t){if((t==null?void 0:t.code)==="42P01")return console.warn("[databaseService] session_status_notes table not found; status notes will not persist.",t),[];throw t}}async function bR(e){try{const{data:t,error:r}=await je.from("session_status_notes").insert([{session_id:e.session_id,type:e.type,reason:e.reason,details:e.details??null,actor_id:e.actor_id??null,actor_name:e.actor_name}]).select("*").single();if(r)throw r;return dE(t)}catch(t){if((t==null?void 0:t.code)==="42P01")return console.warn("[databaseService] session_status_notes table not found; status notes will not persist.",t),{id:`temp-${Date.now()}`,sessionId:e.session_id,type:e.type,reason:e.reason,details:e.details??null,actorName:e.actor_name,actorId:e.actor_id??null,createdAt:new Date().toISOString()};throw t}}async function Eo(e){const t=`${je.supabaseUrl}/rest/v1/votes?session_id=eq.${e}&select=*`,r={apikey:je.supabaseKey,Authorization:`Bearer ${je.supabaseKey}`,"Content-Type":"application/json"},n=await fetch(t,{method:"GET",headers:r});if(!n.ok){const i=await n.text();throw new Error(`API error: ${n.status} - ${i}`)}return await n.json()||[]}async function jR(e){const{data:t}=await je.from("votes").select("*").eq("session_id",e.session_id).eq("feature_id",e.feature_id).eq("user_id",e.user_id).single();if(t){const{data:r,error:n}=await je.from("votes").update({vote_count:e.vote_count}).eq("session_id",e.session_id).eq("feature_id",e.feature_id).eq("user_id",e.user_id).select().single();if(n)throw n;return r}else{const{data:r,error:n}=await je.from("votes").insert([e]).select().single();if(n)throw n;return r}}async function SR(e,t){const{error:r}=await je.from("votes").delete().eq("session_id",e).eq("user_id",t);if(r)throw console.error("Error deleting user votes:",r),r}async function kR(e){const{error:t}=await je.from("votes").delete().eq("session_id",e);if(t)throw t}async function NR(e){try{const{data:t,error:r}=await je.from("azure_devops_config").select("*").eq("session_id",e).maybeSingle();if(r){if(r.code==="PGRST116")return null;throw r}return t}catch(t){return console.error("Error getting Azure DevOps config:",t),null}}async function al(e,t){try{const r={session_id:e,organization:t.organization,project:t.project,enabled:t.enabled,work_item_type:t.workItemType};t.accessToken!==void 0&&(r.access_token=t.accessToken),t.refreshToken!==void 0&&(r.refresh_token=t.refreshToken),t.tokenExpiresAt!==void 0&&(r.token_expires_at=t.tokenExpiresAt),t.tenantId!==void 0&&(r.tenant_id=t.tenantId),t.clientId!==void 0&&(r.client_id=t.clientId),t.query!==void 0&&(r.query=t.query),t.lastSyncTime!==void 0&&(r.last_sync_time=t.lastSyncTime),t.states!==void 0&&(r.states=t.states),t.areaPath!==void 0&&(r.area_path=t.areaPath),t.tags!==void 0&&(r.tags=t.tags);const{data:n,error:s}=await je.from("azure_devops_config").update(r).eq("session_id",e).select();if(!s&&n&&n.length>0)return n[0];const{data:i,error:l}=await je.from("azure_devops_config").upsert([r]).select().single();if(!l)return i;if((l==null?void 0:l.code)==="23505"){const{data:u,error:d}=await je.from("azure_devops_config").select("*").eq("session_id",e).maybeSingle();if(d)throw d;return u}throw l||s}catch(r){throw console.error("Error saving Azure DevOps config:",r),r}}async function _R(){return(await Mo())[0]||null}async function CR(e){const t=await _R();if(!t)throw new Error("No session found");return iE(t.id,e)}async function oS(e,t){return iE(e,t)}async function ER(e){const{data:t,error:r}=await je.from("info_requests").insert([{session_id:e.session_id,feature_id:e.feature_id,feature_title:e.feature_title,requester_id:e.requester_id,requester_name:e.requester_name,requester_email:e.requester_email,created_at:e.created_at}]).select().single();if(r)throw r;return t}async function AR(e){const t={summary:e.description??null,whatWouldItDo:e.whatWouldItDo??null,howWouldItWork:e.howWouldItWork??null,requesterId:e.requester_id??null,requesterName:e.requester_name??null,requesterEmail:e.requester_email??null},{data:r,error:n}=await je.from("features").insert([{session_id:e.session_id,title:e.title,description:JSON.stringify(t),epic:null,state:Ha,area_path:null,tags:[vx],azure_devops_id:null,azure_devops_url:null}]).select("id, session_id, title, description, created_at").single();if(n)throw n;return jm(r)}async function PR(e,t){const{data:r,error:n}=await je.from("features").select("id, title, description, session_id, created_at").eq("id",e).eq("state",Ha).single();if(n)throw n;let s={};if(r!=null&&r.description)try{s=JSON.parse(r.description)}catch(d){console.warn("[databaseService] Unable to parse suggestion payload during update",d)}const i={summary:t.summary??s.summary??null,whatWouldItDo:t.whatWouldItDo??s.whatWouldItDo??null,howWouldItWork:t.howWouldItWork??s.howWouldItWork??null,requesterId:s.requesterId??null,requesterName:t.requester_name??s.requesterName??null,requesterEmail:t.requester_email??s.requesterEmail??null},{data:l,error:u}=await je.from("features").update({title:t.title??r.title,description:JSON.stringify(i)}).eq("id",e).eq("state",Ha).select("id, session_id, title, description, created_at").single();if(u)throw u;return jm(l)}async function OR(e){const{error:t}=await je.from("features").delete().eq("id",e).eq("state",Ha);if(t)throw t}async function TR(e,t){const{data:r,error:n}=await je.from("features").update({session_id:t}).eq("id",e).eq("state",Ha).select("id, session_id, title, description, created_at").single();if(n)throw n;return jm(r)}async function IR(e){const{data:t,error:r}=await je.from("features").select("*").eq("id",e).eq("state",Ha).single();if(r)throw r;let n={};if(t!=null&&t.description)try{n=JSON.parse(t.description)}catch(d){console.warn("[databaseService] Unable to parse suggestion payload during promotion",d)}const s=[];n.summary&&s.push(n.summary),n.whatWouldItDo&&s.push(`What would it do?
${n.whatWouldItDo}`),n.howWouldItWork&&s.push(`How would it work?
${n.howWouldItWork}`);const i=Array.isArray(t.tags)?t.tags.filter(d=>d!==vx):[],{data:l,error:u}=await je.from("features").update({description:s.join(`

`)||t.title,state:null,tags:i}).eq("id",e).eq("state",Ha).select("*").single();if(u)throw u;return l}async function lS(e){const{data:t,error:r}=await je.from("features").select("id, session_id, title, description, created_at, state, tags").eq("session_id",e).eq("state",Ha).order("created_at",{ascending:!1});if(r)throw r;return(t||[]).map(jm)}async function e0(){const{data:e,error:t}=await je.from("system_admins").select(`
      *,
      users (*)
    `).order("created_at",{ascending:!1});if(t)throw t;return(e||[]).map(r=>({id:r.id,user_id:r.user_id,created_at:r.created_at,user:r.users}))}async function Nh(e){const{data:t,error:r}=await je.from("system_admins").insert([{user_id:e}]).select().single();if(r)throw r;return t}async function t0(e){const{error:t}=await je.from("system_admins").delete().eq("user_id",e);if(t)throw t}async function _i(e){try{const t=`${je.supabaseUrl}/rest/v1/system_admins?user_id=eq.${e}&select=id&limit=1`,r={apikey:je.supabaseKey,Authorization:`Bearer ${je.supabaseKey}`,"Content-Type":"application/json"},n=await fetch(t,{method:"GET",headers:r});if(!n.ok)return console.error("Error checking system admin status:",n.status),!1;const s=await n.json();return Array.isArray(s)&&s.length>0}catch(t){return console.error("Caught exception checking system admin:",t),!1}}const DR=["dave.hoffman@newmill.com"],RR="".split(",").map(e=>e.trim().toLowerCase()).filter(Boolean),$R=Array.from(new Set([...DR,...RR]));function r0(e){return e?$R.includes(e.toLowerCase()):!1}const fE=v.createContext(void 0);function MR({children:e}){const[t,r]=v.useState(null),[n,s]=v.useState([]),[i,l]=v.useState(null),[u,d]=v.useState(!1),[m,f]=v.useState(!1),[p,y]=v.useState(!1),[x,j]=v.useState(!0),[b,k]=v.useState(!1),[_,E]=v.useState(!1),C=v.useRef(!1),O=v.useCallback(async J=>{if(_)return;const H=J||i;if(!H){s([]),r(me=>{if(me)try{localStorage.removeItem("voting_system_current_session")}catch{}return null});return}E(!0);try{const me=r0(H.email);let Z;me?Z=await Mo():Z=await rE(H.id),s(Z),r(K=>{if(!K)return K;const ce=Z.find(z=>z.id===K.id);if(!ce){try{localStorage.removeItem("voting_system_current_session")}catch{}return null}if(ce.id!==K.id)return K;if(ce!==K){try{localStorage.setItem("voting_system_current_session",ce.id)}catch{}return ce}return K})}catch(me){console.error("Error loading sessions:",me),s([])}finally{E(!1)}},[i,_]);v.useEffect(()=>{if(C.current)return;C.current=!0;const J=setTimeout(()=>{j(!1)},5e3);(async()=>{var Z,K;try{if(window.location.search.includes("code=")||window.location.hash.includes("access_token")||window.location.search.includes("error=")){setTimeout(async()=>{var se,B;try{const{data:{session:ue}}=await je.auth.getSession();if(ue!=null&&ue.user){const oe=ue.user.email;if(oe){const X=((se=ue.user.user_metadata)==null?void 0:se.full_name)||((B=ue.user.user_metadata)==null?void 0:B.name)||oe.split("@")[0]||"User";try{const ee=await ml(oe.toLowerCase(),X);l(ee),await O(ee),setTimeout(()=>{if(window.location.hash){const D=window.location.pathname+window.location.search;window.history.replaceState(null,"",D)}},200)}catch(ee){console.error("Error getting/creating user:",ee)}}}}catch(ue){console.error("Error in OAuth callback handler:",ue)}finally{j(!1),clearTimeout(J)}},1e3);return}const{data:{session:z}}=await je.auth.getSession();if(z!=null&&z.user){const se=z.user.email;if(se){const B=((Z=z.user.user_metadata)==null?void 0:Z.full_name)||((K=z.user.user_metadata)==null?void 0:K.name)||se.split("@")[0]||"User";try{const ue=await ml(se.toLowerCase(),B);l(ue),await O(ue)}catch(ue){console.error("Error getting/creating user:",ue)}}}else{const se=localStorage.getItem("voting_system_user");if(se)try{const B=JSON.parse(se);l(B);try{await O(B)}catch(ue){console.error("Error refreshing sessions:",ue)}}catch(B){console.error("Error loading stored user:",B),localStorage.removeItem("voting_system_user")}}}catch(ce){console.error("Error checking Supabase auth:",ce);const z=localStorage.getItem("voting_system_user");if(z)try{const se=JSON.parse(z);l(se)}catch(se){console.error("Error loading stored user:",se),localStorage.removeItem("voting_system_user")}}finally{window.location.search.includes("code=")||window.location.hash.includes("access_token")||window.location.search.includes("error=")||(j(!1),clearTimeout(J))}})();const{data:{subscription:me}}=je.auth.onAuthStateChange(async(Z,K)=>{var ce,z,se,B;if(Z==="SIGNED_IN"&&(K!=null&&K.user)){const ue=K.user.email;if(ue){const oe=((ce=K.user.user_metadata)==null?void 0:ce.full_name)||((z=K.user.user_metadata)==null?void 0:z.name)||ue.split("@")[0]||"User",X=await ml(ue.toLowerCase(),oe);l(X),await O(X),j(!1),setTimeout(()=>{if(window.location.hash){const ee=window.location.pathname+window.location.search;window.history.replaceState(null,"",ee)}},100)}}else if(Z==="SIGNED_OUT")l(null),s([]),r(null),localStorage.removeItem("voting_system_user"),localStorage.removeItem("voting_system_current_session"),j(!1);else if(Z==="TOKEN_REFRESHED"&&(K!=null&&K.user)){if(!i&&K.user.email){const ue=K.user.email,oe=((se=K.user.user_metadata)==null?void 0:se.full_name)||((B=K.user.user_metadata)==null?void 0:B.name)||ue.split("@")[0]||"User",X=await ml(ue.toLowerCase(),oe);l(X),await O(X)}j(!1)}});return()=>{me.unsubscribe(),clearTimeout(J)}},[]),v.useEffect(()=>{(async()=>{if(!t||!i){d(!1),f(!1),k(!1);return}if(!b)try{const[H,me]=await Promise.all([km(t.id,i.id),bx(t.id,i.email)]);d(H),f(me),k(!1)}catch(H){console.error("Error checking user roles:",H),d(!1),f(!1),k(!0)}})()},[t,i,b]),v.useEffect(()=>{(async()=>{if(!i){y(!1);return}if(r0(i.email)){y(!0);return}try{const me=await _i(i.id);y(me)}catch(me){console.error("Error checking system admin status:",me),y(!1)}})()},[i]);const T=v.useCallback(async J=>{l(J),k(!1),J?(localStorage.setItem("voting_system_user",JSON.stringify(J)),await O(J)):(localStorage.removeItem("voting_system_user"),s([]),r(null),y(!1))},[O]),A=v.useCallback(J=>{r(J),k(!1),J?localStorage.setItem("voting_system_current_session",J.id):localStorage.removeItem("voting_system_current_session")},[]);v.useEffect(()=>{(async()=>{if(!i||n.length===0)return;const H=localStorage.getItem("voting_system_current_session");if(H){const me=n.find(Z=>Z.id===H);me&&r(me)}})()},[i,n]),v.useEffect(()=>{const J=()=>{const Z=window.location.hash;if(Z==="#"||Z===""){const K=window.location.pathname+window.location.search;window.history.replaceState(null,"",K)}};J();const H=()=>{J()},me=setInterval(J,500);return window.addEventListener("hashchange",H),()=>{clearInterval(me),window.removeEventListener("hashchange",H)}},[]);const L={currentSession:t,sessions:n,currentUser:i,isAdmin:u,isStakeholder:m,isSystemAdmin:p,isLoading:x,setCurrentSession:A,refreshSessions:O,setCurrentUser:T};return x?a.jsx("div",{className:"min-h-screen w-full bg-gray-50 flex items-center justify-center",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-[#2d4660] mx-auto mb-4"}),a.jsx("p",{className:"text-gray-600",children:"Loading..."})]})}):a.jsx(fE.Provider,{value:L,children:e})}function ba(){const e=v.useContext(fE);if(e===void 0)throw new Error("useSession must be used within a SessionProvider");return e}function jx(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function"){var s=0;for(n=Object.getOwnPropertySymbols(e);s<n.length;s++)t.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(e,n[s])&&(r[n[s]]=e[n[s]])}return r}function Uo(e,t,r,n){return new(r||(r=Promise))((function(s,i){function l(m){try{d(n.next(m))}catch(f){i(f)}}function u(m){try{d(n.throw(m))}catch(f){i(f)}}function d(m){var f;m.done?s(m.value):(f=m.value,f instanceof r?f:new r((function(p){p(f)}))).then(l,u)}d((n=n.apply(e,[])).next())}))}var cS,uS,dS,_h,fS,hS,mS,n0,pS,gS;function FR(e){return(e==null?void 0:e.errorCode)!==void 0}(function(e){e.Inline="inline",e.Desktop="desktop",e.Web="web"})(cS||(cS={})),(function(e){e.M365Content="m365content"})(uS||(uS={})),(function(e){e.DriveId="driveId",e.GroupId="groupId",e.SiteId="siteId",e.UserId="userId"})(dS||(dS={})),(function(e){e[e.NOT_SUPPORTED_ON_PLATFORM=100]="NOT_SUPPORTED_ON_PLATFORM",e[e.INTERNAL_ERROR=500]="INTERNAL_ERROR",e[e.NOT_SUPPORTED_IN_CURRENT_CONTEXT=501]="NOT_SUPPORTED_IN_CURRENT_CONTEXT",e[e.PERMISSION_DENIED=1e3]="PERMISSION_DENIED",e[e.NETWORK_ERROR=2e3]="NETWORK_ERROR",e[e.NO_HW_SUPPORT=3e3]="NO_HW_SUPPORT",e[e.INVALID_ARGUMENTS=4e3]="INVALID_ARGUMENTS",e[e.UNAUTHORIZED_USER_OPERATION=5e3]="UNAUTHORIZED_USER_OPERATION",e[e.INSUFFICIENT_RESOURCES=6e3]="INSUFFICIENT_RESOURCES",e[e.THROTTLE=7e3]="THROTTLE",e[e.USER_ABORT=8e3]="USER_ABORT",e[e.OPERATION_TIMED_OUT=8001]="OPERATION_TIMED_OUT",e[e.OLD_PLATFORM=9e3]="OLD_PLATFORM",e[e.FILE_NOT_FOUND=404]="FILE_NOT_FOUND",e[e.SIZE_EXCEEDED=1e4]="SIZE_EXCEEDED"})(_h||(_h={})),(function(e){e.GeoLocation="geolocation",e.Media="media"})(fS||(fS={})),(function(e){e.BCAIS="bcais",e.BCWAF="bcwaf",e.BCWBF="bcwbf"})(hS||(hS={})),(function(e){e.Faculty="faculty",e.Student="student",e.Other="other"})(mS||(mS={})),(function(e){e.Adult="adult",e.MinorNoParentalConsentRequired="minorNoParentalConsentRequired",e.MinorWithoutParentalConsent="minorWithoutParentalConsent",e.MinorWithParentalConsent="minorWithParentalConsent",e.NotAdult="notAdult",e.NonAdult="notAdult"})(n0||(n0={})),(function(e){e.HigherEducation="higherEducation",e.K12="k12",e.Other="other"})(pS||(pS={})),(function(e){e.TextPlain="text/plain",e.TextHtml="text/html",e.ImagePNG="image/png",e.ImageJPEG="image/jpeg"})(gS||(gS={}));var Bt,s0,i0,yS,vS,xS,wS,bS;(function(e){e.desktop="desktop",e.web="web",e.android="android",e.ios="ios",e.ipados="ipados",e.macos="macos",e.visionOS="visionOS",e.rigel="rigel",e.surfaceHub="surfaceHub",e.teamsRoomsWindows="teamsRoomsWindows",e.teamsRoomsAndroid="teamsRoomsAndroid",e.teamsPhones="teamsPhones",e.teamsDisplays="teamsDisplays"})(Bt||(Bt={})),(function(e){e.office="Office",e.outlook="Outlook",e.outlookWin32="OutlookWin32",e.orange="Orange",e.places="Places",e.teams="Teams",e.teamsModern="TeamsModern"})(s0||(s0={})),(function(e){e.settings="settings",e.content="content",e.authentication="authentication",e.remove="remove",e.task="task",e.sidePanel="sidePanel",e.stage="stage",e.meetingStage="meetingStage"})(i0||(i0={})),(function(e){e.copilotSidePanel="copilotSidePanel",e.copilotMainPane="copilotMainPane",e.copilotFullScreen="copilotFullScreen"})(yS||(yS={})),(function(e){e[e.Standard=0]="Standard",e[e.Edu=1]="Edu",e[e.Class=2]="Class",e[e.Plc=3]="Plc",e[e.Staff=4]="Staff"})(vS||(vS={})),(function(e){e[e.Admin=0]="Admin",e[e.User=1]="User",e[e.Guest=2]="Guest"})(xS||(xS={})),(function(e){e.Large="large",e.Medium="medium",e.Small="small"})(wS||(wS={})),(function(e){e.Regular="Regular",e.Private="Private",e.Shared="Shared"})(bS||(bS={}));const LR={errorCode:_h.NOT_SUPPORTED_ON_PLATFORM},zR={adaptiveCardSchemaVersion:{majorVersion:1,minorVersion:5}};var jS={randomUUID:typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};let Vf;const UR=new Uint8Array(16);function BR(){if(!Vf&&(Vf=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!Vf))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return Vf(UR)}const Qn=[];for(let e=0;e<256;++e)Qn.push((e+256).toString(16).slice(1));function WR(e,t=0){return Qn[e[t+0]]+Qn[e[t+1]]+Qn[e[t+2]]+Qn[e[t+3]]+"-"+Qn[e[t+4]]+Qn[e[t+5]]+"-"+Qn[e[t+6]]+Qn[e[t+7]]+"-"+Qn[e[t+8]]+Qn[e[t+9]]+"-"+Qn[e[t+10]]+Qn[e[t+11]]+Qn[e[t+12]]+Qn[e[t+13]]+Qn[e[t+14]]+Qn[e[t+15]]}function qR(e,t,r){if(jS.randomUUID&&!e)return jS.randomUUID();const n=(e=e||{}).random||(e.rng||BR)();return n[6]=15&n[6]|64,n[8]=63&n[8]|128,WR(n)}var VR=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function HR(e){return typeof e=="string"&&VR.test(e)}function hE(e,t){if(typeof e!="string"||typeof t!="string")return NaN;const r=e.split("."),n=t.split(".");function s(i){return/^\d+$/.test(i)}if(!r.every(s)||!n.every(s))return NaN;for(;r.length<n.length;)r.push("0");for(;n.length<r.length;)n.push("0");for(let i=0;i<r.length;++i)if(Number(r[i])!=Number(n[i]))return Number(r[i])>Number(n[i])?1:-1;return 0}function KR(){return qR()}function mE(e){return Object.keys(e).forEach((t=>{e[t]!==null&&e[t]!==void 0&&typeof e[t]=="object"&&mE(e[t])})),Object.freeze(e)}function GR(e,t,r){return new Promise(((n,s)=>{const i=setTimeout(s,t,r);e().then((l=>{clearTimeout(i),n(l)})).catch((l=>{clearTimeout(i),s(l)}))}))}function YR(e){return e.protocol==="https:"}function JR(){if(Nm())throw new Error("window object undefined at SSR check");return window}function Nm(){return typeof window>"u"}function XR(e){return new RegExp(`${/<script[^>]*>|&lt;script[^&]*&gt;|%3Cscript[^%]*%3E/gi.source}|${/<\/script[^>]*>|&lt;\/script[^&]*&gt;|%3C\/script[^%]*%3E/gi.source}`,"gi").test(e)}function QR(e){if(!e)throw new Error("id must not be empty");if(HR(e)===!1)throw new Error("id must be a valid UUID")}const ZR=!!performance&&"now"in performance;function Sx(){return ZR?performance.now()+performance.timeOrigin:void 0}function SS(e){var t,r;if(!(!((r=(t=e.hostVersionsInfo)===null||t===void 0?void 0:t.appEligibilityInformation)===null||r===void 0)&&r.ageGroup))return e;const n=e.hostVersionsInfo.appEligibilityInformation.ageGroup;return(n==null?void 0:n.toLowerCase())!=="nonadult"?e:Object.assign(Object.assign({},e),{hostVersionsInfo:Object.assign(Object.assign({},e.hostVersionsInfo),{appEligibilityInformation:Object.assign(Object.assign({},e.hostVersionsInfo.appEligibilityInformation),{ageGroup:n0.NotAdult})})})}let _d=class{constructor(t=KR()){this.uuid=t,QR(t)}toString(){return this.uuid}serialize(){return this.toString()}};const pE=e=>{const{uuid:t}=e,r=jx(e,["uuid"]),n=t==null?void 0:t.toString();return Object.assign(Object.assign({},r),{uuidAsString:n})},e$=e=>{const{uuidAsString:t}=e,r=jx(e,["uuidAsString"]);return Object.assign(Object.assign({},r),{uuid:t?new _d(t):void 0})};var a0={exports:{}},kS,NS;function t$(){if(NS)return kS;NS=1;var e=1e3,t=60*e,r=60*t,n=24*r,s=7*n,i=365.25*n;function l(u,d,m,f){var p=d>=1.5*m;return Math.round(u/m)+" "+f+(p?"s":"")}return kS=function(u,d){d=d||{};var m=typeof u;if(m==="string"&&u.length>0)return(function(f){if(!((f=String(f)).length>100)){var p=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(f);if(p){var y=parseFloat(p[1]);switch((p[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return y*i;case"weeks":case"week":case"w":return y*s;case"days":case"day":case"d":return y*n;case"hours":case"hour":case"hrs":case"hr":case"h":return y*r;case"minutes":case"minute":case"mins":case"min":case"m":return y*t;case"seconds":case"second":case"secs":case"sec":case"s":return y*e;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return y;default:return}}}})(u);if(m==="number"&&isFinite(u))return d.long?(function(f){var p=Math.abs(f);return p>=n?l(f,p,n,"day"):p>=r?l(f,p,r,"hour"):p>=t?l(f,p,t,"minute"):p>=e?l(f,p,e,"second"):f+" ms"})(u):(function(f){var p=Math.abs(f);return p>=n?Math.round(f/n)+"d":p>=r?Math.round(f/r)+"h":p>=t?Math.round(f/t)+"m":p>=e?Math.round(f/e)+"s":f+"ms"})(u);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(u))}}var r$=function(e){function t(s){let i,l,u,d=null;function m(...f){if(!m.enabled)return;const p=m,y=Number(new Date),x=y-(i||y);p.diff=x,p.prev=i,p.curr=y,i=y,f[0]=t.coerce(f[0]),typeof f[0]!="string"&&f.unshift("%O");let j=0;f[0]=f[0].replace(/%([a-zA-Z%])/g,((b,k)=>{if(b==="%%")return"%";j++;const _=t.formatters[k];if(typeof _=="function"){const E=f[j];b=_.call(p,E),f.splice(j,1),j--}return b})),t.formatArgs.call(p,f),(p.log||t.log).apply(p,f)}return m.namespace=s,m.useColors=t.useColors(),m.color=t.selectColor(s),m.extend=r,m.destroy=t.destroy,Object.defineProperty(m,"enabled",{enumerable:!0,configurable:!1,get:()=>d!==null?d:(l!==t.namespaces&&(l=t.namespaces,u=t.enabled(s)),u),set:f=>{d=f}}),typeof t.init=="function"&&t.init(m),m}function r(s,i){const l=t(this.namespace+(i===void 0?":":i)+s);return l.log=this.log,l}function n(s){return s.toString().substring(2,s.toString().length-2).replace(/\.\*\?$/,"*")}return t.debug=t,t.default=t,t.coerce=function(s){return s instanceof Error?s.stack||s.message:s},t.disable=function(){const s=[...t.names.map(n),...t.skips.map(n).map((i=>"-"+i))].join(",");return t.enable(""),s},t.enable=function(s){let i;t.save(s),t.namespaces=s,t.names=[],t.skips=[];const l=(typeof s=="string"?s:"").split(/[\s,]+/),u=l.length;for(i=0;i<u;i++)l[i]&&((s=l[i].replace(/\*/g,".*?"))[0]==="-"?t.skips.push(new RegExp("^"+s.slice(1)+"$")):t.names.push(new RegExp("^"+s+"$")))},t.enabled=function(s){if(s[s.length-1]==="*")return!0;let i,l;for(i=0,l=t.skips.length;i<l;i++)if(t.skips[i].test(s))return!1;for(i=0,l=t.names.length;i<l;i++)if(t.names[i].test(s))return!0;return!1},t.humanize=t$(),t.destroy=function(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")},Object.keys(e).forEach((s=>{t[s]=e[s]})),t.names=[],t.skips=[],t.formatters={},t.selectColor=function(s){let i=0;for(let l=0;l<s.length;l++)i=(i<<5)-i+s.charCodeAt(l),i|=0;return t.colors[Math.abs(i)%t.colors.length]},t.enable(t.load()),t},n$={};(function(e,t){t.formatArgs=function(n){if(n[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+n[0]+(this.useColors?"%c ":" ")+"+"+e.exports.humanize(this.diff),!this.useColors)return;const s="color: "+this.color;n.splice(1,0,s,"color: inherit");let i=0,l=0;n[0].replace(/%[a-zA-Z%]/g,(u=>{u!=="%%"&&(i++,u==="%c"&&(l=i))})),n.splice(l,0,s)},t.save=function(n){try{n?t.storage.setItem("debug",n):t.storage.removeItem("debug")}catch{}},t.load=function(){let n;try{n=t.storage.getItem("debug")}catch{}return!n&&typeof process<"u"&&"env"in process&&(n=n$.DEBUG),n},t.useColors=function(){return typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs)?!0:typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/)?!1:typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)},t.storage=(function(){try{return localStorage}catch{}})(),t.destroy=(()=>{let n=!1;return()=>{n||(n=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),t.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],t.log=console.debug||console.log||(()=>{}),e.exports=r$(t);const{formatters:r}=e.exports;r.j=function(n){try{return JSON.stringify(n)}catch(s){return"[UnexpectedJSONParseError]: "+s.message}}})(a0,a0.exports);var kx=a0.exports;const s$=new _d,i$=kx.debug.formatArgs;kx.debug.formatArgs=function(e){e[0]=`(${new Date().toISOString()}): ${e[0]} [${s$.toString()}]`,i$.call(this,e)};const a$=kx.debug("teamsJs");function ja(e){return a$.extend(e)}function en(e,t){return`${e}_${t}`}function gE(e){return/^v\d+_[\w.]+$/.test(e)}function Ro(e){return e.uuidAsString!==void 0?`${e.uuidAsString} (legacy id: ${e.id})`:e.uuid!==void 0?`${e.uuid.toString()} (legacy id: ${e.id})`:`legacy id: ${e.id} (no uuid)`}const o$=ja("flushMessageQueue");function yE(e,t,r,n){if(e&&t&&r.length!==0)for(;r.length>0;){const s=r.shift();if(s){const i=pE(s);o$("Flushing message %s from %s message queue via postMessage.",Ro(i),n),e.postMessage(i,t)}}}var l$=["teams.microsoft.com","teams.microsoft.us","gov.teams.microsoft.us","dod.teams.microsoft.us","int.teams.microsoft.com","outlook.office.com","outlook-sdf.office.com","outlook.office365.com","outlook-sdf.office365.com","outlook.office365.us","outlook-dod.office365.us","webmail.apps.mil","outlook.live.com","outlook-sdf.live.com","teams.live.com","local.teams.live.com","local.teams.live.com:8080","local.teams.office.com","local.teams.office.com:8080","devspaces.skype.com","*.www.office.com","www.office.com","word.office.com","excel.office.com","powerpoint.office.com","www.officeppe.com","*.www.microsoft365.com","www.microsoft365.com","bing.com","edgeservices.bing.com","work.bing.com","www.bing.com","www.staging-bing-int.com","*.cloud.microsoft","*.m365.cloud.microsoft","*.outlook.cloud.microsoft","chatuxmanager.svc.cloud.microsoft","copilot.microsoft.com","windows.msn.com","fa000000125.resources.office.net","fa000000129.resources.office.net","fa000000124.resources.office.net","fa000000128.resources.office.net","fa000000136.resources.office.net","fa000000125.officeapps.live.com","fa000000129.officeapps.live.com","fa000000124.officeapps.live.com","fa000000128.officeapps.live.com"];const _S="2.0.1",dh=l$,CS=1500,c$=new URL("https://res.cdn.office.net/teams-js/validDomains/json/validDomains.json"),u$=/^https:\/\//,ld="The library has not yet been initialized",d$="The runtime has not yet been initialized",f$="The runtime version is not supported";let kt=class{};kt.initializeCalled=!1,kt.initializeCompleted=!1,kt.additionalValidOrigins=[],kt.initializePromise=void 0,kt.isFramelessWindow=!1,kt.frameContext=void 0,kt.hostClientType=void 0,kt.printCapabilityEnabled=!1,kt.teamsJsInstanceId=new _d().toString();const vE=ja("runtime"),_m=4;function xE(e){return e.apiVersion===_m}function h$(e){if(xE(e))return!0;throw e.apiVersion===-1?new Error(d$):new Error(f$)}let pa={apiVersion:-1,supports:{}};const m$={supports:{appInstallDialog:{},appEntity:{},call:{},chat:{},conversations:{},dialog:{card:{bot:{}},url:{bot:{},parentCommunication:{}},update:{}},interactive:{},logs:{},meetingRoom:{},menus:{},monetization:{},notifications:{},pages:{config:{},backStack:{},fullTrust:{}},remoteCamera:{},teams:{fullTrust:{}},teamsCore:{},video:{sharedFrame:{}}}},wE=[Bt.desktop,Bt.web,Bt.rigel,Bt.surfaceHub,Bt.teamsRoomsWindows,Bt.teamsRoomsAndroid,Bt.teamsPhones,Bt.teamsDisplays],p$=[Bt.android,Bt.ios,Bt.ipados,Bt.visionOS],ES=[...wE,...p$];function g$(e){let t=e;if(t.apiVersion<_m&&y$.forEach((r=>{t.apiVersion===r.versionToUpgradeFrom&&(t=r.upgradeToNextVersion(t))})),xE(t))return t;throw new Error("Received a runtime that could not be upgraded to the latest version")}const y$=[{versionToUpgradeFrom:1,upgradeToNextVersion:e=>{var t;return{apiVersion:2,hostVersionsInfo:void 0,isLegacyTeams:e.isLegacyTeams,supports:Object.assign(Object.assign({},e.supports),{dialog:e.supports.dialog?{card:void 0,url:e.supports.dialog,update:(t=e.supports.dialog)===null||t===void 0?void 0:t.update}:void 0})}}},{versionToUpgradeFrom:2,upgradeToNextVersion:e=>{const t=e.supports,r=jx(t,["appNotification"]);return Object.assign(Object.assign({},e),{apiVersion:3,supports:r})}},{versionToUpgradeFrom:3,upgradeToNextVersion:e=>{var t,r,n,s,i;return{apiVersion:4,hostVersionsInfo:e.hostVersionsInfo,isNAAChannelRecommended:e.isNAAChannelRecommended,isLegacyTeams:e.isLegacyTeams,supports:Object.assign(Object.assign({},e.supports),{dialog:e.supports.dialog?{card:(t=e.supports.dialog)===null||t===void 0?void 0:t.card,url:{bot:(n=(r=e.supports.dialog)===null||r===void 0?void 0:r.url)===null||n===void 0?void 0:n.bot,parentCommunication:!((s=e.supports.dialog)===null||s===void 0)&&s.url?{}:void 0},update:(i=e.supports.dialog)===null||i===void 0?void 0:i.update}:void 0})}}}],v$={"1.0.0":[{capability:{pages:{appButton:{},tabs:{}},stageView:{}},hostClientTypes:wE}],"1.9.0":[{capability:{location:{}},hostClientTypes:ES}],"2.0.0":[{capability:{people:{}},hostClientTypes:ES},{capability:{sharing:{}},hostClientTypes:[Bt.desktop,Bt.web]}],"2.0.1":[{capability:{teams:{fullTrust:{joinedTeams:{}}}},hostClientTypes:[Bt.android,Bt.desktop,Bt.ios,Bt.teamsRoomsAndroid,Bt.teamsPhones,Bt.teamsDisplays,Bt.web]},{capability:{webStorage:{}},hostClientTypes:[Bt.desktop]}],"2.0.5":[{capability:{webStorage:{}},hostClientTypes:[Bt.android,Bt.ios]}],"2.0.8":[{capability:{sharing:{}},hostClientTypes:[Bt.android,Bt.ios]}],"2.1.1":[{capability:{nestedAppAuth:{}},hostClientTypes:[Bt.android,Bt.ios,Bt.ipados,Bt.visionOS]}],"2.1.2":[]},Qg=vE.extend("generateBackCompatRuntimeConfig");function bE(e,t){const r=Object.assign({},e);for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&(typeof t[n]!="object"||Array.isArray(t[n])?n in e||(r[n]=t[n]):r[n]=bE(e[n]||{},t[n]));return r}function x$(e,t,r){Qg("generating back compat runtime config for %s",e);let n=Object.assign({},t.supports);Qg("Supported capabilities in config before updating based on highestSupportedVersion: %o",n),Object.keys(r).forEach((i=>{hE(e,i)>=0&&r[i].forEach((l=>{kt.hostClientType!==void 0&&l.hostClientTypes.includes(kt.hostClientType)&&(n=bE(n,l.capability))}))}));const s={apiVersion:_m,hostVersionsInfo:zR,isLegacyTeams:!0,supports:n};return Qg("Runtime config after updating based on highestSupportedVersion: %o",s),s}const Zg=vE.extend("applyRuntimeConfig");function ey(e){typeof e.apiVersion=="string"&&(Zg("Trying to apply runtime with string apiVersion, processing as v1: %o",e),e=Object.assign(Object.assign({},e),{apiVersion:1})),Zg("Fast-forwarding runtime %o",e);const t=g$(e);Zg("Applying runtime %o",t),pa=mE(t)}function w$(e){return e!=null&&e.serialize!==void 0&&typeof e.serialize=="function"}const Ch="2.46.0";let Eh=class Sc{static storeCallbackInformation(t,r){Sc.callbackInformation.set(t,r)}static clearMessages(){Sc.callbackInformation.clear()}static deleteMessageInformation(t){Sc.callbackInformation.delete(t)}static handleOneWayPerformanceMetrics(t,r,n){const s=t.monotonicTimestamp;s&&n?US({actionName:t.func,messageDelay:n-s,requestStartedAt:s}):r("Unable to send performance metrics for event %s",t.func)}static handlePerformanceMetrics(t,r,n,s){const i=Sc.callbackInformation.get(t);i&&r.monotonicTimestamp&&s?(US({actionName:i.name,messageDelay:s-r.monotonicTimestamp,requestStartedAt:i.calledAt}),Sc.deleteMessageInformation(t)):n("Unable to send performance metrics for callback %s with arguments %o",t.toString(),r.args)}};Eh.callbackInformation=new Map;const jE=ja("nestedAppAuthUtils"),b$=jE.extend("tryPolyfillWithNestedAppAuthBridge"),j$="v2";function S$(e,t,r){var n;const s=b$;if(kt.isFramelessWindow)return void s("Cannot polyfill nestedAppAuthBridge as current window is frameless");if(!t)return void s("Cannot polyfill nestedAppAuthBridge as current window does not exist");if(t.parent!==t.top)return void s("Default NAA bridge injection not supported in nested iframe. Use standalone NAA bridge instead.");const i=(()=>{try{return JSON.parse(e)}catch{return null}})();if(!i||!(!((n=i.supports)===null||n===void 0)&&n.nestedAppAuth))return void s("Cannot polyfill nestedAppAuthBridge as current hub does not support nested app auth");const l=t;if(l.nestedAppAuthBridge)return void s("nestedAppAuthBridge already exists on current window, skipping polyfill");const u=(function(d,m){const f=k$;if(!d)return f("nestedAppAuthBridge cannot be created as current window does not exist"),null;const{onMessage:p,sendPostMessage:y}=m,x=j=>b=>p(b,j);return{addEventListener:(j,b)=>{j==="message"?d.addEventListener(j,x(b)):f(`Event ${j} is not supported by nestedAppAuthBridge`)},postMessage:j=>{const b=(()=>{try{return JSON.parse(j)}catch{return null}})();if(!b||typeof b!="object"||b.messageType!=="NestedAppAuthRequest")return void f("Unrecognized data format received by app, message being ignored. Message: %o",j);const k=en(j$,"nestedAppAuth.execute");y(j,k)},removeEventListener:(j,b)=>{d.removeEventListener(j,x(b))}}})(l,r);u&&(l.nestedAppAuthBridge=u)}const k$=jE.extend("createNestedAppAuthBridge");let Ao=[];const Io=ja("validateOrigin");let Hu;function N$(){return Uo(this,void 0,void 0,(function*(){Hu||(yield kE())}))}function SE(){return Ao.length===0}function kE(e=!1){return Uo(this,void 0,void 0,(function*(){if(!SE()&&!e)return Ao;if(Hu)return Hu;if(Nm())return Ao=dh,dh;{Io("Initiating fetch call to acquire valid origins list from CDN");const t=new AbortController,r=setTimeout((()=>t.abort()),CS);return Hu=fetch(c$,{signal:t.signal}).then((n=>{if(clearTimeout(r),!n.ok)throw new Error("Invalid Response from Fetch Call");return Io("Fetch call completed and retrieved valid origins list from CDN"),n.json().then((s=>{if((function(i){let l=JSON.parse(i);try{l=JSON.parse(i)}catch{return!1}if(!l.validOrigins)return!1;for(const u of l.validOrigins)try{new URL("https://"+u)}catch{return Io("isValidOriginsFromCDN call failed to validate origin: %s",u),!1}return!0})(JSON.stringify(s)))return Ao=s.validOrigins,Ao;throw new Error("Valid origins list retrieved from CDN is invalid")}))})).catch((n=>(n.name==="AbortError"?Io(`validOrigins fetch call to CDN failed due to Timeout of ${CS} ms. Defaulting to fallback list`):Io("validOrigins fetch call to CDN failed with error: %s. Defaulting to fallback list",n),Ao=dh,Ao))),Hu}}))}function AS(e,t){if(e.substring(0,2)==="*."){const r=e.substring(1);if(t.length>r.length&&t.split(".").length===r.split(".").length&&t.substring(t.length-r.length)===r)return!0}else if(e===t)return!0;return!1}function _$(e,t){const r=SE()?dh:Ao;return PS(e,r)?Promise.resolve(!0):(Io("Origin %s is not in the local valid origins list, fetching from CDN",e),kE(t).then((n=>PS(e,n))))}function PS(e,t){if(!YR(e))return Io("Origin %s is invalid because it is not using https protocol. Protocol being used: %s",e,e.protocol),!1;const r=e.host;if(t.some((n=>AS(n,r))))return!0;for(const n of kt.additionalValidOrigins)if(AS(n.substring(0,8)==="https://"?n.substring(8):n,r))return!0;return Io(`Origin %s is invalid because it is not an origin approved by this library or included in the call to app.initialize.
Origins approved by this library: %o
Origins included in app.initialize: %o`,e,t,kt.additionalValidOrigins),!1}N$();const Dl=ja("communication");let rt=class{},Vt=class{};function C$(e,t){if(Vt.messageListener=r=>(function(n){return Uo(this,void 0,void 0,(function*(){if(!n||!n.data||typeof n.data!="object")return void OS("Unrecognized message format received by app, message being ignored. Message: %o",n);const s=n.source||n.originalEvent&&n.originalEvent.source,i=n.origin||n.originalEvent&&n.originalEvent.origin;return CE(s,i).then((l=>{l?((function(u,d){kt.isFramelessWindow||rt.parentWindow&&!rt.parentWindow.closed&&u!==rt.parentWindow||(rt.parentWindow=u,rt.parentOrigin=d),rt.parentWindow&&rt.parentWindow.closed&&(rt.parentWindow=null,rt.parentOrigin=null),yE(rt.parentWindow,rt.parentOrigin,Vt.parentMessageQueue,"parent")})(s,i),s!==rt.parentWindow?PM():IS(n)):OS("Message being ignored by app because it is either coming from the current window or a different window with an invalid origin, message: %o, source: %o, origin: %o",n,s,i)}))}))})(r),rt.currentWindow=rt.currentWindow||JR(),rt.parentWindow=rt.currentWindow.parent!==rt.currentWindow.self?rt.currentWindow.parent:rt.currentWindow.opener,rt.topWindow=rt.currentWindow.top,(rt.parentWindow||e)&&rt.currentWindow.addEventListener("message",Vt.messageListener,!1),!rt.parentWindow){const r=rt.currentWindow;if(!r.nativeInterface)return Promise.reject(new Error("Initialization Failed. No Parent window found."));kt.isFramelessWindow=!0,r.onNativeMessage=IS}try{return rt.parentOrigin="*",Cm(t,"initialize",[Ch,_m,e]).then((([r,n,s,i])=>(S$(i,rt.currentWindow,{onMessage:M$,sendPostMessage:I$}),{context:r,clientType:n,runtimeConfig:s,clientSupportedSDKVersion:i})))}finally{rt.parentOrigin=null}}function E$(e,t,...r){return Cm(e,t,r).then((([n])=>n))}function A$(e,t,r,...n){return Cm(e,t,n).then((([s,i])=>{if(!s)throw new Error(i||r)}))}function Cm(e,t,r=void 0){if(!gE(e))throw Error(`apiVersionTag: ${e} passed in doesn't follow the pattern starting with 'v' followed by digits, then underscore with words, please check.`);return new Promise((n=>{const s=_E(e,t,r);var i;n((i=s.uuid,new Promise((l=>{Vt.promiseCallbacks.set(i,l)}))))}))}function P$(e){return e.map((t=>w$(t)?t.serialize():t))}function O$(e,t,r,n,s){var i;return Uo(this,void 0,void 0,(function*(){const l=P$(t),[u]=yield Cm(n,e,l);if(FR(u))throw new Error(`${u.errorCode}, message: ${(i=u.message)!==null&&i!==void 0?i:"None"}`);if(r.validate(u))return r.deserialize(u);throw new Error(`${_h.INTERNAL_ERROR}, message: Invalid response from host - ${JSON.stringify(u)}`)}))}function Ji(e,t,r,n){let s;if(r instanceof Function?n=r:r instanceof Array&&(s=r),!gE(e))throw Error(`apiVersionTag: ${e} passed in doesn't follow the pattern starting with 'v' followed by digits, then underscore with words, please check.`);const i=_E(e,t,s);n&&Vt.callbacks.set(i.uuid,n)}Vt.parentMessageQueue=[],Vt.topMessageQueue=[],Vt.nextMessageId=0,Vt.callbacks=new Map,Vt.promiseCallbacks=new Map,Vt.portCallbacks=new Map,Vt.legacyMessageIdsToUuidMap={};const T$=Dl.extend("sendNestedAuthRequestToTopWindow");function I$(e,t){const r=T$,n=rt.topWindow,s=(function(i,l){const u=Vt.nextMessageId++,d=new _d;return Vt.legacyMessageIdsToUuidMap[u]=d,{id:u,uuid:d,func:"nestedAppAuth.execute",timestamp:Date.now(),monotonicTimestamp:Sx(),apiVersionTag:l,args:[],data:i}})(e,t);return r("Message %s information: %o",Ro(s),{actionName:s.func}),NE(n,s)}const D$=Dl.extend("sendRequestToTargetWindowHelper");function NE(e,t){const r=D$,n=(function(i){return i===rt.topWindow&&o0()?"top":i===rt.parentWindow?"parent":null})(e),s=pE(t);if(kt.isFramelessWindow)rt.currentWindow&&rt.currentWindow.nativeInterface&&(r("Sending message %s to %s via framelessPostMessage interface",Ro(s),n),rt.currentWindow.nativeInterface.framelessPostMessage(JSON.stringify(s)));else{const i=(function(l){return l===rt.topWindow&&o0()?rt.topOrigin:l===rt.parentWindow?rt.parentOrigin:null})(e);e&&i?(r("Sending message %s to %s via postMessage",Ro(s),n),e.postMessage(s,i)):(r("Adding message %s to %s message queue",Ro(s),n),F$(e).push(t))}return t}const R$=Dl.extend("sendMessageToParentHelper");function _E(e,t,r,n,s){const i=R$,l=rt.parentWindow,u=(function(d,m,f,p,y){const x=Vt.nextMessageId++,j=new _d;Vt.legacyMessageIdsToUuidMap[x]=j;const b=kt.teamsJsInstanceId;return{id:x,uuid:j,func:m,timestamp:Date.now(),monotonicTimestamp:Sx(),args:f||[],apiVersionTag:d,isProxiedFromChild:p!=null,teamsJsInstanceId:b}})(e,t,r,n);return Eh.storeCallbackInformation(u.uuid,{name:t,calledAt:u.timestamp}),i("Message %s information: %o",Ro(u),{actionName:t,args:r}),NE(l,u)}const OS=Dl.extend("processIncomingMessage"),$$=Dl.extend("processAuthBridgeMessage");function M$(e,t){var r,n;const s=$$;if(!e||!e.data||typeof e.data!="object")return void s("Unrecognized message format received by app, message being ignored. Message: %o",e);const{args:i}=e.data,[,l]=i??[],u=(()=>{try{return JSON.parse(l)}catch{return null}})();if(!u||typeof u!="object"||u.messageType!=="NestedAppAuthResponse")return void s("Unrecognized data format received by app, message being ignored. Message: %o",e);const d=e.source||((r=e==null?void 0:e.originalEvent)===null||r===void 0?void 0:r.source),m=e.origin||((n=e==null?void 0:e.originalEvent)===null||n===void 0?void 0:n.origin);d?CE(d,m)?(rt.topWindow&&!rt.topWindow.closed&&d!==rt.topWindow||(rt.topWindow=d,rt.topOrigin=m),rt.topWindow&&rt.topWindow.closed&&(rt.topWindow=null,rt.topOrigin=null),yE(rt.topWindow,rt.topOrigin,Vt.topMessageQueue,"top"),t(l)):s("Message being ignored by app because it is either coming from the current window or a different window with an invalid origin"):s("Message being ignored by app because it is coming for a target that is null")}const ty=Dl.extend("shouldProcessIncomingMessage");function CE(e,t){return Uo(this,void 0,void 0,(function*(){if(rt.currentWindow&&e===rt.currentWindow)return ty("Should not process message because it is coming from the current window"),!1;if(rt.currentWindow&&rt.currentWindow.location&&t&&t===rt.currentWindow.location.origin)return!0;{let r;try{r=new URL(t)}catch{return ty("Message has an invalid origin of %s",t),!1}const n=yield _$(r);return n||ty("Message has an invalid origin of %s",t),n}}))}const TS=Dl.extend("handleIncomingMessageFromParent");function fh(e,t){if(t){const r=[...e].find((([n,s])=>n.toString()===t.toString()));if(r)return r[0]}}function ry(e,t){const r=fh(t,e.uuid);r&&t.delete(r),e.uuid?Vt.legacyMessageIdsToUuidMap={}:delete Vt.legacyMessageIdsToUuidMap[e.id]}function IS(e){const t=TS,r=Sx();if("id"in e.data&&typeof e.data.id=="number"){const n=e.data,s=e$(n),i=(function(l){const u=TS;if(!l.uuid)return Vt.legacyMessageIdsToUuidMap[l.id];{const d=l.uuid,m=fh(Vt.callbacks,d);if(m)return m;const f=fh(Vt.promiseCallbacks,d);if(f)return f;const p=fh(Vt.portCallbacks,d);if(p)return p}u("Received message %s that failed to produce a callbackId",Ro(l))})(s);if(i){const l=Vt.callbacks.get(i);t("Received a response from parent for message %s",i.toString()),Eh.handlePerformanceMetrics(i,s,t,r),l&&(t("Invoking the registered callback for message %s with arguments %o",i.toString(),s.args),l.apply(null,[...s.args,s.isPartialResponse]),(function(m){return m.data.isPartialResponse===!0})(e)||(t("Removing registered callback for message %s",i.toString()),ry(s,Vt.callbacks)));const u=Vt.promiseCallbacks.get(i);u&&(t("Invoking the registered promise callback for message %s with arguments %o",i.toString(),s.args),u(s.args),t("Removing registered promise callback for message %s",i.toString()),ry(s,Vt.promiseCallbacks));const d=Vt.portCallbacks.get(i);if(d){let m;t("Invoking the registered port callback for message %s with arguments %o",i.toString(),s.args),e.ports&&e.ports[0]instanceof MessagePort&&(m=e.ports[0]),d(m,s.args),t("Removing registered port callback for message %s",i.toString()),ry(s,Vt.portCallbacks)}s.uuid&&(Vt.legacyMessageIdsToUuidMap={})}}else if("func"in e.data&&typeof e.data.func=="string"){const n=e.data;Eh.handleOneWayPerformanceMetrics(n,t,r),t('Received a message from parent %s, action: "%s"',Ro(n),n.func),SM(n.func,n.args)}else t("Received an unknown message: %O",e)}function o0(){return rt.topWindow!==rt.parentWindow}function F$(e){return e===rt.topWindow&&o0()?Vt.topMessageQueue:e===rt.parentWindow?Vt.parentMessageQueue:[]}const EE=ja("internal"),L$=EE.extend("ensureInitializeCalled"),z$=EE.extend("ensureInitialized");function AE(){if(!kt.initializeCalled)throw L$(ld),new Error(ld)}function Yc(e,...t){if(!kt.initializeCompleted)throw z$("%s. initializeCalled: %s",ld,kt.initializeCalled.toString()),new Error(ld);if(t&&t.length>0){let r=!1;for(let n=0;n<t.length;n++)if(t[n]===kt.frameContext){r=!0;break}if(!r)throw new Error(`This call is only allowed in following contexts: ${JSON.stringify(t)}. Current context: "${kt.frameContext}".`)}return h$(e)}function U$(e){let t=kt.additionalValidOrigins.concat(e.filter((n=>typeof n=="string"&&u$.test(n))));const r={};t=t.filter((n=>!r[n]&&(r[n]=!0,!0))),kt.additionalValidOrigins=t}function B$(e){if(!q$(e))throw new Error(`Potential app id (${e}) is invalid; its length ${e.length} is not within the length limits (${PE}-${OE}).`)}function W$(e){if(XR(e))throw new Error(`Potential app id (${e}) is invalid; it contains script tags.`);if(V$(e))throw new Error(`Potential app id (${e}) is invalid; it contains non-printable characters.`)}const PE=4,OE=256;function q$(e){return e.length<OE&&e.length>PE}function V$(e){return[...e].some((t=>{const r=t.charCodeAt(0);return r<32||r>126}))}let H$=class{constructor(t){this.idAsString=t,W$(t)}serialize(){return this.toString()}toString(){return this.idAsString}},K$=class extends H${constructor(t){super(t),B$(t)}toJSON(){return{appIdAsString:this.toString()}}};function TE(e){return e==null}const Em="v2",ny=ja("app"),DS={Success:"appInitialization.success"};var RS,$S;function G$(e){return hM(en(Em,"app.initialize"),e)}function Y$(){return new Promise((e=>{AE(),e(E$(en(Em,"app.getContext"),"getContext"))})).then((e=>(function(t){var r;return{actionInfo:t.actionInfo,app:{locale:t.locale,sessionId:t.appSessionId?t.appSessionId:"",theme:t.theme?t.theme:"default",iconPositionVertical:t.appIconPosition,osLocaleInfo:t.osLocaleInfo,messageId:t.messageId,parentMessageId:t.parentMessageId,userClickTime:t.userClickTime,userClickTimeV2:t.userClickTimeV2,userFileOpenPreference:t.userFileOpenPreference,host:{name:t.hostName?t.hostName:s0.teams,clientType:t.hostClientType?t.hostClientType:Bt.web,sessionId:t.sessionId?t.sessionId:"",ringId:t.ringId},appLaunchId:t.appLaunchId,appId:t.appId?new K$(t.appId):void 0,manifestVersion:t.manifestVersion},page:{id:t.entityId,frameContext:t.frameContext?t.frameContext:kt.frameContext,renderingSurface:t.renderingSurface?t.renderingSurface:void 0,subPageId:t.subEntityId,isFullScreen:t.isFullScreen,isMultiWindow:t.isMultiWindow,isBackgroundLoad:t.isBackgroundLoad,sourceOrigin:t.sourceOrigin},user:{id:(r=t.userObjectId)!==null&&r!==void 0?r:"",displayName:t.userDisplayName,isCallingAllowed:t.isCallingAllowed,isPSTNCallingAllowed:t.isPSTNCallingAllowed,licenseType:t.userLicenseType,loginHint:t.loginHint,userPrincipalName:t.userPrincipalName,tenant:t.tid?{id:t.tid,teamsSku:t.tenantSKU}:void 0},channel:t.channelId?{id:t.channelId,displayName:t.channelName,relativeUrl:t.channelRelativeUrl,membershipType:t.channelType,defaultOneNoteSectionId:t.defaultOneNoteSectionId,ownerGroupId:t.hostTeamGroupId,ownerTenantId:t.hostTeamTenantId}:void 0,chat:t.chatId?{id:t.chatId}:void 0,meeting:t.meetingId?{id:t.meetingId}:void 0,sharepoint:t.sharepoint,team:t.teamId?{internalId:t.teamId,displayName:t.teamName,type:t.teamType,groupId:t.groupId,templateId:t.teamTemplateId,isArchived:t.isTeamArchived,userRole:t.userTeamRole}:void 0,sharePointSite:t.teamSiteUrl||t.teamSiteDomain||t.teamSitePath||t.mySitePath||t.mySiteDomain?{teamSiteUrl:t.teamSiteUrl,teamSiteDomain:t.teamSiteDomain,teamSitePath:t.teamSitePath,teamSiteId:t.teamSiteId,mySitePath:t.mySitePath,mySiteDomain:t.mySiteDomain}:void 0,dialogParameters:t.dialogParameters||{}}})(e)))}function J$(){return mM(en(Em,"app.notifySuccess"))}function X$(e){pM(en(Em,"app.registerOnThemeChangeHandler"),e)}(function(e){e.AuthFailed="AuthFailed",e.Timeout="Timeout",e.Other="Other"})(RS||(RS={})),(function(e){e.PermissionError="PermissionError",e.NotFound="NotFound",e.Throttling="Throttling",e.Offline="Offline",e.Other="Other"})($S||($S={})),ny("teamsjs instance is version %s, starting at %s UTC (%s local)",Ch,new Date().toISOString(),new Date().toLocaleString()),(function(){if(Nm())return;const e=document.getElementsByTagName("script"),t=e&&e[e.length-1]&&e[e.length-1].src,r="Today, teamsjs can only be used from a single script or you may see undefined behavior. This log line is used to help detect cases where teamsjs is loaded multiple times -- it is always written. The presence of the log itself does not indicate a multi-load situation, but multiples of these log lines will. If you would like to use teamjs from more than one script at the same time, please open an issue at https://github.com/OfficeDev/microsoft-teams-library-js/issues";t&&t.length!==0?ny("teamsjs is being used from %s. %s",t,r):ny("teamsjs is being used from a script tag embedded directly in your html. %s",r)})();const Q$="v2",Z$=[];function eM(e){kt.frameContext&&(kt.frameContext===i0.task?Z$.push(e):kM("messageForChild"))}function tM(){vl(en(Q$,"dialog.registerMessageForChildHandler"),"messageForChild",eM,!1)}const Pc="v2";var MS,FS;(function(e){e[e.ifRoom=0]="ifRoom",e[e.overflowOnly=1]="overflowOnly"})(MS||(MS={}));function rM(){vl(en(Pc,"menus.registerNavBarMenuItemPressHandler"),"navBarMenuItemPress",sM,!1),vl(en(Pc,"menus.registerActionMenuItemPressHandler"),"actionMenuItemPress",iM,!1),vl(en(Pc,"menus.registerSetModuleViewHandler"),"setModuleView",nM,!1)}function nM(e){Yc(pa),Ji(en(Pc,"menus.handleViewConfigItemPress"),"viewConfigItemPress",[e])}function sM(e){Yc(pa),Ji(en(Pc,"menus.handleNavBarMenuItemPress"),"handleNavBarMenuItemPress",[e])}function iM(e){Yc(pa),Ji(en(Pc,"menus.handleActionMenuItemPress"),"handleActionMenuItemPress",[e])}(function(e){e.dropDown="dropDown",e.popOver="popOver"})(FS||(FS={}));class aM{}let oM=class extends aM{validate(t){return!0}deserialize(t){return t}};function lM(){vl(en(kl,"pages.config.registerSettingsSaveHandler"),"settings.save",cM,!1),vl(en(kl,"pages.config.registerSettingsRemoveHandler"),"settings.remove",dM,!1)}function cM(e){new uM(e).notifySuccess()}let uM=class{constructor(t){this.notified=!1,this.result=t||{}}notifySuccess(){this.ensureNotNotified(),Ji(en(kl,"pages.saveEvent.notifySuccess"),"settings.save.success"),this.notified=!0}notifyFailure(t){this.ensureNotNotified(),Ji(en(kl,"pages.saveEvent.notifyFailure"),"settings.save.failure",[t]),this.notified=!0}ensureNotNotified(){if(this.notified)throw new Error("The SaveEvent may only notify success or failure once.")}};function dM(){new fM().notifySuccess()}let fM=class{constructor(){this.notified=!1}notifySuccess(){this.ensureNotNotified(),Ji(en(kl,"pages.removeEvent.notifySuccess"),"settings.remove.success"),this.notified=!0}notifyFailure(t){this.ensureNotNotified(),Ji(en(kl,"pages.removeEvent.notifyFailure"),"settings.remove.failure",[t]),this.notified=!0}ensureNotNotified(){if(this.notified)throw new Error("The removeEventType may only notify success or failure once.")}};const IE=ja("app");function hM(e,t){return Nm()?(IE.extend("initialize")("window object undefined at initialization"),Promise.resolve()):GR((()=>(function(r,n){return new Promise((s=>{kt.initializeCalled||(kt.initializeCalled=!0,jM(),kt.initializePromise=C$(n,r).then((({context:i,clientType:l,runtimeConfig:u,clientSupportedSDKVersion:d=_S})=>{kt.frameContext=i,kt.hostClientType=l,kt.clientSupportedSDKVersion=d;try{Iu("Parsing %s",u);let m=JSON.parse(u);if(Iu("Checking if %o is a valid runtime object",m??"null"),!m||!m.apiVersion)throw new Error("Received runtime config is invalid");m=SS(m),u&&ey(m)}catch(m){if(!(m instanceof SyntaxError))throw m;try{Iu("Attempting to parse %s as an SDK version",u),isNaN(hE(u,_S))||(kt.clientSupportedSDKVersion=u);let f=JSON.parse(d);if(Iu("givenRuntimeConfig parsed to %o",f??"null"),!f)throw new Error("givenRuntimeConfig string was successfully parsed. However, it parsed to value of null");f=SS(f),ey(f)}catch(f){if(!(f instanceof SyntaxError))throw f;ey(x$(kt.clientSupportedSDKVersion,m$,v$))}}kt.initializeCompleted=!0})),rM(),lM(),tM()),Array.isArray(n)&&U$(n),kt.initializePromise!==void 0?s(kt.initializePromise):Iu("GlobalVars.initializePromise is unexpectedly undefined")}))})(e,t)),6e4,new Error("SDK initialization timed out."))}function mM(e){return Uo(this,void 0,void 0,(function*(){if(kt.initializeCompleted)return LS(e);if(!kt.initializePromise)throw new Error(ld);return kt.initializePromise.then((()=>LS(e)))}))}function LS(e){return Uo(this,void 0,void 0,(function*(){return Yc(pa)&&(!((t=pa.supports.app)===null||t===void 0)&&t.notifySuccessResponse)?O$(DS.Success,[Ch],new oM,e).then((()=>({hasFinishedSuccessfully:!0}))):(Ji(e,DS.Success,[Ch]),{hasFinishedSuccessfully:"unknown"});var t}))}const Iu=IE.extend("initializeHelper");function pM(e,t){!TE(t)&&AE(),NM(e,t)}function gM(){return vM(en(kl,"pages.backStack.navigateBack"))}function yM(){return!(!Yc(pa)||!pa.supports.pages)&&!!pa.supports.pages.backStack}const kl="v2";function vM(e){return new Promise((t=>{if(Yc(pa),!yM())throw LR;t(A$(e,"navigateBack","Back navigation is not supported in the current client or context."))}))}function xM(){vl(en("v2","pages.backStack.registerBackButtonPressHandler"),"backButtonPress",wM,!1)}function wM(){gM()}const bM=ja("handlers");let kr=class da{static initializeHandlers(){da.handlers.themeChange=_M,da.handlers.load=CM,da.handlers.beforeUnload=EM,xM()}static uninitializeHandlers(){da.handlers={},da.themeChangeHandler=null,da.loadHandler=null,da.beforeUnloadHandler=null,da.beforeSuspendOrTerminateHandler=null,da.resumeHandler=null}};function jM(){kr.initializeHandlers()}kr.handlers={},kr.themeChangeHandler=null,kr.loadHandler=null,kr.beforeUnloadHandler=null,kr.beforeSuspendOrTerminateHandler=null,kr.resumeHandler=null,kr.hostToAppPerformanceMetricsHandler=null;const zS=bM.extend("callHandler");function SM(e,t){const r=kr.handlers[e];return r?(zS("Invoking the registered handler for message %s with arguments %o",e,t),[!0,r.apply(this,t)]):(zS("Handler for action message %s not found.",e),[!1,void 0])}function vl(e,t,r,n=!0,s=[]){r?(kr.handlers[t]=r,n&&Ji(e,"registerHandler",[t,...s])):delete kr.handlers[t]}function kM(e){delete kr.handlers[e]}function NM(e,t){kr.themeChangeHandler=t,!TE(t)&&Ji(e,"registerHandler",["themeChange"])}function _M(e){kr.themeChangeHandler&&kr.themeChangeHandler(e)}function US(e){kr.hostToAppPerformanceMetricsHandler&&kr.hostToAppPerformanceMetricsHandler(e)}function CM(e){const t={entityId:(r=e).entityId,contentUrl:new URL(r.contentUrl)};var r;kr.resumeHandler?(kr.resumeHandler(t),BS()):kr.loadHandler&&(kr.loadHandler(e),BS())}function EM(){return Uo(this,void 0,void 0,(function*(){const e=()=>{Ji(en("v2","handleBeforeUnload"),"readyToUnload",[])};kr.beforeSuspendOrTerminateHandler?(yield kr.beforeSuspendOrTerminateHandler(),e()):kr.beforeUnloadHandler&&kr.beforeUnloadHandler(e)||e()}))}const AM=ja("childProxyingCommunication");function BS(){return!1}function PM(e,t){return!1}AM.extend("handleIncomingMessageFromChild");const OM=v.createContext({inTeams:!1,teamsContext:null,isInitialized:!1,teamsTheme:null}),TM=({children:e})=>{const[t,r]=v.useState(!1),[n,s]=v.useState(null),[i,l]=v.useState(!1),[u,d]=v.useState(null);return v.useEffect(()=>{(async()=>{try{if(new URLSearchParams(window.location.search).get("inTeams")==="true"||window.parent!==window){console.log(" Initializing Teams SDK..."),await G$();const y=await Y$();console.log(" Teams context:",y),r(!0),s(y),d(y.app.theme),X$(x=>{d(x)}),J$()}}catch(f){console.error(" Teams initialization error:",f),r(!1)}finally{l(!0)}})()},[]),a.jsx(OM.Provider,{value:{inTeams:t,teamsContext:n,isInitialized:i,teamsTheme:u},children:e})},IM="service_idsx5cg",DM="template_4owif48",RM="OXfL2jaTJuDR5IThS";async function Nl(e){var t;try{const r=await fetch("https://api.emailjs.com/api/v1.0/email/send",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({service_id:IM,template_id:DM,user_id:RM,template_params:{email:e.to,to_email:e.to,to_name:e.to.split("@")[0],subject:e.subject,message_html:e.html||e.text||"",message_text:e.text||((t=e.html)==null?void 0:t.replace(/<[^>]*>/g,""))||""}})});if(!r.ok){const s=await r.text();console.error("EmailJS API error:",r.status,s);let i=`EmailJS API error: ${r.status}`;try{const l=JSON.parse(s);l.text?i=l.text:l.message?i=l.message:l.error&&(i=l.error)}catch{i=s||i}throw new Error(i)}let n;try{const s=await r.text();if(s==="OK"||s.trim()==="OK"){console.log("Email sent successfully via EmailJS");return}n=JSON.parse(s),console.log("Email sent successfully via EmailJS:",n)}catch(s){if(r.ok){console.log("Email sent successfully via EmailJS (non-JSON response)");return}throw s}return}catch(r){throw console.error("sendInvitationEmail error:",r),r.message?r:new Error(`Failed to send email: ${r.toString()}`)}}/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $M=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),MM=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(t,r,n)=>n?n.toUpperCase():r.toLowerCase()),WS=e=>{const t=MM(e);return t.charAt(0).toUpperCase()+t.slice(1)},DE=(...e)=>e.filter((t,r,n)=>!!t&&t.trim()!==""&&n.indexOf(t)===r).join(" ").trim(),FM=e=>{for(const t in e)if(t.startsWith("aria-")||t==="role"||t==="title")return!0};/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var LM={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zM=v.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:r=2,absoluteStrokeWidth:n,className:s="",children:i,iconNode:l,...u},d)=>v.createElement("svg",{ref:d,...LM,width:t,height:t,stroke:e,strokeWidth:n?Number(r)*24/Number(t):r,className:DE("lucide",s),...!i&&!FM(u)&&{"aria-hidden":"true"},...u},[...l.map(([m,f])=>v.createElement(m,f)),...Array.isArray(i)?i:[i]]));/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xt=(e,t)=>{const r=v.forwardRef(({className:n,...s},i)=>v.createElement(zM,{ref:i,iconNode:t,className:DE(`lucide-${$M(WS(e))}`,`lucide-${e}`,n),...s}));return r.displayName=WS(e),r};/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UM=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],qS=xt("arrow-left",UM);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BM=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],WM=xt("arrow-right",BM);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qM=[["path",{d:"M3.85 8.62a4 4 0 0 1 4.78-4.77 4 4 0 0 1 6.74 0 4 4 0 0 1 4.78 4.78 4 4 0 0 1 0 6.74 4 4 0 0 1-4.77 4.78 4 4 0 0 1-6.75 0 4 4 0 0 1-4.78-4.77 4 4 0 0 1 0-6.76Z",key:"3c2336"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],l0=xt("badge-check",qM);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VM=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],Zr=xt("calendar",VM);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HM=[["path",{d:"M5 21v-6",key:"1hz6c0"}],["path",{d:"M12 21V3",key:"1lcnhd"}],["path",{d:"M19 21V9",key:"unv183"}]],hh=xt("chart-no-axes-column",HM);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KM=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],ts=xt("chevron-down",KM);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GM=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],Cd=xt("chevron-left",GM);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YM=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],JM=xt("chevron-up",YM);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XM=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],Ht=xt("circle-alert",XM);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QM=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],sr=xt("circle-check-big",QM);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZM=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],Am=xt("clock",ZM);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eF=[["path",{d:"M11.562 3.266a.5.5 0 0 1 .876 0L15.39 8.87a1 1 0 0 0 1.516.294L21.183 5.5a.5.5 0 0 1 .798.519l-2.834 10.246a1 1 0 0 1-.956.734H5.81a1 1 0 0 1-.957-.734L2.02 6.02a.5.5 0 0 1 .798-.519l4.276 3.664a1 1 0 0 0 1.516-.294z",key:"1vdc57"}],["path",{d:"M5 21h14",key:"11awu3"}]],vs=xt("crown",eF);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tF=[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]],rF=xt("database",tF);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nF=[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]],VS=xt("ellipsis-vertical",nF);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sF=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]],iF=xt("funnel",sF);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aF=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],Ku=xt("info",aF);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oF=[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]],Nx=xt("lightbulb",oF);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lF=[["path",{d:"M3 5h.01",key:"18ugdj"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 19h.01",key:"noohij"}],["path",{d:"M8 5h13",key:"1pao27"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 19h13",key:"m83p4d"}]],ei=xt("list",lF);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cF=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],uF=xt("lock",cF);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dF=[["path",{d:"m10 17 5-5-5-5",key:"1bsop3"}],["path",{d:"M15 12H3",key:"6jk70r"}],["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}]],fF=xt("log-in",dF);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hF=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],Vn=xt("log-out",hF);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mF=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],Jc=xt("mail",mF);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pF=[["path",{d:"M5 12h14",key:"1ays0h"}]],Gu=xt("minus",pF);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gF=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]],RE=xt("pencil",gF);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yF=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],Un=xt("plus",yF);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vF=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],_l=xt("refresh-cw",vF);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xF=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],HS=xt("search",xF);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wF=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],An=xt("settings",wF);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bF=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],KS=xt("shield-check",bF);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jF=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],Bn=xt("shield",jF);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SF=[["path",{d:"m18 14 4 4-4 4",key:"10pe0f"}],["path",{d:"m18 2 4 4-4 4",key:"pucp1d"}],["path",{d:"M2 18h1.973a4 4 0 0 0 3.3-1.7l5.454-8.6a4 4 0 0 1 3.3-1.7H22",key:"1ailkh"}],["path",{d:"M2 6h1.972a4 4 0 0 1 3.6 2.2",key:"km57vx"}],["path",{d:"M22 18h-6.041a4 4 0 0 1-3.3-1.8l-.359-.45",key:"os18l9"}]],kF=xt("shuffle",SF);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NF=[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]],pc=xt("sparkles",NF);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _F=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],td=xt("square-pen",_F);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CF=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]],c0=xt("square",CF);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EF=[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]],gc=xt("star",EF);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AF=[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]],PF=xt("tag",AF);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OF=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],Xi=xt("trash-2",OF);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TF=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],$E=xt("triangle-alert",TF);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IF=[["path",{d:"M10 14.66v1.626a2 2 0 0 1-.976 1.696A5 5 0 0 0 7 21.978",key:"1n3hpd"}],["path",{d:"M14 14.66v1.626a2 2 0 0 0 .976 1.696A5 5 0 0 1 17 21.978",key:"rfe1zi"}],["path",{d:"M18 9h1.5a1 1 0 0 0 0-5H18",key:"7xy6bh"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M6 9a6 6 0 0 0 12 0V3a1 1 0 0 0-1-1H7a1 1 0 0 0-1 1z",key:"1mhfuq"}],["path",{d:"M6 9H4.5a1 1 0 0 1 0-5H6",key:"tex48p"}]],ME=xt("trophy",IF);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DF=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]],xl=xt("user-plus",DF);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RF=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"17",x2:"22",y1:"8",y2:"13",key:"3nzzx3"}],["line",{x1:"22",x2:"17",y1:"8",y2:"13",key:"1swrse"}]],Du=xt("user-x",RF);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $F=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],gs=xt("user",$F);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MF=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],ns=xt("users",MF);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FF=[["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}],["path",{d:"M5 7c0-1.1.9-2 2-2h10a2 2 0 0 1 2 2v12H5V7Z",key:"1ezoue"}],["path",{d:"M22 19H2",key:"nuriw5"}]],Zn=xt("vote",FF);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LF=[["rect",{width:"8",height:"8",x:"3",y:"3",rx:"2",key:"by2w9f"}],["path",{d:"M7 11v4a2 2 0 0 0 2 2h4",key:"xkn7yn"}],["rect",{width:"8",height:"8",x:"13",y:"13",rx:"2",key:"1cgmvn"}]],zF=xt("workflow",LF);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UF=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],Ms=xt("x",UF),oi="/feature-voting-app/assets/New-Millennium-color-logo-C0dd35-E.svg",BF="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='UTF-8'?%3e%3csvg%20id='Layer_1'%20xmlns='http://www.w3.org/2000/svg'%20version='1.1'%20viewBox='0%200%2019%2019'%3e%3c!--%20Generator:%20Adobe%20Illustrator%2029.8.3,%20SVG%20Export%20Plug-In%20.%20SVG%20Version:%202.1.1%20Build%203)%20--%3e%3cdefs%3e%3cstyle%3e%20.st0%20{%20fill:%20%23f25022;%20}%20.st1%20{%20fill:%20%23ffb900;%20}%20.st2%20{%20fill:%20%237fba00;%20}%20.st3%20{%20fill:%20%2300a4ef;%20}%20%3c/style%3e%3c/defs%3e%3crect%20class='st0'%20width='9'%20height='9'/%3e%3crect%20class='st3'%20y='10'%20width='9'%20height='9'/%3e%3crect%20class='st2'%20x='10'%20width='9'%20height='9'/%3e%3crect%20class='st1'%20x='10'%20y='10'%20width='9'%20height='9'/%3e%3c/svg%3e";var Ed=e=>e.type==="checkbox",pl=e=>e instanceof Date,$s=e=>e==null;const FE=e=>typeof e=="object";var pn=e=>!$s(e)&&!Array.isArray(e)&&FE(e)&&!pl(e),LE=e=>pn(e)&&e.target?Ed(e.target)?e.target.checked:e.target.value:e,WF=e=>e.substring(0,e.search(/\.\d+(\.|$)/))||e,zE=(e,t)=>e.has(WF(t)),qF=e=>{const t=e.constructor&&e.constructor.prototype;return pn(t)&&t.hasOwnProperty("isPrototypeOf")},_x=typeof window<"u"&&typeof window.HTMLElement<"u"&&typeof document<"u";function _n(e){let t;const r=Array.isArray(e),n=typeof FileList<"u"?e instanceof FileList:!1;if(e instanceof Date)t=new Date(e);else if(!(_x&&(e instanceof Blob||n))&&(r||pn(e)))if(t=r?[]:Object.create(Object.getPrototypeOf(e)),!r&&!qF(e))t=e;else for(const s in e)e.hasOwnProperty(s)&&(t[s]=_n(e[s]));else return e;return t}var Pm=e=>/^\w*$/.test(e),Jr=e=>e===void 0,Cx=e=>Array.isArray(e)?e.filter(Boolean):[],Ex=e=>Cx(e.replace(/["|']|\]/g,"").split(/\.|\[/)),He=(e,t,r)=>{if(!t||!pn(e))return r;const n=(Pm(t)?[t]:Ex(t)).reduce((s,i)=>$s(s)?s:s[i],e);return Jr(n)||n===e?Jr(e[t])?r:e[t]:n},Qs=e=>typeof e=="boolean",pr=(e,t,r)=>{let n=-1;const s=Pm(t)?[t]:Ex(t),i=s.length,l=i-1;for(;++n<i;){const u=s[n];let d=r;if(n!==l){const m=e[u];d=pn(m)||Array.isArray(m)?m:isNaN(+s[n+1])?{}:[]}if(u==="__proto__"||u==="constructor"||u==="prototype")return;e[u]=d,e=e[u]}};const Ah={BLUR:"blur",FOCUS_OUT:"focusout",CHANGE:"change"},Vi={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},Da={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"},UE=it.createContext(null);UE.displayName="HookFormContext";const Ax=()=>it.useContext(UE);var BE=(e,t,r,n=!0)=>{const s={defaultValues:t._defaultValues};for(const i in e)Object.defineProperty(s,i,{get:()=>{const l=i;return t._proxyFormState[l]!==Vi.all&&(t._proxyFormState[l]=!n||Vi.all),r&&(r[l]=!0),e[l]}});return s};const Px=typeof window<"u"?it.useLayoutEffect:it.useEffect;function VF(e){const t=Ax(),{control:r=t.control,disabled:n,name:s,exact:i}=e||{},[l,u]=it.useState(r._formState),d=it.useRef({isDirty:!1,isLoading:!1,dirtyFields:!1,touchedFields:!1,validatingFields:!1,isValidating:!1,isValid:!1,errors:!1});return Px(()=>r._subscribe({name:s,formState:d.current,exact:i,callback:m=>{!n&&u({...r._formState,...m})}}),[s,n,i]),it.useEffect(()=>{d.current.isValid&&r._setValid(!0)},[r]),it.useMemo(()=>BE(l,r,d.current,!1),[l,r])}var ti=e=>typeof e=="string",u0=(e,t,r,n,s)=>ti(e)?(n&&t.watch.add(e),He(r,e,s)):Array.isArray(e)?e.map(i=>(n&&t.watch.add(i),He(r,i))):(n&&(t.watchAll=!0),r),d0=e=>$s(e)||!FE(e);function Hi(e,t,r=new WeakSet){if(d0(e)||d0(t))return e===t;if(pl(e)&&pl(t))return e.getTime()===t.getTime();const n=Object.keys(e),s=Object.keys(t);if(n.length!==s.length)return!1;if(r.has(e)||r.has(t))return!0;r.add(e),r.add(t);for(const i of n){const l=e[i];if(!s.includes(i))return!1;if(i!=="ref"){const u=t[i];if(pl(l)&&pl(u)||pn(l)&&pn(u)||Array.isArray(l)&&Array.isArray(u)?!Hi(l,u,r):l!==u)return!1}}return!0}function HF(e){const t=Ax(),{control:r=t.control,name:n,defaultValue:s,disabled:i,exact:l,compute:u}=e||{},d=it.useRef(s),m=it.useRef(u),f=it.useRef(void 0),p=it.useRef(r),y=it.useRef(n);m.current=u;const[x,j]=it.useState(()=>{const O=r._getWatch(n,d.current);return m.current?m.current(O):O}),b=it.useCallback(O=>{const T=u0(n,r._names,O||r._formValues,!1,d.current);return m.current?m.current(T):T},[r._formValues,r._names,n]),k=it.useCallback(O=>{if(!i){const T=u0(n,r._names,O||r._formValues,!1,d.current);if(m.current){const A=m.current(T);Hi(A,f.current)||(j(A),f.current=A)}else j(T)}},[r._formValues,r._names,i,n]);Px(()=>((p.current!==r||!Hi(y.current,n))&&(p.current=r,y.current=n,k()),r._subscribe({name:n,formState:{values:!0},exact:l,callback:O=>{k(O.values)}})),[r,l,n,k]),it.useEffect(()=>r._removeUnmounted());const _=p.current!==r,E=y.current,C=it.useMemo(()=>{if(i)return null;const O=!_&&!Hi(E,n);return _||O?b():null},[i,_,n,E,b]);return C!==null?C:x}function KF(e){const t=Ax(),{name:r,disabled:n,control:s=t.control,shouldUnregister:i,defaultValue:l}=e,u=zE(s._names.array,r),d=it.useMemo(()=>He(s._formValues,r,He(s._defaultValues,r,l)),[s,r,l]),m=HF({control:s,name:r,defaultValue:d,exact:!0}),f=VF({control:s,name:r,exact:!0}),p=it.useRef(e),y=it.useRef(void 0),x=it.useRef(s.register(r,{...e.rules,value:m,...Qs(e.disabled)?{disabled:e.disabled}:{}}));p.current=e;const j=it.useMemo(()=>Object.defineProperties({},{invalid:{enumerable:!0,get:()=>!!He(f.errors,r)},isDirty:{enumerable:!0,get:()=>!!He(f.dirtyFields,r)},isTouched:{enumerable:!0,get:()=>!!He(f.touchedFields,r)},isValidating:{enumerable:!0,get:()=>!!He(f.validatingFields,r)},error:{enumerable:!0,get:()=>He(f.errors,r)}}),[f,r]),b=it.useCallback(C=>x.current.onChange({target:{value:LE(C),name:r},type:Ah.CHANGE}),[r]),k=it.useCallback(()=>x.current.onBlur({target:{value:He(s._formValues,r),name:r},type:Ah.BLUR}),[r,s._formValues]),_=it.useCallback(C=>{const O=He(s._fields,r);O&&C&&(O._f.ref={focus:()=>C.focus&&C.focus(),select:()=>C.select&&C.select(),setCustomValidity:T=>C.setCustomValidity(T),reportValidity:()=>C.reportValidity()})},[s._fields,r]),E=it.useMemo(()=>({name:r,value:m,...Qs(n)||f.disabled?{disabled:f.disabled||n}:{},onChange:b,onBlur:k,ref:_}),[r,n,f.disabled,b,k,_,m]);return it.useEffect(()=>{const C=s._options.shouldUnregister||i,O=y.current;O&&O!==r&&!u&&s.unregister(O),s.register(r,{...p.current.rules,...Qs(p.current.disabled)?{disabled:p.current.disabled}:{}});const T=(A,L)=>{const J=He(s._fields,A);J&&J._f&&(J._f.mount=L)};if(T(r,!0),C){const A=_n(He(s._options.defaultValues,r,p.current.defaultValue));pr(s._defaultValues,r,A),Jr(He(s._formValues,r))&&pr(s._formValues,r,A)}return!u&&s.register(r),y.current=r,()=>{(u?C&&!s._state.action:C)?s.unregister(r):T(r,!1)}},[r,s,u,i]),it.useEffect(()=>{s._setDisabledField({disabled:n,name:r})},[n,r,s]),it.useMemo(()=>({field:E,formState:f,fieldState:j}),[E,f,j])}const Nc=e=>e.render(KF(e));var GF=(e,t,r,n,s)=>t?{...r[e],types:{...r[e]&&r[e].types?r[e].types:{},[n]:s||!0}}:{},rd=e=>Array.isArray(e)?e:[e],GS=()=>{let e=[];return{get observers(){return e},next:s=>{for(const i of e)i.next&&i.next(s)},subscribe:s=>(e.push(s),{unsubscribe:()=>{e=e.filter(i=>i!==s)}}),unsubscribe:()=>{e=[]}}};function WE(e,t){const r={};for(const n in e)if(e.hasOwnProperty(n)){const s=e[n],i=t[n];if(s&&pn(s)&&i){const l=WE(s,i);pn(l)&&(r[n]=l)}else e[n]&&(r[n]=i)}return r}var ys=e=>pn(e)&&!Object.keys(e).length,Ox=e=>e.type==="file",Ki=e=>typeof e=="function",Ph=e=>{if(!_x)return!1;const t=e?e.ownerDocument:0;return e instanceof(t&&t.defaultView?t.defaultView.HTMLElement:HTMLElement)},qE=e=>e.type==="select-multiple",Tx=e=>e.type==="radio",YF=e=>Tx(e)||Ed(e),sy=e=>Ph(e)&&e.isConnected;function JF(e,t){const r=t.slice(0,-1).length;let n=0;for(;n<r;)e=Jr(e)?n++:e[t[n++]];return e}function XF(e){for(const t in e)if(e.hasOwnProperty(t)&&!Jr(e[t]))return!1;return!0}function un(e,t){const r=Array.isArray(t)?t:Pm(t)?[t]:Ex(t),n=r.length===1?e:JF(e,r),s=r.length-1,i=r[s];return n&&delete n[i],s!==0&&(pn(n)&&ys(n)||Array.isArray(n)&&XF(n))&&un(e,r.slice(0,-1)),e}var QF=e=>{for(const t in e)if(Ki(e[t]))return!0;return!1};function VE(e){return Array.isArray(e)||pn(e)&&!QF(e)}function f0(e,t={}){for(const r in e)VE(e[r])?(t[r]=Array.isArray(e[r])?[]:{},f0(e[r],t[r])):Jr(e[r])||(t[r]=!0);return t}function kc(e,t,r){r||(r=f0(t));for(const n in e)VE(e[n])?Jr(t)||d0(r[n])?r[n]=f0(e[n],Array.isArray(e[n])?[]:{}):kc(e[n],$s(t)?{}:t[n],r[n]):r[n]=!Hi(e[n],t[n]);return r}const YS={value:!1,isValid:!1},JS={value:!0,isValid:!0};var HE=e=>{if(Array.isArray(e)){if(e.length>1){const t=e.filter(r=>r&&r.checked&&!r.disabled).map(r=>r.value);return{value:t,isValid:!!t.length}}return e[0].checked&&!e[0].disabled?e[0].attributes&&!Jr(e[0].attributes.value)?Jr(e[0].value)||e[0].value===""?JS:{value:e[0].value,isValid:!0}:JS:YS}return YS},KE=(e,{valueAsNumber:t,valueAsDate:r,setValueAs:n})=>Jr(e)?e:t?e===""?NaN:e&&+e:r&&ti(e)?new Date(e):n?n(e):e;const XS={isValid:!1,value:null};var GE=e=>Array.isArray(e)?e.reduce((t,r)=>r&&r.checked&&!r.disabled?{isValid:!0,value:r.value}:t,XS):XS;function QS(e){const t=e.ref;return Ox(t)?t.files:Tx(t)?GE(e.refs).value:qE(t)?[...t.selectedOptions].map(({value:r})=>r):Ed(t)?HE(e.refs).value:KE(Jr(t.value)?e.ref.value:t.value,e)}var ZF=(e,t,r,n)=>{const s={};for(const i of e){const l=He(t,i);l&&pr(s,i,l._f)}return{criteriaMode:r,names:[...e],fields:s,shouldUseNativeValidation:n}},Oh=e=>e instanceof RegExp,Ru=e=>Jr(e)?e:Oh(e)?e.source:pn(e)?Oh(e.value)?e.value.source:e.value:e,ZS=e=>({isOnSubmit:!e||e===Vi.onSubmit,isOnBlur:e===Vi.onBlur,isOnChange:e===Vi.onChange,isOnAll:e===Vi.all,isOnTouch:e===Vi.onTouched});const ek="AsyncFunction";var eL=e=>!!e&&!!e.validate&&!!(Ki(e.validate)&&e.validate.constructor.name===ek||pn(e.validate)&&Object.values(e.validate).find(t=>t.constructor.name===ek)),tL=e=>e.mount&&(e.required||e.min||e.max||e.maxLength||e.minLength||e.pattern||e.validate),tk=(e,t,r)=>!r&&(t.watchAll||t.watch.has(e)||[...t.watch].some(n=>e.startsWith(n)&&/^\.\w+/.test(e.slice(n.length))));const nd=(e,t,r,n)=>{for(const s of r||Object.keys(e)){const i=He(e,s);if(i){const{_f:l,...u}=i;if(l){if(l.refs&&l.refs[0]&&t(l.refs[0],s)&&!n)return!0;if(l.ref&&t(l.ref,l.name)&&!n)return!0;if(nd(u,t))break}else if(pn(u)&&nd(u,t))break}}};function rk(e,t,r){const n=He(e,r);if(n||Pm(r))return{error:n,name:r};const s=r.split(".");for(;s.length;){const i=s.join("."),l=He(t,i),u=He(e,i);if(l&&!Array.isArray(l)&&r!==i)return{name:r};if(u&&u.type)return{name:i,error:u};if(u&&u.root&&u.root.type)return{name:`${i}.root`,error:u.root};s.pop()}return{name:r}}var rL=(e,t,r,n)=>{r(e);const{name:s,...i}=e;return ys(i)||Object.keys(i).length>=Object.keys(t).length||Object.keys(i).find(l=>t[l]===(!n||Vi.all))},nL=(e,t,r)=>!e||!t||e===t||rd(e).some(n=>n&&(r?n===t:n.startsWith(t)||t.startsWith(n))),sL=(e,t,r,n,s)=>s.isOnAll?!1:!r&&s.isOnTouch?!(t||e):(r?n.isOnBlur:s.isOnBlur)?!e:(r?n.isOnChange:s.isOnChange)?e:!0,iL=(e,t)=>!Cx(He(e,t)).length&&un(e,t),aL=(e,t,r)=>{const n=rd(He(e,r));return pr(n,"root",t[r]),pr(e,r,n),e};function nk(e,t,r="validate"){if(ti(e)||Array.isArray(e)&&e.every(ti)||Qs(e)&&!e)return{type:r,message:ti(e)?e:"",ref:t}}var yc=e=>pn(e)&&!Oh(e)?e:{value:e,message:""},sk=async(e,t,r,n,s,i)=>{const{ref:l,refs:u,required:d,maxLength:m,minLength:f,min:p,max:y,pattern:x,validate:j,name:b,valueAsNumber:k,mount:_}=e._f,E=He(r,b);if(!_||t.has(b))return{};const C=u?u[0]:l,O=K=>{s&&C.reportValidity&&(C.setCustomValidity(Qs(K)?"":K||""),C.reportValidity())},T={},A=Tx(l),L=Ed(l),J=A||L,H=(k||Ox(l))&&Jr(l.value)&&Jr(E)||Ph(l)&&l.value===""||E===""||Array.isArray(E)&&!E.length,me=GF.bind(null,b,n,T),Z=(K,ce,z,se=Da.maxLength,B=Da.minLength)=>{const ue=K?ce:z;T[b]={type:K?se:B,message:ue,ref:l,...me(K?se:B,ue)}};if(i?!Array.isArray(E)||!E.length:d&&(!J&&(H||$s(E))||Qs(E)&&!E||L&&!HE(u).isValid||A&&!GE(u).isValid)){const{value:K,message:ce}=ti(d)?{value:!!d,message:d}:yc(d);if(K&&(T[b]={type:Da.required,message:ce,ref:C,...me(Da.required,ce)},!n))return O(ce),T}if(!H&&(!$s(p)||!$s(y))){let K,ce;const z=yc(y),se=yc(p);if(!$s(E)&&!isNaN(E)){const B=l.valueAsNumber||E&&+E;$s(z.value)||(K=B>z.value),$s(se.value)||(ce=B<se.value)}else{const B=l.valueAsDate||new Date(E),ue=ee=>new Date(new Date().toDateString()+" "+ee),oe=l.type=="time",X=l.type=="week";ti(z.value)&&E&&(K=oe?ue(E)>ue(z.value):X?E>z.value:B>new Date(z.value)),ti(se.value)&&E&&(ce=oe?ue(E)<ue(se.value):X?E<se.value:B<new Date(se.value))}if((K||ce)&&(Z(!!K,z.message,se.message,Da.max,Da.min),!n))return O(T[b].message),T}if((m||f)&&!H&&(ti(E)||i&&Array.isArray(E))){const K=yc(m),ce=yc(f),z=!$s(K.value)&&E.length>+K.value,se=!$s(ce.value)&&E.length<+ce.value;if((z||se)&&(Z(z,K.message,ce.message),!n))return O(T[b].message),T}if(x&&!H&&ti(E)){const{value:K,message:ce}=yc(x);if(Oh(K)&&!E.match(K)&&(T[b]={type:Da.pattern,message:ce,ref:l,...me(Da.pattern,ce)},!n))return O(ce),T}if(j){if(Ki(j)){const K=await j(E,r),ce=nk(K,C);if(ce&&(T[b]={...ce,...me(Da.validate,ce.message)},!n))return O(ce.message),T}else if(pn(j)){let K={};for(const ce in j){if(!ys(K)&&!n)break;const z=nk(await j[ce](E,r),C,ce);z&&(K={...z,...me(ce,z.message)},O(z.message),n&&(T[b]=K))}if(!ys(K)&&(T[b]={ref:C,...K},!n))return T}}return O(!0),T};const oL={mode:Vi.onSubmit,reValidateMode:Vi.onChange,shouldFocusError:!0};function lL(e={}){let t={...oL,...e},r={submitCount:0,isDirty:!1,isReady:!1,isLoading:Ki(t.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},validatingFields:{},errors:t.errors||{},disabled:t.disabled||!1},n={},s=pn(t.defaultValues)||pn(t.values)?_n(t.defaultValues||t.values)||{}:{},i=t.shouldUnregister?{}:_n(s),l={action:!1,mount:!1,watch:!1},u={mount:new Set,disabled:new Set,unMount:new Set,array:new Set,watch:new Set},d,m=0;const f={isDirty:!1,dirtyFields:!1,validatingFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1};let p={...f};const y={array:GS(),state:GS()},x=t.criteriaMode===Vi.all,j=M=>ie=>{clearTimeout(m),m=setTimeout(M,ie)},b=async M=>{if(!t.disabled&&(f.isValid||p.isValid||M)){const ie=t.resolver?ys((await L()).errors):await H(n,!0);ie!==r.isValid&&y.state.next({isValid:ie})}},k=(M,ie)=>{!t.disabled&&(f.isValidating||f.validatingFields||p.isValidating||p.validatingFields)&&((M||Array.from(u.mount)).forEach(pe=>{pe&&(ie?pr(r.validatingFields,pe,ie):un(r.validatingFields,pe))}),y.state.next({validatingFields:r.validatingFields,isValidating:!ys(r.validatingFields)}))},_=(M,ie=[],pe,Se,ye=!0,be=!0)=>{if(Se&&pe&&!t.disabled){if(l.action=!0,be&&Array.isArray(He(n,M))){const qe=pe(He(n,M),Se.argA,Se.argB);ye&&pr(n,M,qe)}if(be&&Array.isArray(He(r.errors,M))){const qe=pe(He(r.errors,M),Se.argA,Se.argB);ye&&pr(r.errors,M,qe),iL(r.errors,M)}if((f.touchedFields||p.touchedFields)&&be&&Array.isArray(He(r.touchedFields,M))){const qe=pe(He(r.touchedFields,M),Se.argA,Se.argB);ye&&pr(r.touchedFields,M,qe)}(f.dirtyFields||p.dirtyFields)&&(r.dirtyFields=kc(s,i)),y.state.next({name:M,isDirty:Z(M,ie),dirtyFields:r.dirtyFields,errors:r.errors,isValid:r.isValid})}else pr(i,M,ie)},E=(M,ie)=>{pr(r.errors,M,ie),y.state.next({errors:r.errors})},C=M=>{r.errors=M,y.state.next({errors:r.errors,isValid:!1})},O=(M,ie,pe,Se)=>{const ye=He(n,M);if(ye){const be=He(i,M,Jr(pe)?He(s,M):pe);Jr(be)||Se&&Se.defaultChecked||ie?pr(i,M,ie?be:QS(ye._f)):z(M,be),l.mount&&b()}},T=(M,ie,pe,Se,ye)=>{let be=!1,qe=!1;const yt={name:M};if(!t.disabled){if(!pe||Se){(f.isDirty||p.isDirty)&&(qe=r.isDirty,r.isDirty=yt.isDirty=Z(),be=qe!==yt.isDirty);const wt=Hi(He(s,M),ie);qe=!!He(r.dirtyFields,M),wt?un(r.dirtyFields,M):pr(r.dirtyFields,M,!0),yt.dirtyFields=r.dirtyFields,be=be||(f.dirtyFields||p.dirtyFields)&&qe!==!wt}if(pe){const wt=He(r.touchedFields,M);wt||(pr(r.touchedFields,M,pe),yt.touchedFields=r.touchedFields,be=be||(f.touchedFields||p.touchedFields)&&wt!==pe)}be&&ye&&y.state.next(yt)}return be?yt:{}},A=(M,ie,pe,Se)=>{const ye=He(r.errors,M),be=(f.isValid||p.isValid)&&Qs(ie)&&r.isValid!==ie;if(t.delayError&&pe?(d=j(()=>E(M,pe)),d(t.delayError)):(clearTimeout(m),d=null,pe?pr(r.errors,M,pe):un(r.errors,M)),(pe?!Hi(ye,pe):ye)||!ys(Se)||be){const qe={...Se,...be&&Qs(ie)?{isValid:ie}:{},errors:r.errors,name:M};r={...r,...qe},y.state.next(qe)}},L=async M=>{k(M,!0);const ie=await t.resolver(i,t.context,ZF(M||u.mount,n,t.criteriaMode,t.shouldUseNativeValidation));return k(M),ie},J=async M=>{const{errors:ie}=await L(M);if(M)for(const pe of M){const Se=He(ie,pe);Se?pr(r.errors,pe,Se):un(r.errors,pe)}else r.errors=ie;return ie},H=async(M,ie,pe={valid:!0})=>{for(const Se in M){const ye=M[Se];if(ye){const{_f:be,...qe}=ye;if(be){const yt=u.array.has(be.name),wt=ye._f&&eL(ye._f);wt&&f.validatingFields&&k([be.name],!0);const Pt=await sk(ye,u.disabled,i,x,t.shouldUseNativeValidation&&!ie,yt);if(wt&&f.validatingFields&&k([be.name]),Pt[be.name]&&(pe.valid=!1,ie))break;!ie&&(He(Pt,be.name)?yt?aL(r.errors,Pt,be.name):pr(r.errors,be.name,Pt[be.name]):un(r.errors,be.name))}!ys(qe)&&await H(qe,ie,pe)}}return pe.valid},me=()=>{for(const M of u.unMount){const ie=He(n,M);ie&&(ie._f.refs?ie._f.refs.every(pe=>!sy(pe)):!sy(ie._f.ref))&&de(M)}u.unMount=new Set},Z=(M,ie)=>!t.disabled&&(M&&ie&&pr(i,M,ie),!Hi(ee(),s)),K=(M,ie,pe)=>u0(M,u,{...l.mount?i:Jr(ie)?s:ti(M)?{[M]:ie}:ie},pe,ie),ce=M=>Cx(He(l.mount?i:s,M,t.shouldUnregister?He(s,M,[]):[])),z=(M,ie,pe={})=>{const Se=He(n,M);let ye=ie;if(Se){const be=Se._f;be&&(!be.disabled&&pr(i,M,KE(ie,be)),ye=Ph(be.ref)&&$s(ie)?"":ie,qE(be.ref)?[...be.ref.options].forEach(qe=>qe.selected=ye.includes(qe.value)):be.refs?Ed(be.ref)?be.refs.forEach(qe=>{(!qe.defaultChecked||!qe.disabled)&&(Array.isArray(ye)?qe.checked=!!ye.find(yt=>yt===qe.value):qe.checked=ye===qe.value||!!ye)}):be.refs.forEach(qe=>qe.checked=qe.value===ye):Ox(be.ref)?be.ref.value="":(be.ref.value=ye,be.ref.type||y.state.next({name:M,values:_n(i)})))}(pe.shouldDirty||pe.shouldTouch)&&T(M,ye,pe.shouldTouch,pe.shouldDirty,!0),pe.shouldValidate&&X(M)},se=(M,ie,pe)=>{for(const Se in ie){if(!ie.hasOwnProperty(Se))return;const ye=ie[Se],be=M+"."+Se,qe=He(n,be);(u.array.has(M)||pn(ye)||qe&&!qe._f)&&!pl(ye)?se(be,ye,pe):z(be,ye,pe)}},B=(M,ie,pe={})=>{const Se=He(n,M),ye=u.array.has(M),be=_n(ie);pr(i,M,be),ye?(y.array.next({name:M,values:_n(i)}),(f.isDirty||f.dirtyFields||p.isDirty||p.dirtyFields)&&pe.shouldDirty&&y.state.next({name:M,dirtyFields:kc(s,i),isDirty:Z(M,be)})):Se&&!Se._f&&!$s(be)?se(M,be,pe):z(M,be,pe),tk(M,u)&&y.state.next({...r,name:M}),y.state.next({name:l.mount?M:void 0,values:_n(i)})},ue=async M=>{l.mount=!0;const ie=M.target;let pe=ie.name,Se=!0;const ye=He(n,pe),be=wt=>{Se=Number.isNaN(wt)||pl(wt)&&isNaN(wt.getTime())||Hi(wt,He(i,pe,wt))},qe=ZS(t.mode),yt=ZS(t.reValidateMode);if(ye){let wt,Pt;const tr=ie.type?QS(ye._f):LE(M),Rt=M.type===Ah.BLUR||M.type===Ah.FOCUS_OUT,nn=!tL(ye._f)&&!t.resolver&&!He(r.errors,pe)&&!ye._f.deps||sL(Rt,He(r.touchedFields,pe),r.isSubmitted,yt,qe),yr=tk(pe,u,Rt);pr(i,pe,tr),Rt?(!ie||!ie.readOnly)&&(ye._f.onBlur&&ye._f.onBlur(M),d&&d(0)):ye._f.onChange&&ye._f.onChange(M);const $t=T(pe,tr,Rt),yn=!ys($t)||yr;if(!Rt&&y.state.next({name:pe,type:M.type,values:_n(i)}),nn)return(f.isValid||p.isValid)&&(t.mode==="onBlur"?Rt&&b():Rt||b()),yn&&y.state.next({name:pe,...yr?{}:$t});if(!Rt&&yr&&y.state.next({...r}),t.resolver){const{errors:Wt}=await L([pe]);if(be(tr),Se){const _r=rk(r.errors,n,pe),Ze=rk(Wt,n,_r.name||pe);wt=Ze.error,pe=Ze.name,Pt=ys(Wt)}}else k([pe],!0),wt=(await sk(ye,u.disabled,i,x,t.shouldUseNativeValidation))[pe],k([pe]),be(tr),Se&&(wt?Pt=!1:(f.isValid||p.isValid)&&(Pt=await H(n,!0)));Se&&(ye._f.deps&&(!Array.isArray(ye._f.deps)||ye._f.deps.length>0)&&X(ye._f.deps),A(pe,Pt,wt,$t))}},oe=(M,ie)=>{if(He(r.errors,ie)&&M.focus)return M.focus(),1},X=async(M,ie={})=>{let pe,Se;const ye=rd(M);if(t.resolver){const be=await J(Jr(M)?M:ye);pe=ys(be),Se=M?!ye.some(qe=>He(be,qe)):pe}else M?(Se=(await Promise.all(ye.map(async be=>{const qe=He(n,be);return await H(qe&&qe._f?{[be]:qe}:qe)}))).every(Boolean),!(!Se&&!r.isValid)&&b()):Se=pe=await H(n);return y.state.next({...!ti(M)||(f.isValid||p.isValid)&&pe!==r.isValid?{}:{name:M},...t.resolver||!M?{isValid:pe}:{},errors:r.errors}),ie.shouldFocus&&!Se&&nd(n,oe,M?ye:u.mount),Se},ee=(M,ie)=>{let pe={...l.mount?i:s};return ie&&(pe=WE(ie.dirtyFields?r.dirtyFields:r.touchedFields,pe)),Jr(M)?pe:ti(M)?He(pe,M):M.map(Se=>He(pe,Se))},D=(M,ie)=>({invalid:!!He((ie||r).errors,M),isDirty:!!He((ie||r).dirtyFields,M),error:He((ie||r).errors,M),isValidating:!!He(r.validatingFields,M),isTouched:!!He((ie||r).touchedFields,M)}),q=M=>{M&&rd(M).forEach(ie=>un(r.errors,ie)),y.state.next({errors:M?r.errors:{}})},Te=(M,ie,pe)=>{const Se=(He(n,M,{_f:{}})._f||{}).ref,ye=He(r.errors,M)||{},{ref:be,message:qe,type:yt,...wt}=ye;pr(r.errors,M,{...wt,...ie,ref:Se}),y.state.next({name:M,errors:r.errors,isValid:!1}),pe&&pe.shouldFocus&&Se&&Se.focus&&Se.focus()},we=(M,ie)=>Ki(M)?y.state.subscribe({next:pe=>"values"in pe&&M(K(void 0,ie),pe)}):K(M,ie,!0),Ce=M=>y.state.subscribe({next:ie=>{nL(M.name,ie.name,M.exact)&&rL(ie,M.formState||f,Dt,M.reRenderRoot)&&M.callback({values:{...i},...r,...ie,defaultValues:s})}}).unsubscribe,le=M=>(l.mount=!0,p={...p,...M.formState},Ce({...M,formState:p})),de=(M,ie={})=>{for(const pe of M?rd(M):u.mount)u.mount.delete(pe),u.array.delete(pe),ie.keepValue||(un(n,pe),un(i,pe)),!ie.keepError&&un(r.errors,pe),!ie.keepDirty&&un(r.dirtyFields,pe),!ie.keepTouched&&un(r.touchedFields,pe),!ie.keepIsValidating&&un(r.validatingFields,pe),!t.shouldUnregister&&!ie.keepDefaultValue&&un(s,pe);y.state.next({values:_n(i)}),y.state.next({...r,...ie.keepDirty?{isDirty:Z()}:{}}),!ie.keepIsValid&&b()},Q=({disabled:M,name:ie})=>{(Qs(M)&&l.mount||M||u.disabled.has(ie))&&(M?u.disabled.add(ie):u.disabled.delete(ie))},R=(M,ie={})=>{let pe=He(n,M);const Se=Qs(ie.disabled)||Qs(t.disabled);return pr(n,M,{...pe||{},_f:{...pe&&pe._f?pe._f:{ref:{name:M}},name:M,mount:!0,...ie}}),u.mount.add(M),pe?Q({disabled:Qs(ie.disabled)?ie.disabled:t.disabled,name:M}):O(M,!0,ie.value),{...Se?{disabled:ie.disabled||t.disabled}:{},...t.progressive?{required:!!ie.required,min:Ru(ie.min),max:Ru(ie.max),minLength:Ru(ie.minLength),maxLength:Ru(ie.maxLength),pattern:Ru(ie.pattern)}:{},name:M,onChange:ue,onBlur:ue,ref:ye=>{if(ye){R(M,ie),pe=He(n,M);const be=Jr(ye.value)&&ye.querySelectorAll&&ye.querySelectorAll("input,select,textarea")[0]||ye,qe=YF(be),yt=pe._f.refs||[];if(qe?yt.find(wt=>wt===be):be===pe._f.ref)return;pr(n,M,{_f:{...pe._f,...qe?{refs:[...yt.filter(sy),be,...Array.isArray(He(s,M))?[{}]:[]],ref:{type:be.type,name:M}}:{ref:be}}}),O(M,!1,void 0,be)}else pe=He(n,M,{}),pe._f&&(pe._f.mount=!1),(t.shouldUnregister||ie.shouldUnregister)&&!(zE(u.array,M)&&l.action)&&u.unMount.add(M)}}},ge=()=>t.shouldFocusError&&nd(n,oe,u.mount),$e=M=>{Qs(M)&&(y.state.next({disabled:M}),nd(n,(ie,pe)=>{const Se=He(n,pe);Se&&(ie.disabled=Se._f.disabled||M,Array.isArray(Se._f.refs)&&Se._f.refs.forEach(ye=>{ye.disabled=Se._f.disabled||M}))},0,!1))},V=(M,ie)=>async pe=>{let Se;pe&&(pe.preventDefault&&pe.preventDefault(),pe.persist&&pe.persist());let ye=_n(i);if(y.state.next({isSubmitting:!0}),t.resolver){const{errors:be,values:qe}=await L();r.errors=be,ye=_n(qe)}else await H(n);if(u.disabled.size)for(const be of u.disabled)un(ye,be);if(un(r.errors,"root"),ys(r.errors)){y.state.next({errors:{}});try{await M(ye,pe)}catch(be){Se=be}}else ie&&await ie({...r.errors},pe),ge(),setTimeout(ge);if(y.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:ys(r.errors)&&!Se,submitCount:r.submitCount+1,errors:r.errors}),Se)throw Se},Fe=(M,ie={})=>{He(n,M)&&(Jr(ie.defaultValue)?B(M,_n(He(s,M))):(B(M,ie.defaultValue),pr(s,M,_n(ie.defaultValue))),ie.keepTouched||un(r.touchedFields,M),ie.keepDirty||(un(r.dirtyFields,M),r.isDirty=ie.defaultValue?Z(M,_n(He(s,M))):Z()),ie.keepError||(un(r.errors,M),f.isValid&&b()),y.state.next({...r}))},Be=(M,ie={})=>{const pe=M?_n(M):s,Se=_n(pe),ye=ys(M),be=ye?s:Se;if(ie.keepDefaultValues||(s=pe),!ie.keepValues){if(ie.keepDirtyValues){const qe=new Set([...u.mount,...Object.keys(kc(s,i))]);for(const yt of Array.from(qe))He(r.dirtyFields,yt)?pr(be,yt,He(i,yt)):B(yt,He(be,yt))}else{if(_x&&Jr(M))for(const qe of u.mount){const yt=He(n,qe);if(yt&&yt._f){const wt=Array.isArray(yt._f.refs)?yt._f.refs[0]:yt._f.ref;if(Ph(wt)){const Pt=wt.closest("form");if(Pt){Pt.reset();break}}}}if(ie.keepFieldsRef)for(const qe of u.mount)B(qe,He(be,qe));else n={}}i=t.shouldUnregister?ie.keepDefaultValues?_n(s):{}:_n(be),y.array.next({values:{...be}}),y.state.next({values:{...be}})}u={mount:ie.keepDirtyValues?u.mount:new Set,unMount:new Set,array:new Set,disabled:new Set,watch:new Set,watchAll:!1,focus:""},l.mount=!f.isValid||!!ie.keepIsValid||!!ie.keepDirtyValues||!t.shouldUnregister&&!ys(be),l.watch=!!t.shouldUnregister,y.state.next({submitCount:ie.keepSubmitCount?r.submitCount:0,isDirty:ye?!1:ie.keepDirty?r.isDirty:!!(ie.keepDefaultValues&&!Hi(M,s)),isSubmitted:ie.keepIsSubmitted?r.isSubmitted:!1,dirtyFields:ye?{}:ie.keepDirtyValues?ie.keepDefaultValues&&i?kc(s,i):r.dirtyFields:ie.keepDefaultValues&&M?kc(s,M):ie.keepDirty?r.dirtyFields:{},touchedFields:ie.keepTouched?r.touchedFields:{},errors:ie.keepErrors?r.errors:{},isSubmitSuccessful:ie.keepIsSubmitSuccessful?r.isSubmitSuccessful:!1,isSubmitting:!1,defaultValues:s})},dt=(M,ie)=>Be(Ki(M)?M(i):M,ie),ft=(M,ie={})=>{const pe=He(n,M),Se=pe&&pe._f;if(Se){const ye=Se.refs?Se.refs[0]:Se.ref;ye.focus&&(ye.focus(),ie.shouldSelect&&Ki(ye.select)&&ye.select())}},Dt=M=>{r={...r,...M}},Xt={control:{register:R,unregister:de,getFieldState:D,handleSubmit:V,setError:Te,_subscribe:Ce,_runSchema:L,_focusError:ge,_getWatch:K,_getDirty:Z,_setValid:b,_setFieldArray:_,_setDisabledField:Q,_setErrors:C,_getFieldArray:ce,_reset:Be,_resetDefaultValues:()=>Ki(t.defaultValues)&&t.defaultValues().then(M=>{dt(M,t.resetOptions),y.state.next({isLoading:!1})}),_removeUnmounted:me,_disableForm:$e,_subjects:y,_proxyFormState:f,get _fields(){return n},get _formValues(){return i},get _state(){return l},set _state(M){l=M},get _defaultValues(){return s},get _names(){return u},set _names(M){u=M},get _formState(){return r},get _options(){return t},set _options(M){t={...t,...M}}},subscribe:le,trigger:X,register:R,handleSubmit:V,watch:we,setValue:B,getValues:ee,reset:dt,resetField:Fe,clearErrors:q,unregister:de,setError:Te,setFocus:ft,getFieldState:D};return{...Xt,formControl:Xt}}function cd(e={}){const t=it.useRef(void 0),r=it.useRef(void 0),[n,s]=it.useState({isDirty:!1,isValidating:!1,isLoading:Ki(e.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},validatingFields:{},errors:e.errors||{},disabled:e.disabled||!1,isReady:!1,defaultValues:Ki(e.defaultValues)?void 0:e.defaultValues});if(!t.current)if(e.formControl)t.current={...e.formControl,formState:n},e.defaultValues&&!Ki(e.defaultValues)&&e.formControl.reset(e.defaultValues,e.resetOptions);else{const{formControl:l,...u}=lL(e);t.current={...u,formState:n}}const i=t.current.control;return i._options=e,Px(()=>{const l=i._subscribe({formState:i._proxyFormState,callback:()=>s({...i._formState}),reRenderRoot:!0});return s(u=>({...u,isReady:!0})),i._formState.isReady=!0,l},[i]),it.useEffect(()=>i._disableForm(e.disabled),[i,e.disabled]),it.useEffect(()=>{e.mode&&(i._options.mode=e.mode),e.reValidateMode&&(i._options.reValidateMode=e.reValidateMode)},[i,e.mode,e.reValidateMode]),it.useEffect(()=>{e.errors&&(i._setErrors(e.errors),i._focusError())},[i,e.errors]),it.useEffect(()=>{e.shouldUnregister&&i._subjects.state.next({values:i._getWatch()})},[i,e.shouldUnregister]),it.useEffect(()=>{if(i._proxyFormState.isDirty){const l=i._getDirty();l!==n.isDirty&&i._subjects.state.next({isDirty:l})}},[i,n.isDirty]),it.useEffect(()=>{e.values&&!Hi(e.values,r.current)?(i._reset(e.values,{keepFieldsRef:!0,...i._options.resetOptions}),r.current=e.values,s(l=>({...l}))):i._resetDefaultValues()},[i,e.values]),it.useEffect(()=>{i._state.mount||(i._setValid(),i._state.mount=!0),i._state.watch&&(i._state.watch=!1,i._subjects.state.next({...i._formState})),i._removeUnmounted()}),t.current.formState=BE(n,i),t.current}function YE(e){var t,r,n="";if(typeof e=="string"||typeof e=="number")n+=e;else if(typeof e=="object")if(Array.isArray(e)){var s=e.length;for(t=0;t<s;t++)e[t]&&(r=YE(e[t]))&&(n&&(n+=" "),n+=r)}else for(r in e)e[r]&&(n&&(n+=" "),n+=r);return n}function Nr(){for(var e,t,r=0,n="",s=arguments.length;r<s;r++)(e=arguments[r])&&(t=YE(e))&&(n&&(n+=" "),n+=t);return n}var cL=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"];function Ix(e){if(typeof e!="string")return!1;var t=cL;return t.includes(e)}var uL=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"];function JE(e){if(typeof e!="string")return!1;var t=uL;return t.includes(e)}function XE(e){return typeof e=="string"&&e.startsWith("data-")}function Fo(e){var t=Object.entries(e).filter(r=>{var[n]=r;return JE(n)||XE(n)});return Object.fromEntries(t)}function Dx(e){if(e==null)return null;if(v.isValidElement(e)&&typeof e.props=="object"&&e.props!==null){var t=e.props;return Fo(t)}return typeof e=="object"&&!Array.isArray(e)?Fo(e):null}function Si(e){var t=Object.entries(e).filter(r=>{var[n]=r;return JE(n)||XE(n)||Ix(n)});return Object.fromEntries(t)}var dL=["children","width","height","viewBox","className","style","title","desc"];function h0(){return h0=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},h0.apply(null,arguments)}function fL(e,t){if(e==null)return{};var r,n,s=hL(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function hL(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var QE=v.forwardRef((e,t)=>{var{children:r,width:n,height:s,viewBox:i,className:l,style:u,title:d,desc:m}=e,f=fL(e,dL),p=i||{width:n,height:s,x:0,y:0},y=Nr("recharts-surface",l);return v.createElement("svg",h0({},Si(f),{className:y,width:n,height:s,style:u,viewBox:"".concat(p.x," ").concat(p.y," ").concat(p.width," ").concat(p.height),ref:t}),v.createElement("title",null,d),v.createElement("desc",null,m),r)}),mL=["children","className"];function m0(){return m0=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},m0.apply(null,arguments)}function pL(e,t){if(e==null)return{};var r,n,s=gL(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function gL(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var Ka=v.forwardRef((e,t)=>{var{children:r,className:n}=e,s=pL(e,mL),i=Nr("recharts-layer",n);return v.createElement("g",m0({className:i},Si(s),{ref:t}),r)}),yL=v.createContext(null);function gr(e){return function(){return e}}const ZE=Math.cos,Th=Math.sin,ta=Math.sqrt,Ih=Math.PI,Om=2*Ih,p0=Math.PI,g0=2*p0,ll=1e-6,vL=g0-ll;function eA(e){this._+=e[0];for(let t=1,r=e.length;t<r;++t)this._+=arguments[t]+e[t]}function xL(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return eA;const r=10**t;return function(n){this._+=n[0];for(let s=1,i=n.length;s<i;++s)this._+=Math.round(arguments[s]*r)/r+n[s]}}class wL{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?eA:xL(t)}moveTo(t,r){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+r}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,r){this._append`L${this._x1=+t},${this._y1=+r}`}quadraticCurveTo(t,r,n,s){this._append`Q${+t},${+r},${this._x1=+n},${this._y1=+s}`}bezierCurveTo(t,r,n,s,i,l){this._append`C${+t},${+r},${+n},${+s},${this._x1=+i},${this._y1=+l}`}arcTo(t,r,n,s,i){if(t=+t,r=+r,n=+n,s=+s,i=+i,i<0)throw new Error(`negative radius: ${i}`);let l=this._x1,u=this._y1,d=n-t,m=s-r,f=l-t,p=u-r,y=f*f+p*p;if(this._x1===null)this._append`M${this._x1=t},${this._y1=r}`;else if(y>ll)if(!(Math.abs(p*d-m*f)>ll)||!i)this._append`L${this._x1=t},${this._y1=r}`;else{let x=n-l,j=s-u,b=d*d+m*m,k=x*x+j*j,_=Math.sqrt(b),E=Math.sqrt(y),C=i*Math.tan((p0-Math.acos((b+y-k)/(2*_*E)))/2),O=C/E,T=C/_;Math.abs(O-1)>ll&&this._append`L${t+O*f},${r+O*p}`,this._append`A${i},${i},0,0,${+(p*x>f*j)},${this._x1=t+T*d},${this._y1=r+T*m}`}}arc(t,r,n,s,i,l){if(t=+t,r=+r,n=+n,l=!!l,n<0)throw new Error(`negative radius: ${n}`);let u=n*Math.cos(s),d=n*Math.sin(s),m=t+u,f=r+d,p=1^l,y=l?s-i:i-s;this._x1===null?this._append`M${m},${f}`:(Math.abs(this._x1-m)>ll||Math.abs(this._y1-f)>ll)&&this._append`L${m},${f}`,n&&(y<0&&(y=y%g0+g0),y>vL?this._append`A${n},${n},0,1,${p},${t-u},${r-d}A${n},${n},0,1,${p},${this._x1=m},${this._y1=f}`:y>ll&&this._append`A${n},${n},0,${+(y>=p0)},${p},${this._x1=t+n*Math.cos(i)},${this._y1=r+n*Math.sin(i)}`)}rect(t,r,n,s){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+r}h${n=+n}v${+s}h${-n}Z`}toString(){return this._}}function Rx(e){let t=3;return e.digits=function(r){if(!arguments.length)return t;if(r==null)t=null;else{const n=Math.floor(r);if(!(n>=0))throw new RangeError(`invalid digits: ${r}`);t=n}return e},()=>new wL(t)}function $x(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function tA(e){this._context=e}tA.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function Tm(e){return new tA(e)}function rA(e){return e[0]}function nA(e){return e[1]}function sA(e,t){var r=gr(!0),n=null,s=Tm,i=null,l=Rx(u);e=typeof e=="function"?e:e===void 0?rA:gr(e),t=typeof t=="function"?t:t===void 0?nA:gr(t);function u(d){var m,f=(d=$x(d)).length,p,y=!1,x;for(n==null&&(i=s(x=l())),m=0;m<=f;++m)!(m<f&&r(p=d[m],m,d))===y&&((y=!y)?i.lineStart():i.lineEnd()),y&&i.point(+e(p,m,d),+t(p,m,d));if(x)return i=null,x+""||null}return u.x=function(d){return arguments.length?(e=typeof d=="function"?d:gr(+d),u):e},u.y=function(d){return arguments.length?(t=typeof d=="function"?d:gr(+d),u):t},u.defined=function(d){return arguments.length?(r=typeof d=="function"?d:gr(!!d),u):r},u.curve=function(d){return arguments.length?(s=d,n!=null&&(i=s(n)),u):s},u.context=function(d){return arguments.length?(d==null?n=i=null:i=s(n=d),u):n},u}function Hf(e,t,r){var n=null,s=gr(!0),i=null,l=Tm,u=null,d=Rx(m);e=typeof e=="function"?e:e===void 0?rA:gr(+e),t=typeof t=="function"?t:gr(t===void 0?0:+t),r=typeof r=="function"?r:r===void 0?nA:gr(+r);function m(p){var y,x,j,b=(p=$x(p)).length,k,_=!1,E,C=new Array(b),O=new Array(b);for(i==null&&(u=l(E=d())),y=0;y<=b;++y){if(!(y<b&&s(k=p[y],y,p))===_)if(_=!_)x=y,u.areaStart(),u.lineStart();else{for(u.lineEnd(),u.lineStart(),j=y-1;j>=x;--j)u.point(C[j],O[j]);u.lineEnd(),u.areaEnd()}_&&(C[y]=+e(k,y,p),O[y]=+t(k,y,p),u.point(n?+n(k,y,p):C[y],r?+r(k,y,p):O[y]))}if(E)return u=null,E+""||null}function f(){return sA().defined(s).curve(l).context(i)}return m.x=function(p){return arguments.length?(e=typeof p=="function"?p:gr(+p),n=null,m):e},m.x0=function(p){return arguments.length?(e=typeof p=="function"?p:gr(+p),m):e},m.x1=function(p){return arguments.length?(n=p==null?null:typeof p=="function"?p:gr(+p),m):n},m.y=function(p){return arguments.length?(t=typeof p=="function"?p:gr(+p),r=null,m):t},m.y0=function(p){return arguments.length?(t=typeof p=="function"?p:gr(+p),m):t},m.y1=function(p){return arguments.length?(r=p==null?null:typeof p=="function"?p:gr(+p),m):r},m.lineX0=m.lineY0=function(){return f().x(e).y(t)},m.lineY1=function(){return f().x(e).y(r)},m.lineX1=function(){return f().x(n).y(t)},m.defined=function(p){return arguments.length?(s=typeof p=="function"?p:gr(!!p),m):s},m.curve=function(p){return arguments.length?(l=p,i!=null&&(u=l(i)),m):l},m.context=function(p){return arguments.length?(p==null?i=u=null:u=l(i=p),m):i},m}class iA{constructor(t,r){this._context=t,this._x=r}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(t,r){switch(t=+t,r=+r,this._point){case 0:{this._point=1,this._line?this._context.lineTo(t,r):this._context.moveTo(t,r);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+t)/2,this._y0,this._x0,r,t,r):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+r)/2,t,this._y0,t,r);break}}this._x0=t,this._y0=r}}function bL(e){return new iA(e,!0)}function jL(e){return new iA(e,!1)}const Mx={draw(e,t){const r=ta(t/Ih);e.moveTo(r,0),e.arc(0,0,r,0,Om)}},SL={draw(e,t){const r=ta(t/5)/2;e.moveTo(-3*r,-r),e.lineTo(-r,-r),e.lineTo(-r,-3*r),e.lineTo(r,-3*r),e.lineTo(r,-r),e.lineTo(3*r,-r),e.lineTo(3*r,r),e.lineTo(r,r),e.lineTo(r,3*r),e.lineTo(-r,3*r),e.lineTo(-r,r),e.lineTo(-3*r,r),e.closePath()}},aA=ta(1/3),kL=aA*2,NL={draw(e,t){const r=ta(t/kL),n=r*aA;e.moveTo(0,-r),e.lineTo(n,0),e.lineTo(0,r),e.lineTo(-n,0),e.closePath()}},_L={draw(e,t){const r=ta(t),n=-r/2;e.rect(n,n,r,r)}},CL=.8908130915292852,oA=Th(Ih/10)/Th(7*Ih/10),EL=Th(Om/10)*oA,AL=-ZE(Om/10)*oA,PL={draw(e,t){const r=ta(t*CL),n=EL*r,s=AL*r;e.moveTo(0,-r),e.lineTo(n,s);for(let i=1;i<5;++i){const l=Om*i/5,u=ZE(l),d=Th(l);e.lineTo(d*r,-u*r),e.lineTo(u*n-d*s,d*n+u*s)}e.closePath()}},iy=ta(3),OL={draw(e,t){const r=-ta(t/(iy*3));e.moveTo(0,r*2),e.lineTo(-iy*r,-r),e.lineTo(iy*r,-r),e.closePath()}},yi=-.5,vi=ta(3)/2,y0=1/ta(12),TL=(y0/2+1)*3,IL={draw(e,t){const r=ta(t/TL),n=r/2,s=r*y0,i=n,l=r*y0+r,u=-i,d=l;e.moveTo(n,s),e.lineTo(i,l),e.lineTo(u,d),e.lineTo(yi*n-vi*s,vi*n+yi*s),e.lineTo(yi*i-vi*l,vi*i+yi*l),e.lineTo(yi*u-vi*d,vi*u+yi*d),e.lineTo(yi*n+vi*s,yi*s-vi*n),e.lineTo(yi*i+vi*l,yi*l-vi*i),e.lineTo(yi*u+vi*d,yi*d-vi*u),e.closePath()}};function DL(e,t){let r=null,n=Rx(s);e=typeof e=="function"?e:gr(e||Mx),t=typeof t=="function"?t:gr(t===void 0?64:+t);function s(){let i;if(r||(r=i=n()),e.apply(this,arguments).draw(r,+t.apply(this,arguments)),i)return r=null,i+""||null}return s.type=function(i){return arguments.length?(e=typeof i=="function"?i:gr(i),s):e},s.size=function(i){return arguments.length?(t=typeof i=="function"?i:gr(+i),s):t},s.context=function(i){return arguments.length?(r=i??null,s):r},s}function Dh(){}function Rh(e,t,r){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+r)/6)}function lA(e){this._context=e}lA.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:Rh(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:Rh(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function RL(e){return new lA(e)}function cA(e){this._context=e}cA.prototype={areaStart:Dh,areaEnd:Dh,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:Rh(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function $L(e){return new cA(e)}function uA(e){this._context=e}uA.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var r=(this._x0+4*this._x1+e)/6,n=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(r,n):this._context.moveTo(r,n);break;case 3:this._point=4;default:Rh(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function ML(e){return new uA(e)}function dA(e){this._context=e}dA.prototype={areaStart:Dh,areaEnd:Dh,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}};function FL(e){return new dA(e)}function ik(e){return e<0?-1:1}function ak(e,t,r){var n=e._x1-e._x0,s=t-e._x1,i=(e._y1-e._y0)/(n||s<0&&-0),l=(r-e._y1)/(s||n<0&&-0),u=(i*s+l*n)/(n+s);return(ik(i)+ik(l))*Math.min(Math.abs(i),Math.abs(l),.5*Math.abs(u))||0}function ok(e,t){var r=e._x1-e._x0;return r?(3*(e._y1-e._y0)/r-t)/2:t}function ay(e,t,r){var n=e._x0,s=e._y0,i=e._x1,l=e._y1,u=(i-n)/3;e._context.bezierCurveTo(n+u,s+u*t,i-u,l-u*r,i,l)}function $h(e){this._context=e}$h.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:ay(this,this._t0,ok(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var r=NaN;if(e=+e,t=+t,!(e===this._x1&&t===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,ay(this,ok(this,r=ak(this,e,t)),r);break;default:ay(this,this._t0,r=ak(this,e,t));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=r}}};function fA(e){this._context=new hA(e)}(fA.prototype=Object.create($h.prototype)).point=function(e,t){$h.prototype.point.call(this,t,e)};function hA(e){this._context=e}hA.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,r,n,s,i){this._context.bezierCurveTo(t,e,n,r,i,s)}};function LL(e){return new $h(e)}function zL(e){return new fA(e)}function mA(e){this._context=e}mA.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,r=e.length;if(r)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),r===2)this._context.lineTo(e[1],t[1]);else for(var n=lk(e),s=lk(t),i=0,l=1;l<r;++i,++l)this._context.bezierCurveTo(n[0][i],s[0][i],n[1][i],s[1][i],e[l],t[l]);(this._line||this._line!==0&&r===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}};function lk(e){var t,r=e.length-1,n,s=new Array(r),i=new Array(r),l=new Array(r);for(s[0]=0,i[0]=2,l[0]=e[0]+2*e[1],t=1;t<r-1;++t)s[t]=1,i[t]=4,l[t]=4*e[t]+2*e[t+1];for(s[r-1]=2,i[r-1]=7,l[r-1]=8*e[r-1]+e[r],t=1;t<r;++t)n=s[t]/i[t-1],i[t]-=n,l[t]-=n*l[t-1];for(s[r-1]=l[r-1]/i[r-1],t=r-2;t>=0;--t)s[t]=(l[t]-s[t+1])/i[t];for(i[r-1]=(e[r]+s[r-1])/2,t=0;t<r-1;++t)i[t]=2*e[t+1]-s[t+1];return[s,i]}function UL(e){return new mA(e)}function Im(e,t){this._context=e,this._t=t}Im.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var r=this._x*(1-this._t)+e*this._t;this._context.lineTo(r,this._y),this._context.lineTo(r,t)}break}}this._x=e,this._y=t}};function BL(e){return new Im(e,.5)}function WL(e){return new Im(e,0)}function qL(e){return new Im(e,1)}function Dc(e,t){if((l=e.length)>1)for(var r=1,n,s,i=e[t[0]],l,u=i.length;r<l;++r)for(s=i,i=e[t[r]],n=0;n<u;++n)i[n][1]+=i[n][0]=isNaN(s[n][1])?s[n][0]:s[n][1]}function v0(e){for(var t=e.length,r=new Array(t);--t>=0;)r[t]=t;return r}function VL(e,t){return e[t]}function HL(e){const t=[];return t.key=e,t}function KL(){var e=gr([]),t=v0,r=Dc,n=VL;function s(i){var l=Array.from(e.apply(this,arguments),HL),u,d=l.length,m=-1,f;for(const p of i)for(u=0,++m;u<d;++u)(l[u][m]=[0,+n(p,l[u].key,m,i)]).data=p;for(u=0,f=$x(t(l));u<d;++u)l[f[u]].index=u;return r(l,f),l}return s.keys=function(i){return arguments.length?(e=typeof i=="function"?i:gr(Array.from(i)),s):e},s.value=function(i){return arguments.length?(n=typeof i=="function"?i:gr(+i),s):n},s.order=function(i){return arguments.length?(t=i==null?v0:typeof i=="function"?i:gr(Array.from(i)),s):t},s.offset=function(i){return arguments.length?(r=i??Dc,s):r},s}function GL(e,t){if((n=e.length)>0){for(var r,n,s=0,i=e[0].length,l;s<i;++s){for(l=r=0;r<n;++r)l+=e[r][s][1]||0;if(l)for(r=0;r<n;++r)e[r][s][1]/=l}Dc(e,t)}}function YL(e,t){if((s=e.length)>0){for(var r=0,n=e[t[0]],s,i=n.length;r<i;++r){for(var l=0,u=0;l<s;++l)u+=e[l][r][1]||0;n[r][1]+=n[r][0]=-u/2}Dc(e,t)}}function JL(e,t){if(!(!((l=e.length)>0)||!((i=(s=e[t[0]]).length)>0))){for(var r=0,n=1,s,i,l;n<i;++n){for(var u=0,d=0,m=0;u<l;++u){for(var f=e[t[u]],p=f[n][1]||0,y=f[n-1][1]||0,x=(p-y)/2,j=0;j<u;++j){var b=e[t[j]],k=b[n][1]||0,_=b[n-1][1]||0;x+=k-_}d+=p,m+=x*p}s[n-1][1]+=s[n-1][0]=r,d&&(r-=m/d)}s[n-1][1]+=s[n-1][0]=r,Dc(e,t)}}var oy={},ly={},ck;function XL(){return ck||(ck=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r==="__proto__"}e.isUnsafeProperty=t})(ly)),ly}var cy={},uk;function pA(){return uk||(uk=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){switch(typeof r){case"number":case"symbol":return!1;case"string":return r.includes(".")||r.includes("[")||r.includes("]")}}e.isDeepKey=t})(cy)),cy}var uy={},dk;function Fx(){return dk||(dk=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){var n;return typeof r=="string"||typeof r=="symbol"?r:Object.is((n=r==null?void 0:r.valueOf)==null?void 0:n.call(r),-0)?"-0":String(r)}e.toKey=t})(uy)),uy}var dy={},fy={},fk;function QL(){return fk||(fk=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){if(r==null)return"";if(typeof r=="string")return r;if(Array.isArray(r))return r.map(t).join(",");const n=String(r);return n==="0"&&Object.is(Number(r),-0)?"-0":n}e.toString=t})(fy)),fy}var hk;function Lx(){return hk||(hk=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=QL(),r=Fx();function n(s){if(Array.isArray(s))return s.map(r.toKey);if(typeof s=="symbol")return[s];s=t.toString(s);const i=[],l=s.length;if(l===0)return i;let u=0,d="",m="",f=!1;for(s.charCodeAt(0)===46&&(i.push(""),u++);u<l;){const p=s[u];m?p==="\\"&&u+1<l?(u++,d+=s[u]):p===m?m="":d+=p:f?p==='"'||p==="'"?m=p:p==="]"?(f=!1,i.push(d),d=""):d+=p:p==="["?(f=!0,d&&(i.push(d),d="")):p==="."?d&&(i.push(d),d=""):d+=p,u++}return d&&i.push(d),i}e.toPath=n})(dy)),dy}var mk;function zx(){return mk||(mk=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=XL(),r=pA(),n=Fx(),s=Lx();function i(u,d,m){if(u==null)return m;switch(typeof d){case"string":{if(t.isUnsafeProperty(d))return m;const f=u[d];return f===void 0?r.isDeepKey(d)?i(u,s.toPath(d),m):m:f}case"number":case"symbol":{typeof d=="number"&&(d=n.toKey(d));const f=u[d];return f===void 0?m:f}default:{if(Array.isArray(d))return l(u,d,m);if(Object.is(d==null?void 0:d.valueOf(),-0)?d="-0":d=String(d),t.isUnsafeProperty(d))return m;const f=u[d];return f===void 0?m:f}}}function l(u,d,m){if(d.length===0)return m;let f=u;for(let p=0;p<d.length;p++){if(f==null||t.isUnsafeProperty(d[p]))return m;f=f[d[p]]}return f===void 0?m:f}e.get=i})(oy)),oy}var hy,pk;function ZL(){return pk||(pk=1,hy=zx().get),hy}var ez=ZL();const Rc=Zi(ez);var ni=e=>e===0?0:e>0?1:-1,ya=e=>typeof e=="number"&&e!=+e,Ga=e=>typeof e=="string"&&e.indexOf("%")===e.length-1,mt=e=>(typeof e=="number"||e instanceof Number)&&!ya(e),va=e=>mt(e)||typeof e=="string",tz=0,ud=e=>{var t=++tz;return"".concat(e||"").concat(t)},Qi=function(t,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!mt(t)&&typeof t!="string")return n;var i;if(Ga(t)){if(r==null)return n;var l=t.indexOf("%");i=r*parseFloat(t.slice(0,l))/100}else i=+t;return ya(i)&&(i=n),s&&r!=null&&i>r&&(i=r),i},gA=e=>{if(!Array.isArray(e))return!1;for(var t=e.length,r={},n=0;n<t;n++)if(!r[e[n]])r[e[n]]=!0;else return!0;return!1};function rs(e,t,r){return mt(e)&&mt(t)?e+r*(t-e):t}function rz(e,t,r){if(!(!e||!e.length))return e.find(n=>n&&(typeof t=="function"?t(n):Rc(n,t))===r)}var Hn=e=>e===null||typeof e>"u",Ad=e=>Hn(e)?e:"".concat(e.charAt(0).toUpperCase()).concat(e.slice(1));function nz(e){return e!=null}function Xc(){}var sz=["type","size","sizeType"];function x0(){return x0=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},x0.apply(null,arguments)}function gk(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function yk(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?gk(Object(r),!0).forEach(function(n){iz(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):gk(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function iz(e,t,r){return(t=az(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function az(e){var t=oz(e,"string");return typeof t=="symbol"?t:t+""}function oz(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function lz(e,t){if(e==null)return{};var r,n,s=cz(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function cz(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var yA={symbolCircle:Mx,symbolCross:SL,symbolDiamond:NL,symbolSquare:_L,symbolStar:PL,symbolTriangle:OL,symbolWye:IL},uz=Math.PI/180,dz=e=>{var t="symbol".concat(Ad(e));return yA[t]||Mx},fz=(e,t,r)=>{if(t==="area")return e;switch(r){case"cross":return 5*e*e/9;case"diamond":return .5*e*e/Math.sqrt(3);case"square":return e*e;case"star":{var n=18*uz;return 1.25*e*e*(Math.tan(n)-Math.tan(n*2)*Math.tan(n)**2)}case"triangle":return Math.sqrt(3)*e*e/4;case"wye":return(21-10*Math.sqrt(3))*e*e/8;default:return Math.PI*e*e/4}},hz=(e,t)=>{yA["symbol".concat(Ad(e))]=t},vA=e=>{var{type:t="circle",size:r=64,sizeType:n="area"}=e,s=lz(e,sz),i=yk(yk({},s),{},{type:t,size:r,sizeType:n}),l="circle";typeof t=="string"&&(l=t);var u=()=>{var y=dz(l),x=DL().type(y).size(fz(r,n,l)),j=x();if(j!==null)return j},{className:d,cx:m,cy:f}=i,p=Si(i);return mt(m)&&mt(f)&&mt(r)?v.createElement("path",x0({},p,{className:Nr("recharts-symbols",d),transform:"translate(".concat(m,", ").concat(f,")"),d:u()})):null};vA.registerSymbol=hz;var xA=e=>"radius"in e&&"startAngle"in e&&"endAngle"in e,mz=(e,t)=>{if(!e||typeof e=="function"||typeof e=="boolean")return null;var r=e;if(v.isValidElement(e)&&(r=e.props),typeof r!="object"&&typeof r!="function")return null;var n={};return Object.keys(r).forEach(s=>{Ix(s)&&(n[s]=(i=>r[s](r,i)))}),n},pz=(e,t,r)=>n=>(e(t,r,n),null),Ux=(e,t,r)=>{if(e===null||typeof e!="object"&&typeof e!="function")return null;var n=null;return Object.keys(e).forEach(s=>{var i=e[s];Ix(s)&&typeof i=="function"&&(n||(n={}),n[s]=pz(i,t,r))}),n};function vk(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function gz(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?vk(Object(r),!0).forEach(function(n){yz(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):vk(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function yz(e,t,r){return(t=vz(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function vz(e){var t=xz(e,"string");return typeof t=="symbol"?t:t+""}function xz(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Ci(e,t){var r=gz({},e),n=t,s=Object.keys(t),i=s.reduce((l,u)=>(l[u]===void 0&&n[u]!==void 0&&(l[u]=n[u]),l),r);return i}var my={},py={},xk;function wz(){return xk||(xk=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r,n){const s=new Map;for(let i=0;i<r.length;i++){const l=r[i],u=n(l);s.has(u)||s.set(u,l)}return Array.from(s.values())}e.uniqBy=t})(py)),py}var gy={},wk;function wA(){return wk||(wk=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r}e.identity=t})(gy)),gy}var yy={},vy={},xy={},bk;function bz(){return bk||(bk=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return Number.isSafeInteger(r)&&r>=0}e.isLength=t})(xy)),xy}var jk;function Bx(){return jk||(jk=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=bz();function r(n){return n!=null&&typeof n!="function"&&t.isLength(n.length)}e.isArrayLike=r})(vy)),vy}var wy={},Sk;function jz(){return Sk||(Sk=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return typeof r=="object"&&r!==null}e.isObjectLike=t})(wy)),wy}var kk;function Sz(){return kk||(kk=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Bx(),r=jz();function n(s){return r.isObjectLike(s)&&t.isArrayLike(s)}e.isArrayLikeObject=n})(yy)),yy}var by={},jy={},Nk;function kz(){return Nk||(Nk=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=zx();function r(n){return function(s){return t.get(s,n)}}e.property=r})(jy)),jy}var Sy={},ky={},Ny={},_y={},_k;function bA(){return _k||(_k=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r!==null&&(typeof r=="object"||typeof r=="function")}e.isObject=t})(_y)),_y}var Cy={},Ck;function jA(){return Ck||(Ck=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r==null||typeof r!="object"&&typeof r!="function"}e.isPrimitive=t})(Cy)),Cy}var Ey={},Ek;function SA(){return Ek||(Ek=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r,n){return r===n||Number.isNaN(r)&&Number.isNaN(n)}e.eq=t})(Ey)),Ey}var Ak;function Nz(){return Ak||(Ak=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=bA(),r=jA(),n=SA();function s(f,p,y){return typeof y!="function"?s(f,p,()=>{}):i(f,p,function x(j,b,k,_,E,C){const O=y(j,b,k,_,E,C);return O!==void 0?!!O:i(j,b,x,C)},new Map)}function i(f,p,y,x){if(p===f)return!0;switch(typeof p){case"object":return l(f,p,y,x);case"function":return Object.keys(p).length>0?i(f,{...p},y,x):n.eq(f,p);default:return t.isObject(f)?typeof p=="string"?p==="":!0:n.eq(f,p)}}function l(f,p,y,x){if(p==null)return!0;if(Array.isArray(p))return d(f,p,y,x);if(p instanceof Map)return u(f,p,y,x);if(p instanceof Set)return m(f,p,y,x);const j=Object.keys(p);if(f==null)return j.length===0;if(j.length===0)return!0;if(x!=null&&x.has(p))return x.get(p)===f;x==null||x.set(p,f);try{for(let b=0;b<j.length;b++){const k=j[b];if(!r.isPrimitive(f)&&!(k in f)||p[k]===void 0&&f[k]!==void 0||p[k]===null&&f[k]!==null||!y(f[k],p[k],k,f,p,x))return!1}return!0}finally{x==null||x.delete(p)}}function u(f,p,y,x){if(p.size===0)return!0;if(!(f instanceof Map))return!1;for(const[j,b]of p.entries()){const k=f.get(j);if(y(k,b,j,f,p,x)===!1)return!1}return!0}function d(f,p,y,x){if(p.length===0)return!0;if(!Array.isArray(f))return!1;const j=new Set;for(let b=0;b<p.length;b++){const k=p[b];let _=!1;for(let E=0;E<f.length;E++){if(j.has(E))continue;const C=f[E];let O=!1;if(y(C,k,b,f,p,x)&&(O=!0),O){j.add(E),_=!0;break}}if(!_)return!1}return!0}function m(f,p,y,x){return p.size===0?!0:f instanceof Set?d([...f],[...p],y,x):!1}e.isMatchWith=s,e.isSetMatch=m})(Ny)),Ny}var Pk;function kA(){return Pk||(Pk=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Nz();function r(n,s){return t.isMatchWith(n,s,()=>{})}e.isMatch=r})(ky)),ky}var Ay={},Py={},Oy={},Ok;function _z(){return Ok||(Ok=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return Object.getOwnPropertySymbols(r).filter(n=>Object.prototype.propertyIsEnumerable.call(r,n))}e.getSymbols=t})(Oy)),Oy}var Ty={},Tk;function NA(){return Tk||(Tk=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r==null?r===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(r)}e.getTag=t})(Ty)),Ty}var Iy={},Ik;function _A(){return Ik||(Ik=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t="[object RegExp]",r="[object String]",n="[object Number]",s="[object Boolean]",i="[object Arguments]",l="[object Symbol]",u="[object Date]",d="[object Map]",m="[object Set]",f="[object Array]",p="[object Function]",y="[object ArrayBuffer]",x="[object Object]",j="[object Error]",b="[object DataView]",k="[object Uint8Array]",_="[object Uint8ClampedArray]",E="[object Uint16Array]",C="[object Uint32Array]",O="[object BigUint64Array]",T="[object Int8Array]",A="[object Int16Array]",L="[object Int32Array]",J="[object BigInt64Array]",H="[object Float32Array]",me="[object Float64Array]";e.argumentsTag=i,e.arrayBufferTag=y,e.arrayTag=f,e.bigInt64ArrayTag=J,e.bigUint64ArrayTag=O,e.booleanTag=s,e.dataViewTag=b,e.dateTag=u,e.errorTag=j,e.float32ArrayTag=H,e.float64ArrayTag=me,e.functionTag=p,e.int16ArrayTag=A,e.int32ArrayTag=L,e.int8ArrayTag=T,e.mapTag=d,e.numberTag=n,e.objectTag=x,e.regexpTag=t,e.setTag=m,e.stringTag=r,e.symbolTag=l,e.uint16ArrayTag=E,e.uint32ArrayTag=C,e.uint8ArrayTag=k,e.uint8ClampedArrayTag=_})(Iy)),Iy}var Dy={},Dk;function Cz(){return Dk||(Dk=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return ArrayBuffer.isView(r)&&!(r instanceof DataView)}e.isTypedArray=t})(Dy)),Dy}var Rk;function CA(){return Rk||(Rk=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=_z(),r=NA(),n=_A(),s=jA(),i=Cz();function l(f,p){return u(f,void 0,f,new Map,p)}function u(f,p,y,x=new Map,j=void 0){const b=j==null?void 0:j(f,p,y,x);if(b!==void 0)return b;if(s.isPrimitive(f))return f;if(x.has(f))return x.get(f);if(Array.isArray(f)){const k=new Array(f.length);x.set(f,k);for(let _=0;_<f.length;_++)k[_]=u(f[_],_,y,x,j);return Object.hasOwn(f,"index")&&(k.index=f.index),Object.hasOwn(f,"input")&&(k.input=f.input),k}if(f instanceof Date)return new Date(f.getTime());if(f instanceof RegExp){const k=new RegExp(f.source,f.flags);return k.lastIndex=f.lastIndex,k}if(f instanceof Map){const k=new Map;x.set(f,k);for(const[_,E]of f)k.set(_,u(E,_,y,x,j));return k}if(f instanceof Set){const k=new Set;x.set(f,k);for(const _ of f)k.add(u(_,void 0,y,x,j));return k}if(typeof Buffer<"u"&&Buffer.isBuffer(f))return f.subarray();if(i.isTypedArray(f)){const k=new(Object.getPrototypeOf(f)).constructor(f.length);x.set(f,k);for(let _=0;_<f.length;_++)k[_]=u(f[_],_,y,x,j);return k}if(f instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&f instanceof SharedArrayBuffer)return f.slice(0);if(f instanceof DataView){const k=new DataView(f.buffer.slice(0),f.byteOffset,f.byteLength);return x.set(f,k),d(k,f,y,x,j),k}if(typeof File<"u"&&f instanceof File){const k=new File([f],f.name,{type:f.type});return x.set(f,k),d(k,f,y,x,j),k}if(typeof Blob<"u"&&f instanceof Blob){const k=new Blob([f],{type:f.type});return x.set(f,k),d(k,f,y,x,j),k}if(f instanceof Error){const k=new f.constructor;return x.set(f,k),k.message=f.message,k.name=f.name,k.stack=f.stack,k.cause=f.cause,d(k,f,y,x,j),k}if(f instanceof Boolean){const k=new Boolean(f.valueOf());return x.set(f,k),d(k,f,y,x,j),k}if(f instanceof Number){const k=new Number(f.valueOf());return x.set(f,k),d(k,f,y,x,j),k}if(f instanceof String){const k=new String(f.valueOf());return x.set(f,k),d(k,f,y,x,j),k}if(typeof f=="object"&&m(f)){const k=Object.create(Object.getPrototypeOf(f));return x.set(f,k),d(k,f,y,x,j),k}return f}function d(f,p,y=f,x,j){const b=[...Object.keys(p),...t.getSymbols(p)];for(let k=0;k<b.length;k++){const _=b[k],E=Object.getOwnPropertyDescriptor(f,_);(E==null||E.writable)&&(f[_]=u(p[_],_,y,x,j))}}function m(f){switch(r.getTag(f)){case n.argumentsTag:case n.arrayTag:case n.arrayBufferTag:case n.dataViewTag:case n.booleanTag:case n.dateTag:case n.float32ArrayTag:case n.float64ArrayTag:case n.int8ArrayTag:case n.int16ArrayTag:case n.int32ArrayTag:case n.mapTag:case n.numberTag:case n.objectTag:case n.regexpTag:case n.setTag:case n.stringTag:case n.symbolTag:case n.uint8ArrayTag:case n.uint8ClampedArrayTag:case n.uint16ArrayTag:case n.uint32ArrayTag:return!0;default:return!1}}e.cloneDeepWith=l,e.cloneDeepWithImpl=u,e.copyProperties=d})(Py)),Py}var $k;function Ez(){return $k||($k=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=CA();function r(n){return t.cloneDeepWithImpl(n,void 0,n,new Map,void 0)}e.cloneDeep=r})(Ay)),Ay}var Mk;function Az(){return Mk||(Mk=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=kA(),r=Ez();function n(s){return s=r.cloneDeep(s),i=>t.isMatch(i,s)}e.matches=n})(Sy)),Sy}var Ry={},$y={},My={},Fk;function Pz(){return Fk||(Fk=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=CA(),r=_A();function n(s,i){return t.cloneDeepWith(s,(l,u,d,m)=>{const f=i==null?void 0:i(l,u,d,m);if(f!==void 0)return f;if(typeof s=="object")switch(Object.prototype.toString.call(s)){case r.numberTag:case r.stringTag:case r.booleanTag:{const p=new s.constructor(s==null?void 0:s.valueOf());return t.copyProperties(p,s),p}case r.argumentsTag:{const p={};return t.copyProperties(p,s),p.length=s.length,p[Symbol.iterator]=s[Symbol.iterator],p}default:return}})}e.cloneDeepWith=n})(My)),My}var Lk;function Oz(){return Lk||(Lk=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Pz();function r(n){return t.cloneDeepWith(n)}e.cloneDeep=r})($y)),$y}var Fy={},Ly={},zk;function EA(){return zk||(zk=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=/^(?:0|[1-9]\d*)$/;function r(n,s=Number.MAX_SAFE_INTEGER){switch(typeof n){case"number":return Number.isInteger(n)&&n>=0&&n<s;case"symbol":return!1;case"string":return t.test(n)}}e.isIndex=r})(Ly)),Ly}var zy={},Uk;function Tz(){return Uk||(Uk=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=NA();function r(n){return n!==null&&typeof n=="object"&&t.getTag(n)==="[object Arguments]"}e.isArguments=r})(zy)),zy}var Bk;function Iz(){return Bk||(Bk=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=pA(),r=EA(),n=Tz(),s=Lx();function i(l,u){let d;if(Array.isArray(u)?d=u:typeof u=="string"&&t.isDeepKey(u)&&(l==null?void 0:l[u])==null?d=s.toPath(u):d=[u],d.length===0)return!1;let m=l;for(let f=0;f<d.length;f++){const p=d[f];if((m==null||!Object.hasOwn(m,p))&&!((Array.isArray(m)||n.isArguments(m))&&r.isIndex(p)&&p<m.length))return!1;m=m[p]}return!0}e.has=i})(Fy)),Fy}var Wk;function Dz(){return Wk||(Wk=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=kA(),r=Fx(),n=Oz(),s=zx(),i=Iz();function l(u,d){switch(typeof u){case"object":{Object.is(u==null?void 0:u.valueOf(),-0)&&(u="-0");break}case"number":{u=r.toKey(u);break}}return d=n.cloneDeep(d),function(m){const f=s.get(m,u);return f===void 0?i.has(m,u):d===void 0?f===void 0:t.isMatch(f,d)}}e.matchesProperty=l})(Ry)),Ry}var qk;function Rz(){return qk||(qk=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=wA(),r=kz(),n=Az(),s=Dz();function i(l){if(l==null)return t.identity;switch(typeof l){case"function":return l;case"object":return Array.isArray(l)&&l.length===2?s.matchesProperty(l[0],l[1]):n.matches(l);case"string":case"symbol":case"number":return r.property(l)}}e.iteratee=i})(by)),by}var Vk;function $z(){return Vk||(Vk=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=wz(),r=wA(),n=Sz(),s=Rz();function i(l,u=r.identity){return n.isArrayLikeObject(l)?t.uniqBy(Array.from(l),s.iteratee(u)):[]}e.uniqBy=i})(my)),my}var Uy,Hk;function Mz(){return Hk||(Hk=1,Uy=$z().uniqBy),Uy}var Fz=Mz();const Kk=Zi(Fz);function Lz(e,t,r){return t===!0?Kk(e,r):typeof t=="function"?Kk(e,t):e}var By={exports:{}},Wy={},qy={exports:{}},Vy={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Gk;function zz(){if(Gk)return Vy;Gk=1;var e=Wc();function t(p,y){return p===y&&(p!==0||1/p===1/y)||p!==p&&y!==y}var r=typeof Object.is=="function"?Object.is:t,n=e.useState,s=e.useEffect,i=e.useLayoutEffect,l=e.useDebugValue;function u(p,y){var x=y(),j=n({inst:{value:x,getSnapshot:y}}),b=j[0].inst,k=j[1];return i(function(){b.value=x,b.getSnapshot=y,d(b)&&k({inst:b})},[p,x,y]),s(function(){return d(b)&&k({inst:b}),p(function(){d(b)&&k({inst:b})})},[p]),l(x),x}function d(p){var y=p.getSnapshot;p=p.value;try{var x=y();return!r(p,x)}catch{return!0}}function m(p,y){return y()}var f=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?m:u;return Vy.useSyncExternalStore=e.useSyncExternalStore!==void 0?e.useSyncExternalStore:f,Vy}var Yk;function Uz(){return Yk||(Yk=1,qy.exports=zz()),qy.exports}/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Jk;function Bz(){if(Jk)return Wy;Jk=1;var e=Wc(),t=Uz();function r(m,f){return m===f&&(m!==0||1/m===1/f)||m!==m&&f!==f}var n=typeof Object.is=="function"?Object.is:r,s=t.useSyncExternalStore,i=e.useRef,l=e.useEffect,u=e.useMemo,d=e.useDebugValue;return Wy.useSyncExternalStoreWithSelector=function(m,f,p,y,x){var j=i(null);if(j.current===null){var b={hasValue:!1,value:null};j.current=b}else b=j.current;j=u(function(){function _(A){if(!E){if(E=!0,C=A,A=y(A),x!==void 0&&b.hasValue){var L=b.value;if(x(L,A))return O=L}return O=A}if(L=O,n(C,A))return L;var J=y(A);return x!==void 0&&x(L,J)?(C=A,L):(C=A,O=J)}var E=!1,C,O,T=p===void 0?null:p;return[function(){return _(f())},T===null?void 0:function(){return _(T())}]},[f,p,y,x]);var k=s(m,j[0],j[1]);return l(function(){b.hasValue=!0,b.value=k},[k]),d(k),k},Wy}var Xk;function Wz(){return Xk||(Xk=1,By.exports=Bz()),By.exports}var qz=Wz(),Wx=v.createContext(null),Vz=e=>e,rn=()=>{var e=v.useContext(Wx);return e?e.store.dispatch:Vz},mh=()=>{},Hz=()=>mh,Kz=(e,t)=>e===t;function at(e){var t=v.useContext(Wx);return qz.useSyncExternalStoreWithSelector(t?t.subscription.addNestedSub:Hz,t?t.store.getState:mh,t?t.store.getState:mh,t?e:mh,Kz)}function Gz(e,t=`expected a function, instead received ${typeof e}`){if(typeof e!="function")throw new TypeError(t)}function Yz(e,t=`expected an object, instead received ${typeof e}`){if(typeof e!="object")throw new TypeError(t)}function Jz(e,t="expected all items to be functions, instead received the following types: "){if(!e.every(r=>typeof r=="function")){const r=e.map(n=>typeof n=="function"?`function ${n.name||"unnamed"}()`:typeof n).join(", ");throw new TypeError(`${t}[${r}]`)}}var Qk=e=>Array.isArray(e)?e:[e];function Xz(e){const t=Array.isArray(e[0])?e[0]:e;return Jz(t,"createSelector expects all input-selectors to be functions, but received the following types: "),t}function Qz(e,t){const r=[],{length:n}=e;for(let s=0;s<n;s++)r.push(e[s].apply(null,t));return r}var Zz=class{constructor(e){this.value=e}deref(){return this.value}},e8=typeof WeakRef<"u"?WeakRef:Zz,t8=0,Zk=1;function Kf(){return{s:t8,v:void 0,o:null,p:null}}function AA(e,t={}){let r=Kf();const{resultEqualityCheck:n}=t;let s,i=0;function l(){var p;let u=r;const{length:d}=arguments;for(let y=0,x=d;y<x;y++){const j=arguments[y];if(typeof j=="function"||typeof j=="object"&&j!==null){let b=u.o;b===null&&(u.o=b=new WeakMap);const k=b.get(j);k===void 0?(u=Kf(),b.set(j,u)):u=k}else{let b=u.p;b===null&&(u.p=b=new Map);const k=b.get(j);k===void 0?(u=Kf(),b.set(j,u)):u=k}}const m=u;let f;if(u.s===Zk)f=u.v;else if(f=e.apply(null,arguments),i++,n){const y=((p=s==null?void 0:s.deref)==null?void 0:p.call(s))??s;y!=null&&n(y,f)&&(f=y,i!==0&&i--),s=typeof f=="object"&&f!==null||typeof f=="function"?new e8(f):f}return m.s=Zk,m.v=f,f}return l.clearCache=()=>{r=Kf(),l.resetResultsCount()},l.resultsCount=()=>i,l.resetResultsCount=()=>{i=0},l}function r8(e,...t){const r=typeof e=="function"?{memoize:e,memoizeOptions:t}:e,n=(...s)=>{let i=0,l=0,u,d={},m=s.pop();typeof m=="object"&&(d=m,m=s.pop()),Gz(m,`createSelector expects an output function after the inputs, but received: [${typeof m}]`);const f={...r,...d},{memoize:p,memoizeOptions:y=[],argsMemoize:x=AA,argsMemoizeOptions:j=[]}=f,b=Qk(y),k=Qk(j),_=Xz(s),E=p(function(){return i++,m.apply(null,arguments)},...b),C=x(function(){l++;const T=Qz(_,arguments);return u=E.apply(null,T),u},...k);return Object.assign(C,{resultFunc:m,memoizedResultFunc:E,dependencies:_,dependencyRecomputations:()=>l,resetDependencyRecomputations:()=>{l=0},lastResult:()=>u,recomputations:()=>i,resetRecomputations:()=>{i=0},memoize:p,argsMemoize:x})};return Object.assign(n,{withTypes:()=>n}),n}var xe=r8(AA),n8=Object.assign((e,t=xe)=>{Yz(e,`createStructuredSelector expects first argument to be an object where each property is a selector, instead received a ${typeof e}`);const r=Object.keys(e),n=r.map(i=>e[i]);return t(n,(...i)=>i.reduce((l,u,d)=>(l[r[d]]=u,l),{}))},{withTypes:()=>n8}),Hy={},Ky={},Gy={},eN;function s8(){return eN||(eN=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return typeof n=="symbol"?1:n===null?2:n===void 0?3:n!==n?4:0}const r=(n,s,i)=>{if(n!==s){const l=t(n),u=t(s);if(l===u&&l===0){if(n<s)return i==="desc"?1:-1;if(n>s)return i==="desc"?-1:1}return i==="desc"?u-l:l-u}return 0};e.compareValues=r})(Gy)),Gy}var Yy={},Jy={},tN;function PA(){return tN||(tN=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return typeof r=="symbol"||r instanceof Symbol}e.isSymbol=t})(Jy)),Jy}var rN;function i8(){return rN||(rN=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=PA(),r=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,n=/^\w*$/;function s(i,l){return Array.isArray(i)?!1:typeof i=="number"||typeof i=="boolean"||i==null||t.isSymbol(i)?!0:typeof i=="string"&&(n.test(i)||!r.test(i))||l!=null&&Object.hasOwn(l,i)}e.isKey=s})(Yy)),Yy}var nN;function a8(){return nN||(nN=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=s8(),r=i8(),n=Lx();function s(i,l,u,d){if(i==null)return[];u=d?void 0:u,Array.isArray(i)||(i=Object.values(i)),Array.isArray(l)||(l=l==null?[null]:[l]),l.length===0&&(l=[null]),Array.isArray(u)||(u=u==null?[]:[u]),u=u.map(x=>String(x));const m=(x,j)=>{let b=x;for(let k=0;k<j.length&&b!=null;++k)b=b[j[k]];return b},f=(x,j)=>j==null||x==null?j:typeof x=="object"&&"key"in x?Object.hasOwn(j,x.key)?j[x.key]:m(j,x.path):typeof x=="function"?x(j):Array.isArray(x)?m(j,x):typeof j=="object"?j[x]:j,p=l.map(x=>(Array.isArray(x)&&x.length===1&&(x=x[0]),x==null||typeof x=="function"||Array.isArray(x)||r.isKey(x)?x:{key:x,path:n.toPath(x)}));return i.map(x=>({original:x,criteria:p.map(j=>f(j,x))})).slice().sort((x,j)=>{for(let b=0;b<p.length;b++){const k=t.compareValues(x.criteria[b],j.criteria[b],u[b]);if(k!==0)return k}return 0}).map(x=>x.original)}e.orderBy=s})(Ky)),Ky}var Xy={},sN;function o8(){return sN||(sN=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r,n=1){const s=[],i=Math.floor(n),l=(u,d)=>{for(let m=0;m<u.length;m++){const f=u[m];Array.isArray(f)&&d<i?l(f,d+1):s.push(f)}};return l(r,0),s}e.flatten=t})(Xy)),Xy}var Qy={},iN;function OA(){return iN||(iN=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=EA(),r=Bx(),n=bA(),s=SA();function i(l,u,d){return n.isObject(d)&&(typeof u=="number"&&r.isArrayLike(d)&&t.isIndex(u)&&u<d.length||typeof u=="string"&&u in d)?s.eq(d[u],l):!1}e.isIterateeCall=i})(Qy)),Qy}var aN;function l8(){return aN||(aN=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=a8(),r=o8(),n=OA();function s(i,...l){const u=l.length;return u>1&&n.isIterateeCall(i,l[0],l[1])?l=[]:u>2&&n.isIterateeCall(l[0],l[1],l[2])&&(l=[l[0]]),t.orderBy(i,r.flatten(l),["asc"])}e.sortBy=s})(Hy)),Hy}var Zy,oN;function c8(){return oN||(oN=1,Zy=l8().sortBy),Zy}var u8=c8();const Dm=Zi(u8);var TA=e=>e.legend.settings,d8=e=>e.legend.size,f8=e=>e.legend.payload;xe([f8,TA],(e,t)=>{var{itemSorter:r}=t,n=e.flat(1);return r?Dm(n,r):n});var Gf=1;function h8(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],[t,r]=v.useState({height:0,left:0,top:0,width:0}),n=v.useCallback(s=>{if(s!=null){var i=s.getBoundingClientRect(),l={height:i.height,left:i.left,top:i.top,width:i.width};(Math.abs(l.height-t.height)>Gf||Math.abs(l.left-t.left)>Gf||Math.abs(l.top-t.top)>Gf||Math.abs(l.width-t.width)>Gf)&&r({height:l.height,left:l.left,top:l.top,width:l.width})}},[t.width,t.height,t.top,t.left,...e]);return[t,n]}function es(e){return`Minified Redux error #${e}; visit https://redux.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var m8=typeof Symbol=="function"&&Symbol.observable||"@@observable",lN=m8,ev=()=>Math.random().toString(36).substring(7).split("").join("."),p8={INIT:`@@redux/INIT${ev()}`,REPLACE:`@@redux/REPLACE${ev()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${ev()}`},Mh=p8;function qx(e){if(typeof e!="object"||e===null)return!1;let t=e;for(;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t||Object.getPrototypeOf(e)===null}function IA(e,t,r){if(typeof e!="function")throw new Error(es(2));if(typeof t=="function"&&typeof r=="function"||typeof r=="function"&&typeof arguments[3]=="function")throw new Error(es(0));if(typeof t=="function"&&typeof r>"u"&&(r=t,t=void 0),typeof r<"u"){if(typeof r!="function")throw new Error(es(1));return r(IA)(e,t)}let n=e,s=t,i=new Map,l=i,u=0,d=!1;function m(){l===i&&(l=new Map,i.forEach((k,_)=>{l.set(_,k)}))}function f(){if(d)throw new Error(es(3));return s}function p(k){if(typeof k!="function")throw new Error(es(4));if(d)throw new Error(es(5));let _=!0;m();const E=u++;return l.set(E,k),function(){if(_){if(d)throw new Error(es(6));_=!1,m(),l.delete(E),i=null}}}function y(k){if(!qx(k))throw new Error(es(7));if(typeof k.type>"u")throw new Error(es(8));if(typeof k.type!="string")throw new Error(es(17));if(d)throw new Error(es(9));try{d=!0,s=n(s,k)}finally{d=!1}return(i=l).forEach(E=>{E()}),k}function x(k){if(typeof k!="function")throw new Error(es(10));n=k,y({type:Mh.REPLACE})}function j(){const k=p;return{subscribe(_){if(typeof _!="object"||_===null)throw new Error(es(11));function E(){const O=_;O.next&&O.next(f())}return E(),{unsubscribe:k(E)}},[lN](){return this}}}return y({type:Mh.INIT}),{dispatch:y,subscribe:p,getState:f,replaceReducer:x,[lN]:j}}function g8(e){Object.keys(e).forEach(t=>{const r=e[t];if(typeof r(void 0,{type:Mh.INIT})>"u")throw new Error(es(12));if(typeof r(void 0,{type:Mh.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(es(13))})}function DA(e){const t=Object.keys(e),r={};for(let i=0;i<t.length;i++){const l=t[i];typeof e[l]=="function"&&(r[l]=e[l])}const n=Object.keys(r);let s;try{g8(r)}catch(i){s=i}return function(l={},u){if(s)throw s;let d=!1;const m={};for(let f=0;f<n.length;f++){const p=n[f],y=r[p],x=l[p],j=y(x,u);if(typeof j>"u")throw u&&u.type,new Error(es(14));m[p]=j,d=d||j!==x}return d=d||n.length!==Object.keys(l).length,d?m:l}}function Fh(...e){return e.length===0?t=>t:e.length===1?e[0]:e.reduce((t,r)=>(...n)=>t(r(...n)))}function y8(...e){return t=>(r,n)=>{const s=t(r,n);let i=()=>{throw new Error(es(15))};const l={getState:s.getState,dispatch:(d,...m)=>i(d,...m)},u=e.map(d=>d(l));return i=Fh(...u)(s.dispatch),{...s,dispatch:i}}}function RA(e){return qx(e)&&"type"in e&&typeof e.type=="string"}var $A=Symbol.for("immer-nothing"),cN=Symbol.for("immer-draftable"),ai=Symbol.for("immer-state");function Gi(e,...t){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var dd=Object.getPrototypeOf;function Cl(e){return!!e&&!!e[ai]}function Ya(e){var t;return e?MA(e)||Array.isArray(e)||!!e[cN]||!!((t=e.constructor)!=null&&t[cN])||Pd(e)||$m(e):!1}var v8=Object.prototype.constructor.toString(),uN=new WeakMap;function MA(e){if(!e||typeof e!="object")return!1;const t=Object.getPrototypeOf(e);if(t===null||t===Object.prototype)return!0;const r=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;if(r===Object)return!0;if(typeof r!="function")return!1;let n=uN.get(r);return n===void 0&&(n=Function.toString.call(r),uN.set(r,n)),n===v8}function Lh(e,t,r=!0){Rm(e)===0?(r?Reflect.ownKeys(e):Object.keys(e)).forEach(s=>{t(s,e[s],e)}):e.forEach((n,s)=>t(s,n,e))}function Rm(e){const t=e[ai];return t?t.type_:Array.isArray(e)?1:Pd(e)?2:$m(e)?3:0}function w0(e,t){return Rm(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function FA(e,t,r){const n=Rm(e);n===2?e.set(t,r):n===3?e.add(r):e[t]=r}function x8(e,t){return e===t?e!==0||1/e===1/t:e!==e&&t!==t}function Pd(e){return e instanceof Map}function $m(e){return e instanceof Set}function cl(e){return e.copy_||e.base_}function b0(e,t){if(Pd(e))return new Map(e);if($m(e))return new Set(e);if(Array.isArray(e))return Array.prototype.slice.call(e);const r=MA(e);if(t===!0||t==="class_only"&&!r){const n=Object.getOwnPropertyDescriptors(e);delete n[ai];let s=Reflect.ownKeys(n);for(let i=0;i<s.length;i++){const l=s[i],u=n[l];u.writable===!1&&(u.writable=!0,u.configurable=!0),(u.get||u.set)&&(n[l]={configurable:!0,writable:!0,enumerable:u.enumerable,value:e[l]})}return Object.create(dd(e),n)}else{const n=dd(e);if(n!==null&&r)return{...e};const s=Object.create(n);return Object.assign(s,e)}}function Vx(e,t=!1){return Mm(e)||Cl(e)||!Ya(e)||(Rm(e)>1&&Object.defineProperties(e,{set:Yf,add:Yf,clear:Yf,delete:Yf}),Object.freeze(e),t&&Object.values(e).forEach(r=>Vx(r,!0))),e}function w8(){Gi(2)}var Yf={value:w8};function Mm(e){return e===null||typeof e!="object"?!0:Object.isFrozen(e)}var b8={};function El(e){const t=b8[e];return t||Gi(0,e),t}var fd;function LA(){return fd}function j8(e,t){return{drafts_:[],parent_:e,immer_:t,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function dN(e,t){t&&(El("Patches"),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function j0(e){S0(e),e.drafts_.forEach(S8),e.drafts_=null}function S0(e){e===fd&&(fd=e.parent_)}function fN(e){return fd=j8(fd,e)}function S8(e){const t=e[ai];t.type_===0||t.type_===1?t.revoke_():t.revoked_=!0}function hN(e,t){t.unfinalizedDrafts_=t.drafts_.length;const r=t.drafts_[0];return e!==void 0&&e!==r?(r[ai].modified_&&(j0(t),Gi(4)),Ya(e)&&(e=zh(t,e),t.parent_||Uh(t,e)),t.patches_&&El("Patches").generateReplacementPatches_(r[ai].base_,e,t.patches_,t.inversePatches_)):e=zh(t,r,[]),j0(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==$A?e:void 0}function zh(e,t,r){if(Mm(t))return t;const n=e.immer_.shouldUseStrictIteration(),s=t[ai];if(!s)return Lh(t,(i,l)=>mN(e,s,t,i,l,r),n),t;if(s.scope_!==e)return t;if(!s.modified_)return Uh(e,s.base_,!0),s.base_;if(!s.finalized_){s.finalized_=!0,s.scope_.unfinalizedDrafts_--;const i=s.copy_;let l=i,u=!1;s.type_===3&&(l=new Set(i),i.clear(),u=!0),Lh(l,(d,m)=>mN(e,s,i,d,m,r,u),n),Uh(e,i,!1),r&&e.patches_&&El("Patches").generatePatches_(s,r,e.patches_,e.inversePatches_)}return s.copy_}function mN(e,t,r,n,s,i,l){if(s==null||typeof s!="object"&&!l)return;const u=Mm(s);if(!(u&&!l)){if(Cl(s)){const d=i&&t&&t.type_!==3&&!w0(t.assigned_,n)?i.concat(n):void 0,m=zh(e,s,d);if(FA(r,n,m),Cl(m))e.canAutoFreeze_=!1;else return}else l&&r.add(s);if(Ya(s)&&!u){if(!e.immer_.autoFreeze_&&e.unfinalizedDrafts_<1||t&&t.base_&&t.base_[n]===s&&u)return;zh(e,s),(!t||!t.scope_.parent_)&&typeof n!="symbol"&&(Pd(r)?r.has(n):Object.prototype.propertyIsEnumerable.call(r,n))&&Uh(e,s)}}}function Uh(e,t,r=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&Vx(t,r)}function k8(e,t){const r=Array.isArray(e),n={type_:r?1:0,scope_:t?t.scope_:LA(),modified_:!1,finalized_:!1,assigned_:{},parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1};let s=n,i=Hx;r&&(s=[n],i=hd);const{revoke:l,proxy:u}=Proxy.revocable(s,i);return n.draft_=u,n.revoke_=l,u}var Hx={get(e,t){if(t===ai)return e;const r=cl(e);if(!w0(r,t))return N8(e,r,t);const n=r[t];return e.finalized_||!Ya(n)?n:n===tv(e.base_,t)?(rv(e),e.copy_[t]=N0(n,e)):n},has(e,t){return t in cl(e)},ownKeys(e){return Reflect.ownKeys(cl(e))},set(e,t,r){const n=zA(cl(e),t);if(n!=null&&n.set)return n.set.call(e.draft_,r),!0;if(!e.modified_){const s=tv(cl(e),t),i=s==null?void 0:s[ai];if(i&&i.base_===r)return e.copy_[t]=r,e.assigned_[t]=!1,!0;if(x8(r,s)&&(r!==void 0||w0(e.base_,t)))return!0;rv(e),k0(e)}return e.copy_[t]===r&&(r!==void 0||t in e.copy_)||Number.isNaN(r)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=r,e.assigned_[t]=!0),!0},deleteProperty(e,t){return tv(e.base_,t)!==void 0||t in e.base_?(e.assigned_[t]=!1,rv(e),k0(e)):delete e.assigned_[t],e.copy_&&delete e.copy_[t],!0},getOwnPropertyDescriptor(e,t){const r=cl(e),n=Reflect.getOwnPropertyDescriptor(r,t);return n&&{writable:!0,configurable:e.type_!==1||t!=="length",enumerable:n.enumerable,value:r[t]}},defineProperty(){Gi(11)},getPrototypeOf(e){return dd(e.base_)},setPrototypeOf(){Gi(12)}},hd={};Lh(Hx,(e,t)=>{hd[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}});hd.deleteProperty=function(e,t){return hd.set.call(this,e,t,void 0)};hd.set=function(e,t,r){return Hx.set.call(this,e[0],t,r,e[0])};function tv(e,t){const r=e[ai];return(r?cl(r):e)[t]}function N8(e,t,r){var s;const n=zA(t,r);return n?"value"in n?n.value:(s=n.get)==null?void 0:s.call(e.draft_):void 0}function zA(e,t){if(!(t in e))return;let r=dd(e);for(;r;){const n=Object.getOwnPropertyDescriptor(r,t);if(n)return n;r=dd(r)}}function k0(e){e.modified_||(e.modified_=!0,e.parent_&&k0(e.parent_))}function rv(e){e.copy_||(e.copy_=b0(e.base_,e.scope_.immer_.useStrictShallowCopy_))}var _8=class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.useStrictIteration_=!0,this.produce=(t,r,n)=>{if(typeof t=="function"&&typeof r!="function"){const i=r;r=t;const l=this;return function(d=i,...m){return l.produce(d,f=>r.call(this,f,...m))}}typeof r!="function"&&Gi(6),n!==void 0&&typeof n!="function"&&Gi(7);let s;if(Ya(t)){const i=fN(this),l=N0(t,void 0);let u=!0;try{s=r(l),u=!1}finally{u?j0(i):S0(i)}return dN(i,n),hN(s,i)}else if(!t||typeof t!="object"){if(s=r(t),s===void 0&&(s=t),s===$A&&(s=void 0),this.autoFreeze_&&Vx(s,!0),n){const i=[],l=[];El("Patches").generateReplacementPatches_(t,s,i,l),n(i,l)}return s}else Gi(1,t)},this.produceWithPatches=(t,r)=>{if(typeof t=="function")return(l,...u)=>this.produceWithPatches(l,d=>t(d,...u));let n,s;return[this.produce(t,r,(l,u)=>{n=l,s=u}),n,s]},typeof(e==null?void 0:e.autoFreeze)=="boolean"&&this.setAutoFreeze(e.autoFreeze),typeof(e==null?void 0:e.useStrictShallowCopy)=="boolean"&&this.setUseStrictShallowCopy(e.useStrictShallowCopy),typeof(e==null?void 0:e.useStrictIteration)=="boolean"&&this.setUseStrictIteration(e.useStrictIteration)}createDraft(e){Ya(e)||Gi(8),Cl(e)&&(e=Wa(e));const t=fN(this),r=N0(e,void 0);return r[ai].isManual_=!0,S0(t),r}finishDraft(e,t){const r=e&&e[ai];(!r||!r.isManual_)&&Gi(9);const{scope_:n}=r;return dN(n,t),hN(void 0,n)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}setUseStrictIteration(e){this.useStrictIteration_=e}shouldUseStrictIteration(){return this.useStrictIteration_}applyPatches(e,t){let r;for(r=t.length-1;r>=0;r--){const s=t[r];if(s.path.length===0&&s.op==="replace"){e=s.value;break}}r>-1&&(t=t.slice(r+1));const n=El("Patches").applyPatches_;return Cl(e)?n(e,t):this.produce(e,s=>n(s,t))}};function N0(e,t){const r=Pd(e)?El("MapSet").proxyMap_(e,t):$m(e)?El("MapSet").proxySet_(e,t):k8(e,t);return(t?t.scope_:LA()).drafts_.push(r),r}function Wa(e){return Cl(e)||Gi(10,e),UA(e)}function UA(e){if(!Ya(e)||Mm(e))return e;const t=e[ai];let r,n=!0;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,r=b0(e,t.scope_.immer_.useStrictShallowCopy_),n=t.scope_.immer_.shouldUseStrictIteration()}else r=b0(e,!0);return Lh(r,(s,i)=>{FA(r,s,UA(i))},n),t&&(t.finalized_=!1),r}var _0=new _8,BA=_0.produce,C8=_0.setUseStrictIteration.bind(_0);function WA(e){return({dispatch:r,getState:n})=>s=>i=>typeof i=="function"?i(r,n,e):s(i)}var E8=WA(),A8=WA,P8=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?Fh:Fh.apply(null,arguments)};function ki(e,t){function r(...n){if(t){let s=t(...n);if(!s)throw new Error(ii(0));return{type:e,payload:s.payload,..."meta"in s&&{meta:s.meta},..."error"in s&&{error:s.error}}}return{type:e,payload:n[0]}}return r.toString=()=>`${e}`,r.type=e,r.match=n=>RA(n)&&n.type===e,r}var qA=class Yu extends Array{constructor(...t){super(...t),Object.setPrototypeOf(this,Yu.prototype)}static get[Symbol.species](){return Yu}concat(...t){return super.concat.apply(this,t)}prepend(...t){return t.length===1&&Array.isArray(t[0])?new Yu(...t[0].concat(this)):new Yu(...t.concat(this))}};function pN(e){return Ya(e)?BA(e,()=>{}):e}function Jf(e,t,r){return e.has(t)?e.get(t):e.set(t,r(t)).get(t)}function O8(e){return typeof e=="boolean"}var T8=()=>function(t){const{thunk:r=!0,immutableCheck:n=!0,serializableCheck:s=!0,actionCreatorCheck:i=!0}=t??{};let l=new qA;return r&&(O8(r)?l.push(E8):l.push(A8(r.extraArgument))),l},VA="RTK_autoBatch",En=()=>e=>({payload:e,meta:{[VA]:!0}}),gN=e=>t=>{setTimeout(t,e)},HA=(e={type:"raf"})=>t=>(...r)=>{const n=t(...r);let s=!0,i=!1,l=!1;const u=new Set,d=e.type==="tick"?queueMicrotask:e.type==="raf"?typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:gN(10):e.type==="callback"?e.queueNotification:gN(e.timeout),m=()=>{l=!1,i&&(i=!1,u.forEach(f=>f()))};return Object.assign({},n,{subscribe(f){const p=()=>s&&f(),y=n.subscribe(p);return u.add(f),()=>{y(),u.delete(f)}},dispatch(f){var p;try{return s=!((p=f==null?void 0:f.meta)!=null&&p[VA]),i=!s,i&&(l||(l=!0,d(m))),n.dispatch(f)}finally{s=!0}}})},I8=e=>function(r){const{autoBatch:n=!0}=r??{};let s=new qA(e);return n&&s.push(HA(typeof n=="object"?n:void 0)),s};function D8(e){const t=T8(),{reducer:r=void 0,middleware:n,devTools:s=!0,preloadedState:i=void 0,enhancers:l=void 0}=e||{};let u;if(typeof r=="function")u=r;else if(qx(r))u=DA(r);else throw new Error(ii(1));let d;typeof n=="function"?d=n(t):d=t();let m=Fh;s&&(m=P8({trace:!1,...typeof s=="object"&&s}));const f=y8(...d),p=I8(f);let y=typeof l=="function"?l(p):p();const x=m(...y);return IA(u,i,x)}function KA(e){const t={},r=[];let n;const s={addCase(i,l){const u=typeof i=="string"?i:i.type;if(!u)throw new Error(ii(28));if(u in t)throw new Error(ii(29));return t[u]=l,s},addAsyncThunk(i,l){return l.pending&&(t[i.pending.type]=l.pending),l.rejected&&(t[i.rejected.type]=l.rejected),l.fulfilled&&(t[i.fulfilled.type]=l.fulfilled),l.settled&&r.push({matcher:i.settled,reducer:l.settled}),s},addMatcher(i,l){return r.push({matcher:i,reducer:l}),s},addDefaultCase(i){return n=i,s}};return e(s),[t,r,n]}C8(!1);function R8(e){return typeof e=="function"}function $8(e,t){let[r,n,s]=KA(t),i;if(R8(e))i=()=>pN(e());else{const u=pN(e);i=()=>u}function l(u=i(),d){let m=[r[d.type],...n.filter(({matcher:f})=>f(d)).map(({reducer:f})=>f)];return m.filter(f=>!!f).length===0&&(m=[s]),m.reduce((f,p)=>{if(p)if(Cl(f)){const x=p(f,d);return x===void 0?f:x}else{if(Ya(f))return BA(f,y=>p(y,d));{const y=p(f,d);if(y===void 0){if(f===null)return f;throw Error("A case reducer on a non-draftable value must not return undefined")}return y}}return f},u)}return l.getInitialState=i,l}var M8="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",F8=(e=21)=>{let t="",r=e;for(;r--;)t+=M8[Math.random()*64|0];return t},L8=Symbol.for("rtk-slice-createasyncthunk");function z8(e,t){return`${e}/${t}`}function U8({creators:e}={}){var r;const t=(r=e==null?void 0:e.asyncThunk)==null?void 0:r[L8];return function(s){const{name:i,reducerPath:l=i}=s;if(!i)throw new Error(ii(11));const u=(typeof s.reducers=="function"?s.reducers(W8()):s.reducers)||{},d=Object.keys(u),m={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},f={addCase(O,T){const A=typeof O=="string"?O:O.type;if(!A)throw new Error(ii(12));if(A in m.sliceCaseReducersByType)throw new Error(ii(13));return m.sliceCaseReducersByType[A]=T,f},addMatcher(O,T){return m.sliceMatchers.push({matcher:O,reducer:T}),f},exposeAction(O,T){return m.actionCreators[O]=T,f},exposeCaseReducer(O,T){return m.sliceCaseReducersByName[O]=T,f}};d.forEach(O=>{const T=u[O],A={reducerName:O,type:z8(i,O),createNotation:typeof s.reducers=="function"};V8(T)?K8(A,T,f,t):q8(A,T,f)});function p(){const[O={},T=[],A=void 0]=typeof s.extraReducers=="function"?KA(s.extraReducers):[s.extraReducers],L={...O,...m.sliceCaseReducersByType};return $8(s.initialState,J=>{for(let H in L)J.addCase(H,L[H]);for(let H of m.sliceMatchers)J.addMatcher(H.matcher,H.reducer);for(let H of T)J.addMatcher(H.matcher,H.reducer);A&&J.addDefaultCase(A)})}const y=O=>O,x=new Map,j=new WeakMap;let b;function k(O,T){return b||(b=p()),b(O,T)}function _(){return b||(b=p()),b.getInitialState()}function E(O,T=!1){function A(J){let H=J[O];return typeof H>"u"&&T&&(H=Jf(j,A,_)),H}function L(J=y){const H=Jf(x,T,()=>new WeakMap);return Jf(H,J,()=>{const me={};for(const[Z,K]of Object.entries(s.selectors??{}))me[Z]=B8(K,J,()=>Jf(j,J,_),T);return me})}return{reducerPath:O,getSelectors:L,get selectors(){return L(A)},selectSlice:A}}const C={name:i,reducer:k,actions:m.actionCreators,caseReducers:m.sliceCaseReducersByName,getInitialState:_,...E(l),injectInto(O,{reducerPath:T,...A}={}){const L=T??l;return O.inject({reducerPath:L,reducer:k},A),{...C,...E(L,!0)}}};return C}}function B8(e,t,r,n){function s(i,...l){let u=t(i);return typeof u>"u"&&n&&(u=r()),e(u,...l)}return s.unwrapped=e,s}var Us=U8();function W8(){function e(t,r){return{_reducerDefinitionType:"asyncThunk",payloadCreator:t,...r}}return e.withTypes=()=>e,{reducer(t){return Object.assign({[t.name](...r){return t(...r)}}[t.name],{_reducerDefinitionType:"reducer"})},preparedReducer(t,r){return{_reducerDefinitionType:"reducerWithPrepare",prepare:t,reducer:r}},asyncThunk:e}}function q8({type:e,reducerName:t,createNotation:r},n,s){let i,l;if("reducer"in n){if(r&&!H8(n))throw new Error(ii(17));i=n.reducer,l=n.prepare}else i=n;s.addCase(e,i).exposeCaseReducer(t,i).exposeAction(t,l?ki(e,l):ki(e))}function V8(e){return e._reducerDefinitionType==="asyncThunk"}function H8(e){return e._reducerDefinitionType==="reducerWithPrepare"}function K8({type:e,reducerName:t},r,n,s){if(!s)throw new Error(ii(18));const{payloadCreator:i,fulfilled:l,pending:u,rejected:d,settled:m,options:f}=r,p=s(e,i,f);n.exposeAction(t,p),l&&n.addCase(p.fulfilled,l),u&&n.addCase(p.pending,u),d&&n.addCase(p.rejected,d),m&&n.addMatcher(p.settled,m),n.exposeCaseReducer(t,{fulfilled:l||Xf,pending:u||Xf,rejected:d||Xf,settled:m||Xf})}function Xf(){}var G8="task",GA="listener",YA="completed",Kx="cancelled",Y8=`task-${Kx}`,J8=`task-${YA}`,C0=`${GA}-${Kx}`,X8=`${GA}-${YA}`,Fm=class{constructor(e){Rg(this,"name","TaskAbortError");Rg(this,"message");this.code=e,this.message=`${G8} ${Kx} (reason: ${e})`}},Gx=(e,t)=>{if(typeof e!="function")throw new TypeError(ii(32))},Bh=()=>{},JA=(e,t=Bh)=>(e.catch(t),e),XA=(e,t)=>(e.addEventListener("abort",t,{once:!0}),()=>e.removeEventListener("abort",t)),wl=(e,t)=>{const r=e.signal;r.aborted||("reason"in r||Object.defineProperty(r,"reason",{enumerable:!0,value:t,configurable:!0,writable:!0}),e.abort(t))},bl=e=>{if(e.aborted){const{reason:t}=e;throw new Fm(t)}};function QA(e,t){let r=Bh;return new Promise((n,s)=>{const i=()=>s(new Fm(e.reason));if(e.aborted){i();return}r=XA(e,i),t.finally(()=>r()).then(n,s)}).finally(()=>{r=Bh})}var Q8=async(e,t)=>{try{return await Promise.resolve(),{status:"ok",value:await e()}}catch(r){return{status:r instanceof Fm?"cancelled":"rejected",error:r}}finally{t==null||t()}},Wh=e=>t=>JA(QA(e,t).then(r=>(bl(e),r))),ZA=e=>{const t=Wh(e);return r=>t(new Promise(n=>setTimeout(n,r)))},{assign:Oc}=Object,yN={},Lm="listenerMiddleware",Z8=(e,t)=>{const r=n=>XA(e,()=>wl(n,e.reason));return(n,s)=>{Gx(n);const i=new AbortController;r(i);const l=Q8(async()=>{bl(e),bl(i.signal);const u=await n({pause:Wh(i.signal),delay:ZA(i.signal),signal:i.signal});return bl(i.signal),u},()=>wl(i,J8));return s!=null&&s.autoJoin&&t.push(l.catch(Bh)),{result:Wh(e)(l),cancel(){wl(i,Y8)}}}},eU=(e,t)=>{const r=async(n,s)=>{bl(t);let i=()=>{};const u=[new Promise((d,m)=>{let f=e({predicate:n,effect:(p,y)=>{y.unsubscribe(),d([p,y.getState(),y.getOriginalState()])}});i=()=>{f(),m()}})];s!=null&&u.push(new Promise(d=>setTimeout(d,s,null)));try{const d=await QA(t,Promise.race(u));return bl(t),d}finally{i()}};return(n,s)=>JA(r(n,s))},eP=e=>{let{type:t,actionCreator:r,matcher:n,predicate:s,effect:i}=e;if(t)s=ki(t).match;else if(r)t=r.type,s=r.match;else if(n)s=n;else if(!s)throw new Error(ii(21));return Gx(i),{predicate:s,type:t,effect:i}},tP=Oc(e=>{const{type:t,predicate:r,effect:n}=eP(e);return{id:F8(),effect:n,type:t,predicate:r,pending:new Set,unsubscribe:()=>{throw new Error(ii(22))}}},{withTypes:()=>tP}),vN=(e,t)=>{const{type:r,effect:n,predicate:s}=eP(t);return Array.from(e.values()).find(i=>(typeof r=="string"?i.type===r:i.predicate===s)&&i.effect===n)},E0=e=>{e.pending.forEach(t=>{wl(t,C0)})},tU=(e,t)=>()=>{for(const r of t.keys())E0(r);e.clear()},xN=(e,t,r)=>{try{e(t,r)}catch(n){setTimeout(()=>{throw n},0)}},rP=Oc(ki(`${Lm}/add`),{withTypes:()=>rP}),rU=ki(`${Lm}/removeAll`),nP=Oc(ki(`${Lm}/remove`),{withTypes:()=>nP}),nU=(...e)=>{console.error(`${Lm}/error`,...e)},Od=(e={})=>{const t=new Map,r=new Map,n=x=>{const j=r.get(x)??0;r.set(x,j+1)},s=x=>{const j=r.get(x)??1;j===1?r.delete(x):r.set(x,j-1)},{extra:i,onError:l=nU}=e;Gx(l);const u=x=>(x.unsubscribe=()=>t.delete(x.id),t.set(x.id,x),j=>{x.unsubscribe(),j!=null&&j.cancelActive&&E0(x)}),d=x=>{const j=vN(t,x)??tP(x);return u(j)};Oc(d,{withTypes:()=>d});const m=x=>{const j=vN(t,x);return j&&(j.unsubscribe(),x.cancelActive&&E0(j)),!!j};Oc(m,{withTypes:()=>m});const f=async(x,j,b,k)=>{const _=new AbortController,E=eU(d,_.signal),C=[];try{x.pending.add(_),n(x),await Promise.resolve(x.effect(j,Oc({},b,{getOriginalState:k,condition:(O,T)=>E(O,T).then(Boolean),take:E,delay:ZA(_.signal),pause:Wh(_.signal),extra:i,signal:_.signal,fork:Z8(_.signal,C),unsubscribe:x.unsubscribe,subscribe:()=>{t.set(x.id,x)},cancelActiveListeners:()=>{x.pending.forEach((O,T,A)=>{O!==_&&(wl(O,C0),A.delete(O))})},cancel:()=>{wl(_,C0),x.pending.delete(_)},throwIfCancelled:()=>{bl(_.signal)}})))}catch(O){O instanceof Fm||xN(l,O,{raisedBy:"effect"})}finally{await Promise.all(C),wl(_,X8),s(x),x.pending.delete(_)}},p=tU(t,r);return{middleware:x=>j=>b=>{if(!RA(b))return j(b);if(rP.match(b))return d(b.payload);if(rU.match(b)){p();return}if(nP.match(b))return m(b.payload);let k=x.getState();const _=()=>{if(k===yN)throw new Error(ii(23));return k};let E;try{if(E=j(b),t.size>0){const C=x.getState(),O=Array.from(t.values());for(const T of O){let A=!1;try{A=T.predicate(b,C,k)}catch(L){A=!1,xN(l,L,{raisedBy:"predicate"})}A&&f(T,b,x,_)}}}finally{k=yN}return E},startListening:d,stopListening:m,clearListeners:p}};function ii(e){return`Minified Redux Toolkit error #${e}; visit https://redux-toolkit.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var sU={layoutType:"horizontal",width:0,height:0,margin:{top:5,right:5,bottom:5,left:5},scale:1},sP=Us({name:"chartLayout",initialState:sU,reducers:{setLayout(e,t){e.layoutType=t.payload},setChartSize(e,t){e.width=t.payload.width,e.height=t.payload.height},setMargin(e,t){var r,n,s,i;e.margin.top=(r=t.payload.top)!==null&&r!==void 0?r:0,e.margin.right=(n=t.payload.right)!==null&&n!==void 0?n:0,e.margin.bottom=(s=t.payload.bottom)!==null&&s!==void 0?s:0,e.margin.left=(i=t.payload.left)!==null&&i!==void 0?i:0},setScale(e,t){e.scale=t.payload}}}),{setMargin:iU,setLayout:aU,setChartSize:oU,setScale:lU}=sP.actions,cU=sP.reducer;function iP(e,t,r){return Array.isArray(e)&&e&&t+r!==0?e.slice(t,r+1):e}function wN(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function _c(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?wN(Object(r),!0).forEach(function(n){uU(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):wN(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function uU(e,t,r){return(t=dU(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function dU(e){var t=fU(e,"string");return typeof t=="symbol"?t:t+""}function fU(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function bs(e,t,r){return Hn(e)||Hn(t)?r:va(t)?Rc(e,t,r):typeof t=="function"?t(e):r}var hU=(e,t,r)=>{if(t&&r){var{width:n,height:s}=r,{align:i,verticalAlign:l,layout:u}=t;if((u==="vertical"||u==="horizontal"&&l==="middle")&&i!=="center"&&mt(e[i]))return _c(_c({},e),{},{[i]:e[i]+(n||0)});if((u==="horizontal"||u==="vertical"&&i==="center")&&l!=="middle"&&mt(e[l]))return _c(_c({},e),{},{[l]:e[l]+(s||0)})}return e},Rl=(e,t)=>e==="horizontal"&&t==="xAxis"||e==="vertical"&&t==="yAxis"||e==="centric"&&t==="angleAxis"||e==="radial"&&t==="radiusAxis",bN=1e-4,mU=e=>{var t=e.domain();if(!(!t||t.length<=2)){var r=t.length,n=e.range(),s=Math.min(n[0],n[1])-bN,i=Math.max(n[0],n[1])+bN,l=e(t[0]),u=e(t[r-1]);(l<s||l>i||u<s||u>i)&&e.domain([t[0],t[r-1]])}},pU=(e,t)=>{if(!t||t.length!==2||!mt(t[0])||!mt(t[1]))return e;var r=Math.min(t[0],t[1]),n=Math.max(t[0],t[1]),s=[e[0],e[1]];return(!mt(e[0])||e[0]<r)&&(s[0]=r),(!mt(e[1])||e[1]>n)&&(s[1]=n),s[0]>n&&(s[0]=n),s[1]<r&&(s[1]=r),s},gU=e=>{var t=e.length;if(!(t<=0))for(var r=0,n=e[0].length;r<n;++r)for(var s=0,i=0,l=0;l<t;++l){var u=ya(e[l][r][1])?e[l][r][0]:e[l][r][1];u>=0?(e[l][r][0]=s,e[l][r][1]=s+u,s=e[l][r][1]):(e[l][r][0]=i,e[l][r][1]=i+u,i=e[l][r][1])}},yU=e=>{var t=e.length;if(!(t<=0))for(var r=0,n=e[0].length;r<n;++r)for(var s=0,i=0;i<t;++i){var l=ya(e[i][r][1])?e[i][r][0]:e[i][r][1];l>=0?(e[i][r][0]=s,e[i][r][1]=s+l,s=e[i][r][1]):(e[i][r][0]=0,e[i][r][1]=0)}},vU={sign:gU,expand:GL,none:Dc,silhouette:YL,wiggle:JL,positive:yU},xU=(e,t,r)=>{var n=vU[r],s=KL().keys(t).value((i,l)=>Number(bs(i,l,0))).order(v0).offset(n);return s(e)};function wU(e){return e==null?void 0:String(e)}var jN=e=>{var{axis:t,ticks:r,offset:n,bandSize:s,entry:i,index:l}=e;if(t.type==="category")return r[l]?r[l].coordinate+n:null;var u=bs(i,t.dataKey,t.scale.domain()[l]);return Hn(u)?null:t.scale(u)-s/2+n},bU=e=>{var{numericAxis:t}=e,r=t.scale.domain();if(t.type==="number"){var n=Math.min(r[0],r[1]),s=Math.max(r[0],r[1]);return n<=0&&s>=0?0:s<0?s:n}return r[0]},jU=e=>{var t=e.flat(2).filter(mt);return[Math.min(...t),Math.max(...t)]},SU=e=>[e[0]===1/0?0:e[0],e[1]===-1/0?0:e[1]],kU=(e,t,r)=>{if(e!=null)return SU(Object.keys(e).reduce((n,s)=>{var i=e[s],{stackedData:l}=i,u=l.reduce((d,m)=>{var f=iP(m,t,r),p=jU(f);return[Math.min(d[0],p[0]),Math.max(d[1],p[1])]},[1/0,-1/0]);return[Math.min(u[0],n[0]),Math.max(u[1],n[1])]},[1/0,-1/0]))},SN=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,kN=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,qh=(e,t,r)=>{if(e&&e.scale&&e.scale.bandwidth){var n=e.scale.bandwidth();if(!r||n>0)return n}if(e&&t&&t.length>=2){for(var s=Dm(t,f=>f.coordinate),i=1/0,l=1,u=s.length;l<u;l++){var d=s[l],m=s[l-1];i=Math.min((d.coordinate||0)-(m.coordinate||0),i)}return i===1/0?0:i}return r?void 0:0};function NN(e){var{tooltipEntrySettings:t,dataKey:r,payload:n,value:s,name:i}=e;return _c(_c({},t),{},{dataKey:r,payload:n,value:s,name:i})}function aP(e,t){if(e)return String(e);if(typeof t=="string")return t}var NU=(e,t)=>{if(t==="horizontal")return e.chartX;if(t==="vertical")return e.chartY},_U=(e,t)=>t==="centric"?e.angle:e.radius,ro=e=>e.layout.width,no=e=>e.layout.height,CU=e=>e.layout.scale,oP=e=>e.layout.margin,zm=xe(e=>e.cartesianAxis.xAxis,e=>Object.values(e)),Um=xe(e=>e.cartesianAxis.yAxis,e=>Object.values(e)),EU="data-recharts-item-index",AU="data-recharts-item-data-key",Td=60;function _N(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Qf(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?_N(Object(r),!0).forEach(function(n){PU(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):_N(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function PU(e,t,r){return(t=OU(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function OU(e){var t=TU(e,"string");return typeof t=="symbol"?t:t+""}function TU(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var IU=e=>e.brush.height;function DU(e){var t=Um(e);return t.reduce((r,n)=>{if(n.orientation==="left"&&!n.mirror&&!n.hide){var s=typeof n.width=="number"?n.width:Td;return r+s}return r},0)}function RU(e){var t=Um(e);return t.reduce((r,n)=>{if(n.orientation==="right"&&!n.mirror&&!n.hide){var s=typeof n.width=="number"?n.width:Td;return r+s}return r},0)}function $U(e){var t=zm(e);return t.reduce((r,n)=>n.orientation==="top"&&!n.mirror&&!n.hide?r+n.height:r,0)}function MU(e){var t=zm(e);return t.reduce((r,n)=>n.orientation==="bottom"&&!n.mirror&&!n.hide?r+n.height:r,0)}var Kn=xe([ro,no,oP,IU,DU,RU,$U,MU,TA,d8],(e,t,r,n,s,i,l,u,d,m)=>{var f={left:(r.left||0)+s,right:(r.right||0)+i},p={top:(r.top||0)+l,bottom:(r.bottom||0)+u},y=Qf(Qf({},p),f),x=y.bottom;y.bottom+=n,y=hU(y,d,m);var j=e-y.left-y.right,b=t-y.top-y.bottom;return Qf(Qf({brushBottom:x},y),{},{width:Math.max(j,0),height:Math.max(b,0)})}),FU=xe(Kn,e=>({x:e.left,y:e.top,width:e.width,height:e.height})),Yx=xe(ro,no,(e,t)=>({x:0,y:0,width:e,height:t})),LU=v.createContext(null),li=()=>v.useContext(LU)!=null,Bm=e=>e.brush,Wm=xe([Bm,Kn,oP],(e,t,r)=>({height:e.height,x:mt(e.x)?e.x:t.left,y:mt(e.y)?e.y:t.top+t.height+t.brushBottom-((r==null?void 0:r.bottom)||0),width:mt(e.width)?e.width:t.width})),nv={},sv={},iv={},CN;function zU(){return CN||(CN=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r,n,{signal:s,edges:i}={}){let l,u=null;const d=i!=null&&i.includes("leading"),m=i==null||i.includes("trailing"),f=()=>{u!==null&&(r.apply(l,u),l=void 0,u=null)},p=()=>{m&&f(),b()};let y=null;const x=()=>{y!=null&&clearTimeout(y),y=setTimeout(()=>{y=null,p()},n)},j=()=>{y!==null&&(clearTimeout(y),y=null)},b=()=>{j(),l=void 0,u=null},k=()=>{f()},_=function(...E){if(s!=null&&s.aborted)return;l=this,u=E;const C=y==null;x(),d&&C&&f()};return _.schedule=x,_.cancel=b,_.flush=k,s==null||s.addEventListener("abort",b,{once:!0}),_}e.debounce=t})(iv)),iv}var EN;function UU(){return EN||(EN=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=zU();function r(n,s=0,i={}){typeof i!="object"&&(i={});const{leading:l=!1,trailing:u=!0,maxWait:d}=i,m=Array(2);l&&(m[0]="leading"),u&&(m[1]="trailing");let f,p=null;const y=t.debounce(function(...b){f=n.apply(this,b),p=null},s,{edges:m}),x=function(...b){return d!=null&&(p===null&&(p=Date.now()),Date.now()-p>=d)?(f=n.apply(this,b),p=Date.now(),y.cancel(),y.schedule(),f):(y.apply(this,b),f)},j=()=>(y.flush(),f);return x.cancel=y.cancel,x.flush=j,x}e.debounce=r})(sv)),sv}var AN;function BU(){return AN||(AN=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=UU();function r(n,s=0,i={}){const{leading:l=!0,trailing:u=!0}=i;return t.debounce(n,s,{leading:l,maxWait:s,trailing:u})}e.throttle=r})(nv)),nv}var av,PN;function WU(){return PN||(PN=1,av=BU().throttle),av}var qU=WU();const VU=Zi(qU);var ON=function(t,r){for(var n=arguments.length,s=new Array(n>2?n-2:0),i=2;i<n;i++)s[i-2]=arguments[i]},lP=(e,t,r)=>{var{width:n="100%",height:s="100%",aspect:i,maxHeight:l}=r,u=Ga(n)?e:Number(n),d=Ga(s)?t:Number(s);return i&&i>0&&(u?d=u/i:d&&(u=d*i),l&&d!=null&&d>l&&(d=l)),{calculatedWidth:u,calculatedHeight:d}},HU={width:0,height:0,overflow:"visible"},KU={width:0,overflowX:"visible"},GU={height:0,overflowY:"visible"},YU={},JU=e=>{var{width:t,height:r}=e,n=Ga(t),s=Ga(r);return n&&s?HU:n?KU:s?GU:YU};function XU(e){var{width:t,height:r,aspect:n}=e,s=t,i=r;return s===void 0&&i===void 0?(s="100%",i="100%"):s===void 0?s=n&&n>0?void 0:"100%":i===void 0&&(i=n&&n>0?void 0:"100%"),{width:s,height:i}}function tn(e){return Number.isFinite(e)}function Lo(e){return typeof e=="number"&&e>0&&Number.isFinite(e)}function A0(){return A0=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},A0.apply(null,arguments)}function TN(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function IN(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?TN(Object(r),!0).forEach(function(n){QU(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):TN(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function QU(e,t,r){return(t=ZU(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ZU(e){var t=eB(e,"string");return typeof t=="symbol"?t:t+""}function eB(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var cP=v.createContext({width:-1,height:-1});function tB(e){return Lo(e.width)&&Lo(e.height)}function uP(e){var{children:t,width:r,height:n}=e,s=v.useMemo(()=>({width:r,height:n}),[r,n]);return tB(s)?v.createElement(cP.Provider,{value:s},t):null}var Jx=()=>v.useContext(cP),rB=v.forwardRef((e,t)=>{var{aspect:r,initialDimension:n={width:-1,height:-1},width:s,height:i,minWidth:l=0,minHeight:u,maxHeight:d,children:m,debounce:f=0,id:p,className:y,onResize:x,style:j={}}=e,b=v.useRef(null),k=v.useRef();k.current=x,v.useImperativeHandle(t,()=>b.current);var[_,E]=v.useState({containerWidth:n.width,containerHeight:n.height}),C=v.useCallback((J,H)=>{E(me=>{var Z=Math.round(J),K=Math.round(H);return me.containerWidth===Z&&me.containerHeight===K?me:{containerWidth:Z,containerHeight:K}})},[]);v.useEffect(()=>{if(b.current==null||typeof ResizeObserver>"u")return Xc;var J=K=>{var ce,{width:z,height:se}=K[0].contentRect;C(z,se),(ce=k.current)===null||ce===void 0||ce.call(k,z,se)};f>0&&(J=VU(J,f,{trailing:!0,leading:!1}));var H=new ResizeObserver(J),{width:me,height:Z}=b.current.getBoundingClientRect();return C(me,Z),H.observe(b.current),()=>{H.disconnect()}},[C,f]);var{containerWidth:O,containerHeight:T}=_;ON(!r||r>0,"The aspect(%s) must be greater than zero.",r);var{calculatedWidth:A,calculatedHeight:L}=lP(O,T,{width:s,height:i,aspect:r,maxHeight:d});return ON(A!=null&&A>0||L!=null&&L>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,A,L,s,i,l,u,r),v.createElement("div",{id:p?"".concat(p):void 0,className:Nr("recharts-responsive-container",y),style:IN(IN({},j),{},{width:s,height:i,minWidth:l,minHeight:u,maxHeight:d}),ref:b},v.createElement("div",{style:JU({width:s,height:i})},v.createElement(uP,{width:A,height:L},m)))}),nB=v.forwardRef((e,t)=>{var r=Jx();if(Lo(r.width)&&Lo(r.height))return e.children;var{width:n,height:s}=XU({width:e.width,height:e.height,aspect:e.aspect}),{calculatedWidth:i,calculatedHeight:l}=lP(void 0,void 0,{width:n,height:s,aspect:e.aspect,maxHeight:e.maxHeight});return mt(i)&&mt(l)?v.createElement(uP,{width:i,height:l},e.children):v.createElement(rB,A0({},e,{width:n,height:s,ref:t}))});function dP(e){if(e)return{x:e.x,y:e.y,upperWidth:"upperWidth"in e?e.upperWidth:e.width,lowerWidth:"lowerWidth"in e?e.lowerWidth:e.width,width:e.width,height:e.height}}var qm=()=>{var e,t=li(),r=at(FU),n=at(Wm),s=(e=at(Bm))===null||e===void 0?void 0:e.padding;return!t||!n||!s?r:{width:n.width-s.left-s.right,height:n.height-s.top-s.bottom,x:s.left,y:s.top}},sB={top:0,bottom:0,left:0,right:0,width:0,height:0,brushBottom:0},iB=()=>{var e;return(e=at(Kn))!==null&&e!==void 0?e:sB},aB=()=>at(ro),oB=()=>at(no),er=e=>e.layout.layoutType,Vm=()=>at(er),lB=()=>{var e=Vm();return e!==void 0},Hm=e=>{var t=rn(),r=li(),{width:n,height:s}=e,i=Jx(),l=n,u=s;return i&&(l=i.width>0?i.width:n,u=i.height>0?i.height:s),v.useEffect(()=>{!r&&Lo(l)&&Lo(u)&&t(oU({width:l,height:u}))},[t,r,l,u]),null},cB={settings:{layout:"horizontal",align:"center",verticalAlign:"middle",itemSorter:"value"},size:{width:0,height:0},payload:[]},fP=Us({name:"legend",initialState:cB,reducers:{setLegendSize(e,t){e.size.width=t.payload.width,e.size.height=t.payload.height},setLegendSettings(e,t){e.settings.align=t.payload.align,e.settings.layout=t.payload.layout,e.settings.verticalAlign=t.payload.verticalAlign,e.settings.itemSorter=t.payload.itemSorter},addLegendPayload:{reducer(e,t){e.payload.push(t.payload)},prepare:En()},removeLegendPayload:{reducer(e,t){var r=Wa(e).payload.indexOf(t.payload);r>-1&&e.payload.splice(r,1)},prepare:En()}}}),{setLegendSize:mee,setLegendSettings:pee,addLegendPayload:uB,removeLegendPayload:dB}=fP.actions,fB=fP.reducer;function P0(){return P0=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},P0.apply(null,arguments)}function DN(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function ov(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?DN(Object(r),!0).forEach(function(n){hB(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):DN(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function hB(e,t,r){return(t=mB(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function mB(e){var t=pB(e,"string");return typeof t=="symbol"?t:t+""}function pB(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function gB(e){return Array.isArray(e)&&va(e[0])&&va(e[1])?e.join(" ~ "):e}var yB=e=>{var{separator:t=" : ",contentStyle:r={},itemStyle:n={},labelStyle:s={},payload:i,formatter:l,itemSorter:u,wrapperClassName:d,labelClassName:m,label:f,labelFormatter:p,accessibilityLayer:y=!1}=e,x=()=>{if(i&&i.length){var T={padding:0,margin:0},A=(u?Dm(i,u):i).map((L,J)=>{if(L.type==="none")return null;var H=L.formatter||l||gB,{value:me,name:Z}=L,K=me,ce=Z;if(H){var z=H(me,Z,L,J,i);if(Array.isArray(z))[K,ce]=z;else if(z!=null)K=z;else return null}var se=ov({display:"block",paddingTop:4,paddingBottom:4,color:L.color||"#000"},n);return v.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(J),style:se},va(ce)?v.createElement("span",{className:"recharts-tooltip-item-name"},ce):null,va(ce)?v.createElement("span",{className:"recharts-tooltip-item-separator"},t):null,v.createElement("span",{className:"recharts-tooltip-item-value"},K),v.createElement("span",{className:"recharts-tooltip-item-unit"},L.unit||""))});return v.createElement("ul",{className:"recharts-tooltip-item-list",style:T},A)}return null},j=ov({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},r),b=ov({margin:0},s),k=!Hn(f),_=k?f:"",E=Nr("recharts-default-tooltip",d),C=Nr("recharts-tooltip-label",m);k&&p&&i!==void 0&&i!==null&&(_=p(f,i));var O=y?{role:"status","aria-live":"assertive"}:{};return v.createElement("div",P0({className:E,style:j},O),v.createElement("p",{className:C,style:b},v.isValidElement(_)?_:"".concat(_)),x())},$u="recharts-tooltip-wrapper",vB={visibility:"hidden"};function xB(e){var{coordinate:t,translateX:r,translateY:n}=e;return Nr($u,{["".concat($u,"-right")]:mt(r)&&t&&mt(t.x)&&r>=t.x,["".concat($u,"-left")]:mt(r)&&t&&mt(t.x)&&r<t.x,["".concat($u,"-bottom")]:mt(n)&&t&&mt(t.y)&&n>=t.y,["".concat($u,"-top")]:mt(n)&&t&&mt(t.y)&&n<t.y})}function RN(e){var{allowEscapeViewBox:t,coordinate:r,key:n,offsetTopLeft:s,position:i,reverseDirection:l,tooltipDimension:u,viewBox:d,viewBoxDimension:m}=e;if(i&&mt(i[n]))return i[n];var f=r[n]-u-(s>0?s:0),p=r[n]+s;if(t[n])return l[n]?f:p;var y=d[n];if(y==null)return 0;if(l[n]){var x=f,j=y;return x<j?Math.max(p,y):Math.max(f,y)}if(m==null)return 0;var b=p+u,k=y+m;return b>k?Math.max(f,y):Math.max(p,y)}function wB(e){var{translateX:t,translateY:r,useTranslate3d:n}=e;return{transform:n?"translate3d(".concat(t,"px, ").concat(r,"px, 0)"):"translate(".concat(t,"px, ").concat(r,"px)")}}function bB(e){var{allowEscapeViewBox:t,coordinate:r,offsetTopLeft:n,position:s,reverseDirection:i,tooltipBox:l,useTranslate3d:u,viewBox:d}=e,m,f,p;return l.height>0&&l.width>0&&r?(f=RN({allowEscapeViewBox:t,coordinate:r,key:"x",offsetTopLeft:n,position:s,reverseDirection:i,tooltipDimension:l.width,viewBox:d,viewBoxDimension:d.width}),p=RN({allowEscapeViewBox:t,coordinate:r,key:"y",offsetTopLeft:n,position:s,reverseDirection:i,tooltipDimension:l.height,viewBox:d,viewBoxDimension:d.height}),m=wB({translateX:f,translateY:p,useTranslate3d:u})):m=vB,{cssProperties:m,cssClasses:xB({translateX:f,translateY:p,coordinate:r})}}function $N(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Zf(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?$N(Object(r),!0).forEach(function(n){O0(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):$N(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function O0(e,t,r){return(t=jB(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function jB(e){var t=SB(e,"string");return typeof t=="symbol"?t:t+""}function SB(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class kB extends v.PureComponent{constructor(){super(...arguments),O0(this,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0}}),O0(this,"handleKeyDown",t=>{if(t.key==="Escape"){var r,n,s,i;this.setState({dismissed:!0,dismissedAtCoordinate:{x:(r=(n=this.props.coordinate)===null||n===void 0?void 0:n.x)!==null&&r!==void 0?r:0,y:(s=(i=this.props.coordinate)===null||i===void 0?void 0:i.y)!==null&&s!==void 0?s:0}})}})}componentDidMount(){document.addEventListener("keydown",this.handleKeyDown)}componentWillUnmount(){document.removeEventListener("keydown",this.handleKeyDown)}componentDidUpdate(){var t,r;this.state.dismissed&&(((t=this.props.coordinate)===null||t===void 0?void 0:t.x)!==this.state.dismissedAtCoordinate.x||((r=this.props.coordinate)===null||r===void 0?void 0:r.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}render(){var{active:t,allowEscapeViewBox:r,animationDuration:n,animationEasing:s,children:i,coordinate:l,hasPayload:u,isAnimationActive:d,offset:m,position:f,reverseDirection:p,useTranslate3d:y,viewBox:x,wrapperStyle:j,lastBoundingBox:b,innerRef:k,hasPortalFromProps:_}=this.props,{cssClasses:E,cssProperties:C}=bB({allowEscapeViewBox:r,coordinate:l,offsetTopLeft:m,position:f,reverseDirection:p,tooltipBox:{height:b.height,width:b.width},useTranslate3d:y,viewBox:x}),O=_?{}:Zf(Zf({transition:d&&t?"transform ".concat(n,"ms ").concat(s):void 0},C),{},{pointerEvents:"none",visibility:!this.state.dismissed&&t&&u?"visible":"hidden",position:"absolute",top:0,left:0}),T=Zf(Zf({},O),{},{visibility:!this.state.dismissed&&t&&u?"visible":"hidden"},j);return v.createElement("div",{xmlns:"http://www.w3.org/1999/xhtml",tabIndex:-1,className:E,style:T,ref:k},i)}}var NB=()=>!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout),Qc={devToolsEnabled:!1,isSsr:NB()},hP=()=>{var e;return(e=at(t=>t.rootProps.accessibilityLayer))!==null&&e!==void 0?e:!0};function T0(){return T0=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},T0.apply(null,arguments)}function MN(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function FN(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?MN(Object(r),!0).forEach(function(n){_B(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):MN(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function _B(e,t,r){return(t=CB(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function CB(e){var t=EB(e,"string");return typeof t=="symbol"?t:t+""}function EB(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var LN={curveBasisClosed:$L,curveBasisOpen:ML,curveBasis:RL,curveBumpX:bL,curveBumpY:jL,curveLinearClosed:FL,curveLinear:Tm,curveMonotoneX:LL,curveMonotoneY:zL,curveNatural:UL,curveStep:BL,curveStepAfter:qL,curveStepBefore:WL},Vh=e=>tn(e.x)&&tn(e.y),zN=e=>e.base!=null&&Vh(e.base)&&Vh(e),Mu=e=>e.x,Fu=e=>e.y,AB=(e,t)=>{if(typeof e=="function")return e;var r="curve".concat(Ad(e));return(r==="curveMonotone"||r==="curveBump")&&t?LN["".concat(r).concat(t==="vertical"?"Y":"X")]:LN[r]||Tm},PB=e=>{var{type:t="linear",points:r=[],baseLine:n,layout:s,connectNulls:i=!1}=e,l=AB(t,s),u=i?r.filter(Vh):r,d;if(Array.isArray(n)){var m=r.map((x,j)=>FN(FN({},x),{},{base:n[j]}));s==="vertical"?d=Hf().y(Fu).x1(Mu).x0(x=>x.base.x):d=Hf().x(Mu).y1(Fu).y0(x=>x.base.y);var f=d.defined(zN).curve(l),p=i?m.filter(zN):m;return f(p)}s==="vertical"&&mt(n)?d=Hf().y(Fu).x1(Mu).x0(n):mt(n)?d=Hf().x(Mu).y1(Fu).y0(n):d=sA().x(Mu).y(Fu);var y=d.defined(Vh).curve(l);return y(u)},mP=e=>{var{className:t,points:r,path:n,pathRef:s}=e;if((!r||!r.length)&&!n)return null;var i=r&&r.length?PB(e):n;return v.createElement("path",T0({},Fo(e),mz(e),{className:Nr("recharts-curve",t),d:i===null?void 0:i,ref:s}))},OB=["x","y","top","left","width","height","className"];function I0(){return I0=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},I0.apply(null,arguments)}function UN(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function TB(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?UN(Object(r),!0).forEach(function(n){IB(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):UN(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function IB(e,t,r){return(t=DB(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function DB(e){var t=RB(e,"string");return typeof t=="symbol"?t:t+""}function RB(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function $B(e,t){if(e==null)return{};var r,n,s=MB(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function MB(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var FB=(e,t,r,n,s,i)=>"M".concat(e,",").concat(s,"v").concat(n,"M").concat(i,",").concat(t,"h").concat(r),LB=e=>{var{x:t=0,y:r=0,top:n=0,left:s=0,width:i=0,height:l=0,className:u}=e,d=$B(e,OB),m=TB({x:t,y:r,top:n,left:s,width:i,height:l},d);return!mt(t)||!mt(r)||!mt(i)||!mt(l)||!mt(n)||!mt(s)?null:v.createElement("path",I0({},Si(m),{className:Nr("recharts-cross",u),d:FB(t,r,i,l,n,s)}))};function zB(e,t,r,n){var s=n/2;return{stroke:"none",fill:"#ccc",x:e==="horizontal"?t.x-s:r.left+.5,y:e==="horizontal"?r.top+.5:t.y-s,width:e==="horizontal"?n:r.width-1,height:e==="horizontal"?r.height-1:n}}function BN(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function WN(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?BN(Object(r),!0).forEach(function(n){UB(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):BN(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function UB(e,t,r){return(t=BB(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function BB(e){var t=WB(e,"string");return typeof t=="symbol"?t:t+""}function WB(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var qB=e=>e.replace(/([A-Z])/g,t=>"-".concat(t.toLowerCase())),pP=(e,t,r)=>e.map(n=>"".concat(qB(n)," ").concat(t,"ms ").concat(r)).join(","),VB=(e,t)=>[Object.keys(e),Object.keys(t)].reduce((r,n)=>r.filter(s=>n.includes(s))),md=(e,t)=>Object.keys(t).reduce((r,n)=>WN(WN({},r),{},{[n]:e(n,t[n])}),{});function qN(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Cn(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?qN(Object(r),!0).forEach(function(n){HB(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):qN(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function HB(e,t,r){return(t=KB(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function KB(e){var t=GB(e,"string");return typeof t=="symbol"?t:t+""}function GB(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Hh=(e,t,r)=>e+(t-e)*r,D0=e=>{var{from:t,to:r}=e;return t!==r},gP=(e,t,r)=>{var n=md((s,i)=>{if(D0(i)){var[l,u]=e(i.from,i.to,i.velocity);return Cn(Cn({},i),{},{from:l,velocity:u})}return i},t);return r<1?md((s,i)=>D0(i)?Cn(Cn({},i),{},{velocity:Hh(i.velocity,n[s].velocity,r),from:Hh(i.from,n[s].from,r)}):i,t):gP(e,n,r-1)};function YB(e,t,r,n,s,i){var l,u=n.reduce((y,x)=>Cn(Cn({},y),{},{[x]:{from:e[x],velocity:0,to:t[x]}}),{}),d=()=>md((y,x)=>x.from,u),m=()=>!Object.values(u).filter(D0).length,f=null,p=y=>{l||(l=y);var x=y-l,j=x/r.dt;u=gP(r,u,j),s(Cn(Cn(Cn({},e),t),d())),l=y,m()||(f=i.setTimeout(p))};return()=>(f=i.setTimeout(p),()=>{var y;(y=f)===null||y===void 0||y()})}function JB(e,t,r,n,s,i,l){var u=null,d=s.reduce((p,y)=>Cn(Cn({},p),{},{[y]:[e[y],t[y]]}),{}),m,f=p=>{m||(m=p);var y=(p-m)/n,x=md((b,k)=>Hh(...k,r(y)),d);if(i(Cn(Cn(Cn({},e),t),x)),y<1)u=l.setTimeout(f);else{var j=md((b,k)=>Hh(...k,r(1)),d);i(Cn(Cn(Cn({},e),t),j))}};return()=>(u=l.setTimeout(f),()=>{var p;(p=u)===null||p===void 0||p()})}const XB=(e,t,r,n,s,i)=>{var l=VB(e,t);return r==null?()=>(s(Cn(Cn({},e),t)),()=>{}):r.isStepper===!0?YB(e,t,r,l,s,i):JB(e,t,r,n,l,s,i)};var Kh=1e-4,yP=(e,t)=>[0,3*e,3*t-6*e,3*e-3*t+1],vP=(e,t)=>e.map((r,n)=>r*t**n).reduce((r,n)=>r+n),VN=(e,t)=>r=>{var n=yP(e,t);return vP(n,r)},QB=(e,t)=>r=>{var n=yP(e,t),s=[...n.map((i,l)=>i*l).slice(1),0];return vP(s,r)},ZB=function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];if(r.length===1)switch(r[0]){case"linear":return[0,0,1,1];case"ease":return[.25,.1,.25,1];case"ease-in":return[.42,0,1,1];case"ease-out":return[.42,0,.58,1];case"ease-in-out":return[0,0,.58,1];default:{var s,i=r[0].split("(");if(i[0]==="cubic-bezier"&&((s=i[1])===null||s===void 0?void 0:s.split(")")[0].split(",").length)===4){var l=i[1].split(")")[0].split(",").map(u=>parseFloat(u));return[l[0],l[1],l[2],l[3]]}}}return r.length===4?r:[0,0,1,1]},e7=(e,t,r,n)=>{var s=VN(e,r),i=VN(t,n),l=QB(e,r),u=m=>m>1?1:m<0?0:m,d=m=>{for(var f=m>1?1:m,p=f,y=0;y<8;++y){var x=s(p)-f,j=l(p);if(Math.abs(x-f)<Kh||j<Kh)return i(p);p=u(p-x/j)}return i(p)};return d.isStepper=!1,d},HN=function(){return e7(...ZB(...arguments))},t7=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},{stiff:r=100,damping:n=8,dt:s=17}=t,i=(l,u,d)=>{var m=-(l-u)*r,f=d*n,p=d+(m-f)*s/1e3,y=d*s/1e3+l;return Math.abs(y-u)<Kh&&Math.abs(p)<Kh?[u,0]:[y,p]};return i.isStepper=!0,i.dt=s,i},r7=e=>{if(typeof e=="string")switch(e){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return HN(e);case"spring":return t7();default:if(e.split("(")[0]==="cubic-bezier")return HN(e)}return typeof e=="function"?e:null};function n7(e){var t,r=()=>null,n=!1,s=null,i=l=>{if(!n){if(Array.isArray(l)){if(!l.length)return;var u=l,[d,...m]=u;if(typeof d=="number"){s=e.setTimeout(i.bind(null,m),d);return}i(d),s=e.setTimeout(i.bind(null,m));return}typeof l=="string"&&(t=l,r(t)),typeof l=="object"&&(t=l,r(t)),typeof l=="function"&&l()}};return{stop:()=>{n=!0},start:l=>{n=!1,s&&(s(),s=null),i(l)},subscribe:l=>(r=l,()=>{r=()=>null}),getTimeoutController:()=>e}}class s7{setTimeout(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=performance.now(),s=null,i=l=>{l-n>=r?t(l):typeof requestAnimationFrame=="function"&&(s=requestAnimationFrame(i))};return s=requestAnimationFrame(i),()=>{s!=null&&cancelAnimationFrame(s)}}}function i7(){return n7(new s7)}var a7=v.createContext(i7);function o7(e,t){var r=v.useContext(a7);return v.useMemo(()=>t??r(e),[e,t,r])}var l7={begin:0,duration:1e3,easing:"ease",isActive:!0,canBegin:!0,onAnimationEnd:()=>{},onAnimationStart:()=>{}},KN={t:0},lv={t:1};function Xx(e){var t=Ci(e,l7),{isActive:r,canBegin:n,duration:s,easing:i,begin:l,onAnimationEnd:u,onAnimationStart:d,children:m}=t,f=o7(t.animationId,t.animationManager),[p,y]=v.useState(r?KN:lv),x=v.useRef(null);return v.useEffect(()=>{r||y(lv)},[r]),v.useEffect(()=>{if(!r||!n)return Xc;var j=XB(KN,lv,r7(i),s,y,f.getTimeoutController()),b=()=>{x.current=j()};return f.start([d,l,b,s,u]),()=>{f.stop(),x.current&&x.current(),u()}},[r,n,s,i,l,d,u,f]),m(p.t)}function Qx(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"animation-",r=v.useRef(ud(t)),n=v.useRef(e);return n.current!==e&&(r.current=ud(t),n.current=e),r.current}var c7=["radius"],u7=["radius"];function GN(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function YN(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?GN(Object(r),!0).forEach(function(n){d7(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):GN(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function d7(e,t,r){return(t=f7(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function f7(e){var t=h7(e,"string");return typeof t=="symbol"?t:t+""}function h7(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Gh(){return Gh=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Gh.apply(null,arguments)}function JN(e,t){if(e==null)return{};var r,n,s=m7(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function m7(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var XN=(e,t,r,n,s)=>{var i=Math.min(Math.abs(r)/2,Math.abs(n)/2),l=n>=0?1:-1,u=r>=0?1:-1,d=n>=0&&r>=0||n<0&&r<0?1:0,m;if(i>0&&s instanceof Array){for(var f=[0,0,0,0],p=0,y=4;p<y;p++)f[p]=s[p]>i?i:s[p];m="M".concat(e,",").concat(t+l*f[0]),f[0]>0&&(m+="A ".concat(f[0],",").concat(f[0],",0,0,").concat(d,",").concat(e+u*f[0],",").concat(t)),m+="L ".concat(e+r-u*f[1],",").concat(t),f[1]>0&&(m+="A ".concat(f[1],",").concat(f[1],",0,0,").concat(d,`,
        `).concat(e+r,",").concat(t+l*f[1])),m+="L ".concat(e+r,",").concat(t+n-l*f[2]),f[2]>0&&(m+="A ".concat(f[2],",").concat(f[2],",0,0,").concat(d,`,
        `).concat(e+r-u*f[2],",").concat(t+n)),m+="L ".concat(e+u*f[3],",").concat(t+n),f[3]>0&&(m+="A ".concat(f[3],",").concat(f[3],",0,0,").concat(d,`,
        `).concat(e,",").concat(t+n-l*f[3])),m+="Z"}else if(i>0&&s===+s&&s>0){var x=Math.min(i,s);m="M ".concat(e,",").concat(t+l*x,`
            A `).concat(x,",").concat(x,",0,0,").concat(d,",").concat(e+u*x,",").concat(t,`
            L `).concat(e+r-u*x,",").concat(t,`
            A `).concat(x,",").concat(x,",0,0,").concat(d,",").concat(e+r,",").concat(t+l*x,`
            L `).concat(e+r,",").concat(t+n-l*x,`
            A `).concat(x,",").concat(x,",0,0,").concat(d,",").concat(e+r-u*x,",").concat(t+n,`
            L `).concat(e+u*x,",").concat(t+n,`
            A `).concat(x,",").concat(x,",0,0,").concat(d,",").concat(e,",").concat(t+n-l*x," Z")}else m="M ".concat(e,",").concat(t," h ").concat(r," v ").concat(n," h ").concat(-r," Z");return m},QN={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},xP=e=>{var t=Ci(e,QN),r=v.useRef(null),[n,s]=v.useState(-1);v.useEffect(()=>{if(r.current&&r.current.getTotalLength)try{var ue=r.current.getTotalLength();ue&&s(ue)}catch{}},[]);var{x:i,y:l,width:u,height:d,radius:m,className:f}=t,{animationEasing:p,animationDuration:y,animationBegin:x,isAnimationActive:j,isUpdateAnimationActive:b}=t,k=v.useRef(u),_=v.useRef(d),E=v.useRef(i),C=v.useRef(l),O=v.useMemo(()=>({x:i,y:l,width:u,height:d,radius:m}),[i,l,u,d,m]),T=Qx(O,"rectangle-");if(i!==+i||l!==+l||u!==+u||d!==+d||u===0||d===0)return null;var A=Nr("recharts-rectangle",f);if(!b){var L=Si(t),{radius:J}=L,H=JN(L,c7);return v.createElement("path",Gh({},H,{radius:typeof m=="number"?m:void 0,className:A,d:XN(i,l,u,d,m)}))}var me=k.current,Z=_.current,K=E.current,ce=C.current,z="0px ".concat(n===-1?1:n,"px"),se="".concat(n,"px 0px"),B=pP(["strokeDasharray"],y,typeof p=="string"?p:QN.animationEasing);return v.createElement(Xx,{animationId:T,key:T,canBegin:n>0,duration:y,easing:p,isActive:b,begin:x},ue=>{var oe=rs(me,u,ue),X=rs(Z,d,ue),ee=rs(K,i,ue),D=rs(ce,l,ue);r.current&&(k.current=oe,_.current=X,E.current=ee,C.current=D);var q;j?ue>0?q={transition:B,strokeDasharray:se}:q={strokeDasharray:z}:q={strokeDasharray:se};var Te=Si(t),{radius:we}=Te,Ce=JN(Te,u7);return v.createElement("path",Gh({},Ce,{radius:typeof m=="number"?m:void 0,className:A,d:XN(ee,D,oe,X,m),ref:r,style:YN(YN({},q),t.style)}))})};function ZN(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function e_(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?ZN(Object(r),!0).forEach(function(n){p7(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ZN(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function p7(e,t,r){return(t=g7(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function g7(e){var t=y7(e,"string");return typeof t=="symbol"?t:t+""}function y7(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Yh=Math.PI/180,v7=e=>e*180/Math.PI,ss=(e,t,r,n)=>({x:e+Math.cos(-Yh*n)*r,y:t+Math.sin(-Yh*n)*r}),x7=function(t,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{top:0,right:0,bottom:0,left:0};return Math.min(Math.abs(t-(n.left||0)-(n.right||0)),Math.abs(r-(n.top||0)-(n.bottom||0)))/2},w7=(e,t)=>{var{x:r,y:n}=e,{x:s,y:i}=t;return Math.sqrt((r-s)**2+(n-i)**2)},b7=(e,t)=>{var{x:r,y:n}=e,{cx:s,cy:i}=t,l=w7({x:r,y:n},{x:s,y:i});if(l<=0)return{radius:l,angle:0};var u=(r-s)/l,d=Math.acos(u);return n>i&&(d=2*Math.PI-d),{radius:l,angle:v7(d),angleInRadian:d}},j7=e=>{var{startAngle:t,endAngle:r}=e,n=Math.floor(t/360),s=Math.floor(r/360),i=Math.min(n,s);return{startAngle:t-i*360,endAngle:r-i*360}},S7=(e,t)=>{var{startAngle:r,endAngle:n}=t,s=Math.floor(r/360),i=Math.floor(n/360),l=Math.min(s,i);return e+l*360},k7=(e,t)=>{var{chartX:r,chartY:n}=e,{radius:s,angle:i}=b7({x:r,y:n},t),{innerRadius:l,outerRadius:u}=t;if(s<l||s>u||s===0)return null;var{startAngle:d,endAngle:m}=j7(t),f=i,p;if(d<=m){for(;f>m;)f-=360;for(;f<d;)f+=360;p=f>=d&&f<=m}else{for(;f>d;)f-=360;for(;f<m;)f+=360;p=f>=m&&f<=d}return p?e_(e_({},t),{},{radius:s,angle:S7(f,t)}):null};function wP(e){var{cx:t,cy:r,radius:n,startAngle:s,endAngle:i}=e,l=ss(t,r,n,s),u=ss(t,r,n,i);return{points:[l,u],cx:t,cy:r,radius:n,startAngle:s,endAngle:i}}function R0(){return R0=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},R0.apply(null,arguments)}var N7=(e,t)=>{var r=ni(t-e),n=Math.min(Math.abs(t-e),359.999);return r*n},eh=e=>{var{cx:t,cy:r,radius:n,angle:s,sign:i,isExternal:l,cornerRadius:u,cornerIsExternal:d}=e,m=u*(l?1:-1)+n,f=Math.asin(u/m)/Yh,p=d?s:s+i*f,y=ss(t,r,m,p),x=ss(t,r,n,p),j=d?s-i*f:s,b=ss(t,r,m*Math.cos(f*Yh),j);return{center:y,circleTangency:x,lineTangency:b,theta:f}},bP=e=>{var{cx:t,cy:r,innerRadius:n,outerRadius:s,startAngle:i,endAngle:l}=e,u=N7(i,l),d=i+u,m=ss(t,r,s,i),f=ss(t,r,s,d),p="M ".concat(m.x,",").concat(m.y,`
    A `).concat(s,",").concat(s,`,0,
    `).concat(+(Math.abs(u)>180),",").concat(+(i>d),`,
    `).concat(f.x,",").concat(f.y,`
  `);if(n>0){var y=ss(t,r,n,i),x=ss(t,r,n,d);p+="L ".concat(x.x,",").concat(x.y,`
            A `).concat(n,",").concat(n,`,0,
            `).concat(+(Math.abs(u)>180),",").concat(+(i<=d),`,
            `).concat(y.x,",").concat(y.y," Z")}else p+="L ".concat(t,",").concat(r," Z");return p},_7=e=>{var{cx:t,cy:r,innerRadius:n,outerRadius:s,cornerRadius:i,forceCornerRadius:l,cornerIsExternal:u,startAngle:d,endAngle:m}=e,f=ni(m-d),{circleTangency:p,lineTangency:y,theta:x}=eh({cx:t,cy:r,radius:s,angle:d,sign:f,cornerRadius:i,cornerIsExternal:u}),{circleTangency:j,lineTangency:b,theta:k}=eh({cx:t,cy:r,radius:s,angle:m,sign:-f,cornerRadius:i,cornerIsExternal:u}),_=u?Math.abs(d-m):Math.abs(d-m)-x-k;if(_<0)return l?"M ".concat(y.x,",").concat(y.y,`
        a`).concat(i,",").concat(i,",0,0,1,").concat(i*2,`,0
        a`).concat(i,",").concat(i,",0,0,1,").concat(-i*2,`,0
      `):bP({cx:t,cy:r,innerRadius:n,outerRadius:s,startAngle:d,endAngle:m});var E="M ".concat(y.x,",").concat(y.y,`
    A`).concat(i,",").concat(i,",0,0,").concat(+(f<0),",").concat(p.x,",").concat(p.y,`
    A`).concat(s,",").concat(s,",0,").concat(+(_>180),",").concat(+(f<0),",").concat(j.x,",").concat(j.y,`
    A`).concat(i,",").concat(i,",0,0,").concat(+(f<0),",").concat(b.x,",").concat(b.y,`
  `);if(n>0){var{circleTangency:C,lineTangency:O,theta:T}=eh({cx:t,cy:r,radius:n,angle:d,sign:f,isExternal:!0,cornerRadius:i,cornerIsExternal:u}),{circleTangency:A,lineTangency:L,theta:J}=eh({cx:t,cy:r,radius:n,angle:m,sign:-f,isExternal:!0,cornerRadius:i,cornerIsExternal:u}),H=u?Math.abs(d-m):Math.abs(d-m)-T-J;if(H<0&&i===0)return"".concat(E,"L").concat(t,",").concat(r,"Z");E+="L".concat(L.x,",").concat(L.y,`
      A`).concat(i,",").concat(i,",0,0,").concat(+(f<0),",").concat(A.x,",").concat(A.y,`
      A`).concat(n,",").concat(n,",0,").concat(+(H>180),",").concat(+(f>0),",").concat(C.x,",").concat(C.y,`
      A`).concat(i,",").concat(i,",0,0,").concat(+(f<0),",").concat(O.x,",").concat(O.y,"Z")}else E+="L".concat(t,",").concat(r,"Z");return E},C7={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},jP=e=>{var t=Ci(e,C7),{cx:r,cy:n,innerRadius:s,outerRadius:i,cornerRadius:l,forceCornerRadius:u,cornerIsExternal:d,startAngle:m,endAngle:f,className:p}=t;if(i<s||m===f)return null;var y=Nr("recharts-sector",p),x=i-s,j=Qi(l,x,0,!0),b;return j>0&&Math.abs(m-f)<360?b=_7({cx:r,cy:n,innerRadius:s,outerRadius:i,cornerRadius:Math.min(j,x/2),forceCornerRadius:u,cornerIsExternal:d,startAngle:m,endAngle:f}):b=bP({cx:r,cy:n,innerRadius:s,outerRadius:i,startAngle:m,endAngle:f}),v.createElement("path",R0({},Si(t),{className:y,d:b}))};function E7(e,t,r){if(e==="horizontal")return[{x:t.x,y:r.top},{x:t.x,y:r.top+r.height}];if(e==="vertical")return[{x:r.left,y:t.y},{x:r.left+r.width,y:t.y}];if(xA(t)){if(e==="centric"){var{cx:n,cy:s,innerRadius:i,outerRadius:l,angle:u}=t,d=ss(n,s,i,u),m=ss(n,s,l,u);return[{x:d.x,y:d.y},{x:m.x,y:m.y}]}return wP(t)}}var cv={},uv={},dv={},t_;function A7(){return t_||(t_=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=PA();function r(n){return t.isSymbol(n)?NaN:Number(n)}e.toNumber=r})(dv)),dv}var r_;function P7(){return r_||(r_=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=A7();function r(n){return n?(n=t.toNumber(n),n===1/0||n===-1/0?(n<0?-1:1)*Number.MAX_VALUE:n===n?n:0):n===0?n:0}e.toFinite=r})(uv)),uv}var n_;function O7(){return n_||(n_=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=OA(),r=P7();function n(s,i,l){l&&typeof l!="number"&&t.isIterateeCall(s,i,l)&&(i=l=void 0),s=r.toFinite(s),i===void 0?(i=s,s=0):i=r.toFinite(i),l=l===void 0?s<i?1:-1:r.toFinite(l);const u=Math.max(Math.ceil((i-s)/(l||1)),0),d=new Array(u);for(let m=0;m<u;m++)d[m]=s,s+=l;return d}e.range=n})(cv)),cv}var fv,s_;function T7(){return s_||(s_=1,fv=O7().range),fv}var I7=T7();const SP=Zi(I7);function $o(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function D7(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function Zx(e){let t,r,n;e.length!==2?(t=$o,r=(u,d)=>$o(e(u),d),n=(u,d)=>e(u)-d):(t=e===$o||e===D7?e:R7,r=e,n=e);function s(u,d,m=0,f=u.length){if(m<f){if(t(d,d)!==0)return f;do{const p=m+f>>>1;r(u[p],d)<0?m=p+1:f=p}while(m<f)}return m}function i(u,d,m=0,f=u.length){if(m<f){if(t(d,d)!==0)return f;do{const p=m+f>>>1;r(u[p],d)<=0?m=p+1:f=p}while(m<f)}return m}function l(u,d,m=0,f=u.length){const p=s(u,d,m,f-1);return p>m&&n(u[p-1],d)>-n(u[p],d)?p-1:p}return{left:s,center:l,right:i}}function R7(){return 0}function kP(e){return e===null?NaN:+e}function*$7(e,t){for(let r of e)r!=null&&(r=+r)>=r&&(yield r)}const M7=Zx($o),Id=M7.right;Zx(kP).center;class i_ extends Map{constructor(t,r=z7){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:r}}),t!=null)for(const[n,s]of t)this.set(n,s)}get(t){return super.get(a_(this,t))}has(t){return super.has(a_(this,t))}set(t,r){return super.set(F7(this,t),r)}delete(t){return super.delete(L7(this,t))}}function a_({_intern:e,_key:t},r){const n=t(r);return e.has(n)?e.get(n):r}function F7({_intern:e,_key:t},r){const n=t(r);return e.has(n)?e.get(n):(e.set(n,r),r)}function L7({_intern:e,_key:t},r){const n=t(r);return e.has(n)&&(r=e.get(n),e.delete(n)),r}function z7(e){return e!==null&&typeof e=="object"?e.valueOf():e}function U7(e=$o){if(e===$o)return NP;if(typeof e!="function")throw new TypeError("compare is not a function");return(t,r)=>{const n=e(t,r);return n||n===0?n:(e(r,r)===0)-(e(t,t)===0)}}function NP(e,t){return(e==null||!(e>=e))-(t==null||!(t>=t))||(e<t?-1:e>t?1:0)}const B7=Math.sqrt(50),W7=Math.sqrt(10),q7=Math.sqrt(2);function Jh(e,t,r){const n=(t-e)/Math.max(0,r),s=Math.floor(Math.log10(n)),i=n/Math.pow(10,s),l=i>=B7?10:i>=W7?5:i>=q7?2:1;let u,d,m;return s<0?(m=Math.pow(10,-s)/l,u=Math.round(e*m),d=Math.round(t*m),u/m<e&&++u,d/m>t&&--d,m=-m):(m=Math.pow(10,s)*l,u=Math.round(e/m),d=Math.round(t/m),u*m<e&&++u,d*m>t&&--d),d<u&&.5<=r&&r<2?Jh(e,t,r*2):[u,d,m]}function $0(e,t,r){if(t=+t,e=+e,r=+r,!(r>0))return[];if(e===t)return[e];const n=t<e,[s,i,l]=n?Jh(t,e,r):Jh(e,t,r);if(!(i>=s))return[];const u=i-s+1,d=new Array(u);if(n)if(l<0)for(let m=0;m<u;++m)d[m]=(i-m)/-l;else for(let m=0;m<u;++m)d[m]=(i-m)*l;else if(l<0)for(let m=0;m<u;++m)d[m]=(s+m)/-l;else for(let m=0;m<u;++m)d[m]=(s+m)*l;return d}function M0(e,t,r){return t=+t,e=+e,r=+r,Jh(e,t,r)[2]}function F0(e,t,r){t=+t,e=+e,r=+r;const n=t<e,s=n?M0(t,e,r):M0(e,t,r);return(n?-1:1)*(s<0?1/-s:s)}function o_(e,t){let r;for(const n of e)n!=null&&(r<n||r===void 0&&n>=n)&&(r=n);return r}function l_(e,t){let r;for(const n of e)n!=null&&(r>n||r===void 0&&n>=n)&&(r=n);return r}function _P(e,t,r=0,n=1/0,s){if(t=Math.floor(t),r=Math.floor(Math.max(0,r)),n=Math.floor(Math.min(e.length-1,n)),!(r<=t&&t<=n))return e;for(s=s===void 0?NP:U7(s);n>r;){if(n-r>600){const d=n-r+1,m=t-r+1,f=Math.log(d),p=.5*Math.exp(2*f/3),y=.5*Math.sqrt(f*p*(d-p)/d)*(m-d/2<0?-1:1),x=Math.max(r,Math.floor(t-m*p/d+y)),j=Math.min(n,Math.floor(t+(d-m)*p/d+y));_P(e,t,x,j,s)}const i=e[t];let l=r,u=n;for(Lu(e,r,t),s(e[n],i)>0&&Lu(e,r,n);l<u;){for(Lu(e,l,u),++l,--u;s(e[l],i)<0;)++l;for(;s(e[u],i)>0;)--u}s(e[r],i)===0?Lu(e,r,u):(++u,Lu(e,u,n)),u<=t&&(r=u+1),t<=u&&(n=u-1)}return e}function Lu(e,t,r){const n=e[t];e[t]=e[r],e[r]=n}function V7(e,t,r){if(e=Float64Array.from($7(e)),!(!(n=e.length)||isNaN(t=+t))){if(t<=0||n<2)return l_(e);if(t>=1)return o_(e);var n,s=(n-1)*t,i=Math.floor(s),l=o_(_P(e,i).subarray(0,i+1)),u=l_(e.subarray(i+1));return l+(u-l)*(s-i)}}function H7(e,t,r=kP){if(!(!(n=e.length)||isNaN(t=+t))){if(t<=0||n<2)return+r(e[0],0,e);if(t>=1)return+r(e[n-1],n-1,e);var n,s=(n-1)*t,i=Math.floor(s),l=+r(e[i],i,e),u=+r(e[i+1],i+1,e);return l+(u-l)*(s-i)}}function K7(e,t,r){e=+e,t=+t,r=(s=arguments.length)<2?(t=e,e=0,1):s<3?1:+r;for(var n=-1,s=Math.max(0,Math.ceil((t-e)/r))|0,i=new Array(s);++n<s;)i[n]=e+n*r;return i}function Ei(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}function so(e,t){switch(arguments.length){case 0:break;case 1:{typeof e=="function"?this.interpolator(e):this.range(e);break}default:{this.domain(e),typeof t=="function"?this.interpolator(t):this.range(t);break}}return this}const L0=Symbol("implicit");function ew(){var e=new i_,t=[],r=[],n=L0;function s(i){let l=e.get(i);if(l===void 0){if(n!==L0)return n;e.set(i,l=t.push(i)-1)}return r[l%r.length]}return s.domain=function(i){if(!arguments.length)return t.slice();t=[],e=new i_;for(const l of i)e.has(l)||e.set(l,t.push(l)-1);return s},s.range=function(i){return arguments.length?(r=Array.from(i),s):r.slice()},s.unknown=function(i){return arguments.length?(n=i,s):n},s.copy=function(){return ew(t,r).unknown(n)},Ei.apply(s,arguments),s}function tw(){var e=ew().unknown(void 0),t=e.domain,r=e.range,n=0,s=1,i,l,u=!1,d=0,m=0,f=.5;delete e.unknown;function p(){var y=t().length,x=s<n,j=x?s:n,b=x?n:s;i=(b-j)/Math.max(1,y-d+m*2),u&&(i=Math.floor(i)),j+=(b-j-i*(y-d))*f,l=i*(1-d),u&&(j=Math.round(j),l=Math.round(l));var k=K7(y).map(function(_){return j+i*_});return r(x?k.reverse():k)}return e.domain=function(y){return arguments.length?(t(y),p()):t()},e.range=function(y){return arguments.length?([n,s]=y,n=+n,s=+s,p()):[n,s]},e.rangeRound=function(y){return[n,s]=y,n=+n,s=+s,u=!0,p()},e.bandwidth=function(){return l},e.step=function(){return i},e.round=function(y){return arguments.length?(u=!!y,p()):u},e.padding=function(y){return arguments.length?(d=Math.min(1,m=+y),p()):d},e.paddingInner=function(y){return arguments.length?(d=Math.min(1,y),p()):d},e.paddingOuter=function(y){return arguments.length?(m=+y,p()):m},e.align=function(y){return arguments.length?(f=Math.max(0,Math.min(1,y)),p()):f},e.copy=function(){return tw(t(),[n,s]).round(u).paddingInner(d).paddingOuter(m).align(f)},Ei.apply(p(),arguments)}function CP(e){var t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,delete e.paddingOuter,e.copy=function(){return CP(t())},e}function G7(){return CP(tw.apply(null,arguments).paddingInner(1))}function rw(e,t,r){e.prototype=t.prototype=r,r.constructor=e}function EP(e,t){var r=Object.create(e.prototype);for(var n in t)r[n]=t[n];return r}function Dd(){}var pd=.7,Xh=1/pd,Tc="\\s*([+-]?\\d+)\\s*",gd="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",ga="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Y7=/^#([0-9a-f]{3,8})$/,J7=new RegExp(`^rgb\\(${Tc},${Tc},${Tc}\\)$`),X7=new RegExp(`^rgb\\(${ga},${ga},${ga}\\)$`),Q7=new RegExp(`^rgba\\(${Tc},${Tc},${Tc},${gd}\\)$`),Z7=new RegExp(`^rgba\\(${ga},${ga},${ga},${gd}\\)$`),e9=new RegExp(`^hsl\\(${gd},${ga},${ga}\\)$`),t9=new RegExp(`^hsla\\(${gd},${ga},${ga},${gd}\\)$`),c_={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};rw(Dd,yd,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:u_,formatHex:u_,formatHex8:r9,formatHsl:n9,formatRgb:d_,toString:d_});function u_(){return this.rgb().formatHex()}function r9(){return this.rgb().formatHex8()}function n9(){return AP(this).formatHsl()}function d_(){return this.rgb().formatRgb()}function yd(e){var t,r;return e=(e+"").trim().toLowerCase(),(t=Y7.exec(e))?(r=t[1].length,t=parseInt(t[1],16),r===6?f_(t):r===3?new Fs(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):r===8?th(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):r===4?th(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=J7.exec(e))?new Fs(t[1],t[2],t[3],1):(t=X7.exec(e))?new Fs(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=Q7.exec(e))?th(t[1],t[2],t[3],t[4]):(t=Z7.exec(e))?th(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=e9.exec(e))?p_(t[1],t[2]/100,t[3]/100,1):(t=t9.exec(e))?p_(t[1],t[2]/100,t[3]/100,t[4]):c_.hasOwnProperty(e)?f_(c_[e]):e==="transparent"?new Fs(NaN,NaN,NaN,0):null}function f_(e){return new Fs(e>>16&255,e>>8&255,e&255,1)}function th(e,t,r,n){return n<=0&&(e=t=r=NaN),new Fs(e,t,r,n)}function s9(e){return e instanceof Dd||(e=yd(e)),e?(e=e.rgb(),new Fs(e.r,e.g,e.b,e.opacity)):new Fs}function z0(e,t,r,n){return arguments.length===1?s9(e):new Fs(e,t,r,n??1)}function Fs(e,t,r,n){this.r=+e,this.g=+t,this.b=+r,this.opacity=+n}rw(Fs,z0,EP(Dd,{brighter(e){return e=e==null?Xh:Math.pow(Xh,e),new Fs(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?pd:Math.pow(pd,e),new Fs(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new Fs(jl(this.r),jl(this.g),jl(this.b),Qh(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:h_,formatHex:h_,formatHex8:i9,formatRgb:m_,toString:m_}));function h_(){return`#${gl(this.r)}${gl(this.g)}${gl(this.b)}`}function i9(){return`#${gl(this.r)}${gl(this.g)}${gl(this.b)}${gl((isNaN(this.opacity)?1:this.opacity)*255)}`}function m_(){const e=Qh(this.opacity);return`${e===1?"rgb(":"rgba("}${jl(this.r)}, ${jl(this.g)}, ${jl(this.b)}${e===1?")":`, ${e})`}`}function Qh(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function jl(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function gl(e){return e=jl(e),(e<16?"0":"")+e.toString(16)}function p_(e,t,r,n){return n<=0?e=t=r=NaN:r<=0||r>=1?e=t=NaN:t<=0&&(e=NaN),new Yi(e,t,r,n)}function AP(e){if(e instanceof Yi)return new Yi(e.h,e.s,e.l,e.opacity);if(e instanceof Dd||(e=yd(e)),!e)return new Yi;if(e instanceof Yi)return e;e=e.rgb();var t=e.r/255,r=e.g/255,n=e.b/255,s=Math.min(t,r,n),i=Math.max(t,r,n),l=NaN,u=i-s,d=(i+s)/2;return u?(t===i?l=(r-n)/u+(r<n)*6:r===i?l=(n-t)/u+2:l=(t-r)/u+4,u/=d<.5?i+s:2-i-s,l*=60):u=d>0&&d<1?0:l,new Yi(l,u,d,e.opacity)}function a9(e,t,r,n){return arguments.length===1?AP(e):new Yi(e,t,r,n??1)}function Yi(e,t,r,n){this.h=+e,this.s=+t,this.l=+r,this.opacity=+n}rw(Yi,a9,EP(Dd,{brighter(e){return e=e==null?Xh:Math.pow(Xh,e),new Yi(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?pd:Math.pow(pd,e),new Yi(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,r=this.l,n=r+(r<.5?r:1-r)*t,s=2*r-n;return new Fs(hv(e>=240?e-240:e+120,s,n),hv(e,s,n),hv(e<120?e+240:e-120,s,n),this.opacity)},clamp(){return new Yi(g_(this.h),rh(this.s),rh(this.l),Qh(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=Qh(this.opacity);return`${e===1?"hsl(":"hsla("}${g_(this.h)}, ${rh(this.s)*100}%, ${rh(this.l)*100}%${e===1?")":`, ${e})`}`}}));function g_(e){return e=(e||0)%360,e<0?e+360:e}function rh(e){return Math.max(0,Math.min(1,e||0))}function hv(e,t,r){return(e<60?t+(r-t)*e/60:e<180?r:e<240?t+(r-t)*(240-e)/60:t)*255}const nw=e=>()=>e;function o9(e,t){return function(r){return e+r*t}}function l9(e,t,r){return e=Math.pow(e,r),t=Math.pow(t,r)-e,r=1/r,function(n){return Math.pow(e+n*t,r)}}function c9(e){return(e=+e)==1?PP:function(t,r){return r-t?l9(t,r,e):nw(isNaN(t)?r:t)}}function PP(e,t){var r=t-e;return r?o9(e,r):nw(isNaN(e)?t:e)}const y_=(function e(t){var r=c9(t);function n(s,i){var l=r((s=z0(s)).r,(i=z0(i)).r),u=r(s.g,i.g),d=r(s.b,i.b),m=PP(s.opacity,i.opacity);return function(f){return s.r=l(f),s.g=u(f),s.b=d(f),s.opacity=m(f),s+""}}return n.gamma=e,n})(1);function u9(e,t){t||(t=[]);var r=e?Math.min(t.length,e.length):0,n=t.slice(),s;return function(i){for(s=0;s<r;++s)n[s]=e[s]*(1-i)+t[s]*i;return n}}function d9(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function f9(e,t){var r=t?t.length:0,n=e?Math.min(r,e.length):0,s=new Array(n),i=new Array(r),l;for(l=0;l<n;++l)s[l]=Zc(e[l],t[l]);for(;l<r;++l)i[l]=t[l];return function(u){for(l=0;l<n;++l)i[l]=s[l](u);return i}}function h9(e,t){var r=new Date;return e=+e,t=+t,function(n){return r.setTime(e*(1-n)+t*n),r}}function Zh(e,t){return e=+e,t=+t,function(r){return e*(1-r)+t*r}}function m9(e,t){var r={},n={},s;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(s in t)s in e?r[s]=Zc(e[s],t[s]):n[s]=t[s];return function(i){for(s in r)n[s]=r[s](i);return n}}var U0=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,mv=new RegExp(U0.source,"g");function p9(e){return function(){return e}}function g9(e){return function(t){return e(t)+""}}function y9(e,t){var r=U0.lastIndex=mv.lastIndex=0,n,s,i,l=-1,u=[],d=[];for(e=e+"",t=t+"";(n=U0.exec(e))&&(s=mv.exec(t));)(i=s.index)>r&&(i=t.slice(r,i),u[l]?u[l]+=i:u[++l]=i),(n=n[0])===(s=s[0])?u[l]?u[l]+=s:u[++l]=s:(u[++l]=null,d.push({i:l,x:Zh(n,s)})),r=mv.lastIndex;return r<t.length&&(i=t.slice(r),u[l]?u[l]+=i:u[++l]=i),u.length<2?d[0]?g9(d[0].x):p9(t):(t=d.length,function(m){for(var f=0,p;f<t;++f)u[(p=d[f]).i]=p.x(m);return u.join("")})}function Zc(e,t){var r=typeof t,n;return t==null||r==="boolean"?nw(t):(r==="number"?Zh:r==="string"?(n=yd(t))?(t=n,y_):y9:t instanceof yd?y_:t instanceof Date?h9:d9(t)?u9:Array.isArray(t)?f9:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?m9:Zh)(e,t)}function sw(e,t){return e=+e,t=+t,function(r){return Math.round(e*(1-r)+t*r)}}function v9(e,t){t===void 0&&(t=e,e=Zc);for(var r=0,n=t.length-1,s=t[0],i=new Array(n<0?0:n);r<n;)i[r]=e(s,s=t[++r]);return function(l){var u=Math.max(0,Math.min(n-1,Math.floor(l*=n)));return i[u](l-u)}}function x9(e){return function(){return e}}function em(e){return+e}var v_=[0,1];function ws(e){return e}function B0(e,t){return(t-=e=+e)?function(r){return(r-e)/t}:x9(isNaN(t)?NaN:.5)}function w9(e,t){var r;return e>t&&(r=e,e=t,t=r),function(n){return Math.max(e,Math.min(t,n))}}function b9(e,t,r){var n=e[0],s=e[1],i=t[0],l=t[1];return s<n?(n=B0(s,n),i=r(l,i)):(n=B0(n,s),i=r(i,l)),function(u){return i(n(u))}}function j9(e,t,r){var n=Math.min(e.length,t.length)-1,s=new Array(n),i=new Array(n),l=-1;for(e[n]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++l<n;)s[l]=B0(e[l],e[l+1]),i[l]=r(t[l],t[l+1]);return function(u){var d=Id(e,u,1,n)-1;return i[d](s[d](u))}}function Rd(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function Km(){var e=v_,t=v_,r=Zc,n,s,i,l=ws,u,d,m;function f(){var y=Math.min(e.length,t.length);return l!==ws&&(l=w9(e[0],e[y-1])),u=y>2?j9:b9,d=m=null,p}function p(y){return y==null||isNaN(y=+y)?i:(d||(d=u(e.map(n),t,r)))(n(l(y)))}return p.invert=function(y){return l(s((m||(m=u(t,e.map(n),Zh)))(y)))},p.domain=function(y){return arguments.length?(e=Array.from(y,em),f()):e.slice()},p.range=function(y){return arguments.length?(t=Array.from(y),f()):t.slice()},p.rangeRound=function(y){return t=Array.from(y),r=sw,f()},p.clamp=function(y){return arguments.length?(l=y?!0:ws,f()):l!==ws},p.interpolate=function(y){return arguments.length?(r=y,f()):r},p.unknown=function(y){return arguments.length?(i=y,p):i},function(y,x){return n=y,s=x,f()}}function iw(){return Km()(ws,ws)}function S9(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function tm(e,t){if((r=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var r,n=e.slice(0,r);return[n.length>1?n[0]+n.slice(2):n,+e.slice(r+1)]}function $c(e){return e=tm(Math.abs(e)),e?e[1]:NaN}function k9(e,t){return function(r,n){for(var s=r.length,i=[],l=0,u=e[0],d=0;s>0&&u>0&&(d+u+1>n&&(u=Math.max(1,n-d)),i.push(r.substring(s-=u,s+u)),!((d+=u+1)>n));)u=e[l=(l+1)%e.length];return i.reverse().join(t)}}function N9(e){return function(t){return t.replace(/[0-9]/g,function(r){return e[+r]})}}var _9=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function vd(e){if(!(t=_9.exec(e)))throw new Error("invalid format: "+e);var t;return new aw({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}vd.prototype=aw.prototype;function aw(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}aw.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function C9(e){e:for(var t=e.length,r=1,n=-1,s;r<t;++r)switch(e[r]){case".":n=s=r;break;case"0":n===0&&(n=r),s=r;break;default:if(!+e[r])break e;n>0&&(n=0);break}return n>0?e.slice(0,n)+e.slice(s+1):e}var OP;function E9(e,t){var r=tm(e,t);if(!r)return e+"";var n=r[0],s=r[1],i=s-(OP=Math.max(-8,Math.min(8,Math.floor(s/3)))*3)+1,l=n.length;return i===l?n:i>l?n+new Array(i-l+1).join("0"):i>0?n.slice(0,i)+"."+n.slice(i):"0."+new Array(1-i).join("0")+tm(e,Math.max(0,t+i-1))[0]}function x_(e,t){var r=tm(e,t);if(!r)return e+"";var n=r[0],s=r[1];return s<0?"0."+new Array(-s).join("0")+n:n.length>s+1?n.slice(0,s+1)+"."+n.slice(s+1):n+new Array(s-n.length+2).join("0")}const w_={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:S9,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>x_(e*100,t),r:x_,s:E9,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function b_(e){return e}var j_=Array.prototype.map,S_=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function A9(e){var t=e.grouping===void 0||e.thousands===void 0?b_:k9(j_.call(e.grouping,Number),e.thousands+""),r=e.currency===void 0?"":e.currency[0]+"",n=e.currency===void 0?"":e.currency[1]+"",s=e.decimal===void 0?".":e.decimal+"",i=e.numerals===void 0?b_:N9(j_.call(e.numerals,String)),l=e.percent===void 0?"%":e.percent+"",u=e.minus===void 0?"":e.minus+"",d=e.nan===void 0?"NaN":e.nan+"";function m(p){p=vd(p);var y=p.fill,x=p.align,j=p.sign,b=p.symbol,k=p.zero,_=p.width,E=p.comma,C=p.precision,O=p.trim,T=p.type;T==="n"?(E=!0,T="g"):w_[T]||(C===void 0&&(C=12),O=!0,T="g"),(k||y==="0"&&x==="=")&&(k=!0,y="0",x="=");var A=b==="$"?r:b==="#"&&/[boxX]/.test(T)?"0"+T.toLowerCase():"",L=b==="$"?n:/[%p]/.test(T)?l:"",J=w_[T],H=/[defgprs%]/.test(T);C=C===void 0?6:/[gprs]/.test(T)?Math.max(1,Math.min(21,C)):Math.max(0,Math.min(20,C));function me(Z){var K=A,ce=L,z,se,B;if(T==="c")ce=J(Z)+ce,Z="";else{Z=+Z;var ue=Z<0||1/Z<0;if(Z=isNaN(Z)?d:J(Math.abs(Z),C),O&&(Z=C9(Z)),ue&&+Z==0&&j!=="+"&&(ue=!1),K=(ue?j==="("?j:u:j==="-"||j==="("?"":j)+K,ce=(T==="s"?S_[8+OP/3]:"")+ce+(ue&&j==="("?")":""),H){for(z=-1,se=Z.length;++z<se;)if(B=Z.charCodeAt(z),48>B||B>57){ce=(B===46?s+Z.slice(z+1):Z.slice(z))+ce,Z=Z.slice(0,z);break}}}E&&!k&&(Z=t(Z,1/0));var oe=K.length+Z.length+ce.length,X=oe<_?new Array(_-oe+1).join(y):"";switch(E&&k&&(Z=t(X+Z,X.length?_-ce.length:1/0),X=""),x){case"<":Z=K+Z+ce+X;break;case"=":Z=K+X+Z+ce;break;case"^":Z=X.slice(0,oe=X.length>>1)+K+Z+ce+X.slice(oe);break;default:Z=X+K+Z+ce;break}return i(Z)}return me.toString=function(){return p+""},me}function f(p,y){var x=m((p=vd(p),p.type="f",p)),j=Math.max(-8,Math.min(8,Math.floor($c(y)/3)))*3,b=Math.pow(10,-j),k=S_[8+j/3];return function(_){return x(b*_)+k}}return{format:m,formatPrefix:f}}var nh,ow,TP;P9({thousands:",",grouping:[3],currency:["$",""]});function P9(e){return nh=A9(e),ow=nh.format,TP=nh.formatPrefix,nh}function O9(e){return Math.max(0,-$c(Math.abs(e)))}function T9(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor($c(t)/3)))*3-$c(Math.abs(e)))}function I9(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,$c(t)-$c(e))+1}function IP(e,t,r,n){var s=F0(e,t,r),i;switch(n=vd(n??",f"),n.type){case"s":{var l=Math.max(Math.abs(e),Math.abs(t));return n.precision==null&&!isNaN(i=T9(s,l))&&(n.precision=i),TP(n,l)}case"":case"e":case"g":case"p":case"r":{n.precision==null&&!isNaN(i=I9(s,Math.max(Math.abs(e),Math.abs(t))))&&(n.precision=i-(n.type==="e"));break}case"f":case"%":{n.precision==null&&!isNaN(i=O9(s))&&(n.precision=i-(n.type==="%")*2);break}}return ow(n)}function Bo(e){var t=e.domain;return e.ticks=function(r){var n=t();return $0(n[0],n[n.length-1],r??10)},e.tickFormat=function(r,n){var s=t();return IP(s[0],s[s.length-1],r??10,n)},e.nice=function(r){r==null&&(r=10);var n=t(),s=0,i=n.length-1,l=n[s],u=n[i],d,m,f=10;for(u<l&&(m=l,l=u,u=m,m=s,s=i,i=m);f-- >0;){if(m=M0(l,u,r),m===d)return n[s]=l,n[i]=u,t(n);if(m>0)l=Math.floor(l/m)*m,u=Math.ceil(u/m)*m;else if(m<0)l=Math.ceil(l*m)/m,u=Math.floor(u*m)/m;else break;d=m}return e},e}function DP(){var e=iw();return e.copy=function(){return Rd(e,DP())},Ei.apply(e,arguments),Bo(e)}function RP(e){var t;function r(n){return n==null||isNaN(n=+n)?t:n}return r.invert=r,r.domain=r.range=function(n){return arguments.length?(e=Array.from(n,em),r):e.slice()},r.unknown=function(n){return arguments.length?(t=n,r):t},r.copy=function(){return RP(e).unknown(t)},e=arguments.length?Array.from(e,em):[0,1],Bo(r)}function $P(e,t){e=e.slice();var r=0,n=e.length-1,s=e[r],i=e[n],l;return i<s&&(l=r,r=n,n=l,l=s,s=i,i=l),e[r]=t.floor(s),e[n]=t.ceil(i),e}function k_(e){return Math.log(e)}function N_(e){return Math.exp(e)}function D9(e){return-Math.log(-e)}function R9(e){return-Math.exp(-e)}function $9(e){return isFinite(e)?+("1e"+e):e<0?0:e}function M9(e){return e===10?$9:e===Math.E?Math.exp:t=>Math.pow(e,t)}function F9(e){return e===Math.E?Math.log:e===10&&Math.log10||e===2&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}function __(e){return(t,r)=>-e(-t,r)}function lw(e){const t=e(k_,N_),r=t.domain;let n=10,s,i;function l(){return s=F9(n),i=M9(n),r()[0]<0?(s=__(s),i=__(i),e(D9,R9)):e(k_,N_),t}return t.base=function(u){return arguments.length?(n=+u,l()):n},t.domain=function(u){return arguments.length?(r(u),l()):r()},t.ticks=u=>{const d=r();let m=d[0],f=d[d.length-1];const p=f<m;p&&([m,f]=[f,m]);let y=s(m),x=s(f),j,b;const k=u==null?10:+u;let _=[];if(!(n%1)&&x-y<k){if(y=Math.floor(y),x=Math.ceil(x),m>0){for(;y<=x;++y)for(j=1;j<n;++j)if(b=y<0?j/i(-y):j*i(y),!(b<m)){if(b>f)break;_.push(b)}}else for(;y<=x;++y)for(j=n-1;j>=1;--j)if(b=y>0?j/i(-y):j*i(y),!(b<m)){if(b>f)break;_.push(b)}_.length*2<k&&(_=$0(m,f,k))}else _=$0(y,x,Math.min(x-y,k)).map(i);return p?_.reverse():_},t.tickFormat=(u,d)=>{if(u==null&&(u=10),d==null&&(d=n===10?"s":","),typeof d!="function"&&(!(n%1)&&(d=vd(d)).precision==null&&(d.trim=!0),d=ow(d)),u===1/0)return d;const m=Math.max(1,n*u/t.ticks().length);return f=>{let p=f/i(Math.round(s(f)));return p*n<n-.5&&(p*=n),p<=m?d(f):""}},t.nice=()=>r($P(r(),{floor:u=>i(Math.floor(s(u))),ceil:u=>i(Math.ceil(s(u)))})),t}function MP(){const e=lw(Km()).domain([1,10]);return e.copy=()=>Rd(e,MP()).base(e.base()),Ei.apply(e,arguments),e}function C_(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function E_(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function cw(e){var t=1,r=e(C_(t),E_(t));return r.constant=function(n){return arguments.length?e(C_(t=+n),E_(t)):t},Bo(r)}function FP(){var e=cw(Km());return e.copy=function(){return Rd(e,FP()).constant(e.constant())},Ei.apply(e,arguments)}function A_(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function L9(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function z9(e){return e<0?-e*e:e*e}function uw(e){var t=e(ws,ws),r=1;function n(){return r===1?e(ws,ws):r===.5?e(L9,z9):e(A_(r),A_(1/r))}return t.exponent=function(s){return arguments.length?(r=+s,n()):r},Bo(t)}function dw(){var e=uw(Km());return e.copy=function(){return Rd(e,dw()).exponent(e.exponent())},Ei.apply(e,arguments),e}function U9(){return dw.apply(null,arguments).exponent(.5)}function P_(e){return Math.sign(e)*e*e}function B9(e){return Math.sign(e)*Math.sqrt(Math.abs(e))}function LP(){var e=iw(),t=[0,1],r=!1,n;function s(i){var l=B9(e(i));return isNaN(l)?n:r?Math.round(l):l}return s.invert=function(i){return e.invert(P_(i))},s.domain=function(i){return arguments.length?(e.domain(i),s):e.domain()},s.range=function(i){return arguments.length?(e.range((t=Array.from(i,em)).map(P_)),s):t.slice()},s.rangeRound=function(i){return s.range(i).round(!0)},s.round=function(i){return arguments.length?(r=!!i,s):r},s.clamp=function(i){return arguments.length?(e.clamp(i),s):e.clamp()},s.unknown=function(i){return arguments.length?(n=i,s):n},s.copy=function(){return LP(e.domain(),t).round(r).clamp(e.clamp()).unknown(n)},Ei.apply(s,arguments),Bo(s)}function zP(){var e=[],t=[],r=[],n;function s(){var l=0,u=Math.max(1,t.length);for(r=new Array(u-1);++l<u;)r[l-1]=H7(e,l/u);return i}function i(l){return l==null||isNaN(l=+l)?n:t[Id(r,l)]}return i.invertExtent=function(l){var u=t.indexOf(l);return u<0?[NaN,NaN]:[u>0?r[u-1]:e[0],u<r.length?r[u]:e[e.length-1]]},i.domain=function(l){if(!arguments.length)return e.slice();e=[];for(let u of l)u!=null&&!isNaN(u=+u)&&e.push(u);return e.sort($o),s()},i.range=function(l){return arguments.length?(t=Array.from(l),s()):t.slice()},i.unknown=function(l){return arguments.length?(n=l,i):n},i.quantiles=function(){return r.slice()},i.copy=function(){return zP().domain(e).range(t).unknown(n)},Ei.apply(i,arguments)}function UP(){var e=0,t=1,r=1,n=[.5],s=[0,1],i;function l(d){return d!=null&&d<=d?s[Id(n,d,0,r)]:i}function u(){var d=-1;for(n=new Array(r);++d<r;)n[d]=((d+1)*t-(d-r)*e)/(r+1);return l}return l.domain=function(d){return arguments.length?([e,t]=d,e=+e,t=+t,u()):[e,t]},l.range=function(d){return arguments.length?(r=(s=Array.from(d)).length-1,u()):s.slice()},l.invertExtent=function(d){var m=s.indexOf(d);return m<0?[NaN,NaN]:m<1?[e,n[0]]:m>=r?[n[r-1],t]:[n[m-1],n[m]]},l.unknown=function(d){return arguments.length&&(i=d),l},l.thresholds=function(){return n.slice()},l.copy=function(){return UP().domain([e,t]).range(s).unknown(i)},Ei.apply(Bo(l),arguments)}function BP(){var e=[.5],t=[0,1],r,n=1;function s(i){return i!=null&&i<=i?t[Id(e,i,0,n)]:r}return s.domain=function(i){return arguments.length?(e=Array.from(i),n=Math.min(e.length,t.length-1),s):e.slice()},s.range=function(i){return arguments.length?(t=Array.from(i),n=Math.min(e.length,t.length-1),s):t.slice()},s.invertExtent=function(i){var l=t.indexOf(i);return[e[l-1],e[l]]},s.unknown=function(i){return arguments.length?(r=i,s):r},s.copy=function(){return BP().domain(e).range(t).unknown(r)},Ei.apply(s,arguments)}const pv=new Date,gv=new Date;function Pn(e,t,r,n){function s(i){return e(i=arguments.length===0?new Date:new Date(+i)),i}return s.floor=i=>(e(i=new Date(+i)),i),s.ceil=i=>(e(i=new Date(i-1)),t(i,1),e(i),i),s.round=i=>{const l=s(i),u=s.ceil(i);return i-l<u-i?l:u},s.offset=(i,l)=>(t(i=new Date(+i),l==null?1:Math.floor(l)),i),s.range=(i,l,u)=>{const d=[];if(i=s.ceil(i),u=u==null?1:Math.floor(u),!(i<l)||!(u>0))return d;let m;do d.push(m=new Date(+i)),t(i,u),e(i);while(m<i&&i<l);return d},s.filter=i=>Pn(l=>{if(l>=l)for(;e(l),!i(l);)l.setTime(l-1)},(l,u)=>{if(l>=l)if(u<0)for(;++u<=0;)for(;t(l,-1),!i(l););else for(;--u>=0;)for(;t(l,1),!i(l););}),r&&(s.count=(i,l)=>(pv.setTime(+i),gv.setTime(+l),e(pv),e(gv),Math.floor(r(pv,gv))),s.every=i=>(i=Math.floor(i),!isFinite(i)||!(i>0)?null:i>1?s.filter(n?l=>n(l)%i===0:l=>s.count(0,l)%i===0):s)),s}const rm=Pn(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);rm.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?Pn(t=>{t.setTime(Math.floor(t/e)*e)},(t,r)=>{t.setTime(+t+r*e)},(t,r)=>(r-t)/e):rm);rm.range;const La=1e3,bi=La*60,za=bi*60,Ja=za*24,fw=Ja*7,O_=Ja*30,yv=Ja*365,yl=Pn(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*La)},(e,t)=>(t-e)/La,e=>e.getUTCSeconds());yl.range;const hw=Pn(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*La)},(e,t)=>{e.setTime(+e+t*bi)},(e,t)=>(t-e)/bi,e=>e.getMinutes());hw.range;const mw=Pn(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*bi)},(e,t)=>(t-e)/bi,e=>e.getUTCMinutes());mw.range;const pw=Pn(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*La-e.getMinutes()*bi)},(e,t)=>{e.setTime(+e+t*za)},(e,t)=>(t-e)/za,e=>e.getHours());pw.range;const gw=Pn(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*za)},(e,t)=>(t-e)/za,e=>e.getUTCHours());gw.range;const $d=Pn(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*bi)/Ja,e=>e.getDate()-1);$d.range;const Gm=Pn(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/Ja,e=>e.getUTCDate()-1);Gm.range;const WP=Pn(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/Ja,e=>Math.floor(e/Ja));WP.range;function $l(e){return Pn(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(t,r)=>{t.setDate(t.getDate()+r*7)},(t,r)=>(r-t-(r.getTimezoneOffset()-t.getTimezoneOffset())*bi)/fw)}const Ym=$l(0),nm=$l(1),W9=$l(2),q9=$l(3),Mc=$l(4),V9=$l(5),H9=$l(6);Ym.range;nm.range;W9.range;q9.range;Mc.range;V9.range;H9.range;function Ml(e){return Pn(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(t,r)=>{t.setUTCDate(t.getUTCDate()+r*7)},(t,r)=>(r-t)/fw)}const Jm=Ml(0),sm=Ml(1),K9=Ml(2),G9=Ml(3),Fc=Ml(4),Y9=Ml(5),J9=Ml(6);Jm.range;sm.range;K9.range;G9.range;Fc.range;Y9.range;J9.range;const yw=Pn(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12,e=>e.getMonth());yw.range;const vw=Pn(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth());vw.range;const Xa=Pn(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());Xa.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:Pn(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,r)=>{t.setFullYear(t.getFullYear()+r*e)});Xa.range;const Qa=Pn(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());Qa.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:Pn(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,r)=>{t.setUTCFullYear(t.getUTCFullYear()+r*e)});Qa.range;function qP(e,t,r,n,s,i){const l=[[yl,1,La],[yl,5,5*La],[yl,15,15*La],[yl,30,30*La],[i,1,bi],[i,5,5*bi],[i,15,15*bi],[i,30,30*bi],[s,1,za],[s,3,3*za],[s,6,6*za],[s,12,12*za],[n,1,Ja],[n,2,2*Ja],[r,1,fw],[t,1,O_],[t,3,3*O_],[e,1,yv]];function u(m,f,p){const y=f<m;y&&([m,f]=[f,m]);const x=p&&typeof p.range=="function"?p:d(m,f,p),j=x?x.range(m,+f+1):[];return y?j.reverse():j}function d(m,f,p){const y=Math.abs(f-m)/p,x=Zx(([,,k])=>k).right(l,y);if(x===l.length)return e.every(F0(m/yv,f/yv,p));if(x===0)return rm.every(Math.max(F0(m,f,p),1));const[j,b]=l[y/l[x-1][2]<l[x][2]/y?x-1:x];return j.every(b)}return[u,d]}const[X9,Q9]=qP(Qa,vw,Jm,WP,gw,mw),[Z9,eW]=qP(Xa,yw,Ym,$d,pw,hw);function vv(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function xv(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function zu(e,t,r){return{y:e,m:t,d:r,H:0,M:0,S:0,L:0}}function tW(e){var t=e.dateTime,r=e.date,n=e.time,s=e.periods,i=e.days,l=e.shortDays,u=e.months,d=e.shortMonths,m=Uu(s),f=Bu(s),p=Uu(i),y=Bu(i),x=Uu(l),j=Bu(l),b=Uu(u),k=Bu(u),_=Uu(d),E=Bu(d),C={a:ue,A:oe,b:X,B:ee,c:null,d:M_,e:M_,f:kW,g:DW,G:$W,H:bW,I:jW,j:SW,L:VP,m:NW,M:_W,p:D,q,Q:z_,s:U_,S:CW,u:EW,U:AW,V:PW,w:OW,W:TW,x:null,X:null,y:IW,Y:RW,Z:MW,"%":L_},O={a:Te,A:we,b:Ce,B:le,c:null,d:F_,e:F_,f:UW,g:XW,G:ZW,H:FW,I:LW,j:zW,L:KP,m:BW,M:WW,p:de,q:Q,Q:z_,s:U_,S:qW,u:VW,U:HW,V:KW,w:GW,W:YW,x:null,X:null,y:JW,Y:QW,Z:eq,"%":L_},T={a:me,A:Z,b:K,B:ce,c:z,d:R_,e:R_,f:yW,g:D_,G:I_,H:$_,I:$_,j:hW,L:gW,m:fW,M:mW,p:H,q:dW,Q:xW,s:wW,S:pW,u:aW,U:oW,V:lW,w:iW,W:cW,x:se,X:B,y:D_,Y:I_,Z:uW,"%":vW};C.x=A(r,C),C.X=A(n,C),C.c=A(t,C),O.x=A(r,O),O.X=A(n,O),O.c=A(t,O);function A(R,ge){return function($e){var V=[],Fe=-1,Be=0,dt=R.length,ft,Dt,Nt;for($e instanceof Date||($e=new Date(+$e));++Fe<dt;)R.charCodeAt(Fe)===37&&(V.push(R.slice(Be,Fe)),(Dt=T_[ft=R.charAt(++Fe)])!=null?ft=R.charAt(++Fe):Dt=ft==="e"?" ":"0",(Nt=ge[ft])&&(ft=Nt($e,Dt)),V.push(ft),Be=Fe+1);return V.push(R.slice(Be,Fe)),V.join("")}}function L(R,ge){return function($e){var V=zu(1900,void 0,1),Fe=J(V,R,$e+="",0),Be,dt;if(Fe!=$e.length)return null;if("Q"in V)return new Date(V.Q);if("s"in V)return new Date(V.s*1e3+("L"in V?V.L:0));if(ge&&!("Z"in V)&&(V.Z=0),"p"in V&&(V.H=V.H%12+V.p*12),V.m===void 0&&(V.m="q"in V?V.q:0),"V"in V){if(V.V<1||V.V>53)return null;"w"in V||(V.w=1),"Z"in V?(Be=xv(zu(V.y,0,1)),dt=Be.getUTCDay(),Be=dt>4||dt===0?sm.ceil(Be):sm(Be),Be=Gm.offset(Be,(V.V-1)*7),V.y=Be.getUTCFullYear(),V.m=Be.getUTCMonth(),V.d=Be.getUTCDate()+(V.w+6)%7):(Be=vv(zu(V.y,0,1)),dt=Be.getDay(),Be=dt>4||dt===0?nm.ceil(Be):nm(Be),Be=$d.offset(Be,(V.V-1)*7),V.y=Be.getFullYear(),V.m=Be.getMonth(),V.d=Be.getDate()+(V.w+6)%7)}else("W"in V||"U"in V)&&("w"in V||(V.w="u"in V?V.u%7:"W"in V?1:0),dt="Z"in V?xv(zu(V.y,0,1)).getUTCDay():vv(zu(V.y,0,1)).getDay(),V.m=0,V.d="W"in V?(V.w+6)%7+V.W*7-(dt+5)%7:V.w+V.U*7-(dt+6)%7);return"Z"in V?(V.H+=V.Z/100|0,V.M+=V.Z%100,xv(V)):vv(V)}}function J(R,ge,$e,V){for(var Fe=0,Be=ge.length,dt=$e.length,ft,Dt;Fe<Be;){if(V>=dt)return-1;if(ft=ge.charCodeAt(Fe++),ft===37){if(ft=ge.charAt(Fe++),Dt=T[ft in T_?ge.charAt(Fe++):ft],!Dt||(V=Dt(R,$e,V))<0)return-1}else if(ft!=$e.charCodeAt(V++))return-1}return V}function H(R,ge,$e){var V=m.exec(ge.slice($e));return V?(R.p=f.get(V[0].toLowerCase()),$e+V[0].length):-1}function me(R,ge,$e){var V=x.exec(ge.slice($e));return V?(R.w=j.get(V[0].toLowerCase()),$e+V[0].length):-1}function Z(R,ge,$e){var V=p.exec(ge.slice($e));return V?(R.w=y.get(V[0].toLowerCase()),$e+V[0].length):-1}function K(R,ge,$e){var V=_.exec(ge.slice($e));return V?(R.m=E.get(V[0].toLowerCase()),$e+V[0].length):-1}function ce(R,ge,$e){var V=b.exec(ge.slice($e));return V?(R.m=k.get(V[0].toLowerCase()),$e+V[0].length):-1}function z(R,ge,$e){return J(R,t,ge,$e)}function se(R,ge,$e){return J(R,r,ge,$e)}function B(R,ge,$e){return J(R,n,ge,$e)}function ue(R){return l[R.getDay()]}function oe(R){return i[R.getDay()]}function X(R){return d[R.getMonth()]}function ee(R){return u[R.getMonth()]}function D(R){return s[+(R.getHours()>=12)]}function q(R){return 1+~~(R.getMonth()/3)}function Te(R){return l[R.getUTCDay()]}function we(R){return i[R.getUTCDay()]}function Ce(R){return d[R.getUTCMonth()]}function le(R){return u[R.getUTCMonth()]}function de(R){return s[+(R.getUTCHours()>=12)]}function Q(R){return 1+~~(R.getUTCMonth()/3)}return{format:function(R){var ge=A(R+="",C);return ge.toString=function(){return R},ge},parse:function(R){var ge=L(R+="",!1);return ge.toString=function(){return R},ge},utcFormat:function(R){var ge=A(R+="",O);return ge.toString=function(){return R},ge},utcParse:function(R){var ge=L(R+="",!0);return ge.toString=function(){return R},ge}}}var T_={"-":"",_:" ",0:"0"},Gn=/^\s*\d+/,rW=/^%/,nW=/[\\^$*+?|[\]().{}]/g;function Kt(e,t,r){var n=e<0?"-":"",s=(n?-e:e)+"",i=s.length;return n+(i<r?new Array(r-i+1).join(t)+s:s)}function sW(e){return e.replace(nW,"\\$&")}function Uu(e){return new RegExp("^(?:"+e.map(sW).join("|")+")","i")}function Bu(e){return new Map(e.map((t,r)=>[t.toLowerCase(),r]))}function iW(e,t,r){var n=Gn.exec(t.slice(r,r+1));return n?(e.w=+n[0],r+n[0].length):-1}function aW(e,t,r){var n=Gn.exec(t.slice(r,r+1));return n?(e.u=+n[0],r+n[0].length):-1}function oW(e,t,r){var n=Gn.exec(t.slice(r,r+2));return n?(e.U=+n[0],r+n[0].length):-1}function lW(e,t,r){var n=Gn.exec(t.slice(r,r+2));return n?(e.V=+n[0],r+n[0].length):-1}function cW(e,t,r){var n=Gn.exec(t.slice(r,r+2));return n?(e.W=+n[0],r+n[0].length):-1}function I_(e,t,r){var n=Gn.exec(t.slice(r,r+4));return n?(e.y=+n[0],r+n[0].length):-1}function D_(e,t,r){var n=Gn.exec(t.slice(r,r+2));return n?(e.y=+n[0]+(+n[0]>68?1900:2e3),r+n[0].length):-1}function uW(e,t,r){var n=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(r,r+6));return n?(e.Z=n[1]?0:-(n[2]+(n[3]||"00")),r+n[0].length):-1}function dW(e,t,r){var n=Gn.exec(t.slice(r,r+1));return n?(e.q=n[0]*3-3,r+n[0].length):-1}function fW(e,t,r){var n=Gn.exec(t.slice(r,r+2));return n?(e.m=n[0]-1,r+n[0].length):-1}function R_(e,t,r){var n=Gn.exec(t.slice(r,r+2));return n?(e.d=+n[0],r+n[0].length):-1}function hW(e,t,r){var n=Gn.exec(t.slice(r,r+3));return n?(e.m=0,e.d=+n[0],r+n[0].length):-1}function $_(e,t,r){var n=Gn.exec(t.slice(r,r+2));return n?(e.H=+n[0],r+n[0].length):-1}function mW(e,t,r){var n=Gn.exec(t.slice(r,r+2));return n?(e.M=+n[0],r+n[0].length):-1}function pW(e,t,r){var n=Gn.exec(t.slice(r,r+2));return n?(e.S=+n[0],r+n[0].length):-1}function gW(e,t,r){var n=Gn.exec(t.slice(r,r+3));return n?(e.L=+n[0],r+n[0].length):-1}function yW(e,t,r){var n=Gn.exec(t.slice(r,r+6));return n?(e.L=Math.floor(n[0]/1e3),r+n[0].length):-1}function vW(e,t,r){var n=rW.exec(t.slice(r,r+1));return n?r+n[0].length:-1}function xW(e,t,r){var n=Gn.exec(t.slice(r));return n?(e.Q=+n[0],r+n[0].length):-1}function wW(e,t,r){var n=Gn.exec(t.slice(r));return n?(e.s=+n[0],r+n[0].length):-1}function M_(e,t){return Kt(e.getDate(),t,2)}function bW(e,t){return Kt(e.getHours(),t,2)}function jW(e,t){return Kt(e.getHours()%12||12,t,2)}function SW(e,t){return Kt(1+$d.count(Xa(e),e),t,3)}function VP(e,t){return Kt(e.getMilliseconds(),t,3)}function kW(e,t){return VP(e,t)+"000"}function NW(e,t){return Kt(e.getMonth()+1,t,2)}function _W(e,t){return Kt(e.getMinutes(),t,2)}function CW(e,t){return Kt(e.getSeconds(),t,2)}function EW(e){var t=e.getDay();return t===0?7:t}function AW(e,t){return Kt(Ym.count(Xa(e)-1,e),t,2)}function HP(e){var t=e.getDay();return t>=4||t===0?Mc(e):Mc.ceil(e)}function PW(e,t){return e=HP(e),Kt(Mc.count(Xa(e),e)+(Xa(e).getDay()===4),t,2)}function OW(e){return e.getDay()}function TW(e,t){return Kt(nm.count(Xa(e)-1,e),t,2)}function IW(e,t){return Kt(e.getFullYear()%100,t,2)}function DW(e,t){return e=HP(e),Kt(e.getFullYear()%100,t,2)}function RW(e,t){return Kt(e.getFullYear()%1e4,t,4)}function $W(e,t){var r=e.getDay();return e=r>=4||r===0?Mc(e):Mc.ceil(e),Kt(e.getFullYear()%1e4,t,4)}function MW(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+Kt(t/60|0,"0",2)+Kt(t%60,"0",2)}function F_(e,t){return Kt(e.getUTCDate(),t,2)}function FW(e,t){return Kt(e.getUTCHours(),t,2)}function LW(e,t){return Kt(e.getUTCHours()%12||12,t,2)}function zW(e,t){return Kt(1+Gm.count(Qa(e),e),t,3)}function KP(e,t){return Kt(e.getUTCMilliseconds(),t,3)}function UW(e,t){return KP(e,t)+"000"}function BW(e,t){return Kt(e.getUTCMonth()+1,t,2)}function WW(e,t){return Kt(e.getUTCMinutes(),t,2)}function qW(e,t){return Kt(e.getUTCSeconds(),t,2)}function VW(e){var t=e.getUTCDay();return t===0?7:t}function HW(e,t){return Kt(Jm.count(Qa(e)-1,e),t,2)}function GP(e){var t=e.getUTCDay();return t>=4||t===0?Fc(e):Fc.ceil(e)}function KW(e,t){return e=GP(e),Kt(Fc.count(Qa(e),e)+(Qa(e).getUTCDay()===4),t,2)}function GW(e){return e.getUTCDay()}function YW(e,t){return Kt(sm.count(Qa(e)-1,e),t,2)}function JW(e,t){return Kt(e.getUTCFullYear()%100,t,2)}function XW(e,t){return e=GP(e),Kt(e.getUTCFullYear()%100,t,2)}function QW(e,t){return Kt(e.getUTCFullYear()%1e4,t,4)}function ZW(e,t){var r=e.getUTCDay();return e=r>=4||r===0?Fc(e):Fc.ceil(e),Kt(e.getUTCFullYear()%1e4,t,4)}function eq(){return"+0000"}function L_(){return"%"}function z_(e){return+e}function U_(e){return Math.floor(+e/1e3)}var vc,YP,JP;tq({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function tq(e){return vc=tW(e),YP=vc.format,vc.parse,JP=vc.utcFormat,vc.utcParse,vc}function rq(e){return new Date(e)}function nq(e){return e instanceof Date?+e:+new Date(+e)}function xw(e,t,r,n,s,i,l,u,d,m){var f=iw(),p=f.invert,y=f.domain,x=m(".%L"),j=m(":%S"),b=m("%I:%M"),k=m("%I %p"),_=m("%a %d"),E=m("%b %d"),C=m("%B"),O=m("%Y");function T(A){return(d(A)<A?x:u(A)<A?j:l(A)<A?b:i(A)<A?k:n(A)<A?s(A)<A?_:E:r(A)<A?C:O)(A)}return f.invert=function(A){return new Date(p(A))},f.domain=function(A){return arguments.length?y(Array.from(A,nq)):y().map(rq)},f.ticks=function(A){var L=y();return e(L[0],L[L.length-1],A??10)},f.tickFormat=function(A,L){return L==null?T:m(L)},f.nice=function(A){var L=y();return(!A||typeof A.range!="function")&&(A=t(L[0],L[L.length-1],A??10)),A?y($P(L,A)):f},f.copy=function(){return Rd(f,xw(e,t,r,n,s,i,l,u,d,m))},f}function sq(){return Ei.apply(xw(Z9,eW,Xa,yw,Ym,$d,pw,hw,yl,YP).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function iq(){return Ei.apply(xw(X9,Q9,Qa,vw,Jm,Gm,gw,mw,yl,JP).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function Xm(){var e=0,t=1,r,n,s,i,l=ws,u=!1,d;function m(p){return p==null||isNaN(p=+p)?d:l(s===0?.5:(p=(i(p)-r)*s,u?Math.max(0,Math.min(1,p)):p))}m.domain=function(p){return arguments.length?([e,t]=p,r=i(e=+e),n=i(t=+t),s=r===n?0:1/(n-r),m):[e,t]},m.clamp=function(p){return arguments.length?(u=!!p,m):u},m.interpolator=function(p){return arguments.length?(l=p,m):l};function f(p){return function(y){var x,j;return arguments.length?([x,j]=y,l=p(x,j),m):[l(0),l(1)]}}return m.range=f(Zc),m.rangeRound=f(sw),m.unknown=function(p){return arguments.length?(d=p,m):d},function(p){return i=p,r=p(e),n=p(t),s=r===n?0:1/(n-r),m}}function Wo(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function XP(){var e=Bo(Xm()(ws));return e.copy=function(){return Wo(e,XP())},so.apply(e,arguments)}function QP(){var e=lw(Xm()).domain([1,10]);return e.copy=function(){return Wo(e,QP()).base(e.base())},so.apply(e,arguments)}function ZP(){var e=cw(Xm());return e.copy=function(){return Wo(e,ZP()).constant(e.constant())},so.apply(e,arguments)}function ww(){var e=uw(Xm());return e.copy=function(){return Wo(e,ww()).exponent(e.exponent())},so.apply(e,arguments)}function aq(){return ww.apply(null,arguments).exponent(.5)}function eO(){var e=[],t=ws;function r(n){if(n!=null&&!isNaN(n=+n))return t((Id(e,n,1)-1)/(e.length-1))}return r.domain=function(n){if(!arguments.length)return e.slice();e=[];for(let s of n)s!=null&&!isNaN(s=+s)&&e.push(s);return e.sort($o),r},r.interpolator=function(n){return arguments.length?(t=n,r):t},r.range=function(){return e.map((n,s)=>t(s/(e.length-1)))},r.quantiles=function(n){return Array.from({length:n+1},(s,i)=>V7(e,i/n))},r.copy=function(){return eO(t).domain(e)},so.apply(r,arguments)}function Qm(){var e=0,t=.5,r=1,n=1,s,i,l,u,d,m=ws,f,p=!1,y;function x(b){return isNaN(b=+b)?y:(b=.5+((b=+f(b))-i)*(n*b<n*i?u:d),m(p?Math.max(0,Math.min(1,b)):b))}x.domain=function(b){return arguments.length?([e,t,r]=b,s=f(e=+e),i=f(t=+t),l=f(r=+r),u=s===i?0:.5/(i-s),d=i===l?0:.5/(l-i),n=i<s?-1:1,x):[e,t,r]},x.clamp=function(b){return arguments.length?(p=!!b,x):p},x.interpolator=function(b){return arguments.length?(m=b,x):m};function j(b){return function(k){var _,E,C;return arguments.length?([_,E,C]=k,m=v9(b,[_,E,C]),x):[m(0),m(.5),m(1)]}}return x.range=j(Zc),x.rangeRound=j(sw),x.unknown=function(b){return arguments.length?(y=b,x):y},function(b){return f=b,s=b(e),i=b(t),l=b(r),u=s===i?0:.5/(i-s),d=i===l?0:.5/(l-i),n=i<s?-1:1,x}}function tO(){var e=Bo(Qm()(ws));return e.copy=function(){return Wo(e,tO())},so.apply(e,arguments)}function rO(){var e=lw(Qm()).domain([.1,1,10]);return e.copy=function(){return Wo(e,rO()).base(e.base())},so.apply(e,arguments)}function nO(){var e=cw(Qm());return e.copy=function(){return Wo(e,nO()).constant(e.constant())},so.apply(e,arguments)}function bw(){var e=uw(Qm());return e.copy=function(){return Wo(e,bw()).exponent(e.exponent())},so.apply(e,arguments)}function oq(){return bw.apply(null,arguments).exponent(.5)}const Ju=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:tw,scaleDiverging:tO,scaleDivergingLog:rO,scaleDivergingPow:bw,scaleDivergingSqrt:oq,scaleDivergingSymlog:nO,scaleIdentity:RP,scaleImplicit:L0,scaleLinear:DP,scaleLog:MP,scaleOrdinal:ew,scalePoint:G7,scalePow:dw,scaleQuantile:zP,scaleQuantize:UP,scaleRadial:LP,scaleSequential:XP,scaleSequentialLog:QP,scaleSequentialPow:ww,scaleSequentialQuantile:eO,scaleSequentialSqrt:aq,scaleSequentialSymlog:ZP,scaleSqrt:U9,scaleSymlog:FP,scaleThreshold:BP,scaleTime:sq,scaleUtc:iq,tickFormat:IP},Symbol.toStringTag,{value:"Module"}));var qo=e=>e.chartData,lq=xe([qo],e=>{var t=e.chartData!=null?e.chartData.length-1:0;return{chartData:e.chartData,computedData:e.computedData,dataEndIndex:t,dataStartIndex:0}}),jw=(e,t,r,n)=>n?lq(e):qo(e);function Al(e){if(Array.isArray(e)&&e.length===2){var[t,r]=e;if(tn(t)&&tn(r))return!0}return!1}function B_(e,t,r){return r?e:[Math.min(e[0],t[0]),Math.max(e[1],t[1])]}function sO(e,t){if(t&&typeof e!="function"&&Array.isArray(e)&&e.length===2){var[r,n]=e,s,i;if(tn(r))s=r;else if(typeof r=="function")return;if(tn(n))i=n;else if(typeof n=="function")return;var l=[s,i];if(Al(l))return l}}function cq(e,t,r){if(!(!r&&t==null)){if(typeof e=="function"&&t!=null)try{var n=e(t,r);if(Al(n))return B_(n,t,r)}catch{}if(Array.isArray(e)&&e.length===2){var[s,i]=e,l,u;if(s==="auto")t!=null&&(l=Math.min(...t));else if(mt(s))l=s;else if(typeof s=="function")try{t!=null&&(l=s(t==null?void 0:t[0]))}catch{}else if(typeof s=="string"&&SN.test(s)){var d=SN.exec(s);if(d==null||t==null)l=void 0;else{var m=+d[1];l=t[0]-m}}else l=t==null?void 0:t[0];if(i==="auto")t!=null&&(u=Math.max(...t));else if(mt(i))u=i;else if(typeof i=="function")try{t!=null&&(u=i(t==null?void 0:t[1]))}catch{}else if(typeof i=="string"&&kN.test(i)){var f=kN.exec(i);if(f==null||t==null)u=void 0;else{var p=+f[1];u=t[1]+p}}else u=t==null?void 0:t[1];var y=[l,u];if(Al(y))return t==null?y:B_(y,t,r)}}}var eu=1e9,uq={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},kw,Dr=!0,Ni="[DecimalError] ",Sl=Ni+"Invalid argument: ",Sw=Ni+"Exponent out of range: ",tu=Math.floor,ul=Math.pow,dq=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,ri,Wn=1e7,Sr=7,iO=9007199254740991,im=tu(iO/Sr),Je={};Je.absoluteValue=Je.abs=function(){var e=new this.constructor(this);return e.s&&(e.s=1),e};Je.comparedTo=Je.cmp=function(e){var t,r,n,s,i=this;if(e=new i.constructor(e),i.s!==e.s)return i.s||-e.s;if(i.e!==e.e)return i.e>e.e^i.s<0?1:-1;for(n=i.d.length,s=e.d.length,t=0,r=n<s?n:s;t<r;++t)if(i.d[t]!==e.d[t])return i.d[t]>e.d[t]^i.s<0?1:-1;return n===s?0:n>s^i.s<0?1:-1};Je.decimalPlaces=Je.dp=function(){var e=this,t=e.d.length-1,r=(t-e.e)*Sr;if(t=e.d[t],t)for(;t%10==0;t/=10)r--;return r<0?0:r};Je.dividedBy=Je.div=function(e){return qa(this,new this.constructor(e))};Je.dividedToIntegerBy=Je.idiv=function(e){var t=this,r=t.constructor;return ur(qa(t,new r(e),0,1),r.precision)};Je.equals=Je.eq=function(e){return!this.cmp(e)};Je.exponent=function(){return gn(this)};Je.greaterThan=Je.gt=function(e){return this.cmp(e)>0};Je.greaterThanOrEqualTo=Je.gte=function(e){return this.cmp(e)>=0};Je.isInteger=Je.isint=function(){return this.e>this.d.length-2};Je.isNegative=Je.isneg=function(){return this.s<0};Je.isPositive=Je.ispos=function(){return this.s>0};Je.isZero=function(){return this.s===0};Je.lessThan=Je.lt=function(e){return this.cmp(e)<0};Je.lessThanOrEqualTo=Je.lte=function(e){return this.cmp(e)<1};Je.logarithm=Je.log=function(e){var t,r=this,n=r.constructor,s=n.precision,i=s+5;if(e===void 0)e=new n(10);else if(e=new n(e),e.s<1||e.eq(ri))throw Error(Ni+"NaN");if(r.s<1)throw Error(Ni+(r.s?"NaN":"-Infinity"));return r.eq(ri)?new n(0):(Dr=!1,t=qa(xd(r,i),xd(e,i),i),Dr=!0,ur(t,s))};Je.minus=Je.sub=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?lO(t,e):aO(t,(e.s=-e.s,e))};Je.modulo=Je.mod=function(e){var t,r=this,n=r.constructor,s=n.precision;if(e=new n(e),!e.s)throw Error(Ni+"NaN");return r.s?(Dr=!1,t=qa(r,e,0,1).times(e),Dr=!0,r.minus(t)):ur(new n(r),s)};Je.naturalExponential=Je.exp=function(){return oO(this)};Je.naturalLogarithm=Je.ln=function(){return xd(this)};Je.negated=Je.neg=function(){var e=new this.constructor(this);return e.s=-e.s||0,e};Je.plus=Je.add=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?aO(t,e):lO(t,(e.s=-e.s,e))};Je.precision=Je.sd=function(e){var t,r,n,s=this;if(e!==void 0&&e!==!!e&&e!==1&&e!==0)throw Error(Sl+e);if(t=gn(s)+1,n=s.d.length-1,r=n*Sr+1,n=s.d[n],n){for(;n%10==0;n/=10)r--;for(n=s.d[0];n>=10;n/=10)r++}return e&&t>r?t:r};Je.squareRoot=Je.sqrt=function(){var e,t,r,n,s,i,l,u=this,d=u.constructor;if(u.s<1){if(!u.s)return new d(0);throw Error(Ni+"NaN")}for(e=gn(u),Dr=!1,s=Math.sqrt(+u),s==0||s==1/0?(t=ma(u.d),(t.length+e)%2==0&&(t+="0"),s=Math.sqrt(t),e=tu((e+1)/2)-(e<0||e%2),s==1/0?t="5e"+e:(t=s.toExponential(),t=t.slice(0,t.indexOf("e")+1)+e),n=new d(t)):n=new d(s.toString()),r=d.precision,s=l=r+3;;)if(i=n,n=i.plus(qa(u,i,l+2)).times(.5),ma(i.d).slice(0,l)===(t=ma(n.d)).slice(0,l)){if(t=t.slice(l-3,l+1),s==l&&t=="4999"){if(ur(i,r+1,0),i.times(i).eq(u)){n=i;break}}else if(t!="9999")break;l+=4}return Dr=!0,ur(n,r)};Je.times=Je.mul=function(e){var t,r,n,s,i,l,u,d,m,f=this,p=f.constructor,y=f.d,x=(e=new p(e)).d;if(!f.s||!e.s)return new p(0);for(e.s*=f.s,r=f.e+e.e,d=y.length,m=x.length,d<m&&(i=y,y=x,x=i,l=d,d=m,m=l),i=[],l=d+m,n=l;n--;)i.push(0);for(n=m;--n>=0;){for(t=0,s=d+n;s>n;)u=i[s]+x[n]*y[s-n-1]+t,i[s--]=u%Wn|0,t=u/Wn|0;i[s]=(i[s]+t)%Wn|0}for(;!i[--l];)i.pop();return t?++r:i.shift(),e.d=i,e.e=r,Dr?ur(e,p.precision):e};Je.toDecimalPlaces=Je.todp=function(e,t){var r=this,n=r.constructor;return r=new n(r),e===void 0?r:(xa(e,0,eu),t===void 0?t=n.rounding:xa(t,0,8),ur(r,e+gn(r)+1,t))};Je.toExponential=function(e,t){var r,n=this,s=n.constructor;return e===void 0?r=Pl(n,!0):(xa(e,0,eu),t===void 0?t=s.rounding:xa(t,0,8),n=ur(new s(n),e+1,t),r=Pl(n,!0,e+1)),r};Je.toFixed=function(e,t){var r,n,s=this,i=s.constructor;return e===void 0?Pl(s):(xa(e,0,eu),t===void 0?t=i.rounding:xa(t,0,8),n=ur(new i(s),e+gn(s)+1,t),r=Pl(n.abs(),!1,e+gn(n)+1),s.isneg()&&!s.isZero()?"-"+r:r)};Je.toInteger=Je.toint=function(){var e=this,t=e.constructor;return ur(new t(e),gn(e)+1,t.rounding)};Je.toNumber=function(){return+this};Je.toPower=Je.pow=function(e){var t,r,n,s,i,l,u=this,d=u.constructor,m=12,f=+(e=new d(e));if(!e.s)return new d(ri);if(u=new d(u),!u.s){if(e.s<1)throw Error(Ni+"Infinity");return u}if(u.eq(ri))return u;if(n=d.precision,e.eq(ri))return ur(u,n);if(t=e.e,r=e.d.length-1,l=t>=r,i=u.s,l){if((r=f<0?-f:f)<=iO){for(s=new d(ri),t=Math.ceil(n/Sr+4),Dr=!1;r%2&&(s=s.times(u),q_(s.d,t)),r=tu(r/2),r!==0;)u=u.times(u),q_(u.d,t);return Dr=!0,e.s<0?new d(ri).div(s):ur(s,n)}}else if(i<0)throw Error(Ni+"NaN");return i=i<0&&e.d[Math.max(t,r)]&1?-1:1,u.s=1,Dr=!1,s=e.times(xd(u,n+m)),Dr=!0,s=oO(s),s.s=i,s};Je.toPrecision=function(e,t){var r,n,s=this,i=s.constructor;return e===void 0?(r=gn(s),n=Pl(s,r<=i.toExpNeg||r>=i.toExpPos)):(xa(e,1,eu),t===void 0?t=i.rounding:xa(t,0,8),s=ur(new i(s),e,t),r=gn(s),n=Pl(s,e<=r||r<=i.toExpNeg,e)),n};Je.toSignificantDigits=Je.tosd=function(e,t){var r=this,n=r.constructor;return e===void 0?(e=n.precision,t=n.rounding):(xa(e,1,eu),t===void 0?t=n.rounding:xa(t,0,8)),ur(new n(r),e,t)};Je.toString=Je.valueOf=Je.val=Je.toJSON=Je[Symbol.for("nodejs.util.inspect.custom")]=function(){var e=this,t=gn(e),r=e.constructor;return Pl(e,t<=r.toExpNeg||t>=r.toExpPos)};function aO(e,t){var r,n,s,i,l,u,d,m,f=e.constructor,p=f.precision;if(!e.s||!t.s)return t.s||(t=new f(e)),Dr?ur(t,p):t;if(d=e.d,m=t.d,l=e.e,s=t.e,d=d.slice(),i=l-s,i){for(i<0?(n=d,i=-i,u=m.length):(n=m,s=l,u=d.length),l=Math.ceil(p/Sr),u=l>u?l+1:u+1,i>u&&(i=u,n.length=1),n.reverse();i--;)n.push(0);n.reverse()}for(u=d.length,i=m.length,u-i<0&&(i=u,n=m,m=d,d=n),r=0;i;)r=(d[--i]=d[i]+m[i]+r)/Wn|0,d[i]%=Wn;for(r&&(d.unshift(r),++s),u=d.length;d[--u]==0;)d.pop();return t.d=d,t.e=s,Dr?ur(t,p):t}function xa(e,t,r){if(e!==~~e||e<t||e>r)throw Error(Sl+e)}function ma(e){var t,r,n,s=e.length-1,i="",l=e[0];if(s>0){for(i+=l,t=1;t<s;t++)n=e[t]+"",r=Sr-n.length,r&&(i+=Po(r)),i+=n;l=e[t],n=l+"",r=Sr-n.length,r&&(i+=Po(r))}else if(l===0)return"0";for(;l%10===0;)l/=10;return i+l}var qa=(function(){function e(n,s){var i,l=0,u=n.length;for(n=n.slice();u--;)i=n[u]*s+l,n[u]=i%Wn|0,l=i/Wn|0;return l&&n.unshift(l),n}function t(n,s,i,l){var u,d;if(i!=l)d=i>l?1:-1;else for(u=d=0;u<i;u++)if(n[u]!=s[u]){d=n[u]>s[u]?1:-1;break}return d}function r(n,s,i){for(var l=0;i--;)n[i]-=l,l=n[i]<s[i]?1:0,n[i]=l*Wn+n[i]-s[i];for(;!n[0]&&n.length>1;)n.shift()}return function(n,s,i,l){var u,d,m,f,p,y,x,j,b,k,_,E,C,O,T,A,L,J,H=n.constructor,me=n.s==s.s?1:-1,Z=n.d,K=s.d;if(!n.s)return new H(n);if(!s.s)throw Error(Ni+"Division by zero");for(d=n.e-s.e,L=K.length,T=Z.length,x=new H(me),j=x.d=[],m=0;K[m]==(Z[m]||0);)++m;if(K[m]>(Z[m]||0)&&--d,i==null?E=i=H.precision:l?E=i+(gn(n)-gn(s))+1:E=i,E<0)return new H(0);if(E=E/Sr+2|0,m=0,L==1)for(f=0,K=K[0],E++;(m<T||f)&&E--;m++)C=f*Wn+(Z[m]||0),j[m]=C/K|0,f=C%K|0;else{for(f=Wn/(K[0]+1)|0,f>1&&(K=e(K,f),Z=e(Z,f),L=K.length,T=Z.length),O=L,b=Z.slice(0,L),k=b.length;k<L;)b[k++]=0;J=K.slice(),J.unshift(0),A=K[0],K[1]>=Wn/2&&++A;do f=0,u=t(K,b,L,k),u<0?(_=b[0],L!=k&&(_=_*Wn+(b[1]||0)),f=_/A|0,f>1?(f>=Wn&&(f=Wn-1),p=e(K,f),y=p.length,k=b.length,u=t(p,b,y,k),u==1&&(f--,r(p,L<y?J:K,y))):(f==0&&(u=f=1),p=K.slice()),y=p.length,y<k&&p.unshift(0),r(b,p,k),u==-1&&(k=b.length,u=t(K,b,L,k),u<1&&(f++,r(b,L<k?J:K,k))),k=b.length):u===0&&(f++,b=[0]),j[m++]=f,u&&b[0]?b[k++]=Z[O]||0:(b=[Z[O]],k=1);while((O++<T||b[0]!==void 0)&&E--)}return j[0]||j.shift(),x.e=d,ur(x,l?i+gn(x)+1:i)}})();function oO(e,t){var r,n,s,i,l,u,d=0,m=0,f=e.constructor,p=f.precision;if(gn(e)>16)throw Error(Sw+gn(e));if(!e.s)return new f(ri);for(Dr=!1,u=p,l=new f(.03125);e.abs().gte(.1);)e=e.times(l),m+=5;for(n=Math.log(ul(2,m))/Math.LN10*2+5|0,u+=n,r=s=i=new f(ri),f.precision=u;;){if(s=ur(s.times(e),u),r=r.times(++d),l=i.plus(qa(s,r,u)),ma(l.d).slice(0,u)===ma(i.d).slice(0,u)){for(;m--;)i=ur(i.times(i),u);return f.precision=p,t==null?(Dr=!0,ur(i,p)):i}i=l}}function gn(e){for(var t=e.e*Sr,r=e.d[0];r>=10;r/=10)t++;return t}function wv(e,t,r){if(t>e.LN10.sd())throw Dr=!0,r&&(e.precision=r),Error(Ni+"LN10 precision limit exceeded");return ur(new e(e.LN10),t)}function Po(e){for(var t="";e--;)t+="0";return t}function xd(e,t){var r,n,s,i,l,u,d,m,f,p=1,y=10,x=e,j=x.d,b=x.constructor,k=b.precision;if(x.s<1)throw Error(Ni+(x.s?"NaN":"-Infinity"));if(x.eq(ri))return new b(0);if(t==null?(Dr=!1,m=k):m=t,x.eq(10))return t==null&&(Dr=!0),wv(b,m);if(m+=y,b.precision=m,r=ma(j),n=r.charAt(0),i=gn(x),Math.abs(i)<15e14){for(;n<7&&n!=1||n==1&&r.charAt(1)>3;)x=x.times(e),r=ma(x.d),n=r.charAt(0),p++;i=gn(x),n>1?(x=new b("0."+r),i++):x=new b(n+"."+r.slice(1))}else return d=wv(b,m+2,k).times(i+""),x=xd(new b(n+"."+r.slice(1)),m-y).plus(d),b.precision=k,t==null?(Dr=!0,ur(x,k)):x;for(u=l=x=qa(x.minus(ri),x.plus(ri),m),f=ur(x.times(x),m),s=3;;){if(l=ur(l.times(f),m),d=u.plus(qa(l,new b(s),m)),ma(d.d).slice(0,m)===ma(u.d).slice(0,m))return u=u.times(2),i!==0&&(u=u.plus(wv(b,m+2,k).times(i+""))),u=qa(u,new b(p),m),b.precision=k,t==null?(Dr=!0,ur(u,k)):u;u=d,s+=2}}function W_(e,t){var r,n,s;for((r=t.indexOf("."))>-1&&(t=t.replace(".","")),(n=t.search(/e/i))>0?(r<0&&(r=n),r+=+t.slice(n+1),t=t.substring(0,n)):r<0&&(r=t.length),n=0;t.charCodeAt(n)===48;)++n;for(s=t.length;t.charCodeAt(s-1)===48;)--s;if(t=t.slice(n,s),t){if(s-=n,r=r-n-1,e.e=tu(r/Sr),e.d=[],n=(r+1)%Sr,r<0&&(n+=Sr),n<s){for(n&&e.d.push(+t.slice(0,n)),s-=Sr;n<s;)e.d.push(+t.slice(n,n+=Sr));t=t.slice(n),n=Sr-t.length}else n-=s;for(;n--;)t+="0";if(e.d.push(+t),Dr&&(e.e>im||e.e<-im))throw Error(Sw+r)}else e.s=0,e.e=0,e.d=[0];return e}function ur(e,t,r){var n,s,i,l,u,d,m,f,p=e.d;for(l=1,i=p[0];i>=10;i/=10)l++;if(n=t-l,n<0)n+=Sr,s=t,m=p[f=0];else{if(f=Math.ceil((n+1)/Sr),i=p.length,f>=i)return e;for(m=i=p[f],l=1;i>=10;i/=10)l++;n%=Sr,s=n-Sr+l}if(r!==void 0&&(i=ul(10,l-s-1),u=m/i%10|0,d=t<0||p[f+1]!==void 0||m%i,d=r<4?(u||d)&&(r==0||r==(e.s<0?3:2)):u>5||u==5&&(r==4||d||r==6&&(n>0?s>0?m/ul(10,l-s):0:p[f-1])%10&1||r==(e.s<0?8:7))),t<1||!p[0])return d?(i=gn(e),p.length=1,t=t-i-1,p[0]=ul(10,(Sr-t%Sr)%Sr),e.e=tu(-t/Sr)||0):(p.length=1,p[0]=e.e=e.s=0),e;if(n==0?(p.length=f,i=1,f--):(p.length=f+1,i=ul(10,Sr-n),p[f]=s>0?(m/ul(10,l-s)%ul(10,s)|0)*i:0),d)for(;;)if(f==0){(p[0]+=i)==Wn&&(p[0]=1,++e.e);break}else{if(p[f]+=i,p[f]!=Wn)break;p[f--]=0,i=1}for(n=p.length;p[--n]===0;)p.pop();if(Dr&&(e.e>im||e.e<-im))throw Error(Sw+gn(e));return e}function lO(e,t){var r,n,s,i,l,u,d,m,f,p,y=e.constructor,x=y.precision;if(!e.s||!t.s)return t.s?t.s=-t.s:t=new y(e),Dr?ur(t,x):t;if(d=e.d,p=t.d,n=t.e,m=e.e,d=d.slice(),l=m-n,l){for(f=l<0,f?(r=d,l=-l,u=p.length):(r=p,n=m,u=d.length),s=Math.max(Math.ceil(x/Sr),u)+2,l>s&&(l=s,r.length=1),r.reverse(),s=l;s--;)r.push(0);r.reverse()}else{for(s=d.length,u=p.length,f=s<u,f&&(u=s),s=0;s<u;s++)if(d[s]!=p[s]){f=d[s]<p[s];break}l=0}for(f&&(r=d,d=p,p=r,t.s=-t.s),u=d.length,s=p.length-u;s>0;--s)d[u++]=0;for(s=p.length;s>l;){if(d[--s]<p[s]){for(i=s;i&&d[--i]===0;)d[i]=Wn-1;--d[i],d[s]+=Wn}d[s]-=p[s]}for(;d[--u]===0;)d.pop();for(;d[0]===0;d.shift())--n;return d[0]?(t.d=d,t.e=n,Dr?ur(t,x):t):new y(0)}function Pl(e,t,r){var n,s=gn(e),i=ma(e.d),l=i.length;return t?(r&&(n=r-l)>0?i=i.charAt(0)+"."+i.slice(1)+Po(n):l>1&&(i=i.charAt(0)+"."+i.slice(1)),i=i+(s<0?"e":"e+")+s):s<0?(i="0."+Po(-s-1)+i,r&&(n=r-l)>0&&(i+=Po(n))):s>=l?(i+=Po(s+1-l),r&&(n=r-s-1)>0&&(i=i+"."+Po(n))):((n=s+1)<l&&(i=i.slice(0,n)+"."+i.slice(n)),r&&(n=r-l)>0&&(s+1===l&&(i+="."),i+=Po(n))),e.s<0?"-"+i:i}function q_(e,t){if(e.length>t)return e.length=t,!0}function cO(e){var t,r,n;function s(i){var l=this;if(!(l instanceof s))return new s(i);if(l.constructor=s,i instanceof s){l.s=i.s,l.e=i.e,l.d=(i=i.d)?i.slice():i;return}if(typeof i=="number"){if(i*0!==0)throw Error(Sl+i);if(i>0)l.s=1;else if(i<0)i=-i,l.s=-1;else{l.s=0,l.e=0,l.d=[0];return}if(i===~~i&&i<1e7){l.e=0,l.d=[i];return}return W_(l,i.toString())}else if(typeof i!="string")throw Error(Sl+i);if(i.charCodeAt(0)===45?(i=i.slice(1),l.s=-1):l.s=1,dq.test(i))W_(l,i);else throw Error(Sl+i)}if(s.prototype=Je,s.ROUND_UP=0,s.ROUND_DOWN=1,s.ROUND_CEIL=2,s.ROUND_FLOOR=3,s.ROUND_HALF_UP=4,s.ROUND_HALF_DOWN=5,s.ROUND_HALF_EVEN=6,s.ROUND_HALF_CEIL=7,s.ROUND_HALF_FLOOR=8,s.clone=cO,s.config=s.set=fq,e===void 0&&(e={}),e)for(n=["precision","rounding","toExpNeg","toExpPos","LN10"],t=0;t<n.length;)e.hasOwnProperty(r=n[t++])||(e[r]=this[r]);return s.config(e),s}function fq(e){if(!e||typeof e!="object")throw Error(Ni+"Object expected");var t,r,n,s=["precision",1,eu,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(t=0;t<s.length;t+=3)if((n=e[r=s[t]])!==void 0)if(tu(n)===n&&n>=s[t+1]&&n<=s[t+2])this[r]=n;else throw Error(Sl+r+": "+n);if((n=e[r="LN10"])!==void 0)if(n==Math.LN10)this[r]=new this(n);else throw Error(Sl+r+": "+n);return this}var kw=cO(uq);ri=new kw(1);const Zt=kw;var hq=e=>e,uO={},dO=e=>e===uO,V_=e=>function t(){return arguments.length===0||arguments.length===1&&dO(arguments.length<=0?void 0:arguments[0])?t:e(...arguments)},fO=(e,t)=>e===1?t:V_(function(){for(var r=arguments.length,n=new Array(r),s=0;s<r;s++)n[s]=arguments[s];var i=n.filter(l=>l!==uO).length;return i>=e?t(...n):fO(e-i,V_(function(){for(var l=arguments.length,u=new Array(l),d=0;d<l;d++)u[d]=arguments[d];var m=n.map(f=>dO(f)?u.shift():f);return t(...m,...u)}))}),Zm=e=>fO(e.length,e),W0=(e,t)=>{for(var r=[],n=e;n<t;++n)r[n-e]=n;return r},mq=Zm((e,t)=>Array.isArray(t)?t.map(e):Object.keys(t).map(r=>t[r]).map(e)),pq=function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];if(!r.length)return hq;var s=r.reverse(),i=s[0],l=s.slice(1);return function(){return l.reduce((u,d)=>d(u),i(...arguments))}},q0=e=>Array.isArray(e)?e.reverse():e.split("").reverse().join(""),hO=e=>{var t=null,r=null;return function(){for(var n=arguments.length,s=new Array(n),i=0;i<n;i++)s[i]=arguments[i];return t&&s.every((l,u)=>{var d;return l===((d=t)===null||d===void 0?void 0:d[u])})||(t=s,r=e(...s)),r}};function mO(e){var t;return e===0?t=1:t=Math.floor(new Zt(e).abs().log(10).toNumber())+1,t}function pO(e,t,r){for(var n=new Zt(e),s=0,i=[];n.lt(t)&&s<1e5;)i.push(n.toNumber()),n=n.add(r),s++;return i}Zm((e,t,r)=>{var n=+e,s=+t;return n+r*(s-n)});Zm((e,t,r)=>{var n=t-+e;return n=n||1/0,(r-e)/n});Zm((e,t,r)=>{var n=t-+e;return n=n||1/0,Math.max(0,Math.min(1,(r-e)/n))});var gO=e=>{var[t,r]=e,[n,s]=[t,r];return t>r&&([n,s]=[r,t]),[n,s]},yO=(e,t,r)=>{if(e.lte(0))return new Zt(0);var n=mO(e.toNumber()),s=new Zt(10).pow(n),i=e.div(s),l=n!==1?.05:.1,u=new Zt(Math.ceil(i.div(l).toNumber())).add(r).mul(l),d=u.mul(s);return t?new Zt(d.toNumber()):new Zt(Math.ceil(d.toNumber()))},gq=(e,t,r)=>{var n=new Zt(1),s=new Zt(e);if(!s.isint()&&r){var i=Math.abs(e);i<1?(n=new Zt(10).pow(mO(e)-1),s=new Zt(Math.floor(s.div(n).toNumber())).mul(n)):i>1&&(s=new Zt(Math.floor(e)))}else e===0?s=new Zt(Math.floor((t-1)/2)):r||(s=new Zt(Math.floor(e)));var l=Math.floor((t-1)/2),u=pq(mq(d=>s.add(new Zt(d-l).mul(n)).toNumber()),W0);return u(0,t)},vO=function(t,r,n,s){var i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((r-t)/(n-1)))return{step:new Zt(0),tickMin:new Zt(0),tickMax:new Zt(0)};var l=yO(new Zt(r).sub(t).div(n-1),s,i),u;t<=0&&r>=0?u=new Zt(0):(u=new Zt(t).add(r).div(2),u=u.sub(new Zt(u).mod(l)));var d=Math.ceil(u.sub(t).div(l).toNumber()),m=Math.ceil(new Zt(r).sub(u).div(l).toNumber()),f=d+m+1;return f>n?vO(t,r,n,s,i+1):(f<n&&(m=r>0?m+(n-f):m,d=r>0?d:d+(n-f)),{step:l,tickMin:u.sub(new Zt(d).mul(l)),tickMax:u.add(new Zt(m).mul(l))})};function yq(e){var[t,r]=e,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,i=Math.max(n,2),[l,u]=gO([t,r]);if(l===-1/0||u===1/0){var d=u===1/0?[l,...W0(0,n-1).map(()=>1/0)]:[...W0(0,n-1).map(()=>-1/0),u];return t>r?q0(d):d}if(l===u)return gq(l,n,s);var{step:m,tickMin:f,tickMax:p}=vO(l,u,i,s,0),y=pO(f,p.add(new Zt(.1).mul(m)),m);return t>r?q0(y):y}function vq(e,t){var[r,n]=e,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,[i,l]=gO([r,n]);if(i===-1/0||l===1/0)return[r,n];if(i===l)return[i];var u=Math.max(t,2),d=yO(new Zt(l).sub(i).div(u-1),s,0),m=[...pO(new Zt(i),new Zt(l),d),l];return s===!1&&(m=m.map(f=>Math.round(f))),r>n?q0(m):m}var xq=hO(yq),wq=hO(vq),xO=e=>e.rootProps.maxBarSize,bq=e=>e.rootProps.barGap,wO=e=>e.rootProps.barCategoryGap,jq=e=>e.rootProps.barSize,ep=e=>e.rootProps.stackOffset,Nw=e=>e.options.chartName,_w=e=>e.rootProps.syncId,bO=e=>e.rootProps.syncMethod,Cw=e=>e.options.eventEmitter,Ls={grid:-100,barBackground:-50,area:100,cursorRectangle:200,bar:300,line:400,axis:500,scatter:600,activeBar:1e3,cursorLine:1100,activeDot:1200,label:2e3},Ma={allowDuplicatedCategory:!0,angleAxisId:0,reversed:!1,scale:"auto",tick:!0,type:"category"},Zs={allowDataOverflow:!1,allowDuplicatedCategory:!0,radiusAxisId:0,scale:"auto",tick:!0,tickCount:5,type:"number"},tp=(e,t)=>{if(!(!e||!t))return e!=null&&e.reversed?[t[1],t[0]]:t},Sq={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:!1,dataKey:void 0,domain:void 0,id:Ma.angleAxisId,includeHidden:!1,name:void 0,reversed:Ma.reversed,scale:Ma.scale,tick:Ma.tick,tickCount:void 0,ticks:void 0,type:Ma.type,unit:void 0},kq={allowDataOverflow:Zs.allowDataOverflow,allowDecimals:!1,allowDuplicatedCategory:Zs.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:Zs.radiusAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:Zs.scale,tick:Zs.tick,tickCount:Zs.tickCount,ticks:void 0,type:Zs.type,unit:void 0},Nq={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:Ma.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:Ma.angleAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:Ma.scale,tick:Ma.tick,tickCount:void 0,ticks:void 0,type:"number",unit:void 0},_q={allowDataOverflow:Zs.allowDataOverflow,allowDecimals:!1,allowDuplicatedCategory:Zs.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:Zs.radiusAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:Zs.scale,tick:Zs.tick,tickCount:Zs.tickCount,ticks:void 0,type:"category",unit:void 0},Ew=(e,t)=>e.polarAxis.angleAxis[t]!=null?e.polarAxis.angleAxis[t]:e.layout.layoutType==="radial"?Nq:Sq,Aw=(e,t)=>e.polarAxis.radiusAxis[t]!=null?e.polarAxis.radiusAxis[t]:e.layout.layoutType==="radial"?_q:kq,rp=e=>e.polarOptions,Pw=xe([ro,no,Kn],x7),jO=xe([rp,Pw],(e,t)=>{if(e!=null)return Qi(e.innerRadius,t,0)}),SO=xe([rp,Pw],(e,t)=>{if(e!=null)return Qi(e.outerRadius,t,t*.8)}),Cq=e=>{if(e==null)return[0,0];var{startAngle:t,endAngle:r}=e;return[t,r]},kO=xe([rp],Cq);xe([Ew,kO],tp);var NO=xe([Pw,jO,SO],(e,t,r)=>{if(!(e==null||t==null||r==null))return[t,r]});xe([Aw,NO],tp);var _O=xe([er,rp,jO,SO,ro,no],(e,t,r,n,s,i)=>{if(!(e!=="centric"&&e!=="radial"||t==null||r==null||n==null)){var{cx:l,cy:u,startAngle:d,endAngle:m}=t;return{cx:Qi(l,s,s/2),cy:Qi(u,i,i/2),innerRadius:r,outerRadius:n,startAngle:d,endAngle:m,clockWise:!1}}}),On=(e,t)=>t,np=(e,t,r)=>r;function Ow(e){return e==null?void 0:e.id}function CO(e,t,r){var{chartData:n=[]}=t,{allowDuplicatedCategory:s,dataKey:i}=r,l=new Map;return e.forEach(u=>{var d,m=(d=u.data)!==null&&d!==void 0?d:n;if(!(m==null||m.length===0)){var f=Ow(u);m.forEach((p,y)=>{var x=i==null||s?y:String(bs(p,i,null)),j=bs(p,u.dataKey,0),b;l.has(x)?b=l.get(x):b={},Object.assign(b,{[f]:j}),l.set(x,b)})}}),Array.from(l.values())}function sp(e){return e.stackId!=null&&e.dataKey!=null}var ip=(e,t)=>e===t?!0:e==null||t==null?!1:e[0]===t[0]&&e[1]===t[1];function ap(e,t){return Array.isArray(e)&&Array.isArray(t)&&e.length===0&&t.length===0?!0:e===t}function Eq(e,t){if(e.length===t.length){for(var r=0;r<e.length;r++)if(e[r]!==t[r])return!1;return!0}return!1}var Tn=e=>{var t=er(e);return t==="horizontal"?"xAxis":t==="vertical"?"yAxis":t==="centric"?"angleAxis":"radiusAxis"},ru=e=>e.tooltip.settings.axisId;function H_(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function am(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?H_(Object(r),!0).forEach(function(n){Aq(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):H_(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Aq(e,t,r){return(t=Pq(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Pq(e){var t=Oq(e,"string");return typeof t=="symbol"?t:t+""}function Oq(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var V0=[0,"auto"],Js={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:void 0,height:30,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"bottom",padding:{left:0,right:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"category",unit:void 0},EO=(e,t)=>e.cartesianAxis.xAxis[t],io=(e,t)=>{var r=EO(e,t);return r??Js},Xs={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:V0,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"left",padding:{top:0,bottom:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"number",unit:void 0,width:Td},AO=(e,t)=>e.cartesianAxis.yAxis[t],ao=(e,t)=>{var r=AO(e,t);return r??Xs},Tq={domain:[0,"auto"],includeHidden:!1,reversed:!1,allowDataOverflow:!1,allowDuplicatedCategory:!1,dataKey:void 0,id:0,name:"",range:[64,64],scale:"auto",type:"number",unit:""},Tw=(e,t)=>{var r=e.cartesianAxis.zAxis[t];return r??Tq},js=(e,t,r)=>{switch(t){case"xAxis":return io(e,r);case"yAxis":return ao(e,r);case"zAxis":return Tw(e,r);case"angleAxis":return Ew(e,r);case"radiusAxis":return Aw(e,r);default:throw new Error("Unexpected axis type: ".concat(t))}},Iq=(e,t,r)=>{switch(t){case"xAxis":return io(e,r);case"yAxis":return ao(e,r);default:throw new Error("Unexpected axis type: ".concat(t))}},Md=(e,t,r)=>{switch(t){case"xAxis":return io(e,r);case"yAxis":return ao(e,r);case"angleAxis":return Ew(e,r);case"radiusAxis":return Aw(e,r);default:throw new Error("Unexpected axis type: ".concat(t))}},PO=e=>e.graphicalItems.cartesianItems.some(t=>t.type==="bar")||e.graphicalItems.polarItems.some(t=>t.type==="radialBar");function OO(e,t){return r=>{switch(e){case"xAxis":return"xAxisId"in r&&r.xAxisId===t;case"yAxis":return"yAxisId"in r&&r.yAxisId===t;case"zAxis":return"zAxisId"in r&&r.zAxisId===t;case"angleAxis":return"angleAxisId"in r&&r.angleAxisId===t;case"radiusAxis":return"radiusAxisId"in r&&r.radiusAxisId===t;default:return!1}}}var Iw=e=>e.graphicalItems.cartesianItems,Dq=xe([On,np],OO),TO=(e,t,r)=>e.filter(r).filter(n=>(t==null?void 0:t.includeHidden)===!0?!0:!n.hide),Fd=xe([Iw,js,Dq],TO,{memoizeOptions:{resultEqualityCheck:ap}}),IO=xe([Fd],e=>e.filter(t=>t.type==="area"||t.type==="bar").filter(sp)),DO=e=>e.filter(t=>!("stackId"in t)||t.stackId===void 0),Rq=xe([Fd],DO),RO=e=>e.map(t=>t.data).filter(Boolean).flat(1),$q=xe([Fd],RO,{memoizeOptions:{resultEqualityCheck:ap}}),$O=(e,t)=>{var{chartData:r=[],dataStartIndex:n,dataEndIndex:s}=t;return e.length>0?e:r.slice(n,s+1)},Dw=xe([$q,jw],$O),MO=(e,t,r)=>(t==null?void 0:t.dataKey)!=null?e.map(n=>({value:bs(n,t.dataKey)})):r.length>0?r.map(n=>n.dataKey).flatMap(n=>e.map(s=>({value:bs(s,n)}))):e.map(n=>({value:n})),op=xe([Dw,js,Fd],MO);function FO(e,t){switch(e){case"xAxis":return t.direction==="x";case"yAxis":return t.direction==="y";default:return!1}}function ph(e){if(va(e)||e instanceof Date){var t=Number(e);if(tn(t))return t}}function K_(e){if(Array.isArray(e)){var t=[ph(e[0]),ph(e[1])];return Al(t)?t:void 0}var r=ph(e);if(r!=null)return[r,r]}function Za(e){return e.map(ph).filter(nz)}function Mq(e,t,r){return!r||typeof t!="number"||ya(t)?[]:r.length?Za(r.flatMap(n=>{var s=bs(e,n.dataKey),i,l;if(Array.isArray(s)?[i,l]=s:i=l=s,!(!tn(i)||!tn(l)))return[t-i,t+l]})):[]}var In=e=>{var t=Tn(e),r=ru(e);return Md(e,t,r)},LO=xe([In],e=>e==null?void 0:e.dataKey),Fq=xe([IO,jw,In],CO),zO=(e,t,r)=>{var n={},s=t.reduce((i,l)=>(l.stackId==null||(i[l.stackId]==null&&(i[l.stackId]=[]),i[l.stackId].push(l)),i),n);return Object.fromEntries(Object.entries(s).map(i=>{var[l,u]=i,d=u.map(Ow);return[l,{stackedData:xU(e,d,r),graphicalItems:u}]}))},H0=xe([Fq,IO,ep],zO),UO=(e,t,r,n)=>{var{dataStartIndex:s,dataEndIndex:i}=t;if(n==null&&r!=="zAxis"){var l=kU(e,s,i);if(!(l!=null&&l[0]===0&&l[1]===0))return l}},Lq=xe([js],e=>e.allowDataOverflow),Rw=e=>{var t;if(e==null||!("domain"in e))return V0;if(e.domain!=null)return e.domain;if(e.ticks!=null){if(e.type==="number"){var r=Za(e.ticks);return[Math.min(...r),Math.max(...r)]}if(e.type==="category")return e.ticks.map(String)}return(t=e==null?void 0:e.domain)!==null&&t!==void 0?t:V0},BO=xe([js],Rw),WO=xe([BO,Lq],sO),zq=xe([H0,qo,On,WO],UO,{memoizeOptions:{resultEqualityCheck:ip}}),$w=e=>e.errorBars,Uq=(e,t,r)=>e.flatMap(n=>t[n.id]).filter(Boolean).filter(n=>FO(r,n)),om=function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];var s=r.filter(Boolean);if(s.length!==0){var i=s.flat(),l=Math.min(...i),u=Math.max(...i);return[l,u]}},qO=(e,t,r,n,s)=>{var i,l;if(r.length>0&&e.forEach(u=>{r.forEach(d=>{var m,f,p=(m=n[d.id])===null||m===void 0?void 0:m.filter(_=>FO(s,_)),y=bs(u,(f=t.dataKey)!==null&&f!==void 0?f:d.dataKey),x=Mq(u,y,p);if(x.length>=2){var j=Math.min(...x),b=Math.max(...x);(i==null||j<i)&&(i=j),(l==null||b>l)&&(l=b)}var k=K_(y);k!=null&&(i=i==null?k[0]:Math.min(i,k[0]),l=l==null?k[1]:Math.max(l,k[1]))})}),(t==null?void 0:t.dataKey)!=null&&e.forEach(u=>{var d=K_(bs(u,t.dataKey));d!=null&&(i=i==null?d[0]:Math.min(i,d[0]),l=l==null?d[1]:Math.max(l,d[1]))}),tn(i)&&tn(l))return[i,l]},Bq=xe([Dw,js,Rq,$w,On],qO,{memoizeOptions:{resultEqualityCheck:ip}});function Wq(e){var{value:t}=e;if(va(t)||t instanceof Date)return t}var qq=(e,t,r)=>{var n=e.map(Wq).filter(s=>s!=null);return r&&(t.dataKey==null||t.allowDuplicatedCategory&&gA(n))?SP(0,e.length):t.allowDuplicatedCategory?n:Array.from(new Set(n))},VO=e=>e.referenceElements.dots,nu=(e,t,r)=>e.filter(n=>n.ifOverflow==="extendDomain").filter(n=>t==="xAxis"?n.xAxisId===r:n.yAxisId===r),Vq=xe([VO,On,np],nu),HO=e=>e.referenceElements.areas,Hq=xe([HO,On,np],nu),KO=e=>e.referenceElements.lines,Kq=xe([KO,On,np],nu),GO=(e,t)=>{var r=Za(e.map(n=>t==="xAxis"?n.x:n.y));if(r.length!==0)return[Math.min(...r),Math.max(...r)]},Gq=xe(Vq,On,GO),YO=(e,t)=>{var r=Za(e.flatMap(n=>[t==="xAxis"?n.x1:n.y1,t==="xAxis"?n.x2:n.y2]));if(r.length!==0)return[Math.min(...r),Math.max(...r)]},Yq=xe([Hq,On],YO);function Jq(e){var t;if(e.x!=null)return Za([e.x]);var r=(t=e.segment)===null||t===void 0?void 0:t.map(n=>n.x);return r==null||r.length===0?[]:Za(r)}function Xq(e){var t;if(e.y!=null)return Za([e.y]);var r=(t=e.segment)===null||t===void 0?void 0:t.map(n=>n.y);return r==null||r.length===0?[]:Za(r)}var JO=(e,t)=>{var r=e.flatMap(n=>t==="xAxis"?Jq(n):Xq(n));if(r.length!==0)return[Math.min(...r),Math.max(...r)]},Qq=xe([Kq,On],JO),Zq=xe(Gq,Qq,Yq,(e,t,r)=>om(e,r,t)),XO=(e,t,r,n,s,i,l,u)=>{if(r!=null)return r;var d=l==="vertical"&&u==="xAxis"||l==="horizontal"&&u==="yAxis",m=d?om(n,i,s):om(i,s);return cq(t,m,e.allowDataOverflow)},eV=xe([js,BO,WO,zq,Bq,Zq,er,On],XO,{memoizeOptions:{resultEqualityCheck:ip}}),tV=[0,1],QO=(e,t,r,n,s,i,l)=>{if(!((e==null||r==null||r.length===0)&&l===void 0)){var{dataKey:u,type:d}=e,m=Rl(t,i);if(m&&u==null){var f;return SP(0,(f=r==null?void 0:r.length)!==null&&f!==void 0?f:0)}return d==="category"?qq(n,e,m):s==="expand"?tV:l}},Mw=xe([js,er,Dw,op,ep,On,eV],QO),ZO=(e,t,r,n,s)=>{if(e!=null){var{scale:i,type:l}=e;if(i==="auto")return t==="radial"&&s==="radiusAxis"?"band":t==="radial"&&s==="angleAxis"?"linear":l==="category"&&n&&(n.indexOf("LineChart")>=0||n.indexOf("AreaChart")>=0||n.indexOf("ComposedChart")>=0&&!r)?"point":l==="category"?"band":"linear";if(typeof i=="string"){var u="scale".concat(Ad(i));return u in Ju?u:"point"}}},Ld=xe([js,er,PO,Nw,On],ZO);function rV(e){if(e!=null){if(e in Ju)return Ju[e]();var t="scale".concat(Ad(e));if(t in Ju)return Ju[t]()}}function Fw(e,t,r,n){if(!(r==null||n==null)){if(typeof e.scale=="function")return e.scale.copy().domain(r).range(n);var s=rV(t);if(s!=null){var i=s.domain(r).range(n);return mU(i),i}}}var e4=(e,t,r)=>{var n=Rw(t);if(!(r!=="auto"&&r!=="linear")){if(t!=null&&t.tickCount&&Array.isArray(n)&&(n[0]==="auto"||n[1]==="auto")&&Al(e))return xq(e,t.tickCount,t.allowDecimals);if(t!=null&&t.tickCount&&t.type==="number"&&Al(e))return wq(e,t.tickCount,t.allowDecimals)}},Lw=xe([Mw,Md,Ld],e4),t4=(e,t,r,n)=>{if(n!=="angleAxis"&&(e==null?void 0:e.type)==="number"&&Al(t)&&Array.isArray(r)&&r.length>0){var s=t[0],i=r[0],l=t[1],u=r[r.length-1];return[Math.min(s,i),Math.max(l,u)]}return t},nV=xe([js,Mw,Lw,On],t4),sV=xe(op,js,(e,t)=>{if(!(!t||t.type!=="number")){var r=1/0,n=Array.from(Za(e.map(u=>u.value))).sort((u,d)=>u-d);if(n.length<2)return 1/0;var s=n[n.length-1]-n[0];if(s===0)return 1/0;for(var i=0;i<n.length-1;i++){var l=n[i+1]-n[i];r=Math.min(r,l)}return r/s}}),r4=xe(sV,er,wO,Kn,(e,t,r,n)=>n,(e,t,r,n,s)=>{if(!tn(e))return 0;var i=t==="vertical"?n.height:n.width;if(s==="gap")return e*i/2;if(s==="no-gap"){var l=Qi(r,e*i),u=e*i/2;return u-l-(u-l)/i*l}return 0}),iV=(e,t)=>{var r=io(e,t);return r==null||typeof r.padding!="string"?0:r4(e,"xAxis",t,r.padding)},aV=(e,t)=>{var r=ao(e,t);return r==null||typeof r.padding!="string"?0:r4(e,"yAxis",t,r.padding)},oV=xe(io,iV,(e,t)=>{var r,n;if(e==null)return{left:0,right:0};var{padding:s}=e;return typeof s=="string"?{left:t,right:t}:{left:((r=s.left)!==null&&r!==void 0?r:0)+t,right:((n=s.right)!==null&&n!==void 0?n:0)+t}}),lV=xe(ao,aV,(e,t)=>{var r,n;if(e==null)return{top:0,bottom:0};var{padding:s}=e;return typeof s=="string"?{top:t,bottom:t}:{top:((r=s.top)!==null&&r!==void 0?r:0)+t,bottom:((n=s.bottom)!==null&&n!==void 0?n:0)+t}}),cV=xe([Kn,oV,Wm,Bm,(e,t,r)=>r],(e,t,r,n,s)=>{var{padding:i}=n;return s?[i.left,r.width-i.right]:[e.left+t.left,e.left+e.width-t.right]}),uV=xe([Kn,er,lV,Wm,Bm,(e,t,r)=>r],(e,t,r,n,s,i)=>{var{padding:l}=s;return i?[n.height-l.bottom,l.top]:t==="horizontal"?[e.top+e.height-r.bottom,e.top+r.top]:[e.top+r.top,e.top+e.height-r.bottom]}),zd=(e,t,r,n)=>{var s;switch(t){case"xAxis":return cV(e,r,n);case"yAxis":return uV(e,r,n);case"zAxis":return(s=Tw(e,r))===null||s===void 0?void 0:s.range;case"angleAxis":return kO(e);case"radiusAxis":return NO(e,r);default:return}},n4=xe([js,zd],tp),su=xe([js,Ld,nV,n4],Fw);xe([Fd,$w,On],Uq);function s4(e,t){return e.id<t.id?-1:e.id>t.id?1:0}var lp=(e,t)=>t,cp=(e,t,r)=>r,dV=xe(zm,lp,cp,(e,t,r)=>e.filter(n=>n.orientation===t).filter(n=>n.mirror===r).sort(s4)),fV=xe(Um,lp,cp,(e,t,r)=>e.filter(n=>n.orientation===t).filter(n=>n.mirror===r).sort(s4)),i4=(e,t)=>({width:e.width,height:t.height}),hV=(e,t)=>{var r=typeof t.width=="number"?t.width:Td;return{width:r,height:e.height}},a4=xe(Kn,io,i4),mV=(e,t,r)=>{switch(t){case"top":return e.top;case"bottom":return r-e.bottom;default:return 0}},pV=(e,t,r)=>{switch(t){case"left":return e.left;case"right":return r-e.right;default:return 0}},gV=xe(no,Kn,dV,lp,cp,(e,t,r,n,s)=>{var i={},l;return r.forEach(u=>{var d=i4(t,u);l==null&&(l=mV(t,n,e));var m=n==="top"&&!s||n==="bottom"&&s;i[u.id]=l-Number(m)*d.height,l+=(m?-1:1)*d.height}),i}),yV=xe(ro,Kn,fV,lp,cp,(e,t,r,n,s)=>{var i={},l;return r.forEach(u=>{var d=hV(t,u);l==null&&(l=pV(t,n,e));var m=n==="left"&&!s||n==="right"&&s;i[u.id]=l-Number(m)*d.width,l+=(m?-1:1)*d.width}),i}),vV=(e,t)=>{var r=io(e,t);if(r!=null)return gV(e,r.orientation,r.mirror)},xV=xe([Kn,io,vV,(e,t)=>t],(e,t,r,n)=>{if(t!=null){var s=r==null?void 0:r[n];return s==null?{x:e.left,y:0}:{x:e.left,y:s}}}),wV=(e,t)=>{var r=ao(e,t);if(r!=null)return yV(e,r.orientation,r.mirror)},bV=xe([Kn,ao,wV,(e,t)=>t],(e,t,r,n)=>{if(t!=null){var s=r==null?void 0:r[n];return s==null?{x:0,y:e.top}:{x:s,y:e.top}}}),o4=xe(Kn,ao,(e,t)=>{var r=typeof t.width=="number"?t.width:Td;return{width:r,height:e.height}}),G_=(e,t,r)=>{switch(t){case"xAxis":return a4(e,r).width;case"yAxis":return o4(e,r).height;default:return}},l4=(e,t,r,n)=>{if(r!=null){var{allowDuplicatedCategory:s,type:i,dataKey:l}=r,u=Rl(e,n),d=t.map(m=>m.value);if(l&&u&&i==="category"&&s&&gA(d))return d}},zw=xe([er,op,js,On],l4),c4=(e,t,r,n)=>{if(!(r==null||r.dataKey==null)){var{type:s,scale:i}=r,l=Rl(e,n);if(l&&(s==="number"||i!=="auto"))return t.map(u=>u.value)}},Uw=xe([er,op,Md,On],c4);xe([er,Iq,Ld,su,zw,Uw,zd,Lw,On],(e,t,r,n,s,i,l,u,d)=>{if(t!=null){var m=Rl(e,d);return{angle:t.angle,interval:t.interval,minTickGap:t.minTickGap,orientation:t.orientation,tick:t.tick,tickCount:t.tickCount,tickFormatter:t.tickFormatter,ticks:t.ticks,type:t.type,unit:t.unit,axisType:d,categoricalDomain:i,duplicateDomain:s,isCategorical:m,niceTicks:u,range:l,realScaleType:r,scale:n}}});var jV=(e,t,r,n,s,i,l,u,d)=>{if(!(t==null||n==null)){var m=Rl(e,d),{type:f,ticks:p,tickCount:y}=t,x=r==="scaleBand"&&typeof n.bandwidth=="function"?n.bandwidth()/2:2,j=f==="category"&&n.bandwidth?n.bandwidth()/x:0;j=d==="angleAxis"&&i!=null&&i.length>=2?ni(i[0]-i[1])*2*j:j;var b=p||s;if(b){var k=b.map((_,E)=>{var C=l?l.indexOf(_):_;return{index:E,coordinate:n(C)+j,value:_,offset:j}});return k.filter(_=>tn(_.coordinate))}return m&&u?u.map((_,E)=>({coordinate:n(_)+j,value:_,index:E,offset:j})).filter(_=>tn(_.coordinate)):n.ticks?n.ticks(y).map(_=>({coordinate:n(_)+j,value:_,offset:j})):n.domain().map((_,E)=>({coordinate:n(_)+j,value:l?l[_]:_,index:E,offset:j}))}},u4=xe([er,Md,Ld,su,Lw,zd,zw,Uw,On],jV),SV=(e,t,r,n,s,i,l)=>{if(!(t==null||r==null||n==null||n[0]===n[1])){var u=Rl(e,l),{tickCount:d}=t,m=0;return m=l==="angleAxis"&&(n==null?void 0:n.length)>=2?ni(n[0]-n[1])*2*m:m,u&&i?i.map((f,p)=>({coordinate:r(f)+m,value:f,index:p,offset:m})):r.ticks?r.ticks(d).map(f=>({coordinate:r(f)+m,value:f,offset:m})):r.domain().map((f,p)=>({coordinate:r(f)+m,value:s?s[f]:f,index:p,offset:m}))}},Lc=xe([er,Md,su,zd,zw,Uw,On],SV),zc=xe(js,su,(e,t)=>{if(!(e==null||t==null))return am(am({},e),{},{scale:t})}),kV=xe([js,Ld,Mw,n4],Fw);xe((e,t,r)=>Tw(e,r),kV,(e,t)=>{if(!(e==null||t==null))return am(am({},e),{},{scale:t})});var NV=xe([er,zm,Um],(e,t,r)=>{switch(e){case"horizontal":return t.some(n=>n.reversed)?"right-to-left":"left-to-right";case"vertical":return r.some(n=>n.reversed)?"bottom-to-top":"top-to-bottom";case"centric":case"radial":return"left-to-right";default:return}}),d4=e=>e.options.defaultTooltipEventType,f4=e=>e.options.validateTooltipEventTypes;function h4(e,t,r){if(e==null)return t;var n=e?"axis":"item";return r==null?t:r.includes(n)?n:t}function Bw(e,t){var r=d4(e),n=f4(e);return h4(t,r,n)}function _V(e){return at(t=>Bw(t,e))}var m4=(e,t)=>{var r,n=Number(t);if(!(ya(n)||t==null))return n>=0?e==null||(r=e[n])===null||r===void 0?void 0:r.value:void 0},CV=e=>e.tooltip.settings,Do={active:!1,index:null,dataKey:void 0,coordinate:void 0},EV={itemInteraction:{click:Do,hover:Do},axisInteraction:{click:Do,hover:Do},keyboardInteraction:Do,syncInteraction:{active:!1,index:null,dataKey:void 0,label:void 0,coordinate:void 0,sourceViewBox:void 0},tooltipItemPayloads:[],settings:{shared:void 0,trigger:"hover",axisId:0,active:!1,defaultIndex:void 0}},p4=Us({name:"tooltip",initialState:EV,reducers:{addTooltipEntrySettings:{reducer(e,t){e.tooltipItemPayloads.push(t.payload)},prepare:En()},removeTooltipEntrySettings:{reducer(e,t){var r=Wa(e).tooltipItemPayloads.indexOf(t.payload);r>-1&&e.tooltipItemPayloads.splice(r,1)},prepare:En()},setTooltipSettingsState(e,t){e.settings=t.payload},setActiveMouseOverItemIndex(e,t){e.syncInteraction.active=!1,e.keyboardInteraction.active=!1,e.itemInteraction.hover.active=!0,e.itemInteraction.hover.index=t.payload.activeIndex,e.itemInteraction.hover.dataKey=t.payload.activeDataKey,e.itemInteraction.hover.coordinate=t.payload.activeCoordinate},mouseLeaveChart(e){e.itemInteraction.hover.active=!1,e.axisInteraction.hover.active=!1},mouseLeaveItem(e){e.itemInteraction.hover.active=!1},setActiveClickItemIndex(e,t){e.syncInteraction.active=!1,e.itemInteraction.click.active=!0,e.keyboardInteraction.active=!1,e.itemInteraction.click.index=t.payload.activeIndex,e.itemInteraction.click.dataKey=t.payload.activeDataKey,e.itemInteraction.click.coordinate=t.payload.activeCoordinate},setMouseOverAxisIndex(e,t){e.syncInteraction.active=!1,e.axisInteraction.hover.active=!0,e.keyboardInteraction.active=!1,e.axisInteraction.hover.index=t.payload.activeIndex,e.axisInteraction.hover.dataKey=t.payload.activeDataKey,e.axisInteraction.hover.coordinate=t.payload.activeCoordinate},setMouseClickAxisIndex(e,t){e.syncInteraction.active=!1,e.keyboardInteraction.active=!1,e.axisInteraction.click.active=!0,e.axisInteraction.click.index=t.payload.activeIndex,e.axisInteraction.click.dataKey=t.payload.activeDataKey,e.axisInteraction.click.coordinate=t.payload.activeCoordinate},setSyncInteraction(e,t){e.syncInteraction=t.payload},setKeyboardInteraction(e,t){e.keyboardInteraction.active=t.payload.active,e.keyboardInteraction.index=t.payload.activeIndex,e.keyboardInteraction.coordinate=t.payload.activeCoordinate,e.keyboardInteraction.dataKey=t.payload.activeDataKey}}}),{addTooltipEntrySettings:AV,removeTooltipEntrySettings:PV,setTooltipSettingsState:OV,setActiveMouseOverItemIndex:g4,mouseLeaveItem:TV,mouseLeaveChart:y4,setActiveClickItemIndex:IV,setMouseOverAxisIndex:v4,setMouseClickAxisIndex:DV,setSyncInteraction:K0,setKeyboardInteraction:G0}=p4.actions,RV=p4.reducer;function Y_(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function sh(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Y_(Object(r),!0).forEach(function(n){$V(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Y_(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function $V(e,t,r){return(t=MV(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function MV(e){var t=FV(e,"string");return typeof t=="symbol"?t:t+""}function FV(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function LV(e,t,r){return t==="axis"?r==="click"?e.axisInteraction.click:e.axisInteraction.hover:r==="click"?e.itemInteraction.click:e.itemInteraction.hover}function zV(e){return e.index!=null}var x4=(e,t,r,n)=>{if(t==null)return Do;var s=LV(e,t,r);if(s==null)return Do;if(s.active)return s;if(e.keyboardInteraction.active)return e.keyboardInteraction;if(e.syncInteraction.active&&e.syncInteraction.index!=null)return e.syncInteraction;var i=e.settings.active===!0;if(zV(s)){if(i)return sh(sh({},s),{},{active:!0})}else if(n!=null)return{active:!0,coordinate:void 0,dataKey:void 0,index:n};return sh(sh({},Do),{},{coordinate:s.coordinate})},Ww=(e,t)=>{var r=e==null?void 0:e.index;if(r==null)return null;var n=Number(r);if(!tn(n))return r;var s=0,i=1/0;return t.length>0&&(i=t.length-1),String(Math.max(s,Math.min(n,i)))},w4=(e,t,r,n,s,i,l,u)=>{if(!(i==null||u==null)){var d=l[0],m=d==null?void 0:u(d.positions,i);if(m!=null)return m;var f=s==null?void 0:s[Number(i)];if(f)switch(r){case"horizontal":return{x:f.coordinate,y:(n.top+t)/2};default:return{x:(n.left+e)/2,y:f.coordinate}}}},b4=(e,t,r,n)=>{if(t==="axis")return e.tooltipItemPayloads;if(e.tooltipItemPayloads.length===0)return[];var s;return r==="hover"?s=e.itemInteraction.hover.dataKey:s=e.itemInteraction.click.dataKey,s==null&&n!=null?[e.tooltipItemPayloads[0]]:e.tooltipItemPayloads.filter(i=>{var l;return((l=i.settings)===null||l===void 0?void 0:l.dataKey)===s})},Ud=e=>e.options.tooltipPayloadSearcher,iu=e=>e.tooltip;function J_(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function X_(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?J_(Object(r),!0).forEach(function(n){UV(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):J_(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function UV(e,t,r){return(t=BV(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function BV(e){var t=WV(e,"string");return typeof t=="symbol"?t:t+""}function WV(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function qV(e,t){return e??t}var j4=(e,t,r,n,s,i,l)=>{if(!(t==null||i==null)){var{chartData:u,computedData:d,dataStartIndex:m,dataEndIndex:f}=r,p=[];return e.reduce((y,x)=>{var j,{dataDefinedOnItem:b,settings:k}=x,_=qV(b,u),E=Array.isArray(_)?iP(_,m,f):_,C=(j=k==null?void 0:k.dataKey)!==null&&j!==void 0?j:n,O=k==null?void 0:k.nameKey,T;if(n&&Array.isArray(E)&&!Array.isArray(E[0])&&l==="axis"?T=rz(E,n,s):T=i(E,t,d,O),Array.isArray(T))T.forEach(L=>{var J=X_(X_({},k),{},{name:L.name,unit:L.unit,color:void 0,fill:void 0});y.push(NN({tooltipEntrySettings:J,dataKey:L.dataKey,payload:L.payload,value:bs(L.payload,L.dataKey),name:L.name}))});else{var A;y.push(NN({tooltipEntrySettings:k,dataKey:C,payload:T,value:bs(T,C),name:(A=bs(T,O))!==null&&A!==void 0?A:k==null?void 0:k.name}))}return y},p)}},qw=xe([In,er,PO,Nw,Tn],ZO),VV=xe([e=>e.graphicalItems.cartesianItems,e=>e.graphicalItems.polarItems],(e,t)=>[...e,...t]),HV=xe([Tn,ru],OO),Bd=xe([VV,In,HV],TO,{memoizeOptions:{resultEqualityCheck:ap}}),KV=xe([Bd],e=>e.filter(sp)),GV=xe([Bd],RO,{memoizeOptions:{resultEqualityCheck:ap}}),au=xe([GV,qo],$O),YV=xe([KV,qo,In],CO),Vw=xe([au,In,Bd],MO),S4=xe([In],Rw),JV=xe([In],e=>e.allowDataOverflow),k4=xe([S4,JV],sO),XV=xe([Bd],e=>e.filter(sp)),QV=xe([YV,XV,ep],zO),ZV=xe([QV,qo,Tn,k4],UO),eH=xe([Bd],DO),tH=xe([au,In,eH,$w,Tn],qO,{memoizeOptions:{resultEqualityCheck:ip}}),rH=xe([VO,Tn,ru],nu),nH=xe([rH,Tn],GO),sH=xe([HO,Tn,ru],nu),iH=xe([sH,Tn],YO),aH=xe([KO,Tn,ru],nu),oH=xe([aH,Tn],JO),lH=xe([nH,oH,iH],om),cH=xe([In,S4,k4,ZV,tH,lH,er,Tn],XO),N4=xe([In,er,au,Vw,ep,Tn,cH],QO),uH=xe([N4,In,qw],e4),dH=xe([In,N4,uH,Tn],t4),_4=e=>{var t=Tn(e),r=ru(e),n=!1;return zd(e,t,r,n)},C4=xe([In,_4],tp),E4=xe([In,qw,dH,C4],Fw),fH=xe([er,Vw,In,Tn],l4),hH=xe([er,Vw,In,Tn],c4),mH=(e,t,r,n,s,i,l,u)=>{if(t){var{type:d}=t,m=Rl(e,u);if(n){var f=r==="scaleBand"&&n.bandwidth?n.bandwidth()/2:2,p=d==="category"&&n.bandwidth?n.bandwidth()/f:0;return p=u==="angleAxis"&&s!=null&&(s==null?void 0:s.length)>=2?ni(s[0]-s[1])*2*p:p,m&&l?l.map((y,x)=>({coordinate:n(y)+p,value:y,index:x,offset:p})):n.domain().map((y,x)=>({coordinate:n(y)+p,value:i?i[y]:y,index:x,offset:p}))}}},oo=xe([er,In,qw,E4,_4,fH,hH,Tn],mH),Hw=xe([d4,f4,CV],(e,t,r)=>h4(r.shared,e,t)),A4=e=>e.tooltip.settings.trigger,Kw=e=>e.tooltip.settings.defaultIndex,up=xe([iu,Hw,A4,Kw],x4),Uc=xe([up,au],Ww),P4=xe([oo,Uc],m4),O4=xe([up],e=>{if(e)return e.dataKey}),T4=xe([iu,Hw,A4,Kw],b4),pH=xe([ro,no,er,Kn,oo,Kw,T4,Ud],w4),gH=xe([up,pH],(e,t)=>e!=null&&e.coordinate?e.coordinate:t),yH=xe([up],e=>e.active),vH=xe([T4,Uc,qo,LO,P4,Ud,Hw],j4);xe([vH],e=>{if(e!=null){var t=e.map(r=>r.payload).filter(r=>r!=null);return Array.from(new Set(t))}});function Q_(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Z_(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Q_(Object(r),!0).forEach(function(n){xH(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Q_(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function xH(e,t,r){return(t=wH(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function wH(e){var t=bH(e,"string");return typeof t=="symbol"?t:t+""}function bH(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var jH=()=>at(In),SH=()=>{var e=jH(),t=at(oo),r=at(E4);return qh(!e||!r?void 0:Z_(Z_({},e),{},{scale:r}),t)};function e2(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function xc(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?e2(Object(r),!0).forEach(function(n){kH(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):e2(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function kH(e,t,r){return(t=NH(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function NH(e){var t=_H(e,"string");return typeof t=="symbol"?t:t+""}function _H(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var CH=(e,t,r,n)=>{var s=t.find(i=>i&&i.index===r);if(s){if(e==="horizontal")return{x:s.coordinate,y:n.chartY};if(e==="vertical")return{x:n.chartX,y:s.coordinate}}return{x:0,y:0}},EH=(e,t,r,n)=>{var s=t.find(m=>m&&m.index===r);if(s){if(e==="centric"){var i=s.coordinate,{radius:l}=n;return xc(xc(xc({},n),ss(n.cx,n.cy,l,i)),{},{angle:i,radius:l})}var u=s.coordinate,{angle:d}=n;return xc(xc(xc({},n),ss(n.cx,n.cy,u,d)),{},{angle:d,radius:u})}return{angle:0,clockWise:!1,cx:0,cy:0,endAngle:0,innerRadius:0,outerRadius:0,radius:0,startAngle:0,x:0,y:0}};function AH(e,t){var{chartX:r,chartY:n}=e;return r>=t.left&&r<=t.left+t.width&&n>=t.top&&n<=t.top+t.height}var I4=(e,t,r,n,s)=>{var i,l=-1,u=(i=t==null?void 0:t.length)!==null&&i!==void 0?i:0;if(u<=1||e==null)return 0;if(n==="angleAxis"&&s!=null&&Math.abs(Math.abs(s[1]-s[0])-360)<=1e-6)for(var d=0;d<u;d++){var m=d>0?r[d-1].coordinate:r[u-1].coordinate,f=r[d].coordinate,p=d>=u-1?r[0].coordinate:r[d+1].coordinate,y=void 0;if(ni(f-m)!==ni(p-f)){var x=[];if(ni(p-f)===ni(s[1]-s[0])){y=p;var j=f+s[1]-s[0];x[0]=Math.min(j,(j+m)/2),x[1]=Math.max(j,(j+m)/2)}else{y=m;var b=p+s[1]-s[0];x[0]=Math.min(f,(b+f)/2),x[1]=Math.max(f,(b+f)/2)}var k=[Math.min(f,(y+f)/2),Math.max(f,(y+f)/2)];if(e>k[0]&&e<=k[1]||e>=x[0]&&e<=x[1]){({index:l}=r[d]);break}}else{var _=Math.min(m,p),E=Math.max(m,p);if(e>(_+f)/2&&e<=(E+f)/2){({index:l}=r[d]);break}}}else if(t){for(var C=0;C<u;C++)if(C===0&&e<=(t[C].coordinate+t[C+1].coordinate)/2||C>0&&C<u-1&&e>(t[C].coordinate+t[C-1].coordinate)/2&&e<=(t[C].coordinate+t[C+1].coordinate)/2||C===u-1&&e>(t[C].coordinate+t[C-1].coordinate)/2){({index:l}=t[C]);break}}return l},PH=()=>at(Nw),Gw=(e,t)=>t,D4=(e,t,r)=>r,Yw=(e,t,r,n)=>n,OH=xe(oo,e=>Dm(e,t=>t.coordinate)),Jw=xe([iu,Gw,D4,Yw],x4),R4=xe([Jw,au],Ww),TH=(e,t,r)=>{if(t!=null){var n=iu(e);return t==="axis"?r==="hover"?n.axisInteraction.hover.dataKey:n.axisInteraction.click.dataKey:r==="hover"?n.itemInteraction.hover.dataKey:n.itemInteraction.click.dataKey}},$4=xe([iu,Gw,D4,Yw],b4),lm=xe([ro,no,er,Kn,oo,Yw,$4,Ud],w4),IH=xe([Jw,lm],(e,t)=>{var r;return(r=e.coordinate)!==null&&r!==void 0?r:t}),M4=xe([oo,R4],m4),DH=xe([$4,R4,qo,LO,M4,Ud,Gw],j4),RH=xe([Jw],e=>({isActive:e.active,activeIndex:e.index})),$H=(e,t,r,n,s,i,l)=>{if(!(!e||!r||!n||!s)&&AH(e,l)){var u=NU(e,t),d=I4(u,i,s,r,n),m=CH(t,s,d,e);return{activeIndex:String(d),activeCoordinate:m}}},MH=(e,t,r,n,s,i,l)=>{if(!(!e||!n||!s||!i||!r)){var u=k7(e,r);if(u){var d=_U(u,t),m=I4(d,l,i,n,s),f=EH(t,i,m,u);return{activeIndex:String(m),activeCoordinate:f}}}},FH=(e,t,r,n,s,i,l,u)=>{if(!(!e||!t||!n||!s||!i))return t==="horizontal"||t==="vertical"?$H(e,t,n,s,i,l,u):MH(e,t,r,n,s,i,l)},LH=xe(e=>e.zIndex.zIndexMap,(e,t)=>t,(e,t,r)=>r,(e,t,r)=>{if(t!=null){var n=e[t];if(n!=null)return r?n.panoramaElementId:n.elementId}}),zH=xe(e=>e.zIndex.zIndexMap,e=>{var t=Object.keys(e).map(n=>parseInt(n,10)).concat(Object.values(Ls)),r=Array.from(new Set(t));return r.sort((n,s)=>n-s)},{memoizeOptions:{resultEqualityCheck:Eq}});function t2(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function r2(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?t2(Object(r),!0).forEach(function(n){UH(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):t2(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function UH(e,t,r){return(t=BH(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function BH(e){var t=WH(e,"string");return typeof t=="symbol"?t:t+""}function WH(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var qH={},VH={zIndexMap:Object.values(Ls).reduce((e,t)=>r2(r2({},e),{},{[t]:{elementId:void 0,panoramaElementId:void 0,consumers:0}}),qH)},HH=new Set(Object.values(Ls));function KH(e){return HH.has(e)}var F4=Us({name:"zIndex",initialState:VH,reducers:{registerZIndexPortal:{reducer:(e,t)=>{var{zIndex:r}=t.payload;e.zIndexMap[r]?e.zIndexMap[r].consumers+=1:e.zIndexMap[r]={consumers:1,elementId:void 0,panoramaElementId:void 0}},prepare:En()},unregisterZIndexPortal:{reducer:(e,t)=>{var{zIndex:r}=t.payload;e.zIndexMap[r]&&(e.zIndexMap[r].consumers-=1,e.zIndexMap[r].consumers<=0&&!KH(r)&&delete e.zIndexMap[r])},prepare:En()},registerZIndexPortalId:{reducer:(e,t)=>{var{zIndex:r,elementId:n,isPanorama:s}=t.payload;e.zIndexMap[r]?s?e.zIndexMap[r].panoramaElementId=n:e.zIndexMap[r].elementId=n:e.zIndexMap[r]={consumers:0,elementId:s?void 0:n,panoramaElementId:s?n:void 0}},prepare:En()},unregisterZIndexPortalId:{reducer:(e,t)=>{var{zIndex:r}=t.payload;e.zIndexMap[r]&&(t.payload.isPanorama?e.zIndexMap[r].panoramaElementId=void 0:e.zIndexMap[r].elementId=void 0)},prepare:En()}}}),{registerZIndexPortal:GH,unregisterZIndexPortal:YH,registerZIndexPortalId:JH,unregisterZIndexPortalId:XH}=F4.actions,QH=F4.reducer;function Vo(e){var{zIndex:t,children:r}=e,n=lB(),s=n&&t!==void 0&&t!==0,i=li(),l=rn();v.useLayoutEffect(()=>s?(l(GH({zIndex:t})),()=>{l(YH({zIndex:t}))}):Xc,[l,t,s]);var u=at(m=>LH(m,t,i));if(!s)return r;if(!u)return null;var d=document.getElementById(u);return d?OC.createPortal(r,d):null}function Y0(){return Y0=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Y0.apply(null,arguments)}function n2(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function ih(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?n2(Object(r),!0).forEach(function(n){ZH(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):n2(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function ZH(e,t,r){return(t=eK(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function eK(e){var t=tK(e,"string");return typeof t=="symbol"?t:t+""}function tK(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function rK(e){var{cursor:t,cursorComp:r,cursorProps:n}=e;return v.isValidElement(t)?v.cloneElement(t,n):v.createElement(r,n)}function nK(e){var t,{coordinate:r,payload:n,index:s,offset:i,tooltipAxisBandSize:l,layout:u,cursor:d,tooltipEventType:m,chartName:f}=e,p=r,y=n,x=s;if(!d||!p||f!=="ScatterChart"&&m!=="axis")return null;var j,b,k;if(f==="ScatterChart")j=p,b=LB,k=Ls.cursorLine;else if(f==="BarChart")j=zB(u,p,i,l),b=xP,k=Ls.cursorRectangle;else if(u==="radial"&&xA(p)){var{cx:_,cy:E,radius:C,startAngle:O,endAngle:T}=wP(p);j={cx:_,cy:E,startAngle:O,endAngle:T,innerRadius:C,outerRadius:C},b=jP,k=Ls.cursorLine}else j={points:E7(u,p,i)},b=mP,k=Ls.cursorLine;var A=typeof d=="object"&&"className"in d?d.className:void 0,L=ih(ih(ih(ih({stroke:"#ccc",pointerEvents:"none"},i),j),Dx(d)),{},{payload:y,payloadIndex:x,className:Nr("recharts-tooltip-cursor",A)});return v.createElement(Vo,{zIndex:(t=e.zIndex)!==null&&t!==void 0?t:k},v.createElement(rK,{cursor:d,cursorComp:b,cursorProps:L}))}function sK(e){var t=SH(),r=iB(),n=Vm(),s=PH();return t==null||r==null||n==null||s==null?null:v.createElement(nK,Y0({},e,{offset:r,layout:n,tooltipAxisBandSize:t,chartName:s}))}var L4=v.createContext(null),iK=()=>v.useContext(L4),bv={exports:{}},s2;function aK(){return s2||(s2=1,(function(e){var t=Object.prototype.hasOwnProperty,r="~";function n(){}Object.create&&(n.prototype=Object.create(null),new n().__proto__||(r=!1));function s(d,m,f){this.fn=d,this.context=m,this.once=f||!1}function i(d,m,f,p,y){if(typeof f!="function")throw new TypeError("The listener must be a function");var x=new s(f,p||d,y),j=r?r+m:m;return d._events[j]?d._events[j].fn?d._events[j]=[d._events[j],x]:d._events[j].push(x):(d._events[j]=x,d._eventsCount++),d}function l(d,m){--d._eventsCount===0?d._events=new n:delete d._events[m]}function u(){this._events=new n,this._eventsCount=0}u.prototype.eventNames=function(){var m=[],f,p;if(this._eventsCount===0)return m;for(p in f=this._events)t.call(f,p)&&m.push(r?p.slice(1):p);return Object.getOwnPropertySymbols?m.concat(Object.getOwnPropertySymbols(f)):m},u.prototype.listeners=function(m){var f=r?r+m:m,p=this._events[f];if(!p)return[];if(p.fn)return[p.fn];for(var y=0,x=p.length,j=new Array(x);y<x;y++)j[y]=p[y].fn;return j},u.prototype.listenerCount=function(m){var f=r?r+m:m,p=this._events[f];return p?p.fn?1:p.length:0},u.prototype.emit=function(m,f,p,y,x,j){var b=r?r+m:m;if(!this._events[b])return!1;var k=this._events[b],_=arguments.length,E,C;if(k.fn){switch(k.once&&this.removeListener(m,k.fn,void 0,!0),_){case 1:return k.fn.call(k.context),!0;case 2:return k.fn.call(k.context,f),!0;case 3:return k.fn.call(k.context,f,p),!0;case 4:return k.fn.call(k.context,f,p,y),!0;case 5:return k.fn.call(k.context,f,p,y,x),!0;case 6:return k.fn.call(k.context,f,p,y,x,j),!0}for(C=1,E=new Array(_-1);C<_;C++)E[C-1]=arguments[C];k.fn.apply(k.context,E)}else{var O=k.length,T;for(C=0;C<O;C++)switch(k[C].once&&this.removeListener(m,k[C].fn,void 0,!0),_){case 1:k[C].fn.call(k[C].context);break;case 2:k[C].fn.call(k[C].context,f);break;case 3:k[C].fn.call(k[C].context,f,p);break;case 4:k[C].fn.call(k[C].context,f,p,y);break;default:if(!E)for(T=1,E=new Array(_-1);T<_;T++)E[T-1]=arguments[T];k[C].fn.apply(k[C].context,E)}}return!0},u.prototype.on=function(m,f,p){return i(this,m,f,p,!1)},u.prototype.once=function(m,f,p){return i(this,m,f,p,!0)},u.prototype.removeListener=function(m,f,p,y){var x=r?r+m:m;if(!this._events[x])return this;if(!f)return l(this,x),this;var j=this._events[x];if(j.fn)j.fn===f&&(!y||j.once)&&(!p||j.context===p)&&l(this,x);else{for(var b=0,k=[],_=j.length;b<_;b++)(j[b].fn!==f||y&&!j[b].once||p&&j[b].context!==p)&&k.push(j[b]);k.length?this._events[x]=k.length===1?k[0]:k:l(this,x)}return this},u.prototype.removeAllListeners=function(m){var f;return m?(f=r?r+m:m,this._events[f]&&l(this,f)):(this._events=new n,this._eventsCount=0),this},u.prototype.off=u.prototype.removeListener,u.prototype.addListener=u.prototype.on,u.prefixed=r,u.EventEmitter=u,e.exports=u})(bv)),bv.exports}var oK=aK();const lK=Zi(oK);var wd=new lK,J0="recharts.syncEvent.tooltip",i2="recharts.syncEvent.brush";function cK(e,t){if(t){var r=Number.parseInt(t,10);if(!ya(r))return e==null?void 0:e[r]}}var uK={chartName:"",tooltipPayloadSearcher:void 0,eventEmitter:void 0,defaultTooltipEventType:"axis"},z4=Us({name:"options",initialState:uK,reducers:{createEventEmitter:e=>{e.eventEmitter==null&&(e.eventEmitter=Symbol("rechartsEventEmitter"))}}}),dK=z4.reducer,{createEventEmitter:fK}=z4.actions;function hK(e){return e.tooltip.syncInteraction}var mK={chartData:void 0,computedData:void 0,dataStartIndex:0,dataEndIndex:0},U4=Us({name:"chartData",initialState:mK,reducers:{setChartData(e,t){if(e.chartData=t.payload,t.payload==null){e.dataStartIndex=0,e.dataEndIndex=0;return}t.payload.length>0&&e.dataEndIndex!==t.payload.length-1&&(e.dataEndIndex=t.payload.length-1)},setComputedData(e,t){e.computedData=t.payload},setDataStartEndIndexes(e,t){var{startIndex:r,endIndex:n}=t.payload;r!=null&&(e.dataStartIndex=r),n!=null&&(e.dataEndIndex=n)}}}),{setChartData:a2,setDataStartEndIndexes:pK,setComputedData:gee}=U4.actions,gK=U4.reducer,yK=["x","y"];function o2(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function wc(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?o2(Object(r),!0).forEach(function(n){vK(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):o2(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function vK(e,t,r){return(t=xK(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function xK(e){var t=wK(e,"string");return typeof t=="symbol"?t:t+""}function wK(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function bK(e,t){if(e==null)return{};var r,n,s=jK(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function jK(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function SK(){var e=at(_w),t=at(Cw),r=rn(),n=at(bO),s=at(oo),i=Vm(),l=qm(),u=at(d=>d.rootProps.className);v.useEffect(()=>{if(e==null)return Xc;var d=(m,f,p)=>{if(t!==p&&e===m){if(n==="index"){var y;if(l&&f!==null&&f!==void 0&&(y=f.payload)!==null&&y!==void 0&&y.coordinate&&f.payload.sourceViewBox){var x=f.payload.coordinate,{x:j,y:b}=x,k=bK(x,yK),{x:_,y:E,width:C,height:O}=f.payload.sourceViewBox,T=wc(wc({},k),{},{x:l.x+(C?(j-_)/C:0)*l.width,y:l.y+(O?(b-E)/O:0)*l.height});r(wc(wc({},f),{},{payload:wc(wc({},f.payload),{},{coordinate:T})}))}else r(f);return}if(s!=null){var A;if(typeof n=="function"){var L={activeTooltipIndex:f.payload.index==null?void 0:Number(f.payload.index),isTooltipActive:f.payload.active,activeIndex:f.payload.index==null?void 0:Number(f.payload.index),activeLabel:f.payload.label,activeDataKey:f.payload.dataKey,activeCoordinate:f.payload.coordinate},J=n(s,L);A=s[J]}else n==="value"&&(A=s.find(B=>String(B.value)===f.payload.label));var{coordinate:H}=f.payload;if(A==null||f.payload.active===!1||H==null||l==null){r(K0({active:!1,coordinate:void 0,dataKey:void 0,index:null,label:void 0,sourceViewBox:void 0}));return}var{x:me,y:Z}=H,K=Math.min(me,l.x+l.width),ce=Math.min(Z,l.y+l.height),z={x:i==="horizontal"?A.coordinate:K,y:i==="horizontal"?ce:A.coordinate},se=K0({active:f.payload.active,coordinate:z,dataKey:f.payload.dataKey,index:String(A.index),label:f.payload.label,sourceViewBox:f.payload.sourceViewBox});r(se)}}};return wd.on(J0,d),()=>{wd.off(J0,d)}},[u,r,t,e,n,s,i,l])}function kK(){var e=at(_w),t=at(Cw),r=rn();v.useEffect(()=>{if(e==null)return Xc;var n=(s,i,l)=>{t!==l&&e===s&&r(pK(i))};return wd.on(i2,n),()=>{wd.off(i2,n)}},[r,t,e])}function NK(){var e=rn();v.useEffect(()=>{e(fK())},[e]),SK(),kK()}function _K(e,t,r,n,s,i){var l=at(x=>TH(x,e,t)),u=at(Cw),d=at(_w),m=at(bO),f=at(hK),p=f==null?void 0:f.active,y=qm();v.useEffect(()=>{if(!p&&d!=null&&u!=null){var x=K0({active:i,coordinate:r,dataKey:l,index:s,label:typeof n=="number"?String(n):n,sourceViewBox:y});wd.emit(J0,d,x,u)}},[p,r,l,s,n,u,d,m,i,y])}function l2(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function c2(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?l2(Object(r),!0).forEach(function(n){CK(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):l2(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function CK(e,t,r){return(t=EK(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function EK(e){var t=AK(e,"string");return typeof t=="symbol"?t:t+""}function AK(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function PK(e){return e.dataKey}function OK(e,t){return v.isValidElement(e)?v.cloneElement(e,t):typeof e=="function"?v.createElement(e,t):v.createElement(yB,t)}var u2=[],TK={allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",axisId:0,contentStyle:{},cursor:!0,filterNull:!0,isAnimationActive:!Qc.isSsr,itemSorter:"name",itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,wrapperStyle:{}};function IK(e){var t,r,n=Ci(e,TK),{active:s,allowEscapeViewBox:i,animationDuration:l,animationEasing:u,content:d,filterNull:m,isAnimationActive:f,offset:p,payloadUniqBy:y,position:x,reverseDirection:j,useTranslate3d:b,wrapperStyle:k,cursor:_,shared:E,trigger:C,defaultIndex:O,portal:T,axisId:A}=n,L=rn(),J=typeof O=="number"?String(O):O;v.useEffect(()=>{L(OV({shared:E,trigger:C,axisId:A,active:s,defaultIndex:J}))},[L,E,C,A,s,J]);var H=qm(),me=hP(),Z=_V(E),{activeIndex:K,isActive:ce}=(t=at(de=>RH(de,Z,C,J)))!==null&&t!==void 0?t:{},z=at(de=>DH(de,Z,C,J)),se=at(de=>M4(de,Z,C,J)),B=at(de=>IH(de,Z,C,J)),ue=z,oe=iK(),X=(r=s??ce)!==null&&r!==void 0?r:!1,[ee,D]=h8([ue,X]),q=Z==="axis"?se:void 0;_K(Z,C,B,q,K,X);var Te=T??oe;if(Te==null||H==null||Z==null)return null;var we=ue??u2;X||(we=u2),m&&we.length&&(we=Lz(we.filter(de=>de.value!=null&&(de.hide!==!0||n.includeHidden)),y,PK));var Ce=we.length>0,le=v.createElement(kB,{allowEscapeViewBox:i,animationDuration:l,animationEasing:u,isAnimationActive:f,active:X,coordinate:B,hasPayload:Ce,offset:p,position:x,reverseDirection:j,useTranslate3d:b,viewBox:H,wrapperStyle:k,lastBoundingBox:ee,innerRef:D,hasPortalFromProps:!!T},OK(d,c2(c2({},n),{},{payload:we,label:q,active:X,activeIndex:K,coordinate:B,accessibilityLayer:me})));return v.createElement(v.Fragment,null,OC.createPortal(le,Te),X&&v.createElement(sK,{cursor:_,tooltipEventType:Z,coordinate:B,payload:we,index:K}))}var Xw=e=>null;Xw.displayName="Cell";function DK(e,t,r){return(t=RK(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function RK(e){var t=$K(e,"string");return typeof t=="symbol"?t:t+""}function $K(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class MK{constructor(t){DK(this,"cache",new Map),this.maxSize=t}get(t){var r=this.cache.get(t);return r!==void 0&&(this.cache.delete(t),this.cache.set(t,r)),r}set(t,r){if(this.cache.has(t))this.cache.delete(t);else if(this.cache.size>=this.maxSize){var n=this.cache.keys().next().value;this.cache.delete(n)}this.cache.set(t,r)}clear(){this.cache.clear()}size(){return this.cache.size}}function d2(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function FK(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?d2(Object(r),!0).forEach(function(n){LK(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):d2(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function LK(e,t,r){return(t=zK(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function zK(e){var t=UK(e,"string");return typeof t=="symbol"?t:t+""}function UK(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var BK={cacheSize:2e3,enableCache:!0},B4=FK({},BK),f2=new MK(B4.cacheSize),WK={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},h2="recharts_measurement_span";function qK(e,t){var r=t.fontSize||"",n=t.fontFamily||"",s=t.fontWeight||"",i=t.fontStyle||"",l=t.letterSpacing||"",u=t.textTransform||"";return"".concat(e,"|").concat(r,"|").concat(n,"|").concat(s,"|").concat(i,"|").concat(l,"|").concat(u)}var m2=(e,t)=>{try{var r=document.getElementById(h2);r||(r=document.createElement("span"),r.setAttribute("id",h2),r.setAttribute("aria-hidden","true"),document.body.appendChild(r)),Object.assign(r.style,WK,t),r.textContent="".concat(e);var n=r.getBoundingClientRect();return{width:n.width,height:n.height}}catch{return{width:0,height:0}}},sd=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(t==null||Qc.isSsr)return{width:0,height:0};if(!B4.enableCache)return m2(t,r);var n=qK(t,r),s=f2.get(n);if(s)return s;var i=m2(t,r);return f2.set(n,i),i},p2=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,g2=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,VK=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,HK=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,W4={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},KK=Object.keys(W4),Cc="NaN";function GK(e,t){return e*W4[t]}class Rs{static parse(t){var r,[,n,s]=(r=HK.exec(t))!==null&&r!==void 0?r:[];return new Rs(parseFloat(n),s??"")}constructor(t,r){this.num=t,this.unit=r,this.num=t,this.unit=r,ya(t)&&(this.unit=""),r!==""&&!VK.test(r)&&(this.num=NaN,this.unit=""),KK.includes(r)&&(this.num=GK(t,r),this.unit="px")}add(t){return this.unit!==t.unit?new Rs(NaN,""):new Rs(this.num+t.num,this.unit)}subtract(t){return this.unit!==t.unit?new Rs(NaN,""):new Rs(this.num-t.num,this.unit)}multiply(t){return this.unit!==""&&t.unit!==""&&this.unit!==t.unit?new Rs(NaN,""):new Rs(this.num*t.num,this.unit||t.unit)}divide(t){return this.unit!==""&&t.unit!==""&&this.unit!==t.unit?new Rs(NaN,""):new Rs(this.num/t.num,this.unit||t.unit)}toString(){return"".concat(this.num).concat(this.unit)}isNaN(){return ya(this.num)}}function q4(e){if(e.includes(Cc))return Cc;for(var t=e;t.includes("*")||t.includes("/");){var r,[,n,s,i]=(r=p2.exec(t))!==null&&r!==void 0?r:[],l=Rs.parse(n??""),u=Rs.parse(i??""),d=s==="*"?l.multiply(u):l.divide(u);if(d.isNaN())return Cc;t=t.replace(p2,d.toString())}for(;t.includes("+")||/.-\d+(?:\.\d+)?/.test(t);){var m,[,f,p,y]=(m=g2.exec(t))!==null&&m!==void 0?m:[],x=Rs.parse(f??""),j=Rs.parse(y??""),b=p==="+"?x.add(j):x.subtract(j);if(b.isNaN())return Cc;t=t.replace(g2,b.toString())}return t}var y2=/\(([^()]*)\)/;function YK(e){for(var t=e,r;(r=y2.exec(t))!=null;){var[,n]=r;t=t.replace(y2,q4(n))}return t}function JK(e){var t=e.replace(/\s+/g,"");return t=YK(t),t=q4(t),t}function XK(e){try{return JK(e)}catch{return Cc}}function jv(e){var t=XK(e.slice(5,-1));return t===Cc?"":t}var QK=["x","y","lineHeight","capHeight","fill","scaleToFit","textAnchor","verticalAnchor"],ZK=["dx","dy","angle","className","breakAll"];function X0(){return X0=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},X0.apply(null,arguments)}function v2(e,t){if(e==null)return{};var r,n,s=eG(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function eG(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var V4=/[ \f\n\r\t\v\u2028\u2029]+/,H4=e=>{var{children:t,breakAll:r,style:n}=e;try{var s=[];Hn(t)||(r?s=t.toString().split(""):s=t.toString().split(V4));var i=s.map(u=>({word:u,width:sd(u,n).width})),l=r?0:sd("",n).width;return{wordsWithComputedWidth:i,spaceWidth:l}}catch{return null}};function tG(e){return e==="start"||e==="middle"||e==="end"||e==="inherit"}var K4=(e,t,r,n)=>e.reduce((s,i)=>{var{word:l,width:u}=i,d=s[s.length-1];if(d&&u!=null&&(t==null||n||d.width+u+r<Number(t)))d.words.push(l),d.width+=u+r;else{var m={words:[l],width:u};s.push(m)}return s},[]),G4=e=>e.reduce((t,r)=>t.width>r.width?t:r),rG="",x2=(e,t,r,n,s,i,l,u)=>{var d=e.slice(0,t),m=H4({breakAll:r,style:n,children:d+rG});if(!m)return[!1,[]];var f=K4(m.wordsWithComputedWidth,i,l,u),p=f.length>s||G4(f).width>Number(i);return[p,f]},nG=(e,t,r,n,s)=>{var{maxLines:i,children:l,style:u,breakAll:d}=e,m=mt(i),f=String(l),p=K4(t,n,r,s);if(!m||s)return p;var y=p.length>i||G4(p).width>Number(n);if(!y)return p;for(var x=0,j=f.length-1,b=0,k;x<=j&&b<=f.length-1;){var _=Math.floor((x+j)/2),E=_-1,[C,O]=x2(f,E,d,u,i,n,r,s),[T]=x2(f,_,d,u,i,n,r,s);if(!C&&!T&&(x=_+1),C&&T&&(j=_-1),!C&&T){k=O;break}b++}return k||p},w2=e=>{var t=Hn(e)?[]:e.toString().split(V4);return[{words:t,width:void 0}]},sG=e=>{var{width:t,scaleToFit:r,children:n,style:s,breakAll:i,maxLines:l}=e;if((t||r)&&!Qc.isSsr){var u,d,m=H4({breakAll:i,children:n,style:s});if(m){var{wordsWithComputedWidth:f,spaceWidth:p}=m;u=f,d=p}else return w2(n);return nG({breakAll:i,children:n,maxLines:l,style:s},u,d,t,!!r)}return w2(n)},Y4="#808080",iG={breakAll:!1,capHeight:"0.71em",fill:Y4,lineHeight:"1em",scaleToFit:!1,textAnchor:"start",verticalAnchor:"end",x:0,y:0},Qw=v.forwardRef((e,t)=>{var r=Ci(e,iG),{x:n,y:s,lineHeight:i,capHeight:l,fill:u,scaleToFit:d,textAnchor:m,verticalAnchor:f}=r,p=v2(r,QK),y=v.useMemo(()=>sG({breakAll:p.breakAll,children:p.children,maxLines:p.maxLines,scaleToFit:d,style:p.style,width:p.width}),[p.breakAll,p.children,p.maxLines,d,p.style,p.width]),{dx:x,dy:j,angle:b,className:k,breakAll:_}=p,E=v2(p,ZK);if(!va(n)||!va(s)||y.length===0)return null;var C=Number(n)+(mt(x)?x:0),O=Number(s)+(mt(j)?j:0);if(!tn(C)||!tn(O))return null;var T;switch(f){case"start":T=jv("calc(".concat(l,")"));break;case"middle":T=jv("calc(".concat((y.length-1)/2," * -").concat(i," + (").concat(l," / 2))"));break;default:T=jv("calc(".concat(y.length-1," * -").concat(i,")"));break}var A=[];if(d){var L=y[0].width,{width:J}=p;A.push("scale(".concat(mt(J)&&mt(L)?J/L:1,")"))}return b&&A.push("rotate(".concat(b,", ").concat(C,", ").concat(O,")")),A.length&&(E.transform=A.join(" ")),v.createElement("text",X0({},Si(E),{ref:t,x:C,y:O,className:Nr("recharts-text",k),textAnchor:m,fill:u.includes("url")?Y4:u}),y.map((H,me)=>{var Z=H.words.join(_?"":" ");return v.createElement("tspan",{x:C,dy:me===0?T:i,key:"".concat(Z,"-").concat(me)},Z)}))});Qw.displayName="Text";var aG=["labelRef"];function oG(e,t){if(e==null)return{};var r,n,s=lG(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function lG(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function b2(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Qr(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?b2(Object(r),!0).forEach(function(n){cG(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):b2(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function cG(e,t,r){return(t=uG(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function uG(e){var t=dG(e,"string");return typeof t=="symbol"?t:t+""}function dG(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Fa(){return Fa=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Fa.apply(null,arguments)}var J4=v.createContext(null),fG=e=>{var{x:t,y:r,upperWidth:n,lowerWidth:s,width:i,height:l,children:u}=e,d=v.useMemo(()=>({x:t,y:r,upperWidth:n,lowerWidth:s,width:i,height:l}),[t,r,n,s,i,l]);return v.createElement(J4.Provider,{value:d},u)},X4=()=>{var e=v.useContext(J4),t=qm();return e||dP(t)},hG=v.createContext(null),mG=()=>{var e=v.useContext(hG),t=at(_O);return e||t},pG=e=>{var{value:t,formatter:r}=e,n=Hn(e.children)?t:e.children;return typeof r=="function"?r(n):n},Zw=e=>e!=null&&typeof e=="function",gG=(e,t)=>{var r=ni(t-e),n=Math.min(Math.abs(t-e),360);return r*n},yG=(e,t,r,n,s)=>{var{offset:i,className:l}=e,{cx:u,cy:d,innerRadius:m,outerRadius:f,startAngle:p,endAngle:y,clockWise:x}=s,j=(m+f)/2,b=gG(p,y),k=b>=0?1:-1,_,E;switch(t){case"insideStart":_=p+k*i,E=x;break;case"insideEnd":_=y-k*i,E=!x;break;case"end":_=y+k*i,E=x;break;default:throw new Error("Unsupported position ".concat(t))}E=b<=0?E:!E;var C=ss(u,d,j,_),O=ss(u,d,j,_+(E?1:-1)*359),T="M".concat(C.x,",").concat(C.y,`
    A`).concat(j,",").concat(j,",0,1,").concat(E?0:1,`,
    `).concat(O.x,",").concat(O.y),A=Hn(e.id)?ud("recharts-radial-line-"):e.id;return v.createElement("text",Fa({},n,{dominantBaseline:"central",className:Nr("recharts-radial-bar-label",l)}),v.createElement("defs",null,v.createElement("path",{id:A,d:T})),v.createElement("textPath",{xlinkHref:"#".concat(A)},r))},vG=(e,t,r)=>{var{cx:n,cy:s,innerRadius:i,outerRadius:l,startAngle:u,endAngle:d}=e,m=(u+d)/2;if(r==="outside"){var{x:f,y:p}=ss(n,s,l+t,m);return{x:f,y:p,textAnchor:f>=n?"start":"end",verticalAnchor:"middle"}}if(r==="center")return{x:n,y:s,textAnchor:"middle",verticalAnchor:"middle"};if(r==="centerTop")return{x:n,y:s,textAnchor:"middle",verticalAnchor:"start"};if(r==="centerBottom")return{x:n,y:s,textAnchor:"middle",verticalAnchor:"end"};var y=(i+l)/2,{x,y:j}=ss(n,s,y,m);return{x,y:j,textAnchor:"middle",verticalAnchor:"middle"}},Q0=e=>"cx"in e&&mt(e.cx),xG=(e,t)=>{var{parentViewBox:r,offset:n,position:s}=e,i;r!=null&&!Q0(r)&&(i=r);var{x:l,y:u,upperWidth:d,lowerWidth:m,height:f}=t,p=l,y=l+(d-m)/2,x=(p+y)/2,j=(d+m)/2,b=p+d/2,k=f>=0?1:-1,_=k*n,E=k>0?"end":"start",C=k>0?"start":"end",O=d>=0?1:-1,T=O*n,A=O>0?"end":"start",L=O>0?"start":"end";if(s==="top"){var J={x:p+d/2,y:u-_,textAnchor:"middle",verticalAnchor:E};return Qr(Qr({},J),i?{height:Math.max(u-i.y,0),width:d}:{})}if(s==="bottom"){var H={x:y+m/2,y:u+f+_,textAnchor:"middle",verticalAnchor:C};return Qr(Qr({},H),i?{height:Math.max(i.y+i.height-(u+f),0),width:m}:{})}if(s==="left"){var me={x:x-T,y:u+f/2,textAnchor:A,verticalAnchor:"middle"};return Qr(Qr({},me),i?{width:Math.max(me.x-i.x,0),height:f}:{})}if(s==="right"){var Z={x:x+j+T,y:u+f/2,textAnchor:L,verticalAnchor:"middle"};return Qr(Qr({},Z),i?{width:Math.max(i.x+i.width-Z.x,0),height:f}:{})}var K=i?{width:j,height:f}:{};return s==="insideLeft"?Qr({x:x+T,y:u+f/2,textAnchor:L,verticalAnchor:"middle"},K):s==="insideRight"?Qr({x:x+j-T,y:u+f/2,textAnchor:A,verticalAnchor:"middle"},K):s==="insideTop"?Qr({x:p+d/2,y:u+_,textAnchor:"middle",verticalAnchor:C},K):s==="insideBottom"?Qr({x:y+m/2,y:u+f-_,textAnchor:"middle",verticalAnchor:E},K):s==="insideTopLeft"?Qr({x:p+T,y:u+_,textAnchor:L,verticalAnchor:C},K):s==="insideTopRight"?Qr({x:p+d-T,y:u+_,textAnchor:A,verticalAnchor:C},K):s==="insideBottomLeft"?Qr({x:y+T,y:u+f-_,textAnchor:L,verticalAnchor:E},K):s==="insideBottomRight"?Qr({x:y+m-T,y:u+f-_,textAnchor:A,verticalAnchor:E},K):s&&typeof s=="object"&&(mt(s.x)||Ga(s.x))&&(mt(s.y)||Ga(s.y))?Qr({x:l+Qi(s.x,j),y:u+Qi(s.y,f),textAnchor:"end",verticalAnchor:"end"},K):Qr({x:b,y:u+f/2,textAnchor:"middle",verticalAnchor:"middle"},K)},wG={offset:5,zIndex:Ls.label};function Oo(e){var t=Ci(e,wG),{viewBox:r,position:n,value:s,children:i,content:l,className:u="",textBreakAll:d,labelRef:m}=t,f=mG(),p=X4(),y=n==="center"?p:f??p,x,j,b;if(r==null?x=y:Q0(r)?x=r:x=dP(r),!x||Hn(s)&&Hn(i)&&!v.isValidElement(l)&&typeof l!="function")return null;var k=Qr(Qr({},t),{},{viewBox:x});if(v.isValidElement(l)){var{labelRef:_}=k,E=oG(k,aG);return v.cloneElement(l,E)}if(typeof l=="function"){if(j=v.createElement(l,k),v.isValidElement(j))return j}else j=pG(t);var C=Si(t);if(Q0(x)){if(n==="insideStart"||n==="insideEnd"||n==="end")return yG(t,n,j,C,x);b=vG(x,t.offset,t.position)}else b=xG(t,x);return v.createElement(Vo,{zIndex:t.zIndex},v.createElement(Qw,Fa({ref:m,className:Nr("recharts-label",u)},C,b,{textAnchor:tG(C.textAnchor)?C.textAnchor:b.textAnchor,breakAll:d}),j))}Oo.displayName="Label";var bG=(e,t,r)=>{if(!e)return null;var n={viewBox:t,labelRef:r};return e===!0?v.createElement(Oo,Fa({key:"label-implicit"},n)):va(e)?v.createElement(Oo,Fa({key:"label-implicit",value:e},n)):v.isValidElement(e)?e.type===Oo?v.cloneElement(e,Qr({key:"label-implicit"},n)):v.createElement(Oo,Fa({key:"label-implicit",content:e},n)):Zw(e)?v.createElement(Oo,Fa({key:"label-implicit",content:e},n)):e&&typeof e=="object"?v.createElement(Oo,Fa({},e,{key:"label-implicit"},n)):null};function jG(e){var{label:t,labelRef:r}=e,n=X4();return bG(t,n,r)||null}var Sv={},kv={},j2;function SG(){return j2||(j2=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r[r.length-1]}e.last=t})(kv)),kv}var Nv={},S2;function kG(){return S2||(S2=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return Array.isArray(r)?r:Array.from(r)}e.toArray=t})(Nv)),Nv}var k2;function NG(){return k2||(k2=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=SG(),r=kG(),n=Bx();function s(i){if(n.isArrayLike(i))return t.last(r.toArray(i))}e.last=s})(Sv)),Sv}var _v,N2;function _G(){return N2||(N2=1,_v=NG().last),_v}var CG=_G();const EG=Zi(CG);var AG=["valueAccessor"],PG=["dataKey","clockWise","id","textBreakAll","zIndex"];function cm(){return cm=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},cm.apply(null,arguments)}function _2(e,t){if(e==null)return{};var r,n,s=OG(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function OG(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var TG=e=>Array.isArray(e.value)?EG(e.value):e.value,Q4=v.createContext(void 0),IG=Q4.Provider,Z4=v.createContext(void 0);Z4.Provider;function DG(){return v.useContext(Q4)}function RG(){return v.useContext(Z4)}function gh(e){var{valueAccessor:t=TG}=e,r=_2(e,AG),{dataKey:n,clockWise:s,id:i,textBreakAll:l,zIndex:u}=r,d=_2(r,PG),m=DG(),f=RG(),p=m||f;return!p||!p.length?null:v.createElement(Vo,{zIndex:u??Ls.label},v.createElement(Ka,{className:"recharts-label-list"},p.map((y,x)=>{var j,b=Hn(n)?t(y,x):bs(y&&y.payload,n),k=Hn(i)?{}:{id:"".concat(i,"-").concat(x)};return v.createElement(Oo,cm({key:"label-".concat(x)},Si(y),d,k,{fill:(j=r.fill)!==null&&j!==void 0?j:y.fill,parentViewBox:y.parentViewBox,value:b,textBreakAll:l,viewBox:y.viewBox,index:x,zIndex:0}))})))}gh.displayName="LabelList";function $G(e){var{label:t}=e;return t?t===!0?v.createElement(gh,{key:"labelList-implicit"}):v.isValidElement(t)||Zw(t)?v.createElement(gh,{key:"labelList-implicit",content:t}):typeof t=="object"?v.createElement(gh,cm({key:"labelList-implicit"},t,{type:String(t.type)})):null:null}var MG={radiusAxis:{},angleAxis:{}},eT=Us({name:"polarAxis",initialState:MG,reducers:{addRadiusAxis(e,t){e.radiusAxis[t.payload.id]=t.payload},removeRadiusAxis(e,t){delete e.radiusAxis[t.payload.id]},addAngleAxis(e,t){e.angleAxis[t.payload.id]=t.payload},removeAngleAxis(e,t){delete e.angleAxis[t.payload.id]}}}),{addRadiusAxis:yee,removeRadiusAxis:vee,addAngleAxis:xee,removeAngleAxis:wee}=eT.actions,FG=eT.reducer,Cv={exports:{}},nr={};/**
 * @license React
 * react-is.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var C2;function LG(){if(C2)return nr;C2=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),i=Symbol.for("react.consumer"),l=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),m=Symbol.for("react.suspense_list"),f=Symbol.for("react.memo"),p=Symbol.for("react.lazy"),y=Symbol.for("react.view_transition"),x=Symbol.for("react.client.reference");function j(b){if(typeof b=="object"&&b!==null){var k=b.$$typeof;switch(k){case e:switch(b=b.type,b){case r:case s:case n:case d:case m:case y:return b;default:switch(b=b&&b.$$typeof,b){case l:case u:case p:case f:return b;case i:return b;default:return k}}case t:return k}}}return nr.ContextConsumer=i,nr.ContextProvider=l,nr.Element=e,nr.ForwardRef=u,nr.Fragment=r,nr.Lazy=p,nr.Memo=f,nr.Portal=t,nr.Profiler=s,nr.StrictMode=n,nr.Suspense=d,nr.SuspenseList=m,nr.isContextConsumer=function(b){return j(b)===i},nr.isContextProvider=function(b){return j(b)===l},nr.isElement=function(b){return typeof b=="object"&&b!==null&&b.$$typeof===e},nr.isForwardRef=function(b){return j(b)===u},nr.isFragment=function(b){return j(b)===r},nr.isLazy=function(b){return j(b)===p},nr.isMemo=function(b){return j(b)===f},nr.isPortal=function(b){return j(b)===t},nr.isProfiler=function(b){return j(b)===s},nr.isStrictMode=function(b){return j(b)===n},nr.isSuspense=function(b){return j(b)===d},nr.isSuspenseList=function(b){return j(b)===m},nr.isValidElementType=function(b){return typeof b=="string"||typeof b=="function"||b===r||b===s||b===n||b===d||b===m||typeof b=="object"&&b!==null&&(b.$$typeof===p||b.$$typeof===f||b.$$typeof===l||b.$$typeof===i||b.$$typeof===u||b.$$typeof===x||b.getModuleId!==void 0)},nr.typeOf=j,nr}var E2;function zG(){return E2||(E2=1,Cv.exports=LG()),Cv.exports}var UG=zG(),A2=e=>typeof e=="string"?e:e?e.displayName||e.name||"Component":"",P2=null,Ev=null,tT=e=>{if(e===P2&&Array.isArray(Ev))return Ev;var t=[];return v.Children.forEach(e,r=>{Hn(r)||(UG.isFragment(r)?t=t.concat(tT(r.props.children)):t.push(r))}),Ev=t,P2=e,t};function BG(e,t){var r=[],n=[];return Array.isArray(t)?n=t.map(s=>A2(s)):n=[A2(t)],tT(e).forEach(s=>{var i=Rc(s,"type.displayName")||Rc(s,"type.name");i&&n.indexOf(i)!==-1&&r.push(s)}),r}var Av={},O2;function WG(){return O2||(O2=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){var s;if(typeof r!="object"||r==null)return!1;if(Object.getPrototypeOf(r)===null)return!0;if(Object.prototype.toString.call(r)!=="[object Object]"){const i=r[Symbol.toStringTag];return i==null||!((s=Object.getOwnPropertyDescriptor(r,Symbol.toStringTag))!=null&&s.writable)?!1:r.toString()===`[object ${i}]`}let n=r;for(;Object.getPrototypeOf(n)!==null;)n=Object.getPrototypeOf(n);return Object.getPrototypeOf(r)===n}e.isPlainObject=t})(Av)),Av}var Pv,T2;function qG(){return T2||(T2=1,Pv=WG().isPlainObject),Pv}var VG=qG();const HG=Zi(VG);function I2(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function D2(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?I2(Object(r),!0).forEach(function(n){KG(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):I2(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function KG(e,t,r){return(t=GG(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function GG(e){var t=YG(e,"string");return typeof t=="symbol"?t:t+""}function YG(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function um(){return um=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},um.apply(null,arguments)}var R2=(e,t,r,n,s)=>{var i=r-n,l;return l="M ".concat(e,",").concat(t),l+="L ".concat(e+r,",").concat(t),l+="L ".concat(e+r-i/2,",").concat(t+s),l+="L ".concat(e+r-i/2-n,",").concat(t+s),l+="L ".concat(e,",").concat(t," Z"),l},JG={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},XG=e=>{var t=Ci(e,JG),{x:r,y:n,upperWidth:s,lowerWidth:i,height:l,className:u}=t,{animationEasing:d,animationDuration:m,animationBegin:f,isUpdateAnimationActive:p}=t,y=v.useRef(null),[x,j]=v.useState(-1),b=v.useRef(s),k=v.useRef(i),_=v.useRef(l),E=v.useRef(r),C=v.useRef(n),O=Qx(e,"trapezoid-");if(v.useEffect(()=>{if(y.current&&y.current.getTotalLength)try{var z=y.current.getTotalLength();z&&j(z)}catch{}},[]),r!==+r||n!==+n||s!==+s||i!==+i||l!==+l||s===0&&i===0||l===0)return null;var T=Nr("recharts-trapezoid",u);if(!p)return v.createElement("g",null,v.createElement("path",um({},Si(t),{className:T,d:R2(r,n,s,i,l)})));var A=b.current,L=k.current,J=_.current,H=E.current,me=C.current,Z="0px ".concat(x===-1?1:x,"px"),K="".concat(x,"px 0px"),ce=pP(["strokeDasharray"],m,d);return v.createElement(Xx,{animationId:O,key:O,canBegin:x>0,duration:m,easing:d,isActive:p,begin:f},z=>{var se=rs(A,s,z),B=rs(L,i,z),ue=rs(J,l,z),oe=rs(H,r,z),X=rs(me,n,z);y.current&&(b.current=se,k.current=B,_.current=ue,E.current=oe,C.current=X);var ee=z>0?{transition:ce,strokeDasharray:K}:{strokeDasharray:Z};return v.createElement("path",um({},Si(t),{className:T,d:R2(oe,X,se,B,ue),ref:y,style:D2(D2({},ee),t.style)}))})},QG=["option","shapeType","propTransformer","activeClassName","isActive"];function ZG(e,t){if(e==null)return{};var r,n,s=eY(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function eY(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function $2(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function dm(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?$2(Object(r),!0).forEach(function(n){tY(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):$2(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function tY(e,t,r){return(t=rY(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function rY(e){var t=nY(e,"string");return typeof t=="symbol"?t:t+""}function nY(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function sY(e,t){return dm(dm({},t),e)}function iY(e,t){return e==="symbols"}function M2(e){var{shapeType:t,elementProps:r}=e;switch(t){case"rectangle":return v.createElement(xP,r);case"trapezoid":return v.createElement(XG,r);case"sector":return v.createElement(jP,r);case"symbols":if(iY(t))return v.createElement(vA,r);break;case"curve":return v.createElement(mP,r);default:return null}}function aY(e){return v.isValidElement(e)?e.props:e}function oY(e){var{option:t,shapeType:r,propTransformer:n=sY,activeClassName:s="recharts-active-shape",isActive:i}=e,l=ZG(e,QG),u;if(v.isValidElement(t))u=v.cloneElement(t,dm(dm({},l),aY(t)));else if(typeof t=="function")u=t(l);else if(HG(t)&&typeof t!="boolean"){var d=n(t,l);u=v.createElement(M2,{shapeType:r,elementProps:d})}else{var m=l;u=v.createElement(M2,{shapeType:r,elementProps:m})}return i?v.createElement(Ka,{className:s},u):u}var rT=(e,t)=>{var r=rn();return(n,s)=>i=>{e==null||e(n,s,i),r(g4({activeIndex:String(s),activeDataKey:t,activeCoordinate:n.tooltipPosition}))}},nT=e=>{var t=rn();return(r,n)=>s=>{e==null||e(r,n,s),t(TV())}},sT=(e,t)=>{var r=rn();return(n,s)=>i=>{e==null||e(n,s,i),r(IV({activeIndex:String(s),activeDataKey:t,activeCoordinate:n.tooltipPosition}))}};function lY(e){var{fn:t,args:r}=e,n=rn(),s=li();return v.useLayoutEffect(()=>{if(!s){var i=t(r);return n(AV(i)),()=>{n(PV(i))}}},[t,r,n,s]),null}function cY(e){var{legendPayload:t}=e,r=rn(),n=li();return v.useLayoutEffect(()=>n?Xc:(r(uB(t)),()=>{r(dB(t))}),[r,n,t]),null}var Ov,uY=()=>{var[e]=v.useState(()=>ud("uid-"));return e},dY=(Ov=dD.useId)!==null&&Ov!==void 0?Ov:uY;function iT(e,t){var r=dY();return t||(e?"".concat(e,"-").concat(r):r)}var fY=v.createContext(void 0),hY=e=>{var{id:t,type:r,children:n}=e,s=iT("recharts-".concat(r),t);return v.createElement(fY.Provider,{value:s},n(s))},mY={cartesianItems:[],polarItems:[]},aT=Us({name:"graphicalItems",initialState:mY,reducers:{addCartesianGraphicalItem:{reducer(e,t){e.cartesianItems.push(t.payload)},prepare:En()},replaceCartesianGraphicalItem:{reducer(e,t){var{prev:r,next:n}=t.payload,s=Wa(e).cartesianItems.indexOf(r);s>-1&&(e.cartesianItems[s]=n)},prepare:En()},removeCartesianGraphicalItem:{reducer(e,t){var r=Wa(e).cartesianItems.indexOf(t.payload);r>-1&&e.cartesianItems.splice(r,1)},prepare:En()},addPolarGraphicalItem:{reducer(e,t){e.polarItems.push(t.payload)},prepare:En()},removePolarGraphicalItem:{reducer(e,t){var r=Wa(e).polarItems.indexOf(t.payload);r>-1&&e.polarItems.splice(r,1)},prepare:En()}}}),{addCartesianGraphicalItem:pY,replaceCartesianGraphicalItem:gY,removeCartesianGraphicalItem:yY,addPolarGraphicalItem:bee,removePolarGraphicalItem:jee}=aT.actions,vY=aT.reducer;function xY(e){var t=rn(),r=v.useRef(null);return v.useLayoutEffect(()=>{r.current===null?t(pY(e)):r.current!==e&&t(gY({prev:r.current,next:e})),r.current=e},[t,e]),v.useLayoutEffect(()=>()=>{r.current&&(t(yY(r.current)),r.current=null)},[t]),null}function F2(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function L2(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?F2(Object(r),!0).forEach(function(n){wY(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):F2(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function wY(e,t,r){return(t=bY(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function bY(e){var t=jY(e,"string");return typeof t=="symbol"?t:t+""}function jY(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var SY={xAxis:{},yAxis:{},zAxis:{}},oT=Us({name:"cartesianAxis",initialState:SY,reducers:{addXAxis:{reducer(e,t){e.xAxis[t.payload.id]=t.payload},prepare:En()},removeXAxis:{reducer(e,t){delete e.xAxis[t.payload.id]},prepare:En()},addYAxis:{reducer(e,t){e.yAxis[t.payload.id]=t.payload},prepare:En()},removeYAxis:{reducer(e,t){delete e.yAxis[t.payload.id]},prepare:En()},addZAxis:{reducer(e,t){e.zAxis[t.payload.id]=t.payload},prepare:En()},removeZAxis:{reducer(e,t){delete e.zAxis[t.payload.id]},prepare:En()},updateYAxisWidth(e,t){var{id:r,width:n}=t.payload,s=e.yAxis[r];if(s){var i=s.widthHistory||[];if(i.length===3&&i[0]===i[2]&&n===i[1]&&n!==s.width&&Math.abs(n-i[0])<=1)return;var l=[...i,n].slice(-3);e.yAxis[r]=L2(L2({},e.yAxis[r]),{},{width:n,widthHistory:l})}}}}),{addXAxis:kY,removeXAxis:NY,addYAxis:_Y,removeYAxis:CY,addZAxis:See,removeZAxis:kee,updateYAxisWidth:EY}=oT.actions,AY=oT.reducer,PY=xe([Kn],e=>({top:e.top,bottom:e.bottom,left:e.left,right:e.right})),OY=xe([PY,ro,no],(e,t,r)=>{if(!(!e||t==null||r==null))return{x:e.left,y:e.top,width:Math.max(0,t-e.left-e.right),height:Math.max(0,r-e.top-e.bottom)}}),lT=()=>at(OY),TY="Invariant failed";function IY(e,t){throw new Error(TY)}var DY=["x","y"];function Z0(){return Z0=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Z0.apply(null,arguments)}function z2(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Wu(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?z2(Object(r),!0).forEach(function(n){RY(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):z2(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function RY(e,t,r){return(t=$Y(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function $Y(e){var t=MY(e,"string");return typeof t=="symbol"?t:t+""}function MY(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function FY(e,t){if(e==null)return{};var r,n,s=LY(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function LY(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function zY(e,t){var{x:r,y:n}=e,s=FY(e,DY),i="".concat(r),l=parseInt(i,10),u="".concat(n),d=parseInt(u,10),m="".concat(t.height||s.height),f=parseInt(m,10),p="".concat(t.width||s.width),y=parseInt(p,10);return Wu(Wu(Wu(Wu(Wu({},t),s),l?{x:l}:{}),d?{y:d}:{}),{},{height:f,width:y,name:t.name,radius:t.radius})}function fm(e){return v.createElement(oY,Z0({shapeType:"rectangle",propTransformer:zY,activeClassName:"recharts-active-bar"},e))}var UY=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return(n,s)=>{if(mt(t))return t;var i=mt(n)||Hn(n);return i?t(n,s):(i||IY(),r)}},BY={},cT=Us({name:"errorBars",initialState:BY,reducers:{addErrorBar:(e,t)=>{var{itemId:r,errorBar:n}=t.payload;e[r]||(e[r]=[]),e[r].push(n)},replaceErrorBar:(e,t)=>{var{itemId:r,prev:n,next:s}=t.payload;e[r]&&(e[r]=e[r].map(i=>i.dataKey===n.dataKey&&i.direction===n.direction?s:i))},removeErrorBar:(e,t)=>{var{itemId:r,errorBar:n}=t.payload;e[r]&&(e[r]=e[r].filter(s=>s.dataKey!==n.dataKey||s.direction!==n.direction))}}}),{addErrorBar:Nee,replaceErrorBar:_ee,removeErrorBar:Cee}=cT.actions,WY=cT.reducer,qY=["children"];function VY(e,t){if(e==null)return{};var r,n,s=HY(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function HY(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var KY={data:[],xAxisId:"xAxis-0",yAxisId:"yAxis-0",dataPointFormatter:()=>({x:0,y:0,value:0}),errorBarOffset:0},GY=v.createContext(KY);function YY(e){var{children:t}=e,r=VY(e,qY);return v.createElement(GY.Provider,{value:r},t)}function uT(e,t){var r,n,s=at(m=>io(m,e)),i=at(m=>ao(m,t)),l=(r=s==null?void 0:s.allowDataOverflow)!==null&&r!==void 0?r:Js.allowDataOverflow,u=(n=i==null?void 0:i.allowDataOverflow)!==null&&n!==void 0?n:Xs.allowDataOverflow,d=l||u;return{needClip:d,needClipX:l,needClipY:u}}function JY(e){var{xAxisId:t,yAxisId:r,clipPathId:n}=e,s=lT(),{needClipX:i,needClipY:l,needClip:u}=uT(t,r);if(!u||!s)return null;var{x:d,y:m,width:f,height:p}=s;return v.createElement("clipPath",{id:"clipPath-".concat(n)},v.createElement("rect",{x:i?d:d-f/2,y:l?m:m-p/2,width:i?f:f*2,height:l?p:p*2}))}function XY(e,t){return e&&typeof e=="object"&&"zIndex"in e&&typeof e.zIndex=="number"&&tn(e.zIndex)?e.zIndex:t}var QY=["onMouseEnter","onMouseLeave","onClick"],ZY=["value","background","tooltipPosition"],eJ=["id"],tJ=["onMouseEnter","onClick","onMouseLeave"];function eo(){return eo=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},eo.apply(null,arguments)}function U2(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function xs(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?U2(Object(r),!0).forEach(function(n){rJ(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):U2(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function rJ(e,t,r){return(t=nJ(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function nJ(e){var t=sJ(e,"string");return typeof t=="symbol"?t:t+""}function sJ(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function hm(e,t){if(e==null)return{};var r,n,s=iJ(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function iJ(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var aJ=e=>{var{dataKey:t,name:r,fill:n,legendType:s,hide:i}=e;return[{inactive:i,dataKey:t,type:s,color:n,value:aP(r,t),payload:e}]};function oJ(e){var{dataKey:t,stroke:r,strokeWidth:n,fill:s,name:i,hide:l,unit:u}=e;return{dataDefinedOnItem:void 0,positions:void 0,settings:{stroke:r,strokeWidth:n,fill:s,dataKey:t,nameKey:void 0,name:aP(i,t),hide:l,type:e.tooltipType,color:e.fill,unit:u}}}function lJ(e){var t=at(Uc),{data:r,dataKey:n,background:s,allOtherBarProps:i}=e,{onMouseEnter:l,onMouseLeave:u,onClick:d}=i,m=hm(i,QY),f=rT(l,n),p=nT(u),y=sT(d,n);if(!s||r==null)return null;var x=Dx(s);return v.createElement(Vo,{zIndex:XY(s,Ls.barBackground)},r.map((j,b)=>{var{value:k,background:_,tooltipPosition:E}=j,C=hm(j,ZY);if(!_)return null;var O=f(j,b),T=p(j,b),A=y(j,b),L=xs(xs(xs(xs(xs({option:s,isActive:String(b)===t},C),{},{fill:"#eee"},_),x),Ux(m,j,b)),{},{onMouseEnter:O,onMouseLeave:T,onClick:A,dataKey:n,index:b,className:"recharts-bar-background-rectangle"});return v.createElement(fm,eo({key:"background-bar-".concat(b)},L))}))}function cJ(e){var{showLabels:t,children:r,rects:n}=e,s=n==null?void 0:n.map(i=>{var l={x:i.x,y:i.y,width:i.width,lowerWidth:i.width,upperWidth:i.width,height:i.height};return xs(xs({},l),{},{value:i.value,payload:i.payload,parentViewBox:i.parentViewBox,viewBox:l,fill:i.fill})});return v.createElement(IG,{value:t?s:void 0},r)}function uJ(e){var{shape:t,activeBar:r,baseProps:n,entry:s,index:i,dataKey:l}=e,u=at(Uc),d=at(O4),m=r&&String(i)===u&&(d==null||l===d),f=m?r:t;return m?v.createElement(Vo,{zIndex:Ls.activeBar},v.createElement(fm,eo({},n,{name:String(n.name)},s,{isActive:m,option:f,index:i,dataKey:l}))):v.createElement(fm,eo({},n,{name:String(n.name)},s,{isActive:m,option:f,index:i,dataKey:l}))}function dJ(e){var{shape:t,baseProps:r,entry:n,index:s,dataKey:i}=e;return v.createElement(fm,eo({},r,{name:String(r.name)},n,{isActive:!1,option:t,index:s,dataKey:i}))}function fJ(e){var t,{data:r,props:n}=e,s=(t=Fo(n))!==null&&t!==void 0?t:{},{id:i}=s,l=hm(s,eJ),{shape:u,dataKey:d,activeBar:m}=n,{onMouseEnter:f,onClick:p,onMouseLeave:y}=n,x=hm(n,tJ),j=rT(f,d),b=nT(y),k=sT(p,d);return r?v.createElement(v.Fragment,null,r.map((_,E)=>v.createElement(Ka,eo({key:"rectangle-".concat(_==null?void 0:_.x,"-").concat(_==null?void 0:_.y,"-").concat(_==null?void 0:_.value,"-").concat(E),className:"recharts-bar-rectangle"},Ux(x,_,E),{onMouseEnter:j(_,E),onMouseLeave:b(_,E),onClick:k(_,E)}),m?v.createElement(uJ,{shape:u,activeBar:m,baseProps:l,entry:_,index:E,dataKey:d}):v.createElement(dJ,{shape:u,baseProps:l,entry:_,index:E,dataKey:d})))):null}function hJ(e){var{props:t,previousRectanglesRef:r}=e,{data:n,layout:s,isAnimationActive:i,animationBegin:l,animationDuration:u,animationEasing:d,onAnimationEnd:m,onAnimationStart:f}=t,p=r.current,y=Qx(t,"recharts-bar-"),[x,j]=v.useState(!1),b=!x,k=v.useCallback(()=>{typeof m=="function"&&m(),j(!1)},[m]),_=v.useCallback(()=>{typeof f=="function"&&f(),j(!0)},[f]);return v.createElement(cJ,{showLabels:b,rects:n},v.createElement(Xx,{animationId:y,begin:l,duration:u,isActive:i,easing:d,onAnimationEnd:k,onAnimationStart:_,key:y},E=>{var C=E===1?n:n==null?void 0:n.map((O,T)=>{var A=p&&p[T];if(A)return xs(xs({},O),{},{x:rs(A.x,O.x,E),y:rs(A.y,O.y,E),width:rs(A.width,O.width,E),height:rs(A.height,O.height,E)});if(s==="horizontal"){var L=rs(0,O.height,E),J=rs(O.stackedBarStart,O.y,E);return xs(xs({},O),{},{y:J,height:L})}var H=rs(0,O.width,E),me=rs(O.stackedBarStart,O.x,E);return xs(xs({},O),{},{width:H,x:me})});return E>0&&(r.current=C??null),C==null?null:v.createElement(Ka,null,v.createElement(fJ,{props:t,data:C}))}),v.createElement($G,{label:t.label}),t.children)}function mJ(e){var t=v.useRef(null);return v.createElement(hJ,{previousRectanglesRef:t,props:e})}var dT=0,pJ=(e,t)=>{var r=Array.isArray(e.value)?e.value[1]:e.value;return{x:e.x,y:e.y,value:r,errorVal:bs(e,t)}};class gJ extends v.PureComponent{render(){var{hide:t,data:r,dataKey:n,className:s,xAxisId:i,yAxisId:l,needClip:u,background:d,id:m}=this.props;if(t||r==null)return null;var f=Nr("recharts-bar",s),p=m;return v.createElement(Ka,{className:f,id:m},u&&v.createElement("defs",null,v.createElement(JY,{clipPathId:p,xAxisId:i,yAxisId:l})),v.createElement(Ka,{className:"recharts-bar-rectangles",clipPath:u?"url(#clipPath-".concat(p,")"):void 0},v.createElement(lJ,{data:r,dataKey:n,background:d,allOtherBarProps:this.props}),v.createElement(mJ,this.props)))}}var yJ={activeBar:!1,animationBegin:0,animationDuration:400,animationEasing:"ease",hide:!1,isAnimationActive:!Qc.isSsr,legendType:"rect",minPointSize:dT,xAxisId:0,yAxisId:0,zIndex:Ls.bar};function vJ(e){var{xAxisId:t,yAxisId:r,hide:n,legendType:s,minPointSize:i,activeBar:l,animationBegin:u,animationDuration:d,animationEasing:m,isAnimationActive:f}=e,{needClip:p}=uT(t,r),y=Vm(),x=li(),j=BG(e.children,Xw),b=at(E=>HJ(E,t,r,x,e.id,j));if(y!=="vertical"&&y!=="horizontal")return null;var k,_=b==null?void 0:b[0];return _==null||_.height==null||_.width==null?k=0:k=y==="vertical"?_.height/2:_.width/2,v.createElement(YY,{xAxisId:t,yAxisId:r,data:b,dataPointFormatter:pJ,errorBarOffset:k},v.createElement(gJ,eo({},e,{layout:y,needClip:p,data:b,xAxisId:t,yAxisId:r,hide:n,legendType:s,minPointSize:i,activeBar:l,animationBegin:u,animationDuration:d,animationEasing:m,isAnimationActive:f})))}function xJ(e){var{layout:t,barSettings:{dataKey:r,minPointSize:n},pos:s,bandSize:i,xAxis:l,yAxis:u,xAxisTicks:d,yAxisTicks:m,stackedData:f,displayedData:p,offset:y,cells:x,parentViewBox:j,dataStartIndex:b}=e,k=t==="horizontal"?u:l,_=f?k.scale.domain():null,E=bU({numericAxis:k}),C=k.scale(E);return p.map((O,T)=>{var A,L,J,H,me,Z;f?A=pU(f[T+b],_):(A=bs(O,r),Array.isArray(A)||(A=[E,A]));var K=UY(n,dT)(A[1],T);if(t==="horizontal"){var ce,[z,se]=[u.scale(A[0]),u.scale(A[1])];L=jN({axis:l,ticks:d,bandSize:i,offset:s.offset,entry:O,index:T}),J=(ce=se??z)!==null&&ce!==void 0?ce:void 0,H=s.size;var B=z-se;if(me=ya(B)?0:B,Z={x:L,y:y.top,width:H,height:y.height},Math.abs(K)>0&&Math.abs(me)<Math.abs(K)){var ue=ni(me||K)*(Math.abs(K)-Math.abs(me));J-=ue,me+=ue}}else{var[oe,X]=[l.scale(A[0]),l.scale(A[1])];if(L=oe,J=jN({axis:u,ticks:m,bandSize:i,offset:s.offset,entry:O,index:T}),H=X-oe,me=s.size,Z={x:y.left,y:J,width:y.width,height:me},Math.abs(K)>0&&Math.abs(H)<Math.abs(K)){var ee=ni(H||K)*(Math.abs(K)-Math.abs(H));H+=ee}}if(L==null||J==null||H==null||me==null)return null;var D=xs(xs({},O),{},{stackedBarStart:C,x:L,y:J,width:H,height:me,value:f?A:A[1],payload:O,background:Z,tooltipPosition:{x:L+H/2,y:J+me/2},parentViewBox:j},x&&x[T]&&x[T].props);return D}).filter(Boolean)}function wJ(e){var t=Ci(e,yJ),r=li();return v.createElement(hY,{id:t.id,type:"bar"},n=>v.createElement(v.Fragment,null,v.createElement(cY,{legendPayload:aJ(t)}),v.createElement(lY,{fn:oJ,args:t}),v.createElement(xY,{type:"bar",id:n,data:void 0,xAxisId:t.xAxisId,yAxisId:t.yAxisId,zAxisId:0,dataKey:t.dataKey,stackId:wU(t.stackId),hide:t.hide,barSize:t.barSize,minPointSize:t.minPointSize,maxBarSize:t.maxBarSize,isPanorama:r}),v.createElement(Vo,{zIndex:t.zIndex},v.createElement(vJ,eo({},t,{id:n})))))}var fT=v.memo(wJ);fT.displayName="Bar";function B2(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function ah(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?B2(Object(r),!0).forEach(function(n){bJ(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):B2(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function bJ(e,t,r){return(t=jJ(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function jJ(e){var t=SJ(e,"string");return typeof t=="symbol"?t:t+""}function SJ(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var kJ=(e,t)=>t,NJ=(e,t,r)=>r,_J=(e,t,r,n)=>n,CJ=(e,t,r,n,s)=>s,Wd=xe([Iw,CJ],(e,t)=>e.filter(r=>r.type==="bar").find(r=>r.id===t)),EJ=xe([Wd],e=>e==null?void 0:e.maxBarSize),AJ=(e,t,r,n,s,i)=>i,W2=(e,t,r)=>{var n=r??e;if(!Hn(n))return Qi(n,t,0)},PJ=xe([er,Iw,kJ,NJ,_J],(e,t,r,n,s)=>t.filter(i=>e==="horizontal"?i.xAxisId===r:i.yAxisId===n).filter(i=>i.isPanorama===s).filter(i=>i.hide===!1).filter(i=>i.type==="bar")),OJ=(e,t,r,n)=>{var s=er(e);return s==="horizontal"?H0(e,"yAxis",r,n):H0(e,"xAxis",t,n)},TJ=(e,t,r)=>{var n=er(e);return n==="horizontal"?G_(e,"xAxis",t):G_(e,"yAxis",r)},IJ=(e,t,r)=>{var n={},s=e.filter(sp),i=e.filter(m=>m.stackId==null),l=s.reduce((m,f)=>(m[f.stackId]||(m[f.stackId]=[]),m[f.stackId].push(f),m),n),u=Object.entries(l).map(m=>{var[f,p]=m,y=p.map(j=>j.dataKey),x=W2(t,r,p[0].barSize);return{stackId:f,dataKeys:y,barSize:x}}),d=i.map(m=>{var f=[m.dataKey].filter(y=>y!=null),p=W2(t,r,m.barSize);return{stackId:void 0,dataKeys:f,barSize:p}});return[...u,...d]},DJ=xe([PJ,jq,TJ],IJ),RJ=(e,t,r,n,s)=>{var i,l,u=Wd(e,t,r,n,s);if(u!=null){var d=er(e),m=xO(e),{maxBarSize:f}=u,p=Hn(f)?m:f,y,x;return d==="horizontal"?(y=zc(e,"xAxis",t,n),x=Lc(e,"xAxis",t,n)):(y=zc(e,"yAxis",r,n),x=Lc(e,"yAxis",r,n)),(i=(l=qh(y,x,!0))!==null&&l!==void 0?l:p)!==null&&i!==void 0?i:0}},hT=(e,t,r,n)=>{var s=er(e),i,l;return s==="horizontal"?(i=zc(e,"xAxis",t,n),l=Lc(e,"xAxis",t,n)):(i=zc(e,"yAxis",r,n),l=Lc(e,"yAxis",r,n)),qh(i,l)};function $J(e,t,r,n,s){var i=n.length;if(!(i<1)){var l=Qi(e,r,0,!0),u,d=[];if(tn(n[0].barSize)){var m=!1,f=r/i,p=n.reduce((_,E)=>_+(E.barSize||0),0);p+=(i-1)*l,p>=r&&(p-=(i-1)*l,l=0),p>=r&&f>0&&(m=!0,f*=.9,p=i*f);var y=(r-p)/2>>0,x={offset:y-l,size:0};u=n.reduce((_,E)=>{var C,O={stackId:E.stackId,dataKeys:E.dataKeys,position:{offset:x.offset+x.size+l,size:m?f:(C=E.barSize)!==null&&C!==void 0?C:0}},T=[..._,O];return x=T[T.length-1].position,T},d)}else{var j=Qi(t,r,0,!0);r-2*j-(i-1)*l<=0&&(l=0);var b=(r-2*j-(i-1)*l)/i;b>1&&(b>>=0);var k=tn(s)?Math.min(b,s):b;u=n.reduce((_,E,C)=>[..._,{stackId:E.stackId,dataKeys:E.dataKeys,position:{offset:j+(b+l)*C+(b-k)/2,size:k}}],d)}return u}}var MJ=(e,t,r,n,s,i,l)=>{var u=Hn(l)?t:l,d=$J(r,n,s!==i?s:i,e,u);return s!==i&&d!=null&&(d=d.map(m=>ah(ah({},m),{},{position:ah(ah({},m.position),{},{offset:m.position.offset-s/2})}))),d},FJ=xe([DJ,xO,bq,wO,RJ,hT,EJ],MJ),LJ=(e,t,r,n)=>zc(e,"xAxis",t,n),zJ=(e,t,r,n)=>zc(e,"yAxis",r,n),UJ=(e,t,r,n)=>Lc(e,"xAxis",t,n),BJ=(e,t,r,n)=>Lc(e,"yAxis",r,n),WJ=xe([FJ,Wd],(e,t)=>{if(!(e==null||t==null)){var r=e.find(n=>n.stackId===t.stackId&&t.dataKey!=null&&n.dataKeys.includes(t.dataKey));if(r!=null)return r.position}}),qJ=(e,t)=>{var r=Ow(t);if(!(!e||r==null||t==null)){var{stackId:n}=t;if(n!=null){var s=e[n];if(s){var{stackedData:i}=s;if(i)return i.find(l=>l.key===r)}}}},VJ=xe([OJ,Wd],qJ),HJ=xe([Kn,Yx,LJ,zJ,UJ,BJ,WJ,er,jw,hT,VJ,Wd,AJ],(e,t,r,n,s,i,l,u,d,m,f,p,y)=>{var{chartData:x,dataStartIndex:j,dataEndIndex:b}=d;if(!(p==null||l==null||t==null||u!=="horizontal"&&u!=="vertical"||r==null||n==null||s==null||i==null||m==null)){var{data:k}=p,_;if(k!=null&&k.length>0?_=k:_=x==null?void 0:x.slice(j,b+1),_!=null)return xJ({layout:u,barSettings:p,pos:l,parentViewBox:t,bandSize:m,xAxis:r,yAxis:n,xAxisTicks:s,yAxisTicks:i,stackedData:f,displayedData:_,offset:e,cells:y,dataStartIndex:j})}}),KJ=e=>{var{chartData:t}=e,r=rn(),n=li();return v.useEffect(()=>n?()=>{}:(r(a2(t)),()=>{r(a2(void 0))}),[t,r,n]),null},q2={x:0,y:0,width:0,height:0,padding:{top:0,right:0,bottom:0,left:0}},mT=Us({name:"brush",initialState:q2,reducers:{setBrushSettings(e,t){return t.payload==null?q2:t.payload}}}),{setBrushSettings:Eee}=mT.actions,GJ=mT.reducer;function YJ(e,t,r){return(t=JJ(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function JJ(e){var t=XJ(e,"string");return typeof t=="symbol"?t:t+""}function XJ(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class eb{static create(t){return new eb(t)}constructor(t){this.scale=t}get domain(){return this.scale.domain}get range(){return this.scale.range}get rangeMin(){return this.range()[0]}get rangeMax(){return this.range()[1]}get bandwidth(){return this.scale.bandwidth}apply(t){var{bandAware:r,position:n}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(t!==void 0){if(n)switch(n){case"start":return this.scale(t);case"middle":{var s=this.bandwidth?this.bandwidth()/2:0;return this.scale(t)+s}case"end":{var i=this.bandwidth?this.bandwidth():0;return this.scale(t)+i}default:return this.scale(t)}if(r){var l=this.bandwidth?this.bandwidth()/2:0;return this.scale(t)+l}return this.scale(t)}}isInRange(t){var r=this.range(),n=r[0],s=r[r.length-1];return n<=s?t>=n&&t<=s:t>=s&&t<=n}}YJ(eb,"EPS",1e-4);function QJ(e){return(e%180+180)%180}var ZJ=function(t){var{width:r,height:n}=t,s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,i=QJ(s),l=i*Math.PI/180,u=Math.atan(n/r),d=l>u&&l<Math.PI-u?n/Math.sin(l):r/Math.cos(l);return Math.abs(d)},eX={dots:[],areas:[],lines:[]},pT=Us({name:"referenceElements",initialState:eX,reducers:{addDot:(e,t)=>{e.dots.push(t.payload)},removeDot:(e,t)=>{var r=Wa(e).dots.findIndex(n=>n===t.payload);r!==-1&&e.dots.splice(r,1)},addArea:(e,t)=>{e.areas.push(t.payload)},removeArea:(e,t)=>{var r=Wa(e).areas.findIndex(n=>n===t.payload);r!==-1&&e.areas.splice(r,1)},addLine:(e,t)=>{e.lines.push(t.payload)},removeLine:(e,t)=>{var r=Wa(e).lines.findIndex(n=>n===t.payload);r!==-1&&e.lines.splice(r,1)}}}),{addDot:Aee,removeDot:Pee,addArea:Oee,removeArea:Tee,addLine:Iee,removeLine:Dee}=pT.actions,tX=pT.reducer,rX=v.createContext(void 0),nX=e=>{var{children:t}=e,[r]=v.useState("".concat(ud("recharts"),"-clip")),n=lT();if(n==null)return null;var{x:s,y:i,width:l,height:u}=n;return v.createElement(rX.Provider,{value:r},v.createElement("defs",null,v.createElement("clipPath",{id:r},v.createElement("rect",{x:s,y:i,height:u,width:l}))),t)};function Bc(e,t){for(var r in e)if({}.hasOwnProperty.call(e,r)&&(!{}.hasOwnProperty.call(t,r)||e[r]!==t[r]))return!1;for(var n in t)if({}.hasOwnProperty.call(t,n)&&!{}.hasOwnProperty.call(e,n))return!1;return!0}function gT(e,t){if(t<1)return[];if(t===1)return e;for(var r=[],n=0;n<e.length;n+=t)r.push(e[n]);return r}function sX(e,t,r){var n={width:e.width+t.width,height:e.height+t.height};return ZJ(n,r)}function iX(e,t,r){var n=r==="width",{x:s,y:i,width:l,height:u}=e;return t===1?{start:n?s:i,end:n?s+l:i+u}:{start:n?s+l:i+u,end:n?s:i}}function mm(e,t,r,n,s){if(e*t<e*n||e*t>e*s)return!1;var i=r();return e*(t-e*i/2-n)>=0&&e*(t+e*i/2-s)<=0}function aX(e,t){return gT(e,t+1)}function oX(e,t,r,n,s){for(var i=(n||[]).slice(),{start:l,end:u}=t,d=0,m=1,f=l,p=function(){var j=n==null?void 0:n[d];if(j===void 0)return{v:gT(n,m)};var b=d,k,_=()=>(k===void 0&&(k=r(j,b)),k),E=j.coordinate,C=d===0||mm(e,E,_,f,u);C||(d=0,f=l,m+=1),C&&(f=E+e*(_()/2+s),d+=m)},y;m<=i.length;)if(y=p(),y)return y.v;return[]}function V2(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function us(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?V2(Object(r),!0).forEach(function(n){lX(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):V2(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function lX(e,t,r){return(t=cX(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function cX(e){var t=uX(e,"string");return typeof t=="symbol"?t:t+""}function uX(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function dX(e,t,r,n,s){for(var i=(n||[]).slice(),l=i.length,{start:u}=t,{end:d}=t,m=function(y){var x=i[y],j,b=()=>(j===void 0&&(j=r(x,y)),j);if(y===l-1){var k=e*(x.coordinate+e*b()/2-d);i[y]=x=us(us({},x),{},{tickCoord:k>0?x.coordinate-k*e:x.coordinate})}else i[y]=x=us(us({},x),{},{tickCoord:x.coordinate});if(x.tickCoord!=null){var _=mm(e,x.tickCoord,b,u,d);_&&(d=x.tickCoord-e*(b()/2+s),i[y]=us(us({},x),{},{isShow:!0}))}},f=l-1;f>=0;f--)m(f);return i}function fX(e,t,r,n,s,i){var l=(n||[]).slice(),u=l.length,{start:d,end:m}=t;if(i){var f=n[u-1],p=r(f,u-1),y=e*(f.coordinate+e*p/2-m);if(l[u-1]=f=us(us({},f),{},{tickCoord:y>0?f.coordinate-y*e:f.coordinate}),f.tickCoord!=null){var x=mm(e,f.tickCoord,()=>p,d,m);x&&(m=f.tickCoord-e*(p/2+s),l[u-1]=us(us({},f),{},{isShow:!0}))}}for(var j=i?u-1:u,b=function(E){var C=l[E],O,T=()=>(O===void 0&&(O=r(C,E)),O);if(E===0){var A=e*(C.coordinate-e*T()/2-d);l[E]=C=us(us({},C),{},{tickCoord:A<0?C.coordinate-A*e:C.coordinate})}else l[E]=C=us(us({},C),{},{tickCoord:C.coordinate});if(C.tickCoord!=null){var L=mm(e,C.tickCoord,T,d,m);L&&(d=C.tickCoord+e*(T()/2+s),l[E]=us(us({},C),{},{isShow:!0}))}},k=0;k<j;k++)b(k);return l}function hX(e,t,r){var{tick:n,ticks:s,viewBox:i,minTickGap:l,orientation:u,interval:d,tickFormatter:m,unit:f,angle:p}=e;if(!s||!s.length||!n)return[];if(mt(d)||Qc.isSsr){var y;return(y=aX(s,mt(d)?d:0))!==null&&y!==void 0?y:[]}var x=[],j=u==="top"||u==="bottom"?"width":"height",b=f&&j==="width"?sd(f,{fontSize:t,letterSpacing:r}):{width:0,height:0},k=(C,O)=>{var T=typeof m=="function"?m(C.value,O):C.value;return j==="width"?sX(sd(T,{fontSize:t,letterSpacing:r}),b,p):sd(T,{fontSize:t,letterSpacing:r})[j]},_=s.length>=2?ni(s[1].coordinate-s[0].coordinate):1,E=iX(i,_,j);return d==="equidistantPreserveStart"?oX(_,E,k,s,l):(d==="preserveStart"||d==="preserveStartEnd"?x=fX(_,E,k,s,l,d==="preserveStartEnd"):x=dX(_,E,k,s,l),x.filter(C=>C.isShow))}var mX=e=>{var{ticks:t,label:r,labelGapWithTick:n=5,tickSize:s=0,tickMargin:i=0}=e,l=0;if(t){Array.from(t).forEach(f=>{if(f){var p=f.getBoundingClientRect();p.width>l&&(l=p.width)}});var u=r?r.getBoundingClientRect().width:0,d=s+i,m=l+d+u+(r?n:0);return Math.round(m)}return 0},pX=["axisLine","width","height","className","hide","ticks","axisType"],gX=["viewBox"],yX=["viewBox"];function ex(e,t){if(e==null)return{};var r,n,s=vX(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function vX(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function Ol(){return Ol=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Ol.apply(null,arguments)}function H2(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function mn(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?H2(Object(r),!0).forEach(function(n){xX(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):H2(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function xX(e,t,r){return(t=wX(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function wX(e){var t=bX(e,"string");return typeof t=="symbol"?t:t+""}function bX(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var jX={x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd",zIndex:Ls.axis};function SX(e){var{x:t,y:r,width:n,height:s,orientation:i,mirror:l,axisLine:u,otherSvgProps:d}=e;if(!u)return null;var m=mn(mn(mn({},d),Fo(u)),{},{fill:"none"});if(i==="top"||i==="bottom"){var f=+(i==="top"&&!l||i==="bottom"&&l);m=mn(mn({},m),{},{x1:t,y1:r+f*s,x2:t+n,y2:r+f*s})}else{var p=+(i==="left"&&!l||i==="right"&&l);m=mn(mn({},m),{},{x1:t+p*n,y1:r,x2:t+p*n,y2:r+s})}return v.createElement("line",Ol({},m,{className:Nr("recharts-cartesian-axis-line",Rc(u,"className"))}))}function kX(e,t,r,n,s,i,l,u,d){var m,f,p,y,x,j,b=u?-1:1,k=e.tickSize||l,_=mt(e.tickCoord)?e.tickCoord:e.coordinate;switch(i){case"top":m=f=e.coordinate,y=r+ +!u*s,p=y-b*k,j=p-b*d,x=_;break;case"left":p=y=e.coordinate,f=t+ +!u*n,m=f-b*k,x=m-b*d,j=_;break;case"right":p=y=e.coordinate,f=t+ +u*n,m=f+b*k,x=m+b*d,j=_;break;default:m=f=e.coordinate,y=r+ +u*s,p=y+b*k,j=p+b*d,x=_;break}return{line:{x1:m,y1:p,x2:f,y2:y},tick:{x,y:j}}}function NX(e,t){switch(e){case"left":return t?"start":"end";case"right":return t?"end":"start";default:return"middle"}}function _X(e,t){switch(e){case"left":case"right":return"middle";case"top":return t?"start":"end";default:return t?"end":"start"}}function CX(e){var{option:t,tickProps:r,value:n}=e,s,i=Nr(r.className,"recharts-cartesian-axis-tick-value");if(v.isValidElement(t))s=v.cloneElement(t,mn(mn({},r),{},{className:i}));else if(typeof t=="function")s=t(mn(mn({},r),{},{className:i}));else{var l="recharts-cartesian-axis-tick-value";typeof t!="boolean"&&(l=Nr(l,t==null?void 0:t.className)),s=v.createElement(Qw,Ol({},r,{className:l}),n)}return s}var EX=v.forwardRef((e,t)=>{var{ticks:r=[],tick:n,tickLine:s,stroke:i,tickFormatter:l,unit:u,padding:d,tickTextProps:m,orientation:f,mirror:p,x:y,y:x,width:j,height:b,tickSize:k,tickMargin:_,fontSize:E,letterSpacing:C,getTicksConfig:O,events:T,axisType:A}=e,L=hX(mn(mn({},O),{},{ticks:r}),E,C),J=NX(f,p),H=_X(f,p),me=Fo(O),Z=Dx(n),K={};typeof s=="object"&&(K=s);var ce=mn(mn({},me),{},{fill:"none"},K),z=L.map(ue=>mn({entry:ue},kX(ue,y,x,j,b,f,k,p,_))),se=z.map(ue=>{var{entry:oe,line:X}=ue;return v.createElement(Ka,{className:"recharts-cartesian-axis-tick",key:"tick-".concat(oe.value,"-").concat(oe.coordinate,"-").concat(oe.tickCoord)},s&&v.createElement("line",Ol({},ce,X,{className:Nr("recharts-cartesian-axis-tick-line",Rc(s,"className"))})))}),B=z.map((ue,oe)=>{var{entry:X,tick:ee}=ue,D=mn(mn(mn(mn({textAnchor:J,verticalAnchor:H},me),{},{stroke:"none",fill:i},Z),ee),{},{index:oe,payload:X,visibleTicksCount:L.length,tickFormatter:l,padding:d},m);return v.createElement(Ka,Ol({className:"recharts-cartesian-axis-tick-label",key:"tick-label-".concat(X.value,"-").concat(X.coordinate,"-").concat(X.tickCoord)},Ux(T,X,oe)),n&&v.createElement(CX,{option:n,tickProps:D,value:"".concat(typeof l=="function"?l(X.value,oe):X.value).concat(u||"")}))});return v.createElement("g",{className:"recharts-cartesian-axis-ticks recharts-".concat(A,"-ticks")},B.length>0&&v.createElement(Vo,{zIndex:Ls.label},v.createElement("g",{className:"recharts-cartesian-axis-tick-labels recharts-".concat(A,"-tick-labels"),ref:t},B)),se.length>0&&v.createElement("g",{className:"recharts-cartesian-axis-tick-lines recharts-".concat(A,"-tick-lines")},se))}),AX=v.forwardRef((e,t)=>{var{axisLine:r,width:n,height:s,className:i,hide:l,ticks:u,axisType:d}=e,m=ex(e,pX),[f,p]=v.useState(""),[y,x]=v.useState(""),j=v.useRef(null);v.useImperativeHandle(t,()=>({getCalculatedWidth:()=>{var k;return mX({ticks:j.current,label:(k=e.labelRef)===null||k===void 0?void 0:k.current,labelGapWithTick:5,tickSize:e.tickSize,tickMargin:e.tickMargin})}}));var b=v.useCallback(k=>{if(k){var _=k.getElementsByClassName("recharts-cartesian-axis-tick-value");j.current=_;var E=_[0];if(E){var C=window.getComputedStyle(E),O=C.fontSize,T=C.letterSpacing;(O!==f||T!==y)&&(p(O),x(T))}}},[f,y]);return l||n!=null&&n<=0||s!=null&&s<=0?null:v.createElement(Vo,{zIndex:e.zIndex},v.createElement(Ka,{className:Nr("recharts-cartesian-axis",i)},v.createElement(SX,{x:e.x,y:e.y,width:n,height:s,orientation:e.orientation,mirror:e.mirror,axisLine:r,otherSvgProps:Fo(e)}),v.createElement(EX,{ref:b,axisType:d,events:m,fontSize:f,getTicksConfig:e,height:e.height,letterSpacing:y,mirror:e.mirror,orientation:e.orientation,padding:e.padding,stroke:e.stroke,tick:e.tick,tickFormatter:e.tickFormatter,tickLine:e.tickLine,tickMargin:e.tickMargin,tickSize:e.tickSize,tickTextProps:e.tickTextProps,ticks:u,unit:e.unit,width:e.width,x:e.x,y:e.y}),v.createElement(fG,{x:e.x,y:e.y,width:e.width,height:e.height,lowerWidth:e.width,upperWidth:e.width},v.createElement(jG,{label:e.label,labelRef:e.labelRef}),e.children)))}),PX=v.memo(AX,(e,t)=>{var{viewBox:r}=e,n=ex(e,gX),{viewBox:s}=t,i=ex(t,yX);return Bc(r,s)&&Bc(n,i)}),tb=v.forwardRef((e,t)=>{var r=Ci(e,jX);return v.createElement(PX,Ol({},r,{ref:t}))});tb.displayName="CartesianAxis";var OX=["dangerouslySetInnerHTML","ticks"],TX=["id"],IX=["domain"],DX=["domain"];function tx(){return tx=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},tx.apply(null,arguments)}function pm(e,t){if(e==null)return{};var r,n,s=RX(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function RX(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function $X(e){var t=rn();return v.useLayoutEffect(()=>(t(kY(e)),()=>{t(NY(e))}),[e,t]),null}var MX=e=>{var{xAxisId:t,className:r}=e,n=at(Yx),s=li(),i="xAxis",l=at(k=>su(k,i,t,s)),u=at(k=>u4(k,i,t,s)),d=at(k=>a4(k,t)),m=at(k=>xV(k,t)),f=at(k=>EO(k,t));if(d==null||m==null||f==null)return null;var{dangerouslySetInnerHTML:p,ticks:y}=e,x=pm(e,OX),{id:j}=f,b=pm(f,TX);return v.createElement(tb,tx({},x,b,{scale:l,x:m.x,y:m.y,width:d.width,height:d.height,className:Nr("recharts-".concat(i," ").concat(i),r),viewBox:n,ticks:u,axisType:i}))},FX={allowDataOverflow:Js.allowDataOverflow,allowDecimals:Js.allowDecimals,allowDuplicatedCategory:Js.allowDuplicatedCategory,height:Js.height,hide:!1,mirror:Js.mirror,orientation:Js.orientation,padding:Js.padding,reversed:Js.reversed,scale:Js.scale,tickCount:Js.tickCount,type:Js.type,xAxisId:0},LX=e=>{var t,r,n,s,i,l=Ci(e,FX);return v.createElement(v.Fragment,null,v.createElement($X,{interval:(t=l.interval)!==null&&t!==void 0?t:"preserveEnd",id:l.xAxisId,scale:l.scale,type:l.type,padding:l.padding,allowDataOverflow:l.allowDataOverflow,domain:l.domain,dataKey:l.dataKey,allowDuplicatedCategory:l.allowDuplicatedCategory,allowDecimals:l.allowDecimals,tickCount:l.tickCount,includeHidden:(r=l.includeHidden)!==null&&r!==void 0?r:!1,reversed:l.reversed,ticks:l.ticks,height:l.height,orientation:l.orientation,mirror:l.mirror,hide:l.hide,unit:l.unit,name:l.name,angle:(n=l.angle)!==null&&n!==void 0?n:0,minTickGap:(s=l.minTickGap)!==null&&s!==void 0?s:5,tick:(i=l.tick)!==null&&i!==void 0?i:!0,tickFormatter:l.tickFormatter}),v.createElement(MX,l))},zX=(e,t)=>{var{domain:r}=e,n=pm(e,IX),{domain:s}=t,i=pm(t,DX);return Bc(n,i)?Array.isArray(r)&&r.length===2&&Array.isArray(s)&&s.length===2?r[0]===s[0]&&r[1]===s[1]:Bc({domain:r},{domain:s}):!1},yT=v.memo(LX,zX);yT.displayName="XAxis";var UX=["dangerouslySetInnerHTML","ticks"],BX=["id"],WX=["domain"],qX=["domain"];function rx(){return rx=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},rx.apply(null,arguments)}function gm(e,t){if(e==null)return{};var r,n,s=VX(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function VX(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function HX(e){var t=rn();return v.useLayoutEffect(()=>(t(_Y(e)),()=>{t(CY(e))}),[e,t]),null}var KX=e=>{var{yAxisId:t,className:r,width:n,label:s}=e,i=v.useRef(null),l=v.useRef(null),u=at(Yx),d=li(),m=rn(),f="yAxis",p=at(T=>su(T,f,t,d)),y=at(T=>o4(T,t)),x=at(T=>bV(T,t)),j=at(T=>u4(T,f,t,d)),b=at(T=>AO(T,t));if(v.useLayoutEffect(()=>{if(!(n!=="auto"||!y||Zw(s)||v.isValidElement(s)||b==null)){var T=i.current;if(T){var A=T.getCalculatedWidth();Math.round(y.width)!==Math.round(A)&&m(EY({id:t,width:A}))}}},[j,y,m,s,t,n,b]),y==null||x==null||b==null)return null;var{dangerouslySetInnerHTML:k,ticks:_}=e,E=gm(e,UX),{id:C}=b,O=gm(b,BX);return v.createElement(tb,rx({},E,O,{ref:i,labelRef:l,scale:p,x:x.x,y:x.y,tickTextProps:n==="auto"?{width:void 0}:{width:n},width:y.width,height:y.height,className:Nr("recharts-".concat(f," ").concat(f),r),viewBox:u,ticks:j,axisType:f}))},GX={allowDataOverflow:Xs.allowDataOverflow,allowDecimals:Xs.allowDecimals,allowDuplicatedCategory:Xs.allowDuplicatedCategory,hide:!1,mirror:Xs.mirror,orientation:Xs.orientation,padding:Xs.padding,reversed:Xs.reversed,scale:Xs.scale,tickCount:Xs.tickCount,type:Xs.type,width:Xs.width,yAxisId:0},YX=e=>{var t,r,n,s,i,l=Ci(e,GX);return v.createElement(v.Fragment,null,v.createElement(HX,{interval:(t=l.interval)!==null&&t!==void 0?t:"preserveEnd",id:l.yAxisId,scale:l.scale,type:l.type,domain:l.domain,allowDataOverflow:l.allowDataOverflow,dataKey:l.dataKey,allowDuplicatedCategory:l.allowDuplicatedCategory,allowDecimals:l.allowDecimals,tickCount:l.tickCount,padding:l.padding,includeHidden:(r=l.includeHidden)!==null&&r!==void 0?r:!1,reversed:l.reversed,ticks:l.ticks,width:l.width,orientation:l.orientation,mirror:l.mirror,hide:l.hide,unit:l.unit,name:l.name,angle:(n=l.angle)!==null&&n!==void 0?n:0,minTickGap:(s=l.minTickGap)!==null&&s!==void 0?s:5,tick:(i=l.tick)!==null&&i!==void 0?i:!0,tickFormatter:l.tickFormatter}),v.createElement(KX,l))},JX=(e,t)=>{var{domain:r}=e,n=gm(e,WX),{domain:s}=t,i=gm(t,qX);return Bc(n,i)?Array.isArray(r)&&r.length===2&&Array.isArray(s)&&s.length===2?r[0]===s[0]&&r[1]===s[1]:Bc({domain:r},{domain:s}):!1},vT=v.memo(YX,JX);vT.displayName="YAxis";var Tv={exports:{}},Iv={};/**
 * @license React
 * use-sync-external-store-with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var K2;function XX(){if(K2)return Iv;K2=1;var e=Wc();function t(d,m){return d===m&&(d!==0||1/d===1/m)||d!==d&&m!==m}var r=typeof Object.is=="function"?Object.is:t,n=e.useSyncExternalStore,s=e.useRef,i=e.useEffect,l=e.useMemo,u=e.useDebugValue;return Iv.useSyncExternalStoreWithSelector=function(d,m,f,p,y){var x=s(null);if(x.current===null){var j={hasValue:!1,value:null};x.current=j}else j=x.current;x=l(function(){function k(T){if(!_){if(_=!0,E=T,T=p(T),y!==void 0&&j.hasValue){var A=j.value;if(y(A,T))return C=A}return C=T}if(A=C,r(E,T))return A;var L=p(T);return y!==void 0&&y(A,L)?(E=T,A):(E=T,C=L)}var _=!1,E,C,O=f===void 0?null:f;return[function(){return k(m())},O===null?void 0:function(){return k(O())}]},[m,f,p,y]);var b=n(d,x[0],x[1]);return i(function(){j.hasValue=!0,j.value=b},[b]),u(b),b},Iv}var G2;function QX(){return G2||(G2=1,Tv.exports=XX()),Tv.exports}QX();function ZX(e){e()}function eQ(){let e=null,t=null;return{clear(){e=null,t=null},notify(){ZX(()=>{let r=e;for(;r;)r.callback(),r=r.next})},get(){const r=[];let n=e;for(;n;)r.push(n),n=n.next;return r},subscribe(r){let n=!0;const s=t={callback:r,next:null,prev:t};return s.prev?s.prev.next=s:e=s,function(){!n||e===null||(n=!1,s.next?s.next.prev=s.prev:t=s.prev,s.prev?s.prev.next=s.next:e=s.next)}}}}var Y2={notify(){},get:()=>[]};function tQ(e,t){let r,n=Y2,s=0,i=!1;function l(b){f();const k=n.subscribe(b);let _=!1;return()=>{_||(_=!0,k(),p())}}function u(){n.notify()}function d(){j.onStateChange&&j.onStateChange()}function m(){return i}function f(){s++,r||(r=e.subscribe(d),n=eQ())}function p(){s--,r&&s===0&&(r(),r=void 0,n.clear(),n=Y2)}function y(){i||(i=!0,f())}function x(){i&&(i=!1,p())}const j={addNestedSub:l,notifyNestedSubs:u,handleChangeWrapper:d,isSubscribed:m,trySubscribe:y,tryUnsubscribe:x,getListeners:()=>n};return j}var rQ=()=>typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",nQ=rQ(),sQ=()=>typeof navigator<"u"&&navigator.product==="ReactNative",iQ=sQ(),aQ=()=>nQ||iQ?v.useLayoutEffect:v.useEffect,oQ=aQ(),Dv=Symbol.for("react-redux-context"),Rv=typeof globalThis<"u"?globalThis:{};function lQ(){if(!v.createContext)return{};const e=Rv[Dv]??(Rv[Dv]=new Map);let t=e.get(v.createContext);return t||(t=v.createContext(null),e.set(v.createContext,t)),t}var cQ=lQ();function uQ(e){const{children:t,context:r,serverState:n,store:s}=e,i=v.useMemo(()=>{const d=tQ(s);return{store:s,subscription:d,getServerState:n?()=>n:void 0}},[s,n]),l=v.useMemo(()=>s.getState(),[s]);oQ(()=>{const{subscription:d}=i;return d.onStateChange=d.notifyNestedSubs,d.trySubscribe(),l!==s.getState()&&d.notifyNestedSubs(),()=>{d.tryUnsubscribe(),d.onStateChange=void 0}},[i,l]);const u=r||cQ;return v.createElement(u.Provider,{value:i},t)}var dQ=uQ,fQ=(e,t)=>t,rb=xe([fQ,er,_O,Tn,C4,oo,OH,Kn],FH),nb=e=>{var t=e.currentTarget.getBoundingClientRect(),r=t.width/e.currentTarget.offsetWidth,n=t.height/e.currentTarget.offsetHeight;return{chartX:Math.round((e.clientX-t.left)/r),chartY:Math.round((e.clientY-t.top)/n)}},xT=ki("mouseClick"),wT=Od();wT.startListening({actionCreator:xT,effect:(e,t)=>{var r=e.payload,n=rb(t.getState(),nb(r));(n==null?void 0:n.activeIndex)!=null&&t.dispatch(DV({activeIndex:n.activeIndex,activeDataKey:void 0,activeCoordinate:n.activeCoordinate}))}});var nx=ki("mouseMove"),bT=Od();bT.startListening({actionCreator:nx,effect:(e,t)=>{var r=e.payload,n=t.getState(),s=Bw(n,n.tooltip.settings.shared),i=rb(n,nb(r));s==="axis"&&((i==null?void 0:i.activeIndex)!=null?t.dispatch(v4({activeIndex:i.activeIndex,activeDataKey:void 0,activeCoordinate:i.activeCoordinate})):t.dispatch(y4()))}});var J2={accessibilityLayer:!0,barCategoryGap:"10%",barGap:4,barSize:void 0,className:void 0,maxBarSize:void 0,stackOffset:"none",syncId:void 0,syncMethod:"index",baseValue:void 0},jT=Us({name:"rootProps",initialState:J2,reducers:{updateOptions:(e,t)=>{var r;e.accessibilityLayer=t.payload.accessibilityLayer,e.barCategoryGap=t.payload.barCategoryGap,e.barGap=(r=t.payload.barGap)!==null&&r!==void 0?r:J2.barGap,e.barSize=t.payload.barSize,e.maxBarSize=t.payload.maxBarSize,e.stackOffset=t.payload.stackOffset,e.syncId=t.payload.syncId,e.syncMethod=t.payload.syncMethod,e.className=t.payload.className,e.baseValue=t.payload.baseValue}}}),hQ=jT.reducer,{updateOptions:mQ}=jT.actions,ST=Us({name:"polarOptions",initialState:null,reducers:{updatePolarOptions:(e,t)=>t.payload}}),{updatePolarOptions:Ree}=ST.actions,pQ=ST.reducer,kT=ki("keyDown"),NT=ki("focus"),sb=Od();sb.startListening({actionCreator:kT,effect:(e,t)=>{var r=t.getState(),n=r.rootProps.accessibilityLayer!==!1;if(n){var{keyboardInteraction:s}=r.tooltip,i=e.payload;if(!(i!=="ArrowRight"&&i!=="ArrowLeft"&&i!=="Enter")){var l=Number(Ww(s,au(r))),u=oo(r);if(i==="Enter"){var d=lm(r,"axis","hover",String(s.index));t.dispatch(G0({active:!s.active,activeIndex:s.index,activeDataKey:s.dataKey,activeCoordinate:d}));return}var m=NV(r),f=m==="left-to-right"?1:-1,p=i==="ArrowRight"?1:-1,y=l+p*f;if(!(u==null||y>=u.length||y<0)){var x=lm(r,"axis","hover",String(y));t.dispatch(G0({active:!0,activeIndex:y.toString(),activeDataKey:void 0,activeCoordinate:x}))}}}}});sb.startListening({actionCreator:NT,effect:(e,t)=>{var r=t.getState(),n=r.rootProps.accessibilityLayer!==!1;if(n){var{keyboardInteraction:s}=r.tooltip;if(!s.active&&s.index==null){var i="0",l=lm(r,"axis","hover",String(i));t.dispatch(G0({activeDataKey:void 0,active:!0,activeIndex:i,activeCoordinate:l}))}}}});var xi=ki("externalEvent"),_T=Od();_T.startListening({actionCreator:xi,effect:(e,t)=>{if(e.payload.handler!=null){var r=t.getState(),n={activeCoordinate:gH(r),activeDataKey:O4(r),activeIndex:Uc(r),activeLabel:P4(r),activeTooltipIndex:Uc(r),isTooltipActive:yH(r)};e.payload.handler(n,e.payload.reactEvent)}}});var gQ=xe([iu],e=>e.tooltipItemPayloads),yQ=xe([gQ,Ud,(e,t,r)=>t,(e,t,r)=>r],(e,t,r,n)=>{var s=e.find(u=>u.settings.dataKey===n);if(s!=null){var{positions:i}=s;if(i!=null){var l=t(i,r);return l}}}),CT=ki("touchMove"),ET=Od();ET.startListening({actionCreator:CT,effect:(e,t)=>{var r=e.payload;if(!(r.touches==null||r.touches.length===0)){var n=t.getState(),s=Bw(n,n.tooltip.settings.shared);if(s==="axis"){var i=rb(n,nb({clientX:r.touches[0].clientX,clientY:r.touches[0].clientY,currentTarget:r.currentTarget}));(i==null?void 0:i.activeIndex)!=null&&t.dispatch(v4({activeIndex:i.activeIndex,activeDataKey:void 0,activeCoordinate:i.activeCoordinate}))}else if(s==="item"){var l,u=r.touches[0];if(document.elementFromPoint==null)return;var d=document.elementFromPoint(u.clientX,u.clientY);if(!d||!d.getAttribute)return;var m=d.getAttribute(EU),f=(l=d.getAttribute(AU))!==null&&l!==void 0?l:void 0,p=yQ(t.getState(),m,f);t.dispatch(g4({activeDataKey:f,activeIndex:m,activeCoordinate:p}))}}}});var vQ=DA({brush:GJ,cartesianAxis:AY,chartData:gK,errorBars:WY,graphicalItems:vY,layout:cU,legend:fB,options:dK,polarAxis:FG,polarOptions:pQ,referenceElements:tX,rootProps:hQ,tooltip:RV,zIndex:QH}),xQ=function(t){return D8({reducer:vQ,preloadedState:t,middleware:r=>r({serializableCheck:!1}).concat([wT.middleware,bT.middleware,sb.middleware,_T.middleware,ET.middleware]),enhancers:r=>{var n=r;return typeof r=="function"&&(n=r()),n.concat(HA({type:"raf"}))},devTools:Qc.devToolsEnabled})};function wQ(e){var{preloadedState:t,children:r,reduxStoreName:n}=e,s=li(),i=v.useRef(null);if(s)return r;i.current==null&&(i.current=xQ(t));var l=Wx;return v.createElement(dQ,{context:l,store:i.current},r)}function bQ(e){var{layout:t,margin:r}=e,n=rn(),s=li();return v.useEffect(()=>{s||(n(aU(t)),n(iU(r)))},[n,s,t,r]),null}function jQ(e){var t=rn();return v.useEffect(()=>{t(mQ(e))},[t,e]),null}function X2(e){var{zIndex:t,isPanorama:r}=e,n=r?"recharts-zindex-panorama-":"recharts-zindex-",s=iT("".concat(n).concat(t)),i=rn();return v.useLayoutEffect(()=>(i(JH({zIndex:t,elementId:s,isPanorama:r})),()=>{i(XH({zIndex:t,isPanorama:r}))}),[i,t,s,r]),v.createElement("g",{id:s})}function Q2(e){var{children:t,isPanorama:r}=e,n=at(zH);if(!n||n.length===0)return t;var s=n.filter(l=>l<0),i=n.filter(l=>l>0);return v.createElement(v.Fragment,null,s.map(l=>v.createElement(X2,{key:l,zIndex:l,isPanorama:r})),t,i.map(l=>v.createElement(X2,{key:l,zIndex:l,isPanorama:r})))}var SQ=["children"];function kQ(e,t){if(e==null)return{};var r,n,s=NQ(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function NQ(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function ym(){return ym=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},ym.apply(null,arguments)}var _Q={width:"100%",height:"100%",display:"block"},CQ=v.forwardRef((e,t)=>{var r=aB(),n=oB(),s=hP();if(!Lo(r)||!Lo(n))return null;var{children:i,otherAttributes:l,title:u,desc:d}=e,m,f;return l!=null&&(typeof l.tabIndex=="number"?m=l.tabIndex:m=s?0:void 0,typeof l.role=="string"?f=l.role:f=s?"application":void 0),v.createElement(QE,ym({},l,{title:u,desc:d,role:f,tabIndex:m,width:r,height:n,style:_Q,ref:t}),i)}),EQ=e=>{var{children:t}=e,r=at(Wm);if(!r)return null;var{width:n,height:s,y:i,x:l}=r;return v.createElement(QE,{width:n,height:s,x:l,y:i},t)},Z2=v.forwardRef((e,t)=>{var{children:r}=e,n=kQ(e,SQ),s=li();return s?v.createElement(EQ,null,v.createElement(Q2,{isPanorama:!0},r)):v.createElement(CQ,ym({ref:t},n),v.createElement(Q2,{isPanorama:!1},r))});function AQ(){var e=rn(),[t,r]=v.useState(null),n=at(CU);return v.useEffect(()=>{if(t!=null){var s=t.getBoundingClientRect(),i=s.width/t.offsetWidth;tn(i)&&i!==n&&e(lU(i))}},[t,e,n]),r}function eC(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function PQ(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?eC(Object(r),!0).forEach(function(n){OQ(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):eC(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function OQ(e,t,r){return(t=TQ(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function TQ(e){var t=IQ(e,"string");return typeof t=="symbol"?t:t+""}function IQ(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Tl(){return Tl=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Tl.apply(null,arguments)}var DQ=()=>(NK(),null);function vm(e){if(typeof e=="number")return e;if(typeof e=="string"){var t=parseFloat(e);if(!Number.isNaN(t))return t}return 0}var RQ=v.forwardRef((e,t)=>{var r,n,s=v.useRef(null),[i,l]=v.useState({containerWidth:vm((r=e.style)===null||r===void 0?void 0:r.width),containerHeight:vm((n=e.style)===null||n===void 0?void 0:n.height)}),u=v.useCallback((m,f)=>{l(p=>{var y=Math.round(m),x=Math.round(f);return p.containerWidth===y&&p.containerHeight===x?p:{containerWidth:y,containerHeight:x}})},[]),d=v.useCallback(m=>{if(typeof t=="function"&&t(m),m!=null&&typeof ResizeObserver<"u"){var{width:f,height:p}=m.getBoundingClientRect();u(f,p);var y=j=>{var{width:b,height:k}=j[0].contentRect;u(b,k)},x=new ResizeObserver(y);x.observe(m),s.current=x}},[t,u]);return v.useEffect(()=>()=>{var m=s.current;m!=null&&m.disconnect()},[u]),v.createElement(v.Fragment,null,v.createElement(Hm,{width:i.containerWidth,height:i.containerHeight}),v.createElement("div",Tl({ref:d},e)))}),$Q=v.forwardRef((e,t)=>{var{width:r,height:n}=e,[s,i]=v.useState({containerWidth:vm(r),containerHeight:vm(n)}),l=v.useCallback((d,m)=>{i(f=>{var p=Math.round(d),y=Math.round(m);return f.containerWidth===p&&f.containerHeight===y?f:{containerWidth:p,containerHeight:y}})},[]),u=v.useCallback(d=>{if(typeof t=="function"&&t(d),d!=null){var{width:m,height:f}=d.getBoundingClientRect();l(m,f)}},[t,l]);return v.createElement(v.Fragment,null,v.createElement(Hm,{width:s.containerWidth,height:s.containerHeight}),v.createElement("div",Tl({ref:u},e)))}),MQ=v.forwardRef((e,t)=>{var{width:r,height:n}=e;return v.createElement(v.Fragment,null,v.createElement(Hm,{width:r,height:n}),v.createElement("div",Tl({ref:t},e)))}),FQ=v.forwardRef((e,t)=>{var{width:r,height:n}=e;return Ga(r)||Ga(n)?v.createElement($Q,Tl({},e,{ref:t})):v.createElement(MQ,Tl({},e,{ref:t}))});function LQ(e){return e===!0?RQ:FQ}var zQ=v.forwardRef((e,t)=>{var{children:r,className:n,height:s,onClick:i,onContextMenu:l,onDoubleClick:u,onMouseDown:d,onMouseEnter:m,onMouseLeave:f,onMouseMove:p,onMouseUp:y,onTouchEnd:x,onTouchMove:j,onTouchStart:b,style:k,width:_,responsive:E,dispatchTouchEvents:C=!0}=e,O=v.useRef(null),T=rn(),[A,L]=v.useState(null),[J,H]=v.useState(null),me=AQ(),Z=Jx(),K=(Z==null?void 0:Z.width)>0?Z.width:_,ce=(Z==null?void 0:Z.height)>0?Z.height:s,z=v.useCallback(R=>{me(R),typeof t=="function"&&t(R),L(R),H(R),R!=null&&(O.current=R)},[me,t,L,H]),se=v.useCallback(R=>{T(xT(R)),T(xi({handler:i,reactEvent:R}))},[T,i]),B=v.useCallback(R=>{T(nx(R)),T(xi({handler:m,reactEvent:R}))},[T,m]),ue=v.useCallback(R=>{T(y4()),T(xi({handler:f,reactEvent:R}))},[T,f]),oe=v.useCallback(R=>{T(nx(R)),T(xi({handler:p,reactEvent:R}))},[T,p]),X=v.useCallback(()=>{T(NT())},[T]),ee=v.useCallback(R=>{T(kT(R.key))},[T]),D=v.useCallback(R=>{T(xi({handler:l,reactEvent:R}))},[T,l]),q=v.useCallback(R=>{T(xi({handler:u,reactEvent:R}))},[T,u]),Te=v.useCallback(R=>{T(xi({handler:d,reactEvent:R}))},[T,d]),we=v.useCallback(R=>{T(xi({handler:y,reactEvent:R}))},[T,y]),Ce=v.useCallback(R=>{T(xi({handler:b,reactEvent:R}))},[T,b]),le=v.useCallback(R=>{C&&T(CT(R)),T(xi({handler:j,reactEvent:R}))},[T,C,j]),de=v.useCallback(R=>{T(xi({handler:x,reactEvent:R}))},[T,x]),Q=LQ(E);return v.createElement(L4.Provider,{value:A},v.createElement(yL.Provider,{value:J},v.createElement(Q,{width:K??(k==null?void 0:k.width),height:ce??(k==null?void 0:k.height),className:Nr("recharts-wrapper",n),style:PQ({position:"relative",cursor:"default",width:K,height:ce},k),onClick:se,onContextMenu:D,onDoubleClick:q,onFocus:X,onKeyDown:ee,onMouseDown:Te,onMouseEnter:B,onMouseLeave:ue,onMouseMove:oe,onMouseUp:we,onTouchEnd:de,onTouchMove:le,onTouchStart:Ce,ref:z},v.createElement(DQ,null),r)))}),UQ=["width","height","responsive","children","className","style","compact","title","desc"];function BQ(e,t){if(e==null)return{};var r,n,s=WQ(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function WQ(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var qQ=v.forwardRef((e,t)=>{var{width:r,height:n,responsive:s,children:i,className:l,style:u,compact:d,title:m,desc:f}=e,p=BQ(e,UQ),y=Fo(p);return d?v.createElement(v.Fragment,null,v.createElement(Hm,{width:r,height:n}),v.createElement(Z2,{otherAttributes:y,title:m,desc:f},i)):v.createElement(zQ,{className:l,style:u,width:r,height:n,responsive:s??!1,onClick:e.onClick,onMouseLeave:e.onMouseLeave,onMouseEnter:e.onMouseEnter,onMouseMove:e.onMouseMove,onMouseDown:e.onMouseDown,onMouseUp:e.onMouseUp,onContextMenu:e.onContextMenu,onDoubleClick:e.onDoubleClick,onTouchStart:e.onTouchStart,onTouchMove:e.onTouchMove,onTouchEnd:e.onTouchEnd},v.createElement(Z2,{otherAttributes:y,title:m,desc:f,ref:t},v.createElement(nX,null,i)))});function sx(){return sx=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},sx.apply(null,arguments)}var VQ={top:5,right:5,bottom:5,left:5},HQ={accessibilityLayer:!0,layout:"horizontal",stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:VQ,reverseStackOrder:!1,syncMethod:"index",responsive:!1},KQ=v.forwardRef(function(t,r){var n,s=Ci(t.categoricalChartProps,HQ),{chartName:i,defaultTooltipEventType:l,validateTooltipEventTypes:u,tooltipPayloadSearcher:d,categoricalChartProps:m}=t,f={chartName:i,defaultTooltipEventType:l,validateTooltipEventTypes:u,tooltipPayloadSearcher:d,eventEmitter:void 0};return v.createElement(wQ,{preloadedState:{options:f},reduxStoreName:(n=m.id)!==null&&n!==void 0?n:i},v.createElement(KJ,{chartData:m.data}),v.createElement(bQ,{layout:s.layout,margin:s.margin}),v.createElement(jQ,{baseValue:s.baseValue,accessibilityLayer:s.accessibilityLayer,barCategoryGap:s.barCategoryGap,maxBarSize:s.maxBarSize,stackOffset:s.stackOffset,barGap:s.barGap,barSize:s.barSize,syncId:s.syncId,syncMethod:s.syncMethod,className:s.className}),v.createElement(qQ,sx({},s,{ref:r})))}),GQ=["axis","item"],YQ=v.forwardRef((e,t)=>v.createElement(KQ,{chartName:"BarChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:GQ,tooltipPayloadSearcher:cK,categoricalChartProps:e,ref:t}));const Sa="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='UTF-8'?%3e%3csvg%20id='icons'%20xmlns='http://www.w3.org/2000/svg'%20version='1.1'%20viewBox='0%200%20288%20288'%3e%3c!--%20Generator:%20Adobe%20Illustrator%2029.8.3,%20SVG%20Export%20Plug-In%20.%20SVG%20Version:%202.1.1%20Build%203)%20--%3e%3cdefs%3e%3cstyle%3e%20.st0%20{%20fill:%20%23c89211;%20}%20.st1%20{%20fill:%20%232e4760;%20}%20%3c/style%3e%3c/defs%3e%3crect%20class='st1'%20x='-.18'%20y='.13'%20width='288'%20height='287.75'%20rx='29.77'%20ry='29.77'/%3e%3cg%3e%3cpath%20class='st0'%20d='M255.27,97.14c-1.15-2.2-2.46-4.34-3.89-6.42-9.61-13.92-24.44-23.22-38.72-24.23-9.72-.86-15.97,1.42-30.41,10.99l-69.64,46.23-.72.49-27.78,32.23.56.79,5.22,7.56.54.8.73-.5,67.68-44.93c13.39-8.89,18.9-11.26,25.65-11.06,10.45.25,23.48,8.33,31.01,19.24,1.09,1.57,2.08,3.22,2.96,4.92,3.7,7.05,5.56,14.86,5.4,21.79l-61.49,40.82-.72.48-27.77,32.24.56.78,5.22,7.56.54.8.73-.48,69.63-46.23c7.75-5.15,12.63-8.93,15.92-12.75l27.76-32.24c-.11.12-.25.25-.35.37,3.04-3.42,4.8-6.83,6.16-11.25,3.68-11.38,1.81-25.42-4.79-38.01Z'/%3e%3cpath%20class='st0'%20d='M32.37,187.15c1.15,2.2,2.45,4.34,3.89,6.43,9.61,13.92,24.45,23.21,38.71,24.23,9.72.87,15.97-1.42,30.41-11l69.63-46.23.73-.49,27.77-32.24-.57-.78-5.22-7.57-.53-.8-.73.5-67.68,44.93c-13.39,8.89-18.9,11.26-25.65,11.06-10.44-.24-23.48-8.33-31-19.23-1.08-1.58-2.08-3.22-2.96-4.92-3.71-7.05-5.57-14.86-5.41-21.79l61.49-40.82.72-.48,27.77-32.24-.56-.79-5.21-7.56-.54-.79-.74.48-69.62,46.23c-7.75,5.14-12.63,8.93-15.92,12.75l-27.76,32.24c.11-.12.26-.25.36-.37-3.04,3.42-4.81,6.83-6.16,11.25-3.68,11.37-1.82,25.42,4.79,38Z'/%3e%3c/g%3e%3c/svg%3e",AT=["Bug","Change Request","Data Correction","Epic","Feature","Group","Issue","Other","Spike","Task","Test Case","User Story"];function JQ(){const e=window.location.origin,t=window.location.pathname,r=t.includes("/admin")?t.substring(0,t.indexOf("/admin")):t.includes("/voter")?t.substring(0,t.indexOf("/voter")):t;return`${e}${r}/admin`}const si={clientId:"a6283b6c-2210-4d6c-bade-651acfdb6703",tenantId:"3bb4e039-9a0f-4671-9733-a9ae03d39395",get redirectUri(){return JQ()},scopes:["https://app.vssps.visualstudio.com/user_impersonation","offline_access"]};function XQ(){const e=new Uint8Array(32);return crypto.getRandomValues(e),PT(e)}async function QQ(e){const r=new TextEncoder().encode(e),n=await crypto.subtle.digest("SHA-256",r);return PT(new Uint8Array(n))}function PT(e){return btoa(String.fromCharCode(...e)).replace(/\+/g,"-").replace(/\//g,"_").replace(/=/g,"")}async function ZQ(e){const t=XQ(),r=await QQ(t);sessionStorage.setItem("pkce_verifier",t);const n=new URLSearchParams({client_id:si.clientId,response_type:"code",redirect_uri:si.redirectUri,response_mode:"query",scope:si.scopes.join(" "),state:e,code_challenge:r,code_challenge_method:"S256"});return`https://login.microsoftonline.com/${si.tenantId}/oauth2/v2.0/authorize?${n}`}async function eZ(e){const t=`https://login.microsoftonline.com/${si.tenantId}/oauth2/v2.0/token`,r=sessionStorage.getItem("pkce_verifier");if(!r)throw new Error("Code verifier not found - PKCE flow incomplete");const n=new URLSearchParams({client_id:si.clientId,scope:si.scopes.join(" "),code:e,redirect_uri:si.redirectUri,grant_type:"authorization_code",code_verifier:r}),s=await fetch(t,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:n.toString()});if(!s.ok){const l=await s.json();throw console.error("Token exchange error:",l),new Error(`Failed to exchange code for tokens: ${l.error_description||l.error}`)}const i=await s.json();return sessionStorage.removeItem("pkce_verifier"),{accessToken:i.access_token,refreshToken:i.refresh_token,expiresIn:i.expires_in}}async function tZ(e){const t=`https://login.microsoftonline.com/${si.tenantId}/oauth2/v2.0/token`,r=new URLSearchParams({client_id:si.clientId,scope:si.scopes.join(" "),refresh_token:e,grant_type:"refresh_token"}),n=await fetch(t,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:r.toString()});if(!n.ok){const i=await n.json();throw console.error("Token refresh error:",i),new Error(`Failed to refresh access token: ${i.error_description||i.error}`)}const s=await n.json();return{accessToken:s.access_token,expiresIn:s.expires_in}}async function OT(e,t){if(!e.accessToken||!e.organization||!e.project)throw new Error("Missing required configuration");const r=t||e.workItemType;if(!r)throw new Error("Missing work item type for state fetch");const n=encodeURIComponent(r),s=`https://dev.azure.com/${e.organization}/${e.project}/_apis/wit/workitemtypes/${n}?api-version=7.1`,i=await fetch(s,{headers:{Authorization:`Bearer ${e.accessToken}`,"Content-Type":"application/json"}});if(!i.ok)throw new Error(`Failed to fetch states: ${i.statusText}`);const l=await i.json();return l.states&&Array.isArray(l.states)?l.states.map(u=>u.name):[]}async function tC(e){const t=new Set;for(const r of AT)try{(await OT({...e,workItemType:r},r)).forEach(s=>{s&&t.add(s)})}catch(n){console.warn(`Failed to fetch states for type ${r}:`,n)}return Array.from(t).sort((r,n)=>r.localeCompare(n))}async function ix(e){if(!e.accessToken||!e.organization||!e.project)throw new Error("Missing required configuration");const t=`https://dev.azure.com/${e.organization}/${e.project}/_apis/wit/classificationnodes/areas?$depth=10&api-version=7.1`,r=await fetch(t,{headers:{Authorization:`Bearer ${e.accessToken}`,"Content-Type":"application/json"}});if(!r.ok)throw new Error(`Failed to fetch area paths: ${r.statusText}`);const n=await r.json(),s=(i,l="")=>{const u=l?`${l}\\${i.name}`:i.name;let d=[u];return i.children&&i.children.length>0&&i.children.forEach(m=>{d=d.concat(s(m,u))}),d};return s(n)}async function rZ(e,t,r=[]){if(!e.accessToken||!e.organization||!e.project)throw new Error("Missing required configuration");if(!t)return ix(e);try{const n=[`[System.WorkItemType] = '${t}'`];if(r&&r.length>0)if(r.length===1)n.push(`[System.State] = '${r[0]}'`);else{const x=r.map(j=>`'${j}'`).join(", ");n.push(`[System.State] IN (${x})`)}const s=`SELECT [System.Id] FROM WorkItems WHERE ${n.join(" AND ")} ORDER BY [System.ChangedDate] DESC`,i=`https://dev.azure.com/${e.organization}/${e.project}/_apis/wit/wiql?api-version=7.1`,l=await fetch(i,{method:"POST",headers:{Authorization:`Bearer ${e.accessToken}`,"Content-Type":"application/json"},body:JSON.stringify({query:s})});if(!l.ok)return console.warn("Failed to fetch area paths by type/state, returning empty list"),[];const u=await l.json();if(!u.workItems||u.workItems.length===0)return[];const d=u.workItems.map(x=>x.id).slice(0,200);if(d.length===0)return[];const m=`https://dev.azure.com/${e.organization}/${e.project}/_apis/wit/workitems?ids=${d.join(",")}&fields=System.AreaPath&api-version=7.1`,f=await fetch(m,{headers:{Authorization:`Bearer ${e.accessToken}`,"Content-Type":"application/json"}});if(!f.ok)return console.warn("Failed to fetch work item area paths for filtered request"),[];const p=await f.json(),y=new Set;return p.value&&Array.isArray(p.value)&&p.value.forEach(x=>{var b;const j=(b=x.fields)==null?void 0:b["System.AreaPath"];j&&y.add(j)}),Array.from(y).sort()}catch(n){return console.error("Error fetching area paths for type/state:",n),[]}}async function nZ(e,t){if(!e.accessToken||!e.organization||!e.project)throw new Error("Missing required configuration");if(!t||t.length===0)return{types:[],areaPaths:[],tags:[]};try{const n=`SELECT [System.Id], [System.WorkItemType], [System.AreaPath] FROM WorkItems WHERE ${t.length===1?`[System.State] = '${t[0]}'`:`[System.State] IN (${t.map(j=>`'${j}'`).join(", ")})`} ORDER BY [System.ChangedDate] DESC`,s=`https://dev.azure.com/${e.organization}/${e.project}/_apis/wit/wiql?api-version=7.1`,i=await fetch(s,{method:"POST",headers:{Authorization:`Bearer ${e.accessToken}`,"Content-Type":"application/json"},body:JSON.stringify({query:n})});if(!i.ok)throw new Error(`Failed to fetch work items by state: ${i.statusText}`);const l=await i.json();if(!l.workItems||l.workItems.length===0)return{types:[],areaPaths:[],tags:[]};const u=l.workItems.map(j=>j.id).slice(0,200);if(u.length===0)return{types:[],areaPaths:[],tags:[]};const d=`https://dev.azure.com/${e.organization}/${e.project}/_apis/wit/workitems?ids=${u.join(",")}&fields=System.WorkItemType,System.AreaPath,System.Tags&api-version=7.1`,m=await fetch(d,{headers:{Authorization:`Bearer ${e.accessToken}`,"Content-Type":"application/json"}});if(!m.ok)return console.warn("Failed to fetch work item details for states filter"),{types:[],areaPaths:[],tags:[]};const f=await m.json(),p=new Set,y=new Set,x=new Set;return f.value&&Array.isArray(f.value)&&f.value.forEach(j=>{var E,C,O;const b=(E=j.fields)==null?void 0:E["System.WorkItemType"],k=(C=j.fields)==null?void 0:C["System.AreaPath"],_=(O=j.fields)==null?void 0:O["System.Tags"];b&&p.add(b),k&&y.add(k),_&&_.split(";").map(T=>T.trim()).forEach(T=>{T&&x.add(T)})}),{types:Array.from(p).sort((j,b)=>j.localeCompare(b)),areaPaths:Array.from(y).sort((j,b)=>j.localeCompare(b)),tags:Array.from(x).sort((j,b)=>j.localeCompare(b))}}catch(r){return console.error("Error fetching types and area paths for states:",r),{types:[],areaPaths:[],tags:[]}}}async function sZ(e){if(!e.accessToken||!e.organization)throw new Error("Missing required configuration");const t=`https://dev.azure.com/${e.organization}/_apis/projects?stateFilter=All&api-version=7.1`,r=await fetch(t,{headers:{Authorization:`Bearer ${e.accessToken}`,"Content-Type":"application/json"}});if(!r.ok)throw new Error(`Failed to fetch projects: ${r.statusText}`);const n=await r.json();return!(n!=null&&n.value)||!Array.isArray(n.value)?[]:n.value.map(s=>s==null?void 0:s.name).filter(s=>typeof s=="string"&&s.trim().length>0).map(s=>s.trim()).sort((s,i)=>s.localeCompare(i))}async function iZ(e,t){if(!e.accessToken||!e.organization||!e.project)throw new Error("Missing required configuration");try{const n=`SELECT [System.Id], [System.WorkItemType], [System.State] FROM WorkItems WHERE (${t.map(x=>`[System.AreaPath] UNDER '${x}'`).join(" OR ")}) ORDER BY [System.ChangedDate] DESC`,s=`https://dev.azure.com/${e.organization}/${e.project}/_apis/wit/wiql?api-version=7.1`,i=await fetch(s,{method:"POST",headers:{Authorization:`Bearer ${e.accessToken}`,"Content-Type":"application/json"},body:JSON.stringify({query:n})});if(!i.ok)throw new Error(`Failed to fetch work items: ${i.statusText}`);const l=await i.json();if(!l.workItems||l.workItems.length===0)return{types:[],states:[]};const u=l.workItems.map(x=>x.id).slice(0,200),d=`https://dev.azure.com/${e.organization}/${e.project}/_apis/wit/workitems?ids=${u.join(",")}&fields=System.WorkItemType,System.State&api-version=7.1`,m=await fetch(d,{headers:{Authorization:`Bearer ${e.accessToken}`,"Content-Type":"application/json"}});if(!m.ok)return console.warn("Failed to fetch work item details"),{types:[],states:[]};const f=await m.json(),p=new Set,y=new Set;return f.value&&Array.isArray(f.value)&&f.value.forEach(x=>{x.fields&&(x.fields["System.WorkItemType"]&&p.add(x.fields["System.WorkItemType"]),x.fields["System.State"]&&y.add(x.fields["System.State"]))}),{types:Array.from(p).sort(),states:Array.from(y).sort()}}catch(r){return console.error("Error fetching types and states for area path:",r),{types:[],states:[]}}}async function aZ(e,t){if(!e.accessToken||!e.organization||!e.project)throw new Error("Missing required configuration");try{const n=`SELECT [System.Id], [System.WorkItemType], [System.State] FROM WorkItems WHERE (${t.map(j=>`[System.Tags] CONTAINS '${j}'`).join(" OR ")}) ORDER BY [System.ChangedDate] DESC`,s=`https://dev.azure.com/${e.organization}/${e.project}/_apis/wit/wiql?api-version=7.1`,i=await fetch(s,{method:"POST",headers:{Authorization:`Bearer ${e.accessToken}`,"Content-Type":"application/json"},body:JSON.stringify({query:n})});if(!i.ok)throw new Error(`Failed to fetch work items: ${i.statusText}`);const l=await i.json();if(!l.workItems||l.workItems.length===0)return{types:[],states:[],areaPaths:[]};const u=l.workItems.map(j=>j.id).slice(0,200),d=`https://dev.azure.com/${e.organization}/${e.project}/_apis/wit/workitems?ids=${u.join(",")}&fields=System.WorkItemType,System.State,System.AreaPath&api-version=7.1`,m=await fetch(d,{headers:{Authorization:`Bearer ${e.accessToken}`,"Content-Type":"application/json"}});if(!m.ok)return console.warn("Failed to fetch work item details"),{types:[],states:[],areaPaths:[]};const f=await m.json(),p=new Set,y=new Set,x=new Set;return f.value&&Array.isArray(f.value)&&f.value.forEach(j=>{j.fields&&(j.fields["System.WorkItemType"]&&p.add(j.fields["System.WorkItemType"]),j.fields["System.State"]&&y.add(j.fields["System.State"]),j.fields["System.AreaPath"]&&x.add(j.fields["System.AreaPath"]))}),{types:Array.from(p).sort(),states:Array.from(y).sort(),areaPaths:Array.from(x).sort()}}catch(r){return console.error("Error fetching types and states for tags:",r),{types:[],states:[],areaPaths:[]}}}async function oZ(e,t,r,n){if(!e.accessToken||!e.organization||!e.project)throw new Error("Missing required configuration");try{const s=[];if(s.push(`[System.WorkItemType] = '${t}'`),r&&r.length>0)if(r.length===1)s.push(`[System.State] = '${r[0]}'`);else{const j=r.map(b=>`'${b}'`).join(", ");s.push(`[System.State] IN (${j})`)}if(n&&n.length>0)if(n.length===1)s.push(`[System.AreaPath] UNDER '${n[0]}'`);else{const j=n.map(b=>`[System.AreaPath] UNDER '${b}'`);s.push(`(${j.join(" OR ")})`)}const i=`SELECT [System.Id] FROM WorkItems WHERE ${s.join(" AND ")} ORDER BY [System.ChangedDate] DESC`,l=`https://dev.azure.com/${e.organization}/${e.project}/_apis/wit/wiql?api-version=7.1`,u=await fetch(l,{method:"POST",headers:{Authorization:`Bearer ${e.accessToken}`,"Content-Type":"application/json"},body:JSON.stringify({query:i})});if(!u.ok)return console.warn("Failed to fetch tags, returning empty array"),[];const d=await u.json();if(!d.workItems||d.workItems.length===0)return[];const m=d.workItems.map(j=>j.id).slice(0,200),f=`https://dev.azure.com/${e.organization}/${e.project}/_apis/wit/workitems?ids=${m.join(",")}&fields=System.Tags&api-version=7.1`,p=await fetch(f,{headers:{Authorization:`Bearer ${e.accessToken}`,"Content-Type":"application/json"}});if(!p.ok)return console.warn("Failed to fetch work item details for tags"),[];const y=await p.json(),x=new Set;return y.value&&Array.isArray(y.value)&&y.value.forEach(j=>{j.fields&&j.fields["System.Tags"]&&j.fields["System.Tags"].split(";").map(k=>k.trim()).forEach(k=>{k&&x.add(k)})}),Array.from(x).sort()}catch(s){return console.warn("Error fetching tags, returning empty array:",s),[]}}async function rC(e){if(!e.accessToken||!e.organization||!e.project)throw new Error("Missing required configuration");const t=new Set;try{const r=[];let n=null;do{let s=`https://dev.azure.com/${e.organization}/${e.project}/_apis/wit/tags?api-version=7.1`;n&&(s+=`&continuationToken=${encodeURIComponent(n)}`);const i=await fetch(s,{headers:{Authorization:`Bearer ${e.accessToken}`,"Content-Type":"application/json"}});if(!i.ok){console.warn("Failed to fetch tags page, aborting remaining pages");break}const l=await i.json();l.value&&Array.isArray(l.value)&&l.value.forEach(u=>{u&&u.name&&r.push(u.name)}),n=i.headers.get("x-ms-continuationtoken")}while(n);r.forEach(s=>t.add(s))}catch(r){console.warn("Error fetching tags, returning empty array:",r)}try{(await lZ(e)).forEach(n=>t.add(n))}catch(r){console.warn("Error fetching tags via WIQL fallback:",r)}return Array.from(t).sort((r,n)=>r.localeCompare(n))}async function lZ(e){const t={query:"SELECT [System.Id] FROM WorkItems WHERE [System.TeamProject] = @project ORDER BY [System.ChangedDate] DESC"},r=`https://dev.azure.com/${e.organization}/${e.project}/_apis/wit/wiql?api-version=7.1`,n=await fetch(r,{method:"POST",headers:{Authorization:`Bearer ${e.accessToken}`,"Content-Type":"application/json"},body:JSON.stringify(t)});if(!n.ok)throw new Error(`Failed to fetch tags via WIQL: ${n.status}`);const s=await n.json();if(!s.workItems||s.workItems.length===0)return[];const i=s.workItems.map(f=>f.id).slice(0,200);if(i.length===0)return[];const l=`https://dev.azure.com/${e.organization}/${e.project}/_apis/wit/workitems?ids=${i.join(",")}&fields=System.Tags&api-version=7.1`,u=await fetch(l,{headers:{Authorization:`Bearer ${e.accessToken}`,"Content-Type":"application/json"}});if(!u.ok)throw new Error(`Failed to fetch work item details for tags via WIQL fallback: ${u.status}`);const d=await u.json(),m=new Set;return d.value&&Array.isArray(d.value)&&d.value.forEach(f=>{f.fields&&f.fields["System.Tags"]&&f.fields["System.Tags"].split(";").map(y=>y.trim()).forEach(y=>{y&&m.add(y)})}),Array.from(m)}function cZ(e){const t=new Date(e).getTime(),r=Date.now(),n=300*1e3;return t-r<n}async function uZ(){const e=new URLSearchParams(window.location.search),t=e.get("code"),r=e.get("state");if(!t)return null;const n=sessionStorage.getItem("oauth_state");if(r!==n)throw new Error("State mismatch - possible CSRF attack");const s=await eZ(t);return sessionStorage.removeItem("oauth_state"),s}async function dZ(){const e=Math.random().toString(36).substring(7);sessionStorage.setItem("oauth_state",e);const t=sessionStorage.getItem("currentSession");t&&sessionStorage.setItem("oauth_session_backup",t);const r=await ZQ(e);window.location.href=r}async function nC(e){const{organization:t,project:r,workItemType:n,query:s,accessToken:i}=e;if(!i)throw new Error("Not authenticated with Azure DevOps");try{let l;s?l=`SELECT [System.Id] FROM WorkItems WHERE ${s}`:l=`SELECT [System.Id] FROM WorkItems WHERE [System.WorkItemType] = '${n}' AND [System.State] = 'Active'`;const u=`https://dev.azure.com/${t}/${r}/_apis/wit/wiql?api-version=7.0`,d=await fetch(u,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${i}`},body:JSON.stringify({query:l})});if(!d.ok)throw new Error(`Azure DevOps query failed: ${d.status} ${d.statusText}`);const f=(await d.json()).workItems.map(C=>C.id);if(f.length===0)return[];const p=["System.Id","System.Title","System.Description","System.Tags","System.WorkItemType","System.State","Microsoft.VSTS.Common.Priority","System.AreaPath","System.IterationPath"].join(","),y=200,x=[];for(let C=0;C<f.length;C+=y){const T=f.slice(C,C+y).join(","),A=`https://dev.azure.com/${t}/${r}/_apis/wit/workitems?ids=${T}&fields=${p}&api-version=7.0`,L=await fetch(A,{headers:{Authorization:`Bearer ${i}`}});if(!L.ok)throw new Error(`Failed to fetch work items: ${L.status} ${L.statusText}`);const J=await L.json();J.value&&Array.isArray(J.value)&&x.push(...J.value)}if(x.length===0)return[];const j=new Map,b=new Map,k=new Map,_=10;for(let C=0;C<x.length;C+=_){const O=x.slice(C,C+_);await Promise.all(O.map(async T=>{try{const A=`https://dev.azure.com/${t}/${r}/_apis/wit/workitems/${T.id}?$expand=relations&api-version=7.0`,L=await fetch(A,{headers:{Authorization:`Bearer ${i}`}});if(L.ok){const J=await L.json();if(J.relations){for(const H of J.relations)if(H.rel==="System.LinkTypes.Hierarchy-Forward"){const me=H.url.match(/\/work[iI]tems\/(\d+)(?:\?|$|\/)/i);if(me){const Z=parseInt(me[1],10);j.set(T.id,Z)}}}}}catch(A){console.error(`Error fetching relations for work item ${T.id}:`,A)}}))}const E=Array.from(new Set(j.values()));if(E.length>0){const C=E.slice(0,200).join(","),O=["System.Id","System.Title","System.WorkItemType"].join(","),T=`https://dev.azure.com/${t}/${r}/_apis/wit/workitems?ids=${C}&fields=${O}&api-version=7.0`;try{const A=await fetch(T,{headers:{Authorization:`Bearer ${i}`}});if(A.ok){const L=await A.json();for(const J of L.value)k.set(J.id,J.fields["System.Title"]||""),J.fields["System.WorkItemType"]==="Epic"&&b.set(J.id,J.fields["System.Title"]||"")}}catch(A){console.error("Error fetching parent work items:",A)}}return x.map(C=>{let O=null;const T=j.get(C.id);if(T&&(O=b.get(T)||null,!O)){const A=k.get(T)}if(!O&&C.fields){const L=["System.Epic","Epic","Microsoft.VSTS.Common.Epic","Custom.Epic","EpicLink","EpicName",...Object.keys(C.fields).filter(J=>J.toLowerCase().includes("epic")&&!["System.Epic","Epic","Microsoft.VSTS.Common.Epic","Custom.Epic","EpicLink","EpicName"].includes(J))];for(const J of L){const H=C.fields[J];if(H!=null){if(typeof H=="string"&&H.trim()!==""){const me=parseInt(H.trim());if(!isNaN(me)&&me>0){if(O=b.get(me)||null,O)break}else{O=H.trim();break}}else if(typeof H=="number"&&(O=b.get(H)||null,O))break}}}return{id:C.id,fields:{"System.Title":C.fields["System.Title"],"System.Description":C.fields["System.Description"],"System.Tags":C.fields["System.Tags"],"System.WorkItemType":C.fields["System.WorkItemType"],"System.State":C.fields["System.State"],"Microsoft.VSTS.Common.Priority":C.fields["Microsoft.VSTS.Common.Priority"],"System.AreaPath":C.fields["System.AreaPath"],"System.IterationPath":C.fields["System.IterationPath"],Epic:O||void 0},url:`https://dev.azure.com/${t}/${r}/_workitems/edit/${C.id}`}})}catch(l){throw console.error("Error fetching from Azure DevOps:",l),l}}function sC(e){return e.map(t=>{let r;const n=t.fields.Epic,s=t.fields["System.WorkItemType"];if(n&&typeof n=="string"&&n.trim()!==""){const d=n.trim();d!==s&&d!=="Epic"&&d.toLowerCase()!=="epic"?r=d:console.warn(`Work item ${t.id} has epic field "${d}" which matches work item type "${s}" - ignoring`)}const l=(t.fields["System.Description"]||"").replace(/<[^>]*>/g,"").trim(),u=t.fields["System.Title"]||"Untitled";return r&&u===r&&console.warn(`Work item ${t.id}: Title "${u}" matches Epic name "${r}" - this may indicate a data issue`),{id:`ado-${t.id}`,title:u,description:l,votes:0,voters:[],epic:r||void 0,state:t.fields["System.State"]||void 0,areaPath:t.fields["System.AreaPath"]||void 0,tags:t.fields["System.Tags"]?t.fields["System.Tags"].split(";").map(d=>d.trim()).filter(d=>d):[],azureDevOpsId:t.id.toString(),azureDevOpsUrl:t.url,workItemType:s||void 0}})}function iC(){return"Product".split(",").map(t=>t.trim()).filter(t=>t.length>0)}const ha=e=>{const r=e.split("T")[0].split(" ")[0].split("-");if(r.length!==3)return new Date(e).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"});const n=parseInt(r[0],10),s=parseInt(r[1],10)-1,i=parseInt(r[2],10);return new Date(n,s,i).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})},wi=e=>new Date(e)<new Date,TT="/feature-voting-app/assets/colorpicker-CmB9zXJh.png",aC=[{bg:"#2D4660",text:"#FFFFFF",border:"#1D3144"},{bg:"#1E5461",text:"#FFFFFF",border:"#133742"},{bg:"#C89212",text:"#FFFFFF",border:"#A67810"},{bg:"#173B65",text:"#FFFFFF",border:"#0F2844"},{bg:"#2E5A8F",text:"#FFFFFF",border:"#1F4468"},{bg:"#4A6A8F",text:"#FFFFFF",border:"#3D5A7D"},{bg:"#5479A1",text:"#FFFFFF",border:"#4A6A8F"},{bg:"#6B8FBF",text:"#FFFFFF",border:"#5479A1"},{bg:"#3D7BAD",text:"#FFFFFF",border:"#2E5A8F"},{bg:"#258799",text:"#FFFFFF",border:"#145668"},{bg:"#36849B",text:"#FFFFFF",border:"#2A7489"},{bg:"#4098B3",text:"#FFFFFF",border:"#36849B"},{bg:"#2B9BAD",text:"#FFFFFF",border:"#1E7A89"},{bg:"#1FA3B5",text:"#FFFFFF",border:"#178290"},{bg:"#2D7A4E",text:"#FFFFFF",border:"#1E5A38"},{bg:"#3A9B5C",text:"#FFFFFF",border:"#2D7A4E"},{bg:"#52B876",text:"#FFFFFF",border:"#3A9B5C"},{bg:"#6FD492",text:"#FFFFFF",border:"#52B876"},{bg:"#4CAF7A",text:"#FFFFFF",border:"#3A9B5C"},{bg:"#7CB342",text:"#FFFFFF",border:"#689F38"},{bg:"#9CCC65",text:"#111827",border:"#7CB342"},{bg:"#E0A925",text:"#111827",border:"#C89212"},{bg:"#F4B729",text:"#111827",border:"#E0A925"},{bg:"#FFC940",text:"#111827",border:"#F4B729"},{bg:"#D4A017",text:"#FFFFFF",border:"#B8890F"},{bg:"#D87A35",text:"#FFFFFF",border:"#C4681F"},{bg:"#E88F3A",text:"#FFFFFF",border:"#D87A35"},{bg:"#FF9F4A",text:"#FFFFFF",border:"#E88F3A"},{bg:"#FF8C42",text:"#FFFFFF",border:"#E88F3A"},{bg:"#B83A2F",text:"#FFFFFF",border:"#9F2A21"},{bg:"#D44638",text:"#FFFFFF",border:"#B83A2F"},{bg:"#E85240",text:"#FFFFFF",border:"#D44638"},{bg:"#591D0F",text:"#FFFFFF",border:"#3C130A"},{bg:"#8A3420",text:"#FFFFFF",border:"#6F2818"},{bg:"#6B4C9A",text:"#FFFFFF",border:"#573A7F"},{bg:"#8E6BB5",text:"#FFFFFF",border:"#7556A1"},{bg:"#9B7AC7",text:"#FFFFFF",border:"#8E6BB5"},{bg:"#5D3F7A",text:"#FFFFFF",border:"#4A2F61"},{bg:"#492434",text:"#FFFFFF",border:"#311823"},{bg:"#5D2F43",text:"#FFFFFF",border:"#492434"},{bg:"#8B3A62",text:"#FFFFFF",border:"#6F2A4D"},{bg:"#A14A76",text:"#FFFFFF",border:"#8B3A62"},{bg:"#6A4234",text:"#FFFFFF",border:"#4B2D23"},{bg:"#8B5A3C",text:"#FFFFFF",border:"#6A4234"},{bg:"#A0694B",text:"#FFFFFF",border:"#8B5A3C"},{bg:"#7D5A3A",text:"#FFFFFF",border:"#6A4234"},{bg:"#3A3638",text:"#FFFFFF",border:"#2A2628"},{bg:"#4A4548",text:"#FFFFFF",border:"#3A3638"},{bg:"#5C5A5D",text:"#FFFFFF",border:"#4A4548"},{bg:"#7A8590",text:"#FFFFFF",border:"#5F6A74"},{bg:"#8F959B",text:"#111827",border:"#72777C"}],fZ=e=>e?e.trim().toLowerCase():"",hZ=e=>{let t=0;for(let r=0;r<e.length;r+=1)t=t*31+e.charCodeAt(r)>>>0;return t},yh=(e,t,r)=>Math.min(Math.max(e,t),r),mZ=e=>{if(!e)return null;let t=e.trim();return!t||(t.startsWith("#")||(t=`#${t}`),t.length===4&&(t=`#${t[1]}${t[1]}${t[2]}${t[2]}${t[3]}${t[3]}`),t.length!==7)?null:t.toUpperCase()},ib=e=>{const t=e.replace("#",""),r=parseInt(t,16);return{r:r>>16&255,g:r>>8&255,b:r&255}},pZ=({r:e,g:t,b:r})=>{const n=[e,t,r].map(s=>{const i=s/255;return i<=.03928?i/12.92:Math.pow((i+.055)/1.055,2.4)});return .2126*n[0]+.7152*n[1]+.0722*n[2]},gZ=e=>pZ(ib(e))>.6?"#111827":"#FFFFFF",oC=(e,t)=>{const{r,g:n,b:s}=ib(e),i=1+t/100,l=yh(Math.round(r*i),0,255),u=yh(Math.round(n*i),0,255),d=yh(Math.round(s*i),0,255);return`#${l.toString(16).padStart(2,"0")}${u.toString(16).padStart(2,"0")}${d.toString(16).padStart(2,"0")}`.toUpperCase()},yZ=(e,t)=>{const{r,g:n,b:s}=ib(e);return`rgba(${r}, ${n}, ${s}, ${yh(t,0,1)})`},qn=(e,t)=>{const r=mZ(t);if(r){const l=gZ(r);return{background:r,text:l,border:oC(r,-20),badgeBackground:yZ(r,.15),badgeText:l,hoverBackground:oC(r,-5),hoverText:l}}const n=fZ(e),s=n?hZ(n)%aC.length:0,i=aC[s];return{background:i.bg,text:i.text,border:i.border,badgeBackground:`${i.bg}1A`,badgeText:i.text,hoverBackground:i.bg,hoverText:i.text}};function IT({label:e="Product",products:t,value:r,onChange:n,fallbackName:s=null,isLoading:i=!1,error:l=null,disabled:u=!1,placeholder:d="Select a product",helperText:m,className:f="",allowAdd:p=!1,newProductName:y="",onNewProductNameChange:x,newProductColor:j,onNewProductColorChange:b,onCreateProduct:k,isCreatingProduct:_=!1,addHelperText:E,addButtonLabel:C="Add Product",addInputPlaceholder:O="e.g., Catalyst Cloud",allowDelete:T=!1,onRequestDeleteProduct:A}){const[L,J]=v.useState(!1),H=v.useRef(null),me=v.useRef(null),[Z,K]=v.useState(!1),[ce,z]=v.useState(!1),se=v.useMemo(()=>t.find(le=>le.id===r)??null,[t,r]),B=(se==null?void 0:se.name)??s??"",ue=B?qn(B,(se==null?void 0:se.color_hex)??null):null,oe=u||i||t.length===0;v.useEffect(()=>{if(!L)return;function le(Q){H.current&&!H.current.contains(Q.target)&&J(!1)}function de(Q){Q.key==="Escape"&&J(!1)}return document.addEventListener("mousedown",le),document.addEventListener("keydown",de),()=>{document.removeEventListener("mousedown",le),document.removeEventListener("keydown",de)}},[L]);const X=le=>{n(le),J(!1)},ee=!!(p&&x&&k),D=ee&&Z,q=!!b,Te=j??"#2D4660",we=!!(e&&e.trim().length>0),Ce=we||ee;return a.jsxs("div",{className:`space-y-3 ${f}`,children:[a.jsx("style",{children:`
        .product-picker__menu {
          box-shadow: 0px 12px 28px rgba(45, 70, 96, 0.18);
          width: 100%;
          background-color: #ffffff;
          overflow: hidden;
        }

        .product-picker__item {
          display: flex;
          width: 100%;
          align-items: center;
          justify-content: flex-start;
          gap: 0.75rem;
          padding: 0.65rem 0.75rem;
          font-size: 0.875rem;
          background: #ffffff;
          border: none;
          border-top: 1px solid rgba(203, 213, 225, 0.4);
          cursor: pointer;
          color: var(--product-color, #2D4660);
          transition: color 0.3s ease;
          text-align: left;
        }

        .product-picker__item:first-child {
          border-top: none;
        }

        .product-picker__item:hover,
        .product-picker__item:focus-visible {
          background-color: var(--product-light-bg, rgba(45, 70, 96, 0.1));
          outline: none;
        }

        .product-color-badge {
          width: 1.5rem;
          height: 1.5rem;
          border-radius: 0.35rem;
          flex-shrink: 0;
          background-color: var(--product-color, #2D4660);
          border: 1px solid var(--product-border-color, rgba(0,0,0,0.12));
          box-shadow: inset 0 0 0 1px rgba(255,255,255,0.35);
        }
      `}),a.jsxs("div",{className:"relative",ref:H,children:[Ce&&a.jsxs("div",{className:"flex items-center justify-between mb-1 gap-3",children:[we&&a.jsx("label",{className:"block text-sm font-medium text-gray-700",children:e}),ee&&a.jsx("div",{className:"flex-1 flex items-center justify-end gap-2",children:D?a.jsxs("div",{className:"flex items-center gap-2 transition-all duration-300",children:[a.jsx("input",{type:"text",value:y,onChange:le=>{z(!1),x==null||x(le.target.value)},placeholder:"Product name",className:"flex-1 h-10 px-3 border rounded-md text-sm focus:outline-none focus:ring-0",style:{borderColor:j&&y.trim().length>0?j:"#D1D5DB"}}),q&&y.trim().length>0&&a.jsxs(a.Fragment,{children:[a.jsx("button",{type:"button",onClick:()=>{var le;return(le=me.current)==null?void 0:le.click()},className:`relative h-10 w-10 rounded-md border shadow-sm flex items-center justify-center focus:outline-none focus:ring-2 focus:ring-offset-1 focus:ring-[#2d4660] ${j?"":"border-gray-300 bg-white"}`,style:j?{backgroundColor:j,borderColor:j}:void 0,"aria-label":"Choose product color",children:!j&&a.jsx("img",{src:"https://icon-library.com/images/color-wheel-icon-png/color-wheel-icon-png-25.jpg",alt:"",className:"h-7 w-7 object-contain pointer-events-none"})}),a.jsx("input",{ref:me,type:"color",value:Te,onChange:le=>{z(!1),b==null||b(le.target.value)},className:"sr-only"}),y.trim().length>0&&a.jsx("button",{type:"button",onClick:()=>z(!0),className:`h-10 px-3 rounded-md text-sm font-medium border transition-colors ${ce?"bg-green-50 border-green-500 text-green-700":"bg-white border-gray-300 text-gray-700 hover:bg-gray-50"}`,children:"Looks Great"})]}),y.trim().length>0&&j&&ce&&a.jsx("button",{type:"button",onClick:k,className:"h-10 px-4 bg-[#C89212] text-white rounded-md text-sm font-semibold hover:bg-[#A67810] transition-colors",children:_?"Creating":"Create New Product"})]}):a.jsx("button",{type:"button",onClick:()=>K(!0),className:"text-sm font-medium text-blue-600 hover:text-blue-700 whitespace-nowrap",children:"+ Create New Product"})})]}),a.jsxs("button",{type:"button",onClick:()=>!oe&&J(le=>!le),className:`relative flex w-full items-center justify-between rounded-md border px-3 py-2 text-left text-sm ${oe?"cursor-not-allowed bg-gray-100 text-gray-400 border-gray-200":"bg-white text-gray-900 border-gray-300 hover:border-[#2D4660]"}`,style:!oe&&ue?{borderColor:ue.border}:void 0,"aria-expanded":L,"aria-haspopup":"listbox",children:[a.jsxs("div",{className:"flex items-center gap-2 truncate",children:[ue&&a.jsx("span",{className:"inline-flex h-3.5 w-3.5 rounded-sm border border-white/60 shadow-inner",style:{backgroundColor:ue.background,borderColor:ue.border},"aria-hidden":"true"}),a.jsx("span",{className:`truncate ${B?"":"text-gray-400"}`,style:ue?{color:ue.background}:void 0,children:B||(t.length===0?"No products available":d)})]}),a.jsx(ts,{className:`ml-2 h-4 w-4 transition-transform ${L?"rotate-180":""} ${oe?"text-gray-300":"text-gray-500"}`})]}),L&&!oe&&a.jsx("div",{className:"product-picker__menu absolute left-0 z-50 mt-2 w-full overflow-hidden rounded-md border border-gray-200 bg-white",role:"listbox",children:a.jsx("div",{className:"max-h-60 overflow-y-auto py-1",children:t.map(le=>{const de=qn(le.name,le.color_hex??null),Q=r===le.id;return a.jsxs("div",{className:"product-picker__item",style:{"--product-color":de.background,"--product-light-bg":de.badgeBackground,"--product-border-color":de.border},children:[a.jsxs("button",{type:"button",className:"flex flex-1 items-center gap-3 text-left",onClick:()=>X(le.id),"aria-selected":Q,children:[a.jsx("span",{className:"product-color-badge","aria-hidden":"true"}),a.jsx("span",{className:"flex-1 truncate font-medium",children:le.name}),Q&&a.jsx(sr,{className:"h-4 w-4 text-gray-400"})]}),T&&A&&a.jsx("button",{type:"button",onClick:R=>{R.stopPropagation(),J(!1),A(le)},className:"ml-2 text-gray-400 hover:text-[#B83A2F]","aria-label":`Delete ${le.name}`,title:"Delete product",children:a.jsx(Xi,{className:"h-4 w-4"})})]},le.id)})})}),i&&a.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"Loading products"}),l&&a.jsx("p",{className:"mt-1 text-xs text-[#591D0F]",children:l}),!i&&!l&&m&&a.jsx("p",{className:"mt-1 text-xs text-gray-500",children:m})]}),ee&&E&&D&&a.jsx("p",{className:"text-xs text-gray-500",children:E})]})}const lC=["OpsVision Portal","MillTrack Insight","Quality Compass","Supply Sync","Roadmap Nexus","Fabricator Hub","Blueprint Studio","Velocity Forge","Navigator Suite","Catalyst Cloud"],cC=e=>{if(!e)return null;const t=e.trim();return t.length===0?null:t},vZ=e=>{let t=0;for(let r=0;r<e.length;r+=1)t=t*31+e.charCodeAt(r)>>>0;return lC[t%lC.length]};function zn(e,t){const r=e.product_id??e.productId??null;if(r&&t){const i=cC(t[r]);if(i)return i}const n=cC(e.product_name??e.productName);if(n)return n;const s=r||e.id||e.title||"default-product";return vZ(s)}const xZ=["Stakeholders need more time","New backlog items require votes","Clarify previous results","Technical issue resolved","Other"],uC="https://cdn.iconscout.com/icon/free/png-512/azure-devops-3628645-3029870.png";function dC({options:e,value:t,onChange:r,placeholder:n="Select...",label:s,disabled:i=!1,variant:l="default"}){const[u,d]=v.useState(!1),m=v.useRef(null);v.useEffect(()=>{function k(_){m.current&&!m.current.contains(_.target)&&d(!1)}return document.addEventListener("mousedown",k),()=>document.removeEventListener("mousedown",k)},[]);const f=k=>{r(k),d(!1)},p=t||n,y=l==="green"?"border-green-600":"border-gray-300",x=l==="green"?"text-green-600":"text-gray-400",j=l==="green"?"bg-green-50":"bg-blue-50",b=l==="green"?"text-green-600":"text-[#1E5461]";return a.jsxs("div",{ref:m,className:"relative",children:[s&&a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:s}),a.jsxs("div",{onClick:()=>!i&&d(!u),className:`w-full px-3 py-2 border ${y} rounded-md min-h-[38px] flex items-center justify-between ${i?"bg-gray-100 cursor-not-allowed":"bg-white cursor-pointer"}`,children:[a.jsx("span",{className:`text-sm ${t?"text-gray-900":"text-gray-400"}`,children:p}),a.jsx(ts,{className:`h-4 w-4 ${x} transition-transform ${u?"transform rotate-180":""}`})]}),u&&!i&&a.jsx("div",{className:"absolute z-50 w-full mt-1 bg-white border border-gray-300 rounded-md shadow-lg max-h-60 overflow-y-auto",children:e.map(k=>a.jsxs("div",{onClick:()=>f(k),className:`px-3 py-2 cursor-pointer hover:bg-gray-50 flex items-center justify-between ${t===k?j:""}`,children:[a.jsx("span",{className:"text-sm text-gray-900",children:k}),t===k&&a.jsx(sr,{className:`h-4 w-4 ${b}`})]},k))})]})}function oh({options:e,value:t,onChange:r,placeholder:n="Select...",label:s,searchable:i=!1,disabled:l=!1}){const[u,d]=v.useState(!1),[m,f]=v.useState(""),p=v.useRef(null),y=v.useRef(null);v.useEffect(()=>{function _(E){p.current&&!p.current.contains(E.target)&&(d(!1),f(""))}return document.addEventListener("mousedown",_),()=>document.removeEventListener("mousedown",_)},[]),v.useEffect(()=>{u&&i&&y.current&&y.current.focus()},[u,i]);const x=_=>{t.includes(_)?r(t.filter(E=>E!==_)):r([...t,_])},j=(_,E)=>{E.stopPropagation(),r(t.filter(C=>C!==_))},b=_=>{_.stopPropagation(),r([])},k=i&&m?e.filter(_=>_.toLowerCase().includes(m.toLowerCase())):e;return a.jsxs("div",{ref:p,className:"relative",children:[s&&a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:s}),a.jsxs("div",{onClick:()=>!l&&d(!u),className:`w-full px-3 py-2 border border-gray-300 rounded-md min-h-[38px] flex items-center justify-between ${l?"bg-gray-100 cursor-not-allowed":"bg-white cursor-pointer"}`,children:[a.jsx("div",{className:"flex-1 flex flex-wrap gap-1",children:t.length===0?a.jsx("span",{className:"text-sm text-gray-400",children:n}):t.map(_=>a.jsxs("span",{className:"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-[#2D4660]/10 text-[#2D4660]",children:[_,!l&&a.jsx("button",{type:"button",onClick:E=>j(_,E),className:"ml-1 hover:text-[#173B65]",children:a.jsx(Ms,{className:"h-3 w-3"})})]},_))}),a.jsxs("div",{className:"flex items-center gap-1 ml-2",children:[t.length>0&&!l&&a.jsx("button",{type:"button",onClick:b,className:"text-gray-400 hover:text-gray-600",children:a.jsx(Ms,{className:"h-4 w-4"})}),a.jsx(ts,{className:`h-4 w-4 text-gray-400 transition-transform ${u?"transform rotate-180":""}`})]})]}),u&&!l&&a.jsxs("div",{className:"absolute z-50 w-full mt-1 bg-white border border-gray-300 rounded-md shadow-lg max-h-60 overflow-hidden flex flex-col",children:[i&&a.jsx("div",{className:"p-2 border-b border-gray-200",children:a.jsx("input",{ref:y,type:"text",value:m,onChange:_=>f(_.target.value),onClick:_=>_.stopPropagation(),placeholder:"Type to search...",className:"w-full px-3 py-1.5 text-sm border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[#2D4660]"})}),a.jsx("div",{className:"overflow-y-auto",children:k.length>0?k.map(_=>a.jsxs("div",{onClick:()=>x(_),className:`px-3 py-2 cursor-pointer hover:bg-gray-50 flex items-center justify-between ${t.includes(_)?"bg-[#2D4660]/5":""}`,children:[a.jsx("span",{className:"text-sm",children:_}),t.includes(_)&&a.jsx(sr,{className:"h-4 w-4 text-[#1E5461]"})]},_)):a.jsx("div",{className:"px-3 py-2 text-sm text-gray-500 text-center",children:"No matches found"})})]})]})}function wZ({isOpen:e,onClose:t,previewFeatures:r,onConfirmSync:n,onReplaceAll:s}){const[i,l]=v.useState(new Set);v.useEffect(()=>{e&&r&&r.length>0&&l(new Set(r.map(y=>y.id)))},[e,r]);const u=y=>{l(x=>{const j=new Set(x);return j.has(y)?j.delete(y):j.add(y),j})},d=()=>{r&&(i.size===r.length?l(new Set):l(new Set(r.map(y=>y.id))))},m=async()=>{if(!r)return;const y=r.filter(x=>i.has(x.id));await n(y),t()},f=async()=>{!r||!s||(await s(),t())},p=i.size;return a.jsx(hn,{isOpen:e,onClose:t,title:"Preview Azure DevOps Features",maxWidth:"max-w-6xl",children:a.jsx("div",{className:"space-y-4",children:r&&r.length>0?a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"bg-[#1E5461]/5 border border-[#1E5461]/20 rounded-lg p-4",children:a.jsx("p",{className:"text-[#1E5461] font-medium",children:"Select the work items you want to add to your voting session."})}),a.jsx("div",{className:"border border-gray-200 rounded-lg overflow-hidden",children:a.jsx("div",{className:"max-h-96 overflow-y-auto",children:a.jsxs("table",{className:"w-full",children:[a.jsx("thead",{className:"bg-gray-50 sticky top-0",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-4 py-3 text-left",children:a.jsx("button",{type:"button",onClick:y=>{y.stopPropagation(),d()},className:"flex items-center justify-center",children:r.length>0&&i.size===r.length?a.jsx(sr,{className:"w-5 h-5 text-green-600"}):a.jsx(c0,{className:"w-5 h-5 text-gray-400"})})}),a.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-gray-700 uppercase",children:"Title"}),a.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-gray-700 uppercase",children:"Type"}),a.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-gray-700 uppercase",children:"State"}),a.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-gray-700 uppercase",children:"Epic"}),a.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-gray-700 uppercase",children:"Area Path"})]})}),a.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:r.map(y=>{const x=i.has(y.id);return a.jsxs("tr",{className:`hover:bg-gray-50 cursor-pointer ${x?"bg-blue-50":""}`,onClick:()=>u(y.id),children:[a.jsx("td",{className:"px-4 py-3",children:a.jsx("button",{type:"button",onClick:j=>{j.stopPropagation(),u(y.id)},className:"flex items-center justify-center",children:x?a.jsx(sr,{className:"w-5 h-5 text-green-600"}):a.jsx(c0,{className:"w-5 h-5 text-gray-400"})})}),a.jsx("td",{className:"px-4 py-3",children:a.jsxs("div",{className:"flex items-start gap-2",children:[a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("div",{className:"text-sm font-medium text-gray-900",children:y.title}),y.description&&y.description.trim()&&a.jsxs("div",{className:"text-xs text-gray-500 mt-1 line-clamp-2",children:[y.description.replace(/<[^>]*>/g,"").substring(0,100),y.description.replace(/<[^>]*>/g,"").length>100?"...":""]}),y.tags&&y.tags.length>0&&a.jsxs("div",{className:"flex flex-wrap gap-1 mt-1",children:[y.tags.slice(0,3).map((j,b)=>a.jsx("span",{className:"px-1.5 py-0.5 text-xs bg-gray-100 text-gray-600 rounded",children:j},b)),y.tags.length>3&&a.jsxs("span",{className:"px-1.5 py-0.5 text-xs text-gray-500",children:["+",y.tags.length-3]})]})]}),y.azureDevOpsId&&a.jsx(fp,{id:y.azureDevOpsId,url:y.azureDevOpsUrl||""})]})}),a.jsx("td",{className:"px-4 py-3 align-middle",children:a.jsx("div",{className:"flex items-center",children:y.workItemType==="Epic"?a.jsx(vs,{className:"w-5 h-5 text-green-600"}):y.workItemType==="Feature"?a.jsx(ME,{className:"w-5 h-5 text-purple-600"}):y.workItemType?a.jsx("span",{className:"px-2 py-1 text-xs font-medium bg-[#492434]/10 text-[#492434] rounded",children:y.workItemType}):null})}),a.jsx("td",{className:"px-4 py-3 align-middle",children:y.state&&a.jsx("span",{className:"px-2 py-1 text-xs font-medium bg-[#1E5461]/10 text-[#1E5461] rounded",children:y.state})}),a.jsx("td",{className:"px-4 py-3 align-middle",children:y.workItemType!=="Epic"&&y.epic?a.jsx(qd,{name:y.epic}):a.jsx("span",{className:"text-xs text-gray-400",children:""})}),a.jsx("td",{className:"px-4 py-3 align-middle",children:y.areaPath?a.jsx("div",{className:"text-xs text-gray-700 max-w-xs truncate",title:y.areaPath,children:y.areaPath}):a.jsx("span",{className:"text-xs text-gray-400",children:""})})]},y.id)})})]})})}),a.jsxs("div",{className:"flex justify-between items-center pt-4 border-t",children:[a.jsxs("div",{className:"text-sm text-gray-600",children:[p," of ",r.length," selected"]}),a.jsxs("div",{className:"flex space-x-2",children:[a.jsxs(nt,{variant:"primary",onClick:m,disabled:p===0,className:"flex items-center",children:[a.jsx(Un,{className:"h-4 w-4 mr-2"}),"Add ",p," Feature",p!==1?"s":""]}),s&&a.jsxs(nt,{variant:"danger",onClick:f,className:"flex items-center",children:[a.jsx(_l,{className:"h-4 w-4 mr-2"}),"Replace All Features"]})]})]})]}):a.jsxs("div",{className:"text-center py-8",children:[a.jsx(Ht,{className:"h-12 w-12 text-gray-400 mx-auto mb-3"}),a.jsx("p",{className:"text-gray-600",children:"No features found to sync"})]})})})}function bZ({config:e,onUpdateConfig:t,onPreview:r,isFetching:n,availableStates:s,availableAreaPaths:i,availableTags:l,previewFeatures:u,showPreviewModal:d,onFetchStatesForType:m,onFetchAreaPathsForTypeAndState:f,onFetchTagsForTypeStateAndAreaPath:p,onFetchTypesAndStatesForAreaPath:y,onFetchTypesAndStatesForTags:x,onFetchTypesAndAreaPathsForStates:j,resetSignal:b}){const k=AT,[_,E]=v.useState(!1),[C,O]=v.useState(null),[T,A]=v.useState(!1),[L,J]=v.useState(!1),[H,me]=v.useState(!1),Z=v.useRef(null),K=v.useRef(!1),ce=v.useRef(!1),z=v.useRef(!1),se=v.useRef(!1),B={workItemTypes:[],states:[],areaPaths:[],tags:[],query:""},{register:ue,handleSubmit:oe,watch:X,control:ee,setValue:D,reset:q}=cd({defaultValues:B}),Te=v.useCallback(()=>{q({...B}),E(!1),ce.current=!1,z.current=!1,se.current=!1},[q]);v.useEffect(()=>{Te()},[b,Te]);const we=X("workItemTypes"),Ce=X("states"),le=X("areaPaths"),de=X("tags"),Q=X("query"),R=v.useCallback((V,Fe,Be,dt,ft,Dt)=>{const Nt=[];if(V&&V.length>0)if(V.length===1)Nt.push(`[System.WorkItemType] = '${V[0]}'`);else{const Xt=V.map(M=>`'${M}'`).join(", ");Nt.push(`[System.WorkItemType] IN (${Xt})`)}if(Fe&&Fe.length>0)if(Fe.length===1)Nt.push(`[System.State] = '${Fe[0]}'`);else{const Xt=Fe.map(M=>`'${M}'`).join(", ");Nt.push(`[System.State] IN (${Xt})`)}if(Be&&Be.length>0)if(Be.length===1)Nt.push(`[System.AreaPath] UNDER '${Be[0]}'`);else{const Xt=Be.map(M=>`[System.AreaPath] UNDER '${M}'`);Nt.push(`(${Xt.join(" OR ")})`)}if(dt&&dt.length>0){const Xt=dt.map(M=>`[System.Tags] CONTAINS '${M}'`);Nt.push(`(${Xt.join(" OR ")})`)}return Dt&&ft&&Nt.push(`(${ft})`),Nt.length>0?Nt.join(" AND "):void 0},[]);v.useEffect(()=>{if(!(ce.current||z.current||se.current)&&m){if(!we||we.length===0){m(void 0);return}m(we[0])}},[we,m]),v.useEffect(()=>{if(ce.current||z.current||!f)return;(async()=>{J(!0);try{await f(we&&we.length>0?we[0]:void 0,Ce||[])}finally{J(!1)}})()},[we,Ce,f]),v.useEffect(()=>{if(z.current||!p||!we||we.length===0)return;const V=async()=>{me(!0);try{await p(we[0],Ce||[],le||[])}finally{me(!1)}},Fe=setTimeout(()=>{V()},100);return()=>{clearTimeout(Fe),me(!1)}},[we,Ce,le,p]),v.useEffect(()=>{if(!y||z.current||se.current||!le||le.length===0)return;const V=we&&we.length>0,Fe=Ce&&Ce.length>0;V&&Fe||(ce.current=!0,y(le).then(({types:Be,states:dt})=>{Be.length>0&&!V&&D("workItemTypes",Be,{shouldDirty:!1}),dt.length>0&&!Fe&&D("states",dt,{shouldDirty:!1})}).finally(()=>{setTimeout(()=>{ce.current=!1},300)}))},[le,we,Ce,y,D]),v.useEffect(()=>{x&&(ce.current||se.current||!de||de.length===0||(z.current=!0,x(de).then(({types:V,states:Fe,areaPaths:Be})=>{V.length>0&&D("workItemTypes",V,{shouldDirty:!1}),Fe.length>0&&D("states",Fe,{shouldDirty:!1}),Be.length>0&&D("areaPaths",Be,{shouldDirty:!1})}).finally(()=>{setTimeout(()=>{z.current=!1},300)})))},[de,x,D]),v.useEffect(()=>{!j||ce.current||z.current||!Ce||Ce.length===0||we&&we.length>0||(se.current=!0,j(Ce).then(({types:Fe})=>{Fe.length>0&&D("workItemTypes",Fe,{shouldDirty:!1})}).finally(()=>{setTimeout(()=>{se.current=!1},300)}))},[Ce,we,j,D]),v.useEffect(()=>{if(Ce&&Ce.length>0&&s.length>0){const V=Ce.filter(Fe=>s.includes(Fe));V.length!==Ce.length&&D("states",V)}},[s,Ce,D]),v.useEffect(()=>{if(le&&le.length>0&&i.length>0){const V=le.filter(Fe=>i.includes(Fe));V.length!==le.length&&(D("areaPaths",V),V.length===0&&D("tags",[]))}},[i,le,D]),v.useEffect(()=>{if(de&&de.length>0&&l.length>0){const V=de.filter(Fe=>l.includes(Fe));V.length!==de.length&&D("tags",V)}},[l,de,D]);const ge=v.useCallback(async()=>{if(!e.enabled||!e.accessToken||!we||we.length===0){O(null);return}try{A(!0);const V=we[0],Fe=R(we||[],Ce||[],le||[],de||[],Q||"",_);let Be="";Fe?Be=`SELECT [System.Id] FROM WorkItems WHERE ${Fe}`:Be=`SELECT [System.Id] FROM WorkItems WHERE [System.WorkItemType] = '${V}' AND [System.State] = 'Active'`;const dt=`https://dev.azure.com/${e.organization}/${e.project}/_apis/wit/wiql?api-version=7.0`,ft=await fetch(dt,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${e.accessToken}`},body:JSON.stringify({query:Be})});if(!ft.ok)throw new Error(`Azure DevOps query failed: ${ft.status} ${ft.statusText}`);const Dt=await ft.json(),Nt=Dt.workItems?Dt.workItems.length:0;O(Nt)}catch(V){console.error("[FilterForm] Error fetching feature count:",V),O(null)}finally{A(!1)}},[e,we,Ce,le,de,Q,_,R]);v.useEffect(()=>(Z.current!==null&&window.clearTimeout(Z.current),O(null),we&&we.length>0&&e.enabled&&e.accessToken&&(Z.current=window.setTimeout(()=>{ge()},300)),()=>{Z.current!==null&&window.clearTimeout(Z.current)}),[we,Ce,le,de,Q,_,e.enabled,e.accessToken,ge]),v.useEffect(()=>{if(d&&!K.current&&u){const V=u.length;O(V)}K.current=d||!1},[d,u]),v.useEffect(()=>{u&&u.length>0&&!T&&O(u.length)},[u,T]),v.useEffect(()=>{const V=R(we||[],Ce||[],le||[],de||[],Q||"",_),Fe={...e,workItemType:we&&we.length>0?we[0]:e.workItemType||"Feature",query:V,states:Ce&&Ce.length>0?Ce:void 0,areaPath:le&&le.length>0?le[0]:void 0,tags:de&&de.length>0?de:void 0},Be=window.setTimeout(()=>{t(Fe)},100);return()=>{window.clearTimeout(Be)}},[we,Ce,le,de,Q,_,R,t]);const $e=async V=>{await r()};return a.jsxs("form",{onSubmit:oe($e),className:"bg-gray-50 p-4 rounded-lg border border-gray-200",children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsxs("h3",{className:"text-lg font-medium text-[#2D4660] flex items-center",children:[a.jsx(iF,{className:"h-5 w-5 mr-2"}),"Filter Work Items"]}),a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("button",{type:"button",onClick:Te,className:"text-xs text-[#576C71] hover:text-[#2D4660] font-medium border border-transparent hover:border-[#576C71] rounded-full px-2 py-0.5 transition",children:"Clear All Filters"}),a.jsx("button",{type:"button",onClick:()=>E(!_),className:"text-xs text-[#1E5461] hover:text-[#2D4660] font-medium",children:_?" Hide Advanced WIQL":"Show Advanced WIQL "})]})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-4",children:[a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[a.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Work Item Type"}),a.jsx("span",{className:"px-2 py-0.5 rounded-full text-xs font-semibold text-white bg-[#2D4660]",children:k.length})]}),a.jsx(Nc,{name:"workItemTypes",control:ee,render:({field:V})=>a.jsx(oh,{options:k,value:V.value,onChange:V.onChange,placeholder:"Select types..."})}),a.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"Click to select multiple types"})]}),a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[a.jsx("span",{className:"text-sm font-medium text-gray-700",children:"State (Optional)"}),a.jsx("span",{className:"px-2 py-0.5 rounded-full text-xs font-semibold text-white bg-[#1E5461]",children:(s==null?void 0:s.length)||0})]}),a.jsx(Nc,{name:"states",control:ee,render:({field:V})=>a.jsx(oh,{options:s,value:V.value,onChange:V.onChange,placeholder:"Select states...",disabled:s.length===0})}),a.jsx("p",{className:"mt-1 text-xs text-gray-500",children:s.length===0?"Loading states...":"Filtered by work item type"})]}),a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[a.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Area Path (Optional)"}),a.jsx("span",{className:"px-2 py-0.5 rounded-full text-xs font-semibold text-white bg-[#576C71]",children:(i==null?void 0:i.length)||0})]}),a.jsx(Nc,{name:"areaPaths",control:ee,render:({field:V})=>a.jsx(oh,{options:i,value:V.value,onChange:V.onChange,placeholder:"Select area paths...",searchable:!0,disabled:i.length===0})}),a.jsx("p",{className:"mt-1 text-xs text-gray-500",children:L?"Loading area paths...":i.length===0?"No area paths found for current filters":"Filtered by type & state"})]}),a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[a.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Tags (Optional)"}),a.jsx("span",{className:"px-2 py-0.5 rounded-full text-xs font-semibold text-white bg-[#C89212]",children:(l==null?void 0:l.length)||0})]}),a.jsx(Nc,{name:"tags",control:ee,render:({field:V})=>a.jsx(oh,{options:l,value:V.value,onChange:V.onChange,placeholder:"Select tags...",searchable:!0,disabled:l.length===0&&!H})}),a.jsx("p",{className:"mt-1 text-xs text-gray-500",children:!we||we.length===0?"Select work item type to see tags":H?"Loading tags...":l.length===0?"No tags found for current filters":"Filtered by type, state & area"})]})]}),_&&a.jsxs("div",{className:"mb-4",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Advanced WIQL Query (Optional)"}),a.jsx("input",{...ue("query"),placeholder:"e.g., [System.Priority] = 1",className:"w-full px-3 py-2 border border-gray-300 rounded-md text-sm"}),a.jsxs("p",{className:"mt-1 text-xs text-gray-500",children:["Will be combined with above filters using AND."," ",a.jsx("a",{href:"https://learn.microsoft.com/en-us/azure/devops/boards/queries/wiql-syntax",target:"_blank",rel:"noopener noreferrer",className:"text-[#1E5461] hover:text-[#2D4660]",children:"WIQL syntax reference "})]})]}),a.jsx("div",{className:"flex justify-end",children:a.jsxs(nt,{variant:"gold",type:"submit",disabled:(()=>{const V=((we==null?void 0:we.length)??0)>0,Fe=((Ce==null?void 0:Ce.length)??0)>0,Be=((le==null?void 0:le.length)??0)>0,dt=((de==null?void 0:de.length)??0)>0,ft=Q&&Q.trim().length>0;return n||T||!(V||Fe||Be||dt||ft)})(),className:"flex items-center",children:[n&&a.jsx(_l,{className:"animate-spin h-4 w-4 mr-2"}),n?"Loading...":C!==null&&!T?`Preview ${C} Feature${C!==1?"s":""}`:"Preview Features"]})})]})}function jZ({session:e,featureCount:t,onSubmit:r,onCancel:n,onRequestDeleteSession:s,isDeletingSession:i,productName:l,products:u,isLoadingProducts:d,productError:m,onRequestDeleteProduct:f,onProductColorUpdated:p}){const[y,x]=v.useState(null),[j,b]=v.useState(!1),[k,_]=v.useState("#2D4660"),[E,C]=v.useState(null),[O,T]=v.useState(!1);v.useRef(null);const A=le=>{if(!le||typeof le!="string")return new Date;const Q=le.split("T")[0].split(" ")[0].split("-");if(Q.length!==3)return new Date;const R=parseInt(Q[0],10),ge=parseInt(Q[1],10),$e=parseInt(Q[2],10);if(isNaN(R)||isNaN(ge)||isNaN($e))return new Date;const V=new Date(R,ge-1,$e,0,0,0,0);return isNaN(V.getTime())?new Date:V},L=le=>{if(!le||isNaN(le.getTime()))return new Date().toISOString().split("T")[0];const de=le.getFullYear(),Q=String(le.getMonth()+1).padStart(2,"0"),R=String(le.getDate()).padStart(2,"0");return`${de}-${Q}-${R}`},J=(le,de)=>{const Q=le.getFullYear(),R=le.getMonth(),ge=le.getDate();return new Date(Q,R,ge+de,0,0,0,0)},H=v.useMemo(()=>{const le={};return u.forEach(de=>{de.id&&de.name&&(le[de.id]=de.name)}),le},[u]),{register:me,handleSubmit:Z,watch:K,reset:ce,control:z,setValue:se,formState:{errors:B}}=cd({defaultValues:{productId:e.productId??e.product_id??"",title:e.title,goal:e.goal,startDate:e.startDate.split("T")[0],endDate:e.endDate.split("T")[0],useAutoVotes:e.useAutoVotes||!1,votesPerUser:e.votesPerUser}});v.useEffect(()=>{const le=e.startDate.split("T")[0];ce({productId:e.productId??e.product_id??"",title:e.title,goal:e.goal,startDate:le,endDate:e.endDate.split("T")[0],useAutoVotes:e.useAutoVotes||!1,votesPerUser:e.votesPerUser}),q.current=le},[e,ce]);const ue=e.productName??e.product_name??l??"",oe=e.productId??e.product_id??"";v.useEffect(()=>{if(!u.length)return;if(oe){u.some(Q=>Q.id===oe)&&se("productId",oe,{shouldDirty:!1,shouldTouch:!1});return}if(!ue)return;const le=u.find(de=>de.name.toLowerCase()===ue.toLowerCase());le&&se("productId",le.id,{shouldDirty:!1,shouldTouch:!1})},[u,oe,ue,se]);const X=K("useAutoVotes"),ee=K("productId"),D=K("startDate"),q=v.useRef("");v.useEffect(()=>{if(D&&D!==q.current){q.current=D;const le=A(D),de=J(le,14);se("endDate",L(de),{shouldDirty:!0})}},[D,se]);const Te=v.useMemo(()=>!E||!ee?u:u.map(le=>le.id===ee?{...le,color_hex:E}:le),[u,E,ee]);v.useEffect(()=>{if(!ee)return;u.some(de=>de.id===ee)||se("productId","",{shouldDirty:!0,shouldTouch:!0})},[ee,u,se]),v.useEffect(()=>{if(ee&&u.length>0){const le=u.find(de=>de.id===ee);if(le){const de=le.color_hex??null;x(de),_(de||"#2D4660"),C(null),b(!1)}}else ee||(x(null),_("#2D4660"),C(null),b(!1))},[ee,u]);const we=X?Math.max(1,Math.floor(t/2)):K("votesPerUser"),Ce=async le=>{try{if(E&&ee){T(!0);try{await wx(ee,{color_hex:E}),p&&p(),C(null),x(E)}catch(de){console.error("Error updating product color:",de)}finally{T(!1)}}r(le)}catch(de){throw console.error("ERROR in handleFormSubmit:",de),de}};return a.jsxs("form",{onSubmit:Z(le=>Ce(le),le=>{}),children:[a.jsx(Nc,{control:z,name:"productId",render:({field:le})=>{const de=Te.find(Be=>Be.id===le.value)??null,Q=le.value?H[le.value]??null:null,R=de?null:Q??(ue||null),ge=!!le.value,$e=(de==null?void 0:de.color_hex)||null,V=de?qn(de.name,$e??null):null,Fe=(V==null?void 0:V.background)||null;return a.jsx("div",{className:"mb-4",children:a.jsxs("div",{className:"flex items-end gap-3",children:[a.jsx("div",{className:"flex-1",children:a.jsx(IT,{products:Te,value:le.value,onChange:Be=>{le.onChange(Be)},fallbackName:R,isLoading:d,error:m,disabled:d||Te.length===0,helperText:!d&&Te.length===0&&!m?"No products found yet. Create products from the session creation modal.":void 0,allowDelete:!!f,onRequestDeleteProduct:f})}),ge&&a.jsxs("div",{className:"flex items-center gap-2 pb-0.5",children:[a.jsx("label",{className:"text-sm font-medium text-gray-700 whitespace-nowrap",children:"Product Color"}),a.jsx("button",{type:"button",onClick:()=>{const Be=Fe||"#2D4660";_(Be),x(Be),b(!0)},className:"block w-10 h-10 rounded-md border-2 border-gray-300 hover:border-gray-400 transition-all shadow-sm",style:{backgroundColor:Fe||"#2D4660",borderColor:(V==null?void 0:V.border)||"#D1D5DB"},title:"Change product color"})]})]})})}}),a.jsxs("div",{className:"mb-4",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Session Title"}),a.jsx("input",{...me("title",{required:"Title is required"}),className:"w-full px-3 py-2 border border-gray-300 rounded-md"}),B.title&&a.jsx("p",{className:"mt-1 text-sm text-red-600",children:B.title.message})]}),a.jsxs("div",{className:"mb-4",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Goal"}),a.jsx("textarea",{...me("goal",{required:"Goal is required"}),rows:2,className:"w-full px-3 py-2 border border-gray-300 rounded-md"}),B.goal&&a.jsx("p",{className:"mt-1 text-sm text-red-600",children:B.goal.message})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Start Date"}),a.jsx("input",{type:"date",...me("startDate",{required:"Start date is required"}),className:"w-full px-3 py-2 border border-gray-300 rounded-md"}),B.startDate&&a.jsx("p",{className:"mt-1 text-sm text-red-600",children:B.startDate.message})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"End Date"}),a.jsx("input",{type:"date",...me("endDate",{required:"End date is required"}),className:"w-full px-3 py-2 border border-gray-300 rounded-md"}),B.endDate&&a.jsx("p",{className:"mt-1 text-sm text-red-600",children:B.endDate.message})]})]}),a.jsxs("div",{className:"mb-4 bg-[#1E5461]/5 border border-[#1E5461]/20 rounded-lg p-4",children:[a.jsxs("div",{className:"flex items-start",children:[a.jsx("input",{type:"checkbox",...me("useAutoVotes"),className:"mt-1 h-4 w-4 text-[#399E5A] border-gray-300 rounded accent-[#399E5A]"}),a.jsxs("div",{className:"ml-3",children:[a.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Automatically calculate votes per user"}),a.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:["Each user gets half the number of features (minimum 1 vote). Currently: ",we," votes"]})]})]}),!X&&a.jsxs("div",{className:"mt-3",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Votes Per User"}),a.jsx("input",{type:"number",min:"1",...me("votesPerUser",{required:X?!1:"Votes per user is required",min:{value:1,message:"Must be at least 1"}}),className:"w-full px-3 py-2 border border-gray-300 rounded-md"}),B.votesPerUser&&a.jsx("p",{className:"mt-1 text-sm text-red-600",children:B.votesPerUser.message})]})]}),a.jsxs("div",{className:"mt-6 flex flex-col gap-3 border-t border-gray-200 pt-4 sm:flex-row sm:items-center sm:justify-between",children:[a.jsxs(nt,{variant:"danger",type:"button",onClick:()=>s(),disabled:i,className:"flex items-center gap-2",children:[a.jsx(Xi,{className:"h-4 w-4"}),i?"Deleting...":"Delete Session"]}),a.jsxs("div",{className:"flex w-full justify-end gap-2 sm:w-auto",children:[a.jsx(nt,{variant:"secondary",type:"button",onClick:n,children:"Cancel"}),a.jsx(nt,{variant:"primary",type:"button",onClick:async le=>{le.preventDefault(),le.stopPropagation(),K(),await Z(de=>Ce(de),de=>{alert("Please fix form errors: "+JSON.stringify(de))})()},children:"Save Changes"})]})]}),j&&ee&&(()=>{const le=Te.find(de=>de.id===ee);return le?a.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",onClick:()=>{b(!1),x(le.color_hex??null),_(le.color_hex??"#2D4660"),C(null)},children:a.jsx("div",{className:"bg-white rounded-lg shadow-xl px-3 py-2 w-auto mx-4",onClick:de=>de.stopPropagation(),children:a.jsxs("div",{className:"flex gap-3 items-stretch",children:[a.jsxs("div",{className:"flex-shrink-0",style:{width:"240px",height:"260px"},children:[a.jsx("input",{id:"native-color-input",type:"color",value:k,onChange:de=>{_(de.target.value),x(de.target.value)},ref:de=>{de&&j&&setTimeout(()=>de.click(),50)},className:"opacity-0 absolute",style:{width:"1px",height:"1px"}}),a.jsx("div",{className:"w-full h-full"})]}),a.jsx("button",{type:"button",onClick:()=>{if(!ee||!k)return;const de=Te.find(R=>R.id===ee);if(!de)return;if((de.color_hex||null)===k){b(!1);return}C(k),x(k),b(!1)},disabled:O,className:"px-6 rounded-lg text-white font-bold shadow-lg hover:shadow-xl transition-all flex flex-col items-center justify-center gap-3 text-lg flex-shrink-0 disabled:opacity-50 disabled:cursor-not-allowed",style:{backgroundColor:k,height:"260px",minWidth:"100px"},children:O?a.jsx(_l,{className:"h-8 w-8 animate-spin"}):a.jsxs(a.Fragment,{children:[a.jsx(sr,{className:"h-8 w-8"}),a.jsxs("div",{className:"text-center leading-tight",children:[a.jsx("div",{children:"Looks"}),a.jsx("div",{children:"Good"})]})]})})]})})}):null})()]})}function SZ({features:e,onAddFeature:t,onUpdateFeature:r,onDeleteFeature:n,onShowResults:s,onRequestDeleteSession:i,isDeletingSession:l,showAddForm:u,setShowAddForm:d,editingFeature:m,setEditingFeature:f,onLogout:p,onShowVoterView:y,votingSession:x,azureDevOpsConfig:j,onUpdateAzureDevOpsConfig:b,onPreviewAzureDevOpsFeatures:k,onDisconnectAzureDevOps:_,isFetchingAzureDevOps:E,azureFetchError:C,onInitiateOAuth:O,availableStates:T,availableAreaPaths:A,availableTags:L,previewFeatures:J,showPreviewModal:H,setShowPreviewModal:me,onConfirmSync:Z,onReplaceAll:K,onUpdateVotingSession:ce,onFetchStatesForType:z,onFetchAreaPathsForTypeAndState:se,onFetchTagsForTypeStateAndAreaPath:B,onFetchTypesAndStatesForAreaPath:ue,onFetchTypesAndStatesForTags:oe,onFetchTypesAndAreaPathsForStates:X,suggestedFeatures:ee,otherSessions:D,onPromoteSuggestion:q,onMoveSuggestion:Te,onEditSuggestion:we,onDeleteSuggestion:Ce,adminPerspective:le="session",projectOptions:de}){const Q=zs(),{currentUser:R,currentSession:ge}=ba(),[$e,V]=v.useState(()=>j.project?j.project:de[0]??""),[Fe,Be]=v.useState(0);v.useEffect(()=>{j.project?V(j.project):de.length>0?V(de[0]):V("")},[j.project,de]);const[dt,ft]=v.useState(!1),[Dt,Nt]=v.useState(!1),[Xt,M]=v.useState(!1),[ie,pe]=v.useState(!1),Se=v.useRef(null),[ye,be]=v.useState(!1),[qe,yt]=v.useState(!1),[wt,Pt]=v.useState(!1),tr=v.useRef(null),[Rt,nn]=v.useState(null),[yr,$t]=v.useState(!1),[yn,Wt]=v.useState(null),[_r,Ze]=v.useState(null),[Ot,Qt]=v.useState(""),[Gt,Br]=v.useState(null),[vr,Ss]=v.useState(!1),[$r,Wr]=v.useState(null),[xr,vn]=v.useState({title:"",summary:"",whatWouldItDo:"",howWouldItWork:""}),[Cr,Yt]=v.useState(null),[qr,Mt]=v.useState(!1),[Mr,ir]=v.useState(null),[dr,Er]=v.useState(!1),[is,Yn]=v.useState(null),[Vr,ks]=v.useState([]),[Fr,Bs]=v.useState(!1),[sn,Tt]=v.useState([]),[an,fr]=v.useState(!1),[Hr,on]=v.useState(null),[xn,Ns]=v.useState(null),[Ft,_s]=v.useState(!1),[ae,ke]=v.useState(!1),[De,Re]=v.useState(null),[Ve,Ne]=v.useState(""),[ht,pt]=v.useState(!1),[gt,Pe]=v.useState(!1),[ar,Ar]=v.useState("#2D4660"),Pr=v.useMemo(()=>{const re={};return sn.forEach(ze=>{ze.id&&ze.name&&(re[ze.id]=ze.name)}),re},[sn]),_t=v.useMemo(()=>{const re={};return sn.forEach(ze=>{ze.id&&ze.color_hex&&(re[ze.id]=ze.color_hex)}),re},[sn]),It=v.useMemo(()=>zn({...x,product_id:x.product_id??(ge==null?void 0:ge.product_id)??x.productId??null,product_name:null},Pr),[x,ge,Pr]),rr=v.useMemo(()=>{const re=x.product_id??x.productId??null;return re?_t[re]??null:null},[x,_t]),Or=v.useMemo(()=>qn(It,rr),[It,rr]),ra=v.useRef(null);v.useEffect(()=>{(async()=>{if(!R)return;const ze=await _i(R.id);yt(ze);const{data:et}=await je.from("session_admins").select("session_id").eq("user_id",R.id).limit(1);Pt(et&&et.length>0)})()},[R]),v.useEffect(()=>{const re=(R==null?void 0:R.tenant_id)??(R==null?void 0:R.tenantId)??null;if(!re){ra.current=null,Tt([]),on(null);return}if(ra.current===re)return;let ze=!1;return(async()=>{fr(!0),on(null);try{const Lt=await $a(re);if(ze)return;Tt(Lt),ra.current=re}catch(Lt){if(ze)return;console.error("Error loading products for admin dashboard:",Lt),Ba!=null&&Ba(Lt)?on("Products are not configured yet. Please create the `products` table in Supabase."):on("Unable to load products. Please try again."),Tt([]),ra.current=null}finally{ze||fr(!1)}})(),()=>{ze=!0}},[R==null?void 0:R.tenant_id,R==null?void 0:R.tenantId]);const na=v.useCallback(async()=>{if(xn){_s(!0);try{await eE(xn.id),Tt(re=>re.filter(ze=>ze.id!==xn.id)),Ns(null)}catch(re){console.error("Error deleting product from admin dashboard:",re),on("Failed to delete product. Please try again.")}finally{_s(!1)}}},[xn]),lo=v.useCallback(re=>{const ze=re==null?void 0:re.trim();if(ze){if(V(ze),ze!==(j.project||"")){const et={...j,project:ze};b(et)}Be(et=>et+1)}},[j,b]),{register:Kr,handleSubmit:Ai,reset:ka}=cd({defaultValues:{reason:"",details:""}}),{control:wn,handleSubmit:Ct,reset:ln,register:Na,formState:{errors:Lr}}=cd({defaultValues:{reason:"",details:""}}),Ws=x.isActive?a.jsx("span",{className:"text-[#1E5461] font-medium",children:"Active"}):wi(x.endDate)?a.jsx("span",{className:"text-[#591D0F] font-medium",children:"Closed"}):a.jsx("span",{className:"text-[#C89212] font-medium",children:"Upcoming"}),bn=v.useMemo(()=>{const re=et=>{const Lt=et.type==="reopen",or=et.createdAt||null,Tr=et.actorName||"Admin",jn=or?` ${ha(or)}`:"";return{id:et.id,type:et.type,reason:et.reason,details:et.details??null,title:Lt?`Reopened${jn} by ${Tr}`:`Ended early${jn} by ${Tr}`,description:`${et.reason}${et.details?": "+et.details:""}`,iconBgClass:Lt?"bg-[#1E5461]/10":"bg-[#C89212]/10",iconBorderClass:Lt?"border-[#1E5461]/20":"border-[#C89212]/20",iconColorClass:Lt?"text-[#1E5461]":"text-[#C89212]",textColorClass:Lt?"text-[#1E5461]":"text-[#6A4234]"}};if(Vr.length>0)return Vr.map(et=>re(et));const ze=[];return x.reopenReason&&ze.push({id:"fallback-reopen",sessionId:(ge==null?void 0:ge.id)||"",type:"reopen",reason:x.reopenReason,details:x.reopenDetails??null,actorName:x.reopenedBy||"Admin",actorId:null,createdAt:x.reopenedAt||x.endDate}),x.endedEarlyReason&&ze.push({id:"fallback-ended-early",sessionId:(ge==null?void 0:ge.id)||"",type:"ended-early",reason:x.endedEarlyReason,details:x.endedEarlyDetails??null,actorName:x.endedEarlyBy||"Admin",actorId:null,createdAt:x.originalEndDate||x.endDate}),ze.map(et=>re(et))},[Vr,x.reopenReason,x.reopenDetails,x.reopenedAt,x.reopenedBy,x.endedEarlyReason,x.endedEarlyDetails,x.originalEndDate,x.endDate,x.endedEarlyBy,ge==null?void 0:ge.id]);v.useEffect(()=>{bn.length<=2&&Bs(!1)},[bn.length]);const Pi=v.useCallback(async()=>{if(!(ge!=null&&ge.id)){ks([]);return}try{const re=await wR(ge.id);ks(re)}catch(re){console.error("Error loading session status notes:",re)}},[ge==null?void 0:ge.id]);v.useEffect(()=>{Pi()},[Pi]);const ci=v.useCallback(async re=>{if(ge!=null&&ge.id)try{const ze=await bR({session_id:ge.id,type:re.type,reason:re.reason,details:re.details??null,actor_id:re.actorId??null,actor_name:re.actorName||"Admin"});ks(et=>{const Lt=et.findIndex(or=>or.id===ze.id);if(Lt!==-1){const or=[...et];return or[Lt]=ze,or}return[ze,...et]})}catch(ze){console.error("Error logging session status note:",ze)}},[ge==null?void 0:ge.id]);v.useEffect(()=>{$r&&(vn({title:$r.title,summary:$r.summary??"",whatWouldItDo:$r.whatWouldItDo??"",howWouldItWork:$r.howWouldItWork??""}),Yt(null))},[$r]),v.useEffect(()=>{_r&&D.length>0?Qt(D[0].id):Qt(""),Br(null)},[_r,D]);const Oi=re=>{const ze=re.productId&&re.productId.trim()!==""?re.productId:null,et=ze&&sn.find(or=>or.id===ze)||null,Lt={...x,title:re.title,goal:re.goal,votesPerUser:re.useAutoVotes?Math.max(1,Math.floor(e.length/2)):Number(re.votesPerUser),useAutoVotes:re.useAutoVotes,startDate:new Date(re.startDate).toISOString(),endDate:new Date(re.endDate+"T23:59:59").toISOString(),isActive:x.isActive,product_id:(et==null?void 0:et.id)??null,product_name:null};ce(Lt),ft(!1)},Dn=re=>{var Lt,or;const ze=new Date().toISOString(),et={...x,originalEndDate:x.endDate,endDate:ze,isActive:!1,endedEarlyBy:(R==null?void 0:R.name)||"Admin",endedEarlyReason:re.reason,endedEarlyDetails:(Lt=re.details)!=null&&Lt.trim()?re.details.trim():null,reopenReason:null,reopenDetails:null,reopenedBy:null,reopenedAt:null};ce(et),ci({type:"ended-early",reason:re.reason,details:(or=re.details)!=null&&or.trim()?re.details.trim():null,actorName:(R==null?void 0:R.name)||"Admin",actorId:(R==null?void 0:R.id)??null}),Nt(!1),ka()},ds=re=>{var Lt,or;const ze=new Date;ze.setDate(ze.getDate()+7);const et={...x,endDate:ze.toISOString(),isActive:!0,originalEndDate:null,endedEarlyBy:null,endedEarlyReason:null,endedEarlyDetails:null,reopenReason:re.reason,reopenDetails:(Lt=re.details)!=null&&Lt.trim()?re.details.trim():null,reopenedBy:(R==null?void 0:R.name)||"Admin",reopenedAt:new Date().toISOString()};ce(et),ci({type:"reopen",reason:re.reason,details:(or=re.details)!=null&&or.trim()?re.details.trim():null,actorName:(R==null?void 0:R.name)||"Admin",actorId:(R==null?void 0:R.id)??null}),M(!1),ln()},fs=async(re,ze)=>{const et={...j,organization:re,project:ze};b(et),O()},qs=re=>{Wr(re)},Ti=async()=>{if(!$r)return;const re=xr.title.trim();if(!re){Yt("Title is required.");return}Mt(!0),Yt(null);try{await we($r.id,{title:re,summary:xr.summary.trim()?xr.summary.trim():null,whatWouldItDo:xr.whatWouldItDo.trim()?xr.whatWouldItDo.trim():null,howWouldItWork:xr.howWouldItWork.trim()?xr.howWouldItWork.trim():null}),Wr(null)}catch(ze){console.error("Error updating suggestion:",ze),Yt("Failed to update the suggestion. Please try again.")}finally{Mt(!1)}},Cs=async()=>{if(_r){if(!Ot){Br("Please select a session.");return}Ss(!0),Br(null);try{await Te(_r.id,Ot),Ze(null)}catch(re){console.error("Error moving suggestion:",re),Br("Failed to move the suggestion. Please try again.")}finally{Ss(!1)}}},co=async()=>{if(Rt){$t(!0),Wt(null);try{await q(Rt.id),nn(null)}catch(re){console.error("Error promoting suggestion:",re),Wt("Failed to move the suggestion into the current session.")}finally{$t(!1)}}},sa=async()=>{if(Mr){Er(!0),Yn(null);try{await Ce(Mr.id),ir(null)}catch(re){console.error("Error deleting suggestion:",re),Yn("Failed to delete the suggestion. Please try again.")}finally{Er(!1)}}},Ii=v.useCallback(()=>{ft(!1),i()},[i]);return v.useEffect(()=>{if(!ie)return;const re=ze=>{Se.current&&!Se.current.contains(ze.target)&&pe(!1)};return document.addEventListener("mousedown",re),document.addEventListener("touchstart",re,{passive:!0}),()=>{document.removeEventListener("mousedown",re),document.removeEventListener("touchstart",re)}},[ie]),v.useEffect(()=>{if(!ye)return;const re=ze=>{tr.current&&!tr.current.contains(ze.target)&&be(!1)};return document.addEventListener("mousedown",re),document.addEventListener("touchstart",re,{passive:!0}),()=>{document.removeEventListener("mousedown",re),document.removeEventListener("touchstart",re)}},[ye]),a.jsxs("div",{className:"container mx-auto p-4 max-w-6xl min-h-screen pb-8",children:[a.jsx("div",{className:"hidden md:flex md:justify-center mb-2",children:a.jsx("img",{src:oi,alt:"New Millennium Building Systems Logo",className:"-mt-4 cursor-pointer hover:opacity-80 transition-opacity",style:{height:"96px",width:"auto"},onClick:()=>Q("/sessions")})}),a.jsxs("div",{className:"flex justify-between items-center mb-6",children:[a.jsxs("div",{className:"flex items-center",children:[a.jsx(dp,{src:Sa,alt:"New Millennium Building Systems Logo",className:"mr-4 md:hidden",style:{width:"40px",height:"40px",objectFit:"contain"}}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("h1",{className:"text-2xl font-bold text-[#2D4660] md:text-3xl",children:"Admin Dashboard"}),R&&a.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:[R.name,qe&&a.jsx("span",{className:"ml-2 inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium bg-[#C89212] text-white",children:"System Admin"}),!qe&&wt&&a.jsx("span",{className:"ml-2 inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium bg-[#576C71] text-white",children:"Session Admin"})]})]})]}),a.jsxs("div",{ref:Se,className:"relative z-40",children:[a.jsxs("div",{className:"hidden md:flex space-x-2",children:[x.isActive&&a.jsxs("button",{onClick:y,className:"flex items-center px-4 py-2 bg-[#576C71] text-white rounded-lg hover:bg-[#1E5461] transition-colors",children:[a.jsx(Zn,{className:"mr-2 h-4 w-4"}),"Vote!"]}),a.jsxs("button",{onClick:()=>Q(le==="system"?"/users":"/users?filter=stakeholder"),className:"flex items-center px-4 py-2 bg-[#2D4660] text-white rounded-lg hover:bg-[#173B65] transition-colors",children:[le==="system"?a.jsx(Bn,{className:"mr-2 h-4 w-4"}):a.jsx(ns,{className:"mr-2 h-4 w-4"}),le==="system"?"User Management":"Stakeholders"]}),a.jsxs("button",{onClick:()=>Q("/sessions"),className:"flex items-center px-4 py-2 bg-[#4f6d8e] text-white rounded-lg hover:bg-[#3d5670] transition-colors",children:[a.jsx(ns,{className:"mr-2 h-4 w-4"}),"All Sessions"]}),a.jsxs("button",{onClick:p,className:"flex items-center px-4 py-2 bg-[#576C71] text-white rounded-lg hover:bg-[#1E5461] transition-colors",children:[a.jsx(Vn,{className:"mr-2 h-4 w-4"}),"Logout"]})]}),a.jsx("div",{className:"flex md:hidden",children:a.jsx("button",{onClick:()=>pe(!ie),className:"p-2 rounded-md border border-gray-200 bg-white shadow-sm","aria-label":"Open menu",children:a.jsx(ei,{className:"h-5 w-5 text-gray-700"})})}),ie&&a.jsx("div",{className:"absolute right-0 mt-2 w-56 bg-white border border-gray-200 rounded-lg shadow-lg md:hidden z-50",children:a.jsxs("div",{className:"py-1",children:[x.isActive&&a.jsxs("button",{onClick:()=>{pe(!1),y()},className:"w-full px-3 py-2 flex items-center text-left hover:bg-gray-50",children:[a.jsx(Zn,{className:"h-4 w-4 mr-2 text-gray-700"}),"Vote!"]}),a.jsxs("button",{onClick:()=>{pe(!1),Q(le==="system"?"/users":"/users?filter=stakeholder")},className:"w-full px-3 py-2 flex items-center text-left hover:bg-gray-50",children:[le==="system"?a.jsx(Bn,{className:"h-4 w-4 mr-2 text-gray-700"}):a.jsx(ns,{className:"h-4 w-4 mr-2 text-gray-700"}),le==="system"?"User Management":"Stakeholders"]}),a.jsxs("button",{onClick:()=>{pe(!1),Q("/sessions")},className:"w-full px-3 py-2 flex items-center text-left hover:bg-gray-50",children:[a.jsx(ns,{className:"h-4 w-4 mr-2 text-gray-700"}),"All Sessions"]}),!(x.isActive===!1&&!wi(x.endDate))&&a.jsxs("button",{onClick:()=>{pe(!1),s()},className:"w-full px-3 py-2 flex items-center text-left hover:bg-gray-50",children:[a.jsx(hh,{className:"h-4 w-4 mr-2 text-gray-700"}),wi(x.endDate)?"Final Results":"Current Results"]}),a.jsxs("button",{onClick:()=>{pe(!1),ft(!0)},className:"w-full px-3 py-2 flex items-center text-left hover:bg-gray-50",children:[a.jsx(An,{className:"h-4 w-4 mr-2 text-gray-700"}),"Edit Session"]}),a.jsxs("button",{onClick:()=>{pe(!1),p()},className:"w-full px-3 py-2 flex items-center text-left hover:bg-gray-50",children:[a.jsx(Vn,{className:"h-4 w-4 mr-2 text-gray-700"}),"Logout"]})]})})]})]}),a.jsxs("div",{className:"relative bg-white rounded-lg shadow-md p-4 mb-6",style:{marginTop:It?"3.5rem":"0"},children:[It&&a.jsxs("div",{className:"absolute left-0 px-4 py-1 pr-8 rounded-t-md border-b-0 text-sm font-semibold shadow-sm z-20 flex items-center gap-2 whitespace-nowrap group cursor-pointer",style:{top:"0",left:"-1px",transform:"translateY(-100%)",backgroundColor:Or.background,color:Or.text,borderColor:Or.border,borderWidth:"1px",borderBottomWidth:"0",boxShadow:"0 4px 8px rgba(16,24,40,0.06)",borderTopLeftRadius:"0.9rem",borderTopRightRadius:"0.9rem",overflow:"visible"},onMouseEnter:()=>{(x.product_id||x.productId)&&ke(!0)},onMouseLeave:()=>ke(!1),onClick:async re=>{const ze=x.product_id||x.productId;if(!ze)return;re.stopPropagation();const et=sn.find(Lt=>Lt.id===ze);et&&(Re(et),Ne(et.name||""),setEditingProductColor(et.color_hex||null),Ar(et.color_hex||"#2D4660"))},children:[a.jsx(l0,{className:"h-4 w-4 flex-shrink-0"}),a.jsx("span",{className:"overflow-hidden text-ellipsis flex-1 min-w-0",children:It}),(x.product_id||x.productId)&&ae&&a.jsx("div",{className:"absolute right-2 flex-shrink-0 opacity-80",children:a.jsx(RE,{className:"h-4 w-4",style:{color:Or.text}})})]}),a.jsxs("div",{className:"pt-1",children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsxs("h2",{className:"text-xl font-semibold text-[#2D4660]",children:["Current Session: ",a.jsx("span",{className:"text-[#1E5461]",children:x.title})]}),a.jsxs("div",{ref:tr,className:"relative z-40",children:[a.jsxs("div",{className:"hidden md:flex space-x-2",children:[!(x.isActive===!1&&!wi(x.endDate))&&a.jsxs(nt,{variant:"gold",onClick:s,className:"flex items-center",children:[a.jsx(hh,{className:"h-4 w-4 mr-2"}),wi(x.endDate)?"Final Results":"Current Results"]}),a.jsxs(nt,{variant:"primary",onClick:()=>ft(!0),className:"flex items-center",children:[a.jsx(An,{className:"h-4 w-4 mr-2"}),"Edit Session"]})]}),a.jsx("div",{className:"flex md:hidden",children:a.jsx("button",{onClick:()=>be(!ye),className:"p-2 rounded-md border border-gray-200 bg-white shadow-sm","aria-label":"Open session actions menu",children:a.jsx(ei,{className:"h-5 w-5 text-gray-700"})})}),ye&&a.jsx("div",{className:"absolute right-0 mt-2 w-56 bg-white border border-gray-200 rounded-lg shadow-lg md:hidden z-50",children:a.jsxs("div",{className:"py-1",children:[!(x.isActive===!1&&!wi(x.endDate))&&a.jsxs("button",{onClick:()=>{be(!1),s()},className:"w-full px-3 py-2 flex items-center text-left hover:bg-gray-50",children:[a.jsx(hh,{className:"h-4 w-4 mr-2 text-gray-700"}),wi(x.endDate)?"Final Results":"Current Results"]}),a.jsxs("button",{onClick:()=>{be(!1),ft(!0)},className:"w-full px-3 py-2 flex items-center text-left hover:bg-gray-50",children:[a.jsx(An,{className:"h-4 w-4 mr-2 text-gray-700"}),"Edit Session"]})]})})]})]}),an&&a.jsx("p",{className:"text-xs text-gray-500 mb-4",children:"Loading products"}),Hr&&a.jsx("p",{className:"text-xs text-[#591D0F] mb-4",children:Hr}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4",children:[a.jsxs("div",{children:[a.jsx("h3",{className:"text-sm font-medium text-gray-700 mb-1",children:"Voting Period"}),a.jsxs("p",{className:`text-[#2D4660] font-medium ${x.originalEndDate?"line-through text-gray-400":""}`,children:[ha(x.startDate)," - ",ha(x.originalEndDate||x.endDate)]}),x.originalEndDate&&x.endedEarlyBy&&a.jsxs("div",{className:"flex items-center mt-1 text-xs text-[#591D0F]",children:[a.jsxs("span",{children:["Ended Early by ",x.endedEarlyBy]}),x.endedEarlyReason&&a.jsxs("div",{className:"group relative ml-1",children:[a.jsx(Ht,{className:"h-3 w-3 cursor-help"}),a.jsxs("div",{className:"absolute bottom-full left-1/2 -translate-x-1/2 mb-2 px-3 py-2 bg-gray-900 text-white text-xs rounded-lg opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-200 whitespace-nowrap z-10 pointer-events-none max-w-xs",children:[a.jsxs("div",{className:"font-semibold mb-1",children:["Reason: ",x.endedEarlyReason]}),x.endedEarlyDetails&&a.jsx("div",{className:"whitespace-normal",children:x.endedEarlyDetails}),a.jsx("div",{className:"absolute top-full left-1/2 -translate-x-1/2 -mt-1 border-4 border-transparent border-t-gray-900"})]})]})]})]}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-sm font-medium text-gray-700 mb-1",children:"Votes Per User"}),a.jsx("p",{className:"text-[#2D4660] font-medium",children:x.useAutoVotes?`${Math.max(1,Math.floor(e.length/2))} (Auto: ${e.length} features  2)`:x.votesPerUser})]}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-sm font-medium text-gray-700 mb-1",children:"Status"}),a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center",children:[a.jsx(Am,{className:"h-4 w-4 mr-1 text-gray-600"}),Ws]}),(x.isActive||wi(x.endDate))&&a.jsx(nt,{variant:x.isActive?"danger":"primary",onClick:()=>{x.isActive?Nt(!0):(ln(),M(!0))},className:"text-xs px-2 py-1 ml-2",children:x.isActive?"End Early":"Reopen"})]})]})]}),a.jsx("div",{className:"pt-3 border-t border-gray-200",children:a.jsxs("div",{className:"relative overflow-hidden rounded-2xl border border-[#C89212]/30 bg-gradient-to-r from-[#FFF6E3] via-[#FFF9ED] to-white shadow-sm p-5 md:p-6",children:[a.jsx("span",{className:"pointer-events-none absolute -top-10 left-4 h-32 w-32 rounded-full bg-[#C89212]/25 blur-3xl"}),a.jsx("span",{className:"pointer-events-none absolute -bottom-16 right-6 h-40 w-40 rounded-full bg-[#F4C66C]/20 blur-3xl"}),a.jsx("span",{className:"pointer-events-none absolute top-6 right-10 text-[#F4B400] text-xl animate-ping",children:""}),a.jsx("span",{className:"pointer-events-none absolute bottom-8 left-10 text-[#C89212] text-lg animate-pulse",children:""}),a.jsxs("div",{className:"relative flex flex-col gap-6 md:flex-row md:items-start md:justify-between",children:[a.jsxs("div",{className:"flex items-start gap-5 md:pr-8 lg:pr-12",children:[a.jsxs("div",{className:"relative",children:[a.jsx("div",{className:"h-16 w-16 md:h-20 md:w-20 rounded-full bg-white shadow-lg shadow-[#C89212]/30 border border-[#C89212]/40 flex items-center justify-center text-[#C89212]",children:a.jsx(ME,{className:"h-8 w-8 md:h-10 md:w-10"})}),a.jsx("span",{className:"pointer-events-none absolute -top-3 -left-2 text-[#C89212] text-base animate-ping",children:""}),a.jsx("span",{className:"pointer-events-none absolute bottom-0 -right-3 text-[#F5D79E] text-xl animate-pulse",children:""})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-xs font-semibold uppercase tracking-[0.2em] text-[#C89212]/80 mb-1",children:"Session Goal"}),a.jsx("h3",{className:"text-lg md:text-xl font-semibold text-[#2D4660] leading-relaxed",children:x.goal})]})]}),a.jsxs("div",{className:"md:w-80 lg:w-96 rounded-xl border border-white/70 bg-white/80 backdrop-blur-sm shadow-inner p-4",children:[a.jsxs("div",{className:"flex items-center justify-between mb-3",children:[a.jsx("h3",{className:"text-sm font-semibold text-[#2D4660]",children:"Status Notes"}),bn.length>2&&a.jsxs("span",{className:"inline-flex items-center justify-between text-xs text-[#1E5461] w-[90px]",children:[a.jsx("span",{className:"flex items-center justify-center w-4 h-4 border border-current rounded",children:Fr?a.jsx(Gu,{className:"h-2.5 w-2.5"}):a.jsx(Un,{className:"h-2.5 w-2.5"})}),a.jsx("button",{type:"button",onClick:()=>Bs(re=>!re),className:"ml-1 hover:text-[#173B65] transition-colors text-left flex-1",children:Fr?"Show Less":"Show More"})]})]}),bn.length>0?a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"space-y-3",children:bn.slice(0,Fr?bn.length:2).map(re=>{const ze=re.type==="reopen"?_l:Ht;return a.jsxs("div",{className:`flex items-start gap-3 text-sm ${re.textColorClass}`,children:[a.jsx("div",{className:`mt-0.5 flex items-center justify-center w-8 h-8 ${re.iconBgClass} ${re.iconBorderClass} border rounded-lg`,children:a.jsx(ze,{className:`h-3.5 w-3.5 ${re.iconColorClass}`})}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold text-gray-800",children:re.title}),a.jsx("p",{className:"text-xs text-gray-600 leading-relaxed",children:re.description})]})]},re.id)})}),bn.length>2&&!Fr&&a.jsx("p",{className:"text-xs text-gray-500 mt-3",children:'Showing newest notes. Select "Show More" to view all updates.'})]}):a.jsx("p",{className:"text-sm text-gray-500",children:"No status updates yet."})]})]})]})})]})]}),a.jsxs("div",{className:"relative bg-white rounded-lg shadow-md p-4 mb-6",children:[a.jsx("div",{className:"flex items-center justify-between mb-4",children:a.jsxs("div",{className:"flex items-center",children:[a.jsx("img",{src:uC,alt:"Azure DevOps logo",className:"h-5 w-5 mr-2"}),a.jsx("h2",{className:"text-xl font-semibold text-[#2D4660]",children:"Azure DevOps Integration"})]})}),j.enabled?a.jsxs("div",{className:"space-y-4",children:[a.jsx("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:gap-4",children:[a.jsx(sr,{className:"h-5 w-5 text-green-600 mr-2"}),a.jsxs("div",{className:"flex flex-col gap-2",children:[a.jsxs("div",{className:"flex flex-wrap items-center gap-x-2 text-sm text-green-700",children:[a.jsx("span",{className:"font-medium text-green-900",children:"Connected to Azure DevOps"}),a.jsx("span",{className:"hidden sm:inline mx-1 text-green-500",children:""}),a.jsxs("span",{children:[a.jsx("span",{className:"font-medium",children:"Organization:"})," ",j.organization]}),a.jsx("span",{className:"hidden sm:inline mx-1 text-green-500",children:""}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"font-medium",children:"Project:"}),a.jsx("div",{className:"min-w-[150px]",children:a.jsx(dC,{options:de,value:$e,onChange:lo,variant:"green"})})]}),j.lastSyncTime&&a.jsxs(a.Fragment,{children:[a.jsx("span",{className:"hidden sm:inline mx-1 text-green-500",children:""}),a.jsxs("span",{children:[a.jsx("span",{className:"font-medium",children:"Last Sync:"})," ",ha(j.lastSyncTime)]})]})]}),a.jsx("span",{className:"text-xs text-green-700",children:"Switching projects will clear the filters below."})]})]}),a.jsxs("button",{onClick:_,className:"text-sm text-[#591D0F] hover:text-[#6A4234] font-medium flex items-center",children:[a.jsx(Ms,{className:"h-4 w-4 mr-1"}),"Disconnect"]})]})}),a.jsx(bZ,{config:j,onUpdateConfig:b,onPreview:k,isFetching:E,availableStates:T,availableAreaPaths:A,availableTags:L,previewFeatures:J,showPreviewModal:H,onFetchStatesForType:z,onFetchAreaPathsForTypeAndState:se,onFetchTagsForTypeStateAndAreaPath:B,onFetchTypesAndStatesForAreaPath:ue,onFetchTypesAndStatesForTags:oe,onFetchTypesAndAreaPathsForStates:X,resetSignal:Fe})]}):a.jsxs("div",{className:"bg-gray-50 rounded-lg p-6 text-center border border-dashed border-gray-300",children:[a.jsx("img",{src:uC,alt:"Azure DevOps logo",className:"h-10 w-10 mx-auto mb-3 opacity-80"}),a.jsx("h3",{className:"text-lg font-medium text-gray-700 mb-2",children:"Not Connected"}),a.jsx("p",{className:"text-gray-600 mb-4",children:"Connect to Azure DevOps to import work items as features for voting."}),a.jsx(nt,{variant:"primary",onClick:()=>fs("newmill",$e||de[0]||"Product"),className:"inline-flex items-center",disabled:E,children:E?a.jsxs(a.Fragment,{children:[a.jsx(_l,{className:"h-4 w-4 mr-2 animate-spin"}),"Connecting..."]}):a.jsxs(a.Fragment,{children:[a.jsx(An,{className:"h-4 w-4 mr-2"}),"Connect to Azure DevOps"]})}),C&&a.jsx("p",{className:"mt-3 text-sm text-[#591D0F]",children:C})]})]}),a.jsxs("div",{className:"relative bg-white rounded-lg shadow-md p-4 mb-6",children:[a.jsxs("div",{className:"flex flex-wrap justify-between items-center gap-2 mb-4",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"text-xl font-semibold text-[#2D4660]",children:"Suggested Features"}),a.jsx("p",{className:"text-sm text-gray-600",children:"Ideas submitted from the voting experience for future consideration."})]}),a.jsxs("span",{className:"inline-flex items-center px-3 py-1 rounded-full bg-[#1E5461]/10 text-[#1E5461] text-sm font-medium",children:[ee.length," ",ee.length===1?"suggestion":"suggestions"]})]}),ee.length===0?a.jsx("div",{className:"bg-gray-50 border border-dashed border-gray-200 rounded-lg p-6 text-center text-gray-500 text-sm",children:'No feature suggestions have been submitted yet. Encourage voters to use the "Suggest a Feature" button in the voting experience.'}):a.jsx("div",{className:"space-y-4 max-h-[360px] overflow-y-auto pr-1",children:ee.map(re=>{const ze=re.requester_name||re.requester_email||"Anonymous";return a.jsx("div",{className:"border border-gray-200 rounded-lg p-4 hover:border-[#1E5461]/40 transition-colors",children:a.jsxs("div",{className:"flex flex-col gap-4",children:[a.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4",children:[a.jsxs("div",{className:"md:flex-1",children:[a.jsx("h3",{className:"text-lg font-semibold text-[#2D4660]",children:re.title}),a.jsxs("p",{className:"text-xs text-gray-500 mt-[14px]",children:["Submitted by ",a.jsx("span",{className:"font-medium text-[#1E5461]",children:ze}),re.requester_email&&a.jsxs(a.Fragment,{children:[" ","(",a.jsx("a",{href:`mailto:${re.requester_email}`,className:"text-[#1E5461] hover:underline",children:re.requester_email}),")"]})," on ",ha(re.created_at)]})]}),a.jsxs("div",{className:"flex flex-col items-end gap-2 self-start md:min-w-[360px]",children:[a.jsxs("div",{className:"flex flex-wrap justify-end gap-2",children:[a.jsxs(nt,{variant:"primary",onClick:()=>{Wt(null),nn(re)},className:"text-xs px-3 py-1 flex items-center",children:[a.jsx(WM,{className:"h-3.5 w-3.5 mr-2"}),"Move to Current Session"]}),a.jsxs(nt,{variant:"secondary",onClick:()=>{D.length>0&&Ze(re)},disabled:D.length===0,className:"text-xs px-3 py-1 flex items-center",children:[a.jsx(Zr,{className:"h-3.5 w-3.5 mr-2"}),"Move to Future Session"]}),a.jsxs(nt,{variant:"secondary",onClick:()=>qs(re),className:"text-xs px-3 py-1 flex items-center",children:[a.jsx(td,{className:"h-3.5 w-3.5 mr-2"}),"Edit"]}),a.jsxs(nt,{variant:"danger",onClick:()=>{Yn(null),ir(re)},className:"text-xs px-3 py-1 flex items-center",children:[a.jsx(Xi,{className:"h-3.5 w-3.5 mr-2"}),"Delete"]})]}),D.length===0&&a.jsx("p",{className:"text-xs text-gray-500 text-right",children:"No upcoming sessions are available yet. Create a future session to enable this action."})]})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3",children:[a.jsxs("div",{className:"border border-gray-200 rounded-lg p-3 bg-gray-50 max-h-48 overflow-y-auto",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[a.jsx(Ht,{className:"h-4 w-4 text-[#2D4660]"}),a.jsx("p",{className:"text-sm font-semibold text-[#2D4660]",children:"Problem it solves"})]}),a.jsx("p",{className:"text-sm text-gray-700 whitespace-pre-line",children:re.summary&&re.summary.length>0?re.summary:"No summary provided."})]}),a.jsxs("div",{className:"border border-gray-200 rounded-lg p-3 bg-gray-50 max-h-48 overflow-y-auto",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[a.jsx(Nx,{className:"h-4 w-4 text-[#2D4660]"}),a.jsx("p",{className:"text-sm font-semibold text-[#2D4660]",children:"What would it do?"})]}),a.jsx("p",{className:"text-sm text-gray-700 whitespace-pre-line",children:re.whatWouldItDo&&re.whatWouldItDo.length>0?re.whatWouldItDo:"No details provided."})]}),a.jsxs("div",{className:"border border-gray-200 rounded-lg p-3 bg-gray-50 max-h-48 overflow-y-auto",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[a.jsx(zF,{className:"h-4 w-4 text-[#2D4660]"}),a.jsx("p",{className:"text-sm font-semibold text-[#2D4660]",children:"How would it work?"})]}),a.jsx("p",{className:"text-sm text-gray-700 whitespace-pre-line",children:re.howWouldItWork&&re.howWouldItWork.length>0?re.howWouldItWork:"No implementation details provided."})]})]})]})},re.id)})})]}),a.jsxs("div",{className:"relative bg-white rounded-lg shadow-md p-4 mb-6",children:[a.jsxs("div",{className:"flex justify-between items-center mb-4",children:[a.jsx("h2",{className:"text-xl font-semibold text-[#2D4660]",children:"Feature Management"}),a.jsxs(nt,{variant:"gold",onClick:()=>d(!0),className:"flex items-center w-44",children:[a.jsx(Un,{className:"mr-2 h-4 w-4"}),"Add Feature"]})]}),a.jsx("div",{className:"w-full overflow-x-auto",children:a.jsxs("table",{className:"min-w-full divide-y divide-gray-200 table-fixed",children:[a.jsx("thead",{className:"bg-gray-50",children:a.jsxs("tr",{children:[a.jsx("th",{scope:"col",className:"w-[20%] px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Title"}),a.jsx("th",{scope:"col",className:"hidden lg:table-cell w-[25%] px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Description"}),a.jsx("th",{scope:"col",className:"hidden md:table-cell w-[10%] px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Epic"}),a.jsx("th",{scope:"col",className:"hidden md:table-cell w-[8%] px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"State"}),a.jsx("th",{scope:"col",className:"hidden lg:table-cell w-[12%] px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Area Path"}),a.jsx("th",{scope:"col",className:"hidden xl:table-cell w-[10%] px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Tags"}),a.jsx("th",{scope:"col",className:"w-[8%] px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Votes"}),a.jsx("th",{scope:"col",className:"w-[7%] px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),a.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:e.map(re=>a.jsxs("tr",{className:"align-top group",children:[a.jsx("td",{className:"px-4 py-4 whitespace-normal break-words text-sm font-medium text-left",children:a.jsxs("div",{className:"max-w-xs overflow-hidden text-left",children:[re.title,re.azureDevOpsId&&a.jsx("div",{className:"mt-1",children:a.jsx(fp,{id:re.azureDevOpsId,url:re.azureDevOpsUrl||""})})]})}),a.jsx("td",{className:"hidden lg:table-cell px-4 py-4 text-sm text-gray-500 text-left",children:a.jsx("div",{className:"max-w-md overflow-hidden break-words text-left",children:re.description||a.jsx("span",{className:"italic text-gray-400",children:"No description provided"})})}),a.jsx("td",{className:"hidden md:table-cell px-4 py-4 whitespace-nowrap text-sm",children:re.epic&&a.jsx(qd,{name:re.epic})}),a.jsx("td",{className:"hidden md:table-cell px-4 py-4 whitespace-nowrap text-sm",children:re.state&&a.jsx("span",{className:"px-2 py-1 text-xs font-medium bg-[#1E5461]/10 text-[#1E5461] rounded",children:re.state})}),a.jsx("td",{className:"hidden lg:table-cell px-4 py-4 text-sm",children:a.jsx("div",{className:"text-gray-600",children:re.areaPath&&typeof re.areaPath=="string"&&re.areaPath.trim()!==""?a.jsx("div",{className:"max-w-xs break-words",children:re.areaPath}):a.jsx("span",{className:"text-gray-400",children:"-"})})}),a.jsx("td",{className:"hidden xl:table-cell px-4 py-4 text-sm",children:re.tags&&re.tags.length>0?a.jsxs("div",{className:"flex flex-wrap gap-1",children:[re.tags.slice(0,3).map((ze,et)=>a.jsx("span",{className:"px-2 py-0.5 text-xs bg-gray-100 text-gray-700 rounded",children:ze},et)),re.tags.length>3&&a.jsxs("span",{className:"px-2 py-0.5 text-xs text-gray-500",children:["+",re.tags.length-3]})]}):a.jsx("span",{className:"text-gray-400",children:"-"})}),a.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm",children:re.votes}),a.jsxs("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-gray-500 space-x-3 md:opacity-0 md:group-hover:opacity-100 transition-opacity",children:[a.jsx("button",{onClick:()=>f(re),className:"text-[#2D4660] hover:text-[#C89212] inline-block cursor-pointer",title:"Edit Feature",children:a.jsx(td,{className:"h-5 w-5"})}),a.jsx("button",{onClick:()=>n(re.id),className:"text-[#2D4660] hover:text-[#591D0F] inline-block cursor-pointer",title:"Delete Feature",children:a.jsx(Xi,{className:"h-5 w-5"})})]})]},re.id))})]})})]}),a.jsx(hn,{isOpen:Rt!==null,onClose:()=>{yr||(nn(null),Wt(null))},title:"Move Suggestion to Current Session",children:a.jsxs("div",{className:"space-y-4",children:[a.jsxs("p",{className:"text-sm text-gray-700",children:["Move ",a.jsx("span",{className:"font-semibold text-[#2D4660]",children:Rt==null?void 0:Rt.title})," into the current session so it can be managed and voted on."]}),yn&&a.jsx("div",{className:"bg-[#591D0F]/5 border border-[#591D0F]/20 text-[#591D0F] text-sm rounded-md px-3 py-2",children:yn}),a.jsxs("div",{className:"flex justify-end gap-2",children:[a.jsx(nt,{variant:"secondary",onClick:()=>{yr||(nn(null),Wt(null))},disabled:yr,children:"Cancel"}),a.jsx(nt,{variant:"primary",onClick:co,disabled:yr,children:yr?"Moving...":"Move to Current Session"})]})]})}),a.jsx(hn,{isOpen:_r!==null,onClose:()=>{vr||(Ze(null),Br(null))},title:"Move to Future Session",children:a.jsxs("div",{className:"space-y-4",children:[a.jsxs("p",{className:"text-sm text-gray-700",children:["Choose the upcoming session where you would like to queue ",a.jsx("span",{className:"font-semibold text-[#2D4660]",children:_r==null?void 0:_r.title}),"."]}),D.length>0?a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Destination Session"}),a.jsx("select",{value:Ot,onChange:re=>Qt(re.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md text-sm bg-white",disabled:vr,children:D.map(re=>a.jsxs("option",{value:re.id,children:[re.title," (Starts ",ha(re.startDate),")"]},re.id))})]}):a.jsx("div",{className:"bg-[#1E5461]/5 border border-[#1E5461]/20 text-[#1E5461] text-sm rounded-md px-3 py-2",children:"No future sessions are available yet. Create a new session to enable this action."}),Gt&&a.jsx("div",{className:"bg-[#591D0F]/5 border border-[#591D0F]/20 text-[#591D0F] text-sm rounded-md px-3 py-2",children:Gt}),a.jsxs("div",{className:"flex justify-end gap-2",children:[a.jsx(nt,{variant:"secondary",onClick:()=>{vr||(Ze(null),Br(null))},disabled:vr,children:"Cancel"}),a.jsx(nt,{variant:"primary",onClick:Cs,disabled:vr||D.length===0,children:vr?"Moving...":"Move to Session"})]})]})}),a.jsx(hn,{isOpen:$r!==null,onClose:()=>{qr||(Wr(null),Yt(null))},title:"Edit Suggested Feature",children:a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Title"}),a.jsx("input",{type:"text",value:xr.title,onChange:re=>vn(ze=>({...ze,title:re.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md",disabled:qr})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Problem it solves"}),a.jsx("textarea",{value:xr.summary,onChange:re=>vn(ze=>({...ze,summary:re.target.value})),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-md",disabled:qr})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"What would it do?"}),a.jsx("textarea",{value:xr.whatWouldItDo,onChange:re=>vn(ze=>({...ze,whatWouldItDo:re.target.value})),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-md",disabled:qr})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"How would it work?"}),a.jsx("textarea",{value:xr.howWouldItWork,onChange:re=>vn(ze=>({...ze,howWouldItWork:re.target.value})),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-md",disabled:qr})]}),Cr&&a.jsx("div",{className:"bg-[#591D0F]/5 border border-[#591D0F]/20 text-[#591D0F] text-sm rounded-md px-3 py-2",children:Cr}),a.jsxs("div",{className:"flex justify-end gap-2",children:[a.jsx(nt,{variant:"secondary",onClick:()=>{qr||(Wr(null),Yt(null))},disabled:qr,children:"Cancel"}),a.jsx(nt,{variant:"primary",onClick:Ti,disabled:qr,children:qr?"Saving...":"Save Changes"})]})]})}),a.jsx(hn,{isOpen:Mr!==null,onClose:()=>{dr||(ir(null),Yn(null))},title:"Delete Suggested Feature",children:a.jsxs("div",{className:"space-y-4",children:[a.jsxs("p",{className:"text-sm text-gray-700",children:["Are you sure you want to delete ",a.jsx("span",{className:"font-semibold text-[#591D0F]",children:Mr==null?void 0:Mr.title}),"? This action cannot be undone."]}),is&&a.jsx("div",{className:"bg-[#591D0F]/5 border border-[#591D0F]/20 text-[#591D0F] text-sm rounded-md px-3 py-2",children:is}),a.jsxs("div",{className:"flex justify-end gap-2",children:[a.jsx(nt,{variant:"secondary",onClick:()=>{dr||(ir(null),Yn(null))},disabled:dr,children:"Cancel"}),a.jsx(nt,{variant:"danger",onClick:sa,disabled:dr,children:dr?"Deleting...":"Delete"})]})]})}),a.jsx(hn,{isOpen:u,onClose:()=>d(!1),title:"Add New Feature",children:a.jsx(hC,{onSubmit:re=>{t(re),d(!1)},onCancel:()=>d(!1)})}),a.jsx(hn,{isOpen:m!==null,onClose:()=>f(null),title:"Edit Feature",children:m&&a.jsx(hC,{feature:m,onSubmit:re=>{r({...m,...re}),f(null)},onCancel:()=>f(null)})}),a.jsx(hn,{isOpen:dt,onClose:()=>ft(!1),title:"Edit Session Settings",children:a.jsx(jZ,{session:x,featureCount:e.length,onSubmit:Oi,onCancel:()=>ft(!1),onRequestDeleteSession:Ii,isDeletingSession:l,productName:It,products:sn,isLoadingProducts:an,productError:Hr,onRequestDeleteProduct:re=>Ns(re),onProductColorUpdated:async()=>{const re=(R==null?void 0:R.tenant_id)??(R==null?void 0:R.tenantId)??null;if(re)try{const ze=await $a(re);Tt(ze)}catch(ze){console.error("Error refreshing products after color update:",ze)}}})}),xn&&a.jsxs(hn,{isOpen:!0,onClose:()=>Ns(null),title:"Delete Product",children:[a.jsxs("p",{className:"text-sm text-gray-700 mb-4",children:["Are you sure you want to delete ",a.jsx("span",{className:"font-semibold",children:xn.name}),"? This will remove it for everyone in your tenant."]}),a.jsxs("div",{className:"flex justify-end gap-3",children:[a.jsx(nt,{variant:"secondary",onClick:()=>Ns(null),disabled:Ft,children:"Cancel"}),a.jsx(nt,{variant:"danger",onClick:na,disabled:Ft,children:Ft?"Deleting...":"Delete"})]})]}),a.jsx(wZ,{isOpen:H,onClose:()=>me(!1),previewFeatures:J,onConfirmSync:Z,onReplaceAll:K}),a.jsx(hn,{isOpen:Xt,onClose:()=>{M(!1),ln()},title:"Reopen Session",children:a.jsxs("form",{onSubmit:Ct(ds),className:"space-y-4",children:[a.jsx("p",{className:"text-gray-600",children:"Capture a brief note so other admins understand why this session is being reopened."}),a.jsx(Nc,{control:wn,name:"reason",rules:{required:"Please select a reason"},render:({field:re})=>a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Reason *"}),a.jsx(dC,{options:xZ,value:re.value,onChange:re.onChange,placeholder:"Select a reason..."}),Lr.reason&&a.jsx("p",{className:"mt-1 text-sm text-[#591D0F]",children:Lr.reason.message})]})}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Additional Details (Optional)"}),a.jsx("textarea",{...Na("details"),rows:3,placeholder:"Add any context you'd like to share with other admins...",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-[#2D4660] focus:border-transparent"})]}),a.jsx("div",{className:"bg-[#1E5461]/5 border border-[#1E5461]/20 rounded-lg p-3 text-sm text-[#1E5461]",children:"This information will appear in the Current Session summary so every admin sees why voting resumed."}),a.jsxs("div",{className:"flex justify-end space-x-2 pt-4",children:[a.jsx(nt,{variant:"secondary",type:"button",onClick:()=>{M(!1),ln()},children:"Cancel"}),a.jsx(nt,{variant:"primary",type:"submit",children:"Save & Reopen"})]})]})}),a.jsx(hn,{isOpen:Dt,onClose:()=>{Nt(!1),ka()},title:"End Session Early",children:a.jsxs("form",{onSubmit:Ai(Dn),className:"space-y-4",children:[a.jsx("p",{className:"text-gray-600",children:"You are about to end this voting session early. Please select a reason:"}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Reason *"}),a.jsxs("select",{...Kr("reason",{required:"Please select a reason"}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-[#2D4660] focus:border-transparent",children:[a.jsx("option",{value:"",children:"Select a reason..."}),a.jsx("option",{value:"Sufficient Responses",children:"Sufficient responses received"}),a.jsx("option",{value:"Project Cancelled",children:"Project or initiative cancelled"}),a.jsx("option",{value:"Timeline Changed",children:"Timeline or priorities changed"}),a.jsx("option",{value:"Technical Issues",children:"Technical issues or data concerns"}),a.jsx("option",{value:"Stakeholder Request",children:"Stakeholder request"}),a.jsx("option",{value:"Low Participation",children:"Low participation rate"}),a.jsx("option",{value:"Other",children:"Other"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Additional Details (Optional)"}),a.jsx("textarea",{...Kr("details"),rows:3,placeholder:"Add any additional context or notes...",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-[#2D4660] focus:border-transparent"})]}),a.jsxs("div",{className:"bg-[#C89212]/5 border border-[#C89212]/20 rounded-lg p-3 text-sm text-[#6A4234]",children:[a.jsx("p",{className:"font-medium mb-1",children:"Note:"}),a.jsx("p",{children:"Ending the session will close voting immediately. This action will be logged and visible to all admins."})]}),a.jsxs("div",{className:"flex justify-end space-x-2 pt-4",children:[a.jsx(nt,{variant:"secondary",type:"button",onClick:()=>{Nt(!1),ka()},children:"Cancel"}),a.jsx(nt,{variant:"danger",type:"submit",children:"End Session Now"})]})]})}),De&&a.jsx(hn,{isOpen:!0,onClose:()=>{Re(null),Ne(""),setEditingProductColor(null),Pe(!1)},title:"Edit Product",children:a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Product Name *"}),a.jsx("input",{type:"text",value:Ve,onChange:re=>Ne(re.target.value),placeholder:"Enter product name",className:"w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-0 focus:border-[#2D4660]"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Product Color"}),a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("button",{type:"button",onClick:()=>{Ar(editingProductColor||"#2D4660"),Pe(!0)},className:"block w-12 h-12 rounded-md border-2 border-gray-300 hover:border-gray-400 transition-all flex items-center justify-center overflow-hidden",style:editingProductColor?{backgroundColor:editingProductColor}:{backgroundColor:"#ffffff"},children:!editingProductColor&&a.jsx("img",{src:TT,alt:"Color Picker",className:"w-8 h-8 object-contain"})}),a.jsx("span",{className:"text-sm text-gray-600",children:editingProductColor||"No color selected"})]})]}),a.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t",children:[a.jsx(nt,{variant:"secondary",onClick:()=>{Re(null),Ne(""),setEditingProductColor(null),Pe(!1)},disabled:ht,children:"Cancel"}),a.jsx(nt,{variant:"primary",onClick:async()=>{if(!(!(De!=null&&De.id)||!Ve.trim())){pt(!0);try{await wx(De.id,{name:Ve.trim(),color_hex:editingProductColor});const re=(R==null?void 0:R.tenant_id)??(R==null?void 0:R.tenantId);if(re){const ze=await $a(re);Tt(ze.sort((et,Lt)=>et.name.localeCompare(Lt.name)))}Re(null),Ne(""),setEditingProductColor(null),Pe(!1),onProductColorUpdated&&onProductColorUpdated()}catch(re){console.error("Error updating product:",re),alert("Failed to update product. Please try again.")}finally{pt(!1)}}},disabled:ht||!Ve.trim(),children:ht?"Updating...":"Update Product"})]})]})}),gt&&a.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",onClick:()=>Pe(!1),children:a.jsx("div",{className:"bg-white rounded-lg shadow-xl px-3 py-2 w-auto mx-4",onClick:re=>re.stopPropagation(),children:a.jsxs("div",{className:"flex gap-3 items-stretch",children:[a.jsxs("div",{className:"flex-shrink-0",style:{width:"240px",height:"260px"},children:[a.jsx("input",{id:"edit-native-color-input",type:"color",value:ar,onChange:re=>Ar(re.target.value),ref:re=>{re&&gt&&setTimeout(()=>re.click(),50)},className:"opacity-0 absolute",style:{width:"1px",height:"1px"}}),a.jsx("div",{className:"w-full h-full"})]}),a.jsxs("button",{type:"button",onClick:()=>{setEditingProductColor(ar),Pe(!1)},className:"px-6 rounded-lg text-white font-bold shadow-lg hover:shadow-xl transition-all flex flex-col items-center justify-center gap-3 text-lg flex-shrink-0",style:{backgroundColor:ar,height:"260px",minWidth:"100px"},children:[a.jsx(sr,{className:"h-8 w-8"}),a.jsxs("div",{className:"text-center leading-tight",children:[a.jsx("div",{children:"Looks"}),a.jsx("div",{children:"Good"})]})]})]})})})]})}const fC=["User Experience","Vendor Management","Analytics & Reporting","Operational Efficiency","Compliance & Risk","Mobile Access","Integration","Sustainability","Budget Management"],kZ={title:"Q2 Product Roadmap",goal:"Prioritize features for the Purchasing Dashboard redesign",votesPerUser:10,useAutoVotes:!0,startDate:new Date().toISOString(),endDate:new Date(Date.now()+10080*60*1e3).toISOString(),isActive:!0,originalEndDate:null,endedEarlyBy:null,endedEarlyReason:null,endedEarlyDetails:null,reopenReason:null,reopenDetails:null,reopenedBy:null,reopenedAt:null,productId:null,productName:null,product_id:null,product_name:null},NZ={organization:"newmill",project:"Product",enabled:!1,workItemType:"Feature"},_Z=[{id:"u1",name:"John Doe",email:"john@example.com",totalVotes:10,usedVotes:0,votesPerFeature:{}},{id:"u2",name:"Jane Smith",email:"jane@example.com",totalVotes:10,usedVotes:0,votesPerFeature:{}},{id:"u3",name:"Robert Johnson",email:"robert@example.com",totalVotes:10,usedVotes:0,votesPerFeature:{}}],DT=(e,t,r)=>e?{label:"System Admin",className:"bg-purple-100 text-purple-800"}:t?{label:"Session Admin",className:"bg-blue-100 text-blue-800"}:r?{label:"Stakeholder",className:"bg-green-100 text-green-800"}:null,RT=e=>{const t=new Date(e),r=new Date;t.setHours(0,0,0,0),r.setHours(0,0,0,0);const n=t.getTime()-r.getTime();return Math.ceil(n/(1e3*60*60*24))},$T=e=>e<=0?"text-[#591D0F]":e<=2?"text-[#6A4234]":e<=4?"text-[#C89212]":"text-[#1E5461]",MT=e=>e<=0?"bg-[#591D0F]/10":e<=2?"bg-[#6A4234]/10":e<=4?"bg-[#C89212]/10":"bg-[#1E5461]/10",CZ=(e,t)=>{const r=new Date(e),n=new Date(t),s=new Date;return r<=s&&s<=n},EZ=e=>{const t=[...e];for(let r=t.length-1;r>0;r--){const n=Math.floor(Math.random()*(r+1));[t[r],t[n]]=[t[n],t[r]]}return t},Xu=(e,t)=>e?e.length>t?`${e.substring(0,t-3)}...`:e:"",lh=e=>{if(!e)return"";const t=document.createElement("div");t.innerHTML=e;let r=t.textContent||t.innerText||"";return r=r.replace(/\s+/g," ").trim(),r},AZ=e=>{const t=e.split("");for(let r=0;r<3;r++){const n=Math.floor(Math.random()*t.length),s=Math.floor(Math.random()*t.length);n!==s&&([t[n],t[s]]=[t[s],t[n]])}return t.join("")};function dp({src:e,alt:t,style:r,className:n,...s}){const[i,l]=v.useState(!1);return i?a.jsx("div",{className:`inline-block bg-gray-100 text-center align-middle ${n??""}`,style:r,children:a.jsx("div",{className:"flex items-center justify-center w-full h-full",children:a.jsx("img",{src:"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iODgiIGhlaWdodD0iODgiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgc3Ryb2tlPSIjMDAwIiBzdHJva2UtbGluZWpvaW49InJvdW5kIiBvcGFjaXR5PSIuMyIgZmlsbD0ibm9uZSIgc3Ryb2tlLXdpZHRoPSIzLjciPjxyZWN0IHg9IjE2IiB5PSIxNiIgd2lkdGg9IjU2IiBoZWlnaHQ9IjU2IiByeD0iNiIvPjxwYXRoIGQ9Im0xNiA1OCAxNi0xOCAzMiAzMiIvPjxjaXJjbGUgY3g9IjUzIiBjeT0iMzUiIHI9IjciLz48L3N2Zz4KCg==",alt:"Error loading image",...s,"data-original-url":e})})}):a.jsx("img",{src:e,alt:t,className:n,style:r,...s,onError:()=>l(!0)})}const nt=it.memo(function({children:t,onClick:r,variant:n="primary",disabled:s=!1,className:i="",...l}){const u="py-2 px-4 rounded-lg flex items-center transition-colors cursor-pointer",d={primary:"bg-[#2d4660] text-white hover:bg-[#173B65]",secondary:"border border-gray-300 text-gray-700 hover:bg-gray-50",danger:"bg-[#591D0F] text-white hover:bg-[#492434]",gold:"bg-[#C89212] text-white hover:bg-[#E0A814]",blue:"bg-[#173B65] text-white hover:bg-[#1D2C49]",gray:"bg-[#576C71] text-white hover:bg-[#1E5461]"};return a.jsx("button",{onClick:r,disabled:s,className:`${u} ${d[n]} ${s?"opacity-60 cursor-not-allowed":""} ${i}`,...l,children:t})});class hn extends v.Component{render(){const{isOpen:t,onClose:r,title:n,children:s,maxWidth:i="max-w-2xl",hideCloseButton:l=!1,hideHeader:u=!1}=this.props;return t?a.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:a.jsxs("div",{className:"flex items-center justify-center min-h-screen p-4 text-center",children:[a.jsx("div",{className:"fixed inset-0 transition-opacity bg-black/50",onClick:l?void 0:r,"aria-hidden":"true"}),a.jsxs("div",{className:`inline-block w-full ${i} p-6 my-8 overflow-visible text-left align-middle transition-all transform bg-white shadow-xl rounded-lg relative z-10`,children:[u?a.jsx("div",{className:"flex justify-end -mt-2 -mr-2",children:a.jsx("button",{onClick:r,className:"text-gray-400 hover:text-gray-500 focus:outline-none",children:a.jsx(Ms,{className:"h-5 w-5"})})}):a.jsxs("div",{className:"flex items-start justify-between mb-5",children:[a.jsxs("div",{className:"flex items-center gap-3 bg-[#FFF7E2] border border-[#C89212]/40 rounded-xl px-6 py-3 shadow-sm w-full mr-4",children:[a.jsx("div",{className:"flex items-center justify-center h-10 w-10 rounded-full bg-[#C89212]/15 text-[#C89212]",children:a.jsx(Nx,{className:"h-6 w-6"})}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-lg font-semibold text-[#2d4660] tracking-tight",children:n}),a.jsx("p",{className:"text-xs text-[#8A6D3B] font-medium mt-1 uppercase tracking-widest",children:"Spark the roadmap with your ideas"})]})]}),!l&&a.jsx("button",{onClick:r,className:"ml-3 text-gray-400 hover:text-gray-500 focus:outline-none",children:a.jsx(Ms,{className:"h-5 w-5"})})]}),a.jsx("div",{className:u?"-mt-4":"mt-2 overflow-visible",children:s})]})]})}):null}}const qd=it.memo(function({name:t,truncateAt:r=30,className:n}){if(!t)return null;const s=r===null?t:Xu(t,r),i=["flex items-center text-xs text-[#2d4660]",n].filter(Boolean).join(" ");return a.jsxs("div",{className:i,children:[a.jsx(PF,{className:"h-3 w-3 mr-1 text-[#2d4660]"}),a.jsx("span",{className:"font-medium leading-tight break-words",children:s})]})}),fp=it.memo(function({id:t,url:r}){return t?a.jsxs("a",{href:r,target:"_blank",rel:"noreferrer",className:"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-blue-100 text-blue-800 hover:bg-blue-200 cursor-pointer",title:"View in Azure DevOps",children:[a.jsx(rF,{className:"h-3 w-3 mr-1"}),"#",t]}):null}),PZ=it.memo(function({endDate:t}){const r=RT(t),n=$T(r),s=MT(r);return a.jsx("div",{className:`${s} rounded-md p-3 border ${r<=2?"border-[#6A4234]/20":r<=4?"border-[#C89212]/20":"border-[#1E5461]/20"}`,children:a.jsxs("div",{className:"flex items-center",children:[a.jsx(Zr,{className:`h-5 w-5 mr-2 ${n}`}),a.jsxs("div",{children:[a.jsxs("span",{className:`font-medium ${n}`,children:["Voting ends: ",ha(t)]}),a.jsx("div",{className:"text-sm mt-1",children:r<=0?a.jsx("span",{className:"text-red-600 font-medium",children:"Voting ends today!"}):a.jsxs("span",{className:`${n}`,children:[r," ",r===1?"day":"days"," remaining"]})})]})]})})});function OZ({isShuffling:e,onShuffle:t}){const[r,n]=v.useState("Shuffle Features"),s=v.useRef(null);return v.useEffect(()=>(e?s.current=window.setInterval(()=>{n(AZ("Shuffle Features"))},100):s.current!==null&&(window.clearInterval(s.current),n("Shuffle Features")),()=>{s.current!==null&&window.clearInterval(s.current)}),[e]),a.jsxs("button",{onClick:t,className:`py-2 px-4 rounded-lg flex items-center justify-center transition-all duration-300 w-full md:w-auto ${e?"bg-[#C89212] text-white scale-95":"bg-[#C89212] hover:bg-[#A67810] text-white hover:scale-105"}`,disabled:e,children:[a.jsx("span",{className:`transition-transform duration-500 ${e?"mr-2 animate-spin":"mr-2"}`,children:a.jsx(kF,{className:"h-4 w-4"})}),a.jsx("span",{className:"font-medium tracking-wide whitespace-nowrap",children:r})]})}const vh=it.memo(function({show:t,title:r,message:n,onConfirm:s,onCancel:i,confirmText:l="Confirm",cancelText:u="Cancel",type:d="delete"}){if(!t)return null;const m=d==="delete"?"bg-[#591D0F]/10":"bg-[#C89212]/10",f=d==="delete"?"text-[#591D0F]":"text-[#C89212]",p=d==="delete"?"bg-[#591D0F] hover:bg-[#492434]":"bg-[#C89212] hover:bg-[#A67810]";return a.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:a.jsxs("div",{className:"relative z-10 bg-white rounded-lg shadow-xl max-w-md w-full mx-auto overflow-hidden",children:[a.jsxs("div",{className:`${m} p-4 flex items-start space-x-4`,children:[a.jsx("div",{className:f,children:d==="delete"?a.jsx(Xi,{className:"h-5 w-5"}):a.jsx(Ht,{className:"h-5 w-5"})}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-lg font-medium text-gray-900",children:r}),a.jsx("p",{className:"mt-1 text-sm text-gray-500",children:n})]})]}),a.jsx("div",{className:"p-4 bg-white space-y-4",children:a.jsxs("div",{className:"flex items-center justify-end space-x-3",children:[a.jsx("button",{type:"button",onClick:i,className:"px-4 py-2 border border-gray-300 rounded-md text-sm font-medium text-gray-700 hover:bg-gray-50 cursor-pointer",children:u}),a.jsx("button",{type:"button",onClick:()=>{s(),i()},className:`px-4 py-2 rounded-md text-sm font-medium text-white ${p} cursor-pointer`,children:l})]})})]})})}),TZ=it.memo(function({feature:t,userVoteCount:r=0,remainingVotes:n=0,votingIsActive:s=!1,onVote:i,isShuffling:l=!1,shuffleStage:u="idle",currentUser:d,onRequestInfo:m}){const[f,p]=v.useState(!1),[y,x]=v.useState(!1),j=async()=>{if(!(!m||y)){x(!0);try{await m(t.id),p(!0)}catch(k){console.error("Error requesting info:",k)}finally{x(!1)}}},b=()=>{switch(u){case"fadeOut":return"opacity-0 scale-95 blur-sm";case"rearranging":return"opacity-0 scale-90";case"fadeIn":return"opacity-100 scale-100 blur-0";default:return"opacity-100 scale-100 blur-0"}};return a.jsx("div",{className:`relative z-10 bg-white rounded-lg shadow-md overflow-hidden transition-all duration-400 ease-in-out ${r>0?"border-2 border-[#1E5461]":""} ${b()}`,children:a.jsxs("div",{className:"p-6 flex flex-col h-full",children:[a.jsx("h3",{className:"text-lg font-semibold mb-2 text-[#2d4660]",children:t.title}),t.azureDevOpsId&&a.jsx("div",{className:"flex justify-end mb-4",children:a.jsx(fp,{id:t.azureDevOpsId,url:t.azureDevOpsUrl||""})}),t.description?a.jsx("p",{className:"text-gray-600 mb-4 flex-grow",children:t.description}):a.jsxs("div",{className:"mb-4 flex-grow",children:[a.jsx("p",{className:"text-gray-400 italic mb-3",children:"No description provided"}),d&&m&&a.jsx("div",{className:"transition-all duration-300",children:f?a.jsxs("div",{className:"text-sm px-3 py-2 bg-green-50 text-green-700 rounded-md font-medium flex items-center animate-fadeIn",children:[a.jsx(sr,{className:"h-4 w-4 mr-2 flex-shrink-0"}),a.jsx("span",{children:"Thank you! Your request has been sent."})]}):a.jsxs("button",{onClick:j,disabled:y,className:"text-sm px-3 py-2 bg-blue-50 hover:bg-blue-100 text-[#2d4660] rounded-md font-medium flex items-center transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:[a.jsx(Ht,{className:"h-4 w-4 mr-2 flex-shrink-0"}),a.jsx("span",{children:y?"Sending...":"Ask Product Owner for more info"})]})})]}),i&&a.jsx("div",{className:"mt-auto pt-3",children:a.jsxs("div",{className:`flex items-center mb-3 ${t.epic?"justify-between":"justify-end"}`,children:[t.epic&&a.jsx(qd,{name:t.epic,truncateAt:null,className:"text-sm bg-[#1E5461]/10 px-2 py-1 rounded-md"}),a.jsx("div",{className:"flex items-center space-x-2",children:r===0?a.jsx("button",{onClick:()=>i(t.id,!0),className:`px-6 py-2.5 rounded-lg text-base font-semibold cursor-pointer transition-colors ${s&&n>0?"bg-[#2d4660] text-white hover:bg-[#C89212]":"bg-gray-300 text-gray-600 cursor-not-allowed"}`,disabled:!s||n<=0,children:"Vote"}):a.jsxs(a.Fragment,{children:[a.jsx("button",{onClick:()=>i(t.id,!1),className:"p-2 rounded-full bg-gray-100 hover:bg-gray-200 text-gray-700 cursor-pointer transition-colors","aria-label":"Remove vote",disabled:!s,children:a.jsx(ts,{className:"h-6 w-6"})}),a.jsx("span",{className:"px-4 py-2 bg-[#1E5461]/10 text-[#1E5461] rounded-full font-semibold text-base min-w-[3rem] text-center",children:r}),a.jsx("button",{onClick:()=>i(t.id,!0),className:`p-2 rounded-full cursor-pointer transition-colors ${s&&n>0?"bg-[#2d4660]/10 hover:bg-[#C89212]/30 text-[#2d4660]":"bg-gray-100 text-gray-400 cursor-not-allowed"}`,disabled:!s||n<=0,"aria-label":"Add vote",children:a.jsx(JM,{className:"h-6 w-6"})})]})})]})})]})})});function IZ({feature:e,onClose:t}){return a.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:a.jsxs("div",{className:"relative z-10 bg-white rounded-lg p-6 max-w-md w-full max-h-[80vh] overflow-y-auto",children:[a.jsxs("div",{className:"flex justify-between items-center mb-4",children:[a.jsxs("h3",{className:"text-lg font-medium text-[#2d4660]",children:['Voters for "',e.title,'"']}),a.jsx("button",{onClick:t,className:"text-gray-500 hover:text-gray-700 cursor-pointer",children:a.jsx(Ms,{className:"h-5 w-5"})})]}),e.voters.length===0?a.jsx("p",{className:"text-gray-500",children:"No votes yet"}):a.jsx("ul",{className:"divide-y divide-gray-200",children:e.voters.map(r=>a.jsxs("li",{className:"py-3 flex justify-between items-center",children:[a.jsxs("div",{children:[a.jsx("p",{className:"font-medium",children:r.name}),a.jsx("p",{className:"text-sm text-gray-500",children:r.email})]}),a.jsxs("div",{className:"bg-[#2d4660]/10 text-[#2d4660] rounded-full px-3 py-1",children:[r.voteCount," ",r.voteCount===1?"vote":"votes"]})]},r.userId))})]})})}function DZ({features:e,onResetVotes:t,onResetAllVotes:r,onBack:n,showVotersList:s,setShowVotersList:i,votingSession:l,effectiveVotesPerUser:u,onLogout:d}){const m=zs(),[f,p]=v.useState(!1),y=v.useRef(null);v.useEffect(()=>{if(!f)return;const _=E=>{y.current&&!y.current.contains(E.target)&&p(!1)};return document.addEventListener("mousedown",_),document.addEventListener("touchstart",_,{passive:!0}),()=>{document.removeEventListener("mousedown",_),document.removeEventListener("touchstart",_)}},[f]);const x=v.useMemo(()=>[...e].sort((_,E)=>E.votes-_.votes),[e]),j=v.useMemo(()=>x.slice(0,10).map(_=>({name:_.title,votes:_.votes,id:_.id})),[x]),b=RT(l.endDate),k=$T(b);return a.jsxs("div",{className:"container mx-auto p-4 max-w-6xl pb-8",children:[a.jsx("div",{className:"hidden md:flex md:justify-center mb-2",children:a.jsx("img",{src:oi,alt:"New Millennium Building Systems Logo",className:"-mt-4 cursor-pointer hover:opacity-80 transition-opacity",style:{height:"96px",width:"auto"},onClick:()=>m("/sessions")})}),a.jsxs("div",{className:"flex justify-between items-center mb-6",children:[a.jsxs("div",{className:"flex items-center",children:[a.jsx(dp,{src:Sa,alt:"New Millennium Building Systems Logo",className:"mr-4 md:hidden cursor-pointer hover:opacity-80 transition-opacity",style:{width:"40px",height:"40px",objectFit:"contain"},onClick:()=>m("/sessions")}),a.jsx("button",{onClick:n,className:"mr-2 p-1 rounded-full hover:bg-gray-200 cursor-pointer",children:a.jsx(Cd,{className:"h-6 w-6"})}),a.jsx("h1",{className:"text-2xl font-bold text-[#2d4660] md:text-3xl",children:wi(l.endDate)?"Final Voting Results":"Current Voting Results"})]}),a.jsxs("div",{ref:y,className:"relative z-40",children:[a.jsxs("div",{className:"hidden md:flex space-x-2",children:[a.jsxs(nt,{variant:"primary",onClick:n,className:"flex items-center",children:[a.jsx(An,{className:"mr-2 h-4 w-4"}),"Admin Dashboard"]}),a.jsx(nt,{variant:"danger",onClick:r,children:"Reset All Votes"}),a.jsxs(nt,{variant:"gray",onClick:d,className:"flex items-center",children:[a.jsx(Vn,{className:"mr-2 h-4 w-4"}),"Logout"]})]}),a.jsx("div",{className:"flex md:hidden",children:a.jsx("button",{onClick:()=>p(!f),className:"p-2 rounded-md border border-gray-200 bg-white shadow-sm","aria-label":"Open menu",children:a.jsx(ei,{className:"h-5 w-5 text-gray-700"})})}),f&&a.jsx("div",{className:"absolute right-0 mt-2 w-56 bg-white border border-gray-200 rounded-lg shadow-lg md:hidden z-50",children:a.jsxs("div",{className:"py-1",children:[a.jsxs("button",{onClick:()=>{p(!1),n()},className:"w-full px-3 py-2 flex items-center text-left hover:bg-gray-50",children:[a.jsx(An,{className:"h-4 w-4 mr-2 text-gray-700"}),"Admin Dashboard"]}),a.jsxs("button",{onClick:()=>{p(!1),r()},className:"w-full px-3 py-2 flex items-center text-left hover:bg-gray-50 text-red-600",children:[a.jsx(Xi,{className:"h-4 w-4 mr-2"}),"Reset All Votes"]}),a.jsxs("button",{onClick:()=>{p(!1),d()},className:"w-full px-3 py-2 flex items-center text-left hover:bg-gray-50",children:[a.jsx(Vn,{className:"h-4 w-4 mr-2 text-gray-700"}),"Logout"]})]})})]})]}),a.jsxs("div",{className:"relative z-10 bg-white rounded-lg shadow-md p-4 mb-6",children:[a.jsxs("div",{className:"flex justify-between items-center mb-4",children:[a.jsx("h2",{className:"text-xl font-semibold text-[#2d4660]",children:l.title}),a.jsxs("div",{className:"text-sm text-gray-600",children:[a.jsxs("span",{className:"mr-2",children:["Votes per user: ",u]}),l.isActive?a.jsx("span",{className:"text-[#1E5461] font-medium",children:"Voting Active"}):wi(l.endDate)?a.jsx("span",{className:"text-[#591D0F] font-medium",children:"Voting Closed"}):a.jsx("span",{className:"text-[#C89212] font-medium",children:"Voting Upcoming"})]})]}),a.jsx("p",{className:"text-gray-600 mb-4",children:l.goal}),l.isActive&&a.jsx("div",{className:`${MT(b)} relative z-10 rounded-md p-3 mb-4 inline-block border ${b<=2?"border-[#6A4234]/20":b<=4?"border-[#C89212]/20":"border-[#1E5461]/20"}`,children:a.jsxs("div",{className:"flex items-center",children:[a.jsx(Zr,{className:`h-4 w-4 mr-2 ${k}`}),a.jsx("span",{className:`${k} font-medium`,children:b<=0?"Voting ends today!":`${b} ${b===1?"day":"days"} remaining until ${ha(l.endDate)}`})]})}),a.jsx("div",{className:"h-72",children:a.jsx(nB,{width:"100%",height:"100%",children:a.jsxs(YQ,{data:j,margin:{top:20,right:30,left:20,bottom:60},children:[a.jsx(yT,{dataKey:"name",angle:-45,textAnchor:"end",height:80,tick:{fontSize:12}}),a.jsx(vT,{}),a.jsx(IK,{}),a.jsx(fT,{dataKey:"votes",fill:"#3B82F6",children:j.map((_,E)=>a.jsx(Xw,{fill:E%2===0?"#2d4660":"#4f6d8e"},`cell-${E}`))})]})})})]}),a.jsxs("div",{className:"relative z-10 bg-white rounded-lg shadow-md p-4",children:[a.jsx("h2",{className:"text-xl font-semibold mb-4 text-[#2d4660]",children:"Feature Details"}),a.jsx("div",{className:"w-full overflow-x-auto",children:a.jsxs("table",{className:"min-w-full divide-y divide-gray-200 table-fixed",children:[a.jsx("thead",{className:"bg-gray-50",children:a.jsxs("tr",{children:[a.jsx("th",{scope:"col",className:"w-12 px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Rank"}),a.jsx("th",{scope:"col",className:"w-1/2 px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Title"}),a.jsx("th",{scope:"col",className:"hidden sm:table-cell w-1/4 px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Epic"}),a.jsx("th",{scope:"col",className:"w-14 px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Votes"}),a.jsx("th",{scope:"col",className:"hidden md:table-cell w-20 px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Voters"}),a.jsx("th",{scope:"col",className:"w-20 px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),a.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:x.map((_,E)=>a.jsxs("tr",{className:"align-top group",children:[a.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm font-medium",children:E+1}),a.jsxs("td",{className:"px-4 py-4 whitespace-normal break-words text-sm font-medium",children:[_.title,_.azureDevOpsId&&a.jsx("div",{className:"mt-1",children:a.jsx(fp,{id:_.azureDevOpsId,url:_.azureDevOpsUrl||""})})]}),a.jsx("td",{className:"hidden sm:table-cell px-4 py-4 whitespace-nowrap text-sm",children:_.epic&&a.jsx(qd,{name:_.epic})}),a.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm",children:_.votes}),a.jsx("td",{className:"hidden md:table-cell px-4 py-4 whitespace-nowrap text-sm",children:a.jsxs("button",{onClick:()=>i(_.id),className:"text-[#2d4660] hover:text-[#C89212] flex items-center cursor-pointer",disabled:_.voters.length===0,children:[a.jsx(ns,{className:"h-4 w-4 mr-1"}),_.voters.length," ",_.voters.length===1?"user":"users"]})}),a.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm md:opacity-0 md:group-hover:opacity-100 transition-opacity",children:a.jsx("button",{onClick:()=>t(_.id),className:"text-[#591D0F] hover:text-[#492434] cursor-pointer",disabled:_.votes===0,children:"Reset Votes"})})]},_.id))})]})})]}),s&&a.jsx(IZ,{feature:e.find(_=>_.id===s),onClose:()=>i(null)})]})}function RZ({navigate:e,votingSession:t}){return a.jsx("div",{className:"relative z-10 flex flex-col items-center justify-center min-h-[80vh] p-6",children:a.jsxs("div",{className:"relative z-10 w-full max-w-md bg-white rounded-lg shadow-lg p-8 text-center",children:[a.jsx("img",{src:oi,alt:"New Millennium Building Systems Logo",className:"mx-auto mb-6",style:{maxWidth:"200px",height:"auto"}}),a.jsx("div",{className:"w-20 h-20 bg-[#1E5461]/10 rounded-full flex items-center justify-center mx-auto mb-6",children:a.jsx(sr,{className:"h-12 w-12 text-[#1E5461]"})}),a.jsx("h1",{className:"text-3xl font-bold text-[#1E5461] mb-4",children:"Thank You!"}),a.jsxs("p",{className:"text-gray-700 text-lg mb-6",children:["Your votes for ",a.jsx("span",{className:"font-semibold",children:t.title})," have been submitted successfully."]}),a.jsx("p",{className:"text-gray-600 mb-8",children:"We appreciate your input in helping prioritize features for our product roadmap."}),a.jsx(nt,{variant:"primary",onClick:()=>e("/sessions"),className:"mx-auto",children:"View All Voting Sessions"})]})})}function FT({currentRole:e="stakeholder",onSelectStakeholder:t,onSelectSessionAdmin:r,onSelectSystemAdmin:n,showRoleToggle:s=!0}){const i=new Date().getFullYear(),l=[];(t||e==="stakeholder")&&l.push({key:"stakeholder",label:"Stakeholder View",icon:a.jsx(ns,{className:"h-4 w-4 inline mr-2"}),onClick:t}),(r||e==="session-admin")&&l.push({key:"session-admin",label:"Session Admin",icon:a.jsx(Bn,{className:"h-4 w-4 inline mr-2"}),onClick:r}),(n||e==="system-admin")&&l.push({key:"system-admin",label:"System Admin",icon:a.jsx(vs,{className:"h-4 w-4 inline mr-2"}),onClick:n});const u=["stakeholder","session-admin","system-admin"];l.sort((m,f)=>{const p=u.indexOf(m.key),y=u.indexOf(f.key);return p-y});const d=s&&l.length>0;return a.jsx("footer",{className:"mt-auto bg-gray-50 border-t border-gray-200",children:a.jsxs("div",{className:"container mx-auto px-4 py-6 max-w-6xl",children:[d&&a.jsx("div",{className:"flex justify-center mb-6",children:a.jsx("div",{className:"inline-flex items-center bg-gray-100 rounded-lg p-1",children:l.map(({key:m,label:f,icon:p,onClick:y})=>{const x=e===m,j=!y;return a.jsxs("button",{onClick:y,disabled:j,className:`px-4 py-2 rounded-md text-sm font-medium transition-colors flex items-center ${x?"bg-white text-[#2d4660] shadow-sm":"text-gray-600 hover:text-gray-900"} ${j&&!x?"opacity-60 cursor-not-allowed":""}`,children:[p,a.jsx("span",{children:f})]},m)})})}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 text-sm text-gray-600",children:[a.jsxs("div",{children:[a.jsx("h3",{className:"font-semibold text-gray-900 mb-2",children:"New Millennium Building Systems"}),a.jsxs("p",{className:"text-xs leading-relaxed",children:["A Steel Dynamics Company",a.jsx("br",{}),"Innovation in structural steel manufacturing"]})]}),a.jsxs("div",{children:[a.jsx("h3",{className:"font-semibold text-gray-900 mb-2",children:"Quick Links"}),a.jsxs("ul",{className:"space-y-1 text-xs",children:[a.jsx("li",{children:a.jsx("a",{href:"https://www.steeldynamics.com",target:"_blank",rel:"noopener noreferrer",className:"hover:text-[#2d4660] transition-colors",children:"Steel Dynamics Inc."})}),a.jsx("li",{children:a.jsx("a",{href:"https://www.newmill.com",target:"_blank",rel:"noopener noreferrer",className:"hover:text-[#2d4660] transition-colors",children:"New Millennium"})})]})]}),a.jsxs("div",{children:[a.jsx("h3",{className:"font-semibold text-gray-900 mb-2",children:"Need Help?"}),a.jsx("p",{className:"text-xs",children:"Contact your Product Owner or session administrator for assistance with voting."})]})]}),a.jsx("div",{className:"mt-6 pt-6 border-t border-gray-200 text-center text-xs text-gray-500",children:a.jsxs("p",{children:[" ",i," New Millennium Building Systems, LLC. All rights reserved."]})})]})})}function hC({feature:e,onSubmit:t,onCancel:r}){const{register:n,handleSubmit:s,formState:{errors:i}}=cd({defaultValues:e?{title:e.title,description:e.description,epic:e.epic}:{epic:fC[0]}});return a.jsxs("form",{onSubmit:s(t),children:[a.jsxs("div",{className:"mb-4",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Title"}),a.jsx("input",{...n("title",{required:"Title is required"}),className:"w-full px-3 py-2 border border-gray-300 rounded-md"}),i.title&&a.jsx("p",{className:"mt-1 text-sm text-red-600",children:i.title.message})]}),a.jsxs("div",{className:"mb-4",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),a.jsx("textarea",{...n("description",{required:"Description is required"}),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-md"}),i.description&&a.jsx("p",{className:"mt-1 text-sm text-red-600",children:i.description.message})]}),a.jsxs("div",{className:"mb-4",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Epic"}),a.jsx("select",{...n("epic",{required:"Epic is required"}),className:"w-full px-3 py-2 border border-gray-300 rounded-md bg-white",children:fC.map(l=>a.jsx("option",{value:l,children:l},l))}),i.epic&&a.jsx("p",{className:"mt-1 text-sm text-red-600",children:i.epic.message})]}),a.jsxs("div",{className:"flex justify-end space-x-2 mt-6",children:[a.jsx(nt,{variant:"secondary",type:"button",onClick:r,children:"Cancel"}),a.jsxs(nt,{variant:"primary",type:"submit",children:[e?"Update":"Add"," Feature"]})]})]})}function $Z({currentUser:e,votingSession:t,onChangeVotes:r,onToggleAdmin:n,isAdmin:s,navigate:i,userVotes:l,features:u,isSystemAdmin:d,isSessionAdmin:m,isStakeholder:f}){const[p,y]=v.useState(!1),x=Object.values(l).reduce((k,_)=>k+_,0),j=u.filter(k=>l[k.id]>0),b=DT(d,m,f);return a.jsxs("div",{className:"container mx-auto p-4 max-w-6xl min-h-screen pb-8",children:[a.jsx("div",{className:"hidden md:flex md:justify-center mb-2",children:a.jsx("img",{src:oi,alt:"New Millennium Building Systems Logo",className:"-mt-4 cursor-pointer hover:opacity-80 transition-opacity",style:{height:"96px",width:"auto"},onClick:()=>i("/sessions")})}),a.jsxs("div",{className:"flex flex-col md:flex-row md:justify-between md:items-center mb-6",children:[a.jsxs("div",{className:"flex items-start md:items-center",children:[a.jsx(dp,{src:Sa,alt:"New Millennium Building Systems Logo",className:"mr-4 md:hidden",style:{width:"40px",height:"40px",objectFit:"contain"}}),a.jsxs("div",{children:[a.jsx("h1",{className:"text-2xl font-bold text-[#2d4660] md:text-3xl",children:"Feature Voting"}),a.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:["Welcome, ",e==null?void 0:e.name,(e==null?void 0:e.email)&&a.jsxs("a",{href:`mailto:${e.email}`,className:"ml-2 text-[#2D4660] hover:underline",children:["(",e.email,")"]}),b&&a.jsx("span",{className:`ml-2 inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium ${b.className}`,children:b.label})]})]})]}),a.jsxs("div",{className:"relative z-10 flex items-center space-x-2 mt-3 md:mt-0 md:justify-end",children:[s&&a.jsxs(nt,{variant:"primary",onClick:n,className:"flex items-center",children:[a.jsx(An,{className:"mr-2 h-4 w-4"}),a.jsx("span",{className:"hidden md:inline",children:"Admin Dashboard"}),a.jsx("span",{className:"md:hidden",children:"Admin"})]}),a.jsxs(nt,{variant:"gray",onClick:()=>i("/sessions"),className:"flex items-center",children:[a.jsx(Vn,{className:"mr-2 h-4 w-4"}),a.jsx("span",{className:"hidden md:inline",children:"All Sessions"}),a.jsx("span",{className:"md:hidden",children:"Sessions"})]})]})]}),a.jsx("div",{className:"max-w-3xl mx-auto",children:a.jsxs("div",{className:"relative z-10 bg-white rounded-lg shadow-lg p-8 text-center",children:[a.jsx("div",{className:"w-20 h-20 bg-[#1E5461]/10 rounded-full flex items-center justify-center mx-auto mb-6",children:a.jsx(sr,{className:"h-12 w-12 text-[#1E5461]"})}),a.jsx("h2",{className:"text-3xl font-bold text-[#1E5461] mb-4",children:"Votes Already Submitted"}),a.jsxs("p",{className:"text-gray-700 text-lg mb-2",children:["Welcome back, ",a.jsx("span",{className:"font-semibold",children:e.name}),"!"]}),a.jsxs("p",{className:"text-gray-600 mb-6",children:["You have already submitted your votes for ",a.jsx("span",{className:"font-semibold",children:t.title}),"."]}),a.jsxs("div",{className:"bg-gray-50 rounded-lg p-6 mb-6",children:[a.jsx("h3",{className:"text-lg font-semibold text-[#2d4660] mb-4",children:"Your Current Votes"}),a.jsxs("div",{className:"space-y-3",children:[j.map(k=>a.jsxs("div",{className:"flex justify-between items-start gap-4",children:[a.jsxs("div",{children:[a.jsx("span",{className:"block text-gray-700 font-medium",children:k.title}),k.epic&&a.jsx("div",{className:"mt-1",children:a.jsx(qd,{name:k.epic,truncateAt:null,className:"text-xs bg-[#1E5461]/10 px-2 py-0.5 rounded"})})]}),a.jsxs("span",{className:"bg-[#1E5461]/10 text-[#1E5461] rounded-full px-3 py-1 font-medium self-center",children:[l[k.id]," ",l[k.id]===1?"vote":"votes"]})]},k.id)),a.jsx("div",{className:"border-t border-gray-200 pt-3 mt-3",children:a.jsxs("div",{className:"flex justify-between items-center font-semibold",children:[a.jsx("span",{className:"text-[#2d4660]",children:"Total Votes"}),a.jsx("span",{className:"text-[#2d4660]",children:x})]})})]})]}),a.jsx("div",{className:"bg-[#C89212]/10 border border-[#C89212]/20 rounded-lg p-4 mb-6",children:a.jsxs("div",{className:"flex items-start text-left",children:[a.jsx($E,{className:"h-5 w-5 text-[#C89212] mr-3 mt-0.5 flex-shrink-0"}),a.jsx("div",{children:a.jsxs("p",{className:"text-sm text-gray-700",children:["If you'd like to change your votes, you can do so below. However, please note that this will",a.jsx("span",{className:"font-semibold",children:" permanently remove your previous votes"})," and allow you to vote again. This action cannot be undone."]})})]})}),a.jsxs(nt,{variant:"gold",onClick:()=>y(!0),className:"mx-auto text-lg py-3 px-8",children:[a.jsx(_l,{className:"mr-2 h-5 w-5"}),"Change My Votes"]})]})}),a.jsx(vh,{show:p,title:"Change Your Votes?",message:"This will permanently remove all your previous votes for this session and allow you to vote again. This action cannot be undone. Are you sure you want to continue?",onConfirm:r,onCancel:()=>y(!1),confirmText:"Yes, Change My Votes",cancelText:"Cancel",type:"reset"})]})}const MZ=it.memo(function({features:t,currentUser:r,pendingVotes:n,pendingUsedVotes:s,onVote:i,onSubmitVotes:l,onToggleAdmin:u,isAdmin:d,votingSession:m,navigate:f,effectiveVotesPerUser:p,sessionId:y,onLogout:x,onSuggestionSubmitted:j,isSystemAdmin:b,isSessionAdmin:k,isStakeholder:_}){const[E,C]=v.useState([...t]),[O,T]=v.useState(!1),[A,L]=v.useState("idle"),[J,H]=v.useState(!1),[me,Z]=v.useState({}),[K,ce]=v.useState(!0),[z,se]=v.useState(!1),[B,ue]=v.useState(!1),[oe,X]=v.useState(""),[ee,D]=v.useState(""),[q,Te]=v.useState(""),[we,Ce]=v.useState(""),[le,de]=v.useState(!1),[Q,R]=v.useState(null),[ge,$e]=v.useState(!1),V=v.useRef(null),Fe=DT(b,k,_);v.useEffect(()=>{if(!z)return;const Se=ye=>{V.current&&!V.current.contains(ye.target)&&se(!1)};return document.addEventListener("mousedown",Se),document.addEventListener("touchstart",Se,{passive:!0}),()=>{document.removeEventListener("mousedown",Se),document.removeEventListener("touchstart",Se)}},[z]),v.useEffect(()=>{C([...t])},[t]),v.useEffect(()=>{async function Se(){if(!r||!y){ce(!1);return}try{const be=(await Eo(y)).filter(qe=>qe.user_id===r.id);if(be.length>0){const qe={};be.forEach(yt=>{qe[yt.feature_id]=yt.vote_count}),Z(qe),H(!0)}else H(!1),Z({})}catch(ye){console.error("Error checking existing votes:",ye),H(!1)}finally{ce(!1)}}Se()},[r,y]);const Be=v.useCallback(async()=>{if(!(!r||!y))try{await SR(y,r.id),H(!1),Z({})}catch(Se){console.error("Error changing votes:",Se),alert("Failed to reset votes. Please try again.")}},[r,y]),dt=v.useCallback(()=>{O||(T(!0),L("fadeOut"),setTimeout(()=>{L("rearranging"),setTimeout(()=>{C(EZ(t)),L("fadeIn"),setTimeout(()=>{L("idle"),T(!1)},400)},200)},400))},[t,O]),ft=v.useCallback(async Se=>{const ye=t.find(be=>be.id===Se);if(!(!ye||!r))try{await ER({session_id:y,feature_id:Se,feature_title:ye.title,requester_id:r.id,requester_name:r.name,requester_email:r.email,created_at:new Date().toISOString()})}catch(be){throw console.error("Error submitting info request:",be),alert("Failed to submit request. Please try again."),be}},[t,r,y]),Dt=v.useCallback(()=>{R(null),$e(!1),ue(!0)},[]),Nt=v.useCallback(()=>{le||(ue(!1),R(null),$e(!1),X(""),D(""),Te(""),Ce(""))},[le]),Xt=v.useCallback(async Se=>{Se.preventDefault();const ye=oe.trim(),be=ee.trim(),qe=q.trim(),yt=we.trim();if(!ye){R("Please provide a brief title for your suggestion.");return}if(!y){R("Unable to link this suggestion to the current session.");return}try{de(!0),R(null);const wt=await AR({session_id:y,title:ye,description:be||null,requester_id:(r==null?void 0:r.id)??null,requester_name:(r==null?void 0:r.name)??null,requester_email:(r==null?void 0:r.email)??null,whatWouldItDo:qe||null,howWouldItWork:yt||null});j==null||j(wt),$e(!0),X(""),D(""),Te(""),Ce("")}catch(wt){console.error("Error submitting feature suggestion:",wt),R("We were unable to submit your suggestion. Please try again in a moment.")}finally{de(!1)}},[ee,oe,q,we,r,y,le,j]);if(!r)return null;if(K)return a.jsx("div",{className:"container mx-auto p-4 max-w-6xl min-h-screen flex items-center justify-center",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-[#2d4660] mx-auto mb-4"}),a.jsx("p",{className:"text-gray-600",children:"Loading your voting status..."})]})});if(J)return a.jsx($Z,{currentUser:r,votingSession:m,onChangeVotes:Be,onToggleAdmin:u,isAdmin:d,navigate:f,userVotes:me,features:t,isSystemAdmin:b,isSessionAdmin:k,isStakeholder:_});const M=p-s,ie=M===0,pe=m.isActive;return a.jsxs("div",{className:"container mx-auto p-4 max-w-6xl pb-8",children:[a.jsx("div",{className:"hidden md:flex md:justify-center mb-2",children:a.jsx("img",{src:oi,alt:"New Millennium Building Systems Logo",className:"-mt-4 cursor-pointer hover:opacity-80 transition-opacity",style:{height:"96px",width:"auto"},onClick:()=>f("/sessions")})}),a.jsxs("div",{className:"flex justify-between items-center mb-6",children:[a.jsxs("div",{className:"flex items-start md:items-center",children:[a.jsx(dp,{src:Sa,alt:"New Millennium Building Systems Logo",className:"mr-4 md:hidden",style:{width:"40px",height:"40px",objectFit:"contain"}}),a.jsxs("div",{children:[a.jsx("h1",{className:"text-2xl font-bold text-[#2d4660] md:text-3xl",children:"Feature Voting"}),a.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:["Welcome, ",r==null?void 0:r.name,(r==null?void 0:r.email)&&a.jsxs("a",{href:`mailto:${r.email}`,className:"ml-2 text-[#2D4660] hover:underline",children:["(",r.email,")"]}),Fe&&a.jsx("span",{className:`ml-2 inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium ${Fe.className}`,children:Fe.label})]})]})]}),a.jsxs("div",{ref:V,className:"relative z-40",children:[a.jsxs("div",{className:"hidden md:flex items-center space-x-2",children:[d&&a.jsxs(nt,{variant:"primary",onClick:u,className:"flex items-center",children:[a.jsx(An,{className:"mr-2 h-4 w-4"}),"Admin Dashboard"]}),a.jsx(nt,{variant:"gray",onClick:()=>f("/sessions"),className:"flex items-center",children:"All Sessions"}),a.jsxs(nt,{variant:"gray",onClick:x,className:"flex items-center",children:[a.jsx(Vn,{className:"mr-2 h-4 w-4"}),"Logout"]})]}),a.jsx("div",{className:"flex md:hidden",children:a.jsx("button",{onClick:()=>se(!z),className:"p-2 rounded-md border border-gray-200 bg-white shadow-sm","aria-label":"Open menu",children:a.jsx(ei,{className:"h-5 w-5 text-gray-700"})})}),z&&a.jsx("div",{className:"absolute right-0 mt-2 w-56 bg-white border border-gray-200 rounded-lg shadow-lg md:hidden z-50",children:a.jsxs("div",{className:"py-1",children:[d&&a.jsxs("button",{onClick:()=>{se(!1),u()},className:"w-full px-3 py-2 flex items-center text-left hover:bg-gray-50",children:[a.jsx(An,{className:"h-4 w-4 mr-2 text-gray-700"}),"Admin Dashboard"]}),a.jsx("button",{onClick:()=>{se(!1),f("/sessions")},className:"w-full px-3 py-2 flex items-center text-left hover:bg-gray-50",children:"All Sessions"}),a.jsxs("button",{onClick:()=>{se(!1),x()},className:"w-full px-3 py-2 flex items-center text-left hover:bg-gray-50",children:[a.jsx(Vn,{className:"h-4 w-4 mr-2 text-gray-700"}),"Logout"]})]})})]})]}),a.jsx("div",{className:"relative z-10 mb-6 bg-white rounded-lg shadow-md p-4",children:a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[a.jsxs("div",{className:"md:col-span-2",children:[a.jsx("h2",{className:"text-xl font-semibold text-[#2d4660] mb-2",children:m.title}),a.jsx("p",{className:"text-gray-600",children:m.goal})]}),a.jsxs("div",{className:"flex flex-col justify-center",children:[a.jsx(PZ,{endDate:m.endDate}),a.jsxs("div",{className:"flex items-center mt-3",children:[a.jsx(Zn,{className:"h-4 w-4 mr-2 text-[#2d4660]"}),a.jsxs("p",{className:"text-gray-700",children:["You have ",a.jsxs("span",{className:"font-bold text-[#2d4660]",children:[M," / ",p]})," votes remaining"]})]})]})]})}),!pe&&a.jsx("div",{className:"mb-6 bg-[#C89212]/10 p-4 rounded-lg border border-[#C89212]/20",children:a.jsxs("div",{className:"flex items-center text-[#6A4234]",children:[a.jsx(Am,{className:"h-5 w-5 mr-2"}),a.jsxs("span",{className:"font-medium",children:["Voting is currently ",wi(m.endDate)?"closed":"not yet open",".",wi(m.endDate)?` Voting ended on ${ha(m.endDate)}.`:` Voting will open on ${ha(m.startDate)}.`]})]})}),a.jsxs("div",{className:"flex flex-col md:flex-row md:justify-between md:items-center mb-4 gap-3",children:[a.jsx("h2",{className:"text-xl font-semibold text-[#2d4660]",children:"Available Features"}),a.jsxs("div",{className:"flex flex-col md:flex-row items-stretch md:items-center gap-3",children:[a.jsxs(nt,{variant:"gold",onClick:Dt,className:"flex items-center justify-center w-full md:w-auto",children:[a.jsx(Nx,{className:"h-4 w-4 mr-2"}),"Suggest a Feature"]}),t.length>6&&a.jsx(OZ,{isShuffling:O,onShuffle:dt})]})]}),a.jsx("div",{className:`grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 ${s>0?"mb-32":""}`,children:E.map(Se=>{const ye=n[Se.id]||0;return a.jsx(TZ,{feature:Se,userVoteCount:ye,remainingVotes:M,votingIsActive:pe,onVote:i,isShuffling:O,shuffleStage:A,currentUser:r,onRequestInfo:ft},Se.id)})}),s>0&&a.jsx("div",{className:"fixed bottom-0 left-0 right-0 bg-white shadow-lg border-t border-gray-200 p-4",children:a.jsxs("div",{className:"container mx-auto max-w-6xl flex items-center justify-between",children:[a.jsxs("div",{children:[!ie&&a.jsxs("div",{className:"flex items-center",children:[a.jsx($E,{className:"h-5 w-5 text-[#C89212] mr-2"}),a.jsxs("span",{className:"text-gray-700",children:["You still have ",a.jsx("span",{className:"font-semibold text-[#C89212]",children:M})," votes remaining."]})]}),ie&&a.jsxs("div",{className:"flex items-center",children:[a.jsx(sr,{className:"h-5 w-5 text-[#1E5461] mr-2"}),a.jsx("span",{className:"text-gray-700",children:"All votes allocated! You can now submit your votes."})]})]}),a.jsx("button",{onClick:l,className:`py-3 px-6 rounded-lg font-medium cursor-pointer ${ie?"bg-[#1E5461] hover:bg-[#173B65] text-white":"bg-gray-300 text-gray-600 cursor-not-allowed"}`,disabled:!ie,children:"Submit Votes"})]})}),a.jsx(hn,{isOpen:B,onClose:Nt,title:"Suggest a Feature",maxWidth:"max-w-lg",children:a.jsxs("form",{onSubmit:Xt,className:"space-y-4",children:[a.jsxs("div",{className:"bg-[#1E5461]/10 border border-[#1E5461]/30 text-sm text-[#1E5461] rounded-md px-3 py-2",children:["All suggested features will be reviewed for ",a.jsx("strong",{children:"future sessions"}),".",a.jsx("br",{}),"Suggestions will not be added to the current session."]}),Q&&a.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 text-sm rounded-md px-3 py-2",children:Q}),ge&&a.jsx("div",{className:"bg-green-50 border border-green-200 text-green-700 text-sm rounded-md px-3 py-2",children:"Thank you! Your suggestion has been recorded."}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Feature title"}),a.jsx("input",{type:"text",value:oe,onChange:Se=>X(Se.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md",placeholder:"Give your feature a name",disabled:le||ge})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"What problem would this solve? (optional)"}),a.jsx("textarea",{value:ee,onChange:Se=>D(Se.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md",rows:4,placeholder:"Share a few details so we understand the request.",disabled:le||ge})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"What would it do? (optional)"}),a.jsx("textarea",{value:q,onChange:Se=>Te(Se.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md",rows:3,placeholder:"Describe the functionality or outcome users would experience.",disabled:le||ge})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"How would it work? (optional)"}),a.jsx("textarea",{value:we,onChange:Se=>Ce(Se.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md",rows:3,placeholder:"Share any ideas on workflow, technical approach, or integration.",disabled:le||ge})]}),a.jsxs("div",{className:"flex justify-end gap-2",children:[a.jsx(nt,{type:"button",variant:"secondary",onClick:Nt,disabled:le,children:"Close"}),!ge&&a.jsxs(nt,{type:"submit",variant:"primary",disabled:le,className:"flex items-center",children:[le&&a.jsx(_l,{className:"h-4 w-4 animate-spin mr-2"}),"Submit Suggestion"]})]})]})})]})});function $v({defaultVotesPerUser:e=10,adminMode:t=!1,resultsMode:r=!1}){const{currentSession:n,currentUser:s,setCurrentUser:i,setCurrentSession:l,refreshSessions:u,isSystemAdmin:d,isAdmin:m,isStakeholder:f}=ba(),p=zs(),y=async()=>{try{await je.auth.signOut()}catch{}try{l(null)}catch{}i(null);try{localStorage.removeItem("voting_system_current_session"),localStorage.removeItem("azureDevOpsAuthInProgress"),sessionStorage.removeItem("oauth_return_path"),sessionStorage.removeItem("oauth_action")}catch{}p("/login",{replace:!0})};v.useEffect(()=>{const ae=new URLSearchParams(window.location.search),ke=ae.has("code")||ae.has("error"),De=localStorage.getItem("voting_system_current_session");!n&&!ke&&!De&&p("/sessions")},[n,p]);const x=v.useMemo(()=>{const ae=new URLSearchParams(window.location.search);return ae.has("code")||ae.has("error")},[]),[j,b]=v.useState([]),[k,_]=v.useState(!0),[E,C]=v.useState(_Z),[O,T]=v.useState(r?"results":t||x?"admin":"voting"),[A,L]=v.useState(t||x||r),[J,H]=v.useState(null),[me,Z]=v.useState(!1),[K,ce]=v.useState(null),[z,se]=v.useState({...kZ,votesPerUser:e}),[B,ue]=v.useState(NZ),[oe,X]=v.useState(iC()),[ee,D]=v.useState([]),[q,Te]=v.useState([]),[we,Ce]=v.useState([]),[le,de]=v.useState(!1),[Q,R]=v.useState(null),[ge,$e]=v.useState(null),[V,Fe]=v.useState(!1),[Be,dt]=v.useState([]),[ft,Dt]=v.useState([]),[Nt,Xt]=v.useState(d?"system":"session"),[M,ie]=v.useState({}),[pe,Se]=v.useState(0),[ye,be]=v.useState({showReset:!1,showResetAll:!1,showDeleteSession:!1,targetId:null}),[qe,yt]=v.useState(!1),wt=v.useRef(!1),Pt=v.useRef(!1),tr=v.useRef(null),Rt=v.useMemo(()=>z.useAutoVotes?Math.max(1,Math.floor(j.length/2)):z.votesPerUser,[z.useAutoVotes,z.votesPerUser,j.length]),nn=v.useRef(!1);v.useEffect(()=>{if(nn.current){console.log("OAuth processing already in progress, skipping...");return}(async()=>{const ke=new URLSearchParams(window.location.search),De=ke.has("code")||ke.has("error");if(De&&!n){console.log("OAuth callback detected, waiting for session to load..."),localStorage.getItem("voting_system_current_session")&&console.log("Found stored session ID, waiting for SessionContext to restore it...");return}if(localStorage.getItem("azureDevOpsAuthInProgress")&&localStorage.removeItem("azureDevOpsAuthInProgress"),!(!De||wt.current)){if(!n){console.log("No session available yet, waiting...");return}nn.current=!0,wt.current=!0,console.log("Processing OAuth callback with session:",n.id);try{const Ve=await uZ();if(Ve){const Ne=new Date(Date.now()+Ve.expiresIn*1e3).toISOString(),ht={...B,accessToken:Ve.accessToken,refreshToken:Ve.refreshToken,tokenExpiresAt:Ne,enabled:!0,clientId:si.clientId,tenantId:si.tenantId};await al(n.id,ht),ue(ht);const pt=sessionStorage.getItem("oauth_return_path")||"/admin";sessionStorage.removeItem("oauth_return_path"),console.log("OAuth successful, navigating to:",pt),p(pt,{replace:!0})}}catch(Ve){console.error("OAuth callback error:",Ve),R("Failed to authenticate with Azure DevOps");const Ne="/admin";sessionStorage.removeItem("oauth_return_path"),p(Ne,{replace:!0})}finally{nn.current=!1}}})()},[n,p,B]);const yr=v.useCallback(ae=>{localStorage.setItem("azureDevOpsAuthInProgress","true"),ae&&sessionStorage.setItem("oauth_action",ae),sessionStorage.getItem("oauth_return_path")||sessionStorage.setItem("oauth_return_path","/admin"),dZ()},[]),$t=v.useCallback(async ae=>{if(!ae.accessToken||!ae.refreshToken||!ae.tokenExpiresAt)throw new Error("Not authenticated");if(cZ(ae.tokenExpiresAt)){const ke=await tZ(ae.refreshToken),De=new Date(Date.now()+ke.expiresIn*1e3).toISOString(),Re={...ae,accessToken:ke.accessToken,tokenExpiresAt:De};return n&&(await al(n.id,Re),ue(Re)),ke.accessToken}return ae.accessToken},[n]),yn=v.useCallback(async()=>{if(!n)return[];const[ae,ke]=await Promise.all([ua(n.id),Eo(n.id)]);return ae.map(De=>{const Ve=ke.filter(ht=>ht.feature_id===De.id).map(ht=>({userId:ht.user_id,name:ht.user_name,email:ht.user_email,voteCount:ht.vote_count})),Ne=Ve.reduce((ht,pt)=>ht+pt.voteCount,0);return{id:De.id,title:De.title,description:De.description,epic:De.epic,state:De.state,areaPath:De.area_path,tags:De.tags||[],azureDevOpsId:De.azure_devops_id,azureDevOpsUrl:De.azure_devops_url,votes:Ne,voters:Ve}})},[n]),Wt=v.useCallback(async()=>{if(n)try{const ae=await lS(n.id);dt(ae)}catch(ae){console.error("Error loading feature suggestions:",ae)}},[n]),_r=v.useCallback(async()=>{if(n)try{const ae=await Mo(),ke=new Date,De=ae.filter(Re=>Re.id!==n.id&&new Date(Re.start_date)>ke).map(Re=>({id:Re.id,title:Re.title,startDate:Re.start_date}));Dt(De)}catch(ae){console.error("Error loading future sessions:",ae)}},[n]),Ze=v.useCallback(ae=>{dt(ke=>[ae,...ke]),Wt(),_r()},[Wt,_r]),Ot=v.useCallback(async(ae,ke)=>{await PR(ae,ke),await Wt()},[Wt]),Qt=v.useCallback(async ae=>{await OR(ae),await Wt()},[Wt]),Gt=v.useCallback(async(ae,ke)=>{await TR(ae,ke),await Wt()},[Wt]),Br=v.useCallback(async ae=>{await IR(ae);const ke=await yn();b(ke),await Wt()},[yn,Wt]);v.useEffect(()=>{async function ae(){if(n&&!(Pt.current&&tr.current===n.id)){tr.current=n.id,Pt.current=!0;try{_(!0);const[ke,De]=await Promise.all([ua(n.id),Eo(n.id)]),Re=ke.map(Ne=>{const pt=De.filter(Pe=>Pe.feature_id===Ne.id).map(Pe=>({userId:Pe.user_id,name:Pe.user_name,email:Pe.user_email,voteCount:Pe.vote_count})),gt=pt.reduce((Pe,ar)=>Pe+ar.voteCount,0);return{id:Ne.id,title:Ne.title,description:Ne.description,epic:Ne.epic,state:Ne.state,areaPath:Ne.area_path,tags:Ne.tags||[],azureDevOpsId:Ne.azure_devops_id,azureDevOpsUrl:Ne.azure_devops_url,votes:gt,voters:pt}});b(Re),se({title:n.title,goal:n.goal,votesPerUser:n.votes_per_user,useAutoVotes:n.use_auto_votes||!1,startDate:n.start_date,endDate:n.end_date,isActive:n.is_active,originalEndDate:n.original_end_date??void 0,endedEarlyBy:n.ended_early_by??void 0,endedEarlyReason:n.ended_early_reason??void 0,endedEarlyDetails:n.ended_early_details??void 0,reopenReason:n.reopen_reason??void 0,reopenDetails:n.reopen_details??void 0,reopenedBy:n.reopened_by??void 0,reopenedAt:n.reopened_at??void 0,productId:n.product_id??null,productName:n.product_name??null,product_id:n.product_id??null,product_name:n.product_name??null});const Ve=await NR(n.id);ue(Ve?{organization:Ve.organization||"newmill",project:Ve.project||"Product",accessToken:Ve.access_token,refreshToken:Ve.refresh_token,tokenExpiresAt:Ve.token_expires_at,tenantId:Ve.tenant_id,clientId:Ve.client_id,enabled:Ve.enabled,workItemType:Ve.work_item_type||"Feature",query:Ve.query,lastSyncTime:Ve.last_sync_time}:{organization:"newmill",project:"Product",enabled:!1,workItemType:"Feature"});try{const Ne=await lS(n.id);dt(Ne)}catch(Ne){console.error("Error loading feature suggestions:",Ne)}}catch(ke){console.error("Error loading data:",ke),b([])}finally{_(!1),Pt.current=!1}}}ae()},[n==null?void 0:n.id]),v.useEffect(()=>{async function ae(){const ke=iC();if(X(ke),D([]),Te([]),Ce([]),B.enabled&&B.accessToken&&B.project)try{const De=await $t(B),Re={...B,accessToken:De},[Ve,Ne,ht,pt]=await Promise.all([sZ(Re).catch(gt=>(console.error("Error loading Azure DevOps projects:",gt),ke)),tC(Re),ix(Re),rC(Re)]);X(Ve.length>0?Ve:ke),D(Ne),Te(ht),Ce(pt)}catch(De){console.error("Error loading filter options:",De),X(ke)}}ae()},[B.enabled,B.accessToken,B.project,$t]);const vr=v.useCallback(async(ae,ke)=>{if(!(!B.enabled||!B.accessToken))try{const De=await $t(B),Re={...B,accessToken:De},Ve=ae?await OT(Re,ae):await tC(Re);D(Ve)}catch(De){console.error("Error loading states for work item type:",De)}},[B,$t]),Ss=v.useCallback(async ae=>{if(!B.enabled||!B.accessToken)return{types:[],states:[]};try{const ke=await $t(B),De={...B,accessToken:ke};return await iZ(De,ae)}catch(ke){return console.error("Error fetching types and states for area path:",ke),{types:[],states:[]}}},[B,$t]),$r=v.useCallback(async ae=>{if(!B.enabled||!B.accessToken)return{types:[],areaPaths:[]};try{const ke=await $t(B),De={...B,accessToken:ke},Re=await nZ(De,ae);return Re.areaPaths.length>0&&Te(Re.areaPaths),Re}catch(ke){return console.error("Error fetching types and area paths for states:",ke),{types:[],areaPaths:[]}}},[B,$t]),Wr=v.useCallback(async ae=>{if(!B.enabled||!B.accessToken)return{types:[],states:[],areaPaths:[]};try{const ke=await $t(B),De={...B,accessToken:ke},Re=await aZ(De,ae);return Re.states.length>0&&D(Re.states),Re.areaPaths.length>0&&Te(Re.areaPaths),Re}catch(ke){return console.error("Error fetching types, states, and area paths for tags:",ke),{types:[],states:[],areaPaths:[]}}},[B,$t]),xr=v.useCallback(async(ae,ke=[],De=[])=>{if(!(!B.enabled||!B.accessToken))try{const Re=await $t(B),Ve={...B,accessToken:Re},Ne=ae?await oZ(Ve,ae,ke,De):await rC(Ve);Ce(Ne)}catch(Re){console.error("Error loading tags for type, state, and area path:",Re)}},[B,$t]),vn=v.useCallback(async(ae,ke=[])=>{if(!(!B.enabled||!B.accessToken))try{const De=await $t(B),Re={...B,accessToken:De},Ve=ae?await rZ(Re,ae,ke):await ix(Re);Te(Ve)}catch(De){console.error("Error loading area paths for type and state:",De)}},[B,$t]);v.useEffect(()=>{const ae=async()=>{const De=CZ(z.startDate,z.endDate);if(z.isActive!==De){const Re={...z,isActive:De};se(Re);try{n!=null&&n.id&&await oS(n.id,{title:Re.title,goal:Re.goal,votes_per_user:Re.votesPerUser,start_date:Re.startDate,end_date:Re.endDate,is_active:Re.isActive})}catch(Ve){console.error("Error updating voting session status:",Ve)}}};ae();const ke=setInterval(ae,6e5);return()=>clearInterval(ke)},[z,n==null?void 0:n.id]),v.useEffect(()=>{document.body.style.overflow="",document.body.style.position="",document.body.style.width="",O==="admin"&&(Wt(),_r())},[O,Wt,_r]),v.useEffect(()=>(document.body.style.overflow="",()=>{document.body.style.overflow=""}),[]);const Cr=v.useCallback(async(ae=B)=>{if(!ae.organization||!ae.project||!n){R("Organization and project name are required");return}try{de(!0),R(null);const ke=await $t(ae),De={...ae,accessToken:ke},Re=await nC(De),Ve=sC(Re);for(const Pe of Ve){const Ar=(await ua(n.id)).find(It=>It.azure_devops_id===Pe.azureDevOpsId),Pr=lh(Pe.description),_t=Xu(Pr,300);Ar?await Xg(Ar.id,{title:Pe.title,description:_t,epic:Pe.epic||null,state:Pe.state,areaPath:Pe.areaPath,tags:Pe.tags,azure_devops_id:Pe.azureDevOpsId,azure_devops_url:Pe.azureDevOpsUrl}):await qf({session_id:n.id,title:Pe.title,description:_t,epic:Pe.epic||null,state:Pe.state,areaPath:Pe.areaPath,tags:Pe.tags,azure_devops_id:Pe.azureDevOpsId,azure_devops_url:Pe.azureDevOpsUrl})}const Ne=await ua(n.id),ht=await Eo(n.id),pt=Ne.map(Pe=>{const Ar=ht.filter(_t=>_t.feature_id===Pe.id).map(_t=>({userId:_t.user_id,name:_t.user_name,email:_t.user_email,voteCount:_t.vote_count})),Pr=Ar.reduce((_t,It)=>_t+It.voteCount,0);return{id:Pe.id,title:Pe.title,description:Pe.description,epic:Pe.epic,state:Pe.state,areaPath:Pe.area_path,tags:Pe.tags||[],azureDevOpsId:Pe.azure_devops_id,azureDevOpsUrl:Pe.azure_devops_url,votes:Pr,voters:Ar}});b(pt);const gt={...De,lastSyncTime:new Date().toISOString()};await al(n.id,gt),ue(gt)}catch(ke){console.error("Azure DevOps sync error:",ke),ke instanceof Error&&ke.message==="Not authenticated"?(R("Please authenticate with Azure DevOps"),yr()):R("Failed to fetch features from Azure DevOps. Please try reconnecting.")}finally{de(!1)}},[B,n,$t,yr]),Yt=v.useCallback(async()=>{if(!B.organization||!B.project){R("Organization and project name are required");return}try{de(!0),R(null);const ae=await $t(B),ke={...B,accessToken:ae},De=await nC(ke),Ve=sC(De).map(Ne=>({...Ne,description:Xu(lh(Ne.description),300)}));$e(Ve),Fe(!0)}catch(ae){console.error("Azure DevOps preview error:",ae),ae instanceof Error&&ae.message==="Not authenticated"?(R("Please authenticate with Azure DevOps"),yr()):R("Failed to fetch features from Azure DevOps. Please try reconnecting.")}finally{de(!1)}},[B,$t,yr]),qr=v.useCallback(async()=>{if(!(!ge||!n))try{de(!0);const ae=await ua(n.id);for(const Ne of ae)await aS(Ne.id);for(const Ne of ge){const ht=lh(Ne.description),pt=Xu(ht,300);await qf({session_id:n.id,title:Ne.title,description:pt,epic:Ne.epic||null,state:Ne.state,areaPath:Ne.areaPath,tags:Ne.tags,azure_devops_id:Ne.azureDevOpsId,azure_devops_url:Ne.azureDevOpsUrl})}const ke=await ua(n.id),De=await Eo(n.id),Re=ke.map(Ne=>{const pt=De.filter(Pe=>Pe.feature_id===Ne.id).map(Pe=>({userId:Pe.user_id,name:Pe.user_name,email:Pe.user_email,voteCount:Pe.vote_count})),gt=pt.reduce((Pe,ar)=>Pe+ar.voteCount,0);return{id:Ne.id,title:Ne.title,description:Ne.description,epic:Ne.epic,state:Ne.state,areaPath:Ne.area_path,tags:Ne.tags||[],azureDevOpsId:Ne.azure_devops_id,azureDevOpsUrl:Ne.azure_devops_url,votes:gt,voters:pt}});b(Re);const Ve={...B,lastSyncTime:new Date().toISOString()};await al(n.id,Ve),ue(Ve)}catch(ae){console.error("Azure DevOps replace all error:",ae),R("Failed to replace all features from Azure DevOps.")}finally{de(!1),$e(null)}},[ge,n,B]),Mt=v.useCallback(async ae=>{if(!(!ae||ae.length===0||!n))try{de(!0);for(const Ne of ae){const pt=(await ua(n.id)).find(ar=>ar.azure_devops_id===Ne.azureDevOpsId),gt=lh(Ne.description),Pe=Xu(gt,300);pt?await Xg(pt.id,{title:Ne.title,description:Pe,epic:Ne.epic||null,state:Ne.state,areaPath:Ne.areaPath,tags:Ne.tags,azure_devops_id:Ne.azureDevOpsId,azure_devops_url:Ne.azureDevOpsUrl}):await qf({session_id:n.id,title:Ne.title,description:Pe,epic:Ne.epic||null,state:Ne.state,areaPath:Ne.areaPath,tags:Ne.tags,azure_devops_id:Ne.azureDevOpsId,azure_devops_url:Ne.azureDevOpsUrl})}const ke=await ua(n.id),De=await Eo(n.id),Re=ke.map(Ne=>{const pt=De.filter(Pe=>Pe.feature_id===Ne.id).map(Pe=>({userId:Pe.user_id,name:Pe.user_name,email:Pe.user_email,voteCount:Pe.vote_count})),gt=pt.reduce((Pe,ar)=>Pe+ar.voteCount,0);return{id:Ne.id,title:Ne.title,description:Ne.description,epic:Ne.epic,state:Ne.state,areaPath:Ne.area_path,tags:Ne.tags||[],azureDevOpsId:Ne.azure_devops_id,azureDevOpsUrl:Ne.azure_devops_url,votes:gt,voters:pt}});b(Re);const Ve={...B,lastSyncTime:new Date().toISOString()};await al(n.id,Ve),ue(Ve)}catch(ke){console.error("Azure DevOps sync error:",ke),R("Failed to sync features from Azure DevOps.")}finally{de(!1),$e(null)}},[ge,n,B]),Mr=v.useCallback(async()=>{if(n)try{const ae={organization:B.organization||"newmill",project:B.project||"Product",workItemType:B.workItemType||"Feature",query:B.query,accessToken:void 0,refreshToken:void 0,tokenExpiresAt:void 0,enabled:!1};await al(n.id,ae),ue(ae),R(null)}catch(ae){console.error("Error disconnecting Azure DevOps:",ae),R("Failed to disconnect from Azure DevOps")}},[B,n]);v.useEffect(()=>{(async()=>{const ke=sessionStorage.getItem("oauth_action");if(ke&&!(!B.enabled||!B.accessToken))try{ke==="preview"?await Yt():ke==="sync"&&await Cr()}finally{sessionStorage.removeItem("oauth_action")}})()},[B.enabled,B.accessToken,Yt,Cr]);const ir=v.useCallback(()=>{L(!0),Xt(d?"system":"session"),T("admin")},[d]),dr=v.useCallback(()=>{L(!1),Xt(d?"system":"session"),T("voting")},[d]),Er=v.useCallback(()=>{L(!0),Xt("session"),t?O!=="admin"&&T("admin"):O!=="voting"&&T("voting")},[t,O]),is=v.useCallback(()=>{d&&(L(!0),Xt("system"),t?O!=="admin"&&T("admin"):O!=="voting"&&T("voting"))},[O,d,t]),Yn=v.useCallback(async ae=>{if(n)try{const ke=await qf({session_id:n.id,title:ae.title,description:ae.description,epic:ae.epic});b(De=>[...De,{id:ke.id,title:ke.title,description:ke.description,epic:ke.epic,votes:0,voters:[]}]),Z(!1)}catch(ke){console.error("Error adding feature:",ke),alert("Failed to add feature")}},[n]),Vr=v.useCallback(async ae=>{try{await Xg(ae.id,{title:ae.title,description:ae.description,epic:ae.epic}),b(ke=>ke.map(De=>De.id===ae.id?ae:De)),H(null)}catch(ke){console.error("Error updating feature:",ke),alert("Failed to update feature")}},[]),ks=v.useCallback(async ae=>{try{await aS(ae),b(ke=>ke.filter(De=>De.id!==ae))}catch(ke){console.error("Error deleting feature:",ke),alert("Failed to delete feature")}},[]),Fr=v.useCallback(ae=>{be(ke=>({...ke,showReset:!0,showResetAll:!1,showDeleteSession:!1,targetId:ae}))},[]),Bs=v.useCallback(async()=>{const ae=ye.targetId;if(!(!ae||!n))try{await yR(n.id,ae);const ke=await yn();b(ke)}catch(ke){console.error("Error resetting votes:",ke),alert("Failed to reset votes")}},[ye.targetId,n,yn]),sn=v.useCallback(()=>{be(ae=>({...ae,showReset:!1,showResetAll:!0,showDeleteSession:!1,targetId:null}))},[]),Tt=v.useCallback(()=>{be(ae=>({...ae,showReset:!1,showResetAll:!1,showDeleteSession:!0,targetId:null}))},[]),an=v.useCallback(async()=>{if(n){yt(!0);try{await gR(n.id),l(null);try{localStorage.removeItem("voting_system_current_session")}catch{}await u(),p("/sessions",{replace:!0})}catch(ae){console.error("Error deleting session:",ae),alert("Failed to delete session. Please try again.")}finally{yt(!1),be(ae=>({...ae,showDeleteSession:!1}))}}},[n,p,l,u]),fr=v.useCallback(async()=>{if(n)try{await kR(n.id);const ae=await yn();b(ae)}catch(ae){console.error("Error resetting all votes:",ae),alert("Failed to reset all votes")}},[n,yn]),Hr=v.useCallback((ae,ke)=>{if(!s||!z.isActive)return;const De=M[ae]||0;let Re=De;if(ke)if(pe<Rt)Re=De+1;else return;else if(De>0)Re=De-1;else return;ie(Ve=>{const Ne={...Ve};return Re===0?delete Ne[ae]:Ne[ae]=Re,Ne}),Se(Ve=>ke?Ve+1:Ve-1)},[s,M,pe,z.isActive,Rt]),on=v.useCallback(async()=>{if(!(!s||!z.isActive||!n)&&!(pe<Rt))try{for(const[Re,Ve]of Object.entries(M))Ve>0&&await jR({session_id:n.id,feature_id:Re,user_id:s.id,user_name:s.name,user_email:s.email,vote_count:Ve});const ae=await ua(n.id),ke=await Eo(n.id),De=ae.map(Re=>{const Ne=ke.filter(pt=>pt.feature_id===Re.id).map(pt=>({userId:pt.user_id,name:pt.user_name,email:pt.user_email,voteCount:pt.vote_count})),ht=Ne.reduce((pt,gt)=>pt+gt.voteCount,0);return{id:Re.id,title:Re.title,description:Re.description,epic:Re.epic,state:Re.state,areaPath:Re.area_path,tags:Re.tags||[],azureDevOpsId:Re.azure_devops_id,azureDevOpsUrl:Re.azure_devops_url,votes:ht,voters:Ne}});b(De),T("thankyou")}catch(ae){console.error("Error submitting votes:",ae),alert("Failed to submit votes. Please try again.")}},[s,n,pe,M,z.isActive,Rt]),xn=v.useCallback(async ae=>{var ht,pt;const ke={title:ae.title,goal:ae.goal,votes_per_user:ae.votesPerUser,start_date:ae.startDate,end_date:ae.endDate,is_active:ae.isActive,use_auto_votes:ae.useAutoVotes,product_id:ae.product_id??null,product_name:null},De={},Re=(gt,Pe)=>{gt!==void 0&&(De[Pe]=gt)};Re(ae.originalEndDate,"original_end_date"),Re(ae.endedEarlyBy,"ended_early_by"),Re(ae.endedEarlyReason,"ended_early_reason"),Re(ae.endedEarlyDetails,"ended_early_details"),Re(ae.reopenReason,"reopen_reason"),Re(ae.reopenDetails,"reopen_details"),Re(ae.reopenedBy,"reopened_by"),Re(ae.reopenedAt,"reopened_at");const Ve={...ke,...De},Ne=async gt=>{n!=null&&n.id?await oS(n.id,gt):await CR(gt)};try{await Ne(Ve),se(ae),n!=null&&n.id&&l({...n,title:ke.title??n.title,goal:ke.goal??n.goal,votes_per_user:ke.votes_per_user??n.votes_per_user,use_auto_votes:ke.use_auto_votes??n.use_auto_votes,start_date:ke.start_date??n.start_date,end_date:ke.end_date??n.end_date,is_active:ke.is_active??n.is_active,product_id:ke.product_id!==void 0?ke.product_id??null:ae.product_id??n.product_id??null,product_name:null,original_end_date:De.original_end_date??n.original_end_date??null,ended_early_by:De.ended_early_by??n.ended_early_by??null,ended_early_reason:De.ended_early_reason??n.ended_early_reason??null,ended_early_details:De.ended_early_details??n.ended_early_details??null,reopen_reason:De.reopen_reason??n.reopen_reason??null,reopen_details:De.reopen_details??n.reopen_details??null,reopened_by:De.reopened_by??n.reopened_by??null,reopened_at:De.reopened_at??n.reopened_at??null})}catch(gt){const Pe=((pt=(ht=gt==null?void 0:gt.message)==null?void 0:ht.toLowerCase)==null?void 0:pt.call(ht))??"",ar=Pe.includes("column")&&(Pe.includes("reopen_reason")||Pe.includes("reopen_details")||Pe.includes("reopened_by")||Pe.includes("reopened_at")||Pe.includes("original_end_date")||Pe.includes("ended_early_by")||Pe.includes("ended_early_reason")||Pe.includes("ended_early_details")),Ar=Pe.includes("product_name")||Pe.includes('"product_name"'),Pr=Pe.includes("product_id")||Pe.includes('"product_id"');if(ar||Ar||Pr){console.warn("[FeatureVoting] Voting session metadata/product columns missing, falling back to basic update.",gt);try{const _t={...ke};Ar&&delete _t.product_name,Pr&&delete _t.product_id,await Ne(_t),se(ae),n!=null&&n.id&&l({...n,title:_t.title??n.title,goal:_t.goal??n.goal,votes_per_user:_t.votes_per_user??n.votes_per_user,use_auto_votes:_t.use_auto_votes??n.use_auto_votes,start_date:_t.start_date??n.start_date,end_date:_t.end_date??n.end_date,is_active:_t.is_active??n.is_active,product_id:_t.product_id!==void 0?_t.product_id??null:ae.productId??n.product_id??null,product_name:null,original_end_date:ae.originalEndDate??n.original_end_date??null,ended_early_by:ae.endedEarlyBy??n.ended_early_by??null,ended_early_reason:ae.endedEarlyReason??n.ended_early_reason??null,ended_early_details:ae.endedEarlyDetails??n.ended_early_details??null,reopen_reason:ae.reopenReason??n.reopen_reason??null,reopen_details:ae.reopenDetails??n.reopen_details??null,reopened_by:ae.reopenedBy??n.reopened_by??null,reopened_at:ae.reopenedAt??n.reopened_at??null})}catch(_t){console.error("Error updating voting session (fallback):",_t),alert("Failed to update voting session settings")}}else console.error("Error updating voting session:",gt),alert("Failed to update voting session settings")}},[n,l]),Ns=v.useCallback(async ae=>{if(n){ue(ae);try{await al(n.id,{organization:ae.organization,project:ae.project,accessToken:ae.accessToken,refreshToken:ae.refreshToken,tokenExpiresAt:ae.tokenExpiresAt,tenantId:ae.tenantId,clientId:ae.clientId,enabled:ae.enabled,workItemType:ae.workItemType,query:ae.query,lastSyncTime:ae.lastSyncTime})}catch(ke){console.error("Error saving config:",ke)}}},[n]),Ft=v.useCallback(()=>{n?p("/results"):T("results")},[n,p]),_s=v.useMemo(()=>{switch(O){case"voting":return a.jsx(MZ,{features:j,currentUser:s,pendingVotes:M,pendingUsedVotes:pe,onVote:Hr,onSubmitVotes:on,onToggleAdmin:ir,isAdmin:A,votingSession:z,navigate:p,effectiveVotesPerUser:Rt,sessionId:(n==null?void 0:n.id)||"",onLogout:y,onSuggestionSubmitted:Ze,isSystemAdmin:d,isSessionAdmin:m,isStakeholder:f});case"results":return a.jsx(DZ,{features:j,onResetVotes:Fr,onResetAllVotes:sn,onBack:r?()=>p("../admin"):()=>T("admin"),showVotersList:K,setShowVotersList:ce,votingSession:z,effectiveVotesPerUser:Rt,onLogout:y});case"thankyou":return a.jsx(RZ,{navigate:p,votingSession:z});case"admin":default:return t?a.jsx(SZ,{features:j,onAddFeature:Yn,onUpdateFeature:Vr,onDeleteFeature:ks,onShowResults:Ft,onRequestDeleteSession:Tt,isDeletingSession:qe,showAddForm:me,setShowAddForm:Z,editingFeature:J,setEditingFeature:H,onLogout:y,onShowVoterView:dr,votingSession:z,azureDevOpsConfig:B,onUpdateAzureDevOpsConfig:Ns,onPreviewAzureDevOpsFeatures:Yt,onDisconnectAzureDevOps:Mr,isFetchingAzureDevOps:le,azureFetchError:Q,onInitiateOAuth:yr,availableStates:ee,availableAreaPaths:q,availableTags:we,previewFeatures:ge,showPreviewModal:V,setShowPreviewModal:Fe,onConfirmSync:Mt,onReplaceAll:qr,onUpdateVotingSession:xn,onFetchStatesForType:vr,onFetchAreaPathsForTypeAndState:vn,onFetchTagsForTypeStateAndAreaPath:xr,onFetchTypesAndStatesForAreaPath:Ss,onFetchTypesAndStatesForTags:Wr,onFetchTypesAndAreaPathsForStates:$r,suggestedFeatures:Be,otherSessions:ft,onPromoteSuggestion:Br,onMoveSuggestion:Gt,onEditSuggestion:Ot,onDeleteSuggestion:Qt,adminPerspective:Nt,projectOptions:oe}):a.jsxs("div",{className:"max-w-3xl mx-auto text-center py-20 px-6",children:[a.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 rounded-full bg-[#2d4660]/10 text-[#2d4660] mb-6",children:a.jsx(Bn,{className:"h-8 w-8"})}),a.jsx("h2",{className:"text-2xl font-semibold text-[#2d4660] mb-4",children:"Admin tools live on the Admin Dashboard"}),a.jsx("p",{className:"text-gray-600 mb-6",children:"You are viewing the voting experience. To manage sessions, stakeholders, or Azure DevOps connections, open the Admin dashboard from the Admin application."}),a.jsx(nt,{variant:"primary",onClick:()=>p("/admin"),children:"Go to Admin Dashboard"})]})}},[O,j,s,M,pe,Hr,on,ir,A,z,Fr,sn,K,ce,Yn,Vr,ks,me,Z,J,H,B,Ns,Cr,Yt,Mr,le,Q,yr,ge,V,Fe,Mt,p,Rt,t,ee,q,we,vr,n,dr,Ze,Be,ft,Br,Gt,Ot,Qt,Nt,oe,Ft]);return n?k?a.jsx("div",{className:"min-h-screen w-full bg-gray-50 flex items-center justify-center",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-[#2d4660] mx-auto mb-4"}),a.jsx("p",{className:"text-gray-600",children:"Loading..."})]})}):!A&&O!=="voting"&&O!=="thankyou"?a.jsx("div",{className:"min-h-screen w-full bg-gray-50 flex items-center justify-center",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-[#2d4660] mx-auto mb-4"}),a.jsx("p",{className:"text-gray-600",children:"Loading voting experience..."})]})}):a.jsxs("div",{className:"w-full bg-gray-50 text-gray-900 font-sans min-h-screen flex flex-col",children:[a.jsx("div",{className:"flex-grow",children:_s}),a.jsx(FT,{currentRole:A?Nt==="system"?"system-admin":"session-admin":"stakeholder",onSelectStakeholder:A?void 0:dr,onSelectSessionAdmin:A||d?Er:void 0,onSelectSystemAdmin:d?is:void 0,showRoleToggle:d||A&&Nt==="system"}),a.jsx(vh,{show:ye.showReset,title:"Reset Votes",message:"Are you sure you want to reset all votes for this feature? This will remove all voting data for this feature.",onConfirm:Bs,onCancel:()=>be(ae=>({...ae,showReset:!1})),confirmText:"Reset",type:"reset"}),a.jsx(vh,{show:ye.showResetAll,title:"Reset All Votes",message:"Are you sure you want to reset all votes for all features? This will remove all voting data and cannot be undone.",onConfirm:fr,onCancel:()=>be(ae=>({...ae,showResetAll:!1})),confirmText:"Reset All",type:"reset"}),a.jsx(vh,{show:ye.showDeleteSession,title:"Delete Voting Session",message:"This will permanently delete the current voting session for all admins and stakeholders. Votes, notes, and settings for this session will be removed. This action cannot be undone.",onConfirm:an,onCancel:()=>be(ae=>({...ae,showDeleteSession:!1})),confirmText:qe?"Deleting":"Delete Session",type:"delete"})]}):a.jsx("div",{className:"min-h-screen w-full bg-gray-50 flex items-center justify-center",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-[#2d4660] mx-auto mb-4"}),a.jsx("p",{className:"text-gray-600",children:"Loading session..."})]})})}async function mC(e,t,r){const s=`${e}:${t}:${r}:default-secret-change-in-production`,l=new TextEncoder().encode(s),u=await crypto.subtle.digest("SHA-256",l);return Array.from(new Uint8Array(u)).map(f=>f.toString(16).padStart(2,"0")).join("").substring(0,32)}function FZ(){const[e,t]=v.useState(""),[r,n]=v.useState(""),[s,i]=v.useState(!1),[l,u]=v.useState(""),[d,m]=v.useState(!1),[f,p]=v.useState(null),{currentUser:y,setCurrentUser:x,setCurrentSession:j}=ba(),b=zs(),[k]=hx();v.useEffect(()=>{const C=sessionStorage.getItem("oauth_error");C&&(u(C),sessionStorage.removeItem("oauth_error"));const O=k.get("error"),T=k.get("error_description"),A=k.get("error_code");if(O){const L=T?decodeURIComponent(T):"An authentication error occurred.";O==="invalid_request"&&L.includes("AADSTS9002325")?u('Azure AD authentication requires PKCE. Please ensure your Azure AD app is configured correctly. The redirect URI must be registered under the "Web" platform in Azure AD.'):A==="unexpected_failure"&&L.includes("email")?u("Azure AD did not return your email address. Please ensure your Azure AD app has the correct API permissions (User.Read or email) and that your account has an email address."):u(`Authentication failed: ${L}`),b("/login",{replace:!0})}},[k,b]),v.useEffect(()=>{const C=k.get("token"),O=k.get("action"),T=k.get("email"),A=k.get("product");C&&O&&T&&A&&(O==="grant-admin"||O==="grant-stakeholder")&&(async()=>{var J,H;try{i(!0),u("");const Z=`${je.supabaseUrl}/functions/v1/grant-access`;let K;try{K=await fetch(Z,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${je.supabaseKey}`},body:JSON.stringify({token:C,action:O,email:T,productId:A})})}catch(Q){throw(J=Q.message)!=null&&J.includes("CORS")||(H=Q.message)!=null&&H.includes("Failed to fetch")?new Error("The grant access function is not available. Please ensure the Edge Function is deployed. Error: "+Q.message):Q}if(!K.ok){let Q="Failed to grant access";try{Q=(await K.json()).error||Q}catch{Q=`Server returned ${K.status}: ${K.statusText}`}throw new Error(Q)}const ce=await K.json(),z=T.split("@")[0].replace(/\./g," "),se=ce.productName||"the product",B=O==="grant-admin"?"Session Admin":"Stakeholder";let ue=z;try{const Q=await QC(T);Q&&(ue=Q.name)}catch{}const oe=window.location.pathname.startsWith("/feature-voting-app")?"/feature-voting-app":"",X=`${window.location.origin}${oe}/login`,ee="https://dcchoffman.github.io/feature-voting-app/New-Millennium-color-logo1.png",q=`
<table width="100%" cellpadding="0" cellspacing="0" border="0" style="background-color: #f9fafb; font-family: Arial, sans-serif;">
  <tr>
    <td align="center" style="padding: 48px 20px;">
      <div style="position: relative; display: inline-block;">
        <div style="position: absolute; bottom: 0; left: 0; width: 300px; height: 200px; background-image: url('https://dcchoffman.github.io/feature-voting-app/bottom-left-curve.png'); background-position: bottom left; background-repeat: no-repeat; background-size: contain; opacity: 0.2; z-index: 0; pointer-events: none;"></div>
        <table width="600" cellpadding="0" cellspacing="0" border="0" style="background-color: #ffffff; border-radius: 8px; box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05); position: relative; z-index: 1;">
        <!-- Logo Header -->
        <tr>
          <td style="background-color: #ffffff; padding: 32px 40px 24px 40px; text-align: center;">
            <img src="${ee}" alt="New Millennium Building Systems" width="300" height="96" style="height: 96px; width: auto; max-width: 300px; display: block; margin: 0 auto; border: 0;" />
            <div style="font-size: 24px; font-weight: bold; color: #2d4660; margin-top: 16px;">Access Granted</div>
          </td>
        </tr>
        
        <!-- Main Content -->
        <tr>
          <td style="background-color: #ffffff; padding: 40px;">
            <p style="margin: 0 0 16px 0; font-size: 16px; color: #333;">Hello ${ue},</p>
            <p style="margin: 0 0 24px 0; font-size: 16px; color: #333; line-height: 1.6;">Your access request has been approved! You have been granted <strong style="color: #2d4660;">${B}</strong> access to all voting sessions for <strong style="color: #2d4660;">${se}</strong>.</p>
            
            <p style="margin: 24px 0; font-size: 16px; color: #333; line-height: 1.6;">You can now log in to the Feature Voting System to access your sessions.</p>
            
            <!-- Login Button -->
            <table width="100%" cellpadding="0" cellspacing="0" border="0" style="margin: 32px 0;">
              <tr>
                <td align="center">
                  <a href="${X}" style="display: inline-block; padding: 12px 24px; background-color: #2d4660; color: white; text-decoration: none; border-radius: 6px; font-weight: 500; font-size: 14px; box-shadow: 0 1px 2px 0 rgba(0, 0, 0, 0.05);">Log In to Feature Voting System</a>
                </td>
              </tr>
            </table>
          </td>
        </tr>
        
        <!-- Footer -->
        <tr>
          <td style="background-color: #f9fafb; padding: 20px; text-align: center; border-top: 1px solid #e5e7eb; font-size: 12px; color: #6b7280; position: relative;">
            <p style="margin: 0 0 8px 0;">This is an automated message from the Feature Voting System.</p>
            <p style="margin: 0; color: #9ca3af;"> ${new Date().getFullYear()} New Millennium Building Systems</p>
          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>`,Te=`
Access Granted - Feature Voting System

Hello ${ue},

Your access request has been approved! You have been granted ${B} access to all voting sessions for ${se}.

You can now log in to the Feature Voting System to access your sessions.

Login: ${X}

This is an automated message from the Feature Voting System.
          `;let we=[];try{const Q=await oE(A);we=Array.from(new Set(Q.map(R=>{var ge;return(ge=R.user)==null?void 0:ge.email}).filter(R=>!!R).map(R=>R.toLowerCase())))}catch(Q){console.error("Error getting session admins for product:",Q),y!=null&&y.email&&(we=[y.email.toLowerCase()])}const Ce=we.length>0?`
<table width="100%" cellpadding="0" cellspacing="0" border="0" style="background-color: #f9fafb; font-family: Arial, sans-serif;">
  <tr>
    <td align="center" style="padding: 48px 20px;">
      <table width="600" cellpadding="0" cellspacing="0" border="0" style="background-color: #ffffff; border-radius: 8px; box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);">
        <!-- Logo Header -->
        <tr>
          <td style="background-color: #ffffff; padding: 32px 40px 24px 40px; text-align: center;">
            <img src="${ee}" alt="New Millennium Building Systems" width="300" height="96" style="height: 96px; width: auto; max-width: 300px; display: block; margin: 0 auto; border: 0;" />
            <div style="font-size: 24px; font-weight: bold; color: #2d4660; margin-top: 16px;">Access Granted Confirmation</div>
          </td>
        </tr>
        
        <!-- Main Content -->
        <tr>
          <td style="background-color: #ffffff; padding: 40px;">
            <p style="margin: 0 0 16px 0; font-size: 16px; color: #333;">Hello,</p>
            <p style="margin: 0 0 24px 0; font-size: 16px; color: #333; line-height: 1.6;">You have successfully granted <strong style="color: #2d4660;">${B}</strong> access to <strong style="color: #2d4660;">${ue}</strong> (${T}) for all sessions in <strong style="color: #2d4660;">${se}</strong>.</p>
            
            <!-- Status Box -->
            <table width="100%" cellpadding="0" cellspacing="0" border="0" style="background-color: #f0fdf4; border-left: 4px solid #22c55e; border-radius: 4px; margin: 20px 0;">
              <tr>
                <td style="padding: 20px;">
                  <div style="margin: 10px 0;">
                    <strong style="color: #166534; font-size: 14px;"> Access Granted</strong>
                  </div>
                  <div style="margin: 10px 0; color: #166534; font-size: 13px;">
                    Role: <strong>${B}</strong>
                  </div>
                  <div style="margin: 10px 0; color: #166534; font-size: 13px;">
                    User: <strong>${ue}</strong> (${T})
                  </div>
                  <div style="margin: 10px 0; color: #166534; font-size: 13px;">
                    Product: <strong>${se}</strong>
                  </div>
                  <div style="margin: 10px 0; color: #166534; font-size: 13px;">
                    Status: <strong>Email notification sent to requester</strong>
                  </div>
                </td>
              </tr>
            </table>

            <p style="margin: 24px 0; font-size: 16px; color: #333; line-height: 1.6;">The requester has been notified and can now access all voting sessions for this product.</p>
            
            <!-- Go to System Button -->
            <table width="100%" cellpadding="0" cellspacing="0" border="0" style="margin: 32px 0;">
              <tr>
                <td align="center">
                  <a href="${X}" style="display: inline-block; padding: 12px 24px; background-color: #2d4660; color: white; text-decoration: none; border-radius: 6px; font-weight: 500; font-size: 14px; box-shadow: 0 1px 2px 0 rgba(0, 0, 0, 0.05);">Go to Feature Voting System</a>
                </td>
              </tr>
            </table>
          </td>
        </tr>
        
        <!-- Footer -->
        <tr>
          <td style="background-color: #f9fafb; padding: 20px; text-align: center; border-top: 1px solid #e5e7eb; font-size: 12px; color: #6b7280;">
            <p style="margin: 0 0 8px 0;">This is an automated message from the Feature Voting System.</p>
            <p style="margin: 0; color: #9ca3af;"> ${new Date().getFullYear()} New Millennium Building Systems</p>
          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>`:null,le=we.length>0?`
Access Granted Confirmation - Feature Voting System

Hello,

You have successfully granted ${B} access to ${ue} (${T}) for all sessions in ${se}.

Status: Access Granted
Role: ${B}
User: ${ue} (${T})
Product: ${se}
Email notification sent to requester: Yes

The requester has been notified and can now access all voting sessions for this product.

Login: ${X}

This is an automated message from the Feature Voting System.
          `:null,de=[Nl({to:T,subject:`Access Granted - ${se} - Feature Voting System`,text:Te,html:q})];we.length>0&&Ce&&le&&we.forEach(Q=>{de.push(Nl({to:Q,subject:`Access Granted: ${ue} - ${se} - Feature Voting System`,text:le,html:Ce}))});try{await Promise.all(de)}catch(Q){console.error("Error sending emails:",Q)}p({roleName:B,productName:se,requesterName:ue,requesterEmail:T}),b("/login",{replace:!0})}catch(me){console.error("Error granting access:",me),u(me.message||"Failed to grant access. Please try again."),b("/login",{replace:!0})}finally{i(!1)}})()},[k,b]);const _=async C=>{console.log("[LoginScreen]  handleLogin called!",{email:e,name:r}),C.preventDefault(),console.log("[LoginScreen] Form prevented default"),u(""),i(!0),console.log("[LoginScreen] Set loading state");try{console.log("[LoginScreen] Starting login process..."),console.log("[LoginScreen] Getting or creating user...");const O=await ml(e.trim().toLowerCase(),r.trim());console.log("[LoginScreen] User created/retrieved:",O),x(O);const T=k.get("session");if(T){console.log("[LoginScreen] Session code found, loading session...");const A=await pR(T);if(A){j(A),console.log("[LoginScreen] Checking user roles...");const[L,J,H]=await Promise.all([_i(O.id),km(A.id,O.id),bx(A.id,O.email)]);if(L||J)b("/admin");else if(H)b("/vote");else{u("You are not authorized to access this voting session."),i(!1);return}}else{u("Invalid session code."),i(!1);return}}else console.log("[LoginScreen] No session code, navigating to /sessions"),b("/sessions")}catch(O){console.error("[LoginScreen] Login error:",O),u(`Failed to log in: ${O instanceof Error?O.message:"Unknown error"}. Please try again.`),i(!1)}},E=async()=>{u(""),i(!0);try{const C=window.location.pathname.startsWith("/feature-voting-app")?"/feature-voting-app":"",O=`${window.location.origin}${C}/sessions`,{error:T}=await je.auth.signInWithOAuth({provider:"azure",options:{redirectTo:O,scopes:"email openid profile User.ReadBasic.All",queryParams:{redirect_to:O}}});T&&(u("Failed to sign in with Azure AD. Please try again."),i(!1))}catch(C){console.error("Azure login error:",C),u("Failed to sign in with Azure AD. Please try again."),i(!1)}};return a.jsxs("div",{className:"min-h-screen bg-gray-50 flex flex-col justify-center py-12 sm:px-6 lg:px-8",children:[a.jsx("div",{className:"sm:mx-auto sm:w-full sm:max-w-md",children:a.jsxs("div",{className:"bg-white shadow-lg sm:rounded-lg overflow-hidden relative z-10",children:[a.jsxs("div",{className:"relative",children:[a.jsx("div",{className:"px-10 pt-8 pb-6 text-center",children:a.jsx("img",{src:oi,alt:"New Millennium Building Systems Logo",className:"mx-auto h-24 w-auto"})}),a.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-12 pointer-events-none",style:{background:"linear-gradient(to bottom, transparent, rgba(255, 255, 255, 0.8), rgba(255, 255, 255, 1))"}})]}),a.jsxs("div",{className:"px-4 sm:px-10 pb-8",children:[a.jsxs("div",{className:"text-center mb-6",children:[a.jsx("h2",{className:"text-3xl font-bold text-[#2d4660]",children:"Feature Voting System"}),a.jsx("p",{className:"mt-2 text-sm text-gray-600",children:"Sign in to access your voting sessions"})]}),a.jsxs("form",{onSubmit:_,className:"space-y-6",children:[a.jsxs("div",{children:[a.jsx("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700",children:"Full Name"}),a.jsx("div",{className:"mt-1",children:a.jsx("input",{id:"name",name:"name",type:"text",autoComplete:"name",required:!0,value:r,onChange:C=>n(C.target.value),"data-lpignore":"true","data-form-type":"other",className:"appearance-none block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-[#2d4660] focus:border-[#2d4660]",placeholder:"John Doe"})})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700",children:"Email Address"}),a.jsx("div",{className:"mt-1",children:a.jsx("input",{id:"email",name:"email",type:"email",autoComplete:"email",required:!0,value:e,onChange:C=>t(C.target.value),"data-lpignore":"true","data-form-type":"other",className:"appearance-none block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-[#2d4660] focus:border-[#2d4660]",placeholder:"your.email@company.com"})})]}),l&&a.jsx("div",{className:"rounded-md bg-red-50 p-4",children:a.jsx("div",{className:"flex",children:a.jsx("div",{className:"ml-3",children:a.jsx("h3",{className:"text-sm font-medium text-red-800",children:l})})})}),a.jsx("div",{children:a.jsx("button",{type:"submit",disabled:s,className:"w-full flex justify-center items-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-[#2d4660] hover:bg-[#1d3a53] focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-[#2d4660] disabled:opacity-50 disabled:cursor-not-allowed",children:s?a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Signing in..."]}):a.jsxs(a.Fragment,{children:[a.jsx(fF,{className:"h-4 w-4 mr-2"}),"Sign In"]})})})]}),a.jsx("div",{className:"mt-4",children:a.jsx("button",{type:"button",onClick:E,disabled:s,className:"microsoft-signin-button",style:{width:"100%",height:"41px",display:"flex",alignItems:"center",justifyContent:"center",paddingLeft:"12px",paddingRight:"12px",cursor:s?"not-allowed":"pointer",opacity:s?.5:1},onMouseEnter:C=>{s||(C.currentTarget.style.backgroundColor="#F5F5F5")},onMouseLeave:C=>{s||(C.currentTarget.style.backgroundColor="#FFFFFF")},children:s?a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2",style:{borderColor:"#5E5E5E",marginRight:"12px"}}),a.jsx("span",{style:{color:"#5E5E5E"},children:"Signing in..."})]}):a.jsxs(a.Fragment,{children:[a.jsx("img",{src:BF,alt:"Microsoft",style:{width:"21px",height:"21px",marginRight:"12px",flexShrink:0}}),a.jsx("span",{style:{color:"#5E5E5E",fontFamily:'"Segoe UI", system-ui, -apple-system, BlinkMacSystemFont, "Roboto", "Helvetica Neue", Arial, sans-serif',fontSize:"15px",fontWeight:600},children:"Sign in with Microsoft"})]})})}),a.jsxs("div",{className:"mt-6",children:[a.jsxs("div",{className:"relative",children:[a.jsx("div",{className:"absolute inset-0 flex items-center",children:a.jsx("div",{className:"w-full border-t border-gray-300"})}),a.jsx("div",{className:"relative flex justify-center text-sm",children:a.jsx("span",{className:"px-2 bg-white text-gray-500",children:"No registration required"})})]}),a.jsxs("div",{className:"mt-6 text-center text-xs text-gray-500",children:[a.jsx("p",{children:"Simply enter your name and email to access"}),a.jsx("p",{children:"voting sessions you've been invited to"})]}),a.jsx("div",{className:"mt-4",children:a.jsx("button",{type:"button",onClick:()=>m(!0),className:"w-full text-sm text-[#2d4660] hover:text-[#1d3a53] underline",children:"Request Access"})})]})]})]})}),a.jsx(LZ,{isOpen:d,onClose:it.useCallback(()=>m(!1),[])}),f&&a.jsx(hn,{isOpen:!0,onClose:()=>p(null),title:"",maxWidth:"max-w-md",hideHeader:!0,hideCloseButton:!1,children:a.jsxs("div",{className:"text-center pb-6",children:[a.jsx(sr,{className:"h-16 w-16 text-green-600 mx-auto mb-4"}),a.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Access Granted Successfully!"}),a.jsxs("p",{className:"text-sm text-gray-600 mb-1",children:["Successfully granted ",a.jsx("span",{className:"font-semibold text-green-700",children:f.roleName})," access to"]}),a.jsx("p",{className:"text-base font-semibold text-gray-900 mb-1",children:f.requesterName}),a.jsx("p",{className:"text-xs text-gray-500 mb-3",children:f.requesterEmail}),a.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"for all sessions in"}),a.jsx("p",{className:"text-lg font-semibold text-green-700 mb-4",children:f.productName}),a.jsx("p",{className:"text-sm text-gray-600",children:"Emails have been sent to both the requester and admin."})]})})]})}const LZ=it.memo(function({isOpen:t,onClose:r}){const[n,s]=v.useState(""),[i,l]=v.useState(""),[u,d]=v.useState(""),[m,f]=v.useState([]),[p,y]=v.useState(!1),[x,j]=v.useState(!1),[b,k]=v.useState(!1),[_,E]=v.useState(""),[C,O]=v.useState(!1),T=it.useRef(null),A=it.useRef(!1),L=it.useRef(null),J=it.useRef(null);v.useEffect(()=>{t&&!A.current?(async()=>{y(!0);try{const se=await xx();f(se),A.current=!0}catch(se){console.error("Error loading products:",se),E("Failed to load products. Please try again.")}finally{y(!1)}})():t||(s(""),l(""),d(""),k(!1),E(""),A.current=!1)},[t]),v.useEffect(()=>{function z(se){T.current&&!T.current.contains(se.target)&&O(!1)}return document.addEventListener("mousedown",z),()=>document.removeEventListener("mousedown",z)},[]);const H=it.useCallback(z=>{s(z.target.value)},[]),me=it.useCallback(z=>{l(z.target.value)},[]),Z=async z=>{if(z.preventDefault(),E(""),!n.trim()){E("Name is required");return}if(!i.trim()){E("Email is required");return}if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(i)){E("Please enter a valid email address");return}if(!u){E("Please select a product");return}j(!0);try{const se=await oE(u);if(se.length===0){E("No administrators found for this product. Please contact your system administrator."),j(!1);return}const B=m.find(Q=>Q.id===u),ue=(B==null?void 0:B.name)||"the selected product",oe=Array.from(new Set(se.map(Q=>{var R;return(R=Q.user)==null?void 0:R.email}).filter(Boolean))),X=window.location.pathname.startsWith("/feature-voting-app")?"/feature-voting-app":"",ee=`${window.location.origin}${X}/login`,D=await mC(i,u,"grant-admin"),q=await mC(i,u,"grant-stakeholder"),we=`${je.supabaseUrl}/functions/v1/grant-access`,le=`
<table width="100%" cellpadding="0" cellspacing="0" border="0" style="background-color: #f9fafb; font-family: Arial, sans-serif;">
  <tr>
    <td align="center" style="padding: 48px 20px;">
      <table width="600" cellpadding="0" cellspacing="0" border="0" style="background-color: #ffffff; border-radius: 8px; box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);">
        <!-- Logo Header - Matching Login Page -->
        <tr>
          <td style="background-color: #ffffff; padding: 32px 40px 24px 40px; text-align: center;">
            <img src="https://dcchoffman.github.io/feature-voting-app/New-Millennium-color-logo1.png" alt="New Millennium Building Systems" width="300" height="96" style="height: 96px; width: auto; max-width: 300px; display: block; margin: 0 auto; border: 0;" />
            <div style="font-size: 20px; font-weight: bold; color: #2d4660; margin-top: 16px; margin-bottom: 4px;">Feature Voting System</div>
            <div style="font-size: 11px; color: #6b7280; margin-bottom: 2px;">has a</div>
            <div style="font-size: 25px; font-weight: bold; color: #2d4660; margin-bottom: 2px;">Access Request Notification</div>
            <div style="font-size: 11px; color: #6b7280; margin-bottom: 2px;">for the</div>
            <div style="font-size: 30px; font-weight: bold; color: #2d4660; margin-bottom: 8px;">${ue}</div>
          </td>
        </tr>
        
        <!-- Main Content -->
        <tr>
          <td style="background-color: #ffffff; padding: 40px;">
            <p style="margin: 0 0 16px 0; font-size: 16px; color: #333;">Hello,</p>
            <p style="margin: 0 0 24px 0; font-size: 16px; color: #333;">A new access request has been submitted for <strong style="color: #2d4660;">${ue}</strong>.</p>
            
            <!-- User Details - Labels less prominent, values emphasized -->
            <table width="100%" cellpadding="0" cellspacing="0" border="0" style="background-color: white; border-left: 4px solid #2d4660; border-radius: 4px; margin: 20px 0;">
              <tr>
                <td style="padding: 20px;">
                  <div style="margin: 10px 0;">
                    <span style="font-weight: normal; color: #6b7280; font-size: 13px;">Requester Name:</span> <span style="color: #1f2937; font-weight: 600; font-size: 15px;">${n}</span>
                  </div>
                  <div style="margin: 10px 0;">
                    <span style="font-weight: normal; color: #6b7280; font-size: 13px;">Requester Email:</span> <span style="color: #1f2937; font-weight: 600; font-size: 15px;">${i}</span>
                  </div>
                  <div style="margin: 10px 0;">
                    <span style="font-weight: normal; color: #6b7280; font-size: 13px;">Product:</span> <span style="color: #1f2937; font-weight: 600; font-size: 15px;">${ue}</span>
                  </div>
                </td>
              </tr>
            </table>

            <p style="margin: 24px 0; font-size: 16px; color: #333; line-height: 1.6;">To grant access, click one of the buttons below.<br />Access will be granted <b>immediately</b> to all sessions for this product,<br /><b>and an email notification will be sent to the requester.</b></p>
            
            <!-- Action Buttons - Gold buttons for granting access (same size) -->
            <table width="100%" cellpadding="0" cellspacing="0" border="0" style="margin: 32px 0;">
              <tr>
                <td width="50%" align="left" valign="top" style="padding-right: 10px;">
                  <a href="${ee}?token=${D}&action=grant-admin&email=${encodeURIComponent(i)}&product=${encodeURIComponent(u)}" style="display: inline-block; padding: 12px 20px; background-color: #C89212; color: white; text-decoration: none; border-radius: 6px; font-weight: 600; font-size: 13px; box-shadow: 0 1px 2px 0 rgba(0, 0, 0, 0.05); text-align: center; line-height: 1.5; width: 100%; max-width: 240px; min-width: 240px;">
                    Grant Access as<br /><span style="font-size: 18px; font-weight: 700;">Session Admin</span>
                  </a>
                </td>
                <td width="50%" align="right" valign="top" style="padding-left: 10px;">
                  <a href="${ee}?token=${q}&action=grant-stakeholder&email=${encodeURIComponent(i)}&product=${encodeURIComponent(u)}" style="display: inline-block; padding: 12px 20px; background-color: #C89212; color: white; text-decoration: none; border-radius: 6px; font-weight: 600; font-size: 13px; box-shadow: 0 1px 2px 0 rgba(0, 0, 0, 0.05); text-align: center; line-height: 1.5; width: 100%; max-width: 240px; min-width: 240px;">
                    Grant Access as<br /><span style="font-size: 18px; font-weight: 700;">Stakeholder</span>
                  </a>
                </td>
              </tr>
            </table>
            
            <!-- Helpful Text -->
            <p style="margin: 24px 0 16px 0; font-size: 14px; color: #6b7280; line-height: 1.6; text-align: center;">
              Click either button above to quickly grant access,<br />or use the link below to manage sessions and users in the system.
            </p>
            
            <!-- Go to System Button -->
            <table width="100%" cellpadding="0" cellspacing="0" border="0" style="margin: 24px 0;">
              <tr>
                <td align="center">
                  <a href="${ee}" style="display: inline-block; padding: 12px 24px; background-color: #2d4660; color: white; text-decoration: none; border-radius: 6px; font-weight: 500; font-size: 14px; box-shadow: 0 1px 2px 0 rgba(0, 0, 0, 0.05);">Go to Feature Voting System</a>
                </td>
              </tr>
            </table>
          </td>
        </tr>
        
        <!-- Footer -->
        <tr>
          <td style="background-color: #f9fafb; padding: 20px; text-align: center; border-top: 1px solid #e5e7eb; font-size: 12px; color: #6b7280;">
            <p style="margin: 0 0 8px 0;">This is an automated message from the Feature Voting System.</p>
            <p style="margin: 0; color: #9ca3af;"> ${new Date().getFullYear()} New Millennium Building Systems</p>
          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>`,de=`
Access Request - Feature Voting System

Hello,

A new access request has been submitted for ${ue}.

Requester Name: ${n}
Requester Email: ${i}
Product: ${ue}

To grant access, please add this user as a stakeholder or admin to the relevant voting sessions for this product.

Login: ${ee}

This is an automated message from the Feature Voting System.
      `;try{const Q=oe.map(R=>Nl({to:R,subject:`Access Request for ${ue} - Feature Voting System`,text:de,html:le}));await Promise.all(Q),k(!0)}catch(Q){console.error("Email service failed:",Q);let R="Failed to send email through the system.";Q instanceof Error||Q!=null&&Q.message?R=Q.message:typeof Q=="string"&&(R=Q),(R.includes("validation_error")||R.includes("403"))&&(R="Domain verification required. Please verify your domain in Resend and update FROM_EMAIL in Supabase secrets."),E(`Failed to send access request: ${R}. Please check the Supabase Edge Function logs for details.`),j(!1);return}}catch(se){console.error("Error sending access request:",se),E("Failed to send access request. Please try again or contact your administrator.")}finally{j(!1)}},K=m.find(z=>z.id===u),ce=K?qn(K.name,K.color_hex??null):null;return a.jsx(hn,{isOpen:t,onClose:r,title:b?"":"Request Access",maxWidth:"max-w-lg",hideHeader:b,children:b?a.jsxs("div",{className:"text-center pb-6",children:[a.jsx(sr,{className:"h-16 w-16 text-green-600 mx-auto mb-3"}),a.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-3",children:"Thank You!"}),a.jsx("p",{className:"text-sm text-gray-600 mb-2",children:"Your access request has been sent to the administrators for"}),a.jsx("p",{className:"text-xl font-semibold text-[#2d4660] mb-4",children:K==null?void 0:K.name}),a.jsx("p",{className:"text-sm text-gray-600",children:"You will be notified once your access has been granted."})]}):a.jsxs("form",{onSubmit:Z,className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{htmlFor:"requestName",className:"block text-sm font-medium text-gray-700 mb-1",children:"Full Name *"}),a.jsx("input",{ref:L,id:"requestName",type:"text",required:!0,autoComplete:"off","data-lpignore":"true","data-form-type":"other",value:n,onChange:H,className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-[#2d4660] focus:border-[#2d4660]",placeholder:"John Doe"})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"requestEmail",className:"block text-sm font-medium text-gray-700 mb-1",children:"Email Address *"}),a.jsx("input",{ref:J,id:"requestEmail",type:"email",required:!0,autoComplete:"off","data-lpignore":"true","data-form-type":"other",value:i,onChange:me,className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-[#2d4660] focus:border-[#2d4660]",placeholder:"your.email@company.com"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Product *"}),a.jsxs("div",{ref:T,className:"relative",children:[a.jsxs("button",{type:"button",onClick:()=>O(!C),className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm bg-white text-left flex items-center justify-between hover:border-gray-400 focus:outline-none focus:ring-[#2d4660] focus:border-[#2d4660]",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[K&&ce&&a.jsx("div",{className:"w-4 h-4 rounded flex-shrink-0",style:{backgroundColor:ce.background}}),a.jsx("span",{className:K?"text-gray-900":"text-gray-400",children:K?K.name:"Select a product..."})]}),a.jsx(ts,{className:`h-4 w-4 text-gray-400 transition-transform ${C?"transform rotate-180":""}`})]}),C&&a.jsx("div",{className:"absolute z-[100] w-full mt-1 bg-white border border-gray-300 rounded-md shadow-lg max-h-96 overflow-y-auto",children:p?a.jsx("div",{className:"px-3 py-2 text-sm text-gray-500 text-center",children:"Loading products..."}):m.length===0?a.jsx("div",{className:"px-3 py-2 text-sm text-gray-500 text-center",children:"No products available"}):m.map(z=>{const se=qn(z.name,z.color_hex??null),B=u===z.id;return a.jsxs("div",{onClick:()=>{d(z.id),O(!1)},className:`px-3 py-2 cursor-pointer hover:bg-gray-50 flex items-center gap-2 ${B?"bg-[#2d4660]/5":""}`,children:[se&&a.jsx("div",{className:"w-4 h-4 rounded flex-shrink-0",style:{backgroundColor:se.background}}),a.jsx("span",{className:"text-sm text-gray-900",children:z.name})]},z.id)})})]})]}),_&&a.jsx("div",{className:"rounded-md bg-red-50 p-4",children:a.jsx("div",{className:"flex",children:a.jsx("div",{className:"ml-3",children:a.jsx("h3",{className:"text-sm font-medium text-red-800",children:_})})})}),a.jsxs("div",{className:"flex justify-end space-x-2 pt-4 border-t",children:[a.jsx(nt,{variant:"secondary",onClick:r,disabled:x,children:"Cancel"}),a.jsx(nt,{variant:"primary",type:"submit",disabled:x,className:"flex items-center",children:x?a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Sending..."]}):a.jsxs(a.Fragment,{children:[a.jsx(Jc,{className:"h-4 w-4 mr-2"}),"Send Request"]})})]})]})})});function zZ(){const{currentUser:e,setCurrentSession:t,refreshSessions:r,setCurrentUser:n,isLoading:s}=ba(),i=zs(),[l]=hx(),[u,d]=v.useState(!0),[m,f]=v.useState(!1),p=v.useRef(!1),[y,x]=v.useState([]),[j,b]=v.useState({}),[k,_]=v.useState({}),[E,C]=v.useState({}),[O,T]=v.useState(!1),[A,L]=v.useState("admin"),[J,H]=v.useState(!1),me=v.useRef(null),[Z,K]=v.useState({}),[ce,z]=v.useState({}),[se,B]=v.useState(!1),[ue,oe]=v.useState(!0),[X,ee]=v.useState({title:"",goal:"",votesPerUser:10,useAutoVotes:!0,startDate:new Date().toISOString().split("T")[0],endDate:new Date(Date.now()+336*60*60*1e3).toISOString().split("T")[0]}),[D,q]=v.useState({}),[Te,we]=v.useState(!1),[Ce,le]=v.useState([]),[de,Q]=v.useState(""),[R,ge]=v.useState(""),[$e,V]=v.useState(null),[Fe,Be]=v.useState(null),[dt,ft]=v.useState(!1),[Dt,Nt]=v.useState(!1),[Xt,M]=v.useState(!1),[ie,pe]=v.useState(null),[Se,ye]=v.useState(!1),[be,qe]=v.useState(!1),[yt,wt]=v.useState(!1),[Pt,tr]=v.useState(null),[Rt,nn]=v.useState(!1),[yr,$t]=v.useState("#2D4660"),yn=v.useRef(null),[Wt,_r]=v.useState(new Set),[Ze,Ot]=v.useState(null),[Qt,Gt]=v.useState(null),[Br,vr]=v.useState(!1),[Ss,$r]=v.useState(null),[Wr,xr]=v.useState(null),[vn,Cr]=v.useState(null),[Yt,qr]=v.useState(null),[Mt,Mr]=v.useState(""),[ir,dr]=v.useState(null),[Er,is]=v.useState(!1),[Yn,Vr]=v.useState(!1),[ks,Fr]=v.useState("#2D4660"),[Bs,sn]=v.useState(!1),[Tt,an]=v.useState([]),[fr,Hr]=v.useState([]),[on,xn]=v.useState(""),[Ns,Ft]=v.useState(""),[_s,ae]=v.useState(""),[ke,De]=v.useState(!1),[Re,Ve]=v.useState(""),[Ne,ht]=v.useState(null),[pt,gt]=v.useState(!1),[Pe,ar]=v.useState(null),Ar=()=>ar(null),Pr=Tt.map(S=>S.user_email.toLowerCase()),_t=Pr.length>0&&Pr.every(S=>fr.includes(S));v.useEffect(()=>{const S=l.get("error"),I=l.get("error_description"),U=l.get("error_code");if(S){let Y="Authentication failed.";U==="unexpected_failure"&&(I!=null&&I.includes("email"))?Y="Azure AD did not return your email address. Please ensure your Azure AD app has the correct API permissions (User.Read or email) and that your account has an email address.":I&&(Y=decodeURIComponent(I)),sessionStorage.setItem("oauth_error",Y),i("/login",{replace:!0})}},[l,i]),v.useEffect(()=>{(async()=>{if(!se||!e)return;const I=e.tenant_id??e.tenantId??null;if(!I){le([]),Q(""),pe("No tenant assigned. Products cannot be loaded.");return}Nt(!0),pe(null);try{const Y=await $a(I);le(Y),Q(ne=>{if(Br&&ne&&Y.some($=>$.id===ne))return ne;if(Ze){const W=Y.find($=>{var _e;return((_e=$.name)==null?void 0:_e.toLowerCase().trim())===Ze.toLowerCase().trim()});if(W!=null&&W.id)return Ot(null),W.id}return Br&&ne||""}),K(ne=>{const W={...ne};return Y.forEach($=>{$.id&&$.name&&(W[$.id]=$.name)}),W}),z(ne=>{const W={...ne};return Y.forEach($=>{$.id&&$.color_hex&&(W[$.id]=$.color_hex)}),W})}catch(U){console.error("Error loading products for modal:",U),Ba!=null&&Ba(U)?pe("Products are not configured yet. Please create the `products` table in Supabase."):pe("Unable to load products. You can still create a session without a product tag."),le([]),Q("")}finally{Nt(!1)}})()},[se,e]);const It=S=>{if(!S||typeof S!="string")return console.error("[parseLocalDate] Invalid date string:",S),new Date;const U=S.split("T")[0].split(" ")[0].split("-");if(U.length!==3)return console.error("[parseLocalDate] Invalid date format:",S),new Date;const Y=parseInt(U[0],10),ne=parseInt(U[1],10),W=parseInt(U[2],10);if(isNaN(Y)||isNaN(ne)||isNaN(W))return console.error("[parseLocalDate] Invalid date components:",{year:Y,month:ne,day:W}),new Date;const $=new Date(Y,ne-1,W,0,0,0,0);return isNaN($.getTime())?(console.error("[parseLocalDate] Invalid date created:",{year:Y,month:ne,day:W,dateString:S}),new Date):$},rr=S=>{if(!S||isNaN(S.getTime()))return console.error("[formatDateToISO] Invalid date:",S),new Date().toISOString().split("T")[0];const I=S.getFullYear(),U=String(S.getMonth()+1).padStart(2,"0"),Y=String(S.getDate()).padStart(2,"0");return`${I}-${U}-${Y}`},Or=(S,I)=>{const U=S.getFullYear(),Y=S.getMonth(),ne=S.getDate();return new Date(U,Y,ne+I,0,0,0,0)},ra=()=>{const S="ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";let I="";for(let U=0;U<8;U++)I+=S.charAt(Math.floor(Math.random()*S.length));return I},na=()=>{ee({title:"",goal:"",votesPerUser:10,useAutoVotes:!0,startDate:new Date().toISOString().split("T")[0],endDate:new Date(Date.now()+336*60*60*1e3).toISOString().split("T")[0]}),q({}),ge(""),V(null),pe(null),ye(!1),qe(!1),wt(!1),tr(null),nn(!1),$t("#2D4660"),Ot(null),oe(!0),vr(!1),Q("")},lo=()=>{const S={};X.title.trim()||(S.title="Session title is required"),X.goal.trim()||(S.goal="Session goal is required"),X.useAutoVotes||(X.votesPerUser<1&&(S.votesPerUser="Votes per user must be at least 1"),X.votesPerUser>100&&(S.votesPerUser="Votes per user cannot exceed 100"));const I=It(X.startDate);It(X.endDate)<=I&&(S.endDate="End date must be after start date");const Y=R.trim().length>0;return!ie&&Ce.length>0&&!de&&!Pt&&!Se&&!Y&&(S.product="Please select a product or enter a new product name"),Se&&!Y&&(S.product="Please enter a product name or select an existing product"),q(S),Object.keys(S).length===0},Kr=S=>{const{name:I,value:U}=S.target;ee(Y=>{const ne={...Y,[I]:I==="votesPerUser"?parseInt(U)||0:U};if(I==="startDate"&&U){const W=It(U),$=Or(W,14);ne.endDate=rr($)}return ne}),D[I]&&q(Y=>{const ne={...Y};return delete ne[I],ne})},Ai=async()=>{if(!(!Fe||!e)){ft(!0);try{await eE(Fe.id),le(S=>S.filter(I=>I.id!==Fe.id)),K(S=>{const I={...S};return delete I[Fe.id],I}),z(S=>{const I={...S};return delete I[Fe.id],I}),de===Fe.id&&Q("")}catch(S){console.error("Error deleting product:",S),alert("Failed to delete product. Please try again.")}finally{ft(!1),Be(null)}}},ka=async S=>{if(S.preventDefault(),!!e&&lo()){we(!0);try{const I=ra(),U=e.tenant_id??e.tenantId??null;let Y=de&&de.trim()!==""?de:null;const ne=R.trim(),W=ne.length>0,$=de&&de.trim()!=="";let _e=null,Oe=null;if(Pt?(_e=Pt.name,Oe=Pt.color):W&&(_e=ne,Oe=$e),_e){const zt=Ce.find(ot=>ot.name.toLowerCase().trim()===_e.toLowerCase().trim());if(zt)Y=zt.id;else if(U)try{const ot=await ZC(U,_e,Oe||void 0);Y=ot.id,le(Et=>[...Et,ot].sort((Ge,bt)=>Ge.name.localeCompare(bt.name))),K(Et=>({...Et,[ot.id]:ot.name})),z(Et=>{const Ge={...Et};return ot.color_hex&&(Ge[ot.id]=ot.color_hex),Ge})}catch(ot){console.error("Error creating product during session creation:",ot),q(Et=>({...Et,submit:"Failed to create product. Please try again."})),we(!1);return}else{console.error("No tenantId available to create product"),q(ot=>({...ot,submit:"Unable to create product: No tenant assigned."})),we(!1);return}}if(Y){const zt=y.filter(St=>St.product_id===Y),ot=X.startDate.split("T")[0],Et=X.endDate.split("T")[0];if(zt.find(St=>{const Jt=St.start_date.split("T")[0],cr=St.end_date.split("T")[0];return Jt===ot&&cr===Et})){const St=Z[Y]||"this product";q(Jt=>({...Jt,submit:`A session with the same dates (${Lr(X.startDate)} - ${Lr(X.endDate)}) already exists for ${St}. Please choose different dates.`})),we(!1);return}const bt=await nE(Y);if(bt){const St=It(bt.end_date);if(It(X.startDate)<=St){const cr=Z[Y]||"this product";q(Gr=>({...Gr,submit:`There is already an active session for ${cr}. The new session must start after ${Lr(bt.end_date)}.`})),we(!1);return}}}const Ue=`${X.startDate}T00:00:00`,We=`${X.endDate}T23:59:59`,st=await sE({title:X.title,goal:X.goal,votes_per_user:X.votesPerUser,use_auto_votes:X.useAutoVotes,start_date:Ue,end_date:We,is_active:!0,session_code:I,access_type:"invite-only",product_id:Y??null,product_name:null});try{await Ac(st.id,e.id)}catch(zt){console.error("Error adding session admin (session was created successfully):",zt),(zt==null?void 0:zt.code)==="42501"&&(console.warn("RLS policy violation when adding session admin. The session was created but admin assignment failed."),console.warn("This may require updating RLS policies for the session_admins table."))}const wr=await mR(st.id)||st;if(wr.product_id&&U)try{const ot=(await $a(U)).find(Et=>Et.id===wr.product_id);ot&&(K(Et=>({...Et,[ot.id]:ot.name})),ot.color_hex&&ot.color_hex.trim()!==""&&z(Et=>({...Et,[ot.id]:ot.color_hex})))}catch(zt){console.error("Error loading product for lookup:",zt)}t(wr),await r(),await wn(),B(!1),na(),setTimeout(()=>{i("/admin")},100)}catch(I){console.error("Error creating session from modal:",I),q(U=>({...U,submit:"Failed to create session. Please try again."}))}finally{we(!1)}}};v.useEffect(()=>{if(!J)return;const S=I=>{me.current&&!me.current.contains(I.target)&&H(!1)};return document.addEventListener("mousedown",S),document.addEventListener("touchstart",S,{passive:!0}),()=>{document.removeEventListener("mousedown",S),document.removeEventListener("touchstart",S)}},[J]);const wn=v.useCallback(async()=>{var S;if(!e){console.log("[SessionSelectionScreen] No current user, skipping loadUserSessions");return}if(p.current){console.log("[SessionSelectionScreen] Sessions already loading, skipping duplicate call");return}p.current=!0,d(!0);try{const U=r0(e.email)||await _i(e.id);T(U);let Y;U?Y=await Mo():Y=await rE(e.id);const ne=(e==null?void 0:e.tenant_id)??(e==null?void 0:e.tenantId)??null;let W={},$={};if(ne)try{const We=await $a(ne);W=We.reduce((st,Le)=>(Le.id&&Le.name&&(st[Le.id]=Le.name),st),{}),$=We.reduce((st,Le)=>(Le.id&&Le.color_hex&&(st[Le.id]=Le.color_hex),st),{})}catch(We){console.error("Error loading products for session selection:",We)}const _e={},Oe={},Ue={};for(let We=0;We<Y.length;We++){const st=Y[We];try{const[Le,wr,zt,ot]=await Promise.all([U?Promise.resolve(!0):km(st.id,e.id),bx(st.id,e.email),ua(st.id),Eo(st.id).catch(Ge=>(console.warn(`Failed to load votes for session ${st.id}:`,Ge),[]))]);_e[st.id]={isAdmin:Le,isStakeholder:wr},Oe[st.id]=zt.length;const Et=ot.some(Ge=>Ge.user_id===e.id);Ue[st.id]=Et}catch(Le){console.warn(`Error loading data for session ${st.id}:`,Le),_e[st.id]={isAdmin:!1,isStakeholder:!1},Oe[st.id]=0,Ue[st.id]=!1}}await r(),x(Y),b(_e),_(Oe),C(Ue),K(W),z($)}catch(I){console.error("Error loading sessions:",I),(S=I==null?void 0:I.message)!=null&&S.includes("Failed to fetch")||(I==null?void 0:I.code)==="ERR_FAILED"?(console.warn("Network error loading sessions - will retry. This is usually temporary."),x([]),b({}),_({}),C({})):(x([]),b({}),_({}),C({})),p.current=!1}finally{d(!1)}},[e,r]);v.useEffect(()=>{if(s)return;if((window.location.search.includes("code=")||window.location.hash.includes("access_token")||window.location.search.includes("error="))&&!e&&!m){f(!0);const I=setTimeout(()=>{f(!1),e||i("/login",{replace:!0})},3e3);return()=>clearTimeout(I)}if(m&&e&&f(!1),!m){if(!e&&!s){i("/login",{replace:!0});return}e&&!s&&!p.current&&wn()}},[e,s,i,m]);const Ct=S=>{const I=k[S.id]||0;if(S.use_auto_votes){const U=Math.max(1,Math.floor(I/2));return{votes:U,displayText:`${U} votes/user`,isAuto:!0,formula:`Auto: ${I} ${I===1?"feature":"features"}  2 = ${U}`}}else return{votes:S.votes_per_user,displayText:`${S.votes_per_user} votes/user`,isAuto:!1,formula:""}},ln=S=>{t(S);const I=j[S.id];A==="stakeholder"?i("/vote"):I!=null&&I.isAdmin?i("/admin"):i("/vote")},Na=async()=>{try{await je.auth.signOut()}catch{}try{t(null)}catch{}n(null);try{localStorage.removeItem("voting_system_current_session"),localStorage.removeItem("azureDevOpsAuthInProgress"),sessionStorage.removeItem("oauth_return_path"),sessionStorage.removeItem("oauth_action")}catch{}H(!1),i("/login",{replace:!0})},Lr=S=>{const U=S.split("T")[0].split(" ")[0].split("-");if(U.length!==3)return new Date(S).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}).replace(/\b(\d{4})\b/g,We=>`'${We.slice(-2)}`);const Y=parseInt(U[0],10),ne=parseInt(U[1],10)-1,W=parseInt(U[2],10);return new Date(Y,ne,W).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}).replace(/\b(\d{4})\b/g,Oe=>`'${Oe.slice(-2)}`)},Ws=S=>{const I=new Date,U=new Date(S.start_date),Y=new Date(S.end_date);return I<U?{text:"Upcoming",color:"text-yellow-600 bg-yellow-50",icon:Am}:I>Y?{text:"Closed",color:"text-gray-600 bg-gray-100",icon:Ht}:{text:"Active",color:"text-[#1E6154] bg-[#1E6154]/10",icon:sr}},bn=S=>[...S].sort((I,U)=>{const Y=I!=null&&I.end_date?Date.parse(I.end_date):0;return(U!=null&&U.end_date?Date.parse(U.end_date):0)-Y}),Pi=S=>S.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;"),ci=S=>Pi(S).replace(/\n/g,"<br />"),Oi=S=>`You're invited to vote: ${S.title}`,Dn=(S,I)=>`Hello,

You're invited to participate in the "${S.title}" feature voting session.

`+(S.goal?`Goal: ${S.goal}

`:"")+`Voting Period: ${Lr(S.start_date)} - ${Lr(S.end_date)}

Click the link below to sign in and cast your votes:
${I}

Need help? Reach out to the session admin team.

Thanks,
${(e==null?void 0:e.name)||"Feature Voting System"}`,ds=async(S,I)=>{S.stopPropagation();const U=window.location.pathname.startsWith("/feature-voting-app")?"/feature-voting-app":"",Y=`${window.location.origin}${U}/login?session=${I.session_code}`;Ve(""),ht(I),ae(Y),xn(Oi(I)),Ft(Dn(I,Y)),sn(!0),De(!0),an([]),Hr([]);try{const W=(await lE(I.id)).filter(Ue=>!!Ue.user_email),$=await Xv(),_e=new Set($.map(Ue=>Ue.email.toLowerCase())),Oe=W.filter(Ue=>_e.has(Ue.user_email.toLowerCase()));an(Oe),Hr(Oe.map(Ue=>Ue.user_email.toLowerCase())),Oe.length===0&&(W.length>0?Ve("No active stakeholders found for this session. Some stakeholders may have been deleted. Add stakeholders first, then send invites."):Ve("No stakeholders found for this session. Add stakeholders first, then send invites."))}catch(ne){console.error("Error loading stakeholders:",ne),Ve(ne.message||"Failed to load stakeholders for this session.")}finally{De(!1)}},fs=(S,I)=>{S.stopPropagation(),t(I),i("/results")},qs=()=>{sn(!1),an([]),Hr([]),ht(null),Ve("")},Ti=S=>{Hr(I=>{const U=S.toLowerCase();return I.includes(U)?I.filter(Y=>Y!==U):[...I,U]})},Cs=()=>{Hr(_t?[]:Pr)},co=async()=>{if(!Ne)return;if(fr.length===0){Ve("Select at least one stakeholder to email.");return}Ve(""),gt(!0);const S=fr.length,I=Ne.title,U=Ns||Dn(Ne,_s),Y=ci(U),ne=on||Oi(Ne);try{await Promise.all(fr.map(W=>Nl({to:W,subject:ne,text:U,html:`<div style="font-family: Arial, sans-serif; font-size: 14px; color: #111827; line-height: 1.6;">${Y}</div>`}))),qs(),ar({sessionTitle:I,count:S})}catch(W){console.error("Error sending stakeholder invites:",W),Ve(W.message||"Failed to send invites. Please try again.")}finally{gt(!1)}},sa=(S,I)=>{S.stopPropagation(),t(I),i("/users?filter=session-admin")},Ii=(S,I)=>{S.stopPropagation(),t(I),i("/users?filter=stakeholder")},re=()=>{B(!1),vr(!1),na()};if(u)return a.jsx("div",{className:"min-h-screen w-full bg-gray-50 flex items-center justify-center",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-[#2D4660] mx-auto mb-4"}),a.jsx("p",{className:"text-gray-600",children:"Loading sessions..."})]})});const ze=bn(y),et=O?ze:ze.filter(S=>{var I;return(I=j[S.id])==null?void 0:I.isAdmin}),Lt=O?[]:ze.filter(S=>{var I,U;return((I=j[S.id])==null?void 0:I.isStakeholder)&&!((U=j[S.id])!=null&&U.isAdmin)}),or=O||et.length>0,Tr=O&&A==="system-admin",jn=A==="stakeholder"?ze.filter(S=>Ws(S).text==="Active"):[],lr=A==="admin"||A==="system-admin"?et:[],Di=A==="admin"?Lt:[],uo=(S,I)=>{const U={};return S.forEach(Y=>{const ne=zn(Y,I);if(!ne||ne==="No Product"||ne.trim()==="")return;const W=ne.toLowerCase().trim();U[W]||(U[W]=[]),U[W].push(Y)}),U},Ri=S=>{_r(I=>{const U=new Set(I);return U.has(S)?U.delete(S):U.add(S),U})},$i=(S,I,U,Y)=>{const ne=Y||U||S,W=async $=>{if(!U)return;$.stopPropagation();let _e=Ce.find(Oe=>Oe.id===U);if(!_e){const Oe=(e==null?void 0:e.tenant_id)??(e==null?void 0:e.tenantId);if(Oe)try{_e=(await $a(Oe)).find(We=>We.id===U),_e&&le(We=>We.find(Le=>Le.id===U)?We:[...We,_e].sort((Le,wr)=>Le.name.localeCompare(wr.name)))}catch(Ue){console.error("Error loading product for edit:",Ue)}}_e&&(qr(_e),Mr(_e.name||""),dr(_e.color_hex||null),Fr(_e.color_hex||"#2D4660"))};return a.jsxs("div",{className:"absolute left-0 px-4 py-1 pr-8 rounded-t-md border-b-0 text-sm font-semibold shadow-sm z-20 flex items-center gap-2 whitespace-nowrap group cursor-pointer",style:{top:"0",left:"-1px",transform:"translateY(-100%)",backgroundColor:I.background,color:I.text,borderColor:I.border,borderWidth:"1px",borderBottomWidth:"0",boxShadow:"0 4px 8px rgba(16,24,40,0.06)",borderTopLeftRadius:"0.9rem",borderTopRightRadius:"0.9rem",overflow:"visible"},onMouseEnter:()=>{U&&A!=="stakeholder"&&or&&xr(ne)},onMouseLeave:()=>xr(null),onClick:A!=="stakeholder"&&or?W:void 0,children:[a.jsx(l0,{className:"h-4 w-4 flex-shrink-0"}),a.jsx("span",{className:"overflow-hidden text-ellipsis flex-1 min-w-0",children:S}),U&&Wr===ne&&A!=="stakeholder"&&or&&a.jsx("div",{className:"absolute right-2 flex-shrink-0 opacity-80",children:a.jsx(RE,{className:"h-4 w-4",style:{color:I.text}})})]})},ia=(S,I,U,Y,ne,W,$,_e=!0,Oe)=>a.jsxs(a.Fragment,{children:[_e&&$i(I,U,Oe),a.jsxs("div",{className:"p-6 flex flex-col h-full",children:[a.jsxs("div",{className:"flex justify-between items-start mb-4",children:[a.jsx("div",{children:Y.text==="Active"&&a.jsx("div",{className:"relative inline-block",style:{marginLeft:"-10px",marginTop:"-10px",marginRight:"10px"},children:a.jsxs("button",{onClick:Ue=>{Ue.stopPropagation(),ln(S)},className:"inline-flex items-center px-4 py-2 rounded-md text-sm font-semibold transition-colors text-white shadow-md",style:{backgroundColor:"#1E6154"},onMouseEnter:Ue=>Ue.currentTarget.style.backgroundColor="#15803d",onMouseLeave:Ue=>Ue.currentTarget.style.backgroundColor="#1E6154",children:[a.jsx(Zn,{className:"h-4 w-4 mr-1.5"}),"Vote!"]})})}),a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsxs("div",{className:`relative inline-block ${$?"group":""}`,children:[a.jsxs("button",{onClick:Ue=>sa(Ue,S),disabled:$,className:`inline-flex items-center px-3 py-1 rounded-full text-xs font-medium transition-colors ${$?"bg-gray-200 text-gray-500":"bg-[#2D4660] text-white hover:bg-[#1D3144]"}`,style:$?{cursor:"not-allowed"}:{},children:[a.jsx(An,{className:"h-3 w-3 mr-1"}),"Admins"]}),$&&a.jsxs("div",{className:"absolute top-full left-1/2 -translate-x-1/2 mt-2 px-2 py-1 bg-gray-100 text-gray-800 text-xs rounded shadow-sm opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-200 whitespace-nowrap z-10 pointer-events-none",children:["Session Closed",a.jsx("div",{className:"absolute -top-1 left-1/2 -translate-x-1/2 w-2 h-2 bg-gray-100 rotate-45 transform"})]})]}),a.jsxs("div",{className:`relative inline-block ${$?"group":""}`,children:[a.jsxs("button",{onClick:Ue=>Ii(Ue,S),disabled:$,className:`inline-flex items-center px-3 py-1 rounded-full text-xs font-medium transition-colors ${$?"bg-gray-200 text-gray-500":"bg-[#1E5461] text-white hover:bg-[#576C71]"}`,style:$?{cursor:"not-allowed"}:{},children:[a.jsx(ns,{className:"h-3 w-3 mr-1"}),"Stakeholders"]}),$&&a.jsxs("div",{className:"absolute top-full left-1/2 -translate-x-1/2 mt-2 px-2 py-1 bg-gray-100 text-gray-800 text-xs rounded shadow-sm opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-200 whitespace-nowrap z-10 pointer-events-none",children:["Session Closed",a.jsx("div",{className:"absolute -top-1 left-1/2 -translate-x-1/2 w-2 h-2 bg-gray-100 rotate-45 transform"})]})]})]})]}),a.jsx("h3",{className:"text-lg font-semibold text-[#2D4660] mb-2",children:S.title}),a.jsx("p",{className:"text-sm text-gray-600 mb-4 line-clamp-2",children:S.goal}),a.jsx("div",{className:"flex-1"}),a.jsxs("div",{className:"space-y-2 text-sm text-gray-500",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center",children:[a.jsx(Zr,{className:"h-4 w-4 mr-2"}),a.jsxs("span",{children:[Lr(S.start_date)," - ",Lr(S.end_date)]})]}),a.jsxs("span",{className:`inline-flex items-center ${Y.text==="Active"?"px-3 py-1 text-sm":"px-2 py-0.5 text-xs"} rounded-full font-medium ${Y.color}`,children:[a.jsx(ne,{className:`${Y.text==="Active"?"h-4 w-4":"h-3 w-3"} mr-1`}),Y.text]})]}),a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center",children:[a.jsx(ei,{className:"h-4 w-4 mr-2"}),a.jsxs("span",{children:[k[S.id]||0," ",k[S.id]===1?"feature":"features"]})]}),a.jsx("span",{className:"text-sm font-medium text-[#2D4660]",children:I})]}),a.jsxs("div",{className:"flex items-start",children:[a.jsx(Zn,{className:"h-4 w-4 mr-2 mt-0.5 flex-shrink-0"}),a.jsxs("div",{className:"flex-1 flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center",children:[a.jsx("span",{className:"break-words",children:W.displayText}),W.isAuto&&a.jsxs("div",{className:"group relative ml-1 mt-0.5",children:[a.jsx(Ku,{className:"h-4 w-4 text-blue-500 cursor-help"}),a.jsxs("div",{className:"absolute bottom-full left-1/2 -translate-x-1/2 mb-2 px-3 py-2 bg-gray-900 text-white text-xs rounded-lg opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-200 whitespace-nowrap z-10 pointer-events-none",children:[W.formula,a.jsx("div",{className:"absolute top-full left-1/2 -translate-x-1/2 -mt-1 border-4 border-transparent border-t-gray-900"})]})]})]}),Y.text!=="Upcoming"&&a.jsxs("button",{onClick:Ue=>fs(Ue,S),className:"ml-4 inline-flex items-center px-3 py-1 rounded-full text-xs font-medium bg-[#C89212] text-white hover:bg-[#E0A814] transition-colors cursor-pointer flex-shrink-0",children:[a.jsx(hh,{className:"h-3 w-3 mr-1"}),Y.text==="Closed"?"Final Results":"Current Results"]})]})]})]}),a.jsx("div",{className:"mt-4 pt-4 border-t border-gray-200",children:a.jsxs("div",{className:`relative inline-block w-full ${$?"group":""}`,children:[a.jsxs("button",{onClick:Ue=>ds(Ue,S),disabled:$,className:`w-full flex items-center justify-center px-3 py-2 rounded-md transition-colors ${$?"bg-gray-200 text-gray-500":"bg-blue-50 hover:bg-blue-100"}`,style:$?{cursor:"not-allowed"}:{},children:[a.jsx(Jc,{className:`h-4 w-4 mr-2 ${$?"text-gray-500":"text-blue-600"}`}),a.jsx("span",{className:`text-sm font-medium ${$?"text-gray-500":"text-blue-600"}`,children:"Email Invite to Stakeholders"})]}),$&&a.jsxs("div",{className:"absolute top-full left-1/2 -translate-x-1/2 mt-2 px-2 py-1 bg-gray-100 text-gray-800 text-xs rounded shadow-sm opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-200 whitespace-nowrap z-10 pointer-events-none",children:["Session Closed",a.jsx("div",{className:"absolute -top-1 left-1/2 -translate-x-1/2 w-2 h-2 bg-gray-100 rotate-45 transform"})]})]})})]})]});return s||m||u&&!e?a.jsx("div",{className:"min-h-screen w-full bg-gray-50 flex items-center justify-center",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-[#2d4660] mx-auto mb-4"}),a.jsx("p",{className:"text-gray-600",children:"Signing you in..."})]})}):a.jsxs("div",{className:"container mx-auto p-4 max-w-6xl min-h-screen pb-8",children:[a.jsx("div",{className:"hidden md:flex md:justify-center mb-2",children:a.jsx("img",{src:oi,alt:"New Millennium Building Systems Logo",className:"-mt-4 cursor-pointer hover:opacity-80 transition-opacity",style:{height:"96px",width:"auto"},onClick:()=>i("/sessions")})}),a.jsxs("div",{className:"flex justify-between items-center mb-6",children:[a.jsxs("div",{className:"flex items-center",children:[a.jsx("img",{src:Sa,alt:"New Millennium Building Systems Logo",className:"mr-4 md:hidden cursor-pointer hover:opacity-80 transition-opacity",style:{width:"40px",height:"40px",objectFit:"contain"},onClick:()=>i("/sessions")}),a.jsxs("div",{children:[a.jsx("h1",{className:"text-2xl font-bold text-[#2D4660] md:text-3xl",children:"My Voting Sessions"}),a.jsxs("p",{className:"text-sm text-gray-600",children:["Welcome, ",e==null?void 0:e.name,O&&a.jsx("span",{className:"ml-2 inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium bg-[#C89212] text-white",children:"System Admin"}),!O&&et.length>0&&a.jsx("span",{className:"ml-2 inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium bg-[#576C71] text-white",children:"Session Admin"}),!O&&et.length===0&&Lt.length>0&&a.jsx("span",{className:"ml-2 inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium bg-[#8B5A4A] text-white",children:"Stakeholder"})]})]})]}),a.jsxs("div",{ref:me,className:"relative z-40 md:justify-end",children:[a.jsxs("div",{className:"hidden md:flex space-x-2",children:[O&&(A==="admin"||A==="system-admin")&&a.jsx(a.Fragment,{children:a.jsxs("button",{onClick:()=>i("/users"),className:"flex items-center px-4 py-2 bg-[#2D4660] text-white rounded-lg hover:bg-[#173B65] transition-colors",children:[a.jsx(ns,{className:"h-4 w-4 mr-2"}),"User Management"]})}),(O||et.length>0)&&(A==="admin"||A==="system-admin")&&a.jsx(a.Fragment,{children:a.jsxs("button",{onClick:()=>{vr(!1),oe(!0),Q(""),B(!0)},className:"flex items-center px-4 py-2 bg-[#C89212] text-white rounded-lg hover:bg-[#6A4234] transition-colors",children:[a.jsx(Un,{className:"h-4 w-4 mr-2"}),a.jsx("span",{className:"hidden sm:inline",children:"Create Session"}),a.jsx("span",{className:"sm:hidden",children:"Create"})]})}),a.jsxs("button",{onClick:Na,className:"flex items-center px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-colors",children:[a.jsx(Vn,{className:"h-4 w-4 mr-2"}),a.jsx("span",{className:"hidden sm:inline",children:"Logout"})]})]}),a.jsx("div",{className:"flex md:hidden justify-end",children:a.jsx("button",{onClick:()=>H(!J),className:"p-2 rounded-md border border-gray-200 bg-white shadow-sm","aria-label":"Open menu",children:a.jsx(ei,{className:"h-5 w-5 text-gray-700"})})}),J&&a.jsx("div",{className:"absolute right-0 mt-2 w-56 bg-white border border-gray-200 rounded-lg shadow-lg md:hidden z-50",children:a.jsxs("div",{className:"py-1",children:[O&&(A==="admin"||A==="system-admin")&&a.jsx(a.Fragment,{children:a.jsxs("button",{onClick:()=>{H(!1),i("/users")},className:"w-full px-3 py-2 flex items-center text-left hover:bg-gray-50",children:[a.jsx(ns,{className:"h-4 w-4 mr-2 text-gray-700"}),"User Management"]})}),(O||et.length>0)&&(A==="admin"||A==="system-admin")&&a.jsx(a.Fragment,{children:a.jsxs("button",{onClick:()=>{H(!1),oe(!0),B(!0)},className:"w-full px-3 py-2 flex items-center text-left hover:bg-gray-50",children:[a.jsx(Un,{className:"h-4 w-4 mr-2 text-gray-700"}),"Create Session"]})}),a.jsxs("button",{onClick:()=>{H(!1),Na()},className:"w-full px-3 py-2 flex items-center text-left hover:bg-gray-50",children:[a.jsx(Vn,{className:"h-4 w-4 mr-2 text-gray-700"}),"Logout"]})]})})]})]}),y.length===0?a.jsxs("div",{className:"bg-white rounded-lg shadow-md p-12 text-center",children:[a.jsx(Zn,{className:"mx-auto h-12 w-12 text-gray-400 mb-4"}),a.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No voting sessions"}),a.jsx("p",{className:"text-sm text-gray-500 mb-6",children:"You are not part of any voting sessions yet."}),O&&a.jsxs("button",{onClick:()=>{oe(!0),B(!0)},className:"inline-flex items-center px-4 py-2 bg-[#2D4660] text-white rounded-lg hover:bg-[#173B65] transition-colors",children:[a.jsx(Un,{className:"h-5 w-5 mr-2"}),"Create Your First Session"]})]}):a.jsxs("div",{className:"space-y-8",children:[A==="stakeholder"&&a.jsxs("div",{children:[a.jsxs("h2",{className:"text-xl font-semibold text-[#2D4660] mb-4 flex items-center",children:[a.jsx(Zn,{className:"h-5 w-5 mr-2"}),"All Your Voting Sessions"]}),(()=>{const S=jn.filter(W=>{const $=zn(W,Z);return $&&$!=="No Product"&&$.trim()!==""}),I=jn.filter(W=>{const $=zn(W,Z);return!$||$==="No Product"||$.trim()===""}),U=uo(S,Z),Y=[],ne=[];return Object.entries(U).forEach(([W,$])=>{$.length>=2?Y.push({key:W,sessions:$}):ne.push(...$)}),a.jsxs("div",{className:"space-y-8",children:[Y.map(({key:W,sessions:$})=>{var ot,Et;const _e=Wt.has(W),Oe=_e?$:$.slice(0,3),Ue=$.length>3?$.length-3:0,We=zn($[0],Z),st=(ot=$[0])!=null&&ot.product_id?ce[$[0].product_id]:void 0,Le=qn(We,st),wr=(Ge,bt)=>{const St=Ge.replace("#",""),Jt=parseInt(St.substring(0,2),16),cr=parseInt(St.substring(2,4),16),Gr=parseInt(St.substring(4,6),16);return`rgba(${Jt}, ${cr}, ${Gr}, ${bt})`},zt=Le.background?wr(Le.background,.1):"#F9FAFB";return a.jsx("div",{className:"relative",style:{marginTop:"50px"},children:a.jsxs("div",{className:"rounded-lg rounded-tl-none border border-gray-200 pt-2 px-6 pb-6 relative overflow-visible",style:{backgroundColor:zt,borderColor:Le.border||"#E5E7EB"},children:[$i(We,Le,(Et=$[0])==null?void 0:Et.product_id,W),Ue>0&&a.jsx("div",{className:"absolute right-0 z-20 hidden md:block",style:{top:"0",transform:"translateY(calc(-100% - 3px))"},children:a.jsx("button",{onClick:()=>Ri(W),className:"flex items-center gap-1 text-sm text-[#2D4660] hover:text-[#173B65] transition-colors cursor-pointer",children:_e?a.jsxs(a.Fragment,{children:["Show Less",a.jsx(ts,{className:"h-4 w-4 rotate-180"})]}):a.jsxs(a.Fragment,{children:["Show More (",Ue,")",a.jsx(ts,{className:"h-4 w-4"})]})})}),or&&A!=="stakeholder"&&a.jsx("div",{className:"absolute z-20 bottom-[-20px] left-1/2 -translate-x-1/2 md:bottom-auto md:left-auto md:translate-x-0 md:right-[-20px] md:top-1/2 md:-translate-y-1/2",children:a.jsx("button",{onClick:Ge=>{var hs;Ge.stopPropagation();const bt=(hs=$[0])==null?void 0:hs.product_id,St=zn($[0],Z);bt&&Q(bt),St&&St!=="No Product"&&Ot(St);let Jt=$.length>0?It($[0].end_date):new Date;$.forEach(Rn=>{const ui=It(Rn.end_date);ui>Jt&&(Jt=ui)});const cr=Or(Jt,1),Gr=Or(cr,14);ee(Rn=>({...Rn,startDate:rr(cr),endDate:rr(Gr)})),vr(!0),oe(!1),B(!0)},onMouseEnter:()=>Gt(W),onMouseLeave:()=>Gt(null),className:"flex items-center justify-center w-10 h-10 rounded-full shadow-md",style:{backgroundColor:Le.background||"#C89212",color:Le.text||"#FFFFFF"},title:`Create new session for ${We}`,children:a.jsx(Un,{className:"h-5 w-5"})})}),a.jsx("div",{className:"grid grid-cols-1 gap-0 sm:gap-6 sm:grid-cols-2 lg:grid-cols-3",children:Oe.map(Ge=>{const bt=Ws(Ge),St=bt.text==="Closed",Jt=bt.icon,cr=Ct(Ge),Gr=E[Ge.id],hs=zn(Ge,Z),Rn=Ge.product_id?ce[Ge.product_id]:void 0,ui=qn(hs,Rn);return a.jsx("div",{className:"relative z-10 bg-white overflow-visible shadow-md rounded-lg hover:shadow-lg transition-shadow cursor-pointer mt-6 border",style:{borderColor:ui.border,borderWidth:"1px",opacity:St&&vn!==Ge.id?.75:1},onMouseEnter:()=>Cr(Ge.id),onMouseLeave:()=>Cr(null),onClick:()=>ln(Ge),children:a.jsxs("div",{className:"p-6 flex flex-col h-full",children:[a.jsx("div",{className:"flex justify-end items-start mb-4",children:Gr?a.jsxs("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-xs font-medium bg-green-100 text-green-800",children:[a.jsx(sr,{className:"h-3 w-3 mr-1"}),"Voted"]}):bt.text==="Active"?a.jsxs("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:[a.jsx(Ht,{className:"h-3 w-3 mr-1"}),"Needs Your Vote"]}):null}),a.jsx("h3",{className:"text-lg font-semibold text-[#2D4660] mb-2",children:Ge.title}),a.jsx("p",{className:"text-sm text-gray-600 mb-4 line-clamp-2",children:Ge.goal}),a.jsx("div",{className:"flex-1"}),a.jsxs("div",{className:"space-y-2 text-sm text-gray-500",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center",children:[a.jsx(Zr,{className:"h-4 w-4 mr-2"}),a.jsxs("span",{children:[Lr(Ge.start_date)," - ",Lr(Ge.end_date)]})]}),a.jsxs("span",{className:`inline-flex items-center ${bt.text==="Active"?"px-3 py-1 text-sm":"px-2 py-0.5 text-xs"} rounded-full font-medium ${bt.color}`,children:[a.jsx(Jt,{className:`${bt.text==="Active"?"h-4 w-4":"h-3 w-3"} mr-1`}),bt.text]})]}),a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center",children:[a.jsx(ei,{className:"h-4 w-4 mr-2"}),a.jsxs("span",{children:[k[Ge.id]||0," ",k[Ge.id]===1?"feature":"features"," to vote on"]})]}),a.jsx("span",{className:"text-sm font-medium text-[#2D4660]",children:hs})]}),a.jsxs("div",{className:"flex items-center",children:[a.jsx(Zn,{className:"h-4 w-4 mr-2"}),a.jsx("span",{children:cr.displayText}),cr.isAuto&&a.jsxs("div",{className:"group relative ml-1",children:[a.jsx(Ku,{className:"h-4 w-4 text-blue-500 cursor-help"}),a.jsxs("div",{className:"absolute bottom-full left-1/2 -translate-x-1/2 mb-2 px-3 py-2 bg-gray-900 text-white text-xs rounded-lg opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-200 whitespace-nowrap z-10 pointer-events-none",children:[cr.formula,a.jsx("div",{className:"absolute top-full left-1/2 -translate-x-1/2 -mt-1 border-4 border-transparent border-t-gray-900"})]})]})]})]}),a.jsx("div",{className:"mt-4 pt-4 border-t border-gray-200",children:a.jsxs("button",{onClick:hp=>{hp.stopPropagation(),St||ln(Ge)},disabled:St,className:`w-full flex items-center justify-center px-4 py-2 rounded-lg transition-colors font-medium ${St?"bg-gray-100 text-gray-500 cursor-not-allowed":Gr?"bg-gray-100 text-gray-700 hover:bg-gray-200":"bg-[#2D4660] text-white hover:bg-[#173B65]"}`,style:St?{cursor:"not-allowed"}:{},children:[a.jsx(Zn,{className:"h-4 w-4 mr-2"}),Gr?"View or Change Votes":"Cast Your Votes"]})})]})},Ge.id)})}),Ue>0&&a.jsx("div",{className:"mt-4 md:hidden",children:a.jsx("button",{onClick:()=>Ri(W),className:"w-full flex items-center justify-center gap-1 px-4 py-2 text-sm font-medium text-[#2D4660] bg-white hover:bg-gray-50 rounded-md border border-gray-300 transition-colors",children:_e?a.jsxs(a.Fragment,{children:["Show Less",a.jsx(ts,{className:"h-4 w-4 rotate-180"})]}):a.jsxs(a.Fragment,{children:["Show More (",Ue,")",a.jsx(ts,{className:"h-4 w-4"})]})})})]})},W)}),(ne.length>0||I.length>0)&&a.jsx("div",{className:"grid grid-cols-1 gap-0 sm:gap-6 sm:grid-cols-2 lg:grid-cols-3",children:[...ne,...I].map(W=>{const $=Ws(W),_e=$.text==="Closed",Oe=$.icon,Ue=Ct(W),We=E[W.id],st=zn(W,Z),Le=W.product_id?ce[W.product_id]:void 0,wr=qn(st,Le),zt=ne.includes(W);return a.jsxs("div",{className:"relative z-10 bg-white overflow-visible shadow-md rounded-lg rounded-tl-none hover:shadow-lg transition-shadow cursor-pointer mt-6 border",style:{borderColor:wr.border,borderWidth:"1px",opacity:_e&&vn!==W.id?.75:1},onMouseEnter:()=>Cr(W.id),onMouseLeave:()=>Cr(null),onClick:()=>ln(W),children:[$i(st,wr,W.product_id),zt&&or&&A!=="stakeholder"&&a.jsx("div",{className:"absolute z-20 bottom-[-20px] left-1/2 -translate-x-1/2 md:bottom-auto md:left-auto md:translate-x-0 md:right-[-20px] md:top-1/2 md:-translate-y-1/2",children:a.jsx("button",{onClick:ot=>{ot.stopPropagation();const Et=W.product_id,Ge=zn(W,Z);Et&&Q(Et),Ge&&Ge!=="No Product"&&Ot(Ge);const bt=It(W.end_date),St=Or(bt,1),Jt=Or(St,14);ee(cr=>({...cr,startDate:rr(St),endDate:rr(Jt)})),vr(!0),oe(!1),B(!0)},className:"flex items-center justify-center w-10 h-10 rounded-full transition-colors shadow-md hover:shadow-lg",style:{backgroundColor:wr.background||"#C89212",color:wr.text||"#FFFFFF"},onMouseEnter:ot=>{const Et=wr.background||"#C89212";ot.currentTarget.style.backgroundColor=Et,ot.currentTarget.style.filter="brightness(0.8)"},onMouseLeave:ot=>{ot.currentTarget.style.backgroundColor=wr.background||"#C89212",ot.currentTarget.style.filter="brightness(1)"},title:`Create new session for ${st}`,children:a.jsx(Un,{className:"h-5 w-5"})})}),a.jsxs("div",{className:"p-6 flex flex-col h-full",children:[a.jsx("div",{className:"flex justify-end items-start mb-4",children:We?a.jsxs("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-xs font-medium bg-green-100 text-green-800",children:[a.jsx(sr,{className:"h-3 w-3 mr-1"}),"Voted"]}):$.text==="Active"?a.jsxs("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:[a.jsx(Ht,{className:"h-3 w-3 mr-1"}),"Needs Your Vote"]}):null}),a.jsx("h3",{className:"text-lg font-semibold text-[#2D4660] mb-2",children:W.title}),a.jsx("p",{className:"text-sm text-gray-600 mb-4 line-clamp-2",children:W.goal}),a.jsx("div",{className:"flex-1"}),a.jsxs("div",{className:"space-y-2 text-sm text-gray-500",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center",children:[a.jsx(Zr,{className:"h-4 w-4 mr-2"}),a.jsxs("span",{children:[Lr(W.start_date)," - ",Lr(W.end_date)]})]}),a.jsxs("span",{className:`inline-flex items-center ${$.text==="Active"?"px-3 py-1 text-sm":"px-2 py-0.5 text-xs"} rounded-full font-medium ${$.color}`,children:[a.jsx(Oe,{className:`${$.text==="Active"?"h-4 w-4":"h-3 w-3"} mr-1`}),$.text]})]}),a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center",children:[a.jsx(ei,{className:"h-4 w-4 mr-2"}),a.jsxs("span",{children:[k[W.id]||0," ",k[W.id]===1?"feature":"features"," to vote on"]})]}),a.jsx("span",{className:"text-sm font-medium text-[#2D4660]",children:st})]}),a.jsxs("div",{className:"flex items-center",children:[a.jsx(Zn,{className:"h-4 w-4 mr-2"}),a.jsx("span",{children:Ue.displayText}),Ue.isAuto&&a.jsxs("div",{className:"group relative ml-1",children:[a.jsx(Ku,{className:"h-4 w-4 text-blue-500 cursor-help"}),a.jsxs("div",{className:"absolute bottom-full left-1/2 -translate-x-1/2 mb-2 px-3 py-2 bg-gray-900 text-white text-xs rounded-lg opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-200 whitespace-nowrap z-10 pointer-events-none",children:[Ue.formula,a.jsx("div",{className:"absolute top-full left-1/2 -translate-x-1/2 -mt-1 border-4 border-transparent border-t-gray-900"})]})]})]})]}),a.jsx("div",{className:"mt-4 pt-4 border-t border-gray-200",children:a.jsxs("button",{onClick:ot=>{ot.stopPropagation(),_e||ln(W)},disabled:_e,className:`w-full flex items-center justify-center px-4 py-2 rounded-lg transition-colors font-medium ${_e?"bg-gray-100 text-gray-500 cursor-not-allowed":We?"bg-gray-100 text-gray-700 hover:bg-gray-200":"bg-[#2D4660] text-white hover:bg-[#173B65]"}`,style:_e?{cursor:"not-allowed"}:{},children:[a.jsx(Zn,{className:"h-4 w-4 mr-2"}),We?"View or Change Votes":"Cast Your Votes"]})})]})]},W.id)})})]})})()]}),(A==="admin"||A==="system-admin")&&a.jsxs(a.Fragment,{children:[A==="admin"&&Di.length>0&&a.jsxs("div",{children:[a.jsxs("h2",{className:"text-xl font-semibold text-[#2D4660] mb-4 flex items-center",children:[a.jsx(Zn,{className:"h-5 w-5 mr-2"}),"Your Voting Sessions"]}),a.jsx("div",{className:"grid grid-cols-1 gap-6 sm:grid-cols-2 lg:grid-cols-3",children:Di.map(S=>{const I=Ws(S),U=I.text==="Closed",Y=I.icon,ne=Ct(S),W=E[S.id],$=zn(S,Z),_e=S.product_id?ce[S.product_id]:void 0,Oe=qn($,_e);return a.jsxs("div",{className:"relative z-10 bg-white overflow-visible shadow-md rounded-lg rounded-tl-none hover:shadow-lg transition-shadow cursor-pointer mt-6 border",style:{borderColor:Oe.border,borderWidth:"1px",opacity:U&&vn!==S.id?.75:1},onMouseEnter:()=>Cr(S.id),onMouseLeave:()=>Cr(null),onClick:()=>ln(S),children:[a.jsxs("div",{className:"absolute left-0 px-4 py-1 rounded-t-md border-b-0 text-sm font-semibold shadow-sm z-20 flex items-center gap-2 whitespace-nowrap overflow-hidden",style:{top:"0",left:"-1px",transform:"translateY(-100%)",backgroundColor:Oe.background,color:Oe.text,borderColor:Oe.border,borderWidth:"1px",borderBottomWidth:"0",boxShadow:"0 4px 8px rgba(16,24,40,0.06)",borderTopLeftRadius:"0.9rem",borderTopRightRadius:"0.9rem"},children:[a.jsx(l0,{className:"h-4 w-4 flex-shrink-0"}),a.jsx("span",{className:"overflow-hidden text-ellipsis",children:$})]}),a.jsxs("div",{className:"p-6 flex flex-col h-full",children:[a.jsx("div",{className:"flex justify-end items-start mb-4",children:W?a.jsxs("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-xs font-medium bg-green-100 text-green-800",children:[a.jsx(sr,{className:"h-3 w-3 mr-1"}),"Voted"]}):I.text==="Active"?a.jsxs("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:[a.jsx(Ht,{className:"h-3 w-3 mr-1"}),"Needs Your Vote"]}):null}),a.jsx("h3",{className:"text-lg font-semibold text-[#2D4660] mb-2",children:S.title}),a.jsx("p",{className:"text-sm text-gray-600 mb-4 line-clamp-2",children:S.goal}),a.jsx("div",{className:"flex-1"}),a.jsxs("div",{className:"space-y-2 text-sm text-gray-500",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center",children:[a.jsx(Zr,{className:"h-4 w-4 mr-2"}),a.jsxs("span",{children:[Lr(S.start_date)," - ",Lr(S.end_date)]})]}),a.jsxs("span",{className:`inline-flex items-center ${I.text==="Active"?"px-3 py-1 text-sm":"px-2 py-0.5 text-xs"} rounded-full font-medium ${I.color}`,children:[a.jsx(Y,{className:`${I.text==="Active"?"h-4 w-4":"h-3 w-3"} mr-1`}),I.text]})]}),a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center",children:[a.jsx(ei,{className:"h-4 w-4 mr-2"}),a.jsxs("span",{children:[k[S.id]||0," ",k[S.id]===1?"feature":"features"," to vote on"]})]}),a.jsx("span",{className:"text-sm font-medium text-[#2D4660]",children:$})]}),a.jsxs("div",{className:"flex items-center",children:[a.jsx(Zn,{className:"h-4 w-4 mr-2"}),a.jsx("span",{children:ne.displayText}),ne.isAuto&&a.jsxs("div",{className:"group relative ml-1",children:[a.jsx(Ku,{className:"h-4 w-4 text-blue-500 cursor-help"}),a.jsxs("div",{className:"absolute bottom-full left-1/2 -translate-x-1/2 mb-2 px-3 py-2 bg-gray-900 text-white text-xs rounded-lg opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-200 whitespace-nowrap z-10 pointer-events-none",children:[ne.formula,a.jsx("div",{className:"absolute top-full left-1/2 -translate-x-1/2 -mt-1 border-4 border-transparent border-t-gray-900"})]})]})]})]}),a.jsx("div",{className:"mt-4 pt-4 border-t border-gray-200",children:a.jsxs("button",{onClick:Ue=>{Ue.stopPropagation(),U||ln(S)},disabled:U,className:`w-full flex items-center justify-center px-4 py-2 rounded-lg transition-colors font-medium ${U?"bg-gray-100 text-gray-500 cursor-not-allowed":W?"bg-gray-100 text-gray-700 hover:bg-gray-200":"bg-[#2D4660] text-white hover:bg-[#173B65]"}`,style:U?{cursor:"not-allowed"}:{},children:[a.jsx(Zn,{className:"h-4 w-4 mr-2"}),W?"View or Change Votes":"Cast Your Votes"]})})]})]},S.id)})})]}),lr.length>0&&a.jsxs("div",{children:[a.jsxs("div",{className:"flex flex-col gap-3 sm:flex-row sm:items-center sm:justify-between mb-4",children:[a.jsxs("h2",{className:"text-xl font-semibold text-[#2D4660] flex items-center",children:[a.jsx(An,{className:"h-5 w-5 mr-2"}),Tr?"All Sessions (System Admin)":"Sessions You Manage"]}),Tr&&a.jsxs("p",{className:"text-sm text-gray-600",children:["Showing ",lr.length," total sessions across the organization."]})]}),(()=>{const S=lr.filter(W=>{const $=zn(W,Z);return $&&$!=="No Product"&&$.trim()!==""}),I=lr.filter(W=>{const $=zn(W,Z);return!$||$==="No Product"||$.trim()===""}),U=uo(S,Z),Y=[],ne=[];return Object.entries(U).forEach(([W,$])=>{$.length>=2?Y.push({key:W,sessions:$}):ne.push(...$)}),a.jsxs("div",{className:"space-y-8",children:[Y.map(({key:W,sessions:$})=>{var ot,Et;const _e=Wt.has(W),Oe=_e?$:$.slice(0,3),Ue=$.length>3?$.length-3:0,We=zn($[0],Z),st=(ot=$[0])!=null&&ot.product_id?ce[$[0].product_id]:void 0,Le=qn(We,st),wr=(Ge,bt)=>{const St=Ge.replace("#",""),Jt=parseInt(St.substring(0,2),16),cr=parseInt(St.substring(2,4),16),Gr=parseInt(St.substring(4,6),16);return`rgba(${Jt}, ${cr}, ${Gr}, ${bt})`},zt=Le.background?wr(Le.background,.1):"#F9FAFB";return a.jsx("div",{className:"relative",style:{marginTop:"50px"},children:a.jsxs("div",{className:"rounded-lg rounded-tl-none border border-gray-200 pt-2 px-6 pb-6 relative overflow-visible",style:{backgroundColor:zt,borderColor:Le.border||"#E5E7EB"},children:[$i(We,Le,(Et=$[0])==null?void 0:Et.product_id,W),Ue>0&&a.jsx("div",{className:"absolute right-0 z-20 hidden md:block",style:{top:"0",transform:"translateY(calc(-100% - 3px))"},children:a.jsx("button",{onClick:()=>Ri(W),className:"flex items-center gap-1 text-sm text-[#2D4660] hover:text-[#173B65] transition-colors cursor-pointer",children:_e?a.jsxs(a.Fragment,{children:["Show Less",a.jsx(ts,{className:"h-4 w-4 rotate-180"})]}):a.jsxs(a.Fragment,{children:["Show More (",Ue,")",a.jsx(ts,{className:"h-4 w-4"})]})})}),(O||A==="admin"||A==="system-admin")&&a.jsx("div",{className:"absolute z-20 bottom-[-20px] left-1/2 -translate-x-1/2 md:bottom-auto md:left-auto md:translate-x-0 md:right-[-20px] md:top-1/2 md:-translate-y-1/2",children:a.jsx("button",{onClick:Ge=>{var hs;Ge.stopPropagation();const bt=(hs=$[0])==null?void 0:hs.product_id,St=zn($[0],Z);bt&&Q(bt),St&&St!=="No Product"&&Ot(St);let Jt=$.length>0?It($[0].end_date):new Date;$.forEach(Rn=>{const ui=It(Rn.end_date);ui>Jt&&(Jt=ui)});const cr=Or(Jt,1),Gr=Or(cr,14);ee(Rn=>({...Rn,startDate:rr(cr),endDate:rr(Gr)})),oe(!1),B(!0)},onMouseEnter:()=>Gt(W),onMouseLeave:()=>Gt(null),className:"flex items-center justify-center w-10 h-10 rounded-full shadow-md",style:{backgroundColor:Le.background||"#C89212",color:Le.text||"#FFFFFF"},title:`Create new session for ${We}`,children:a.jsx(Un,{className:"h-5 w-5"})})}),a.jsxs("div",{className:"grid grid-cols-1 gap-0 sm:gap-6 sm:grid-cols-2 lg:grid-cols-3",children:[Oe.map(Ge=>{const bt=Ws(Ge),St=bt.icon,Jt=Ct(Ge),cr=bt.text==="Closed",Gr=zn(Ge,Z),hs=Ge.product_id?ce[Ge.product_id]:void 0,Rn=qn(Gr,hs);return a.jsx("div",{className:"relative z-10 bg-white overflow-visible shadow-md rounded-lg hover:shadow-lg transition-shadow cursor-pointer mt-6 border",style:{borderColor:Rn.border,borderWidth:"1px",opacity:cr&&vn!==Ge.id?.75:1},onMouseEnter:()=>Cr(Ge.id),onMouseLeave:()=>Cr(null),onClick:()=>ln(Ge),children:ia(Ge,Gr,Rn,bt,St,Jt,cr,!1,Ge.product_id)},Ge.id)}),$.length===2&&a.jsxs(a.Fragment,{children:[a.jsx("style",{children:`
                                        @keyframes growFromCenter {
                                          from {
                                            opacity: 0;
                                            transform: scale(0.3);
                                          }
                                          to {
                                            opacity: 1;
                                            transform: scale(1);
                                          }
                                        }
                                        @keyframes sparkle {
                                          0%, 100% {
                                            opacity: 0.1;
                                            transform: scale(0.7) rotate(0deg);
                                          }
                                          50% {
                                            opacity: 0.25;
                                            transform: scale(1.3) rotate(180deg);
                                          }
                                        }
                                        @keyframes sparkleSlow {
                                          0%, 100% {
                                            opacity: 0.08;
                                            transform: scale(0.6);
                                          }
                                          50% {
                                            opacity: 0.2;
                                            transform: scale(1.4);
                                          }
                                        }
                                        @keyframes starTwinkle {
                                          0%, 100% {
                                            opacity: 0.12;
                                            transform: scale(0.8) rotate(0deg);
                                          }
                                          25% {
                                            opacity: 0.22;
                                            transform: scale(1.1) rotate(90deg);
                                          }
                                          50% {
                                            opacity: 0.18;
                                            transform: scale(1.3) rotate(180deg);
                                          }
                                          75% {
                                            opacity: 0.22;
                                            transform: scale(1.1) rotate(270deg);
                                          }
                                        }
                                      `}),a.jsx("div",{className:"hidden lg:block relative z-10 overflow-hidden shadow-md rounded-lg mt-6 border cursor-pointer transition-all",style:{borderColor:Le.border||"#E5E7EB",borderWidth:"1px",backgroundColor:"rgba(255, 255, 255, 0.7)"},onMouseEnter:()=>$r(W),onMouseLeave:()=>$r(null),onClick:Ge=>{var hs;Ge.stopPropagation();const bt=(hs=$[0])==null?void 0:hs.product_id,St=zn($[0],Z);bt&&Q(bt),St&&St!=="No Product"&&Ot(St);let Jt=$.length>0?It($[0].end_date):new Date;$.forEach(Rn=>{const ui=It(Rn.end_date);ui>Jt&&(Jt=ui)});const cr=Or(Jt,1),Gr=Or(cr,14);ee(Rn=>({...Rn,startDate:rr(cr),endDate:rr(Gr)})),vr(!0),oe(!1),B(!0)},children:a.jsxs("div",{className:"p-6 flex flex-col h-full items-center justify-center min-h-[200px] relative rounded-lg transition-all duration-300",style:{backgroundColor:"transparent",backgroundImage:Qt===W||Ss===W?`radial-gradient(circle at center, ${Le.badgeBackground||"rgba(200, 146, 18, 0.15)"}, transparent 70%)`:"none"},children:[(Qt===W||Ss===W)&&a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"absolute top-3 left-3 w-1.5 h-1.5 rounded-full",style:{backgroundColor:Le.background||"#C89212",animation:"sparkle 1.8s ease-in-out infinite",animationDelay:"0ms",opacity:.12}}),a.jsx("div",{className:"absolute top-5 left-8 w-1 h-1 rounded-full",style:{backgroundColor:Le.background||"#C89212",animation:"sparkleSlow 2.5s ease-in-out infinite",animationDelay:"200ms",opacity:.1}}),a.jsx("div",{className:"absolute top-8 left-5 w-2 h-2 rounded-full",style:{backgroundColor:Le.background||"#C89212",animation:"sparkle 2.2s ease-in-out infinite",animationDelay:"400ms",opacity:.15}}),a.jsx("div",{className:"absolute top-4 right-6 w-1 h-1 rounded-full",style:{backgroundColor:Le.background||"#C89212",animation:"sparkleSlow 2.8s ease-in-out infinite",animationDelay:"600ms",opacity:.1}}),a.jsx("div",{className:"absolute top-7 right-4 w-1.5 h-1.5 rounded-full",style:{backgroundColor:Le.background||"#C89212",animation:"sparkle 2s ease-in-out infinite",animationDelay:"800ms",opacity:.12}}),a.jsx("div",{className:"absolute top-10 right-9 w-1 h-1 rounded-full",style:{backgroundColor:Le.background||"#C89212",animation:"sparkleSlow 2.3s ease-in-out infinite",animationDelay:"1000ms",opacity:.1}}),a.jsx("div",{className:"absolute bottom-5 left-4 w-2 h-2 rounded-full",style:{backgroundColor:Le.background||"#C89212",animation:"sparkle 2.1s ease-in-out infinite",animationDelay:"1200ms",opacity:.15}}),a.jsx("div",{className:"absolute bottom-7 left-9 w-1 h-1 rounded-full",style:{backgroundColor:Le.background||"#C89212",animation:"sparkleSlow 2.6s ease-in-out infinite",animationDelay:"1400ms",opacity:.1}}),a.jsx("div",{className:"absolute bottom-4 left-12 w-1.5 h-1.5 rounded-full",style:{backgroundColor:Le.background||"#C89212",animation:"sparkle 1.9s ease-in-out infinite",animationDelay:"1600ms",opacity:.12}}),a.jsx("div",{className:"absolute bottom-8 right-5 w-1 h-1 rounded-full",style:{backgroundColor:Le.background||"#C89212",animation:"sparkleSlow 2.4s ease-in-out infinite",animationDelay:"1800ms",opacity:.1}}),a.jsx("div",{className:"absolute bottom-6 right-10 w-1.5 h-1.5 rounded-full",style:{backgroundColor:Le.background||"#C89212",animation:"sparkle 2.2s ease-in-out infinite",animationDelay:"2000ms",opacity:.12}}),a.jsx("div",{className:"absolute bottom-3 right-7 w-1 h-1 rounded-full",style:{backgroundColor:Le.background||"#C89212",animation:"sparkleSlow 2.7s ease-in-out infinite",animationDelay:"2200ms",opacity:.1}}),a.jsx(gc,{className:"absolute top-6 left-12",size:8,style:{color:Le.background||"#C89212",animation:"starTwinkle 3s ease-in-out infinite",animationDelay:"300ms",opacity:.15}}),a.jsx(gc,{className:"absolute top-9 right-12",size:6,style:{color:Le.background||"#C89212",animation:"starTwinkle 3.5s ease-in-out infinite",animationDelay:"700ms",opacity:.12}}),a.jsx(gc,{className:"absolute bottom-9 left-6",size:7,style:{color:Le.background||"#C89212",animation:"starTwinkle 2.8s ease-in-out infinite",animationDelay:"1100ms",opacity:.13}}),a.jsx(gc,{className:"absolute bottom-5 right-12",size:5,style:{color:Le.background||"#C89212",animation:"starTwinkle 3.2s ease-in-out infinite",animationDelay:"1500ms",opacity:.1}}),a.jsx(gc,{className:"absolute top-12 left-1/2 -translate-x-1/2",size:6,style:{color:Le.background||"#C89212",animation:"starTwinkle 2.9s ease-in-out infinite",animationDelay:"500ms",opacity:.12}}),a.jsx(gc,{className:"absolute bottom-12 left-1/2 -translate-x-1/2",size:7,style:{color:Le.background||"#C89212",animation:"starTwinkle 3.3s ease-in-out infinite",animationDelay:"1300ms",opacity:.13}}),a.jsx(pc,{className:"absolute top-2 left-6",size:6,style:{color:Le.background||"#C89212",animation:"sparkle 2.1s ease-in-out infinite",animationDelay:"250ms",opacity:.12}}),a.jsx(pc,{className:"absolute top-11 right-6",size:5,style:{color:Le.background||"#C89212",animation:"sparkleSlow 2.7s ease-in-out infinite",animationDelay:"750ms",opacity:.1}}),a.jsx(pc,{className:"absolute bottom-10 left-10",size:7,style:{color:Le.background||"#C89212",animation:"sparkle 2.4s ease-in-out infinite",animationDelay:"1150ms",opacity:.13}}),a.jsx(pc,{className:"absolute bottom-2 right-8",size:6,style:{color:Le.background||"#C89212",animation:"sparkleSlow 2.9s ease-in-out infinite",animationDelay:"1550ms",opacity:.11}}),a.jsx(pc,{className:"absolute top-1/2 left-2",size:5,style:{color:Le.background||"#C89212",animation:"sparkle 2.6s ease-in-out infinite",animationDelay:"450ms",opacity:.1}}),a.jsx(pc,{className:"absolute top-1/2 right-2",size:6,style:{color:Le.background||"#C89212",animation:"sparkleSlow 2.8s ease-in-out infinite",animationDelay:"950ms",opacity:.12}}),a.jsx("div",{className:"absolute top-1/4 left-1/4 w-1 h-1 rounded-full",style:{backgroundColor:Le.background||"#C89212",animation:"sparkleSlow 2.2s ease-in-out infinite",animationDelay:"300ms",opacity:.1}}),a.jsx("div",{className:"absolute top-1/3 right-1/4 w-1.5 h-1.5 rounded-full",style:{backgroundColor:Le.background||"#C89212",animation:"sparkle 2.3s ease-in-out infinite",animationDelay:"900ms",opacity:.12}}),a.jsx("div",{className:"absolute bottom-1/4 left-1/3 w-1 h-1 rounded-full",style:{backgroundColor:Le.background||"#C89212",animation:"sparkleSlow 2.5s ease-in-out infinite",animationDelay:"1500ms",opacity:.1}}),a.jsx("div",{className:"absolute bottom-1/3 right-1/3 w-1.5 h-1.5 rounded-full",style:{backgroundColor:Le.background||"#C89212",animation:"sparkle 2.1s ease-in-out infinite",animationDelay:"600ms",opacity:.12}})]}),a.jsxs("div",{className:"flex flex-col items-center justify-center gap-2 z-10",style:{opacity:Qt===W||Ss===W?1:0,transformOrigin:"center center",animation:Qt===W||Ss===W?"growFromCenter 0.3s ease-out forwards":"none"},children:[a.jsx(Un,{className:"h-8 w-8",style:{color:Le.background||"#C89212"}}),a.jsxs("div",{className:"flex flex-col items-center justify-center text-base font-semibold",style:{color:Le.background||"#C89212"},children:[a.jsx("span",{children:"Create"}),a.jsx("span",{children:"New Session"})]})]})]})})]})]}),Ue>0&&a.jsx("div",{className:"mt-4 md:hidden",children:a.jsx("button",{onClick:()=>Ri(W),className:"w-full flex items-center justify-center gap-1 px-4 py-2 text-sm font-medium text-[#2D4660] bg-white hover:bg-gray-50 rounded-md border border-gray-300 transition-colors",children:_e?a.jsxs(a.Fragment,{children:["Show Less",a.jsx(ts,{className:"h-4 w-4 rotate-180"})]}):a.jsxs(a.Fragment,{children:["Show More (",Ue,")",a.jsx(ts,{className:"h-4 w-4"})]})})})]})},W)}),(ne.length>0||I.length>0)&&a.jsxs("div",{className:"grid grid-cols-1 gap-0 sm:gap-6 sm:grid-cols-2 lg:grid-cols-3",children:[[...ne,...I].map(W=>{const $=Ws(W),_e=$.icon,Oe=Ct(W),Ue=$.text==="Closed",We=zn(W,Z),st=W.product_id?ce[W.product_id]:void 0,Le=qn(We,st),wr=ne.includes(W);return a.jsxs("div",{className:"relative z-10 bg-white overflow-visible shadow-md rounded-lg rounded-tl-none hover:shadow-lg transition-shadow cursor-pointer mt-6 border",style:{borderColor:Le.border,borderWidth:"1px",opacity:Ue&&vn!==W.id?.75:1},onMouseEnter:()=>Cr(W.id),onMouseLeave:()=>Cr(null),onClick:()=>ln(W),children:[wr&&(O||A==="admin"||A==="system-admin")&&a.jsx("div",{className:"absolute z-20 bottom-[-20px] left-1/2 -translate-x-1/2 md:bottom-auto md:left-auto md:translate-x-0 md:right-[-20px] md:top-1/2 md:-translate-y-1/2",children:a.jsx("button",{onClick:zt=>{zt.stopPropagation();const ot=W.product_id,Et=zn(W,Z);ot&&Q(ot),Et&&Et!=="No Product"&&Ot(Et);const Ge=It(W.end_date),bt=Or(Ge,1),St=Or(bt,14);ee(Jt=>({...Jt,startDate:rr(bt),endDate:rr(St)})),vr(!0),oe(!1),B(!0)},className:"flex items-center justify-center w-10 h-10 rounded-full transition-colors shadow-md hover:shadow-lg",style:{backgroundColor:Le.background||"#C89212",color:Le.text||"#FFFFFF"},onMouseEnter:zt=>{const ot=Le.background||"#C89212";zt.currentTarget.style.backgroundColor=ot,zt.currentTarget.style.filter="brightness(0.8)"},onMouseLeave:zt=>{zt.currentTarget.style.backgroundColor=Le.background||"#C89212",zt.currentTarget.style.filter="brightness(1)"},title:`Create new session for ${We}`,children:a.jsx(Un,{className:"h-5 w-5"})})}),ia(W,We,Le,$,_e,Oe,Ue,!0,W.product_id)]},W.id)}),lr.length===2&&ne.length+I.length>0&&a.jsx("div",{className:"hidden lg:block relative z-10 bg-white overflow-visible shadow-md rounded-lg hover:shadow-lg transition-shadow mt-6 border border-gray-200",children:a.jsx("div",{className:"p-6 flex flex-col h-full items-end justify-center min-h-[200px]",children:a.jsxs("button",{onClick:()=>{oe(!0),B(!0)},className:"flex items-center px-6 py-3 bg-[#C89212] text-white rounded-lg hover:bg-[#6A4234] transition-colors font-semibold",children:[a.jsx(Un,{className:"h-5 w-5 mr-2"}),"Create Session"]})})})]})]})})()]})]})]}),a.jsx(hn,{isOpen:se,onClose:re,title:"Create Voting Session",maxWidth:"max-w-3xl",children:a.jsxs("form",{onSubmit:ka,className:"space-y-6",children:[a.jsxs("div",{className:"space-y-1",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Product *"}),!Se&&!Pt?Br&&de?a.jsx("div",{className:"flex items-center gap-3 px-4 py-2 border border-gray-300 rounded-md bg-gray-50",children:(()=>{const S=Ce.find(ne=>ne.id===de),I=(S==null?void 0:S.name)||Z[de]||"Unknown Product",U=(S==null?void 0:S.color_hex)||ce[de],Y=qn(I,U);return a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"w-6 h-6 rounded-md border flex-shrink-0",style:{backgroundColor:Y.background||"#2D4660",borderColor:Y.border||"#2D4660"}}),a.jsx("span",{className:"font-medium text-gray-900 flex-1",children:I})]})})()}):a.jsx("div",{className:"space-y-3",children:a.jsxs("div",{className:"flex flex-col gap-3 sm:flex-row sm:items-end",children:[a.jsx("div",{className:"flex-1 w-full",children:a.jsx(IT,{label:"",products:Ce,value:de,onChange:async S=>{if(Q(S),S){ge("");try{const I=y.filter(U=>U.product_id===S);if(I.length>0){let U=It(I[0].end_date);I.forEach(W=>{const $=It(W.end_date);$>U&&(U=$)});const Y=Or(U,1),ne=Or(Y,14);ee(W=>({...W,startDate:rr(Y),endDate:rr(ne)}))}else{const U=new Date,Y=Or(U,14);ee(ne=>({...ne,startDate:rr(U),endDate:rr(Y)}))}}catch(I){console.error("Error calculating dates for selected product:",I);const U=new Date,Y=Or(U,14);ee(ne=>({...ne,startDate:rr(U),endDate:rr(Y)}))}}D.product&&q(I=>{const U={...I};return delete U.product,U})},isLoading:Dt,error:ie,disabled:Dt||Ce.length===0,placeholder:"Select a product",helperText:!Dt&&Ce.length===0&&!ie&&ue?"No products found yet. Enter a product name below to create one.":void 0,allowDelete:ue,onRequestDeleteProduct:ue?(S=>{Be(S)}):void 0,className:"w-full"})}),ue&&a.jsxs("div",{className:"flex items-center gap-2 sm:flex-none",children:[a.jsx("span",{className:"text-gray-500 font-medium px-2",children:"or"}),a.jsxs("button",{type:"button",onClick:()=>ye(!0),disabled:Dt,className:"px-4 py-2 bg-[#1E5461] text-white rounded-md hover:bg-[#576C71] transition-colors font-medium whitespace-nowrap disabled:opacity-50 disabled:cursor-not-allowed",children:[a.jsx(Un,{className:"h-4 w-4 inline mr-2"}),"Create New Product"]})]})]})}):Pt?a.jsxs("div",{className:"flex items-center gap-3 px-4 py-2 border border-gray-300 rounded-md cursor-pointer hover:border-[#2D4660] transition-colors animate-in fade-in duration-300",onClick:()=>{tr(null),ge(Pt.name),V(Pt.color),ye(!0),qe(!0),wt(!1)},children:[a.jsx("div",{className:"w-6 h-6 rounded-md border flex-shrink-0",style:{backgroundColor:Pt.color||"#2D4660",borderColor:Pt.color||"#2D4660"}}),a.jsx("span",{className:"font-medium text-gray-900 flex-1",children:Pt.name}),a.jsx("span",{className:"text-xs text-gray-500",children:"Click to edit"})]}):ue&&Se?a.jsx("div",{className:"space-y-3",children:a.jsxs("div",{className:"flex gap-3 items-center",children:[a.jsxs("div",{className:"flex-1",style:{animation:"dramaticSlideIn 1.2s cubic-bezier(0.34, 1.56, 0.64, 1) forwards"},children:[a.jsx("style",{children:`
                      @keyframes dramaticSlideIn {
                        from {
                          opacity: 0;
                          transform: translateX(150px) scale(0.9);
                        }
                        to {
                          opacity: 1;
                          transform: translateX(0) scale(1);
                        }
                      }
                    `}),a.jsx("input",{type:"text",value:R,onChange:S=>{ge(S.target.value),S.target.value.trim()&&!be&&setTimeout(()=>qe(!0),200),ie&&pe(null)},placeholder:"Enter product name...",autoFocus:!0,className:"w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-0 focus:border-[#2D4660]"})]}),be&&a.jsxs("div",{className:"flex items-center gap-2 overflow-hidden",style:{animation:"slideInFromRight 1s ease-out forwards"},children:[a.jsx("style",{children:`
                        @keyframes slideInFromRight {
                          from {
                            opacity: 0;
                            transform: translateX(100px);
                          }
                          to {
                            opacity: 1;
                            transform: translateX(0);
                          }
                        }
                      `}),a.jsx("label",{className:"text-sm font-medium text-gray-700 whitespace-nowrap",children:"Product Color"}),a.jsx("button",{type:"button",onClick:()=>{$t($e||"#2D4660"),nn(!0),setTimeout(()=>{var S;(S=document.getElementById("native-color-input"))==null||S.click()},100)},className:"block w-10 h-10 rounded-md border-2 border-gray-300 hover:border-gray-400 transition-all flex items-center justify-center overflow-hidden",style:$e?{backgroundColor:$e}:{backgroundColor:"#ffffff"},children:!$e&&a.jsx("img",{src:TT,alt:"Color Picker",className:"w-8 h-8 object-contain"})})]})]})}):null,D.product&&a.jsxs("p",{className:"text-sm text-red-600 flex items-center",children:[a.jsx(Ht,{className:"h-4 w-4 mr-1"}),D.product]}),ie&&(Se||!!Pt)&&a.jsxs("p",{className:"text-sm text-red-600 flex items-center",children:[a.jsx(Ht,{className:"h-4 w-4 mr-1"}),ie]})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Session Title *"}),a.jsx("input",{ref:yn,type:"text",name:"title",value:X.title,onChange:Kr,placeholder:"e.g., Q3 Product Priorities, Sprint 5, Sprint 5: Mobile Updates",className:`w-full px-4 py-2 border rounded-md focus:outline-none focus:ring-0 focus:border-[#2d4660] ${D.title?"border-red-500":"border-gray-300"}`}),D.title&&a.jsxs("p",{className:"mt-1 text-sm text-red-600 flex items-center",children:[a.jsx(Ht,{className:"h-4 w-4 mr-1"}),D.title]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Session Goal *"}),a.jsx("textarea",{name:"goal",value:X.goal,onChange:Kr,rows:2,placeholder:"Describe the purpose of this voting session...",className:`w-full px-4 py-2 border rounded-md focus:outline-none focus:ring-0 focus:border-[#2d4660] ${D.goal?"border-red-500":"border-gray-300"}`}),D.goal&&a.jsxs("p",{className:"mt-1 text-sm text-red-600 flex items-center",children:[a.jsx(Ht,{className:"h-4 w-4 mr-1"}),D.goal]})]})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Votes Per User *"}),a.jsxs("div",{className:"flex items-center mb-3",children:[a.jsx("input",{type:"checkbox",id:"modalAutoVotes",checked:X.useAutoVotes,onChange:S=>ee(I=>({...I,useAutoVotes:S.target.checked})),className:"h-4 w-4 cursor-pointer rounded border-gray-300 accent-[#3A9B5C] focus:outline-none focus:ring-0"}),a.jsx("label",{htmlFor:"modalAutoVotes",className:"ml-2 text-sm text-gray-700 cursor-pointer",children:"Auto-calculate votes (half of feature count, minimum 1)"})]}),!X.useAutoVotes&&a.jsxs(a.Fragment,{children:[a.jsx("input",{type:"number",name:"votesPerUser",value:X.votesPerUser,onChange:Kr,min:"1",max:"100",className:`w-full px-4 py-2 border rounded-md focus:outline-none focus:ring-0 focus:border-[#2d4660] ${D.votesPerUser?"border-red-500":"border-gray-300"}`}),D.votesPerUser&&a.jsxs("p",{className:"mt-1 text-sm text-red-600 flex items-center",children:[a.jsx(Ht,{className:"h-4 w-4 mr-1"}),D.votesPerUser]})]}),a.jsx("p",{className:"mt-2 text-xs text-gray-500",children:X.useAutoVotes?"Votes will automatically be set to half the number of features (minimum 1).":"Each stakeholder receives this many votes."})]}),a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Start Date *"}),a.jsx("input",{type:"date",name:"startDate",value:X.startDate,onChange:Kr,className:"w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-0 focus:border-[#2d4660]"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"End Date *"}),a.jsx("input",{type:"date",name:"endDate",value:X.endDate,onChange:Kr,className:`w-full px-4 py-2 border rounded-md focus:outline-none focus:ring-0 focus:border-[#2d4660] ${D.endDate?"border-red-500":"border-gray-300"}`}),D.endDate&&a.jsxs("p",{className:"mt-1 text-sm text-red-600 flex items-center",children:[a.jsx(Ht,{className:"h-4 w-4 mr-1"}),D.endDate]})]})]})]}),D.submit&&a.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-3 text-sm text-red-700 flex items-center",children:[a.jsx(Ht,{className:"h-4 w-4 mr-2"}),D.submit]}),a.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t",children:[a.jsx(nt,{type:"button",variant:"secondary",onClick:re,disabled:Te,children:"Cancel"}),a.jsx(nt,{type:"submit",variant:Se&&R.trim()&&$e?"gold":"primary",disabled:Te,className:`transition-all duration-500 ease-in-out ${Se&&R.trim()&&$e?"relative overflow-hidden":""}`,children:Te?"Creating...":Se&&R.trim()&&$e?a.jsxs(a.Fragment,{children:[a.jsxs("span",{className:"relative z-10 flex items-center",children:[a.jsx(Un,{className:"h-4 w-4 mr-2"}),"Create New Product and Session"]}),a.jsx("span",{className:"absolute top-1 left-1/4 w-1 h-1 bg-white rounded-full animate-ping opacity-75",style:{animationDelay:"0ms",animationDuration:"1.5s"}}),a.jsx("span",{className:"absolute top-2 right-1/3 w-1 h-1 bg-white rounded-full animate-ping opacity-75",style:{animationDelay:"300ms",animationDuration:"1.5s"}}),a.jsx("span",{className:"absolute bottom-2 left-1/3 w-1 h-1 bg-white rounded-full animate-ping opacity-75",style:{animationDelay:"600ms",animationDuration:"1.5s"}}),a.jsx("span",{className:"absolute bottom-1 right-1/4 w-1 h-1 bg-white rounded-full animate-ping opacity-75",style:{animationDelay:"900ms",animationDuration:"1.5s"}})]}):"Create Session"})]})]})}),Rt&&a.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",onClick:()=>nn(!1),children:a.jsx("div",{className:"bg-white rounded-lg shadow-xl px-3 py-2 w-auto mx-4",onClick:S=>S.stopPropagation(),children:a.jsxs("div",{className:"flex gap-3 items-stretch",children:[a.jsxs("div",{className:"flex-shrink-0",style:{width:"240px",height:"260px"},children:[a.jsx("input",{id:"native-color-input",type:"color",value:yr,onChange:S=>$t(S.target.value),ref:S=>{S&&Rt&&setTimeout(()=>S.click(),50)},className:"opacity-0 absolute",style:{width:"1px",height:"1px"}}),a.jsx("div",{className:"w-full h-full"})]}),a.jsxs("button",{type:"button",onClick:()=>{V(yr),nn(!1),setTimeout(()=>{var S;(S=yn.current)==null||S.focus()},100)},className:"px-6 rounded-lg text-white font-bold shadow-lg hover:shadow-xl transition-all flex flex-col items-center justify-center gap-3 text-lg flex-shrink-0",style:{backgroundColor:yr,height:"260px",minWidth:"100px"},children:[a.jsx(sr,{className:"h-8 w-8"}),a.jsxs("div",{className:"text-center leading-tight",children:[a.jsx("div",{children:"Looks"}),a.jsx("div",{children:"Good"})]})]})]})})}),A==="stakeholder"&&y.length>0&&a.jsx("div",{className:"relative z-10 mt-8 bg-blue-50 border border-blue-200 rounded-lg p-4",children:a.jsxs("div",{className:"flex items-start",children:[a.jsx(Zn,{className:"h-5 w-5 text-blue-600 mr-3 mt-0.5"}),a.jsxs("div",{className:"text-sm text-blue-800",children:[a.jsx("p",{className:"font-medium mb-1",children:"About Voting Sessions:"}),a.jsx("p",{children:"Click on any session card to cast your votes. You can change your votes at any time before the voting period ends."})]})]})}),A==="admin"&&Di.length>0&&lr.length===0&&a.jsx("div",{className:"relative z-10 mt-8 bg-blue-50 border border-blue-200 rounded-lg p-4",children:a.jsxs("div",{className:"flex items-start",children:[a.jsx(Zn,{className:"h-5 w-5 text-blue-600 mr-3 mt-0.5"}),a.jsxs("div",{className:"text-sm text-blue-800",children:[a.jsx("p",{className:"font-medium mb-1",children:"About Voting Sessions:"}),a.jsx("p",{children:"Click on any session card to cast your votes. You can change your votes at any time before the voting period ends."})]})]})}),A==="admin"&&lr.length>0&&a.jsx("div",{className:"relative z-10 mt-8 bg-blue-50 border border-blue-200 rounded-lg p-4",children:a.jsxs("div",{className:"flex items-start",children:[a.jsx(ns,{className:"h-5 w-5 text-blue-600 mr-3 mt-0.5"}),a.jsxs("div",{className:"text-sm text-blue-800",children:[a.jsx("p",{className:"font-medium mb-1",children:"Managing Sessions:"}),a.jsx("p",{children:'Click "Email Invite to Stakeholders" on any session card to send invitation links. Use the Admins and Stakeholders buttons to manage access.'})]})]})}),A==="system-admin"&&a.jsx("div",{className:"relative z-10 mt-8 bg-purple-50 border border-purple-200 rounded-lg p-4",children:a.jsxs("div",{className:"flex items-start",children:[a.jsx(Bn,{className:"h-5 w-5 text-purple-600 mr-3 mt-0.5"}),a.jsxs("div",{className:"text-sm text-purple-900",children:[a.jsx("p",{className:"font-medium mb-1",children:"System Admin Tips:"}),a.jsxs("ul",{className:"list-disc list-inside space-y-1",children:[a.jsx("li",{children:"Use this view to audit every session across the tenant without switching teams."}),a.jsx("li",{children:"Jump into any card to open the admin dashboard and assist local admins."}),a.jsx("li",{children:"Need a quick rollout? Click Create Session above to spin up a new voting round for any product."})]})]})]})}),a.jsx(FT,{currentRole:O&&A==="system-admin"?"system-admin":A==="admin"?"session-admin":"stakeholder",onSelectStakeholder:()=>L("stakeholder"),onSelectSessionAdmin:()=>L("admin"),onSelectSystemAdmin:O?()=>L("system-admin"):void 0,showRoleToggle:or||O}),a.jsxs(hn,{isOpen:Bs,onClose:()=>{pt||qs()},title:Ne?`Email Stakeholders  ${Ne.title}`:"Email Stakeholders",maxWidth:"max-w-3xl",children:[a.jsxs("div",{className:"space-y-6",children:[Re&&a.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 text-sm rounded-lg p-3",children:Re}),ke?a.jsxs("div",{className:"py-12 flex flex-col items-center justify-center text-gray-600",children:[a.jsx("div",{className:"animate-spin rounded-full h-10 w-10 border-b-2 border-[#2D4660] mb-3"}),"Loading stakeholders..."]}):a.jsxs(a.Fragment,{children:[a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center justify-between mb-2",children:[a.jsxs("h4",{className:"text-sm font-semibold text-gray-900",children:["Stakeholders (",Tt.length,")"]}),Tt.length>0&&a.jsx("button",{type:"button",onClick:Cs,className:"text-sm font-medium text-blue-600 hover:text-blue-700",children:_t?"Deselect All":"Select All"})]}),a.jsx("div",{className:"border border-gray-200 rounded-lg max-h-64 overflow-y-auto divide-y divide-gray-100",children:Tt.length===0?a.jsx("div",{className:"p-4 text-sm text-gray-500 text-center",children:"No stakeholders are assigned to this session yet."}):Tt.map(S=>{const I=S.user_email.toLowerCase(),U=fr.includes(I);return a.jsxs("label",{className:"flex items-center justify-between px-4 py-3 cursor-pointer hover:bg-gray-50",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-medium text-gray-900",children:S.user_name||"Unnamed Stakeholder"}),a.jsx("p",{className:"text-xs text-gray-500",children:S.user_email})]}),a.jsx("button",{type:"button",onClick:()=>Ti(S.user_email),className:"flex-shrink-0",children:U?a.jsx(sr,{className:"w-5 h-5 text-green-600"}):a.jsx(c0,{className:"w-5 h-5 text-gray-400"})})]},S.id)})})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Subject"}),a.jsx("input",{type:"text",value:on,onChange:S=>xn(S.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-1 focus:ring-[#2D4660]",placeholder:"Email subject"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email Body"}),a.jsx("textarea",{value:Ns,onChange:S=>Ft(S.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-1 focus:ring-[#2D4660]",rows:10}),_s&&a.jsxs("p",{className:"text-xs text-gray-500 mt-2 break-words",children:["Invite link:",a.jsx("a",{href:_s,target:"_blank",rel:"noreferrer",className:"text-blue-600",children:_s})]})]})]})]})]}),a.jsxs("div",{className:"flex justify-end gap-3 pt-6 border-t mt-6",children:[a.jsx(nt,{variant:"secondary",onClick:qs,disabled:pt,children:"Cancel"}),a.jsx(nt,{variant:"primary",onClick:co,disabled:pt||Tt.length===0||fr.length===0,children:pt?"Sending...":`Send to ${fr.length} Stakeholder${fr.length===1?"":"s"}`})]})]}),a.jsx(hn,{isOpen:!!Pe,onClose:Ar,title:"",hideHeader:!0,maxWidth:"max-w-md",children:a.jsxs("div",{className:"text-center py-6 px-4",children:[a.jsx("div",{className:"mx-auto h-16 w-16 rounded-full bg-green-100 flex items-center justify-center mb-4",children:a.jsx(sr,{className:"h-10 w-10 text-green-600"})}),a.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-1",children:"Invites Sent!"}),a.jsxs("p",{className:"text-sm text-gray-600",children:["Successfully emailed ",(Pe==null?void 0:Pe.count)??0," stakeholder",(Pe==null?void 0:Pe.count)===1?"":"s"," for"," ",a.jsx("span",{className:"font-semibold text-gray-900",children:Pe==null?void 0:Pe.sessionTitle}),"."]}),a.jsx("div",{className:"mt-6",children:a.jsx(nt,{variant:"primary",onClick:Ar,children:"Close"})})]})}),Fe&&a.jsxs(hn,{isOpen:!0,onClose:()=>Be(null),title:"Delete Product",children:[a.jsxs("p",{className:"text-sm text-gray-700 mb-4",children:["Are you sure you want to delete ",a.jsx("span",{className:"font-semibold",children:Fe.name}),"? This will remove it for everyone in your tenant."]}),a.jsxs("div",{className:"flex justify-end gap-3",children:[a.jsx(nt,{variant:"secondary",onClick:()=>Be(null),disabled:dt,children:"Cancel"}),a.jsx(nt,{variant:"danger",onClick:Ai,disabled:dt,children:dt?"Deleting":"Delete"})]})]}),Yt&&a.jsx(hn,{isOpen:!0,onClose:()=>{qr(null),Mr(""),dr(null),Vr(!1)},title:"Edit Product",children:a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Product Name *"}),a.jsx("input",{type:"text",value:Mt,onChange:S=>Mr(S.target.value),placeholder:"Enter product name",className:"w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-0 focus:border-[#2D4660]"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Product Color"}),a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("button",{type:"button",onClick:()=>{Fr(ir||"#2D4660"),Vr(!0)},className:"block w-12 h-12 rounded-md border-2 border-gray-300 hover:border-gray-400 transition-all flex items-center justify-center overflow-hidden",style:ir?{backgroundColor:ir}:{backgroundColor:"#ffffff"},children:!ir&&a.jsx("img",{src:"/colorpicker.png",alt:"Color Picker",className:"w-8 h-8 object-contain"})}),a.jsx("span",{className:"text-sm text-gray-600",children:ir||"No color selected"})]})]}),a.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t",children:[a.jsx(nt,{variant:"secondary",onClick:()=>{qr(null),Mr(""),dr(null),Vr(!1)},disabled:Er,children:"Cancel"}),a.jsx(nt,{variant:"primary",onClick:async()=>{if(!(!(Yt!=null&&Yt.id)||!Mt.trim())){is(!0);try{await wx(Yt.id,{name:Mt.trim(),color_hex:ir});const S=(e==null?void 0:e.tenant_id)??(e==null?void 0:e.tenantId);if(S){const I=await $a(S);le(I.sort((ne,W)=>ne.name.localeCompare(W.name)));const U={},Y={};I.forEach(ne=>{U[ne.id]=ne.name||"",ne.color_hex&&(Y[ne.id]=ne.color_hex)}),K(U),z(Y)}qr(null),Mr(""),dr(null),Vr(!1),await r(),await wn()}catch(S){console.error("Error updating product:",S),alert("Failed to update product. Please try again.")}finally{is(!1)}}},disabled:Er||!Mt.trim(),children:Er?"Updating...":"Update Product"})]})]})}),Yn&&a.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",onClick:()=>Vr(!1),children:a.jsx("div",{className:"bg-white rounded-lg shadow-xl px-3 py-2 w-auto mx-4",onClick:S=>S.stopPropagation(),children:a.jsxs("div",{className:"flex gap-3 items-stretch",children:[a.jsxs("div",{className:"flex-shrink-0",style:{width:"240px",height:"260px"},children:[a.jsx("input",{id:"edit-native-color-input",type:"color",value:ks,onChange:S=>Fr(S.target.value),ref:S=>{S&&Yn&&setTimeout(()=>S.click(),50)},className:"opacity-0 absolute",style:{width:"1px",height:"1px"}}),a.jsx("div",{className:"w-full h-full"})]}),a.jsxs("button",{type:"button",onClick:()=>{dr(ks),Vr(!1)},className:"px-6 rounded-lg text-white font-bold shadow-lg hover:shadow-xl transition-all flex flex-col items-center justify-center gap-3 text-lg flex-shrink-0",style:{backgroundColor:ks,height:"260px",minWidth:"100px"},children:[a.jsx(sr,{className:"h-8 w-8"}),a.jsxs("div",{className:"text-center leading-tight",children:[a.jsx("div",{children:"Looks"}),a.jsx("div",{children:"Good"})]})]})]})})})]})}function UZ(){const{currentUser:e,setCurrentSession:t,refreshSessions:r,setCurrentUser:n}=ba(),s=zs(),i=async()=>{try{await je.auth.signOut()}catch{}try{t(null)}catch{}n(null);try{localStorage.removeItem("voting_system_current_session"),localStorage.removeItem("azureDevOpsAuthInProgress"),sessionStorage.removeItem("oauth_return_path"),sessionStorage.removeItem("oauth_action")}catch{}s("/login",{replace:!0})},[l,u]=v.useState({title:"",goal:"",votesPerUser:10,useAutoVotes:!0,startDate:new Date().toISOString().split("T")[0],endDate:new Date(Date.now()+10080*60*1e3).toISOString().split("T")[0]}),[d,m]=v.useState({}),[f,p]=v.useState(!1),[y,x]=v.useState(!1),[j,b]=v.useState([]),[k,_]=v.useState(""),[E,C]=v.useState(""),[O,T]=v.useState(!1),[A,L]=v.useState(!1),[J,H]=v.useState(null),[me,Z]=v.useState(!1),[K,ce]=v.useState(!1);v.useEffect(()=>{(async()=>{if(!e)return;const ee=await _i(e.id);Z(ee);const{data:D}=await je.from("session_admins").select("session_id").eq("user_id",e.id).limit(1);ce(D&&D.length>0)})()},[e]),v.useEffect(()=>{(async()=>{var D;if(!e){b([]),_("");return}const ee=e.tenant_id??e.tenantId??null;if(!ee){b([]),_(""),H("No tenant assigned. Products cannot be loaded.");return}T(!0),H(null);try{const q=await $a(ee);b(q),_(((D=q[0])==null?void 0:D.id)??"")}catch(q){console.error("Error loading products for create session:",q),Ba!=null&&Ba(q)?H("Products are not configured yet. Please create the `products` table in Supabase."):H("Unable to load products. You can still create a session without a product tag."),b([]),_("")}finally{T(!1)}})()},[e]);const z=()=>{const X="ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";let ee="";for(let D=0;D<8;D++)ee+=X.charAt(Math.floor(Math.random()*X.length));return ee},se=()=>{const X={};l.title.trim()||(X.title="Session title is required"),l.goal.trim()||(X.goal="Session goal is required"),l.useAutoVotes||(l.votesPerUser<1&&(X.votesPerUser="Votes per user must be at least 1"),l.votesPerUser>100&&(X.votesPerUser="Votes per user cannot exceed 100"));const ee=new Date(l.startDate);return new Date(l.endDate)<=ee&&(X.endDate="End date must be after start date"),!J&&j.length>0&&!k&&(X.product="Please select a product for this session"),m(X),Object.keys(X).length===0},B=async X=>{if(X.preventDefault(),!(!se()||!e)){p(!0);try{const ee=z(),D=j.find(Te=>Te.id===k)||null;if(D!=null&&D.id&&await nE(D.id)){m({submit:`There is already an active session for ${D.name}. Each product can only have one active session at a time.`}),p(!1);return}const q=await sE({title:l.title,goal:l.goal,votes_per_user:l.votesPerUser,use_auto_votes:l.useAutoVotes,start_date:l.startDate,end_date:l.endDate,is_active:!0,session_code:ee,product_id:(D==null?void 0:D.id)??null,product_name:null});await Ac(q.id,e.id),await r(),x(!0),setTimeout(()=>{t(q),s("/admin")},3e3)}catch(ee){console.error("Error creating session:",ee),m({submit:"Failed to create session. Please try again."})}finally{p(!1)}}},ue=async()=>{if(!e)return;const X=e.tenant_id??e.tenantId??null;if(!X){H("Cannot create products because no tenant is associated with your account.");return}const ee=E.trim();if(!ee){H("Product name is required.");return}L(!0),H(null);try{const D=await ZC(X,ee);b(q=>[...q,D].sort((we,Ce)=>we.name.localeCompare(Ce.name))),_(D.id),C("")}catch(D){console.error("Error creating product:",D),H(D instanceof Error?D.message:"Unable to create product. Please try again.")}finally{L(!1)}},oe=X=>{const{name:ee,value:D}=X.target;u(q=>({...q,[ee]:ee==="votesPerUser"?parseInt(D)||0:D})),d[ee]&&m(q=>{const Te={...q};return delete Te[ee],Te})};return y?a.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center p-4",children:a.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-8 max-w-md w-full text-center",children:[a.jsx("div",{className:"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4",children:a.jsx(sr,{className:"h-10 w-10 text-green-600"})}),a.jsx("h2",{className:"text-2xl font-bold text-[#2d4660] mb-2",children:"Session Created!"}),a.jsx("p",{className:"text-gray-600 mb-6",children:"Your voting session has been created successfully."}),a.jsxs("div",{className:"bg-blue-50 border-2 border-blue-200 rounded-lg p-4 mb-6",children:[a.jsx("p",{className:"text-sm text-gray-600 mb-2",children:"Success!"}),a.jsx("p",{className:"text-base text-[#2d4660] font-medium",children:"Your session has been created."}),a.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"You can now invite stakeholders from your session dashboard."})]}),a.jsx("p",{className:"text-sm text-gray-500",children:"Redirecting to admin dashboard..."})]})}):a.jsxs("div",{className:"container mx-auto p-4 max-w-6xl min-h-screen pb-8",children:[a.jsx("div",{className:"hidden md:flex md:justify-center mb-2",children:a.jsx("img",{src:oi,alt:"New Millennium Building Systems Logo",className:"-mt-4 cursor-pointer hover:opacity-80 transition-opacity",style:{height:"96px",width:"auto"},onClick:()=>s("/sessions")})}),a.jsxs("div",{className:"flex justify-between items-center mb-6",children:[a.jsxs("div",{className:"flex items-center",children:[a.jsx("img",{src:Sa,alt:"New Millennium Building Systems Logo",className:"mr-4 md:hidden",style:{width:"40px",height:"40px",objectFit:"contain"}}),a.jsx("button",{onClick:()=>s("/sessions"),className:"mr-2 p-1 rounded-full hover:bg-gray-200 cursor-pointer",children:a.jsx(Cd,{className:"h-6 w-6"})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("h1",{className:"text-2xl font-bold text-[#2d4660] md:text-3xl",children:"Create Voting Session"}),e&&a.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:[e.name,me&&a.jsx("span",{className:"ml-2 inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium bg-[#C89212] text-white",children:"System Admin"}),!me&&K&&a.jsx("span",{className:"ml-2 inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium bg-[#576C71] text-white",children:"Session Admin"})]})]})]}),a.jsxs("button",{onClick:i,className:"flex items-center px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-colors",children:[a.jsx(Vn,{className:"h-4 w-4 mr-2"}),a.jsx("span",{className:"hidden sm:inline",children:"Logout"})]})]}),a.jsx("div",{className:"relative z-10 bg-white rounded-lg shadow-md p-6",children:a.jsxs("form",{onSubmit:B,className:"space-y-6",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Session Title *"}),a.jsx("input",{type:"text",name:"title",value:l.title,onChange:oe,placeholder:"e.g., Q2 2025 Product Roadmap",className:`w-full px-4 py-2 border rounded-md focus:ring-2 focus:ring-[#2d4660] focus:border-transparent ${d.title?"border-red-500":"border-gray-300"}`}),d.title&&a.jsxs("p",{className:"mt-1 text-sm text-red-600 flex items-center",children:[a.jsx(Ht,{className:"h-4 w-4 mr-1"}),d.title]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Session Goal *"}),a.jsx("textarea",{name:"goal",value:l.goal,onChange:oe,rows:3,placeholder:"Describe the purpose of this voting session...",className:`w-full px-4 py-2 border rounded-md focus:ring-2 focus:ring-[#2d4660] focus:border-transparent ${d.goal?"border-red-500":"border-gray-300"}`}),d.goal&&a.jsxs("p",{className:"mt-1 text-sm text-red-600 flex items-center",children:[a.jsx(Ht,{className:"h-4 w-4 mr-1"}),d.goal]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Product *"}),O?a.jsx("p",{className:"text-sm text-gray-500",children:"Loading products..."}):j.length>0?a.jsxs("select",{value:k,onChange:X=>{_(X.target.value),d.product&&m(ee=>{const D={...ee};return delete D.product,D})},className:`w-full px-4 py-2 border rounded-md focus:ring-2 focus:ring-[#2d4660] focus:border-transparent ${d.product?"border-red-500":"border-gray-300"}`,children:[a.jsx("option",{value:"",children:"Select a product"}),j.map(X=>a.jsx("option",{value:X.id,children:X.name},X.id))]}):a.jsx("p",{className:"text-sm text-gray-500",children:J??"No products found. Add a product below to associate this session."}),d.product&&a.jsxs("p",{className:"mt-1 text-sm text-red-600 flex items-center",children:[a.jsx(Ht,{className:"h-4 w-4 mr-1"}),d.product]}),J&&j.length>0&&a.jsx("p",{className:"mt-1 text-sm text-red-600",children:J}),a.jsxs("div",{className:"mt-4",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Add a new product"}),a.jsxs("div",{className:"flex flex-col sm:flex-row gap-2",children:[a.jsx("input",{type:"text",value:E,onChange:X=>{C(X.target.value),J&&H(null)},placeholder:"e.g., Catalyst Cloud",className:"w-full px-4 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-[#2d4660] focus:border-transparent"}),a.jsx("button",{type:"button",onClick:ue,disabled:A,className:"px-4 py-2 bg-[#2d4660] text-white rounded-md hover:bg-[#1d3a53] transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:A?"Adding...":"Add Product"})]}),a.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"New products become available immediately for all session admins in your tenant."})]})]}),a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[a.jsx(Zn,{className:"h-4 w-4 inline mr-1"}),"Votes Per User *"]}),a.jsxs("div",{className:"flex items-center mb-3",children:[a.jsx("input",{type:"checkbox",id:"useAutoVotes",checked:l.useAutoVotes,onChange:X=>u(ee=>({...ee,useAutoVotes:X.target.checked})),className:"h-4 w-4 cursor-pointer rounded border-gray-300 accent-[#3A9B5C] focus:outline-none focus:ring-0"}),a.jsx("label",{htmlFor:"useAutoVotes",className:"ml-2 text-sm text-gray-700 cursor-pointer",children:"Auto-calculate votes (half of feature count, minimum 1)"})]}),!l.useAutoVotes&&a.jsxs(a.Fragment,{children:[a.jsx("input",{type:"number",name:"votesPerUser",value:l.votesPerUser,onChange:oe,min:"1",max:"100",className:`w-full px-4 py-2 border rounded-md focus:ring-2 focus:ring-[#2d4660] focus:border-transparent ${d.votesPerUser?"border-red-500":"border-gray-300"}`}),d.votesPerUser&&a.jsxs("p",{className:"mt-1 text-sm text-red-600 flex items-center",children:[a.jsx(Ht,{className:"h-4 w-4 mr-1"}),d.votesPerUser]})]}),a.jsx("p",{className:"mt-2 text-sm text-gray-500",children:l.useAutoVotes?"Votes will automatically be set to half the number of features (1 feature = 1 vote, 2 features = 1 vote, 4 features = 2 votes, etc.)":"Each stakeholder will have this many votes to distribute across features"})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[a.jsx(Zr,{className:"h-4 w-4 inline mr-1"}),"Start Date *"]}),a.jsx("input",{type:"date",name:"startDate",value:l.startDate,onChange:oe,className:"w-full px-4 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-[#2d4660] focus:border-transparent"})]}),a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[a.jsx(Zr,{className:"h-4 w-4 inline mr-1"}),"End Date *"]}),a.jsx("input",{type:"date",name:"endDate",value:l.endDate,onChange:oe,className:`w-full px-4 py-2 border rounded-md focus:ring-2 focus:ring-[#2d4660] focus:border-transparent ${d.endDate?"border-red-500":"border-gray-300"}`}),d.endDate&&a.jsxs("p",{className:"mt-1 text-sm text-red-600 flex items-center",children:[a.jsx(Ht,{className:"h-4 w-4 mr-1"}),d.endDate]})]})]}),a.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:a.jsxs("div",{className:"flex items-start",children:[a.jsx(ns,{className:"h-5 w-5 text-blue-600 mr-3 mt-0.5"}),a.jsxs("div",{className:"text-sm text-blue-800",children:[a.jsx("p",{className:"font-medium mb-1",children:"Next Steps:"}),a.jsxs("ul",{className:"list-disc list-inside space-y-1",children:[a.jsx("li",{children:"After creating the session, you'll be assigned as the admin"}),a.jsx("li",{children:"You can add stakeholders and other admins from the admin dashboard"}),a.jsx("li",{children:'Use the "Email Invite" button to send stakeholders a link to join'})]})]})]})}),d.submit&&a.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:a.jsxs("p",{className:"text-sm text-red-800 flex items-center",children:[a.jsx(Ht,{className:"h-4 w-4 mr-2"}),d.submit]})}),a.jsxs("div",{className:"flex justify-end space-x-3 pt-4 border-t",children:[a.jsx("button",{type:"button",onClick:()=>s("/sessions"),className:"px-6 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50 transition-colors",disabled:f,children:"Cancel"}),a.jsx("button",{type:"submit",className:"px-6 py-2 bg-[#2d4660] text-white rounded-md hover:bg-[#1d3a53] transition-colors disabled:opacity-50 disabled:cursor-not-allowed",disabled:f,children:f?"Creating...":"Create Session"})]})]})})]})}function BZ({products:e,value:t,onChange:r,label:n,error:s}){const[i,l]=v.useState(!1),u=v.useRef(null);v.useEffect(()=>{function f(p){u.current&&!u.current.contains(p.target)&&l(!1)}return document.addEventListener("mousedown",f),()=>document.removeEventListener("mousedown",f)},[]);const d=e.find(f=>f.id===t),m=d?qn(d.name,d.color_hex??null):null;return a.jsxs("div",{ref:u,className:"relative",children:[n&&a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:n}),a.jsxs("div",{onClick:()=>l(!i),className:`w-full px-3 py-2 border rounded-md bg-white cursor-pointer flex items-center justify-between hover:border-gray-400 ${s?"border-red-500":"border-gray-300"}`,children:[a.jsxs("div",{className:"flex items-center gap-2 flex-1 min-w-0",children:[d&&m&&a.jsx("div",{className:"w-4 h-4 rounded flex-shrink-0",style:{backgroundColor:m.background}}),a.jsx("span",{className:`text-sm truncate ${t?"text-gray-900":"text-gray-400"}`,children:d?d.name:"Select a Product"})]}),a.jsx(ts,{className:`h-4 w-4 text-gray-400 transition-transform flex-shrink-0 ${i?"transform rotate-180":""}`})]}),i&&a.jsx("div",{className:"absolute z-50 w-full mt-1 bg-white border border-gray-300 rounded-md shadow-lg max-h-60 overflow-y-auto",children:e.length===0?a.jsx("div",{className:"px-3 py-2 text-sm text-gray-500 text-center",children:"No products available"}):e.map(f=>{const p=qn(f.name,f.color_hex??null),y=t===f.id;return a.jsxs("div",{onClick:()=>{r(f.id),l(!1)},className:`px-3 py-2 cursor-pointer hover:bg-gray-50 flex items-center gap-2 ${y?"bg-gray-50":""}`,children:[a.jsx("div",{className:"w-4 h-4 rounded flex-shrink-0",style:{backgroundColor:p.background}}),a.jsx("span",{className:"text-sm text-gray-900 flex-1",children:f.name}),y&&a.jsx(sr,{className:"h-4 w-4 text-gray-400 flex-shrink-0"})]},f.id)})})]})}function WZ(){const{currentSession:e,currentUser:t,setCurrentUser:r,setCurrentSession:n}=ba(),s=zs(),i=async()=>{try{await je.auth.signOut()}catch{}try{n(null)}catch{}r(null);try{localStorage.removeItem("voting_system_current_session"),localStorage.removeItem("azureDevOpsAuthInProgress"),sessionStorage.removeItem("oauth_return_path"),sessionStorage.removeItem("oauth_action")}catch{}C(!1),s("/login",{replace:!0})},[l,u]=v.useState([]),[d,m]=v.useState(!0),[f,p]=v.useState(!1),[y,x]=v.useState({name:"",email:""}),[j,b]=v.useState({}),[k,_]=v.useState(!1),[E,C]=v.useState(!1),O=v.useRef(null),[T,A]=v.useState([]),[L,J]=v.useState(""),[H,me]=v.useState([]),[Z,K]=v.useState([]),[ce,z]=v.useState({}),[se,B]=v.useState(!1),[ue,oe]=v.useState(!1);v.useEffect(()=>{if(!E)return;const Q=R=>{O.current&&!O.current.contains(R.target)&&C(!1)};return document.addEventListener("mousedown",Q),document.addEventListener("touchstart",Q,{passive:!0}),()=>{document.removeEventListener("mousedown",Q),document.removeEventListener("touchstart",Q)}},[E]),v.useEffect(()=>{if(!e){s("/sessions");return}D(),X()},[e,s]),v.useEffect(()=>{(async()=>{if(!t)return;const R=await _i(t.id);B(R);const{data:ge}=await je.from("session_admins").select("session_id").eq("user_id",t.id).limit(1);oe(ge&&ge.length>0)})()},[t]);const X=async()=>{try{const Q=await xx(),R=await Mo(),ge=new Date,$e=Q.filter(Fe=>R.some(Be=>Be.product_id!==Fe.id?!1:new Date(Be.end_date)>=ge));A($e);const V={};$e.forEach(Fe=>{V[Fe.id]=Fe.name}),z(V)}catch(Q){console.error("Error loading products:",Q)}},ee=async Q=>{try{const R=await Mo(),ge=new Date,$e=R.filter(V=>V.product_id!==Q?!1:new Date(V.end_date)>=ge);me($e)}catch(R){console.error("Error loading sessions:",R),me([])}};v.useEffect(()=>{L?(ee(L),K([])):(me([]),K([]))},[L]);const D=async()=>{if(e){m(!0);try{const Q=await lE(e.id);u(Q)}catch(Q){console.error("Error loading stakeholders:",Q)}finally{m(!1)}}},q=Q=>/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(Q),Te=Q=>{const R=new Date,ge=new Date(Q.start_date),$e=new Date(Q.end_date);return Q.is_active&&R>=ge&&R<=$e?{text:"Active",color:"text-green-600"}:R<ge?{text:"Upcoming",color:"text-blue-600"}:{text:"Ended",color:"text-gray-500"}},we=Q=>{const R=new Date(Q.start_date),ge=new Date(Q.end_date),$e=R.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}),V=ge.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"});return`${$e} - ${V}`},Ce=async Q=>{Q.preventDefault();const R={};if(y.name.trim()||(R.name="Name is required"),y.email.trim()?q(y.email)||(R.email="Invalid email address"):R.email="Email is required",L||(R.product="Please select a product"),Z.length===0&&(R.sessions="Please select at least one session"),b(R),!(Object.keys(R).length>0)){_(!0);try{for(const ge of Z)await cE({session_id:ge,user_name:y.name,user_email:y.email,has_voted:!1});for(const ge of Z){const $e=H.find(V=>V.id===ge);if($e)try{const V=window.location.pathname.startsWith("/feature-voting-app")?"/feature-voting-app":"",Fe=`${window.location.origin}${V}/login?session=${$e.session_code}`;await Nl({to:y.email,subject:`You're invited to vote: ${$e.title}`,text:`Hi,

You've been invited to vote in "${$e.title}".

Open: ${Fe}

Best regards,
${(t==null?void 0:t.name)||""}`,html:`<p>Hi,</p><p>You've been invited to vote in <strong>${$e.title}</strong>.</p><p><a href="${Fe}">Open the Feature Voting System</a></p><p>Best regards,<br/>${(t==null?void 0:t.name)||""}</p>`})}catch{try{const V=uE($e,y.email,(t==null?void 0:t.name)||"");window.location.href=V}catch{}}}await D(),x({name:"",email:""}),J(""),K([]),p(!1),b({})}catch(ge){console.error("Error adding stakeholder:",ge),b({submit:"Failed to add stakeholder. Please try again."})}finally{_(!1)}}},le=async Q=>{if(e&&confirm("Are you sure you want to remove this stakeholder?"))try{await Zv(e.id,Q),await D()}catch(R){console.error("Error removing stakeholder:",R),alert("Failed to remove stakeholder")}},de=Q=>{const ge=Q.split("T")[0].split(" ")[0].split("-");let $e;if(ge.length===3){const V=parseInt(ge[0],10),Fe=parseInt(ge[1],10)-1,Be=parseInt(ge[2],10);$e=new Date(V,Fe,Be);const dt=Q.match(/T(\d{2}):(\d{2}):(\d{2})/);dt&&$e.setHours(parseInt(dt[1],10),parseInt(dt[2],10),parseInt(dt[3],10))}else $e=new Date(Q);return $e.toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})};return e?d?a.jsx("div",{className:"min-h-screen w-full bg-gray-50 flex items-center justify-center",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-[#2d4660] mx-auto mb-4"}),a.jsx("p",{className:"text-gray-600",children:"Loading stakeholders..."})]})}):a.jsxs("div",{className:"container mx-auto p-4 max-w-6xl min-h-screen pb-8",children:[a.jsx("div",{className:"hidden md:flex md:justify-center mb-2",children:a.jsx("img",{src:oi,alt:"New Millennium Building Systems Logo",className:"-mt-4 cursor-pointer hover:opacity-80 transition-opacity",style:{height:"96px",width:"auto"},onClick:()=>s("/sessions")})}),a.jsxs("div",{className:"flex justify-between items-center mb-6",children:[a.jsxs("div",{className:"flex items-center",children:[a.jsx("img",{src:Sa,alt:"New Millennium Building Systems Logo",className:"mr-4 md:hidden",style:{width:"40px",height:"40px",objectFit:"contain"}}),a.jsx("button",{onClick:()=>s("/admin"),className:"mr-2 p-1 rounded-full hover:bg-gray-200 cursor-pointer",children:a.jsx(Cd,{className:"h-6 w-6"})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("h1",{className:"text-2xl font-bold text-[#2d4660] md:text-3xl",children:"Manage Stakeholders"}),t&&a.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:[t.name,se&&a.jsx("span",{className:"ml-2 inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium bg-[#C89212] text-white",children:"System Admin"}),!se&&ue&&a.jsx("span",{className:"ml-2 inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium bg-[#576C71] text-white",children:"Session Admin"})]})]})]}),a.jsxs("div",{ref:O,className:"relative z-40",children:[a.jsxs("div",{className:"hidden md:flex space-x-2",children:[a.jsxs("button",{onClick:()=>s("/admin"),className:"flex items-center px-4 py-2 bg-[#4f6d8e] text-white rounded-lg hover:bg-[#3d5670] transition-colors",children:[a.jsx(An,{className:"h-4 w-4 mr-2"}),"Admin Dashboard"]}),a.jsxs("button",{onClick:()=>p(!0),className:"flex items-center px-4 py-2 bg-[#c59f2d] text-white rounded-lg hover:bg-[#a88a26] transition-colors",children:[a.jsx(xl,{className:"h-4 w-4 mr-2"}),"Add Stakeholder"]}),a.jsxs("button",{onClick:i,className:"flex items-center px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-colors",children:[a.jsx(Vn,{className:"h-4 w-4 mr-2"}),"Logout"]})]}),a.jsx("div",{className:"flex md:hidden",children:a.jsx("button",{onClick:()=>C(!E),className:"p-2 rounded-md border border-gray-200 bg-white shadow-sm","aria-label":"Open menu",children:a.jsx(ei,{className:"h-5 w-5 text-gray-700"})})}),E&&a.jsx("div",{className:"absolute right-0 mt-2 w-56 bg-white border border-gray-200 rounded-lg shadow-lg md:hidden z-50",children:a.jsxs("div",{className:"py-1",children:[a.jsxs("button",{onClick:()=>{C(!1),s("/admin")},className:"w-full px-3 py-2 flex items-center text-left hover:bg-gray-50",children:[a.jsx(An,{className:"h-4 w-4 mr-2 text-gray-700"}),"Admin Dashboard"]}),a.jsxs("button",{onClick:()=>{C(!1),p(!0)},className:"w-full px-3 py-2 flex items-center text-left hover:bg-gray-50",children:[a.jsx(xl,{className:"h-4 w-4 mr-2 text-gray-700"}),"Add Stakeholder"]}),a.jsxs("button",{onClick:()=>{C(!1),i()},className:"w-full px-3 py-2 flex items-center text-left hover:bg-gray-50",children:[a.jsx(Vn,{className:"h-4 w-4 mr-2 text-gray-700"}),"Logout"]})]})})]})]}),a.jsx("div",{className:"relative z-10 bg-white rounded-lg shadow-md p-4 mb-6",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"text-lg font-semibold text-[#2d4660]",children:"Current Session"}),a.jsx("p",{className:"text-gray-600 mt-1",children:e.title})]}),a.jsxs("div",{className:"text-right",children:[a.jsx("p",{className:"text-sm text-gray-600",children:"Total Stakeholders"}),a.jsx("p",{className:"text-2xl font-bold text-[#2d4660]",children:l.length})]})]})}),a.jsxs("div",{className:"relative z-10 bg-white rounded-lg shadow-md overflow-hidden",children:[a.jsxs("div",{className:"p-6 border-b border-gray-200",children:[a.jsxs("h2",{className:"text-lg font-semibold text-[#2d4660]",children:["Stakeholders (",l.length,")"]}),a.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Manage who can vote in this session"})]}),l.length===0?a.jsxs("div",{className:"p-12 text-center",children:[a.jsx(gs,{className:"mx-auto h-12 w-12 text-gray-400"}),a.jsx("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"No stakeholders"}),a.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Get started by adding stakeholders to this voting session."}),a.jsx("div",{className:"mt-6",children:a.jsxs("button",{onClick:()=>p(!0),className:"inline-flex items-center px-4 py-2 bg-[#2d4660] text-white rounded-md hover:bg-[#1d3a53] transition-colors",children:[a.jsx(xl,{className:"h-5 w-5 mr-2"}),"Add First Stakeholder"]})})]}):a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[a.jsx("thead",{className:"bg-gray-50",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Name"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Email"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Voting Status"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Added"}),a.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),a.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:l.map(Q=>a.jsxs("tr",{className:"hover:bg-gray-50",children:[a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsxs("div",{className:"flex items-center",children:[a.jsx(gs,{className:"h-5 w-5 text-gray-400 mr-2"}),a.jsx("span",{className:"text-sm font-medium text-gray-900",children:Q.user_name})]})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsxs("div",{className:"flex items-center text-sm text-gray-500",children:[a.jsx(Jc,{className:"h-4 w-4 mr-2"}),Q.user_email]})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:Q.has_voted?a.jsxs("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800",children:[a.jsx(sr,{className:"h-3 w-3 mr-1"}),"Voted"]}):a.jsxs("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-gray-100 text-gray-800",children:[a.jsx(Am,{className:"h-3 w-3 mr-1"}),"Pending"]})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:de(Q.created_at)}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:a.jsx("button",{onClick:()=>le(Q.user_email),className:"text-red-600 hover:text-red-900",children:a.jsx(Xi,{className:"h-5 w-5"})})})]},Q.id))})]})})]}),f&&a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:a.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-md w-full max-h-[90vh] overflow-y-auto",children:[a.jsxs("div",{className:"flex justify-between items-center mb-4",children:[a.jsx("h3",{className:"text-lg font-medium text-[#2d4660]",children:"Add Stakeholder"}),a.jsx("button",{onClick:()=>{p(!1),x({name:"",email:""}),J(""),K([]),b({})},className:"text-gray-400 hover:text-gray-500",children:a.jsx(Ms,{className:"h-5 w-5"})})]}),a.jsxs("form",{onSubmit:Ce,className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Name *"}),a.jsx("input",{type:"text",value:y.name,onChange:Q=>x(R=>({...R,name:Q.target.value})),className:`w-full px-3 py-2 border rounded-md focus:ring-2 focus:ring-[#2d4660] focus:border-transparent ${j.name?"border-red-500":"border-gray-300"}`,placeholder:"John Doe"}),j.name&&a.jsxs("p",{className:"mt-1 text-sm text-red-600 flex items-center",children:[a.jsx(Ht,{className:"h-4 w-4 mr-1"}),j.name]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email *"}),a.jsx("input",{type:"email",value:y.email,onChange:Q=>x(R=>({...R,email:Q.target.value})),className:`w-full px-3 py-2 border rounded-md focus:ring-2 focus:ring-[#2d4660] focus:border-transparent ${j.email?"border-red-500":"border-gray-300"}`,placeholder:"john@example.com"}),j.email&&a.jsxs("p",{className:"mt-1 text-sm text-red-600 flex items-center",children:[a.jsx(Ht,{className:"h-4 w-4 mr-1"}),j.email]})]}),a.jsxs("div",{children:[a.jsx(BZ,{products:T,value:L,onChange:J,label:"Product *",error:!!j.product}),j.product&&a.jsxs("p",{className:"mt-1 text-sm text-red-600 flex items-center",children:[a.jsx(Ht,{className:"h-4 w-4 mr-1"}),j.product]})]}),L&&a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Sessions * (Current and Future)"}),H.length===0?a.jsx("p",{className:"text-sm text-gray-500",children:"No current or future sessions found for this product."}):a.jsx("div",{className:"max-h-48 overflow-y-auto border border-gray-300 rounded-md p-2",children:H.map(Q=>a.jsxs("label",{className:"flex items-start px-3 py-2 hover:bg-gray-50 cursor-pointer border-b border-gray-100 last:border-b-0",children:[a.jsx("input",{type:"checkbox",checked:Z.includes(Q.id),onChange:R=>{R.target.checked?K(ge=>[...ge,Q.id]):K(ge=>ge.filter($e=>$e!==Q.id))},className:"w-4 h-4 border-gray-300 rounded focus:ring-[#2D4660] accent-green-600 mt-1",style:{accentColor:"#16a34a"}}),a.jsxs("div",{className:"ml-3 flex-1",children:[a.jsx("div",{className:"text-sm font-medium text-gray-900",children:Q.title}),a.jsx("div",{className:"text-xs text-gray-500 mt-0.5",children:we(Q)}),a.jsx("div",{className:"text-xs mt-0.5",children:a.jsx("span",{className:`font-medium ${Te(Q).color}`,children:Te(Q).text})})]})]},Q.id))}),j.sessions&&a.jsxs("p",{className:"mt-1 text-sm text-red-600 flex items-center",children:[a.jsx(Ht,{className:"h-4 w-4 mr-1"}),j.sessions]})]}),j.submit&&a.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-3",children:a.jsxs("p",{className:"text-sm text-red-800 flex items-center",children:[a.jsx(Ht,{className:"h-4 w-4 mr-2"}),j.submit]})}),a.jsxs("div",{className:"flex justify-end space-x-2 pt-4",children:[a.jsx("button",{type:"button",onClick:()=>{p(!1),x({name:"",email:""}),J(""),K([]),b({})},className:"px-4 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50",disabled:k,children:"Cancel"}),a.jsx("button",{type:"submit",className:"px-4 py-2 bg-[#2d4660] text-white rounded-md hover:bg-[#1d3a53] disabled:opacity-50",disabled:k,children:k?"Adding...":"Add Stakeholder"})]})]})]})})]}):null}function qZ(){const{currentSession:e,currentUser:t,setCurrentUser:r,setCurrentSession:n}=ba(),s=zs(),i=async()=>{try{await je.auth.signOut()}catch{}try{n(null)}catch{}r(null);try{localStorage.removeItem("voting_system_current_session"),localStorage.removeItem("azureDevOpsAuthInProgress"),sessionStorage.removeItem("oauth_return_path"),sessionStorage.removeItem("oauth_action")}catch{}C(!1),s("/login",{replace:!0})},[l,u]=v.useState([]),[d,m]=v.useState(!0),[f,p]=v.useState(!1),[y,x]=v.useState({email:""}),[j,b]=v.useState({}),[k,_]=v.useState(!1),[E,C]=v.useState(!1),O=v.useRef(null),[T,A]=v.useState(!1),[L,J]=v.useState(!1);v.useEffect(()=>{if(!E)return;const z=se=>{O.current&&!O.current.contains(se.target)&&C(!1)};return document.addEventListener("mousedown",z),document.addEventListener("touchstart",z,{passive:!0}),()=>{document.removeEventListener("mousedown",z),document.removeEventListener("touchstart",z)}},[E]),v.useEffect(()=>{if(!e){s("/sessions");return}H()},[e,s]),v.useEffect(()=>{(async()=>{if(!t)return;const se=await _i(t.id);A(se);const{data:B}=await je.from("session_admins").select("session_id").eq("user_id",t.id).limit(1);J(B&&B.length>0)})()},[t]);const H=async()=>{if(e){m(!0);try{const z=await aE(e.id);u(z)}catch(z){console.error("Error loading admins:",z)}finally{m(!1)}}},me=z=>/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(z),Z=async z=>{z.preventDefault();const se={};if(y.email.trim()?me(y.email)||(se.email="Invalid email address"):se.email="Email is required",l.some(B=>B.user.email.toLowerCase()===y.email.toLowerCase())&&(se.email="This user is already an admin"),b(se),!(Object.keys(se).length>0)&&e){_(!0);try{const B=y.email.split("@")[0].replace(/\./g," ");await vR(e.id,y.email,B);try{const ue=window.location.pathname.startsWith("/feature-voting-app")?"/feature-voting-app":"",oe=`${window.location.origin}${ue}/login?session=${e.session_code}`;await Nl({to:y.email,subject:`You're invited to administer: ${e.title}`,text:`Hi,

You've been added as an admin for "${e.title}".

Open: ${oe}

Best regards,
${(t==null?void 0:t.name)||""}`,html:`<p>Hi,</p><p>You've been added as an admin for <strong>${e.title}</strong>.</p><p><a href="${oe}">Open the Feature Voting System</a></p><p>Best regards,<br/>${(t==null?void 0:t.name)||""}</p>`})}catch{try{const ue=uE(e,y.email,(t==null?void 0:t.name)||"");window.location.href=ue}catch{}}await H(),x({email:""}),p(!1)}catch(B){console.error("Error adding admin:",B),b({submit:"Failed to add admin. Please try again."})}finally{_(!1)}}},K=async z=>{if(e){if(l.length===1){alert("Cannot remove the last admin. Sessions must have at least one admin.");return}if(z===(t==null?void 0:t.id)){alert("You cannot remove yourself as an admin.");return}if(confirm("Are you sure you want to remove this admin?"))try{await Qv(e.id,z),await H()}catch(se){console.error("Error removing admin:",se),alert("Failed to remove admin")}}},ce=z=>{const B=z.split("T")[0].split(" ")[0].split("-");let ue;if(B.length===3){const oe=parseInt(B[0],10),X=parseInt(B[1],10)-1,ee=parseInt(B[2],10);ue=new Date(oe,X,ee);const D=z.match(/T(\d{2}):(\d{2}):(\d{2})/);D&&ue.setHours(parseInt(D[1],10),parseInt(D[2],10),parseInt(D[3],10))}else ue=new Date(z);return ue.toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})};return e?d?a.jsx("div",{className:"min-h-screen w-full bg-gray-50 flex items-center justify-center",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-[#2d4660] mx-auto mb-4"}),a.jsx("p",{className:"text-gray-600",children:"Loading admins..."})]})}):a.jsxs("div",{className:"container mx-auto p-4 max-w-6xl min-h-screen pb-8",children:[a.jsx("div",{className:"hidden md:flex md:justify-center mb-2",children:a.jsx("img",{src:oi,alt:"New Millennium Building Systems Logo",className:"-mt-4 cursor-pointer hover:opacity-80 transition-opacity",style:{height:"96px",width:"auto"},onClick:()=>s("/sessions")})}),a.jsxs("div",{className:"flex justify-between items-center mb-6",children:[a.jsxs("div",{className:"flex items-center",children:[a.jsx("img",{src:Sa,alt:"New Millennium Building Systems Logo",className:"mr-4 md:hidden",style:{width:"40px",height:"40px",objectFit:"contain"}}),a.jsx("button",{onClick:()=>s("/admin"),className:"mr-2 p-1 rounded-full hover:bg-gray-200 cursor-pointer",children:a.jsx(Cd,{className:"h-6 w-6"})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("h1",{className:"text-2xl font-bold text-[#2d4660] md:text-3xl",children:"Session Admins"}),t&&a.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:[t.name,T&&a.jsx("span",{className:"ml-2 inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium bg-[#C89212] text-white",children:"System Admin"}),!T&&L&&a.jsx("span",{className:"ml-2 inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium bg-[#576C71] text-white",children:"Session Admin"})]})]})]}),a.jsxs("div",{ref:O,className:"relative z-40",children:[a.jsxs("div",{className:"hidden md:flex space-x-2",children:[a.jsxs("button",{onClick:()=>s("/admin"),className:"flex items-center px-4 py-2 bg-[#4f6d8e] text-white rounded-lg hover:bg-[#3d5670] transition-colors",children:[a.jsx(An,{className:"h-4 w-4 mr-2"}),"Admin Dashboard"]}),a.jsxs("button",{onClick:()=>p(!0),className:"flex items-center px-4 py-2 bg-[#c59f2d] text-white rounded-lg hover:bg-[#a88a26] transition-colors",children:[a.jsx(xl,{className:"h-4 w-4 mr-2"}),"Add Admin"]}),a.jsxs("button",{onClick:i,className:"flex items-center px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-colors",children:[a.jsx(Vn,{className:"h-4 w-4 mr-2"}),"Logout"]})]}),a.jsx("div",{className:"flex md:hidden",children:a.jsx("button",{onClick:()=>C(!E),className:"p-2 rounded-md border border-gray-200 bg-white shadow-sm","aria-label":"Open menu",children:a.jsx(ei,{className:"h-5 w-5 text-gray-700"})})}),E&&a.jsx("div",{className:"absolute right-0 mt-2 w-56 bg-white border border-gray-200 rounded-lg shadow-lg md:hidden z-50",children:a.jsxs("div",{className:"py-1",children:[a.jsxs("button",{onClick:()=>{C(!1),s("/admin")},className:"w-full px-3 py-2 flex items-center text-left hover:bg-gray-50",children:[a.jsx(An,{className:"h-4 w-4 mr-2 text-gray-700"}),"Admin Dashboard"]}),a.jsxs("button",{onClick:()=>{C(!1),p(!0)},className:"w-full px-3 py-2 flex items-center text-left hover:bg-gray-50",children:[a.jsx(xl,{className:"h-4 w-4 mr-2 text-gray-700"}),"Add Admin"]}),a.jsxs("button",{onClick:()=>{C(!1),i()},className:"w-full px-3 py-2 flex items-center text-left hover:bg-gray-50",children:[a.jsx(Vn,{className:"h-4 w-4 mr-2 text-gray-700"}),"Logout"]})]})})]})]}),a.jsx("div",{className:"relative z-10 bg-white rounded-lg shadow-md p-4 mb-6",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"text-lg font-semibold text-[#2d4660]",children:"Current Session"}),a.jsx("p",{className:"text-gray-600 mt-1",children:e.title})]}),a.jsxs("div",{className:"text-right",children:[a.jsx("p",{className:"text-sm text-gray-600",children:"Total Admins"}),a.jsx("p",{className:"text-2xl font-bold text-[#2d4660]",children:l.length})]})]})}),a.jsxs("div",{className:"relative z-10 bg-white rounded-lg shadow-md overflow-hidden",children:[a.jsxs("div",{className:"p-6 border-b border-gray-200",children:[a.jsxs("h2",{className:"text-lg font-semibold text-[#2d4660]",children:["Session Admins (",l.length,")"]}),a.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Manage who can administer this voting session"})]}),a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[a.jsx("thead",{className:"bg-gray-50",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Name"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Email"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Added"}),a.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),a.jsx("tbody",{className:"relative z-10 bg-white divide-y divide-gray-200",children:l.map(z=>a.jsxs("tr",{className:"hover:bg-gray-50",children:[a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsxs("div",{className:"flex items-center",children:[a.jsx(Bn,{className:"h-5 w-5 text-blue-500 mr-2"}),a.jsxs("span",{className:"text-sm font-medium text-gray-900",children:[z.user.name,z.user.id===(t==null?void 0:t.id)&&a.jsx("span",{className:"ml-2 text-xs text-gray-500",children:"(You)"})]})]})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsxs("div",{className:"flex items-center text-sm text-gray-500",children:[a.jsx(Jc,{className:"h-4 w-4 mr-2"}),z.user.email]})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:ce(z.created_at)}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:a.jsx("button",{onClick:()=>K(z.user_id),className:`text-red-600 hover:text-red-900 ${z.user.id===(t==null?void 0:t.id)||l.length===1?"opacity-50 cursor-not-allowed":""}`,disabled:z.user.id===(t==null?void 0:t.id)||l.length===1,title:z.user.id===(t==null?void 0:t.id)?"You cannot remove yourself":l.length===1?"Cannot remove the last admin":"Remove admin",children:a.jsx(Xi,{className:"h-5 w-5"})})})]},z.id))})]})})]}),a.jsx("div",{className:"relative z-10 mt-6 bg-blue-50 border border-blue-200 rounded-lg p-4",children:a.jsxs("div",{className:"flex items-start",children:[a.jsx(Bn,{className:"h-5 w-5 text-blue-600 mr-3 mt-0.5"}),a.jsxs("div",{className:"text-sm text-blue-800",children:[a.jsx("p",{className:"font-medium mb-1",children:"Session Admin Permissions:"}),a.jsxs("ul",{className:"list-disc list-inside space-y-1",children:[a.jsx("li",{children:"Manage features and voting settings for this session"}),a.jsx("li",{children:"Add and remove stakeholders for this session"}),a.jsx("li",{children:"View voting results and analytics for this session"}),a.jsx("li",{children:"Add and remove other session admins"})]}),a.jsx("p",{className:"mt-2 text-xs italic",children:"Note: System Admins have full admin access to all sessions in the system."})]})]})}),f&&a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:a.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-md w-full",children:[a.jsxs("div",{className:"flex justify-between items-center mb-4",children:[a.jsx("h3",{className:"text-lg font-medium text-[#2d4660]",children:"Add Session Admin"}),a.jsx("button",{onClick:()=>{p(!1),x({email:""}),b({})},className:"text-gray-400 hover:text-gray-500",children:a.jsx(Ms,{className:"h-5 w-5"})})]}),a.jsxs("form",{onSubmit:Z,className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email Address *"}),a.jsx("input",{type:"email",value:y.email,onChange:z=>x(se=>({...se,email:z.target.value})),className:`w-full px-3 py-2 border rounded-md focus:ring-2 focus:ring-[#2d4660] focus:border-transparent ${j.email?"border-red-500":"border-gray-300"}`,placeholder:"admin@example.com"}),j.email&&a.jsxs("p",{className:"mt-1 text-sm text-red-600 flex items-center",children:[a.jsx(Ht,{className:"h-4 w-4 mr-1"}),j.email]})]}),j.submit&&a.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-3",children:a.jsxs("p",{className:"text-sm text-red-800 flex items-center",children:[a.jsx(Ht,{className:"h-4 w-4 mr-2"}),j.submit]})}),a.jsxs("div",{className:"flex justify-end space-x-2 pt-4",children:[a.jsx("button",{type:"button",onClick:()=>{p(!1),x({email:""}),b({})},className:"px-4 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50",disabled:k,children:"Cancel"}),a.jsx("button",{type:"submit",className:"px-4 py-2 bg-[#2d4660] text-white rounded-md hover:bg-[#1d3a53] disabled:opacity-50",disabled:k,children:k?"Adding...":"Add Admin"})]})]})]})})]}):null}function VZ(){const{currentUser:e,sessions:t}=ba(),r=zs(),[n,s]=v.useState([]),[i,l]=v.useState(!0),[u,d]=v.useState(!1);v.useEffect(()=>{m()},[t]);const m=async()=>{l(!0);try{const y=new Set;for(const x of t)(await aE(x.id)).forEach(b=>{b.user&&b.user.email&&y.add(b.user.email)});s(Array.from(y))}catch(y){console.error("Error loading admin emails:",y)}finally{l(!1)}},f=()=>{const y=encodeURIComponent(" Request: Add me to Feature Voting System"),x=encodeURIComponent(`Hi Team,

I tried to access the Feature Voting System but don't have admin permissions yet.

Could you please add me to the system so I can participate in voting?

My details:
Name: ${(e==null?void 0:e.name)||"Unknown"}
Email: ${(e==null?void 0:e.email)||"Unknown"}

Thanks!
${(e==null?void 0:e.name)||"A hopeful voter"} `),j=n.length>0?`mailto:${n.join(",")}?subject=${y}&body=${x}`:`mailto:?subject=${y}&body=${x}`;window.location.href=j,d(!0)},p=()=>{r("/login")};return i?a.jsx("div",{className:"min-h-screen w-full bg-gray-50 flex items-center justify-center",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-[#2d4660] mx-auto mb-4"}),a.jsx("p",{className:"text-gray-600",children:"Loading..."})]})}):a.jsx("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 to-gray-100 flex items-center justify-center p-4",children:a.jsxs("div",{className:"max-w-md w-full",children:[a.jsx("div",{className:"text-center mb-8",children:a.jsx("img",{src:oi,alt:"New Millennium Building Systems Logo",className:"mx-auto cursor-pointer hover:opacity-80 transition-opacity",style:{height:"80px",width:"auto"},onClick:()=>r("/sessions")})}),a.jsxs("div",{className:"relative z-10 bg-white rounded-xl shadow-lg overflow-hidden",children:[a.jsxs("div",{className:"bg-gradient-to-r from-[#2d4660] to-[#1d3a53] p-6 text-center",children:[a.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-white/10 rounded-full mb-4",children:a.jsx(uF,{className:"h-8 w-8 text-white"})}),a.jsx("h1",{className:"text-2xl font-bold text-white mb-2",children:"Whoa There, Speedracer! "}),a.jsx("p",{className:"text-blue-100 text-sm",children:"You need access to the Feature Voting System"})]}),a.jsx("div",{className:"p-6",children:u?a.jsx(a.Fragment,{children:a.jsxs("div",{className:"text-center py-4",children:[a.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-green-100 rounded-full mb-4",children:a.jsx(sr,{className:"h-8 w-8 text-green-600"})}),a.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-2",children:"Email Sent! "}),a.jsx("p",{className:"text-gray-600 mb-6",children:"Your access request has been sent to the admin team. They'll get you set up soon!"}),a.jsxs("button",{onClick:p,className:"inline-flex items-center px-4 py-2 bg-[#2d4660] text-white rounded-lg hover:bg-[#1d3a53] transition-colors",children:[a.jsx(qS,{className:"h-4 w-4 mr-2"}),"Back to Login"]})]})}):a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"mb-6",children:[a.jsx("p",{className:"text-gray-600 mb-4",children:"Looks like you're trying to access the Feature Voting System, but you haven't been added yet."}),a.jsx("p",{className:"text-gray-600 mb-4",children:"No worries! Click the button below to send a quick message to the admins asking to be added."}),a.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:a.jsxs("div",{className:"flex items-start",children:[a.jsx(ns,{className:"h-5 w-5 text-blue-600 mr-2 mt-0.5 flex-shrink-0"}),a.jsx("div",{className:"text-sm text-blue-800",children:n.length>0?a.jsxs(a.Fragment,{children:[a.jsx("p",{className:"font-medium mb-1",children:"Your message will be sent to:"}),a.jsx("p",{className:"text-xs",children:n.join(", ")})]}):a.jsx("p",{children:"Your message will help the admin team get you set up!"})})]})})]}),a.jsxs("div",{className:"space-y-3",children:[a.jsxs("button",{onClick:f,className:"w-full flex items-center justify-center px-4 py-3 bg-[#c59f2d] text-white rounded-lg hover:bg-[#a88a26] transition-colors font-medium",children:[a.jsx(Jc,{className:"h-5 w-5 mr-2"}),"Request Access from Admins"]}),a.jsxs("button",{onClick:p,className:"w-full flex items-center justify-center px-4 py-3 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-colors",children:[a.jsx(qS,{className:"h-4 w-4 mr-2"}),"Back to Login"]})]})]})})]}),a.jsx("div",{className:"mt-6 text-center",children:a.jsx("p",{className:"text-sm text-gray-500",children:"Once you're added to the system, you'll be able to participate in voting sessions."})})]})})}function HZ(){const{currentUser:e,setCurrentUser:t,setCurrentSession:r}=ba(),n=zs(),s=async()=>{try{await je.auth.signOut()}catch{}try{r(null)}catch{}t(null);try{localStorage.removeItem("voting_system_current_session"),localStorage.removeItem("azureDevOpsAuthInProgress"),sessionStorage.removeItem("oauth_return_path"),sessionStorage.removeItem("oauth_action")}catch{}E(!1),n("/login",{replace:!0})},[i,l]=v.useState([]),[u,d]=v.useState(!0),[m,f]=v.useState(!1),[p,y]=v.useState({email:""}),[x,j]=v.useState({}),[b,k]=v.useState(!1),[_,E]=v.useState(!1),C=v.useRef(null),[O,T]=v.useState(!1),[A,L]=v.useState(!1);v.useEffect(()=>{if(!_)return;const ce=z=>{C.current&&!C.current.contains(z.target)&&E(!1)};return document.addEventListener("mousedown",ce),document.addEventListener("touchstart",ce,{passive:!0}),()=>{document.removeEventListener("mousedown",ce),document.removeEventListener("touchstart",ce)}},[_]),v.useEffect(()=>{J()},[]),v.useEffect(()=>{(async()=>{if(!e)return;const z=await _i(e.id);T(z);const{data:se}=await je.from("session_admins").select("session_id").eq("user_id",e.id).limit(1);L(se&&se.length>0)})()},[e]);const J=async()=>{d(!0);try{let ce=await e0();ce.length===0&&e&&(console.log("No system admins found. Adding current user as first system admin..."),await Nh(e.id),ce=await e0()),l(ce)}catch(ce){console.error("Error loading system admins:",ce)}finally{d(!1)}},H=ce=>/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(ce),me=async ce=>{ce.preventDefault();const z={};if(p.email.trim()?H(p.email)||(z.email="Invalid email address"):z.email="Email is required",i.some(se=>se.user.email.toLowerCase()===p.email.toLowerCase())&&(z.email="This user is already a system admin"),j(z),!(Object.keys(z).length>0)){k(!0);try{const se=p.email.split("@")[0].replace(/\./g," "),B=await ml(p.email,se);await Nh(B.id);try{const ue=window.location.pathname.startsWith("/feature-voting-app")?"/feature-voting-app":"",oe=`${window.location.origin}${ue}/login`;await Nl({to:p.email,subject:"You're a System Admin: Feature Voting System",text:`Hi,

You've been granted System Admin access to the Feature Voting System.

Login: ${oe}

Best regards,
System`,html:`<p>Hi,</p><p>You've been granted <strong>System Admin</strong> access to the Feature Voting System.</p><p><a href="${oe}">Login</a></p><p>Best regards,<br/>System</p>`})}catch{try{const ue=window.location.pathname.startsWith("/feature-voting-app")?"/feature-voting-app":"",oe=`${window.location.origin}${ue}/login`,X=encodeURIComponent("You're a System Admin: Feature Voting System"),ee=encodeURIComponent(`Hi,

You've been granted System Admin access to the Feature Voting System.

To sign in, use this link:

${oe}

Best regards,
System`);window.location.href=`mailto:${encodeURIComponent(p.email)}?subject=${X}&body=${ee}`}catch{}}await J(),y({email:""}),f(!1)}catch(se){console.error("Error adding system admin:",se),j({submit:"Failed to add system admin. Please try again."})}finally{k(!1)}}},Z=async ce=>{const z=i.reduce((se,B)=>new Date(B.created_at)<new Date(se.created_at)?B:se);if(ce===z.user_id){alert("Cannot remove the original system admin. This protects against accidentally locking everyone out of the system.");return}if(i.length===1){alert("Cannot remove the last system admin. The system must have at least one admin.");return}if(ce===(e==null?void 0:e.id)){alert("You cannot remove yourself as a system admin.");return}if(confirm("Are you sure you want to remove this system admin?"))try{await t0(ce),await J()}catch(se){console.error("Error removing system admin:",se),alert("Failed to remove system admin")}},K=ce=>{const se=ce.split("T")[0].split(" ")[0].split("-");let B;if(se.length===3){const ue=parseInt(se[0],10),oe=parseInt(se[1],10)-1,X=parseInt(se[2],10);B=new Date(ue,oe,X);const ee=ce.match(/T(\d{2}):(\d{2}):(\d{2})/);ee&&B.setHours(parseInt(ee[1],10),parseInt(ee[2],10),parseInt(ee[3],10))}else B=new Date(ce);return B.toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})};return u?a.jsx("div",{className:"min-h-screen w-full bg-gray-50 flex items-center justify-center",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-[#2d4660] mx-auto mb-4"}),a.jsx("p",{className:"text-gray-600",children:"Loading system admins..."})]})}):a.jsxs("div",{className:"container mx-auto p-4 max-w-6xl min-h-screen pb-8",children:[a.jsx("div",{className:"hidden md:flex md:justify-center mb-2",children:a.jsx("img",{src:oi,alt:"New Millennium Building Systems Logo",className:"-mt-4 cursor-pointer hover:opacity-80 transition-opacity",style:{height:"96px",width:"auto"},onClick:()=>n("/sessions")})}),a.jsxs("div",{className:"flex justify-between items-center mb-6",children:[a.jsxs("div",{className:"flex items-center",children:[a.jsx("img",{src:Sa,alt:"New Millennium Building Systems Logo",className:"mr-4 md:hidden",style:{width:"40px",height:"40px",objectFit:"contain"}}),a.jsx("button",{onClick:()=>n("/sessions"),className:"mr-2 p-1 rounded-full hover:bg-gray-200 cursor-pointer",children:a.jsx(Cd,{className:"h-6 w-6"})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("h1",{className:"text-2xl font-bold text-[#2d4660] md:text-3xl",children:"System Admins"}),e&&a.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:[e.name,O&&a.jsx("span",{className:"ml-2 inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium bg-[#C89212] text-white",children:"System Admin"}),!O&&A&&a.jsx("span",{className:"ml-2 inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium bg-[#576C71] text-white",children:"Session Admin"})]})]})]}),a.jsxs("div",{ref:C,className:"relative z-40",children:[a.jsxs("div",{className:"hidden md:flex space-x-2",children:[a.jsxs("button",{onClick:()=>n("/sessions"),className:"flex items-center px-4 py-2 bg-[#4f6d8e] text-white rounded-lg hover:bg-[#3d5670] transition-colors",children:[a.jsx(An,{className:"h-4 w-4 mr-2"}),"My Sessions"]}),a.jsxs("button",{onClick:()=>f(!0),className:"flex items-center px-4 py-2 bg-[#c59f2d] text-white rounded-lg hover:bg-[#a88a26] transition-colors",children:[a.jsx(xl,{className:"h-4 w-4 mr-2"}),"Add System Admin"]}),a.jsxs("button",{onClick:s,className:"flex items-center px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-colors",children:[a.jsx(Vn,{className:"h-4 w-4 mr-2"}),"Logout"]})]}),a.jsx("div",{className:"flex md:hidden",children:a.jsx("button",{onClick:()=>E(!_),className:"p-2 rounded-md border border-gray-200 bg-white shadow-sm","aria-label":"Open menu",children:a.jsx(ei,{className:"h-5 w-5 text-gray-700"})})}),_&&a.jsx("div",{className:"absolute right-0 mt-2 w-56 bg-white border border-gray-200 rounded-lg shadow-lg md:hidden z-50",children:a.jsxs("div",{className:"py-1",children:[a.jsxs("button",{onClick:()=>{E(!1),n("/sessions")},className:"w-full px-3 py-2 flex items-center text-left hover:bg-gray-50",children:[a.jsx(An,{className:"h-4 w-4 mr-2 text-gray-700"}),"My Sessions"]}),a.jsxs("button",{onClick:()=>{E(!1),f(!0)},className:"w-full px-3 py-2 flex items-center text-left hover:bg-gray-50",children:[a.jsx(xl,{className:"h-4 w-4 mr-2 text-gray-700"}),"Add System Admin"]}),a.jsxs("button",{onClick:()=>{E(!1),s()},className:"w-full px-3 py-2 flex items-center text-left hover:bg-gray-50",children:[a.jsx(Vn,{className:"h-4 w-4 mr-2 text-gray-700"}),"Logout"]})]})})]})]}),a.jsx("div",{className:"relative z-10 bg-gradient-to-r from-[#2d4660] to-[#1d3a53] rounded-lg shadow-md p-6 mb-6 text-white",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center",children:[a.jsx(vs,{className:"h-8 w-8 mr-3"}),a.jsxs("div",{children:[a.jsx("h2",{className:"text-xl font-semibold",children:"Feature Voting System"}),a.jsx("p",{className:"text-blue-100 mt-1",children:"Global administrator management"})]})]}),a.jsxs("div",{className:"text-right",children:[a.jsx("p",{className:"text-sm text-blue-100",children:"Total System Admins"}),a.jsx("p",{className:"text-3xl font-bold",children:i.length})]})]})}),a.jsxs("div",{className:"relative z-10 bg-white rounded-lg shadow-md overflow-hidden",children:[a.jsxs("div",{className:"p-6 border-b border-gray-200",children:[a.jsxs("h2",{className:"text-lg font-semibold text-[#2d4660]",children:["System Administrators (",i.length,")"]}),a.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Manage who has full access to the Feature Voting System"})]}),a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[a.jsx("thead",{className:"bg-gray-50",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Name"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Email"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Added"}),a.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),a.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:(()=>{const ce=i.reduce((z,se)=>new Date(se.created_at)<new Date(z.created_at)?se:z);return i.map(z=>{const se=z.user_id===ce.user_id;return a.jsxs("tr",{className:"hover:bg-gray-50",children:[a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsxs("div",{className:"flex items-center",children:[a.jsx(vs,{className:"h-5 w-5 text-[#c59f2d] mr-2"}),a.jsxs("span",{className:"text-sm font-medium text-gray-900",children:[z.user.name,z.user.id===(e==null?void 0:e.id)&&a.jsx("span",{className:"ml-2 text-xs text-gray-500",children:"(You)"}),se&&a.jsx("span",{className:"ml-2 text-xs text-[#c59f2d] font-semibold",children:"(Original Admin)"})]})]})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsxs("div",{className:"flex items-center text-sm text-gray-500",children:[a.jsx(Jc,{className:"h-4 w-4 mr-2"}),z.user.email]})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:K(z.created_at)}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:a.jsx("button",{onClick:()=>Z(z.user_id),className:`text-red-600 hover:text-red-900 ${z.user.id===(e==null?void 0:e.id)||i.length===1||se?"opacity-50 cursor-not-allowed":""}`,disabled:z.user.id===(e==null?void 0:e.id)||i.length===1||se,title:se?"Cannot remove the original system admin":z.user.id===(e==null?void 0:e.id)?"You cannot remove yourself":i.length===1?"Cannot remove the last system admin":"Remove system admin",children:a.jsx(Xi,{className:"h-5 w-5"})})})]},z.id)})})()})]})})]}),a.jsx("div",{className:"relative z-10 mt-6 bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:a.jsxs("div",{className:"flex items-start",children:[a.jsx(vs,{className:"h-5 w-5 text-yellow-600 mr-3 mt-0.5"}),a.jsxs("div",{className:"text-sm text-yellow-800",children:[a.jsx("p",{className:"font-medium mb-1",children:"System Admin Permissions:"}),a.jsxs("ul",{className:"list-disc list-inside space-y-1",children:[a.jsx("li",{children:"Full access to all voting sessions across the system"}),a.jsx("li",{children:"Create and manage any voting session"}),a.jsx("li",{children:"Add and remove other system administrators"}),a.jsx("li",{children:"Manage session admins and stakeholders for any session"}),a.jsx("li",{children:"View all results and analytics system-wide"})]}),a.jsx("p",{className:"mt-3 text-xs font-medium",children:"Note: The original system admin (first person to access this page) cannot be removed to prevent system lockout."})]})]})}),m&&a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:a.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-md w-full",children:[a.jsxs("div",{className:"flex justify-between items-center mb-4",children:[a.jsx("h3",{className:"text-lg font-medium text-[#2d4660]",children:"Add System Admin"}),a.jsx("button",{onClick:()=>{f(!1),y({email:""}),j({})},className:"text-gray-400 hover:text-gray-500",children:a.jsx(Ms,{className:"h-5 w-5"})})]}),a.jsxs("form",{onSubmit:me,className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email Address *"}),a.jsx("input",{type:"email",value:p.email,onChange:ce=>y(z=>({...z,email:ce.target.value})),className:`w-full px-3 py-2 border rounded-md focus:ring-2 focus:ring-[#2d4660] focus:border-transparent ${x.email?"border-red-500":"border-gray-300"}`,placeholder:"admin@example.com"}),x.email&&a.jsxs("p",{className:"mt-1 text-sm text-red-600 flex items-center",children:[a.jsx(Ht,{className:"h-4 w-4 mr-1"}),x.email]})]}),x.submit&&a.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-3",children:a.jsxs("p",{className:"text-sm text-red-800 flex items-center",children:[a.jsx(Ht,{className:"h-4 w-4 mr-2"}),x.submit]})}),a.jsxs("div",{className:"flex justify-end space-x-2 pt-4",children:[a.jsx("button",{type:"button",onClick:()=>{f(!1),y({email:""}),j({})},className:"px-4 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50",disabled:b,children:"Cancel"}),a.jsx("button",{type:"submit",className:"px-4 py-2 bg-[#2d4660] text-white rounded-md hover:bg-[#1d3a53] disabled:opacity-50",disabled:b,children:b?"Adding...":"Add System Admin"})]})]})]})})]})}async function KZ(e){var t,r,n,s;if(!e||e.trim().length<2)return[];try{const{data:{session:i},error:l}=await je.auth.getSession();if(l)throw console.error("Error getting session:",l),new Error("Unable to access your session. Please sign in again.");if(!i)throw console.warn("No session available for Azure AD search"),new Error("You must be signed in to search company users.");if(!(((r=(t=i.user)==null?void 0:t.app_metadata)==null?void 0:r.provider)==="azure"||((s=(n=i.user)==null?void 0:n.identities)==null?void 0:s.some(b=>b.provider==="azure"))))throw console.warn("User not signed in with Azure AD"),new Error("You must sign in with Microsoft to search company users.");const d=i.provider_token||i.access_token;if(!d)throw console.warn("No provider token available for Azure AD search"),new Error("Unable to access Microsoft Graph. Please sign out and sign in again with Microsoft.");const m=e.trim(),f=`startswith(displayName,'${m}') or startswith(mail,'${m}') or startswith(userPrincipalName,'${m}') or startswith(givenName,'${m}') or startswith(surname,'${m}')`,p=`https://graph.microsoft.com/v1.0/users?$filter=${encodeURIComponent(f)}&$select=id,displayName,mail,userPrincipalName,givenName,surname,jobTitle,department&$top=20`,y=await fetch(p,{headers:{Authorization:`Bearer ${d}`,"Content-Type":"application/json"}});if(!y.ok){const b=await y.text();let k="";throw y.status===401?(k="Authentication failed. Please sign out and sign in again with Microsoft.",console.warn("Azure AD search 401:",b)):y.status===403?(k='Your Azure AD app needs "User.ReadBasic.All" or "User.Read.All" permission to search users. An administrator must grant this permission in Azure Portal.',console.warn("Azure AD search 403 - Insufficient permissions:",b)):y.status===400?(k="Invalid search query. Please try a different search term.",console.warn("Azure AD search 400:",b)):(k=`Unable to search users (${y.status}). Please try again.`,console.error("Azure AD search error:",y.status,b)),new Error(k)}return((await y.json()).value||[]).map(b=>({id:b.id,displayName:b.displayName||"",mail:b.mail||b.userPrincipalName||"",userPrincipalName:b.userPrincipalName||"",givenName:b.givenName,surname:b.surname,jobTitle:b.jobTitle,department:b.department})).sort((b,k)=>{const _=b.displayName.toLowerCase(),E=k.displayName.toLowerCase();return _.localeCompare(E)})}catch(i){throw console.error("Error searching Azure AD users:",i),i}}const qu=()=>({searchTerm:"",results:[],isSearching:!1,showResults:!1,error:""});function xh({products:e,value:t,onChange:r,label:n,error:s,onProductChange:i}){const[l,u]=v.useState(!1),d=v.useRef(null);v.useEffect(()=>{function p(y){d.current&&!d.current.contains(y.target)&&u(!1)}return document.addEventListener("mousedown",p),()=>document.removeEventListener("mousedown",p)},[]);const m=e.find(p=>p.id===t),f=m?qn(m.name,m.color_hex??null):null;return a.jsxs("div",{ref:d,className:"relative overflow-visible",children:[n&&a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:n}),a.jsxs("div",{onClick:()=>u(!l),className:`w-full px-3 py-2 border rounded-md bg-white cursor-pointer flex items-center justify-between hover:border-gray-400 ${s?"border-red-500":"border-gray-300"}`,children:[a.jsxs("div",{className:"flex items-center gap-2 flex-1 min-w-0",children:[m&&f&&a.jsx("div",{className:"w-4 h-4 rounded flex-shrink-0",style:{backgroundColor:f.background}}),a.jsx("span",{className:`text-sm truncate ${t?"text-gray-900":"text-gray-400"}`,children:m?m.name:"Select a Product"})]}),a.jsx(ts,{className:`h-4 w-4 text-gray-400 transition-transform flex-shrink-0 ${l?"transform rotate-180":""}`})]}),l&&a.jsx("div",{className:"absolute z-[100] w-full mt-1 bg-white border border-gray-300 rounded-md shadow-lg max-h-60 overflow-y-auto",children:e.length===0?a.jsx("div",{className:"px-3 py-2 text-sm text-gray-500 text-center",children:"No products available"}):e.map(p=>{const y=qn(p.name,p.color_hex??null),x=t===p.id;return a.jsxs("div",{onClick:()=>{r(p.id),u(!1),i&&i()},className:`px-3 py-2 cursor-pointer hover:bg-gray-50 flex items-center gap-2 ${x?"bg-gray-50":""}`,children:[a.jsx("div",{className:"w-4 h-4 rounded flex-shrink-0",style:{backgroundColor:y.background}}),a.jsx("span",{className:"text-sm text-gray-900 flex-1",children:p.name}),x&&a.jsx(sr,{className:"h-4 w-4 text-gray-400 flex-shrink-0"})]},p.id)})})]})}function GZ({products:e,sessions:t,selectedProductId:r,onProductChange:n,useAllSessions:s,onToggleAllSessions:i,selectedSessionIds:l,onSessionToggle:u,getSessionStatus:d,formatSessionDateRange:m,filterSessions:f}){const p=r?f(t,r):[];return a.jsxs("div",{className:"space-y-3 overflow-visible",children:[a.jsx("div",{className:"overflow-visible",children:a.jsx(xh,{products:e,value:r,onChange:y=>{n(y),i(!0)},label:"Product *"})}),r&&a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Session Selection *"}),a.jsxs("div",{className:"inline-flex items-center bg-gray-100 rounded-lg p-1",children:[a.jsx("button",{type:"button",onClick:()=>i(!1),className:`px-4 py-2 rounded-md text-sm font-medium transition-colors flex items-center ${s?"text-gray-600 hover:text-gray-900":"bg-white text-[#2d4660] shadow-sm"}`,children:"Select Sessions"}),a.jsx("button",{type:"button",onClick:()=>{i(!0)},className:`px-4 py-2 rounded-md text-sm font-medium transition-colors flex items-center ${s?"bg-white text-[#2d4660] shadow-sm":"text-gray-600 hover:text-gray-900"}`,children:"All Sessions"})]}),s&&a.jsx("p",{className:"mt-2 text-xs text-gray-500",children:"User will be added to all current and future sessions for this product"})]}),!s&&a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Sessions * (Current and Future)"}),p.length===0?a.jsx("p",{className:"text-sm text-gray-500",children:"No current or future sessions found for this product."}):a.jsx("div",{className:"max-h-48 overflow-y-auto border border-gray-300 rounded-md p-2",children:p.map(y=>a.jsxs("label",{className:"flex items-start px-3 py-2 hover:bg-gray-50 cursor-pointer border-b border-gray-100 last:border-b-0",children:[a.jsx("input",{type:"checkbox",checked:l.includes(y.id),onChange:()=>u(y.id),className:"w-4 h-4 border-gray-300 rounded focus:ring-[#2D4660] accent-green-600 mt-1",style:{accentColor:"#16a34a"}}),a.jsxs("div",{className:"ml-3 flex-1",children:[a.jsx("div",{className:"text-sm font-medium text-gray-900",children:y.title||"Unnamed Session"}),a.jsx("div",{className:"text-xs text-gray-500 mt-0.5",children:m(y)}),a.jsx("div",{className:"text-xs mt-0.5",children:a.jsx("span",{className:`font-medium ${d(y).color}`,children:d(y).text})})]})]},y.id))})]})]})]})}function YZ(){var $i,ia;const{currentUser:e,setCurrentUser:t,setCurrentSession:r,currentSession:n}=ba(),s=zs(),[i]=hx(),[l,u]=v.useState([]),[d,m]=v.useState([]),[f,p]=v.useState(!0),[y,x]=v.useState(""),[j,b]=v.useState("all"),[k,_]=v.useState(!1),[E,C]=v.useState(null),[O,T]=v.useState(null),[A,L]=v.useState(null),[J,H]=v.useState(null),me=S=>{const I=new Date,U=S.filter(Y=>{const ne=Y.start_date?new Date(Y.start_date):null,W=Y.end_date?new Date(Y.end_date):null;return ne&&I<ne||W&&I>W?!1:!!(ne&&I>=ne&&(!W||I<=W))});return U.length===0?null:U.sort((Y,ne)=>{const W=Y.start_date?new Date(Y.start_date).getTime():0;return(ne.start_date?new Date(ne.start_date).getTime():0)-W})[0]},Z=new Set(["spencer.faull@newmill.com","chris.rodes@newmill.com","dave.hoffman@newmill.com"]),K=v.useRef(null),ce=v.useRef({}),z=v.useRef(null),se=v.useRef(!1),[B,ue]=v.useState(!1),[oe,X]=v.useState(!1),[ee,D]=v.useState([]),[q,Te]=v.useState("system-admin"),[we,Ce]=v.useState(!0),[le,de]=v.useState(!1),[Q,R]=v.useState(null),[ge,$e]=v.useState(null),[V,Fe]=v.useState([]),[Be,dt]=v.useState({adminSessions:[],stakeholderSessions:[]}),[ft,Dt]=v.useState(""),[Nt,Xt]=v.useState(!0),[M,ie]=v.useState([]),[pe,Se]=v.useState(!1),[ye,be]=v.useState(null),[qe,yt]=v.useState(!1),[wt,Pt]=v.useState(null),[tr,Rt]=v.useState(new Set),[nn,yr]=v.useState(new Map),[$t,yn]=v.useState(!1),[Wt,_r]=v.useState(!1),[Ze,Ot]=v.useState({name:"",email:"",isSystemAdmin:!1,sessionAdminIds:[],stakeholderSessionIds:[]}),[Qt,Gt]=v.useState(qu()),[Br,vr]=v.useState(!0),[Ss,$r]=v.useState(null),[Wr,xr]=v.useState({sessionAdmin:!1,stakeholder:!1}),[vn,Cr]=v.useState("User Management"),[Yt,qr]=v.useState([]),[Mt,Mr]=v.useState(""),[ir,dr]=v.useState([]),[Er,is]=v.useState(""),[Yn,Vr]=v.useState([]),[ks,Fr]=v.useState(!1),[Bs,sn]=v.useState(null),[Tt,an]=v.useState(!0),[fr,Hr]=v.useState(!0),on=!!Er&&(fr||Ze.sessionAdminIds.length>0),xn=!!Mt&&(Tt||Ze.stakeholderSessionIds.length>0),Ns=(($i=Yt.find(S=>S.id===Er))==null?void 0:$i.name)||"",Ft=((ia=Yt.find(S=>S.id===Mt))==null?void 0:ia.name)||"",_s=S=>{const I=S.map(Y=>V.find(ne=>ne.id===Y)).filter(Y=>!!Y);return I.length===0?"":I.map(Y=>Y.title||"Unnamed Session").join(", ")},ae=on?`${Ns||"Selected Product"}  ${fr?"All Sessions":_s(Ze.sessionAdminIds)||"Sessions selected"}`:"",ke=xn?`${Ft||"Selected Product"}  ${Tt?"All Sessions":_s(Ze.stakeholderSessionIds)||"Sessions selected"}`:"",De=(()=>{const S=[];return Ze.isSystemAdmin&&S.push("System Admin"),on&&S.push("Session Admin"),xn&&S.push("Stakeholder"),S})(),Re=S=>{if(De.length===0)return S?"Creating User...":"Create User";const I=De.join(" & ");return S?`Adding ${I}...`:`Add ${I}`},[Ve,Ne]=v.useState(!1),[ht,pt]=v.useState(null),[gt,Pe]=v.useState(""),[ar,Ar]=v.useState(""),[Pr,_t]=v.useState(!1),It=async S=>{S&&(S.preventDefault(),S.stopPropagation());try{await je.auth.signOut()}catch(I){console.error("Error signing out:",I)}try{r(null)}catch(I){console.error("Error clearing session:",I)}t(null);try{localStorage.removeItem("voting_system_current_session"),localStorage.removeItem("voting_system_user"),localStorage.removeItem("azureDevOpsAuthInProgress"),sessionStorage.removeItem("oauth_return_path"),sessionStorage.removeItem("oauth_action"),sessionStorage.removeItem("oauth_error")}catch(I){console.error("Error clearing storage:",I)}_(!1),s("/login",{replace:!0})};v.useEffect(()=>{if(!k)return;const S=I=>{K.current&&!K.current.contains(I.target)&&_(!1)};return document.addEventListener("mousedown",S),document.addEventListener("touchstart",S,{passive:!0}),()=>{document.removeEventListener("mousedown",S),document.removeEventListener("touchstart",S)}},[k]),v.useEffect(()=>{if(!E)return;const S=I=>{const U=ce.current[E];U&&!U.contains(I.target)&&C(null)};return document.addEventListener("mousedown",S),document.addEventListener("touchstart",S,{passive:!0}),()=>{document.removeEventListener("mousedown",S),document.removeEventListener("touchstart",S)}},[E]);const rr=v.useCallback(async()=>{try{const S=await xx(),I=new Date,U=S.filter(Y=>V.some(ne=>ne.product_id!==Y.id?!1:new Date(ne.end_date)>=I));qr(U)}catch(S){console.error("Error loading products:",S)}},[V]),Or=()=>{is(""),Vr([]),Ot(S=>({...S,sessionAdminIds:[]})),Hr(!0),xr(S=>({...S,sessionAdmin:!1}))},ra=()=>{Mr(""),Ot(S=>({...S,stakeholderSessionIds:[]})),an(!0),xr(S=>({...S,stakeholder:!1}))},na=S=>{if(!S){dr([]);return}const I=new Date,U=V.filter(Y=>Y.product_id!==S?!1:new Date(Y.end_date)>=I);dr(U)};v.useEffect(()=>{Mt?na(Mt):dr([])},[Mt,V]);const lo=S=>{if(!S){Vr([]);return}const I=new Date,U=V.filter(Y=>Y.product_id!==S?!1:new Date(Y.end_date)>=I);Vr(U)};v.useEffect(()=>{Er?lo(Er):Vr([])},[Er,V]),v.useEffect(()=>{const S=i.get("filter");S==="session-admin"?(Cr("Session Admin Management"),b("session-admin")):S==="stakeholder"?(Cr("Stakeholder Management"),b("stakeholder")):Cr("User Management")},[i]);const Kr=async S=>{p(!0);try{const[I,U,Y]=await Promise.all([Xv(),je.from("session_admins").select("user_id, session_id, created_at").then(({data:We,error:st})=>st?(console.error("Error fetching all admin relations:",st),[]):We||[]),je.from("session_stakeholders").select("user_email, session_id, created_at").then(({data:We,error:st})=>st?(console.error("Error fetching all stakeholder relations:",st),[]):We||[])]),ne=new Map;U.forEach(We=>{ne.has(We.user_id)||ne.set(We.user_id,[]),ne.get(We.user_id).push({session_id:We.session_id,created_at:We.created_at})});const W=new Map;Y.forEach(We=>{var Le;const st=((Le=We.user_email)==null?void 0:Le.toLowerCase())||"";st&&(W.has(st)||W.set(st,[]),W.get(st).push({session_id:We.session_id,created_at:We.created_at}))});const $=new Map(S.map(We=>[We.id,We])),_e=await Promise.all(I.map(async We=>{const st=await hR(We.id),Le=[],wr=[];(ne.get(We.id)||[]).forEach(Ge=>{const bt=$.get(Ge.session_id);bt&&Le.push({...bt,assignedAt:Ge.created_at,assignedBy:"System",assignedByName:"System"})});const ot=We.email.toLowerCase();return(W.get(ot)||[]).forEach(Ge=>{const bt=$.get(Ge.session_id);bt&&wr.push({...bt,assignedAt:Ge.created_at,assignedBy:"System",assignedByName:"System"})}),{...We,roles:st,adminInSessions:Le,stakeholderInSessions:wr}}));u(_e);const Oe=new Map;_e.forEach(We=>{const st=We.email.toLowerCase().trim();Oe.has(st)||Oe.set(st,[]),Oe.get(st).push(We.id)});const Ue=new Map;Oe.forEach((We,st)=>{We.length>1&&Ue.set(st,We)}),yr(Ue)}catch(I){console.error("Error loading users:",I)}finally{p(!1)}},Ai=async()=>{if(e){Ce(!0);try{const S=await Mo(),[I,U]=await Promise.all([_i(e.id),je.from("session_admins").select("session_id").eq("user_id",e.id).then(({data:ne,error:W})=>W?(console.error("Error fetching admin sessions:",W),[]):(ne||[]).map($=>$.session_id))]);ue(I);const Y=U;if(I)Fe(S),await Promise.all([ka(),Kr(S)]);else{const ne=Y.length>0;if(X(ne),D(Y),!ne){s("/sessions");return}const W=S.filter($=>Y.includes($.id));Fe(W),Te("session-admin"),await Kr(W)}}catch(S){console.error("Error checking access:",S),s("/sessions")}finally{Ce(!1)}}},ka=async()=>{try{const S=["chris.rodes@newmill.com","spencer.faull@newmill.com"],I=new Set,U=await e0();if(U.length>0){const ne=U.reduce((W,$)=>new Date($.created_at)<new Date(W.created_at)?$:W);Pt(ne.user_id),I.add(ne.user_id)}(await Xv()).forEach(ne=>{S.includes(ne.email.toLowerCase())&&I.add(ne.id)}),Rt(I)}catch(S){console.error("Error loading protected accounts:",S)}},wn=S=>{if(S.id===wt)return"Original Admin";const I=S.email.toLowerCase();return I==="chris.rodes@newmill.com"?"Manager":I==="spencer.faull@newmill.com"?"Portfolio Owner":null},Ct=S=>{const I=S.email.toLowerCase().trim(),U=nn.get(I);return U?U.length>1:!1},ln=S=>{const I=S.email.toLowerCase().trim(),U=nn.get(I);return U?U.length:1},Na=()=>{let S=[...l];if(q==="session-admin"&&V.length>0){const I=new Set(V.map(U=>U.id));S=S.filter(U=>{var W,$;if(U.id===(e==null?void 0:e.id))return!0;const Y=(W=U.adminInSessions)==null?void 0:W.some(_e=>_e&&I.has(_e.id)),ne=($=U.stakeholderInSessions)==null?void 0:$.some(_e=>_e&&I.has(_e.id));return!!Y||!!ne})}if(y.trim()){const I=y.toLowerCase();S=S.filter(U=>U.name.toLowerCase().includes(I)||U.email.toLowerCase().includes(I))}j!=="all"&&(S=S.filter(I=>{switch(j){case"system-admin":return I.roles.isSystemAdmin;case"session-admin":return I.roles.sessionAdminCount>0;case"stakeholder":return I.roles.stakeholderSessionCount>0;case"none":return!I.roles.isSystemAdmin&&I.roles.sessionAdminCount===0&&I.roles.stakeholderSessionCount===0;default:return!0}})),m(S)};v.useEffect(()=>{if(!e){s("/login");return}if(!se.current)return se.current=!0,Ai(),()=>{}},[e]),v.useEffect(()=>{const S=i.get("filter");S&&["system-admin","session-admin","stakeholder","none"].includes(S)&&b(S)},[i]),v.useEffect(()=>{q==="session-admin"?(j==="system-admin"||j==="session-admin"||j==="all")&&b("stakeholder"):q==="system-admin"&&b("all")},[q]);const Lr=v.useCallback(()=>{Na()},[l,y,j,q,V,e]);v.useEffect(()=>{Lr()},[Lr]),v.useEffect(()=>{function S(I){z.current&&!z.current.contains(I.target)&&Gt(U=>({...U,showResults:!1}))}return document.addEventListener("mousedown",S),()=>document.removeEventListener("mousedown",S)},[]);const Ws=async S=>{try{const I=[],U=[];for(const Y of V)await km(S,Y.id)&&I.push(Y.id),await xR(S,Y.id)&&U.push(Y.id);dt({adminSessions:I,stakeholderSessions:U})}catch(I){console.error("Error loading user session memberships:",I)}},bn=async(S,I)=>{$e(S),R(I),Dt(""),Xt(!0),ie([]),de(!0),C(null),Yt.length===0&&await rr(),await Ws(S.id)},Pi=()=>{de(!1),R(null),$e(null),Dt(""),Xt(!0),ie([]),dt({adminSessions:[],stakeholderSessions:[]})},ci=(S,I)=>{if(!I)return[];const U=new Date;return S.filter(Y=>Y.product_id!==I?!1:new Date(Y.end_date)>=U)},Oi=async()=>{if(!ge||!Q)return;if(!ft){alert("Please select a product first.");return}let S=[];if(Nt)S=ci(uo(Q),ft).map(U=>U.id);else{if(M.length===0){alert("Please select at least one session.");return}S=M}if(S.length===0){alert("No sessions available for this product.");return}try{for(const I of S)Q==="session-admin"?await Ac(I,ge.id):Q==="stakeholder"?await nS(I,ge.email,ge.name):Q==="remove-stakeholder"&&await Zv(I,ge.email);Pi(),await Kr(V)}catch(I){console.error("Error modifying user session role:",I);const U=(I==null?void 0:I.message)||(I==null?void 0:I.toString())||"Unknown error";console.error("Full error details:",I),alert(`Failed to ${Q==="remove-stakeholder"?"remove stakeholder from":"add user to"} session(s).

Error: ${U}

Please check the console for more details.`)}},Dn=async(S,I)=>{if(C(null),!!confirm(`Are you sure you want to ${I?"remove":"grant"} system admin access for this user?`))try{I?await t0(S):await Nh(S),await Kr(V)}catch(U){console.error("Error toggling system admin:",U),alert("Failed to update system admin status. Please try again.")}},ds=async(S,I)=>{C(null);const U=q==="session-admin"?`Are you sure you want to remove ${I} from all sessions you manage? This will remove them as a stakeholder or session admin from your sessions only.`:`Are you sure you want to remove all roles from ${I}? This will remove them from all sessions and revoke system admin access.`;if(confirm(U))try{if(q==="system-admin"&&await t0(S),q==="session-admin"){for(const Y of ee)try{await Qv(Y,S)}catch(ne){console.error(`Error removing session admin from ${Y}:`,ne)}for(const Y of ee)try{await iS(Y,S)}catch(ne){console.error(`Error removing stakeholder from ${Y}:`,ne)}}else for(const Y of V)try{await Qv(Y.id,S),await iS(Y.id,S)}catch{}await Kr(V)}catch(Y){console.error("Error removing roles:",Y),alert("Failed to remove roles. Please try again.")}},fs=async(S,I)=>{const U=l.find(Y=>Y.id===S);if(U){if(q==="session-admin"){if(U.roles.stakeholderSessionCount===0){alert("This user is not a stakeholder in any sessions.");return}const Y=`Are you sure you want to remove ${I} as a stakeholder from all sessions you manage?`;if(!confirm(Y))return;try{let ne=0;for(const W of V)try{await Zv(W.id,U.email),ne++}catch($){console.error(`Error removing stakeholder from session ${W.id}:`,$)}await Kr(V),ne>0?alert(`${I} has been removed as a stakeholder from ${ne} session(s) you manage.`):alert(`${I} was not a stakeholder in any of the sessions you manage.`)}catch(ne){console.error("Error removing stakeholder:",ne),alert("Failed to remove stakeholder. Please try again.")}return}be(U),Se(!0)}},qs=async()=>{var S;if(ye){if(tr.has(ye.id)){const I=wn(ye);alert(`Cannot delete this protected account${I?` (${I})`:""}. This protects against accidentally locking important users out of the system.`),Se(!1),be(null);return}yt(!0);try{if(!e)throw new Error("You must be logged in to delete users");const U=`${je.supabaseUrl}/functions/v1/delete-user`,Y=await fetch(U,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${je.supabaseKey}`},body:JSON.stringify({userId:ye.id,currentUserId:e.id})});if(!Y.ok){let $="Failed to delete user";try{$=(await Y.json()).error||$}catch{$=`Server returned ${Y.status}: ${Y.statusText}`}throw new Error($)}const ne=await Y.json();u($=>$.filter(_e=>_e.id!==ye.id)),Se(!1);const W=ye.id;be(null);try{await Kr(V)}catch($){console.error("Error reloading users after deletion:",$)}}catch(I){console.error("Error deleting user:",I);const U=(I==null?void 0:I.message)||((S=I==null?void 0:I.error)==null?void 0:S.message)||"Unknown error";u(Y=>!Y.find(W=>W.id===(ye==null?void 0:ye.id))&&ye?[...Y,ye].sort((W,$)=>(W.name||W.email).localeCompare($.name||$.email)):Y),alert(`Failed to delete user: ${U}

If this persists, the deletion may be blocked by database security policies. Please check the console for details.`);try{await Kr(V)}catch(Y){console.error("Error reloading users after failed deletion:",Y)}}finally{yt(!1)}}},Ti=()=>{Se(!1),be(null)},Cs=async()=>{if(!ht)return;if(!gt.trim()){alert("Name is required");return}if(!ar.trim()){alert("Email is required");return}if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(ar.trim())){alert("Please enter a valid email address");return}_t(!0);try{const{error:I}=await je.from("users").update({name:gt.trim(),email:ar.trim().toLowerCase()}).eq("id",ht.id);if(I)throw I;u(U=>U.map(Y=>Y.id===ht.id?{...Y,name:gt.trim(),email:ar.trim().toLowerCase()}:Y)),Ne(!1),pt(null),Pe(""),Ar("")}catch(I){console.error("Error updating user:",I),alert("Failed to update user. Please try again.")}finally{_t(!1)}},co=()=>{_(!1),yn(!0),Ot({name:"",email:"",isSystemAdmin:!1,sessionAdminIds:[],stakeholderSessionIds:[]}),Gt(qu()),Mr(""),dr([]),is(""),Vr([]),rr(),vr(!0)},sa=()=>{yn(!1),Ot({name:"",email:"",isSystemAdmin:!1,sessionAdminIds:[],stakeholderSessionIds:[]}),Gt(qu()),Mr(""),dr([]),is(""),Vr([]),an(!0),Hr(!0),xr({sessionAdmin:!1,stakeholder:!1}),vr(!0)};v.useEffect(()=>{(async()=>{var U,Y,ne,W;try{const{data:{session:$}}=await je.auth.getSession();if($){const _e=((Y=(U=$.user)==null?void 0:U.app_metadata)==null?void 0:Y.provider)==="azure"||((W=(ne=$.user)==null?void 0:ne.identities)==null?void 0:W.some(Oe=>Oe.provider==="azure"));$r(_e||!1)}else $r(!1)}catch($){console.error("Error checking Azure sign-in status:",$),$r(!1)}})();const{data:{subscription:I}}=je.auth.onAuthStateChange((U,Y)=>{var ne,W,$,_e;if(Y){const Oe=((W=(ne=Y.user)==null?void 0:ne.app_metadata)==null?void 0:W.provider)==="azure"||((_e=($=Y.user)==null?void 0:$.identities)==null?void 0:_e.some(Ue=>Ue.provider==="azure"));$r(Oe||!1)}else $r(!1)});return()=>{I.unsubscribe()}},[]);const Ii=async()=>{try{const S=window.location.pathname.startsWith("/feature-voting-app")?"/feature-voting-app":"",{error:I}=await je.auth.signInWithOAuth({provider:"azure",options:{redirectTo:`${window.location.origin}${S}/users`,scopes:"email openid profile User.ReadBasic.All"}});I&&(console.error("Azure sign-in error:",I),Gt(U=>({...U,error:"Failed to sign in with Microsoft. Please try again."})))}catch(S){console.error("Azure sign-in error:",S),Gt(I=>({...I,error:"Failed to sign in with Microsoft. Please try again."}))}},re=async S=>{if(Gt(I=>({...I,searchTerm:S,isSearching:!0,showResults:!1,error:""})),!S||S.trim().length<2){Gt(I=>({...I,results:[],isSearching:!1,error:""}));return}try{const I=await KZ(S);Gt(U=>({...U,results:I,isSearching:!1,showResults:I.length>0,error:""}))}catch(I){console.error("Error searching Azure AD users:",I);const U=(I==null?void 0:I.message)||"Failed to search company users. Please try again.";Gt(Y=>({...Y,results:[],isSearching:!1,showResults:!1,error:U}))}},ze=S=>{let I="";if(S.givenName&&S.surname)I=`${S.givenName} ${S.surname}`;else if(S.displayName){const U=S.displayName.trim();if(U.includes(",")){const Y=U.split(",").map(ne=>ne.trim());Y.length===2?I=`${Y[1]} ${Y[0]}`:I=U}else I=U}else I=S.mail||S.userPrincipalName||"";Ot({...Ze,name:I,email:S.mail||S.userPrincipalName}),Gt(qu()),vr(!1)},et=async()=>{if(!Ze.name.trim()||!Ze.email.trim()){alert("Please fill in all required fields (Name, Email)");return}_r(!0);try{const{data:S,error:I}=await je.from("users").insert({name:Ze.name.trim(),email:Ze.email.trim().toLowerCase(),created_by:e==null?void 0:e.id,created_by_name:e==null?void 0:e.name}).select().single();if(I)throw I;if(!S)throw new Error("User creation failed");const U=S.id;if(q==="system-admin"&&Ze.isSystemAdmin&&await Nh(U),q==="system-admin"&&Wr.sessionAdmin&&Er)if(fr)for(const W of Yn)try{await Ac(W.id,U)}catch($){console.error(`Error adding session admin role to session ${W.id}:`,$)}else for(const W of Ze.sessionAdminIds)try{await Ac(W,U)}catch($){console.error("Error adding session admin role:",$)}console.log("Adding stakeholder to sessions:",Ze.stakeholderSessionIds),console.log("View mode:",q),console.log("User admin sessions:",ee),console.log("All sessions:",V.map(W=>({id:W.id,title:W.title})));let Y=[];if(q==="session-admin"?Mt&&Tt?Y=ir.map(W=>W.id):Mt&&!Tt&&(Y=Ze.stakeholderSessionIds):q==="system-admin"&&Wr.stakeholder&&Mt&&(Tt?Y=ir.map(W=>W.id):Y=Ze.stakeholderSessionIds),Y.length===0)console.log("No stakeholder sessions to add");else{for(const W of Y){if(q==="session-admin"&&!V.some(_e=>_e.id===W)){console.warn(`Skipping session ${W} - not in managed sessions`);continue}try{console.log(`Adding ${Ze.email} as stakeholder to session ${W}`);const $=await nS(W,Ze.email,Ze.name);console.log(`Successfully added stakeholder to session ${W}:`,$)}catch($){console.error(`Error adding stakeholder role to session ${W}:`,$);const _e=($==null?void 0:$.message)||($==null?void 0:$.toString())||"Unknown error";alert(`Warning: Failed to add ${Ze.email} to session ${W}.

Error: ${_e}`)}}console.log("Finished adding stakeholder roles")}let ne="User";Ze.isSystemAdmin?ne="System Admin":Wr.sessionAdmin&&Er&&(fr||Ze.sessionAdminIds.length>0)?ne="Session Admin":(q==="session-admin"&&Mt&&(Tt||Ze.stakeholderSessionIds.length>0)||q==="system-admin"&&Wr.stakeholder&&Mt&&(Tt||Ze.stakeholderSessionIds.length>0))&&(ne="Stakeholder"),sa(),await Kr(V),sn({email:Ze.email,userType:ne}),Fr(!0)}catch(S){console.error("Error creating user:",S),alert(`Failed to create user: ${S.message||"Unknown error"}`)}finally{_r(!1)}},Lt=S=>{Ot(I=>({...I,sessionAdminIds:I.sessionAdminIds.includes(S)?I.sessionAdminIds.filter(U=>U!==S):[...I.sessionAdminIds,S]}))},or=S=>{Ot(I=>({...I,stakeholderSessionIds:I.stakeholderSessionIds.includes(S)?I.stakeholderSessionIds.filter(U=>U!==S):[...I.stakeholderSessionIds,S]}))},Tr=S=>{const U=S.split("T")[0].split(" ")[0].split("-");if(U.length!==3)return new Date(S).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"});const Y=parseInt(U[0],10),ne=parseInt(U[1],10)-1,W=parseInt(U[2],10);return new Date(Y,ne,W).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})},jn=S=>{const I=new Date,U=new Date(S.start_date),Y=new Date(S.end_date);return S.is_active&&I>=U&&I<=Y?{text:"Active",color:"text-green-600"}:I<U?{text:"Upcoming",color:"text-blue-600"}:{text:"Ended",color:"text-gray-500"}},lr=S=>{const I=new Date(S.start_date),U=new Date(S.end_date),Y=I.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}),ne=U.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"});return`${Y} - ${ne}`},Di=S=>S.roles.isSystemAdmin?a.jsxs("span",{className:"inline-flex items-center px-2.5 py-1 rounded text-xs font-medium bg-[#C89212] text-white",children:[a.jsx(vs,{className:"h-3.5 w-3.5 mr-1"}),"System Admin"]}):S.roles.sessionAdminCount>0?a.jsxs("span",{className:"inline-flex items-center px-2.5 py-1 rounded text-xs font-medium bg-[#576C71] text-white",children:[a.jsx(Bn,{className:"h-3.5 w-3.5 mr-1"}),"Session Admin (",S.roles.sessionAdminCount,")"]}):S.roles.stakeholderSessionCount>0?a.jsxs("span",{className:"inline-flex items-center px-2.5 py-1 rounded text-xs font-medium bg-[#8B5A4A] text-white",children:[a.jsx(gs,{className:"h-3.5 w-3.5 mr-1"}),"Stakeholder (",S.roles.stakeholderSessionCount,")"]}):a.jsx("span",{className:"inline-flex items-center px-2.5 py-1 rounded text-xs font-medium bg-gray-100 text-gray-600",children:"No Role"}),uo=S=>S?S==="session-admin"?V.filter(I=>!Be.adminSessions.includes(I.id)):S==="remove-stakeholder"?V.filter(I=>Be.stakeholderSessions.includes(I.id)&&(q==="system-admin"||ee.includes(I.id))):V.filter(I=>!Be.stakeholderSessions.includes(I.id)):[],Ri=(S,I)=>I?I==="session-admin"?S.roles.sessionAdminCount<V.length:S.roles.stakeholderSessionCount<V.length:!1;return we||f?a.jsx("div",{className:"min-h-screen w-full bg-gray-50 flex items-center justify-center",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-[#2d4660] mx-auto mb-4"}),a.jsx("p",{className:"text-gray-600",children:we?"Checking access...":"Loading users..."})]})}):B?a.jsxs("div",{className:"min-h-screen bg-gray-50 pb-20",children:[a.jsxs("div",{className:"container mx-auto p-4 max-w-6xl",children:[a.jsx("div",{className:"hidden md:flex md:justify-center mb-2",children:a.jsx("img",{src:oi,alt:"New Millennium Building Systems Logo",className:"-mt-4 cursor-pointer hover:opacity-80 transition-opacity",style:{height:"96px",width:"auto"},onClick:()=>s("/sessions")})}),a.jsxs("div",{className:"flex justify-between items-center mb-4 md:mb-6",children:[a.jsxs("div",{className:"flex items-center flex-1 min-w-0",children:[a.jsx("img",{src:Sa,alt:"New Millennium Building Systems Logo",className:"mr-3 md:hidden flex-shrink-0 cursor-pointer hover:opacity-80 transition-opacity",style:{width:"36px",height:"36px",objectFit:"contain"},onClick:()=>s("/sessions")}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("h1",{className:"text-xl md:text-3xl font-bold text-[#2d4660] truncate",children:vn}),a.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:[e==null?void 0:e.name,B&&a.jsx("span",{className:"ml-2 inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium bg-[#C89212] text-white",children:"System Admin"}),!B&&oe&&a.jsx("span",{className:"ml-2 inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium bg-[#576C71] text-white",children:"Session Admin"})]})]})]}),a.jsxs("div",{ref:K,className:"relative z-40 flex-shrink-0 ml-2",children:[a.jsxs("div",{className:"hidden md:flex space-x-2",children:[(B||oe)&&a.jsxs("button",{onClick:co,className:"flex items-center px-4 py-2 bg-[#2D4660] text-white rounded-lg hover:bg-[#173B65] transition-colors",children:[a.jsx(ns,{className:"h-4 w-4 mr-2"}),q==="session-admin"?"Add Stakeholder":"Add User"]}),(B||oe)&&n&&a.jsxs("button",{onClick:()=>s("/admin"),className:"flex items-center px-4 py-2 bg-[#1E5461] text-white rounded-lg hover:bg-[#145668] transition-colors",children:[a.jsx(Bn,{className:"h-4 w-4 mr-2"}),"Admin Dashboard"]}),a.jsxs("button",{onClick:()=>s("/sessions"),className:"flex items-center px-4 py-2 bg-[#4f6d8e] text-white rounded-lg hover:bg-[#3d5670] transition-colors",children:[a.jsx(An,{className:"h-4 w-4 mr-2"}),"My Sessions"]}),a.jsxs("button",{onClick:S=>{S.preventDefault(),S.stopPropagation(),It(S)},className:"flex items-center px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-colors",children:[a.jsx(Vn,{className:"h-4 w-4 mr-2"}),"Logout"]})]}),a.jsx("div",{className:"flex md:hidden",children:a.jsx("button",{onClick:()=>_(!k),className:"p-2 rounded-md border border-gray-200 bg-white shadow-sm","aria-label":"Open menu",children:a.jsx(ei,{className:"h-5 w-5 text-gray-700"})})}),k&&a.jsx("div",{className:"absolute right-0 mt-2 w-56 bg-white border border-gray-200 rounded-lg shadow-lg md:hidden z-50",children:a.jsxs("div",{className:"py-1",children:[(B||oe)&&a.jsxs("button",{onClick:()=>{_(!1),co()},className:"w-full px-4 py-3 flex items-center text-left hover:bg-gray-50",children:[a.jsx(ns,{className:"h-5 w-5 mr-3 text-green-600"}),a.jsx("span",{className:"text-base",children:q==="session-admin"?"Add Stakeholder":"Add User"})]}),(B||oe)&&n&&a.jsxs("button",{onClick:()=>{_(!1),s("/admin")},className:"w-full px-4 py-3 flex items-center text-left hover:bg-gray-50",children:[a.jsx(Bn,{className:"h-5 w-5 mr-3 text-[#1E5461]"}),a.jsx("span",{className:"text-base",children:"Admin Dashboard"})]}),a.jsxs("button",{onClick:()=>{_(!1),s("/sessions")},className:"w-full px-4 py-3 flex items-center text-left hover:bg-gray-50",children:[a.jsx(An,{className:"h-5 w-5 mr-3 text-gray-700"}),a.jsx("span",{className:"text-base",children:"My Sessions"})]}),a.jsxs("button",{onClick:S=>{S.preventDefault(),S.stopPropagation(),_(!1),It(S)},className:"w-full px-4 py-3 flex items-center text-left hover:bg-gray-50",children:[a.jsx(Vn,{className:"h-5 w-5 mr-3 text-gray-700"}),a.jsx("span",{className:"text-base",children:"Logout"})]})]})})]})]}),a.jsx("div",{className:"relative z-10 bg-white rounded-lg shadow-md p-3 md:p-4 mb-4 md:mb-6",children:a.jsxs("div",{className:"flex flex-col gap-3 md:flex-row md:gap-4",children:[a.jsxs("div",{className:"flex-1 relative",children:[a.jsx(HS,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"}),a.jsx("input",{type:"text",placeholder:"Search by name or email...",value:y,onChange:S=>x(S.target.value),className:"w-full pl-10 pr-10 py-2.5 md:py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#2d4660] focus:border-transparent text-base"}),y&&a.jsx("button",{onClick:()=>x(""),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600",children:a.jsx(Ms,{className:"h-5 w-5"})})]}),a.jsxs("select",{value:j==="system-admin"&&q==="session-admin"?"session-admin":j,onChange:S=>b(S.target.value),className:"px-4 py-2.5 md:py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#2d4660] focus:border-transparent text-base",children:[q!=="session-admin"&&a.jsx("option",{value:"all",children:"All Roles"}),q!=="session-admin"&&a.jsx("option",{value:"system-admin",children:"System Admin"}),q!=="session-admin"&&a.jsx("option",{value:"session-admin",children:"Session Admin"}),a.jsx("option",{value:"stakeholder",children:"Stakeholder"}),a.jsx("option",{value:"none",children:"No Role"})]})]})}),a.jsx("div",{className:"md:hidden space-y-3 relative z-10 overflow-visible",children:d.length===0?a.jsx("div",{className:"bg-white rounded-lg shadow-md p-8 text-center text-gray-500",children:y||j!=="all"?"No users found matching your filters.":"No users found."}):d.map(S=>{var I,U;return a.jsxs("div",{className:"bg-white rounded-lg shadow-md overflow-visible",children:[a.jsxs("div",{className:"p-4 border-b border-gray-100",children:[a.jsxs("div",{className:"flex justify-between items-start mb-2",children:[a.jsxs("div",{className:"flex-1 min-w-0 pr-2",children:[a.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[a.jsx("h3",{className:"text-base font-semibold text-gray-900 truncate",children:S.name||S.email}),S.id===(e==null?void 0:e.id)&&a.jsx("span",{className:"text-xs text-[#c59f2d] font-semibold",children:"(You)"}),S.roles.isSystemAdmin&&a.jsx("span",{className:"inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium bg-[#C89212] text-white",children:"System Admin"}),S.roles.sessionAdminCount>0&&a.jsxs("span",{className:"inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-700",children:["Session Admin (",S.roles.sessionAdminCount,")"]}),S.roles.stakeholderSessionCount>0&&a.jsxs("span",{className:"inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-700",children:["Stakeholder (",S.roles.stakeholderSessionCount,")"]}),wn(S)&&a.jsxs("span",{className:"text-xs text-[#c59f2d] font-semibold",children:["(",wn(S),")"]}),Ct(S)&&a.jsxs("span",{className:"px-2 py-0.5 bg-red-100 text-red-700 text-xs font-medium rounded",children:["Duplicate (",ln(S),")"]})]}),a.jsx("p",{className:"text-sm text-gray-500 truncate mt-1",children:S.email})]}),a.jsx("div",{className:"flex items-center gap-2 flex-shrink-0",children:a.jsxs("div",{className:"relative",ref:Y=>{ce.current[S.id]=Y},children:[a.jsx("button",{onClick:()=>C(E===S.id?null:S.id),className:`p-2 rounded-md hover:bg-gray-100 transition-colors ${S.id===(e==null?void 0:e.id)?"opacity-50 cursor-not-allowed":""}`,disabled:S.id===(e==null?void 0:e.id),title:S.id===(e==null?void 0:e.id)?"Cannot modify your own permissions":"Change user role",children:a.jsx(VS,{className:"h-5 w-5 text-gray-600"})}),E===S.id&&S.id!==(e==null?void 0:e.id)&&a.jsx("div",{className:"fixed md:absolute md:right-0 md:mt-1 w-64 bg-white border border-gray-200 rounded-lg shadow-lg z-[9999]",style:(()=>{const Y=ce.current[S.id];if(!Y)return{};const ne=Y.getBoundingClientRect();return window.innerWidth<768?{top:`${ne.bottom+4}px`,right:`${window.innerWidth-ne.right+4}px`,left:"auto"}:{}})(),children:a.jsxs("div",{className:"py-1",children:[a.jsx("div",{className:"px-3 py-2 text-xs font-semibold text-gray-500 uppercase border-b border-gray-200",children:"Change User Role"}),q==="system-admin"&&a.jsxs(a.Fragment,{children:[S.roles.isSystemAdmin?a.jsxs("button",{onClick:()=>Dn(S.id,!0),className:"w-full px-4 py-3 text-left flex items-center hover:bg-red-50 text-red-700",children:[a.jsx(vs,{className:"h-5 w-5 mr-3 flex-shrink-0"}),a.jsxs("div",{children:[a.jsx("div",{className:"font-medium text-base",children:"Remove System Admin"}),a.jsx("div",{className:"text-xs text-gray-500",children:"Revoke global admin access"})]})]}):a.jsxs("button",{onClick:()=>Dn(S.id,!1),className:"w-full px-4 py-3 text-left flex items-center hover:bg-[#C89212]/10 text-[#C89212]",children:[a.jsx(vs,{className:"h-5 w-5 mr-3 flex-shrink-0"}),a.jsxs("div",{children:[a.jsx("div",{className:"font-medium text-base",children:"Make System Admin"}),a.jsx("div",{className:"text-xs text-gray-500",children:"Grant global admin access"})]})]}),Ri(S,"session-admin")&&a.jsxs("button",{onClick:()=>bn(S,"session-admin"),className:"w-full px-4 py-3 text-left flex items-center hover:bg-[#576C71]/10 text-[#576C71] border-t border-gray-200",children:[a.jsx(Bn,{className:"h-5 w-5 mr-3 flex-shrink-0"}),a.jsxs("div",{children:[a.jsx("div",{className:"font-medium text-base",children:"Make Session Admin"}),a.jsx("div",{className:"text-xs text-gray-500",children:"Add to a session as admin"})]})]})]}),Ri(S,"stakeholder")&&a.jsxs("button",{onClick:()=>bn(S,"stakeholder"),className:"w-full px-4 py-3 text-left flex items-center hover:bg-[#8B5A4A]/10 text-[#8B5A4A] border-t border-gray-200",children:[a.jsx(gs,{className:"h-5 w-5 mr-3 flex-shrink-0"}),a.jsxs("div",{children:[a.jsx("div",{className:"font-medium text-base",children:"Make Stakeholder"}),a.jsx("div",{className:"text-xs text-gray-500",children:"Add to a session as stakeholder"})]})]}),q==="session-admin"&&S.stakeholderInSessions&&S.stakeholderInSessions.length>0&&S.stakeholderInSessions.some(Y=>ee.includes(Y.id))&&a.jsxs("button",{onClick:()=>bn(S,"remove-stakeholder"),className:"w-full px-4 py-3 text-left flex items-center hover:bg-red-50 text-red-700 border-t border-gray-200",children:[a.jsx(Du,{className:"h-5 w-5 mr-3 flex-shrink-0"}),a.jsxs("div",{children:[a.jsx("div",{className:"font-medium text-base",children:"Remove Stakeholder"}),a.jsx("div",{className:"text-xs text-gray-500",children:"Remove from a session you manage"})]})]}),(S.roles.isSystemAdmin||S.roles.sessionAdminCount>0||S.roles.stakeholderSessionCount>0)&&a.jsxs("button",{onClick:()=>ds(S.id,S.name),className:"w-full px-4 py-3 text-left flex items-center hover:bg-gray-50 text-gray-700 border-t border-gray-200",children:[a.jsx(Du,{className:"h-5 w-5 mr-3 flex-shrink-0"}),a.jsxs("div",{children:[a.jsx("div",{className:"font-medium text-base",children:"Remove All Roles"}),a.jsx("div",{className:"text-xs text-gray-500",children:"Remove from all sessions"})]})]}),(q==="system-admin"||q==="session-admin"&&S.roles.stakeholderSessionCount>0&&((I=S.stakeholderInSessions)==null?void 0:I.some(Y=>V.some(ne=>ne.id===Y.id)))&&!Z.has(S.email))&&a.jsx("div",{className:"px-3 py-2 text-xs font-semibold text-gray-500 uppercase border-t border-gray-200",children:"User Functions"}),q==="system-admin"&&a.jsxs("button",{onClick:()=>{pt(S),Pe(S.name),Ar(S.email),Ne(!0),C(null)},className:"w-full px-4 py-3 text-left flex items-center hover:bg-[#1E5461]/10 text-[#1E5461] border-t border-gray-200",children:[a.jsx(td,{className:"h-5 w-5 mr-3 flex-shrink-0"}),a.jsxs("div",{children:[a.jsx("div",{className:"font-medium text-base",children:"Edit User Profile"}),a.jsx("div",{className:"text-xs text-gray-500",children:"Update name and email"})]})]}),(q==="system-admin"||q==="session-admin"&&S.roles.stakeholderSessionCount>0&&((U=S.stakeholderInSessions)==null?void 0:U.some(Y=>V.some(ne=>ne.id===Y.id))))&&!Z.has(S.email)&&a.jsxs("button",{onClick:()=>{C(null),fs(S.id,S.name)},className:`w-full px-4 py-3 text-left flex items-center hover:bg-[#8B5A4A]/10 text-[#8B5A4A] border-t border-gray-200 ${S.id===(e==null?void 0:e.id)||q==="system-admin"&&tr.has(S.id)?"opacity-50 cursor-not-allowed":""}`,disabled:S.id===(e==null?void 0:e.id)||q==="system-admin"&&tr.has(S.id),children:[a.jsx(Xi,{className:"h-5 w-5 mr-3 flex-shrink-0"}),a.jsxs("div",{children:[a.jsx("div",{className:"font-medium text-base",children:q==="session-admin"?"Remove Stakeholder":"Delete User"}),a.jsx("div",{className:"text-xs text-gray-500",children:q==="session-admin"?"Remove from all your sessions":S.id===(e==null?void 0:e.id)?"Cannot delete your own account":tr.has(S.id)?`Cannot delete protected account${wn(S)?` (${wn(S)})`:""}`:"Permanently delete this user"})]})]})]})})]})})]}),a.jsx("div",{className:"mt-2",children:Di(S)})]}),a.jsxs("div",{className:"p-4 space-y-3",children:[a.jsxs("div",{children:[a.jsx("div",{className:"text-xs font-semibold text-gray-500 uppercase mb-1",children:"Sessions"}),a.jsxs("div",{className:"space-y-1",children:[S.roles.sessionAdminCount>0&&a.jsxs("div",{className:"space-y-1",children:[a.jsxs("div",{className:"inline-flex items-center gap-1.5 px-2.5 py-1 rounded border text-xs font-medium",style:{borderColor:"#576C71",color:"#576C71"},children:[a.jsx(KS,{className:"h-3.5 w-3.5 flex-shrink-0",style:{fill:"#576C71",color:"#576C71"}}),a.jsxs("span",{children:[S.roles.sessionAdminCount," as Session Admin"]})]}),S.adminInSessions&&S.adminInSessions.length>0&&a.jsx(a.Fragment,{children:(()=>{const ne=me(S.adminInSessions)||S.adminInSessions[0],W=S.adminInSessions.length>1,$=(A==null?void 0:A.userId)===S.id&&(A==null?void 0:A.role)==="admin";return a.jsxs(a.Fragment,{children:[ne&&a.jsxs("button",{onClick:async _e=>{_e.stopPropagation(),await r(ne),s("/admin")},className:"ml-6 text-left text-sm text-gray-700 hover:text-gray-900 hover:underline",children:[a.jsx("div",{children:ne.title||"Unnamed Session"}),a.jsx("div",{className:"text-xs text-gray-500 mt-0.5",children:lr(ne)})]}),W&&a.jsxs("button",{onClick:_e=>{_e.stopPropagation(),L($?null:{userId:S.id,role:"admin"})},className:"ml-6 text-xs text-gray-500 hover:text-gray-700 hover:underline mt-1 block flex items-center gap-1.5",style:{minWidth:"70px"},children:[a.jsx("span",{className:"inline-flex items-center justify-center w-4 h-4 border border-gray-400 rounded text-gray-600",children:$?a.jsx(Gu,{className:"h-2.5 w-2.5"}):a.jsx(Un,{className:"h-2.5 w-2.5"})}),$?"Hide":"Show"]}),$&&a.jsx("div",{className:"ml-6 mt-1 space-y-1",children:S.adminInSessions.filter(_e=>_e.id!==(ne==null?void 0:ne.id)).map(_e=>a.jsxs("button",{onClick:async Oe=>{Oe.stopPropagation(),await r(_e),s("/admin")},className:"block text-sm text-left text-gray-700 hover:text-gray-900 hover:underline w-full",children:[a.jsx("div",{children:_e.title||"Unnamed Session"}),a.jsx("div",{className:"text-xs text-gray-500 mt-0.5",children:lr(_e)})]},_e.id))})]})})()})]}),S.roles.stakeholderSessionCount>0&&a.jsxs("div",{className:"space-y-1",children:[a.jsxs("div",{className:"inline-flex items-center gap-1.5 px-2.5 py-1 rounded border text-xs font-medium",style:{borderColor:"#8B5A4A",color:"#8B5A4A"},children:[a.jsx(gs,{className:"h-3.5 w-3.5 flex-shrink-0",style:{fill:"#8B5A4A",color:"#8B5A4A"}}),a.jsxs("span",{children:[S.roles.stakeholderSessionCount," as Stakeholder"]})]}),S.stakeholderInSessions&&S.stakeholderInSessions.length>0&&a.jsx(a.Fragment,{children:(()=>{const ne=me(S.stakeholderInSessions)||S.stakeholderInSessions[0],W=S.stakeholderInSessions.length>1,$=(A==null?void 0:A.userId)===S.id&&(A==null?void 0:A.role)==="stakeholder";return a.jsxs(a.Fragment,{children:[ne&&a.jsxs("button",{onClick:async _e=>{_e.stopPropagation(),await r(ne),s("/admin")},className:"ml-6 text-left text-sm text-gray-700 hover:text-gray-900 hover:underline",children:[a.jsx("div",{children:ne.title||"Unnamed Session"}),a.jsx("div",{className:"text-xs text-gray-500 mt-0.5",children:lr(ne)})]}),W&&a.jsxs("button",{onClick:_e=>{_e.stopPropagation(),L($?null:{userId:S.id,role:"stakeholder"})},className:"ml-6 text-xs text-gray-500 hover:text-gray-700 hover:underline mt-1 block flex items-center gap-1.5",style:{minWidth:"70px"},children:[a.jsx("span",{className:"inline-flex items-center justify-center w-4 h-4 border border-gray-400 rounded text-gray-600",children:$?a.jsx(Gu,{className:"h-2.5 w-2.5"}):a.jsx(Un,{className:"h-2.5 w-2.5"})}),$?"Hide":"Show"]}),$&&a.jsx("div",{className:"ml-6 mt-1 space-y-1",children:S.stakeholderInSessions.filter(_e=>_e.id!==(ne==null?void 0:ne.id)).map(_e=>a.jsxs("button",{onClick:async Oe=>{Oe.stopPropagation(),await r(_e),s("/admin")},className:"block text-sm text-left text-gray-700 hover:text-gray-900 hover:underline w-full",children:[a.jsx("div",{children:_e.title||"Unnamed Session"}),a.jsx("div",{className:"text-xs text-gray-500 mt-0.5",children:lr(_e)})]},_e.id))})]})})()})]}),S.roles.sessionAdminCount===0&&S.roles.stakeholderSessionCount===0&&a.jsx("span",{className:"text-sm text-gray-400",children:"No session roles"})]})]}),a.jsxs("div",{children:[a.jsx("div",{className:"text-xs font-semibold text-gray-500 uppercase mb-1",children:"Assigned"}),a.jsxs("div",{className:"space-y-2",children:[S.roles.sessionAdminCount===0&&S.roles.stakeholderSessionCount===0&&a.jsxs("div",{className:"flex items-center text-sm text-gray-700",children:[a.jsx(Zr,{className:"h-4 w-4 mr-2 text-gray-400 flex-shrink-0"}),a.jsx("span",{children:S.created_at?Tr(S.created_at):"N/A"}),a.jsxs("span",{className:"text-gray-500 text-xs ml-2",children:["by ",S.created_by_name||"System"]})]}),S.adminInSessions&&S.adminInSessions.length>0&&a.jsx("div",{className:"space-y-3",children:(()=>{const ne=me(S.adminInSessions)||S.adminInSessions[0];S.adminInSessions.length>1;const W=(A==null?void 0:A.userId)===S.id&&(A==null?void 0:A.role)==="admin";return a.jsxs(a.Fragment,{children:[ne&&a.jsxs("div",{className:"ml-5 space-y-1",children:[a.jsxs("div",{className:"flex items-center text-xs text-gray-700 whitespace-nowrap",children:[a.jsx(Zr,{className:"h-3 w-3 mr-1.5 text-gray-400 flex-shrink-0"}),a.jsx("span",{children:ne.assignedAt?Tr(ne.assignedAt):"N/A"})]}),a.jsxs("div",{className:"text-xs text-gray-500 ml-5",children:["by ",ne.assignedByName||"System"]})]}),W&&a.jsx("div",{className:"ml-5 mt-2 space-y-3",children:S.adminInSessions.filter($=>$.id!==(ne==null?void 0:ne.id)).map($=>a.jsxs("div",{className:"space-y-1",children:[a.jsxs("div",{className:"flex items-center text-xs text-gray-700 whitespace-nowrap",children:[a.jsx(Zr,{className:"h-3 w-3 mr-1.5 text-gray-400 flex-shrink-0"}),a.jsx("span",{children:$.assignedAt?Tr($.assignedAt):"N/A"})]}),a.jsxs("div",{className:"text-xs text-gray-500 ml-5",children:["by ",$.assignedByName||"System"]})]},$.id))})]})})()}),S.stakeholderInSessions&&S.stakeholderInSessions.length>0&&a.jsx("div",{className:S.adminInSessions&&S.adminInSessions.length>0?"pt-4 border-t border-gray-100 mt-4":"",children:a.jsx("div",{className:"space-y-3",children:(()=>{const ne=me(S.stakeholderInSessions)||S.stakeholderInSessions[0];S.stakeholderInSessions.length>1;const W=(A==null?void 0:A.userId)===S.id&&(A==null?void 0:A.role)==="stakeholder";return a.jsxs(a.Fragment,{children:[ne&&a.jsxs("div",{className:"ml-5 space-y-1",children:[a.jsxs("div",{className:"flex items-center text-xs text-gray-700 whitespace-nowrap",children:[a.jsx(Zr,{className:"h-3 w-3 mr-1.5 text-gray-400 flex-shrink-0"}),a.jsx("span",{children:ne.assignedAt?Tr(ne.assignedAt):"N/A"})]}),a.jsxs("div",{className:"text-xs text-gray-500 ml-5",children:["by ",ne.assignedByName||"System"]})]}),W&&a.jsx("div",{className:"ml-5 mt-2 space-y-3",children:S.stakeholderInSessions.filter($=>$.id!==(ne==null?void 0:ne.id)).map($=>a.jsxs("div",{className:"space-y-1",children:[a.jsxs("div",{className:"flex items-center text-xs text-gray-700 whitespace-nowrap",children:[a.jsx(Zr,{className:"h-3 w-3 mr-1.5 text-gray-400 flex-shrink-0"}),a.jsx("span",{children:$.assignedAt?Tr($.assignedAt):"N/A"})]}),a.jsxs("div",{className:"text-xs text-gray-500 ml-5",children:["by ",$.assignedByName||"System"]})]},$.id))})]})})()})})]})]})]})]},S.id)})}),a.jsxs("div",{className:"hidden md:block relative z-10 bg-white rounded-lg shadow-md overflow-visible",children:[a.jsxs("table",{className:"min-w-full divide-y divide-gray-200 rounded-t-lg",children:[a.jsx("thead",{className:"bg-gray-50",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"User"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Role"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Sessions"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider w-48",children:"Created"}),a.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),a.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:d.length===0?a.jsx("tr",{children:a.jsx("td",{colSpan:5,className:"px-6 py-8 text-center text-gray-500",children:y||j!=="all"?"No users found matching your filters.":"No users found."})}):d.map(S=>{var I,U,Y,ne;return a.jsxs("tr",{className:"hover:bg-gray-50 relative",onMouseEnter:()=>T(S.id),onMouseLeave:()=>T(null),children:[a.jsx("td",{className:"px-6 py-4 whitespace-nowrap align-top",children:a.jsxs("div",{children:[a.jsxs("div",{className:"text-sm font-medium text-gray-900",children:[S.name,S.id===(e==null?void 0:e.id)&&a.jsx("span",{className:"ml-2 text-xs text-[#c59f2d] font-semibold",children:"(You)"}),wn(S)&&a.jsxs("span",{className:"ml-2 text-xs text-[#c59f2d] font-semibold",children:["(",wn(S),")"]}),Ct(S)&&a.jsxs("span",{className:"ml-2 px-2 py-0.5 bg-red-100 text-red-700 text-xs font-medium rounded",children:["Duplicate (",ln(S),")"]})]}),a.jsx("div",{className:"text-sm text-gray-500",children:S.email})]})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap align-top",children:Di(S)}),a.jsx("td",{className:"px-6 py-4 text-sm text-gray-500 align-top relative overflow-visible",children:a.jsxs("div",{className:"space-y-2",children:[S.roles.sessionAdminCount===0&&S.roles.stakeholderSessionCount===0&&a.jsx("span",{className:"text-gray-400",children:"None"}),S.adminInSessions&&S.adminInSessions.length>0&&a.jsxs("div",{children:[a.jsx("div",{className:"mb-2",children:(()=>{var Ue;const W=((Ue=S.adminInSessions)==null?void 0:Ue.length)||0,$=W>1,_e=(A==null?void 0:A.userId)===S.id&&(A==null?void 0:A.role)==="admin",Oe=()=>a.jsxs("div",{className:"inline-flex items-center gap-1.5 px-2.5 py-1 rounded border text-xs font-medium group",style:{borderColor:"#576C71",color:"#576C71"},children:[a.jsx(KS,{className:"h-3.5 w-3.5 flex-shrink-0",style:{fill:"#576C71",color:"#576C71"}}),a.jsxs("span",{children:["Session Admin in ",W," session",W!==1?"s":""]}),$&&a.jsxs("span",{className:"inline-flex items-baseline gap-0.5",style:{color:"#576C71"},children:[_e?a.jsx(Gu,{className:"h-2.5 w-2.5 transition-all group-hover:brightness-150 mt-[3px]",style:{color:"#576C71"}}):a.jsx(Un,{className:"h-2.5 w-2.5 transition-all group-hover:brightness-150 mt-[3px]",style:{color:"#576C71"}}),a.jsx("span",{className:"text-[10px] transition-all group-hover:brightness-150",children:_e?"Hide":"Show"})]})]});return $?a.jsx("button",{onClick:We=>{We.stopPropagation(),L(_e?null:{userId:S.id,role:"admin"})},className:"text-left",children:a.jsx(Oe,{})}):a.jsx(Oe,{})})()}),(()=>{const $=me(S.adminInSessions)||S.adminInSessions[0],_e=(A==null?void 0:A.userId)===S.id&&(A==null?void 0:A.role)==="admin";return a.jsxs(a.Fragment,{children:[$&&a.jsxs("div",{className:"relative cursor-pointer",style:{marginLeft:"1.25rem",marginTop:"0.75rem"},onMouseEnter:()=>H(`${S.id}-${$.id}`),onMouseLeave:()=>H(null),onClick:async Oe=>{Oe.stopPropagation(),await r($),s("/admin")},children:[J===`${S.id}-${$.id}`&&a.jsx("div",{className:"absolute bg-blue-50 pointer-events-none z-0 rounded",style:{left:"-0.5rem",right:"-13rem",top:"-0.375rem",bottom:"-0.375rem",boxShadow:"0 0 0 1px rgb(191 219 254)",outline:"none"}}),a.jsxs("div",{className:"text-left text-sm text-gray-700 hover:text-gray-900 block relative z-10",style:{padding:0,margin:0,lineHeight:"1.25rem"},children:[a.jsx("div",{style:{height:"20px",lineHeight:"20px"},children:$.title||"Unnamed Session"}),a.jsx("div",{className:"text-xs text-gray-500",style:{height:"16px",lineHeight:"16px",marginTop:"2px"},children:lr($)})]})]}),_e&&a.jsx("div",{style:{marginTop:"0.5rem"},children:S.adminInSessions.filter(Oe=>Oe.id!==($==null?void 0:$.id)).map((Oe,Ue)=>a.jsxs("div",{className:"relative cursor-pointer",style:{marginTop:"0.75rem",marginLeft:"1.25rem"},onMouseEnter:()=>H(`${S.id}-${Oe.id}`),onMouseLeave:()=>H(null),onClick:async We=>{We.stopPropagation(),await r(Oe),s("/admin")},children:[J===`${S.id}-${Oe.id}`&&a.jsx("div",{className:"absolute bg-blue-50 pointer-events-none z-0 rounded",style:{left:"-0.5rem",right:"-13rem",top:"-0.375rem",bottom:"-0.375rem",boxShadow:"0 0 0 1px rgb(191 219 254)",outline:"none"}}),a.jsxs("div",{className:"block text-sm text-left text-gray-700 hover:text-gray-900 relative z-10",style:{padding:0,margin:0,lineHeight:"1.25rem"},children:[a.jsx("div",{style:{height:"20px",lineHeight:"20px"},children:Oe.title||"Unnamed Session"}),a.jsx("div",{className:"text-xs text-gray-500",style:{height:"16px",lineHeight:"16px",marginTop:"2px"},children:lr(Oe)})]})]},Oe.id))})]})})()]}),S.stakeholderInSessions&&S.stakeholderInSessions.length>0&&a.jsx("div",{className:S.adminInSessions&&S.adminInSessions.length>0?"pt-4 border-t border-gray-100 mt-4":"",children:a.jsxs("div",{children:[a.jsx("div",{className:"mb-2",children:(()=>{var Ue;const W=((Ue=S.stakeholderInSessions)==null?void 0:Ue.length)||0,$=W>1,_e=(A==null?void 0:A.userId)===S.id&&(A==null?void 0:A.role)==="stakeholder",Oe=()=>a.jsxs("div",{className:"inline-flex items-center gap-1.5 px-2.5 py-1 rounded border text-xs font-medium group",style:{borderColor:"#8B5A4A",color:"#8B5A4A"},children:[a.jsx(gs,{className:"h-3.5 w-3.5 flex-shrink-0",style:{fill:"#8B5A4A",color:"#8B5A4A"}}),a.jsxs("span",{children:["Stakeholder in ",W," session",W!==1?"s":""]}),$&&a.jsxs("span",{className:"inline-flex items-baseline gap-0.5",style:{color:"#8B5A4A"},children:[_e?a.jsx(Gu,{className:"h-2.5 w-2.5 transition-all group-hover:brightness-150 mt-[3px]",style:{color:"#8B5A4A"}}):a.jsx(Un,{className:"h-2.5 w-2.5 transition-all group-hover:brightness-150 mt-[3px]",style:{color:"#8B5A4A"}}),a.jsx("span",{className:"text-[10px] transition-all group-hover:brightness-150",children:_e?"Hide":"Show"})]})]});return $?a.jsx("button",{onClick:We=>{We.stopPropagation(),L(_e?null:{userId:S.id,role:"stakeholder"})},className:"text-left",children:a.jsx(Oe,{})}):a.jsx(Oe,{})})()}),(()=>{const $=me(S.stakeholderInSessions)||S.stakeholderInSessions[0],_e=(A==null?void 0:A.userId)===S.id&&(A==null?void 0:A.role)==="stakeholder";return a.jsxs(a.Fragment,{children:[$&&a.jsxs("div",{className:"relative cursor-pointer",style:{marginLeft:"1.25rem",marginTop:"0.75rem"},onMouseEnter:()=>H(`${S.id}-${$.id}`),onMouseLeave:()=>H(null),onClick:async Oe=>{Oe.stopPropagation(),await r($),s("/admin")},children:[J===`${S.id}-${$.id}`&&a.jsx("div",{className:"absolute bg-blue-50 pointer-events-none z-0 rounded",style:{left:"-0.5rem",right:"-13rem",top:"-0.25rem",bottom:"-0.25rem",boxShadow:"0 0 0 1px rgb(191 219 254)",outline:"none"}}),a.jsxs("div",{className:"text-left text-sm text-gray-700 hover:text-gray-900 hover:underline block relative z-10",style:{padding:0,margin:0,lineHeight:"1.25rem"},children:[a.jsx("div",{style:{height:"20px",lineHeight:"20px"},children:$.title||"Unnamed Session"}),a.jsx("div",{className:"text-xs text-gray-500",style:{height:"16px",lineHeight:"16px",marginTop:"2px"},children:lr($)})]})]}),_e&&a.jsx("div",{style:{marginTop:"0.5rem"},children:S.stakeholderInSessions.filter(Oe=>Oe.id!==($==null?void 0:$.id)).map((Oe,Ue)=>a.jsxs("div",{className:"relative cursor-pointer",style:{marginTop:"0.75rem",marginLeft:"1.25rem"},onMouseEnter:()=>H(`${S.id}-${Oe.id}`),onMouseLeave:()=>H(null),onClick:async We=>{We.stopPropagation(),await r(Oe),s("/admin")},children:[J===`${S.id}-${Oe.id}`&&a.jsx("div",{className:"absolute bg-blue-50 pointer-events-none z-0 rounded",style:{left:"-0.5rem",right:"-13rem",top:"-0.25rem",bottom:"-0.25rem",boxShadow:"0 0 0 1px rgb(191 219 254)",outline:"none"}}),a.jsxs("div",{className:"block text-sm text-left text-gray-700 hover:text-gray-900 hover:underline relative z-10",style:{padding:0,margin:0,lineHeight:"1.25rem"},children:[a.jsx("div",{style:{height:"20px",lineHeight:"20px"},children:Oe.title||"Unnamed Session"}),a.jsx("div",{className:"text-xs text-gray-500",style:{height:"16px",lineHeight:"16px",marginTop:"2px"},children:lr(Oe)})]})]},Oe.id))})]})})()]})})]})}),a.jsx("td",{className:"px-6 py-4 text-sm text-gray-500 align-top w-48 relative overflow-visible",children:a.jsxs("div",{className:"space-y-2",children:[S.roles.sessionAdminCount===0&&S.roles.stakeholderSessionCount===0&&a.jsxs("div",{className:"flex items-center text-gray-700 whitespace-nowrap",children:[a.jsx(Zr,{className:"h-4 w-4 mr-1.5 text-gray-400 flex-shrink-0"}),a.jsx("span",{children:S.created_at?Tr(S.created_at):"N/A"}),a.jsxs("span",{className:"text-gray-500 text-xs ml-2",children:["by ",S.created_by_name||"System"]})]}),S.adminInSessions&&S.adminInSessions.length>0&&a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center text-gray-700 whitespace-nowrap",style:{marginBottom:"0.5rem",height:"30px"},children:[a.jsx(Zr,{className:"h-4 w-4 mr-1.5 text-gray-400 flex-shrink-0"}),a.jsx("span",{children:S.created_at?Tr(S.created_at):"N/A"}),a.jsxs("span",{className:"text-gray-500 text-xs ml-2",children:["by ",S.created_by_name||"System"]})]}),(()=>{const $=me(S.adminInSessions)||S.adminInSessions[0];S.adminInSessions.length>1;const _e=(A==null?void 0:A.userId)===S.id&&(A==null?void 0:A.role)==="admin";return a.jsxs(a.Fragment,{children:[$&&a.jsx("div",{className:"relative cursor-pointer",style:{marginLeft:"1.25rem",marginTop:"0.5rem",marginBottom:"0.25rem"},onMouseEnter:()=>H(`${S.id}-${$.id}`),onMouseLeave:()=>H(null),onClick:async Oe=>{Oe.stopPropagation(),await r($),s("/admin")},children:a.jsxs("div",{className:"relative z-10",style:{padding:0,margin:0,lineHeight:"1.25rem"},children:[a.jsxs("div",{className:"flex items-center",style:{height:"20px",lineHeight:"20px"},children:[a.jsx(Zr,{className:"h-3 w-3 mr-1.5 text-gray-400 flex-shrink-0"}),a.jsx("span",{className:"text-xs text-gray-700 whitespace-nowrap",children:$.assignedAt?Tr($.assignedAt):"N/A"})]}),a.jsxs("div",{className:"text-xs text-gray-500",style:{height:"16px",lineHeight:"16px",marginTop:"2px",marginLeft:"18px"},children:["by ",$.assignedByName||"System"]})]})}),_e&&a.jsx("div",{style:{marginTop:"0.5rem"},children:S.adminInSessions.filter(Oe=>Oe.id!==($==null?void 0:$.id)).map((Oe,Ue)=>a.jsx("div",{className:"relative cursor-pointer",style:{marginTop:"0.75rem",marginLeft:"1.25rem",marginBottom:"0.25rem"},onMouseEnter:()=>H(`${S.id}-${Oe.id}`),onMouseLeave:()=>H(null),onClick:async We=>{We.stopPropagation(),await r(Oe),s("/admin")},children:a.jsxs("div",{className:"relative z-10",style:{padding:0,margin:0,lineHeight:"1.25rem"},children:[a.jsxs("div",{className:"flex items-center",style:{height:"20px",lineHeight:"20px"},children:[a.jsx(Zr,{className:"h-3 w-3 mr-1.5 text-gray-400 flex-shrink-0"}),a.jsx("span",{className:"text-xs text-gray-700 whitespace-nowrap",children:Oe.assignedAt?Tr(Oe.assignedAt):"N/A"})]}),a.jsxs("div",{className:"text-xs text-gray-500",style:{height:"16px",lineHeight:"16px",marginTop:"2px",marginLeft:"18px"},children:["by ",Oe.assignedByName||"System"]})]})},Oe.id))})]})})()]}),S.stakeholderInSessions&&S.stakeholderInSessions.length>0&&a.jsx("div",{className:S.adminInSessions&&S.adminInSessions.length>0?"pt-4 border-t border-gray-100 mt-4":"",children:a.jsxs("div",{children:[(!S.adminInSessions||S.adminInSessions.length===0)&&a.jsxs("div",{className:"flex items-center text-gray-700 whitespace-nowrap",style:{marginBottom:"0.5rem",height:"30px"},children:[a.jsx(Zr,{className:"h-4 w-4 mr-1.5 text-gray-400 flex-shrink-0"}),a.jsx("span",{children:S.created_at?Tr(S.created_at):"N/A"}),a.jsxs("span",{className:"text-gray-500 text-xs ml-2",children:["by ",S.created_by_name||"System"]})]}),S.adminInSessions&&S.adminInSessions.length>0&&a.jsx("div",{style:{height:"26px",marginBottom:"0.5rem",visibility:"hidden"},children:a.jsxs("div",{className:"inline-flex items-center gap-1.5 px-2.5 py-1 rounded border text-xs font-medium",children:[a.jsx(gs,{className:"h-3.5 w-3.5"}),a.jsx("span",{children:"Stakeholder"})]})}),(()=>{const $=me(S.stakeholderInSessions)||S.stakeholderInSessions[0];S.stakeholderInSessions.length>1;const _e=(A==null?void 0:A.userId)===S.id&&(A==null?void 0:A.role)==="stakeholder";return a.jsxs(a.Fragment,{children:[$&&a.jsx("div",{className:"relative cursor-pointer",style:{marginLeft:"1.25rem",marginTop:"0.5rem",marginBottom:"0.25rem"},onMouseEnter:()=>H(`${S.id}-${$.id}`),onMouseLeave:()=>H(null),onClick:async Oe=>{Oe.stopPropagation(),await r($),s("/admin")},children:a.jsxs("div",{className:"relative z-10",style:{padding:0,margin:0,lineHeight:"1.25rem"},children:[a.jsxs("div",{className:"flex items-center",style:{height:"20px",lineHeight:"20px"},children:[a.jsx(Zr,{className:"h-3 w-3 mr-1.5 text-gray-400 flex-shrink-0"}),a.jsx("span",{className:"text-xs text-gray-700 whitespace-nowrap",children:$.assignedAt?Tr($.assignedAt):"N/A"})]}),a.jsxs("div",{className:"text-xs text-gray-500",style:{height:"16px",lineHeight:"16px",marginTop:"2px",marginLeft:"18px"},children:["by ",$.assignedByName||"System"]})]})}),_e&&a.jsx("div",{style:{marginTop:"0.5rem"},children:S.stakeholderInSessions.filter(Oe=>Oe.id!==($==null?void 0:$.id)).map((Oe,Ue)=>a.jsx("div",{className:"relative cursor-pointer",style:{marginTop:"0.75rem",marginLeft:"1.25rem",marginBottom:"0.25rem"},onMouseEnter:()=>H(`${S.id}-${Oe.id}`),onMouseLeave:()=>H(null),onClick:async We=>{We.stopPropagation(),await r(Oe),s("/admin")},children:a.jsxs("div",{className:"relative z-10",style:{padding:0,margin:0,lineHeight:"1.25rem"},children:[a.jsxs("div",{className:"flex items-center",style:{height:"20px",lineHeight:"20px"},children:[a.jsx(Zr,{className:"h-3 w-3 mr-1.5 text-gray-400 flex-shrink-0"}),a.jsx("span",{className:"text-xs text-gray-700 whitespace-nowrap",children:Oe.assignedAt?Tr(Oe.assignedAt):"N/A"})]}),a.jsxs("div",{className:"text-xs text-gray-500",style:{height:"16px",lineHeight:"16px",marginTop:"2px"},children:["by ",Oe.assignedByName||"System"]})]})},Oe.id))})]})})()]})})]})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium align-top",children:a.jsx("div",{className:"flex items-center justify-end gap-2",children:a.jsxs("div",{className:`relative inline-block transition-all md:transition-opacity ${O===S.id?S.id===(e==null?void 0:e.id)?"opacity-50 visible":"opacity-100 visible":"md:opacity-0 md:invisible opacity-100 visible"}`,ref:W=>{ce.current[S.id]=W},children:[a.jsx("button",{onClick:()=>C(E===S.id?null:S.id),className:"p-2 rounded-md hover:bg-gray-100 transition-colors",disabled:S.id===(e==null?void 0:e.id),title:S.id===(e==null?void 0:e.id)?"Cannot modify your own permissions":"Change user role",children:a.jsx(VS,{className:"h-5 w-5 text-gray-600"})}),E===S.id&&S.id!==(e==null?void 0:e.id)&&a.jsx("div",{className:"fixed mt-1 w-64 bg-white border border-gray-200 rounded-lg shadow-lg z-[100]",style:{top:((I=ce.current[S.id])==null?void 0:I.getBoundingClientRect().bottom)??0,right:window.innerWidth-(((U=ce.current[S.id])==null?void 0:U.getBoundingClientRect().right)??0)},children:a.jsxs("div",{className:"py-1",children:[a.jsx("div",{className:"px-3 py-2 text-xs font-semibold text-gray-500 uppercase border-b border-gray-200",children:"Change User Role"}),q==="system-admin"&&a.jsxs(a.Fragment,{children:[S.roles.isSystemAdmin?a.jsxs("button",{onClick:()=>Dn(S.id,!0),className:"w-full px-4 py-2 text-left flex items-center hover:bg-red-50 text-red-700",children:[a.jsx(vs,{className:"h-4 w-4 mr-3"}),a.jsxs("div",{children:[a.jsx("div",{className:"font-medium",children:"Remove System Admin"}),a.jsx("div",{className:"text-xs text-gray-500",children:"Revoke global admin access"})]})]}):a.jsxs("button",{onClick:()=>Dn(S.id,!1),className:"w-full px-4 py-2 text-left flex items-center hover:bg-[#C89212]/10 text-[#C89212]",children:[a.jsx(vs,{className:"h-4 w-4 mr-3"}),a.jsxs("div",{children:[a.jsx("div",{className:"font-medium",children:"Make System Admin"}),a.jsx("div",{className:"text-xs text-gray-500",children:"Grant global admin access"})]})]}),Ri(S,"session-admin")&&a.jsxs("button",{onClick:()=>bn(S,"session-admin"),className:"w-full px-4 py-2 text-left flex items-center hover:bg-[#576C71]/10 text-[#576C71] border-t border-gray-200",children:[a.jsx(Bn,{className:"h-4 w-4 mr-3"}),a.jsxs("div",{children:[a.jsx("div",{className:"font-medium",children:"Make Session Admin"}),a.jsx("div",{className:"text-xs text-gray-500",children:"Add to a session as admin"})]})]})]}),Ri(S,"stakeholder")&&a.jsxs("button",{onClick:()=>bn(S,"stakeholder"),className:"w-full px-4 py-2 text-left flex items-center hover:bg-[#8B5A4A]/10 text-[#8B5A4A] border-t border-gray-200",children:[a.jsx(gs,{className:"h-4 w-4 mr-3"}),a.jsxs("div",{children:[a.jsx("div",{className:"font-medium",children:"Make Stakeholder"}),a.jsx("div",{className:"text-xs text-gray-500",children:"Add to a session as stakeholder"})]})]}),q==="session-admin"&&S.stakeholderInSessions&&S.stakeholderInSessions.length>0&&S.stakeholderInSessions.some(W=>ee.includes(W.id))&&a.jsxs("button",{onClick:()=>bn(S,"remove-stakeholder"),className:"w-full px-4 py-2 text-left flex items-center hover:bg-red-50 text-red-700 border-t border-gray-200",children:[a.jsx(Du,{className:"h-4 w-4 mr-3"}),a.jsxs("div",{children:[a.jsx("div",{className:"font-medium",children:"Remove Stakeholder"}),a.jsx("div",{className:"text-xs text-gray-500",children:"Remove from a session you manage"})]})]}),(S.roles.isSystemAdmin||S.roles.sessionAdminCount>0||S.roles.stakeholderSessionCount>0)&&a.jsxs("button",{onClick:()=>ds(S.id,S.name),className:"w-full px-4 py-2 text-left flex items-center hover:bg-gray-50 text-gray-700 border-t border-gray-200",children:[a.jsx(Du,{className:"h-4 w-4 mr-3"}),a.jsxs("div",{children:[a.jsx("div",{className:"font-medium",children:"Remove All Roles"}),a.jsx("div",{className:"text-xs text-gray-500",children:"Remove from all sessions"})]})]}),(q==="system-admin"||q==="session-admin"&&S.roles.stakeholderSessionCount>0&&((Y=S.stakeholderInSessions)==null?void 0:Y.some(W=>V.some($=>$.id===W.id)))&&!Z.has(S.email))&&a.jsx("div",{className:"px-3 py-2 text-xs font-semibold text-gray-500 uppercase border-t border-gray-200",children:"User Functions"}),q==="system-admin"&&a.jsxs("button",{onClick:()=>{pt(S),Pe(S.name),Ar(S.email),Ne(!0),C(null)},className:"w-full px-4 py-2 text-left flex items-center hover:bg-[#1E5461]/10 text-[#1E5461] border-t border-gray-200",children:[a.jsx(td,{className:"h-4 w-4 mr-3"}),a.jsxs("div",{children:[a.jsx("div",{className:"font-medium",children:"Edit User Profile"}),a.jsx("div",{className:"text-xs text-gray-500",children:"Update name and email"})]})]}),(q==="system-admin"||q==="session-admin"&&S.roles.stakeholderSessionCount>0&&((ne=S.stakeholderInSessions)==null?void 0:ne.some(W=>V.some($=>$.id===W.id))))&&!Z.has(S.email)&&a.jsxs("button",{onClick:()=>{C(null),fs(S.id,S.name)},className:`w-full px-4 py-2 text-left flex items-center hover:bg-[#8B5A4A]/10 text-[#8B5A4A] border-t border-gray-200 ${S.id===(e==null?void 0:e.id)||q==="system-admin"&&tr.has(S.id)?"opacity-50 cursor-not-allowed":""}`,disabled:S.id===(e==null?void 0:e.id)||q==="system-admin"&&tr.has(S.id),children:[a.jsx(Xi,{className:"h-4 w-4 mr-3"}),a.jsxs("div",{children:[a.jsx("div",{className:"font-medium",children:q==="session-admin"?"Remove Stakeholder":"Delete User"}),a.jsx("div",{className:"text-xs text-gray-500",children:q==="session-admin"?"Remove from all your sessions":S.id===(e==null?void 0:e.id)?"Cannot delete your own account":tr.has(S.id)?`Cannot delete protected account${wn(S)?` (${wn(S)})`:""}`:"Permanently delete this user"})]})]})]})})]})})})]},S.id)})})]}),a.jsx("div",{className:"bg-gray-50 px-6 py-4 border-t border-gray-200",children:a.jsxs("div",{className:"flex flex-wrap gap-4 text-sm",children:[a.jsxs("div",{className:"flex items-center",children:[a.jsx(ns,{className:"h-4 w-4 mr-2 text-gray-500"}),a.jsxs("span",{className:"text-gray-600",children:["Total Users: ",a.jsx("strong",{children:l.length})]})]}),a.jsxs("div",{className:"flex items-center",children:[a.jsx(vs,{className:"h-4 w-4 mr-2 text-[#C89212]"}),a.jsxs("span",{className:"text-gray-600",children:["System Admins: ",a.jsx("strong",{children:l.filter(S=>S.roles.isSystemAdmin).length})]})]}),a.jsxs("div",{className:"flex items-center",children:[a.jsx(Bn,{className:"h-4 w-4 mr-2 text-[#576C71]"}),a.jsxs("span",{className:"text-gray-600",children:["Session Admins: ",a.jsx("strong",{children:l.filter(S=>S.roles.sessionAdminCount>0).length})]})]}),a.jsxs("div",{className:"flex items-center",children:[a.jsx(gs,{className:"h-4 w-4 mr-2 text-[#8B5A4A]"}),a.jsxs("span",{className:"text-gray-600",children:["Stakeholders: ",a.jsx("strong",{children:l.filter(S=>S.roles.stakeholderSessionCount>0).length})]})]})]})})]}),a.jsx("div",{className:"md:hidden mt-4 bg-white rounded-lg shadow-md p-4",children:a.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[a.jsxs("div",{className:"flex items-center",children:[a.jsx(ns,{className:"h-5 w-5 mr-2 text-gray-500 flex-shrink-0"}),a.jsxs("div",{children:[a.jsx("div",{className:"text-xs text-gray-500",children:"Total"}),a.jsx("div",{className:"text-lg font-bold text-gray-900",children:l.length})]})]}),a.jsxs("div",{className:"flex items-center",children:[a.jsx(vs,{className:"h-5 w-5 mr-2 text-[#C89212] flex-shrink-0"}),a.jsxs("div",{children:[a.jsx("div",{className:"text-xs text-gray-500",children:"Sys Admins"}),a.jsx("div",{className:"text-lg font-bold text-gray-900",children:l.filter(S=>S.roles.isSystemAdmin).length})]})]}),a.jsxs("div",{className:"flex items-center",children:[a.jsx(Bn,{className:"h-5 w-5 mr-2 text-[#576C71] flex-shrink-0"}),a.jsxs("div",{children:[a.jsx("div",{className:"text-xs text-gray-500",children:"Session Admins"}),a.jsx("div",{className:"text-lg font-bold text-gray-900",children:l.filter(S=>S.roles.sessionAdminCount>0).length})]})]}),a.jsxs("div",{className:"flex items-center",children:[a.jsx(gs,{className:"h-5 w-5 mr-2 text-[#8B5A4A] flex-shrink-0"}),a.jsxs("div",{children:[a.jsx("div",{className:"text-xs text-gray-500",children:"Stakeholders"}),a.jsx("div",{className:"text-lg font-bold text-gray-900",children:l.filter(S=>S.roles.stakeholderSessionCount>0).length})]})]})]})}),(B||oe)&&a.jsx("div",{className:"mt-8 flex justify-center",children:a.jsxs("div",{className:"inline-flex items-center bg-gray-100 rounded-lg p-1",children:[a.jsxs("button",{onClick:()=>{(oe||B)&&Te("session-admin")},className:`px-4 py-2 rounded-md text-sm font-medium transition-colors flex items-center ${q==="session-admin"?"bg-white text-[#2d4660] shadow-sm":"text-gray-600 hover:text-gray-900"}`,title:"Session Admin View",children:[a.jsx(Bn,{className:"h-4 w-4 inline mr-2"}),"Session Admin"]}),a.jsxs("button",{onClick:()=>{B&&Te("system-admin")},className:`px-4 py-2 rounded-md text-sm font-medium transition-colors flex items-center ${q==="system-admin"?"bg-white text-[#2d4660] shadow-sm":"text-gray-600 hover:text-gray-900"}`,disabled:!B,title:B?"System Admin View":"Only available for System Admins",children:[a.jsx(vs,{className:"h-4 w-4 inline mr-2"}),"System Admin"]})]})})]}),a.jsx("footer",{className:"mt-12 bg-gray-50 border-t border-gray-200",children:a.jsxs("div",{className:"container mx-auto px-4 py-6 max-w-6xl",children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 text-sm text-gray-600",children:[a.jsxs("div",{children:[a.jsx("h3",{className:"font-semibold text-gray-900 mb-2",children:"New Millennium Building Systems"}),a.jsxs("p",{className:"text-xs leading-relaxed",children:["A Steel Dynamics Company",a.jsx("br",{}),"Innovation in structural steel manufacturing"]})]}),a.jsxs("div",{children:[a.jsx("h3",{className:"font-semibold text-gray-900 mb-2",children:"Quick Links"}),a.jsxs("ul",{className:"space-y-1 text-xs",children:[a.jsx("li",{children:a.jsx("a",{href:"https://www.steeldynamics.com",target:"_blank",rel:"noopener noreferrer",className:"hover:text-[#2d4660] transition-colors",children:"Steel Dynamics Inc."})}),a.jsx("li",{children:a.jsx("a",{href:"https://www.newmill.com",target:"_blank",rel:"noopener noreferrer",className:"hover:text-[#2d4660] transition-colors",children:"New Millennium"})})]})]}),a.jsxs("div",{children:[a.jsx("h3",{className:"font-semibold text-gray-900 mb-2",children:"Need Help?"}),a.jsx("p",{className:"text-xs",children:"Contact your Product Owner or IT administrator for assistance with user management."})]})]}),a.jsx("div",{className:"mt-6 pt-6 border-t border-gray-200 text-center text-xs text-gray-500",children:a.jsx("p",{children:" 2025 New Millennium Building Systems, LLC. All rights reserved."})})]})}),le&&ge&&Q&&a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4 overflow-y-auto",onClick:Pi,children:a.jsx("div",{className:"bg-white rounded-lg shadow-xl max-w-xl w-full my-8",onClick:S=>S.stopPropagation(),children:a.jsxs("div",{className:"p-6 overflow-visible",children:[a.jsxs("div",{className:"flex items-start justify-between mb-2",children:[a.jsxs("div",{className:"flex-1",children:[a.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-2",children:Q==="session-admin"?"Add Session Admin":Q==="remove-stakeholder"?"Remove Stakeholder":"Add Stakeholder"}),a.jsx("p",{className:"text-sm text-gray-600",children:Q==="remove-stakeholder"?a.jsxs(a.Fragment,{children:["Select sessions to remove ",a.jsx("strong",{children:ge.name})," as a stakeholder."]}):a.jsxs(a.Fragment,{children:["Select sessions to add ",a.jsx("strong",{children:ge.name})," as ",Q==="session-admin"?"an admin":"a stakeholder","."]})})]}),a.jsx("button",{onClick:Pi,className:"ml-4 p-1 rounded-md text-gray-400 hover:text-gray-600 hover:bg-gray-100 transition-colors flex-shrink-0","aria-label":"Close modal",children:a.jsx(Ms,{className:"h-5 w-5"})})]}),a.jsx("div",{className:"mb-6",children:a.jsx(GZ,{products:Yt,sessions:uo(Q),selectedProductId:ft,onProductChange:S=>{Dt(S),ie([]),Xt(!0)},useAllSessions:Nt,onToggleAllSessions:S=>{Xt(S),S&&ie([])},selectedSessionIds:M,onSessionToggle:S=>{M.includes(S)?ie(M.filter(I=>I!==S)):ie([...M,S])},getSessionStatus:jn,formatSessionDateRange:lr,filterSessions:ci})}),a.jsx("div",{className:"flex justify-end mt-6",children:a.jsx("button",{onClick:Oi,disabled:!ft||!Nt&&M.length===0,className:`px-6 py-2.5 rounded-lg transition-colors ${ft&&(Nt||M.length>0)?Q==="remove-stakeholder"?"bg-red-600 text-white hover:bg-red-700":"bg-[#4f6d8e] text-white hover:bg-[#3d5670]":"bg-gray-300 text-gray-500 cursor-not-allowed"}`,children:(()=>{const I=(Nt?ci(uo(Q),ft||"").length:M.length)>1;return Q==="remove-stakeholder"?`Remove from Session${I?"s":""}`:Q==="session-admin"?`Add to Session${I?"s":""} as Session Admin`:`Add to Session${I?"s":""} as a Stakeholder`})()})})]})})}),pe&&ye&&a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:a.jsx("div",{className:"bg-white rounded-lg shadow-xl max-w-xl w-full max-h-[90vh] overflow-y-auto",children:a.jsxs("div",{className:"p-6",children:[a.jsxs("div",{className:"flex items-start mb-4",children:[a.jsx("div",{className:"flex-shrink-0 w-12 h-12 rounded-full bg-red-100 flex items-center justify-center",children:a.jsx(Du,{className:"h-6 w-6 text-red-600"})}),a.jsxs("div",{className:"ml-4 flex-1",children:[a.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-1",children:"Delete User Account"}),a.jsx("p",{className:"text-sm text-gray-600",children:"This action cannot be undone. Please review the details below."})]})]}),a.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 mb-4",children:[a.jsxs("div",{className:"flex items-center mb-3",children:[a.jsx(gs,{className:"h-5 w-5 text-gray-400 mr-2"}),a.jsxs("div",{children:[a.jsx("div",{className:"font-medium text-gray-900",children:ye.name}),a.jsx("div",{className:"text-sm text-gray-500",children:ye.email})]})]}),a.jsxs("div",{className:"space-y-2 border-t border-gray-200 pt-3",children:[a.jsx("div",{className:"text-xs font-semibold text-gray-500 uppercase",children:"Current Roles"}),ye.roles.isSystemAdmin&&a.jsxs("div",{className:"flex items-center text-sm",children:[a.jsx(vs,{className:"h-4 w-4 mr-2 text-[#C89212]"}),a.jsx("span",{className:"text-gray-700",children:"System Admin"})]}),ye.roles.sessionAdminCount>0&&a.jsxs("div",{className:"flex items-center text-sm",children:[a.jsx(Bn,{className:"h-4 w-4 mr-2 text-[#576C71]"}),a.jsxs("span",{className:"text-gray-700",children:["Session Admin in ",ye.roles.sessionAdminCount," session",ye.roles.sessionAdminCount!==1?"s":""]})]}),ye.roles.stakeholderSessionCount>0&&a.jsxs("div",{className:"flex items-center text-sm",children:[a.jsx(gs,{className:"h-4 w-4 mr-2 text-[#8B5A4A]"}),a.jsxs("span",{className:"text-gray-700",children:["Stakeholder in ",ye.roles.stakeholderSessionCount," session",ye.roles.stakeholderSessionCount!==1?"s":""]})]}),!ye.roles.isSystemAdmin&&ye.roles.sessionAdminCount===0&&ye.roles.stakeholderSessionCount===0&&a.jsx("div",{className:"text-sm text-gray-500",children:"No roles assigned"})]})]}),ye.adminInSessions&&ye.adminInSessions.length>0||ye.stakeholderInSessions&&ye.stakeholderInSessions.length>0?a.jsxs("div",{className:"mb-4",children:[a.jsx("div",{className:"text-sm font-semibold text-gray-700 mb-2",children:"User will be removed from these sessions:"}),a.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-3 max-h-48 overflow-y-auto",children:[ye.adminInSessions&&ye.adminInSessions.length>0&&a.jsxs("div",{className:"mb-3",children:[a.jsxs("div",{className:"text-xs font-semibold text-gray-600 mb-1.5 flex items-center",children:[a.jsx(Bn,{className:"h-3.5 w-3.5 mr-1.5 text-[#576C71]"}),"Admin Sessions (",ye.adminInSessions.length,")"]}),a.jsx("div",{className:"space-y-1 ml-5",children:ye.adminInSessions.map(S=>a.jsxs("div",{className:"text-sm text-gray-700",children:[" ",S.title||"Unnamed Session"]},S.id))})]}),ye.stakeholderInSessions&&ye.stakeholderInSessions.length>0&&a.jsxs("div",{children:[a.jsxs("div",{className:"text-xs font-semibold text-gray-600 mb-1.5 flex items-center",children:[a.jsx(gs,{className:"h-3.5 w-3.5 mr-1.5 text-[#8B5A4A]"}),"Stakeholder Sessions (",ye.stakeholderInSessions.length,")"]}),a.jsx("div",{className:"space-y-1 ml-5",children:ye.stakeholderInSessions.map(S=>a.jsxs("div",{className:"text-sm text-gray-700",children:[" ",S.title||"Unnamed Session"]},S.id))})]})]})]}):null,a.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-3 mb-4",children:a.jsxs("div",{className:"flex",children:[a.jsx("div",{className:"flex-shrink-0",children:a.jsx("svg",{className:"h-5 w-5 text-yellow-600",fill:"currentColor",viewBox:"0 0 20 20",children:a.jsx("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})})}),a.jsxs("div",{className:"ml-3",children:[a.jsx("h3",{className:"text-sm font-medium text-yellow-800",children:"Warning: This action is permanent"}),a.jsx("div",{className:"mt-1 text-sm text-yellow-700",children:a.jsxs("ul",{className:"list-disc pl-5 space-y-1",children:[a.jsx("li",{children:"User account will be permanently deleted"}),a.jsx("li",{children:"All authentication access will be revoked"}),a.jsx("li",{children:"User will be removed from all sessions"}),a.jsx("li",{children:"This action cannot be undone"})]})})]})]})}),a.jsxs("div",{className:"flex gap-3",children:[a.jsx("button",{onClick:Ti,disabled:qe,className:"flex-1 px-4 py-2.5 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:"Cancel"}),a.jsx("button",{onClick:qs,disabled:qe,className:"flex-1 px-4 py-2.5 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center",children:qe?a.jsxs(a.Fragment,{children:[a.jsxs("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",fill:"none",viewBox:"0 0 24 24",children:[a.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),a.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Deleting..."]}):"Delete User Permanently"})]})]})})}),$t&&a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4 overflow-y-auto",onClick:sa,children:a.jsx("div",{className:"bg-white rounded-lg shadow-xl max-w-3xl w-full my-8 max-h-[90vh] overflow-y-auto",onClick:S=>S.stopPropagation(),children:a.jsxs("div",{className:"p-6",children:[a.jsxs("div",{className:"flex items-start mb-6",children:[a.jsx("div",{className:"flex-shrink-0 w-12 h-12 rounded-full bg-[#8B5A4A]/10 flex items-center justify-center",children:a.jsx(ns,{className:"h-6 w-6 text-[#8B5A4A]"})}),a.jsxs("div",{className:"ml-4 flex-1",children:[a.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-1",children:q==="session-admin"?"Add New Stakeholder":"Add New User"}),a.jsx("p",{className:"text-sm text-gray-600",children:q==="session-admin"?"Create a new user account and add as stakeholder to your sessions":"Create a new user account and assign roles"})]}),a.jsx("button",{onClick:sa,disabled:Wt,className:"flex-shrink-0 ml-4 p-1 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed","aria-label":"Close modal",children:a.jsx(Ms,{className:"h-5 w-5"})})]}),a.jsxs("div",{className:"space-y-4",children:[Br?a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Search Company Users (Optional)"}),Ss===!1?a.jsx("div",{className:"border border-gray-300 rounded-lg p-4 bg-blue-50",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex-1",children:[a.jsx("p",{className:"text-sm font-medium text-gray-900 mb-1",children:"Sign in with Microsoft to search company users"}),a.jsx("p",{className:"text-xs text-gray-600",children:"You need to sign in with your Microsoft account to use the company user search feature."})]}),a.jsxs("button",{type:"button",onClick:Ii,className:"ml-4 flex items-center px-4 py-2 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors shadow-sm",children:[a.jsx("img",{src:"/microsoft.svg",alt:"Microsoft",style:{width:"21px",height:"21px",marginRight:"8px"}}),a.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Sign in"})]})]})}):a.jsx(a.Fragment,{children:a.jsxs("div",{className:"relative",ref:z,children:[a.jsx("div",{className:"flex gap-2",children:a.jsxs("div",{className:"flex-1 relative",children:[a.jsx(HS,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),a.jsx("input",{type:"text",value:Qt.searchTerm,onChange:S=>{const I=S.target.value;Gt(U=>({...U,searchTerm:I})),re(I)},onFocus:()=>{Qt.results.length>0&&Gt(S=>({...S,showResults:!0}))},className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#2D4660] focus:border-transparent",placeholder:"Search by name or email (min 2 characters)..."}),Qt.isSearching&&a.jsx("div",{className:"absolute right-3 top-1/2 transform -translate-y-1/2",children:a.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-[#2D4660]"})})]})}),Qt.showResults&&Qt.results.length>0&&a.jsx("div",{className:"absolute z-10 w-full mt-1 bg-white border border-gray-300 rounded-lg shadow-lg max-h-60 overflow-y-auto",children:Qt.results.map(S=>a.jsxs("button",{type:"button",onClick:()=>ze(S),className:"w-full px-4 py-3 text-left hover:bg-gray-50 border-b border-gray-100 last:border-b-0 transition-colors",children:[a.jsx("div",{className:"font-medium text-gray-900",children:S.displayName}),a.jsx("div",{className:"text-sm text-gray-500",children:S.mail||S.userPrincipalName}),S.jobTitle&&a.jsx("div",{className:"text-xs text-gray-400 mt-0.5",children:S.jobTitle})]},S.id))}),Qt.error&&a.jsxs("div",{className:"absolute z-10 w-full mt-1 bg-red-50 border border-red-200 rounded-lg shadow-lg p-4 text-sm text-red-700",children:[a.jsx("div",{className:"font-medium mb-1",children:"Search Error"}),a.jsx("div",{className:"mb-2",children:Qt.error}),Qt.error.includes("User.ReadBasic.All")&&a.jsxs("div",{className:"mt-2 p-2 bg-red-100 rounded text-xs text-red-800",children:[a.jsx("div",{className:"font-medium mb-1",children:"To fix this:"}),a.jsxs("ol",{className:"list-decimal list-inside space-y-1 ml-2",children:[a.jsx("li",{children:"Go to Azure Portal  App registrations  Your app"}),a.jsx("li",{children:"API permissions  Add permission  Microsoft Graph  Delegated permissions"}),a.jsx("li",{children:'Add "User.ReadBasic.All" or "User.Read.All"'}),a.jsx("li",{children:'Click "Grant admin consent" (requires admin)'})]})]}),a.jsx("div",{className:"mt-2 text-xs text-red-600",children:"You can still enter the email manually below."})]}),Qt.searchTerm.length>=2&&!Qt.isSearching&&Qt.results.length===0&&!Qt.error&&a.jsx("div",{className:"absolute z-10 w-full mt-1 bg-white border border-gray-300 rounded-lg shadow-lg p-4 text-sm text-gray-500 text-center",children:"No users found. You can still enter the email manually below."})]})}),a.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"Search for users in your organization by name or email, or enter manually below"})]}):a.jsx("div",{children:a.jsx("button",{type:"button",className:"text-sm font-semibold text-[#2D4660] hover:underline focus:outline-none",onClick:()=>{vr(!0),Gt(qu())},children:"Search Company Users again"})}),a.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Full Name ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx("input",{type:"text",value:Ze.name,onChange:S=>Ot({...Ze,name:S.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#2D4660] focus:border-transparent",placeholder:"John Doe"})]}),a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Email Address ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx("input",{type:"email",value:Ze.email,onChange:S=>Ot({...Ze,email:S.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#2D4660] focus:border-transparent",placeholder:"john.doe@newmill.com"})]})]}),q==="system-admin"&&a.jsx("div",{className:"border-t border-gray-200 pt-4",children:a.jsxs("label",{className:"flex items-center gap-3 cursor-pointer",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"flex-shrink-0 w-6 h-6 flex items-center justify-center",children:a.jsx(vs,{className:"h-4 w-4 text-[#C89212] transition-transform",style:{transform:Ze.isSystemAdmin?"scale(2)":"scale(1)",transformOrigin:"center"}})}),a.jsx("span",{className:"text-sm font-medium text-gray-700",children:"System Administrator"})]}),a.jsx("input",{id:"systemAdminCheckbox",type:"checkbox",checked:Ze.isSystemAdmin,onChange:S=>Ot({...Ze,isSystemAdmin:S.target.checked}),className:"sr-only"}),a.jsx("span",{className:"flex items-center justify-center w-6 h-6 border rounded-md transition-colors",style:{borderColor:"#C89212",backgroundColor:Ze.isSystemAdmin?"#C89212":"#ffffff"},children:Ze.isSystemAdmin&&a.jsx("svg",{viewBox:"0 0 24 24",className:"w-4 h-4",stroke:"#ffffff",strokeWidth:"3",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",children:a.jsx("polyline",{points:"4 12 10 18 20 6"})})})]})}),q==="system-admin"&&a.jsxs("div",{className:"border-t border-gray-200 pt-4",children:[a.jsxs("div",{className:"w-full flex items-center gap-2 py-2 hover:bg-gray-50 rounded-lg px-2 -ml-2 transition-colors",children:[a.jsxs("button",{type:"button",className:"flex items-center gap-2 text-sm font-medium text-gray-700 flex-1 text-left",onClick:()=>xr(S=>({sessionAdmin:!S.sessionAdmin,stakeholder:!1})),children:[a.jsx("span",{className:"flex items-center justify-center",style:{transform:on?"scale(1.2)":"scale(1)"},children:a.jsx(Bn,{className:"h-4 w-4 text-[#576C71]"})}),a.jsx("span",{children:"Session Admin"}),on&&ae&&a.jsx("span",{className:"ml-2 text-xs text-gray-500",children:ae})]}),on&&a.jsx("button",{type:"button",onClick:Or,className:"px-3 py-1 rounded-full border text-xs font-semibold transition-colors hover:bg-[#576C71]/10",style:{borderColor:"#576C71",color:"#576C71",backgroundColor:"#f6fbfb"},children:"Reset"}),a.jsx(ts,{className:`h-4 w-4 text-gray-500 transition-transform ${Wr.sessionAdmin?"rotate-180":""}`})]}),Wr.sessionAdmin&&a.jsxs("div",{className:"mt-3 ml-6 space-y-3",children:[a.jsx("div",{children:a.jsx(xh,{products:Yt,value:Er,onChange:S=>{is(S),Ot(I=>({...I,sessionAdminIds:[]})),Hr(!0)},label:"Product *"})}),Er&&a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Session Selection *"}),a.jsxs("div",{className:"inline-flex items-center bg-gray-100 rounded-lg p-1",children:[a.jsx("button",{type:"button",onClick:()=>Hr(!1),className:`px-4 py-2 rounded-md text-sm font-medium transition-colors flex items-center ${fr?"text-gray-600 hover:text-gray-900":"bg-white text-[#2d4660] shadow-sm"}`,children:"Select Sessions"}),a.jsx("button",{type:"button",onClick:()=>{Hr(!0),Ot(S=>({...S,sessionAdminIds:[]}))},className:`px-4 py-2 rounded-md text-sm font-medium transition-colors flex items-center ${fr?"bg-white text-[#2d4660] shadow-sm":"text-gray-600 hover:text-gray-900"}`,children:"All Sessions"})]}),fr&&a.jsx("p",{className:"mt-2 text-xs text-gray-500",children:"User will be added to all current and future sessions for this product"})]}),!fr&&a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Sessions * (Current and Future)"}),Yn.length===0?a.jsx("p",{className:"text-sm text-gray-500",children:"No current or future sessions found for this product."}):a.jsx("div",{className:"max-h-48 overflow-y-auto border border-gray-300 rounded-md p-2",children:Yn.map(S=>a.jsxs("label",{className:"flex items-start px-3 py-2 hover:bg-gray-50 cursor-pointer border-b border-gray-100 last:border-b-0",children:[a.jsx("input",{type:"checkbox",checked:Ze.sessionAdminIds.includes(S.id),onChange:()=>Lt(S.id),className:"w-4 h-4 border-gray-300 rounded focus:ring-[#2D4660] accent-green-600 mt-1",style:{accentColor:"#16a34a"}}),a.jsxs("div",{className:"ml-3 flex-1",children:[a.jsxs("div",{className:"flex items-start justify-between gap-2",children:[a.jsx("div",{className:"text-sm font-medium text-gray-900",children:S.title||"Unnamed Session"}),a.jsx("span",{className:`text-xs font-medium ${jn(S).color}`,children:jn(S).text})]}),a.jsx("div",{className:"text-xs text-gray-500 mt-0.5",children:lr(S)})]})]},S.id))})]})]})]})]}),q==="session-admin"?a.jsxs("div",{className:"border-t border-gray-200 pt-4",children:[a.jsxs("div",{className:"flex items-center mb-3",children:[a.jsx(gs,{className:"h-4 w-4 mr-2 text-[#8B5A4A]"}),a.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Add as Stakeholder"}),Ze.stakeholderSessionIds.length>0&&a.jsx("span",{className:"ml-2 px-2 py-0.5 bg-[#8B5A4A]/10 text-[#8B5A4A] text-xs rounded-full",children:Ze.stakeholderSessionIds.length})]}),a.jsxs("div",{className:"space-y-3",children:[a.jsx("div",{children:a.jsx(xh,{products:Yt,value:Mt,onChange:S=>{Mr(S),Ot(I=>({...I,stakeholderSessionIds:[]})),an(!0)},label:"Product *"})}),Mt&&a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Session Selection *"}),a.jsxs("div",{className:"inline-flex items-center bg-gray-100 rounded-lg p-1",children:[a.jsx("button",{type:"button",onClick:()=>{an(!1)},className:`px-4 py-2 rounded-md text-sm font-medium transition-colors flex items-center ${Tt?"text-gray-600 hover:text-gray-900":"bg-white text-[#2d4660] shadow-sm"}`,children:"Select Sessions"}),a.jsx("button",{type:"button",onClick:()=>{an(!0),Ot(S=>({...S,stakeholderSessionIds:[]}))},className:`px-4 py-2 rounded-md text-sm font-medium transition-colors flex items-center ${Tt?"bg-white text-[#2d4660] shadow-sm":"text-gray-600 hover:text-gray-900"}`,children:"All Sessions"})]}),Tt&&a.jsx("p",{className:"mt-2 text-xs text-gray-500",children:"User will be added to all current and future sessions for this product"})]}),!Tt&&a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Sessions * (Current and Future)"}),ir.length===0?a.jsx("p",{className:"text-sm text-gray-500",children:"No current or future sessions found for this product."}):a.jsx("div",{className:"max-h-48 overflow-y-auto border border-gray-300 rounded-md p-2",children:ir.map(S=>a.jsxs("label",{className:"flex items-start px-3 py-2 hover:bg-gray-50 cursor-pointer border-b border-gray-100 last:border-b-0",children:[a.jsx("input",{type:"checkbox",checked:Ze.stakeholderSessionIds.includes(S.id),onChange:()=>or(S.id),className:"w-4 h-4 border-gray-300 rounded focus:ring-[#2D4660] accent-green-600 mt-1",style:{accentColor:"#16a34a"}}),a.jsxs("div",{className:"ml-3 flex-1",children:[a.jsx("div",{className:"text-sm font-medium text-gray-900",children:S.title||"Unnamed Session"}),a.jsx("div",{className:"text-xs text-gray-500 mt-0.5",children:lr(S)}),a.jsx("div",{className:"text-xs mt-0.5",children:a.jsx("span",{className:`font-medium ${jn(S).color}`,children:jn(S).text})})]})]},S.id))})]})]})]})]}):a.jsxs("div",{className:"border-t border-gray-200 pt-4",children:[a.jsxs("div",{className:"w-full flex items-center gap-2 py-2 hover:bg-gray-50 rounded-lg px-2 -ml-2 transition-colors",children:[a.jsxs("button",{type:"button",className:"flex items-center gap-2 text-sm font-medium text-gray-700 flex-1 text-left",onClick:()=>xr(S=>({stakeholder:!S.stakeholder,sessionAdmin:!1})),children:[a.jsx("span",{className:"flex items-center justify-center",style:{transform:xn?"scale(1.2)":"scale(1)"},children:a.jsx(gs,{className:"h-4 w-4 text-[#8B5A4A]"})}),a.jsx("span",{children:"Stakeholder"}),xn&&ke&&a.jsx("span",{className:"ml-2 text-xs text-gray-500",children:ke})]}),xn&&a.jsx("button",{type:"button",onClick:ra,className:"px-3 py-1 rounded-full border text-xs font-semibold transition-colors hover:bg-[#8B5A4A]/10",style:{borderColor:"#8B5A4A",color:"#8B5A4A",backgroundColor:"#fcf8f4"},children:"Reset"}),a.jsx(ts,{className:`h-4 w-4 text-gray-500 transition-transform ${Wr.stakeholder?"rotate-180":""}`})]}),Wr.stakeholder&&a.jsxs("div",{className:"mt-3 ml-6 space-y-3",children:[a.jsx("div",{children:a.jsx(xh,{products:Yt,value:Mt,onChange:S=>{Mr(S),Ot(I=>({...I,stakeholderSessionIds:[]})),an(!0)},label:"Product *"})}),Mt&&a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Session Selection *"}),a.jsxs("div",{className:"inline-flex items-center bg-gray-100 rounded-lg p-1",children:[a.jsx("button",{type:"button",onClick:()=>{an(!1)},className:`px-4 py-2 rounded-md text-sm font-medium transition-colors flex items-center ${Tt?"text-gray-600 hover:text-gray-900":"bg-white text-[#2d4660] shadow-sm"}`,children:"Select Sessions"}),a.jsx("button",{type:"button",onClick:()=>{an(!0),Ot(S=>({...S,stakeholderSessionIds:[]}))},className:`px-4 py-2 rounded-md text-sm font-medium transition-colors flex items-center ${Tt?"bg-white text-[#2d4660] shadow-sm":"text-gray-600 hover:text-gray-900"}`,children:"All Sessions"})]}),Tt&&a.jsx("p",{className:"mt-2 text-xs text-gray-500",children:"User will be added to all current and future sessions for this product"})]}),!Tt&&a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Sessions * (Current and Future)"}),ir.length===0?a.jsx("p",{className:"text-sm text-gray-500",children:"No current or future sessions found for this product."}):a.jsx("div",{className:"max-h-48 overflow-y-auto border border-gray-300 rounded-md p-2",children:ir.map(S=>a.jsxs("label",{className:"flex items-start px-3 py-2 hover:bg-gray-50 cursor-pointer border-b border-gray-100 last:border-b-0",children:[a.jsx("input",{type:"checkbox",checked:Ze.stakeholderSessionIds.includes(S.id),onChange:()=>or(S.id),className:"w-4 h-4 border-gray-300 rounded focus:ring-[#2D4660] accent-green-600 mt-1",style:{accentColor:"#16a34a"}}),a.jsxs("div",{className:"ml-3 flex-1",children:[a.jsxs("div",{className:"flex items-start justify-between gap-2",children:[a.jsx("div",{className:"text-sm font-medium text-gray-900",children:S.title||"Unnamed Session"}),a.jsx("span",{className:`text-xs font-medium ${jn(S).color}`,children:jn(S).text})]}),a.jsx("div",{className:"text-xs text-gray-500 mt-0.5",children:lr(S)})]})]},S.id))})]})]})]})]})]}),a.jsx("div",{className:"mt-6 pt-6 border-t border-gray-200 flex justify-end",children:a.jsx("button",{onClick:et,disabled:!!(Wt||!Ze.name.trim()||!Ze.email.trim()||q==="session-admin"&&(!Mt||!Tt&&Ze.stakeholderSessionIds.length===0)||q==="system-admin"&&Wr.sessionAdmin&&Er&&!fr&&Ze.sessionAdminIds.length===0||q==="system-admin"&&Wr.stakeholder&&Mt&&!Tt&&Ze.stakeholderSessionIds.length===0),className:"px-4 py-2.5 bg-[#2D4660] text-white rounded-lg hover:bg-[#173B65] transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center",children:Wt?a.jsxs(a.Fragment,{children:[a.jsxs("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",fill:"none",viewBox:"0 0 24 24",children:[a.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),a.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),Re(!0)]}):Re(!1)})})]})})}),Ve&&ht&&a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:a.jsx("div",{className:"bg-white rounded-lg shadow-xl max-w-lg w-full max-h-[90vh] overflow-y-auto",children:a.jsxs("div",{className:"p-6",children:[a.jsxs("div",{className:"flex items-start mb-4",children:[a.jsx("div",{className:"flex-shrink-0 w-12 h-12 rounded-full bg-blue-100 flex items-center justify-center",children:a.jsx(td,{className:"h-6 w-6 text-blue-600"})}),a.jsxs("div",{className:"ml-4 flex-1",children:[a.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-1",children:"Edit User"}),a.jsx("p",{className:"text-sm text-gray-600",children:"Update user name and email address"})]}),a.jsx("button",{onClick:()=>{Ne(!1),pt(null),Pe(""),Ar("")},className:"flex-shrink-0 ml-4 p-1 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-lg transition-colors","aria-label":"Close modal",children:a.jsx(Ms,{className:"h-5 w-5"})})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Full Name ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx("input",{type:"text",value:gt,onChange:S=>Pe(S.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#2D4660] focus:border-transparent",placeholder:"John Doe",disabled:Pr})]}),a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Email Address ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx("input",{type:"email",value:ar,onChange:S=>Ar(S.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#2D4660] focus:border-transparent",placeholder:"john.doe@newmill.com",disabled:Pr})]})]}),a.jsxs("div",{className:"flex justify-end gap-3 mt-6",children:[a.jsx("button",{onClick:()=>{Ne(!1),pt(null),Pe(""),Ar("")},className:"px-4 py-2.5 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",disabled:Pr,children:"Cancel"}),a.jsx("button",{onClick:Cs,disabled:Pr||!gt.trim()||!ar.trim(),className:"px-4 py-2.5 bg-[#2D4660] text-white rounded-lg hover:bg-[#173B65] transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:Pr?"Updating...":"Update User"})]})]})})}),ks&&Bs&&a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:a.jsx("div",{className:"bg-white rounded-lg shadow-xl max-w-lg w-full max-h-[90vh] overflow-y-auto",children:a.jsxs("div",{className:"p-6",children:[a.jsxs("div",{className:"flex items-start mb-4",children:[a.jsx("div",{className:"flex-shrink-0 w-12 h-12 rounded-full bg-green-100 flex items-center justify-center",children:a.jsx(sr,{className:"h-6 w-6 text-green-600"})}),a.jsxs("div",{className:"ml-4 flex-1",children:[a.jsxs("h2",{className:"text-xl font-bold text-gray-900 mb-1",children:[Bs.userType," Created Successfully!"]}),a.jsx("p",{className:"text-sm text-gray-600",children:"The user account has been created and roles have been assigned."})]}),a.jsx("button",{onClick:()=>{Fr(!1),sn(null)},className:"flex-shrink-0 ml-4 p-1 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-lg transition-colors","aria-label":"Close modal",children:a.jsx(Ms,{className:"h-5 w-5"})})]}),a.jsx("div",{className:"bg-gray-50 rounded-lg p-4 mb-4",children:a.jsx("div",{className:"space-y-3",children:a.jsxs("div",{children:[a.jsx("div",{className:"text-xs font-semibold text-gray-500 uppercase mb-1",children:"Email Address"}),a.jsx("div",{className:"text-sm font-medium text-gray-900",children:Bs.email})]})})}),a.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-3 mb-4",children:a.jsxs("div",{className:"flex",children:[a.jsx(Ku,{className:"h-5 w-5 text-blue-600 flex-shrink-0 mt-0.5"}),a.jsxs("div",{className:"ml-2",children:[a.jsx("div",{className:"text-sm font-semibold text-blue-800 mb-1",children:"User Authentication"}),a.jsx("div",{className:"text-xs text-blue-700",children:"The user will sign in using their company Azure AD credentials. No password is needed."})]})]})}),a.jsx("div",{className:"flex justify-end",children:a.jsx("button",{onClick:()=>{Fr(!1),sn(null)},className:"px-4 py-2.5 bg-[#2D4660] text-white rounded-lg hover:bg-[#173B65] transition-colors",children:"Done"})})]})})})]}):null}const JZ="/feature-voting-app/assets/bottom-left-curve-T4fflHT3.png",XZ=()=>a.jsx("div",{className:"fixed bottom-0 left-0 pointer-events-none z-0",children:a.jsx("img",{src:JZ,alt:"",style:{maxWidth:"600px",height:"auto",opacity:.2}})});function QZ(){return a.jsx(TM,{children:a.jsxs(MR,{children:[a.jsx(XZ,{}),a.jsx(T5,{basename:"/feature-voting-app",children:a.jsxs(l5,{children:[a.jsx(Gs,{path:"/",element:a.jsx(a5,{to:"/login",replace:!0})}),a.jsx(Gs,{path:"/login",element:a.jsx(FZ,{})}),a.jsx(Gs,{path:"/sessions",element:a.jsx(zZ,{})}),a.jsx(Gs,{path:"/create-session",element:a.jsx(UZ,{})}),a.jsx(Gs,{path:"/manage-stakeholders",element:a.jsx(WZ,{})}),a.jsx(Gs,{path:"/manage-admins",element:a.jsx(qZ,{})}),a.jsx(Gs,{path:"/vote",element:a.jsx($v,{adminMode:!1})}),a.jsx(Gs,{path:"/admin",element:a.jsx($v,{adminMode:!0})}),a.jsx(Gs,{path:"/results",element:a.jsx($v,{resultsMode:!0})}),a.jsx(Gs,{path:"/unauthorized",element:a.jsx(VZ,{})}),a.jsx(Gs,{path:"/system-admins",element:a.jsx(HZ,{})}),a.jsx(Gs,{path:"/users",element:a.jsx(YZ,{})})]})})]})})}if(typeof window<"u"){const e=console.error;console.error=(...t)=>{var n;const r=((n=t[0])==null?void 0:n.toString())||"";r.includes("runtime.lastError")||r.includes("message channel closed")||e.apply(console,t)}}yD.createRoot(document.getElementById("root")).render(a.jsx(it.StrictMode,{children:a.jsx(QZ,{})}));
